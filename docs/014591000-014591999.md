# StackOverflow 问答 14591000-14591999

# php - 在所有手机和设备上禁用 JW player 6

> ID：14591000
> 
> 赞同：2
> 
> 时间：2013-01-29T19:48:53.813
> 
> 标签：php, javascript, android, jquery, flash

据我所知，flv 可以在 Andriod 手机上播放。我想自定义 jwplayer 6 以仅在网络浏览器上播放视频，并在所有手机上禁用播放器以进行发布者嵌入选项。

*   如果我使用 flv 格式，视频仍然可以在 Android 手机上播放。

    ```
    file: 'http://www.example.com/media/trailer.flv', 
    ```

*   如果我将 Primary 设置为“flash”并将 Fallback 设置为“false”以禁用回退到 html5 播放器，Android 手机仍然可以在 flash 播放器中播放视频。

    ```
    primary: 'flash',    
    fallback: 'false', 
    ```

*   PHP 移动检测不够安全，发布者可以发送虚假用户代理来欺骗脚本。

对我有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:50:47.523

我会尝试使用 Modernizr - [http://modernizr.com/](http://modernizr.com/)

这样，您就可以检测浏览器是否具有该功能，而不是试图跟上浏览器标头不断变化和欺骗的世界。

# jquery - jQuery 中的 .get() 方法

> ID：14591003
> 
> 赞同：2
> 
> 时间：2013-01-29T19:49:01.403
> 
> 标签：jquery

我想知道`.get()`jquery 中的方法。[我刚刚在http://api.jquery.com/get/](http://api.jquery.com/get/)上阅读了有关该`.get()`方法的博客。我使用的是相同的 html，但它没有给出文档中显示的结果。谁能`.get()`用实际的方式解释一下。什么，何时以及如何使用它。

```
<ul>
  <li id="foo">foo</li>
  <li id="bar">bar</li>
</ul>

<script>
    $(function(){alert($("li").get())})
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T19:49:40.180

该`.get()`方法用于返回集合中的原生 DOM 元素。您可以选择将索引传递给`get`，它只会返回该元素。

当您想将 jQuery 与本机 DOM API 混合使用时，这有时很有用。您可以使用 jQuery 来遍历 DOM，然后调用`get`它，以便您可以调用其上的本机函数。

[这是**一个小提琴**](http://jsfiddle.net/JnKCu/)`scrollIntoView`，通过使用本机方法来证明这一点。

* * *

如果要从集合中获取单个元素，还可以使用常规的类似数组的括号表示法：

```
 $('li')[0] === $('li').get(0); 
```

* * *

**PS**不要将此与[`.eq()`](http://api.jquery.com/eq/)方法混淆，该方法也将返回指定索引处的元素，但包装在jQuery中。

# c++ - Winsock 重叠 IO 和消息解析

> ID：14591004
> 
> 赞同：0
> 
> 时间：2013-01-29T19:49:02.390
> 
> 标签：c++, overlap, winsock2

我必须实现一个（客户端）套接字，它需要在 Windows 7 服务器上运行的高吞吐量（> 800Mbps）和低延迟。重叠 IO 似乎是实现高性能的方法。

阅读有关该主题的一些文档，据我所知，重叠 I/O 的优点是您将一些带有缓冲区的结构传递给操作系统，并且当它们被填充时您会收到通知。

不，我想知道将其与基于数据包的协议（长度分隔的数据包，标头包含数据块的大小）结合起来的常见方法是什么，当然我可以读取任意数据块并将所需的字节数复制到消息结构中。这意味着额外的复制操作。

第二个选项可能是将消息结构作为具有标头大小的缓冲区传递，在将其返回后再次传递相同的结构以读取请求的数据字节数。在这种情况下，第一次读取的块很小，但数据被保存到消息结构中，当数据块读取处于挂起状态时，可以初始化下一个头块的读取。

任何经验或想法如何最有效地处理长度分隔的数据包？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:51:35.110

如果您知道数据包大小，请查看[scatter/gather I/O 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740138%28v=vs.85%29.aspx)

# redirect - 在 Struts2 中，当重定向到另一个操作时，命名变量不会被清除

> ID：14591012
> 
> 赞同：2
> 
> 时间：2013-01-29T19:49:37.290
> 
> 标签：redirect, struts2, named-parameters, valuestack

从另一个动作重定向到一个动作时，我遇到了一个奇怪的问题。简而言之，在第一个动作（我从中重定向）中捕获的命名变量仍然以某种方式保留在值堆栈中，并且它在第二个动作中覆盖了相同的命名变量。我将通过一些代码进行解释。

```
<action name="r/{seoURL}" class="ReportsAction"
    method="displayReport">
    ...
    <result name="REDIRECT_TO_NEXT_ACTION" type="redirectAction">
        <param name="actionName">s/${seoURLForRedirect}</param>
        <param name="namespace">/reports</param>
    </result>
    ...
</action> 
```

我在返回之前设置`${seoURLForRedirect}`变量`ReportsAction`。对于第二个动作，我有以下映射。

```
<action name="s/{seoURL}" class="ReportSeriesAction"
    method="displayReportSeries">
    ...
</action> 
```

如您所见，我在第二个操作中具有相同的命名变量`seoURL`。此值设置为在第一个操作中找到的值。我不明白为什么值堆栈仍然保持`seoURL`在第一个操作中设置的值。特别是因为我在重定向结果参数中写完了它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:57:34.280

根据您的`class`操作属性，我假设您使用的是 Spring 插件。

必须将操作声明为`scope="prototype"`/non-singleton 才能按请求实例化。

如果不是，您使用的是单例，并且属性将跨请求维护。

我从未尝试将`redirectAction`'s设置`actionName`为指向另一个通配符操作的通配符，所以我不确定问题的第二部分。

# python - 从未知字符编码的字符串中转储 JSON

> ID：14591018
> 
> 赞同：4
> 
> 时间：2013-01-29T19:49:52.937
> 
> 标签：python, json, serialization, unicode, iso

我正在尝试将 HTML 从网站转储到 JSON，我需要一种方法来处理不同的字符编码。

我读过如果不是utf-8，它可能是ISO-8859-1，所以我现在正在做的是：

```
for possible_encoding in ["utf-8", "ISO-8859-1"]:
   try:
      # post_dict contains, among other things, website html retrieved
      # with urllib2
      json = simplejson.dumps(post_dict, encoding=possible_encoding)
      break
   except UnicodeDecodeError:
      pass
if json is None:
      raise UnicodeDecodeError 
```

如果我遇到任何其他编码，这当然会失败，所以我想知道在一般情况下是否有办法解决这个问题。

我首先尝试序列化 HTML 的原因是因为我需要在 POST 请求中将它发送到我们的 NodeJS 服务器。因此，如果有人有不同的解决方案允许我这样做（可能根本不需要序列化为 JSON），我也很高兴听到这个消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:22:43.097

无论您用于发送 POST 请求的媒体类型如何，您都应该知道字符编码（除非您想发送二进制 blob）。要获取 html 内容的字符编码，请参阅 [A good way to get the charset/encoding of an HTTP response in Python](https://stackoverflow.com/questions/14592762/a-good-way-to-get-the-charset-encoding-of-an-http-response-in-python) 。

要`post_dict`以 json 格式发送，请确保其中的所有字符串都是 Unicode（只需在收到 html 后立即将其转换为 Unicode）并且不要使用`encoding`参数进行`json.dumps()`调用。如果不同的网站（您获取 html 字符串的位置）使用不同的编码，则该参数无论如何都不会帮助您。

# c# - 在 ASP.net MVC 的视图层中获取当前 URL

> ID：14591021
> 
> 赞同：2
> 
> 时间：2013-01-29T19:50:01.050
> 
> 标签：c#, asp.net-mvc, web-applications

我已经在这里和其他网站上阅读了一些以前的问题，但是作为 ASP.net 和 MVC 的新手，我在理解所提供的信息时遇到了一些麻烦。

我想要/需要/被告知通过 View 层获取我所在页面的当前 URL，并使用该信息将 id 应用于允许特定 css 的 li 标签。我们已将左侧导航栏从嵌入每个页面（由以前的合作社完成）移动到将列表置于部分视图中，我将在所有必需页面上调用该列表。网站的样式要求在左侧导航中有一个特定的突出显示用户当前所在页面的标签。

我读过的一些例子包括使用：

```
<%= Request.Url.PathAndQuery %>

Request.Url.ToString() or Request.Url.AbsoluteUri

var request = HttpContext.Current.Request 
```

但我知道并非所有这些都可以在视图层中使用。最好的方法是什么？有没有我还没有找到任何人可以推荐的教程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T20:00:06.483

在我看来，使用 URL 可能不是最好的主意。

相反，实现此目的的一种快速简便的方法是使用`ViewContext.RouteData`将包含当前请求的控制器和操作的值。它可以很容易地从视图层访问。

```
ViewContext.RouteData.Values["Controller"].ToString()
ViewContext.RouteData.Values["Action"].ToString() 
```

所以在你看来，你可以做类似的事情

```
<ul class="nav">
    <li class="@(ViewContext.RouteData.Values["Controller"].ToString() == "ControllerName" ? "active" : "")"><a href="#">Foo</a></li>
</ul> 
```

您可以进一步推动它以使其更漂亮，但您了解基本概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-19T14:44:05.943

我正在为 asp.net 3.0 寻找解决方案，并找到以下内容以直接访问 URL 路径（您当前正在加载/显示的页面）：

```
ViewContext.HttpContext.Request.Path 
```

我在 if 语句中使用它来动态决定不同的视图导入，效果很好。

# php - MySQL 正则表达式用于在正文中查找带有双斜杠的内部 URL

> ID：14591023
> 
> 赞同：4
> 
> 时间：2013-01-29T19:50:12.710
> 
> 标签：php, mysql, sql, regex

我们有一个使用 wordpress 的网站，我们发现在某些时候，一个错误的插件或用户错误在 siteurl 之后添加了双斜杠（例如，`http://example.site//category1/`或`http://example.site/category1//category2/`等。

这似乎有效，但似乎没有足够的结果。

```
SELECT id, post_content
FROM `wp_posts`
where post_content
regexp '(href="[^"]*[^:]\/\/[^"]*)'
and post_status  in('draft','publish')
order by id asc 
```

有一个更好的方法吗？我不希望它与 http: 之后的双斜杠匹配，因此 : 上的负匹配。

编辑：为澄清起见，我想查找所有帖子（wordpress 帖子/页面的正文），其 url 硬编码到具有双斜杠的页面中，但在 http: 之后的双斜杠不匹配。

正则表达式应匹配以下内容： `http://example.site//category1/`或`http://example.site/category1//category2/`或什`http://example.site/category1/category2//`至或`example.site/category1//category2/`

但不应与以下内容匹配： `http://example.site/category1/`或`http://example.site/category1/category2/`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:01:38.977

也许这样的事情会奏效。

```
SELECT *
FROM wp_posts
WHERE CASE WHEN instr(post_content,'http://') > 0 THEN 
  substring(post_content,7) regexp '\/\/'
ELSE
  post_content regexp '\/\/'
END 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/edee2/12)。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:20:06.523

你可以使用：

```
regexp '(https?:\/\/|www\.)[^ ]*\/\/' 
```

如果帖子包含`http[s]://`或`www.`后跟包含其中的非空格字符，这将匹配帖子`//`。

请参阅此[SQLFiddle](http://sqlfiddle.com/#!2/84d15/1)（改编自 sgeddes 的小提琴）。

或者您可以将您的正则表达式缩减为`'[^:]\/\/'`并查找包含该内容的帖子。

# drools - DROOLS 规则流的一部分不能随机工作

> ID：14591025
> 
> 赞同：0
> 
> 时间：2013-01-29T19:50:16.333
> 
> 标签：drools, rule-engine

我们有一个主规则流，它通过 AND 拆分器调用另外 8 个规则流（Rule1.rf 到 Rule8.rf）。规则流之一——比如Rules4.rf——有时会被触发，有时不会被触发。

这是一个在线应用程序，我们使用 jBoss。服务器启动后，一切正常。几个小时后，对于某些请求，Rules4.rf 根本没有被触发，而对于其他请求，它被正确触发。

我们甚至一次又一次地发布了相同的请求，但问题只发生了几次。成功和失败请求之间的日志没有区别，除了来自 Rules4.rf 的日志在失败的请求中丢失。

我们正在使用 drools 5.1 和 java 6。请帮助我。这是一个非常大的问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T22:14:45.863

如果不查看实际代码和日志，很难弄清楚可能发生了什么。您能否创建一个 JIRA 并附加该过程，如果可能的话（部分）显示该问题的审计日志？

克里斯

# objective-c - 如何覆盖自动布局（在 UICollectionView 中）

> ID：14591027
> 
> 赞同：1
> 
> 时间：2013-01-29T19:50:21.747
> 
> 标签：objective-c, uicollectionview, autolayout

我有一个 UICollectionView 和一个包含子视图的自定义 UICollectionViewCell。我正在这个 CollectionViewCell 中做一些“深奥”的事情，并希望通过手动使用 setFrame 重新排列所有子视图。如何覆盖所有自动布局行为？

我试图覆盖“-(void) layoutSubviews”并绘制矩形。有时这有效，有时无效。

如果我通过使用得到一个单元格

```
UIMyCell *cell = (UIMyCell*)[collectionView dequeueReusableCellWithReuseIdentifier:@"UIMyCell" forIndexPath:indexPath]; 
```

我得到了我的自定义单元格。我可以分配自定义属性，一切都很好。但是这个单元格的框架最初是 (0, 0, 0, 0)。

稍后将设置布局。如果子系统正在设置大小，我希望得到“通知”。

然后我想设置所有没有自动布局的子视图框架。

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:29:57.720

最后我找到了答案。在 OS X (NSView) 上

```
 -(void) setFrame:(CGRect)frame 
```

将在更新所有约束以设置新的视图位置和大小后调用。在 iOS 上 (UIView)

```
-(void) setCenter:(CGPoint)center
and
-(void)setBounds:(CGRect)bounds 
```

将被调用。所以覆盖 setFrame 不适用于 iOS 框架。

# mysql - 增加mysql表中的所有值

> ID：14591028
> 
> 赞同：1
> 
> 时间：2013-01-29T19:50:22.757
> 
> 标签：mysql, increment, auto-increment

可以说我有

```
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| id          | int(11)      | YES  | UNI | NULL    |       |
| isbn        | varchar(20)  | NO   |     | NULL    |       |
| title       | varchar(200) | YES  |     | NULL    |       |
| author      | varchar(200) | YES  |     | NULL    |       |
+-------------+--------------+------+-----+---------+-------+ 
```

主键是 isbn （我现在已经删除了它，并且我已经添加了 id （我将很快成为主键）在我可以这样做之前我需要确保所有 id 都是唯一的（所以我想更新所有值以从1个；

我尝试了以下方法，但没有任何建议？

```
SET @bookid = 1; UPDATE books SET `id` = @bookid + 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:56:02.817

用这个：

```
ALTER TABLE books AUTO_INCREMENT=1; 
```

或者如果您还没有 id 列，也添加它

```
ALTER TABLE books ADD id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    ADD INDEX (id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:01:22.367

我想你正在寻找类似的东西

```
 SET @bookid = 1; 
   UPDATE books SET `id` =`id`+ @bookid ; 
```

您的查询将始终给出 id = 2

# mongodb - 使用聚合框架从预先聚合的数据集中获取峰值

> ID：14591030
> 
> 赞同：0
> 
> 时间：2013-01-29T19:50:27.640
> 
> 标签：mongodb, mongodb-query

我有一些指标集合，它们预先聚合到小时和分钟集合中，如下所示：

```
"_id" : "12345CHA-2RU020130104",
"metadata" : {
                "adaptor_id" : "CHA-2RU",
                "processor_id" : NumberLong(0),
                "date" : ISODate("2013-01-04T00:00:00Z"),
                "processor_type" : "CHP",
                "array_serial" : NumberLong(12345)
        },
"hour" : {
            "11" : 4.6665907,
            "21" : 5.9431519999999995,
            "7" : 0.6405864,
            "17" : 4.712744,
        ---etc---
    },  
"minute" : {
            "11" : {
                "33" : 4.689972,
                "32" : 4.7190895,
            ---etc---                        
                },
            "3" : {
                "45" : 5.6883,
                "59" : 4.792,
            ---etc---
            } 
```

分钟集合每个小时都有一个子文档，其中每分钟都有一个条目，其中包含该分钟的度量值。

我的问题是关于聚合框架，如果我想找到指标高于某个高水位线的所有分钟数，我应该如何处理这个集合？调查聚合框架显示了一个 $unwind 函数，但这似乎只适用于数组..

map/reduce 功能会更适合这个吗？有了它，我可以简单地发出高于高水位线的任何条目并计算它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:13:53.413

您可以使用遍历对象属性的 reduce 函数构建“键”数组。

```
 reduce: function(obj,prev)
 {
    for(var key in obj.minute) {
        prev.results.push( { hour:key, minutes: obj.minute[key]});
    }
 } 
```

会给你类似的东西

```
 {
          "results" : [
                  {
                          "hour" : "11",
                          "minutes" : {
                                  "33" : 4.689972,
                                  "32" : 4.7190895
                          }
                  },
                  {
                          "hour" : "3",
                          "minutes" : {
                                  "45" : 5.6883,
                                  "59" : 4.792
                          }
                  }
          ]
  } 
```

我刚刚使用 group() 进行了快速测试 - 您需要更复杂的东西来迭代子子文档（分钟），但希望为您指明正确的方向。

`db.yourcoll.group( {
initial: { results: [] }, reduce: function(obj,prev) { for(var key in obj.minute) { prev.results.push( { hour:key, minutes: obj.minute[key]}); } } } );`

在终结器中，您可以再次重塑数据。它不会很漂亮，将分钟和小时数据保存为数组而不是文档的元素可能更容易。

希望它有所帮助

# c# - WCF 代理出现故障但未引发异常

> ID：14591032
> 
> 赞同：0
> 
> 时间：2013-01-29T19:50:39.107
> 
> 标签：c#, .net, wcf

我有一个访问服务以执行两个调用的方法。这是（简化的）客户端代码：

```
try
{
    using (var client = new IntegrationServiceClient())
    {
        int taskID = client.CreateTask(param, taskType, taskDate);
        if (taskID < 0)
        {
            //There was some error
            return -1;
        }

        if (!client.ExecuteTask(taskID, taskType))
        {
            //There was some error
        }
    }
}
catch (Exception ex)
{
    LogManager.Log("Error while creating and executing task", ex);
} 
```

我`CommunicationObjectFaultedException`只在第二次通话时遇到异常。这怎么可能？如果有某种错误，我不应该`FaultException`在第一次通话后得到一个（或其他一些例外）吗？除了异常之外，还有什么东西会导致代理进入故障状态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:35:18.823

似乎有一个坏`web.config`文件。堆栈跟踪告诉我第二次调用出现错误，因为这是语句中最后一个有意义的行`using`，之后代理被处理。`CommunicationObjectFaultedException`仅在处理代理时引发。

正是代码的编写方式导致堆栈跟踪看起来像是在调用第二种方法时引发了异常。

# java - 是使用多维数组，还是使用 hashCodes 的简单数组

> ID：14591036
> 
> 赞同：0
> 
> 时间：2013-01-29T19:50:52.523
> 
> 标签：java, arrays, multidimensional-array

对于一个 Java 项目，我需要使用 5 个 ENUM 类型来索引一个 3 维双精度数组，它们为 3D 直线空间中的几个 XYZ 点中的每一个定义一个特定属性。像这样组织它会更好：

```
double[][][][][][][][] arr =
        new double[enum1Size][enum2Size][enum3Size][enum4Size][enum5Size]
                [maxX+1][maxY+1][maxZ+1];

arr[enum1][enum2][enum3][enum4][enum5][x][y][z] = theDouble; 
```

或者通过使用一个简单的数组并使用包含每个枚举的对象的 hashCode 对其进行索引：

```
class EnumIndex {
    Enum1Type enum1;
    Enum2Type enum2;
    Enum3Type enum3;
    Enum4Type enum4;
    Enum5Type enum5;

    public EnumIndex(Enum1Type enum1, Enum2Type enum2,
            Enum3Type enum3, Enum4Type enum4, Enum5Type enum5)  {
        this.enum1 = enum1;
        this.enum2 = enum2;
        this.enum3 = enum3;
        this.enum4 = enum4;
        this.enum5 = enum5;
    }

    public int hashCode() {
         // Eclipse-generated hashcode function
    }

    public static int maxHashCode() {
         // generate maximum hashcode based on maximum ordinal of each enum
    }
}

double[][][][] arr = new double[EnumIndex.maxHashcode+1][maxX+1][maxY+1][maxZ+1];

EnumIndex ei1 = new EnumIndex(enum1, enum2, enum3, enum4, enum5);

double[ei1][x][y][z] = theDouble; 
```

*   Enum1Type 有 15 个值。
*   Enum2Type 有 4 个值。
*   Enum3Type 有 4 个值。
*   Enum4Type 有 2 个值。
*   Enum5Type 有 2 个值。

*   X 范围为 0-9

*   Y 范围为 0-5
*   Z 范围为 0-22

因此，有大约 1,324,800 个双精度数要编入索引。

我打算使用 EnumMaps 的 EnumMaps，但这似乎有点矫枉过正。处理速度是这个项目的一个大问题，所以我试图避免迭代；强制运行时使用指针算法来获取正确的内存位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:55:30.547

如果速度是一个严重的问题，我建议使用空间索引结构，例如 R-tree。特别是，如果你想索引这么多的元素。我怀疑自制索引不会解决您的问题。

但是，我不知道是否有免费的 Java R-tree 实现。

**编辑：**有一个 - [http://sourceforge.net/projects/jsi/](http://sourceforge.net/projects/jsi/)

# java - Java 反序列化类在 java.lang.ClassNotFoundException 上失败，包名来自服务器

> ID：14591038
> 
> 赞同：1
> 
> 时间：2013-01-29T19:51:05.363
> 
> 标签：java, serialization

我尝试从服务器反序列化类，但在客户端我得到：

```
java.lang.ClassNotFoundException: com.server.core.StateFilesStruct 
```

在我的客户端中，具有此包名称的 StateFilesStruct 类在哪里：

```
com.client.core.StateFilesStruct 
```

这是我的课：

```
public  Object deserialize(byte[] bytes)   {
        ByteArrayInputStream b = new ByteArrayInputStream(bytes);
        ObjectInputStream o = null;
        try {
            o = new ObjectInputStream(b);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            return o.readObject();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return o;
} 
```

我发送这个的类在服务器中：

```
package com.server.core;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Hashtable;

 public class StateFilesStruct implements Serializable {
    private static final long serialVersionUID = 988633010151085730L;
    private Hashtable<String,String> Repository;
    public Hashtable<String, String> getRepository() {
        return Repository;
    }
    public void setRepository(Hashtable<String, String> repository) {
        Repository = repository;
    }
    public StateFilesStruct()
    {
        Repository = new Hashtable<String,String>();
    }
} 
```

我在客户端中保留的类与服务器类相同，但包名称不同：

```
package com.client.core;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Hashtable;

 public class StateFilesStruct implements Serializable {
    private static final long serialVersionUID = 988633010151085730L;
    private Hashtable<String,String> Repository;
    public Hashtable<String, String> getRepository() {
        return Repository;
    }
    public void setRepository(Hashtable<String, String> repository) {
        Repository = repository;
    }
    public StateFilesStruct()
    {
        Repository = new Hashtable<String,String>();
    }
} 
```

我试图解决客户端中的类的方法是：使用 ZeroMQ 从 tcpip 套接字接收

```
 byte[] byteFileStruct = m_pNetworkManager.getSocket().recv(0); 
 StateFilesStruct stateFilesStruct = (StateFilesStruct)deserialize(byteFileStruct); 
```

得到这个异常，因为你可以看到它从服务器类中寻找：

```
java.lang.ClassNotFoundException: com.server.core.StateFilesStruct
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:56:05.777

在java中，包名是类名的一部分。就 JVM 而言，这些是 2 个完全不同的类，因此您需要在类路径中反序列化相同的类。

# jquery - jQuery 提交到 iframe

> ID：14591039
> 
> 赞同：1
> 
> 时间：2013-01-29T19:51:08.280
> 
> 标签：jquery, iframe, submit

我通过 jquery 将我的表单提交到 iframe 中。我从 JSON 代码中的 php 文件中得到了结果。如何在我的 javascript 中使用这个字符串？

**形式**

```
<form target="iframe" method="post" action="upload.php" enctype="multipart/form-data">
...
</form> 
```

**来自upload.php 的响应打印到iframe**

```
{"datafile":{"name":"","type":"","tmp_name":"","error":4,"size":0}} 
```

如果来自 php 的响应到达，那么注册回调的最佳方法是什么，然后访问 datafiles 的错误属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:57:06.863

尝试将负载处理程序附加到 iframe。`$('#iframe').on('load', handler)`在处理程序中，您可以获取 iframe 正文并提取 json 并对其进行解析以供使用。你可以在处理程序中做这样的事情

```
var $body = $(this.contentDocument || this.contentWindow);
if (!$body.is('body')){
    $body = $body.find('body');
}
var data = $.parseJSON($body.html()); 
```

注意 同源政策适用，因此如果帖子发到另一个来源，这将不起作用。

# c++ - 需要帮助以 16 位二进制显示 2 的补码

> ID：14591040
> 
> 赞同：1
> 
> 时间：2013-01-29T19:51:10.533
> 
> 标签：c++, binary

> **可能重复：**
> [在 C/C++ 中高效地转换十六进制、二进制和十进制](https://stackoverflow.com/questions/819487/efficiently-convert-between-hex-binary-and-decimal-in-c-c)

我正在学习汇编语言课程，并被要求编写一个应用程序来接受一个有符号整数作为输入并输出相应的 2 的补码。我一直在互联网上试图找到有用的代码，但我唯一能找到的是转换成精确二进制的代码（不是我需要的带有前导零的 16 位格式）。这是我到目前为止的代码：

```
#include<iostream>
#include<string>
using namespace std;

string binaryArray[15] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

void toBinary(int);
void convertNegative();

int main()
{
cout << "This app converts an integer from -32768 to 32767 into 16-bit 2's complement binary format" << endl;

cout << "Please input an integer in the proper range: ";

int num;
cin >> num;

if (num < -32768 || num > 32767)
    cout << "You have entered an unacceptable number, sorry." << endl;
if (num < 0)
{
    toBinary(num);
    convertNegative();
}
else
    toBinary(num);
cout << endl;

system("pause");
return 0;
} 
```

我的 toBinary 函数是您可以在 Internet 上找到的用于十进制到二进制的函数，但它仅在我输出到控制台时才有效，并且它不适用于负数，所以我不能取 2 的补码。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:56:19.173

要计算一个数字的二进制补码，请将该数字取反（将其所有 0 位更改为 1，将其所有 1 位更改为 0），然后加一。就是这么简单。但是，您只需要首先在数字为负数的情况下这样做；非负数的二进制补码就是数字本身（未转换）。

但是您将数字作为输入，并将其存储在变量“num”中。该变量**是**二进制补码形式。这就是**您**的计算机存储它的方式。您根本不需要将其“转换”为二进制补码形式！如果您只是一次将位移出一个并打印它们，您将得到该数字的二进制补码。只需将它们按正确的顺序移动并每次都摘掉最左边的位，您就有了解决方案。它真的很短很简单。

# java - 计算重复的字母

> ID：14591051
> 
> 赞同：0
> 
> 时间：2013-01-29T19:51:50.807
> 
> 标签：java, string, int, arrays

我想得到一个字符串，计算字符串中的任何字母在字符串中出现了多少次，并打印字母和数字所以我做了什么：

```
import java.util.Scanner;
public class test1 {
public static void main(String[] args) {
    String str;
    Scanner in = new Scanner(System.in);
    System.out.println("enter name");
    str = in.nextLine();
    char[] c1 = str.toCharArray();
    int[] f = new int[str.length()];
    for(int i=0;i<str.length();i++) {
        for(int j=0;j<str.length();j++) {
            if(c1[i]==c1[j]) {
                f[i]++;
            }
        }
    }
    for(int k=0;k<c1.length;k++) {
        for(int l=0;l<c1.length;l++) {
            if(c1[k]==c1[l]) {
                if(l!=k) {c1[k]=0;f[k]=0;}
            }
        }
        System.out.println(c1[k]+"="+f[k]);
    }
}
} 
```

有两个问题：
1\. 当我打印时，它会打印两次重复的字母（或三次或更多取决于字母在字符串中出现的次数）。所以我添加了另外 2 个循环（k 和 l）来删除重复的字母，但现在不是重复的字母，而是打印我：一个正方形和一个零，我怎样才能从字符中删除字母和数字和int 数组的？（例如，当我输入名称“elichai”时，我得到：

> e=1
> l=1
> （正方形）=0
> c=1
> h=1
> a=1
> i=2

2.它删除的字母是第二个字母而不是第一个
（在“elichai”示例中，它删除了第一个'i'而不是第二个'i'）谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T19:56:16.433

解决您的问题的不同方法，但我可能会这样做：

```
String input = "Whatever";
Map<Character, Integer> charCounter = new LinkedHashMap<>(); // respects insertion order
for (char c : input.replaceAll("\\s+", "").toCharArray()) { // ignore spaces
    Integer count = charCounter.get(c);
    count = count == null ? 0 : count;
    charCounter.put(c, count + 1);
}
System.out.println(charCounter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-28T13:37:00.193

```
class Twice_Occuring
{
    void main(String s)
    {
        int count=0;
        for(int i=0;i<s.length();i++)
        {
            char c=s.charAt(i);
            int ind1=s.indexOf(c,i);
            int ind2=s.indexOf(c,i+1);
            if(ind2-ind1==1)
            {System.out.print(c+" ");count++;}
        }
        System.out.println("\n Number of counts = "+count);
    }
} 
```

# visual-studio-2012 - VS2012 中的 WebTests 未运行

> ID：14591052
> 
> 赞同：2
> 
> 时间：2013-01-29T19:51:54.480
> 
> 标签：visual-studio-2012, webtest

我们使用 VS Ultimate 进行 Web 测试和负载测试，但是自从从 VS 2010 迁移到 VS 2012 之后，Web 测试似乎不再运行了。我们曾经能够`ctrl-r` `ctrl-t`调试特定的测试，但这不再适用了。然后我发现了在上下文中运行测试的问题，所以我只是尝试运行所有测试，但这也不起作用。VS2012 的行为就像它不再将 WebTest 视为真正的测试一样。

即使我尝试在测试资源管理器中查看测试，也没有任何显示。我知道我的测试是正确的，因为我可以回到 VS 2010，并且一切仍然正常。

还有其他人有这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T04:16:09.623

Visual Studio 2012 删除了我们用于在 VS 2010 中运行测试的“测试视图”窗口。正如您所发现的，新的“测试资源管理器”窗口仅识别单元测试和编码 UI 测试。这也完全让我失望了。

要运行 Web 和负载测试（除了实际打开它们并在编辑器窗口中单击“运行”的明显但乏味的方法），您必须在解决方案资源管理器中选择要运行的测试，然后选择负载测试（菜单）> 运行> 选定的测试。或者“解决方案中的所有测试”。 ![从解决方案资源管理器运行测试](../Images/ea0debedbf50b543b987d92569369383.png)

您还可以选择运行包含在任何打开的负载测试中的各个 Web 测试。右键单击 Test Mix 节点（在 Scenario 中）或 Test Mix 中的任何测试。 ![在负载测试中运行 Web 测试](../Images/e86cdbad494a87ccece64ead6cb63cdf.png)

为了完整起见，这里是权威来源：http: [//msdn.microsoft.com/en-us/library/ms182541.aspx](http://msdn.microsoft.com/en-us/library/ms182541.aspx)

顺便说一句，这里还有一个问题：虽然您仍然从“负载测试”菜单中为负载测试选择测试设置，但您现在在“测试”菜单下为 Web 测试执行*单独*设置测试设置： ![为 web 测试设置测试设置](../Images/0b23b5a885581ca3f710e995bf3173f2.png)

# highcharts - GroupPadding 更改系列列的顺序

> ID：14591055
> 
> 赞同：0
> 
> 时间：2013-01-29T19:52:10.243
> 
> 标签：highcharts

当我将以下属性添加到我的图表时：

```
columns: {
    groupPadding: 1.05
} 
```

它颠倒了系列中列的顺序。关于为什么会发生这种情况的任何想法或在系列的列之间添加填充的替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:53:06.593

给定组填充是轴值，因此在分类的 X 轴中，组填充 1.05 没有任何意义。从 0 到 1 的值是有意义的，其中 0 使列紧密排列（如果 pointPadding 为 0），而 1 将它们呈现为细线。

要添加填充，还可以考虑 api.highcharts.com#plotOptions.column.pointPadding 。

# c# - 检查十进制值是否为空

> ID：14591057
> 
> 赞同：27
> 
> 时间：2013-01-29T19:52:15.500
> 
> 标签：c#, asp.net, decimal

我想检查十进制数是 NULL 还是它有一些值，因为该值是从类对象中的数据库分配的：

```
public decimal myDecimal{ get; set; } 
```

然后我有

```
myDecimal = Convert.ToDecimal(rdrSelect[23].ToString()); 
```

我在尝试：

```
if (rdrSelect[23] != DBNull.Value)
                    {
                        myDecimal = Convert.ToDecimal(rdrSelect[23].ToString());
                    } 
```

但我得到了这个：

> 表达式的结果始终为“真”，因为“十进制”类型的值永远不会等于 null

如何检查该十进制数是否具有某些值？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-29T19:54:42.127

小数总是有一些默认值。如果你需要一个可以为[空的类型](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/nullable-types/)小数，你可以使用`decimal?`. 然后你可以做`myDecimal.HasValue`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-03T11:42:04.777

你可以使用这个代码

```
if (DecimalVariable.Equals(null))  
{
   //something statements
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-29T19:56:03.497

`decimal`是[*`value type`*](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx).NET 中的一个。并且值类型不能是`null`. 但是如果你使用[*`nullable type`*](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.80%29.aspx)你的`decimal`，那么你可以检查你的`decimal`是否是`null`。像`myDecimal?`

> Nullable 类型是 System.Nullable 结构的实例。可空类型可以表示其基础值类型的正常值范围，外加一个额外的**空**值。

```
if (myDecimal.HasValue) 
```

但我认为在您的数据库中，如果此列包含可为空的值，那么它**不应该**是`decimal`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T14:14:03.690

假设您正在从数据行中读取，您想要的是：

```
if ( !rdrSelect.IsNull(23) ) 
{ 
   //handle parsing
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-23T20:21:19.130

Decimal 是一种值类型，因此如果您希望检查它是否具有与初始化时的值（零）不同的值，您可以使用条件 myDecimal != default(decimal)。

否则，您可能应该考虑使用可为空的（十进制？）类型并使用诸如 myNullableDecimal.HasValue 之类的条件

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-07T17:05:05.030

我最近在尝试`DataTable`从 db 的对象中检索空小数时遇到了这个问题，但我在这里没有看到这个答案。我发现这更容易和更短：

```
var value = rdrSelect.Field<decimal?>("ColumnName") ?? 0; 
```

这对我来说很有用，因为我在模型中没有可以为空的小数，但需要快速检查一下。如果 db 值恰好为空，它只会分配默认值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T19:56:42.323

如果您直接从 SQL 数据库中提取此值并且其中的值为 null，那么它实际上是`DBNull`对象而不是 null。在转换之前进行检查并在 的情况下使用默认值`DBNull`，或者在之后将空检查替换为对 的`rdrSelect[23]`检查`DBNull`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-29T20:01:46.647

在这种情况下，您还可以创建一个方便的实用程序函数来处理来自 DB 的值。前任。下面是从对象类型为您提供 Nullable Decimal 的函数。

```
 public static decimal? ToNullableDecimal(object val)
    {
        if (val is DBNull ||
            val == null)
        {
            return null;
        }
        if (val is string &&
            ((string)val).Length == 0)
        {
            return null;
        }
        return Convert.ToDecimal(val);
    } 
```

# javascript - 更改 Ext-JS 组合框上的 valueField 配置？

> ID：14591063
> 
> 赞同：0
> 
> 时间：2013-01-29T19:52:26.693
> 
> 标签：javascript, user-interface, extjs, combobox, config

我在表单上有一个组合框，我需要在其中重置其存储以及“displayField”和“valueField”配置。

通过重置商店`cmb.bindStore(newStore)`效果很好。

设置`cmb.displayField = 'newfieldname';`也很好用。

但是，`cmb.valueField = 'newValField';`不起作用。该组合显示正确的东西，但是当我选择一个项目时，该值使用旧的 valueField 值，而不是新的值。

我试过了：

*   `cmb.reset()`事后做
*   `Ext.apply(...)`

是不是`valueField`因为它是必填字段而有些特殊？是否有一些特殊的方法可以在我不知道的 Ext-JS 组件上设置配置值，或者无法更改“valueField”的值？

仅供参考 - 这是我的代码：

```
 comp.bindStore(Ext.create('Ext.data.Store', {
        fields : [ {
            name : 'abbr',
            type : 'string'
        }, {
            name : 'name',
            type : 'string'
        }, {
            name : 'slogan',
            type : 'string'
        } ],
        data : [ {
            "abbr" : "AL",
            "name" : "Alabama",
            "slogan" : "The Heart of Dixie"
        }, {
            "abbr" : "AK",
            "name" : "Alaska",
            "slogan" : "The Land of the Midnight Sun"
        }, {
            "abbr" : "AZ",
            "name" : "Arizona",
            "slogan" : "The Grand Canyon State"
        }, {
            "abbr" : "AR",
            "name" : "Arkansas",
            "slogan" : "The Natural State"
        }, ]
    }));

    comp.displayField = 'abbr';    // THIS WORKS
    comp.valueField = 'abbr';      // THIS DOESNT WORK 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:47:53.043

我不确定是否可以以这种方式重新配置组合框，但也许您可以创建另一个具有不同存储和 valueField 的组合框。根据您的逻辑隐藏/销毁其中一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:55:52.197

您快到了，但您在哪里查看错误的财产原因`valueField`不是您的问题，而是`displayField`。您的确切问题是预配置和缓存的属性。第一个是显示模板，第二个是选择器实例。您需要覆盖模板并删除选择器实例。这是一个工作片段（**[JSFiddle](http://jsfiddle.net/sran/czrt6/41/)**）

在示例中，我添加了带有十字的第二个触发器。点击它，ComboBox 就会得到新的值。我建议您为此创建自己的组件，方法是从 ComboBox 扩展并将所有组件包装到需要树参数的重新配置方法中。

```
Ext.onReady(function() {
    // The data store containing the list of states
    var states = Ext.create('Ext.data.Store', {
        fields: ['abbr', 'name'],
        data : [
            {"abbr":"AL1", "name":"Alabama1"},
            {"abbr":"AK1", "name":"Alaska1"},
            {"abbr":"AZ1", "name":"Arizona1"}
            //...
        ]
    });

    var comp = Ext.create('Ext.form.field.ComboBox', {
        fieldLabel: 'Choose State',
        id: 'combo-ident',
        trigger2Cls: 'x-form-clear-trigger',
        onTrigger2Click: function (args) {
            var comp = Ext.getCmp('combo-ident');
            comp.clearValue();
            comp.bindStore(Ext.create('Ext.data.Store', {
                fields : [ {
                    name : 'abbr',
                    type : 'string'
                }, {
                    name : 'name',
                    type : 'string'
                }, {
                    name : 'slogan',
                    type : 'string'
                } ],
                data : [ {
                    "abbr" : "AL",
                    "name" : "Alabama",
                    "slogan" : "The Heart of Dixie"
                }, {
                    "abbr" : "AK",
                    "name" : "Alaska",
                    "slogan" : "The Land of the Midnight Sun"
                }, {
                    "abbr" : "AZ",
                    "name" : "Arizona",
                    "slogan" : "The Grand Canyon State"
                }, {
                    "abbr" : "AR",
                    "name" : "Arkansas",
                    "slogan" : "The Natural State"
                }, ]
            }));

            comp.displayField = 'abbr';
            comp.valueField = 'name';
            comp.displayTpl = new Ext.XTemplate(
                '<tpl for=".">' +
                    '{[typeof values === "string" ? values : values["' + comp.displayField + '"]]}' +
                    '<tpl if="xindex < xcount">' + comp.delimiter + '</tpl>' +
                '</tpl>'
            );
            comp.picker = null;
        },
        store: states,
        queryMode: 'local',
        displayField: 'name',
        valueField: 'abbr',
        renderTo: Ext.getBody()
    });
    comp.on('select', function(){ console.log(arguments); console.log(arguments[0].getSubmitValue()); })

}); 
```

# asp.net-mvc - 我应该为每个请求使用一个 HttpClient 实例还是一个来处理我的所有请求？

> ID：14591064
> 
> 赞同：10
> 
> 时间：2013-01-29T19:52:30.413
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在为 Rest API 创建一个客户端，并且正在使用 HttpClient 类。我的问题是：我应该只使用一个实例来处理我的所有请求吗？还是我应该根据请求创建一个新实例？像：

```
using (var client = new HttpClient()) {
  ...
} 
```

有什么推荐的做法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T20:12:52.143

您应该尽可能地重用 HttpClient 实例。创建新实例的唯一原因是您想以不同方式对其进行配置。

# ios - 在arm7s上运行arm7内置的iOS SDK

> ID：14591067
> 
> 赞同：0
> 
> 时间：2013-01-29T19:52:38.857
> 
> 标签：ios, xcode, legacy, arm7

我有一个 SDK 来实现一些特殊的视频流，但我只有这个的二进制文件，我认为这是为 arm7 构建的。
我有一个用这个库构建的应用程序，它在 iPhone 4、4s 和 iPad 2 上运行良好，但是当使用 arm7s xcode 为 iPad 4 代构建时，会显示很多关于文件被忽略的错误。
我很确定这是架构导致更改构建架构错误出现和消失的原因。
有什么办法可以使这项工作？我的意思是为新架构构建只有旧架构的二进制文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:01:19.097

不幸的是没有。要为 armv7s 构建您的应用程序，所有代码（包括上述库）都必须为其构建。有一个[hack](http://www.galloway.me.uk/2012/09/hacking-up-an-armv7s-library/)可以将 armv7s 支持添加到静态库，但我强烈建议不要使用它。

话虽如此，现在如果您只为 armv7 构建应用程序，这没什么大不了的。它仍然可以在 iPhone 5 上正常工作。

只需进入 Target 的构建设置并将“armv7”设置为您的应用程序应该构建的唯一架构。

在未来的某个时候，Apple 可能会要求所有新应用程序/应用程序更新都将针对 armv7s 构建，就像几年前 armv7 所做的那样，但现在这不是问题。届时，静态库的开发人员有望提供更新。

# css - LESS CSS Engine 导入一次重复样式

> ID：14591071
> 
> 赞同：1
> 
> 时间：2013-01-29T19:52:46.903
> 
> 标签：css, import, less

尽管使用了一次导入，LESS 仍在不同文件中导入相同的 LESS。

例如：

```
<link rel="stylesheet/less" type="text/css" href="app.less">
<link rel="stylesheet/less" type="text/css" href="theme.less"> 
```

无应用程序

```
@import-once "1.less";

body{
    color:blue;
} 
```

无主题

```
@import-once "1.less";

body{
    color:pink;
} 
```

产生：

```
<style type="text/css" id="less:good-docs-less-app">
    body {
        background: yellow;
    }
    body {
        color: blue;
    }
</style>

<style type="text/css" id="less:good-docs-less-theme">
    body {
        background: yellow;
    }
    body {
        color: pink;
    }
</style> 
```

您注意到`body{background:yellow}`两种样式都重复。是否可以在不写两次的情况下将其导入两个 LESS 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:47:44.577

不是我知道的。但我建议将所有 LESS 代码编译到一个文件中。这样做，您还可以减少对服务器的调用次数，即页面速度的小幅优化。

在我参与的项目中，我们倾向于为所有 LESS 提供一个主文件，因此，所有样式都被编译成一个 CSS 文件。

例子：

*   styles.less 是主文件。它本身不定义任何样式，而只包含导入语句
*   variables.less 包含一些在整个项目中使用的通用变量。它们被定义一次，并在任何地方重复使用。示例：颜色、字体、标题等。
*   更多包含实际样式的文件。只要有可能，使用 LESS mixin 来避免代码重复。

另一方面，重复的样式定义并不是很严格。只需注意 CSS 样式定义的顺序，因为它们会相互覆盖。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:32:05.327

你误解了什么`import-once`。***当代码在该 .less 代码****中编译***时，它可以防止再次发生导入。但是，当`theme.less`您`app.less`将它们链接到您的`<html>`. 到那时，`app.less`已经完成了它的工作并制作了你的第一部分 css。**

 **因此，唯一可以防止*在*特定文件`import-once`中发生第二次导入。例如，如果你有这个：*`.less``app.less`*

 *```
@import-once "1.less";
@import "theme.less";

body{
    color:blue;
} 
```

然后`1.less`文件`theme.less`不会被重新导入，因为它已经在`app.less`. 在这一点上，我们在编译期间仍然*在LESS 代码中。*`<link>`在`<html>`. _

正如 phammer 在他的帖子中所说，解决方案是将所有 LESS 编译成一个主 CSS 文件以链接到 html。这样，您确实将所有 LESS 代码“放在一起”（因此它会`import-once`按照您的预期识别）。***

# php - Gaufrette 上传图片并存储在 AmazonS3 中

> ID：14591076
> 
> 赞同：2
> 
> 时间：2013-01-29T19:53:21.620
> 
> 标签：php, symfony, symfony-2.1

我正在使用捆绑包[https://github.com/KnpLabs/Gaufrette](https://github.com/KnpLabs/Gaufrette)，这是我的配置：

```
knp_gaufrette: 
    adapters:
        someadapter:
            amazon_s3:
                amazon_s3_id: service.amazon.s3
                bucket_name: %amazon.s3.bucket_name%
                create: true
    filesystems:
        somefilesystem:
            adapter: someadapter 
```

我有一个上传文件的表格。我的问题是文件在 /tmp/file 目录中上传，然后我尝试将此文件移动到亚马逊：

`$filesystem->get('somefilesystem')->rename($tmpPath , $destinyPath);`

抛出异常：

`The file "/tmp/phpR4YbZN" was not found.`

这是有道理的，因为该文件尚未在亚马逊中，而我正在处理该文件系统。但我想知道如何将文件从本地文件系统上传到 AmazonS3。

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T22:59:07.583

你想做这样的事吗？：

```
$filesystemMap
   ->get('somefilesystem')
   ->write($destinyPath, file_get_contents($tmpPath))
;` 
```

请注意 write 方法有第三个“**覆盖**”参数（默认为**false**）。

您可以注册流包装器并像使用普通 php 文件 API/函数一样工作。请参阅[https://github.com/KnpLabs/KnpGaufretteBundle#stream-wrapper](https://github.com/KnpLabs/KnpGaufretteBundle#stream-wrapper)了解更多信息。

# mysql - 如何获取 MySQL VARIABLES var 的值？

> ID：14591083
> 
> 赞同：1
> 
> 时间：2013-01-29T19:53:53.257
> 
> 标签：mysql, variables, syntax

我需要获取 MySQL VARIABLE“版本”的标量值。目前正在运行：

```
SHOW VARIABLES WHERE Variable_name="version" 
```

给了我一张像这样的桌子：

```
Variable_name    Value
-------------    -----------
version          5.5.28-log 
```

我如何才能获得价值单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:59:11.403

```
set @x = select @@version; 
```

这会将用户变量 @x 设置为当前版本。

如果您想直接选择它，请使用

```
select @@version; 
```

这概括了 - 大多数系统变量都可以使用 @@ 语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:56:48.820

好的，我发现了如何：

```
 select variable_value 
 from information_schema.global_variables
 where variable_name = 'version'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:01:09.453

您可以使用内置[`version()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_version)功能。

```
select version(); 
```

# java - 访问另一个类的实例

> ID：14591085
> 
> 赞同：-5
> 
> 时间：2013-01-29T19:53:57.197
> 
> 标签：java

所以我正在考虑一个小项目。我似乎遇到的一个问题是：我有一个类 A，它包含一个类 C 的实例和一个类 B 的实例列表。每个类都包含一个计时器。当该计时器触发事件​​时，我需要执行一个 C 类方法。

```
public class A
{
  C C1 = new C(this);
  public ArrayList<B> B1= new ArrayList<>();        
} 
```

所以当计时器到期时，我需要触发类似的东西：

```
C1.method() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:06:33.397

非常基本/简单的方法：实现一个简单的订阅/发布框架。

1.  创建一个定义回调方法的接口。
2.  在 C 类中实现回调接口。
3.  提供一种方法，C 类通过该方法向 B 类的每个实例注册回调；这样做。
4.  当定时器在 b 类的特定实例中触发时，调用回调。

例如：

```
public interface BlammyHoot
{
  void hoot(); // this is the call back.
}

public class C implements BlammyHoot
{
  public void hoot()
  {
    // implement the callbe method here.
  }
}

public class B
{
  private List<BlammyHoot> hootList = new LinkedList<BlammyHoot>();

  public void registerBlammyHoot(final BlammyHoot theHoot)
  {
    if (theHoot != null)
    {
      hootList.add(theHoot);
    }
  }

  public void respondToTimerTimeout()
  {
    for (BlammyHoot hootElement : hootList)
    {
      hootElement.hoot();
    }
  }
} 
```

警告：对上述 java 代码执行的零测试（包括但不限于我没有编译它）。

# java - JOptionPane 传递自定义按钮

> ID：14591089
> 
> 赞同：4
> 
> 时间：2013-01-29T19:54:08.400
> 
> 标签：java, swing, jbutton, joptionpane

我正在尝试获取传递给 JOptionPane 的自定义按钮返回的值。但是，我传递的按钮根本不返回值。仅当按下退出按钮时才返回值 -1。我需要这个，因为我正在更改启用或禁用按钮的属性。我假设我需要按钮以某种方式将一些信息返回给 JOptionPane。任何的想法？

```
 JButton button1= new JButton("Button 1");
    JButton button2= new JButton("Button 2");

    button1.setEnabled(false);

    int value = JOptionPane.showOptionDialog(null, "Heres a test message", "Test", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, null, new Object[]{button1, button2}, button1);
    JOptionPane.showMessageDialog(null, "You entered " + value); 
```

注意这与我之前的问题有关 - [JOptionPane Gray Out One Button](https://stackoverflow.com/questions/14576196/joptionpane-grey-out-one-button)

我尝试像你说的那样设置按钮的值，但它们永远不会返回 OK 或 CANCEL。

每当检查按钮的值时，它们也永远不会返回我设置的值。

```
 JButton button1= new JButton("Button1");
    JButton button2= new JButton("Button2");

    button1.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane pane = getOptionPane((JComponent)e.getSource());
                // set the value of the option pane
                pane.setValue(JOptionPane.OK_OPTION);
            }
        });

    button2.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane pane = getOptionPane((JComponent)e.getSource());
                // set the value of the option pane
                pane.setValue(JOptionPane.CANCEL_OPTION);
            }
        });

      if (JOptionPane.showOptionDialog(null, "Pick a button", "Pick", JOptionPane.OK_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE, null, new Object[]{button1, button2}, button1) == JOptionPane.OK_OPTION) {
           JOptionPane.showMessageDialog(null, "Button1");
      }
      else{
           JOptionPane.showMessageDialog(null, "Button2");
      } 
```

见上文，无论如何我总是得到 button2 弹出窗口。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-29T19:59:37.877

在我链接到上一个问题的示例中，按钮使用该`JOptionPane#setValue`方法设置返回值。这使您可以像往常一样继续使用 API，同时为您提供之后的自定义。

```
 final JButton okay = new JButton("Ok");
            okay.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    JOptionPane pane = getOptionPane((JComponent)e.getSource());
                    // set the value of the option pane
                    pane.setValue(JOptionPane.OK_OPTION);
                }
            }); 
```

仔细查看[JOptionPane.dialog 上的 Disable ok 按钮，直到用户输入](https://stackoverflow.com/questions/14334931/disable-ok-button-on-joptionpane-dialog-until-user-gives-an-input/14335083#14335083)

**更新**

我已经回顾了代码并更正了`actionPerformed`方法以使其能够返回有效值......

```
final JButton okay = new JButton("Ok");
okay.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        JOptionPane pane = getOptionPane((JComponent)e.getSource());
        pane.setValue(okay);
    }
});
okay.setEnabled(false);
final JButton cancel = new JButton("Cancel");
cancel.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        JOptionPane pane = getOptionPane((JComponent)e.getSource());
        pane.setValue(cancel);
    }
}); 
```

`options`数组中值的索引返回的值（最后一个参数）

所以，例如...

```
int value = JOptionPane.showOptionDialog(
     null, 
     field, 
     "Get", 
     JOptionPane.YES_NO_OPTION, 
     JOptionPane.QUESTION_MESSAGE, 
     null, 
     new Object[]{okay, cancel}, 
     okay); 
```

如果用户单击确定按钮，则返回值为`0`，或者如果他们选择取消按钮，则返回值为`1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T19:55:05.900

如果您需要这种复杂的行为，请考虑创建您自己的 JDialog，然后以模态方式显示它。

如果你必须使用 JOptionPane，你可以通过提取它的 JDialog 并递归地遍历它的组件来做到这一点，直到你找到你想要禁用和禁用它的组件：

```
import java.awt.Component;
import java.awt.Container;
import javax.swing.*;

public class Foo2 {
   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            doRun();
         }
      });
   }

   public static void doRun() {
      String[] options = {"Button 1", "Button 2", "Button 3"};

      JOptionPane myOptionPane = new JOptionPane("Heres a test message",
            JOptionPane.QUESTION_MESSAGE, JOptionPane.YES_NO_OPTION, 
            null, options, options[2]);
      JDialog myDialog = myOptionPane.createDialog(null, "My Test");
      myDialog.setModal(true);

      inactivateOption(myDialog, options[1]);

      myDialog.setVisible(true);
      Object result = myOptionPane.getValue();
      // Note: result might be null if the option is cancelled
      System.out.println("result: " + result);

      System.exit(0); // to stop Swing event thread
   }

   private static void inactivateOption(Container container, String text) {
      Component[] comps = container.getComponents();
      for (Component comp : comps) {
         if (comp instanceof AbstractButton) {
            AbstractButton btn = (AbstractButton) comp;
            if (btn.getActionCommand().equals(text)) {
               btn.setEnabled(false);
               return;
            }
         } else if (comp instanceof Container) {
            inactivateOption((Container) comp, text);
         }
      }

   }
} 
```

但是对于我自己，我只是创建一个 JDialog。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T19:58:24.930

您不必明确定义按钮。

```
int result = JOptionPane.showOptionDialog(this, "Are you sure you want to...?", "Title", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, null, new String[] { "Yes", "No" }, JOptionPane.NO_OPTION);
if (result == JOptionPane.YES_OPTION) {
  ...
} 
```

# android - 是否使用 LoaderManager 进行详细视图？

> ID：14591091
> 
> 赞同：7
> 
> 时间：2013-01-29T19:54:19.650
> 
> 标签：android

我正在构建一个（主从）视图，它有 2 个片段：一个 ListFragment 和一个更详细的片段视图。单击列表中的任何项目都会显示详细信息视图。对于 ListFragment，我使用带有 CursorLoader 的 LoaderManager 来管理我的查询（我一直在遵循 Alex Lockwood 关于该主题的帖子中的优秀指南）。

在显示“详细”视图（通过单击列表视图）时，我需要查询同一个内容提供者，并获取单行信息。我不确定如何最好地处理这个问题。

因为我本质上是取回一行，并且可以立即释放光标：

*   我应该直接使用 getContentResolver().query() 并直接使用游标吗？
*   使用另一个 LoaderManager 来管理游标和结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:03:16.267

使用加载器管理器。

您在列表视图中创建加载程序的原因与您应该在详细信息视图中创建它的原因相同。任何繁重的操作都应该放在后台线程上，以防止 UI 无响应。数据库交互也不例外。看起来您的数据会立即加载，但实际上您正在直接在 UI 线程上做一些繁重的工作，这可能会给您的 UI 带来不必要的性能

项目黄油，哟

此外，您还可以获得 LoaderManager 保留结果的额外好处。因此，当您旋转并重新加载数据时，它正在加载缓存的结果，而不是您必须自己保留所有数据。

# amazon-web-services - 有没有办法从 ELB 自动终止不健康的 EC2 实例？

> ID：14591099
> 
> 赞同：5
> 
> 时间：2013-01-29T19:54:57.500
> 
> 标签：amazon-web-services, amazon-ec2, autoscaling, amazon-elb

有没有办法让 ELB 或 EC2 自动扩展组从 ELB 终止（或重启）不健康的实例？

我们的前端有一些特定的数据库故障情况，使其变得不健康，因此 ELB 将停止将流量路由到它。该实例也是自动缩放组的一部分，该组会根据组的 CPU 负载进行缩放。因此，最终发生的情况是实例不再从 ELB 获取流量，因此它没有 CPU 负载，并且扭曲了组的 CPU 负载，从而破坏了扩展条件。

是否有一种“简单”的方法可以以某种方式配置 ELB 或自动缩放组以自动终止组中不健康的实例，而无需实际编写代码来通过 EC2 API 进行轮询和终止？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T20:01:17.860

如果您将自动伸缩组的健康检查类型设置为 ELB，那么它将自动停用任何未通过 ELB 健康检查的实例（即不会及时响应配置的 URL）

只要配置的运行状况检查正确报告了一个实例是坏的（听起来就是这种情况，因为你说 ELB 将实例标记为不健康）这应该可以工作

# sql - Visual Studio 2012 添加数据库并创建第一个名为 users 的表

> ID：14591105
> 
> 赞同：5
> 
> 时间：2013-01-29T19:55:45.073
> 
> 标签：sql, visual-studio-2012

我有 Visual Studio 2012 Express 并设置了一个 razor c#.net 项目。

我右键单击 AppData 并添加了一个 Microsoft SQL 数据库并将其命名为“EspressoCoffees”

现在我可以看到它在那里，我转到数据库资源管理器并右键单击表并单击添加表。

表设计器出现，我制作了几列以确保“Id”仍然是主键。

1.  我到底在哪里命名这张桌子？有一个表格属性面板，我无法在其中编辑名称，因为它是灰色的？
2.  当我保存表格时，它让我选择文件的位置，这是什么文件？表还是数据库？？？
3.  **如果我将 SQL 文件保存在应用程序数据部分......它不会以任何方式出现在 Tables 文件夹下。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T17:55:06.233

只需在生成的 T-SQL 中修改表的名称，然后单击“更新”按钮（在选项卡的左上角）。

![在此处输入图像描述](../Images/6ec04184dba2cf18c8eacdf2703a7bf9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T20:03:14.997

单击更新后，关闭设计选项卡并单击服务器资源管理器上的刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-01T10:26:31.660

1.  在不创建表的情况下使用查询来创建表
2.  更新 T-SQL 中的表。就那么简单 ....

# selenium - 使用 Watir-WebDriver 搜索正则表达式时出现 StaleElementReferenceError

> ID：14591107
> 
> 赞同：0
> 
> 时间：2013-01-29T19:55:46.360
> 
> 标签：selenium, watir, watir-webdriver

尝试在页面中搜索正则表达式时遇到错误。我使用以下内容来实际定位正则表达式，但我收到了各种错误。

```
...
browser.script.html.include? "event49" 
```

这些错误似乎与浏览器（可能还有环境）有关。我在 Safari、Chrome 和 Firefox 之间来回测试过。Firefox 似乎有间歇性问题。铬，几乎不变。我还在我的 PC 和 Mac 之间进行了测试，它似乎是全面的标准。

我对 Safari 没有任何问题。

此错误来自 Firefox：

```
[remote server] resource://fxdriver/modules/web_element_cache.js:7204:in `fxdriver.cache.getElementAt': Element not found in the cache - perhaps the page has changed since it was looked up (Selenium::WebDriver::Error::StaleElementReferenceError) 
```

此错误来自 Chrome：

```
/Library/Ruby/Gems/1.8/gems/selenium-webdriver-2.29.0/lib/selenium/webdriver/remote/response.rb:52:in `assert_ok': getElementTagName execution failed; (Selenium::WebDriver::Error::StaleElementReferenceError)
Element does not exist in cache 
```

任何帮助深表感谢！

更新：

请看下面的脚本：

```
require "rubygems"
require "watir-webdriver"
require "watir-webdriver-performance"
require "rspec"
include Watir
require 'logger'

browser = Watir::Browser.new :chrome

test_site = 'http://laughlin:driveafirestone@fcac-rebrand.laughlin.com/'
browser.goto(test_site)

year_select = browser.select_list(:id => 'universal-year')
browser.select_list(:id => 'universal-year', :disabled => 'disabled').wait_while_present
year_select.select '2010'

make_select = browser.select_list(:id => 'universal-make')
browser.select_list(:id => 'universal-make', :disabled => 'disabled').wait_while_present
make_select.select 'Volkswagen'

model_select = browser.select_list(:id => 'universal-model')
browser.select_list(:id => 'universal-model', :disabled => 'disabled').wait_while_present
model_select.select 'Jetta'

submodel_select = browser.select_list(:id => 'universal-submodel')
browser.select_list(:id => 'universal-submodel', :disabled => 'disabled').wait_while_present
submodel_select.select '2.0T TDI Sedan'

zipcode_input = browser.text_field(:id => 'universal-selectorZip')
zipcode_input.set '53202'

browser.button(:id => 'universal-submit-tires-quote').click

browser.script.html.include? "event49"

browser.close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:23:10.400

你怎么用

```
Watir::Wait.until(30) { browser.text.include? "event49" } 
```

# sql - SQL Server 中的 CHECK 约束，通过 GUI 还是手动？

> ID：14591111
> 
> 赞同：0
> 
> 时间：2013-01-29T19:56:04.633
> 
> 标签：sql, sql-server, database, database-design, sql-server-2012

我想向一个已经存在的表添加一个检查约束，该表基于 SELECT COUNT(*) 语句进行检查。我知道我的 SELECT 语句，但是当我创建 DROP AND CREATE TO 脚本时，我不确定在哪里添加我的代码以及它应该采用什么格式？

有没有办法在 GUI 中执行此操作，或者有人可以向我展示一个带有 CHECK 约束的 CREATE 表语句的示例，考虑到 SELECT COUNT(*)？

我知道 CHECK 约束只需从这里评估为布尔值：http: [//msdn.microsoft.com/en-gb/library/ms188258 (v=sql.105).aspx](http://msdn.microsoft.com/en-gb/library/ms188258(v=sql.105).aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:20:37.367

首先要注意的是，您不能在检查约束中直接使用子查询，但是创建一个函数是一种解决方法。这将帮助您：

```
CREATE FUNCTION dbo.fnRedRows()
RETURNS INT
AS
BEGIN
    DECLARE @Return INT
    SELECT @Return=COUNT(*) FROM dbo.Red
    RETURN @Return
END
GO
CREATE TABLE dbo.Red 
(
    id INT IDENTITY(1,1), 
    test VARCHAR(max), 
    CONSTRAINT CK_MaxRows CHECK (dbo.fnRedRows()<5)
)
GO
INSERT INTO dbo.Red (test) VALUES ('HI')
INSERT INTO dbo.Red (test) VALUES ('The')
INSERT INTO dbo.Red (test) VALUES ('first four')
INSERT INTO dbo.Red (test) VALUES ('will work')
INSERT INTO dbo.Red (test) VALUES ('This one will fail')
GO
DROP TABLE dbo.Red
GO
DROP FUNCTION dbo.fnRedRows
GO 
```

# php - 检索对象时调用对象值时性能下降

> ID：14591117
> 
> 赞同：1
> 
> 时间：2013-01-29T19:56:28.820
> 
> 标签：php, performance, web-services

当使用以下从 Web 服务中检索对象的代码时，我发现在组合这些行后速度下降了大约 0.5 秒。

```
$getChildren = $OKMDocument->getChildren(array('token' => $token, 'path' => $path));
$fileArray = $getChildren->return; 
```

到

```
$fileArray = $OKMDocument->getChildren(array('token'=> $token, 'path' => $path))->return; 
```

有没有一种简单的方法来确定为什么这会导致这样的性能下降？

编辑：

它是本地托管的 Web 服务。

```
$OKMAuth = new SoapClient('http://localhost:8080/OpenKM/services/OKMAuth?wsdl');
$OKMDocument = new SoapClient('http://localhost:8080/OpenKM/services/OKMDocument?wsdl'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:05:11.213

> 有没有一种简单的方法来确定为什么这会导致这样的性能下降？

您正在搜索的工具称为[profiler](http://en.wikipedia.org/wiki/Profiling_%28computer_programming%29)。[分析 PHP 应用程序的最常见方法是将 xdebug 分析器与诸如wincachegrind](http://sourceforge.net/projects/wincachegrind/)或[kcachegrind](http://kcachegrind.sourceforge.net/html/Home.html) (linux)之类的工具一起使用，它可以帮助您调查程序流程和执行时间。GUI 将如下所示：

![WinCacheGrind 的图形用户界面](../Images/15c51ce2ab98dd19071ee717a5dbda16.png)

您应该开始阅读有关分析的 xdebug[文档](http://www.xdebug.org/docs/profiler)

# sql - VB：尝试使用 SQL 插入数据库时 出现语法错误

> ID：14591118
> 
> 赞同：2
> 
> 时间：2013-01-29T19:56:34.813
> 
> 标签：sql, vb.net, syntax

我正在尝试使用 SQL 命令将新记录插入数据库，但每次运行程序并尝试添加新记录时，我都会收到一个错误消息，告诉我“INSERT INTO”语句存在语法错误。我插入的数据存储在数组 + 结构中：

```
 Structure Question
        Dim QuestionName As String
        Dim Question As String
        Dim Ans1 As String
        Dim Ans2 As String
        Dim Ans3 As String
        Dim Ans4 As String
        Dim Difficulty As Integer
        Dim CorrectAns As String
    End Structure

    Dim arrQuestion as Question 
```

这是用于将记录插入数据库的子 im：

```
 Try

        Dim InsertComm As New OleDb.OleDbCommand
        Dim dbAdap As New OleDb.OleDbDataAdapter

        ConnectToDB()

        Dim sqlInsert As String = "INSERT INTO questionDatabase(QuestionName, Question, 
                                   Answer 1, Answer 2, Answer 3, Answer 4, Correct answer,
                                   Difficulty ID) VALUES(" & Chr(39) & arrquestion.questionname 
                                   & Chr(39) & ", " & Chr(39) & arrquestion.question & Chr(39) &
                                   ", " & Chr(39) & arrquestion.ans1 & Chr(39) & ", " & Chr(39) 
                                   & arrquestion.ans2 & Chr(39) & ", " & Chr(39) & 
                                   arrquestion.ans3 & Chr(39) & ", " & Chr(39) & 
                                   arrquestion.ans4 & Chr(39) & ", " & Chr(39) & 
                                   arrquestion.correctans & Chr(39) & ", " & Chr(39) & 
                                   arrquestion.difficulty & Chr(39) & ");"

        InsertComm = New OleDb.OleDbCommand(sqlInsert, dbConn)

        InsertComm.ExecuteNonQuery()

        dbConn.Close()

    Catch ex As Exception
        MsgBox(Err.Description)
    Finally
        dbConn.Close()
    End Try 
```

我已经写了又改了很多次，用谷歌搜索它给我的错误，并试图复制人们在那里发布的解决方案，但我就是无法理解他们是如何编写代码的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:16:29.363

你的语句的核心应该这样写

```
Dim sqlInsert As String = "INSERT INTO questionDatabase(QuestionName, Question, " +
      "[Answer 1], [Answer 2], [Answer 3], [Answer 4], [Correct answer], " +
      "[Difficulty ID]) VALUES(?, ?, ?, ?, ?, ?, ?, ?)"
InsertComm = New OleDb.OleDbCommand(sqlInsert, dbConn)
InsertComm.Parameters.AddWithValue("@p1", arrquestion.questionname)
InsertComm.Parameters.AddWithValue("@p2", arrquestion.question )
InsertComm.Parameters.AddWithValue("@p3", arrquestion.ans1)
InsertComm.Parameters.AddWithValue("@p4", arrquestion.ans2)
InsertComm.Parameters.AddWithValue("@p5", arrquestion.ans3)
InsertComm.Parameters.AddWithValue("@p6", arrquestion.ans4)
InsertComm.Parameters.AddWithValue("@p7", arrquestion.correctans)
InsertComm.Parameters.AddWithValue("@p8", arrquestion.difficulty)
InsertComm.ExecuteNonQuery() 
```

可以看到，首先是用方括号将每个字段名封装起来，解决字段名中的空格问题。第二点是使用参数化查询来避免解析问题（字符串中的引号、日期、小数等）和最重要的[Sql Injection](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)

另请注意，OleDb 环境中的参数应按照它们各自的占位符 (?) 在 sql 文本中出现的顺序添加到 ParametersCollection

# spring - 石英弹簧 cron 立即触发火灾

> ID：14591122
> 
> 赞同：1
> 
> 时间：2013-01-29T19:56:55.490
> 
> 标签：spring, quartz-scheduler

我有一个使用石英 cron 触发器的弹簧应用程序。我给出了以下频率 0 0/20 * * * ?.....每 20 分钟一次。但我希望第一个立即运行。现在，当我启动应用程序时，它会在 20 分钟后运行。我希望它会尽快运行，然后在 20 分钟后运行。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:06:38.013

It sounds like you want to use an interval trigger (`SimpleTrigger` in Quartz can do the job). The `CronTrigger` wants you to specify the minutes at which to run.

So your trigger schedule says: start at 0 minutes, and run every 20 minutes after that until the hour is over. Then start at 0 again.

But with the `SimpleTrigger`, you say - start now and run every 20 minutes.

Here is a tutorial on SimpleTrigger: [http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-05](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-05)

Here is a tutorial on CronTrigger: [http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger](http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:06:40.900

You don't need CRON expression (and Quartz at all!) to run given code every 20 minutes. Just use fixed rate (Spring built-in):

```
@Scheduled(fixedRate=20 * 60 * 1000) 
```

That's it! By default first invocation happens immediately, second after 20 minutes. Since Spring 3.2 you can even say `initialDelay=10000` to run for the first time after exactly 10 seconds.

If you really want to use Quartz, check out `SimpleTrigger`.

# javascript - 获取“this”上下文的最佳实践

> ID：14591126
> 
> 赞同：0
> 
> 时间：2013-01-29T19:57:21.657
> 
> 标签：javascript, javascript-events, event-handling

作为一名长期的 C++/C# 开发人员，我发现自己将很多 JS 代码移动到“类”中，以便将函数和数据组合在一起。尽管这些类处理事件，但我发现自己必须编写“存根”处理程序，这些处理程序仅用于将调用路由到类方法中以提供正确的 this 上下文。所以我正在做这样的事情：

```
var Manager = {
    foo: 'x',
    bar: 1,

    onClickStub: function(evt) {
        // 'this' refers to HTMLElement event source
        Manager.onClick(evt);
    },

    onClick: function(evt) {
        // 'this' now refers to Manager.
        // real work goes here.
    }
} 
```

这是做事的正常方式还是有更好的方法来构建我的事件处理程序同时保持我的班级组织？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:17:19.673

正如 Joseph Silber 在上面的评论中所说，我认为[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)在这种情况下会是完美的。如果您需要支持较旧的浏览器，您可以随时添加 shim （请参阅[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)`Function.prototype.bind`中的示例实现）。那么你的代码可能只是：

```
var Manager = {
    var foo: 'x',
    var bar: 1,

    // no more stub!

    onClick: function(evt) {
        // 'this' will refer to Manager.
        // real work goes here.
    }
}

// And when you bind the event handler:
var el = document.getElementById('something');
el.addEventListener('click', Manager.onClick.bind(Manager)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:01:08.590

我知道做到这一点的最好方法是分配`this`给班级顶部的另一个变量，然后在整个班级中引用该变量。但当然，这仅在您不使用匿名对象作为您的类时才有效。

例如：

```
var Manager = function(){
    var self = this,
    var foo = 'x',
    var bar = 1;

    var onClick = function(evt) {

        console.log(self); // refers to the manager
        console.log(this); // refers to the element the onclick is assigned to

       // If you want this to equal the manager then just do: this = self;
    }
}() // edit: to make this an immediate function 
```

为了回应下面的评论，您可以像这样附加 onclick

```
element.onclick = Manager.onClick; 
```

那么本例`this`中onclick函数中的变量确实是html元素，self变量就是Manager函数。

# csv - 在 Stata 中，如何从单独的 csv 文件中添加变量标签？

> ID：14591130
> 
> 赞同：2
> 
> 时间：2013-01-29T19:57:38.003
> 
> 标签：csv, labels, stata

我有一组 csv 文件，它们很容易使用 -insheet- 命令加载到 Stata 中。但是它们的变量名称信息量很大。对于这些文件中的每一个，我还有一个由两列组成的元数据文件：原始（无信息）变量名称，以及对变量实际含义的描述。我想使用这些元数据文件来创建变量标签，最好不要通过并输入所有单独的标签命令或将元数据文件转换为每个文件的字典。似乎必须有一种快速的方法将元数据文件加载到 Stata 并循环通过它来生成标签命令，但我不知道它是什么。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:29:02.833

理想情况下，元数据的每一行都类似于

varname1 "更有趣的描述"

在这种情况下，您可以在每行前面加上

```
label var 
```

然后运行该文件，就好像它是使用`do`. 请参阅 的帮助`label`。这在一个体面的文本编辑器中很容易，例如搜索每行的开头并将其替换为`label var`（注意空格的需要）。

这里可能会咬人的东西包括：

1.  您没有双引号“”作为分隔符，在这种情况下您需要插入它们。

2.  额外信息不符合变量标签的条件，因为它的长度超过 80 个字符。见`help limits`。

Stata 还有其他方法可以做到这一点。您可以编写一个程序来读取元数据并使用 写出一个 do-file `file`，但如果这是我的问题，我会首先使用我的文本编辑器。（大多数有经验的 Stata 程序员使用其他东西以及`doedit`.）

# iphone - Safari iphone 中未设置跨域 iframe cookie

> ID：14591131
> 
> 赞同：3
> 
> 时间：2013-01-29T19:57:41.403
> 
> 标签：iphone, iframe, dns

我正在使用 iframe 来显示跨域页面。我不拥有该域，因此我无法在该域上做任何事情。现在，该域正在设置一些 cookie，如果我现在将 Safari 的 iphone 设置更改为“始终有效”，并且如果我将其设置为“来自已访问”，则它会显示图像，如果现在设置了 cookie，则它不起作用。我还尝试使用 jquery cookie 插件来检查是否启用了 cookie，但是当在 iphone safari 设置中设置“来自已访问”时它不起作用。如果无法让跨域 iframe 在 Iphone safari 中添加 cookie，我只想向用户显示一个对话框，如果 safari 中的“接受 cookie”是“来自已访问”或“从不”。

# android - Android UI - 将按钮动态添加到 Gridview

> ID：14591132
> 
> 赞同：2
> 
> 时间：2013-01-29T19:57:43.243
> 
> 标签：android, dynamic, user-interface, android-listview, android-gridview

这就是我现在卡住的地方。我被困在向gridview动态添加按钮。
- 我的 gridview 用一个按钮来显示星星。
- 当用户单击该按钮时，会弹出一个上下文菜单，要求用户输入信息，一旦完成。使用该信息创建网格视图中的块
- 如图所示

我已经粘贴了代码。我对如何做到这一点没有明确的想法。我假设它将膨胀一个新视图并将其添加到父（布局或网格？）视图。我对如何编码没有太多想法。我从谷歌尝试了很多东西。我以为我可以从简单的图像网格视图开始并根据我的需要对其进行修改，但它不起作用。

请提供一些方向。

![在此处输入图像描述](../Images/4fdea392934f78736557a457466ebac2.png)

create_team_new.xml（gridview所在的布局）

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    android:id="@+id/parentcreateteam"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    xmlns:android="http://schemas.android.com/apk/res/android"
     android:background="@drawable/background">

<TextView
    android:id="@+id/citytextview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/city"
    android:layout_alignTop="@+id/teamcity"
    android:layout_alignParentLeft="true" />

<AutoCompleteTextView
    android:id="@+id/teamname"
    android:layout_width="244dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/teamcity"
    android:layout_alignRight="@+id/gridviewplayer"
    android:text="@string/teamname"
    android:textSize="18sp" >
<requestFocus />
</AutoCompleteTextView>
<Button
    android:id="@+id/createteam"
    android:layout_width="140dp"
    android:layout_height="wrap_content"
    android:text="Create Team"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
     android:background="@drawable/red_button"
          style="@+style/button_text" />

<TextView
    android:id="@+id/teamnametextview"
    android:layout_width="wrap_content"
    android:layout_height="22dp"
    android:layout_alignBaseline="@+id/teamname"
    android:layout_alignBottom="@+id/teamname"
    android:layout_alignParentLeft="true"
    android:text="@string/teamname" />

<AutoCompleteTextView
    android:id="@+id/teamcity"
    android:layout_width="244dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/cricket"
    android:layout_alignRight="@+id/gridviewplayer"
    android:layout_below="@+id/teamname"
    android:layout_marginTop="22dp"
    android:ems="10"
    android:text="@string/city"
    android:textSize="18sp" >

</AutoCompleteTextView>

<TextView
    android:id="@+id/radiotextview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/teamcity"
    android:layout_marginTop="15dp"
    android:text="Pick a Sport" />

<GridView
    android:id="@+id/gridviewplayer"
    android:layout_width="match_parent"
    android:layout_height="170dp"
    android:layout_above="@+id/createteam"
    android:layout_below="@+id/pick_sport"
    android:layout_centerHorizontal="true"
    android:background="@drawable/gv_bkg"
 android:padding="5dp"
    android:numColumns="4" >

</GridView>

<RadioGroup
    android:id="@+id/pick_sport"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:layout_alignRight="@+id/createteam"
    android:layout_below="@+id/radiotextview"
    android:orientation="horizontal" >

    <RadioButton
        android:id="@+id/cricket"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Cricket" />

    <RadioButton
        android:id="@+id/soccer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Soccer" />
</RadioGroup>

</RelativeLayout> 
```

gv_createplayer.xml（要在 gridview 中膨胀的视图）

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

<Button  android:id="@+id/btn_player"
    android:layout_width="match_parent"

    android:layout_height="wrap_content"

    android:text= "+"

    android:background="@drawable/red_button">

</Button>
</LinearLayout> 
```

PlayerAdapter.java(gridview 适配器)

```
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.GridView;
import android.widget.ImageView;

public class PlayerAdapter extends BaseAdapter {

    private Context mContext;
    LayoutInflater inflater;

    // Keep all Images in array
    public Integer[] mThumbIds = {};
        /*  R.drawable.gridview_createteam, R.drawable.pic2,
            R.drawable.pic3, R.drawable.pic4,
            R.drawable.pic5, R.drawable.pic6,
            R.drawable.pic7, R.drawable.pic8,
            R.drawable.pic9, R.drawable.pic10,
            R.drawable.pic11, R.drawable.pic12,
            R.drawable.pic13, R.drawable.pic14,
            R.drawable.pic15
    };
*/
    // Constructor
    public PlayerAdapter(Context c){
        mContext = c;
    }

    @Override
    public int getCount() {
        return mThumbIds.length;
    }

    @Override
    public Object getItem(int position) {
        return mThumbIds[position];
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @SuppressWarnings("static-access")
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = new View(mContext);
        view.inflate(mContext, R.layout.gv_createplayer,null);

        return view;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:21:07.863

> 1）如何在主视图中创建一个列表视图，只使用一半的屏幕。

这是由 weight 属性完成的。草图的粗略示例：顶部包装器（编辑文本和按钮）的权重为 0.45，列表视图的权重为 0.45，页脚的权重为 0.1。您可以在周围视图中指定权重总和；但默认应为 1。

> 2）如何以网格方式填充列表视图（一行两列会重复）

好吧，用[GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html)（适配器API是一样的）（：

# macos - 如何使用 OS X (10.8.x) Mountain Lion 在 Mamp 上安装 Sphinx Search (2.0.6)？

> ID：14591133
> 
> 赞同：2
> 
> 时间：2013-01-29T19:57:52.473
> 
> 标签：macos, installation, sphinx, mamp

我正在尝试在 Mamp 上安装 Sphinx Search，但我无法通过某个步骤。这是我所做的：

1.  下载的 MAMP（用它在本地测试网站）
2.  下载并解压 Sphinx Search 2.0.6 tar 文件
3.  键入“./configure”，我收到以下错误：

> ## 配置狮身人面像
> 
> 检查 pthreads 所需的 CFLAGS... 无.. mysql_config 检查 mysql_real_connect... 不检查 mysql_real_connect... 不检查 MySQL 包含文件... 配置：错误：缺少包含文件。
> 
> ***************************************** 错误：找不到 MySQL 包含文件。

然后我从这里尝试了答案：[Sphinx 2.0.4 Install Error with MAMP 2.0: Can't Find MySQL Headers](https://stackoverflow.com/questions/10569877/sphinx-2-0-4-install-error-with-mamp-2-0-cant-find-mysql-headers) but I can't find the following mysql header files or directory: /Applications/MAMP/Library/include/mysql. 可能是因为我使用的是新的 MAMP 版本。

最近有人试过这样做吗？任何帮助将不胜感激。我迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-22T09:26:22.067

MAMP 缺少一些 mysql 的库和包含 sphinx 所需的文件。您必须通过将所需文件复制到`MAMP/Library/`目录来升级您的 MAMP。

1.  转到您的`MAMP/Library`目录并创建 mysql 目录：
2.  转到[http://downloads.mysql.com/archives.php](http://downloads.mysql.com/archives.php)并下载相应的。你可以去 phpMyAdmin 检查你的 MAMP 的 mysql 版本。
3.  `include/`解压它并将and复制`lib/`到`MAMP/Library/mysql`您刚刚创建的文件中。
4.  在终端中，假设您的 MAMP 位于 中`/Applications/`，那么您的配置应如下所示：

    $ ./configure --prefix=/usr/local/sphinx --with-mysql-includes=/Applications/MAMP/Library/mysql/include --with-mysql-libs=/Applications/MAMP/Library/mysql/lib

我希望这有帮助。你可以查看这个关于这个问题的[博客。](http://quyennt.com/sphinx-open-source-fulltext-search-engine/)

# stylesheet - 只制作流星刷新样式表

> ID：14591141
> 
> 赞同：2
> 
> 时间：2013-01-29T19:58:36.313
> 
> 标签：stylesheet, meteor

我注意到，在使用流星应用程序时，它会在任何样式表发生更改时自动刷新整个页面。有没有办法让它只刷新样式表资产，类似于 LiveReload 的工作方式？

另请注意，我正在使用`stylus`我的样式表。这是导致完全重新加载的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-29T11:58:33.173

我发现的当前解决方法是使用添加 css 文件的“常规方式”：

1.  将您的文件 myCss.css 放入公共文件夹“/public/myCss.css”，这样它就不会被流星编译
2.  将以下行添加到您的 html 文件中：

    ```
    <link rel="stylesheet" type="text/css" href="/myCss.css" /> 
    ```

3.  使用 Espresso 或 CSSEdit 等实时编辑器更改 myCss.css 文件。

请注意，保存文件后，流星无论如何都会重新加载。但在以下情况下： - 您正在生产模式下运行流星 - 您的 .css 文件不在流星项目中包含的任何文件夹中（就像您自己从其他地方提供 .css 文件一样） - 您的文件或文件夹正在启动带点“。” 或以波浪号“~”结尾，在这种情况下，如果这些文件发生了变化，流星将不会重新加载这些文件。请注意，我从来没有能够使用结尾波浪号来完成这项工作，而且使用不可见文件（以“。”开头）不是很方便。[请参阅此处以获取参考。](https://stackoverflow.com/questions/14823783/how-to-disable-hot-code-push-in-meteor-js-in-development)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:13:40.663

不，开箱即用的 Meteor 会在检测到任何类型的文件更改（无论是 html、css 还是 js）时重新加载整个应用程序。用不用都没关系`stylus`。

我想未来的迭代可能会占用一页`LiveReload`图像和 css 文件（因此更改它们不会导致刷新），但目前整个站点将重新加载。事实上，这可能是一个很棒的拉取请求。

# java - sql java查询

> ID：14591145
> 
> 赞同：1
> 
> 时间：2013-01-29T19:58:49.247
> 
> 标签：java, hibernate, jpa

我有一个 java 对象'star'，它由两列组成，字符串名称（明星的名字）和字符串列表粉丝（这个明星的粉丝列表）。我想使用 JPA1 或休眠来保留这个类。我已经使用列表中的注释@collectionOfElements 完成了此操作。它工作正常，并创建了两个表。

现在我想得到所有粉丝是“爱丽丝”或“鲍勃”或“查理”的明星。我怎样才能以最简单的方式（只有一个查询而不是 3 个，如果可能的话不使用“OR”语句），使用 jpa 查询（如果必须的话，休眠），并且不检索整个粉丝列表？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:16:59.457

以下查询应该可以帮助您：

```
select s.* from star s where s.fans.name in ('alice', 'bob', 'charlie') 
```

# codeigniter - CodeIgniter 强制 csv 文件下载

> ID：14591146
> 
> 赞同：2
> 
> 时间：2013-01-29T19:58:50.160
> 
> 标签：codeigniter

我有一个运行以下代码的按钮。csv 文件写得很好，但由于某种原因它没有下载。什么都没有发生，没有错误。我之前使用过强制下载，效果很好。

有任何想法吗？

```
 $csvContent = $this->dbutil->csv_from_result($query);

    $date = date('U');
    $filename = date('Y-m-d-Gis', $date); 

    if (!write_file("./reports/$filename.csv", $csvContent)) {
        echo 'Unable to write the file';
    } else {
        echo 'File written!';

        $data = file_get_contents("reports/$filename.csv");
        force_download($filename, $data); 

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:30:26.177

你应该试试`$data = file_get_contents("./reports/$filename.csv");`；）

# r - 使用 plyr 计算组间同比变化的初学者提示

> ID：14591147
> 
> 赞同：5
> 
> 时间：2013-01-29T19:58:52.443
> 
> 标签：r, dataframe, plyr

我是 plyr（和 R）的新手，正在寻找一些帮助来开始。以棒球数据集为例，我如何计算联赛和球队（lg 和球队）“at batts”的同比（同比）变化？

```
library(plyr)
df1 <- aggregate(ab~year+lg+team, FUN=sum, data=baseball) 
```

在进行了一些汇总以简化数据名声后，数据如下所示：

```
head(df1)

  year lg team   ab
  1884 UA  ALT  108
  1997 AL  ANA 1703
  1998 AL  ANA 1502
  1999 AL  ANA  660
  2000 AL  ANA   85
  2001 AL  ANA  219 
```

我想以这样的方式结束

```
 year lg team   ab yoy
  1997 AL  ANA 1703  NA
  1998 AL  ANA 1502  -201
  1999 AL  ANA  660  -842
  2000 AL  ANA   85  -575
  2001 AL  ANA  219  134 
```

我首先编写了以下函数，我认为这是错误的：

```
yoy.func <- function(df) {
  lag <- c(df$ab[-1],0)
  cur <- c(df$ab[1],0)
  df$yoy <- cur -lag
  return(df)
} 
```

没有成功，我使用以下代码尝试返回同比变化。

```
df2 <- ddply(df1, .(lg, team), yoy.func) 
```

任何指导将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T05:19:03.573

我知道您要求提供特定于“plyr”的解决方案，但为了分享，这里是基本 R 中的另一种方法。在我看来，我发现基本 R 方法就像“可读”一样。而且，至少在这种特殊情况下，它要快得多！

```
output <- within(df1, {
  yoy <- ave(ab, team, lg, FUN = function(x) c(NA, diff(x)))
})
head(output)
#   year lg team   ab  yoy
# 1 1884 UA  ALT  108   NA
# 2 1997 AL  ANA 1703   NA
# 3 1998 AL  ANA 1502 -201
# 4 1999 AL  ANA  660 -842
# 5 2000 AL  ANA   85 -575
# 6 2001 AL  ANA  219  134

library(rbenchmark)

benchmark(DDPLY = {
  ddply(df1, .(team, lg), mutate ,
        yoy = c(NA, diff(ab)))
}, WITHIN = {
  within(df1, {
    yoy <- ave(ab, team, lg, FUN = function(x) c(NA, diff(x)))
  })
}, columns = c("test", "replications", "elapsed", 
               "relative", "user.self"))
#     test replications elapsed relative user.self
# 1  DDPLY          100  10.675    4.974    10.609
# 2 WITHIN          100   2.146    1.000     2.128 
```

## 更新：`data.table`

如果您的数据非常大，请查看`data.table`. 即使使用此示例，您也会发现相对而言有很好的加速。此外，语法非常紧凑，在我看来，易于阅读。

```
library(plyr)
df1 <- aggregate(ab~year+lg+team, FUN=sum, data=baseball)
library(data.table)
DT <- data.table(df1)
DT
#       year lg team   ab
#    1: 1884 UA  ALT  108
#    2: 1997 AL  ANA 1703
#    3: 1998 AL  ANA 1502
#    4: 1999 AL  ANA  660
#    5: 2000 AL  ANA   85
#   ---                  
# 2523: 1895 NL  WSN  839
# 2524: 1896 NL  WSN  982
# 2525: 1897 NL  WSN 1426
# 2526: 1898 NL  WSN 1736
# 2527: 1899 NL  WSN  787 
```

现在，看看这个简洁的解决方案：

```
DT[, yoy := c(NA, diff(ab)), by = "team,lg"]
DT
#       year lg team   ab  yoy
#    1: 1884 UA  ALT  108   NA
#    2: 1997 AL  ANA 1703   NA
#    3: 1998 AL  ANA 1502 -201
#    4: 1999 AL  ANA  660 -842
#    5: 2000 AL  ANA   85 -575
#   ---                       
# 2523: 1895 NL  WSN  839  290
# 2524: 1896 NL  WSN  982  143
# 2525: 1897 NL  WSN 1426  444
# 2526: 1898 NL  WSN 1736  310
# 2527: 1899 NL  WSN  787 -949 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T20:05:00.427

如何使用 diff()：

```
df <- read.table(header = TRUE, text = '  year lg team   ab
  1884 UA  ALT  108
  1997 AL  ANA 1703
  1998 AL  ANA 1502
  1999 AL  ANA  660
  2000 AL  ANA   85
  2001 AL  ANA  219')
require(plyr)
ddply(df, .(team, lg), mutate ,
      yoy = c(NA, diff(ab)))
#   year lg team   ab  yoy
1 1884 UA  ALT  108   NA
2 1997 AL  ANA 1703   NA
3 1998 AL  ANA 1502 -201
4 1999 AL  ANA  660 -842
5 2000 AL  ANA   85 -575
6 2001 AL  ANA  219  134 
```

# c# - 禁用 MaskedTextBox 声音

> ID：14591152
> 
> 赞同：2
> 
> 时间：2013-01-29T19:59:04.690
> 
> 标签：c#, .net-3.5, maskedtextbox

我使用`MaskedTextBox`控件来帮助在我的项目中输入日期。我已经`mtb.BeepOnError`设置为`false`. 但是，每当按下“Enter”键或“Esc”键时，它都会发出一般的哔声，这对我的应用程序来说是不可取的。

这似乎是 MTB 的默认行为，那么有什么办法可以改变它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:10:36.413

你可以尝试这样的事情：

```
void mtb_KeyDown(object sender, KeyEventArgs e) {
  if (e.KeyCode == Keys.Enter | e.KeyCode == Keys.Escape) {
    e.SuppressKeyPress = true;
  }
} 
```

# c# - TreeView 折叠除选定和父节点之外的所有节点

> ID：14591156
> 
> 赞同：0
> 
> 时间：2013-01-29T19:59:11.460
> 
> 标签：c#, wpf, treeview, datatemplate

我想使用 TreeView 浏览文件夹，当我选择一些文件夹和子文件夹时，我希望其他分支折叠。我试图收集一些教程，并在下面得到了几行代码。现在 TreeView 看起来像我想要的但没有崩溃。我认为问题在于属性 IsExpanded，但我不确定如何修复它并将其与 HierarchicalDataTemplate 一起使用。

这些是我绑定到 treeView 的类：

```
public class Item : INotifyPropertyChanged
{
    public string Name { get; set; }
    public string Path { get; set; }

    public Item Parent { get; set; }

    private bool isExpanded;
    public bool IsExpanded
    {
        get { return isExpanded; }
        set
        {
            isExpanded = value;
            OnPropertyChanged("IsExpanded");
        }
    }

    /// <summary>
    /// Determines whether the TreeViewItem associated with this data item
    /// is selected.
    /// </summary>
    private bool isSelected;
    public bool IsSelected
    {
        get { return isSelected; }
        set
        {
            isSelected = value;
            OnPropertyChanged("IsSelected");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    /// <summary>
    /// Raises the PropertyChanged event.
    /// </summary>
    /// <param name="propertyName">The name of the property that has changed.</param>
    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

}

public class FileItem : Item
{

}

public class DirectoryItem : Item
{
    public List<Item> Items { get; set; }

    public DirectoryItem()
    {
        Items = new List<Item>();
    }
} 
```

我在 XAML 中的 treeView 如下所示：

```
 <Grid x:Name="grdFolderTree"  Canvas.Left="650" Canvas.Top="540">
        <TreeView x:Name="treeFolders" ItemsSource="{Binding}" SelectedItemChanged="TreeView_SelectedItemChanged" >
            <TreeView.Resources>
                <HierarchicalDataTemplate DataType="{x:Type Model:DirectoryItem}"  ItemsSource="{Binding Items}">
                    <Border Width="150" BorderBrush="RoyalBlue" 
                            Background="RoyalBlue"  BorderThickness="1" 
                            CornerRadius="2" Margin="2" Padding="2" >
                        <StackPanel Orientation="Horizontal" >
                            <Image Width="16" Height="16" 
       Margin="3,0" Source="Images\TreeView\folder.png" />
                            <TextBlock  Text="{Binding Path=Name}" FontWeight="Bold" Foreground="White"></TextBlock>
                        </StackPanel>
                    </Border>
                </HierarchicalDataTemplate>

                <HierarchicalDataTemplate DataType="{x:Type Model:FileItem}">
                    <Border Width="132"  Background="LightBlue" CornerRadius="2" Margin="1" >
                        <StackPanel Orientation="Horizontal" >
                            <Image Width="16" Height="16" 
       Margin="3,0" Source="Images\TreeView\video.png" />
                            <TextBlock Margin="2"  Text="{Binding Path=Name}"></TextBlock>
                        </StackPanel>
                    </Border>
                </HierarchicalDataTemplate>
            </TreeView.Resources>
        </TreeView>
    </Grid> 
```

这是我隐藏项目的代码：

```
 private void TreeView_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
        List<Item> parentsOfSelectedItem = new List<Item>();
        Item selectedItem = this.treeFolders.SelectedItem as Item;
        if (selectedItem != null)
        {

            Item parentItem = selectedItem.Parent as Item;
            while (parentItem != null)
            {
                parentsOfSelectedItem.Add(parentItem);
                parentItem = parentItem.Parent as Item;
            }
        }
        foreach (var item in this.treeFolders.Items)
        {
            Item treeItem = item as Item;
            CollapseTreeViewItem(treeItem);
        }

        foreach (Item item in parentsOfSelectedItem)
        {
            item.IsExpanded = true;
        }
        if (selectedItem != null)
        {
            selectedItem.IsSelected = true;
            selectedItem.IsExpanded = true;
        }
    }

    void CollapseTreeViewItem(Item item)
    {
        item.IsExpanded = false;
        //foreach (TreeViewItem subitem in item.Items)
        //{
        //    CollapseTreeViewItem(subitem);
        //}
    } 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:25:04.420

现在你的 TreeView 实际上并没有使用你的 ViewModel 的 IsExpanded 属性，因为它不知道它。尝试在项目容器样式中使用几个设置器：

```
<TreeView ...>
    <TreeView.ItemContainerStyle>
        <Style TargetType="{x:Type TreeViewItem}">
            <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
         </Style>
    </TreeView.ItemContainerStyle>
</TreeView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T18:48:27.223

如果你想展开/折叠所有节点，你可以试试这个

xml:

```
<TreeView x:Name="TreePeople">
    <TreeView.ItemContainerStyle>
        <Style TargetType="{x:Type TreeViewItem}">
            <Setter Property="IsExpanded" Value="True" />
        </Style>
    </TreeView.ItemContainerStyle>
</TreeView> 
```

C＃：

```
bool Expanded = false; 
// The event subscription method (for a button click)
private void ButtonExpand__Click(object sender, RoutedEventArgs e)
{
    Expanded = !Expanded;
    Style Style = new Style
    {
        TargetType = typeof(TreeViewItem)
    };

    Style.Setters.Add(new Setter(TreeViewItem.IsExpandedProperty, Expanded));
    TreePeople.ItemContainerStyle = Style;
} 
```

# html - 如何使桌面高度为 100%？

> ID：14591157
> 
> 赞同：0
> 
> 时间：2013-01-29T19:59:12.563
> 
> 标签：html, html-table

我有一个问题，我有我的网站：yusifmusic.com，以便链接（传记、旅游历史等）位于下拉列表中。但是，如您所见，一旦文本超出左列，它就会开始延伸到左列。一种解决方法是在代码中添加大量中断（在 p 和 end span 标签之间，靠近底部）。但是，这会在页面底部增加很多空白空间。我相信一定有更好的解决方案。我尝试使用样式使表格高度 = 100%，但没有运气。只是想让这个左列表格的高度延伸到无穷大，这样这个网页上的中心文本就会在显示时缩进。它现在的样子真的很草率......我该怎么做？

```
<table bgcolor="#000000" width="200" border="0" align="left" cellpadding="35";>
<tr><td>
<div align="center">
<span style="font-size: 12pt">
<u>Tour Dates:</u><p></span>
<span style="font-size: 8pt">
<P>  
2/26 - 50 Mason Social House - San Francisco, CA<br><br>
etc... <br><br>
<p>

</span>
</td></tr>
</table>

<P><br><br><br>
<p>

<div align="center" class="geo">

CONTACT: <a href="mailto:booking@yusifmusic.com">booking@yusifmusic.com</a> etc etc

<br>
<br>

<script language="javascript"> 
function toggleBio() {
var ele = document.getElementById("toggleBio");
var text = document.getElementById("displayBio");
if(ele.style.display == "block") {
        ele.style.display = "none";
    text.innerHTML = "BIOGRAPHY";
}
else {
    ele.style.display = "block";
    text.innerHTML = "hide";
}
} 
</script>

<font size = "4"><center>
<a id="displayBio" href="javascript:toggleBio();">BIOGRAPHY</a> </center></font>

<div id="toggleBio" style="display: none">

<center><b>Yusif!</b></center>
<center><i>Yusif!</i> (self-released)</center>
<center><u>Biography</u></center>
<p>
<p align="left">
"Sometimes our most destructive moments... etc etc<br><br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:01:44.913

我个人发现处理表格来设计网站布局通常很痛苦，因此通常很多 Web 开发正在从表格转向 div 标签、类和样式表。

我知道这对您的问题来说不是一个小的直接解决方案，但我认为您可以轻松地将其中的很多内容移至 Bootstrap.js 以非常快速轻松地解决此问题。

[http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

特别是，您可以使用脚手架创建三个“列”或垂直部分，您可以将现有代码插入其中。

假设您在页面的其余部分正确使用引导程序，则分隔符将用于底部，如下所示：

```
<div class="row">
   <div class="span4">...Tour Dates Code...</div>
   <div class="span4">...Middle Column Code Contact....Bio....</div>
   <div class="span4">...Code for The Red Column...</div>
</div> 
```

另一件可能更快的解决方法是将整个底部包含在一个“父表”中。您可以自己玩弄单元格宽度和百分比。将代码放在父表中将有助于这些部分保留其形式。

```
<table bgcolor="#000000" width="100%" border="0" > 
    <tr>
        <td>....Insert left table that has bgcolor="#00000" and cellpadding="35" </td>
    </tr>
    <tr>
        <td>...Insert Center Code here....</td>
    </tr>
    <tr>
        <td>...Insert right table that has cellpadding="8" and bgcolor="#550000"...</td>
    </tr>
</table> 
```

您可以在此处阅读有关表格的更多信息：http: [//www.w3schools.com/html/html_tables.asp](http://www.w3schools.com/html/html_tables.asp)和其他在线位置。

我还建议从表格中删除对齐标签，并管理宽度并从父单元格容器中定位它们。

# c++ - 设计模式使得只能通过库访问派生类

> ID：14591159
> 
> 赞同：-2
> 
> 时间：2013-01-29T19:59:17.437
> 
> 标签：c++, design-patterns, inheritance, delegates, class-design

试图实现一种设计，其中实现接口的类只能从库中调用。换句话说，对实现的接口的访问应该是通过库（TopLib）。似乎应该使用委托的情况。你觉得这个设计怎么样？这是可行的，但希望得到反馈和建议，使其变得更好、更健壮和万无一失。

```
class Interface 
{
protected:
    virtual void hi(void) = 0;
};

class ABC : private Interface {
protected:
    ABC() {}
    virtual void hi() {
        std::cout << "abc" << std::endl;
    }
};

class XYZ : private Interface {
protected:
    XYZ() {}
    virtual void hi() {
        std::cout << "xyz" << std::endl;
    }
};

template<typename T>
class TopLib : private T
{
public:
    void sayhi() {
        hi();
    }
};

int _tmain(int argc, _TCHAR* argv[])
{
    TopLib<ABC> b;
    b.sayhi();

    TopLib<XYZ> c;
    c.sayhi();
    //c.hi(); <- fails

    //ABC test; <- fails
    //test.hi(); <- fails

    getchar();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:11:26.437

访问修饰符可以在派生类中放宽，因此您将受制于实现接口的人。没有什么能阻止我说

```
class FooBarBaz : private Interface {
  public:
    FooBarBaz() {}
    virtual void hi() { // Implements Interface::hi()
        std::cout << "see what i mean!" << std::endl;
    }
}; 
```

并在有或没有`TopLib<FooBarBaz>`.

# c++ - 将二进制文件缓冲区的块读入不同的类型

> ID：14591164
> 
> 赞同：1
> 
> 时间：2013-01-29T19:59:37.503
> 
> 标签：c++, storage, binaryfiles, data-access

我正在尝试将二进制文件读入内存，然后像这样使用它：

```
struct myStruct {
    std::string mystring; // is 40 bytes long
    uint myint1; // is 4 bytes long
};

typedef unsigned char byte;

byte *filedata = ReadFile(filename); // reads file into memory, closes the file
myStruct aStruct;
aStruct.mystring = filedata.???? 
```

我需要一种使用偏移量访问二进制文件并在该偏移量处获得一定长度的方法。如果我将二进制文件数据存储在 std::string 中，这很容易，但我认为使用它来存储二进制数据并不是很好的做事方式。`(filedata.substr(offset, len))`

相当广泛的（IMO）搜索没有找到任何相关的东西，有什么想法吗？如果您认为有必要，我愿意更改存储类型（例如更改为 std::vector）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:48:05.000

如果您不打算使用序列化库，那么我建议为每个类添加序列化支持：

```
struct My_Struct
{
    std::string my_string;
    unsigned int my_int;
    void Load_From_Buffer(unsigned char const *& p_buffer)
    {
        my_string = std::string(p_buffer);
        p_buffer += my_string.length() + 1; // +1 to account for the terminating nul character.
        my_int = *((unsigned int *) p_buffer);
        p_buffer += sizeof(my_int);
    }
};

unsigned char * const buffer = ReadFile(filename);
unsigned char * p_buffer = buffer;
My_Struct my_variable;
my_variable.Load_From_Buffer(p_buffer); 
```

其他一些有用的接口方法：

```
unsigned int Size_On_Stream(void) const; // Returns the size the object would occupy in the stream.
void Store_To_Buffer(unsigned char *& p_buffer); // Stores object to buffer, increments pointer. 
```

使用模板，您可以扩展序列化功能：

```
void Load_From_Buffer(std::string& s, unsigned char *& p_buffer)
{
    s = std::string((char *)p_buffer);
    p_buffer += s.length() + 1;
}

void template<classtype T> Load_From_Buffer(T& object, unsigned char *& p_buffer)
{
  object.Load_From_Buffer(p_buffer);
} 
```

## 编辑1：不直接写结构的原因

**在 C 和 C++ 中，结构的大小可能不等于其成员大小的总和。**
允许编译器在成员之间插入*填充*或未使用的空间，以便成员在地址上对齐。

例如，32 位处理器喜欢在 4 字节边界上获取内容。在`char`结构中包含一个后跟 an`int`将使`int`相对地址为 1，这不是 4 的倍数。编译器将*填充*该结构，以便`int`在相对地址 4 上对齐。

**结构可能包含指针或包含指针的项。**
例如，`std::string`类型的大小可能为 40，尽管字符串可能包含 3 个字符或 300 个字符。它有一个指向实际数据的指针。

**字节序。**
对于多字节整数，一些处理器如最高有效字节 (MSB)，即 Big Endian，优先（人类读取数字的方式）或最低有效字节优先，即 Little Endian。小端格式比大端格式需要更少的电路来读取。

## 编辑 2：变体记录

在输出数组和容器之类的东西时，您必须决定是要输出完整的容器（包括未使用的插槽）还是只输出容器中的项目。仅输出容器中的项目将使用*变体记录*技术。

输出变体记录的两种技术：数量后跟项目或项目后跟哨兵。后者是 C 风格字符串的编写方式，哨兵是一个空字符。

另一种技术是输出项目的数量，然后是项目。所以如果我有 6 个数字，0、1、2、3、4、5，输出将是：
6 // 项目数
0
1
2
3
4
5

在上面的 Load_From_Buffer 方法中，我将创建一个临时保存数量，将其写出，然后从容器中取出每个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:13:04.827

您可以为您的结构重载 std::ostream 输出运算符和 std::istream 输入运算符，如下所示：

```
struct Record {
    std::string name;
    int value;
};

std::istream& operator>>(std::istream& in, Record& record) {
    char name[40] = { 0 };
    int32_t value(0);
    in.read(name, 40);
    in.read(reinterpret_cast<char*>(&value), 4);
    record.name.assign(name, 40);
    record.value = value;
    return in;
}

std::ostream& operator<<(std::ostream& out, const Record& record) {
    std::string name(record.name);
    name.resize(40, '\0');
    out.write(name.c_str(), 40);
    out.write(reinterpret_cast<const char*>(&record.value), 4);
    return out;
}

int main(int argc, char **argv) {
    const char* filename("records");
    Record r[] = {{"zero", 0 }, {"one", 1 }, {"two", 2}};
    int n(sizeof(r)/sizeof(r[0]));

    std::ofstream out(filename, std::ios::binary);
    for (int i = 0; i < n; ++i) {
        out << r[i];
    }
    out.close();

    std::ifstream in(filename, std::ios::binary);
    std::vector<Record> rIn;
    Record record;
    while (in >> record) {
        rIn.push_back(record);
    }
    for (std::vector<Record>::iterator i = rIn.begin(); i != rIn.end(); ++i){
        std::cout << "name: " << i->name << ", value: " << i->value
                  << std::endl;
    }
    return 0;
} 
```

# r - 可变宽度条形图

> ID：14591167
> 
> 赞同：16
> 
> 时间：2013-01-29T19:59:37.927
> 
> 标签：r, plot, ggplot2

我想在 R 中制作一个与此类似的区域/条形图：（ ![大卫麦凯书中的情节](../Images/66d5e6ffc43bc68a505b0e2becf58677.png) *来自 David MacKay 的（优秀）书籍“可持续能源”的情节）*

老实说，我什至找不到这样的情节的正确名称。它似乎是一个具有可变宽度条的条形图。确定性是一个强大的沟通工具。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-29T20:10:02.977

您可以使用基本图形来做到这一点。首先我们指定一些宽度和高度：

```
widths = c(0.5, 0.5, 1/3,1/4,1/5, 3.5, 0.5)
heights = c(25, 10, 5,4.5,4,2,0.5) 
```

然后我们使用标准`barplot`命令，但指定块之间的空间为零：

```
##Also specify colours
barplot(heights, widths, space=0, 
        col = colours()[1:6]) 
```

由于我们指定了宽度，我们需要指定轴标签：

```
axis(1, 0:6) 
```

要添加网格线，请使用以下`grid`函数：

```
##Look at ?grid to for more control over the grid lines
grid() 
```

您可以手动添加箭头和文本：

```
arrows(1, 10, 1.2, 12, code=1)
text(1.2, 13, "A country") 
```

要在右上角添加您的正方形，请使用以下`polygon` 功能：

```
polygon(c(4,4,5,5), c(20, 25, 25, 20), col="antiquewhite1")
text(4.3, 22.5, "Hi there", cex=0.6) 
```

这一切都给出了：

![在此处输入图像描述](../Images/a53efd999bffa8da2d3dd9e51fe012a2.png)

* * *

另外：在显示的图中，我使用 par 命令调整了几个方面：

```
par(mar=c(3,3,2,1), 
    mgp=c(2,0.4,0), tck=-.01,
    cex.axis=0.9, las=1) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-29T20:12:44.980

受我上面提到[的博客文章中的代码的启发，](http://learnr.wordpress.com/2009/03/29/ggplot2-variable-width-column-chart/)

```
df <- data.frame(x = c("Alpha", "Beta", "Gamma", "Delta"), width = c(25, 50, 75, 100), height = c(100, 75, 50, 25))
df$w <- cumsum(df$width)
df$wm <- df$w - df$width
df$wt <- with(df, wm + (w - wm)/2)

library(ggplot2)
p  <- ggplot(df, aes(ymin = 0))
p1 <- p + geom_rect(aes(xmin = wm, xmax = w, ymax = height, fill = x))
library(grid) # needed for arrow function
p1 + geom_text(aes(x = wt, y = height * 0.8, label = x)) + 
     theme_bw() + labs(x = NULL, y = NULL) + 
     theme(axis.ticks = element_blank(),axis.text.x = element_blank(), 
     axis.text.y = element_blank(), legend.position = "none") + 
     annotate("text", x = 120, y = 83, label = "a Beta block") + 
     geom_segment(aes(x = 100, y = 80, xend = 80, yend = 75), 
     arrow = arrow(length = unit(0.5, "cm"))) 
```

![β 受体阻断药](../Images/6ae3894deac3a0be9a030a8bf3c63b4b.png)

# python - argparse：不显示使用 -h

> ID：14591168
> 
> 赞同：4
> 
> 时间：2013-01-29T19:59:41.873
> 
> 标签：python, argparse

编码

```
from argparse import ArgumentParser
p = ArgumentParser(description = 'foo')
p.add_argument('-b', '--bar', help = 'a description')
p.parse_args() 
```

...导致输出：

```
$ python argparsetest.py -h
usage: argparsetest.py [-h] [-b BAR]

foo

optional arguments:
  -h, --help         show this help message and exit
  -b BAR, --bar BAR  a description 
```

我想要的是：

```
$ python argparsetest.py -h
foo

optional arguments:
  -h, --help         show this help message and exit
  -b BAR, --bar BAR  a description 
```

例如，寻求帮助时没有使用信息。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T20:08:08.183

绝对有可能 - 但我不确定是否有记录......

```
from argparse import ArgumentParser,SUPPRESS
p = ArgumentParser(description = 'foo',usage=SUPPRESS)
p.add_argument('-b', '--bar', help = 'a description')
p.parse_args() 
```

* * *

通过阅读源代码，我一起破解了一些东西，在显示错误消息时似乎也可以工作......**警告**- 这些东西*大多*没有记录，因此随时可能改变:-)

```
from argparse import ArgumentParser,SUPPRESS
import sys as _sys
from gettext import gettext as _

class MyParser(ArgumentParser):
    def error(self, message):    
        usage = self.usage
        self.usage = None
        self.print_usage(_sys.stderr)
        self.exit(2, _('%s: error: %s\n') % (self.prog, message))
        self.usage = usage

p = MyParser(description = 'foo',usage=SUPPRESS)
p.add_argument('-b', '--bar', help = 'a description')
p.parse_args() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-04T16:08:12.313

注意：要不显示特定参数的用法，请使用

```
parser.add_argument('--foo', help=argparse.SUPPRESS) 
```

根据[文档](https://docs.python.org/3/library/argparse.html#help)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-30T15:14:07.163

附加说明：如果您根本不需要帮助，可以使用 add_help=False 构造解析器

```
def parse_args():
    parser = argparse.ArgumentParser(add_help=False)
    parser.add_argument("arg")
    return parser.parse_known_args()

def main():
    args, remaining = parse_args()
    print(args)
    print(remaining)

if __name__ == '__main__':
    main()

user@host % python3 /tmp/test.py  f
Namespace(arg='f')
[]
user@host % python3 /tmp/test.py  f -h
Namespace(arg='f')
['-h']
user@host % python3 /tmp/test.py  f -h --help
Namespace(arg='f')
['-h', '--help']
user@host % 
```

# sencha-touch-2 - Sencha touch 2：在创建生产版本时出现错误'对象没有方法'getControllrer'

> ID：14591169
> 
> 赞同：0
> 
> 时间：2013-01-29T19:59:45.017
> 
> 标签：sencha-touch-2

我正在开发 sencha touch 2.1.0。我已经使用 sencha cmd 3.0 创建了生产版本。生产版本成功但是在运行应用程序（生产版本）时，我收到以下错误

**使用消息评估[http://xx.xx.xx.xxx/DH/DH_Prod/production/app.js](http://xx.xx.xx.xxx/DH/DH_Prod/production/app.js)时出错：TypeError: Object [object Object] has no method 'getController'。**

我在我的应用程序中使用 2 个控制器，并且在我创建 productionBuild 之前它们都工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:46:53.640

我得到了如下的实际解决方案。

有些地方我直接访问控制器，例如 this.MYapp.getController('MyController') 而不是 this.getApplication().getController('MyController') ，这在生产构建期间导致了问题，但在开发中没有版本。

# python - 在 ARM 处理器上使用 Numpy

> ID：14591170
> 
> 赞同：6
> 
> 时间：2013-01-29T20:00:02.990
> 
> 标签：python, numpy, arm

我正在尝试将 numpy 放在带有 ARM 处理器的系统上。我对这些处理器没有太多经验，所以我不完全确定从哪里开始。我尝试通过谷歌搜索答案，但没有成功找到有关交叉编译 numpy 的细节。我目前在机器上有 python 版本 2.4 并且正在尝试导入 numpy 1.6.2 。关于我可以从哪里开始的任何建议？

# c# - 动态类成员？

> ID：14591175
> 
> 赞同：0
> 
> 时间：2013-01-29T20:00:15.830
> 
> 标签：c#, dynamic, .net-4.5

是否可以使用动态类成员？例如

```
class blarg
{
public dynamic ctx = new ExpandoObject();
} 
```

不让 blarg 从 ? 继承（和实现）`DynamicObject`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:01:49.087

是的。您可以`dynamic`在任何类中创建字段或属性。

如果您希望您的类本身是动态的`DynamicObject`，则只需要继承自（从技术上讲，您需要实现`IDynamicMetaObjectProvider`，但这通常是通过 来完成的）。`DynamicObject`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:05:00.807

没有固定的继承结构；首先，`dynamic`无论如何都可以使用反射/元编程，所以你可以附加一个带有成员的常规类，它会工作 - 但你将无法添加新成员等。其次，你需要做的“所有”支持完全`dynamic`是实现`IDynamicMetaObjectProvider`- 不继承某些东西。“全部”用引号引起来，因为这不是微不足道的。`DynamicObject`存在为您做一些繁重的工作，就像`ExpandoObject`您只想要一个财产袋的情况一样。

但是由于调用者没有绑定到任何特定类型（因为他们正在使用`dynamic`），坦率地说，从`DynamicObject`.

# wolfram-mathematica - 从 Mathematica 转换为最大值

> ID：14591177
> 
> 赞同：2
> 
> 时间：2013-01-29T20:00:22.823
> 
> 标签：wolfram-mathematica, maxima

我正在尝试将代码从 Mathematica 转换为 Maxima。代码大约300行，不是我写的，写的人评论不好。我想知道是否有人知道这样转换的程序？

我尝试了一个来自名为 mixima 的源代码伪造，但我无法让它运行。

最好的，本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:31:28.690

从 Mathematica 语法转换为 Maxima 非常简单。在互联网的某个地方，有一个编程语言的“罗塞塔石碑”可能会有所帮助。（发现这个 [1] 似乎很有帮助，尽管我似乎记得更广泛的东西。目前找不到其他任何东西。）

然而，困难的部分是在一个系统或另一个系统中可能会有不同的功能。特别是，我认为 Mathematica 的求解方程的功能比 Maxima 的更强大。因此，能否翻译代码不仅仅取决于转换语法。我的建议是将代码发布到 Maxima 邮件列表 (maxima@math.utexas.edu) 并询问是否可以翻译。

[1] [http://www.axiom-developer.org/axiom-website/rosetta.html](http://www.axiom-developer.org/axiom-website/rosetta.html)

# wordpress - 在 Wordpress 网站上切换主题时保留社交分享

> ID：14591179
> 
> 赞同：2
> 
> 时间：2013-01-29T20:00:32.233
> 
> 标签：wordpress, wordpress-theming, social

我打算将网站切换到另一个主题（基于 Wordpress）。目前的网站有多篇文章，社交分享很多。我想保留每篇现有文章的分享数（推文数、点赞数等）。该网站将托管在相同的域和相同的 url/永久链接结构上。

新网站将有一个新主题，社交分享按钮通过另一个插件（Jetpack 而不是 DiggDigg）提供。我的问题是：我会保留每篇文章的社交分享数量吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:54:59.317

通常，如果您网站的 URL 保持不变，那么您的社交分享计数也应该保持不变。每个服务（Facebook、LinkedIn、Twitter、G+ 等）的社交分享按钮的计数基于特定规范 URL 的共享次数 - 而不是基于页面上特定按钮被点击的次数。

Digg Digg 到 Jetpack 的迁移将是唯一可能的问题 - 查看我拥有的使用 Digg Digg 的网站，它似乎使用了原生的 Facebook、Twitter、LinkedIn 和 G+ 按钮。这意味着将您的“喜欢”和“分享”从 Digg Digg 转移到其他地方应该没有问题。

然而，从他们的演示站点查看 Jetpack 代码，似乎存在问题：看起来它可能会自动将 URL 变量附加到共享 URL 的末尾以帮助跟踪。在此处查看他们的演示站点：

[http://jetpack.me/support/sharing/](http://jetpack.me/support/sharing/)

此页面上通过 Digg Digg 的普通 Facebook 分享按钮的代码如下所示：

```
<div class='dd_button'>
    <script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
    <fb:like href="http://jetpack.me/support/sharing/" send="false" show_faces="false"  layout="box_count" width="50"  ></fb:like>
</div> 
```

同一页面上 Jetpack 的分享按钮代码如下所示：

```
<div class="sd-content">
    <a rel="nofollow" class="share-facebook sd-button share-icon" href="http://jetpack.me/support/sharing/?share=facebook" title="Share on Facebook" id="sharing-facebook-755">
        <span>Facebook</span>
    </a>
</div> 
```

...并`share-facebook`通过 javascript 将类插入到适当的共享代码中。

重要的是，如果您查看 Jetpack 使用的 URL，它已`?share=facebook`附加到末尾，而 Digg Digg 共享的页面实际上是[http://jetpack.me/support/sharing/](http://jetpack.me/support/sharing/)。

如果 Jetpack 默认将这些 URL 变量添加到所有共享链接的末尾，那么您需要研究一种方法来删除它以保持您的共享数量。但是你是否可以在不影响 Jetpack 运行的情况下做到这一点呢？这就是问题所在。

如果您无法从链接中删除 URL 变量，LinkedIn、Facebook、G+ 等可能会将它们视为单独的链接，从而重置共享计数。

# variables - 简报变量

> ID：14591180
> 
> 赞同：0
> 
> 时间：2013-01-29T20:00:34.750
> 
> 标签：variables, powerpoint

我是一名教师，我在 powerpoint 中编写点击式游戏。我有一张带有 3 个按钮的幻灯片和带有 2 个变量（`var1`和）的代码按钮 3 是退出（退出）按钮，并且`var2`只有 在必须以正确的顺序按下按钮才能退出（按钮 1 后跟按钮 2）时才有效已在模块顶部将变量声明为整数。我的代码如下...`var1 = 1``var2 = 1`

```
sub button1()
var1 = 1
var2 = 0
end sub

sub button2()
var2 = 1
end sub

sub button exit()
If var1.Value = 1 & var2.Value = 1 Then
With SlideShowWindows(1).View
.GotoSlide 58, msoFalse
End With
Else
MsgBox ("incorrect combination")
End If
end sub 
```

我不是专家，无法弄清楚为什么这不起作用。请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:07:47.977

这应该有效。如果没有，请告诉我们出了什么问题：

```
Option Explicit
' Always start with this; it forces you to 
' declare your variables properly

Dim var1 as integer
Dim var2 as integer

sub button1()
var1 = 1
var2 = 0
end sub

sub button2()
var2 = 1
end sub

sub button exit()
If var1 + var2 = 2 Then
With SlideShowWindows(1).View
.GotoSlide 58, msoFalse
End With
Else
MsgBox ("incorrect combination")
End If
end sub 
```

# c# - 在 Mvc 4 中使用 table-per-type 继承将对象添加到数据库

> ID：14591181
> 
> 赞同：2
> 
> 时间：2013-01-29T20:00:35.487
> 
> 标签：c#, asp.net-mvc, database, entity-framework

我有一个类`Landlord`继承自`UserProfile`使用 table-per-type 继承。

当新用户在应用程序上注册时，他们输入一些条件并选择他们想要的帐户类型，或者`Landlord`或`Tenant`。

这是我的 AccountController/Register 方法：

```
public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            try
            {
                WebSecurity.CreateUserAndAccount(model.UserName, model.Password,
                                            new
                                            {
                                                Email = model.Email,
                                                FirstName = model.FirstName,
                                                LastName = model.LastName,
                                                AccountType = model.AccountType.ToString()
                                            },
                                            false);

                // Add user to role that corresponds with selected account type
                if (model.AccountType == AccountType.Tenant)
                {
                    try
                    {
                        Roles.AddUserToRole(model.UserName, "Tenant");

                        using (var db = new LetLordContext())
                        {
                            var tenant = db.UserProfile.Create<Tenant>();

                            tenant.TenantAge = null;
                            tenant.TenantGroupMembers = null;
                            tenant.UserId = WebSecurity.CurrentUserId;
                            tenant.UserName = model.UserName;
                            // more properties associated with tenant
                            // ...

                            db.UserProfile.Add(tenant);
                            db.SaveChanges();
                        }

                    }
                    catch (ArgumentException e)
                    {
                        ModelState.AddModelError("Unable to add user to role", e);
                    }
                }
                if (model.AccountType == AccountType.Landlord)
                {
                    try
                    {
                        Roles.AddUserToRole(model.UserName, "Landlord");

                        using (var db = new LetLordContext())
                        {
                            var landlord = db.UserProfile.Create<Landlord>();

                            // same idea as adding a tenant
                        }
                    }
                    catch (ArgumentException e)
                    {
                        ModelState.AddModelError("Unable to add user to role", e);
                    }
                }

                return RedirectToAction("Confirm", "Home");
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

例如，如果我`Tenant`在注册时选择了所需的帐户类型，`WebSecurity.CreateUserAndAccount`则会正确地将用户添加到`UserProfile`表中，例如 a`UserProfileId`为 1。

然后，`if (model.AccountType == AccountType.Tenant)`会看到选定的帐户类型是`Tenant`，将用户添加到该角色，a`UserProfileId`为 1，a`RoleId`为 1。在此范围内`if-statement`，因为选定的角色是`Tenant`，所以我像这样创建一个新的`Tenant`：`var tenant = db.UserProfile.Create<Tenant>();`并将其保存到数据库中（使用正确的 UserProfileID 作为 PK）。

**问题：**每次我尝试注册一个用户时，都会将两个`UserProfile`实体（两行）添加到表中。`UserProfile`我知道这可能是由于我正在调用`WebSecurity.CreateUserAndAccount`并且我正在创建一个新`Tenant`对象。

我该如何避免这种情况？

如何将正在使用的模型添加`WebSecurity.CreateUserAndAccount`到`UserProfile`表和`Tenant`表 ONCE 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:17:58.133

无需分别调用`WebSecurity.CreateUserAndAccount()`和创建 UserProfile 子类 Tenent 或 Landlord，这会导致 UserProfile 表中出现重复条目​​，您只需创建子类（同时提供 UserProfile 的值）然后调用方法`WebSecurity.CreateAccount()`。

这是我解决问题的方法（我的子类称为医师）：

在 AccountModels 中，我使用 table-per-type 继承添加了 sublass：

```
public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<Physician> Physicians { get; set; }
}

[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
}

[Table("Physicians")]
public class Physician : UserProfile
{
    public Guid PhysicianGUID { get; set; }
    public string Name { get; set; }
} 
```

在 AccountController/Register 方法中：

```
if (ModelState.IsValid)
        {
            // Attempt to register the user
            try
            {
                using( UsersContext dbContext = new UsersContext()){
                    dbContext.Physicians.Add(new Physician { UserName = model.UserName, Name = "testDoctor", PhysicianGUID = Guid.NewGuid() });
                    dbContext.SaveChanges();
                }
                WebSecurity.CreateAccount(model.UserName, model.Password);
                WebSecurity.Login(model.UserName, model.Password);
                return RedirectToAction("Index", "Home");
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:21:13.850

在这种情况下，您不会同时创建 UserProfile 和租户或房东。一旦创建了实体，实体类型就无法更改（甚至无法将其扩展为子类型）。因此，在您的情况下，您只需跳过创建 UserProfile 的步骤，只需创建并保存继承它的租户或房东实体。

更多信息链接自我对这个问题的回答的选项 1：[代码优先 TPT 继承 - 如何提供外键而不是 EF 为我创建父行？](https://stackoverflow.com/questions/14488148/code-first-tpt-inheritance-how-can-i-supply-the-foreign-key-instead-of-ef-crea/14489063#14489063)

# node.js - nodeJS 的每个包都会在 MeteorJS 上运行吗？

> ID：14591182
> 
> 赞同：3
> 
> 时间：2013-01-29T20:00:46.547
> 
> 标签：node.js, meteor

我正在试验 Meteor，并爱上了它。我的问题是：

我可以在我的 Meteor 上安装任何 nodeJS 包，例如 NodeMailer 并让它开箱即用吗？如果没有，通常的步骤是什么让它运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:45:34.717

简短的回答是否定的，Meteor 依赖于[Fibers](https://github.com/laverdet/node-fibers)，这破坏了与许多包的原生兼容性。目前，获取一个不使用 Fibers 在 Meteor 中工作的包是逐案完成的。[这是一个最近的例子](https://stackoverflow.com/questions/13857866/imagemagick-in-meteorjs-with-the-help-of-meteor-router-and-fibers)

您可以[按照这些说明](https://github.com/oortcloud/unofficial-meteor-faq#what-about-nodejs-modules)来确保您的包与您的流星应用程序一起部署。

以下是Meteor 的核心开发人员之一 David Greenspan[使用 Fibers 构建 Meteor 的理由，强调我的：](https://groups.google.com/d/msg/meteor-talk/nvo5vsMBlyE/4_vJ3gK9RyMJ)

> 实际上，[在使用或不使用 Fibers 之间] 没有固有或明显的性能权衡，因此我们选择公开更简单的 API（或两者兼而有之）。
> 
> Node 模型基本上是您的应用程序获得一个线程，即事件循环。如果您希望您的应用程序快速，请求处理程序最好尽快离开线程！它在 vanilla Node 中执行此操作的方式是完成并返回，如果有更多工作要做，则在某处传递回调之后。 **使用纤程，请求处理程序在执行 I/O 时可以改为“屈服”，因此它会脱离线程，但对程序员来说是不可见的。** 就好像同步调用内部发生了回调，但回调只是程序的延续。这是 streamline 试图模拟的，但它发生在 V8 级别。
> 
> 重要的一点是 Meteor 的“同步”调用**不会阻塞，它们会屈服于**事件循环。虽然通常事件循环会在需要调用的任何回调之间反弹，但它会在需要进一步执行的任何函数之间反弹。

# git - 如果我想让 Git 使用它，我的提交消息编辑器是否必须启动一个新实例？

> ID：14591184
> 
> 赞同：2
> 
> 时间：2013-01-29T20:00:50.630
> 
> 标签：git, git-commit

我使用自己的编辑器作为我的 Git `core.editor`，我经常打开并运行它。当我使用它来编辑提交消息时，例如之后

```
git commit # no message specified 
```

默认消息已正确打开到我的编辑器中`COMMIT_MSG`，但在我在编辑器中完成任何操作之前，提交继续中止。同样，自动合并打开`MERGE_MSG`，但在我有机会编辑它之前，合并以默认消息完成。

我可以使用*已经运行*的编辑器以这种方式编辑提交消息吗？消息编辑器的 Git 调用是否需要新实例才能响应我的编辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:07:33.410

`git`等待被调用的程序退出（以干净的退出状态）然后继续。在您的情况下，编辑器直接退出（并在现有窗口中显示内容），这不是`git`预期的。

要解决这个问题，您需要仅在完成 ​​git 提供的文件的编辑后退出编辑器（这很可能意味着关闭附加到已经存在的实例）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T20:12:20.363

这取决于您的编辑器。git 协议（以及大多数其他使用 EDITOR 变量的东西）使用的是打开指向临时文件的 $EDITOR，等待编辑器进程退出，然后使用临时文件的内容。

例如，对于 TextMate，将 EDITOR（或 git 的 core.editor）设置为 '/path/to/mate -w' 将告诉它等到文件关闭后再退出 mate helper 进程。你的编辑可能有类似的东西。

# django - 我应该在模板内的 URL 中使用 GET 参数吗？(django.contrib.auth)

> ID：14591193
> 
> 赞同：1
> 
> 时间：2013-01-29T20:01:17.743
> 
> 标签：django, django-templates, django-authentication

我对 Django 和所有与 Web 相关的东西的经验为零，但我想确保我从一开始就遵循最佳实践。

我正在使用[`django.contrib.auth`](https://docs.djangoproject.com/en/1.4/topics/auth/)并且`base.html`我有类似的东西：

```
{% if request.user.is_authenticated %}
<a href="{% url 'django.contrib.auth.views.logout' %}?next={{ request.path }}">Logout</a>     
{% else %}
<a href="{% url 'django.contrib.auth.views.login' %}?next={{ request.path }}">Login</a>
{% endif %} 
```

在我的`urls.py`：

```
from django.contrib.auth.views import login, logout
...
urlpatterns += patterns('',
        url(r'^login/$', login, {'template_name': 'omgame/login.html'}),
        url(r'^logout/$', logout, {'redirect_field_name': 'next'}),
) 
```

如您所见，我正在构建一个 URL 中带有 GET 参数的 URL，以实现登录/注销后的重定向。这就是我应该处理的方式吗？最初我试图使用`{% url %}`'s 语法来做到这一点，但没有运气。

*PS 对不起，如果它看起来没有建设性，甚至不是一个真正的问题。这确实是一种最佳实践，但我对此太陌生，无法依靠我自己的判断来判断该方法的缺点。从文档中我无法理解我应该如何使用这些视图。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:45:31.233

是的，这很好。GET 参数不是用于 URL 解析或反转的 URL 的一部分，因此这确实是唯一的方法。

# jquery - jQuery TOS 表单验证器（使提交按钮不可点击，除非 TOS 单选按钮被选中）

> ID：14591198
> 
> 赞同：0
> 
> 时间：2013-01-29T20:01:26.323
> 
> 标签：jquery, forms, validation

所以我有这个基本形式

```
<form id="order" action="contact.php" method="post">
    <p>Your name: <span><input type="text" name="name" id="fname"></span></p>
    <p>Your e-mail: <span><input type="text" name="email" id="femail"></span></p>
    <p><input type="checkbox" value="1" name="tos" id="ftos"></p>
    <p><input type="submit" value="Send" id="fsubmit"> | <span><input type="reset" value="Clear"></span></p>
</form> 
```

如果未选中 TOS 复选框，我想要的只是使提交按钮有点褪色且不可点击。

如果复选框被选中，则按钮将退色并变为可点击。

我对 jquery 不是很擅长，但我相信它可以在 jquery 上完成。

我希望有人能帮助我。

问候，肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:11:51.673

在这里...[小提琴示例](http://jsfiddle.net/atGyy/3/)

HTML：

```
<form id="order" action="contact.php" method="post">
    <p>Your name: <span><input type="text" name="name" id="fname"></span></p>
    <p>Your e-mail: <span><input type="text" name="email" id="femail"></span></p>
    <p><input type="checkbox" value="1" name="tos" id="ftos"></p>
    <p><input type="submit" value="Send" id="fsubmit"> | <span><input type="reset" value="Clear"></span></p>
</form> 
```

JS：

```
function checkTOS() {      
    var checkbox = $("#ftos").is(':checked');

    if (checkbox === true) {
       $("#fsubmit").prop("disabled",false);
    } else {
       $("#fsubmit").prop("disabled",true);
    }

}

jQuery(document).ready(function(){   
     checkTOS();
    $('#ftos').click( function() {
        checkTOS();
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:18:44.107

[w3schools.com](http://www.w3schools.com)是让您开始使用 HTML 和 JavaScript 的好地方。

`disabled`要回答您的问题，您应该通过向元素添加属性来使提交按钮不可点击并且看起来不同：

```
<input type="submit" value="Send" id="fsubmit" disabled="disabled" /> 
```

之后，在选中复选框后使按钮可点击：

```
<script type="text/javascript">
    jQuery(function ($) {

        $('#ftos').change(function () {

            if ($(this).is(':checked'))
                $('#fsubmit').removeAttr('disabled');
            else
                $('#fsubmit').attr('disabled', 'disabled');
        });
    });
</script> 
```

检查[这个小提琴](http://jsfiddle.net/t5dTr/1/)！干杯!

# c# - 如何在 WCF 服务 wsdl 链接中用域名替换机器名

> ID：14591201
> 
> 赞同：3
> 
> 时间：2013-01-29T20:01:31.553
> 
> 标签：c#, .net, wcf, iis-6

不太确定该问题的名称，但问题如下：

我正在 IIS 6 上部署 WCF 服务，该服务将由外部源使用。它所在的盒子是外部托管的，但有一个 DC，因此有效地在我的网络（' **mydomain** '）上，内部它被称为' **prod** '说。该服务需要通过 SSL 运行，因此我们获得了该服务将响应的域的 SSL 证书：service.oursite.com 可以说

DNS 已全部过滤，我确实可以在 [https://service.oursite.com/service.svc](https://service.oursite.com/service.svc)上点击该服务 ，它会退出小 svcutil 链接。问题是链接指向的地址不是 我希望的[https://service.oursite.com/service.svc?wsdl](https://service.oursite.com/service.svc?wsdl)

相反

[https://prod.mydomain.com/service.svc?wsdl](https://prod.mydomain.com/service.svc?wsdl) 所以当然 SSL 保释，因为证书不是为了那个，如果我点击进入 wsdl，所有 schemaLocation 链接都是错误的，再次指向内部而不是外部名称

**问题是：** 为什么要这样做？我该如何阻止它这样做？

是在配置中添加一些东西的问题吗？（请说是 :)）

非常感激地收到任何帮助

如果有帮助，这里是配置

```
<services>
  <service name="CBBookingService.CBBookingService" behaviorConfiguration="CBBookingService.CBBookingServiceBehavior">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="TransportSecurity" contract="CBBookingService.ICBBookingService" />
    <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
  </service>
</services>
<bindings>
  <basicHttpBinding>
    <binding name="BasicSecurity" maxReceivedMessageSize="2147483647">
      <security mode="None" />
    </binding>
    <binding name="TransportSecurity" maxReceivedMessageSize="2147483647">
      <!--https-->
      <security mode="Transport">
        <transport clientCredentialType="None" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="CBBookingService.CBBookingServiceBehavior">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false"/>
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T21:36:53.477

You can use the `<useRequestHeadersForMetadataAddress>` service behavior, and you should get the behavior you want:

```
<behaviors>
  <serviceBehaviors>
    <behavior name="CBBookingService.CBBookingServiceBehavior">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false"/>
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
      <useRequestHeadersForMetadataAddress />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T21:48:14.313

您可以在配置中更改它。

```
<serviceMetadata httpGetEnabled="true"  
 externalMetadataLocation="https://service.oursite.com/service.svc?wsdl"/> 
```

或将[https://stackoverflow.com/a/14592767/2012977](https://stackoverflow.com/a/14592767/2012977)用于 asp.net v4 或更高版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:37:05.653

感谢您的回答不幸的是我正在使用.net 3.5所以下面的答案不起作用我最终这样做了

```
 <system.serviceModel>
    <services>
      <service name="CBBookingService.CBBookingService" behaviorConfiguration="CBBookingService.CBBookingServiceBehavior">
        <endpoint address="https://service.oursite.com/CBBookingService.svc" binding="basicHttpBinding" bindingConfiguration="TransportSecurity" contract="CBBookingService.ICBBookingService" name="SSL" />
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicSecurity" maxReceivedMessageSize="2147483647">
          <security mode="None" />
        </binding>
        <binding name="TransportSecurity" maxReceivedMessageSize="2147483647">
          <!--https-->
          <security mode="Transport">
            <transport clientCredentialType="None" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="CBBookingService.CBBookingServiceBehavior">
          <serviceMetadata httpsGetEnabled="true" httpsGetUrl="https://service.oursite.com/CBBookingService.svc/SSL" /> 
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true">
    </serviceHostingEnvironment>
  </system.serviceModel> 
```

# python - 如何在 Flask 中制作 RadioField？

> ID：14591202
> 
> 赞同：14
> 
> 时间：2013-01-29T20:01:33.780
> 
> 标签：python, python-2.7, flask, flask-wtforms

我有一个带有 TextField、FileField 的表单，我想添加一个 RadioField。

我想要一个带有两个选项的单选字段，用户只能选择一个。我正在遵循前两种有效形式的示例。

我的 forms.py 看起来像这样

```
 from flask import Flask, request
    from werkzeug import secure_filename
    from flask.ext.wtf import Form, TextField, BooleanField, FileField, file_required,         RadioField
    from flask.ext.wtf import Required
    class ImageForm(Form):
        name = TextField('name', validators = [Required()])
        fileName = FileField('fileName', validators=[file_required()])
        certification = RadioField('certification', choices = ['option1', 'option2']) 
```

在我的 views.py 文件中，我有

```
form = myForm()
if form.validate_on_submit():
    name = form.name.data
    fileName = secure_filename(form.fileName.file.filename)
    certification = form.certification.data 
```

在我的 .html 文件中

```
 {% block content %}
     <h1>Simple Form</h1>
     <form action="" method="post" name="simple" enctype="multipart/form-data">
         {{form.hidden_tag()}}
         <p>
             Name:
             {{form.name(size=80)}}
         </p>
         <p>
             Upload a file
             {{form.fileName()}}
         </p>
         <p>
             Certification:
             {{form.certification()}}
         </p>
         <p><input type="submit" value="Submit"></p>
     </form>
     {% endblock %} 
```

我似乎无法在网上找到使用单选按钮表单的人的示例。我在这里找到了 RadioField 的描述[http://wtforms.simplecodes.com/docs/0.6/fields.html](http://wtforms.simplecodes.com/docs/0.6/fields.html)

当我尝试访问我的表单页面时，我收到 DEBUG 错误“ **ValueError: too many values to unpack** ”

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-29T20:31:14.800

在 forms.py 中 RadioField 需要看起来像这样

```
 RadioField('Label', choices=[('value','description'),('value_two','whatever')]) 
```

Where the options are 'description' and 'whatever' with the submitted values being 'value' an 'value_two' respectively.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-29T20:11:29.880

form.certification() 不起作用。您需要遍历模板中的值：

代替：

```
{{ form.certification() }} 
```

和：

```
{% for subfield in form.certification %}
<tr>
    <td>{{ subfield }}</td>
    <td>{{ subfield.label }}</td>
</tr>
{% endfor %} 
```

# c++ - 为什么从流中提取字符串会设置 eof 位？

> ID：14591203
> 
> 赞同：10
> 
> 时间：2013-01-29T20:01:37.967
> 
> 标签：c++, string, iostream, language-lawyer

假设我们有一个流，其中只包含：

```
hello 
```

请注意，`\n`最后没有像文本文件中那样的额外内容。现在，以下简单代码显示`eof`在提取单个`std::string`.

```
int main(int argc, const char* argv[])
{
  std::stringstream ss("hello");
  std::string result;
  ss >> result;
  std::cout << ss.eof() << std::endl; // Outputs 1
  return 0;
} 
```

但是，我不明白为什么根据标准会发生这种情况（我正在阅读 C++11 - *ISO/IEC 14882:2011(E)*）。`operator>>(basic_stream<...>&, basic_string<...>&)`被定义为表现得像一个*格式化的输入函数*。这意味着它构造了一个`sentry`对象，该对象继续吃掉空白字符。在这个例子中，没有，所以`sentry`构造完成没有问题。当转换为 a`bool`时，`sentry`对象给出`true`，因此提取器继续进行字符串的实际提取。

然后将提取定义为：

> 提取并附加字符，直到发生以下任何情况：
> 
> *   `n`存储字符；
> *   文件结束出现在输入序列上；
> *   `isspace(c,is.getloc())`对于下一个可用的输入字符*c*为真。
> 
> 提取最后一个字符（如果有）后，调用 is.width(0) 并销毁哨兵对象 k。如果函数没有提取字符，它会调用`is.setstate(ios::failbit)`，这可能会抛出`ios_base::failure`(27.5.5.4)。

这里实际上没有任何东西会导致该`eof`位被设置。是的，如果到达文件末尾，提取将停止，但它不会设置该位。实际上，`eof`只有在执行 another 时才应设置该位`ss >> result;`，因为当`sentry`尝试吞噬空白时，会发生以下情况：

> 如果`is.rdbuf()->sbumpc()`或`is.rdbuf()->sgetc()`返回`traits::eof()`，函数调用`setstate(failbit | eofbit)`

但是，这肯定还没有发生，因为尚未`failbit`设置。

设置该位的结果是，在读取文件时邪恶习语不起作用`eof`的唯一原因是因为最后的额外内容，而*不是*因为该位尚未设置。当提取在文件末尾停止时，我的编译器很乐意设置该位。`while (!stream.eof())``\n`*`eof``eof`*

 *那么这应该发生吗？还是标准的意思是说`setstate(eofbit)`应该发生？

* * *

为了使它更容易，标准的相关部分是：

*   21.4.8.9 插入器和提取器 [string.io]
*   27.7.2.2 格式化输入函数 [istream.formatted]
*   27.7.2.1.3 类`basic_istream::sentry`[istream::sentry]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T20:11:45.637

`std::stringstream`是 a`basic_istream`和`operator>>`of`std::string`从中“提取”字符（如您所见）。

27.7.2.1 类模板`basic_istream`

> 2 如果 rdbuf()->sbumpc() 或 rdbuf()->sgetc() 返回 traits::eof()，则输入函数，除非另有明确说明，否则将完成其操作并执行 setstate(eofbit)，这可能在返回之前抛出 ios_- base::failure (27.5.5.4)。

此外，“提取”意味着调用这两个函数。

> 3 两组成员函数签名具有共同的属性：格式化输入函数（或提取器）和未格式化输入函数。两组输入函数都被描述为通过调用 rdbuf()->sbumpc() 或 rdbuf()->sgetc() 获取（或提取）输入字符。他们可能会使用 istream 的其他公共成员。

所以必须设置eof。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T20:08:51.090

直观地说，设置 EOF 位是因为在提取字符串的读取操作期间，流确实到达了文件末尾。具体来说，它不断地从输入流中读取字符，因为它在遇到空白字符之前到达流的末尾而停止。因此，流设置 EOF 位以标记已到达流的末尾。请注意，这与报告失败不同——操作已成功完成——但EOF位的重点是不报告失败*。*这是为了标记遇到流的结尾。

我没有规范的特定部分来支持这一点，尽管当我有机会时我会尝试寻找一个。*

# c# - MVVM 正确使用模式

> ID：14591208
> 
> 赞同：2
> 
> 时间：2013-01-29T20:02:02.720
> 
> 标签：c#, mvvm

我只是想知道我是否做得对。我有一个主视图（MainView）和它的视图模型（MainWindowViewModel）。在 MainView 中有一个按钮可以调用另一个视图（SubView）。SubView 也有一个 ViewModel (SubViewModel)。通过它的视图模型关闭子视图后，我想从主视图模型访问子视图模型中的属性。从 mainviewmodel 调用子视图并访问属性的代码如下所示：

```
private void SubViewExecute(object parameter)
{
    SubView sub = new SubView();
    bool? result = sub .ShowDialog();
    if (!result.HasValue || !result.Value) return;
    if (sub.DataContext is SubViewModel)
    {
        SubViewModel subViewModel = (sub.DataContext as SubViewModel);
        string property = subViewModel.Property;
    }
} 
```

我在做正确的 mvvm-pattern，还是有更好的方法来实现我想要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:06:21.307

这里并不完全清楚你想要什么 - 但这绝对违反了纯粹意义上的 MVVM。

在本例中，您`MainViewModel`需要直接了解 View 层 ( `SubView`)，这通常会尽可能避免。

但是，避免这种情况的最佳方法在很大程度上取决于您是否使用框架（许多框架具有用于将 View 与 ViewModel 匹配以及显示对话框等的工具）、哪个框架以及您是否在使用 View-首先或 ViewModel-first。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T20:41:41.933

对于您的核心问题：“我的 mvvm 模式是正确的，还是有更好的方法来实现我想要的？”

不，您没有正确遵守 MVVM 的核心原则，并且有更好的方法来实现您想要的（如果我正确理解您想要的）。

首先，MVVM 源于需要使所有层都可测试，而不需要“上面”层的知识。例如，您的应用程序应该能够在技术上仅通过模型完成它应该做的所有事情；它应该能够根据需要检索、更新和创建数据——即使这些数据还没有以用户直观的方式呈现。

其次，您的应用程序应该能够在技术上完成用户希望通过 View-Model 执行的所有操作，但无需任何类型的 UI。因此，您应该能够“查看”您的数据并执行各种程序功能，例如保存。

然后，当您将视图置于顶部时，您所需要的只是数据绑定和事件处理，一切顺利！（大多）...

主要是 View 有责任从 ViewModel 正确管理自己的 DataContext；将数据上下文推送到特定视图不是 ViewModel 的工作。另一种看待它的方式是，View 访问 ViewModel 中的方法和属性来执行用户在用户界面中请求的工作。

因此，我将首先翻转您的代码，以便 View 控制哪些视图在任何给定时间处于活动状态，并且每个视图都知道它自己的数据上下文以及使用它们的方法。

（现在，在 SO 社区对我说没有关于 VM 优先方法的任何内容之前 - 就是这样。你可以尝试 VM 优先方法，但一开始更难理解，你会想要使用一个可以帮助你的框架，比如 Caliburn.Micro 或 MVVMLite 什么的）

因此，对于 View First，您要做的是让 MainView 知道如何使用 SubView 填充自身。MainView 的工作是确保它的数据上下文是正确的 MainViewModel，因为每个 SubView 都是在 MainView 中创建的，所以 MainView 将确保每个 SubView 都具有正确的 SubViewModel 实例集作为它的数据上下文。

这在逻辑上*应该*很容易实现，因为您的 MainViewModel 内部已经包含一组 SubViewModel（各种）。

希望这可以帮助您前进，如果您有更具体的代码问题（带有示例代码），我们可以为您提供进一步的帮助。

# objective-c - Objective-C：奇怪的三元行为

> ID：14591209
> 
> 赞同：0
> 
> 时间：2013-01-29T20:02:07.853
> 
> 标签：objective-c, ternary-operator

我有一个简单的函数，它返回`NSNumber`s 的原始总和，但如果它们是 -1，则不计算它们：

```
- (NSInteger)total {
    return [[self obj1] integerValue] == -1 ? 0 : [[self obj1] integerValue] + 
           [[self obj2] integerValue] == -1 ? 0 : [[self obj2] integerValue] +
           [[self obj3] integerValue] == -1 ? 0 : [[self obj3] integerValue];
} 
```

在这种情况下`total`将始终返回 0。

但如果我这样写：

```
- (NSInteger)total {
    NSInteger ret = 0;
    ret += [[self obj1] integerValue] == -1 ? 0 : [[self obj1] integerValue];
    ret += [[self obj2] integerValue] == -1 ? 0 : [[self obj2] integerValue];
    ret += [[self obj3] integerValue] == -1 ? 0 : [[self obj3] integerValue];
    return ret;
} 
```

`total`将返回正确的值。

我不喜欢以一种方式写它而不是另一种方式，但我看不出第一种方式有什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:06:33.473

Operator precedence. The ternary operator has the third lowest precedence in C, so the addition is evaluated before it could get to the conditional part. Use parentheses:

```
return ([[self obj1] integerValue] == -1 ? 0 : [[self obj1] integerValue]) + 
       ([[self obj2] integerValue] == -1 ? 0 : [[self obj2] integerValue]) +
       ([[self obj3] integerValue] == -1 ? 0 : [[self obj3] integerValue]); 
```

# actionscript-3 - AS 3：未找到现有功能？

> ID：14591212
> 
> 赞同：0
> 
> 时间：2013-01-29T20:02:30.223
> 
> 标签：actionscript-3, flash

我的程序编译中有一个奇怪的错误...

对于我的程序场景，它只是一个使用键盘箭头移动的电影剪辑名称“perso”。

Flash 说我找不到“clavierUp”和“动画”属性访问。

我真的不明白...

```
var perso:Perso = new Perso();

stage.addEventListener(KeyboardEvent.KEY_DOWN, clavierDown);
stage.addEventListener(KeyboardEvent.KEY_UP, clavierUp);
stage.addEventListener(Event.ENTER_FRAME, animation);

function clavierDown(e)
{
    switch(e.keyCode)
    {   
        case Keyboard.LEFT:
            perso.speedX = -speedHero;
            break;
        case Keyboard.RIGHT:
            perso.speedX = speedHero;
            break;
        case Keyboard.UP:
            perso.speedY = -speedHero;
            break;
        case Keyboard.DOWN:
            perso.speedY = speedHero;
            break;
    }

function clavierUp(e)
{
    switch(e.keyCode)
    {
        case Keyboard.LEFT:
            perso.speedX = 0;
            perso.scaleX = -1;
            break;  

        case Keyboard.RIGHT:
            perso.speedX = 0;
            perso.scaleX = 1;
            break;

        case Keyboard.UP:
            perso.speedY = 0;
            break;

            case Keyboard.DOWN:
            perso.speedY = 0;
            break;
    }
}

function animation(e)
{
    animeHero();
} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:05:29.453

Sorry, i just missed a rightbrace at the end of "clavierDown" function...

# ruby - wkhtmltopdf 和 pdfkit，“分段错误（核心转储）”，虽然工作

> ID：14591214
> 
> 赞同：2
> 
> 时间：2013-01-29T20:02:38.420
> 
> 标签：ruby, segmentation-fault, wkhtmltopdf, pdfkit

我正在使用 PDFKit 将网页转换为 pdf 文件并将其保存在我的计算机中。它工作得很好，但它也会在终端中打印一条消息，虽然它可以工作：

```
"Segmentation fault (core dumped)" 
```

我正在使用的代码是：

```
kit = PDFKit.new("link_to_the_website", :page_size => 'A5')
file = kit.to_file("myfile.pdf") 
```

第二行是导致错误的行。

我知道 PdfKit 使用 wkhtmltopdf，并且我读到 wkhtmltopdf 在不处于 sudo 模式时会出现问题，但是我无法在 sudo 模式下运行我的 ruby​​ 代码，我不知道该怎么做才能修复它。有人可以帮我吗？

宝石链接：

[https://github.com/antialize/wkhtmltopdf](https://github.com/antialize/wkhtmltopdf) [https://github.com/pdfkit/pdfkit](https://github.com/pdfkit/pdfkit)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-30T17:44:46.610

在安装了 pdfkit 和 wkhtmltopdf 之后，我解决了这个问题：

[http://blog.joshsoftware.com/2012/07/25/converting-html-to-pdf/](http://blog.joshsoftware.com/2012/07/25/converting-html-to-pdf/)

# linux - 在复合命令中查找 + ls -lT

> ID：14591219
> 
> 赞同：0
> 
> 时间：2013-01-29T20:02:59.677
> 
> 标签：linux, bash, shell, unix, find

要获取文件的完整时间戳，我可以这样做：

```
$ ls -lT 
```

但是，当我尝试以下操作时：

```
find . -ls -lT 
```

我得到一个`find: -lt: unknown primary or operator`（使用`find . -ls`作品）。

`find`使用+`ls -lT`命令的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:10:41.800

find "-ls" 选项没有运行 ls 并且不接受它的所有参数。也就是说，我不知道你为什么想要 -T 参数，这是一个涉及制表位的晦涩难懂的东西，我必须查找它。但从广义上讲，您只想对 find 找到的一堆文件运行一个命令（在本例中为“ls -lT”）。因此，以下任何一项都应该起作用：`find . -type f | xargs -n1 ls -lT`or`find . -type f -exec ls -lT {} ';'`或`for i in $(find . -type f); do ls -lT $i; done`.

或者，对于需要多个命令行参数的 ls 的特殊情况，只需`find . -type f | xargs ls -lT`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T21:43:06.100

如果您正在解析 的输出`ls`，那么您做错了。与文件系统交互总是有比解析人类可读的输出更好的方法。

我不确定您所说的“文件的完整时间戳”是什么意思，但是如果您想要最后一次修改时间，请使用`stat`.

```
stat --printf='%x' foo 
2013-01-29 13:33:32.000000000 -0600 
```

运行`man stat`以查看`--printf`参数中的所有其他格式选项。

# text - Joomla 3.0 - 我无法让我的编辑器正确保存图像而不过滤 html？

> ID：14591220
> 
> 赞同：0
> 
> 时间：2013-01-29T20:03:03.373
> 
> 标签：text, joomla, filter, image, joomla3.0

我正在制作一篇普通文章，我想在编辑器中为文章添加图片。当我添加它时，它工作正常，但是当我保存文章时，html 总是被过滤。我在论坛上进行了自己的研究，并尝试将超级用户、管理员等更改为不对全局配置中的文本过滤选项进行过滤。我还安装了 JCE 编辑器并将其用作我的默认编辑器，它仍然过滤 img html 标记。这就是它放在 img 标签中的内容

`<img src="\&quot;images/random/my_image.jpg\&quot;">`

如果有人遇到此问题并找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T03:17:58.440

我在 joomla 3.0.1 上遇到了同样的问题，但找不到解决方案，所以我只是重新安装了 joomla，现在一切似乎都运行良好。

我尝试了不同的方法来摆脱它但无济于事当我重新安装joomla时我解决了这个问题我看到魔术引号在安装窗口中设置为“否”所以首先你应该尝试关闭魔术引号“是“如果不是检查您是否可以安装另一个 joomla 来测试您是否可以安装它，而不是使用相同的数据库再次重新安装原始 joomla。确保导出旧数据库

如果对你有帮助，打个招呼：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T13:59:45.530

魔术引号已关闭设置为“否”或通过 php.ini 或服务器对其进行更改，否则会导致此问题。

魔术引号是 PHP 脚本语言的一个有争议的功能，其中特殊字符在传递之前以反斜杠为前缀。引入它是为了帮助新手编写有效的 SQL 命令，而无需手动转义。...因此不保存图像

# linq - 无法将类型“System.Linq.IQueryable”隐式转换为“System.Linq.IQueryable”

> ID：14591225
> 
> 赞同：1
> 
> 时间：2013-01-29T20:03:29.120
> 
> 标签：linq, wcf, entity-framework, error-handling, implicit-conversion

我正在一个项目中尝试使用实体框架向 WCF 服务提供数据。代码如下：

```
public IQueryable<vwTP90Web> GetTP90()
    {
            TP90Entities context = new TP90Entities();
            var tp90web = (from p
                          in context.vw_TP90Web
                          select p).Cast<IQueryable<vwTP90Web>>();
            return tp90web;

    } 
```

它工作正常，直到我尝试返回数据然后我收到消息：

```
Cannot implicitly convert type        
'System.Linq.IQueryable<System.Linq.IQueryable<TP90Service.vwTP90Web>>' to 
'System.Linq.IQueryable<TP90Service.vwTP90Web>'. An explicit conversion exists (are   
 you missing a cast?) 
```

我已经追了好几天了，我就是无法理解它在寻找什么。当我返回一个项目时，我的服务正在运行，但对于该项目，我需要返回一个列表。有人可以向我解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:09:41.813

看起来这应该可以正常工作*

```
public IEnumerable<vwTP90Web> GetTP90()
{
    var context = new TP90Entities();
    return (from p
           in context.vw_TP90Web
           select Convert(p)).ToArray();
}

private TP90Service.vwTP90Web Convert(P90MVC.DomainEntity.Models.vw_TP90Web source)
{
    vwTP90Web result = null;
    // I don't know how to convert vw_TP90Web types to vwTP90Web types
    // Nobody here can do this for you
    // So you will have to fill in the code here.
    return result;
} 
```

您必须了解这里发生的一些事情。

首先，该`Cast<T>()`方法*将可枚举中的每个元素转换为 T*，它不会*将*可枚举实例转换为不同的类型。

其次，Linq 方法不会立即执行，它们会在您触发可枚举时执行。这意味着，当您开始枚举此方法的结果时，`TP90Entities`已经超出范围并且该方法将失败。并且在您枚举之前，该方法中的任何其他错误都不会出现。所以我打电话`ToArray()`是为了强制执行查询。

^(* 假设您知道如何转换`vw_TP90Web`为`vwTP90Web`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:07:57.280

你不需要`IQueryable<T>`在你的演员表中加入：

```
 var tp90web = (from p
                      in context.vw_TP90Web
                      select p).Cast<vwTP90Web>(); 
```

`vwTP90Web`请注意，如果查询没有返回实例，这仍然会在运行时失败。

# python - 收到的 Python 套接字和测量字节

> ID：14591226
> 
> 赞同：3
> 
> 时间：2013-01-29T20:03:31.757
> 
> 标签：python, sockets, networking

全部，

我有一个简单的 Python 脚本，它向服务发送 4 个字节的数据并设置 1024 recv 缓冲区。我试图弄清楚如何测量从服务返回的字节数以放入一些逻辑。因此，如果响应大于 10 个字节，则执行 X，否则执行 Y。我只是不知道如何以字节为单位测量响应。指针将不胜感激。

```
import socket

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
address = ("10.0.0.1", 5000)
s.connect(address)
s.send('1234')
data = socket.recv(1024)
s.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:27:59.517

`size = len(data)`

data 是表示为字符串的字节块 - 因此获取字符串的长度将为您提供所需的内容。

但是您会遇到的问题是您使用的是流式 TCP - 不能保证您会（仅）在 recv() 上获得一个完整的完整消息。一个简单的解决方法是在你的协议中添加一个大小参数，并添加逻辑来重新组装和反序列化消息。

# java - Java多线程客户端服务器

> ID：14591227
> 
> 赞同：-1
> 
> 时间：2013-01-29T20:03:34.980
> 
> 标签：java, sockets, stream, serversocket

我遇到了一些问题，试图用java制作一个客户端/服务器系统，下一个代码属于客户端......

```
public class ClientTCP {

    final static int PORT = 65001;

    Socket _socket;

    private void fireUp(){

        String message = "";

        BufferedReader bfi = null;
        BufferedReader bfr = null;
        PrintWriter writer = null; 

        try{

            InetAddress address = InetAddress.getByName("localhost");

            _socket = new Socket(address,PUERTO);

            bfr = new BufferedReader(
                            new InputStreamReader(System.in));

            bfi = new BufferedReader(
                            new InputStreamReader(_socket.getInputStream()));

            System.out.println("Enter some data");

            String inputstr = bfr.readLine();

            writer = new PrintWriter(_socket.getOutputStream(),true);

            writer.println(inputstr);

            if((message = bfi.readLine()) != null){

                Logger.getLogger(ClientTCP.class.getName()).log(Level.INFO,message);
            }
        }catch(IOException ioex){

            ioex.printStackTrace();
        }finally{

            if(_socket != null){

                try {

                    _socket.close();
                } catch (IOException e) {

                    e.printStackTrace();
                }
            }
        }
    } 
```

...而这个属于服务器，并且为每个客户端创建的线程：

```
public class ServerrTCP {

    static int SEC = 0;

    final static int PORT = 65001;

    Socket _socket;
    ServerSocket _ssocket;

    private void fireUp(){

        try{

            _socket = new Socket();
            _ssocket = new ServerSocket(PORT);

            while(true){

                _socket = _ssocket.accept();

                new ClientThreads(_socket,SEC++);
            }

        }catch(IOException ioex){

            Logger.getLogger(ServerTCP.class.getName()).log(Level.SEVERE,null,ioex);
        } 
```

线程创建类...

```
public class ClientThreads extends Thread{

    int _id;
    Socket _socket;

    public ClientThreads(Socket socket, int id){

        super();

        _socket = socket;
        _id = id;

        this.start();
    }

    @Override
    public void run(){

        String strinput;

        BufferedReader bfr = null;
        PrintWriter writer = null;

        try{

            bfr = new BufferedReader(
                    new InputStreamReader(_socket.getInputStream()));

            writer = new PrintWriter(
                    _socket.getOutputStream(),true);

            while((strinput = bfr.readLine()) != null){

                System.out.println("The user "+ _id +" wrote "+ strinput);
            }

            writer.println("Thanks, user " + _id);
        }catch(IOException ioex){

            ioex.printStackTrace();
        }
    }
} 
```

抱歉代码量很大，但由于这个问题我要疯了，我认为我出错的地方是粗体字，我认为它会在阻塞 I/O 时产生某种问题，但我不知道为什么，以及如何解决它，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:07:01.117

客户端正在等待服务器发送一些文本行。您的服务器不发送任何内容，因此它会永远等待。

我建议您让服务器向客户端发送一些内容以供其读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:59:43.023

问题出在 ClientThreads 的这一行中：

```
while((strinput = bfr.readLine()) != null){

          System.out.println("The user "+ _id +" wrote "+ strinput);
} 
```

我只需要在循环的末尾添加一个中断，否则，总是会要求一些代码，换句话说，它永远不会结束阻塞 I/O

# bash - 向脚本发送 2 个参数

> ID：14591229
> 
> 赞同：0
> 
> 时间：2013-01-29T20:03:49.233
> 
> 标签：bash, variables, send

我刚开始使用 bash，所以我希望答案并不明显。我有一个名为 playlists.txt 的文件，如下所示：

*   冷冻Dubstep PLYNrAD9Jn2WDwRrS_Uw6UR55K-c_s6EH4
*   经典 PLYNrAD9Jn2WDWZFpIG3a2tkOBtdeNAbc6
*   ChilledOut PLYNrAD9Jn2WCfrUCoS22kn3pBX1XUFinE
*   SlickSlickSound PLYNrAD9Jn2WDmpu3gNVxIVO8bAiOcQkx7
*   专辑、音乐会 PLYNrAD9Jn2WD3BI8o5VjmSbhZgfYh5zaX

我想将每行的第一个字符串分配给 $name，将第二个字符串分配给 $hash，然后将其发送到 script.sh 并为每一行递归地执行此操作，因为知道将来行数可能会增加。

我写了这个但它不起作用：使用这个 ->[如何在 bash shell 中将一个字符串拆分为多个变量？](https://stackoverflow.com/questions/10520623/how-to-split-one-string-into-multiple-variables-in-bash-shell)

```
while read name hash
do

        sh script.sh "$name" "$hash"

done < playlists.txt 
```

我应该怎么做？先感谢您。

编辑：谢谢大家，所以我把它改成了这个，它更容易阅读。我以为，它会解决我的错误，但仍然存在......该死的。所以基本上，在 script.sh 中，这是第一部分：

```
cd ~/Music/Youtube\ Playlist/Playlists/$name

mv $HOME/Music/Youtube\ Playlist/Playlists/$name/TextRecords/lastoutput.txt $HOME/Music/Youtube\ Playlist/Playlists/lastoutput.txt 
```

但是，shell 返回错误：

```
mv: cannot stat `/home/kabaka/Music/Youtube Playlist/Playlists//TextRecords/lastoutput.txt': No such file or directory 
```

这意味着应该有播放列表名称的地方，什么都没有。你知道为什么吗？是不是因为我当前脚本中的 $name 和上面脚本中的 $name 不一样？请注意，对于 $hash，我也发生了同样的事情，它应该出现在 url 中，但只是空白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:20:30.800

1.  您可以使用管道将 echo 命令的输出用作输入文件，
2.  标志 '-d' 定义了 'cut' 命令的分隔符。

这是代码：

```
while read line
do
    name=`echo $line|cut -f1 -d' '`
    hash=`echo $line|cut -f2 -d' '`
    sh script.sh $name $hash

done < playlists.txt 
```

对于您的第二个问题：在将文件移动到目录之前，请确保它存在。您可以使用 'mkdir -p' 创建它，如下所示：

```
mkdir -p $HOME/Music/Youtube\ Playlist/Playlists/lastoutput.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:07:25.963

它接近工作，只是说`read name hash`而不是`read line`

```
while read name hash; do
    sh script.sh "$name" "$hash"
done < playlists.txt 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T20:08:32.770

你快到了，有几种方法可以做到这一点，但一个典型的解决方案是

```
while read name hash
do
     sh script.sh $name $hash 
done < playlists.txt 
```

IHTH

# ios - Facebook 应用无法为原生 iOS 身份验证设置捆绑 ID

> ID：14591236
> 
> 赞同：3
> 
> 时间：2013-01-29T20:04:06.077
> 
> 标签：ios, facebook, facebook-ios-sdk

我正在尝试使用 Facebook SDK 3.0 在本机 iOS 应用程序中设置 facebook 身份验证。这是我自己设置的第一个 Facebook 应用程序。

我在 facebook 上创建了我的应用程序，我试图在 facebook 上应用程序基本设置的“本机 iOS 应用程序”部分中设置捆绑 ID。我输入了我的包 ID，格式为“com.mydomain.myappname”，但无论我输入什么，当我保存更改时，包 ID 都不会存储。

在我可以设置捆绑 ID 之前，我是否缺少一个步骤？

该应用还没有在应用商店中，所以我没有设置App Store ID（我的理解是这些不是必需的？）。我在我的 iOS 应用程序的 plist 中设置了我的应用程序 ID

```
{FacebookAppID => "XXXXXXXXXXXXXXX"} 
```

以及 url 方案

```
{CFBundleURLSchemes => ["fbXXXXXXXXXXXXXXX"]} 
```

当我尝试登录时，我收到以下错误，它非常清楚地表明捆绑 ID 未设置或与我的 iOS 应用捆绑 ID 不匹配：

> FBConditionalLog：系统授权失败：“Facebook 服务器无法完成此访问请求：remote_app_id 与存储的 id 不匹配”。这可能是由于 bundle 标识符与您在 developers.facebook.com/apps 上的服务器上的应用程序配置不匹配造成的。

# javascript - 不使用 jquery 或 ajax 自动保存表单

> ID：14591238
> 
> 赞同：-1
> 
> 时间：2013-01-29T20:04:33.387
> 
> 标签：javascript, forms

我希望在已经建立的系统上具有“自动保存”功能，但我无法对其进行很多/剧烈的更改。每次对其中一个输入进行更改时，表单都应该自动保存（也就是提交自身）。我现在拥有它的方式是绑定到每个输入的 onblur 事件，该事件将表单提交到 processing.php，它处理并重定向回带有更新信息的表单。

这很好，效果很好，但会丢失选项卡位置并导致重新加载时出现“闪烁”。有没有一种方法可以在不需要 ajax 或 jquery 的情况下自动保存此表单？将变量保存到 cookie 并在人员离开页面时提交表单？还是别的什么方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:21:13.930

我建议`onunload`，它会做你想做的事，如果用户离开页面，它会提供调用 JS 函数的机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-12T22:57:59.323

如果您不介意使用 AJAX 进行自动保存，这里有一个不使用 jQuery 的版本：

```
setInterval(function() {
    var form = document.getElementById('my-form-id');
    var request = new XMLHttpRequest();
    request.open(form.method, form.action);
    request.send(new FormData(form));
}, 10000); 
```

如果您想发送表单`x-www-form-urlencoded`而不是`multipart/form-data`，请在此处查看我的答案：[定期自动保存表单](https://stackoverflow.com/questions/5804528/periodically-autosave-form/51813482#51813482)。

# html - 为什么我的填充更改不会影响 IE 中元素的宽度？

> ID：14591239
> 
> 赞同：0
> 
> 时间：2013-01-29T20:04:35.183
> 
> 标签：html, css

Firefox 和 Chrome 处理填充的方式与 IE 不同。

对于 Firefox 和 Chrome，当我使用填充时，它会添加到 div 的总宽度中。对于 IE，填充值被忽略，因此 CSS 无法统一工作。这似乎是一个新的发展，因为他们一直工作相同。例如

```
#header
{
   width:280;
   padding-left:10px;
   padding-right:10px;
} 
```

这在 Firefox 和 Chrome 中总共提供了 300 像素，但在 IE 中宽度没有改变。

我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:10:26.750

您在这里处理的是[IE 中的一个已知问题](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)。

简而言之，当您的 HTML 出现问题时，IE 会进入 Quirks 模式，试图找出解决这些问题的方法。当它这样做时，它对[CSS 盒子模型](http://www.w3.org/TR/CSS2/box.html)（决定如何处理宽度、填充、边框和边距的东西）的解释脱离了 W3C 标准。

因此，很有可能您的 HTML 存在问题，您的第一个呼叫端口应该是[W3C 标记验证服务](http://validator.w3.org/)。使用它来验证您的 HTML。一旦您的 HTML 验证通过，请使用您的 CSS 重试。如果它仍然坏了，回到这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:08:12.397

添加 doctype 并修改我的 html 标签帮助我解决了这个问题。这是下面的新变化。

```
DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" 

html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" 
```

当然，我使用了开始和结束标签，但没有正确显示为代码块

# sql-server - 更改 NTEXT 数据类型以适应更多数据

> ID：14591240
> 
> 赞同：0
> 
> 时间：2013-01-29T20:04:36.160
> 
> 标签：sql-server, sql-server-2000, alter-table, sqldatatypes

我的一位同事正在使用 SQL Server 2000，并且在显示使用数据类型的 XML 列时遇到了显示`ntext`问题`<Long Text>`。我猜那是因为字符长度太短`(16)`，但它不允许任何更改。

尝试将数据类型更改`varchar`为警告时出现。从改变数据类型`ntext`会`varchar/nvarchar`影响表中的数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:14:04.827

1.  更改为`varchar`可能会丢失 Unicode 信息，例如

    ```
    DECLARE @x NVARCHAR(1) = NCHAR(257);

    SELECT @x, CONVERT(VARCHAR(1), @x); 
    ```

    结果：

    ```
    ----  ----
    ā     a
    -- these are NOT the same! 
    ```

2.  更改为`nvarchar(<=4000)`可能会丢失任何大于 8000 字节（4000 个字符）的数据。`ntext`如果设计师选择但从未存储超过 4000 个字符，这可能没问题，但您应该先检查一下：

    ```
    SELECT COUNT(*) FROM dbo.table WHERE DATALENGTH(next_column) > 8000; 
    ```

    如果返回 0，您可能可以安全地转换为`NVARCHAR(4000)`，但您仍然无法轻松地使用 SSMS 工具修改长文本数据（这不是它们的用途），并且您仍然可能会对您的应用程序产生影响

3.  您可能拥有对`ntext`列进行特殊处理的应用程序或存储过程，例如它们可能依赖于[`READTEXT`、`WRITETEXT`和`UPDATETEXT`等`TEXTPTR`](http://msdn.microsoft.com/en-us/library/ms176068.aspx)函数。您需要在代码库中搜索这些命令（这​​是开始查看可能包含这些命令的存储过程的一种方法）：

    ```
    SELECT o.name
      FROM sysobjects AS o
      INNER JOIN syscomments AS c
      ON o.id = c.id
      WHERE c.[text] LIKE '%READTEXT%'
         OR c.[text] LIKE '%WRITETEXT%'
         OR c.[text] LIKE '%UPDATETEXT%'
         OR c.[text] LIKE '%TEXTPTR%'; 
    ```

    有一些误报的机会，因此是“一种*开始*方式”。

* * *

但如果我站在你的立场上，**我不会只是改变类型**。

此外，16 不是字符长度（我可以向您保证，您可以在该列中容纳超过 16 个字符）。`text`并且`ntext`数据不存储在数据页上（因为它不适合单个页面），并且 16 个字节是表示*指针*的字节数，因此，当读取页面时，它可以告诉 SQL Server 在哪里，off-row，去查找实际数据。

真正的答案是停止使用 SSMS 中的图形工具来查看（尤其是修改！）数据。如果要查看`ntext`列的内容，可以选择一个子字符串，例如

```
SELECT CONVERT(NVARCHAR(4000), ntext_column) FROM dbo.table; 
```

...或在应用程序中执行此操作。但不要使用`Open Table`或`EDIT TOP n ROWS`作为电子表格。

另一个真正的答案是[**已经离开 SQL Server 2000**](http://www.microsoft.com/en-us/sqlserver/support/support-updates.aspx)。在现代版本的 SQL Server 中有一种更友好的数据类型，称为`nvarchar(max)`.

# python-2.7 - python argparse：参数=值

> ID：14591241
> 
> 赞同：1
> 
> 时间：2013-01-29T20:04:40.823
> 
> 标签：python-2.7

我对 argparse 没有什么困难，如果有人能就以下两个问题提出建议，我将不胜感激：

1) 我的脚本需要几个命令行参数，其中之一是 --color。我希望 argparse 强制执行以下语法：--color=True 并且不容忍以下语法：--color True。

```
parser = argparse.ArgumentParser()
parser.add_argument('--color', nargs=1, default=True) 
```

2）我正在使用的另一个选项是 -i

```
parser.add_argument('-i','--ignorecase', action='store_true')
args = parser.parse_args() 
```

取决于 True 或 False，re.compile 将使用 flags=re.IGNORECASE 或 flags=0

```
if (args.ignorecase == True):

   CASE_SENSITIVITY=re.IGNORECASE
else:

   CASE_SENSITIVITY=0

pattern = re.compile('my_pattern', flags=CASE_SENSITIVITY) 
```

有没有更简单的方法将值分配给 CASE_SENSITIVITY ？也许在 parser.add_argument 里面，这样我就可以避免多个步骤，if else 等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:18:11.930

您始终可以使用三元运算符，例如：

```
CASE_SENSITIVITY = 0 if not args.ignorecase else re.IGNORECASE 
```

# ios - 为 iOS 应用程序实现锁屏

> ID：14591243
> 
> 赞同：1
> 
> 时间：2013-01-29T20:04:41.167
> 
> 标签：ios, storyboard, appdelegate

我正在开发一个需要“锁定屏幕”的应用程序，用户必须输入密码才能访问存储在应用程序中的数据。

每当应用程序启动和用户不活动几分钟后，应显示此锁定屏幕。

目前，我的故事板中有一个单独的 UIViewController，它没有连接到故事板中的任何其他视图。我知道我可以通过将 instantiateViewControllerWithIdentifier 发送到 [self storyboard] 来访问这个视图控制器。但是，这不适用于应用程序委托。

但是我需要在应用程序委托尝试打开数据库之前从应用程序委托调用锁定屏幕。

什么是实现这一点的好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T23:04:12.103

这可能是一个迟到的答案，但我必须为我的一位使用 Storyboard 的客户实现相同的要求。[您可以从这里下载完整的项目](http://www.4shared.com/zip/OIAfZ8Ny/Lockview.html)。希望这可以帮助某人。

我创建了两个 Viewcontroller，一个是 MainView，另一个需要一个四位数的代码才能关闭。我在 MainView 和 BlockKeypadViewController 之间创建了一个模态 segue，并将其命名为“lockItSegue”。在 MainView 上，我插入了一个调用“lockIt”方法的 RoundRectButton。该方法只执行segue“lockItSegue”。

```
- (IBAction)lockIt:(id)sender 
{
    [self performSegueWithIdentifier:@"lockItSegue" sender:self];
} 
```

在 BlockKeypadViewController.h 上，我创建了

```
//
//  BlockKeypadViewController.h
//  Consultablet
//
//  Created by EDGARD AGUIRRE ROZO on 22/03/13.
//  Copyright (c) 2013 Colombia Creative Software. All rights reserved.
//

#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface BlockKeypadViewController : UIViewController
@property (strong, nonatomic) IBOutlet UILabel *wrongCodeLabel;//*codigoIncorrectoLabel;
@property (strong, nonatomic) IBOutlet UILabel *tryAgainLabel;//*trateNuevamenteLabel;

@property (strong, nonatomic) IBOutlet UILabel *digit1;//*caracter1;
@property (strong, nonatomic) IBOutlet UILabel *digit2;//*caracter2;
@property (strong, nonatomic) IBOutlet UILabel *digit3;//*caracter3;
@property (strong, nonatomic) IBOutlet UILabel *digit4;//*caracter4;
@property int counter;//contador;
@property int codeIn;//claveIngresado;
@property int unlockCode;//claveDesbloqueo;
-(void) calculate:(int)number;//calcular:(int)numero;
- (IBAction)one:(id)sender;//uno:(id)sender;
- (IBAction)two:(id)sender;//dos:(id)sender;
- (IBAction)three:(id)sender;//tres:(id)sender;
- (IBAction)four:(id)sender;//cuatro:(id)sender;
- (IBAction)five:(id)sender;//cinco:(id)sender;
- (IBAction)six:(id)sender;//seis:(id)sender;
- (IBAction)seven:(id)sender;//siete:(id)sender;
- (IBAction)eight:(id)sender;//ocho:(id)sender;
- (IBAction)nine:(id)sender;//nueve:(id)sender;
- (IBAction)zero:(id)sender;//cero:(id)sender;
- (IBAction)cancel:(id)sender;//cancel:(id)sender;
-(void)checkCode;//verificarClave;

@end 
```

在 BlockKeypadViewController.m 上：

```
//
//  BlockKeypadViewController.m
//  Consultablet
//
//  Created by EDGARD AGUIRRE ROZO on 22/03/13.
//  Copyright (c) 2013 Colombia Creative Software. All rights reserved.
//

#import "BlockKeypadViewController.h"
@implementation UILabel (My2)
//- (void)setImage:(UIImage *)image forState:(UIControlState)state animated:(BOOL)animated
- (void)setHidden:(BOOL)hidden animated:(BOOL)animated
{
    //[self setImage:image forState:state];
    [self setHidden:hidden];
    if (animated)
    {
        CATransition *animation = [CATransition animation];
        [animation setType:kCATransitionFade];
        [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
        [animation setFillMode:kCAFillModeBoth];
        [animation setDuration:.3];
        [[self layer] addAnimation:animation forKey:@"UILabelSetAnimationKey"];
    }
}
- (void)setHidden:(BOOL)hidden animated:(BOOL)animated seconds:(int)seconds
{
    //[self setImage:image forState:state];
    [self setHidden:hidden];
    if (animated)
    {
        CATransition *animation = [CATransition animation];
        [animation setType:kCATransitionFade];
        [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
        [animation setFillMode:kCAFillModeBoth];
        [animation setDuration:seconds];
        [[self layer] addAnimation:animation forKey:@"UILabelSetAnimationKey"];
    }
}
@end
@interface BlockKeypadViewController ()

@end

@implementation BlockKeypadViewController
@synthesize digit1,digit2,digit3,digit4,counter,codeIn,unlockCode,wrongCodeLabel,tryAgainLabel;

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.counter = 1;
    self.codeIn=0;

    self.unlockCode=1234;
    NSLog(@"Unlock Code %d",self.unlockCode);

    [digit1 setHidden:YES animated:YES];
    [digit2 setHidden:YES animated:YES];
    [digit3 setHidden:YES animated:YES];
    [digit4 setHidden:YES animated:YES];
}
-(void)checkCode
{
    if(self.codeIn==self.unlockCode)
    {
        [self dismissViewControllerAnimated:YES completion:nil];
    }
    else
    {
        [wrongCodeLabel setHidden:NO animated:YES seconds:.1];
        [tryAgainLabel setHidden:NO animated:YES seconds:.1];
        [self.digit1 setHidden:YES animated:YES];
        [self.digit2 setHidden:YES animated:YES];
        [self.digit3 setHidden:YES animated:YES];
        [self.digit4 setHidden:YES animated:YES];
        self.codeIn = 0;

        NSLog(@"Wrong Code");
    }
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}
-(void) calculate:(int)number
{
    if(self.counter==1)
    {
        [wrongCodeLabel setHidden:YES animated:YES seconds:.2];
        [tryAgainLabel setHidden:YES animated:YES seconds:.2];
        [self.digit1 setHidden:NO animated:YES];
        self.codeIn = number*1000;
    }
    if(self.counter==2)
    {
        [self.digit2 setHidden:NO animated:YES];
        self.codeIn = self.codeIn+number*100;
    }
    if(self.counter==3)
    {
        [self.digit3 setHidden:NO animated:YES];
        self.codeIn = self.codeIn+number*10;
    }
    if(self.counter==4)
    {
        [self.digit4 setHidden:NO animated:YES];
        self.codeIn = self.codeIn+number;
        [self performSelector:@selector(checkCode) withObject:nil afterDelay:0.2];
    }
    if(self.counter<4)
    {
        self.counter++;
    }
    else
    {
        self.counter=1;
    }
}
- (IBAction)one:(id)sender
{
    [self calculate:1];
}
- (IBAction)two:(id)sender
{
    [self calculate:2];
}
- (IBAction)three:(id)sender
{
    [self calculate:3];
}
- (IBAction)four:(id)sender
{
    [self calculate:4];
}
- (IBAction)five:(id)sender
{
    [self calculate:5];
}
- (IBAction)six:(id)sender
{
   [self calculate:6];
}
- (IBAction)seven:(id)sender
{
    [self calculate:7];
}
- (IBAction)eight:(id)sender
{
    [self calculate:8];
}
- (IBAction)nine:(id)sender
{
    [self calculate:9];
}
- (IBAction)zero:(id)sender
{
    [self calculate:0];
}
- (IBAction)cancel:(id)sender
{
    [self.digit1 setHidden:YES animated:YES];
    [self.digit2 setHidden:YES animated:YES];
    [self.digit3 setHidden:YES animated:YES];
    [self.digit4 setHidden:YES animated:YES];
    self.codeIn = 0;
    self.counter = 1;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:21:16.427

不需要（我实际上不建议将它用于这只海豚）使用`AppDelegate`来实现这个或任何`LockScreen`解决方案。`RootViewController`您应该从to创建一个 segue`LockScreen`并根据需要命名（例如`lockItSegue`）。然后从按钮动作调用`[self performSegueWithIdentifier:@"lockItSegue" sender:self];` 的逻辑（`BlockKeypadViewController.m`）上`LockScreen`（一旦用户输入了正确的代码），调用`[self dismissViewControllerAnimated:YES completion:nil];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:21:39.587

要从 appDelegate 在 HomeVC 上显示 lockVC，请使用以下命令：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
HomeVC *hvc = [storyboard instantiateViewControllerWithIdentifier:@"HomeVC"];
self.window.rootViewController = hvc;
[self.window makeKeyAndVisible];

LockVC *lvc = [storyboard instantiateViewControllerWithIdentifier:@"LockVC"] 
[self.window.rootViewController presentViewController:lvc animated:YES completion:nil]; 
```

# visual-studio-2010 - 打开网站选项在 Visual Studio 2010 Ultimate 中不起作用

> ID：14591244
> 
> 赞同：0
> 
> 时间：2013-01-29T20:04:48.840
> 
> 标签：visual-studio-2010

我在笔记本电脑中安装了 Visual Studio 2010 Ultimate（使用 Windows 7 操作系统）。

在 Visual Studio 中，打开网站选项不起作用。Web 应用程序和其他项目运行良好，但是：

1.  我可以创建新网站，但无法打开网站。打开网站的快捷键也不起作用。

2.  此外，*其他*一些快捷键也不起作用，例如`ctrl+E+C`用于评论，而其他一些快捷键也不起作用。

是什么导致了这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:17:43.240

我不明白您的问题....当您单击网站时，您会看到三个视图：代码视图和设计视图，以及这两者的混合...尝试使用 .aspx 页面；）

# wpf - 自定义窗口 chrome 设计时支持

> ID：14591248
> 
> 赞同：4
> 
> 时间：2013-01-29T20:05:08.007
> 
> 标签：wpf, xaml, custom-controls

我有自己的自定义控件库项目，该库中的控件之一是 Zune 软件，如窗口。在我的 WPF 应用程序中，我使用这个自定义窗口控件而不是默认窗口。当我运行我的应用程序时，一切都会显示出来，但问题是在设计时，在 Visual Studio 2012 中它仍然显示默认窗口。我希望能够在设计时拥有相同的 zune 软件风格。有什么方法，我怎样才能做到这一点？

通常我想要实现的是类似[https://fluent.codeplex.com/](https://fluent.codeplex.com/)的东西，而不是从基类派生窗口，你所要做的就是以这种方式定义窗口

```
<Fluent:Ribbon>
<Fluent:RibbonTabItem Header="Home">
    <Fluent:RibbonGroupBox Header="Clipboard">
        <Fluent:SplitButton Text="Paste" Icon="Images\Paste.png" LargeIcon="Images\PasteLarge.png">
        ...
     </Fluent:RibbonGroupBox>
     <Fluent:RibbonGroupBox x:Name="Font" ....
</Fluent:RibbonTabItem>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:38:17.067

你的意思是这样吗？

![设计视图](../Images/2619ffa60eebcb5a4d624b9a2324bfaa.png)

这是我自己的自定义代码，但如果您正在寻找更官方的来源，它可能类似于[http://archive.msdn.microsoft.com/WPFShell库。](http://archive.msdn.microsoft.com/WPFShell)

主窗口派生自现有窗口，或者在本例中为[NavigationWindow](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationwindow.aspx)

```
namespace Centivus.WPF
{
    [TemplatePartAttribute(Name = "PART_SearchTextBox", Type = typeof(TextBox))]
    public class SearchableNavigationWindow : NavigationWindow
    {
        ... 
```

并通过模板设置样式

```
<!-- Custom NavigationWindow UI -->
<Style x:Key="Win7NavigationWindow" TargetType="{x:Type local:SearchableNavigationWindow}">
    <Setter Property="MinWidth" Value="400"/>
    <Setter Property="glass:GlassEffect.IsEnabled" Value="True" />
    <Setter Property="glass:GlassEffect.Thickness">
        <Setter.Value>
            <Thickness Top="35"/>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>

                <DockPanel x:Name="mainDock"  LastChildFill="True" >
                    <!-- The border is used to compute the rendered height with margins.
                                topBar contents will be displayed on the extended glass frame.-->
... 
```

唯一聪明的部分是使用附加属性来应用玻璃，如果您使用自定义镀铬，我会假设您正在做一些非常相似的事情

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using System.Windows.Interop;
using System.Windows;
using System.Windows.Media;
using System.Windows.Controls;
using System.Diagnostics;

namespace Centivus.WPF.Glass
{
    public class GlassEffect
    {
        public static readonly DependencyProperty IsEnabledProperty =
             DependencyProperty.RegisterAttached("IsEnabled",
             typeof(Boolean), typeof(GlassEffect),
             new FrameworkPropertyMetadata(OnIsEnabledChanged));

        public static readonly DependencyProperty ThicknessProperty =
            DependencyProperty.RegisterAttached("Thickness",
            typeof(Thickness), typeof(GlassEffect));

        public static readonly DependencyProperty GlassBackgroundProperty =
            DependencyProperty.RegisterAttached("GlassBackground",
            typeof(Brush), typeof(GlassEffect));

        [DebuggerStepThrough]
        public static void SetGlassBackground(DependencyObject element, Brush value)
        {
            element.SetValue(GlassBackgroundProperty, value);
        }

        [DebuggerStepThrough]
        public static Brush GetGlassBackground(DependencyObject element)
        {
            return (Brush)element.GetValue(GlassBackgroundProperty);
        }

        [DebuggerStepThrough]
        public static void SetThickness(DependencyObject element, Thickness value)
        {
            element.SetValue(ThicknessProperty, value);
        }

        [DebuggerStepThrough]
        public static Thickness GetThickness(DependencyObject element)
        {
            return (Thickness)element.GetValue(ThicknessProperty);
        }

        [DebuggerStepThrough]
        public static void SetIsEnabled(DependencyObject element, Boolean value)
        {
            element.SetValue(IsEnabledProperty, value);
        }

        [DebuggerStepThrough]
        public static Boolean GetIsEnabled(DependencyObject element)
        {
            return (Boolean)element.GetValue(IsEnabledProperty);
        }

        [DebuggerStepThrough]
        public static void OnIsEnabledChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
        {
            if ((bool)args.NewValue == true)
            {
                try
                {
                    Window wnd = (Window)obj;
                    wnd.Activated += new EventHandler(wnd_Activated);
                    wnd.Loaded += new RoutedEventHandler(wnd_Loaded);
                    wnd.Deactivated += new EventHandler(wnd_Deactivated);
                }
                catch (Exception)
                {
                    //Oh well, we tried
                }
            }
            else
            {
                try
                {
                    Window wnd = (Window)obj;
                    wnd.Activated -= new EventHandler(wnd_Activated);
                    wnd.Loaded -= new RoutedEventHandler(wnd_Loaded);
                    wnd.Deactivated -= new EventHandler(wnd_Deactivated);
                }
                catch (Exception)
                {
                }
            }
        }

        [DebuggerStepThrough]
        static void wnd_Deactivated(object sender, EventArgs e)
        {
            ApplyGlass((Window)sender);
        }

        [DebuggerStepThrough]
        static void wnd_Activated(object sender, EventArgs e)
        {            
            ApplyGlass((Window)sender);
        }

        [DebuggerStepThrough]
        static void wnd_Loaded(object sender, RoutedEventArgs e)
        {            
            ApplyGlass((Window)sender);
        }

        [DebuggerStepThrough]
        private static void ApplyGlass(Window window)
        {
            try
            {
                // Obtain the window handle for WPF application
                IntPtr mainWindowPtr = new WindowInteropHelper(window).Handle;
                HwndSource mainWindowSrc = HwndSource.FromHwnd(mainWindowPtr);

                // Get System Dpi
                System.Drawing.Graphics desktop = System.Drawing.Graphics.FromHwnd(mainWindowPtr);
                float DesktopDpiX = desktop.DpiX;
                float DesktopDpiY = desktop.DpiY;

                // Set Margins
                GlassEffect.MARGINS margins = new GlassEffect.MARGINS();
                Thickness thickness = GetThickness(window);//new Thickness();

                // Extend glass frame into client area
                // Note that the default desktop Dpi is 96dpi. The  margins are
                // adjusted for the system Dpi.
                margins.cxLeftWidth = Convert.ToInt32(thickness.Left * (DesktopDpiX / 96) + 0.5);
                margins.cxRightWidth = Convert.ToInt32(thickness.Right * (DesktopDpiX / 96) + 0.5);
                margins.cyTopHeight = Convert.ToInt32((thickness.Top * DesktopDpiX / 96) + 0.5);
                margins.cyBottomHeight = Convert.ToInt32(thickness.Bottom * (DesktopDpiX / 96) + 0.5);

                int hr = GlassEffect.DwmExtendFrameIntoClientArea(mainWindowSrc.Handle, ref margins);
                //
                if (hr < 0)
                {
                    //DwmExtendFrameIntoClientArea Failed      
                    if(window.IsActive)
                        SetGlassBackground(window, SystemColors.GradientActiveCaptionBrush);
                    else
                        SetGlassBackground(window, SystemColors.GradientInactiveCaptionBrush);
                }
                else
                {
                    mainWindowSrc.CompositionTarget.BackgroundColor = Color.FromArgb(0, 0, 0, 0);
                    SetGlassBackground(window, Brushes.Transparent);
                }

            }
            // If not Vista, paint background white.
            catch (DllNotFoundException)
            {
                SetGlassBackground(window, SystemColors.ControlBrush);
            }
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct MARGINS
        {
            public int cxLeftWidth;      // width of left border that retains its size
            public int cxRightWidth;     // width of right border that retains its size
            public int cyTopHeight;      // height of top border that retains its size
            public int cyBottomHeight;   // height of bottom border that retains its size
        };

        [DllImport("DwmApi.dll")]
        public static extern int DwmExtendFrameIntoClientArea(
            IntPtr hwnd,
            ref MARGINS pMarInset);
    }
} 
```

[在http://alski.net/post/2012/01/13/WPF-Wizards-part-2-Glass.aspx](http://alski.net/post/2012/01/13/WPF-Wizards-part-2-Glass.aspx)上还有更多信息

# javascript - HTML链接更改浏览器栏但不是实际页面

> ID：14591250
> 
> 赞同：0
> 
> 时间：2013-01-29T20:05:13.217
> 
> 标签：javascript, hyperlink, href, supersized

我们使用此代码来更改页面：

`<a href="http://mydomain.com/#/people/page/" target="_self">Page</a>`

...这会更改浏览器栏中的 URL，但不会更改实际页面。如果您在浏览器栏中的 URL 末尾按 Enter 键，它会重定向到正确的页面。

为什么链接不执行页面更改？这与带有标题的[http://www.buildinternet.com/project/supersized/](http://www.buildinternet.com/project/supersized/)全屏背景更换器一起使用。链接正在标题字段中使用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:30:47.560

这是因为# 磅符号。您的浏览器认为带有井号的 URL 是同一页面，因此它不会重定向或刷新。当您按下回车键时，您正在刷新页面。

尝试改用URL [http://mydomain.com/people/page/](http://mydomain.com/people/page/)

# javascript - MM/DD/YYYY 的正则表达式

> ID：14591253
> 
> 赞同：-2
> 
> 时间：2013-01-29T20:05:22.193
> 
> 标签：javascript, regex

> **可能重复：**
> [正则表达式以验证 javascript 中 mm/dd/yyyy 格式的短日期和长日期](https://stackoverflow.com/questions/3827312/regular-expression-to-validate-short-and-long-date-in-mm-dd-yyyy-format-in-javas)

我正在使用正则表达式`/^\d{1,2}[\/-]\d{1,2}[\/-]\d{4}$/`在 javascript 中验证 MM/DD/YYYY。

但目前它将验证日期，如 13/22/2012 、 10/45/2012。我该如何纠正它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:09:20.847

删除正则表达式并简单地使用[`split()`function](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)。

> 通过将字符串拆分为子字符串，将 String 对象拆分为字符串数组。

一旦您分别拥有日期的每个部分，您就可以使用简单的条件语句对其进行验证。

```
var dateStr = "MM/DD/YYYY";
var dateParts = str.split('/');  // ["MM", "DD", "YYYY"] 
```

请记住，不应信任在客户端使用 JavaScript 完成的任何验证！任何用户都可以进入并操作您的 JavaScript。您也应该始终在服务器端实现验证。通常客户端验证更多的是用户体验......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:08:12.537

我建议使用库来实现这一点，不要重新发明轮子。其中最流行的是 jquery UI datepicker，它还提供了一个不错的弹出日历来选择日期。

# javascript - Errors with event.preventdefault

> ID：14591255
> 
> 赞同：0
> 
> 时间：2013-01-29T20:05:24.413
> 
> 标签：javascript, jquery

This doesn't work

JS:

```
    var currentPath = window.location.pathname;
    var currentPage = currentPath.substring(currentPath.lastIndexOf('/') + 1);

        $(function() { 

            $("#shoutBox").submit(function(event) {
                event.preventDefault();

                var values = $('#shoutBox').serialize();

                $.post("shoutbox.php", values)

                .done(function(data) {
                    $('input:text[name=shout]').val("JE SHOUT IS GEPOST! WACHT 1 MINUUT!");
                    $('input:text[name=shout]').attr('readonly', true);
                    setTimeout(
                        function() 
                        {
                            $('input:text[name=shout]').val("JE KAN EEN NIEUWE SHOUT MAKEN!");
                            $('input:text[name=shout]').attr('readonly', false);
                        }, 60000);
                });
            });
        });

        $(function() {
            $("#newName").submit(function(event) {
                event.preventDefault();

                var valuen = $('#newName').serialize();

                $.post("shoutbox.php", valuen)

                .done(function(data) {
                    reload();
                });
            });
        });

    function to_new_page(link)
    {
        $("#content").fadeOut(function()
            {
                $(this).load(link+" #content", function()
                {
                    $(this).fadeIn();
                })
            });
        history.pushState({change: "page"}, "RandomRadio", "/"+link);
    }

    function reload()
    {
        to_new_page(currentPage);
    }

```

Form #shoutBox works sucessfully.
But when I submit the form #newName twice, it will refresh the page.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:31:46.903

我有一个修复:)

我在提交按钮中添加了一个 id 并使用了这个

```
    $("#submitshout").live("点击", function(event){

```

代替

```
    $("#shoutBox").submit(函数(事件) {

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:15:51.817

也许是因为你的`.done`电话`reload()`？

不过，我要补充`return false;`

```
$("#newName").submit(function(event) {
            event.preventDefault();

            var valuen = $('#newName').serialize();

            $.post("shoutbox.php", valuen)

            .done(function(data) {
                reload();
            });
            return false;
        }); 
```

请修正你的报价。选择单引号或双引号并坚持下去。

# php - Using file_exists to check if image exist before echo

> ID：14591256
> 
> 赞同：0
> 
> 时间：2013-01-29T20:05:27.307
> 
> 标签：php, file-exists

I'm trying to let my script check if an image exist before echoing it into my table. If it doesn't exist, it should echo another image in stead. My problem is that even though the image exist, it still goes to the else factor. Can anyone spot any coding mistakes?

```
<?php
mysql_select_db("xxxx");
$result = mysql_query("SELECT * FROM yyyy WHERE frivillig=1 ORDER BY stilling");
while($row = mysql_fetch_array($result))
{
?>
<tr>
<td width="50px" class="frivillig"><?php  if (file_exists($url . "ansatte" . "/" . (utf8_encode($row['etternavn'])) . "%20" . (utf8_encode($row['fornavn'])) . ".jpg")) {
echo "<img" . " " . "src='" . $url . "ansatte" . "/" . (utf8_encode($row['etternavn'])) . "%20" . (utf8_encode($row['fornavn'])) . ".jpg'" . " " . "height='50px'/>";
}
else {
echo "<img" . " " . "src='" . $url . "images/mangler.png'" . " " . "height='50px'/>";
}
?> 
```

As you can see, I use $url for my complete url, and the images are placed in the /ansatte/ folder.

Thanks for any help!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:11:54.643

考虑以下用于检查远程资源的代码段：

```
$path = $url . "ansatte" . "/" . (utf8_encode($row['etternavn'])) . "%20" . (utf8_encode($row['fornavn'])) . ".jpg"

$ch = curl_init($path);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_NOBODY, TRUE);
$response = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

if ($httpcode < 400) { // Filter out bad request, not found, etc
 // found
} else {
 // not accessible
} 
```

如果您没有安装 php5-curl，您还可以查看以下替代方案：

**获取图像大小**

同样，这里只支持某些流，但使用很简单，它会更好地验证返回：

```
if (getimagesize($path) !== FALSE) {
  //exists
} 
```

**开放**

```
if (fopen($path,"r") !== FALSE) {
  // exists
} 
```

**获取标题**

```
$headers = get_headers($path, TRUE);
if ($headers !== false && isset($headers['Content-Type']) && $headers['Content-Type'] == 'image/jpeg') {
  // exists
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T20:07:17.733

`file_exists()`不适用于检查 URL。您的调用`file_exists()`应反映相对或绝对文件系统路径，而不是 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:23:17.963

我在这里预感到并假设图像文件实际上与脚本位于同一服务器上。如果是这样，您应该在检查文件是否存在时使用绝对或相对路径，而不是 URL。

```
<?php

$stmt = $dbh->prepare("SELECT * FROM yyyy WHERE frivillig=1 ORDER BY stilling");
$stmt->execute();
$rows = $stmt->fetchAll();

$url = 'http://www.yoursite.com/subdir/';
$path = '/path/to/yoursite/subdir/';

foreach ($rows as $row) {
    ?>
    <tr>
    <td width="50px" class="frivillig">
    <?php
    if (file_exists($path . "ansatte" . "/" . (utf8_encode($row['etternavn'])) . "%20" . (utf8_encode($row['fornavn'])) . ".jpg")) {
        echo "<img" . " " . "src='" . $url . "ansatte" . "/" . (utf8_encode($row['etternavn'])) . "%20" . (utf8_encode($row['fornavn'])) . ".jpg'" . " " . "height='50px'/>";
    }
    else {
        echo "<img" . " " . "src='" . $url . "images/mangler.png'" . " " . "height='50px'/>";
    }
}
?> 
```

同样正如@crush 提到的，您不应该使用`mysql_*`函数。自 PHP 5.5 起，它们已被弃用。上面的例子使用了 PDO。

# java - Regex for extracting 3 digits numbers between brackets

> ID：14591258
> 
> 赞同：0
> 
> 时间：2013-01-29T20:05:30.337
> 
> 标签：java, regex

My string is:

```
Frequency/FA ID VerifiedFA0 FAID5(125)/FA1 FAID7(175)/FA2 FAID1(476) 
```

The regex I'm trying to create should extract these numbers:

```
125, 175, 476 
```

I did it by looking at [this example](https://stackoverflow.com/questions/12735503/extract-numbers-between-brackets-within-a-string) but there must be a better one.

```
myString.replaceAll(".+\\(([0-9]+)\\).+\\(([0-9]+)\\).+\\(([0-9]+)\\).*","$1,$2,$3") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:30:31.557

看一下这个：

```
String s = "Frequency/FA ID VerifiedFA0 FAID5(125)/FA1 FAID7(175)/FA2 FAID1(476)";
Pattern patt = Pattern.compile("\\(\\d+\\)");
Matcher match = patt.matcher(s);
while(match.find()){
    System.out.println(match.group());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T20:08:41.997

而不是`replacing`所有你不需要的东西，你可以使用[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)和[`Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)类来提取你需要的东西。

提取括号之间数字的正则表达式模式将是： -

```
\(\d+\) 
```

`+`量词用于匹配`1 or more`数字的重复。如果您只想匹配`3`数字，则可以将`{3}`量词与`\d`: -一起使用`\(\d{3}\)`。

您可以使用方法应用此正则表达式模式以[`Matcher#find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)从该字符串中获取所有数字。我把执行任务留给你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T20:17:03.657

轻微变化：

这会在括号内找到 3 位数字： ((\d\d\d))

实际的字符串值（在 java 中）是：`"(\\(\\d\\d\\d\\))"`

在[Java RegEx 测试页面上进行测试](http://www.cis.upenn.edu/~matuszek/General/RegexTester/regex-tester.html)

# javascript - Using charCodeAt() to retrieve character from KeyCode

> ID：14591264
> 
> 赞同：1
> 
> 时间：2013-01-29T20:05:59.920
> 
> 标签：javascript, jquery, automation, keyboard-shortcuts, keycode

I am trying to write a Javascript/jQuery function that will automatically bind keyboard shortcuts to my webpage. The method I have in mind is something like the following:

1.  Loop through all elements with a class beginning with 'key-'
2.  For each of these elements, retrieve the key combinations from the class, e.g. 'key-ctrl-s' will return `Ctrl`+`S`
3.  Bind the event for the combination of these particular keys to the document

Pretty basic algorithm, or so I thought... ***issue coming...***

So for example, I can enter the following:

```
<a href="javascript:void(0)" class="some_other_class ctrl+s">Save</a>
<a href="javascript:void(0)" class="ctrl+shift+s">Save As</a> 
```

The above code will generate the following keyboard shortcuts: `Ctrl`+`S` and `Ctrl`+`Shift`+`S`

And when these keys are pressed, the `click` event will be triggered for the relevant html element...

## The Issue

As stated above, the algorithm here is pretty darn simple, however, as usual, the problem comes when trying to write it.

I cannot see how I am going to know which keycode (`e.which`) to listen for when automatically binding the event.

***For example:***

Using the above HTML and the following jQuery, we can get thus far (ignore things like the regex):

```
function keyboardShortcuts(){
    // Loop through all elements with a class containing 'key-'
    $("[class*='key-']").each(function(){
        // Using a regular expression here, separate the class into individual keys
        // whilst ignoring other classes and the 'key-' prefix
        var keys = $(this).attr('class').match(/REGEX HERE/);

        // THIS IS WHERE THE CODE GETS A LITTLE MESSY
        // I AM VERY UNSURE ABOUT THE FOLLOWING

        // Define all special characters and set them to false
        var ctrl = false, alt = false, shift = false;

        // First test for special characters
        // Test for ctrl key
        if(keys.indexOf('ctrl')!=-1){
            ctrl = true;
            // Remove ctrl from the keys array
            keys.splice(keys.indexOf('ctrl'),1)
        }
        // Test for alt key
        if(keys.indexOf('alt')!=-1){
            alt = true;
            // Remove alt from the keys array
            keys.splice(keys.indexOf('alt'),1)
        }
        // Test for shift key
        if(keys.indexOf('shift')!=-1){
            shift = true;
            // Remove shift from the keys array
            keys.splice(keys.indexOf('shift'),1)
        }

        // Determine special characters to test for
        if(ctrl&&alt&&shift){

            // Bind the keypress event to the document

            $(document).keypress(function(e) {
                if((e.ctrlKey||e.metaKey)&&e.altKey&&shiftKey) {

                    var continue = true;

                    // Test for other characters in keys array
                    for(var i=0;i<keys.length;i++){

                        // THIS IS WHAT I AM REALLY UNSURE ABOUT
                        if(keys.indexOf(charCodeAt(e.which))==-1){
                            // Correct key was not pressed so do not continue
                            continue = false;
                        }
                    }

                    if(continue){
                        e.preventDefault();
                        // Proceed to triggering the click event
                        // No more help needed from here...
                    }
                }
                return true;
            });
        }else if(ctrl&&alt){

        }else if(ctrl&&shift){

        }else if(shift&&alt){

        }else if(ctrl){

        }else if(alt){

        }else if(shift){

        }
    });
} 
```

As you can see from the above, the code is quite long winded, but I simply cannot see another way of writing it... Other than maybe a few tidy ups with arrays here and there, but even so the nested if statements are pretty much a necessity aren't they?

## Finally, My Question

Excluding the fact that the code is pretty untidy and could probably be written a little/a lot better (if you do have views on this please provide them), my actual question is in reference to the line that reads:

```
keys.indexOf(charCodeAt(e.which))==-1 
```

Is this a reliable method of retrieving the character from the character code across all browsers? If not, is there a better way to do it?

Anybody that has any opinions on the rest of the code, please post, would love to have some feedback.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:47:46.883

当我开始做这件事时，我并不打算重写整个事情。但我做到了，你可以看到它在[这个 jsfiddle](http://jsfiddle.net/slashingweapon/mhvCc/)上工作。

该技术是找到所有目标元素并构建一个列表，其中列出了每个元素映射到的组合键。我们将这些存储在数组`keybindings`中，每次有人按下一个键时，我们都会查看整个列表以寻找匹配项。如果我们找到一个，我们会在元素上触发一个点击事件。

我使用`keydown`而不是`keypress`因为您实际上可以使用它获得修饰符信息。我还改进了类字符串解析，但我敢肯定它可以做得更干净一些。

这是JS代码。

```
var keybindings = [];

$('[class*="key-"]').each(function (idx, val) {
    var keyspec = {
        which: 0,
        altKey: false,
        shiftKey: false,
        ctrlKey: false,
        element: val
    };

    var keystring = $(val).attr('class').toLowerCase();
    var match = /key-\S+/.exec(keystring);
    var parts = match.toString().split('-');
    keyspec.which = parts[ parts.length-1 ].toUpperCase().charCodeAt(0);
    for (var jdx in parts) {
        if (parts[jdx] == 'alt') keyspec.altKey = true;
        else if (parts[jdx] == 'shift') keyspec.shiftKey = true;
        else if (parts[jdx] == 'ctrl') keyspec.ctrlKey = true;
    }
    keybindings.push( keyspec );
});

$(document).keydown( function(evt) {
    $.each(keybindings, function(idx, oneBind) {
       if (evt.which == oneBind.which
           && evt.altKey == oneBind.altKey
           && evt.shiftKey == oneBind.shiftKey
           && evt.ctrlKey == oneBind.ctrlKey)
           $(oneBind.element).click();
    });
}); 
```

当然，我现在想到可能已经有一个 jquery 插件，我们可以使用它。

# javascript - why counting wrong when i click select all checkbox

> ID：14591268
> 
> 赞同：4
> 
> 时间：2013-01-29T20:06:22.553
> 
> 标签：javascript, jquery

I have got a problem. I have some checkbox. I want to select them at once, but counting result is wrong. when If I use firefox, opera then ok but when i use crome,safari, IE then It gives me a wrong result. why? please help me.

[http://jsfiddle.net/Taslimkhan/kdEmH/2/](http://jsfiddle.net/Taslimkhan/kdEmH/2/)

some code I have set here:

```
 // add multiple select / deselect functionality
    $("#selectall").click(function () {
          $('.case').attr('checked', this.checked);
    });

    // if all checkbox are selected, check the selectall checkbox
    // and viceversa
    $(".case").click(function(){

        if($(".case").length == $(".case:checked").length) {
            $("#selectall").attr("checked", "checked");
        } else {
            $("#selectall").removeAttr("checked");
        }

    });
});
      $(document).ready(function () {
        $("input[type=checkbox]").each(function () {
          $(this).change(updateCount);
        });

        updateCount();

        function updateCount () {
          var count = $("input[type=checkbox]:checked").size();

          $("#count").text(count);
          $("#status").toggle(count > 0);
        };
      }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T20:16:41.770

首先，[`.size()`已弃用。](http://api.jquery.com/size/)改为使用该`length`属性。

其次，您可能希望将被计数的复选框限制为具有`.case`该类的复选框：

```
var count = $("input[type=checkbox].case:checked").length; 
```

第三，您的代码编写方式，您应该调用`updateCount()`事件`click`而不是`change`事件，并且您不需要那里的匿名函数：

```
$("input[type=checkbox]").click(updateCount); 
```

我保存了您的 jsfiddle 的新版本：http: [//jsfiddle.net/kdEmH/8/](http://jsfiddle.net/kdEmH/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:20:53.523

点击是正确的事件来捕获不改变。还有你为什么要迭代绑定。将您的 document.ready 替换为以下内容：

```
$(document).ready(function () {
    $("input").bind('click', function () {
      updateCount();
    });

    updateCount();

    function updateCount () {
        var count = $( "input:checked" ).length;

      $("#count").text(count);
      $("#status").toggle(count > 0);
    };
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T20:35:55.790

就像安吉拉说的，你应该在监听变化事件，在复选框的值发生变化后不能保证点击被调用。此外，该值可能会因其他事情而改变，例如在字段中使用制表符和点击空格。同样重要的是要意识到在以编程方式设置复选框的值后不会触发更改事件，因此在以编程方式设置值时必须自己调用 updateCount，因此，没有理由将 updateCount 绑定到单击，只需当您处理任何复选框的更改事件时调用它。

这是一个完整的片段，就像你所拥有的一样，除了我一直保持计数可见

```
$(function(){
    function updateCount () {
        var count = $("input.case[type=checkbox]:checked").length;
        $("#count").text(count);
    }
    updateCount();

    // add multiple select / deselect functionality
    $("#selectall").change(function() {
        $('.case').prop('checked', this.checked);
        updateCount();
    });

    // if all checkbox are selected, check the selectall checkbox
    // and viceversa
    $(".case").change(function(){
        if($(".case").length == $(".case:checked").length) {
            $("#selectall").attr("checked", "checked");
        } else {
            $("#selectall").removeAttr("checked");
        }
        updateCount();
    });
}); 
```

# javascript - jQuery ToggleClass Is Toggling When I Click On Inside Links

> ID：14591269
> 
> 赞同：2
> 
> 时间：2013-01-29T20:06:26.050
> 
> 标签：javascript, jquery, javascript-events, event-handling, toggleclass

I have links inside a list item that toggles on click, but when I click on the link the toggleclass activates and it disappears.

```
<script type="text/javascript">
$(document).ready(function() {
    $(".content-list > li").live("click", function () {
        $(this).find('.links').toggleClass("hide");
    });
});
</script> 
```

[http://jsfiddle.net/davemj88/DtrDw/1/](http://jsfiddle.net/davemj88/DtrDw/1/)

If you click on any link inside the list item it toggles and goes away. I want it to remain visible unless you click on the background or not a link.

I want the list item to toggle UNLESS a user clicks on a link somewhere inside, then I DON'T want it to toggle the class. How do I restrict the toggleclass to only working when a user doesn't click on another link inside?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:17:51.033

如果为 li 中的链接添加 click 事件处理程序，则可以使用 e.stopPropagation() 来防止该事件冒泡到包含的 li 中。

```
$(".content-list > li a").live("click", function(e) {
    e.stopPropagation();
}); 
```

[JS小提琴](http://jsfiddle.net/yPUhs/)

您会注意到删除链接不受影响，因为用于事件绑定的选择器是直接后代 li 和其中的锚标记，因此您需要适当调整选择器，但这应该可以理解.

# jquery - Pseudo Selector problems in Drop Down menu

> ID：14591279
> 
> 赞同：1
> 
> 时间：2013-01-29T20:06:50.367
> 
> 标签：jquery, html, css

I have a 3-level drop down menu and I have **2 issues**:

**Issue 1: Partly solved. See my answer below** I would like to underline the active selected tag the same blue underline color as when hovering over the other tabs... So if the home page tab is active, it should underline(border-bottom) the home tab until another one is selected...

**Issue 2:** When hovering over the any of the sub-menu items, it underlines(border-bottom) it like it should, but the underline(border-bottom) is longer than the background of the parent li tag...How do I line them up?

Also, how can I keep 'Services' underlined when I am hovering over its sub-menu items?

**HERE IS MY FIDDLE:** [http://jsfiddle.net/6aT9W/4/](http://jsfiddle.net/6aT9W/4/)

HTML:

```
<div id="page-wrap">
        <ul class="dropdown">
            <li><a class="first" href="#">Home</a>
            </li>
            <li><a class="first" href="#">About Us</a>
            </li>
            <li><a class="first" href="#">Services</a>

                <ul>
                    <li>    <a href="#">Supply &amp; Distribution</a>

                        <ul>
                            <li><a href="#">Supply and distribution of industrial and raw materials including timber, machinery, equipment, fuel, technology and other resource.</a>
                            </li>
                            <li><a href="#">Supply of technological products including Information Technology and telecommunication equipment with integrated solutions.</a>
                            </li>
                        </ul>
                    </li>
                    <li>    <a href="#">Procurement &amp; Product Sourcing</a>

                        <ul>
                            <li><a href="#">Sourcing of industrial products for the industrial, energy and mining sectors.</a>
                            </li>
                        </ul>
                    </li>
                    <li>    <a href="#">Sales and Marketing</a>

                        <ul>
                            <li><a href="#">Sales, marketing and promotions including brand development strategies, research, demographic targeting.</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><a class="first" href="#">Products</a>

                <ul>
                    <li><a>Caskets</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div> 
```

CSS:

```
* {
    margin: 0;
    padding: 0;
}
#page-wrap {
    width: 800px;
    margin: 25px auto;
}
a {
    text-decoration: none;
}
ul {
    list-style: none;
}
p {
    margin: 15px 0;
}
/*
    BODY
*/
 #page-wrap {
    margin: 0 auto;
    width: 940px;
    height: 86px;
    border-bottom: 1px solid #bbb;
}
/* 
    LEVEL ONE
*/
 ul.dropdown {
    position: relative;
}
ul.dropdown li {
    font-weight: bold;
    float: left;
    zoom: 1;
}
ul.dropdown a:hover {
    color: #000;
}
ul.dropdown li.active a {
    color: #ffa500;
}
ul.dropdown li a {
    display: block;
    padding: 29px 8px;
    color: #222;
    font- size: 18px;
    font-family:'Open Sans', Sans-Serif;
    border-bottom: 6px solid transparent;
}
ul.dropdown li:last-child a {
    border-right: none;
}
/* Doesn't work in IE */
 ul.dropdown li.hover, ul.dropdown li:hover {
    background: #f1f1f1;
    color: black;
    position: relative;
}
ul.dropdown li.hover > a, ul.dropdown li > a:hover {
    color: black;
    border-bottom: 6px solid #003399;
}
/* 
    LEVEL TWO
*/
 ul.dropdown ul {
    width: 230px;
    visibility: hidden;
    position: absolute;
    top: 100%;
    left: 0;
}
ul.dropdown ul li {
    background: #fafafa;
    font-weight: normal;
    color: #000;
    float: none;
    border-bottom: 1px solid #ccc;
}
/* IE 6 & 7 Needs Inline Block */
 ul.dropdown ul li a {
    border-bottom: 6px solid transparent;
    border-right: none;
    width: 100%;
    display: inline-block;
    padding: 8px 8px;
    font-size: 14px;
}
/* 
    LEVEL THREE
*/
 ul.dropdown ul ul {
    left: 100%;
    top: 0;
}
ul.dropdown li:hover > ul {
    visibility: visible;
} 
```

Thank You

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:16:37.550

好的，我通过添加以下JS和CSS找到了活动选项卡问题的解决方案：

```
ul.dropdown li.active a{ 
                          color: #000; 
                          border-bottom: 6px solid #003399; 
                          background: #f1f1f1;
} 
```

JS

```
$(document).ready(function(){
    $('.dropdown > li').click(function() {
        $(this).siblings('li').removeClass('active');
        $(this).addClass('active');
    });
}); 
```

但是，仍然存在一个问题：单击“服务”时，所有子菜单也都带有下划线。我只想要悬停在下划线和突出显示的那个（对于子菜单......）

我想这与 .siblings JQuery 方法有关......

我更新了我的 JFiddle

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:27:36.517

1.  您需要更改标记或添加单击处理程序来切换类。我看到你定义了 li.active 类。如果它是每个菜单项的单独页面/url/请求，则让服务器确定要将类添加到哪个顶级菜单`.active`。如果您正在对页面内容进行 AJAX 处理，则应该挂钩 ajax 调用以在正确的选项卡上切换类（并将其从其他选项卡中删除）。如果它是一个单页内容（即一次全部加载，并且只需要 js/jquery/dhtml'ing 适当的选项卡，如下所示），那就是放置钩子的地方。

2.  这很棘手......它与元素的`width: 100%`规则有关。`a`如果你把它缩小，你可以看到边界没有溢出那么糟糕。我不建议滚动，因为百分比是......不好依赖。我没有看到任何设置包含宽度的东西`li`，所以盒子模型可能会变得混乱。

啊，我现在知道你有这个规则

```
ul.dropdown ul {
  width: 230px; 
```

与 a 的填充相结合

```
ul.dropdown ul li a {
    border-bottom: 6px solid transparent;
    border-right: none;
    width: 100%;
    display: inline-block;
    padding: 8px 8px; 
```

它将内部宽度设置为 230px（包含 li 的 100%，即包含 ul 的 100%），然后添加左右 8px 的填充，使其边框跨越的总宽度为 246px，这不会不适合。所以将宽度更改为 214px，+ 8px 向左填充 + 8px 向右填充 = 230px。

3 更改悬停选择器。使用`li:hover > a`选择器代替`li > a:hover`

```
ul.dropdown li.hover > a, ul.dropdown li:hover > a {
    color: black;
    border-bottom: 6px solid #003399;
} 
```

**更新：**区别。

`li:hover > a`匹配`li`悬停在元素上的任何锚标记。由于 Services & Products`li`包含其中的嵌套`ul`，因此当您将鼠标悬停在其子元素上时`a`，外部仍将悬停在其上。`li`服务和产品文本本身就是锚点，因此它们符合规则并获得边框。

更新了这些更改（您的 javascript 没有更改，如果您告诉我您打算如何将菜单项的内容放在页面上，我可以更好地解决这个问题）：http: [//jsfiddle.net/6aT9W/5/](http://jsfiddle.net/6aT9W/5/)

# javascript - Video.js video fill div

> ID：14591283
> 
> 赞同：1
> 
> 时间：2013-01-29T20:06:59.883
> 
> 标签：javascript, css, video.js

Is it possible to tell video.js to fill a div with the video? In my experimenting it only seems possible to set the dimensions (either with `size()` or `width()` and `height()`).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:28:34.447

找到了一个完全用 HTML 和 CSS 完成的解决方案：

[http://www.hexagonwebworks.com/2012/responsive-videos-updated/](http://www.hexagonwebworks.com/2012/responsive-videos-updated/)

# java - 上传 ZIP 并解压缩以防止时间戳被实现

> ID：14591285
> 
> 赞同：1
> 
> 时间：2013-01-29T20:07:06.983
> 
> 标签：java, ftp, zip, apache-commons-net

我想将 FTP 服务器上的文件与本地文件进行比较。为了不修改时间戳，我想将它们压缩上传，然后在网络服务器上解压缩，以防止时间戳被实现。这是作为一种可能性[在这里](http://www.unix.com/answers-frequently-asked-questions/29458-ftp-files-but-keep-original-timestamp.html)提到的。

但实际上我不知道如何做到这一点（我正在使用 Java 和[Apache Commons FTP-Libraries](http://commons.apache.org/net/)。

如何将本地文件放入 ZIP 文件，将其上传到服务器，然后使用相同的时间戳解压缩？或者这根本不可能？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:47:06.810

实际上，我发现使用纯 FTP 是不可能的。您必须使用第三方软件。

# java - 多个 JTA 事务：没有与当前事务关联的会话

> ID：14591287
> 
> 赞同：0
> 
> 时间：2013-01-29T20:07:11.883
> 
> 标签：java, spring, hibernate, jpa

我有一个问题，如果我有一个客户端在我的服务上调用两个方法，它会失败，第二种方法中的事务没有与之关联的会话。但是，如果我将这两种方法结合到服务中并从我的客户端代码中调用该方法，它就会成功。

谁能向我解释为什么会这样？

考虑以下代码：

```
@Configurable
public class ParentService {

    @PersistenceContext
    private EntityManager entityManager;

    public ParentService() {
    }

    @Transactional
    public Parent findById( Long id ) {
       return entityManager.findById( Parent.class, id );
    }

    @Transactional
    public Set<Child> getChildrenFor( Parent parent ) {
       return Collections.unmodifiableSet( new HashSet<>( parent.getChildren() ) );
    }

    @Transactional
    public Set<Child> getChildrenFor( Long id ) {
       Parent parent = findById( id );
       return getChildrenFor( parent );
    }

    ...
} 
```

所以这里发生的是，如果我调用 #getChildrenFor(id) 在我的客户端代码（不了解事务）中我很好。但如果我打电话：

```
 Parent parent = service.findById( id );
   Set<Child> children = service.getChildrenOf( parent ); 
```

然后hibernate抛出一个异常，说没有与当前事务关联的会话，因此它无法遍历#getChildren的延迟加载的PersistentSet。

现在我不是 JPA 或 Spring 专家，所以也许这是预期的行为。如果是这样，你能告诉我为什么吗？我是否需要创建一个不是服务要公开的实体的 DTA，然后让我的客户使用它而不是实体？我认为由于两个调用都使用相同的实体管理器引用，因此客户端应该能够进行这两个调用。

顺便说一句，这是使用 CTW 的“弹簧配置”。JpaTransactionManager 配置为横切，如下所示：

```
@Bean
public PlatformTransactionManager transactionManager() {

    JpaTransactionManager txnMgr = new JpaTransactionManager();

    txnMgr.setEntityManagerFactory( entityManagerFactory().getObject() );

    // cross cut transactional methods with txn management
    AnnotationTransactionAspect.aspectOf().setTransactionManager( txnMgr );

    return txnMgr;
} 
```

请让我知道我可以提供的任何其他信息来帮助解决此问题。

春天 XML 配置：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd         http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd">
    <context:spring-configured/>
    <context:component-scan base-package="com.myapp"/>
</beans> 
```

春季Java配置：

```
@Configuration
@PropertySource( "classpath:database.properties" )
public class DatabaseConfiguration {

    @Value( "${database.dialect}" )
    private String databaseDialect;

    @Value( "${database.url}" )
    private String databaseUrl;

    @Value( "${database.driverClassName}" )
    private String databaseDriver;

    @Value( "${database.username}" )
    private String databaseUser;

    @Value( "${database.password}" )
    private String databasePassword;

    @Bean
    public static PropertySourcesPlaceholderConfigurer properties() {
        return new PropertySourcesPlaceholderConfigurer();
    }

    @Bean
    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {
        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();

        factory.setPersistenceUnitName( "persistenceUnit" );
        factory.setDataSource( dataSource() );

        Properties props = new Properties();
        props.setProperty( "hibernate.dialect", databaseDialect );
        factory.setJpaProperties( props );

        return factory;
    }

    @Bean
    public PlatformTransactionManager transactionManager() {
        JpaTransactionManager txnMgr = new JpaTransactionManager();
        txnMgr.setEntityManagerFactory( entityManagerFactory().getObject() );

        // cross cut transactional methods with txn management
        AnnotationTransactionAspect.aspectOf().setTransactionManager( txnMgr );

        return txnMgr;
    }

    @Bean
    public DataSource dataSource() {
        final BasicDataSource dataSource = new BasicDataSource();
        dataSource.setDriverClassName( databaseDriver );
        dataSource.setUrl( databaseUrl );
        dataSource.setUsername( databaseUser );
        dataSource.setPassword( databasePassword );

        dataSource.setTestOnBorrow( true );
        dataSource.setTestOnReturn( true );
        dataSource.setTestWhileIdle( true );
        dataSource.setTimeBetweenEvictionRunsMillis( 1800000 );
        dataSource.setNumTestsPerEvictionRun( 3 );
        dataSource.setMinEvictableIdleTimeMillis( 1800000 );

        return dataSource;
    }
} 
```

聚甲醛：

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>aspectj-maven-plugin</artifactId>
        <version>1.2</version>
        <!-- NB: do not use 1.3 or 1.3.x due to MASPECTJ-90 and do not use 1.4 due to de`clare parents issue  -->
        <dependencies>
            <!-- NB: You must use Maven 2.0.9 or above or these are ignored (see MNG-2972) -->
            <dependency>
                <groupId>org.aspectj</groupId>
                <artifactId>aspectjrt</artifactId>
                <version>${aspectj.version}</version>
            </dependency>
            <dependency>
                <groupId>org.aspectj</groupId>
                <artifactId>aspectjtools</artifactId>
                <version>${aspectj.version}</version>
            </dependency>
        </dependencies>
        <executions>
            <execution>
                <goals>
                    <goal>compile</goal>
                    <goal>test-compile</goal>
                </goals>
            </execution>
        </executions>
        <configuration>
            <outxml>true</outxml>
            <aspectLibraries>
                <aspectLibrary>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-aspects</artifactId>
                </aspectLibrary>
            </aspectLibraries>
            <source>${java.version}</source>
            <target>${java.version}</target>
        </configuration>
    </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:38:06.900

使用 JTA 事务时，会话（即或多或少的 entityManager）自动绑定到事务。这意味着在事务 T1 期间获取的实体是在与 T1 绑定的 entityManager/session 中获取的。

一旦提交 T1，entityManager/session 就不再附加到任何事务（因为 T1 已完成）。

当您的客户这样做时：

```
Parent parent = service.findById( id );
Set<Child> children = service.getChildrenFor( parent ); 
```

`parent`在 T1 期间获取，因此它绑定到`entityManager`与 T1 绑定的（我们称之为 EM1）。但是 T1 已完成（`findById`返回时已提交）。

由于`getChildrenFor`注释为`@Transactional`：一个新的 tx（即 T2）由 txManager 启动。这将创建一个与 T2 关联的新 entityManager（即 EM2）。但是`parent`属于 EM1 并且 EM1 仍然没有绑定到任何正在运行的 tx。

要解决您的问题，您可以调整此方法的代码：

```
@Transactional
public Set<Child> getChildrenFor( Parent parent ) {
   Parent mergedParent = entityManager.merge(parent);
   return Collections.unmodifiableSet( new HashSet<>( mergedParent.getChildren() ) );
} 
```

呼唤[`merge`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#merge%28T%29)意志

> 将给定实体的状态合并到当前持久化上下文中。

（注意*持久化上下文*是与当前 entityManager 关联的*store ）*

`mergedParent`现在属于 EM2，并且 EM2 绑定到当前正在运行的 T2，所以调用`mergedParent.getChildren()`应该不会失败。

**关于的**重要**`merge`说明：重要的是要注意`merge`返回一个**新实例**并且不要触摸传入参数的实例。在使用 JPA 时认为`merge`修改实例是一个非常常见的错误/误解。**

 **至此，我希望您明白，当您在同一个 tx（调用`getChildrenFor( Long id )`）中获取父子节点和子节点时，不需要合并，因为（父节点和子节点）都属于同一个 entityManager。**

# scripting - 自动保存 Photoshop 动作集

> ID：14591289
> 
> 赞同：1
> 
> 时间：2013-01-29T20:07:23.520
> 
> 标签：scripting, automation, action, photoshop

如何通过 Photoshop 脚本 (.js/.jsx) 在 Photoshop 中自动保存动作集？如果这是不可能的，有没有办法通过其他方法来做到这一点？

我正在尝试自动设置和保存项目以进行工作，以至于我所要做的就是单击一个按钮开始一个项目，然后单击另一个按钮提交已完成的项目，这样我就可以只做工作需要我，而多余的东西是由计算机完成的。我留下的唯一障碍是保存每个项目的自定义操作集（这些包含对某些对象的项目特定转换）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T05:34:02.550

在带有 Automator 的 Mac OS X 上，这很容易！

# jquery - 单击图像时获取 td 列值

> ID：14591297
> 
> 赞同：1
> 
> 时间：2013-01-29T20:07:46.623
> 
> 标签：jquery, asp.net-mvc, razor

我在 Razor 代码中有一个带有标签的表格，该标签与表格中的每条记录一起呈现。当用户单击此图像时，我努力寻找方法，应用程序针对单击的行（在 jquery 中）和警报 ID 获取商店 ID。

```
<table id="grid">
 <thead> 
 <tr>
    <th data-field="store_id">Store ID</th>
    <th data-field="address">Address</th>
    <th data-field="postcode">post Code</th>
    <th data-field="city">City</th>
    <th data-field="country">Country</th>
    <th data-sortable="false">Action</th>
   </tr>
  </thead>

 <tbody>
 @foreach (var item in Model)
 {
   <tr>
    <td>@Html.DisplayFor(modelItem=> item.storeID)</td>
    <td>@Html.DisplayFor(modelItem=> item.address)</td>
    <td>@Html.DisplayFor(modelItem=> item.postcode)</td>
    <td>@Html.DisplayFor(modelItem=> item.city)</td>
    <td>@Html.DisplayFor(modelItem=> item.Country)</td>
    <td><img class="img" src="~/Images/delete.png" /></td>
   <!-- <td> <input type="button" class="b1" value ="Press Me" /></td>-->
  </tr>
  }
 </tbody>
</table> 
```

这是使用 jQuery 的 javascript 代码

```
<script>

 $(document).ready(function () {

     $(".img").click(function () {

         var a = $(this).  ?????

         alert("clicked " + a);

         var store = { storeID: '3' }
         $.ajax({
             type: "POST",
             url: "/Master/processJsonRequest",
             data: JSON.stringify({ model: store }),
             dataType: "json",
             contentType: "application/json; charset=utf-8",
             success: function (response) {
                 alert(response);
             }
         });
     });
 });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:10:11.280

试试这个：

```
$(".img").click(function () {
    var storeId = $(this).closest('tr').find('td:first').text();
    alert("clicked " + storeId);

    // fire off your ajax...
}); 
```

[**示例小提琴**](http://jsfiddle.net/phujq/)

# iphone - 类似于苹果语音控制表iphone的录音表

> ID：14591298
> 
> 赞同：0
> 
> 时间：2013-01-29T20:07:53.170
> 
> 标签：iphone, audio-recording, avaudiorecorder

我是一名 IOS 开发人员，想在我的录音应用中复制 iPhone 语音控制应用的录音效果。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:23:26.010

我想你用 an`AVAudioRecorder`来录制声音。然后只是
`[audioRecorder setMeteringEnabled:YES]`
然后只是阅读
`[audioRecorder averagePowerForChannel:1]`

`AVAudioRecorder`您可以在 Apple 文档中找到更多信息： [AVAudioPlayer Class Reference](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)

# php - 有没有办法密码保护www文件夹？

> ID：14591303
> 
> 赞同：-2
> 
> 时间：2013-01-29T20:08:07.950
> 
> 标签：php, apache, web, directory

我正在编写 Intranet 应用程序，但服务器也用作工作站。我想知道是否有办法限制对 WWW 文件夹的访问，以便对使用这些应用程序的人隐藏服务器代码（在本例中为 PHP）。

有了这个，我还将保护写在 WWW 文件夹内的脚本中的数据库密码。

我已经四处寻找了一段时间，但我无法找到任何关于此的内容。

我和我的一个恶魔谈过，他告诉我，如果我使用 windows，我可以在 windows 中创建一个用户，并使该文件夹只能由该帐户访问，并授予 Apache 访问它的权限，在这种情况下，我们可以从任何其他用户帐户，但将无法访问这些文件。

我担心有人使用任何 linux 发行版的 live CD 来获取文件的可能性，他告诉我，如果我安装 grub 并锁定它，就不可能为此使用 live cd，除非这样做的人有grub 键。

当然，在 linux 中也是可以的。谁能解释一下这个过程？还有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:09:32.290

所有与网络无关的资产（例如不是 html 文件、css、javascript 等）都应该放在文档根目录之外。这样就无法通过浏览器访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:14:38.427

这在 Linux 上很容易做到。比如说，您有网站所有者的用户名为`john`，而您在系统上有另一个用户名为`bob`. 您不想`bob`看到`john`的文件，但希望 Apache 可以访问它们。Apache 默认作为单独的用户（通常是`apache`或`www-data`）运行，并且是`john`和`bob`组的成员。

保存文件的目录应该没有“其他”的权限，至少有“组”的读取和执行权限，并且可能对用户具有完全访问权限。

```
drwxr-x--- 35 john john 4096 Jan 29 15:47 /path/to/john/webroot/ 
```

您可以通过执行以下操作来做到这一点：

```
chmod 750 /path/to/john/webroot/ 
```

为了被 Apache 访问，这些文件只需要读取权限。然后您可以对它们进行 chmod 640：

```
chmod 640 /path/to/john/webroot/super_sensitive_config_file.php 
```

然后应该向您显示如下内容：

```
$ ls -l super_sensitive_config_file.php
-rw-r----- 1 john john 385 Jan 19 16:27 super_sensitive_config_file.php 
```

然后，`bob`用户应该会看到如下内容：

```
bob@server:~$ cat /path/to/john/webroot/super_sensitive_config_file.php
cat: /path/to/john/webroot/super_sensitive_config_file.php: Permission denied 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:15:54.950

完全阻止对文件的访问可能是不可能的，因为计算机的所有者（您的客户端）可能具有管理员权限，因此始终能够覆盖您对文件/文件夹施加的任何限制。

这给你留下了一些其他的选择

1.  不要安装在客户的计算机上，而是出售一个“完整”的软件包，包括一个只有你可以管理的小型服务器

2.  在安装在客户端计算机上的虚拟机上运行网站（例如 VMWare、Parallels Desktop 或类似的东西）。只有您可以完全访问虚拟机，因此与选项 1 相同

3.  '混淆' PHP 源代码。有一些选项（搜索 PHP 混淆），但我建议选项 1 或 2

当然，您始终可以将网站作为“托管”服务提供，在外部 Web 服务器上运行，但如果包含重要信息和私人信息，则必须具备所有正确的安全性。

# html - 无法在 Facebook 之类的框中关闭“面孔”选项

> ID：14591304
> 
> 赞同：0
> 
> 时间：2013-01-29T20:08:05.907
> 
> 标签：html, facebook, facebook-like, facebook-social-plugins

我在一个页面上放置了一个 Facebook 的“喜欢”框，现在可以正常工作了（www.greenlaneecology.co.uk/index.htm）。网站所有者现在希望从框中删除面孔。我已将 show_faces 更改为 false，但面孔仍然出现。有任何想法吗 ？

我现在还怀疑流和标头选项也没有任何效果——我认为它们只是使用默认值，而不管指定的设置如何。

我还注意到，在 Like 框的代码生成器中，我无法再将其切换为“IFRAME”（实际上是 URL 或 XFBML）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:30:34.007

您现在可以应用 css，直到您找出问题所在：

```
<style type="text/css">
._43qf{
display: none;
}
</style> 
```

我不建议将其用作永久修复，但在您可以修复面部之前，这*应该可以*工作。

# android - 插入 Sqlite 数据库 Android 时出错

> ID：14591307
> 
> 赞同：1
> 
> 时间：2013-01-29T20:08:16.717
> 
> 标签：android, android-sqlite

我被困住了。一直在寻找一个合理的解决方案，但没有任何线索。

这是我的创建代码：

```
 public class EventData extends SQLiteOpenHelper {

  public static final String TABLE_COMMENTS = "EventData";          //Our Table Name(let say ) Event Data

  public static final String TABLE_EVENT_NAME="eventName";
  public static final String TABLE_DAY="day";
  public static final String TABLE_START="sTime";
  public static final String TABLE_END="eTime";
  public static final String TABLE_IMGID="imgId";   //Primary Key
  public static final String TABLE_SUBSCRIBE="subStatus";
  //ImgId,sTime,eTime is int type(rest all are of String type)
  public static final String TABLE_FILENAME="fileName";

  private static final String DATABASE_NAME = "EventDB.db";
  private static final int DATABASE_VERSION = 1;

  // Database creation sql statement
  public static final String DATABASE_CREATE = "create table "
      + TABLE_COMMENTS + "(" + TABLE_IMGID
      + " integer primary key , " + TABLE_EVENT_NAME
      + " text , " +    TABLE_DAY+
      " text ," +       TABLE_START+
      " float , " + TABLE_END+
      " float , " +     TABLE_SUBSCRIBE+
      " integer ," +    TABLE_FILENAME+
      " text );";

  public EventData(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

  @Override
  public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(EventData.class.getName(),
        "Upgrading database from version " + oldVersion + " to "
            + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_COMMENTS);
    onCreate(db);
  }   
} 
```

这是我在另一个类中的插入代码：

```
 public Comment createComment(int id,String eN,String d,int sT,int eT,String fN,Boolean sub) {
ContentValues values = new ContentValues();
 //  values.put(EventData.TABLE_EVENT_NAME, comment);
values.put(EventData.TABLE_IMGID, id);
values.put(EventData.TABLE_EVENT_NAME,eN);
values.put(EventData.TABLE_DAY, d);
values.put(EventData.TABLE_START, sT);
values.put(EventData.TABLE_END, eT);
int temp=0;
if(sub==true)temp=1;
values.put(EventData.TABLE_SUBSCRIBE,temp);
values.put(EventData.TABLE_FILENAME, fN);

long insertId = database.insert(EventData.TABLE_COMMENTS, null,
    values);

Log.d("DB", "value inserted succcessfully");

Cursor cursor = database.query(EventData.TABLE_COMMENTS,allColumns, EventData.TABLE_IMGID + " = " + insertId, null,null, null, null);
Log.d("Sucess", "good so far");  
cursor.moveToFirst();
Comment newComment = cursorToComment(cursor);
cursor.close();
return newComment;
} 
```

这是logcat

```
01-30 01:31:53.141: E/Database(8787): Error inserting fileName=execute eTime=13  
 imgId=125 sTime=12 eventName=Execute 1.2 day=1 subStatus=0
01-30 01:31:53.141: E/Database(8787): android.database.sqlite.SQLiteException: table  
EventData has no column named subStatus: , while compiling: INSERT INTO  
EventData(fileName, eTime, imgId, sTime, eventName, day, subStatus) VALUES(?, ?, ?, ?,     
?,?, ?); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T05:23:11.780

当您更改数据库时，只需删除并重新安装应用程序。这将解决问题

# c++ - std::count 分隔符问题

> ID：14591309
> 
> 赞同：0
> 
> 时间：2013-01-29T20:08:20.697
> 
> 标签：c++

我有这个 C++ 片段，我试图理解：

在 .hh 文件中：

```
class A
{
private:
    //recordDelimiter is a '+' character
    // I can do this because char is an integral type!
    static const char recordDelimiter = '+';

    void f()
    {
        ....
        //serializedData is a std:;string
        //Get number of times A::recordDelimiter is found i.e. Number of objects

        // Non-Functional
        int times = (int) std::count (serializedData.begin(), serializedData.end(), A::recordDelimiter);

        // Functional
        const char recDel = A::recordDelimiter;
        int times = (int) std::count (serializedData.begin(), serializedData.end(), recDel);

        // Functional
        int times = (int) std::count (serializedData.begin(), serializedData.end(), '+');

        ....
    }
}; 
```

从 std::count 参考这是函数的签名：

```
template <class InputIterator, class T>
  typename iterator_traits<InputIterator>::difference_type
    count (InputIterator first, InputIterator last, const T& val) 
```

所以我不明白为什么使用`A::recordDelimiter`代替`'+'`是一个问题。编译给了我 `undefined reference to`A::recordDelimiter'`

所以我的问题基本上是，为什么我上面的非功能代码不起作用？以及如何做到这一点：

```
const char recDel = USerializer::recordDelimiter; 
```

然后将其传递给 std::count 是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:13:38.667

您已声明但未定义`A::recordDelimiter`. 将此行添加到一个源代码文件中：

```
const char A::recordDelimiter; 
```

初始化静态 const 成员但不定义它的快捷方式可以被认为是提供一个值，而不是成员的实际对象。所以这是有道理的：

```
char foo = A::recordDelimiter; // just substitute '+' for the rhs here 
```

但这不是：

```
char *foo = & A::recordDelimiter; // Oops, no such object, so it can't have an address 
```

在问题的情况下，`std::count`接受 a`const T&`作为参数。由于该对象已声明但未定义，因此它不存在。因此，将引用绑定到不存在的对象是没有意义的。

需要明确的是，在这里提供初始化程序是合法的，并且永远不要定义对象。但是您不能获取这样一个声明并初始化但未定义的对象的地址，也不能将其绑定到引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T20:13:47.700

啊! 您声明了 A::recordDelimiter，但从未定义它。这是在头文件中吗？如果是这样，您需要在源文件中为其添加相应的定义。

# cuda - 是否可以动态指出使用哪个 Cuda 3DSurface

> ID：14591314
> 
> 赞同：0
> 
> 时间：2013-01-29T20:08:36.377
> 
> 标签：cuda

该项目涉及使用 3D 网格（模板模拟）模拟的流体模拟。

在每一步中，我都从一个表面读取值，计算并保存到第二个表面。问题是，在每一步中，指向表面的指针都需要交换（在第一次迭代中，我想从第一个表面读取，写入到第二个，在第二次迭代中，我想从第二个表面读取，写入到第一个等等）。是否有可能以动态方式进行？现在我正在使用一些 if 子句。

例如，如果是 2D 模拟，我可以使用具有两层的 2DlayeredSurface，然后我可以指出要使用的表面，但不幸的是 3DlayeredSurface 不存在。

是否可以创建一个类型的数组，然后通过索引指向它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:55:56.450

您不能按照您描述的方式进行操作，但是对于您所谈论的少量指令，预测效果很好。绑定两个表面，然后编写 if 语句以确定要读取/写入的表面。编译器将发出谓词指令，并且只有一个处于活动状态。

类似的策略用于在此文件中引用 >2^27 个纹理元素（通过预测读取最多 4 个纹理）：[https ://github.com/ArchaeaSoftware/cudahandbook/blob/master/texturing/tex1dfetch_big.cu](https://github.com/ArchaeaSoftware/cudahandbook/blob/master/texturing/tex1dfetch_big.cu)

# jquery - .on VS .live 包含未创建的内容

> ID：14591321
> 
> 赞同：-4
> 
> 时间：2013-01-29T20:08:50.693
> 
> 标签：jquery

> **可能重复：**
> [jQuery .on 不起作用，但 .live 起作用](https://stackoverflow.com/questions/9985090/jquery-on-does-not-work-but-live-does)

我只是找不到明确的答案。

我曾经使用**JS 动态**`$('.someclass).live('click', function ... )`创建的项目，这在更新 jQuery 1.9.0 时当然不起作用（谢谢大家）。我一直在环顾四周，找不到一个好的答案。所以，这又是一个问题：

 ****对于动态创建的项目，**无需在每次创建新项目时都重新分配点击侦听器，与 .live 等效的是什么？它仍然可以与旧 jQuery 版本完美配合！

代表，开和住是不行的。到底是怎么回事 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T20:13:27.050

试试这个：

```
$(".someparent").on("click", ".someclass", function() {
    // ...
}); 
```

其中*.someparent*是*.someclass*父元素的选择器。**

# html - 如何将类添加到 ASP.NET 控件？

> ID：14591325
> 
> 赞同：5
> 
> 时间：2013-01-29T20:09:15.430
> 
> 标签：html, css, asp.net

我一直在处理某人的项目，并注意到 Visual Studio 为每个具有类属性的 ASP 标记生成一条消息。例如：

> 属性“类”不是元素“文本框”的有效属性。

如果我访问该网站，它似乎可以正常工作。生成消息的示例如下所示：

```
<asp:TextBox class="makeInline loginItem" ID="UserName" runat="server"></asp:TextBox> 
```

在网站上它变成了这样：

```
<input type="text" class="makeInline loginItem" id="Login1_UserName" name="Login1$UserName"> 
```

所以看起来 class 属性被转移到了 HTML 标记中。这很好，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T20:12:12.987

服务器控件使用`CssClass`代替`class`（大概是为了避免对 的含义产生歧义`class`）。

> 所以看起来 class 属性被转移到了 HTML 标记中。这很好还是有更好的方法来做到这一点？

未知属性将被继承。但是，虽然它在这种情况下有效，但尽可能使用控件期望的属性。ASP.Net 偶尔会更改标记以“更正”它。示例：在呈现控件时，有效的 HTML 5 输入类型属性（例如`type="number"`）被“更正”，直到发布修复程序以更正问题。

`data-*`您可以在服务器标签上放置自定义属性（例如）而无需担心。

```
<asp:TextBox runat="server" ID="txtTest" data-foo="bar" /> 
```

这不会在 Visual Studio 2012 中导致验证错误，并按预期呈现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T20:11:44.653

正确使用的属性是`CssClass`它也会在`class`生成页面时转换为 HTML 属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T20:11:24.900

使用`CssClass`而不是`class`摆脱 Visual Studio 产生的消息。但无论哪种方式，使用类也有效。

# python - python正则表达式，我应该如何在括号中找到值

> ID：14591328
> 
> 赞同：0
> 
> 时间：2013-01-29T20:09:21.637
> 
> 标签：python, regex

我正在尝试使用正则表达式搜索字符串模式

但是由于我对正则表达式很陌生，所以我想就搜索模式提出一些建议

所以，我想找到一条具有“值”的行，因为下面的值可以是数字和字母

```
Name (value) 
```

我尝试使用模式

```
re.search(r"Name \([a-zA-Z0-9]\)", line) 
```

但它似乎没有像我预期的那样找到。

我应该如何编写搜索模式？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T20:10:53.893

您的表达很好，但您的字符组缺少量词：

```
re.search(r"Name \([a-zA-Z0-9]+\)", line) 
```

意思是“`+`至少其中一个”。如果您不输入量词，则意味着仅可能出现上述字符之一。可能的量词是：

*   `+`对于一个或多个，
*   `?`至多一个和
*   `*`对于任何数量的那些
*   `{x,y}`也可以，至少表示`x`，但最多`y`表示字符

量词总是指你放在它前面的东西，它可能是单个字符或包含在`[]`.

**编辑：**正如*root*在评论中提到的，您可能想查看`\w`，这是“所有单词字符”的简短表示法。它包括所有字母和数字，以及下划线和特殊字符（如果它们是由当前语言环境特别定义的）。

# apache - htaccess 规则每次都不起作用，有时是 404

> ID：14591329
> 
> 赞同：2
> 
> 时间：2013-01-29T20:09:23.237
> 
> 标签：apache, mod-rewrite

好的，这有点奇怪，我的 htaccess 规则似乎并非每次都有效。有时它会将人们发送到 404 页面。但是，如果他们再次尝试相同的链接，它就会起作用。

这是我的规则：

```
 RewriteRule ^articles/(.+?)\.([0-9]+)/?$ /index.php?module=articles_full&aid=$2&title=$1 [N,NC,QSA]

  RewriteRule ^articles/(.+?)\.([0-9]+)/page\=([0-9]+)?$ /index.php?module=articles_full&aid=$2&title=$1&page=$3 [N,NC,QSA] 
```

任何人都可以看出这些规则有什么问题吗？它基本上将 index.php?module=articles_full&aid=123&title=title 变成 /articles/title.123

我也有这个将旧链接重定向到新链接，不知道是否有人知道它们有时是否会发生冲突？

```
 RewriteCond %{QUERY_STRING} threads/(.*)\.([0-9]+)/*

  RewriteRule index.php /articles/%1\.%2?from=oldSite [R=301,L] 
```

指向我的完整 htaccess 的链接：http: [//pastebin.com/G0AxxiHb](http://pastebin.com/G0AxxiHb)

浏览今天（30 日）的错误日志，这些都跳出来了：

```
[Wed Jan 30 09:44:30 2013] [error] [client 2.229.9.52] File does not exist: /home/gamingon/public_html/articles, referer: http://plus.url.google.com/url?sa=z&n=1359539066078&url=http%3A%2F%2Fwww.gamingonlinux.com%2Farticles%2Frolling-survival-a-new-alpha-funded-game-on-desura.1681&usg=V4xV32LxoWJ1cPOvrD_XZgftgN8. 
```

那个看起来像我在 G+ 上发布的链接，我猜是因为它在 URL 的末尾添加了“&usg=V4xV32LxoWJ1cPOvrD_XZgftgN8”？

```
[Wed Jan 30 11:34:43 2013] [error] [client 100.43.83.149] File does not exist: /home/gamingon/public_html/$10,000 to finish on Kickstarter 
```

这似乎错过了“/articles/”、id 和名称中的空格？不确定这是怎么发生的，也许有人手动输入了它？

似乎也是其中的一些：

```
[Wed Jan 30 06:32:38 2013] [error] [client 94.246.88.189] File does not exist: /home/gamingon/public_html/articles 
```

你认为也许我需要在两个 /articles/ 规则中添加一些东西来检查将东西添加到末尾的链接吗？喜欢来自 twitter、g+ 等的链接？

# java - DebugPlugin.getDefault() 中的 NPE

> ID：14591339
> 
> 赞同：2
> 
> 时间：2013-01-29T20:10:02.453
> 
> 标签：java, eclipse, eclipse-plugin, launch-configuration

我有以下代码：

```
import java.io.BufferedReader;

import java.io.FileReader;
import java.io.IOException;

import org.eclipse.core.runtime.CoreException;
import org.eclipse.debug.core.DebugPlugin;
import org.eclipse.debug.core.ILaunchConfiguration;
import org.eclipse.debug.core.ILaunchConfigurationType;
import org.eclipse.debug.core.ILaunchConfigurationWorkingCopy;
import org.eclipse.debug.core.ILaunchManager;
import org.eclipse.debug.ui.DebugUITools;

public class Main {
    public static void main(String... strings) throws IOException {
        try {
            String path = "E:\\Java\\Projects\\.metadata\\.plugins\\org.eclipse.debug.core\\.launches\\MedicineFrame.launch";

            ILaunchManager launchManager = DebugPlugin.getDefault()
                    .getLaunchManager();
            ILaunchConfigurationType type = launchManager
                    .getLaunchConfigurationType(ILaunchManager.RUN_MODE);
            ILaunchConfigurationWorkingCopy workingCopy = type.newInstance(
                    null, path);
            workingCopy.setAttribute("PATH_MY", path);
            ILaunchConfiguration configuration = workingCopy.doSave();
            DebugUITools.launch(configuration, ILaunchManager.RUN_MODE);
        } catch (CoreException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }} 
```

实际上，我只想运行绝对路径定义的文件中指定的启动配置。我收到一个 NPE，因为 DebugPlugin.getDefault() 返回 null。我该怎么办？我发现了很多类似的例子，但没有一个是关于 NPE 的，就像在我之前没有人得到它一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:23:16.493

快速查看 DebugPlugin[代码](http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.5/org.eclipse.debug/core/3.5.0/org/eclipse/debug/core/DebugPlugin.java#DebugPlugin.0fgDebugPlugin)后，我发现该`DebugPlugin#getDefault()`方法是简单的 getter 到`fgDefaultPlugin`字段，并返回默认情况下的此字段值`null`。由于您正在调用函数的`DebugPlugin#getDefault()`第一个方法，`main`因此它返回是合理的`null`，因为`DebugPlugin#setDefault()`以前没有调用过。

You can't run Eclipse from a main method like that. You need to write a plugin, and it will be accesible from inside the plugin method.

# asp.net - ASP Gridview 最大长度

> ID：14591343
> 
> 赞同：0
> 
> 时间：2013-01-29T20:10:10.910
> 
> 标签：asp.net, vb.net, gridview, boundfield

我有一个使用的 gridview `<asp:BoundField DataField="Comments" HeaderText="COMMENTS" />`，我想在填充 gridview 时只显示 Commemnt 列中的前 20 个字符。有没有办法在VB中完成这个？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:16:16.723

一种方法是`RowDataBound`在代码隐藏中使用事件：

```
Protected Sub Gridview1_RowDataBound(sender As Object, e As GridViewRowEventArgs) Handles Gridview1.RowDataBound
    Select Case e.Row.RowType
        Case DataControlRowType.DataRow
            ' assuming the comments column is the first column '
            If e.Row.Cells(0).Text.Length > 20 Then
                e.Row.Cells(0).Text = e.Row.Cells(0).Text.Substring(0, 20)
            End If
    End Select
End Sub 
```

请注意，您只能使用 以这种方式访问​​文本`BoundFields`。`TemplateFields`您需要使用来`FindControl`获取控件的参考（fe a `TextBox`）。

如果您使用 a`TemplateField`您还可以限制 aspx 标记上的文本：

```
<asp:TemplateField HeaderText="Commnents">
<ItemTemplate>
    <asp:TextBox ID="txtID"  
         MaxLength="20" runat="server" 
         Text='<%# DataBinder.Eval(Container.DataItem, "Comments") %>'>
    </asp:TextBox>
</ItemTemplate>
</asp:TemplateField> 
```

# php - 一些 php 页面上的奇怪 URL 现在带有哈希标签的后缀：#.UQglor99KSo

> ID：14591344
> 
> 赞同：-1
> 
> 时间：2013-01-29T20:10:22.087
> 
> 标签：php, security, url, malware

几天来，我注意到我网站上的某些 URL 已不再被调用：

```
website.com/pagename.php 
```

到

```
website.com/pagename.php#.UQglor99KSo 
```

每次都是完全相同的后缀/参数，我在网站文件的任何地方都找不到它的记录。

服务器上文件的权限都是755以上的，最近好像没有修改过。

任何想法这背后可能是什么？这是一次黑客攻击吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:14:23.013

出现这种情况的一个原因是使用例如 AddThis。

AddThis 使用它为您提供更详细的分析，但如果您愿意，您可以[禁用它（我总是这样做......）。](http://support.addthis.com/customer/portal/questions/346227-is-there-a-way-to-disable-hashtags)

# dart - 如何在 dart 控制台应用程序中禁用标准输入回显以输入密码

> ID：14591347
> 
> 赞同：4
> 
> 时间：2013-01-29T20:10:26.987
> 
> 标签：dart, command-line-interface, dart-io

下面的示例将读取用户的密码，但也会以纯文本形式回显，有没有办法解决这个问题？

```
Future<String> promptPassword() {
  var completer = new Completer<String>();
  var stream = new StringInputStream(stdin);
  stdout.writeString("Warning: Password will be displayed here until I find a better way to do this.\n");
  stdout.writeString("Watch your back...\n");
  stdout.writeString("GitHub password for $gituser: ");
  stream.onLine = () {
    var str = stream.readLine();
    stdin.close();
    completer.complete(str);
  };
  return completer.future;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-18T20:15:12.433

现在已经实施了。

见[Stdin.echoMode](https://api.dartlang.org/docs/channels/stable/latest/dart_io/Stdin.html#echoMode)

```
import 'dart:io';

void main() {
  print('Enter password: ');
  stdin.echoMode = false;
  var password = stdin.readLineSync();  
  // Do something with password...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T21:05:11.110

在将 tty 控件添加到 dart:io 之前，这是不可能的。与此同时，我建议：

```
stty -echo
dart ./password.dart
stty echo 
```

我在这里打开了一个错误：[https ://code.google.com/p/dart/issues/detail?id=8190](https://code.google.com/p/dart/issues/detail?id=8190)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-05T20:56:05.017

dart DCli 包提供了一个选项来执行此操作。

[https://pub.dev/packages/dcli](https://pub.dev/packages/dcli)

```
import 'package:dcli/dcli.dart';

void main() {
  var password = ask('password', hidden: true);
} 
```

# android - Android 应用程序伪造关机，点击所有输入

> ID：14591350
> 
> 赞同：-4
> 
> 时间：2013-01-29T20:10:30.427
> 
> 标签：android, powermanager

我需要创建一个应用程序，其中，当应用程序运行时，它必须假装关机，电话必须看起来没有运行（或已关闭），但应用程序必须在后台运行。

应用程序必须能够捕获所有输入，并且在特定的组合键上，应用程序必须显示其设置菜单。

我不确定这是否可以实现。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:30:57.313

欢迎您下载 Android 源代码，对其进行修改以包含此类恶意软件，将其编译到您自己的 ROM 模块中，然后将该 ROM 模块安装在您能够安装的任何设备上。

# javascript - 使用Javascript范围之外的函数更新函数的内部属性？

> ID：14591355
> 
> 赞同：1
> 
> 时间：2013-01-29T20:10:43.353
> 
> 标签：javascript

超级简单的抽象示例，但我想知道是否有一种方法可以`updateAge()`从内部调用`doMainStuff`来更新`person`对象的`age`属性？这是 call() 或 apply() 发挥作用的地方吗？

```
function doMainStuff() {
    var person = {
        name: 'Bob',
        age: 55
    }

    updateAge();
}

function updateAge(){
    person.age = 24;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:11:18.460

您必须将`person`对象传递给您的`updateAge`函数：

```
function doMainStuff () {
    var person = {
        name: 'Bob',
        age: 55
    };

    updateAge(person);
}

function updateAge (person) {
    person.age = 24;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:13:33.070

除了 Joseph Silber 的回答：在 JS 中，所有对象都是通过*引用*传递的：如果你将一个对象作为函数参数放入，你实际上是在传递*对同一个对象的引用*。这意味着如果函数更改了参数对象的属性，在更改它的函数调用返回后，这些属性仍然保持更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T20:21:33.800

如果您在 JavaScript 中定义适当的类，则可以使用它们定义的方法。

```
function Person(name, age) {
    var privateVariable = "special";
    this.name = name;
    this.age = age;
}
Person.prototype.updateAge = function() {
    this.age = 24;
}

function doStuff() {
    var person = new Person("Bob", 55);
    person.updateAge(); // will work
    person.age = 24; // will also work
    typeof(person.privateVariable) == 'undefined'; // it's only defined within the Person function/class
} 
```

# linux - 如何将 Notepadd ++ 中的代码复制到 vi 编辑器中的新文件中？

> ID：14591356
> 
> 赞同：-1
> 
> 时间：2013-01-29T20:10:49.510
> 
> 标签：linux, editor, notepad++, vi, redhat

我正在 vi 编辑器中创建一个新文件，该文件将包含整个 Jquery 库代码。如何将整个库从 Notepad ++ 复制到笔记本电脑上的 vi 编辑器？我在 vi 中创建了这个名为 jquery-1.8.3.js 的新文件，我只需要将整个代码从记事本复制到该文件中.. 非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:12:13.620

用 Notepad++ 保存文件，用 vi 加载文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:14:09.913

您可以使用以下方法之一从剪贴板粘贴到 vi 中：

`"``+``p`

`"``*``p`

有时你必须使用*register +*，有时你必须使用*register **。

例如：如果您使用 gVim 或 MacVim，则使用**+**。

如果您在 shell 中使用 vim，请使用*****。

* * *

正如其他人指出的那样，使用 vim 打开文件会容易得多！

# iphone - 使用自动布局子类化 MKAnnotationView

> ID：14591366
> 
> 赞同：1
> 
> 时间：2013-01-29T20:11:35.173
> 
> 标签：iphone, ios, mapkit, mkannotationview, autolayout

我喜欢 iOS 6 中新的自动布局功能，但是在将它与我的 MKAnnotationView 子类结合使用时遇到了一些麻烦。

我在初始化方法中禁用了自动调整掩码转换。

```
self.translatesAutoresizingMaskIntoConstraints = NO; 
```

但是当我加载使用我的子类注释的 MKMapView 时，该应用程序会引发 NSInternalInconsistencyException。

```
*** Assertion failure in -[ENMapAnnotationView layoutSublayersOfLayer:], /SourceCache/UIKit_Sim/UIKit-2372/UIView.m:5776
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Auto Layout still required after executing -layoutSubviews. ENMapAnnotationView's implementation of -layoutSubviews needs to call super.' 
```

我没有覆盖 -layoutSubviews 所以对我来说这看起来苹果的 MKAnnotationView 实现还没有准备好进行自动布局。**是否有一些聪明的方法可以解决 MKAnnotationView 中缺乏自动布局支持的问题，以便我可以在我的子类中使用自动布局？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-01T14:58:00.620

注释视图的自动布局在 iOS SDK 8 之前运行良好。在 iOS SDK 8 中，我看到具有动态约束的视图的行为非常奇怪，它们在地图上移动，有时甚至对齐左上角。

解决方案是`setTranslatesAutoresizingMaskIntoConstraints:YES`和

```
[annotationView setBounds:CGRectMake(0, 0, width, height)]; 
```

并使用从子视图计算的宽度和高度。然后至少您可以对子视图使用约束。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-23T19:12:49.000

不要禁用 ENMapAnnotationView 的 translatesAutoresizingMaskIntoConstraints（否则您会错过 Pin 图）。并确保启用要添加到 ENMapAnnotationView 的 translatesAutoresizingMaskIntoConstraints 的视图！！！

```
photoViewAddToAnnotationView.translatesAutoresizingMaskIntoConstraints = YES; 
```

而已！我们不需要关闭自动布局（关闭自动布局也可以解决问题'

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T20:59:55.863

可能您必须在 ENMapAnnotaitonView 类中实现 - (void)layoutSubviews 方法。

# java - Box2D - 身体的位置不正确

> ID：14591374
> 
> 赞同：0
> 
> 时间：2013-01-29T20:11:49.393
> 
> 标签：java, position, jbox2d

我有 640x480 的窗口。我使用 4 个静态物体作为窗口边缘，所以没有任何东西不能移动到窗口边缘。这是4个物体之一，30个像素代表一米，所有的物体都是用下面的方法编程的，但右边是空间。

```
BodyDef leftDef = new BodyDef();
leftDef.type = BodyType.STATIC;
leftDef.position.set(0, 480/30);
PolygonShape leftShape = new PolygonShape();
leftShape.setAsBox(0, 1000);        
Body left = world.createBody(leftDef);
FixtureDef leftFixture = new FixtureDef();
leftFixture.density = 1;
leftFixture.restitution = 0f;
leftFixture.shape = leftShape;
left.createFixture(leftFixture);

glOrtho(0, 640, 0, 480, 1, -1); // glOrtho setting 
```

抱歉，我无法发布图片，那是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:26:53.197

我忘了在这一行加“f”

```
leftDef.position.set(0, 480/30); 
```

所以代码必须是

```
leftDef.position.set(0, 480/30f); 
```

现在一切正常

# xcode - 在 Xcode Run Script bin/sh 中使用 sed 查找和替换多行

> ID：14591375
> 
> 赞同：3
> 
> 时间：2013-01-29T20:11:51.007
> 
> 标签：xcode, sed, replace, multiline, carriage-return

我有一个 Cocos2D tmx 文件，它非常像 xml，包括回车和空格。

**我的要求是：**

在 Resources/maps_sideScrolling/ 中的每个 tmx 文件中

找到和之间的一切

```
<tileset firstgid="1" 
```

和第一次发生

```
<layer name="background" 
```

并替换为 Resources/maps_sideScrolling/tileProperties.txt 的内容

我试过以下没有结果。该问题是由于要搜索的字符串有多行引起的。

```
sed -i '' 's{<tileset firstgid="1.*<layer name="background"{Resources/maps_sideScrolling/tileProperties.txt{g' Resources/maps_sideScrolling/*.tmx; 
```

这是我要编辑的 tmx 片段的 pastebin：http: [//pastebin.com/wr39zj1r](http://pastebin.com/wr39zj1r)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:35:03.160

```
#!/usr/bin/env bash

sed -rni '/<tileset\s+firstgid="1"/ {
s/(\s*<tileset\s+firstgid="1").*/\1/p
r /home/username/ololofile
:loop
n
s/.*<layer name="background".*/&/p
t
b loop
}' ~/files/to/replace/* 
```

带选项的 sed`-n`将不输出任何内容，直到 print ( `p`) 被强制或有一些文件读取。

当我尝试运行带有评论的脚本时突然出现错误，因此删除了我的帖子，但后来发现要使用命令读取的文件名和评论之间的*空格*`r`被视为文件名的延续，所以我删除了评论并将描述现在逐行执行 sed 的脚本命令：

1.  寻找一个模式开始；
2.  在第二行打印出找到的行的有用部分；
3.  然后从文件中读取；
4.  下一行包含标签，因为现在我们逐行读取和搜索；
5.  与找到并打印的结束模式匹配的行；
6.  因为我们只需要第一个匹配的结束模式，如果替换成功，则转到脚本的末尾；
7.  如果没有执行替换，则没有跳转到末尾并跳转到`loop`标签，新行将尝试加载到模式空间中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:59:18.313

Geek 使用 python 对 TMX 地图文件做这种事情。只是一个可以考虑的选项。

像这样（但迭代目录等中的所有文件），并将其保存为 .sh 文件：

```
#!/usr/bin/env python

import re

#you'd open a file and read in the tile properties thing
fakeTileProperties = "<tileproperties>1</tileproperties>\r"

f = open( "file1.tmx", "rU")
fo = open( "outputfile.tmx", "wc");

#read source file
s = f.read();

#find what you need
m = re.search("([\W\w]*)(<tileset firstgid=\"1\"[\W\w]*)(<layer name=\"background\"[\W\w]*)", s )

#write out to source file
fo.write(m.group(1))
fo.write(fakeTileProperties)
fo.write(m.group(3));

f.close();
fo.close();

print "done!" 
```

代码在 tile set firstgid="1" 之前处理内容，以防万一。

要在 Xcode 4 中使用这样的脚本，请执行以下操作：

*   将您的脚本放在项目文件旁边的文件中，为其命名`myscript.py`
*   用于`chmod +x myscript.py`使脚本文件可执行。
*   在您的 Xcode 项目中选择项目和目标以及“构建阶段”选项卡，然后创建一个新的“运行脚本”构建阶段。
*   保留 /bin/sh 的默认 shell
*   将以下内容放入脚本字段： `$(SOURCE_ROOT)/myscript.py`

然后，当您进行构建时，您应该会看到 python 脚本被执行。你可以做一个非常简单的测试python文件来测试它（我刚刚做过）：

```
#!/usr/bin/env python

print 'hello from python!' 
```

请注意，运行脚本设置“在构建日志中显示环境变量”中的设置对于获取诸如此类的环境变量`SOURCE_ROOT`以定位您的文件非常有帮助。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T22:32:03.323

```
$ cat file1
abc
def
ghi

$ cat file2
pre
stuff
<tileset firstgid="1"
foo
bar
<layer name="background"
post
stuff

$ awk '
   NR==FNR { s=s ORS $0; next }
   /<tileset firstgid="1"/    { print $0 s; f=1 }
   /<layer name="background"/ { f=0 }
   !f
' file1 file2
pre
stuff
<tileset firstgid="1"
abc
def
ghi
<layer name="background"
post
stuff 
```

请注意，上面根据您想要的分隔符将 file2 中的 foo\nbar 替换为 file1 的内容。如果您也想删除分隔线，这是一个微不足道的调整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T14:38:02.237

这是使用`sed`. 像这样运行：

```
sed -f script.sed Resources/maps_sideScrolling/*.tmx 
```

内容`script.sed`：

```
/<tileset firstgid="1"/ {

    s/\(<tileset firstgid="1"\).*/\1/

    r Resources/maps_sideScrolling/tileProperties.txt

    p

    :a
    N
    s/.*\(<layer name="background".*\)/\1/
    t
    ba
} 
```

请让我知道情况如何。我目前无法使用机器，`BSD sed`因此无法正确测试它。但是，我的直觉是它应该对你有用。

# linux - 如何将 Linux 内核交叉编译到 MIPS little endian 主机？

> ID：14591377
> 
> 赞同：1
> 
> 时间：2013-01-29T20:11:54.120
> 
> 标签：linux, linux-kernel, mips, cross-compiling

有问题的内核是**2.6.18**。如果我打电话

```
make ARCH=mips CROSS_COMPILE=mipsel-linux- menuconfig 
```

菜单中只有构建大端内核的选项。如果我使用**ARCH=mipsel**，它会抱怨没有**arch/mipsel**目录。

这是怎么做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:00:14.143

这取决于第一个菜单项`Machine selection`。您必须首先选择一台支持小端架构的机器。例如`Broadcom BCM4747XX`或`Alchemy processor`。

然后您转到下一个菜单条目，如果仅支持其中一个`Endianness selection`，您可以在其中选择`Little endian`和或预选位置。`Big endian`

# javascript - 创建一个从特定页面获取数据的函数

> ID：14591381
> 
> 赞同：0
> 
> 时间：2013-01-29T20:12:03.043
> 
> 标签：javascript, jquery, html

我整天都遇到这个问题，找不到解决方案。我需要创建一个从特定页面获取数据的函数。页面上的 id 需要传递给函数。当我第一次尝试`alert(value)`时，它可以工作，但是下次我将它插入 .ajax url 时，它就不起作用了。可能是什么问题？

```
<script> 
    function func(value){
        alert(value);
            //WORKS FINE, alertbox with content "1" appears. 

            $.ajax(
            {
                type:'GET',
                url:'<?=site_url("page/view/" + value);?>',
                //DOES NOT WORK, when i enter "page/view/1" it works. When i enter "page/view/ + value" it does not work.  
                success: function(data){
                    alert(data);
                }
            }
           );
        }

    $(document).ready(function() {});
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:13:38.563

您正在尝试在 php 代码中添加 js 变量，将其从 php 标记中删除

```
url:'<?=site_url("page/view/");?>' + value, 
```

# javascript - `exports` 是如何用于初始化 Backbone 的？

> ID：14591384
> 
> 赞同：0
> 
> 时间：2013-01-29T20:12:17.947
> 
> 标签：javascript, backbone.js

```
 // Save a reference to the global object (`window` in the browser, `exports`
  // on the server).
  var root = this; 
```

什么是出口？我可以理解将 root.Backbone 设置为对象文字，因为现在可以向它添加属性。

但是，上面源代码中的注释暗示`this`指向浏览器中的窗口和服务器上的导出？

这是真的？

我问的原因是因为这里的代码：

```
 var Backbone;
  if (typeof exports !== 'undefined') {
    Backbone = exports;
  } else {
    Backbone = root.Backbone = {};
  } 
```

你为什么要定义命名空间之外的所有模块（导出），违背了包含库的闭包的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:15:00.927

`exports`是[CommonJS](http://www.commonjs.org/)模块格式的导出对象的名称，主要由[node.js](http://nodejs.org/)使用。

在 CommonJS 中，每个 javascript 源文件都是一个模块，您分配的任何内容都`exports`将是该文件的“返回值”。所以 Backbone 源代码中的行：

```
Backbone = exports; 
```

说：“将 Backbone 定义为这个模块的导出对象。” 稍后，当它们将属性附加`Backbone.Model`到`Backbone`根对象时，它们会附加到导出值。

# ios - IOS捕获所有崩溃场景

> ID：14591385
> 
> 赞同：1
> 
> 时间：2013-01-29T20:12:19.867
> 
> 标签：ios, crash

如何在我的应用程序中放置一些异常处理代码，以便无论发生什么奇怪的崩溃，应用程序都会检测到它并执行诸如重新启动应用程序之类的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:17:39.427

这是不可能的，因为大多数崩溃是由于某些内存故障或您的应用程序无法恢复的其他原因而发生的。您也不能告诉 iOS 重新启动您的应用程序。

显然，最好的办法是防止崩溃一起发生。有一些有用的工具可以为您收集崩溃报告，例如[Crashlytics](http://try.crashlytics.com)或[Hockey](http://hockeyapp.net)。[本文](http://www.raywenderlich.com/23704/demystifying-ios-application-crash-logs)将帮助您更好地理解这些日志。

# core-data - Core Data 不会在 Documents 中创建 DataStore.sqlite

> ID：14591393
> 
> 赞同：0
> 
> 时间：2013-01-29T20:12:54.697
> 
> 标签：core-data, ios-simulator, xcode4.5

我希望 Core Data 在我的 Mac 的 Documents 目录中创建一个 DataStore.sqlite DB，但由于某种原因，它没有。为什么？

以下是 AppDelegate.h 和 .m 中的代码

AppDelegate.h

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@end 
```

AppDelegate.m

```
#import "AppDelegate.h"
#import <CoreData/CoreData.h>
#import "CurrentLocationViewController.h"

@interface AppDelegate()

@property (nonatomic, strong) NSManagedObjectContext *managedObjectContext;
@property (nonatomic, strong) NSManagedObjectModel *managedObjectModel;
@property (nonatomic, strong) NSPersistentStoreCoordinator *persistentStoreCoordinator;

@end

@implementation AppDelegate

@synthesize managedObjectContext, managedObjectModel, persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;

    UINavigationController *navigationController = (UINavigationController *)[[tabBarController viewControllers]
    objectAtIndex:0];
    CurrentLocationViewController *currentLocationViewController = (CurrentLocationViewController *)
    [[navigationController viewControllers] objectAtIndex:0];
    currentLocationViewController.managedObjectContext = self.managedObjectContext;

    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

#pragma mark - Core Data

- (NSManagedObjectModel *)managedObjectModel
{
    if (managedObjectModel == nil) {
        NSString *modelPath = [[NSBundle mainBundle] pathForResource:@"DataModel" ofType:@"momd"];
        NSURL *modelURL = [NSURL fileURLWithPath:modelPath];
        managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    }
    return managedObjectModel;
}

- (NSString *)documentsDirectory
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return documentsDirectory;
}

- (NSString *)dataStorePath
{
    return [[self documentsDirectory] stringByAppendingPathComponent:@"DataStore.sqlite"];
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (persistentStoreCoordinator == nil) {
        NSURL *storeURL = [NSURL fileURLWithPath:[self dataStorePath]];

        persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:self.managedObjectModel];

        NSError *error;
        if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
            NSLog(@"Error adding persistent store %@, %@", error, [error userInfo]);
            abort();
        }
    }
    return persistentStoreCoordinator;
}

- (NSManagedObjectContext *)managedObjectContext
{
    if (managedObjectContext == nil) {
        NSPersistentStoreCoordinator *coordinator = self.persistentStoreCoordinator;
        if (coordinator != nil) {
            managedObjectContext = [[NSManagedObjectContext alloc] init];
            [managedObjectContext setPersistentStoreCoordinator:coordinator];
        }
    }
    return managedObjectContext;
}

@end 
```

# .net - 登录后关闭

> ID：14591394
> 
> 赞同：0
> 
> 时间：2013-01-29T20:13:04.920
> 
> 标签：.net, vb.net

我有这个 VB .NET 代码。它用于登录：

```
If myData.HasRows = 0 Then
        MsgBox("Invalid License/Password!")
    Else
        MainForm.Show()
        Me.Hide()
    End If 
```

问题是隐藏。因为当我使用 MainForm 退出窗口按钮关闭程序时，不要关闭。

如果我把它`Me.Close()`关闭所有程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:17:14.827

转到项目属性并在**应用程序**选项卡下将**关闭模式**设置为**最后一个表单关闭时**，您可以`Me.Close()`毫无问题地使用

![在此处输入图像描述](../Images/046b7922094b66fa7a31555f88e17e8e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:19:19.063

您可以选择关闭时触发`Me.Close()`的`FormClosing`事件`MainForm`。这样，当`MainForm`关闭时它也会触发`Me.Close()`。

# ios - 单例核心数据方法

> ID：14591395
> 
> 赞同：0
> 
> 时间：2013-01-29T20:13:05.983
> 
> 标签：ios, uitableview, core-data, nsfetchedresultscontroller

我正在尝试使用单例来核心数据。这是核心数据堆栈：

```
#pragma mark - Core Data stack
- (NSManagedObjectContext *)managedObjectContext {
if (_managedObjectContext != nil) {
    return _managedObjectContext;
}

NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
if (coordinator != nil) {
    _managedObjectContext = [[NSManagedObjectContext alloc] init];
    [_managedObjectContext setPersistentStoreCoordinator:coordinator];
}
return _managedObjectContext;
}
- (NSManagedObjectModel *)managedObjectModel {
if (_managedObjectModel != nil) {
    return _managedObjectModel;
}
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Model" withExtension:@"momd"];
_managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
return _managedObjectModel;
}
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
if (_persistentStoreCoordinator != nil) {
    return _persistentStoreCoordinator;
}

NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"MyApp.sqlite"];

NSError *error = nil;
_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

return _persistentStoreCoordinator;
}
- (NSURL *)applicationDocumentsDirectory {
return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
} 
```

这是我用来保存实体的方法，它有效

```
-(void)addFund {

Fund *fund = [NSEntityDescription insertNewObjectForEntityForName:@"Fund" inManagedObjectContext:self.managedObjectContext];

 fund.name = @"Test Name";

 [self.managedObjectContext save:nil];  // write to database
} 
```

当我需要在控制器的表格中显示项目时，问题就来了。我创建了一个返回 NSFetchedResultsController 的方法。可能这就是错误。

```
 -(NSFetchedResultsController*)loadFunds {
//Core data request
NSError *error;
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Fund"
                                          inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

fetchRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]];
 NSFetchedResultsController *result = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil
                                               cacheName:@"Root"];
return result;
} 
```

但是 tableview 不返回任何东西（Null）：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

NSInteger numberOfSections = [[[[Singleton sharedSingleton] loadFunds] sections] count];

if (numberOfSections == 0) {
    numberOfSections = 1;
}

return numberOfSections;

}

-(NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section {
id  sectionInfo = [[[Singleton sharedSingleton].loadFunds sections] objectAtIndex:section];

    return [sectionInfo numberOfObjects];

}
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Category Cell";
....
// Configure the cell...
Fund *fund = [[Singleton sharedSingleton].loadFunds objectAtIndexPath:indexPath];
cell.titleLabel.text = fund.name;
....
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:43:50.937

您需要使用以下方法获取数据：

```
NSError *error;
[self.fetchedResultsController performFetch: &error]; 
```

然后重新加载tableview如下：

```
[self.tableView reloadData]; 
```

# php - Highslide ajax 使用表单提交

> ID：14591396
> 
> 赞同：0
> 
> 时间：2013-01-29T20:13:07.097
> 
> 标签：php, highslide

我正在使用带有 Highslide 和 ajax 的表单调用文件 editphotos.php 像这样

```
<a href=\"editphotos.php?id=$imageid_\" onclick=\"return hs.htmlExpand(this, { objectType: 'ajax'} )\" title='edit picture: $filename_'>. 
```

现在我想要实现的是，在我单击表单中的更新或删除按钮后，我希望它加载如下网址：

```
index.php?id=1&deleted=1&refresh=1 
```

现在它只是关闭了 highslide ajax 窗口。有没有办法做到这一点？

问候，托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:51:23.727

您无法在 Highslide ajax 弹出窗口中打开第二个 url。`objectType: 'iframe'`如果你想这样做，你需要使用。

# encryption - 在托管源代码控制中安全地存储秘密

> ID：14591397
> 
> 赞同：1
> 
> 时间：2013-01-29T20:13:09.100
> 
> 标签：encryption, version-control, dvcs

我们公司最近在本地源代码控制系统上采用了由 BitBucket 托管的私有存储库。除了源代码之外，每个存储库都有构建、配置和部署所需的所有组件（脚本等）。这在大多数情况下都很好用，但我对如何处理通常伴随我的构建和部署脚本的敏感密码、ftp 配置等感到困惑。

请参阅[此类似的帖子](https://stackoverflow.com/questions/8839141/is-it-considered-good-practice-to-store-passwords-in-a-private-github-repository)，概述这些问题。

就我而言，xml 配置代表用于解析它们的代码，因此需要对它们进行版本控制（无论如何是模式）。

显然，将机密存储在本地以外的任何东西上都会增加您的风险，但是有什么替代方案呢？将它们加密存储？在构建过程中使用花哨的配置部分替换，从外部系统输入配置值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:56:04.463

**吉特**

双向 KEYWORD<->CODE 替换的涂抹/清洁过滤器

**水银**

MQ-patch（本地），在本地工作目录中恢复敏感数据，在推送和发布的 repo 中丢失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:36:04.833

您可以在本地存储包含敏感数据的配置文件。您应该签署此文件，其中包含私钥或密钥。验证签名的公钥应该存储在代码中。现在，您将加密的版本化配置存储在源存储库中。只有当应用程序在指定位置找到签名的解密密钥时，才能读取加密的配置。如果它找不到它们，它会退回到普通的默认值进行测试。如果您添加此附加技巧，请不要忘记添加您正在使用的配置的日志记录。您可能还想对配置文件进行签名或执行 MAC 计算。

这提供了多少安全性取决于系统的其余部分，但您可以在本地保留相对静态的数据，并且仍然将配置数据放在版本控制系统中。请注意，许多版本控制系统都喜欢文本，因此您可能希望对加密的配置文件进行 base64 编码，以确保这一点。

当然，这只是众多方案之一。

# php - 无法使用 TWIG 访问嵌套对象属性

> ID：14591399
> 
> 赞同：6
> 
> 时间：2013-01-29T20:13:11.877
> 
> 标签：php, symfony, nested, twig

**Tl;DR** Twig 不会让我深入到嵌套对象中。

我有这个 json_decoded 对象的集合，其中有一个嵌套对象。尝试输出嵌套对象的属性时，出现如下错误：

> “”的项目“文本”不存在

当我尝试转储嵌套对象时，我可以看到它很好......但我无法访问它的任何属性。这是“整个”父对象的转储

```
Using this in my loop
{% for item in allFields %}

    {{ dump(item) }}

{% endfor %} 
```

![完全转储](../Images/d2a36c7c45f1543219916313c4377540.png)

这是嵌套标签对象的转储，它在我的循环中使用 {{dump(item.label)}}

```
Using this in my loop
{% for item in allFields %}

    {{ dump(item.label) }}

{% endfor %} 
```

![标签转储](../Images/a8c5262f9f08ccfe40ade9d5c1ee88b5.png)

我正在尝试通过使用 twig for 循环来获取标签类的文本属性（和其他属性），如下所示：

```
{% for item in allFields %}

    {{ item.label.text }}

{% endfor %} 
```

正是在这里我得到了错误

> “”的项目“文本”不存在

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T22:59:08.747

这很奇怪。但是有一个：有一次我`EntityManager`因为非常复杂的水合查询而内存不足时发生了这种情况。我在想数据的某些部分在这里变得很多，你会得到这个错误。

`allFields`那么，您在此列表中有多少项？

为了解决这个问题，我建议你这样做：

```
{% for item in allFields %}

    {{ item.label is null or item.label == "" ? "***EMPTY-LABEL***" : item.label.text }}

{% endfor %} 
```

# ios - iOS SDWebImage NSURLErrorDomain 甚至在联系服务器之前出现错误 406，为什么？

> ID：14591409
> 
> 赞同：2
> 
> 时间：2013-01-29T20:13:46.113
> 
> 标签：ios, web-services, url, sdwebimage

我写了一个 WS，它提供的其中一件事是头像（上传和服务器）。唯一的问题是，每当我尝试使用 SDWebImage (UIButton+SDWebImage) 访问一个时，我的完成处理程序中都会出现上述错误。完整的错误是： (Error Domain=NSURLErrorDomain Code=406 "The operation could not be completed. (NSURLErrorDomain error 406.)" ) 奇怪的是服务器没有被触及（登录验证这个）！任何想法可能导致此问题以及如何解决？

PS如果我NSLog URL，然后将其复制并粘贴到浏览器中，它可以完美运行，所以它与SDWebImage或iOS有关。

**编辑**有问题的代码：

```
[btn setBackgroundImageWithURL:url forState:UIControlStateNormal placeholderImage:[UIImage imageNamed:@"user-empty.png"] completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType) {
                    if (error) {
                        NSLog(@"error loading image:%@",error);
                        return;
                    }
                    NSLog(@"image should be loaded");
                    dispatch_async(dispatch_get_main_queue(), ^{
                        [btn setBackgroundImage:image forState:UIControlStateHighlighted];
                    });
                }]; 
```

至于网址我宁愿不分享，因为我们目前没有域名，我不想给出我客户服务器的 ip……我相信你明白，但这里是url 减去正确的 ip（请注意，我必须添加空格才能发布编辑，它们不在实际 url 中）：http://192 .168 .1 .21/uploads/51078f979c966bde0b000009/avatar.png

会不会是我的 WS 的问题？关于标题的东西还是什么？我知道它会发回“image/png”的内容类型，如果这有帮助的话，就像我说它在浏览器中完美运行一样。难道是因为它是一个ip而不是一个域名？

**更新**我们已经设置了域名，但它仍然无法正常工作，所以这里有一个可以在浏览器中使用的链接，但不适用于 SDWebImage 或 AFNetworking：http: [//communication.notitlabs.co/uploads/511db303367885c248000015/avatar.png](http://communication.notitlabs.co/uploads/511db303367885c248000015/avatar.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T19:10:45.950

如果您确实遇到 HTTP 错误 406，[请在此处阅读](http://www.checkupdown.com/status/E406.html)- 听起来像是 HTTP 标头的问题。

不过，可以肯定的是，您需要查看 NSError 对象的`code`属性并将其与[Foundations Constants Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html)中的以下错误代码之一匹配：

```
 NSURLErrorUnknown = -1,
   NSURLErrorCancelled = -999,
   NSURLErrorBadURL = -1000,
   NSURLErrorTimedOut = -1001,
   NSURLErrorUnsupportedURL = -1002,
   NSURLErrorCannotFindHost = -1003,
   NSURLErrorCannotConnectToHost = -1004,
   NSURLErrorDataLengthExceedsMaximum = -1103,
   NSURLErrorNetworkConnectionLost = -1005,
   NSURLErrorDNSLookupFailed = -1006,
   NSURLErrorHTTPTooManyRedirects = -1007,
   NSURLErrorResourceUnavailable = -1008,
   NSURLErrorNotConnectedToInternet = -1009,
   NSURLErrorRedirectToNonExistentLocation = -1010,
   NSURLErrorBadServerResponse = -1011,
   NSURLErrorUserCancelledAuthentication = -1012,
   NSURLErrorUserAuthenticationRequired = -1013,
   NSURLErrorZeroByteResource = -1014,
   NSURLErrorCannotDecodeRawData = -1015,
   NSURLErrorCannotDecodeContentData = -1016,
   NSURLErrorCannotParseResponse = -1017,
   NSURLErrorInternationalRoamingOff = -1018,
   NSURLErrorCallIsActive = -1019,
   NSURLErrorDataNotAllowed = -1020,
   NSURLErrorRequestBodyStreamExhausted = -1021,
   NSURLErrorFileDoesNotExist = -1100,
   NSURLErrorFileIsDirectory = -1101,
   NSURLErrorNoPermissionsToReadFile = -1102,
   NSURLErrorSecureConnectionFailed = -1200,
   NSURLErrorServerCertificateHasBadDate = -1201,
   NSURLErrorServerCertificateUntrusted = -1202,
   NSURLErrorServerCertificateHasUnknownRoot = -1203,
   NSURLErrorServerCertificateNotYetValid = -1204,
   NSURLErrorClientCertificateRejected = -1205,
   NSURLErrorClientCertificateRequired = -1206,
   NSURLErrorCannotLoadFromNetwork = -2000,
   NSURLErrorCannotCreateFile = -3000,
   NSURLErrorCannotOpenFile = -3001,
   NSURLErrorCannotCloseFile = -3002,
   NSURLErrorCannotWriteToFile = -3003,
   NSURLErrorCannotRemoveFile = -3004,
   NSURLErrorCannotMoveFile = -3005,
   NSURLErrorDownloadDecodingFailedMidStream = -3006,
   NSURLErrorDownloadDecodingFailedToComplete = -3007 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-29T00:53:08.517

只需在等之前调用此代码`.sd_setImage`：

```
SDWebImageDownloader.shared().setValue("text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8", forHTTPHeaderField: "Accept") 
```

不能确定，但​​这看起来像 SDWebImage 中的错误？这有点奇怪，因为相同的代码适用于一个域/路径，但不适用于另一个......

# dependency-injection - 何时使用 PerThreadLifetimeManager？

> ID：14591422
> 
> 赞同：12
> 
> 时间：2013-01-29T20:14:20.767
> 
> 标签：dependency-injection, unity-container, repository-pattern, unit-of-work, object-lifetime

我正在按照下面链接的示例设置统一以使用我的服务层。我的项目设置与本文中的项目非常相似，除了`PerThreadLifetimeManager`注册服务依赖项时使用的确切原因之外，我了解所有内容。请记住，我也在使用我的服务层中使用的通用存储库和工作单元。大多数统一示例使用默认（瞬态）生命周期管理器，并且由于我的设置类似于下面的设置，我想知道为什么我应该使用`PerThreadLifeimeManager`? 我正在为我当前的表示层使用一个 ASP.NET Web 表单项目，如果这有任何改变的话。

```
container.RegisterType<ICatalogService, CatalogService>(
    new PerThreadLifetimeManager()) 
```

[在 asp.net MVC 3 中使用 EF 代码优先依赖注入的存储库模式][1] [1]：http://www.dotnetage.com/publishing/home/2011/07/05/6883/the-repository-模式-with-ef-code-first-dependeny-injection-in-asp-net-mvc3.html

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-29T21:14:16.837

Per Thread Lifetime 是一种非常危险的生活方式，一般来说你*不*应该在你的应用程序中使用它，尤其是 Web 应用程序。

这种生活方式应该被认为是危险的，因为很难预测线程的实际寿命是多少。当您使用创建和启动线程`new Thread().Start()`时，您将获得一个新的线程静态内存块，这意味着容器将为您创建一个新的每线程实例。但是，当使用从线程池启动线程`ThreadPool.QueueUserWorkItem`时，您可能会从池中获得一个现有线程。在 ASP.NET 中运行时也是如此。ASP.NET 将线程池化以提高性能。

这意味着线程几乎总是比 Web 请求更长寿。另一方面，ASP.NET 可以异步运行请求，这意味着 Web 请求可以在不同的线程中完成。在使用 Per Thread 生活方式时，这是一个问题。当然，当您开始使用 async/await 时，这种效果会被放大。

这是一个问题，因为您通常会`Resolve<T>`在请求开始时调用一次。这将加载完整的对象图，包括您在 Per Thread 生活方式中注册的服务。当 ASP.NET 在不同的线程完成请求时，这意味着解析的对象图移动到这个新线程，包括所有 Per Thread 注册实例。

由于这些实例注册为 Per Thread，因此它们可能不适合在另一个线程中使用。它们几乎肯定不是线程安全的（否则它们将被注册为单例）。由于最初启动请求的第一个线程已经可以自由接收新请求，因此您可能会遇到两个线程同时访问这些 Per Thread 实例的情况。这将导致难以诊断和发现的竞争条件和错误。

所以总的来说，使用 Per Thread 是个坏主意。而是使用具有明确范围（隐式或明确定义的开始和结束）的生活方式。大多数 DI 框架实现的 Per Web Request 生活方式通常是隐式范围的（您不必自己结束它）。

### 具体到你的问题

更糟糕的是，您引用的博客文章包含配置错误。`ICatalogService`是用*Per Thread*生活方式定义的。但是，此服务依赖于`IDALContext`定义为*Transient*的服务。由于对`IDALContext`实例的引用存储为内部的私有字段`CatalogService`，这意味着与`DALContext`一样长的生命`ICatalogService`。这是一个问题，因为`IDALContext`它被定义为*Transient*并且可能不是线程安全的。

### 生活方式的一般规则

一般规则是让组件只依赖于具有相同或更长生命周期的服务。所以瞬态可以依赖于单例，但不能反过来。

由于 Per Thread 注册的组件通常会存在很长时间，因此它通常只能安全地依赖于其他 Per Thread 或 Singleton 实例。而且由于 ASP.NET 可以将单个请求拆分为多个线程，因此在 ASP.NET 应用程序（MVC、Web 窗体，尤其是 Web API）的上下文中使用 Per Thread 是不安全的。

# inno-setup - 如何使用 ISSkin 库将皮肤应用到 Inno Setup 卸载程序？

> ID：14591424
> 
> 赞同：9
> 
> 时间：2013-01-29T20:14:25.807
> 
> 标签：inno-setup

我知道，如何将带有[ISSkin 附加组件](http://isskin.codejock.com/)的皮肤应用到 Inno Setup 的安装程序部分，但我不知道如何对 Inno Setup 卸载程序执行相同的操作。

如何将带有[ISSkin 附加组件](http://isskin.codejock.com/)的皮肤也应用到卸载程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T01:54:19.607

除非您的用户运行卸载程序，否则您必须将库与皮肤文件一起提取`ISSkin.dll`到某个目录并保存它。那是因为卸载程序是由安装程序生成的应用程序，因此它们只是不同（例如卸载程序不包含可以提取的文件）。

您还需要考虑到，如果您希望对整个卸载过程进行蒙皮，则需要`ISSkin.dll`在卸载过程的最后卸载库，这将需要您删除库手动皮肤文件。为此，我强烈建议您使用与应用程序不同的文件夹，以允许卸载程序正确删除应用程序，其余的由您自己完成。这是一个脚本示例，用于此本地应用程序数据文件夹：

您也可以遵循[此代码的注释版本](https://stackoverflow.com/revisions/14595416/2)。

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
OutputDir=userdocs:Inno Setup Examples Output

#define SetupSkinPath "{localappdata}\SetupSkin"

[Files]
Source: ISSkinU.dll; DestDir: {#SetupSkinPath}; Flags: uninsneveruninstall
Source: Styles\Office2007.cjstyles; DestDir: {#SetupSkinPath}; Flags: uninsneveruninstall 
```

```
[Code]
procedure SetupLoadSkin(lpszPath: string; lpszIniFileName: string);
  external 'LoadSkin@files:ISSkinU.dll stdcall setuponly';
procedure SetupUnloadSkin;
  external 'UnloadSkin@files:ISSkinU.dll stdcall setuponly';
procedure UninstLoadSkin(lpszPath: string; lpszIniFileName: string);
  external 'LoadSkin@{#SetupSkinPath}\ISSkinU.dll stdcall uninstallonly';
procedure UninstUnloadSkin;
  external 'UnloadSkin@{#SetupSkinPath}\ISSkinU.dll stdcall uninstallonly';
function ShowWindow(hWnd: HWND; nCmdShow: Integer): BOOL;
  external 'ShowWindow@user32.dll stdcall';

function InitializeSetup: Boolean;
begin
  Result := True;
  ExtractTemporaryFile('Office2007.cjstyles');
  SetupLoadSkin(ExpandConstant('{tmp}\Office2007.cjstyles'), 'NormalBlack.ini');    
end;

procedure DeinitializeSetup;
begin
  ShowWindow(StrToInt(ExpandConstant('{wizardhwnd}')), SW_HIDE);
  SetupUnloadSkin;
end;

function InitializeUninstall: Boolean;
begin
  Result := True;
  UninstLoadSkin(ExpandConstant('{#SetupSkinPath}\Office2007.cjstyles'), 
    'NormalBlack.ini');  
end;

procedure DeinitializeUninstall;
begin
  UninstUnloadSkin;
  UnloadDLL(ExpandConstant('{#SetupSkinPath}\ISSkinU.dll'));
  DeleteFile(ExpandConstant('{#SetupSkinPath}\ISSkinU.dll'));
  DeleteFile(ExpandConstant('{#SetupSkinPath}\Office2007.cjstyles'));
  RemoveDir(ExpandConstant('{#SetupSkinPath}'));
end; 
```

# php - 我想使用 DAO，但如何干净地注入返回的对象依赖项

> ID：14591425
> 
> 赞同：3
> 
> 时间：2013-01-29T20:14:33.423
> 
> 标签：php, oop, dependency-injection, dao

好的，所以我有我的依赖注入容器和一个 DAO，我用它来获取订单，例如：

```
$container = new DIContainer();
$orderDAO = $container->get('orderDAO');
$order = $orderDAO->fetchById($someId); 
```

然后我有了易于使用的订单对象。

问题是，如果我的`$order`对象依赖于 a`Logger`和`Config`一个或两个以上类似的对象，因为我`$orderDAO`实例化了该对象，它不必访问或能够创建这些额外的对象，而且我很确定该`$orderDAO`对象绝对不应该对那些额外的对象一无所知，尤其是不知道如何创建它们。

我知道我可以在实例化 DAO 时（从 DIC 中）将依赖注入容器注入到 DAO 中，这样我就可以从 DAO 中访问我的对象所具有的任何依赖项，但是这样做并没有出于某种原因，我觉得对我来说是正确的，我绝对不想在整个地方都进行静态调用，这样该方法就在窗外了。

这样做的最佳方法是什么？

任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:21:42.080

允许 DI 容器管理内部对象依赖关系，例如在您实例化的对象中分配 Logger、Config 和类似的东西 - 是做这些事情的正常方式。如果由于某种原因您不想允许 DI 容器这样做，那么您可以创建默认构造函数并在其中分配此值。

实际上，看起来您需要放入一些基础设施的东西，以这种方式做的事情最好尽可能简单而不需要一些额外的东西，因为它会让您陷入不必要的复杂性。

* * *

**升级版：**

所以 productDAO 无权访问 Config 等……但是您希望该产品拥有它。从设计的角度来看，我认为这是非常错误的。因为通常以存储数据为主要目标的实体除了其业务逻辑外不应具有任何功能。如果您不想进行日志记录和配置 - 您应该在 DAO 中进行，而不是在产品中进行。但无论如何，如果需要，只需为将来可能更改的内容创建包装器（比如 Logger），然后手动在构造函数中分配这个值。

# javascript - 如何使用 jQuery 进行重定向？

> ID：14591428
> 
> 赞同：18
> 
> 时间：2013-01-29T20:14:46.750
> 
> 标签：javascript, jquery

我正在使用 HTML 表单提交给 jQuery 验证，然后通过 ajax 将信息发送到 PHP 处理页面。

除了一切恢复正常之外，一切都 100% 正常运行，我无法让页面重定向到成功页面。

我的代码是：

```
$.post(url,{ username: value_login.val(), firstname: value_firstname.val(), lastname: value_lastname.val(), email: value_email.val(), password: value_password.val()} , function(data) {

    if(data == 'success'){

        window.location.href = "http://example.com/Registration/Success/";
    } else {
       $('#error').text('error');
    }

}); 
```

我认为您无法使用该`window.location.href`功能进行重定向。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-29T20:16:04.590

您忘记了 HTTP 部分：

```
window.location.href = "http://example.com/Registration/Success/"; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-10T00:25:35.990

通过jQuery：

```
$(location).attr('href','http://example.com/Registration/Success/'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T20:42:38.223

我发现了为什么会这样。

在查看我的 wamp 设置后，我没有检查 http 标头，因为激活了它，它现在可以工作了。

谢谢大家试图解决这个问题。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T20:22:45.300

这是一个简写的 Ajax 函数，相当于：

```
$.ajax({  type: "POST",
           url: url,  
          data: { username: value_login.val(), firstname: value_firstname.val(), 
                  lastname: value_lastname.val(), email: value_email.val(),
                  password: value_password.val()
                },
          dataType: "json"
       success: success// -> call your func here  
      }); 
```

希望这可以帮助

# vb.net - 如何将自定义文本文件添加到 Visual Studio 项目？

> ID：14591429
> 
> 赞同：6
> 
> 时间：2013-01-29T20:14:54.500
> 
> 标签：vb.net, visual-studio

我正在构建一个打字应用程序，并想将包含各种常用单词的文本文件添加到项目中，以后可以从中读取。但是，当我转到 Project -> Add Existing Item 时，只有将 VB 代码文件添加到项目中的选项。有没有办法将文本文件添加到项目中，或者我必须在运行时从文件中导入数据？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T20:19:51.377

**项目资源 (Resx) 版本：**

对于您的示例，此版本更易于使用！

*   右键单击您的项目
*   选择属性
*   转到资源部分
*   您将在资源部分的左上角看到一个下拉菜单，如下面的屏幕截图所示。
*   从下拉菜单中选择“文件”。
*   单击添加资源按钮。
*   将显示选择文件对话框。
*   选择您的文件
*   保存您的项目

![Resx 资源](../Images/1f791c040d7a77c10d245179bf6db40e.png)

现在要访问这个文件，只需使用类似...

```
Dim content As String = My.Resources.mytextfile 
```

注意：您不需要扩展名，这也将是强类型的！

**嵌入式资源版本：**

*   右键单击您的项目。
*   转到添加->现有项目。
*   右下角将是一个下拉菜单（文件名旁边）。
*   选择“所有文件 (*.*)”
*   浏览到文件的位置。
*   添加文件。

![选择所有文件](../Images/53edd86d8bee3aba18377fbe598f49f6.png)

添加文件后，在解决方案资源管理器窗口中选择文件将允许您选择其“构建操作”。您可以从选项中选择内容或嵌入式资源。

> *   **Content**：允许您通过 Application.GetContentStream( uri ) 将文件（与程序集在同一目录中）作为流检索。要使此方法起作用，它需要一个 AssemblyAssociatedContentFile 自定义属性，当您将文件标记为“内容”时，VS 会优雅地添加该属性
> *   **嵌入资源**：将文件嵌入到专有程序集清单资源中。

取自; [https://stackoverflow.com/a/145769/1305169](https://stackoverflow.com/a/145769/1305169)

如果您选择嵌入式资源，那么要读取您的文本文件，您可以使用以下代码；

```
Dim executing_assembly As System.Reflection.Assembly = _
    Me.GetType.Assembly.GetEntryAssembly()

' Get our namespace.
Dim my_namespace As String = _
    executing_assembly.GetName().Name.ToString()

' Load a text file.
Dim text_stream As Stream = _
    executing_assembly.GetManifestResourceStream(my_namespace _
    + ".text1.txt")
If Not (text_stream Is Nothing) Then
    Dim stream_reader As New StreamReader(text_stream)
    Label1.Text = stream_reader.ReadToEnd()
    stream_reader.Close()
End If 
```

取自：[http ://www.vb-helper.com/howto_net_embedded_resources.html](http://www.vb-helper.com/howto_net_embedded_resources.html)

# sql - 有什么方法可以优化这个查询？甲骨文 11g

> ID：14591432
> 
> 赞同：-1
> 
> 时间：2013-01-29T20:15:07.243
> 
> 标签：sql, oracle, oracle11g, query-optimization

我在一个过程中有这个查询，它加载数据的速度真的很慢。有没有更快的方法让这个查询运行？

```
SELECT date, price
  FROM ( SELECT date, 
                price,price_src,
                ROW_NUMBER() OVER (PARTITION BY date ORDER BY 
                             CASE WHEN price_src = 'mom' THEN 
                                   0 
                                   WHEN price_src = 'dad' THEN 
                                   1 
                                   WHEN price_src = 'other' THEN 
                                   2 
                                   END) AS roworder
           FROM pr.sources e
          WHERE e.home = inTick
            AND price IS NOT NULL
            AND e.security = inVal
            AND e.securityNum = NVL(inSecurity,'FWD')
            AND bc= 'USD' 
            AND date >= NVL(startDate, date)
            AND date <= NVL(endDate, date)
                )
 WHERE roworder = 1
 ORDER BY date; 
```

`inval`我想以美元为基础货币并在特定日期范围内获取特定值 ( ) 的定价。问题是，这里涉及到优先级。首先尝试从“妈妈”定价来源获取，如果没有，请转到“爸爸”，然后转到“其他”。

这是该表的示例：

```
+------------+------+------+-------------+--------- -+-----------+--------+
| 日期 | 主页 | 公元前 | 安全号码 | 安全 | price_src | 价格 |
+------------+------+------+-------------+--------- -+-----------+--------+
| 2001-05-04 | 3A | 美元 | 前卫 | 32 | 妈妈 | 548.54 |
| 2012-05-04 | 3G | 美元 | BWD | 58 | 爸爸 | 58.54 |
| 2009-05-04 | 3F | 美元 | 前卫 | 39 | 其他 | 588.54 |
| 2010-05-04 | 3E | 美元 | 前卫 | 38 | 妈妈 | 38.54 |
+------------+------+------+-------------+--------- -+-----------+--------+

```

该表有超过 200 万条记录。它应该以特定价值（可能是货币或财产）获取特定日期的价格。

该查询需要 10 秒才能运行（1 次运行），并且在循环中被调用。每次执行的缓慢时间的积累使整个事情变慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:33:44.017

如果没有更多信息，我会建议：

*   看看您是否可以删除循环并只执行基于集合的操作而不是一次一行
*   在 securityNum、security、home、price、bc、date、priceSource 上添加索引
*   删除 inSecurity 上的 nvl 并根据它是否为空创建两个单独的语句

# ajax - ASP.NET MVC - 如何让 ajax 助手替换自己？

> ID：14591434
> 
> 赞同：0
> 
> 时间：2013-01-29T20:15:19.977
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, asp.net-ajax

我有这个：

```
@Ajax.ActionLink("PLUS", "VotePlus", "Forums", new {postId = Model.Id}, new AjaxOptions
    {
        UpdateTargetId = "votePlus",
        InsertionMode = InsertionMode.Replace
    },
    new{@id="votePlus"}
) 
```

它会生成显示“PLUS”的链接。现在，我有一个返回 null 的控制器操作（我也尝试使用空的 partialView，但没有结果）。我希望这个链接在用户点击它时消失。我怎样才能做到这一点？

编辑：看来这整件事不想工作。我创建了 span 标签并希望它自己替换，但是这个 ajax 助手不断将我重定向到控制器操作。：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:41:42.737

稍微不同的方法，尝试使用 AjaxOptions 的 OnSuccess 回调来调用 javascript 函数来隐藏链接并更新 span

```
@Ajax.ActionLink("PLUS", "VotePlus", "Forums", new {postId = Model.Id}, new AjaxOptions
    {
        OnSuccess = ‘onSuccessProc’
    },
    new{@id="votePlus"}
)

// in your javascript section
function onSuccessProc(respData){
    // code to update span assuming server returns html
    $(‘#id_of_span’).html(respData);
    $(‘# votePlus’).hide();
}; 
```

# python - sorted() 仅按第一个数字排序

> ID：14591435
> 
> 赞同：3
> 
> 时间：2013-01-29T20:15:24.730
> 
> 标签：python

我需要对表格的第一列进行排序。它看起来像

```
6000 799 
7000 352
8000 345
9000 234
10000 45536 
11000 3436
1000 342
2000 123
3000 1235
4000 234
5000 233 
```

我希望第一列按升序排列，但它仅按第一个数字排序，而不是整列的值，即

```
1000 342
10000 45536
11000 3436
2000 123 
```

但我想要

```
1000 342
2000 123
3000 1235
etc 
```

目前正在尝试：

```
SortInputfile=open("InterpBerg1","r")
line=SortInputfile.readlines()
line.sort()
map(SortOutputfile.write, line) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T20:19:40.500

`sort`and函数支持一个 key 参数，`sorted`它允许您指定应该用于执行排序的键。由于您需要数字排序顺序而不需要字母排序顺序，因此您需要提取第一列并将其转换为 int：

```
SortInputfile=open("InterpBerg1","r")
line=SortInputfile.readlines()
line.sort(key=lambda line: int(line.split()[0]))
map(SortOutputfile.write, line) 
```

更简洁的版本可能是：

```
# read input file
with open(input_filename) as fh:
    lines = fh.readlines()

# sort lines
lines.sort(key=lambda line: int(line.split()[0]))

# write output file
with open(output_filename, 'w') as fh:
    fh.writelines(lines) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T20:19:24.340

对于数字顺序，您应该将字符串转换为数字。要即时执行此操作，请使用以下`key`参数：

```
outfile.writelines(sorted(
    open('InterpBerg1'),
    key = lambda l: int(l.split(maxsplit=1)[0]))) 
```

编辑：我同意其他人建议`with`在处理文件时使用语句，所以：

```
with open('Output', 'w') as outfile, open('InterpBerg1') as infile:
    outfile.writelines(sorted(infile,
        key = lambda l: int(l.split(maxsplit=1)[0]))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T20:26:06.967

首先，您应该知道在 Python 中对列表进行排序有两种标准方法。第一个是`sorted()`，它是一个通用的内置函数，它接受一个列表并返回列表的排序*副本*，第二个是`.sort()`，它是列表的内置*方法*，用于对这个列表*进行就地*排序（并返回`None`） . 您正在使用`.sort()`; 没有`.sorted()`。

其次，列表中的项目不是整数；它们是字符串。您可以从您使用创建列表的事实中看出这一点，该列表`readlines()`返回一个字符串数组。当您对字符串进行排序时，它们默认按字母顺序排序。这就是为什么在您的示例中它们似乎按“仅第一位”排序的原因。

为了按其他方式排序，您有两个选项，这两个选项都表示为`sorted()`函数和`.sort()`方法的关键字参数。第一个，正如在其他几个答案中已经提到的那样，是`key`参数，粗略地说，它定义了您想要用来排序的列表项的质量或属性；在您的情况下，您想使用*第一个数字的值*。您可以通过用空格拆分字符串、获取第一个标记并转换为 int 来获得此信息。（Lev Levitsky 和 ​​Bikeshedder 的回答都显示了适当的方法来做到这一点）。传递给的值`key`必须是一个函数（标准函数或 lambda 函数），它将列表项作为输入并返回所需的值。您可以使用的另一个参数是`cmp`参数，这是一个函数，它将两个列表项（或它们的键，如果您还定义了`key`参数）作为输入，并返回一个值，指示哪个项目“更大”。这是一个稍微复杂的功能，但它为您的排序增加了更多的灵活性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T20:22:54.863

与其他答案相同-仅落后几分钟，而且 IMO 更具可读性。

```
lines = []

with open("InterpBerg1","r") as f:
    for line in f:
        lines.append(tuple(int(i) for i in line.split()[:]))

print sorted(lines) 
```

# asp.net-mvc - 将 JSON 反序列化为控制器中的嵌套视图模型

> ID：14591437
> 
> 赞同：1
> 
> 时间：2013-01-29T20:15:28.587
> 
> 标签：asp.net-mvc, json, viewmodel

我有一个嵌套的视图模型结构：

```
public class PersonViewModel
{
    public int Height { get; set; }
    public List<LegViewModel> Legs {get;set;}
}

public class LegViewModel
{
    public int Length { get; set; }
} 
```

我使用 jquery post 向此发送一些 JSON：

```
<script>
    $(function () {

        $("#mybutton").click(function () {
            $.ajax({
                type: "POST",
                data: {
                    Height: 23,
                    Legs: [
                        {
                            Length: 45,
                        }
                    ]
                }
            });
        });
    });
</script>
<button id="mybutton">hello world!</button> 
```

我发布到这个控制器动作：

```
[HttpPost]
public ActionResult Save(PersonViewModel model)
{
    return Json(new { success = true });
} 
```

的`Height`a`PersonViewModel`被填充，列表中的元素*数量*`Legs`也是如此，但列表中的每个元素`LegViewModel`都没有：`Length`属性保持为 0，我希望`Legs`数组包含一个`Length`45 的元素。

请注意，当我根本不使用列表时，这也是相同的：具有以下内容会产生一个不为空的`PersonViewModel.Legs property, but still as the`Legs.Length` 属性为 0：

```
// view model
public class PersonViewModel
{
    public int Height { get; set; }
    //public List<LegViewModel> Legs {get;set;}
    public LegViewModel Leg { get; set; }
}

public class LegViewModel
{
    public int Length { get; set; }
}

// view
$("#mybutton").click(function () {
    $.ajax({
        type: "POST",
        data: {
            Height: 23,
            Leg: 
                {
                    Length: 45,
                }

        }
    });
}) 
```

如何使用 JSON 填充嵌套视图模型？有什么我错过的或者 MVC 不能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:21:36.190

如果您希望 MVC 模型绑定器在发送数据时正确解析您的集合，`$.ajax`您需要做两件事：

*   设置`contentType`为`'application/json'`
*   你`data`应该持有 JSON 所以`JSON.stringify`数据

所以这是正确的用法，然后可以由模型绑定器解析：

```
$("#mybutton").click(function () {
        $.ajax({
            type: "POST",
            contentType: 'application/json',
            data: JSON.stringify({
                Height: 23,
                Legs: [
                    {
                        Length: 45,
                    }
                ]
            })
        });
    }); 
```

# android - Android nohistory 不工作

> ID：14591441
> 
> 赞同：0
> 
> 时间：2013-01-29T20:15:40.693
> 
> 标签：android, android-intent, android-activity

我进行了如下偏好活动：

```
<activity
        android:name=".Preferences"
        android:noHistory="true"
        android:label="@string/set_preferences">
    </activity> 
```

在该活动中，有一个底部可以在浏览器上启动一个站点。按下该底部然后“返回”确实返回到该首选项菜单。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:55:54.187

添加到清单文件的代码很好。尝试使用此代码进行按钮操作。

```
 public void buttonClick(View v){
            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
            startActivity(browserIntent);

        } 
```

# json - 对于 JSON 操作，您会推荐哪个 Perl 模块？

> ID：14591444
> 
> 赞同：12
> 
> 时间：2013-01-29T20:15:48.353
> 
> 标签：json, perl, cpan, perl-module

像往常一样，我很高兴与 CPAN 打交道，因为它满足了我们的所有需求。像往常一样，我迷路了，因为有很多东西。

我可以[`JSON`](https://metacpan.org/module/JSON)一个人找到核心，另一个人感到热情[`JSON::Tiny`](https://metacpan.org/module/DAVIDO/JSON-Tiny-0.22/lib/JSON/Tiny.pod)。

我的需求非常简单（从[Open Library API](http://openlibrary.org/search.json?title=perl%20modules)解析东西），也许有一天，会公开我们自己的数据。

您是否喜欢此任务的任何其他模块？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T20:25:19.790

[JSON](http://search.cpan.org/perldoc?JSON)模块就像一个冠军，但如果你需要一个更快的解析器，使用这个：[JSON::XS](http://search.cpan.org/perldoc?JSON::XS)，它需要一个本地编译。

请注意，JSON 版本 2.0 及更高版本只是 JSON::XS（如果已安装）或 JSON::PP（后备）的前端。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-29T20:23:05.157

[*更新：我现在推荐[Cpanel::JSON::XS](https://metacpan.org/pod/Cpanel::JSON::XS)而不是 JSON::XS。Cpanel::JSON::XS 是一个更好维护的 JSON::XS 版本。*]

我总是使用[JSON::XS](http://search.cpan.org/perldoc?JSON::XS)。完整、强大、经过验证、快速*、易于使用，如果您需要，还可以提供一点灵活性。

它可能是最常用的 JSON 解析器，尽管大多数人通过[JSON](http://search.cpan.org/perldoc?JSON)访问它（但这样做有使用较慢的[JSON::PP](http://search.cpan.org/perldoc?JSON::PP)的风险）。

* — 根据[JSON::Tiny](http://search.cpan.org/perldoc?JSON::Tiny)的文档，比 JSON::Tiny 快“一个数量级”。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-30T05:14:26.903

既然您说您是从在线资源获取数据，您可能会考虑使用[Mojolicious](http://mojolicio.us)工具套件。通过这种方式，您[可以获得数据](http://mojolicio.us/perldoc/Mojo/UserAgent)、[解析它](http://mojolicio.us/perldoc/Mojo/JSON)，甚至可以使用[JSON 指针](http://mojolicio.us/perldoc/Mojo/JSON/Pointer)来提取信息。

基本的：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Mojo::UserAgent;

my $ua = Mojo::UserAgent->new;
my $data = $ua->get('http://openlibrary.org/search.json?title=perl%20modules')
              ->res
              ->json; 
```

使用 url 构造函数和 JSON 指针：

```
#!/usr/bin/env perl

use strict;
use warnings;
use v5.10;

use Mojo::URL;
use Mojo::UserAgent;

my $ua = Mojo::UserAgent->new;
my $url = Mojo::URL->new('http://openlibrary.org/search.json')
                   ->query( title => 'perl modules' );

say $ua->get($url)
       ->res
       ->json('/docs/0/title_suggest'); 
```

请注意，`json`响应对象上的方法要么返回整个解析的数据结构，要么可以采用指针字符串（如第二个示例中所示）来仅返回一个子集以使您快速进行。享受。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-04-03T18:22:45.973

我会推荐[JSON::MaybeXS](https://metacpan.org/pod/JSON::MaybeXS) - 使用 Cpanel::JSON::XS 并回退到 JSON::XS 和 JSON::PP。

Cpanel::JSON::XS 比 JSON::XS 有所[改进](https://metacpan.org/pod/Cpanel::JSON::XS#cPanel-fork)，因此 JSON::MaybeXS 使您的代码美观且可移植。

如果我不确定在特定情况下使用哪个模块，通常我会查看[Task::Kensho](https://metacpan.org/pod/Task::Kensho)，尽管他们目前没有 JSON，但我已经向他们报告了！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-29T08:32:23.640

我一有机会就开始使用[Mojo::JSON 。](http://www.metacpan.org/module/Mojo::JSON)Mojolicious易于安装，正如[Joel Berger](https://stackoverflow.com/users/468327/joel-berger)在[他的回答中所展示的](https://stackoverflow.com/a/14597159/2766176)[那样](http://www.metacpan.org/module/Mojolicious)，它具有更多功能。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-29T20:28:56.207

[JSON::XS](http://search.cpan.org/~mlehmann/JSON-XS-2.33/XS.pm)将是一个很好的模块。

# asp.net-mvc - 为什么这两个 API 方法会产生冲突

> ID：14591447
> 
> 赞同：4
> 
> 时间：2013-01-29T20:15:52.700
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我们正在开发一个 MVC4 API 应用程序并且遇到了一个我们无法解释的奇怪问题。

API 控制器有两种方法：

```
 [AllowAnonymous]
    [AcceptVerbs("Post", "Get")]
    public ArtifactContent Post(string userName, string password, string id) ... 
```

和

```
 [AllowAnonymous]
    [AcceptVerbs("Get")]
    public HttpResponseMessage Get(string userName, string password, string id, EnumType contentType) ... 
```

尽管这两种方法显然具有不同的方法签名，但我们收到以下错误消息：

> {"Message":"发生错误。","ExceptionMessage":"找到多个与请求匹配的操作：[XXX].Models.ArtifactContent **Post(System.String, System.String, System.String)** on type [XXX].API.ArtifactContentController\r\nSystem.Net.Http.HttpResponseMessage **Get(System.String, System.String, System.String, ArtifactContentTypes)**在 System.Web.Http.Controllers.ApiControllerActionSelector.ActionSelectorCacheItem.SelectAction(HttpControllerContext controllerContext) 上的类型 [XXX].API.ArtifactContentController","ExceptionType":"System.InvalidOperationException","StackTrace":"\r\n .Web.Http.Controllers.ApiControllerActionSelector.SelectAction(HttpControllerContext controllerContext)\r\n 在 System.Web.Http.ApiController.ExecuteAsync(HttpControllerContext controllerContext, CancellationToken cancelToken)\r\n 在 System.Web.Http.Dispatcher.HttpControllerDispatcher。 SendAsyncInternal(HttpRequestMessage request, CancellationToken cancelToken)\r\n at System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsync(HttpRequestMessage request, CancellationToken cancelToken)"}

我们可以通过进行这两个更改之一来解决该错误，但我真的很想知道*为什么*当两个签名*明显*不同时.NET 会抛出错误：

1.  从方法中删除`Get` `AcceptVerbs`属性`Post`
2.  更改`Get`方法的签名以接受 Enum 作为整数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T00:43:45.197

这是`ASP.NET Web API`.

简而言之，动作选择器 ( )在尝试将传入的 HTTP 请求与控制器内的相关动作匹配时`IHttpActionSelector`不会考虑在内。`Enums`

原因是默认情况下只选择原始类型（即`int`等`string`）`RouteData`来查找匹配的操作。`Enum`不是其中之一，因此它被忽略，因此，即使您的操作从编译器的角度来看具有不同的签名，在操作选择器的眼中它们是相同的。

您可以在此处跟踪潜在修复的进度 - [http://aspnetwebstack.codeplex.com/workitem/312](http://aspnetwebstack.codeplex.com/workitem/312)

就目前而言，正如您自己所说，最好的解决方法是传递`enum`为`int`or `string`（并转换为`enum`）。

# jersey - 当资源方法返回 void 或 null 时，我可以让 Jersey 使用我的 MessageBodyWriter 而不是返回 204 吗？

> ID：14591448
> 
> 赞同：0
> 
> 时间：2013-01-29T20:15:53.330
> 
> 标签：jersey, jax-rs

我希望能够编写这样的方法：

```
@GET
@Template(SIGNUP_FORM)
@Produces("text/html")
public void form() {} 
```

我的 MessageBodyWriter 匹配使用 @Template 注释的方法，所以这应该可以正常工作。然而，Jersey 跳过了我的 MessageBodyWriter 并返回 204（无内容）。为了解决这个问题，我必须做这样的事情：

```
@GET
@Template(SIGNUP_FORM)
@Produces("text/html")
public Object form() { return new Object(); } 
```

我也不能返回null。

# java - 使用 BaseActivity 执行代码 oncreate 扩展活动？

> ID：14591452
> 
> 赞同：1
> 
> 时间：2013-01-29T20:16:15.703
> 
> 标签：java, android

我有很多活动需要在创建时执行一些代码，这些代码与显示首选项有关，例如不同的主题、隐藏状态栏等。

这是其中一项活动的示例：

```
public class MainActivity extends BaseActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
    }
} 
```

基础活动又具有以下代码：

```
public class BaseActivity extends Activity{

        // getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
        // System.out.println("BaseActivity");

} 
```

我正在尝试在创建时运行一些代码，但我无法做到。如何使用 BaseActivity 尽快从上面运行代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T20:17:45.473

在 childs 的 onCreate 方法中调用 super.onCreate(Bundle bundle) 来调用 parent 的 onCreate。

这是从 Activity 中抽象代码以便在其他 Activity 中重用的常见做法。

例如：

```
public class MainActivity extends BaseActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       Log.v(TAG,"MainActivity");
    }
}

public class BaseActivity extends Activity{

    protected static final String TAG = "TAG";

    @Override
    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         Log.v(TAG,"BaseActivity");
    }
} 
```

我个人经常这样做，但我通常更喜欢以下内容以获得更好的可维护代码：

> 组合优于继承

# javascript - Web Audio API -- Chrome / Safari 中的频率调制听起来不同

> ID：14591454
> 
> 赞同：4
> 
> 时间：2013-01-29T20:16:24.420
> 
> 标签：javascript, web-audio-api

我正在为 Web Audio API 合成器开发基于浏览器的修补接口。频率调制（将一个振荡器与另一个振荡器的频率挂钩）在 Chrome 中按预期工作。它应该是一种科幻的声音，就像一个 300Hz 的正弦波，频率在 30Hz 上下波动。

在 Safari（和 Mobile Safari）中，它听起来像是低沉的隆隆声。听起来好像有 FM，但没有正确的基频。这只是一个浏览器怪癖，将在未来的版本中解决吗？现在有解决办法吗？

这是视觉/交互式版本： http:
[![html5 调频合成器](../Images/6244d94dd0476f67cd59a25ad97f4010.png)
//forresto.github.com/dataflow-webaudio/](http://forresto.github.com/dataflow-webaudio/)

还有fiddle版本，用最少的代码来演示效果：http:
[//jsfiddle.net/FVaWL/28/](http://jsfiddle.net/FVaWL/28/)

```
var mod, modGain, osc;

var out = context.destination;

var startTest = function(){
    mod = context.createOscillator();
    mod.frequency.value = 8;

    modGain = context.createGain();
    modGain.gain.value = 30;

    osc = context.createOscillator();
    osc.frequency.value = 300;

    mod.connect(modGain);
    modGain.connect(osc.frequency);
    osc.connect(out);

    osc.start(0);
    mod.start(0);
};

var stopTest = function(){
    osc.stop(0);
    mod.stop(0);
    mod = modGain = osc = null;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:44:51.673

Safari 6 的 webkit 具有较旧版本的网络音频。在每晚构建时尝试它，它可能会更好 - 但是是的，这些都是暂时的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-31T20:46:02.067

这是一个较老的问题，但我会回答，因为我以前遇到过这个问题。似乎在较旧的 Safari 版本中，GainNode 值被限制为 0..1。在 Chrome 和较新的 Safari 版本中，您可以分配任何值（例如，我运行 FM/xmod 时增益节点为 30000）。除了建议用户使用当前浏览器外，我还没有找到解决方案。好消息是，截至 2016 / Safari 9，该问题已得到修复。

# javascript - 用ajax加载的谷歌地图

> ID：14591455
> 
> 赞同：1
> 
> 时间：2013-01-29T20:16:26.513
> 
> 标签：javascript, jquery, html, ajax

我有一个网站（它使用`jquery bbq`），其中触发了 ajax 请求，并`div`在收到响应时替换了正文中的某个位置。类似于以下内容：

```
var mainContent = $('#main_content');
if ( cache[ url ] ) {
        mainContent.fadeOut(duration, function() {
            mainContent.html(cache[ url ]);
            mainContent.fadeIn(duration, function() {
                $(document).trigger("ajax_loaded");
            });
        });

    } else {

        mainContent.fadeOut(duration, function() {

            var postAjaxCallback = function() {
                cache[ url ] = mainContent.html();
                $(document).trigger("ajax_loaded");
            };

            $('#loading').fadeIn(duration, do_ajax(url, duration, postAjaxCallback));
        } );

    }

function do_ajax(linkVal, duration, callback) {

$.ajax({ 
    type: "GET",
    url: linkVal,
    dataType: "html",
    success: function(page){
        var mainContent = $('#main_content');
        mainContent.stop(true, true);

        if(parseInt(page)!=0)  
        {
            mainContent.html(page);
            $('#loading').fadeOut(duration, function() {
                mainContent.fadeIn(duration, callback);                 
            } );
        }
    }
    });
} 
```

现在总的来说，这很好用。主页是这样的：

```
<html>
    <head>
       ...
    </head>
    <body>
        <div id="main_content");
           <p>Hello world!</p>
        </div>
    /body>
</html> 
```

ajax 返回`#page2`类似于

```
<p>Hello to a different world!</p> 
```

`#page3`它变得有点复杂。返回的ajax是：

```
<script type="text/javascript">
function initialize() {
  var mapOptions = {
    zoom: 11,
    streetViewControlOptions: true,
    center: new google.maps.LatLng(26.737792, 49.878273),
    mapTypeId: google.maps.MapTypeId.SATELLITE
  }
  map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
}

function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=initialize";
  document.body.appendChild(script);
}

loadScript();

$(document).bind("ajax_loaded", function() {
        console.log("map resize called");
        google.maps.event.trigger(map, 'resize');
});
</script> 
```

现在第一次`#page3`加载，一切正常，控制台日志触发并调整地图大小（由于灰色区域问题需要调整大小）。现在我*想要*发生的是所有其他页面继续正常加载（通过ajax调用或从缓存中），并且当`#page3`再次导航到时（即`#("main_content")`从缓存中设置，resize事件再次触发。我想用最简单的术语来说,我正在尝试创建一个在每个 ajax 页面加载后触发的事件,并且我可以`$(document).bind("ajax_loaded", function() {});`在每个 ajax 检索到的页面上有一个自定义,可以进行我需要的任何后期处理.目前表现出的行为是什么都没有直到我加载`#page3`（正如我所提到的，地图已调整大小，一切都是肉汁）。之后，每个页面加载都会触发绑定功能并打印到控制台（我想这`$(document)`是合理的，因为我已将其绑定到尝试重新加载`#page3`，地图加载但没有调整大小（控制台仍然打印）所以我在地图上有灰色区域。任何人都可以用我有限的 javascript 经验帮助我正确处理工作流程。重申：

*   每个 ajax 加载（或从缓存加载）都会触发一些事件
*   在每个 ajax 页面（`#page1`等`#page2`）中，都会有一个从上述步骤触发的函数，可以对每个 ajax 页面进行唯一的设置。

谢谢您的帮助！

**编辑** 我尝试过使用以下内容：

```
mainContent.find("script").each(function(i) {
    eval($(this).text());
}); 
```

而不是触发`ajax_loaded`事件但无济于事。还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:22:26.233

我相信当第二次添加 Google Maps API 时一切都会搞砸（重新加载`#page3`. 它会导致一些错误，并且脚本的其余部分可能会停止工作。尝试将 Google Maps API 的加载包装成 condition `if (typeof google === 'undefined') { ...`。

但老实说，整个概念可能需要一些重构:)。

# javascript - Node.js 输出大数字的格式

> ID：14591460
> 
> 赞同：1
> 
> 时间：2013-01-29T20:16:42.437
> 
> 标签：javascript, node.js, factorial

我正在尝试在`node.js`. 从非常简单的递归方法到最复杂的算法。这是代码：

```
process.stdin.resume();

var i = 0, t = 0;

process.stdin.on('data', function (n) {
    if (t == 0) {
        t = n;
    } else {
        if (i++ < t) {
            process.stdout.write(Factorial(n).toString());
            if (i == t) {
                process.exit();
            }
        } else {
            process.exit();
        }
    }
});

function Factorial (n) {
    if (n > 1) {
        n *= Factorial(n - 1);
    }
    return n;
} 
```

问题是——数字表示。我希望有准确的答案：

`100! = 93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000`

但我现在收到更合乎逻辑但对我没用的：

`100! = 9.33262154439441e+157`

我相信阶乘的二进制表示是正确的，但我怎么能得到它的“松散”形式呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:03:42.133

您可以使用以下任何一种：

*   [大整数.js](https://github.com/peterolson/BigInteger.js)
*   [bignumber.js](https://github.com/MikeMcl/bignumber.js)
*   [javascript-bignum](https://github.com/jtobey/javascript-bignum)
*   [jsbn.js](http://www-cs-students.stanford.edu/~tjw/jsbn/)

在任何这些之上实现一个计算阶乘的函数应该非常简单。如果这样做，您可能希望使用[记忆](http://en.wikipedia.org/wiki/Memoization)化来提高整体性能。这是一个没有大整数支持的基本实现：

```
var MEMOIZED_FACT = [];

function FACT(number) {
  var n = Math.floor(number);
  if (n === 0 || n === 1) {
    return 1;
  } else if(MEMOIZED_FACT[n] > 0) {
    return MEMOIZED_FACT[n];
  } else {
    return MEMOIZED_FACT = FACT(n - 1) * n;
  }
} 
```

# php - 动态页面的wordpress动态内容

> ID：14591461
> 
> 赞同：0
> 
> 时间：2013-01-29T20:16:50.037
> 
> 标签：php, wordpress

我正在为我的下一个 CMS 项目使用 wordpress。假设我有一个页面模板（全宽页面模板），但该模板下的页面有某些部分在一个页面中但不在另一个页面中。我不是在说内容，内容来自wordpress。我说的是页面的某些特定部分（比如一些图像），它们可能在一个页面中但不在另一个页面中。但是，这些页面位于同一模板下。

我可以通过为每个这样的页面创建单独的模板来完成它，但这不合适。

在我的上一个模板中，我使用当前页面/帖子的 ID 来隐藏和显示那些特定页面/帖子的此类内容，但是当页面被删除并再次添加时，我的所有代码都将毫无意义，因为我的代码无法匹配新身份证。

我想通过匹配页面名称而不是ID来做到这一点，但是当我使用`the_title()`比较时，它会显示标题，因为`the_title()`功能的本质是显示标题。如何使用它来比较标题？

```
if(the_title() == "home"){
   //show the content for home page
} 
```

有没有其他合适的方法来完成我想要的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:17:25.560

改用[`get_the_title`](http://codex.wordpress.org/Function_Reference/get_the_title)：

```
if (get_the_title() == "home") {
   //show the content for home page
} 
```

# eclipse - Installing an additional feature during product build for some Eclipse versions only

> ID：14591472
> 
> 赞同：1
> 
> 时间：2013-01-29T20:17:31.253
> 
> 标签：eclipse, tycho, p2

When building a product based on Eclipse 3.7+, I want to include a marketplace feature (org.eclipse.epp.mpc). I don't want to explicitly add this feature to one of the product features because I am also building for Eclipse 3.5\. Is there a way to add this feature during the build?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:02:03.727

It is currently not possible to create a product distribution which contains additional features, i.e. features which are not directly or indirectly referenced from the product. This enhancement was [requested in this ticket](https://bugs.eclipse.org/bugs/show_bug.cgi?id=361722), but is not available in the current Tycho version (0.16.0).

However there is the possibility to declare an optional greedy dependency to the marketplace feature from your product. Then, you could set up different target platforms in your build (through profiles) with (for 3.7) or without (for 3.5) the marketplace feature. With the optional greedy dependency, Tycho will then include the feature in the product installation in case it is available in the target platform.

# ruby-on-rails - Rails 中的 ActionMailer 使应用程序的每个页面都挂起

> ID：14591481
> 
> 赞同：0
> 
> 时间：2013-01-29T20:18:22.810
> 
> 标签：ruby-on-rails, actionmailer

我正在尝试使用 Rails 3 中内置的 :mail 函数发送邮件，如下所示：

```
 default from: "Me <me@myname.mailgun.org>"

  def gift
      mail :to => "myname@gmail.com", :subject => "test"
  end 
```

然后我有一个名为 setup_mail.rb 的文件`config/initializers`：

```
ActionMailer::Base.smtp_settings = {
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.default_charset = "utf-8"
  config.action_mailer.perform_deliveries = true
  config.action_mailer.raise_delivery_errors = true
  config.action_mailer.smtp_settings = {
       :authentication => :plain,
       :address => "smtp.mailgun.org",
       :port => 587,
       :domain => "myname.mailgun.org",
       :user_name => "postmaster@myname.mailgun.org",
       :password => "mypass"
  }
} 
```

我添加了该代码，然后重新启动了我的服务器，但应用程序无限期加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:32:37.043

您不应该`config.action_mailer`从初始化程序中访问。删除包装`ActionMailer::Base.smtp_settings`块，只需将所有`config.action_mailer`条目更改为`ActionMailer::Base`：

```
ActionMailer::Base.delivery_method = :smtp
ActionMailer::Base.default_charset = "utf-8"
ActionMailer::Base.perform_deliveries = true
ActionMailer::Base.raise_delivery_errors = true
ActionMailer::Base.smtp_settings = {
  :authentication => :plain,
  :address => "smtp.mailgun.org",
  :port => 587,
  :domain => "myname.mailgun.org",
  :user_name => "postmaster@myname.mailgun.org",
  :password => "mypass"
} 
```

# pdo - BlowFish 加密在 PHP 中返回 false

> ID：14591482
> 
> 赞同：0
> 
> 时间：2013-01-29T20:18:32.647
> 
> 标签：pdo, blowfish

使用[Tuts Plus Hashing Tutorial](http://net.tutsplus.com/tutorials/php/understanding-hash-functions-and-keeping-passwords-safe/)它在检查哈希值时不断返回 false。密码绝对没有输入错误'111111'。我做了一个 IF 语句来回显它返回的内容，结果显示为“False”。

插入和选择信息的 PDO 查询都正常工作。

我的注册表单：

```
$pass_hash = PassHash::hash($_POST['pwd']); 

$q = "INSERT INTO Users(password) VALUES (:password);";

$query = $db->prepare($q);

$query->bindParam(":password",$pass_hash);

$results = $query->execute();
$user_id = $db->lastInsertID(); 
```

我的登录表格：

```
<?php
require ("include/PassHash.php");  

if(isset($_POST['login'])){
$email = $_POST['email'];
$password = $_POST['password'];

$query = $db->prepare('SELECT * FROM Users WHERE email = :email');
$query->bindParam(":email",$email);
$results = $query->execute();

$total = $query->rowCount();
$row = $query->fetch();

// Returns more than 0 rows (Email found) and checks hash.
if($total>0 && PassHash::check_password($row['password'], $_POST['password'])){     
    // Correct credentials.
    $_SESSION['user_id'] = $row['id'];
    $_SESSION['user_email'] = $email;
    session_set_cookie_params(24*60*60);
    ob_start();
    header('Location: /index.php?p=user_account', true);
    exit();
    ob_end_flush();
} else {
    // Incorrect password / email.
}
}
?> 
```

PassHash.php

```
<?php
class PassHash {
// blowfish
private static $algo = '$2a';
// cost parameter
private static $cost = '$10';
// mainly for internal use
public static function unique_salt() {
    return substr(sha1(mt_rand()),0,22);
}
// this will be used to generate a hash
public static function hash($password) {
    return crypt($password,
        self::$algo .
        self::$cost .
        '$' . self::unique_salt());
}
// this will be used to compare a password against a hash
public static function check_password($hash, $password) {
    $full_salt = substr($hash, 0, 29);
    $new_hash = crypt($password, $full_salt);
    return ($hash == $new_hash);
}
}
?> 
```

提交表单后，我已经打印了密码和电子邮件，两者都显示了，所以这不是输入错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:27:12.597

将密码字段的 VARCHAR(45) 增加到 VARCHAR(255) 解决了该问题。

# c# - C# Chart 上的 TextAnnotation 未显示

> ID：14591484
> 
> 赞同：2
> 
> 时间：2013-01-29T20:18:46.943
> 
> 标签：c#, asp.net-mvc-4, data-visualization

我有一个 ASP.NET MVC 应用程序。此应用程序需要在运行时创建一个圆环图并将图像保存到文件系统。圆环图必须包含将在运行时生成和添加的文本注释。目前，我可以成功创建一个圆环图。但是，文本注释永远不会出现。此外，不会抛出任何错误。对于我的生活，我无法弄清楚我做错了什么。这是我正在尝试的：

```
string[] xValues = { "1", "2" };
double[] yValues = { 30, 70 };

// Create a donut chart
Chart chart = new Chart();
chart.Width = 360;
chart.Height = 240;

// Setup the custom color palette
chart.Palette = ChartColorPalette.None;
chart.PaletteCustomColors = GetPaletteColors();

// Build a donut series
Series series = new Series("Default");
series.ChartType = SeriesChartType.Doughnut;
chart.Series.Add(series);

// Define the chart area
ChartArea chartArea = new ChartArea();
chartArea.Position = new ElementPosition(0, 1.9f, 59.5f, 100);
chart.ChartAreas.Add(chartArea);

// Create the axes as necessary
Axis yAxis = new Axis(chartArea, AxisName.Y);
Axis xAxis = new Axis(chartArea, AxisName.X);

// Bind the data to the chart
chart.Series["Default"].Points.DataBindXY(xValues, yValues);

// Add the text information
TextAnnotation annotation = new TextAnnotation();
annotation.Text = GetText();
annotation.Font = new Font(new FontFamily("Verdana"), 10.5f);
annotation.ForeColor = Color.FromArgb(255, 45, 45, 45);
annotation.X = 10;
annotation.Y = 10;
annotation.BringToFront();
chart.Annotations.Add(annotation);

chart.SaveImage("chart.png", ChartImageFormat.Png); 
```

为什么圆环图上没有出现 TextAnnotation？非常感谢您的帮助。我已经为此苦恼了一天。

# windows-phone-7 - 两个panoramaItem的图片背景哪个分辨率

> ID：14591485
> 
> 赞同：1
> 
> 时间：2013-01-29T20:19:01.197
> 
> 标签：windows-phone-7, xaml, windows-phone-7.1, panorama-control

我创建了一个包含两个全景项的全景图的 WP 应用程序。我想设置背景图片。

我不知道我需要为两个全景项目使用哪种分辨率。

任何人都可以帮助我吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:54:03.587

在您的应用程序中使用适当大小的图像。全景背景图像的推荐尺寸是高度为 800 像素，宽度小于 2000 像素。（我经常用800 x 900，效果不错，也要看图片的内容！）

如果 Panorama 控件使用图像作为背景，则其 Build Action 应设置为 Resource；否则，它不会在应用程序首次显示时立即出现。将 Build Action 设置为 Content 会导致它被异步加载。

# ios - 弹出到根视图控制器时导航栏不更新

> ID：14591486
> 
> 赞同：3
> 
> 时间：2013-01-29T20:19:07.803
> 
> 标签：ios, cocoa-touch

我有一个这样的故事板：

1.  Navigation Controller --- 连接到 ---> View A ---> table cell segue ---> View B
2.  独立视图 C，也就是说，故事板中的任何其他视图都没有连接到它的 segue。

我点击视图 A 中的一个单元格，它会自动执行与视图 B 的 segue。在视图 B 中，显示视图并触发应用程序事件后，它会自动关闭自身并推送视图 C 的实例，执行如下操作：

视图 B：

```
- (void)someEvent
{
    ViewCController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewC"];
    [self.navigationController pushViewController:controller animated:YES];
} 
```

这一切都很好，视图 C 突然出现。但是，当我点击视图 C 导航栏上的“返回”按钮时，我希望它一直弹回视图 A，而不是视图 B。我试过这个：

视图 C：

```
- (void)viewWillDisappear:(BOOL)animated
{
     [super viewWillDisappear:animated];
     [self.navigationController popToRootViewControllerAnimated:animated];
} 
```

这几乎可以按预期工作，因为视图 ​​C 被关闭，视图 A 绕过视图 B 重新返回。问题是，视图 A 中的导航栏仍然认为它更深一层，因为它仍然显示“返回”按钮而不是查看 A。我必须再次点击“返回”按钮才能显示正确的按钮。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:57:35.587

在 View C 中分配您自己的 barButtonItem 并将其放入`self.navigationItem.leftBarButtonItem`以替换后退按钮并让此按钮的操作执行`[self.navigationController popToRootViewControllerAnimated:YES]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:38:51.337

我不确定你能做到这一点，或者你应该这样做。后退按钮有一个特定的目的——返回到前一个视图控制器，我认为你不应该尝试颠覆它（它的标题将指向那个，而不是你的第一个）。最好在 viewC 的导航栏中添加另一个条形按钮，并将其连接到执行 popToRootViewController 的代码。

# php - 使用 pushwoosh 推送到 1 个特定设备

> ID：14591487
> 
> 赞同：1
> 
> 时间：2013-01-29T20:19:10.797
> 
> 标签：php, android, push-notification

我正在尝试设置 pushwoosh 来处理我的 Android 应用程序的通知。我使用 PHP 作为我的支持，现在想发送到一个特定的设备/令牌，但没有运气？

这样做时：

```
pwCall( 'createMessage', array(
'application' => PW_APPLICATION,
'auth' => PW_AUTH,
'notifications' => array(
            array(
                'send_date' => 'now',
                'devices' => array('APA91BGJ1GCEV9R8QFIJIS_OPHJT2Q1GFJVQQZ9G6OGD0VUMUVPFTZIOUCX4-HOQZ9MK_EGUKP_GA3QATFHKIDALXMNDDW0UEO4LSFDWP4KBJFMKD3_4_24ACAJ5S_YMHG-ZLWTAWJA15GAXGTMO4HJLB02SJNDFSQ'),
                'content' => 'This is a test message!',
                'data' => array( 'custom' => 'json data' )
            )
        )
    )
); 
```

...它发送到连接到我的 pushwoosh 应用程序的所有设备？我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T12:07:57.190

定义（'PW_AUTH'，'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'）；定义（'PW_APPLICATION'，'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'）；

```
 $query = mysql_query("Select * from xxxxx where id ='".xxxx."'");

    while($res=mysql_fetch_array($query))
    {

    function doPostRequest($url, $data, $optional_headers = null) {
    $params = array(
        'http' => array(
            'method' => 'GET',
            'content' => $data
        ));
    if ($optional_headers !== null)
        $params['http']['header'] = $optional_headers;

    $ctx = stream_context_create($params);
    $fp = fopen($url, 'rb', false, $ctx);
    if (!$fp)
        throw new Exception("Problem with $url, $php_errmsg");

    $response = @stream_get_contents($fp);
    if ($response === false)
        return false;
    return $response;
}

function pwCall( $action, $data = array() ) {
    $url = 'https://cp.pushwoosh.com/json/1.3/' . $action;
    $json = json_encode( array( 'request' => $data ) );
    $res = doPostRequest( $url, $json, 'Content-Type: application/json' );
   // print_r( @json_decode( $res, true ) );
 }

 $div =  $res['device_token'];
 $username = $res['username'];

     pwCall( 'createMessage', array(
    'application' => PW_APPLICATION,
    'auth' => PW_AUTH,
    'notifications' => array(
        array(
            'send_date' => 'now',
            'devices' => array($div),
            'content' => $username.' has sent you an challenge!',
            'data' => array( 'custom' => 'json data' )
              )
             )
            )
           );

    }

 $div = "Device Token,you can assign it dynamically from database or statically. 
```

# php - Wordpress 通过孩子 ID 获取当前的学期后父母

> ID：14591491
> 
> 赞同：6
> 
> 时间：2013-01-29T20:19:22.780
> 
> 标签：php, wordpress, parent-child, term

在页面中我有术语孩子的 ID，我需要通过孩子 ID 找出这个孩子的父母，这很容易，也许有人可以帮忙？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T20:23:22.370

这就是该[`get_term`](http://codex.wordpress.org/Function_Reference/get_term)功能的用途：

```
$term_id = 21; // Lucky number :)

$child_term = get_term( $term_id, 'category' );
$parent_term = get_term( $child_term->parent, 'category' ); 
```

替换`'category'`为您使用的任何分类法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-02T13:24:56.670

```
$terms = get_the_terms( $_product->id , 'product_cat');
if($terms) {
    foreach( $terms as $term ) {
        $term = get_term_by("id", $term->parent, "product_cat");
        if ($term->parent > 0) {
            $term = get_term_by("id", $term->parent, "product_cat");
        }
        $cat_obj = get_term($term->term_id, 'product_cat');
        $cat_name = $cat_obj->name;
    }
}
echo '<br />('. $cat_name . ')'; 
```

# java - android - 调整图像大小时出现内存不足错误

> ID：14591502
> 
> 赞同：0
> 
> 时间：2013-01-29T20:20:09.300
> 
> 标签：java, android, image, memory

我正在尝试调整一些图像的大小并将它们保存在另一个文件夹中。这是代码：

```
 for(int i = 0; i < files.length; i++)
           {

               File image  = new File(direct, (String) files[i].subSequence(files[i].lastIndexOf("/"),files[i].length()));

               bitmap = ImageResizer.decodeSampledBitmapFromFile(files[i], targetWidth, targetHeight);

                    try {

                        outStream = new FileOutputStream(image);
                        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outStream); 

                        outStream.flush();
                        outStream.close();
                        success = success && true;
                    } catch (FileNotFoundException e) {
                        success = false;
                        e.printStackTrace();
                    } catch (IOException e) {
                        success = false;
                        e.printStackTrace();
                    }
                    bitmap.recycle();

                    System.gc();
                    publishProgress((int) ((i / (float) count) * 100));

                     // Escape early if cancel() is called
                     if (isCancelled()) break;

           } 
```

decodeSampledBitmapFromFile 是从安卓开发者那里复制过来的：

```
public static Bitmap decodeSampledBitmapFromFile(String filename,
        int reqWidth, int reqHeight, BitmapFactory.Options options) {

    // First decode with inJustDecodeBounds=true to check dimensions
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(filename, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeFile(filename, options);
} 
```

我最大的问题是，代码在我的摩托罗拉里程碑上运行得很好，但在 Galaxy SIII 上我收到了这条消息。这是异常消息：

```
 01-29 21:12:54.709: E/dalvikvm-heap(24333): Out of memory on a 31961104-byte allocation.
    01-29 21:12:54.724: E/AndroidRuntime(24333): FATAL EXCEPTION: AsyncTask #2
    01-29 21:12:54.724: E/AndroidRuntime(24333): java.lang.RuntimeException: An error occured while executing doInBackground()
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at java.lang.Thread.run(Thread.java:856)
    01-29 21:12:54.724: E/AndroidRuntime(24333): Caused by: java.lang.OutOfMemoryError
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at         android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:650)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:389)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at imagegrid.ImageResizer.decodeSampledBitmapFromFile(ImageResizer.java:123)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at ResizeWorker$ResizeImages.doInBackground(ResizeWorker.java:120)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at ResizeWorker$ResizeImages.doInBackground(ResizeWorker.java:1)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    01-29 21:12:54.724: E/AndroidRuntime(24333):    ... 5 more 
```

我尝试了几个技巧，但没有什么真正的接缝工作。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:27:28.277

Android 上有一个众所周知的问题，与管理从相机捕获或来自内部存储的图像和视频元素有关。

您可以找到有关多个开发人员线程的其他信息，例如这个（[phonegap](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/YWZlnFUfRjE)）或这个（[apache](https://issues.apache.org/jira/browse/CB-193)）。不幸的是，为了避免这些问题，开发人员无能为力（AFAIK）。

# joomla - 使用 com_user 从外部应用程序添加 Joomla 用户

> ID：14591504
> 
> 赞同：0
> 
> 时间：2013-01-29T20:20:12.293
> 
> 标签：joomla, joomla2.5

我有一个本机应用程序，它允许使用 Joomla 用于注册的相同元素进行注册。

我相信这篇[文章](https://stackoverflow.com/questions/1904809/how-can-i-create-a-new-joomla-user-account-from-within-a-script/1904855#1904855)是最相关的。它基于 Joomla 1.5，我想为 2.5 构建它。@mavrosxristoforos 有一个基于 2.5 的答案。但我想将其构建为 Joomla 内部的组件，而不是外部脚本。

我想调用通常的 com_user 组件来注册用户，因为我有一个带有支付处理器的完整流程，因此将其保存在 Joomla 中很重要。这篇[文章](http://www.diademblogs.com/content-management-systems/two-ways-to-add-joomla-users-using-your-custom-code)似乎概述了我想要的第一个选项。

我不明白的是如何通过 URL 调用注册过程。用于注册的 POST 似乎是：

```
http://myhost.com/component/users/?task=registration.register 
```

有没有办法创建我自己的 URL 来传递所需的详细信息？IE

```
http://myhost.com/component/users/?task=registration.register&user=blah&password=foo... 
```

如果这是可能的，那么将会有另一个问题是令牌生成。可以在外部生成，这样我就不必像帖子那样评论它（这似乎非常不安全）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:23:08.253

是的，你可以这么做。

您可以通过 url 传递值以注册到 joomla 站点。只有 url 参数应该与 reg 类似的东西。

您也可以修复令牌的问题。

如果您的外部应用程序运行在同一个 joomla 安装服务器上。那么您可以在根目录中保留一个文件并将 joomla 框架加载到该文件并在那里创建令牌，然后发布用户数据。因为这个[链接会帮助你。](https://stackoverflow.com/questions/13917178/login-user-joomla-in-external-php/13925349#13925349). 然后你可以使用令牌创建

```
JHtml::_('form.token'); 
```

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:41:45.913

我真的认为这不可能解决令牌问题。最后，这篇文章回答了这样做的方式。我为我的本机应用程序（iOS/Android）实现使用了一个带有 Oauth2 实现的 Joomla 组件。

这个原始[帖子](https://stackoverflow.com/questions/1904809/how-can-i-create-a-new-joomla-user-account-from-within-a-script/1904855#1904855)是要走的路，但不要遵循 Joomla 2.5 的解决方案。看看那些说他们已经过 2.5 测试的回复。

# api - 谷歌地图消失了

> ID：14591505
> 
> 赞同：0
> 
> 时间：2013-01-29T20:20:14.167
> 
> 标签：api, google-maps

我在我们的网站上遇到问题，几天前谷歌地图不再显示。

这是它不起作用的页面的两个链接：

[链接 1](http://www.goodneighbors.org/index.php?option=com_content&view=project_detail&id=76&listing_id=76&project_id=257&page_num=&sid=k1f80g0hdg6mecc2fovtkil0v3) - 项目详细信息页面

[链接 2](http://www.goodneighbors.org/index.php?option=com_content&view=category&id=76) - 项目类别页面

它们都使用相同类型的代码工作，并且直到一天前都运行良好。

上次它不起作用是因为有人没有在 lat long 坐标部分插入正确的数字类型。

这是执行此操作的代码，以防有人遇到同样的问题。请参阅下面的答案（[谢谢乔纳森库恩](https://stackoverflow.com/users/333074/jonathan-kuhn)！）

```
<script type="text/javascript">
  Shadowbox.init({
    // let's skip the automatic setup because we don't have any
    // properly configured link elements on the page
    skipSetup: true
  });
  <?php
    session_start();
    if (empty($_SESSION['count'])) {
      $_SESSION['count'] = 1;
    }
    else {
      $_SESSION['count']++;
    }
  ?>
  window.onload = function() {
  // open a welcome message as soon as the window loads
  <?php
    if ($_SESSION['count'] == 1) {
  ?>
  Shadowbox.open({
    content:    '<div id="welcome-msg"><p style="padding:4px 30px; margin:4px; color:#fff;">Awesome stories, photos, news, and more on our projects, straight to your inbox.</p><p style="padding:4px 30px; margin:4px; color:#fff;">Enter your e-mail and click Submit to join.</p><form method="post" name="newsletter" action="include/newsletter_submit.php" onsubmit="return validateForm_newsletter()" style="padding:10px 30px;"><input type="text" name="email_address" class="newsletter_textbox"> <input type="submit" name="button" class="newsletter_button" value="Submit" style="margin-top:10px;"><p style="padding:18px 15px; margin:4px; color:#fff;">You can also enter your e-mail at the bottom of our homepage.</p></form></div>',
    player:     "html",
    title:      "Get our friendly updates!",
    height:     250,
    width:      350
  });
<?php } ?>
};
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:31:02.830

我相信您正在使用运行空函数的 window.onload 覆盖通常运行初始化函数的主体 onload。查看第一个链接的源代码，就在第 69 行附近，您有：

```
window.onload = function() {

    // open a welcome message as soon as the window loads
}; 
```

我认为这是覆盖 body 标签中的 onload 。在萤火控制台中，如果您运行`document.body.onload.toString()`它会显示空函数、注释和所有内容。

* * *

编辑以添加示例包装函数：

```
//make a temporary empty function
var tmp=function(){};
//check if there is an onload function already
if(window.onload && typeof window.onload == 'function'){
    //make tmp the onload function
    tmp=window.onload;
}
window.onload=function(){
    //call the original onload function
    tmp.apply(this, arguments);

    //do something else for shadowbox
} 
```

基本上我所做的是检查是否已经存在 window.onload ，如果有，则将该函数保存到临时变量中。然后分配一个调用 temp 函数的新 window.onload。我使用 Function.apply 传递 window.onload 接收到的任何参数，这些参数可能因浏览器而异，但这可以确保临时函数将获得与原始函数相同的所有参数。

# c# - 事件日志索引是否唯一

> ID：14591507
> 
> 赞同：0
> 
> 时间：2013-01-29T20:20:15.833
> 
> 标签：c#, event-viewer

我通过以下方式从 Windows 中的事件日志中获取信息：

```
private void button1_Click(object sender, EventArgs e)
{
  EventLog eventLog;
  eventLog = new EventLog();
  eventLog.Log = "Security";;
  eventLog.Source = "Security-Auditing";
  eventLog.MachineName = "SERVER";

  var count = 0;
  foreach (EventLogEntry log in eventLog.Entries.Cast<EventLogEntry>().Where(log => log.InstanceId == 4625))
  {
    Console.Write("eventLogEntry.Index: {0}{1}", log.Index, Environment.NewLine);
    SaveRecord(log);
    count++;
  }
} 
```

我正在尝试捕获对我的服务器的所有无效登录，然后在 x 次无效尝试后添加一个条目。

我正在循环浏览事件日志并毫无问题地获取信息，但我怎么知道我停止阅读的最后一条记录是什么？当日志获得更多信息时，我需要重新开始阅读，但我需要一个起点。

我在想我可以在 EventLogEntry 上使用索引，但我找不到任何信息。我的机器上的那些是 6 位数字。

这有多可靠？我应该离开别的东西吗？我应该在阅读后清除该日志吗？

感谢您的输入！

=======我做了什么========

在 Apokal 的帮助下，我做了以下工作：

```
/// <summary>
/// Returns all events in the windows event log that match the passed in criteria.
/// If nothing is passed in then it will return all events where the a user attemtped
/// to log into the the machine and gave an invalid username or password.
/// </summary>
/// <param name="eventLogMachineName">The machine where the event log is at.</param>
/// <param name="cutoffdatetime">Date and time of the cut off for the list.</param>
/// <param name="eventLogName">'Log Name' in the event log. This is the folder that the events reside in.</param>
/// <param name="eventLogSource">Event log 'Source'.</param>
/// <param name="instanceId">Filters to a specific 'Event Id' in the event log.</param>
/// <returns></returns>
public static IEnumerable<EventLogEntry> GetEventLogs(string eventLogMachineName,
                                                      DateTime cutoffdatetime,
                                                      string eventLogName = "Security",
                                                      string eventLogSource = "Security-Auditing",
                                                      int instanceId = 4625)
{
  var eventLog = new EventLog {Log = eventLogName, Source = eventLogSource, MachineName = eventLogMachineName};
  return from EventLogEntry log in eventLog.Entries
         where log.InstanceId == instanceId &&
               log.TimeGenerated > cutoffdatetime
         select log;
} 
```

我这样称呼它：

```
private void button1_Click(object sender, EventArgs e)
{
  var lastcheckdatetime = Properties.Settings.Default.LastCheckDate;
  if (lastcheckdatetime < (DateTime.Now.AddDays(-30)))
  {
    lastcheckdatetime = DateTime.Now.AddDays(-7);
  }
  var log = EventLogClass.GetEventLogs("TGSERVER", lastcheckdatetime);
  Properties.Settings.Default.LastCheckDate = DateTime.Now;
  Properties.Settings.Default.Save();

  var count = 0;
  foreach (EventLogEntry l in log)
  {
    Console.WriteLine("---------------------");
    Console.Write("eventLogEntry.Index: {0}{1}", l.Index, Environment.NewLine);
    Console.Write("eventLogEntry.TimeGenerated: {0}{1}", l.TimeGenerated, Environment.NewLine);
    count++;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:13:50.083

根据我的经验和很少的研究`Index`属性显示了从创建事件日志开始编写的事件索引。

但是有几件事你错过了。

首先，您必须记住事件日志的大小是有限的。例如，假设“安全”日志只能包含 1000 个条目（如果查看 eventvwr.msc，则实际大小以 mb 为单位显示在 eventlog 属性中）。因此，当事件日志已满时，有 3 种方式：

1.  在旧事件上写新事件。在这种情况下，记住上次读取的事件索引并不好。因为该索引指向的事件可以简单地被覆盖。
2.  做一个存档。在这种情况下，记忆索引现在可以指向存档中的事件，而不是事件日志的当前 .evtx 文件
3.  不要编写新事件，手动清除事件日志。我不认为这很有趣，因为您需要一个自动化工具。

因此，可以将事件日志设置为存档并记住事件的最后索引。然后在再次读取事件日志时，首先获取当前事件日志文件中最旧的记录：

```
EventLog log = new System.Diagnostics.EventLog("Security");
int oldestIndex = log.Entries[(int)eli.OldestRecordNumber].Index; 
```

然后`oldestIndex`与您的比较`lastReadedIndex`，如果`lastReadedIndex < oldestIndex`您首先必须阅读档案，并且只阅读当前的事件日志文件。

默认情况下，所有存档都存储在当前事件日志文件 (.evtx) 所在的同一目录中。[使用EventLogReader 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.reader.eventlogreader.aspx)可以轻松读取档案。尝试查看[EventRecord](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.reader.eventrecord.aspx)及其属性，我认为它与类的属性`RecordId`相同（目前无法检查）。`Index``EventLogEntry`

另一种方法是记住编写事件的时间，并将其用作搜索新事件的起点，以防万一`Index`并`RecordId`无济于事。

祝你好运！

# c# - Interop.Word.ApplicationClass.DocumentBeforeSaveEvent 并不总是触发

> ID：14591514
> 
> 赞同：0
> 
> 时间：2013-01-29T20:20:48.470
> 
> 标签：c#, ms-word, word-automation

我有一个自动化 MS Word 的 C# 应用程序。我想跟踪自动文档，并且某些操作必须在关闭时发生，因此我禁用了文档关闭事件。

设置`cancel = true;`适用于我的工作站、用户工作站和新成像的工作站。但是，它不适用于我的一位测试用户。如果我以其他用户身份登录她的电脑，它就可以工作。这让我相信问题出在她应用于 Word 的某些设置上。

我怎样才能`DocumentBeforeCloseEvent`可靠地触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:05:12.160

我在这里发布这个以防它帮助别人。

我最终在麻烦的 PC 上进行了维修。这不是一个理想的解决方案，但它确实有效。

# python - Crawlspider 不刮任何东西

> ID：14591516
> 
> 赞同：0
> 
> 时间：2013-01-29T20:20:54.693
> 
> 标签：python, scrapy

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
#scrapy crawl dmoz -o items.json -t json
from scrapy.http import Request
from urlparse import urlparse

from manga.items import MangaItem

class MangaHere(CrawlSpider):
    name = "mangahs"
    allowed_domains = ["mangahere.com"]
    start_urls = ["http://www.mangahere.com/seinen/"]
    rules = [Rule(SgmlLinkExtractor(allow = ('//a[@class="next"]')), follow=True, 

        callback='parse_item'),]

#def parse(self, response):
    # get indext depth for every page
   # hxs = HtmlXPathSelector(response)
   # next_link = hxs.select('//a[@class="next"]')
   # index_depth = int(next_link.select('preceding-sibling::a[1]/text()').extract()[0])        
    #create a request for the first page

  #  url = urlparse("http://www.mangahere.com/seinen/")
  #  yield Request(url.geturl(), callback=self.parse_item)

    #create a request for each subsequent page in the form "./seinen/x.html"
 #   for x in xrange(2, index_depth):
 #       pageURL = "http://www.mangahere.com/seinen/%s.htm" % x
 #       url = urlparse(pageURL)
  #      yield Request(url.geturl(), callback=self.parse_item)
    def parse_start_url(self, response):
        list(self.parse_item(response))

    def parse_item(self,response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//ul/li/div')
        items = []
        for site in sites:
            rating = site.select("p/span/text()").extract()      
            desc = site.select("p[2]/text()").extract()
            for i in rating: 
                for p in desc:
                    if float(i) > 4.8 and "ecchi" not in str(p):
                        item = MangaItem()
                        item['title'] = site.select("div/a/text()").extract()
                        item['link'] = site.select("div/a/@href").extract()
                        item['desc'] = site.select("p[2]/text()").extract()
                        item['rate'] = site.select("p/span/text()").extract()         

                        items.append(item)
        return items 
```

评论的东西是一种在没有爬虫的情况下爬取页面的方法，这里有人帮助我。但是为了知道，我还是想学习如何让爬虫工作。

我没有收到任何错误，但它刮掉了 0 页，我检查了很多线程，听起来我`parse_start_url`出于某种原因必须添加一个，但这没有帮助，更改 parse 函数的名称也没有帮助。

什么不工作？我的规则不正确还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:22:03.713

您需要将规则更改为以下内容：

```
rules = [Rule(SgmlLinkExtractor(allow = ('/\d+.htm')), follow=True, 
    callback='parse_item'),] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:56:29.347

`allow`应该是`REGEX`网址而不是`xpath` [http://doc.scrapy.org/en/0.12/topics/spiders.html](http://doc.scrapy.org/en/0.12/topics/spiders.html)

如果你想使用 xpath 那么你需要使用`restrict_xpath`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-29T22:17:51.347

您在规则中的回调与方法不匹配。CrawlSpider 有一个名为 parse 的默认方法，因此`def parse(CrawlSpider)`应更改`def parse_item`为匹配您的回调

# jquery - 拦截来自 iframe 的 ajax 请求

> ID：14591521
> 
> 赞同：4
> 
> 时间：2013-01-29T20:21:08.983
> 
> 标签：jquery, ajax, events, iframe

我可以在“父”站点上拦截来自 iframe 的 ajax 请求吗？我需要一个解决方案，我不会在 iframe 中修改网站？（当然两者都在同一个域中）

此致

# android - android TagHandler 和 CSS

> ID：14591525
> 
> 赞同：4
> 
> 时间：2013-01-29T20:21:25.497
> 
> 标签：android, html, css, textview

我正在尝试使用 TextView 显示 HTML。我的 HTML 包含一些 CSS 样式。这是我的 HTML 示例。

```
<p><strong>bold </strong><em>&nbsp;italic </em><span style="text-decoration: underline;">underlined</span>&nbsp;<span style="text-decoration: line-through;">striked</span><span style="font-family: symbol;"> custom font</span><span style="font-size: large;"> bigger&nbsp;</span></p>
<br/><p style="text-align: right;"><span style="font-size: x-small;">aligned to right</span></p>
<br/><p style="text-align: center;"><span style="font-size: x-small;">aligned to center</span></p>
<br/><p style="text-align: justify;"><span style="font-size: x-small;">this text is justifyed&nbsp;</span></p>
<br/><p><span style="font-size: x-small; color: #ff0000;">colored&nbsp;</span></p>
<br/><p><span style="font-size: xx-large; color: #ff0000;"><span style="font-size: x-small;">symbol&nbsp;</span>&clubs;</span></p> 
```

我可以使用 TagHandler 处理所有标签。但我无法获得有关样式的任何信息。是否可以使用 TagHandler 获取样式信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T14:17:12.957

你可能已经解决了，但没有。该`handleTag`方法只是将标签名称转换为`String`格式。

# c# - 如何跟踪来自 .NET 4.5 的 SOAP 请求

> ID：14591531
> 
> 赞同：1
> 
> 时间：2013-01-29T20:21:42.287
> 
> 标签：c#, .net, wcf, soap, trace

我的 C# 项目中有对“ [http://api.microsofttranslator.com/V2/Soap.svc](http://api.microsofttranslator.com/V2/Soap.svc) ”的服务引用。我想看看我在带有 SOAP 正文的 Http 请求中向该服务发送了什么。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:13:55.553

如果您使用 WCF 访问该服务，您可以启用消息跟踪（如此[处](http://msdn.microsoft.com/en-us/library/ms730064.aspx)所述）以记录 SOAP 信封。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:55:28.190

您可以在代码中使用提琴手和其他第 3 部分 dll 来获取肥皂消息和其他详细信息。

# jquery - 在 Select 语句中使用 $("#select-id").prop("selectedIndex")

> ID：14591535
> 
> 赞同：3
> 
> 时间：2013-01-29T20:21:56.383
> 
> 标签：jquery

好的，所以我已经明白使用这个

```
$("#select-id").prop("selectedIndex") 
```

与此相结合

```
$("#select-id").prop("selectedIndex", 1) 
```

将有助于获得我在将某些元素传递回 select 语句时正在寻找的结果，但我找不到任何使用示例。

假设我在选择中有 6 个元素，并且我将它们与另一个字段中的某些元素进行比较。推荐的设置方法是什么？我了解使用 for 循环，然后使用 if 语句来遍历这些值，但我不太了解如何使用上述 .prop 语句。

任何帮助，将不胜感激。

```
function compareAmts($FIELDSwitchText, $FIELDSwitchPull)
{
var SwitchAdv = 0;
temp = $("#FIELD_SwitchPull").val();
var SwitchComm = parseInt(temp.replace(/\,/g,''));

if($("#FIELD_SwitchText").val()!=""){
    SwitchAdv = parseInt($("#FIELD_SwitchText").val()); 
```

基本上这收集了信息，然后我需要在 For 循环中使用上面的 2 行来获取和设置 SelectedIndex，从而选择下拉菜单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:24:15.297

如果您尝试按其值选择 select 中的特定选项，请使用`val()`. 例如：

```
$('#select-id').val('foo'); 
```

将选择以下选项：

```
<select id="select-id">
    <option value="">Please select</option>
    <option value="foo">Foo</option> <!-- jQuery code selects this one -->
    <option value="bar">Bar</option>
</select> 
```

*更新*

如果您有要选择的特定项目索引，则可以使用`eq()`来获取特定选项。鉴于上述 HTML，以下内容也将选择该`foo`选项：

```
$('#select-id option').eq(1).prop('selected', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:32:47.030

```
var $select = $("#select-id");
var value = $('textarea').val(); // Or whatever

$select.find('option').each(function (index) {
    if ( $(this).text() == value ) { // Or whatever other criteria you have...
        $select.prop('selectedIndex', index);
        return false;
    }
}); 
```

# javascript - javascript：循环遍历表格中的所有单元格

> ID：14591538
> 
> 赞同：1
> 
> 时间：2013-01-29T20:22:31.540
> 
> 标签：javascript, jquery, html

我正在尝试遍历表中的所有单元格并对值进行比较。

```
 var table = document.getElementById("assignedvlans");
            alert(table);
            alert($('#assignedvlans tbody tr').length);
            for (var i = 0, cell; cell = table.cells[i]; i++) {
                 //iterate through all cells in table.
                 alert('in the loop');
                 alert(cell.val());
                 if (cell.val == IdforVlanToAdd)
                 {
                    alert('This vlan is already associated with the port.');
                    $bexit = true;
                    break;
                 }                  
            } 
```

当我测试此代码时，警报（表格）代码正在工作 - 它返回“object HTMLTableElement”并且表格长度的警报返回4，这也是正确的。但是循环内的警报语句永远不会发生。你能告诉我循环控制哪里出错了吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T20:26:15.387

`table`contains `rows[]`，它们本身包含`cells[]`。您无法`cells[]`直接从`table`.

`table.getElementsByTagName('td')`如果没有嵌套表，您可以用作快捷方式。

否则，您应该遍历每个`rows[]`并且在该循环中您可以遍历`cells[]`.

```
var table = document.getElementById('assignedvlans'),
    rows = table.rows, rowcount = rows.length, r,
    cells, cellcount, c, cell;
for( r=0; r<rowcount; r++) {
    cells = rows[r].cells;
    cellcount = cells.length;
    for( c=0; c<cellcount; c++) {
        cell = cells[c];
        // now do something.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:30:44.673

试试这样：

```
 var $table = $('#assignedvlans tbody td');
        $.map($table,function(){
             if ($(this).text() == IdforVlanToAdd)
             {
                alert('This vlan is already associated with the port.');
                return;
             }   
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:27:55.953

您在循环内没有收到*任何*警报的原因是您的`for`循环结构不正确。它立即退出，因为赋值`cell = table.cells[i]`返回 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-29T07:15:12.147

```
var myDataArr = [];
$('#dynamic_cards tr').each(function(){
    $(this).find('td').each(function(){
        myDataArr.push($(this).text());
    });
});
console.log(myDataArr); 
```

# ruby - Ruby 命令行解析

> ID：14591539
> 
> 赞同：0
> 
> 时间：2013-01-29T20:22:33.220
> 
> 标签：ruby, parsing, command-line, command-line-arguments

```
class Test

    options = Trollop::options do
        opt :mode, "Select script mode", :default => 0
        opt :net, "Internal IP range", :type => :string
    end

@options = options

    def test
        pp @options
    end
end 
```

为什么我打电话时`@options`返回？`nil``test()`

我还尝试`@options`在第一次调用 Trollop 时设置为实例。我需要能够将从 Trollop 返回的选项哈希传递到类中的不同方法中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:47:05.010

如果您真的想使用类实例变量来存储选项，那么这将起作用：

```
class Test
   @options = Trollop::options ...

   class << self
     attr_accessor :options
   end

   def test
     pp Test.options
     # or self.class.options
   end
 end

 # And this will work too..
 pp Test.options 
```

否则，您可能想要使用类变量`@@options`或常量，就像其他人指出的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:34:44.027

你在这里有一个范围问题。`@options`在类上下文中是类的实例变量。在`test`中，您访问当前实例中的实例变量`@options`。`OPTIONS`尝试具有词法作用域的常量，即 aka 。也许其他人知道对此有更清洁的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:43:38.713

正如[Tass](https://stackoverflow.com/users/411944/tass)指出的那样，更改`@options`为`OPTIONS`是一种方式。

您也可以`@@options;`在任一上下文中使用它作为类变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T20:49:57.877

您正在添加一个类实例变量，但是当您在方法中引用它时，您正在引用看起来像实例变量的东西。

首先，您可能希望使用类变量而不是类实例变量。[这里](http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/)有一些关于区别的信息。

```
class Test

    @@options = Trollop::options do
        opt :mode, "Select script mode", :default => 0
        opt :net, "Internal IP range", :type => :string
    end

    def test
        pp @@options
    end
end

Test.test 
```

另一种选择是在初始化测试对象时实例化您的类变量，如下所示：

```
class Test

    def initialize
        @options = Trollop::options do
            opt :mode, "Select script mode", :default => 0
            opt :net, "Internal IP range", :type => :string
        end
    end

    def test
        pp @options
    end
end

t = Test.new
t.test 
```

# arcgis - 如何在每个多边形中生成 x 个随机点？

> ID：14591554
> 
> 赞同：0
> 
> 时间：2013-01-29T20:23:13.470
> 
> 标签：arcgis

假设我有一个带有多边形的图层和一个属性表，其中有很多记录。我做了一个表格，说明每个多边形里面有多少记录。现在我想在多边形中生成随机点（每条记录 1 个）。我如何到那里 ？谢谢

编辑：我设法在多边形中创建了正确的随机点 nb，但是我现在如何将它们发送到不同的记录？如何将落在多边形中的每条记录分配给该多边形中的一个点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:58:11.403

问题是“随机”是什么意思。您是否希望在包围多边形的某个区域（例如凸包）内以恒定密度（点/区域）散布“随机”点？如果是这样，采用包围多边形的最小正方形可能是最简单的解决方案，生成一个随机 x 和一个随机 y，并测试（参见[http://en.wikipedia.org/wiki/Point_in_polygon](http://en.wikipedia.org/wiki/Point_in_polygon)）是否偶然点位于多边形内。如果不是，则生成一个新点并再次测试。

# c# - 通过代码注入从另一个应用程序调用方法？

> ID：14591560
> 
> 赞同：-1
> 
> 时间：2013-01-29T20:23:32.740
> 
> 标签：c#, c++, linux, code-injection

我有一个在锁定的 linux 机器上运行的应用程序。

它的签名是从启动时检查的，所以我不能将应用程序换成补丁版本。

但是，我可以从命令行运行其他应用程序。

无论如何，我可以编写一个应用程序来调用当前正在运行的另一个应用程序中的某个方法吗？也许通过代码注入？

我确实有这个其他应用程序的源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:38:42.087

如果你有 root 访问权限，或者你启动了你想在其中运行的程序，我想你可以使用调试功能（例如 ptrace）来访问受保护应用程序内的内存。如果您没有 root 访问权限或者您自己是应用程序的所有者，我希望（并相信）您不能做您想做的事，因为这会使整个操作系统非常不安全！

# javascript - 关闭窗口上的弹出 div

> ID：14591561
> 
> 赞同：1
> 
> 时间：2013-01-29T20:23:49.910
> 
> 标签：javascript, jquery, html, css

我看到了这篇文章：[pop-up div over parent window](https://stackoverflow.com/questions/6092782/pop-up-div-over-parent-window)和有关 yensdesign 的消息，这很好，但它仍然没有“完全”涵盖我想要的内容，即：

此时我有两个弹出窗口。一个用于当窗口关闭时，另一个用于在访问者在页面上停留 x 秒时弹出。这样做的缺点是： 1\. 它[填充]-丑陋 2\. 其中一个看起来像一个 div，另一个像一个弹出窗口（在 Firefox 中），而它们在其他浏览器中看起来非常简单和丑陋的弹出窗口。

所以我想拥有相同的功能，但随后使用 div，这样它们在所有浏览器中看起来会更好并且表现得适当。

我能找到的唯一东西有关闭 div 的代码......所以有人可以帮我吗？

编辑：请参阅[http://www.cornerstws.com/test.html](http://www.cornerstws.com/test.html)了解我到目前为止的简单 javascript 解决方案..（弹出窗口在 3 秒后出现，当您关闭窗口时出现另一个弹出窗口（或刷新.. 不是也不错））。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:25:40.770

正如我从你的问题中了解到的那样，你想要一个可以通过 java 脚本函数触发的弹出窗口

你可以查看这个博客以获得一个简单的弹出窗口

[http://blog.theonlytutorials.com/a-very-simple-jquery-popup-ready-to-use-code/](http://blog.theonlytutorials.com/a-very-simple-jquery-popup-ready-to-use-code/)

然后你可以重新设计它以满足你的需要，你可以使用这个功能

```
$('#pop').click(); 
```

而不是单击链接打开弹出窗口。

希望这个答案对你有所帮助

# css - 如何在窗口调整大小时调整特定 DIV 的大小以实现响应式布局？

> ID：14591565
> 
> 赞同：0
> 
> 时间：2013-01-29T20:24:15.483
> 
> 标签：css, web, css-float, responsive-design

这是我正在使用的代码。

[http://jsfiddle.net/qLjgM/2/](http://jsfiddle.net/qLjgM/2/)

基本上，随着浏览器窗口的大小调整（变小）。我正在尝试强制 2 个 div（中间 2 列和中间 3 列）调整大小，直到中间 3 列的最小尺寸宽度达到 200 像素，中间 2 列达到 300 像素。

```
#wrapper {
margin:0 auto;
width:100%;
max-width:500px;
}

#content-pad {
width:100%;
max-width:500px;
margin:0px;
background:#CCC;
font-size:12px;
}

#left-col {
float:left;
width:100px;
margin-top:12px;
background:#CCC;
}

#mid-col {
float:left;
width:100%;
min-width:200px;
max-width:270px;
margin-left:15px;
margin-top:12px;
background:#CCC;
}

#mid-col-wide {
float:left;
width:100%;
min-width:300px;
max-width:385px;
margin-left:15px;
margin-top:12px;
background:#CCC;
}

#right-col {
float:left;
width:100px;
margin-left:15px;
margin-top:12px;
background:#CCC;
} 
```

可以这么说，我正在使用 float 将它们对齐，但它给我带来了麻烦，右边的列正好在 LEFT SIDE 下方，我也想避免这种情况。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:33:07.680

问题是你给你的花车一个他们父母的100%的宽度，这是#content-pad。这无法考虑#left-col 占用的空间，因此浮动太宽而无法按照您的意愿流动。尝试这样的事情，使用更少的浮点数：

[http://jsfiddle.net/qLjgM/5/](http://jsfiddle.net/qLjgM/5/)

```
#wrapper { margin:0 auto; width:100%; max-width:500px; }
#content-pad { margin:0px; overflow: auto; }
#left-col { float:left; width:100px; margin-top:12px; margin-right: 10px; }
#mid-col { min-width:200px; margin-left:15px; margin-top:12px; }
#mid-col-wide { min-width:300px; margin-left:15px; margin-top:12px; }
#right-col { float:right; width:100px; margin-left:15px; margin-top:12px; }

        <div id="wrapper">
            <div id="content-pad">
                <div id="left-col">LEFT SIDE
                    <br />
                    <br />
                    <br />
                </div><!-- //left-col -->

                <div id="mid-col-wide">MIDDLE 2-COLUMN</div><!-- //mid-col -->
                <div id="right-col">RIGHT SIDE</div><!-- //mid-col -->
                <div id="mid-col">MIDDLE 3-COLUMN</div><!-- //mid-col -->
            </div><!-- //content-pad -->
        </div><!-- //wrapper --> 
```

# python - 两个 Python：不能从 Sublime 中导入，在终端中工作

> ID：14591568
> 
> 赞同：4
> 
> 时间：2013-01-29T20:24:29.370
> 
> 标签：python, macos, sublimetext2

我不知道为什么一年后这突然成为一个问题，但是我 pip-installed requests 并且在从 Sublime 运行时出现导入错误，但它在终端中运行良好。

我挖了一点，发现终端正在从`/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python`（请求工作的地方）运行 Python 2.7.3，而 Sublime 正在使用 2.7.2 从`/usr/bin/python`. 这就是我的专业知识结束的地方，如果我不知道自己在做什么，这是我不愿意摆弄的领域。我正在使用 OSX 10.8.2。有什么建议么？甚至不确定谷歌是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:00:18.523

由于您使用的是较新的非系统 Python（这是一个好主意），因此您需要告诉 Sublime Text 2 使用该 Python。尽管你的 shell`$PATH`被修改为包含较新 Python 的位置，但 Sublime Text 并不知道这一点。有关执行此操作的各种方法，请参[见此答案](https://stackoverflow.com/a/12342473/145403)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T20:26:32.567

开发时需要开始使用[virtualenv](http://www.virtualenv.org/en/latest/)和[virtualenvwrapper](http://www.doughellmann.com/projects/virtualenvwrapper/)。它为您的每个项目提供了一个沙盒 python 环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T04:02:59.467

我被引导到这个问题/答案（由上面的 Ned Deily 提出），它解决了所有问题。希望它可以帮助别人！（内德，很想给你业力，但在 26.7k 时，看起来你并不急需）。

[如何在 Mac OS X 10.6.4 上卸载 Python 2.7？](https://stackoverflow.com/questions/3819449/how-to-uninstall-python-2-7-on-a-mac-os-x-10-6-4)

# c# - 如何从列表中获取随机元素？

> ID：14591574
> 
> 赞同：1
> 
> 时间：2013-01-29T20:24:55.567
> 
> 标签：c#, random

> **可能重复：**
> [访问列表中的随机项目](https://stackoverflow.com/questions/2019417/access-random-item-in-list)

我想从字符串列表中随机生成一个元素，但是我不知道如何实现这一点。我有 4 个元素：aaa、bbb、ccc、ddd。我想生成其中一个随机绘制在屏幕上，我搜索了一段 C# 代码，但它不起作用。有谁知道怎么做这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T20:49:26.807

查看此链接以在 XNA 中绘制文本：

[http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series2D/Writing_text.php](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series2D/Writing_text.php)

获得该部分后，您只需创建一个列表并选择一个随机元素传递给`spriteBatch.DrawString()`. 这是一个可能看起来像的快速未经测试的版本。您应该修复此问题以适合您的代码。

```
Random r = new Random();
string rand = list[r.Next(list.Count)];

spriteBatch.DrawString(spriteFont, rand, new Vector2(20, 45), Colors.Black); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T20:30:10.823

当然，很容易：

```
List<string> list = new List<string>() { "aaa", "bbb", "ccc", "ddd" };

int l = list.Count;

Random r = new Random();

int num = r.Next(l);

var randomStringFromList = list[num]; 
```

此外，下次您应该包含不起作用的代码以及（可能的）原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T20:37:33.700

我不确定这是否是您需要的，但为什么不创建一个随机整数然后使用 string[int] 访问您的字符串数组。

```
namespace ConsoleApplication1
{
  using System;
  using System.Text;

  class Program
  {
    static void Main(string[] args)
    {
      Random random = new Random();
      string[] myStrings = new string[] { "aaa", "bbb", "ccc", "ddd" };

      for (int n = 0; n < 10; n++)
      {
        int rnd = random.Next(0, myStrings.Length);
        string s = myStrings[rnd];
        Console.WriteLine("-> {0}", s);
      }

      Console.ReadLine();
    }
  }
} 
```

# c++ - const_iterator 和模板，编译错误

> ID：14591578
> 
> 赞同：0
> 
> 时间：2013-01-29T20:25:24.563
> 
> 标签：c++, templates, iterator

我不明白为什么下面的代码不起作用，知道吗？

```
template <class T>
class Matrice
{
public:
...
    typedef typename std::vector<T>::const_iterator const_iterator;
    const_iterator& cend ( )
    {
        return valeurs.cend ( );
    }
...
private:
...
} 
```

这是编译器的抱怨：

> /Users/Aleks/Documents/DS OO/DS OO/Matrice.h:70:16：对“const_iterator”（又名“__wrap_iter”）类型的非 const 左值引用无法绑定到“const_iterator”（又名“ __wrap_iter')

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:34:25.487

`valeurs.cend`( [cppreference](http://en.cppreference.com/w/cpp/container/vector/end) ) 将一个实例返回给 a `const_iterator`（也就是说，它被声明为`const_iterator valeurs.cend()`）。

编译器需要创建一个[临时对象](http://msdn.microsoft.com/en-us/library/a8kfxa78%28v=vs.80%29.aspx)（内存区域）来存储`valeurs.cend()`. 此代码无法编译，因为您无法获取临时引用，因为后者不会超过函数调用。

您通常会按值返回一个迭代器：

```
typedef typename std::vector<T>::const_iterator const_iterator;
const_iterator cend ( )
{
    return valeurs.cend ( );
} 
```

这将确保返回的值`valeurs.cend()`被复制（或移动，在 C++11 中，我相信）到它的目标对象（如果你将返回的值分配给 type 的变量`const_iterator`）或另一个临时`Matrice<T>::cend()`调用的地方. 有关详细信息，请参阅 MSDN 说明的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:33:01.067

hmjd 是对的，您只需要 const_iterator，而不是参考。您不能使用引用的原因是 valeurs.cend () 是堆栈上的临时值，一旦函数返回，引用（如果可以使用）将无效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T20:34:11.820

正如其他人所说，以下行：

```
const_iterator& cend ( ) 
```

需要是：

```
const const_iterator& cend ( ) 
```

或者：

```
const_iterator cend ( ) 
```

# python - 如何将 virtualenv 与本地 dist 包隔离？

> ID：14591579
> 
> 赞同：5
> 
> 时间：2013-01-29T20:25:37.523
> 
> 标签：python, virtualenv

你如何使用'/usr/local/lib/python2.7/dist-packages'停止virtualenv？

目前当我跑步时

```
virtualenv --no-site-packages ENV 
```

它仍然使用我希望停止的 dist-packages

编辑：/usr/local/lib/python2.7/dist-packages 在 PYTHONPATH 中，它需要用于其他应用程序

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T20:42:56.350

您的编辑解释了您正在观察的行为。

`PYTHONPATH`激活 virtualenv 时需要取消设置。

```
unset PYTHONPATH
source /path/to/virtualenv/bin/activate 
```

`virtualenv --no-site-packages ENV`创建一个空的 virtualenv 就好了，但是您的`PYTHONPATH`导出会使您的空 virtualenv 无效。

为了使事情变得更简单，您可以编辑`activate`脚本并在`unset PYTHONPATH`那里添加命令。如果您想在停用 virtualenv 后恢复原始 PYTHONPATH，您还需要修改该`deactivate`文件中的函数。

# php - 404 Page Not Found 找不到您请求的页面。代码点火器

> ID：14591581
> 
> 赞同：3
> 
> 时间：2013-01-29T20:25:40.020
> 
> 标签：php, .htaccess, codeigniter, webserver, hosting

我已经在代码点火器上开发了一个网络应用程序..这是我第一次在代码点火器上工作..在我的本地主机上开发了一个网络应用程序之后。所以我决定将我的代码点火器网络应用程序放在临时免费服务器上.. 所以我在这个网站上上传了我的网站 [1freehosting](http://www.1freehosting.com/) ... 然后我导入了我的数据库 .. 之后我在 database.php 文件中更改了数据库的设置 .. 我还更改了 config.php 文件中的基本 url ..因为这是我的域名[http://hello.hostingsiteforfree.com/](http://hello.hostingsiteforfree.com/) ...所以我将其更改为此 url .. 但随后我收到以下错误...我不知道出了什么问题..我搜索了很多，但没有任何帮助..而且我忘了提到我的 .htaccess 文件是空的..意味着里面没有一行

这是我得到的错误

```
404 Page Not Found

The page you requested was not found. 
```

路由.php

```
 <?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

 $route['default_controller'] = "loginController";
$route['404_override'] = '';

 /* Location: ./application/config/routes.php */ 
```

我的控制器

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 
```

类 LoginController 扩展 CI_Controller {

```
 function index(){

    $new['main_content'] = 'loginView';
    $this->load->view('loginTemplate/template', $new); 

}

function verifyUser(){

    //getting parameters from view 
    $data = array(
            'username' => $this->input->post('username'),
            'password' => $this->input->post('password')
    );

    $this->load->model('loginModel'); 
    $query = $this->loginModel->validate($data);

          if ($query){             //if the user c validated
        //data variable is created becx we want to put username in session
            $data = array(
                'username' => $this->input->post('username'),
                 'is_logged_in' => true 
            );

           $this->session->set_userdata($data);
         redirect('sessionController/dashboard_area');
    }
    else
     {
        $this->index();
    }
}
function logout()
{
    $this->session->sess_destroy();
    $this->index();
}
}

?> 
```

配置文件

```
 $config['base_url']  = 'http://hello.hostingsiteforfree.com/';
   $config['index_page'] = 'index.php'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T23:55:28.273

由于您没有任何 .htaccess 来编辑您的网址，因此您必须`index.php` 在调用控制器时添加一个

`http://hello.hostingsiteforfree.com/index.php/loginController`

我尝试通过上面的 url 访问它并且它可以工作，但是数据库连接没有正确设置

在您的配置文件中，`$config['index_page'] = ''`如果它是空白的，请添加`index.php`一个

检查它是否有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:34:59.027

查看您的`application/routes.php`并确保您`$route['default_controller']`已正确设置为默认控制器。如下，这是我的routes.php：

```
$route['default_controller'] = "home";
$route['404_override'] = ''; 
```

另外，请确保您的默认控制器（在我的情况下，它`application/controllers/home_controller.php`和它内部是`class Home extends CI_Controller {...}`

--

如果这不起作用，请确保您的默认控制器正确调用您的默认视图并按如下方式加载它：

```
$this->load->view('home_view', $data); 
```

--

如果这不起作用，请查看您的`application/config/config.php`并确保以下内容正确设置，如果您想`index.php`在 url 中删除（对于干净的 url）：

$config['index_page'] = ''; $config['uri_protocol'] = "AUTO";

如果您想要干净的网址，请发布您的 .htaccess （应该遵循如下内容：http: [//www.farinspace.com/codeigniter-htaccess-file/](http://www.farinspace.com/codeigniter-htaccess-file/)），以便我们可以更详细地查看它并如果以上方法都没有解决它，请尝试修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:29:57.210

您是否使用 .htaccess 删除了 index.php？如果没有，那么把它放在最后。

# python - 适用于 Windows 8 RT 的 Python IDE？

> ID：14591583
> 
> 赞同：2
> 
> 时间：2013-01-29T20:25:44.903
> 
> 标签：python, ide, windows-rt

是否有适用于 Windows RT 的 python ide？或者有没有办法下载可以在 RT 上运行的 3rd 方 IDE？市场上有一个名为“Python 3 for Metro”的产品，但它与我在桌面上使用的名为“PyScripter”的 IDE 完全不同。

有人有什么建议吗？也许体面的在线IDE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:33:14.637

您可以查看[Code Writer](http://apps.microsoft.com/windows/en-US/app/code-writer/5149f454-94a7-40bc-90ef-eafd38355079)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-29T02:58:44.540

时间一晃而过。但现在可以在 Surface RT 上运行 Python 2.7。您所要做的就是将 Surface rt 设置为开发人员模式，如下所示：

[https://github.com/VNNGYN/Windows-RT-8.1-Development-Tool](https://github.com/VNNGYN/Windows-RT-8.1-Development-Tool)

你比让 Surface rt 在测试模式下运行。在测试模式下，您可以对所有已经移植的应用程序进行签名，网络上有可用的。要使用证书签署应用程序，您可以使用：

[https://github.com/VNNGYN/Windows-RT-8.1-Development-Tool/wiki/How-do-I-sign-an-application%3F](https://github.com/VNNGYN/Windows-RT-8.1-Development-Tool/wiki/How-do-I-sign-an-application%3F)

比所有应用程序，如 python 2.7 可以在标准模式下运行。

[https://github.com/VNNGYN/Windows-RT-8.1-Development-Tool/wiki/How-do-I-sign-an-application%3F](https://github.com/VNNGYN/Windows-RT-8.1-Development-Tool/wiki/How-do-I-sign-an-application%3F)

在那里你会发现Notepad++，它是生成python脚本的最佳工具

请享用

# c# - 独立复制列表

> ID：14591584
> 
> 赞同：0
> 
> 时间：2013-01-29T20:25:45.213
> 
> 标签：c#

**我制作了两个名为listA**和**listB**的List< Test> 。**我在listA**中保存了数据。我将数据从**listA**复制到**listB**。我更改了**listB**中的数据。当我更改 listB 中的数据时，**它**也会更改**listA** - 是否可以避免这种情况？

我希望你能帮助我:o)

```
public class Test
{
    public string Name { get; set; }
}

static void Test()
    {
        List<Test> listA = new List<Test>();
        List<Test> listB = new List<Test>();

        listA.Add(new Test { Name = "A" });
        listB.AddRange(listA);

        //I change the data in listB and the data in listA also get changed. 
        listB.First().Name = "B";
        Console.WriteLine("listA: {0} listB: {1}", listA.First().Name, listB.First().Name);

        //Can I avoid the change of data in listA?
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T20:28:15.617

将对象`listA`添加到`listB`：

```
listB.AddRange(listA.Select(t => new Test { Name = t.Name })); 
```

目前，您只是将引用复制`listA`到中`listB`，这些引用指向同一个对象。这就是为什么通过修改它们`listA`会使更改在`listB`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:53:00.543

您将不得不创建`Test`对象的新实例。

您可以在测试类中添加一个复制方法，以便更轻松地使用 复制成员`MemberwiseClone`，如果您丢失了要复制的属性，而无需大的选择语句来填充每个属性，这将是一件好事。

```
public class Test
{
    public string Name { get; set; }

    public Test Copy()
    {
        return (Test)this.MemberwiseClone();
    }
} 
```

然后，您可以在代码中需要的地方使用。

```
 List<Test> listA = new List<Test>();
  List<Test> listB = new List<Test>();
  listA.Add(new Test { Name = "A" });

  listB.AddRange(listA.Select(x => x.Copy())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:37:13.163

这也有效，因为 listB 中的 Test obj 是与 listA 中的 Test obj 不同的实例

```
 listA.ForEach((item) =>
    {
        listB.Add(new Test {Name = item.Name});
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T21:02:24.157

对于更复杂的对象，您可以实现上面评论中描述的克隆方法：

```
public Test Clone()
{
     return new Test { Name = this.Name};
} 
```

上面的代码将被修改如下：

```
listB.AddRange(listA.Select(t => t.Clone())); 
```

There is also an ICloneable interface in .NET but it is not recommend to use this interface. I included a link to another question that contains a discussion of this interface.

[Why should I implement ICloneable in c#?](https://stackoverflow.com/questions/699210/why-should-i-implement-icloneable-in-c)

# android - 销毁数据库——android生命周期

> ID：14591586
> 
> 赞同：1
> 
> 时间：2013-01-29T20:25:57.450
> 
> 标签：android, android-sqlite, android-lifecycle

您好，我正在尝试找出一种方法来破坏我的数据库，每次应用程序启动时，要么从后台返回，要么在关闭后重新打开。问题是，当我第一次尝试运行我的应用程序时，我得到一个 null 并且我的应用程序崩溃了。

**我的应用程序：** 用户在登录屏幕上得到提示，我创建了数据库，移动到另一个活动以执行查询。从此活动中，用户无法返回登录，只能进入手机主屏幕。当我将转到主屏幕并重新打开应用程序时，我想清除数据库并像我第一次使用该应用程序一样开始。我知道这对于应用程序实际上并不实用，但这只是为了学习。

我试图做`db.close()`and `context.deleteDatabase(db.getPath());`in `onResume`and `onRestart`，但这总是会破坏我的应用程序。我还尝试检查 'db.getPath()!=null' ，但这也无济于事。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:44:33.027

既然您知道这不是使用数据库的最实用方法，我想我不会因此而困扰您。

您要做的不是在 Resume() 或 Restart() 期间调用删除数据库内容的方法，您实际上希望通过 Stop() 调用该方法。

您要使用的方法是

```
db.delete(String table, string whereClause, String [] whereArgs); 
```

传递您要删除的表的名称，即“user_food_database”，一个 where 子句在您的情况下为**空**，因为您要删除所有行，而对于 whereArgs 则为空。

这是官方文档：

"删除数据库中行的便捷方法。

参数 table 要从中删除的表 whereClause 删除时要应用的可选 WHERE 子句。传递 null 将删除所有行。

如果传入 whereClause，则返回受影响的行数，否则返回 0。要删除所有行并获得计数传递“1”作为 whereClause。"

您也可以致电：

```
deleteDatabase(File pathToDatabase) 
```

如果您的数据库中有多个表，但每次重新创建数据库本身的成本很高，并且仅删除内容可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:36:21.080

我建议您简单地擦除数据库，即删除所有数据（甚至删除表）。这不是您问题的直接答案，但具有相同的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:39:35.500

只需在`open()`您的方法中删除所有表`SQLiteDatabaseHelper`并通过调用重新创建表`onCreate(db)`。当然，只有在每次应用程序启动时只打开一次数据库时才有效。

# ios - 从备份恢复 sqlite 文件后如何重置 Core Data 堆栈？

> ID：14591590
> 
> 赞同：1
> 
> 时间：2013-01-29T20:26:09.920
> 
> 标签：ios, ipad, core-data

我正在为我的应用程序实现备份/恢复功能，但是在我从备份中恢复 sqlite 文件并尝试访问一些数据后，我收到此错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Object's persistent store is not reachable from this NSManagedObjectContext's coordinator' 
```

回到 ARC 之前，您可以取消 appdelegate 上的 Core Data 对象，然后当您尝试访问 ManagedObjectContext 时它们会被重建。你现在怎么做？

编辑：

那我一定是做错了什么。我可以将托管对象上下文设置为不是只读的，但是当我尝试访问数据时会遇到同样的错误。有什么建议吗？

```
- (void)restoreDatabase {

    ICAMAppDelegate *appDelegate = (ICAMAppDelegate *)[[UIApplication sharedApplication] delegate];
    appDelegate.managedObjectContext = nil;
    NSError *error;

    // Delete Persistent Store
    NSArray *stores = [[appDelegate persistentStoreCoordinator] persistentStores];
    NSPersistentStore *store = [stores objectAtIndex:0];
    NSURL *storeURL = store.URL;
    [[appDelegate persistentStoreCoordinator] removePersistentStore:store error:&error];
    [[NSFileManager defaultManager] removeItemAtPath:storeURL.path error:&error];

    NSString * databaseName = @"ICAMMobile.sqlite";
    NSString * databaseBackupName = @"ICAMMobile.sqlite.bak";
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;

    NSString *backupPath = [documentsDir stringByAppendingPathComponent:databaseBackupName];
    NSString *dbPath = [documentsDir stringByAppendingPathComponent:databaseName];

    if([fileManager fileExistsAtPath:backupPath])
    {
        if (![fileManager copyItemAtPath:backupPath toPath:dbPath error:&error])
        {
            NSLog(@"Failed to create writable database file with message '%@'.", [error localizedDescription]);
        }
        else
        {
            [appDelegate.managedObjectContext reset];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T23:05:16.243

这是有效的。我需要`[appDelegate persistentStoreCoordinator] addPersistentStoreWithType`在替换文件后打电话。

**编辑：** 作为奖励，我也添加了备份数据库方法。

```
- (void)restoreDatabase {
    ICAMAppDelegate *appDelegate = (ICAMAppDelegate *)[[UIApplication sharedApplication] delegate];
    NSError *error;
    // Delete Persistent Store
    NSArray *stores = [[appDelegate persistentStoreCoordinator] persistentStores];
    NSPersistentStore *store = [stores objectAtIndex:0];
    NSURL *storeURL = store.URL;
    [[appDelegate persistentStoreCoordinator] removePersistentStore:store error:&error];
    [[NSFileManager defaultManager] removeItemAtPath:storeURL.path error:&error];

    NSString * databaseName = @"ICAMMobile.sqlite";
    NSString * databaseBackupName = @"ICAMMobile.sqlite.bak";
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;

    NSString *backupPath = [documentsDir stringByAppendingPathComponent:databaseBackupName];
    NSString *dbPath = [documentsDir stringByAppendingPathComponent:databaseName];

    if([fileManager fileExistsAtPath:backupPath])
    {
        if (![fileManager copyItemAtPath:backupPath toPath:dbPath error:&error])
        {
            NSLog(@"Failed to create writable database file with message '%@'.", [error localizedDescription]);
        }
        else
        {
            [[appDelegate persistentStoreCoordinator] addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error];
        }
     }
}

- (void)backupDatabase {
    NSString * databaseName = @"ICAMMobile.sqlite";
    NSString * databaseBackupName = @"ICAMMobile.sqlite.bak";
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error = nil;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;

    NSString *backupPath = [documentsDir stringByAppendingPathComponent:databaseBackupName];
    NSString *dbPath = [documentsDir stringByAppendingPathComponent:databaseName];

    NSURL *toURL = [NSURL fileURLWithPath:backupPath];

    if([fileManager fileExistsAtPath:backupPath])
    {
        //get rid of the old copy, only one allowed
        [fileManager removeItemAtPath:backupPath error:&error];
    }

    if([fileManager fileExistsAtPath:dbPath])
    {
        if ([fileManager copyItemAtPath:dbPath toPath:backupPath error:&error]) {
            [toURL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:&error];
        } else {
            NSLog(@"Failed to create writable database file with message '%@'.", [error localizedDescription]);
        }
    }
} 
```

# php - php file_get_contents 授权头

> ID：14591601
> 
> 赞同：8
> 
> 时间：2013-01-29T20:26:35.573
> 
> 标签：php, file-get-contents

谁能给我任何解释为什么私有 bitbucket 存储库的授权功能在我的本地机器上运行（运行 PHP 版本 5.3.17）但没有在我的远程服务器上授权（运行 PHP 版本 5.3.20）

我本身并没有收到错误——我只是收到来自 bitbucket 的“禁止”响应。但是从我的本地服务器运行一切都很好。

```
function bitBucketConnect($url){
    global $bitPassword;
    global $bitUsername;
    $context = stream_context_create(array(
     'http' => array(
       'header' => "Authorization: Basic " . base64_encode("$bitUsername:$bitPassword")
       )
    ));

 // Make the request
 return file_get_contents($url, false, $context);
 } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T13:57:15.533

您的代理将响应需要身份验证。您可能会挠头并认为“但我正在提供身份验证！”

问题是“标头”值仅适用于 http 连接。因此，要在代理上进行身份验证，您首先必须从 HTTP 中提取文件，然后上下文才能在 FTP 上使用。

```
<?php 
$opts = array('ftp' => array( 
    'proxy' => 'tcp://vbinprst10:8080', 
    'request_fulluri'=>true, 
    'header' => array( 
        "Proxy-Authorization: Basic $auth" 
        ) 
    ), 
    'http' => array( 
    'proxy' => 'tcp://vbinprst10:8080', 
    'request_fulluri'=>true, 
    'header' => array( 
        "Proxy-Authorization: Basic $auth" 
        ) 
    ) 
); 
$context = stream_context_create($opts); 
$s = file_get_contents("http://www.example.com",false,$context); 
$s = file_get_contents("ftp://anonymous:anonymous@ftp.example.org",false,$context); 
?> 
```

# ios - 从另一个 UIViewController 获取选择的 PickerView 选项

> ID：14591602
> 
> 赞同：0
> 
> 时间：2013-01-29T20:26:37.980
> 
> 标签：ios, ipad

我有一个带有 PickerView 的 UIPopoverController。我的问题是我想在我打开 Popover 的第一个 UIViewController 中设置 PickerView 中选择的选项。可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:51:52.707

在 UIViewController 继承的 UIPopoverController 中创建一个委托。

这是一个关于创建代表的很棒的教程：http: [//alexefish.com/post/15966868557/understanding-and-creating-delegates-in-objective-c](http://alexefish.com/post/15966868557/understanding-and-creating-delegates-in-objective-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:53:33.813

您可以使用 NSUserDefaults：

首先设置您选择的选项：

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setObject:@"objectForSelectedOption" forKey:@"option"]; 
```

然后在您的 viewController 中，您可以看到您选择的选项：

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs objectForKey:@"option"]; 
```

# c# - 在 ASP 网站中导致异常的 DELETE 语句

> ID：14591604
> 
> 赞同：1
> 
> 时间：2013-01-29T20:26:47.617
> 
> 标签：c#, asp.net, sql-server, detailsview

不知道为什么这不起作用并寻求任何帮助。我有一个正在构建的 ASP 网站。一个页面设置为主/详细页面，其中 GridView 用于显示表中的记录。带有 INSERT、UPDATE 和 DELETE 语句的 DetailView 绑定到我的 GridView 上的 SELECT 按钮。

INSERT 和 UPDATE 语句可以正常工作，但是 DELETE 语句会引发异常。

这是处理异常的代码。

```
protected void DetailsView1_ItemDeleted(object sender, DetailsViewDeletedEventArgs e)
    {
        if (e.Exception != null)
        {
            lblError.Text = "A database error has occurred.<br /><br />" + "Message: " + e.Exception.Message;
            e.ExceptionHandled = true;
        }
        else if (e.AffectedRows == 0)
            lblError.Text = "Another user may have updated that product." + "<br />Please try again.";
        else
            GridView1.DataBind();
    } 
```

抛出的异常是 e.AffectedRows 异常。

我不确定为什么我的表不接受 DELETE 语句，任何想法都会受到赞赏。这是DetailView的代码

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
    ConflictDetection="CompareAllValues" 
    ConnectionString="<%$ ConnectionStrings:HalloweenConnectionString %>" 
    DeleteCommand="DELETE FROM [Products] WHERE [ProductID] = @original_ProductID AND [Name] = @original_Name AND [ShortDescription] = @original_ShortDescription AND [LongDescription] = @original_LongDescription AND [CategoryID] = @original_CategoryID AND (([ImageFile] = @original_ImageFile) OR ([ImageFile] IS NULL AND @original_ImageFile IS NULL)) AND [UnitPrice] = @original_UnitPrice AND [OnHand] = @original_OnHand" 
    InsertCommand="INSERT INTO [Products] ([ProductID], [Name], [ShortDescription], [LongDescription], [CategoryID], [ImageFile], [UnitPrice], [OnHand]) VALUES (@ProductID, @Name, @ShortDescription, @LongDescription, @CategoryID, @ImageFile, @UnitPrice, @OnHand)" 
    OldValuesParameterFormatString="original_{0}" 
    SelectCommand="SELECT [ProductID], [Name], [ShortDescription], [LongDescription], [CategoryID], [ImageFile], [UnitPrice], [OnHand] FROM [Products] WHERE ([ProductID] = @ProductID)" 
    UpdateCommand="UPDATE [Products] SET [Name] = @Name, [ShortDescription] = @ShortDescription, [LongDescription] = @LongDescription, [CategoryID] = @CategoryID, [ImageFile] = @ImageFile, [UnitPrice] = @UnitPrice, [OnHand] = @OnHand WHERE [ProductID] = @original_ProductID AND [Name] = @original_Name AND [ShortDescription] = @original_ShortDescription AND [LongDescription] = @original_LongDescription AND [CategoryID] = @original_CategoryID AND (([ImageFile] = @original_ImageFile) OR ([ImageFile] IS NULL AND @original_ImageFile IS NULL)) AND [UnitPrice] = @original_UnitPrice AND [OnHand] = @original_OnHand">
    <SelectParameters>
        <asp:ControlParameter ControlID="GridView1" Name="ProductID" 
            PropertyName="SelectedValue" Type="String" />
    </SelectParameters>
    <DeleteParameters>
        <asp:Parameter Name="original_ProductID" Type="String" />
        <asp:Parameter Name="original_Name" Type="String" />
        <asp:Parameter Name="original_ShortDescription" Type="String" />
        <asp:Parameter Name="original_LongDescription" Type="String" />
        <asp:Parameter Name="original_CategoryID" Type="String" />
        <asp:Parameter Name="original_ImageFile" Type="String" />
        <asp:Parameter Name="original_UnitPrice" Type="Decimal" />
        <asp:Parameter Name="original_OnHand" Type="Int32" />
    </DeleteParameters>
    <UpdateParameters>
        <asp:Parameter Name="Name" Type="String" />
        <asp:Parameter Name="ShortDescription" Type="String" />
        <asp:Parameter Name="LongDescription" Type="String" />
        <asp:Parameter Name="CategoryID" Type="String" />
        <asp:Parameter Name="ImageFile" Type="String" />
        <asp:Parameter Name="UnitPrice" Type="Decimal" />
        <asp:Parameter Name="OnHand" Type="Int32" />
        <asp:Parameter Name="original_ProductID" Type="String" />
        <asp:Parameter Name="original_Name" Type="String" />
        <asp:Parameter Name="original_ShortDescription" Type="String" />
        <asp:Parameter Name="original_LongDescription" Type="String" />
        <asp:Parameter Name="original_CategoryID" Type="String" />
        <asp:Parameter Name="original_ImageFile" Type="String" />
        <asp:Parameter Name="original_UnitPrice" Type="Decimal" />
        <asp:Parameter Name="original_OnHand" Type="Int32" />
    </UpdateParameters>
    <InsertParameters>
        <asp:Parameter Name="ProductID" Type="String" />
        <asp:Parameter Name="Name" Type="String" />
        <asp:Parameter Name="ShortDescription" Type="String" />
        <asp:Parameter Name="LongDescription" Type="String" />
        <asp:Parameter Name="CategoryID" Type="String" />
        <asp:Parameter Name="ImageFile" Type="String" />
        <asp:Parameter Name="UnitPrice" Type="Decimal" />
        <asp:Parameter Name="OnHand" Type="Int32" />
    </InsertParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:37:36.097

`where`通常我会在删除（`ProductID`？）时在我的子句中使用主键。删除语句可能在 where 条件下失败。

如果没有删除命令相关的业务规则，可以试试这个：

```
DeleteCommand="DELETE FROM [Products] WHERE [ProductID] = @original_ProductID" 
```

# python - 使用 pyBluez 发现设备需要多长时间？

> ID：14591606
> 
> 赞同：1
> 
> 时间：2013-01-29T20:26:53.830
> 
> 标签：python, bluetooth

我正在考虑使用 pyBluez，我的项目需要快速与设备建立连接。从设备接收数据之前的采集时间是多少？

在这种情况下，该设备将是一个遥控器，它会经常被带出范围。为了使蓝牙和 pybluez 为我的应用程序工作，我需要能够在进入范围后的几秒钟内检测到遥控器上的按钮按下。我读过[这个类似的答案](https://stackoverflow.com/a/840059/480303)。pyBluez 是否会引入其他开销，从而使不断发现变得不切实际？发现设备后（我假设至少需要 1.28 秒），在它可以发送数据之前是否还有任何延迟？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T20:23:02.323

您正在查看蓝牙协议的错误部分。您应该查看连接时间和客户端到服务器的最小-最大时间。发现是假设的，你只做一次配对，对吧？之后遥控器应该知道它控制的是哪个设备，否则受控设备会识别其配对的遥控器。

后来它只是与客户端服务器模型连接。

您需要确定每个设备的角色。但是，即使对于 PC 来说，总是尝试连接也不是一个好的模式。您应该有按需连接，这可能需要几秒钟（1-12 秒，更大的分布在 0-5 秒范围内）。

如果您可以提供有关您的项目的更多具体细节，我们可以在聊天中进一步讨论。

# reporting-services - 防火墙后的 ssrs 报告服务器

> ID：14591608
> 
> 赞同：0
> 
> 时间：2013-01-29T20:26:57.913
> 
> 标签：reporting-services, ssrs-2008

我们的内部网络上有一个 SSRS 报告服务器 2008（不是 R2），它具有我们希望 Internet 上的用户能够运行的报告（和数据）。我们创建了一个 vb.net Web 应用程序，用户将登录并从中运行报告。该应用程序在我们的 DMZ 中运行，并通过一个开放端口连接到 SQL Server 数据库（与 SSRS 在同一台服务器上运行）。

我怀疑我们必须使用 SSRS Web 服务来访问报告，因为 url 访问需要向外部打开 SQL 报告服务器（我们不想这样做）。正确的？

我在 Web 应用程序中创建了一个页面，可以将 SSRS 报告呈现到文件中，但我想在网页上向用户显示报告（并且仍然提供保存报告的能力）。我需要做什么？我可以在报表查看器或其他控件中显示渲染命令的结果吗？

指向示例的指针会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:48:35.480

您正在寻找[ReportViewer Controls](http://msdn.microsoft.com/en-us/library/ms251671%28v=vs.100%29.aspx)，特别是 Web 版本（还有一个 WinForms 版本）：

*   如果您将其合并到您的 Web 应用程序中，您将获得一个可以放置在任何页面上的控件；
*   该控件可以从 Web 服务器连接到您的 SQL 后端，因此您不必将您的 SQL 后端暴露给其他任何人；
*   默认情况下，控件在浏览器中呈现（使用 html 呈现器），为用户提供了很好的预览。
*   该控件带有一个漂亮的[工具栏](http://msdn.microsoft.com/en-us/library/ms251670.aspx)，允许导航、搜索、打印以及导出（即保存）为各种格式。

查看[Microsoft Report Viewer 2010 Redistributable Package 的下载链接](http://www.microsoft.com/en-us/download/details.aspx?id=6442)，其中包含 Web 和 WinForms 控件。

PS。直接向世界开放 SSRS Web 服务并不是您通常想要做的事情。Web 服务非常适合与您自己的应用程序进行安全通信，并为您提供一些更细粒度的控制（正如您所指出的，通过创建一个页面来导出/呈现报告）。但是，对于为站点提供报告，我建议使用 ReportViewer。

# html - CSS3 + HTML5 中的粘滞页脚

> ID：14591609
> 
> 赞同：0
> 
> 时间：2013-01-29T20:26:58.860
> 
> 标签：html, css, sticky-footer

我正在学习 CSS3 和 HTML5，并对粘性页脚的最佳实践感到好奇。我应该知道的任何 box/flex/cool 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:02:00.567

这对我有用，似乎是我找到的最简单的解决方案：

```
<style type="text/css">
   html,body {
      height:100%
   }

   #wrapper {
     min-height:100%;
     margin-bottom:-150px; /* negative total computed height of footer */
   }

   #footer_padding {
     height:150px; /* total computed height of footer */
   }

   #footer {
     height:100px;
     margin-top:50px;
   }
</style>    

<div id="wrapper">

   <div>some content...</div>

   <div id="footer_padding"></div>

</div>

<div id="footer"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-27T21:17:08.863

您可能确实想使用 flexbox，请查看 Flexbox[完整指南](http://css-tricks.com/snippets/css/a-guide-to-flexbox/)。我在下面包含了一个示例：

```
html,body {height: 100%; width: 100%; margin: 0em; padding: 0em;}
    #container {display:flex; flex-direction: column; min-height: 100%;}
    #content {flex: 1;}
```

```
<html>
<body>
  <div id="container">
      <div id="content">
        Blah blah blah.., I'm the content..
      </div>
      <div id="footer">
        Look down here.., I'm the footer!
      </div>
  </div>
</body>
</html>
```

# xml - 如何声明我想使用 XML Schema 1.1

> ID：14591612
> 
> 赞同：7
> 
> 时间：2013-01-29T20:27:07.440
> 
> 标签：xml, xsd

如何使用 1.1 XML Schema 定义？

这就是我要开始的：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="object"></xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:48:55.290

架构文档本身没有任何内容表明它是 1.0 还是 1.1 架构。（当然，除了一开始的漂亮大注释。）如果模式使用任何 1.1 特性，您只需要确保调用 1.1 XSD 处理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:40:31.100

问这个问题是因为不了解。显然不需要对 Schema 声明进行任何更改。1.1 的功能仅在与 1.0 相同的命名空间中可用。1.1 只是扩展功能的抽象名称

# javascript - 暂停的相关视频在 JW 播放器 6 中不起作用

> ID：14591615
> 
> 赞同：2
> 
> 时间：2013-01-29T20:27:20.857
> 
> 标签：javascript, jquery, ajax, media-player, jwplayer

我有 JW 播放器 6，我想在视频暂停时显示“相关视频”。以下功能仅在视频播放完毕后显示。

```
related: {
  file: 'http://www.example.com/media/trailer.xml',
  onclick: 'link',
  oncomplete: 'true'
} 
```

我有一个想法运行 API onPause 函数进行回调，但我不知道如何调用上面的相关函数。

```
events: {
  onPause: function() {

    // trigger click the "Related Video" button

  }
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-14T15:27:24.960

我联系了 JW Support 以验证最佳答案，因为我无法让 onpause: 'true' 工作。他们的文档中也没有此字段。 [http://www.longtailvideo.com/support/jw-player/28858/displaying-related-videos/](http://www.longtailvideo.com/support/jw-player/28858/displaying-related-videos/)

这是我从 JW Player 支持人员那里收到的关于 onpause:true 功能的回复。

不幸的是，您提供的示例是错误的。目前，我们无法将相关视频配置为暂停显示。

问候， Andrew Prelusky 客户支持 JWPLAYER | 您的游戏方式

如果这是必需的功能，希望这对其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:06:58.127

添加 onpause true。

```
related: {
  file: 'http://www.example.com/media/trailer.xml',
  onclick: 'link',
  oncomplete: 'true',
  onpause: 'true'  
} 
```

# jquery - 检查所有文件输入的内容

> ID：14591616
> 
> 赞同：0
> 
> 时间：2013-01-29T20:27:21.250
> 
> 标签：jquery

每次输入之一发生更改时，我都尝试使用 .ruFileInput 类循环遍历所有文件输入。

如果他们都被填满了，我想做点什么——在这个例子中 alert("No Empty Fields!!");

问题是每次文件输入更改时都会弹出消息，而不是在它们全部填充后发出警报。有什么建议么？

```
$('input.ruFileInput').live('change' , function () { 
    $("input.ruFileInput").each(function() {
        if($(this).val() != ""){
            alert("No Empty Fields!!");
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:30:06.617

```
var doesEmptyExist = $("input.ruFileInput").filter(function(){
    return this.value === "";
}).length > 0; 
```

Note`live`自 1.7 起已弃用**，并已在 1.9 中删除**，请停止使用！

```
$('#containerId').on('change', 'input.ruFileInput', function(){
    var doesEmptyExist = $("input.ruFileInput").filter(function(){
        return this.value === "";
    }).length > 0;

    if (!doesEmptyExist)
        alert('no empty boxes');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:33:52.123

只需使用 jQuery 选择器：

```
if ($('input.ruFileInput[value=""]').length == 0) {
    alert("No empty Fields");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:31:39.070

尝试设置一个**布尔值**而不是在`.each`循环中发出警报。

```
$('input.ruFileInput').live('change', function () {
    var isEmpty = false;
    $("input.ruFileInput").each(function () {
        if ($(this).val() != "") {
            isEmpty = true;
            break;
        }
    });
    if (!isEmpty) {
        alert("No Empty Fields!!");
    }
}); 
```

# c++ - C ++ - 使用'i'检查for循环中的不同变量

> ID：14591618
> 
> 赞同：3
> 
> 时间：2013-01-29T20:27:26.757
> 
> 标签：c++

我不知道该怎么称呼它，所以我也不确定要搜索什么，但是有没有办法在 for 循环中使用 'i' 作为变量名的一部分？顺便说一句，使用 C++。

例如，

```
int int1, int2, int3;
for(int i = 1; i<=3; i++){
     //somehow use i as inti or int+i, etc.
     //I was wondering if this is possible?
} 
```

我很感激任何意见。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T20:29:01.737

使用数组

```
int ints [3];
for(int i = 0; i<3; i++){
     int x = ints[i];
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T20:35:50.133

疯狂解决方案部：

```
int int1, int2, int3;
int *arr[3] = { &int1, &int2, &int3 };
for(int i = 1; i<=3; i++){
   ... *arr[i] ... 
} 
```

当然也可以，但不像使用数组那么容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T21:08:48.393

如果您使用 C++，您应该从 C++ 标准库中选择一个容器，如`[std::array]`[1](http://en.cppreference.com/w/cpp/container/array)或`[std::vector]`[2](http://en.cppreference.com/w/cpp/container/vector)。

例子：

```
#include <array>
#include <iostream>

int main() {

  std::array<int, 3> const ia = {{ 2, 4, 8 }};

  for( int i : ia ) {
    std::cout << "[" << i << "] ";
  }
  std::cout << std::endl;

  return 0;
} 
```

# sql - SQL 索引：手动添加时会提高性能，但脚本化不会

> ID：14591620
> 
> 赞同：1
> 
> 时间：2013-01-29T20:27:29.113
> 
> 标签：sql, sql-server, nhibernate, indexing

使用 MSSQL 和 MSSQL Server Management Studio，我有一个相当复杂的查询，其中包含一些连接和几个子查询。

选择的一个属性是一个名为 Duration 的小数 (19,5)。当使用 NHibernate 的 Queryover 在 SelectSubQuery 中获取此列时，由于某种原因，我的对象需要大约 2 分钟来水合，查询只有几毫秒。

手动添加索引，右键单击索引 -> 添加索引，在 (Id, Duration) 上使查询稍微快一些，并且水合可以接受，不是完美无缺，但足够好。但是，如果我右键单击索引 -> 脚本索引为，并运行该创建的脚本，它不会提高查询的性能。

`Script Index As`创建

```
CREATE NONCLUSTERED INDEX [idx_Duration] ON [Table] 
(
    [Id] ASC,
    [Duration] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF,
    IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, 
    ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

所以我可以说，手动创建的索引可以提高性能，而脚本索引则不能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:45:18.533

当您使用设计器创建索引或右键单击对象并编写脚本时，Management Studio 中的相同代码用于生成 SQL。（两者都使用 SMO - Sql 管理对象库）。您可以通过使用 Profiler 捕获 SSMS 生成的 sql 语句来验证它们是否相同。

# java - 不同类之间通过方法调用变量

> ID：14591621
> 
> 赞同：2
> 
> 时间：2013-01-29T20:27:43.023
> 
> 标签：java, arrays, variables

我正在为我的计算机科学课做作业。

我已经完成了相当多的任务，但是我在从类中提取单个变量时遇到了一些麻烦。我们刚刚进入类和对象，这是我们关于它们的第一个任务，所以我并不完全理解所有这些。到目前为止，我已经能够打印出团队，但我无法提取个人的胜利、失败、OTL 和 OTW，以便我可以计算每个单独的团队是否是获胜的团队。

到目前为止，我所做的是创建一个名为 winsRecord 和 getPoints 的类，它返回一个布尔值来决定它是否是一个获胜的团队。（获胜球队的公式是积分 > 已玩游戏数 * 1.5（因为这是一个偶数记录）。

我不知道如何提取统计数据，因为它必须在 HockeyTeam 类中编写。我已经对其进行了设置，以便构造函数公开设置变量以便可以访问，但就访问它们而言，我很难过。

至于一旦我能够访问它们就存储它们，我是否会制作一个并行方法，为每个团队提供积分，每个垃圾箱只分配一个数字？

以上就是全部代码了，谢谢观看。

```
public class A1Q2fixed {
    public static void main(String[] parms) { // main method
        processHockeyTeams();
    }

    /*****************************/

    public static void processHockeyTeams() { // processing method
        boolean[] winningRecord;
        HockeyTeam[] hockeyTeams;

        hockeyTeams = createTeams();
        printTeams(hockeyTeams);
        System.out.print("*********************\n");
        printWinningTeams();
        winningRecord = HockeyTeam.winningRecord(hockeyTeams);
        // printWinningTeams(hockeyTeams); 
    }

    /*********************************/

    public static void printTeams(HockeyTeam[] hockeyTeams) {
        for (int i = 0; i < hockeyTeams.length; i++) {
            System.out.println(hockeyTeams[i]);
        }

    }

    public static void printWinningTeams() {

    }

    public static HockeyTeam[] createTeams() {
        HockeyTeam[] teams;
        HockeyTeam team;
        int count;

        teams = new HockeyTeam[HockeyTeams.getNumberTeams()];
        team = HockeyTeams.getTeam();
        for (count = 0; (count < teams.length) && (team != null); count++) {
            teams[count] = team;
            team = HockeyTeams.getTeam();
        }
        return teams;
    }
}

/* hockey team class *******/

class HockeyTeam {
    public String name;
    public int wins;
    public int otw;
    public int otl;
    public int losses;

    public HockeyTeam(String name, int wins, int otw, int otl, int losses) {
        this.name = name;
        this.wins = wins;
        this.otw = otw;
        this.otl = otl;
        this.losses = losses;
    }

    public String toString() {
        System.out.println(name);

        return " W:" + wins + " OTW:" + otw + " OTL:" + otl + " L:" + losses;
    }

    public static boolean[] winningRecord(HockeyTeam[] hockeyTeam) {
        boolean array[] = new boolean[hockeyTeam.length];

        String name;
        int wins;
        int otw;
        int otl;
        int losses;

        for (int i = 0; i < hockeyTeam.length; i++) {
            System.out.println(HockeyTeam.name);
        }
        return array;
    }

    public static int getPoints() {
        int points = 0;
        return points;
    }
}

/* hockey teams class *******************/
class HockeyTeams {
    private static int count = 0;

    private static HockeyTeam[] hockeyTeams = {
            new HockeyTeam("Canada", 5, 3, 0, 0),
            new HockeyTeam("Russia", 5, 1, 1, 2),
            new HockeyTeam("Finland", 3, 2, 1, 3),
            new HockeyTeam("Sweden", 4, 1, 1, 4),
            new HockeyTeam("USA", 1, 2, 2, 3), };

    public static int getNumberTeams() {
        return hockeyTeams.length;
    }

    public static HockeyTeam getTeam() {
        HockeyTeam hockeyTeam;

        hockeyTeam = null;
        if (count < hockeyTeams.length) {
            hockeyTeam = hockeyTeams[count];
            count++;
        }
        return hockeyTeam;
    }
} 
```

谢谢，

马特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:37:57.673

抱歉，我只能理解您问题的一部分，据我了解，您似乎无法访问个人赢、输、OTL 和 OTW。我希望这能回答你的问题，如果不是请澄清一下

1.  要访问 OTL，OTW 有一个循环如下：

    ```
    public class A1Q2fixed

    { 
     public static void main(String[] parms) // main method
     {
      processHockeyTeams(); 
     } 
     /*****************************/

     public static void processHockeyTeams()  // processing method
     {

      boolean[] winningRecord;

      HockeyTeam[] hockeyTeams;

      hockeyTeams = createTeams(); 

      printTeams(hockeyTeams);

      System.out.print("*********************\n");

      printWinningTeams();

        winningRecord = HockeyTeam.winningRecord(hockeyTeams);

        for(HockeyTeam h:hockeyTeams)
        {
            System.out.println(h.losses);//To access and print losses

                 System.out.println(h.otw);//To access and print otw

                 System.out.println(h.otl);//To access and print otl

        }

      // printWinningTeams(hockeyTeams); 
     } 

     /*********************************/

     public static void printTeams(HockeyTeam[] hockeyTeams)

     {

       for (int i = 0; i < hockeyTeams.length; i++)

       {

         System.out.println(hockeyTeams[i]);

       }

     }

     public static void printWinningTeams()

     {

     }

     public static HockeyTeam[] createTeams() 
     { 
      HockeyTeam[] teams; 

      HockeyTeam team; 

      int count; 

      teams = new HockeyTeam[HockeyTeams.getNumberTeams()]; 

      team = HockeyTeams.getTeam(); 

      for (count=0; (count<teams.length) && (team!=null); count++) 
      { 

       teams[count] = team; 

       team = HockeyTeams.getTeam(); 

      } 

      return teams; 

     } 

    } 
    ```

2.  还要在 HockeyTeam 中将名称声明为静态

# python - 如何更改列表中的元素，并保留原始列表的副本？

> ID：14591626
> 
> 赞同：3
> 
> 时间：2013-01-29T20:27:59.197
> 
> 标签：python

我四处搜索并尝试了很多东西，但我无法让它工作。我认为问题与 Python 列表名称如何*指向*列表有关，而不是*实际*列表，但我仍然无法弄清楚。情况是这样的（这是一个字典列表）：

```
list_original = [dictionary1, dictionary2, dictionary3]
dictionary2_modified = dictionarymodifier(dictionary2) #some function that modifies the chosen element
list_modified = [i for i in list_original] #makes copy of original list
for i,n in enumerate(dictionary_original):
    if i==1:
        list_modified[1] = dictionary2_modified #replaces element with modified version
return list_original, list_modified 
```

还有很多类似的东西，但我总是要么得到两个原始列表，要么得到两个新列表！我补充说我正在使用 python 2.4 并且没有选择。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T20:38:07.900

## 可变与不可变

您需要知道可变元素和不可变元素之间的区别。也就是说，Python 中的字典和列表都是*可变*的。这意味着如果你在一个地方修改它，它也会在另一个地方被修改。

此外，可变类型的变量（例如`list`or `dict`）可以包含不可变元素（例如`str`），反之亦然：不可变类型的变量（例如`tuple`）可以包含可变元素（例如`list`or `dict`）。

## 可变性示例

因此，这使用列表的示例显示了可变性：

```
>>> a = [1, 2, 3, 4]
>>> b = a
>>> a
[1, 2, 3, 4]
>>> b
[1, 2, 3, 4]
>>> a[2] = 'x'
>>> a
[1, 2, 'x', 4]
>>> b
[1, 2, 'x', 4] 
```

## 如何获取列表或字典的副本

要获取 的副本`list`，您只需执行以下操作：

```
new_list = old_list[:]  # the slicing at the end just takes the whole list 
```

在`dict`这种情况下，通常就足够了：

```
new_dict = old_dict.copy() 
```

## 嵌套列表/字典

然而，虽然列表/字典是扁平的或只包含可变元素，但可以按照我展示的方式复制，要获得更复杂的可变数据结构的副本，您需要做更多的事情......

在这种情况下，非常有用的可能是`copy`具有其[`deepcopy`功能](http://docs.python.org/2/library/copy.html#copy.deepcopy)的模块。模块的文档`copy`更多地说明了它的目的：

> Python 中的赋值语句不复制对象，它们在目标和对象之间创建绑定。对于可变或包含可变项的集合，有时需要一个副本，以便可以更改一个副本而不更改另一个副本。这个模块提供了通用的浅拷贝和深拷贝操作（解释如下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:39:09.147

你的`dictionarymodifier`变异真的`dictionary2`到位了吗？如果是这样，那么您构建列表的方式就无关紧要了。

简单地使用`list_modified = list(list_original)`可以很好地创建列表的 *浅表*副本，然后您可以根据自己的意愿对其进行修改，但前提是您不修改原始列表**中**的项目（如果它们是不可变的内置项，则不能修改 -像数字或字符串这样的东西，所以初学者经常把它误认为是深拷贝）。

如果你真的需要复制列表，你可以使用`copy.deepcopy`它来做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:39:19.823

您需要创建列表的副本。

```
copy=list(original)
original[0] = None 
```

# wpf - 将用户控件的依赖属性绑定到父视图模型上的属性时出错

> ID：14591628
> 
> 赞同：1
> 
> 时间：2013-01-29T20:28:07.380
> 
> 标签：wpf, binding, user-controls

我有一个包含三个复选框和三个日期选择器的用户控件。例如，用户控件上的日期选择器之一看起来像这样（为清楚起见，删除了 Width 等不相关的属性）...

```
<telerik:RadDatePicker DisplayFormat="Long"
                       SelectedValue="{Binding DepositPaidDate, Mode=TwoWay}"/> 
```

控件的视图模型有一个名为 PaidDate 的公共属性，其类型为 PaidDate（是的，该属性和类具有相同的名称），控件上的顶级 Grid 将其 DataContext 设置为 PaidDate 属性，并且Grid 中的各个控件绑定到此 PaidDate 对象的属性。

当在窗口上使用此控件，并且窗口的代码在控件的 VM 上显式设置 PaidDate 属性时，一切正常。例如，我创建了一个测试窗口，其构造函数如下所示...

```
public PaidDateWindow(PaidDate paidDate, string windowTitle) {
  InitializeComponent();
  ((PaidDateControlViewModel)PaidDateCtrl.DataContext).PaidDate = paidDate;
  Title = windowTitle;
} 
```

...这工作得很好。我可以显示窗口，并且数据显示正确。

当我尝试通过控件上的依赖属性进行设置时，问题就来了。用户控件代码中的依赖属性如下所示...

```
public static readonly DependencyProperty PaidDateProperty = DependencyProperty.Register("PaidDate", typeof(PaidDate), typeof(PaidDateControl), new FrameworkPropertyMetadata(SetPaidDateStatic));

private static void SetPaidDateStatic(DependencyObject d, DependencyPropertyChangedEventArgs e) {
  (d as PaidDateControl).SetPaidDate((PaidDate)e.NewValue);
}

private void SetPaidDate(PaidDate paidDate) {
  if (DataContext != null) {
    ((PaidDateControlViewModel)DataContext).PaidDate = paidDate;
  }
}

public PaidDate PaidDate {
  get {
    return (PaidDate)GetValue(PaidDateProperty);
  }
  set {
    SetValue(PaidDateProperty, value);
  }
} 
```

如您所见，依赖属性只是将 PaidDate 对象传递给视图模型，这与我在前面的代码中手动执行此操作时的效果相同。

当我尝试将此依赖项属性绑定到窗口视图模型上的属性时，出现绑定错误。这是父窗口中的 XAML...

```
<vrtSystemsUserControls:PaidDateControl
  PaidDate="{Binding Path=VRTSystem.PaidDate, Mode=TwoWay}" /> 
```

父窗口的 VM 包含一个名为 VrtSystem 的属性，并且窗口上的许多其他控件都绑定到该属性。VrtSystem 还包含一个名为 PaidDate 的属性，这就是我想要传递给用户控件的属性。

但是，当我运行它时，我收到以下绑定错误...

```
System.Windows.Data Error: 40 : BindingExpression path error:
'VRTSystem' property not found on 'object' ''PaidDateControlViewModel' (HashCode=18319327)'.
BindingExpression:Path=VRTSystem.PaidDate; DataItem='PaidDateControlViewModel' (HashCode=18319327);
target element is 'PaidDateControl' (Name=''); target property is 'PaidDate' (type 'PaidDate') 
```

现在它看起来好像 WPF 正在将实际绑定信息传递给用户控件，而不是 PaidDate 对象，因为错误表明它正在尝试在用户控件的 VM 上查找 VrtSystem 属性。我不知道为什么会这样做，因为我认为绑定的想法是在窗口级别解析绑定，然后将结果（即 PaidDate 对象）发送到依赖属性，它会在哪里发送到虚拟机。

我希望我已经清楚地解释了这一点。任何人都能够看到出了什么问题？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:14:14.223

当您的绑定被解析时，它正在寻找它所应用到的控件的`VRTSystem`属性。`DataContext`

'DataContext' 属性由子控件继承，因此如果您在 a`DataContext`上设置 a，`Window`它的所有子控件都将具有相同的`DataContext`. 但是，如果其中一个孩子本身应用了不同的 DataContext，则它的所有孩子都将使用它。

在您的情况下，`Window`有 a `DataContext`，但`UserControl`. 因此，默认情况下，或它的孩子上的所有绑定`UserControl`都将期望找到在这种情况下不是您想要的`VRTSystem`属性。`UserControls` `DataContext`

因此，要显式定位 的`DataContext`，您必须通过设置它的属性`Window`来告诉绑定，如下所示：`RelativeSource`

```
{Binding Path=DataContext.VRTSystem.PaidDate, Mode=TwoWay,
         RelativeSource={RelativeSource AncestorType={x:Type Window}}} 
```

# htmlunit - HtmlUnit 的问题

> ID：14591629
> 
> 赞同：0
> 
> 时间：2013-01-29T20:28:08.933
> 
> 标签：htmlunit

我正在尝试使用 HtmlUnit 提交表单，我的表单中有两个选择，当我选择第一个选择时，他调用函数 ajax 并加载第二个选择，按照我的代码：

```
HtmlPage page5 = anchor.click();

HtmlForm form = page.getFormByName("form1");

HtmlSelect state = form.getSelectByName("ddlMarca");

state.setSelectedAttribute(state.getOptionByValue("56"), true);

state.fireEvent(Event.TYPE_CHANGE);

HtmlSelect city = form.getSelectByName("ddlModelo");

for (HtmlOption option : city.getOptions()) {
 System.out.println("city : "+option.asText()+" valor: " +option.getValueAttribute());
} 
```

我正在使用方法 fireEvent 来调用事件更改，但不起作用，我该如何做这个事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:50:26.157

它可能正在工作，但您没有给浏览器时间进行 ajax 调用、获得响应和编辑 dom。如果页面在触发 change 事件后进行 ajax 调用，请尝试让页面等待片刻，然后再次检查。

我没有测试下面的代码，所以我不能肯定这会解决你的问题，但我已经使用这种技术来解决类似的问题。

当 ajax 调用完成时，您必须在页面上找到发生变化的内容才能使其正常工作。根据上述问题，我假设更改一个选择会填充第二个选择框。

```
state.fireEvent(Event.TYPE_CHANGE);

//try 20 times to wait .5 second each for filling the page.
for (int i = 0; i < 20; i++) {
       if (condition_to_happen_after_js_execution) {
           break;
       }
       synchronized (page) {
           page.wait(500);
       }
}

HtmlSelect city = form.getSelectByName("ddlModelo");

for (HtmlOption option : city.getOptions()) {
 System.out.println("city : "+option.asText()+" valor: " +option.getValueAttribute());
} 
```

示例来自：[http ://htmlunit.sourceforge.net/faq.html#AJAXDoesNotWork](http://htmlunit.sourceforge.net/faq.html#AJAXDoesNotWork)

# java - 用里面的内容替换大括号

> ID：14591632
> 
> 赞同：-1
> 
> 时间：2013-01-29T20:28:16.287
> 
> 标签：java, regex

是否有可能`.replaceAll()`：

输入>

```
asd fs#{FIRST}l sdfj s#{SECOND}ijfio s#{THIRD}df o#{1}sj 
```

输出>

```
asd fsFIRSTl sdfj sSECONDijfio sTHIRDdf o#{1}sj 
```

这`#\{[A-Za-z]+\}`会找到整个**#{aaa}**但我不想删除里面的文本..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:29:50.853

当然，您可以使用`capture groups`：-

```
String str = "asd fs#{FIRST}l sdfj s#{SECOND}ijfio s#{THIRD}df o#{1}sj";
str = str.replaceAll("#\\{([A-Za-z]+)\\}", "$1"); 
```

如果您想对此进行任何解释，请询问。我认为，代码是不言自明的。

# javascript - jquery datepicker 将日期设置为明天的日期

> ID：14591634
> 
> 赞同：2
> 
> 时间：2013-01-29T20:28:37.003
> 
> 标签：javascript, jquery, datepicker

我已将#arrival 的日期设置为今天的日期，但是如何将#departure 设置为明天的日期？

```
 $(function() {

$( "#arrival" ).datepicker({

dateFormat: "dd/mm/yy", 
changeMonth: true,
changeYear: true,
numberOfMonths: 1,
yearRange: ":2016",
minDate: "dateToday",

onClose: function( selectedDate ) {
$( "#departure" ).datepicker( "option", "minDate", selectedDate);
}

});
$(function() {
    $("#arrival").datepicker("setDate", "0");
});

$( "#departure" ).datepicker({

dateFormat: "dd/mm/yy", 
changeMonth: true,
changeYear: true,
numberOfMonths: 2,
yearRange: ":2016",

});

$(function() {
    $("#departure").datepicker("setDate", "1");
});

}); 
```

我已经自定义了日期选择器，它工作正常。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T20:41:15.417

在第一个日期选择器的更改函数中，创建一个日期对象，将日期设置为前一天，并将第二个日期选择器的日期设置为该日期。您可以使用`minDate`以确保不能选择早于设定日期的任何日期。

```
$(function () {
    $("#arrival").datepicker({
        dateFormat: "dd/mm/yy",
        changeMonth: true,
        changeYear: true,
        numberOfMonths: 1,
        yearRange: ":2016",
        minDate: "dateToday",
        onClose: function (selectedDate) {
            var myDate = $(this).datepicker('getDate'); 
                myDate.setDate(myDate.getDate()+1); 
            $('#departure').datepicker('setDate', myDate);
        }
    });

    $("#departure").datepicker({
        dateFormat: "dd/mm/yy",
        changeMonth: true,
        changeYear: true,
        numberOfMonths: 2,
        yearRange: ":2016",
    });

    $("#arrival").datepicker("setDate", "0");
    $("#departure").datepicker("setDate", "1");
}); 
```

[**小提琴**](http://jsfiddle.net/JSFXP/1/)

# jquery - 从 webtool 中消除重复代码

> ID：14591636
> 
> 赞同：1
> 
> 时间：2013-01-29T20:28:40.653
> 
> 标签：jquery, python, jquery-ui, google-app-engine

我正在构建一个网络工具，我有很多窗口。到目前为止，我拥有纯 HTML，但想对其进行优化。这里的代码：我有超过 10 个具有相似框架的这些。

```
<div id="test" class="panel draggable">
    <div class="titlebar">
        <h3>test</h3>
        <div class="close" title="Close test window">&times;</div>
        <div class="sizing" style="display:none" title="Show the content">+</div>
        <div class="sizing" title="Hide the content">-</div>
    </div>
    <div class="content placeholder">
      // Any content here, from table,iframe,images...
    </div>
</div> 
```

我正在使用 python (Google App Engine) JQuery / JS / HTML / CSS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:37:56.757

听起来您正在寻找开始使用 Web 框架。如果您对 python 感到满意，请尝试查看[Django](https://www.djangoproject.com/)。

# android - 使用 Google Maps API for Android 搜索位置

> ID：14591637
> 
> 赞同：1
> 
> 时间：2013-01-29T20:28:45.453
> 
> 标签：android, google-maps, mongodb, google-places-api, android-maps

我正在制作一个在 MongoDB 中存储 300 万个城市标记的 Android 应用程序。根据当前的谷歌地图视图，我对 Mongo 进行地理空间框查询，以获取屏幕上当前视图中的所有标记。

如果用户想要更改视图，他/她还可以对城市执行文本搜索，这将查询标记集合中的三个名称字段并显示结果。我目前为此使用 Mongo，但由于命名约定，它根本无法正常工作（独立于大小写的搜索速度很慢，正常搜索速度很快，但如果用户忘记大写/大写错误的字母，则不准确）。

可以用谷歌的地图服务搜索地图吗？我不想找到餐馆或书店，只想找到城市。

例如，如果我搜索“los angeles”，我希望地图将我带到洛杉矶，不显示任何谷歌标记，并让我的标记正常加载。

是否可以只从谷歌地图中提取搜索功能而没有多余的地点数据库？输入搜索时是否可以让他们的建议框工作，以便如果有两个洛杉矶我可以被告知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:53:22.930

> 可以用谷歌的地图服务搜索地图吗？

不，它不支持搜索。

> 是否可以只从谷歌地图中提取搜索功能而没有多余的地点数据库？

不是来自谷歌地图，而是看[`Geocoder`](http://developer.android.com/reference/android/location/Geocoder.html)课程。您可以传递一个`String`位置并取回`Address`该匹配项的列表。您必须自己查看结果才能得出 lat/lng。然后，您可以使用[`animateCamera`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#animateCamera%28com.google.android.gms.maps.CameraUpdate%29)或随意移动地图或制作地图动画[`moveCamera`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#moveCamera%28com.google.android.gms.maps.CameraUpdate%29)。

# php - 使用 SplClassLoader 时出错

> ID：14591648
> 
> 赞同：2
> 
> 时间：2013-01-29T20:29:38.187
> 
> 标签：php, autoloader, spl-autoloader

首先，我正在尝试使用以下 SplClassLoader - [https://gist.github.com/221634](https://gist.github.com/221634)

这是我的文件结构：

```
/root/f1/f2/APS/Common/Group.php
/root/f1/f2/index.php
/root/f1/f2/SplClassLoader.php 
```

这是我的名为 Group (Group.php) 的测试类

```
namespace APS\Common;

class Group{
...
} 
```

这是调用所有内容的 index.php 文件：

```
require "SplClassLoader.php";
$classLoader = new SplClassLoader('APS', 'APS/Common');
$classLoader->register(); 
```

我收到以下错误：

```
Fatal error: Class 'Group' not found in /root/f1/f2/index.php on line 17 
```

在将命名空间和路径传递给加载程序时，我已经尝试了所有可能的组合。它永远不会起作用。

**更新 #1** - index.php 中的第 17 行：

```
16: use APS\Common;
17: $x = new Group(); 
```

**更新 #2** - 配置信息

*   Apache/2.2.15（红帽）
*   PHP 5.3.3

**更新 #3** - 我现在收到不同的错误消息。

代码到位：

```
require "SplClassLoader.php";
$classLoader = new SplClassLoader('APS', '/root/f1/f2');
$classLoader->register();

use APS\Common;
$x = new Common\Group(); 
```

我收到的错误消息：

```
Warning: require(/f1/f2/APS/Common/Group.php): failed to open stream: No such file or directory in /root/f1/f2/SplClassLoader.php on line 133 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:00:37.340

使用该`use`语句（没有双关语）时，您只需为使用的命名空间或类创建一个别名。根据[PHP 手册](http://php.net/manual/de/language.namespaces.importing.php)，`use \Foo\Bar;`相当于`use \Foo\Bar as Bar;`.

`APS\Common`因此，在您的情况下，您使用 alias导入命名空间`Common`。这意味着您可以`Group`将此命名空间中的类引用为`Common\Group`而不是`APS\Common\Group`. 如果不使用命名空间别名（如您所做的那样），类加载器将期望`Group`该类位于全局命名空间中（并期望该类存储在 中`/root/f1/f2/Group.php`）。

**编辑**：另一种可能性是简单地`namespace \APS\Common;`放入您的文件中。如果您引用一个没有命名空间规范的类（即`Group`代替`\Group`or `\APS\Common`），PHP 将期望该类位于当前命名空间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:27:34.723

就我而言，这是似乎可行的解决方案。

```
require "SplClassLoader.php";
$classLoader = new SplClassLoader('APS\Common', __DIR__);
$classLoader->register();

use APS\Common;
$x = new Common\Group(); 
```

我必须使用魔法常数**DIR**才能工作。第二个参数似乎需要指向类所在的根的物理路径。然后，添加命名空间以在文件系统中定位它们。

# java - 从 java 项目转换为插件项目的选项在哪里？

> ID：14591649
> 
> 赞同：1
> 
> 时间：2013-01-29T20:29:39.557
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-pde, target-platform

我找不到它了。在 PDE 工具下（右键单击项目后），我只有 Open Manifest、Organize Manifests、Externalize Strings、Internationalize、API Tools Setup、Update Classpath 和 Open Dependencies。

我需要特定的更新吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:11:45.927

右键单击项目，转换器选项在“配置”菜单中。如果您的项目已经是插件项目，则此选项将被隐藏。

如果您可以看到“PDE 工具”菜单，那么您的项目可能已经转换。您可以在项目属性中检查它。如果项目是插件项目，它将有一个“插件开发”页面。除此之外，“构建器”页面将配置插件构建器。

# android - Spring Android 连接被拒绝 ECONNREFUSED

> ID：14591650
> 
> 赞同：2
> 
> 时间：2013-01-29T20:29:42.177
> 
> 标签：android, spring, rest, android-permissions

我正在尝试通过 wifi 网络从我的 Android 连接到我的本地计算机。我的机器 wifi ip 地址是 10.27.27.172，我在端口 7890 上运行我的 node.js 服务器。我可以使用我的手机 chrome 浏览器并浏览到我的服务器并访问一些返回 json 的端点。当我尝试使用 spring-android rest 模板时，我的问题就来了。我已经为我的 android 应用程序授予了 INTERNET 权限，但我仍然收到 ECONNREFUSED 错误。这是android端口问题吗？防火墙是否阻止了我的请求。如果是这样，为什么我可以浏览到服务器但不能使用 REST 客户端来获取信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:29:42.177

[我在这个 stackoverflow](https://stackoverflow.com/questions/9469060/android-http-connection-refused)上找到了答案。您需要确保重新输入我猜 Eclipse 编辑器有时会添加不可见字符或其他内容。无论如何，它现在正在工作。

# python - 在 Python 中使用静态类变量

> ID：14591652
> 
> 赞同：0
> 
> 时间：2013-01-29T20:29:45.260
> 
> 标签：python, oop, class, variables, circular-dependency

Python 不允许我将类相互导入。我知道 Python 中没有“包”解决方案，所以我不确定如何做到这一点。看看我的文件的代码：

文件 Main.py：

```
from Tile import tile
tile.assign()
class main:
    x = 0
    @staticmethod
    def assign():
        tile.x = 20 
```

文件瓷砖.py：

```
from Main import main
main.assign()
class tile:
    x = 0
    @staticmethod
    def assign():
        main.x = 20 
```

我收到错误“无法导入类图块”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:35:18.223

如果文件 A 导入文件 B，文件 B 导入文件 A，它们将无限期地相互导入，直到程序崩溃。

您需要以不需要这种循环依赖的方式重新考虑您的逻辑。例如，第三个文件可以导入这两个文件并执行两个分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:31:35.960

你有你的导入，并且`from`需要有模块的名称

```
from Tile import tile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T21:08:37.630

Python 开始执行 Main.py。它看到了导入，所以去执行 Tile.py。**请注意，它还没有执行类语句！**

于是 Python 开始执行 Tile.py。它看到从 Main 导入，并且它已经在内存中拥有该模块，因此它*不会*重新执行 Main.py 中的代码（如果这样做，更糟糕的事情会出错）。`main`它试图从模块中取出一个变量`Main`，但类语句绑定`main`尚未执行（我们仍在执行 import 语句的过程中，请告知该行）。`main`因此，您会收到关于模块中没有 clsss 的错误`Main`（或者`Tile`，如果您从那里开始）。

您可以通过导入模块而不是从模块中导入类并使用限定名称来避免这种情况，但是当`Main.main`不起作用时您会掉线。您的代码毫无意义我是动态语言；您不能*同时*让 class main 的定义等到 after`tile.assign`被调用*和*class 的定义`tile`等到 after`main.assign`被调用。

如果您真的需要这种循环依赖（这通常但并不总是表明设计阶段出现问题），那么您需要将“脚手架”（例如定义类、函数和变量）从“执行”中分离出来，您可以在其中实际调用类和函数或使用变量。然后，即使在导入过程中没有任何模块被正确初始化，“脚手架”的循环导入也将起作用，并且当您开始“执行”时，一切都会正常工作。

# fancybox - Fancybox 缩略图相对于当前图像的位置

> ID：14591656
> 
> 赞同：3
> 
> 时间：2013-01-29T20:29:58.377
> 
> 标签：fancybox

我正在使用 fancybox 2.0.6 并试图找出一种方法让缩略图条保持相对于当前图像 - 它需要更明显，而不是更大的浏览器窗口的底部。

我已经使用`jquery.fancybox-thumbs.css`来调整`bottom: 120px`，但如果浏览器窗口较小，拇指会阻碍当前图像。

我见过的唯一 jquery 选项是“顶部”或“底部”。

关于保持它相对于图像而不改变它在不同大小的窗口上的任何想法？

# sql - Postgres - 如何通过查询中的巧合排序/排名或

> ID：14591657
> 
> 赞同：1
> 
> 时间：2013-01-29T20:30:04.887
> 
> 标签：sql, postgresql

当我执行以下查询时

```
select * from table where c2 = 11 or c3 = 15 or c7 = false 
```

我得到这个结果

```
| c1 | c2 | c3 | c4  | c5  | c6      | c7     | c8        |
| 24 | 11 | 15 | NNN | NNN |         | true   | false     |
| 28 | 11 | 13 | NNN | NNN |         | true   | false     |
| 26 | 11 | 15 | NNN | NNN | wwwww   | false  | false     |
| 25 | 11 | 2  | NNN | NNN | qqqq    | false  | false     |
| 33 | 23 | 31 | NNN | NNN |         | false  | false     |
| 31 | 23 | 15 | NNN | NNN |         | false  | false     |
| 31 | 23 | 15 | NNN | NNN |         | true   | false     |
| 25 | 11 | 23 | NNN | NNN | qqqqw2  | false  | false     |
| 29 | 11 | 22 | NNN | NNN |         | true   | false     | 
```

我试图通过搜索巧合来订购它，如下所示：

```
| c1 | c2 | c3 | c4  | c5  | c6      | c7    | c8        |
| 26 |[11]|[15]| NNN | NNN | wwwww   |[false]| false     |
| 24 |[11]|[15]| NNN | NNN |         | true  | false     |
| 25 |[11]| 2  | NNN | NNN | qqqq    |[false]| false     |
| 31 | 23 |[15]| NNN | NNN |         |[false]| false     |
| 25 |[11]| 23 | NNN | NNN | qqqqw2  |[false]| false     |
| 28 |[11]| 13 | NNN | NNN |         | true  | false     |
| 29 |[11]| 22 | NNN | NNN |         | true  | false     |
| 31 | 23 |[15]| NNN | NNN |         | true  | false     |
| 33 | 23 | 31 | NNN | NNN |         |[false]| false     | 
```

因此，具有 3 个选项的行将位于顶部，然后是与至少 2 个选项匹配的所有行（无特定顺序），最后是与 1 个选项匹配的所有行，

有没有办法实现这个订单？因为我拥有的另一个选项是使用 and 语句组合选项，然后将 union 与所有结果一起使用，但似乎更多

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:35:43.277

您需要添加一个 order by 子句：

```
order by (case when c2 = 11 then 1 else 0 end) +
         (case when c3 = 15 then 1 else 0 end) +
         (case when c7 = false then 1 else 0 end) desc 
```

（[SQL 小提琴示例](http://sqlfiddle.com/#!1/cce83/3)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:28:31.323

```
order by
    (c2 = 11)::integer + (c3 = 15)::integer + (not c7)::integer desc 
```

[窃取@Gordon 的示例](http://sqlfiddle.com/#!1/cce83/6)

# c# - 什么是创建一组“连接”的数据的好方法

> ID：14591673
> 
> 赞同：1
> 
> 时间：2013-01-29T20:30:49.497
> 
> 标签：c#, list, class, csv, data-collection

我目前正在编写一个接收有关运动数据的程序。变量是

练习 - 例如）卧推

日期 - 前）08/12/13

代表 - 前）10

重量 - 前）135

设置重量 - Ex) 3

休息时间 - 例如）120（以秒为单位）

当天体重 - Ex) 200

我正在从 CSV 文件导入。我已经解析了数据并拥有它，以便它给我一个这样设置的类

```
 Public Class WorkoutInformation
   {
   public string Exercise{get;set;}
   public List<DateTime> date; 
   public List<dynamic> sets {get;set;}
   public List<dynamic> reps {get; set;}
   public List<dynamic> weight {get;set;}
   public List<dynamic> restTime {get; set;}
   public List<dynamic> bodyWeight {get;set;}

} 
```

所以这是我的问题。我发现当我绘制这些日期时，日期没有得到排序，我希望首先显示较早的日子。所以我一直在整理我的`List<WorkoutInformation>`. 但我发现这让我很容易丢失哪些日期与哪些重量、代表或其他信息相关。那么我的问题是如何创建一个类，我可以在其中访问信息（例如列表）`MyList.date[i]`，但是当我更改`MyList.date[i]`所有其他信息的索引时，它会被适当地索引吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:48:25.590

更好的设计可能是创建一个为您保存一个数据会话的类：

```
public class WorkOutSession
{
    public string Exercise { get; set; }
    public DateTime Date { get; set; }
    public int Sets { get; set; }
    public int Reps { get; set; }
    public int Weight { get; set; }
    public int RestTime { get; set; }
    public int BodyWeight { get; set; }
}

public class WorkOutInformation
{
    public List<WorkOutSession> Sessions { get; set; }
} 
```

使用该设计，您可以按日期对会话列表进行排序，并且会话的所有数据将保持关联：

```
var sessionsByDate = Sessions.OrderBy(s => s.Date); 
```

# eclipse - Eclipse 中的两个 SVN 存储库透视图

> ID：14591674
> 
> 赞同：0
> 
> 时间：2013-01-29T20:30:52.570
> 
> 标签：eclipse, subclipse

对于 Android 开发，我使用的是 Eclipse Indigo 和 Subclipse 1.6.18。

我今天碰巧注意到，当我转到 Window > Open Perspective 时，我看到**了两个**SVN Repository Perspectives。一个说“SVN Repository Exploring”，另一个说同样的事情，但在尖括号内，即

```
"<SVN Repository Exploring>". 
```

第一个打开一个空白窗口；尖括号打开了一个窗口，其中我的存储库在上部选项卡中，“任务存储库”在下部选项卡中。

我还注意到，如果我转到 Help > Install New Software 并显示已安装的内容，然后卸载所有 Subclipse 组件，然后重新启动 Eclipse，这两个 SVN 透视图仍然存在。由于缺少 SVN 组件，它们不再工作，但它们仍然存在。

那么这两个 SVN 存储库透视图从何而来，为什么一个带有尖括号，一个没有尖括号？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:59:58.283

如果你同时安装了 Subclipse 和 Subversive，你可以有两个。但是，请注意，您的工作区也将保存和记住透视图，尤其是在您自定义和保存透视图时。尝试使用新工作区启动 Eclipse，看看它们是否消失。

# php - Zend_Gdata_YouTube_VideoEntry 无重定向

> ID：14591675
> 
> 赞同：2
> 
> 时间：2013-01-29T20:30:55.053
> 
> 标签：php, zend-framework, jquery-forms-plugin

有没有办法将视频上传到 youtube 并从中获取返回的结果`Zend_Gdata_YouTube_VideoEntry`？我的问题似乎是当我上传到 Youtube 时，它​​会重定向回另一个页面。我需要我的 JavaScript 表单来处理完成后的重定向。

我使用以下内容创建我的操作 URL 和令牌：

```
 $yt = $this->_auth_youtube();

    $myVideoEntry = new Zend_Gdata_YouTube_VideoEntry();
    $myVideoEntry->setVideoTitle('User Submission');
    $myVideoEntry->setVideoDescription('-');
    $myVideoEntry->setVideoCategory('Entertainment');
    $myVideoEntry->SetVideoTags('user, upload');
    $tokenArray = $yt->getFormUploadToken($myVideoEntry);

    $this->data['token'] = $tokenArray['token'];
    $this->data['formAction'] = $tokenArray['url'] . '?nexturl='.   site_url('art_of_tomorrow/video_submit_result'); 
```

然后我通过 ajaxForm 插件运行表单，这样我就可以有一个进度条：

```
$('#upload-youtube').ajaxForm({
    beforeSend: function() {
        $("#progress-container").show();
        $("#upload-youtube").fadeOut();
        var percentVal = '0%';
        bar.width(percentVal)
    },
    uploadProgress: function(event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.width(percentVal)
    },
    success: function showResponse(responseText, statusText, xhr, $form)  { 
        console.log('status: ' + statusText + '\n\nresponseText: \n' + responseText + xhr + $form);
    },
    target: $("#nutsack")
}); 
```

我不能简单地做一个成功处理程序（`window.location.href = 'the_url'`），因为当你上传到 YouTube 时，它​​会重定向回你的 next_url 参数。

有谁知道解决方案？

# c# - 我想将最终值用于主程序

> ID：14591677
> 
> 赞同：-4
> 
> 时间：2013-01-29T20:31:04.517
> 
> 标签：c#

```
class Class1
{
    public int userInput(int user_Input)
    {
        int final_Value;
        for ( int = 1; int < = user_Input; i++)
        {
            final_Value = int * user_Input;
        }
        return final_Value;
    }
} 
```

我想将 final_value 用于主程序，但它在调试时出错.. 这样做的目的是从用户那里获取输入，例如说 5，这个循环将这个值乘以 5 x 4 x 3 x 2 x 1 并给出我们的输出。我们可以在主程序中使用它。我是 C# 的初学者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:34:24.453

`int`是 C# 中的关键字，您不能将其用作变量名。将其更改为其他内容。

```
for ( var i = 1; i < = user_Input; i++)
{
    final_Value = i * user_Input;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:48:07.213

上面代码的主要问题是您在应该使用变量的地方使用“int”。要编译它，您所要做的就是将您尝试使用 int 的位置转换为使用变量。

```
for(int i = 1; i <= user_Input; i++)
{
    final_Value = i * user_Input;
} 
```

更改为上述内容应该可以编译，但现在您需要在循环中获取正确的逻辑。由于 final_Value 只能保存一个整数值，因此每次循环时，您都在覆盖它，而不是乘以前一个值。

希望第二部分足以暗示您将能够弄清楚如何找到答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:34:20.037

好吧，您还没有告诉我们错误是什么，但第一个错误是您将遇到编译错误。你的 for 循环构造不正确，因为你错过了 i 的声明，尽管你试图增加它。试试这个：

```
int final_Value;
for ( int i = 1; i <= user_Input; i++)
{
    final_Value *= user_Input;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T20:34:24.573

你需要有一个迭代器的变量

```
class Class1
{
    public int userInput(int user_Input)
    {
        int final_Value = 1;

        for ( int i = 1; int <= user_Input; i++)

           final_Value *= i; // equal to : final_Value = final_Value * i;

          return final_Value;

    }
} 
```

`final_Value`最初将是`1`然后将乘以`i`每个增量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T20:34:34.683

您忘记`int i`为循环声明一个变量（在本例中为 ）并初始化该`final_Value`变量：

```
public int userInput(int user_Input)
{
    int final_Value = 1;
    for (int i=1; i<=user_Input; i++)
    {
        final_Value *= i;
    }
    return final_Value;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T20:36:19.203

大多数其他答案似乎都在抛弃`final_value`循环中的价值。尝试：

```
public int userInput(int user_Input)
{
    int final_Value = 1;

    for (int i = 1; i <= user_Input; i++)
    {
        final_Value *= user_Input;
    }

    return final_value;
} 
```

# php - 将隐藏的输入值传递给 php

> ID：14591680
> 
> 赞同：0
> 
> 时间：2013-01-29T20:31:12.973
> 
> 标签：php, jquery, image, profile, image-uploading

我找到了这个代码来上传个人资料图片，

[http://www.phpdevblog.eu/2011-04/combined/jquery-ajax-and-php-based-profile-image-upload-without-reloading-the-page.html#comments](http://www.phpdevblog.eu/2011-04/combined/jquery-ajax-and-php-based-profile-image-upload-without-reloading-the-page.html#comments)

一切都很好。但我想设置一个名称文件 = user_id

我如何将输入隐藏的 user_id 值传递给 php 上传文件过程？

```
var uploadURL = "processupload.php";
      $(document).ready(function(){
                $('a#uploadFile').file();
                $('a#delete').click(function(){
                      $('input#profileImageFile').val("");
                      $('img#profileImage').attr("src","/images/styles/profileBlank.jpg");
                      $('div#messageBox').html("Image deleted !");
                      $('div#messageBox').attr("class","success");
                      $('a#delete').hide();
                });
                $('input#uploadFile').file().choose(function(e, input) {

                    input.upload(uploadURL, function(res) {
                        if (res=="invalid"){
                            $('div#messageBox').attr("class","error");
                            $('div#messageBox').html("Invalid extension !");
                        }else{
                            $('div#messageBox').attr("class","success");
                            $('div#messageBox').html("Imagen cargada !");
                            $('img#profileImage').attr("src","/images/avatars/"+res);
                            $('input#profileImageFile').val(res);
                            $('a#delete').show();
                            $(this).remove();
                        }
                    }, '');                  
          });
           }); 
```

html

```
<div class="imageContainer">
            <img alt=""  src="/images/avatars/<?php echo $row_rs_user['user_image']; ?>" width="150" height="150" id="profileImage">
            <a href="#" id="uploadFile" title="Upload"><img alt=""  src="/images/styles/upload.jpg"></a>
            <a href="#" id="delete" title="Delete" style="display:none;position:relative;z-index:999999;"><img alt=""  src="/images/styles/delete.jpg"></a>
<input type="hidden" name="user_id" value="<?php echo $row_rs_user['user_id']; ?>">
            <div id="messageBox"></div>
    </div> 
```

PHP上传过程

```
if(isset($_POST))
{
.
.
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:57:57.920

只需通过uploadURL传递信息：

```
input.upload(uploadURL + "?user_id=" + $("input[name=user_id]").val(), function(res) {}); 
```

确保保存用户 ID 的隐藏输入的名称是“user_id”。在 PHP 中的服务器端，您可以使用 isset($_REQUEST['user_id']) 读取变量的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:36:39.890

我不熟悉您用来处理上传的插件，但如果表单元素按应有的方式命中 PHP，您只需调用

$fileId = $_POST['user_id'];

这将在您的 PHP 进程中设置一个等于隐藏值的变量。确保将其包含在 ISSET 条件中，以免导致任何错误。

# java - 滑道和梯子游戏随机放置问题

> ID：14591684
> 
> 赞同：3
> 
> 时间：2013-01-29T20:31:20.833
> 
> 标签：java, methods, random

我是一名学生，正在开发滑梯和梯子游戏。我正在使用方法来确定应该在游戏板上放置多少滑道和梯子。我在主要使用参数中为每个参数指定了 10 个，但我不断得到从 6 到 11 的任何位置。

这两种方法是否相互干扰？

或者我为随机放置设置 for 循环的方式有问题吗？

我是这个网站的新手，如果您需要更多说明，请告诉我，我不想把整个程序放在这里。谢谢。

```
//main
                  ChutesAndLadders cl = new ChutesAndLadders();
                  cl.setBoard(new String[100]);
                  cl.makeChutes(10);
                  cl.makeLadders(10);

//methods
            public String [] board;
            private int chutes, ladders;
            public int position;
            public Random rand = new Random();

        //set board
                    public void setBoard(String [] n){
                        board = n;
                        for(int i = 0; i < board.length; i++)
                            board[i] = "   ";
                    }
        //set and place chutes
                    public void makeChutes(int n){
                        chutes = n;
                        for(int i = 0; i <= chutes; i++)                    
                            board[rand.nextInt(board.length)] = "C" + chutes;

                    }
        //set and place ladders
                    public void makeLadders(int n){
                        ladders = n;
                            int lcell = 0; 
                        for(int i = 0; i <= ladders; i++)
                                 board[rand.nextInt(board.length)] = "L" + ladders; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T20:42:15.660

首先，你写道：

```
for(int i = 0; i <= chutes; i++)                    
    board[rand.nextInt(board.length)] = "C" + chutes; 
```

循环中的赋值语句将运行 chutes+1 次。（在您的情况下使用了 11 次。） [`i < chutes`改为使用。] 这在您的梯子代码中是相同的。这解释了为什么在代码运行完成时您可能会有多达 11 个滑槽或梯子。

其次，您没有注意防止多次为同一空间分配滑道或梯子。 `rand.nextInt(board.length)`不保证每次运行时都会生成唯一值（否则它不会真正随机。）这解释了为什么在代码运行完成时您可能看不到多达 11 个滑槽和梯子。

为了使这一点更清楚，请在其中放置一个常量值：

```
for(int i = 0; i < chutes; i++)                    
    board[11] = "C" + chutes; 
```

请注意，您最终会得到一个滑槽（在 11 格处）——除非梯形代码用梯形图覆盖它。

希望有帮助。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T20:35:09.770

乍一看，我的猜测是你正在结束重叠的条目。因为您生成随机放置并且不检查那里是否已经有滑道或梯子，所以您很可能会遇到重叠。

生成随机位置应该相当简单，然后在放置之前检查是否有东西。如果发现碰撞，只需生成另一个随机数并重复，直到可以放置它。

另外，顺便说一句，避免 for 循环和不带花括号的 if 语句始终是一个好习惯。在块中添加第二个赞并想知道为什么它没有作为块的一部分执行是很容易的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T20:57:19.307

你的 for 循环有一个包容性的上限检查，`0 .. 10`产生 11 个条目。

就像 Mike 所说的，结果数量较少是由于碰撞造成的，您可以通过设置板子来防止这些碰撞，方法是在板上填充所需的元素，然后对板子进行洗牌以获得最终结果，例如：

```
public void setupBoard(String [] n, int nrLadders, int nrChutes){
    board = n;
    int index = 0;

    while (index < board.length && 0 < nrLadders--) {
        board[index++] = "L" + nrLadders;
    }

    while (index < board.length && 0 < nrChutes--) {
        board[index++] = "C" + nrChutes;
    }

    while (index < board.length) {
        board[index++] = "   ";
    }

    board = Collections.shuffle(Arrays.asList(board)).toArray(new String[board.length]);
} 
```

这就像创建一副包含许多梯形卡、许多滑槽卡、大量空现货卡的牌组，然后将该牌组洗牌以获得游戏板。

# php - wordpress - wp-includes\media.php 在第 467 行

> ID：14591686
> 
> 赞同：1
> 
> 时间：2013-01-29T20:31:23.830
> 
> 标签：php, wordpress

警告：imagejpeg() [function.imagejpeg]：无法打开 'C:\Inetpub\vhosts\shahsteals.com\httpdocs//wp-content/uploads/2012/08/BRlogo-38431_120x136.jpg' 进行写作：权限被拒绝在第 467 行的 C:\Inetpub\vhosts\shahsteals.com\httpdocs\wp-includes\media.php

我正在使用 Windows 2008 服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:39:04.440

似乎某些插件或脚本正在使用 linux“/”正斜杠作为路径名。不管是什么，它都不适合Windows。

# javascript - 一段时间后在弹出窗口或标签浏览器之间切换

> ID：14591687
> 
> 赞同：1
> 
> 时间：2013-01-29T20:31:29.977
> 
> 标签：javascript, jquery, html

我想在电视显示器上显示两个不同的网站/网址（浏览器 Chrome）

出于安全原因，我不能将 A 的内容放在站点 B 中。

我现在的方法是使用“开始演示”按钮打开网站 A。

站点 B 是第一个站点，C 是第二个站点。两者都可以在全屏模式下运行。

如果我按下按钮，应该在 20 秒后切换站点 B 和 C。有什么例子吗？在弹出窗口中查看和控制 2 个站点会更好吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:34:48.200

```
var newWin = window.open();

newWin.focus(); //focuses on new window

window.focus(); //focuses on main window 
```

# java - iText - 创建 PDF 时旋转页面内容

> ID：14591689
> 
> 赞同：13
> 
> 时间：2013-01-29T20:31:31.240
> 
> 标签：java, pdf, itext

我想制作一个包含横向页面的 PDF。虽然可以使用以下方法将页面大小设置为横向：

```
document.setPageSize(PageSize.LETTER.rotate()); 
```

这并没有达到我想要的效果，因为我添加的任何内容仍然是向左->向右，而我希望它是底部->顶部。

IE 这就是我得到的：

![具有左->右内容的横向](../Images/c5ede0a59f569e58a1334dfe9a62fdc8.png)

当我想要的是：

![内容底部->顶部的横向](../Images/8a7066ed5b21d69aefd2eca0e8fb990e.png)

我已经能够通过[在创建 PDF 后打开它并](http://itextpdf.com/examples/iia.php?id=232)使用 iText 旋转它来实现所需的输出，但我想要一个解决方案，让我在向其中添加内容后立即使用 iText 旋转它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T09:22:00.517

很好的问题。如果我能够投票两次，我会的！

您可以通过以下方式实现您想要的`PdfPageEvent`：

```
public class RotateEvent extends PdfPageEventHelper {
    public void onStartPage(PdfWriter writer, Document document) {
        writer.addPageDictEntry(PdfName.ROTATE, PdfPage.SEASCAPE);
    }
} 
```

您应该`RotateEvent`在定义编写器后立即使用它：

```
 PdfWriter writer = PdfWriter.getInstance(document, os);
    writer.setPageEvent(new RotateEvent()); 
```

请注意，我曾经`SEASCAPE`获得图像中显示的方向。`LANDSCAPE`如果您希望页面朝向另一个方向，您也可以使用。

一旦我开始写第三版“iText in Action”，我就需要记住这个问题。这是何时使用`onStartPage()`事件的一个很好的例子。

# bpel - 选择 BPEL 引擎

> ID：14591692
> 
> 赞同：3
> 
> 时间：2013-01-29T20:31:47.543
> 
> 标签：bpel

我需要为我的工作选择一个开源 BPEL 引擎。我是 BPEL 新手，从未使用过任何 BPEL 引擎。您会向我推荐哪种引擎，对于初学者来说易于配置和使用？简短的解释，但我真的必须经历。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:35:47.417

我们在工作中使用[Apache ODE](http://ode.apache.org/)，它运行良好。我们通过邮件列表获得的项目支持对我们来说已经足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T20:46:46.243

大约两年前，我使用了 Oracle 的 BPEL 引擎。配置起来既是一场噩梦，在支持方面也相当不成熟。甚至他们的示例代码也无法正常工作。从那以后情况可能发生了变化。

# php - 是否可以从可执行的 PHP 文件中调用 Codeigniter 类函数？

> ID：14591693
> 
> 赞同：0
> 
> 时间：2013-01-29T20:31:48.557
> 
> 标签：php, codeigniter, codeigniter-2, crontab

是否可以从可执行的 PHP 文件中调用 Codeigniter 类函数？我有一个控制器类，我想从可执行的 PHP 文件中调用该类的函数。

为什么？因为我的应用程序适用于 cronjobs。当我从 GUI 创建一个 cronjob 时，会创建一个新的 php 文件并使用配置进行设置以调用控制器函数。

我该怎么做？

编辑：

我试过[这个例子](http://ellislab.com/codeigniter/user-guide/general/cli.html)，但它不起作用。创建的 cronjobs 是（要测试的组合）：

```
* * * * * /usr/bin/php /home/myweb/public_html/CI/application/controllers/tools message
* * * * * /usr/bin/php http://www.myweb.com/CI/site/index.php/tools/message
* * * * * /usr/bin/php index.php tools message
* * * * * php index.php tools message 
```

但他们不工作

编辑：

在本的回答之后，我尝试过（我有一个站点文件夹）：

```
* * * * * /usr/bin/php /home/myweb/public_html/CI/index.php tools message
* * * * * /usr/bin/php /home/myweb/public_html/CI/site/index.php tools message 
```

我得到下一个日志错误：

```
ERROR - 2013-01-30 05:52:01 --> Severity: Notice  --> Undefined index:  REMOTE_ADDR /home/myweb/public_html/CI/system/core/Input.php 351
ERROR - 2013-01-30 05:52:01 --> Severity: Warning  --> Cannot modify header information - headers already sent by (output started at /home/myweb/public_html/CI/system/core/Exceptions.php:185) /home/myweb/public_html/CI/system/libraries/Session.php 675
ERROR - 2013-01-30 05:52:01 --> Severity: Warning  --> Cannot modify header information - headers already sent by (output started at /home/myweb/public_html/CI/system/core/Exceptions.php:185) /home/myweb/public_html/CI/system/helpers/url_helper.php 542 
```

[已解决] 我已经用 curl 解决了：

```
* * * * * /usr/bin/curl http://www.myweb.com/CI/site/index.php/tools/message 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:36:51.257

是的，有可能。直接来自 CI 文档...

[http://ellislab.com/codeigniter/user-guide/general/cli.html](http://ellislab.com/codeigniter/user-guide/general/cli.html)

从您的问题更新中编辑...

你的cron有几个问题......

Cron 1）您使用的是控制器文件的绝对路径，应该是 index.php 的绝对路径

Cron 2）如果你想使用 http 地址，那么你应该使用 curl -L --silent "www.example.com"

Cron 3) 不是绝对的文档路径

Cron 4) 应该使用 php 和 index.php 的绝对路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:35:51.157

是的你可以。只需确保所有正确的文件都包含在您想要的上下文中。

从您的类中创建一个“新”CodeIgniter 对象，然后使用这些函数。

# javascript - 需要解释术语 [0] == ![0]

> ID：14591696
> 
> 赞同：1
> 
> 时间：2013-01-29T20:32:04.907
> 
> 标签：javascript

这个词`[0] == ![0]`是什么意思？虽然他们返回`true`。但我需要解释它是如何返回`true`的，因为 [0] 的类型是对象并且 ![0] 返回布尔值？那么他们是如何平等的呢？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T20:37:27.630

`![0]`很简单`false`，因为所有非`null`对象都转换为`true`.

比较`[0]`and`false`时，它们被转换为数字 - 不要问为什么，就是这样。`[0]`首先转换为字符串`"0"`（通过将条目与`,`for 分隔符连接来将数组转换为字符串），然后是数字`0`. `false`被强制转换为 number `0`，你就有了：`[0] == ![0]`相当于`0 == 0`，这是真的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T20:34:56.943

要理解这一点，`![0]`首先要通过表达式。它评估为`false`- 因为`[0]`（与 JS 中的任何对象一样）是一个真实值。所以声明变成了...

`[0] == false`

现在更容易了：`false`转换为`0`（对于 Boolean -> Number 规则），并`[0]`通过 Object-To-Primitive 规则转换 - 首先转换为`'0'`（String），然后转换为`0`（Number）。显然，`0` *等于*。`0`)

PS 是的，这可能看起来很奇怪，但两者都......

`[0] == false`

... 和 ...

`![0] == false`

...评估为`true`：前者已经解释，后者只是`false == false`。`==`有人仍然对那些Lint 警告感到惊讶吗？)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:38:49.823

您已将表达式拆分为多个部分：

```
typeof([0]) // "object"
[0] == true // false
![0] == true // false
![0] == false // true 
```

这样做的原因是因为在 JavaScript 中只有值`1`被隐式转换为 true，所以所有其他值都被转换为 false。only 否定一个错误的`![0]`表达式，因此它变成`(false == false) == true`.

# .net - 有谁知道为什么标准框架参考上可能会出现“清单定义与程序集参考不匹配”错误？

> ID：14591699
> 
> 赞同：8
> 
> 时间：2013-01-29T20:32:35.433
> 
> 标签：.net, wpf, xaml, reference

我有一个问题困扰了我一段时间。在我发布的 WPF/.NET 3.5 产品上，由于以下错误，大约有 100 次安装将无法运行该软件：

> System.Windows.Markup.XamlParseException：对象初始化失败 (ISupportInitialize.EndInit)。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）标记文件“mainwindow.xaml”中的对象“System.Windows.Controls.MenuItem”出错。

这令人费解，原因有以下三个：

1.  这只发生在大约 1% 到 2% 的安装中。

2.  据我所知，这些系统上的 .NET 安装或操作系统没有什么不寻常的。

3.  默认框架引用 (System.Windows.Controls.MenuItem) 会发生这种情况

谁能想到可能的原因？

**编辑：**按照“500”的提示后，我能够在客户机器上运行 Fusion 日志查看器。在开发机和其他所有测试机上，对“PresentationFramework”和“PresentationFramework.Aero”都有成功的绑定尝试，在意料之中。在客户端机器上，有一个额外的绑定尝试失败（删除了不相关的行）：

```
*** Assembly Binder Log Entry  (2/3/2013 @ 1:18:44 PM) ***

The operation failed.
Bind result: hr = 0x80070002\. The system cannot find the file specified.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: DisplayName = PresentationFramework.Dawn TOP, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
 (Fully-specified)
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = NULL
Calling assembly : PresentationFramework, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35.
===
LOG: This bind starts in default load context.
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v2.0.50727\config\machine.config.
LOG: Post-policy reference: PresentationFramework.Dawn TOP, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
LOG: GAC Lookup was unsuccessful.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/My App/PresentationFramework.Dawn TOP.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/My App/PresentationFramework.Dawn TOP/PresentationFramework.Dawn TOP.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/My App/PresentationFramework.Dawn TOP.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/My App/PresentationFramework.Dawn TOP/PresentationFramework.Dawn TOP.EXE.
LOG: All probing URLs attempted and failed. 
```

谷歌搜索“PresentationFramework.Dawn”没有返回任何结果，我找不到对该文件的任何引用。可以做任何解释或额外的测试吗？

**编辑 2：** 事实证明，客户安装了一个名为“Dusk”的非官方 Windows 7 Aero 主题。出于某种原因，PresentationFramework 决定调用 PresentationFramework.Dusk 而不是 PresentationFramework.Aero（我在项目中明确包含的参考）。我假设该错误是由于在 GAC 中找不到 Dusk 而导致的第 3 方主题安装错误的结果，但是您能否说明我如何阻止尝试引用并强制所有 GUI 元素使用 PresentationFramework.Aero？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:02:50.070

在出现故障的机器上，运行[Assembly Binding Log Viewer](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx)以更好地了解它为什么会脱轨。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T07:46:03.553

在您的应用程序中，您可以指定要使用哪个主题来强制使用另一个主题而不是系统主题。

需要将此代码添加到您的 ApplicationStartUp 事件中

```
void App_Startup(object sender, StartupEventArgs e) {
  // other startup code
  Uri uri = new Uri(“PresentationFramework.Aero;V3.0.0.0;31bf3856ad364e35;component\\themes/aero.normalcolor.xaml”, UriKind.Relative);

  Resources.MergedDictionaries.Add(Application.LoadComponent(uri) as ResourceDictionary);
} 
```

您还可以在 XAML 中定义您的主题：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source=“/PresentationFramework.Aero;V3.0.0.0;31bf3856ad364e35;component\themes/aero.normalcolor.xaml“ />
        </ResourceDictionary.MergedDictionaries>

        <!– other resources go here –&gt;

    </ResourceDictionary>
</Application.Resources> 
```

此设置定义您要使用 Aero 主题。（也许您需要更改要使用的版本和公钥令牌）。

更多信息可以在[这里](http://arbel.net/2006/11/03/forcing-wpf-to-use-a-specific-windows-theme/)找到。

# java - 如何在vaadin中检查密码强度

> ID：14591701
> 
> 赞同：1
> 
> 时间：2013-01-29T20:32:41.240
> 
> 标签：java, spring, vaadin

我在我的项目中使用 vaadin、spring 和 jpa。我需要检查并通知用户他的密码有多强，并希望在纯 Java 中进行。

你能推荐我最好的方法吗？如果密码至少有一个数字等，是使用特殊库还是只通过正则表达式检查更好。你怎么看？

如果您有任何指向此以及好的库或教程的链接，请发给我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T02:25:15.600

一般来说，某人密码的强度取决于它的可猜测性。更复杂的密码不易被猜到。您可以通过将其与字典攻击或蛮力算法猜测密码的可能性联系起来来估计复杂性。一旦验证密码不是通用密码，您可以通过使用蛮力猜测它需要多长时间来估计其复杂性。从这个意义上说，你可以测量一个类似的随机密码会有多少二进制熵。这将是对其可猜测性的粗略估计，尽管正如一位评论者指出的那样，测量复杂性是困难的。在我参加的一门安全课程中，讲师建议应该以至少 40 位熵为目标，但 60 位被认为是安全的（假设无法将密码与随机选择的密码区分开来）。所以，密码计的工作是猜测等效随机密码的熵。显然，这里有很多陷阱，使用已建立的库可以为您节省大量时间。

**每个字符**的熵是 log10(number_possible_characters)/log10(2)，因此您可以将熵计算为`pwd.length() * Math.log10(numPossibleCharacters)/Math.log10(2)`-- 并且使用 26 个字符，即每个字符大约 4.7 位熵。

以纯科学的方式测量熵并不总是对可猜测性的有效估计，因为密码“abc123”可能看起来和“j3s9fn”一样好（对于计算机，而不是人类），但人类可以很容易地看到第一个比第二个更容易被猜到。严格来说，熵是衡量真正随机性的指标；虽然我们知道人类不是随机的，但它们可能足够接近随机，我们测量熵作为替代，并希望我们的算法测量人类产生的随机性/创造力/不可猜测性的种类。因此，这既是一个技术问题，也是一个人类行为问题。

如果我没记错的话，我曾经被告知英语散文（一页上的文字）每个字符只有大约 1.5 位熵——换句话说，它更容易预测，所以你需要大约 3 次作为如果您只输入英文单词，那么它的密码要“强”，而不是输入随机的小写乱码。坦率地说，我认为需要符号/数字/大写的密码系统是愚蠢的，原因是：如果我愿意，我应该能够输入更多的散文。YMMV。

我们应该通过估计用户可以为他们键入的每个字符选择或可能选择的字符数来开始测量熵。

可能的字符数`numPossibleCharacters`取决于**用户**似乎使用的字符集，或者您允许他们使用的字符集。例如，如果用户键入，`abc`那么您会假设他们仅从 26 个可能的字符（每个字符 4.7 个）中进行选择。但是，如果他们键入`aBc`您会假设他们从 52（小写和大写）（每个字符 5.7）中选择。如果他们使用数字，添加另外 10 个可能的字符（除非他们似乎只选择明显的数字）。

此外，事后添加数字的用户倾向于将它们放在密码的开头或结尾。因此，他们更改字符集的次数也可能是衡量密码强度的一个很好的指标。例如，“word908”显然不如“w39or7d”安全。当你这样做时，你就超出了对复杂性的简单估计。

如果你使用这个更宽松的复杂性定义，那么很难衡量密码被任何类型的攻击猜到的可能性，尽管你可能会尝试想象一种智能攻击，它选择从最容易猜到和最容易猜到的密码开始的半随机密码。最可能的模式。你可能会说每个字符增加的复杂性（熵？）取决于它是否与前一个字符在同一个字符集中，它是否与前一个字符连续，或者它是否重复一些明显的模式（如“123”或“ABC”）。

您可能会说，从一组字符到另一组字符的每次切换（小写到大写，或数字到符号）本身就是一个随机事件。假设我们定义了 5 个字符集：小写、大写、数字、common_symbols 和 uncommon_symbols。我们检测这些集合中有多少正在使用（例如，如果用户键入“123abc”，`charSetsUsed`则为 2）。然后，我们一次循环遍历字符串中的字符。每次用户更改字符集时，我们都会这么说`entropy += log(charSetsUsed)/log(2)`。然后，对于每个字符，我们还添加`entropy += log(charsInThisCharSet)/log(2)`. [编辑：这不是真正的熵，所以也许您应该将其视为估计的复杂性]

如果你真的想获得技术，你可以测量字符集更改的数量。假设密码长度为 10 个字符。它可以有 1 到 9 组更改，即 10 个选项。然后我们说它们是作为插槽的组合分布的。所以我们这样做：

```
 log(numChanges)/log(2) + log(combination(totalSlots, usedSlots))/log(2). 
```

假设用户输入 aoq35esm42。我们看到他们从一个字符集切换到另一个字符集的 3 个地方。这是一个 10 个字符的密码，因此有 9 个可能的位置用于设置更改（位置出现在两个字符中的任何一个之间），它们的顺序无关紧要（因此组合/二项式系数/n 选择 r）：

```
 log(numChanges)/log(2) + log(combination(9, 3))/log(2).  
 log(3         )/log(2) + log(    84           )/log(2). 
 1.5849625              + 6.3
 7.97727992 
```

所以我们看到我们有将近 8 位的熵，基本上说“在他们可以选择更改字符集的所有地点和时间中，他们可以在这里做的事情大约有 8 个随机位或 2^8 种可能性”。如果我们然后根据每个字符的子集计算每个字符的熵，以及每次更改要使用的子集的选择，那么我们可能会像这样添加熵（如果我在数学上犯了错误，请纠正我）：

*   aoq35esm42 有 6 个小写字母字符，对于 6 * log(26)/log(2), = 28.2026383
*   aoq35esm42 有 4 个数字字符，对于 4 * log(10)/log(2), = 13.2877124
*   aoq35esm42 有 3 个字符集更改和 2 个字符集，对于 3 * log(2)/log(2), = 3
*   早些时候，我们计算了 7.97727992 位熵的字符集更改的位置
*   我们愚蠢地假设总分约为 78，所以这是一个很好的密码。

使用 apache commons MathUtils.binomialCoefficientDouble() 函数计算组合。

此外，如果密码包含字典单词，则认为密码很弱。因此，如果您可以根据字典进行扫描，您可能会假设（猜测）这些字符应该以每个字符 1.5 位熵的英文散文来衡量。但是，您不想将密码暴露给数据库查询（可能会记录它），所以最好的办法是猜测是否有英文单词（祝你好运），比如假设（相当糟糕）任何一组3-5个单格字母字符，包含一个元音，是一个英文单词。或者，您可以构建一个最常见的英语音节字典，这可能更容易存储在内存中。或者，您可以放弃并假设您的用户无论如何都会对系统进行游戏，以使他们的密码更容易记住。

尽管如此，如果您确定要准确，您可以将英语单词的内存数据库存储在安全内存中。

所有这些加起来是一个相当复杂的算法，它可能仍然不完整。您可能应该进行相对简单的计算，或者使用其他人已经编写的库。

''安全存储''

计算密码安全性的方法并没有真正解决一个完全不同的问题：在密码通过网络或客户端内存时保持密码安全。我不是这里的专家，但我已经阅读了足够多的书，知道要保持警惕并做好功课。至少，我会使用 https 并强烈考虑使用浏览器的本机密码输入字段。这是避免使用自己的技术，而是使用图书馆的另一个原因（只要你能说他们做的功课比你能应付的多；我不知道我会相信技术，除非我愿意调查了它）。此外，您永远不应以明文形式存储密码，而应使用单向加密/散列。对你的密码加盐，并使用安全的散列算法（不是 MD5；也许更喜欢 SHA2？）对它们进行散列，可能多次重新散列和重新加盐（以增加字典攻击的成本）。通常有一些库会为您处理这类事情，即使它们不测量密码强度；我知道 C# 或 .NET 有专门针对加盐、散列和迭代的库；等等。可能还有其他问题我在这里没有提到——请记住密码强度只是安全链中的一个环节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T22:49:25.433

在纯 java 中，您可以使用[VT Password](http://code.google.com/p/vt-middleware/wiki/vtpassword)来检查密码强度。可从 Maven 中心获得：

```
<dependencies>
  <dependency>
      <groupId>edu.vt.middleware</groupId>
      <artifactId>vt-password</artifactId>
      <version>3.1.1</version>
  </dependency>
<dependencies> 
```

# javascript - 动态生成的选择/选项在 IE 中为空，但在其他浏览器中可以

> ID：14591707
> 
> 赞同：3
> 
> 时间：2013-01-29T20:33:15.370
> 
> 标签：javascript, dynamic

我正在生成一个“选择”元素，然后用选项填充它并将其插入到我页面的 DOM 中。在 FF、Chrome、Chromium 等中一切都很好，但在 IE 中，下拉列表中没有选项显示，但光标下显示突出显示，当我单击空白列表时，事件处理程序被触发并正确处理。这是相关的 HTML 区域：

```
<span id="spn_fyear" style="position:absolute; top:7px; left:200px; height:24px; cursor:pointer; color:#000000;" onclick="spn_fyear_onclick(this)">
   <span id="spn_fyearno" style="position:absolute; top:0px; font:italic bold 17px sans-serif; color:#FFFEF2;"><?=$thisPage->getVar('start_year')?></span>
</span> 
```

这是有问题的javascript：

```
function spn_fyear_onclick(_obj)
{
    //make start year list
    var lstto = document.getElementById('lst_year');
    var topts = new Array();
    var nopt = null;
    for(i=0; i<lstto.options.length; i++)
    {
        topts[i] = lstto.options[i].text;
    }
    var lstf = document.createElement('SELECT');
    lstf.id = "lst_fyear";
    lstf.style.position = "absolute";
    lstf.style.top = "-3px";
    lstf.style.left = "1px";
    lstf.style.fontFamily = "sans-serif";
    lstf.style.fontWeight = "normal";
    lstf.style.fontSize = "12px ";
    lstf.style.width = "55px";
    lstf.style.color = "#000000";
    lstf.style.display = "inline";
    lstf.onchange = lst_fyear_onchange;
    for(i = 0; i < topts.length; i++)
    {
        if(topts[i] != 'undefined')
        {
        nopt = document.createElement('OPTION');
        nopt.text = topts[i];
        nopt.value = topts[i];
        lstf.appendChild(nopt);
        }
    }
    document.getElementById('spn_fyear').appendChild(lstf);
} 
```

在这一行中：`var lstto = document.getElementById('lst_year')` 我正在创建对现有选择对象的引用，我从中复制选项数据。lst_year 在页面首次加载时由 php 数据库查询填充。我绝望地创建了数组 ( `var topts = new Array()`)，以防 IE 有一个复制属性和属性但无济于事的怪癖。就像我说的 - 在 Linux 和 Windoze 中的 FF 或 Chrome 中，一切都像梦一样工作，但与 IE 混为一谈。我已经搜索了 MSDN 等一些晦涩的行为，但我很难过。任何建议将不胜感激:) 亲切的问候，仁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:08:22.337

很可能，您的问题在这里：

```
 nopt = document.createElement('OPTION'); 
```

试试这里提到的这个方法：

[JavaScript：在 new Option() 之后添加额外的属性](https://stackoverflow.com/questions/5499019/javascript-add-extra-attribute-after-new-option)

（在我开始使用构造函数`<option>`之前，我在元素和 IE方面遇到了很多问题。`new Option`

# unix - 避免.BI 之后的联机帮助页中的空格

> ID：14591709
> 
> 赞同：2
> 
> 时间：2013-01-29T20:33:24.793
> 
> 标签：unix, manpage, troff, groff

我正在尝试编写一个有点便携的联机帮助页，我需要在其中描述特定字符串的格式。我使用`.BI`宏在固定部件和可变部件之间切换，但是我有六个以上的组件（不可移植），而且部件也是可选的。

目标格式是

**USB***编号***::***制造商***::***产品***::***序列号*[ **::***类型*]

即“USB”和粗体的双冒号，斜体的“num”、“manufacturer”、“product”、“serial”和“type”，以及没有特殊格式的方括号。

到目前为止，我有

```
.BI USB num :: manufacturer :: product
.BI :: serial
.RB [ ::
.IB type ] 
```

但是，这会在“product”、“serial”和最后一组双冒号之后生成空格。我怎样才能避免这些，使用可移植到合理的 roff 实现子集的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:31:22.090

使用`\c`转义符“连接”文本行。

来自 Troff 用户手册（CSTR 54，[http](http://troff.org/54.pdf) ://troff.org/54.pdf ）：

> 4.2\. 中断的文本。在 nofill（非填充）模式下复制输入行可以通过用 \c 终止部分行来中断。下一个遇到的输入文本行将被认为是同一行输入文本的延续。

```
.BI USB num :: manufacturer :: product\c
.BI :: serial\c
.RB [ ::\c
.IB type ] 
```

只要格式化程序是真正的 *roff 而不是仅识别一些常见宏的脚本，这应该可以工作。

# python - 正则表达式查找字符串并删除整行

> ID：14591712
> 
> 赞同：1
> 
> 时间：2013-01-29T20:33:37.950
> 
> 标签：python, regex, string

如何搜索文本，如果匹配删除整行，最好在正则表达式中。

到目前为止我已经尝试过：

我的文件：

```
wait                    => '10', 
```

试用一

```
data = re.sub(r"^.*wait.*$","",data) #does not work 
```

试验二：

```
data = re.sub(r".+/wait/.+","",data) #does not work 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:43:39.047

你`regexp`的不正确。试试这个：

```
重新进口
打印 re.sub(".*wait.*\n",'',"""wait => '10',
等待 => '10',
其他数据
等待 => '10',
""",标志=re.M)

```

* * *

[http://docs.python.org/2/library/re.html#re.M](http://docs.python.org/2/library/re.html#re.M)

`re.M`

`re.MULTILINE`

指定时，模式字符 '^' 匹配字符串的开头和每行的开头（紧跟在每个换行符之后）；并且模式字符 '$' 匹配字符串的末尾和每行的末尾（紧接在每个换行符之前）。默认情况下，'^' 仅匹配字符串的开头，而 '$' 仅匹配字符串的末尾以及字符串末尾的换行符（如果有）之前。

# ruby-on-rails - Rails 3.2.11：由于控制器和模型的加载顺序导致的奇怪行为

> ID：14591713
> 
> 赞同：2
> 
> 时间：2013-01-29T20:33:43.497
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在将旧的 Rails 应用程序迁移到 Rails 3.2.11/Ruby 1.9.3。

我们有一个继承自另一个模型`ActiveRecord`的模型。加载时，它调用一个方法来设置，为此它需要一个“事件 id”（每个事件都有自己的数据库）。`ControlPoint``EventDependent``ControlPoint``EventDependent``table_name`

这一切的关键是，我们需要在模型加载时知道“事件 id”。

有`control_point_controller`一个`before_filter`调用控制器方法来获取所需的“事件ID”（通过参数）。在以前的 Rails 版本中，这始终可以正常工作。

但是在 Rails 3.2.11 中，它有时可以工作……有时却不行！

当它不起作用时，问题是模型的“设置表名”在我们准备好“事件 id”之前被调用。我曾尝试使用调试器对其进行调试，但很多时候，流程不会进入 before_filter 操作，因为在此之前它会失败。其他时候它进入......当它进入时，我们有可用的参数，并且一切正常。

我一直在搜索这个，但找不到任何相关的具体内容。我会说问题在于模型和控制器的加载顺序不固定......它们同时开始加载，有时一个在另一个之前加载。这有意义吗？我认为大约 70% 的时间它不起作用，因为还没有定义“事件 id”（因为它没有执行 before_filter 并且 params 还不存在），而另外 30% 的时间它确实如此。

我的问题是：我可以以某种方式延迟模型的加载吗？或者让它在控制器的 before_filter 之后加载？关于问题可能是什么的任何其他想法？

如果您愿意，我可以发布相关代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:31:51.227

我找到了一个解决方案，并想与你分享，以防有人遇到类似的问题，或者想提出更好的想法。

正如我所说，问题是我无法控制何时在模型中执行“set_table_name”，因为这个调用只是在模型中“浮动”，如下所示：

```
class ControlPoint < EventDependentModel
    set_table_name 'ControlPoints'
    ....
    ....
end 
```

因此，当它在控制器之前被调用时`before_filter`（它发生了几次，随机......），“event_id”还不可用。

我所做的是`set_table_name`从模型中删除该调用，并添加另一个类似这样`before_filter`的调用：`control_point_controller`

```
class ControlPointsController < EventDependentController
    before_filter :prepare_table_name
    .....
    .....

    protected
       def prepare_table_name
           ControlPoint.set_table_name 'ControlPoints'
       end
end 
```

还有另一个`before_filter`in `EventDependentController`，它设置了我们需要的“event_id”（通过参数）。这样，何时`set_table_name`执行（在我的控制器中的每个操作之前），“event_id”已经由父级中的另一个 before_filter 设置控制器。

问候 ！

# mongodb - 具有“获取或阻止”操作的数据存储？

> ID：14591714
> 
> 赞同：1
> 
> 时间：2013-01-29T20:33:50.553
> 
> 标签：mongodb, redis, rabbitmq, message-queue, publish-subscribe

我正在寻找具有“获取或阻止”操作的数据存储。如果该值存在，则此操作将返回与键/查询关联的值，或者在创建该值之前阻塞。

它就像一个发布/订阅消息队列，但有一个内存来处理订阅者在发布者发布结果后连接的情况。

此操作允许不相关的进程相互会合，并且它似乎是一个非常有用的架构构建块 - 特别是在 Web 环境中 - 即进来的 Web 请求启动后端服务器进程来做一些工作并且 Web 客户端可以通过未来的 AJAX 调用获得结果。

这是我发现的一篇关于如何使用 mongodb 完成此类操作的博客文章：

[http://blog.mongodb.org/post/29495793738/pub-sub-with-mongodb](http://blog.mongodb.org/post/29495793738/pub-sub-with-mongodb)

今天还有哪些其他解决方案正在使用？我可以用 redis 或 rabbitmq 做同样的事情吗？我已经查看了两者的文档，但不清楚它到底是如何工作的。我应该用 0MQ 滚动我自己的服务器吗？有没有专门针对这个问题量身定制的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:01:45.050

你是正确的 Redis[1] 和 rabbitmq[2] 都具有发布/订阅功能。

[1] [http://redis.io/topics/pubsub](http://redis.io/topics/pubsub)

[2] [http://www.rabbitmq.com/tutorials/tutorial-three-python.html](http://www.rabbitmq.com/tutorials/tutorial-three-python.html)

# jpa - 如何调整 EclipseLink 预分配策略

> ID：14591723
> 
> 赞同：3
> 
> 时间：2013-01-29T20:34:24.627
> 
> 标签：jpa, eclipselink, openjpa, allocation

我正在处理一个项目，我们最近将持久性提供程序从使用 OpenJPA 更改为使用 EclipseLink。这是一个大而老的应用程序，我们还从其他进程执行 SQL 插入，这些进程目前暂时无法迁移到 JPA。

我们使用*@TableGenerator*来引用一个表，我们在其中跟踪要在插入时使用的 id。

当我们使用 OpenJPA 时，我们注意到它首先从表中选择下一个 id，然后更新表以预分配下一个 id。这与旧 SQL 进程获取和预分配下一个 id 的方式完全相同。

当我们切换到 EclipseLink 时，我们注意到了相反的行为，它更新表以预分配下一个 id，然后开始执行插入操作。这导致我们出现**java.sql.SQLIntegrityConstraintViolationException**，因为最后一个预分配的 id 已被非 JPA 进程用于插入新记录，因此当 JPA 进程到达该 id 时，数据库会给出错误，声称我们正在尝试使用已使用的 id 进行插入。

有没有办法告诉 EclipseLink 以 OpenJPA 的方式处理预分配？

以下是一些来自 OpenJPA 与 EclipseLink 的预分配策略示例，对于这些示例，我将*allocationSize*设置为 5

**OpenJPA**

```
TEST  TRACE  [main] openjpa.jdbc.SQL - <t 22760146, conn 3658896> executing prepstmnt 9137209 SELECT NEXT_ID FROM ABC.table_ids WHERE TABLE_ID = ? FOR UPDATE [params=(String) 1034] [reused=0]
TEST  TRACE  [main] openjpa.jdbc.SQL - <t 22760146, conn 3658896> [94 ms] spent
TEST  TRACE  [main] openjpa.jdbc.SQL - <t 22760146, conn 3658896> executing prepstmnt 23999306 UPDATE ABC.table_ids SET NEXT_ID = ? WHERE TABLE_ID = ? AND NEXT_ID = ? [params=(long) 55, (String) 10, (long) 50] [reused=0]
TEST  TRACE  [main] openjpa.jdbc.SQL - <t 22760146, conn 3658896> [93 ms] spent 
```

**Eclipse链接：**

```
[EL Fine]: 2013-01-23 14:08:35.875--ClientSession(6215763)--Connection(10098848)--Thread(Thread[main,5,main])--UPDATE table_ids SET next_id = next_id + ? WHERE table_id = ?

        bind => [5, 10]

[EL Fine]: 2013-01-23 14:08:36.0--ClientSession(6215763)--Connection(10098848)--Thread(Thread[main,5,main])--SELECT next_id FROM table_ids WHERE table_id = ?

        bind => [10] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:43:04.550

问题不在于更新与选择的顺序，而是是否具有当前值的解释。EclipseLink 假定它获取当前值，而 OpenJPA 似乎没有。

理想情况下，您将能够更改非 JPA 用法以做出相同的假设。如果不能，您可以在 EclipseLink 中编写自己的自定义序列对象。

为此，请创建 TableSequence 的子类并覆盖 buildSelectQuery() 方法以向 SQL 添加“+ 1”（或“- 1”）以说明假设的差异。

然后，您可以使用 SessionCustomizer 添加自定义序列。

还请在 EclipseLink 中记录一个错误，以便为 OpenJPA 排序添加兼容性选项。

# angularjs - 按键事件的AngularJS单元测试

> ID：14591730
> 
> 赞同：2
> 
> 时间：2013-01-29T20:34:39.460
> 
> 标签：angularjs, angularjs-directive

我设置了一个指令，为 keydown 和 keypress 事件绑定一个函数。当输入快捷键时，该指令设置表单上输入的焦点。

```
<input type="text" id=txtField1" focus-key="a" />
<input type="text" id=txtField2" focus-key="b" />
<input type="text" id=txtField3" focus-key="c" /> 
```

是否可以触发按键事件以对我的指令进行单元测试？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:09:30.783

您可以将 jQuery 与 AngularJS 一起使用，并且您可以在 jQuery 中通过[trigger()](http://api.jquery.com/trigger/) API 调用相当轻松地做到这一点。您可以将事件传递给触发器，在这种情况下，事件是

```
var aEvent = jQuery.Event("keydown");
aEvent.which = 40; //this is the ASCII value of the key you want to press
$("input").trigger(aEvent); 
```

然后重复其他字符。

# python - 在 Python 中使用线程进行 for 循环

> ID：14591732
> 
> 赞同：0
> 
> 时间：2013-01-29T20:34:44.450
> 
> 标签：python, multithreading, for-loop

```
item_list = [("a", 10, 20), ("b", 25, 40), ("c", 40, 100), ("d", 45, 90),
             ("e", 35, 65), ("f", 50, 110)] #weight/value
results = [("", 0, 0)]  #an empty string and a 2-tupel to compare with the new
                        #values

class Rucksack(object):
    def __init__(self, B):
        self.B = B   #B=maximum weight
        self.pack(item_list, 0, ("", 0, 0))

    def pack(self, items, n, current):  
        n += 1   #n is incremented, to stop the recursion, if all
        if n >= len(items) - 1:
            if current[2] > results[0][2]:
                #substitutes the result, if current is bigger and starts no
                #new recursion
                results[0] = current
        else:
            for i in items:
                if current[1] + i[1] <= self.B and i[0] not in current[0]:
                    #first condition: current + the new value is not bigger
                    #than B; 2nd condition: the new value is not the same as
                    #current
                    i = (current[0] + " " + i[0], current[1] + i[1],
                         current[2] + i[2])
                    self.pack(items, n, i)
                else:
                    #substitutes the result, if current is bigger and starts no
                    #new recursion
                    if current[2] > results[0][2]:
                        results[0] = current 
```

背包1 = 背包(100)

这是背包问题的一个小算法。我必须以某种方式并行化代码，但到目前为止我还没有得到线程模块。我认为唯一可以使用并行化的地方是 for 循环，对吧？所以，我尝试了这个：

```
def run(self, items, i, n, current):
    global num_threads, thread_started
    lock.acquire()
    num_threads += 1
    thread_started = True
    lock.release()
    if current[1] + i[1] <= self.B and i[0] not in current[0]:
        i = (current[0] + " " + i[0], current[1] + i[1], current[2] + i[2])
        self.pack(items, n, i)
    else:
        if current[2] > results[0][2]:
            results[0] = current
    lock.acquire()
    num_threads -= 1
    lock.release() 
```

但结果很奇怪。什么都没有发生，如果我让键盘中断，结果是正确的，但这绝对不是实现的意义。你能告诉我第二个代码有什么问题，或者我还能在哪里正确使用 perallelisation。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:07:03.797

[首先，由于您的代码受 CPU 限制，由于GIL](http://wiki.python.org/moin/GlobalInterpreterLock)的原因，您从使用线程进行并行处理中获得的好处很少，正如 bereal 解释的那样。幸运的是，线程和进程之间只有一些区别——基本上，所有共享数据都必须显式传递或共享（有关详细信息，请参阅[进程之间的共享状态](http://docs.python.org/2/library/multiprocessing.html#sharing-state-between-processes)）。

其次，如果您想对代码进行数据并行化，您必须锁定对可变共享对象的所有访问权限。乍一看，虽然`items`看起来`current`是不可变的，但该`results`对象是一个共享的全局对象，您可以在任何地方进行修改。如果您可以更改代码以返回链上的值，那是理想的。如果没有，如果您可以累积一堆单独的返回值并在处理完成后将它们合并，那通常也很好。如果两者都不可行，您将需要`results`用锁保护所有访问权限。有关详细信息，请参阅[进程之间的同步](http://docs.python.org/2/library/multiprocessing.html#synchronization-between-processes)。

最后，您询问将并行性放在哪里。关键是要找到独立任务之间的正确分界线。

理想情况下，您希望找到大量可以排队的中型作业，并且只有一个进程池，每个进程都可以处理下一个。快速浏览一下，执行此操作的明显位置要么是在对 的递归调用处`self.pack`，要么是在循环的每次迭代处`for i in items:`。如果它们实际上是独立的，只需使用[`concurrent.futures`](http://docs.python.org/3/library/concurrent.futures.html#processpoolexecutor-example)，如[`ProcessPollExecutor`示例](http://docs.python.org/3/library/concurrent.futures.html#processpoolexecutor-example)中所示。（如果您使用的是 Python 3.1 或更早版本，则需要该[`futures`](http://pypi.python.org/pypi/futures)模块，因为它没有内置在 stdlib 中。）

如果没有简单的方法来做到这一点，通常至少可以创建少量（N 或 2N，如果你有 N 个内核）大小大致相等的长时间运行的作业，并为每个作业分配自己的[`multiprocessing.Process`](http://docs.python.org/2/library/multiprocessing.html#the-process-class). 例如：

```
n = 8
procs = [Process(target=rucksack.pack, args=(items[i//n:(i+1)//n],)) for i in range(n)] 
```

最后一点：如果您完成了您的代码，并且看起来您已经摆脱了隐式共享全局变量，那么您实际上所做的是编写的代码通常但并非总是在某些平台上有效，而在其他平台上则永远不会。请参阅文档的[Windows](http://docs.python.org/2/library/multiprocessing.html#windows)部分`multiprocessing`以了解应避免什么，如果可能，请定期在 Windows 上进行测试，因为它是限制性最强的平台。

* * *

你还问了第二个问题：

> 你能告诉我第二个代码有什么问题吗？

尚不完全清楚您在这里尝试做什么，但有一些明显的问题（除了上面提到的问题）。

*   您不会在向我们展示的代码中的任何地方创建线程。仅在名称中创建带有“线程”的变量并不能提供并行性。添加锁也不行——如果你没有任何线程，锁所能做的就是无缘无故地减慢你的速度。
*   根据您的描述，听起来您正在尝试使用该`thread`模块，而不是`threading`. 文档的最顶部`thread`告诉您不要使用它并改用它是有原因的`threading`。
*   您有一个锁来保护您的线程数（根本不需要），但没有锁来保护您的`results`. 在大多数情况下，在 Python 中你会侥幸逃脱（因为上面提到的相同 GIL 问题——你的线程基本上不会同时运行，因此它们不会有竞争），但这仍然是一个非常糟糕的主意（特别是如果您不完全了解那些“大多数情况”是什么）。

但是，看起来您的函数`run`是基于. 如果这是一个并行化的好地方，那么你很幸运，因为从循环的每次迭代中创建一个并行任务正是最擅长的。例如，这段代码：`for i in items:``pack``futures``multiprocessing`

```
results = []
for i in items:
    result = dostuff(i)
    results.append(result) 
```

……当然可以写成：

```
results = map(dostuff, items) 
```

它可以简单地并行化，甚至不必了解期货是关于什么的，例如：

```
pool = concurrent.futures.ProcessPoolExecutor()
results = pool.map(dostuff, items) 
```

# javascript - 在嵌套的 HTML 结构中添加新的 div

> ID：14591733
> 
> 赞同：0
> 
> 时间：2013-01-29T20:34:45.717
> 
> 标签：javascript, jquery

我有这个 html 结构和代码：

```
<ul class="navMore">
  <li><a href="#">Link 1</a></li>
  <li href="#"><a>Link 2</a><?li>
</ul>

<div class="row-fluid"></div>

$(".navMore li a").each(function() {
   $(this).on("click", function() {
        $('<div class="row-fluid"></div>').insertAfter($(this).closest('.row-fluid'));
        $('<div id="content" class="span4"></div>').insertAfter($(this).next('.row-fluid'));
   });
}); 
```

我需要`.row-fluid`在前一个 div 之后添加一个新 div`.row-fluid`

预期结果：

```
<ul class="navMore">
  <li><a href="#">Link 1</a></li>
  <li href="#"><a>Link 2</a><?li>
</ul>
<div class="row-fluid"></div>
<div class="row-fluid"></div> 
```

但是如果我们已经添加了一个新的`.row-fluid`div，那么这个`#content`div应该放在这个新添加的`row-fluid`div里面

我如何实现这一目标？

```
<ul class="navMore">
  <li><a href="#">Link 1</a></li>
  <li href="#"><a>Link 2</a><?li>
</ul>
    <div class="row-fluid"></div>
    <div class="row-fluid">
        <div id="content" class="span4"></div>
    </div> 
```

最后，如果我们插入了 3 个 div，我该怎么做，`#content`然后从一个新的`.row-fluid`div 重新开始，然后再重新开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:59:49.353

干得好。

```
<script type="text/javascript" >
$(document).ready(function () {
    $(".navMore li a").click(function() {

    var countOfDiv = $(".row-fluid").length;
    if(countOfDiv < 2)
            $('<div class="row-fluid"></div>').insertAfter(".row-fluid");
    else
        $(".row-fluid:last").html("<div id=\"content\" class=\"span4\"></div>");
    });
});

</script> 
```

*   链接 1*   链接 2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:50:34.600

最终我选择了这个：

```
$(".navMore li a").on("click", function() {
  var $el = $(this);
  var $row = $el.closest('.row');
  if($row.next('.new').length){
     $('<div class="span"></div>').appendTo('.new');
  }
  else {
    $('<div class="new"></div>').insertAfter($row);
    $('<div class="span"></div>').appendTo('.new');
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:13:14.060

```
function insertRow() {
    $newdiv = $("<div class='row-fluid'/>");
    $newdiv.insertAfter(".row-fluid:last");
    return $newdiv;
}

// assume you're passing a content object into the routine
function insertContent( contentObj) {
    $lastRow = $(".row-fluid:last");
    if( $lastRow.children().length >= 3) {
        insertRow().append( contentObj);
    } else {
        $lastRow.append( contentObj);
    }
    return contentObj;
} 
```

# binding - 淘汰赛绑定不适用于 jsTree

> ID：14591737
> 
> 赞同：0
> 
> 时间：2013-01-29T20:34:53.793
> 
> 标签：binding, knockout.js, jstree

我正在尝试让 jsTree (1.0-rc3) 与 Knockout.js (2.2.1) 一起使用。

参见示例 jsFiddle：http: [//jsfiddle.net/adeconsulting/qfr6A/](http://jsfiddle.net/adeconsulting/qfr6A/)

注意：我在 Fiddle 中包含了几个 JS 资源，以尽可能接近我的 Visual Studio 项目，以防可能导致此问题的库之间存在冲突。

运行 Fiddle 并浏览 jsTree，它是按物理位置和类型列出的服务器列表。它有助于打开 Firebug 的控制台，这样您就可以看到 ajax 调用和响应。单击叶节点时，将进行 ajax 调用以检索服务器详细信息并显示其值使用 Knockout 绑定的表单。选择非叶节点时隐藏表单。

它在您第一次单击叶节点时起作用。之后，Knockout 不会更新叶节点点击的表单。但是，如果您碰巧单击了“编辑”按钮，则会突然显示最新的服务器详细信息。

我认为 jsTree 和 Knockout 绑定之间存在冲突，但不知道从哪里开始解决可能的问题。

由于 stackoverflow 显然需要至少一个代码块，这里是 Fiddle 的 JavaScript 部分：

```
// Global vars:
var prevJsTreeNodeId = null;
var serverModelBindingsApplied = false;
var serverLoadInProgress = false; 

/*
 * The knockout.js view model
 */
var ServerViewModel = function () {
    // Data
    var self = this;
    self.IsReadOnly = ko.observable(true);       // the form's input mode
    self.btnEditSave = ko.observable("Edit");    // the Edit/Save button text
    self.Server = ko.observable({});             // the Server object

    // Operations
    self.setEditable = function () {
        self.IsReadOnly(false);
        self.btnEditSave("Save");
    };

    self.setReadOnly = function () {
        self.IsReadOnly(true);
        self.btnEditSave("Edit");
    };

    self.doEditSave = function () {
        var flag = self.IsReadOnly();
        if (flag) {
            // switch to Edit mode
            self.setEditable();
        }
        else {
            // switch back to readOnly
            self.setReadOnly();
        }
    };

    // use ajax to update the knockout.js view model's Server object for the specified server name
    self.load = function (serverName) {
        if (!serverLoadInProgress) {
            serverLoadInProgress = true;
            // use ajax to retrieve the server's details
            var data = {
              json: JSON.stringify({
                   ServerName: serverName,
                   PrimaryIP: "1.2.3.4",
                   BrandDesc: "Dell",
                   OSDesc: "Windows 2003 Server",
                   Location: "xyz"
              }),
              delay: 1
            };
            $.ajax({
                url:"/echo/json/",
                data:data,
                type:"POST",
                success:function(response)
                {
                   console.log(response);
                   window.ServerViewModelInstance.Server = ko.mapping.fromJS(response);
                   // apply bindings the first time we retrieve a Server object
                   if (!serverModelBindingsApplied) {
                      ko.applyBindings(window.ServerViewModelInstance,
                                       document.getElementById('servercontent'));
                      serverModelBindingsApplied = true;
                   }  
                   else {
                     // hmmm... updating the view model's .Server property doesn't trigger the 
                     //  form to be updated, yet if we click the Edit button, the new values
                     //  suddenly appear, so try emulating that here...
                     self.setReadOnly();
                   }
                }
            });

           serverLoadInProgress = false;
        }
    };
};    // ServerViewModel

/*
 * document load 
 */
$(function () {
    // configure the jsTree
    $("#divtree")
      .jstree({
          "themes": { "theme": "default", "dots": true, "icons": true },
          "plugins": ["themes", "html_data", "ui", "types"],
          "types": {
              "type_attr": "tag",   // the attribute which contains the type name
              "max_depth": -2,      // disable depth check
              "max_children": -2,   // disable max children check
              "valid_children": ["root"],
              "types": {
                  "root": {
                      "valid_children": ["level1"]
                  },
                  "level1": {
                      "valid_children": ["level2"],
                      "start_drag": false,
                      "move_node": false,
                      "delete_node": false,
                      "remove": false
                  },
                  "level2": {
                      "valid_children": ["leaf"],
                      // use the theme icon for the level2 nodes
                      "start_drag": false,
                      "move_node": false,
                      "delete_node": false,
                      "remove": false
                  },
                  "leaf": {
                      "valid_children": "none"
                  }
              }
          }
      });

    // register to receive notifications from #divtree when a jsTree node is selected
    $("#divtree").bind("select_node.jstree", function (event, data) {
          // data.rslt.obj is the jquery extended node that was clicked
          var key = data.rslt.obj.attr("key");
          var id = data.rslt.obj.attr("id");
          if (id == prevJsTreeNodeId) {
              // user clicked the same node, nothing to do
              return;
          }
          prevJsTreeNodeId = id;

          // when a jsTree node is selected, reset the knockout.js view model to read only
          window.ServerViewModelInstance.setReadOnly();

          var idx = key.indexOf("Server");
          if (idx === 0) {  // "Server|servername"
              // show the "servercontent" div
              $("#servercontent").show();
              // display the server details
              var serverName = key.substr(idx + 7, key.length);
              window.ServerViewModelInstance.load(serverName);
          }
          else {
              // hide the "servercontent" div
              $("#servercontent").hide();
          }
      });

    // hide the "servercontent" div
    $("#servercontent").hide();

    // instantiate the knockout.js view model
    window.ServerViewModelInstance = new ServerViewModel();
});  // document ready

// initialization timer routine to select the main jsTree node
setTimeout(function () {
    // open the root node
    $.jstree._reference("#divtree").open_node("#root");
}, 500); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:13:20.443

对不起，我在下面的错误格式 - 这个编辑器不是我的朋友...... :-/
如果我理解正确，点击的树节点的详细信息面板没有使用正确的数据更新 - 对吗？

尝试执行以下操作：将：
更改
`window.ServerViewModelInstance.Server = ko.mapping.fromJS(response);`
为：
`window.ServerViewModelInstance.Server(response);`

（例如，不覆盖您只绑定一次的初始 ko.observable，而是更新其值）

并查看您绑定到可观察对象的位置..例如，而不是：
`... "value: Server.ServerName, ...`
将其更改为：（
`... "value: Server().ServerName, ...`
例如，在访问属性之前执行该函数）
它可以在单击树中的新服务器名称节点时工作并更新表单（已尝试firefox）
可以在以下位置找到带有修改后代码的示例副本：http: [//jsfiddle.net/RZ92g/2/](http://jsfiddle.net/RZ92g/2/)

# numberformatexception - 在 servlet 中从字符串转换为整数时出现 NumberFormatException

> ID：14591738
> 
> 赞同：0
> 
> 时间：2013-01-29T20:34:56.567
> 
> 标签：numberformatexception

我知道这是一个常见的问题。我已经阅读了解决方案并修改了代码，然后我也没有得到解决方案，所以我在这里发布了我的代码。

当我从文本框中读取一个值并将该值从 servlet 中的 String 解析为 int 时，为什么会显示 NumberFormatException？

```
 String ph=request.getParameter("phone");
  int phone=Integer.parseInt(ph.trim());// exception is generated here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:39:52.413

int 中不能有任何字符或符号，并且 int 的最大大小为 2,147,483,647，这意味着电话号码 555 555 5555 太大而无法存储在 int 中。

将解析更改为长，它应该可以解决您的问题

一个好的规则是不要在数字原语中存储任何数字，如 SSN 或电话号码。您希望将数值原语保留为您计划进行与数学相关的操作的值。如果可能，请将它们保留为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:36:17.423

因为您输入的值不是有效的整数。确保其中没有奇怪的字符。

`9835008199`高于 MAXINT，所以大概就是这样。

[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)告诉我：

> 抛出 NumberFormatException - 如果字符串不包含可解析的整数。

另一方面：**不要将电话号码存储为整数**。你会遇到麻烦（事实上你已经遇到了）。经验法则：如果您不想用数字进行数学运算，则不是`int`，而是`string`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:43:30.283

使用 isNumber 函数来检查它是否是一个有效的数字。

# linux - netflow 上的时间戳

> ID：14591741
> 
> 赞同：1
> 
> 时间：2013-01-29T20:35:01.390
> 
> 标签：linux, timestamp, netflow

我在使用名为 netflow 的产品时遇到问题，该产品读取网络流数据。当我读取一些捕获的 netflow 数据时，网络流上的时间戳不是以毫秒为单位的。我在下面展示了一行数据；

> Date flow start||Duration||Proto||Src IP Addr:Port||Dst IP Addr:Port||Packets||Bytes||Flows 1970-01-02 || 05:51:34.210 || 0.000 || TCP || 192.168.88.3:56457 -> 172.17.1.20:8080 || 2 || 82 || 1

如您所见，日期流开始和持续时间虽然被列出到小数点后三位，但仅计算为两位。这对于每个流都是相同的。

这可能是操作系统问题吗？我在 google 上看到该程序的图片可以精确到小数点后三位。我正在使用 Linux Mint，我的处理器是 Intel® Core™ i3 CPU M 370 @ 2.40GHz × 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:19:53.650

在 nfdump 中，*引导时间设置为前一天 - 假设每个流的开始时间不会提前开始*

```
 boot_time = (uint64_t)(master_record->first - 86400)*1000; 
```

并且使用的纪元是 000 UTC 1970，如[链接到 netflow 数据包中所述](http://netflow.caligare.com/netflow_v5.htm)

实际上是什么

**日期流开始 = 1970-01-02 05:51:34.210**

**持续时间 = 0.000**

这很好。

所以我想这描述了日期流程。

另外：行格式：-o line

这是默认格式，每行显示一个 netflow 记录：

Date flow start Duration Proto Src IP Addr:Port Dst IP Addr:Port Packets Bytes Flows

20012-08-30 06:59:52.338 0.001 UDP 36.249.80.226:3040 -> 92.98.219.116:1434 1 404 1

流的日期和持续时间以毫秒为单位给出。所以最多保留 3 位小数。

不，这不是操作系统问题。

**PS nfdump 给出日期而不是毫秒的格式化输出。**

# python - openshift上mod_wsgi上的慢烧瓶

> ID：14591742
> 
> 赞同：0
> 
> 时间：2013-01-29T20:35:06.833
> 
> 标签：python, flask, mod-wsgi, openshift

我在 openshift 上的 Flask 应用程序存在一些性能问题。
需要从数据库中获取一些图像并将它们显示在网页上。为此，我创建了一个简单的方法：

```
@app.route('/getImage/')
def getImageFromUrl(url=None):
    return make_response(getImageFromDb(request.args['url'])); 
```

每页最多有 10 张图片。问题是这很慢……非常慢。
在我的本地机器上，从 app.run() 开始（即使在调试模式下）它非常快，所以我认为 mod_wsgi 中有一些东西。
日志文件中也有这些错误消息：

```
Exception KeyError: KeyError(140116433057760,) in <module 'threading' from '/usr/lib64/python2.6/threading.pyc'> ignored 
```

和

```
 [error] server reached MaxClients setting, consider raising the MaxClients setting 
```

发生了什么，我应该怎么做才能加快速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:51:40.060

`Exception KeyError`我猜是由 gevent 引起的，应该是更多的代码有问题:) 为了避免它首先导入`gevent`。
`server reached MaxClients setting`似乎是 Apache 错误，应该使用日志和设置 MaxClients 和 ServerLimt 进行调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:30:11.577

KeyError 通常是因为您使用的是旧版本的 mod_wsgi。使用 mod_wsgi 3.3 或更高版本，该版本进行了更改以适应导致此问题的 Python 中所做的更改。

# sql-server-2008 - SQL查找列大于一个月和某个日期的所有行

> ID：14591746
> 
> 赞同：0
> 
> 时间：2013-01-29T20:35:13.207
> 
> 标签：sql-server-2008, tsql

我有 3 列 ID|dateA|dateB

我怎么能说我想找到 dateB 大于 dateA 并且是第 15 天之后的下个月的所有 ID

所以例如

```
ID|日期A|日期B
1|1/1/2013|2/20/2013
2|1/3?2013|2/26/2013
3|1/3/2013|4/12/2013
4|1/3/2013|2/5/2013

```

在这个例子中，它会找到结果 1/2/3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:44:43.307

像这样的东西怎么样：

```
select *
from yourtable
where dateA < dateB
  and
  (
    dateadd(day, 14, DATEADD(month, DATEDIFF(month, 0, datea)+1, 0)) < dateb
  ) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/01417/13)

# c# - 在 ASP.NET MVC 中设置默认 JSON 序列化程序

> ID：14591750
> 
> 赞同：59
> 
> 时间：2013-01-29T20:35:42.853
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, json.net

我正在开发一个已部分转换为 MVC 的现有应用程序。每当控制器以 JSON ActionResult 响应时，枚举都会作为数字而不是字符串名称发送。听起来默认的序列化程序应该是 JSON.Net，它应该将枚举作为它们的名称发送过来，而不是整数表示，但这里不是这种情况。

我是否缺少将其设置为默认序列化程序的 web.config 设置？还是有其他设置需要更改？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-29T20:47:40.320

在 ASP.Net MVC4 中，`JsonResult`类中使用的默认 JavaScript 序列化器仍然是[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)（您可以在[代码](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/5cb74eb3b2f3#src/System.Web.Mvc/JsonResult.cs)中检查它）

我认为您将它与 ASP.Net Web.API 混淆了，其中 JSON.Net 是默认的 JS 序列化程序，但 MVC4 不使用它。

所以你需要配置 JSON.Net 来使用 MVC4 （基本上你需要创建你自己的`JsonNetResult`），有很多关于它的文章：

*   [ASP.NET MVC 和 Json.NET](http://james.newtonking.com/archive/2008/10/16/asp-net-mvc-and-json-net.aspx)
*   [使用 JSON.NET 作为 ASP.NET MVC 3 中的默认 JSON 序列化程序 - 可能吗？](https://stackoverflow.com/questions/7109967/using-json-net-as-default-json-serializer-in-asp-net-mvc-3-is-it-possible)

如果您还想将 JSON.Net 用于控制器操作参数，那么在模型绑定期间，您需要编写自己的`ValueProviderFactory`实现。

你需要注册你的实现：

```
ValueProviderFactories.Factories
    .Remove(ValueProviderFactories.Factories
                                  .OfType<JsonValueProviderFactory>().Single());
ValueProviderFactories.Factories.Add(new MyJsonValueProviderFactory()); 
```

您可以使用内置`JsonValueProviderFactory`作为示例或这篇文章： [ASP.NET MVC 3 – 使用 Json.Net 改进的 JsonValueProviderFactory](http://www.dalsoft.co.uk/blog/index.php/2012/01/10/asp-net-mvc-3-improved-jsonvalueproviderfactory-using-json-net/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-03T11:08:29.860

**ASP.NET MVC 5 修复：**

我还没有准备好更改为 Json.NET，就我而言，错误是在请求期间发生的。在我的场景中，最好的方法是修改将`JsonValueProviderFactory`修复应用于全局项目的实际值，并且可以通过编辑`global.cs`文件来完成。

```
JsonValueProviderConfig.Config(ValueProviderFactories.Factories); 
```

添加一个 web.config 条目：

```
<add key="aspnet:MaxJsonLength" value="20971520" /> 
```

然后创建以下两个类

```
public class JsonValueProviderConfig
{
    public static void Config(ValueProviderFactoryCollection factories)
    {
        var jsonProviderFactory = factories.OfType<JsonValueProviderFactory>().Single();
        factories.Remove(jsonProviderFactory);
        factories.Add(new CustomJsonValueProviderFactory());
    }
} 
```

这基本上是在中找到的默认实现的精确副本，`System.Web.Mvc`但添加了可配置的 web.config appsetting 值`aspnet:MaxJsonLength`。

```
public class CustomJsonValueProviderFactory : ValueProviderFactory
{

    /// <summary>Returns a JSON value-provider object for the specified controller context.</summary>
    /// <returns>A JSON value-provider object for the specified controller context.</returns>
    /// <param name="controllerContext">The controller context.</param>
    public override IValueProvider GetValueProvider(ControllerContext controllerContext)
    {
        if (controllerContext == null)
            throw new ArgumentNullException("controllerContext");

        object deserializedObject = CustomJsonValueProviderFactory.GetDeserializedObject(controllerContext);
        if (deserializedObject == null)
            return null;

        Dictionary<string, object> strs = new Dictionary<string, object>(StringComparer.OrdinalIgnoreCase);
        CustomJsonValueProviderFactory.AddToBackingStore(new CustomJsonValueProviderFactory.EntryLimitedDictionary(strs), string.Empty, deserializedObject);

        return new DictionaryValueProvider<object>(strs, CultureInfo.CurrentCulture);
    }

    private static object GetDeserializedObject(ControllerContext controllerContext)
    {
        if (!controllerContext.HttpContext.Request.ContentType.StartsWith("application/json", StringComparison.OrdinalIgnoreCase))
            return null;

        string fullStreamString = (new StreamReader(controllerContext.HttpContext.Request.InputStream)).ReadToEnd();
        if (string.IsNullOrEmpty(fullStreamString))
            return null;

        var serializer = new JavaScriptSerializer()
        {
            MaxJsonLength = CustomJsonValueProviderFactory.GetMaxJsonLength()
        };
        return serializer.DeserializeObject(fullStreamString);
    }

    private static void AddToBackingStore(EntryLimitedDictionary backingStore, string prefix, object value)
    {
        IDictionary<string, object> strs = value as IDictionary<string, object>;
        if (strs != null)
        {
            foreach (KeyValuePair<string, object> keyValuePair in strs)
                CustomJsonValueProviderFactory.AddToBackingStore(backingStore, CustomJsonValueProviderFactory.MakePropertyKey(prefix, keyValuePair.Key), keyValuePair.Value);

            return;
        }

        IList lists = value as IList;
        if (lists == null)
        {
            backingStore.Add(prefix, value);
            return;
        }

        for (int i = 0; i < lists.Count; i++)
        {
            CustomJsonValueProviderFactory.AddToBackingStore(backingStore, CustomJsonValueProviderFactory.MakeArrayKey(prefix, i), lists[i]);
        }
    }

    private class EntryLimitedDictionary
    {
        private static int _maximumDepth;

        private readonly IDictionary<string, object> _innerDictionary;

        private int _itemCount;

        static EntryLimitedDictionary()
        {
            _maximumDepth = CustomJsonValueProviderFactory.GetMaximumDepth();
        }

        public EntryLimitedDictionary(IDictionary<string, object> innerDictionary)
        {
            this._innerDictionary = innerDictionary;
        }

        public void Add(string key, object value)
        {
            int num = this._itemCount + 1;
            this._itemCount = num;
            if (num > _maximumDepth)
            {
                throw new InvalidOperationException("The length of the string exceeds the value set on the maxJsonLength property.");
            }
            this._innerDictionary.Add(key, value);
        }
    }

    private static string MakeArrayKey(string prefix, int index)
    {
        return string.Concat(prefix, "[", index.ToString(CultureInfo.InvariantCulture), "]");
    }

    private static string MakePropertyKey(string prefix, string propertyName)
    {
        if (string.IsNullOrEmpty(prefix))
        {
            return propertyName;
        }
        return string.Concat(prefix, ".", propertyName);
    }

    private static int GetMaximumDepth()
    {
        int num;
        NameValueCollection appSettings = ConfigurationManager.AppSettings;
        if (appSettings != null)
        {
            string[] values = appSettings.GetValues("aspnet:MaxJsonDeserializerMembers");
            if (values != null && values.Length != 0 && int.TryParse(values[0], out num))
            {
                return num;
            }
        }
        return 1000;
    }

    private static int GetMaxJsonLength()
    {
        int num;
        NameValueCollection appSettings = ConfigurationManager.AppSettings;
        if (appSettings != null)
        {
            string[] values = appSettings.GetValues("aspnet:MaxJsonLength");
            if (values != null && values.Length != 0 && int.TryParse(values[0], out num))
            {
                return num;
            }
        }
        return 1000;
    }
} 
```

# javascript - 在 jQuery weekcalendar 中将自定义变量设置为 calEvent

> ID：14591755
> 
> 赞同：2
> 
> 时间：2013-01-29T20:35:53.467
> 
> 标签：javascript, jquery, variables, jquery-plugins, jquery-week-calendar

我正在使用[jQuery weekcalendar](https://github.com/themouette/jquery-week-calendar)来显示一个基于 Web 的带有约会的日历。一些内置函数，例如`setEventUserId`在 calEvent 中存储一些变量。

我必须怎么做才能在这个 calEvent 对象中存储自定义变量？

就像是：

```
setEventCategoryId: function(calendarId, calEvent, calendar) {
  calEvent.calendarId = calendarId;
  return calEvent;
},
getEventCategoryId: function(calEvent, calendar) {
  return calEvent.calendarId;
} 
```

但是我什么时候调用这个方法呢？只用这段代码来存储变量就足够了吗？

非常感谢任何输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:38:27.037

插件内部存储的变量由插件内部使用。插件内部不使用您的自定义变量，因此使用插件存储它们是没有意义的。

`.data()`您可以使用 jQuery 的函数针对元素存储任意数据。

[http://api.jquery.com/data/](http://api.jquery.com/data/)

例如设置：

```
$(calEvent).data('calendarId', calendarId); 
```

要检索：

```
var calendarId = $(calEvent).data('calenderId'); 
```

# c# - 从 960 升级到 2230 时的 RavenDB 权限问题

> ID：14591758
> 
> 赞同：1
> 
> 时间：2013-01-29T20:35:57.527
> 
> 标签：c#, authorization, ravendb

我正在尝试从 build 960 升级到 RavenDB 2.0（build 2230）。我已将数据库恢复到新版本，但在尝试创建索引时出现错误。

这是代码行：

```
IndexCreation.CreateIndexes(typeof(DataAccessFactory).Assembly, documentStore); 
```

这是错误：

> Raven.Client.Lightweight-3.5.dll 中出现了“System.InvalidOperationException”类型的第一次机会异常
> 
> {“远程服务器返回错误：(403) Forbidden。”}

我在应用程序配置文件中使用与以前版本相同的授权行：

```
<add key="Raven/Authorization/Windows/RequiredUsers" value="server\PrestoDatabaseUser"/> 
```

请注意，如果将其设置为全部，它可以正常工作，但我不想这样做。

```
<add key="Raven/AnonymousAccess" value="Get"/> 
```

请注意，我还授予 PrestoDatabaseUser 对 Data 文件夹的完全访问权限。

**RavenDB 2.0 的工作方式是否不同？有什么新的事情要做，还是我错过了什么？**

我在配置文件中所做的唯一其他更改是：

```
<add key="Raven/DataDir" value="~\Database\System"/> 
```

对此：

```
<add key="Raven/DataDir" value="~\Data"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:48:21.390

RavenDB 2.0 具有强大的安全措施。

这不再相关：

```
 <add key="Raven/Authorization/Windows/RequiredUsers" value="server\PrestoDatabaseUser"/> 
```

您需要从工作室配置这些，请参阅：[http ://ravendb.net/docs/server/authentication](http://ravendb.net/docs/server/authentication)

# powershell - 使用 installshield 运行 powershell 脚本时，Enable-ADFSEndpoint 无法成功

> ID：14591760
> 
> 赞同：0
> 
> 时间：2013-01-29T20:36:04.633
> 
> 标签：powershell, installshield

我正在尝试从 installshield 调用 powershell 脚本，但在 Enable-ADFSEndpoint 行上出现错误。

![我的照片](../Images/c201bca17bbb841aed7da48ccb807f1c.png)

当我将此脚本粘贴到 powershell 本身时，它可以正常工作。但是当通过安装脚本的 LaunchAppAndWait() 函数运行时，它会失败。这是我的 installshield 代码：

```
Param1=WINDISK +"\\Windows\\Sysnative\\WindowsPowerShell\\v1.0\\powershell.exe";
Param2="-ExecutionPolicy remotesigned -File \""+ INSTALLDIR +"PSServer\\Support\\adfs_cmdlets.ps1\""; 
LaunchAppAndWait(Param1, Param2, LAAW_OPTION_WAIT); 
```

并且脚本代码如下：

```
Add-PSSnapin Microsoft.Adfs.PowerShell

#ENABLE ENDPOINTS
Enable-ADFSEndpoint –TargetAddress "/adfs/services/trust/2005/windows"
Enable-ADFSEndpoint –TargetAddress "/adfs/services/trust/13/windows" 
```

当然还有比这更多的脚本，但是通过 installshield 执行后，它并没有走得更远。

我是 installshield 的新手，所以任何提示都可能有所帮助，非常感谢。同样，我目前认为问题出在 installshield 之内，因为当我的 powershell 脚本通过 powershell 命令提示符调用时，它可以正常工作。提前感谢任何可能回复的人。

我也意识到我可能遗漏了重要信息，当然愿意根据要求将其重新编辑。

# c++ - C ++ - 2个字符数组元素转换为短整数

> ID：14591763
> 
> 赞同：3
> 
> 时间：2013-01-29T20:36:20.107
> 
> 标签：c++

我有的是这个

```
char receivedData[27];
short int twoBytes; 
```

我想要的是`twoBytes`保持的值`receivedData[14]`和`receivedData[15]` 含义，如果`receivedData[14]==0x07`和`receivedData[15]==0xBB`，结果将是`twoBytes=0x07BB`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T20:38:13.787

`twoBytes = receivedData[14] << 8 | receivedData[15];`

`<< 8`表示左移 8 位（二进制；或 2 位十六进制），本质上是将值乘以 64。这意味着`0x0007`变为`0x0700`.

`|`然后将其`or`与另一个值一起使用，本质上将其设置为`0x07bb`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T21:47:41.507

重要的部分是将 receivedData[14] 左移 8 位。然后你可以| 或 + 该值到 receivedData[15]。重要的是要指出您指定的类型可能会导致问题。使用 char 数组意味着每个元素至少为 8 位，如果不指定无符号，这可能意味着为符号保留 1 位。更大的问题是 char 不能保证是 8 位，它可能会更大。short int 也是如此，该值至少为 16 位，但可能更大。你也想使用一个无符号短整数最好使用stdint.h，这样你就可以准确地知道你的变量大小：

```
#include <stdio.h>
#include <stdint.h>

main() {
  uint8_t receivedData[27];
  uint16_t twoBytes;
  receivedData[14] = 0x07;
  receivedData[15] = 0xBB;

  twoBytes = receivedData[14] << 8;
  twoBytes = twoBytes |  receivedData[15];

  printf("twoBytes %X\n", twoBytes);
} 
```

您可以通过以下方式检查特定类型的大小：

printf("%zu\n", sizeof(char));

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T20:39:29.990

```
Just use logical operators
twoBytes=receivedData[14]; //twobytes=07h
twoBytes=twoBytes<<8; //twobytes=0700h
twoBytes|=receivedData[15]; //twobytes=07BBh 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T21:02:06.707

我不确定您的应用程序，但`receivedData`闻起来像来自另一台计算机的数据，这可能是以下用例`ntohx`：

```
#include <iostream>
#include <cstdint>
#include <iomanip>
#include <arpa/inet.h>

int main() {

  uint8_t receivedData[27] {
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xBB,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00 };

  {
    // The ugly way.
    // You have to be sure that the alignment works.
    uint16_t const twoBytes { 
      ntohs( *reinterpret_cast<uint16_t*>( &receivedData[14] ) ) };
    std::cout << "TB [" << std::hex << twoBytes << "]" << std::endl;
  }

  {
    // The union way
    union {
      uint8_t  rd[2];
      uint16_t s;
    };

    rd[0] = receivedData[14]; rd[1] = receivedData[15];
    uint16_t const twoBytes { ntohs( s ) };
    std::cout << "TB [" << std::hex << twoBytes << "]" << std::endl;
  }

  return 0;
} 
```

输出：

```
TB [7bb]
TB [7bb] 
```

# asp.net - 在预构建事件中注入的 *.ASPX.VB 文件中的代码没有被编译，必须编译两次，为什么？

> ID：14591768
> 
> 赞同：0
> 
> 时间：2013-01-29T20:36:47.117
> 
> 标签：asp.net, visual-studio-2010, visual-studio, visual-studio-2012

我在 Visual Studio 的一个 Web 项目中有一个预构建事件（2012 年，但 2010 年的行为相同）。

如果文件夹中有匹配的 filename.html，prebuild 会调用一个简单的 exe，它会查找每个 filename.aspx.vb 文件。

如果是这样，它只是将 filename.html 作为字符串读取（转义和缩小）并将其作为字符串注入到 Finename.aspx.vb 中，例如：

myStribBuilder.Append("这是来自外部文件的 html 代码的去向")

假设我对保存的 filename.html 进行了修改，然后编译并测试了网站。它应该反映调用 filename.aspx 时的最新更改

这里会发生什么：

*   如果我有一个非常轻的项目，只有一两页，它确实有效。它按预期编译。

*   然后项目变得更大，它不再起作用了。我的意思是代码被注入但没有按预期编译，如果我在网络服务器上刷新 filename.aspx 我仍然会有相同的版本但是如果我在 VS 上打开 filename.aspx.vb 代码就在那里。第二次编译 100% 正常。

我可以忍受，但在 html 文件更改后，我必须每次编译两次以进行测试。这对我来说没有意义。

“预构建”意味着如果实际上它似乎在执行预构建例程之前在编译请求上缓存代码。

那么，如何确保在编译开始之前在我的 *.vb 文件中注入代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:34:59.627

我发现问题不在于 VS 不等待 exe 在预构建时完成，而是在编译时打开了 filename.aspx.vb。

代码在 IDE 上自行更新（选项设置为自动更新外部修改的打开页面），但我猜编译过程会保留打开文件的预构建版本，这在某种程度上是有意义的。

如果我在编译之前关闭文件就可以了。

现在我想知道是否有解决方法，但我知道在编译之前在 IDE 中动态修改打开的文件并不常见。然而，我确实非常依赖这种技术。

# css - 环绕文本，同时保持对象相对于彼此的位置不变

> ID：14591769
> 
> 赞同：0
> 
> 时间：2013-01-29T20:36:47.260
> 
> 标签：css

目前我在我的网络应用程序中进行了以下设置，左侧有一个赞成/反对票，然后是用户输入的一些文本。

```
 -----   -------------------------------
|up   | |some one liner text            |
|down |  -------------------------------
|vote | 
 ----- 
```

如果文本变得太长，它确实可以换行，但是它相对于上/下投票系统的位置会完全上升，如下所示：

```
//current undesired outcome
 -----   
|up   | 
|down |  
|vote |  -------------------------------
 -----  |some longer text goes here, it |
        |also magically centers if it   |
        |      goes several lines       |
         ------------------------------- 
```

我已经将我的 CSS 设置为相对简单，所以无法弄清楚为什么当文本换行发生时它一直到左调用框下方的中心。谢谢你的帮助！

```
.parent-div {
    overflow: hidden;
}

.votebox {
    float: left;
    width:40px; 
    height:50px;
    //there are more sub classes in here for the up/down vote arrows but I didn't include
}

.usertext{
    float:left;
    margin-left:10px;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:42:28.570

如果我理解正确，这就是标记的样子：

```
<div class="left">
  up down vote
</div>

<div class="right">
  text...
</div> 
```

如果是这样，只需放入`overflow:hidden`正确的 DIV：

```
.left{
    float:left;
    margin-right: 10px;
}

.right{
    overflow:hidden;
} 
```

（[演示](http://jsfiddle.net/JsfB7/)）

# java - 设置时间选择器日期

> ID：14591771
> 
> 赞同：2
> 
> 时间：2013-01-29T20:36:49.720
> 
> 标签：java, android

编辑：

尝试在日历对象上设置小时和分钟值时出错。

我正在尝试在我的应用程序上设置时间选择器的时间和分钟值。

我将时间值作为字符串存储在我的数据库中。我已将此值解析为 Date 对象，现在我不确定如何获取小时和分钟值来设置选择器本身。

即，如果时间存储在晚上 8.30，我想通过我班级的 onCreate 方法在时间选择器上设置它。

到目前为止，这是我的代码：

```
 DateFormat newFormat = new SimpleDateFormat("hh:mm");
     try 
    {
    dateToEdit = newFormat.parse(returnedTime);
    } catch (ParseException e)
    {

        e.printStackTrace();
    }     

     Calendar cal = Calendar.getInstance();
     cal.setTime(dateToEdit);
     editTimePicker.setCurrentHour(Calendar.HOUR_OF_DAY);
     editTimePicker.setCurrentMinute(Calendar.MINUTE); 
```

日志猫显示错误

```
01-29 21:58:47.860: D/AndroidRuntime(269): Shutting down VM
01-29 21:58:47.870: W/dalvikvm(269): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-29 21:58:47.890: E/AndroidRuntime(269): FATAL EXCEPTION: main
01-29 21:58:47.890: E/AndroidRuntime(269): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.flybase2/com.example.flybase2.AppointmentEditChanges}: java.lang.NullPointerException
01-29 21:58:47.890: E/AndroidRuntime(269):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-29 21:58:47.890: E/AndroidRuntime(269):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-29 21:58:47.890: E/AndroidRuntime(269):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-29 21:58:47.890: E/AndroidRuntime(269):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-29 21:58:47.890: E/AndroidRuntime(269):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-29 21:58:47.890: E/AndroidRuntime(269):  at android.os.Looper.loop(Looper.java:123)
01-29 21:58:47.890: E/AndroidRuntime(269):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-29 21:58:47.890: E/AndroidRuntime(269):  at java.lang.reflect.Method.invokeNative(Native Method)
01-29 21:58:47.890: E/AndroidRuntime(269):  at java.lang.reflect.Method.invoke(Method.java:521)
01-29 21:58:47.890: E/AndroidRuntime(269):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-29 21:58:47.890: E/AndroidRuntime(269):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-29 21:58:47.890: E/AndroidRuntime(269):  at dalvik.system.NativeStart.main(Native Method)
01-29 21:58:47.890: E/AndroidRuntime(269): Caused by: java.lang.NullPointerException
01-29 21:58:47.890: E/AndroidRuntime(269):  at com.example.flybase2.AppointmentEditChanges.onCreate(AppointmentEditChanges.java:100)
01-29 21:58:47.890: E/AndroidRuntime(269):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-29 21:58:47.890: E/AndroidRuntime(269):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:42:06.027

您可以使用 a`Calendar`来获取日期对象的时间：

```
Calendar cal = Calendar.getInstance();
cal.setTime( dateToEdit );
timePicker.setCurrentHour( cal.get( HOUR_OF_DAY ) );
timePicker.setCurrentMinute( cal.get( MINUTE ) ); 
```

您必须`timePicker`在执行上述操作之前创建，或者通过

```
timePicker = (TimePicker)findViewById( R.id.my_time_picker ); 
```

或者

```
timePicker = new TimePicker( this ); 
```

在第二种情况下，您必须以某种方式将其添加到您的布局中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:57:30.253

不要将日期和时间作为字符串存储在数据库中（不要忘记时区，...）。

相反，将自纪元以来的毫秒数存储在 GMT 时区（`long`值）中。

这样的时间可以很容易地通过`Date.getTime()`

然后，您可以再次使用它来再次构建您的日期或日历：

```
Calendar cal = new GregorianCalendar(myTimeZone);
cal.setTimeInMillis(myDbTime); 
```

我还强烈建议您不要理会`java.util.Date`其他`java.util.Calendar`有利于[Joda Time](http://joda-time.sourceforge.net/)的人。

# ruby-on-rails - Rails CSV 文件上传字符编码问题

> ID：14591775
> 
> 赞同：1
> 
> 时间：2013-01-29T20:36:55.103
> 
> 标签：ruby-on-rails, excel, csv, encoding

我知道已经有很多关于这个的线程，但是由于某种原因，建议的解决方案似乎都不适合我......

我在用：

红宝石 1.9.2

导轨 2.3.8

我的用户在 MS Excel 中创作 CSV 文件，然后需要将这些文件上传到 Web 应用程序。我的 Web 应用程序和数据库后端使用 UTF-8 和所有特殊字符，例如 £ 符号，在上传时会损坏。

我正在阅读这样的文件：

```
@file = params[:import_file][:uploaded_data] 
```

然后使用以下方法获取文件的编码：

```
 source_encoding = "UTF-8"
 if @file.external_encoding
   source_encoding = @file.external_encoding.name
 end 
```

对于我的测试文件，源编码值为 ASCII-8BIT。

然后我尝试做：

```
@file.each {|line|
   print "#{line.force_encoding(source_encoding).encode!("UTF-8") }\n"
} 
```

为了查看是否所有文本都显示正常。然而，这给了我这样的错误：

"\xA3" 从 ASCII-8BIT 到 UTF-8

如果我尝试使用以下方式读取 CSV：

```
dataArray = CSV.read(@file, encoding: source_encoding) 
```

这次没有错误，但所有特殊字符都变成 ? 人物。

任何我可能出错的指针或导入使用 MS Excel 编写的 CSV 文件只是一项不可能完成的任务？

问候，

奥利

# ruby-on-rails - 带有 simple_form 的条件嵌套表单

> ID：14591777
> 
> 赞同：0
> 
> 时间：2013-01-29T20:37:04.900
> 
> 标签：ruby-on-rails

我有 2 个模型，客户和 client_prices，我想在客户的显示页面中有 2 个客户价格嵌套表单部分。一种嵌套形式用于非定制价格，另一种用于定制价格。非自定义 (custom == false) 价格只有“自定义”属性可供编辑。“自定义价格”将具有可编辑的所有属性。

我尝试了几种不同的方法，但我不知道将条件逻辑放在哪里才能使其正常工作。我正在使用 simple_form 生成表单，但我并没有与之结婚。

**控制器**

```
class Client < ActiveRecord::Base
    attr_accessible :name, :client_prices_attributes
    has_many :client_prices
    accepts_nested_attributes_for :client_prices, :allow_destroy => true

end

class ClientPrice < ActiveRecord::Base
  attr_accessible :client_id, :price, :visit_type, :id, :custom

  belongs_to :client
  belongs_to :default_price

end 
```

**客户展示页面**

```
<%= simple_nested_form_for @client do |f| %>
    <%= f.fields_for :client_prices do |def_price_form| %>
        non-custom prices form here
    <%end%>
    <%= f.fields_for :client_prices do |def_price_form| %>
        custom prices form here
    <%end%>
<%end%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:02:22.903

尝试以下操作：

```
<%= simple_nested_form_for @client do |f| %>
  <%= f.fields_for :client_prices do |def_price_form| %>
    <%= if def_price_form.object.custom %>
      Here you fields for custom form      
    <% end %>
  <% end %>
<% end %> 
```

# c++ - g++ 警告：永远不会被执行

> ID：14591778
> 
> 赞同：6
> 
> 时间：2013-01-29T20:37:09.237
> 
> 标签：c++, gcc-warning, gcc4

继承了一个 C++ 项目。我正在通过 makefile 使用 gcc 4.1.2 在 RHEL 5.5 中构建。该项目很大（数百个文件），总的来说代码非常好。但是，在编译过程中，我经常收到一条 GCC 警告，上面写着：

```
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/allocator.h: In constructor ‘std::allocator<_Alloc>::allocator() [with _Tp = char]’:
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/allocator.h:97: warning: will never be executed
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/allocator.h:97: warning: will never be executed
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/ext/new_allocator.h: In constructor ‘__gnu_cxx::new_allocator<_Tp>::new_allocator() [with _Tp = char]’:
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/ext/new_allocator.h:65: warning: will never be executed
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/allocator.h: In destructor ‘std::allocator<_Alloc>::~allocator() [with _Tp = char]’:
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/allocator.h:105: warning: will never be executed
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/ext/new_allocator.h: In destructor ‘__gnu_cxx::new_allocator<_Tp>::~new_allocator() [with _Tp = char]’:
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/ext/new_allocator.h:72: warning: will never be executed
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/allocator.h: In copy constructor ‘std::allocator<_Alloc>::allocator(const std::allocator<_Alloc>&) [with _Tp = char]’:
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/allocator.h:100: warning: will never be executed
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/allocator.h:99: warning: will never be executed
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/ext/new_allocator.h: In copy constructor ‘__gnu_cxx::new_allocator<_Tp>::new_allocator(const __gnu_cxx::new_allocator<_Tp>&) [with _Tp = char]’:
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/ext/new_allocator.h:67: warning: will never be executed
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/allocator.h: In destructor ‘std::allocator<_Alloc>::~allocator() [with _Tp = char]’:
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/allocator.h:105: warning: will never be executed 
```

它没有给我错误源自的源文件或行号。我要冒昧地说 GCC 的标头很好，所以这里发生了什么？我以前从未遇到过这个特别的警告。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T20:47:12.157

根据[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46158](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46158)上的 gcc 错误 46158 ，`-Wunreachable-code`自`gcc-4.5`. 您的问题很可能实际上不是问题。（就个人而言，我仍然会考虑使用更新的 gcc/g++，除非有特殊原因需要使用`4.1.2`——它已经有将近 6 年的历史了。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T20:53:11.550

这个错误报告[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46158](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46158)在底部说

> -Wunreachable-code 已损坏，已从 GCC 4.5 中删除。不要使用它。

所以忽略警告听起来并不是一个完全坏主意。

# mysql - 如何在 MySQL 中表示交叉应用和拆分字符串

> ID：14591779
> 
> 赞同：3
> 
> 时间：2013-01-29T20:37:11.760
> 
> 标签：mysql, string, tsql, split

对于某些背景，我正在尝试创建一个包含多个食谱的数据库。但是，有必要将各个成分与它们最初来自的配方联系起来。

例如，我有一张包含所有单独成分的表格。

![在此处输入图像描述](../Images/a92b72496e0a53a7691eae71e0f53048.png)

还有一张储存食谱的桌子，减去配料。

![在此处输入图像描述](../Images/1507a44d482d8ea9629f432c9893ef0f.png)

现在，我发现[这篇](http://www.kodyaz.com/articles//t-sql-convert-split-delimeted-string-as-rows-using-xml.aspx)文章介绍了如何使用 T-SQL XML 命令拆分字符串，用于执行此操作的代码是：

```
SELECT
  Books.BookId,
  Books.Book,
  BookAuthors.AuthorId,
  BookAuthors.Author
FROM Books
CROSS APPLY dbo.split(Books.Authors,',') split
INNER JOIN BookAuthors ON BookAuthors.AuthorId = split.val 
```

我正在寻找的结果将与此非常相似： ![在此处输入图像描述](../Images/711ba7d8458ac2756c9f3f5609f0042a.png)

但是，CROSS APPLY 等仅适用于 MS SQL Server，我的问题是：

**是否可以使用 MySQL 实现相同或非常相似的效果？**

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T12:30:51.323

这应该与您想要得到的完全匹配：

```
SELECT
  Books.BookId,
  Books.Book,
  BookAuthors.AuthorId,
  BookAuthors.Author
FROM Books
  LEFT JOIN BookAuthors ON (find_in_set(BookAuthors.AuthorId, Books.Authors) <> 0) 
```

发现这篇文章很有帮助：[MySQL 查询查找逗号分隔字符串中的值](https://stackoverflow.com/questions/5033047/mysql-query-finding-values-in-a-comma-separated-string)

如果您需要进一步解释它是如何工作的，请发表评论。

# c# - 对象与目标类型不匹配

> ID：14591781
> 
> 赞同：7
> 
> 时间：2013-01-29T20:37:16.347
> 
> 标签：c#, .net, winforms, label, picturebox

我有一个里面有一个控件`TableLayoutPanel`网格。`PictureBox`我试图找到一种快捷方式将它们全部更改为标签控件，而不是手动删除每个控件并在每个单元格中放置新控件。

我以为我可以进入设计器代码并用标签查找/替换图片框，但现在我得到了一个

> “对象与目标类型不匹配”

Visual Studio 的错误列表中的错误。我现在也无法查看设计器页面。这是不允许的吗？如果允许，正确的做法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-29T20:55:01.550

如果您仔细查看生成的代码：

**`label1`**：

```
this.label1 = new System.Windows.Forms.Label();
// 
// label1
// 
this.label1.AutoSize = true;
this.label1.Location = new System.Drawing.Point(134, 163);
this.label1.Name = "label1";
this.label1.Size = new System.Drawing.Size(35, 13);
this.label1.TabIndex = 1;
this.label1.Text = "label1"; 
```

**`pictureBox1`**：

```
this.pictureBox1 = new System.Windows.Forms.PictureBox();
((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).BeginInit();
// 
// pictureBox1
// 
this.pictureBox1.Location = new System.Drawing.Point(97, 75);
this.pictureBox1.Name = "pictureBox1";
this.pictureBox1.Size = new System.Drawing.Size(100, 50);
this.pictureBox1.TabIndex = 0;
this.pictureBox1.TabStop = false; 
```

我的猜测是

```
((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).BeginInit(); 
```

由您更改为：

```
((System.ComponentModel.ISupportInitialize)(this.label1)).BeginInit(); 
```

这不起作用，并导致设计师问题。`Object does not match target type.`

因此，应用您已经进行的更改，删除以下行：

```
((System.ComponentModel.ISupportInitialize)(this.label1)).BeginInit();
((System.ComponentModel.ISupportInitialize)(this.label1)).EndInit(); 
```

我认为你可以走了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:44:25.833

您可以在设计器中删除所有图片框，然后在 _load 事件（或其他方便的事件）中添加所有标签。这样下次改起来就方便了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T20:39:55.930

不要更改设计器代码。那东西是自动生成的。您的更改不仅会导致意外行为，而且它们也可能被覆盖。

我会尝试对您的表单或您的设计师背后的任何内容进行更改或 2，并希望它重新生成所有代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T21:01:50.347

正如 Haxx 所示，您还必须清理 PictureBox 所需的额外初始化。您收到的错误是接口转换错误。在您的情况下，正如 Haxx 猜测的那样，Label 控件没有实现 ISupportInitialize 接口。

与大多数人不同，我不怕为了权宜之计而更改设计器代码，对于您正在做的事情，这样做是可以的。只知道你的对象，在这样做之前签入，不要把自定义代码放在那里！

# c++ - C++：使用 MPI 的gatherv 连接不同长度的向量

> ID：14591784
> 
> 赞同：2
> 
> 时间：2013-01-29T20:37:22.523
> 
> 标签：c++, mpi

所以我试图在 C++ 中的 MPI 进程之间复制不同长度的向量，即在所有节点上获取向量并将它们连接到节点 0 上的新向量中。

我有以下代码，它没有返回我的预期，让我发疯，并进一步造成麻烦。

代码是这样的（缩写）：

```
//previously summed all of numfrags to make _numFrag
//numfrags is a vector of the local sizes of _fragLoc
//_numFrag is the total of numfrags

MPI::COMM_WORLD.Barrier();
cout << _myid << "local numFrag = " << _fragLoc.size() << endl;
MPI::COMM_WORLD.Barrier();
for (unsigned i = 0; i < _fragLoc.size(); ++i)      cout << "fragloc(" << i << ") = " << _fragLoc[i] << endl;
MPI::COMM_WORLD.Barrier();

vector<int> outVector (_numFrag);
int displ[_numprocs]; 

if (_myid == 0) {
    double sum = 0;
    for (int i = 0; i < _numprocs; ++i) {
        displ[i] = sum;
        cout << _myid << " : " << i << " : " << sum << endl;
        sum += numfrags[i];
    }
}

MPI::COMM_WORLD.Barrier(); MPI::COMM_WORLD.Gatherv(&_fragLoc[0], numfrags[_myid], MPI::INT, &outVector[0], &numfrags[0], &displ[0], MPI::INT,0);

MPI::COMM_WORLD.Barrier();

if (_myid == 0) {
    cout << "X numFrag = " << _numFrag << endl;
    for (unsigned i = 0; i < _numFrag; ++i) cout << "outVector(" << i << ") = " << outVector[i] << endl;
} 
```

举一个简单的例子，我有一个四节点运行。以下是作为伪代码的变量输入：

```
int _numprocs = 4;
vector<int> numfrags = {0,1,0,1};
vector<int> _fragLoc <node 0> = {};
vector<int> _fragLoc <node 1> = {12};
vector<int> _fragLoc <node 2> = {};
vector<int> _fragLoc <node 3> = {37};
int _numFrag = 2; 
```

输出是：

```
2local numFrag = 0
3local numFrag = 1
0local numFrag = 0
1local numFrag = 1
fragloc(0) = 12
fragloc(0) = 37
0 : 0 : 0
0 : 1 : 0
0 : 2 : 1
0 : 3 : 1
0: after stage 2
X numFrag = 2
outVector(0) = 0
outVector(1) = 0 
```

但是我希望将各个 fragLoc 放在一起到 outVector 中，但这并没有发生。有什么建议吗？完成调试后，我将清理障碍。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T23:26:45.053

据我所知，上面的代码按预期工作。

```
#include <iostream>
#include <mpi.h>
#include <vector>

using namespace std;

int main(int argc, char **argv) {

    MPI::Init(argc, argv);
    int _myid = MPI::COMM_WORLD.Get_rank();
    int _numprocs = MPI::COMM_WORLD.Get_size();

    vector<int> _fragLoc;
    switch(_myid) {
        case 0: break;
        case 1: _fragLoc.push_back(12); break;
        case 2: break;
        case 3: _fragLoc.push_back(37); break;
    }

    int locNumFrag = _fragLoc.size();
    cout << _myid << "local numFrag = " << locNumFrag << endl;

    MPI::COMM_WORLD.Barrier();  // for printing

    vector<int> numfrags(_numprocs);
    MPI::COMM_WORLD.Allgather(&locNumFrag, 1, MPI::INT, &numfrags[0], 1, MPI::INT);

    int _numFrag = 0;
    for (int i=0; i<_numprocs; i++) 
        _numFrag += numfrags[i];

    for (unsigned i = 0; i < _fragLoc.size(); ++i)
        cout << "fragloc(" << i << ") = " << _fragLoc[i] << endl;

    MPI::COMM_WORLD.Barrier(); // for printing

    vector<int> outVector (_numFrag);
    int displ[_numprocs]; 

    if (_myid == 0) {
        double sum = 0;
        for (int i = 0; i < _numprocs; ++i) {
            displ[i] = sum;
            cout << _myid << " : " << i << " : " << sum << endl;
            sum += numfrags[i];
        }
    }

    MPI::COMM_WORLD.Gatherv(&_fragLoc[0], numfrags[_myid], MPI::INT, &outVector[0], &numfrags[0], &displ[0], MPI::INT,0);

    if (_myid == 0) {
        cout << "X numFrag = " << _numFrag << endl;
        for (unsigned i = 0; i < _numFrag; ++i) cout << "outVector(" << i << ") = " << outVector[i] << endl;
    }

    MPI::Finalize();
    return 0;
} 
```

运行给

```
$ mpirun -np 4 ./gatherv
0local numFrag = 0
1local numFrag = 1
fragloc(0) = 12
2local numFrag = 0
3local numFrag = 1
fragloc(0) = 37
0 : 0 : 0
0 : 1 : 0
0 : 2 : 1
0 : 3 : 1
X numFrag = 2
outVector(0) = 12
outVector(1) = 37 
```

# objective-c - 如何使用“弹出”动画打开 NSWindow

> ID：14591785
> 
> 赞同：3
> 
> 时间：2013-01-29T20:37:24.670
> 
> 标签：objective-c, macos, cocoa, animation, nswindow

我想创建类似这样的窗口：
[http](http://cl.ly/1m2a2w3P2D20) ://cl.ly/1m2a2w3P2D20 （点击“在浏览器中查看”）

我不知道从哪里开始。它是自定义“动画师”还是类似的东西？
关于如何执行这样的事情的任何想法？
谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T21:17:37.780

在 10.7 及更高版本上，如果您调用 -setAnimationBehavior: 窗口将在您 -orderFront: 或 -makeKeyAndOrderFront: 时自动以这种方式或其他几种方式设置动画。我相信您想要的行为是[NSWindowAnimationBehaviorAlertPanel](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/doc/uid/20000013-SW155)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-05T01:09:49.270

对于那些在 Interface Builder 中寻找它的人来说只是一个快速更新

1.  选择窗口下方的下拉菜单
2.  选择窗口 [![Interfacebuilder 窗口下拉菜单](../Images/3142616778e89d2febe7286348f149ae.png)](https://i.stack.imgur.com/kZw2Z.png)
3.  在右侧面板中，您有一个设置列表，包括“动画” [![属性面板中的动画下拉菜单](../Images/72eefb42ba2ed02f51eb72df669db18a.png)](https://i.stack.imgur.com/Dupha.png)

# fonts - 欧姆（欧米茄）字符未显示在 Flash Player 中

> ID：14591786
> 
> 赞同：0
> 
> 时间：2013-01-29T20:37:25.023
> 
> 标签：fonts, actionscript-2, flash-cs5

我已经嵌入了字体。我正在 ActionScript 中创建一个 TextField 并将嵌入字体设置为 true。我正确地引用了这个名字。我尝试添加字符范围并将字符添加到“包含这些字符”框中。

无论如何，我尝试无法添加欧姆（欧米茄）字符。此外，我尝试过谷歌搜索，但只提供建议来做我已经做过的事情。我正在使用带有 Flash CS5 的 ActionScript 2.0。

![在此处输入图像描述](../Images/ab829e37057ca93e838522f1623fdec2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:16:50.780

经过多次调试，我终于弄清楚了这个问题。我从 xml 文件中导入了数据。xml 文件中的字符不是标准的 unicode Ω 字形，而是旧的欧姆符号。在访问 Wikipedia 并复制 Ω 大写 omega 符号替换 xml 文件中的符号和 Flash 中的“还包括这些字符”后，我能够让它工作。

[http://en.wikipedia.org/wiki/Omega](http://en.wikipedia.org/wiki/Omega)

# c# - WPF - TreeView 隐藏展开图标（箭头）

> ID：14591798
> 
> 赞同：11
> 
> 时间：2013-01-29T20:38:16.283
> 
> 标签：c#, wpf, treeview, datatemplate

有没有办法如何隐藏所有树视图的展开/折叠图标？我发现如果节点没有项目，该图标应该隐藏。但我想把它藏在树的任何地方。我只想在选择节点文本时展开树（我已经实现了这个）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-29T20:48:46.057

您可以将这些样式添加到`Window`或`UserControl`资源：

```
<Window.Resources>               
    <Style x:Key="TreeViewItemFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Border>
                        <Rectangle Margin="0,0,0,0"
             StrokeThickness="5"
             Stroke="Black"
             StrokeDashArray="1 2"
             Opacity="0"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="{x:Type TreeViewItem}" TargetType="{x:Type TreeViewItem}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="HorizontalContentAlignment" Value="{Binding Path=HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
        <Setter Property="VerticalContentAlignment" Value="{Binding Path=VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
        <Setter Property="Padding" Value="1,0,0,0"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="FocusVisualStyle" Value="{StaticResource TreeViewItemFocusVisual}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TreeViewItem}">
                    <Grid>                            
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>                            
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>                                                   
                        <Border Name="Bd"
                              Grid.Column="1"                                
                              Background="{TemplateBinding Background}"
                              BorderBrush="{TemplateBinding BorderBrush}"
                              BorderThickness="{TemplateBinding BorderThickness}"
                              Padding="{TemplateBinding Padding}">
                                    <ContentPresenter x:Name="PART_Header"
                                        ContentSource="Header"
                                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"/>
                        </Border>                            
                        <ItemsPresenter x:Name="ItemsHost"
                          Grid.Row="1"
                          Grid.Column="1"
                          Grid.ColumnSpan="2"/>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsExpanded" Value="false">
                            <Setter TargetName="ItemsHost" Property="Visibility" Value="Collapsed"/>
                        </Trigger>                         
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="HasHeader" Value="false"/>
                                <Condition Property="Width" Value="Auto"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="PART_Header" Property="MinWidth" Value="75"/>
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="HasHeader" Value="false"/>
                                <Condition Property="Height" Value="Auto"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="PART_Header" Property="MinHeight" Value="19"/>
                        </MultiTrigger>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter TargetName="Bd" Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="true"/>
                                <Condition Property="IsSelectionActive" Value="false"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="Bd" Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                        </MultiTrigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources> 
```

# bash - 结合平面文件修改和连接步骤

> ID：14591802
> 
> 赞同：0
> 
> 时间：2013-01-29T20:38:27.693
> 
> 标签：bash, shell

我经常执行此操作，并且正在寻找捷径。有什么方法可以在不必写入临时文件的情况下执行以下操作？

```
cut -k 3-5 file1 > temp1
cat temp1 file2 | sort > outfile 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:52:52.843

像这样：

```
cut -k 3-5 file1 | cat - file2 | sort > outfile 
```

可能有一些古老的版本`cat`并不`-`意味着标准输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:54:57.107

只需按顺序执行它们：

```
(cut -k 3-5 file1; cat file2) | sort > outfile 
```

这具有在任何基于 Bourne 的 shell 中工作而无需 bash 或 zsh 特定功能的额外优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:45:44.727

这应该这样做：

```
cat <(cut -k 3-5 file1) file2 | sort > outfile 
```

# javascript - Backbone.js 如何判断它是否在服务器上？

> ID：14591803
> 
> 赞同：2
> 
> 时间：2013-01-29T20:38:35.433
> 
> 标签：javascript, backbone.js

**片段**

```
 // Require Underscore, if we're on the server, and it's not already present.
  var _ = root._;
  if (!_ && (typeof require !== 'undefined')) _ = require('underscore'); 
```

这直接来自开发代码。但是，我看不到它如何通过检查[underscore.js](http://underscorejs.org/)来确定这一点，因为该库在客户端和服务器上都运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:40:12.040

`(typeof require !== 'undefined')`<-- 代码的关键部分。

如果你**不在**服务器上（或者你没有[require.js](http://requirejs.org/)），这段代码将不会运行，因为`require`变量将是`undefined`.

# http - 在请求处理程序之间播放框架交换数据

> ID：14591814
> 
> 赞同：0
> 
> 时间：2013-01-29T20:39:04.293
> 
> 标签：http, scala, static, playframework, playframework-2.0

我很好奇使用 Scala 中的 Play Framework 开发后端。到目前为止，我只尝试了该教程。我想知道，是否可以让不同的响应“线程”交换数据？

例如，每次处理 HTTP 请求时计数的计数器。它从 0 开始。然后第一个请求进来，它变成 1。在第二个请求时，处理“线程”可以在某处访问该计数器？

这应该在没有任何 I/O（文件、数据库）的情况下实现。在 Java 中，它闻起来像一个静态变量，但在 Scala 中呢？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:44:07.700

要使用 Java 静态方法，请查看以下内容。否则，也许您可​​以使用缓存（Java 和 Scala）
[http://www.playframework.org/documentation/2.0.4/ScalaCache](http://www.playframework.org/documentation/2.0.4/ScalaCache)

您可以使用一个comapnion Object，其中所有变量都是静态的。

```
class StaticVariables {
}

object StaticVariables {
 var counter = 0
} 
```

一个 Scala 工作表来演示：

```
object WorkSheet {
  StaticVariables.counter += 1
  StaticVariables.counter += 1
  println(StaticVariables.counter)                //> 2
} 
```

# php - 使用 PHP 将类中的数据插入数据库

> ID：14591817
> 
> 赞同：3
> 
> 时间：2013-01-29T20:39:10.080
> 
> 标签：php, mysql, class

我完全不明白这一点。

我有一堂课，大致如下：

```
<?php
class pageData
{
    private $Bookmark;
    private $Program;
    private $Agency;

    //With appropriate setters/getters
}
?> 
```

然后我尝试创建一个新对象，稍微传递一下，最终得到：

```
mysql_query("INSERT INTO Records (Bookmark, Program, Agency)
VALUES ('$data->getBookmark()', '$data->getProgram()', '$data->getAgency()')"); 
```

我最终得到了**通知**：未定义的属性：pageData::$getBookmark in...

**注意**：未定义的属性：pageData::$getProgram in...

**注意**：未定义的属性：pageData::$getAgency in...

使用 PhpMyAdmin 看起来 Bookmark 变成 0 并且 Program 变成 () 并且 Agency 是空的。

如果我输入

```
print($data->getBookmark()); 
```

它打印出书签。如果我输入

```
echo $data->getBookmark(); 
```

它打印出来。为什么我也尝试将其插入数据库时​​它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:41:56.273

它被解释为数据成员

`$data->getBookmark`后面的变量`()`

做

```
mysql_query("INSERT INTO Records (Bookmark, Program, Agency)
VALUES ('".$data->getBookmark()."',... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:42:10.063

在字符串中使用普通变量以外的任何内容时，您应该在值周围添加大括号：

```
mysql_query("INSERT INTO Records (Bookmark, Program, Agency)
             VALUES ('{$data->getBookmark()}', '{$data->getProgram()}', '{$data->getAgency()}')"); 
```

# php - Wordpress 将脚本源从 https 更改为 http

> ID：14591823
> 
> 赞同：1
> 
> 时间：2013-01-29T20:39:42.300
> 
> 标签：php, wordpress

在我的标题中，我使用 wp_enqueue_script 来加载一些外部文件。路径以https开头，但是当我在浏览器中查看源代码时，它变成了http。

这是我所拥有的：

```
wp_enqueue_script('handle', 'https://secure.example.com/path/file.aspx',array(), true); 
```

但是在头脑中，当我在浏览器中查看源代码时，我得到了这个：

```
<script type='text/javascript' src='http://secure.example.com/path/file.aspx?ver=1'></script> 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T04:54:30.433

嗯...您是否尝试过清除缓存？

# java - 使对 Java ThreadFactory 创建的对象的所有引用无效的方法

> ID：14591824
> 
> 赞同：0
> 
> 时间：2013-01-29T20:39:42.393
> 
> 标签：java, multithreading, runnable, reference-counting, abstract-factory

我有一个 Java ThreadFactory 实现，在我的 Android 应用程序中产生可运行的线程子类对象。此应用程序要求所有衍生线程在某个事件触发之前都是可寻址的，并且在触发所述事件时，可以使衍生线程有资格进行垃圾收集（例如，引用计数为 0）。我在想，为了满足第一个要求，我只需维护我的线程对象的 ArrayList，并且效果很好。第二个要求带来了麻烦，这让我想到了一系列关于 Java 引用计数的问题：

问题 1：简单地将生成线程的引用存储在 ArrayList 或其他容器中会增加每个线程对象的引用计数吗？如果我从不存储它们，而是允许我的工厂创建它们并让它们在没有任何定义的句柄的情况下运行，那么每个线程对象的引用计数会是多少，如下所示？

```
mvThreadSource.newThread(new BackgroundThread(...)).run(); 
```

问题 2：下面的代码示例是否对 hTempThread 指向的实际线程对象做任何事情，而不是增加并立即减少其引用计数？

```
BackgroundThread hTempThread;
for(int i=0;i<mvThreadsVector.size();i++){
    hTempThread = mvThreadsVector.get(i); //probably increments ref count of thread
    hTempThread = null; //probably just decrements the ref count of thread back to 
                        //previous value
} 
```

问题 3：假设问题 2 的答案是“否”，那么存储由 ThreadFactory 实现产生的线程以便它们的引用计数可以按需减少到 0 的有效方法是什么？删除这些引用所涉及的正确语法是什么？下面的代码示例是否会有效地将所有涉及的对象（mvThreadsVector、tempThreads、mvThreadsVector 跟踪的每个线程对象）引用计数减少到 0？clear() 究竟对存储在 arraylist 中的对象的引用计数做了什么，将数组引用设置为 null 对存储在其中的元素的引用计数（如果有的话）有什么作用？

```
Object[] tempThreads = mvThreadsVector.toArray();
mvThreadsVector.clear(); //possible this line is all I need...
mvThreadsVector = null;
for(int i=0;i<tempThreads.length;i++){
    tempThreads[i] = null;
}
tempThreads = null; 
```

对于上述任何/所有问题的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:22:10.723

1.  如果您的线程正在运行，则在它完成执行之前，它将保留在内存中（或交换），而不是 GC。即使线程没有你的代码引用它但正在执行代码，它至少在内部有一个引用。

2.  你甚至不能保证它会增加和减少引用计数。编译器可以通过意识到第一个赋值没有效果（因为它立即被覆盖）来优化它并将其删除。

3.  引用计数将减少，但请记住，您可能在引用链中有循环，其中每个元素将有 1 个引用计数，但整个循环不可访问，正确的 GC 应该意识到这一点并将其删除。

我认为主要问题是你不应该指望线程的引用计数下降到 0。只要它们正在运行，您就应该假设它们具有引用，因此您还必须有一种方法来确保线程停止执行。

# google-drive-api - Losing files created by Google Drive app when access revoked and then granted

> ID：14591828
> 
> 赞同：3
> 
> 时间：2013-01-29T20:39:56.523
> 
> 标签：google-drive-api

My app wants access to files it creates only. When I revoke access by going to my google drive and "Manage apps", and then later re-grant credentials to the same app, I lose access to previously created files and they don't show up when listing files. This seems like a bad design decision, but perhaps it is a bug. Is it intentional?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:58:55.960

This is by design, and is part of Google's dedication to putting the user's privacy first in Google Drive. When an app is uninstalled, all oauth tokens are revoked and the app loses the ability to open these files.

Sorry if this is a nuisance for you, but the alternative might be surprising for some users to find that an app still has access long after uninstalling and reinstalling.

# entity-framework - 在 EntityFramework 查询中不为空

> ID：14591829
> 
> 赞同：6
> 
> 时间：2013-01-29T20:39:58.117
> 
> 标签：entity-framework, c#-4.0, linq-to-entities

Entity Framework 4.0 代码优先，C# 4.0。**代码中的is not null**有什么问题？

```
var query = from c in dbContext.table 
where c.FacilityID == facilityID && c.FilePath is Not null select c; 
```

**编辑：**

添加后的许多错误不为空。

其中之一是：

> 找不到类型或命名空间名称“Not”（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T20:45:24.233

`Not`不是 LINQ 查询中的关键字，因此您将收到编译器错误。您需要使用不等式运算符 ( `!=`) 来检查是否`FilePath`不为空。

下面的代码应该适合你

```
var query = from c in dbContext.table 
where c.FacilityID == facilityID && c.FilePath != null select c; 
```

# c# - 验证后是否有一种普遍接受的方式将数据从一个 ASP.Net 表单传递到另一个表单？

> ID：14591830
> 
> 赞同：1
> 
> 时间：2013-01-29T20:39:58.433
> 
> 标签：c#, asp.net

我有一个 ASP.Net 表单 (Page1)，用户在其中输入一些数据，然后单击提交按钮。

作为 Page1 的一部分，我有一些验证器，包括一个需要在服务器上进行验证的 CustomValidator。

当用户单击提交按钮时，将向 Page1 发布一个帖子，并且在服务器上运行验证例程，只要我在按钮单击例程中检查 Page.IsValid，表单就会知道事情是否已经通过。

当验证没有通过时，一切都正确返回到 Form1 并显示错误消息。

当表单通过验证时，我想将用户输入的数据传递给第二个表单（Page2），以便可以根据用户在 Page1 上输入的数据正确呈现 Page2。

是否有一种普遍接受的方式或最佳方式将数据传递给 Page2？以下是我知道的一些方法：

*   使用查询字符串调用 Page2：这不起作用，因为在某些情况下我需要数据对用户不可见。
*   使用提交按钮上的 PostBackUrl 转到 Page2：据我所知，这将无法正常工作，因为 Page1 的服务器端验证例程将不会运行。
*   使用会话变量：我不知道这会不好的特定原因。
*   使用 Server.Transfer：我对此没有任何经验。

我认为这将是一件非常标准的事情，但我很难找到有关正确方法的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:44:33.417

使用`Session`对象是跨表单传递信息的标准方式。

@Servy 很好地解释了 Server.Transfer在这种情况下如何为您提供帮助*（在下面的评论中）。*

你说的其他选项都有问题，就像你提到的......

如果要使用 Session:
在 Page1 的回发中，您可以设置值：

```
Session["myVar"] = <Data you want to pass to page2> 
```

在 OnLoad 的 page2 中：

```
if (Session["myVar"] != null)
{
   myVar = Session["MyVar"]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:47:59.383

我认为最简单的解决方案是指定一个 PreviousPageType 指令。它指定页面应该期望接收的类型，并且您可以对该页面执行正常的 POST。

在应用程序的第二页上，使用以下指令：

```
<%@ PreviousPageType VirtualPath="~/FirstPage.aspx" %> 
```

您将能够使用以下内容访问公开的属性并检查其有效性：

```
if (PreviousPage != null && PreviousPage.IsValid) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T20:51:08.993

如果您没有此数据的辅助存储形式，则使用`Session`存储或`Server.Transfer`将工作。

您可能会发现`Server.Transfer`更简洁一些，因为这样，您将在传输过程中保留您的 POST 值。这可能会为您节省大量使用会话状态的繁琐代码，这取决于您的表单的复杂程度，可能会为您必须预测并计划提前处理的各种异常行为开辟道路例如当用户单击“返回”按钮时会发生什么，或者 - 如果您要跨多个页面发布 - 会话到期时会发生什么（加上 Servy 在同一页面上打开多个选项卡的示例，所有这些都共享同一会话）。使用会话状态可能会很混乱。

在 PostBack 上执行您的验证，如果是`Page.IsValid`，请执行以下操作：

```
Server.Transfer("/FormPage2.aspx"); 
```

`Server.Transfer`保留`Request.QueryString`and `Request.Form`，因此您可以在此处获取您的 POST 值`FormPage2`并对其执行任何您需要的操作 - 无论是将它们用于条件逻辑还是将它们再次呈现为隐藏字段以将它们与第二页中的值连接起来表单（请记住，如果您这样做，则必须在此阶段重新验证隐藏的输入）。

[http://msdn.microsoft.com/en-us/library/y4k58xk7.aspx](http://msdn.microsoft.com/en-us/library/y4k58xk7.aspx)

过去我曾使用会话状态来处理复杂的表单，并且发现自己希望使用`Server.Transfer`，我计划在未来将其用于所有类似的工作，除非我有充分的理由不这样做。

您也可以考虑使用[multiview](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.multiview.aspx)，但根据我的经验，这些可能非常混乱。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T20:52:22.020

您可以使用 Server.Transfer 通过向 page1 添加属性来实现此目的。例如，在 page_load 的第二页中：

```
Page1 prev = Page.PreviousPage as Page1;
if (prev != null)
{
    // access your property here and set up the page
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T21:03:57.643

`Server.Transfer`可以安全地接收查询字符串，而不必担心用户看到它。

而不是`Session`使用`Context.Items`.

```
Context.Items["validationProblems"] = "...";
Server.Transfer("FixProblems.aspx"); 
```

我的另一条评论是，根据我的经验，将验证 UI 包含在收集信息的同一表单中更为“标准”。这实现了“实时”反馈。在实践中，我认为最好尽早向用户提供他们做错了什么的信息。

请注意，这只是我的经验……这是一个很大的世界。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T21:35:00.337

您目前需要的可能更多，但另一种方法是将数据保存在数据库中：

[http://msdn.microsoft.com/en-us/library/6tc47t75%28v=VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/6tc47t75%28v=VS.100%29.aspx)

[http://www.asp.net/web-forms/videos/how-do-i/how-do-i-set-up-the-sql-membership-provider](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-set-up-the-sql-membership-provider)

# oracle - Oracle Forms 6i 是否要保存更改消息

> ID：14591831
> 
> 赞同：2
> 
> 时间：2013-01-29T20:40:02.960
> 
> 标签：oracle, oracleforms

我有一个包含多个数据块的表单，所有字段都通过将它们的属性设置为数据库列名来绑定到数据库。每个块上的所有项目都显示在一个画布上。

表格上的项目包含个人数据，但客户电话号码和地址等信息存储在一对多映射的单独表格中，并由客户号码链接，考虑到客户可以有多个电话号码和许多地址。

这里最大的问题是当用户用户处于查询模式并在每个块上输入信息时，当他们试图离开一个块时，他们会收到一条消息，询问他们“您是否要保存更改”。每个块都会发生这种情况。所以这个消息出现了好几次。

我想要实现的是应该禁止此消息，以便仅向用户询问一次。我知道一旦用户回答是，我就可以在每个块上 do_commit 以保存更改。但是我无法控制此消息，我想知道构建应用程序以避免这种情况的最佳方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T08:44:53.350

添加到您执行查询的触发器或提交类似的内容。

```
:SYSTEM.MESSAGE_LEVEL := '25';
COMMIT;
:SYSTEM.MESSAGE_LEVEL := '0'; 
```

这会抑制系统消息。你没有写你在离开块时使用什么触发器。

# java - java如何计算文件数据的哈希而不在内存中加载文件（不读取所有字节）

> ID：14591835
> 
> 赞同：4
> 
> 时间：2013-01-29T20:40:11.770
> 
> 标签：java, file, hash, md5

遇到这个问题，您需要以某种方式计算文件内容的 md5 散列而不读取字节数组，因为：1) 文件可能大于 2GB 2) 没有足够的内存来下载大文件。

可以做什么？在谷歌搜索什么也没给。感谢和抱歉我的英语不好

# sql-server-2008 - If Else 在 where 子句中

> ID：14591836
> 
> 赞同：0
> 
> 时间：2013-01-29T20:40:16.223
> 
> 标签：sql-server-2008, tsql, stored-procedures

这是我所拥有的一个片段：

```
select something from myTable
where curentFlag = 'Y'
and
case when @Year2 is not NULL then  
 AYEAR >= @Year AND AYEAR <= @Year2
else
 AYEAR= isnull(@Year ,AYEAR)  
end
        ADATE = ISNULL(@Date, ADATE) 
```

但这会产生：

> '>' 附近的语法不正确。
> 'ADATE' 附近的语法不正确。

用户应该能够按年份（等于）或年份范围进行搜索。所以我要么只是传递，`@YEAR`要么两者都传递`@YEAR`and `@YEAR2`。假设我的数据集：

```
DECLARE @y TABLE(AYEAR INT);
INSERT @y VALUES(2008),(2010),(2010); 
```

现在我有这些变量：

```
DECLARE @YEAR INT, @YEAR2 INT; 
```

*   如果我通过，`@YEAR = 2008`我应该得到 1 个结果。
*   如果我通过，`@YEAR = 2010`我应该得到 2 个结果。
*   如果我通过，`@YEAR = 2008`我`@YEAR2 = 2010`应该得到所有 3 个结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:42:40.050

`CASE`是一个返回单个值的表达式。它不能用于流逻辑的控制。

如果您确定它`@Year`总是会被填充并且`@Year2`只会有时会被填充，那么这个更简单的逻辑应该可以工作：

```
WHERE CURRENTFLAG = 'Y'
AND AYEAR BETWEEN @Year AND COALESCE(@Year2, @Year)
AND ADATE = COALESCE(@Date, ADATE); 
```

你可以用一个非常简单的例子来试试：

```
DECLARE @y TABLE(AYEAR INT);
INSERT @y VALUES(2008),(2010),(2010);

DECLARE @YEAR INT = 2008, @YEAR2 INT = 2010;
--DECLARE @YEAR INT = 2008, @YEAR2 INT = NULL;
--DECLARE @YEAR INT = 2010, @YEAR2 INT = NULL;

SELECT AYEAR FROM @y 
  WHERE AYEAR BETWEEN @YEAR AND COALESCE(@YEAR2, @YEAR); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:44:14.413

```
 where CURRENTFLAG = 'Y' 
    case when @Year2 is not NULL then  --after THEN should be statement or BEGIN block not AND
 and AYEAR >= @Year AND AYEAR <= @Year2
    else
     AND  AYEAR= isnull(@Year ,AYEAR)   -- here also
    end
        and    ADATE = ISNULL(@Date, ADATE) 
```

# rad - 如何在 HTML5 Builder 中打开另一个页面

> ID：14591837
> 
> 赞同：0
> 
> 时间：2013-01-29T20:40:19.270
> 
> 标签：rad, html5builder

抱歉我的问题很简单，我是 HTML5 Builder 的新手。

我正在开发一个简单的数据库编辑应用程序（在网站上添加或删除一些广告，仅供系统管理员使用），我想使用 HTML5 构建器来制作它（我希望它会快速而简单）。

在按钮上单击主页（“添加记录”按钮），我需要打开另一个带有数据字段的页面（advinfo.php）。

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:17:24.503

您只需要**重定向**到目标页面。如何执行此操作取决于您要使用的语言。

如果要使用按钮的**JavaScript** OnClick 事件：

```
function Button1JSClick($sender, $params)
{
    ?>
    //begin js
    window.location = "advinfo.php";
    //end
    <?php
} 
```

如果要使用**PHP** OnClick 事件（标准事件）：

```
function Button2Click($sender, $params)
{
    header("Location: advinfo.php");
} 
```

# nginx - nginx php5-fpm 加载旧的 php.ini 文件

> ID：14591841
> 
> 赞同：1
> 
> 时间：2013-01-29T20:40:32.273
> 
> 标签：nginx, php

我有一个基于 PHP 的站点，运行通常的 Nginx 和 php5-fpm 组合。sites-available 配置中有几个不同的服务器块，例如一个用于主 www.mysite.com 和一个用于 blog.mysite.com 子域。最初，当我第一次创建站点时，我`auto_prepend_file`在我的 php.ini（在 /etc/php5/fpm/ 中）中设置了 PHP 值，我们称之为“common.php”。但是，我现在不想在 blog 子域中包含 common.php，所以我从 php.ini 中删除了 auto_prepend_file 并将其添加到可用于 www 子域的站点中，通过

```
fastcgi_param PHP_VALUE "auto_prepend_file=/var/www/mysite/app/lib/common.lib.php"; 
```

那里没有什么太花哨的。但是，尽管重新启动了 nginx 和 php5-fpm，但有时我仍然可以看到包含 common.php，通常是在您重新启动 nginx 和 php5-fpm 之后，重新加载页面，然后再次重新加载，即第一次重新加载就可以了。

当我在包含文件的情况下执行 phpinfo() 时，我可以看到 PHP 已经加载了正确的 php.ini 文件（即我从中删除的那个`auto_prepend_file`），但该`auto_prepend_file`值仍然设置为 common.php！

还有什么我需要重新启动的吗？我应该寻找`auto_prepend_file`/etc/php5/fpm/php.ini 以外的其他地方吗？谢谢

# matlab - 我在 iris 数据集 nntool matlab 中放了什么“目标”？

> ID：14591847
> 
> 赞同：2
> 
> 时间：2013-01-29T20:41:05.120
> 
> 标签：matlab, neural-network, backpropagation, nntool

我是使用 matlab 的新手，所以这可能很容易。我正在尝试使用 nntool（前馈反向传播网络）在 matlab 中制作虹膜数据集神经网络。但我无法找出目标矩阵应该是什么。我也试图找到（试图创建但仍然什么也没做）用于编程相同事物而不是使用 nntools 的代码。谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:56:27.150

目标是正确的类标签。然而，Matlab 中的 Fisher 鸢尾花数据集的目标数据位于字符串 ( ) 元胞数组中`species`，而 nntool 需要一个数值向量。所以你必须转换它。

```
clear all;
load('fisheriris');
classnames = unique(species);
targets = zeros(1, numel(species));
for i = 1:3
    class(strcmp(species, classnames{i})) = i;
end 
```

您现在有一个`targets`可以在 nntool 中加载的向量。

# jsf-2 - 如何显示二维元素数组

> ID：14591850
> 
> 赞同：0
> 
> 时间：2013-01-29T20:41:31.760
> 
> 标签：jsf-2, multidimensional-array

我想使用 JSF2 在 xhtml 页面上的表格中显示二维浮点数组，但我不知道该怎么做。我试图在谷歌中找到答案，但我找不到。所有示例都显示类对象，我无法使其与表格一起使用。

位置是：我有一些大小的数组 - 数组的大小取决于输入的数据：float [][] variables = new float[size1][size2]

用户输入数据并按下按钮后，在托管 bean 中调用一个方法。计算开始，表格中填满了数据。

请告诉我如何显示数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:39:48.030

为此，您可以使用[`c:forEach`](http://roseindia.net/jsp/simple-jsp-example/JSTLForLoop.shtml)标签动态地构建一个[`h:panelGrid`](http://www.jsftoolbox.com/documentation/help/12-TagReference/html/h_panelGrid.html). 只需保存`size2`，即作为属性的列号，并将所有输入的数字存储在一个 normal[`java.util.List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)中。然后将该大小设置为`h:panelGrid` `columns`属性，组件将为您拆分行。您还可以为`c:forEach`标签内的内容设置样式，为其设置边框以使其具有表格行为。

```
<h:form>
    <h:panelGrid columns="#{bean.numberCount}">
        <c:forEach var="num" items="#{bean.numberList}">
            #{number}
        </c:forEach>
    </h:panelGrid>
</h:form> 
```

**已编辑**

如果您想保持原始结构但在 List 中，您可以创建一个`List<List<Float>>`. 这意味着由包含浮动对象的列表组成的列表。与二维数组相同。

```
private List<List<Float>> _Matrix;

public List<List<Float>> get_Matrix() {
    return this._Matrix;
}

/**
 * Constructor for BackingBean.
 */
public BackingBean() {
    this._Matrix = new ArrayList<List<Float>>();
    this._Matrix.add(new ArrayList<Float>());
    this._Matrix.add(new ArrayList<Float>());
    this._Matrix.get(0).add(1.0f);
    this._Matrix.get(0).add(2.0f);
    this._Matrix.get(0).add(3.0f);
    this._Matrix.get(1).add(1.0f);
    this._Matrix.get(1).add(2.0f);
    this._Matrix.get(1).add(3.0f);
} 
```

在上面的代码中，我正在构造一个等效于具有 2 行和 values 的二维数组`1.0`，`2.0`并且`3.0`在每一行上。您可以使用此代码在视图上对其进行迭代：

```
<h:panelGrid columns="#{backingBean._ColumnNumber}">
        <c:forEach var="row" items="#{backingBean._Matrix}">

            <c:forEach var="value" items="#{row}">

                #{value}
                    </c:forEach>
        </c:forEach>
    </h:panelGrid> 
```

`#{backingBean._ColumnNumber}`List 的第一个数组的长度在哪里（假设它们都具有相同的长度）。

祝你好运。

# python - pandas HDFStore - 如何重新打开？

> ID：14591855
> 
> 赞同：21
> 
> 时间：2013-01-29T20:41:42.183
> 
> 标签：python, pandas

我使用以下方法创建了一个文件：

```
store = pd.HDFStore('/home/.../data.h5') 
```

并使用以下方法存储了一些表：

```
store['firstSet'] = df1
store.close() 
```

我关闭了 python 并在一个新的环境中重新打开。

如何重新打开此文件？

我去的时候：

```
store = pd.HDFStore('/home/.../data.h5') 
```

我收到以下错误。

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/misc/apps/linux/python-2.6.1/lib/python2.6/site-packages/pandas-0.10.0-py2.6-linux-x86_64.egg/pandas/io/pytables.py", line 207, in __init__
    self.open(mode=mode, warn=False)
  File "/misc/apps/linux/python-2.6.1/lib/python2.6/site-packages/pandas-0.10.0-py2.6-linux-x86_64.egg/pandas/io/pytables.py", line 302, in open
    self.handle = _tables().openFile(self.path, self.mode)
  File "/apps/linux/python-2.6.1/lib/python2.6/site-packages/tables/file.py", line 230, in openFile
    return File(filename, mode, title, rootUEP, filters, **kwargs)
  File "/apps/linux/python-2.6.1/lib/python2.6/site-packages/tables/file.py", line 495, in __init__
    self._g_new(filename, mode, **params)
  File "hdf5Extension.pyx", line 317, in tables.hdf5Extension.File._g_new (tables/hdf5Extension.c:3039)
tables.exceptions.HDF5ExtError: HDF5 error back trace

  File "H5F.c", line 1582, in H5Fopen
    unable to open file
  File "H5F.c", line 1373, in H5F_open
    unable to read superblock
  File "H5Fsuper.c", line 334, in H5F_super_read
    unable to find file signature
  File "H5Fsuper.c", line 155, in H5F_locate_signature
    unable to find a valid file signature

End of HDF5 error back trace

Unable to open/create file '/home/.../data.h5' 
```

我在这里做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-07-08T18:17:55.530

在我手中，以下方法效果最好：

```
df = pd.DataFrame(...)

"write"
with pd.HDFStore('test.h5',  mode='w') as store:
    store.append('df', df, data_columns= df.columns, format='table')

"read"
with pd.HDFStore('test.h5',  mode='r') as newstore:
    df_restored = newstore.select('df') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-07T10:10:13.860

您可以尝试这样做：

```
store = pd.io.pytables.HDFStore('/home/.../data.h5')
df1 = store['firstSet'] 
```

或者直接使用 read 方法：

```
df1 = pd.read_hdf('/home/.../data.h5', 'firstSet') 
```

无论哪种方式，您都应该拥有 pandas 0.12.0 或更高版本...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-30T07:13:07.297

我遇到了同样的问题，最后通过安装 pytables 模块（在我使用的 pandas 模块旁边）解决了这个问题：

conda 安装 pytables

这让我 numexpr-2.4.3 和 pytables-3.2.0

之后它起作用了。我在 python 2.7.9 下使用 pandas 0.16.2

# uitableview - ios6中视图控制器之间的自定义转换

> ID：14591860
> 
> 赞同：2
> 
> 时间：2013-01-29T20:42:04.683
> 
> 标签：uitableview, uiviewcontroller, ios6

我有一个在同一个视图控制器中有两个视图的转换类。这工作正常。我想将相同的转换应用于第二个视图控制器。我没有任何异常，但它不起作用......

当前的过渡代码是这样的：

自定义转换类

```
- (id)initWithBaseView:(UIView *)baseView firstView:(UIView *)firstView lastView:(UIView *)lastView
{
    if((self = [super init])) {
        self.view = baseView;
        self.originalView = firstView;
        self.nextView = lastView;
    }
    return self;
} 
```

这是正在工作的代码：

单视图控制器类

```
- (IBAction)doTransition:(id)sender
{
    MyTransition *transition = [[MyTransition alloc] initWithBaseView:self.view 
                                                                          firstView:self.currentView 
                                                                           lastView:self.nextView];
    [transition buildAnimation];
} 
```

我想实现这样的目标：

```
- (IBAction)doTransition:(id)sender
{
    NSLog(@"%s", __FUNCTION__);
    MyTransition *transition = [[MyTransition alloc] initWithBaseView:self.view
                                                                          firstView:self.currentView 
                                                                           lastView:secondView.lastView];
    [transition buildAnimation];
}
- (void)viewDidLoad
{
    NSLog(@"%s", __FUNCTION__);
    [super viewDidLoad];
    secondView = [[SecondViewController *) secondView initWithNibName:@"SecondViewController" bundle:nil];
} 
```

第一个视图在第一个视图控制器中，下一个视图在第二个视图控制器中。

更新：

我已将 First VC 更新如下：

```
 - (void)viewDidLoad
    {
        NSLog(@"%s", __FUNCTION__);
        [super viewDidLoad];
        secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    }

- (IBAction)doTransition:(id)sender
{
    NSLog(@"%s", __FUNCTION__);
    MyTransition *transition = [[MyTransition alloc] initWithBaseView:self.view                                             firstView:self.currentView                                                   lastView:secondView.view];

    [transition buildAnimation];
} 
```

记录第二个 VC 表明它没有被调用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:11:56.907

我认为如果你尝试这样的事情它应该工作：

```
- (IBAction)doTransition:(id)sender
{
    NSLog(@"%s", __FUNCTION__);
    MyTransition *transition = [[MyTransition alloc] initWithBaseView:self.view
                                                                          firstView:self.currentView 
                                                                           lastView:secondView.view];
    [transition buildAnimation];
}
- (void)viewDidLoad
{
    NSLog(@"%s", __FUNCTION__);
    [super viewDidLoad];
    secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
} 
```

如果我了解您要做什么，那么您应该能够在 SecondViewController 的视图上执行相同的动画，就像您使用常规视图一样。还是我错过了其他东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:23:14.047

问题原来是我没有在它自己的 ViewController 中正确初始化 secondView。一旦我这样做了，过渡就会根据需要进行。

对于其他人，我使用的代码如下：

第一视图控制器：

```
- (void)viewDidLoad
{
    NSLog(@"%s", __FUNCTION__);
    [super viewDidLoad];

    secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

}

- (IBAction)clickOpenDoor:(id)sender
{

MyTransition *transition = [[MyTransition alloc] initWithBaseView:self.view
firstView:self.currentView                                               lastView:secondView.view];

    [transition buildAnimation];
} 
```

第二个视图控制器：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
NSLog(@"%s", __FUNCTION__);
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 350, 500)];
        tableView  = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 350, 500)];
        [view addSubview:tableView];
    } 
```

# c - 将浮点数组传递给 (void*) 函数参数

> ID：14591864
> 
> 赞同：0
> 
> 时间：2013-01-29T20:42:13.023
> 
> 标签：c, arrays

我正在使用`cblas_icamax`. 我想将一个浮点向量传递`z13]`给 cblas_icamax（见下文）。我的代码包括以下内容。

```
 float z[13] = {0.f, 0.f, 0.f, 0.f, 0.f, 0.f, 0.f, 0.f ,0.f, 0.f, 0.f, 0.f, 0.f};
//...

    for (i = 0; i < 13; i++) {
        printf("%.4f\n", z[i]);
    }
    int cardIndex = cblas_icamax(13,(float*) z,1);
    NSLog(@"cardIndex: %d", cardIndex); 
```

我也尝试了这段代码，结果相同。

```
int cardIndex = cblas_icamax(13,&z,1); 
```

打印结果如下，最大绝对值为 138.1086，即位置 10，但函数`cblas_icamax`返回 5。出了什么问题？

```
-1.2624
74.1524
52.3533
89.9426
28.8639
-7.6203
-30.2820
48.9747
124.8693
29.4351
138.1086
36.2638
-45.0410 
```

[cblas_icamax](https://developer.apple.com/library/mac/#documentation/Accelerate/Reference/BLAS_Ref/Reference/reference.html)

返回向量中绝对值最大的元素的索引（单精度复数）。

```
int cblas_icamax (
   const int N,
   const void *X,
   const int incX
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:13:30.763

`floats`您的阵列中有 13 个。

您向库保证您`float complex`的数组中有 13 个值（即 26 `floats`）。行为不符合预期也就不足为奇了。要么将复杂数据数组作为输入传递，要么使用`cblas_isamax`。

为了更准确地解释正在发生的事情：`cblas_icamax`返回具有最大 L1 范数的复数浮点数的索引。每个复数浮点数是来自输入的一对浮点值。如果我们查看您输入的 L1 规范：

```
index        value            L1 norm
0      -1.2624 + 74.1524i     75.4148
1      52.3533 + 89.9426i    142.2959
2      28.8639 -  7.6203i     36.4842
3     -30.2820 + 48.9747i     79.2567
4     124.8693 + 29.4351i    154.3044
5     138.1086 + 36.2638i    174.3724
6     -45.0410 + ???i           ???
7          ??? + ???i           ???
8          ??? + ???i           ???
9          ??? + ???i           ???
10         ??? + ???i           ???
11         ??? + ???i           ???
12         ??? + ???i           ??? 
```

这 '？？？' 字段表示未初始化的数据。所以`cblas_icamax`返回的结果当然看起来是合理的；在初始化的字段中，它具有最大的 L1 范数。当然，实际行为是未定义的，因为您告诉函数从未初始化（并且可能未映射）的内存中读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:05:18.823

我应该调用 cblas_isamax，而不是 cblas_icamax，因为我的数组不是复数。

# java - 在远程服务中使用处理程序

> ID：14591865
> 
> 赞同：2
> 
> 时间：2013-01-29T20:42:14.597
> 
> 标签：java, android, multithreading, service, aidl

假设我们有一个简单的 Android 应用程序，它通过 IPC 连接到远程服务，安排一个相对较长的任务，然后在等待回调的同时继续工作并获得一些结果。AIDL接口：

**IRemoteService.aidl**

```
package com.var.testservice;
import com.var.testservice.IServCallback;

interface IRemoteService {

    void scheduleHeavyTask(IServCallback callback);

} 
```

**IRemoteService.aidl**

```
package com.var.testservice;

interface IServCallback {

    void onResult(int result);

} 
```

活动代码：

```
package com.var.testclient;

import com.var.testservice.IServCallback;
import com.var.testservice.IRemoteService;

import android.os.Bundle;
import android.os.IBinder;
import android.os.RemoteException;
import android.util.Log;
import android.view.View;
import android.app.Activity;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;

public class MainActivity extends Activity {

    private static final String TAG = "TestClientActivity"; 

    private IServCallback.Stub servCallbackListener = new IServCallback.Stub(){
        @Override
        public void onResult(int result) throws RemoteException {
            Log.d(TAG, "Got value: " + result);
        }

};

private ServiceConnection servConnection = new ServiceConnection(){

    @Override
    public void onServiceConnected(ComponentName name, IBinder binder) {
        service = IRemoteService.Stub.asInterface(binder);          
    }

    @Override
    public void onServiceDisconnected(ComponentName name) {
        service = null;         
    }

    };

    private IRemoteService service;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        if(!bindService(new Intent(IRemoteService.class.getName()), servConnection, Context.BIND_AUTO_CREATE)){
            Log.d(TAG, "Service binding failed");
        } else {
            Log.d(TAG, "Service binding successful");
        }
    }

    @Override
    protected void onDestroy() {
        if(service != null) {
            unbindService(servConnection);
        }
        super.onDestroy();
    }

    public void onButtonClick(View view){
        Log.d(TAG, "Button click");
        if(service != null){
            try {
                service.scheduleHeavyTask(servCallbackListener);
            } catch (RemoteException e) {
                Log.d(TAG, "Oops! Can't schedule task!");
                e.printStackTrace();
            }
        }
    }

} 
```

服务代码：

```
package com.var.testservice;

import android.app.Service;
import android.content.Intent;
import android.os.Handler;
import android.os.IBinder;
import android.os.Looper;
import android.os.RemoteException;
import android.util.Log;

public class TestService extends Service {

    private static final String TAG = "TestService";

    class TestServiceStub extends IRemoteService.Stub {

        private IServCallback servCallback;
        //These 2 fields will be used a bit later
        private Handler handler;
        private int result;

        //The simpliest implementation. In next snippets I will replace it with
        //other version
        @Override
        public void scheduleHeavyTask(IServCallback callback)
                    throws RemoteException {
            servCallback = callback;
            result = doSomethingLong();
            callback.onResult(result);
        }

        private int doSomethingLong(){
            try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                return 42;
            }
        }

    }

    @Override
    public IBinder onBind(Intent intent) {
        return new TestServiceStub();
    }

} 
```

这个版本虽然很笨（它使应用程序的 UI 线程挂起 5 秒，导致 ANR），但它成功地通过 IPC 执行所有调用，将结果传递给活动。如果我尝试将计算放入单独的线程中，就会出现问题：

```
@Override
public void scheduleHeavyTask(IServCallback callback)
        throws RemoteException {
    servCallback = callback;
    Runnable task = new Runnable(){

        @Override
        public void run() {
            result = doSomethingLong();
            try {
                Log.d(TAG, "Sending result!");
                servCallback.onResult(result);
            } catch (RemoteException e) {
                e.printStackTrace();
            }
        }

    };
    new Thread(task).start();
} 
```

在这种情况下，回调只是没有传递给活动：服务成功调用`servCallback.onResult(result);`，但在活动中没有调用任何内容。没有例外，没有线索，没有幸存者：完美的祈求谋杀。我找不到有关这种行为的可能原因的任何信息，所以如果有人能澄清这里发生的事情，我将不胜感激。我的建议是有某种安全机制，跟踪绑定了哪些确切的线程，并忽略来自其他线程的“不安全”调用（当我们尝试处理来自非 UI 线程的 UI 元素时会发生类似的情况），但我不能确定。

最明显的解决方案是将回调调用发布到绑定线程，所以我做了这个：

```
@Override
public void scheduleHeavyTask(IServCallback callback)
        throws RemoteException {
    Log.d(TAG, "Schedule request received.");
    servCallback = callback;
    if(Looper.myLooper() == null) {
        Looper.prepare();
    }

    handler = new Handler();
    Runnable task = new Runnable(){

        @Override
        public void run() {
            result = doSomethingLong();
            Log.d(TAG, "Posting result sender");
            handler.post(new Runnable(){

                @Override
                public void run() {
                    try {
                        Log.d(TAG, "Sending result!");
                        servCallback.onResult(result);
                    } catch (RemoteException e) {
                        e.printStackTrace();
                    }
                    Looper.myLooper().quit();
                    Log.d(TAG, "Looper stopped");
                }

            });
        }

    };
    new Thread(task).start();
    Looper.loop();
} 
```

在这里，我遇到了另外两个问题：

1.  我必须调用`Looper.loop()`以启用回调可运行对象的处理，但它会阻止 IPC，所以我得到与开始时相同的结果 - 没有实际的多线程；
2.  第二次注册回调（在第一个循环完成并返回值之后）导致异常：

    ```
    java.lang.RuntimeException: Handler (android.os.Handler) sending message to a Handler on a dead thread
    at android.os.MessageQueue.enqueueMessage
    at android.os.Handler.sendMessageAtTime
    at android.os.Handler.sendMessageDelayed
    at android.os.Handler.post
    at com.var.testservice.TestService$TestServiceStub$1.run
    at java.lang.Thread.run 
    ```

这让我完全不解：我从实际中创建了一个新实例`Looper`，它怎么会指向死线程？

服务能够排队任务并在完成后进行回调的整个想法对我来说听起来并不疯狂，所以我希望更有经验的人可以解释一下：

1.  为什么我实际上不能从不同的线程进行 IPC 调用？
2.  我的怎么了`Handler`？
3.  我应该使用什么工具/架构来建立一个干净、适当的队列机制，这样它就可以在正确的线程上调用 IPC 方法而无需不断调用`Looper.loop()`/ `Looper.quit()`？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:36:40.140

我无法解释为什么你的程序不工作。但是涉及线程和异步回调的版本：

```
@Override
public void scheduleHeavyTask(IServCallback callback)
        throws RemoteException {
    servCallback = callback;
    Runnable task = new Runnable(){

        @Override
        public void run() {
            result = doSomethingLong();
            try {
                Log.d(TAG, "Sending result!");
                servCallback.onResult(result);
            } catch (RemoteException e) {
                e.printStackTrace();
            }
        }

    };
    new Thread(task).start();
} 
```

应该可以正常工作。

以下是 Android 如何为 AIDL 和其他类型的 Binder 事务安排线程。

*   如果调用者和被调用者在同一个进程中，就变成了简单的方法调用。因此，您应该可以`scheduleHeavyTask`从与`onButtonClick`. 同样，您应该很好地调用`onResult`应该是一个简单的方法调用，来自运行任务的线程。
*   如果调用者和被调用者在不同的进程中，Android 将从被调用者进程中的线程池运行 Binder 事务（它们被称为 Binder #1 等）。即使在这里它也很聪明 - 所以如果`onButtonClick`调用`scheduleHeavyTask`哪个`onResult`从同一个线程，然后`onButtonClick`会出现直接在调用`onResult`者进程中调用。

绝对没有任何机制可以避免来自“不安全”或“未绑定”线程的调用 - 所以您发布的这个简单方法*应该可以*工作。正如你所说，这是一种常见的模式，我已经用过很多次了。因此，我建议继续进行此操作，而不是摆弄额外的 Loopers 和处理程序。

这里有一些想法：

*   在调试器中运行它。假设您的服务和活动在同一个进程中，您应该能够设置断点并查看发生的合理方法调用。
*   即使您不能，也可以`ddms`从命令行启动，或在 Eclipse 中显示设备和线程视图。这将使您准确了解每个线程正在做什么 - 您可以获得一个调用堆栈。即使在完整的调试器不方便的情况下，通常也可以使用它。
*   你在`synchronized`任何地方都有这个词吗？可能发生的是`onResult`想要继续运行，但它在某些监视器上被阻止。一旦它变得畅通无阻，它可能会运行。

# python - 在 Python 中添加连续整数

> ID：14591872
> 
> 赞同：1
> 
> 时间：2013-01-29T20:42:37.223
> 
> 标签：python

这是我的原始代码：

```
x = input("Please input an integer: ")
x = int(x)
i = 1
sum = 0
while x >= i:
    sum = sum + i
    i += 1
print(sum) 
```

这是第二部分的内容：

**b）通过将循环封闭在另一个循环中来修改您的程序，以便您可以找到连续的总和。例如，如果输入 5，您将找到五个连续数字的总和，因此：**

```
1 = 1
1 + 2 = 3
1 + 2 + 3 = 6
1 + 2 + 3 + 4 = 10
1 + 2 + 3 + 4 + 5 = 15 
```

我已经坚持了3天了，我就是不明白该怎么做。我试过这个，但无济于事。

```
while x >= i:
    sum_numbers = sum_numbers + i
    past_values = range(i)
    for ints in past_values:
        L = []
        L.append(ints)
        print(L, "+", i, "=", sum_numbers)
    i += 1 
```

任何人都可以帮助引导我朝着正确的方向前进吗？顺便提一句。它是python 3.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:15:35.297

您可以在一个循环中执行此操作，方法是使用`range`定义您的数字，并`sum`为您循环遍历这些数字。

```
>>> x = input("Please input an integer: ")
Please input an integer: 5
>>> x = int(x)
>>>
>>> for i in range(1, x+1):
...     nums = range(1, i+1)
...     print(' + '.join(map(str, nums)), '=', sum(nums))
...
1 = 1
1 + 2 = 3
1 + 2 + 3 = 6
1 + 2 + 3 + 4 = 10
1 + 2 + 3 + 4 + 5 = 15 
```

`range(1, x+1)`会给我`[1, 2, 3, 4, 5]`，这充当我们想要打印总和多少次的控制器。因此，对于您的示例，此 for 循环将发生 5 次。

`nums = range(1, i+1)`请注意，我们在`i`这里使用的是（取自`range`上面），我用它来定义我在序列中最多的数字。

`' + '.join(map(str, nums))`：

*   `map(str, nums)`用于使用 将 的所有元素转换`nums`为字符串`str`，因为该`join`方法需要一个用字符串填充的可迭代对象。
*   `' + '.join`用于将元素与公共字符串“连接”在一起，在本例中为“+”。在只有 1 个元素的情况下，`join`将只返回该元素。

`sum(nums)`给你定义的所有数字的总和`range(1, i+1)`：

*   当 nums = `range(1, 2)`, `sum(nums)`= 1
*   当 nums = `range(1, 3)`, `sum(nums)`= 3
*   ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:54:41.223

```
reduce(lambda x,y:x+y,range(x+1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:54:44.323

您不必使用 while 循环，2 for 会很好地完成这个技巧并且感觉更自然。

```
x = input("Please input an integer : ")
x = int(x)
item = range(1, x + 1)
for i in item:
    sum = 0
    for j in range(1, i + 1):
        sum = sum + j
    print(str(sum)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-22T17:30:50.877

> 在 python 中使用列表推导：

```
x = input("Please input an integer: ")
x = int(x)
i = 1

sums = [(((1+y)*y)//2) for y in range(i, x+1)] # creates list of integers
print(sums) # prints list of sums on one line 
```

或者

```
[print(((1+y)*y)//2) for y in range(i, x+1)] # prints sums on separate line 
```

# java - 我没有得到正确的结果，不确定我错过了什么（不正确的逻辑，缺少步骤？）

> ID：14591874
> 
> 赞同：1
> 
> 时间：2013-01-29T20:42:55.820
> 
> 标签：java

我试图让这个问题正常工作，它要求输入一些分数然后它应该显示得分最高的人的名字。我将输入的最后一个分数作为最高分，问题是输入的最后一个分数不一定是输入的最高分数。任何有关如何解决此问题的想法将不胜感激。这是家庭作业，所以没有人说“使用列表或数组”，我们没有在课堂上讨论过，因此不应该用它来解决这个问题。

```
 public static void main(String[] args) 
       {
            // variables
            Scanner input = new Scanner(System.in);
            int count = 0;
            int numStudents;
            double grade = 0, highestGrade = 0;
            String name = "", highName = "";

            String numGrades =
                    JOptionPane.showInputDialog
                    ("How many student grades are you entering: ");
            numStudents = Integer.parseInt(numGrades);

            //for(int count = 0; count < numStudents; count++)
            while(count < numStudents)
            {
            // prompt for the user to enter grades
            String inputName =
                    JOptionPane.showInputDialog("Enter a student name: ");
            name = inputName;
            //name = input.next(inputName);

            String inputGrade = 
                   JOptionPane.showInputDialog("What is that students grade: ");
            grade = Double.parseDouble(inputGrade);
            //grade = input.nextDouble();

            count++; 
            //if(grade < highestGrade)
            if(highestGrade > grade)
            {
                name = highName;
                grade = highestGrade;
            }
            else 
            {
                continue;
            }        
            }
            JOptionPane.showMessageDialog
                    (null, "The student with the highest score is " + name + 
                    " with a grade of " + grade);           
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:47:03.370

```
 if(highestGrade > grade)
            {
                name = highName;
                grade = highestGrade;
            } 
```

既然要找最高的等级和名字，上面的应该反过来。

```
 if(grade > highestGrade )
            {
                highName = name;
                highestGrade = grade;
            } 
```

此外，打印*找到*的值：

```
 JOptionPane.showMessageDialog
                 (null, "The student with the highest score is " + highName +  
                  " with a grade of " + highestGrade); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T20:46:48.680

这是倒退：

```
if(highestGrade > grade) 
```

应该

```
if(highestGrade < grade) 
```

或者更容易理解：

```
if(grade > highestGrade) 
```

编辑：这也是倒退...

```
name = highName;
grade = highestGrade; 
```

# python - Python 3.2井字游戏人工智能

> ID：14591877
> 
> 赞同：3
> 
> 时间：2013-01-29T20:43:06.713
> 
> 标签：python, tic-tac-toe

我为井字游戏设计了一个简单的 AI，它应该会导致计算机对手试图阻止我的动作。运行代码不会出现任何错误，而且计算机通常会阻止我。但是，它有时会在棋盘上随机移动。此外，板上的一些棋子会消失。有什么帮助吗？

```
import operator, sys, random, time
def GameLoop():

    def allEqual(list):
        # Returns True if all the elements in a list are equal, or if the list is empty.
        return not list or list == [list[0]] * len(list)

    Empty = ' '
    Player_X = 'X'
    Player_O = 'O'
    class Board:
        # This class represents a tic tac toe board state.
        def __init__(self):
            """Initialize all members."""
            self.pieces = [Empty]*9
            self.field_names = '123456789'
        def output(self):
            # Display the board on screen.
            print('',self.pieces[0],'|',self.pieces[1],'|',self.pieces[2])
            print('-----------')
            print('',self.pieces[3],'|',self.pieces[4],'|',self.pieces[5])
            print('-----------')
            print('',self.pieces[6],'|',self.pieces[7],'|',self.pieces[8])
            print()
        def winner(self):
            # Determine if one player has won the game. Returns Player_X, Player_O or None.
            winning_rows = [[0,1,2],[3,4,5],[6,7,8], # Vertical
                            [0,3,6],[1,4,7],[2,5,8], # Horizontal
                            [0,4,8],[2,4,6]]         # Diagonal
            for row in winning_rows:
                if self.pieces[row[0]] != Empty and allEqual([self.pieces[i] for i in row]):
                    return self.pieces[row[0]]
        def getValidMoves(self):
            # Returns a list of valid moves. A move can be passed to getMoveName to 
            # Retrieve a human-readable name or to makeMove/undoMove to play it.
            return [pos for pos in range(9) if self.pieces[pos] == Empty]
        def gameOver(self):
            # Returns true if one player has won or if there are no valid moves left.
            return self.winner() or not self.getValidMoves()
        def getMoveName(self, move):
            # Returns a human-readable name for a move
            return self.field_names[move]   
        def makeMove(self, move, player):
            # Plays a move. Note: this doesn't check if the move is legal!
            self.pieces[move] = player
        def undoMove(self, move):
            # Undoes a move/removes a piece of the board.
            self.makeMove(move, Empty)
    def humanPlayer(board, player):
        global move
        # Function for the human player.
        board.output()
        possible_moves = dict([(board.getMoveName(move), move) for move in board.getValidMoves()])
        move = input("Enter your move, pathetic human! (%s): " % (', '.join(sorted(possible_moves))))
        while move not in possible_moves:
            print("Silly human, '%s' is not a valid move! Try again!" % move)
            move = input("Enter your move, pathetic human! (%s): " % (', '.join(sorted(possible_moves))))
        board.makeMove(possible_moves[move], player)
    def computerPlayer(board, player):
        # Function for the computer player.
        t0 = time.time()
        board.output()
        opponent = { Player_O : Player_X, Player_X : Player_O }
        def judge(winner):
            if winner == player:
                return +1
            if winner == None:
                return 0
            return -1
        def evaluateMove(move, p=player):
            try:
                board.makeMove(move, p)
                if board.gameOver():
                    return judge(board.winner())
                outcomes = (evaluateMove(next_move, opponent[p]) for next_move in board.getValidMoves())
                if p == player:
                    #return min(outcomes)
                    min_element = 1
                    for o in outcomes:
                        if o == -1:
                            return o
                        min_element = min(o,min_element)
                    return min_element
                else:
                    #return max(outcomes)
                    max_element = -1
                    for o in outcomes:
                        if o == +1:
                            return o
                        max_element = max(o,max_element)
                    return max_element
            finally:
                board.undoMove(move)
        if move == "1":
            movef = random.choice("13")
            moveg = int(movef)
        elif move == "2":
            movef = random.choice("024")
            moveg = int(movef)
        elif move == "3":
            movef = random.choice("15")
            moveg = int(movef)
        elif move == "4":
            movef = random.choice("046")
            moveg = int(movef)
        elif move == "5":
            movef = random.choice("1357")
            moveg = int(movef)
        elif move == "6":
            movef = random.choice("248")
            moveg = int(movef)
        elif move == "7":
            movef = random.choice("37")
            moveg = int(movef)
        elif move == "8":
            movef = random.choice("468")
            moveg = int(movef)
        elif move == "9":
            movef = random.choice("57")
            moveg = int(movef)
        moves = [(move, evaluateMove(moveg)) for move in board.getValidMoves()]
        random.shuffle(moves)
        board.makeMove(moves[-1][0], player)
    def game():
        # The game function.
        b = Board()
        turn = 1
        while True:
            print("Turn: %i" % turn)
            humanPlayer(b, Player_O)
            if b.gameOver(): 
                break
            computerPlayer(b, Player_X)
            if b.gameOver(): 
                break
            turn += 1
        b.output()
        if b.winner():
            wina = 'Player "%s" wins' % b.winner()
            if wina == 'Player "O" wins':
                print("You have won, human. For now, I bid you farewell!")
            else:
                print("HA! I have won, inferior being! Come back when you are less carbon-based!")
        else:
            print('Game over')
    if __name__ == "__main__":
        game()
    GameLoop()
GameLoop() 
```

# reporting-services - 强制 SSRS 报告创建文件而不是在屏幕上呈现

> ID：14591878
> 
> 赞同：0
> 
> 时间：2013-01-29T20:43:10.717
> 
> 标签：reporting-services, ssrs-2008

对 SS 2008 使用 SSRS，有没有办法强制报告下载而不是呈现？我有一份包含数千行的报告 - 与其浪费资源将结果集返回到前端，我宁愿强迫用户下载 CSV 或 XLS 文件。

这不是基于订阅的报告 - 相反，它是通过“点击”进行的临时报告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:57:03.273

我认为使用 url 导出可能是您的解决方案。尝试以下操作：

`http://localhost/ReportServer/Pages/ReportViewer.aspx?%2fSample+Report+Solution+R+and+D%2fGroupWise+Report&rs:Format=CSV`

# matrix - 矩阵向量乘法 - 稀疏矩阵与密集矩阵

> ID：14591879
> 
> 赞同：1
> 
> 时间：2013-01-29T20:43:28.563
> 
> 标签：matrix, parallel-processing

我想在 C 中实现矩阵向量乘法。我的矩阵是 1000 * 1000^2 并且高度稀疏（小于 0.01% 的非零元素）。非零元素分散在各行之间（每行 0 到 126 个非零元素）。

我听说一般来说，使用并行处理进行稀疏矩阵向量乘法具有挑战性并且不如密集矩阵高效，因为计算与内存访问的比率很低（[这里](https://stackoverflow.com/questions/13636464/slow-sparse-matrix-vector-product-csr-using-open-mp)）。但是我无法真正理解稀疏矩阵和密集矩阵之间在并行计算方面的主要区别是什么，这使得稀疏矩阵的效率降低。密集矩阵似乎仍然存在同样的问题（如果我错了，请纠正我） .

如果让我知道在并行处理方面密集矩阵与稀疏矩阵有何不同，我们将不胜感激。谢谢

# c# - 如何在 Evil DICOM 中获得 VR=FL、VM=2 的值

> ID：14591883
> 
> 赞同：0
> 
> 时间：2013-01-29T20:43:38.737
> 
> 标签：c#, dicom, evil-dicom

我尝试使用以下方法获取 Tag 值： `var vSAD = sel.VirtualSourceAxisDistance.Data;` 我也尝试过`var vSAD = dcm.FindAll("300A030A");` 它只返回一个数字（假设有 2 个）。

然后我尝试读取元素并仅保存到另一个 dicom 文件，发现 for `VR=FL`，`VM=2`只有一个数字出现在新文件中。我怎样才能解决这个问题以获得 2 个数字？这是否意味着当我使用它时`var dcm = DICOMFileReader.Read(openFileDialog1.FileName);` 它已经返回只有一个数字？

我在 FloatingPiontSingle.cs 文件中看到：

```
public class FloatingPointSingle : AbstractElement<float?>
{
    public FloatingPointSingle() { }

    public FloatingPointSingle(Tag tag, float? data)
    {
        Tag = tag;
        Data = data;
        VR = Enums.VR.FloatingPointSingle;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:50:56.577

我没有意识到 FL VM 可能不止一个。不过，我只是查看了 DICOM 规范并意识到这是可能的。这实际上是一个简单的修复。您能否发布指向包含此类值的示例（匿名）DICOM 文件的链接，我将修补核心框架。

仅供参考：要修补自己，您需要将其更改`FloatingPointSingle`为：

```
public class FloatingPointSingle : AbstractElement<float[]>
{
    public FloatingPointSingle() { }

    public FloatingPointSingle(Tag tag, float[] data)
    {    
        Tag = tag;
        Data = data;
        VR = Enums.VR.FloatingPointSingle;
    }
} 
```

然后在`LittleEndianReader.ReadSinglePrecision()`, and`BigEndianReader.ReadSinglePrecision()`方法中，您需要更改逻辑以允许连接浮点数（无分隔符）。

# android - 安卓应用消失

> ID：14591886
> 
> 赞同：2
> 
> 时间：2013-01-29T20:43:48.460
> 
> 标签：android, google-play

我遇到了应用程序消失的问题。我有两个应用程序已上传到同一个开发者帐户。当两者都下载（同时在设备上）时，只有一个可见。当您查看系统设置下的应用程序部分时，另一个似乎已安装。我无法弄清楚为什么会这样。这是否与应用程序的发布方式有关？

# git - 应用使用 git log -p 创建的补丁

> ID：14591888
> 
> 赞同：8
> 
> 时间：2013-01-29T20:44:03.920
> 
> 标签：git, patch

我有一个补丁文件（所有这些都适用于单个文件）

```
git log -p file-of-interest.txt >patches.txt 
```

现在我想在另一个仓库中应用这些补丁，但是当我尝试

```
git am patches.txt 
```

我收到错误消息“补丁格式检测失败”。

（`git apply`也不起作用）。应用这些补丁的正确方法是什么？

编辑：我想要做的是将两次提交之间对单个文件的所有更改提取到一组补丁中，然后将这些更改应用到另一个存储库中。`git log -p from..to -- the-file`将产生差异。如果无法从 应用补丁`git log`，是否可以`format-patch`（或其他命令）仅为单个文件生成补丁？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-29T21:39:57.500

您需要将补丁分解为单独的补丁。您可以从`git log -p`输出中手动执行此操作，然后`git apply`按顺序应用它们。`git log -p`输出并不是真正用于`git`处理...

但更好的选择是使用`git format-patch`为您创建补丁文件序列（无需手动拆分），然后`git am`一次性应用它们...

```
git format-patch -o <output_directory> <from_revision>..<to_revision> -- file-of-interest.txt 
```

另请注意，`git am`需要电子邮件格式的补丁（例如由 生成的补丁`git format-patch`，这就是您收到“补丁格式检测失败”的原因）。生成的补丁程序`diff`或`git diff`应该应用程序`git apply`，而不是`git am`。但是`git format-patch`/`git am`工作流更灵活，通常更健壮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-16T14:57:58.413

如果您格式化由 git log 生成的哈希，在路径编号前加上“-”符号，那么所有补丁都可以在不同的文件中一次生成。例子：

```
git format-patch $(git log --reverse 073dd505f..fff28ff65 --pretty="%H" -- the/needed/path | awk '{print -NR, " ", $0}') 
```

这将涵盖您可以从 git log 应用的所有过滤器。它们并不总是连续的提交。例如获取与给定用户对应的补丁：

```
git format-patch $(git log --reverse --author="John Doe" --pretty="%H" -- the/needed/path | awk '{print -NR, " ", $0}') 
```

需要 --reverse 选项才能按时间顺序为您提供补丁，因为 git log 首先给出最新的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:43:37.313

git log 不会以这种方式生成补丁文件。使用 git log 找出您想要比较的提交编号并使用 git diff 代替：

```
git diff 073dd505f fff28ff65 > changes.patch 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-09T20:33:49.227

您可以使用`git diff hash1...hash2 >a.patch`仅创建 hash2 具有而 hash1 没有的提交的补丁文件（注意 3 个点`...`）。这相当于`git log -p hash1..hash2`（注意 2 个点`..`），但输出的格式是您可以实际修补文件的格式。

更常见`git diff hash1 hash2 >a.patch`的是创建一个包含 hash1 和 hash2 之间所有差异的补丁文件，包括 hash1 具有但 hash2 没有的提交。

# android - 是否可以将 GridView 用于活动？

> ID：14591891
> 
> 赞同：0
> 
> 时间：2013-01-29T20:44:14.807
> 
> 标签：android, gridview, android-activity

`gridView`我想在屏幕截图上显示活动。当我单击项目时，它会打开活动，当我单击返回时，它会`gridView`再次显示。当我单击`newItem`按钮时，它会创建新活动并将其显示在`gridView`.

这是可能的还是我需要使用其他东西，不是`gridView`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:25:01.337

当然可以，而且也很简单。

1 - 例如，创建一个名为“GridHome.java”的活动。将此活动的布局设置为仅一个 GridView。2 - 用您其他活动的预加载图像填充网格视图。例如，截取其他活动的屏幕截图并将它们存储为 PNG，然后将它们作为可绘制对象添加到您的应用程序中，最后通过客户适配器将它们添加到网格视图中。3 - 将 OnItemClickListener 设置为 gridview，以便当用户单击一个时，您可以对要打开的活动启动新的意图。对于这个，您可以将这样的方法添加到您的自定义网格适配器：

```
public String getItemActivityName(int pos) {
    return activityNames.get(pos);
} 
```

其中“activityNames”是与您在网格视图上的活动相对应的字符串数组。

从“GridHome.java”你可以对 GridVIew 执行此操作：

```
mGridView = (GridView) view.findViewById(R.id.home_grid);
    mGridView.setAdapter(mAdapter);
    mGridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {
            String activityName = mAdapter.getActivityName(position);       
            if (activityName.equals(ACTIVITY_ONE) {
                Intent intent = new Intent(getActivity(), ActivityOne.class);
                startActivity(intent);
            }               
        }           
    }); 
```

其中 ACTIVITY_ONE 是一个常量，表示您的活动的名称。

```
private static final String ACTIVITY_ONE = "Contacts";
private static final String ACTIVITY_TWO = "Groups"; 
```

依此类推。

# ember.js - 如何使用 Ember 数据访问 json 中的嵌套对象

> ID：14591892
> 
> 赞同：9
> 
> 时间：2013-01-29T20:44:18.147
> 
> 标签：ember.js, ember-data

我正在使用 Ember 数据并且很难弄清楚 get ember 以识别来自服务器的 JSON 响应中的嵌套属性。这是 ember-1.0.0-pre.4.js。

目前，我已经使用 Ember 数据修订版 11 设置了关联模型。这里

```
# School Model
App.School = DS.Model.extend
  addr:       DS.belongsTo('App.Addr')

  name:       DS.attr 'string'
  status:     DS.attr 'string'

# Address Model
App.Addr = DS.Model.extend
  school:   DS.belongsTo 'App.School'

  line1:    DS.attr 'string'
  city:     DS.attr 'string'
  state:    DS.attr 'string'
  iso:      DS.attr 'string' 
```

这是来自我的服务器的 JSON 响应：

```
{"schools":
 [{
    "_id":"51020261bbc3b8c526000007",
    "name":"Willamette",
    "status":"p",
    "addr":{
      "line1":"122 Evergreen Terrace",
      "city":"Springfield",
      "state":"IL",
      "iso":"US"
    }
   }    
  ]} 
```

我的适配器设置如下：

```
 App.Store = DS.Store.extend
      revision: 11
      adapter: DS.RESTAdapter.create({
        url: "http://localhost:8000/api"
        serializer: DS.RESTSerializer.extend
        primaryKey: (type) ->
          '_id';
      }) 
```

更新：我尝试映射 addr 属性，如下所示。还是没有骰子...

```
DS.RESTAdapter.map 'App.School', 
  addr: { embedded: 'always'} 
```

在我的模板中，我想做这样的事情......

```
 <script type="text/x-handlebars" data-template-name="school">
      <h2>School: {{name}}</h2>
      <p> Status: {{ status }}</p>
      <p> Address: {{ addr.line1 }} {{ addr.city }} </p>
    </script> 
```

名称和状态属性呈现良好。但是 addr.line1 和 addr.city 是空白的。有没有办法让 Ember 识别嵌套的 addr 属性？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-11T19:08:03.107

你有时间看吗

[Ember 数据：模型片段](https://github.com/lytics/ember-data.model-fragments)

它允许嵌套数据

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T22:26:13.600

由于您将 addr JSON 嵌入到学校 JSON 中，因此您需要在 DS.RESTAdapter 中设置映射。

```
DS.RESTAdapter.map 'App.School',
  addr: { embedded: 'always' } 
```

嵌入选项可以有两个值，1) 总是，2) 加载。

有关详细信息，请参阅 Yehuda 的答案：[https ://stackoverflow.com/a/14324532/1409279](https://stackoverflow.com/a/14324532/1409279)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T19:31:52.690

看起来 sma 的回答是正确的，我只需要先引用适配器。这点...

```
DS.RESTAdapter.map 'App.School', addr {embedded: 'always' } 
```

...给出错误“无法调用未定义的映射”。所以更新到...

```
 App.Adapter = DS.RESTAdapter.extend
      bulkCommit: false

    App.Adapter.map 'App.School', {
      addr: {embedded: 'always'}
    } 
```

现在工作！

# php - 使用 php 根据 url 显示/隐藏 div

> ID：14591893
> 
> 赞同：1
> 
> 时间：2013-01-29T20:44:23.120
> 
> 标签：php, url, html, uri, hide

我目前正在开发一个 wordpress 网站，并且在两个页面上使用相同的页面模板。页面模板文件是 single.php 。现在我有一个历史返回按钮，需要在其中一个页面上，而不是在两个页面上。我也在使用永久链接。好吧，因为我不擅长 php，所以我会请你帮助我。我已经在互联网上找到了以下代码，但我无法让它工作：

php：

```
<?php
    if (strpos($_SERVER["REQUEST_URI"], "localhost:8888/sunbook/reader-comments/") >= 0) {
        $historyback_class = "showme";
    }
    else {
        $historyback_class = "hideme";
    }
?> 
```

的HTML：

```
<div id="historyback" class='<?php echo $historyback_class; ?>'>
    <script>
        function goBack()
        {
            window.history.back()
        }
    </script>

    <input type="button" value="Back" onclick="goBack()">
</div> 
```

的CSS：

```
#historyback { margin-left: auto; margin-right: auto; width: 95%; max-width: 920px; color: #bfbfbf; font-size: 23px; font-family: 'RobotoLight', Arial, sans-serif; line-height: 28px; margin-bottom: 0px; }
.hideme { display: none; }
.showme { display: block; } 
```

我认为问题出在请求的 uri 中，因为我在任何地方看到他们都在调用 php 文件。在我的情况下这似乎是不可能的，因为模板是相同的，所以它不起作用。

# arrays - Actionscript 多维测验引擎

> ID：14591901
> 
> 赞同：0
> 
> 时间：2013-01-29T20:45:02.790
> 
> 标签：arrays, variables, multidimensional-array, actionscript-2

这是我的测验应用程序引擎，但我注意到我不能为一个问题分配多个答案而不会弄得一团糟。

```
answer[0] = ["Green", "Blue", "Red"]
answer[0] = "Green" or "Blue" "Red" 
```

我开始研究多维数组，但我无法让它工作。请帮忙。这是我的引擎：

```
answer = new Array()
answer[0] = "Green"; //THIS IS LIMITED as there are more answers like red or blue
answer[1] = "2"; //Only one answer
question = new Array();
question[0] = "What colours are in the Rainbow";
question[1] = "1+1";
index = 0;

onEnterFrame = function ()
{
    question_txt.text = question[index];
};

enter1.onRelease = function()
{
    if (answer_input.text == answer[index])
    {
        index++;
        answer_input.text = "";
    }
    else
    {
        answer_input.text = "Incorrect";
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:12:49.753

```
answer[0] = ["Green", "Blue", "Red"]; 
```

..那么条件应该是这样的：

```
enter1.onRelease = function(){

  var good=false;
  for(var i=0;i<answer[index].length;i++){
    if(answer[index][i]==answer_input.text){
      good=true;
    }
  }

  if(good){
    index++;
    answer_input.text = "";
  else{
    ...
  } 
```

# javascript - 用变量替换 $(this) 是否会产生任何性能差异

> ID：14591905
> 
> 赞同：5
> 
> 时间：2013-01-29T20:45:19.347
> 
> 标签：javascript, jquery

我有一个看起来像这样的循环：

```
$('#SomeSelectorID').find('.SomeElementsByClassName').each(function () {

    $(this).some code here;
    $(this).some other code there;
    $(this).some other code here and there;
}); 
```

如果我写在循环的顶部`var TheThis = $(this);`然后替换`$(this)`为`TheThis`性能优化还是不是真的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T20:50:32.410

这是一个明确的性能优化。您可能不会注意到一个，但这不是不这样做的理由。

您示例中的代码意味着将询问 DOM 3 次以查找`$(this)`元素，然后对其执行操作。将其缓存在变量中意味着这只发生一次。

如果您真的想看到差异，请尝试在[JSPerf](http://jsperf.com)测试中将您的原件与以下内容进行比较。

```
$('#SomeSelectorID').find('.SomeElementsByClassName').each(function () {
    var $this = $(this);
    $this.some code here;
    $this.some other code there;
    $this.some other code here and there;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T21:04:32.250

**是**的，有性能损失。我创建了一个小演示，说明使用 $(this) 比使用它的存储版本要慢。

JSFiddle 演示[在这里](http://jsfiddle.net/7894E/2/)。

**不**，我认为您不需要更改代码。在这种情况下，收益将非常小，以至于您几乎不会注意到任何差异。也许在您正在开发游戏或数据处理应用程序的另一种情况下，这可能很重要。

这是我的测试结果...

```
Testing jquery version...
1000000 iterations $(this): 0.006849ms
Testing non-jquery version...
1000000 iterations of this$: 0.001356ms 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T20:49:35.480

当然是性能优化。值不值，这才是真正的问题。如果您要重申 DOM，那么这绝对是值得的。在这种情况下，您只是在 jQuery 中包装了一个对象，因此占用空间要小得多。

话虽如此，您获得了一点性能，但在可读性、可维护性或其他通常必须牺牲以获得性能的东西方面没有损失，因此您不妨进行调整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T21:04:18.410

对此进行测试表明没有性能影响，至少在 Chrome 上是这样：

```
var start = new Date().getTime(),
    iterations = 50000;

$('#foo').find('.bar').each(function () {

    var that = $(this);

    for(var i = 0; i < iterations; i++)
      that.find('i');

});

console.log(new Date().getTime() - start); 
```

使用`$(this)`结果或多或少是一样的。

[http://jsfiddle.net/BuREW/](http://jsfiddle.net/BuREW/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T20:56:14.717

嗯，呃。

一般来说，调用任何函数都是一笔开销。调用`$()`是一个巨大的调用（比较调用时间与[Vanilla JS](http://vanilla-js.com/)相比）并且应该尽可能避免调用。

将其返回值存储在变量中总是一件好事，但它也避免了某些“陷阱”。

例如，假设您要将所有`.test`元素更改为绿色并删除该类。你可以这样做：

```
$(".test").removeClass("test");
$(".test").css({"color":"green"}); 
```

只是发现它不会将颜色变为绿色，因为`$(".test")`不再是同一件事了。

相反，如果你做了：

```
var test = $(".test");
test.removeClass("test");
test.css({"color":"green"}); 
```

有用。当然，这是一个简单的示例，因为您可以重新排列代码行并且它也可以工作，但我想在这里指出一点：p

# c++ - 防止 Doxygen 包含不需要的评论

> ID：14591907
> 
> 赞同：0
> 
> 时间：2013-01-29T20:45:25.867
> 
> 标签：c++, visual-studio, doxygen

鉴于以下评论：

```
/// /////////////////////////////////////////////////////////////////////////////
/// @class  Foo
/// @brief  Description of Foo.
/// ///////////////////////////////////////////////////////////////////////////// 
```

Doxygen 输出：

```
Describes a screen region in pixels, relative to some other region. ////////////////////////////////////////////////////////////////////////////.

///////////////////////////////////////////////////////////////////////////// 
```

如何防止它包含正斜杠？

编辑：我需要 /// 后跟一个空格，因为这是我所知道的唯一方法允许 Visual Studio 以与其他注释不同的颜色突出显示一种类型的注释（在本例中为文档）（代码注释，在我当前项目）。这使我无法简单地删除评论第一行和最后一行的空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:59:51.620

请参阅 doxygen 手册： http: [//www.doxygen.nl/manual/docblocks.html](http://www.doxygen.nl/manual/docblocks.html)

如果删除第一个 /// 和尾部斜杠之间的空格，它应该可以按预期工作。

# ios - 在越狱的 iOS 设备的应用程序中包含外部包

> ID：14591908
> 
> 赞同：1
> 
> 时间：2013-01-29T20:45:26.447
> 
> 标签：ios, jailbreak, cydia

我正在构建一个我最终想在 Cydia 上发布的应用程序，但是我找不到任何关于为越狱设备开发应用程序的好的文档。因此，首先，如果您有任何用于开发越狱 iOS 设备的良好链接，我们将不胜感激！

我目前的问题是，为了让我的应用程序正常工作，我需要 Cydia 上其他软件包的工具，比如 otool 和可能的一些脚本解释器（还没有决定哪一个）。有没有办法让我在 Cydia 中将这些依赖项与我当前的应用程序一起安装？我觉得我在下载其他应用程序之前已经看过它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:08:08.347

是的，一点没错。

构建应用程序时，应确保将其捆绑为[Debian*软件包*](http://tldp.org/HOWTO/Debian-Binary-Package-Building-HOWTO/)。一些存储库会让你只给他们一个普通的 .app 包，然后他们将使用它来构建一个 .deb 文件。但是，如果你想要这个，我建议[你自己学习构建一个 .deb 包](http://www.ibm.com/developerworks/linux/library/l-debpkg/index.html)。[来自 Saurik 的](http://www.saurik.com/id/7)更多说明在这里。

在 .deb 包中，您将拥有一个 DEBIAN 子目录，其中包含一个名为 的文件`control`：

```
DEBIAN/control
DEBIAN/postinst
DEBIAN/postrm
DEBIAN/preinst 
```

该`control`文件是 Cydia 商店应用程序描述、应用程序版本号（由商店使用）和一堆其他信息所在的位置。文件中的可选字段`control`可让您指定您的应用程序具有依赖项。如果您将另一个包列为依赖项，则该包将在 Cydia 安装您的应用程序时自动安装。像这样的东西：

```
Depends: bigbosshackertools 
```

**这一行用于指定对BigBoss 推荐工具**包的依赖项（这是一组非常大的包，因此请注意，您正在向自己的应用程序添加大型安装集）。

或者，你可以试试

```
Depends: odcctools 
```

使用 Saurik 的**Darwin CC 工具**包。

我一直在构建越狱应用程序，所以我用自制的脚本来做，但现在有一个工具可以帮助解决这个问题，叫做[iOSOpenDev](http://iosopendev.com/download/)。`control`如果您还不熟悉 .deb 包并且不想打扰（尽管我建议您学习），您可以使用它来构建您的包并编辑您的文件。

# c - 如何在 C++ 中将二维数组映射到一维数组中？（专栏）

> ID：14591909
> 
> 赞同：0
> 
> 时间：2013-01-29T20:45:26.987
> 
> 标签：c, arrays, matrix

令 W 为 2D 数组的宽度，H 为高度。使用行主要布局，我可以这样做：

```
const int W = 3, H=2;
int m[H][W] = {{1,2,3}, {4,5,6}};
int* oneD = &m[0][0];
assert(oneD[1*W + 2] == m[1][2]); // element 6, y=1, x=2 
```

但是专栏专业怎么样，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:23:58.350

在 C 内部使用行主要方法（m 在内存中连续排列为 1、2、3、4、5、6），以便您可以直接用 oneD 表示示例。然而，列优先布局不能这么简单地表示，因为 C 内部使用行优先方法。因此，要获得正确的列主要方法，只需使用以下方法

```
#include <stdio.h>
#include <iostream>
int main() {
const int W = 3, H=2;
int m[H][W] = {{1,2,3}, {4,5,6}};
int* oneD = new int[H*W];
for(int i=0; i<W; i++)
    for(int j=0; j<H; j++)
        oneD[H*i+j]=m[j][i];
for(int i=0; i<H*W; i++)
    std::cout<<oneD[i]<<" ";
return 0;
} 
```

# c++ - 如何使函数接受不使用 f(...) 的任意数量的参数？

> ID：14591910
> 
> 赞同：6
> 
> 时间：2013-01-29T20:45:28.710
> 
> 标签：c++, function, templates, c++11, variadic-templates

一段代码值一千字：

```
int main()
{
    // All of the following calls return true:
    AreEqual(1, 1);
    AreEqual(1, 1, 1);
    AreEqual(1, 1, 1, 1);
    AreEqual(1, 1, 1, 1, 1);

    // All of the following calls return false:
    AreEqual(1, 2);
    AreEqual(1, 2, 1);
    AreEqual(1, 7, 3, 1);
    AreEqual(1, 4, 1, 1, 1);    
} 
```

如何实现接受任意数量参数的函数 AreEqual()？

琐碎但乏味的灵魂是通过重载：

```
bool AreEqual(int v1, int v2);
bool AreEqual(int v1, int v2, int v3);
bool AreEqual(int v1, int v2, int v3, int v4);
...... 
```

另一个微不足道但不可行的解决方案是：

```
bool AreEqual(...); 
```

此解决方案不可行，因为调用者必须添加另一个参数（参数计数或结束标记）来指定参数的数量。

另一种方法是通过可变参数模板参数

```
template<class... Args>
bool AreEqual(Args... args)
{
    // What should be placed here ???
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T20:55:28.297

以下是如何使用模板实现它：

```
#include <iostream>
#include <iomanip>

template<class T0>
bool AreEqual(T0 t0) { return true; }

template<class T0, class T1, class... Args>
bool AreEqual(T0 t0, T1 t1, Args ... args) {
  return t0 == t1 && AreEqual(t1, args...);
}

int main () {
  std::cout << std::boolalpha;

    // All of the following calls return true:
  std::cout<< AreEqual(1, 1) << "\n";
  std::cout<< AreEqual(1, 1, 1) << "\n";
  std::cout<< AreEqual(1, 1, 1, 1) << "\n";
  std::cout<< AreEqual(1, 1, 1, 1, 1) << "\n\n";

    // All of the following calls return false:
  std::cout<< AreEqual(1, 2) << "\n";
  std::cout<< AreEqual(1, 2, 1) << "\n";
  std::cout<< AreEqual(1, 7, 3, 1) << "\n";
  std::cout<< AreEqual(1, 4, 1, 1, 1)  << "\n";
} 
```

您应该考虑这些变体是否适合您的使用：

*   使用引用而不是按值传递
*   使非可变模板采用两个参数而不是一个参数。

* * *

或者，这是一个非递归版本。可悲的是，它并没有短路。要查看非递归短路版本，请参阅其他答案。

```
template<typename T, typename... Args>
bool AreEqual(T first, Args... args)
{
  return std::min({first==args...});
} 
```

* * *

最后，这个版本的吸引力在于它缺乏微妙之处：

```
template<typename T, typename... Args>
bool AreEqual(T first, Args... args)
{
  for(auto i : {args...})
    if(first != i)
      return false;
  return true;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T21:00:08.253

由于您似乎出于某种原因排除了明智的做法，您也可以尝试使用`std::initializer_list`：

```
template<typename T>
bool AreEqual(std::initializer_list<T> list) {
    ...
} 
```

然后你会这样称呼它：

```
AreEqual({1,1,1,1,1}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T21:04:58.160

这是一个非递归版本：

```
template <typename T> using identity = T;

template<typename T, typename... Args>
bool AreEqual(T first, Args... args)
{
  bool tmp = true;
  identity<bool[]>{tmp?tmp=first==args:true ...};
  return tmp;
} 
```

启用优化后，与递归函数相比没有任何开销，只是行为可能不同，因为所有参数都与第一个参数进行比较。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T20:50:17.407

采用

```
 bool AreEqual(int v1, ...); 
```

但是，您将需要以某种方式检测整数列表的结尾。如果有一个特定的整数值不能合法地传递给函数，那么就使用它。例如，如果所有整数都是正数，则可以使用`-1`来标记结束。否则，您可以将第一个参数设为计数。

这是计数版本：

```
bool AreEqual(int count, int v1, ...)
{
     va_list vl;
     va_start(vl, count);
     for(int i = 1; i < count; ++i)
        if (va_arg(v1, int) != v1)
        {
            va_end(vl);
            return false;
        }
     va_end(vl);
     return true;
} 
```

这是结束标记版本：

```
bool AreEqual(int v1, ...)
{
     va_list vl;
     va_start(vl, count);

     do
     {
         int param = va_arg(vl, int);
         if (param == -1)
         {
             va_end(vl);
             return true;
        }
    } while (param == v1);
    va_end(vl);
    return false;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T20:58:43.753

可变参数模板需要对特化进行递归：

```
template<class A> //just two: this is trivial
bool are_equal(const A& a, const A& b)
{ return a==b; } 

template<class A, class... Others>
bool are_equal(const A& a, const A& b, const Others&... others)
{ return are_equal(a,b) && are_equal(b,others...); } 
```

本质上，每次 are_equal 嵌套时，其他人...都会缩短 1 直到 estinguish，并且该函数将绑定两个 args。

**注意**：通过将and`A`都用作类型，并且因为's first 总是与 A 匹配，这实际上使得只接受*相同*类型的所有参数（至少，可转换为 first 的类型争论）。`a``b``Others``are_equal(...)`

 *尽管我喜欢这个约束通常很有用，但可以通过使用`A`and`B`作为 and 的类型来放松限制`a`，`b` 这使得该函数可以处理每对`operator==`存在的每组类型。

```
template<class A, class B> //just two: this is trivial
bool are_equal(const A& a, const B& b)
{ return a==b; } 

template<class A, class B, class... Others>
bool are_equal(const A& a, const B& b, const Others&... others)
{ return are_equal(a,b) && are_equal(b,others...); } 
```*

# javascript - 如何检测是否使用 jQuery 1.9 支持滚动条样式？

> ID：14591912
> 
> 赞同：3
> 
> 时间：2013-01-29T20:45:37.727
> 
> 标签：javascript, jquery, css

通常我会使用：

```
$.browser.webkit 
```

因为我们都知道 webkit 是唯一可以让你设置滚动条样式的工具。然而，这已在 1.9 中被删除，以支持：

```
$.support 
```

除了我很确定您不能以这种方式检查滚动条样式支持之外，这一切都很好而且很花哨。如果可以，请告诉我，否则我将再次降级回 1.8。我想这样做的唯一原因是因为我宁愿使用浏览器可用的内置系统，而不是使用 javascript 解决方案来设置滚动条的样式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T21:13:46.780

由于KevinVB没有从他的评论中做出回答......

无法检测任何 jQuery 内置方法支持的滚动条样式。此外，您不应该只寻找 webkit 浏览器，IE 和 Opera 也以不同的方式支持它。

[Modernizr](http://modernizr.com/)是目前最完整的特征检测工具，并且有一个[用于检测滚动条样式的插件](https://gist.github.com/948808)。你可以像下面这样使用它

```
if (Modernizr.cssscrollbar) {  ... } 
```

# version-control - 如何对 Mercurial 进行 > 5GB 的提交？

> ID：14591918
> 
> 赞同：1
> 
> 时间：2013-01-29T20:45:47.227
> 
> 标签：version-control, mercurial

我正在尝试将现有项目导入 Mercurial。该项目有点超过5GB。

当我尝试执行 hg push 时，总是会收到关于缓冲区空间不足的错误。

有谁知道进行初始提交的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:27:04.587

如果您不依赖于使用 Mercurial，那么另一种可能性是使用**[boar](http://code.google.com/p/boar/)**。它不是像 Mercurial 那样的 DVCS，而是您有一个中央存储库，您可以在其中存储数据，并“签出”文件的版本 - 与 Subversion 的方式大致相同。

重要的部分是它是为存储大型二进制文件而编写的。

我没有使用过它，所以我无法评论它的工作有多好，或者它有多稳定，但它是一个可能的替代方案，可能很适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:38:35.627

假设您确实需要将这么大的提交放入 Mercurial，我猜您提交的大小主要是由于少数 biiiig 文件，而不是几百万个小文件。在这种情况下，您可以调查[Large Files Extension](https://www.mercurial-scm.org/wiki/LargefilesExtension)，它应该适合您的需要。当你添加一个大文件时，它是通过校验和而不是内容来跟踪的，因此 Mercurial 本身跟踪的内容相对较小。该扩展将为您处理版本。

但是，正如 Alex Stuckey 所提到的，您通常不应该提交诸如编译后的二进制文件（目标代码、生成的可执行文件……）之类的东西，这是您进行如此大提交的最可能原因。您最好创建一个像样的`.hgignore`文件（删除通常的可疑文件 - `*.o`, `*.pdb`, 不管...），这将有助于避免将来意外添加类似的文件。我有一个标准`.hgignore`，它作为第一次提交被放入几乎所有的存储库中，并且对我很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:24:59.090

有关为什么不鼓励在 mercurial 中存储二进制文件的简要说明，请阅读 [https://www.mercurial-scm.org/wiki/BinaryFiles](https://www.mercurial-scm.org/wiki/BinaryFiles) 和[http://kiln.stackexchange.com/questions/1074/why-is-it -bad-to-store-binary-files-in-mercurial](http://kiln.stackexchange.com/questions/1074/why-is-it-bad-to-store-binary-files-in-mercurial)

在我们的例子中，我们使用 Dropbox 处理二进制文件。它允许您保留文件的历史记录并在团队成员之间同步文件夹。如果您不需要保留文件的历史记录，您可以使用 rsync 来保持二进制文件的同步。

# php - 如何使用 PHP 验证选择？

> ID：14591921
> 
> 赞同：0
> 
> 时间：2013-01-29T20:45:58.927
> 
> 标签：php, validation, select

如何使用 php 验证日/月/年选择？我用 2-3 甚至 5-6 个选择选项验证了一些关于谁来验证选择的主题。我会知道如何验证这种选择。但是以月份为例，有 32 个选项。或者在年份选项的情况下，有 60-70 个选项。所以我对当您有这么多选择时进行选择验证的最佳方法感兴趣？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:48:03.153

对于 date 它实际上相对容易 - 你只需使用[`checkdate()`](http://www.php.net/manual/en/function.checkdate.php).

对于其他情况，您可以检查该值是否在预期范围内，例如：

```
if ($val >= min && $val <= max) 
```

或者，如果您拥有数组中的所有值

```
if (in_array($val, $array_of_valid_values)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:02:06.773

验证选择是相当简单的。

**年**

假设您有一个从 1960 年到 2013 年的连续年份范围。

您的选择 HTML 是：

```
<select name="year">
    <option value="1960">1960</option>
    ...
    <option value="2013">2013</option>
</select> 
```

所以，你知道你的年份必须落在 1960 到 2013 的范围内：

```
$year = (int) $_POST["year"]);

if ($year < 1960 || $year > 2013) {
    $validationPassed = false;
} 
```

简单到足以验证年份。

**月**

既然你知道它是哪一年，你就可以知道它是否是闰年。但是，这仅对一个月很重要，所以首先让我们验证他们选择的月份：

```
<select name="month">
    <option value="0">January</option>
    ...
    <option value="11">December</option>
</select> 
```

再一次，月份的验证很容易。我们知道它必须是 0 到 11 之间的值。

```
$month = (int) $_POST["month"];

if ($month < 0 || $month > 11) {
    $validationPassed = false;
} 
```

**天**

现在我们知道了月份和年份。要验证所选日期，我们需要检查以下标准：

1.  是闰年吗？
2.  是闰年多出一天的月份吗？（二月）。

[要成为闰年的年份](http://en.wikipedia.org/wiki/Leap_year#Algorithm)，它必须能被 400 整除，或者不能被 100 整除且能被 4 整除：

```
function isLeapYear($year) {
    if ($year % 400 == 0)
        return true;
    else if ($year % 100 == 0)
        return false;
    else if ($year % 4 == 0)
        return true;

    return false;
} 
```

现在，我们可以检查它是否是闰年。如果是闰年，那么我们知道我们需要在 2 月多留出 1 天。

我们在每个月制作一组天数：

```
$daysInMonth = array(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31); 
```

然后我们得到当月的天数：

```
$monthDays = $daysInMonth[$month]; 
```

如果是闰年，我们在该月的总天数上加一天：

```
if ($month == 1 && isLeapYear($year)) //February
    $monthDays++; 
```

最后，我们可以验证这一天

```
$day = (int) $_POST["day"];

if ($day < 0 || $day > $monthDays) {
    $validationPassed = false;
} 
```

现在，所有这些基本上都封装`checkdate()`在下面另一个答案中的函数中。因此，要使用`checkdate()`而不是上面的所有代码，您可以简单地执行以下操作：

**HTML** （注意：checkdate() 不是从零开始的，所以我们从 1 而不是 0 开始我们的日子和月份。）

```
<form action="myphp.php" method="post">
    <select name="day">
        <option value="1">1</option>
        ...
        <option value="31">31</option>
    </select>

    <select name="month">
        <option value="1">1</option>
        ...
        <option value="12">12</option>
    </select>

    <select name="year">
        <option value="1960">1960</option>
        ...
        <option value="2013">2013</option>
    </select>
</form> 
```

**PHP**

```
$day = (int) $_POST["day"];
$month = (int) $_POST["month"];
$year = (int) $_POST["year"];

$validationPassed = checkdate($month, $day, $year); 
```

# java - 地形生成和纹理

> ID：14591922
> 
> 赞同：0
> 
> 时间：2013-01-29T20:46:02.843
> 
> 标签：java, opengl, textures, terrain

我需要纹理我生成的地形，我使用下面的代码：

`

```
 private final int SIZE = 17;

float[][] heightmap = new float[SIZE*2][SIZE];

private final int MAX_HEIGHT = 12;
private final float[] MAX_COLOR_HEIGHTS = new float[] {
    (float) (MAX_HEIGHT/5.0 * 1.0),
    (float) (MAX_HEIGHT/5.0 * 2.0),
    (float) (MAX_HEIGHT/5.0 * 3.0),
    (float) (MAX_HEIGHT/5.0 * 4.0),
    (float) (MAX_HEIGHT/5.0 * 5.0)
};

float[][] noisemap = new float[SIZE*2][SIZE];
private int TerrainNumVertices = (SIZE*2-2)*(SIZE-2)*6*2;
Point4 TerrainPoints[] = new Point4[TerrainNumVertices];
Color4 TerrainColors[] = new Color4[TerrainNumVertices];
Point2 TerrainTex[] = new Point2[TerrainNumVertices];
FloatBuffer TerrainColorsBuf;
FloatBuffer TerrainPointsBuf;
FloatBuffer TerrainTexBuf;

IntBuffer indicesBuf;

private void buildMesh() {
    int index = 0;
    float height = 0.0f;

    for (int z = 0; z < SIZE*2 - 2; z++) {
        for (int x = 0; x < SIZE - 2; x++) {

            ////////////
            //TOP line
            height = heightmap[z+1][x+0];
            TerrainColors[index] = colorForHeight(height);
            TerrainPoints[index++] = new Point4(x+0, height, z+1, 1.0f);
            height = heightmap[z+1][x+1];
            TerrainColors[index] = colorForHeight(height);
            TerrainPoints[index++] = new Point4(x+1, height, z+1, 1.0f);

            //RIGHT line
            height = heightmap[z+0][x+1];
            TerrainColors[index] = colorForHeight(height);
            TerrainPoints[index++] = new Point4(x+1, height, z+0, 1.0f);
            height = heightmap[z+1][x+1];
            TerrainColors[index] = colorForHeight(height);
            TerrainPoints[index++] = new Point4(x+1, height, z+1, 1.0f);

            //diagonal
            height = heightmap[z+1][x+0];
            TerrainColors[index] = colorForHeight(height);
            TerrainPoints[index++] = new Point4(x+0, height, z+1, 1.0f);
            height = heightmap[z+0][x+1];
            TerrainColors[index] = colorForHeight(height);
            TerrainPoints[index++] = new Point4(x+1, height, z+0, 1.0f);

            ////////////
            //bottom line
            height = heightmap[z+0][x+0];
            TerrainColors[index] = colorForHeight(height);
            TerrainPoints[index++] = new Point4(x+0, height, z+0, 1.0f);
            height = heightmap[z+0][x+1];
            TerrainColors[index] = colorForHeight(height);
            TerrainPoints[index++] = new Point4(x+1, height, z+0, 1.0f);

            //left line
            height = heightmap[z+0][x+0];
            TerrainColors[index] = colorForHeight(height);
            TerrainPoints[index++] = new Point4(x+0, height, z+0, 1.0f);
            height = heightmap[z+1][x+0];
            TerrainColors[index] = colorForHeight(height);
            TerrainPoints[index++] = new Point4(x+0, height, z+1, 1.0f);

            //diagonal
            height = heightmap[z+1][x+0];
            TerrainColors[index] = colorForHeight(height);
            TerrainPoints[index++] = new Point4(x+0, height, z+1, 1.0f);
            height = heightmap[z+0][x+1];
            TerrainColors[index] = colorForHeight(height);
            TerrainPoints[index++] = new Point4(x+1, height, z+0, 1.0f);

        }
    }

    TerrainPointsBuf = VectorMath.toBuffer(TerrainPoints);
    TerrainColorsBuf = VectorMath.toBuffer(TerrainColors);
}

private Color4 colorForHeight(float height) {
    Color4 color;
    if (height < MAX_COLOR_HEIGHTS[0]) {
        color = new Color4(0.0f, 0.0f, 0.580392157f, 1.0f); // deep sea
    } else if (height >= MAX_COLOR_HEIGHTS[0] && height < MAX_COLOR_HEIGHTS[1]) {
        color = new Color4(0.0f, 0.580392157f, 1.0f, 1.0f); // sea
    } else if (height >= MAX_COLOR_HEIGHTS[1] && height < MAX_COLOR_HEIGHTS[2]) {
        color = new Color4(0.0f, 0.580392157f, 0.0f, 1.0f); // green
    } else if (height >= MAX_COLOR_HEIGHTS[2] && height < MAX_COLOR_HEIGHTS[3]) {
        color = new Color4(0.870588235f, 0.796078431f, 0.470588235f, 1.0f); // heights
    } else {
        color = new Color4(1.0f, 1.0f, 1.0f, 1.0f); // snow
    }
    return color;
}

private void perlinNoise() {
    //clear heightmap
    for (int z=0; z<SIZE*2; z++) {
        for (int x=0; x<SIZE; x++) {
            heightmap[z][x] = 0f;
        }
    }

    //start of Perlin Noise
    int iterations = (int)Math.round(Math.log(SIZE)/Math.log(2));
    int tile = 0;

    for (int k = 0; k<iterations; k++) {
        tile = SIZE/(int)(Math.pow(2, k));

        //insert noise with wavelength 'tile' and amplitude MAX_HEIGHT/Math.pow(2, k)
        for (int z=0; z<SIZE*2; z+=tile) {
            for (int x=0; x<SIZE; x+=tile) {
                if (x == 0) {
                    noisemap[z][x] = 0.0f;
                } else {
                    noisemap[z][x] = (float)(Math.random()*MAX_HEIGHT/Math.pow(2, k));
                }
            }
        }

        //interpolate values between the random points
        for (int z=0; z<SIZE*2-tile; z+=tile) {
            for (int x=0; x<SIZE-tile; x+=tile) {

                /* bilinear interpolation */
                for (int i=0; i<tile; i++) {
                    for (int j=0; j<tile; j++) {
                        float dx = (float)j/(float)tile;
                        float dz = (float)i/(float)tile;

                        heightmap[z+i][x+j] +=  noisemap[z][x]*(1-dx)*(1-dz) +
                                            noisemap[z][x+tile]*(dx)*(1-dz) +
                                            noisemap[z+tile][x]*(1-dx)*(dz) +
                                            noisemap[z+tile][x+tile]*(dx)*(dz);

                    }
                }

            }
        }

    }
} 
```

非常抱歉语法，但需要使用我的讲师提供的框架。问题是我不知道如何正确地纹理它，因为它只为每个 TILE 1 三角形绘制（底部，左侧线不想显示，不知道为什么）。

# python - 为什么可以为模块重新分配价值？

> ID：14591925
> 
> 赞同：-1
> 
> 时间：2013-01-29T20:46:12.637
> 
> 标签：python, module, python-2.7

在 Python 中，当您无法为函数重新分配任何东西时，为什么您可以为模块重新分配值？

是因为模块是预先编写的脚本，而您在执行这样的命令时只是在编辑这些脚本？

```
>>> import math
>>> math.log = 1
>>> math.log
1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:07:57.703

在 Python 中（不像，例如 Java 等）`import module`是一个命令而不是一个声明，它大致相当于：

```
math = __import__('math', globals(), locals(), [], -1) 
```

因此，在这里我们加载一个模块`math`并将对它的引用分配给变量`math`。现在，由于模块也是对象，您可以重新分配它们中的任何属性（您不是通过它来编辑脚本）。不用说，这是一件非常不推荐的事情。

# java - 如何将本地文件与 Amazon s3 文件进行比较

> ID：14591926
> 
> 赞同：0
> 
> 时间：2013-01-29T20:46:22.877
> 
> 标签：java, hash, amazon-s3, compare, updating

我正在开发一个桌面 Java 应用程序。它需要检查我的 S3 服务器上的特定文件。

我不想下载整个文件来比较，我需要找出服务器中的文件是否比本地文件更新，然后下载并替换。

我不确定如何检查是否有更新的可用部分。

我听说过散列作为一种方法，但我对如何在两个方面（本地和通过 S3）实际做到这一点几乎没有经验

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:54:57.667

获取远程文件的哈希值： [如何在 Amazon 的 S3 上获取文件的 md5sum](https://stackoverflow.com/questions/1775816/how-to-get-the-md5sum-of-a-file-on-amazons-s3)

获取本地文件的哈希值： [Getting a File's MD5 Checksum in Java](https://stackoverflow.com/questions/304268/getting-a-files-md5-checksum-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T23:07:28.587

如果您也是最初在 S3 上创建文件的人，您可以在第一次`ObjectMetadata`使用 MD5（例如`meta.setUserMetadata(mymap)`）存储自定义`putObject()`，然后使用`s3.getObjectMetadata()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-14T22:21:07.343

以编程方式比较大小 < 5 GB 的文件的 E-Tag。

计算本地文件的哈希：

```
String hash = DigestUtils.md5Hex(new FileInputStream(path)); 
```

获取 S3 对象的 Etag：[获取](https://stackoverflow.com/questions/1775816/how-to-get-the-md5sum-of-a-file-on-amazons-s3)S3 对象的 Etag已被 @dnault 提及

如果您按照上面的说明计算哈希，那么对于文件大小小于 5 GB 的所有情况，它应该是相同的。

如果文件大小大于 5 GB：[Multi-part MD5](https://stackoverflow.com/questions/12186993/what-is-the-algorithm-to-compute-the-amazon-s3-etag-for-a-file-larger-than-5gb?noredirect=1&lq=1)

# javascript - 如何使用 Kendo Grid 组合行模板和详细信息模板

> ID：14591927
> 
> 赞同：2
> 
> 时间：2013-01-29T20:46:27.483
> 
> 标签：javascript, asp.net-mvc, kendo-ui, kendo-grid

我有一个剑道网格，我正在使用行和备用行模板。我想添加一个详细模板。如何格式化行和备用行模板的第一个单元格以使详细信息模板正常工作？我看不到图标，并且点击事件没有被触发。任何建议，将不胜感激。

我有这个 jsFiddle 项目：http: [//jsfiddle.net/rodneyhickman/ztk9r/4/](http://jsfiddle.net/rodneyhickman/ztk9r/4/)

我的标记：

```
<div class="assignment-portal-gird-module">
<div class="row-templates">
    <script id="rowTemplate" type="text/x-kendo-tmpl">
        <tr class="assignment-table-row1"> 
            <td class="k-hierarchy-cell"></td>
            <td class="assignment-table-centered-column"><b>${ Points }</b></td>
            <td class="assignment-table-contact-name-column" ><b><a href="/assignmentportal/providercontact/${ KlasID }">${ ContactName }</a></b>&nbsp;&nbsp;<a href="mailto:${ Email }"><img src="/content/images/toolbox/icons/email-16x16.gif" atl='email image'/></a></td>
            <td>${ Title }</td>    
            <td><a href="/Modules/DataEntry/Provider/Edit.aspx?id=${ ProviderId }">${ ProviderName }</a></td>
            <td>${ Phone }</td>
            <td class="assignment-table-centered-column"><b>${ LastNoteDate }</b></td>
            <td class="assignment-table-centered-column"><b>${ Touches }</b></td>
            <td>${ TimeZone }</td>
        </tr>
    </script>
    <script id="altRowTemplate" type="text/x-kendo-tmpl">

        <tr class="assignment-table-row1-alt"> 
            <td class="k-hierarchy-cell"></td>
            <td class="assignment-table-centered-column"><b>${ Points }</b></td>
            <td class="assignment-table-contact-name-column"><b><a href="/assignmentportal/providercontact/${ KlasID }">${ ContactName }</a></b>&nbsp;&nbsp;<a href="mailto:${ Email }"><img src="/content/images/toolbox/icons/email-16x16.gif" atl='email image';/></a></td>
            <td>${Title }</td>    
            <td><a href="/Modules/DataEntry/Provider/Edit.aspx?id=${ ProviderId }">${ ProviderName }</a></td>
            <td>${ Phone }</td>
            <td class="assignment-table-centered-column"><b>${ LastNoteDate }</b></td>
            <td class="assignment-table-centered-column"><b>${ Touches }</b></td>
            <td>${ TimeZone }</td>
        </tr>
    </script>
        <script type="text/x-kendo-template" id="template">
            <div class="tabstrip">
                <ul>
                    <li class="k-state-active">
                       Notes
                    </li>
                    <li>
                        Exchange
                    </li>
                    <li>
                        Assignments
                    </li>
                </ul>
                <div>
                    <div class="notes-details" >
                   Notes goes here     
                   </div>
                </div>
                <div>
                    <div class='exchange-details'>
                       Exchange goes here
                    </div>
                </div>
                  <div>
                    <div class='assignments-details'>
                       Assignments goes here
                    </div>
                </div>
            </div>

        </script>
</div>
<div id="gridAssignments"></div> 
```

我的脚本：

```
jQuery('#gridAssignments').kendoGrid({
pageable: true,
scrollable: false,
rowTemplate: kendo.template($('#rowTemplate').html()),
altRowTemplate: kendo.template($('#altRowTemplate').html()),
detailTemplate: kendo.template($("#template").html()),
detailInit: detailInit,
dataBound: function() {
                        this.expandRow(this.tbody.find("tr.k-master-row").first());
                    },
sortable: true,
dataSource: {
    data: [{
        Points: 888,
        KlasID: 14926,
        ContactName: 'John Johnson',
        Email: "test@test.com",
        Title: 'Chief Infomration Officer',
        ProviderName: 'West Coast Medical Center',
        ProviderId: 1143,
        Phone: '801-555-1234',
        TimeZone: '(E) 8:32 AM',
        LastNoteDate: '1/25/2013',
        LastNote: 'Sent Email - Requested to setup a call for 8:30 am Friday Feb 1st.',
        HasEval: 'Yes',
        Touches: 2,
        Sessions: '1',
        LastSessionDate: '1/23/2013  5:20 PM'
    }, {
        Points: 5,
        KlasID: 14926,
        ContactName: 'Jane Johnson',
        Email: "test@test.com",
        Title: 'Chief Infomration Officer',
        ProviderName: 'East Coast Medical Center',
        ProviderId: 1143,
        Phone: '801-555-4321',
        TimeZone: '(E) 8:32 AM',
        LastNoteDate: '1/15/2013',
        LastNote: 'Sent Email - Requested to setup a call for 8:30 am Friday Feb 1st. blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah ',
        HasEval: 'No',
        Touches: 3,
        Sessions: '1',
        LastSessionDate: '1/23/2013 8:45 AM'
    }, {
        Points: 18,
        KlasID: 14926,
        ContactName: 'John Doe',
        Email: "test@test.com",
        Title: 'Chief Infomration Officer',
        ProviderName: 'Florida Medical Center',
        ProviderId: 1143,
        Phone: '801-333-4321',
        TimeZone: '(E) 8:32 AM',
        LastNoteDate: '1/1/2013',
        LastNote: 'Sent Email - Requested to setup a call for Blah blah blah blah blah',
        HasEval: 'Yes',
        Touches: 4,
        Sessions: '1',
        LastSessionDate: '1/25/2013 12:04 PM'
    }],
    pageSize: 10
},
columns: [{
    width: 45,
    title: "P",
    field: "Points"
}, {

    title: "Contact",
    field: "ProviderName"
}, {

    title: "Title",
    field: "Title"
}, {
    width: 300,
    title: "Provider",
    field: "ProviderName"
}, {
    width: 120,
    title: "Phone",
    field: "Phone"
}, {
    title: "Last Note",
    field: "LastNoteDate"
}, {
    title: "Touches",
    field: "Touches"
}, {
    width: 120,
    title: "Time Zone",
    field: "TimeZone"
}]

});

 function detailInit(e) {
                var detailRow = e.detailRow;

                detailRow.find(".tabstrip").kendoTabStrip({
                    animation: {
                        open: { effects: "fadeIn" }
                    }
                });

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T22:38:31.657

添加图标正在替换：

```
 <td class="k-hierarchy-cell"></td> 
```

经过：

```
 <td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td> 
```

**编辑**：

为了避免单击询问详细信息时出现错误，您应该`tr`在类中添加如下内容`k-master-row`：

```
<tr class="assignment-table-row1 k-master-row"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-12T12:58:59.693

由于 kendo ui 版本 2016.3 使用类“ki-expand”而不是“k-plus”。

```
<td class="k-hierarchy-cell"><a class="k-icon k-i-expand" href="\\#"></a></td> 
```

# python - django ExtractionError at /

> ID：14591932
> 
> 赞同：0
> 
> 时间：2013-01-29T20:46:54.580
> 
> 标签：python, django, apache, mod-wsgi

我是 Web 应用程序开发的新手。启动我的应用程序后，我遇到了 django 问题。我收到以下错误：

```
ExtractionError at /
Can't extract file(s) to egg cache

The following error occurred while trying to extract file(s) to the Python egg
cache:

  [Errno 13] Permission denied: '/usr/local/pylons'

The Python egg cache directory is currently set to:

  /usr/local/pylons/python-eggs 
```

在遵循其他一些答案后，我补充说：

```
os.environ['PYTHON_EGG_CACHE'] = '/usr/local/pylons/python-eggs' 
```

到我的网站 wsgi 文件。还是一样的错误。我是 apache 新手，我不知道如何“授予 apache 用户权限”。我该怎么做？我在 OSX 山狮上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:52:47.720

看起来 apache 正在为不同的网站提供服务。尝试通过使用`python manage.py runserver`然后将浏览器指向 来启动 django 开发服务器`localhost:8000`，这是您的 django 站点应该在开发服务器上的位置。

# php - 在哪个字符编码中字节 0 不为空？

> ID：14591933
> 
> 赞同：0
> 
> 时间：2013-01-29T20:46:57.490
> 
> 标签：php, character-encoding

是否存在任何字符编码，其中 0 字节不编码 null，而是编码更可连接的字符？我的 PHP 给了我这个编码列表：

```
 [0] => pass
    [1] => auto
    [2] => wchar
    [3] => byte2be
    [4] => byte2le
    [5] => byte4be
    [6] => byte4le
    [7] => BASE64
    [8] => UUENCODE
    [9] => HTML-ENTITIES
    [10] => Quoted-Printable
    [11] => 7bit
    [12] => 8bit
    [13] => UCS-4
    [14] => UCS-4BE
    [15] => UCS-4LE
    [16] => UCS-2
    [17] => UCS-2BE
    [18] => UCS-2LE
    [19] => UTF-32
    [20] => UTF-32BE
    [21] => UTF-32LE
    [22] => UTF-16
    [23] => UTF-16BE
    [24] => UTF-16LE
    [25] => UTF-8
    [26] => UTF-7
    [27] => UTF7-IMAP
    [28] => ASCII
    [29] => EUC-JP
    [30] => SJIS
    [31] => eucJP-win
    [32] => SJIS-win
    [33] => CP932
    [34] => CP51932
    [35] => JIS
    [36] => ISO-2022-JP
    [37] => ISO-2022-JP-MS
    [38] => Windows-1252
    [39] => Windows-1254
    [40] => ISO-8859-1
    [41] => ISO-8859-2
    [42] => ISO-8859-3
    [43] => ISO-8859-4
    [44] => ISO-8859-5
    [45] => ISO-8859-6
    [46] => ISO-8859-7
    [47] => ISO-8859-8
    [48] => ISO-8859-9
    [49] => ISO-8859-10
    [50] => ISO-8859-13
    [51] => ISO-8859-14
    [52] => ISO-8859-15
    [53] => ISO-8859-16
    [54] => EUC-CN
    [55] => CP936
    [56] => HZ
    [57] => EUC-TW
    [58] => BIG-5
    [59] => EUC-KR
    [60] => UHC
    [61] => ISO-2022-KR
    [62] => Windows-1251
    [63] => CP866
    [64] => KOI8-R
    [65] => KOI8-U
    [66] => ArmSCII-8
    [67] => CP850
    [68] => JIS-ms
    [69] => CP50220
    [70] => CP50220raw
    [71] => CP50221
    [72] => CP50222 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:56:59.273

任何直接的多字节编码（例如所有形式的 UTF-16）都将每个代码点表示为两个字节，其中一个字节为零。因此，例如 U+0020 将表示为 0x00 0x20（大端）或 0x20 0x00（小端）。类似地，任何是 256 的偶数乘积的字符都将具有 0x00 的 LSB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:50:55.923

经典地，在 C 中，零字节用于标记字符串的结尾。在 PHP 中，字符串实际上可以包含零字节，但据我所知，没有将零字节编码为可打印字符的字符编码。

# php - 询问您是否确定要提交？JavaScript？

> ID：14591937
> 
> 赞同：1
> 
> 时间：2013-01-29T20:47:08.230
> 
> 标签：php, javascript, forms, submit, alert

我目前有这个。

```
 //other stuff up here - not important
    echo "<td><form action='redeem.php' method='post' id='form'><input type='hidden' name='redeem' value='1' /><input type='hidden' name='id' value='" . $id . "' /><input type='submit' name='Redeem' value='Redeem'></form></td>";
    } else {
    echo "<td><form action='redeem.php' method='post' id='form'><input type='hidden' name='redeem' value='0' /><input type='hidden' name='id' value='" . $id . "' /><input type='submit' name='Un-Redeem' value='Un-Redeem'></form></td>";
//other stuff down here - not important 
```

我想更改它，以便当您按下：
a)“兑换”提交按钮时，它会提醒您说：“您确定要兑换吗？”
b) 'Un-Redeem' 提交按钮，它会提醒您说：“您确定要取消赎回吗？”

我已经尝试了其中的一些，包括提交时的 ONCLICK，但没有一个起作用。我相信这是因为我在 ECHO 中有它，我不得不删除阻止该功能发生的 (") 引号。

有人知道我可以做到的另一种方式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T20:48:42.593

您可以使用 Javascript 确认功能。

```
if(confirm("Are you sure you want to Redeem?")) {
    // do something
} else {
    // do something
} 
```

您也可以通过将以下代码添加到表单中来在表单提交上执行此操作：

```
onsubmit="return confirm('Are you sure you want to Redeem?');" 
```

只有当用户单击“确定”时，表单才会提交。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T20:54:05.370

这是解决方案：

```
 //other stuff up here - not important
        echo "<td><form action='redeem.php' method='post' id='form'><input type='hidden' name='redeem' value='1' /><input type='hidden' name='id' value='" . $id . "' />
              <input type='submit' name='Redeem' value='Redeem' onclick="return confirm('Are you sure you want to Redeem?')"></form></td>";
        } else {
        echo "<td><form action='redeem.php' method='post' id='form'><input type='hidden' name='redeem' value='0' /><input type='hidden' name='id' value='" . $id . "' />
              <input type='submit' name='Un-Redeem' value='Un-Redeem' onclick="return confirm('Are you sure you want to Un-Redeem?')" ></form></td>";
    //other stuff down here - not important 
```

**编辑：** 在这里添加了转义字符：

```
 //other stuff up here - not important
        echo "<td><form action='redeem.php' method='post' id='form'><input type='hidden' name='redeem' value='1' /><input type='hidden' name='id' value='" . $id . "' />
              <input type='submit' name='Redeem' value='Redeem' onclick=\"return confirm('Are you sure you want to Redeem?')\"></form></td>";
        } else {
        echo "<td><form action='redeem.php' method='post' id='form'><input type='hidden' name='redeem' value='0' /><input type='hidden' name='id' value='" . $id . "' />
              <input type='submit' name='Un-Redeem' value='Un-Redeem' onclick=\"return confirm('Are you sure you want to Un-Redeem?')\" ></form></td>";
    //other stuff down here - not important 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:54:57.230

使用 javascript 确认功能。如果确认返回 false，表单将不会提交。

```
<form action='redeem.php' method='post' id='form' onSubmit="return confirm('Are you sure you want to redeem')"> 
```

如果您想在用户单击取消时执行其他操作，那么您需要创建一个自定义函数：

```
function my_confirm() {
    if( confirm("Are you sure you want to redeem?") ) {
        return true;
    }
    else {
        // do something 
        return false;
    }
} 
```

在表单标签上：

```
onSubmit="return my_confirm()" 
```

# opengl - OpenGL / glGetUniformLocation() 的奇怪行为

> ID：14591948
> 
> 赞同：1
> 
> 时间：2013-01-29T20:47:45.030
> 
> 标签：opengl, glsl, shader, fragment-shader, vertex-shader

我只想做基础知识......从我的应用程序中提供着色器信息。我尝试了一切，但没有任何效果，因为我永远无法弄清楚 OpenGL 中什么是新的，什么是不推荐使用的

**顶点着色器：**

```
#version 420 core

layout(location = 0) in vec2 p_rect;
layout(location = 1) in vec2 p_clipRect;

out vec2 texturePoint;

void main()
{
    gl_Position = vec4( p_rect, 0.0, 1.0 );
    texturePoint = p_clipRect;
} 
```

**片段着色器：**

```
#version 420 core

uniform sampler2D p_texture;

in vec2 texturePoint;

out vec4 outColor;

void main()
{
    outColor = texture( p_texture, texturePoint );
} 
```

**OpenGL代码：**

```
glActiveTexture( GL_TEXTURE0 );
glBindTexture( GL_TEXTURE_2D, texture );
GLint texture_id( glGetUniformLocation( programId, "p_texture" ) );
glUniform1i( texture_id, texture );

// Element
static const GLushort element[] = { 0, 1, 2, 3 };
GLuint element_id;
glGenBuffers( 1, &element_id );
glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, element_id );
glBufferData( GL_ELEMENT_ARRAY_BUFFER, sizeof( element ), element, GL_STATIC_DRAW );

// Vertex data
struct VertexInput
{
    GLfloat m_rect[ 8 ];
    GLfloat m_clipRect[ 8 ];
}
vertex;

// fill it up with data
GLfloat vertex_data[] =
{
    -1.0f, -1.0f,
    -1.0f,  1.0f,
    1.0f, -1.0f,
    1.0f,  1.0f,
    0.0f, 0.0f,
    0.0f, 1.0f,
    1.0f, 0.0f,
    1.0f, 1.0f,
};

memcpy( &vertex, &vertex_data, sizeof( vertex_data ) );

// VBO
GLuint vertex_id;
glGenBuffers( 1, &vertex_id );
glBindBuffer( GL_ARRAY_BUFFER, vertex_id );
glBufferData( GL_ARRAY_BUFFER, sizeof(vertex), &vertex, GL_STATIC_DRAW );

glEnableVertexAttribArray( 0 );
glEnableVertexAttribArray( 1 );
glVertexAttribPointer( 0, 2, GL_FLOAT, GL_TRUE, 0, (void*)offsetof( VertexInput, m_rect ) );
glVertexAttribPointer( 1, 2, GL_FLOAT, GL_TRUE, 0, (void*)offsetof( VertexInput, m_clipRect ) );

// render the VBO
glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, element_id );
glDrawElements( GL_TRIANGLE_STRIP, 4, GL_UNSIGNED_SHORT, (void*)0 );

// clean it up ;-)
glDisableVertexAttribArray( 0 );
glDisableVertexAttribArray( 1 ); 
```

**奇怪的事：**

**案例1：**如果`programId`是实际的程序ID，我得到texture_id = 0，但没有信息进入着色器......没有任何反应......

**案例 2：**如果`programId`不是实际的程序 id，我得到 texture_id = -1 但我的代码完美地渲染了图像（磨损）。

问题是......我知道它仍然是错误的。我需要能够向着色器提供信息然后渲染...我真的不知道案例 2 是如何工作的，但事实是我需要向着色器提供更多信息，如其他纹理、MVP矩阵等儿子。我做不到。怎么了？如何给出我的程序 ID 的正确值并在着色器中获取此信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:53:01.690

```
glActiveTexture( GL_TEXTURE0 );
...
glUniform1i( texture_id, texture ); 
```

试试这个：

```
glActiveTexture( GL_TEXTURE0 + 0 );
...
glUniform1i( texture_id, 0 ); 
```

采样器制服应分配所需纹理单元的索引，而不是纹理对象 ID。

# java - 地图视图顶部的活动

> ID：14591962
> 
> 赞同：2
> 
> 时间：2013-01-29T20:48:33.790
> 
> 标签：java, android, android-activity, android-mapview

我在 a`Activity`的顶部有一个仅覆盖顶部的一小部分以显示其他数据。当在地图上触摸`MapView`a 时会调用此 Activity 。`Polygon`我面临的问题是，当第二个活动在视图中时，第一个活动被禁用。有没有办法在显示第二个活动时仍然与第一个活动进行交互？或者有没有更好的方法来完成我想要实现的目标，即在`MapView`. 谢谢

# c - 多少 mxRealloc 可以影响 C-Mex matlab 代码？

> ID：14591963
> 
> 赞同：1
> 
> 时间：2013-01-29T20:48:34.640
> 
> 标签：c, matlab, data-mining, cluster-analysis, dbscan

这些天来，我一直在研究 C-mex 代码，以提高 DBSCAN matlab 代码的速度。事实上，此刻我在 C-mex 上完成了 DBSCAN。但相反，我的测试数据是 3 x 14414 矩阵，它需要更多时间（matlab 中为 14.64 秒，C-Mex 中为 53.39 秒）。我认为这是由于`mxRealloc`在我的代码的几个部分中使用了函数。如果有人给我一些建议以获得更好的结果，那就太好了。

这是代码 DBSCAN1.c：

[https://www.dropbox.com/sh/mxn757a2qmniy06/PmromUQCbO](https://www.dropbox.com/sh/mxn757a2qmniy06/PmromUQCbO)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:54:54.223

在循环的每次迭代中使用`mxRealloc`确实是性能杀手。您可以改用`vector`或类似的类。在您的距离函数中根本不需要动态分配。

如果您的目标不是将 DBSCAN 实现为 mex，而是加快速度，我将为您提供不同的解决方案。我不知道您使用的是哪个 Matlab 实现，但您不会通过以相同方式将其重写为 C 来更快地实现简单的 n^2 实现。大部分时间都花在计算最近的邻居上，这在 C 中不会比在 Matlab 中更快。DBSCAN 可以通过使用索引结构在 nlogn 时间内运行以获取最近的邻居。

对于我的应用程序，我正在使用dbscan 的[这种](http://chemometria.us.edu.pl/index.php?goto=downloads)实现，但我已将最近邻居的计算更改为使用 KD-tree（[可在此处获得](http://www.mathworks.com/matlabcentral/fileexchange/21512-kd-tree-for-matlab)）。加速对于我的应用程序来说已经足够了，不需要重新实现。我认为无论你写得多么好，这都会比任何 n^2 c 实现更快。

# c# - 安全测试混合 Web 和桌面应用程序

> ID：14591965
> 
> 赞同：1
> 
> 时间：2013-01-29T20:48:37.400
> 
> 标签：c#, java, web-applications, desktop

设置上下文：我们有一个内部应用程序，最初是一个 Web 应用程序，但现在使用 Windows 桌面模型而不是浏览器进行渲染。因此，Web 应用程序不是在浏览器中打开，而是在用 C# 编码的无模式窗口中打开。用户必须安装一个小 exe 来设置无模式窗口。

您将单击自定义构建的工具栏（而不是文件、编辑、查看选项等），这些工具栏将启动无模式窗口并触发 HTML 请求。响应将在无模式窗口中呈现。

问题：当它是一个纯浏览器应用程序时，我们曾经使用 Appscan 进行安全测试。我们还使用渗透测试仪。但是，Appscan 不适用于无模式 Windows 模型。它只设法捕获第一个请求（通常是登录请求）。您是否碰巧知道可以安全测试此类应用程序的任何工具或测试框架/模型？

我确实尝试查看相关链接，但它们似乎都指向纯粹的基于浏览器的 Web 测试。像这样的：[Web应用安全测试](https://stackoverflow.com/questions/1688626/web-application-security-testing)

提前致谢！

编辑：一个例子 - 看看[http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/showModelessDialog.htm](http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/showModelessDialog.htm) 如何让 appscan 扫描无模式窗口中的请求响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:58:02.197

除了登录，还需要测试什么（为了安全）？您实际上创建了一个哑终端，它将命令传递到服务器并呈现来自该服务器的响应。

如果你真的需要一些自动化测试器来工作，那么为你的 EXE (dumbtermina.exe /test) 创建一个命令行开关，它使用简单的按钮来呈现一个常规的窗口窗体，这些按钮模拟所有的菜单和其他命令。

# ios - 如何将 Accessoryview 设置为静态 UITableViewCell？

> ID：14591970
> 
> 赞同：7
> 
> 时间：2013-01-29T20:49:02.687
> 
> 标签：ios, uitableview, accessoryview

我创建了一个带有 UITableView 和**静态**UITableViewCells 的UITableViewController。

如何将附件视图更改为 UIImageView 中的自定义图像？

我通常知道如何更改附件视图：

```
UIImage *accessor = [UIImage imageNamed:@"imageName"];
[somecell setAccessoryView:[[UIImageView alloc] initWithImage: accessor]]; 
```

**解决方案：**

为每个应该具有自定义附件视图的 UITableViewCell 创建一个 IBOutlet，并将 IBOutlet 连接到情节提要中的 UITableViewCell。之后，您可以像上面一样设置附件视图。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-04-07T05:54:41.410

我找到了一个更好的解决方案：

1.  将视图（例如 UISwitch 的实例）拖到故事板中的 UITableViewController 中

    ![在此处输入图像描述](../Images/8d13fabc2677874f74a25501ec1cec7e.png)

2.  选择要在其上添加自定义附件视图的单元格。然后打开 Connections 检查器，将`accessoryView`in 部分拖到`Outlets`您在步骤 1 中创建的视图中。

    ![在此处输入图像描述](../Images/95df6d585289e6745073815395b8a4de.png)

3.  现在运行应用程序，看到一个自定义附件视图出现在**静态**UITableViewCell 中。当然，您可以在 UISwitch 和控制器之间创建另一个 IBOutlet 以便您可以获取它的引用，或者创建一个 IBAction 以在用户更改 UISwitch 的值时接收操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:07:50.570

在情节提要中添加自定义`UIButton`并设置您想要的图像

# java - struts 在哪里寻找配置文件？

> ID：14591972
> 
> 赞同：2
> 
> 时间：2013-01-29T20:49:13.433
> 
> 标签：java, struts-1

我继承了一个 Struts 1 应用程序，该应用程序由大约八个单独的包组成，这些包全部编译到同一个应用程序中。我的任务是重写它的 ant 构建脚本。以前它是将所有配置文件分别复制到 /usr/local/tomcat/shared/classes 目录中，但是我们的运维团队要求我们简化操作，因此构建脚本只创建一个可以放入 tomcat 的 war 文件。

当我的 ConfigurationManager 类尝试加载其配置文件时出现错误。此文件 config.xml 目前正在被复制到 WEB-INF 中，然后才与应用程序的其余部分进行同步。因此，当我查看爆炸战争（ROOT）时，我确实发现`/usr/local/tomcat/webapps/ROOT/WEB-INF/config.xml`. 以下是 ConfigurationManager 的相关部分：

```
private static final String BASE_CONFIG_FILE = "WEB-INF/config.xml";

private void loadConfigFiles() throws RCConfigurationException {
    try {
        log.error("classpath: " + System.getProperty("java.class.path"));

        ConfigurationFactory factory = new ConfigurationFactory();
        URL configURL = getClass().getResource(BASE_CONFIG_FILE);
        factory.setConfigurationURL(configURL);
        config = factory.getConfiguration();

    } catch (ConfigurationException e) {
        log.error("Exception loading configuration files.", e);
        throw new RCConfigurationException("Exception loading configuration files", e);
    }
} 
```

log.error() 调用输出以下内容：

```
13:16:10,561 ERROR ConfigurationManager:75 - classpath: /usr/local/tomcat/bin/bootstrap.jar 
```

我的 localhost.2013-01-29.log 显示：

```
SEVERE: Exception starting filter GlobalRootManager
java.lang.ExceptionInInitializerError
    at com.rc.util.config.ConfigurationManager.getInstance(ConfigurationManager.java:66)
    at com.rc.commonbusinesswebapp.servlet.filter.GlobalRootManager.init(GlobalRootManager.java:42)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.NullPointerException
    at org.apache.commons.configuration.ConfigurationFactory.setConfigurationURL(ConfigurationFactory.java:220)
    at com.rc.util.config.ConfigurationManager.loadConfigFiles(ConfigurationManager.java:79)
    at com.rc.util.config.ConfigurationManager.<init>(ConfigurationManager.java:55)
    at com.rc.util.config.ConfigurationManager.<init>(ConfigurationManager.java:26)
    at com.rc.util.config.ConfigurationManager$LazyHolder.<clinit>(ConfigurationManager.java:37)
    ... 29 more 
```

我正在旋转我的轮子，所以我希望这里有人可以帮助我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:00:48.460

`WEB-INF`不在 Web 应用程序的类路径中。

`WEB-INF/classes`是; 如果要将配置文件作为类路径资源加载，一种选择是将文件定位在类路径的根目录下。

# git - git patch -p 混淆

> ID：14591973
> 
> 赞同：-2
> 
> 时间：2013-01-29T20:49:15.007
> 
> 标签：git

所以，我尝试使用命令修补我当前的分支

```
patch -p RETURN quote-patch.txt 
```

但是，我不知道应该在 -p 选项之后输入什么数字。我尝试输入几个数字（0,1,2,3,4），但它返回此错误：

```
patching file RETURN
Hunk #1 FAILED at 74.
Hunk #2 FAILED at 84.
Hunk #3 FAILED at 95.
Hunk #4 FAILED at 107.
Hunk #5 FAILED at 139.
Hunk #6 FAILED at 187.
6 out of 6 hunks FAILED -- saving rejects to file RETURN.rej 
```

任何的想法？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:53:48.063

您的补丁不适用于您当前的工作集。

没有更多信息，我不能说为什么会这样。也许您`RETURN`在尝试补丁应用程序之前进行了本地更改。正如消息所暗示的那样，尝试查看`RETURN.rej`（及其`RETURN`本身）以修复后果。

使用`patch`命令行实用程序时，您应该使用一个`-p`数字，使补丁中的路径与您的工作集中的路径匹配：如果补丁头显示`+++ lib/foo/RETURN`，并且您当前的工作目录`foo/RETURN`在其中，那就是这种情况为`-p1`.

但是，由于您已将此问题标记为“git”，因此我将假设您在 git 存储库中。使用 git 时，您不应该使用该`patch`工具：相反，要么自然地推拉更改，要么使用`git format-patch`and`git am`发送和接收更改集。这将保留权限、提交消息、作者信息等。`diff`如果您使用直线然后应用更改，所有这些额外的元数据都将丢失`patch`。

# javascript - 如何复制 html 元素、文本和样式中的所有内容

> ID：14591980
> 
> 赞同：0
> 
> 时间：2013-01-29T20:49:44.083
> 
> 标签：javascript, jquery, html, jquery-ui

我有一个我构建的 jQuery 页面。关键部分都在这样的 div 中..

```
<div id="TestDiv"></div>
<div id="randomDialogName"></div>
<div id="randomDialogName"></div>
<div id="randomDialogName"></div>
<div id="randomDialogName"></div>
</body> 
```

在 TestDive 中可以有很多元素、图表、网格、实时处理程序等（主要是 jQueryUI 元素）

我想做的是选择“TestDiv”中的所有内容，将其复制到一个变量作为临时措施，然后当我将数据加载回 TestDiv 时，我想按原样重新加载所有内容。像这样。

```
function saveDivElements(){
    var saveId = $('#TestDiv').attr('tab');
    var html = $('#TestDiv').html(); //have tried clone(true) and other methods here
    console.log(html);
    setLoaded(saveId, true, html); //saves to divData member variable on page
}

$("#TestDiv").html(divData); // called later and loads data 
```

我目前拥有的是保存元素，但没有保存类信息或处理程序。因此，在重新加载元素时，元素就在那里，但没有其他任何东西。我需要一些不需要重新加载所有处理程序、重置所有按钮的东西。（这也在本地运行，性能不是问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T21:54:59.017

您可以使用[.detach()](http://api.jquery.com/detach/)而不是提取原始 HTML 吗？

```
var savedChildren = $('#TestDiv').children().detach(); 
```

它伴随着你绑定到元素的任何东西。这是[jsfiddle](http://jsfiddle.net/TkAEA/)中的一个基本示例。

# actionscript-3 - `root` 在不同的地方变化

> ID：14591981
> 
> 赞同：4
> 
> 时间：2013-01-29T20:49:47.877
> 
> 标签：actionscript-3, flash, actionscript, document-class

在 ActionScript 3 中，我[读到](https://stackoverflow.com/a/7346385)该`root`变量引用了 Document Class 的一个实例。

在我的文档类构造函数中， a`trace(this == root)`返回`true`. 稍后在构造函数中，调用另一个类的构造函数。然而，这个构造函数声明`root`是`null`. 最后，从事件侦听器跟踪给我的结果`root`是`[object Stage]`.

我的目标是拥有一个文档类（在 中`MainGame.as`）的单个实例，并且能够`(root as MainGame)`在我的整个 ActionScript 程序中引用它。我怎样才能做到这一点？

如果重要的话，我的所有代码都在默认包中。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T20:53:37.300

一旦添加到显示列表中`root`， a的属性`DisplayObject`就会成为对文档类的引用。`DisplayObject`您可以继续使用`root`，但请注意只有显示列表中的对象才能使用。

[您可以在此处阅读有关 root 的更多信息](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#root)：

> Stage 对象的根属性是 Stage 对象本身。对于尚未添加到显示列表中的任何显示对象，根属性设置为 null，除非它已添加到显示对象容器中，该显示对象容器不在显示列表中，但它是最顶层显示对象的子级。加载的 SWF 文件。

# asp.net - Gridview 列不改变宽度大小

> ID：14591982
> 
> 赞同：0
> 
> 时间：2013-01-29T20:49:48.347
> 
> 标签：asp.net, vb.net, gridview, width

我不能让这个 GridView 列改变它的宽度，我试过这个：

```
<asp:BoundField DataField="ABC" HeaderText="ABC" SortExpression="ABC"  ControlStyle-Width="200%"> 
```

或作为像素：

```
<asp:BoundField DataField="ABC" HeaderText="ABC" SortExpression="ABC"  ControlStyle-Width="500px"> 
```

或者在 Boundfield 标签内：

```
<ItemStyle HorizontalAlign="Center" Width="500px"/> 
```

也在代码隐藏上试过这个：

```
Protected Sub GridView3_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView3.RowDataBound
    e.Row.Cells(7).Width = 500
End Sub 
```

我怎样才能正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-17T07:13:30.323

这是如何做到的。我正在重新调整具有属性的列的大小：Visible = True

```
Private Sub GridViewColumnsrResize(ByVal aspectratio As Integer, ByVal gv As DataGridView)
    Try
        Dim col_count As Integer = gv.Columns.Count
        For j As Integer = 0 To col_count - 1
            If gv.Columns(j).Visible = True Then
                gv.Columns(j).Width = gv.Columns(j).Width * aspectratio
            End If
        Next
    Catch ex As Exception
        'output ex
    End Try
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:27:42.947

**建议**如果您希望值出现在一行中，因为您正在增加宽度，那么您可以试试这个：
添加一个`cssClass`到您`Gridview`喜欢的`cssClass=gridContainer`，
添加到`.css`文件中：

```
 .gridContainer
  {
     white-space:nowrap;
  } 
```

如需更多选项，请查看[空白属性](http://www.w3schools.com/cssref/pr_text_white-space.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:39:06.117

我通过为 GridView 本身设置固定宽度解决了这个问题，它可能不是针对特定列，但它在所有 GridView 列之间共享其宽度，从而扩展了我想要扩展的列。

```
<asp:GridView ID="GridView3" runat="server" DataSourceID="SqlDataSource4" AutoGenerateColumns="False" CssClass="Gridview" Width="800px"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T21:15:05.363

我昨天刚刚发布了这个相关的帖子，有一个类似的问题。简短的回答是你不能。如该线程（底部）所述，有一种解决方法：

[如何通过自定义打印窗口打印完整的 gridview 区域？](https://stackoverflow.com/questions/14572059/how-can-i-print-a-full-gridview-area-via-a-custom-print-window)

# sql-server - 在 SSIS 中，如何获取从 Source 返回的应该处理的行数

> ID：14591985
> 
> 赞同：6
> 
> 时间：2013-01-29T20:50:02.310
> 
> 标签：sql-server, events, event-handling, ssis, rows

我正在开发一个项目，以将日志记录添加到我们的 SSIS 包中。我通过实现一些事件处理程序来做我自己的自定义日志记录。我已经实现了 OnInformation 事件以将时间、源名称和消息写入日志文件。当数据从一个表移动到另一个表时，OnInformation 事件会给我一条消息，例如：

> 组件 "TABLENAME" (1)" 写了 87 行。

如果其中一行失败，假设只处理了预期的 87 行中的 85 行。我假设上面的行将读取`wrote 85 rows`. 在这种情况下，我如何跟踪应该处理多少行？我想看到类似的东西`wrote 85 of 87 rows`。基本上，我想我需要知道如何获取源查询返回的行数。是否有捷径可寻？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T08:17:54.433

您可以`Row Count transaformation`在数据源之后使用并将其保存为变量。这将是要处理的行数。一旦它被加载到目标中，您应该使用`Execute SQL Task`in`Control flow`并使用`Select Count(*) from <<DestinationTable>>`并将计数保存到其他变量中[您应该在查询中使用 Where 子句来识别当前负载]。因此，您将处理数字行以进行记录。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T23:02:24.527

评论空间不足，无法提供反馈。发布一个不完整的答案，因为我需要离开这一天。

你将很难完成你所要求的。根据您在 Gowdhaman008 的回答中的评论，在终结器事件触发（我认为是 OnPostExecute）之前，变量的值在数据流之外是不可见的。您可以通过使用脚本任务来计算行数并触发自定义或预定义事件以报告包进度，从而欺骗并获取该数据。实际上，只是捕获`OnPipelineRowsSent`事件。这将记录有多少行正在通过特定的接合点和围绕它的时间。[SSIS Performance Framework](http://weblogs.sqlteam.com/jamesn/archive/2008/02/11/60504.aspx) Plus，您不必对您的东西进行任何自定义工作或维护。开箱即用的功能是绝对的胜利。

也就是说，在完成之前，您不会真正知道有多少行从源中出来。这听起来很愚蠢，我完全同意，但这是事实。想象一个简单的例子，一个 OLE DB 源将 1,000,000 行直接发送到一个 OLE DB 目标。最有可能的是，并非所有 1M 行都会在管道中开始，也许只有 10k 行会在第一个缓冲区中。这些缓冲区被推送到目的地，现在您知道 10k 行中的 10k 行已被处理。起泡，冲洗，重复几次，在这个缓冲区中，一行在不应该出现的地方有一个 NULL。Boom 爆炸了，过程失败了。我们已经有 60k 行流入*管道*，这就是我们所知道的全部，因为失败了。

确保我们已考虑所有源行的唯一方法是将异步转换放入管道中以阻塞所有下游组件，直到所有数据到达。这将消除您从软件包中获得良好性能的任何机会。您仍然会受到上述更新变量的限制，但您的 FireXEvent 消息将准确地描述队列中可以处理的行数。

如果你启动了一个显式事务，你可以做一些丑陋的事情，比如执行 SQL 任务，只是为了获得预期的计数，将它写入一个变量，然后记录处理的行，但是你会双重查询你的数据，你会增加阻塞的可能性由于双泵，在源系统上。这仅适用于数据库之类的东西。相同的概念适用于平面文件，但现在您需要一个脚本任务来首先读取所有行。

这变得更难看的是一个缓慢启动的数据源，比如一个 Web 服务。默认缓冲区大小可能会导致整个包运行的时间比它需要的简单得多，因为我们正在等待数据到达 [慢启动](http://blogs.lessthandot.com/index.php/DataMgmt/ssis-1/slow-source)

## 我会做什么

我会使用 Row Count记录我的[开始计数和错误计数（以及更多）。](http://www.sqlservercentral.com/stairway/72494/)这将帮助您说明所有传入和去向的数据。然后我会打开该`OnPipelineRowsSent`事件以允许我查询日志并立即查看有多少行正在流经它。

![在此处输入图像描述](../Images/8084e5800c1ef62743a354988c1ef684.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T22:21:43.913

您想要的是[Row Count 转换](http://msdn.microsoft.com/en-us/library/ms141136.aspx)。只需在源查询之后将其添加到您的数据流中，并将其输出分配给一个变量。然后您可以将该变量写入您的日志文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-06T15:39:24.553

这是我目前所做的。这是超级乏味的，但它的工作原理。

1)[![SSIS方法](../Images/2f89196147c4c2cf7b9d18033ee31c01.png)](https://i.stack.imgur.com/THHPx.png)

2）我在所有记录上都有一个恒定的“1”值。它们实际上都是一样的。

3) 使用多播步骤，我将数据流从两个方向发送出去。尽管所有内容都相同，但我们仍然必须按该常数值进行排序。

4）使用聚合步骤聚合该常量，然后将其用于与底部数据流连接（它包含所有实际数据记录，没有聚合）。

这样做可以让我获得初始行数。

5.  稍后，如下所示，使用条件拆分步骤并在应用您的条件后再次执行相同的操作。如果行数相同，则一切正常，没有问题。

如果行数不同，则说明有问题。

[![检查成功](../Images/0bf80ddbeb69077a07272893a9b6cd97.png)](https://i.stack.imgur.com/7vyJu.png)

这是无需使用其他数据流步骤即可解决问题的方法的总体思路。

TLDR：

通过使用多播、按某个常量值排序和聚合步骤获取其中 1 个条件的行数。

进行排序并合并以获取行数。

使用条件拆分并再次执行。

如果前后行数相同，请执行此操作。

如果前后行计数不同，请执行此操作。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-05-18T11:14:37.877

如果您有一列没有错误数据，这可能会有所帮助。将第二个平面文件源添加到包中。使用与现有文件源相同的连接。仅选择第一列并将输出定向到行数。

# php - 有时需要两次提交（AJAX 调用）来保存数据

> ID：14591986
> 
> 赞同：2
> 
> 时间：2013-01-29T20:50:09.520
> 
> 标签：php, ajax

我目前正在为我的网站构建一个多项选择测验模块。有一个包含 20 个问题的列表，只有登录的客户才能回答。

我有三张桌子：

**表问题**，带有字段 questions.id, questions.description

**表选项**，带有字段 options.id、options.questionid、options.trueorfalse

**表 answers**，带有字段 answers.id、answers.customerid、answers.questionid、answers.chosenoption

这些问题是通过 ajax 调用随机出现的，rand()，因此只显示客户未回答的问题。回答完所有问题后，将回显最终分数。

有人可以帮助我正确的 sql 语句应该运行 php 脚本以显示客户尚未回答的问题吗？

目前它似乎有效，但**有时**我必须提交两次相同的答案。实际上是第一次发送它，但是 ajax 调用显示了同样的问题。

这是我使用的sql语句...

```
SELECT * from questions
where  not exists (
select answers.questionid from answers
where answers.questionid = questions.id 
and answers.customerid = '".$customerid."' )
order by rand()
limit 1" 
```

数据由 JQuery 帖子发送（效果很好）。在页面 quiz_ajax.php 内

```
<script type="text/javascript">
$(document).ready(function(){
$("#ajax-post-answer").submit(function(){
var str = $(this).serialize();
$.ajax({
type: "POST",
url: "answerpost.php",
data: str
 });

callquiz();

return false;
});
});
</script> 
```

页面内 quiz.php（主页面）

```
<script type="text/javascript"> 
function callquiz()
{
var newDate = new Date;
$.ajax({
method: 'POST',
url : 'quiz_ajax.php?'  + newDate.getTime(),
dataType : 'text',
success: function (text) { 
$('#updateMequiz').html(text); }
});
}

callquiz();
</script> 
<div id="updateMequiz"></div> 
```

所以函数 callquiz 应该用一个新问题刷新这个 div。我现在正在调查这个问题 24 小时，所以我很想知道我做错了什么。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:44:05.737

这个问题很可能与 HTTP/AJAX 的异步特性有关：仅仅因为请求已经“在线”*并不*意味着它实际上已经被服务器处理了——更不用说保存到数据库了！

作为快速检查，`callquiz()`从`$.submit`回调移动到“answerpost.php”回调的*成功*`$.ajax`回调。（即只有在提交问题答案的请求完成后才请求新信息。*）*

这将确保“更新”( ) 操作在下一个“获取测验”( ) 请求*之前*`answerpost.php`发生（并完成） 。如果确实如此，请考虑让“更新”也返回“获取测验”信息以进行单个统一调用。*`quiz_ajax.php`*

# excel - 检查唯一编号

> ID：14591990
> 
> 赞同：0
> 
> 时间：2013-01-29T20:50:31.457
> 
> 标签：excel, vba

我需要检查 JMBG（我所在国家/地区的唯一公民号码）。它有 13 个数字，由以下代码计算得出。该函数返回我的 JMBG 错误。也许在代码的某个地方我做了错误的计算。

这是一个例子。现实生活中的 JMBG 是 0805988212987，这个函数返回错误的月份。

```
Function Check_JMBG(JMBG As String) As String

' Function returns message with notification of JMBG validation
' JMBG has 13 numbers and can be treated like this when checking it DD.MM.GGG.OO.BBB.K
' Details of JMBG (unique citizenship number in my country, is 13 by the way):

'DD - day of birth
'MM - manth of birth
'GGG - last 3 numbers of year of birth, starting from (1)899\. year
'OO - municipality birth code
'BBB - serial number of birth person. Man from 001-499, woman from 501-999
'K - control number, modulo 11

Dim size As Integer, sum As Integer
Dim number(1 To 13) As Integer
Dim day As Integer, manth As Integer, year As String

size = Len(JMBG)
day = Int(Left(JMBG, 2))
manth = Int(Mid$(JMBG, 3, 2))
year = Mid$(JMBG, 5, 3)

' Size check
If (size <> 13) Then
  Check_JMBG = "ERR: size of JMBG is not 13!"
End If

'Date check
If day < 1 Then
  Check_JMBG = "ERR: date entered is wrong!"
  Exit Function
End If

'Manth check and date inside manth
Select Case manth
  Case 1, 3, 5, 7, 8, 10, 12
    If day > 31 Then
      Check_JMBG = "ERR: date number is wrong!"
      Exit Function
    End If
  Case 4, 6, 9, 11
    If day > 30 Then
      Check_JMBG = "ERR: data number is wrong!"
      Exit Function
    End If
  Case 2
    If ((year Mod 4 = 0) And day > 29) Or _
       ((year Mod 4 <> 0) And day > 28) Then
      Check_JMBG = "ERR: date number is wrong!"
      Exit Function
    End If
  Case Else
    Check_JMBG = "ERR: manth number is wrong!"
    Exit Function
End Select

'Check year: from 1899 till today
If (year > Right(str(Year(Now)), 3)) And (year < "899") Then
  Check_JMBG = "ERR: year number is wrong!"
  Exit Function
End If

'Control number check
For i = 1 To 13
  number(i) = Int(Mid$(JMBG, i, 1))
Next i

sum = number(13) + number(1) * 7 + number(2) * 6
sum = sum + number(3) * 5 + number(4) * 4
sum = sum + number(5) * 3 + number(6) * 2
sum = sum + number(7) * 7 + number(8) * 6
sum = sum + number(9) * 5 + number(10) * 4
sum = sum + number(11) * 3 + number(12) * 2

If (sum Mod 11) <> 0 Then
  Check_JMBG = "ERR: wrong control number!"
Else
  Check_JMBG = "JMBG is correct"
End If

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:25:57.817

您的函数需要一个字符串，并且您正在传递一个数字。由于您在尺寸检查后没有退出该功能，因此您没有发现错误。

`=Check_JMBG(805988212987)`给出错误**manth is wrong**

`=Check_JMBG("0805988212987")`给出消息**JMBG 是正确的**

![格式有所不同](../Images/bfa536fb1ecd64a371bbb4c5e943b884.png)

请注意单元格 A1 左上角的绿色三角形...这意味着我已通过在数字前面`'`添加（单引号）将数字作为文本输入。

您可以稍微更改您的测试以覆盖缺失的零。- 在你得到大小之后，在你提取日、月和年之前，输入以下代码：

```
If (size <> 13) Then
    'add leading zeros
    JMBG = String(13 - size, "0") & JMBG
End If 
```

* * *

完整代码：

```
Function Check_JMBG(JMBG As String) As String

' Function returns message with notification of JMBG validation
' JMBG has 13 numbers and can be treated like this when checking it DD.MM.GGG.OO.BBB.K
' Details of JMBG (unique citizenship number in my country, is 13 by the way):

'DD - day of birth
'MM - manth of birth
'GGG - last 3 numbers of strYear of brith, starting from (1)899\. strYear
'OO - municipality birth code
'BBB - serial number of birth person. Man from 001-499, woman from 501-999
'K - control number, modulo 11

Dim size As Integer, sum As Integer
Dim number(1 To 13) As Integer
Dim day As Integer, manth As Integer, strYear As String

size = Len(JMBG)

' Size check
If (size <> 13) Then
  JMBG = String(13 - size, "0") & JMBG
End If

day = Int(Left(JMBG, 2))
manth = Int(Mid$(JMBG, 3, 2))
strYear = Mid$(JMBG, 5, 3)

'Date check
If day < 1 Then
  Check_JMBG = "ERR: date entered is wrong!"
  Exit Function
End If

'Manth check and date inside manth
Select Case manth
  Case 1, 3, 5, 7, 8, 10, 12
    If day > 31 Then
      Check_JMBG = "ERR: date number is wrong!"
      Exit Function
    End If
  Case 4, 6, 9, 11
    If day > 30 Then
      Check_JMBG = "ERR: data number is wrong!"
      Exit Function
    End If
  Case 2
    If ((strYear Mod 4 = 0) And day > 29) Or _
       ((strYear Mod 4 <> 0) And day > 28) Then
      Check_JMBG = "ERR: date number is wrong!"
      Exit Function
    End If
  Case Else
    Check_JMBG = "ERR: month number is wrong!"
    Exit Function
End Select

'Check strYear: from 1899 till today
If (strYear > Right(str(Year(Now)), 3)) And (strYear < "899") Then
  Check_JMBG = "ERR: strYear number is wrong!"
  Exit Function
End If

'Control number check
For i = 1 To 13
  number(i) = Int(Mid$(JMBG, i, 1))
Next i

sum = number(13) + number(1) * 7 + number(2) * 6
sum = sum + number(3) * 5 + number(4) * 4
sum = sum + number(5) * 3 + number(6) * 2
sum = sum + number(7) * 7 + number(8) * 6
sum = sum + number(9) * 5 + number(10) * 4
sum = sum + number(11) * 3 + number(12) * 2

If (sum Mod 11) <> 0 Then
  Check_JMBG = "ERR: wrong control number!"
Else
  Check_JMBG = "JMBG is correct"
End If

End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:42:27.053

我运行了你的代码，这个月运行良好。我得到了一个编译错误，因为你对变量 year 和 VBA 函数使用了相同的名称——一旦我用 strYear 替换它，它也可以工作。

看看下面的重构代码，看看这是否能解决您的问题：

```
函数 Check_JMBG(JMBG As String) As String
    如果 (Len(JMBG) <> 13) 那么
        Check_JMBG = "错误：JMBG 的长度不是 13！"
    ElseIf Not IsNumeric(JMBG) Then
        Check_JMBG = "错误：JMBG 包含非数字字符"
    ElseIf Not fctBlnCheckDate(JMBG) Then
        Check_JMBG = "ERR：输入错误日期！"
    ElseIf fctBlnCheckSum(JMBG) Then
        Check_JMBG = "ERR：校验和错误！"
    别的
        Check_JMBG = "JMBG 正确"
    万一
结束功能

私有函数 fctBlnCheckDate(JMBG As String) As Boolean
    将 intDay 作为整数、intMonth 作为整数、intYear 作为整数调暗
    将 datCheck 作为日期调暗

    intDay = Int(左(JMBG, 2))
    intMonth = Int(Mid$(JMBG, 3, 2))
    intYear = Int(Mid$(JMBG, 5, 3)) + 1000

    datCheck = DateSerial(intYear, intMonth, intDay)

    fctBlnCheckDate = _
        （年（datCheck）= intYear）和_
        （月（datCheck）= intMonth）和_
        （天（datCheck）= intDay）

结束功能

私有函数 fctBlnCheckSum(JMBG As String) As Boolean
    Dim intCheckSum As Integer, i As Integer

    对于 i = 1 到 13
        intCheckSum = intCheckSum + Int(Mid$(JMBG, i, 1)) * (IIf(i < 7, 8, 14) - i)
    下一个
    fctBlnCheckSum = (intCheckSum Mod 11) <> 0
结束功能

```

# forms - if else 在 rails 2 应用程序的视图中呈现不同的表单

> ID：14591995
> 
> 赞同：0
> 
> 时间：2013-01-29T20:51:03.010
> 
> 标签：forms, ruby-on-rails-2

我正在尝试使用除非其他形式呈现两种略有不同的形式之一：

```
unless many_items
     form_tag purchases_url(:item1 => item1), :id => "id1_#{item1}", :method => "post", :class=> "order-form" do 
 else 
      form_tag purchases_url(:item1 => item1, :item2 => item2), :id => "upgrade_#{item2}", :class => "upgrade_form" do
end

rest of form
    button

<%end%> 
```

但我得到一个错误，当然。我真的不知道该怎么做..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:50:16.343

我使用 nil 来防止第二个变量存在

```
parent_order = item2.present? ? item2 : nil
form_id = gig.is_item? ?  "1#{gig.id}" : "2#{gig.id}"
form_class = gig.is_item? ? "1" : "2"

 form_tag purchases_url(:item1 => item1 ,:item2 => items), :id => form_id, :method => "post", :class=> form_class do 

 %> 
```

# backbone.js - Marrionette.js NoMethodError：在控制器上找不到方法“xxx”，但它在那里

> ID：14591996
> 
> 赞同：2
> 
> 时间：2013-01-29T20:51:04.393
> 
> 标签：backbone.js, marionette

我收到错误：NoMethodError：在控制器上找不到方法“go_start”

函数 go_start 在我的项目中只有两个地方（我搜索过）：StartRouter.js

```
define(['marionette'], function(Marionette) {
  'use strict';

  var StartRouter = {};

  StartRouter.Router = Marionette.AppRouter.extend({
    appRoutes: {
        "start": "go_start"
    }
  });

  return StartRouter;
}); 
```

和 StartController.js

```
define(['underscore', 'marionette', 'app/vent',
    'text!templates/StartLayout.html',     'views/InspectorStartView','views/InspectorStartView'],
function(_, Marionette, vent, layout, InspectorStartView, PlayerStartView) {
'use strict';

// public module API
var Controller = {};

// private
var Layout = Marionette.Layout.extend({
    template: _.template(layout),

    regions: {
        inspector: "#inspector_choice",
        player: "#player_choice"
    }
});

// private
var _initializeLayout = function() {
    console.log('initializeLayout...');
    Controller.layout = new Layout();
    Controller.layout.on("show", function() {
        vent.trigger("layout:rendered");
    });
    vent.trigger('app:show', Controller.layout);
};

// controller attach a sub view/ search View
vent.on("layout:rendered", function() {
    console.log('layout:rendered =>StartController');

    // render views for the existing HTML in the template, and attach it to the layout (i.e. don't double render)
    var inspectorStartView = new InspectorStartView();
    Controller.layout.inspector.attachView(inspectorStartView);

    var playerStartView = new PlayerStartView();
    Controller.layout.player.attachView(playerStartView);
});

    // controller show inspector in the layout / subview
    vent.on('show:inspector', function(inspectorStartView) {
        // console.log('show books event');
        Controller.layout.inspector.show(inspectorStartView);
    });

    // controller show inspector in the layout / subview
    vent.on('show:player', function(playerStartView) {
        // console.log('show books event');
        Controller.layout.inspector.show(playerStartView);
    });

// public API
Controller.go_start = function(term) {   **//<-- function go_start**
    _initializeLayout();
    //vent.trigger("search:term", term);
};

return Controller; 
```

真正奇怪的是，Crome 显示 App.js 的第 77 行发生的错误是：

```
app.addInitializer(function(options) {
    // configure for loading templates stored externally...
    Backbone.Marionette.TemplateCache.prototype.loadTemplate = function(templateId) {
        // Marionette expects "templateId" to be the ID of a DOM element.
        // But with RequireJS, templateId is actually the full text of the template.
        var template = templateId;

        // Make sure we have a template before trying to compile it
        if (!template || template.length === 0) {
            var msg = "Could not find template: '" + templateId + "'";
            var err = new Error(msg);
            err.name = "NoTemplateError";
            throw err;
        }

        return template;
    };

    // Connect controllers to its router via options
    // init router's router/controller
    new options.router.Router({
        controller: options.homeController
    });

    // init loginRouter's router/controller
    new options.loginRouter.Router({
        controller: options.loginController
    });
    // init helpRouter's router/controller
    new options.helpRouter.Router({
        controller: options.helpController  //<-- Line 77
    });
    // init startRouter's router/controller
    new options.startRouter.Router({
        controller: options.startController
    });
    // init inspectorRouter's router/controller
    new options.inspectorController.Router({
        controller: options.inspectorController
    });
    // init playerRouter's router/controller
    new options.playerRouter.Router({
        controller: options.playerController
    });
});
// export the app
return app;
}); 
```

帮助路由器和控制器：

```
// HelpRouter.js
define(['marionette'], function(Marionette) {
'use strict';

var HelpRouter = {};

HelpRouter.Router = Marionette.AppRouter.extend({
    appRoutes: {
        "help": "go_help"
    }
});

return HelpRouter;
});

<!-- routes/HelpController.js -->
define(['underscore', 'marionette', 'app/vent',     'text!templates/HelpLayout.html'],
function (_, Marionette, vent, layout) {
    'use strict';

    // public module API
    var Controller = {};

    // private
    var Layout = Marionette.Layout.extend({
        template: _.template(layout),

        regions: {
            faq: "#"
        }
    });

// private

var _initializeLayout = function () {
console.log('initializeLayout...');
Controller.layout = new Layout();
Controller.layout.on("show", function () {
    vent.trigger("layout:rendered");
});
vent.trigger('app:show', Controller.layout);
};

// public API

Controller.go_help = function () {
     _initializeLayout();
};

return Controller;
}); 
```

有人看到我做错了什么吗？
这是我认为不应该发生的事情：

```
// Includes Desktop Specific JavaScript files here (or inside of your Desktop router)
require(["app/App",
    "routers/HomeController",       "routers/StartController",  "routers/LoginController",
    "routers/InspectorController",  "routers/PlayerController", "routers/HelpController",
    "routers/DesktopRouter",        "routers/LoginRouter",      "routers/StartRouter",
    "routers/InspectorController",  "routers/PlayerController", "routers/HelpRouter" ],
function(App,
       HomeController, StartController, LoginController, InspectorController, PlayerController, HelpController,
       DesktopRouter, LoginRouter, HelpRouter, StartRouter, InspectorRouter, PlayerRouter) {

  var options = {
      homeController:       HomeController,
      startController:      StartController,
      loginController:      LoginController,
      helpController:       HelpController,

      inspectorController:  InspectorController,
      playerController:     PlayerController,

      router:               DesktopRouter,
      startRouter:          StartRouter,
      loginRouter:          LoginRouter,
      helpRouter:           HelpRouter,

      inspectorRouter:      InspectorRouter,
      playerRouter:         PlayerRouter

  };

  App.start(options);
}); 
```

所以我需要我所有的路由器和控制器，但是当我在调试器中运行该代码时，我有一些未定义的项目：

```
options: Object
helpController: Object
helpRouter: Object
homeController: Object
go_home: function () {
__proto__: Object
inspectorController: undefined
inspectorRouter: undefined
loginController: Object
loginRouter: Object
playerController: undefined
playerRouter: Object
router: Object
Router: function (){ parent.apply(this, arguments); }
__proto__: Object
startController: Object
go_start: function (term) {
__proto__: Object
startRouter: undefined
__proto__: Object
HomeController: Object
StartController: Object
StartRouter: undefined
DesktopRouter: Object
InspectorController: undefined 
```

为什么有些是未定义的？StartRouter 和 StartController 具有 go_start 功能。HelpRouter/Controller 没有也不应该有 go_start 但它会引发错误

欢迎所有建议。

安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:53:50.193

看起来您的 RequireJS 导入有问题。`HelpRouter`变量映射到`"routers/StartRouter"`模块，并且所有后续模块都是一一对应的。

AMD 导入格式很容易导致这种类型的简单错误，这些错误可能需要很长时间才能调试，因为那是您从未想过要查看的地方。这就是为什么我更喜欢RequireJS 提供的[简化 CommonJS 包装语法的原因：](http://www.requirejs.org/docs/api.html#cjsmodule)

```
define(function(require) {
  var HomeController  = require('routers/HomeController'),
      StartController = require('routers/StartController'),
      //etc...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:17:28.533

对于那些刚刚收听的人来说，这里是 fencliff 提出的可行解决方案。

```
// Includes Desktop Specific JavaScript files here (or inside of your Desktop router)
define(function(require) {
  var App = require("app/App"),
        // Routers with its controller
        DesktopRouter       = require("routers/DesktopRouter"),
        HomeController      = require("routers/HomeController"),

        StartRouter         = require("routers/StartRouter"),
        StartController     = require("routers/StartController"),

        LoginRouter         = require("routers/LoginRouter"),
        LoginController     = require("routers/LoginController"),

        InspectorRouter     = require("routers/InspectorRouter"),
        InspectorController = require("routers/InspectorController"),

        PlayerRouter        = require("routers/PlayerRouter"),
        PlayerController    = require("routers/PlayerController"),

        HelpRouter          = require("routers/HelpRouter"),
        HelpController      = require("routers/HelpController");

  var options = {
      homeController:       HomeController,
      router:               DesktopRouter,

      startController:      StartController,
      startRouter:          StartRouter,

      loginController:      LoginController,
      loginRouter:          LoginRouter,

      inspectorController:  InspectorController,
      inspectorRouter:      InspectorRouter,

      playerController:     PlayerController,
      playerRouter:         PlayerRouter,

      helpController:       HelpController,
      helpRouter:           HelpRouter

  }
  App.start(options);
  return function() {};
}); 
```

我对返回一个空函数有点不确定，但这是我看到的唯一示例并且它有效。:-D

# entity-framework - 在 Visual Studio 2012 中使用存储过程

> ID：14591997
> 
> 赞同：0
> 
> 时间：2013-01-29T20:51:07.013
> 
> 标签：entity-framework, stored-procedures

我们的数据库中有一个人员搜索存储过程，我想将其映射到我的`edmx`文件中的 Visual Studio 2012。存储过程返回满足搜索的行并设置返回码。当我手动执行存储过程时，我得到了我期望的 4 行，我得到了一个返回码 0。

我在框架中使用 2012、EF 5 和实体框架组件。

当我通过选择存储过程`UpdateModelFromDatabase`并将其添加到我的项目中时，而不是定义通常`{storedProcedureName}_Result`并返回它，它被转换为仅返回一个整数。这使我无法使用存储过程来实际访问行来显示它们。

有趣的是，我们有一个测试`PersonSearch`存储过程恰好被破坏，但它是相同的存储过程，但有一些内部更改。它仍然返回搜索结果并设置返回码。当我拉入第二个存储过程时，它会按预期执行并将存储过程创建为返回`{storedProcedureName}_Result`和返回行。

有没有人看到这个问题，我该如何解决这个问题？我需要这个第一个存储过程来返回行，而不是返回代码。

***跟进***

我遇到了[这个问题](https://stackoverflow.com/questions/14545698/using-stored-procedure-in-entity-framework-5-with-complex-type)，并让我的 DBA 看了一下。但是对我们的存储过程进行类似的更改仍然让 EF 返回一个整数而不是一个复杂的对象。我还运行了所有字段为空的存储过程，除了返回代码之外，它还返回了空表结构。

这是存储过程：

```
USE [ourdatabase]
GO
/****** Object:  StoredProcedure [dbo].[usp_Person_SearchPerson]    Script Date:   01/30/2013 11:46:31 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[usp_Person_SearchPerson]

@firstName nvarchar(50), --OR
@lastName nvarchar(50), --OR
@companyName nvarchar(150), --OR
@phoneNumber1 nvarchar(50), --OR
@phoneNumber2 nvarchar(50), --OR
@email nvarchar(100), --OR
@franchiseSetId uniqueidentifier, --AND
@recordSourceId uniqueidentifier --AND
AS
BEGIN
SET NOCOUNT ON;

DECLARE @ReturnTable TABLE 
(
    PersonID UNIQUEIDENTIFIER, 
    FirstName NVARCHAR(50), 
    LastName NVARCHAR(50),
    CompanyName NVARCHAR(150),
    EmailAddress NVARCHAR(100),
    PhoneNumber1 NVARCHAR(50),
    PhoneNumber2 NVARCHAR(50),
    Address1 NVARCHAR(50),
    City NVARCHAR(100),
    State NVARCHAR(50),
    PostalCode NVARCHAR(20),
    Score INT
)

-- flags to be used instead of calling the function udf_Strings_IsNullOrEmpty repeatedly
Declare
   @firstNamebit bit, --OR
   @lastNamebit bit, --OR
   @companyNamebit bit, --OR
   @phoneNumber1bit bit, --OR
   @phoneNumber2bit bit, --OR
   @emailbit bit, --OR
   @franchiseSetIdbit bit, --AND
   @recordSourceIdbit bit,
   @rowID int 

Insert into AppToolData..SearchLog 
(
   firstname ,
   lastname ,
   companyName ,
   phoneNumber1 ,
   phoneNumber2 ,
   email ,
   franchiseSetId ,
   recordSourceID ,
   StartTime_UTC
)
Values
(
   @firstname ,
   @lastname ,
   @companyName ,
   @phoneNumber1 ,
   @phoneNumber2 ,
   @email ,
   @franchiseSetId ,
   @recordSourceID ,
   SYSDATETIMEOFFSET()
 )

Select @rowID = SCOPE_IDENTITY()

-- working set to accumulate Person records meeting search criteria
--Declare #People table
Create Table #People
(
   PersonID uniqueIdentifier 
)

--work set of distinct person reocrds from previous working set
Declare @DistinctPeople table
(
   PersonID uniqueIdentifier not null Primary Key
)

--Set flags
Select -- 0 = False (Is Not Null)  1 = True (Is Null)
   @firstNamebit = dbo.udf_Strings_IsNullOrEmpty(@firstName),
   @lastNamebit = dbo.udf_Strings_IsNullOrEmpty(@lastName),
   @companyNamebit = dbo.udf_Strings_IsNullOrEmpty(@companyName),
   @phoneNumber1bit = dbo.udf_Strings_IsNullOrEmpty(@phoneNumber1),
   @phoneNumber2bit = dbo.udf_Strings_IsNullOrEmpty(@phoneNumber2),
   @emailbit = dbo.udf_Strings_IsNullOrEmpty(@email)

DECLARE @MinimumWeight INT
SET @MinimumWeight = 1

DECLARE @AvailableWeight INT
SET @AvailableWeight = 0

If @franchiseSetId is not null
Begin
    Select @firstName = '%'+@firstName+'%'
    Select @lastName = '%'+@lastName+'%'
End
Else
Begin
    Select @firstName = @firstName+'%'
    Select @lastName = @lastName+'%'
End 

If @franchiseSetId is null
    Begin
      -- first name provided, last name not provided, phone number not provided
       IF @firstNamebit = 0 and @lastNamebit = 1 and @phoneNumber1bit = 1
           BEGIN
               SET @AvailableWeight = @AvailableWeight + 15  -- (First Name = 15, Last Name = 20, Phone Number = 30)

               -- Add records where first name is a partial string match
               Insert into #People
               Select PersonID from Person p
               Where (PatIndex(@firstName, p.FirstName)>0)
                   AND 
                   (
                      p.RecordSourceId = Coalesce(@recordSourceId, p.RecordSourceId)
                      --(@recordSourceId IS NULL) 
                      --OR
                      --(p.RecordSourceId = @recordSourceId)
                   )
                   AND 
                   (
                      p.FranchiseSetId = Coalesce(@franchiseSetId, p.FranchiseSetId)
                      --(@franchiseSetId IS NULL AND p.FranchiseSetId IS NULL) 
                      --OR
                      --(p.FranchiseSetId = @franchiseSetId)
                   )
           END
       -- first name not provided, last name provided, phone number not provided
       Else IF @firstNamebit = 1 and @lastNamebit = 0 and @phoneNumber1bit = 1
           BEGIN
               SET @AvailableWeight = @AvailableWeight + 20 -- (First Name = 15, Last Name = 20, Phone Number = 30)

               -- Add records where last name is a partial string match
               Insert into #People
               Select PersonID from Person p
               Where 
                   (PatIndex(@lastName, p.lastName)>0)
                   AND 
                   (
                      p.RecordSourceId = Coalesce(@recordSourceId, p.RecordSourceId)
                      --(@recordSourceId IS NULL) 
                      --OR
                      --(p.RecordSourceId = @recordSourceId)
                   )
                   AND 
                   (
                      p.FranchiseSetId = Coalesce(@franchiseSetId, p.FranchiseSetId)
                      --(@franchiseSetId IS NULL AND p.FranchiseSetId IS NULL) 
                      --OR
                      --(p.FranchiseSetId = @franchiseSetId)
                   )
           END
       -- first name provided, last name provided, phone number not provided
       Else IF @firstNamebit = 0 and @lastNamebit = 0 and @phoneNumber1bit = 1
           BEGIN
               SET @AvailableWeight = @AvailableWeight + 30 -- (First Name = 15, Last Name = 20, Phone Number = 30)

               -- Add records where first & last name are a partial string match
               Insert into #People
               Select PersonID from Person p
               Where 
                   (
                      (PatIndex(@firstName, p.FirstName)>0)
                      and
                      (PatIndex(@lastName, p.lastName)>0)
                   )
                   AND 
                   (
                      p.RecordSourceId = Coalesce(@recordSourceId, p.RecordSourceId)
                      --(@recordSourceId IS NULL) 
                      --OR
                      --(p.RecordSourceId = @recordSourceId)
                   )
                   AND 
                   (
                      p.FranchiseSetId = Coalesce(@franchiseSetId, p.FranchiseSetId)
                      --(@franchiseSetId IS NULL AND p.FranchiseSetId IS NULL) 
                      --OR
                      --(p.FranchiseSetId = @franchiseSetId)
                   )
           END
       -- first name provided, last name not provided, phone number provided
       IF @firstNamebit = 0 and @lastNamebit = 1 and @phoneNumber1bit = 0
           BEGIN
               SET @AvailableWeight = @AvailableWeight + 45 -- (First Name = 15, Last Name = 20, Phone Number = 30)

                   -- Add records where first name is a partial string match
                   --   and Phone Number is an exact match 
                   Insert into #People
               SELECT  
                p.PersonId
               FROM 
               Person p WITH (NOLOCK) 
               LEFT OUTER JOIN 
               PersonPhoneNumber ppn1 WITH (NOLOCK) 
                   ON p.PersonId=ppn1.PersonId
               LEFT OUTER JOIN 
               PhoneNumber pn1 WITH (NOLOCK) 
                   ON ppn1.PhoneNumberId=pn1.PhoneNumberId
               Where
                   (PatIndex(@firstName, p.FirstName)>0)
                   and 
                   pn1.Number = @PhoneNumber1
                   AND 
                   (
                      p.RecordSourceId = Coalesce(@recordSourceId, p.RecordSourceId)
                      --(@recordSourceId IS NULL) 
                      --OR
                      --(p.RecordSourceId = @recordSourceId)
                   )
                   AND 
                   (
                      p.FranchiseSetId = Coalesce(@franchiseSetId, p.FranchiseSetId)
                      --(@franchiseSetId IS NULL AND p.FranchiseSetId IS NULL) 
                      --OR
                      --(p.FranchiseSetId = @franchiseSetId)
                   )

           END
       -- first name not provided, last name provided, phone number provided
       Else IF @firstNamebit = 1 and @lastNamebit = 0 and @phoneNumber1bit = 0
           BEGIN
               SET @AvailableWeight = @AvailableWeight + 50 -- (First Name = 15, Last Name = 20, Phone Number = 30)

               -- Add records where last name is a partial string match
                   --   and Phone Number is an exact match 
                   Insert into #People
               SELECT  
                p.PersonId
               FROM 
               Person p WITH (NOLOCK) 
               LEFT OUTER JOIN 
               PersonPhoneNumber ppn1 WITH (NOLOCK) 
                   ON p.PersonId=ppn1.PersonId
               LEFT OUTER JOIN 
               PhoneNumber pn1 WITH (NOLOCK) 
                   ON ppn1.PhoneNumberId=pn1.PhoneNumberId
               Where
                   (PatIndex(@lastName, p.LastName)>0)
                   and 
                   pn1.Number = @PhoneNumber1
                   AND 
                   (
                      p.RecordSourceId = Coalesce(@recordSourceId, p.RecordSourceId)
                      --(@recordSourceId IS NULL) 
                      --OR
                      --(p.RecordSourceId = @recordSourceId)
                   )
                   AND 
                   (
                      p.FranchiseSetId = Coalesce(@franchiseSetId, p.FranchiseSetId)
                      --(@franchiseSetId IS NULL AND p.FranchiseSetId IS NULL) 
                      --OR
                      --(p.FranchiseSetId = @franchiseSetId)
                   )

           END
       -- first name provided, last name provided, phone number provided
       Else IF @firstNamebit = 0 and @lastNamebit = 0 and @phoneNumber1bit = 0
           BEGIN
               SET @AvailableWeight = @AvailableWeight + 65 -- (First Name = 15, Last Name = 20, Phone Number = 30)

               -- Add records where first & last name are a partial string match
                   --   and Phone Number is an exact match 
                   Insert into #People
               SELECT  
                p.PersonId
               FROM 
               Person p WITH (NOLOCK) 
               LEFT OUTER JOIN 
               PersonPhoneNumber ppn1 WITH (NOLOCK) 
                   ON p.PersonId=ppn1.PersonId
               LEFT OUTER JOIN 
               PhoneNumber pn1 WITH (NOLOCK) 
                   ON ppn1.PhoneNumberId=pn1.PhoneNumberId
               Where
                   (
                      (PatIndex(@firstName, p.FirstName)>0)
                      and 
                      (PatIndex(@lastName, p.LastName)>0)
                   )
                   and 
                   pn1.Number = @PhoneNumber1
                   AND 
                   (
                      p.RecordSourceId = Coalesce(@recordSourceId, p.RecordSourceId)
                      --(@recordSourceId IS NULL) 
                      --OR
                      --(p.RecordSourceId = @recordSourceId)
                   )
                   AND 
                   (
                      p.FranchiseSetId = Coalesce(@franchiseSetId, p.FranchiseSetId)
                      --(@franchiseSetId IS NULL AND p.FranchiseSetId IS NULL) 
                      --OR
                      --(p.FranchiseSetId = @franchiseSetId)
                   )

           END
       -- first name not provided, last name not provided, phone number provided
       Else IF @firstNamebit = 1 and @lastNamebit = 1 and @phoneNumber1bit = 0
           BEGIN
               SET @AvailableWeight = @AvailableWeight + 30  -- (First Name = 15, Last Name = 20, Phone Number = 30)

               -- Add records where Phone Number is an exact match 
                   Insert into #People
               SELECT  
                p.PersonId
               FROM 
               Person p WITH (NOLOCK) 
               LEFT OUTER JOIN 
               PersonPhoneNumber ppn1 WITH (NOLOCK) 
                   ON p.PersonId=ppn1.PersonId
               LEFT OUTER JOIN 
               PhoneNumber pn1 WITH (NOLOCK) 
                   ON ppn1.PhoneNumberId=pn1.PhoneNumberId
               Where
                   pn1.Number = @PhoneNumber1
                   AND 
                   (
                      p.RecordSourceId = Coalesce(@recordSourceId, p.RecordSourceId)
                      --(@recordSourceId IS NULL) 
                      --OR
                      --(p.RecordSourceId = @recordSourceId)
                   )
                   AND 
                   (
                      p.FranchiseSetId = Coalesce(@franchiseSetId, p.FranchiseSetId)
                      --(@franchiseSetId IS NULL AND p.FranchiseSetId IS NULL) 
                      --OR
                      --(p.FranchiseSetId = @franchiseSetId)
                   )

           END
    End
Else  -- Indicates WORKCENTER/Drybook search
    Begin
      IF @firstNamebit = 0
           BEGIN
               SET @AvailableWeight = @AvailableWeight + 15

               -- Add records where first name is a partial string match
               Insert into #People
               Select PersonID from Person p
               Where (PatIndex(@firstName, p.FirstName)>0)
                   AND 
                   (
                      p.RecordSourceId = Coalesce(@recordSourceId, p.RecordSourceId)
                      --(@recordSourceId IS NULL) 
                      --OR
                      --(p.RecordSourceId = @recordSourceId)
                   )
                   AND 
                   (
                      p.FranchiseSetId = Coalesce(@franchiseSetId, p.FranchiseSetId)
                      --(@franchiseSetId IS NULL AND p.FranchiseSetId IS NULL) 
                      --OR
                      --(p.FranchiseSetId = @franchiseSetId)
                   )
           END

      IF @lastNamebit = 0
           BEGIN
               SET @AvailableWeight = @AvailableWeight + 20

               -- Add records where last name is a partial string match
               Insert into #People
               Select PersonID from Person p
               Where 
                   (PatIndex(@lastName, p.lastName)>0)
                   AND 
                   (
                      p.RecordSourceId = Coalesce(@recordSourceId, p.RecordSourceId)
                      --(@recordSourceId IS NULL) 
                      --OR
                      --(p.RecordSourceId = @recordSourceId)
                   )
                   AND 
                   (
                      p.FranchiseSetId = Coalesce(@franchiseSetId, p.FranchiseSetId)
                      --(@franchiseSetId IS NULL AND p.FranchiseSetId IS NULL) 
                      --OR
                      --(p.FranchiseSetId = @franchiseSetId)
                   )
           END
    IF @phoneNumber1bit = 0
           BEGIN
               SET @AvailableWeight = @AvailableWeight + 30

               -- Add records where Phone Number 1 is an exact match
               Insert into #People
               SELECT  
             p.PersonId
               FROM 
               Person p WITH (NOLOCK) 
               LEFT OUTER JOIN 
               PersonPhoneNumber ppn1 WITH (NOLOCK) 
                   ON p.PersonId=ppn1.PersonId
               LEFT OUTER JOIN 
               PhoneNumber pn1 WITH (NOLOCK) 
                   ON ppn1.PhoneNumberId=pn1.PhoneNumberId
               Where pn1.Number = @PhoneNumber1
                   AND 
                   (
                      p.RecordSourceId = Coalesce(@recordSourceId, p.RecordSourceId)
                      --(@recordSourceId IS NULL) 
                      --OR
                      --(p.RecordSourceId = @recordSourceId)
                   )
                   AND 
                   (
                      p.FranchiseSetId = Coalesce(@franchiseSetId, p.FranchiseSetId)
                      --(@franchiseSetId IS NULL AND p.FranchiseSetId IS NULL) 
                      --OR
                      --(p.FranchiseSetId = @franchiseSetId)
                   )
           END
    End

IF @phoneNumber2bit = 0
    BEGIN
        SET @AvailableWeight = @AvailableWeight + 30

        -- Add records where Phone Number 2 is an exact match
        Insert into #People
        SELECT  
           p.PersonId
        FROM 
        Person p WITH (NOLOCK) 
        LEFT OUTER JOIN 
        PersonPhoneNumber ppn1 WITH (NOLOCK) 
            ON p.PersonId=ppn1.PersonId
        LEFT OUTER JOIN 
        PhoneNumber pn1 WITH (NOLOCK) 
            ON ppn1.PhoneNumberId=pn1.PhoneNumberId
        Where pn1.Number = @PhoneNumber2
            AND 
           (
              p.RecordSourceId = Coalesce(@recordSourceId, p.RecordSourceId)
              --(@recordSourceId IS NULL) 
              --OR
              --(p.RecordSourceId = @recordSourceId)
           )
           AND 
           (
              p.FranchiseSetId = Coalesce(@franchiseSetId, p.FranchiseSetId)
              --(@franchiseSetId IS NULL AND p.FranchiseSetId IS NULL) 
              --OR
              --(p.FranchiseSetId = @franchiseSetId)
           )
    END     

IF @emailbit = 0
    BEGIN
        SET @AvailableWeight = @AvailableWeight + 40

        -- Add records where Email is an exact match
         Insert into #People
         Select 
            p.PersonId
         from Person p
         LEFT OUTER JOIN 
         PersonEmailAddress pea WITH (NOLOCK) 
            ON p.PersonId=pea.PersonId
         LEFT OUTER JOIN 
         EmailAddress ea WITH (NOLOCK) 
            ON pea.EmailAddressId=ea.EmailAddressId
         Where ea.[Address] = @email
            AND 
               (
                  p.RecordSourceId = Coalesce(@recordSourceId, p.RecordSourceId)
                  --(@recordSourceId IS NULL) 
                  --OR
                  --(p.RecordSourceId = @recordSourceId)
               )
               AND 
               (
                  p.FranchiseSetId = Coalesce(@franchiseSetId, p.FranchiseSetId)
                  --(@franchiseSetId IS NULL AND p.FranchiseSetId IS NULL) 
                  --OR
                  --(p.FranchiseSetId = @franchiseSetId)
               )
    END

IF @companyNamebit = 0
    BEGIN
        SET @AvailableWeight = @AvailableWeight + 10

        -- Add records where Company Name is an exact match
         Insert into #People
         Select 
            p.PersonId
         from Person p
         LEFT OUTER JOIN 
         Company c WITH (NOLOCK) 
            ON p.CompanyId=c.CompanyId
         Where c.Name = @companyName
            AND 
               (
                  p.RecordSourceId = Coalesce(@recordSourceId, p.RecordSourceId)
                  --(@recordSourceId IS NULL) 
                  --OR
                  --(p.RecordSourceId = @recordSourceId)
               )
               AND 
               (
                  p.FranchiseSetId = Coalesce(@franchiseSetId, p.FranchiseSetId)
                  --(@franchiseSetId IS NULL AND p.FranchiseSetId IS NULL) 
                  --OR
                  --(p.FranchiseSetId = @franchiseSetId)
               )
    END

If @franchiseSetId is not null
Begin
    -- WORKCENTER -- do not return results that are less than a 40% match of what was passed in
    SET @MinimumWeight = @AvailableWeight * 0.4
End
Else
Begin
    -- ClaimsEntry -- do not return results that are less than a 60% match of what was passed in
    SET @MinimumWeight = @AvailableWeight * 0.6
End

-- get list of unique records
Insert into @DistinctPeople
Select Distinct PersonID from #People order by PersonID

INSERT INTO @ReturnTable (PersonID, FirstName, LastName, CompanyName, EmailAddress, PhoneNumber1, PhoneNumber2, Score)
(
SELECT 
    DistinctPeople.PersonId,
    p.FirstName,
    p.LastName,
    c.Name,
    ea.[Address],
    null as PhoneNumber1,
    null as PhoneNumber2,
    Score = 
    (
        --first name score
        (
            (CASE WHEN @firstNamebit = 0 THEN 1 ELSE 0 END)
            *
            (CASE WHEN PatIndex(@firstName, p.FirstName)>0 THEN 1 ELSE 0 END)
            * 
            15
        )
        +
        --last name score
        (
            (CASE WHEN @lastNamebit = 0 THEN 1 ELSE 0 END)
            *
            (CASE WHEN PatIndex(@lastName, p.LastName)>0 THEN 1 ELSE 0 END)
            * 
            20
        )
        +
        --email score
        (
            (CASE WHEN @emailbit = 0 THEN 1 ELSE 0 END)
            *
            (CASE WHEN ea.[Address] = @email THEN 1 ELSE 0 END)
            *
            40
        )
        +
        --company score
        (
            (CASE WHEN @companyNamebit = 0 THEN 1 ELSE 0 END)
            *
            (CASE WHEN PatIndex(@companyName, c.Name)>0 THEN 1 ELSE 0 END)
            * 
            10
        )
    )
FROM
@DistinctPeople DistinctPeople
LEFT OUTER JOIN 
Person p WITH (NOLOCK) 
   ON DistinctPeople.PersonId=p.PersonId
LEFT OUTER JOIN 
PersonEmailAddress pea WITH (NOLOCK) 
   ON p.PersonId=pea.PersonId
LEFT OUTER JOIN 
EmailAddress ea WITH (NOLOCK) 
   ON pea.EmailAddressId=ea.EmailAddressId
LEFT OUTER JOIN Company c WITH (NOLOCK) 
   ON p.CompanyId=c.CompanyId
)

--If neither Phone number was passed as a parameter, the scores will not change
--   We can get rid of records that will not be returned
If @phoneNumber1bit = 1 and @phoneNumber2bit = 1
Begin
      -- update the phone number scores, the actual phone number values 
      --     can be in either the first or second position
       UPDATE rt 
       SET Score = Score +
               (
                   (CASE WHEN @phoneNumber1bit = 0 THEN 1 ELSE 0 END)
                   *
                   (CASE WHEN rt.PhoneNumber1 = @phoneNumber1 THEN 1 
                    WHEN rt.PhoneNumber2 = @phoneNumber1 THEN 1 ELSE 0 END)
                   *
                   30
               )
               +
               --phone 2 score
               (
                   (CASE WHEN @phoneNumber2bit = 0 THEN 1 ELSE 0 END)
                   *
                   (CASE WHEN rt.PhoneNumber1 = @phoneNumber2 THEN 1 
                    WHEN rt.PhoneNumber2 = @phoneNumber2 THEN 1 ELSE 0 END)
                   *
                   30
               )
       FROM @ReturnTable rt

      -- clear out the records we no longer care about
      DELETE FROM @ReturnTable WHERE  Score < @MinimumWeight
End

UPDATE rt 
SET rt.PhoneNumber1 =
(
    select top 1 xpn1.number 
    from PersonPhoneNumber xppn1 WITH (NOLOCK)  
    LEFT OUTER JOIN  
    PhoneNumber xpn1 WITH (NOLOCK) 
      on xppn1.PhoneNumberId =xpn1.PhoneNumberId
    where xppn1.PersonId = rt.PersonID
    order by (CASE 
                WHEN xpn1.Number = @phoneNumber1 then -999 
                  else xppn1.SequenceNumber 
              end )
)
FROM @ReturnTable rt

UPDATE rt 
SET rt.PhoneNumber2 =
(
    select top 1 xpn1.number from PersonPhoneNumber xppn1 WITH (NOLOCK)  
    LEFT OUTER JOIN  PhoneNumber xpn1 WITH (NOLOCK) on xppn1.PhoneNumberId =xpn1.PhoneNumberId
    where xppn1.PersonId = rt.PersonID
    and rt.PhoneNumber1 != xpn1.Number
            order by (CASE 
                    WHEN xpn1.Number = @phoneNumber2 then -998 
                  else xppn1.SequenceNumber end )
)
FROM @ReturnTable rt

-- update the phone number scores, the actual phone number values can be in either the first or second position
UPDATE rt 
SET Score = Score +
        (
            (CASE WHEN @phoneNumber1bit = 0 THEN 1 ELSE 0 END)
            *
            (CASE WHEN rt.PhoneNumber1 = @phoneNumber1 THEN 1 
                  WHEN rt.PhoneNumber2 = @phoneNumber1 THEN 1 ELSE 0 END)
            *
            30
        )
        +
        --phone 2 score
        (
            (CASE WHEN @phoneNumber2bit = 0 THEN 1 ELSE 0 END)
            *
            (CASE WHEN rt.PhoneNumber1 = @phoneNumber2 THEN 1 
                  WHEN rt.PhoneNumber2 = @phoneNumber2 THEN 1 ELSE 0 END)
            *
            30
        )
FROM @ReturnTable rt

-- clear out the records we no longer care about
DELETE FROM @ReturnTable WHERE  Score < @MinimumWeight

UPDATE rt 
SET Address1 = a.Address1,
    City = a.City,
    State = s.Abbreviation,
    PostalCode = a.PostalCode
FROM @ReturnTable rt
OUTER APPLY
    (
    SELECT  TOP 1 *
    FROM    PersonAddress pa WITH (NOLOCK)
    WHERE   pa.PersonId = rt.PersonID
    ORDER BY pa.SequenceNumber
    ) ppa
LEFT JOIN Address a WITH (NOLOCK) on ppa.AddressId = a.AddressId
LEFT JOIN State s WITH (NOLOCK) on a.StateId = s.StateId

Update  AppToolData..SearchLog 
   Set EndTime_UTC = SYSDATETIMEOFFSET()
Where rowid = @rowid

-- return only those that meet the minimum score/weight requirements
Delete FROM @ReturnTable WHERE Score < @MinimumWeight

SELECT * FROM @ReturnTable
--order by Score Desc   

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:06:26.743

根据来自 cadrell0 的信息和我们自己的测试，我们发现以下内容：

生成表并从该表返回行的存储过程仅在运行时执行此操作。当 Entity Framework 使用 fmtonly 调用时，它会引发错误，因为未创建运行时对象。

我们将 FMTONLY OFF 添加到我们的存储过程中，它允许实体框架查看表的格式，从而查看复杂对象的格式。

这允许我添加存储过程，获取正确的返回对象，现在我可以使用存储过程在围栏的数据库端执行我们的搜索。

这对我们很重要，因为原始代码正在使用它，而我们的代码必须使用它。