# StackOverflow 问答 12768000-12768999

# google-app-engine - HRD 迁移破坏了数据存储查询和索引

> ID：12768009
> 
> 赞同：2
> 
> 时间：2012-10-07T10:32:28.893
> 
> 标签：google-app-engine, migration, database-migration

Google appengine HRD 迁移对我来说是一场噩梦。我昨天将我的 55GB 数据存储迁移到 HRD。从那时起，许多查询和索引都被破坏了：

**一些例子**：

*   Select * from table1 where col1=val1 => query.get() 在 python 中返回空。但是，它适用于数据存储查看器。
*   从 table1 中选择 *，其中 col1=val1 => query.count()>0。但是 query.get() = 空。
*   Select * from table1 where col1=val1 order by col2 desc => 响应中几乎有一半的行丢失了。数据存储查看器中的相同行为。

如何修复这些表和索引？有什么方法可以让 Google Appengine 团队支持解决这个问题？它是一个 GAE 迁移工具错误。

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T15:09:48.853

使用迁移工具时，会分配一个新的 app id，这会使所有的 key 发生变化。

要重新创建自定义索引：

1.  暂时为空 index.yaml。
2.  清理索引（查看[如何在 Google 应用程序引擎中删除未使用的索引？](https://stackoverflow.com/questions/813839/how-can-i-remove-unused-indexes-in-google-application-engine)了解更多信息）。
3.  **等到所有索引都被删除。**
4.  恢复 index.yaml。
5.  通过重新部署应用程序或运行来创建索引`appcfg.py update_indexes <path>`（查看[文档](https://developers.google.com/appengine/docs/python/tools/uploadinganapp#Updating_Indexes)以获取更多信息）。

如果有的话，您可能还需要手动更新所有其他引用（例如键的 ListProperty）。

**编辑**
由 App Engine 自动管理的简单的单一属性索引是在放置属性时创建/更新的。
要重新生成它们，我建议创建并运行一个简单的 MapReduce 任务来放置每个现有实体。此过程应重建*所有*索引（包括 index.yaml 中定义的索引）。
由于这是一个成本高昂的过程，因此请先使用一些实体手动执行，看看它是否解决了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:37:28.780

桌子会在大约 2-3 天内自动修复。那是一个HRD问题。我的问题现在已经解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-01T02:02:14.643

**更新：最终它会在 24 小时内自行修复=）**

我和你有同样的问题

查询.count()>0。但是 query.get() 或 fetch() 是空的。

奇怪的是有些桌子工作正常，但有些桌子有这个问题

**我认为这是迁移非常大的表（模型）的 Google App Engine 问题。**

我希望我的桌子也能在 2-3 天内像你的一样恢复。

# grails - Grails 中引擎或可安装引擎的概念？

> ID：12768010
> 
> 赞同：0
> 
> 时间：2012-10-07T10:32:31.530
> 
> 标签：grails, grails-plugin

在 Rails 中似乎有一个非常流行的引擎概念，即使对于不是独立插件而是在 Web 应用程序中运行的包含微小 Web 应用程序的东西也是如此。

我知道 grails 有插件来补充主应用程序，但我想知道 grails 是否可以有子应用程序。例如，您有一个主应用程序，但想要一个论坛子应用程序，它只使用主应用程序中的 auth 和 auth 模型，因此它不需要自己的。

是否有关于 Grails 引擎概念的任何文档或一些基本概念教程？

本质上，我希望有一个处理身份验证和身份验证以及一些管理的小型主应用程序，但让我的所有其他功能成为子应用程序，例如拆分论坛、新闻、商店、博客等，但所有这些都依赖于身份验证和身份验证的主要应用程序。（制作更模块化的 grails 应用程序）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:40:24.897

Grails 插件在概念上与 Rails 引擎非常相似。正如您所描述的，Grails 插件系统当然可以用于创建可重用的组件。您可以将各种功能嵌入到 Grails 插件中，包括域类、控制器、UrlMappings 和视图——您将放入应用程序的大部分内容都可以放入插件中，并且它将被合并到使用该插件的任何应用程序中。

有一篇有点老的博客文章[在此处](http://grails.org/doc/latest/guide/plugins.html)描述了这种方法。Grails 用户指南也有[关于插件的详细章节](http://grails.org/doc/latest/guide/plugins.html)。

# google-apps-script - 获取电子邮件附件并保存到谷歌应用脚 本中的 oracle 表中

> ID：12768011
> 
> 赞同：3
> 
> 时间：2012-10-07T10:32:47.443
> 
> 标签：google-apps-script

我正在尝试使用谷歌应用程序脚本来检索电子邮件附件，下面是我的代码来检查电子邮件中是否有任何附件

```
function testMail() {
var threads = GmailApp.getInboxThreads();
for (var i = 0; i < 10; i++) {
  var mess=threads[i].getMessages()[0];
  if (mess.getAttachments().length>0)
  {
    //var filename=mess.getAttachments()[0].
    Logger.log(mess.getSubject());
    Logger.log(mess.getAttachments()[0].getName());
    var conn = Jdbc.getConnection("jdbc:oracle:thin:@xxx.xxx.xxx.xxx/xxx.xxx.xxx", "xxx","xxxxxxx");
    conn.setAutoCommit(false);
    var stmt = conn.prepareStatement("insert into blob_table (filnname,blob_field) values (?,?)");
    stmt.setString(1, mess.getAttachments()[0].getName());

    stmt.setBlob(2, mess.getAttachments()[0]);
    var res = stmt.execute();
    conn.commit();
    conn.close();    

    break;
  }  
}
} 
```

但是当我运行脚本时出现错误“找不到方法setBlob提示”，如果我只插入字段文件名，我可以将数据保存到表blob_table，有没有什么特殊的方法可以插入blob？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:45:54.240

如果您查看自动完成或文档，您会发现 JDBC 与 Apps 脚本的其余部分不同，它有自己的 JdbcBlob 概念，与 Blob 不同。（每个 JdbcBlob 都是 Blob，但反之则不然。）您可以像这样将常规 Blob 转换为 JDBC Blob：

```
conn.createBlob().setBytes(0, myOriginalBlob) 
```

在这种情况下`myOriginalBlob`，你从哪里得到什么`mess.getAttachments()[0])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-30T06:38:21.197

jdbcBlob 和 Blob 是两个不同的东西。在行`stmt.setBlob(2, xxxx);`

xxxx 是一个 jdbcBlob。如果您有 Blob，则需要在保存到 DB 之前将其转换为 jdbcBlob。

```
var jdbcBlob = conn.createBlob();
jdbcBlob.setBytes(1, blob); 
```

在您的示例中，正确的方法是

```
var jdbcBlob = conn.createBlob();
jdbcBlob.setBytes(1, mess.getAttachments()[0]);
stmt.setBlob(2, jdbcBlob); 
```

# r - 在 R 中循环使用 cumsum 获取多边形函数

> ID：12768013
> 
> 赞同：0
> 
> 时间：2012-10-07T10:33:05.480
> 
> 标签：r, loops

我正在研究 R 中的一个循环：

`dypol`和`wnc`是 1×3 矩阵并且`x`是 1×100 矩阵。我希望循环返回一个 3×100 矩阵（每列累积）。我有这个：

```
For (i in 1:100) {
i=dypol*t(x^2)-dypol+wnc
{yi = cumsum(i) }
} 
```

但它只返回第一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:52:41.750

试试这个。我已将循环转换为`sapply`调用（有效循环`x`），然后应用于`cumsum`结果矩阵的列：

```
x     <- 1:100
wnc   <- c(0.123, 0.263, 0.223)
dypol <- c(.05, .30, .02)

Z <- t(sapply(x, function(x)dypol * x ^ 2 - dypol + wnc))
apply(Z, 2, cumsum) 
```

# jquery - 如何让 jquery 函数在页面加载时运行？

> ID：12768015
> 
> 赞同：0
> 
> 时间：2012-10-07T10:33:22.190
> 
> 标签：jquery, jquery-selectors

我有这个 jQuery 函数，可以在输入时启用字段`Search`旁边的按钮`Search`：

```
$('form#search').on('keyup', 'input[type=text]', function(event) {
    if ($(this).val().length != 0) {
        $(this).next('input[type="submit"]').removeProp("disabled");
    } else {
        $(this).next('input[type="submit"]').prop("disabled", true);
    }
    event.preventDefault();     
}); 
```

如果这个功能也能自动运行`page load`就好了，而不仅仅是在`keyup`.

如何才能做到这一点？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:40:30.200

```
function check(){
    var text=$("form#search input[type=text]");
    if (text.val().length != 0) {
            text.next('input[type="submit"]').removeProp("disabled");
    } else {
            text.next('input[type="submit"]').prop("disabled", true);
    }
}

$(function(){
    //trigger when the text field is being filled with text
    $('form#search').on('keyup', 'input[type=text]', function(event) {
        check();
    });
    //trigger when the document is loaded
    check();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:36:33.693

```
$(function(){
  $('form#search').trigger('keyup');
}); 
```

# java - 将所有属性从 Java bean 设置为另一个

> ID：12768019
> 
> 赞同：2
> 
> 时间：2012-10-07T10:33:38.223
> 
> 标签：java

假设我有一个Java bean，比如Employee，有一些属性。
我想将 Employee 的所有属性复制到同一个 Java bean 的另一个实例中。

一种解决方案是使用 getter 获取属性并将其设置为另一个实例。但是如果 POJO 中有很多属性，那将很耗时。

有没有更快的方法来实现同样的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:38:56.843

正如 assylias 所提到的，复制 bean 所需的时间非常短。除非您需要每秒执行几百万次。

重要的一点（我认为）是减少愚蠢代码的数量，因此要“复制”一个 bean，您可以使其扩展[Clonable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Cloneable.html)，其余的由 JVM 完成。你只需要调用 bean.clone()。

另一个更灵活的选择是使用[Apache BeanUtils](http://commons.apache.org/beanutils/apidocs/org/apache/commons/beanutils/BeanUtils.html)，它可以使用反射在对象之间复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:40:16.420

`Object.clone`执行浅拷贝，因此最好滚动自己的拷贝构造函数：

```
public class Dog {
    public final List<String> names;
    public int age;
    public int weight;

    public Dog() {
        names = new ArrayList<String>();
    }

    protected Dog(Dog original) {
        names = new ArrayList<String>(original.names);
        age = original.age;
        weight = original.weight;
    }

    public Dog copy() {
        return new Dog(this);
    }
} 
```

[荣誉](http://www.xenoveritas.org/blog/xeno/java_copy_constructors_and_clone)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T10:56:39.023

如果您只有几个类来支持克隆，那么覆盖 clone() 可能是最快的解决方案。否则，如果您需要通用解决方案，请不要重新发明轮子：

*   [BeanUtils](http://commons.apache.org/beanutils/)
*   [推土机](http://dozer.sourceforge.net/)
*   [克隆](http://code.google.com/p/cloning/wiki/Usage)
*   [通用深拷贝](http://www.genericdeepcopy.com/)

# php - 如果选中复选框，请检查 mysql 数据库

> ID：12768020
> 
> 赞同：0
> 
> 时间：2012-10-07T10:33:59.300
> 
> 标签：php, mysql, ajax, checkbox

我想检查是否通过 mysql 数据库请求检查了复选框。它应该是这样的（只是一个概念代码，当然不工作）应该可以与 ajax 一起工作，因为我不想一直重新加载：

```
$ergebnis = $mysqli->query("SELECT text,status FROM checkboxes where id=1 ;");

            while($zeile = $ergebnis->fetch_array()) {
                echo "<input type=\"checkbox\";
                if ({$zeile['status']} == "true") {checked=\"checked\"}\n ;
                 echo " name=\"feld\" class=\"checkIt\"/>";
                echo " {$zeile['text']}\n";
                echo "";
            }
            ?> 
```

我在数据库中有 3 个字段。显示复选框旁边的文本的一个文本字段，一个状态字段，脚本可以在其中查看某些内容是“真”还是“假”，这是一个自动增量 ID。我希望你能帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:42:21.630

写这段代码

```
$ergebnis = $mysqli->query("SELECT text,status FROM checkboxes where id=1 ;");

while($zeile = $ergebnis->fetch_array()) {
    $text = "";
    $text .= "<input type=\"checkbox\"";
    if ({$zeile['status']} == "true") { $text .= " checked=\"checked\""; }
    $text .= " name=\"feld\" class=\"checkIt\"/>";
    $text .= "{$zeile['text']}";
    echo $text;
    //echo "";
} 
```

您的代码中存在很多错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:49:32.880

```
$ergebnis = $mysqli->query("SELECT text,status FROM checkboxes where id=1 ;");

            while($zeile = $ergebnis->fetch_array()) {
                echo '<input type="checkbox"';
                if ({$zeile['status']} == "true") { echo ' checked="checked"'; }
                echo ' name="feld" class="checkIt" />';
                echo $zeile['text'];
            }
            ?> 
```

# php - 字符串到列表的转换

> ID：12768025
> 
> 赞同：0
> 
> 时间：2012-10-07T10:34:35.210
> 
> 标签：php

几年后我又回到了 Lisp，当时 Common Lisp 只是计算机科学家眼中的一闪而过！我对 Lisp 的体验主要是列表（例如，使用 setq、cdr 和 cadr 函数）。经过一番摸索，我设法从键盘上读取了一行文本，使用“read-line”，但后来发现它是一个字符串。Sooooo，是否有一个函数可以将（比如说）“THE CAT SAT ON THE MAT”转换为（THE CAT SAT ON THE MAT）？

任何帮助将不胜感激！

西蒙苏格兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:40:38.433

如果我没记错的话，`(string string1 string2)`指的是 LISP 中的字符串数组。在这种情况下，您想使用[`explode()`](http://php.net/manual/en/function.explode.php)功能：

```
$explodedArray = explode(" ", $yourLongString);
var_dump($explodedArray);
foreach($explodedArray as $strEach){
    echo $strEach . "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:41:01.637

使用它将字符串转换为数组

```
$array = explode(" ",$inputStr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T10:38:12.480

好吧，如果我理解正确并且您希望在 PHP 中从输入字符串`THE CAT SAT ON THE MAT`获取输出字符串`(THE CAT SAT ON THE MAT)`，那么这应该没问题：

```
<?php
    $inputStr = 'THE CAT SAT ON THE MAT';
    $outputStr = '('. $inputStr .')';
    echo $outputStr;
?> 
```

**编辑：** 现在，当我看到 (str str) 是一个列表时，这应该可以工作：

```
<?php
    $outputArray = explode(" ",$inputStr); 
?> 
```

$outputArray 变量的 var_dump 将是：

```
array(6) {
    [0]=>
        string(3) "THE"
    [1]=>
        string(3) "CAT"
    [2]=>
        string(3) "SAT"
    [3]=>
        string(2) "ON"
    [4]=>
        string(3) "THE"
    [5]=>
        string(3) "MAT"
} 
```

# python - 将零写入文件块

> ID：12768026
> 
> 赞同：4
> 
> 时间：2012-10-07T10:34:42.037
> 
> 标签：python, file-io

我正在尝试识别与特定文件相关联的块并将零写入它们。我发现了几种方法可以对磁盘上的可用空间执行此操作，但到目前为止，我还没有找到任何关于执行以下操作的建议：

*   识别文件的块
*   将零写入这些块。

这样做的目的是为了虚拟化系统。该系统能够对标识为相同的块进行重复数据删除。这用于减少驱动器上的来宾操作系统使用的空间。

目前正在使用`dd`将零写入驱动器上的可用空间来完成此操作。然而，这对 VMWare 系统有副作用，导致客户操作系统驱动器使用它已分配的整个磁盘空间，因为从那时起，系统上所有字节都已写入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T12:21:42.487

编写甚至可以安全地修改未挂载的文件系统的代码将需要付出巨大的努力。除非没有其他选择，否则应避免。

您基本上有两种选择可以轻松修改文件系统：

*   *在*虚拟环境中运行 python 。
*   在主机上挂载虚拟化文件系统。大多数类 UNIX 系统都可以做到这一点，例如借助[FUSE](http://fuse.sourceforge.net/)（支持[多种文件系统类型](http://sourceforge.net/apps/mediawiki/fuse/index.php?title=FileSystems)）和[循环设备](http://en.wikipedia.org/wiki/Loop_device)。

这样您就可以使用（来宾或主机）操作系统的文件系统代码，而不必自己动手。:-) 如果您可以使用这些选项之一，下面列出的代码片段将用零填充文件：

```
import os

def overwrite(f):
    """Overwrite a file with zeroes.

    Arguments:
    f -- name of the file
    """
    stat = os.stat(f)
    with open(f, 'r+') as of:
        of.write('\0' * stat.st_size)
        of.flush() 
```

# php - 如何使用 id 按类别排序保持下一个和上一个分页

> ID：12768027
> 
> 赞同：2
> 
> 时间：2012-10-07T10:34:42.983
> 
> 标签：php, mysql

我的数据库有 2 个表 "category" 和 "article" ，

```
Category

id | Category
---------------------
 1   Mobiles
 2   Computers
--------------------
Article

id | Category    | title   |article   
-------------------------------------
 1   2      title      article desc   
 2   1     title      article desc
 3   1     title      article desc
 4   1     title      article desc
 5   2     title      article desc

-------------------------------------- 
```

我为文章页面生成的 url 就是这种格式。

```
URL/ID/TITLE 
```

我想在当前文章页面中显示下一篇和上一篇文章的标题。

所以我使用下面的代码来显示下一个和上一个标题的链接。

上一篇文章

```
$getid = $_GET['id'];
$previous = $getid - 1;
$previousdata = $db->getRow("select * from article WHERE news_id='$previous'"); 
```

下一篇

```
$getid = $_GET['id'];
$next = $getid + 1;
$nextdata = $db->getRow("select * from article WHERE news_id='$next'"); 
```

和 php 代码之类的

```
<a href="http://www.domain.com/article-<?php echo ($previousdata['news_id']); ?>/<?php  echo friendlyURL($previousdata['title']); ?>"> <?php echo  friendlyURL($previousdata['title']); ?></a> 
```

这很好用，它使用 id 显示下一个和上一个链接中的手机和计算机帖子，

if i post 2 articles in mobiles category the generated id was 12 and 13 for example, and next if i post an article in computer category the generated id was 14\. when the user reading mobile article of id 13 ,at bottom it shows previous article title with id 12 and next article title with id of 14 . Obviously the previous article is mobile and next is computers categories.

But i would like to show only the next and previous pagination with "mobiles" category only,

So i try to assign the category

```
 $getid = $_GET['id'];
 $next = $getid + 1;
 $nextdata = $db->getRow("select * from article WHERE Category=1 AND id='$next'"); 
```

This doesn't filter only mobile ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:46:04.330

You can directly get it from query as below

```
$getid = $_GET['id'];
$nextdata = $db->getRow("select * from article WHERE Category=1 AND news_id > ".$getid." order by news_id ASC LIMIT 0,1");

$previousdata = $db->getRow("select * from article WHERE Category=1 AND news_id < ".$getid." order by news_id DESC LIMIT 0,1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:47:20.023

If I understand you want to get then next/previous article id in the same category:

The next article:

```
$nextdata = $db->getRow("
    select * 
    from article 
    where Category = 1 and id > $current_article_id
    order by id
    limit 1
"); 
```

The previous article:

```
$previousdata = $db->getRow("
    select * 
    from article 
    where Category = 1 and id < $current_article_id
    order by id desc
    limit 1
"); 
```

# c# - c# 套接字关闭

> ID：12768029
> 
> 赞同：0
> 
> 时间：2012-10-07T10:34:53.883
> 
> 标签：c#, sockets, networking, network-programming

我正在开发一个 http 代理应用程序，一切正常（客户端可以连接到服务器并获取内容），问题既不是 HTTP 服务器也不是浏览器关闭 TCP 连接。我不确定我是否在做没错，代码如下：

```
while (tcp_link.Connected && _tcp.Connected && !ioError)
{
  try
  {
      Thread.Sleep(100);
      if (streamLink.DataAvailable)
      {
          byte[] l_buffer = new byte[10000];
          int l_read = streamLink.Read(l_buffer, 0, l_buffer.Length);
          byte[] l_data = new byte[l_read];
          Array.Copy(l_buffer, l_data, l_data.Length);

          _stream.Write(l_data, 0, l_data.Length);
      }

      if (_stream.DataAvailable)
      {
          byte[] c_buffer = new byte[10500];
          int c_read = _stream.Read(c_buffer, 0, c_buffer.Length);
          byte[] c_data = new byte[c_read];
          Array.Copy(c_buffer, c_data, c_data.Length);

          streamLink.Write(c_data, 0, c_data.Length);
      }
  }
  catch
  {
      ioError = true;
  }
} 
```

我双方都有相同的代码（代理客户端和代理服务器）

注意：浏览器将连接到代理客户端（在同一台计算机上），代理客户端将连接到代理服务器，显然代理服务器将连接到 http 服务器，原因是我不想在发送数据之前对其进行编码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:48:49.750

您观察到连接打开了多长时间？

客户端很可能使用 HTTP 1.1，其中持久连接默认处于打开状态。

如果您正在编写代理，那么您应该考虑：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:28:31.607

好的，我发现了问题，谁曾经在关闭套接字连接时遇到问题..

实际上，`Socket.Available`没有像我预期的那样工作，要查看套接字是否真的连接，您应该检查 Available 和 Poll 属性，下面的函数应该可以解决您的问题：[感谢：zendar](https://stackoverflow.com/questions/2661764/how-to-check-if-a-socket-is-connected-disconnected-in-c)

```
bool SocketConnected(Socket s)
{
      bool part1 = s.Poll(1000, SelectMode.SelectRead);
      bool part2 = (s.Available == 0);
      if (part1 & part2)
            return false;
      else
            return true;
} 
```

我希望这也能解决你的问题；）

# c++ - Stroustrup 第 4 章练习 6：提高效率

> ID：12768032
> 
> 赞同：0
> 
> 时间：2012-10-07T10:35:16.343
> 
> 标签：c++, string, vector, performance

该练习要求提供一个代码，该代码可以将用户输入的数字 0-9 作为整数或字符串分别转换为字符串或整数，即如果`0`输入`"zero"`将被输出，反之亦然。

```
string number;

cout << "Let's convert strings to numbers."
     << "Enter value/string of 0-9";

while (number!= "exit")
{
    cin >> number;

    for (int i=0; i < digits.size(); i++) 
    {
        if (number == digits[i]) cout << i << endl;
    }   

    if (number == "0")      cout << digits[0] << endl;
    else if (number == "1") cout << digits[1] << endl;
    else if (number == "2") cout << digits[2] << endl;
    else if (number == "3") cout << digits[3] << endl;
    else if (number == "4") cout << digits[4] << endl;  
    else if (number == "5") cout << digits[5] << endl;  
    else if (number == "6") cout << digits[6] << endl;  
    else if (number == "7") cout << digits[7] << endl;
    else if (number == "8") cout << digits[8] << endl;  
    else if (number == "9") cout << digits[9] << endl;  
} 
```

digits 是一个向量类，用于存储字符串`"zero"`等`"one"`。

这段代码工作正常，但**我不喜欢**长长的语句链，`if/else if`但我想不出一种将整数转换为字符串的方法。有人可以帮我提高效率吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T10:42:50.957

你可以使用那个，`if number == "0"`那`number[0] == '0'`就是`char`.

ei 而不是 if/else 语句：

```
if (number[0] >= '0' && number[0] <= '9' )
  std::cout << digits[number[0] - '0'] << std::endl;
else
  std::cout << "wrong input - needs to be digit" << std::endl; 
```

`string`基本上是一个字符数组，`std::string`是一个类型的字符数组`char`。例如，这是在 c 或 c++ 中声明和初始化字符串的两种合法方式

```
char s[3] = { '0', '1', '\0' }; 
char s[3] = "01"; 
```

Char 值在技术上是整数（或者更确切地说是字节），它以某种编码（通常是 ASCII）存储字符代码。比如**'0'**的字符码是**48**，**'1'**的字符码是**49**，**'2'**是**50**。我们使用它，因为我们知道

```
'3' - '0' = 51 - 48 = 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:38:31.643

你可以`digits[number[0] - 48]`摆脱 if/else if。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T20:02:14.373

只需使用 isdigit 检查它是否为 0-9 [http://www.cplusplus.com/reference/clibrary/cctype/isdigit/](http://www.cplusplus.com/reference/clibrary/cctype/isdigit/)

如果它是一个数字，您可以使用aoti [http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/将其转换为int](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)

最后只是说

```
cout << digits[aoti(number)]; 
```

# excel - Excel 到 datagridview Microsoft.ACE.OLEDB.14.0

> ID：12768037
> 
> 赞同：0
> 
> 时间：2012-10-07T10:35:33.857
> 
> 标签：excel, datagridview, oledb, oledbconnection

我正在尝试从 excel 表中填充我的数据网格视图。我在这里收到的错误消息是，oledb 异常没有被处理->`The 'Microsoft.ACE.OLEDB.14.0' provider is not registered on the local machine.`我正在使用 2012 年的办公室，我是否必须使用任何参考。

我将`anycpu`X86 放在项目属性中。

有系统文件：

```
using System;
using System.Data;
using System.Drawing;
using System.Reflection;
using System.Collections.Generic;
using System.Windows.Forms;
using Excel = Microsoft.Office.Interop.Excel;
using System.Data.OleDb;

private void importXSLToolStripMenuItem_Click(object sender, EventArgs e)
        {
            OleDbConnection connect = new OleDbConnection();

            connect.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\test\csharp.net-informations.xls;ExtendedProperties=""Excel 14.0;HDR=YES;""";

            OleDbCommand command = new OleDbCommand("SELECT ID, TYPE, BeginBorder (mm),EndBorder (mm)," + "FROM [P2S2$]", connect);

            DataSet ds = new DataSet();
            OleDbDataAdapter adapter = new OleDbDataAdapter(command);
            adapter.Fill(ds);
            dataGridView1.DataSource = ds.Tables[0];

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T06:47:55.370

试试这个 connect.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.14.0;Data Source=C:\test\csharp.net-informations.xls;ExtendedProperties=Excel 12.0;";

它应该是最好的问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:27:23.037

这是 connectionString 的问题：

```
connect.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.14.0;Data Source=C:\test\csharp.net-informations.xls;ExtendedProperties=""Excel 12.0;HDR=YES;"""; 
```

我已添加对项目的引用并更改为任何 CPU。

# android - 基本微调器不当行为

> ID：12768038
> 
> 赞同：2
> 
> 时间：2012-10-07T10:35:37.160
> 
> 标签：android, adapter, android-spinner

我有一个简单的布局（两个`TextViews`和一个`Spinner`），方法中的数组和`MainActivity.java`which`onCreate`通过适配器填充`Spinner`.

当我执行应用程序时，我可以单击`Spinner`但在 android 4.3（API 级别 16）中没有任何反应，并且在 android2.3.3（Api 级别 10）中显示一个空的白行。我不应该至少看到并选择其中一个字符串吗？

**主.xml**：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/question"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:text="@string/question" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/question"
        android:text="@string/one" />

   <Spinner
       android:id="@+id/nationalities_spinner"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_below="@+id/question"
       android:layout_toRightOf="@+id/textView1"
       android:entries="@array/nationalities_array"
       android:tag="@string/select_string" />

</RelativeLayout> 
```

的数组`Spinner`：

```
<string-array name="nationalities_array">
    <item>Italian</item>
    <item>German</item>
    <item>British</item>
    <item>Dutch</item>
</string-array> 
```

和`MainActivity.java`：

```
 public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);  
        Spinner nationalities_spinner  = (Spinner) findViewById(R.id.nationalities_spinner);
        ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(this, R.array.nationalities_array, android.R.layout.simple_spinner_item); 
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        nationalities_spinner.setAdapter(adapter);
    }

    public void onResume(){
        super.onResume();

    } 

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:52:42.503

您看不到任何内容，因为您`Spinner`使用了不正确的构造函数`ArrayAdapter`，导致. 您使用[此](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20int%29)[构造函数](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20int%29)并提供与它想要的不同的东西（布局文件资源和来自该布局文件的 id）。相反，您可能想要这个：`ArrayAdapter``Spinner`[`ArrayAdapter`](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20int%29)`TextView`

```
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.nationalities_array, android.R.layout.simple_spinner_item); 
```

# php - 将 Symfony2 与 Solr 连接起来

> ID：12768039
> 
> 赞同：2
> 
> 时间：2012-10-07T10:35:41.500
> 
> 标签：php, symfony, solr

很清楚，如何在 Symfony2 框架中插入 Solr？我在那里找到了一些资源，但它们完全不清楚或不完整。应该有一个名为[NelmioSolariumBundle](http://knpbundles.com/nelmio/NelmioSolariumBundle)的 Symfony2 包，但不能很好地得到它，文档很差。
如果您已完成此操作，请通过几个*入门步骤向我们提供操作**方法的*答案，或者任何简单明了的文档/教程将不胜感激。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T21:09:56.400

Solr 可以通过它的 REST 接口轻松连接，因此如果您有一个简单的用例，您可能只需要使用可以与 solr 对话的 PHP 库。

我使用托管在谷歌代码上的[这个](http://code.google.com/p/solr-php-client/)库。此外，我正在开发一个 solr 捆绑包，它提供了一种索引学说实体的便捷方式，它可以在[这里](https://github.com/roomthirteen/Room13SolrBundle)找到，但它也在进行中，几乎没有文档......

到目前为止，功能仅限于通过 cli 索引实体并执行标准搜索。我目前正在另一个捆绑包中使用它来索引地理数据库并为位置提供自动完成表单类型，您可以查看代码以了解[此处](https://github.com/roomthirteen/Room13GeoBundle)的用法...

如果我的包没有任何帮助，您可能会了解如何创建自己的实现。*

# c++ - 在列表控件中获取选定项目，更改子项目

> ID：12768041
> 
> 赞同：0
> 
> 时间：2012-10-07T10:36:10.620
> 
> 标签：c++, mfc, listcontrol

我怎样才能点击一个项目，然后更改它的所有子项目状态？

![在此处输入图像描述](../Images/c078f164ff5fc70a9747a87ef5c06ac2.png)

我知道我可以使用 GetFirstSelectedItemPosition 获取所选项目，但是如何在给定位置使用 SetItemState？

编辑：我基本上是在寻找这个：m_ListControl.SetExtendedStyle(LVS_EX_FULLROWSELECT)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:51:22.097

为通知创建通知处理程序`LVN_ITEMCHANGED`。每当使用鼠标或键盘选择了新项目时，都会调用此处理程序。如果您特别需要处理鼠标点击，请为通知创建通知处理程序`NM_CLICK`。

两个事件处理程序的`LPARAM`参数都指向一个包含名为 的成员的结构`iItem`。这是刚刚选择或单击的项目的索引。将此`iItem`用作方法的第一个参数`SetItemState`。

# java - 守护线程行为java

> ID：12768047
> 
> 赞同：1
> 
> 时间：2012-10-07T10:36:47.850
> 
> 标签：java, multithreading

我对 Daemon 线程的了解是，如果没有用户线程在运行并且所有剩余线程都是 Daemon 类型，JVM 将退出。

当我运行下面的程序时，我总是看到输出为“主线程结束”作为第一行，打印“Hello from Worker 0”等等，直到还有几行”。

我的问题是，如果 Worker 线程被设置为守护进程，那么当主线程结束时，Worker 线程应该死掉并且不会继续，但仍然会打印“Hello from Worker 0”和子行，并且在一段时间后只有 JVM 结束，为什么它是这样的吗？

如果我的问题无效，我很抱歉，但我想知道答案并有疑问。

```
public class Test {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        new WorkerThread().start() ;
        System.out.println("Main Thread ending") ;
    }

}
class WorkerThread extends Thread {

    public WorkerThread() {
        setDaemon(true) ;   
    }

    public void run() {
        int count=0 ;
        while (true) {
            System.out.println("Hello from Worker "+count++) ;
            count++;
        }
    }
} 
```

## 输出

```
Main Thread ending
Hello from Worker 0
Hello from Worker 2
Hello from Worker 4
Hello from Worker 6
Hello from Worker 8 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T10:45:43.007

> ....但是仍然打印了“来自 Worker 0 的 Hello”和儿子在线，并且在一段时间后只有 JVM 结束，为什么它的行为是这样的？

最可能的解释是，工作线程要么在 JVM 注意到主线程已经退出之前，要么在作为 JVM 关闭的一部分进行其他清理工作时将这些行写入 System.out 缓冲区。

但归根结底，额外的输出不太可能很重要，所以我建议你忽略它。（消除它可能相当困难......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T11:26:11.347

在打印该行后主线程立即退出的任何地方都不能真正保证，因此仍然可能存在守护线程可以打印某些内容的时间窗口。

# node.js - 试图理解 node.js 中的可读流

> ID：12768053
> 
> 赞同：1
> 
> 时间：2012-10-07T10:38:12.673
> 
> 标签：node.js

在我的`module.js`我有

```
var Stream = require('stream');

module.exports = function () {
  var stream = new Stream();

  stream.readable = true;

  stream.emit('data', 'some stuff')
  stream.emit('end')

  return stream;
} 
```

在我的`index.js`

```
var module = require('./module')

module().pipe(process.stdout) 
```

[流手册](https://github.com/substack/stream-handbook#readable)中的子堆栈示例运行良好。为什么我的代码在命令行中没有显示任何内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:48:04.917

因为您在调用之前发出数据`pipe`，并且在触发第一个 'data' 事件后附加了 'data' 侦听器

EventEmitter 的调用是同步的（与 node.js 中几乎所有其他非 IO 一样）

稍微简化的版本

```
stream.emit('data', 'some stuff')
stream.pipe(process.stdout) 
```

没有 EventEmitter 可以重写为

```
stream.listeners = [];
// 'emit' call
var ondata = stream.listeners.data;
if (ondata) {
   // only one listener case in the example
   ondata('some stuff');
}
// 'pipe' call
stream.listeners.data = function(buff) {
    process.write(buff);
} 
```

# java - 为什么 mkdir() 有时不起作用？

> ID：12768057
> 
> 赞同：4
> 
> 时间：2012-10-07T10:38:47.730
> 
> 标签：java, multithreading, mkdir

我编写了这个程序来测试`mkdir()`失败的场景。为什么会失败？

有时它工作正常，有时我得到：

> 无法创建 DIR :: myDir4 无法创建 DIR :: myDir4

最后我发现每个目录都被创建了......

在每次测试中，我都会删除所有创建的目录。

我尝试了这个，因为在我的项目中有 100 个线程试图测试和创建这样的目录......并且也以同样的方式失败......

```
public class DFS {
    static long time1 = System.currentTimeMillis();
    public static void main(String a[]) {
        new Thread(new CreteDir()).start();
        new Thread(new CreteDir()).start();
        new Thread(new CreteDir()).start();
        new Thread(new CreteDir()).start();
        new Thread(new CreteDir()).start();
        new Thread(new CreteDir()).start();
        new Thread(new CreteDir()).start();
        new Thread(new CreteDir()).start();
    }
}

class CreteDir implements Runnable {
    public void run() {
        //Object obj = new Object();
        synchronized (this) {
        if(System.currentTimeMillis() - DFS.time1 > 10) {
            try {
                this.wait();
            }
            catch(InterruptedException ie) {
                ie.printStackTrace();
            }
        }
        File f1 = new File("myDir1");
        File f2 = new File("myDir2");
        File f3 = new File("myDir3");
        File f4 = new File("myDir4");
        File f5 = new File("myDir5");

        if (!f1.exists()&&!f1.mkdir()) {
            System.out.println("Cannot create DIR :: "+f1.getName());
        }
        if (!f2.exists()&&!f2.mkdir()) {
            System.out.println("Cannot create DIR :: "+f2.getName());
        }
        if (!f3.exists()&&!f3.mkdir()) {
            System.out.println("Cannot create DIR :: "+f3.getName());
        }
        if (!f4.exists()&&!f4.mkdir()) {
            System.out.println("Cannot create DIR :: "+f4.getName());
        }
        if (!f5.exists()&&!f5.mkdir()) {
            System.out.println("Cannot create DIR :: "+f5.getName());
        }
        this.notifyAll();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T10:49:30.807

你有一个竞争条件。

每个线程都会尝试检查每个目录，如果它还不存在则创建它。正在发生的事情是这样的：

*   线程`A`测试`myDir4`并发现它不存在
*   线程`B`测试`myDir4`并发现它不存在
*   线程`A`创建`myDir4`...成功！
*   线程`B`创建`myDir4`...失败！它已经存在。

这可能发生在任何目录中……或者根本不会发生……取决于操作系统如何调度 Java 线程等。

* * *

您的代码正在尝试在 上同步`this`，但尝试无效。这`this`将是`CreteDir`当前线程正在使用的实例......但每个线程都有不同的实例，因此实际上没有线程间同步。为了有效地同步，所有线程都需要在同一个对象上同步......但这会使您的多线程无效，因为粒度是错误的。

事实上，您的整个多线程策略需要重新考虑。这不是“真正的代码”这一事实意味着我们无法真正建议您如何做到这一点。

在您最后一条评论的字里行间阅读，我认为您有三种可能的策略：

*   当目录不存在时，只需使用“全局”锁来同步创建目录。像这样的东西：

    ```
    // Test first without locking to reduce the concurrency bottleneck
    if (!dir.exists()) {
        synchronize (globalDirLock) {
            // Repeat the test while holding the lock
            if (!dir.exists()) { 
                if (!dir.mkdir()) {
                    System.out.println("OOOPS!");
                }
            }
        }
    } 
    ```

*   创建一个内存数据结构，每个目录有一个（锁定）对象。需要仔细填充该数据结构以避免竞争条件，即两个同时的客户端请求最终为单个目录创建两个锁定对象。

    （如果您稍微调整一下这个方案，您可能还可以使用锁定对象的存在来避免重复检查目录是否存在。检查涉及系统调用，并且在处理器开销方面非常重要。）

*   只需忽略`File.mkdir()`返回的情况`false`。（也许做另一个`File.exists()`或`File.isDirectory()`测试......以防万一。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T13:58:25.807

您可以尝试以下操作，而不是添加全局锁：

```
if (!f1.exists()&&!f1.mkdir()&&!f1.isDirectory()) {
            System.out.println("Cannot create DIR :: "+f1.getName());
        } 
```

`isDirectory()`将告诉该目录是否已经创建。

# c# - ASP NET 图像 onmouseover 不起作用

> ID：12768064
> 
> 赞同：0
> 
> 时间：2012-10-07T10:39:48.763
> 
> 标签：c#, asp.net

我的页面中有 2 张图片。我想要做的是，当我将鼠标移到第二张图像上时，第一张图像将变为另一张图像，但有些东西不起作用。

代码：

```
<asp:Image ID="imgProduct" runat="server" ImageUrl="~/Images/1.png" />
<asp:Image ID="Image1" runat="server" ImageUrl="~/Images/2.png"  onmouseover="imgProduct.src='Images/2.png';"/> 
```

如果我将 ID 更改为母版页中`onmouseover="imgProduct.src=`的任何图像 ID，则该图像正在正确更改，但它在默认页面中不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:51:22.643

试试这个：

```
<asp:Image ID="Image1" runat="server" ImageUrl="~/Images/2.png"  
onmouseover="javascript:document.getElementById('imgProduct').src=this.src;" /> 
```

祝你好运 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:16:20.490

在 Page_Load 事件中添加这一行。

```
Image2.Attributes.Add("onmouseover",imgProduct.ClientID+".src='Images/2.png'"); 
```

# c++ - c ++似乎变量不会与多线程“刷新”

> ID：12768066
> 
> 赞同：0
> 
> 时间：2012-10-07T10:40:10.637
> 
> 标签：c++, multithreading

is_master_def：

```
volatile bool is_master_; 
```

**is_master_**值被另一个线程设置为 true ，但似乎**is_master_**值不会刷新（它不会导致致命错误发生......）。如果我添加 cout << "foo" <

```
void MasterSlaveSynchronize::validateSingleMaster(){
    if(is_master_){
        cout << "FATAL ERROR HAS OCCURRED BOTH MASTER";
        if(!is_leader_master_){
            cout << "CHOSE AS VICTIM IN MASTER-MATSER. SET THIS HOST AS SLAVE";
            is_master_ = false;
        }
    }
} 
```

调用方代码：

```
while(1){
        int n = recvfrom(sockId, buf, HEARBEAT_SIZE, 0, (struct sockaddr *) &from,
                &length);
        if (n < 0) {
            REGISTER_ERROR("Failed to recieved hearbeat");
        } else {
            gettimeofday(&instance_->last_hearbeat_got_, NULL);
            instance_->validateSingleMaster();
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T11:04:32.213

你想让我发表我的评论作为答案：

> 也许确实如此，但是因为您不使用换行符，所以您的输出流不会刷新。

这种行为在这里得到了很好的解释：

[为什么 printf 在调用后不刷新，除非换行符在格式字符串中？](https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin)

# javascript - 如何在 sqlite 中使用更新集

> ID：12768070
> 
> 赞同：0
> 
> 时间：2012-10-07T10:40:26.393
> 
> 标签：javascript, sqlite

我正在尝试使用以下代码更新表格行

```
t.executeSql('UPDATE flatcomments SET BuildingCode = ?, FlatNo = ?, Comment = ?, Closed = ?, New = ?)', 
[buildingcode, flatdescription, flatcomment.toUpperCase(), 1, 1]); 
```

没有成功。我哪里错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:47:05.110

这是一个不错的 PHP 教程。所有 SQLite 命令都适用于您。

```
<?php

# CREATING A TABLE
$dbname = 'base';
$mytable ="tablename";

$base= new SQLiteDatabase($dbname, 0666, $err);
if ($err)  exit($err);

$query = "CREATE TABLE $mytable(
            ID bigint(20) NOT NULL PRIMARY KEY,
            post_author bigint(20) NOT NULL,            
            post_date datetime,
            post_content longtext,
            post_title text,
            guid VARCHAR(255)            
            )";

$results = $base->queryexec($query);
# The SQL command CREATE TABLE defines the columns. It is sent to the SQLite manager by the PHP method queryExec() which returns true or false, depending on whether the operation is successful or not.

# See the code of the script sqlite-create-table.php.

# ADDING POSTS

# The table of posts that we just created will be filled, like in Wordpress, with the posts we write, each post corresponding to a row of the table.
# The SQL command: INSERT INTO allows to store the data.
$number = 1;
$title="My first post";
$content="The content of my post...";
$date = strftime( "%b %d %Y %H:%M", time());
$author=1;
$url = "http://www.lantian.eu";

$query = "INSERT INTO $mytable(ID, post_title, post_content, post_author, post_date, guid) 
                VALUES ('$number', '$title', '$content', '$author', '$date', '$url')";
$results = $base->queryexec($query);
# For the purposes of the tutorial, we place the contents of the post directly into variables. In practice these variables will be assigned from an t online or local ext editor, as shown in the CMS tutorial.
# The author is represented by the number 1 because Wordpress does not put the names in the posts table but in a separate table instead.
# The guid column contains the URL of the post that also serves as an ID unique.
# The INSERT command jas for first parameter the table name and in parentheses the list of columns to fill, then the parameter VALUE provides a list of values corresponding to the columns in the same order.
# Thus, post_title, which contains the titles, will has for value $title, the variable that was assigned the title of the post.
# The same queryExec method is used to send the request.

# Source code of the script sqlite-write.php.

# READING A POST
# You can access the contents of the database with the SELECT command.
$query = "SELECT post_title, post_content, post_author, post_date, guid FROM $mytable";
$results = $base->arrayQuery($query, SQLITE_ASSOC);
$arr = $results[0];

if($results)
{
   $title = $arr['post_title'];
   $content = $arr['post_content']; 
   $user = $arr['post_author'];
   $date = $arr['post_date'];
   $url = $arr['guid'];
}     
# To the SELECT command is given the list of columns that you want get the content and lines will be assigned to $results array. Indeed, the arrayQuery PHP method returns an array of arrays, each representing a line of the table.
# In practice we will use instead other commands that we will see later to limit the resources usage.
# Data are retrieved in the associative array $arr, where the column names are keys and their content the values.

# Source code of the script sqlite-read.php.

# DELETING A TABLE
# The deletion of a table is made by the DROP TABLE command of SQL.
$query = "DROP TABLE $mytable";
$results = $base->queryexec($query);

# See the code sqlite-delete-table.php.

?> 
```

# html - 在块级 HTML 元素中垂直居中文本

> ID：12768083
> 
> 赞同：0
> 
> 时间：2012-10-07T10:42:03.130
> 
> 标签：html, css, alignment

我有一个关于如何在 html / css 中将 div 内的文本居中的问题。我有一个像这样的 h3 标签

```
<h3>Pacuraru Daniel Pacuraru Daniel</h3>
or
<h3>Pacuraru Daniel</h3> 
```

和CSS

```
h3 {
width: 100%;
height: 28px;
display: block;
} 
```

如果我的名称超过 1 行，则 2 行文本适合 div，但如果只有 1 行，我希望它垂直居中而不是在顶部对齐。

编辑：我有这个布局，我希望在两个 div 中的文本垂直居中 [http://jsfiddle.net/shRRz/3/](http://jsfiddle.net/shRRz/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:38:59.413

I have found the way to do it. It seems i need to use this css to make it align like i wanted.

```
display: table-cell;
vertical-align: middle; 
```

Thank you very much for the tips, people.

# mysql - SQL INSERT...SELECT 自动递增 DATETIME

> ID：12768084
> 
> 赞同：1
> 
> 时间：2012-10-07T10:42:07.073
> 
> 标签：mysql

我有两个具有以下结构的表：

```
userid, entrydatetime, record. 
```

`tableA`- 有主键`(userid, entrydatetime)`

`tableB`- 没有设置约束。

我正在尝试做一个

`INSERT INTO tableA SELECT * FROM tableB`,

但我收到一个错误，`tableB`因为`userid`和`entrydatetime`.

例如 userid = '12345' 和 entrydatetime = '0000-00-00 00:00:00'。

我需要的主要数据`tableB`是`userid`并记录。`entryDateTime`对于这种情况，对我来说不太重要。

如何合并我的两个表同时保持我的`tableA`主键约束？有没有办法可以`entrydatetime`在插入时随机化或自动增加字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:48:26.563

您可以使用以下查询

```
SET @value = CURRENT_TIMESTAMP();
INSERT INTO tableA 
(user_id, entrydatetime, record) 
(SELECT user_id, @value := @value + INTERVAL 1 SECOND, record from tableB); 
```

希望能帮助到你...

# c++ - cpp 迭代器继承

> ID：12768087
> 
> 赞同：3
> 
> 时间：2012-10-07T10:42:22.493
> 
> 标签：c++, c++11, iterator

我的要求与[使用迭代器隐藏内部容器并](https://stackoverflow.com/questions/2191724/using-iterators-to-hide-internal-container-and-achieve-generic-operation-over-a)在 stackoverflow上实现对基本容器[ [1 ] 的通用操作的问题相同。](https://stackoverflow.com/questions/2191724/using-iterators-to-hide-internal-container-and-achieve-generic-operation-over-a)我有一个通用的纯虚拟基容器类，它需要提供一个应该是 STL 投诉的迭代器，以便我可以将它们与 cpp 算法一起使用`#include <algorithm>`。我的实现只使用一个类而不是 [ [1](https://stackoverflow.com/questions/2191724/using-iterators-to-hide-internal-container-and-achieve-generic-operation-over-a) ] 解决方案中的两个类。

**基础纯虚类**

```
class BaseItr
{
  public:
    class iterator : public std::iterator<std::input_iterator_tag, int>
    {
      public:
        iterator() : _in(NULL) {}
        inline iterator(const iterator& org) : _in(org._in) {}
        inline iterator& operator=(const iterator& other) { _in = other._in; return *this; }
        virtual inline int operator * () { return _in->operator*(); }
        virtual inline iterator& operator++() { (*_in)++; return *this; }
        virtual inline iterator& operator++(int unused) { (*_in)++; return *this; }
        virtual inline bool operator==(const iterator& other) 
        {
          return *(*_in) == *(*(other._in));
        }
        virtual inline bool operator!=(const iterator& other)
        {
          return *(*_in) != *(*(other._in));
        }
        // would use shared pointer insted of this
        //~iterator() { if(_in) { delete _in; } }
        static inline iterator New(iterator *in) { return iterator(in); }
      private:
        iterator(iterator *in) : _in(in) {}
        iterator *_in;
    };

    virtual iterator begin() = 0;
    virtual iterator end() = 0;
}; 
```

**执行**

```
class Itr : public BaseItr
{
  private:
    class iterator : public BaseItr::iterator
    {
      public:
        iterator(int val) : _val(val), BaseItr::iterator() {}
        int operator * () { return _val; }
        inline iterator& operator++() { ++_val; return *this; }
        inline iterator& operator++(int unused) { _val++; return *this; }
      private:
        int _val;
    };
    BaseItr::iterator _begin;
    BaseItr::iterator _end;
  public:
    inline Itr(int start, int end)
    {
      _begin = BaseItr::iterator::New(new iterator(start));
      _end = BaseItr::iterator::New(new iterator(end));
    }

    BaseItr::iterator begin() { return _begin; }
    BaseItr::iterator end() { return _end; }
}; 
```

我的实现工作是需要的，我想知道这个实现是否有任何缺点，请帮助我决定我的设计以使用适当的实现。我已经在 github:gist [https://gist.github.com/3847688中添加了我的完整工作示例代码](https://gist.github.com/3847688)

参考：

*   [具有派生类的自定义容器的迭代器](https://stackoverflow.com/questions/2191572/iterator-for-custom-container-with-derived-classes?rq=1)
*   [使用迭代器隐藏内部容器并在基础容器上实现通用操作](https://stackoverflow.com/questions/2191724/using-iterators-to-hide-internal-container-and-achieve-generic-operation-over-a)
*   [抽象类的快速灵活的迭代器](https://stackoverflow.com/questions/3960948/fast-and-flexible-iterator-for-abstract-class?rq=1)
*   [C++：在子类中使用不同的迭代器类型而不破坏继承机制](https://stackoverflow.com/questions/9239489/c-using-different-iterator-types-in-subclasses-without-breaking-the-inherita)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T11:04:07.240

最明显的问题：您的迭代器没有值语义。

如果他们愿意，STL 算法可以自由地复制迭代器。例如假设：

```
template <typename It>
It find(It b, It e, typename std::iterator_traits<It>::const_reference t) {
    for (; b != e; ++b) {
        if (*b == t) { return b; }
    }
    return e;
} 
```

问题是，如果您使用 调用此算法`BaseItr&`，则结果是类型的`BaseItr`，因此您将暴露于*对象切片*，这是**未定义的行为**。

为了给迭代器提供值语义，您需要围绕抽象实现创建一个包装器类，并让包装器通过虚拟`clone`方法正确管理副本。*如果您的迭代器以虚拟方法结束，那么您做错了。*

# excel - sheet1 的最后一行必须是 sheet2 的第一行。sheet1 的倒数第二行是 sheet2 的第二行，依此类推

> ID：12768088
> 
> 赞同：0
> 
> 时间：2012-10-07T10:42:27.097
> 
> 标签：excel, vba

我是这个网站的新手，对在 excel 中使用 vba 完全陌生。我需要将大约 91 行数据从 Sheet1 复制到 Sheet2。但是，sheet1 的最后一行需要是 sheet2 的第一行。然后 sheet1 的第 90 行成为 sheet2 的第 2 行，依此类推，直到 sheet1 的第 1 行成为 sheet2 上的最后一行，任何人都可以让我知道使用宏执行相同操作的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T20:47:28.583

根据范围，这样的代码可以帮助您：

```
Sheet1.Range("a1").End(xlDown).Copy Sheet2.Range("a1") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T03:12:02.543

你可以试试下面的代码。我使用了一个简单的数据测试集，其中行`A`包含列标题，其余的是数据。这使用 row`A`的数据来确定有多少行（`End(xlDown)`部分），因此它仅在该列中没有空白时才有效。它将数据粘贴到`Sheet2`，从`A2`（再次，假设那里有标题）开始。如果您不需要标题，则可以进行相应调整。

```
Sub CopyStuff()

Dim MyRange As Range
Dim MySheet As Worksheet

' Declare your variables (adjust MyRange to what you want)
' I used some test data where row A contained headers
' and the data followed
Set CurSheet = ActiveWorkbook.ActiveSheet
Set DestSheet = ActiveWorkbook.Sheets("Sheet2")
Set MyRange = CurSheet.Range("A2:E" & Range("A1").End(xlDown).Row)

' Set the number of rows in your range, minus the headers
RowCount = MyRange.Rows.Count - 1

' Iterate through the rows, pasting in reverse
' This starts pasting at A2, assuming headers are in A1
For i = 1 To RowCount
  MyRange.Rows(RowCount + 2 - i).Copy DestSheet.Range("A" & i + 1)
Next i

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-23T14:08:48.573

将 sheet1 数据复制到 sheet2。添加额外的列说'编号（＃）'并从第1行开始编号直到最后。然后将过滤器添加到“编号（＃）”列并按降序排序。希望有帮助！

# ruby - 将参数变成接收器

> ID：12768096
> 
> 赞同：0
> 
> 时间：2012-10-07T10:44:03.777
> 
> 标签：ruby

我创建了以下扩展

```
class String
  def is_a_number? s  # check if string is either an INT or a FLOAT (12, 12.2, 12.23 would return true)
    s.to_s.match(/\A[+-]?\d+?(\.\d+)?\Z/) == nil ? false : true
  end
end 
```

我怎样才能使它作为一个链式方法工作？

```
is_a_number?("10") # returns true
"10".is_a_number? # returns an error (missing arguments) 
```

**更新**

感谢sawa、mikej 和Ramon 的回答。按照建议，我将类更改为 Object 并删除了参数：

```
class Object
  def is_a_number?  # check if string is either an INT or a FLOAT (12, 12.2, 12.23 would return true)
    to_s.match(/\A[+-]?\d+?(\.\d+)?\Z/) != nil
  end
end 
```

现在它工作得很好：

```
23.23.is_a_number? # > true 
```

多谢你们...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:54:28.660

当您编写 时`"10".is_a_number?`，您已经有了`"10"`要检查的对象，即 的接收者`is_a_number?`，因此您的方法不需要带任何参数。

因为`match`是 on 的一个实例方法`String`，所以你不需要为它指定一个接收者。它只会对`is_a_number?`被调用的同一个对象进行操作。因为你知道你已经有一个`String`对象，所以`to_s`也不需要。

只需将其写为：

```
class String
  # check if string is either an INT or a FLOAT (12, 12.2, 12.23 would return true)
  def is_a_number? 
    match(/\A[+-]?\d+?(\.\d+)?\Z/) != nil
  end
end 
```

如果您不知道您正在测试的对象是否将是一个字符串， [Ramon](https://stackoverflow.com/users/199288/ramon)建议您可能希望将您的扩展放在`Object`而不是打开是一个好点。`String`

* * *

另外，您所描述的并不是*方法链接*的真正含义；它只是在一个对象上调用一个方法。方法链接是设置方法的返回类型的地方，以便可以按顺序调用多个方法，例如在 Rails 中，例如

```
User.where(:name => 'Mike').limit(3) # find the first 3 Mikes 
```

是方法链的一个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:58:25.070

似乎您想要修补`Object`而不是`String`（因为您正在调用`to_s`）：

```
class Object
  def is_a_number?
    to_s.match(/\A[+-]?\d+?(\.\d+)?\Z/).nil?
  end
end 
```

`validates numericality: true`您还可以考虑在您的模型上用它替换它。

# asp.net - 多对多加入

> ID：12768097
> 
> 赞同：0
> 
> 时间：2012-10-07T10:44:06.627
> 
> 标签：asp.net, sql, sql-server, sql-server-2012

嗨，我目前正在学习 sql，我有 2 个一对多表，但我不明白如何将它们组合成多对多。我有一个连接表。

表父列 parent 和 parent id

表子列 child 和 childid

表 parentchild --（加入表选择具有 childid 的父母）列 parentid 和 childid

这是我的代码。

```
select parent.name, parentchild.childid from parent
join parentchild
on parent.parentID = parentchild.parentid

select child.name, parentchild.parentid from child
join parentchild 
on child.childID = parentchild.childid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:52:30.397

解决方案是编写一个查询，将表连接`parent`到`parentchild`表，然后将`parentchild`表连接到`child`表。

```
select p.name, c.name 
from parent p
join parentchild pc
    on p.parentid = pc.parentid  -- joins parent to parentchild
join child c
    on c.childID = pc.childid  -- joins parentchild to child 
```

# maven - 无法将 Maven 工件部署到快照/私有 Cloudbees 存储库

> ID：12768102
> 
> 赞同：3
> 
> 时间：2012-10-07T10:44:13.840
> 
> 标签：maven, cloudbees

我正在使用 Ant 脚本将工件部署到我的快照/私有存储库，但我得到了一个 Forbidden 异常，如下所示。看起来用户名和密码是正确的，因为如果我更改它们，我会得到一个不同的错误（未经授权）。我错过了什么？

```
[exec] [ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy-file (default-cli) on project standalone-pom:
Failed to deploy artifacts: Could not transfer artifact br.com.simpleconsulting.portal:portal-client:jar:6.1.0-20121007.102101-1 from/to cloudbees-snapshot (https://repository-tmoreira2020.forge.cloudbees.com/snapshot):
Access denied to: https://repository-tmoreira2020.forge.cloudbees.com/snapshot/br/com/simpleconsulting/portal/portal-client/6.1.0-SNAPSHOT/portal-client-6.1.0-20121007.102101-1.jar, ReasonPhrase:Forbidden. -> [Help 1] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T21:31:45.117

`403`CloudBees 基础架构上出现未授权错误 ( ) 的 2 个常见原因是

*   使用无权访问相关路径的有效凭据上传
*   使用有效凭据上传到不存在的 URL 路径

我可以看到列出的 URL 路径存在并且包含新的工件 - 在您发布此问题后，您是否让事情正常进行？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T16:58:03.247

尝试将 settings.xml 显式传递给您的 Maven 命令：

mvn -s ~/.m2/settings.xml 部署

此外，请确保您在 maven pom.xml 的构建部分中配置了 webdav-jackrabbit 扩展

```
<extensions>
  <extension>
    <groupId>org.apache.maven.wagon</groupId>
    <artifactId>wagon-webdav-jackrabbit</artifactId>
    <version>2.2</version>
  </extension>
</extensions> 
```

# c# - 让 GTK# 应用程序在 Windows 上运行

> ID：12768103
> 
> 赞同：1
> 
> 时间：2012-10-07T10:44:14.303
> 
> 标签：c#, .net, visual-studio, mono, gtk#

我无法让 GTK# 应用程序在 Windows 上运行，如果能获得任何帮助，我将不胜感激。我尝试用谷歌搜索，但无法找到解决我的问题的方法。

我使用 GTK# 在 monodevelop 中编写了一个小应用程序，它只打开一个带有按钮的窗口。它在 linux 上运行良好。

但是我无法让它在 Windows 上运行。我尝试安装 GTK+ 和 GTK# redistributables、GTK# SDK，但它仍然无法正常工作。并且它不会显示任何抛出的异常（在命令行中），这将有助于调试问题。

调用 .exe 后，它会在那里停留几秒钟，然后 shell 重新出现，等待下一个命令，没有任何输出。

谁能告诉我我必须在原始 Windows 安装上安装什么才能运行 GTK# 应用程序？

[编辑] 我知道运行它们不需要单声道，如果可能的话，我想避免它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-04T23:15:54.020

Mono.Posix 是 GTK# 系统的必需部分 - 它包含用于处理国际化文本的 gettext 库接口。通过在 MonoDevelop 中编写，在创建 GUI 界面时有一个允许国际化文本的选项，它会自动调用这个库作为生成的 Build 函数的一部分（它似乎在设置用户显示的文本时被调用，比如你的标题形式）。这意味着您只需要 Mono.Posix.dll 库（将在 Microsoft .NET 上工作），而不需要完整的 Mono 运行时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:18:46.487

异常可能被写入 stderr 而不是 stdout，Windows 命令行默认情况下不显示。尝试：

```
myapp.exe 2> my.log 
```

并查看是否将错误写入名为 my.log 的日志文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-02T23:21:56.560

就像你一样，我在 Windows 10 上运行时遇到了问题。在我的情况下，这个问题在另一个 Google Result 到博客中提到 Mono.Posix 引用确实是原因后得到了解决。但是，博客指出您还必须删除/转换`global::Mono.Unix.Catalog.GetString`（如果您使用的是 MonoDevelop 的 Stetic GUI 创建器）。这些通常会在您的标签上。

IE：

```
dev@laptop:/tmp/myproject$ rg "global::Mono.Unix."
96:     this.label2.LabelProp = global::Mono.Unix.Catalog.GetString("25 ROUNDS OF DEAF"); 
```

更改为

```
96:     this.label2.LabelProp = "25 ROUNDS OF DEAF" 
```

由于 Stetic GUI 创建者通常将 Partial 类文件放在项目目录的子文件夹 gtk-gui 中。这可能是检查流浪者的最佳地点。虽然`ripgrep`（在`rg`那里使用的命令对所有子文件夹进行递归快速目录搜索，所以不妨使用它）

在此之后，您必须安装适用于 .NET 的 GTKSharp 运行时（截至今天，它是来自 mono-project.com 的 GTK+ 也称为 GTK2 的文件 gtk-sharp-2.12.45.msi。GTK3 是不同的，对于未来的 Google 员工可能会有所不同)

之后在 MonoDevelop 中重新编译应用程序，您可以在 Windows 上运行它

步骤来源：[https ://www.martyndavis.com/?p=432](https://www.martyndavis.com/?p=432)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T18:04:30.440

实际上，应用程序可以在 Windows 上不使用 Mono（例如控制台应用程序）运行，但是如果您在代码中引用了 Mono.Posix，它可以使用一些无法在 Windows 上执行的特定于平台的功能。在 MonoDevelop 中的 Windows 上，您可以在框架（Mono 或 MS.Net）之间进行选择。尝试在 Win 上重新编译应用程序并选择 MS.Net 框架。

# python - 如何在 Python 字符串模板类上转义 $？

> ID：12768107
> 
> 赞同：19
> 
> 时间：2012-10-07T10:44:51.263
> 
> 标签：python, string, try-catch

### 介绍

string 模块有一个 Template 类，它允许您使用映射对象在字符串中进行替换，例如：

```
>>> string.Template('var is $var').substitute({'var': 1})
'var is 1' 
```

如果尝试替换映射中缺少的元素，则替换方法可能会引发 KeyError 异常，例如

```
>>> string.Template('var is $var and foo is $foo').substitute({'var': 1})
KeyError: 'foo' 
```

或者如果模板字符串无效，则可能引发 ValueError，例如它包含一个`$`字符后跟一个空格：

```
>>> string.Template('$ var is $var').substitute({'var': 1})
ValueError: Invalid placeholder in string: line 1, col 1 
```

### 问题

给定一个模板字符串和一个映射，我想确定模板中的所有占位符是否都将被替换。为此，我会尝试进行替换并捕获任何 KeyError 异常：

```
def check_substitution(template, mapping):
    try:
        string.Template(template).substitute(mapping)
    except KeyError:
        return False
    except ValueError:
        pass
    return True 
```

但这不起作用，因为如果模板无效并且引发了 ValueError，则不会捕获后续的 KeyError：

```
>>> check_substitution('var is $var and foo is $foo', {'var': 1})
False
>>> check_substitution('$ var is $var and foo is $foo', {'var': 1})
True 
```

但我*不关心*ValueErrors。那么，解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T13:08:25.233

[文档说](http://docs.python.org/dev/library/string#template-strings)只要包含所有必要的命名组，您就可以替换该模式：

```
import re
from string import Template

class TemplateIgnoreInvalid(Template):
    # override pattern to make sure `invalid` never matches
    pattern = r"""
    %(delim)s(?:
      (?P<escaped>%(delim)s) |   # Escape sequence of two delimiters
      (?P<named>%(id)s)      |   # delimiter and a Python identifier
      {(?P<braced>%(id)s)}   |   # delimiter and a braced identifier
      (?P<invalid>^$)            # never matches (the regex is not multilined)
    )
    """ % dict(delim=re.escape(Template.delimiter), id=Template.idpattern)

def check_substitution(template, **mapping):
    try:
        TemplateIgnoreInvalid(template).substitute(mapping)
    except KeyError:
        return False
    else:
        return True 
```

### 测试

```
f = check_substitution
assert f('var is $var', var=1)
assert f('$ var is $var', var=1)
assert     f('var is $var and foo is $foo', var=1, foo=2)
assert not f('var is $var and foo is $foo', var=1)
assert     f('$ var is $var and foo is $foo', var=1, foo=2)
assert not f('$ var is $var and foo is $foo', var=1)
# support all invalid patterns
assert f('var is $var and foo is ${foo', var=1)
assert f('var is $var and foo is ${foo', var=1, foo=2) #NOTE: problematic API
assert     f('var is $var and foo is ${foo and ${baz}', var=1, baz=3)
assert not f('var is $var and foo is ${foo and ${baz}', var=1) 
```

`$`它适用于分隔符 ( )的所有无效出现。

这些示例表明，忽略无效模式会隐藏模板中的简单拼写错误，因此它不是一个好的 API。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-07T10:57:39.360

这是一个快速修复（使用递归）：

```
def check_substitution(tem, m):
    try:
        string.Template(tem).substitute(m)
    except KeyError:
        return False
    except ValueError:
        return check_substitution(tem.replace('$ ', '$'), m) #strip spaces after $
    return True 
```

`$`我知道如果and之间有多个空格，则需要更长的时间`var`，因此您可以使用正则表达式对其进行改进。

**编辑**

转义更有意义[感谢@Pedro]，因此您可以通过以下语句`$`来理解：`$$``ValueError`

```
return check_substitution(tem.replace('$ ', '$$ '), m) #escaping $ by $$ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-13T05:00:49.513

Python 不会在多行上进行字符串替换

如果你有这个字符串

```
criterion = """
    <criteria>
    <order>{order}</order>
      <body><![CDATA[{code}]]></body>
    </criteria>
"""

criterion.format(dict(order="1",code="Hello") 
```

结果是：

```
KeyError: 'order' 
```

一个解决方案是使用 string.Template 模块

```
from string import Template

criterion = """
    <criteria>
    <order>$order</order>
      <body><![CDATA[$code]]></body>
    </criteria>
"""

Template(criterion).substitute(dict(order="1",code="hello") 
```

注意：您必须在关键字前面加上 $ 而不是将它们包装在 {}

输出是：

```
 <criteria>
    <order>1</order>
      <body><![CDATA[hello]]></body>
    </criteria> 
```

完整文档是：[https ://docs.python.org/2/library/string.html#template-strings](https://docs.python.org/2/library/string.html#template-strings)

# iphone - 如何使用ldid？

> ID：12768109
> 
> 赞同：8
> 
> 时间：2012-10-07T10:45:38.307
> 
> 标签：iphone, ios, xcode, code-signing, jailbreak

我正在尝试在 iOS 5.1/iPhone 4s（越狱）上运行未签名的应用程序。我做了什么：

1.  在 XCode 中禁用代码签名。

2.  构建未签名的 iPhone 应用程序。

3.  通过 SSH 将它复制到我的 iPhone 到位置 /User/me/development/HelloWorld.app

4.  现在我尝试模拟它的签名以在 iPhone 上运行这个应用程序。我运行以下命令：

.

```
cd /User/me/development
chmod -R 777 HelloWorld.app
ldid -S HelloWorld 
```

但是，我收到以下错误：

```
util/ldid.cpp(567): _assert(78:arch != NULL) 
```

这种错误的可能原因是什么，现在要修复它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T22:03:40.390

**1）**使用`ldid -S`是**正确**的用法。不是小写 ( `-s`)。

**2)**通常，当我收到此错误时，是因为我使用错误的架构构建了我的应用程序。`ldid`我使用的大多数旧版本都无法签署*胖*二进制文件（但请参阅下面的**更新**）。胖二进制文件是内部具有多个架构的二进制文件。例如，双重`armv6`和`armv7`可执行。或者使用 Xcode 4.5，它可能默认为`armv7`and `armv7s`。

在项目构建设置中，使用**Architectures**、 **Valid Architectures**和**Build Active Architecture Only**设置来确定构建哪个架构可执行文件。对于越狱开发，我通常将**Build Active Architecture Only**设置为`YES`. 并且有效架构设置为`armv6`和`armv7`。

**3)**此外，一些旧版本的`ldid`无法签署`armv7`可执行文件。如果您[从此处的 KennyTM 网站获得预建副本](http://code.google.com/p/networkpx/downloads/list)，它支持`armv7`. 请注意，这`ldid`是为 Mac OS X 构建的，因此它被设计为在您的 Mac 上的可执行文件上运行，在构建之后没有登录 Xcode，但*在*您上传到您的 iPhone 之前。

较新的手机通常可以运行为旧架构构建的可执行文件，但反之则不行。因此，为您想要支持的最古老的架构构建。您只会在较新的架构中失去一些优化（大多数人不太关心......如果您的应用需要这些优化，请告诉我，我会发布更多）。

因此，如果您想支持旧设备（iPhone < 3GS），我会将**Architectures**设置为*only* `armv6`，并确保删除`$(ARCHS_STANDARD_32_BIT)`. 如果您只需要支持相对较新的版本，请选择`armv7`，但请确保您使用`ldid`可以签署`armv7`二进制文件的版本。

**编辑：**要确定您尝试签名的可执行文件是否是胖文件，请在命令行运行：

```
> cd HelloJB.app

> ls
HelloJB     Info.plist  PkgInfo     date.zip    en.lproj

> lipo -info HelloJB 
Non-fat file: HelloJB is architecture: armv7 
```

正如你在上面的输出中看到的，我的`HelloJB`可执行文件并不胖，只有 armv7 代码。

## 更新

我相信在[这里找到的 ldid的预构建版本现在](http://code.google.com/p/networkpx/downloads/detail?name=ldid&can=2&q=) **可以**签署胖可执行文件，尽管仍有一些`ldid`版本不能。另外，我认为如果您安装最新版本的[iOSOpenDev](http://iOSOpenDev.com/)，它将为您提供一个`ldid`可以签署胖可执行文件的版本（默认安装位置为`/opt/iOSOpenDev/bin/ldid`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T06:57:59.633

从看起来 Xcode 4.5 开始，可能早在 4.4 还没有检查，为了使用 ldid 工具进行伪代码签名，您需要从[这里](https://developer.apple.com/downloads/index.action#)下载并安装“命令行工具”，或者您可以从 Xcode 中下载它，首选项->下载

否则你会得到类似的错误

*   实用程序/ldid.cpp（584）：
*   ./minimal/mapping.h(54): _assert(2:false)
*   实用程序/ldid.cpp(567)
*   等等

您仍然需要确保它不是“胖”二进制文件，并且仅支持 armv7，因为不再支持 armv6。

ldid -S ExampleApp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T18:17:11.433

错误 assert(2:false) 来自于 HelloJB（不是 HelloJB.app）被写保护的事实！

1.  启动终端.app
2.  转到目录 HelloJB.app
3.  chmod +aw HelloJB
4.  ldid -S HelloJB 有效！

# java - 在哪里初始化连接池，java tomcat

> ID：12768113
> 
> 赞同：0
> 
> 时间：2012-10-07T10:46:26.940
> 
> 标签：java, mysql, tomcat, connection-pooling

我已阅读此页面：[http ://www.javaranch.com/journal/200601/JDBCConnectionPooling.html](http://www.javaranch.com/journal/200601/JDBCConnectionPooling.html)

Method Scope Connections 的方法对我来说似乎相当不错。但是我有一个问题，我什么时候初始化 JDBCServlet 类？每次我想要一个连接？因为我认为每次我想要一个连接我只是打电话给`getConnection()`......

```
public class JDBCServlet extends HttpServlet {

  private DataSource datasource;

  public void init(ServletConfig config) throws ServletException {
    try {
      // Look up the JNDI data source only once at init time
      Context envCtx = (Context) new InitialContext().lookup("java:comp/env");
      datasource = (DataSource) envCtx.lookup("jdbc/MyDataSource");
    }
    catch (NamingException e) {
      e.printStackTrace();
    }
  }

  private Connection getConnection() throws SQLException {
    return datasource.getConnection();
  }

  public void doGet (HttpServletRequest req, HttpServletResponse res) throws ServletException {
    Connection connection=null;
    try {
      connection = getConnection();
      ..<do JDBC work>..
    } 
    catch (SQLException sqlException) {
      sqlException.printStackTrace();
    }
    finally {
      if (connection != null) 
        try {connection.close();} catch (SQLException e) {}
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:07:09.477

当您导航到 servlet 映射到的链接时，将调用 JDBCServlet servlet。

因此，除了在 web.xml 中完成从 URL 到 servlet 的映射之外，您不必做任何事情。

然后，Web 容器使用 init 方法创建 servlet 的实例，然后调用 doGet。

这是一个带有 tomcat 的 servlet 教程的 PDF，但基础是相同的。

[http://www.tutorialspoint.com/servlets/servlets_tutorial.pdf](http://www.tutorialspoint.com/servlets/servlets_tutorial.pdf)

查看 servlet 部署部分

对于 DBUtil 类，这是一个很好的例子。

```
public class DBUtil {

private static DataSource dataSource;

static {
    try {
        dataSource = new InitialContext().lookup("jdbc/MyDataSource");
    } catch (NamingException e) { 
        throw new ExceptionInInitializerError("'jdbc/MyDataSource' not found in JNDI", e);
    }
}

public static Connection getConnection() {
    return dataSource.getConnection();
} 
```

}

这使您的类可以被 Web 应用程序中的所有 servlet 使用。

您将调用 DBUtil 类

```
try {
    connection = DBUtil.getConnection();
    statement = connection.prepareStatement("SELECT id, foo, bar FROM table");
    resultSet = statement.executeQuery();

   //Do what you need to do. 

} finally {
    if (resultSet != null) try { resultSet.close(); } catch (SQLException ignore) {}
    if (statement != null) try { statement.close(); } catch (SQLException ignore) {}
    if (connection != null) try { connection.close(); } catch (SQLException ignore) {}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T11:10:55.043

Servlet 由容器初始化，容器将根据需要调用 init 并由[web.xml](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html)配置文件定义。

使用以标准方式执行相同操作的[Apache Tomcat JDBC 连接池。](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T11:00:21.313

有许多连接池库，包括 MySQL 自己的。很多人都使用非常成熟的C3P0。

常见的想法是您在服务器容器中定义数据源并从您的代码中访问 JNDI 引用。在 servlet 初始化期间，您只是在查找数据源，因此这是执行此操作的理想场所。在您实际执行操作之前，这不会使用任何连接。

如果您希望使用 C3P0 [C3P0 Tomcat 配置](http://www.mchange.com/projects/c3p0/#tomcat-specific)，请参阅[Tomcat DBCP以获得良好的介绍](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html#MySQL_DBCP_Example)

# r - R将列表层次结构展平为矩阵或data.frame

> ID：12768114
> 
> 赞同：12
> 
> 时间：2012-10-07T10:46:29.033
> 
> 标签：r, list, matrix

我想将列表层次结构（类似于 JSON）展平为矩阵或数据框。假设我创建了以下列表：

```
a <- list(
  b1 = list(
     c1 = list(
       d1 = data.frame()
     ),
     c2 = data.frame()
  ),
  b2 = data.frame()
) 
```

每个字母是另一个级别或降低层次结构。然后我想要一个函数，例如`listToMatrix(mylist = a, steps = 2)`，生成以下内容：

```
 [,1] [,2]
[1,] "b1" "c1"
[2,] "b1" "c2"
[3,] "b2" "b2" 
```

观察到函数的参数`steps = 2`暗示它应该只在层次结构中下降 2 步。此外，如果在一个方向上没有足够的可用级别，请参阅`b2`，那么它应该将前一个列表名称保留在矩阵中。

有什么建议么？:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T12:22:02.710

这是一个解决方案。所以它在这里很容易阅读，我将代码分成两部分。稍后，您可以轻松地将这两个部分合并为一个函数。

首先，使用递归获取所有名称矩阵的函数：

```
anames <- function(x) {

   require(plyr)
   if (is.data.frame(x)) return(NA)

   y <- do.call(rbind.fill.matrix,
                mapply(cbind, names(x), lapply(x, anames),
                       SIMPLIFY = FALSE))
   colnames(y) <- NULL

   return(y)
}

anames(a)
#      [,1] [,2] [,3] [,4]
# [1,] "b1" "c1" "d1" NA  
# [2,] "b1" "c2" NA   NA  
# [3,] "b2" NA   NA   NA 
```

然后，应用给定输入的函数，并按照您的要求`steps`填充s：`NA`

```
listToMatrix <- function(myList, steps = Inf) {

   a <- anames(myList)
   steps <- min(steps, ncol(a) - 1)
   cols.idx <- seq_len(steps)
   a <- a[, cols.idx]
   for (j in tail(cols.idx, -1))
      a[, j] <- ifelse(is.na(a[, j]), a[, j - 1], a[, j])

   return(a)
}

listToMatrix(a, 2)
#      [,1] [,2]
# [1,] "b1" "c1"
# [2,] "b1" "c2"
# [3,] "b2" "b2" 
```

# html - 浮动在一个位置：相对容器内

> ID：12768117
> 
> 赞同：-2
> 
> 时间：2012-10-07T10:47:04.320
> 
> 标签：html, css

我想在`float`里面放一个

```
.wrapper {
 position:relative;
 } 
```

但是当我这样做时，布局就会混乱。

[http://jsfiddle.net/pedenski/6uKkv/](http://jsfiddle.net/pedenski/6uKkv/)

下面是我想要发生的布局。

![浮动在相对位置内](../Images/64a1e78526403f84e941db449c858762.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:50:24.690

您可以从以下更改宽度和高度：

[http://jsfiddle.net/6uKkv/3/](http://jsfiddle.net/6uKkv/3/)

# jquery - jQuery - 获取链接中心

> ID：12768119
> 
> 赞同：2
> 
> 时间：2012-10-07T10:47:37.847
> 
> 标签：jquery, css, positioning

我正在尝试为我正在开发的网站构建弹出框控件，但我无法正确定位。我尝试了各种获取超链接中心的方法，但总是有点偏离。

我不想硬编码坐标，因为我需要它是通用的，它需要与我将来可能使用弹出框的任何链接一起使用。

我在这里做错了什么？

这是我目前的方法：

```
$('#whatsthis').click(function(e) 
{
    var _linkLocation = $(this).offset();
    $('#helpTip').css('position','absolute');

    $('#helpTip').css('left', _linkLocation.left - $(this).width()/2);

    $('#helpTip').fadeIn();
    return false;
}); 
```

..这是当前输出：

![在此处输入图像描述](../Images/77c3a6fec3bddcdcda32fcd9d8354342.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T10:50:34.020

使用括号确保在减半之前获得增量。

```
(_linkLocation.left - $(this).width()) / 2 
```

否则，运算符优先级将`/ 2`首先绑定到宽度的结果并给您不正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:50:57.627

试试下面的：

```
$('#whatsthis').click(function(e)  {
    var _linkLocation = $(this).offset(), $helpTip = $('#helpTip');
    $helpTip.offset({ 
        'left': _linkLocation.left + $(this).width()/2 - $helpTip.width()/2,
        'top': _linkLocation.top + $(this).height()
    }).fadeIn();
    return false;
}); 
```

# php - 没有从 JQuery 中的 PHP 脚本获取返回数据

> ID：12768121
> 
> 赞同：0
> 
> 时间：2012-10-07T10:47:42.573
> 
> 标签：php, jquery

我正在学习如何将 JQuery、AJAX 和 PHP 集成在一起。

我的问题是我的成功函数没有从参数中获取任何值，而只是得到一个“0”。我也不确定自己做错了什么，但我一直在关注本教程[JQuery & PHP Tutorial](http://blog.themeforest.net/tutorials/jquery-for-absolute-beginners-day-15-part-2/)并复制了他如何使用 echoes 和参数变量 r 从 PHP 代码中获取值。

我已经尝试寻找解决方案，但我不确定是否有任何结果与我正在做的事情相关。我尝试遵循他们的一些建议，但似乎没有一个有效（jQuery 的承诺）

我希望有人能告诉我我做错了什么，因为我渴望学习更多的 PHP 和 jQuery。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
    $(function () {
        jQuery("form").submit(function(e) { 
             var input = $("#input").val();
             var url = 'input=' + input;
             $.ajax({
               type: "POST",
               url: "process.php",
               data: url,
               success: function(r) {
                   $("#output").text(function(r) {
                        return r;
                   });
               }
             });
             e.preventDefault();
        });
    });
</script>
<title>Insert title here</title>
</head>
<body>
    <form action="process.php" method="post">
        Inputs:<br />
        <textarea rows="15" cols="60" id="input" name="input">Some text...
        </textarea><br /><br />
        Start:
        <input type="text" id="start" name="start" />
        End:
        <input type="text" id="end" name="end" /><br />
        <input type="submit" id="submit" name="submit" value="Submit">
    </form>
    <p id="output">Output: Some Random Text</p>
</body>
</html> 
```

PHP：

```
require 'parser.php';
$parser = new Parser();
#header('index.php');
$hash = $parser->parse($_POST['input']);
$keys = array_keys($hash);
foreach($keys as $key) {
    echo "$key ->";
    $dests = $hash[$key];
    foreach($dests as $dest) {
        echo " $dest";
    }
    echo "<br />";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:59:35.370

```
<script>
    $(function () {
        jQuery("form").submit(function(e) { 
             var input1 = $("#input").val();
             var url = {'input' :  input1};   // a little change to the data parameter
             $.ajax({
               type: "POST",
               url: "process.php",
               data: url,
               success: function(r) {
                //   $("#output").text(r);  //<--- changed to this
                   $("#output").html(r);  // this is better as you output html
               }
             });
             e.preventDefault();
        });
    });
</script> 
```

对于 jquery text()，直接使用服务器的返回值。如果您要输出 html，请改用 jquery html()

# java - 如何运行一个简单的 EJB？我有一个简单的客户端，以及一个通过 Eclipse 创建的简单会话 Bean

> ID：12768122
> 
> 赞同：1
> 
> 时间：2012-10-07T10:47:51.923
> 
> 标签：java, eclipse, glassfish, ejb

我是 Java 和 EJB 的新手。想创建一个简单的EJB。

所以我通过 Eclipse 创建了一个 EJB 项目（Eclipse Java EE IDE Juno Service Release 1 Build ID：20120920-0800）。然后我在那里添加了一个带有远程和本地接口的无状态会话 Bean。然后我添加了一个简单的方法，它只返回 2 个数字的总和。这是代码：

测试.java：

```
package ejb;

import javax.ejb.Stateless;
import javax.ejb.TransactionManagement;
import javax.ejb.TransactionManagementType;

/**
 * Session Bean implementation class Test
 */
@Stateless
@TransactionManagement(TransactionManagementType.BEAN)
public class Test implements TestRemote, TestLocal {

/**
 * Default constructor. 
 */
public Test() {
    // TODO Auto-generated constructor stub
}

public int getSum(int a , int b) {
    return (a + b);
}

} 
```

测试本地.java：

```
package ejb;

import javax.ejb.Local;

@Local
public interface TestLocal {
    public int getSum(int a , int b);
} 
```

测试远程.java：

```
package ejb;

import javax.ejb.Remote;

@Remote
public interface TestRemote {
    public int getSum(int a , int b);
} 
```

我右键单击我的 EJB 项目并将其导出为 JAR 文件。然后我将其部署到 GlassFish3 服务器： 1）应用程序 - 部署等；2) JNDI - 自定义资源。我已将资源类型设置为`ejb.TestRemote`，工厂类设置为`org.glassfish.resources.custom.factory.EjbFactory`。JNDI 名称为`Test`. 然后我编写了一个简单的客户端：

主.java：

```
import javax.naming.InitialContext;
import ejb.TestRemote;

public class Main {
    public static void main(String arg[]) {
        try {           
            TestRemote testR = (TestRemote) new InitialContext().lookup("Test");
            //System.out.println(new InitialContext().lookup("Test").toString());
            //.toString displays: Reference Class Name: ejb.TestRemote
            System.out.println(testR.getSum(50, 500));
        } catch(Exception e) {
            e.printStackTrace();
        }
    }   
} 
```

我已将我`gf-client-module.jar`的`C:\glassfish3\glassfish\modules`EJB 项目的 JAR 文件添加到 Java 构建路径（项目属性）。

然后我尝试在 Eclipse 中启动我的客户端并立即出现以下消息：

```
com.sun.enterprise.v3.server.CommonClassLoaderServiceImpl findDerbyClient
INFO: Cannot find javadb client jar file, derby jdbc driver will not be available by default. 
```

然后我收到下一条消息：

```
java.lang.ClassCastException: javax.naming.Reference cannot be cast to ejb.TestRemote
at Main.main(Main.java:16) 
```

那么，任何人都可以帮我解决这个问题吗？...我真的很困惑：在引用上调用的 .toString 方法显示它是正确的 ejb.TestRemote 类引用，正如我之前提到的。但是......它不起作用（（

有任何想法吗？提前致谢。

**为我解决了，但有另一种方式**

我已经失去了使用 Eclipse 并单独安装 GlassFish 的希望。因此，我在 Eclipse 中安装了 GlassFish 服务器，并在那里部署了我的 EJB 项目。它起作用了：现在我的客户工作正常。唯一的变化是 - 我应该为 .lookup: like 提供一个完整的包名`.lookup("ejb.TestRemote")`。

感谢所有尝试/想要/希望提供帮助的人！

# gwt - 在 GWT 2.3 中双击 flextable 处理程序

> ID：12768126
> 
> 赞同：0
> 
> 时间：2012-10-07T10:48:04.617
> 
> 标签：gwt, double-click, flextable

我想在 GWT 中向 FlexTable 添加双击处理程序。

我使用了以下代码：

```
 flexTable.addDoubleClickHandler(new DoubleClickHandler() {

                @Override
                public void onDoubleClick(DoubleClickEvent event) {

                }
    }); 
```

但是我怎样才能获得行索引。

请给我建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T14:05:03.527

遗憾的是，没有内置方法可以从 FlexTable 中的双击事件中检索单元格。不过，它可以用几行代码来实现。我就是这样做的。

使用以下代码创建 FlexTable 的子类：

```
public class DoubleClickTable extends FlexTable {
    class MyCell extends Cell {
        protected MyCell(int rowIndex, int cellIndex) {
            super(rowIndex, cellIndex);
        }
    }

    public Cell getCellForEvent(MouseEvent<? extends EventHandler> event) {
        Element td = getEventTargetCell(Event.as(event.getNativeEvent()));
        if (td == null) {
          return null;
        }

        int row = TableRowElement.as(td.getParentElement()).getSectionRowIndex();
        int column = TableCellElement.as(td).getCellIndex();
        return new MyCell(row, column);
    }
} 
```

然后在 DoubleClickHandler 中调用 getCellForEvent() 来检索点击的单元格：

```
flexTable.addDoubleClickHandler(new DoubleClickHandler() {
    @Override
    public void onDoubleClick(DoubleClickEvent event) {
        Cell cell = flexTable.getCellForEvent(event);
        GWT.log("Row index: " + cell.getRowIndex());
    }
}); 
```

实现细节：getCellForEvent()方法是HTMLTable类（FlexTable的父类）中同名方法的一个副本，只是参数的签名不同。MyCell 类是一种能够调用受保护的 Cell 构造函数的解决方法。

# ios - 当用户进行拖动和/或缩放时，iOS 5 上的 MKMapView 会禁止计时器

> ID：12768127
> 
> 赞同：0
> 
> 时间：2012-10-07T10:48:07.410
> 
> 标签：ios, events, timer, mkmapview, drag

我编写了一个使用 MKMapView 的应用程序。此应用程序使用计时器来更新屏幕上的一些信息。实际上，当用户触摸地图并开始拖动时，计时器不会再触发，直到用户释放触摸。我注意到在新的 iOS 6 中，这个问题消失了。但是我还需要支持 iOS 5。我还没有弄清楚是否只有计时器没有被触发，或者是否根本没有处理任何事件。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:13:20.530

好的，我在这里找到了解决方案：[UIScrollView pauses NSTimer until scrolling finished](https://stackoverflow.com/questions/605027/uiscrollview-pauses-nstimer-until-scrolling-finishes)

基本上你必须把 NSTimer 放在它自己的运行循环中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:30:04.960

嗯，这表明定时器和触摸处理代码正在由同一个运行循环处理，或者可能触摸被阻塞，所以当定时器完成代码尝试运行时，它不能。尝试使用带有完成处理程序的异步块来运行您的计时器。

```
- (void)startTimerInBackground {

     dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) {

    //Start timer here, set completion method to be called
    NSTimer *t = [NSTimer scheduledTimerWithTimeInterval: 2.0
                                                  target: self
                                                selector:@selector(timerCompletionMethod:)
                                                userInfo: nil repeats:NO];
    });
}

- (void)timerCompletionMethod:(NSTimer *)timer {

    //Switch back to main thread here for completion code
    dispatch_async(dispatch_get_main_queue(), ^(void) {

    });
} 
```

看看这是否有帮助，尽管计时器不可靠，但请注意，如果您需要非常准确的计时，您可能应该查看替代方案，这里有一些非常好的信息：

[如何使用 NSTimer？](https://stackoverflow.com/questions/1449035/how-do-i-use-nstimer)

# android - Android - 启动器图标大小

> ID：12768128
> 
> 赞同：373
> 
> 时间：2012-10-07T10:48:09.887
> 
> 标签：android, android-icons

对于`HDPI`、`XHDPI`等，启动器图标的理想大小应该是多少？我是否必须`9-Patch`为图标创建图像以自动缩放，还是创建单独的图标更好？

* * *

## 回答 #1

> 赞同：725
> 
> 时间：2012-10-07T10:52:57.340

我会为每个创建单独的图像：

```
LDPI should be 36 x 36.

MDPI should be 48 x 48.

TVDPI should be 64 x 64.

HDPI should be 72 x 72.

XHDPI should be 96 x 96.

XXHDPI should be 144 x 144.

XXXHDPI should be 192 x 192. 
```

然后只需将它们中的每一个放在可绘制文件夹的单独茎中。

在将您的应用程序上传到 Google Play 商店时，您还需要提供大版本的图标，这应该是`WEB 512 x 512`. 它是如此之大，以至于 Google 可以将其重新缩放到任何大小，以便在整个 Google Play 商店中宣传您的应用，并且不会在您的徽标中添加像素化。

基本上，所有其他图标都应与“基线”图标成比例`MDPI at 48 x 48`。

```
LDPI is MDPI x 0.75.

TVDPI is MDPI x 1.33.

HDPI is MDPI x 1.5.

XHDPI is MDPI x 2.

XXHDPI is MDPI x 3.

XXXHDPI is MDPI x 4. 
```

这在 Android 开发者网站的图标页面上都有解释：http: [//developer.android.com/design/style/iconography.html](http://developer.android.com/design/style/iconography.html)

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2012-10-07T11:10:19.127

不要为启动器图标创建 9-patch 图像。您必须为每个图像制作单独的图像。

```
LDPI - 36 x 36
MDPI - 48 x 48
HDPI - 72 x 72
XHDPI - 96 x 96
XXHDPI - 144 x 144
XXXHDPI - 192 x 192.
WEB - 512 x 512 (Require when upload application on Google Play) 
```

注意：当您在 Market 上上传您的 android 应用程序时使用 WEB(512 x 512) 图像。

|| Android 应用程序图标大小 ||

**所有设备**

```
hdpi=281*164
mdpi=188*110
xhdpi=375*219
xxhdpi=563*329
xxxhdpi=750*438

48 × 48 (mdpi)
72 × 72 (hdpi)
96 × 96 (xhdpi)
144 × 144 (xxhdpi)
192 × 192 (xxxhdpi)
512 × 512 (Google Play store) 
```

* * *

## 回答 #3

> 赞同：103
> 
> 时间：2015-01-06T11:52:48.697

对于不同的屏幕像素密度，Android 图标需要五种不同的尺寸。较低分辨率的图标是从基线自动创建的。

```
mdpi (Baseline): 160 dpi 1×
hdpi: 240 dpi 1.5×
xhdpi: 320 dpi 2×
xxhdpi: 480 dpi 3×
xxxhdpi: 640 dpi 4× (launcher icon only) 
```

启动器图标 (.Png)

```
48 × 48 (mdpi)
72 × 72 (hdpi)
96 × 96 (xhdpi)
144 × 144 (xxhdpi)
192 × 192 (xxxhdpi)
512 × 512 (Google Play store) 
```

操作栏、对话框和选项卡图标

```
24 × 24 area in 32 × 32 (mdpi)
36 × 36 area in 48 × 48 (hdpi)
48 × 48 area in 64 × 64 (xhdpi)
72 × 72 area in 96 × 96 (xxhdpi)
96 × 96 area in 128 × 128 (xxxhdpi)* 
```

通知图标

```
22 × 22 area in 24 × 24 (mdpi)
33 × 33 area in 36 × 36 (hdpi)
44 × 44 area in 48 × 48 (xhdpi)
66 × 66 area in 72 × 72 (xxhdpi)
88 × 88 area in 96 × 96 (xxxhdpi)* 
```

小的上下文图标

```
16 × 16 (mdpi)
24 × 24 (hdpi)
32 × 32 (xhdpi)
48 × 48 (xxhdpi)
64 × 64 (xxxhdpi)* 
```

[正如Supporting multiple Screens](https://developer.android.com/guide/practices/screens_support.html#xxxhdpi-note)官方网站所说，只有启动器图标需要的xxxhdpi大小。

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2017-09-13T11:35:20.373

# 自适应图标

从 Android 8.0 开始，有自适应图标，它们由两个独立的层组成。两层都是 108 x 108 dp。

[![在此处输入图像描述](../Images/a328a3228f49b6d20964ea21a7ebf614.png)](https://i.stack.imgur.com/CJ3aB.png)

*（图片改编自[Android 文档](https://developer.android.com/guide/practices/ui_guidelines/icon_design_adaptive.html)）*

# 尺寸

如果您支持 Android 8.0 以下的版本，您仍需要包含旧尺寸 ( `48dp`)。我将下面每个分辨率的像素大小标记为红色。

[![在此处输入图像描述](../Images/be0023291e2edf577da23dd60d246c1d.png)](https://i.stack.imgur.com/HrMdp.png)

# 不要用手做

我想如果你愿意，你可以手工制作所有这些，但我不得不说我这样做的日子已经结束了。Android Studio 3.0 [Asset Studio](https://developer.android.com/studio/write/image-asset-studio.html)相当不错，会为您生成所有这些。您所要做的就是提供足够大的前景和背景图像。（我使用了 1024 x 1024 像素的图像）。

要打开 Asset Studio，请转到**File > New > Image Asset**。

[![在此处输入图像描述](../Images/fdc3f77d41910df8a63f54927adcfcfc.png)](https://i.stack.imgur.com/J7Kqs.png)

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2016-01-03T08:33:47.783

当 Android Studio 可以为我们生成图标时，不需要第三方工具。

*   `File`-> `New`->`Image Asset`

*   然后选择`Launcher Icons`作为**资产类型：**

*   **为图像文件**选择高分辨率图像：

 **[![Android 生成启动器图标](../Images/8123ebb35519786a3eeff333d50e7156.png)](https://i.stack.imgur.com/QURZS.png)

*   `Next`->`Finish`生成图标

[![生成 ic laucher 图标](../Images/8b44185eb7b4651a747bfb4a267f544c.png)](https://i.stack.imgur.com/LNosD.png)

如果需要，最后更新`android:icon`名称字段。`AndroidManifest.xml`

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2015-05-21T05:40:16.520

提供至少 512px X 512px 的图像并使用此工具： [https ://romannurik.github.io/AndroidAssetStudio/icons-launcher.html](https://romannurik.github.io/AndroidAssetStudio/icons-launcher.html)

它将为您生成正确大小的所有图标，包括 Play 商店的网络图像。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2017-09-14T13:39:41.070

根据材料设计指南（[**此处**](https://material.io/guidelines/style/icons.html#icons-product-icons)，在“DP 单元网格”下），您的产品图标大小应为 48 dp，内边距为 1dp，但 XXXHDPI 的情况除外，内边距应为 4dp。

因此，以像素为单位，大小为：

*   48 × 48 (mdpi) , 1 dp padding
*   72 × 72 (hdpi)，内边距为 1 dp
*   96 × 96 (xhdpi)，内边距为 1 dp
*   144 × 144 (xxhdpi)，内边距为 1 dp
*   192 × 192 (xxxhdpi) ，带 4 dp 填充

我建议避免使用 VectorDrawable，因为某些启动器不支持它，但我认为只要你的 minSdk 支持它们的透明度（API 18 及更高版本 - Android 4.3），WEBP 应该没问题。

如果您在 Play Store 上发布，上传内容的要求是（基于[**此处**](https://support.google.com/googleplay/android-developer/answer/1078870?hl=en)）：

*   32 位 PNG（带 alpha 版本）
*   尺寸：512 像素 x 512 像素
*   最大文件大小：1024KB

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2015-05-21T05:36:33.357

LDPI 应为 36 x 36。

MDPI 48 x 48。

TVDPI 64 x 64。

HDPI 72 x 72。

XHDPI 96 x 96。

XXHDPI 144 x 144。

XXXHDPI 192 x 192。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-11-19T20:58:43.647

就像@MartinVonMartinsgrün 提到的那样，现在存在更好的工具，然后在 android studio 中断言生成器

对于应用程序图标（工具栏、操作栏、DrawableLeft 等）使用： [http ://romannurik.github.io/AndroidAssetStudio/icons-actionbar.html](http://romannurik.github.io/AndroidAssetStudio/icons-actionbar.html)

对于启动器（应用程序图标）使用： [https ://romannurik.github.io/AndroidAssetStudio/icons-launcher.html](https://romannurik.github.io/AndroidAssetStudio/icons-launcher.html)

但这里有一些技巧和方法可以获得更好的图标和启动器图标分辨率。

**步骤1 ：**

首先访问[https://materialdesignicons.com](https://materialdesignicons.com)并选择您的图标。或者，如果您的图标分辨率很高，请跳过此步骤。单击所需的图标，然后单击“高级导出”，它将打开一个如下所示的窗口[![尝试生成尽可能大的图标](../Images/2628c268356725937201ff4dc8378fd8.png)](https://i.stack.imgur.com/YMMSf.png)

然后点击“图标”生成图标（.png）。诀窍是尝试为高分辨率设备生成尽可能大的图标，这些工具将为小型设备处理所有这些问题，但如果您使用小图标，同时为高端设备生成图标，您将失去图标分辨率。

**第2步 ：**

然后进入工具页面并上传图标[![在此处输入图像描述](../Images/7cc92d520c08426981ed3a77a7aa47ae.png)](https://i.stack.imgur.com/RP0tA.png)

如果要为图标着色，请单击“自定义”。无论您上传的是什么颜色的图标，通过使用自定义您可以生成任何您想要的颜色。然后选择一个名称并单击“下载 .ZIP”。这将下载带有大多数常见分辨率图标的 .zip 文件。您可以将 res 文件夹复制并粘贴到您的应用程序项目文件夹中，您将在可绘制部分中看到该图标。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2014-08-28T02:22:50.643

我已经发布了一个脚本，用于从单个 SVG 图标文件生成 PhoneGap 应用程序的所有平台图标。如果您有现有的位图，我还包括一些注释，可以帮助您从现有位图生成 SVG 矢量。这不适用于所有位图，但可能适用于您的位图。

*   [https://github.com/tohagan/phonegap-graphics](https://github.com/tohagan/phonegap-graphics)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-11-26T05:45:24.557

我遇到了同样的问题，但后来意识到我的图标图形在允许的正方形内的排列（在我的情况下为 512 x 512）没有最大化。所以我旋转了图像并能够将其放大以更好地填充角落。`res`然后我在 Android Studio 的项目中右键单击我的文件夹，然后选择`New`then `Image Asset`，我通过向导选择要使用的图像文件。然后，如果您选中“修剪周围的空白区域”框，它会确保所有能够接触到正方形的边。这些步骤使它比原来的要大得多。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-09-13T12:05:31.790

您可以直接在android studio本身中创建图标。您需要遵循的步骤是：

1.右键Res->New->Image assets

2.将资产类型更改为图像。

3.从本地磁盘加载镜像

4.您可以选择修剪、更改填充和添加背景。如果需要，更改值。

5.单击下一步->完成。

如果选择启动器图标或 drawable-mdpi、drawable-hdpi、drawable-xhdpi、drawable-xxhdpi、drawable-，图像将自动添加到 mipmap-mdpi、mipmap-hdpi、mipmap-xhdpi、mipmap-xxhdpi、mipmap-xxxhdpi xxxhdpi 如果您选择其他图标选项。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-09-21T05:35:43.973

## **用于 Google Play 商店应用提交的启动图像和斜线图像大小**

1.  高分辨率图标。PFB 所需大小的表格 32 位 PNG（带 alpha），尺寸：512 像素 x 512 像素，最大文件大小：1024 KB

[所需的启动图标和启动画面大小](http://i.stack.imgur.com/RFQ0R.png)

2.  总共需要至少 2 个屏幕截图（每种类型最多 8 个屏幕截图，类型包括“手机”、“7 英寸平板电脑”和“10 英寸平板电脑”）。JPEG 或 24 位 PNG（无 alpha），最小尺寸：320 像素, 最大尺寸：3840 像素，样本尺寸：320 x 480、480 x 800、480 x 854、1280 x 720、1280 x 800 24 位 PNG 或 JPEG**

# c# - C# 基本循环迭代器

> ID：12768131
> 
> 赞同：-4
> 
> 时间：2012-10-07T10:48:16.873
> 
> 标签：c#

好的，问题来了，使用 C# 我需要使用循环创建一个程序，该循环要求输入一个数字，然后显示它的前 1000 个倍数。因此，基本上，如果该人输入 17，它将显示 17、34、51、68、85 等。

到目前为止，我已经得到了这段代码。

```
Console.WriteLine("Please enter a number");
int number = Convert.ToInt32(Console.ReadLine());

for (int i = 1; i <= 1000; ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T10:55:26.170

```
Console.WriteLine("Please enter a number");
int number = Convert.ToInt32(Console.ReadLine());

for (int i = 0; i < 1000; i++)
  Console.WriteLine(i * number); 
```

# c# - 以编程方式更改表单控件

> ID：12768133
> 
> 赞同：0
> 
> 时间：2012-10-07T10:48:27.610
> 
> 标签：c#, .net, winforms, visual-studio-2012

我不确定这是否可以做到，但我想知道是否有可能以编程方式完全改变表单上的控件，类似于安装程序发生的情况；当您单击下一个按钮时，表单不会隐藏或关闭并打开下一个表单，它会加载一组不同的控件（至少，它是这样显示的）。

是否可以在 Visual Studio 中使用 C# 执行此操作？还是必须使用选项卡或隐藏面板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:59:04.993

我认为您正在寻找的是 UserControl。UserControl 就像一个表单，您可以将它用作其他控件的容器。[你可以在这里](http://msdn.microsoft.com/en-us/library/a6h7e207%28v=VS.71%29.aspx)找到一个演练。

对于您提到的安装程序或一般的向导，您可以为每个步骤设计不同的用户控件，并将它们中的每一个加载到表单的保留区域中。保留区域可以是面板。例如，假设您有一个按钮，它调用一个以向导步骤号作为参数的方法：

```
UserControl _step1Control = new UcStep1Control;
UserControl _step2Control = new UcStep2Control;
private void SetStep(int stepNumber)
{
    panel1.Controls.Clear();
    switch(stepNumber)
    {
        case 1:
            panel.Controls.Add(_step1Control);
            break;
        case 2:
            panel1.Controls.Add(_step2Control);
            break;
        default:
            break;
      }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:54:06.590

是的，您可以以编程方式对控件执行任何操作。您使用的设计器还会在后台生成 C# 代码。

为了向表单中添加新控件，您使用`Form.Controls.Add(Control c)`方法。可以使用任何继承自`Control`( `Button`,`ListBox`等) 的类。要删除它，请使用`Remove`方法而不是`Add`.

# php - url 和内容中的 PHP %20 问题

> ID：12768136
> 
> 赞同：2
> 
> 时间：2012-10-07T10:49:22.147
> 
> 标签：php, url

我正在使用一个小脚本，在生成的内容中我得到一个 %20 而不是空格。

这是我正在使用的脚本：

索引.php

```
what is your name?

<FORM METHOD="LINK" ACTION="temp.php?name=">
<input type="text" value="" name="name"  ></input>
<input type="submit" value="Submit" ></input>
</form> 
```

在 temp.php 上

```
<?php
$name = rawurlencode( $_GET['name'] );
echo "<h1>" . $name . "</h1>";
?>

Hello <?php print $name ?> how are you? 
```

如果我输入`Mr Example`，它将呈现为 Mr%20Example。它对 url 做同样的事情`temp.php?name=Mr%20Example`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:52:44.407

改用这个

```
<?php
$name =     urldecode($_GET['name'])
echo "<h1>" . $name . "</h1>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:54:15.640

%20 来是因为你用过`rawurlencode`

```
$name = rawurlencode( $_GET['name'] ); 
```

您必须使用 rawurldecode ，它将所有此类字符替换为原始字符。

```
$name = rawurldecode( $_GET['name'] ); 
```

# facebook-graph-api - 无论如何在不使用 FQL 的 Facebook 的 Graph API 中请求特定值吗？

> ID：12768137
> 
> 赞同：0
> 
> 时间：2012-10-07T10:49:22.740
> 
> 标签：facebook-graph-api

例如

```
FB.api('/me/permissions="user_photos"', function (response) { }); 
```

代替

```
FB.api({ method: 'fql.query', query: 'SELECT user_photos FROM permissions WHERE uid=me()' }, function(resp) {
    for(var key in resp[0]) {
        if(resp[0][key] === "1")
            console.log(key+' is granted')
        else
            console.log(key+' is not granted')
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:27:56.860

是的，有一种方法称为图形 api 中的选择或更高级[的字段扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)：

您可以使用“fields”查询参数选择要返回的字段（或连接），例如：

```
FB.api('/me/permissions?fields=user_photos', function (response) { }); 
```

图形 API 浏览器[演示](https://developers.facebook.com/tools/explorer/?method=GET&path=me/permissions?fields=user_photos)

**编辑：** 直接从图形 api 文档引用：

> **选择**
> 
> 默认情况下，大多数对象属性都会在您进行查询时返回。您可以使用“fields”查询参数选择要返回的字段（或连接）。例如，这个 URL 只会返回 Ben 的 id、name 和图片： [https ://graph.facebook.com/bgolub?fields=id,name,picture](https://graph.facebook.com/bgolub?fields=id,name,picture)
> 
> 您还可以使用“ids”查询参数在单个查询中请求多个对象。例如，URL [https://graph.facebook.com?ids=arjun,vernal](https://graph.facebook.com?ids=arjun,vernal)在同一响应中返回两个配置文件。
> 
> “ids”查询参数也接受 URL。这对于在 Open Graph 中查找 URL 的 ID 很有用。例如： [https ://graph.facebook.com/?ids=http://www.imdb.com/title/tt0117500/](https://graph.facebook.com/?ids=http://www.imdb.com/title/tt0117500/)
> 
> 此外，还有一个特殊标识符 me，它指的是当前用户。因此 URL [https://graph.facebook.com/me](https://graph.facebook.com/me)返回活动用户的个人资料。
> 
> 通过 /home、/feed 或 /posts 连接检索帖子时，您可以通过在 URL 参数中添加 with=location 来将结果限制为仅包含附加位置的结果：
> 
> [https://graph.facebook.com/me/home?with=location](https://graph.facebook.com/me/home?with=location)

来源：[图形 API 文档](https://developers.facebook.com/docs/reference/api/)

# php - 在 PHP 中使用迭代删除

> ID：12768141
> 
> 赞同：-1
> 
> 时间：2012-10-07T10:50:06.700
> 
> 标签：php, recursion, iteration, directory, delete-file

这是我的递归文件和文件夹删除器功能。

```
function rmdirRecursively($dir) {
    global $exc;
    $it = new RecursiveIteratorIterator(
                    new RecursiveDirectoryIterator($dir),
                    RecursiveIteratorIterator::CHILD_FIRST
    );

    $excludeDirsNames = array();
    $excludeFileNames = $exc["files"];

    foreach ($it as $entry) {
        if ($entry->isDir()) {
            if (!in_array($entry->getBasename(), $excludeDirsNames)) {
                try {
                    rmdir($entry->getPathname());
                } catch (Exception $ex) {
                    // dir not empty
                }
            }
        } elseif (!in_array($entry->getFileName(), $excludeFileNames)) {
            unlink($entry->getPathname());
        }
    }
} 
```

我通过发送必须递归删除的父目录名称来触发此功能（及其所有内容）

问题是，我得到

> [2012 年 10 月 7 日 04:31:51] PHP 警告：rmdir(./somefolder) [function.rmdir]：第 69 行的目录不为空`RecursiveIteratorIterator::CHILD_FIRST`

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:13:20.297

尝试这个

```
$excludeDirsNames = array('.', '..'); 
```

否则，您将尝试在删除其所有内容之前删除当前目录和父目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:08:21.793

首先列出DIR的文件并删除它们，然后您就可以删除DIR

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T12:24:23.597

试试这个代码：

```
function DelDir($dir)
{
  $d = dir($dir);
  while (false !== ($entry = $d->read()))
  {
    if (($entry != '.') && ($entry != '..'))
    {
      if (is_file($dir . '/' . $entry))
        unlink($dir . '/' . $entry);
      else
        DelDir($dir . '/' . $entry);
    }
  }
  $d->close();
  rmdir($dir);
}

DelDir('./test'); 
```

# php - 防止重复的用户名在用户名后添加序列号

> ID：12768144
> 
> 赞同：0
> 
> 时间：2012-10-07T10:50:30.837
> 
> 标签：php, sql

我正在尝试实施 facebook 注册。它有效，我正在取回我需要的所有数据。现在我想像这样为用户分配一个用户名：

```
$username = ''.$first_name.'.'.$lastname.''; 
```

问题是我不知道同名和姓氏的用户是否会注册到该网站，我想检查用户名是否被使用并向基本 $username 添加一个序列号（facebook 也这样做）， 像这样：

```
name.lastname
name.lastname.1
name.lastname.2
etc 
```

我试过：

```
$temp_username = ''.$first_name.''.$last_name.'';
$check_username = mysql_query("SELECT username FROM users WHERE username = '$temp_username'");
$num_rows = mysql_num_rows($check_username);
if ($num_rows == 0){
    $username = strtolower($temp_username);
} else {
    $username = strtolower(''.$temp_username.'.'.$num_rows.'');
} 
```

但当然它不起作用，因为始终只有一个用户使用该用户名。

编辑* *** * 这就是我修复它的方法（感谢 zander）：

```
 $temp_username = ''.$first_name.''.$last_name.'';
        $num_rows = mysql_num_rows(mysql_query("SELECT username FROM users  WHERE username = '$temp_username' OR username LIKE '$temp_username%' "));
        $username = strtolower(''.$temp_username.'.'.$num_rows.''); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:01:34.453

`$num_rows = mysql_num_rows(mysql_query("SELECT username FROM users WHERE username = '$temp_username' OR username LIKE '$temp_username.%' "));`将返回您实际期望的行数。然后，用`$username = strtolower(''.$temp_username.'.'.$num_rows.'');`它来完成它。不需要循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T11:42:51.827

`SELECT`如果有的话，下面确定数字最高的用户

```
select max(reverse(SUBSTRING(reverse(username), 1, LOCATE('.', reverse(username))-1))) trail 
  from users
 where username like 'John.Smith.%'; 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/0e378/23)

像这样将它添加到 PHP

```
...
if ($num_rows == 0){
    $username = strtolower($temp_username);
} else {
   ... query for the max number here
   ... concatenate the username with the max number 
} 
```

啊，最后但并非最不重要。确保您的代码不易受到 SQL 注入的影响。使用绑定参数。好的开始是这个答案：[防御 mysql 注入和跨站点脚本的最佳方法](https://stackoverflow.com/questions/568995/best-way-to-defend-against-mysql-injection-and-cross-site-scripting)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T12:20:53.907

有许多现有答案正确建议在 WHERE 子句中使用 LIKE 运算符。但是有一个关键问题，现有的答案都没有解决。

两个人可以尝试在相同（或几乎相同）时间添加相同的用户名。每个都会选择与该名称类似的现有用户名的计数，并且它们每个都会生成相同的数字后缀，并且您仍然会得到重复。

我既不是 mysql 开发者也不是 php 开发者，所以我不会提供太多具体语法的方式。

您需要确保您的 users 表使用[InnoDB 存储引擎](http://dev.mysql.com/doc/refman/5.0/en/storage-engines.html)。您的代码将需要：

1.  开始交易

2.  SELECT FOR UPDATE 以确保只有一个人可以在给定时间获得特定用户名的计数

3.  插入您的新用户

4.  提交您的交易。

有关详细信息，请参阅[选择更新](http://dev.mysql.com/doc/refman/5.0/en/innodb-locking-reads.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T10:56:32.347

请改用此代码：

```
$check_username = mysql_query("SELECT username FROM users WHERE username = '$temp_username' OR username LIKE  '$temp_username.%' "); 
```

这将匹配的示例：

johnsmith 或 joshnsmith.X 其中 x 将是 1 , 2 , 3 ........等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T11:00:38.177

### 数据库转储

```
CREATE TABLE Users (
  `username` varchar(255) PRIMARY KEY,
  `firstname` varchar(255),
  `lastname` varchar(255)
);

INSERT INTO Users (`username`, `firstname`, `lastname`) VALUES (
  'praveen.kumar', 'Praveen', 'Kumar'
),(
  'praveen.kumar.1', 'Praveen', 'Kumar'
),(
  'praveen.kumar.2', 'Praveen', 'Kumar'
); 
```

现在到 SQL，我们可以这样做：

```
SELECT *
FROM `Users`
WHERE `username` LIKE "praveen.kumar%"
ORDER BY `username` DESC 
```

给出一个输出：

```
+-----------------+-----------+----------+
|        USERNAME | FIRSTNAME | LASTNAME |
+-----------------+-----------+----------+
| praveen.kumar.2 |   Praveen |    Kumar |
| praveen.kumar.1 |   Praveen |    Kumar |
|   praveen.kumar |   Praveen |    Kumar |
+-----------------+-----------+----------+ 
```

你可以通过这种方式获得最新的：

```
SELECT *
FROM `Users`
WHERE `username` LIKE "praveen.kumar%"
ORDER BY `username` DESC
LIMIT 1 
```

**PHP**代码：

```
<?php
    # Outputs the largest number with that username.
    $nextUser = substr($userNameFromDB, strrpos($userNameFromDB, "."));
    $nextUser++;
?> 
```

### SQL 小提琴：[http ://sqlfiddle.com/#!2/ad149/1](http://sqlfiddle.com/#!2/ad149/1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-07T11:01:35.090

使用`count()`函数和`like`运算符：

```
$check_username = mysql_query("
    SELECT count(username) 
    FROM users 
    WHERE username like '$temp_username%'
"); 
```

它将返回现有名称的数量。无需调用`mysql_num_rows`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-07T11:18:51.877

您应该使用 count() 函数

```
$query = mysql_query("
  SELECT count(user_name) cnt
    FROM users 
    WHERE username = '$just_registered_username'
"); 
```

然后使用获取结果

```
$row = sql_fetchrow($query); 
```

然后获取用户数为

```
$next_index = $row->cnt; 
```

然后将其附加到新用户名

```
$new_username = "{$just_registered_username}.{$next_index}"; 
```

不要忘记在最终代码中添加注释。还可以尝试使用 PDO 进行数据库访问。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-07T10:56:46.990

如果要查找不存在的用户名，则必须尝试组合，直到找到不存在的用户名。

因此，循环直到找到不存在的名称：

```
$temp_username = $first_name . $last_name;
$i=1;
$found = false;
while(!$found) {
  $check_username = mysql_query(
     "SELECT username FROM users WHERE username = '$temp_username'");
  $found = mysql_num_rows($check_username);
  if ($found){
    $username = strtolower($temp_username);
  }
  else{
    $temp_username = $first_name . $last_name . '.' . $i;
    $i++
  }
} 
```

# jakarta-mail - java邮件api setFrom不起作用

> ID：12768148
> 
> 赞同：1
> 
> 时间：2012-10-07T10:51:06.070
> 
> 标签：jakarta-mail

发送电子邮件：

```
public class SendMail {

public void sendEmail(final String from, final String password,String toAddress) {
    Properties props = new Properties();
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.socketFactory.port", "465");
    props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", "465");
    Session session = Session.getDefaultInstance(props,
            new javax.mail.Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(from,password);
                }
            });
    try
    {
        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress(from));
        message.setRecipients(Message.RecipientType.TO,
                InternetAddress.parse(toAddress));
        message.setSentDate(new Date());
        message.setSubject("Account Activation for T20home");
        message.setContent("Hello", "text/html");
        Transport transport = session.getTransport("smtp");
        transport.connect("smtp.gmail.com", from, password);
        transport.sendMessage(message, message.getAllRecipients());
        transport.close();
    }
    catch(MessagingException mex)
    {

    }
}
} 
```

我可以发送这样的电子邮件：

```
SendMail send = new SendMail()
send.sendEmail("mailFrom1@gmail.com", "pass1","to1")

SendMail send1 = new SendMail()
send1.sendEmail("mailFrom2@gmail.com", "pass2","to1") 
```

它工作得很好，但是从 mailFrom1@gmail.com 收到两封信到电子邮件“to1”。

必须来自“mailFrom1@gmail.com”的一封信和来自“mailFrom2@gmail.com”的一封信

setFrom 不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:25:57.593

您已经[犯了 JavaMail FAQ 中描述的几个常见错误](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)（剪切和粘贴编程的危险）。一旦你修复它们，我怀疑你会遇到不同的问题，但让我们看看......

# c# - 设计时出现 VS 错误 - “ICustomType[]”类型的对象无法转换为“ICustomType[]”类型

> ID：12768154
> 
> 赞同：3
> 
> 时间：2012-10-07T10:51:55.707
> 
> 标签：c#, .net, winforms, windows-forms-designer, propertygrid

我创建了一个派生控件，`PropertyGrid`并且以下属性在设计时导致 Visual Studio 出现问题。

注意：运行时没有任何问题。这只是关于设计者，如果我从表单的资源文件中手动删除编码值，问题就会得到解决。

构造函数：

```
/// <summary>
/// Public constructor.
/// </summary>
public FilterablePropertyGrid()
{
    base.SelectedObjects = wrapper.ToArray();
} 
```

物业代码：

```
private List<ObjectWrapper> wrapper = new List<ObjectWrapper>();

/// <summary>
/// Overwride the PropertyGrid.SelectedObject property.
/// The object passed to the base PropertyGrid is the wrapper.
/// </summary>
public new List<ICustomType> SelectedObjects
{
    get
    {
        return wrapper.Any() ?
            base.SelectedObjects.Select(p => ((ObjectWrapper)p).SelectedObject).ToList() :
            new List<ICustomType>();
    }
    set
    {
        if (value == null || value.Count == 0)
        {
            wrapper = new List<ObjectWrapper>();
            base.SelectedObjects = new object[] { };
        }
        else
        {
            wrapper = new List<ObjectWrapper>(value.Select(p => new ObjectWrapper(p)));
            // Link the wrapper to the parent PropertyGrid.
            base.SelectedObjects = wrapper.ToArray();
        }
    }
} 
```

错误： ![在此处输入图像描述](../Images/c91f215bbb534e0dd2e339249b75acb4.png)

我想知道你是否可以帮我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:02:05.493

由于这是您自己的自定义类型（不是框架类型），因此此错误几乎总是意味着您在两个不同的程序集中声明了相同的接口。

检查此类型的声明位置。它应该只在一个程序集中。根据需要添加引用，以便所有位置都可以访问单个程序集中的类型。

将相同的代码文件编译到两个程序集中会创建两种不同的类型，它们恰好被称为相同的东西。它们不是同一类型，不可互换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-16T16:56:24.867

我有一个类似的问题。我去 resx 文件，找到导致问题的类型的对象，然后将其删除。然后我在运行时为该属性分配了一个值。这样，设计者就没有什么可抱怨的了，您可以安全地在不同的程序集中使用派生控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-23T16:02:56.997

我在 VS 2019 中遇到了类似的问题，最终删除了 .vs 文件夹。在那之后一切都很好。

# mercurial - 发出 hg push 时“未找到更改”，但有更改

> ID：12768163
> 
> 赞同：1
> 
> 时间：2012-10-07T10:53:25.857
> 
> 标签：mercurial, kiln

试图推送到 Kiln 回购。肯定有更改，其中很多，`hg status`列出了 238 个更改的文件。有一个警告说带有指纹等等的证书没有得到验证——尽管如果它只是一个警告，为什么它会干扰推送？

完整输出：

```
pushing to https://mydomain/Code/Repositories/Group/myrepo
warning: mydomain certificate with fingerprint fe:ab:65:89:7c:6f:1a:21:a8:39:54:6c:2a:cb:ca:ae:e9:e5:f0:01 not verified (check hostfingerprints or web.cacerts config setting)
warning: developers.kilnhg.com certificate with fingerprint fe:ab:65:89:7c:6f:1a:21:a8:39:54:6c:2a:cb:ca:ae:e9:e5:f0:01 not verified (check hostfingerprints or web.cacerts config setting)
searching for changes
searching for changes
no changes found 
```

谷歌搜索没有任何结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T12:48:11.850

您需要先将更改提交到本地存储库，然后才能将生成的更改集推送到远程存储库。使用命令`hg commit`执行此操作。

# dns - 将子域映射到 localhost URL

> ID：12768164
> 
> 赞同：1
> 
> 时间：2012-10-07T10:53:49.727
> 
> 标签：dns, windows-server-2008, subdomain, redmine, bitnami

我无法弄清楚如何将 subdomain.domain.com 指向这个可以从本地主机访问的 url 的孩子，`http://localhost:5200/redmine/`.

我已将它安装在 Windows 2008 R2 服务器上，并希望使用 subdomain.domain.com 访问它

我知道如何将子域指向服务器 IP 地址，但不确定如何将此子域请求绑定到特定的应用程序 URL？

请注意，我已经使用 Bitnami 堆栈安装了 redmine。

任何提示/指南都会更好地处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:08:59.943

这实际上不是关于 DNS，而是关于如何让在自定义端口上运行的应用程序在端口 80 上响应。

你有两个选择：

1.  让您的 redmine 安装响应端口 80 并直接处理传入请求。
2.  使用*反向代理*将端口 80 上的传入请求转发到端口 5200 上运行的 redmine。

如果您的 Web 服务器已经侦听端口 80，则选项 1 不可行。

对于选项 2，应为*subdomain.domain.com*的 DNS 条目配置服务器的公共 IP 地址。在您的 Web 服务器上，您应该有一个（空）网站响应子域。

我从未将[IIS 用作反向代理](http://blogs.msdn.com/b/carlosag/archive/2010/04/02/setting-up-a-reverse-proxy-using-iis-url-rewrite-and-arr.aspx)，但我确信这可以[相对容易地](http://sahelp.sharepointforall.com/FAQ/bconfigure_IIS.html)设置。在 IIS6 上，我推荐可以做反向代理的[IIRF 。](http://iirf.codeplex.com/)

否则，您也可以使用 apache 作为反向代理，并且您可以考虑启动*多个 redmine 实例*以及直接从具有*激进缓存标头的网络服务器提供**静态内容*。这是一个示例 apache 配置（来自[这里](https://raw.github.com/gist/1148622/090bbc0d63e90bc9a6027eb6b47c674c4aa5867a/httpd-proxa-mongrel.conf)）：

 *```
<VirtualHost *:8080>
    ServerAdmin admin@domain.local
    ServerName redmine.domain.local

    DocumentRoot "C:/redminepath/public"

    <Proxy *>
        Order allow,deny
        Allow from all
    </Proxy>
    <Proxy balancer://redmine_cluster>
        BalancerMember http://127.0.0.1:8081
        BalancerMember http://127.0.0.1:8082
        BalancerMember http://127.0.0.1:8083
    </Proxy>
    ProxyPreserveHost On

    <DirectoryMatch "/(javascripts|images|stylesheets|plugin_assets|themes)">
        <FilesMatch "\.(ico|pdf|flv|jpe?g|png|gif|js|css|swf)$">
            ExpiresActive On
            ExpiresDefault "access plus 1 month"
        </FilesMatch>
    </DirectoryMatch>
    <FilesMatch "favicon\.ico$">
        ExpiresActive On
        ExpiresDefault "access plus 1 month"
    </FilesMatch>

    # Let apache serve the static content
    ProxyPass /images !
    ProxyPass /stylesheets !
    ProxyPass /javascripts !
    ProxyPass /favicon.ico !
    ProxyPass /plugin_assets !
    ProxyPass /themes !

    # Proxy all other requests
    ProxyPass / balancer://redmine_cluster/
    ProxyPassReverse / balancer://redmine_cluster/
</VirtualHost> 
```*

# java - 在 Glassfish 中修补单个类

> ID：12768165
> 
> 赞同：1
> 
> 时间：2012-10-07T10:53:58.790
> 
> 标签：java, glassfish, jax-ws

我们在 Glassfish 3.1.2.2 中遇到了一个错误（特别是在 Metro 模块中的 WSEndpointImpl 类中），该错误已修复，但希望在 Glassfish 4.0 或 3.1 分支中的某个下一个版本中到期。由于此修复对我们的应用程序至关重要，因此我们希望单独修补此类并以某种方式将其安装到 Glassfish，然后再等待下一个版本。这可能吗？你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:08:09.927

[Glassfish 支持通过Endorsed Standards Override Mechanism](http://docs.oracle.com/cd/E18930_01/html/821-2418/gchif.html)交换某些模块的其他版本，并且根据[Oracle 文档](http://docs.oracle.com/javase/6/docs/technotes/guides/standards/)，JAX-WS 是可替换组件之一。

您只需将更新的版本复制到`/lib/endorsed`您域的目录中，但我很确定您也可以将文件放在`/lib/endorsed`Glassfish 服务器本身的目录中。

[请参阅此博客条目中](http://weblogs.java.net/blog/bhaktimehta/archive/2007/01/developing_webs.html)的实际示例

# shell - 从 Sublime 2 获取今天的日期

> ID：12768169
> 
> 赞同：1
> 
> 时间：2012-10-07T10:54:30.203
> 
> 标签：shell, code-snippets, sublimetext2

我是一个 Sublime Text 新手，我之前使用过 Textmate，我有一个方便的“今天”命令，它在编辑器中返回今天的日期（使用 shell）。

```
eg 'today' + TAB ==> '12/10/2012/' 
```

我将如何在 Sublime 中创建类似的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T11:34:12.920

Sublime Text 2 有一个称为 Snippets 的功能，它只允许静态“表达式”+ TAB 替换。

似乎有人正在开发一个名为[SMART Snippets](https://github.com/BoundInCode/SMART-Snippets)的插件，您可以在其中使用 Snippets 中的 python 代码。

> 使用[SMART Snippets](https://github.com/BoundInCode/SMART-Snippets)，您现在可以使用 Python 动态创建片段。

SMART 代码段中的 python 代码类似于：

```
###regex: no
###params: no
###trigger: today
```from time import gmtime, strftime
insert(strftime("%d/%m/%Y", gmtime()))``` 
```

这现在可以通过键入“today + TAB”在我的 Sublime Text 2 中使用

# python - 如何从文本文件中读取到文本框中？

> ID：12768170
> 
> 赞同：1
> 
> 时间：2012-10-07T10:54:36.387
> 
> 标签：python, textbox, stream, text-files, pygtk

我想知道一种读取文本文件并将其内容添加到文本框中的方法。我在 PyGTK 中执行此操作，所以我需要在 Python 中获取文本，然后使用 PyGTK 将其放入文本框中，那会很棒。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:49:44.403

假设您的文本框是[`TextView`](http://www.pygtk.org/docs/pygtk/class-gtktextview.html)：

```
#read the contents of the file
text = open("yourfile").read()
#get the underlying TextBuffer object of the TextView and set its text
textbox.get_buffer().set_text(text) 
```

# java - 与服务器通信的桌面程序

> ID：12768172
> 
> 赞同：0
> 
> 时间：2012-10-07T10:55:09.023
> 
> 标签：java, networking

我正在将 Swing 程序的业务逻辑转移到服务器上。

客户端-服务器和服务器-客户端通信的最有效方式是什么？

服务器将负责身份验证、获取和存储数据，因此程序必须经常通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:30:32.990

这取决于很多事情。如果您想要一个*真正的*答案，您应该明确说明您的程序将做什么以及您对“高效”的定义到底是什么

如果快速生产力属于您对高效的定义，那么我过去使用的一种方法涉及序列化以将普通的旧 java 对象发送到套接字。最近我发现，结合[netty](https://netty.io/) api，我能够快速原型化相当健壮的客户端/服务器通信。

胆量相当简单；客户端和服务器都在管道中运行带有 ObjectDecoder 和 ObjectEncoder 的 Netty。为每个设计用于处理数据的对象创建一个类。例如，HandshakeRequest 类和 HandshakeResponse 类。

握手请求可能如下所示：

```
public class HandshakeRequest extends Message {
    private static final long serialVersionUID = 1L;
} 
```

握手响应可能如下所示：

```
public class HandshakeResponse extends Message {
    private static final long serialVersionUID = 1L;
    private final HandshakeResult handshakeResult;

    public HandshakeResponse(HandshakeResult handshakeResult) {
        this.handshakeResult = handshakeResult;
    }

    public HandshakeResult getHandshakeResult() {
        return handshakeResult;
    }
} 
```

在 netty 中，当客户端连接时，服务器会发送一个握手请求：

```
@Override
public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) {
    Channel ch = e.getChannel();
    ch.write(new HandshakeRequest();
} 
```

客户端接收到 HandshakeRequest 对象，但它需要一种方法来告诉服务器刚刚发送了什么样的消息。为此，`Map<Class<?>, Method>`可以使用 a。当您的程序运行时，它应该通过反射遍历类的方法并将它们放置在映射中。这是一个例子：

```
public HashMap<Class<?>, Method> populateMessageHandler() {
    HashMap<Class<?>, Method> temp = new HashMap<Class<?>, Method>();
    for (Method method : getClass().getMethods()) {
        if (method.getAnnotation(MessageHandler.class) != null) {
            Class<?>[] methodParameters = method.getParameterTypes();
            temp.put(methodParameters[1], method);
        }
    }
    return temp;
} 
```

此代码将遍历当前类并查找标有 @MessageHandler 注释的方法，然后查看该方法的第一个参数（该参数是一个对象，例如`public void handleHandshakeRequest(HandshakeRequest request)`）并将该类作为键放入映射中方法，因为它的价值。

有了这个映射，很容易接收消息并将消息直接发送到应该处理消息的方法：

```
@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
    try {
        Message message = (Message) e.getMessage();
        Method method = messageHandlers.get(message.getClass());
        if (method == null) {
            System.out.println("No handler for message!");
        } else {
            method.invoke(this, ctx, message);
        }
    } catch(Exception exception) {
        exception.printStackTrace();
    }
} 
```

真的什么都没有了。netty 处理所有杂乱的东西，使我们可以轻松地来回发送序列化对象。如果您决定不想使用 netty，您可以将自己的协议包装在 java 的[Object Output Stream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectOutputStream.html)周围。总体而言，您将不得不做更多的工作，但沟通的简单性保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:17:04.700

很难说哪种方法在什么方面“最有效”，而且我不知道您的用例，但这里有几个选项：

最基本的方法是简单地使用“原始”TCP 套接字。好处是网络上没有任何额外的移动，您可以自己创建协议，后者也是一个缺点；您必须设计和实现自己的通信协议，以及在服务器端处理多个连接的基本框架（如果需要的话）。

使用 UDP 套接字，您可能会节省一点延迟和带宽（不多，除非您使用移动数据之类的东西，否则您可能不会注意到 TCP 在延迟方面有任何区别），但网络代码是有点困难的任务；UDP 套接字是“无连接的”，这意味着所有客户端消息都将在同一个处理程序中结束，并且必须相互区分。如果服务器需要跟上客户端状态，这可能有点难以实现。

MadProgrammer 提出了[RMI](http://docs.oracle.com/javase/tutorial/rmi/overview.html)（远程方法调用），我个人没用过，设置起来似乎有点麻烦，但从实现上看长远来看可能还是不错的。

可能最常见的方式之一是使用 http 进行通信，例如通过Web[服务](http://en.wikipedia.org/wiki/Webservice)[的 REST 接口](http://en.wikipedia.org/wiki/Representational_state_transfer)。有多个框架（我个人更喜欢[Spring MVC](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)）来帮助实现，但是现在学习一个新框架可能超出了你的范围。此外，复杂的 http 查询或长 url 可能会更多地占用您的带宽，但除非我们谈论大量同时存在的客户端，否则这通常不是问题（假设您在数据中心运行服务器） 100/100MBit 连接）。这可能是最容易扩展的解决方案，如果涉及到的话，因为有很多负载平衡解决方案可用于 Web 服务器。

# raphael - 在 RaphaelJs 中实现字母间距

> ID：12768175
> 
> 赞同：1
> 
> 时间：2012-10-07T10:55:22.457
> 
> 标签：raphael, letter-spacing

有没有办法在 raphael js 文本中设置字母间距？它可以在 CSS 中轻松完成，我如何在 raphael 中完成？任何黑客也可以..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:09:41.940

`Paper.print()`有一个字母间距属性：

```
var txt = r.print(10, 50, "O HAI", r.getFont("Comic Sans"), 30, 'middle', 1).attr({fill: "#fff"});
                                                                          ^
                                                           this is the letter spacing 
```

请参阅相关**[文档](http://raphaeljs.com/reference.html#Paper.print)**。

请注意，这需要包含“cufon-style”字体文件，并将呈现一个不可选择的路径对象而不是真实文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:58:45.117

它可以用普通的css来完成。看看这里：[http](http://tutorials.jenkov.com/svg/text-element.html) ://tutorials.jenkov.com/svg/text-element.html 。css 也适用于 svg。
这是一个[现场演示](http://jsfiddle.net/FzaH3/)，显示 svg 文本`letter-spacing`。

# r - ggplot2 PDF输出中的Unicode字符

> ID：12768176
> 
> 赞同：32
> 
> 时间：2012-10-07T10:55:24.120
> 
> 标签：r, unicode, utf-8, ggplot2

如何在使用 ggplot2 创建的 PDF 图中将 Unicode 字符用于标签、标题和类似内容？

考虑以下示例：

```
library(ggplot2)
qplot(Sepal.Length, Petal.Length, data=iris, main="Aʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ")
ggsave("t.pdf") 
```

该图的标题使用 Unicode 字符（小型大写字母），在输出中显示为`...`. 该问题仅出现在 pdf 绘图中；如果我用 替换最后一行`ggsave("t.png")`，则输出如预期。

我究竟做错了什么？我拥有的 R 脚本采用 UTF-8 编码。一些系统信息：

```
R version 2.14.1 (2011-12-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base 
```

在寻找这个问题的解决方案时，我发现一些[证据](http://cran.r-project.org/doc/Rnews/Rnews_2006-2.pdf)表明 R 使用单字节编码进行多字节编码，例如用于 PDF 或 postscript 输出的 UTF-8。我还找到了一些建议，例如，能够使[欧元符号正常工作](https://stackoverflow.com/questions/6706226/plotting-euro-symbol-in-ggplot2)，但没有通用解决方案。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-08T03:53:06.130

正如本建议的那样，`cairo_pdf()`是你的朋友。它还允许您通过`family`参数在 PDF 中嵌入非 postscript 字体（即 TTF/OTF）（如果您碰巧没有包含要使用的字形的任何 postscript 字体，则至关重要）。例如：

```
library(ggplot2)
cairo_pdf("example.pdf", family="DejaVu Sans")
qplot(Sepal.Length, Petal.Length, data=iris, main="Aʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ")
dev.off() 
```

...给出如下所示的 PDF： ![ggplot2 图形，标题中有自定义字体系列和非 ASCII 字符](../Images/1673fd479dc1011cb26240d338f1c028.png)

另见[这个问题](https://stackoverflow.com/questions/12378620/ttf-otf-font-selection-in-r-for-windows-onscreen-vs-pdf)；虽然它看起来与标题没有直接关系，但其中有很多关于让字体在 R 中做你想做的事情。

**编辑**评论中的每个请求，这是特定于 Windows 的代码：

```
library(ggplot2)
windowsFonts(myCustomWindowsFontName=windowsFont("DejaVu Sans"))
cairo_pdf("example.pdf", family="myCustomWindowsFontName")
qplot(Sepal.Length, Petal.Length, data=iris, main="Aʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ")
dev.off() 
```

要使用基本图形命令，首先使用命令`cairo_pdf()`定义字体系列就足够了`windowsFonts()`，如上所示。当然，请确保您使用系统上实际拥有的字体，并且该字体实际上具有您需要的所有字形。

下面评论中关于 DLL 文件的说明是我必须做的才能让`Cairo()`和`CairoPDF()`命令在`library(Cairo)`Windows 上工作。然后：

```
library(ggplot2)
library(Cairo)
windowsFonts(myCustomWindowsFontName=windowsFont("DejaVu Sans"))
CairoPDF("example.pdf")
par(family="myCustomWindowsFontName")
qplot(Sepal.Length, Petal.Length, data=iris, main="Aʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ")
dev.off() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-10-21T20:36:56.097

截至 2020 年和 R 版本 4.0.3，**在 Mac OS X 上不再是你的朋友*****，*****`cairo_pdf()`至少***就西里尔文而言 - 请参阅下面的失败库。*

 *# TL;博士

如果您必须使用西里尔文，请回到好的 ole`png`驱动程序。（和你的抗锯齿图告别。）

```
R -e 'png(filename = "ftw.png"); library(ggplot2); qplot(Sepal.Length, Petal.Length, data=iris, main="Aʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ&quot;); dev.off()'
open ftw.png 
```

[![旧的，又是新的。](../Images/12d0cfba5a406a1478622e5e96426a2b.png)](https://i.stack.imgur.com/TMCrH.png)

或者，如果您将[Rmarkdown](https://rmarkdown.rstudio.com/)与 knitr 一起使用：

```
R -e 'rmarkdown::render("foo.Rmd", "pdf_document", output_file="foo.pdf", runtime = "static", output_options = list(dev = "png"))' 
```

# 失败画廊

Cairo 的“现代”方法在 v4.0.3 中失败，如下所示。请注意，这不是（或不仅仅是）字体嵌入或渲染问题，因为从生成的 PDF 中选择和粘贴文本也会产生乱码输出。

准备步骤：

1.  [安装最新的 R](https://blog.theforce.top/2019/06/20/install-r-with-all-capabilities-and-openblas-openmp-on-macos-by-homebrew/)（4.0.3 或更高版本，全部`capabilities()`显示`TRUE`）
2.  `R -e 'install.packages(c("Cairo", "ggplot2"), repos="https://cloud.r-project.org")'`

## 香草配置

```
R -e 'library(ggplot2); qplot(Sepal.Length, Petal.Length, data=iris, main="Aʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ&quot;); ggsave("fail1.pdf")'
open fail1.pdf 
```

[![失败图库：原版配置](../Images/98fb5f3b421b9c2d6d2650ee9a6be6e9.png)](https://i.stack.imgur.com/SVwOb.png)

## `cairo_pdf()`单独使用

```
R -e 'cairo_pdf("fail2.pdf"); library(ggplot2); qplot(Sepal.Length, Petal.Length, data=iris, main="Aʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ&quot;); dev.off()'
open fail2.pdf 
```

[![失败图库：单独使用 cairo_pdf()](../Images/7adcd03af61039006a197bc364e19cb9.png)](https://i.stack.imgur.com/yiwmT.png)

## 使用`cairo_pdf()`自定义（可能符合 Unicode）字体

```
R -e 'cairo_pdf("fail3.pdf", family = "Arial Unicode MS"); library(ggplot2); qplot(Sepal.Length, Petal.Length, data=iris, main="Aʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ&quot;); dev.off()'
open fail3.pdf 
```

[![这与使用“现代”方法非常接近。](../Images/05387adc6b402fea195b996e61e6b007.png)](https://i.stack.imgur.com/6XLOh.png)

Comic Sans 的另一次尝试：

```
R -e 'cairo_pdf("fail3bis.pdf", family = "Comic Sans MS"); library(ggplot2); qplot(Sepal.Length, Petal.Length, data=iris, main="Aʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ&quot;); dev.off()'
open fail3bis.pdf 
```

[![失败图库：将 cairo_pdf() 与家人一起使用 =](../Images/965aa7e73f60ce400f32514c250a529f.png)](https://i.stack.imgur.com/6vAPO.png)

## 还有几...

使用较旧的“黑暗和暴风雨之夜”版本（3.6.2）：

```
/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/R -e 'cairo_pdf("fail4.pdf", family = "Arial Unicode MS"); library(ggplot2); qplot(Sepal.Length, Petal.Length, data=iris, main="Aʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ&quot;); dev.off()'
open fail4.pdf 
```

[![在此处输入图像描述](../Images/8312aebd925b2d46c31c048a8e721532.png)](https://i.stack.imgur.com/f5yd4.png)

`DejaVu Sans`正如@drammock 所建议的那样：

```
R -e 'cairo_pdf("fail5.pdf", family = "DejaVu Sans"); library(ggplot2); qplot(Sepal.Length, Petal.Length, data=iris, main="Aʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ&quot;); dev.off()'
open fail5.pdf 
```

[![在此处输入图像描述](../Images/28f6d482e5f58415e53701ad9caff89c.png)](https://i.stack.imgur.com/XLIe8.png)

旧 R 上的 DejaVu Sans：

```
/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/R -e 'cairo_pdf("fail5bis.pdf", family = "DejaVu Sans"); library(ggplot2); qplot(Sepal.Length, Petal.Length, data=iris, main="Aʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ&quot;); dev.off()'
open fail5bis.pdf 
```

[![在此处输入图像描述](../Images/39f5b9ec1238fe3fa747eb9f1be07e10.png)](https://i.stack.imgur.com/bAUsA.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-02T12:57:02.830

如果你正在使用`ggsave(...)`，你可以打电话`ggsave(..., device=cairo_pdf)`。

您需要先安装并加载 Cairo 绑定。

```
install.packages("Cairo")
library(Cairo) 
```

这是一个[完整的例子](https://gist.github.com/andrewheiss/ac686b1a057003291e62)（不是我的工作）。*

# javascript - Javascript .toFixed() 更精确的舍入选择？

> ID：12768180
> 
> 赞同：2
> 
> 时间：2012-10-07T10:55:54.607
> 
> 标签：javascript, jquery

对于四舍五入的小数（价格），我使用 .toFixed(2) 已经有一段时间了。但我最近才发现 Javascript 不能“精确”四舍五入。我有点震惊，即使 10.005 也无法正确四舍五入到 10.01。它刚刚四舍五入到 10.00。其他时候它确实正确地四舍五入。我喜欢控制我的代码，所以这对我来说是一个很大的禁忌。

而且由于我正在计算价格，我认为我需要一些更准确的（100%）来仅舍入 2 位或 3 位小数，也许是 4 位小数。

没有正确的方法在javascript中进行基本舍入的直接方法吗？

更新：正如 Felix Kling 所建议的，将我的价格处理为美分整数的方法，这也有缺点（除了更多代码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:11:21.627

像 10.005 这样的数字不能正确四舍五入的原因是您实际上没有数字 10.005，您只有一个可以使用双精度浮点变量表示的最接近的数字。

您拥有的实际数字可能类似于 10.00499999999276253，自然会四舍五入为 10.00 而不是 10.01。

要处理货币值，您应该使用可以准确表示该值的数据类型。由于 Javascript 中的数字始终是浮点数，剩下的就是将数字表示为文本，并编写自己的函数来进行数学运算（或找到已经做过的人）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:34:58.117

This should work for you, here's a fiddle to play around with it [http://jsfiddle.net/5ffyC/1/](http://jsfiddle.net/5ffyC/1/)

```
function moneyRound(flt){
   var splitStr = flt.toString().split('.'),
      whole = (flt * 100) | 0;

   if (splitStr.length > 1  && splitStr[1].length > 2){
      return splitStr[1][2] > 4? (whole + 1) / 100: whole / 100;
   } else {
      return flt;   
   }
} 
```

# javascript - HTML5 中的 GPS 精度

> ID：12768181
> 
> 赞同：4
> 
> 时间：2012-10-07T10:56:03.063
> 
> 标签：javascript, iphone, html, gps

作为我的文凭项目的一部分，我遇到了获取 GPS 坐标的问题。我用 JavaScript 和 HTML5 开发了一个从浏览器获取坐标的程序。

但是定位的准确率很低。我使用`watchPosition()`超时方法：`1000`

所以这是我的观察：

1.  我在 iPhone 上运行一个 HTML5 应用程序，准确性开始下降。（从 150 到 1500 米）
2.  然后我在 iPhone 上运行一个带有地图的本地应用程序，比如谷歌地图，而不是等到它找到我的位置。
3.  然后我在浏览器中转到我的 HTML5 应用程序。

现在精度比以前高了（大约5-10米）。发生了什么事？以及如何在不运行第三方应用程序的情况下使准确度像现在一样高？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T21:47:09.300

正如 Miha 建议的那样，我怀疑您需要 enableHighAccuracy 参数，但是，`getCurrentPosition()`有时会过早放弃。它会给你一个位置事件，但有时，准确性低于预期。

我为此编写了一个简单的包装器，`watchLocation`它具有类似的接口，`getCurrentPosition`但允许您指定超时值和可接受的准确性。

[它位于https://github.com/gwilson/getAccurateCurrentPosition](https://github.com/gwilson/getAccurateCurrentPosition)的 github 上——调用如下所示：

```
navigator.geolocation.getAccurateCurrentPosition(onSuccess, onError, {desiredAccuracy:20, maxWait:15000}); 
```

将上述选项翻译成英文——这将尝试以至少 20 米的精度找到设备位置，并尝试在 15 秒内达到此精度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T11:07:02.167

`enableHighAccuracy`与 一起使用`navigator.geolocation.getCurrentPosition`。这是您需要知道的全部内容：[HTML5 Doctor](http://html5doctor.com/finding-your-position-with-geolocation/)

# c# - 增加标签名称

> ID：12768189
> 
> 赞同：1
> 
> 时间：2012-10-07T10:57:22.750
> 
> 标签：c#, foreach, label

我需要一个增加`label name`.

我需要在 10 个（示例）中显示`labels`一些文本。

例子：

```
label1.Text = "1";
label2.Text = "2";
label3.Text = "3";
label4.Text = "4";
label5.Text = "5";
label6.Text = "6"; 
```

我需要从增加变量`label name (label1, label2, etc.)`的地方增加数字（将在这样的结构中使用）。`foreach``i``i``label.Name = "label" + i.ToString();`

我希望你明白我想说什么。

我试试这个但不工作：

```
Label[] label = new Label[2];

int ii = 0;
foreach(...) // go through a list
{
                label[ii] = new Label();
                label[ii].Text = x.materie + tip + "\nsala " + x.sala;
                label[ii].Visible = true;
                label[ii].Location = new System.Drawing.Point(cX, cY);
                label[ii].SetBounds(cX, cY, 98, cH);
                label[ii].MinimumSize = new Size(98, cH);
                label[ii].MaximumSize = new Size(98, cH);

                ii++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T10:59:57.103

```
int count = 10;
for (int i = 1; i <= count; i++)
{
    // setup label and add them to the page hierarchy
    Label lbl = new Label();
    lbl.Name = "label" + i;
    lbl.Text = i.ToString();
    //assuming form1 is a form in your page with a runat="server" attribute.
    this.Controls.Add(lbl); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:15:40.867

假设你有一个 Label 控件数组，label，你可以执行以下操作：

```
int i = 1;

for (int i = 1; i < label.Length; i++)
{
    lbl.ID = String.Format("label{0}", i.ToString());
} 
```

# pdf - 显示 PDF 文件时没有复制/粘贴的 UIWebView

> ID：12768194
> 
> 赞同：4
> 
> 时间：2012-10-07T10:57:45.710
> 
> 标签：pdf, uiwebview

我试图通过使用类别并覆盖 canPerformAction 并为复制、剪切和粘贴选择器返回 NO 来禁用 UIWebView 中的复制/粘贴。

当我加载网页或所有其他文档格式（例如 docx、pptx、rtf、txt）时，它按预期工作，但当我将 PDF 文档加载到 UIWebView 时却没有。

似乎有一些不同的机制可以处理 UIWebView 中的 PDF 文档，它处理/响应复制选择器，因此我无法阻止它。

我还尝试禁用 UIWebView 的 UIScrollView 的所有子视图的用户交互，这对于除 PDF 之外的其他文档格式都适用。

任何人都可以帮助弄清楚如何在 UIWebView 中为 PDF 文档禁用复制吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-15T03:59:31.493

好的，所以我自己也遇到过同样的问题，并且似乎找到了解决方案，即使它是部分的。

我所做的是使用 UILongPressGestureRecognizer 禁用可能导致复制/粘贴的长按手势。

编码：

```
UILongPressGestureRecognizer* longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)]; // allocating the UILongPressGestureRecognizer

longPress.allowableMovement=100; // Making sure the allowable movement isn't too narrow

longPress.minimumPressDuration=0.3; // This is important - the duration must be long enough to allow taps but not longer than the period in which the scroll view opens the magnifying glass

longPress.delegate=self; // initialization stuff
longPress.delaysTouchesBegan=YES;
longPress.delaysTouchesEnded=YES;

longPress.cancelsTouchesInView=YES; // That's when we tell the gesture recognizer to block the gestures we want 

[webView addGestureRecognizer:longPress]; // Add the gesture recognizer to the view and scroll view then release
[[webView scrollView] addGestureRecognizer:longPress]; 
[longPress release]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T19:57:22.017

这个解决方案对我有用：

**方法 1 - 检测自定义长按**

A) 创建一个 UILongPressGestureRecogniser 的子类。

B）`canBePreventedByGestureRecognizer:`在您的子类中包含该方法，如下所示：

**标题：**

```
#import <UIKit/UIKit.h> 

@interface CustomLongPress : UILongPressGestureRecognizer

@end 
```

**执行：**

```
#import "CustomLongPress.h"

@implementation CustomLongPress

- (BOOL)canBePreventedByGestureRecognizer:(UIGestureRecognizer*)preventedGestureRecognizer {
 return NO;
}

@end 
```

这是子类中唯一需要的代码。

C) 打开包含您的 uiwebview/pdf 阅读器的视图。包括您的子类：`#import "CustomLongPress.h"`然后将自定义 UILongPressGestureRecogniser 添加到您的 UIWebView，如下所示：

```
- (void)viewDidLoad
{ 
   [super viewDidLoad];

   //Load UIWebView etc

   //Add your custom gesture recogniser
   CustomLongPress * longPress = [[CustomLongPress alloc] initWithTarget:self action:@selector(longPressDetected)];
   [pdfWebView addGestureRecognizer:longPress];

} 
```

D）检测长按并关闭您的 UIWebView 的 userInteraction 然后再打开：

```
-(void)longPressDetected {

NSLog(@"long press detected");
[pdfWebView setUserInteractionEnabled:NO];
[pdfWebView setUserInteractionEnabled:YES];
} 
```

显然，这是因为 UIWebView 使用自己的手势识别器捕获长按，排除您添加的任何其他手势识别器。但是将手势识别器子类化并通过向方法返回“NO”来防止它们被排除`canBePreventedByGestureRecognizer:`会覆盖默认行为。

一旦您可以检测到对 PDF 的长按，将 userInteraction 关闭然后再打开会阻止 UIWebView 执行其默认行为，即启动“复制/定义”UIMenu，或者，如果长按链接，则启动弹出操作表使用“复制”和“打开”操作。

**方法 2 - 捕获 UIMenu NSNotification**

或者，如果您只想阻止“复制/定义”UIMenu（但不影响长按），您可以将此行（监听 UIMenuControllerDidShowMenuNotification）添加到您的 ViewDidLoad：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(menuShown) name:UIMenuControllerDidShowMenuNotification object:nil]; 
```

然后添加此方法，使用与上述相同的 userInteraction Off/On 方法：

```
-(void)menuShown {
    NSLog(@"menu shown");
    [pdfWebView setUserInteractionEnabled:NO];
    [pdfWebView setUserInteractionEnabled:YES];   
} 
```

第一种方法取自：[https](https://devforums.apple.com/thread/72521?start=25&tstart=0) ://devforums.apple.com/thread/72521?start=25&tstart=0 ，第二种方法取自 Stack 上的某个地方，抱歉忘记在哪里了。如果您知道，请包括在内。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T01:54:46.630

很好的答案祖巴巴。我正在使用 webView 显示彩色和粗体文本，我遇到了同样的问题。我将您的解决方案放入一个方法中，并在初始化 webView 后立即调用它。我似乎不需要代表。

```
self.textView = [[UIWebView alloc] initWithFrame:textFrame];
[self longPress:self.textView];

- (void)longPress:(UIView *)webView {

UILongPressGestureRecognizer* longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress)]; // allocating the UILongPressGestureRecognizer

longPress.allowableMovement=100; // Making sure the allowable movement isn't too narrow
longPress.minimumPressDuration=0.3; // This is important - the duration must be long enough to allow taps but not longer than the period in which the scroll view opens the magnifying glass

longPress.delaysTouchesBegan=YES;
longPress.delaysTouchesEnded=YES;

longPress.cancelsTouchesInView=YES; // That's when we tell the gesture recognizer to block the gestures we want

[webView addGestureRecognizer:longPress]; // Add the gesture recognizer to the view and scroll view then release
[webView addGestureRecognizer:longPress]; 
```

}

```
- (void)handleLongPress {

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-13T08:27:35.807

如果有人需要 Zubaba 在 Swift 3 中的回答；

```
let longPress = UILongPressGestureRecognizer(target: self, action: #selector(handleLongPress))
longPress.allowableMovement = 100
longPress.minimumPressDuration = 0.3
longPress.delegate = self
longPress.delaysTouchesBegan = true
longPress.delaysTouchesEnded = true
longPress.cancelsTouchesInView = true
yourWebView.addGestureRecognizer(longPress)
yourWebView.scrollView.addGestureRecognizer(longPress)

func handleLongPress() {
     // Show some alert to inform user or do nothing.
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-27T16:39:52.570

这是对 Zubaba 在 Swift 3 中的回答的修改，最终帮助我消除了警告。我将作业更改`longPress.delegate = self`为 `longPress.delegate = self as? UIGestureRecognizerDelegate`.

```
 let longPress = UILongPressGestureRecognizer(target: self, action: #selector(handleLongPress))
    longPress.allowableMovement = 100
    longPress.minimumPressDuration = 0.3
    longPress.delegate = self as? UIGestureRecognizerDelegate
    longPress.delaysTouchesBegan = true
    longPress.delaysTouchesEnded = true
    longPress.cancelsTouchesInView = true
    webView.addGestureRecognizer(longPress)
    webView.scrollView.addGestureRecognizer(longPress)

    webView.loadRequest(request) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-31T06:53:52.943

1.ios11 iphone6 Object-C无复制/粘贴/lookUp/share

2.

```
viewDidLoad{
    .......
    [self setupExclude];
}

- (void)setupExclude{
    UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPG)];
    longPress.minimumPressDuration = 0.2;
    [self.webview addGestureRecognizer:longPress];

    UITapGestureRecognizer *singleTapGesture = [[UITapGestureRecognizer alloc]initWithTarget:self action:nil];
    singleTapGesture.numberOfTapsRequired = 1;
    singleTapGesture.numberOfTouchesRequired  = 1;
    [self.webview addGestureRecognizer:singleTapGesture];

    UITapGestureRecognizer *doubleTapGesture = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(longPG)];
    doubleTapGesture.numberOfTapsRequired = 2;
    doubleTapGesture.numberOfTouchesRequired = 1;
    [self.webview addGestureRecognizer:doubleTapGesture];
    [singleTapGesture requireGestureRecognizerToFail:doubleTapGesture];
}
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender{
    BOOL res = [super canPerformAction:action withSender:sender];
    UIMenuController.sharedMenuController.menuVisible = NO;
    self.webview.userInteractionEnabled = NO;
    self.webview.userInteractionEnabled = YES;
    return res;
}
- (void)longPG{
    UIMenuController.sharedMenuController.menuVisible = NO;
    self.webview.userInteractionEnabled = NO;
    self.webview.userInteractionEnabled = YES;
} 
```

3\. 完成！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-09T17:32:41.333

寻找 Xamarin.iOS 解决方案。

```
var longPressGestureRecognizer = new CustomLongPressGestureRecognizer ((UILongPressGestureRecognizer obj) => 
{
  Console.WriteLine ("CustomLongPressGestureRecognizer action");
});
webView.AddGestureRecognizer (longPressGestureRecognizer); 
```

Zubaba 给出的方法可能如下所示：

```
public class ZubabaLongPressGestureRecognizer : UIKit.UILongPressGestureRecognizer
{
    public ZubabaLongPressGestureRecognizer (Action<UILongPressGestureRecognizer> action)
      : base (action)
    {
        AllowableMovement = 100;
        MinimumPressDuration = 0.3;
        DelaysTouchesBegan = true;
        DelaysTouchesEnded = true;
        CancelsTouchesInView = true;
    }
} 
```

打开/复制/取消菜单仍然显示第一次长时间保存每个 PDF 页面的链接。但是，在第一次长按之后，它不会正确显示在该页面上。这取决于 PDF 页面并不能让我相信有可用的解决方案。

Johnny Rockex 的解决方案可能如下所示：

```
public class RockexLongPressGestureRecognizer : UIKit.UILongPressGestureRecognizer
{
    public RockexLongPressGestureRecognizer(UIKit.UIWebView webView, Action<UILongPressGestureRecognizer> action) :
        base(UserInteractionAction(webView) + action)
    {

    }

    private static Action<UILongPressGestureRecognizer> UserInteractionAction(UIKit.UIWebView webView)
    {
        return (UILongPressGestureRecognizer obj) =>
         {
             webView.UserInteractionEnabled = false;
             webView.UserInteractionEnabled = true;
         };
    }

    public override bool CanPreventGestureRecognizer(UIGestureRecognizer preventedGestureRecognizer)
    {
        return false;
    }
} 
```

和

```
notificationToken1 = UIMenuController.Notifications.ObserveMenuFrameDidChange (Callback);
notificationToken2 = NSNotificationCenter.DefaultCenter.AddObserver(UIMenuController.DidShowMenuNotification, Callback); 
```

我什么也做不了。帮助其他人在 Xamarin.iOS 修复方面做得更好

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-15T22:08:57.700

UILongPressGestureRecognizer 位于 UIPDFPageView 中。要访问此视图，请查看 Debug 菜单中的视图层次结构，目前您可以在将 pdf 加载到 Web 视图后访问此视图：

```
let pdfPageView = myWebView.scrollview?.subviews[0]?.subviews[0] 
```

然后在传递 pdfPageView 时删除长按使用此方法：

```
func removeLongPressFromView(view: UIView){
  if let gestures = view.gestureRecognizers{
    for gesture in gestures{
      if gesture is UILongPressGestureRecognzier{
        view.removeGestureRecognizer(gesture)
      }
    }
  }
} 
```

# asp.net-mvc - WCF 服务，从数据库加载数据

> ID：12768197
> 
> 赞同：4
> 
> 时间：2012-10-07T10:58:04.577
> 
> 标签：asp.net-mvc, database, wcf, wcf-data-services

我对 asp.net mvc 应用程序中的 WCF 服务有一些问题。请帮帮我！当我运行我的项目时，一些实体的一些数据正在从数据库中加载，但一些数据没有加载（内部服务器错误）。

异常代码及说明：

实体类型控制器：

```
public HttpResponseMessage GetAll()
{
       //for debug
       var t = EntityTypeService.GetAll();

       //some exception here!
       /*
    The request channel timed out while waiting for a reply after 00:00:59.9979999\. 
    Increase the timeout value passed to the call to Request or increase the SendTimeout value on the Binding. 
    The time allotted to this operation may have been a portion of a longer timeout.
    */
    //SendTimeout is 00:30:00 for all services.

    or

    /*The underlying connection was closed: A connection that was expected to be kept alive was closed by the server.*/

    or

    /*An error occurred while receiving the HTTP response to http://localhost:18822/Services/Department.svc. 
    This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an 
    HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details.*/

       return CreateResponse<IEnumerable<EntityType>>(EntityTypeService.GetAll);
} 
```

实体类型服务：

```
public class EntityTypeService : BaseService<Base.Entities.EntityType>, IEntityTypeService
{
        public IQueryable<Base.Entities.EntityType> GetAll()
        {
            var t = Repository.Get();
            return t;
        }
} 
```

存储库：

```
public class Repository<TEntity>: IRepository<TEntity> where TEntity: BaseEntity
{
        [Inject]
        public IDataContext Context { get; set; }

        [Inject]
        public IDatabase DataSource { get; set; }

        /// <summary>
        /// Get entities from repository
        /// </summary>
        /// <param name="filter">Filter</param>
        /// <param name="orderBy">Order by property</param>
        /// <param name="includeProperties"></param>
        /// <returns></returns>
        public virtual IQueryable<TEntity> Get(
            Expression<Func<TEntity, bool>> filter = null,
            Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null,
            string includeProperties = "")
        {
            var query = Context.Set<TEntity>().AsQueryable();

            // Apply filter
            filter.Do((s) => { 
                query = query.Where(filter); 
            });

            // Apply includes
            foreach (var includeProperty in includeProperties.Split(new [] { ',' }, StringSplitOptions.RemoveEmptyEntries))
            {
                query = query.Include(includeProperty);
            }

            // Apply order by if need

            var result = orderBy
                .With(x => x(query))
                .Return(x => x, query);

            return result;
        }

        /// <summary>
        /// Find entity by key
        /// </summary>
        /// <param name="id">Identificator</param>
        /// <returns>Entity</returns>
        public virtual TEntity GetById(object id)
        {
            //throw new NotImplementedException();
            return Context.Set<TEntity>().Find(id);
        }

        /// <summary>
        /// Add new entity to repository
        /// </summary>
        /// <param name="entity">New entity</param>
        public virtual void Insert(TEntity entity)
        {
            AttachIsNotAttached(entity);
            Context.Set<TEntity>().Add(entity);
            Context.SaveChanges();
        }

        /// <summary>
        /// Updated entity in repositoy
        /// </summary>
        /// <param name="entity">Entity</param>
        public virtual void Update(TEntity entity)
        {
            AttachIsNotAttached(entity);
            Context.Entry(entity).State = EntityState.Modified;            
            Context.SaveChanges();
        }

        /// <summary>
        /// Remove entity from rpository
        /// </summary>
        /// <param name="entity">Entity</param>
        public virtual void Delete(TEntity entity)
        {
            AttachIsNotAttached(entity);
            Context.Set<TEntity>().Remove(entity);
            Context.Entry(entity).State = EntityState.Deleted;
            Context.SaveChanges();
        }

        /// <summary>
        /// Return models error
        /// </summary>
        /// <returns></returns>
        public IEnumerable<object> GetValidationModelErrors()
        {
            return Context.GetValidationErrors();
        }

        /// <summary>
        /// Attach entity 
        /// </summary>
        /// <param name="entity"></param>
        protected void AttachIsNotAttached(TEntity entity)
        {
            if (Context.Entry(entity).State == EntityState.Detached)
            {
                var attached = Context.Set<TEntity>().Local.Where(x => x.Id == entity.Id).FirstOrDefault();

                attached.Do((s) => {
                    Context.Entry(s).State = EntityState.Detached;
                });

                Context.Set<TEntity>().Attach(entity);
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:08:59.330

默认情况下，wcf 配置有很多限制，例如数组的最大大小，并且异常不会发生，可能在您的情况下这是由于默认的 wcf 配置，我建议您使用[svcTraceViewer](http://msdn.microsoft.com/en-us/library/ms732023.aspx)，它将帮助您了解很多明确的消息究竟会发生什么。

# ruby-on-rails - mongoid - 设计访客的统计系统

> ID：12768198
> 
> 赞同：1
> 
> 时间：2012-10-07T10:58:08.290
> 
> 标签：ruby-on-rails, mongodb, mongoid

我正在设计一个必须跟踪对确定资源的所有访问的网站。问题是该站点被认为管理大量流量，因此跟踪每次访问是不可靠的。

我对此进行了一些研究，[这里](http://railstips.org/blog/archives/2011/06/28/counters-everywhere/)建议仅在所需的最小时间单位（在本例中为访客/天）注册数据。这是一个好主意，但如果该站点将有大量流量，可能是在午夜，两个访问者可能会尝试访问相同的资源，并且两个 Rails 进程将尝试为相同的访问者创建两个不同的文档天。

所以有人知道如何处理这个问题吗？仅跟踪访客/天的想法很好，但我不确定如何管理资源统计中可能的天数重复。（可能具有资源和日期的唯一索引，但在这种情况下，第二个并发访问者将收到错误...）

**编辑：**我正在使用 rails 3.2.2、Mongoid 2.5.0 和 MongoDB 2.0.0（支持 TTL 索引）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:05:09.867

我一直在使用[Trackoid](https://github.com/twoixter/trackoid)来满足我的跟踪需求。我将它与 resque 一起使用，并在单独的服务器上的后台作业中进行所有跟踪。当然，您也可以使用我认为更受欢迎的 javascript 触发跟踪。

# windows-8 - Windows 8 应用动态磁贴的右下角有“X”

> ID：12768203
> 
> 赞同：2
> 
> 时间：2012-10-07T10:58:51.300
> 
> 标签：windows-8, microsoft-metro

就在今天，我开始注意到我的动态图块右下方有一个“X”符号，见图。

我有点担心，因为我目前在认证队列中，这意味着我错过了包裹中的一些东西 - 例如，默认徽章图像。你知道这意味着什么吗？

![单词搜索派对的动态磁贴](../Images/3d0aecf37dff9a76362cbac02956cd71.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T11:09:15.933

答案似乎是您的开发人员许可证已过期！

当我尝试构建一些东西时，我收到一个弹出窗口提醒我这个问题并要求我再次登录我的帐户。那时我获得了新的开发人员许可证，能够再次构建，所有的十字架都神奇地消失了！:o)

我想您的应用程序仍在运行的唯一原因是因为它们仍处于暂停状态，因此没有经过适当的启动周期。X 表示它不会再运行，因为您没有有效的许可证。

# php - 如何在 mysql 数据库和 php 聊天应用程序中更改用户可用性状态

> ID：12768204
> 
> 赞同：1
> 
> 时间：2012-10-07T10:58:52.993
> 
> 标签：php, jquery, mysql, ajax

我有一个聊天应用程序，用户可以在其中更改他的可用性状态（在线/离线/忙碌）。

在`status_change`事件中，我想将其更新为所有在线用户都可以看到的 MySQL 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:11:35.973

使用时间戳设置字段，`last_activity_time`并且每次用户打开某些内容或发送某些内容时使用当前时间戳更新此字段

但通常请注意，MySQL 并不是创建聊天应用程序的最佳方式，它在某种程度上是详尽无遗的，并且无法扩展

并从您的代码中，

假设 5 分钟内没有活动的用户将被设置为离开，10 分钟将被设置为离线，

如果你使用AJAX然后设置用户通过AJAX更新他的状态，假设每1分钟，在这种情况下你可以很容易地从在线用户中识别出离线，即时间戳差异超过1.5分钟的用户将被视为离线。

# php - 我们可以在客户端机器上存储数据库吗？

> ID：12768205
> 
> 赞同：2
> 
> 时间：2012-10-07T10:59:00.547
> 
> 标签：php

我正在寻找一种应用程序开发方式，无论用户是否有 Internet 连接，它都应该可以工作。

我正在开发基于移动[PHP](http://en.wikipedia.org/wiki/PHP) / [MySQL](http://en.wikipedia.org/wiki/MySQL)的应用程序。有时，所需位置没有 Internet 连接。我想将数据库保存在缓冲区中，并希望在它与 Internet 连接时对其进行更新，以便应用程序可以在没有任何中断的情况下工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T11:07:05.757

根据您需要在客户端机器上保留多少数据，您也许可以使用 cookie 来保存这些数据。

这是一个在 cookie 中存储一些信息的简单示例

```
// set the cookies
setcookie("someInfo[key1]", "4815162342");
setcookie("anotherValue", "foobar"); 
```

现在，在您设置 cookie 之后，您将能够从同一域中检索其他页面上的数据。

```
echo $_COOKIE['anotherValue']; 
// prints "foobar"

print_r($_COOKIE['someInfo']);
// Array(
//  'key1'=>"4815162342"
// ) 
```

参考 -

*   [PHP 饼干](http://php.net/manual/en/features.cookies.php)
*   [`setcookie()`](http://www.php.net/manual/en/function.setcookie.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T11:13:10.227

您可以使用[网络存储](https://en.wikipedia.org/wiki/Web_storage)

> Web 存储和 DOM 存储（文档对象模型）是用于在 Web 浏览器中存储数据的 Web 应用软件方法和协议。Web 存储支持持久数据存储，类似于 cookie，但容量大大增强，HTTP 请求标头中不存储任何信息。有两种主要的 Web 存储类型：本地存储和会话存储，其行为分别类似于持久性 cookie 和会话 cookie。

但就客户端上的合理数据存储而言，仅此而已

另见

*   [HTML5 网络存储与 Cookie](https://stackoverflow.com/questions/10524851/html5-web-storage-vs-cookies)
*   [将本地 HTML5 DB（WebSQL 存储，SQLite）与服务器同步的最佳方式（2 路同步）](https://stackoverflow.com/questions/1744522/best-way-to-synchronize-local-html5-db-websql-storage-sqlite-with-a-server-2?rq=1)

# c# - 如何从 JavaScript 内部下载整个网页内容，包括图像？

> ID：12768207
> 
> 赞同：2
> 
> 时间：2012-10-07T10:59:44.133
> 
> 标签：c#, html-agility-pack

今天在我的代码中，我从这样的网站下载图像：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using HtmlAgilityPack;
using System.IO;
using System.Text.RegularExpressions;
using System.Xml.Linq;
using System.Net;
using System.Web;
using System.Threading;
using DannyGeneral;
using GatherLinks;

namespace GatherLinks
{
    class RetrieveWebContent
    {
        HtmlAgilityPack.HtmlDocument doc;
        string imgg;
        int images;

        public RetrieveWebContent()
        {
            images = 0;
        }

        public List<string> retrieveImages(string address)
        {
            try
            {
                doc = new HtmlAgilityPack.HtmlDocument();
                System.Net.WebClient wc = new System.Net.WebClient();
                List<string> imgList = new List<string>();
                doc.Load(wc.OpenRead(address));
                HtmlNodeCollection imgs = doc.DocumentNode.SelectNodes("//img[@src]");
                if (imgs == null) return new List<string>();

                foreach (HtmlNode img in imgs)
                {
                    if (img.Attributes["src"] == null)
                        continue;
                    HtmlAttribute src = img.Attributes["src"];

                    imgList.Add(src.Value);
                    if (src.Value.StartsWith("http") || src.Value.StartsWith("https") || src.Value.StartsWith("www"))
                    {
                        images++;
                        string[] arr = src.Value.Split('/');
                        imgg = arr[arr.Length - 1];
                        wc.DownloadFile(src.Value, @"d:\MyImages\" + imgg);
                    }
                }

                return imgList;
            }
            catch
            {
                Logger.Write("There Was Problem Downloading The Image: " + imgg);
                return null;  
            }
        }
    }
} 
```

但有时在许多情况下，图像在 java 脚本后面或下面，无法正常下载。我如何获取/下载图像和/或整个完整的网站内容，包括图像和所有内容，以便稍后在我的硬盘中我将拥有完整的网站及其所有内容树，以便我可以离线浏览它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:13:59.303

我会使用一个实际的浏览器，然后从那里保存图像。看看[Watir Webdriver](http://watirwebdriver.com/)的 Ruby 解决方案。该库可帮助您自动化浏览器...我会将它与[Nokogiri](http://nokogiri.org/)结合使用来实现您在上面尝试做的事情..

Python等价物也存在..

Webdriver 尚不支持保存功能，但较旧的“Watir”支持。您可能还想研究[CasperJS](http://casperjs.org/api.html#casper.download)，它以 Javascript 语言提供了一些浏览器自动化。

# javascript - 从树状结构数据库生成 JSON

> ID：12768210
> 
> 赞同：0
> 
> 时间：2012-10-07T10:59:58.593
> 
> 标签：javascript, php, zend-framework, yii, tree

我正在构建一个画廊应用程序，我需要它采用树格式，我使用 jstree 扩展来构建它，我需要 json 采用这种格式：

```
$(function () {
    $("#demo1").jstree({ 
        "json_data" : {
            "data" : [
                { 
                    "data" : "A node", 
                    "metadata" : { id : 23 },
                    "children" : [ "Child 1", "A Child 2" ]
                },
                { 
                    "attr" : { "id" : "li.node.id1" }, 
                    "data" : { 
                        "title" : "Long format demo", 
                        "attr" : { "href" : "#" } 
                    } 
                }
            ]
        },
        "plugins" : [ "themes", "json_data", "ui" ]
    }).bind("select_node.jstree", function (e, data) { alert(data.rslt.obj.data("id")); });
}); 
```

我正在使用这个数据库：

类别： id 名称 id_father

产品： id 名称 价格 category_id

请帮帮我，>_<，我在我的项目中使用了 MVC 结构，并且可以执行诸如 foreach(modelinstance as model) 之类的操作...

帮助我真的需要它，我不知道如何构建它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:51:37.843

这是我使用的函数，但你的模型中需要[CNestedSetBehavior](http://yiiext.github.com/extensions/nested-set-behavior/index.html)，我推荐这种设置分层数据的方式，因为它检索起来要快得多：

```
protected function formatJstree(){
        $categories = $this->descendants()->findAll();
        $level=0;
        $parent = 0;
        $data = array();
        foreach( $categories as $n => $category )
        {
            $node = array(
                'data'=> "{$category->title}",
                'attr'=>array('id'=>"category_id_{$category->category_id}")
            );
            if($category->level == $level){
                $data[$parent]["children"][] = $node;
            }
            else if($level != 0 && $category->level > $level){
                if(!isset($data[$n]["children"])){
                    $data[$n]["children"] = array();
                }
                $data[$parent]["children"][] = $node;
            }
            else
            {
                $data[] = $node;
                $parent = $n;
            }
            $level=$category->level;

        }
        return $data;

    } 
```

# ruby-on-rails - JPEG 无法被识别、回形针、ImageMagick on Rails 3.1.3 OSX Mountain Lion 识别

> ID：12768219
> 
> 赞同：2
> 
> 时间：2012-10-07T11:01:30.410
> 
> 标签：ruby-on-rails, imagemagick, paperclip, osx-mountain-lion, homebrew

我已经浏览了所有关于此的 SO 问题，但没有任何乐趣。

升级到 Mountain Lion 后出现以下错误：

```
Validation failed: Photo /var/folders/92/qp3ppxv92tsglvj03ndp0t6m0000gn/T/stream20121007-36927-1dzwbgk-0.jpeg is not recognized by the 'identify' command. 
```

并在日志中

```
Command :: identify -format %wx%h :file
[paperclip] An error was received while processing: #    <Paperclip::NotIdentifiedByImageMagickError: /var/folders/92/qp3ppxv92tsglvj03ndp0t6m0000gn/T/stream20121007-36927-1dzwbgk-0.jpeg is not recognized by the 'identify' command.> 
```

我正在使用：Ruby 1.8.7、Rails 3.1.3、OSX Mountain Lion、Homebrew 来安装依赖项

我已经添加了

```
#development.rb
Paperclip.options[:command_path] = "/usr/local/bin" 
```

我已经完全删除并重新安装了自制软件

```
#brew doctor
Your system is raring to brew.

#brew list

ack     gettext     imagemagick libffi      libpng      little-cms  pkg-config  readline
cmake       git     jasper      liblqr      libtiff     mysql       postgresql  xz
freetype    glib        jpeg        libmagic    libyaml     ossp-uuid   qt 
```

我在另一个 SO 案例的推荐下安装了 liblqr，这带来了很多依赖。

识别似乎可以从命令行工作

```
#identify /var/folders/92/qp3ppxv92tsglvj03ndp0t6m0000gn/T/stream20121007-36927-1dzwbgk-0.jpeg
/var/folders/92/qp3ppxv92tsglvj03ndp0t6m0000gn/T/stream20121007-36927-1dzwbgk-0.jpeg JPEG 259x195 259x195+0+0 8-bit DirectClass 11KB 0.000u 0:00.000

#identify -format %wx%h  /var/folders/92/qp3ppxv92tsglvj03ndp0t6m0000gn/T/stream20121007-36927-1dzwbgk-0.jpeg
259x195 
```

识别似乎可以从控制台工作

`Loading development environment (Rails 3.1.3) 1.8.7 :001 > system("identify -format %wx%h /var/folders/92/qp3ppxv92tsglvj03ndp0t6m0000gn/T/stream20121007-36927-1dzwbgk-0.jpeg") 259x195 => true`

我已经安装了 rmagick - 虽然我以前从未使用过它。宝石：

```
*** LOCAL GEMS *** 
paperclip (2.7.1)
rmagick (2.13.1) 
```

我已经尝试了所有建议，现在完全没有想法。关于如何深入挖掘以隔离问题的任何建议？原因是由 Paperclip 导致调整 jpeg 或 PNG 文件的大小（我没有尝试过任何其他文件）：

`has_attached_file :photo, :styles => {:thumb => "100x100", :medium => "x140", :mediumplus => "x210",:large => "960x378" }, :storage => :s3, :s3_credentials => { :access_key_id => ENV['S3_KEY'], :secret_access_key => ENV['S3_SECRET'] }, :s3_protocol => "https", :bucket => ENV['S3_BUCKET'], :path => ":attachment/:id/:style.:extension"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T01:47:29.470

使用回形针 2.8.0 而不是 2.7.1。

# javascript - $.getJSON 函数在其他所有操作之后执行

> ID：12768223
> 
> 赞同：1
> 
> 时间：2012-10-07T11:01:50.010
> 
> 标签：javascript, jquery, google-maps

我正在使用以下代码：

```
function eventListenerTest(event) {
    if (document.getElementById('gem_cvo_select_list')) {
        var address;
        $.getJSON(url, function (data) {
            address = data.rows[0];
            alert("This gets executed afterwards");
        });
        alert("This gets executed first");
        event.infoWindowHtml = "<b>Address: </b>" + address;
    }
} 
```

问题是在 infoWindow 中使用“地址”变量后执行 $.getJSON 函数。修改代码如下：

```
function eventListenerTest(event) {
    if (document.getElementById('gem_cvo_select_list')) {
        var address;
        $.getJSON(url, function (data) {
            address = data.rows[0];
            event.infoWindowHtml = "<b>Address: </b>" + address;
        });
    }
} 
```

似乎无法通过这种方式访问​​“事件”对象（Google 地图信息窗口中不显示任何内容）。我想我应该能够将“事件”传递给 JSON 中的函数，但我不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:03:57.950

尝试这个：

```
function eventListenerTest(event, callback) {
    if (document.getElementById('gem_cvo_select_list')) {
        var address;
        $.getJSON(url, function (data) {
            address = data.rows[0];
            event.infoWindowHtml = "<b>Address: </b>" + address;
            callback();
        });
    }
} 
```

然后：

```
eventListenerTest(event, function(){
     // you will use updated event object here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:14:24.323

您应该使用 $.proxy 方法来确保执行的回调函数保留创建 Ajax 调用的函数的上下文。

更新的 Javascript：

```
function eventListenerTest(event) {
    if (document.getElementById('gem_cvo_select_list')) {
        var address;
        $.getJSON(url, $.proxy(function (data) {
            address = data.rows[0];
            event.infoWindowHtml = "<b>Address: </b>" + address;
        },this));
    }
} 
```

更多信息：[http ://api.jquery.com/jQuery.proxy/](http://api.jquery.com/jQuery.proxy/)

# java - 包 com.thoughtworks.xstream.annotations 不存在

> ID：12768232
> 
> 赞同：0
> 
> 时间：2012-10-07T11:03:14.587
> 
> 标签：java, maven, intellij-idea, xstream

我必须构建一个 Java Web 项目以在本地运行它并调整一些 HTML。不幸的是，在从 SVN 服务器再次更新后，该项目不再可构建。

这是来自 IntelliJ IDEA 的日志：

```
"C:\Program Files\Java\jdk1.7.0_07\bin\java" -Xms256m -Xmx512m
"-Dclassworlds.conf=C:\Program Files (x86)\Apache Software Foundation\apache-maven-2.2.1\bin\m2.conf"
"-Dmaven.home=C:\Program Files (x86)\Apache Software Foundation\apache-maven-2.2.1"
-Didea.launcher.port=7532
"-Didea.launcher.bin.path=C:\Program Files (x86)\JetBrains\IntelliJ IDEA 11.1.3\bin"
-Dfile.encoding=UTF-8 -classpath "C:\Program Files (x86)\Apache Software Foundation\apache-maven-2.2.1\boot\classworlds-1.1.jar;
C:\Program Files (x86)\JetBrains\IntelliJ IDEA 11.1.3\lib\idea_rt.jar"
com.intellij.rt.execution.application.AppMain
org.codehaus.classworlds.Launcher --no-plugin-registry --fail-fast
--strict-checksums --update-snapshots
-f C:\Users\Kat\IdeaProjects\MYROOT\MYPROJECT\pom.xml install
+ Enabling strict checksum verification on all artifact downloads.
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building MYPROJECT Project
[INFO]    task-segment: [install]
[INFO] ------------------------------------------------------------------------
[INFO] [resources:resources {execution: default-resources}]
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 1 resource
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Compiling 20 source files to C:\Users\Kat\IdeaProjects\MYROOT\MYPROJECT\target\classes
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure

C:\Users\Kat\IdeaProjects\MYROOT\MYPROJECT\src\main\java\MYPROJECT\dto\BillDto.java:
10,43] error: package com.thoughtworks.xstream.annotations does not exist 
```

我试过的：

1.  删除了 IDEA 中对 XStream 库的引用（'Project Structure'->'Libraries'），离线/在线，让 Maven 更新丢失的 XStream。
2.  直接将 Maven 存储库中的 .jar 和 .pom 文件（它们在 p.1 期间重新创建）替换为从 XStream 网站下载的文件。

两者都无济于事。我是 Java 世界的新手，不知道下一步该做什么。

顺便说一句，IDEA 看到了 XStream 类并让我们浏览它们。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:48:48.510

如果您在 IntelliJ 中使用 Maven 集成，那么您不应该使用“项目结构”->“库”对话框。IntelliJ 将通过读取模块的 pom.xml 文件自动配置这些库。

见： http: [//www.jetbrains.com/idea/webhelp/maven-projects-tool-window.html](http://www.jetbrains.com/idea/webhelp/maven-projects-tool-window.html)

和

[http://www.jetbrains.com/idea/webhelp/maven-importing.html](http://www.jetbrains.com/idea/webhelp/maven-importing.html)

您还应该验证 XStream 依赖项是否仍在 pom.xml 中

# c# - 多平台大型软件开发的编程语言？

> ID：12768233
> 
> 赞同：2
> 
> 时间：2012-10-07T11:03:17.437
> 
> 标签：c#, c++, c, user-interface

我有 C/C++ 和 C# 方面的经验，我计划在朋友的帮助下创建一个大型软件，其中还将包括一个 GUI。它将专注于计算机安全和分析，例如渗透测试、风险管理等。关键是我希望它是多平台软件。我希望它特别适用于 Windows、Linux 和 Mac OS X。关键是我不知道为此目的使用哪种编程语言和编程范例/工具。我想听听你的建议，任何建议都非常受欢迎。我计划在未来几年内做几个大型软件开发，因此，我什至非常愿意学习新的编程语言或工具，这将有助于我的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:08:33.570

带有 Qt 的 C++ 也是多平台的。它包含很好的 GUI 库和 Qt 容器，例如 QString、QMap，它们使您的工作更轻松。

编辑：使用 QtCreator，您可以通过“拖放”来设计您的 GUI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T11:08:34.753

您可以使用 Mono 跨平台开发 c# 项目。

[http://www.mono-project.com/Main_Page](http://www.mono-project.com/Main_Page)

Mono 是一个软件平台，旨在让开发人员轻松创建跨平台应用程序。它是基于 C# 的 ECMA 标准和公共语言运行时的 Microsoft .Net 框架的开源实现。我们认为，通过采用成功的标准化软件平台，我们可以降低为 Linux 开发出色应用程序的障碍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T11:06:26.537

我认为 Java 是一个很好的候选者。它适用于安装了 JVM 的所有平台，它有许多您可能使用的组件（GUI、安全性等），并且语法非常简单。通常，Java 的开发比 C++ 快得多。

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T11:13:40.300

使用 Web 应用程序可能会很好。

如果您的受众是开发人员，那么您可能会考虑使用 Java，或者您可能会考虑使用一种通用后端语言（例如 C++），这种语言要么依赖于通用 UI 库，要么依赖于特定于平台的 UI 库。即使您的受众是开发人员，如果它没有原生感觉的 UI，您也可能会失去人们的兴趣。因此，您需要做出一些决定来确定原生外观与您编写的平台特定代码数量的重要性——这真的无法由我们回答。

# mysql - 使用重连接优化 MySQL 查询

> ID：12768235
> 
> 赞同：3
> 
> 时间：2012-10-07T11:03:36.963
> 
> 标签：mysql, database-design, database-optimization

我目前运行一个网站，该网站在列表中跟踪最新的分数和评级。该列表有数千个经常更新的条目，并且该列表应该可以按这些分数和评级列进行排序。

我获取此数据的 SQL 目前看起来像（大致）：

```
SELECT e.*, SUM(sa.amount) AS score, AVG(ra.rating) AS rating
FROM entries e 
LEFT JOIN score_adjustments sa ON sa.entry_id = e.id
    HAVING sa.created BETWEEN ... AND ... 
LEFT JOIN rating_adjustments ra ON ra.entry_id = e.id
    HAVING ra.rating > 0 
ORDER BY score 
LIMIT 0, 10 
```

表格在哪里（简化）：

```
entries:
    id: INT(11) PRIMARY
    ...other data...

score_adjustments:
    id: INT(11), PRIMARY
    entry_id: INT(11), INDEX, FOREIGN KEY (entries.id)
    created: DATETIME
    amount: INT(4)

rating_adjustments:
    id: INT(11), PRIMARY
    entry_id: INT(11), INDEX, FOREIGN KEY (entries.id)
    rating: DOUBLE 
```

大约有 300,000`score_adjustments`个条目，并且它们以每天大约 5,000 个的速度增长。大约是那个的`rating_adjustments`1/4。

现在，我不是 DBA 专家，但我猜打电话`SUM()`总是`AVG()`不是一件好事——尤其是当`sa`包含`ra`数十万条记录时——对吧？

我已经对查询进行了缓存，但我希望查询本身快速 - 但仍尽可能保持最新。我想知道是否有人可以分享任何解决方案来优化像这样的繁重的连接/聚合查询？如有必要，我愿意进行结构性改变。

**编辑 1**

添加了有关查询的更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:50:35.883

如果您担心性能，您可以将 score 和 rating 列添加到相应的表中，并在插入时更新它们或使用触发器更新到引用的表。这将在每次更新时缓存新结果，并且您不必每次都重新计算它们，从而显着减少获得结果所需的连接量......只是猜测，但在大多数情况下，您的查询结果可能是获取的次数多于更新的次数。

查看这个 sql fiddle [http://sqlfiddle.com/#!2/b7101/1](http://sqlfiddle.com/#!2/b7101/1)以了解如何制作触发器及其效果，我只在插入时添加了触发器，如果​​您有的话，您可以很容易地添加更新触发器删除数据也添加删除触发器。

没有添加 datetime 字段，如果`between ... and ...`参数经常更改，您可能仍必须每次手动执行此操作，否则您只需将 between 子句添加到 score_update 触发器即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T14:42:44.740

您的数据[聚集](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)严重。

InnoDB 将使用物理上靠近的“关闭”PK 存储行。由于您的子表使用代理 PK，因此它们的行将随机存储。当需要对“主”表中的给定行进行计算时，DBMS 必须到处跳转以从子表中收集相关行。

尝试使用更多“自然”键，而不是代理键，父键位于前缘，类似于：

```
score_adjustments:
    entry_id: INT(11), FOREIGN KEY (entries.id)
    created: DATETIME
    amount: INT(4)
    PRIMARY KEY (entry_id, created)

rating_adjustments:
    entry_id: INT(11), FOREIGN KEY (entries.id)
    rating_no: INT(11)
    rating: DOUBLE
    PRIMARY KEY (entry_id, rating_no) 
```

*注意：这假设`created`' 的分辨率足够好，并且`rating_no`添加了 以允许每个`entry_id`. 这只是一个示例 - 您可以根据需要更改 PK。*

这将“强制”属于同一行的行`entry_id`物理上靠得很近存储，因此只需对 PK/集群键进行范围扫描并使用很少的 I/O，就可以计算出 SUM 或 AVG。

或者（例如，如果您使用不支持集群的 MyISAM），请使用索引[覆盖](http://use-the-index-luke.com/sql/glossary/covering-index)查询，以便在查询期间根本不会触及子表。

* * *

最重要的是，您可以对设计进行非规范化，并将当前结果缓存在父表中：

*   将 SUM(score_adjustments.amount) 存储为物理字段，并在每次插入、更新或删除行时通过触发器对其进行调整`score_adjustments`。
*   将 SUM(rating_adjustments.rating) 存储为“S” **，**将 COUNT(rating_adjustments.rating) 存储为“C”。将一行添加到 时`rating_adjustments`，将其添加到 S 并递增 C。在运行时计算 S/C 以获得平均值。类似地处理更新和删除。

# hadoop - Flume 中的 HDFS 接收器是否使用带有默认配置的“反模式”

> ID：12768236
> 
> 赞同：1
> 
> 时间：2012-10-07T11:03:37.837
> 
> 标签：hadoop, hdfs, flume, gfs

查看[Apache Flume 中的 HDFS 接收器默认参数，](http://flume.apache.org/FlumeUserGuide.html#hdfs-sink)这似乎会产生大量非常小的文件（1 kB 卷）。根据我对 GFS/HDFS 的了解，块大小为 64MB，文件大小应为千兆字节，以确保一切高效运行。

所以我很好奇 Flume 的默认参数是否只是误导，或者我是否在这里遗漏了其他东西。

干杯。

# java - Java - 交换数组列表索引

> ID：12768246
> 
> 赞同：0
> 
> 时间：2012-10-07T11:04:32.963
> 
> 标签：java, arraylist, indexing

我通过arraylist制作了一张地图，并试图交换arraylist的索引（而不是值）。

例如，swapRow(1,2) 改变了第 1 行和第 2 行的位置。这在第一次有效，但如果我再做一次，就会出现错误。（swapCol() 部分也有同样的问题。）

陷入这个问题，需要帮助......

另外，任何人都可以帮我制作 swapValue() 方法。更改值很简单，但我也想移动索引，而不是值。

```
import java.text.DecimalFormat;
import java.util.ArrayList;
public class IntMap {

    class Data {
        private int data_;

        public Data(int data)
        {

            setData(data);
        }

        public void setData(int data)
        {
            if(data<0)data=0;
            if(data>99)data=99;

            data_=data;

        }

        public int getData()
        {
            return data_;
        }

    }

    class Index {

        private int index_;

        public Index(int index)
        {
            setIndex(index);
        }

        public void setIndex(int index)
        {
            if(index < 0) index=0;

            index_=index;
        }

        public int getIndex()
        {
            return index_;
        }

    }

    private ArrayList<ArrayList<Data>> datas_;
    private ArrayList<Index> cols_;
    private ArrayList<Index> rows_;

    public IntMap(int rowCount, int colCount)
    {
        if(rowCount < 0) rowCount = 1;
        if(rowCount < 0) colCount = 1;

        cols_ = new ArrayList<Index>();
        rows_ = new ArrayList<Index>();
        datas_ = new ArrayList<ArrayList<Data>>();

        for(int i=0 ; i<rowCount ; ++i) rows_.add(new Index(i));
        for(int i=0 ; i<colCount ; ++i) cols_.add(new Index(i));

        for(int i=0 ; i< rowCount ; ++i)
        {
            ArrayList<Data> temp = new ArrayList<Data>();
            datas_.add(temp);

            for(int j=0 ; j<colCount ; ++j)
            {
                temp.add(new Data(0));
            }

        }

    }

    public int getValue(int row, int col)
    {
        int rIndex = getRowIndex(row);
        int cIndex = getColIndex(col);

        return datas_.get(rIndex).get(cIndex).getData();
    }

    public void setValue(int row, int col, int value)
    {
        int rIndex = getRowIndex(row);
        int cIndex = getColIndex(col);

        datas_.get(rIndex).get(cIndex).setData(value);

    }

    public void setRandomValue()
    {
        for(int row=0 ; row < datas_.size() ; ++row)
        {
            ArrayList<Data> temp = datas_.get(row);

            for(int col=0; col <temp.size() ; ++col)
            {
                Data data = temp.get(col);

                data.setData((int)(Math.random()*100));

            }
        }
    }

    public void log()
    {
        DecimalFormat df = new DecimalFormat("00");
        for(int row=0; row<rows_.size(); ++row)
        {
            for(int col=0; col<cols_.size(); ++col)
            {

                int value = getValue(row, col);
                System.out.print(df.format(value));

                if(col<cols_.size()-1)
                    System.out.print(", ");
            }

            System.out.println();
        }
        System.out.println();
    }

    private int getColIndex(int col)
    {
        if(col <0 || col>=cols_.size())
        {
            System.out.println("[error][IntMap][getColIndex] - col is"+col);
            return 0;
        }

        for(int i =0; i<cols_.size(); ++i)
        {
            if(cols_.get(i).getIndex()==col)
                return i;
        }

        System.out.println("[error][IntMap][getColIndex] - unknown error");
        return 0;

    }

    private int getRowIndex(int row)
    {
        if(row <0 || row>=rows_.size())
        {
            System.out.println("[error][IntMap][getRowIndex] - row is"+row);
            return 0;
        }

        for(int i =0; i<rows_.size(); ++i)
        {
            if(rows_.get(i).getIndex()==row)
                return i;
        }

        System.out.println("[error][IntMap][getRowIndex] - unknown error");
        return 0;

    }

    public void swapValue(int a, int b, int c, int d)
    {

        //

    }

    public void swapCol(int a, int b)
    {
        int col1=a;
        int col2=b;
        int t=a;

        cols_.get(col1).setIndex(col2);
        cols_.get(col2).setIndex(t);

    }

    public void swapRow(int a, int b)
    {   
        int t=a;

        rows_.get(a).setIndex(b);
        rows_.get(b).setIndex(t);

    }

    public static void main(String[] args)
    {
        System.out.println("start!");

        IntMap map =new IntMap(3,4);

        System.out.println("Init map 3x4");
        map.log();

        System.out.println("random map");
        map.setRandomValue();
        map.log();

        System.out.print("get map[0][1]= ");
        System.out.println(map.getValue(0,1));

        System.out.println("set map[2][1]=50");
        map.setValue(2, 1 ,50);
        map.log();

        System.out.println("swap(0,1 <-> 2,1)");
        map.swapValue(0,1,2,1);
        map.log();

        System.out.println("swapRow(0 <-> 2)");
        map.swapRow(0,2);
        map.log();

        System.out.println("swapRow(1 <-> 2)");
        map.swapRow(1,2);
        map.log();

        System.out.println("swapCol(0 <-> 3)");
        map.swapCol(0,3);
        map.log();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:47:58.770

我认为您对 rows_arrayList 的索引和您的 Index 类型感到困惑。你的 swapRow(a,b) 应该检查 rows_list 并找出元素（索引对象）.getIndex = a 和 b，然后交换两个索引元素，而不是像你在方法中所做的那样。如果您将方法更改为以下内容，它应该可以工作。你可以做一些错误处理，例如发生了什么参数a或b无效。我只是将它们设置为0。

```
public void swapRow(int a, int b) {
        int ai = 0, bi = 0;
        for (final Index i : rows_) {
            if (i.getIndex() == a) {
                ai = rows_.indexOf(i);
            }
            if (i.getIndex() == b) {
                bi = rows_.indexOf(i);
            }
        }
        final Index aidx = rows_.get(ai);
        rows_.set(ai, rows_.get(bi));
        rows_.set(bi, aidx);

    } 
```

而且，我不知道你的确切要求。但从设计的角度来看，可能还有改进的空间。

# python - 如何访问 Scrapy 项目管道中的所有已抓取项目？

> ID：12768247
> 
> 赞同：2
> 
> 时间：2012-10-07T11:04:42.073
> 
> 标签：python, scrapy

我有一个项目，它有一个排名字段，必须通过分析其他项目类来构建。我不想使用数据库或其他后端来存储它们——我只需要访问所有当前抓取的项目并对它们做一些 itertools 魔法——在蜘蛛完成之后但在我们导出数据之前我怎么能做到这一点（所以排名字段赢了'不是空的）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T13:50:01.937

我认为信号可能会有所帮助。我在这里做了类似的事情

[https://github.com/dm03514/CraigslistGigs/blob/master/craigslist_gigs/pipelines.py](https://github.com/dm03514/CraigslistGigs/blob/master/craigslist_gigs/pipelines.py)

这似乎有点 hacky，但在你的蜘蛛中，你可以创建一个属性来存储你所有的 Scraped 项目。在您的管道中，您可以注册一个在蜘蛛关闭信号上调用的方法。此方法将蜘蛛实例作为参数。然后，您可以访问包含所有已抓取项目的蜘蛛属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T02:30:51.517

此管道将确保所有项目都有一个等级。

```
class MyPipeline(object):

    def process_item(self, item, spider):
        item['rank'] = item.get('rank') or '1'
        return item 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-29T22:19:22.037

[您可以使用Extensions](https://docs.scrapy.org/en/latest/topics/extensions.html)和[Signals](https://docs.scrapy.org/en/latest/topics/signals.html)收集所有抓取的项目。

```
from scrapy import signals

class ItemCollectorExtension:
    def __init__(self):
        self.items = []

    @classmethod
    def from_crawler(cls, crawler):
        extension = cls()

        crawler.signals.connect(extension.add_item, signal=signals.item_scraped)
        crawler.signals.connect(extension.spider_closed, signal=signals.spider_closed)

        return extension

    def spider_closed(self):
        print(self.items)  # Replace with your code

    def add_item(self, item):
        self.items.append(item) 
```

现在，每次成功抓取新项目时，都会将其添加到`self.items`. 当所有项目都收集完毕并且蜘蛛正在关闭时，`spider_closed`调用该函数。在这里，您可以访问所有收集的项目。

不要忘记在`settings.py`.

# css - HTML 水平对齐

> ID：12768253
> 
> 赞同：0
> 
> 时间：2012-10-07T11:05:57.083
> 
> 标签：css

我正在尝试水平对齐两个 div。在尝试了大约 15 种不同的方法后，我仍然无法让它发挥作用。

> ![这就是我的 div 现在对齐的方式](../Images/91d4895097df6f49b8bc7a7b91430cbc.png)

```
$html .= '<div class="fotoLinks">';
$html .= '  <img src="'.$image->getWebPath().'"/>';
$html .= '</div>';
$html .= '<div class="tekst">';
$html .=    $this->text;
$html .= '</div>'; 
```

使用相应的 CSS（div.alinea 是一个包装 div）：

```
div.alinea
{
    float: left;
    width: 100%;
    margin-bottom: 15px;
}

div.tekst
{
    float: left;
}

div.fotoLinks
{
    float: left;
    margin-right: 15px;
    height: 100%;
} 
```

我希望能从新方法中获得一些灵感。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T11:10:26.690

尝试

```
display: inline-block; 
```

代替`float: left;`

**编辑：**

您可以尝试的一种方法，但受支持较少，对于您的包装器 div，设置：

```
display: table; 
```

对于您的内部 div：

```
display: table-cell; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T19:14:20.537

您必须为文本 div 和图像 div 定义宽度，因为它继承了 100% 的父元素宽度。还有很多其他方法/答案，但这会让您调整最少的代码以使其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T11:12:26.050

在 CSS for 中`div.tekst`，放入`clear:both`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T11:13:23.793

这对我有用：

```
<html>
<head>
<style>
.ftext {
    border: 1px solid red;
    float:left;
}
</style>
</head>
<body>

<div class="ftext">
This is the left text.
</div>
<div class="ftext">
This follows to the left.
</div>

</body>
</html> 
```

它在左侧文本旁边浮动右侧文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T11:36:00.440

只需给 'tekst' div 一个左边距。我没有对此进行测试，所以我不确定如果不调整其他东西就可以单独修复它。

# jquery - 通过 Jquery .append() 调用 CSS 文件，并通过第二次单击同一元素将其删除

> ID：12768255
> 
> 赞同：0
> 
> 时间：2012-10-07T11:06:17.003
> 
> 标签：jquery, css, element

我有一个 HTML 链接：

```
<li class="skip-link-diszlexia"><a class="assistive-text" href="#" title="Diszlexia barát nézet">Diszlexia barát nézet</a></li> 
```

我想通过 Jquery javascript 调用另一个 CSS，即更改某些 div 和段落的字体系列和样式，然后在第二次单击同一元素后，返回开始。我根本不是 Javascript 程序员，我阅读了 Jquery 文档并创建了这个。它将 diszlexia.css 文件与默认 style.css 结合起来没有问题，但是第二次单击（我想从使用中删除 diszlexia.css）不起作用：

```
// Jquery CSS switcher (Diszlexia barát nézet)
$(document).ready(function() {
    $(".skip-link-diszlexia").click(function(){
        $(this).append('<link rel="stylesheet" type="text/css" media="all" href="css/diszlexia.css" />');
        return false;
        $(this).append('<link rel="stylesheet" type="text/css" media="all" href="css/diszlexia.css" />').remove();
        return false;
    });
}); 
```

我不想使用 .addClass()、.removeClass() 或 .css()，因为我需要更改许多元素上的 fonf-family，并且只需添加另一个带有更改的 CSS（就像我们为IE）会容易得多。

有人可以帮助我并纠正我糟糕的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:15:44.747

我想您需要在每次单击时切换该引用。意思是如果它被应用删除它并且如果被删除而不是应用它因此你应该试试这个：

```
$(document).ready(function() {
    $(".skip-link-diszlexia").click(function(){
        if($(this).find("link").length <= 0)
            $(this).append('<link rel="stylesheet" type="text/css" media="all" href="css/diszlexia.css" />');
        else
            $(this).find("link").remove();
    });
}); 
```

**[演示](http://jsfiddle.net/qnwbW/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:23:06.117

最简单的解决方案可能是在 body 标记上使用`addClass`和`removeClass`结合 css 规则，这些规则将根据 body 类更改字体。删除链接标签可能不会撤消字体更改

简化的 CSS 示例

```
div { font-family: arial}
.dislexia div { font-family: verdana} 
```

JS

```
$(".skip-link-diszlexia").click(function(){  
    $('body').addClass('dislexia');

 }) 
```

# ios - 创建一个 UIModalPresentationFormSheet

> ID：12768256
> 
> 赞同：1
> 
> 时间：2012-10-07T11:06:19.693
> 
> 标签：ios, xcode

我想为我的应用创建一个用户指南，只显示一次。如何创建一个包含一些文本的简单 UIModalPresentationFormSheet？

编辑：

```
UIViewController *newItemViewController = [[UIViewController alloc] initWithNibName:@"View.xib" bundle:nil];
newItemViewController.modalPresentationStyle = UIModalPresentationFormSheet;
[self presentModalViewController:newItemViewController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:37:06.987

您可以将值存储在 NSUserDeafualts 中。因此，在 viewDidAppear 的主 UIViewController 中：

```
 #define SHOULD_SHOW_KEY @"shouldShowKey"
- (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];
//Get user defaults
NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
//if there is no object for SHOULD_SHOW_KEY present modal contoroler
if (![defaults objectForKey:SHOULD_SHOW_KEY]) {
    //Set object for key and synchronize defaults
    [defaults setObject:SHOULD_SHOW_KEY forKey:SHOULD_SHOW_KEY];
    [defaults synchronize];
    //Present any custom modal controller
    UIViewController *yourModalVC=[self.storyboard instantiateViewControllerWithIdentifier:@"myModalVC"];
    [self presentModalViewController:yourModalVC animated:YES];
}
} 
```

希望这有帮助。

# ios - 如何获取使用 SDWebImage (iOS) 缓存的图像的文件系统路径

> ID：12768264
> 
> 赞同：2
> 
> 时间：2012-10-07T11:07:22.453
> 
> 标签：ios, uiimage, sdwebimage

我在 iOS 应用程序的[UICollectionView中使用](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)[SDWebImage](https://github.com/rs/SDWebImage)进行图像缓存。

一切都很好，但是，当用户在集合视图上快速滚动时，在将占位符替换为缓存图像之前总会有一点停顿。我相信这是由于缓存检查。为了更好的用户体验，一旦图像被实际缓存，我希望单元格显示正确的图像而不是占位符。如果我可以获得缓存图像的本地（设备）文件系统路径并将其存储在*Show*实例中，并使用它（如果存在）而不是我的占位符，这将很容易。

有可能[将成功块传递给*setImageWithURL*方法](http://hackemist.com/SDWebImage/doc/Categories/UIImageView+WebCache.html#//api/name/setImageWithURL:placeholderImage:options:success:failure:)但是，它获得的唯一参数是[UIImage](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)实例（实际上在 master 分支中也有一个名为*cached的**BOOL*变量也被传递）。那么 - 是否有可能直接从*UIImage*实例获取图像的文件系统路径？或者我应该修改*SDWebImage*以便将这些信息传递给缓存的实例？或者有没有更好的方法来实现我之前描述的目标？

 ***我的*Show*类有*imageURL*，下面是 show cell 如何使用 SDWebImage：

```
#import "ShowCell.h"
#import <SDWebImage/UIImageView+WebCache.h>

@implementation ShowCell

@synthesize imageView = _imageView;
@synthesize label = _label;
@synthesize show = _show;

- (void)setShow:(Show *)show
{
    if (_show != show) {
        self.label.text = show.title;
        if (show.imageURL) {
            [self.imageView setImageWithURL:[NSURL URLWithString:show.imageURL]
                           placeholderImage:[UIImage imageNamed:@"placeholder.png"]];
        }
        _show = show;
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-29T13:24:50.660

有一些私有`SDImageCache`方法可以获取缓存图像的文件系统路径。我们可以通过类别公开这些方法。只需将下面的代码放入，`SDImageCache+Private.h`然后将其添加到您的项目中：

```
#import "SDImageCache.h"

@interface SDImageCache (PrivateMethods)

- (NSString *)defaultCachePathForKey:(NSString *)key;
- (NSString *)cachedFileNameForKey:(NSString *)key;

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:51:30.823

我有一个类似的问题，请参阅：[SDWebImage 显示缓存中图像的占位符](https://stackoverflow.com/questions/15034283/sdwebimage-showing-placeholder-for-images-in-cache/15098982#15098982)

基本上我分叉了项目来解决这个问题。

**更新：**

您可以这样做以避免闪烁（这适用于项目的主分支）：

```
[imageView setImageWithURL:url placeholderImage:imageView.image options:0 
 progress:^(NSUInteger receivedSize, long long expectedSize) {
        imageView.image = [UIImage imageNamed:@"QuestionMarkFace.png"];
 } completed:nil]; 
```***

# regex - bash 比较一个字符串和一个字符串列表

> ID：12768265
> 
> 赞同：7
> 
> 时间：2012-10-07T11:07:42.790
> 
> 标签：regex, bash

假设我在 bash 中有以下代码：

```
#!/bin/bash

bad_fruit=( apple banana kiwi )
for fname in `ls`
do
  # want to check if fname contains one of the bad_fruit
  is_bad_fruit=??? # <------- fix this line
  if [ is_bad_fruit ]
  then
    echo "$fname contains bad fruit in its name"
  else
    echo "$fname is ok"
  fi
done 
```

**如何修复 is_bad_fruit 以确保 fname 包含 bad_fruit 字符串之一？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T11:15:03.360

试试下面的代码：

```
#!/bin/bash

bad_fruit=( apple banana kiwi )
re="$(printf '%s\n' "${bad_fruit[@]}" | paste -sd '|')"

for fname in *; do
  # want to check if fname contains one of the bad_fruit
  if [[ $fname =~ $re ]]; then
    echo "$fname contains bad fruit in its name"
  else
    echo "$fname is ok"
  fi
done 
```

照顾[*无用的 ls*](http://partmaps.org/era/unix/award.html#ls)

*`ls`是一种交互式查看文件信息的工具。它的输出是为人类格式化的，并且会导致脚本中的错误。使用 glob 或 find 代替。了解原因*： http: [//mywiki.wooledge.org/ParsingLs](http://mywiki.wooledge.org/ParsingLs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T11:50:22.070

另一种选择（使用`grep`内部循环并评估退出代码）：

```
#!/bin/bash

bad_fruit=( apple banana kiwi )
for fname in *; do
  for fruit in "${bad_fruit[@]}"; do
    echo "$fruit"
  done | grep "$fname"
  if [ $? -eq 0 ]; then
    echo "$fname contains bad fruit in its name"
  else
    echo "$fname is ok"
  fi
done 
```

# reporting-services - 来自 Fetch XML 的 SSRS 2008 中的每月专栏

> ID：12768266
> 
> 赞同：1
> 
> 时间：2012-10-07T11:07:46.730
> 
> 标签：reporting-services, fetchxml

我有一份年度报告，我希望将月份显示在 Jan-Dec 列中，即使是没有任何值的月份也是如此。

今天我有一个从 5 月开始的矩阵报告，因为那个月是第一个值的月份。但我希望表格从 1 月开始，即使该月没有任何值。

我还想知道我是否可以在同一个矩阵中有几行但具有不同的数据源（XMLFetches）。

我再解释一下。真的应该是一个相当简单的报告，我想显示每月销售多少，每个月是一列，行是产品。
我正在使用来自 CRM 2011 在线的 fetchXML。

月 一月 二月 三月 四月 五月 六月 七月

轮子 0 0 0 0 10 65 75

汽车 0 10 0 10 0 100 175

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:51:22.830

无法在报表的同一矩阵中组合不同的数据集，但是，您可以在将数据集呈现给报表之前组合数据源以创建一个数据集。例如，您可以使用存储过程（或 SSIS 或 powershell 等）从数据库中读取数据并将数据组合到数据库中的表、临时表、表变量中，然后从报告中或在 Fetch XML 中查询

要获得即使对于没有数据的条目也显示日历条目的报告，您需要从所需的日历开始，然后将其左连接到您的实际数据。

如果您是从动态 CRM 执行此操作并且熟悉自己编辑 FetchXML，那么您可以根据需要使用 with 连接来自多个实体的数据。关于堆栈溢出的另一篇文章详细介绍了该技术：[Left join in FetchXml?](https://stackoverflow.com/questions/3218510/left-join-in-fetchxml)

例如，如果您的报告只有月份，您可以创建一个包含 3 列、Year、Month 和 MonthNumber 的日历表。MonthNumber 对于在报告中对月份进行排序很重要，因为您不能按字母顺序排列月份。如果您只在报告中显示一个日历年，则可能不需要年份列，但您可以将其重复用于许多报告，因此值得正确执行。如果您想了解更多关于它们的信息，请查看“日历表”，关于如何创建它们有很多意见，但也许从一个简单的开始以熟悉这个想法。如果您离开将日历表加入您的月份数据，您将获得一月到四月的 NULL 值（因为您的数据从五月开始）并且您可能希望将这些 NULL 值替换为 0 或空字符串，取决于什么是合适的。在那里使用 isnull() 或 nvl() 或数据库中的任何适当函数可能是合适的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T09:03:54.260

我如何构建月份排序的答案是，我使用参数来构建特定列的月-年值，然后我使用该值与获取的月-年值进行比较。

在列 =Sum(Cint(IIF(Fields!startmonth.value=Cint(Parameters!year.Value & Parameters!jan.Value),Fields!money.Value,0)))

因此，来自提取的月-年值是通过一个计算字段建立的，例如 201302，然后将其与选定的 2013 年进行比较，并添加该特定列 02=201302 的月值。

# linq - Linq2SQL 和 IQueryable

> ID：12768267
> 
> 赞同：1
> 
> 时间：2012-10-07T11:07:57.993
> 
> 标签：linq, linq-to-sql, iqueryable

对 LINQ2SQL 还是新手，所以请原谅我的无知...

我有一个用户组件，其中包括一个文本框和一个按钮。该组件用作通用 ListOfValue 过滤器。该组件具有一个设置 IQueryable 的函数，该函数将传递给用户单击控件上的按钮时打开的表单。该表单由一个网格 (c1flexgrid) 组成，其中填充了来自 IQueryable 的数据。表单上有一个将 IQueryable 作为数据源的 bindingsource。用户可以在网格内进行选择，在他选择了一个条目后，对话框关闭，并且选择的行（或者更好的是从行中选择的 LINQ2SQL 对象）被传递回控件。在此控件上，我想显示该选定对象中的一个特定字段。该字段的名称作为字符串传递给用户控件。

我的问题是，我不知道如何从“通用”LINQ2SQL 对象中获取该字段数据。在调试器中我可以看到，所选对象属于特定实体类型（对应于查询）

可能类似于 [在 C# 中缺少用于类型安全数据绑定的“nameof”运算符的解决方法？](https://stackoverflow.com/questions/301809/workarounds-for-nameof-operator-in-c-typesafe-databinding) 但只是相反的方式:)

非常欢迎任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:23:07.083

我假设在你的 IQueryable 中你在设计时不知道类型 T。如果这是正确的，你需要使用反射来获得你想要的值。

```
var value = typeof(T).GetProperty("MyField").GetValue(instance, null); 
```

或者，将实例转换为实现您的字段的通用基类型。

```
CommonBase castInstance = (CommonBase)instance;
var value = castInstance.MyField; 
```

# xcode - 有没有办法从 Xcode 中禁用对源代码的写访问？

> ID：12768268
> 
> 赞同：0
> 
> 时间：2012-10-06T09:50:21.370
> 
> 标签：xcode

是否有任何简单的解决方案可以防止 Xcode 写入项目中的源文件？我想在外部编辑源文件并且只使用 Xcode 进行调试，所以我想防止任何意外修改通过 xcode 保存。（显然我希望 Xcode 在构建/调试时获取对文件的外部更改）

我想到的一种可能的解决方案是在 xcode 上启用应用程序沙盒权利并手动维护不应写入的目录列表。这可行吗？还有其他想法吗？

在沙盒方面，我不确定 Xcode 是否符合 [Apple 的沙盒要求](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/DesigningYourSandbox/DesigningYourSandbox.html#//apple_ref/doc/uid/TP40011183-CH4-SW6 "沙盒要求")。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:27:16.047

我认为没有任何方法可以阻止 XCode 全部进入您的源代码、编写临时文件等等。

一种选择是创建一个简单的 shell 脚本，将源代码推送到 XCode 使用的目录。由于您没有使用 XCode 进行开发（仅用于调试），只需将整个项目树复制到一个临时目录中，然后在 XCode 中打开它。

类似（push_to_xcode.sh）的东西：

```
#!/bin/bash

#first, wipe existing project from your temp directory

rm -rf /tmp/xcode_temp_code

#then, copy your existing project into the temp folder

cp -R /path/to/your/project/myProject /tmp/xcode_temp_code

#lastly, launch the project

open /tmp/xcode_temp_code/myProject.xcodeproj 
```

创建脚本后，通过键入将其更改为可执行文件`chmod +x push_to_xcode.sh`

然后打开一个终端，cd到你保存脚本的目录，`./push_to_xcode.sh`然后在finder中键入或双击它。

这将在这个项目中启动 Xcode。您在 XCode 中所做的任何更改，无论是有意还是无意，都不会影响您的原始代码。

# android - Is there a replacement for the Handler class?

> ID：12768279
> 
> 赞同：0
> 
> 时间：2012-10-07T11:09:19.500
> 
> 标签：android

I love the convenience of the Handler class; I can easily queue messages and even delay messages. However, all the code runs on the UI thread which is causing stuttering of the animation.

Is there a class, like Handler, that doesn't run on the UI thread ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:12:24.677

You could always use a [`HandlerThread`](http://developer.android.com/reference/android/os/HandlerThread.html). I do not have a simple example of this handy, unfortunately.

Personally, I tend to use `java.util.concurrent` classes directly for things that do not involve the main application thread (e.g., `LinkedBlockingQueue`, `ExecutorService`).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:36:21.993

I'm a little confused by the currently accepted answer which seems to imply that using `Handler` on a non-UI thread isn't possible, because it's something I've done quite routinely and I thought it was pretty well known.

Within a non-UI `Thread`:

```
 @Override
    public void run() {
        Looper.prepare();
        ...
        mThreadHandler = new Handler() {            
            public void handleMessage(Message msg) {
                switch (msg.what) {
                    ...
                        break;
                    default:
                        break;
                }
            }
        };
        Looper.loop();
    } 
```

Using the `mThreadHandler`, messages can be sent to be processed by the `Handler` in the above non-UI `Thread`.

If there are any good reasons for not using the `Handler` / `Message` classes to post work to be done on a non-UI Thread in this way then I'd like to know. It has been working fine for me so far though. The only reason I've read for not using a `Handler` in this way is that "a `Handler` is meant for posting stuff to the UI thread" which is not in itself a good technical basis.

# symfony1 - 在 Symfony 1.4 中使用 sfBrowser 进行功能测试时内容类型未通过

> ID：12768280
> 
> 赞同：1
> 
> 时间：2012-10-07T11:09:32.717
> 
> 标签：symfony1, symfony-1.4, functional-testing

该测试针对 POST api 端点，其中数据作为 JSON 包含在帖子正文中。在拨打电话之前，我将其设置`Content-Type`为`'application/json'`. 但是，当我测试格式时`isFormat('JSON')`，响应为空。如果我转储，`$request->contentType()`这也会产生空值。

`setHttpHeader('Content-Type','application/json')`在功能测试期间为什么没有正确设置标题的任何原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:30:13.003

你的设置方法是正确的，但是在 sfBrowserBase 里面有这个bug：

```
foreach ($this->headers as $header => $value)
{
  $_SERVER['HTTP_'.strtoupper(str_replace('-', '_', $header))] = $value;
} 
```

以 HTTP 为前缀设置 content_type。但是在您的操作 $request->getContentType() 方法中假设您没有前缀。

所以如果你改变这个：

```
foreach ($this->headers as $header => $value)
{
  $_SERVER[strtoupper(str_replace('-', '_', $header))] = $value;
} 
```

你可以`$request->getContentType()`正确地制作！

[你可以在这里](http://trac.symfony-project.org/ticket/10081#preview)找到更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:13:44.303

多亏了@nicolx，我可以解释更多关于正在发生的事情并提供一些进一步的指导。

正如@nicolx 所指出的，`$request->getContentType()`正在寻找不带前缀 HTTP_ 的 HTTP 标头（请参阅第 163 至 173 行`sfWebRequest`）。但是，sfBrowserBase 总是将 HTTP_ 前缀添加到所有标头。所以添加这个mod：

```
foreach($this->headers as $header => $value) 
{
  if(strotolower($header) == 'content-type' || strtolower($header) == 'content_type')
  {
    $_SERVER[strtoupper(str_replace('-','_',$header))] = $value;
  } else {
    $_SERVER['HTTP_'.strtoupper(str_replace('-','_',$header))] = $value;
  }
} 
```

这将处理`ContentType`在您的操作中设置和检测到的标头。如果您不包含`HTTP_`前缀，则其他标头将不起作用（例如`$request->isXmlHtttpHeader()`，即使您在测试文件中设置它也会失败）。

测试方法`isFormat()`不是测试 ContentType 标头，而是测试 Symfony 路由设置[sf_format](http://symfony.com/legacy/doc/jobeet/1_4/en/15?orm=Doctrine)。如果我将路线设置为特别有`sf_format: json`例如

```
some_route:
  url: /something/to/do
  param: {module: top, action: index, sf_format: json} 
```

然后测试

```
with('request')->begin()->
   isFormat('json')->
end()-> 
```

返回真。

由于我想测试标头设置，我向 sfTesterRequest 添加了一个新的测试器方法，名为`isContentType()`. 这个方法的代码是：

```
public function isContentType($type)
{
  $this->tester->is($this->request->getContentType(),$type, sprintf('request method is "%s"',strtoupper($type)));

  return $this->getObjectToReturn();
} 
```

调用这个测试就变成了：

```
with('request')->begin()->
  isContentType('Application/Json')->
end()-> 
```

# django - 在 Django 中检测浏览器关闭时的用户注销

> ID：12768281
> 
> 赞同：4
> 
> 时间：2012-10-07T11:09:35.350
> 
> 标签：django, django-sessions

我们有一些数值计算的网络服务。它有一个注册模式，用户必须注册才能通过邮件发送结果。

我们想跟踪用户保持登录的时间。注册成功后，登录时间将写入数据库。注册不是永久的，它只是为了单次会话的目的，用于获取用户的电子邮件。

有几种情况可能：

**用户通过注销按钮正常注销。** 最简单的解决方案。在数据库中写入时间和注销，并删除会话。

**用户在会话到期时注销。** 我打算有一个脚本来检查所有没有设置注销时间的数据库条目，如果*当前时间 - 登录时间 > 到期时间*在数据库中写入注销时间作为*登录时间 + 到期时间*。

**用户通过浏览器关闭注销。** 会话将 get_expire_at_browser_close() 设置为 True。但我不知道服务器如何检测浏览器关闭。

想法，批评者，评论？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T11:39:33.403

在 django 会话中间件中，如果我们想要 SESSION_EXPIRE_AT_BROWSER_CLOSE，这些行控制会话过期：

```
if settings.SESSION_EXPIRE_AT_BROWSER_CLOSE:
    max_age = None
    expires = None 
```

[根据此页面](http://mrcoles.com/blog/cookies-max-age-vs-expires/)，服务器不必检测任何内容，因为应该在客户端删除没有设置 max_age 或 expires 的 cookie ：

> 通过设置其中任何一个，cookie 将持续存在直到其时间用完，否则——如果你都没有设置——cookie 将持续到你关闭浏览器（“会话 cookie”）。

**编辑：**

跟踪用户在线时长的一种方法是使用 javascript 不时 ping 服务器。仅当用户在浏览器中打开页面并且在每个 ping 服务器上都应该更新用户*最后一次看到的在线*值时，才会发生这种情况。

当用户关闭浏览器会话结束。下次用户登录服务器时，可以计算他最后一次访问的持续时间，如*最后一次在线看到*的-*最后一次登录时间*。

不使用任何 javascript 的更简单的解决方案：可以使用简单的自定义中间件根据每个用户请求更新*最后一次在线访问。*

# java - XSD 雅虎财经

> ID：12768283
> 
> 赞同：0
> 
> 时间：2012-10-07T11:09:56.863
> 
> 标签：java, xsd, jaxb, yahoo-finance

我想用雅虎金融来获取股票价格。

yahoo Finance web 服务返回 xml，我想获取这个 xml 的 xsd 来创建代表 xml 的 Java 对象。

我没有找到这张表的xsd。

所以我的问题很简单：你知道我在哪里可以找到这个 xsd（如果它存在的话）吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:56:09.590

不幸的是，我没有 yahoo Finance xsd 给你

但是，如果您的开发环境是 Windows，我可以提供一种可能对您有所帮助的方法。

我知道你是`Java`人，你可能不喜欢`Microsoft`。在`.net`我们有`xsd.exe`工具。（可能这个工具必须有 java 等价物，但我不知道，所以我会解释`xsd.exe`）

在这里您可以找到`xsd.exe`工具的详细说明

[http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.100%29.aspx)

使用此工具，您可以从示例 xml 生成 xsd 文件。在此 xsd 文件中进行一些小修改后，您可以`xml schema`与您的 xml兼容

关键是在生成的 xml 中将定义所有类型，`xs:string`您需要使用正确的类型更改这些类型，或者您可以保持原样。

第二个重点是生成的xml schema 可以有`maxoccurs="unbounded"`。您需要将此值更改`maxoccurs="1"`为非重复节点

您可以从[http://www.microsoft.com/en-us/download/details.aspx?id=8279](http://www.microsoft.com/en-us/download/details.aspx?id=8279)下载适用于 Windows 7 和 .NET Framework 4 的最新[Microsoft Windows SDK](http://www.microsoft.com/en-us/download/details.aspx?id=8279)

即使你有这个工具的旧版本，你也可以使用它。`xsd.exe`自推出以来没有发生太大变化

# ruby-on-rails - 使用jquery文件上传将原始文件直接上传到s3后如何使用carrierwave创建缩略图

> ID：12768284
> 
> 赞同：4
> 
> 时间：2012-10-07T11:10:10.993
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, carrierwave

我正在通过 jquery_file_upload 上传图片（Railscast 第 383 集）上传工作完美，我在回调函数中获得了 url

问题是：我想在直接上传到s3后创建一些缩略图

为此我假设：

1.  服务器必须从 s3 读取图像
2.  服务器必须创建缩略图
3.  服务器必须将缩略图直接存储在 s3
4.  服务器必须获得回调并相应地显示缩略图。
5.  服务器必须存储创建的缩略图的字段

现在，在图像上传完成后调用图像控制器回调：

```
def create
 #get the url from the callbcack
 #e.g: image[image_source] = https://<BUCKET>.s3.amazonaws.com/uploads/myimage.png
 @image = Image.new(params[:image])
 @image.user_id = current_user.id
 @image.save
end 
```

和模型：

```
class Image < ActiveRecord::Base
  attr_accessible :image_thumb, :user_id, :width ,:album_type_id 
  after_save :enqueue_image

  mount_uploader :image_thumb, ImageUploader

  def enqueue_image
   #checking if i have the original image
   if self.image_source present?
    #what to do here?
    #how can i call the carrierwave function to create the thumbnails?
    #how to send the thumbnails directly to s3 with callback name?
   end

  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:38:24.607

上传*后*是否一定需要创建缩略图？如果没有，我认为您可以在初始上传期间使用`version`. 例子：

```
 class ImageUploader < CarrierWave::Uploader::Base
    version :thumb do
     process :resize_to_fill => [50, 50]
    end
 end 
```

# cocos2d-iphone - 我有一个 TexturePacker 文件 ccz ，但我没有 plist 文件，我该如何解决这个问题？

> ID：12768289
> 
> 赞同：0
> 
> 时间：2012-10-07T11:10:53.360
> 
> 标签：cocos2d-iphone

现在我有一个 ccz 文件，但我没有 plist 文件。如何获取新的 plist 文件？

我可以根据给定的 ccz 文件生成一个新的 plist 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:31:55.367

不，您需要 .tps 源文件或重新创建纹理图集。

# css - IE中的背景渐变未延伸到底部

> ID：12768292
> 
> 赞同：0
> 
> 时间：2012-10-07T11:11:29.497
> 
> 标签：css, html, internet-explorer

在 FF 和 Chrome 中工作，但努力寻找 IE9 解决方案。渐变有效，但它只是停在页脚的底部。我认为拥有 height:100% 可以解决这个问题，但它似乎没有效果。任何帮助将非常感激。谢谢你。这是我所拥有的：

**代码**

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="css/style4.css"/>
<link rel="stylesheet" type="text/css" href="css/prfQ.css"/>
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="css/IEstyle.css" />
<![endif]-->
<title></title>
</head>
<body>
<div id="header"></div>

<div id="container">

    <div id="left" class="column"></div>
    <div id="center" class="column"></div>
    <div id="right" class="column"></div>
</div>

<div id="footer"></div> 
```

**css/IEstyle.css**

```
@CHARSET "ISO-8859-1";

body {

-ms-filter:"progid:DXImageTransform.Microsoft.gradient ( startColorstr = '#424242',     endColorstr = '#e9e9e9' )";
background-image:
    url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAxIDEiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPgo8bGluZWFyR3JhZGllbnQgaWQ9ImczMjIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjAlIiB5Mj0iMTAwJSI+CjxzdG9wIHN0b3AtY29sb3I9IiNFOUU5RTkiIG9mZnNldD0iMCIvPjxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIG9mZnNldD0iMSIvPgo8L2xpbmVhckdyYWRpZW50Pgo8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2czMjIpIiAvPgo8L3N2Zz4=);
} 
```

**css/style4.css**

```
@CHARSET "ISO-8859-1";

* {
margin: 0;
padding: 0;
}

body {
height: 100%; margin : 0 auto;
padding-left: 352px;
padding-right: 352px;
background: -webkit-linear-gradient(top, #424242, #e9e9e9);
background: -moz-linear-gradient(top, #424242, #e9e9e9);
background-attachment: fixed;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
font-family: arial, helvetica, sans-serif;
margin: 0 auto;
}

#header {
background: red;
height: 50px;
min-width: 1154px;
}

#container {
float: left;
min-width: 1154px;
}

#container .column {
min-height: 800px;
float: left;
}

#footer {
background: blue;
height: 50px;
clear: both;
min-width: 1154px;
}

#center {
background: yellow;
min-width: 714px;
background: yellow;
}

#left {
background: orange;
min-width: 220px;
}

#right {
background: purple;
width: 220px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:47:39.480

尝试附加IE背景渐变不`body `tag, but to html` tag.`

 `Another solution would be to set:` 

```
html {
    height: 100%;
} 
```

# java - Android targetSdkVersion：访问更高的功能和风险

> ID：12768293
> 
> 赞同：0
> 
> 时间：2012-10-07T11:11:31.157
> 
> 标签：java, android, hardware-acceleration

我知道如何`minSdkVersion`工作`targetSdkVersion`，但在这个具体案例中我需要确认（我不想意外忽略任何事情）。

我的应用（游戏）支持 Android 2.2 及更高版本的所有设备。截至目前，`minSdkVersion`均`targetSdkVersion`设置为 8（即 API 级别 8，对应于 Android 2.2）。

如果为它打开硬件加速，我的一项`Views`工作会更加流畅，但我无法在项目中设置它，因为它需要**API 级别 11**。（那我是怎么注意到的？我的一个测试设备在开发者设置中提供了一个复选框“强制 GPU 映射”，所以当我运行我的应用程序时，我注意到了不同之处。）

我想解决方案是设置`targetSdkVersion`为 11（但保持`minSdkVersion`在 8），并从代码中检查我们是否在 API 级别 11 或更高级别上运行，然后为视图（窗口）启用硬件加速。最后一步需要更高的 API 级别，否则`FLAG_HARDWARE_ACCELERATED`在源代码中无法识别。

假设我所有的代码只使用`minSdkVersion`API（*除了*在运行时检查平台版本是否有异常调用，例如硬件加速），是否保证下面的设备不会出现问题`targetSdkVersion`？（由于上述解决方案，我的意思是。）我想避免我的应用程序无法在预 Honeycomb 设备上正常运行。（请注意，我也在各种平台版本的设备上测试我的应用程序，所以测试不是问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:24:47.423

在您的`Activity`中，如果它是 API 级别 11 或更高，请使用此行为您的窗口设置硬件加速：

```
if( Build.VERSION.SDK_INT >= Build.HONEYCOMB ) {
    getWindow().setFlags(
    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,
    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);
} 
```

**编辑**：作为您编辑的答案，Android Lint 可能会抛出一个错误，说明它不适用于 TargetSDK，但它会工作并且不会为旧版本抛出任何异常。如果是这样，则版本以某种方式 > 10，这是不可能的。

但是您应该更新您的 TargetSDK，因为通过使用硬件加速，您的目标是更高的 API 目标。

# python - 在 SqlAlchemy 中插入对象和使用 id

> ID：12768294
> 
> 赞同：0
> 
> 时间：2012-10-07T11:11:31.803
> 
> 标签：python, mysql, sqlalchemy

我有一个表并用对象列表填充它，然后我需要使用他们的 ID，但我得到一个

> 实例 <location at 0x457f3b0> 未绑定到 Session；属性刷新操作无法进行

错误。

我正在用对象填充一个列表并将其发送到一个函数以一次插入所有对象。然后我尝试使用 ID。

这是我的全部插入功能：

```
def insertlocations(locationlist):
    session.add_all(locationlist)
    session.commit()
    session.close() 
```

然后我尝试获取 ID：

```
insertlocations(neighbourhoodlist)
session.flush(neighbourhoodlist)
for neighbourhood in neighbourhoodlist:
    print neighbourhood.locationid 
```

顺便说一下，会话是全球性的。需要任何进一步的信息吗？

正如我在 MySQL 表中查看的那样，插入了数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:22:03.193

您的问题很可能是您已经在函数`close()`中使用了会话。`insertlocations()`

当您随后访问`neighbourhood.locationid`时，会话将关闭，并且该`neighbourhood`对象不再绑定到会话。

例如，这应该有效：

```
from sqlalchemy import create_engine
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Column, Integer, String
from sqlalchemy.orm import sessionmaker

engine = create_engine('sqlite:///example.db')
engine.echo = True
Base = declarative_base()

class Location(Base):
    __tablename__ = 'locations'

    locationid = Column(Integer, primary_key=True)
    name = Column(String)
    address = Column(String)

    def __init__(self, name, address):
        self.name = name
        self.address = address

Base.metadata.create_all(engine)

Session = sessionmaker(bind=engine)
session = Session()

def insertlocations(locationlist):
    session.add_all(locationlist)
    session.commit()

loc1 = Location('loc1', 'Foostreet 42')
loc2 = Location('loc2', 'Barstreet 27')

neighbourhoodlist = [loc1, loc2]

insertlocations(neighbourhoodlist)
for neighbourhood in neighbourhoodlist:
    print neighbourhood.locationid

session.close() 
```

*   退出`session.close()`您的功能，并在您使用完该会话后执行此操作。
*   放弃 session.flush()，因为在添加对象时已经提交了会话，所以不需要它。

# scala - 在Scala中将方法提取到独立函数

> ID：12768300
> 
> 赞同：6
> 
> 时间：2012-10-07T11:12:32.750
> 
> 标签：scala, oop, functional-programming, scala-macros

给定类似的东西：

```
class A {
  def f(x: X) = ...
  def g(y: Y, z: Z) = ...
  ...
} 
```

如何（自动）提取函数：

```
object A {
  val f' = (a: A, x: X) => a.f(x)  // do this automagically for any arbitrary f
  val g' = (a: A, y: Y, z: Z) => a.g(y, z) // and deal with arity > 1 too
  ...
} 
```

使用这个**确切的**类型签名（首先是对象，然后是参数列表）。让我非常清楚地说明问题：

> *“给定一个`f(x1: X1, ..., xn: Xn)`在类的上下文中定义的方法`A`，如何自动提取一个函数`f'`，*该函数(i) 接收*类型**的实例，以及`a``A`*(ii)*与 1:1 的参数列表对应的参数列表，`f`即`x1: X, ... xn: Xn`实施正是`a.f(x1: X1, ..., xn: Xn)`“*

甚至：

> *捕获 lambda 演算的可扩展性概念**，* *这样*您*就可以自动`λx.(f x)`从.`f``x``f`*

这可以首先通过找到一种访问标识符的方法来解决`f`，`g`... 我们可以简单地书写或手写，但让我们沉迷于干燥。`a: A``A``f'``g'`

* * *

PS 也许如果没有运行时反射，这是不可能的（尽管使用 Scala 2.10+ 宏可能是可能的），因为我似乎无法找到一种方法来事先引用`f`或`g`不引用特定实例 ( `a: A`) 的标识符。但这将类似于以下内容，而不必求助于`strings`：

```
A.getMethod("f"): Function2[A, X, ...] 
```

我也意识到这个问题的实际用途可能会帮助参与者提出替代方案，但我是在抽象意义上讨论这个问题。我不是试图解决我已经简化为这个问题的其他问题。我想知道**这**是否可能:-) 这是一篇[非常好的文章](http://gleichmann.wordpress.com/2011/01/09/functional-scala-turning-methods-into-functions/)，可以真正理解这个问题背后的动机，并对 Scala 上的 Eta 扩展进行了咆哮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:37:41.617

[您当然可以在编译时使用宏来执行此操作——我在ScalaMock 3 的预览版中](http://www.paulbutcher.com/2012/06/scalamock-3-0-preview-release/)做了非常类似的事情——模拟对象是匿名类的实例，其中每个成员都由模拟函数的实例实现。您很可能可以将其用作您尝试做的事情的起点。

**警告**：ScalaMock 3 目前仅适用于 Scala 2.10.0-M6。它不适用于 M7 或当前的开发版本，因为我还没有（还！）有机会解决的宏 API 中的重大更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T20:27:33.993

这感觉类似于为 Scala 案例类创建[镜头的](https://stackoverflow.com/q/8307370/1333025)[Lensed项目。](https://github.com/gseitz/Lensed)我相信可以对其进行修改以创建您描述的方法而不是镜头。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-04T14:20:25.323

我知道这不是一个特别漂亮的解决方案，但如果你不能使用宏，你可以为你需要的伴随对象生成源代码，并在单独的构建步骤中编译它。

```
def generateCompanionObject(clazz: Class[_]) = {
     val className = clazz.getName.split("\\.").last
     val firstMethod = clazz.getMethods.head//for simplicity
     val methodName = firstMethod.getName
     val parametersClasses = firstMethod.getParameterTypes.map(_.getName).toSeq

     val objectDefinition = "object " + className + " {\n" +
         generateMethodDefinition(className, methodName, parametersClasses) +
         "\n}"

     objectDefinition
 }

 def generateMethodDefinition(className: String, methodName: String, parameterClasses: Seq[String]) = {
     val newMethodName: String = "   def invoke" + methodName.capitalize + "On"

     val parameterList: String = "(o:" + className + ", " + parameterClasses.zipWithIndex.map {
         case (argClassName, index) => "arg" + index + ": " + argClassName
     }.mkString(", ") + ")"

     val generateOldMethodCall: String = "o." + methodName + parameterClasses.zipWithIndex.map {
         case (argClassName, index) => "arg" + index
     }.mkString("(", ",", ")")

     newMethodName + parameterList + " = " + generateOldMethodCall
 } 
```

上课

```
class A {
   def foo(x: String, y: String) = x + y
} 
```

它会产生

```
object A {
   def invokeFooOn(o:A, arg0: java.lang.String, arg1: java.lang.String) = o.foo(arg0,arg1)
} 
```

# gcc - gnu arm 汇编器命令行宏因“.ifdef 标识符无效”而失败

> ID：12768306
> 
> 赞同：7
> 
> 时间：2012-10-07T11:13:24.303
> 
> 标签：gcc, assembly, gnu-assembler

我的工具链是最新版本的 arm-gcc。

我在汇编文件中有一段代码，必须有条件地包含/汇编。

```
.ifdef MACRO_FROM_CMDLINE
 Assembly instr1
 Assembly instr2
.endif 
```

封装代码是最近添加的。

我都试过了：

```
gcc -x assembler-with-cpp --defsym MACRO_FROM_CMDLINE=1 <along with other necessary options> 

gcc -x assembler-with-cpp -D MACRO_FROM_CMDLINE=1 <along with other necessary options> 
```

导致“ `-D`.ifdef 标识符无效”和“.endif 没有 .if”错误。

结果`--defsym`是“MACRO_FROM_CMDLINE=1：没有这样的文件或目录”、“无法识别的选项 --defsym”错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-07T18:39:56.003

二进制文件通过`gcc`依次调用许多其他程序来实际执行各个阶段的工作（编译、汇编、链接）来驱动编译过程。

当你说：

```
gcc -x assembler-with-cpp -D MACRO_FROM_CMDLINE=1 ... 
```

您要求它通过 C 预处理器运行源代码，然后通过汇编器运行结果。

C 预处理器步骤将变为：

```
.ifdef MACRO_FROM_CMDLINE 
```

进入：

```
.ifdef 1 
```

在将它传递给汇编器之前，它就无法理解它。这就是您收到“无效标识符”错误的原因。它还解释了为什么使用 C 预处理器可以`#ifdef`解决问题。

* * *

`--defsym`不起作用，因为它是汇编程序的一个选项，而不是`gcc`驱动程序。（`gcc`驱动程序确实理解并将*一些*选项传递给它调用的*一些*程序，但不是全部。）

但是，您*可以*使用

```
-Wa,option[,option...] 
```

语法，它告诉`gcc`驱动程序将这些选项传递给汇编器（作为空格分隔的选项列表）。

例如：

```
gcc -x assembler-with-cpp -Wa,--defsym,MACRO_FROM_CMDLINE=1 ... 
```

添加

```
--defsym MACRO_FROM_CMDLINE=1 
```

`as`到调用它时传递给的选项列表，`gcc`这就是使您的原始`.ifdef`示例工作的方法。

* * *

通过添加选项，您可以查看由 调用的各个程序`gcc`，以及它实际传递给它们的`-v`选项。

在这种情况下，您应该看到`cc1`使用标志（仅预处理）调用的名为（实际的 GCC C 编译器二进制文件）的东西`-E`来预处理临时文件的输入，然后`as`在临时文件上调用以组装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:17:30.807

奇怪，但事实证明我需要在汇编文件中使用 C 语法。

```
#ifdef MACRO
  Assembly Instruction
  Assembly Instruction
#endif 
```

并且必须使用 -D 选项传递宏。

# jquery - jQuery相互检查输入

> ID：12768307
> 
> 赞同：0
> 
> 时间：2012-10-07T11:13:25.973
> 
> 标签：jquery, html, css

我必须根据用户输入的电子邮件检查用户输入，以检查它们是否太相似，如果它们是我需要抛出错误。例如;

“用户名不能与电子邮件地址过于相似，例如，如果电子邮件地址是 charlie@hud.ac.uk，则用户名不能是 charlie。”

我怎么能这样做呢？

编辑：我想根据电子邮件地址的第一部分（@之前的部分）检查用户名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:17:04.467

```
var email, username;
if (username === email.split('@')[0]) {
  alert('failed');
} 
```

这会将用户名与电子邮件的用户名部分进行比较。

***编辑：*** 关键是您可以从电子邮件中获取用户名部分`email.split('@')[0]`，然后由您定义相似程度。

```
function is_similar (str1, str2) {
    // implement your similar logic here
    // return true or false
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:21:58.963

```
function checkUsernameAndEmail(){

    var email = document.getElementById("email").value;
    var user = document.getElementById("username").value;
    // check to see if the email contains the username in anypart
    if(email.split("@")[0].toLowerCase().indexOf(user.toLowerCase() ) > -1){
      alert("Email address cannot contain the username");
      return false;
    }

    return true;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T11:41:31.810

我想在这里扩展现有的答案。您说这是一项任务，但在许多应用程序中都可以看到此要求 - 这里的答案对于在生产中实现此功能的用户仍然有用。

首先要做的是定义你认为“相似”的东西。例如，大写/小写。是不是`bob`太相似了`BoB`？在我看来是这样。所以我们要做的第一件事就是将所有字符串转换为相同的大小写。在 JavaScript 中，你有[`toLowerCase()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLowerCase). 您可能还认为某些符号没有对字符串进行足够的更改，因此希望忽略它们。例如，`bob`与 非常相似`b.ob`。对于这种情况，您可能希望删除那些“无意义”的符号。使用 JavaScript，为此您可以使用[`replace()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace).

在实施条件之前，必须先定义法律。

最后要注意的是，您正在执行客户端验证。如果用户禁用 JavaScript 或更改页面上的代码，则可以轻松绕过在 JavaScript 中完成的任何验证。此类验证应**始终**在服务器上完成。您可以将客户端验证留在那里以改善用户体验，也可以不向服务器发送明显无效的请求。

# php - 标头在 livesite 上不起作用

> ID：12768310
> 
> 赞同：0
> 
> 时间：2012-10-07T11:13:43.347
> 
> 标签：php, mysql, header

我的标头在我的本地主机上工作，但不能在线工作。

```
<?php
require_once 'func/func.php';

if(isset($_POST['sub'])){

$user = trim(mysqli_real_escape_string($dbc,$_POST['username']));
$pass = mysqli_real_escape_string($dbc,$_POST['pass']);
$sql = "select * from register where matric = '$user' and passw ='$pass'";
$result = mysqli_query($dbc,$sql) or die(mysqli_error($dbc));

$num = mysqli_num_rows($result) or die(mysqli_error($dbc));

if($num == 1){

$_SESSION['user_id'] = $row['user_id'];
$_SESSION['name'] = $row['fname'].' '.$row['lname'];
$_SESSION['trader'] = $row['trader'];
$_SESSION['pic'] = $row['passport'];
$_SESSION['username'] = $row['username'];
error_reporting(E_ALL | E_WARNING | E_NOTICE);
       ini_set('display_errors', TRUE);

         flush();
       header("Location: home/home.php");
                    die('should have redirected by now');

   echo $pass;
     }else{
  echo "Invalid User Name or Password";

   }
}

  ?>
 <html><head>

 </head>
 <body>
  <form action="" method="post">
<table width="409" border="0" align="center" cellpadding="4" cellspacing="4">
 <tr>
<td width="166">User Name</td>
<td width="215">

    <input type="text" name="username" id="text1">

</tr>
 <tr>
<td>Password</td>
<td><p>

    <input type="password" name="pass" id="password1">

</tr>
  <tr>
<td colspan="2" align="center"><input name="sub" type="submit" value="Login" /></td>
</tr>
   </table>
   <? if(isset($msg)) echo $msg; ?> </form>

 </body></html> 
```

func 文件包含它在 localhost 上工作的会话和 mysqli 连接文件。上面有所有错误并没有显示错误。它的输出应该已经重定向了。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:55:57.083

您的重定向有效。问题是 URL 不正确。

试试这样：

```
header("Location: http://site.com/home/home.php"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:57:06.100

试试这个方法：

```
header("Location: ./home/home.php"); 
```

# ruby-on-rails - 在 Rails 3 中使用迁移设置测试数据库

> ID：12768311
> 
> 赞同：0
> 
> 时间：2012-10-07T11:13:47.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, rails-migrations

我有一些在我的迁移中创建触发器和函数的原始 sql 语句。它们不会在测试中调用。

如何使用正常迁移来设置测试数据库？为什么这不是默认方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:43:03.793

原因是测试数据库是从 schema.rb 文件恢复的。并且 Schema 转储不会创建过程、函数、fkeys 等。原因是 Rails 不鼓励使用它们。但是，您可以将架构转储格式更改为 sql。

```
config.active_record.schema_format = :sql 
```

请参阅以下线程[为什么 rake db:migrate 在 Rails 中不向模式文件添加函数？](https://stackoverflow.com/questions/952712/why-does-rake-dbmigrate-in-rails-not-add-functions-to-the-schema-file)

检查这篇文章以及[http://pivotallabs.com/users/jdean/blog/articles/1707-using-mysql-foreign-keys-procedures-and-triggers-with-rails](http://pivotallabs.com/users/jdean/blog/articles/1707-using-mysql-foreign-keys-procedures-and-triggers-with-rails)

# java - 如何在 Java 中表示字符串列表和列表？

> ID：12768320
> 
> 赞同：0
> 
> 时间：2012-10-07T11:14:57.710
> 
> 标签：java, list, data-structures

我有表格的数据

```
ith entry = string1, string2....fixed number N of strings, 
            (name1, name2,....variable number of strings) 
```

即它是一个列表（N个字符串和一个可变大小的列表）

我目前有`List<List<String>>`并且我正在考虑`N+1th`以不同的方式对待最后一个字符串......但是有没有更好的方法来表示这些数据？具体来说，我希望能够与 (name1, name2...) 作为列表而不是字符串进行交互

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:31:44.533

可以使用这样的包装器：

```
Class MyData
{
    private String[] fixedData;
    private List<String> variableData;
    public MyData(int fixedSizeN) {
         fixedData = new String[fixedSizeN];
         variableData = new ArrayList<String>();
    }
    //public get/set go here
}

List<MyData> comboData; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T11:26:04.380

在对象中思考，如果一个固定的字符串列表和一个可变的字符串列表代表您的问题域中的某些内容，则将两者包装在一个类中。这样，您可以增加封装。

# iphone - UITextView 复制选项未显示在顶级 iPhone 应用程序中？

> ID：12768325
> 
> 赞同：0
> 
> 时间：2012-10-07T11:15:40.600
> 
> 标签：iphone, ios, copy, uitextview, uimenucontroller

我在基于消息的 iPhone 应用程序中工作。我已添加`UITextView`以显示用户键入的消息。这个应用程序允许用户`copy the messages`。每当用户选择`bubbles the Copy option showing in middle of UITextView`. 如何在 TextView 的顶部显示复制选项？

![在此处输入图像描述](../Images/b452351c5236bea0f1093800290d0bef.png)

谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:18:07.190

Gopinath，这是内置的。您无法更改默认行为。一种选择可能是编写您自己的自定义 TextView，它会在顶部显示复制选项。解决方法可能是这样的：

> 只需让用户选择文本（禁用在 UITextView 中显示“复制”）您在气泡顶部添加一个按钮当用户选择文本并单击您的 UIButton“复制”时，然后以编程方式复制选择的内容你自己的方法。

# assembly - 为什么 lw 在 QtSpim 中返回“立即值对于字段来说太大：”？

> ID：12768329
> 
> 赞同：0
> 
> 时间：2012-10-07T11:16:15.403
> 
> 标签：assembly, spim

我在 64 位 Windows 7 上运行 QtSpim 9.1.7。在*Simulator* / *Settings* / *MIPS*下，我勾选了所有选项（“Bare Machine”、“Accept Pseudo Instructions”、“Enable Delayed Branches”、“Enabled Delayed Loads”、“启用映射 IO”、“加载异常处理程序”）。

如果我使用以下方式存储硬编码值，我可以运行基本代码以在 QtSpim 中添加值`ori`：`ori $t0,$0,4`现在我想从内存中加载和存储数据，但`lw`不工作。

```
.text
.globl main
main:
lw $t0,num1
.data
num1: .word 4 
```

当我*重新初始化并加载*上述文件时，我收到以下错误消息：“Immediate value is too large for field:”

如果我然后尝试单步执行代码，我会到达 [00400024] 行。越过那条线，我收到以下错误消息：“PC=0x00400024 发生异常”/“数据/堆栈读取中的错误地址：0x00000000”

作为参考，我的代码被解析为：

```
User Text Segment [00400000]..[00440000]
[00400000] 8fa40000  lw $4, 0($29)            ; 183: lw $a0 0($sp) # argc 
[00400004] 27a50004  addiu $5, $29, 4         ; 184: addiu $a1 $sp 4 # argv 
[00400008] 24a60004  addiu $6, $5, 4          ; 185: addiu $a2 $a1 4 # envp 
[0040000c] 00041080  sll $2, $4, 2            ; 186: sll $v0 $a0 2 
[00400010] 00c23021  addu $6, $6, $2          ; 187: addu $a2 $a2 $v0 
[00400014] 0c100009  jal 0x00400024 [main]    ; 188: jal main 
[00400018] 00000000  nop                      ; 189: nop 
[0040001c] 3402000a  ori $2, $0, 10           ; 191: li $v0 10 
[00400020] 0000000c  syscall                  ; 192: syscall # syscall 10 (exit) 
[00400024] 8c080000  lw $8, 0($0) [num1]      ; 4: lw $t0,num1 
```

我首先想到`0($0)`的肯定不是`num1`. 我的数据声明不正确吗？如果是这样，我做错了什么？

我不知道它是否相关，但我得到以下`la`和`li`命令的语法错误（当我试图找到替代方法时`lw`）：

*   `la $a0,num1`
*   `li $t0,4`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:25:10.163

这不是错误。模拟器以裸机模式运行，模拟裸机 MIPS。在这种模式下，加载指令只有一个 16 位的字段，所以它确实不能保存地址。在非裸模式下，spim 会生成一个包含两个指令的序列（lui, lw）来正确寻址数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:25:59.860

.data 应该先于一切

如下 ：

```
.data
num1: .word 4

.text
.globl main
main:
lw $t0,num1

li $v0, 10
syscall
.end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T20:00:07.707

这似乎是 QtSpim 中的一个[错误](http://sourceforge.net/p/spimsimulator/bugs/36/)。相同的代码适用于其他两个环境（QtSpim 的版本略有不同，所以我不确定它是 9.1.7 还是环境中的回归）......

**环境1：EE380 CGI SPIM**

可在[http://cgi.aggregate.org/cgi-bin/cgispim.cgi](http://cgi.aggregate.org/cgi-bin/cgispim.cgi)访问并运行 SPIM 6.3a。它运行代码而不返回错误并生成以下执行跟踪：

```
SPIM Version 6.3a of January 14, 2001
Copyright 1990-2000 by James R. Larus (larus@cs.wisc.edu).
All Rights Reserved.

[0x00400000]    0x8fa40000  lw $4, 0($29)                   ; 102: lw $a0, 0($sp) # argc
[0x00400004]    0x27a50004  addiu $5, $29, 4                ; 103: addiu $a1, $sp, 4 # argv
[0x00400008]    0x24a60004  addiu $6, $5, 4                 ; 104: addiu $a2, $a1, 4 # envp
[0x0040000c]    0x00041080  sll $2, $4, 2                   ; 105: sll $v0, $a0, 2 
[0x00400010]    0x00c23021  addu $6, $6, $2                 ; 106: addu $a2, $a2, $v0 
[0x00400014]    0x0c100008  jal 0x00400020 [main]           ; 107: jal main 
[0x00400020]    0x3c011001  lui $1, 4097 [num1]             ; 4: lw $t0,num1
[0x00400024]    0x8c280000  lw $8, 0($1) [num1] 
```

**环境2：Ubuntu**

相同的代码在 32 位 Ubuntu 11.10 上的 QtSpim 9.1.6 上执行没有错误，并生成以下内容：

```
User Text Segment [00400000]..[00440000]
[00400000] 8fa40000  lw $4, 0($29)            ; 183: lw $a0 0($sp) # argc 
[00400004] 27a50004  addiu $5, $29, 4         ; 184: addiu $a1 $sp 4 # argv 
[00400008] 24a60004  addiu $6, $5, 4          ; 185: addiu $a2 $a1 4 # envp 
[0040000c] 00041080  sll $2, $4, 2            ; 186: sll $v0 $a0 2 
[00400010] 00c23021  addu $6, $6, $2          ; 187: addu $a2 $a2 $v0 
[00400014] 0c100009  jal 0x00400024 [main]    ; 188: jal main 
[00400018] 00000000  nop                      ; 189: nop 
[0040001c] 3402000a  ori $2, $0, 10           ; 191: li $v0 10 
[00400020] 0000000c  syscall                  ; 192: syscall # syscall 10 (exit) 
[00400024] 3c011001  lui $1, 4097 [num1]      ; 4: lw $t0,num1 
[00400028] 8c280000  lw $8, 0($1) [num1] 
```

# php - 从 codeigniter 中的模型调用库

> ID：12768332
> 
> 赞同：0
> 
> 时间：2012-10-07T11:16:44.600
> 
> 标签：php, codeigniter, model, libraries, error-logging

我正在尝试从 codeigniter 中的模型调用库，但不想触发并且我真的不知道如何调试它，我一直在尝试使用 codeigniter 默认日志记录方法，但没有显示任何内容。我的代码如下所示。

```
class Model_products extends CI_Model{

    function __construct(){
        parent::__construct();
        $this->load->library('ApiClient');
        log_message('error', $this->load->library('ApiClient'));

}       
}

/application/libraries/ApiClient.php

libary final class ApiClient
{} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:22:36.083

您错过了行尾的分号`$this->load->library('ApiClient')`。会是这样吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:22:41.267

您不能命名库**ApiClient** - 类名应遵循 CI 命名约定（与[ucfirst()](http://php.net/ucfirst)相同），并且在 CI 中加载任何内容时，您需要使用小写命名加载它。

命名是关键。

你的文件应该被命名`Apiclient.php`（库文件名的第一个字母是大写的，模型、视图和控制器都是小写的文件命名）。

您的类定义也应该反映这一点：

```
class Apiclient
{
  ...
} 
```

并且在使用 CI 实例加载库时，需要以小写命名方式加载：

```
$this->load->library('apiclient'); 
```

# android - 无法读取短信并在 android 中接收短信时启动新服务

> ID：12768334
> 
> 赞同：0
> 
> 时间：2012-10-07T11:16:53.677
> 
> 标签：android, sms

我的应用程序在收到短信时读取传入消息并启动服务。当我将它安装在手机中时它无法正常工作

以下是代码

我的广播接收器文件

```
public class readsms extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

//       getting bundle

        Bundle getdata=intent.getExtras();
        System.out.println("i got msg first");
        if(getdata==null){
            return;
        }

        Object[] pdus=(Object[])getdata.get("pdus");
        for (int i = 0; i < pdus.length; i++) {
            SmsMessage message = SmsMessage.createFromPdu((byte[]) pdus[i]);
            String fromAddress = message.getOriginatingAddress();
            String fromDisplayName = fromAddress;
            System.out.println(message.getMessageBody().toString());
            Intent di=new Intent(context,MainActivity.class);
            di.putExtra("from", fromAddress);
            di.putExtra("msg", message.getMessageBody().toString());
            context.startService(di);

        }
    }

} 
```

我的服务文件

```
public class MainActivity extends Service{

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    public int onStartCommand(Intent intent,int flags,int startId){
        Bundle getdata=intent.getExtras();
        String msg=getdata.getString("msg");
        String from="from :"+getdata.getString("from")+"/n"+msg;
        String destination="phone number";
        SmsManager mysms=SmsManager.getDefault();
        mysms.sendTextMessage(destination, null,from , null, null);
        return startId;

    }
} 
```

我的清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.projectx"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.READ_SMS"/>
    <uses-permission android:name="android.permission.WRITE_SMS"/>
    <uses-permission android:name="android.permission.SEND_SMS"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <service android:name=".MainActivity">

        </service>

    </application>

</manifest> 
```

请指出我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:20:58.243

您必须已在 mainfest 文件中注册了 BroadCast Receiver 类。使用此代码：

```
<receiver android:name="readsms"/> 
```

在你的 mainfest 文件中。

# javascript - WordPress。在光标到达下一个选项卡之前下拉菜单消失。仅在登录时

> ID：12768335
> 
> 赞同：0
> 
> 时间：2012-10-07T11:17:01.567
> 
> 标签：javascript, css, wordpress, drop-down-menu, menu

在 Firefox 和 IE 中（不是 chrome）

当我登录时，我正在构建的网站上的主菜单出现问题。我将光标放在菜单选项卡上，以显示其下方的选项卡。我用光标开始向下选项卡，在进入下一个菜单选项卡之前，该选项卡将消失。

当我没有登录时，它绝对没问题。

在 Chrome 中很好，但在 Firefox 和 IE 中不行。

登录时网站为[http://www.jobsarchitecture.com ：](http://www.jobsarchitecture.com)

您可以通过以下方式登录：用户：测试密码：测试

单击“视频”菜单并尝试进入以下选项卡...

非常感谢这里的一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:44:58.573

您可以使用以下函数来停止事件冒泡：

```
GLOBAL.Event.stopPropagation = function(e){
    e = window.event || e;
    if(document.all){
        e.cancelBubble = true;
    }else{
        e.stopPropagation();
    }
} 
```

# jackrabbit - 是否可以通过 GUID 访问节点？

> ID：12768336
> 
> 赞同：2
> 
> 时间：2012-10-07T11:17:03.723
> 
> 标签：jackrabbit, aem, sling

是否可以通过 SLING 查询通过 GUID 访问整个节点？

我知道可以通过 GUID 进行搜索，但这意味着在进行搜索之后，我们必须执行其他查询才能获取节点。

我想获得一个只有一个查询的节点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T22:48:01.227

您可以使用 java.jcr.Session.getNodeByIdentifier 以编程方式通过标识符访问节点

[http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html#getNodeByIdentifier(java.lang.String](http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html#getNodeByIdentifier(java.lang.String) )

如果您希望能够通过 HTTP 请求访问它，请创建一个 servlet 来公开此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T12:16:44.703

您可以使用 XPATH 查询通过 UUID 获取节点，例如

```
/jcr:root//*[@jcr:uuid='b1e1d3c3-983c-33d6-811c-18d2a8824e03'] 
```

或者

```
node = Session.getNodeByIdentifier(String id); 
```

这里有一个很好的代码示例： [Jackrabbit Running Queries against UUID](https://stackoverflow.com/questions/4683817/jackrabbit-running-queries-against-uuid)

你也可以试试

```
propertyIterator = node.getReferences(); 
```

这似乎依赖于 mix:referenceable，而您的节点可能并非如此。
Javadoc：[http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Node.html#getReferences()](http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Node.html#getReferences()) 相关问题：[Jackrabbit - node.getReferences() 不返回任何内容](https://stackoverflow.com/questions/7474222/jackrabbit-node-getreferences-not-returning-anything)

# postgresql - 仅使用带有压缩参数的 pg_dump 可能导致备份损坏？

> ID：12768339
> 
> 赞同：5
> 
> 时间：2012-10-07T11:17:13.810
> 
> 标签：postgresql, backup, restore, pg, pg-dump

我使用此命令备份 200GB 数据库（postgres 9.1，win7 x64）：

```
pg_dump -Z 1 db_name > 备份
```

它创建了 16GB 的文件，我认为这很好，因为以前有效的备份（并且由扩展工具打包）具有相似的大小。现在，当我尝试使用 恢复到 PG9.2 时`pg_restore`，出现错误：

```
输入文件似乎不是有效的存档
```

与`pg_restore -Ft`：

```
[tar 归档器] 在 ▼ 中发现损坏的 tar 标头（预期为 13500752，com
放置 78268) 文件位置 512
```

Gzip 也显示它已损坏。当我在 Total Commander 中打开备份文件时，内部文件只有 1.8GB。当我在寻找解决方案时，应该使用`-Cf`参数来完成转储。

现在有什么格式的文件？它只是 tar 还是 gzip（winrar 显示 gzip）？有什么方法可以正确恢复它还是以某种方式损坏（转储时没有错误）？可能是由于 tar 或 gzip 的文件大小限制吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T19:57:27.867

您在“备份”中的输出只是压缩的普通 sql。您可以通过提示进行检查：

```
gzip -l backup 
```

不幸的是 pg_retore 不提供恢复**PLAIN SQL**的可能性，所以你只需要解压缩文件并使用`psql -f <FILE>`命令：

```
zcat backup > backup.sql
psql -f backup.sql 
```

无法`pg_dump -Fc`按照“Frank Heikens”的建议从 postgres 9.1 进行转储，因为转储格式在主要版本之间不兼容，例如 9.0 -> 9.1 -> 9.2 和“pg_restore”会在 9.2 上给你一个错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:31:12.410

您的转储是纯 SQL，它不是 tar 格式，就像您尝试在 pg_restore 中使用的那样。当您需要压缩格式并在 pg_restore 中使用此设置时，请使用 --format=custom 或 -Fc。检查[手册](http://www.postgresql.org/docs/current/static/app-pgdump.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-30T08:41:46.763

大多数情况下，此错误意味着您的还原操作使用了无效格式

来自 pg_dump 手册**（** pg_dump --help ）

```
-F, --format=c|d|t|p         output file format (custom, directory, tar,  
                             plain text (default)) 
```

这意味着如果您使用 pg_dump 不带选项**--format** / **-F**创建转储，您的转储将以纯文本格式创建

注意：纯文本格式无法使用**pg_restore**工具恢复。请改用**psql** < dump.sql。

例子：

```
# plain text export/import
pg_dump -Fp -d postgres://<db_user>:<db_password>@<db_host>:<db_port>/<db_name> > dump.sql
psql -d postgres://<target_db_user>:<target_db_password>@<target_db_host>:<target_db_port>/<target_db_name> -f dump.sql

# custom format 
pg_dump -Fc -d postgres://<db_user>:<db_password>@<db_host>:<db_port>/<db_name> > dump.sql.custom
pg_restore -Ft postgres://<target_db_user>:<target_db_password>@<target_db_host>:<target_db_port>/<target_db_name> dump.sql.custom

# tar format 
pg_dump -Ft -d postgres://<db_user>:<db_password>@<db_host>:<db_port>/<db_name> > dump.sql.tar
pg_restore -Ft postgres://<target_db_user>:<target_db_password>@<target_db_host>:<target_db_port>/<target_db_name> dump.sql.tar 
```

恢复格式与备份不匹配时，也会出现来自主题的错误。
例如，创建的转储将采用**自定义**格式，但用于恢复指定的**tar**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T10:40:09.730

这是一个旧线程，尽管我遇到了完全相同的问题并设法使用 fixgz 修复了有些损坏的转储：

简短的回答：在压缩转储上运行 fixgz [http://www.gzip.org/fixgz.zip 。](http://www.gzip.org/fixgz.zip)

```
fixgz.exe bad.gz fixed.gz 
```

长答案：因此，如果您将 pg_dump 与 --compresss 或 -Z 一起使用而没有指定自定义格式选项 (-Fc)，那么您实际得到的是 ASCII 模式而不是 BINARY 模式的压缩文件。

引用自[http://www.gzip.org/#faq1](http://www.gzip.org/#faq1)

> 如果您已经以 ASCII 模式传输文件并且您不再可以访问原始文件，您可以尝试使用程序 fixgz 删除传输插入的额外 CR（回车）字节。Windows 9x/NT/2000/ME/XP 二进制文件在这里。但是绝对不能保证这会真正修复您的文件。结论：永远不要以 ASCII 模式传输二进制文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-11T17:22:45.373

我在使用 PGAdmin III 恢复时遇到了这个问题。PGAdmin 4 不会出现此问题。

# php - PHP - Youtube API 验证错误

> ID：12768342
> 
> 赞同：0
> 
> 时间：2012-10-07T11:17:34.647
> 
> 标签：php, zend-framework, youtube-api

我使用[Youtube API](https://developers.google.com/youtube/2.0/developers_guide_php)创建了一个 Youtube 小型 Web 应用程序。该应用程序向我的客户发送消息，如果消息未成功发送，我会通过以下代码打印 Youtube 错误以了解问题出在哪里：

```
try {  // Send the message.
    $sentMessage = $yt->sendVideoMessage( $body, null, $videoId, $customerName );
} catch (Zend_Gdata_App_HttpException $e) {                 
    $errorReport .= "- YouTube Error: " . $e->getRawResponseBody() . "\n";
} 
```

有些消息发送正常，但有时会打印奇怪的 Youtube 错误，我不知道问题出在哪里。例如它打印：

> *   YouTube 错误：11 验证失败

这有时：

> *   YouTube 错误：9 禁止

**是否有参考这些错误编号的指南，以便我可以根据它们的含义修复我的代码？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:29:39.677

经过大量调查，我发现这两个错误是什么意思：

> YouTube 错误：11 验证失败

发生此错误是因为视频 ID 中缺少字符。它输入错误，因此如果 sendVideoMessage(...) 参数中有错误条目，似乎会发生此错误。

> YouTube 错误：9 禁止

发生此错误是因为我同时发送了太多消息，所以 Youtube 认为我在发送垃圾邮件。

这花了一些时间，但现在事情已经解决了:)

如果有人知道解释所有可能的 Youtube API 错误的指南，请分享它，以便每个人都可以从中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:47:29.480

查看此页面：
[https ://developers.google.com/youtube/2.0/developers_guide_protocol_error_responses](https://developers.google.com/youtube/2.0/developers_guide_protocol_error_responses)

# java - 如何在java中生成0到2^32-1之间的随机数

> ID：12768343
> 
> 赞同：4
> 
> 时间：2012-10-07T11:17:36.263
> 
> 标签：java, random, unsigned

如何`between 0 and 2^32-1`在java中生成随机数？我写这个链接：

```
long[]num = new long[size + 1];
Random random = new Random();
for (int i = 1; i < size + 1; i++) {
num[i] = (long)random.nextInt()+(long)(1<<31);
System.out.println(num[i]);
} 
```

但它打印

```
-1161730240
-1387884711
-3808952878
-3048911995
-2135413666 
```

我不知道为什么..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T11:21:35.853

如果你想要从 0 到 2^32-1，那么你应该使用`Random.nextLong() & 0xffffffffL`而不是`Random.nextInt()`.

Java 不支持`unsigned`类型，这意味着你`int`不能在你想要的范围内取值。为了解决这个问题，您使用 64 位的 a`long`并且可以在所需范围内取值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T11:25:56.030

您的问题是您尝试添加偏移量以避免负数。

```
(long)(1<<31) 
```

将 1 解释为 int，将其移动 31 位，使其成为最大的负 int，然后将其转换为 long（仍然为负）。

你要

```
(1L << 31) 
```

作为你的抵消。

# c - 将压缩行存储写入文本文件的标准格式？

> ID：12768347
> 
> 赞同：1
> 
> 时间：2012-10-07T11:18:00.357
> 
> 标签：c, sparse-matrix

我有一个以压缩行存储（CRS）格式存储的大型稀疏矩阵。这基本上是三个数组：一个包含值的数组、一个列索引数组和一个包含行指针的最终数组。例如[http://web.eecs.utk.edu/~dongarra/etemplates/node373.html](http://web.eecs.utk.edu/~dongarra/etemplates/node373.html)

我想将此信息写入文本 (.txt) 文件，该文件旨在使用**C**读取并放入三个数组中。我目前计划通过将 Value 数组中的所有条目写在一个用逗号分隔的长行中来做到这一点。例如 5.6,10,456,78.2,... 等。然后对其他两个数组执行相同操作。

我的**C**代码将结束读取第一行，将所有值放入标有“Value”的数组中。等等。

**问题**

这个对吗”？或者是否有将 CRS 数据放入文本文件的标准方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:58:40.140

没有我知道的标准格式。您决定了一种让您的生活变得轻松的格式。

首先，考虑一下，如果您想查看其中一个文本文件，您会立即被冗长的行所拖累。一些文本编辑器可能只是讨厌你。拆分线没有错。

其次，考虑在文件的开头写出每个数组中元素的数量（好吧，我想三个数组只有两个不同的数组长度）。这将让您预先分配您的数组。如果您手头有所有数组长度，则可以选择进行单个内存分配。

最后，考虑写出一些合理的标签名称。可以识别您的文件的某种标题是正确的格式，然后是表示每个数组的开头的东西。对于您的代码来说，检测文件问题是一件很理智的事情。它可能只是一个角色，但它是某种东西。

现在......称我为邋遢的老程序员，但我可能只是用二进制写了很多。特别是如果它是浮点数据，我不想处理当您将数字写为文本时获得的精度损失（或者当您以全精度编写它们时它们可以消耗的空间）。二进制文件易于编写和快速运行。如果您要在具有不同字节序的平台上使用它们，您只需要小心。

那是我的 2 美分价值。希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:47:03.910

如果您想坚持一些广泛使用的标准，请查看[Matrix Market](http://math.nist.gov/MatrixMarket/)。这是一个存储库，其中包含在各种工程和科学问题中出现的许多矩阵。您还可以找到软件库来保存和读取矩阵。

# wpf - 根据计算机的 dpi 设置使用不同的图像

> ID：12768350
> 
> 赞同：6
> 
> 时间：2012-10-07T11:18:17.327
> 
> 标签：wpf, image, dpi

我在我的应用程序中使用了 16x16 像素的图像，因此我可以在标准 dpi 设置为 96 时获得清晰的边缘并且不会自动调整大小。

当用户更改他们的 dpi 设置时，图像会被放大，并且由于源文件只有 16x16，它们看起来自然很糟糕。有没有一种方法可以为特定图像源提供多个图像，并且会自动选择最好的一个？例如，我提供尺寸为 16x16、20x20 和 24x24*像素*的图像，当图像尺寸为 16x16 *[wpf 单位]*时，我有一个完美匹配 96、120 和 144 dpi 的图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:32:31.853

我能想到的最好的方法是`image source dynamically`根据系统的 DPI 设置在运行时设置。在代码隐藏中，您可以动态设置 -

```
ImageViewer1.Source = new BitmapImage(new Uri(@"\\myserver\\folder1\\sample.png")); 
```

在您的班级收听此事件以获取有关计算机 dpi 设置更改的通知 - `Microsoft.Win32.SystemEvents.DisplaySettingsChanged`。它的详细信息可以在这里找到 -[系统事件](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.aspx "系统事件")

此外，您可以使用以下代码获取系统 dpi 值 -

```
float dpiX, dpiY;
Graphics graphics = this.CreateGraphics();
dpiX = graphics.DpiX;
dpiY = graphics.DpiY; 
```

将此逻辑移至属性并根据属性值动态设置图像源。

# .net - 在数据网格 wpf 上搜索

> ID：12768355
> 
> 赞同：1
> 
> 时间：2012-10-07T11:20:24.027
> 
> 标签：.net, wpf, data-binding, datagrid

我已经将所有数据绑定到我的数据网格中。现在我想执行搜索。

我想通了，我可以做 sql 连接来搜索。但我只想在我的数据网格上进行搜索。因为我的数据已经绑定到我的数据网格。

这是图片 ![在此处输入图像描述](../Images/4163b9b7e68a2fccdd5c0e60268688f1.png)

在顶部，我有一个文本框。如何使用文本框进行搜索/过滤？也许我可以输入“Bahan Baku”，它会搜索“Nama Categori”。或者我也可以输入“Sayur”，它会搜索“Keterangan 类别”。我输入的内容会影响我的数据网格。

有什么建议吗？谢谢。

**编辑**

这是我的代码。

```
public partial class MainWindow : Window
{
    //private ICollectionView MyData;
    //string SearchText = string.Empty;
    ObservableCollection<Category> _data = new ObservableCollection<Category>();
    public ObservableCollection<Category> data { get { return _data; } }

    public MainWindow()
    {
        InitializeComponent();
        showData();
    }

    private void showData()
    {
        OleDbConnection conn = null;
        OleDbCommand cmd = null;

        try
        {
            conn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=dbDemo1.accdb");
            cmd = new OleDbCommand("select categoryID, categoryDesc, categoryItem from t_category", conn);
            conn.Open();
            using (var reader = cmd.ExecuteReader())
            {
                while (reader.Read())
                {
                    data.Add(new Category
                        {
                            nCateogryID = int.Parse(reader[0].ToString()),
                            sCategoryDesc = reader[1].ToString(),
                            sCategoryItems = reader[2].ToString()
                        }
                    );
                }
            }
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message);
        }
        finally
        {
            conn.Close();
        }
    }
    private void textBox1_TextChanged(object sender, TextChangedEventArgs e)
        {
            TextBox t = sender as TextBox;
            SearchText = t.Text.ToString();
            MyData.Filter = FilterData;
        }

    private bool FilterData(object item)
    {
        var value = (Category)item;
        if (value == null || value.nCateogryID == null)
            return false;
        return value.sCategoryDesc.ToLower().StartsWith(SearchText.ToLower()) || value.sCategoryItems.ToLower().StartsWith(SearchText.ToLower());
        //return value.Book_Id.ToLower().StartsWith(SearchText.ToLower()) || value.Book_Name.ToLower().StartsWith(SearchText.ToLower()) || value.Author_Name.ToLower().ToString().StartsWith(SearchText.ToLower()) || value.Publisher_Name.ToLower().ToString().StartsWith(SearchText.ToLower().ToString()) || value.Book_Genre.ToLower().ToString().StartsWith(SearchText.ToLower().ToString()) || value.Language.ToLower().ToString().StartsWith(SearchText.ToLower().ToString()) || value.Book_EntryDate.ToLower().ToString().StartsWith(SearchText.ToLower().ToString());
    }
} 
```

这是我的班级类别，如下所示：

```
public class Category
{
    public int nCateogryID { get; set; } 
    public int nCategoryMaster { get; set; }
    public int nCategoryDetail { get; set; }

    public string sCategoryDesc { get; set; }
    public string sCategoryItems { get; set; }
} 
```

这是我的 xaml

```
<Window x:Class="SearchGrid.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="MainWindow" Height="350" Width="525">
<Grid>
    <DataGrid AutoGenerateColumns="False" Height="258" HorizontalAlignment="Left" Margin="12,0,0,12" Name="dataGrid1" VerticalAlignment="Bottom" Width="479">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding ncategoryID}" Header="No." IsReadOnly="True" Width="30" />
            <DataGridTextColumn Binding="{Binding sCategoryDesc}" Header="Nama Kategori" IsReadOnly="True" Width="160" />
            <DataGridTextColumn Binding="{Binding sCategoryItems}" Header="Keterangan Kategori" IsReadOnly="True" Width="247" />
        </DataGrid.Columns>
    </DataGrid>
    <TextBox Height="23" HorizontalAlignment="Left" Margin="12,12,0,0" Name="textBox1" VerticalAlignment="Top" Width="479" TextChanged="textBox1_TextChanged" />
</Grid>
</Window> 
```

我收到了这个错误：

> 你调用的对象是空的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T18:45:11.273

您必须在 xaml 中添加 TextChanged 事件，例如

```
<TextBox Text="" Width="115" Canvas.Left="210" Canvas.Top="37" Height="23" TextChanged="TextBox_TextChanged" /> 
```

在你的cs文件中你的TextChanged事件看起来像

```
 private ICollectionView MyData;
    string SearchText=string.Empty;
    private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
        {
          TextBox t= sender as TextBox;
          SearchText=t.Text.ToString();
          MyData.Filter = FilterData;
        }
    private bool FilterData(object item)
        {
        var value = (Book_Information)item;
        if (value == null || value.Book_Id == null)
            return false;
        return value.Book_Id.ToLower().StartsWith(SearchText.ToLower()) || value.Book_Name.ToLower().StartsWith(SearchText.ToLower()) || value.Author_Name.ToLower().ToString().StartsWith(SearchText.ToLower()) || value.Publisher_Name.ToLower().ToString().StartsWith(SearchText.ToLower().ToString()) || value.Book_Genre.ToLower().ToString().StartsWith(SearchText.ToLower().ToString()) || value.Language.ToLower().ToString().StartsWith(SearchText.ToLower().ToString()) || value.Book_EntryDate.ToLower().ToString().StartsWith(SearchText.ToLower().ToString());
        } 
```

MyData 包含您的整个数据集合，这里是示例

```
ViewBook=new ObservableCollection<Book_Information>();
dataGrid1.ItemsSource=ViewBook;
MyData=CollectionViewSource.GetDefaultView(ViewBook); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T11:35:37.080

您可以通过将 dataGrid 绑定到它来过滤它，`ICollectionView`它提供对源集合过滤的支持。可以在[此处](http://msdn.microsoft.com/en-us/library/ff407126.aspx "这里")找到详细信息，这也可能对您[有所帮助](https://stackoverflow.com/questions/5809895/how-to-set-a-filter-for-a-datagrid-itemsource-via-mvvm "帮助")。

# file - 开放系统调用的工作

> ID：12768357
> 
> 赞同：4
> 
> 时间：2012-10-07T11:20:36.760
> 
> 标签：file, file-io, operating-system, memory-mapped-files

我正在阅读有关内存映射文件的信息，来源说它比打开文件或读取文件的传统方法更快，例如分别打开系统调用和读取系统调用，而没有说明打开或读取系统调用的工作原理。

所以这是我的问题 **，开放系统调用是如何工作的？**

据我所知，它将文件加载到内存中，而通过使用映射文件，只有它们的地址将保存在内存中，并且在需要时可以将请求的页面带入内存。

我希望澄清我迄今为止的理解。

**编辑**

我之前写的上面的理解几乎是错误的，正确的解释请参考 Pawel 接受的答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T14:59:15.347

由于您没有提供任何细节，我假设您对类 Unix 系统的行为感兴趣。

实际上[`open()`](http://linux.die.net/man/2/open)，系统调用只创建一个文件描述符，然后可由[`mmap()`](http://linux.die.net/man/2/mmap)或使用[`read()`](http://linux.die.net/man/2/read)。

内存映射 I/O 和标准 I/O 都通过页面缓存内部访问磁盘上的文件，页面缓存是缓存文件的缓冲区，以减少 I/O 操作的数量。

标准 I/O 方法（使用[`write()`](http://linux.die.net/man/2/write)and `read()`）涉及执行系统调用，然后将数据从（或如果您正在写入）页面缓存复制到应用程序选择的缓冲区。除此之外，非顺序访问还需要另一个系统调用[`lseek()`](http://linux.die.net/man/2/lseek)。系统调用很昂贵，复制数据也是如此。

当一个文件被内存映射时，通常进程地址空间中的一个内存区域被直接映射到页面缓存，这样所有已经加载的数据的读取和写入都可以在没有任何额外延迟的情况下执行（没有系统调用，没有数据复制）。只有当应用程序尝试访问尚未加载的文件区域时，才会发生页面错误并且内核从磁盘加载所需的数据（整个页面）。

**编辑：** 我看到我还必须解释 memory [paging](http://en.wikipedia.org/wiki/Paging)。在大多数现代架构中，*物理内存*是一块真正的硬件，而*虚拟内存*则是为进程创建地址空间。内核决定如何将虚拟内存中的地址映射到物理内存中的地址。最小的单位是内存页（通常但不总是 4K）。它不必是 1:1 映射，例如所有虚拟内存页面都可以映射到相同的物理地址。

在内存映射的 I/O 部分应用程序地址空间和内核的页面缓存映射到同一个物理内存区域，因此程序可以直接访问页面缓存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-26T03:50:08.927

Pawel 很好地解释了读/写是如何执行的。让我解释一下最初的问题：fopen(3) 是如何工作的：当用户空间进程遇到 fopen（在 libc 或任何用户空间库中定义）时，它会将其转换为 open(2) 系统调用。首先，它从 fopen 获取参数，将它们与 open() 系统调用号一起写入特定于体系结构的寄存器。这个数字告诉内核系统调用用户空间程序想要运行。加载这些寄存器后，用户空间进程中断内核（通过`softirq`，传统上 x86 上的 INT 80H）并阻塞。

内核验证提供的参数和访问权限等，然后返回错误或调用实际的系统调用，`vfs_open()`在这种情况下。`vfs_open()`检查 fd 数组中的可用文件描述符并分配结构文件。访问文件的引用计数增加，fd 返回给用户程序。这样就完成了 open 以及大多数系统调用的工作。

`open()`与`read()`/一起`write()`，接下来的`close()`过程无疑比在缓冲区缓存中拥有内存映射文件要漫长得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T15:05:19.173

有关 open 和 read 如何在 Linux 上工作的清晰说明，您可以阅读[此](http://www.win.tue.nl/~aeb/linux/vfs/trail.html#toc2). 代码片段来自旧版本的内核，但理论仍然成立。

您仍然需要使用 open() 系统调用来获取有效的文件描述符，然后将其传递给 mmap()。至于为什么 mmaped IO 更快，这是因为没有从（到）用户空间到（从）内核空间缓冲区的数据副本，这就是读写系统调用发生的情况。

# jquery - 如何使 jquery-ui 按钮对于不同的浏览器具有相同的大小

> ID：12768358
> 
> 赞同：0
> 
> 时间：2012-10-07T11:20:45.097
> 
> 标签：jquery, jquery-ui, hyperlink, jquery-ui-button

我有如下按钮的 jquery ui 代码。我希望这一系列按钮适合相同的尺寸（810 像素）。它们在 Firefox 和 chrome 中显示为相同大小，但在 IE 中看起来更小。我尝试更改字体大小并具有固定宽度，但这并不能解决问题。谁知道怎么修它？谢谢你。

```
<script>
    $(function() {
        $( "#link" ).buttonset();

    });
</script>
<style>
#link{
   font-size: .74em !important;
   width: 810px;
   border: 1px solid #333;
}
</style>

<div id="link">
<a href="abc.php">ABC</a>
       <a href="efg.php" target="content">EFG</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:42:03.490

在您的页面上加载任何其他 css 文件之前使用 css 重置以标准化浏览器。您所看到的是不同的浏览器对字体系列和字体大小等各种属性使用不同的默认值。

jQuery UI css 系统主要使用`em`大小调整，因此字体大小、边距、填充等基于默认的字体大小

# ios - Xcode 4.5 空符号标识

> ID：12768365
> 
> 赞同：6
> 
> 时间：2012-10-07T11:21:24.463
> 
> 标签：ios, xcode, ios6, xcode4.5

随着 xcode 4.5 的更新，我遇到了一些奇怪的问题。当我尝试为测试人员构建 *.ipa 并选择身份来签署构建时，我会看到下一个：

![在此处输入图像描述](../Images/77e93cea597173445b7b309629f59d1b.png)

“AppName distr Store (from '(null)', for com.app.name)”的问题 具有“null”身份的应用程序构建不会通过无线方式安装在设备上。4.5之前没见过“null”，也不知道怎么办。请帮帮我。

PS：来自俄罗斯的爱。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:59:38.420

您是否尝试过从 xcode 中删除（删除）所有配置文件并重新下载它们？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-27T15:41:59.140

未在 Xcode 版本 4.6.3 (4H1503) 中重现错误 谢谢大家。

# android - 适用于 iPhone 应用的 CodeName One 和 OpenCV

> ID：12768367
> 
> 赞同：1
> 
> 时间：2012-10-07T11:21:38.130
> 
> 标签：android, iphone, opencv, codenameone

我正在查看：用于 iphone 应用程序开发的[CodeName One 。](http://www.codenameone.com/app-development-tools.html)

似乎相同的代码可用于 iPhone、android 和其他手机。我想知道是否可以使用**OpenCV**和这个 API 来为不同的平台（主要是 iPhone 和 Android）构建代码。如果有可能，那该怎么做？

另外，如果有人对开发 iPhone 应用程序的 API（最好是 Java）有任何更好的建议，请提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T12:08:14.327

我已经使用 CodeName One 将我的 Android 应用程序定位到其他平台，如 iOS、Windows 手机等。到目前为止，它已经取得了很好的效果！

关于 OpenCV，我建议您在 Android 中为 OpenCV 编写一个简单的 HelloWorld，并尝试将其定位在 iPhone 上。我不太确定结果，但值得一试。

CodeName One 为 Eclipse 和 Netbeans 提供了简单的[设置指南](http://www.codenameone.com/eclipse.html)，因此您只需安装并试一试！

如果在任何情况下遇到困难，您可以随时在[论坛](http://www.codenameone.com/discussion-forum.html)上发布问题。

# imagemagick - 我在哪里可以获得 MAMP 上 ImageMagick 的 libfreetype.6.dylib 16.0.0 版

> ID：12768368
> 
> 赞同：7
> 
> 时间：2012-10-07T11:21:42.350
> 
> 标签：imagemagick, mamp

在 MAMP 下运行 imagemagick 时，我收到错误消息：

```
command output :"dyld: Library not loaded: /opt/local/lib/libfreetype.6.dylib
Referenced from: /Applications/MAMP/bin/ImageMagick/ImageMagick-6.7.9/bin/convert
Reason: Incompatible library version: convert requires version 16.0.0 or later, but libfreetype.6.dylib provides version 15.0.0" 
```

我已经搜索了我能想到的所有地方，但找不到解决方案。我看到的一篇帖子建议在 envvars 中注释掉 DYLD_LIBRARY_PATH 但这没有任何区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T04:02:02.937

弄清楚了。我跑了：

```
$ locate libfreetype.6.dylib 
```

并发现该 dylib 有多个版本，包括 macports 安装 imagemagick 的 /opt/local/lib 中的一个版本。我将该版本复制到安装它的 MAMP 中的位置，它解决了这个问题。

```
$ cp /opt/local/lib/libfreetype.6.dylib /Applications/MAMP/Library/lib/ 
```

确保在复制之前备份 MAMP 版本，以防万一出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T08:40:35.560

我遇到过同样的问题。对我来说是这样的：

```
sudo port selfupdate
sudo port install ImageMagick

sudo pecl update-channels
sudo pecl install imagick 
```

然后我跑

```
find . -name "imagick.so" 
```

并使用 MAMP php.ini 中的给定路径。

最后，我注释掉了 /Applications/MAMP/Library/bin/envvars 中的 DYLD_LIBRARY_PATH 行

# linux - 为什么根目录总是存放在inode 2中？

> ID：12768371
> 
> 赞同：6
> 
> 时间：2012-10-07T11:22:08.863
> 
> 标签：linux, linux-kernel

我正在通过以下来源学习 Linux 文件系统：

```
http://linuxgazette.net/issue21/ext2.html
http://homepage.smc.edu/morgan_david/cs40/analyze-ext2.htm 
```

但是我对根目录有一个疑问：为什么它的 inode 编号总是**2**？为什么不是一个或另一个数字？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-07T12:57:13.050

第一个inode 编号为1。0 用作NULL 值，表示没有inode。Inode 1 用于跟踪磁盘上的任何坏块；它本质上是一个包含坏块的隐藏文件，因此它们不会被另一个文件使用。可以使用 记录坏块[`e2fsck -c`](https://man7.org/linux/man-pages/man8/e2fsck.8.html)。文件系统根目录是 inode 2。

特定 inode 编号的含义因文件系统而异。对于 ext4，您可以在 Ext4 Wiki [Ext4 磁盘布局页面](https://ext4.wiki.kernel.org/index.php/Ext4_Disk_Layout)上找到更多信息；特别参见“[特殊索引节点](https://ext4.wiki.kernel.org/index.php/Ext4_Disk_Layout#Special_inodes)”表。

# cocoa-touch - 快速将多个项目添加到 UICollectionView 失败

> ID：12768372
> 
> 赞同：5
> 
> 时间：2012-10-07T11:22:13.463
> 
> 标签：cocoa-touch, ios6, uicollectionview

我已经`UICollectionView`使用核心数据使用获取的结果控制器进行了设置。我`UIImagePickerController`用来将项目添加到`UICollectionView`. 现在，当我点击存储在设备上的一张照片时，它将被添加到我的托管对象上下文中，并将插入到`UICollectionView`.

现在，当我快速添加多个项目时，应用程序崩溃并出现以下错误：

```
2012-10-07 13:17:46.770 PhotoLibrary[2444:907] *** Assertion failure in -[UICollectionView _endItemAnimations], /SourceCache/UIKit/UIKit-2372/UICollectionView.m:2801 
```

似乎它无法处理添加项目，而前一个添加项目的动画尚未结束。当您非常快速地添加它们时，就会发生这种情况，但有些用户会这样做。

有没有一种好方法可以在另一个项目完成时等待并添加项目？用户应该能够“实时”添加它们，所以我不能一次运行所有更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:30:48.033

该错误仅在快速添加几个项目时发生。但真正的问题与动画无关。我正在创建用于将新项目存储在块中的托管对象，用于`ALAssetsLibrary`'s`assetForURL:resultBlock:`方法。

花了一段时间才弄清楚这是问题所在，托管对象是在单独的线程中创建的。事实证明，托管对象不能很好地处理。

现在将新项目的创建移到块之外，现在它可以正常工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:05:37.307

如果没有示例代码，我假设`- (void)reloadData`在将数据插入到`UICollectionView`. 此方法的文档明确指出您不应在插入/删除引起的动画中间调用此方法，因为插入/删除将自动调用动画代码。

其他一些值得注意的方法是`- (void)insertItemsAtIndexPath:(NSArray *)indexPaths`和`- (void)performBatchUpdates:(void (^)(void))updates completion:(void (^)(BOOL finished))completion`。我没有使用过批处理方法，但是我使用过多次插入方法并且效果很好。

# requirements - 用例和功能需求之间的联系

> ID：12768373
> 
> 赞同：1
> 
> 时间：2012-10-07T11:22:14.900
> 
> 标签：requirements, use-case

我有一个功能需求列表

1.  FR nr 1
2.  FR nr 2
3.  ...

并有一个从参与者的角度描述需求的用例列表。我的意思是`use case nr 1`描述`FR nr 1`等等..但是我需要在 中创建一个链接`use case`吗`FR`？问题是 FR 和用例位于 Wiki 的不同页面中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:26:25.213

用例源自功能需求。需求和用例之间没有必要保持 1-1 的相关性；实际上，在大多数情况下，单个用例将基于多个需求，并且一个需求可能出现在多个用例中。这样做的原因是，用例不仅描述了系统中的任何活动，而且描述了由外部源触发的高级活动。另一方面，功能需求通常描述内部或部分活动，并在用例内部产生一个功能块。

这不是必需的，但从文档的角度来看，拥有从用例到相关需求的链接可能会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:56:52.690

虽然不是绝对必要的，因为使用 wiki 很容易做到这一点，但我会说是的，你应该这样做。它将增强可追溯性。在用例图上，我将附上带有 FR 参考的附注，并在用例文档中使用标识符。

# jquery - jQuery 动画边框似乎不起作用

> ID：12768376
> 
> 赞同：1
> 
> 时间：2012-10-07T11:22:31.030
> 
> 标签：jquery, html, css, jquery-animate

jQuery Animate 边框在此代码中似乎效果不佳：http: [//jsbin.com/ewuyup/13/edit](http://jsbin.com/ewuyup/13/edit)

有没有人有任何想法来解决它？

我在 Animate 的 jQuery 网站上看到了这个。

> 不完全支持速记 CSS 属性（例如字体、背景、边框）。例如，如果要对渲染的边框宽度进行动画处理，则至少必须预先设置“auto”以外的边框样式和边框宽度。或者，如果你想动画字体大小，你会使用 fontSize 或 CSS 等效的 'font-size' 而不是简单的 'font'。

希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T11:33:06.810

我设法做到了：在css中设置边框样式和颜色，并`borderWidth:"2px",`像这样放入你的动画：

[http://jsbin.com/ewuyup/20/](http://jsbin.com/ewuyup/20/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T11:36:50.530

您不能为边框的颜色和样式设置动画（但是有用于动画颜色的插件），因此您将首先设置零宽度和正确的样式和颜色，然后使用`"border-width"`而不是为宽度设置动画`"border"`：

例子：

```
$(".message_box_red").css({
  "border": "0px solid blue"
}).animate({
  "border-width":"5px",
  "margin":"1px",
  "padding":"7px",
  "width":" 409px",
  "height":"20px"
},2000,function() 
```

# c# - 标点符号预期错误-c#

> ID：12768377
> 
> 赞同：-1
> 
> 时间：2012-10-07T11:22:35.587
> 
> 标签：c#, punctuation

我是 c# 的新手。我试着写基本的平均计算器。我得到 60 错误其中大多数

） 预期的

; 预期的

我检查过，但我认为一切都是正确的。我使用 Visual Studio 2010 会有问题吗？

```
using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    namespace WindowsFormsApplication3
    {

            public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            private void button1_Click(object sender, EventArgs e)
            {
                double a;
                a = ((Convert.ToInt16(textBox1.Text) * 0.4) + (Convert.ToInt16(textBox2.Text) * 0.6));
                if (a &gt;= 50 &amp; a &lt; 60 &amp; Convert.ToInt64(textBox2.Text) &gt;= 50)
                {
                    label4.Text = &quot;Ge&ccedil;ti&quot;;
                    label5.Text = &quot;CC&quot;;
                    textBox3.Text = a.ToString();
                }

                else
                {
                    label4.Text = &quot;KALDI&quot;;
                    label5.Text = &quot;FF&quot;;
                    textBox3.Text = a.ToString();            
                }

            }

                private void button2_Click_1(object sender, EventArgs e)
                {
                textBox1.Text = &quot;&quot;;
                textBox2.Text = &quot;&quot;;
                textBox3.Text = &quot;&quot;;
                label4.Text = &quot;Durum&quot;;
                label5.Text = &quot;Sonuc&quot;;
                }

        }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:27:54.137

代码中有 HTML 实体，必须将其转换回真实字符。

例如：

```
if (a &gt;= 50 &amp; a &lt; 60 &amp; Convert.ToInt64(textBox2.Text) &gt;= 50) 
```

应该：

```
if (a >= 50 & a < 60 & Convert.ToInt64(textBox2.Text) >= 50) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:29:03.643

```
private void button1_Click(object sender, EventArgs e)
{
    double a;
    a = ((Convert.ToInt16(textBox1.Text) * 0.4) + (Convert.ToInt16(textBox2.Text) * 0.6));
    if (a >= 50 && a < 60 && Convert.ToInt64(textBox2.Text) >= 50)
    {
        label4.Text = "Ge&ccedil;ti";
        label5.Text = "CC";
        textBox3.Text = a.ToString();
    }
    else
    {
        label4.Text = "KALDI";
        label5.Text = "FF";
        textBox3.Text = a.ToString();            
    }
}

private void button2_Click_1(object sender, EventArgs e)
{
    textBox1.Text = "";
    textBox2.Text = "";
    textBox3.Text = "";
    label4.Text = "Durum";
    label5.Text = "Sonuc";
} 
```

# joomla - 如何更新我自己的 joomla 1.5 组件？

> ID：12768379
> 
> 赞同：0
> 
> 时间：2012-10-07T11:22:39.693
> 
> 标签：joomla, joomla1.5, lifecycle, updates

如何更新我自己的 joomla 1.5 组件？

我和我的团队一起制作了 2 个组件，我们在我们的网站上使用它们。（在 joomla 1.5 上......我们暂时没有升级）

我们经常进行更新以修复错误，添加新功能等...

为了在生产服务器上更新，我们使用 FTP，并且我们更改了必须更改的文件........不用说，它有多糟糕......

我正在寻找 joomla 组件、插件 .... 以使我能够更快、更安全地更新我的组件/模板（我想，一个包含必须更改的 Zip 文件和一个回滚功能，它允许如果有问题恢复一个版本）

我发现的只是允许更新 joomla 核心的组件（例如到 2.5）。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:24:45.860

您可以使用[Akeeba Live Update](https://www.akeebabackup.com/products/akeeba-live-update.html)。它基本上是一个一键式更新系统，下载您上传到 FTP 或其他主机的更新 zip，然后解压缩它，更新扩展。第一次尝试时，可能会有点难以适应，并且可能需要一些尝试和错误，但它是最好的，我认为目前只存在于那里。Kunena 之类的人也使用这个系统。

# c++ - Linux：应用程序响应和 select()

> ID：12768382
> 
> 赞同：1
> 
> 时间：2012-10-07T11:22:49.533
> 
> 标签：c++, linux, multithreading, boost-asio, boost-thread

我有一个 C++ 控制台应用程序，它使用、 、`open() [O_RDWR | O_NONBLOCK]`和`write()`来处理设备文件。也可以调用取消当前操作。在任何给定时间，只有一个用户可以使用设备。`select()``read()``close()``ioctl()`

我需要提出具有 libsigc++ 信号的 C++ 类，当设备提供数据时会触发这些信号。

问题：当调用`select()`应用程序在等待数据时变得无响应。如何使其响应 - 通过调用`select()`工作线程？如果是这样 - 工作线程将如何与主线程通信？也许我应该调查一下`boost::asio`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T20:13:53.777

听起来好像您误解了选择；select（或 poll、epoll 等）的目的不是“等待数据”，而是“等待在一系列文件描述符或计时器上发生一个或多个事件，或发出信号”。

当您在选择通话中时，缺少什么“响应能力”？你说它是一个控制台应用程序，所以你不是在谈论 GUI 循环，所以大概它与 IO 相关？如果是这样，那么您需要重构您的选择，以便等待您正在谈论的数据是一个元素；也就是说，如果您正在使用 select，请构建您想要等待输入的所有文件/套接字描述符（并且 stdin 和 stdout 是文件描述符）的 FD_SET。

或者构建一个循环，周期性地调用“select”，对 /test/ 任何待处理的输入有一个短暂的超时，并且只有在 select 告诉你有东西要读时才尝试读取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:54:12.860

> > 如何使其响应 - 通过在工作线程中调用 select()

您可以使用[dup()](http://www.gnu.org/software/libc/manual/html_node/Duplicating-Descriptors.html)，这将复制您的文件描述符......因此您可以将整个读取操作移动到另一个线程中。因此，即使读取 [select()] 线程处于休眠状态，您的写入线程和处理线程也会响应。

libsigc++ 的信号发射开销很小，因此我认为您可以在读取线程本身内嵌入代码。插槽可以存在于不同的线程中，这是您接收信号的地方...

我认为 [Thrift](http://svn.apache.org/viewvc/thrift/trunk/lib/cpp/src/thrift/)源代码 [完全基于 boost] 可能会引起您的兴趣，尽管 thrift 不使用 libsigc++。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T20:16:44.240

听起来你有一个[生产者 - 消费者](http://en.wikipedia.org/wiki/Producer%E2%80%93consumer_problem)风格的问题。有多种方法可以解决这个问题，但现在大多数人倾向于使用基于[条件变量](http://en.wikipedia.org/wiki/Monitor_%28synchronization%29#Waiting_and_signaling)的方法（参见这个[基于 C++11 的示例](http://en.wikipedia.org/wiki/Producer%E2%80%93consumer_problem#Example_in_C.2B.2B)）。

还有许多设计模式在实施时可以帮助缓解并发问题，例如：

[半同步/半异步](http://www.cs.wustl.edu/~schmidt/PDF/HS-HA.pdf)

*   一种生产者-消费者样式模式，它在用事件填充队列的异步层和处理这些事件的同步层之间引入队列。

[领导者/追随者](http://www.cs.wustl.edu/~schmidt/PDF/lf.pdf)

*   多个线程轮流处理事件
*   相关讨论可[在此处](http://comments.gmane.org/gmane.comp.lib.boost.asio.user/2529)获得。

# json - 无法解析 Openstreetmap 返回的 json

> ID：12768391
> 
> 赞同：0
> 
> 时间：2012-10-07T11:24:03.337
> 
> 标签：json, parsing, openstreetmap

我无法解析这个json：

```
var _json =   [{"place_id":"18094048","licence":"Data \u00a9 OpenStreetMap contributors, ODbL 1.0\. http:\/\/www.openstreetmap.org\/copyright","osm_type":"node","osm_id":"1695627257","boundingbox":[34.549406280518,34.569410095215,135.45611022949,135.47612548828],"lat":"34.5594098","lon":"135.4661246","display_name":"Singapore Embassy, \u583a\u72ed\u5c71\u7dda (Sakai-Sayama line), Sakai, Senboku District, Kinki Region, Giappone","class":"amenity","type":"embassy"},

"place_id":"17954461","licence":"Data \u00a9 OpenStreetMap contributors, ODbL 1.0\. http:\/\/www.openstreetmap.org\/copyright","osm_type":"node","osm_id":"1695740584","boundingbox":

[35.647695770264,35.667699584961,139.72419189453,139.74420715332],"lat":"35.6576973","lon":"139.7341957","display_name":"Singapore Embassy, Gaien higashi dori, Roppongi, Minato, \u5317\u8db3\u7acb\u90e1, 1080074, Giappone","class":"amenity","type":"embassy"}] 
```

我正在尝试`JSON.parse(_json);` 它在控制台中返回：SyntaxError：JSON.parse：意外字符

```
console.log(JSON.parse(_json)); 
```

我需要纬度和经度值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T11:35:00.067

好吧，这不是一个 json 字符串

它只是一个带有对象的 JS 数组

您可以像这样简单地使用它：

```
for(var i = 0 ; i < _json.length ; i++ ){
   var jsonObject  = _json[i];

   // then just use jsonObject['lat'] , jsonObject['license'] .....etc
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T11:30:56.717

你 var`_json`不是[JSON](http://en.wikipedia.org/wiki/JSON)：它是一个标准的 javascript 数组，你可以在不解析的情况下使用。

如果您想要第一个纬度，只需执行

```
var lat = _json[0].lat; 
```

但我建议给出一个比 更好的名称`_json`，例如`places`这个数组包含地点。

```
var firstPlace = _json[0]; // firstPlace has properties named lat and lon 
```

# matlab - 如何使用 MATLAB 将声音文件转换为 .mif？

> ID：12768392
> 
> 赞同：1
> 
> 时间：2012-10-07T11:24:30.393
> 
> 标签：matlab, audio-processing

我想从例如 mp3 文件的声音信号中获得一个 mif 文件。我怎样才能使用 MATLAB 来做到这一点？

谢谢，BooMZ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:31:30.580

结果，我找不到任何将 MP3 文件转换为 mif 的解决方案。但我可以将 wav 文件转换为 mif。这是说明：首先，您必须将 wav 文件拖放到 MatLab。MatLab 将从 wav 文件中创建一个数组。最后，您必须将数据数组写入 mif 格式的文件。（你可以这样做`fprintf`）

# android - java.lang.NoClassDefFoundError: com.itextpdf.text.Document

> ID：12768395
> 
> 赞同：3
> 
> 时间：2012-10-07T11:24:53.540
> 
> 标签：android, itextpdf

我已将 .jar 文件添加到我现有的项目中，如[http://www.vogella.com/articles/Eclipse/article.html#classpath](http://www.vogella.com/articles/Eclipse/article.html#classpath)中所述。

当我尝试运行模拟器时，我最终得到“java.lang.NoClassDefFoundError: com.itextpdf.text.Document”</p>

我的 .classpath 文件：

```
<classpath>
        <classpathentry kind="src" path="src"/>
        <classpathentry kind="src" path="gen"/>
        <classpathentry kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"/>
        <classpathentry kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>
        <classpathentry kind="lib" path="lib/itext-pdfa-5.3.3-javadoc.jar"/>
        <classpathentry kind="lib" path="lib/itext-pdfa-5.3.3-sources.jar"/>
        <classpathentry kind="lib" path="lib/itext-pdfa-5.3.3.jar"/>
        <classpathentry kind="lib" path="lib/itext-xtra-5.3.3-javadoc.jar"/>
        <classpathentry kind="lib" path="lib/itext-xtra-5.3.3-sources.jar"/>
        <classpathentry kind="lib" path="lib/itext-xtra-5.3.3.jar"/>
        <classpathentry kind="lib" path="lib/itextpdf-5.3.3-javadoc.jar"/>
        <classpathentry kind="lib" path="lib/itextpdf-5.3.3-sources.jar"/>
        <classpathentry kind="lib" path="lib/itextpdf-5.3.3.jar"/>
        <classpathentry kind="output" path="bin/classes"/>
</classpath> 
```

MainActivity.java

```
package com.example.tmp;

import java.io.FileOutputStream;

import com.itextpdf.text.Document;
import com.itextpdf.text.pdf.PdfWriter;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

          String FILE = "/home/ronline/Desktop/FirstPdf.pdf";
        try {
            Document document=new Document();
              PdfWriter.getInstance(document, new FileOutputStream(FILE));
              document.open();
              document.close();
            } catch (Exception e) {
              e.printStackTrace();
            }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:56:07.890

由于未知原因，无法通过 Eclipse 接口将 jar 放入 Java 库。手动复制/过去到 libs 文件夹就可以了。感谢 Parth Doshi 的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:07:40.797

[你应该从这里](http://sourceforge.net/projects/itext/files/)下载 jar 然后尝试。

# php - 单个返回语句与多个？

> ID：12768399
> 
> 赞同：5
> 
> 时间：2012-10-07T11:25:50.643
> 
> 标签：php, optimization, return

我经常被告知我不应该使用多个返回点，而应该只使用一个：

以这个功能为例；

```
function data($item){
    switch($item){
        case 'one':
            return 1;
        case 'two':
            return 2;
        case 'three':
            return 3;
        case 'different_type':
            return 'Something Different';
        default:
            return false;
    }
} 
```

显然，更好的写法是；

```
function data($item){
    $value = false;
    switch($item){
        case 'one':
            $value = 1;
            break;
        case 'two':
            $value = 2;
            break;
        case 'three':
            $value = 3;
            break;
        case 'different_type':
            $value =  'Something Different';
            break;
        default:
            $value = false;
    }
    return $value;
} 
```

是否有任何理由**不是**一个优先于另一个的问题？

我想第二个让一些 IDE 有更好的机会来提示返回值？但是这里也有性能问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T11:34:52.060

> 是否有任何理由不是一个优先于另一个的问题？

有时，但这取决于具体的代码。

> 我想第二个让一些 IDE 有更好的机会来提示返回值？

不，通常情况并非如此。

> 但是这里也存在性能问题吗？

提前返回可以缩短代码中更长的路径，因此可以带来好处。

如今，一个好的编码指南通常不会严格控制这一点，在早期语言不那么灵活的时候，保持严格的方法可能是有意义的（函数的最后一行必须是单个返回命令）。

如今，众所周知，降低[循环复杂度](http://en.wikipedia.org/wiki/Cyclomatic_complexity)更为重要，这通常是提早返回的情况。但是，对此持保留态度，并不是说如果您早点返回，情况就会自然而然。

* * *

当您谈论代码时，第一个示例应该在我看来：

```
function data($item) {

    static $map = [
        'one'   => 1,
        'two'   => 2,
        'three' => 3,
        'different_type'
                => 'Something Different',
    ];

    # return @$map[$item] ?: false;
    return isset($map[$item])
        ? $map[$item] 
        : false
        ; 
} 
```

但这也会与您的示例背道而驰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T11:27:55.467

这只是为了可读性。IDE 会做得很好，它不会对性能造成太大影响，您应该担心它。只是具有多个返回点的代码通常更难阅读和调试。

但话又说回来，这也是一个品味问题，很大程度上取决于你的习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T11:32:18.687

这些天的编译器足够聪明，可以以有效的方式编译这种代码，并且可能这两个都转换为相同的指令集，我个人认为更容易理解，因为返回是在末尾功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T11:35:05.613

我更喜欢任何一天都有一个返回点的方法。这样做的原因是更容易理解代码。这可能看起来微不足道，但我相信我们都尝试过阅读别人的意大利面条代码。这使得更容易理解整个方法中发生的事情，尤其是在代码路径更难理解的更高级的情况下。我想说，多个返回点也更难调试。但是，对于非常简单的方法，我认为有两个返回点是可以的，但是对于更复杂的场景，我会尽量避免。

*关于性能，我认为在大多数情况下*差异很小*（尽管这取决于在返回点之后必须执行多少代码）。我认为具有更好可读性的优势几乎总是超过性能方面，因为有很多其他领域可以通过比这些小的调整更大的幅度来提高性能。例如，如果在返回点之后有数据库、Web 服务或 I/O 调用，那么对性能的影响会更大。在这种情况下，“提前”返回会显着提高性能，但您始终可以确保在给定场景中永远不会进行这些调用，从而避免多个返回点。但是，如果您真的想优化低级，那么您最终会得到更多带有单个返回点的指令。但正如我所说，*

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T11:29:24.187

第一种方法不应该存在性能问题，因为一旦您的函数返回某些内容，该函数中的其余行将不再执行。它应该比其他任何东西都更具可读性。

**编辑：** 事实上，第二次迭代在技术上应该使用更多的资源，因为它必须将值分配给变量，然后返回该变量，但这种差异简直可以忽略不计！*

# xslt - 如何将 xslt 1.0 升级到 xslt 2.0？

> ID：12768406
> 
> 赞同：3
> 
> 时间：2012-10-07T11:26:32.023
> 
> 标签：xslt, xslt-1.0, xslt-2.0

我是 xml 和 xslt 的新手。

我使用经典的 asp 进行网络编码。我为我的网页使用 Windows 平台。并在本地计算机 ID“localhost/mywebpage”中。

今天我尝试用 xslt 运行一个 xml 文件，但我得到了错误

```
 msxml3.dll error '80004005'

Keyword xsl:template may not contain xsl:for-each-group. 
```

下面是我的运行代码

**在xml中**

```
<Lakes>
  <Lake>
    <id>1</id>
    <Name>Caspian</Name>
    <Type>Natyral</Type>
  </Lake>
  <Lake>
    <id>2</id>
    <Name>Moreo</Name>
    <Type>Glacial</Type>
  </Lake>
  <Lake>
    <id>3</id>
    <Name>Sina</Name>
    <Type>Artificial</Type>
  </Lake>
</Lakes> 
```

**在 xslt (XSLT 2.0)**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:for-each-group select="Lakes/Lake" group-by="Type">
            <xsl:result-document href="file{position()}.xml">
                <Lakes>
                    <xsl:copy-of select="current-group()"/>
                </Lakes>
            </xsl:result-document>
        </xsl:for-each-group>
    </xsl:template>
</xsl:stylesheet> 
```

我是我的asp页面

```
<%
        'load xml
        set xml = server.createobject("microsoft.xmldom")
        xml.async = false
        xml.load(server.mappath("test.xml"))

        'load xsl
        set xsl = server.createobject("microsoft.xmldom")
        xsl.async = false
        xsl.load(server.mappath("test.xsl"))

        set xdm= server.createobject("msxml2.domdocument")
        xdm.async = false
        xdm.loadxml(xml.transformnode(xsl))
        xdm.save(server.mappath("test_r.xml"))

%> 
```

我需要将我的 xslt1.0 升级到 xslt2.0 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T11:37:47.397

您需要使用 XSLT 2.0 处理器；Microsoft 没有，因此如果您想使用 XSLT 2.0，您需要查看第三方选项，例如 AltovaXML [http://www.altova.com/altovaxml.html](http://www.altova.com/altovaxml.html)。它的 API 记录在[http://manual.altova.com/AltovaXML/altovaxmlcommunity/index.html?axcom_xslt2.htm](http://manual.altova.com/AltovaXML/altovaxmlcommunity/index.html?axcom_xslt2.htm)。据我所知，这是经典 ASP 的最佳选择，如果您迁移到 ASP.NET，那么 Saxon 9 或 XmlPrime 的 .NET 版本也可以使用 XSLT 2.0 处理器。

# android - 如何在Android中将字符串逐个字符转换？

> ID：12768408
> 
> 赞同：3
> 
> 时间：2012-10-07T11:26:41.343
> 
> 标签：android

我有 Edittext 字段，用户可以输入他们的名字。我想用字母来检查一个字母来了多少次。最好的方法是什么？

我尝试使用以下代码从字符串中获取每个字符，但发生错误？如果有人可以提供帮助，我将不胜感激。

```
name=(EditText)findViewById(gami.Numerology.R.id.inputUI);
String a=name.getText().toString();

for ( int i = 0; i < a.length(); i++ )

{  
           c = a.charAt(i);

            if (c=='s')
            {
            s=1; //like this for all characters
            }

         } 
```

我只是把它放在按钮的点击事件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:33:44.247

```
 //declare the original String object
    String strOrig = "Hello World";
    //declare the char array
    char[] stringArray;

//convert string into array using toCharArray() method of string class
stringArray = strOrig.toCharArray();

//display the array
for(int index=0; index < stringArray.length; index++)
//check of character appearance 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T11:39:15.753

您可以在 Java 中使用 hashmap 或某种字典。粗略的例子，因为我不知道如何在 Java 中使用 Hashmap：

```
HashMap<Character, Integer> counter = new HashMap<Character, Integer>();
for (Character c: name)
{
    counter.put(c, counter.get(c) == null ? 1 : counter.get(c)++);
} 
```

# c# - 脚本在统一中导致子对象上的奇怪缩放行为

> ID：12768410
> 
> 赞同：1
> 
> 时间：2012-10-07T11:27:08.530
> 
> 标签：c#, unity3d

我制作了一个小炮塔对象和一个在我的场景中移动的目标对象。

在炮塔的脚本中，我让它们瞄准物体。

```
using UnityEngine;
using System.Collections;

public class indivMover : MonoBehaviour 
{
    public GameObject t1;
    public GameObject target;

    // Update is called once per frame
    void Update () 
    {
        t1.transform.LookAt(target.transform);
    }
} 
```

这工作得很好，直到我将许多炮塔设置为一个更大的对象，这样我就可以将它们作为一个整体移动。现在，当它们指向远离起始位置时，它们都会变形。为什么会这样？

# c++ - yyparse() 未在 Bison/Flex C++ 项目中声明，仅适用于某些版本的 gcc/bison/flex

> ID：12768411
> 
> 赞同：4
> 
> 时间：2012-10-07T11:27:31.423
> 
> 标签：c++, bison, flex-lexer

首先，我对 Bison 和 Flex 很陌生。我知道这些工具是为在 C 中使用而设计的，我感觉我所有的问题都来自于在 C++ 中使用它们。我不确定我是否以正确的方式做到了。

该代码在我的计算机上编译得很好，但在我的大学服务器上却没有。我已将问题隔离到此处发布。

在我的大学：

```
$ (g++ --version; bison --version; flex --version)|grep '[0-9]\.'
g++ (Debian 4.4.5-8) 4.4.5
野牛 (GNU Bison) 2.4.1
弹性 2.5.35

```

在家里：

```
HOME $ (g++ --version; bison --version; flex --version)|grep '[0-9]\.'
g++ (GCC) 4.7.1 20120721（预发布）
野牛 (GNU Bison) 2.6.2
弹性 2.5.37

```

我使用以下命令进行编译： `bison -d parse.y && flex lex.l && g++ main.cpp lex.yy.c parse.tab.c -lfl`

正如我已经说过的，它在我的计算机上编译得很好（没有警告），但我在服务器上得到了这个：

```
main.cpp：在函数“int main()”中：
main.cpp:28：错误：未在此范围内声明“yyparse”

```

由于 SO 括号有问题，[我还上传了一个 tarball](http://diobla.info/code/parse.tgz)。

词汇表

```
%{
＃包括
#include "dict.hpp"
#include "parse.tab.h"
%}

%%

[0-9]+ yylval.num = atoi(yytext); 返回数字；
[az]+ yylval.id = dict.id(yytext); 返回标识；
[：空间：] ;

```

解析.y

```
%{
＃包括
#include "dict.hpp"
无效 yyerror (const char* e) {
    看跌期权（e）；
}
int yylex ();
%}

％联盟{
    单位标识；
    整数；    
}

%令牌ID；
%token NUM;

%%

S : 编号 S {
        dict.set($1, $2);
    }
|;

```

字典.hpp

```
#ifndef _DICT_HPP_
#define _DICT_HPP_
＃包括
＃包括

typedef std::pair dpair;
typedef 无符号 int uint；

类字典{
    std::vector 选项卡；
上市：
    uint id(char* s);
    无效集（uint i，int v）；
    无效打印（）；
};

外部字典字典；

#endif /* _DICT_HPP_ */

```

主文件

```
#include <vector>
#include <string>
#include <cstdio>
#include "dict.hpp"
#include "parse.tab.h"

Dict dict;

uint Dict::id (char* s) {
    for(uint i = 0; i < tab.size(); i++)
        if(tab[i].first == s)
            return i;
    tab.push_back(dpair(std::string(s), tab.size()));
    return tab.size()-1;
}

void Dict::set (uint i, int v) {
    tab[i].second = v;
}

void Dict::print () {
    for(uint i = 0; i < tab.size(); i++)
        printf("%20s = %d\n", tab[i].first.c_str(), tab[i].second);
}

int main ()
{
    yyparse();
    dict.print();
} 
```

题外话：[flex 不是 GNU 软件](http://www.gnu.org/software/flex/)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T11:42:48.763

你可以添加

```
 extern "C" int yyparse (void); 
```

在您的`main.cpp`文件中（也可能在 中`parser.y`）或一些常见的`#include`-d 头文件中。

你真的应该用它`g++ -Wall -g`来编译你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:48:28.073

也许这个问题会有所帮助：[yyparse() 编译期间的困难（g++、bison、flex）；](https://stackoverflow.com/questions/6431942/problem-during-the-compilation-g-bison-flex-with-yyparse) 我也遇到了 yyparse() 的问题。

# bash - Puppet init 脚本不创建 pid 文件？

> ID：12768419
> 
> 赞同：5
> 
> 时间：2012-10-07T11:28:47.400
> 
> 标签：bash, puppet, init.d, sysv

*   CentOS 5.4 版（最终版）
*   `puppet-server-2.7.19-1.el5`从 puppetlabs repo 安装。

`puppetmaster`已成功启动，但不会创建 pid 文件。`[ FAILED ]`这是停止时消息的原因：

```
/etc/init.d/puppetmaster stop
Stopping puppetmaster:                                     [FAILED] 
```

初始化脚本： http: [//fpaste.org/nsfI/](http://fpaste.org/nsfI/)

图书馆`/etc/rc.d/init.d/functions`： http: [//fpaste.org/ox5Q/](http://fpaste.org/ox5Q/)

这就是我在调试模式下运行时得到的结果：http: [//fpaste.org/DkoS/](http://fpaste.org/DkoS/)

我知道`echo`启动后手动将pid指向文件的方式，但是为什么`daemon`函数`--pidfile`不起作用？

`daemon $PUPPETMASTER $PUPPETMASTER_OPTS --masterport=${PUPPETMASTER_PORTS[$i]} --pidfile=/var/run/puppet/puppetmaster.${PUPPETMASTER_PORTS[$i]}.pid`

当然，Puppet master 以`puppet`用户身份运行：

```
ps -ef | grep [p]uppet
puppet   23418     1  0 18:13 ?        00:00:00 /usr/bin/ruby /usr/sbin/puppetmasterd 
```

`/var/run/puppet/`文件夹的所有者是`puppet`：

```
# ls -ld /var/run/puppet/
drwxr-xr-x 2 puppet puppet 4096 Sep 17 18:46 /var/run/puppet/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:04:51.670

由受控程序（在这种情况下`puppetmasterd`）而不是`daemon()`函数来创建 pidfile；`daemon()`依赖于此。

**确认**创建它的 pidfile 的位置`puppetmasterd`（它可能是`/var/run/puppet.pid`,`/var/lib/puppet/run/master.pid`等）。要找出答案，请检查`puppetmasterd`（如果是脚本）的内容，或者 kill `puppetmasterd`then `strace -f puppetmasterd 2>&1 | grep '\.pid'`。

相应地修改`pidfile`您的值`/etc/init.d/puppetmaster`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T01:30:04.310

所以，在我看来，这里可能有两种可能性：

1.  如果您尝试使用 daemon 命令的 --pidfile 选项，我相信您有语法问题。

    *   Red Hat 的 daemon 命令具有以下（无用）签名：`Usage: daemon [+/-nicelevel] {program}`. **不完全清楚的是，您在程序位置之后包含的任何内容都被视为传递给程序的选项，而不是传递给守护程序函数调用。**
    *   因此，在您的情况下，您将`--pidfile`参数传递给`$PUPPETMASTER`自身，而不是`daemon()`. 您可以使用以下方法解决此问题：`daemon --pidfile=/var/run/puppet/puppetmaster.${PUPPETMASTER_PORTS[$i]}.pid $PUPPETMASTER $PUPPETMASTER_OPTS --masterport=${PUPPETMASTER_PORTS[$i]}`
2.  这里的第二个选项是`$PUPPETMASTER`（或者更确切地说，它背后的程序）可能会自己守护进程，如果是这样，可能会负责创建自己的 .pid 文件。流程管理工具[Circus](https://circus.readthedocs.org/en/latest/for-ops/configuration/)就是以这种方式工作的。它可能是配置文件中的一个选项或由`$PUPPETMASTER`.

    *   我不是 Puppet 用户，因此无法在此处为您提供具体信息。但我会查看[Puppet 实验室文档](http://docs.puppetlabs.com/)以了解有关此选项的更多信息。
    *   重要的是要注意，如果 $PUPPETMASTER 自己在守护进程，那么`--pidfile`传递给的参数`daemon()`将无效。

好狩猎！

# ios - 从 mapView 中删除折线

> ID：12768420
> 
> 赞同：7
> 
> 时间：2012-10-07T11:28:55.063
> 
> 标签：ios, mkmapview, polyline

我已经阅读了很多关于它的帖子，但我仍然有问题。这是我在两点之间绘制折线的代码：

```
-(void) drawAline:(CLLocation*)newLocation
{
//drawing a line
CLLocationCoordinate2D coordinateArray[2];
coordinateArray[0] = CLLocationCoordinate2DMake(newLocation.coordinate.latitude, newLocation.coordinate.longitude);
coordinateArray[1] = CLLocationCoordinate2DMake(self.jerusalem.coordinate.latitude, self.jerusalem.coordinate.longitude);

self.routeLine = [MKPolyline polylineWithCoordinates:coordinateArray count:2];
[self.mapView setVisibleMapRect:[self.routeLine boundingMapRect]];
[self.mapView addOverlay:self.routeLine];

}

-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay
{
if(overlay == self.routeLine)
{
    if(nil == self.routeLineView)
    {
        self.routeLineView = [[MKPolylineView alloc] initWithPolyline:self.routeLine];
        self.routeLineView.fillColor = [UIColor blueColor];
        self.routeLineView.strokeColor = [UIColor blueColor];
        self.routeLineView.lineWidth = 5;
    }
    return self.routeLineView;
}

return nil; 
```

}

多数民众赞成在工作正常。问题是删除线。下一个代码不起作用：

```
 for (id<MKOverlay> overlayToRemove in self.mapView.overlays)
{
    if ([overlayToRemove isKindOfClass:[MKPolylineView class]])
    {
        [mapView removeOverlay:overlayToRemove];
    }
} 
```

下一个代码也不起作用：

```
 if (self.routeLine)
{
[self.mapView removeOverlay:self.routeLine];
    self.routeLineView = nil;
    self.routeLine = nil;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-07T13:57:42.097

在遍历地图视图`overlays`数组的代码中，这一行是问题所在：

```
if ([overlayToRemove isKindOfClass:[MKPolylineView class]]) 
```

地图视图的`overlays`数组包含类型`id<MKOverlay>`的对象（for 循环正确地声明`overlayToRemove`为这样）。

所以该`overlays`数组包含叠加层的*模型*对象，而不是*视图*。

该类`MKPolylineView`是覆盖*模型*的*视图*。`MKPolyline`

 *所以`if`条件应该是：

```
if ([overlayToRemove isKindOfClass:[MKPolyline class]]) 
```

请注意，这样的循环将从地图中删除*所有*折线。如果你想删除特定的多段线，你可以`title`在添加时设置每一条，然后在删除之前检查它。

直接检查和删除的第二段代码`self.routeLine`应该可以正常工作，只要`self.routeLine`不是`nil`，并且包含对当前地图上叠加层的有效引用。

如果地图上只有一个叠加层（一条折线），您也可以调用`removeOverlays`从地图中删除所有叠加层（无论它们是什么）：

```
[self.mapView removeOverlays:self.mapView.overlays]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T13:56:42.460

您的叠加`MKPolyline`层`MKPolylineView`是地图缩放或滚动时叠加层的显示方式，以便叠加层的数据显示在窗口中。地图视图的`overlays`数组包含将用于生成覆盖视图的数据。`overlays`数组中没有视图。因此，要使您的代码正常工作，请更改此行

```
if ([overlayToRemove isKindOfClass:[MKPolylineView class]]) 
```

至

```
if ([overlayToRemove isKindOfClass:[MKPolyline class]]) 
```

在你的第三个片段中，你会没事的*

# heroku - 托管在 Sun JDK 1.6 中编译的 Web 应用程序

> ID：12768428
> 
> 赞同：0
> 
> 时间：2012-10-07T11:30:02.813
> 
> 标签：heroku

我正在研究 Java/J2EE 托管选项。我环顾四周，发现了 AWS 等等，但 Heroku 似乎很适合我。特别是因为清晰度和文档。

但是通过他们的文档，我遇到了“先决条件”，它说：

```
> Your application must run on the OpenJDK version 6, or 7 (8 is also available in beta). 
```

这是否意味着我无法托管在 Sun JDK 1.6 中编译的 Web 应用程序？

使用：**Sun Java 1.6、JSF-2、Spring、Hibernate、MySQL**

我只想知道我的具有上述规格的网络应用程序是否可以托管在 Heroku 中。

谢谢， 阿克沙特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:26:57.260

OpenJDK 6 与 Sun JDK 1.6 兼容，所以你应该没问题。如果这对您不起作用，您可以将自己的 JDK 带到 Heroku。

# visual-c++ - 在 c++ WebBrowser 控件中显示 html5 内容

> ID：12768430
> 
> 赞同：1
> 
> 时间：2012-10-07T11:30:29.223
> 
> 标签：visual-c++, internet-explorer-9, webbrowser-control

我正在尝试在 c++ 应用程序中加载 html5（使用引导程序构建）页面，使用标准的 WebBrowser 控件，前几秒钟它看起来像在普通浏览器中，然后它切换到看起来像 ie8 模式。

FEATURE_BROWSER_EMULATION 设置正确，doctype 设置也正确。使用本机 ie9 浏览器，一切看起来都很好。

如何使其在 WebBrowser 组件中正确显示内容？

操作系统：Win7x32sp1、ie9、ms visual c++ 2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:02:41.140

要指示 webbrowser 控件将您的页面呈现为 HTML5，您需要在文件开头添加标记，如下所示：

```
<!doctype html>
<html>
<!-- rest of the page content -->
</html> 
```

# customization - ListView 使用 SimpleCursorAdapter 不可点击

> ID：12768434
> 
> 赞同：1
> 
> 时间：2012-10-07T11:30:47.307
> 
> 标签：customization, simplecursoradapter, clickable

我正在使用带有自定义布局文件的 SimpleCursorAdapter。当我尝试在 ListView 中填充此布局时，这些项目不可点击。我将字段的 android 属性放在布局文件中以供单击以尝试修复该问题，但它不起作用。

我认为可点击属性默认为“true”。当我使用“android.R.layout.simple_list_item_1”中的默认布局文件时，列表中的项目变为可点击的。我认为布局文件中的简单更改不应该干扰可点击属性，但这就是我所看到的。

此代码不起作用：

```
mSelection = mNotesAdapter.fetchAllNotes();    
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            R.layout.note_row, mSelection, new String[] { "title"}, 
new int[] { R.mostrador.title});    
    setListAdapter(adapter); 
```

此代码有效：

```
mSelection = mNotesAdapter.fetchAllNotes();    
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_list_item_1, mSelection, new String[] { "title"}, 
new int[] { R.mostrador.title});    
    setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:00:01.950

1）您的第一个代码将不起作用，因为`R.mostrador.title`不是布局中 TextView 的 id `android.R.layout.simple_list_item_1`。尝试将其替换为`android.R.id.text1`.

2）如果你想在你的ListView中选择一个项目，你应该改变所选项目的背景：

```
<ListView
    android:choiceMode="singleChoice"
    android:drawSelectorOnTop="false"
    android:listSelector="#cccccc" 
    .../> 
```

# javascript - 替换用户脚本中的 html 而不会破坏任何内容？

> ID：12768440
> 
> 赞同：0
> 
> 时间：2012-10-07T11:32:21.207
> 
> 标签：javascript, html, userscripts

以下是我的用户脚本。它不会发出警报，因为当我替换 html 时，我会以某种方式破坏它。

如何替换 div 或 span 中的常规文本，即 domain[dot]com，使其显示为 domain.com？好吧，下面的工作但会破坏运行后的代码和其他用户脚本。

```
$(function() {
    var html = $('body').html();
    var res=html.replace(/\[dot\]/g, ".");
    $('body').html(res);
    //doesnt call, however html is replaced
    alert('a'); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:59:18.517

替换页面中的文本，而不是替换整个 HTML。如果您获取整个 HTML 并将其放回原处，这将使其重新解析所有代码并将其放回最初加载时的状态，这意味着绑定到任何元素的任何事件都消失了。

使用递归函数查找文档中的文本节点并对每个节点中的文本进行替换：

```
function replaceText(node, replacer) {
  var n = node.childNodes;
  for (var i = 0; i < n.length; i++) {
    if (n[i].nodeType == 3) {
      n[i].nodeValue = replacer(n[i].nodeValue);
    } else {
      replaceText(n[i], replacer);
    }
  }
}

$(function(){

  replaceText(document.body, function(s){
    return s.replace(/\[dot\]/g, '.');
  });

}); 
```

演示：http: [//jsfiddle.net/Guffa/ex83P/](http://jsfiddle.net/Guffa/ex83P/)

As you see, there is no jQuery in the function, because jQuery only deals with elements, there are no methods to deal with text nodes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:44:46.153

Is this for a specific set of pages or do you plan on doing this across every page you encounter? If specific, try narrowing down your selectors significantly. This way you're not trying to process every span/div on the page (which is obv slow). Firebug should be able to help you.

# mysql - 无法使用实体管理器持久化方法写入数据库

> ID：12768442
> 
> 赞同：1
> 
> 时间：2012-10-07T11:32:51.407
> 
> 标签：mysql, jsf, jpa, netbeans, ejb

我正在使用 EJB JPA MySQL netbeans7.2 开发一个小型应用程序，因此我的应用程序有以下目标：获取名称及其 ID 列表并将其他名称添加到列表中。

我的课程是：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.rachid.entities;

import java.io.Serializable;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.validation.constraints.Size;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "employee")
@XmlRootElement
@NamedQueries({
@NamedQuery(name = "Employee.findAll", query = "SELECT e FROM Employee e"),
@NamedQuery(name = "Employee.findById", query = "SELECT e FROM Employee e WHERE  
e.id = :id"),
@NamedQuery(name = "Employee.findByName", query = "SELECT e FROM Employee e WHERE 
e.name = :name")})

public class Employee implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id")
    private Integer id;
    @Size(max = 20)
    @Column(name = "name")
    private String name;

    public Employee() {
    }

    public Employee(Integer id) {
        this.id = id;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Employee)) {
            return false;
        }
        Employee other = (Employee) object;
        if ((this.id == null && other.id != null) || (this.id != null &&     !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.rachid.entities.Employee[ id=" + id + " ]";
    }
} 
```

使用该实体的会话 bean 是：

```
package com.rachid.session;

import com.rachid.entities.Employee;
 import java.util.List;
import javax.ejb.LocalBean;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;

@Stateless
@LocalBean
public class EmployeeSessionBean {
@PersistenceContext(unitName = "EnterpriseApplication1-ejbPU")
private EntityManager em;

public List<Employee> getAllEmployees() {
    Query query = em.createNamedQuery("Employee.findAll");
    return query.getResultList();
}

// Add business logic below. (Right-click in editor and choose
// "Insert Code > Add Business Method")

public Employee updateEmployee(Employee parameter) {
    return em.merge(parameter);
}

public void addEmployee(Employee employee){
    em.persist(employee);

}

} 
```

托管 bean 是：

```
 package managedBeans;

 import com.rachid.entities.Employee;
 import com.rachid.session.EmployeeSessionBean;
 import java.io.Serializable;
 import java.util.ArrayList;
 import java.util.List;
 import javax.ejb.EJB;
 import javax.faces.bean.ViewScoped;
 import javax.inject.Named;

 @Named(value = "employeeManagedBean")
 @ViewScoped
 public class EmployeeManagedBean implements Serializable {

public EmployeeManagedBean() {
}

@EJB
private EmployeeSessionBean employeeBean;

private Employee employee;

private Employee newEmployee;

private List<Employee> employees;

public List<Employee> getEmployees(){
    employees = new ArrayList<Employee>();
    return employeeBean.getAllEmployees();
}

public void setEmployees(List<Employee> employees) {
    this.employees = employees;
}

public void add(){
    if(newEmployee!= null){
      employeeBean.addEmployee(newEmployee);
    }

}

public String update(){
    System.out.println("***UPDATE***");
    employee = employeeBean.updateEmployee(employee);
    return "Employees List";
}

public Employee getNewEmployee() {
    return newEmployee;
}

public void setNewEmployee(Employee newEmployee) {
    this.newEmployee = newEmployee;
}

} 
```

不幸的是，当我在 jsf 页面中调用 addEmployee 方法时，没有任何内容写入数据库。我担心容器处理的事务管理；也就是说，更新和插入是由容器管理的，它可能不会立即写入数据库，所以我用 @TransationalAttribute(TransactionalAttributeType.REQUIRED) 注释了 addEmployee 方法（在 EJB 中），但结果仍然相同。

我的代码或我对问题上下文的理解是否缺少任何内容？

（请注意，我是 EJB 的初学者 :)）

以下是 jsf 页面（一个显示列表的索引页面和另一个用于向列表添加新元素的页面）：

index.xhtml 文件：

```
 <?xml version='1.0' encoding='UTF-8' ?>
        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core">
        <h:head>
        <title>Facelet Title</title>
        </h:head>
        <h:body>
         Hello from Facelets
         <f:view>
          <h:form>
            <h1><h:outputText value="List"/></h1>
            <h:dataTable value="#{employeeManagedBean.employees}" var="item">
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Id"/>
                    </f:facet>
                    <h:outputText value="#{item.id}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Name"/>
                    </f:facet>
                    <h:outputText value="#{item.name}"/>
                </h:column>
            </h:dataTable>
        </h:form>
    </f:view>

    <h:form>
        <h:commandButton value="nouveau" action="ajouter.xhtml" type="submit" />
    </h:form>

</h:body> 
```

ajouter.xhtml 文件：

```
 <?xml version='1.0' encoding='UTF-8' ?>
   <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  
    /TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core">

<h:body>
    <f:view>
        <h:form>
            <h1><h:outputText value="Create/Edit"/></h1>
            <h:panelGrid columns="2">
                <h:outputLabel value="Id:" for="id" />
                <h:inputText id="id" value="#{employeeManagedBean.newEmployee.id}" 
                   title="Id" 
                     required="true" requiredMessage="The Id field is required."/>

                <h:outputLabel value="Name:" for="name" />
                <h:inputText id="name" value="#{employeeManagedBean.newEmployee.name}" 
                 title="Name" />
            </h:panelGrid>
        </h:form>
    </f:view>

    <h:form>
        <h:commandButton value="ajouter" action="index.xhtml" type="submit" 
                         actionListener="#{employeeManagedBean.add()}" />
    </h:form>
</h:body> 
```

# apache - Apache中的虚拟主机

> ID：12768446
> 
> 赞同：0
> 
> 时间：2012-10-07T11:33:37.507
> 
> 标签：apache

您好，我的项目的所有文档根位置是：

C:\xampp\htdocs\Warrington\public_html

我已经更新了我的主机文件
C:\Windows\System32\drivers\etc\hosts

添加行
127.0.0.1 warrington.dev.com

然后我添加到 C:\xampp\apache\conf\extra\httpd-vhosts

```
<VirtualHost *:80>  
    ServerAdmin matthew@warrington.com  
    DocumentRoot "C:/xampp/htdocs/Warrington/public_html"  
    ServerName warrington.dev.com  
    ServerAlias www.warrington.dev.com  
     ErrorLog "C:/xampp/htdocs/Warrington/public_html/error_log"  
</VirtualHost> 
```

然后到 C:\xampp\apache\conf\httpd

```
Alias /public_html "C:/xampp/htdocs/Warrington/public_html"  
<Directory "C:/xampp/htdocs/Warrington/public_html">  
    AllowOverride All  
    Order allow,deny   
    Allow from all  
</Directory> 
```

但是，当我重新启动 apache 并转到 www.warrington.dev.com 时，除了这个对不起，找不到网站 www.warrington.dev.com 之外，日志中没有错误。

设置虚拟主机时我缺少的任何想法

我添加到主机文件更新 httpd 和 httpd-vhosts 重新启动 apache 并没有喜悦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T05:40:49.370

www.warrington.dev.com 与 warrington.dev.com 不同，两者都需要在您的 hosts 文件中有一个 IP 地址条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-17T17:42:36.827

现在的浏览器可能禁用了 .dev 扩展名，并且可能需要通过 mydomain.test 的有效 SSL 如果您有 WINDOWS（以下对我在 CHROME DID NOT WORK FOR FIREFOX 上有效）您可以尝试以下方法为每个域创建 SSL 文件. 1\. 到C:\xampp\apache\crt（如果没有这个文件夹就创建crt）

2.  C:\xampp\apache\crt 在 crt 文件夹中创建以下 2 个文件：[cert.conf](https://gist.github.com/bocasoftware/70c8fdcf7e4c038f85ffdeb9aac49b2a)和[make-cert.bat](https://gist.github.com/bocasoftware/7fddde29c5cdc94ca5cea939aa935c48)（按照链接复制代码）

3.  在 cert.conf 中编辑 {{DOMAIN}} 并将其替换为您的域名示例：mydomain.test 并保存文件（**删除**您不需要的大括号）。

4.  双击 make-cert.bat 并在命令提示符下输入 mydomain.test （与您在 cert.conf 文件中使用的名称相同），您只需按 enter 并在下一个提示中输入它真的没关系。

5.  您现在将看到创建的 site.test 文件夹。在该文件夹中，我们将拥有 server.crt 和 server.key。这是 SSL 证书。

6.  双击 server.crt 将其安装在 Windows 上，以便 Windows 可以信任它。（单击安装证书）并选择本地计算机作为存储位置。

7.  选择“将所有证书放入以下存储”并单击浏览并选择受信任的根证书颁发机构。

8.  单击下一步并完成。现在此证书已在 Windows 中安装并受信任。接下来是如何在 XAMPP 中使用这个证书。

9.  以管理员身份打开记事本。编辑 C:\Windows\System32\drivers\etc\hosts （该文件没有分机）在新行中添加：

127.0.0.1 mydomain.test

10.  我们需要为这个域启用 SSL 并让 XAMPP 知道我们存储 SSL 证书的位置。我们需要编辑 C:\xampp\apache\conf\extra\httpd-xampp.conf 并在底部添加这段代码：

    [![在此处输入图像描述](../Images/5ea931a288f22294da7d6296d20bcc12.png)](https://i.stack.imgur.com/iggLj.jpg)

11.  最后但同样重要的是，您必须在 Xampp 控制面板中重新启动 Apache 服务器（将其关闭然后重新打开）然后清除浏览器的缓存，然后重新启动浏览器。在浏览器中输入 mydomain.test 它应该按照我们在 C:\xampp\apache\conf\extra\httpd-xampp.conf 中输入的内容指定您的项目索引文件

# sql - 选择行并按 id 分组并排序 n 最新行（按日期）

> ID：12768448
> 
> 赞同：1
> 
> 时间：2012-10-07T11:33:44.717
> 
> 标签：sql, oracle, group-by, aggregation, top-n

我有以下一组由选择返回的数据：

```
date          code     
23/01/2012    AA123
24/01/2012    AA123
29/01/2012    AA123
06/07/2012    AA123
17/02/2012    BB123
20/02/2012    BB123
04/06/2012    BB123 
```

选择给出每个代码的所有数据（按代码排序）。我只想返回每个代码的最新 2 个日期的行。要返回的数据如下：

```
date          code     
23/01/2012    AA123
24/01/2012    AA123
17/02/2012    BB123
20/02/2012    BB123 
```

我如何达到预期的效果？我试过用

```
select date, code
from table
where x,y,z
and rownum < 2 
order by code desc; 
```

但它只返回前 2 行 -

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T11:39:31.500

```
select
  date,
  code
from
    (select 
      date, 
      code,
      dense_rank() over (partition by code order by date) as rank
    from 
      table
    where 
      x,y,z)
where
  rank <= 2
order by 
  code desc; 
```

代替`dense_rank`，您也可以使用`rank`或`row_number`。它们之间存在细微差别，因此一个可能比另一个更适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:43:02.843

你也许可以用这个。我没有测试。

```
select date,code from table A where (select Count(*) from table B where A.code=B.code AND A.date > B.date ) < 2 
```

# android - 如何从 android 应用程序连接 facebook 和 twitter

> ID：12768456
> 
> 赞同：1
> 
> 时间：2012-10-07T11:35:06.643
> 
> 标签：android

我有连接 facebook 和 twitter 以共享我的应用程序信息的应用程序。我需要帮助来获取 facebook 和 twitter 网络的 API 密钥。我不知道如何为我的 android 应用程序获取该密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:11:31.077

对于 Twitter，请尝试使用 [http://twitter4j.org/en/index.html](http://twitter4j.org/en/index.html) 它有文档、示例等供您浏览。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T11:38:11.157

对于 facebook 连接，使用以下链接可能会对您有所帮助。

[https://developers.facebook.com/docs/mobile/android/build/](https://developers.facebook.com/docs/mobile/android/build/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T06:25:34.353

对于android中的facebook连接示例

[http://www.codeproject.com/Tips/457153/How-to-integrate-Facebook-Twitter-Linkedin-in-Andr](http://www.codeproject.com/Tips/457153/How-to-integrate-Facebook-Twitter-Linkedin-in-Andr)

# matlab - 如何处理MATLAB中的递归循环？

> ID：12768461
> 
> 赞同：1
> 
> 时间：2012-10-07T11:35:43.537
> 
> 标签：matlab

我正在尝试计算`x1^i * x2^j * x3^k * ......`

到目前为止，这是我的代码：

```
for l = 1:N
f = 1;
for i = 0:2
    for j = 0:2-i
        for k = 0:2-j
            for m = 0:2-k
                g(l,f) = x1(l)^i*x2(l)^j*x3(l)^k*x4(l)^m;
                f = f+1;
            end
        end
    end
end
end 
```

我怎样才能更容易或没有循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:39:48.050

我手头没有 MATLAB，但我要做的是制作一个向量 X = [x1, x2, ..., xn] 的基数和一个向量 P = [i, j, k, ..., z] 的幂，然后计算 prod(power(X, P))。

power() 执行逐元素幂函数，prod 取向量中每个元素的乘积。

# iphone - 即使在按下广告后 Admob 应用程序状态仍为红色（Iphone）

> ID：12768470
> 
> 赞同：0
> 
> 时间：2012-10-07T11:37:47.490
> 
> 标签：iphone, admob, ads

我已将 Admob 广告添加到我的 Iphone 应用程序中。该应用程序位于 AppStore 中，并且广告显示在我的应用程序中。我试过按广告（我知道其他人也按），但是，Admob 网站中的状态仍然是红色的。（在我的 Android 应用程序中，它确实是绿色的）。

有什么想法为什么？我应该以某种方式激活它吗？

谢谢， 因巴尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:08:57.523

好吧，我想我想通了——我认为 Android 和 Iphone 的广告代码是相同的，但事实证明它们不是。我将 Iphone 密钥复制到应用程序并重新提交到 AppStore。我希望这能解决问题

# java - selection sort method Java

> ID：12768471
> 
> 赞同：0
> 
> 时间：2012-10-07T11:38:05.743
> 
> 标签：java, arrays, bluej

I am not sure what this line exactly means. Could anyone kindly explain what "comma" in (a, n) does exactly, please ? Also what is the difference between (a, n) and (a, minPos, n)?

```
 * Sorts an array by the "selection sort" method.
 * Find the position of the smallest element in the array,
 * swap it with the next unsorted element
 *
 * @param  a   the array to sort
 */
public static void sort(int[] a)
{
    for (int n = 0; n < a.length - 1; n++)
    {
        int minPos = minimumPosition(a, n);

        if (minPos != n)
        {
            swap(a, minPos, n);
        }
    }

public static int minimumPosition(int[] a, int from)
{
    int minPos = from;      
    for (int i = from + 1; i < a.length; i++)
    {
        if (a[i] < a[minPos])
        {
            minPos = i;
        }
    }
    return minPos;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:41:19.853

`(a,n)` means `a` and `n` are arguments to the method call `minimumPosition(int[] a, int from)` similar is the meaning of `(a, minPos, n)` I explained from a basic view point hope this is what you wanted to know

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T11:49:15.237

By using (a,n) in

```
 minimumPosition(a, n); 
```

You are passing value of a and n to method

```
 public static int minimumPosition(int[] a, int from) 
```

.a will be passed to the first argument of method minimumPosition and value of n will be passed to second argument

# objective-c - 有没有办法手动或以编程方式在 ipad 上的相册中选择/删除所有/多个图像？

> ID：12768473
> 
> 赞同：0
> 
> 时间：2012-10-07T11:38:18.380
> 
> 标签：objective-c, ios, ipad, photo

有没有办法手动或以编程方式在 ipad 上的相册中选择所有/多个图像？

其次，有没有办法从 ipad 上的相册中删除所有/多个图像？手动或编程

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:46:35.743

> 有没有办法手动或以编程方式在 ipad 上的相册中选择所有/多个图像？

是的，您可以使用[AssetsLibrary 框架](http://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/AssetsLibraryFramework/_index.html#//apple_ref/doc/uid/TP40009730)来查找库中的所有照片。

> 其次，有没有办法从 ipad 上的相册中删除所有/多个图像？手动或编程

否 AssetsLibrary 框架不允许从相册中删除资产（照片和视频）。

# c# - 使用 C# 将字符串替换为 XML 中的日期

> ID：12768474
> 
> 赞同：2
> 
> 时间：2012-10-07T11:38:37.867
> 
> 标签：c#, xml

我是 C# 编程和 XML 的新手。我想用日期（我将从日期选择器中选择）更改字符串（以 @ 开头并以 ' 结尾）请查看下面的 XML 文件

```
<steps>
  <step1>drop table emp1 purge</step1> 
  <step2>create table emp1 as select e1.first_name ,e1.last_name ,e1.phone_number ,e1.salary     ,e1.hire_date from employees e1 where e1.hire_date between '@m_start_date' to '@m_end_date' group by e1.first_name ,e1.last_name ,e1.phone_number ,e1.salary ,e1.hire_date</step2> 
  <step3>select * from emp1</step3> 
</steps> 
```

在上面的 Xml 代码中，我想将 @m_start_date 更改为 '01-sep-2012' 并将 @m_end_date 更改为 '30-sep-2012' 最重要的一点是字符串 @m_start_date 和 @m_end_date 没有修复它我在其他中的更改xml 文件（即它可能是 @wk_start_dte 和 wk_end_dte）所以我需要一个 C# 中的逻辑，我们可以在其中找到一个以 @ 开头并以 ' 结尾的字符串，因此我们可以用日期替换这个字符串。

预期的结果应该是这样的

```
<steps>
  <step1>drop table emp1 purge</step1> 
  <step2>create table emp1 as select e1.first_name ,e1.last_name ,e1.phone_number ,e1.salary     ,e1.hire_date from employees e1 where e1.hire_date between '01-sep-2012' to '30-sep-2012' group by e1.first_name ,e1.last_name ,e1.phone_number ,e1.salary ,e1.hire_date</step2> 
  <step3>select * from emp1</step3> 
</steps> 
```

你能帮我在C#中得到这个逻辑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:12:43.673

假设您的 XML 在名为 test 的字符串中：

```
test = System.Text.RegularExpressions
             .Regex.Replace(test, "'[^']*start[^']*'", "'01-sep-2012'");

test = System.Text.RegularExpressions
             .Regex.Replace(test, "'[^']*end[^']*'", "'30-sep-2012'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T05:28:00.653

除了 Ivan 关于文本替换的回答之外，您可能需要执行以下操作才能找到节点

```
XmlDocument xDoc = new XmlDocument();
xDoc.Load("yourXml.XML");

XmlNode nodetoChange = xDoc.DocumentElement.SelectSingleNode("step2");

string xmlValue = nodetoChange.InnerText;

//Now apply Ivan's logic to replace text as you wish so that xmlValue new text
//then continue to save xml as shown below.

nodetoChange.InnterText = xmlValue;

xDoc.Save(); //In case you need to save it on hard-disk.
xDoc = null; 
```

希望有帮助，谢谢 Milind

# python - python __new__ 方法如何返回字符串或 unicode 对象而不是类对象

> ID：12768476
> 
> 赞同：1
> 
> 时间：2012-10-07T11:39:01.407
> 
> 标签：python, object

如何`string`使用 Python`__new__`方法创建一个新对象，以便字符串对象也应该具有类属性。

例如，我在 Maya 中对此进行了测试：

```
class A(object):
    def __new__(str, *args, **kwargs):
        return super(A, str).__new__(str)

    def __init__(self, obj):         
        self.obj =str(obj)

    def hai(self):
        print 'hai new obj. you are not string object. you are only cls object'

objA =A('object01')

objA.hai() 
```

> **结果**：'hai new obj. 你不是字符串对象。你只是 cls 对象'

```
objA 
```

> **结果**：< **main** .A object at 0x22799710>

我已经用 (PyMel) 的 PyNode 类进行了相同的测试

```
objB =PyNode('object01')
objB 
```

> **结果**：nt.Transform(u'object01')

但是 PyNode 对象给出了一个 unicode 或 string 对象。这意味着`objB`可以直接用作字符串或unicode，但`objA`不能那样使用

我怎样才能得到类似`objB`输出的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T11:44:17.423

利用

```
class A(str) 
```

创建`A`一个子类`str`：

```
class A(str):
    def __new__(cls, *args, **kwargs):
        return super(A, cls).__new__(cls, *args, **kwargs)

    def hai(self):
        print('hai new obj. you are not string object. you are only cls object')

objA =A('object01')

objA.hai()
assert isinstance(objA, str) 
```

# javascript - url.replace 用多个替换？

> ID：12768477
> 
> 赞同：1
> 
> 时间：2012-10-07T11:39:08.243
> 
> 标签：javascript, jquery

我目前有以下内容来删除空格并用连字符替换它们。如何用连字符和点替换空格并将其保留在同一个变量中？

```
url = url.replace(/\s/g, '-'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T11:42:47.160

`url = url.replace(/\s/g, '-').replace(/\./g, '');`可能会这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T11:43:55.980

我用这个：

```
// This little gadget does replace for all not just first occurence like the native javascript function.
String.prototype.replaceAll = function(strTarget, strSubString){
  var strText = this;
  var intIndexOfMatch = strText.indexOf(strTarget);
  while (intIndexOfMatch != -1){
    strText = strText.replace(strTarget, strSubString);
    intIndexOfMatch = strText.indexOf(strTarget);
  }
  return(strText);
} 
```

# android - 如何在布局xml android中制作页眉和粘性页脚

> ID：12768480
> 
> 赞同：0
> 
> 时间：2012-10-07T11:39:16.150
> 
> 标签：android, android-layout, header, sticky-footer

我试图使用相对布局，但标题变成了文本前面。所以一切都朝着错误的方向发展。我的应用程序屏幕如下所示： ![图片](../Images/2833bdfc5798a6e48e4f91bd2073823d.png)

我还想添加页脚，但每次尝试都会失败。我很确定我的 xml 布局中的所有宽度和高度都可以。

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/item1"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight=".25"
            android:height="30dip"
            android:text="@string/item1" />

        <TextView
            android:id="@+id/item2"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight=".25"
            android:height="30dip"
            android:text="@string/item2" />

        <TextView
            android:id="@+id/item3"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight=".25"
            android:height="30dip"
            android:text="@string/item3" />

        <TextView
            android:id="@+id/item4"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight=".25"
            android:height="30dip"
            android:text="@string/item4" />
    </LinearLayout>

    <!-- List Divider -->

    <View
        android:layout_width="fill_parent"
        android:layout_height="1dip"
        android:background="?android:attr/listDivider" />

    <!-- ListView (grid_items) -->

    <LinearLayout
        android:id="@+id/layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ListView
            android:id="@+id/listview"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >
         </ListView>

    </LinearLayout>

</LinearLayout> 
```

请给我任何建议。我认为相对布局会是个好主意，但我对此还不太了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:11:01.263

1/ 对'main'使用RelativeLayout。

2/ 将属性 android:layout_alignParentTop="true" 添加到 'header'。

3/ 删除带有 id 'layout' 的 LinearLayout，它不是必需的。

4/ 将您的页脚添加到 XML 的末尾。指定其 id 时，使用@id 而不是@+id。给它一个属性 android:layout_alignParentBottom="true"。

5/ 将以下属性添加到 ListView：

```
android:layout_below="@id/header"
android:layout_above="@+id/the_id_you_give_the_footer" 
```

# c++ - 在 Google Native Client 中使用 C++ 库

> ID：12768483
> 
> 赞同：0
> 
> 时间：2012-10-07T11:39:33.433
> 
> 标签：c++, google-nativeclient

我对 Native Client 完全陌生，不幸的是，我对“make”、编译等也很缺乏经验，所以我希望你能给我一些关于如何解决我的问题的基本信息。

所以我想要完成的是编译一个 C++ 库以便在 NaCl 应用程序中使用它。

首先，我的应用程序基于 Pepper 提供的示例，我只是使用附加的“make.bat”进行编译。

然后我下载了库的源代码，包含像'config'和'src'这样的文件夹，所以首先我必须调用'configure'、'make'、'make install'。但是我想让库用那个'make.bat'编译，所以我想我必须将库的复杂配置/Makefile脚本附加到我的NaCl应用程序的Makefile中？
怎么可能呢？
我在哪里可以找到有用的信息和/或帮助？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:03:41.713

您可以查看[nacl ports](https://code.google.com/p/naclports/)项目，了解如何将库移植到 NaCl。NaCl 端口在 Linux 平台上效果最好，所以你最好有一个虚拟机或者直接在它上面工作。

移植库还有一个技巧。人们围绕编译器和链接器创建包装脚本。这些包装脚本调用 nacl 编译器和链接器，但它们还创建一个 shell 脚本，该脚本使用 sel_ldr 调用生成的 NaCl 可执行文件。返回此脚本而不是可执行文件（这是仅限 Linux 的技巧）。这种方式 configure 和 make 可以执行 NaCl 代码并且不会怀疑任何事情。因此可以使用正常的配置/制作过程，我们只需为这些包装脚本设置编译器和链接器。

由于您可能不打算自己开发库，因此最好编译一次，然后在您的 makefile 中使用它。添加`-l`带有库名称的`-L`选项和带有库目录路径的选项。您可以`GLIBC_LDFLAGS`在示例 makefile 中为这些选项使用变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:59:07.457

您知道可以使用 Visual Studio 来开发 NaCl 应用程序吗？

[http://mainroach.blogspot.com/2012/10/official-nacl-vs2010-add-in-available.html](http://mainroach.blogspot.com/2012/10/official-nacl-vs2010-add-in-available.html)

# objective-c - iOS：从 valueForKeyPath 获取值

> ID：12768487
> 
> 赞同：0
> 
> 时间：2012-10-07T11:40:14.190
> 
> 标签：objective-c, ios, xcode, ios5

我正在使用 IBAForms 为我的项目创建一个简单的表单，除了从 de 字段中获取值之外，我几乎完成了所有工作。我有这个代码：

```
 NSLog(@"SUBMIT");
id values = [[self formDataSource] modelValueForKeyPath:@"diabetePickListItem"];
for (id key in values){
    id values = [values objectForKey:key];

    NSString *keyString = (NSString *)key;
    NSLog(@"%@",keyString);
    NSString *valueString = (NSString *)values;
    NSLog(@"%@",valueString);
}

NSLog(@"diabetes %@", values); 
```

它在控制台中给了我这个输出：

```
2012-10-07 07:02:37.145 BigBlueTest[64483:10403] SUBMIT
2012-10-07 07:02:37.147 BigBlueTest[64483:10403] Yes
2012-10-07 07:02:37.148 BigBlueTest[64483:10403] (null)
2012-10-07 07:02:37.150 BigBlueTest[64483:10403] diabetes {(
Yes
)} 
```

我不明白的是如何从 modelValueForKeyPath 方法返回的值中获取密钥。我只想在不进行快速枚举的情况下获得“是”或“否”的值。我真的不知道我在这段代码中缺少什么。任何帮助将不胜感激。提前致谢。

**编辑：**

问题是，当我尝试使用 objectAtIndex 时，它给了我 -[__NSCFSet objectAtIndex:]: unrecognized selector sent to instance 错误。我正在处理的应用程序包含一个收集简单信息的表格，如果我完全填写表格并打印我得到这个输出的值的内容：

```
NSLog(@"%@",_formValues);

2012-10-08 11:27:48.524 BigBlueTest[17285:10403] {
    activityPickListItem = "{(\n    Running/jogging\n)}";
    bloodAfter = 60;
    bloodBefore = 58;
    diabetePickListItem = "{(\n    Yes\n)}";
    durationPickListItem = "{(\n    10 or less\n)}";
    intensityPickListItem = "{(\n    Moderate\n)}";
    lowGlucoseSyntom = "{(\n    No\n)}";
    pickInsulinUse = "{(\n    Yes\n)}";
    pickMeasureUnit = "{(\n    mmol/L\n)}";
    recentMealPickListItem = "{(\n    30 minutes ago\n)}";
} 
```

如果我使用 valueForKeypath，那么我会得到这种格式的值 {(value)}。我还没有想出一种方法来从中获取字符串值。从 NSDictionary 和 NSArray 尝试的方法不成功。感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:32:02.587

我不是Objective C的老手，但值不应该是一个数组吗？而且这个问题似乎与类型转换语句“ `(NSString *)values`”有关，这看起来真的很不常见而且有点错误。我认为你应该`NSString`用不同的方法转换值，因为它似乎返回`NULL`. 也许你可以尝试类似的东西 `NSString *valueString = [NSString stringWithString:[values objectAtIndex:yourIndex]`（或使用`NSRange`更多对象）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:59:29.700

我对 IBAForms 不熟悉，但看起来值给了你一个集合。我建议您在行 id 值之后设置一个断点......并查看返回值的内容。有时上下文相关的工具提示在 XCode 中不起作用。在这种情况下，您可以`po values`在调试窗口中输入。这应该让您更好地了解您正在处理的内容。

# git - Git致命：克隆JSONKit.git时远程端挂断

> ID：12768490
> 
> 赞同：1
> 
> 时间：2012-10-07T11:40:29.393
> 
> 标签：git, github, git-clone, jsonkit

**我想要的是**

我想从 Github克隆[JSONKit 存储库。](https://github.com/johnezang/JSONKit)

**问题**

```
 % git clone git://github.com/johnezang/JSONKit.git                                                                                                                            
    Cloning into JSONKit...
    fatal: The remote end hung up unexpectedly 
```

**我试过的**

*   克隆另一个只读存储库

    ```
    git clone git://github.com/kgn/KGNoise.git 
    ```

例如，完美运行。

**其他详情**

我的 git 版本是 1.7.5.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:12:39.233

尝试使用 https github 地址：

```
git clone https://github.com/johnezang/JSONKit.git 
```

如果情况正确，则 git 地址应该可以工作，除非它因（10 月 5 日至 6 日）的副作用而失败：

> 由于负载过重的文件服务器对，一小部分 git 存储库不可用。

[OP John Gallagher](https://stackoverflow.com/users/60131/john-gallagher) [确认](https://stackoverflow.com/questions/12768490/git-fatal-the-remote-end-hung-up-when-cloning-jsonkit-git/12776921#comment17290729_12776921)这是该事件的副作用，因此，作为一般规则，当 GitHub 存储库主机提供商显示：

```
fatal: The remote end hung up unexpectedly 
```

这可能是由他们的基础设施中的事件引起的。
（如果没有，那么只有这样回购本身可能有问题）

# php - Facebook 访问令牌提前过期

> ID：12768491
> 
> 赞同：3
> 
> 时间：2012-10-07T11:40:31.723
> 
> 标签：php, facebook, facebook-authentication

我最近应 Facebook 10 月 1 日的重大变更要求禁用了 offline_access，并重新授权了所有在 10 月 1 日突然终止的链接服务。根据 Facebook 的调试页面，我收到的所有访问令牌都显示“从不”的到期日期，并且它们在几天内完美运行。

然而，在过去几天的某个随机时间点，有些似乎已经在没有警告的情况下停产。我尝试使用调试工具（https://developers.facebook.com/tools/debug），它只是说它无法识别令牌（解析 URL 时出错/解析输入 URL 时出错，没有数据被抓取。）它没有表示问题，例如更改密码或类似问题。

我知道，如果没有延期，代币通常会发行 2 小时，但这些会持续好几天。令牌不是要持续 60 天而不刷新吗？

或者我是否需要使用我目前拥有的有效密钥每天开始刷新它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:14:36.977

当您（重新）授权应用程序时，令牌仅持续几个小时，您必须进行令牌交换以使其持续 60 天。

但是 Facebook 确实会随机杀死令牌……我自己的“用户更改密码”消息已经过期了——而我肯定没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:46:54.987

这几天随便用了一些点，有些好像已经无预警停产了。它并不表示诸如更改密码或类似问题之类的问题。这将起作用并且令牌起作用

# c# - 和 Linq 中的运算符并使用 linq 选择不同的值

> ID：12768492
> 
> 赞同：0
> 
> 时间：2012-10-07T11:41:18.363
> 
> 标签：c#, xml, linq, c#-4.0, combobox

我是.net 的新手。我有一个表单，其中有两个组合框`cbProduct`和`cbBrandName`一个标签`lblPrice`。

我正在尝试实现以下代码，但它显示蓝色涂鸦`&&`。（错误：*运算符 '&&' 不能应用于 'lambda 表达式' 和 'lambda 表达式' 类型的操作数*）

我尝试了以下代码：（*不工作*）

```
lblPrice.Text = string.Empty;
        lblPrice.Text = doc.Descendants("items"
            ).Where((x => x.Element("productname"
                ).Value.Equals(cbProduct.SelectedItem.ToString())) && /*blue scribbles to '&&'*/
                (y => y.Element("brandname").Value.Equals(cbBrandName.SelectedItem.ToString()
                ))).Select(k => k.Element("price"
                    ).Value).ToString(); 
```

我的另一个问题是我想让选定的值变得`cbProduct`不同。以下代码采用所有值而不是不同的值：

```
cbProduct.Items.AddRange(doc.Descendants("items"
            ).Select(x => x.Element("productname").Value
            ).ToArray<string>());//adds all products           
        cbProduct.SelectedIndex = 0; 
```

给出任何一个答案都可以

请帮助我
提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:19:58.577

看起来您正在将 2 个 lambdas 传递给 Where 函数并尝试将它们逻辑和 (&&) 在一起。你不能那样做。&& 必须出现在 Where lambda 中。或者您可以将 2 个 Where 函数链接在一起。像这样的东西：

```
 lblPrice.Text = doc.Descendants("items")
                        .Where(x => x.Element("productname").Value.Equals(cbProduct.SelectedItem.ToString()) &&
                                    x.Element("brandname").Value.Equals(cbBrandName.SelectedItem.ToString()))
                        .Select(k => k.Element("price").Value).ToString(); 
```

我看到的另一个问题是您以选择结束查询，但从未真正枚举它。你可能想做这样的事情：

```
lblPrice.Text = doc.Descendants("items")
                        .Where(x => x.Element("productname").Value.Equals(cbProduct.SelectedItem.ToString()) &&
                                    x.Element("brandname").Value.Equals(cbBrandName.SelectedItem.ToString()))
                        .Select(k => k.Element("price").Value)
                        .FirstOrDefault(); 
```

它将返回您要查找的字符串，如果不存在则返回 null （因此在这种情况下，您可能希望跳过最后的 .ToString() 调用，因为您已经从 Select 和 .ToString() 返回了一个字符串为 null会抛出异常）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T12:37:00.743

对于第一个问题，您似乎只想选择一个价格。假设该项目由`.Single()`. 否则它将抛出，在这种情况下，您应该使用`.SingleOrDefault()`并检查找到的项目是否为 null。

```
lblPrice.Text =
    doc.Descendants("items")
       .Single(x => x.Element("productname").Value == cbProduct.SelectedItem.ToString() &&
                    x.Element("brandname").Value == cbBrandName.SelectedItem.ToString())
       .Element("price").Value; 
```

对于第二个问题，您需要`.Select`用括号括起来，然后您可以调用`.Distinct()`and`.ToArray()`过滤到 distincts 并将结果投影到`string[]`. 我也在`.OrderBy()`那里扔了一个，因为没有什么比随机顺序的 ComboBox 更烦人的了。试试这个：

```
cbProduct.Items.AddRange(doc.Descendants("items")
                            .Select(item => item.Element("productname").Value)
                            .Distinct()
                            .OrderBy(item => item)
                            .ToArray()); 
```

# null - awk 空数据选项

> ID：12768494
> 
> 赞同：3
> 
> 时间：2012-10-07T11:41:20.627
> 
> 标签：null, awk, grep

使用`grep`，您可以`--null-data`选择

```
-z, --null-data           a data line ends in 0 byte, not newline 
```

这样，一行是一个以空字符结尾的字符串，而不是换行符。`awk`有类似的选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T11:51:09.200

您可以设置`RS`（记录分隔符）以更改`awk`查看行的方式。这将以与字段分隔符类似的方式设置`FS`。根据`awk`您使用的版本，您可以将其设置为 NULL。

例如，

```
awk '{ print $0 }' RS="\0" file 
```

请注意，如果您不使用 GNU awk 实现，这可能[是不可移植的。](http://www.gnu.org/software/gawk/manual/html_node/Records.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:49:34.110

使用 awk，您可以使用`printf`：

```
awk '/regex/{printf("%s\n\0", $0)}' 
```

# asp.net - global.asax 中的 ASP.NET 动态 URL 重写

> ID：12768496
> 
> 赞同：1
> 
> 时间：2012-10-07T11:41:45.517
> 
> 标签：asp.net, url-rewriting

对于此解决方案，我需要在一行中使用 global.asax 中的正则表达式来实现 asp.net url 重写

```
www.dummydomain.com/a/1/b/2/c/3/d/4/...                    
www.dummydomain.com/b/2/c/3
www.dummydomain.com/b/2/a/1/c/3/ 
```

这意味着更改参数序列不应该影响 + 不同参数的数量将是动态的 + 我可以通过名称访问这些参数值，例如 a、b、c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:13:18.910

您可以通过 web.config 和编程方式配置 URL 重写规则。

看看下面的 MSDN 文章，它深入解释了它

[http://msdn.microsoft.com/en-us/library/ms972974.aspx](http://msdn.microsoft.com/en-us/library/ms972974.aspx)

简而言之，以编程方式从 global.asax.cs 中的 Application_BeginRequest() 调用 HttpContext.RewritePath(string path) 重写 URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:05:35.340

您可以对字符串使用 split 选项，然后将您的值放入字典中。这假设您的模式永远不会中断。

```
Dim MyContext = HttpContext.Current
Dim url = Request.Path.ToLower()
url = url.Trim("/")
Dim Vals = url.Split("/")
Dim Dict As New Dictionary(Of String, String)
for i = 0 to (vals.count/2)-1
     Dict.Add(vals(i),vals(i+1))
next 
```

然后，您可以使用字典对象来定位您的变量。

在 Application_BeginRequest 方法中的 global.asax 文件中运行它并调用 MyContext.RewritePath 将用户发送到正确的路径。

```
if dict("a") = 1 then MyContext.RewritePath("new URL") 
```

# php - PHP 对象 - 模式和正确用法

> ID：12768497
> 
> 赞同：5
> 
> 时间：2012-10-07T11:41:56.587
> 
> 标签：php, oop, class, object, application-design

我只是想知道是否有人可以帮助我了解如何充分利用 PHP 中的对象。

我对 PHP 对象的理解是它应该代表一个实体，提供获取和更改该实体属性的方法。例如，名为 Post 的对象将包含单个帖子的所有属性，可以根据需要对其进行访问和修改。

让我有些困惑的是，像 CodeIgniter 这样的库在这个庄园中不使用对象。他们将类更像是一组函数的包装器。因此，CodeIgniter 中的“帖子”类不会保存一篇帖子的属性，它会提供获取、编辑和删除帖子的功能。

那么如果我想从数据库中取出每篇文章并将其放入 Post 对象中会发生什么？我对它的理解是，我实际上需要两个类“Posts”和“Post”，一个定义 Post 对象，另一个处理从数据库中获取 Posts 并将它们放入 Post 对象。

这两种类型的类是否有名称（“正确”对象/函数集合）？让两个类像这样一起工作是否很常见，或者我完全误解了如何使用对象？

在我的 Posts 类中使用一个名为 getSinglePost($id) 的方法而不是使用 Post 对象是否更有意义，它只返回一个数组？

希望这个问题有意义，期待得到一些反馈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T11:55:09.880

有关介绍，请参阅[PHP 中的类是什么？](https://stackoverflow.com/questions/2206387/what-is-a-class-in-php/2206835#2206835)

对于答案，我将特别解决您的问题。搜索**粗体**字词以了解有关其含义的更多信息。

> 我对 PHP 对象的理解是它应该代表一个实体，提供获取和更改该实体属性的方法。

实体只是对象的一种可能用途。但也有**Value Objects**、**Service Objects**、**Data Access Objects**等等——当你走 OO 路线时，一切都会是一个有一定责任的对象。

> 让我有些困惑的是，像 CodeIgniter 这样的库在这个庄园中不使用对象。

是的，Code Igniter 并没有真正接受 OOP。他们更多地使用基于类的编程方法，这更像是使用类和少量 OOP 进行程序编程。

> 他们将类更像是一组函数的包装器。因此，CodeIgniter 中的“帖子”类不会保存一篇帖子的属性，它会提供获取、编辑和删除帖子的功能。

不过那很好。一个帖子类可以是**Repository**，例如一个帖子实体的内存集合，它具有在后台检索和持久化这些实体的额外责任。我会谨慎使用**Design Patterns**和 Code Igniter，因为众所周知它们使用自己的模式解释（例如，它们的**Active Record**更像是**Query Object**）。

> 那么如果我想从数据库中取出每篇文章并将其放入 Post 对象中会发生什么？

这里有很多选择。一种常见的方法是使用**Data Mapper**，但您也可以使用 PDO 并将数据行直接提取到 Post 对象等中。

> 我对它的理解是，我实际上需要两个类“Posts”和“Post”，一个定义 Post 对象，另一个处理从数据库中获取 Posts 并将它们放入 Post 对象。

那将是前面提到的**存储库**或**数据映射器**方法。您通常将这些与**Table Data Gateway**结合使用。但是，另一种选择也可能是不具有 Posts 类并使用**Active Record**模式，它将数据库中的一行表示为附加了业务和持久性逻辑的对象。

> 这两种类型的类是否有名称（“正确”对象/函数集合）？让两个类像这样一起工作是否很常见，或者我完全误解了如何使用对象？

是的，他们一起工作。OOP 是关于对象协作的。

> 在我的 Posts 类中使用一个名为 getSinglePost($id) 的方法而不是使用 Post 对象是否更有意义，它只返回一个数组？

那将是一个返回**Record Sets的****表数据网关**。当您没有大量业务逻辑并且可以保留**Domain Model**时，这很好，例如在**CRUD**应用程序中

 ******* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:54:54.033

你对一个对象的理解是正确的。帖子是一个类的单个对象`Post`。但是当然你需要一个函数，从数据库中检索帖子或从其他地方收集它们。因此，您有所谓的**工厂**类。这就是可能引起一些混乱的原因。

工厂可以是*单例*，这通常意味着您有一个此类的实例。但是您根本不需要实例化工厂（而是使用静态函数来访问该功能）：

```
$posts = PostFactory::getPosts(); 
```

然后是函数：

```
static function getPosts() {
  $list = array();
  $sql = "select ID from posts order by datetime desc"; // example, ID is the primary key
  // run your sql query and iterate over the retrieved IDs as $id
  {
  ...
    $post = new Post($id);
    array_push($list, $post);
  }
  return $list;
} 
```

在这个工厂中，您有一组“访问”功能，它们不适合其他地方，例如对象创建（数据库方面）和对象检索。对于第二部分（检索），如果没有“父”对象（就关系而言），只需将函数放入工厂。所以你可以有一个 class 的实体`Blog`，你实例化博客，然后通过博客实例检索博客的帖子，不需要单独的工厂。

命名只是为了帮助您理解。我不建议调用一个类`Post`并且它是工厂`Posts`，因为它们很容易混淆并且代码更难阅读（您需要注意细节）。我通常在类名中混合“工厂”这个词，所以我知道它实际上是一个工厂类，其他人也看到了。

此外，您还可以拥有与任何特定实体类无关的**Helper类。**所以你可以有一个`PostHelper`单例，它可以包含既不适合对象类也不适合工厂的功能。虽然我想不出任何对`Post`对象有用的功能。一个例子是一些软件，它计算东西，你有一个`Helper`，它使用不同类型的对象执行实际计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T11:55:22.077

理想情况下，类也应该与 PHP 中的其他任何地方具有相同的解释。类从抽象开始，提炼你不需要的东西。因此，完全取决于您以您想要的方式定义类。Codeigniter 确实有一种奇怪的方式来启动和访问对象。主要是因为它们被加载一次并在以后使用，从而阻止它具有围绕数据的功能。有一些方法可以解决它，并且仍然可以正常处理类。我通常使用自动加载器并使用普通类。“那么，如果我想从数据库中取出每个帖子并将其放入 Post 对象中会发生什么？我对它的理解是，我实际上需要两个类 'Posts' 和 'Post'，”你本质上是指一个模型来访问数据（“帖子”）和一个实体来表示“帖子”。

```
$this->load->model("posts");
$this->posts->get_all(); // <- This can then initiate set of objects of type "Post" and return. Or even standard classes straight out from DB. 
```******

# git - 如何在 git 中记录唯一作者？

> ID：12768502
> 
> 赞同：14
> 
> 时间：2012-10-07T11:42:18.467
> 
> 标签：git

我有一个有很多作者的大项目。

例如，

```
user1 - commit1
user2 - commit2
user1 - commit3 
```

我想获得所有独特的作者。结果必须是***user1 user2***

如何在 git 中记录唯一作者？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-07T11:54:37.673

这是一种简单的方法：

```
git log --format="%an" | sort -u 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-07T11:45:38.130

试试这个：

```
 git shortlog -s | awk '{print $2,$3}' | sort -fu 
```

**编辑**：这也会让你收到电子邮件

```
git shortlog -se | sed -re 's/^\s*[[:digit:]]*\s*//' | sort -fu 
```

`-r`或者，在没有标志的 macOS 上- *Oliver 在下面的评论中强调*- 将是：

`git shortlog -se | sed -e 's/^\s*[[:digit:]]*\s*//' | sort -fu`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-01T21:57:51.857

我需要找到作者和提交者，所以下面是[https://devhints.io/git-log](https://devhints.io/git-log)到有用的命令。

下面的代码`author name (%an) and author email (%ae)`以这种格式为您提供

`personName - person@email.com`

```
git log --format="%an - %ae" | sort -u
git log --format="%cn - %ce" | sort -u 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-04T14:15:26.880

另一种可能性是`gitqlite "SELECT DISTINCT author_name FROM commits"`使用[gitqlite](https://github.com/augmentable-dev/gitqlite)，这是一个在 git 数据上运行 ad-hoc SQL 查询的工具。

（完全披露，我是该项目的创建者/维护者）

# python - Python：一种使用索引列表对列表进行切片的有效方法

> ID：12768504
> 
> 赞同：9
> 
> 时间：2012-10-07T11:42:43.423
> 
> 标签：python, performance, list, indexing, slice

我想知道一种有效的方法和代码保存来分割数千个元素的列表

例子：

```
b = ["a","b","c","d","e","f","g","h"] 
index = [1,3,6,7] 
```

我希望结果如下：

```
c = ["b","d","g","h"] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-07T11:45:18.493

使用列表最直接的方法是使用列表推导：

```
c = [b[i] for i in index] 
```

但是，根据您的数据的具体外观以及您还需要对它做什么，您可以使用 numpy 数组 - 在这种情况下：

```
c = b[index] 
```

会做你想做的事，并且会避免大切片的潜在内存开销 - numpy 数组比列表更有效地存储，切片可以查看数组而不是制作部分副本。

# c# - 为什么 TextBox.Click 事件只能出现在 += 或 -= 的左侧

> ID：12768509
> 
> 赞同：1
> 
> 时间：2012-10-07T11:43:02.090
> 
> 标签：c#, event-handling, extension-methods

我正在尝试编写 的扩展方法`EventHandler`，如下所示：

```
public static class MyExtensions
{
    public static void Add(this EventHandler handler, EventHandler next)
    {
        //Do something
    }
} 
```

它适用于我的活动，例如：

```
public event EventHandler MyEvent 
```

我可以毫无问题地使用我的扩展程序：

```
MyEvent.Add((x, y) => { /* do something */ }); 
```

但是当我想将它应用到 TextBox 的 Click 事件时，我得到一个编译错误：

> 错误 CS0079：
> 
> `+=`事件 System.Windows.Forms.TextBoxBase.Click 只能出现在或的左侧`-=`

令我困惑的是， Click 事件看起来与 没有任何不同`MyEvent`，那么为什么它确实有约束？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T11:53:57.420

如果从定义**的同一个**类中`Add`调用该方法，它可能会正常工作。**`MyEvent`**

 **但是，该`Click`方法是在与您调用的地方**不同的类**`Add`中定义的。这就是为什么它不起作用。

.NET 框架不允许在定义它的类之外直接修改事件，否则一些 rouge 代码可能会删除任何类的所有事件处理程序。

这是我能想到的最好的扩展方法，可以帮助你做你想做的事：

```
public static Action Add<TDelegate>(
    this TDelegate handler, 
    Action<TDelegate> addHandler, 
    Action<TDelegate> removeHandler)
{
    addHandler(handler);
    return () => removeHandler(handler);
} 
```

你可以像这样使用它：

```
var bar = new Bar();

EventHandler handler = (s, e) =>
{
    Console.WriteLine("MyEvent!");
};

var cleanup = handler.Add(h => bar.MyEvent +=h, h => bar.MyEvent -=h);
bar.Raise();
bar.Raise();
cleanup(); 
```

该`cleanup`操作用于在不需要时删除事件处理程序。

为简单起见，我省略了所有必需的空检查代码。您必须将它们放在适当的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T12:56:36.533

两者是有区别的。一个简单的例子可以证明：

```
private EventHandler foodel;
public event EventHandler foo {
    add { foodel += value; }
    remove { foodel -= value; }
}
public event EventHandler bar;

...
foo.Add((s, e) => { });   // CS0079
bar.Add((s, e) => { });   // No error 
```

删除访问器，代码编译干净。

我要冒昧地说您无意中利用了编译器错误。它也应该拒绝在没有访问器的情况下声明的事件上使用扩展方法。微软修复该错误的几率非常低，这已经存在太久了。然而，最好的解决方法是删除扩展方法。**

# jquery - WAMP 不加载 jQuery

> ID：12768512
> 
> 赞同：1
> 
> 时间：2012-10-07T11:43:06.960
> 
> 标签：jquery, wamp

我将整个 HTML 项目与 .js 文件一起放入，`wamp/www/project/` 但是当我转到`localhost/project` 它时不会加载任何 jQuery。当我去 `file:///D:/wamp/www/project` 它完美加载。

有什么解决办法吗？

是的，WAMP 有效（我尝试安装 Joomla，它的工作原理很吸引人）不，Skype 没有打开

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:57:39.977

很多时候发生这种情况是因为您的页面上某处有一些 PHP 代码会生成错误并阻止 javascript 正确运行，因此为什么在您在本地机器上查看文件时这不是问题. 检查 firebug 中的错误控制台和 http 请求，以更好地了解发生了什么。

编辑： jQuery undefined 意味着您在未正确加载 jQuery 库的地方调用 jQuery。这很可能是两件事之一，或者 A：您在与 PHP 冲突的区域使用 $ 符号（将 jQuery 中的所有 '$' 更改为 jQuery）。或 B：您试图在加载库之前调用 jQuery。确保您没有尝试运行任何插件或让任何脚本在文档中的 jQuery 库之前运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:02:14.523

这可能是因为如果您的服务器被编程为在所有类型的文件中查找 PHP 代码，则某些 jQuery 代码被解释为 PHP。

尝试直接加载 jQuery 文件并查看源代码或从 Google 托管的 url 加载它。

检查您的 PHP 错误日志。

# java - 使用 Jersey 和 @ApplicationPath 注解加载资源

> ID：12768514
> 
> 赞同：6
> 
> 时间：2012-10-07T11:43:15.513
> 
> 标签：java, tomcat, jersey, jax-rs, servlet-3.0

我正在尝试在没有 web.xml 的情况下将基本的 jersey restful 服务部署到 Tomcat7：

```
 @WebServlet(loadOnStartup=1)
 @ApplicationPath("resources")
 @Path("/mypath/{name}")
 public class MyResource extends Application {

 @Override
 public Set<Class<?>> getClasses() {
     Set<Class<?>> s = new HashSet<Class<?>>();
     s.add(MyResource.class);
     return s;
 }

 @GET
 @Consumes("text/plain")
 @Produces("text/plain")
 public String getWelcome(@PathParam(value = "name") String name) {
     return "Welcome to jax-rs " + name;
 }
} 
```

尝试访问时出现 404：*/myapplication/resources/mypath/sample*。

我可以使用注解部署 servlet `@WebServlet`，因此这与将没有 web.xml 的 servlet 加载到 Tomcat7 中无关。

通过阅读 Jersey 的文档，运行时应该扫描扩展`Application`和执行的类`getClasses()`，加载所有根资源。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T20:07:18.937

您使用的是哪个版本的泽西岛？尝试将应用程序和资源拆分为两个类。绝对删除`@WebServlet`注释。即有一个类扩展 Application 用注释`@ApplicationPath`和另一个类用`@Path`.

编辑：确保`jersey-servlet.jar`包含在您的 WAR 文件中。

# javascript - Javascript HTML5 多源

> ID：12768516
> 
> 赞同：5
> 
> 时间：2012-10-07T11:43:48.967
> 
> 标签：javascript, audio, mp3, ogg

我正在尝试使用 javascripts 'getElementByID' 将同一首歌曲插入到我的音频播放器上的 2 个不同的源中。

HTML：

```
<audio id="audio">
   <source id="ogg" src="song1.ogg" type="audio/ogg">
   <source id="mp3" src="song2.mp3" type="audio/mp3">
   Your browser does not support the audio tag.
</audio> 
```

JavaScript：

```
function songOne(){ 
    document.getElementById('ogg').src="../audio/pt/lllg/Panda's Thumb.ogg";
    document.getElementById('mp3').src="../audio/pt/lllg/Panda's Thumb.mp3";
    document.getElementById('songName').innerHTML="Panda's Thumb";
    audio.play();
} 
```

如您所见，当函数运行时，它将 .ogg 文件放入 id="ogg" 中，将 .mp3 放入 id=".mp3" 中。虽然，当我检查元素时，源发生了变化，但歌曲不会播放。

我只能使用一个来源：

```
<audio id="audio" src=""></audio> 
```

但是它只会在支持 mp3 或 ogg 的浏览器上播放，而其他浏览器则错过了。 **我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T12:11:11.627

我对 HTML5 音频了解不多，但试试这个：

> 更改**src** attr 后，发出`audio.load();`命令

检查这篇文章：[http ://html5doctor.com/native-audio-in-the-browser/](http://html5doctor.com/native-audio-in-the-browser/)

# iphone - 如何在objective-c的单个表格单元格中显示两个json数组值

> ID：12768518
> 
> 赞同：-1
> 
> 时间：2012-10-07T11:43:59.813
> 
> 标签：iphone, objective-c, ios, json, tablecell

我是 Objective-c 的新手，正在开发 ios 应用程序，我正在解析 json 数组并将其显示在表格单元格中。我有一个问题，我想在单个单元格中显示 2 个 json 数组值，但我没有正确获取这些值，这是我的 json 数组

```
 {
    "event_id" = 7;
    "fighter_id" = 26;
    "fighters_name" = "Kaushik Sen";
    "fighters_photo" = "Kaushik.jpg";
    "match_id" = 28;
    "match_type" = Bantamweight;
    "profile_link" = "link";
  }

    {
    "event_id" = 7;
    "fighter_id" = 21;
    "fighters_name" = "Kultar Singh Gill";
    "fighters_photo" = "Kultar.jpg";
    "match_id" = 27;
    "match_type" = "Welterweights Main Event";
    "profile_link" = "link";
} 
```

在这里，我想在单个单元格中显示来自两个不同数组的战斗机名称，例如。kaushik sen vs kultar singh gill，但我在牢房里得到了备用球员的名字。这是我的目标 c 代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self MatchList];
}

    -(void)MatchList {

    NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://example.com/appleapp/eventDetails.php"]];

    NSError *error;

    //code to execute php code
    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:&error];

    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];

    NSMutableArray *matchListArray = [[NSMutableArray alloc]init];

    matchListArray = [json objectForKey:@"products"];
    arrayOfFighterName=[[NSMutableArray alloc] init];
    arrOfMatchId = [[NSMutableArray alloc] init];

    for( int i = 0; i<[matchListArray count]; i++){

       // NSLog(@"%@", [matchListArray objectAtIndex:i]);
        arrayOfFighterName[i]=[[matchListArray objectAtIndex:i] objectForKey:@"fighters_name"];
    }

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [arrayOfFighterName count]/2;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    cell = (MyFighterCell *)[tableview dequeueReusableCellWithIdentifier:kCellIdentifier];
    select = indexPath.row;
    if(cell == nil){
        cell = [[[MyFighterCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellIdentifier] autorelease];
                [cellOwner loadMyNibFile:kCellIdentifier];
        cell = (MyFighterCell *)cellOwner.cell;

    }
    cell.lblPlayer1.text =  [arrayOfFighterName objectAtIndex:indexPath.row];
    cell.lblPlayer2.text =  [arrayOfFighterName objectAtIndex:indexPath.row +1];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:03:41.977

问题是当您将名称写入单元格时。对于每一行，您将获得当前行和当前行 + 1。

所以想象你有战士

```
0\. John
1\. Bob
2\. Bill
3\. Carl
4\. Tom
5\. Mark 
```

由于 tableView:cellForRowAtIndexPath: 要求您配置*每一*行，因此您显示的是：

```
Row 0: display 0 and 1 (John vs Bob)
Row 1: display 1 and 2 (Bob vs Bill)
Row 2: display 2 and 3 (Bill vs Carl) 
```

你需要做的是改变你让你的战士出去的方式。您需要显示 2*(current row) 和 (2*currentRow + 1) 而不是在 (current row) 和 (current row + 1) 显示战斗机

```
Row 0: 0 and 1 (John vs Bob)
Row 1: 2 and 3 (Bill vs Carl)
Row 2: 4 and 5 (Tom vs Mark) 
```

因此，通过添加 4 个字符来修复您的代码：

```
cell.lblPlayer1.text =  [arrayOfFighterName objectAtIndex:2*indexPath.row];
cell.lblPlayer2.text =  [arrayOfFighterName objectAtIndex:2*indexPath.row +1]; 
```

# javascript - 计算 Javascript 中 2 个 SQLite 日期时间之间的差异

> ID：12768519
> 
> 赞同：3
> 
> 时间：2012-10-07T11:44:00.787
> 
> 标签：javascript, sqlite, datetime

我有一个 startDate 和一个 endDate 存储在 SQLite 数据库中，需要使用 javascript 计算两个日期时间之间的分钟和秒差。

例如：

```
startDate = 2012-10-07 11:01:13
endDate = 2012-10-07 12:42:13 
```

我已经很好地阅读了关于 SO 的大量类似问题，但只能找到与计算相关的内容作为选择的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:03:48.280

将字符串转换为 JS`Date`对象，减去日期，并使用一些算法从结果中计算小时/秒。就像是：

```
function convertMS(ms) {
  var d, h, m, s, ts, tm, th;
  s = ts = Math.floor(ms / 1000);
  m = tm = Math.floor(s / 60);
  s = s % 60;
  h = th = Math.floor(m / 60);
  m = m % 60;
  d = Math.floor(h / 24);
  h = h % 24;
  return { d: d, h: h, m: m, s: s, tm: tm, th: th, ts: ts};
};
var start = new Date('2012-10-07 11:01:13'.split('-').join('/'))
   ,end   = new Date('2012-10-07 12:42:13'.split('-').join('/'))
   ,dif   = convertMS(end - start);
console.log(dif.h+':'+dif.m);​​​​​​ //=> ​1:41
console.log('total minutes dif: '+dif.tm);​​​​​​ //=> total ​minutes dif: 101
console.log('total seconds dif: '+dif.ts);​​​​​​ //=> ​total seconds dif: 6060 
```

[根据评论**编辑**
] 以提供的格式“手动”解析日期字符串：

```
Date.tryParse = function(ds){
  var  arr =  ds.match(/\d+/g)
      ,err = 'Expected at least yyyy'
      ,dat = arr.length && String(arr[0]).length === 4
              ? doParse.apply(null,arr) : err;
  return dat;

  function doParse(y,m,d,h,mi,s,ms){
   var dat = new Date(+y,(+m-1)||0,+d||1,+h||0,+mi||0,+s||0,+ms||0);
   return isNaN(dat) ? new Date : dat;
  }
}
var start = Date.tryParse('2012-10-07 11:01:13'); //=> Sun Oct 07 2012 11:01:13
var test  = Date.tryParse('2009');                //=> Sun Jan 01 2009 00:00:00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T12:31:26.987

其他答案是正确的，但是浏览器不会始终如一地解析日期字符串（见下文），因此您应该手动解析字符串。OP 中的格式也与 ES5 中的格式不一致，部分浏览器无法正确解析。将 OP 格式转换为适用于所有浏览器的日期的简单函数是：

```
function stringToDate(s) { 
    s = s.split(/[-\/\. :]/);
    return new Date(s[0], --s[1], s[2], s[3], s[4], s[5], 0)
} 
```

有一些格式可以被所有浏览器解析，但是它们不符合标准，并且如果使用，则依赖于所有继续支持未指定格式的实现。

### 编辑

为了容忍格式错误的输入（额外的空格、不同的分隔符、额外的字符），`match`可以使用代替`split`：

```
function stringToDate(s) { 
    s = s.match(/\d+/g);
    return new Date(s[0], --s[1], s[2], s[3], s[4], s[5], 0)
} 
```

但是，由于这些值来自数据库并且已指定格式，因此日期字符串应符合该格式。首先不应该存储错误的数据。

为了完整起见，这里有一个函数可以做你想做的事情：

```
/*  Return difference between two dates as minutes and seconds mm:ss.
 *  Input format is yyyy-mm-dd hh:mm:ss
 *  If strings don't converted to dates (incorrect format or invalid values),
 *  return undefined.
 */
function diffInMins(s0, s1) {
  var diff;

  // Convert strings to date ojbects
  var d0 = stringToDate(s0);
  var d1 = stringToDate(s1);

  // Helper function to padd with leading zero
  function z(n) {
    return (n<10? '0' : '') + n;
  }

  // Check conversions
  if (d0 && d1 && typeof d0 == 'object' && typeof d1 == 'object') {

    // Return difference formatted as mm:ss
    if (d0 && d1) {
      diff = d1 - d0;
      return z(diff/60000 | 0) + ':' + z(Math.round(diff%60000/1000));
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T12:21:28.493

关于将日期转换为纪元时间的毫秒，减去这些，并将结果从毫秒转换回您所需的单位，所有答案通常都是正确的（尽管其他地方提供的具体实现目前并不能准确地为您提供您所要求的 - - 即，只是两个日期时间之间的分钟数和秒数）。

不过，也请注意...

> 新日期('2012-10-07 12:42:13')

...这不是从 SQLite 日期字符串构造 Date 的可靠方法。

当您将字符串输入 Date 对象的构造函数时，您实际上是在调用`Date.parse()`. 这在不同的浏览器上表现不同。

看一下这个：

```
> new Date('1-1-2012');
Sun Jan 01 2012 00:00:00 GMT-0800 (PST)

> new Date('01-01-2012');
Sun Jan 01 2012 00:00:00 GMT-0800 (PST)

> new Date('2012-1-1');
Sun Jan 01 2012 00:00:00 GMT-0800 (PST) 
```

看起来很不错，对吧？但那是在 Chrome 上。

现在看看在最新版本的 Firefox 中发生了什么，调用完全相同：

```
> new Date('1-1-2012');
Date {Invalid Date}

> new Date('01-01-2012');
Date {Invalid Date}

> new Date('2012-1-1');
Date {Invalid Date}

> new Date('2012-01-01');
Date {Sat Dec 31 2011 16:00:00 GMT-0800 (PST)} 
```

此外，在两种浏览器中查看此行为：

```
> new Date('2012-01-01');
Sat Dec 31 2011 16:00:00 GMT-0800 (PST) 
```

简单地将零添加到月份和日期数字会导致时间扭曲！你必须设置时间和时区（对我来说，PST）才能让它消失：

```
> new Date('2012-01-01T00:00:00-08:00')
Sun Jan 01 2012 00:00:00 GMT-0800 (PST) 
```

基本上，处理日期字符串解析是一件令人头疼的事情。你不想消化和解释这样的[规范](http://www.w3.org/TR/NOTE-datetime)，[this](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)和[this](https://www.rfc-editor.org/rfc/rfc2822#page-14)。

所以，**这是一个更好的选择**——将你的日期时间部分作为单独的参数传递给 Date 对象的构造函数。这将为您可靠地创建日期，因此您的后续比较是有效的。

> 新日期（年，月，日[，小时，分钟，秒，毫秒]）

对于您的情况，初始化可能如下所示：

```
// Extract month, day, year from SQLite format, 'trimming' whitespace.
var sqlLiteSampleStr = "2012-10-07 11:01:13";
var re = /^\s*(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})\s*$/;
var match = re.exec(sqlLiteSampleStr);
if (match) {
  var year = parseInt(match[1]);
  var month = parseInt(match[2]) - 1; // Zero-indexed months.
  var date = parseInt(match[3]);
  var hour = parseInt(match[4]);
  var minute = parseInt(match[5]);
  var second = parseInt(match[6]);
  var date = new Date(year, month, date, hour, minute, second);
} 
```

注意：请注意时区注意事项。您似乎没有该 SQLite 格式片段中的任何时区数据。

**更新**

@james-j 澄清说他正在专门寻找分钟和秒。

这是一个提取分钟和秒的片段：

```
var msPerMin = 1000 * 60;
var min = Math.floor(timeInMs / msPerMin);
var timeInMs = timeInMs - (min * msPerMin);
var sec = Math.floor(timeInMs / 1000 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T12:00:53.167

JavaScript 实际上使减去日期变得非常简单。以下是它的工作原理：

```
// Create Date objects from the strings
startDate = new Date('2012-10-07 11:01:13');
endDate = new Date('2012-10-07 12:42:13');

// Subtract Date objects to return milliseconds between them
millisecondsBetween = (endDate - startDate);

// Convert to whatever you like
alert(millisecondsBetween/1000/60 + ' minutes'); 
```

# android - 获取消息 -> 处理输入时发现无效数据

> ID：12768520
> 
> 赞同：2
> 
> 时间：2012-10-07T11:44:08.593
> 
> 标签：android, ffmpeg

我想在我的库中使用 ffmpeg lib。为此，我已成功编译它。但是当我尝试执行任何命令时，我收到以下消息：

```
Invalid data found when processing input. 
```

我不知道它背后的原因是什么。这是代码：

```
public class Videokit extends Activity {
    String FilePath;
    String OutPut;
    Context mycontext;
    Videokit vk ;
    static 
    {
        System.loadLibrary("videokit");
    }

    public native void run(String[] args);

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        FilePath =Environment.getExternalStorageDirectory().toString()+"/output.3gp";
        try {
            ffmpegrun();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public String ffmpegrun() throws IOException
    {
        boolean success=false;
        File folder = new File(Environment.getExternalStorageDirectory().toString() + "/image-%3d.jpeg");
        File file = new File(FilePath);
        System.out.println("filepath exists at:"+file.getAbsolutePath());
        if (!folder.exists()) {
            success = folder.mkdirs();
//              Toast.makeText(mycontext,"outfile.mp4 exists at"+folder.getAbsolutePath(),Toast.LENGTH_LONG).show();
             OutPut = folder.getAbsolutePath();
        }
        System.out.println("outfile.flv exists at:"+folder.getAbsolutePath());
        run(new String[]{
                "ffmpeg",
                "-i",
                FilePath,
                "-r 1", 
                 "-f",
                 "image2",
                 "image-%3d.jpeg"
        }); 
        return OutPut;
    }
} 
```

这是日志：

```
10-07 17:00:03.707: D/dalvikvm(8760): Trying to load lib /data/data/uk.co.halfninja.videokit/lib/libvideokit.so 0x44e8c958
10-07 17:00:03.837: D/dalvikvm(8760): Added shared lib /data/data/uk.co.halfninja.videokit/lib/libvideokit.so 0x44e8c958
10-07 17:00:03.837: I/Videokit(8760): Loading native library compiled at 13:52:27 Oct  7 2012
10-07 17:00:03.917: I/System.out(8760): filepath exists at:/sdcard/output.3gp
10-07 17:00:03.917: I/System.out(8760): outfile.flv exists at:/sdcard/image-%3d.jpeg
10-07 17:00:03.917: D/dalvikvm(8760): +++ not scanning '/system/lib/libwebcore.so' for 'run' (wrong CL)
10-07 17:00:03.917: D/dalvikvm(8760): +++ not scanning '/system/lib/libmedia_jni.so' for 'run' (wrong CL)
10-07 17:00:03.928: D/dalvikvm(8760): +++ not scanning '/system/lib/libexif.so' for 'run' (wrong CL)
10-07 17:00:03.928: D/Videokit(8760): run() called
10-07 17:00:03.928: D/Videokit(8760): run passing off to main()
10-07 17:00:03.928: D/Videokit(8760): main(): registering all modules
10-07 17:00:03.938: D/Videokit(8760): main(): registered everything
10-07 17:00:03.938: D/Videokit(8760): main(): initting opts
10-07 17:00:03.968: D/Videokit(8760): main(): initted opts.
10-07 17:00:03.968: E/Videokit(8760): ffmpeg version N-30996-gf925b24, Copyright (c) 2000-2011 the FFmpeg developers
10-07 17:00:03.979: E/Videokit(8760):   built on Oct  7 2012 13:52:32 with gcc 4.4.3
10-07 17:00:03.979: E/Videokit(8760):   configuration: --enable-cross-compile --arch=arm5te --enable-armv5te --target-os=linux --disable-stripping --prefix=../output --disable-neon --enable-version3 --disable-shared --enable-static --enable-gpl --enable-memalign-hack --cc=arm-linux-androideabi-gcc --ld=arm-linux-androideabi-ld --extra-cflags='-fPIC -DANDROID -D__thumb__ -mthumb -Wfatal-errors -Wno-deprecated' --disable-everything --enable-decoder=mjpeg --enable-demuxer=mjpeg --enable-parser=mjpeg --enable-demuxer=image2 --enable-muxer=mp4 --enable-encoder=libx264 --enable-libx264 --enable-decoder=rawvideo --enable-protocol=file --enable-hwaccels --disable-ffmpeg --disable-ffplay --disable-ffprobe --disable-ffserver --disable-network --enable-filter=buffer --enable-filter=buffersink --disable-demuxer=v4l --disable-demuxer=v4l2 --disable-indev=v4l --disable-indev=v4l2 --extra-cflags='-I../x264 -Ivideokit' --extra-ldflags=-L../x264
10-07 17:00:03.987: D/Videokit(8760): main(): parsing options
10-07 17:00:03.987: D/Videokit(8760): parse_options has 7 options to parse
10-07 17:00:04.050: E/Videokit(8760): /sdcard/output.3gp: Invalid data found when processing input
10-07 17:00:04.050: E/Videokit(8760): ffmpeg_exit(1) called! 
```

请帮助我。我对这个问题一无所知。在此先感谢。

# c# - 无法将“System.Web.UI.WebControls.ListItem”类型的对象转换为“System.String”类型

> ID：12768522
> 
> 赞同：1
> 
> 时间：2012-10-07T11:44:15.010
> 
> 标签：c#, asp.net, webforms

我的网页中有一个 ListBox（我使用的是 ASP.NET Web Form 4），当我想将这些 ListBox 的项目转换为字符串数组时它不起作用，我使用以下代码：

```
protected void btnSend_Click(object sender, EventArgs e)
{
    String[] a= ListBox1.Items.Cast<String>().ToArray();
} 
```

当我通过 Chrome 开发工具（在控制台选项卡中）单击`btnSend`并检查它时，我收到如下错误：

> 无法将“System.Web.UI.WebControls.ListItem”类型的对象转换为“System.String”类型

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T12:07:01.207

该`ListBox.Items`集合包含[ListItems](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.aspx)。

```
var texts = ListBox1.Items
    .Cast<ListItem>()
    .Select(item => item.Text)
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T11:51:47.063

你可以试试

```
ListBox1.Items.OfType<string>().ToArray(); 
```

# css - @include 容器是什么意思？

> ID：12768524
> 
> 赞同：2
> 
> 时间：2012-10-07T11:44:23.397
> 
> 标签：css, sass, responsive-design, compass-sass, susy-compass

我开始使用 Compass 和 Susy。我的目标是让我的布局适应手机、平板电脑和桌面屏幕尺寸。在 Susy 示例（[susy.oddbird.net](http://susy.oddbird.net/guides/reference/#ref-at-breakpoint)或[SO question](https://stackoverflow.com/questions/9782914/susy-change-the-number-of-columns-according-to-screen-size)）中，存在一种让列数适应屏幕大小的模式。具体来说，有如下嵌套规则：

```
.container {
  @include container;

  @include desktop {
    @include container;
  }
} 
```

我现在的问题是：容器 { @include container } 做什么？而且，为什么它又嵌套在桌面包含？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T05:11:41.867

`container`mixin 确定页面的宽度。如果宽度应该改变（就像自适应布局一样），您只需要在不同的断点重复它。如果您使用的是流体网格，则无需重复。

# ruby-on-rails - 更新属性中 where 子句的 Rails 错误

> ID：12768530
> 
> 赞同：0
> 
> 时间：2012-10-07T11:44:53.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有一个没有主键的表，包含三列 - Player_ID、Season 和 Amount。当我想更新当前表时，出现以下错误消息：ActiveRecord::StatementInvalid (Mysql2::Error: Unknown column 'salaries.' in 'where clause': UPDATE `salaries`SET `Season`= 20192, `Amount`= 3232.0 WHERE `salaries`.`` IS NULL)

我的控制器中的更新方法：

```
def new
  @salary = Salary.new
  @players = Player.all
  @title = "Add salary"
end

def create
  @players = Player.all
  @salary = Salary.new(params[:salary])
  if @salary.save
    flash[:success] = "Successfully added salary"
    redirect_to salaries_path
  else
    @title = "Add salary"
    render 'new'
  end
end

def edit
  @player_id = params[:player_id]
  @season = params[:season]
  @salary = Salary.find_by_Player_ID_and_Season(params[:player_id], params[:season])
  @players = Player.all
  @title = "Edit salary"
end

def update
    @players = Player.all
    @player_id = params[:player_id]
    @season = params[:season]
    @salary = Salary.find_by_Player_ID_and_Season(params[:player_id], params[:season])
    if @salary.update_attributes(params[:salary])
       flash[:success] = "Successfully edited salary"
       redirect_to salaries_path
    else
       render 'edit'
    end
  end 
```

_form.html.erb

```
<%= form_for(@salary, :url => salary_path(:player_id => @player_id, :season => @season)) do |f| %>
  <%= f.collection_select :Player_ID, @players, :ID, :Name %>
  <%= f.text_field :Season %>
  <%= f.text_field :Amount %>
  <%= f.submit "Add" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:22:00.207

Active Record 模型必须有一个主键，否则无法更新或删除行。

`composite_primary_keys`如果你真的不想在你的表中添加一个 ID 列，那么有一个宝石（尽管添加主键肯定是阻力最小的路径）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:38:06.710

我知道您的错误的原因，尽管根本原因对我来说不是很清楚。您失败的查询是这样的：

```
ActiveRecord::StatementInvalid (Mysql2::Error: Unknown column 'salaries.' in 'where clause': UPDATE salaries SET Season = 20192, Amount = 3232.0 WHERE salaries.`` IS NULL) 
```

重要的部分是：

```
WHERE salaries.`` IS NULL 
```

`WHERE salaries.foo IS NULL`如果它是or会有一定的意义`WHERE salaries.bar IS NULL`，但你只是在列名通常存在的地方有空白。所以我猜MySQL（出于某种奇怪的原因）将其解释为您正在谈论一个名为`salaries`(ie `salaries.salaries`) 的列，该列不存在。

我什至不知道为什么该`WHERE`条款首先在那里。

你的`create`行动有效吗？

**更新：**问题几乎可以肯定是这一行：

```
if @salary.update_attributes(params[:salary]) 
```

我相信你想要的是：

```
if @salary.update_attributes(:amount => params[:amount]) 
```

看看有没有什么作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T12:06:51.833

你的表已经有主键了！是`id`属性。`params[:season]`……我想是的，`params[:salary][:season]`对吧？我认为你应该用小写字母写`season, player_id, amount`。之后，如果仍然有问题，请在此处发布新代码^^

# algorithm - 与递归混淆

> ID：12768532
> 
> 赞同：0
> 
> 时间：2012-10-07T11:45:08.053
> 
> 标签：algorithm, recursion

假设我有一个等式的递归：`T(n)= T(n-2) + c`..这意味着我们将问题大小分解为 2 倍，并且该算法的顺序是 O(n)，这是正确的！现在，假设我的方程变成`T(n)= T(n-2)+cn`了，.. 为什么阶数变成 n2（2 次方）？我不想要任何递归树方法或任何其他方法来证明它变成 n2 .. 告诉我这里有什么作用`c`和`cn`不同之处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:39:51.567

> 请告诉我 c 和 cn 在这里有什么不同？

这意味着，额外的工作总是增加一`c`（或在 的情况下增加二`T(n -2) + cn`）：

> T(n) = T(n-1) + c

如果问题大小增加 1，则需要投入的额外工作是`c`，这是恒定的。

> T(n) = T(n-1) + cn

如果问题大小增加 1，那么您需要投入的额外工作`c`比您上次将问题大小增加 1 时多 1。

即假设您将问题大小从`n`增加到`n + 1`，这增加`10c`了额外的工作。当您现在将问题大小从`n + 1`增加到 时`n + 2`，您将需要添加额外`11c`的工作。

我们结束了这个系列：

```
d + c + 2c + 3c + 4c + 5c + ... 
```

# haskell - 数字与积分

> ID：12768536
> 
> 赞同：25
> 
> 时间：2012-10-07T11:46:16.453
> 
> 标签：haskell

这个功能：

```
hola :: (Integral a) => a -> String
hola 1 = "OK"
hola _ = "asdf" 
```

工作正常。但是这个：

```
hola :: (Num a) => a -> String
hola 1 = "OK"
hola _ = "asdf" 
```

无法编译：“无法从文字 '1' 推导出 (Eq a)”

我真的不明白。我正在阅读一个教程，上面说

> “Integral 也是一个数字类型类。Num 包括所有数字，包括实数和整数，Integral 仅包括整数（整数）数。在这个类型类中是 Int 和 Integer。” [http://learnyouahaskell.com/types-and-typeclasses](http://learnyouahaskell.com/types-and-typeclasses)

为什么我不能使用 Num？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-07T12:02:36.667

[这是去年 9 月 / 10 月](http://www.haskell.org/pipermail/libraries/2011-September/016699.html)在最新版本的基本包中提出`Eq`并接受的一项最新更改，`Show`不再是`Num`. 自那次更改以来，没有发布新版本的语言报告，所以它还没有出现在报告中。而且由于它是最近的，它还没有进入许多教程或书籍。

针对数字文字的“模式匹配”是 的隐式应用`(==)`，因此需要一个`Eq`实例才能使其工作。现在不能再从`Num`约束中推断出该实例，因此（相当新的 :D）编译器拒绝仅具有`Num`约束的代码。

But`Integral`是 的子类`Real`，它`Ord`（因此`Eq`）作为超类，因此有效。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-07T15:45:27.960

正如 Daniel Fischer 所说，它曾经有效，但现在无效，因为`Num`并且`Eq`被拆分了，所以`Num a`不再暗示`Eq a`。要修复您的代码，只需`Eq a`明确说明：

```
hola :: (Num a, Eq a) => a -> String
hola 1 = "OK"
hola _ = "asdf" 
```

# php - PHP file_get_contents 只返回换行符

> ID：12768540
> 
> 赞同：1
> 
> 时间：2012-10-07T11:46:40.163
> 
> 标签：php, html-parsing, file-get-contents

我只有一个用于 HTML 解析的 PHP 脚本，它适用于简单的网站，但现在我需要从[这个网站](http://www.cinemacity.cz/en/)解析电影程序。我正在使用这个`file_get_contents`函数，它只返回 4 个新行分隔符`\n`，我就是不知道为什么。网站本身将更难以使用 DOMDocument 解析 XPath，因为程序本身只是弹出窗口，它似乎不会更改 URL 地址，但我会在检索网站的 HTML 代码后尝试处理这个问题.

这是我的脚本的缩短版本：

```
<?php
      $url = "http://www.cinemacity.cz/";
      $content = file_get_contents($url);
      $dom = new DomDocument;
      $dom->loadHTML($content);

      if ($dom == FALSE) {
        echo "FAAAAIL\n";
      }

      $xpath = new DOMXPath($dom);

      $tags = $xpath->query("/html");

      foreach ($tags as $tag) {
        var_dump(trim($tag->nodeValue));
      }
?> 
```

编辑：

因此，按照 WBAR 的建议（谢谢），我正在寻找一种方法来更改 file_get_contents() 函数中的标头，这是我在其他地方找到的答案。现在我能够获得该网站的 HTML，希望我能管理这个烂摊子的解析：D

```
<?php
    libxml_use_internal_errors(true);
    // Create a stream
    $opts = array(
      'http'=>array(
        'user_agent' => 'PHP libxml agent', //Wget 1.13.4
        'method'=>"GET",
        'header'=>"Accept-language: en\r\n" .
                  "Cookie: foo=bar\r\n"
      )
    );
    $context = stream_context_create($opts);

    // Open the file using the HTTP headers set above
    $content = file_get_contents('http://www.cinemacity.cz/', false, $context);

    $dom = new DomDocument;
    $dom->loadHTML($content);

    if ($dom == FALSE) {
        echo "FAAAAIL\n";
    }

    $xpath = new DOMXPath($dom);

    $tags = $xpath->query("/html");

    foreach ($tags as $tag) {
        var_dump(trim($tag->nodeValue));
    }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T11:57:44.877

问题不在于 PHP，而在于目标主机。它检测客户端的 User-Agent 标头。看这个：

```
wget http://www.cinemacity.cz/
2012-10-07 13:54:39 (1,44 MB/s) - saved `index.html.1' [234908] 
```

但是当删除 User-Agent 标头时：

```
wget --user-agent="" http://www.cinemacity.cz/
2012-10-07 13:55:41 (262 KB/s) - saved `index.html.2' [4/4] 
```

服务器只返回了 4 个字节

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:52:11.527

尝试以这种方式获取内容：

```
 function get2url($url, $timeout = 30, $port = 80, $buffer = 128) {
    $arr = parse_url($url);
    if(count($arr) < 3) return "URL ERROR";

    $ssl = "";
    if($arr['scheme'] == "https") $ssl = "ssl://";

    $header  = "GET " . $arr['path'] . "?" . $arr['query'] . " HTTP/1.0\r\n";
    $header .= "Host: " . $arr['host'] . "\r\n";
    $header .= "\r\n";

    $f = @fsockopen($ssl . $arr['host'], $port, $errno, $errstr, $timeout);

    if(!$f)
      return $errstr . " (" . $errno . ")";

    else{
      @fputs($f, $header . $arr['query']);

      $echo = "";
      while(!feof($f)) { $echo .= @fgets($f, $buffer); }

      @fclose($f);

      return $echo;
    }
  } 
```

不过，您将不得不删除标题。

# python - 在 QTextEdit 小部件中解析和显示 HTML

> ID：12768542
> 
> 赞同：2
> 
> 时间：2012-10-07T11:47:10.763
> 
> 标签：python, html, qt, qtextedit

我的一个应用程序中有一个不可编辑的 QTextEdit 小部件。基于我想显示附加信息的组合框的选择。

我目前的方法是从目录加载 HTML 文件并将它们显示在 QTextEdit-Field 中。这听起来很简单（使用 setHtml 或 insertHtml 函数），但不知何故并没有我想象的那么简单。我相信我必须先解析或加载文件。我该如何继续？

```
h = (helpdir + str + ".html") # contains the helpfiles path (Format QString)
# Load in HTML?
textfield.insertHtml(h) # Should somehow insert the html 
```

欢迎其他易于实施的方法（尤其是考虑到帮助的未来翻译）。我赞成任何没有额外库或非基础包的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T14:02:21.707

是的，您必须先加载 HTML 文件，然后再将其插入`QTextEdit`. 但这样做很容易：

```
 f = QFile("path/to/your/htmlfile")
    f.open(QFile.ReadOnly|QFile.Text)
    istream = QTextStream(f)
    textfield.setHtml(istream.readAll())
    f.close() 
```

它工作得很好（假设您的 HTML 文件不是很大）。如果文件更符合您的需要，您也可以逐行读取文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:29:33.377

您可以使用[QtWebKit](http://trac.webkit.org/wiki/QtWebKit)，这是在 qt 中处理 html 内容的最佳方式。它应该随您的 python qt 安装一起提供。查看下面的代码：

**测试.py**

```
import sys
from PyQt4 import QtCore, QtGui, QtWebKit

app = QtGui.QApplication(sys.argv)
view = QtWebKit.QWebView()
view.setHtml(open('test.html').read())
window = QtGui.QMainWindow()
window.setCentralWidget(view)
window.show()
sys.exit(app.exec_()) 
```

**测试.html**

```
<html><body><h1>test page</h1>testing...</body></html> 
```

# c++ - 如何在ncurses c ++中绘制坐标

> ID：12768544
> 
> 赞同：0
> 
> 时间：2012-10-07T11:47:25.173
> 
> 标签：c++, ncurses

![坐标](../Images/89038a8997a2f098b70a8d0c79c48125.png)

嗨，伙计们，使用以下代码我能够创建一个坐标图系统。但我坚持标记坐标。现在我将从用户那里得到 (x,y)，我需要在地图内用“*”标记它。用户会得到几个（x，y）坐标，我需要标记。我无法这样做。我知道我需要修改循环，但如果我修改它会变得非常混乱。请指教。我正在使用ncurses。

```
mvaddstr(3 - 2, 3 + 5, "Main Board");
mvaddstr(3 - 1, 3 - 3, numbers); 
for (y = 0; y < 7; ++y) {
    mvaddch(3 + y, 3 - 3, (chtype) (y + '0'));
    attron(COLOR_PAIR(COLOR_RED));
    addch(' ');
    for (x = 0; x < 7; x++) {
       (void) addstr(" . ");            
    }
    (void) attrset(0);
    (void) addch(' ');
    (void) addch((chtype) (y + '0'));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:13:45.897

分离模型怎么样。例如，将状态保存在不同的对象或结构中，并创建一个函数来绘制模型。它可能更容易维护和更改。:)。

# java - Java 包 Log4J2：MapFilters

> ID：12768549
> 
> 赞同：3
> 
> 时间：2012-10-07T11:48:02.170
> 
> 标签：java, logging, log4j, log4j2

我有一个关于 MapFilters 的简单问题。好吧，我知道什么是映射：简单的键值对。**现在 log4j 允许通过（来自网站的示例**）过滤所谓的地图消息：

```
 <MapFilter onMatch="ACCEPT" onMismatch="DENY" operator="or">
    <KeyValuePair key="eventId" value="Login"/>
    <KeyValuePair key="eventId" value="Logout"/>
  </MapFilter> 
```

但是我在代码中的哪里定义这些消息。我试过这样的：

```
 MapMessage mm = new MapMessage();
    mm.put("eventId", "Login");
    logger.exit(mm); 
```

但这不是处理这个问题的一种方便的方法，顺便说一句：它不起作用。

你知道这个话题更详细的介绍吗？API在这里并没有真正帮助我。

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-19T09:18:59.487

我在配置时遇到了上述问题`MapFilter`。 `ThreadContextMapFilter`以类似的方式工作，但在这种情况下，我们必须填充`ThreadContext`地图并且一切正常。成功背后的原因`ThreadContextMapFilter`是`ThreadContext`map 是基于上下文的，它对同一上下文中的所有日志事件都有效，但`MapFilter`它的工作原理`MapMessage`不是基于上下文 (MapMessage)，而是基于事件，因此对于每个日志事件我们必须传递`MapMessage`as 参数`MapFilter`才能工作。

相关配置和代码：

```
<configuration status="WARN" name="abcd">
    <properties/>
    <MapFilter onMatch="ACCEPT" onMismatch="DENY">
        <KeyValuePair key="Mic" value="Mic123"/>
    </MapFilter>                 
        ...........
        ........... <<Put other relevant configurations here>>
</configuration> 
```

Java代码：

```
public static void main(String args[]) {
    MapMessage mapMessage = new MapMessage();

    mapMessage.put("Mic", "Mic123");
    log4j2Tester.logger.debug(mapMessage,new Exception("Okies"));
    log4j2Tester.logger.debug(mapMessage);
} 
```

在上面的代码中，`log4j2Tester`是我的独立类的对象，`logger`是配置的记录器。

希望这篇文章能解决你的问题。快乐编码。

# java - 无法创建视图：com/ibm/domino/xsp/module/nsf/platform/NotesPlatform

> ID：12768555
> 
> 赞同：0
> 
> 时间：2012-10-07T11:48:51.493
> 
> 标签：java, lotus-notes, xpages, osx-mountain-lion

我试图在 Mac 上的笔记客户端中打开一个 xpage，但出现错误。我已经尝试了许多不同的 xpage，但它们都不能在 notes 客户端中工作，而且我得到了同样的错误。

注释 版本 8.5.3FP2 SHF143 ![在此处输入图像描述](../Images/9125320f7903ae9367ad0c8a6e8bd44f.png) OSX 10.8.2

有任何想法吗？

java.lang.NoClassDefFoundError: com/ibm/domino/xsp/module/nsf/platform/NotesPlatform at com.ibm.xsp.rcp.XspViewPart.init(XspViewPart.java:105) at org.eclipse.ui.internal.ViewReference .createPartHelper(ViewReference.java:344) 在 org.eclipse.ui.internal.ViewReference.createPart(ViewReference.java:230) 在 org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:594) 在 org. eclipse.ui.internal.PartPane.setVisible(PartPane.java:306) at org.eclipse.ui.internal.ViewPane.setVisible(ViewPane.java:531) at org.eclipse.ui.internal.presentations.PresentablePart.setVisible( PresentablePart.java:180) 在 com.ibm.rcp.ui.internal.presentations.StandAloneStackPresentation.selectPart(StandAloneStackPresentation.java:306) 在 org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:1256）在 org.eclipse.ui.internal.PartStack.showPart(PartStack.java:1608) 在 org.eclipse.ui.internal.PartStack .createControl(PartStack.java:649) 在 org.eclipse.ui.internal.PartStack.createControl(PartStack.java:576) 在 org.eclipse.ui.internal.PartSashContainer.createControl(PartSashContainer.java:568) 在 org. eclipse.ui.internal.PerspectiveHelper.activate(PerspectiveHelper.java:271) 在 org.eclipse.ui.internal.Perspective.onActivate(Perspective.java:968) 在 org.eclipse.ui.internal.WorkbenchPage.setPerspective(WorkbenchPage. java:3568) 在 org.eclipse.ui.internal.WorkbenchPage.access$16(WorkbenchPage.java:1016) 在 org.eclipse.ui.busySetPerspective(WorkbenchPage.java:1032)。 internal.WorkbenchPage 18 美元。在 org.eclipse.ui.internal.WorkbenchPage.setPerspective(WorkbenchPage.java:3665) 在 com.ibm 的 org.eclipse.swt.custom.BusyIndi​​cator.showWhile(BusyIndi​​cator.java:70) 运行(WorkbenchPage.java:3667) .rcp.platform.personality.internal.window.DynamicPerspective.open(DynamicPerspective.java:90) 在 com.ibm.rcp.platform.personality.internal.window.SwitcherWindowHelper.show(SwitcherWindowHelper.java:238) 在 com.ibm .rcp.platform.personality.widgets.TabbedPerspectiveSwitcher.show(TabbedPerspectiveSwitcher.java:1310) 在 com.ibm.xsp.rcp.xphandler.OpenXPHandler.createXPagesView(OpenXPHandler.java:254) 在 com.ibm.xsp.rcp.xphandler .OpenXPHandler.run(OpenXPHandler.java:94) 在 org.eclipse.ui.internal.UILockListener.doPendingWork(UILockListener.java:155) 在 org.eclipse.ui.internal.UISynchronizer$3.run(UISynchronizer.java:158) 在 org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134) 在 org.eclipse.swt.widgets.Display 的 org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35) .runAsyncMessages(Display.java:3515) 在 org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3243) 在 org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2384) 在 org. eclipse.ui.internal.Workbench.runUI(Workbench.java:2348) at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2200) at org.eclipse.ui.internal.Workbench$5.run( Workbench.java:495) 在 org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:288) 在 org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:490) 在 org.eclipse .ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) 在 com.ibm.rcp。在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.DelegatingMethodAccessorImpl.personality.framework.internal.RCPApplication.run(RCPApplication.java:67)。 invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.eclipse.equinox.internal.app.EclipseAppContainer.callMethodWithException(EclipseAppContainer.java:574) at org.eclipse .equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:195) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 在 org.eclipse.core.runtime.internal .adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) 在 org.eclipse.core.runtime.adaptor.EclipseStarter。在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke ( NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.eclipse.equinox.launcher.Main.invokeFramework (Main.java:561) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:501) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1239) 在 com.ibm。 rcp.core.internal.launcher.Main.startLaunch(Main.java:880) 在 com.ibm.rcp.core.internal.launcher.Main.main(Main.java:1290) 在 com.ibm.rcp.core。 internal.launcher.Main.run(Main.java:1210)runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke( DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:561) 在 org.eclipse.equinox.launcher .Main.basicRun(Main.java:501) at org.eclipse.equinox.launcher.Main.run(Main.java:1239) at com.ibm.rcp.core.internal.launcher.Main.startLaunch(Main.java :880) 在 com.ibm.rcp.core.internal.launcher.Main.main(Main.java:1290) 在 com.ibm.rcp.core.internal.launcher.Main.run(Main.java:1210)runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke( DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:561) 在 org.eclipse.equinox.launcher .Main.basicRun(Main.java:501) at org.eclipse.equinox.launcher.Main.run(Main.java:1239) at com.ibm.rcp.core.internal.launcher.Main.startLaunch(Main.java :880) 在 com.ibm.rcp.core.internal.launcher.Main.main(Main.java:1290) 在 com.ibm.rcp.core.internal.launcher.Main.run(Main.java:1210)NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method. java:597) 在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:561) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:501) 在 org.eclipse.equinox.launcher .Main.run(Main.java:1239) 在 com.ibm.rcp.core.internal.launcher.Main.startLaunch(Main.java:880) 在 com.ibm.rcp.core.internal.launcher.Main.main (Main.java:1290) 在 com.ibm.rcp.core.internal.launcher.Main.run(Main.java:1210)NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method. java:597) 在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:561) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:501) 在 org.eclipse.equinox.launcher .Main.run(Main.java:1239) 在 com.ibm.rcp.core.internal.launcher.Main.startLaunch(Main.java:880) 在 com.ibm.rcp.core.internal.launcher.Main.main (Main.java:1290) 在 com.ibm.rcp.core.internal.launcher.Main.run(Main.java:1210)invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:561) at org.eclipse.equinox .launcher.Main.basicRun(Main.java:501) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1239) 在 com.ibm.rcp.core.internal.launcher.Main.startLaunch(Main .java:880) 在 com.ibm.rcp.core.internal.launcher.Main.main(Main.java:1290) 在 com.ibm.rcp.core.internal.launcher.Main.run(Main.java:1210) )invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:561) at org.eclipse.equinox .launcher.Main.basicRun(Main.java:501) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1239) 在 com.ibm.rcp.core.internal.launcher.Main.startLaunch(Main .java:880) 在 com.ibm.rcp.core.internal.launcher.Main.main(Main.java:1290) 在 com.ibm.rcp.core.internal.launcher.Main.run(Main.java:1210) )startLaunch(Main.java:880) 在 com.ibm.rcp.core.internal.launcher.Main.main(Main.java:1290) 在 com.ibm.rcp.core.internal.launcher.Main.run(Main.爪哇：1210）startLaunch(Main.java:880) 在 com.ibm.rcp.core.internal.launcher.Main.main(Main.java:1290) 在 com.ibm.rcp.core.internal.launcher.Main.run(Main.爪哇：1210）

# php - 反序列化jQuery序列化表单时PHP反序列化错误

> ID：12768556
> 
> 赞同：1
> 
> 时间：2012-10-07T11:48:51.683
> 
> 标签：php, jquery

> **可能重复：**
> [jquery .serialize() 之后如何处理 php](https://stackoverflow.com/questions/6164691/what-to-do-with-php-after-jquery-serialize)

我正在使用 jQuery 序列化以下表单，使用 ajax 将其发送到服务器并使用 PHP 反序列化。

当我反序列化时，我收到错误：

`Error at offset 0 of 39 bytes`

```
<form  id="Marriage" style="display: none">
  <input type="text" name="city" class="txtt" value="city"/>
  <input type='button' value='Apply' id="msendsend" class="sendaf" name="jobforming"/>
</form> 
```

这是发送此表单的 jquery 函数

```
 $(document).ready(function () {
    $('#msendsend').click(function () {
        var id=getParam('ID');
        $.ajax({
            type:'POST',
            url:"send.php",

            data:{option:'apply',  sr:$("form").serialize()},
            success:function (jd) {
            }
        });
    });
}); 
```

这是服务器代码：

```
 if($_REQUEST['option']=='catapply') {
    $sc=$_POST['sr'];
    mysql_query("insert into user_data(uid,data) values('$session->userid','$sc')");
  } 
```

在这里我正在反序列化。

```
 $sql = mysql_query("SELECT * from user_data");
        while ($row = mysql_fetch_array($sql)) {
            $un = unserialize($row['data']);

            $city=$un['city'];
            echo $city;
        } 
```

数据库中的数据显示为

```
to=&select_category=25&msg=&city=laho 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T12:03:04.117

jQuery 的序列化函数与 PHP 的不同。它创建一个查询字符串，正如您在数据库中看到的那样。
这种格式可以在 PHP 中使用[parse_str 函数](http://php.net/manual/en/function.parse-str.php)进行解码。使用它而不是反序列化。

但是，与其手动解析它，不如将表单数据作为查询字符串发布：

```
data: $("form").serialize(), 
```

您可以添加一个隐藏字段来传达 option=apply 值。

这样，您不必解码任何内容（它已经在 $_POST 中），并且您可以将每个值插入单独的行中。以后会省去很多麻烦，比如当有更多的数据需要搜索的时候。

# sql - 如何使用游标在sql中的其他数据下查找数据

> ID：12768564
> 
> 赞同：0
> 
> 时间：2012-10-07T11:50:11.333
> 
> 标签：sql, oracle, plsql, aggregation

我有一张像这样的桌子：

```
create table police(
ssn
name
boss_name
salary
);

Insert into police values(1,’A’,’C’,10000);
Insert into police values(2,’B’,’D’,20000);
Insert into police values(3,’C’,’E’,30000);
Insert into police values(4,’D’,’E’,45000);
Insert into police values(5,’E’,NULL,55000); 
```

我想要一个`cursor`返回`total salary`的`polices who have same boss`。这里的结果将是： `30000(salary of C)+45000(salary of D)` 因为他们都在老板 E 之下。我是怎么做到的？我如何在 ORACLE pl/sql 或匿名块的 E 下找到 C 和 D？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:21:03.647

Gaurav Soni 和 APC 在他们的评论中给出了很好的建议。

一般经验法则 - 不要将游标用于可以通过直接 SQL 轻松解决的事情。直接 SQL 通常要快得多。

下面的 SQL 将列出每个老板，直接下属的总薪水，以及直接下属的数量。

```
select boss_name,
       sum(salary) total_salary,
       count(*) employee_count
  from police
 where boss_name is not null
 group by boss_name 
```

如果您需要迭代老板的，您当然可以使用上面的查询来定义您的光标。但是您不应该使用游标来计算总数。让 SQL 完成这项工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-07T13:11:13.967

试试这个代码：

```
set serveroutput on;
declare
 cboss_name varchar2(30) ;
 csalary number ;  
 CURSOR cur
 is       
  select boss_name,sum(salary)  as salary
  from police 
  where boss_name is not null 
  group by boss_name;
begin
   open cur;
   fetch cur into cboss_name,csalary;
    dbms_output.put_line('boss_name'||' '||'csalary');
    LOOP
    FETCH cur INTO cboss_name,csalary;
       EXIT WHEN cur%NOTFOUND;
       dbms_output.put_line(cboss_name||'         '||csalary);
   END LOOP;

   close cur;  
end; 
```

[在这里](http://www.techonthenet.com/oracle/loops/cursor_for.php)您可以找到有关游标和循环的更多信息。

# header - 对以太网帧的标头大小感到困惑

> ID：12768566
> 
> 赞同：3
> 
> 时间：2012-10-07T11:50:21.747
> 
> 标签：header, frame, lan, ethernet

我正在研究一些关于`VLANs`并遇到`VLAN tag`标题的事情。

如果我们有一个标准的 MTU `802.3 Ethernet frame`（1518 字节），标头中包含什么`802.3`？

另外我们如何计算标题长度？

和有什么区别`802.3 and 802.1q`？我知道 VLAN 标记需要额外的字节，但如何计算需要多少字节`802.1q VLAN tag`？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T00:29:43.903

常规 802.3/Eth-II 以太网帧不携带 VLAN 信息。
802.1Q 可以将 VLAN（和 QoS）信息传送到接收端。

如果 ethertype 是 0x8100，那么你得到了一个 802.1Q 标签，除了 14 个字节（dmac+smac+type）之外，它还有另外 4 个字节。

请参阅维基百科以供参考。[http://en.wikipedia.org/wiki/Ethernet_frame](http://en.wikipedia.org/wiki/Ethernet_frame)

**编辑：**

常规 Eth-II/802.3 的总长度为：

dmac(6)+smac(6)+etype(2)+payload(1500)+crc(4) = 1518字节

对于带有 802.1Q 标记的 Eth-II/802.3 的情况：

dmac(6)+smac(6)+8100(2)+vlan/Qos(2)+etype(2)+payload(1500)+crc(4) = 1522字节

# java - 使用 Eclipse 执行 JUnit 时出现内部错误

> ID：12768567
> 
> 赞同：1
> 
> 时间：2012-10-07T11:50:26.503
> 
> 标签：java, eclipse, junit

当我尝试使用我的 Eclipse Indigo IDE（在 Ubuntu 10.10 上）进行 JUnit 测试时，我在弹出窗口中看到此错误：

```
An internal error has occurred.
org.eclipse.ui.internal.ErrorViewPart cannot be cast to org.eclipse.ui.console.IConsoleView 
```

虽然 JUnit 测试没有问题，但错误只是出现了。有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:29:06.453

您可能想查看 workspace/.metadata/.logs 或 configuration/.log 文件。如果这些都不是决定性的，最好重新启动 Eclipse 并查看它是如何工作的。如果问题仍然存在，并且您从日志中获得了一些线索，那么这就是唯一的方法。

# c# - 在 C# Webclient 类输出中

> ID：12768572
> 
> 赞同：3
> 
> 时间：2012-10-07T11:51:45.987
> 
> 标签：c#

在 C# 控制台应用程序中，我需要捕获“Internet 无法显示网页”，然后我可以进行检查。如果互联网浏览器打开 url 意味着互联网连接在那里，否则连接断开。我正在使用下面的代码

```
 WebClient client = new WebClient();
        string value = client.DownloadString("http://foo.com");
        Console.WriteLine(value.Length);
        Console.WriteLine(value);
        Console.WriteLine("Press any key to continue");

        Console.ReadKey(true); 
```

请设置捕获输出的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:57:28.480

您必须从 Web 客户端获取状态代码。

根据状态码，您可以识别当前连接的状态。

请参考以下代码。

[如何从 webclient 获取状态码？](https://stackoverflow.com/questions/3574659/how-to-get-status-code-from-webclient)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:54:48.870

```
WebClient client = new WebClient();
string value;

try
{
    value = client.DownloadString("http://foo.com");
}
catch (WebException ex)
{
    value = ex.Message;
}

Console.WriteLine(value.Length);
Console.WriteLine(value);
Console.WriteLine("Press any key to continue");
Console.ReadKey(true); 
```

# session - 插入自定义对象后损坏 Kohana 会话

> ID：12768576
> 
> 赞同：1
> 
> 时间：2012-10-07T11:52:33.017
> 
> 标签：session, object, kohana, kohana-3, corrupt

**描述**

我正在尝试将一个自定义对象添加`ReviewHolder`到会话中。这是在“审查”控制器中完成的。该类`ReviewHolder`包含在`classes/controller/review.php`文件中。我正在使用 Kohana 3.2 版。

**编码**

```
$session = Session::instance();
$reviewholder = $session->get('reviewholder');
if($reviewholder == null) {
    $session->set('reviewholder', new ReviewHolder());
} 
```

**问题**

问题是，在我执行上述代码后，会话被破坏，几乎整个网站都停止正常运行。这是每个页面上的错误消息：

```
Session_Exception [ 1 ]: Error reading session data. 
```

**奇怪的部分**

从“review”控制器加载的所有页面仍然正常运行！看起来上面的代码搞乱了应用程序中的所有其他会话......

**调试**

我已经调试了会话以查看是否使用以下代码正确设置了对象：

```
echo Debug::vars($session->get('reviewholder')); 
```

这正确显示了对象，因此它已在会话中设置。

* * *

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T23:03:25.327

会话文件中的内容并不重要。

我所知道的是，您只能存储在会话中序列化的对象。

序列化后，您可以将其存储在会话中并再次使其成为对象以供以后使用。您可以反序列化序列化的对象。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T21:22:46.893

在会话中存储自定义对象时，我发现以下内容对我有用：

1.  确保您的会话目录在 PHP 中设置正确，即。目录存在，权限允许您的网络服务器写入目录

2.  通过添加如下行强制将对象的类加载到 bootstrap.php 中： require_once( Kohana::find_file('classes','Library/MyClass') );

在这两个步骤之后，我不再看到会话损坏异常

# asp.net - 缓存中的存储问题

> ID：12768578
> 
> 赞同：0
> 
> 时间：2012-10-07T11:53:08.410
> 
> 标签：asp.net, caching

我通过限制登录失败次数实现了蛮力保护，如下所示：http: [//madskristensen.net/post/Brute-force-protect-your-website.aspx](http://madskristensen.net/post/Brute-force-protect-your-website.aspx) 但我遇到了两个问题：

*   经过一定时间（在我的情况下为 2 分钟）缓存中的记录没有过期，我无法再次登录。这意味着当函数检查失败尝试的次数时，它仍然会在这 5 分钟后获得允许的最大值
*   据我了解，来自 MSDN 的缓存是应用程序的单一存储。从我在我的应用程序中看到的情况来看，缓存似乎是每个应用程序每个 IP 的。为什么？有什么建议么？这是我的代码：

    ```
    int CountOfFailedLoginAttempts()
    {
       if(Cache["L1|"+TextBox1.Text]==null)
       {
           return 0;
       }
       return (int) Cache["L1|" + TextBox1.Text];

    }
    void AddFailedAttempt()
    {
        if(Cache["L1|"+TextBox1.Text]==null)
        {
            Cache.Insert("L1|"+TextBox1.Text,1,null,System.Web.Caching.Cache.NoAbsoluteExpiration,new TimeSpan(0,2,0));
        }
        else
        {
            int tries = (int) Cache["L1|" + TextBox1.Text];
            Cache["L1|" + TextBox1.Text] = tries + 1;
        }
    }
    void ClearFailedAttemptCounter()
    {
        Cache.Remove("L1|" + TextBox1.Text);
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        if (CountOfFailedLoginAttempts() >= 5)
        {
            Label1.Text = "Login will be unavailable for 2 minutes";
        }
        else
        {
            SqlConnection con =
                new SqlConnection("valid connection string");
            SqlCommand cmd = new SqlCommand("Select top 1 password from users WHERE UserName=@UN", con);
            cmd.CommandTimeout = 600;
            cmd.Parameters.Add(new SqlParameter("UN", TextBox1.Text));
            con.Open();
            string res = (string) cmd.ExecuteScalar();
            con.Close();
            if (res == TextBox2.Text)
            {
                FormsAuthentication.RedirectFromLoginPage(TextBox1.Text, true);
                ClearFailedAttemptCounter();
            }
            else
            {
                Label1.Text = "Wrong password. "+(5-CountOfFailedLoginAttempts()).ToString()+"more attempts and access will be suspended for 2 minutes.";
                AddFailedAttempt();
            }
        }
    } 
    ```

    }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:12:21.483

您正在使用滑动到期（2 分钟），这意味着您的缓存项将保留，而有人仍在该时间内读取该值。这意味着如果您每分钟都重试，您的帐户将被永远封锁。

缓存是缓存，不是关键数据存储。您不能指望剩余两分钟的项目，服务器上的内存压力可能会迫使 ASP.NET 从缓存中逐出项目。网络农场/花园也有可能为您提供多个工作进程（可能分布在几台机器上），它们都将拥有自己的缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:11:33.987

感谢您的回答。事实证明，问题出在这一行：

```
Cache["L1|" + TextBox1.Text] = tries + 1; 
```

机制与我想象的完全不同。它不是替换值，而是删除缓存中指定键的值，并插入新的值，**但**没有过期设置。正因为如此，价值似乎永不过期。这与绝对和滑动到期模式有关。我已经解决了这样的问题：

```
void AddFailedAttempt()
    {
        if(Cache["L1|"+TextBox1.Text]==null)
        {
            Cache.Insert("L1|"+TextBox1.Text,1,null,System.Web.Caching.Cache.NoAbsoluteExpiration,TimeSpan.FromMinutes(2));
        }
        else
        {
            int tries = (int) Cache["L1|" + TextBox1.Text];
            Cache.Remove("L1" + TextBox1.Text);
            Cache.Insert("L1|" + TextBox1.Text, tries+1, null, System.Web.Caching.Cache.NoAbsoluteExpiration, TimeSpan.FromMinutes(2));
        }
    } 
```

这样，一切正常。

# asp.net-mvc-4 - WebSecurity.InitializeDatabaseConnection 上的键“attachdbfilename”的值无效

> ID：12768579
> 
> 赞同：1
> 
> 时间：2012-10-07T11:53:15.217
> 
> 标签：asp.net-mvc-4, connection-string, entity-framework-5, localdb, simplemembership

尝试使用 SimpleMembership 初始化我的数据库连接时收到此错误消息。第一个初始化语句通过，而第二个没有。目标是在运行 Azure 模拟器或部署时使用 Azure 服务配置中定义的连接字符串。

**网络配置：**

```
<connectionStrings>
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-**********;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-**********.mdf" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

**Azure .cscfg 配置文件：**

```
<Setting name="SqlConnectionString" value="Server=Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-********;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-********.mdf" /> 
```

**SimpleMembershipInitializer：**

```
string connectionStringName = "DefaultConnection";
string connectionString = CloudConfigurationManager.GetSetting("SqlConnectionString");
const string userTableName = "UserProfile";
const string providerName = "System.Data.SqlClient";
const string userIdColumn = "UserId";
const string userNameColumn = "UserName";

// This works fine.
// WebSecurity.InitializeDatabaseConnection(connectionStringName, userTableName, userIdColumn, userNameColumn, autoCreateTables: true);

// This throws exception.
// WebSecurity.InitializeDatabaseConnection(connectionString, providerName, userTableName, userIdColumn, userNameColumn, autoCreateTables: true); 
```

**环境：** Visual Studio 2012、EntityFramework 5.0 和具有默认 SimpleMembership 结构的 MVC4 RTM。

**完整的堆栈跟踪：**

```
[ArgumentException: Invalid value for key 'attachdbfilename'.]
   System.Data.SqlClient.SqlConnectionString.VerifyLocalHostAndFixup(String& host, Boolean enforceLocalHost, Boolean fixup) +888986
   System.Data.SqlClient.SqlConnectionString..ctor(String connectionString) +5330002
   System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous) +24
   System.Data.ProviderBase.DbConnectionFactory.GetConnectionPoolGroup(DbConnectionPoolKey key, DbConnectionPoolGroupOptions poolOptions, DbConnectionOptions& userConnectionOptions) +167
   System.Data.SqlClient.SqlConnection.ConnectionString_Set(DbConnectionPoolKey key) +61
   System.Data.SqlClient.SqlConnection.set_ConnectionString(String value) +66
   WebMatrix.Data.DbProviderFactoryWrapper.CreateConnection(String connectionString) +96
   WebMatrix.Data.<>c__DisplayClass15.<OpenConnectionStringInternal>b__14() +16
   WebMatrix.Data.Database.get_Connection() +19
   WebMatrix.Data.Database.EnsureConnectionOpen() +12
   WebMatrix.Data.<QueryInternal>d__0.MoveNext() +66
   System.Linq.Enumerable.FirstOrDefault(IEnumerable`1 source) +164
   WebMatrix.Data.Database.QuerySingle(String commandText, Object[] args) +103
   WebMatrix.WebData.DatabaseWrapper.QuerySingle(String commandText, Object[] parameters) +14
   WebMatrix.WebData.SimpleMembershipProvider.CheckTableExists(IDatabase db, String tableName) +57
   WebMatrix.WebData.SimpleMembershipProvider.CreateTablesIfNeeded() +49
   WebMatrix.WebData.WebSecurity.InitializeMembershipProvider(SimpleMembershipProvider simpleMembership, DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean createTables) +73
   WebMatrix.WebData.WebSecurity.InitializeProviders(DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +51
   WebMatrix.WebData.WebSecurity.InitializeDatabaseConnection(String connectionString, String providerName, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +63
   MyProject.Filters.SimpleMembershipInitializer..ctor() in c:\Repos\MyRepo\trunk\Web\MyProject\Filters\InitializeSimpleMembershipAttribute.cs:55

[InvalidOperationException: The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588]
   MyProject.Filters.SimpleMembershipInitializer..ctor() in c:\Repos\MyRepo\trunk\Web\MyProject\Filters\InitializeSimpleMembershipAttribute.cs:59

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +113
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +232
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +83
   System.Activator.CreateInstance(Type type) +6
   System.Threading.LazyHelpers`1.ActivatorFactorySelector() +68
   System.Threading.LazyInitializer.EnsureInitializedCore(T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory) +115
   System.Threading.LazyInitializer.EnsureInitialized(T& target, Boolean& initialized, Object& syncLock) +106
   MyProject.Filters.InitializeSimpleMembershipAttribute.OnActionExecuting(ActionExecutingContext filterContext) in c:\Repos\MyRepo\trunk\Web\MyProject\Filters\InitializeSimpleMembershipAttribute.cs:23
   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +69
   System.Web.Mvc.Async.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35() +21
   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +489
   System.Web.Mvc.Async.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35() +21
   System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__31(AsyncCallback asyncCallback, Object asyncState) +191
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +130
   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters, AsyncCallback callback, Object state) +197
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState) +446
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +130
   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeAction(ControllerContext controllerContext, String actionName, AsyncCallback callback, Object state) +302
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__17(AsyncCallback asyncCallback, Object asyncState) +30
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +130
   System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state) +382
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +130
   System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +317
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +15
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__2(AsyncCallback asyncCallback, Object asyncState) +71
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +130
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +249
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +50
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +301
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:18:59.713

[如本文](https://stackoverflow.com/questions/12463228/unable-to-connect-to-localdb-in-vs2012-a-network-related-or-instance-specific/12463683#12463683)所述，在我看来，您可能正遭受缺乏双重转义（do`\\v11.0`而不是`\v11.0`）的困扰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:42:16.967

我很惭愧地意识到我的连接字符串中有错字。我从 Azure 部署配置文件中获取连接字符串，例如：

```
<Setting name="SqlConnectionString" value="Server=Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-********;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-********.mdf" /> 
```

错字包含在此处，位于值字符串的开头。一定是复制粘贴错误。

此字符串在 Azure 配置文件 Local.cscfg 和 Cloud.cscfg 中重复，分别用于 Azure 模拟器和 Azure 部署，以及在 web.config 中用于在模拟器外部本地运行。错字仅在 Local.cscfg 文件中，这让我在试图弄清楚为什么它在某些情况下不起作用时非常困惑。此外，由于某种原因，我很难发现这个错字。事后看来，我不明白我是怎么不早点弄清楚的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T11:53:15.217

我还没有解决方案，但到目前为止，这是我自己的调查和理论：

我查看了 WebSecurity.InitializeDatabaseConnection() 的源代码，并认为我可能发现了一个错误。它似乎从未设置过 DatabaseConnectionInfo.Type 属性，该属性默认为 ConnectionStringName，这可以解释为什么它不喜欢我的连接字符串，因为它会将其解释为连接字符串名称。

**网络安全类：**

```
public static void InitializeDatabaseConnection(string connectionString, string providerName, string userTableName, string userIdColumn, string userNameColumn, bool autoCreateTables)
{
  WebSecurity.InitializeProviders(new DatabaseConnectionInfo()
  {
    ConnectionString = connectionString,
    ProviderName = providerName
  }, userTableName, userIdColumn, userNameColumn, autoCreateTables);
} 
```

**数据库连接信息类：**

```
public Database Connect()
{
  switch (this.Type)
  {
    case DatabaseConnectionInfo.ConnectionType.ConnectionStringName:
      return Database.Open(this.ConnectionStringName);
    case DatabaseConnectionInfo.ConnectionType.ConnectionString:
      return Database.OpenConnectionString(this.ConnectionString, this.ProviderName);
    default:
      return (Database) null;
  }
}

private enum ConnectionType
{
  ConnectionStringName,
  ConnectionString,
} 
```

# ruby - 我如何通过表单嵌入 ruby .rb 文件，这样 ruby .rb 将被执行并且结果在视图中可见

> ID：12768581
> 
> 赞同：2
> 
> 时间：2012-10-07T11:53:20.173
> 
> 标签：ruby

假设我想通过表单将此代码嵌入到单独的 ruby​​.rb 文件中：

```
print "Hello, Please enter a value:"  
var = gets.to_i  
if var == 10  
  puts "Correct"  
else  
  puts "Your answer is incorrect"  
end 
```

在视图中提交按钮后，用户将看到结果是正确的还是不正确的。
最好的方式是通过表单嵌入文件 ruby​​.rb，它更方便，但不是必需的。
你能想出如何让它发挥作用吗？我会很高兴从你那里得到一些奖励。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:11:53.517

A simple way to put a basic form up as a web site is [Sinatra](http://sinatrarb.com/). The following is a web app in a single file, using Sinatra.

```
#!/usr/bin/env ruby
require 'sinatra'

get '/' do
  erb :guess
end

post '/' do
  @guess = params[:guess].to_i
  if @guess == 10
    @message = "Correct!"
  else
    @message = "Try again..."
  end
  erb :guess
end

__END__
@@ layout
<html>
  <body>
   <%= yield %>
  </body>
</html>

@@ guess
<form action="" method="post">
  <p>Guess a number: <input type="text" name="guess"/></p>
  <p><%= @message %></p>
</form> 
```

Install the sinatra gem and run the file. You'll see a message like

```
== Sinatra/1.3.3 has taken the stage on 4567 
```

Then point your browser at `http://localhost:4567/` and your app is online.

# ruby - 有没有办法给 gemspec 添加冲突

> ID：12768582
> 
> 赞同：1
> 
> 时间：2012-10-07T11:53:31.197
> 
> 标签：ruby, rubygems, gem, gemspecs

我正在制作一个名为`ugly_fork_of_foo`. 我可以在我的 gemspec 中添加一些东西来告诉系统丑陋的fork_of_foo 与 foo 冲突，两者不能同时安装吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:41:01.527

据我所知，您无法在 gemspec 中定义冲突。

# nsuserdefaults - 模型更改后，NSTextField 值不会立即更新

> ID：12768589
> 
> 赞同：0
> 
> 时间：2012-10-07T11:54:53.503
> 
> 标签：nsuserdefaults, cocoa-bindings

![](../Images/a44aabcae438adb5d8e837b11ed5069f.png)

我用一个键绑定文本字段，`NSUserDefaults`“选择文件...”按钮修改模型。

但是单击按钮后文本字段不会更新。我必须重新打开窗口才能看到新值已填充到文本字段中。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:20:20.447

这是因为我的钥匙有一个点“。” 其中混淆了数据绑定。

它是： `[ defaults setValue: xxx forKey:@"proxy.url"]`

它应该是： `[ defaults setValue: xxx forKey:@"proxy_url"]`

# java - 在容器中心添加面板

> ID：12768592
> 
> 赞同：2
> 
> 时间：2012-10-07T11:55:32.200
> 
> 标签：java, swing, layout-manager, cardlayout

我有一个`JPanel`which is a `BorderLayout`，我在顶部设置了一个新面板，`JDesktopPane`在中心设置了容器 ( )，在底部设置了另一个面板。现在我想在容器中心动态设置面板（卡片布局），因为我在下面显示层次结构

```
 top --> panel
panel(BorderLayout)center --> container(JDesktopPane) --> panel(CardLayout)
            bottom --> panel 
```

这里卡片布局包含不同的面板作为卡片。问题是我无法在容器中心显示每张卡片。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T11:57:38.423

> 如何显示它们的容器中心？

将它们放在带有 的面板中`GridBagLayout`，将它们添加为唯一没有约束的组件，它们将居中。有关示例，请参[见此答案。](https://stackoverflow.com/a/7181197/418556)

![](../Images/c058125e61cbffae7a1f5014b1bc0aa9.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-07T13:27:55.717

**-** `GroupLayout`提供了一种轻松的方式来安排您想要的组件。

**-** `GroupLayout`由`NetBeans`集团于2005年开发。

**-**您可以`Windows Builder Pro`从 Google 免费下载并使用它。

# c# - C# Enum 忽略名称的顺序

> ID：12768593
> 
> 赞同：1
> 
> 时间：2012-10-07T11:55:36.183
> 
> 标签：c#, enums

我有下一个对象：

```
private enum Operation
{
        Power = 0x5E,             // ^
        Division = 0x2F,          // /
        Multiplication = 0x2A,    // *
        Subtraction = 0x2D,      // -
        Addition = 0x2B           // +
} 
```

当我想通过以下方式将其转换为 a`char[]`时：

```
private static char[] GetOperators()
{
        List<char> ExistingOperators = new List<char>();

        foreach (Operation enumOperator in Enum.GetValues(typeof(Operation)))
        {
                ExistingOperators.Add((char)enumOperator);
                Console.WriteLine(enumOperator);
        }

        return ExistingOperators.ToArray<char>();
} 
```

它在控制台上写入枚举的值，但从小到大排序。上面的示例输出：

```
Multiplication
Addition
Subtraction
Divison
Power 
```

我想要实现的目标：（因此数组与`enum`声明的顺序相同）

```
char[] { '^', '/', '*', '*', '-', '*' }; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T11:57:02.770

> 数组的元素按枚举常量的二进制值排序（即按它们的无符号大小）。

来源：http: [//msdn.microsoft.com/en-us/library/system.enum.getvalues.aspx](http://msdn.microsoft.com/en-us/library/system.enum.getvalues.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T12:07:03.720

您可以使用这些方法来维护顺序并关联一个值。请注意，代码是手绘的（未经测试）。

```
public ValueAttribute : Attribute
{
    public char Value { get; set; }
    public ValueAttribute(char value) { Value = value; }
}

private enum Operation
{
    [Value(0x5E)]
    Power = 1,
    [Value(0x2F)]
    Division = 2,
    [Value(0x2A)]
    Multiplication = 3,
    [Value(0x2D)]
    Subtraction = 4,
    [Value(0x2B)]
    Addition = 5,
}

private static char[] GetOperators()
{
    List<char> ExistingOperators = new List<char>();

    foreach (Operation enumOperator in Enum.GetValues(typeof(Operation)))
    {
            ExistingOperators.Add(enumOperator.Value());
            Console.WriteLine(enumOperator);
    }

    return ExistingOperators.ToArray<char>();
}

public static class Extensions
{
    public static char Value(this Operation op)
    {
        var attr = typeof(Operation)
            .GetField(op.ToString())
            .GetCustomAttributes(typeof(ValueAttribute), false)[0]
            as ValueAttribute;
        return attr.Value;
    }
} 
```

交替使用 IndexAttribute：

```
public IndexAttribute : Attribute
{
    public int Index { get; set; }
    public IndexAttribute(int index) { Index = index; }
}

private enum Operation
{
    [Index(1)]
    Power = 0x5E,
    [Index(2)]
    Division = 0x2F,
    [Index(3)]
    Multiplication = 0x2A,
    [Index(4)]
    Subtraction = 0x2D,
    [Index(5)]
    Addition = 0x2B,
}

public struct Datum
{
    int Index { get; set; }
    char Value { get; set; }
    Operation Op { get; set; }
}
private static char[] GetOperators()
{
    IEnumerable<Datum> data = new List<Datum>();

    foreach (Operation enumOperator in Enum.GetValues(typeof(Operation)))
    {
        data.Add(new Datum 
        { 
            Index = enumOperator.Index(), 
            Value = (char)enumOperator,
            Op = enumOperator
        });
    }

    // assuming you can use LINQ
    data = data.OrderBy(d => d.Index);
    data.Foreach(d => Console.WriteLine(d => d.Op));

    return data.Select(d => d.Value).ToArray();
}

public static class Extensions
{
    public static char Index(this Operation op)
    {
        var attr = typeof(Operation)
            .GetField(op.ToString())
            .GetCustomAttributes(typeof(IndexAttribute), false)[0]
            as IndexAttribute;
        return attr.Index;
    }
} 
```

# iphone - MPMoviePlayerController 在快速网络上不显示洗涤器

> ID：12768594
> 
> 赞同：1
> 
> 时间：2012-10-07T11:55:43.027
> 
> 标签：iphone, objective-c, ios

当使用 MPMoviePlayer 实例内联流式传输远程 mp3 文件时，在“快速”网络（如 3G 或 WiFi）上时，洗涤器将替换为标签“流式传输...”。

ControlStyle 设置为 MPMovieControlStyleEmbedded。

在像 Edge 这样的慢速连接上，洗涤器会显示。

这是为 iOS 5 编译的，在 iOS 6 上测试过。还有其他人遇到过吗？

有没有办法总是显示洗涤器而不仅仅是显示“流媒体......”？

谢谢，扬

# android - 从 Ringer 读出振动设置

> ID：12768597
> 
> 赞同：0
> 
> 时间：2012-10-07T11:55:59.850
> 
> 标签：android, vibration

我想读出振动设置，因为我暂时更改了它们并想重新设置原始设置。因此我存储这样的设置：

```
vibrate_save = amanager.getVibrateSetting(AudioManager.VIBRATE_TYPE_RINGER)); 
```

并在我更改回原始设置后进行设置：

```
amanager.setVibrateSetting(AudioManager.VIBRATE_TYPE_RINGER, vibrate_save); 
```

但是在读出后，vibrate_save 在 ICS 上的值为 3（只有 0、1、2 是可能的）。在 Android 2.2 上它可以工作。在解释中，我看到“此方法已弃用”。但替代方案是什么？

出现了这个错误：

```
10-07 13:53:58.720: E/AudioManager(6682): wrong value in setVibrateSetting vibrateType:0 vibrateSetting:3 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:54:57.273

我不认为 ICS 具有早期版本所做的振动设置。当我查看我的 ICS 手机（HTC）上的设置时，我看到的唯一选项是“呼叫和通知的振动反馈”，我所能做的就是打开或关闭它。在运行 2.3 的三星设备上，我可以将设备设置为“始终”、“从不”、“仅在静音模式下”或“仅在非静音模式下”振动。我不知道设备品牌在多大程度上是个问题，但似乎 ICS 中的设置不一样。我确实找到了以下内容，它允许您控制 ICS 似乎具有的 1 振动设置：[更改 Jelly Bean, Android 中的振动设置](https://stackoverflow.com/questions/11286116/changing-the-vibrate-settings-in-jelly-bean-android)。

# macos - 如何在 MATLAB 和 OS X 中使用 xlsread？

> ID：12768598
> 
> 赞同：1
> 
> 时间：2012-10-07T11:56:01.113
> 
> 标签：macos, excel, matlab, file-io

尝试调用 xlsread 时，我收到警告：

> 警告：无法启动 Excel 服务器进行导入，将使用“基本”模式。有关详细信息，请参阅帮助 XLSREAD。

帮助文件向我建议，因为我正在运行 OSX，我没有运行导致此警告的 excel COM 服务器。我想找到一个解决方案或确认它是无法解决的。

规格：我正在运行 MATLAB R2011a 和 OS X Lion。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T12:08:00.443

有两个主要选项：

1.  升级到 R2012b，[允许在所有平台上读取 Excel 文件中的工作表和范围](http://www.mathworks.com/help/matlab/release-notes.html)

2.  [使用Undocumented Matlab 这篇文章中](http://undocumentedmatlab.com/blog/xlswrite-for-mac-linux/)讨论的任何（有些涉及的）方法

# scala - Scala - 我们如何创建同一个类的类实例？

> ID：12768612
> 
> 赞同：0
> 
> 时间：2012-10-07T11:57:45.303
> 
> 标签：scala

我正在努力创建一个类本身的实例数组。

```
class A (arg: Int) {
    var a1 = new Array[A] (arg)
    ....
} 
```

以这种方式声明它会在运行时给出“java.lang.NullPointerException”。有什么办法可以消除这个异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:21:05.940

我确定您稍后会在代码中尝试访问数组 a1 的元素。在那里你得到你的例外。

我准备了一小段代码来演示它：

```
class A (arg: Int) {
    var a1=new Array[A] (arg)   
    def giveMeException(){
      println(a1(0).a1.length)
    }
}
object Program  extends App {
    val noExceptionA = new A(2);
    noExceptionA.a1(0) = new A(0);
    noExceptionA.a1(1) = new A(0);
    val exceptionA = new A(2);

    // Will print 0
    noExceptionA.giveMeException();

    // Will throw  java.lang.NullPointerException
    exceptionA.giveMeException();   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:36:08.670

这一切都归结为您希望通过此代码实现的目标：

```
var a1 = new Array[A] (arg) 
```

`arg`我猜你想要一个type 元素的数组`A`，但是这些元素应该是什么？默认情况下它们是`null`（或`0`用于原始类型）。稍后你访问这个数组（例如`a1(0)`，显然你得到`NullPointerException`.

所以你应该在创建后*填充*数组。这是第一种方法：

```
class A (arg: Int) {
    var al = Array.fill(arg)(new A(arg))  //WRONG!
} 
```

请注意，`Array.fill(3)("Foo")`结果是`["Foo", "Foo", "Foo"]`数组。你看到这里的问题了吗？创建时`new A(arg)`，您正在递归调用`new A(arg)`. 循环永远不会结束。同样，我不知道您想要实现什么，所以这是一个有效的正确示例：

```
class A (arg: Int) {
    var al = Array.fill(arg)(new A(arg - 1))
} 
```

调用`new A(3)`将创建一个数组`[A(2), A(2), A(2)]`。轮流每次调用`A(2)`都会创建`[A(1), A(1)]`. 递归结束`new A(0)`，创建一个空数组。

# javascript - 如何找到李的父母是谁？

> ID：12768613
> 
> 赞同：0
> 
> 时间：2012-10-07T11:57:48.033
> 
> 标签：javascript, html

假设我们有这个列表：

```
<ul title="Fruit">
<li onClick="func(this)">Apple</li>
<li onClick="func(this)">Banana</li>
</ul>
<ul title="Meat">
<li onClick="func(this)">Chiken</li>
<li onClick="func(this)">Duck</li>
</ul> 
```

是否可以找到点击**li**的**ul**？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:00:45.380

是的，使用`parentNode`：

```
<script type="text/javascript">
    function func(el) {
      alert(el.parentNode.title);    
    }
</script>

<ul title="Fruit">
<li onClick="func(this)">Apple</li>
<li onClick="func(this)">Banana</li>
</ul>
<ul title="Meat">
<li onClick="func(this)">Chiken</li>
<li onClick="func(this)">Duck</li>
</ul>​​​​​ 
```

另请注意，`value`它仅用于 和等**`form`**元素。`input``select`

**[演示](http://jsfiddle.net/JwELQ/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T12:00:55.537

您应该只传递`this`给该函数，并使用`.parentNode`它来获取其父级。

```
function func(element) {
  var parent = element.parentNode;
  // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T12:02:04.717

```
if(this.parentNode.title === "Fruit") {
 // first one
}
else {
   // the other ul
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T12:02:14.663

`obj.parentNode`或仅使用 jQuery：`$(obj).parent()`**

# java - 如何使用 FXMLLoader？

> ID：12768623
> 
> 赞同：1
> 
> 时间：2012-10-07T12:00:39.127
> 
> 标签：java, scala, javafx-2, javafx

我已将问题简化为 Scala + JavaFX 2 的 FXMLLoader 的简单行：

```
val path = "/com/myapp/views/main.fxml"

val loader = new FXMLLoader()
loader.setLocation(getClass.getResource(path))

val root = loader.load(getClass.getResourceAsStream(path)).asInstanceOf[Parent] 
```

我正在尝试`main.fxml`使用 FXMLLoader 加载文件，但最终得到：

> 类 javafx.fxml.FXMLLoader$ValueElement 不能使用修饰符“private”访问 com.myapp.controllers.MainWindow 类的成员

FXML 代码如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.net.*?>
<?import java.util.*?>
<?import javafx.collections.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.Scene?>
<?import javafx.scene.control.*?>
<?import javafx.scene.effect.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>
<?import javafx.scene.text.*?>

<BorderPane fx:controller="com.myapp.controllers.MainWindow" fx:id="mainWindow" prefHeight="703.0" prefWidth="803.0" xmlns:fx="http://javafx.com/fxml">
  <stylesheets>
    <URL value="@../styles/Styles.css" />
  </stylesheets>
  <top>
  ... 
```

根据错误消息，JavaFX 的 FXMLLoader 尝试访问我的控制器的某些私有属性。但是，我在控制器中没有私有成员：

```
class MainWindow extends Initializable {
  override def initialize(location: URL, resourceBundle: java.util.ResourceBundle) {
    print("init")
  }
} 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:36:47.593

错误指向私有构造函数。您是否需要在 Scala 中显式公开构造函数？您可以使用 javap 查看编译的内容。

# c# - 无法将类型“字符串”隐式转换为“双”问题

> ID：12768625
> 
> 赞同：1
> 
> 时间：2012-10-07T12:00:47.603
> 
> 标签：c#, forms

```
 private void updateButton_Click(object sender, EventArgs e)
    {
        //custID.Text = customers[id].ID.ToString();
        customers[id].Name = custName.Text.ToString();
        customers[id].Suburb = custSuburb.Text.ToString();
        customers[id].Balance = custBal.Text;
        customers[id].Year_used = custYear.Text;
    }

}

public class Customer
{
    protected string id;
    protected string name;
    protected string suburb;
    protected double balance;
    protected double year_used;

    public string ID
    {
        get { return id; }
    }

    public string Name
    {
        get { return name; }
        set { value = name; }
    }

    public string Suburb
    {
        get { return suburb; }
        set { value = suburb; }
    }

    public double Balance
    {
        get { return balance; }
        set { value = balance; }
    }

    public double Year_used
    {
        get { return year_used; }
        set { value = year_used; }
    }

    public Customer(string id, string name, string suburb, double balance, double year_used)
    {
        this.id = id;
        this.name = name;
        this.suburb = suburb;
        this.balance = balance;
        this.year_used = year_used;
    }

} 
```

当我尝试运行代码时似乎出现此错误？似乎是什么问题，我改变了所有有 int 的东西。

也：

```
 customers[id].Balance = custBal.Text;
        customers[id].Year_used = custYear.Text; 
```

custBal 的正确代码是什么。和 custYear。让它显示在我的表单上？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:03:53.053

假设您知道它们包含格式正确的数字，您想要的是解析每个字符串中包含的数值并将其分配给双精度类型变量（这涉及将您的数字表示形式作为字符串转换为另一个不同的二进制内容：双），不投它（它没有）。尝试：

```
customers[id].Balance = Double.Parse(custBal.Text);
customers[id].Year_used =  Double.Parse(custYear.Text); 
```

或者，如果您想针对返回的布尔值测试解析是否成功，而不是执行异常处理来测试 FormatException，您可以改用 TryParse：

```
if (!Double.TryParse(custBal.Text, customers[id].Balance))
   Console.WriteLine("Parse Error on custBal.Text");
if (!Double.TryParse(custYear.Text, customers[id].Year_used))
   Console.WriteLine("Parse Error on custYear.Text"); 
```

更多信息：

[http://msdn.microsoft.com/en-us/library/t9ebt447%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/t9ebt447%28v=vs.80%29.aspx)

[http://msdn.microsoft.com/en-us/library/994c0zb1.​​aspx](http://msdn.microsoft.com/en-us/library/994c0zb1.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T12:20:11.237

您的用户正在输入余额并正在输入文本，那么您如何知道文本可以用数字表示？C# 不会让您将字符串隐式转换为双精度，因为如果不对字符串做出实质性假设，就没有唯一的方法可以做到这一点，并且隐式转换永远不应引发异常（框架设计指南），因此最好不要提供隐式完全转换。

例如，既然是余额，那么如果用户输入“(100.25)”或“-100.25”或“-$100.25”或“-€100,25”或“负一百二十五美分”怎么办？这些是有效的字符串，那么如何将它们转换为双精度？

答案是没有一个正确的答案：您可以以任何对您有意义的方式将字符串映射为 double。当然，您可以编写自己的表单函数，`Func<String, double>`但 .Net 框架提供了一些函数来实现最常见和直观的转换。

其他人已经发布了`double.Parse`，`double.TryParse`所以我想补充一下，以确保也调查一下`NumberStyles`，`IFormatProvider`如果有必要的话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T12:03:15.523

您应该使用`Double.TryParse()`将字符串转换为 Double。您不能将字符串保存在 Double 数据类型上，并且 c# 中没有可用的隐式转换来做到这一点

```
Double result;
Double.TryParse(custBal.Text,out result); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T12:04:04.880

您不能直接分配`string`给 a `double`。您需要解析字符串以将它们分配给双精度数，如下所示：

```
customers[id].Balance = double.Parse(custBal.Text);
customers[id].Year_used = double.Parse(custYear.Text); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T12:11:33.887

将 'String' 转换为 'Double' 的最佳方法是使用 TryParse，如下所示：

```
int result;

if (double.TryParse(custBal.Text, out result))
    customers[id].Balance = result;
if (double.TryParse(custYear.Text, out result))
    customers[id].Year_used = result; 
```

# javascript - 根据头部排名重新排序数组元素

> ID：12768629
> 
> 赞同：0
> 
> 时间：2012-10-07T12:01:14.117
> 
> 标签：javascript, algorithm

我正在研究用javascript解决以下问题的算法。在头部 "1:2,3,4,6,5" 中有 "6" 和 "5" 尾部，这些尾部也可用于更高级别的头部，即在 "2:5,6" 中，因此 6 和 5 应该是从较低的头部删除，即“1：”。因为所有尾部值都应该由头部唯一存在。

输入数组

```
in = ["1:2,3,4,6,5", "2:5,6", "3:7,8,9"] 
```

期望的输出

```
out = ["1:2,3,4", "2:5,6", "3:7,8,9"] 
```

迭代是我能想到的唯一方法。解决这个问题的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:40:41.430

首先按他们的头对列表进行排序。然后以相反的顺序遍历排序列表。访问列表时，记录列表中存在的所有尾部元素。如果之前已经看到过尾元素，请将其从当前列表中删除。您可以使用哈希表记录元素是否被访问。

# cuda - pycuda 似乎是不确定的

> ID：12768637
> 
> 赞同：6
> 
> 时间：2012-10-07T12:02:39.733
> 
> 标签：cuda, pycuda

我对 cuda 有一个奇怪的问题，

在下面的片段中，

```
#include <stdio.h>

#define OUTPUT_SIZE         26

typedef $PRECISION REAL;

extern "C"    
{
    __global__ void test_coeff ( REAL* results )
    {
        int id      = blockDim.x * blockIdx.x + threadIdx.x;

        int out_index  = OUTPUT_SIZE * id;
        for (int i=0; i<OUTPUT_SIZE; i++)
        {               
            results[out_index+i]=id;
            printf("q");
        }
    }
} 
```

当我编译并运行代码（通过 pycuda）时，它按预期工作。当我删除 printf 时，结果很奇怪 - 大多数数组都正确填充，但其中一些似乎完全随机。

这是完整的python代码：

```
import numpy as np
import string

#pycuda stuff
import pycuda.driver as drv
import pycuda.autoinit

from pycuda.compiler import SourceModule

class MC:

    cudacodetemplate = """
    #include <stdio.h>

    #define OUTPUT_SIZE         26

    typedef $PRECISION REAL;

    extern "C"    
    {
        __global__ void test_coeff ( REAL* results )
        {
            int id      = blockDim.x * blockIdx.x + threadIdx.x;

            int out_index  = OUTPUT_SIZE * id;
            for (int i=0; i<OUTPUT_SIZE; i++)
            {               
                results[out_index+i]=id;
                //printf("q");
            }
        }
    }
    """

    def __init__(self, size, prec = np.float32):
        #800 meg should be enough . . .
        drv.limit.MALLOC_HEAP_SIZE = 1024*1024*800

        self.size       = size
        self.prec       = prec
        template        = string.Template(MC.cudacodetemplate)
        self.cudacode   = template.substitute( PRECISION = 'float' if prec==np.float32 else 'double')

        #self.module     = pycuda.compiler.SourceModule(self.cudacode, no_extern_c=True, options=['--ptxas-options=-v'])
        self.module     = SourceModule(self.cudacode, no_extern_c=True)

    def test(self, out_size):
        #try to precalc the co-efficients for just the elements of the vector that changes
        test  = np.zeros( ( 128, out_size*(2**self.size) ), dtype=self.prec )
        test2 = np.zeros( ( 128, out_size*(2**self.size) ), dtype=self.prec )

        test_coeff =  self.module.get_function ('test_coeff')
        test_coeff( drv.Out(test), block=(2**self.size,1,1), grid=( 128, 1 ) )
        test_coeff( drv.Out(test2), block=(2**self.size,1,1), grid=( 128, 1 ) )
        error = (test-test2)
        return error

if __name__ == '__main__':
    p1  = MC ( 5, np.float64 )
    err = p1.test(26)
    print err.max()
    print err.min() 
```

基本上，使用内核中的 printf，错误为 0 - 没有它，它会打印一些随机错误（在我的机器上大约 2452（最大值）和 -2583（最小值））

我不知道为什么。

我使用 geforce 570 在 pycuda 2012.2（Windows 7 64 位）上运行 cuda 4.2。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T18:24:16.877

这很可能是由于编译器优化造成的。您正在将一块内存 OUTPUT_SIZE 的长度设置为 id 的循环常数值。根据我的经验，编译器会将其优化为 memcpy 或 whathaveyou *，除非*循环中发生了其他事情——即你的 print 语句。此外，如果您不使用该内存块，编译器可能会优化整个循环。尝试调整优化级别，看看是否有不同的结果。

# mysql - Joomla 数据库 - 如何在 getQuery 中使用 LIMIT？

> ID：12768647
> 
> 赞同：21
> 
> 时间：2012-10-07T12:04:04.383
> 
> 标签：mysql, joomla, joomla2.5, joomla3.0, joomla3.1

我想使用 joomla 内置数据库类构建以下查询。

```
SELECT * 
FROM table_name
ORDER BY id DESC
LIMIT 1 
```

这是我到目前为止建立的查询。

```
$db =& JFactory::getDBO();       
$query  = $db->getQuery(true);
$query->select($db->nameQuote('*'));
$query->from($db->nameQuote(TABLE_PREFIX.'table_name'));      
$db->setQuery($query);      
$rows = $db->loadObjectList(); 
```

我不知道如何将限制（LIMIT 1）添加到查询中。有人可以告诉我该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-07T13:33:25.093

# 早于 Joomla 3.0

```
$db = JFactory::getDBO();    

$query  = $db->getQuery(true);
$query->select('*')
 ->from($db->nameQuote('#__table_name'))
 ->order($db->nameQuote('id').' desc');     
$db->setQuery($query,0,1);  

$rows = $db->loadObjectList(); 
```

`$db->setQuery`函数接受 3 个参数。第一个是查询，然后是开始，然后是限制。我们可以限制记录如上所示。

# 比 Joomla 3.0 更新

```
setLimit(integer $limit, integer $offset) 
```

如果你只想要一排

```
$query->setLimit(1); 
```

[阅读更多](http://api.joomla.org/cms-3/classes/JDatabaseQueryLimitable.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-27T12:34:07.900

这也应该有效：

```
$query->setLimit(1); 
```

文档：[http ://api.joomla.org/cms-3/classes/JDatabaseQueryLimitable.html](http://api.joomla.org/cms-3/classes/JDatabaseQueryLimitable.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-23T13:21:46.223

SetLimit 在 Joomla 3.4.x 中对我不起作用，因此请尝试：

模型内：

```
protected function getListQuery()
{
    // Create a new query object.
    $db = JFactory::getDBO();
    $query = $db->getQuery(true);

    // Select some fields
    $query->select('*');
    $query->from('#__your_table');

    $this->setState('list.limit', 0); // 0 = unlimited

    return $query;
} 
```

戴维斯回答：[https ://joomla.stackexchange.com/questions/4249/model-getlistquery-fetch-all-rows-with-using-jpagination](https://joomla.stackexchange.com/questions/4249/model-getlistquery-fetch-all-rows-with-using-jpagination)

> 在模型调用 getItems 之前运行它，它将为您加载所有项目。
> 
> 对此有一些警告。
> 
> 您也可以在模型之外执行此操作，例如，如果您在您的视图中。您可以执行以下操作：
> 
> $model = $this->getModel(); $model->setState('list.limit', 0);
> 
> 有时您可以在模型状态填充之前过早执行此操作，这将导致模型在您设置限制后从用户状态重新构建，基本上会覆盖限制。
> 
> 要解决此问题，您可以强制模型首先填充其状态：
> 
> $model = $this->getModel(); $model->getState(); $model->setState('list.limit', 0); 实际的 populateState 方法是受保护的，所以在模型之外你不能直接调用它，但是任何对 getState 的调用都会确保在返回 state 中的当前设置之前调用 populateState。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-08T10:39:32.100

**更新：**只需重新访问这个答案，我可以确认， 如果使用如下方法，这两种方法都可以正常工作`setLimit`。`order`

```
$query->order($db->qn($data->sort_column_name) . ' ' . $data->sort_column_order);
$query->setLimit($length,$start); 
```

* * *

**旧答案**

截至 2014 年 9 月 8 日，@Dasun 或 @escopecz 的解决方案在 J3.x 上不适合我

但这个老把戏对我有用，这很好，

```
 $query->order($db->qn('id') . ' DESC LIMIT 25'); 
```

关于您希望[**仅获取 1 行**](http://docs.joomla.org/Selecting_data_using_JDatabase#loadObject.28.29)的具体要求，您可以使用：

```
 $rows = $db->loadObject(); 
```

# magento - 无法将 magento 从 1.5.1 升级到 1.7

> ID：12768652
> 
> 赞同：3
> 
> 时间：2012-10-07T12:04:35.160
> 
> 标签：magento

请帮忙！我安装了 magento v 1.5.1，我想将其升级到 1.7，但是当我尝试列出升级时，这是我只看到的：

```
wp_theme_grayscale: 1.0.7 => 1.4.0
RicoNeitzel_VertNav: 0.3.1 => 0.4.0
Locale_Mage_community_fr_FR: 1.7.0.0 => 1.7.0.1
TBT_Enhancedgrid: 1.3.2.1 => 1.031 
```

有什么建议么？

全部升级后，并尝试再次列出所有升级，它再也看不到任何升级。

您的帮助将不胜感激。

编辑：

我使用了本指南。[http://turnkeye.com/blog/magento-upgrade-guide/](http://turnkeye.com/blog/magento-upgrade-guide/) 我没有收到任何错误。上面的更新只是我能看到的更新，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:14:23.830

OK，可以分享一下我升级成功的经验：

1.  转到系统 -> Magento Connect -> Magento Connect Manager

2.  使用您的用户名和密码登录

3.  点击“检查升级”按钮

4.您会注意到大多数包裹行变成黄色。这些软件包是唯一具有可用更新的软件包。转到每个包行，单击“操作”下拉菜单并选择可用的最新稳定版本。

注意：可用的稳定版本可能因每个软件包而异。例如，某些软件包可能具有 1.7.0.2 升级版本，而其他软件包可能具有 1.7.0.1 或更低版本。不要为此烦恼，只需选择可用的最新稳定版本即可。

1.  为所有软件包选择升级版本后，单击“提交更改”按钮。

2.  现在，你必须等待。给它一些时间。在升级过程中，您可能会看到各种可能很棘手的注释或输出，您可能认为该过程已完成。好吧，事实并非如此。等一下，再等几分钟。当控制台等“命令行”中大约一分钟没有任何活动时，该过程将完成。

3.  点击“刷新”按钮。你快完成了！从技术上讲，您已经完成了升级过程。

4.  转到您的 cPanel 文件管理器或 FTP 客户端并删除 var/ 目录中的所有内容。

5.  最后但同样重要的是，在 Admin -> Index Management 中重新索引数据

当您进入管理部分并向下滚动时，您会注意到它显示“Magento ver. 1.7.0.2”</p>

这个过程对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:46:49.927

请尝试运行

```
./mage list-upgrades 
```

在某些情况下，列表中可能没有 Mage_* 条目。在这种情况下，可以使用以下命令：

```
./mage install http://connect20.magentocommerce.com/community Mage_All_Latest --force 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T17:13:52.913

我现在开始工作了。我所做的是在升级后，我重新上传了我的数据库备份，中提琴错误消失了。该错误有一个提示，是的，因为如果表已经存在，它无法继续重复的事情。

# javascript - 检查 div 行数的功能在 IE9 中不起作用

> ID：12768653
> 
> 赞同：2
> 
> 时间：2012-10-07T12:04:46.080
> 
> 标签：javascript, jquery, dom, overflow

以下代码用于检查目标 div 在溢出（y-overflow）之前可以包含多少行（澄清：文本行）。

它的工作原理是克隆 DOM 元素，清空其内容，然后`<br>`一次添加一个标签（强制换行），每次检查是否溢出（通过检查是否 scrollHeight > clientHeight）。

在调试时我注意到它在 Chome 和 FF 中有效，但在 IE9 中，无论插入多少
标签，垂直滚动条都不会出现，因此循环永远不会正确退出。知道如何使它与 IE 一起工作吗？

[http://jsfiddle.net/zbdbq/5/](http://jsfiddle.net/zbdbq/5/)

```
function checkNumRows (obj){
    var overflow = false, rows = 0;

    var measureDiv = obj.clone().empty().css('overflow', 'auto'); //make a clone of the original
    measureDiv.appendTo(obj.parent()); //append it to DOM
    while (!overflow && rows < 500) {//set upper limit to 500 rows to prevent infinite looping for whatever reason
        measureDiv.append('<br>');
        overflow = measureDiv[0].scrollHeight > measureDiv[0].clientHeight ? true : false;
        rows = rows + 1;
    }

    measureDiv.remove(); //cleanup
    return rows - 1; //return max rows before overflow occured
}

alert(checkNumRows($("#testDiv"))); //IE incorrectly returns num rows as the max 499​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T23:23:11.847

这应该有效：

```
function checkNumRows (obj){
    var measureDiv = obj.clone().empty().appendTo(obj.parent());

    $span = $('<span>X</span>').appendTo(measureDiv);
    rows = Math.floor(measureDiv.height() / $span.height());

    measureDiv.remove();
    return rows;
}

alert(checkNumRows($("#testDiv"))); 
```

[http://jsfiddle.net/zbdbq/13/](http://jsfiddle.net/zbdbq/13/)

也许玩弄`$span.outerHeight()`以获得更好的结果..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:58:44.340

如果“行”是指自动调整大小的内联元素，则可以尝试根据 lineHeight CSS 样式进行检查。

```
function checkNumRows(obj) {
    var line_height = parseInt(obj.css('lineHeight').replace('/em|px/', ''));
    var max_rows = Math.floor(obj.height()/line_height);

    return max_rows;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T06:21:46.943

在将项目添加到克隆元素时，只需对代码进行少量更改，即可尝试添加一些“内容”。我无法 100% 回忆，但我似乎记得 IE 喜欢折叠空白空间，这会导致一些感知到的时髦行为——

在您的小提琴中，您调用 empty() （清空元素），然后继续附加一些本身为空的 br 元素-

```
 var measureDiv = obj.clone().empty().css('overflow', 'auto'); 
```

一种选择是添加一些内容来防止这种情况发生——即`.append('&nbsp;<br>')` [http://jsfiddle.net/zbdbq/9](http://jsfiddle.net/zbdbq/9)

我想同样你可以确保你没有一个空元素开始 - `obj.clone().empty().html('&nbsp;')...` [http://jsfiddle.net/zbdbq/10/](http://jsfiddle.net/zbdbq/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T15:22:54.130

由于您从外观上使用 jQuery，您应该直接执行此操作：

```
$("#myTable > tbody > tr").length 
```

该函数将仅计算此处使用“myTable”指定的直接表中的行。如果您也想考虑*嵌套表*，那么您应该使用：

```
$('#myTable tr').length; 
```

# iphone - 一个索引页 分隔页面的标签

> ID：12768654
> 
> 赞同：0
> 
> 时间：2012-10-07T12:05:19.437
> 
> 标签：iphone, css, jquery-mobile

**一个带有标签以分隔页面的索引页面。**

使用一个长的 HTML5 索引页面作为模板，使用不同的标签集来分隔每个页面上的页眉和页脚栏，使用包含所有外部文件和链接的清晰文件结构。

我知道 jQuery 可以通过索引页面为您做到这一点，并使用不同的标签集来分隔每个页面。但我被 jQuery 困在那里，CSS3 样式自由度有限。

我主要使用 CSS3 来设置页面样式，并使用 JQuery 来获取特性和功能。

我发现标签的 jQuery 方法是有限的，我坚持使用它。

是否有与 jQuery 类似的模板**示例**或**代码**，带有页眉和页脚以及同一 index.html 上各个页面的标签，而不是页面中的锚标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:05:16.703

多页布局？

*   [http://jquerymobile.com/demos/1.2.0/docs/pages/multipage-template.html](http://jquerymobile.com/demos/1.2.0/docs/pages/multipage-template.html)
*   [http://jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html)

主题滚轮：

*   [http://jquerymobile.com/themeroller/index.php](http://jquerymobile.com/themeroller/index.php)

# jquery - 一组项目上的悬停效果 - 移动到同级元素时防止闪烁

> ID：12768656
> 
> 赞同：2
> 
> 时间：2012-10-07T12:05:34.470
> 
> 标签：jquery

我在一个页面上有一组项目——当一个项目悬停在上面时，它的兄弟姐妹会改变它们的不透明度，使它们看起来变暗。当光标移动到组中的另一个项目时，兄弟姐妹首先淡入 100% 不透明度，然后再次变暗。如何防止已经变暗的项目不变暗（当然，悬停在上面的项目除外）？

我的 jQuery 代码如下，我在这里设置了一个 jsfiddle 演示：http: [//jsfiddle.net/clorentzen/wmhMR/2/](http://jsfiddle.net/clorentzen/wmhMR/2/)

谢谢！

```
$(document).ready(function() {
    $('.module').hover(function() {
        $(this).siblings('div').fadeTo(250, .5);
    }, function() {
        $(this).siblings('div').fadeTo(250, 1.0);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:36:37.277

我知道这篇文章很旧，但由于没有公认的答案，这里有一个快速修复。只需在fadeTo() 之前添加stop()。

```
$(document).ready(function() {
    $('.module').hover(function() {
        $(this).siblings('div').stop().fadeTo(250, .5);
    }, function() {
        $(this).siblings('div').stop().fadeTo(250, 1.0);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:25:00.697

[http://jsfiddle.net/wmhMR/6/](http://jsfiddle.net/wmhMR/6/)

尝试这个：

```
$(document).ready(function() 
 {
  $('.module').mouseenter(function() 
   {
    $(this).css({'opacity':'0.5'});
   })
  $('.module').mouseleave(function() 
   {
    $(this).css({'opacity':'1'});
   })
 }); 
```

# java - Java 客户端应用程序中的 Ajax 调用

> ID：12768658
> 
> 赞同：8
> 
> 时间：2012-10-07T12:06:13.187
> 
> 标签：java, ajax, xmlhttprequest

> **可能重复：**
> [如何使用 Servlet 和 Ajax？](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax)

我在 Javascript 中使用以下代码进行 Ajax 调用：

```
function getPersonDataFromServer() {
        $.ajax({
            type: "POST",
            timeout: 30000,
            url: "SearchPerson.aspx/PersonSearch",
            data: "{ 'fNamn' : '" + stringData + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                ...
            }
        });
    } 
```

我也想在 Java 中做到这一点。基本上，我想编写一个 Java 客户端应用程序，通过 Ajax 调用将此数据发送到服务器。

我如何在 Java 中执行 Ajax？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T12:26:53.130

AJAX 与任何其他 HTTP 调用没有什么不同。您基本上可以从 Java 发布相同的 URL，就目标服务器而言，这无关紧要：

```
final URL url = new URL("http://localhost:8080/SearchPerson.aspx/PersonSearch");
final URLConnection urlConnection = url.openConnection();
urlConnection.setDoOutput(true);
urlConnection.setRequestProperty("Content-Type", "application/json; charset=utf-8");
urlConnection.connect();
final OutputStream outputStream = urlConnection.getOutputStream();
outputStream.write(("{\"fNamn\": \"" + stringData + "\"}").getBytes("UTF-8"));
outputStream.flush();
final InputStream inputStream = urlConnection.getInputStream(); 
```

上面的代码或多或少等同于您的 jQuery AJAX 调用。当然，您必须替换`localhost:8080`为实际的服务器名称。

如果您需要更全面的解决方案，请考虑使用[httpclient](/questions/tagged/httpclient "显示标记为“httpclient”的问题")库和[jackson](/questions/tagged/jackson "显示标记为“杰克逊”的问题")进行 JSON 编组。

# 也可以看看

*   [cURL 和 HttpURLConnection - 发布 JSON 数据](https://stackoverflow.com/questions/9623158)

# c++ - C++ - 安全指针范围？

> ID：12768659
> 
> 赞同：2
> 
> 时间：2012-10-07T12:06:22.177
> 
> 标签：c++, pointers

我知道`NULL`(0x00000000) 是一个空指针，因为操作系统不允许进程在这个位置分配任何内存。但是，如果我使用 0x00000001（幻数或代码指针），是否也可以安全地假设操作系统不允许在此处分配内存？如果是这样，那么直到哪里可以安全地假设？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T13:04:39.400

**标准**（第一）

就指针而言，该标准仅保证这`0`是一个标记值。无法保证底层内存表示；它的实现定义。

除了读取指针状态或写入新状态（包括取消引用或指针运算）之外，使用设置为该标记值的指针是*未定义的行为*。

**虚拟内存**

在虚拟内存时代（即，每个进程都有自己的内存空间，独立于其他进程），空指针在进程内存空间中最常表示为 0。我实际上不知道任何其他架构，尽管我想在大型机中可能不是这样。

**Unix**

在 Unix 世界中，通常会为空值保留 0x8000 以下的所有地址空间。内存没有分配，实际上，它只是受到保护（即，置于特殊模式下），因此如果您尝试读取或写入它，操作系统将触发分段错误。

使用这样一个范围的想法是空指针不一定按原样使用。例如，如果您使用`std::pair<int, int>* p = 0;`为 null 的 a 并调用`p->second`，则编译器将执行指向`second`（即`+4`通常）所需的算术并尝试`0x4`直接访问内存。数组显然使问题更加复杂。

在实践中，这个`0x8000`限制应该足够实用以检测大多数问题（并避免内存损坏或其他问题）。在这种情况下，这意味着您可以避免*未定义的行为*并获得“适当的”崩溃。但是，如果您使用大型阵列，您可能会超过它，所以它不是灵丹妙药。

您的实现或编译器/运行时堆栈的特定限制可以通过文档或连续试验来确定。甚至可能有一种方法可以对其进行调整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T12:09:58.627

您不应该对指针的实际值做任何假设。特别是，空指针*不需要*用零地址表示，即使字面量`0`看起来像零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T12:12:39.737

C++ 标准不“保留”除零（空）以外的任何指针地址。因此，使用 1 或任何其他值作为“魔术”指针值是不安全的。当然，在实践中，c++ 的某些实现可能并非每个都使用某些值。但是您无法从语言定义中得到任何保证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T12:09:05.613

唯一有效的范围应该是操作系统分配给您的范围。其他任何事情都应该被操作系统拒绝。

该规则的一个例外是共享内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T12:41:02.507

现代操作系统可能会为 NULL 指针保留至少一页。所以 0x1 （或者 0x4 如果你想要 32 位对齐）可能会起作用。

但请记住，C/C++ 语言不能保证这一点。您将不得不依赖您的操作系统和编译器来实现此类行为。

此外，不能保证 NULL 指针的实际值。它可能全为零，也可能不全为零。如果不是，你的把戏根本就行不通。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-07T12:26:31.757

我将尝试对此给出一个广泛的看法：

1.  由于每个现代操作系统都拥有并实施了多重沙盒机制，您可能永远不会访问真实的内存地址。
2.  从软件的角度来看，什么是 NULL 指针？NULL 指针是一个指针变量，它存储程序员选择的值作为有意义的值，并且该值用作具有以下含义的标签“此指针无处可去”。根据定义，NULL 指针不指向 0x000000，NULL 指针的定义与该指针指向的位置无关，而是该宏的值称为 NULL，并且该值将是该 NULL 指针的值。
3.  在 C 中你可以假设`NULL == 0`，只有在 C 中 NULL 是一个将 NULL 定义为等于 0 的 int 的宏，在 C++ 中你没有这个自由
4.  每个变量都有类型，标签和值（更好的说法是值的表示不是真实值），至少对于原始值，指针也是如此，如果您在谈论 void 指针，您正在谈论包含的指针一个内存地址（就像任何指针一样），这个指针唯一的特别之处是它们需要在 C++ 中进行强制转换才能安全有效地解码；如果您将`void*`其视为指向无处或指向`0`或指向`NULL`或指向的指针，那将是一个很大的错误`0x0000000`

顺便说一句，我仍然不明白你的问题......

# javascript - 使用 jQuery 将 ajax HTML 字符串附加到 DOM

> ID：12768660
> 
> 赞同：1
> 
> 时间：2012-10-07T12:06:46.177
> 
> 标签：javascript, jquery

我的脚本从 PHP 页面接收一些数据。一项称为“内容”的项目包含 HTML 代码。我必须将我的 HTML 代码放在一个 div 中，但不幸的是，它被附加为纯文本。如何将它作为真正的 HTML 附加到 DOM？这是我的 jQuery 代码：

```
 $.ajax({
      'url': 'ajaxdashboard.php',
      dataType: 'json',
      cache: false,
      success: function (json) {
          $.each(json, function (key, value) {
              for (i = 0; i < value.length; i++) {
                  $('#arguments').append('<div class="well student" style="display: none;" id="post-' + value[i].id + '"><h3>' + value[i].title + '</h3><span>Published by <font color="blue"><b>' + value[i].name + ' ' + value[i].surname + '</b></font></span><br><br><span id="post-content-' + value[i].id + '"></span></div>');
                  $('#post-content-' + value[i].id).html(value[i].content);
                  $('#post-' + value[i].id).fadeIn();
              }
          });
      }
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:29:01.790

你的问题是 PHP 正在返回编码的 html。<在html中是<。因此，这就是用户将看到的。

更新您的 PHP 以返回原始 HTML。否则你可以用 jQuery 作弊，如下所示：

```
$('#post-content-' + value[i].id).html($(value[i].content).text()); 
```

[用于解码 html 的源代码。](https://stackoverflow.com/questions/1147359/how-to-decode-html-entities-using-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:16:23.010

你的问题与此类似。

使用 text() 而不是 html() 自动转义。

[使用 jQuery 转义 HTML 字符串](https://stackoverflow.com/questions/24816/escaping-html-strings-with-jquery)

# opencv - 找到手的边界区域

> ID：12768666
> 
> 赞同：1
> 
> 时间：2012-10-07T12:07:33.477
> 
> 标签：opencv, image-processing, computer-vision, detection

我有使用[此](http://www.andol.info/wp-content/uploads/2009/03/handdetection.cpp)链接检测到的手的图像。它使用 HSV 颜色空间进行手部检测。

现在我面临一个问题：我需要尽可能地获得封闭区域/绘制边界线以确定手部区域，然后填充封闭区域并从原始区域中减去它以移除手部。

到目前为止，我一直试图模糊图像以减少噪音、扩大图像、关闭孔等，这似乎是过量的。我已经尝试过轮廓，这似乎是迄今为止最好的方法。我试图获得凸包（最大），在使用不同的阈值进行测试后，我得到了以下结果。

![在此处输入图像描述](../Images/f15fb213c9b148dcd4b252d48bf2d1b7.png)

如果船体拉直，可以用拇指看到不准确之处。它必须是弯曲的。我试图找出手的位置，以便确定手所覆盖的区域。将减去它以从原始图像中移除手。这就是我想要达到的目标。

有更好的方法吗？

和想法建议非常感谢。

原始和检测如下

![在此处输入图像描述](../Images/e6f61214ba2b93cb38aa69a9e37a53b7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T21:38:51.507

假设您想要识别手区域而不是凸包给出的区域并且应用程序的背景至少是相同的颜色，如果可能的话，我会应用 hsv-threshold 来识别背景而不是手。或者，如果光分布不一致，则可能是自适应阈值。我相信这是许多应用程序所做的

如果背景不能固定，分割不是一个容易解决的问题，因为你应该注意阴影和手掌线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T03:44:04.667

**考虑使用alpha hull**而不是凸包，它可以通过允许凹面更好地遵循形状的轮廓。

这个网站对 alpha 形状有一个很好的总结：François Bélair 的“你一直想知道的关于 Alpha 形状但害怕问的一切”。

[http://cgm.cs.mcgill.ca/~godfried/teaching/projects97/belair/alpha.html](http://cgm.cs.mcgill.ca/~godfried/teaching/projects97/belair/alpha.html)

正如 David 在他的帖子中提到的，考虑使用 HSV（或 HSI）颜色空间而不是 RGB 或灰度进行阈值处理。如果您可以允许更长的处理时间，您可以使用诸如 Mean Shift 之类的算法来分割像您这样复杂的图像。OpenCV 有一个 Mean Shift 的实现，**Learning OpenCV**一书提供了该算法的简明描述。

[使用 Mean Shift 进行图像分割解释](https://stackoverflow.com/questions/4831813/image-segmentation-using-mean-shift-explained/4835340#4835340)

无论如何，标准的二值化阈值似乎没有多大帮助。考虑使用动态阈值；据我回忆，OpenCV 中的轮廓至少实现了局部/动态阈值。

# qt - Qt - 接收信号后绘图

> ID：12768667
> 
> 赞同：0
> 
> 时间：2012-10-07T12:07:49.937
> 
> 标签：qt, drawing, signals

我有一个简单的应用程序，它由一行编辑组成，用户在其中编写答案和确认按钮。如果答案是正确的，我想画一个简单的图形（例如绿色/红色圆圈）。我有三个源文件 - 主文件、表单（这里我将来自按钮的信号与来自 lineedit 的答案连接起来并确定答案是否正确）和 figureWidget，我想在其中绘制我的图。我的问题是，我不知道如何将来自“表单”的信号与我的 figureWidget 连接起来（尤其是什么和在哪里:-)）有什么提示吗？文件form.cpp：

```
#include <QtCore>
#include "ui_untitled.h"
#include "Form.h"
#include "figureWidget.h"

Form::Form(QWidget * parent, Qt::WindowFlags f) : QWidget ( parent,f ) {
   ui.setupUi(this);

connect(ui.pushButton, SIGNAL(buttonPressed()), this, SLOT(checkAnswer()))
 //this checks if answer is correct after pushing button
connect(this,SIGNAL(correctness(QString)),ui.figureWidget, SLOT(drawFigure(QString)));
  //I expect signal from this class (here I check the answer), and draw the circle in figureWidget
}

void Form::checkAnswer() {
 if (ui.lineEdit == "1") emit correctness(QString("right");
  else emit correctness(QString("false") 
  } 
```

然后我有figureWidget.cpp：

```
#include <QtGui>
#include <iostream>
#include "figureWidget.h"
figureWidget::figureWidget(QWidget* parent) : QWidget(parent) {
}

figureWidget::~figureWidget() {
}

void figureWidget::drawFigure(QString newVal) {
 if (newVal == correctVal) 
     update();
}

void figureWidget::paintEvent(QPaintEvent* ) {
   QPainter painter(this);
   painter.setPen(QRgb(0x0000ff00));
   painter.drawEllipse(0, 0, 10, 10);
} 
```

在调试中我得到：没有这样的插槽 QWidget::drawFigure(QString) in ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:44:06.183

我想你可以试试这个：

```
connect(this,SIGNAL(correctness(QString)),this, SLOT(drawFigure(QString)));

void Form::drawFigure(QString val)
{
   ui->figureWidget->drawFigure(val);
} 
```

但是figureWidget怎么会出现在'ui->'之后？？？你不能在 UI 上静态地绘制它。

# php - PHP中array_filter的时间复杂度

> ID：12768672
> 
> 赞同：1
> 
> 时间：2012-10-07T12:08:44.907
> 
> 标签：php, arrays, time-complexity, array-filter

假设我正在使用的回调函数的时间复杂度为 O(1)，那么 PHP 中[array_filter 函数](http://php.net/manual/en/function.array-filter.php)的运行时间是多少，在某个地方我可以找到 array_filter 函数的实现吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:14:52.153

array_filter 的来源在这里，Cf for array_filter: [https://github.com/php/php-src/blob/master/ext/standard/array.c](https://github.com/php/php-src/blob/master/ext/standard/array.c)

我找到了答案（它指出 array_filter 是 O(n)，并非完全不明显，因为它需要对列表中的每个项目只迭代一次）： [PHP 函数的 Big-O 列表](https://stackoverflow.com/questions/2473989/list-of-big-o-for-php-functions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T12:16:23.590

复杂度应该是`O(N)`.

它只是循环它并使用回调来检查元素。

你可以***[在这里找到实现](http://lxr.php.net/xref/PHP_5_4/ext/standard/array.c#4169)***。

# c# - 将数据从一页发送到另一页

> ID：12768674
> 
> 赞同：6
> 
> 时间：2012-10-07T12:08:54.460
> 
> 标签：c#, asp.net

我正在尝试使用 C# ASP.Net 将表单数据从一个页面发送到另一个页面。我有两个页面 default.aspx 和 default2.aspx。这是我在 default.aspx 中的代码：

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<br />
<asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
<br />
<asp:Button ID="Button1" runat="server" Text="Go" 
    PostBackUrl="~/Default2.aspx" />
<br /> 
```

据我所知，PostBackUrl 用于设置您希望发送数据的页面是否正确？

另外，如何检索发送到 Default2.aspx 的数据？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-07T12:34:48.280

你有几个选择，考虑

1.  会话状态
2.  请求参数

**会话状态**

如果要在页面之间发送数据，可以考虑使用[Session State](http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx)。

> ASP.NET 会话状态使您能够在用户浏览 Web 应用程序中的 ASP.NET 页面时为用户存储和检索值。HTTP 是一种无状态协议。这意味着 Web 服务器将页面的每个 HTTP 请求视为一个独立的请求。服务器不保留先前请求期间使用的变量值的知识。ASP.NET 会话状态将在有限时间窗口内来自同一浏览器的请求标识为会话，并提供一种在该会话期间保持变量值的方法。默认情况下，为所有 ASP.NET 应用程序启用 ASP.NET 会话状态。

最重要的是，这很容易！

将数据放入（例如在 default1.aspx 上）

```
Session["FirstName"] = FirstNameTextBox.Text;
Session["LastName"] = LastNameTextBox.Text; 
```

把它拿出来（例如在 default2.aspx 上）

```
string firstname = Session["FirstName"] // value of FirstNameTextBox.Text;
string lastname = Session["LastName"] // value of LastNameTextBox.Text; 
```

**请求参数**

如果您要发送少量数据（例如 id=4），使用查询字符串变量可能更实用。

您应该探索查询字符串变量的使用，例如

```
http://www.domain.com?param1=data1&param2=data2 
```

然后，您可以像这样获取数据

```
string param1 = Request.QueryString["param1"]; // value will be data1
string param2 = Request.QueryString["param2"]; // value will be data2 
```

您可以使用类似[How do you test your Request.QueryString[] variables？](https://stackoverflow.com/questions/349742/how-do-you-test-your-request-querystring-variables)把数据拿出来。

如果您不熟悉查询字符串变量，请查看[他们的维基百科文章](http://en.wikipedia.org/wiki/Query_string)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-07T12:37:17.283

**会话变量**在这种情况下很有用。

例如，假设您的文本框包含登录凭据，然后将它们保存在会话中，以便您以后可以在任何其他页面中使用它们。像这样：

在 Button_Click-

```
Session["name"]=TextBox1.Text;
Session["pwd"]= TextBox2.Text; 
```

而不是`PostBackUrl="~/Default2.aspx"`你可以写以下-

```
//in button click
Server.Transfer("~/Default2.aspx"); 
```

在 Default2.aspx 页面加载：

```
string a= Session["name"].ToString();
string b= Session["pwd"].ToString(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-07T12:11:37.413

`Page_Load`在Default2.aspx中试试这个。

```
 if (PreviousPage != null)
        {
            if (((TextBox)PreviousPage.FindControl("TextBox1")) != null)
            {
                string txtBox1 = ((TextBox)PreviousPage.FindControl("TextBox1")).Text;
                Response.Write(txtBox1);
            }
        } 
```

`PostBackUrl`是的，您是正确的，如果您使用该属性，第 1 页的数据将被发送到第 2 页。

[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.postbackurl.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-07T18:39:44.237

虽然这里的所有答案*都有效*，但有些并不是最有效的。为什么一个简单/标准`http POST`必须调用（昂贵的）服务器端`Session`？

您的代码没有做任何特别的事情 - 它只是将表单发布到另一个页面。获取 POSTed 数据所需要做的就是遍历`Request.Form`集合。

在可以设置之前`PostBackUrl`（如果内存服务于 asp.net 的版本 1），`Server.Transfer`并且获取对上一页的引用是如何完成/记录跨页 POST。然而，有了`PostBackUrl`，事情又回到了基础，它应该是这样的——`http POST`从一种资源到另一种资源的标准。

这是一个[类似的 SO 线程](https://stackoverflow.com/a/12691194/304683)，可能会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-28T02:32:40.243

另一种方法是将数据保存在数据库中并在另一个页面上取回：

```
//update
    string query = "UPDATE table SET col = 'a'";
    SqlCommand command = new SqlCommand(query, connection);
    command.ExecuteScalar();

//select
    string query = "SELECT col FROM table";
    SqlCommand command = new SqlCommand(query, connection);
    string value = command.ExecuteScalar(); 
```

# c++ - 碰撞后从方向取消表面轴

> ID：12768678
> 
> 赞同：0
> 
> 时间：2012-10-07T12:09:05.930
> 
> 标签：c++, collision

假设我将 (0.5,0.5) 移动到表面法线为 (-1,0) 的墙上。我希望最终结果是 (0,0.5)，所以我不能继续向墙壁移动，而是沿着表面滑动。

我怎样才能做到这一点？我有

```
comp_u = n * (maths::dot(dir,n) / maths::dot(n,n)); 
```

这给了我垂直于碰撞表面的方向的分量，其中“n”是垂直于碰撞表面的向量，我可以将其抵消。但是，如果我尝试离开墙壁，它会取消该组件，这意味着我永远无法离开墙壁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:42:56.237

仅当运动方向与法线方向相反时才应执行该操作...`dot(dir,n)`即为负。

如果结果是肯定的，那么您正在远离墙壁并且您不修改`dir`.

# c# - Windows Phone - 图像缓存 - 等待下载图像

> ID：12768680
> 
> 赞同：3
> 
> 时间：2012-10-07T12:09:11.063
> 
> 标签：c#, windows-phone-7, caching

我做了一个缓存图像的项目。我想在主线程中等待完整的 DownloadImage 函数，然后返回保存的位图。那可能吗？我做得对吗？

```
public static ImageSource GetImage(int id)
    {
        BitmapImage bitmap = new BitmapImage();
        String fileName=string.Format("ImageCache/{0}.jpg", id);

        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (!myIsolatedStorage.DirectoryExists("ImageCache"))
            {
                myIsolatedStorage.CreateDirectory("ImageCache");
            }

            if (myIsolatedStorage.FileExists(fileName))
            {
                using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile(fileName, FileMode.Open, FileAccess.Read))
                {
                    bitmap.SetSource(fileStream);
                }
            }
            else
            {
                DownloadImage(id);
                //HERE - how to wait for end of DownloadImage and then do that below??
                using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile(fileName, FileMode.Open, FileAccess.Read))
                {
                    bitmap.SetSource(fileStream);
                }
            }
        }
        return bitmap;
    } 
```

这是下载图像功能：

```
 private static void DownloadImage(Object id)
    {
        WebClient client = new WebClient();
        client.OpenReadCompleted += new OpenReadCompletedEventHandler(client_OpenReadCompleted);
        client.OpenReadAsync(new Uri(string.Format("http://example.com/{0}.jpg", id)), id);
    }
    private static void client_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (e.Error == null && !e.Cancelled)
            {
                try
                {
                    string fileName = string.Format("ImageCache/{0}.jpg", e.UserState);
                    IsolatedStorageFileStream fileStream = myIsolatedStorage.CreateFile(fileName);

                    BitmapImage image = new BitmapImage();
                    image.SetSource(e.Result);
                    WriteableBitmap wb = new WriteableBitmap(image);

                    // Encode WriteableBitmap object to a JPEG stream.
                    Extensions.SaveJpeg(wb, fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);
                    fileStream.Close();

                }
                catch (Exception ex)
                {
                    //Exception handle appropriately for your app  
                }
            }  
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:24:43.287

你有很多方法可以实现你想要的。`async await`可以使用作为 Visual Studio Async 一部分的命令等待。[您可以从这里](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=9983)下载最新的 CTP 。[更多如何使用它。](http://msdn.microsoft.com/en-us/library/hh191443.aspx)

我个人会使用事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T12:15:58.913

这个包含一些细节和代码示例：[http ://www.ben.geek.nz/2010/07/one-time-cached-images-in-windows-phone-7/](http://www.ben.geek.nz/2010/07/one-time-cached-images-in-windows-phone-7/)

# xml - Perl cgi 和 XML::Code 双重编码问题

> ID：12768681
> 
> 赞同：1
> 
> 时间：2012-10-07T12:09:11.360
> 
> 标签：xml, perl, utf-8, cgi

我正在使用 XML::Code 从通过 CGI 模块接收的 GET 参数创建一些 XML 数据。网络服务器是 Apache，字符集设置为 UTF-8，提交表单位于带有

```
<!DOCTYPE html>
<html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

标题。CGI 看起来像这样：

```
use CGI;
use Encode;
use XML::Code;
binmode(STDOUT, ":utf8");
binmode(STDIN, ":utf8");

my $cgi = CGI->new();
print $cgi->header(-type => "text/xml", -charset => "utf-8");
my $object = $cgi->param("object");
$object = decode("utf-8", utf8::upgrade($object));

my $content = XML::Code->new("formdata");
$content->version ("1.0");
$content->encoding ("UTF-8");

my $sub_content = XML::Code->new("object");
$sub_content->set_text($object);
$content->add_child($sub_content);

$sub_content = XML::Code->new("isutf");
$sub_content->set_text(utf8::is_utf8($object));
$content->add_child($sub_content);

print $content->code(); 
```

[当使用http://mydomain.com/cgi-bin/formdata.pl?object](http://mydomain.com/cgi-bin/formdata.pl?object) =ö调用 cgi 时，输出（从 firebug 复制）是

```
<?xml version="1.0" encoding="UTF-8"?>
<formdata>
    <object>Ã¶</object>
    <isutf>1</isutf>
</formdata> 
```

从 CGI 中删除 binmode(STDOUT, ":utf8") 给了我我正在寻找的东西

```
<?xml version="1.0" encoding="UTF-8"?>
<formdata>
    <object>ö</object>
    <isutf>1</isutf>
</formdata> 
```

现在我知道如何解决这个问题，但我认为将所有内容设置为 UTF-8 时我会很安全。如果我不是，那将意味着更多的测试。这是 perl 库中的错误还是我的想法？

最好的，马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:11:44.837

我认为以下行：

```
$object = decode("utf-8", utf8::upgrade($object)); 
```

可能没有帮助。utf8::upgrade在对字符串执行就地操作后[返回多个八位字节。](http://perldoc.perl.org/utf8.html)如果您将其保留为：

```
$object = decode("utf-8", $object); 
```

那么你可能会有更容易理解的行为。

我想我在这个简短的脚本的帮助下想出了更多：

```
#! /usr/bin/perl -w
use Encode;
binmode( STDOUT, ":utf8" );
my $string = "\x{C3}\x{B6}";
print "$string\n";
my $decoded = decode( "UTF8", $string );
print "$decoded\n"; 
```

输出是：

```
Ã¶
ö 
```

这就是我认为正在发生的事情。上面的 $string 声明是您从调用 cgi->param 得到的结果，即在 UTF-8 中表示 ö 的两个字节。当脚本第一次打印它时，Perl 没有表明这是 UTF-8 格式，但知道它必须在打印之前先转换它（因为 binmode）。

Perl 的默认行为是假设要解释为字符串的八位字节流被编码为 Latin-1。所以它需要第一个字节 C3，查找它在 Latin-1 中的内容，然后打印相当于 STDOUT 的 UTF-8。B6 也一样。[您可以在Wikipedia](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)上仔细检查字节。

但是，对 decode 的调用会将字节解释为 UTF-8 并创建一个由字符 ö 组成的新字符串。不要将字符串视为具有编码；传入和传出的字节需要编码，但是在您的程序中，一旦它们被正确解释，它们就只是字符串。

现在 Perl 已经解释了这些字节并转换为使用它希望的任何内部编码进行编码的字符串，当你下次打印它时，它知道将字符转换为 UTF-8 并且你得到正确的输出。

希望对您调试 CGI 有所帮助。

# asp.net-mvc-4 - 将提交点击时的多条记录保存到 MVC4 中的不同实体中。没有从控制器中的视图中获取值

> ID：12768683
> 
> 赞同：0
> 
> 时间：2012-10-07T12:09:16.447
> 
> 标签：asp.net-mvc-4

我正在尝试通过单击提交按钮保存多个学生的课堂出勤率。我能够在关注表中创建空白记录，然后在视图中填充数据。

我有以下视图模型：

```
public class TeacherAttendanceModel
{
    #region Required Properties

        public long ScholarAttendanceId { get; set; }
        public string Student { get; set; }
        public bool Absent { get; set; }
        public string AbsentComment { get; set; }
        public bool Uniform { get; set; }
        public bool Homework { get; set; }
        public string HomeworkComment { get; set; }
        public String UniformCommentSelected { get; set; }
        public IEnumerable<String> UniformComment { get; set; }

    #endregion

} 
```

我的控制器如下。

```
public class TeacherAttendanceController : Controller
{
    //
    // GET: /TeacherAttendance/

    public ActionResult Index()
    {
        long classId = Success.Business.Roles.Teacher.GetHomeRoomClassID(Convert.ToInt64(Session[GlobalVar.LOGGED_IN_ID]));
        var classAttendanceStatus = Success.Business.Entities.ClassAttendance.GetClassAttendanceStatus(classId);
        ViewBag.status = classAttendanceStatus;
        var attendanceData = TeacherAttendance.CreateClassAttendance(classId);
        return View(attendanceData);
    }

    [HttpPost]
    public ActionResult Index(IEnumerable<TeacherAttendanceModel> teacherAttendanceModel)
    {
        try
        {
            if (ModelState.IsValid)
            {
                TeacherAttendance.SaveAttendance(teacherAttendanceModel);
            }
        }
        catch (Exception e)
        {

        }

        return View(teacherAttendanceModel);
    }

} 
```

获取索引工作正常。但我没有在 Post 索引中获得 TeachAttendanceModel 对象。我得到空对象。我将非常感谢在这方面获得任何帮助。提交点击如何更新多条考勤记录？

我正在使用以下视图：

```
@foreach (var item in Model) {
    <tr >
        <td style="border-style:solid; border-color:darkslategray; border-width:thin;">
            @Html.DisplayFor(modelItem => item.Student)
        </td>
        <td style="border-style:solid; border-color:darkslategray; border-width:thin;">
            @Html.CheckBoxFor(modelItem => item.Absent, ViewBag.status == 2 ? new {disabled = "disabled"} : null)
            @Html.TextBoxFor(modelItem => item.AbsentComment, ViewBag.status == 2 ? new {disabled = "disabled"} : null)
        </td>
        <td style="border-style:solid; border-color:darkslategray; border-width:thin;">
            @Html.CheckBoxFor(modelItem => item.Uniform, ViewBag.status == 2 ? new {disabled = "disabled"} : null)
            @Html.DropDownListFor(modelItem => item.UniformCommentSelected, new SelectList(item.UniformComment),item.UniformCommentSelected ?? "---Select---", ViewBag.status == 2? new {disabled = "disabled"} : null)
        </td>
        <td style="border-style:solid; border-color:darkslategray; border-width:thin;">
            @Html.CheckBoxFor(modelItem => item.Homework, ViewBag.status == 2 ? new {disabled = "disabled"} : null)
            @Html.TextBoxFor(modelItem => item.HomeworkComment, ViewBag.status == 2? new {disabled = "disabled"} : null)
        </td>

    </tr>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:29:47.233

模型：

```
public class Test
{
    public List<string> UniformComment { get; set; }
} 
```

控制器：

```
 public ActionResult Index()
    {
        var model = new Test
            {
                UniformComment = new List<string>{ "one", "two", "three" }
            };

        return View(model);
    }

    [HttpPost]
    public ActionResult Index(Test model)
    {
        return View(model);
    } 
```

看法：

```
@using (Html.BeginForm())
{
    for (var i = 0; i < Model.UniformComment.Count; i++)
    {
        @Html.TextBoxFor(x => Model.UniformComment[i])
    }

    <input type="submit" value="Save" />
} 
```

呈现的 html 示例：

```
<input id="UniformComment_0_" name="UniformComment[0]" type="text" value="one" />
<input id="UniformComment_1_" name="UniformComment[1]" type="text" value="two" />
<input id="UniformComment_2_" name="UniformComment[2]" type="text" value="three" /> 
```

这个想法是使用`for`循环或创建进行迭代，`EditorTemplate`然后您会收到索引项目。

**补充（感受不同）：**

看法：

```
@using (Html.BeginForm())
{
    foreach (var comment in Model.UniformComment)
    {
        @Html.TextBoxFor(x => comment)
    }

    <input type="submit" value="Save" />
} 
```

呈现的html：

```
<input id="comment" name="comment" type="text" value="one" />
<input id="comment" name="comment" type="text" value="two" />
<input id="comment" name="comment" type="text" value="three" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T09:57:43.747

在视图中使用 IList 而不是 IEnumerable，并将 foreach 循环替换为 for 循环。

**步骤1：**

利用

```
@model IList<TeacherAttendanceModel> 
```

代替

```
@model IEnumerable<TeacherAttendanceModel> 
```

**第2步：**

利用

```
@for (var i = 0; i < Model.Count; i++) 
```

代替

```
@foreach (var item in Model) 
```

请参阅[如何将 IEnumerable 列表传递给 MVC 中的控制器，包括复选框状态？](https://stackoverflow.com/a/17037925/273646)更多细节。

# c# - 更改文档后如何更新特定 Range 的 Start 和 End 位置？

> ID：12768685
> 
> 赞同：1
> 
> 时间：2012-10-07T12:09:43.617
> 
> 标签：c#, com, ms-word, range, office-interop

我正在用 C# 创建一个 MS Office Word 加载项。在使用文档时，我需要从文档中获取一些信息。

我拿了一些`Range`文件并保存它。

例如，在文本中：

> 文本1文本 2***文本 3 文本***4

我保存`Range`了“text3”。它的`Start`位置= 13，`End`位置= 17（字符数，据我所知）。

如果我改变这个词前面的文字：

> 文本1 新 TE ***XT***文本 文本 2 文本 3 文本 4

其位置`Range`将保持不变。尝试选择文本时，我得到的文本范围不正确。

**有没有办法`Range`在编辑文档后更新对象的数据？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:23:54.253

该[文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range%28v=office.14%29.aspx)指出：

> 每个 Range 对象都由一个开始和结束字符位置定义

所以你假设：

> 我保存“text3”的范围。它的开始位置= 13，结束位置= 17（字符数，据我所知）。

... 是正确的。

> 其范围的位置将保持不变。尝试选择文本时，我得到的文本范围不正确。

我相信这是预期的行为，我认为它与文档在此处关于范围的说明非常吻合：http: [//msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range (v= office.14).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range(v=office.14).aspx)

> 有没有办法在编辑文档后更新 Range 对象的数据？

据我所知，这是不可能的，而且据我所知，[文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range%28v=office.14%29.aspx)也没有说明这应该是可能的。

起初我认为可能`Word`存在一个对象来封装这样的功能，[但事实证明](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.words.aspx)，文档上的`Words`集合只包含`Ranges`每个代表一个单词的单词——这也没有多大帮助。

# java - 我可以让 Java 在 Mountain Lion 下打印到控制台吗？

> ID：12768692
> 
> 赞同：7
> 
> 时间：2012-10-07T12:10:37.960
> 
> 标签：java, osx-mountain-lion, println, system.out

我正在使用良好的旧`System.out.println`方法来调试我的 Java 应用程序。在我升级到 Mac OS 10.8 之前，这非常有效。但是现在我的控制台不会显示任何内容。显然我不是第一个遇到这种行为的人 - 请参阅[http://www.mac-forums.com/forums/os-x-operating-system/280577-system-out-println-not-showing-console。 .html](http://www.mac-forums.com/forums/os-x-operating-system/280577-system-out-println-not-showing-console.html) _

有大佬知道方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T10:27:09.383

`System.console()`使用山狮和 java 6 为我返回 null。

我们必须更改我们应用程序中的日志记录以`log4j`用于输出`stdout`（在 10.8 之前用于转到 system.log）**并**生成我们自己的日志文件，`~/Library/Logs`这些文件可以在任何版本的 console.app 中看到。

似乎不是沙盒问题，因为我没有看到任何沙盒错误。可能需要进行更多调查以查看在 10.8 下将什么设备交给 jvm。猜测也许它被`/dev/null`错误地交给了记录？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:24:37.130

这行得通吗？

```
System.console().printf("Hello World!"); 
```

# c# - C#：'之间的隐式转换 '和'布尔'

> ID：12768696
> 
> 赞同：15
> 
> 时间：2012-10-07T12:10:52.013
> 
> 标签：c#

当我尝试将 an 转换为 时，收到一条奇怪的错误消息`object`，`bool`这是我的代码：

```
public partial class ModifierAuteur : DevExpress.XtraEditors.XtraForm
{
    public ModifierAuteur(object getKeyDecesCheckBox)
    {
         decesCheckBox.Checked = getKeyDecesCheckBox == null ? null : (bool)getKeyDecesCheckBox;
    }
} 
```

这是错误消息：

> 无法确定条件表达式的类型，因为`<null>`和之间没有隐式转换`bool`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-07T12:12:29.380

假设分配是可能的，您需要转换为 nullable `bool`，如下所示：

```
decesCheckBox.Checked = getKeyDecesCheckBox == null ? null : (bool?)((bool)getKeyDecesCheckBox); 
```

内部转换为`bool`取消装箱值，外部转换`bool?`使其与`null`条件表达式兼容。

如果赋值左侧不允许`null`s，则需要确定要设置的值 when `getKeyDecesCheckBox`is `null`。通常，这是一个`false`：

```
 decesCheckBox.Checked = getKeyDecesCheckBox == null ? false : (bool)getKeyDecesCheckBox; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T12:34:14.477

假设 Checked 属性是可为空的 bool 类型，我可能会执行以下操作：

```
decesCheckBox.Checked = (getKeyDecesCheckBox == null ? (bool?)null : (bool?)getKeyDecesCheckBox); 
```

如果它需要一个布尔值（不可为空），您可以使用以下命令轻松地将 null 转换为 false：

```
decesCheckBox.Checked = (getKeyDecesCheckBox == null ? (bool?)null : (bool?)getKeyDecesCheckBox).GetValueOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T12:27:08.657

`decesCheckBox.Checked`是类型`bool`。因此，您必须喂它`false`或`true`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T12:33:04.733

您的 '？:' 运算符有两种可能的不兼容返回类型：如果对象为 null，则返回值 null，可以将其强制转换为任何可为 null 的类型。如果对象不为 null，则其返回类型为 bool。

我不知道“Checked”是什么类型，但我怀疑它的类型是“bool”。

这里的问题是您不能将 null 转换为 'bool' 类型，因此您必须决定在对象为 null 的情况下您希望它是什么类型。如果你想让它是假的，你可以把语句写成：

```
decesCheckBox.Checked = (getKeyDecesCheckBox as bool) ?? false; 
```

这 ？？运算符在对象为空或无法转换为布尔值的情况下分配值“假”。

# database - 检查文本框是否为空？

> ID：12768707
> 
> 赞同：0
> 
> 时间：2012-10-07T12:12:07.127
> 
> 标签：database, vba, ms-access

我有这行代码，如果有问题的文本框为空，它应该可以防止用户输入记录。

```
Private Sub Command17_Click()

If Me.Text13.Value = "" Then

Me.Text26.Value = "ENTER A BUY PRICE!"

Else

Dim sc1 As DAO.Recordset
Set sc1 = CurrentDb.OpenRecordset("Flips", dbOpenDynaset)

sc1.AddNew
sc1.Fields("ItemID").Value = Me.Combo0.Column(0)
sc1.Fields("BuyPrice").Value = Me.Text13.Value
sc1.Fields("Note").Value = Me.Text18.Value
sc1.Fields("Status").Value = "BOUGHT"
sc1.Update

Me.Flips.Requery

End If

End Sub 
```

无论出于何种原因，它都不起作用，“请输入价格！” 位或阻止记录输入的位！

任何人都可以帮忙吗？

提前致谢，

鲍勃·P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:45:01.583

谢谢大家，但我刚刚找到了解决方法，我将文本框的默认值设置为 0，然后告诉代码：

```
If me.text13.value = 0 then 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:47:46.433

我认为您可以使用这段代码：

```
If  String.IsNullOrEmpty(Me.Text13.Value) Then 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:05:33.527

试试这个

```
If Len(Me.Text13 & vbNullString) = 0 Then 
```

# linq-to-xml - 锄头我可以从大 xml 中获取 xml 吗？

> ID：12768713
> 
> 赞同：1
> 
> 时间：2012-10-07T12:12:49.873
> 
> 标签：linq-to-xml, xquery

我的表中有一个 xml 字段，我的表是这样的：

```
id | xml | 
```

不，我有同样的记录：

```
 <dfs>

 <field mainType="text" id="cce267e046a57c1"></field>
 <field mainType="text" id="1b2490d1b11967c1"></field>
 <moduleFields mainType="module" many="true" moduleId="5" id="4a191594ec2c8723">
 <items>
   <field mainType="text" id="4a191594ec2c8723_1_56e5290262cd1eef"></field>
   <field mainType="text" id="4a191594ec2c8723_1_f311896a52011eef"></field>
   <field mainType="text" id="4a191594ec2c8723_1_e68f6673b9c79eef">1</field>
 </items>
 <items>
   <field mainType="text" id="4a191594ec2c8723_2_56e5290262cd1eef"></field>
   <field mainType="text" id="4a191594ec2c8723_2_f311896a52011eef">2</field>
   <field mainType="text" id="4a191594ec2c8723_2_e68f6673b9c79eef">2</field>
 </items>
 <items>
   <field mainType="text" id="4a191594ec2c8723_3_56e5290262cd1eef">3</field>
   <field mainType="text" id="4a191594ec2c8723_3_f311896a52011eef">3</field>
   <field mainType="text" id="4a191594ec2c8723_3_e68f6673b9c79eef">3</field>
 </items>
 </moduleFields>
 </dfs> 
```

我如何获得 moduleFields 子标签？

linq 到 xml 还是 xquery 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:40:41.720

如果您只想拥有 moduleFields 元素然后迭代其[属性](http://msdn.microsoft.com/en-us/library/system.xml.xmlattribute.aspx)，则可以使用[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)和[SlectSingleNode](http://msdn.microsoft.com/en-us/library/fb63z0tw.aspx)

// 假设 xmField 是一个字符串，其中包含来自 dbfield 的 xml。

```
var xdoc = new XmlDocument();
xdoc.Load(new StringReader(xmlField));
var module = xdoc.SelectSingleNode("/dfs/moduleFields");
if (module!=null) 
{
    Debug.WriteLine("value:" + module.Value);
    foreach(var attr in module.Attributes)
    {
        Debug.WriteLine(attr.Name + "=" + attr.Value);
    }
}
else
{
  Debug.WriteLine("modulefields not found!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:45:39.943

**使用此查询**：

```
/*/moduleFields 
```

这将选择`moduleFields`作为 XML 文档顶部元素的子元素的任何元素。

**如果有多个`moduleFields`元素是 XML 文档顶部元素的子元素，并且您只需要获取第一个这样的`moduleFields`元素，则使用**：

```
/*/moduleFields[1] 
```

# ios - 如何在我的 ios 应用程序中改善图像的移动

> ID：12768719
> 
> 赞同：2
> 
> 时间：2012-10-07T12:13:18.470
> 
> 标签：ios, xcode, image

在我的 ios 应用程序中，我需要移动图像，但遇到了一些问题。我能够将图像正确移动到计算出的坐标，但我需要点击两次启动移动的按钮，然后它才会出现在正确的位置，第一次点击时，图像只会显示在初始位置，没有搬迁到新的岗位。

这是我的代码：

（已编辑）

视图控制器.m

```
#import "ndpViewController.h"

@interface ndpViewController ()

@end

@implementation ndpViewController
@synthesize image;

-(void)viewDidLoad
{

}

-(void)dealloc
{
}

- (IBAction)calculatePush:(id)sender {
    image.hidden=NO;
    image.center=CGPointMake(376, 927);
}
- (void)viewDidUnload {
}
@end 
```

视图控制器.h

```
#import <UIKit/UIKit.h>
@interface ndpViewController : UIViewController
{
IBOutlet UIImageView *image;
}
@property (weak, nonatomic) IBOutlet UIButton *calculate;
@property (nonatomic,retain) UIImageView *image;
@end 
```

知道为什么我需要在图像重新定位之前单击两次吗？我不需要任何类型的动画，只需要一个小图像（代表一个十字架），它将显示在图形顶部的特定点。

非常感谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:27:27.113

您没有发布足够的代码来确定。但是让我试试这个方法。如果 zfw <= 26308 会发生什么？它似乎什么都没有。所以在那种情况下，什么都不会动。当 zfw <= 26308 时，它是如何移动的？

注意：好的......您现在发布的代码永远不会重新定位，因为您总是在每次点击时将图像的位置设置为相同的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:02:36.247

我不完全理解一些代码。但我想我理解你的问题，即“我如何在第一次点击时做某事，然后在第二次点击时做其他事情？”

```
bool isFirstClick = true;

-(IBAction)CLickEvent:(id)sender{
    if(isFirstClick){
        //enter first click action here
        isFirstClick = false;
    }else{
        //enter second click action here
        isFirstClick = true;
    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T15:47:44.637

其实这个问题比我想象的还要奇怪。如果我在应用程序内的任何文本框中输入文本，图像会在第一次单击时移动，但如果我在任何这些文本框中输入数字，它只会在第二次单击时移动。

有什么建议吗？？？

# javascript - 从数组中选择一个随机元素并检查其索引

> ID：12768720
> 
> 赞同：1
> 
> 时间：2012-10-07T12:13:22.540
> 
> 标签：javascript, arrays, random

我已经解决了这个问题的第一部分，我可以像这样从数组中选择一个随机元素

```
function setImage()
{

var images = ['anemone.gif', 'ball.gif', 'crab.gif', 'fish2.gif', 'gull.gif',  'jellyfish.gif', 'moon.gif', 'sail.gif', 'shell.gif', 'snail.gif', 'sun.gif', 'sunnies.gif', 'whale.gif'];
var slots = [document.getElementById('slot0'), document.getElementById('slot1'), document.getElementById('slot2')];
document.getElementById('slot0').src = images[Math.floor(Math.random() * images.length)];
document.getElementById('slot1').src = images[Math.floor(Math.random() * images.length)];
document.getElementById('slot2').src = images[Math.floor(Math.random() * images.length)];
alert(images.indexOf(document.getElementById('slot2')));
} 
```

但是第二行没有给我正确的元素索引，我不确定如何找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:45:14.863

您是否有理由不只是将随机索引设置为变量并仅使用它？

```
function setImage()
{
    var images = ['anemone.gif', 'ball.gif', 'crab.gif', 'fish2.gif', 'gull.gif',  'jellyfish.gif', 'moon.gif', 'sail.gif', 'shell.gif', 'snail.gif', 'sun.gif','sunnies.gif', 'whale.gif'];
    var slots = [document.getElementById('slot0'), document.getElementById('slot1'),     document.getElementById('slot2')];

    var rnd0 = Math.floor(Math.random() * images.length);
    var rnd1 = Math.floor(Math.random() * images.length);
    var rnd2 = Math.floor(Math.random() * images.length);

    document.getElementById('slot0').src = images[rnd0];
    document.getElementById('slot1').src = images[rnd1];
    document.getElementById('slot2').src = images[rnd2];
    alert(rnd2);
} 
```

如果有，您应该尝试提醒图像的来源，并确保它的格式与图像数组匹配。

如果您仍然遇到问题，请使用 html 和 JS 设置一个 jsfiddle，这样我们就可以看到发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:02:12.450

`document.getElementById('slot2')`会给你节点（`img`在这种情况下）。所以你不能在包含`src`值的数组中找到它。

`document.getElementById('slot2').src`会给你完整的路径（如`http://....../file.ext`），而不仅仅是文件名。

使用[属性](https://developer.mozilla.org/en-US/docs/DOM/Node.attributes)属性。

`document.getElementById('slot2').attributes["src"]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T12:18:09.353

你不是说：

```
alert(images.indexOf(document.getElementById('slot2').src)); 
```

# c++ - Vim 中的 OmniCppComplete 只能作为 root 使用

> ID：12768725
> 
> 赞同：0
> 
> 时间：2012-10-07T12:14:05.150
> 
> 标签：c++, vim, autocomplete, vim-plugin, omnicomplete

我尝试在 Vim 中安装 OmniCppComplete 并遵循本教程： [http ://en.kioskea.net/faq/2367-the-autocompletion-cc-in-vim](http://en.kioskea.net/faq/2367-the-autocompletion-c-c-in-vim)

我注意到该插件仅在我以 root 身份运行时才有效。谁能给我一个提示，如何让所有用户都可以使用这个插件？

.Vimrc：（来自教程）

```
set nocp      
filetype plugin on      

set tags+=~/.vim/tags/stl      
set tags+=~/.vim/tags/gl      
set tags+=~/.vim/tags/sdl      
set tags+=~/.vim/tags/qt4      

noremap <F12> :!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q .<cr>      
inoremap <F12> <Esc>:!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q .<cr>      

let OmniCpp_NamespaceSearch = 1      
let OmniCpp_GlobalScopeSearch = 1      
let OmniCpp_ShowAccess = 1      
let OmniCpp_MayCompleteDot = 1      
let OmniCpp_MayCompleteArrow = 1      
let OmniCpp_MayCompleteScope = 1      
let OmniCpp_DefaultNamespaces = ["std", "_GLIBCXX_STD"]      

au CursorMovedI,InsertLeave * if pumvisible() == 0|silent! pclose|endif      
set completeopt=menuone,menu,longest,preview 
```

我会很高兴所有的提示和答案！问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:08:28.593

我找到了解决方案（根据 romainl 的评论，谢谢！）。我对非 root 用户重复了相同的过程。

我需要稍微修改一下我的 .vimrc：

```
syntax on
filetype plugin on

set tags+=/home/USER_NAME/.vim/tags/stl/tags
set tags+=/home/USER_NAME/.vim/tags/gl/tags
set tags+=/home/USER_NAME/.vim/tags/sdl/tags

noremap <F12> :!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q .<cr>
inoremap <F12> <Esc>:!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q .<cr>

let OmniCpp_NamespaceSearch = 1
let OmniCpp_GlobalScopeSearch = 1
let OmniCpp_ShowAccess = 1
let OmniCpp_MayCompleteDot = 1
let OmniCpp_MayCompleteArrow = 1
let OmniCpp_MayCompleteScope = 1
let OmniCpp_DefaultNamespaces = ["std", "_GLIBCXX_STD"]

au CursorMovedI,InsertLeave * if pumvisible() == 0|silent! pclose|endif
set completeopt=menuone,menu,longest,preview 
```

首先，我换了

```
set tags+=~/.vim/tags/stl 
```

和：

```
set tags+=/home/USER_NAME/.vim/tags/stl 
```

其次，我需要直接指向“标签”文件，所以：

```
set tags+=/home/USER_NAME/.vim/tags/stl/tags 
```

其他方式，它提供未找到的 OmniCpp 模式。更多信息，例如这里：[vim omnicppcomplete pattern not found](https://stackoverflow.com/questions/5313943/vim-omnicppcomplete-pattern-not-found)

我希望它对其他人有帮助:) 问候并感谢您的帮助。现在它也适用于非 root 用户。

# javascript - 如何扩展主干视图

> ID：12768726
> 
> 赞同：0
> 
> 时间：2012-10-07T12:14:12.547
> 
> 标签：javascript, backbone.js, requirejs

我是 SPA 的新手，我正在尝试通过使用主干和 requireJs 来开发一个小型应用程序。

我面临的问题是我无法通过传递集合来扩展视图。

嗯，这是名为**MenuView.js的视图**

```
define([
'Backbone'
], function (Backbone) {
var MenuView = Backbone.View.extend({
    tagName: 'ul',
    render: function () {
        _(this.collection).each(function (item) {
            this.$el.append(new MenuListView({ model: item }).render().el);
        }, this);
        return this;
    }
});
return new MenuView;
}); 
```

这是出现错误的**router.js**

```
define([
    'Underscore',
    'Backbone',
    'views/menu/menuView',
    'views/createNew/createNew',
    'collections/menu/menuCollection',
], function (_, Backbone, MenuView, CreateNewView,Menucollection) {

var AppRouter = Backbone.Router.extend({
    routes: {
        'index': 'index',
        'action/:Create': 'Create'
    },
    index: function () {
        CreateNewView.clear();
        //-----------  HERE IS THE PROBLEM ------------
        $('#menu').html(MenuView({ collection: Menucollection.models }).render().el);
    },
    Create: function () {
        CreateNewView.render();
    }
});

var initialize = function () {
    var appRouter = new AppRouter();
    Backbone.history.start();
    appRouter.navigate('index', { trigger: true });
};

return {
    initialize: initialize
};
}); 
```

错误消息是“对象不是函数”。我同意这一点，因为 MenuView 不是一个函数。我试图扩展 MenuView (MenuView.extend({collection:Menucollection.models})) 并且错误消息是“objet [object,object] has no method extend”。

我想我试图做到这一点的方式与正确的方式相去甚远。

谁能建议如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:37:10.573

@Matti John 的解决方案将起作用，但它更像是一种解决方法，而不是最佳实践恕我直言。

实际上，您只需通过要求它来初始化您的视图，其中：

1.  限制你从不接受争论
2.  命中表现
3.  如果您在构建实例后继续分配属性，那么单元测试将变得非常困难。

一个模块应该返回一个“类”视图，而不是该视图上的实例。

在**MenuView.js**中，我会在**router.js**中需要时替换并初始化`return new MenuView`它。`return MenuView;`

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:57:47.387

你的 MenuView.js 返回一个初始化的 MenuView，所以你可以这样做：

```
MenuView.collection = Menucollection 
```

请注意，我没有选择模型 - 我认为最好不要使用模型作为视图集合的替代品，因为阅读代码并且没有 Backbone 集合作为视图集合会令人困惑。您还将丢失集合中包含的方法（例如获取/更新）。

如果你这样做，那么你需要更新你的循环（每个都可以作为集合的方法）：

```
this.collection.each(function (item) {
            this.$el.append(new MenuListView({ model: item }).render().el);
        }, this); 
```**

# javascript - Javascript 回显 HTML 而不是处理它

> ID：12768729
> 
> 赞同：0
> 
> 时间：2012-10-07T12:15:09.030
> 
> 标签：javascript, json, stripslashes

我正在尝试自定义名为 Showtime 的 WordPress 插件的输出。Showtime 包含以下 Javascript 以输出在日程表中输入的内容。出于造型原因，我正在进入插件管理区域进行表演-

```
<h3>Drivetime</h3><p>with Davie Boy</p> 
```

我遇到的问题是，这实际上是在页面上打印出来/回显的，并且 html 没有被渲染/处理，就像包装在 pre 标签中一样。

我了解以下 javascript 输出节目，我怎样才能让它实际上不回显 html 而是处理它。抱歉，如果我没有使用正确的术语。

非常感谢任何帮助

抢

更新

感谢您的评论 - 让我思考。这个 javascript 从名为 crud.php 的 PHP 脚本中获取 Showname。回顾一下，我认为这可能是 crud.php 中的违规行

```
$showname   = htmlentities(stripslashes(($_POST['showname']))); 
```

而不是javascript本身？

```
jQuery(function($){

function get_current_show() {
//Get the current show data
$.post(crudScriptURL, {"crud-action" : "read", "read-type" : "current"}, function (currentShowJSON) {

    var schedule = $.parseJSON(currentShowJSON);
    var outputHTML = '';

    var currentShow = schedule['current-show'];
    if (currentShow.showName){
        var currentShowName = currentShow.showName;
        var imageURL = currentShow.imageURL;
        var linkURL = currentShow.linkURL;
        var startClock = currentShow.startClock;
        var endClock = currentShow.endClock;

        outputHTML += '<div id="showtime">'+currentShowName+'</div>';

        if (imageURL){
            if (linkURL){
                outputHTML += '<a href="'+linkURL+'"><img class="showtime-image-thumbnail" src="'+imageURL+'" alt="'+currentShow.showName+'" /></a>';
            } else {
                outputHTML += '<img class="showtime-image-thumbnail" src="'+imageURL+'" alt="'+currentShow.showName+'" />';
            }
        }

    } else {

        outputHTML += '<h3 class="current-show">'+currentShow+'<h3>';

    }

    var upcomingShow = schedule['upcoming-show'];
    if (upcomingShow){
        var upcomingShowName = upcomingShow.showName;
        var upcomingShowLink = upcomingShow.linkURL;
        var upcomingStartClock = upcomingShow.startClock;
        var upcomingEndClock = upcomingShow.endClock;

        if (upcomingShowLink){
            outputHTML += '<h3 class="upcoming-show"><strong>Up next:</strong> <a href="'+upcomingShowLink+'">'+upcomingShowName+'</a></h3>';
        } else {
            outputHTML += '<h3 class="upcoming-show"><strong>Up next:</strong> '+upcomingShowName+'</h3>';
        }

        outputHTML += '<span>'+upcomingStartClock + ' - ' + upcomingEndClock + '</span>';

    }

    $('.showtime-now-playing').html(outputHTML);

    //Set a timer to update the widget every 30 seconds
    setTimeout (get_current_show, (30 * 1000));

});

}

get_current_show();

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:35:44.380

如果您对这些有一致的格式，并且真的不需要使用符号作为显示的一部分，则可以在 jquery 函数中实现一种解析器。例如，您可以输入`<h3>Drivetime</h3><p>with Davie Boy</p>`，然后在代码中执行以下操作：

```
var currentShowName = $('<div/>').html(currentShow.showName).text(); 
```

# java - RBG 24bit 到 RGB 8bit 位移

> ID：12768732
> 
> 赞同：0
> 
> 时间：2012-10-07T12:15:50.090
> 
> 标签：java, encoding, bit-shift, 8-bit

如何使用java中的位移将3个数字存储在一个字节中，即前3位用于R，接下来的3位用于G，最后2位用于B。我想我知道如何从字节，但是编码和解码的例子会很棒。

谢谢杰克

编辑：

R 和 G 的值范围是 0-7 和 B 的 0-3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:19:21.323

给定`r`和在 0 - 255 范围内`g`：`b`

```
rgb = (b >>> 6) << 6 | (g >>> 5) << 3 | (r >>> 5); 
```

这是按以下顺序填写结果：

```
+--+--+--+--+--+--+--+--+
|B7|B6|G7|G6|G5|R7|R6|R5|
+--+--+--+--+--+--+--+--+ 
```

即，我假设当您说“第一”时，您的意思是最不重要的。如果你想要他们反过来，那就是：

```
rgb = (b >>> 6) | (g >>> 5) << 2 | (r >>> 5) << 5; 
```

# intellij-idea - 如何/我可以在 Intellij IDEA 中显示控制台窗口？

> ID：12768738
> 
> 赞同：53
> 
> 时间：2012-10-07T12:16:39.967
> 
> 标签：intellij-idea

是否可以将控制台窗口/命令行界面作为 Intellij IDEA UI 的一部分？我宁愿为某些操作使用命令行，例如使用 GIT 或启动构建过程，但目前这意味着保持单独的控制台窗口打开和 alt-tabbing。

是否有某种形式的集成控制台？甚至更好的是，它可以默认自动指向我的项目根目录吗？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2015-01-20T11:34:41.637

**IntelliJ IDEA 14 & 15 & 2017** :

视图 > 工具窗口 > 终端

或者

`Alt`+`F12`

![在此处输入图像描述](../Images/e6dc3e5e4fb976ceeaa879932567c316.png) ![在此处输入图像描述](../Images/c1b24427b5d2c349fcda9041d371ce17.png)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-10-24T03:22:32.673

在 IntelliJ IDEA 2016.1.1 中：

1.  查看->工具窗口->调试 (Alt+5)
2.  在调试窗口的右上角，单击“恢复控制台视图”，它只显示如下图标：

[![恢复控制台视图](../Images/04ab81993df3f5fd86755e15db71f9e1.png)](https://i.stack.imgur.com/fz5KR.png)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-01-20T11:56:28.697

终端的更多 IntelliJ 13+ 快捷方式

**Mac OS X**：

`alt ⌥</kbd>`F12``

`cmd ⌘</kbd>`shift ⇧</kbd>`A` then type `Terminal` then hit `Enter```

`shift ⇧</kbd>`shift ⇧</kbd>`shift ⇧</kbd>`shift ⇧</kbd> then type `Terminal` then hit `Enter`````

**窗户**：

`alt``F12`按`Enter`

`ctrl``shift ⇧</kbd>`A` start typing `Terminal` then hit `Enter``

`shift ⇧</kbd>`shift ⇧</kbd> then type `Terminal` then hit `Enter```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-01-13T05:20:59.407

查看>工具窗口>运行

它将向您显示控制台

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-07T15:03:42.190

**更新**：控制台/终端功能在 IDEA 13、PyCharm 3、RubyMine 6、WebStorm/PhpStorm 7 中实现。

有一个[相关的功能请求](http://youtrack.jetbrains.com/issue/PY-5166)，请投票。设置一个[外部工具](http://www.jetbrains.com/idea/webhelp/configuring-third-party-tools.html)来运行终端可以作为一种解决方法。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-07-12T23:01:47.403

将鼠标悬停在侧边栏并选择“恢复调试器的视觉元素...”

[![在此处输入图像描述](../Images/915b9df877add10de62c92ef5c0b48b5.png)](https://i.stack.imgur.com/vf9sM.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-03-08T09:45:00.430

1.  按下左上角按钮
2.  选择调试
3.  点击控制台

[![在此处输入图像描述](../Images/6557692ea7e03d9e54301c557e950c5e.png)](https://i.stack.imgur.com/8DkTZ.png)

[![在此处输入图像描述](../Images/fa13b43310fcc13e7ca3dbdee4770252.png)](https://i.stack.imgur.com/lISVh.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-08T08:31:15.140

我使用**Shift + F12**再次显示控制台（或**Window > Restore Default Layout**）。

为了实现这一点，我之前保存了默认打开控制台的布局（**Window > Store Current Layout as Default**）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-05-21T21:49:23.937

**IntelliJ IDEA 2018.3.6**

使用 macOS Mojave 版本 10.14.4 并按`⌥</kbd>`F12`(Alt+F12) will open Sound preferences.`

不更改当前键盘映射的解决方案是将上面的命令与 key 一起使用`fn`。

`fn` `⌥</kbd> `F12`(fn+Alt+F12) will open the Terminal. And you can use `Shift``Esc` to close it.`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-15T06:39:28.390

**在 IntelliJ IDEA 2020.2.1 上**

单击要以窗口模式打开的选项卡。

右键单击选项卡名称并选择查看模式 > 窗口

[![作为这个图像](../Images/dbd84ac6a5b574c9f7bc61b437845f51.png)](https://i.stack.imgur.com/Nwrwc.png)

# header - 从部分/小节中删除编号但将它们保留在 ToC 中？

> ID：12768740
> 
> 赞同：0
> 
> 时间：2012-10-07T12:17:13.210
> 
> 标签：header, pdf-generation, tableofcontents

我正在编写一个 PDF 文件，我很容易拥有一个 ToC，我可能不得不混合编号和非编号的部分标题，但我正在努力寻找如何自动执行此操作（例如，只需在部分名称中添加 * 或像这样的东西）。

```
 \section* 
```

删除了编号，但它也从 ToC 中删除了该部分

# arrays - 在 Golang 中重新切片

> ID：12768744
> 
> 赞同：25
> 
> 时间：2012-10-07T12:17:50.763
> 
> 标签：arrays, slice

我最近学习了 Go 语言，现在我对以下代码感到困惑：

```
package main

import "fmt"

func main() {
    a := make([]int, 5)
    printSlice("a", a)
    b := make([]int, 0, 5)
    printSlice("b", b)
    c := b[:2]
    printSlice("c", c)
    d := c[2:5]
    printSlice("d", d)
}

func printSlice(s string, x []int) {
    fmt.Printf("%s len=%d cap=%d %v\n",
        s, len(x), cap(x), x)
} 
```

结果：

```
a len=5 cap=5 [0 0 0 0 0]
b len=0 cap=5 []
c len=2 cap=5 [0 0] //why the capacity of c not 2 but 5 instead
d len=3 cap=3 [0 0 0] 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-07T12:19:46.673

`c`是从数组中取出的切片`b`。这不是副本，而只是`b`.

由于`b`容量为 5，`c`可以扩展到其他 3 个位置（实际上它会创建一个新切片，但位于内存中的同一位置）。

切片的最大容量是底层数组的容量减去数组中切片开始的位置：

```
 array : [0 0 0 0 0 0 0 0 0 0 0 0]
 array :  <----   capacity   --->
 slice :     [0 0 0 0]
 slice :      <---- capacity ---> 
```

也许这个程序会更清楚地表明 c 和 d 只是 b 上的窗口：

```
func main() {
    b := make([]int, 0, 5)
    c := b[:2]
    d := c[1:5] // this is equivalent to d := b[1:5]
    d[0] = 1
    printSlice("c", c)
    printSlice("d", d)
} 
```

输出 ：

```
c len=2 cap=5 [0 1] // modifying d has modified c
d len=4 cap=4 [1 0 0 0] 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-09-20T07:33:03.400

请注意，在 go 1.2（[2013 年第四季度，1.2rc1 现在可用](http://code.google.com/p/go/downloads/list)）中，**您可以将切片自身的容量关联到切片**（而不是从底层数组推导出的容量）。

请参阅“[三索引切片](http://tip.golang.org/doc/go1.2#three_index)”和[设计文档](http://golang.org/s/go12slice)。

> 切片操作通过描述已创建的数组或切片的连续部分来创建新切片：

```
var array [10]int
slice := array[2:4] 
```

> 切片的容量是切片可以容纳的最大元素数，即使在重新切片之后；它反映了底层数组的大小。
> 在本例中，切片变量的容量为 8。

（底层数组的容量减去数组中切片开始的位置）

```
array : [0 0 0 0 0 0 0 0 0 0]
 array : <---- capacity --->
 slice :    [0 0]
 slice :    <-- capacity --> 8 (10-2) 
```

> Go 1.2 添加了新语法以允许切片操作**指定容量和长度**。
> **第二个冒号引入了容量值，该值必须小于或等于源切片或数组的容量，并针对 origin 进行了调整**。
> 
> 例如，

```
slice = array[2:4:6]

array : [0 0 0 0 0 0 0 0 0 0]
 array : <---- capacity --->   10
 slice :    [0 0]
 slice :    <- cap->           4 (6-2) 
```

> 将切片设置为与前面示例中相同的长度，但其容量现在只有 4 个元素 (6-2)。
> **不可能使用这个新的切片值来访问原始数组的最后两个元素**。

主要论点是让程序员对**[`append`](http://golang.org/ref/spec#Appending_and_copying_slices)**.

```
a[i : j : k] 
```

该切片具有：

*   从 0 开始的索引
*   长度等于`j - i`
*   容量等于`k - i`

**`i <= j <= k <= cap(a)`如果不正确，则评估会出现恐慌**。

# javascript - 如何在脚本函数中获取 JSP 变量的值？

> ID：12768749
> 
> 赞同：0
> 
> 时间：2012-10-07T12:18:23.960
> 
> 标签：javascript, jsp

我试图用警告消息显示变量的值，我在 jsp 页面中编写了这段代码，

```
<c:set var="my_var" value="Hello world!"/>
<script>
    function myFunction(){
        alert("<%=my_var%>");
        return false;
        }
</script> 
```

但是当我运行它时，我得到了这个错误

> 无法解析符号符号：变量 my_var

请帮助我任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:01:50.300

脚本变量不是作用域变量。尝试使用

alert("${my_var}");

# python - 检查列表元素是否在其他列表元素中的最简单方法？

> ID：12768756
> 
> 赞同：0
> 
> 时间：2012-10-07T12:19:51.993
> 
> 标签：python, list

```
 a = ['ava','olivia','hannah','olivia']
    b = ['aa','ab','ac','av']

    for i in a:
        for j in b:
            if j in i:
                print (i)
    #output: ava

    for i in a:
        if any(j in i for j in b):
            print (i)
    #output: ava 
```

有 2 个包含一些元素的列表，我想要每个列表 1 个元素中的每个列表 2 个元素。

有没有更好的获取方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T12:42:43.910

这就够了：

```
print [word for word in a if any(part in word for part in b)] 
```

无需使用`filter`,`map`或`lambda`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:35:41.813

不一定更好，但它们是单线：

```
a = ['ava','olivia','hannah','olivia']
b = ['aa','ab','ac','av']

result = filter(None, map(lambda x: x if any(map(lambda y: y in x, b)) else None, a))
print result 
```

或者：

```
result2 = filter(None, [x if y in x else None for x in a for y in b])
print result3 
```

或者：

```
result3 = filter(None, [x if any([y in x for y in b]) else None for x in a])
print result2 
```

# c# - 层 ASP.NET MVC 项目

> ID：12768763
> 
> 赞同：2
> 
> 时间：2012-10-07T12:20:32.753
> 
> 标签：c#, asp.net, asp.net-mvc, design-patterns, domain-driven-design

我试图理解一个好的设计项目的概念。

我正在使用 ASP.NET MVC，并且正在尝试创建一个分层（可插入）项目。

我现在拥有的当前项目结构是这样的：

1.  `LayeredProject`- 包含控制器的 MVC 项目

2.  `LayeredProject.EntityFramework`- 包含用于数据库的所有 POCO 类。（我正在使用代码优先方法）

3.  `LayeredProject.Model`- 这应该包含项目中使用的所有业务对象。

说该项目是一个电子商务网站，我会这样构建它：

*   在`LayeredProject.EntityFramework`项目中，我有对应于数据库表的类。类别、产品、用户。该项目仅用于保存和加载数据库中的数据，这些对象不应用于其他目的。这个项目有一个对`LayeredProject.Model`项目的引用。

*   在`LayeredProject.Model`项目中，我存储了我使用的所有对象，其中大多数都是`LayeredProject.EntityFramework`POCO 的对象和使用的其他一些服务类的副本。

*   我`LayeredProject`保留了我所有的 ViewModels 类、控制器和不同的 UI 逻辑。这个项目有一个对`LayeredProject.Model`项目的引用。

首先，我不确定这是否是正确的做法。

而且，这是正确的做法，然后我会有点困惑，因为我将在`EntityFramework`项目和`Model`项目中复制我的 POCO 类。

请帮助我理解这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:41:11.780

您可以使用分层结构设计您的项目，也可以使用 MVC。控制器和视图部分应保持不变。您可以根据需要将业务逻辑部分划分为任意多的层。该模型应该是您期望的层数的结果。为此，将您的业务逻辑保留在一个单独的项目中（不是必需的：它可以在 Web 项目本身中），将该项目中的 dll 引用到 MVC Web 解决方案。将由于数据库查询而生成的模型传递给 Web 解决方案，并在控制器的帮助下呈现视图。（我已经使用这种风格完成了我的项目）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T10:07:47.997

MVC 项目应包含：

*   视图模型：视图模型，即非常特定于渲染每个视图的模型（这些模型不是 MVC 中的 M）。该模型通常包含必须在视图中显示或编辑的数据，以及渲染视图所需的附加信息：例如，如果视图必须渲染下拉列表，则视图模型应包含相应的 SelectList 或 IEnumerable 以填充列表。您可以使用映射器，如 AutoMapper 或 ValueInjecter 将数据从业务实体（来自业务层的实体）移动到视图模型，反之亦然。或者如果合适，您可以直接将业务实体用作模型视图中的属性（视图模型不需要是平面的：它可以包含对象作为属性）
*   视图，使用视图模型进行强类型化
*   控制器：此控制器使用业务逻辑（即模型，MVC 中的 M）来控制应用程序流程，为视图创建和提供模型视图，并对用户操作做出反应
*   UI helper：我通常添加这一层来实现 DRY 原则。即，如果我必须准备一个 SelectList 并且它将在许多视图中使用，我会在这一层中进行，并从所有必要的地方使用它。这可能包括计算、排序或与 UI 密切相关的任何内容，因此它不适合业务层（模型）。这使用业务层，并提供特定于视图的数据。

这些是 MVC 的特定和关键部分，其中包括 MVC 中的 VC（视图和控制器） MVC（模型）中的 M 是可以“照常”完成的业务逻辑。即你不需要在你的业务层做任何特别的事情来使用它和MVC。您可以使用您选择的技术（传统的 DAL + BLL、WCF、WS 或任何您想要的）。

这对于 LOB 应用程序很有效。当然，如果你正在做一个玩具应用程序，你可以忘记这一切，做一些更单一的东西。但我只建议很少有维护需求的应用程序这样做。

这些是允许编辑“宠物”的多个图层中的对象示例：

*   业务逻辑层：
    *   PetService，一个可用于读取、写入、查找和修改宠物的类（如上所述，如何实现并不重要）
*   业务实体：是管理宠物的BLL实体。这可以是 POCO 对象或 DDD 实体：
    *   Pet - int Id、int PetTypeId、字符串名称...
*   View Model：包含一个 Pet 属性，以及一个 PetType 列表，以便视图可以呈现 PetTypeId 的下拉列表：
    *   PetViewModel - 宠物 ThePet，选择列表 PetTypes
*   UI Helper：如果 PetTypes 将用于一个或两个以上的视图，PetUiHelper 可以为所有需要它的视图提供这个选择列表：
    *   PetUiHelper - GetPetTypesList()
*   Pet 视图：PetViewModel 的强类型视图
    *   视图\宠物\Edit.cshtml
*   PetController：使用 PetService 创建视图及其模型视图。
    *   PetController - Edit(int id) --> 返回一个 Edit 视图及其对应的 PetViewModel。还必须有一个 HttpPost Edit 操作，它接收特定模型或 PetViewModel 中的用户输入，或 Pet 加上 Id 或其他任何内容。这取决于您正在编辑的内容。

最后，如果您知道如何使用 DI，您可以使用 Unity.Mvc 或任何其他选项在控制器中注入业务服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T12:45:53.660

似乎您使用 Code First 方法来构建数据访问，您可以深入了解这篇广泛的文章并获得更多见解。

[http://ofps.oreilly.com/titles/9781449320317/ch_AdvancedData.html](http://ofps.oreilly.com/titles/9781449320317/ch_AdvancedData.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T12:57:30.357

你可能有太多的层，没有理由将模型与业务逻辑与 LayeredProject MVC 层本身分开，除非你计划有一个客户端应用程序或其他一些单独的项目来访问模型。在 MVC 项目中，您已经有一个模型文件夹可以用于此目的。然而，在 MVC 项目中，您还应该添加一个“ViewModels”文件夹来保存专门用于视图关注点的模型（例如 DTO 对象）。

这个项目展示了一种很好的简单方法，可以在 MVC 项目的文件夹中简单地保持事物分开：[RacoonBlog Project](https://github.com/fitzchak/RaccoonBlog/tree/master/RaccoonBlog.Web)。尽管它使用 RavenDB 而不是 EF，但想法是相同的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T18:29:22.853

我工作过的大多数 MVC 应用程序都是以这种方式分层的

MVC 项目：拥有控制器、视图和模型。业务逻辑驻留在模型中。

数据访问层（持久层）：该项目使用 ORM。（在你的情况下实体框架工作）

映射到数据库表的类驻留在模型中，而不是数据访问层中。

# iphone - 如何设置 UISlider 的 MinimumTrackImage 使其不会拉伸？

> ID：12768764
> 
> 赞同：3
> 
> 时间：2012-10-07T12:20:37.480
> 
> 标签：iphone, objective-c, ruby, uislider, rubymotion

自从我更新了我的 XCode 后，`MinimumTrackImage`我的 UISlider 上的现在正在拉伸，而在它像我想要的那样剪裁之前。的`MaximumTrackImage`行为没有改变。

**我怎样才能`MinimumTrackImage`不拉伸？**请注意，我使用 ruby​​motion，但使用 obj-c 的解决方案也是可以接受的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T13:14:08.210

我在这里猜测（你可以在 StackOverflow 上猜测，只要你是诚实的）...... iOS6 有一个新的图像功能，也许这会妨碍你。您可以为图像设置`resizingMode`和`capInsets`。试试这个：

```
// Objective-C
UIImage *newImage = [oldImage resizableImageWithCapInsets:UIEdgeInsetsZero resizingMode:UIImageResizingModeTile];

# RubyMotion
newImage = oldImage.resizableImageWithCapInsets(UIEdgeInsetsZero, resizingMode:UIImageResizingModeTile) 
```

如果您还需要调整插图，请替换`UIEdgeInsetsZero`为`UIEdgeInsetsMake(top, left, bottom, right)`where `top`、`left`、`bottom`和`right`are `floats`。在 RubyMotion 中，我相信你可以只使用`[top, left, bottom, right]`.

信息来自这里：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html)

# python - python和另一个程序写入同一个文件

> ID：12768765
> 
> 赞同：0
> 
> 时间：2012-10-07T12:20:38.377
> 
> 标签：python

我注意到 python 总是记住它在文件中完成写入的位置并从那一点继续。有没有办法重置它，以便如果文件由另一个删除某些文本和广告的程序编辑，另一个 python 在下次写入时不会用 NULL 填补空白？

我在父级中打开了文件，线程子级正在写入它。我使用刷新来确保写入后数据被物理写入文件，但这只是这样做的好处。

是否有另一个我似乎想念的函数可以使 python 正确附加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:31:23.627

一件安全的、独立于操作系统且可靠的事情当然是关闭文件，然后在写入时再次打开它。

如果因此而导致的性能障碍是不可接受的，您可以尝试在写入之前使用“seek”移动到文件末尾。我只是在交互式控制台中做了一些简单的测试，实际上，`file.seek(0, os.SEEK_END)`在编写之前使用是有效的。

并不是说我认为在大多数情况下让两个进程写入同一个文件是安全的——你最终会遇到某种竞争条件。一种解决方法是实现文件锁，以便一个进程在获取锁后只需写入文件。可以考虑以正确的方式完成此操作。因此，请检查您的应用程序是否处于更好的位置，使用多年来精心构建和硬化的数据来编写数据，以允许各种进程同时更新，例如 SQL 引擎（MySQL 或 Postgresql）。

# powershell - Powershell v3 New-JobTrigger 每天重复

> ID：12768769
> 
> 赞同：7
> 
> 时间：2012-10-07T12:21:03.547
> 
> 标签：powershell

Powershell v3 附带了所有这些新的作业调度 cmdlet。它们看起来很棒，但我在创建特定触发器时遇到了麻烦。我需要每天运行一项工作，每小时重复一次，持续特定的时间间隔。

使用 Task-Scheduler UI 很简单，但我找不到 New-JobTrigger cmdlet 的方法。

如果我使用 Daily 参数集，我没有 Repetition 选项：

```
New-JobTrigger [-Daily] -At <DateTime> [-DaysInterval <Int32> ] [-RandomDelay <TimeSpan> ] [ <CommonParameters>] 
```

如果我使用“Once”参数集，则无法使用“Daily”选项

```
New-JobTrigger [-Once] -At <DateTime> [-RandomDelay <TimeSpan> ] [-RepetitionDuration <TimeSpan> ] [-RepetitionInterval <TimeSpan> ] [ <CommonParameters>] 
```

我需要但显然不起作用的是两者之间的混合。例如：

```
New-JobTrigger -Daily -At xxxx -RepetitionDuration (New-TimeSpan -Hours 5) -RepetitionInterval (New-TimeSpan -Hours 1) 
```

是否可以？也许为同一个工作混合多个触发器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T20:59:38.007

这对我有用：

注意 - 我知道最初的问题与 New-JobTrigger 有关 目的是提供一个可能的解决方案，该解决方案也可以翻译为 New-JobTrigger ，因为该问题适用于两者。

```
$A = New-ScheduledTaskAction -execute "powershell" -argument "-nologo -noprofile -noninteractive C:\MyScript.ps1"
$T = New-ScheduledTaskTrigger -Once -At 03:00AM 
Register-ScheduledTask -TaskName StartBasicServices_Local -Trigger $T -Action $A -description "MyScript" -User "NT AUTHORITY\SYSTEM" -RunLevel 1      
$T.RepetitionInterval = (New-TimeSpan -Minutes 5)
$T.RepetitionDuration = (New-TimeSpan -Days 1)
Set-ScheduledTask StartBasicServices_Local -Trigger $T 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:31:19.867

我整天都在研究这个问题，我终于有了答案。你不能。无论如何都不使用这些 cmdlet。起初我认为这可能是一种解决方法：

```
$Job = Register-ScheduledJob -Name "YourJobName"  {Gci};
$RepeatTrigger = New-JobTrigger -Once -At (Get-Date 10:00).ToShortTimeString()  -     RepetitionInterval (New-TimeSpan -Hours 1) -RepetitionDuration (New-TimeSpan -Hours 7);
$RepeatTrigger.Frequency = [Microsoft.PowerShell.ScheduledJob.TriggerFrequency]::Daily;
Add-JobTrigger -InputObject $Job -Trigger $RepeatTrigger 
```

然而，它没有。使用 trace-command 看起来它会根据参数集验证属性。使用 schtasks 时也是如此：

```
schtasks /create /tn YourTask /tr notepad.exe /sc Hourly 
```

它将每小时创建一次，但它必须是一次性的任务。从外观上看，有一个用于 COM API 的 .Net 包装器，如果您是 PoSH 新手，这可能是您最好的选择。您可以在[CodePlex](http://taskscheduler.codeplex.com/)上找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-06T15:40:35.190

> 我知道 Add-JobTrigger，但我不明白如何实现我的特定要求：每天运行一项工作，每小时重复一次，持续特定的持续时间。例如：每天上午 10 点，每隔 1 小时重复一次，直到下午 5 点。– Scarmuega 2012 年 10 月 7 日 18:14

使用 Register-ScheduledJob 创建作业。然后添加每日触发器。如果我们能做到这一点，那就太好了，但是 -Daily 在 PowerShell 4.0 中不起作用。请继续阅读，我有一个替代方案。

```
# Technet: http://technet.microsoft.com/en-us/library/hh849759.aspx
# To create a repeating schedule, use the Once parameter with the RepetitionDuration and RepetitionInterval parameters.
# -RepetitionInterval Repeats the job at the specified time interval. For example, if the value of this parameter is 2 hours, the job is triggered every two hours.
#  The default value, 0, does not repeat the job.
# -RepetitionDuration Repeats the job until the specified time expires. The repetition frequency is determined by the value of the RepetitionInterval parameter. 
#  For example, if the value of RepetitionInterval is 5 minutes and the value of RepetitionDuration is 2 hours, the job is triggered every five minutes for two hours.
#
$trigger = New-JobTrigger -Daily -At 10:00 -RepetitionDuration 7:00:00 -RepetitionInterval 1:00:00 -DaysofWeek 
Register-ScheduledJob -Name Test -Trigger $trigger -ScriptBlock {} 
```

你可以组织你的工作，让它在你想要的每个小时都有一个触发器。

```
$trigger4am  = New-JobTrigger -Daily -At 04:10
Register-ScheduledJob -Name ArchiveProd -Trigger $trigger4am -ScriptBlock {E:\ArchiveProd.ps1}

$trigger8am  = New-JobTrigger -Daily -At 08:10
$trigger12pm = New-JobTrigger -Daily -At 12:10
$trigger6pm  = New-JobTrigger -Daily -At 18:10
Add-JobTrigger -Trigger $trigger8am  -Name ArchiveProd
Add-JobTrigger -Trigger $trigger12pm -Name ArchiveProd
Add-JobTrigger -Trigger $trigger6pm  -Name ArchiveProd 
```

希望那是你所需要的。它适用于我的情况，尽管我更愿意添加 Daily 参数。也许有人可以为我改进这个？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-27T09:28:46.033

一个迟到的答案，但我从这个问题开始，然后在[这个链接 Petri.com上进行了更多搜索并找到了解决方案](https://www.petri.com/creating-repeating-powershell-scheduled-jobs)

```
$principal = New-ScheduledTaskPrincipal -UserID MyDomain\MyGMSA$ -LogonType Password -RunLevel Highest
$action = New-ScheduledTaskAction  "E:\DoSomething"
$when = New-ScheduledTaskTrigger -Daily -At "00:02" -DaysInterval 1

Register-ScheduledTask -TaskName MyNewTask–Action $action –Principal $principal -Trigger  $when

$t = Get-ScheduledTask -TaskName MyNewTask

$t.Triggers.repetition.Interval = "PT15M"    #every 15 mins
$t.Triggers.repetition.Duration = "PT7H30M" #for 7 hours 30
$t | Set-ScheduledTask 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T17:55:00.123

尝试使用`Add-JobTrigger`将多个作业触发器添加到计划作业。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T10:11:05.980

```
clear
Import-Module TaskScheduler 

# Create a new task 
$task = New-Task 

Add-TaskAction -Task $task -Path "C:\Windows\notepad.exe"   
Add-TaskTrigger -Task $task -Daily -At "06:00" -Repeat "05:00" -For "12:00" 

# Register the task 
Register-ScheduledTask -Name "PowerShell - MyScript.ps1" -Task $task

Get-ScheduledTask PowerShell* | select -Property Name
# Remove-Task -n Power* 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-21T16:20:23.510

您可以创建多个触发器，如下所示：

```
$job = Register-ScheduledJob -Name "Test1" -FilePath "C:\temp\script.ps1"
$triggers = New-Object System.Collections.Generic.List[Microsoft.PowerShell.ScheduledJob.ScheduledJobTrigger]
$times = ("08:00", "09:00", "10:00", "11:00", "12:00", "14:00", "15:00", "16:00", "17:00", "19:00", "22:00")
foreach($t in $times){
$triggers.Add((New-JobTrigger -Daily -At $t))
}
$job.AddTriggers($triggers, $true) 
```

或者更容易（但更慢）

```
$MyJob = Register-ScheduledJob -Name "MyJob" -FilePath "C:\temp\test.ps1"
$times = ("08:00", "09:00", "10:00", "11:00", "12:00", "14:00", "15:00", "16:00", "17:00", "19:00", "22:00")
foreach($t in $times){$MyJob | Add-JobTrigger -trigger (New-JobTrigger -Daily -At $t)} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-10T10:53:07.607

当您使用“Register-ScheduledJob”创建计划作业时，您无法将每日执行与重复间隔配置在一起。即使您手动修改了 ScheduledJobTrigger 对象的属性“RepetitionInterval”和“RepetitionDuration”，触发器也将配置为每天执行一次或重复执行一次。我设法通过`Get-ScheduledTask`方法获取作业的相应任务并在那里修改触发器来配置它：

```
    $trigger = New-JobTrigger -Weekly -WeeksInterval 1 -At "06:00" -DaysOfWeek Monday,Tuesday,Wednesday,Thursday,Friday     
    Register-ScheduledJob -Name $cronjobName -Trigger $trigger -ScriptBlock $scriptBlock
    $task = Get-ScheduledTask -TaskName $cronjobName
    $trigger = $task.Triggers
    $trigger.Repetition.Interval = "PT10M"
    $trigger.Repetition.Duration = "PT12H"
    Set-ScheduledTask -TaskPath $task.TaskPath -TaskName $cronjobName -Trigger $trigger

```

# backbone.js - 重新渲染视图 - 主干

> ID：12768771
> 
> 赞同：2
> 
> 时间：2012-10-07T12:21:08.820
> 
> 标签：backbone.js

我是骨干新手，我正在尝试重新渲染视图的内容。我已经把代码放在jsfiddle中......

[http://jsfiddle.net/rzYLU/11/](http://jsfiddle.net/rzYLU/11/)

那么当用户点击重新渲染时，我怎样才能删除 dom 中的内容并只显示新项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T18:00:42.493

最安全的做法是`QuestionView`在`AppView`. 然后你可以在添加新的之前调用`remove`每个；`QuestionView`该[`remove`方法是](http://backbonejs.org/#View-remove)：

> 用于从 DOM 中删除视图的便利功能。相当于调用`$(view.el).remove()`；

视图应该提供自己的`remove`实现来解除与非 DOM 事件的绑定，从而防止僵尸。默认设置只是`el`从 DOM 中删除视图，但如果你从一开始就这样做，当你的代码不可避免地发生变化时，一切都会很好地工作。

首先调整你`QuestionView`有一个`remove`方法来删除你绑定到模型的事件：

```
var QuestionView = Backbone.View.extend({
    //...
    remove: function() {
        this.model.off('change', this.render);
        this.$el.remove();
    }
}); 
```

然后，您需要进行一些调整来`AppView`跟踪您`QuestionView`的 s：

```
var AppView = Backbone.View.extend({
    //...
    initialize: function() {
        //...
        this.sub_views = [ ];
        //...
    },
    //...
    addOne: function(question) {
        var view = new QuestionView({
            model: question
        });
        this.sub_views.push(view); // <----------------------- Add this
        this.$("#question-list").append(view.render().el);
    },
    addAll: function() {
        for(var i = 0; i < this.sub_views.length; ++i) // <--- And these three lines
            this.sub_views[i].remove();
        this.sub_views = [ ];
        Questions.each(this.addOne);
    } 
```

演示：http: [//jsfiddle.net/ambiguous/FF9eG/](http://jsfiddle.net/ambiguous/FF9eG/)

我还更新了您的代码以使用[`on`](http://backbonejs.org/#Events-on)和[`off`](http://backbonejs.org/#Events-off)代替`bind`并`unbind`匹配新样式。较新版本的 Backbone 也有 in 的缓存版本，`$(this.el)`因此[`this.$el`](http://backbonejs.org/#View-%24el)我也更新了代码以使用它。

# jquery - jQuery 针对所有列表元素，而不仅仅是一个

> ID：12768774
> 
> 赞同：0
> 
> 时间：2012-10-07T12:21:42.987
> 
> 标签：jquery, html, css

我有一个问题，我的下拉列表正在切换整个`li`元素集。我只是想知道如何更改我的 jQuery 以定位父级的*第一个子 ul*，在本例中是`span`我单击的元素。

有没有简单的方法来解决这个问题？我在下面附上了一个 JSFiddle，也不完全确定为什么 list 有一个巨大的左边距，但这似乎微不足道。

[http://jsfiddle.net/4yJuc/24/](http://jsfiddle.net/4yJuc/24/)

**的HTML**

```
<dl id="sample" class="dropdown">
    <dt><a href="#"><span>COUNTRIES</span></a></dt>
    <dd>
        <ul>
            <li><a href="#">Brazil<img class="flag" src="br.png" alt="" /><span class="value">BR</span></a></li>
            <li><a href="#">France<img class="flag" src="fr.png" alt="" /><span class="value">FR</span></a></li>
            <li><a href="#">Germany<img class="flag" src="de.png" alt="" /><span class="value">DE</span></a></li>
            <li><a href="#">India<img class="flag" src="in.png" alt="" /><span class="value">IN</span></a></li>

        </ul>
    </dd>

        <dt><a href="#"><span>PLANETS</span></a></dt>
    <dd>
        <ul>
            <li><a href="#">EARTH<img class="flag" src="br.png" alt="" /><span class="value">BR</span></a></li>
            <li><a href="#">SATURN<img class="flag" src="fr.png" alt="" /><span class="value">FR</span></a></li>
            <li><a href="#">MARS<img class="flag" src="de.png" alt="" /><span class="value">MR</span></a></li>
            <li><a href="#">PLUTO(JK)<img class="flag" src="in.png" alt="" /><span class="value">PL</span></a></li>

        </ul>
    </dd>

</dl>
<span id="result"></span>​ 
```

**jQuery**

```
 $(document).ready(function() {
            $(".dropdown img.flag").addClass("flagvisibility");

            $(".dropdown dt a").click(function() {
                $(".dropdown dd ul").toggle();
            });

            $(".dropdown dd ul li a").click(function() {
                var text = $(this).html();
                $(".dropdown dt a span").html(text);
                $(".dropdown dd ul").hide();
                $("#result").html("Selected value is: " + getSelectedValue("sample"));
            });

            function getSelectedValue(id) {
                return $("#" + id).find("dt a span.value").html();
            }

            $(document).bind('click', function(e) {
                var $clicked = $(e.target);
                if (! $clicked.parents().hasClass("dropdown"))
                    $(".dropdown dd ul").hide();
            });

            $("#flagSwitcher").click(function() {
                $(".dropdown img.flag").toggleClass("flagvisibility");
            });
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T12:25:41.650

在您的`click`处理程序中，您不能只使用类说明符 - 这就是您的操作会影响*每个*匹配元素的原因。

您需要遍历 DOM 树（即`.parent()`、`.child()`等）来找到您想要修改的相关元素。

例如在这个处理程序中：

```
$(".dropdown dt a").click(function() {
    $(".dropdown dd ul").toggle();
}); 
```

您可能希望显示包含 clicked的`dd > ul`元素：`<dt>``<a>`

```
$(".dropdown dt a").click(function() {
    $(this).parent().next('dd').children('ul').first().toggle();
}); 
```

尽管如此（根据评论），如果您的 HTML 标记保持原样，您可以将其简化如下，因为只有一个`<ul>`并且`<dd>`始终遵循`<dt>`：

```
$(".dropdown dt a").click(function() {
    $(this).parent().next().children().toggle();
}); 
```

# c++ - 获取主框架窗口

> ID：12768780
> 
> 赞同：-2
> 
> 时间：2012-10-07T12:23:06.587
> 
> 标签：c++, winapi, visual-c++, mdi, wtl

我想获得主框架窗口。如何在 WTL-MDI 中获取主框架窗口？

```
class CChildFrame : public CMDIChildWindowImpl<CChildFrame>
{
    ...
    LRESULT OnEdit(WORD /*wNotifyCode*/, WORD /*wID*/, HWND /*hWndCtl*/, BOOL& bHandled)
    {
        ...
        mainfrm->FlashWindow(TRUE);
        return 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:02:44.743

WTL 基类`CMDIChildWindowImpl`，`CFrameWindowImplBase`不持有指向主框架的指针。这并不意味着您不能自己做，您从这些类派生，因此您可以将指针作为初始化的一部分显式传递，并从那里使用它。毕竟`HWND`子窗口类中总是有父级，因此您可以发送应用程序定义的消息与父窗口交换某些信息。

# mysql - 创建一个处理具有多个事件的日历的 MySQL 查询

> ID：12768781
> 
> 赞同：4
> 
> 时间：2012-10-07T12:23:06.923
> 
> 标签：mysql, date

我正在尝试创建一个产生的查询：

```
VENUE | 2012-10-01 | 2012-10-02 | 2012-10-03
 01   |  OCCUPIED  |   EMPTY    |  OCCUPIED
 02   |   EMPTY    |   EMPTY    |  OCCUPIED
 03   |  OCCUPIED  |   EMPTY    |   EMPTY 
```

从这两个表中：

场地表：

```
venue_id | venue
   1     |   01
   2     |   02
   3     |   03 
```

事件表：

```
event_id |    start   |    end     | venue_id
   1     | 2012-10-01 | 2012-10-02 |    1
   2     | 2012-10-03 | 2012-10-04 |    1
   3     | 2012-10-03 | 2012-10-04 |    2
   4     | 2012-10-01 | 2012-10-02 |    3 
```

任何人都可以提出解决这个问题的最佳方法吗？

我目前的做法是：

```
SELECT 
   venue,
   IF(start <= '2012-10-01' AND '2012-10-01' < end, 'OCCUPIED','EMPTY') AS '2012-10-01',
   IF(start <= '2012-10-02' AND '2012-10-02' < end, 'OCCUPIED','EMPTY') AS '2012-10-02',
   IF(start <= '2012-10-03' AND '2012-10-03' < end, 'OCCUPIED','EMPTY') AS '2012-10-03'
FROM Venue as v, Event as e
WHERE e.venue_id = v.venue_id
GROUP BY v.venue 
```

但是，我没有得到想要的结果......我得到的是以下内容：

```
VENUE | 2012-10-01 | 2012-10-02 | 2012-10-03
 01   |  OCCUPIED  |   EMPTY    |   EMPTY
 02   |   EMPTY    |   EMPTY    |  OCCUPIED
 03   |  OCCUPIED  |   EMPTY    |   EMPTY 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:30:35.283

奇怪的是，您的 select 语句甚至不返回您发布的结果集中命名的列。另外，我注意到您在查询中重复了“2012-10-02”这一天。

```
SELECT 
   IF(start <= '2012-10-01' AND '2012-10-01' < end, 'OCCUPIED','EMPTY') AS '2012-10-01',
   IF(start <= '2012-10-02' AND '2012-10-02' < end, 'OCCUPIED','EMPTY') AS '2012-10-02',
   IF(start <= '2012-10-03' AND '2012-10-03' < end, 'OCCUPIED','EMPTY') AS '2012-10-03'
FROM Venue as v, Event as e
WHERE e.venue_id = v.venue_id
GROUP BY v.venue 
```

**编辑：**

下面的两个事件共享相同的场所 ID 和场所字段，并且您的查询按场所分组，这样它在“2012-10-03”天抑制了 OCCUPIED 结果。

```
event_id |    start   |    end     | venue_id
   1     | 2012-10-01 | 2012-10-02 |    1
   2     | 2012-10-03 | 2012-10-04 |    1 
```

SQL FIDDLE：[http ://sqlfiddle.com/#!2/dc33f/20](http://sqlfiddle.com/#!2/dc33f/20)

您可以尝试添加一个像 MAX 这样的聚合函数来获取记录子集中包含的任何 OCCUPIED 事件：

```
SELECT e.*, v.venue,
   max(IF(start <= '2012-10-01' AND '2012-10-01' < end, 'OCCUPIED','EMPTY')) AS '2012-10-01',
   max(IF(start <= '2012-10-02' AND '2012-10-02' < end, 'OCCUPIED','EMPTY')) AS '2012-10-02',
   max(IF(start <= '2012-10-03' AND '2012-10-03' < end, 'OCCUPIED','EMPTY')) AS '2012-10-03'
  from event e,
       venue v
where e.venue_id = v.venue_id
GROUP BY v.venue 
```

SQL FIDDLE：[http ://sqlfiddle.com/#!2/dc33f/22](http://sqlfiddle.com/#!2/dc33f/22)

# ios - iOS 上的 Node.JS 开发？

> ID：12768784
> 
> 赞同：7
> 
> 时间：2012-10-07T12:23:55.993
> 
> 标签：ios, ipad, node.js, terminal, jailbreak

我想知道是否有机会在 iOS 上运行 Node.JS 以在桌面上进行开发？我绝对意识到我必须有越狱的 iPad 才能安装 node 或 mongodb。我发现的唯一一个是支持 FTP/SSH 的优秀代码编辑器 Diet Coda，但仅此而已。如何在 iPad 上的“真实”终端中获取节点，在某些端口上启动我的 .js 文件等？

Ps 我不是 cloud9 的忠实粉丝，因为它需要 Internet 连接，目前仅支持节点 0.6

**找到了一个马马虎虎的解决方案：**通过 ssh 连接到我的服务器并在控制台中开发我的应用程序。但它需要互联网连接，这不好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T21:37:04.913

快速搜索会发现[iOS 上的 NodeJS](http://n8.io/nodejs-on-ios/)。

> 长话短说，我在越狱的 iPhone 4 上编译了 NodeJS！让它正常工作是一个漫长的追求，但我已经完成了艰苦的工作并编译了一个与 Cydia 兼容的 .deb 文件，让您享受安装乐趣......

已经有一年半的历史了，所以这篇文章可能有点过时了，但这绝对是一个很好的起点。如果您需要在 iOS 设备上设置 gcc，另请参阅[如何设置。](http://n8.io/how-to-set-up-gcc-on-ios-4/)

**旁白：如果您是一位根深蒂固的 Android 开发人员，您可能会对**[阳极](https://github.com/paddybyers/anode)感兴趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T05:09:10.827

我正在非越狱 iOS 设备上实现 Node.js。

[http://www.youtube.com/watch?v=xzFH80-HYTo](http://www.youtube.com/watch?v=xzFH80-HYTo)

它还没有准备好供公众使用，但我正在取得良好的进展，并计划尽快将其开源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-31T07:55:59.187

您可以在 iOS 上使用 node.js 而无需越狱，也不会违反任何 Apple 服务条款。 [`LiquidCore`](https://github.com/LiquidPlayer/LiquidCore)是一个开源项目，可以在 Android 和 iOS 上启用 node.js 来部署微应用程序。iOS 支持现在从 0.5.0 版开始提供。

# php - 如何在 PHP 中翻译特定的字符串集

> ID：12768785
> 
> 赞同：0
> 
> 时间：2012-10-07T12:24:02.677
> 
> 标签：php, arrays, string, compare, translate

> **可能重复：**
> [在 PHP 中给定一个月份字符串，例如“November”，我如何在不使用 12 部分 switch 语句的情况下返回 11？](https://stackoverflow.com/questions/2701695/in-php-given-a-month-string-such-as-november-how-can-i-return-11-without-using)

我有特定格式的工作日，我需要将其转换为另一种格式并最终翻译它们。我需要在运行时执行此操作，这意味着我无法更改存储日期的格式，但必须将它们转换为网站上的最终输出。

现在，我当然可以创建七个 if 语句来执行此操作，例如

```
if ($wkday == "Mon") { $wkday = "Monday"; }
if ($wkday == "Tue") { $wkday = "Tuesday"; } 
```

...

但我试图找到一种更简洁的方法来做到这一点，比如将输入和输出值都放在数组中并将它们相互比较，以减少丑陋的 if 语句的数量。在这种情况下并没有那么糟糕，因为只有七个可能的值，但我想把它做好并为未来学习。:-) 我试图搜索这个，但甚至不知道使用什么术语。我会很感激任何提示。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:29:31.800

数组在这里很有用，在这种情况下，它类似于 Java 中的 hashmap。

```
$wkday = "Thu";
$wkdayMapper = array(
  "Mon" => "Monday",
  "Tue" => "Tuesday",
  "Wed" => "Wednesday",
  "Thu" => "Thursday",
  "Fri" => "Friday",
  "Sat" => "Saturday",
  "Sun" => "Sunday"
);

echo $wkdayMapper[$wkday]; //Thursday 
```

[数组上的 PHP 手动链接](http://php.net/manual/en/language.types.array.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:33:06.497

[`date`](http://php.net/manual/en/function.date.php)与 一起使用[`strtotime`](http://php.net/manual/en/function.strtotime.php)：

```
$wkday = 'Thu';
echo date('l', strtotime($wkday)); // outputs 'Thursday' 
```

# javascript - 用一些文本替换html标签

> ID：12768786
> 
> 赞同：-4
> 
> 时间：2012-10-07T12:24:15.457
> 
> 标签：javascript

我想`<br>`用一些文本替换长序列的“”，以解决人们在我的论坛中发布长文本的问题。

我特别想用“”替换“ ” `<br>` `<br>` `<br>`（连续 3 个 br）`|`

我如何使用 Javascript 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:37:39.367

您可以使用正则表达式来实现该[jsfiddle](http://jsfiddle.net/FgNHb/1/)

```
 htmlContent.replace(/<br>\s<br>\s<br>/g, "|"); // will replace all 3 br in row (ignoring space) 
```

# windows-8 - 保存列表的最佳方法是什么 in Windows 8 app I have a List <class>of data. And I want to save it and retrieve it every time my app starts and exits respectively. What is the equivalent of IsolatedStorage (WP7) in 问问题 问问题 2012-10-07T12:25:46.937 4871 次 This question shows research effort; it is useful and clear 8 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a List <class>of data. And I want to save it and retrieve it every time my app starts and exits respectively. What is the equivalent of IsolatedStorage (WP7) in Windows 8\. How can I save these settings? In windows 8, you have to use the LocalFolder for your app, which you can access using: StorageFolder folder = ApplicationData.Current.LocalFolder; and then reference files saved there by using: var fileToGet = await folder.GetFileAsync("nameOfFile.fileType"); I am currently in a similar situation in a project I am working on, where I want to store a List of custom objects to my Apps LocalFolder and have it reloaded later. My solution was to serialize the list to an XML string, and store this in the App Folder. You should be able to adapt my methods: static public string SerializeListToXml(List <customobject>List) { try { XmlSerializer xmlIzer = new XmlSerializer(typeof(List<customobject>)); var writer = new StringWriter(); xmlIzer.Serialize(writer, List); System.Diagnostics.Debug.WriteLine(writer.ToString()); return writer.ToString(); } catch (Exception exc) { System.Diagnostics.Debug.WriteLine(exc); return String.Empty; } Now that you have the string you can save it a text file and put this in LocalStorage: //assuming you already have a list with data called myList await Windows.Storage.FileIO.WriteTextAsync("xmlFile.txt", SerializeListToXml(myList)); Now when you load your app again you can use the loading method mentioned above to get the xmlFile from LocalStorage, and then deserialize it to get your List back. string listAsXml = await Windows.Storage.FileIO.ReadTextAsync(xmlFile.txt); List <customobject>deserializedList = DeserializeXmlToList(listAsXml); Again, adapt this to your needs: public static List <customobject>DeserializeXmlToList(string listAsXml) { try { XmlSerializer xmlIzer = new XmlSerializer(typeof(List<customobject>)); XmlReader xmlRead = XmlReader.Create(listAsXml); List <customobject>myList = new List<customobject>(); myList = (xmlIzer.Deserialize(xmlRead)) as List<customobject>; return myList; } catch (Exception exc) { System.Diagnostics.Debug.WriteLine(exc); List <customobject>emptyList = new List<customobject>(); return emptyList; } } windows-8 4 2 回答 2 This answer is useful 8 在 Windows 8 中，您必须LocalFolder为您的应用程序使用 ，您可以使用以下方式访问： StorageFolder folder = ApplicationData.Current.LocalFolder; 然后使用以下方法引用保存在那里的文件： var fileToGet = await folder.GetFileAsync("nameOfFile.fileType"); 我目前在我正在处理的项目中处于类似情况，我想将自定义对象列表存储到我的 Apps LocalFolder 并稍后重新加载。 我的解决方案是将列表序列化为 XML 字符串，并将其存储在 App 文件夹中。你应该能够适应我的方法： static public string SerializeListToXml(List <customobject>List) { try { XmlSerializer xmlIzer = new XmlSerializer(typeof(List<customobject>)); var writer = new StringWriter(); xmlIzer.Serialize(writer, List); System.Diagnostics.Debug.WriteLine(writer.ToString()); return writer.ToString(); } catch (Exception exc) { System.Diagnostics.Debug.WriteLine(exc); return String.Empty; } 现在您有了字符串，您可以将其保存为文本文件并将其放入 LocalStorage： //assuming you already have a list with data called myList await Windows.Storage.FileIO.WriteTextAsync("xmlFile.txt", SerializeListToXml(myList)); 现在，当您再次加载您的应用程序时，您可以使用上面提到的加载方法从 LocalStorage 获取 xmlFile，然后对其进行反序列化以获取您的 List。 string listAsXml = await Windows.Storage.FileIO.ReadTextAsync(xmlFile.txt); List <customobject>deserializedList = DeserializeXmlToList(listAsXml); 同样，根据您的需要进行调整： public static List <customobject>DeserializeXmlToList(string listAsXml) { try { XmlSerializer xmlIzer = new XmlSerializer(typeof(List<customobject>)); XmlReader xmlRead = XmlReader.Create(listAsXml); List <customobject>myList = new List<customobject>(); myList = (xmlIzer.Deserialize(xmlRead)) as List<customobject>; return myList; } catch (Exception exc) { System.Diagnostics.Debug.WriteLine(exc); List <customobject>emptyList = new List<customobject>(); return emptyList; } } 于 2012-10-07T13:26:10.783 回答 This answer is useful 5 You can use this class to store and load settings: public static class ApplicationSettings { public static void SetSetting<t>(string key, T value, bool roaming = true) { var settings = roaming ? ApplicationData.Current.RoamingSettings : ApplicationData.Current.LocalSettings; settings.Values[key] = value; } public static T GetSetting<t>(string key, bool roaming = true) { return GetSetting(key, default(T), roaming); } public static T GetSetting<t>(string key, T defaultValue, bool roaming = true) { var settings = roaming ? ApplicationData.Current.RoamingSettings : ApplicationData.Current.LocalSettings; return settings.Values.ContainsKey(key) && settings.Values[key] is T ? (T)settings.Values[key] : defaultValue; } public static bool HasSetting<t>(string key, bool roaming = true) { var settings = roaming ? ApplicationData.Current.RoamingSettings : ApplicationData.Current.LocalSettings; return settings.Values.ContainsKey(key) && settings.Values[key] is T; } public static bool RemoveSetting(string key, bool roaming = true) { var settings = roaming ? ApplicationData.Current.RoamingSettings : ApplicationData.Current.LocalSettings; if (settings.Values.ContainsKey(key)) return settings.Values.Remove(key); return false; } } But you can only save and load primitive types (bool, int, string, etc.). This is why you have to serialize your list to XML or another format which can be stored in a string. To serialize and deserialize an object to and from XML you can use these methods: public static string Serialize(object obj) { using (var sw = new StringWriter()) { var serializer = new XmlSerializer(obj.GetType()); serializer.Serialize(sw, obj); return sw.ToString(); } } public static T Deserialize<t>(string xml) { using (var sw = new StringReader(xml)) { var serializer = new XmlSerializer(typeof(T)); return (T)serializer.Deserialize(sw); } } See also Is there a way to store instances of own classes in the ApplicationSettings of a Windows Store app? 于 2012-10-07T22:21:40.187 回答 Related 1 delphi - Delphi XE2中不满足的依赖异常 1 python - How can I programmatically find valid names for Mayavi colormaps? 2 ios - 仅在断点处于活动状态时执行的代码 2 redirect - 如果用户登录，JSF 2 导航规则重定向到主页 3 sql - T-SQL 查找联系人日期在 30 天内的帐户 1 ajax - 普通 JS Ajax 上传进度事件不起作用 1 r - R创建文件并管理权限 2 c++ - Eclipse 说我缺少包含指令，但代码仍然可以编译 c++ 1 python - 编码中的标志和深度（Pygame） 0 r - Rcpp内联在Mac上不起作用 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</t></t></t></t></t></customobject></customobject></customobject></customobject></customobject></customobject></customobject></customobject></customobject></customobject></customobject></customobject></customobject></customobject></customobject></customobject></customobject></customobject></customobject></customobject></class></class>

> ID：12768796
> 
> 赞同：8
> 
> 时间：
> 
> 标签：windows-8

I have a `List<class>` of data. And I want to save it and retrieve it every time my app starts and exits respectively. What is the equivalent of `IsolatedStorage` (WP7) in Windows 8\. How can I save these settings?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T13:26:10.783

在 Windows 8 中，您必须`LocalFolder`为您的应用程序使用 ，您可以使用以下方式访问：

```
StorageFolder folder = ApplicationData.Current.LocalFolder; 
```

然后使用以下方法引用保存在那里的文件：

```
var fileToGet = await folder.GetFileAsync("nameOfFile.fileType"); 
```

我目前在我正在处理的项目中处于类似情况，我想将自定义对象列表存储到我的 Apps LocalFolder 并稍后重新加载。

我的解决方案是将列表序列化为 XML 字符串，并将其存储在 App 文件夹中。你应该能够适应我的方法：

```
static public string SerializeListToXml(List<CustomObject> List)
    {
        try
        {
            XmlSerializer xmlIzer = new XmlSerializer(typeof(List<CustomObject>));
            var writer = new StringWriter();
            xmlIzer.Serialize(writer, List);
            System.Diagnostics.Debug.WriteLine(writer.ToString());
            return writer.ToString();
        }

        catch (Exception exc)
        {
            System.Diagnostics.Debug.WriteLine(exc);
            return String.Empty;
        } 
```

现在您有了字符串，您可以将其保存为文本文件并将其放入 LocalStorage：

```
//assuming you already have a list with data called myList
await Windows.Storage.FileIO.WriteTextAsync("xmlFile.txt", SerializeListToXml(myList)); 
```

现在，当您再次加载您的应用程序时，您可以使用上面提到的加载方法从 LocalStorage 获取 xmlFile，然后对其进行反序列化以获取您的 List。

```
string listAsXml = await Windows.Storage.FileIO.ReadTextAsync(xmlFile.txt);
List<CustomObject> deserializedList = DeserializeXmlToList(listAsXml); 
```

同样，根据您的需要进行调整：

```
public static List<CustomObject> DeserializeXmlToList(string listAsXml)
    {
        try
        {
            XmlSerializer xmlIzer = new XmlSerializer(typeof(List<CustomObject>));
            XmlReader xmlRead = XmlReader.Create(listAsXml);
            List<CustomObject> myList = new List<CustomObject>();
            myList = (xmlIzer.Deserialize(xmlRead)) as List<CustomObject>;
            return myList;
        }

        catch (Exception exc)
        {
            System.Diagnostics.Debug.WriteLine(exc);
            List<CustomObject> emptyList = new List<CustomObject>();
            return emptyList;
        }
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T22:21:40.187

You can use this class to store and load settings:

```
public static class ApplicationSettings
{
    public static void SetSetting<T>(string key, T value, bool roaming = true)
    {
        var settings = roaming ? ApplicationData.Current.RoamingSettings : ApplicationData.Current.LocalSettings;
        settings.Values[key] = value;
    }

    public static T GetSetting<T>(string key, bool roaming = true)
    {
        return GetSetting(key, default(T), roaming);
    }

    public static T GetSetting<T>(string key, T defaultValue, bool roaming = true)
    {
        var settings = roaming ? ApplicationData.Current.RoamingSettings : ApplicationData.Current.LocalSettings;
        return settings.Values.ContainsKey(key) &&
               settings.Values[key] is T ?
               (T)settings.Values[key] : defaultValue;
    }

    public static bool HasSetting<T>(string key, bool roaming = true)
    {
        var settings = roaming ? ApplicationData.Current.RoamingSettings : ApplicationData.Current.LocalSettings;
        return settings.Values.ContainsKey(key) && settings.Values[key] is T;
    }

    public static bool RemoveSetting(string key, bool roaming = true)
    {
        var settings = roaming ? ApplicationData.Current.RoamingSettings : ApplicationData.Current.LocalSettings;
        if (settings.Values.ContainsKey(key))
            return settings.Values.Remove(key);
        return false;
    }
} 
```

But you can only save and load primitive types (bool, int, string, etc.). This is why you have to serialize your list to XML or another format which can be stored in a string. To serialize and deserialize an object to and from XML you can use these methods:

```
public static string Serialize(object obj)
{
    using (var sw = new StringWriter()) 
    {
        var serializer = new XmlSerializer(obj.GetType());
        serializer.Serialize(sw, obj);
        return sw.ToString();
    }
}

public static T Deserialize<T>(string xml)
{
    using (var sw = new StringReader(xml))
    {
        var serializer = new XmlSerializer(typeof(T));
        return (T)serializer.Deserialize(sw);
    }
} 
```

See also [Is there a way to store instances of own classes in the ApplicationSettings of a Windows Store app?](https://stackoverflow.com/questions/12553485/is-there-a-way-to-store-instances-of-own-classes-in-the-applicationsettings-of-a)

# perl - 如何删除 Perl::Tidy 中的前导注释空格？

> ID：12768797
> 
> 赞同：2
> 
> 时间：2012-10-07T12:25:56.237
> 
> 标签：perl, perl-tidy

我只是在配置 Perl::Tidy 以匹配我的偏好。我只剩下一个问题，我找不到解决办法。

示例脚本：

```
#!/usr/bin/perl
#   |   |   |   |   |   < "|" indicates first five "tabs" (1 tab 4 spaces).
use strict;     # Enable strict programming mode.
use warnings;   # Enable Perl warnings.
use utf8;       # This is an UTF-8 encoded script.
1; 
```

perltidyrc：

```
# Perl Best Practices (plus errata) .perltidyrc file

-l=76   # Max line width is 76 cols
-i=4    # Indent level is 4 cols
-ci=4   # Continuation indent is 4 cols
-et=4   # 1 tab represent 4 cols
-st     # Output to STDOUT
-se     # Errors to STDERR
-vt=2   # Maximal vertical tightness
-cti=0  # No extra indentation for closing brackets
-pt=0   # Medium parenthesis tightness
-bt=1   # Medium brace tightness
-sbt=1  # Medium square bracket tightness
-bbt=1  # Medium block brace tightness
-nsfs   # No space before semicolons
-nolq   # Don't outdent long quoted strings
-wbb="% + - * / x != == >= <= =~ < > | & **= += *= &= <<= &&= -= /= |= >>= ||= .= %= ^= x="
        # Break before all operators

# extras/overrides/deviations from PBP

#--maximum-line-length=100               # be slightly more generous
--warning-output                        # Show warnings
--maximum-consecutive-blank-lines=2     # default is 1
--nohanging-side-comments               # troublesome for commented out code

-isbc   # block comments may only be indented if they have some space characters before the #

# for the up-tight folk :)
-pt=2   # High parenthesis tightness
-bt=2   # High brace tightness
-sbt=2  # High square bracket tightness 
```

结果：

```
#!/usr/bin/perl
#   |   |   |   |   |   < "|" indicates first five "tabs" (1 tab 4 spaces).
use strict;      # Enable strict programming mode.
use warnings;    # Enable Perl warnings.
use utf8;        # This is an UTF-8 encoded script.
1; 
```

如您所见，有一个前导空格导致“#”与第四个选项卡不匹配。

如何删除这个领先的空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T13:20:02.363

Perltidy 只能更改 perl 代码，因为它知道 perl 代码的含义。评论可以包含完全任意的数据，因此 perltidy 无法触及它。所以，这种事情你要自己解决。

# bash - Bash 脚本 - 使用长文件名

> ID：12768799
> 
> 赞同：1
> 
> 时间：2012-10-07T12:26:15.037
> 
> 标签：bash

将我所有的 CD 转换为 flac（用于存储），但错误地使用了长文件名（艺术家姓名 - 专辑名称 - 歌曲名称）。

示例文件名： **Jennifer Warnes - Famous Blue Raincoat - Ain't No Cure For Love.flac**

想要使用以下 bash 脚本将所有 flac 转换为 mp3（用于 mp3 播放器）。但首先必须将它们转换为 wav（在转换为 mp3 之前）

在 bash 中运行：

```
for i in *.flac; do
  flac -d $i;
done 
```

这个简单的脚本适用于诸如着名**_blue_raincoat.flac 之类的文件名**

但是，由于字母之间的空格（可能还有 '），脚本无法处理以下文件名： **Jennifer Warnes - Famous Blue Raincoat - Ain't No Cure For Love.flac**

欢迎任何建议和建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T12:28:48.413

你需要报价：

```
 for i in *.flac; do flac -d "$i"; done 
```

这种行为称为[分词](http://mywiki.wooledge.org/WordSplitting)

# android - Joda time forPattern 在 4 位数年份中无法正常工作

> ID：12768800
> 
> 赞同：1
> 
> 时间：2012-10-07T12:26:19.060
> 
> 标签：android, jodatime

假设我有以下解析器和 joda-time lib for android

```
DateTimeFormat.forPattern("dd.MM.yyyy").parseDateTime(maybeDate); 
```

我的目标是使用 TextWatcher 过滤某些 editText 中的输入，并尝试解析输入并检查它是否是日期。

尽管有 4 个“y”字母，但接下来的时间会通过这种模式！

**06.12.1**（而我试图把 06.12.1988）

格式化程序的 PS appendYear(4,4) 也失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T12:32:24.940

这遵循与 Java 相同的规则[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

> 对于解析，如果模式字母的数量超过 2 个，则按字面解释年份，而不考虑位数。所以使用模式 "MM/dd/yyyy", "01/11/12" 解析到公元 12 年 1 月 11 日

您可能要考虑的一种选择是在解析后格式化值 - 如果它不是往返（即，如果格式化的值与原始文本不同），则将其视为无效而拒绝。

# django - 在 Django 中为单选按钮设置 ID

> ID：12768801
> 
> 赞同：3
> 
> 时间：2012-10-07T12:26:29.640
> 
> 标签：django

[Django 1.4 允许对无线电选择](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#radioselect)进行细粒度处理真是太好了

```
{% for radio in form.important_client reversed%}
      {{radio.tag}}<label for="????">{{radio.choice_label}}</label>
{% endfor %} 
```

但是由于某些奇怪的原因，在使用这种方法时，`<input>`它们没有 ID。因此我无法`<label for='ID' />`相应地设置。这会导致我的 CSS 出现大问题。

无论如何要设置ID吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T20:31:53.763

在调试 RadioSelect 渲染时，我不知道如何优雅地使用无线电标签和标签。所以这是我尝试解决您的问题：

```
{% for radio in form.important_client reversed %}
    <input name="{{ radio.name }}" type="radio" id="radio_{{ radio.index }}" value={{ radio.choice_value }}>
    <label for="radio_{{ radio.index }}">{{ radio.choice_label }}</label>
{% endfor %} 
```

除了`radio.index`没有记录的属性，您可以使用`forloop.counter`.

以防我附上调试窗口的屏幕截图，其中显示了`radio`上下文示例（`form_of_field`图中的变量）： ![无线电选择调试](../Images/f917c1c5d896e2d904fc5fc04e7078d3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T16:16:26.897

这是一种方法，它可能不是最好的，但它有效。在您的表单中，您可以为每个选项设置 id，如下所示：

```
from django import forms
class MyForm(forms.Form):
    CHOICES = (('1','Available'),('2','Not Available'))
    input   = forms.ChoiceField(widget=RadioSelect(attrs={'id' : 'myId'},choices=CHOICES) 
```

然后在您的模板上：

```
{% for radio in form.input %}
    {{ radio }}
{% endfor %} 
```

您的 HTML 将如下所示：

```
<label for="myId_0"><input id="myId_0" name="input" type="radio" value="1"></label> Available
<label for="myId_0"><input id="myId_0" name="input" type="radio" value="2"></label> Not Available 
```

我希望这行得通！

# mongodb - 副本集心跳频率或超时时间是否可配置？

> ID：12768807
> 
> 赞同：1
> 
> 时间：2012-10-07T12:27:09.200
> 
> 标签：mongodb

所有副本集成员通过每 2 秒发送一次心跳来监视所有其他成员。这些请求将在 10 秒后超时。

这两个值是可配置的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-30T17:00:00.467

目前可以`rs.reconfig()` 在 3.0 版本之后使用该功能。或命令 replSetGetConfig.settings.heartbeatTimeoutSecs。

[https://docs.mongodb.org/v3.0/reference/method/rs.reconfig/#rs.reconfig](https://docs.mongodb.org/v3.0/reference/method/rs.reconfig/#rs.reconfig)

[https://docs.mongodb.org/v3.0/reference/command/replSetGetConfig/#dbcmd.replSetGetConfig](https://docs.mongodb.org/v3.0/reference/command/replSetGetConfig/#dbcmd.replSetGetConfig)

在http界面可以看到：

mongohost:mongoport/replSetGetConfig?text=1

在设置下心跳超时多少秒

```
"settings" : { "chainingAllowed" : true,
      "heartbeatTimeoutSecs" : 10,
      "getLastErrorModes" : {},
      "getLastErrorDefaults" : { "w" : 1,
        "wtimeout" : 0 } } } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T20:29:53.777

与 MongoDB 2.2.0 一样，目前的答案是“这些值在运行时不可配置”。[您可以从github.com/mongodb/mongo](https://github.com/mongodb/mongo)查看代码并自己修改值，但这可能会产生意想不到的副作用。

幸运的是，正在为 MongoDB 的下一次迭代添加可配置的超时/心跳设置（2.3.x dev/unstable，最终将在 2.4 生产/稳定版本中达到高潮）。

有关更多信息，请参阅MongoDB 问题跟踪器中的[SERVER-1929](https://jira.mongodb.org/browse/SERVER-1929)。

# javascript - 在 node.js 应用程序中模拟 mongoskin

> ID：12768808
> 
> 赞同：0
> 
> 时间：2012-10-07T12:27:09.187
> 
> 标签：javascript, node.js, mocking, tdd, mongoskin

当我尝试遵循 TDD 开发方式时，我仍然很难找出如何在 JavaScript 中模拟某些东西。我习惯于在 Java 中使用 Mockito 和 Spring 进行模拟（例如，注入一个 mongo 模拟而不是真正的 mongo 实例），但是如何在 JavaScript 中处理这个？

让我用 node-restify 做一个简单的 node.js 示例：

```
var mongoskin = require('mongoskin');
var restify = require('restify');

// ###############################
// ## Global Configuration
// ###############################

var mongoURL = process.env.MONGOHQ_URL || "mongodb://localhost/test";
var serverPort = process.env.PORT || 5000;

// ###############################
// ## Basic Setup
// ###############################
var server = restify.createServer({
    name: 'test'
});

server.use(connect.logger());
server.use(restify.acceptParser(server.acceptable));
server.use(restify.bodyParser());

var db = mongoskin.db(mongoURL);

// ###############################
// ## API
// ###############################

server.get('/api/v1/projects', function (req, res, next) {
    db.collection('projects').find().toArray(function (error, projects) {
        if (error) {
            return next(new restify.InternalError());
        }

        res.json(200, projects);

        return next();
    });
});

server.get('/api/v1/projects/:projectId', function (req, res, next) {
    if (req.params.projectId === null) {
        return next(new restify.InvalidArgumentError('ProjectId must not be null or empty.'))
    }

    db.collection('projects').findById(req.params.projectId, function (error, project) {
        if (error) {
            return next(new restify.InternalError());
        }

        res.json(200, project);

        return next();
    });
});

// ###############################
// ## Main Server Initialization
// ###############################

server.listen(serverPort, function () {
    console.log('%s listening at %s', server.name, server.url);
}); 
```

我现在想要一个测试 javascript 文件，我可以在其中测试这两个“get”方法。此外，我想模拟 mongoskin 实例（'db'），以便我可以使用例如 JSMockito 来监视和假装某些行为。

现在最好的方法是什么？有人可以发布一个小示例文件吗？我如何设法注入模拟的数据库实例？

谢谢你的帮助！

蒂埃里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:26:44.057

一般来说，有很多优先级可以轻松模拟休息 api： [https ://github.com/flatiron/nock](https://github.com/flatiron/nock)

模拟数据库的问题在于它通常有一个非常复杂和毛茸茸的 api。有两种简单的（因此在严格的单元测试意义上不太正确）方法可以做到这一点。

一种是拥有“模型”来包装您的实体访问，而不是直接访问数据库驱动程序。然后您可以轻松地模拟您的模型 api。这很好，但是如果你只是做一些基本的数据库操作并且你不需要一个大的模型抽象，那就有点烦人了。

第二个是用一些测试数据启动一个数据库，并在测试期间连接到它。这有点像“功能测试”，但根据我的经验，它更实用。

# regex - Javascript - 验证 tridion tcm id 的正则表达式

> ID：12768811
> 
> 赞同：5
> 
> 时间：2012-10-07T12:27:12.947
> 
> 标签：regex, tridion

在 javascript 上使用 Regex 验证 tridion TCM ID 看起来很简单，但不幸的是我没有做到这一点。

我尝试了所有可能的方法来验证 tcm id。

以下是最后一次尝试的正则表达式：-

```
(tcm:(\d)+-(\d)+(-16|-4|-64))\W 
```

在这里，`TCM ID`可以是`component`or`SG`或`Page`。

有效的 tcm id 是

1.  中医：123-5678-4
2.  中医：123-5678-64
3.  中医：123-5678-16
4.  中医：123-5678

请建议最好的正则表达式来验证 tcm id。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T22:40:40.167

提供的正则表达式 xdazz 非常适合匹配您提供的示例。但对于更通用的处理，您可能想要：

1.  删除确切的基数，因为每个数字中可能有更多或更少的数字。所以`/^tcm:\d+-\d+(?:-16|-4|-64)?$/`
2.  考虑是否要匹配每个项目类型，如果是，请相应地更新最后一个匹配组。在最一般的情况下，它可能只是`/^tcm:\d+-\d+(?:-\d+)?$/`
3.  请记住，TCM URI 也可以引用特定版本，因此以 -v123 结尾。所以这会导致`/^tcm:\d+-\d+(?:-\d+)?(?:-v\d+)?$/`

当然，这使您非常接近 Nuno 的答案，它具有匹配组具有可读名称的额外优势。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-07T12:41:51.303

尝试：

```
/^tcm:\d{3}-\d{4}(?:-16|-4|-64)?$/ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-07T22:06:05.100

我在 c# 中使用它来验证 Tcm Uri（我相信这也是`TcmUri.IsValid()`这样做的）

```
"^tcm:(?<pubId>[0-9]+)-(?<itemId>[0-9]+)(-(?<itemType>[0-9]+))?(-v(?<version>[0-9]+))?$" 
```

如果要验证它是页面还是组件，那么 itemType 应该为空，16 或 64。

# ipad - 视频流到 ipad 不适用于 Tapestry5

> ID：12768812
> 
> 赞同：7
> 
> 时间：2012-10-07T12:27:23.597
> 
> 标签：ipad, servlets, html5-video, tapestry

我想通过 HTML5 视频标签在后端使用 Tapestry5 (5.3.5) 将视频流式传输到我的 iPad。通常，服务器端框架甚至不应该在其中发挥作用，但它确实发挥了作用。

无论如何，希望这里有人可以帮助我。请记住，我的项目在很大程度上是一个原型，我所描述的内容已简化/简化为相关部分。如果人们没有回应强制性的“你想做错事”或与问题无关的安全/性能挑剔，我将非常感激。

所以这里是：

# 设置

我有一段取自 Apple HTML5 展示的视频，所以我知道格式不是问题。我有一个简单的 tml 页面“播放”，它只包含一个“视频”标签。

# 问题

我首先实现了一个 RequestFilter，它通过打开引用的视频文件并将其流式传输到客户端来处理来自视频控件的请求。这是基本的“如果路径以'文件'开头，则将文件输入流复制到响应输出流”。这适用于 Chrome，但不适用于 Ipad。好吧，不过，我一定是缺少一些标题，所以我再次查看了 Apple Showcase 并包含了相同的标题和内容类型，但没有任何乐趣。

接下来，好吧，让我们看看如果让 t5 提供文件会发生什么。我将视频复制到 webapp 上下文，禁用我的请求过滤器并将简单文件名放在视频的 src 属性中。这适用于 Chrome 和 iPad。这让我感到惊讶，并促使我研究 T5 如何处理静态文件/上下文请求。到目前为止，我只觉得有两种不同的路径，我通过将硬连线的“video src”切换到带有@Path（“context：”）的资产来确认它们。这同样适用于 Chrome，但不适用于 iPad。

所以我真的迷路了。在允许它在 iPad 上工作的“简单上下文”请求中，这个秘密汁液是什么？没有什么特别的事情发生，但这是唯一可行的方法。问题是，我真的不能从我的 webapp 上下文中提供这些视频......

# 解决方案

因此，事实证明，有一个名为“Range”的 http 标头，并且 iPad 与 Chrome 不同，将它用于视频。然后，“秘密武器”是静态资源请求的 servlet 处理程序知道如何处理范围请求，而 T5 不知道。这是我的自定义实现：

```
 OutputStream os = response.getOutputStream("video/mp4");
        InputStream is = new BufferedInputStream( new FileInputStream(f));
        try {
            String range = request.getHeader("Range");
            if( range != null && !range.equals("bytes=0-")) {
                logger.info("Range response _______________________");
                String[] ranges = range.split("=")[1].split("-");
                int from = Integer.parseInt(ranges[0]);
                int to = Integer.parseInt(ranges[1]);
                int len = to - from + 1 ;

                response.setStatus(206);
                response.setHeader("Accept-Ranges", "bytes");
                String responseRange = String.format("bytes %d-%d/%d", from, to, f.length());
                logger.info("Content-Range:" + responseRange);
                response.setHeader("Connection", "close");
                response.setHeader("Content-Range", responseRange);
                response.setDateHeader("Last-Modified", new Date().getTime());
                response.setContentLength(len);
                logger.info("length:" + len);

                byte[] buf = new byte[4096];
                is.skip(from);
                while( len != 0) {

                    int read = is.read(buf, 0, len >= buf.length ? buf.length : len);
                    if( read != -1) {
                        os.write(buf, 0, read);
                        len -= read;
                    }
                }

            } else {
                    response.setStatus(200);
                    IOUtils.copy(is, os);
            }

        } finally {
            os.close();
            is.close();
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T22:40:11.480

我想从上面发布我的改进解决方案。希望这对某人有用。

所以基本上问题似乎是我忽略了iPad不喜欢的“范围”http请求标头。简而言之，此标头意味着客户端只需要响应的某个部分（在本例中为字节范围）。

这是 iPad html 视频请求的样子：

```
[INFO] RequestLogger Accept:*/*
[INFO] RequestLogger Accept-Encoding:identity
[INFO] RequestLogger Connection:keep-alive
[INFO] RequestLogger Host:mars:8080
[INFO] RequestLogger If-Modified-Since:Wed, 10 Oct 2012 22:27:38 GMT
[INFO] RequestLogger Range:bytes=0-1
[INFO] RequestLogger User-Agent:AppleCoreMedia/1.0.0.9B176 (iPad; U; CPU OS 5_1 like Mac OS X; en_us)
[INFO] RequestLogger X-Playback-Session-Id:BC3B397D-D57D-411F-B596-931F5AD9879F 
```

这意味着 iPad 只想要第一个字节。如果您忽略此标头并仅发送带有完整正文的 200 响应，则视频将无法播放。因此，您需要发送 206 响应（部分响应）并设置以下响应标头：

```
[INFO] RequestLogger Content-Range:bytes 0-1/357772702
[INFO] RequestLogger Content-Length:2 
```

这意味着“我正在向您发送 357772702 个可用字节中的字节 0 到 1”。

当您真正开始播放视频时，下一个请求将如下所示（除了 range 标头之外的所有内容）：

```
[INFO] RequestLogger Range:bytes=0-357772701 
```

所以我的改进解决方案如下所示：

```
OutputStream os = response.getOutputStream("video/mp4");

        try {
                String range = request.getHeader("Range");
                /** if there is no range requested we will just send everything **/
                if( range == null) {
                    InputStream is = new BufferedInputStream( new FileInputStream(f));
                    try {
                        IOUtils.copy(is, os);
                        response.setStatus(200);
                    } finally {
                        is.close();
                    }
                    return true; 
                }
                requestLogger.info("Range response _______________________");

                String[] ranges = range.split("=")[1].split("-");
                int from = Integer.parseInt(ranges[0]);
                /**  
                 * some clients, like chrome will send a range header but won't actually specify the upper bound.
                 * For them we want to send out our large video in chunks.
                 */
                int to = HTTP_DEFAULT_CHUNK_SIZE + from;
                if( to >= f.length()) {
                    to = (int) (f.length() - 1);
                }
                if( ranges.length == 2) {
                    to = Integer.parseInt(ranges[1]);
                }
                int len = to - from + 1 ;

                response.setStatus(206);
                response.setHeader("Accept-Ranges", "bytes");
                String responseRange = String.format("bytes %d-%d/%d", from, to, f.length());

                response.setHeader("Content-Range", responseRange);
                response.setDateHeader("Last-Modified", new Date().getTime());
                response.setContentLength(len);

                requestLogger.info("Content-Range:" + responseRange);
                requestLogger.info("length:" + len);
                long start = System.currentTimeMillis();
                RandomAccessFile raf = new RandomAccessFile(f, "r");
                raf.seek(from);
                byte[] buf = new byte[IO_BUFFER_SIZE];
                try {
                    while( len != 0) {
                        int read = raf.read(buf, 0, buf.length > len ? len : buf.length);
                        os.write(buf, 0, read);
                        len -= read;
                    }
                } finally {
                    raf.close();
                }
                logger.info("r/w took:" + (System.currentTimeMillis() - start));

        } finally {
            os.close();

        } 
```

这个解决方案比我的第一个解决方案更好，因为它处理“范围”请求的所有情况，这似乎是 Chrome 等客户端能够支持在视频中跳过的先决条件（此时他们将为此发出范围请求视频中的点）。

虽然它仍然不完美。进一步的改进将是正确设置“Last-Modified”标头并正确处理客户端请求的无效范围或字节范围以外的其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:54:49.163

我怀疑这更多是关于 iPad 而不是 Tapestry。

在将流写入响应之前，我可能会调用 Response.disableCompression()；Tapestry 可能正在尝试对您的流进行 GZIP，而 iPad 可能没有为此做好准备，因为视频和图像格式通常已经被压缩。

另外，我没有看到设置内容类型标头；再一次，iPad 可能比 Chrome 更敏感。

# javascript - 在 mongodb 游标中遍历子文档

> ID：12768815
> 
> 赞同：0
> 
> 时间：2012-10-07T12:27:44.473
> 
> 标签：javascript, node.js, mongodb, mongoose

首先，这是结构。

```
{ "isActive" : true,
  "playerLimit" : 2,
  "mode" : "Maul",
  "map" : "Dark woods",
  "name" : "Come and play with me",
  "_id" : ObjectId( "506fde5d7066645b8c000001" ),
  "players" : [ 
    { "hero" : "Brock, the summoner",
      "state" : "in lobby",
      "name" : "Elvar" }, 
    { "hero" : "Neal, the demon",
      "state" : "in lobby",
      "name" : "Test Spiller" } ],
  "__v" : 0 
} 
```

我已经选择了，

```
var game = db.model('Game');
game.find({_id : new ObjectID(data.game)}, function(err, res) { 
```

效果很好。在函数内部但是我想遍历玩家数组，我试过这个

```
 res.players.forEach(function(player) {
    console.log(player.name +' | '+ data.name);
    if(player.name == data.name) permitted = true;
  }); 
```

这似乎不起作用，我猜是因为 ia mongoCursor 对象，某种。

由于我使用的是mongoose，所以我不能使用toArray()，我感觉有点迷茫，我怎样才能轻松地遍历我的Players数组？

整个代码

```
var game = db.model('Game');
game.find({_id : new ObjectID(data.game)}, function(err, res) {

  if(err) {
    // game not found, close connection.
    socket.emit('disconnected', 'Error: game was not found.')
    socket.disconnect();
  }

  var permitted = false;
  res.players.forEach(function(player) {
    if(player.name == data.name) permitted = true;
  });

  if(!permitted) {
    // game not found, close connection.
    socket.emit('disconnected', 'Error: you are not permitted, to enter this game.');
    socket.disconnect();
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:05:57.570

`find`Mongoose回调的第二个参数（`res`在您的示例中）是找到的文档数组。当您只期待一个匹配项时使用`findOne`or （如本例中）。`findById`所以试着把你的代码改成这样：

```
var game = db.model('Game');
game.findById(data.game, function(err, game) {

  if(err || !game) {
    // game not found, close connection.
    socket.emit('disconnected', 'Error: game was not found.')
    socket.disconnect();
    return;
  }

  var permitted = false;
  game.players.forEach(function(player) {
    if(player.name == data.name) permitted = true;
  });

  if(!permitted) {
    // game not found, close connection.
    socket.emit('disconnected', 'Error: you are not permitted, to enter this game.');
    socket.disconnect();
  }
}); 
```

# java - 循环返回值

> ID：12768818
> 
> 赞同：1
> 
> 时间：2012-10-07T12:28:18.760
> 
> 标签：java

如何在 for 循环中返回值？例如，如果我有一个循环给我 3 个数字：1,2,3... 我怎样才能返回最后一个数字的值（这里是 3）？

```
public class Cod { 
  public static void main(String[] args) { 
    exp(); 
  }
  public static int exp() { 
    int x=10; 
    for (int i=1; i<=3;i++) { 
      x=x*10; 
      int y=x/10; 
      System.out.println(y); 
      return y; 
    } 
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T12:31:04.857

最简单的方法是等待循环完成，然后返回它产生的最后一个值。

您需要等待循环计算所有三个结果的唯一有效原因是计算取决于循环的先前迭代计算的值。在这种情况下，您可以这样做：

```
int res = 0;
for (int i = 0 ; i != 3 ; i++) {
    res = calculateResult(i, res);
}
return res; 
```

如果您可以直接计算最后一次迭代的值而无需运行先前的迭代，则根本没有理由运行循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:36:56.080

我不确定您是否要在循环中的某个条件后循环或中断

[打破](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)你可以做

```
 public static int exp() { 
   int x=10;  
   int y = 0;
   for (int i=1; i<=3;i++) { 
     x=x*10; 
     y=x/10; 
     System.out.println(y); 
     break;
   } 
 } 
```

这将立即中断，因此它只会循环一次。此时可以访问 y 的值。

如果你想要计数器变量的值，那么在循环外声明它

```
 int i = 1;
  for (i = 1; i<=3;i++) { 
    x=x*10; 
    y=x/10; 
    ...
  } 

  System.out.println(i + ""); 
```

然后 i 的值可以在循环外访问。

编辑：评论后

得到 y do 的值

```
public static int exp() { 
   int x=10;  
   int y = 0;
   for (int i=1; i<=3;i++) { 
     x *= 10; 
     y = y + (x/10); 
   } 
   System.out.println("y value after loop is "+ y);
 } 
```

或者如果不添加 y

```
public static int exp() { 
   int x=10;  

   for (int i=1; i<=3;i++) { 
     x *= 10; 
   } 
   int y = x/10; 
   System.out.println("y value after loop is "+ y);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T12:37:06.530

如果我理解你想要做什么，这里是你的例子修改：

```
public class Cod { 
  public static void main(String[] args) { 
    System.out.println(exp()); 
  }
  public static int exp() { 
    int x=10; 
    for (int i=1; i<=3;i++) { 
      x=x*10; 
    } 
    int y=x/10; 
    return y; 
  }
} 
```

我不明白你为什么这样做`x/10`- 相反，你可以少循环一圈。

# raphael - RaphaelJs 拖动约束

> ID：12768823
> 
> 赞同：0
> 
> 时间：2012-10-07T12:29:02.690
> 
> 标签：raphael, drag

我有一个滑块，我希望能够仅在 x 坐标中拖动，并设置不能拖动形状的约束（形状不应在两个方向上超出线）。如何实现？

JS小提琴[链接](http://jsfiddle.net/4hASC/)

```
window.onload = function(){    

    var paper = Raphael(0,0,700,150);  

    var sliderline = paper.rect(68,100,606,1).attr({fill:'red',stroke:'none'});
    var slider = paper.rect(100,98,18,7,4).attr({fill:'#7cc576','stroke-width':'2','stroke':'white'}).glow({width:1,opacity:10,color:'green'});
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:13:57.800

首先将处理程序分配给拖动事件。在处理程序内部，您可以随意移动滑块。

# http-status-code-404 - 烧瓶：蓝图的error_handler

> ID：12768825
> 
> 赞同：36
> 
> 时间：2012-10-07T12:29:07.623
> 
> 标签：http-status-code-404, blueprint, flask

可以为蓝图设置 error_handler 吗？

```
@blueprint.errorhandler(404)
def page_not_found(error):
    return 'This page does not exist', 404 
```

编辑：

[https://github.com/mitsuhiko/flask/blob/18413ed1bf08261acf6d40f8ba65a98ae586bb29/flask/blueprints.py](https://github.com/mitsuhiko/flask/blob/18413ed1bf08261acf6d40f8ba65a98ae586bb29/flask/blueprints.py)

您可以指定应用范围和蓝图本地 error_handler

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-11-13T10:17:56.637

你可以使用`Blueprint.app_errorhandler`这样的方法：

```
bp = Blueprint('errors', __name__)

@bp.app_errorhandler(404)
def handle_404(err):
    return render_template('404.html'), 404

@bp.app_errorhandler(500)
def handle_500(err):
    return render_template('500.html'), 500 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-09-22T20:12:23.553

`errorhandler`是继承自 Flask 的方法，而不是 Blueprint。如果您使用的是蓝图，则等效为`app_errorhandler`.

该文档建议采用以下方法：

```
def app_errorhandler(self, code):
        """Like :meth:`Flask.errorhandler` but for a blueprint.  This
        handler is used for all requests, even if outside of the blueprint.
        """ 
```

因此，这应该有效：

```
from flask import Blueprint, render_template

USER = Blueprint('user', __name__)

@USER.app_errorhandler(404)
def page_not_found(e):
    """ Return error 404 """
    return render_template('404.html'), 404 
```

另一方面，虽然下面的方法对我没有任何错误，但它不起作用：

```
from flask import Blueprint, render_template

USER = Blueprint('user', __name__)

@USER.errorhandler(404)
def page_not_found(e):
    """ Return error 404 """
    return render_template('404.html'), 404 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-13T16:32:35.133

使用请求代理对象在应用程序级别添加错误处理：

```
from flask import request,jsonify

@app.errorhandler(404)
@app.errorhandler(405)
def _handle_api_error(ex):
if request.path.startswith('/api/'):
    return jsonify(ex)
else:
    return ex 
```

[烧瓶文档](http://flask.pocoo.org/docs/1.0/blueprints/#error-handlers)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-29T12:39:54.230

我也无法获得最高评价的答案，但这里有一个解决方法。

您可以在蓝图的**末尾**使用包罗万象，不确定它有多强大/推荐，但它确实有效。您也可以为不同的方法添加不同的错误消息。

```
@blueprint.route('/<path:path>')
def page_not_found(path):
    return "Custom failure message" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-15T10:30:24.027

为了提供更通用的方法，我将以前的[优秀](https://stackoverflow.com/a/19951085/1037567) [答案](https://stackoverflow.com/a/58053040/1037567)与 Flask 的官方文档中的“[以 JSON 形式返回 API 错误”部分结合起来。](https://flask.palletsprojects.com/en/2.0.x/errorhandling/#returning-api-errors-as-json)

这是一个有效的 PoC，您可以将其复制并粘贴到您注册的蓝图 API 路由处理程序（例如`app/api/routes.py`）：

```
@blueprint.app_errorhandler(HTTPException)
def handle_exception(e):
"""Return JSON instead of HTML for HTTP errors."""
# start with the correct headers and status code from the error
response = e.get_response()
# replace the body with JSON
response.data = json.dumps({
    "code": e.code,
    "name": e.name,
    "description": e.description,
})
response.content_type = "application/json"
return response 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-17T21:23:01.520

惊讶的其他人没有提到 miguelgrinberg 的优秀教程。

[https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-error-handling](https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-error-handling)

我找到了用于错误处理的哨兵框架（下面的链接）。似乎过于复杂。不确定它变得有用的阈值。

[https://flask.palletsprojects.com/en/1.1.x/errorhandling/](https://flask.palletsprojects.com/en/1.1.x/errorhandling/)

[https://docs.sentry.io/platforms/python/guides/flask/](https://docs.sentry.io/platforms/python/guides/flask/)

* * *

## 回答 #7

> 赞同：-8
> 
> 时间：2016-02-10T14:55:49.163

Flask[不支持 404 和 500 错误的蓝图级错误处理程序](https://flask.palletsprojects.com/en/1.1.x/api/#flask.Blueprint.errorhandler)。蓝图是一种泄漏的抽象。最好为此使用新的 WSGI 应用程序，如果您需要单独的错误处理程序，这更有意义。

另外我建议不要使用烧瓶，它在所有地方都使用全局变量，如果它变得更大，这会使你的代码难以管理。

# python - 使用 matplotlib 导入时出现 SyntaxError

> ID：12768831
> 
> 赞同：-4
> 
> 时间：2012-10-07T12:29:38.560
> 
> 标签：python, syntax, plot, matplotlib

这段代码给了我一个 SyntaxError。不知道出了什么问题。

```
import numpy as np
from matplotlib.pyplot as plt

x = np.linspace(0., 10, 0.1)  
y = np.sin(x)
plt.plot(x, y);
plt.show(); 
```

这是错误消息：

```
 File "<ipython-input-4-b3d93c2fbfde>", line 2
    from matplotlib.pyplot as plt
                            ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:34:53.723

你的第二行应该是：

```
import matplotlib.pyplot as plt 
```

另外，请注意在 Python 中不需要分号终止符。

此外，`np.linspace`您使用的调用是错误的 - 它只会给您一个空数组。请尝试以下操作：

```
x = np.linspace(0, 10, num=101) 
```

# parallel-processing - 如何编写真正的 cuda

> ID：12768832
> 
> 赞同：-1
> 
> 时间：2012-10-07T12:29:45.953
> 
> 标签：parallel-processing, cuda

我正在学习高级人工智能课程，我必须学习 CUDA 编程，我在许多网站 cuda 示例中看到，但我对某些事情感到困惑。我的教授告诉我 cuda 类似于 c 但没有 for 循环示例和我从 Nvidia 和其他网站打开的所有文档中，我只能看到 CUDA C 示例。所以我想了解从哪里开始编程 CUDA 而不是 CUDA C 或 CUDA C++。

还有任何参考资料可以帮助我从头开始。比如如何声明变量。如何在屏幕上打印程序的结构。如何制作函数如何制作循环 wrt CUDA 而不是核心的 for 循环C++ 语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:53:28.517

如果您仔细观察，您会发现 CUDA 不是一种编程语言（如 C 或 C++）。CUDA 是 NVIDIA 卡的并行编程平台。CUDA C++ 或 CUDA C 是您的替代品，因此您可以使用 CUDA（NVIDIA 卡并行编程平台）。例如，还有 pyCUDA，因此您可以通过 python 来利用 CUDA。编程语言由您决定。

如果您只是想通过示例编写 CUDA，互联网上有很多，是的，您必须搜索 CUDA C 或 CUDA C++。但是，如果您想了解平台和代码，我推荐两本书：一本有很多示例，来自 NVIDIA：[CUDA by Example](http://developer.download.nvidia.com/books/cuda-by-example/cuda-by-example-sample.pdf)，另一本是[Programming Massively Parallel Processors](https://rads.stackoverflow.com/amzn/click/com/0123814723)，这是一本更详细且解释清楚的书.

# focus - 在两个列表视图中冲浪并失去焦点

> ID：12768835
> 
> 赞同：3
> 
> 时间：2012-10-07T12:29:57.057
> 
> 标签：focus, google-tv, listviewitem, android-listfragment, d-pad

我有一个片段活动包括两个列表片段。我使用方向键在列表中移动。例如，当我点击**listview1->tv**时，在**listview2**中显示 tv channels 。当我单击**listview1->movie**时，在**listview2**中显示电影列表等。

所以这是我的问题：当我单击**listview1->item3**（**item3**现在由选择器突出显示）并转到**listview2**并使用 d-pad up/down 浏览项目然后我回到**listview1**，按左箭头键，我希望回到**listview->item3**。但事实并非如此，我不能让**listview1**中的女巫项目集中（突出显示）

我无法处理焦点项目，我需要返回上一个选定项目 ( `getListView().getSelectedItemPosition()`) 具有真实的项目位置编号，但焦点/突出显示不在真实/最后位置）

安卓 2.3.4

我使用了这些方法，但都没有奏效

```
getListView().setOnFocusChangeListener(new OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean focused) {
        // TODO Auto-generated method stub
        if (!focused) allowfocus=true;
        if (focused && allowfocus){
            getListView().setSelection(PosHolder.MENU_LAST_POS);
                    OR 
            getListView().setSelection(getListView().getSelectedItemPosition());
                    OR
            getListView().getSelectedView().setSelected(true);
                    OR
            getListView().getSelectedView().requestFocus();

            Toast.makeText(getActivity(), "Menu Got Focused:"+ getListView().getSelectedItemPosition(), Toast.LENGTH_SHORT).show();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:39:11.357

对我有用的是创建一个继承自原始 ListView 的 customListView，然后覆盖 OnFocusChange 事件以在那里处理您的焦点。

# javascript - 这个Javascript代码有更好的方法吗

> ID：12768836
> 
> 赞同：0
> 
> 时间：2012-10-07T12:30:17.560
> 
> 标签：javascript, jquery

我有非常简单的 JavaScript/CoffeSscript 知识。我想知道是否有更好的方法可以仅在打开时绑定放置`active`类。`tableContentsPane`

```
$(document).ready ->
  $('#tableContents').click -> 
    $('#tableContentsPane').toggle();
    $("#tableContents").addClass "active" if $("#tableContentsPane").is(":visible")
    $("#tableContents").removeClass "active" if $("#tableContentsPane").is(":hidden")

  $('#tableContentsPane a').click -> 
    $('#tableContentsPane').toggle();
    $("#tableContents").removeClass "active" if $("#tableContentsPane").is(":hidden") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:35:04.503

而不是使用`if`来查看表是否打开，您可以简单地切换类

```
$('#tableContents').click(function(){ 
    $('#tableContentsPane').toggle();
    $("#tableContents").toggleClass( "active");

}); 
```

我相信这将满足您的所有条件

API 参考 [http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

# symfony1 - 如何在 Symfony 1.4 中发布 JSON 以进行功能测试

> ID：12768839
> 
> 赞同：3
> 
> 时间：2012-10-07T12:30:25.923
> 
> 标签：symfony1, symfony-1.4, functional-testing

我正在为 POST API 端点编写一些功能测试。我已经查看了文档，但找不到将内容添加到 POST 正文的方法。sfBrowser 的 post 方法：

```
post('some url',array('x'=>'y')) 
```

仅创建 POST 参数（在本例中为 x=y）。是否有使用 sfBrowser 向帖子正文添加内容的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:43:49.713

从我在[这里](http://www.sencha.com/forum/showthread.php?121353-Send-JSON-object-to-PHP)、[这里](https://stackoverflow.com/questions/8211943/post-json-object-to-php)和[这里](http://php.net/manual/en/reserved.variables.post.php)找到的内容来看，POST 格式采用参数：值格式，因此您可以使用以下代码发送 JSON：

```
post('some url', array('json_data' => json_encode($toJson)) 
```

然后在你的动作中解码

```
$jsonObj = json_decode($request->getParameter('json_data')); 
```

但是您需要将 JSON 数据与 POST 中的参数名称相关联，以便在服务器端检索它。

附带说明一下，在查看 Symfony 代码之后，参数直接提供给 $_POST，但 CSRF 除外，这是经过调整的。

# javascript - 缩小和变量名

> ID：12768840
> 
> 赞同：6
> 
> 时间：2012-10-07T12:30:34.283
> 
> 标签：javascript, obfuscation, minify

我知道缩小负责删除：空白字符、换行符、注释，有时还有块分隔符。不久前我读到它还负责缩短变量名。但我一直认为这是混淆的一部分。我对吗？或者现在缩小库也包含这样的功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-07T12:36:01.260

好吧，由于缩小的目的是尽可能地减少代码的大小，重命名变量是一种有效的方法。

JavaScript 压缩器经常使用的一个技巧是将代码包装在一个立即执行的函数中，并带有很多参数：

```
(function(a,b,c,d,e,f,g){/* ... */})(); 
```

这使得可以在不使用`var`关键字声明它们的情况下使用这些变量，从而将代码的大小减少三个字节乘以`var`关键字的数量。

现代缩小器使用许多这些高级技巧来减少代码的大小，代码看起来被混淆只是缩小的副产品。

# iphone - becomeFirstResponder 第二次不显示键盘（ios 6 + 故事板）

> ID：12768844
> 
> 赞同：7
> 
> 时间：2012-10-07T12:31:10.950
> 
> 标签：iphone, objective-c, ios, xcode, storyboard

我有一个故事板，其中包括视图之间的导航。来回，也有可能一直跳到主屏幕。

基本上，它是这样工作的：

*   视图 1 显示了一个简单的菜单。
*   视图 2 显示输入字段并自动显示键盘。
*   视图 3 显示了一个结果表。在此视图中，您可以后退一步（视图 2）或返回主屏幕（视图 1）。

当用户从视图 1 移动到视图 2 时，键盘和一切第一次完美运行。但是，当从视图 3 移回视图 2，或从视图 3 重新开始时，键盘不显示。

在代码中，我在 viewDidAppear 方法中变成了FirstResponder。此外，它会在加载视图 3 时 resignFirstResponder。另一个有趣的事实是，当第二次调用 becomeFirstResponder 时，它确实返回 NO（而第一次返回 YES）。此外，当返回此视图时，无法选择文本字段，即使它们是 userInteractionEnabled。

我真的被困在这里，所以非常感谢任何帮助。我已经看到了几个与此类似的问题，但没有找到解决方案：

*   [becomeFirstResponder 似乎仅第一次用于摇动手势](https://stackoverflow.com/questions/1282090/becomefirstresponder-seems-to-work-only-1st-time-for-shake-gesture)
*   [添加 [myUITextField becomeFirstResponder]; 不调出键盘](https://stackoverflow.com/questions/9221601/adding-myuitextfield-becomefirstresponder-does-not-bring-up-keyboard)
*   [键盘没有响应 resignFirstResponder](https://stackoverflow.com/questions/10051402/keyboard-not-responding-to-resignfirstresponder)
*   [UITextField becomeFirstResponder 只工作一次](https://stackoverflow.com/questions/9711929/uitextfield-becomefirstresponder-works-only-once)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T05:24:38.540

我能够在我的代码中找到问题。自己回答这个问题，因为它也可能对其他人有帮助。

我的问题是我并没有真正得到正确的事件顺序。我有一个按钮可以移动到下一个文本字段，如果一切都完成了，它将移动到下一个屏幕。这导致在切换到新屏幕时调用 becomeFirstResponder 方法而不释放 (resignFirstResponder)。

我想我可以给出的主要建议（至少最终对我有用）是通过所有 becomeFirstResponder 并确保在移动到下一个屏幕之前释放它。

# mysql - MySQL 中 CSV 格式的 GROUP_CONCAT

> ID：12768849
> 
> 赞同：2
> 
> 时间：2012-10-07T12:31:35.103
> 
> 标签：mysql, csv, group-concat

假设我有一个**表 A**我想转换成**表 B**。

**表 B**中的值应始终是具有**相同字段数的**CSV 格式文本。

首先，我需要知道给定类别处理的值的**最大数量**是多少（在本例中，类别 1、2 和 4 中的**3 个值）；**

其次，当类别具有“缺失”值时，我还需要使用该变量将**空字段**（“，”）“添加”到 GROUP_CONCAT 的末尾。

我需要这个在每个单元格中都有一个“一致的”CSV。我用来处理这些数据的应用程序不能很好地解释具有不同列号的 CSV...

**表 A**

```
+----+----------+-------+
| id | category | value |
+----+----------+-------+
| 1  |    1     |   a   |
| 2  |    1     |   b   |
| 3  |    1     |   c   |
| 4  |    2     |   d   |
| 5  |    2     |   e   |
| 6  |    2     |   f   |
| 7  |    3     |   g   |
| 8  |    3     |   h   |
| 9  |    4     |   i   |
| 10 |    4     |   j   |
| 11 |    4     |   k   |
| 12 |    5     |   l   |
+----+----------+-------+ 
```

**表 B**

```
+--------------+---------------------+
| id(category) | value(group_concat) |
+--------------+---------------------+
|      1       |        a,b,c        |
|      2       |        d,e,f        |
|      3       |        g,h,         |
|      4       |        i,j,k        |
|      5       |        l,,          |
+--------------+---------------------+ 
```

## 编辑（SQLFiddle）：

[http://sqlfiddle.com/#!2/825f8](http://sqlfiddle.com/#!2/825f8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:13:13.280

首先，要获得*给定类别处理的最大数量的值*：

```
select count(category) from tableA group by category order by count(category) desc limit 1; 
```

其次，当类别具有“缺失”值时，将空字段（“，”）添加到 GROUP_CONCAT 的末尾。

我创建了一个名为 unify_length 的函数来帮助做到这一点。

这是功能：

```
delimiter $$

CREATE FUNCTION `unify_length`(csv_list CHAR(255), length INT) RETURNS char(255)
    DETERMINISTIC
BEGIN        
        WHILE ((SELECT LENGTH(csv_list) - LENGTH(REPLACE(csv_list, ',', ''))) < length-1) DO /* count the number of occurrances in a string*/
            SET csv_list = CONCAT(csv_list, ',');        
        END WHILE;

        RETURN csv_list;
END$$ 
```

这是函数调用：

```
select category, unify_length(GROUP_CONCAT(value), length) from tablea group by category; 
```

where`length`是第一个查询返回的内容。

# php - 优化sql语法

> ID：12768851
> 
> 赞同：0
> 
> 时间：2012-10-07T12:31:52.913
> 
> 标签：php, sql

我有这 3 个 sql 问题：

```
$producent = mysql_fetch_array(mysql_query("
            SELECT FieldValue 
            FROM `xy8vx_rsform_submission_values`
            WHERE SubmissionId = '$id' AND FieldName = 'Producent'
            "));

$model = mysql_fetch_array(mysql_query("
            SELECT FieldValue 
            FROM `xy8vx_rsform_submission_values`
            WHERE SubmissionId = '$id' AND FieldName = 'Model'
            "));

$nr_ser= mysql_fetch_array(mysql_query("
            SELECT FieldValue 
            FROM `xy8vx_rsform_submission_values`
            WHERE SubmissionId = '$id' AND FieldName = 'Nr seryjny'
            ")); 
```

是否可以通过一个 sql 问题获得这 3 个值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T12:33:26.913

是的，使用 IN 子句。

```
 SELECT FieldName , FieldValue 
 FROM `xy8vx_rsform_submission_values`
 WHERE SubmissionId = '$id' AND FieldName IN ('Producent', 'Model', 'Nr seryjny') 
```

当然，您需要使用循环来获取结果。

```
// $sql is the above sql
$res = mysql_query($sql);
$result = array();
while ($row = mysql_fetch_assoc($res)) {
  $result[$row['FieldName']] = $row['FieldValue'];
}
print_r($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T12:37:40.910

```
$id_1=x;
$id_2=y;
$id_3=z;

$name_1="NAME X";
$name_2="NAME Y";
$name_3="NAME Z";

SELECT FieldValue 
FROM `xy8vx_rsform_submission_values`
WHERE ((SubmissionId = $id_1 AND FieldName = $name_1) or (SubmissionId = $id_2 AND FieldName = $name_2) or (SubmissionId = $id_3 AND FieldName = $name_3)); 
```

现在，您必须将结果提取到 3 行数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T12:41:08.050

学习和使用[SQL IN 运算符](http://www.w3schools.com/sql/sql_in.asp)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T12:33:42.270

要获取 3 行中的 3 个值：

```
SELECT FieldValue 
FROM `xy8vx_rsform_submission_values`
WHERE SubmissionId = '$id' AND 
FieldName in ('Producent', 'Model', 'Nr seryjny') 
```

或者，获取 3 列中的 3 个值：

```
SELECT
    (SELECT FieldValue 
    FROM `xy8vx_rsform_submission_values`
    WHERE SubmissionId = '$id' AND FieldName = 'Producent') as Producent,

    (SELECT FieldValue 
    FROM `xy8vx_rsform_submission_values`
    WHERE SubmissionId = '$id' AND FieldName = 'Model') as Model,

    (SELECT FieldValue 
    FROM `xy8vx_rsform_submission_values`
    WHERE SubmissionId = '$id' AND FieldName = 'Nr seryjny') as NrSeryjny 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T12:34:40.900

单个查询将产生这 3 个查询的结果

```
$producent = mysql_fetch_array(mysql_query("
        SELECT FieldValue 
        FROM `xy8vx_rsform_submission_values`
        WHERE SubmissionId = '$id' AND (FieldName = 'Producent' OR FieldName = 'Model' OR FieldName = 'Nr seryjny')
        ")); 
```

# php - 狮身人面像 - 搜索比文档更多。身份证

> ID：12768852
> 
> 赞同：0
> 
> 时间：2012-10-07T12:32:02.150
> 
> 标签：php, mysql, sphinx

我在我的产品数据库中使用 PHP Sphinx 进行搜索：

```
SELECT name, price FROM products 
```

我只按名字搜索。我正在使用分页，因为我不需要一次所有记录（ ->SetLimits() ），所以 Sphinx 只返回 10 个 ID。

但是网络用户可以通过价格过滤器过滤搜索到的项目，所以我需要知道最大和最小价格（来自所有记录，而不仅仅是一页上的记录）以显示用户价格过滤范围。

是否可以从所有搜索到的文件中获取 Sphinx MAX(price) 和 MIN(price) 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:38:29.673

分组/聚类允许这个 [http://sphinxsearch.com/docs/current.html#clustering](http://sphinxsearch.com/docs/current.html#clustering)

您运行您的普通文本查询，就像我们作为另一个查询来获取您需要的数据一样。

如果担心性能，请使用多查询 [http://sphinxsearch.com/docs/current.html#multi-queries](http://sphinxsearch.com/docs/current.html#multi-queries)

# java - 如何将台式计算机的处理时间转换为 android 设备？

> ID：12768854
> 
> 赞同：1
> 
> 时间：2012-10-07T12:32:02.570
> 
> 标签：java, android, cpu-usage

我有一个相当复杂的算法，我希望在 android 应用程序中使用它。在我的系统设计走得太远之前，我想了解运行该算法可能会对 Android 手机造成的处理和内存需求。我已经使用 SO 上推荐的代码来获得在我的系统上运行所需的纳米时间：

```
 long startTime = System.nanoTime();
    //my code
    long endTime = System.nanoTime();
    System.out.println("Took "+(endTime - startTime) + " ns"); 
```

在我的桌面上平均在 55825493 和 60942613 之间，它有 8gb 的内存和一个以 2.3ghz 运行的四核。我知道许多手机具有不同的处理能力，但我真的只是想知道它如何在与桌面相关的安卓设备上运行。

任何想法或方法，甚至 android 测试工具都将不胜感激。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:06:26.450

试试这个，它与您在 PC 上的操作方式非常相似。

*   保留`UI work on UI thread`, 和`Non-UI work on Non-UI`线程是一种很好的做法，但随着 HoneyComb 版本的 Android 的到来成为了一种法则。

*   如果您正在做的工作是非 UI 工作，请借助 a `Thread with Handler`(Handler will be used, only when you want to display an output result on your screen from the thread.) 或 go with `AsyncTask`(在 Android 中引入) ，也称为无痛穿线。

**例如：**

```
 long startTime;    // Let this be at Class scope

 long endTime;      // Let this be at Class scope

 long finalResult;  // Let this be at Class scope

Thread t = new Thread(new Runnable(){

 startTime = System.nanoTime();

  public void run(){

   // Your Work.....

    }

 endTime = System.nanoTime();

 finalResult = startTime - endTime;

});

t.start();

System.out.println("The total processing time: "+finalResult);

// Your Output will be at the LogCat... Use Handler if you want to print it as toast etc on Screen. 
```

# python - 如何使用现有列表制作二维数组？

> ID：12768862
> 
> 赞同：0
> 
> 时间：2012-10-07T12:33:07.600
> 
> 标签：python, arrays, list, 2d

例如，我有一个名为“mazeline”的 txt 数据，如下所示：

```
abcd
cdae
korp 
```

所以我首先列出了 3 个列表：

```
mazeline = readmaze.split()
mline0 =  list(mazeline[0])
mline1 =  list(mazeline[1])
mline2 =  list(mazeline[2]) 
```

所以这3个列表是：

```
mline0 = [a,b,c,d]
mline1 = [c,d,a,e]
mline2 = [k,o,r,p] 
```

我想制作一个像这样的二维数组：

```
[[a,b,c,d],[c,d,a,e],[k,o,r,p]] 
```

或者有什么方法可以直接从第一个数据制作一个二维数组？

有什么建议么？任何帮助都会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:34:44.147

只需将列表放入另一个列表中

```
res = [mline0, mline1, mline2] 
```

更简单地说，您可以跳过中间变量并使用列表推导

```
res = [list(mline) for mline in readmaze.split()] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:38:58.987

试试这个列表理解：

```
[[int(i) for i in line.strip()] for line in open('file/path')] 
```

# mysql - 为 MySQL 重写 SQL Server 查询

> ID：12768867
> 
> 赞同：0
> 
> 时间：2012-10-07T12:33:41.660
> 
> 标签：mysql, sql, sql-server

在下面的示例中，我有一个包含作者及其论文的书目表。例如，作者“001”和“003”一起写了文章“678”。

```
articleId | authorId
123 | 001
123 | 002
345 | 002
345 | 003
345 | 004
678 | 001
678 | 003 
```

我需要根据他们的共同作者身份选择作者之间的共现。例如，对于上表，我需要构建下表：

```
AuthorA | AuthorB
001 | 002
002 | 003
002 | 004
003 | 004
001 | 003 
```

第一个表非常大（大约 1.800.000 行）。当我第一次尝试使用 MS SQL Server 2008 时，第二张表的构建速度很快，但我现在坚持使用 MySQL。我使用以下查询：

```
SELECT foo.authorId AS authorA, bar.authorId AS authorB
  FROM
    (SELECT * FROM tblAuthorHasBib) AS foo,
    (SELECT * FROM tblAuthorHasBib) AS bar
  WHERE
    foo.articleId = bar.articleId
  AND
    foo.authorId <> bar.authorId
  GROUP BY foo.authorId, bar.authorId 
```

如何将我的查询重写为与 MS SQL 一样快？提前感谢任何指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T12:47:54.013

您可以如下所示编写查询，这将避免使用该`GROUP BY`子句和任何内联视图。

```
SELECT foo.authorId AS authorA, bar.authorId AS authorB
FROM tblAuthorHasBib foo
JOIN tblAuthorHasBib bar
   ON foo.articleId = bar.articleId 
WHERE foo.authorId != bar.authorId 
```

或者，根据@1osmi 的评论，如果您只想要作者的独特排列，那么您可以替换为`!=`，`<`如下所示

```
SELECT foo.authorId AS authorA, bar.authorId AS authorB
FROM tblAuthorHasBib foo
JOIN tblAuthorHasBib bar
   ON foo.articleId = bar.articleId 
WHERE foo.authorId < bar.authorId 
```

# java - 带有 ace 数据表的 selectonemenu - 值丢失

> ID：12768869
> 
> 赞同：1
> 
> 时间：2012-10-07T12:33:55.550
> 
> 标签：java, jsf, datatable, icefaces, icefaces-3

也许有人可以帮助我？

我有一个 ace:datatable，其中一列在内联编辑模式下使用“selectonemenu”。

```
<ace:column id="bundesland" headerText="Bundesland">
    <ace:cellEditor>
        <f:facet name="output">

            <h:outputText id="bundeslandCell1" value="Baden-Württemberg" rendered="#{current.bundesland == 1}"/>  
            <h:outputText id="bundeslandCell2" value="Bayern" rendered="#{current.bundesland == 2}"/>  
            <h:outputText id="bundeslandCell3" value="Hamburg" rendered="#{current.bundesland == 3}"/>  
            <h:outputText id="bundeslandCell4" value="Nordrhein-Westfalen" rendered="#{current.bundesland == 4}"/>  
            <h:outputText id="bundeslandCell5" value="Sachsen" rendered="#{current.bundesland == 5}"/>

        </f:facet>
        <f:facet name="input">

            <h:selectOneMenu id="bundeslandInput" value="#{current.bundesland}">
                <f:selectItem itemLabel="Baden-Württemberg" itemValue="1" />
                <f:selectItem itemLabel="Bayern" itemValue="2" />
                <f:selectItem itemLabel="Hamburg" itemValue="3" />    
                <f:selectItem itemLabel="Nordrhein-Westfalen" itemValue="4" />    
                <f:selectItem itemLabel="Sachsen" itemValue="5" />                                  
            </h:selectOneMenu>

        </f:facet>
    </ace:cellEditor>   
</ace:column> 
```

数据表被分配给一个bean的列表，它引用其他bean......

问题是“bundesland”字段丢失数据，如果我提交数据表的形式。

例如：

*   使用动作监听器在数据表中添加新行
*   内联编辑非持久性新行
*   执行保存

一切都很好！

现在我想插入一个新行。我再次执行相同的步骤。下一次，执行“保存”，单击命令按钮清除整个数据表中的“bundesland”列（持久）。

问题不在于命令按钮背后的动作。列将被清除，如果 CommandButton 没有 actionListener..

至今...

为什么 Icefaces 只在我使用 selectonemenu 时清除每一行中的“bundesland”列？

在“内联编辑”模式下使用仍然没有问题。

感谢帮助！

# c# - 更新表单不保存更改

> ID：12768881
> 
> 赞同：0
> 
> 时间：2012-10-07T12:35:19.183
> 
> 标签：c#

```
public partial class Form1 : Form
{
    //With the code custID.Text = customers[id].ID.ToString();
    //Function above will always be in par with the ID no matter what

    List<Customer> customers = new List<Customer>();
    int id = 0;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void AddButton_Click(object sender, EventArgs e)
    {
        Customer rec1 = new Customer("C0020", "Alfred", "Campbelltown", 1500, 2006);
        Customer rec2 = new Customer("C0021", "Ryder", "Liverpool", 2000, 2008);
        Customer rec3 = new Customer("C0022", "Alison", "Strathfield", 5500, 2012);
        Customer rec4 = new Customer("C0023", "Eliza", "Liverpool", 6000, 2012);
        Customer rec5 = new Customer("C0024", "Natsu", "Campbelltown", 2560, 2011);

        customers.Add(rec1);
        customers.Add(rec2);
        customers.Add(rec3);
        customers.Add(rec4);
        customers.Add(rec5);

    }

    private void NextButton_Click(object sender, EventArgs e)
    {
        int length = customers.Count - 1;

        if (id == length)
        {
            id = 0;
        }
        else
        {
            ++id;
        }

        //Stage 3 Shows the total balance of all records and is displayed

        double total = 0;

        foreach (Customer Total in customers)
            total += Total.Balance; //Total Balance

        double balance = 0;

        foreach (Customer SubTotal in customers)
           balance = customers.Where(c => c.Suburb == "Liverpool").Sum( c => c.Balance);

        //Create a total balance for each suburb

        custID.Text = customers[id].ID.ToString();
        custName.Text = customers[id].Name.ToString();
        custSuburb.Text = customers[id].Suburb.ToString();
        custBal.Text = customers[id].Balance.ToString();
        custYear.Text = customers[id].Year_used.ToString();
        totBalance.Text = total.ToString();
        totSuburb.Text = balance.ToString();

    }

    private void PrevButton_Click(object sender, EventArgs e)
    {
        int length = customers.Count - 1;

        if (id == 0)
        {
            id = length;
        }
        else
        {
            --id;
        }

        custID.Text = customers[id].ID.ToString();
        custName.Text = customers[id].Name.ToString();
        custSuburb.Text = customers[id].Suburb.ToString();
        custBal.Text = customers[id].Balance.ToString();
        custYear.Text = customers[id].Year_used.ToString();

    }

    private void custID_Click(object sender, EventArgs e)
    {

    }

    private void custSub_Click(object sender, EventArgs e)
    {

    }

    private void custBal_Click(object sender, EventArgs e)
    {

    }

    private void custYear_Click(object sender, EventArgs e)
    {

    }

    private void exitApp_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }

    private void totBalance_Click(object sender, EventArgs e)
    {
    }

    private void totSuburb_Click(object sender, EventArgs e)
    {

    }

    private void DelButton_Click(object sender, EventArgs e)
    {
    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {

    }

    private void custSuburb_TextChanged(object sender, EventArgs e)
    {

    }

    private void updateButton_Click(object sender, EventArgs e)
    {
        customers[id].Name = custName.Text.ToString();
        customers[id].Suburb = custSuburb.Text.ToString();
        customers[id].Balance = double.Parse(custBal.Text);
        customers[id].Year_used = double.Parse(custYear.Text);
        this.Update(customers);
    }

}

public class Customer
{
    protected string id;
    protected string name;
    protected string suburb;
    protected double balance;
    protected double year_used;

    public string ID
    {
        get { return id; }
    }

    public string Name
    {
        get { return name; }
        set { value = name; }
    }

    public string Suburb
    {
        get { return suburb; }
        set { value = suburb; }
    }

    public double Balance
    {
        get { return balance; }
        set { value = balance; }
    }

    public double Year_used
    {
        get { return year_used; }
        set { value = year_used; }
    }

    public Customer(string id, string name, string suburb, double balance, double year_used)
    {
        this.id = id;
        this.name = name;
        this.suburb = suburb;
        this.balance = balance;
        this.year_used = year_used;
    }

} 
```

}

嗨，这是我目前拥有的代码。- 当我运行代码时，我有一个上一个和下一个按钮以及一个更新按钮，我可以在其中浏览记录 - 但是当我尝试更改文本框中的文本并点击更新按钮时，它不会保存出于某种原因，我单击添加然后单击下一步然后单击上一个以查看更改是否已保存

*   任何想法都会很棒！干杯

# maven - 生成的资源应该在 Maven 标准目录布局中的哪个位置？

> ID：12768883
> 
> 赞同：1
> 
> 时间：2012-10-07T12:35:31.883
> 
> 标签：maven

我想生成一些资源（在这种情况下为 JavaHelp 搜索索引），但我看不到这些生成文件应该去哪里才能进入 jar。我将它们放在目标/生成源中，但它们被忽略了。它应该是目标/课程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T12:39:11.180

*   `/generated-sources`目录由各种工具使用生成源（*duh！*），如`xjc`或`wsdl2java`。该目录稍后会包含在编译阶段。

*   `/target/classes`是应该包含在最终 JAR 中的所有内容，它回答了您的问题。的内容`/src/main/resources`也包括在内，但这个目录通常是版本控制的一部分，并不意味着生成的工件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:51:14.410

事实证明，生成的源目录不会自动包含在 jar 中。但是，Intellj 假设存在并将它们视为这样，因此我感到困惑。

您需要使用 Maven 构建助手插件来修复此问题，例如：

[https://github.com/alexec/javahelp-skeleton/blob/master/pom.xml](https://github.com/alexec/javahelp-skeleton/blob/master/pom.xml)

# tinymce - 如何用 asciimath 表示法制作大写 delta

> ID：12768891
> 
> 赞同：1
> 
> 时间：2012-10-07T12:36:15.067
> 
> 标签：tinymce, ascii, mathjax, asciimath

我正在使用 asciimath、mathjax 和 tinymce，出于某种原因，小写字母 delta 和大写字母 delta 是一回事。

小写看起来像草书y d，大写应该是三角形吧？

我不知道这是否是我遗漏了什么的错误。

[这里](http://www.imathas.com/editordemo/demo.html)有一个我正在尝试做的演示，单击菜单中的求和符号以查看我在说什么。它有同样的问题。

建议？

编辑：实际上，我只是再看一遍，所有列出小写和大写的希腊字母都有这个问题。

# delphi - 在delphi中切换表格

> ID：12768892
> 
> 赞同：4
> 
> 时间：2012-10-07T12:36:20.517
> 
> 标签：delphi, delphi-7

> **可能重复：**
> [带有登录/注销的Delphi应用程序-如何实现？](https://stackoverflow.com/questions/7839648/delphi-application-with-login-logout-how-to-implement)

我试图在我的 delphi 应用程序中的两个表单之间切换，首先出现登录屏幕，然后出现应用程序的主表单。

我正在使用 formx.hide 和 .show 在表单之间切换。例如。//密码检查后 form1.hide; form2.show;

第二个表单出现，但不能与之交互，就好像它被禁用一样。为什么会这样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T13:04:04.017

由于您没有提供任何代码，我们不得不猜测您的问题是什么。所以这里。

当其他表单以模态方式显示时，表单会被禁用，然后在模态表单关闭时重新启用。因此，您很可能以模态方式显示登录表单，然后将其隐藏而不是关闭。要关闭模态表单，您需要设置模态表单的`ModalResult`属性。如果您隐藏而不是关闭，则主窗体仍将被禁用。关键是您必须在主窗体可用之前正确关闭模态窗体。

通常对于具有初始登录表单的应用程序，您可以像这样组织应用程序的 .dpr 文件：

```
var
  LoginForm: TLoginForm;
  MainForm: TMainForm;
  LoginSucceeded: Boolean;

begin
  Application.Initialize;
  LoginForm := TLoginForm.Create(nil);
  try
    LoginForm.ShowModal;
    LoginSucceeded := LoginForm.Successful;
  finally
    LoginForm.Free;
  end;
  if LoginSucceeded then
  begin
    Application.CreateForm(TMainForm, MainForm);
    Application.Run;
  end;
end; 
```

使用创建的第一个表单`Application.CreateForm`成为您的应用程序的主要表单。当主窗体关闭时，整个应用程序随之关闭。在我看来，你应该`Application.CreateForm`只用于创建主窗体。可以使用该`TMyForm.Create`语法创建任何其他形式。如果您遵循该政策，那么您无需担心表单的创建顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:44:13.543

主窗体实际上是要创建的第一个窗体吗？使用 Application.CreateForm 创建的第一个表单（检查 .dpr 文件的来源）被视为主表单。关闭该表单实际上会关闭应用程序。

# jsf - primefaces-3.3.1 生日日历

> ID：12768893
> 
> 赞同：2
> 
> 时间：2012-10-07T12:36:28.450
> 
> 标签：jsf, calendar, primefaces

我正在使用以下 XML 来获取生日日历：

```
<p:calendar pattern="MM-dd-yyyy" value="#{registration.birthDate}" 
    navigator="true" required="true" label="Birth Date" 
    id="birthDateCal" yearRange="c-100:c-17" /> 
```

日历虽然有一些问题。当我打开日历时，似乎年份会以一种有趣的方式发生变化：

![在此处输入图像描述](../Images/cac94588565e95e9d66e8647f87d0a71.png)

有人见过这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-09T13:12:40.397

更改为**yearRange="-100:-17"**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T13:54:18.137

好吧，这似乎已经是 Primefaces 中列出的一个错误。

[http://code.google.com/p/primefaces/issues/detail?id=2737](http://code.google.com/p/primefaces/issues/detail?id=2737)

它被标记为**不会修复**，原因是它是 jQuery UI 日历组件的一个潜在错误，与 Primefaces 无关。

下面的讨论在这里更详细地讨论了 jQuery 端的这个问题。

[http://forum.jquery.com/topic/datepicker-yearrange-bug](http://forum.jquery.com/topic/datepicker-yearrange-bug)

本质上 yearRange 属性并不像人们想象的那样工作。它将设置年份范围不是今天的日期，而是当前选择的日期作为日历组件的呈现日期。

**编辑：**

解决此问题的一种可能方法是编写一个算法，该算法根据托管 bean 方法确定动态 yearRange，并基于今天日期和生日之间的差异。您可以设置`yearRange="#{managedBean.dynamicYearRange()}"`为动态调用它。

# python - 如何在 Python 中获取手册页内容？

> ID：12768894
> 
> 赞同：3
> 
> 时间：2012-10-07T12:36:44.223
> 
> 标签：python, linux, subprocess, manpage

我正在运行 linux，我想将一些手册页导入我的应用程序。

我想出了这个：

```
p = subprocess.Popen(('man %s' % manTopic,), shell = True, stdout = subprocess.PIPE)
stdout, stderr = p.communicate()
if stdout: 
```

但它不好，男人只显示第一页并阻止我的应用程序

如何使用 Python 获取手册页？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T12:46:03.240

您可以使用 获取命令的全部输出`check_output`。此外，使用 shell 不是必需的，甚至可能使您的应用程序容易受到[shell 注入攻击](http://en.wikipedia.org/wiki/Code_injection#Shell_injection)，因此[强烈建议不要](http://docs.python.org/library/subprocess.html#frequently-used-arguments)使用。

```
import subprocess

pagename = 'man'
manpage = subprocess.check_output(['man', pagename]) 
```

请注意， using`man`将为您提供针对终端格式化的输出。如果你想让它的格式不同，你必须

*   调用`man -w <name>`以获取联机帮助页的位置，
*   可能解压手册页，
*   `groff`使用选项来`-T`选择所需的输出类型。

调用时`groff`，不要忘记加载正确的宏。

在 FreeBSD 上，我倾向于使用`groff -Tlatin1 -mandoc <file>`文本输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T12:44:11.953

尝试：

```
p = subprocess.Popen(('man -P cat %s' % manTopic,), shell = True)
stdout, stderr = p.communicate()
if stdout: 
```

相反——“-P”选项覆盖了“man”命令使用的寻呼程序。

# php - 在不杀死脚本的情况下输出消息

> ID：12768899
> 
> 赞同：1
> 
> 时间：2012-10-07T12:37:00.583
> 
> 标签：php

我正在开发一个生成用于车辆注册的图钉的网站，我的问题是，当我想一次生成很多图钉（如 50,000 个图钉）时，这将需要很长时间才能完成，我该怎么做want 是一种在我的浏览器加载到一个页面时在后台生成 pin 的方法，该页面将显示一条消息说“您的 pin 正在生成”，而不是在显示消息之前等待 50,000 个 pin 生成。我正在使用 PHP 和 MYSQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:06:27.933

您可以将其拆分为 2 页：一个 php 脚本用于生成您的 pin，另一个用于向您的用户显示消息。

这是一种向用户显示消息的方法：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="prototype.js"></script>
<script language="javascript">
function GeneratePINS(quantity)
{
    var myAjax = new Ajax.Updater('pinsAjax','generate_pins.php?quantity='+quantity,
    {
        method : 'get',
    }) ;
}

}
</script>

</head>

<body onload="GeneratePINS(5000);">
Generating pins...
</body>
</html> 
```

你的 generate_pins.php 应该是这样的：

```
<?php
$DEFAULT_VALUE = 100;
$quantity = (isset($_GET['quantity']) && is_numeric($_GET['quantity'])) ? $_GET['quantity'] : $DEFAULT_VALUE;

echo YOUR_METHOD_TO_GENERATE_PINS(quantity);
?> 
```

不要忘记在此处下载原型 JS：http: [//www.prototypejs.org/download](http://www.prototypejs.org/download)

我希望这会有所帮助：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:51:07.363

您要使用的是任务守护程序。然后，您只需启动一项任务并获取一个唯一 ID，然后您可以在“请稍候..”页面上使用它来轮询结果是否可用（当然轮询不是最干净的解决方案，而是最简单的解决方案）。

celery似乎有一个[PHP 客户端](https://github.com/gjedeer/celery-php)；但是您仍然需要用 Python 编写实际任务的代码。也许也有可用的纯 PHP 解决方案。

# unix - 在 UNIX 文件中，快速排序每一行的字段（列）

> ID：12768902
> 
> 赞同：0
> 
> 时间：2012-10-07T12:37:07.920
> 
> 标签：unix

我有一个看起来像这样的文件

```
12;6
2;4
9;4
... 
```

在这种情况下，字段（列）分隔符是“;”。我想对每一行中的字段进行排序。可接受的输出是：

```
6;12
2;4
4;9 
```

可接受的解决方案可以假设字段分隔符是“;” 并且值是整数。理想的解决方案更灵活，允许使用不同的分隔符并用于字母数字排序。

这一切都需要在命令行上完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T12:48:13.213

```
perl -wne '$,=";"; chop; 
    print sort { $a <=> $b } split ";";
    print "\n"' input 
```

如果您的 perl 不是古老的：

```
perl -wnE '$,=";"; chop; 
        say sort { $a <=> $b } split ";"' input 
```

你也可以这样做：

```
perl -F\; -wanE 'chop $F[-1]; $,=";"; say sort { $a <=> $b } @F' input 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T12:44:00.930

```
 awk 'BEGIN{FS=OFS=";"}{if($1>$2)print $2,$1;else print $1,$2;}' file 
```

**测试**

```
kent$  cat t.txt
12;6
2;4
9;4
ccc;aaa
bab;baa

kent$  awk 'BEGIN{FS=OFS=";"}{if($1>$2)print $2,$1;else print $1,$2;}' t.txt
6;12
2;4
4;9
aaa;ccc
baa;bab 
```

# html - 如何使用 html5bolierplate 构建脚本？

> ID：12768903
> 
> 赞同：0
> 
> 时间：2012-10-07T12:37:14.800
> 
> 标签：html, ant, compression

可以，然后呢。

1.  我已经安装了蚂蚁。
2.  下载了构建脚本。解压到 Ant 安装位置。

当我运行“runbuildscript”时，一个 cmd 界面会打开大约一秒钟，然后停止。

如果我通过 CMD 导航到文件的位置，那么`ant minify`它不起作用。

然后我想将构建脚本放置并提取到文件的位置。

这样做时，一个错误来了——

```
BUILD FAILED
E:\NamanyayG\wamp\www\namanyayg\build.xml:150: The following error occurred whil
e executing this line:
E:\NamanyayG\wamp\www\namanyayg\build.xml:416: E:\NamanyayG\wamp\www\${dir.source} does    not exist. 
```

请帮帮我，我完全糊涂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:53:34.337

构建脚本需要一些外部进程（在这种情况下是你）来设置`dir.source`属性。

最确定的设置方法是在 ant 命令行上定义它，例如

```
ant -Ddir.source=/path/to/dir.source 
```

# bash - 如何在 Bash 中对齐表格的列？

> ID：12768907
> 
> 赞同：105
> 
> 时间：2012-10-07T12:38:03.857
> 
> 标签：bash, echo

我想输出表格格式的文本。我试图做的是用 '\t' 回显数组的元素，但它没有对齐。

我的代码

```
for((i=0;i<array_size;i++));
do
   echo stringarray[$i] $'\t' numberarray[$i] $'\t' anotherfieldarray[$i]
done; 
```

我的输出

```
a very long string..........     112232432      anotherfield
a smaller string         123124343     anotherfield 
```

期望的输出

```
a very long string..........     112232432      anotherfield
a smaller string                 123124343      anotherfield 
```

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-10-07T12:39:10.783

使用*[列](https://man7.org/linux/man-pages/man1/column.1.html)*命令：

```
column -t -s' ' filename 
```

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2012-10-08T12:27:31.390

`printf`很棒，但人们忘记了它。

```
$ for num in 1 10 100 1000 10000 100000 1000000; do printf "%10s %s\n" $num "foobar"; done
         1 foobar
        10 foobar
       100 foobar
      1000 foobar
     10000 foobar
    100000 foobar
   1000000 foobar

$ for((i=0;i<array_size;i++));
do
    printf "%10s %10d %10s" stringarray[$i] numberarray[$i] anotherfieldarray[%i]
done 
```

注意我用于`%10s`字符串。 `%s`是重要的部分。它告诉它使用一个字符串。中间`10`的表示它是多少列。 `%d`用于数字（数字）。

`man 1 printf`了解更多信息。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-03-08T18:50:32.210

```
function printTable()
{
    local -r delimiter="${1}"
    local -r data="$(removeEmptyLines "${2}")"

    if [[ "${delimiter}" != '' && "$(isEmptyString "${data}")" = 'false' ]]
    then
        local -r numberOfLines="$(wc -l <<< "${data}")"

        if [[ "${numberOfLines}" -gt '0' ]]
        then
            local table=''
            local i=1

            for ((i = 1; i <= "${numberOfLines}"; i = i + 1))
            do
                local line=''
                line="$(sed "${i}q;d" <<< "${data}")"

                local numberOfColumns='0'
                numberOfColumns="$(awk -F "${delimiter}" '{print NF}' <<< "${line}")"

                # Add Line Delimiter

                if [[ "${i}" -eq '1' ]]
                then
                    table="${table}$(printf '%s#+' "$(repeatString '#+' "${numberOfColumns}")")"
                fi

                # Add Header Or Body

                table="${table}\n"

                local j=1

                for ((j = 1; j <= "${numberOfColumns}"; j = j + 1))
                do
                    table="${table}$(printf '#| %s' "$(cut -d "${delimiter}" -f "${j}" <<< "${line}")")"
                done

                table="${table}#|\n"

                # Add Line Delimiter

                if [[ "${i}" -eq '1' ]] || [[ "${numberOfLines}" -gt '1' && "${i}" -eq "${numberOfLines}" ]]
                then
                    table="${table}$(printf '%s#+' "$(repeatString '#+' "${numberOfColumns}")")"
                fi
            done

            if [[ "$(isEmptyString "${table}")" = 'false' ]]
            then
                echo -e "${table}" | column -s '#' -t | awk '/^\+/{gsub(" ", "-", $0)}1'
            fi
        fi
    fi
}

function removeEmptyLines()
{
    local -r content="${1}"

    echo -e "${content}" | sed '/^\s*$/d'
}

function repeatString()
{
    local -r string="${1}"
    local -r numberToRepeat="${2}"

    if [[ "${string}" != '' && "${numberToRepeat}" =~ ^[1-9][0-9]*$ ]]
    then
        local -r result="$(printf "%${numberToRepeat}s")"
        echo -e "${result// /${string}}"
    fi
}

function isEmptyString()
{
    local -r string="${1}"

    if [[ "$(trimString "${string}")" = '' ]]
    then
        echo 'true' && return 0
    fi

    echo 'false' && return 1
}

function trimString()
{
    local -r string="${1}"

    sed 's,^[[:blank:]]*,,' <<< "${string}" | sed 's,[[:blank:]]*$,,'
} 
```

样品运行

```
$ cat data-1.txt
HEADER 1,HEADER 2,HEADER 3

$ printTable ',' "$(cat data-1.txt)"
+-----------+-----------+-----------+
| HEADER 1  | HEADER 2  | HEADER 3  |
+-----------+-----------+-----------+

$ cat data-2.txt
HEADER 1,HEADER 2,HEADER 3
data 1,data 2,data 3

$ printTable ',' "$(cat data-2.txt)"
+-----------+-----------+-----------+
| HEADER 1  | HEADER 2  | HEADER 3  |
+-----------+-----------+-----------+
| data 1    | data 2    | data 3    |
+-----------+-----------+-----------+

$ cat data-3.txt
HEADER 1,HEADER 2,HEADER 3
data 1,data 2,data 3
data 4,data 5,data 6

$ printTable ',' "$(cat data-3.txt)"
+-----------+-----------+-----------+
| HEADER 1  | HEADER 2  | HEADER 3  |
+-----------+-----------+-----------+
| data 1    | data 2    | data 3    |
| data 4    | data 5    | data 6    |
+-----------+-----------+-----------+

$ cat data-4.txt
HEADER
data

$ printTable ',' "$(cat data-4.txt)"
+---------+
| HEADER  |
+---------+
| data    |
+---------+

$ cat data-5.txt
HEADER

data 1

data 2

$ printTable ',' "$(cat data-5.txt)"
+---------+
| HEADER  |
+---------+
| data 1  |
| data 2  |
+---------+ 
```

参考库位于：[https ://github.com/gdbtek/linux-cookbooks/blob/master/libraries/util.bash](https://github.com/gdbtek/linux-cookbooks/blob/master/libraries/util.bash)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-10-07T13:07:25.293

要获得与您需要的完全相同的输出，您需要像这样格式化文件：

```
a very long string..........\t     112232432\t     anotherfield\n
a smaller string\t      123124343\t     anotherfield\n 
```

然后使用：

```
$ column -t -s $'\t' FILE
a very long string..........  112232432  anotherfield
a smaller string              123124343  anotherfield 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-01-26T17:17:21.217

这比你想象的要容易。

如果您也在使用以分号分隔的文件和标题：

```
$ (head -n1 file.csv && sort file.csv | grep -v <header>) | column -s";" -t 
```

如果您正在使用数组（使用制表符作为分隔符）：

```
for((i=0;i<array_size;i++));
do

   echo stringarray[$i] $'\t' numberarray[$i] $'\t' anotherfieldarray[$i] >> tmp_file.csv

done;

cat file.csv | column -t 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-09-06T17:37:25.883

**`awk`处理标准输入的解决方案**

由于`column`不是 POSIX，也许这是：

```
mycolumn() (
  file="${1:--}"
  if [ "$file" = - ]; then
    file="$(mktemp)"
    cat > "${file}"
  fi
  awk '
  FNR == 1 { if (NR == FNR) next }
  NR == FNR {
    for (i = 1; i <= NF; i++) {
      l = length($i)
      if (w[i] < l)
        w[i] = l
    }
    next
  }
  {
    for (i = 1; i <= NF; i++)
      printf "%*s", w[i] + (i > 1 ? 1 : 0), $i
    print ""
  }
  ' "$file" "$file"
  if [ "$1" = - ]; then
    rm "$file"
  fi
) 
```

测试：

```
printf '12 1234 1
12345678 1 123
1234 123456 123456
' > file 
```

测试命令：

```
mycolumn file
mycolumn <file
mycolumn - <file 
```

所有人的输出：

```
 12   1234      1
12345678      1    123
    1234 123456 123456 
```

也可以看看：

*   [使用 awk 对齐文本文件中的列？](https://stackoverflow.com/questions/14095011/using-awk-to-align-columns-in-text-file)
*   [AWK：浏览文件两次，执行不同的任务](https://stackoverflow.com/questions/28544105/awk-go-through-the-file-twice-doing-different-tasks)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-03-06T09:59:21.627

我不确定你在哪里运行它，但你发布的代码不会产生你给出的输出，至少在我熟悉的 Bash 版本中不会。

试试这个：

```
stringarray=('test' 'some thing' 'very long long long string' 'blah')
numberarray=(1 22 7777 8888888888)
anotherfieldarray=('other' 'mixed' 456 'data')
array_size=4

for((i=0;i<array_size;i++))
do
    echo ${stringarray[$i]} $'\x1d' ${numberarray[$i]} $'\x1d' ${anotherfieldarray[$i]}
done | column -t -s$'\x1d' 
```

请注意，我使用的是[组分隔符](https://en.wikipedia.org/wiki/C0_and_C1_control_codes#Basic_ASCII_control_codes)(0x1D) 而不是制表符，因为如果您从文件中获取这些数组，它们可能包含制表符。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-13T10:44:22.503

以防万一有人想在 PHP 中这样做，我在 GitHub 上发布了一个要点：

[https://gist.github.com/redestructa/2a7691e7f3ae69ec5161220c99e2d1b3](https://gist.github.com/redestructa/2a7691e7f3ae69ec5161220c99e2d1b3)

只需调用：

```
$output = $tablePrinter->printLinesIntoArray($items, ['title', 'chilProp2']); 
```

如果您使用的是早于 7.2 的 PHP 版本，则可能需要调整代码。

之后，根据您的环境调用 echo 或 writeLine。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-13T14:31:02.997

下面的代码已经过测试，并且完全符合原始问题中的要求。

参数：

%30s 30 个字符的列和文本右对齐。
%10d 整数表示法，%10s 也可以。\

```
stringarray[0]="a very long string.........."
# 28Char (max length for this column)
numberarray[0]=1122324333
# 10digits (max length for this column)
anotherfield[0]="anotherfield"
# 12Char (max length for this column)
stringarray[1]="a smaller string....."
numberarray[1]=123124343
anotherfield[1]="anotherfield"

printf "%30s %10d %13s" "${stringarray[0]}" ${numberarray[0]} "${anotherfield[0]}"
printf "\n"
printf "%30s %10d %13s" "${stringarray[1]}" ${numberarray[1]} "${anotherfield[1]}"
# a var string with spaces has to be quoted
printf "\n Next line will fail \n"
printf "%30s %10d %13s" ${stringarray[0]} ${numberarray[0]} "${anotherfield[0]}"

  a very long string.......... 1122324333  anotherfield
         a smaller string.....  123124343  anotherfield 
```

# python - python中的种群遗传学建模

> ID：12768911
> 
> 赞同：3
> 
> 时间：2012-10-07T12:38:37.790
> 
> 标签：python, population, genetics

所以我需要编写一个程序，生成具有单个基因的理论有机体的几代随机等位基因。

我从一个包含一个突变等位基因 2 的列表开始，然后我为下一代选择 3 个等位基因，并将它们附加到下一代的列表中

```
import random

p = [1,1,1,2]

from random import choice
n=len(p)-1

for i an range(n):
    p.append(choice(p)) 
```

问题是，这不会删除未选择的等位基因。我怎样才能调整这个程序，以便从列表中删除未选择的等位基因？

谢谢

- 编辑

程序的输出看起来像这样

[1,1,1,2,1,2,1]

这将代表具有 2 个不同等位基因的 7 个生物群体。这代表了第 2 代，因为有 3 个选定等位基因的双等位基因。这模拟了 3 个选定等位基因的 2 个后代。但未选择的等位基因（在本例中为 1）不应出现在这一代中。所以我想知道的是如何从这里的列表中删除它

注意。抱歉有点冗长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:55:27.117

```
import random 
n = 4 

A = [i for i in xrange(n)]
B = [1,1,1,2]
NextGeneration = [] 
for i in xrange(n-1):
    last = n - i - 1
    actualChoice =  random.randint(0,last)   
    NextGeneration.append(B[A[actualChoice]])  
    auxSwap = actualChoice 
    A[actualChoice] = A[last] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:03:49.723

我不确定我是否完全理解你的问题，但这里是一个解决方案的尝试：

```
first_gen = [1,1,1,2]
second_gen = first_gen + random.sample(first_gen, len(first_gen)-1) 
```

这些帮助有用？

# android - java.net.UnknownHostException：ws.audioscrobbler.com

> ID：12768912
> 
> 赞同：2
> 
> 时间：2012-10-07T12:38:49.007
> 
> 标签：android

我试图从 last.fm 提出请求，我将从我输入的那个中获得类似的艺术家。我收到此错误：java.net.UnknownHostException: ws.audioscrabbler.com - 为什么？这本来是要在之后列出的，但不知何故我认为我没有“进入”他们的 api。当我按下按钮时，什么也没有发生，但在 LogCat 中，我收到了大约 25 个警告。也许reuest通过但我没有显示任何东西。当我在具有不同 pi 的不同站点上尝试此示例时，它起作用了。

// 主要的

```
 package com.example.eserviceapp;

import android.os.Bundle;
import android.app.Activity;
import java.net.URL;
import java.util.ArrayList;
import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserFactory;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;

public class Eservice_main extends Activity {
    ArrayList<String> list = new ArrayList<String>();
    ArrayAdapter aa;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button enterButton = (Button) findViewById(R.id.enter);
        enterButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                list = new ArrayList<String>();
                EditText artistText = (EditText) findViewById(R.id.artisttext);
                String artistNWS = artistText.getText().toString().replace(' ', '+');
                String apiKey = "&api_key=b25b959554ed76058ac220b7b2e0a026";
                URL text;
                try {
                    text = new URL("http://ws.audioscrobbler.com/2.0/?method=artist.getSimilar&artist=cher&api_key=1e1f63e2c64fd7d8a7340cbbc3e365c3");

                    XmlPullParserFactory parserCreator = XmlPullParserFactory.newInstance();
                    XmlPullParser parser = parserCreator.newPullParser();
                    parser.setInput(text.openStream(), null);
                    int parserEvent = parser.getEventType();
                    String tagName;
                    int i = 0;
                    while (parserEvent != XmlPullParser.END_DOCUMENT) { 
                        switch (parserEvent) {
                        case XmlPullParser.START_TAG:

                            tagName = parser.getName();
                            System.out.println(tagName);
                            if (tagName.equals("name"))
                            {
                                list.add(parser.nextText());

                            }
                            break;
                        }
                        parserEvent = parser.next();

                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }

                aa = new ArrayAdapter(Eservice_main.this,
                        android.R.layout.simple_list_item_1, list);
                ListView lw = (ListView) findViewById(R.id.listView1);
                lw.setAdapter(aa);
            }

        });

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T12:53:38.247

`I get this error: java.net.UnknownHostException`

当您没有`android.permission.INTERNET`在`Manifest.xml`文件中给出时，会发生上述错误。

# jquery - jquery以多种形式获取特定输入元素的值

> ID：12768913
> 
> 赞同：0
> 
> 时间：2012-10-07T12:39:00.263
> 
> 标签：jquery

我在一个页面上有多个表单。我创建了一个按钮来隐藏和显示每个表单（有效）。我正在尝试在按钮之后添加来自#family_name 的值，以识别按钮的用途。但是，第**一个**#family name 的值出现在每个表单上的每个按钮之后。我希望出现与该特定表单关联的值。

（我知道按钮被放在一个愚蠢的地方......在这个阶段不是问题）

```
var family = $("input#family_name").val();
$("input#salutation").after("<button title=\"View, Amend or Add\" id=\"chnx\">+</button><span>" + family + "</span>");

<div id="1">
<form id="1">
<fieldset>
<p>
<label for="salutation">Salutation</label>
<input name="salutation" id="salutation" class="required" value="Mr" type="text">
</p>
<p>
<label for="family_name">Family Name</label>
<input name="family_name" id="family_name" class="required" value="Parker" type="text">
</p>
<p>
<label for="first_name">First Name</label>
<input name="first_name" id="first_name" class="required" value="" type="text">
</p>
<p>
<label for="middle_name">Middle Name</label>
<input name="middle_name" id="middle_name" class="required" value="" type="text">
</p>
<p>
<label for="DOB">Date of Birth</label>
<input name="DOB" id="DOB" class="required" value="" type="text">
</p>
<input value="Add" id="add" type="submit">
<input value="Amend" id="amend" type="submit">
</fieldset>
</form>
.......
<form id="2">
.......
.....mutliple forms......
.......
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:42:06.830

ID 应该是唯一的。如果您有多个相同 ID 的实例，您可能应该改用类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:45:46.343

ID 在页面中必须是唯一的，因此您无法查找具有 ID 的第一个元素。

您需要做的是将它们更改为类名（以及每个表单中重复的所有其他元素）并遍历每个表单以仅在该表单中查找数据并进行附加。

类似于以下内容

```
$('form').each(function(){
    var family = $(this).find("input.family_name").val();
     $(this).find("input.salutation").after("<button title=\"View, Amend or Add\" id=\"chnx\">+</button><span>" + family + "</span>");

}); 
```

如果您有任何其他类型的表单（例如与此操作无关的登录名），最好还向表单添加一个通用类名

# ios - Apple PhotoScroller 示例...如何将 xib 合并到 storyBoard？

> ID：12768917
> 
> 赞同：1
> 
> 时间：2012-10-07T12:39:13.807
> 
> 标签：ios, uiscrollview, storyboard, xib

我想将图片库作为我的项目的一部分，它依赖于故事板，我想使用照片滚动苹果示例来完成依赖于 xib 文件作为 UIViewController 的操作，我的问题是如何将它与我的故事板结合起来? 我试图用故事板上的 UIViewController 替换 xib 文件，并将其类分配给照片滚动条的类名，但没有任何改变！

# ruby-on-rails - 不为 Rails 夹具执行 Postgresql 触发器

> ID：12768918
> 
> 赞同：4
> 
> 时间：2012-10-07T12:39:21.003
> 
> 标签：ruby-on-rails, ruby-on-rails-3, triggers, fixtures

我的数据库中有一个触发器，它生成一个随机 id “BEFORE INSERT”。

对于测试中使用的 rails 固定装置，它们不会生成（触发器在数据库中，我检查过）。

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:06:31.853

Rails 夹具不一定按照满足数据库约束的顺序加载，因此 Rails 的解决方案是在加载夹具时关闭它们。

例如，使用 postgresql，这里是 Rails 执行的一些 sql

```
 (2.0ms)  ALTER TABLE "admins" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "events" DISABLE TRIGGER ALL;
  ... insert all of the things
 (2.1ms) ALTER TABLE "admins" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "events" ENABLE TRIGGER ALL; 
```

没有办法使用固定装置并让它们在加载时触发数据库触发器。[使用像https://github.com/thoughtbot/factory_girl](https://github.com/thoughtbot/factory_girl)这样的对象构建器将触发数据库触发器。

不过，在您的情况下，有一种更好的方法可以满足您的需要

```
alter table mytable add column random_column double precision DEFAULT random() NOT NULL 
```

或者如果它是您想要随机化的特定主键列，则应该使用 uuids。

```
CREATE EXTENSION "uuid-ossp";
CREATE TABLE some_table ( 
    id uuid PRIMARY KEY NOT NULL DEFAULT uuid_generate_v4(),
    some_field character varying,
    other_table_id uuid REFERENCES other_table (id) ON DELETE CASCADE NOT NULL 
  ); 
```

# php - 回显计数结果的困难

> ID：12768920
> 
> 赞同：-4
> 
> 时间：2012-10-07T12:39:52.880
> 
> 标签：php

我得到的不是理想的结果：

> “致命错误：无法在第 25 行的 C:\wamp\www\counter.php 中重新声明 count()”

实际上我做错了什么？

```
 function count( )
 {
   static $count = 0;
   $count++;
   return $count;
 }

 // should print 1
 print count( );

 // should print 2
 print count( ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:43:28.573

该`count`函数已在 PHP 中定义（[参见手册](http://php.net/manual/en/function.count.php)），这就是 PHP 抱怨您重新声明它的原因。

如果您更改函数的名称，它应该可以工作。

# ruby-on-rails-3 - 使用乘客设置 RefineryCMS

> ID：12768922
> 
> 赞同：1
> 
> 时间：2012-10-07T12:40:10.940
> 
> 标签：ruby-on-rails-3, refinerycms

我正在尝试在我的 CentOS VPS 上运行 RefineryCMS 安装（它安装了 DirectAdmin，我认为这对我的问题没有任何影响）但不知何故我无法让它托管。

在我的 httpd.conf 中，我添加了以下内容：

```
RailsEnv development
PassengerHighPerformance on
|?DOCROOT=/home/user/domains/domain.name/public_html/rails/refinery_test_install/| 
```

路径都是正确的，当我将这些行放在我的 httpd.conf 中时，我的普通 Rails 3 应用程序运行良好，但现在它只会加载我放在目录中的 index.html 文件，纯用于测试。

关于如何启动并运行它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:41:07.780

我完全想念我没有将乘客转发到 Rails 的公共文件夹。该配置适用于以下 docroot：

```
|?DOCROOT=/home/user/domains/domain.name/public_html/rails/refinery_test_install/public/| 
```

# javascript - 将文件中的随机 url 动态加载到 iframe 中

> ID：12768923
> 
> 赞同：0
> 
> 时间：2012-10-07T12:40:11.713
> 
> 标签：javascript, html

首先，这应该在我的浏览器中作为网页离线运行，并且无需像 php 这样的额外安装即可工作。

我有一个 iframe，内容应该随机加载。

我有：

*   /index.html（带有 iframe 的页面）
*   /files.txt（包含相对 url 列表的文件）

和大量的 .html 文件（也在子文件夹中）。
对于这些文件中的每一个，files.txt 中都存在一个条目，其中包含其确切的相对路径。

如果我没有这么多文件，我只会用相对 url 制作一个硬编码的 javascript 数组，并从该数组中随机获取一个条目作为 iframe 的源。但我说的是> 6000个文件。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:51:02.650

您可以使用 jQuery 通过 AJAX 加载文件列表，将其拆分`\n`并将随机行设置`src`为 iframe：

```
$.ajax({
  url: 'files.txt',
  success: function(text) {
    var fileList = text.split('\n');
    var randomIndex = randomInt(0, fileList.length - 1);    

    $('iframe').attr('src', fileList[randomIndex]);
  }
});

function randomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

# c++ - 使用 C++ 创建坐标图

> ID：12768924
> 
> 赞同：-3
> 
> 时间：2012-10-07T12:40:15.753
> 
> 标签：c++, arrays, visual-c++, c++11

![在此处输入图像描述](../Images/fd52010803369e4f1aadc6e203f01fb5.png)

你能告诉我如何使用普通的 C++ 代码来做这种事情吗？我不需要着色，只需要映射。我必须使用二维数组吗？如果我使用数组，那么如何不同地标记某些点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:05:37.957

下面的代码完成了工作而且非常简单！

```
 #include <iostream>
using namespace std;
void draw(int,int);
int main()
{
    cout<<"Main Board\n";
    draw(3,4);

    system("pause");
}

void draw(int x, int y)
{
    for(int i = -6; i < 7; i++)
        if (i < 0)
            cout<<" "<<i;
        else
            cout<<"  "<<i;
    cout<<endl;

    for(int i = 0; i < 15; i++)
        {
            cout<<(char)(i + 49);
            for(int j = -6; j < 7; j++)
            if(i == y - 1 && j == x)
                cout<<" x ";
            else
                cout<<" . ";

            cout<<(char)(i + 49)<<endl;
        }
} 
```

# php - 如何获取从 php 代码返回的元素的 id

> ID：12768931
> 
> 赞同：0
> 
> 时间：2012-10-07T12:41:26.233
> 
> 标签：php

我正在尝试构建一个数据库驱动的网站，用户从下拉菜单中选择一个值并返回数据库中的一些信息。我使用 ajax 帖子，因为我不希望页面刷新：

```
$("#button").click(function(){ 
   var datastr = ($('#act').val());
   var datastr1 = ($('#loc').val());

   $.ajax({
      type:'POST',
      url:'activities_code.php',
      data: {datastr:datastr, datastr1:datastr1},
      success:function(response){
                $("#msg").html(response);                       
            } });}); 
```

在 url 参数中，我有以下 php 文件（这是 php 文件的一部分）：

```
 $query = "SELECT PK,title,Information from activities where Activities='$category'";
    $result = mysqli_query($dbcon, $query) or die('no available data');

    echo "<table>";
$num_results = 0;
$t = 0; //title counter for the id of each title
while ($row=mysqli_fetch_array($result, MYSQLI_ASSOC)) {
     // Here the columns of title and information are printed
     echo "<tr><td>";
     echo "<a href='test.php'  id=\"t\".$t onClick=\"test()\" target=\"_new\" >".$row['title']."</a>"; 
     echo "<br>";
     echo  $x = $row['PK'];
     echo "</td></tr>";

     echo "<tr><td>";
     echo $row['Information'];
     echo "</td></tr>";
// Here I sum up the number of the results
     $num_results=$num_results+1;   
     $t = $t+1;      
 }

} 
```

如您所见，我有一个 while 循环，每次带有 id 的链接时我都会在其中回显：

```
"<a href='test.php'  id=\"t\".$t onClick=\"test()\" target=\"_new\" >".$row['title']."</a>"; 
```

我想要做的是稍后在我的代码中通过执行以下操作使用每个链接的此 ID：

```
 document.getElementById("t1").value 
```

我的问题是，我怎样才能将此ID返回给客户端？我想我应该在成功函数中写一些东西，但我不知道是什么。如果您不理解代码的某些部分，或者我没有解释清楚，请问我。感谢：D。

这是我在成功功能中发出警报（响应）时得到的。

```
<!DOCTYPE HTML>

       <table id="container"><tr><td><a href='test.php' id="t0" target="_new"   class='pickanchor'>Rafting in Voidomatis</a><br>1</td></tr><tr><td>
      <img src="m.jpg" class="textwrap" height="120px" width="120px">
      <p style="text-align:left;">Our experienced rafting instructors will show you the best way to enjoy Voidomatis, the river with the most clear waters inSouth Europe. You can also cross the Vikos Gorge by following Voidomatis river in an attractive one and a half hour   long walk. Alternatively you can ask for the more demanding Aoos river rafting.</p>
     <br>
     <br>
     <hr></td></tr><tr><td><a href='test.php' id="t1" target="_new" class='pickanchor'>Rafting   in Lousios</a><br>4</td></tr><tr><td><img src="raf.jpg" class="textwrap" height="120" width="120">
     <p>You will be surprised to know that Greece hides numerous, densely vegetated rivers offering amazing rafting opportunities. In the whole mainland, there is a company base awaiting you, for an amazing � off the beaten track experience!</p>
     <br>
     <br>
     <br>
     <hr></td></tr><div id="r2" align="center" id="result_2">2 results for rafting were found!        
     </div></table>  <!-- End of PHP code--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:05:06.503

在您提出的行中，您犯了错误。你在错误的地方添加了“。

```
echo "<a href='test.php'  id=\"t\".$t onClick=\"test()\" target=\"_new\" >".$row['title']."</a>"; 
```

它应该是

```
echo "<a href='test.php'  id=\"t".$t."\" onClick=\"test()\" target=\"_new\" >".$row['title']."</a>"; 
```

作为最简单的解决方案，您可以在 while 循环之后添加

```
echo "<script> my_max_id_num=$t </script>" 
```

这将使您了解页面上存在哪些 ID。这应该使您的 js 脚本可以访问 my_max_id_num 变量。它不被认为是最佳编程实践，但很简单。

解决问题的第二种（更好）方法可能是返回 json 而不是 html 并重写您的成功方法。这将是更多的工作要做：

1.  重写 while 循环，使其返回如下内容：

    {“数据”：[
    ...
    {“id”：“10”，“目标”：“_new”，“标题”：“one_of_your_link_titles”}，
    {“id”：“10”，“目标”：“_new ", "title":"one_of_your_link_titles" },
    ...
    ]}

2.  重写您的 ajax 查询，使其接受 json，并重写成功方法，以便它将根据从服务器返回的数据创建您的链接。

这样，您将在一个查询中同时拥有 ID 和链接。更重要的是，在需求变化的情况下，它会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:05:36.403

首先，您的锚标签的 ID 存在问题。这是更正

```
"<a href='test.php'  id=\"t".$t."\" onClick=\"test()\" target=\"_new\" >".$row['title']."</a>"; 
```

其次，给你的桌子 id 像

```
<table id="container"> 
```

第三，给你的锚标签上课。

```
"<a href='test.php' class='pickanchor'  id=\"t.$t\" onClick=\"test()\" target=\"_new\" >".$row['title']."</a>"; 
```

现在在 .html() 语句之后将以下代码写入您的成功句柄

**新编辑**

```
$("a.pickanchor").each(function(i){

   alert(this.id);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:02:03.903

最简单的解决方案是给你的元素一个`class`，这样你就不需要基于元素选择`id`，但你可以很容易地访问它：

例如。

```
<a href="#" id="t0" class="className">test 0</a>
<a href="#" id="t1" class="className">test 1</a>

$('#msg').on('click', '.className', function() {
  console.log(this.id);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T13:11:28.043

我没有足够的代表点来要求澄清，但是“将此ID返回给客户端”是什么意思？还有元素“t1”的“价值”是什么？

假设您想获取链接位置，它可能类似于：

```
var value = $('#addButton').attr('href'); 
```

然后对这个值做一些事情（不确定你的意思是'把这个ID返回给客户端'），但也许你希望这个值对客户端可见？

因此，如果您在页面上的某个地方有一个 div，您希望它显示您可以用您的值填充它，也许是这样的：

HTML `<div id="valueBox"></div>`

jQuery

```
$("#valueBox").html(value); 
```

# javascript - 简单的 Javascript 数学

> ID：12768932
> 
> 赞同：0
> 
> 时间：2012-10-07T12:41:30.493
> 
> 标签：javascript, math, negative-number

我正在尝试处理一些数学问题，但我无法将负数作为正数。我在不同的变量中有这些数字；

```
330 3106 -2776 
```

我需要 330、3106 和 2776，这样我才能执行此语句（但显然它们将是 vars！）；

```
if((2776 + 330) == 3106){ 

} 
```

我可以在 if 语句中使用速记或快速方法来执行此操作吗？我宁愿不必做更多的变量来做到这一点......

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T12:44:10.073

使用[`Math.abs()`功能](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/abs)：

```
if((Math.abs(-2776) + 330) == 3106){ 
  //...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T12:44:08.247

您可以[`Math.abs()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/abs)在数字上使用以确保它是正数。

```
Math.abs(-123);  // 123

Math.abs(123);   // 123 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T12:45:53.877

你可以使用`Math.abs()`方法。

```
Math.abs(-2276) === 2276 
```

# haskell - 蜘蛛纸牌画面的 Haskell 表示

> ID：12768935
> 
> 赞同：1
> 
> 时间：2012-10-07T12:41:48.413
> 
> 标签：haskell, data-structures, indexing

我正在研究一个蜘蛛纸牌玩家的 Haskell 实现，既作为学习 Haskell 的练习，又试图找到一个好的玩家算法。

我正在寻找由未处理的甲板、堆栈和基础组成的画面的有效表示。

对于卡片组，最明显的表示是`[Card]`where`Card`是代数数据类型：

```
data Rank = Ace
          | Two
          | Three
          | Four
          | Five
          | Six
          | Seven
          | Eight
          | Nine
          | Ten
          | Jack
          | Queen
          | King
          deriving (Bounded, Enum, Eq, Ord)

data Suit = Clubs
          | Diamonds
          | Hearts
          | Spades
          deriving (Bounded, Enum, Eq, Ord)

data Card = Card
  { rank   :: Rank
  , suit   :: Suit
  , faceUp :: Bool
  } deriving (Bounded, Eq, Ord)

-- I omitted the instance Show ... implementations 
```

基础（已完成的花色）可以表示为一个`[(Card King suit True)]`或简单的`Int`已完成花色的计数，因为确定获胜游戏只需要确认基础大小为 8。

堆栈（游戏中的牌）的最佳表示是我正在努力解决的部分。如果我在 Scala 或 Clojure 中编写此代码，我可能会使用不可变（持久）`Vector`的`[Card]`. 向量允许使用列表推导快速索引查找卡片列表以进行合法移动计算。卡片列表以最上面的卡片（面朝上）作为列表的头部存储。将卡片从一个列表移动到另一个列表可以通过 drop 和 prepend 或 cons 的组合来完成。

在 Haskell 中，我不确定这是否最好表示为卡片列表列表或卡片列表数组，或者我尚未找到的其他一些数据结构。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T12:53:18.297

听起来该[`Vector`软件包](http://www.haskell.org/haskellwiki/Numeric_Haskell%3a_A_Vector_Tutorial)适合您的`[Card]`s 集。但是，只有少数堆，所以没关系 - 如果您必须浏览长度为 8 的列表，您的应用程序不会无响应，因此请选择您认为更可取的内容。鉴于数量很少，我不确定您选择的内容是否至关重要。

选项：

*   矢量 - 首选，但您可能会认为它是矫枉过正
*   列表 - 使用`!!`等。为此目的不是很慢，熟悉，但阅读 CAMcCann 的答案。我不应该让你养成坏习惯！
*   直接使用数组
*   抽象数据类型`data Piles = Piles [Card] [Card] [Card] [Card] [Card] [Card] [Card] [Card]`——不太方便
*   元组`([Card],[Card],[Card],[Card],[Card],[Card],[Card],[Card])`- 不是很方便

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T16:34:55.397

AndrewC 是正确的，在这种尺寸下，您几乎可以使用任何东西，而且效果会很好。到处使用列表通常是一个合理的起点，也是一个合理的默认值。但我怀疑您还想知道 Haskell 中的惯用方法是什么，并且索引到列表中很少是惯用的（或根本不是一个好主意）。

对于堆栈的集合，您需要索引访问；它们只是偶然的序列。这里的一个[很好的默认值是`Data.IntMap`](http://hackage.haskell.org/packages/archive/containers/0.5.0.0/doc/html/Data-IntMap.html)，它是一个由 trie 表示的键值集合，这意味着查找时间受键大小的限制（哈希表具有相似的特征，因为计算哈希函数也与键大小成正比）。

这里有许多可能的结构的一个小烦恼是您必须检查索引是否是有效堆栈。因此，另一种选择是创建一个枚举类型`data Stack = Stack1 | Stack2 | ...`，而不是使用`Data.Map`，它是一个二叉搜索树，使用`Stack`as 键和卡片集合作为值。这样，每个可能的键都是一个有效的堆栈，只要你初始化第`Map`一个，你就可以安全地假设你需要的任何值都存在。

要么 要么`IntMap`比`Map`使用堆栈列表、大型元组或任何类似的东西都更可取。

对于单个堆栈，我实际上会考虑将它们与正面卡片一起存储为列表中的*最后一个*元素 - 因为您可以将有效的卡片序列移动在一起，按该顺序存储卡片意味着您可以简单地在列表，而不是不断地遍历和重建列表。

另一种选择是将牌序列表示为单个值（花色、最低牌、最高牌），然后可以在以后移动或拆分。

一种更通用的方法，它完全避免选择列表方向，是[使用`Data.Sequence`instead](http://hackage.haskell.org/packages/archive/containers/0.5.0.0/doc/html/Data-Sequence.html)，它是一种顺序（显然）数据结构，两端都有高效的操作。

请注意，我建议的所有三种类型都来自同一个包，这是一个标准库，如果列表不适合您的需要，通常应该首先寻找纯数据结构。

* * *

**编辑：**关于“向量”类型主题的附录：[Haskell 中经常使用](http://hackage.haskell.org/package/vector)[的`vector`](http://hackage.haskell.org/package/vector)包是通常意义上的向量数据结构，即一维数组，具有恒定时间索引，不可变的全或全更新`Vector`s，以及对按顺序生成和使用的向量的一些很好的优化。

然而，据我所知，Scala 和 Clojure 中使用的“持久向量”*并不是*通常意义上的简单不可变向量。相反，它们是一种更复杂的数据结构，旨在尽可能接近实际使用中*可变*向量的预期性能。实际的实现似乎是一个在每个节点上都有小数组的 trie；这类似于`Data.IntMap`，但针对类似数组的使用（有限范围内的许多值）而不是键值样式的使用（存储在任意索引处的稀疏数据）进行了优化。

# android - Eclipse 没有定义一个类

> ID：12768936
> 
> 赞同：0
> 
> 时间：2012-10-07T12:41:49.113
> 
> 标签：android, eclipse

有以下类：

```
private class SimpleExistedTasksAdapter<CalendarTask> extends ArrayAdapter<CalendarTask> {

    private Context context;
    private List<CalendarTask> tasks;

        public SimpleExistedTasksAdapter(Context context,
                int textViewResourceId, List<CalendarTask> objects) {
            super(context, textViewResourceId, objects);

            this.context=context;
            this.tasks=objects;
        }

        @Override
        public View getView(int position, View view, ViewGroup group) {
            LayoutInflater inflater=LayoutInflater.from(context);
            View v=inflater.inflate(R.layout.existed_tasks_item_layout, null);
            CalendarTask task=tasks.get(position);
            TextView priorityView=(TextView)v.findViewById(R.id.textViewPriorityColorIndicator);
            TextView title=(TextView)v.findViewById(R.id.textViewTaskTitle);
            task.getPriority();
            return null;
        }
} 
```

我遇到了以下问题：CalendarTask 类有 getPriority() 方法，但 Eclipse 告诉我“任务”只是对象，不包含除对象之外的任何方法（CalendarTask 有导入）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-07T12:59:35.797

自从我搞砸 Java 以来已经有一段时间了，但请检查 CalendarTask.get 方法的返回类型。我怀疑您可能需要在行中执行从 Object 到 CalendarTask 的转换：

```
CalendarTask task=tasks.get(position); 
```

如果我没记错的话，代码应该是这样的：

```
CalendarTask task = (CalendarTask)tasks.get(position); 
```

# c - 内核代码中的c语法及其工作

> ID：12768942
> 
> 赞同：0
> 
> 时间：2012-10-07T12:42:49.487
> 
> 标签：c, linux, linux-kernel, kernel

我对 linux 内核代码中使用的语法有疑问。我对它的作用有直觉，但我想更正式地了解它。我正在使用内核`v3.5.4`

在文件`/include/linux/sched.h`中定义了以下内容

```
struct task_struct {
    volatile long state;
    //some more data members
}; 
```

并且在文件`/include/linux/init_task.h`文件中定义了以下内容：

```
#define INIT_TASK(tsk) {
    .state     = 0,               \
    //some more initializations

} 
```

我对两件事感到困惑：

a）我觉得它用于初始化，但任何人都可以建议一些关于这种类型的结构初始化的好读物。

b）我不明白以下初始化是如何工作的。就像 this`#define`和相应的`task_struct`结构是如何相关的。

[编辑] 我还注意到以下几点：c）`\`在每行必要的末尾。

d) 内核的许多部分都包含在`#ifdef #endif`. 如果要初始化包装的数据成员，`#ifdef #endif`我们可以使用这种形式的初始化。我的意思是我们可以像这样使用`#ifdef #endif`inside`INIT_TASK()`

```
#define INIT_TASK(tsk) {
    .state     = 0,               \

    //some more initializations
    #ifdef CX 
    .tickets   = 5,               \
    #endif

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T12:45:28.473

```
struct task_struct whatever = INIT_TASK(someTsk); 
```

这导致以下代码：

```
struct task_struct whatever = { .state = 0 }; 
```

这是通过名称而不是位置初始化结构中字段的有效 C 语法。这样做可以使代码对未添加到最后位置的结构成员安全。

关于反斜杠：是的，它们是必要的，因此预处理器知道宏在下一行继续。

不，您不能`#ifdef`在宏中使用。

# compilation - 尝试使用 CMakeLists.txt 构建 OpenNI 示例但出现错误

> ID：12768945
> 
> 赞同：0
> 
> 时间：2012-10-07T12:43:18.207
> 
> 标签：compilation, cmake, openni

我用自己的 CMakeLists.txt 文件来构建 OpenNI 示例。我成功构建了 NiSimpleViewer。但是当尝试使用 NiUserTracker 我得到这个错误：

```
35 warnings generated.
Linking CXX executable main
ld: warning: path '/usr/lib/libOpenNI.dylib' following -L not a directory
Undefined symbols for architecture x86_64:
  "DrawDepthMap(xn::DepthMetaData const&, xn::SceneMetaData const&)", referenced from:
      glutDisplay() in main.cpp.o
  "MyPoseInProgress(xn::PoseDetectionCapability&, char const*, unsigned int, XnPoseDetectionStatus, void*)", referenced from:
      _main in main.cpp.o
  "MyCalibrationInProgress(xn::SkeletonCapability&, unsigned int, XnCalibrationStatus, void*)", referenced from:
      _main in main.cpp.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [main] Error 1
make[1]: *** [CMakeFiles/main.dir/all] Error 2
make: *** [all] Error 2 
```

这是我使用的 CMakeLists。请告诉我它有什么问题？

[http://pastebin.com/SMYjjU35](http://pastebin.com/SMYjjU35)

build/ 外部文件夹的内容是

```
CMakeLists.txt  Libs            build           opengles.cpp
GL              SceneDrawer.cpp glh             opengles.h
GLES            SceneDrawer.h   main.cpp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:25:59.840

我想，是因为这条线：

```
link_directories(${OPENNI_LIBRARY}) 
```

该`link_directories()`命令设置应搜索库的路径，因此您需要类似的内容`${OPENNI_LIBRARY_DIRS}`。

# mysql - 导出mysql数据库的表以插入不同的数据库

> ID：12768946
> 
> 赞同：0
> 
> 时间：2012-10-07T12:43:18.437
> 
> 标签：mysql, phpmyadmin

我有一个在我的本地主机上运行的 wordpress 实例。为了将此移动到另一台服务器，我想将此数据库的内容导出到 sql 文件。但是，我没有创建新数据库的权限，我有一个现有的数据库，我想在其中插入表和其中的所有行。有没有办法告诉 phpmyadmin 以将所有内容都插入到这个新数据库中的方式导出数据？还是只在 sql 文件中进行查找/替换会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:20:17.703

实际上，如果您在 phpmyadmin 中选择数据库，它会显示包含的所有表。如果您选择在该阶段导出，它将默认（实际上取决于其版本）导出所有表结构和数据，而无需创建数据库。此外，它确实为您提供了仅导出数据的选项。

# javascript - 如何使用javascript调整div宽度

> ID：12768948
> 
> 赞同：4
> 
> 时间：2012-10-07T12:43:26.203
> 
> 标签：javascript

我想用 javascript 调整 pagewrapper div 的大小。我有 chrome 并想将其用作用户脚本。这是网站链接：[http](http://clanbase.ggl.com) ://clanbase.ggl.com 。我想将页面包装器设为 100% 宽度。我有以下代码：

```
// ==UserScript==
// @match http://clanbase.ggl.com/*
// ==/UserScript==

function addJQuery(callback) {
var script = document.createElement("script");
script.setAttribute("src", "http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js");
script.addEventListener('load', function() {
var script = document.createElement("script");
script.textContent = "(" + callback.toString() + ")();";
document.body.appendChild(script);
}, false);
document.body.appendChild(script);
}

function pagewrapper() {
document.getElementById('pagewrapper').style.Width = "100%";
}

addJQuery(pagewrapper); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T13:11:04.993

需要注意的一点是，非绝对定位的分隔元素会自动占据 100% 的宽度，因此您可能不需要做任何事情。只需尝试从`pagewrapper`元素中删除 width 属性（在 CSS 中），看看它是否有效。您也可以尝试覆盖 width 属性：

```
#pagewrapper {
    width:100%;
} 
```

如果由于某种原因无法设置 CSS，则此脚本就足够了：

```
function pagewrapper() {
    document.getElementById('pagewrapper').style.width = "100%";
} 
```

# ruby-on-rails - 从 Ruby on Rails 中的哈希映射数组中获取排序的最常见对象

> ID：12768950
> 
> 赞同：3
> 
> 时间：2012-10-07T12:43:34.470
> 
> 标签：ruby-on-rails, sorting

我正在寻找从包含哈希图的数组中获得排序最常见的结果。hashmap 数据是非数字的，因此：

```
line_value = {'date' => date, 'name' => name, 'url' => url } 
```

我可以在哪里获取最常见的网址。我考虑使用 SQL 来获取计数，对它们进行排序并完成它，但我认为在直接 ruby​​ 中可能有一种更快的方法来完成它，因为数组和哈希图不在数据库中，需要放在那里首先。

所以我正在寻找非 SQL 方法来做到这一点。请注意，我不仅要查找最常见的结果（单数），还要查找前 5 或 10 个常见结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:02:23.633

首先要做的是建立数组中唯一 url 的计数。我更喜欢`each_with_object`这样`inject`做（您不必在每一步都返回哈希）：

```
url_count = items.each_with_object(Hash.new(0)) do |item, count|
  count[item['url']] += 1
end

# => {'example.com' => 1, 'facebook.com' => 4, 'twitter.com' => 2, ...} 
```

然后你想把它变成一个键数组，按值排序。使用`Array#sort_by`会做得很好，但它是按升序排序的。您可以取*最后*N 个项目，并将它们反转：

```
top_urls = url_count.keys.sort_by!{|url| url_count[url]}.last(5).reverse! 
```

或者您可以否定计数，以便将最高数字排序到前面：

```
top_urls = url_count.keys.sort_by!{|url| -url_count[url]}.first(5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:16:47.597

怎么样

```
most_common_urls = line_value['url'].sort[0..9] 
```

改变

> [0..5]

到您需要的任何数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T14:06:41.747

```
urls.map {|u| u["url"]}.inject(Hash.new(0)) {|k,v| k[v] += 1; k}.rank.sort_by {|k,v| v}.last(5).reverse 
```

或者：

```
urls.group_by {|k|{ :u => k["url"], :q => 0}}.map {|k,v| k[:q] = v.count; k}.sort_by {|k| k[:q]}.last(5).reverse 
```

# java - Java Contains 方法即使在定义等于之后也返回 false

> ID：12768952
> 
> 赞同：1
> 
> 时间：2012-10-07T12:43:38.013
> 
> 标签：java

我有一个坐标类和一个坐标列表。我已经覆盖了坐标类的 equals 方法，但是当我在坐标列表中使用 contains 时，对于列表中的坐标，我得到 false。有没有人知道我哪里出错了？x 和 y 值是整数。

```
public boolean equals(Coordinate c){
        return (this.x == c.getxCoordinate() && this.y == c.getyCoordinate());
    } 
```

清单如下：

```
List safe_locs = new ArrayList<Coordinate>(); 
```

测试如下：

```
System.out.println(c);
System.out.println(safe_locs.contains(c));
System.out.println(safe_locs); 
```

输出是：

```
Coordinate[x: 0, y: 0]
false
[Coordinate[x: 0, y: 0], Coordinate[x: 1, y: 0], Coordinate[x: 0, y: 1], Coordinate[x: 3, y: 0], Coordinate[x: 0, y: 3]] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T12:47:50.947

您的`equals()`方法正在*重载* [`equals(Object)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)，而它应该*覆盖*它：

```
@Override
public boolean equals(Object o){
    if(!(o instanceof Coordinate)) {
        return false;
    }
    Coordinate c = (Coordinate)o;
    return (this.x == c.getxCoordinate() && this.y == c.getyCoordinate());
    } 
```

不幸的是，您必须使用向下转换。注意[`@Override`](http://docs.oracle.com/javase/7/docs/api/java/lang/Override.html)注释 - 将来使用它来避免此类问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T12:54:16.180

我知道很多读者会发现这种`equals`实现风格过于简洁，但`equals`它是一种非常标准的全样板方法，一旦你实现了几百个，你就会越来越喜欢这种风格：

```
@Override
public boolean equals(Object o) {
   Coordinate that;
   return this == o || o instanceof Coordinate 
     && this.x == (that = (Coordinate)o).getxCoordinate() 
     && this.y == that.getyCoordinate();
} 
```

关键是，无论您始终使用哪种实现风格，您很快就会停止查看详细的程序逻辑，而只会注意到显着特征：哪些字段参与以及它们通过什么方式进行比较。一旦达到这一点，这种实现的简洁性就会大放异彩。如果您再次怀疑存在错误，请再次减少代码，减少检查它的工作量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T12:52:02.660

我认为你已经**重载**了`equals()`方法**而不是覆盖**它..

```
public boolean equals(Object o){

    if(!(o instanceof Coordinate)) {

        return false;
    }
    else{
    Coordinate c = (Coordinate)o;
    return (this.x == c.getxCoordinate() && this.y == c.getyCoordinate());
    }

    } 
```

# symfony - Symfony2，dql 不适用于 REPEAT 功能

> ID：12768966
> 
> 赞同：0
> 
> 时间：2012-10-07T12:45:37.250
> 
> 标签：symfony, doctrine-orm, dql

```
public function mpttLocationList() {
        $q = $this->_em->createQuery("
        SELECT CONCAT(REPEAT('.', COUNT(parent.region_name) - 1), node.region_name) AS name
        FROM ViveListingBundle:region_redefine AS node,
                ViveListingBundle:region_redefine AS parent
        WHERE node.lft BETWEEN parent.lft AND parent.rgt
        GROUP BY node.region_name
        ORDER BY node.lft");
        return $q->getResult();
    } 
```

上面的代码给出了错误：

```
[Syntax Error] line 0, col 23: Error: Expected known function, got 'REPEAT'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:25:03.063

`REPEAT`不是有效的 DQL 函数。请记住，DQL 不是 SQL，它看起来很相似，但有重要区别，并且不支持所有 SQL 结构。查看 DQL 文档以了解支持的内容：

[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T06:51:49.667

To teach Doctrine about `REPEAT()`, you need to [define a custom DQL function](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/dql-user-defined-functions.html) and [register it with Symfony](http://symfony.com/doc/current/cookbook/doctrine/custom_dql_functions.html).

# jquery - 如何射击砌体重装两次？

> ID：12768970
> 
> 赞同：0
> 
> 时间：2012-10-07T12:45:54.173
> 
> 标签：jquery, events, plugins, reload, jquery-masonry

我对 jQuery 还是很陌生，所以请多多包涵……
我正在使用 masonry 插件，这是我的代码——</p>

```
$(document).ready(function(){
      $(".pics-hidden").hide();

      $('.pics').click(function() {
            $('#div'+$(this).attr('rarget')).addClass('pics').removeClass('#div'+$(this).attr('rarget')).delay(600).fadeIn(400);
            $('#projectimages').masonry('reload');
      });

      $('.close').click(function() {
            $('#div'+$(this).attr('larget')).addClass('.pics-hidden').removeClass('#div'+$(this).attr('larget')).delay(600).fadeOut(400);
            $('#projectimages').masonry('reload');
            return false;
      });
}); 
```

单击 .pics 将通过更改类显示隐藏的 div 并重新加载砌体插件，但是当您尝试使用关闭按钮 (.close) 关闭这些 div 时，div 成功关闭，但砌体这次没有重新加载并离开一个空格。

这是我正在处理的模板 - [www.nealfletcher.co.uk/testingtesting](http://www.nealfletcher.co.uk/testingtesting)
所以我想知道是否可以触发 .masonry('reload') 两次，或者任何其他可以解决问题的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:54:21.263

我还没有真正研究过砌体的实际作用，但你可能想搬家`$('#projectimages').masonry('reload');`

前

```
return false; 
```

in`$('.close').click(function() {...});`因为在 return 语句之后没有执行任何操作。

**编辑：（**关闭时删除“图片”类）

```
$('.close').click(function() {
      $('#div'+$(this).attr('larget')).removeClass('pics').addClass('.pics-hidden').removeClass('#div'+$(this).attr('larget')).delay(600).fadeOut(400);
      $('#projectimages').masonry('reload'); 
      return false;      
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:43:25.543

你可以尝试添加

```
$(".pics-hidden").hide();
```

在关闭按钮和砌体重新加载之前？我有一个类似的问题，我完全不同地解决了它。我希望它有所帮助。但它现在似乎起作用了。看不出缝隙？

# codeigniter - 使用 HMVC 路由管理控制器

> ID：12768973
> 
> 赞同：0
> 
> 时间：2012-10-07T12:46:12.963
> 
> 标签：codeigniter, hmvc

我对 HMVC 有疑问

我的所有模块中都有这样的管理控制器

```
- 模块

 - 用户
     - 控制器
         - 管理员.php
         - 用户.php
     - 意见
         - admin_create_user.php
         - admin_view_users.php
         - 注册.php
         - 登录.php

 - 消息
     - 控制器
         - 管理员.php
         - 新闻.php
     - 意见
         - admin_disply_news.php
         - admin_create_news.php
         - view_news.php

```

* * *

现在，当转到用户管理员时，URL 将链接到这个

*   domain.com/users/admin/method 。
*   domain.com/news/admin/method 。

但我需要它

*   **domain.com/admin/users/method**
*   **domain.com/admin/news/method**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-09T18:34:53.720

将这些代码添加到 "core/MY_Router.php" 内 "MY_Router" 类 - *(class MY_Router extends MX_Router {** ---code goes in here-- **})*

我尝试使用路由规则和 .htaccess 来做到这一点，但它们都不起作用。然后我编辑 MX_Router 代码并完美运行，但要注意一件事，您必须在模块的控制器调用“ **admin** ”上创建一个子文件夹，并将控制器放在那里像这样工作，因为这样您可以使用默认路由如果控制器名称与模块名称相同，则直接调用控制器。

```
public $module;
private $located = 0;

protected function _set_request($segments = array()){
    $segments = $this->_validate_request($segments);
    // If we don't have any segments left - try the default controller;
    // WARNING: Directories get shifted out of the segments array!
    if (empty($segments))
    {
        $this->_set_default_controller();
        return;
    }

    if ($this->translate_uri_dashes === TRUE)
    {
        $segments[0] = str_replace('-', '_', $segments[0]);
        if (isset($segments[1]))
        {
            $segments[1] = str_replace('-', '_', $segments[1]);
        }
    }

    if($segments[0] == 'admin' && isset($segments[1])){
        if (isset($segments[2])){
            $this->set_method($segments[2]);
            $segments[2] = $segments[2];
        }else{
            $this->set_method('index');
            $segments[2] = 'index';
        }
        $this->directory    = '../modules/'.$segments[1].'/controllers/admin/'; 
        $this->module       = $segments[1];
        $this->class        = $segments[1];

        $segments[1] = $segments[1];

        unset($segments[0]);
        $this->uri->rsegments = $segments;
    }else{
        $segments = $this->locate($segments);

        if($this->located == -1)
        {
            $this->_set_404override_controller();
            return;
        }

        if(empty($segments))
        {
            $this->_set_default_controller();
            return;
        }

        $this->set_class($segments[0]);

        if (isset($segments[1]))
        {
            $this->set_method($segments[1]);
        }
        else
        {
            $segments[1] = 'index';
        }

        array_unshift($segments, NULL);
        unset($segments[0]);
        $this->uri->rsegments = $segments;  
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:59:44.503

您可以尝试将其添加到您的路线配置文件中：

```
$route['domain.com/admin/users/(:any)'] = 'domain.com/users/admin/method';
$route['domain.com/admin/news/(:any)'] = 'domain.com/news/admin/method'; 
```

当用户键入**domain.com/admin/users/method**时，它将调用**用户**控制器。

[文档](http://codeigniter.com/user_guide/general/routing.html)

# html - 覆盖一个 DIV in IE 8 I am not able to overlap a DIV over Embedded Text file in IE-8\. This works in IE-9, Firefox. I have tried using WMODE-Transaprent,Opaque and Z-Index properties. 问问题 问问题 2012-10-07T12:47:21.990 454 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am not able to overlap a DIV over Embedded Text file in IE-8\. This works in IE-9, Firefox. I have tried using WMODE-Transaprent,Opaque and Z-Index properties. Following is my code.If I try to embed a .WAV or .SWF file, the DIV is overlayed in IE-8, but the same does not happen with text/html. Null-able foreign key; Entity Framework 5.0 model-first I'm using Entity Framework 5.0 model-first approach using Visual Studio 2012 Express. I have a scenario to generate a nullable foreign key. For example, there are two entities – Organization and User. Not all users will belong to an organization. However, some users would belong to an organization. The User.Organization_ID column is always not null in spite of changing the multiplicity. Please help me to resolve this issue. Appreciate it. htmltextinternet-explorer-8overlap 4 0 回答 0 Related 1 php - 如何使用 My_Model (Codeigniter) 执行 MySQL 函数？ 2 c# - 如何从 SQL 中查询与数组成员比较？ 1 jakarta-ee - 如果用户尚未通过 Java EE 中的 Web 模块对自己进行身份验证，那么 EJBContext#getCallerPrincipal() 将返回什么？ 4 android - 使用浏览器包装器将现有的 Web 应用程序移动到本机手机应用程序中 1 mysql - MySQL全文关键字/短语 2 android - 在列表视图中映射片段？ 2 jquery - 查询 window.onbeforeunload 1 javascript - Changing Javascript attribute (inline in HTML) based on screensize - like CSS Media Queries 1 lisp - how to get the number of arguments supplied to a lisp function 1 c++ - 时钟（）如何在 访问系统时钟？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12768978
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html, text, internet-explorer-8, overlap

I am not able to overlap a DIV over Embedded Text file in IE-8\. This works in IE-9, Firefox. I have tried using `WMODE-Transaprent,Opaque` and `Z-Index` properties.

Following is my code.

```
<object data="abc.txt" type="text/html" width="300" height="200" > </object>

<div id="div1" style=" background:green; position:absolute; width:100%; height:100%; top:0px; left:0px; filter:alpha(opacity=50)"></div> 
```

If I try to embed a `.WAV` or `.SWF` file, the `DIV` is overlayed in IE-8, but the same does not happen with `text/html`.

# entity-framework - 可以为空的外键；实体框架 5.0 模型优先

> ID：12768987
> 
> 赞同：0
> 
> 时间：2012-10-07T12:48:46.807
> 
> 标签：entity-framework

我正在使用使用 Visual Studio 2012 Express 的 Entity Framework 5.0 模型优先方法。我有一个场景来生成一个可为空的外键。例如，有两个实体 -`Organization`和`User`。并非所有用户都属于一个组织。但是，某些用户可能属于某个组织。尽管改变了多重性，但该`User.Organization_ID`列始终存在。`not null`请帮我解决这个问题。欣赏它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T18:04:32.940

更改多重性 0..1 --> * (many) 解决了这个问题。即 0 或 1 个组织可以有 0 个或多个用户。这样，用户表中的organizatio_id 就生成为可空列！感谢大家的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T12:51:45.350

```
[ForeignKey("Organisation")]
public int? Organisation_ID { get; set; }

[ForeignKey("Organisation_ID")]
public virtual Organisation Organisation { get; set; } 
```

# java - 从 ComboBOX 值更新 AuthorID

> ID：12768988
> 
> 赞同：-1
> 
> 时间：2012-10-07T12:49:33.637
> 
> 标签：java, sql, database, swing, jcombobox

我有以下 sql 表：

作者：

```
Id           Name

2         John Smith 
```

图书：

```
Id        AuthorID       Title
 1           2          Shreak 
```

我正在尝试通过一个 GUI 将更多书籍添加到书籍表中，该 GUI 有一个下拉框来显示作者表中的作者和一个用于输入新书的文本框和一个保存按钮。以下是对应保存按钮的：

```
pprivate void save_bookActionPerformed(java.awt.event.ActionEvent evt) {

    try {

        String sql = "INSERT into books (AuthorId,Title) VALUES (?,?)";
        pst = con.prepareStatement(sql);
       pst.setInt(1, author_name_combo.getSelectedItem());
        pst.setString(2, book_name.getText());

        pst.executeUpdate();
        JOptionPane.showMessageDialog(null, "New Book has been added");
    } catch (Exception e) {
        JOptionPane.showMessageDialog(null, e);
    }

}

private void FillCombo(){ 

    try {

    con = DriverManager.getConnection(url, user, password);
    String sql = "SELECT * FROM Authors";
     pst = con.prepareStatement(sql);
     rs = pst.executeQuery();
     while(rs.next()) {
         String author = rs.getString("Name");
         author_name_combo.addItem(author);  
     }
    } catch (Exception e) {
        JOptionPane.showMessageDialog(null, e);
    }
} 
```

我是一个初学者，我正在努力用新数据填充表格。程序编译，但书籍表显示 NULL 为 AUTHOR ID 和 TITLE。如何正确填充表，以便自动从 Authors 表中查找作者 ID 并从那里给出适当的 ID 号。请注意作者 ID 是书籍表中的外键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:06:33.530

假设您正在使用 Swing（即`JComboBox`和`JTextField`）。

您没有`?`正确地将值分配给变量。首先，`AuthorID`是一个整数，您需要分配作者的 ID，而不是选定的文本。

一种解决方法是创建自己的简单类来保存作者的 ID 和姓名，并使用相应的`toString()`方法：

```
class OneAuthor extends AbstractMap.SimpleEntry<Integer, String> {
    public OneAuthor(Integer id, String name) {
        super(id, name);
    }

    public String toString() {
        return getValue();
    }
} 
```

然后，当您`JComboBox`使用作者姓名填充时，请使用此类而不是 String：

```
ResultSet rs = con.createStatement().executeQuery("SELECT id, name FROM authors ORDER BY name");

while(rs.next()) {
    author_names_combo.addItem(new OneAuthor(rs.getInt(1), rs.getString(2));
} 
```

然后您可以轻松指定正确的作者 ID：

```
pst.setInt(1, ((OneAuthor)author_name_combo.getSelectedItem()).getKey()); 
```

其次，`getSelectedText()`您需要`getText()`在书名文本字段上使用方法，而不是使用。 `getSelectedText()`只会返回字段中突出显示的文本，而`getText()`将返回整个文本。因此，您的完整代码将如下所示：

```
pst = con.prepareStatement(sql);
pst.setInt(1, ((OneAuthor)author_name_combo.getSelectedItem()).getKey());
pst.setString(2, book_name.getText()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:53:44.227

如果您`AuthorID`是数据库中的类型`INTEGER`，那么问题是您`String`在此语句中为其插入值`pst.setString(1, author_name_combo.getName());`

# java - 什么是构建应该在 OSGI 和非 OSGI 环境中工作的库的好方法？

> ID：12768989
> 
> 赞同：2
> 
> 时间：2012-10-07T12:49:49.417
> 
> 标签：java, osgi, equinox

我正在编写一个在 OSGI 环境中运行的应用程序。现在我想提取一些代码并将其放在单独的 bundle/jar 文件中，以便在其他应用程序（OSGI 或非 OSGI）中重用它。

我的目标是删除对 OSGI 环境类的任何依赖项，因为它还应该在其他应用程序中运行，这些应用程序没有各种 OSGI 框架的所有 jar（例如 Equinox）。但同时，如果应用程序是 OSGI 应用程序，我想在 OSGI 环境中注册一个 OSGI 服务。

我已经分离了代码，目前唯一剩下的依赖于 OSGI 的代码是我的 Activator 类，它将一些类注册为 OSGI 服务：

```
context.registerService(MyServiceInterface.class.getName(), new MyServiceImpl(), new Hashtable()); 
```

为了消除依赖，我考虑了以下几点：

*   我从 bundle1 中删除了 Activator 和 OSGI 依赖项
*   我创建了另一个 bundle2，我在其中移动了 Activator

最后，我得到了我的 bundle1.jar，它只有一个 Manifest.mf 文件以使其支持 OSGI，但根据 OSGI 框架类，不再有代码。我有另一个包，它只属于我当前的应用程序，它导入 bundle1.jar 并且唯一的目的是使用激活器在 OSGI 容器上注册 MyService.class。

1.  这种方法可以吗，还是有其他最佳实践？
2.  在 OSGI 环境中注册服务是好的做法，还是主机应用程序始终应负责的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:53:29.247

为什么不把激活器类留在你的包中。在非 OSGi 环境中运行时，不会调用激活器类。在 OSGi 环境中运行时，它会。将您的 OSGi 依赖项与激活器隔离是一个很好的策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:23:24.390

在大多数情况下，您可以在没有 Activator 的情况下发布您的服务。查看[OSGI 社区 Wiki](http://wiki.osgi.org/wiki/Declarative_Services)和[Equinox 示例](http://eclipsesource.com/blogs/2009/05/12/osgi-declarative-services/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T08:00:25.590

另一种方法是使用蓝图。至少在简单的情况下，它允许完全不依赖于 OSGi。对于现实世界的情况，您通常至少需要一些 OSGi API，但在非 OSGi 情况下让它们简单地处于非活动状态是没有问题的。

您可能还想尝试[PojoSR](http://code.google.com/p/pojosr/)。它允许在 OSGi 之外使用激活器和 OSGi 服务。我们开始在 Apache Camel 中使用它来测试 OSGi 代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T05:11:30.627

使用 Spring-DM 将有助于消除对 OSGi 的代码依赖。您的捆绑包不需要激活器，并且可以从 spring-dm config xml 导出服务。但是，这确实添加了更多运行时依赖项，但不需要编译依赖项。

# java - Vaadin TextArea keyboard listener consume event

> ID：12768991
> 
> 赞同：0
> 
> 时间：2012-10-07T12:50:07.920
> 
> 标签：java, vaadin

I need a customized TextArea component, where I'd like disable some keys (f.e. backspace and del keys). For this I created a vaadin-archetype-widget artifact, and I created two subclasses (MyTextArea and VMyTextArea), and I overrode the onKeyDown method in class VMyTextArea:

```
@Override
public void onKeyDown(KeyDownEvent event) {
    int kc = event.getNativeKeyCode();
    if (kc == KeyCodes.KEY_BACKSPACE || kc == KeyCodes.KEY_DELETE) {
        return;
    }
    super.onKeyDown(event);
} 
```

Unfortunately this solution doesn't solve my problem, the backspace and delete keys work normally. My question how to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:48:58.017

解决方案：

```
public class VMyTextArea extends VTextArea {

    VMyTextArea() {
        super();
        addKeyDownHandler(new KeyDownHandler() {
            public void onKeyDown(KeyDownEvent event) {

                int kc = event.getNativeKeyCode();
                if (kc == KeyCodes.KEY_BACKSPACE || kc == KeyCodes.KEY_DELETE) {
                    event.preventDefault();
                }
            }
        });

    }
} 
```

# asp.net - SQL：如果记录不存在则插入记录的最佳实践

> ID：12768992
> 
> 赞同：0
> 
> 时间：2012-10-07T12:50:37.187
> 
> 标签：asp.net, sql-server

我有一个 asp.net Gridview，它处理向 SQL 数据库中的插入操作。只有满足唯一性条件的记录才允许插入，并且使用 SQL Server 中的唯一索引强制执行此约束。如果用户尝试插入已存在的记录，则会显示错误消息。

我想知道实现这一点的最佳实践是什么。

1.  检查记录是否存在 SQL 端，使用 IF EXISTS 和锁定提示（updlock、holdlock 等）。根据是否插入记录，向 ASP.net 返回错误代码
2.  在 SQL Server 的 try/catch 块内执行 INSERT 操作，如果记录存在，则依靠唯一索引来防止插入发生。根据是否引发异常返回错误代码。
3.  在 SQL 端执行 INSERT 操作，但没有 SQL try/catch。改为在 ASP.net 中处理 PK 违规异常。

通常我会考虑使用异常来处理有效操作是不好的做法——即软件不应该抛出异常，除非有什么东西坏了。但是，如果 SQL 中表上的唯一索引要实现所需的约束，为什么还要手动检查记录的存在呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:30:17.540

我会单独打电话来检查记录是否已经存在。如果是，则向用户显示消息，如果没有则插入。我这样做的原因是因为我更喜欢将所有业务逻辑保留在应用程序中。

如果您坚持只进行一个存储过程调用：

我会在插入之前检查。如果插入不成功，我还将向存储过程添加一个输出参数，该参数将返回一条消息。在我的应用程序中，如果我在输出参数中看到一条消息，我会将其显示给用户。

# actionscript-3 - Flash AS3：自发的 5001 错误，与文件夹的字母大小写有关

> ID：12768997
> 
> 赞同：0
> 
> 时间：2012-10-07T12:51:29.110
> 
> 标签：actionscript-3, flash, uppercase, lowercase

更新 .fla 库中的一些声音文件后，我开始为不相关文件夹中的每个文件收到 5001（包名称不反映位置）错误。
我了解 5001 错误，在开发过程中多次出现，但通常是包拼写错误或文件位于错误文件夹中的情况。然而，这里似乎是某种字母大小写问题。

在“编译器错误”输出的“位置”部分，它将每个错误的位置（即 /options/ 文件夹中的每个类）列为“C:\Users...\powerups\Options\ClassName.as "，注意大写的 \Options。

但是，当我查看 /options/ 文件夹中任何文件的 (Windows) 属性时，它会确认该文件夹是小写的，并将其位置列为“C:\Users...\powerups\options”。
当我让 Flash 自动建议包路径时，它只是建议它已经是什么。

我有一次修复了它，没有通过关闭 Flash 并重新打开来改变任何东西，但是在几次成功编译后它又开始出现了。从那以后没有任何运气 - 尝试重新创建一个新文件夹，让 Flash 重新创建项目文件，然后重新启动。

我相当肯定我没有更改任何相关代码——我一直在做的唯一一件事就是向库中添加一些声音片段并更新旧的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:45:05.187

您确定在 Flash IDE 的“高级 ActionScript 3.0 设置”选项卡中设置正确吗？也许[这个链接](http://ayumiloveflash.wordpress.com/2010/09/14/actionscript-error-5001-the-name-of-package-does-not-reflect-the-location-of-this-file/)对你有用。