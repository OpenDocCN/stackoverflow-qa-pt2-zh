# StackOverflow 问答 12888000-12888999

# php - 使用 mysqli 方法将人员对象加载到数组中

> ID：12888000
> 
> 赞同：0
> 
> 时间：2012-10-15T00:49:07.273
> 
> 标签：php, mysqli

我正在尝试使用 mysqli_result::fetch_object 方法将存储在我的数据库中的人员加载到 Person 对象中，然后将它们打印存储在一个数组中，以便我可以将数组打印为 HTML 表

我在第 84 行的非对象错误上不断收到对成员函数的调用。当我在 $row 上执行 var_dump 时，它会打印出 NULL。谁能告诉我我做错了什么？

索引.php

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link href ="Stylesheet.css" rel="stylesheet" type="text/css">
        <title>Assignment 3</title>
    </head>
    <body>
        <?php
        require ('Person.php');

        //Making an empty array to store Person objects
            $empty = array();

        //Defining parameters for mysqli connect functio

            $p1 = '2011.ispace.ci.edu';
            $p2 = 'username';
            $p3 = 'password';
            $p4 = 'dbname';

        //Connecting to the database and checking to see if it fails        

            $db = new mysqli($p1, $p2, $p3, $p4);
                if ($db->connect_error) 
                {
                    echo "Error Connecting:" . " " . $db->connect_error;
                }

        //Querying the database to get the information from the Person table  

                else 
                {
                $result = $db->query(
                        "SELECT * 
                        FROM Person"
                        );

                        if($result === false){
                            printf($db->error);
                        }

                           var_dump($result);

         //Looping through the rows and storing them in the array

                $totalRows = $result->num_rows;

                if ($totalRows > 0)
                {
                    $emp = 'Person';
                    while($row = $result->fetch_object($emp));
                    {

                        $empty[] = $row;
                        $row++;
                        var_dump($row);

                    }

                }

                }

        //Making the table headers
        echo "<h1>Assignment 3 Incorporated</h1>";
        echo "<table>";

                echo "<tr>";
                echo "<td><strong>Name</strong></td>";
                echo "<td><strong>Title</strong></td>";
                echo "<td><strong>Office</strong></td>";
                echo "<td><strong>Phone Number</strong></td>";
                echo "<td><strong>Email</strong></td>";
                echo "</tr>";

        //Printing out the table with foreach loop

         foreach ($empty as $newPerson) {

                echo "<tr>";

                echo "<td>" . $newPerson-> getfirstName() . " " . $newPerson-> getlastName() . "</td>";
                echo "<td>" . $newPerson-> gettitle() .  "</td>";
                echo "<td>" . $newPerson-> getoffice() .  "</td>";
                echo "<td>" . $newPerson-> getphoneNumber() .  "</td>";
                echo "<td><a href='mailto:" . $newPerson-> getemail() . "'>" . $newPerson-> getemail() .  "</a></td>";

                echo "</tr>";

        }

        echo "</table>"; 

        ?>
    </body>
</html> 
```

人.php

```
<?php

class Person {

   private $firstName;
   private $lastName;
   private $title;
   private $office;
   private $phoneNumber;
   private $email;
   //private $data;

 //Constructor

 /*   public function __construct($name)
  {
    $this-> setname($name);
  }
  */ 
//Interface Methods

//Get/Set Name  
  public function setname($name)
  {
    //using explode function to split name into 2 strings
      $this-> name = $name;
      if(is_string($name)) {

           list($lastName, $firstName) = explode(",",$this -> name); 
           $this->firstName = $firstName;
           $this->lastName = $lastName;  

      }

      else {
          user_error('Error: Persons Name Must Be a String!');
      }

  }

  public function getfirstName()
  {

    return $this-> firstName;  

  }

  public function getlastName() 
  {

    return $this-> lastName;   

  }

public function getname()
  {
    /**
    $nameSplit = explode(",",$this ->name);
    foreach ($nameSplit[1] as $firstName);
    foreach ($nameSplit[0] as $lastName);
    echo $firstName . "," . $lastName;
    return $this-> name; 
    **/
  }

  //Get/Set Title
  public function settitle($title)
  {
    $this-> title = $title;  
  }

  public function gettitle()
  {
      return $this-> title;
  }   

  //Get/Set office
  public function setoffice($office)
  {
      $this-> office = $office;
  }

  public function getoffice()
  {
      return $this-> office;
  }

  //Get/Set phone number
  public function setphoneNumber($phoneNumber)
  {
      $this-> phoneNumber = $phoneNumber;  

  }

  public function getphoneNumber()
  {
      //str_replace to modify phone number format
      if(is_string($this-> phoneNumber)) {  
      $find3 = array (')', '(', ' '); 
      $replace3 = array ('', '', '-');
      $phonestr = str_replace($find3, $replace3, $this-> phoneNumber);
      return $phonestr;
      }

      else {
         return user_error("Error: Person's phone number must be a string");
      }
  }

  //Get/Set email
  public function setemail($email)
  {
      $this-> email = $email;
  }

  public function getemail()
  {
      return $this-> email;
  }

      }
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:55:14.003

你不需要多个循环......

```
if ($totalRows > 0) {
    $emp = 'Person';
    while ( $row = $result->fetch_object($emp) )
    {

        $newPerson = new person($row);
        echo "<tr>";

        echo "<td>" . $newPerson->getfirstName() . " " . $newPerson->getlastName() . "</td>";
        echo "<td>" . $newPerson->gettitle() . "</td>";
        echo "<td>" . $newPerson->getoffice() . "</td>";
        echo "<td>" . $newPerson->getphoneNumber() . "</td>";
        echo "<td><a href='mailto:" . $newPerson->getemail() . "'>" . $newPerson->getemail() . "</a></td>";

        echo "</tr>";
    }
} 
```

你的类 Constructor 应该是这样的

```
class Person {
    private $firstName;
    private $lastName;
    private $title;
    private $office;
    private $phoneNumber;
    private $email;

      public function __construct($row) { 
        $this-> setname($row->firtname); 
        $this-> settitle($row->title);
        //And So on ...
      }
  .... So On 
```

***最后..不要总是删除问题并将其发回..总是在某个时候提出您的问题，它肯定会得到回答***

# php - 将我自己的静态网页添加到 wordpress 网站

> ID：12888003
> 
> 赞同：1
> 
> 时间：2012-10-15T00:49:29.083
> 
> 标签：php, html, wordpress, web

如果我的标题不清楚，基本上我想做的就是将我自己的页面`HTML`或`PHP`页面添加到 Wordpress，这样我就可以玩一些网络开发。

所以基本上我只想要一个测试页面/页面添加到我的网站。但是，由于我已经在我的网站上安装了 Wordpress，我不能只使用我的`FTP`客户端将“index.html”添加到我的根文件夹中。我想知道我是否可以/不能这样做，如果可以，如何链接到我使用`FTP`.

对不起，如果这没有任何意义。我只想将一些我已经制作/正在创建的网站添加到我的网站，这样我就可以轻松地向客户/雇主展示我能做什么，如果我是个白痴，我再次道歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T00:52:46.157

在根文件夹中创建一个子目录，然后简单地链接到它：

`www.domain.com/mysubdir/index.php`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T06:31:51.350

另一种方法...在wordpress中创建一个页面模板

1.  创建一个名为：template_mypage.php 的 php 文件

2.  您必须将此 php 注释行放在模板文件的顶部：

    /* 模板名称：我的页面 */

3.  转到 wordpress 后端并创建一个新页面

4.  在“页面属性”中，您可以找到一个名为“模板”的下拉列表。在列表中，您应该能够找到“我的页面”...选择它然后保存您的页面。

5.  查看它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T00:52:05.730

您始终可以在 public_html/www/ 中创建子域或创建文件夹，并将其从任何其他域或从 wordpress 上的任何静态链接重定向

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T20:03:17.030

为什么不使用 WordPress 并使用自定义帖子类型将您的作品集放在一起？我最近对此进行了介绍，并且有一个方便的自定义帖子类型 UI 插件，您可以创建站点的全新部分并为您的投资组合制作模板。

只是一个想法。

如果您在 WordPress 中创建静态页面，您仍然可以使用其他评论中指定的页面系统进行模板化。对您的页面进行编码，将其分成页眉、页脚、内容等文件。您可以将文件加载到根目录，但不能将其命名为 index.html。如果你做一个子文件夹，你不需要在 WordPress 中有一个现有的页面。

但是，您仍然可以使用 WordPress 制作一个“中途”静态页面，并制作一个 header-staticpage.php、index-staticpage.php 和 footer-staticpage.php，并确保将 WordPress 页眉和页脚的代码包含在新的页眉和页脚，因此您仍然可以获得 WordPress 允许的默认 jquery 的好处。不要忘记为您的模板命名，当您在 WordPress 中创建页面时，如果您已经硬编码了页面的内容，则可以将内容区域留空。

我仍然建议尝试自定义帖子类型。这并不难，除了我在本评论前面提到的插件之外，Slideshare 中还有一些很棒的演示文稿涵盖了这一点。

# javascript - phonegap 中的 javascript 用于单页应用程序

> ID：12888011
> 
> 赞同：0
> 
> 时间：2012-10-15T00:51:06.623
> 
> 标签：javascript, android, cordova

我尝试使用 Phonegap 将我的 Web 应用程序转换为 Android 应用程序。

该应用程序非常简单：html、javascript、css。从逻辑上讲，它是一个页面，其内容由一个简单的 javascript 代码更改（没有任何外部库）。

问题是，javascript 仅适用于原始页面上存在的项目。如果一个项目作为 javascript 函数的结果出现并且分配了另一个 javascript 函数，则永远不会执行另一个函数。

可能是什么原因？我该如何改善这种情况？

**更新：**

问题是，如果在桌面浏览器窗口中看到应用程序定义了文档的 form1 属性（它出现在第 3 步中），对于移动应用程序则不是这样。
演示：

```
<html>
<head>
<script  type="text/javascript">

document.onclick = function( whichOne ){ 
    whichOne = whichOne ? whichOne : window.event;
    thisButton = whichOne.target ? whichOne.target : whichOne.srcElement;
    if (thisButton.name) {
        if (thisButton.value == 'Submit') { 
            if (undefined != document.form1){
                alert("yes form1");
            }
            else {
                alert("no form1");
            }
        }
        else if (thisButton.name == 'b1') { 
            var iner ='<center>step 2</center>';
            un1(thisButton.title,iner);
            var oid=thisButton.title;
            iner = t4a(oid,thisButton.name);
            setTimeout( function() { un1(oid,iner);},1000);
        }
    }
}

function un1(id,iner){
    var ele = document.getElementById(id);
    ele.innerHTML = iner;
}

function t4a (id,ara){
    var i; 
    var out="<form name='form1'><center>step 3<table border='1'>"; 
    for (i=0;i < 2;i++){
        out +="<tr><td align='left'>"+i+".</td><td align='right'><input type='text'  name='f"+i+"'></td></tr>";
    }
    out+="</table><input type='button' name='a"+ara+"' title='"+id+"' value='Submit'
></center></form>";
    return out;
}

</script>
</head>

<body>
<center>        
<form >
<div id ="b1">
<input type="button" name="b1" title="b1" value="Butt">
</div>
</form>
</center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:40:39.610

```
<form >
<div id ="b1">
<input type="button" name="b1" title="b1" value="Butt">
</div>
</form> 
```

并且您正在 div "b1" 中添加一个表单...所以在表单中添加一个表单？？？？将其更改为

```
<div id ="b1">
<form >
<input type="button" name="b1" title="b1" value="Butt">
</form>
</div> 
```

它应该可以工作。

# c++ - 混淆使用线程和线程技术

> ID：12888014
> 
> 赞同：0
> 
> 时间：2012-10-15T00:51:27.277
> 
> 标签：c++, multithreading

有施工区。100m 长，用于向东/向西行驶的汽车....10m 用于穿过 N/S 的行人。以下是必须遵守的规则：

如果十字路口是空的，汽车和行人都不应等待；在单车道路段，汽车不能同时向相反方向行驶；单车道路段有车时，一个行人不能过马路，但多个行人可以同时过马路；同一车道路段如果有同方向行驶的汽车，汽车可以进入，但不允许汽车超车；一辆汽车不会等待超过两辆汽车朝相反方向行驶；行人必须让车，但行人不应等待超过两辆汽车（在任一方向）。

正在使用的示例文件如下：（每一行是一个单独的实体。E 表示“汽车向东行驶”，W 表示向西。P 表示行人。第一列是前一个实体到达后的秒数，现在新实体正在到达。第三列是速度（米/秒）：正在使用的示例：

```
0 E1 10
1 P1 1
4 E2 15
5 W1 10 
```

目前我的代码正在打印出 E1 enters.... （下一行） E1 exits.... 这不断重复。我对使用线程和包含的技术很困惑，所以此刻我被困住了。我需要更改什么才能打印出实体应该到达和离开施工区的正确顺序？感谢所有帮助。

```
#include <iostream>
#include <vector>
#include <fstream>
#include <chrono>
#include <thread>
#include <random>
#include <ctime>
#include <mutex>
#include <string>
#include <condition_variable>

using namespace std;

class Traffic{
    public:
        void set_time(int a) {prevArrival = a;}
        void set_name(string a) {name = a;}
        void set_speed(int a) {carSpeed = a;}
        int get_time() {return prevArrival;}
        string get_name() {return name;}
        int get_speed() {return carSpeed;}
    private:
        int prevArrival;
        string name;
        int carSpeed;
};

condition_variable_any cE, cW, ped;
mutex mtx;

int east=0; //number of cars traveling East currently in the zone
int west=0; //...traveling West...
int peds=0; //# of pedestrians crossing the street

void sleep(int secs);
void carWest(int time, string name, int speed);
void carEast(int time, string name, int speed);
void pedestrian(int time, string name, int speed);

int main(void){
  srand(time(NULL));
  ifstream ifs;
  ofstream ofs;
  string info, title, temp;
  int i=0, e=0, w=0, p=0, time, speed;
  Traffic crossers[50];
  vector <thread> eastCars, westCars, pedestrians; 

    ifs.open("traffic.txt");
    while (!ifs.eof()){
        ifs >> time; crossers[i].set_time(time);
        ifs >> title; crossers[i].set_name(title);
        temp = crossers[i].get_name();
        if(temp[0] == 'E' || temp[0] == 'e') {e++;}
        else if(temp[0] == 'W' || temp[0] == 'w') {w++;}
        else {p++;}
        ifs >> speed; crossers[i].set_speed(speed);
        i++;
    }
    ifs.close();

    for (int i=0; i < e; i++) eastCars.push_back(thread(carEast, crossers[i].get_time(), crossers[i].get_name(), crossers[i].get_speed())); //creating threads
    for (int i=0; i < p; i++) pedestrians.push_back(thread(pedestrian, crossers[i].get_time(), crossers[i].get_name(), crossers[i].get_speed()));
    for (int i=0; i < w; i++) westCars.push_back(thread(carWest, crossers[i].get_time(), crossers[i].get_name(), crossers[i].get_speed()));

    for (thread& t: eastCars) t.join();     // waiting for eastCars, westCars, and pedestrians to finish
    for (thread& t: pedestrians) t.join();
    for (thread& t: westCars) t.join();

}

void pedestrian(int time, string name, int speed) {
    while(true){
        if(name[0] == 'P' || name[0] == 'p'){
            if(time == 0 || (east == 0 && west == 0 && peds == 0))
                mtx.lock();
                cout << name << " entering construction" << endl;

            while(peds>0 || west>0 || east>0) 
                ped.wait(mtx);

            peds++;
            mtx.unlock();

            sleep(10/speed);

            cout << name << " exiting construction" << endl;
            mtx.lock();
            peds--;
            ped.notify_one();
            cE.notify_all();
            cW.notify_all();
            mtx.unlock();
        }
    }
}

void carWest(int time, string name, int speed) {
    while(true){
        if(name[0] == 'W' || name[0] == 'w'){
            if(time == 0 || (east == 0 && west == 0 && peds == 0))
                mtx.lock();
                cout << name << " entering construction" << endl;

            while(peds>0 || west>0 || east>0) 
                cW.wait(mtx);

            west++;
            mtx.unlock();

            sleep(100/speed);

            cout << name << " exiting construction" << endl;
            mtx.lock();
            west--;
            cW.notify_one();
            ped.notify_all();
            cE.notify_all();
            mtx.unlock();
        }
    }
}

void carEast(int time, string name, int speed) {
    while(true){
        if(name[0] == 'E' || name[0] == 'e'){
            if(time == 0 || (east == 0 && west == 0 && peds == 0))
                mtx.lock();
                cout << name << " entering construction" << endl;

            while(peds>0 || west>0 || east>0) 
                cE.wait(mtx);

            east++;
            mtx.unlock();

            sleep(100/speed);

            cout << name << " exiting construction" << endl;
            mtx.lock();
            east--;
            cE.notify_one();
            cW.notify_all();
            ped.notify_all();
            mtx.unlock();
        }
    }
}

void sleep(int secs){
  this_thread::sleep_for(chrono::milliseconds(rand()%secs*1000));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:33:08.387

你的问题在这里：

```
for (int i=0; i < e; i++) eastCars.push_back(thread(carEast, crossers[i].get_time(), crossers[i].get_name(), crossers[i].get_speed())); //creating threads
for (int i=0; i < p; i++) pedestrians.push_back(thread(pedestrian, crossers[i].get_time(), crossers[i].get_name(), crossers[i].get_speed()));
for (int i=0; i < w; i++) westCars.push_back(thread(carWest, crossers[i].get_time(), crossers[i].get_name(), crossers[i].get_speed())); 
```

在您的小数据文件中，您有 2 辆东车、1 辆西车和 1 辆行人。So `e`will be 2, `p`and `w`will be 1\. `crosser[0]`是东车

现在，看看那些 push_back 循环。您正在将 crossers[0] 添加到所有列表中！因此，您的第一辆（也是唯一一辆）`westCar`实际上是一辆东方汽车。但是你`carWest`拒绝做除了西车以外的任何工作，所以它不起作用。

您可能希望保留完全独立的列表，而不是将每个人都放在一个`crossers`列表中。或者你可以在你的`crossers`列表上循环一次，然后检查它`name`以查看它进入的列表/线程。

# string - 字符串方法中未使用的表达式结果

> ID：12888015
> 
> 赞同：0
> 
> 时间：2012-10-15T00:51:35.527
> 
> 标签：string, whitespace

我创建了这个方法来只删除字符串末尾的空格而不是开头，虽然它完美地返回了字符串并完成了我需要的操作，但 xcode 接口在“for (lengthofthestring; lengthofthestring > 0; lengthofthestring--)" 行，任何人都可以告诉我为什么，在我把头发都撕掉之前！！！谢谢。但它运行良好，（我不希望商店有任何麻烦）

这是代码...

```
-(NSString *)removeEndSpaceFrom:(NSString *)strtoremove{
    NSUInteger location = 0;
    NSUInteger lengthofthestring = [strtoremove length];
    unichar charBuffer[lengthofthestring];
    [strtoremove getCharacters:charBuffer];
    ////////////// right here on the next line is where i'm getting the Expression result unused !!!
    for (lengthofthestring ; lengthofthestring > 0; lengthofthestring--) {
        if (![[NSCharacterSet whitespaceCharacterSet] characterIsMember:charBuffer[lengthofthestring - 1]]){
            break;
        }
    }
    return  [strtoremove substringWithRange:NSMakeRange(location, lengthofthestring - location)];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:02:56.693

好吧，我以这种方式修复了它，但我仍然不知道上述问题的答案。

```
 -(NSString *)removeEndSpaceFrom:(NSString *)strtoremove{
    NSUInteger location = 0;
    unichar charBuffer[[strtoremove length]];
    [strtoremove getCharacters:charBuffer];
    int i = 0;
    for ( i = [strtoremove length]; i >0; i--){
        if (![[NSCharacterSet whitespaceCharacterSet] characterIsMember:charBuffer[i - 1]]){
            break;
    }
    }
    return  [strtoremove substringWithRange:NSMakeRange(location, i  - location)];
} 
```

# javascript - 带有ajax响应字符串的JSON解析错误

> ID：12888017
> 
> 赞同：1
> 
> 时间：2012-10-15T00:51:38.853
> 
> 标签：javascript, json

我一直在研究这个问题，我已经在 web 和 stackoverflow 中搜索了解决方案，但我无法准确了解错误。

这是通过 ajax 调用来自服务器的 json 字符串。

```
{root:{name: "root",description: "root description",checked: false,1:{name: "item1",description: "item1 description",checked: true,1.1:{name: "item1.1",description: "item1.1 description",checked: true}}, 2:{name: "item2",description: "item2 description",checked: true}}} 
```

使用下面的代码我得到字符串之后`xmlhttp.readyState == 4 && xmlhttp.status == 200`

```
var aData;
        try{
        aData =JSON.parse(xmlhttp.responseText);
        }
        catch(err){
        alert(err);
        } 
```

它显示了类似的错误

```
Json.parse expected property name or '}' 
```

但如果使用 eval() 函数它工作正常

```
var aData;
        try{
        aData =eval('(' + xmlhttp.responseText + ')');
        }
        catch(err){
        alert(err);
        } 
```

请解释这里的错误是什么。

谢谢。

编辑：

我已经检查了 json 查看器中的字符串，它工作正常。http://jsonviewer.stack.hu/"> ![JSON 视图](../Images/3d71f17f7a3c44296cbfe94a6e826acf.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T03:53:23.177

那是因为那是无效的 JSON，你不能使用数字作为键名。因此，您可以跳过数字或将它们放在引号中，以便它们成为“字符串”。

验证器输出和固定的 JSON 如下：

固定的 JSON：

```
{
   "root":{
      "name":"root",
      "description":"root description",
      "checked":false,
      "1":{
         "name":"item1",
         "description":"item1 description",
         "checked":true,
         "1.1":{
            "name":"item1.1",
            "description":"item1.1 description",
            "checked":true
         }
      },
      "2":{
         "name":"item2",
         "description":"item2 description",
         "checked":true
      }
   }
} 
```

验证器输出：

```
Error:Strings should be wrapped in double quotes.[Code 17, Structure 2]
Error:Strings should be wrapped in double quotes.[Code 17, Structure 5]
Error:Strings should be wrapped in double quotes.[Code 17, Structure 9]
Error:Strings should be wrapped in double quotes.[Code 17, Structure 13]
Error:Expecting string, not number.[Code 8, Structure 17]
Error:Expecting comma or }, not colon.[Code 13, Structure 18]
Error:Strings should be wrapped in double quotes.[Code 17, Structure 20]
Error:Strings should be wrapped in double quotes.[Code 17, Structure 24]
Error:Strings should be wrapped in double quotes.[Code 17, Structure 28]
Error:Expecting string, not number.[Code 8, Structure 32]
Error:Expecting comma or }, not colon.[Code 13, Structure 33]
Error:Strings should be wrapped in double quotes.[Code 17, Structure 35]
Error:Strings should be wrapped in double quotes.[Code 17, Structure 39]
Error:Strings should be wrapped in double quotes.[Code 17, Structure 43]
Error:Expecting string, not number.[Code 8, Structure 49]
Error:Expecting comma or }, not colon.[Code 13, Structure 50]
Error:Strings should be wrapped in double quotes.[Code 17, Structure 52]
Error:Strings should be wrapped in double quotes.[Code 17, Structure 56]
Error:Strings should be wrapped in double quotes.[Code 17, Structure 60] 
```

# c# - ASP.NET 如何使用带有 '<%= 的计数器

> ID：12888019
> 
> 赞同：4
> 
> 时间：2012-10-15T00:52:01.757
> 
> 标签：c#, asp.net

我想进行多次上传，我正在使用这个论坛的一些脚本。脚本非常有效，但是当我将它与我的项目合并时。javascript 无法获取我的元素的值。我发现问题是因为我在页面中有很多ID PANEL，我需要更改为`getElementByID('<%="FileUpdate.ClientID%>').value`（原件`getElementByID("FileUpdate").value`：）

问题是：我必须使用计数器，例如：`getElementByID('<%="txtFileUpdate' + counter + '%>').value`但它失败了。错误说“字符文字中的字符太多”指向该行。

请大神帮忙，这个问题有什么解决办法吗？

这是脚本

**-----> 错误“字符文字中有许多字符”**

```
 <script type="text/javascript" language="javascript">

    var counter = 1;

    function AddFileUpload() {
        if (counter < 5) {
            counter++;
            var div = document.createElement('DIV');
            div.innerHTML = '<input id="FileUpload' + counter + '" name = "file' + counter +
         '" type="file" />' +
          '<input id="Button' + counter + '" type="button" ' +
          'value="Remove" onclick = "RemoveFileUpload(this)" />';
            document.getElementById("FileUploadContainers").appendChild(div);
        }
        else {
            alert("Cannot attach more than 5 file");
        }
    }

    function GetFile() {
        var temp;
        var error = "";
        var stringx = "";
        var exCounter = 1 ;
        for (exCounter; exCounter <= counter; exCounter++) {
     -----> stringx = document.getElementById('<%=FileUpload'+exCounter+'.ClientID%>').value;    
                if (stringx != "")
                temp += stringx + "#;";
            else 
                error += exCounter + ", ";                            
        }
        if (error != "") {
            alert("Field " + error + " Still Empty");
            return;
        }
            document.getElementById('<%=HiddenField1.ClientID%>').value = temp;            
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:56:56.433

尝试这个：

```
getElementByID('FileUpdate<%=counter%>').value 
```

或者

```
getElementByID('<%=txtFileUpdate + counter.ToString()%>').value 
```

# gcc - windows nasm gcc 给出错误“Createprocess：没有这样的文件或目录。”

> ID：12888024
> 
> 赞同：1
> 
> 时间：2012-10-15T00:52:42.533
> 
> 标签：gcc, assembly, x86, mingw, nasm

不幸的是，我现在被迫切换到 Windows 来编写汇编代码，而不是使用 Linux。但是当试图链接我由 NASM 生成的 .obj 文件时，它会给出错误`gcc: Createprocess: No such file or directory。”

我的代码：

```
GLOBAL _main
EXTERN _printf

_main:
    push message 
    call _printf
    add esp, 4
    ret
message:
    db 'Hello, world',10,0 
```

我尝试将我的 .obj 文件移动到与 GCC 相同的目录。我还尝试在与 GCC 相同的目录中编译整个内容。使用批处理文件进行编译时，我没有使用任何环境变量，而是手动更改目录。我还将 GCC 安装在与 G++ 和 MinGW 附带的所有其他编译器相同的目录中。

为什么会出现此错误？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:16:53.880

这对我有用：

ASM 文件：

```
; file: blahasm.asm
; assemble with nasm (v 2.10, Mar 12 2012): nasm -f elf32 blahasm.asm -o blahasm.o
bits 32

global _blah

_blah:
  mov eax, 42
  ret 
```

C 文件：

```
// file: blahc.c
// compile with MinGW x86 (gcc v 4.6.2): gcc -Wall -O2 blahc.c blahasm.o -o blah.exe
#include <stdio.h>

extern int blah(void);

int main(void)
{
  printf("blah():%d\n", blah());
  return 0;
} 
```

输出：

```
blah():42 
```

令我惊讶的是，唯一有效的格式是`elf32`并且它在 gcc 的 Windows 端口中得到支持，MinGW 就是这样。

**更新**：

我用 NASM 和 MinGW 创建了一个仅装配程序。

ASM 文件：

```
; file: nsm.asm
; assemble with NASM (v 2.10, Mar 12 2012): nasm -f elf32 nsm.asm -o nsm.o
; compile (link) with MinGW x86 (gcc v 4.6.2): gcc -Wall -O2 nsm.o -o nsm.exe
bits 32

extern ___main
extern _printf

global _main

    section .rdata

textstr:
    db "Hello World!", 10, 0

    section .text.startup

_main:
    call    ___main
    push    textstr
    call    _printf
    add     esp, 4
    ret 
```

输出：

```
Hello World! 
```

我正在从“MinGW Shell”（MSYS）运行 gcc，我不需要指定任何额外的命令行参数来使程序与标准库成功链接。我不需要对 MinGW 和 MSYS 安装做任何特别的事情，我想我使用了所有默认设置参数。

# xcode - 如何在xcode中将日期从一个视图发送到另一个视图？

> ID：12888026
> 
> 赞同：-1
> 
> 时间：2012-10-15T00:53:11.970
> 
> 标签：xcode

我想在你必须输入一些数据的地方制作程序，然后当你点击完成时它会处理这些数据并在另一个视图上显示它。我搜索了多个教程，但仍然无法理解您是如何做到的。我有一个文本字段 - 第 1 课，想将它传递给第二个视图中的标签。这些视图称为 EditClasses 和 DayView。非常感谢。

另外我需要每 24 小时更改一次数据，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:34:21.040

将信息从一个视图传递到另一个视图的一种快速而简单的方法，一般来说，存储信息并在其他视图中使用它是使用 NSUserDefaults。您可以在应用程序运行时将 NSString 或 NSNumber 等对象存储在为您的应用程序保留的位置。

离开第一个视图时保存您的信息：

```
NSUserDefaults *infoSaved = [NSUserDefaults standardUserDefaults];
[infoSaved setObject:@"Sample Text" forKey:@"LabelTitle"];
[infoSaved synchronize]; 
```

确保在设置对象后调用同步。并在加载第二个视图控制器时提取它们：

```
NSUserDefaults *infoSaved = [NSUserDefaults standardUserDefaults];
NSString *infoFromUserDefaults = [infoSaved objectForKey:@"LabelTitle"];
[MyLabel setTitle:infoFromUserDefaults]; 
```

# android - 以编程方式创建的文本视图未正确显示或保存

> ID：12888036
> 
> 赞同：1
> 
> 时间：2012-10-15T00:55:19.287
> 
> 标签：android, layout, textview

我有一个带有编辑文本字段和添加按钮的活动设置。本质上，当用户对 edittext 进行更改并点击 Add 时，应该使用 edittext 字段创建一个新的 textview。此外，我希望即使在我离开屏幕或活动后，创建的文本视图也可用。我遇到的问题是，当我单击添加时，每次新创建的文本视图中都会显示一个默认值，而当我离开活动时，所有文本视图都完全消失了。有什么建议么？

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.adddocnote);
    etDocNote = (EditText) findViewById(R.id.editDocNote);
    btnAdd1 = (Button) findViewById(R.id.btnAdd1);
    nLayout = (LinearLayout) findViewById(R.id.linearLayout);
    TextView tvNote = new TextView(this);
    tvNote.setText("");
    btnAdd1.setOnClickListener(onClick());

        etDocNote.setOnKeyListener(new View.OnKeyListener() {
           public boolean onKey(View v1, int keyCode1, KeyEvent event1) {
                if ((event1.getAction() == KeyEvent.ACTION_DOWN) &&
                        (keyCode1 == KeyEvent.KEYCODE_ENTER)) {
                      getSharedPreferences("myprefs", 0).edit().putString("etDocNote", etDocNote.getText().toString()).commit();
                      return true;
                }
                return false;
            }
        });
}

private OnClickListener onClick() {
    // TODO Auto-generated method stub
    return new OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub
            String newDocNote = getSharedPreferences("myprefs", 0).getString("etDocNote", "" );
            nLayout.addView(createNewTextView(newDocNote));
        }

    };
}
private TextView createNewTextView(String newText) {
    // TODO Auto-generated method stub

    LayoutParams lparams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    TextView tvNote = new TextView(this);
    tvNote.setLayoutParams(lparams);
    tvNote.setText(newText);
    return tvNote;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:10:24.760

所以你的问题有两个部分：

1.  如何正确添加 textView 与来自editText 的文本： 现在你有一个时间问题。当有人敲击键时，您正试图将文本保存在共享首选项中。这不是必需的，因为您可以在单击添加按钮时检索 editText 内容。

这是您需要做的：删除 setOnKeyListener 并将您的 onClick() 函数更改为

```
return new OnClickListener(){

    public void onClick(View v) {
        // TODO Auto-generated method stub

        String value = etDocNote.getText().toString();

        nLayout.addView(createNewTextView(value));

        // Save to shared preferences
       getSharedPreferences("myprefs", 0).edit().putString("etDocNote", value).commit();
    }

}; 
```

1.  当您返回活动时如何恢复您的视图。由于您的文本现在保存在共享首选项中。在您的 oncreate 中，您需要检索和恢复您的 TextViews。

# javascript - 是否有可用于 JavaScript 的类似 CDI 的机制

> ID：12888037
> 
> 赞同：1
> 
> 时间：2012-10-15T00:55:47.693
> 
> 标签：javascript, node.js, requirejs, cdi, amd

在深入研究 JavaScript 之前，我做了很多 Java，特别喜欢上下文依赖注入的概念。我经常使用[Google Guice](http://code.google.com/p/google-guice/)。

我知道 JavaScript 不是静态类型的。还有一些模块化概念，比如[requireJs](http://requirejs.org/)或[Node.js](http://nodejs.org/)使用的（[甚至我自己也做过一些事情](http://larsjung.de/modulejs/)）。

但是是否可以考虑或者是否已经存在基于松散定义的接口注入依赖项的解决方案..（希望这不是太愚蠢的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:02:22.677

我所看到的与您所要求的最接近的东西（我认为）是来自 tim caswell的[Architect 。](https://github.com/c9/architect)

它允许您注册模块的能力和要求，因此您基本上可以请求可以执行操作的内容，并让 Architect 检查所有可用模块以查看是否有任何模块支持此类操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:11:08.337

您可能还想看看 Errai (http://www.jboss.org/errai)。它通过使用 GWT javascript 编译器将 CDI 引入浏览器，使用相同的编程范例将客户端和服务器连接在一起（他们也在浏览器中处理 JPA）。

# sql - 从数组中获取下一项

> ID：12888047
> 
> 赞同：2
> 
> 时间：2012-10-15T00:59:23.840
> 
> 标签：sql, arrays, postgresql

给定一个表示路径 ( `'/11/22/33/44'`) 的字符串列，我如何返回给定数字之后的下一个数字。

例如：

*   给定一个 id= `22`，我想`33`从路径返回`/11/22/33/44/`。
*   给定一个 id= `44`，我想`NULL`从路径返回`/11/22/33/44/`。

这是我用来将字符串转换为一组记录的位：

```
SELECT unnest(string_to_array(trim(both '/' from '/11/22/33/44/'), '/')::integer[]);
 unnest 
--------
     11
     22
     33
     44
(4 rows) 
```

但是如何在这里获得“下一个条目”（如此给出`22`-> `33`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:03:22.043

一种方法是窗口函数：

```
SELECT a FROM (
    SELECT *, lag(a) OVER () AS lag_1
    FROM unnest(string_to_array(trim(both '/' from '/11/22/33/44/'), '/')::integer[]) a
) b WHERE lag_1 = 22; 
```

此解决方案为输入返回零行`44`，但通过将其作为子查询调用很容易解决这个问题。

或者，对于整数数组，您可以使用[intarray 扩展](http://www.postgresql.org/docs/current/static/intarray.html)的`idx`函数：

```
CREATE EXTENSION intarray;

WITH x(arr) AS (
    SELECT string_to_array(trim(both '/' from '/11/22/33/44/'), '/') :: integer[]
)
SELECT arr[idx(arr,22)+1] FROM x; 
```

查找数组中的下一个索引。`intarray`是与 PostgreSQL 一起分发的扩展，它不是第 3 方附加组件。该解决方案无需进一步操作即可产生`NULL`结果。`44`

# ruby - 区分类继承和模块包含的符号

> ID：12888048
> 
> 赞同：0
> 
> 时间：2012-10-15T00:59:55.880
> 
> 标签：ruby, class, module, uml, notation

当显示模块的祖先时，例如`String`：

```
String, Comparable, Object, Kernel, BasicObject 
```

其中一些（String、Object、BasicObject）是类，而另一些则不是。有没有区分它们的符号？想到的一个可能的候选者是使用`<<`而不是`<`用于模块包含：

```
String << Comparable < Object << Kernel < BasicObject 
```

或者相反，对于类继承：

```
String < Comparable << Object < Kernel << BasicObject 
```

但我不确定。如果那里还没有符号，您对上述内容有何看法？这在 UML 中是如何表达的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:43:09.697

我所知道的没有这样的符号。

不过，在大多数情况下，我认为没有必要。一般来说（这里可能有一些警告，但我现在想不出任何警告），一旦模块成为祖先链的一部分，它的行为就像祖先链中的一个类。要使用您的 String 示例，请`''.is_a? Comparable`返回`true`并`super`在 String 中调用 Comparable 定义的方法将调用 Comparable 的实现。

唯一的区别在于`initialize`，因为您不能创建模块的实例。

至于UML，鉴于此，它可以只是一个普通的祖先，就像一个类（我认为），因为我不相信UML有任何不同的方式来表示模块。

就个人而言，我认为您提出的符号有点难以解析，当我关心时，宁愿看到它全部拼写出来：

```
a = String.ancestors
a.map{ |c| c.class.to_s.downcase }.zip(a).map { |o| o.join(' ') }.join(' < ')
#=> "class String < module Comparable < class Object < module PP::ObjectMixin < module Kernel < class BasicObject" 
```

# r - 语言 R 中的 NA 向量

> ID：12888050
> 
> 赞同：1
> 
> 时间：2012-10-15T01:01:02.757
> 
> 标签：r, na

我如何确定一次计算的结果向量是否充满了 NA 值？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T01:02:52.747

通过`all(is.na(x))`：

```
R> x1 <- 1:3
R> all(is.na(x1))
[1] FALSE
R> x2 <- x1 * NA
R> all(is.na(x2))
[1] TRUE
R> 
```

# html - 为什么我的 three.js 示例无法正确加载？

> ID：12888051
> 
> 赞同：1
> 
> 时间：2012-10-15T01:01:11.850
> 
> 标签：html, google-chrome, loading, webgl, three.js

我刚刚下载了Doob先生的three.js项目。在示例文件夹中，任何不使用模型或纹理的内容都将正确加载。带有模型或纹理的显示为空白。我不明白为什么。我可以在 three.js 网站上使用带有模型和纹理的 webgl 示例。谁能帮忙，我很困惑...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T01:06:09.017

您需要使用该`--allow-file-access-from-files`标志运行 chrome。

[https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally](https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally)

此外，这里有一些关于他们如何尝试解决这个问题的讨论：

[http://code.google.com/p/chromium/issues/detail?id=121406](http://code.google.com/p/chromium/issues/detail?id=121406) [http://code.google.com/p/chromium/issues/detail?id=47416](http://code.google.com/p/chromium/issues/detail?id=47416)

# redirect - 玩framework2：去掉url中的初始html页面

> ID：12888054
> 
> 赞同：1
> 
> 时间：2012-10-15T01:02:20.273
> 
> 标签：redirect, playframework, routes, playframework-2.0

我已经定义了以下路由文件：

```
GET     /           controllers.Application.app

# web service entries...
GET     /api/users  controllers.Users.list
[...]

# Map static resources from the /public folder to the /assets URL path
GET     /*file      controllers.Assets.at(path="/public", file) 
```

在我的 Application.app 操作中，我只是重定向到 index.html

```
def app = Action {
  Redirect(routes.Assets.at("index.html"))
} 
```

所以当我访问我的应用程序时，`http://mydomain`我被重定向到`http://mydoamin/index.html`，然后将 /#ideas 添加到该位置（它是一个单一的网页应用程序）

我想摆脱 index.html 文件，而是被重定向到`http://mydoamin/#ideas`

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:21:37.347

在您的路线文件中使用它：

```
GET     /     controllers.Assets.at(path="/public", file="index.html") 
```

所以你不需要触摸任何控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:11:11.393

只是一个指针：您可以尝试从 Asset 控制器获取 Html 代码，然后返回带有 Html 内容的 Ok Result。

为此，您可以尝试查看在[测试助手](http://www.playframework.org/documentation/2.0.4/ScalaFunctionalTest)中如何调用控制器，以及如何获取此调用的 Result 和主体。

大致（未测试）：

```
def app = Action {
    request => {
        val result = controllers.Assets.at("public","index.html")(request)
        val html = contentAsString(result)

        Ok(html)
    }
} 
```

# birt - 在 birt 中处理大型数据集

> ID：12888055
> 
> 赞同：1
> 
> 时间：2012-10-15T01:02:21.390
> 
> 标签：birt

我遇到了内存不足异常的问题。我需要在交叉表中显示大量数据。我需要显示 5,277,888 行聚合成 403,920 行。我不认为 birt 可以处理这个问题，并希望得到一些建议。

这些是我在想的选项

1.  一些如何一次获取一些数据并聚合它（可能仍然会耗尽内存）
2.  查找呈现 html 的不同报告框架
3.  不使用交叉表并执行所有聚合服务器端并尝试在 sudo 交叉表中显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:17:10.790

获取大量数据并将其提供给 BIRT 会增加数据流量，并且很多时候（如您的情况）会导致系统/报告引擎挂起。

你的想法是正确的。（选项 3）最好在您的数据库中使用聚合函数，并有时将已汇总的数据提供给 BIRT。

SQL 还为交叉表输出（SQL 透视函数）提供了选项，以备不时之需。

# python - IndexError：弹出索引超出范围（python）

> ID：12888057
> 
> 赞同：0
> 
> 时间：2012-10-15T01:02:30.837
> 
> 标签：python, sorting, merge

我编写了以下合并排序代码：

```
def merge_sort(self,a):

    #console.log(len(a))
    if len(a) <= 1:
        return a
    left = []
    right = []
    result = []
    middle = int(len(a)/2)
    print middle

    left = a[:middle] #set left equal to the first half of a
    right = a[middle:] #set right equal to the second half of a
    print left
    print right

    left = self.merge_sort(left)
    right = self.merge_sort(right)
    result = self.merge(left, right)

    return result 
```

然后合并代码：

```
def merge(self, left, right):
    result = []
    while len(left) > 0 or len(right) > 0:

        if len(left) > 0 and len(right) > 0:
            if left[0] <= right[0]:
                result.append(left[0])
                left = left.pop(1)    #remove the first element from left

        elif len(left) > 0:
            result.append(left[0])
            left = left.pop(1)    #remove the first element from left

        elif len(right) > 0:
            result.append(right[0])
            right = right.pop(1)  #remove the first element from right

        else:
            result.append(right[0])
            right = right.pop(1)
    return result 
```

我将数组发送给它：a = [12,0,232]

我得到以下输出（不同的迭代），在最后一个输出中我得到了错误，请帮助我不明白为什么会出现错误，谢谢！：

(1 [12] [0, 232]) (1 [0] [232])

Traceback (last recent call last): ...\Sort_Class.py", line 116, in merge left = left.pop(1) #remove the first element from left IndexError: pop index out of range

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T01:17:32.237

您的代码存在问题，例如在此选择中它们都存在：

```
result.append(left[0])
left = left.pop(1) 
```

这应该是：

```
result.append(left.pop(0)) 
```

问题是：

1.  Python列表使用基于0的索引，因此列表`left[0]`的第一个元素不会弹出第一个元素而弹出第二个元素`left[1]``left.pop(0)``left.pop(1)`
2.  `left.pop(1)`返回弹出的元素而不是列表，因为它会改变列表。`left = left.pop(1)`在这里没有多大意义。
3.  不需要同时获取第一个元素`left[0]`然后弹出它`left.pop(0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T01:20:36.920

我不认为`.pop()`你认为它会做。例如，这一行：

```
left = left.pop(1)    #remove the first element from left 
```

不会从中删除“第一个”（即第零个）元素`left`。 `.pop(1)`是第二个元素：

```
>>> a = [10,20,30,40]
>>> a.pop(1)
20
>>> a
[10, 30, 40] 
```

而且，如果你设置`a = a.pop(1)`, then`a`不再是一个列表，而是一个数字：

```
>>> a = [10,20,30,40]
>>> a = a.pop(1)
>>> a
20 
```

这也行不通。您可以将这些替换为`del left[0]`or`left = left[1:]`或简单地`result.append(left.pop(0))`按照刚刚发布的答案中的说明进行替换。:^) 修复它揭示了另一个问题：由于这里的逻辑，您的代码陷入了无限循环：

```
 if len(left) > 0 and len(right) > 0:
        if left[0] <= right[0]: 
```

如果`left[0] > right[0]`，则没有分支，或者 没有任何反应`left`，`right`你就被困住了。如果您对此进行调整以添加右分支行为，您的代码似乎可以工作：

```
>>> import random
>>> def check():
...     for length in range(1, 10):
...         for trial in range(10000):
...             v = [random.randrange(-10, 10) for i in range(length)]
...             assert merge_sort(v) == sorted(v)
...     return True
... 
>>> check()
True 
```

# java - 如何检测数组中的相邻条目？

> ID：12888060
> 
> 赞同：0
> 
> 时间：2012-10-15T01:02:58.813
> 
> 标签：java, arrays

“用 Java 编写一个方法，如果在棋盘（二维数组）的同一行、列或对角线上有 k 个相邻的符号出现，则返回 true，其中 k 是所需的内联符号数。”

我怎样才能做到这一点？我对如何检查行和列有一个粗略的想法（非常粗略；没有代码，只是想法），但我不知道检查对角线。

编辑：我正在考虑的另一种情况：如何检查任意位置？现在，我只考虑从 (0,0) 开始的事件，但是如果从 (2,3) 到 (2,6) 有一个 3 字符串怎么办？我怎样才能跟踪多次出现？

编辑：检测左对角线（我在下面的评论中发布的问题的粗略代码）：

```
LeftDiagonal(x, symbol) {
    noOfOccurence = 0;

    for (currentX = (size - 1); currentX >= x; currentX--) {
        if (board[currentX][currentX] == symbol) {
            noOfOccurence++;
        } else {
            break;
        }
    }

    return (noOfOccurence >= k);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:18:29.410

想到的最简单（虽然不是最有效，因为它可能回溯）的解决方案是编写一个递归函数，如以下伪代码

```
 FindAdjacent(x, y)
       if (matrix[x-1][y-1] == matrix[x][y])
            return 1 + FindAdjacent(x-1,y-1);
       .. Repeat for all 7 other adjacent locations (-1, +0) (+0, -1) (+1, -1) (-1, +1) (+1, +1) (+1, 0) (0, +1)
       else return 1; 
```

该例程将在给定坐标 x,y 的情况下以“blob”的形式返回其周围的符号。
**注意：**这也意味着对符号进行分组，例如连续 3 个，下面的列中旁边有 1 个。

如果您要为矩阵中的每个位置调用一次，并查看所有递归级别返回后的返回值是否为`>= k`，那可能会解决您的问题。请记住进行边界检查，这样您就不会检查 matrix[-1][-1] 或任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T01:31:35.000

你会运行很多我想象的嵌套循环。不要忘记所有的对角线。

```
array[1][1] is just below array[0][1] above array[2][1] to the left of array[1][2] to the right of array[1][0] and diagonal to four different points:

diagonal up and to the left is array[0][0]
diagonal up and to the right is array[0][2]
down and to the left is array [2][0]
down and to the right is array[2][2]

[0][0] | [0][1] | [0][2]
[1][0] | [1][1] | [1][2]
[2][0] | [2][1] | [2][2] 
```

如果您绘制很多图表，我认为 array[x][y] 会产生误导。array[row][column] 更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T02:43:21.043

```
for(i=0;i<row;i++)
For(j=0;j<column;j++){
current = Arr[row][col];
For(count=0;count<k;count++)
{
If(current==arr[row][col+count])
Flagcol=true
Else
Flagcol=false
}
For(count=0;count<k;count++)
{
If(current==arr[row+count][col])
Flagrow=true
else
Flagrow=false
}
For(count=0;count<k;count++)
{
If(current==arr[row+count][col+count])
Flagdiagnoltrue
Else 
Flagdiagnol=false
}
}
} 
```

一个非常粗略的草稿给出想法..记住一件事你需要检查行+计数/列+计数是否不应该超过行/计数..否则 outofbondsexception..:-D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T02:22:34.823

首先，不要相信你的“想法”。写出真正的代码以确保您可以进行行和列检查。

这个想法应该是直截了当的：

循环通过棋盘。假设左上角是 [0,0]，然后向右走 ([0,1], [0,2]...) 直到碰到右边界。然后转到下一行。完成，直到你点击右下角的框。

对于每个框，检查是否有 k 个出现 1\. 向右，2\. 向下，3\. 对角线向左向下和 4\. 对角线向右向下。

如果发生 4 个中的任何一个，则返回 true，否则，移动到下一个单元格。

例如，这里是一些示例伪代码：

遍历板：

```
ROWS=8;
COLS=8;
char[ROWS][COLS] board;
k = 3; // occurrence

for (x = 0 to COLS-1) {
  for (y = 0 to ROWS-1) {
    checkRightward(x, y, k);
    // checkDownward(...)
  }
} 
```

样本检查向右：

```
checkRightward(x,y,k) {
  char symbol = board[y][x];
  noOfOccurence = 0;
  for (currentX = x; currentX  < COLS ; ++currentX) {
    if (board[y][currentX] == symbol) {
      noOfOccurence++;
    } else {
      break; // jump out from the loop
    }
  }

  return (noOfOccurence >= k);
} 
```

您应该不难将这个想法翻译成 Java，并添加其他缺失的检查。

* * *

编辑：由于作者似乎并不真正理解我在说什么......所以我对这个想法进行了一些视觉展示：

假设一个 8 x 8 板，它是这样的：

```
 X
     0 1 2 3 4 5 6 7
  0
  1
  2
  3        * ---->
Y 4      / | \
  5   |/_  |  _\|
  6        V     
  7 
```

在上图中，当前单元格（带星号 * 的位置）的 [x,y] 坐标为 [3,3]。你要做的就是检查

1) 向右：这意味着检查 [3,3]、[4,3]、[5,3].... 是否具有相同的符号

2）向下：这意味着检查 [3,3]、[3,4]、[3,5].... 是否具有相同的符号

3）右对角线：这意味着检查 [3,3], [4,4], [5,5].... 是否具有相同的符号

4) 左对角线：这意味着检查 [3,3], [2,4], [1,5].... 是否具有相同的符号

您从 [0,0] 单元格开始检查，然后 [1,0], [2,0]... 然后 [0,1],[1,1][2,1]... 直到您找到了一个单元格，其中 4 次检查中的任何一个都成功，或者当您点击最后一个单元格时 ([7,7])。

# javascript - Gallerific .selected 元素

> ID：12888061
> 
> 赞同：0
> 
> 时间：2012-10-15T01:03:07.017
> 
> 标签：javascript, jquery, thumbnails, selected, galleriffic

我在 Galleriffic 中选择的元素有问题。选择图像时，它不会突出显示正确的拇指，而是突出显示前一个。

编辑删除了一个即将失效的网站链接。

JS：

```
<script type="text/javascript">
        jQuery(document).ready(function($) {
            // We only want these styles applied when javascript is enabled
            $('div.navigation').css({'width' : '100%', 'clear' : 'both'});
            $('div.content').css('display', 'block');

            // Initially set opacity on thumbs and add
            // additional styling for hover effect on thumbs
            var onMouseOutOpacity = .7;
            $('#thumbs ul.thumbs li').opacityrollover({
                mouseOutOpacity:   onMouseOutOpacity,
                mouseOverOpacity:  1.0,
                fadeSpeed:         'fast',
                exemptionSelector: '.selected'
            });

            // Initialize Advanced Galleriffic Gallery
            var gallery = $('#thumbs').galleriffic({
                delay:                     2500,
                preloadAhead:              10,
                enableTopPager:            true,
                enableBottomPager:         true,
                maxPagesToShow:            7,
                imageContainerSel:         '#slideshow',
                controlsContainerSel:      '#controls',
                captionContainerSel:       '#caption',
                loadingContainerSel:       '#loading',
                renderSSControls:          false,
                renderNavControls:         false,
                playLinkText:              'Play Slideshow',
                pauseLinkText:             'Pause Slideshow',
                prevLinkText:              '&lsaquo; Previous Photo',
                nextLinkText:              'Next Photo &rsaquo;',
                nextPageLinkText:          'Next &rsaquo;',
                prevPageLinkText:          '&lsaquo; Prev',
                enableHistory:             false,
                autoStart:                 false,
                syncTransitions:           true,
                defaultTransitionDuration: 900,
                onSlideChange:             function(prevIndex, nextIndex) {
                    // 'this' refers to the gallery, which is an extension of $('#thumbs')
                    this.find('ul.thumbs').children()
                        .eq(prevIndex).fadeTo('fast', onMouseOutOpacity).end()
                        .eq(nextIndex).fadeTo('fast', 1.0);
                },
                onPageTransitionOut:       function(callback) {
                    this.fadeTo('fast', 0.0, callback);
                },
                onPageTransitionIn:        function() {
                    this.fadeTo('fast', 1.0);
                }
            });
        });
</script> 
```

CSS

```
div.slideshow a.advance-link {
    display: block;
    width: 820px;
    height: 388px; /* This should be set to be at least the height of the largest image in the slideshow */
    line-height: 0px; /* This should be set to be at least the height of the largest image in the slideshow */
    text-align: center;
}
div.slideshow a.advance-link:hover, div.slideshow a.advance-link:active, div.slideshow a.advance-link:visited {
    text-decoration: none;
}
div.download {
    float: right;
}
div.image-title {
    font-weight: bold;
    font-size: 1.4em;
}
div.image-desc {
}
div.navigation {
    /* The navigation style is set using jQuery so that the javascript specific styles won't be applied unless javascript is enabled. */
    text-align: left;
}
ul.thumbs {
    clear: both;
    margin: 0;
    padding: 0;
    background-color: #FFF;
}
ul.thumbs li {
    display:inline;
    margin-right: 10px;
    padding: 0;
    list-style: none;
}
a.thumb {
    display:inline-block;
    text-decoration: none;
}
ul.thumbs li.selected a.thumb {
    color: #0C3 
}
a.thumb:focus {
    outline: none;
    text-decoration: none;
}
ul.thumbs img {
    border: none;
    display: block;
}
div.pagination {
    clear: both;
}
div.navigation div.top {
    padding-top: 10px;
    margin-top: 10px;
    text-align: center;
    background-color: #fff;
}
div.navigation div.bottom {
    text-align: center;
}
div.pagination a, div.pagination span.current, div.pagination span.ellipsis {
    display: block;
    float: left;
}
div.pagination a:hover {
    background-color: #eee;
    text-decoration: none;
}
div.pagination span.current {
    font-weight: bold;
    background-color: #000;
    border-color: #000;
    color: #fff;
}
div.pagination span.ellipsis {
    border: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T05:03:51.367

存在索引问题，被认为是导致它在错误位置开始的索引。

解决了！:)

# wordpress - 从 Windows Live Writer 连接到 wordpress 博客时出错

> ID：12888066
> 
> 赞同：0
> 
> 时间：2012-10-15T01:03:58.630
> 
> 标签：wordpress, blogs, xml-rpc, windows-live-writer

我正在尝试将我的 wordpress 3.4.1 托管网络博客连接到 Windows Live Writer，以从 WLW 而不是 wordpress 提供的网络界面发布博客文章。

但是，我收到了屏幕截图所示的错误：

![博客详情](../Images/1137b539626190a5b925d325aa413372.png) ![错误信息](../Images/e681ce4ef91027a14b0aca33ed133694.png) 还附上了 xmlrpc.php 代码：

```
<?php
/**
 * XML-RPC protocol support for WordPress
 *
 * @package WordPress
 */

/**
 * Whether this is a XMLRPC Request
 *
 * @var bool
 */
define('XMLRPC_REQUEST', true);

// Some browser-embedded clients send cookies. We don't want them.
$_COOKIE = array();

// A bug in PHP < 5.2.2 makes $HTTP_RAW_POST_DATA not set by default,
// but we can do it ourself.
if ( !isset( $HTTP_RAW_POST_DATA ) ) {
    $HTTP_RAW_POST_DATA = file_get_contents( 'php://input' );
}

// fix for mozBlog and other cases where '<?xml' isn't on the very first line
if ( isset($HTTP_RAW_POST_DATA) )
    $HTTP_RAW_POST_DATA = trim($HTTP_RAW_POST_DATA);

/** Include the bootstrap for setting up WordPress environment */
include('./wp-load.php');

if ( isset( $_GET['rsd'] ) ) { // http://archipelago.phrasewise.com/rsd
header('Content-Type: text/xml; charset=' . get_option('blog_charset'), true);
?>
<?php echo '<?xml version="1.0" encoding="'.get_option('blog_charset').'"?'.'>'; ?>
<rsd version="1.0" xmlns="http://archipelago.phrasewise.com/rsd">
  <service>
    <engineName>WordPress</engineName>
    <engineLink>http://wordpress.org/</engineLink>
    <homePageLink><?php bloginfo_rss('url') ?></homePageLink>
    <apis>
      <api name="WordPress" blogID="1" preferred="true" apiLink="<?php echo site_url('xmlrpc.php', 'rpc') ?>" />
      <api name="Movable Type" blogID="1" preferred="false" apiLink="<?php echo site_url('xmlrpc.php', 'rpc') ?>" />
      <api name="MetaWeblog" blogID="1" preferred="false" apiLink="<?php echo site_url('xmlrpc.php', 'rpc') ?>" />
      <api name="Blogger" blogID="1" preferred="false" apiLink="<?php echo site_url('xmlrpc.php', 'rpc') ?>" />
      <api name="Atom" blogID="" preferred="false" apiLink="<?php echo site_url('wp-app.php/service', 'rpc') ?>" />
    </apis>
  </service>
</rsd>
<?php
exit;
}

include_once(ABSPATH . 'wp-admin/includes/admin.php');
include_once(ABSPATH . WPINC . '/class-IXR.php');
include_once(ABSPATH . WPINC . '/class-wp-xmlrpc-server.php');

// Turn off all warnings and errors.
// error_reporting(0);

/**
 * Posts submitted via the xmlrpc interface get that title
 * @name post_default_title
 * @var string
 */
$post_default_title = "";

/**
 * Whether to enable XMLRPC Logging.
 *
 * @name xmlrpc_logging
 * @var int|bool
 */
$xmlrpc_logging = 0;

/**
 * logIO() - Writes logging info to a file.
 *
 * @uses $xmlrpc_logging
 * @package WordPress
 * @subpackage Logging
 *
 * @param string $io Whether input or output
 * @param string $msg Information describing logging reason.
 * @return bool Always return true
 */
function logIO($io,$msg) {
    global $xmlrpc_logging;
    if ($xmlrpc_logging) {
        $fp = fopen("../xmlrpc.log","a+");
        $date = gmdate("Y-m-d H:i:s ");
        $iot = ($io == "I") ? " Input: " : " Output: ";
        fwrite($fp, "\n\n".$date.$iot.$msg);
        fclose($fp);
    }
    return true;
}

if ( isset($HTTP_RAW_POST_DATA) )
    logIO("I", $HTTP_RAW_POST_DATA);

// Make sure wp_die output is XML
add_filter( 'wp_die_handler', '_xmlrpc_wp_die_filter' );

// Allow for a plugin to insert a different class to handle requests.
$wp_xmlrpc_server_class = apply_filters('wp_xmlrpc_server_class', 'wp_xmlrpc_server');
$wp_xmlrpc_server = new $wp_xmlrpc_server_class;

// Fire off the request
$wp_xmlrpc_server->serve_request();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:18:03.803

要求 webhost 团队在服务器上重新安装 xmlrpc 并且它工作。

# ruby-on-rails-3 - Ruby on Rails - 在 Wice 网格中显示高级搜索结果

> ID：12888067
> 
> 赞同：3
> 
> 时间：2012-10-15T01:04:10.233
> 
> 标签：ruby-on-rails-3, search, activerecord, datagrid

我正在为这个真正的挑战工作一周，希望这里有人能找到解决方案。

在 Web 应用程序中，我有一个“客户”模型，它与许多其他表相关，例如“地址”、“联系人”、“交易”、“产品”等。现在我想允许我的用户根据一堆相关的模型属性搜索客户，比如交易类型、产品有效期等。另外，在应用程序的很多其他地方，我们使用“Wice Grid”来显示数据，并且我们喜欢这个网格的过滤器和排序功能。

即使它可能有效，我认为在大 Wice 网格的单独列中显示所有搜索属性也是一个坏主意，因为网格将是 4 英尺宽！

所以基本上，我想要实现的是拥有一个包含相关模型属性的大型高级搜索表单，其中用户将 kind_of “pre_filter”（范围）“Customers”以显示在 Wice 网格中。在这个结果 Wice Grid 中，我只会显示“客户”属性，因此用户将能够在这些“客户”属性上使用 Wice Grid 的内置过滤器和排序功能。但非常不幸的是，我们无法告诉 Wice Grid 使用特定的数据子集（范围）。好吧，我找不到怎么做！

因此，任何想法如何解决我的问题将不胜感激。即使您的建议不包括 Wice Grid，我也会考虑它，因为我处于死胡同。

非常感谢阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T21:36:48.563

听起来[Ransack](https://github.com/ernie/ransack)很适合这里。它允许您进行高级搜索查询（包括特定模型上的关系）。

我以前从未使用过 Wice Grid，但通过浏览文档应该可以将 Ransack 查询的结果直接传递到`initialize_grid`.

一个例子：

```
class CustomersController < ApplicationController
  def index
    @customers = Customer.search(query)
    @customers_grid = initialize_grid(@customers.result)
  end

  private

  def query
    params[:query]
  end
end 
```

我建议阅读 Ransack 的文档，它有很好的文档记录。

# javascript - 在 v8 和 Node.js 中保存函数回调

> ID：12888068
> 
> 赞同：9
> 
> 时间：2012-10-15T01:04:44.137
> 
> 标签：javascript, node.js, v8

您如何将 javascript 提供的回调保存在 v8 包装对象中以供将来使用，而不仅仅是在当前函数调用中。本质上，我想在 C++ 中创建一个 javascript 对象，并在使用 new Object() 创建时提供一个函数回调。然后在整个 c++ 对象生命周期中使用该回调。请参见下面的示例：

我遇到的问题是，当我尝试在不同的静态函数中使用 Handle 对象时，它会出现故障。

在节点 js 文件中：

```
var Object = require("./customModule");
var obj = new Object(function(){console.log("Callback called...")})

// Emit callback
obj.emitCallback(); 
```

在 C++ 模块头中

```
class Object : public node::ObjectWrap {

public:

    static void Init(v8::Handle<v8::Object> target);

    Object();

protected:

    v8::Handle<v8::Function> m_faceDetectCallback;

    static v8::Handle<v8::Value> New(const v8::Arguments& args);

    static v8::Handle<v8::Value> onEmitCallback(const v8::Arguments& args);
}

v8::Handle<v8::Value> Object::New(const v8::Arguments& args) {

    HandleScope scope;

    Object* obj = new Object();
    obj->Wrap(args.This());

    obj->m_faceDetectCallback = Handle<Function>::Cast(args[0]);

    //obj->m_faceDetectCallback = v8::Persistent<Function>::Cast(args[0]);

    // Works fine here.
    const unsigned argc = 1;
    Local<Value> argv[argc] = { Local<Value>::New(String::New("hello world")) };
    obj->m_faceDetectCallback->Call(Context::GetCurrent()->Global(), argc, argv);

    return args.This();
}

static v8::Handle<v8::Value> Object::onEmitCallback(const v8::Arguments& args){
    HandleScope scope;

    Object* obj = ObjectWrap::Unwrap<Object>(args.This());

    const unsigned argc = 1;
    Local<Value> argv[argc] = { Local<Value>::New(String::New("hello world")) };

        //!! Segfaults here
    if(obj->m_faceDetectCallback->IsCallable()){
        //obj->m_faceDetectCallback->Call(Context::GetCurrent()->Global(), argc, argv);
    }

    return scope.Close(v8::String::New("Start called"));
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T16:13:47.293

您需要使用`v8::Persistent`而不是标准手柄。`Handle`是基类`Local`，`Persistent`因此通过执行您正在执行的转换，您正在获取指向的指针，`v8::Function`但没有做任何告诉 V8 不要垃圾收集它的事情。

在你的课堂上有这个：

```
v8::Persistent<v8::Function> m_faceDetectCallback; 
```

并分配给

```
obj->m_faceDetectCallback = v8::Persistent<v8::Function>::New(args[0]); 
```

# windows-8 - Windows 8 RT - 动态生成 html 不渲染图像

> ID：12888071
> 
> 赞同：5
> 
> 时间：2012-10-15T01:05:25.040
> 
> 标签：windows-8, winrt-xaml

在 LocalState 目录中时，我无法在网页上加载图像。

具体来说，当文件路径引用 LocalState 目录时尝试启动网页时似乎存在安全问题。

当我右键单击 html 文件并在 Visual Studio 的浏览器中查看它时，该网页会加载图像。

我已将 src 标签的路径更改为： src="ms-appdata:///Local/Logo.jpeg" 它不起作用。

帮我...

示例代码

```
public static async Task Update(WebView webview, IStorageFile file) { 
  var html = await Windows.Storage.PathIO.ReadTextAsync(file.Path);
  webview.NavigateToString(html);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:51:21.037

NavigateToString 方法不适用于指向 LocalData 文件夹中图像的标记。（据我所知）。事实上，NavigateToString 也破坏了 JavaScript 和 CSS 链接。

**服务器上的图像**

一种解决方案是将源更改为指向网络服务器而不是本地数据。我不确定它是否适用于您的应用场景。

**图像和 HTML 作为内容**

第二种选择是将您的 html 和图像文件作为内容添加到您的应用程序并使用

```
WebView1.Navigate(new Uri("ms-appx-web:///assets/SampleHtmlPage.html")); 
```

加载 HTML。

**进程中的 HTTP 服务器**

这是一个在应用程序中使用自定义 HTTP 服务器来处理问题的解决方案。

[在 Metro WebView 中加载本地 HTML 内容 (Windows 8)](http://blog.jsolutions.co.uk/?p=492)

**Base 64 编码图像**

最后，还有另一种解决方案，使用 LocalData 文件夹中的图像的 Base64 编码。

```
internal async void MakeHtmlString()
{
  StorageFile imageFile; // get image file here.

  var html = 
     string.Format("<div><img src='data:image/png;base64,{0}'", 
                    await GetImageBase64(imageFile));
}

internal async Task<string> GetImageBase64(StorageFile imageFile)
{
  var imageStream = await imageFile.OpenAsync(FileAccessMode.Read);
  var inputStream = imageStream.GetInputStreamAt(0);
  var dataReader = new DataReader(inputStream);

  var dataResults = await dataReader.LoadAsync((uint)imageStream.Size);
  var bytes = new byte[dataResults];
  dataReader.ReadBytes(bytes);
  return Convert.ToBase64String(bytes);
} 
```

最后一种方法适用于图像，但不适用于 CSS 文件。

# python - Django：尝试从 GitHub 使用 django-audiofield 时出现导入错误

> ID：12888073
> 
> 赞同：1
> 
> 时间：2012-10-15T01:05:29.073
> 
> 标签：python, django, aptana

我正在尝试在我的 django 项目中使用[Github 上名为 django-audiofield 的 django 应用程序。](https://github.com/Star2Billing/django-audiofield)我正在使用 Aptana Studio IDE。我将它安装在我的虚拟环境中，但出现以下错误：

```
Traceback (most recent call last):
    File "/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/manage.py",    line 10, in <module>
    execute_from_command_line(sys.argv)
    File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
    File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
    File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
    File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
    File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
    File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/commands/validate.py", line 9, in handle_noargs
    self.validate(display_num_errors=True)
    File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
    File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/validation.py", line 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
    File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py", line 158, in get_app_errors
    self._populate()
    File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py", line 67, in _populate
    self.load_app(app_name)
    File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py", line 88, in load_app
    models = import_module('.models', app_name)
    File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
    File "/Users/home/virtualenv/venv/src/audiofield/audiofield/models.py", line 19, in <module>
    from audiofield.fields import AudioField
    File "/Users/home/virtualenv/venv/src/audiofield/audiofield/fields.py", line 20, in <module>
    from tasks import audio_convert_task
    File "/Users/home/virtualenv/venv/src/audiofield/audiofield/tasks.py", line 14, in <module>
    from celery.task import Task
  ImportError: No module named celery.task
Finished "/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/manage.py validate" execution. 
```

请协助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T23:38:14.940

我是这个包的维护者，感谢你的帖子，我意识到我们的需求中缺少 celery/django-celery。它现在已添加到最新版本中。

因此“pip install django-audiofield”将为您安装这些依赖项。如果您已经安装了 django-audiofield，您可以运行以下命令进行升级：“pip install django-audiofield --upgrade”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T01:41:11.607

你安装了[芹菜](http://celeryproject.org/)吗？如果不是，请安装 celery ( `pip install celery`)。如果有问题的 github 应用程序（链接会很好）在任何地方都有一个 requirements.txt 文件，请`pip install -r requirements.txt`安装应用程序的所有必需依赖项。

如果是，看起来您的[导入搜索路径](http://www.diveintopython.net/getting_to_know_python/everything_is_an_object.html#d0e4550)可能未正确设置以查找 Celery - 只是基于导入错误的猜测。

打开 django shell（`python manage.py shell`在项目的工作目录中输入）并输入`import sys; print sys.path`. 确保将 Celery 安装在这些目录之一中，因为[`sys.path`](http://docs.python.org/library/sys.html#sys.path)它指定了 python 模块的导入搜索路径。

如果它不包含在那里，您可以通过执行临时附加安装 celery 的目录`sys.path.append("<directory where celery is>")`（请注意反斜杠，因为您在 Windows 上）。如果这样做之后，您可以成功`from celery.tasks import Task`，那么您可以[`PYTHONPATH`](http://docs.python.org/using/cmdline.html#envvar-PYTHONPATH)适当地设置环境变量以使其永久化。

此外，由于您将 Celery 安装到[virtualenv](http://www.virtualenv.org/en/latest/)中，因此可能值得检查 django 和 Celery 是否在同一个 virtualenv 中。

最后，对 Celery 的最新提交表明[Celery 现在具有原生 Django 支持](https://github.com/celery/celery/commit/04b0027e64e6b1ec6211ff67e86128c8fe1eeed4)，但由于尚未作为稳定版本发布，您可能需要查看[`django-celery`](http://ask.github.com/django-celery/).

**编辑**（回应下面的评论）：

既然你提到你正试图让[django-audiofield](https://github.com/Star2Billing/django-audiofield)工作：它似乎[在 pypi 上](http://pypi.python.org/pypi/django-audiofield)。`pip install django-audiofield`这意味着一旦安装了所有必需的（非 python）依赖项，您就可以使用 pip（或 easy_install）来安装它，并且应该为您下载像 celery 这样的东西。

# javascript - 以 0 开头的 Javascript 警报编号

> ID：12888075
> 
> 赞同：2
> 
> 时间：2012-10-15T01:05:39.043
> 
> 标签：javascript

我有一个按钮，我在后面的代码中添加了一个`onclick`并传递了一个唯一 ID，该 ID 将传递给 js 函数。id 以 0 开头。

它不起作用，最终我发现它传递的数字 id 是错误的......

IE。看到这个：[js小提琴](http://jsfiddle.net/XYa6U/)

它在数字的开头和结尾与 ' 一起使用。只是想知道为什么 013 变成 11。我做了一些谷歌搜索，找不到任何东西......

干杯

罗宾

编辑：

多谢你们。是的，现在明白了。

因为在这种情况下，开头的 0 有一个含义，这里是邮件列表中的收件人 ID，我将使用 '013' 而不是 013，即一个字符串。然后我可以拆分 js 中的值，因为 3 个值中的每一个都代表一个不同的 id，它总是只有 1 个字符长，即 0-9。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T01:09:22.360

以 a 开头的数字文字`0`被视为八进制数。所以以 8 为底的 13 是以 10 为底的 11...

八进制数字文字已被弃用，但如果您未处于严格模式，仍然可以使用。

（您没有问，但是）以 开头的数字文字`0x`被视为十六进制。

[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Integers)上的更多信息。

在您的演示中，该参数称为`id`，这意味着您不需要对其进行数字运算 - 如果是这样，只需将其放在引号中并将其用作字符串。

如果您需要能够传递前导零但仍将数字视为以 10 为底以对其进行数字运算，则可以将其括在引号中以将其作为字符串传递，然后以以下方式将字符串转换为数字部队基地 10，例如：

```
something('013');

function something(id){    
    alert(+id);             // use unary plus operator to convert
    // OR
    alert(parseInt(id,10)); // use parseInt() to convert        
} 
```

演示：http: [//jsfiddle.net/XYa6U/5/](http://jsfiddle.net/XYa6U/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T01:08:34.667

`013`是八进制，不是十进制，十进制等于 11

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T01:09:33.760

您应该注意`013`以`0`. 在 Javascript 中，这会导致数字被视为八进制。一般来说，你会想要使用十进制和十六进制数字系统。[但是，正如这个问题所示](https://stackoverflow.com/questions/44569/octal-number-literals-when-why-ever)，八进制数有时很有用。

我希望这有帮助！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T01:11:38.660

如果数字的第一个数字为零，则 parseInt 将该数字解释为八进制。

您可以像这样指定以十为基数：

`parseInt(numberString, 10)`

您还可以使用这样的正则表达式删除这些零（结果将是一个字符串）：

`numberString.replace(/^0+/g, '');`

# java - 从jsp文件中读取xml

> ID：12888076
> 
> 赞同：0
> 
> 时间：2012-10-15T01:05:55.563
> 
> 标签：java, xml, jsp

所以我试图从一个jsp页面读取一个xml。它可以工作，但我正在阅读的 .xml 文件的路径似乎真的很挑剔。

```
<%
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse("new.xml");

doc.getDocumentElement().normalize(); 
```

%>

将其重定向到我硬盘上的 xml 文件可以正常工作，但是每当我尝试将其重定向到应用程序上的 .xml 文件时，我都会不断收到找不到路径文件、格式​​错误的 url 异常等。我什至尝试将其放入 WEB -INF 看看它是否可以从那里读取但它不能。

有没有办法或者不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T04:11:36.730

您*必须*创建 Java 类（Servlet 或模型类）来解析`XML`文档。在您的代码片段中，您*必须*指定 XML 文档的真实路径，并且`ServletContext.getRealPath(virtualPath)`将使用从虚拟路径获取真实路径的方法。

您在 Servelt 中的代码应该是，

```
String realPath=getServletContext().getRealPath("/WEB-INF/new.xml"); or "/new.xml" 
```

在 JSP 中，您可以使用隐式对象 - `application.getRealPath(string)`.

# php - PHP 输出 CSV 到电子邮件

> ID：12888084
> 
> 赞同：0
> 
> 时间：2012-10-15T01:06:39.627
> 
> 标签：php, email

我有一个脚本，该脚本当前从 wordpress 数据库中获取一些数据，然后遍历返回的行并使用 fputcsv()。文件句柄设置为：

```
$fh = fopen('php://output', 'w'); 
```

该脚本链接到网页的链接，当您单击该链接时，它会下载 CSV（使用 content-disposition 标头）。

是否可以写入 php://output 这个 CSV 文件，然后使用 PHP 的 mail() 函数将其发送到附件中？

我已经编写了一个邮件功能，它将 MIME 类型设置为多部分/混合，我只是不确定如何创建要通过电子邮件发送的实际附件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:10:30.123

请改用[tmpfile()](http://php.net/manual/en/function.tmpfile.php)。将您的 CSV 数据写入该临时文件，然后将其附加到您的电子邮件中。

另外，不要编写自己的 mime 处理/生成函数。使用 PHPMailer 或 Swiftmailer 之类的库来为您完成这项工作。更容易，更可靠。他们的部分附件处理代码允许您指定用户看到的文件名，因此即使它可能是“/tmp/abc123def”，它也会在实际电子邮件中显示为“data.csv”（或您指定的任何内容）。

# java - Java 正则表达式和模式匹配：在模式中找到不包含它们的“空白”？

> ID：12888085
> 
> 赞同：5
> 
> 时间：2012-10-15T01:06:51.270
> 
> 标签：java, regex, pattern-matching

所以，我需要为作业编写一个编译器扫描程序，并认为使用正则表达式会很“优雅”。事实上，我以前很少使用它们，而且是很久以前的事了。所以我忘记了大部分关于他们的东西，需要四处看看。我成功地将它们用于标识符（或者至少我认为是这样，我仍然需要做一些进一步的测试，但现在它们看起来都不错），但是我在数字识别方面遇到了问题。

该函数`nextCh()`读取输入中的下一个字符（前瞻字符）。我想在这里做的是检查这个 char 是否与 regex 匹配`[0-9]*`。我将每个匹配的字符附加到`str`当前令牌的字段中，然后读取该字段的 int 值。它可以识别单个数字输入，例如“123”，但我遇到的问题是，对于输入“123 456”，最终的 str 将是“123 456”，而我应该得到 2 个带有字段“123”和“ 456"。为什么“”被匹配？

```
private void readNumber(Token t) {
    t.str = "" + ch; // force conversion char --> String
    final Pattern pattern = Pattern.compile("[0-9]*");
    nextCh(); // get next char and check if it is a digit
    Matcher match = pattern.matcher("" + ch);
    while (match.find() && ch != EOF) {
        t.str += ch;
        nextCh();
        match = pattern.matcher("" + ch);
    }
    t.kind = Kind.number;
    try {
        int value = Integer.parseInt(t.str);            
        t.val = value;          
    } catch(NumberFormatException e) {
        error(t, Message.BIG_NUM, t.str);           
    } 
```

谢谢！

PS：我确实使用下面的代码解决了我的问题。不过，我想了解我的正则表达式中的缺陷在哪里。

```
 t.str = "" + ch;
    nextCh(); // get next char and check if it is a number
    while (ch>='0' && ch<='9') {
        t.str += ch;
        nextCh();
    }
    t.kind = Kind.number;
    try {
        int value = Integer.parseInt(t.str);            
        t.val = value;          
    } catch(NumberFormatException e) {
        error(t, Message.BIG_NUM, t.str);           
    } 
```

**编辑：**原来我的正则表达式也不适用于标识符识别（同样，包括空白），所以我不得不切换到类似于我的“解决方案”的系统（虽然有很多条件）。猜猜我需要再次研究正则表达式：O

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:13:25.130

我不是 100% 确定这是否与您的情况相关，但是：

```
Pattern.compile("[0-9]*"); 
```

由于星号，匹配字符串中任意位置的**零个或多个数字。**我认为空间匹配，因为它匹配“零数字”。如果您想确保 char 是一个数字，则必须使用加号匹配**一个或多个**：

```
Pattern.compile("[0-9]+"); 
```

或者，因为您一次只比较一个字符，所以只匹配**一个**数字：

```
Pattern.compile("^[0-9]$"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:20:26.333

您应该使用`matches`方法而不是`find`方法。从文档中：

> matches 方法尝试将整个输入序列与模式匹配
> 
> find 方法扫描输入序列，寻找与模式匹配的下一个子序列。

所以换句话说，通过使用`find`，如果字符串在任何地方都*包含*一个数字，你会得到一个匹配，但如果你使用`matches`整个字符串必须匹配模式。

例如，试试这个：

```
Pattern p = Pattern.compile("[0-9]*");
Matcher m123abc = p.matcher("123 abc");
System.out.println(m123abc.matches());  // prints false
System.out.println(m123abc.find());     // prints true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T01:15:54.090

使用更简单的正则表达式，例如

```
/\d+/ 
```

在哪里

*   `\d`表示一个数字
*   `+`表示一个或多个

在代码中：

```
final Pattern pattern = Pattern.compile("\\d+"); 
```

# ios - facebooksdk 3.1 for iOS 创建了奇怪的行为

> ID：12888087
> 
> 赞同：0
> 
> 时间：2012-10-15T01:07:15.603
> 
> 标签：ios, facebook

我安装了新的 FB-SDK - 现在我的 xcode 正在运行......

NSLog(@"...") 不再工作（是的，我什至在 applicationDidFinishLaunching 方法中尝试过）。

当我在代码中添加断点时，应用程序崩溃，出现任意错误......

我密切关注安装指南（两次），并且确信我做对了......不过，我确实将 FB-SDK 文件夹移动到了另一个文件夹，而不是安装程序安装的文件夹。当我部署到 iOS 5.1 时，3 个框架（帐户/广告支持/社交）设置为“可选”

有任何想法吗？

[编辑解决]

多亏了这个人 - 它又开始工作了：[http ://davidbits.blogspot.ch/2012/03/ios-nslog-is-not-working-on-simulator.html](http://davidbits.blogspot.ch/2012/03/ios-nslog-is-not-working-on-simulator.html)

不得不删除模拟器上的所有应用程序版本，现在它又可以工作了......

# javascript - IE8 和 Modernizr：对象不支持此属性或方法？

> ID：12888089
> 
> 赞同：4
> 
> 时间：2012-10-15T01:07:46.850
> 
> 标签：javascript, internet-explorer, modernizr

我在一个正在开发的站点上使用 Modernizr 2.6.2，在 IE8 中遇到了一个令人沮丧的错误。我正在将 Modernizr 加载到文档的开头：

```
<script src="js/vendor/modernizr-2.6.0-ck.js"></script> 
```

然后我在页面底部加载一个 base.js 文件，就在结束`</body>`标记之前。在那个 base.js 文件中，我有以下代码（[为了便于阅读，Hastebin 链接](http://www.hastebin.com/koyoturocu.php)）：

```
/**
 *  Non-jQuery hasClass function for checking the existence of
 *  class names on elements.
 *  @param {string} scripts The string of scripts to check
 *  @param {string} cls The class name we're looking for
 *  @return {boolean} True or false
 */
/*
function hasClass(scripts, cls) {
    var r = new RegExp('\\b' + cls + '\\b');
    return r.test(scripts);
}*/

/**
 *  Get ID from <body> tag
 */
function matchBodyID(match) {
    return match.toLowerCase() === document.body.id.toLowerCase();
}

/**
 *  Check to see if the body tag has a "data-scripts" attribute.
 *  If true, collect the contents. If false, set to false.
 */
// var dataScripts = document.body.getAttribute("data-scripts") || false;

/**
 *  Variables must be defined before we can use them.
 */
var Modernizr = Modernizr || {},
    ScaleText = ScaleText || {};

/*
 *  Using Modernizr.load, we can run our tests to see
 *  which features are available to us and load our
 *  polyfills to handle those that aren't
 */
var timestamp = new Date().getTime();
Modernizr.load([
    {
        load: [
            '//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js',
            'js/plugins/image-array-ck.js?t=' + timestamp,
            'js/plugins/jquery.debouncedresize-ck.js',
            'js/plugins/menu-ck.js?t=' + timestamp
        ],
        complete: function () {
            if (!window.jQuery) {
                Modernizr.load('js/vendor/jquery-1.8.1.min.js');
            }
            ScaleText.invoke();
            $("#skip-to-content").bind("click.menu", function (event) {
                event.preventDefault();
                var $this = $(this),
                $par = $($this.parent());
                $par.toggleClass("open");
            });
        }
    }, {
        test: matchBodyID('home') || matchBodyID('department'),
        yep: [
            'js/plugins/spin.min.js',
            'js/slideshow-ck.js',
            'css/royalslider/royalslider.css',
            'css/royalslider/rs-minimal-white.css',
            'js/plugins/tabs-ck.js?t=' + timestamp,
            'js/plugins/underscore-min.js'
        ]
    }, {
        test: matchBodyID('interior'),
        yep: [
            'js/plugins/spin.min.js',
            'js/plugins/tabs-ck.js?t=' + timestamp,
            // 'js/plugins/menu-ck.js?t=' + timestamp,
            'js/plugins/underscore-min.js'
        ]
    },
    // Check for iOS
    {
        test: Modernizr.appleios,
        yep: [
            'js/plugins/ios-ck.js'
        ]
    },
    // Functional polyfills
    {
        test: Modernizr.flexbox,
        nope: ['js/polyfills/flexie.js']
    }
]);

/*
 *  ScaleText
 *  An attempt to create a custom type scaler for
 *  large type that needs to scale to fit its parent
 */
ScaleText = {

    invoke: function () {
        $(".scalable").each(function (index, element) {
            var $parent = $(element),
                $wrapper = ScaleText.wrapIt($parent.first("div"));

            $parent.css({
                "overflow": "hidden",
                "opacity": 0
            });
            $wrapper.css({
                "-webkit-transform-origin": "left top",
                "-moz-transform-origin": "left top",
                "-ms-transform-origin": "left top",
                "-o-transform-origin": "left top",
                "transform-origin": "left top"
            });
            ScaleText.checkSize($parent, $wrapper);

            jQuery(window).on("debouncedresize.ScaleText", function () {
                ScaleText.checkSize($parent, $wrapper);
            });
        });
    },

    checkSize: function ($parent, $wrapper) {
        var scrollWidth = $parent[0].scrollWidth,
            width = $parent.width(),
            scrollHeight = $parent[0].scrollHeight,
            height = $parent.height(),
            ratio, wRatio, hRatio;

        wRatio = width / scrollWidth;
        hRatio = height / scrollHeight;
        ratio = (wRatio < hRatio) ? wRatio : hRatio;

        $wrapper.css({
            "-webkit-transform": "scale(" + ratio + ")",
            "-moz-transform": "scale(" + ratio + ")",
            "-ms-transform": "scale(" + ratio + ")",
            "-o-transform": "scale(" + ratio + ")",
            "transform": "scale(" + ratio + ")"
        });
        $parent.css({
            "opacity": 1
        });
    },

    wrapIt: function (element) {
        var content = $(element).html(),
            $wrapper = $("<div>" + content + "</div>");
        $(element).empty().append($wrapper);
        return $wrapper;
    }

}; 
```

出于某种原因，IE8 完全被阻塞了`Modernizr.load`，只说`Object doesn't support this property or method`. 附上截图。

关于为什么会发生这种情况的想法？

**编辑**

我应该提到我正在使用 Modernizr 的自定义版本：[http ://www.hastebin.com/fitaqireha.coffee](http://www.hastebin.com/fitaqireha.coffee)

![在此处输入图像描述](../Images/d5c429c333aeff70cf42a81ac7fe38ab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:38:11.567

我也得到了这个。看起来 Modernizr.load() 是可选的。以下来自modernizr-2.5.3的标题；

```
/*     
 * Modernizr has an optional (not included) conditional resource loader
 * called Modernizr.load(), based on Yepnope.js (yepnopejs.com).
 * To get a build that includes Modernizr.load(), as well as choosing
 * which tests to include, go to www.modernizr.com/download/
 */ 
```

您需要到[这里](http://www.modernizr.com/download/)再次获取包 - 请务必检查*Extra*类别下的*Modernizr.load 。*这样做将在文件末尾包含 yepnopejs。

 *[这](http://hastebin.com/yarahepite.coffee)是附加的，我把它放在我现有的modernizr.*.js 中，一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T13:27:30.420

我是居住在 Visual Studio 中的 .NET 开发人员，我使用了通用[的“Modernizr”NuGet 包](https://www.nuget.org/packages/Modernizr/)并偶然发现了同样的问题：它不包括`Modernizr.load()`(aka `YepNope`).

**我想提示 .NETters 使用包含该功能的[替代 NuGet 包“Modernizr full”](https://www.nuget.org/packages/Modernizr.full/)`load()`**。

除此之外，完整版还包括一个缩小的 .js 版本，而普通版没有（尽管我更喜欢自己使用 VS 的[Web Essentials 扩展](http://vswebessentials.com/)生成缩小版）。

另请注意，主要的 NuGet 包看起来确实是最新的（目前在 Modernizr v. 2.8.3，例如最新的），而“Modernizr full”目前在 2.6.2）。但对我来说这就足够了。当然，如果您需要所有闪亮的新和修剪，您应该使用[Modernizr 下载](http://modernizr.com/download/)功能作为接受的答案状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T17:51:03.100

我在 IE8 中遇到了同样的“对象不支持此属性或方法”错误（尽管在 Chrome 中没有）。

因为我有其他页面引用了相同的 Modernizr 声明脚本，所以我怀疑我的问题出在其他地方。原来我在加载块中有一个额外的逗号：

```
Modernizr.load([
   {
      load: [
         'path/to/something.js',,  // <--removing this extra comma resolved the issue
         'path/to/something-else.js'
      ]
   }
]); 
```*

# php - 如果查询返回 true，则在我的模型中返回一个变量

> ID：12888092
> 
> 赞同：1
> 
> 时间：2012-10-15T01:08:19.500
> 
> 标签：php, codeigniter

# 模型

```
 $q = $this->db->get_where('person', array('p_id' => $p));
  if($q->num_rows()!=1) 
    {
    redirect('General_Area/Home');
    exit();
    }
    else
    {   
         . . . 
```

好的 因此，一旦模型被初始化，它就会查询数据库并查找恰好一个匹配项，如果找到它就会在 else 语句上移动。但是，如果没有找到它会`redirect('General_Area/Home');`

我如何在那里传递消息？`object`在我的控制器中，如果查询成功，我将返回一个。

在我看来，我是`echo obj->table_col_name`

```
 $q = $this->db->get_where('person', array('p_id' => $p));
  if($q->num_rows()!=1) 
    {
    return $Error = 'You have not been found!...';
    #redirect('General_Area/Home');
    exit();
    }
    else
    {   
         . . . 
```

如果`$q`没有成功，我希望能够`echo $error;`在视图中让用户看到消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:37:51.327

## In your Model

```
if($q->num_rows()>0)
{
    return array('result'=>$q->result(), 'message'=>'This is a message');
}
return false; 
```

## In the Controller

```
$this->load->model('your_model_name');
$data['query']=$this->your_model_name->model_function_name();
if(!$data['query']['result'])
{
    redirect('General_Area/Home');
    exit();
}
else $this->load->view('your_view_name',$data); 
```

## In your View

```
if(isset($query))
{
    foreach($query as $row)
    {
        // code goes here to echo columns
    }
    //and message is available as $message so you can print it like
    if(isset($message)) echo $message;
} 
```

## Message on redirect

Also if you want to send a message when you redirect to another page you can use in your controller

```
if(!$data['query']['result'])
{
    $this->session->set_flashdata('message', 'your message text here!');
    redirect('General_Area/Home');
    exit();
} 
```

So you can print the message in the view like

```
echo $this->session->flashdata('message'); 
```

Read more about [Flashdata](http://codeigniter.com/user_guide/libraries/sessions.html).

# php - 如何选择数据库中特定列具有值的所有行？

> ID：12888097
> 
> 赞同：0
> 
> 时间：2012-10-15T01:08:48.937
> 
> 标签：php, mysql

我正在尝试找到一种方法来仅在特定列具有值的情况下选择行中的所有条目

IE

## 图书

* * *

```
NAME                ISBN            DATE
Goldilocks          217500          12th
Rapunzel            381938
War and peace       192836          17th 
```

我想要的查询是：

从 date has_value 的书籍中选择 *

因此，来自行 goldilocks 和 war and Peace 的所有数据都将被返回，因为它们在日期列中有一个条目，而 war and Peace 不会

我如何实现 has_value？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T01:09:57.560

```
 SELECT NAME,ISBN,DATE WHERE DATE IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T01:11:03.870

```
SELECT * FROM books WHERE date IS NOT NULL AND TRIM(date) != "" 
```

您必须注意具有`NULL`值和可能`empty`值的列（如果默认值未设置为`NULL`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T01:47:54.663

```
SELECT * FROM books WHERE date !="" 
```

# javascript - Mongoose.js：如何通过人口实现树状结构

> ID：12888103
> 
> 赞同：7
> 
> 时间：2012-10-15T01:09:38.410
> 
> 标签：javascript, mongodb, mongoose

我正在使用 Mongoose 3.x 实现一个树结构（类似于 Mongo 文档中的这个），但我不确定封装所有逻辑的最佳方法，以加载特定节点及其兄弟节点和祖先节点，特别是在 ref 与 ref-er 位于同一集合中的情况下，如何最好地使用填充功能。

在某些情况下，我正在使用的树是未编辑节点但可能随时将新子节点添加到任何节点的树。到目前为止，我已经使用一组模型方法正常工作，这些方法在初始查找后加载对象，但似乎应该有更好的方法来轻松加载单个分支，其中包含我需要的所有父级和兄弟级数据控制器中的命令，并将所有相关人口封装在模型上的一些方便的查找方法中。

那么，我尝试使用的基本架构可能是这样的（也可以在此处获得：[https](https://gist.github.com/3889616) ://gist.github.com/3889616 ）：

```
// Sub-document to store parent ref along with it's value (a form of caching)
var Parent = new Schema({
    id: ObjectId
  , text: String
});

// Main tree-node element schema
var Branch = new Schema({
    text: {
        type: String
      , required: true }
  , date: {type: Date, default: Date.now }
  , trail: [Parent]
  , parentBranchId: ObjectId
  , parentBranch: { type: Schema.Types.ObjectId, ref: 'Branch' }
  , _children: [{type: Schema.Types.ObjectId, ref: 'Branch'}]
  // These two have been commented out because I have no clue how to best implement 
  // , _priorSiblings: { type: Schema.Types.ObjectId, ref: 'Branch' }
  // , _followingSiblings: { type: Schema.Types.ObjectId, ref: 'Branch' }
}); 
```

然后，我希望能够通过类似以下代码的方式加载带有相关相关数据的分支，尽管此时我几乎迷路了，并且可能是一个很好的基础：

```
 req.app.models.Branch
    .findById(req.param("id"))
    .populate("parentBranch")
    .populate("parentBranch._children")
    .exec(...) 
```

最终，我很想有一些我可以抽象成 Mongoose 的“树”插件的东西，但我认为我必须首先正确地构建这个架构。有任何想法吗？

FWIW，归根结底，我真正需要的每个分支的数据是父级、下一个兄弟级、前一个兄弟级（都在创建时间方面）和父级的所有子级。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-15T19:12:21.360

我知道这个问题很老了，但是你看过 mongoose-tree 模块吗？[https://github.com/franck34/mongoose-tree](https://github.com/franck34/mongoose-tree)

它有一个很好的 API 来处理 IMO 对象之间的关系。

# php - 如何通过检查和取消选中代码到codeigniter来处理这种多重删除功能？

> ID：12888113
> 
> 赞同：-2
> 
> 时间：2012-10-15T01:11:34.103
> 
> 标签：php, mysql, codeigniter

下面是我在非 codeigniter 代码工作中制作的 php 代码。这是一个全选和取消全选删除功能。如果它在控制模型或视图中，我不确定该放在哪里？谁能帮帮我吗。

```
<?php

/*Check Box Commands*/
$id=$row_notification['user_id'];

if(isset($_POST['Delete'])) {
$checkbox = $_POST['checkbox'];
mysql_select_db($database_connection_ched, $connection_ched);
$id=$row_notification['user_id'];

for($i=0;$i<count($checkbox);$i++)
  {
$delete = "DELETE FROM tb_user WHERE user_id=$checkbox[$i]";
mysql_query($delete,$connection_ched);

}
$result2 = mysql_query($delete);

if($result2)
{
echo "[removed]alert ('Successfully Deleted');[removed]"; 
echo "<meta http-equiv=\"refresh\" content=\"0;URL=notification.php?\">"; }

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:18:08.840

您不应该使用“元刷新”进行重定向。

使用 PHP 的 header 函数：

> [http://www.php.net/manual/en/function.header.php](http://www.php.net/manual/en/function.header.php)

您应该将该代码放入您的控制器中。

例子：

```
class MyController extends CI_Controller {
    public function index() {
        /*Check Box Commands*/
        $id=$row_notification['user_id'];

        if(isset($_POST['Delete'])) {
        $checkbox = $_POST['checkbox'];

        // use CodeIgniter models when communicating with your database
        // and when manipulating any database data
        // more on: http://codeigniter.com/user_guide/general/models.html
        mysql_select_db($database_connection_ched, $connection_ched);
        $id=$row_notification['user_id'];

        for($i=0;$i<count($checkbox);$i++) {
            $delete = "DELETE FROM tb_user WHERE user_id=$checkbox[$i]";
            mysql_query($delete,$connection_ched);
        }

        $result2 = mysql_query($delete);

        if($result2) {
            // as I pointed out, don't use "meta refresh" for redirection
            // and dont use alert for notifying anyone-anywhere
            echo "[removed]alert ('Successfully Deleted');[removed]";
            echo "<meta http-equiv=\"refresh\" content=\"0;URL=notification.php?\">"; }
        }
    }
} 
```

还有一点建议：

**当某些内容被删除、插入、更改或类似情况时，您不必通过 JavaScript 的警报功能通知任何人。警报有点讨厌。**

另外，请查看以下链接：

*   [http://ellislab.com/codeigniter/user_guide/general/models.html](http://ellislab.com/codeigniter/user_guide/general/models.html)
*   [http://ellislab.com/codeigniter/user_guide/general/views.html](http://ellislab.com/codeigniter/user_guide/general/views.html)
*   [http://ellislab.com/codeigniter/user_guide/general/controllers.html](http://ellislab.com/codeigniter/user_guide/general/controllers.html)

这应该可以帮助您更清楚地了解 MVC 是如何工作的，以及 CodeIgniter 是如何工作的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T01:17:06.157

为什么您的结果应该在 javascript 上并令人耳目一新？这是错误的，你需要它。脚本将执行一次，不刷新。您只需要打印结果。

采用

```
 if ($result2 === true)  { echo 'Result: deleted '; } 
```

代替：

```
echo "[removed]alert ('Successfully Deleted');[removed]"; 
echo "<meta http-equiv=\"refresh\" content=\"0;URL=notification.php?\">"; } 
```

用内部 for 循环检查它`var_dump()`，可能没有接收到数据。

或者尝试更好地修复您的代码：

```
for($i=0;$i<count($checkbox);$i++)
  {
    $delete = "DELETE FROM tb_user WHERE user_id={$checkbox[$i]}";
    mysql_query($delete,$connection_ched);

} 
```

# html - 如何隐藏重力表单字段中的 HTML 使其不会出现在确认消息中？

> ID：12888116
> 
> 赞同：0
> 
> 时间：2012-10-15T01:12:24.023
> 
> 标签：html, css, forms, gravity

基本上我使用的是单选按钮字段，并在字段本身中添加了 HTML 以链接和预览插件类，如下所示

领域：轿车，3人座`<a href="http://mysite.com/wp-content/uploads/2012/10/carimg.png" class="thumbsniper" target="_blank">View</a>`

这很好用，除非表单使用相应字段的合并标签 {vehicle you would like} 给出确认消息，它也将条目和所有 HTML 显示为字符串，这显然是一个问题。我怎样才能解决这个问题并让确认处理html这样？我是否必须将所有这些 html 添加为一个类并将其应用于唯一条目 css 而不是内联，或者是否有某种方法可以弄乱合并标签或对确认消息类进行最小的 css 更改？

表单 UI 中确认字段中的内容（目前使用内联样式进行测试，我知道这不是最好的方法，但无论哪种方式都不能真正解决我的问题）：

```
<p style="text-align:center;"><strong style="font-size:16px;"> Thank you!!!</strong>
We will send you an <strong style="color:#8E0F0F;">Email Quote</strong> within the next <strong style="color:#8E0F0F;">30 minutes.</strong>*
                      *Subject to Driver Availability.
<strong style="color:#8E0F0F;">Important Warning: When we send you an Email Quote, it might end up in your SPAM/JUNK EMAIL folder, so please double check that folder.</strong></p>
<strong>Submitted:</strong>{date_mdy}
<strong>Status:</strong> Waiting to be accepted by a Service Provider.
<strong>Pick Up:</strong>  On{Pick-Up On::7}, at {At::8} at
{Address (Street Address):9.1} {Address (City):9.3}
<strong>Drop Off:</strong> {Drop-Off Airport/Cruise Port:10}
<strong>Passenger or group name:</strong> {Passenger/Group Name:15}
<strong>Number of Passengers:</strong> {Number of People in the Group:16}
<strong>Contact Person:</strong>{Contact Person's Name:17}
<strong>Quote will be emailed to:</strong>{Contact Person's Email:18}
<strong>Rate:</strong> {What Type of Vehicle Would You Like?:6} Quote to be Provided. <strong>15% Online Discount Active!</strong> 
```

同一张表格上的额外问题，有没有办法将时间戳附加到 {date_mdy} 合并标签，所以它实际上包括确认中的提交时间而不仅仅是日期？显然，由于进入时间显示在 WP 后端，所以存在钩子，但我不知道如何让它在这里工作。谢谢大家的回复，这个订车表格一直很头疼。

# mysql - 查询以获取不在 ID 列表中但与列表中的项目相关的项目

> ID：12888117
> 
> 赞同：1
> 
> 时间：2012-10-15T01:12:30.663
> 
> 标签：mysql

我已经看这个太久了，我已经失去了所有的逻辑能力。非常感谢指针/帮助。

我有如下三个表，其中的列很重要。

表：类别

```
+-------+--------------+
| 猫ID | 猫名 |
+-------+--------------+
| 1 | 某人名 |
| 2 | 字符串名 |
| 3 | 第三只猫 |
| 4 | 字符串猫 |
| 5 | 弦其他 |
| 6 | 第六猫 |
+-------+--------------+
```

表：产品

```
+-----+------+
| 标识符 | 猫 |
+-----+------+
| 22 | 1 |
| 33 | 1 |
| 44 | 7 |
| 55 | 9 |
+-----+------+
```

表：产品目录

```
+-----+-------+
| 标识符 | 猫ID |
+-----+-------+
| 22 | 2 |
| 22 | 6 |
| 33 | 3 |
| 33 | 5 |
| 44 | 3 |
| 44 | 6 |
| 55 | 5 |
| 55 | 6 |
+-----+-------+
```

我有一个类别 ID 列表。我需要使用此列表返回具有 catName 中特定字符串的类别。

如果（来自类别），我希望将类别添加到此列表中：

```
catName LIKE %string% AND catID IN ($mycats) 
```

显然那里没有问题。

但是，我还需要返回类别 2 和 5（包含“字符串”），但前提是它们（在 prodcats 中）2 与 catID 1 中的产品相关。

那是我头疼的地方。

了解以下内容可能很有用：

*   $mycats 中的 ID 可能会或可能不会在 products 表中以 pCat 的形式出现。
*   $mycats 中只会有一个或两个项目 - 如果有两个，一个永远是一只猫，它的名字包含我正在寻找的字符串，第二个永远不会。

**已编辑： - 添加了上面的示例表数据和下面的示例，以使这一点更清楚。**

一个例子是：$mycats=1,4

我需要得到 catID 4 - 其名称都包含“字符串”。这很容易。

但我也想获得 catID 2 和 5，因为它们也包含字符串，虽然不在 $mycats 中，但它们附加到产品中 catID 1 中的表 prodcats 中的 pID。

我希望这让它更清楚一点。在这一点上，这对我来说就像泥泞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:02:56.747

也将包含在您的要求中的次要类别 ID 可以表示为：

```
select c.*
from Product p
join Prodcats pc on pc.pID = p.pID
join Categories c on c.catID = pc.catId and c.catName like '%string%'
where pCat in (1,4) 
```

现在您只需`union`使用原始查询即可：

```
select *
from Categories = pc.catId 
where catID in (1,4)
and c.catName like '%string%'
union
select c.*
from Product p
join Prodcats pc on pc.pID = p.pID
join Categories c on c.catID = pc.catId and c.catName like '%string%'
where pCat in (1,4) 
```

笔记：

*   `union`自动删除重复项，因此不需要`distinct`. （`union all`保留重复）
*   这个查询应该执行得很好——两个类别的路径在一个单独的查询中，所以优化会很好
*   类别名称的条件在连接的`on`子句中，因为这样的子句*在连接*时执行，而将条件放在`where`子句中将*在所有可能的连接完成后*执行，这意味着要进行更多的连接。底线：这种方式要快得多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:48:00.987

好吧，我*想*我已经知道你在追求什么了。

诀窍是向后工作。首先获取通过产品链接的类别（使用下面的`associatedCategories`派生表选择）。然后加入与字符串匹配的那些类别。

```
select * from
categories
inner join (
    select catID from
    products
    inner join prodcats on products.pID = prodcats.pID
    where
    pCat in (1,4)
) associatedCategories on categories.catID = associatedCategories.catID
where catName LIKE '%string%'; 
```

# mysql - 带有字符串列的mysql按位运算

> ID：12888118
> 
> 赞同：5
> 
> 时间：2012-10-15T01:12:57.903
> 
> 标签：mysql, string, bit-manipulation, bitwise-operators, flags

我需要在 MySQL 表中存储一些用户记录的标志（我正在使用 InnoDB）：

```
---------------------------
| UserId    | Mask        |
| -------------------------
| 1         | 00000...001 |
| 2         | 00000...010 |
--------------------------- 
```

标志的数量大于 64，所以我不能使用 BIGINT 或 BIT 类型来存储值。

我不想使用多对多关联表，因为每个用户可以拥有多个配置文件，每个配置文件都有其一组标志，并且它会很快变得太大。

所以，我的问题是，是否可以将这些标志存储在 VARCHAR、BLOB 或 TEXT 类型的列中，并且仍然对它们进行按位运算？如果是，如何？

现在我只需要一个操作：给定一个掩码 A，其中 X 位设置为 1，用户至少将这些 X 位设置为 1。

谢谢！

**编辑**

对于阅读本文的任何人，我都找到了解决方案（至少对我而言）。我使用 VARCHAR 作为掩码字段，在搜索特定掩码时，我使用以下查询：

```
select * from my_table where mask like '__1__1' 
```

将返回第 3 位和最后一位设置为 on 的每条记录。“_”符号是“任何单个字符”的 SQL 占位符（也许只有 mySQL？）。

就速度而言，现在做得很好，稍后我的用户群增长时将不得不检查。

无论如何，感谢您的意见。当然，欢迎其他想法。

# r - 直接从 URL 加载 PNG 文件

> ID：12888120
> 
> 赞同：17
> 
> 时间：2012-10-15T01:13:17.953
> 
> 标签：r, png

我正在使用该`png`包将 PNG 加载为光栅图像，然后绘制它们。PNG 来自在线资源，即维基百科。我可以使以下工作：

```
library(png)

pngURL <- "http://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Flag_of_Afghanistan.svg/150px-Flag_of_Afghanistan.svg.png"

# Works:
download.file(pngURL, "temp.png", mode = "wb")
localPNG <- readPNG("temp.png")
plot(1)
rasterImage(localPNG, 0.8, 0.8, 1.2, 1.2) 
```

但是，与其`download.file()`在本地存储 PNG，然后重新加载它，不如直接从 URL 加载 PNG。但是，这不起作用：

```
# Does not work:
internetPNG <- readPNG(pngURL) 
```

因为它导致

```
Error in readPNG(pngURL) : 
  unable to open http://upload.wikimedia.org/wiki... 
```

有没有人有关于如何让它工作的建议，或者是否有特殊原因 R 不会从 URL 加载这个 PNG？

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-15T01:22:46.667

`getURLcontent`在`RCurl`包装中使用。

```
library(RCurl)
myurl <- "http://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Flag_of_Afghanistan.svg/150px-Flag_of_Afghanistan.svg.png"
my_image <-  readPNG(getURLContent(myurl)) 
```

# iphone - Objective-C If 语句比较浮点数不起作用

> ID：12888121
> 
> 赞同：1
> 
> 时间：2012-10-15T01:13:24.387
> 
> 标签：iphone, objective-c, ios, xcode, if-statement

这实际上是我遇到过的最奇怪的事情。所以，我有一个浮点数`ratingDecimal`，我使用一些条件来比较它。以下是条件：

```
 if (ratingDecimal >= 0.0) {

    if (ratingDecimal < 0.3 && ratingDecimal != 0.3) {

        ratingDecimal = 0.0;

        NSLog(@"bigger or equal to 0 and smaller than 0.3");
    }
}

if (ratingDecimal >= 0.3) {

    if (ratingDecimal < 0.8 && ratingDecimal != 0.8) {

        ratingDecimal = 0.5;

        NSLog(@"middle");
    }
}

if (ratingDecimal >= 0.8) {

    NSLog(@"bigger or equal to 0.8");

    ratingDecimal = 1.0;
} 
```

这是一个奇怪的问题。我已将其设置`ratingDecimal`为 0.8，控制台记录`ratingDecimal`为：

> 0.8

但调用：

> 中间

`ratingDecimal`仅当大于或等于 0.3 但小于 0.8 且不等于 0.8时才应调用。

应该被调用的语句是：

```
if (ratingDecimal >= 0.8) {

NSLog(@"bigger or equal to 0.8"); 

ratingDecimal = 1.0;

} 
```

但我没有看到

> 大于或等于 0.8

您可能想知道为什么我的条件如此繁琐和复杂，它们可以很简单：

```
if (ratingDecimal >= 0.3  < 0.8) 
```

他们曾经是这样的，但由于这从来没有奏效，我一直在打破这个声明，它仍然表现得很奇怪。

为什么会这样！？

这是一个图像示例：

![问题](../Images/1e8f64d63149bbd0d2d74d8758871296.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T01:17:01.320

您的`ratingDecimal`值可能类似于 0.7999999999999。当打印到控制台时，可能会将其四舍五入为 0.8，但*比较*仍然认为它小于 0.8。

这是由于浮点数的二进制性质。有关这方面的大量信息，请参阅[每位计算机科学家应该了解的关于浮点运算的知识。](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T01:38:15.663

@Greg 给出了一个很好的答案。我想指出，您可以以更清晰和更简单的方式编写该代码：

```
if (ratingDecimal >= 0.0) {
    if (ratingDecimal < 0.3) {
        ratingDecimal = 0.0;

        NSLog(@"bigger or equal to 0 and smaller than 0.3");
    } else if (ratingDecimal < 0.8) {
        ratingDecimal = 0.5;

        NSLog(@"middle");
    } else {
        ratingDecimal = 1.0;

        NSLog(@"bigger or equal to 0.8");
    }
} else {
    // negative
} 
```

作为一个仅供参考 - 一条线，如：

```
if (ratingDecimal < 0.3 && ratingDecimal != 0.3) { 
```

没有这样的意义。如果一个数字小于 0.3，那么它一定不等于 0.3，所以第二次检查不会做任何有用的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:06:08.113

您可以根据需要使用诸如 roundf() 之类的函数。

# python - 如何使用 pygooglevoice 解析和删除短信？

> ID：12888123
> 
> 赞同：0
> 
> 时间：2012-10-15T01:13:42.720
> 
> 标签：python, parsing, beautifulsoup, voice

我正在尝试利用 pygooglevoice 接收消息，然后立即使用其 ID 将其删除，`delete()`但我无法弄清楚。

这是文档：[http](http://sphinxdoc.github.com/pygooglevoice/) ://sphinxdoc.github.com/pygooglevoice/ ：

```
from googlevoice import Voice 
from googlevoice.util import input 
import sys, BeautifulSoup

voice = Voice()
voice.login()
voice.sms()

def sendTextMessage(phoneNumber,text):
    voice.send_sms(phoneNumber, text)
    return 0

def extractsms(htmlsms):
    """
    extractsms  --  extract SMS messages from BeautifulSoup tree of Google Voice SMS HTML.

    Output is a list of dictionaries, one per message.
    """
    msgitems = []                                       # accum message items here
    #   Extract all conversations by searching for a DIV with an ID at top level.
    tree = BeautifulSoup.BeautifulSoup(htmlsms)         # parse HTML into tree
    conversations = tree.findAll("div",attrs={"id" : True},recursive=False)
    for conversation in conversations :
        #   For each conversation, extract each row, which is one SMS message.
        rows = conversation.findAll(attrs={"class" : "gc-message-sms-row"})
        for row in rows :                               # for all rows
            #   For each row, which is one message, extract all the fields.
            msgitem = {"id" : conversation["id"]}       # tag this message with conversation ID
            spans = row.findAll("span",attrs={"class" : True}, recursive=False)
            for span in spans :                         # for all spans in row
                cl = span["class"].replace('gc-message-sms-', '')
                msgitem[cl] = (" ".join(span.findAll(text=True))).strip()   # put text in dict
            msgitems.append(msgitem)                    # add msg dictionary to list
    return msgitems

for message in extractsms(voice.sms.html):
    print message['text']
    message['id'].delete() 
```

出现以下错误：

```
Traceback (most recent call last):
   File "/Users/Matthew/Desktop/movieDownloader.py", line 38, in <module>
   message['id'].delete() AttributeError: 'unicode' object has no attribute 'delete' 
```

我不相信我使用`delete()`正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:53:46.483

您想对作为对象的消息执行删除操作。我在[pygooglevoice](http://sphinxdoc.github.com/pygooglevoice/examples.html#delete-messages)文档中找到了以下代码：

```
from googlevoice import Voice

voice = Voice()
voice.login()

for message in voice.sms().messages:
    if message.isRead:
        message.delete() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:50:07.410

从 googlevoice 导入语音

```
voice = Voice()
voice.login()

for message in voice.sms().messages:
    if message.isRead:
        message.delete() 
```

# javascript - 在 iOS 和 Ember 中处理 touchMove 事件

> ID：12888128
> 
> 赞同：2
> 
> 时间：2012-10-15T01:14:19.253
> 
> 标签：javascript, ember.js, touch, dom-events

我正在向使用 Flame.js 的 Ember 应用程序添加 iOS 支持。大多数 Flame.js 小部件[目前没有内置的触摸事件支持](https://github.com/flamejs/flame.js/issues/76)，所以我正在努力将它添加到我需要的小部件中。对于单击和某些状态转换，我已经得到`touchStart`并且`touchEnd`工作得很好。

然而，`touchMove`到目前为止一直一团糟。我需要它来拖动，为此我需要跟踪运动的开始位置和位置。到目前为止，我还无法始终如一地从`touchMove`. [各种](https://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariWebContent/HandlingEvents/HandlingEvents.html) [资源](http://www.sitepen.com/blog/2011/12/07/touching-and-gesturing-on-iphone-android-and-more/)表明我应该在`event.touches`数组中查找我的数据，但是到目前为止我构建的 jsFiddles`TypeError`在我尝试进入`length`该数组时都会抛出，他们声称这是未定义的。（通常的查看位置、`event.pageX`、`event.pageY`等也未定义。）

我正在使用 iPad 和[Phantom Limb](http://www.vodori.com/blog/phantom-limb.html)进行测试，使用后者我可以通过访问来获取数据`originalEvent`，但这在实际的 iPad 上不起作用，我认为因为该`originalEvent`属性是 Phantom Limb 工作方式的人工制品. （我的理论是访问是访问Phantom Limb 转换为`originalEvent`的原始文件。）`mouseMove``touchMove`

为什么`event.touches`数组对我来说是未定义的？更重要的是，我在哪里可以获得触摸位置数据以便我可以拖动？

这是我[最具代表性的 jsFiddle](http://jsfiddle.net/pjmorse/Awyg8/)。单击该按钮以获取一个面板，如果这有效，您可以通过拖动其标题栏来重新定位它。App.TestPanel 中的`titleView`Flame.State 扩展覆盖了 Flame 本身的原始状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T02:56:24.117

我不认为它只是 PhantomLimb 的神器。我们有类似的挑战，并使用以下内容：

```
normalizeTouchEvent = function(event) {
    if (!event.touches) {
        event.touches = event.originalEvent.touches;
    }
    if (!event.pageX) {
        event.pageX = event.originalEvent.pageX;
    }
    if (!event.pageY) {
        event.pageY = event.originalEvent.pageY;
    }
}; 
```

# javascript - 从服务器隐藏设备类型？

> ID：12888130
> 
> 赞同：0
> 
> 时间：2012-10-15T01:15:05.987
> 
> 标签：javascript, html, sharepoint, mobile

我正在尝试在移动浏览器上阅读来自 SharePoint 网站的 RSS 源（例如[这个](http://usermanagedsolutions.com/SharePoint-User-Toolkit/_layouts/listfeed.aspx?List=%7B97A06CC2-00B1-48B8-B72D-BE1E9D490EB8%7D)）。问题在于，出于某种神秘原因，SharePoint 不向移动设备提供 RSS。

我该如何解决这个问题？有没有办法隐藏设备类型来欺骗服务器？

[编辑] 我正在寻找 html 或 JavaScript 解决方案，这是针对公共网站的，我不能指望所有访问者都更改他们的移动浏览器设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:32:52.093

您将需要更新 web 应用程序 app_browser 目录中的 compat.browser 文件。你可以在这里了解更多

[http://technet.microsoft.com/en-us/library/ff393836.aspx](http://technet.microsoft.com/en-us/library/ff393836.aspx)

# java - 接口中的静态常量默认为 0——为什么会这样？

> ID：12888132
> 
> 赞同：3
> 
> 时间：2012-10-15T01:15:15.800
> 
> 标签：java, android, interface, static, dalvik

我的界面中的静态最终值有奇怪的行为：

```
public interface IDictionaryErrorTypes {

    final static int ERROR_UNKNOWN      = 0;
    final static int ERROR_XML      = 1;
    final static int ERROR_CONNECTION   = 3;

}

public interface IDictionaryListModel extends IDictionaryErrorTypes,
                                                    //... and other interfaces
{

}

public class DictionaryListModel implements IDictionaryListModel {

// ... some code ...

private int getErrorCode(Exception error) {
    // determinate the error code
    if (error instanceof ParserConfigurationException
            || error instanceof SAXException
            || error instanceof SAXParseException) {
        return ERROR_XML;
    } else if (error instanceof UnknownHostException
            || error instanceof MalformedURLException
            || error instanceof IOException) {
        return ERROR_CONNECTION;
    } 
    return ERROR_UNKNOWN;
} 
```

现在，当我运行应用程序 ERROR_XML 时，ERROR_CONNECTION 和 ERROR_UNKNOWN 值等于零 - 0。在我看来，这很奇怪。请看附件图片

![java静态字段接口错误](../Images/faa4d59c05540049124ef6c0216d3fc8.png)

如果我在我的模型中使用`IDictionaryErrorTypes.ERROR_CONNECTION`它仍然具有相同的行为。但是，如果我删除`"implements IDictionaryErrorTypes"`然后使用`IDictionaryErrorTypes.ERROR_CONNECTION`它就可以工作-常量值与听起来完全一样。

当我使用类而不是接口时，它也可以正常工作。

有人可以解释这种行为吗？（ps我使用的是android平台）

ps(2) 我还尝试添加/删除“final”、“static”、“public”关键字（这就是图像和代码中的接口声明有点不同的原因）。但是行为是一样的

**工作版本的 smali 代码（使用类而不是接口）：**

```
.method private getErrorCode(Ljava/lang/Exception;)I
    .registers 3
    .parameter "error"

    .prologue
    .line 145
    instance-of v0, p1, Ljavax/xml/parsers/ParserConfigurationException;

    if-nez v0, :cond_c

    .line 146
    instance-of v0, p1, Lorg/xml/sax/SAXException;

    if-nez v0, :cond_c

    .line 147
    instance-of v0, p1, Lorg/xml/sax/SAXParseException;

    if-eqz v0, :cond_e

    .line 148
    :cond_c
    const/4 v0, 0x1

    .line 154
    :goto_d
    return v0

    .line 149
    :cond_e
    instance-of v0, p1, Ljava/net/UnknownHostException;

    if-nez v0, :cond_1a

    .line 150
    instance-of v0, p1, Ljava/net/MalformedURLException;

    if-nez v0, :cond_1a

    .line 151
    instance-of v0, p1, Ljava/io/IOException;

    if-eqz v0, :cond_1c

    .line 152
    :cond_1a
    const/4 v0, 0x3

    goto :goto_d

    .line 154
    :cond_1c
    const/4 v0, 0x0

    goto :goto_d
.end method

// class instead of interface

.class public Ltj/zar/projects/kathtranslator/interfaces/common/IDictionaryErrorTypes;
.super Ljava/lang/Object;
.source "IDictionaryErrorTypes.java"

# static fields
.field public static final ERROR_CONNECTION:I = 0x3

.field public static final ERROR_UNKNOWN:I = 0x0

.field public static final ERROR_XML:I = 0x1

# direct methods
.method public constructor <init>()V
    .registers 1

    .prologue
    .line 3
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V

    return-void
.end method 
```

**UNWORKING版本的smali代码：**

```
.method private getErrorCode(Ljava/lang/Exception;)I
    .registers 3
.parameter "error"

.prologue
.line 145
instance-of v0, p1, Ljavax/xml/parsers/ParserConfigurationException;

if-nez v0, :cond_c

.line 146
instance-of v0, p1, Lorg/xml/sax/SAXException;

if-nez v0, :cond_c

.line 147
instance-of v0, p1, Lorg/xml/sax/SAXParseException;

if-eqz v0, :cond_e

.line 148
:cond_c
const/4 v0, 0x1

.line 154
:goto_d
return v0

.line 149
:cond_e
instance-of v0, p1, Ljava/net/UnknownHostException;

if-nez v0, :cond_1a

.line 150
instance-of v0, p1, Ljava/net/MalformedURLException;

if-nez v0, :cond_1a

.line 151
instance-of v0, p1, Ljava/io/IOException;

if-eqz v0, :cond_1c

.line 152
:cond_1a
const/4 v0, 0x3

goto :goto_d

.line 154
:cond_1c
const/4 v0, 0x0

goto :goto_d
.end method

// interface

.class public interface abstract Ltj/zar/projects/kathtranslator/interfaces/common/IDictionaryErrorTypes;
.super Ljava/lang/Object;
.source "IDictionaryErrorTypes.java"

# static fields
.field public static final ERROR_CONNECTION:I = 0x3

.field public static final ERROR_UNKNOWN:I = 0x0

.field public static final ERROR_XML:I = 0x1 
```

## 解决

我清理了项目，将模拟器更改为真实设备并编写了一些测试。

## 结果

这似乎是一个调试器问题：

正如您在图像中看到的错误是“3”，ERROR_CONNECTION 是“0”。并且设备实际上运行下一个字符串（绿色字符串），这意味着调试器认为 3 == 0，但实际上它的 3 == 3

## 结论

调试器错误。

![在此处输入图像描述](../Images/1d354e71a52f792560ad49089805b6b5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:46:19.887

您使用的任何调试器都在欺骗您（很可能是答案），或者这是您正在使用的 android SDK 中的错误。您是否想过查看该方法实际返回的内容？

另请注意，无论您做什么，默认情况下接口中的字段*始终* `static final`是公共的 - 编译器会这样做。

```
public interface MyInterface
{
    public static final int TEST = 3;
}

public interface MyInterface2 extends MyInterface
{
    public final static int TEST2 = 5;
}

public class InterfaceTest implements MyInterface2
{
    public void printInterfaceConstants()
    {
        System.out.println(TEST);
        System.out.println(TEST2);
    }

    public static void main(String[] args)
    {
        InterfaceTest it = new InterfaceTest();
        it.printInterfaceConstants();
    }
} 
```

输出：

> 3
> 5

正如已经提到的，首先不要这样做。实现细节不应该在接口中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:22:00.823

我认为*唯一*可能的解释是您在编辑/构建/运行/调试过程中出现了问题，并且您实际上运行的代码版本与您认为的不同。

这方面的证据是您已经反编译了您*认为*正在运行的类的两个版本，并且反编译的代码清楚地表明：

1.  它使用内联常量值，并且
2.  常量值是您期望的值。

但是当您执行代码时（假设），它的行为显然与那些字节码所说的不同。

我只能看到一个合理的解释：您没有执行*那些*字节码。相反，您正在执行不同版本的字节码。简而言之，您不会重新编译/重建/重新部署所有需要......完成的事情。

调试器的输出很有趣，因为它倾向于证实这个假设，因为它似乎表明您的可执行文件具有接口的副本，其中的常量与源代码所说的不同。（也可能是调试器错误……但这是一个太大的巧合。）但是，调试器输出本身并不能解释您的应用程序的行为，因为该应用程序没有使用这些值。

# php - 在 Gearman 中排队物品的最佳方式

> ID：12888133
> 
> 赞同：0
> 
> 时间：2012-10-15T01:15:18.280
> 
> 标签：php, gearman

我有四个任务（t1、t2、t3、t4）需要每 7 天在一个项目（一个 URL）上按顺序运行。我使用 gearman 来运行这些任务，并使用 cronjob 将项目发送到 gearman 队列。项目的每个任务都有一个 date_run 分配给它。如果 t1 的 date_run 距离现在不到 7 天，则该任务被发送到队列。如果 t2 的 date_run 小于 t1，则该任务被发送到队列中......等等。

我遇到的问题是，如果某个项目的 t1 已排队，但在 cronjob 再次启动之前还没有时间完成。由于 date_run 在任务完成之前不会更新，因此看起来该任务尚未排队，并且队列中的同一项目将重复 t1 。

我想到的解决方案是：

*   为每个任务添加唯一标识符并检查它们是否已经排队
*   只需检查队列是否为空，并且在队列为空之前不要再排队
*   将 date_queued 添加到 item 表并使用它而不是 date_run on t1 来安排每 7 天的任务

我想我会先检查stackoverflow，如果有解决这个问题的“最佳方法”？我似乎无法理解它。:S

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:26:23.170

使用只运行一次任务怎么样？我将使用带锁定的简单单例，而不是修改我的数据设置。

**C# 示例：**

```
public class SingletonScheduledTask
{
    public void Run()
    {
        SingletonScheduledTask._SingletonScheduledTask.Instance.Handle();
    }

    private sealed class _SingletonScheduledTask
    {
        //multithreaded singleton with on system load instantiation.
        private static readonly _SingletonScheduledTask instance = new _SingletonScheduledTask();

        private static object syncHandle = new Object();
        private static bool handling = false;

        private _SingletonScheduledTask() { }

        public static _SingletonScheduledTask Instance
        {
            get
            {
                return instance;
            }
        }

        public void Handle()
        {
            if (!handling)
            {
                bool _handling = false;
                lock (syncHandle)
                {
                    _handling = handling;
                    handling = true;
                }
                _DoHandle(!_handling);
            }
        }
        private void _DoHandle(bool doHandle)
        {
            if (doHandle)
            {
                ///code here

                handling = false;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T04:20:10.250

只需在将任务添加到队列时添加唯一 ID。不管你添加多少次，gearman只会注册一次。

# qt - QtSQL：模型的 clear() 上的“准备好的语句“qpsqlpstmt_1”不存在”

> ID：12888134
> 
> 赞同：0
> 
> 时间：2012-10-15T01:15:45.820
> 
> 标签：qt, postgresql

我在控制台中打印出以下错误消息：

```
Unable to free statement: ERROR:  prepared statement "qpsqlpstmt_1" does not exist 
```

它在应用程序中调用以下函数时打印（或者当对象被删除时（如果`clear()`在删除之前没有调用）：

```
sqlQueryModel->clear(); 
```

sqlQueryModel 对象属于类型`QSqlQueryModel`，并在整个派生类中用于与 PostgreSQL 数据库通信。它还可以作为`QCompleter`. 我从未声明或使用过这个名字`"qpsqlpstmt_1"`。

有人可以帮我解释错误消息，并解释可能导致它的原因吗？这表示我的代码有问题还是 Qt 错误？（可能是前者:)）

在查看服务器上的 PostgreSQL 日志文件时，会出现完全相同的语句加上一行：

```
STATEMENT: DEALLOCATE pqsqlpstmt_1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:41:33.930

查看这些 Qt 问题跟踪器条目：

*   [https://bugreports.qt.io/browse/QTBUG-8860](https://bugreports.qt.io/browse/QTBUG-8860)
*   [https://bugreports.qt.io/browse/QTBUG-16007](https://bugreports.qt.io/browse/QTBUG-16007)
*   [https://bugreports.qt.io/browse/QTBUG-15979](https://bugreports.qt.io/browse/QTBUG-15979)

...所有这些都提到了您准备好的语句名称并与删除有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:02:35.747

经过相当长的一段时间后，我意识到我只是在调用 clear 之前关闭了与数据库的连接……这不是一个好策略。

# multithreading - 我应该使用 CRITICAL_SECTION 还是不使用？

> ID：12888138
> 
> 赞同：0
> 
> 时间：2012-10-15T01:16:27.573
> 
> 标签：multithreading, qt, user-interface, locking

我有一个程序，它有一个用户界面，用户可以通过它选择显示方式和进行小配置。它还有一个后台程序，不断地从网络中读取数据并更新数据来显示。

现在我把它们放在一个进程中：后台程序：

```
 STATE MainWindow::Rcv()
    {

    DeviceMAP::iterator dev;

    for(dev= dev_map.begin(); dev!= dev_map.end(); dev++)
    {

        dev->second.rcvData();//receive data from the network, the time can be ignored.

        BitLog* log = new BitLog();
        dev->second.parseData(log);

        LogItem* logItem = new LogItem();
        logItem->time = QString::fromLocal8Bit(log->rcvTime.c_str());
        logItem->name = QString::fromLocal8Bit(log->basicInfo.getName().c_str());
        logItem->PIN = QString::fromLocal8Bit(log->basicInfo.getPIN().c_str()).toShort();

        delete log;
        add_logItem(logItem);

    }
    return SUCCESS;
} 
```

add_logItem：

```
void MainWindow::add_logItem(LogItem* logItem)
{

    writeToFile(logItem);

    Device* r = getDevbyPIN(QString::number(logItem->PIN));

    if(r == NULL)return;

    devInfo_inside_widget::States state = logItem->state;

    bool bool_list[portsNum_X];
    for(int i =0; i < portsNum_X; i++)
    {
        bool_list[i] = 0;
    }

    for(int i = 0; i < portsNum; i++)
    {
        bool_list[i] = (logItem->BITS[i/8] >> (7 - i%8)) & 0x1;
    }

    r->refresh(state, logItem->time, bool_list);//update data inside...state, time , BITS...

    IconLabel* icl = getIConLabelByDev(r);//update data
    icl->refresh(state);

    logDisplayQueue.enqueue(logItem);//write queue here

    int size = logDisplayQueue.size();

    if(size > 100)
    {
        logDisplayQueue.dequeue();//write queue here
    }

} 
```

上面的部分还没有处理任何 ui 操作，但是当用户在 ui 中按下单选按钮时，程序必须过滤队列中的数据并显示在 table 小部件中：

用户界面操作：

```
void MainWindow::filter_log_display(bool bol)
{

    row_selectable = false;
    ui->tableWidget->setRowCount(0);//delete table items all
    row_selectable = true;

    int size_1 = logDisplayQueue.size() - 1;

    ui->tableWidget->verticalScrollBar()->setSliderPosition(0);

    if(size_1+1 < 100)
    {
        ui->tableWidget->setRowCount(size_1 + 1);
    }
    else
    {
        ui->tableWidget->setRowCount(100);//display 100 rows at most
    }

    if(bol)//filter from logDisplayQueue and display unworking-state-log rows
    {

        int  index = 0;
        for(int queue_i = size_1; queue_i >= 0; queue_i--)
        {

            LogItem* logItem = (LogItem*)logDisplayQueue.at(queue_i); // read queue here

            if(logItem->state == STATE_WORK || logItem->state == STATE_UN)continue;

            QString BITS_str = bits2Hexs(logItem->BITS);

            ui->tableWidget->setItem(index, 0, new QTableWidgetItem(logItem->time));//time
            ui->tableWidget->setItem(index, 1, new QTableWidgetItem(logItem->name));//name
            ui->tableWidget->setItem(index, 2, new QTableWidgetItem(BITS_str));//BITS

            if(queue_i == oldRowItemNo)ui->tableWidget->selectRow(index);
            index++;
        }

        ui->tableWidget->setRowCount(index);

    }
    else//display all rows
    {

        for(int queue_i = size_1, index = 0; queue_i >= 0; queue_i--, index++)
        {

            LogItem* logItem = (LogItem*)logDisplayQueue.at(queue_i);                      //read queue here

            QString BITS_str = bits2Hexs(logItem->BITS);//
            finish = clock();

            ui->tableWidget->setItem(index, 0, new QTableWidgetItem(logItem->time));//time
            ui->tableWidget->setItem(index, 1, new QTableWidgetItem(logItem->name));//name
            ui->tableWidget->setItem(index, 2, new QTableWidgetItem(BITS_str));//BITS

            if(queue_i == oldRowItemNo)ui->tableWidget->selectRow(index);

        }

    }

} 
```

所以队列非常少，后台程序非常频繁（每秒近 500 次）。也就是说，队列将在 1 秒内被写入 500 次，但会不时由用户显示。
我想将这些函数分成两个线程并一起运行，一个是更新和更新数据，一个是显示。
如果我不使用任何锁或互斥锁，用户可能会得到错误的数据，但如果我强制写入数据过程每次都进入临界区并离开临界区，这将是一个严重的过载。:)
我应该使用 CRITICAL_SECTION 还是其他东西，有什么相关的建议吗？（我的话对你来说可能很冗长:)，我只希望得到一些提示:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:43:22.093

我将“Recv”函数放在另一个 QObject 派生类中，将其放在其他 QThread 而不是主 gui 线程下，并将“logItemAdded(LogItem* item)”信号连接到主窗口的“addLogItem(LogItem* item)”插槽。

为了快速而肮脏的提示，我的概念代码如下。

```
 #include <QObject>

class Logger : public QObject
{
    Q_OBJECT
public:
    Logger(QObject* parent=0);
    virtual ~Logger();
signals:
    void logItemAdded(LogItem* logItem);
public slots:
protected:
    void Rcv()
    {
        // ...

        // was "add_logItem(logItem)"
        emit logItemAdded(logItem);
    }
};

MainWindow::MainWindow(...)
{
    Logger logger = new Logger;

    // setup your logger

    QThread* thread = new QThread;
    logger->moveToThread(thread);
    connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));
    thread->start();
} 
```

希望这可以帮助。

祝你好运。

# asterisk - 星号 phpagi 拨入 chanspy

> ID：12888139
> 
> 赞同：0
> 
> 时间：2012-10-15T01:16:30.407
> 
> 标签：asterisk

我正在尝试使用带星号的 phpagi 发送到 chanspy，但看起来它不起作用。如果可以，请帮助，提前谢谢：

这是我到目前为止得到的：

```
 if($keys=="8888") {
        $agi->exec("DIAL","Chanspy(SIP/,q)");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:06:46.680

您不会“拨（）”到“Chanspy”。Chanspy 是它自己的应用程序，它自己处理呼叫桥接。您必须设置一个“组”来监视或寻址特定频道。

这是在 Barge/Spy 上使用安全性的简单方法：

```
[macro-jkl5_barge_code]
;   ${ARG1} - Extension that is monitoring
    exten =>s,1, NoOp(Extension Barge & Whisper)
     same => n, Answer()
     same => n, NoCDR
     same => n, Authenticate(12345)
     same => n, Wait(1)
     same => n, NoOp(** DEBUG: [${SPYGROUP}] )
     same => n, ChanSpy(SIP/${ARG1}|qg(${SPYGROUP}))  
     same => n, Hangup() 
```

...请务必在您的呼叫路径中的某处设置“SPYGROUP”。然后在需要的地方调用这个宏。

您必须自己阅读如何从 AGI 内部使用它。上面的代码只是为了让您了解它是如何在拨号方案中使用的。

进一步阅读：[http ://www.the-asterisk-book.com/unstable/applikationen-chanspy.html](http://www.the-asterisk-book.com/unstable/applikationen-chanspy.html)

# python - 有什么方法可以让类总是从某个基类继承

> ID：12888144
> 
> 赞同：0
> 
> 时间：2012-10-15T01:17:12.893
> 
> 标签：python, django

在我的应用程序中，我需要记录所有模型更改和删除的日志。所以我创建了基类`Audit`并从中扩展了所有类。

我已经覆盖了其中的保存、删除方法，以便在我们进行一些更新时也保留旧的更改。

我想知道有没有更好的方法来做到这一点，而不是从基类扩展所有类。或者这样就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:20:58.690

对于这个用例，您可以编写一个可以与 django 信号一起使用的通用函数。

[https://docs.djangoproject.com/en/dev/topics/signals/](https://docs.djangoproject.com/en/dev/topics/signals/)

# c# - 确定 MsiExec 是否使用 /passive 参数运行

> ID：12888145
> 
> 赞同：0
> 
> 时间：2012-10-15T01:17:20.323
> 
> 标签：c#, windows-installer, setup-deployment

我有一个我继承的安装项目，它使用 ProjectInstaller AfterInstall 方法显示自定义表单，提示用户输入配置选项，然后将其保存在 app.config 文件中

有没有办法确定传递给 MSIExec 的标志，以便我们可以在使用 /passive 时抑制这种形式？

然后，我们将在安装后将自定义 app.config 文件推送到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:05:43.940

使用[`UILevel`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372096%28v=vs.85%29.aspx)属性来确定安装程序在哪个 UI 级别运行。

[从自定义操作中确定 UI 级别的](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368281%28v=vs.85%29.aspx)摘录：

> 具有对话框的自定义操作应仅在用户界面级别为完整 UI 或精简 UI 时显示对话框，如果用户界面级别为基本 UI 或无，则不应显示对话框。您应该使用该[`UILevel`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372096%28v=vs.85%29.aspx)属性来确定当前的用户界面级别。

从[`/passive`选项](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372024%28v=vs.85%29.aspx "标准安装程序命令行选项")的描述：

> 等效的 Windows Installer[命令行选项](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367988%28v=vs.85%29.aspx)`/qb!-`在命令行上`REBOOTPROMPT=S`设置。

这意味着安装程序使用[Basic UI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367839%28v=vs.85%29.aspx#_msi_basic_ui_gly)运行，没有显示模式对话框 ( `-`)，隐藏了 Cancel 按钮 ( `!`)。

# java - 调用另一个类时出现未知错误

> ID：12888146
> 
> 赞同：0
> 
> 时间：2012-10-15T01:17:23.833
> 
> 标签：java, android

我是 android 新手，我正在制作一个应用程序，该应用程序显示您使用三个搜索栏 (RGB) 选择的颜色。我不断从未知来源收到这个意外错误，我不知道出了什么问题。通过调试，我发现当我调用 ChangeColor merhod 或从 RGB.java 更改 DrawCanvas.java 中的红色、绿色和蓝色的值时，应用程序崩溃了。我错过了什么？

这是所有代码：

```
public class RGB extends Activity implements OnSeekBarChangeListener {

private int RED_value = 0;
private int BLUE_value = 0;
private int GREEN_value = 0;

private SeekBar sbR, sbB, sbG;
private TextView labelR, labelG, labelB;

public DrawCanvas draw;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_rgb);

    labelR = (TextView)findViewById(R.id.textView4);
    labelG = (TextView)findViewById(R.id.textView5);
    labelB = (TextView)findViewById(R.id.textView6);

    sbR = (SeekBar)findViewById(R.id.seekBar1);
    sbG = (SeekBar)findViewById(R.id.seekBar2);
    sbB = (SeekBar)findViewById(R.id.seekBar3);

    draw = (DrawCanvas)findViewById(R.id.SurfaceView01);

    sbG.setOnSeekBarChangeListener(this);
    sbR.setOnSeekBarChangeListener(this);
    sbB.setOnSeekBarChangeListener(this);

}

public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    // TODO Auto-generated method stub
    if (seekBar==sbR)
    {
        RED_value = progress;
        labelR.setText(""+progress);
    }
    else if (seekBar==sbB)
    {
        BLUE_value = progress;
        labelB.setText(""+progress);
    }
    else
    {
        GREEN_value = progress;
        labelG.setText(""+progress);
    }

    //This is where the app crashes
    draw.red = RED_value;
    draw.green = GREEN_value;
    draw.blue = BLUE_value;
}

public void onStartTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

}

public void onStopTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

}

} 
```

和其他班级

```
public class DrawCanvas extends View {

public int red=200, green=100, blue=0;

public DrawCanvas(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

public DrawCanvas(Context context, AttributeSet attrs){
    super(context);
    // TODO Auto-generated constructor stub
}

public DrawCanvas(Context context, AttributeSet attrs, int defStyle){
    super(context);
    // TODO Auto-generated constructor stub
}

protected void onDraw(Canvas c)
{
    super.onDraw(c);

    int color = Color.argb(255,red,green,blue);
    Paint paint = new Paint();
    paint.setStyle(Paint.Style.FILL);
    paint.setColor(color);

    c.drawPaint(paint);
}

public void ChangeColor(int r, int g, int b)
{
    red = r;
    green = g;
    blue = b;
}
} 
```

最后是错误消息：

```
[2012-10-15 00:55:24 - Unexpected error while launching logcat. Try reselecting the  device.] device not found 
com.android.ddmlib.AdbCommandRejectedException: device not found
at com.android.ddmlib.AdbHelper.setDevice(AdbHelper.java:752)
at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:373)
at com.android.ddmlib.Device.executeShellCommand(Device.java:462)
at com.android.ddmuilib.logcat.LogCatReceiver$1.run(LogCatReceiver.java:109)
at java.lang.Thread.run(Unknown Source) 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:30:04.750

> 1.  在 shell 或命令提示符下运行： adb kill-server
> 2.  从设备上拔下 USB 电缆，然后重新插入。
> 3.  打开设备视图（窗口 -> 显示视图 -> 其他 -> Android -> 设备）
> 4.  单击 android 设备视图上的设备。

信用：MikeC：[LogCat & Console 停止使用 Eclipse Android Emulator](https://stackoverflow.com/questions/8075378/logcat-console-stopped-working-with-eclipse-android-emulator)

# iphone - 将 NavigationBar 样式应用于 MonoTouch 中的所有导航栏？

> ID：12888153
> 
> 赞同：0
> 
> 时间：2012-10-15T01:18:22.910
> 
> 标签：iphone, ios, xamarin.ios, monotouch.dialog

目前，我在整个应用程序中重复使用以下代码，因为显然您不应该继承 UINavigationController （如果我错了，请纠正我）：

```
var galleryNavigation = new UINavigationController(galleryDialog);

galleryNavigation.NavigationBar.TintColor = UIColor.FromRGB (33, 114, 131);
galleryNavigation.NavigationBar.Alpha = 0.7f;
galleryNavigation.NavigationBar.Translucent = true; 
```

我想一次定义这些样式（TintColor、Alpha 等）并重用它们。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:17:43.097

如果您只想设置一些属性，则可以在 AppDelegate 或某个共享类中创建一个方法，从每个视图控制器调用它，例如

```
-(void)setNavigation:(UIViewController*)vc
{
   //set properties here

} 
```

否则，如果您想要更多的定制，而不是一个好的选择，那就是让**UINavigationBar**的子类在每个视图控制器中继承它

```
// Get our custom nav bar
    MyNavigationBar* customNavigationBar =  (MyNavigationBar*)self.navigationController.navigationBar;    
    // Set the nav bar's properties as you want like i have set its background image as
    [customNavigationBar setBackgroundWith:[UIImage imageNamed:ImgNavBarBackground]]; 
```

# eclipse - Eclipse 更新后无法启动

> ID：12888156
> 
> 赞同：11
> 
> 时间：2012-10-15T01:19:02.187
> 
> 标签：eclipse

eclipse更新后，无法再次启动。此外，它还有一个检查日志的警告。但我不知道如何通过日志解决这个问题。以下是日志。

```
!SESSION 2012-10-15 08:21:47.367 -----------------------------------------------
eclipse.buildId=M20120914-1800
java.version=1.7.0_01
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32
Command-line arguments:  -os win32 -ws win32 -arch x86_64

!ENTRY org.eclipse.equinox.event 2 0 2012-10-15 08:21:48.459
!MESSAGE [SCR] Found components with duplicated names! Details: 
Component1 : Component[
    name = org.eclipse.equinox.event
    activate = activate
    deactivate = deactivate
    modified = 
    configuration-policy = optional
    factory = null
    autoenable = true
    immediate = false
    implementation = org.eclipse.equinox.internal.event.EventComponent
    state = Unsatisfied
    properties = 
    serviceFactory = false
    serviceInterface = [org.osgi.service.event.EventAdmin]
    references = null
    located in bundle = org.eclipse.equinox.event_1.2.100.v20110502 [270]
]
Component2: Component[
    name = org.eclipse.equinox.event
    activate = activate
    deactivate = deactivate
    modified = 
    configuration-policy = optional
    factory = null
    autoenable = true
    immediate = false
    implementation = org.eclipse.equinox.internal.event.EventComponent
    state = Unsatisfied
    properties = 
    serviceFactory = false
    serviceInterface = [org.osgi.service.event.EventAdmin]
    references = null
    located in bundle = org.eclipse.equinox.event_1.2.200.v20120522-2049 [89]
]  

!ENTRY org.eclipse.equinox.p2.transport.ecf 2 0 2012-10-15 08:21:48.474
!MESSAGE [SCR] Found components with duplicated names! Details: 
Component1 : Component[
    name = org.eclipse.equinox.p2.transport.ecf
    activate = activate
    deactivate = deactivate
    modified = 
    configuration-policy = optional
    factory = null
    autoenable = true
    immediate = false
    implementation = org.eclipse.equinox.internal.p2.transport.ecf.ECFTransportComponent
    state = Unsatisfied
    properties = {p2.agent.servicename=org.eclipse.equinox.internal.p2.repository.Transport}
    serviceFactory = false
    serviceInterface = [org.eclipse.equinox.p2.core.spi.IAgentServiceFactory]
    references = null
    located in bundle = org.eclipse.equinox.p2.transport.ecf_1.0.0.v20111128-0624 [275]
]
Component2: Component[
    name = org.eclipse.equinox.p2.transport.ecf
    activate = activate
    deactivate = deactivate
    modified = 
    configuration-policy = optional
    factory = null
    autoenable = true
    immediate = false
    implementation = org.eclipse.equinox.internal.p2.transport.ecf.ECFTransportComponent
    state = Unsatisfied
    properties = {p2.agent.servicename=org.eclipse.equinox.internal.p2.repository.Transport}
    serviceFactory = false
    serviceInterface = [org.eclipse.equinox.p2.core.spi.IAgentServiceFactory]
    references = null
    located in bundle = org.eclipse.equinox.p2.transport.ecf_1.0.100.v20120305-0333 [120]
]  

!ENTRY org.eclipse.core.resources 2 10035 2012-10-15 08:21:49.535
!MESSAGE The workspace exited with unsaved changes in the previous session; refreshing workspace to recover changes.

!ENTRY org.eclipse.e4.ui.workbench 4 0 2012-10-15 08:21:52.000
!MESSAGE Unable to create class 'org.eclipse.e4.core.commands.CommandServiceAddon' from bundle '53'
!STACK 0
org.eclipse.e4.core.di.InjectionException: java.lang.ClassCastException: Cannot cast org.eclipse.core.commands.CommandManager to org.eclipse.core.commands.CommandManager
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:63)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:859)
    at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:319)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:253)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:185)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:105)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:49)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application.createE4Workbench(E4Application.java:254)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:557)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.ClassCastException: Cannot cast org.eclipse.core.commands.CommandManager to org.eclipse.core.commands.CommandManager
    at java.lang.Class.cast(Unknown Source)
    at org.eclipse.e4.core.internal.contexts.EclipseContext.get(EclipseContext.java:566)
    at org.eclipse.e4.core.commands.CommandServiceAddon.init(CommandServiceAddon.java:30)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
    ... 27 more 
```

基本上，它只是日志文件中的一部分。从这里，我找到了一些帖子并尝试了：

1) eclipse -clean 2) 删除 .snap 3) 删除 workbench.xmi 4) 重命名 org.eclipse.core.resources 等。

不幸的是，它们不起作用。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-25T05:40:17.417

go to

1.  Your installation path\configuration\org.eclipse.equinox.simpleconfigurator\
2.  Backup file bundle.info
3.  remove the duplicate entry for "org.eclipse.core.commands" from the file `bundle.info` I removed the entry with the lower version.

restart the eclipse with option `-clean` and you should be fine

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T07:56:28.477

我有同样的问题，在我更新了我的 pydev 之后。

我将 JUNO 重新提取到我的安装目录

问题解决了

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T08:02:02.097

尝试这个：

进入损坏的工作区/.metadata 并删除 .lock 文件。
转到 workspace/.metadata/.plugins/org.eclipse.core.resources 并删除 .snap 文件。
使用命令 eclipse -clean 启动 Eclipse。
Eclipse 现在应该启动。启动 Eclipse 并初始化和验证工作区后，关闭 Eclipse。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-22T07:12:03.950

检查概览选项卡中组件定义的“名称”(*.xml) 如果在概览选项卡中有两个文件名不同但“名称”值相同的 ComponentDefinition，则会发生此错误。

# asp.net - 我可以从两个数据库中检索数据吗？

> ID：12888165
> 
> 赞同：0
> 
> 时间：2012-10-15T01:20:14.573
> 
> 标签：asp.net, sql-server-2008, c#-4.0

我想检索一些数据以在我的网格中使用它，但问题是我的数据库设计包含两个数据库。

那么，我可以从多个数据库中检索数据，以便在一个网格中使用它吗？

我使用 ASP.Net、C#.Net 4、Microsoft SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:39:11.263

SQL Server 知道 4 部分对象名称。第一部分是（链接的）服务器名称。第二部分是数据库名称。第三和第四是模式和对象名称。

假设您的数据库在同一台服务器上，您可以编写如下查询：

```
SELECT * 
FROM Database1.dbo.Table1 t1 
JOIN Database2.dbo.Table2 t2 
ON t1.column = t2.column; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T01:42:00.963

根据您的架构，有几种方法。如果您的数据库部署在同一台机器上，您可以从两个不同的数据库中选择数据，如下所示：

```
SELECT a.userID, b.usersFirstName, b.usersLastName  
FROM databaseA.dbo.TableA a 
inner join database B.dbo.TableB b  ON a.userID=b.userID 
```

当然，您应该拥有两个数据库的权限。您可以在此处查看更多信息：[http ://forums.asp.net/t/1254974.aspx/1](http://forums.asp.net/t/1254974.aspx/1)

# java - 当列有多个字段时如何对RichFaces dataTable进行排序

> ID：12888166
> 
> 赞同：0
> 
> 时间：2012-10-15T01:20:21.537
> 
> 标签：java, jsf, richfaces

数据表列具有多个字段的情况很常见。例如，想象一个显示一堆机会的表格，其中名称在第一列，下面有一个 ID，然后描述也在那个框中。RichFaces 在 tis 数据表中内置了排序功能，但它仅在每列有一个字段时才有效。

当然，我们不能希望在框架中加入新功能（顺便说一句，使用 3.x）。所以这篇文章更多的是看看是否有人有他们认为非常好的解决方案。我最终为此在标题中放置了按钮，并且没有得到任何重用，所以当我第二次面对它时，它首先只是模仿了黑客攻击。

# android - Android - GridView 中的不同项目未显示

> ID：12888169
> 
> 赞同：3
> 
> 时间：2012-10-15T01:20:42.303
> 
> 标签：android, button, gridview, recycle

我正在开发具有图像 GridView 的应用程序，但 GridView 中的最后一项是一个将更多项加载到 Grid 中的按钮。但我面临一个奇怪的问题，那就是 Button 有时会出现，有时当我在 GridView 上快速向上和向下滚动时它并不特别。我认为这是因为回收问题，但我不知道如何解决它。

这是我的代码：-

```
public class ButtonGridAdapter extends BaseAdapter implements OnCheckedChangeListener, OnClickListener {

    private ArrayList<String> thumbUrls;
    private ArrayList<String> mainUrls;
    private LayoutInflater layoutInflater;
    private Context context;
    private Intent intent;
    private ArrayList<String> positions = new ArrayList<String>();
    private static ArrayList<String> urlsToUpload = new ArrayList<String>(); 
    private int width;

    public ButtonGridAdapter(Context context, ArrayList<String> thumbUrls, ArrayList<String> mainUrls, String clicked)
    {
        this.context = context;
        this.thumbUrls = thumbUrls;
        this.mainUrls = mainUrls;
        intent = new Intent(context, GalleryView.class);
        this.layoutInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        DisplayMetrics displaymetrics = new DisplayMetrics();
        ((Activity) context).getWindow().getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
        this.width = displaymetrics.widthPixels;
        System.out.println(width+" width");
    }

    @Override
    public int getCount() {
        return thumbUrls.size()+1;
    }

    @Override
    public Object getItem(int arg0) {
        return thumbUrls.get(arg0);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    public static class ViewHolder
    {
        ImageView mainImage;
        CheckBox checkBox;
        Button button;
    }

    public static class ButtonHolder
    {

    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View row = convertView;
        ViewHolder holder;
        if(row==null || row.getTag().equals("button"))
        {
                row = layoutInflater.inflate(R.layout.griditem, parent, false);
                holder = new ViewHolder();
                holder.mainImage = (ImageView)row.findViewById(R.id.itemgrid);
                holder.checkBox = (CheckBox)row.findViewById(R.id.itemselected);
                holder.button = null;
                row.setTag(holder);
        }
        else 
        {
            holder = (ViewHolder)row.getTag();
        }

        if(position==thumbUrls.size())
        {
            int width = row.getWidth();
            int height = row.getHeight()-70;
            row = layoutInflater.inflate(R.layout.mybutton, parent, false);
            holder.button = (Button)row.findViewById(R.id.gridbutton);
            holder.button.setText("Load More");
            LayoutParams params = holder.button.getLayoutParams();
            params.height = height;
            params.width = width;
            holder.button.requestLayout();
            holder.button.setOnClickListener(this);
            System.out.println("Called");
            row.setTag("button");
            return row;
        }
        else
        {
            setImageSize(holder.mainImage);
            System.out.println(position);
            holder.mainImage.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    intent.putExtra("position", position);
                    intent.putStringArrayListExtra("MainUrls", mainUrls);
                    intent.putStringArrayListExtra("Thumbnails", thumbUrls);
                    context.startActivity(intent);
                }
            });

            holder.checkBox.setOnCheckedChangeListener(null);
            holder.checkBox.setTag(position);

            holder.checkBox.setChecked(positions.contains(thumbUrls.get(position)));
            holder.checkBox.setOnCheckedChangeListener(this);

            UrlImageViewHelper.setUrlDrawable(holder.mainImage, thumbUrls.get(position), R.drawable.extras_load);
            return row;
        }

    }

    private void setImageSize(ImageView imageView) {
        LayoutParams params = imageView.getLayoutParams();
        int leftWidth = width - 80;
        params.width = leftWidth/3;
        params.height = leftWidth/3;
        imageView.requestLayout();
    }

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if(isChecked)
        {
            positions.add(thumbUrls.get((Integer)buttonView.getTag()));
            urlsToUpload.add(mainUrls.get((Integer)buttonView.getTag()));
        }

        else
        {
            positions.remove(thumbUrls.get((Integer)buttonView.getTag()));
            urlsToUpload.remove(mainUrls.get((Integer)buttonView.getTag()));
        }
    }

    public static ArrayList<String> getUrlsToUpload()
    {
        return urlsToUpload;
    }

    @Override
    public void onClick(View v) {
        if(v.getId()==R.id.gridbutton)
        {
            InstagramImpl.getInstance().fetchMorePhotos();
        }

    }
} 
```

任何帮助都会非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:15:58.583

也许你可以试试`delete row==null`，`holder = (ViewHolder)row.getTag();` 因为回收问题，你可以先试一试。但这会影响效率。还有一点我想说，怎么办`position==thumbUrls.size();`？也许它是。`position==thumbUrls.size()-1;`好吧，这是我的观点，我帮助它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:10:03.490

`getView`我从我的另一个答案中发布了完整的方法。很简单，你先检查位置。如果它是最后一项（加载更多按钮）立即返回布局。

```
private final Media special = new Media("-1", "", "", "", ""); 

    public MediaGridAdapter(Context context, int imageID, ArrayList<Media> array, int type, boolean isGetMore) {

        list = array;
        mediaType = type;
        this.context = context;

            if(list != null) {
                list.add(special);
            }

    }       

     @Override
            public View getView(int position, View convertView, ViewGroup parent) {

                RelativeLayout item;
                ViewHolder  holder;
//this part check it's the last item. -1 is my special item id in contructor.
                if(list.get(position).getId().equals("-1")) {

                        item = (RelativeLayout) LayoutInflater.from(context).inflate(R.layout.item_special_more, null);
                        item.setTag(MORE_BUTTON);
                    return item;
                }
//

                if(convertView == null || convertView.getTag().toString().equals(MORE_BUTTON)) {

                    Context context = parent.getContext();
                    item = (RelativeLayout) LayoutInflater.from(context).inflate(R.layout.item_with_icon_vertical, null);
                    holder = new ViewHolder();
                    holder.thumbnail = (ImageView) item.findViewById(R.id.iv_icon_media);

                    item.setTag(holder);

                } else {

                    item = (RelativeLayout) convertView;
                    holder = (ViewHolder) item.getTag();
                }
            }
// set data.
    holder.thumbnail.setBitmap(...) 

    return item; 
```

# app-store - iphone应用商店的应用被拒绝问题

> ID：12888171
> 
> 赞同：0
> 
> 时间：2012-10-15T01:20:56.273
> 
> 标签：app-store

如果您有一个在 Safari 中打开页面的按钮，应用程序会被拒绝吗？如果是这样，我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:23:05.850

不，它不会被拒绝。这些按钮一直出现。甚至还有一些按钮可以打开重定向到应用商店的 Safari 链接。他们有一条新规则，即您不应该有链接为其他人的应用程序做广告，但正在调查中。

编辑：是的，这是一个奇怪的问题（你从哪里得到这个概念）。我应该注意到，他们在重定向到外部应用商店时遇到了问题。如果你想付款，它必须在应用程序中。

# php - Youtube 分析 API 频道

> ID：12888174
> 
> 赞同：0
> 
> 时间：2012-10-15T01:21:24.107
> 
> 标签：php, youtube-api

我试图使用 youtube analysis api 来获得好恶，但现在在设置参数时遇到了问题。
有一个参数叫'ids'，应该设置为'channel==USER_ID，其中USER_ID标识当前认证的YouTube用户'，但是我对这个格式很困惑，不知道怎么写。
我可以得到用户ID，我尝试了'ids = channel == #userid#'，但它错了。所以有人可以告诉我提出这个请求的正确格式，并给我一个例子。

这是我的错误要求：
`https://www.googleapis.com/youtube/analytics/v1/reports?v=2.1&end-date=2012-10-10&ids=channel==##userid##&metrics=views,likes,dislikes&start-date=2010-10-10&access_token=##access_token##`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:06:07.657

您可以在 url 中编码特殊符号，例如 url 编码`=`将是`%3D`

因此，您可以发送请求`https://www.googleapis.com/youtube/analytics/v1/reports?v=2.1&end-date=2012-10-10&ids=channel%3D%3D##userid##`，该`ids`参数将转换为`channel==##userid##`

# regex - 用文本替换动态网址？

> ID：12888176
> 
> 赞同：-3
> 
> 时间：2012-10-15T01:21:54.200
> 
> 标签：regex, replace, regex-greedy

我需要用文本替换下面的 url（包括 img 标签）。我不太擅长正则表达式...

然而，不幸的是，随着日期的改变，它不仅仅是复制和替换。

```
<img src="http://thailandsbloggare.se/wp-content/uploads/2012/10/icon_wink.gif" alt=";)"> 
```

有时与 class="wp-smiley"

```
<img src="http://thailandsbloggare.se/wp-content/uploads/2012/09/icon_wink.gif" alt=";)" class="wp-smiley" /> 
```

因此，每当发布此图像时，我都希望将完整的字符串替换为文本“;)”

它是一个使用 PHP 在 Wordpress 中构建的网站

提前致谢！

编辑：我想澄清为什么我不能只使用搜索和替换以及为什么 url 是动态的。

日期部分 - 写为 /2012/10/ 每次发布此图像时都会有所不同。**因此，除了日期之外的所有内容都将始终相同！！**

有时字符串以**alt=";)">**结尾，有时以**class="wp-smiley" />**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:06:05.243

This should match your URL and any date (at least until 2099)

```
 http://thailandsbloggare.se/wp-content/uploads/20\d\d/\d+/icon_wink\.gif 
```

# automation - 在我的网站上抓取并发布结果

> ID：12888180
> 
> 赞同：1
> 
> 时间：2012-10-15T01:23:25.497
> 
> 标签：automation, web-scraping

我想在我的网站上放置一个代码，该代码将在另一个网站上抓取产品的价格，然后自动将结果放在我的网站上。我的网站主机不支持 PHP。他们会这样做吗？也许使用 JavaScript 或第三方库？检查谷歌但无法得到任何答案，非常感谢一些帮助谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:27:33.660

您可以使用 perl 检查此选项。世界上几乎所有的服务器都支持 perl。

[谷歌中的 perl 网络爬虫](http://www.google.com/search?q=perl%20web%20scraper&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)

如果这太复杂，请查看其他链接和教程

*   [基本的 PHP Web Scraping 脚本教程](http://www.oooff.com/php-scripts/basic-php-scrape-tutorial/basic-php-scraping.php)
*   [PHP网页抓取教程](http://www.devblog.co/php-web-page-scraping-tutorial/)

再见

# html - 防止绝对定位元素分割单词

> ID：12888181
> 
> 赞同：1
> 
> 时间：2012-10-15T01:23:29.967
> 
> 标签：html, css, word-wrap

有没有办法防止空的绝对定位块元素导致自动换行？

我的 html 看起来像

```
 some other words here. 
My_very_long_text<div style='position: absolute; width:20px; height:20px; background-color:green;'></div>_This_should_Not_be_on_next_line 
```

问题是浏览器将在 My_very_long_text 之后进行自动换行（将文本移动到下一行），以便 _This_should_Not_be_on_next_line 确实从下一行开始。有什么办法可以防止这种情况发生吗？

在这种情况下，解决方案将在“这里插入一些其他单词”的换行符，因此应该输出文本，就好像绝对定位的 div 不存在一样。

**补充：** 我添加了一个显示问题的测试用例。（在 firefox 16.0.1 中测试，它在“My_very_long_text”之后换行。如果我启动 firebug 并删除绝对定位的跨度，那么文本会按预期中断。但我只是在 chrome 中对其进行了测试，它可以按预期工作，所以也许这只是一个Firefox错误。

```
<!DOCTYPE HTML>
<html>
<head></head>
<body>
<div style='width:600px; background-color:red; position:relative; font-size:14px; font-family: monospace'>
so much better to test it this way My_very_long_text<span style='position: absolute; width:20px; height:20px; background-color:green;'></span>_This_should_Not_be_on_next_line
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:27:23.710

绝对位置元素对文档的常规流程没有影响。绝对定位的元素不会“推动”其他元素，它们存在于自己的平面上。其他原因导致自动换行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T01:27:18.780

您可以利用 CSS 溢出或自动换行属性。

隐藏溢出：

```
overflow:hidden; 
```

滚动溢出：

```
overflow:scroll; 
```

也滚动溢出，更常用的方法：

```
overflow:auto; 
```

或者，使用自动换行在指定区域断开单词。

这将打破的话：

```
word-wrap:break-word; 
```

这通常换行：

```
word-wrap:normal; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-11T17:15:17.067

我遇到了同样的问题，我找到的唯一解决方案是在有问题的单词周围添加一个`span`with 。`white-space: nowrap`

```
<!DOCTYPE HTML>
<html>
<head></head>
<body>
  <div style='width:600px; background-color:red; position:relative; font-size:14px; font-family: monospace'>
    so much better to test it this way <span style='white-space: nowrap'>My_very_long_text<span style='position: absolute; width:20px; height:20px; background-color:green;'></span>_This_should_Not_be_on_next_line<span>
  </div>
</body>
</html>
```

# caching - Rails 3.2 application.css.scss 缓存在开发中的问题

> ID：12888184
> 
> 赞同：1
> 
> 时间：2012-10-15T01:23:43.463
> 
> 标签：caching, ruby-on-rails-3.2, stylesheet, asset-pipeline

我似乎在 Rails 3.2 中的资产管道存在重大问题。这一切都开始了，因为我想在开发环境中工作时为我的 application.css.scss 添加一个单一的、简单的样式。我过去做过这个没有问题，它只是工作，因为没有发生缓存（如你所料）。

但是，当我今天尝试添加新样式时，Rails 拒绝加载更新后的样式。我检查了我的环境设置，它们在 development.rb 中似乎都是正确的，

```
config.assets.compress = false
config.assets.debug = true 
```

我做了一些研究，并在开发中遇到了[rails 3.1 资产管道 css 缓存](https://stackoverflow.com/questions/8158987)。按照该问题中给出的建议，我确保删除了该`tmp/cache`文件夹并执行了清理操作`rake assets:clean`，以防万一我在某个时候在生产模式下运行了该应用程序并且需要清理它。

毕竟，仍然没有运气。为了确认我没有犯愚蠢的错误，我暂时将样式移至另一个样式表。没问题！它工作得很好！所以我将样式移回，它不会再次加载。

我还检查了控制台。它正确地重新加载了另一个样式表，但没有提及原始样式表。

现在，主要问题来了。作为最后的努力，我尝试清除浏览器缓存。我通常对此没有任何问题，但我认为某些内容可能会被缓存并导致问题。我清除了它并重新加载了应用程序，然后......没有加载任何样式！

似乎我所有的 application.css.scss 样式都在以前的某个时间点被缓存，现在我根本无法重新加载它们！

## 更新：

虽然我还没有解决这个问题，但我已经通过创建一个名为 main.css.scss 的新样式表（名称不重要）并将所有样式移动到新样式表来解决它。由于`//= require_tree .`清单中的指令，这是有效的。

但是，如果有人能解释为什么原始样式表停止工作，我很想知道！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:17:23.723

尝试`rm -r public/assets/*`

也许您的 assets:clean 任务无法正常工作。

# asp.net - 模态 ASP.net 用户控件

> ID：12888185
> 
> 赞同：0
> 
> 时间：2012-10-15T01:24:04.853
> 
> 标签：asp.net, user-controls, modal-dialog

我有一个 Web 表单应用程序，其中开发了几个用户控件并将其放置在客户正在构建订单的页面上。用户控件的功能非常广泛，导致回发等。

我想以模态方式显示它们，而不是将它们放在单独的页面中（如果可能的话）。所以这就是我的问题。

是否可以将用户控件放置在 div/面板中，以模态方式显示它们并保持它们以模态方式显示（即使通过回发），直到用户单击控件上的按钮以将其关闭？

我基本上是在查看模式选项，因为我需要在用户处理用户控件所在的部分时禁用表单的其余部分。因此，我正在寻找一种我认为的最佳实践方法，并为此朝着正确的方向进行一些推动。

谢谢！

**添加：**

我想用我写的代码来更新它，希望它可以帮助其他人，如果有更好的方法来实现它，那么我也会全神贯注。

其基础是我通过会话变量在用户控件和容器页面之间来回传递所有内容。我用它来告诉容器页面用户控件是否“完成”，并且在标志设置为 true 之前，容器页面只是在每次回发时以模态方式重新显示用户控件。到目前为止似乎运作良好。

**标记：**

```
<%@ Register Src="../controls/mylabel.ascx" TagName="mylabel" TagPrefix="uc1" %> 
```

```
<div style="width: 100%;">
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <asp:Button ID="ButtonAddToCart" runat="server" Text="Add to cart" OnClick="ButtonAddToCartClick" />
</div>

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:Panel ID="pnlOutput" Visible="False" runat="server" Width="500px">
            <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
        </asp:Panel>
    </ContentTemplate>
</asp:UpdatePanel>

<div style="visibility: hidden;">
    <asp:Button ID="ButtonHidden" runat="server" Text="Button" />
</div>

<asp:Panel ID="pnlDownload" Visible="False" runat="server">
    <asp:UpdatePanel ID="UpdatePanel2" runat="server">
        <ContentTemplate>
            <div style="width: 100%;">
                <uc1:mylabel ID="mylabel1" runat="server" />
            </div>
        </ContentTemplate>
    </asp:UpdatePanel>
</asp:Panel> 
```

**后面的代码：**

```
protected void Page_PreRender(object sender, EventArgs e)
    {
        InitializeControls();
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        InitializeControls();
    }

    private void InitializeControls()
    {
        DisplayDownloadPanel(!SessionDownloadComplete);

        if (SessionDownloadItemNumber != string.Empty)
        {
            Label1.Text = SessionDownloadItemNumber != "CANCEL" ? "Item ordered from control was: [" + SessionDownloadItemNumber + "]" : "Order was canceled.";
            pnlOutput.Visible = true;
        }
    }

    protected void ButtonAddToCartClick(object sender, EventArgs e)
    {
        bool haveWeSomeText = string.IsNullOrEmpty(TextBox1.Text) == false;
        if (haveWeSomeText == true)
        {
            SessionDownloadComplete = false;
            DisplayDownloadPanel(true);
        }
    }

    private void DisplayDownloadPanel(bool show)
    {
        pnlDownload.Visible = show;

        if (show == true)
        {
            ModalPopupExtender1.Show();
        }
        else
        {
            ModalPopupExtender1.Hide();
        }
    }

    private string SessionDownloadItemNumber
    {
        get { return Session["DownloadItemNumber"] != null ? Session["DownloadItemNumber"].ToString() : string.Empty; }
    }

    private bool SessionDownloadComplete
    {
        get { return Session["DownloadComplete"] == null || Convert.ToBoolean(Session["DownloadComplete"]); }
        set { Session["DownloadComplete"] = value; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:53:42.510

看看[ASP.NET Ajax Toolkit 模态弹出扩展器](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T04:15:49.777

看看[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)。

它是浏览器中跨浏览器模式对话框的一个很好的解决方案。

```
<script>
    $(function() {
        $( ".dialogClass" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Delete all items": function() {
                    $( this ).dialog( "close" );
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });
</script> 
```

[将它与asp.net](https://stackoverflow.com/questions/11343230/asp-net-button-control-inside-jquery-ui-modal-confirmation/11343326#11343326)集成时有一些初始问题。但是所有这些都在stackover flow本身上有很好的记录。

# ios - 在 Xcode 中，缺少旧的 iOS SDK - 仅适用于预先存在的项目

> ID：12888186
> 
> 赞同：1
> 
> 时间：2012-10-15T01:24:11.403
> 
> 标签：ios, xcode, configuration, sdk

我最近升级到 Xcode 4.5.1 为新 iPad 编译一个正在开发的应用程序。这很好用，但是当我在 iOS 5.1 下的旧 iPad 上运行它时，它无法编译。我将此追溯到我项目中的“Base SDK”设置。不幸的是，由于某种原因，它卡在了 iOS 6.0 上，并且 iOS 5.0 SDK 不在列表中：

![选项菜单](../Images/fd92a1334626b6825f042ac1a79a780b.png)

令人费解的是，如果我开始一个全新的项目，iOS 5.0 和 5.1 SDK**是可用的，但在这个特定项目的列表中却不是一个选项。**另一个令人费解的是，它仍然可以在 iOS 5.0 模拟器上运行。

如何在不从头开始重建项目的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T01:44:23.333

实际上，在 Xcode 4.5.x 下，唯一允许的 Base SDK 是 6.0。您需要将项目（和目标）的部署目标设置为 iOS 4.3 或更高版本，具体取决于您希望在应用程序中支持的内容。

Bask SDK 定义了您可以使用的 API。部署目标定义了您希望支持多远。

# php - 在 mysqli/php 代码中添加 2 个 SELECT 查询会导致错误

> ID：12888187
> 
> 赞同：0
> 
> 时间：2012-10-15T01:24:28.127
> 
> 标签：php, mysqli

我在下面有一个工作的 php/mysqli 代码，它成功地插入了问题和答案：

```
$i = 0;
$c = count($_POST['numQuestion']);

$questionsql = "INSERT INTO Question (SessionId, QuestionId, QuestionContent) 
                    VALUES (?, ?, ?)";

        $sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '');

            if (!$insert = $mysqli->prepare($questionsql)) {
      // Handle errors with prepare operation here
    } else{

for($i = 0;  $i < $c; $i++ ){      

$results = $_POST['value'];
foreach($results as $id => $value) {
$answer = $value;

        $insert->bind_param("sis", $sessid, $id, $_POST['questionText'][$i]);

        $insert->execute();

        if ($insert->errno) {
          // Handle query error here
        }

       $lastID = $insert->insert_id;

       $insert->close();

        foreach($value as $answer) {

         $answersql = "INSERT INTO Answer (SessionId, QuestionId, Answer) 
    VALUES (?, ?, ?)";

      if (!$insertanswer = $mysqli->prepare($answersql)) {
      // Handle errors with prepare operation here
    }  

    $insertanswer->bind_param("sis", $sessid, $lastID, $answer);

        $insertanswer->execute();

        if ($insertanswer->errno) {
          // Handle query error here
        }

        $insertanswer->close();

}
}

}

} 
```

但是，在上述代码运行之前，我一直遇到的一个问题是，我需要在上面的代码中包含 2 个额外的 SELECT 查询。这些查询称为`$replystmt`和`$optionstmt`。但问题是，如果我在上面的 php/mysqli 代码中包含这些查询，我会不断收到这些错误：

> 警告：mysqli_stmt::execute(): (HY000/2014): 命令不同步；您现在无法在第 236 241 行的 /insertQuestion.php 中运行此命令：
> 
> 命令不同步；您现在无法运行此命令 致命错误：无法在第 242 行的 /insertQuestion.php 中中断/继续 2 个级别

现在完整的代码如下，我的问题是我需要在我的代码中进行哪些更改才能删除错误并使代码正常工作？

下面是完整的 php/mysqli 代码：

```
$replyquery = "SELECT ReplyId FROM Reply WHERE (ReplyType = ?)";

if (!$replystmt = $mysqli->prepare($replyquery)) {
// Handle errors with prepare operation here
echo __LINE__.': '.$mysqli->error;
}

$optionquery = "SELECT OptionId FROM Option_Table WHERE (OptionType = ?)";

if (!$optionstmt = $mysqli->prepare($optionquery)) {
// Handle errors with prepare operation here
echo __LINE__.': '.$mysqli->error;
}

// Prepare your statements ahead of time
$questionsql = "INSERT INTO Question (SessionId, QuestionId, QuestionContent, NoofAnswers, ReplyId, QuestionMarks, OptionId) 
VALUES (?, ?, ?, ?, ?, ?, ?)";
if (!$insert = $mysqli->prepare($questionsql)) {
// Handle errors with prepare operation here
echo __LINE__.': '.$mysqli->error;
}

$answersql = "INSERT INTO Answer (SessionId, QuestionId, Answer) 
VALUES (?, ?, ?)";
if (!$insertanswer = $mysqli->prepare($answersql)) {
// Handle errors with prepare operation here
echo __LINE__.': '.$mysqli->error;
}

//make sure both prepared statements succeeded before proceeding
if( $insert && $insertanswer)
{
$sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '');
$c = count($_POST['numQuestion']);

for($i = 0;  $i < $c; $i++ )
{

$selected_option = "A-C"; 
$selected_reply = "Single"; 

// Bind parameter for statement
$optionstmt->bind_param("s", $selected_option);

// Execute the statement
$optionstmt->execute();

if ($optionstmt->errno) 
{
// Handle query error here
echo __LINE__.': '.$optionstmt->error;
break 1;
}

// This is what matters. With MySQLi you have to bind result fields to
// variables before calling fetch()
$optionstmt->bind_result($optionid);

// This populates $optionid
$optionstmt->fetch();

// Bind parameter for statement
$replystmt->bind_param("s", $selected_reply);

// Execute the statement
$replystmt->execute(); //Line 236

if ($replystmt->errno) 
{
// Handle query error here
echo __LINE__.': '.$replystmt->error; //Line 241
break 2;
}

// This is what matters. With MySQLi you have to bind result fields to
// variables before calling fetch()
$replystmt->bind_result($replyid);

// This populates $optionid
$replystmt->fetch(); 

$insert->bind_param("sisiiii", $sessid, $_POST['numQuestion'][$i], $_POST['questionText'][$i],
$_POST['numberAnswer'][$i], $replyid, $_POST['textWeight'][$i],
$optionid);

$insert->execute();

if ($insert->errno) 
{
// Handle query error here
echo __LINE__.': '.$insert->error;
break 3;
}
}

$results = $_POST['value'];
foreach($results as $id => $value) 
{
$answer = $value;

$lastID = $id;

foreach($value as $answer) 
{
$insertanswer->bind_param("sis", $sessid, $lastID, $answer);

$insertanswer->execute();

if ($insertanswer->errno) {
// Handle query error here
echo __LINE__.': '.$insertanswer->error;
break 4;
}
}
}

//close your statements at the end

$insertanswer->close();
$insert->close();
$replystmt->close(); 
$optionstmt->close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:12:42.103

这里发生了两个不同的问题。首先，`Commands out of sync`警告正在发生，因为您在实际完成之前的查询之前尝试启动新查询。有关详细信息，请参阅[此答案。](https://stackoverflow.com/a/3632320/626682)基本上，您必须在准备下一个查询之前关闭您正在准备的每个查询。

至于`Cannot break/continue`错误，这是因为您`break 2`在只有 1 级深度时调用。`break`（或）之后的可选数字`continue`是要突破的“级别”数。

```
<?php
for($i = 0; $i < 10; $i++){
    // 1 level
    for($j = 0; $j < 10; $j++){
        // 2 levels

        break;      // Break of the $j loop
        break 1;    // Equivalent to above

        break 2;    // Break out of both the $j and $i loops

        break 3;    // Causes an error - there is no third level
    }
} 
```

当然，在那个例子中，它`break`在击中第一个 s 后永远不会到达另一个 s，但它应该说明这个概念。另请[参阅`break`](http://php.net/manual/en/control-structures.break.php).

# mysql - 同步 Mysql 表，并在任一侧更新表

> ID：12888192
> 
> 赞同：1
> 
> 时间：2012-10-15T01:25:52.033
> 
> 标签：mysql, synchronization

在两台服务器上有两个mysql数据库，我必须在两个数据库上共享用户信息表，我将这两个数据库用于不同的项目，在两个项目中都需要更新用户信息，因此用户信息的更新应该反映在其他项目中, 请提出好的同步方法，以确保数据不会丢失。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:28:17.447

通常，mysql 的复制支持 Master -> Slave 模式。用户只能从 Slave 读取以避免数据冲突。
但有些解决方案支持主主模式。您可以阅读此网址了解更多详情。 [http://www.howtoforge.com/mysql_master_master_replication](http://www.howtoforge.com/mysql_master_master_replication)

# c++ - gengetopt：如何解析没有选项的字符串（如文件名）

> ID：12888195
> 
> 赞同：0
> 
> 时间：2012-10-15T01:26:11.590
> 
> 标签：c++, getopt, getopt-long

我正在尝试使用 gengetopt 生成的代码解析命令行选项，并且试图弄清楚如何解析没有长选项或短选项的额外参数（在所有其他选项之后）。

我想这样称呼它：

程序 [选项] [输入文件]

例如：program -a -b -letterc "C:\somefile.txt" 或 program -a -b -letterc somefile.txt

其中“letterc”选项没有参数。

有谁知道如何使用 gengetopt 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:40:21.243

这些应该`inputs`在`gengetopt_args_info`. 有`input_num`他们。

# python - 在 Python 中运行给定时间的 shell 脚本

> ID：12888205
> 
> 赞同：1
> 
> 时间：2012-10-15T01:28:00.120
> 
> 标签：python, cron, streaming

我有一个 python 代码，它生成从 Ustream 录制实时流的命令。

我想设置一个 cronjob 每周运行一次此脚本来录制节目，是否有我可以在 python 代码中使用的代码，以便在生成正确的命令后执行给定时间然后停止它？

我想应该有一种方法来运行脚本，等待所需的时间，然后使用它的 ID 终止进程。那是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:33:06.033

您可以让已启动的进程在启动时将其进程 ID 写入文件。然后进行另一个读取该文件并终止该文件中的进程 ID 的 cron 作业。

您也可以（而不是修改已启动的进程）制作一个“启动器”bash 脚本，将已启动进程的 ID 写入文件：

```
#!/bin/bash -e
nohup python ustream_recorder.py > /tmp/ustream_recorder.log 2>&1 &
echo $! > /tmp/ustream_recorder.pid 
```

然后，杀死它：

```
#!/bin/bash -e
kill -INT `cat /tmp/ustream_recorder.pid`
rm /tmp/ustream_recorder.pid 
```

# string - 如何在 Dart 中对字符串列表进行排序？

> ID：12888206
> 
> 赞同：65
> 
> 时间：2012-10-15T01:29:10.490
> 
> 标签：string, list, sorting, dart

我在 API 文档中看到有一个`sort()`方法 on `List`，但我不清楚它需要什么参数。当前需要进行非常简单的直接 alpha 比较。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-10-15T03:46:45.033

# 1\. 快速解决方案

感谢您的提问！您可以`String`像这样对 s 列表进行排序：

```
main() {
  final List<String> fruits = <String>['bananas', 'apples', 'oranges'];
  fruits.sort();
  print(fruits);
} 
```

上面的代码打印：

```
[apples, bananas, oranges] 
```

# 2.稍微高级一点的用法

请注意，`sort()`它不返回值。它对列表进行排序而不创建新列表。如果要在同一行中排序和打印，可以使用*方法 cascades*：

```
print(fruits..sort()); 
```

如需更多控制，您可以定义自己的比较逻辑。这是根据价格对水果进行分类的示例。

```
main() {
  final List<String> fruits = <String>['bananas', 'apples', 'oranges'];
  fruits.sort((a, b) => getPrice(a).compareTo(getPrice(b)));
  print(fruits);
} 
```

让我们看看这里发生了什么。

A`List`有一个[sort](https://api.dartlang.org/apidocs/channels/be/dartdoc-viewer/dart:core.List#id_sort)方法，它有一个*可选*参数：a [Comparator](http://api.dartlang.org/docs/continuous/dart_core/Comparator.html)。Comparator 是一个`typedef`或函数的别名。在这种情况下，它是一个函数的别名，如下所示：

```
int Comparator(T a, T b) 
```

从文档：

> Comparator 函数表示这样的总排序，如果 a 小于 b，则返回负整数，如果 a 等于 b，则返回零，如果 a 大于 b，则返回正整数。

# 3.如何使用自定义对象列表

此外，如果您创建一个由自定义对象组成的列表，您可以添加`Comparable<T>`as`mixin`或继承 ( `extends`) 然后覆盖该`compareTo`方法，以便为`sort()`自定义对象列表重新创建标准行为。有关更多信息，请查看[其他相关的 StackOverflow 答案](https://stackoverflow.com/a/55308336/4756173)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-08-04T10:46:02.267

这是实现它的一行代码。

```
fruits.sort((String a, String b)=>a.compareTo(b)); //fruits is of type List<String> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-15T08:42:59.300

一般来说，在赛斯的详细答案中只添加一点，在

```
(a, b) => foo(a, b) 
```

传入`sort`，函数`foo`应该回答一个整数结果，如下所示：

*   如果 a < b，结果应该 < 0，
*   如果 a = b，则结果应为 = 0，并且
*   如果 a > b，结果应该 > 0。

要使上述三分法成立，两者`a`和都`b`必须是`Comparable`s。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-02-10T14:46:48.520

使用`compareAsciiUpperCase`而不是`compareTo`，因为它支持字符串并自动忽略区分大小写

```
import "package:collection/collection.dart";

data.sort((a, b) {
  return compareAsciiUpperCase(a.name, b.name);
}); 
```

[https://api.flutter.dev/flutter/package-collection_collection/compareAsciiUpperCase.html](https://api.flutter.dev/flutter/package-collection_collection/compareAsciiUpperCase.html)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-06-14T11:53:14.497

给你 。所有你必须知道的

用于对整数或字符串的简单列表进行排序

```
var list = [5 , -5 ,1];
 list.sort(); //-5 , 1 , 5 
```

用于反转列表顺序

```
list.reversed ; 
```

用于按字段排序对象列表或地图

```
List<Map<String, dynamic>> list= [
    {"name": "Shoes", "price": 100},
    {"name": "Pants", "price": 50},
  ];

  // from low to high according to price
  list.sort((a, b) => ["price"].compareTo(b["price"]));

  // from high to low according to price
  list.sort((a, b) => b["price"].compareTo(a["price"])); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-17T14:23:38.287

今天之后，你应该可以做 list.sort() 。sort 方法的参数现在是可选的，它默认为对元素本身调用 compareTo 的函数。由于 String 是 Comparable 的，它现在应该可以工作了。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-08-26T22:59:08.530

我是如何解决这个问题的。

```
 List<Product> _dataSavingListProducts = [];
  List<Product> _dataSavingListFavoritesProducts = [];

  void _orderDataSavingLists() {
    _dataSavingListProducts.toList().reversed;
    _dataSavingListFavoritesProducts.toList().reversed;
  } 
```

# node.js - 无法让一台 node.js 服务器与另一台服务器通信

> ID：12888207
> 
> 赞同：1
> 
> 时间：2012-10-15T01:29:24.637
> 
> 标签：node.js, coffeescript

我有两台节点服务器，一台在端口 5000（称为“Face”），另一台在端口 5001（称为“Hands”）

两者同时通过工头 procfile 启动。端口是固定的，我定位的 url 在浏览器中有效。

当 Hands 启动时，它需要与 Face（Facepalm？）对话并注册自己。但是，下面的代码似乎不起作用。（这是咖啡脚本生成的 JS）

在 http 服务器启动后，在服务器初始化期间调用 Register。如果是时间问题，我会以 2 秒的 setTimeout() 启动注册函数。我知道它的点击 (/home/register) 可用且正在工作的页面。

现在我可以看到它到达“发布到”控制台日志行。在 Face 上，我在注册码中放了一个 console.log，它从不记录任何东西——这意味着我认为它实际上并没有受到影响。（如果从浏览器命中它会记录）并且没有任何错误输出 - 它只是调用请求然后徘徊去拿三明治。

两台服务器都是“自己动手”——不使用任何框架。如果您发现奇怪的错字或需要更多信息，请告诉我。谢谢！

```
register = function() {
    var _this = this;
    console.log('Registering with Face Server');
    return post_face('/home/register', GLOBAL.data, function(rs) {
      console.log(rs);
      if (rs.registered) {
        GLOBAL.data.registered = true;
        return console.log("Registered with face at " + GLOBAL.config.face_host + ":" + GLOBAL.config.face_port);
      } else {
        throw "ERROR: Could not register with face server! " + GLOBAL.config.face_host + ":" + GLOBAL.config.face_port;
        return false;
      }
    });
  };

  post_face = function(path, data, cb) {
    var post_data, post_options, post_req;
    post_data = querystring.stringify({
      'registration': data
    });
    post_options = {
      host: GLOBAL.config.face_host,
      port: GLOBAL.config.face_port,
      path: path,
      method: 'POST',
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded',
        'Content-Length': post_data.length
      }
    };
    console.log("Posting to " + post_options.host + ":" + post_options.port);
    post_req = http.request(post_options, function(res) {
      var response,
        _this = this;
      console.log(res);
      response = "";
      res.setEncoding('utf8');
      res.on('data', function(chunk) {
        return response += chunk;
      });
      return res.on('end', function() {
        return cb.call(_this, response);
      });
    });
    return true;
  }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:43:53.973

感谢上面的比尔，答案是我实际上并没有发布数据并结束请求！我所指的一些示例的复制/粘贴/编辑错误。这是我应该拥有的最后两行代码：

```
post_req.write(post_data);
post_req.end(); 
```

# sql - 查询失败时如何用“0”代替并显示 NULL

> ID：12888209
> 
> 赞同：1
> 
> 时间：2012-10-15T01:29:35.373
> 
> 标签：sql, razor, webmatrix

我正在使用剃刀在 MS WebMatrix 中工作。

我遇到的问题是，如果我的一个查询解析为错误（例如除以 0），则整个页面都会失败。我希望查询为此输出“0”。

代码：

`var itot = db.QueryValue("SELECT SUM(SUBTOTAL) from dbo.DR_TRANS where TRANSDATE = 41195 and SUBTOTAL >0");`

`var ctot = db.QueryValue("SELECT SUM(SUBTOTAL) from dbo.DR_TRANS where TRANSDATE = 41195 and TRANSTYPE = 1 and SUBTOTAL <0");`

`var nett = itot + ctot;`

因此，如果 itot 或 ctot 由于所选日期没有条目而呈现 Null 或错误，我如何让它将错误视为“0”以便数学仍然有效？在此示例中，itot 是今天筹集的总发票，ctot 是今天筹集的总信用。

如果还没有发票，或者还没有积分，我的代码会抛出错误并关闭页面。如果两者都没有，我希望它显示 0，如果没有 ctot，我希望它显示 itot 的值。

我究竟做错了什么？当每个都有一些时它工作正常，但我希望它在此之前工作，因为页面上还有其他代码用于显示其他查询结果。

我对编码查询很陌生，所以在我的在线搜索中会有一个我错过的基本答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:00:13.077

`COALESCE`用应该返回`0`而不是包装聚合函数`NULL`：

```
SELECT COALESCE(SUM(SUBTOTAL), 0)
   FROM dbo.DR_TRANS
   WHERE TRANSDATE = 41195
     AND SUBTOTAL >0 
```

即一个函数，如果第一个参数不为null，则返回第一个参数，如果第一个参数为NULL，则返回第二个参数。我不知道要使用什么功能`webmatrix`，但`COALESCE`很标准。在 Oracle 中，您可以使用`NVL`. `ISNULL`是另一个这样的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T02:45:22.620

@Glenn 使用 SQL 提供了一个完美的解决方案。但是，您可能更愿意了解如何在 c# 中处理空值。空[合并运算符 ??](http://msdn.microsoft.com/en-us/library/ms173224.aspx) 这是一口，说如果某事不为空，则使用它，如果为空，则使用 ?? 之后的内容。一个例子比我刚刚写的更容易理解。您的代码的最后一行如下所示：

```
var nett = itot ?? 0 + ctot ?? 0; 
```

基本上?? 0 表示如果它为空，则将其视为零，否则使用该值本身。

我更喜欢在 C# 中做尽可能多的事情，并使我的 SQL 尽可能简单。但我承认这更多是个人喜好。

通常，在某些情况下，您必须处理 SQL 返回的空值，可能是一个字段，其中 null 表示用户没有输入任何内容，而零表示用户确实输入了零。在这种情况下，您可以在 c# 中测试 null ，例如

```
if ( itot == null )
{
    // do appropriate null stuff
    itot = 0;
} 
else
{
    // do non null stuff
    // nothing needed in this case
} 
```

# c# - 将 2D 图形绘制为表单似乎滞后/减慢我的程序

> ID：12888211
> 
> 赞同：4
> 
> 时间：2012-10-15T01:30:32.067
> 
> 标签：c#, .net, graphics, 2d, lag

我刚开始学习 .NET，所以这很可能是一个很大的 n00b 错误：

我正在尝试制作一个简单的乒乓球游戏，使用表单，然后使用 System::Drawing::Graphics 类将游戏绘制到表单上。

我的代码的重要部分如下所示：

（主游戏循环）：

```
void updateGame()
{
    //Update Game Elements
    (Update Paddle And Ball) (Ex. paddle.x += paddleDirection;)
    //Draw Game Elements
    //Double Buffer Image, Get Graphics
    Bitmap dbImage = new Bitmap(800, 600);
    Graphics g = Graphics::FromImage(dbImage);
    //Draw Background
    g.FillRectangle(Brushes::White, 0, 0, 800, 600);
    //Draw Paddle & Ball
    g.FillRectangle(Brushes::Black, paddle);
    g.FillRectangle(Brushes::Red, ball);
    //Dispose Graphics
    g.Dispose();
    //Draw Double Buffer Image To Form
    g = form.CreateGraphics();
    g.DrawImage(dbImage, 0, 0);
    g.Dispose();
    //Sleep
    Thread.sleep(15);
    //Continue Or Exit
    if(contineGame())
    {
        updateGame();
    } 
    else
    {
        exitGame();
    }
} 
```

（表单初始化代码）

```
void InitForm()
{
    form = new Form();
    form.Text = "Pong"
    form.Size = new Size(800, 600);
    form.FormBorderStyle = FormBorderStyle::Fixed3D;
    form.StartLocation = StartLocation::CenterScreen;
    Application::Run(form);
} 
```

PS。这不是确切的代码，我只是从内存中编写的，因此任何拼写错误或错误名称，或者与初始化表单有关的一些重要代码行都是来自那里。

这就是代码。我的问题是游戏肯定不是每 15 毫秒更新一次（大约 60 fps），它的速度要慢得多，所以我必须做的是每次移动桨/球更远的距离以补偿它不更新很快，这看起来很糟糕。

简而言之，在绘制图形时，游戏速度会大大降低。我觉得这与我的双重缓冲有关，但我无法摆脱它，因为这会产生一些令人讨厌的闪烁。我的问题是，我该如何摆脱这种滞后？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T02:33:56.697

此代码有几个问题会严重影响应用程序的性能：

1.  `Bitmap`每帧创建一个大缓冲区而不是处理它
2.  实现双缓冲，而 WinForms 已经很好地实现了这种行为
3.  updateGame() 是递归的，但不一定是递归的
4.  `Thread.Sleep()`在 GUI 线程中调用

代码示例，它使用单独的线程来计算游戏滴答数和 WinForms 内置的双缓冲：

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.Run(new GameWindow());
    }

    class GameWindow : Form
    {
        private Thread _gameThread;
        private ManualResetEvent _evExit;

        public GameWindow()
        {
            Text            = "Pong";
            Size            = new Size(800, 600);
            StartPosition   = FormStartPosition.CenterScreen;
            FormBorderStyle = FormBorderStyle.Fixed3D;
            DoubleBuffered  = true;

            SetStyle(
                ControlStyles.AllPaintingInWmPaint |
                ControlStyles.OptimizedDoubleBuffer |
                ControlStyles.UserPaint,
                true);
        }

        private void GameThreadProc()
        {
            IAsyncResult tick = null;
            while(!_evExit.WaitOne(15))
            {
                if(tick != null)
                {
                    if(!tick.AsyncWaitHandle.WaitOne(0))
                    {
                        // we are running too slow, maybe we can do something about it
                        if(WaitHandle.WaitAny(
                            new WaitHandle[]
                            {
                                _evExit,
                                tick.AsyncWaitHandle
                            }) == 0)
                        {
                            return;
                        }
                    }
                }
                tick = BeginInvoke(new MethodInvoker(OnGameTimerTick));
            }
        }

        private void OnGameTimerTick()
        {
            // perform game physics here
            // don't draw anything

            Invalidate();
        }

        private void ExitGame()
        {
            Close();
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            var g = e.Graphics;
            g.Clear(Color.White);

            // do all painting here
            // don't do your own double-buffering here, it is working already
            // don't dispose g
        }

        protected override void OnLoad(EventArgs e)
        {
            base.OnLoad(e);
            _evExit = new ManualResetEvent(false);
            _gameThread = new Thread(GameThreadProc);
            _gameThread.Name = "Game Thread";
            _gameThread.Start();
        }

        protected override void OnClosed(EventArgs e)
        {
            _evExit.Set();
            _gameThread.Join();
            _evExit.Close();
            base.OnClosed(e);
        }

        protected override void OnPaintBackground(PaintEventArgs e)
        {
            // do nothing
        }
    }
} 
```

可以进行更多改进（例如，仅使部分游戏屏幕无效）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T02:33:17.523

不要创建一个新的`Bitmap`每一帧。

不要使用`Thread.Sleep`. 而是检查`Timer`组件（`System.Windows.Forms`命名空间中的组件）。

# r - 检测宽数据框上的异常值

> ID：12888212
> 
> 赞同：4
> 
> 时间：2012-10-15T01:30:43.853
> 
> 标签：r

X

```
Team Date       Score
A    1-1-2012   80
A    1-2-2012   90
A    1-3-2012   50
A    1-4-2012   40   
B    1-1-2012   100
B    1-2-2012   60
B    1-3-2012   30
B    1-4-2012   70
etc 
```

我需要并且可以将此数据框转换为每个团队的一行宽数据框，并将所有观察结果和日期作为标题：

xx

```
Team 1-1-2012 1-2-2012  1-3-2012 1-4-2012
A    80       90        50        40
B    100     60         30        70 
```

我需要计算每一行的平均值和标准差，我可以这样做：

xx

```
Team 1-1-2012 1-2-2012  1-3-2012 1-4-2012  mean   sd
A    80       90        50        40       75    20
B    100     60         30        70       55    10 
```

考虑到我在数据框 xx 中有数千行。我想对每个单元格进行计算，如下所示：

如果 abs(xx-Mean) > 3*SD，创建一个计数器列名并增加值。这个想法是将每个观察结果与平均值和 sd 进行比较，如果给定团队的每个观察结果都匹配 - abs(xx-Mean) > 3*SD，则增加计数器。检查每个单元格后，我想查看每个团队的每个计数器，并获得计数器值最高的前十名高团队。基本上我正在尝试检测最多的异常值。一旦获得前 10 名团队名称，我想在数据框 x 上绘制他们的时间序列数据。

我希望我不会让这变得比它应该的更复杂。不确定，R 已经具有对每个单元格进行计算的功能。任何想法如何实现这一点表示赞赏？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T01:44:00.187

我会将您的数据保留为长格式并使用`plyr`,`data.table`或任何其他拆分-应用-组合工具来计算您的统计数据。这是我`plyr`用于该任务的方式：

```
#Your data
dat <- read.table(text = "Team Date       Score
A    1-1-2012   80
A    1-2-2012   90
A    1-3-2012   50
A    1-4-2012   40   
B    1-1-2012   100
B    1-2-2012   60
B    1-3-2012   30
B    1-4-2012   70", header = TRUE)

library(plyr)

#Compute mean and sd by team
dat <- ddply(dat, .(Team), transform, mean = mean(Score), sd = sd(Score))
#Your outlier threshold
dat <- transform(dat, outlier = abs(Score - mean) > 3*sd)
#Cumulative sum by team
dat <- ddply(dat, .(Team), transform, cumsumOutlier = cumsum(outlier)) 
```

将此作为输出（与您的示例不匹配，但可能是您的真实数据）：

```
 Team     Date Score mean       sd outlier cumsumOutlier
1    A 1-1-2012    80   65 23.80476   FALSE             0
2    A 1-2-2012    90   65 23.80476   FALSE             0
3    A 1-3-2012    50   65 23.80476   FALSE             0
4    A 1-4-2012    40   65 23.80476   FALSE             0
5    B 1-1-2012   100   65 28.86751   FALSE             0
6    B 1-2-2012    60   65 28.86751   FALSE             0
7    B 1-3-2012    30   65 28.86751   FALSE             0
8    B 1-4-2012    70   65 28.86751   FALSE             0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T01:40:05.090

一`long-format`、`data.table`方法

```
DT <- read.table( 'clipboard', header = T)
library(data.table)
DT <- as.data.table(DT)
DT[, mean.score := mean(Score), by = Team]
##    Team     Date Score mean.score
## 1:    A 1-1-2012    80         65
## 2:    A 1-2-2012    90         65
## 3:    A 1-3-2012    50         65
## 4:    A 1-4-2012    40         65
## 5:    B 1-1-2012   100         65
## 6:    B 1-2-2012    60         65
## 7:    B 1-3-2012    30         65
## 8:    B 1-4-2012    70         65
DT[, sd.score := sd(Score), by = Team]
##    Team     Date Score mean.score sd.score
## 1:    A 1-1-2012    80         65 23.80476
## 2:    A 1-2-2012    90         65 23.80476
## 3:    A 1-3-2012    50         65 23.80476
## 4:    A 1-4-2012    40         65 23.80476
## 5:    B 1-1-2012   100         65 28.86751
## 6:    B 1-2-2012    60         65 28.86751
## 7:    B 1-3-2012    30         65 28.86751
## 8:    B 1-4-2012    70         65 28.86751
DT[, outlier := abs(Score-mean.score) > 3 * sd.score, by = Team]
##    Team     Date Score mean.score sd.score outlier
## 1:    A 1-1-2012    80         65 23.80476   FALSE
## 2:    A 1-2-2012    90         65 23.80476   FALSE
## 3:    A 1-3-2012    50         65 23.80476   FALSE
## 4:    A 1-4-2012    40         65 23.80476   FALSE
## 5:    B 1-1-2012   100         65 28.86751   FALSE
## 6:    B 1-2-2012    60         65 28.86751   FALSE
## 7:    B 1-3-2012    30         65 28.86751   FALSE
## 8:    B 1-4-2012    70         65 28.86751   FALSE 
```

或者，一步

```
DT[, outlier := abs(Score-mean(Score)) > 3 *  sd(Score), by = Team] 
```

添加异常值的数量（逻辑变量的总和将强制为 0,1）

```
DT[, sum.outlier := sum(outlier), by = Team] 
```

# html - 如何使 div 不受放置在外部 css 文件中的父 div 样式的影响

> ID：12888213
> 
> 赞同：1
> 
> 时间：2012-10-15T01:31:05.483
> 
> 标签：html, styles, parent

在设计模式下，我想在 div 中放置一些文本，但是当在浏览器中显示时，该 div 会受到其父 div 的影响，其样式已更改...所以有人可以告诉我如何使其不受其父 div 或或样式的影响该外部css文件的父div。

# grails - 如何确保真正的一对多关系

> ID：12888215
> 
> 赞同：0
> 
> 时间：2012-10-15T01:31:19.520
> 
> 标签：grails, grails-orm

我在实体之间有一对多的关系 - RentalUnit 和 Review 。所有测试都运行良好，除非我向不同的 RentalUnit 实例添加相同的评论，如下所示：

```
def review3 = Review.build().save(flush: true)
def rentalUnit2 = RentalUnit.build().
    addToReviews(review2).addToReviews(review3).save(flush: true)
assert rentalUnit.reviews.contains(review2) 
```

似乎 GORM 和该`addTo*`方法似乎并不关心我是否添加了相同的 Review 实例，所以我猜我的域类中缺少一些东西。那会是什么？

谢谢你的帮忙

ps

```
class Review {
    String submittedBy
    String content
    String dateReceived
    boolean isApproved

    static belongsTo = RentalUnit

    static mapping = {
        content type: 'text'
    }

    static constraints = {
        submittedBy blank: false, size: 3..50
        content blank: false, size: 5..2500

    }
}

class RentalUnit {
    String name
    String nickname
    Address address
    static hasMany = [reviews:Review]

    static mapping = {
        reviews cascade: "all-delete-orphan"
    }

    static constraints = {
        name blank: false, unique: true, size: 4..10
        nickname blank: false, size: 5..60
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:48:40.930

是的，它不在乎——它不会改变任何其他对象的属性。即使是关系的另一端—— `review2.rentalUnit`（如果存在这样的字段）在这里也将为空。

下次从数据库加载对象时，评论将消失`rentalUnit.reviews`（或将被分配）。`review2.rentalUnit`

不过，您可以`review2.rentalUnit`手动分配并验证它是否已添加到另一个`RentalUnit`中 - 分配不会造成任何伤害。

**编辑**：让我们逐步浏览代码。

```
rentalUnit1.addToReviews(review2) 
```

这里`review2`添加到`rentalUnit1.reviews`. `review2.rentalUnit`未分配，但在数据库中保存后它将指向`rentalUnit1`. 字段的唯一持久表示`RentalUnit.reviews`是子到父引用字段，`Review.rentalUnit`.

```
def rentalUnit2 = ...
rentalUnit2.addToReviews(review2).addToReviews(review3).save(flush: true) 
```

这里`review2`添加到`rentalUnit2.reviews`. `review2.rentalUnit`没有再次分配。`review2`不会从`rentalUnit1.reviews`但是，保存后，在数据库中，它将指向`rentalUnit2`.

```
assert rentalUnit1.reviews.contains(review2) 
```

`review2`未从 中删除`rentalUnit1.reviews`，因此断言将通过。但是在下一个会话中`rentalUnit1`，`rentalUnit2`将拥有正确的`review`s 集-仅`rentalUnit2`将拥有`review2`.

现在，如果您想始终保持 Java 表示的一致性，请实现如下方法：

```
class RentalUnit {
    RentalUnit addToReviewsAndCheck(Review r) {
         if (r.rentalUnit == this) return;
         if (r.rentalUnit != null) {
             r.rentalUnit.removeFromReviews(r)
         }
         r.rentalUnit = this
         addToReviews(r)
    }
} 
```

但对我来说，这太过分了。

# mobile-safari - 当有人点击叠加层时，如何防止视频播放？

> ID：12888216
> 
> 赞同：0
> 
> 时间：2012-10-15T01:31:32.560
> 
> 标签：mobile-safari, jqmobi

我已经在我的视频元素上尝试了推荐的 -webkit-transform-style:preserve-3d 以防止在用户单击视频元素上方的叠加层时启动视频，但视频仍在播放：s

似乎是移动 safari 的问题，因为 Chrome 没有问题。

任何人都可以提供任何其他建议吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:00:22.933

您是否在叠加层上捕获事件？如果是这样，请调用 event.stopPropagation 并且应该阻止它冒泡到视频元素。

# perl - For/foreach 循环使 CGI 服务器崩溃

> ID：12888219
> 
> 赞同：-2
> 
> 时间：2012-10-15T01:32:06.313
> 
> 标签：perl

我需要为一个包含一些 for 或 foreach 循环的类编写一些 perl 脚本。出于某种原因，即使是最简单的 for 循环也只是返回 500 服务器错误。我检查了很多次，代码也可以在 codepad.org 上运行，但我不知道为什么它不能在服务器上运行。我无权访问服务器日志，所以我无法真正说出发生了什么。这些是一些非常简单的循环，它们也会导致错误。

```
@a=(2,3,4);
  foreach my $r (@a) { 
      print $r;
  } 
```

或者

```
 @a=(2,3,4);
  for ($i = 0; $i <= 2 ; $i++) {
        print $a[$i];

    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:25:02.600

任何时候你在写一个 CGI 脚本，在你处理它的时候把它放在顶部：

```
 use CGI::Carp qw(fatalsToBrowser); 
```

这会将 Perl 脚本中的重定向错误发送到浏览器窗口。它应该让您更好地了解导致问题的原因（假设它在脚本级别）。

它还可以让您轻松地将自己的错误和测试语句发送到浏览器，使用`die`：

```
die "testing 1 2 3"; 
```

这对于进行快速调试很有用。

# magento - Magento - FishPig 集成 - 没有为 /blog 获取正确的模板

> ID：12888221
> 
> 赞同：2
> 
> 时间：2012-10-15T01:32:40.000
> 
> 标签：magento

*   我已经安装了新版本的 WP、Fish Pig 和 Magento。

*   当我点击博客时，我的网站没有显示模板。

www.lawsongems.com/blog 它应该有模板，如下所示 www.lawsongems.com

它似乎是从这里抓取样式表

当我认为它应该是 skin/frontend/gravdept/acumen/css 时（这是我正在使用的主题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-14T12:08:12.913

在 magento 中，您需要更改您创建的包。

系统->配置->通用->设计

在 package 和 Theam 中写下您的文件夹名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:03:06.380

I assume you have either the "Wordpress URL" or the "Blog URL" defined wrong in your WP-backend.

Refer to this documentation: [http://fishpig.co.uk/wordpress-integration/docs/installation-and-configuration.html](http://fishpig.co.uk/wordpress-integration/docs/installation-and-configuration.html)

Else: is it fully or semi-integrated? And: is the WP-folder inside or outside /magento/-folder?

Cheerz Simon

# algorithm - 操作系统优先匹配算法

> ID：12888222
> 
> 赞同：0
> 
> 时间：2012-10-15T01:32:48.770
> 
> 标签：algorithm, memory-management, operating-system

这是一个空闲空间表

```
+--------+-------+
|address | size  | 
|   28   |  11   |
|   21   |  19   |
+--------+-------+ 
```

输入以下数据：`11, 5, 7`

我需要使用首次拟合算法将每个数据放在正确的位置。

我这样做对吗？

（步骤 1）11 将被放置在地址 28 处，大小为 11

（步骤 2）将 19 分成两部分，将 5 放置在地址 21，因此创建 14（新分区）

（步骤 3）7 将放置在地址 21 处，大小为 14，这是在步骤（2）中创建的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:40:59.770

看起来是对的，除了 7 长的条目没有到达地址 21，因为那时 5 将在该地址。7 长的条目可能会到达地址 21+5=26。并且如果在表格中的搜索是按照表格显示的顺序或从较高地址到较低地址进行的。此外，最后一步也会生成一个新分区。

如果，OTOH，搜索是在相反的方向进行的，那么结果是不同的。

转念一想，这一切看起来都不对劲。为什么 21+19=40 > 28？或者这些是结束的地址而不是空闲分区的开始？？？但随后 28-11=17 < 21。

不计算。

你的作业有问题或遗漏。

# r - 自动调整 PDF 输出中的 R 绘图大小

> ID：12888225
> 
> 赞同：16
> 
> 时间：2012-10-15T01:33:10.193
> 
> 标签：r, pdf, plot

当使用`pdf()`R 中的函数将绘图保存在外部文件中时，我们可以指定`width`和/或`height`调整绘图的大小。但是，在某些情况下，我们会获得多个图（例如使用`par(mfrow=c(2,4))`）。在这种情况下，很难确定什么是最好的`width`，`height`对于 PDF 文件，以便正确显示所有绘图。有没有办法让 R 在 PDF 文件中自动“拟合图”？我搜索了其中的论点`pdf()`并尝试了一些，但结果并不令人满意。非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:17:58.467

使用ggplot怎么样？

```
require(ggplot2)

# Bogus data
x <- rnorm(10000)
y <- as.factor(round(rnorm(10000, mean=10, sd=2), 0))
df <- data.frame(vals=x, factors=y)

myplot <- ggplot(data=df, aes(x=vals)) +
  geom_density() +
  facet_wrap(~ factors)

ggsave(filename="~/foo.pdf", plot=myplot, width=8, height=10, units="in") 
```

**编辑：**如果您需要打印多页，请参阅[此问题](https://stackoverflow.com/questions/3398568/r-ggplot-plotting-over-multiple-pages)。

# javascript - Spring MVC 和 JQuery

> ID：12888226
> 
> 赞同：2
> 
> 时间：2012-10-15T01:33:13.610
> 
> 标签：javascript, jquery, spring-mvc

我有一个**Spring Mvc**应用程序，我希望当用户单击提交按钮并返回到显示**jquery 对话框**的视图时，如“*事务成功*”或对话框中的任何错误消息。

目前，如果交易成功或任何错误我设置**model.addAttribute('ServerResponse', 'Transaction Wassuccess')**或**model.addAttribute('ServerResponse',e) ，**一旦处理完成，表单到达控制器。

我想将“ **ServerResponse** ”返回到对话框中，但是我不知道将**jquery**附加到的最佳事件是什么。我不想创建 Web 服务，因为我已经在使用发布到服务器的帖子，并且万一**javascript**已关闭。

一旦 ServerResponse 元素具有值，有人可以告诉我用 ServerResponse 显示对话框的最佳方式是什么。最初加载表单时，ServerResponse 应该为空。

希望我对我在这里想要实现的目标足够清楚。

**已编辑**

这就是我正在做的，但是当我从服务器返回它实际上显示在创建 div 的点时，该函数没有执行。

```
<div id="dialog" title="Server Response">
            <p>
                <span class="ui-icon ui-icon-info" style="float: left; margin: 0 7px 50px 0;"></span>
                ${results}
            </p>

        </div>

 $(function() {

         var serverResponse = $('#serverResponse').val().length;

            alert(serverResponse);

         if(serverResponse != 0){

             alert(serverResponse);
             $("#dialog").dialog();              
         }

      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:41:08.517

使用您在视图层中使用的任何模板语言将消息从模型输出到 div。就像是：

```
<div id="serverResponse"><%= serverResponse %></div> 
```

相应地设置样式，然后在该页面上的 jquery（使用 jquery UI）中执行以下操作：

```
$(function() {
  $("#serverResponse").dialog();
} 
```

然后做任何你想要的造型。如果没有 javascript，将显示普通 div，如果有，则将其拉入对话框。您可以使用`noscript`重复的内容来消除内容的瞬间闪现，然后再将其拉入对话框。

# c++ - C++ 简单聊天客户端，无需提升

> ID：12888227
> 
> 赞同：0
> 
> 时间：2012-10-15T01:33:16.793
> 
> 标签：c++, linux, chat

我想尝试编写一个可以与我的一个朋友一起使用的点对点聊天客户端，我们俩都在运行 fedora 17。在阅读了一些内容之后，我想通过 TCP 套接字发送消息来实现这一点，但是我我不确定我需要使用哪些库/库来执行此操作。老实说，我试图让 boost 库编译并弄清楚如何链接它们有点累，整个过程对我来说似乎是不必要的复杂，因为我个人不喜欢使用 IDE，所以我使用 vim。是否有任何标准 C++ 库允许使用 tcp 套接字将数据包从一台设备发送到另一台设备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:18:14.563

您不需要任何特殊的库，它们都包含在所有应用程序都链接的标准 C 库 (libc) 中。

您必须做的事情对于客户来说是常见的：

1.  查找主机的 IP 地址 ( [`getaddrinfo`](http://linux.die.net/man/3/getaddrinfo))
2.  创建套接字 ( [`socket`](http://linux.die.net/man/2/socket))
3.  连接到服务器 ( [`connect`](http://linux.die.net/man/2/connect))
4.  发送和接收数据（[`write`](http://linux.die.net/man/2/write)和[`read`](http://linux.die.net/man/2/read)）
5.  完成后关闭连接 ( [`close`](http://linux.die.net/man/2/close))

网上有很多关于网络编程的教程，几乎都有例子展示了char服务器和客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:55:29.653

我认为你只需要 C++ 和标准库。您需要编写一个程序绑定到相关端口并通过 TCP 连接到另一台计算机。只是通过套接字连接发送和接收消息。

# math - 在这个椭圆方程中，静态值和变量值应该放在哪里？

> ID：12888228
> 
> 赞同：-1
> 
> 时间：2012-10-15T01:33:24.843
> 
> 标签：math, geometry, shapes, kinematics

来自维基百科，这是一个椭圆的方程：

![椭圆方程](../Images/4d87a7490ed0cf121cd20ce0190061d5.png)

我希望所有椭圆的宽度为 240 像素。

并希望所有椭圆的高度为 10 到 60 像素之间的值，该值将随机生成。

像这样的东西：

![椭圆](../Images/1c5eae9400d106e0b01bd5b9f58eef3c.png)

我的问题是在哪里插入 240，在哪里插入随机生成的高度值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:24:42.237

**a**和**b**是椭圆的半径。

这是我一直在寻找的答案：

![x^2 / (240/2)^2 + y^2 / (h/2)^2 = 1](../Images/ca6495932edc1e5265d2e60b6e232101.png)

.. 其中 h = 10 到 60 之间随机生成的高度。

因为椭圆有两个半径，而不是在圆的情况下只有一个。

# java - 为什么我的循环不会停止；看似布尔表达式

> ID：12888231
> 
> 赞同：0
> 
> 时间：2012-10-15T01:34:03.433
> 
> 标签：java, drjava

所以我的程序运行并从右上角开始绘制一排菱形。然后它向下移动一行并重复。它应该停在 4 行（由于画布大小），但它不会！

首先 for 语句绘制一个菱形。第二个 for 语句移动到下一个菱形。重复 7 次。

第三个 for 语句（这是我假设问题所在..）向下移动一行并重复前两个。

所有这些都完美运行！直到它没有停止！

它只是无限期地重复！

```
import Media.*;
import static java.lang.Math.*;

public class DiamondTiles2 {

private TurtleDisplayer display;
private Turtle            steve;

public DiamondTiles2 (){

display = new TurtleDisplayer();
steve = new Turtle();
display.placeTurtle(steve);

steve.setSpeed(15);
steve.forward(140);             // Moves Steve to the furthest right he needs to be
steve.left(PI/2);
steve.forward((float)1.5*(40*sqrt(3.0)));  // Moves Steve to the top (up 1.5 times the height of a diamond)
steve.left(PI/6);
steve.penDown();

for (int j=1 ; j<=7 ; j++){  //Diamond Drawing
  steve.forward(40);
  steve.left(2*PI/3);        
  steve.forward(40);
  steve.left(PI/3);
  steve.forward(40);
  steve.left(2*PI/3);
  steve.forward(40);
  steve.left(PI/3);
  for (int i=1 ; i<=1 ; i++){ //Move to Next Diamond
    steve.penUp();
    steve.left(PI/3);
    steve.forward(40);
    steve.right(PI/3);
    steve.penDown();         
    for (int k=1 ; (j>=7)&&(k<=4) ; j=j-7 , k++){ //Move to next row
      steve.penUp();
      steve.right(7*PI/6);
      steve.forward((float)40*(sqrt(3.0)));
      steve.left(PI/2);
      steve.forward(280);
      steve.left(2*PI/3);
      steve.penDown();
    }
  }
}  
display.close();
};
public static void main ( String[] args ) { DiamondTiles2 d = new DiamondTiles2(); };
} 
```

我看到它的方式：最后一个 for 循环应该从 k==1 开始，然后每次将 k 增加一。它不应该重复过去 4 点，因为

```
for (int k=1 ; (j>=7)&&**(k<=4)** ; j=j-7 , k++) 
```

请帮忙！:)

编辑：好的，所以 j 绝对是问题...解释为什么我要重置 J：当我没有在七点重置 7 时，它会绘制第一行，然后它会无限循环移动到新的步骤排。所以它会停止绘图并只是移动“下，右，下，右，下，右......等。

添加 j=j-7 解决了这个问题，但开始了这个新问题。由于 k<=4 不是真的，我认为哪个会得到解决……有什么理由似乎“忽略”了那个布尔值？

EDIT2：固定：将最后一个 for 语句更改为此 IF 语句：

```
 if ((j>=7)&&(x<=3)){ //Move to next row
      steve.penUp();
      steve.right(7*PI/6);
      steve.forward((float)40*(sqrt(3.0)));
      steve.left(PI/2);
      steve.forward(280);
      steve.left(2*PI/3);
      steve.penDown();
      j=j-7;
      x=x+1; 
```

感谢所有帮助过我的人！这个网站上的惊人反应！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:37:29.220

Is it possible that the j=j-7 in the line you referenced isn't screwing up your intention in the first for loop on j?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T01:37:54.300

You increment `j` in your outermost loop and you reset `j` in the innermost loop. That seems like asking for trouble. The innermost loop guarantees that `j` will never be 7 or more, and therefore the outermost loop will never terminate.

I would refactor so that you don't modify `j` other than in the outer `for` statement.

I would also recommend stepping through with a debugger to see what's going on.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T01:38:31.280

It looks like the problem is `j=j-7` - your loop will only stop if j is greater than or equal to 7 and k is less than 4\. Because `j` is decremented by 7 on each iteration, your condition can never be met.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T01:39:26.080

它不会重复过去 4...*在那个循环中*。问题是最里面的循环运行了无数次，所以它从 1-4 循环，然后从 1-4 循环，然后从 1-4 循环，等等。

为什么该循环无限次运行？

似乎您在最内层和最外层循环中的终止符不一致。由于每次增加超过 7 时，最内层循环中的 j 都会从 j 中减去 7，并且只要 j 小于或等于 7，最外层循环就会运行，因此永远不允许 j 变得足够大以使最外层循环终止。这意味着最里面的循环一遍又一遍地运行（因为最外面的循环在无限循环中），1-4、1-4、1-4...

# php - 通过 PHP 和 HTTP 上传 AWS S3 文件

> ID：12888233
> 
> 赞同：1
> 
> 时间：2012-10-15T01:34:34.250
> 
> 标签：php, http, file-upload, amazon-s3, lamp

我想使用 Amazons S3 服务来存储用户上传到我的 LAMP 包的文件。我想知道这样做最好（时间、成本、安全性等）是什么。我很熟悉使用带有 PHP 处理的 HTTP 上传文件，但我总是将它保存到本地存储中。我应该有一个 tmp 目录，我可以从中上传 SDK，还是应该甚至可以将文件从数据变量上传到 S3？我也希望能够处理 5 GB 的文件，但目前我只运行半 GB 的内存，这会在我的项目中引起任何问题吗？请记住，我的 Web 服务器是 EC2 服务器。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:49:37.373

Q1：从内存上传而不创建临时文件。

是的，你可以做到。Amazon SDK 具有“putObjectFile”和“putObjectString”函数，第一个从临时文件创建对象，第二个从字符串创建对象。

Q2：上传大文件（5GB）。

虽然您可以获得具有 5GB 内存的服务器，但在上传发生时将要上传的数据完全存储在内存中有点矫枉过正 - 因此，从该文件中获取一个用于上传和逐块流式传输的临时文件可能是明智的. 要在 PHP 中处理 curl 中的块，您可能需要添加[CURLOPT_READFUNCTION](http://pt2.php.net/manual/en/function.curl-setopt.php)来一次读取文件的一部分以进行上传。

> 回调函数的名称，其中回调函数采用三个参数。第一个是 cURL 资源，第二个是通过选项 CURLOPT_INFILE 提供给 cURL 的流资源，第三个是要读取的最大数据量。回调函数必须返回一个长度等于或小于请求数据量的字符串，通常通过从传递的流资源中读取它。它应该返回一个空字符串来表示 EOF。

您可以在 Amazon 开发工具包 function 中找到 curl 函数`getResponse()`。该类被标记为“final”，因此您需要实际修改 SDK 以添加它。

Q3：成本。具有稍大硬盘（用于存储临时文件）的服务器很可能比添加内存更便宜。

Q4：安全。您可以将临时文件存储在 Web 根目录之外，因此它们将与您的网络服务器一样安全。如果您的网络服务器受到威胁，他们无论如何都会获得您的 Amazon 密钥 - 因此，这实际上不应该比保护您的应用程序的其余部分更令人担忧。

# android - android 使用 php 脚本在线连接到在线 mysql 服务器

> ID：12888235
> 
> 赞同：1
> 
> 时间：2012-10-15T01:34:48.170
> 
> 标签：android, json

这是我的连接代码。错误是：

10-16 21:33:29.300: E/JSON(359):
10-16 21:33:29.300: E/JSON(359):**警告**: mysql_connect() [function.mysql-connect]: 未知的 MySQL 服务器主机' https' (1) in **/home/shifteb/public_html/studentreg/_android_alexmed_api/include/DB_Connect.php**第**24**
行 10-16 21:33:29.300: E/JSON(359):
10-16 21:33:29.300: E/JSON(359)：**警告：mysql_select_db() [function.mysql-select-db]：在****/home/shifteb/public_html/studentreg/_android_alexmed_api**中的用户 'shifteb'@'localhost'（使用密码：NO）的访问被拒绝**/include/DB_Connect.php**在第**26**
行 10-16 21:33:29.300: E/JSON(359):
10-16 21:33:29.300: E/JSON(359):**警告**: mysql_select_db() [function.mysql-select-db]: 无法在**/home/shifteb/public_html/studentreg/_android_alexmed_api/include/DB_Connect.php**在第**26**
行 10-16 21:33 中建立到服务器的链接： 29.300: E/JSON(359):
10-16 21:33:29.300: E/JSON(359):**警告**: mysql_query() [function.mysql-query]: 拒绝访问用户'shifteb'@'localhost' (使用密码：NO) 在**/home/shifteb/public_html/studentreg/_android_alexmed_api/include/DB_Functions.php中的第****121**行
10-16 21:33:29.300: E/JSON(359):
10-16 21:33:29.300: E/JSON(359)：**警告**：mysql_query() [function.mysql-query]：无法建立到服务器的链接**/home/shifteb/public_html/studentreg/_android_alexmed_api/include/DB_Functions.php**在第**121**
行 10-16 21:33:29.300: E/JSON(359): 拒绝用户 'shifteb'@'localhost' 的访问（使用密码：否）10-16 21:33:29.320：E/JSON 解析器（359）：解析数据时出错 org.json.JSONException：值

当我尝试连接到在线时这个？？？

该应用程序可以完美运行，`localhost`但是当我更改在线服务器的 URL 并上传 php 脚本时，会出现上述错误。

这些是脚本

函数脚本

```
<?php

/**
 * @author ziad gamal baiomy gholmish
 * @copyright 2012
 */

class DB_Functions {

    private $db;

    //put your code here
    // constructor
    function __construct() {
        require_once 'DB_Connect.php';
        // connecting to database
        $this->db = new DB_Connect();
        $this->db->connect();
    }

    // destructor
    function __destruct() {

    }

    /**
     * 
     *function to search student 
     *  
     */

     public function searchStudent($method ,$information){

        if($method == 'e_mail'){

            $query=mysql_query(" SELECT * FROM persons WHERE `email_personal` = '$information' ");
            $no_of_rows = mysql_num_rows($query);
            if($no_of_rows > 0){

                $resultset=mysql_fetch_array($query);

                return $resultset;

            }else{

                return false;
            }
        }else if($method == 'mobile'){

            $query=mysql_query(" SELECT * FROM persons WHERE `mobile` = '$information' ");
            $no_of_rows = mysql_num_rows($query);

            if($no_of_rows > 0){

                $resultset=mysql_fetch_array($query);

                return $resultset;
            }else{

                return false;
            }

        }else if($method =='phone'){

             $query=mysql_query("SELECT * FROM persons WHERE `phone` = '$information'");
              $no_of_rows = mysql_num_rows($query);

            if($no_of_rows > 0){

                $resultset=mysql_fetch_array($query);

                return $resultset;
            }else{

                return false;
            }
        }else if($method == 'id'){

            $information= intval($information);

             $query=mysql_query("SELECT * FROM persons WHERE `id` = $information");
             $no_of_rows = mysql_num_rows($query);

            if($no_of_rows > 0){

                $resultset=mysql_fetch_array($query);

                return $resultset;
            }else{

                return false;
            }
        } 

     }

    /**
     * 
     *function to staff login 
     * 
     * 
     */

    public function staffLogin($username , $password){

        $hashed_password= sha1($password);

        $result=mysql_query("SELECT * FROM admins WHERE `username` = '$username'") or die(mysql_error());
        $no_of_rows = mysql_num_rows($result);

        if($no_of_rows > 0){
         $result = mysql_fetch_array($result);

         if($hashed_password == $result['hashed_password']){

           return $result;
         }else{

          //user not found 
          return false;
        }

   }

    }

    /**
     * 
     *function to add  staff member
     * 
     * 
     * 
     */

 public function addStaffMember($username , $password , $national_id){

        $result=mysql_query("SELECT `username` FROM admins WHERE `username` = '$username'");
         $no_of_rows = mysql_num_rows($result);
         if($no_of_rows == 0){

            $query=mysql_query("INSERT INTO persons( `national_id` ) VALUES('$national_id')");

            if($query){

                $resultset=mysql_query("SELECT max(id) FROM persons");
                $admin = mysql_fetch_array($resultset);
                $admin_id = $admin['0'];
                $admin_id= intval($admin_id);
                $hashed_password= sha1($password);
                $query=mysql_query("INSERT INTO admins (`id`, `username`, `hashed_password`) VALUES ($admin_id , '$username', '$hashed_password')");

                if($query){

                    return true;
                }else{
                    return false;

                }

            }

         }

    }

    /**
     *
     *  
     * edit student information
     * 
     * 
     */

     public function editStudentInfo($f_name ,$s_name  ,$t_name ,$l_name ,$phone ,$mobile ,$e_mail ,$city ,$department ,$street ,$building,$flat ,$id){

        $id=intval($id);

        $query=mysql_query("UPDATE persons SET `english_fName`= '$f_name' , `english_sName`= '$s_name'  , `english_tName`= '$t_name' , `english_lName`= '$l_name'  , `phone`= '$phone'  , `mobile`= '$mobile' , `city`= '$city' , `p_department`= '$department' , `street`='$street'  , `building`='$building'  , `flat`='$flat'  , `email_personal`= '$e_mail' WHERE id= $id ") or die(mysql_error());

        if($query){

            return true;

        }else{

            return false;
        }

     }

     /**
      * 
      *function to change the student password 
      * 
      * 
      */

     public function changeStudentPass($old_pass , $new_pass , $id){

        $hashed_old=sha1($old_pass);
        $hashed_new=sha1($new_pass);
        $id= intval($id);

        $query =mysql_query("SELECT * FROM students WHERE id = $id AND `hashed_password` ='$hashed_old' LIMIT 1") or die(mysql_error());
        $no_of_rows = mysql_num_rows($query);
        if($no_of_rows == 1){

            $query=mysql_query("UPDATE students SET `hashed_password` = '$hashed_new' WHERE id = $id ") or die(mysql_error());
            if($query){

                return true;

            }else{

                return true;
            }

        }

     }

 /**
  * 
  *get the user by user name and password 
  * 
  */
 public function  getUserByUserNameAndPassword($username, $password){

    $hashed_password= sha1($password); 
   $result=mysql_query("SELECT * FROM students WHERE `username` = '$username'") or die(mysql_error());
   $no_of_rows = mysql_num_rows($result);

   if($no_of_rows > 0){
    $result = mysql_fetch_array($result);

    if($hashed_password == $result['hashed_password']){

        return $result;
    }else{

        //user not found 
        return false;
    }

   }

 }

    /**
     * registeration process
     * 
     * 
     */ 

 public function registerUser($english_fName , $english_sName ,  $english_tName , $english_lName ,$phone ,$mobile ,$email_personal , $sex , $religion , $city ,$p_department, $street , $building ,$flat , $birth_date , $social , $nationality ,$seat_number ,$password){

    $query=mysql_query("select * from persons p join students s on p.id =s.id and `seat_number` =$seat_number");
    if($query){

    $resultSet=mysql_fetch_array($query);

    $file_number= $resultSet['file_number'];

    $file_number= takeTodigit($file_number);

    $username=$english_fName.".".$english_tName."12".$file_number;
    $hashed_password=sha1($password);

    $email_college=$username."@alexmed.edu.eg";
    $id=$resultSet['id'];
    $birth_date=strtotime($birth_date);
    $birth_date=date('y-m-d',$birth_date);

    $query=mysql_query("UPDATE persons set `english_fName`='$english_fName' , `english_sName`='$english_sName' , `english_tName`='$english_tName' ,`english_lName`='$english_lName',`phone`='$phone' , `mobile`='$mobile'  , `email_personal`='$email_personal' , `sex`='$sex' , `religion`='$religion' ,`city`='$city' ,`p_department`='$p_department' ,`street`='$street'  , `building`='$building' ,`flat`='$flat' ,`social`='$social' , `nationality`='$nationality' ,`email_college`='$email_college' ,`birth_date`='$birth_date'  WHERE `id`=$id ");
    $query=mysql_query("UPDATE students set `username`= '$username' ,`hashed_password`='$hashed_password' ,`active` = 1");
    $query=mysql_query("SELECT * FROM students WHERE `id`=$id ");
    if($query){

        $resultSet=mysql_fetch_array($query);
        return $resultSet;
    }else{
        return false;

    }
            }
    }

 /**
  *add new student
  *  
  * 
  */
  public function addNewStudent($fName ,$sName ,$tName,$lName,$national_id,$seat_number,$total_grades){

$issuance_of=getissuanceof($national_id);

    $query = mysql_query("INSERT INTO persons(`arabic_fName` , `arabic_sName` ,`arabic_tName` ,`arabic_lName` , `national_id` ,`issuance_of`) VALUES ('$fName' ,'$sName','$tName' ,'$lName' ,'$national_id' ,'$issuance_of')");

    if ($query) {
        //Success!
        //Generating student id:
        $resultset = mysql_query("SELECT max(id) FROM persons");
        $student = mysql_fetch_array($resultset);
        $student_id = $student['0'];
        //Inserting into the studens' table:
        $date = date('Y-m-d');

        $query = mysql_query("INSERT INTO students (`id` , `seat_number` ,`total_grades` , `file_number` , `join_date`  ) VALUES ('$student_id', '$seat_number', '$total_grades' ,'$student_id' , '$date')");

        if ($query){
              //Generating student id:  
   $student_id= intval($student_id);
     $resultset = mysql_query("SELECT `file_number` FROM students WHERE id =$student_id");
        $student = mysql_fetch_array($resultset);
      $file_number_2= $student['file_number'];
        $student_number =(int) generate_snumber($file_number_2);
        mysql_query("UPDATE students SET `student_number`=$student_number WHERE `file_number` =$file_number_2");    
        return true;
            }else{
                    die(mysql_error());

        }

            }

  }

public function search_Seat_Number($s_seat_number){

  $query = mysql_query("SELECT * FROM students WHERE `seat_number` =$s_seat_number");

  if($query){

  if(mysql_num_rows($query) == 0){

  return false;

  }else{

    return true;
  }

  }else{

    return false;
  }

  }
 }

function generate_snumber($file_number){

      $file_number= strval($file_number);
      if(strlen($file_number) == 1){

        $file_number= "000".$file_number;
      }
      else if(strlen($file_number) == 2){

        $file_number= "00".$file_number;
      }

      else if(strlen($file_number) == 3){

        $file_number = "0".$file_number;
      }

      $student_number= "12".$file_number;
      return $student_number;

  }

  function takeTodigit($file_number){

    if(strlen($file_number) == 1){
 $file_number = "0".$file_number;
       }
       if(strlen($file_number) == 2 )
       {

        $file_number =$file_number;
       }

       if(strlen($file_number) ==3){

        $file_number = substr($file_number, -2);

       }
       if(strlen($file_number) == 4){

        $file_number= substr($file_number, -2);
       }
       return $file_number;

  }

  function getissuanceof($national_id){

  $issuance_of=$national_id[7].$national_id[8];
  return $issuance_of;     
    }

?> 
```

配置脚本是：

```
<?php

/**
 * @author ziad gamal baiomy gholmish
 * @copyright 2012
 */
/**
 * Database config variables
 */
define("DB_HOST", "https://supremecenter10.se/pma/index.php?token=a8aa13f9715f82765b6d101b2b1a43ff");
define("DB_USER", "ultratech_mobdb");
define("DB_PASSWORD", "******"// the password );
define("DB_DATABASE", "******//the username here ");

?> 
```

连接脚本：

```
<?php

/**
 * @author ziad gamal baiomy gholmish
 * @copyright 2012
 */

    class DB_Connect {

        // constructor
        function __construct() {

        }

        // destructor
        function __destruct() {
            // $this->close();
        }

        // Connecting to database
        public function connect() {
            require_once 'config.php';
            // connecting to mysql
            $con = mysql_connect("https://supremecenter10.se/pma/index.php?token=a8aa13f9715f82765b6d101b2b1a43ff", "username" ,"password");
            // selecting database
            mysql_select_db("https://supremecenter10.se/pma/index.php?token=a8aa13f9715f82765b6d101b2b1a43ff");

            // return database handler
            return $con;
        }

        // Closing database connection
        public function close() {
            mysql_close();
        }

    }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T04:24:44.767

看来您可能是关于 SO: [Null Pointer Exception while retrieving JSON Object](https://stackoverflow.com/a/11070290/1455421)的这个问题中讨论的相同问题。

看看上面链接中提供的解决方案。我希望这有帮助。

# php - PHP Xpath 仅获取具有某些属性的输入节点

> ID：12888237
> 
> 赞同：1
> 
> 时间：2012-10-15T01:36:10.670
> 
> 标签：php, xpath, input

我正在尝试在 DOM Xpath 的帮助下解析 HTML 文档

我在 HTML 中有几个输入标签，例如

```
<form id="someid" action="login.jsf">
   <input type="hidden" id="someid" name="somename" value="somevalue">
   <input type="text" id="someid" name="somename" value="somevalue">
</form> 
```

我有以下代码可以访问表单内的所有输入标签。

```
$inputFields = $xpath->query("//form[contains(@action,'login.jsf')]/input/@*"); 
```

它返回所有具有所有属性的输入节点，但我只需要名称和值属性，否则我将不得不围绕所有属性运行循环并丢弃除名称和值之外的所有其他属性。基本上我想**“仅选择具有名称和值属性的所有输入节点”。**

我需要根据 name 和 value 属性值创建一个 post 数组。

我试过以下

```
 $inputFields = $xpath->query("//form[contains(@action,'login.jsf')]/input/[@name | @value]"); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:57:12.463

您可以使用该`name`函数来获取属性的名称：

```
//form[contains(@action,'login.jsf')]/input/@*[name()='name' or name()='value'] 
```

# django - 如何在 django 中处理 IE 的不编码 URL？

ID：12888238

赞同：0

时间：2012-10-15T01:36:16.460

标签：django, internet-explorer, get, url-encoding

# python - How to "negate"(?) a list - Python

> ID：12888240
> 
> 赞同：2
> 
> 时间：2012-10-15T01:36:36.897
> 
> 标签：python

> **Possible Duplicate:**
> [python takes list and returns only if negative value also exists using set](https://stackoverflow.com/questions/12887398/python-takes-list-and-returns-only-if-negative-value-also-exists-using-set)

I'm having problems with another homework problem.

> By using a set, write a method negated(a) that takes a list, a, as an argument and returns a list containing only the elements x such that -x is also in a

His example shows that the input is

> [-6, 8, 7, 3, 2, -9, 1, -3, 2, -4, 4, -8, 7, 8, 2, -2, -7, 0, 1, -9, -3, -7, -3, -5, 6, -3, 6, -3, -10, -8]

and the output is

> [-6, 8, 7, 3, 2, -3, 2, -4, 4, -8, 7, 8, 2, -2, -7, 0, -3, -7, -3, 6, -3, 6, -3, -8]

I was able to figure out how to do it without using a set with

```
return [x for x in a if -x in a] 
```

I'm just having problems implementing a set into the problem. Can someone give me the steps to take, how I should tackle the problem... I'm not looking for the complete work, but it would be nice to see how you do it also.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:43:05.970

您的代码按原样工作。您需要做的就是将列表更改为一组。

```
def negate(a) :
  return [x for x in a if -x in a]

a = set()
a.add(1)
a.add(2)
a.add(-1)
print negate(a) 
```

[演示](http://codepad.org/EmdZZEBk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T01:42:15.200

这是您需要实现的算法：

1.  遍历列表中的所有元素
2.  当你考虑每个单独的元素时，检查它的否定是否存在于列表中
3.  如果否定存在于列表中，则保留它
4.  如果否定在列表中不存在，请不要保留它。

在迭代列表时从列表中删除元素通常是一个坏主意，因此最好创建一个新的空列表并继续添加（或不添加）它。

```
def filterNegs(L):
    answer = []
    for i in L:
        if -1*i in L:
            answer.append(i)
    return answer 
```

这是相同的列表理解：

```
return [i for i in a if -1*i in a] 
```

但是，当您这样做时会出现性能问题。检查元素是否在列表中是 O(n) 操作和 O(1) 在集合中。所以，最好先`L`变成一个集合：

```
def filterNegs(L):
    L = set(L)
    answer = []
    for i in L:
        if -1*i in L:
            answer.append(i)
    return answer 
```

这是相同的列表理解：

```
L = set(L)
return [i for i in a if -1*i in a] 
```

希望这可以帮助

# lua - Reading and parsing files with LUA

> ID：12888242
> 
> 赞同：2
> 
> 时间：2012-10-15T01:36:50.047
> 
> 标签：lua

I am trying to get it to read from a file x y z coordinates into a 3d array. But it does not seem to be working.

file is located in same folder as the `.lua` script

```
-9649.481 666.4141 117.3444
-9475.624 563.4871 116.0533
-9338.459 432.295 137.4043 
```

* * *

```
function lines_from(file)
  if not file_exists(file) then return {} end
  for line in io.lines(file) do 
    tokens = {};
    itr = 1;
    for token in string.gmatch(line, "[^%s]+") do
        tokens[ itr ] = token;
        itr = itr + 1;
    end

    x = tokens[1];
    y = tokens[2];
    z = tokens[3];
    g_lines_from[g_lines_fromCount] = { x, y, z };
    g_lines_fromCount = g_lines_fromCount + 1;

  end

end

function AddAll()
    for i = 1, g_lines_from, 1 do
        x, y, z = g_lines_from[i];
        ListBoxEntry.Create( g_lbWaypoints, "X: " .. math.floor( x ) .. ", Y: " .. math.floor( y ) .. ", Z: " .. math.floor( z ) );
    end
end

function OnAddWaypointClicked( eventID, button )
    local file = "mine1-75.txt";
    lines_from(file);
    AddAll();
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:20:56.810

尝试以下功能：

```
function readwaypoints(filename, numberofwaypoints)
  local file = io.open(filename)
  local waypoints = {}
  for n = 1, numberofwaypoints do
    local x, y, z
    x = file:read('*n')
    y = file:read('*n')
    z = file:read('*n')
    waypoints[#waypoints+1] = {['x'] = x, ['y'] = y, ['z'] = z}
  end
  file:close()
  return waypoints
end 
```

它需要一个文件名和文件中的行数。对于您的示例文件，它应该返回如下表：

```
{[1] = {x = -9649.481, y = 666.4141, z = 117.3444},
 [2] = {x = -9475.624, y = 563.4871, z = 116.0533},
 [3] = {x = -9338.459, y = 432.295,  z = 137.4043}} 
```

# objective-c - Draw NSString without using drawAtPoint or drawRectIn

> ID：12888246
> 
> 赞同：1
> 
> 时间：2012-10-15T01:37:30.137
> 
> 标签：objective-c, nsstring, subclass, drawrect

I have subclassed an UILabel and i use drawrect method to draw the string on the screen. This is my code:

```
- (void)drawRect:(CGRect)rect
{
    CGRect   aRect  = self.frame;
    NSMutableArray *Text=[globaltextarray Text];

   [[NSString stringWithCString:[[Text objectAtIndex:labelindexpath.row] cStringUsingEncoding:NSISOLatin1StringEncoding] encoding:NSUTF8StringEncoding]  drawInRect:aRect
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        withFont:[UIFont fontWithName:@"Times New Roman" size:15.0] lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentLeft];
   [super drawRect:rect];     
} 
```

It is working fine but it is slow for my purpose. I need to draw the string without using `[Label setNeedDisplay];` because setNeedsDisplay needs to be called from the main thread. The rendering work needs to be done in a background queue. I would be grateful if you could provide me with a small example. Any help appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:46:30.747

您可以创建一个新的**CGContext以在单独的线程上使用****CGBitmapContextCreateImage**将字符串绘制到 CGImage/UIImage 中，然后将位图（生成的图像）​​绘制到主线程上的视图中。

**编辑：**例如 检查这篇[文章](http://www.cocoanetics.com/2010/07/drawing-on-uiimages/)。

# visual-studio-2010 - cuda error MSB3721 exited with code 2

> ID：12888247
> 
> 赞同：2
> 
> 时间：2012-10-15T01:37:34.507
> 
> 标签：visual-studio-2010, cuda, compiler-errors

I am trying to compile my first CUDA 5.0 project I took the template sample. I have not gotten it to compile it yet and as it shows two errors, I have compared the project settings with those of the template project and they appear to be consistent so I'm stumped. Here are my two errors.

The first occurs when I try to call my kernwl it marks the `'<<<'`

> Error 32 error : expected an expression D:\Virtualbox Data\Assembla\gul\antares software\AntaresVisualizerCuda\AntaresVisualizerCuda\kernel.cu 584

Its possible that thar would be fixed by solving the next error:

> Error 33 error MSB3721: The command ""C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\nvcc.exe" -gencode=arch=compute_10,code=\"sm_10,compute_10\" --use-local-env --cl-version 2010 -ccbin "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin" -I"./" -I"C:\ProgramData\NVIDIA Corporation\CUDA Samples\v5.0\C\common\inc" -I"C:\ProgramData\NVIDIA Corporation\CUDA Samples\v5.0\shared\inc" -I"C:\fltk-1.3.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -G --keep-dir "Debug" -maxrregcount=0 --machine 32 --compile -g -DWIN32 -DWIN32 -DWIN32 -D_DEBUG -D_WINDOWS -D_MBCS -D_MBCS -Xcompiler "/EHsc /W3 /nologo /Od /Zi /RTC1 /MTd " -o "Win32/Debug/kernel.cu.obj" "D:\Virtualbox Data\Assembla\gul\antares software\AntaresVisualizerCuda\AntaresVisualizerCuda\kernel.cu"" exited with code 2\. C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 5.0.targets 498

Any ideas on this one?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:40:51.353

您在评论中的内核调用如下所示：

```
tracePixel<<< gridP, threads >>>(d_screenOrigin, u_unit, d_u_dir, v_unit, d_v_dir, d_cam_pos, d_minpoint, d_maxpoint, gridLength, min, scale, d_grid, d_buffer,); 
```

如果这确实是您所拥有的而不是拼写错误，那么就会有一个额外的“，”之后`d_buffer`不应该存在。要么，要么你错过了一个论点。

# asp.net-mvc - Submit a List from View to Controller

> ID：12888248
> 
> 赞同：2
> 
> 时间：2012-10-15T01:37:36.800
> 
> 标签：asp.net-mvc

can anyone please show me the code for posting a list on button click from view to controller in mvc3-asp. i have a list in which one of the list element is check box.at first i have to select some of the values from list then submit it to save the selected values only.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T02:00:43.047

你的问题有两个广泛的回答。所以我会给你一个通用的例子，你需要根据你的场景进行定制。

假设你的观点是给用户分配一些任务。可以为每个用户分配一个或多个任务。

所以我将创建一个这样的视图模型。

```
public class UserViewModel 
{
  public int UserId { set;get;}
  public string Name { set;get;}
  public List<Task> Tasks { set;get;}
  public UserViewModel()
  {
     Tasks=new List<UserTask>();
  }      
}
public class UserTask
{
  public int ID { set;get;}
  public string Name { set;get;}      
  public bool IsSelected { set;get;}
} 
```

现在在您的`GET`操作中，您创建一个 UserViewModel 对象并将 Tasks 属性设置为可用任务列表（可能来自您的数据库）

```
public ActionResult Add()
{
  var vm=new UserViewModel();
  vm.Tasks=GetAvailableTasks();
  return View(vm);
} 
```

假设`GetAvailableTasks`是一个返回`UserTask`对象列表的方法。

现在创建一个编辑器模板。转到您的`~/Views/YourControllerName`文件夹并创建一个名为`EditorTemplates`. 将新视图添加到新创建的文件夹中，并将名称命名为`Task.cshtml`. 将以下代码添加到其中

```
@model YourNameSpace.UserTask
<p>
   @Html.CheckBoxFor(x => x.IsSelected)  Model.Name
   @Html.HiddenFor(x => x.ID)
</p> 
```

现在回到你的主视图并使用`EditorFor`辅助方法来带来 EditorTemplate。

```
@model YourNamespace.UserViewModel
<h2>Quiz 24</h2>
@using (Html.BeginForm())
{
    @Html.EditorFor(x=>x.Tasks)
    <input type="submit" />
} 
```

现在，当表单被提交时，您可以像这样获取选中的复选框值

```
[HttpPost]
public ActionResult Save(UserViewModel model)
{
   List<int> taskIds=new List<int>();
   foreach (var task in model.Tasks)
   {
     if (task.IsSelected)
     {
       //you can get the selected task id's here. 
       taskIds.Add(task.ID);    
     }
   } 
   //to do : save and redirect (PRG pattern)
} 
```

[这](http://www.techiesweb.net/radio-button-list-in-asp-net-mvc)是一篇博客文章，解释了如何使用 EditorTemplates 处理表单提交时的集合。该帖子显示了处理单选按钮的示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-03T22:54:55.173

您实际上可以跳过控制器中的所有这些重建。Razor 可以使用单个表单重建任何对象的列表。您只需要回退到旧的`for`并分配一个唯一的名称，并包括该集合的主键。

在回发剃须刀将使用修改后的列表重建您`ViewModel`，而无需任何额外的工作。

![在此处输入图像描述](../Images/4d239738ca4141563ef9ec7ce18e5f91.png)

在标记中它看起来像这样

![在此处输入图像描述](../Images/c3178d3995037d8c46652e7973d4923f.png)

并且在回发后的控制器中，使用用户输入的新数据重建模型，并且还惰性绑定到 ForeignKey 模型！

![在此处输入图像描述](../Images/46896f61e6be22d6e493e36af3c3047e.png)

使用复选框或无线电输入略有不同。问题是当一个复选框没有被勾选时，浏览器不会提交它，模型也不会重建。这不是 VS 的不足，而是仍然存在于 HTML5 中的 HTML1 的预期实现！

如果发生这种情况，将发生索引超出范围。因此，您在输入框之前包含了一个值为 false 的复选框的隐藏字段（如果用户选中它，它会将 false 覆盖为 true）

但是，如果您使用的是 StronglyTyped 模型，例如在我的情况下，任何评估为 null 的复选框都会自动设置为 false，这称为 C# 规范中定义的布尔值的默认值。

# r - geom_text labels on a faceted dodged barplot

> ID：12888254
> 
> 赞同：0
> 
> 时间：2012-10-15T01:38:16.410
> 
> 标签：r, ggplot2

I have used ggplot2 to create the image below. I want to explore viewing the data by themes (foreign, economic, etc) as individual facets of facet_wrap. I can restructure everything I want except I can no longer put the labels (73(1.02%), 67(.93%), etc) back on the bars. How can I plot the labels?

![enter image description here](../Images/36418c714b195b4885887b17a2dbe70e.png)

Here's my code:

```
dat3 <- structure(list(grouping.var = structure(c(1L, 3L, 1L, 3L, 1L, 
    3L, 1L, 3L, 1L, 3L, 1L, 3L, 1L, 3L, 1L, 3L), class = "factor", .Label = c("BIDEN", 
    "RADDATZ", "RYAN")), word.count = c(7240, 7153, 7240, 7153, 7240, 
    7153, 7240, 7153, 7240, 7153, 7240, 7153, 7240, 7153, 7240, 7153
    ), variable = structure(c(4L, 4L, 2L, 2L, 1L, 1L, 5L, 5L, 3L, 
    3L, 7L, 7L, 6L, 6L, 8L, 8L), .Label = c("foreign", "economic", 
    "rebublican_people", "health", "democratic_people", "romney", 
    "obama_any_name", "obama_by_name"), class = "factor"), value = c(29, 
    36, 27, 47, 67, 73, 13, 28, 45, 24, 13, 20, 26, 21, 1, 14), labs = c("29(.0040)", 
    "36(.0050)", "27(.0037)", "47(.0066)", "67(.0093)", "73(.0102)", 
    "13(.0018)", "28(.0039)", "45(.0062)", "24(.0034)", "13(.0018)", 
    "20(.0028)", "26(.0036)", "21(.0029)", "1(.0001)", "14(.0020)"
    ), loc = c(22.5, 29.5, 20.5, 40.5, 60.5, 65.75, 6.5, 21.5, 38.5, 
    17.5, 6.5, 13.5, 19.5, 14.5, 7, 7.5), cols = c("black", "white", 
    "white", "white", "white", "white", "white", "white", "white", 
    "white", "white", "white", "white", "white", "white", "white"
    )), .Names = c("grouping.var", "word.count", "variable", "value", 
    "labs", "loc", "cols"), row.names = c(NA, -16L), class = "data.frame")

ggplot(dat3, aes(x=variable,  y=value, fill=grouping.var)) + 
    geom_bar(position="dodge", stat="identity")  +
    coord_flip() + theme_bw() + 
    theme(legend.position="top", legend.background = element_rect(color="white"),
        panel.grid.major=element_blank(),panel.grid.minor=element_blank(),
        legend.title=element_blank(), axis.ticks.y = element_blank(), 
        axis.text.y = element_blank()) +
    ylab("") +  xlab("") + facet_wrap(~variable, ncol=2, scales = "free_x") +
    scale_fill_manual(values=c("#0000FF", "#FF0000"),
        guide = guide_legend(reverse=TRUE))
    geom_text(aes(label = labs,  y = loc, x = variable),
              size = 5, position = position_dodge(width=0.9), color=dat3$cols) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:59:51.797

我摆脱了`color=dat3$cols`它，它似乎工作

```
ggplot(dat3, aes(x=variable,  y=value, fill=grouping.var)) + 
  geom_bar(position="dodge", stat="identity")  +
  coord_flip() + theme_bw() + 
  theme(legend.position="top", legend.background = element_rect(color="white"),
        panel.grid.major=element_blank(),panel.grid.minor=element_blank(),
        legend.title=element_blank(), axis.ticks.y = element_blank(), 
        axis.text.y = element_blank()) +
          ylab("") +  xlab("") + facet_wrap(~variable, ncol=2, scales = "free_x") +
          scale_fill_manual(values=c("#0000FF", "#FF0000"),
                            guide = guide_legend(reverse=TRUE))+
geom_text(aes(label = labs,  y = loc, x = variable),
          size = 5, position = position_dodge(width=0.9)) 
```

![在此处输入图像描述](../Images/b48620ec0d7e4478a43029c47842fca6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T06:24:14.947

我遇到了类似的问题，并不是真正的错误。但没有很好的记录

就像你的黑客

“我摆脱了`color=dat3$cols`它，它似乎工作”

解决方案是详细指定任何可以解释 aes(color=foo) 的颜色值

就我而言，我在 ggplot() 和 geom_text() 中有两次调用 aes()

1)`ggplot(dat_foo, aes(x=xfoo_i, y=yfoo, colour=colourfoo, group=groupfoo))`

2)`geom_text(data = label_data,aes(x = xfoo, y = yfoo, label=label_foo,colour=NULL)`

# java - How do you open GWT Designer and what types of files do you open it on?

> ID：12888256
> 
> 赞同：0
> 
> 时间：2012-10-15T01:38:54.710
> 
> 标签：java, eclipse, gwt, gwt-designer

I have been pouring over [the GWT Designer Quick Start](https://developers.google.com/web-toolkit/tools/gwtdesigner/quick_start) documentation and for the life of me I can't find where it tells you how to actually open the designer inside Eclipse.

I have used Eclipse to create an `EntryPoint` subclass but can't seem to figure out how to open it in the GWT Designer. Is this the wrong type of file to open inside the designer? Either way, specific instructions as to how to do this are greatly appreciated! Thanks in advance!

**Edit** - this is a GWT/GAE application, so I have to create a new Web Application Project (that handles both GWT and GAE dependencies, resources & file structure) and then open the GWT Designer from a file inside that project. So for instance the Create New (Web Application) Project wizard created a GWT- and GAE-compliant project with an `EntryPoint` subclass called `MyFirstGWTApp`. **I'd like to open this in GWT Designer somehow.**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:34:27.077

它应该用于单独的独立 gui 类（不是入口点）。尝试创建一个继承自水平面板的单个类（.java），具有默认构造函数（无参数）。右键单击-> gwt 设计器打开它。这应该会为您打开设计器。现在在其中拖动一些项目并查看结果。如果这不起作用，那么您可能安装了错误的插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:24:43.203

使用日食时：

1.  打开日食
2.  转到帮助->安装新软件
3.  输入您的 Eclipse 版本的站点，即[http://dl.google.com/eclipse/plugin/3.7](http://dl.google.com/eclipse/plugin/3.7)版本 3.7
4.  选择SDK
5.  以相同的方式从该位置[http://dl.google.com/eclipse/inst/d2gwt/latest/3.7](http://dl.google.com/eclipse/inst/d2gwt/latest/3.7)安装 Designer
6.  新建一个 Gwt 项目
7.  通过右键单击继承复合类的类文件，您将能够使用 Gwt Designer 打开它（打开方式--> Gwt Designer）
8.  如果您仍然看到代码，那么在代码文件的左下方，您将看到打开设计器的选项。

# c# - 访问路径被拒绝c#

> ID：12888257
> 
> 赞同：-2
> 
> 时间：2012-10-15T01:38:57.243
> 
> 标签：c#

我已经在这里搜索了一些关于访问路径被拒绝的主题，但这与我的问题不同。

我在 vs studio 中为 wp7 制作了一个音乐播放器应用程序。如果我调试它或将它部署在我的计算机中，音乐播放器工作正常。

我使用 nero 将音乐播放器刻录到 cd，因为我要将它传递给我的教授，但是在调试或部署它时，它显示错误。

这是错误。

![在此处输入图像描述](../Images/801ccdf0bd06411d57524c4a2d869857.png)

我怎样才能正确地将我的应用程序刻录到 cd？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:53:17.387

你是通过CD调试的吗？您只能通过可写 CD 进行调试，因为 Visual Studio 需要将内容写入目录中的文件`obj`。这意味着如果它是只读 CD，那么您将无法通过 CD 进行调试。

谢谢，

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T02:17:04.967

实际上你不能那样做。基本上，Windows Phone 需要一个模拟器才能在您的计算机上运行。Visual Studio 将可执行文件部署到在您的 PC 上运行的[模拟器。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402563%28v=vs.92%29.aspx)

但是为什么你需要发送你的代码呢？音乐播放器旨在在实际设备上运行，不是吗？要将其部署到实际设备，您需要将其打包并上传到 Windows 商店，或者如果您的设备支持侧载，您可以从创建的包中手动加载它。

除此之外，如果您希望整个源代码在您的 PC 上运行，建议将源代码复制到硬盘中并从那里运行。请确保在复制文件夹后，右键单击它并关闭整个文件夹层次结构中的只读属性。

我希望这能帮到您。

# c++ - 同步共享内存

> ID：12888261
> 
> 赞同：0
> 
> 时间：2012-10-15T01:40:00.660
> 
> 标签：c++

我在 Windows 上的两个进程之间成功共享内存通信。我这样写： ![在此处输入图像描述](../Images/acdddb3e63cb9ecc2e47414d34f2d1d0.png)

不要介意我对自己的评论。我想我会对图表有一些乐趣。我怎样才能更快地做到这一点？换句话说，我如何使用 Mutex 或 CreateEvent 来做到这一点？我努力理解 Mutexes 和 CreateEvent，但它在 MSDN 上让我感到困惑，因为它在应用程序和线程上使用。一个例子会很有帮助，但不是必需的。

我目前的做法是（非常慢！）：

//使用 Filename + KnownProcessID 创建 SharedMemory，这样我就可以拥有多个具有唯一映射的客户端和服务器。我已经有这个工作和沟通成功。

```
bool SharedMemoryBusy()
{
    double* Data = static_cast<double*>(pData);   //Pointer to the mapped memory.
    return static_cast<int>(Data[1]) > 0 ? true : false;
}

void* RequestSharedMemory()
{
    for (int Success = 0; Success < 50; ++Success)
    {
        if (SharedMemoryBusy())
            Sleep(10);
        else
            break;
    }
    return pData;
}

bool SharedMemoryReturned()
{
    double* Data = static_cast<double*>(pData);
    return static_cast<int>(Data[1]) == 2 ? true : false;
}

bool SharedDataFetched()
{
    for (int Success = 0; Success < 50; ++Success)
    {
        if (SharedMemoryReturned())
            return true;

        if (!SharedMemoryBusy())
            return false;

        Sleep(10);
    }
    return false;
} 
```

读写部分（只是一个应要求的例子..可以有许多不同的类型..模型、点、位置等）：

```
void* GLHGetModels()
{
    double* Data = static_cast<double*>(RequestSharedMemory());
    Data[0] = MODELS;
    Data[1] = StatusSent;

    if (SharedDataFetched())
    {
        if (static_cast<int>(Data[2]) != 0)
        {
            unsigned char* SerializedData  = reinterpret_cast<unsigned char*>(&Data[3]);
            MemDeSerialize(ListOfModels, SerializedData, static_cast<int>(Data[2]));
            return Models.data();
        }
        return NULL;
    }
    return NULL;
}

void WriteModels()
{
    If (pData[0] == MODELS)
    {
        //Write The Request..
        Data[1] = StatusReturned;
        Data[2] = ListOfModels.size();
        unsigned char* Destination = reinterpret_cast<unsigned char*>(&Data[3]);
        MemSerialize(Destination, ListOfModels); //Uses MEMCOPY To copy to Destination.
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:21:04.833

您可以在进程之间使用事件和互斥锁。这工作正常。您只需要在将对象传递给其他进程之前复制对象的句柄：

```
BOOL WINAPI DuplicateHandle(
  _In_   HANDLE hSourceProcessHandle,
  _In_   HANDLE hSourceHandle,
  _In_   HANDLE hTargetProcessHandle,
  _Out_  LPHANDLE lpTargetHandle,
  _In_   DWORD dwDesiredAccess,
  _In_   BOOL bInheritHandle,
  _In_   DWORD dwOptions
); 
```

每个进程都使用自己的句柄，而它们都引用同一个内核对象。

您需要做的是创建 2 个事件。第一方将发出数据准备就绪的信号。对方应该获取数据，放置自己的数据，重置第一个事件并通知第二个事件。之后，第一方也在做同样的事情。

事件函数是：`CreateEvent`, `SetEvent`, ... `CloseHandle`。

# templates - 在 D 中映射可变参数模板参数

> ID：12888263
> 
> 赞同：7
> 
> 时间：2012-10-15T01:40:07.227
> 
> 标签：templates, metaprogramming, d, variadic-templates

是否有任何内置或库提供的方法来映射 D 中的一组可变参数模板参数？

例如：

```
void foo(Args...)(Args args)
{
    bar(fun(args));
} 
```

我希望将其扩展到：

```
void foo(Args...)(Args args)
{
    bar(fun(args[0]), fun(args[1]), fun(args[2]), /* ... */);
} 
```

C++11 可变参数模板支持这一点。你如何在 D 中做同样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T03:55:33.270

这是与最新版本的 D 编译器一起编译的更新版本：

```
/**
    Return a Tuple expression of $(D Func) being
    applied to every tuple argument.
*/
template Map(alias Func, args...)
{
    static auto ref ArgCall(alias Func, alias arg)() { return Func(arg); }

    static if (args.length > 1)
        alias Map = TypeTuple!(ArgCall!(Func, args[0]), Map!(Func, args[1 .. $]));
    else
        alias Map = ArgCall!(Func, args[0]);
}

///
unittest
{
    import std.conv;

    int square(int arg)
    {
        return arg * arg;
    }

    int refSquare(ref int arg)
    {
        arg *= arg;
        return arg;
    }

    ref int refRetSquare(ref int arg)
    {
        arg *= arg;
        return arg;
    }

    void test(int a, int b)
    {
        assert(a == 4, a.text);
        assert(b == 16, b.text);
    }

    void testRef(ref int a, ref int b)
    {
        assert(a++ == 16, a.text);
        assert(b++ == 256, b.text);
    }

    int a = 2;
    int b = 4;

    test(Map!(square, a, b));

    test(Map!(refSquare, a, b));
    assert(a == 4);
    assert(b == 16);

    testRef(Map!(refRetSquare, a, b));
    assert(a == 17);
    assert(b == 257);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T02:05:48.497

这是我想出的最好的：

```
auto staticMappedCall(alias call, alias F, T...)(T t)
{
    T a;
    foreach(i, arg; t)
            a[i] = F(arg);
    return call(a);
} 
```

你像这样使用它：

```
 staticMappedCall!(bar,t)(1, 2); 
```

其中 bar 是要调用的函数， t 是转换。

```
void bar(int a, int b) { writeln(a, " ", b); }
int t(int a) { return a*2; }

staticMappedCall!(bar, t)(1, 2);

> test
2 4 
```

# java - 在 Java 中旋转期间跟踪图像上特定点的 x 和 y 位置

> ID：12888264
> 
> 赞同：1
> 
> 时间：2012-10-15T01:40:17.937
> 
> 标签：java, matrix, rotation

我正在尝试为 2D 游戏创建绳索物理，因此作为起点，我有一个小的旋转图像，我需要在其末端添加另一条绳索。不幸的是，当旋转发生在图像的顶部时，我在尝试跟踪图像的底部时遇到了麻烦。我已经设法使用以下代码跟踪图像的 (0,0) 坐标，但我需要能够跟踪点 (32,57)。这是我到目前为止所拥有的：

```
xr = xm + (xPos - xm) * Math.cos(a) - (yPos - ym) * Math.sin(a);
yr = ym + (xPos - xm) * Math.sin(a) + (yPos - ym) * Math.cos(a); 
```

任何帮助表示赞赏！

编辑：

所以嘿，我得到了它的工作=D使用极坐标结果比我以前做的任何事情都容易得多。

前 2 个变量是不变的并且保持不变：

```
 theta0 = Math.atan2(y, x);
    r = 25;

    theta = theta0 + a;
    xr = (r * Math.cos(theta)) + xm;
    yr = (r * Math.sin(theta)) + ym; 
```

xm 和 ym 是我图像的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:57:46.930

使用极坐标。将您的原点设置在图像的旋转点，然后选择您最喜欢的角度参考（比如 0 度直接在右侧，正向旋转从那里逆时针方向旋转）。

计算所需点 (32, 57) 相对于该坐标系的极坐标。说答案是`(r, theta)`。

现在，当您旋转图像时，唯一发生变化的是`theta`. 现在您可以使用新值返回 xy 坐标`theta`。

希望这可以帮助。

# sql - SQL为树状结构定义表

> ID：12888267
> 
> 赞同：1
> 
> 时间：2012-10-15T01:40:31.923
> 
> 标签：sql

在以前版本的 Visual Studio 中，有一种方法可以使用图表构建 DB。

2012 年，他们排除了这种可能性。

我需要创建为类别树创建表的脚本。

```
 CREATE TABLE [dbo].[Categories]
(
    [Id] INT NOT NULL PRIMARY KEY IDENTITY, 
    [Name] NVARCHAR(50) NOT NULL, 
    [ParentId] INT NOT NULL DEFAULT 0, 
    [FK_Parent] int FOREIGN KEY ([ParentId]) REFERENCES [Categories]([Id]) NOT NULL
) 
```

如果我这样创建表，我无法添加顶级记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:44:43.057

将顶级记录定义为具有`NULL` `FK_Parent`. 只需更改您的定义以允许空值。

```
CREATE TABLE [dbo].[Categories]
(
    [Id] INT NOT NULL PRIMARY KEY IDENTITY, 
    [Name] NVARCHAR(50) NOT NULL, 
    [ParentId] INT NOT NULL ,
    ---llow NULL FK_Parent for top-level
    CONSTRAINT [FK_Parent] FOREIGN KEY ([ParentId]) REFERENCES [Categories]([Id])
) 
```

# c# - C#中的多媒体定时器中断（前两个中断是坏的）

> ID：12888269
> 
> 赞同：2
> 
> 时间：2012-10-15T01:41:12.833
> 
> 标签：c#, timer

我正在使用分辨率为 1 毫秒、周期为 10 毫秒的多媒体计时器。问题是多媒体计时器严重中断前两个事件，因为我得到了 1 ms 的差异，这不是我想要的。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        this.mmtimer.Tick += new System.EventHandler(this.mmtimer_Tick); 
    }

    Multimedia.Timer mmtimer = new Multimedia.Timer();
    private void Form1_Load(object sender, EventArgs e)
    {
        mmtimer.Resolution = 1;
        mmtimer.Mode = Multimedia.TimerMode.Periodic;
        mmtimer.Period = 10;
        mmtimer.SynchronizingObject = this;
    }

    private void S_Click(object sender, EventArgs e)            
    {
        TD.Items.Clear();
        MT.Items.Clear();
        delta_MT.Items.Clear();
        double T = DateTime.Now.Hour * 60 * 60 * 1000 + DateTime.Now.Minute * 60 * 1000 + DateTime.Now.Second * 1000 + DateTime.Now.Millisecond;
        Point C = Cursor.Position;
        TD.Items.Add(C.ToString());
        MT.Items.Add(T.ToString());         

        try
        {                              
            mmtimer.Start();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK,
                MessageBoxIcon.Stop);
        }            
    }

    private void Stop_Click(object sender, EventArgs e)
    {            
        mmtimer.Stop();

        double T = DateTime.Now.Hour * 60 * 60 * 1000 + DateTime.Now.Minute * 60 * 1000 + DateTime.Now.Second * 1000 + DateTime.Now.Millisecond;
        Point C = Cursor.Position;

        TD.Items.Add(C.ToString());
        MT.Items.Add(T.ToString());
        M();
    }

    private void mmtimer_Tick(object sender, System.EventArgs e)
    {
        double T = DateTime.Now.Hour * 60 * 60 * 1000 + DateTime.Now.Minute * 60 * 1000 + DateTime.Now.Second * 1000 + DateTime.Now.Millisecond;
        Point C = Cursor.Position;

        TD.Items.Add(C.ToString());

        MT.Items.Add(T.ToString());

    }
    void M()
    {
        for (int i = 0; i < MT.Items.Count - 1; i++)
        {
            double A1 = Convert.ToDouble(MT.Items[i + 1]);
            double A2 = Convert.ToDouble(MT.Items[i]);
            double d = A1 - A2; 
            delta_MT.Items.Add(d);
        }
    }
} 
```

你能告诉我如何解决前两个中断吗？如果有可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:14:36.423

在您将分辨率更改为 之前，当多媒体计时器以`standard`分辨率运行时`1`，计时器将首先完成其当前周期。新周期仅在下一次中断后生效。设置多媒体定时是一项同步工作。因此，它可能会延迟多达 20 毫秒（某些系统上的中断周期）。如果您想确保您的时序方案从您的主代码开始工作，您应该在主代码之前调用多媒体时间配置 2 个中断周期。我会用 50 毫秒，你应该没问题。

您观察到的第一个中断的延迟取决于您对系统中断的调用时间。

# msbuild - 独立于平台的 .proj 文件

> ID：12888270
> 
> 赞同：1
> 
> 时间：2012-10-15T01:41:16.970
> 
> 标签：msbuild, mono, xbuild, path-separator

我想将我的 .proj 文件用于 msbuild 和 xbuild。目前我有类似的路径

```
$(ProjectDir)\..\..\ 
```

如何重新编写这些路径，以便我可以在 proj 文件上调用 xbuild 而无需修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:26:45.740

xbuild is smart enough to handle the directory separators for you, so please stick to MSBuild style. You just need to pay attention to others.

Grab a Linux box and try it out.

# ruby-on-rails - validates_related 的 Rails 用例

> ID：12888273
> 
> 赞同：3
> 
> 时间：2012-10-15T01:41:35.350
> 
> 标签：ruby-on-rails, validation, has-many

我一直在阅读有关 rails 验证的信息，该`validates_associated`方法验证所有子记录（不仅仅是新记录），而`has_many`关联的默认验证仅保存新的子记录。

从概念上讲，我理解这一点，但我试图提出一个为什么子值无效的用例。例如，如果 a `Movie` `has_many` `Ratings`，我为什么要编辑评级而不验证它？

有人可以提供一个实际的例子来说明哪里`validates_associated`是必要的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T05:09:39.130

让我们以与您提供的电影 has_many Ratings 相同的示例为例。如果您要与评分一起保存电影，并且评分有验证错误，则不应保存该电影。使用 validates_related 将有助于这一点 - 只有当它的孩子有效时，电影才会被保存。希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-25T01:02:53.963

考虑`Rating`有一个名为的字段`score`，它必须是`>= 0`and `<= 5`。
在`rails console`：

```
>> m = Movie.first
=> #<Movie id: 1, name: "Lord of the Rings">

>> r = m.ratings.first
=> #<Rating id: 1, score: 5>

>> m.valid?
=> true

>> r.valid?
=> true

>> r.score = -1
=> -1

>> r.valid?
=> false 
```

如果你不使用`validates_associated`：

```
>> m.valid?
=> true 
```

如果您使用`validates_associated`：

```
>> m.valid?
=> false

>> m.errors.messages
=> {:ratings => ["is invalid"]} 
```

但是如果你不使用`validates_associated`，当你运行时`m.save`，只会更新电影记录，而不会更新相关的收视率。因此，如果您不使用`validates_associated`.

# google-maps - qwebkit 谷歌地图

> ID：12888274
> 
> 赞同：1
> 
> 时间：2012-10-15T01:41:45.037
> 
> 标签：google-maps, qwebkit

我确实启动了一个新的应用程序，使用 QT 我希望集成 google map 3.xx，因为 2 已被弃用......我已经阅读了很多关于该主题的内容但我仍然遇到我的 qwebview 不会滚动到缩放和鼠标拖动的问题不会平移。

我已经尝试了 chrome\1.0 技巧，我发现了一个可以工作但看起来像它使用 V2 的 api 的应用程序。

花哨的浏览器正在谷歌地图上工作，但不在 V3 api 示例上。谷歌地图还在V2上吗？

这是我加载的html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>Google Maps</title>

    <style type="text/css">
        html { height: 100% }
        body { height: 100%; margin: 0; padding: 0 }
        #map_canvas { height: 100% }
    </style>

    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3.1&key=AIzaSyBYP5yP4W0i0fL6MKVRSA3J8-jUs2p2jfE&sensor=false"></script>
    <script type="text/javascript">
        function load() { 
            naviOptions = {
                position: google.maps.ControlPosition.TOP_LEFT,
                style: google.maps.NavigationControlStyle.ZOOM_PAN
            }

            var mapOptions = {
                center: new google.maps.LatLng(-34.397, 150.644),
                zoom: 8,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                keyboardShortcuts: true,
                mapTypeControl: true,
                navigationControl: true,
                scrollwheel: true,
                disableDoubleClickZoom: false,
                navigationControlOptions: naviOptions
            };

            var map = new google.maps.Map(document.getElementById("map"), mapOptions);

            map.setUIToDefault();

        }
    </script>
  </head>
  <body onload="load()">
    <div id="map" style="width:100%; height:100%""></div>
  </body>
</html> 
```

我唯一还没有尝试过的是在不支持触摸的情况下重新编译 qwebkit。有人让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:39:57.807

[http://qt-project.org/forums/viewthread/19887](http://qt-project.org/forums/viewthread/19887) 将应用程序名称和版本设置为 chrome 1.0 可以在 windows 下工作

# database - 数据要求

> ID：12888277
> 
> 赞同：0
> 
> 时间：2012-10-15T01:42:25.747
> 
> 标签：database

当需要在编程开始之前列出和呈现应用程序的数据字典时。找出数据库所需的数据字段的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:08:47.130

我通过探索各种选项获得的答案是线框和研究系统各种细节的各种数据要求的混合体。例如，为了在地图上显示避难所位置，表格中可能需要不同的字段。线框有助于您查看网站的功能，并结合使用案例，可以获得他们可能需要的大部分数据需求。

# ios - 选定注解的坐标-iOS

> ID：12888278
> 
> 赞同：1
> 
> 时间：2012-10-15T01:42:27.717
> 
> 标签：ios, annotations, ios6

以下代码返回“未选择注释” CalloutAccessories 委托有助于确定选择了哪个注释。我的代码如下。有任何想法吗）？提前致谢

“删除视图控制器.m”

```
- (IBAction)removePin:(id)sender {
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[[appDelegate viewController] removeAnno];
[self.navigationController popViewControllerAnimated:YES];

} 
```

“视图控制器.m”

```
- (void)mapView:(MKMapView *)mapView 
 annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {

    if ([(UIButton*)control buttonType] == UIButtonTypeDetailDisclosure){
        // Do your thing when the detailDisclosureButton is touched
        RemoveViewController *settingAnnotation = [[RemoveViewController alloc]initWithNibName:@"RemoveViewController" bundle:nil];
        Annotation *annotation1;
        annotation1 = view.annotation;
        settingAnnotation.title = annotation1.title;
        settingAnnotation.subtitle = annotation1.subtitle;
        [self.navigationController pushViewController:settingAnnotation animated:YES];
    } 

}

- (void)removeAnno{

    [mapView removeAnnotations: mapView.selectedAnnotations];
    if (mapView.selectedAnnotations.count == 0)
    {
        NSLog(@"no annotation selected");
    }
    else
    {
        id<MKAnnotation> ann = [mapView.selectedAnnotations objectAtIndex:0];
        CLLocationCoordinate2D coord = ann.coordinate;
        NSLog(@"lat = %f, lon = %f", coord.latitude, coord.longitude);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:22:27.067

问题已解决。[mapView removeAnnotations: mapView.selectedAnnotations] 应该是在条件之后出现的！下面的代码工作正常！

“删除视图控制器.m”

```
- (IBAction)removePin:(id)sender {
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[[appDelegate viewController] removeAnno];
[self.navigationController popViewControllerAnimated:YES];

} 
```

“视图控制器.m”

```
- (void)mapView:(MKMapView *)mapView 
 annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {

    if ([(UIButton*)control buttonType] == UIButtonTypeDetailDisclosure){
        // Do your thing when the detailDisclosureButton is touched
        RemoveViewController *settingAnnotation = [[RemoveViewController alloc]initWithNibName:@"RemoveViewController" bundle:nil];
        Annotation *annotation1;
        annotation1 = view.annotation;
        settingAnnotation.title = annotation1.title;
        settingAnnotation.subtitle = annotation1.subtitle;
        [self.navigationController pushViewController:settingAnnotation animated:YES];
    } 

}

- (void)removeAnno{

    if (mapView.selectedAnnotations.count == 0)
    {
        NSLog(@"no annotation selected");
    }
    else
    {
        id<MKAnnotation> ann = [mapView.selectedAnnotations objectAtIndex:0];
        CLLocationCoordinate2D coord = ann.coordinate;
        NSLog(@"lat = %f, lon = %f", coord.latitude, coord.longitude);
    }
  [mapView removeAnnotations: mapView.selectedAnnotations];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T01:58:57.227

是的，在`selectedAnnotations`数组的索引 0 处获取注释（如果有）并读取其`coordinate`属性：

```
if (mapView.selectedAnnotations.count == 0)
{
    NSLog(@"no annotation selected");
}
else
{
    id<MKAnnotation> ann = [mapView.selectedAnnotations objectAtIndex:0];
    CLLocationCoordinate2D coord = ann.coordinate;
    NSLog(@"lat = %f, lon = %f", coord.latitude, coord.longitude);
} 
```

您可能应该在调用`removeAnnotations`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T02:36:32.917

这将为您提供地址字符串中的坐标，格式为：州、城市、街道、编号。

```
-(CLLocationCoordinate2D) addressLocation:(NSString*) locationSTR {
NSString *addressM = [NSString stringWithString:locationSTR];

NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv", 
                       [addressM stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSURL *urlCont = [NSURL URLWithString:urlString];
NSError* error = nil;
NSString *locationString = [NSString stringWithContentsOfURL:urlCont encoding:NSASCIIStringEncoding error:&error];
NSArray *listItems = [locationString componentsSeparatedByString:@","];

double latitude = 0.0;
double longitude = 0.0;
if([listItems count] >= 4 && [[listItems objectAtIndex:0] isEqualToString:@"200"]) {
    latitude = [[listItems objectAtIndex:2] doubleValue];
    longitude = [[listItems objectAtIndex:3] doubleValue];
}
else {
    //Show error
}
CLLocationCoordinate2D location;
location.latitude = latitude;
location.longitude = longitude;

return location; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T01:59:56.067

尝试

`CLLocationCoordinate2D coord = [[mapView.selectedAnnotations objectAtIndex:0] coordinate]`

假设您正在尝试访问`mapView.selectedAnnotations`.

# php - Yii：根据数据库值在 CGridView 列中显示图像

> ID：12888280
> 
> 赞同：0
> 
> 时间：2012-10-15T01:42:32.430
> 
> 标签：php, yii

如果我的值设置为 Y，我试图显示一个勾选的图像。我关注[了这篇](http://www.yiiframework.com/forum/index.php/topic/26501-how-to-display-image-in-gridview-widget-based-on-db-field-value/)文章，但我得到以下内容作为我的网格列的内容而不是图像：

```
<img src="/webapp/images/tickedS.jpg" alt="" /> 
```

以下是我编写的新方法的模型代码：

```
 public function getSurgeryFlaged(){
    return $this->flag_for_dashboard=='Y' ?  CHtml::image(Yii::app()->baseUrl .'/images/tickedS.jpg') : '';  

} 
```

以下是 CGridView 的列选项：

```
'SurgeryFlag'=>array('name'=>'Flag','value'=>'$data->surgeryFlaged','htmlOptions'=>array('width'=>'50')), 
```

如果我创建一个受控制器保护的方法，而不是模型属性，则结果是相同的。请指导，我做错了什么......？

提前致谢。问候，费萨尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:10:44.923

您应该使用“原始”作为类型。见[CFormatter](http://www.yiiframework.com/doc/api/1.1/CFormatter)

raw：属性值根本不会改变。

```
'SurgeryFlag'=>array(
   'type'=>'raw',
   'name'=>'Flag',
   'value'=>'$data->surgeryFlaged',
   'htmlOptions'=>array('width'=>'50')), 
```

# time - 指令执行时如何显示系统的日期/时间？

> ID：12888286
> 
> 赞同：0
> 
> 时间：2012-10-15T01:44:00.247
> 
> 标签：time, system

假设我有一个任务执行。我想根据系统时钟/时间知道执行完成的时间。Java中有什么东西可以用来提取当前系统时间并用Java显示吗？我不想像使用 Millis 或 Nano 那样测量时间（这只会告诉我多少毫秒，而不是实际时间或日期），而是实际打印完成的时间（如“Finished at 9:42 PM 10/14/ 2012”根据我的实际 Windows 时间）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:49:33.633

快速谷歌搜索发现：[http ://www.mkyong.com/java/java-how-to-get-current-date-time-date-and-calender/](http://www.mkyong.com/java/java-how-to-get-current-date-time-date-and-calender/)

只要确保导入 java.util 和 java.text，就可以了。

# aptana - Aptana Studio 3 可以显示方法/类文档吗？

> ID：12888288
> 
> 赞同：1
> 
> 时间：2012-10-15T01:44:06.667
> 
> 标签：aptana, aptana3

我想知道如果我将鼠标悬停在 Aptana 上是否可以显示方法的文档？这是可能的，还是我被 Eclipse 宠坏了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:18:50.307

我确信它可以在悬停时显示 PHP API 以及您本地创建的有关某些功能的文档。确保您的项目属性设置为 PHP 项目或您想要显示文档的类型。

# svn - 用于检查给定时间戳的文件列表更改的 Subversion 命令

> ID：12888291
> 
> 赞同：0
> 
> 时间：2012-10-15T01:44:37.593
> 
> 标签：svn

我们刚刚从旧的版本控制系统转移到 Subversion，我只是想先在我的 Windows 机器上使用命令行界面来学习它。（我知道有 TortoiseSVN，但我想稍后完成更多... :)）

我只是想知道是否有一个我可以执行的 SVN 命令，它将向我列出在给定特定时间戳的情况下更改/添加/删除的所有文件？

例如，我将监视我的 subversion 存储库中的一个文件夹，并给定一个特定日期，我想列出在该特定存储库中更改/更改/删除/添加/更新的所有文件。

比如说，从昨天开始……我想列出所有这些文件。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:48:54.050

如果我没记错的话是

```
svn diff -r{date}:{date} 
```

更多信息[在这里](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.diff.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T01:49:47.010

是的：你使用带有 -r 开关的**svn log命令：**

```
svn log <URL_TO_YOUR_REPO> -r{YYYY-MM-DD} 
```

来自 SVN 的帮助：

```
 -r [--revision] ARG      : ARG (some commands also take ARG1:ARG2 range)
                              A revision argument can be one of:
                                  NUMBER       revision number
                                 '{' DATE '}' revision at start of the date
                                 'HEAD'       latest in repository
                                 'BASE'       base rev of item's working copy
                                 'COMMITTED'  last commit at or before BASE
                                 'PREV'       revision just before COMMITTED 
```

请记住，它会显示该特定日期*之前的**所有*修订。因此，要查看今天（2012-10-15）的所有内容，您应该写：

 *```
svn log <URL_TO_YOUR_REPO> -r{2012-10-16}:{2012-10-14} 
```*

# screenshot - 他们如何获得这张快照？

> ID：12888297
> 
> 赞同：0
> 
> 时间：2012-10-15T01:45:16.417
> 
> 标签：screenshot, webpage

> **可能重复：**
> [服务器生成的网页截图？](https://stackoverflow.com/questions/119116/server-generated-web-screenshots)

每当我使用 **goo.gl**缩短网址时，我都会看到网址页面的屏幕截图！

这不是通常的屏幕截图 - 没有 UI 元素 - 只有页面本身！

我的问题：他们是怎么做到的？生成此屏幕截图（光栅图像）背后的一般逻辑是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:04:37.973

> @valentinas 没有。我不是在实施之后。我想大致了解它是如何完成的！（而且，不使用画布元素）– DrStrangeLove 6 分钟前

总体思路：您采用浏览器渲染引擎（webkit 非常好，这是其中一种实现： http: [//phantomjs.org/](http://phantomjs.org/)），而不是将结果输出到 UI，而是将其转储到文件中。

# c++ - C++ 中的循环位移问题

> ID：12888298
> 
> 赞同：3
> 
> 时间：2012-10-15T01:45:47.657
> 
> 标签：c++, bit-manipulation

我正在尝试在 C++ 中实现循环位移。它有点工作，除了在某个点之后我得到一堆零。

```
for (int n=0;n<12;n++) {
    unsigned char x=0x0f;
    x=((x<<n)|(x>>(8-n))); //chars are 8 bits
    cout<<hex<<"0x"<<(int)x<<endl;
} 
```

我的输出是：

```
0xf
0x1e
0x3c
0x78
0xf0
0xe1
0xc3
0x87
0xf
0x0
0x0
0x0 
```

如您所见，我开始得到 0x0，而不是预期的 0x1e、0x3c 等。

如果我扩展 for 循环以迭代 60 次左右，数字会正确返回（在一堆零之后。）

我假设一个 char 包含一个很大的空间，并且未使用数据的“间隙”为零。我的理解有点有限，所以任何建议都将不胜感激。有没有办法扔掉那些零？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T01:49:11.233

移动负数是未定义的行为。

`0`你从到循环`12`，但你有一个`8 - n`轮班。所以会变成负数。

如果要处理`n > 8`，则需要将模数乘以 8。（假设您想要 8 位循环移位。）

* * *

```
for (int n=0; n < 12; n++) {
    unsigned char x = 0x0f;
    int shift = n % 8;   //  Wrap modulus
    x = ((x << shift) | (x >> (8 - shift))); //chars are 8 bits
    cout << hex << "0x" << (int)x << endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T01:52:46.407

将一个字节左移超过 7 将始终导致 0。此外，未定义移位负数。

为了解决这个问题，您必须将转换限制为类型的大小。

基本上：

```
unsigned char x = 0xf;
int shift = n&7;
x=((x<<shift)|(x>>(8-shift))) 
```

# java - 异常：com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException：列“dog_id”不能为空

> ID：12888301
> 
> 赞同：0
> 
> 时间：2012-10-15T01:47:00.590
> 
> 标签：java, mysql, hibernate, jaxbelement

我有两个具有父子关系的实体。狗显然是父母，小狗是孩子。我如何坚持 Dog-and-puppies 没有错误？

```
@XmlRootElement(name = "dog")
@Entity
@Table(name = "dog", catalog = "zoo")
public class Dog{
   @Id
   @GeneratedValue(strategy = GenerationType.IDENTITY)
   private Integer id;

   @Column(name = "dogname")
   private String dogName;

   @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "Dog")
   private Set<Puppy> puppies;

   ...// getters and setters

   @XmlElementWrapper(name = "puppies")
   @XmlElement(name = "puppy")
   public Set<Puppy> getPuppy() {
      return this.puppies;
   }
}

@Entity
@Table(name = "puppy", catalog = "zoo")
public class Puppy{
   @Id
   @GeneratedValue(strategy = GenerationType.IDENTITY)
   private Integer id;

   @Column(name = "puppyname")
   private String puppyName;

   @ManyToOne(fetch = FetchType.LAZY)
   @JoinColumn(name = "dog_id", nullable = false)
   private Dog dog;

       ...// getters and setters
} 
```

基本上，用户将 Dog（带有小狗）作为 jaxbElement 传入。

```
@POST
@Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
public Response createDog(JAXBElement<Dog> jaxbDog) {
    Dog dog = jaxbDog.getValue();
   dogDao.save(dog);
    return Response.status(Response.Status.OK).build();
} 
```

我的问题是，如何让小狗看到母狗的 dog_id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T02:05:33.833

`Dog`在实体类中添加一个方法：

```
 public void addPuppy(Puppy puppy){
           if (this.puppies == null){
               this.puppies = new HashSet<Puppy>();
           }
           puppy.setDog(this); // <--This will set dog as parent in puppy class
           this.puppies.add(puppy);
    } 
```

添加`Cascade`as`ALL`中的`puppies`映射`Dog`。

当你想用 保存`dog`时`puppy/puppies`，你可以这样写：

```
 Dog dog = ....getDog object/create new dog object
       Puppy puppy = new Puppy();
       // set puppy attributes.
       dog.addPuppy(puppy);
       //call save method for dog
       dogDao.save(dog); 
```

# r - facet_wrap 按列填充

> ID：12888302
> 
> 赞同：14
> 
> 时间：2012-10-15T01:47:20.270
> 
> 标签：r, ggplot2

据我所知`facet_wrap`，按行填充。以同样的方式，您可以指定如何`matrix`使用`byrow`我希望您可以对 facet_wrap 执行相同的操作。我知道我可以重新排序一个因素的水平以用这种方式绘制，但如果有一个我忽略的更短的方法，这似乎有点工作。

```
library(ggplot2)

ggplot(mtcars, aes(x=gear,  y=mpg, fill=vs)) +
    geom_bar(position="dodge", stat="identity") + 
    facet_wrap(~ carb, ncol=2)  #fills by row 
```

我们如何按列填写？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-09-08T21:35:50.030

该功能在 github 上的 ggplot2 当前开发版本中实现。[这个提交](https://github.com/hadley/ggplot2/commit/7e36e4f5927982d4a459717f98133f689f59e5d0)实现了一个新的参数`dir`，`facet_wrap`所以你只需做

```
## "v" for vertical or "h" for horizontal (the default)    
ggplot(...) + facet_wrap(~ carb, ncol=2, dir="v") 
```

请注意，此功能目前在 CRAN 版本中不可用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T09:58:24.137

可以通过将分面变量转换为因子然后重新调整它来完成。在`relevel.byrow`我用于`matrix(..., byrow=T)`级别排序的函数中，然后使用函数将此矩阵转换为向量`c()`，然后重新调整因子。

```
#number of columns
nc <- 2
level.byrow <- function(vec, nc){
  fac <- factor(vec) #if it is not a factor
  mlev <- matrix(levels(fac), nrow=nc, byrow=T)
  factor(fac, levels= c(mlev))
}

library(plyr)
ggplot(transform(mtcars, rcarb=level.byrow(carb, nc)), aes(x=gear,  y=mpg, fill=vs)) +
  geom_bar(position="dodge", stat="identity") + 
  facet_wrap(~ rcarb, ncol=nc) 
```

我`plyr`为了方便起见，你可以简单地写

```
mtcars$rcarb <- level.byrow(mtcars$carb, nc) 
```

当我们没有完整的构面结构时，这也有效，但会给出一些警告。

```
mtcars2 <- subset(mtcars, carb!=3)
ggplot(transform(mtcars2, rcarb=level.byrow(carb, nc)), aes(x=gear,  y=mpg, fill=vs)) +
  geom_bar(position="dodge", stat="identity") + 
  facet_wrap(~ rcarb, ncol=nc) 
```

`carb==3`排除的结果：

![在此处输入图像描述](../Images/21c5185d18b126feaf9e3277312bd354.png)

# php - 使用 PHP 将 HTML/CSS 转换为 PDF 时出错

> ID：12888303
> 
> 赞同：0
> 
> 时间：2012-10-15T01:47:35.970
> 
> 标签：php, pdf-generation, barcode

我在我的网络应用程序的 div 中使用 jquery 构建条形码。黑条构造为一组 div 标签，其背景为黑色或白色，如下所示，

```
<div style='padding: 0px; overflow: auto; width: 194px;' id='bar1'>
  <div style='float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 60px'>
  <div style='float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;'> 
```

我已经尝试了多个 PHP 包（htmp2pdf、dompdf、tcpdf）来将其转换为 PDF，但是当它在内容中看到嵌套的 div 时会出现空白 PDF 或错误。谁能告诉我如何将这些生成的条形码转换为 PDF 起诉 PHP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:10:54.853

如果您使用 <img> 数据而不是使用 <div> 矩形绘制条形，会有所帮助吗？不确定您是否需要 Code 128 或其他符号系统，但在[http://notionovus.com/blog/code-128-barcode/](http://notionovus.com/blog/code-128-barcode/)上有一套完整的内联 (base64) Code 128 图像。

我最初尝试通过绘制矩形来生成条形码，但发现让浏览器进行缩放为我节省了很多工作。听起来 <div> 标签也有其缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T01:56:42.547

试试[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)，它是一个简单的 shell 实用程序，可以使用 webkit 渲染引擎将 html 转换为 pdf。

要使用它，解压它并像这样运行它：

> > wkhtmltopdf www.mydomain.com/barcode3barcode3.pdf

基本上，它将在*n 个*HTML 页面上运行并生成 PDF，而没有纯动态 PDF 生成的开销！

这可能会为您提供解决方案，但您需要检查要求并查看它是否符合您的服务器限制。当我们使用它直接从 HTML 生成准确的报告时，它工作得非常好。

**编辑：EG，从 PHP 中将其作为潜在的用户函数运行：**

**对于 Linux：**

```
exec("wkhtmltopdf http://mydomain.com /home/user/$user.barcode3.pdf 2>&1"); 
```

**对于 Windows：**

```
<?php
exec('C://path/to/package//wkhtmltopdf http://mydomain.html barcode3.pdf');

echo "PDF Created Successfully";
?> 
```

# actionscript-3 - for 循环中的 ActionScript 字符串连接

> ID：12888305
> 
> 赞同：0
> 
> 时间：2012-10-15T01:48:16.353
> 
> 标签：actionscript-3, apache-flex

所以我在循环中挣扎。

我有一个带有从 sqlite 数据库添加的动态控件的移动应用程序，它是一个问题列表，并且基于问题类型，我将相关类型的控件与问题一起添加到页面中，这一切都很好。

然后我遍历所有控件以寻找答案，因此我可以遍历 60 个问题并从相关的文本框、复选框和切换开关中返回值。

for 循环是这样运行的

```
 if (displayObject is DisplayObjectContainer && currentDepth < maxDepth)
            {  

                for (var i:int = 0; i < DisplayObjectContainer(displayObject).numChildren; i++)

                {
                    traceDisplayList(DisplayObjectContainer(displayObject).getChildAt(i), maxDepth, skipClass, levelSpace + "    ", currentDepth + 1);
                    if (displayObject is TextInput  ||displayObject is CheckBox || displayObject is Label || displayObject is ToggleSwitch )
                    {
                        if(displayObject["id"] =="QuestionText"&& (i==0))
                        {
                            if(displayObject["text"] != null)
                            {
                                questionString= (displayObject["text"]);
                                trace ("Question: " +  questionString); 
                            }
                        }
                        else if (displayObject["id"] == "QuestionResponse")
                        {
                            if(displayObject["text"] != null)
                            {
                                answerString = (displayObject["text"]);
                                trace ("Answer: " + answerString);
                            }
                        }
                        else if  (displayObject["id"]== "CheckboxResult")
                        {
                            if(displayObject["selected"] != null)
                            {
                                checkboxAnswer = (displayObject["selected"]);
                                trace ("Check / Toggle: " + checkboxAnswer);
                            }
                        }
                    }   

                }
            } 
```

我的问题是，我得到的结果是这样的；

问题
字符串值 答案字符串值
复选框值

我想要的是

问题字符串值、答案字符串值、复选框值

我一辈子都看不到我如何将这些值放入 1 行。

任何提示表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:04:54.877

Trace 只是将信息打印到控制台，主要用于调试，如果您真的希望在控制台中的一行上显示所有信息，您只需要创建一个字符串，然后添加“问题：”+ questionString +“答案：”+ answerString +“检查/ Toggle: " + checkbox 在您找到所有字符串后回答该字符串，然后使用您创建的字符串调用跟踪。像这样的东西

```
 var mystring:String
                    mystring="";
                    if(displayObject["id"] =="QuestionText"&& (i==0))
                    {
                        if(displayObject["text"] != null)
                        {
                            questionString= (displayObject["text"]);
                            mystring += "Question: " +  questionString; 
                        }
                    }
                    else if (displayObject["id"] == "QuestionResponse")
                    {
                        if(displayObject["text"] != null)
                        {
                            answerString = (displayObject["text"]);
                            mystring += "Answer: " + answerString;
                        }
                    }
                    else if  (displayObject["id"]== "CheckboxResult")
                    {
                        if(displayObject["selected"] != null)
                        {
                            checkboxAnswer = (displayObject["selected"]);
                            mystring += "Check / Toggle: " + checkboxAnswer;
                        }
                    }
                    trace(mystring); 
```

# python - Numpy 和 OpenCV

> ID：12888312
> 
> 赞同：3
> 
> 时间：2012-10-15T01:49:11.950
> 
> 标签：python, opencv, numpy, python-2.7

我厌倦了导入 cv 和 numpy 并得到错误。我开始导入 cv 并收到此错误：

> ImportError: numpy.core.multiarray failed to import
> Traceback (最近一次调用最后):
> File "", line 1, in <module>
> File "/usr/lib/pymodules/python2.7/cv.py", line 1,在 <module>
> from cv2.cv import *
> ImportError: numpy.core.multiarray 导入失败

所以我在 Ubuntu 上安装了 numpy，使用：

```
apt-get install python-numpy 
```

因此，当我导入 numpy 时，我得到：

> Traceback（最近一次调用最后一次）：
> 文件“”，第 1 行，在 <module>
> 文件“numpy/ **init** .py”，第 127 行，在 <module> 中
> 引发 ImportError(msg)
> ImportError: Error importing numpy: you should not try
> 从其源目录导入 numpy ；请退出 numpy 源代码树，然后
> 从那里重新启动您的 python 解释器。

我真的需要帮助。我在 Ubuntu 上使用 Python 2.7.3。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T03:37:24.313

使用操作系统的包管理器安装公共依赖项没有任何问题，请记住使用**pip**意味着您的突触更新不会更新您的 Python 库，并且 pip 不会利用 aptitude 已经处理的依赖项。对于像 numpy 和 opencv 这样的带有 C 扩展的 python 包，使用 apt-get 可能更好。

在 Ubuntu 中，您可以安装这两个依赖项

```
sudo apt-get install python-numpy python-opencv 
```

您收到的实际 Python 错误表明出了什么问题，即您是从 numpy 源目录中执行的，或者`numpy.py`在当前目录中命名了一个文件，这在导入时会造成混淆。尝试更改为一个空目录，启动 Python 导入您的库：

```
import numpy
import cv 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T02:07:47.363

最好使用一些包管理工具，比如 pip 来安装 numpy。例如，

```
pip install numpy 
```

# htmltidy - HTML Tidy：只发现问题而不修改文件

> ID：12888317
> 
> 赞同：1
> 
> 时间：2012-10-15T01:49:56.863
> 
> 标签：htmltidy

我是 HTML Tidy 的新手，我只是在查看在资源字符串中查找 HTML 标签问题的选项时听说过它。有没有办法在可能包含 HTML 内容的 .resx 文件的文件夹上调用 HTML Tidy？目的是检查是否存在 HTML 标记问题。如果它们存在，则报告它们但不修改源文件。

由于大多数资源文件内容不是基于 HTML 的标签，我希望 HTML Tidy 不要将没有 HTML 标签的任何内容标记为错误。那些有 HTML 标签的资源和那些有不正确标签的资源是我关心的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T16:02:10.117

Tidy 读取 HTML、XHTML 和 XML 文件并编写清理标记。它可以在任何类型的文件上运行，但不能忽略诸如缺少文档类型之类的错误。使用带有[findstr/grep的](https://stackoverflow.com/questions/8473425/grep-like-syntax-with-findstr)[[power] shell 脚本](https://stackoverflow.com/questions/8650689/convert-simple-bash-script-to-powershell)来查找具有 doctype 的文件，然后在该子集上运行 tidy。

# python - 删除与模型关联的文件 - django

> ID：12888318
> 
> 赞同：3
> 
> 时间：2012-10-15T01:50:04.753
> 
> 标签：python, django

我的一个模型中有以下代码

```
class PostImage(models.Model):
    post =  models.ForeignKey(Post, related_name="images")
    # @@@@ figure out a way to have image folders per user...
    image = models.ImageField(upload_to='images')
    image_infowindow = models.ImageField(upload_to='images')
    image_thumb = models.ImageField(upload_to='images')
    image_web = models.ImageField(upload_to='images')
    description = models.CharField(max_length=100)
    order = models.IntegerField(null=True)

    IMAGE_SIZES = {
        'image_infowindow':(70,70),
        'image_thumb':(100,100),
        'image_web':(640,480),
    }

    def delete(self, *args, **kwargs):
        # delete files..
        self.image.delete(save=False)
        self.image_thumb.delete(save=False)
        self.image_web.delete(save=False)
        self.image_infowindow.delete(save=False)
        super(PostImage, self).delete(*args, **kwargs) 
```

我试图在调用 delete() 方法时删除文件`PostImage`。但是，这些文件不会被删除。

如您所见，我重写了 delete() 方法，并删除了每个`ImageField`. 然而，由于某种原因，这些文件没有被删除。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T03:33:57.627

您可以使用多种方法删除模型实例。

一种方法是调用`delete()`：

```
PostImage.objects.get(...).delete() 
```

在这种情况下，`delete()`将调用 ，因此文件将被删除。但是，您也可以使用查询集删除对象：

```
PostImage.objects.filter(...).delete() 
```

不同的是，使用后一种方法，Django 会使用 SQL`DELETE`命令批量删除对象，因此`delete()`不会调用每个对象的方法。因此，您可能正在使用查询集删除对象，因此不会删除文件。

您可以通过使用`post_delete`Django 信号来解决此问题，如下所示：

```
@receiver(post_delete, sender=PostImage)
def post_delete_user(sender, instance, *args, **kwargs):
    instance.image.delete(save=False)
    instance.image_thumb.delete(save=False)
    instance.image_web.delete(save=False)
    instance.image_infowindow.delete(save=False) 
```

请注意，如果您使用此方法，则不必再覆盖该`delete()`方法。

更多关于[这里](https://docs.djangoproject.com/en/dev/topics/db/queries/#deleting-objects)和[这里](https://docs.djangoproject.com/en/dev/ref/signals/#post-delete)

# python - Python 3：获取 TypeError：切片必须是整数......但我相信它们是

> ID：12888320
> 
> 赞同：4
> 
> 时间：2012-10-15T01:50:26.503
> 
> 标签：python, python-3.x, integer, slice

我正在尝试编写一个名为“middle”的函数，该函数采用奇数的中间 3 位数字或偶数的中间 4 位数字。如果数字小于 5 位，则只返回整数。这是我的工作：

```
def middle(x):
    mystring=str(x)
    length=len(mystring)
    if len(mystring)<=5:
        return(x)
    elif len(mystring)%2==0:
        return (mystring[((length/2)-1):((length/2)+3)])
    else:
        return (mystring[(length//2):((length//2)+3)])
middle (1234567890) 
```

我不断收到“类型错误：切片索引必须是整数或无或有 an_index_method”，我不明白。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T01:56:11.583

我敢打赌，您使用的是 Python 3。[你是——我刚刚注意到这个标签。] `length/2`将是一个浮点数：

```
 return (mystring[((length/2)-1):((length/2)+3)]) 
```

改用`length//2`自始至终。

请注意，即使`length`是偶数，也会发生这种情况：

```
>>> s = 'abcd'
>>> len(s)
4
>>> len(s)/2
2.0
>>> s[len(s)/2:]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: slice indices must be integers or None or have an __index__ method
>>> s[len(s)//2:]
'cd' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-22T14:21:28.663

运算符仅在`//`分子为 int 时返回 int，而在分子为 float 时仍返回 float。

```
assert type(2//2) == int
assert type(2.//2) == float 
```

为了克服切片中的这种限制，可以使用以下函数：

```
def intslice(*args, **kwargs):
    '''Return a slice object that has integer boundaries.

    Example:
    np.arange(10)[intslice(10/10,10/2)]
    '''

    args = [int(arg) for arg in args]
    kwargs = {key: int(arg) for key, arg in kwargs.items()}
    return slice(*args, **kwargs) 
```

现在`intslice(10/10,10/2)`返回`slice(1,5)`

# jquery - JQuery 验证奇怪的自定义方法错误

> ID：12888321
> 
> 赞同：2
> 
> 时间：2012-10-15T01:50:32.163
> 
> 标签：jquery, jquery-validate, jquery-ui-datepicker

我对 JQuery Validate 和自定义方法有一个奇怪的错误。出于某种原因，每次更改字段时，验证方法都会触发 3-4 次。它出于某种原因循环，我不知道为什么。验证器工作。唯一的问题是它不能与 datepicker 一起使用。我必须在日期选择器中单击两次才能更改输入中的值。似乎 jquery validate 正在劫持 datepicker 输入或其他东西。在这一点上我一无所知，并且会接受任何想法。

自定义方法：

```
$(document).ready(function () {

    $.validator.addMethod("laterDate", function(value, element) {   
       var id = "#" + element.id;
       var id_number = element.value.charAt(element.length - 1);
            alert(id_number);
       if(id_number == "1"){
            alert("in if")
            var id_value = $(id).fieldDate();
            var today = new Date();
                alert(id_value > today);
                return id_value > today;
      }
        else{
        alert("in else")
        var prev_id_number = String(parseInt(id_number) - 1);
        var prev_id = "#end_date_" + prev_id_number;
        var prev_id_value = $(prev_id).fieldDate();
        var id_value = $(id).fieldDate();
        return id_value > prev_id_value;
      }

    }, $.format("Enter a later date"));
}); 
```

验证器代码是：

```
$(document).ready(function () {
    $("#rate_new_new").validate({
        debug: true,

rules: {
                "rates[start_date_1]": {dateITA: true, maxlength: 50},
                "rates[end_date_1]": {dateITA: true, maxlength: 50, laterDate: true},
                "rates[price_1]": {testPrice: true}
                },
    messages: {

        "rates[start_date_1]": {
            dateITA: "Please enter a valid date",
            maxlength: "The name must be less than 50 characters"

        }
    },      

    submitHandler: function(form) {

                $(form).ajaxSubmit({

                        success: function(){
                          $('#lefttabs li:eq(4) a').tab('show');
                                            }
                                  });

                                  }
 });
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T07:34:19.520

你在使用 JqueryUIDatePicker 吗？

比，试试这个：

```
$('#yourid').datepicker({
    onSelect: function(dateText, inst) {
        $(this).blur();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:04:09.483

您的代码有/有一些错误，例如缺少行尾和`String`语句（我认为您的意思是`.toString()`），以下是您的固定代码：

```
$(document).ready(function() {

    $.validator.addMethod("laterDate", function(value, element) {
        var id = "#" + element.id;
        var id_number = element.value.charAt(element.length - 1);
        alert(id_number);
        if (id_number == "1") {
            alert("in if");
            var id_value = $(id).fieldDate();
            var today = new Date();
            alert(id_value > today);
            return id_value > today;
        }
        else {
            alert("in else");
            var prev_id_number = (parseInt(id_number) - 1).toString();
            var prev_id = "#end_date_" + prev_id_number;
            var prev_id_value = $(prev_id).fieldDate();
            var id_value = $(id).fieldDate();
            return id_value > prev_id_value;
        }

    }, $.format("Enter a later date"));
});​ 
```

# php - 选择动作错误和奇怪的验证表格

> ID：12888323
> 
> 赞同：1
> 
> 时间：2012-10-15T01:50:59.883
> 
> 标签：php, yii

每个应用程序都有实例。当我尝试以适当的方式访问网址管理器时

```
'application/<slug:[\w+]+>/instance/create/' => 'instance/create',
'application/<slug:[\w+]+>/instance/<uuid:[\w0-9]+>/update/' => 'instance/update', 
```

要打开链接，请将路径设置为

```
$this->menu=array(
    array('label'=>'Create Instance', 'url'=>Yii::app()->createUrl('instance/create',  array('slug' => $model->application->slug, 'uuid' => $model->uuid))),
array('label'=>'Update Instance', 'url'=>Yii::app()->createUrl('instance/update', array('slug' => $model->application->slug, 'uuid' => $model->uuid))), 
```

我收到一个错误

```
include(optional_note.php): failed to open stream: No such file or directory 
```

什么文件以及必须做些什么来满足推荐？

**更新**

```
public function actionCreate()                                         
{                                                                      
$model=new Instance;                                                  
    $model->application_id = $this->_application->id;                  

// Uncomment the following line if AJAX validation is needed          
// $this->performAjaxValidation($model);                              

if(isset($_POST['Instance']))                                         
{                                                                     
    $model->attributes=$_POST['Instance'];                               
    if($model->save())                                                   
            $this->redirect(array('view','uuid'=>$model->uuid));                
}                                                                     

$this->render('create',array(                                         
    'model'=>$model,                                                     
));                                                                   
} 
```

**更新**

现在出现了奇怪的行为，获取以下字段参数

```
Stack Trace
#3 \yii-1.1.12.b600af\framework\base\CModel.php(285): CValidator::createValidator("optional_note", Instance, "uuid", array(0 => "length", "max" => 128)) 
#4 \yii-1.1.12.b600af\framework\base\CModel.php(259): CModel->createValidators()
#5 \yii-1.1.12.b600af\framework\base\CModel.php(302): CModel->getValidators("uuid")
#6 \yii-1.1.12.b600af\framework\web\helpers\CHtml.php(1197):  CModel->isAttributeRequired("uuid")
#7 \yii-1.1.12.b600af\framework\web\widgets\CActiveForm.php(563): CHtml::activeLabelEx(Instance, "uuid", array()) 
#8 \protected\views\instance\_form.php(25): CActiveForm->labelEx(Instance, "uuid")

 <?php echo $form->errorSummary($model); ?>
 <div class="row">
     <?php echo $form->labelEx($model,'uuid'); ?>
     <?php echo $form->textField($model,'uuid',array('size'=>60,'maxlength'=>128)); ?>
     <?php echo $form->error($model,'uuid'); ?>
 </div>
  <div class="row"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:19:02.670

看：

```
CValidator::createValidator("optional_note", Instance, "uuid", array(0 => "length", "max" => 128)), 
```

模型检查规则

```
array('uuid', 'optional_note' ... 
```

错了，需要将列名放在同一个字符串中

```
array('uuid, optional_note', ... 
```

# jakarta-ee - OSGI-CDI/现在可用吗？[2012 年 10 月]

> ID：12888325
> 
> 赞同：0
> 
> 时间：2012-10-15T01:51:16.717
> 
> 标签：jakarta-ee, glassfish, osgi, cdi

我对 Java EE 6 和 OSGI 概念还很陌生，我对此感到非常兴奋......

最令人兴奋的特性是执行时的动态依赖注入。

我已经看到了一些非常棒的演示，其中应用程序在激活或未激活捆绑包时进行 ajaxly 更新，我喜欢将应用程序解耦到模块中并在运行时更新它的方式......

其次，我对 XML 配置文件很无聊，我认为带有`javax.inject`和其他注释的 Java EE 6 是一件非常好的事情......

所以，我已经准备好开始在我的 web 应用程序中使用 OSGI，但首先我需要一些信息..

我找不到明确的 OSGI 进度状态 - Java EE 容器中的 CDI 集成。

(gf-cdi-osgi-集成/osgi-cdi/osgi-cdi-api)

我认为这个问题也调用了weld-osgi。

1.  最新的 glassfish 3.1.2.2 是否支持 OSGI 的 CDI 注释，如 @OsgiService 和 @Publish ？还是会在未来的版本中发布？

（我已经看到使用 @OsgiService 和 maven depenmdancy 的示例似乎启用了这个注释，但现在没有关于 @Publish ......）

1bis - Jboss AS 是否支持该功能？哪个 Java EE 容器与 OSGI 的集成度最好？

1.  什么是 fighterfish (Oracle)，它与 ​​glassfish osgi 有关吗？

2.  所以基本上，如果我现在想与 cdi 和 osgi 开发战争，我需要哪个 env

    （服务器 - 版本 - 插件）

3.  此外，需要哪些 maven 依赖才能使用 @publish 和 @osgiservice

4.  只是为了澄清一点，如果我接受 hibernate lib 打包在我的 war / wab 中并且不会作为捆绑包提供，我可以在我的项目中使用 hibernate 和 OSGI

    对于其他任何库，同样的问题...

感谢您的时间和解释，顺便说一句，我已经阅读了很多论坛和博客[https://github.com/tangyong/gf-cdi-osgi-integration](https://github.com/tangyong/gf-cdi-osgi-integration) 例如，我只需要明确回答我的问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:50:54.677

Glassfish 已经支持在 OSGi 包中使用 Java EE 注释。下面的文档显示了我认为已经可以完成的工作，这令人印象深刻。其中支持@OsgiService。

[http://glassfish.java.net/public/GF-OSGi-Features.pdf](http://glassfish.java.net/public/GF-OSGi-Features.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-11T09:43:22.080

Apache Karaf 现在还通过使用[pax-cdi](https://ops4j1.jira.com/wiki/display/PAXCDI/Pax+CDI)项目支持 CDI。

[在 ops4j 的邮件列表线程中，](https://groups.google.com/forum/#!topic/ops4j/KpOA11LgYSI) Harald Wellman 描述了如何在 karaf 上使用 pax cdi。这对我来说很好。即将推出的 karaf 3.0.0 将 pax cdi 包含在企业功能中，因此安装将只是“feature:install cdi”。

启动 Apache Karaf 3.0.0.RC1

```
feature:repo-add mvn:org.ops4j.pax.cdi/pax-cdi-features/0.4.0/xml/features
install mvn:org.apache.xbean/xbean-bundleutils/3.12
feature:install pax-cdi-openwebbeans
install mvn:org.ops4j.pax.cdi.samples/pax-cdi-sample1/0.4.0
start org.ops4j.pax.cdi.sample1 
```

所以我们可以检查这个例子是否有效：

```
services org.ops4j.pax.cdi.sample1

OPS4J Pax CDI Sample1 (153) provides:
------------------------------------
[org.ops4j.pax.cdi.sample1.impl.VanillaService,
org.ops4j.pax.cdi.sample1.IceCreamService]
[org.ops4j.pax.cdi.sample1.IceCreamService]
[org.ops4j.pax.cdi.spi.CdiContainer] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T17:09:45.717

JBoss AS7 的未来版本（不幸的是我没有日期）将包括新的焊接 osgi（http://in.relation.to/Bloggers/NotOneTwoWeldReleases1110FinalAnd120Beta1），它可能会满足您的需求。至于 GlassFish，我不希望很快在那里看到焊接 1.2.x 版本:(

# jquery - 使用jQuery动画扩展高度时，div中的文本会移动

> ID：12888326
> 
> 赞同：1
> 
> 时间：2012-10-15T01:51:38.297
> 
> 标签：jquery, html, css

在[这个网页上](http://northviewhigh.com/index/fbla/1213/eb/tickets/)，我有一组按钮，点击后，下面的部分将展开以显示更多内容。页面说明淡出，所选部分的内容淡入。

我目前遇到的问题是文本随着部分的展开而移动（单击“毕业”按钮以查看我在说什么）。这是我用来让一切发生的jQuery（完整的脚本文件[在这里](http://northviewhigh.com/index/fbla/1213/eb/jquery/scripts.js)）：

```
function expandTix(newHeight) {
    $('#tixcontainer').animate({
        height: newHeight + 'px'
    });
}
$('.gradbutton').click(function(){
    $('.startinfo').fadeOut();
    $('.gradinfo').fadeIn();
    expandTix(300);
}); 
```

和 HTML：

```
<div id="tixcontainer">

    <div class="tixcontent startinfo">
        Select a ticket type to begin ordering your graduation tickets. 
    </div>

    <div class="tixinfo hidden gradinfo">
        You selected "Graduate"
    </div>

</div> 
```

我怎样才能使文本在动画时不会跳来跳去？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:16:59.450

试试这个**工作演示：http:** [//jsfiddle.net/8NegC/](http://jsfiddle.net/8NegC/)

与这个越野车相比，这将适合您的需要，`:)`以便您可以看到差异：http: [//jsfiddle.net/DpG6A/1/](http://jsfiddle.net/DpG6A/1/)（*越野车演示以显示差异*）

休息会满足你的需要`:)`

**代码**

```
function expandTix(newHeight) {
    $('#tixcontainer').animate({
        height: newHeight
    }, 'slow', function() {
        $('.gradinfo').fadeIn();

    });

}
$('.gradbutton').click(function() {
    $('.startinfo').fadeOut();
    expandTix($('.startinfo').height());

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T02:17:44.597

您的 #tixcontainer 元素缺少显式宽度。

**为元素 #tixcontainer 添加 width:100% 到您的 css 文件**

您看到的问题是，当 .animate() 运行时，在动画步骤之间，它会在动画元素中添加溢出：隐藏。

由于您正在制作动画的元素在应用溢出隐藏时没有明确的尺寸，因此它将尝试隐藏内容并且父元素将失去它的计算宽度，因此您需要明确设置它

# python - 是否有与 PHP 的 loadXML() 等效的 Python？

> ID：12888327
> 
> 赞同：2
> 
> 时间：2012-10-15T01:51:56.760
> 
> 标签：python

在 PHP 中，我可以使用：

```
$doc = new DomDocument();
@$doc->loadXML($htmlData); 
```

将一串 HTML 数据转换为 DOM 文档对象。在 Python 中有没有等效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T01:55:42.627

是的，您可以使用标准库中的[ElementTree](http://docs.python.org/library/xml.etree.elementtree.html)：

```
import xml.etree.ElementTree as ET
tree = ET.parse('country_data.xml')
root = tree.getroot() 
```

# php - 注意未定义索引

> ID：12888328
> 
> 赞同：-4
> 
> 时间：2012-10-15T01:52:04.350
> 
> 标签：php

> **可能重复：**
> [PHP：“注意：未定义的变量”和“注意：未定义的索引”</a>](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index) [参考 - 这个错误在 PHP 中是什么意思？](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php)

> 注意：未定义索引：第 6 行 C:\xampp\htdocs\CMS\includes\login.php 中的 ac
> 
> 注意：未定义索引：在第 13 行登录 C:\xampp\htdocs\CMS\includes\login.php

我收到带有以下代码的上述通知。如何定义我的索引？我知道有一种使用 ISSET 的方法，但我不确定如何使用 $_SESSION 记录和 USERS；因为有多个值。我如何以正确的方式清除上述错误，而不仅仅是抑制通知/错误？

```
<?php
session_start(); // initialize session
include($_SERVER['DOCUMENT_ROOT'] . 
        '/CMS/CMSController.php');

if ($_POST["ac"]=="log") { /// do after login form is submitted  
     if ($USERS[$_POST["username"]]==$_POST["password"]) { /// check if submitted username and password exist in $USERS array 
          $_SESSION["logged"]=$_POST["username"]; 
     } else { 
          echo 'Incorrect username/password. Please, try again.'; 
     }; 
}; 
if (array_key_exists($_SESSION["logged"],$USERS)) { //// check if user is logged or not  
    echo "You are logged in.";
    header('Location: /CMS/index.php');
} else { //// if not logged show login form 
     echo '<form action="login.php" method="post"><input type="hidden" name="ac" value="log"> '; 
     echo 'Username: <input type="text" name="username" />'; 
     echo 'Password: <input type="password" name="password" />'; 
     echo '<input type="submit" value="Login" />'; 
     echo '</form>'; 
}; 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:56:22.517

您可以检查是否有[`isset()`](http://php.net/manual/en/function.isset.php)您提到的检查。像这样使用它：

```
if(isset($_POST["ac"])) {
    //Code using ac here
} 
```

这样，如果`ac`索引处没有任何内容，则使用它的代码将执行。 `isset`本身不会引起通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T01:59:39.397

你可以把它改成这样：

```
<?php
session_start(); // initialize session
include($_SERVER['DOCUMENT_ROOT'] . 
        '/CMS/CMSController.php');

// This is one way to do it - it will give AC a value if it does not exist
// Do this for each $_POST value that may NOT have a value when executing this
// PHP file, for example: $_POST['username'] and $_POST['password']

if (!isset($_POST['ac'])) $_POST['ac'] = FALSE; 
```

或者

```
// Or you can do it this way
if(isset($_POST['ac'])) {

// The code below will only execute if AC is set

      if ($_POST["ac"]=="log") { /// do after login form is submitted  
         if ($USERS[$_POST["username"]]==$_POST["password"]) { /// check if submitted username and password exist in $USERS array 
          $_SESSION["logged"]=$_POST["username"]; 
       } else { 
            echo 'Incorrect username/password. Please, try again.'; 
       }; 
    };

 // Don't forget the closing curly brace. NO NEED to put ; after the }'s
 } 
```

这些方法中的任何一种都可以正常工作。

# javascript - 检查第三方 iFrame 内容

> ID：12888332
> 
> 赞同：3
> 
> 时间：2012-10-15T01:53:12.477
> 
> 标签：javascript, iframe

> **可能重复：**
> [Frame Buster Buster … 需要 buster 代码](https://stackoverflow.com/questions/958997/frame-buster-buster-buster-code-needed)

我正在玩第三方 iframe，试图了解我能做什么和不能做什么。

**一件事我还没有想通：**

在加载第三方 iframe 时，有没有办法在加载页面之前检查它不允许其网站被 iframe 化？

过去，我注意到一些第三方网站（例如 NYTimes 等）有一个 JS 函数，如果它检测到它正在被 iframed 重定向页面。有没有办法检查这样的重定向功能是否存在？

**该函数通常如下所示：**

> 函数 deframe(){if (top.location != location) top.location.href = document.location.href;} deframe();

同时，其他第三方网站不会重定向，而是在 iframe 时加载一个空白页面（例如 Google、Twitter）。我也在努力避免这种情况。

理想情况下，当我的页面加载时，我有办法提前意识到这些网站不允许自己被 iframe 并加载其他内容。

# c# - 是否可以使用 VS2010 的 C# 5 编译器？

> ID：12888338
> 
> 赞同：19
> 
> 时间：2012-10-15T01:54:10.570
> 
> 标签：c#, visual-studio-2010, c#-5.0

我更喜欢 VS2010 UI 而不是 VS2012，所以我想继续使用它，但我想使用 C# 5 的语言特性——尤其是调用者信息属性——如果不是 .NET 框架 4.5 的特性的话。有没有一种明智的方法可以在 VS 中保持智能感知？

我知道我可以“半手动”调用 v5 编译器作为构建操作，但我认为这既不顺畅也不高效。是否可以创建自定义定位包，或者这是只有 MS 可以创建的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T20:35:12.777

VS2010 不知道 5.0 编译器和语言规范，也不支持 4.5 版本的框架。

您可能会在 VS2010 中编辑您的解决方案，然后在外部构建您的解决方案，但这样做您会失去智能感以及使 VS 成为现实的所有细节。所以不行。

# xslt - 所有 X 元素低于 Y，但在另一个之前，后代，Y

> ID：12888342
> 
> 赞同：1
> 
> 时间：2012-10-15T01:55:02.210
> 
> 标签：xslt, xpath, xslt-2.0, xpath-2.0

```
<div n="a">
  . . . 
    . . .
      <spec>red</spec>
      <div n="d">
          . . . 
      </div>
      <spec>green</spec>
      . . .
         <div n="b">
            . . .
              <spec>blue</spec>
            . . .
         </div>
         <div n="c">
           <spec>yellow</spec>
         </div>
      . . .
    . . .
  . . .
</div> 
```

**[编辑以消除肖恩注意到的歧义。 - 谢谢]**

当当前元素为`<div n="a">`时，我需要一个 XPATH 表达式，它返回红色和绿色元素，但不返回蓝色和黄色元素，就像`.//spec`这样。

当前元素为`<div n="b">`时，同样的表达式需要返回蓝色元素；时`<div n="c">`，黄色元素。

就像是`.//spec[but no deeper than another div if there is one]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T03:05:12.437

**在 XSLT 1.0 中，假设当前节点是 a `div`：**

```
.//spec[generate-id(current())=generate-id(ancestor::div[1])] 
```

**在相同假设下的 XSLT 2.0 中**：

```
.//spec[ancestor::div[1] is current()] 
```

**还有一个纯 XPath 2.0 表达式**：

```
for $this in .
     return
        $this//spec[ancestor::div[1] is $this] 
```

* * *

**完整的 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="div">
  <div n="{@n}"/>
  <xsl:copy-of select=
   ".//spec[generate-id(current())=generate-id(ancestor::div[1])]"/>
==============
  <xsl:apply-templates/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<div n="a">
  . . .
    . . .
      <spec>red</spec>
      <spec>green</spec>
      . . .
         <div n="b">
            . . .
              <spec>blue</spec>
            . . .
         </div>
         <div n="c">
           <spec>yellow</spec>
         </div>
      . . .
    . . .
  . . .
</div> 
```

**产生了想要的正确结果**：

```
<div n="a"/>
<spec>red</spec>
<spec>green</spec>
==============
  <div n="b"/>
<spec>blue</spec>
==============
  <div n="c"/>
<spec>yellow</spec>
============== 
```

* * *

**完整的 XSLT 2.0 转换**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="div">

  <div n="{@n}"/>
  <xsl:sequence select=".//spec[ancestor::div[1] is current()]"/>
===================================
  <xsl:apply-templates/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当应用于同一个 XML 文档（上图）时，会产生相同的正确结果：**

```
<div n="a"/>
<spec>red</spec>
<spec>green</spec>
===================================
  <div n="b"/>
<spec>blue</spec>
===================================
  <div n="c"/>
<spec>yellow</spec>
=================================== 
```

* * *

**并使用纯 XPath 2.0（否`current()`）：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="div">

  <div n="{@n}"/>
  <xsl:sequence select="
    for $this in .
     return
        $this//spec[ancestor::div[1] is $this]"/>
===================================
  <xsl:apply-templates/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**产生相同的正确结果**：

```
<div n="a"/>
<spec>red</spec>
<spec>green</spec>
===================================
  <div n="b"/>
<spec>blue</spec>
===================================
  <div n="c"/>
<spec>yellow</spec>
=================================== 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:05:10.923

假设您使用的是 XSLT 1.0，并且您想要选择“spec”子节点、所有子节点，然后将所需的“当前”节点作为 XSLT 焦点节点，设置以下变量...

```
<xsl:variable name="divs" select="*//div" /> 
```

现在，您可以使用此 XPath 表达式选择所有`spec`后代之前没有后代的所有后代`div`...

```
//spec[not((preceding::div|ancestor::div)[count(. | $divs) = count($divs)])] 
```

## 警告

这应该可以，但我还没有测试过。带着这种谨慎，我把它作为一个练习留给 OP 来测试。

## 笔记

如果您真的非常想要一个不需要您声明附加变量的 XPath 表达式，并且**您**很幸运已经将当前节点保存在节点集中（我们称之为 $ref），您可以使用这个相当低效的 XPath 表达式...

```
$ref//spec[not((preceding::div|ancestor::div)[count(. | $ref/*//div) =
                                              count(    $ref/*//div)  ])] 
```

## 附录

这是一个测试用例，我可能指的是评论流。

测试用例 1 输入：

```
<div n="a">
      <spec>red</spec>
      <div n="x"/>
      <spec>green</spec>
      <div n="b">
        <spec>blue</spec>
      </div>
      <div n="c">
        <spec>yellow</spec>
      </div>
</div> 
```

测试用例 1 预期输出：

*   应该只是`red`

# json.net - 没有带有设置和转换器参数的 Json.net 构造函数

> ID：12888343
> 
> 赞同：7
> 
> 时间：2012-10-15T01:55:12.520
> 
> 标签：json.net

我们目前正在使用以下构造函数。

```
var text = JsonConvert.SerializeObject(message, new IsoDateTimeConverter()); 
```

我们面临的问题是json有时以不同的顺序序列化。这会导致我们的测试和我们所做的哈希检查出现问题。我找到了一个可以使用客户设置订购属性的示例

```
public class OrderedContractResolver : DefaultContractResolver
{
    protected override System.Collections.Generic.IList<JsonProperty> CreateProperties(System.Type type, MemberSerialization memberSerialization)
    {
        return base.CreateProperties(type, memberSerialization).OrderBy(p => p.PropertyName).ToList();
    }
} 
```

您通常会通过初始化 JsonSerializationSettings 对象并将其传递给构造函数来使用它，例如

```
var settings = new JsonSerializerSettings()
{
    ContractResolver = new OrderedContractResolver()
};

var json = JsonConvert.SerializeObject(obj, Formatting.Indented, settings); 
```

问题是我看不到使用转换器和设置参数的构造函数的重载，有什么想法可以同时使用吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-15T02:00:20.447

找到它，设置对象上有一个转换器属性。

```
var settings = new JsonSerializerSettings()
{
     ContractResolver = new OrderedContractResolver()
};
settings.Converters.Add(new IsoDateTimeConverter());

var text = JsonConvert.SerializeObject(message, Formatting.Indented, settings); 
```

# razor - 在 Asp.net MVC4 Web 应用程序中使用和创建帮助程序

> ID：12888351
> 
> 赞同：9
> 
> 时间：2012-10-15T01:56:18.853
> 
> 标签：razor, asp.net-mvc-4, azure-web-roles, razor-declarative-helpers

我正在使用 Asp.net mvc4 WebRole，我发现这是一个 Web 应用程序，而不是一个网站。看完[这篇文章](http://www.asp.net/web-pages/tutorials/working-with-pages/creating-and-using-a-helper-in-an-aspnet-web-pages-site)，我知道了如何在 Asp.MVC4 中添加客户助手功能。在网站应用程序中，我可以在 app_code 文件夹中添加一个 cshtml 文件，如下所示，以便我可以在另一个 cshtml 中使用我的自定义帮助方法。

```
 @helper  HotDeployButton(string value, string url , bool enable= true){

      string enablestr = string.Empty;
      if (!enable)
      {
          enablestr = "disabled=\"disabled\"";
      }

      <input type="button"  name="@value" value="@value" onclick=" window.location.href='@url'" class="mobile-button"  @enablestr />
  }

  @helper Img(string picName, string alt ){

      string root = "/content/themes/default/images/";
      string imgurl = root + picName;

      <img  alt="@alt" src="@imgurl" title="@alt" />

  } 
```

在下面显示的另一个 cshtml 中将使用`HotDeployButton`方法。

```
<div class="bottom-div">
            @Html.Hidden("hdSelMinorPackId", "")
            <!--Html.Hidden("randomId", (object)ViewBag.RandomId)-->
            <input type="submit" name="ExcuteDeploy" id="ExcuteDeploy" value="Deploy" onclick="return validateVersion();"
                class="mobile-button" />
            &nbsp;&nbsp;&nbsp;&nbsp;
            @Helpers.HotDeployButton("Back", Url.Action("Index"))
        </div> 
```

但是在 Asp.net Web Application 中，项目中没有 App_code 文件夹。我不知道如何在 Web Application 中制作它。请帮助我。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T05:13:12.627

该目录不是使用默认的 Web 应用程序项目模板创建的，因此您只需`App_Code`手动创建文件夹，它应该可以工作（右键单击项目 -> 添加 -> 新文件夹）。

如果你做对了，它会有一个特殊的图标：

![在此处输入图像描述](../Images/20d6e462c36bef15c92a78948504fae7.png)

[顺便说一句，这是您链接教程](http://www.asp.net/web-pages/tutorials/working-with-pages/creating-and-using-a-helper-in-an-aspnet-web-pages-site)的第一步：

> 创建助手
> 
> 此过程向您展示如何创建创建注释的助手，如刚才所述。这是一个简单的示例，但自定义帮助程序可以包含您需要的任何标记和 ASP.NET 代码。
> 
> 1.  **在网站的根文件夹中，创建一个名为 App_Code 的文件夹。**这是 ASP.NET 中的保留文件夹名称，您可以在其中放置帮助程序等组件的代码。

# sql-server - SQL_Latin1_General_CP1_CI_AS 中的 Z 之后是什么？

> ID：12888354
> 
> 赞同：3
> 
> 时间：2012-10-15T01:56:30.373
> 
> 标签：sql-server, database-design

我试图证明生产数据库中的表设计缺陷，即表不能在可以包含随机数据的列上具有聚集主键，在这种情况下是由最终用户键入的代码。

虽然我们知道解决方案是将 PK 设为非集群，但我仍然需要向其添加行以对其副本进行测试。因此，我需要知道在“Z”之后可以使用什么字符作为前缀。

此外，该列不是 unicode，在我的假数据前面加上一系列 Z 会很麻烦。该表现在有十万行，每次插入都需要几秒钟。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T02:48:27.350

只需运行它并从列表中删除。为了清楚起见，我添加了夹点，特别是。当涉及不可见字符时。

```
select number, '.' + char(number) + '.' collate SQL_Latin1_General_CP1_CI_AS thechar
from master..spt_values
where type='p' and number between 28 and 255
order by thechar 
```

'Z' 之后只有 4 个字符，因为您说该列不是 N(Var)Char。

```
121 .y.
89  .Y.
253 .ý.
221 .Ý.
255 .ÿ.
90  .Z.
122 .z.
208 .Ð.
240 .ð.
254 .þ.
222 .Þ. 
```

# c# - 将多行字符串添加到另一个字符串 = 丢失多行？

> ID：12888356
> 
> 赞同：1
> 
> 时间：2012-10-15T01:57:10.787
> 
> 标签：c#, asp.net, string, concatenation, multiline

我希望创建一个字符串，其中包含每行一个项目的内容列表，但以下代码不维护新行：

```
foreach (DateTime date in dates)
{
    datelist += date.ToString("yyyy/MM/dd") + Environment.NewLine;
}

string mystring = String.Format(@"Hey there here is a list of dates

                                  Dates:

                                  {0}",
                                  datelist); 
```

**输出：**

嘿，这里有一个日期列表

日期：

2012/03/04 2012/03/05 2012/03/06

**期望的输出：**

嘿，这里有一个日期列表

日期：

2012/03/04

2012/03/05

2012/03/06

我尝试了一些变体，例如两个 Environment.NewLines、转义符如 \r\n、以 @ 开头的字符串等等，但我无法获得我想要的输出。

我最终能够通过将符号放入我想要换行符的字符串中来解决我的问题，然后使用 string.Replace 将符号更改为 Environment.NewLine：

```
foreach (DateTime date in dates)
{
    datelist += date.ToString("yyyy/MM/dd") + "<br />";
}

string mystring = String.Format(@"Hey there here is a list of dates

                                  Dates:

                                  {0}",
                                  datelist.Replace(Environment.NewLine, "<br />")); 
```

就像我说的，这行得通，但我想知道为什么在将带有行的字符串插入另一个字符串时，良好的旧连接不起作用，以及我的问题的标准/通用解决方案是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T02:02:49.450

如果你渲染 HTML 输出，你不应该使用`Environment.NewLine`-`<br />`来代替。浏览器可以将多个连续的空格（包括`\r`and `\n`）聚合成一个空格。（根据我的经验，实际行为在某种程度上取决于浏览器，但我实际上并没有对此进行研究。）

```
foreach (DateTime date in dates)
{
    datelist += date.ToString("yyyy/MM/dd") + "<br />";
}

string mystring = String.Format("Hey there here is a list of dates<br />" +
    "Dates:<br />{0}", datelist); 
```

如果在字符串中的某个地方需要多个空行，`<br />`当然可以使用多个 -s。

# jquery - 无法遍历 DOM 以使 div 出现在另一个元素之前

> ID：12888361
> 
> 赞同：0
> 
> 时间：2012-10-15T01:57:48.557
> 
> 标签：jquery, html, razor, asp.net-webpages

当我运行如下所示的 jQuery 时，previousDiv 的值始终是：[]。我尝试了 .prev() 函数的几种变体，包括 .prev('div') 和 .prev()，结果都相同。

这是jQuery：

```
$('.AddToRole').click(function(evt) {
var path = document.URL;
var thisUser = this.value;
var previousControl = $(this).prev('.AvailableRoles');
var newUserRole = previousControl[0].options[previousControl[0].selectedIndex].text;
var newHTML = "<button id='button_DeleteRole_" + newUserRole +"' class='DeleteRole' value=" + newUserRole + ">X</button>&nbsp;<label id='label_DeleteRole_" + newUserRole + "'>" + newUserRole + "</label><br />";
var previousDiv = $(this).prev('#DisplayUserRoles');
$(previousDiv).append(newHTML); 
```

这是页面中的 html/razor 代码：

```
<div>
                    @* Display user email. *@
                    <h3>@user.Email</h3>
                    <div>
                        <div id="DisplayUserRoles">
                            @{
                                @* Display roles user belongs to. *@
                                foreach (var role in userRoles)
                                {
                                    @* Remove user from role button. *@
                                    <button id="button_RemoveFromRole_@user.Email" value="@role.RoleName" onclick="RemoveUserFromRole(this);">X</button>
                                    <label id="label_RemoveFromRole_@role.RoleName">@role.RoleName</label>
                                    <br />
                                }
                            }
                        </div>
                        <br />                            
                    @{                                                    
                        @* Create ListBox with roles user does not belong to. *@
                        var items = rolesUserDoesNotBelongTo.Select(i => new SelectListItem
                        {
                            Value = i.RoleName,
                            Text = i.RoleName
                        });

                        string listBoxId = "listboxRoles_";
                        listBoxId = listBoxId + user.Email;

                    }                            
                        @Html.ListBox(listBoxId, items, new { @class = "AvailableRoles" })
                        @* Add user to role button. *@
                        <button id="button_AddToRole_@user.Email" class="AddToRole" value="@user.Email">Add To Role</button>
                    </div>
                </div> 
```

对于最终结果，我试图在#DisplayUserRoles 的结束 div 标记之前添加另一个按钮和标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:24:03.017

`.prev()`不工作你如何使用它。它获取前一个兄弟元素，然后通过您传递的选择器对其进行过滤。它不会寻找任何与选择器匹配的先前兄弟。

因此，当您同时执行这两项操作时：

```
$(this).prev('.AvailableRoles');
$(this).prev('#DisplayUserRoles'); 
```

至少其中一个不会返回任何对象，除非前一个兄弟是两者`.AvailableRoles`，`#DisplayUserRoles`我怀疑这就是你要找的。

* * *

我不太确定我知道你想用这些做什么，但你可以这样做：

```
$(this).prevAll('.AvailableRoles').first(); 
```

对于 DisplayUserRoles，由于文档中只能有一个具有给定 ID 的对象，因此您可以这样做：

```
$('#DisplayUserRoles'); 
```

这些将获得与选择器匹配的所有先前兄弟姐妹，然后仅获得第一个。

* * *

正如我在评论中所说，如果您发布生成的 HTML（浏览器通过 View/Source 看到的内容）而不是我们不一定知道它生成什么 HTML 的模板代码，我们可以提供更好的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:26:38.590

如前所述，如果所选元素没有兄弟元素，则`.prev()`返回一个空数组。如果是这种情况，则检查最近的父元素。

```
var previousControl = $(this).prev();

if (!previousControl.length) {
    previousControl = $(this).parent();
}

previousControl.toggleClass('bestClass'); // This is just an example function 
                                          // call on the element 
```

# r - 如何更改数据框中的列值？

> ID：12888363
> 
> 赞同：5
> 
> 时间：2012-10-15T01:58:09.793
> 
> 标签：r, dataframe

我有一个简单的数据框列转换，可以使用 if/else 循环来完成，但我想知道是否有更好的方法来做到这一点。

初始数据帧是，

```
 df <-data.frame(cbind(x=rep(10:15,3), y=0:8))
 df
    x y
1  10 0
2  11 1
3  12 2
4  13 3
5  14 4
6  15 5
7  10 6
8  11 7
9  12 8
10 13 0
11 14 1
12 15 2
13 10 3
14 11 4
15 12 5
16 13 6
17 14 7
18 15 8 
```

我需要做的是替换“y”列中的值，这样

```
'0' gets replaced with '2',
'1' gets replaced with '2.2',
'2' gets replaced with '2.4',
...
...
'6' gets replaced with '3.2'
'7' gets replaced with '3.3'
'8' gets replaced with '10' 
```

所以我最终会得到类似的东西，

```
> df
    x    y
1  10  2.0
2  11  2.2
3  12  2.4
4  13  2.6
5  14  2.8
6  15  3.0
7  10  3.2
8  11  3.3
9  12 10.0
10 13  2.0
11 14  2.2
12 15  2.4
13 10  2.6
14 11  2.8
15 12  3.0
16 13  3.2
17 14  3.3
18 15 10.0 
```

我已经搜索并找到了几个建议，但无法让它们发挥作用。其中一项尝试是，

```
> levels(factor(df$y)) <- c(2,2.2,2.4,2.6,2.8,3,3.2,3.3,10)

Error in levels(factor(df$y)) <- c(2, 2.2, 2.4, 2.6, 2.8, 3, 3.2, 3.3,  : 
  could not find function "factor<-" 
```

但我收到上面显示的错误消息。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T02:06:06.337

`y+1`使用作为替换索引的事实

就像是

```
replacement <- c(2,2.2,2.4,2.6,2.8,3,3.2,3.3,10)
df <- within(df, z <- replacement[y+1]) 
```

或者，`data.table`用于合成糖和记忆效率

```
library(data.table)
DT <- as.data.table(df)

DT[, z := replacement[y+1]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T02:04:13.447

怎么样：

```
mylevels <- c(2,2.2,2.4,2.6,2.8,3,3.2,3.3,10)
df$z <- as.numeric(as.character(factor(df$y,labels=mylevels))) 
```

这也符合您想要的结果：

```
transform(df,z=ifelse(y==7,3.3,ifelse(y==8,10,2+y/5))) 
```

# java - 将 JRadioButton 添加到图形对象

> ID：12888364
> 
> 赞同：1
> 
> 时间：2012-10-15T01:58:21.957
> 
> 标签：java, swing, graphics, jpanel, jradiobutton

我有一个现有的图形对象，我试图在它上面添加一个 JRadioButton。一旦程序运行，按钮就不会出现，我认为这是因为没有办法将 JPanel 添加到 Graphics 对象。我将 JRadiobutton 添加到其相应的 ButtonGroup，然后将按钮添加到 JPanel，但我还没有看到任何在图形对象顶部添加按钮的方法。

有没有办法将单选按钮添加到图形对象？我继续使用这个图形对象很重要。让我知道查看代码是否会有所帮助，我想我只需要一种更好的方法来解决这个问题。

```
private void redrawTitle(Graphics gc) {
    gc.setColor(Color.yellow);
    gc.fillRect(0, 0, view_width, view_height);
    gc.setFont(largeBannerFont);
    FontMetrics fm = gc.getFontMetrics();
    gc.setColor(Color.red);
    centerString(gc, fm, "Start", 100);
    gc.setColor(Color.blue);
    gc.setFont(smallBannerFont);
    fm = gc.getFontMetrics();
    centerString(gc, fm, "by DavidVee", 160);
    centerString(gc, fm, "a;lskdf", 190);
    gc.setColor(Color.black);
    centerString(gc, fm, "To start, select a skill level.", 250);

    JRadioButton kruskalButton = new JRadioButton("Kruskal");
    ButtonGroup group = new ButtonGroup();
    group.add(kruskalButton);
    JPanel panel = new JPanel();
    panel.add(kruskalButton);

    centerString(gc, fm, "(Press a number from 0 to 9,", 300);
    centerString(gc, fm, "or a letter from A to F)", 320);
    centerString(gc, fm, "v1.2", 350);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:52:14.340

此方法会将组件“绘制”到提供的图形上下文上，它只不过是组件的“橡皮图章”/“快照”，不可能进行交互（无需您自己编码）...

```
public class PaintControls {

    public static void main(String[] args) {
        new PaintControls();
    }

    public PaintControls() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new PaintPane());
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    public class PaintPane extends JPanel {

        private JRadioButton radioButton = new JRadioButton("I'm painted...");

        @Override
        protected void paintComponent(Graphics g) {

            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D) g.create();

            Dimension dim = radioButton.getPreferredSize();
            int x = (getWidth() - dim.width) / 2;
            int y = (getHeight() - dim.height) / 2;

            radioButton.setBounds(x, y, dim.width, dim.height);

            g2d.translate(x, y);
            radioButton.printAll(g);
            g2d.translate(-x, -y);

            g2d.dispose();
        }
    }
} 
```

要将新内容添加到父窗格，请使用容器的“添加”方法，但不要在`paintXxx`方法中执行此操作...

# mysql - 双 CASE 内的多个 COUNT REGEX 匹配以获取两个变量。我可以做得更好吗？

> ID：12888365
> 
> 赞同：0
> 
> 时间：2012-10-15T01:58:25.683
> 
> 标签：mysql

我在 CASES 中使用多个计数来为两个查询结果变量创建排名值。

下面的代码实际上是一个更大查询中的左外连接，正如您可能猜到的那样，它会减慢一点速度。有没有办法改善这一点？我已经完成了这个代码几个小时了，感谢您的帮助。

```
SELECT
U.id,
COUNT(C.assets_animal_name REGEXP 'cats|dogs|birds|rats|horses|cows') AS leMatchesCount,

COALESCE( 
    (CASE 
        WHEN COUNT(C.assets_animal_name REGEXP 'cats|dogs|birds|rats|horses|cows') = 6 THEN 3.33
        WHEN COUNT(C.assets_animal_name REGEXP 'cats|dogs|birds|rats|horses|cows') = 5 THEN 2.75 
        WHEN COUNT(C.assets_animal_name REGEXP 'cats|dogs|birds|rats|horses|cows') < 5 AND COUNT(C.assets_animal_name REGEXP 'cats|dogs|birds|rats|horses|cows') >= 2 THEN 1.11
        WHEN COUNT(C.assets_animal_name REGEXP 'cats|dogs|birds|rats|horses|cows') = 1 THEN 0.55
    END)
, 0) AS leRank1,

IF(MATCH(C.assets_animal_name) AGAINST ("any animal" IN BOOLEAN MODE), 1.11,
COALESCE(
    (CASE 
        WHEN COUNT(C.assets_animal_name REGEXP 'cats|dogs|birds|rats|horses|cows') = 6 THEN 1.11
        WHEN COUNT(C.assets_animal_name REGEXP 'cats|dogs|birds|rats|horses|cows') = 5 THEN 0.88 
        WHEN COUNT(C.assets_animal_name REGEXP 'cats|dogs|birds|rats|horses|cows') < 5 AND COUNT(C.assets_animal_name REGEXP 'cats|dogs|birds|rats|horses|cows') >= 2 THEN 0.37
        WHEN COUNT(C.assets_animal_name REGEXP 'cats|dogs|birds|rats|horses|cows') = 1 THEN 0.18
        END)
, 0)) AS leRank2

FROM
us3r U

LEFT OUTER JOIN assets_animals C ON
C.user_id = U.id AND C.assets_animal_name IN ('cats','dogs','birds','rats','horses','cows')

GROUP BY
U.id 
```

**编辑1：**

查询是即时构建的，我不知道用于排名的参数数量。

在 CASE 内部，4 个 WHEN 行中的每一行都尝试匹配一个动态数字（此处为 6）并将每个匹配项评分为*（在服务器端进行计算，这是一个逻辑输出）*：

```
WHEN = 6 rank = 5.00
WHEN = (6-1) rank = 3.80
WHEN < (6-1) AND > 2 = 2.90
WHEN = 1 rank = 1.11 
```

请注意，在第三行，代码检查**“<”**前一个值但**“>”** 2。

**正如罗斯史密斯二世**指出的那样，在 WHEN 之外使用 COUNT将不允许我在 WHEN 中使用**“<”**之类的操作数。

~~对于前两个和最后一个 WHEN，不需要比较符号，所以嘿，我现在可以计算 6 个而不是 10 个，所以每个 CASE 看起来像这样：~~

```
COALESCE( 
    (CASE COUNT(C.assets_animal_name IN ('cats','dogs','birds','rats','horses','cows'))
        WHEN 6 THEN 3.33
        WHEN 5 THEN 2.75 
        WHEN COUNT(C.assets_animal_name IN ('cats','dogs','birds','rats','horses','cows') < 5 AND COUNT(C.assets_animal_name IN ('cats','dogs','birds','rats','horses','cows') >=2 THEN 1.11
        WHEN 1 THEN 0.55
    END)
, 0) AS leRank1, 
```

~~这个简单的更改节省了一些宝贵的毫秒时间。谢谢。~~

**编辑2：**

我累了。我刚刚写了**“在 WHEN 之外使用 COUNT 将不允许在 WHEN 中使用操作数”**。这意味着在上面的示例中，对于 0 个匹配记录，第三行将是 true。

**编辑3：**

```
C structure: id(INT,P),assets_animal_name(VARCHAR), uid(FK->U)
U structure: id(INT,P), email(VARCHAR) 
```

样本数据：

```
C
1,cats,1
2,dogs,1
3,birds,1
4,birds,2
5,rats,2
6,horses,2
7,cows,2
8,cats,2

U
1, jdoe@aol.com
2, mjoe@aol.com 
```

REGEXP '^(cats|dogs|birds|rats|horses|cows)$' 的结果数据：

```
1, 5, 2.75, 0.88
2, 3, 1.11, 0.37 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:21:14.363

第一的，

```
REGEXP 'cats|dogs|birds|rats|horses|cows' 
```

将匹配`brats`以及`rats`. 你可能想要：

```
IN ('cats','dogs','birds','rats','horses','cows') 
```

也许

```
REGEXP '^(cats|dogs|birds|rats|horses|cows)$' 
```

其次，如果您替换`CASE WHEN x`为`CASE x WHEN`，那将简化一些事情。

最后，我会将最后的 JOIN 子句移到 WHERE，因为它并没有真正加入表。

这是重写的查询：

```
SELECT
    U.id,
    COUNT(C.assets_animal_name IN ('cats','dogs','birds','rats','horses','cows')) AS leMatchesCount,
    COALESCE( 
        (CASE COUNT(C.assets_animal_name IN ('cats','dogs','birds','rats','horses','cows'))
            WHEN 6 THEN 3.33
            WHEN 5 THEN 2.75 
            WHEN 4 THEN 1.11
            WHEN 3 THEN 1.11
            WHEN 2 THEN 1.11
            WHEN 1 THEN 0.55
        END)
    , 0) AS leRank1,
    IF(MATCH(C.assets_animal_name) AGAINST ("any animal" IN BOOLEAN MODE), 1.11,
    COALESCE(
        (CASE COUNT(C.assets_animal_name IN ('cats','dogs','birds','rats','horses','cows'))
            WHEN 6 THEN 1.11
            WHEN 5 THEN 0.88 
            WHEN 4 THEN 0.37
            WHEN 3 THEN 0.37
            WHEN 2 THEN 0.37
            WHEN 1 THEN 0.18
            END)
    , 0)) AS leRank2
FROM
    us3r U
LEFT OUTER JOIN 
    assets_animals C ON
        C.user_id = U.id
WHERE           
    C.assets_animal_name IN ('cats','dogs','birds','rats','horses','cows')
GROUP BY
    U.id 
```

让我们知道这是否有助于提高性能。

# javascript - 在提交时将 Javascript 变量输入表单字段

> ID：12888366
> 
> 赞同：0
> 
> 时间：2012-10-15T01:58:52.717
> 
> 标签：javascript, forms, javascript-events

我几乎可以正常工作，但还不能完全完成。我在预订页面上有一个 jQuery 日期选择器，它以 mm/dd/yyyy 形式输入“到达”字段。我正在使用 Javascript 将其拆分为单独的 mm、dd 和 yyyy 值，我现在正在尝试将这些值反馈到表单上的月、日和年字段，然后再将表单发布到第三方处理站点.

我可以使用 Javascript 成功地为这些字段分配值，但我的挑战是在点击提交按钮*后*实现这一点，因为我需要它来携带用户选择的日期。

为了给你所有相关的部分，这是我的提交按钮：

```
<input type='submit' onclick='toProcess()' name="submitButton" id='submitButton'
value='Check Availability' /> 
```

这是获取日期并将其拆分为三个单独值的函数（在单击“提交”按钮时会正常运行）：

```
function toProcess(){
    var date = document.getElementById("Arrival").value;
    var splitDate = date.split("/");
    var arrivalMonth = splitDate[0];
    var arrivalDay = splitDate[1];
    var arrivalYear = splitDate[2];
    return [arrivalMonth, arrivalDay, arrivalYear];
} 
```

在这里，我使用返回的值来创建变量以反馈到表单中：

```
var newDates = toProcess();
arrivalMonth = newDates[0];
arrivalDay = newDates[1];
arrivalYear = newDates[2]; 
```

到目前为止，一切正常，没有任何问题。通过使用警报，我已经能够看到到目前为止这些值肯定是通过的。但我只是无法让这些值现在反馈到表单中。

我正在尝试这样做：

```
document.getElementById("Month").value = arrivalMonth;
document.getElementById("Day").value =  arrivalDay;
document.getElementById("Year").value =  arrivalYear; 
```

如果我使用在点击提交按钮之前存在的变量，这种方法可以正常工作。我只是无法让*新*价值观发挥作用。

我怀疑问题在于，虽然通过单击“提交”按钮正确调用了该函数，但它后面的元素并没有被执行，因为它们在函数之外。我只是无法弄清楚如何将这些值从函数内部发送回表单字段。

我解释清楚了吗？对此的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:19:55.103

所以基本上，在单击提交按钮时，您准备好的输出不会显示在所需的字段中。

你能把它弄得一团糟吗？

此外，我过去面临的一个问题是我没有意识到提交按钮会刷新页面，因此有效地删除了任何脚本使用。

# ruby-on-rails - 使用 handlebarsjs 作为 Rails 的模板而不是 HAML 或 Slim？

> ID：12888371
> 
> 赞同：4
> 
> 时间：2012-10-15T01:59:27.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml, handlebars.js, slim-lang

我可能希望使用单一模板框架来标准化项目的视图/设计模板。[鉴于我们开始看到可以利用 Handlebars 的 JS 框架的工作，同样开始使用 Handlebars 来代替我们对 HAML 的使用（通过Handlebars.rb](https://github.com/cowboyd/handlebars.rb)和[handlebars_assets](https://github.com/leshill/handlebars_assets) ）似乎是一种谨慎的做法。

从经验上看，这是否有效？或者您能否提供一个链接来解释为什么或为什么不可行，或者提供此类用例的示例？

显然，HAML 和（更性感的）Slim 在大多数情况下提供了更简洁的模板语法，但 Handlebars.js 确实具有它从 Liquid 中继承的优势，因为它更像纯 HTML，因此更“设计师友好”。

# javascript - Google Chrome 扩展，dom 异常为 XMLHttpReqest.open

> ID：12888384
> 
> 赞同：1
> 
> 时间：2012-10-15T02:02:05.880
> 
> 标签：javascript, google-chrome, google-chrome-extension, xmlhttprequest, google-chrome-devtools

我正在开发一个 chrome 扩展，试图将页面的标题和内容发布到服务器，在 popup.js 中使用以下代码，但发现 req.open 抛出 DOMException （无效状态为代码 11）。而且，我已经添加了权限 `"permissions": [ "tabs", "http://*/*", "https://*/*"]`，它仍然有效。我怎样才能解决这个问题？

```
function addBookmark()
{
var req = new XMLHttpRequest();

req.open("POST", "remote_sever_url/quote/new", true);

var params  = "title=" + document.getElementById("title").value + 
            "&text=" + document.getElementById("text").value +
            "&url=" + document.getElementById("url").value + 
            "&tags=" + document.getElementById("tags").value;

req.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
req.setRequestHeader("Content-length", params.length);
req.setRequestHeader("Connection", "close");

req.send(params); 
```

# codeigniter - CodeIgniter Sql 语法不起作用

> ID：12888385
> 
> 赞同：2
> 
> 时间：2012-10-15T02:02:25.370
> 
> 标签：codeigniter

好的，我在这里，直截了当，我需要一些建议

所以在这里我有一些“数据库”的代码点火器问题，这是代码

```
 $as="&amp;";
    $string1="title=";
    $a= $this->input->post('title');
    $string2="category=";
    $b= $this->input->post('category');
    $string3="length_comparison=";
    $c= $this->input->post('length_comparison');
    $string4="length=";
    $d= $this->input->post('length');

    $combine=$string1.$a.$as.$string2.$b.$as.$string3.$c.$as.$string4.$d;

    $this->db->select('*');
    $this->db->from('ci_query');
    $this->db->where('ci_query.query_string',$combine);             
    $query = $this->db->get();
    $rows=$query->result();
    $count=0;

    foreach($rows as $row)
    {
        $count=$count+1;
        $query_id = $row->id;
    }

    if($count==0)
    {
        $query_id = $this->input->save_query($query_array);
    }

    redirect("films/display/$query_id"); 
```

这是逻辑

```
 1\. i got an input from a search form  tittle,category,length_comparison,and length.
 2\. first case these logic will save all those input into a column in a table, all in 1 column, if there is no same parameter
"tittle,category,length_comparison,and length" in the table.
 3\. but if there is any same parameter it will not insert to the table, and just redirect to the page i choose
 4\. from the table we got the id and display instead of using long query string. display the search result. 
```

我的问题：我已经完成了编码，它在我的电脑/PC 上运行良好。但是当我使用我的笔记本电脑时它就是无法工作，任何人都可以给我一些建议吗？还是我的编码？还是ci版本？或者是什么？

更新 ：

我认为这不是问题，因为我已经覆盖了库，所以我有这个来使用那个函数

```
function save_query($query_array) {

    $CI =& get_instance();

    $CI->db->insert('search', array('query_string' => http_build_query($query_array)));

    return $CI->db->insert_id();
}

function load_query($query_id) {

    $CI =& get_instance();

    $rows = $CI->db->get_where('search', array('id' => $query_id))->result();
    if (isset($rows[0])) {
        parse_str($rows[0]->query_string, $_GET);       
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:51:46.310

你需要使用：

```
if($count==0)
{
    $this->db->insert('ci_query', array('query_string' => $combine));
    $query_id = $this->db->insert_id();
} 
```

这样您就插入了正确的数据，并且从数据库中读取了正确的 ID。

# python - 其他线程发送的主线程中的信号如何处理？

> ID：12888386
> 
> 赞同：3
> 
> 时间：2012-10-15T02:02:25.173
> 
> 标签：python, multithreading, signals

代码来自[PyMOTW 信号章节](http://www.doughellmann.com/PyMOTW/signal/index.html#signals-and-threads)。为什么当alarm_thread发出信号时，主线程没有立即处理警报信号。作者的输出显示当警报线程完成（`alarm_thread.join()`返回）时处理警报信号。

```
import signal
import time
import threading

def signal_handler(num, stack):
    print time.ctime(), 'Alarm in', threading.currentThread()

signal.signal(signal.SIGALRM, signal_handler)

def use_alarm():
    print time.ctime(), 'Setting alarm in', threading.currentThread()
    signal.alarm(1)
    print time.ctime(), 'Sleeping in', threading.currentThread()
    time.sleep(3)
    print time.ctime(), 'Done with sleep'

# Start a thread that will not receive the signal
alarm_thread = threading.Thread(target=use_alarm, name='alarm_thread')
alarm_thread.start()
time.sleep(0.1)

# Wait for the thread to see the signal (not going to happen!)
print time.ctime(), 'Waiting for', alarm_thread
alarm_thread.join()

print time.ctime(), 'Exiting normally' 
```

作者的输出：

```
$ python signal_threads_alarm.py
Sun Aug 17 12:06:00 2008 Setting alarm in <Thread(alarm_thread, started)>
Sun Aug 17 12:06:00 2008 Sleeping in <Thread(alarm_thread, started)>
Sun Aug 17 12:06:00 2008 Waiting for <Thread(alarm_thread, started)>;
Sun Aug 17 12:06:03 2008 Done with sleep
Sun Aug 17 12:06:03 2008 Alarm in <_MainThread(MainThread, started)>
Sun Aug 17 12:06:03 2008 Exiting normally 
```

在我看来，输出应该如下所示。报警信号应该由主线程处理，`before`报警线程休眠完成，并`alarm_thread.join()`返回。

```
$ python signal_threads_alarm.py
Sun Aug 17 12:06:00 2008 Setting alarm in <Thread(alarm_thread, started)>
Sun Aug 17 12:06:00 2008 Sleeping in <Thread(alarm_thread, started)>
Sun Aug 17 12:06:00 2008 Waiting for <Thread(alarm_thread, started)>;
Sun Aug 17 12:06:03 2008 Alarm in <_MainThread(MainThread, started)>
Sun Aug 17 12:06:03 2008 Done with sleep
Sun Aug 17 12:06:03 2008 Exiting normally 
```

# c++ - c++ 使用友好类的类型作为模板参数声明 stl 向量

> ID：12888387
> 
> 赞同：0
> 
> 时间：2012-10-15T02:02:35.317
> 
> 标签：c++, templates

我有以下代码：

```
template <typename T>
class A {
    friend class B;
    struct model_struct {
       [...]
    }
}

template <typename T>
class B {
    func {
        typename vector<A<T>::model_struct > myVec;
    }
} 
```

矢量声明给了我以下编译错误：

错误：“模板类 std::vector”的模板参数列表中参数 1 的类型/值不匹配</p>

错误：需要一个类型，得到 'ObjectExtraction::model_struct'</p>

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:12:04.117

似乎缺少三件事：

*   类定义末尾的分号
*   朋友声明中的模板参数
*   声明中的`typename`说明符`vector`

后者是导致错误的问题。

我不确定`func {...}`定义中的 the 是做什么的`B`；您可能需要考虑删除它。

最后，您需要`B`模板的前向声明，因此您实际上可以将它用于`A`.

这是更正代码的尝试：

```
template <typename T>
class B; // Forward-declaration

template <typename T>
class A {
    friend class B<T>;  // template argument added
    struct model_struct {
       /*...*/
    };  // added semicolon
}; // semicolon added

template <typename T>
class B {
   /* Removed 'func'. */
   typename vector<typename A<T>::model_struct > myVec; // 'typename' added
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T02:12:19.870

你应该这样修改：

```
template <typename T>
class A {
    friend class B;
    struct model_struct {
       [...]
    }
}

template <typename T>
class B {
    func {
        vector<typename A<T>::model_struct > myVec;
    }
} 
```

# java - 表单输入文件的弹簧注释验证

> ID：12888391
> 
> 赞同：2
> 
> 时间：2012-10-15T02:03:07.250
> 
> 标签：java, spring, validation

> **可能重复：**
> [Spring MultipartFile 验证和转换](https://stackoverflow.com/questions/7161215/spring-multipartfile-validation-and-conversion)

我需要检查用户是否从 jsp 页面提供了文件。

代码如下。

当我在调试模式下运行时，文件（MultiPartFile）不为空，尽管未提供该文件。

我想对所有内容使用基于注释的验证。

任何帮助，将不胜感激。

```
 <form:form modelAttribute="timeStampIssueParam"
        action="${pageContext['request'].contextPath}/timestamp/issue"
        method="post" enctype="multipart/form-data">
        <fieldset>
            <p>
                <form:label for="file" path="file">PDF Original</form:label>
                <br />
                <form:input path="file" type="file"/>
            </p>
            <p>

    @NotNull
    private List<MultipartFile> file

    public void issue(HttpServletResponse response, @Valid TimeStampIssueParam tsIssueParam, BindingResult result) throws JsonGenerationException, JsonMappingException, IOException { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:26:33.880

我认为没有为此目的内置验证器。因此，您需要构建自己的：

```
@Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER })
@Retention(RUNTIME)
@Constraint(validatedBy = { OneFileItemValidator.class })
@Documented
public @interface OneFileItem {

    String message() default "{OneFileItem.message}";

    Class<?>[] groups() default { };

    Class<? extends Payload>[] payload() default { };
} 
```

验证者：

```
public class OneFileItemValidator
       implements ConstraintValidator<OneFileItem, List<MultipartFile>> {

    @Override
    public void initialize(final OneFileItem constraintAnnotation) {
    }

    @Override
    public boolean isValid(final List<MultipartFile> value, final ConstraintValidatorContext context) {

         //Ignore null values like the most other validators
         if (value == null) return true;

         int foundCounter = 0;
         for (MultipartFile multipartFile : value) {
            if (multipartFile.getSize() > 0) 
               foundCounter++);                
        }
        return foundCounter == 1;
    }
} 
```

用法：

```
/** Command Object / Form Backing Class */
class TimeStampIssueParam {

    @NotNull
    @OneFileItem
    private List<MultipartFile> file;

} 
```

*我是在没有 IDE 的情况下编写的，因此其中可能存在一些语法错误。*

# sql - SQL IN 运算符查询

> ID：12888398
> 
> 赞同：0
> 
> 时间：2012-10-15T02:05:20.383
> 
> 标签：sql, operator-keyword

我对 sql IN 查询有疑问。例如，您有一个包含列 id、数量名称的表。

通过查询：

```
 SELECT SUM(amount) FROM table WHERE id IN (101,101); 
```

我想要的是添加一定数量的 id。无论 id 在 IN 语句中是什么。这样的话，两个101，数量101+数量101。

问题是它认为这是一个例子。我该怎么做呢？它的假设是：

```
 SELECT SUM(amount) FROM table WHERE id IN (SELECT id FROM table.........); 
```

其中子选择返回“101, 101”。

如何

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:38:28.097

```
SELECT SUM(tbl.amount)
FROM tbl
JOIN (select 101 id UNION ALL
      select 101) InList on InList.id = tbl.id 
```

以此方式展开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T02:40:57.820

我做这样的事情

```
Select * From table1
inner join dbo.fnSplit(@ArgList, ',') 
```

那肯定对我有用

# android - 对话框中的 WebView

> ID：12888406
> 
> 赞同：9
> 
> 时间：2012-10-15T02:06:25.547
> 
> 标签：android, android-webview, android-dialog

我有一个应用程序，我需要在 webview 中加载一个小网页。webview 需要在对话框中加载。我试图实现它；但每次加载一个空对话框并且其中似乎没有内容时。我使用的代码如下

```
Uri uri = Uri.parse(item.getLink());
Dialog dialog = new Dialog(this);
LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View v = inflater.inflate(R.layout.webviewdialog, null);
dialog.setContentView(v);
dialog.setCancelable(true);
WebView wb = (WebView) v.findViewById(R.id.webView1);
wb.loadUrl(uri.toString());
dialog.show(); 
```

我也试过直接在 loadUrl 中输入 url，但我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-15T03:28:52.510

试试这个：

```
 WebView webView = new WebView(this);
    webView.loadUrl("http://www.google.com/");
    AlertDialog.Builder dialog = new AlertDialog.Builder(this);
    dialog.setView(webView);
    dialog.setPositiveButton("Okay", null);
    dialog.show(); 
```

# bash - (Bash) $user@aol.com 电子邮件可用性检查器

> ID：12888407
> 
> 赞同：0
> 
> 时间：2012-10-15T02:06:35.453
> 
> 标签：bash, aol

因此，我正在尝试在 bash 中设置一个脚本，以向 aim.com 的注册表单发送请求，它允许您检查是否可以像这样创建 ID：

[https://new.aol.com/productsweb/?promocode=827692&ncid=txtlnkuswebr00000073](https://new.aol.com/productsweb/?promocode=827692&ncid=txtlnkuswebr00000073) - 选择用户名

如果 $user = 可用，则 $continue; 否则显示“对不起，该用户名不可用。”。

一旦这个概念被打破，我会让它通过一个大约 100 个好的列表运行，看看是否可以重新制作这些中的任何一个。

如果有人能指出我的起始方向，那就太棒了！感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:20:23.543

查看引用的页面，当您单击按钮时，它会向以下 URL`Check`发送请求：`POST`

[https://new.aol.com/productsweb/subflows/ScreenNameFlow/AjaxSNAction.do](https://new.aol.com/productsweb/subflows/ScreenNameFlow/AjaxSNAction.do)

使用以下（必需）参数：`s`. 此参数需要设置为您要测试的用户名。

如果用户名存在，则会出现“ *reloadEverything* ”消息。如果用户名不存在，则会出现“ *toggleSNField* ”消息。

如果您想要一个真正的“*对不起，该用户名不可用。* ”消息而不是“reloadEverything”，请添加另外两个参数：`l`和`f`- 并且它们都需要*也是*您正在测试的用户名。

为此，您可以遍历您的用户名列表并对`POST`每个用户名发出请求，然后只解析与上述字符串匹配的响应（*reloadEverything*字符串比这更长 - 所以您可以只进行子字符串匹配）。

# iphone - 使用 UIImagePickerController 时如何禁用人脸检测？

> ID：12888410
> 
> 赞同：5
> 
> 时间：2012-10-15T02:06:50.243
> 
> 标签：iphone, ios, camera, uiimagepickercontroller, face-detection

我意识到这是一个[骗局](https://stackoverflow.com/questions/12315260/uiimagepickercontroller-disable-iphone-4s-face-detection-ios-5-1 "欺骗")，但这个问题从未得到解答，我在 iOS 6 中看到了相同的行为。

我在 UIImagePickerController 中找不到任何允许我禁用在面部周围绘制绿色框的设置。

我应该使用不同的类来访问相机吗？

提前致谢， LT

# scheme - 方案逻辑反转

> ID：12888411
> 
> 赞同：0
> 
> 时间：2012-10-15T02:06:58.863
> 
> 标签：scheme, boolean, logic, operator-keyword

我是 SCHEME 的新手，刚刚开始。

我在 (cond 语句中) 有以下语句

```
((number? (list-ref inputList 0)) (display "First element is not a number")) 
```

我的问题是，如果语句为真，我需要它返回 FALSE，我该如何反转逻辑？

例如在 Java 中它会是 (!(a==b)) 或类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T02:09:58.663

使用`not`功能：

```
((not (number? (list-ref inputList 0))) (display "First element is not a number")) 
```

# java - 重载最终字符串是可能的吗？

> ID：12888413
> 
> 赞同：-4
> 
> 时间：2012-10-15T02:07:17.217
> 
> 标签：java, overloading

我创建了一个有 2 个方法的类，一个可以带 3 个参数，另一个可以带 4 个 .. 所有参数声明为 final ..

然后我写了这个

```
 if (b == "Select") {
        myobj.print(a, b, c, d);
    } else {
        myobj.print(a, b, c);
    } 
```

它不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:09:10.407

`String`是不可变的，你不能改变它们。

除非您使用`String`文字，否则您应该始终使用`.equals()`or`.equalsIgnoreCase()`而不是`==`to compare `Strings/objects`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:51:12.583

是的，带有额外 String 参数的方法的重载是：

*   可能的，
*   有效的 Java，以及
*   有用。

我的钱是基于您的问题与重载无关的理论，实际上是由于您错误地使用`==`来测试两个字符串是否相等。

# c# - 使用 Oracle 为十进制值生成 IN 语句

> ID：12888418
> 
> 赞同：2
> 
> 时间：2012-10-15T02:08:15.010
> 
> 标签：c#, oracle, entity-framework, linq-to-entities

我无法让 LINQ 生成 IN 语句。我有一个看起来像下面的函数，将一个长列表作为输入，表示要查找的主键。使用 contains 方法最终会生成复合 OR 语句的查询。我们正在针对 Oracle 数据库运行。我们正在使用最新版本的 LINQ/EF。QueryableDbSet 是一个 DbSet。PrimaryKey 属性是一个十进制值，是 Oracle 中对象的主要整数标识符。

```
List<long> GetList(List<long> ids)
{
    List<decimal> dIds = ids.Select(x => (decimal)x);
    var query = from c in QueryableDbSet
                where dIds.Contains(c.PrimaryKey)
                select (long)c;
    return query.ToList();
} 
```

上面的代码将生成复合 OR 语句。有谁知道如何让 LINQ 生成更快的 IN 语句？谢谢。

编辑：做更多的研究，Oracle 似乎实际上将 IN 语句转换为 OR 链，所以这可能是徒劳的练习。任何人都可以确认或否认这一点吗？

另外，我知道上述功能完全没有意义/多余。我的实际用例更复杂，并且在 where 子句中涉及其他条件。

# eclipse-plugin - 关于自定义 eclipse java 编辑器的建议

> ID：12888419
> 
> 赞同：1
> 
> 时间：2012-10-15T02:08:15.727
> 
> 标签：eclipse-plugin, eclipse-rcp

我想构建一个包含三个主要组件的自定义 Java 编辑器：

1.  一个网络浏览器（大约一半的屏幕）
2.  带有代码辅助和语法突出显示的 Java 编辑器以及标准 Java 编辑器中的所有其他内容（大约屏幕的另一半）
3.  带有“确定”和“取消”按钮的小面板（底部的一小部分）

我需要在编辑器中捕捉击键和操作文本，但它不需要存储在文件中。我更愿意将所有文本保存在内存中，而不用担心磁盘上有文件。

我可以扩展 EditorPart 类并添加一个 SWT 浏览器组件和按钮（以处理 1 和 3），但 SWT Text 组件是一个简单的多行文本区域，没有任何 java 编辑器功能。

我可以扩展其中一个 TextEditor，但我不知道是否可以添加浏览器和按钮并仍然获得 Java 编辑器的好东西。

我的问题是，是否有可能构建我上面描述的内容？我已经花了很多时间尝试，到目前为止我还没有多少运气。如果可以做到，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:06:34.343

我建议您使用 Java 编辑器（JDT），而不是从头开始使用文本区域构建 Java 编辑器。您只需要覆盖`createPartControl(Composite parent)`和添加`browser`其他`button`控件。

# html - 如何使小程序不在html中浮动

> ID：12888420
> 
> 赞同：0
> 
> 时间：2012-10-15T02:08:23.713
> 
> 标签：html, internet-explorer, applet, z-index

我希望小程序不在 html 中浮动。

当我打开一个 jQuery 模式窗口时，该窗口位于小程序组件的后面。

现在，我怎样才能使小程序与常规的 html 文本、输入、按钮等处于同一层...以便 jQuery 模式窗口位于小程序的顶部？

我已经尝试过：`z-index: -1`但`z-index: -99999`它不起作用。

浏览器使用：IE7和IE9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:58:08.713

最简单的方法是使用 iframe 在小程序上方浮动内容。

我在同一条船上，我们必须使用 Java 小程序与大型机系统进行通信。我们需要在弹出窗口中显示动态内容，而我能够做到这一点的唯一方法是使用 iframe。

**CSS：**

```
.popover {

    position: absolute;
    top: 65px;
    left: 10px;
    /*z-index: 999;*/

    border: none;
    border-radius: 10px 10px 10px 10px;
    box-shadow: 0px 10px 15px 0px rgba(140, 140, 140, .9);
} 
```

**HTML：**

```
<iframe class="popover"></iframe> 
```

**注意：**当浮动在 java 小程序上时，border-radius 和 box-shadow 在 Firefox 或 chrome 中无法正常工作。透明度也是一个问题，但 Chrome 似乎比 Firefox 更好地处理这三个问题。

# html - 没有空格的linebox从其父元素的宽度溢出

> ID：12888424
> 
> 赞同：1
> 
> 时间：2012-10-15T02:09:52.437
> 
> 标签：html

```
<!DOCTYPE HTML>
<html>
<head>
<style>
    #test{
        width: 10px;
        background-color: blue;
    }
</style>
</head>
<body>

<p id="test">a a a a a a a a a</p> 
```

在此示例中，行框遵循#test 的宽度

```
<!DOCTYPE HTML>
<html>
<head>
<style>
    #test{
        width: 10px;
        background-color: blue;
    }
</style>
</head>
<body>

    <p id="test">aaaaaaaaaaaaaaaaa</p>

</body>
</html> 
```

但是使用第二个代码，行框从 #test 的宽度溢出

线框之间的空间怎么处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:20:34.020

我认为你可以使用

```
#test{
    ...
    word-wrap:break-word;
} 
```

[**DEMO**](http://jsfiddle.net/uXHSQ/)也看到[**了这个**](http://jsfiddle.net/uXHSQ/3/)。

# c# - 模型的 C# XNA 法线、漫反射和镜面反射？

> ID：12888433
> 
> 赞同：1
> 
> 时间：2012-10-15T02:12:11.533
> 
> 标签：c#, xna, normals

我是 XNA 的初学者，在一个基本的 3D 游戏中试试运气。

我有一些非常有才华的 3D 建模师支持我，虽然我在将 .fbx 文件（模型本身）导入 XNA 中的基本 3D 世界时遇到问题，但我不知道如何包含它们的法线贴图、漫反射和镜面反射'已经包含在他们的模型中。

法线、漫反射和镜面反射都是 .tga 图像文件格式，我不知道如何将它们添加到我的模型绘图中。

现在我绘制 3D 对象的代码如下：

```
 private void DrawObject(Model spaceStation, Matrix world, Matrix view, Matrix projection)
        {
            foreach (ModelMesh mesh in spaceStation.Meshes)
            {
                foreach (BasicEffect effect in mesh.Effects)
                {
                    effect.World = world;
                    effect.View = view;
                    effect.Projection = projection;
                }
                mesh.Draw();
            }
        } 
```

# java - 优秀的 Java 网页渲染库

> ID：12888436
> 
> 赞同：1
> 
> 时间：2012-10-15T02:12:58.567
> 
> 标签：java, html, html-parsing, rendering

我需要一个好的页面渲染库，以便我可以从网页中提取所有链接（包括锚文本、底层超链接、链接在页面上的绝对位置）。

我一直在使用 CSSBox 库，但是渲染的框模型中缺少 href 属性。换句话说，我只能单独使用 CSSBox 获取链接的锚文本和位置。我必须利用锚文本和另一个 html 解析库（例如，Jsoup）来获取 href 属性（即，事实上的 URL）。

有没有什么图书馆可以更好地实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:21:25.813

## 推荐

考虑使用[Geb](http://www.gebish.org/)：

> 它汇集了 的力量`WebDriver`、内容选择的优雅、建模`jQuery` 的稳健性和语言的表现力。`Page Object``Groovy`
> 
> 它可以用于脚本、抓取和一般自动化——或者通过与测试框架（如`Spock`, `JUnit`& `TestNG`.

## 要求

如前所述，这仅适用于您愿意使用[Groovy](http://groovy.codehaus.org/)的情况。但是，由于 Groovy 很容易与 Java 集成，所以这通常不是问题。

此外，这将需要一个浏览器。我不确定这对你来说是否会破坏交易。

## 用法

从[文档](http://www.gebish.org/manual/current/navigator.html#size_and_location)：

> 您可以获取页面上内容的大小和位置。所有单位都以像素为单位。大小可以通过 height 和 width 属性获得，而 location 可以通过 x 和 y 属性获得，它们表示从页面（或父框架）左上角到内容左上角的距离。

例如：

```
Browser.drive {
  // Load the page
  go "http://myapp.com"

  // $("a") returns all hyperlinks on the page, similar to jQuery
  $("a").each { a ->
     // Display the required link properties and attributes
     println """
        The link to '${a.@href}' with text '${a.text()}' is at location (${a.x}, ${a.y}),
        with a height of ${a.height}px and a width of ${a.width}px.
     """
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:51:59.653

你可以很容易地用[CSSBox做到这一点。](http://cssbox.sourceforge.net/)每个`ElementBox`实例都有`getElement()`获得相应 DOM 元素的 。`a`这意味着，拥有一个表示呈现链接的元素框，您可以使用`a.getElement().getAttribute("href")`. [另请参阅CSSBox 讨论论坛](http://sourceforge.net/p/cssbox/discussion/752160/thread/6664381a/)中的相关主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T02:17:14.740

**编辑**

如果您需要解析器，以便您可以查看 HTML 页面的所有链接并做任何您需要做的事情，我推荐 Jericho。

[Jericho HTML Parser](http://jericho.htmlparser.net/docs/index.html)是一个 java 库，允许分析和操作 HTML 文档的各个部分，包括服务器端标签，同时逐字复制任何无法识别或无效的 HTML。它还提供高级 HTML 表单操作功能。

它既简单又小巧，性能也不错

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T02:22:08.213

您可能想看看[http://htmlunit.sourceforge.net](http://htmlunit.sourceforge.net)。它不是一个渲染器，而是一个无 GUI 的浏览器。它甚至支持各种 JavaScript 引擎和 ActiveX。

但是我很确定您不能使用它来跟踪任何元素的位置，因为它实际上并没有呈现网页。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T03:06:42.370

JavaFX 的 WebEngine 可能适合您：[http ://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html)

我不会称它易于使用或轻量级，但请看一看。

# r - R配对列索引

> ID：12888438
> 
> 赞同：4
> 
> 时间：2012-10-15T02:13:08.443
> 
> 标签：r

假设我有两个矩阵 A 和 B：

```
mth <- c(rep(1:5,2))
day <- c(rep(10,5),rep(11,5)) 
hr <- c(3,4,5,6,7,3,4,5,6,7)  
v <- c(3,4,5,4,3,3,4,5,4,3)  
A <- data.frame(cbind(mth,day,hr,v))

year <- c(2008:2012)
mth <- c(1:5)  
B <- data.frame(cbind(year,mth)) 
```

我想要的应该是这样的：

```
mth <- c(rep(2008:2012,2))  
day <- c(rep(10,5),rep(11,5))  
hr <- c(3,4,5,6,7,3,4,5,6,7)  
v <- c(3,4,5,4,3,3,4,5,4,3)  
A <- data.frame(cbind(mth,day,hr,v)) 
```

基本上我需要的是用B中的列年份更改A中的第m列，也许我没有搜索正确的关键字，我无法得到我想要的（我试过which（）），请帮忙，谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T02:19:54.630

```
A2 <- merge(A,B, by = "mth")[ , -1]
names(A2)[(which(names(A2)=="year"))] <- "mth"
> A2
   day hr v  mth
1   10  3 3 2008
2   11  3 3 2008
3   11  4 4 2009
4   10  4 4 2009
5   11  5 5 2010
6   10  5 5 2010
7   11  6 4 2011
8   10  6 4 2011
9   10  7 3 2012
10  11  7 3 2012 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T02:23:13.257

可能最简单的解决方案是使用`merge`，它在很多方面相当于 sql 连接：

```
merge(A,B)
#-----
merge(A, B)
   mth day hr v year
1    1  10  3 3 2008
2    1  11  3 3 2008
3    2  11  4 4 2009
4    2  10  4 4 2009
5    3  11  5 5 2010
6    3  10  5 5 2010
7    4  11  6 4 2011
8    4  10  6 4 2011
9    5  10  7 3 2012
10   5  11  7 3 2012 
```

您也可以`match`像这样使用来替换 mth ：

```
A$mth <- B[match(A$mth, B$mth),1]
#-----
    mth day hr v
1  2008  10  3 3
2  2009  10  4 4
3  2010  10  5 5
4  2011  10  6 4
5  2012  10  7 3
6  2008  11  3 3
7  2009  11  4 4
8  2010  11  5 5
9  2011  11  6 4
10 2012  11  7 3 
```

虽然有点密集，但该代码`B`通过匹配两`mth`列来索引`A`，`B`然后抓取第一列。+

# php - 如何将 php 带入我的 html 文件以及在哪里存储 php 文件？

> ID：12888440
> 
> 赞同：0
> 
> 时间：2012-10-15T02:13:16.060
> 
> 标签：php, html, expression-web

我对网络开发非常陌生，对于一个可能看起来很愚蠢的问题，我深表歉意。

我正在使用表达式网络来创建我网站的大部分化妆品，并且我正在使用 php 进行编码。我已经有资源并了解了 php，但我是新手。我希望能够让我的网站的特定部分由 php 代码生成。例如，登录框和用户配置文件。我该如何制作我的 html 文件使用这些文件来生成内容，我将 html 页面将使用的 php 文件放在哪里？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:18:45.893

更简单的方法是为您想要的所有内容创建一个单独的 PHP 文件：loginBox.inc.php、header.php 等。然后将您的 html 页面更改为 php（只是扩展名），然后在您要添加登录框的任何位置， 做就是了：

```
<?php include ('loginBox.inc.php') ?> 
```

并且该文件中的所有 php 代码都将包含在内。我想这就是你想要的。为了更好地维护代码，请将所有这些文件放在一个名为**include**或类似的文件夹中，以便以更好的方式组织文件。

# php - 警告用户而不刷新 PHP 中的页面

> ID：12888441
> 
> 赞同：1
> 
> 时间：2012-10-15T02:13:48.607
> 
> 标签：php, javascript, ajax

我有一个 php 代码，当用户删除记录时会发出警报，但它会在发出警报时刷新页面，然后背景页面变为空白，这似乎很烦人。不刷新页面怎么办？下面是我名为 deleteuser.php 的示例代码。

```
<?
include 'mysqlcon.php'; // my connection credentials to php

$postudel = $_POST['enterudel'];

if($postudel!="")
    {
    $sqldel = "DELETE FROM User WHERE UserName = '$postudel'";
    $getdel = mysql_query($sqldel,$con) or die(mysql_error());
    echo "<script language='javascript'>";
    echo "alert('User $postudel successfully deleted.');";
    echo "</script>";
    }
?>

<html>
<head>
<title>Delete User</title>

<SCRIPT language=JavaScript>
function deluser()
{
var r=confirm("Are you sure you want to do this?");
if (r==true)
    {
    var objsel = document.getElementById("duser");
    var udel = objsel.options[objsel.selectedIndex].id;
    document.formdel.enterudel.value = udel;
    document.formdel.submit();
    }
    else
    return false;
}
</script>
</head>

<body>
<table width="50%" align="left">
<tr><td width="50%" colspan="2">
<big>Delete User:</big>
</td></tr>

<tr><td width="25%">
Username:&nbsp;
<SELECT id="duser">
<option>Choose One</option>
<?
$sqldu=mysql_query("SELECT UserName from User");

while($row=mysql_fetch_array($sqldu))
{
    echo "<OPTION ID=".$row['UserName'];
    echo ">".$row['UserName']."</OPTION>";
}
?>
</SELECT>
</td>

<td width="25%">
<input type="button" value="Delete" id="delete" onClick="deluser()">
</td></tr>
</table>

<form name="formdel" action="../deleteuser.php" method="post">
<input type="hidden" name="enterudel" value="<?=$postudel?>">
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:28:13.890

分裂

```
if($postudel!="")
    {
    $sqldel = "DELETE FROM User WHERE UserName = '$postudel'";
    $getdel = mysql_query($sqldel,$con) or die(mysql_error());
    echo "<script language='javascript'>";
    echo "alert('User $postudel successfully deleted.');";
    echo "</script>";
    } 
```

分为两部分：

```
if($postudel!="")
    {
    $sqldel = "DELETE FROM User WHERE UserName = '$postudel'";
    $getdel = mysql_query($sqldel,$con) or die(mysql_error());
    } 
```

现在在哪里，并且

```
<?
if($postudel!="")
    {
    echo "<script language='javascript'>";
    echo "alert('User $postudel successfully deleted.');";
    echo "</script>";
    }
?> 
```

之前`</body>`。然后你将删除并绘制警报之前的页面，避免空白页面

# iphone - writeToFile 原子地返回 NO

> ID：12888445
> 
> 赞同：5
> 
> 时间：2012-10-15T02:14:37.037
> 
> 标签：iphone, objective-c, ios, ipad

我有以下代码：

```
NSString *errorStr = nil;
NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:dict
                                                               format:NSPropertyListBinaryFormat_v1_0
                                                     errorDescription:&errorStr];
if (errorStr) {
    // Darn.
    NSLog(@"saving dictionary error %@", errorStr);
} else {
    // [plistData writeToFile:file atomically:YES];
    // (ankit): Changing this to NO for speed.
    success = [plistData writeToFile:file atomically:NO];
} 
```

但是，对于以下字典，这将返回 NO：

```
 {
    entries = (
                {
            author = "Jada Wong";
            cellIdentifier = default;
            date = "2012-10-15 02:22:41 +0000";
            domain = Readability;
            feedUrl = "readability://feed";
            imagesAreOnPulsesubscriber = 0;
            order = 0;
            summary = "";
            templateUrl = "default_template.html";
            title = "We\U2019re Going To Try Out Dolce & Gabbana\U2019s Beauty Look This Weekend";
            url = "http://www.styleite.com/media/styledish-10122012/";
        }
    );
} 
```

但它适用于以下字典：

```
{
    entries =     (
                {
            author = "Colleen Taylor";
            cellIdentifier = default;
            date = "2012-10-15 01:00:05 +0000";
            domain = TechCrunch;
            domainUrl = "http://techcrunch.com";
            feedUrl = "http:/asdasdm/TechCrunch";
            images =             (
                "http://asdshot-2012-10-14-at-5-20-43-pm.png"
            );
            imagesAreOnPulsesubscriber = 1;
            lastUpdated = 1350263095;
            order = 0;
            shortLink = "http://bete.me/s/ej2Tg";
            summary = "Bonobos, the men's clothing company, has gained lots of ground since it was founded in 2007 for its presence on the web as a mostly pure e-commerce p...";
            templateUrl = "default_template.html";
            title = "Inside Bonobos\U2019 New Palo Alto Digs, Where The Startup Known For E-Commerce Is Investing In Bricks & Mortar";
            url = "http://techcrunch.com/2012/10/14/bonobos-palo-alto-mike-hart/";
        }
    );
} 
```

知道为什么吗？它适用于不同的字典我要写入的文件路径是：

```
/var/mobile/Applications/4B60A704-BE00-4160-BFB4-AD89187FADD1/Library/Caches/StoryCache/readability:  feed 
```

我得到的错误是：

```
"The operation couldn\u2019t be completed. (Cocoa error 512.)" UserInfo=0xb41580 {NSFilePath=/var/mobile/Applications/4B60A704-BE00-4160-BFB4-AD89187FADD1/Library/Caches/StoryCache/readability:  feed, NSUnderlyingError=0xbb8930 "The operation couldn\u2019t be completed. Is a directory"} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-15T02:26:27.050

使用`writeToFile:options:error:`代替，`writeToFile:atomically:`以便您可以记录错误代码。

```
NSError *error;
success = [plistData writeToFile:file options:0 error:&error];
if (!success) {
    NSLog(@"writeToFile failed with error %@", error);
} 
```

### 更新

根据您粘贴到问题中的错误，我猜您已经有一个名为`/var/mobile/Applications/4B60A704-BE00-4160-BFB4-AD89187FADD1/Library/Caches/StoryCache/readability: feed`. 您不能用文件覆盖目录。您需要先重命名或删除目录。您可以使用`-[NSFileManager removeItemAtPath:error:]`递归删除目录及其所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-31T22:12:48.653

我不小心写了 NSURL.absoluteString 作为 writeToFile: 的参数。确保你做 NSURL.path 而不是 NSURL.asboluteString ！！！！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-31T06:58:59.650

原因是 "" 并且 Dictionary 的 NSNull 值不允许保存到文件。在你的情况下 :"summary = "";" 所以，writetofail 返回 NO。

# scala - scalatest 中的 assertEquals

> ID：12888447
> 
> 赞同：5
> 
> 时间：2012-10-15T02:14:47.037
> 
> 标签：scala, testing

我想在scalatest中使用类似于jUnit的`assertEquals`东西。

框架是实现它还是它只是提供`assert`并且我应该`assertEquals`从 jUnit 本身使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T06:52:54.670

有“断言”方法，例如

```
class EqualsTest extends FunSuite {
  test("equals") {
    assert(1 === 1)
    assert(2 === 2, "The reason is obvious")
  }
} 
```

请注意使用三等号，当测试失败时，它会提供比双等号更好的错误消息。此外，如果测试失败，第二种情况提供了要打印的提示。最好使用它来包含一些原本不明显的数据值，例如，如果使用循环进行测试，则循环计数。

然后是 ShouldMatchers 方法，例如

```
class EqualsTest extends FunSuite with ShouldMatchers {
  test("equals") {
    1 should be (1)
  }
} 
```

这通常是首选，因为它易于阅读。然而，学习使用它只是有点困难——API 中有一些角落和缝隙。而且你不能提出暗示解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:15:40.627

ScalaTest 的一大优点是它不会强迫您按照自己的方式做事——它允许您选择最适合您的特定情况和偏好的方法。除了您已经收到的其他答案中的方法外，还有（以及我个人的偏好）：

```
class EqualsTest extends FunSuite {
  test("equals") {
    expectResult(1) { 1 }
  }
} 
```

（请注意，`expectResult`在`expect`ScalaTest 1.x 中）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-02-06T19:06:44.620

```
assert(Actual.equals(Expected)) 
```

# android - android如何从读取NFC标签中获取NDEF消息有效负载的最大大小

> ID：12888448
> 
> 赞同：2
> 
> 时间：2012-10-15T02:14:57.360
> 
> 标签：android, nfc, ndef

我正在开发一个 android 应用程序来写入 nfc 标签的特定内存位置。而且我需要通过读取 NFC 标签来获取 NDEF 消息有效负载的最大大小，以便我可以在该范围内定义内存位置。

我知道它可以通过下面的代码获得整个 ndef 内存大小：

Ndef ndef = Ndef.get(tag); int size = ndef.getMaxSize();

有什么方法可以获得最大有效载荷大小吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-05T06:44:32.783

如果我对您的理解正确，您想知道可以在 NDEF 消息中的单个 NDEF 记录中发送的最大数据量。

答案取决于您使用的 NDEF 记录格式。我正在使用外部记录类型，它的有效负载最后只有一堆字节。据我所知，没有简单的方法可以得到它，因为它取决于您个人的域/类型字段长度，所以我实际上创建了一个“空”记录（实际上，其中有一些数据是为了获取更长的字段格式），然后从最大值中减去其长度。

最大整体 NDEF 消息长度由兼容性容器指定，在第一次接触时从标签或设备读取，这因标签而异。Android 让我们可以使用`ndefTag.getMaxSize();`（`ndefTag`您从意图中获得的标签在哪里）

这是我正在使用的方法（我允许不同的发送和接收长度）：

```
//here we make some sample transmissions that we convert to work out the max length of data we can send
int test_payload_len = 300; //need to make this >255 to ensure the longer length field format is used
NdefMessage testDeviceNdef = new NdefMessage(NdefRecord.createExternal(CommandConsts.deviceDomain, CommandConsts.deviceType, test_data)); //the domain and type strings are defined elsewhere
NdefMessage testTerminalNdef = new NdefMessage(NdefRecord.createExternal(CommandConsts.terminalDomain, CommandConsts.terminalType, test_data));

maxNdefDeviceSendLength = ndefTag.getMaxSize() - (testDeviceNdef.getByteArrayLength() - test_payload_len); 
maxNdefTerminalSendLength = ndefTag.getMaxSize() - (testTerminalNdef.getByteArrayLength() - test_payload_len) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T02:20:35.413

规范允许的最大有效载荷大小为 2^32-1

[http://developer.android.com/reference/android/nfc/NdefRecord.html](http://developer.android.com/reference/android/nfc/NdefRecord.html)

[您可以使用getPayload](http://developer.android.com/reference/android/nfc/NdefRecord.html#getPayload%28%29)获取可变长度的有效负载及其大小

# java - name 属性似乎在 Field 中不起作用

> ID：12888451
> 
> 赞同：2
> 
> 时间：2012-10-15T02:15:53.397
> 
> 标签：java, hibernate, jpa

当我尝试使用 JPA（Hibernate 实现）将实体映射到表时，我发现了一些令人困惑的东西

当我在 getter 上使用注释时，一切正常

```
@Column(name = "main_battery_voltage", precision = 2)
public float getMainBatteryVoltage() {
    return mainBatteryVoltage;
} 
```

但是当我在字段上尝试相同的事情时，会使用字段名称和属性

```
@Column(name = "main_battery_voltage", precision = 2)
private float mainBatteryVoltage; 
```

系统忽略名称属性，在 DB 中使用列名 mainBatteryVoltage 运行，因此任务失败。

我正在使用 MySQL，这是 persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="2.0">
    <persistence-unit name="SolarPersistenceUnit">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <class>com.cs.solar.db.entity.User</class>
        <class>com.cs.solar.db.entity.Lamp</class>
        <class>com.cs.solar.db.entity.Project</class>
        <properties>
            <property name="hibernate.dialect"     value="org.hibernate.dialect.MySQL5Dialect"/>
            <!--<property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>-->
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/SOLAR"/>
            <property name="hibernate.connection.username" value="root" />
            <property name="hibernate.connection.password" value="admin" />
            <property name="hibernate.connection.autocommit" value="false"/>
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.format_sql" value="true" />
            <property name="hibernate.max_fetch_depth" value="3"/>
        </properties>
    </persistence-unit>
     <persistence-unit name="TestSolar" />
</persistence> 
```

虽然现在可以了，但我很好奇是什么导致了这个问题，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:02:04.733

您可以在这里找到一个简短的解释：
[Hibernate Annotation Placement Question](https://stackoverflow.com/questions/305880/hibernate-annotation-placement-question)

重点是：
“Hibernate 使用的访问类型将是字段或属性。EJB3 规范要求您在将要访问的元素类型上声明注释，即**getter 方法如果您使用属性访问，则字段如果您使用字段访问**。应避免在字段和方法中混合 EJB3 注释**。Hibernate 会猜测访问类型**..."

# ruby-on-rails - Reading xml file using REXML, says ...

> ID：12888452
> 
> 赞同：5
> 
> 时间：2012-10-15T02:15:56.953
> 
> 标签：ruby-on-rails, ruby, xml, rexml

I have a very simple xml file that I am trying to access:

```
<article>
    <text>hello world</text>
</article> 
```

I'm doing this so far:

```
file = File.open("#{Rails.root}/public/files/#{file_id}.xml", "r")
xml = file.read

doc = REXML::Document.new(xml) 
```

When I run this code in rails console, I see:

```
1.9.3-p194 :033 > doc.inspect
 => "<UNDEFINED> ... </>" 
```

I can't seem to understand why it is not loading the file correctly, I can't access the text xml element either.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T02:45:21.397

It is loading correctly, the document just doesn't have a root node.

```
require "rexml/document"
doc = REXML::Document.new DATA.read

doc.root_node # => <UNDEFINED> ... </>
doc.inspect   # => "<UNDEFINED> ... </>"
doc.to_s      # => "<article>\n    <text>hello world</text>\n</article>\n"

doc.get_elements('//article') # => [<article> ... </>]
doc.get_elements('//text')    # => [<text> ... </>]

__END__
<article>
    <text>hello world</text>
</article> 
```

By the way, I think the Ruby community has pretty much universally endorsed [Nokogiri](https://rubygems.org/gems/nokogiri) for xml parsing.

# ruby-on-rails - 我应该如何将地理坐标存储在 mongoid 中以与太阳黑子一起使用？

> ID：12888454
> 
> 赞同：1
> 
> 时间：2012-10-15T02:16:12.337
> 
> 标签：ruby-on-rails, mongoid, sunspot

我有一个使用太阳黑子进行搜索的 mongoid RoR 应用程序。

我应该如何将坐标存储在 mongoid 文档中并使其可搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:07:54.170

只需将它们存储在一个数组中，索引字段，并使用此处看到的地理空间方法进行查询：http: [//mongoid.org/en/origin/docs/selection.html#symbol](http://mongoid.org/en/origin/docs/selection.html#symbol)

例如：

```
class Doc
  include Mongoid::Document

  field :location, type: Array
  index({ location: "2d" }, { min: -200, max: 200 })
end 
```

像这样调用： `Doc.within_circle(location: ...)`

# scala - 如何在Scala中将字符串列表打印到标准错误？

> ID：12888455
> 
> 赞同：17
> 
> 时间：2012-10-15T02:16:15.783
> 
> 标签：scala, io

此行会导致编译错误：

```
astgen.typeError.foreach(System.err.println) 
```

typeError 是对象 astgen 中字符串的 scala.collection.immutable.List。

我得到的错误是：

```
error: ambiguous reference to overloaded definition,
both method println in class PrintStream of type (java.lang.String)Unit
and  method println in class PrintStream of type (Array[Char])Unit
match expected type (Nothing) => Unit
      astgen.typeError.foreach(System.err.println) 
```

我是 Scala 新手，不明白这个问题。使用 2.7.7final。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-15T02:32:33.047

即使无法准确重现问题，我知道您可以通过指定类型来解决歧义：

```
scala> List("a","b","c")
res0: List[java.lang.String] = List(a, b, c)

scala> res0.foreach(System.err.println(_:String))
a
b
c 
```

在此示例中`_:String`，这是不必要的，在您的用例中可能需要。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-04T11:15:45.913

根据[RosettaCode](http://rosettacode.org/wiki/Hello_world/Standard_error#Via_Scala_Console_API)的说法，调用内置`Console`API 比调用 Java 运行时库更好`System.err`：

```
scala> List("aa", "bb", "cc").foreach(Console.err.println(_))
aa
bb
cc 
```

# javascript - 实现 jQuery UI 切换缓动功能

> ID：12888460
> 
> 赞同：0
> 
> 时间：2012-10-15T02:17:01.323
> 
> 标签：javascript, jquery, jquery-ui

我开始使用 jQuery UI，并且尝试使用 jQuery 中的 .toggle() 效果提供的默认缓动函数以外的缓动函数。

这就是我现在所拥有的。如何调整它以使用 UI 中的缓动功能之一，例如“爆炸”功能？

```
$(document).ready(function() {
   $('#signin').click(function(e) {
      $('#signinbox').toggle(300);
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:32:47.323

**根据文档：** [http ://api.jqueryui.com/toggle/](http://api.jqueryui.com/toggle/)

**.toggle( 效果 [, 选项 ] [, 持续时间 ] [, 完成 ] )**

```
 $('#signinbox').toggle('explode', 300); 
```

必须包含适当的 jqueryUI.js 资源，因为这不适用于 jQuery 核心`toggle()`方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T02:34:49.350

试试这样：

```
$('#signin').click(function(e) {
    $('#signinbox').toggle('explode', 300);
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/sbvkW/)**

# sql - 如何查找不存在的 DB2 表

> ID：12888463
> 
> 赞同：1
> 
> 时间：2012-10-15T02:17:20.603
> 
> 标签：sql, db2, catalog

我有一个表列表，我想检查目标数据库中当前不存在哪些表，我无法找出只返回列表中不存在的表的查询？我正在运行 DB2 9.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:49:10.813

如果您要检查的表列表是您可以查询的形式，它将是这样的。下面的查询将返回不在选择表查询中的所有表（您必须提供）：

```
select * from sysibm.systables
where owner = 'SCHEMA'
and type = 'T'
and name not in ( /* select query to return your list of tables */ ); 
```

* * *

**更新帖子评论：**

如果表格列在平面文件（.txt、.csv）中并且数量是可管理的。您应该能够像这样以逗号分隔的形式列出它们（至少您可以使用我更熟悉的其他 sql 语言）。

```
select * from sysibm.systables
where owner = 'SCHEMA'
and type = 'T'
and name not in ( 'table1', 'table2', 'table3', 'table4', 'tableA', 'tableB' ); 
```

否则，您可能必须构建一个快速临时表以将所有表名导入并继续使用第一个示例。

* * *

**更新帖子发表评论：**

最后，在您最近发表评论之后，*我意识到我误解了您的问题并将其倒退*。要翻转它并从列表中找到不在 SCHEMA 中的表，您可以执行以下操作。（将列表导入临时表后）。

```
select mytablename from templistoftables
where mytablename not in 
(select name from sysibm.systables
where owner = 'SCHEMA'
and type = 'T'); 
```

# java - Java 桌面应用程序 (awt/swing GUI) 到 Web 应用程序

> ID：12888468
> 
> 赞同：2
> 
> 时间：2012-10-15T02:18:47.093
> 
> 标签：java, swing, web, awt

我有一个我制作的小游戏（一个可运行的 jar），并想把它放在一个网站上。我在编写 java web 应用程序方面经验为零，如果可以避免的话，我也不想重写整个事情。

有什么方法（可能是一个框架）可以让我做这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:35:24.807

> 我有一个我制作的小游戏（一个可运行的 jar），并想把它放在一个网站上。

[使用Java Web Start](https://stackoverflow.com/tags/java-web-start/info)从链接直接启动它。根本不需要转换代码。

# ios - MonoTouch 在后台加载图像

> ID：12888469
> 
> 赞同：1
> 
> 时间：2012-10-15T02:18:50.557
> 
> 标签：ios, multithreading, c#-4.0, xamarin.ios

我在尝试加载图像并使用 System.Threading.Task 显示它时遇到问题

我的代码如下

```
 Task DownloadTask { get; set; }

    public string Instrument { get; set; }

    public PriceChartViewController(string Instrument) {
        this.Instrument = Instrument;
        DownloadTask = Task.Factory.StartNew(() => { });
    }

    private void LoadChart(ChartType chartType) {
        NSData data = new NSData();

        DownloadTask = DownloadTask.ContinueWith(prevTask => {
            try {
                UIApplication.SharedApplication.NetworkActivityIndicatorVisible = true;

                NSUrl nsUrl = new NSUrl(chartType.Uri(Instrument));
                data = NSData.FromUrl(nsUrl);
            }
            finally {
                UIApplication.SharedApplication.NetworkActivityIndicatorVisible = false;
            }
        });

        DownloadTask = DownloadTask.ContinueWith(t => {
            UIImage image = new UIImage(data);

            chartImageView = new UIImageView(image);
            chartImageView.ContentScaleFactor = 2f;

            View.AddSubview(chartImageView);

            this.Title = chartType.Title;
        }, CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, TaskScheduler.FromCurrentSynchronizationContext());
    } 
```

第二个 Continue with 似乎没有被调用？

最初，我的代码在没有后台处理的情况下如下所示，并且运行良好。

```
 private void oldLoadChart(ChartType chartType) {

        UIApplication.SharedApplication.NetworkActivityIndicatorVisible = true;

        NSUrl nsUrl = new NSUrl(chartType.Uri(Instrument));
        NSData data = NSData.FromUrl(nsUrl);
        UIImage image = new UIImage(data);

        chartImageView = new UIImageView(image);
        chartImageView.ContentScaleFactor = 2f;

        View.AddSubview(chartImageView);

        this.Title = chartType.Title;

        UIApplication.SharedApplication.NetworkActivityIndicatorVisible = false;
    } 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:30:34.280

您的线程的第一部分正在崩溃，这就是为什么它永远不会到达第二部分：您正在 `UIApplication.SharedApplication.NetworkActivityIndicatorVisible = true;` 从非 UI 线程调用。设置网络活动指示器是一个 UI 操作，只能在主线程上执行。你必须把它包起来`InvokeOnMainThread()`。如果你添加一个 try-catch，你会看到异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:10:42.650

`catch`之前添加`finally`。也许您只是有一个例外，因此工作流程不会进一步发展。

# actionscript - Flash/ActionScript：加载较大的 swf 时如何使较小的 swf 居中？

> ID：12888472
> 
> 赞同：0
> 
> 时间：2012-10-15T02:18:56.140
> 
> 标签：actionscript, flash

鉴于这些规范，我正在制作一个交互式故事书项目：

![在此处输入图像描述](../Images/19c96952b3f84f5ae289a0e0cb86b1b4.png)

我的书有 13 页，其中 1 页 = 1 个 swf 从外部加载到书 swf 中。如您所见，页面 swf 必须位于两个按钮之间，每个按钮都是 100x450。每当我尝试加载 swf 时，通常它都会在某个时候被切断。

简而言之，加载时如何将外部 swf 居中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:20:19.647

使 completeHandler 函数如下所示

```
function completeHandler(event:Event):void{         
    this.container.addChild(event.target.content);
    this.container.x = this.stage.stageWidth/2 - event.target.width /2;
    this.container.y = this.stage.stageHeight/2 - event.target.height /2;           
} 
```

你可以改变 this.stage.stageWidth 与中心容器的宽度，并应用相同的宽度也

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:15:42.730

gyandas 给出的建议很好。但是，从您提出问题的方式来看，我猜您已经按照他的建议做了一些事情。如果是这样，您可以尝试添加一个 520x450 的填充形状作为每个页面的背景。您可以将 alpha 设置为 0 或匹配书籍本身的背景颜色，但重要的是要有一些所需尺寸的实际内容，而不是在另一部电影中居中时依赖 SWF 的假定宽度。

我现在无法对此进行测试，但我似乎记得加载的 SWF 的尺寸是根据围绕实际内容创建的边界框计算的，因此我不得不这样做。

# eclipse - “firePropertyChange(IEditorPart.PROP_DIRTY)”无法激活“保存”菜单项

> ID：12888473
> 
> 赞同：0
> 
> 时间：2012-10-15T02:19:11.697
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

在我的编辑器中，每当我在编辑器中对文本小部件进行一些更改时，我都有以下功能可以将编辑器设置为脏，

```
private void setDirty(boolean b){
        isDirty = b;
        firePropertyChange(IEditorPart.PROP_DIRTY);
    } 
```

问题是当调用 setDirty(...) 时，我可以看到编辑器标题显示符号“*”进入脏状态，但我看到“保存”菜单项仍然是灰色的（见下面的快照）。 ![在此处输入图像描述](../Images/1cf4899c078e6cfc460fd718679cdad7.png)

“保存”菜单项由 plugin.xml 定义如下，

```
<extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu">
         <menu
               id="myProject.file"
               label="File">
            <command
                  commandId="org.eclipse.ui.file.save"
                  label="Save"
                  style="push">
            </command>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar">
         <toolbar
               id="myProject.toolbar1">
            <command
                  commandId="org.eclipse.ui.file.save"
                  label="Save"
                  style="push">
            </command>
         </toolbar>
      </menuContribution>
   </extension> 
```

谁能帮忙看看这个问题？我的实施有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:22:49.373

你`isDirty()`在你的编辑器类中覆盖了吗？就像是：

```
@Override
public boolean isDirty() {
    return isDirty;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:44:59.633

我只是尝试将以下代码添加到 ApplicationActionBarAdvisor 类中，然后可以启用 Save menuitem 并解决了我的问题，

```
protected void makeActions(IWorkbenchWindow window) {
        register(ActionFactory.SAVE.create(window));
    } 
```

必须调用“寄存器（...）”吗？

奇怪的是，我在 Eclipse 3.7 上运行我的 RCP 而不调用 register(...)，保存菜单项可以通过 firePropertyChange() 启用。但它在 Eclipse 4.0 中不起作用。因此，我在这里提出了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T13:02:57.763

在触发属性更改后尝试调用 editorDirtyStateChanged()。

# php - 验证多个文件

> ID：12888474
> 
> 赞同：1
> 
> 时间：2012-10-15T02:19:16.000
> 
> 标签：php, .htaccess, authentication, subdirectory, .htpasswd

因此，不要像我在[这里](https://stackoverflow.com/questions/12865543/password-protecting-web-directories-and-files)尝试的那样从整个身份验证中排除一个文件。我刚刚决定将特定文件添加到身份验证中，如下所示：

```
<Files ...>
</Files> 
```

事情是这样的：

```
<Files Available.php>
    AuthType Basic
    AuthName "Login"
    AuthUserFile /disks/*/*/Folder/.htpasswd
    Require valid-user
</Files> 
```

它的工作原理是它需要对 php.ini 进行身份验证。但是，当我像这样放置多个文件时：

```
<Files Available.php,Insert.php,upload_file.php>
    AuthType Basic
    AuthName "Login"
    AuthUserFile /disks/*/*/Folder/.htpasswd
    Require valid-user
</Files> 
```

它不需要对任何文件进行身份验证。有什么想法我在语法上写错了吗？

另外，我如何要求对所有子目录进行身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:35:06.073

您不能在指令中放置多个文件名。请参阅指令示例。

[http://www.askapache.com/htaccess/using-filesmatch-and-files-in-htaccess.html](http://www.askapache.com/htaccess/using-filesmatch-and-files-in-htaccess.html)

如果您无法将文件与通配符匹配，最好的办法是将它们全部放在一个子目录中并使用您的身份验证。

您的另一个选择是将 php 身份验证与会话（基于 cookie 或 url）一起使用，并让需要身份验证的 php 文件在运行之前检查有效会话。

我用经过身份验证的管理员编写了相当数量的基于 php 的站点，我总是使用子目录，然后使用 ssl 以使其更安全。

# javascript - Javascript验证不是验证权利

> ID：12888480
> 
> 赞同：0
> 
> 时间：2012-10-15T02:19:59.450
> 
> 标签：javascript

我正在尝试构建简单的购物车，其中用户输入书籍信息和价格，javascript 文件将验证输入，然后在输入几本书信息后，用户将能够查看包含书籍详细信息和总价的订单。问题是，即使数据输入有错误，也会存储错误的信息，因此我会得到总价的 NaN。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:29:12.340

```
 var Price=document.getElementById('Price').value;
 if(isNaN(Price)||Price="")
     {alert("Please enter numbers only for price");
     correct = false;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T02:23:47.537

执行客户端导航绝不是一个好主意。如果有人禁用了javascript怎么办？（黑莓手机）。他们会通过你的验证，然后繁荣，一切都搞砸了。

至于您的问题，如果您可以在小提琴中有一个孤立的测试用例，那么回答起来会更容易。

编辑：正如其他人所说，这仅仅是因为你不是`correct = false`每次都在`if`陈述中这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T02:25:39.607

在`function Validate()`您开始`var correct = 'true'`并稍后有一个 if 语句检查它是否仍然为真，但是在此之前没有代码`if`可能会更改`var correct`为 true 以外的值。我猜您忘记添加`correct = 'false'`检查变量的每个 if。

此外，如果您想`var correct`成为布尔值而不是字符串，请去掉 true 周围的 ""。

# javascript - 对象不支持此属性或方法

> ID：12888481
> 
> 赞同：0
> 
> 时间：2012-10-15T02:20:20.743
> 
> 标签：javascript, jquery

```
$(document).ready(function () {
    $('a.login-window').click(function () {
        //Getting the variable's value from a link 
        var loginBox = $(this).attr('href');
        //Fade in the Popup
        $(loginBox).fadeIn(300);
        //Set the center alignment padding + border see css style
        var popMargTop = ($(loginBox).height() + 24) / 2;
        var popMargLeft = ($(loginBox).width() + 24) / 2;
        $(loginBox).css({
            'margin-top': -popMargTop,
            'margin-left': -popMargLeft
        });
        // Add the mask to body
        $('body').append('<div id="mask"></div>');
        $('#mask').fadeIn(300);
        return false;
    });
    // When clicking on the button close or the mask layer the popup closed
    $('a.close, #mask').live('click', function () {
        $('#mask , .login-popup').fadeOut(300, function () {
            $('#mask').remove();
        });
        return false;
    });
}); 
```

我在自己的 PC 上调试 $(document).ready(function() 行时遇到了困难这个属性或方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T02:27:00.547

在第 5 行，您定义 loginBox，`$(this).attr('href')`然后尝试在其上使用多个 jQuery 函数。这是不可能的，因为 loginBox 不是一个元素。

# c# - 在 ASP.Net MVC 视图中显示模型列表

> ID：12888484
> 
> 赞同：2
> 
> 时间：2012-10-15T02:20:25.533
> 
> 标签：c#, asp.net-mvc, razor

这是我的模型：

```
public class ViewInvoice
{
    public string ClientLocation { get; set; }
    public List<DetailsGroup> Details { get; set; }

    public class DetailsGroup
    {
        public List<string> Product { get; set; }
        public List<string> ProductSize { get; set; }
        public List<string> PackageType { get; set; }
        public List<DateTime> OrderDate { get; set; }
        public List<DateTime> DeliveryDate { get; set; }
        public List<int> OrderNumber { get; set; }
        public List<decimal> Price { get; set; }
        public List<int> ItemQuantity { get; set; }
    }
} 
```

我正在尝试在我的剃刀视图中的表格中显示此模型。这是该代码：

```
@using MyModel.MyTools.Orders.SumOrder
@model SumOrder

@{
    ViewBag.Title = "View Invoice";
}

<h2>View Invoice</h2>

<table>
    @foreach(var prod in Model.OCI)
    {
        <tr>
            <td>
                @prod.ClientLocation
            </td>
        </tr>
         foreach (var orderItem in prod.Details)
        {
            <tr>
                <td>
                    @orderItem.Product
                </td>
                <td>
                    @orderItem.ItemQuantity
                </td>
            </tr>
        }
    }
</table> 
```

表中的第一行显示正确，这是一个城市的名称，但在下一行我得到了这个：

System.Collections.Generic.List `1[System.String] System.Collections.Generic.List`1[System.Int32]

有人可以向我解释为什么我无法以可读格式返回列表，以及如何解决这个问题？

这是我用来对 ViewInvoice 模型的列表进行分组的代码：

```
// group the cartItems according to location
        List<ViewInvoice> ordersGrouped = cartItems.GroupBy(c => new 
            {c.ClientLocation})
            .OrderBy(c => c.Key.ClientLocation).Select(s =>
                new ViewInvoice()
                    {
                        ClientLocation = s.Key.ClientLocation,
                        Details = new List<ViewInvoice.DetailsGroup>()
                            {
                                new ViewInvoice.DetailsGroup()
                                    {
                                        Product = s.Select(p => p.Product).ToList(),
                                        ItemQuantity = s.Select(p => p.ItemQuantity).ToList(),
                                        DeliveryDate = s.Select(p => p.DeliveryDate).ToList(),
                                        OrderDate = s.Select(p => p.OrderDate).ToList(),
                                        OrderNumber = s.Select(p => p.OrderNumber).ToList(),
                                        PackageType = s.Select(p => p.PackageType).ToList(),
                                        Price = s.Select(p => p.Price).ToList(),
                                        ProductSize = s.Select(p => p.ProductSize).ToList()
                                    }

                            }

                    }).ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:33:24.473

好的，我终于解决了我的问题。我一开始是过度思考这个问题。我简化了我的模型，并在我的视图中添加了一些简单的逻辑。

这是更新的模型：

```
public class ViewInvoice
{
    public string ClientLocation { get; set; }
    public List<string> Product { get; set; }
    public List<string> ProductSize { get; set; }
    public List<string> PackageType { get; set; }
    public List<DateTime> OrderDate { get; set; }
    public List<DateTime> DeliveryDate { get; set; }
    public List<int> OrderNumber { get; set; }
    public List<decimal> Price { get; set; }
    public List<int> ItemQuantity { get; set; }
} 
```

用于对模型列表进行分组的更新代码：

```
// group the cartItems according to location
        List<ViewInvoice> ordersGrouped = cartItems.GroupBy(c => new 
            {c.ClientLocation})
            .OrderBy(c => c.Key.ClientLocation).Select(s =>
                new ViewInvoice()
                    {
                        ClientLocation = s.Key.ClientLocation,
                        Product = s.Select(p => p.Product).ToList(),
                        ItemQuantity = s.Select(p => p.ItemQuantity).ToList(),
                        DeliveryDate = s.Select(p => p.DeliveryDate).ToList(),
                        OrderDate = s.Select(p => p.OrderDate).ToList(),
                        OrderNumber = s.Select(p => p.OrderNumber).ToList(),
                        PackageType = s.Select(p => p.PackageType).ToList(),
                        Price = s.Select(p => p.Price).ToList(),
                        ProductSize = s.Select(p => p.ProductSize).ToList()

                    }).ToList(); 
```

和更新的视图：

```
@using MyModel.MyTools.Orders.SumOrder
@model SumOrder

@{
    ViewBag.Title = "View Invoice";
}

<h2>View Invoice</h2>
@{
    int i = 0;
}
<table>
    @foreach(var mod in Model.OCI)
    {
        var modCount = @mod.Product.Count();
        <tr>
            <th>@mod.ClientLocation</th>
        </tr>
        <tr>
            <th>Product</th>
            <th>Price</th>
        </tr>
        foreach (var items in mod.Product)
        {
            <tr>
                <td>
                    @mod.Product.ElementAtOrDefault(i)
                </td>
                <td>
                    @mod.Price.ElementAtOrDefault(i)
                </td>
            </tr>
            i++;
        }

    }
</table> 
```

该解决方案清楚地允许我遍历模型，沿途复制任何所需的行或单元格。过去两天因为这个问题玩了俄罗斯轮盘赌。希望这可以为其他面临此问题的人节省一些时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T02:36:18.197

您的模型对象没有任何意义。为什么您的每个属性（例如价格和数量）都是一个集合？单个订单行项目对象的每个属性只有一个值，而不是集合。您的发票对象已经考虑了多个详细信息对象，但单个详细信息对象不应将其属性作为列表。从您的所有属性中删除 List<> ，它应该可以解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T02:35:56.180

因为字符串列表与字符串不同。您看到的是 List 类的 ToString() 方法返回的默认值。

**要以逗号分隔的显示方式从列表中获取元素，请使用：**

```
string.Join(",", orderItem.Product.ToArray())
string.Join(",", orderItem.ItemQuantity.ToArray()) 
```

每当您要打印某些内容时，都会调用该对象的 ToString() 方法。在 List<> 类上定义的这个 ToString() 方法无法知道您希望如何显示您的数据，看看列表如何可以包含多个 String 或 int 或 Date。例如，您可能希望在每个值前面添加一个 <p> 并在每个值之后添加一个 </p>。

第一行显示正确，因为 ClientLocation 是一个简单类型。有关简单类型的更多信息，请参阅[简单类型](http://msdn.microsoft.com/en-us/library/aa691144%28v=vs.71%29.aspx)

# maven - Gradle build.gradle 到 Maven pom.xml

> ID：12888490
> 
> 赞同：66
> 
> 时间：2012-10-15T02:20:58.557
> 
> 标签：maven, gradle, pom.xml

我有一个 Gradle 项目，我需要将其所有依赖项转移并与另一个 Maven 项目一起使用。换句话说，我如何从 build.gradle 生成（或生成）pom.xml？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-11-15T11:39:07.983

从 Gradle 7 开始，当使用[Gradle 的 Maven-Publish 插件](https://docs.gradle.org/current/userguide/publishing_maven.html)时，*publishToMavenLocal*和*publish*会自动添加到您的任务中，调用其中任何一个都会生成一个 POM 文件。

因此，如果您的*build.gradle*文件如下所示：

```
plugins {
    id 'java'
    id 'maven-publish'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation group: 'org.slf4j', name: 'slf4j-api', version: '1.7.25'
    runtimeOnly group: 'ch.qos.logback', name:'logback-classic', version:'1.2.3'
    testImplementation group: 'junit', name: 'junit', version: '4.12'
}

// the GAV of the generated POM can be set here
publishing {
    publications {
        maven(MavenPublication) {
            groupId = 'edu.bbte.gradleex.mavenplugin'
            artifactId = 'gradleex-mavenplugin'
            version = '1.0.0-SNAPSHOT'

            from components.java
        }
    }
} 
```

您可以`gradle publishToLocalRepo`在其文件夹中调用，您会在*build/publications/maven*子文件夹中找到一个名为*pom-default.xml*的文件。此外，与 POM 一起构建的 JAR 将位于您的 Maven 本地存储库中。更确切地说`gradle generatePomFileForMavenPublication`，如果您想省略发布到 Maven 本地存储库，则该任务会执行实际生成。

请注意，并非所有依赖项都显示在此处，因为 Gradle“配置”并不总是与 Maven“范围”一一对应。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-06-28T05:01:55.663

因为我不想在我的本地仓库中安装任何东西，所以我在阅读文档后做了以下操作。添加你的 build.gradle

```
apply plugin: 'maven'

group = 'com.company.root'
// artifactId is taken by default, from folder name
version = '0.0.1-SNAPSHOT'

task writeNewPom << {
    pom {
        project {
            inceptionYear '2014'
            licenses {
                license {
                    name 'The Apache Software License, Version 2.0'
                    url 'http://www.apache.org/licenses/LICENSE-2.0.txt'
                    distribution 'repo'
                }
            }
        }
    }.writeTo("pom.xml")
} 
```

运行它 `gradle writeNewPom`

@a_horse_with_no_name

用 groovy 制作的 gradle 可以在结束 } 项目块后尝试添加

```
build{
  plugins{
    plugin{
      groupId 'org.apache.maven.plugins'
      artifactId 'maven-compiler-plugin'
      configuration{
          source '1.8'
          target '1.8'
      }
    }
  }
} 
```

没试过，瞎猜！

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-10-26T08:16:36.787

当您没有安装 gradle 时，“编写 gradle 任务来执行此操作”不是很有用。我没有使用依赖项安装这个 100MB 的野兽，而是制作了将 gradle 依赖项转换为 maven 依赖项的过滤器：

```
cat build.gradle\
| awk '{$1=$1};1'\
| grep -i "compile "\
| sed -e "s/^compile //Ig" -e "s/^testCompile //Ig"\
| sed -e "s/\/\/.*//g"\
| sed -e "s/files(.*//g"\
| grep -v ^$\
| tr -d "'"\
| sed -e "s/\([-_[:alnum:]\.]*\):\([-_[:alnum:]\.]*\):\([-+_[:alnum:]\.]*\)/<dependency>\n\t<groupId>\1<\/groupId>\n\t<artifactId>\2<\/artifactId>\n\t<version>\3<\/version>\n<\/dependency>/g" 
```

这转换

```
compile 'org.slf4j:slf4j-api:1.7.+'
compile 'ch.qos.logback:logback-classic:1.1.+'
compile 'commons-cli:commons-cli:1.3' 
```

进入

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.7.+</version>
</dependency>
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-classic</artifactId>
    <version>1.1.+</version>
</dependency>
<dependency>
    <groupId>commons-cli</groupId>
    <artifactId>commons-cli</artifactId>
    <version>1.3</version>
</dependency> 
```

pom.xml 的其余部分应手动创建。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-10-15T02:33:47.903

最内置的解决方案可能是使用`archiveTask`Maven 插件中的任务，它将`poms`在构建目录的文件夹中生成一个 pom。[http://www.gradle.org/docs/current/userguide/maven_plugin.html#sec:maven_pom_generation](http://www.gradle.org/docs/current/userguide/maven_plugin.html#sec:maven_pom_generation)

# c++ - 使用带有 scons 的 codelite

> ID：12888492
> 
> 赞同：1
> 
> 时间：2012-10-15T02:21:05.587
> 
> 标签：c++, netbeans-7, scons, codelite

在 scons 项目之上使用 codelite 有多难？

我应该期望失去哪些功能？有没有办法配置 codelite 以使用 scons 配置文件来跟踪项目文件。

目前我正在使用 Netbeans 7.1，但该工具不能很好地适用于 LLVM 等复杂项目。我对codelite很好奇，因为它似乎有一个非常好的代码完成架构（依赖于llvm clang插件），但我不确定将我的项目（基于scons）迁移到它有多难

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:28:21.603

Why not? ![scons codelite](../Images/58c40403f944ea53c2dbce6737a4d9e0.png)

But codelite is old-school IDE with very poor functional, like Visual Studio 6\. I recommend use Eclipse CDT.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T05:35:44.010

我对codelite一无所知，但是eclipse是一个出色的IDE，具有您提到的代码完成功能。有一个可用于 Eclipse 的 SCons 插件，称为[SConsolidator](http://www.scons.org/wiki/EclipsePlugin)。

我发现 eclipse 对 C++ 和 Python 有很好的支持。

# android - 没有标准徽标/图标的 Actionbarsherlock Up Affordance 图标

> ID：12888497
> 
> 赞同：0
> 
> 时间：2012-10-15T02:22:01.397
> 
> 标签：android, actionbarsherlock

我正在使用 Actionbarsherlock，并希望在其右侧显示没有我的应用程序徽标或图标显示的向上启示图标。

我尝试了以下方法。

```
getSupportActionBar().setDisplayShowHomeEnabled(false);
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

这样做的结果是我的向上启示图标也不显示。

如果我离开

```
getSupportActionBar().setDisplayShowHomeEnabled(false); 
```

然后我的向上启示图标显示，但它也显示我的应用程序的图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T04:02:38.027

尝试将图标设置为`null`. `getSupportActionBar().setIcon(null)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T22:33:34.880

我最终使用了透明的 png，因为我无法找到以编程方式实际禁用图标的方法。

# ruby - 如何使用 puppet 在服务器上设置环境变量？

> ID：12888499
> 
> 赞同：2
> 
> 时间：2012-10-15T02:22:25.783
> 
> 标签：ruby, jruby, environment-variables, production-environment, puppet

我开始在我当前的项目中使用 puppet，但我遇到了一些问题。

我正在使用配方安装 jruby，但我想在安装 jruby 后设置一个环境变量（在本例中为 JRUBY_HOME 并修改 PATH 以包含 JRUBY_HOME/bin）。

这是食谱：

```
class jruby {
  $jruby_home = "/opt/jruby"

  exec { "download_jruby":
    command => "wget http://jruby.org.s3.amazonaws.com/downloads/1.7.0.RC2/jruby-bin-1.7.0.RC2.tar.gz",
    path => $path,    
    timeout => 0,
    unless => "ls /opt | grep jruby-1.7.0",
    require => Package["openjdk-7-jre-headless"]
  }                

  exec { "unpack_jruby" :
    command => "tar -zxf jruby-bin-1.7.0.RC2.tar.gz -C /opt",
    path => $path,
    creates => "${jruby_home}-1.7.0.RC2",
    require => Exec["download_jruby"]
  }                             

  file { $jruby_home:
    ensure => link,
    target => "${jruby_home}-1.7.0.RC2",
    require => Exec["unpack_jruby"]
  }                          

} 
```

那么，将 /opt/jruby 添加为 JRUBY_HOME 然后将 JRUBY_HOME/bin 添加到 PATH 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:37:41.763

解决了它：

```
# init.pp
$jruby_sh = "/etc/profile.d/jruby.sh"
file { $jruby_sh:
  ensure => present,
  source => "puppet:///modules/jruby/jruby.sh",
  owner => "root",
  group => "root",
  mode => 644,
  require => File[$jruby_home]
}

# jruby.sh
export JRUBY_HOME=/opt/jruby
export PATH=$PATH:$JRUBY_HOME/bin 
```

# objective-c - coredata deleteAllObjects 有没有更快的方法

> ID：12888500
> 
> 赞同：0
> 
> 时间：2012-10-15T02:22:31.617
> 
> 标签：objective-c, ios, core-data

在我将数据写入我的核心数据之前，我调用

```
[self deleteAllObjects:@"MyEntity"]; 
```

但这似乎遍历每个对象并删除它们，这似乎有点慢。我想知道是否有更好/更快的方法来做到这一点。

我已经查看了开发人员网站上的 coredata 注释。但这是我能找到的用于从您的实体中删除条目的唯一功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:33:53.687

由于迭代很昂贵，因此有更快的方法。[您可以在此处](https://stackoverflow.com/questions/1077810/delete-reset-all-entries-in-core-data)、[此处](https://stackoverflow.com/questions/3266084/how-to-remove-all-objects-from-core-data)和[此处查看](https://stackoverflow.com/questions/1383598/core-data-quickest-way-to-delete-all-instances-of-an-entity)之前在 SO 上讨论过的这些答案。

# node.js - 哪个节点二进制管理更流行：nave 还是 n？

> ID：12888503
> 
> 赞同：1
> 
> 时间：2012-10-15T02:23:02.987
> 
> 标签：node.js

我有兴趣比较两个二进制管理器**nave**和**n**。

一种使用**subshel​​l**方法，另一种直接且语法简单。

*   这两个项目背后都有著名的开发商。但是，在生产环境中，是否有任何功能真正优于其他功能？
*   哪一个对 PaaS 更友好？

# python - Python中关于列表的赋值运算符

> ID：12888506
> 
> 赞同：4
> 
> 时间：2012-10-15T02:23:11.500
> 
> 标签：python

我是 Python 的初学者，对赋值运算符理解不清楚，例如：

```
list1 = ["Tom", "Sam", "Jim"]
list2 = list1 
```

上述两个语句将 'list1' 和 'list2' 绑定到`["Tom", "Sam", "Jim"]`，问题是，如果一个运算符如下所示：

`list1[1] = "Sam's sister"`，如果赋值语句也被认为是绑定的，那么`list2[1]`仍然与“Sam”相关联，结果是修改`list1`不影响`list2`，即使Python呈现相反的输出，另一个问题是是否`list1[1]`可以将其视为变量在 Python 中`list1`。`list2`

任何人都可以有任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T02:55:56.890

在您的示例中，标识符`list1`和`list2`是对同一基础对象的引用（*只是同一事物的不同名称*）。

`id()`可用于查看是否引用了*相同*的底层对象。

```
>>> list1 = ["Tom", "Sam", "Jim"]
>>> list2 = list1
>>> id(list1)
44259368
>>> id(list2)
44259368 
```

要创建定义列表的副本，请使用`[:]`符号，或者`deepcopy`正如 Matthew 所提到的。您会注意到，完成此操作后，位置/id 已更改。

```
>>> list3 = list1[:]
>>> id(list3)
44280208 
```

关于 id 命令：

```
>>> help(id)
Help on built-in function id in module __builtin__:

id(...)
    id(object) -> integer

    Return the identity of an object.  This is guaranteed to be unique among
    simultaneously existing objects.  (Hint: it's the object's memory address.) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T02:32:02.647

你是对的，他们不一样。在 Python ( `name = ...`) 中对裸名称赋值与对其他任何事物的赋值是不同的操作。特别是它与项目分配（`name[0] = ...`）和属性分配（`name.attr = ...`）不同。它们都使用等号，但后两者可以通过钩子（`__setitem__`和`__setattr__`）进行操作，可以调用任意代码，并且通常在程序员的控制之下。对裸名称的分配不受 Python 程序员的控制。你不能影响它的作用；它总是将右侧绑定到左侧的名称。

这可能会令人困惑，因为人们习惯于认为等号是“赋值”的原因。但是在 Python 中，为了了解正在发生什么操作，你真的必须查看等号的左侧，看看分配给什么样的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T02:44:24.383

BrenBarn 对所有事情都是绝对正确的，但这里有另一种可能更容易理解的方式来看待它：

您的第一条语句使用这些值创建一个列表，然后让 list1 指向它。第二条语句使 list2 指向与 list1 完全相同的内存空间。（您可以通过在第二条语句之后对它们运行 id 来看到这一点）。

此时 list1 和 list2 本质上都是对同一个可变列表的引用。当您更改该列表时， list1 和 list2 仍然都引用相同的实际列表，并且使用其中任何一个来访问它都会给您同样的东西。

我[最近发表了一篇关于相关主题的博客文章，Python Conques the Universe 也在](http://timothyawiseman.wordpress.com/2012/10/06/class-and-instance-variables-in-python-2-7/)[这里](http://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/)讨论了类似的主题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T02:38:48.407

BrenBam 对正在发生的事情有很好的解释。`deepcopy`一种解决方法：

```
>>> from copy import deepcopy
>>> list1 = ["Tom", "Sam", "Jim"]
>>> list2 = deepcopy(list1)
>>> list1[1] = "Sam's sister"
>>> list1
['Tom', "Sam's sister", 'Jim']
>>> list2
['Tom', 'Sam', 'Jim'] 
```

良好的编程风格将使其很少需要实际使用`deepcopy`。

# ruby-on-rails-3 - Rails 引擎——如何绕过 main_app 获取命名路由

> ID：12888512
> 
> 赞同：2
> 
> 时间：2012-10-15T02:24:49.877
> 
> 标签：ruby-on-rails-3, rails-engines

在[这个 Stack Overflow question](https://stackoverflow.com/questions/8000536/how-do-i-access-all-routes-when-an-app-and-an-included-appengine-gem-define-con)中，问题的结尾开始解决这个问题，但这不是主要问题，那里已经回答了。

我有一个包含在`ApplicationController`和`MyEngineController`. 假设某些模块的实例方法使用`login_url`或其他一些命名路由。它适用于 ApplicationController 但不适用于`MyEngineController`. 我可以用 替换它`main_app.login_url`，这将使它对两者都有效，但这似乎非常冗长，而且无论如何，如果代码已经是 gem 依赖项的一部分怎么办？我如何使它在我正在编码的引擎中事后工作？

当我尝试使用任何命名的助手时，这就是我得到的：

```
ActionController::RoutingError: 
    No route matches {:action=>"new", :controller=>"sessions"}
actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:532:in `raise_routing_error'
actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:528:in `rescue in generate'
actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:520:in `generate'
actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:561:in `generate'
actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:586:in `url_for'
actionpack-3.2.8/lib/action_dispatch/routing/url_for.rb:148:in `url_for'
actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:213:in `login_url' 
```

请注意，`:controller=>"sessions"`必须是`:controller=>"/sessions"`（使用斜线将其放在根名称空间中），但这不是我可以传递给命名路由 AFAIK 的选项。我尝试添加此代码：

```
extend ActiveSupport::Concern
included do
  main_app.install_helpers(self)
end 
```

在 MyEngineController 中，但它没有帮助。（`install_helpers`记录得很差。谁能解释它应该做什么？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:36:25.790

现在，我将使用这个解决方案（在 MyEngineController 中）：

```
protected
def url_for options=nil
  begin
    super options
  rescue ActionController::RoutingError
    main_app.url_for options
  end
end 
```

我不太喜欢它，因为一般来说，[异常不应该用于流控制](https://stackoverflow.com/questions/1546514/java-exceptions-as-control-flow)。那么你还有什么其他建议？

# url - 使用变量的经典 ASP 重定向 URL

> ID：12888515
> 
> 赞同：2
> 
> 时间：2012-10-15T02:25:28.580
> 
> 标签：url, asp-classic, response.redirect

我有一个来自结果集的变量标签 <%test_variable%>。

我想用这个 <%=test_variable%> 重定向到一个链接，比如说

```
http://www.helloworld.someurl.com/testUrl?somevariable=<%=test_variable%>&test=ok 
```

如何在 <% %> 标记中执行此操作？例如，

```
<%=test_variable%> 

<%
' I want to redirect the url with the above tag, something like:

Response.Redirect(" http://www.helloworld.someurl.com/testUrl?somevariable=<%=test_variable%>&test=ok")
%> 
```

但我不认为我们可以有“嵌套标签”，对吧？

我对 ASP 很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T02:27:58.370

`<%= %>`是 的简写`<% Response.Write(" ... "); %>`：

```
http://www.helloworld.someurl.com/testUrl?somevariable=<%=test_variable%>&test=ok 
```

在你澄清之后：

```
<%
    Response.Redirect("http://www.helloworld.someurl.com/testUrl?somevariable="
                     + test_variable
                     + "&test=ok");
%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T06:11:23.513

你的代码应该是

```
Response.Redirect("http://www.helloworld.someurl.com/testUrl?somevariable=" & test_variable & "&test=ok") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T06:42:04.863

谢谢大家的建议...

我决定改用这个：

```
<script type="text/javascript">
   window.location =  "http://www.helloworld.someurl.com/testUrl?somevariable="+<%=test_variable%>+"&test=ok"
</script> 
```

# image - 在 D3 中动态显示图像

> ID：12888516
> 
> 赞同：3
> 
> 时间：2012-10-15T02:25:29.360
> 
> 标签：image, svg, d3.js

我想将一系列图像显示为动画——我会使用 GIF，但我想操纵特定的帧。

我已经在 SVG 画布上显示了图像，现在我想`xlink:href`动态更改。

```
function startAnimation(){
    c += 1;
    d3.select(this)
        .transition()
        .attr("xlink:href", "images/image-" + c.toString() +".png")
        .each("end", startAnimation);       
}; 
```

如果我尝试更改图像高度之类的属性，这种方法效果很好，但它似乎不适用于属性`xlink:href`。

有没有办法像这样动态更新图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T04:54:53.070

您需要在开始动画序列之前预加载和缓存图像。否则，图像将被延迟加载——图像加载需要 250 毫秒并不是不合理的，这意味着当图像加载时，您将进入下一帧。

`new Image`对于 HTML 元素，您可以通过创建 Image 对象`src`（`onload`当您从`src`预`img`加载的`Image`.

不过，这种技术可能适用于 SVG 图像，也可能不适用。一种更好的技术是使用精灵表，将动画的所有帧组合成一个图像，然后在客户端上对其进行裁剪。在 HTML 中，您通常为此使用 background-position 样式；在 SVG 中，您可以通过裁剪或溢出来做同样的事情：隐藏。

另一种选择是创建多个`svg:image`元素，然后隐藏除一个之外的所有元素（例如，通过不透明度或将元素定位在屏幕外）。

（此外，由于您没有插入属性，因此对动画使用 setInterval 而不是 d3.transition 可能更简单。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T05:25:19.610

```
nodeEnter.append("svg:image")
     .attr('x',-9)
     .attr('y',-12)
     .attr('width', 15)
     .attr('height', 24)    
     .attr("xlink:href", function(d) { 
      if(d.Type=="name"){
       return "/images/icon-1.png";}
      else{
           return "/images/icon-2.png";}
           }); 
```

# iphone - iPhone 5 尺寸支持

> ID：12888517
> 
> 赞同：0
> 
> 时间：2012-10-15T02:25:34.377
> 
> 标签：iphone, interface-builder, iphone-5

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

我有一个用旧的 xcode（比如说 4.2）开发的应用程序，昨天我下载了 Lion 和 Xcode，我正在尝试支持 Iphone5 大小。该项目不使用故事板。我尝试的第一件事是在委托类中加载一个新的 ViewController（ .xib 的视图高度为 568 px），但令我惊讶的是它在 Iphone5 中没有全屏显示。

是什么让我相信我需要更改项目配置中的某些内容任何帮助将不胜感激。谢谢

这是委托代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    IPhone6ViewController *tes = [[IPhone6ViewController alloc]init];
    [self.window addSubview:tes.view];
    //[self.window addSubview:moviePlayerController.view];
    [self.window makeKeyAndVisible];
} 
```

# javascript - 一个 AJAX 请求可以“窃取”另一个 AJAX 请求的结果吗？

> ID：12888521
> 
> 赞同：0
> 
> 时间：2012-10-15T02:25:47.443
> 
> 标签：javascript, ajax

我遇到了一个无法重现的 AJAX/JS 错误，但我有一个理论。基本上，我的网页每 10 秒进行一次 AJAX 调用，以使用新数据更新各种元素。还有一个按钮，用户可以按下它来调用不同的 AJAX 调用，它也会更新一些相同的元素。

如果从未按下按钮，则不会发生错误。然而，在极少数情况下，页面在按下按钮后不久就会被错误的数据搞砸。数据“似乎”可能来自不同的来源。是否有可能其中一个 AJAX 调用正在接收和输出另一个的结果？这两个功能包括：

```
if (window.XMLHttpRequest) { xmlhttp=new XMLHttpRequest(); } 
```

这里可能会发生全局覆盖吗？谢谢

# c++ - 为什么在模板评估的第一阶段确定名称的类型，即使是从属名称？

> ID：12888522
> 
> 赞同：2
> 
> 时间：2012-10-15T02:25:51.403
> 
> 标签：c++, templates

[作为我之前提出](https://stackoverflow.com/questions/12848155/how-are-templated-static-member-functions-parsed)的一个问题的推论，我很好奇为什么模板中的名称类型（该名称的“类别”）是在 2 阶段查找的第一阶段设置的，而类别本身可以还取决于模板参数。这种行为的真正收获是什么？

一点澄清 - 我想我对 2 阶段查找的工作原理有相当了解*；*我试图理解的是为什么在阶段 1 中明确确定令牌的类别，这与确定依赖类型时（在阶段 2）不同。我的论点是简化困难的语法，使代码更易于编写和阅读，这是一个非常实际的收获，所以我很好奇将类别评估限制在阶段 1 的令人信服的理由是什么。仅仅是为了在模板实例化之前获得更好的模板验证/错误消息，还是稍微提高速度？还是模板的某些基本属性使第 2 阶段类别评估不可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:15:18.127

问题可能有两个方面：为什么我们首先需要两阶段查找，并且鉴于我们有两阶段查找，为什么在第一阶段对令牌的解释是固定的。第一个是更难回答的问题，因为它是语言中的设计决策，因此它有其优点和缺点，并且取决于你的立场，或者其他人会更有分量。

您感兴趣的第二部分实际上要简单得多。为什么，在具有两阶段查找的 C++ 语言中，令牌含义在第一阶段是固定的，不能在第二阶段被解释。原因是 C++ 有上下文文法，而记号的解释高度依赖于上下文。如果不在第一阶段确定标记的含义，您甚至不会知道首先需要查找哪些名称。

考虑一个稍微修改过的原始代码版本，其中文字 5 被一个常量表达式替换，并假设您不需要提供最后一次咬您的`template`or`typename`关键字：

```
const int b = 5;
template<typename T>
struct Derived : public Base<T> {
    void Foo() { 
       Base<T>::Bar<false>(b);   // [1]
       std::cout << b;           // [2]
    }
}; 
```

[1] 的可能含义是什么（忽略在 C++ 中这是通过添加`typename`and来确定的事实`template`）？

1.  `Bar`是一个静态模板函数，它接受一个`bool`作为模板参数和一个整数作为参数。`b`是指常数 5 的非依赖名称。^*

2.  `Bar`是一个嵌套模板类型，它采用单个`bool`作为模板参数。`b`是在函数内部定义`Derived<T>::Foo`但未使用的该类型的实例。

3.  `Bar`是一个类型的静态成员变量，`X`对其进行比较，该比较`operator<`采用 a`bool`并产生一个`U`可以与`operator>`整数进行比较的类型的对象。

现在的问题是我们如何在模板参数被替换之前（即在第一阶段）继续解析名称。如果我们在情况 1\. 或 3\. 中，则`b`需要查找并且可以在表达式中替换结果。在第一种情况下产生您的原始代码：`Base<T>::template Bar<false>(5)`，在后一种情况下产生`operator>( operator<( Base<T>::Bar,false ), 5 )`. 在第三种情况（2.）中，第一阶段之后的代码将与原始代码完全相同：（`Base<T>::Bar<false> b;`删除额外的`()`）。

第二行 [2] 的含义取决于我们如何解释第一行 [1]。在 2\. 情况下，它表示对 的调用`operator<<( std::cout, Base<T>::Bar<false> & )`，而在其他两种情况下，它表示`operator<<( std::cout, 5 )`。同样，其含义超出了第二个参数的类型，如 2\. case name `b`inside`Derived<T>::Foo`是依赖的，因此它无法在第一阶段解决，而是推迟到第二阶段（它也会通过添加参数依赖查找的命名空间`Base`和实例化类型）。`T`

如示例所示，标记的解释会影响名称的含义，进而影响其余代码的含义，哪些名称是依赖的，因此在第一个过程中还需要查找哪些内容阶段。同时，编译器确实在第一遍期间执行检查，如果在第二遍期间可以重新解释标记，那么在第一遍期间的检查和查找结果将变得无用（想象在第一遍期间） pass`b`已被替换为`5`仅发现我们在情况 2。在第二阶段！），并且必须在第二阶段检查所有内容。

两阶段查找的存在取决于被解释的标记及其在第一阶段选择的含义。另一种方法是像 VS 一样进行单遍查找。

* * *

^*我在这里简化了案例，在 Visual Studio 编译器中，它不实现两阶段查找，`b`也可以是`Base<T>`当前实例化类型的成员`T`（即它可以是从属名称）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:52:00.653

C++ 的许多优点是它是一种经过严格检查的语言。您尽可能清楚地表达程序的意图，编译器会告诉您是否违反了该意图。

我无法想象你会写`Base<T>::Bar<false>(b);`（来自 Dribeas 的例子）并且没有你想要的特定解释。通过将解释告诉编译器 ( `Base<T>::typename Bar<false>(b);`)，如果有人提供具有`static`成员`Bar`或嵌套模板类型而不是成员函数模板的类型，它可能会生成有意义的错误。

其他语言旨在强调静态分析的简洁性；例如，许多动态语言都有大量“按我的意思做”的规则。当编译器将不合理的代码变成不可预测的*东西*时，这会很有趣，没有错误。（恰当的例子：Perl。我喜欢用它来处理文本，但天哪，DWIM 很烦人。几乎所有事情都是运行时错误，几乎没有任何静态检查可言）

# c# - 在 asp.net 中创建一个类

> ID：12888529
> 
> 赞同：-1
> 
> 时间：2012-10-15T02:28:01.020
> 
> 标签：c#, asp.net

我是 ASP.NET 的新手，我正在尝试创建一个将调用名为**AddNode.aspx**的 aspx 的类，我有几个问题

1.  如何在构造函数/方法中简单地打印文本，类似于*php* **echo** / *java* **system.out.print()**
2.  如何调用**AddNode.aspx中的类**
3.  如何定义函数 (GetNode()) 以返回数据库结果？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

public class category
{
    public category()
    {
        //
        // TODO: Add constructor logic here
        //
        Response.Write("abc");
    }

    public static Array[] GetNode() {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:40:39.393

asp.net webForm 的范式与 PHP 不同。尝试[开始使用 ASP.NET 4.5 Web 窗体](http://www.asp.net/web-forms/tutorials/aspnet-45/getting-started-with-aspnet-45-web-forms/introduction-and-overview)，或者您可以尝试更类似于 PHP MVC 框架的 asp.net MVC（ [ASP.NET MVC 3 简介）。](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T02:43:33.533

PHP 和 ASP .NET Web 窗体之间确实存在很大差异（在 ASP .NET MVC 的情况下差异较小，但仍然很大），所以我理解混乱的根源。

1-您在使用 Web 表单吗？如果是这样，您可以将 Label 控件添加到 Form，然后将其 Text 属性设置为您喜欢的某个值。label1.Text = "你好 ASP .NET";

在 ASPX 标记中： `<asp:label ID="label1" runat="server" text="Label">`

在代码隐藏文件中（与 ASPX 关联，右键单击设计器，然后选择查看代码）：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        label1.Text = "Hello ASP .NET";
    } 
```

您也可以使用 Response.Write(" **Hello ASP .NET** "); 但是有了这个，你对这个文本出现的位置的控制就更少了。请注意，您可以编写 HTML 标记。

2-您必须区分表示 Web 窗体的类（存在于代码隐藏文件中，注意 ASP .NET 术语“代码隐藏”）和其他类，例如您创建的类：“类别”（在.NET 的约定是类名大写：Category)。

打电话上课？如果您的意思是出于某种目的创建一个类的实例，只需编写`category instance = new category();`. 您可以通过编写 category.StaticMemberName(); 来引用类中的静态功能；如果它是一种方法。

3-这是一个多方面的问题。阅读 .NET 中的数据访问...

在问这样的问题之前，你需要做大量的阅读！祝你好运。

# c# - 为什么 nlog 不记录到我的 ASP.NET 项目中的文件？

> ID：12888530
> 
> 赞同：0
> 
> 时间：2012-10-15T02:28:07.447
> 
> 标签：c#, asp.net, visual-studio, nlog

我同时拥有 Visual Studio 2010 和 Visual Web Developer Express 2012。

我在控制台应用程序中尝试了 VS 2010 中的 NLOG，一切正常。

但是当我在 VS2012 中使用我的 asp.net 应用程序尝试它时，它只是没有。

我已经尝试重新启动我的 VS：[NLog is not logging](https://stackoverflow.com/questions/8118695/nlog-is-not-logging)
并仔细检查登录级别：[NLog not Logging in Simple App](https://stackoverflow.com/questions/3919083/nlog-not-logging-in-simple-app)

但还是不走运。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:37:55.383

我刚刚想通了。

我在我想要记录的业务逻辑库中安装了 NLog。但是我没有在主项目（asp之一）中安装它，所以我只是安装在那里，调整配置并解决了它。

# gpu - 我无法让 GPU 模拟器工作

> ID：12888537
> 
> 赞同：2
> 
> 时间：2012-10-15T02:29:10.917
> 
> 标签：gpu, device-emulation

我有兴趣尝试 GPU 模拟器，但我尝试使用 Multi2Sim、GPGPU-sim 和 Ocelot，对于这三个模拟器中的每一个，我都遇到了一个问题，在互联网上似乎很难找到解决方案。我将描述每个模拟器遇到的问题，也许您可​​以提供帮助。首先，为了给你一些详细的背景信息，我使用的是 Ubuntu 12.04 LTS。

Multi2Sim 说它与 64 位不兼容，因此您应该编译为 32 位。如果我为 32 位编译 CUDA 代码，那么当我运行编译后的可执行文件时，我收到错误消息“CUDA driver version is enough for CUDA runtime version”。如果我为 32 位编译 OpenCL 代码，那么当我运行编译后的可执行文件时，我发现函数 clGetPlatformIDs 并没有给我在为 64 位编译时获得的 Nvidia OpenCL 平台。

GPGPU-sim 的文档说：

> 我们使用 NVIDIA 驱动程序版本 256.40 在 GPGPU-Sim 上测试了 OpenCL [http://developer.download.nvidia.com/compute/cuda/3_1/drivers/devdriver_3.1_linux_64_256.40.run](http://developer.download.nvidia.com/compute/cuda/3_1/drivers/devdriver_3.1_linux_64_256.40.run) 注意最新版本的 NVIDIA 驱动程序产生与此版本的 GPGPU-Sim 不兼容的 PTX。

我有 NVIDIA 驱动程序版本 295.49。当我从“系统设置”中查看“其他驱动程序”时，我看到列出了两件事：“NVIDIA 加速图形驱动程序（当前版本）[推荐]”和“NVIDIA 加速图形驱动程序（发布后更新）（当前版本更新） ”。第一个已激活，因此我单击“删除”，然后第二个自动激活。所以我决定尝试安装 256.40 版本，但我收到了这条错误消息，这让我很害怕：

```
ERROR: If you are using a Linux 2.4 kernel, please make sure  
       you either have configured kernel sources matching your
       kernel or the correct set of kernel headers installed  
       on your system.                                        

       If you are using a Linux 2.6 kernel, please make sure  
       you have configured kernel sources matching your kernel
       installed on your system. If you specified a separate  
       output directory using either the "KBUILD_OUTPUT" or   
       the "O" KBUILD parameter, make sure to specify this    
       directory with the SYSOUT environment variable or with 
       the equivalent nvidia-installer command line option.   

       Depending on where and how the kernel sources (or the  
       kernel headers) were installed, you may need to specify
       their location with the SYSSRC environment variable or 
       the equivalent nvidia-installer command line option. 
```

当我尝试构建 Ocelot 时，我得到以下信息，即使我遵循了“从 LLVM SVN 中提取并构建”的说明：

```
ocelot/ocelot/ir/implementation/ExternalFunctionSet.cpp:27:36: fatal error: llvm/Target/TargetData.h: No such file or directory 
```

# c# - 在 Razor 视图引擎中将 HTML 元素作为 Func<> 传递

> ID：12888542
> 
> 赞同：3
> 
> 时间：2012-10-15T02:30:24.093
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

我正在查看一些示例代码，我看到了类似这样的内容：

```
@(Html.DataList<ProductOverviewModel>(Model, 4,
      @<div class="item-box">
        <div class="item">
          <div class="picture">
            <a href="@Url.RouteUrl("Product", new { productId = item.Id, SeName = item.SeName })" title="@item.DefaultPictureModel.Title">
              <img alt="@item.DefaultPictureModel.AlternateText" src="@item.DefaultPictureModel.ImageUrl" title="@item.DefaultPictureModel.Title" /></a>
          </div>
          <div class="product-title">
            <a href="@Url.RouteUrl("Product", new { productId = item.Id, SeName = item.SeName })" title="@item.DefaultPictureModel.Title">
              @item.Name</a>
          </div>
        </div>
      </div>
)) 
```

所以基本上有一个`DataList`辅助方法的签名是这样的：

```
public static IHtmlString DataList<T>(this HtmlHelper helper, IEnumerable<T> items, int columns, Func<T, HelperResult> template) where T : class 
```

他们通过了以下部分，`Func<T,HelperResult> template`并且效果很好：

```
 @<div class="item-box">
    <div class="item">
      <div class="picture">
        <a href="@Url.RouteUrl("Product", new { productId = item.Id, SeName = item.SeName })" title="@item.DefaultPictureModel.Title">
          <img alt="@item.DefaultPictureModel.AlternateText" src="@item.DefaultPictureModel.ImageUrl" title="@item.DefaultPictureModel.Title" /></a>
      </div>
      <div class="product-title">
        <a href="@Url.RouteUrl("Product", new { productId = item.Id, SeName = item.SeName })" title="@item.DefaultPictureModel.Title">
          @item.Name</a>
      </div>
    </div>
  </div> 
```

这是什么规则，怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:38:59.007

你已经有了所有的话:) 你正在看的是一个“模板剃刀代表”。我可以解释一下，但 Phil Haack 在这里做得更好：http: [//haacked.com/archive/2011/02/27/templated-razor-delegates.aspx](http://haacked.com/archive/2011/02/27/templated-razor-delegates.aspx)

# c# - IEnumerable，需要两个实现吗？

> ID：12888543
> 
> 赞同：7
> 
> 时间：2012-10-15T02:30:24.940
> 
> 标签：c#, interface

我正在学习实现接口和泛型，我编写了这段代码，但是 VStudio 说我没有实现 System.Collections.Enumerable.GetEnumerator()。我一般没有在下面这样做吗？它想要两个实现？

```
namespace Generic_cars
{
 class VehicleLot:IEnumerable<Vehicle>
 {
    public List<Vehicle> Lot = new List<Vehicle>();

    IEnumerator<Vehicle> IEnumerable<Vehicle>.GetEnumerator()
    {
        foreach (Vehicle v in Lot) { yield return v; };
    }
 }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T02:35:09.943

您正在实现`IEnumerable<Vehicle>`一个通用接口，它是强类型的以保存`Vehicle`对象。然而，该接口派生自`IEnumerable`非通用的旧接口，并且被键入以保存`object`对象。

如果您想实现通用版本（您这样做），您还需要实现非通用版本。通常，您只需调用泛型版本即可实现非`GetEnumerator`泛型。

此外，您可能*不想*明确地实现`GetEnumerator<Vehicle>`您的方式；这将需要您明确地将对象转换`IEnumerable<Vehicle>`为才能使用它们。相反，您可能想要这样做：

```
public IEnumerator<Vehicle> GetEnumerator() {
    foreach( Vehicle item in items ) {
        yield return item;
    }
}

IEnumerator IEnumerable.GetEnumerator() {
    return GetEnumerator();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T02:33:53.467

你为什么不这样做，你的生活会很好。

```
class VehicleLot : List<Vehicle>
{

} 
```

现在*VehicleLot*是您的集合类。您可以像对任何其他集合一样执行任何操作。

用法：

```
VehicleLot list = new VehicleLot();
list.Add(new Vehicle()); // you can add as many Vehicles as you want 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T02:44:10.093

通常，当您的类本身不实现 IEnumerable 时会更好。您可以只创建一个属性并将您的列表作为 IEnumerable 返回：

```
namespace Generic_cars
{
 class VehicleLot
 {
    public List<Vehicle> Lot = new List<Vehicle>();

    IEnumerable<Vehicle> Vehicles
    {
        return Lot;
    }
 }
} 
```

# php - MySQL 在存储过程中多次运行插入

> ID：12888544
> 
> 赞同：0
> 
> 时间：2012-10-15T02:30:52.657
> 
> 标签：php, mysql, stored-procedures

好的，假设我在 MySQL 中有这个存储过程，并用 php 编写了这个函数来发布数据。我还没有测试过这些，但我相当肯定如果有人想尝试它们，它们会一起工作。此代码基于创建合约的想法。我将如何将动态数量的客户插入`clients`和`clients_address`表中？我在想我应该在 php 中将客户端数据创建到一个数组中，然后将客户端数据与另一个具有数组大小的变量一起发送，然后在存储过程中，如果有 3 个客户端，它将如下所示

```
WHILE (x > 0)
    INSERT INTO `clients`
    INSERT INTO `client_address`
    SET x = x - 1;
END WHILE; 
```

-

```
DROP PROCEDURE IF EXISTS `create_contract`;
DELIMITER '/';
CREATE PROCEDURE `create_contract` (
    client_first_name VARCHAR(60), 
    client_middle_name VARCHAR(60), 
    client_last_name VARCHAR(60), 
    client_date_of_birth DATETIME, 
    client_street VARCHAR(60), 
    client_apartment VARCHAR(60), 
    client_city VARCHAR(60), 
    client_state VARCHAR(60),  
    client_zip SMALLINT(9),   
    contract_title VARCHAR(60),    
    contract_date DATETIME,    
    contract_file_name VARCHAR(60),
    payor_first_name VARCHAR(60), 
    payor_middle_name VARCHAR(60), 
    payor_last_name VARCHAR(60), 
    payor_date_of_birth DATETIME, 
    payor_address_street VARCHAR(60), 
    payor_address_apartment VARCHAR(60), 
    payor_address_city VARCHAR(60), 
    payor_address_state VARCHAR(60),  
    payor_address_zip SMALLINT(9),  
)

BEGIN

INSERT INTO `clients`(client_first_name,  client_middle_name, client_last_name,  client_date_of_birth)
    VALUES(client_first_name, client_middle_name, client_last_name, client_date_of_birth);

INSERT INTO `client_address` (client_street, client_apartment, client_city, client_state,client_zip)
    VALUES (client_street, client_apartment, client_city, client_state, client_zip);

INSERT INTO `payors` (payor_first_name, payor_middle_name, payor_last_name, payor_date_of_birth)
    VALUES (payor_first_name, payor_middle_name, payor_last_name, payor_date_of_birth);

INSERT INTO `payor_address` (payor_street, payor_apartment, payor_city, payor_state, payor_zip)
    VALUES (payor_street, payor_apartment, payor_city,  payor_state, payor_zip);

INSERT INTO `contracts` (contract_title, contract_date, contract_file_name)
    VALUES (contract_title, contract_date, contract_file_name);

END

<?php
    public function create_new_contract(
            $client_first_name,$client_middle_name,$client_last_name, $client_date_of_birth,
            $client_street,$client_apartment,$client_city,$client_state,$client_zip,
            $contract_name,$contract_date,$contract_file_name,
            $payor_first_name,$payor_middle_name,$payor_last_name, $payor_date_of_birth,
            $payor_street,$payor_apartment,$payor_city,$payor_state,$payor_zip){

        try{
            $query = "CALL create_new_user (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";

            $stmt = $this->DBH->prepare($query);
            $stmt->bindParam(1, $client_first_name, PDO::PARAM_STR);
            $stmt->bindParam(2, $client_middle_name, PDO::PARAM_STR);
            $stmt->bindParam(3, $client_last_name, PDO::PARAM_STR);
            $stmt->bindParam(4, $client_date_of_birth, PDO::PARAM_STR);
            $stmt->bindParam(5, $client_street, PDO::PARAM_STR);
            $stmt->bindParam(6, $client_apartment, PDO::PARAM_STR);
            $stmt->bindParam(7, $client_city, PDO::PARAM_STR);            
            $stmt->bindParam(8, $client_state, PDO::PARAM_STR);         
            $stmt->bindParam(9, $client_zip, PDO::PARAM_INT);

            $stmt->bindParam(10, $contract_name, PDO::PARAM_STR);            
            $stmt->bindParam(11, $contract_date, PDO::PARAM_STR);         
            $stmt->bindParam(12, $contract_file_name, PDO::PARAM_STR); 

            $stmt->bindParam(13, $payor_first_name, PDO::PARAM_STR);
            $stmt->bindParam(14, $payor_middle_name, PDO::PARAM_STR);
            $stmt->bindParam(15, $payor_last_name, PDO::PARAM_STR);
            $stmt->bindParam(16, $payor_date_of_birth, PDO::PARAM_STR);
            $stmt->bindParam(17, $payor_street, PDO::PARAM_STR);            
            $stmt->bindParam(18, $payor_apartment, PDO::PARAM_STR);         
            $stmt->bindParam(19, $payor_city, PDO::PARAM_STR);       
            $stmt->bindParam(20, $payor_state, PDO::PARAM_STR);         
            $stmt->bindParam(21, $payor_zip, PDO::PARAM_INT);
            $results = $stmt->execute();
            if(!$results){
                return 'Something went wrong please try again.';
            }else{
                return 'Thank you, the contracted was created.';                
            }
        } catch(PDOException $e){
                return 'Something went wrong please try again.';
                file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND); 
        }   
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T04:52:56.233

嗯，多次调用你的程序？

# android - 从 sharedpreferences 中检索和恢复 textview 信息

> ID：12888546
> 
> 赞同：0
> 
> 时间：2012-10-15T02:31:21.337
> 
> 标签：android, textview, sharedpreferences, restore

我有一个活动，允许用户输入笔记并将它们存储在动态创建的文本视图中。但是，当用户离开活动并返回时，所有创建的文本视图都会消失。每当我返回活动时，如何存储或检索所有这些创建的文本视图？另外，我认为每次添加新的文本视图时，我的共享首选项都会被覆盖。有什么建议么？

```
public class DocNoteActivity extends Activity {
private LinearLayout nLayout;
private EditText etDocNote;
private Button btnAdd1;
public static final String PREFS_NAME = "MyPrefsFile";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.adddocnote);           
    etDocNote = (EditText) findViewById(R.id.editDocNote);
    btnAdd1 = (Button) findViewById(R.id.btnAdd1);
    nLayout = (LinearLayout) findViewById(R.id.linearLayout);
    TextView tvNote = new TextView(this);
    tvNote.setText("");         
    btnAdd1.setOnClickListener(onClick());
}

private OnClickListener onClick() {
    // TODO Auto-generated method stub
    return new OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub
            String newDocNote = etDocNote.getText().toString();
            nLayout.addView(createNewTextView(newDocNote));
            getSharedPreferences("myprefs", 0).edit().putString("etDocNote", newDocNote).commit();
        }

    };
}
private TextView createNewTextView(String newText) {
    // TODO Auto-generated method stub
    LayoutParams lparams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    TextView tvNote = new TextView(this);
    tvNote.setLayoutParams(lparams);
    tvNote.setText(newText);

    return tvNote;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:33:01.930

如果您想检索笔记，您必须使用数据库（即 SQLite），因为每次将笔记保存在 SharedPreferences 中时，它都会被覆盖。所以我推荐你使用数据库。为此，这里有一些我认为对您有帮助的有用资源。

1 - [http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

2 - [http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

3 - [http://android-er.blogspot.in/2011/06/simple-example-using-androids-sqlite_02.html](http://android-er.blogspot.in/2011/06/simple-example-using-androids-sqlite_02.html)

**注意 - SharedPreferences 用于存储键值对数据。大多数情况下，我们可以用 Android 方式说一种会话管理。我主要将用户名和密码类型的数据存储在 SharedPreferences 中。**

希望这可以帮助。

# java - Java JSSE TLS - 此连接是否双向安全加密？

> ID：12888552
> 
> 赞同：5
> 
> 时间：2012-10-15T02:32:48.877
> 
> 标签：java, network-programming, ssl, jsse

在 Java 中使用 JSSE 和 TLS。我在服务器和客户端之间创建了一个安全套接字。在最终让套接字安全连接之后，我仍然对现有代码的安全性有一个基本问题。我按照教程中的说明进行操作，有时 JavaDoc 中的文档非常精确，但有点含糊，除非您说行话的斯瓦赫里语方言......

我在 C++ 中从事网络编程已经有一段时间了。向 Java 的过渡很容易。然而，最近，我发现确保流量安全是谨慎的做法。话虽如此：

我想以与 Web 浏览器创建安全套接字相同的方式创建安全套接字，因此双向流量都被加密。客户端可以看到从服务器发送的他们的个人帐户信息（如果被拦截很糟糕），客户端可以安全地将他们的用户名和密码发送到服务器（如果被拦截也很糟糕）。

我完全了解公钥密码术的工作原理，但仅公钥密码术就有副作用。您将公钥发送给客户端，客户端使用公钥加密，然后将数据发送到服务器，只有服务器可以解密。现在据我了解，服务器使用私钥加密发送给客户端的消息，并且需要添加另一层安全性以防止任何拥有公钥的人能够解密它。

1.  我有一个公钥/私钥对存储在文件 public.key 和 private.key 中（我使用 JSSE 的 keytool 实用程序制作了这些
2.  我在客户端中包含了 public.key
3.  我在服务器中包含了 private.key

客户端类：

```
 KeyStore keyStore;
    TrustManagerFactory tmf;
    KeyManagerFactory kmf;
    SSLContext sslContext;
    SecureRandom secureRandom = new SecureRandom();
    secureRandom.nextInt();

        keyStore = KeyStore.getInstance("JKS");
        keyStore.load(this.getClass().getClassLoader().getResourceAsStream("server.public"),"public".toCharArray());
        tmf = TrustManagerFactory.getInstance("SunX509");
        tmf.init(keyStore);
        kmf = KeyManagerFactory.getInstance("SunX509");
        kmf.init(keyStore, "public".toCharArray());
        sslContext = SSLContext.getInstance("TLS");
        sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), secureRandom);
        SSLSocketFactory sslsocketfactory = sslContext.getSocketFactory();
        SSLSocket sslsocket = (SSLSocket)sslsocketfactory.createSocket("localhost", 9999); 
```

服务器类：

```
 String passphrase = "secret"
    KeyStore keyStore;
    TrustManagerFactory tmf;
    KeyManagerFactory kmf;
    SSLContext sslContext;
    SecureRandom secureRandom = new SecureRandom();
    secureRandom.nextInt();

        keyStore = KeyStore.getInstance("JKS");
        keyStore.load(this.getClass().getClassLoader().getResourceAsStream("server.private"),passphrase.toCharArray());
        tmf = TrustManagerFactory.getInstance("SunX509");
        tmf.init(keyStore);
        kmf = KeyManagerFactory.getInstance("SunX509");
        kmf.init(keyStore, passphrase.toCharArray());
        sslContext = SSLContext.getInstance("TLS");
        sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), secureRandom);
        SSLServerSocketFactory sslserversocketfactory = sslContext.getServerSocketFactory();
        SSLServerSocket sslserversocket =
        (SSLServerSocket)sslserversocketfactory.createServerSocket(9999); 
```

/ ***** ** *** ** *****问题***** ** *** ** *** *** /

一切正常！我将套接字附加到 BufferedReader 和 BufferedWriter 并在 accept(); 之后开始来回漂亮地交谈；从客户端连接并启动我的客户端和服务器发送/接收循环。

现在我知道此时客户端到服务器的通信是安全的。只有服务器密钥可以解密来自客户端的流量。但是服务器到客户端的通信呢？客户端的密钥可以解密来自服务器的消息，但在公钥加密 101 中，您了解到客户端现在应该向服务器发送公钥。这是在这段代码的幕后发生的吗？SSLContext 是否解决了这个问题？或者现在我有一个从客户端到服务器的加密连接，我现在是否也希望为客户端生成一个私钥/公钥对？

让我知道上述代码中发送和接收的流量是否在两个方向上实际上都是安全的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T08:42:32.680

SSL/TLS 中的证书（及其私钥）仅用于验证 SSL/TLS 中的各方（通常，只有服务器使用证书）。

实际加密是使用在握手期间协商的共享/对称密钥完成的，从使用经过身份验证的密钥交换形式交换的预主密钥派生（参见[TLS 规范，第 F.1.1 节](https://www.rfc-editor.org/rfc/rfc4346#appendix-F.1.1)。

这种经过身份验证的密钥交换如何完成取决于密码套件，但最终结果是相同的：两方之间共享的预主密钥，保证只有客户端和服务器知道其证书的私钥.

在预主密钥交换之后，计算主密钥本身，从中派生一对密钥（如[*密钥计算*部分所述](https://www.rfc-editor.org/rfc/rfc4346#section-6.3)）：一个供客户端写入（以及供服务器读取），另一个供服务器写入（以及供客户端读取）。（还会生成 MAC 机密，以保证连接完整性。）

原则上，并非所有密码套件都提供加密和经过身份验证的密钥交换（请参阅[*密码套件定义*部分](https://www.rfc-editor.org/rfc/rfc4346#appendix-C)），但所有在 JSSE 中默认启用的 SunJSSE 提供程序都提供（请参阅SunJSSE 提供程序文档中的[*密码套件*表](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)）。简而言之，不要启用带有名称`anon`或`NULL`名称中的密码套件。

关于您的代码：

*   有多个代码示例可以修复这样的 Key/TrustManagerFactory 算法（“SunX509”）。这通常是硬编码 Java 1.4 默认值的代码。从 Java 5 开始，默认的 TMF 算法是`PKIX`（请参阅JSSE 参考指南的[*自定义*部分](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization)）。解决这个问题的最好方法是使用`TrustManagerFactory.getDefaultAlgorithm()`（KMF 也是如此），这也将允许您的代码在其他不支持的 JRE `SunX509`（例如 IBM）上运行。

*   由于您没有使用客户端证书身份验证，因此`KeyManagerFactory`在客户端没有任何意义。您使用可能没有私钥的密钥库对其进行初始化，这使其毫无意义。你不妨使用`sslContext.init(null, tmf.getTrustManagers(), null)`. （这两种情况下的安全随机都是一样的，让 JSSE 使用它的默认值。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:28:37.937

您确实了解 PKI 的工作原理，但是您缺少 SSL 实现的两个关键部分。首先，大多数 PKI 算法允许双向加密流量。您可以使用公钥发送加密消息，并且只有拥有私钥的人才能读取它，这称为加密。您还可以使用私钥对消息进行加密，任何拥有公钥的人都可以解密，这称为数字签名。

另一个缺失的部分是 SSL 不使用 PKI 在客户端和服务器之间发送网络流量。它使用对称加密算法。然而，对称加密的密钥（称为会话密钥）是使用相当复杂的挑战-响应协议建立的，该协议采用 PKI 和证书。在这个阶段，服务器向客户端证明它不是中间人，客户端可以选择向服务器证明它的证书，如果它有任何更强的身份验证，并建立对称会话密钥。更多细节在这里[https://www.rfc-editor.org/rfc/rfc5246](https://www.rfc-editor.org/rfc/rfc5246)

对称密钥用于使用 RC5 或 AES 等算法加密流量

# python - 如何使用多个后端运行相同的单元测试套件

> ID：12888562
> 
> 赞同：3
> 
> 时间：2012-10-15T02:33:57.727
> 
> 标签：python, unit-testing

我有一个 JSON 解析器库（[ijson](https://github.com/isagalaev/ijson)）和一个使用 unittest 的测试套件。该库实际上有几个解析实现——“后端”——以具有相同 API 的模块的形式。我想为每个可用的后端自动运行几次测试套件。我的目标是：

*   我想将所有测试保存在一个地方，因为它们与后端无关。
*   我希望当前使用的后端的名称在测试失败时以某种方式可见。
*   我希望能够像 unittest 通常允许的那样运行单个 TestCase 或单个测试。

那么为此组织测试套件的最佳方法是什么？编写自定义测试运行器？让 TestCases 自己加载后端？必须为每个后端生成单独的 TestCase 类？

顺便说一句，我并没有特别与 unittest 库结婚，如果它解决了问题，我愿意尝试另一个。但是 unittest 更可取，因为我已经有了测试代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:51:04.450

一种常见的方法是使用一个抽象方法将所有测试组合在一个类中，该方法创建一个后端实例（如果您需要在测试中创建多个实例），或者期望`setUp`创建一个后端实例。

然后，您可以根据需要创建创建不同后端的子类。

如果您正在使用自动检测`TestCase`子类的测试加载器，您可能需要进行一项更改：不要将公共基类`TestCase`设为 : 的子类，而是将其视为 mixin，并让后端类同时从`TestCase`和混音。

例如：

```
class BackendTests:
    def make_backend(self):
        raise NotImplementedError

    def test_one(self):
        backend = self.make_backend()
        # perform a test on the backend

class FooBackendTests(unittest.TestCase, BackendTests):
    def make_backend(self):
        # Create an instance of the "foo" backend:
        return foo_backend

class BarBackendTests(unittest.TestCase, BackendTests):
    def make_backend(self):
        # Create an instance of the "bar" backend:
        return bar_backend 
```

从上面构建测试套件时，您将拥有独立的测试用例`FooBackendTests.test_one`，并`BarBackendTests.test_one`在两个后端测试相同的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:44:41.083

我将 James Henstridge 的想法与一个包含所有测试的 mixin 类一起使用，但实际的测试用例随后会强制生成，因为后端可能在导入时失败，在这种情况下我们不想测试它们：

```
class BackendTests(object):
    def test_something(self):
        # using self.backend 

# Generating real TestCase classes for each importable backend
for name in ['backend1', 'backend2', 'backend3']:
    try:
        classname = '%sTest' % name.capitalize()
        locals()[classname] = type(
            classname,
            (unittest.TestCase, BackendTests),
            {'backend': import_module('backends.%s' % name)},
        )
    except ImportError:
        pass 
```

# android - Android 主题标签实现

> ID：12888563
> 
> 赞同：2
> 
> 时间：2012-10-15T02:33:58.737
> 
> 标签：android, hashtag

我一直在寻找一个关于如何在 Android 中实现主题标签的不错的示例或教程，但我找不到任何东西，可能是因为它是面向 iPhone 的机制，我仍然需要知道如何去做。

我有一个`TextView`，我希望当用户输入 # 或 @ 时，会发生以下情况：

对于 # - # 之后的所有字符都将在用户按下空格后创建的气泡内。

`LinearLayout`for @ - 自动完成搜索文本框将作为搜索结果的下拉列表 ( ) 打开。

由于我是新用户，因此无法在此处添加快照。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T14:20:50.537

这是一个链接，举例说明您可能需要什么：

[http://sourabhsoni.com/implementing-hashtags-in-android-application](http://sourabhsoni.com/implementing-hashtags-in-android-application)

# .net - SOAP 客户端“无法创建 SSL/TLS 安全通道”

> ID：12888569
> 
> 赞同：1
> 
> 时间：2012-10-15T02:35:02.800
> 
> 标签：.net, c#-4.0, soap, ssl

一些背景知识我正在开发一个使用 SOAP 连接到 Web 服务的网页。当我在 Web 服务上调用方法时出现此错误：

```
The request was aborted: Could not create SSL/TLS secure channel. 
```

现在这里变得很奇怪，只有当我在 IIS 下运行网站时才会发生这种情况。在 Visual Studio 开发服务器下运行，一切都按预期工作。

我一直在阅读并发现类似的问题。首先，我排除了用于向服务器进行身份验证的证书。从 X509Store 获取证书后，我使用 GetRawCertDataString() 方法将证书数据写入文件并在 IIS 和 VS 下运行，它们是相同的。

我也试过：

```
 ServicePointManager.Expect100Continue = true;
    ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3; 
```

没有运气。

然后我启用了 SChannel 日志记录。在VS下运行我可以看到在VS下握手成功的信息消息：

```
An SSL client handshake completed successfully. The negotiated cryptographic parameters are as follows.

   Protocol: SSL 3.0
   CipherSuite: 0xa
   Exchange strength: 2048 
```

但是在 IIS 下运行时没有错误消息。发送私钥数据时有信息消息，然后什么都没有。

任何帮助或建议将不胜感激。

谢谢

# php - 如何保护控制器免受直接访问？

> ID：12888572
> 
> 赞同：3
> 
> 时间：2012-10-15T02:35:23.607
> 
> 标签：php, jquery, codeigniter

我正在将 codeigniter 与 jquery 一起使用，如果您向我解释如何保护控制器免受直接访问，那就太好了。例如，我使用该标准 jquery 行查看：

```
$('#handler').load('tools/get_stats'); 
```

工具它是我的控制器，具有加载统计数据的功能。如果我直接在浏览器中写入脚本[http://site.com/tools/get_stats](http://site.com/tools/get_stats)的完整地址，浏览器打开，当然是那个数据。如何保护来自浏览器的直接控制器访问？我希望我的数据仅在视图中加载，而不是在控制器直接访问中加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T02:52:50.297

通常，由于需要提供访问权限和 HTTP 的简单性，您无法以有意义的方式进行操作。或者更基本地说，您不能拒绝访问您需要提供的信息（在这种情况下是无状态连接信息）。最好的初始步骤是确保控制器只允许访问用户应该有权访问的数据（无论他们如何连接），而不是试图根据容易被篡改的请求信息进行限制。

话虽这么说，如果你有一些奇怪的理由去追求这个，你可以使用某种形式的单次使用令牌与 AJAX 请求一起传递。例如，您可以生成一个随机密钥，将其保存在某个地方（理想情况下只是在内存中的哈希表之类的东西中，因为不应该有足够长的延迟来保证其他情况），然后将它与将发出 ajax 的页面一起传递出去要求。令牌与请求一起传回并被删除，然后该令牌将不再有效。控制器将无法直接访问，因为它需要一个令牌。

这*仍然*可以解决，因为可以停止该过程并使用已发行的令牌，但它会阻止任何人只是在玩 curl （所以真的不值得努力）。

长话短说，你不能以任何任何人都无法在 10 分钟内解决的方式来做到这一点。专注于确保您只公开您想要的数据，无论它是如何检索的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T03:12:29.783

`is_ajax_request()`CodeIgniter 输入类有一个为此目的调用的方法。

```
if ($this->input->is_ajax_request()) 
{
    //do something
} 
else 
{
    show_error("No direct access allowed");
    //or redirect
} 
```

如果你有一个专用的 Ajax 控制器，你当然可以在`__construct()`方法中包含这个逻辑，否则它可以在你的控制器中逐个方法地实现。

* * *

看：

*   [http://ellislab.com/codeigniter/user_guide/libraries/input.html](http://ellislab.com/codeigniter/user_guide/libraries/input.html)

# wordpress-theming - 添加到现有查询后如何遍历自定义帖子类型

> ID：12888575
> 
> 赞同：1
> 
> 时间：2012-10-15T02:35:53.357
> 
> 标签：wordpress-theming

我有点坚持一个项目，如果有人可以帮助我完成那个项目，我将不胜感激。我到处搜索了一些参考资料（当然首先是在这里），但我只能找到我需要的一些零碎的东西。

我需要最终得到以下结构：

```
<!--LOOP 1 -  WORD PRESS PARENT PAGES-->
<div id="post-parent1-name">...</div>

<div id="post-parent2-name">

    <h2><?php the_title(); ?></h2>
    <div class='post-content'><?php the_content(); ?></div>

    <!--LOOP 2 -  WORD PRESS CHILDREN PAGES-->
    <div id="post-child1-name">...</div>

    <div id="post-child2-name">
        <h3><?php the_title(); ?></h3>  

        <!--LOOP 3 - WORD PRESS CUSTOM POST TYPE-->
        <div id="custom-post-type-name">
            <h4><?php the_title(); ?></h4>
            <div class='post-content'><?php the_content(); ?></div>
        </div>
    </div>

    <div id="post-child3-name">...</div>

</div>

<div id="post-parent3-name">...</div>
<div id="post-parent4-name">...</div> 
```

我在 functions.php 中使用了以下过滤器将自定义帖子类型添加到查询中：

```
<?php
 function insert_post( $query ) {
 if ( $post->post_name == 'my_parent_post_name' && $query->is_main_query() )
 $query->set( 'post_type', array( 'post', 'my_custom_post_type') );
 return $query;
 }
 add_filter( 'pre_get_posts', 'insert_post' );
?> 
```

我已经设法让第一个和第二个工作正常，但是我不知道如何让第三个工作**（这是我的自定义帖子类型）分别为我**带来标题、内容和缩略图。

对不起，伙计们，我知道这看起来有点令人困惑，但我希望这是有道理的。

干杯，道格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:24:00.413

经过几个小时试图找到该问题的答案后，我终于使用以下方法实现了我的目标：

`<?php global $wp_query; ?>`

[功能参考/查询帖子](http://codex.wordpress.org/Function_Reference/query_posts)

我仍然不太确定 action 的用法`add_action( 'pre_get_posts' , 'ucc_pre_get_posts_filter' );`，尽管我已经设法将一个新数组添加到我预先存在的查询中而不影响它：

**已有查询：**

`<?php query_posts(array('post_type' => 'page', 'order'=>'ASC', 'post_parent' => 0)); ?>`

*第一个循环在这里*

**使用 $wp_query 包含一个新数组：**

`<?php $args = array_merge( $wp_query->query_vars, array( 'post_type' => 'my_custom_post_type', 'posts_per_page' => 5 ) ); query_posts( $args ); ?>`

*第三循环在这里*

干杯伙计们！

# linux - 给定命令行参数循环遍历不同目录中的文件

> ID：12888577
> 
> 赞同：1
> 
> 时间：2012-10-15T02:36:04.513
> 
> 标签：linux, shell

我正在尝试扩展一个脚本，该脚本实现了 Linux 上文件的回收站之类的东西。我有我在底部扩展的代码。

在我的扩展中，当脚本出现命令行参数时，`-cleanup`我想遍历目录中的`/home/7/bearm/.garbage`文件，并让用户决定是否要删除该文件。

但是，我不知道如何检测命令行参数何时存在。命令行可以有其他参数，我只是想在`-cleanup`使用时循环遍历文件。

我也不知道如何循环访问不同目录 ( `/home/7/bearm/.garbage`) 中的文件。

我将如何四处做这些事情？

```
set directory = '/home/7/bearm/.garbage/'

if(! -d "$directory") then
    mkdir .garbage
    mv .garbage /home/7/bearm/
endif

set n = 1

while ($n <= $#argv)
    set file = $argv[$n]
    if(-d $file) then
        #do nothing
        echo "Cannot trash directory $file"
    else
        mv $file /home/7/bearm/.garbage
        echo "Trashed $file"
    endif
    @ n++
end
du -h /home/7/bearm/.garbage 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:40:55.007

要测试参数是否包含`-cleanup`，您可以这样做（使用`ash`on测试`Minix3`）：

```
if echo "$@" | grep -- "-cleanup" >/dev/null 2>&1; then
    echo "-cleanup is present..."
fi 
```

此外，如果您想要使用长 GNU 样式选项的适当解决方案，请参阅[http://www.sputnick-area.net/scripts/getopts_long_example.sh](http://www.sputnick-area.net/scripts/getopts_long_example.sh)和[http://www.sputnick-area.net/scripts/getopts_long。嘘](http://www.sputnick-area.net/scripts/getopts_long.sh)

* * *

`bash`您的伪脚本的一个版本：

```
#!/bin/bash

directory='/home/7/bearm/.garbage/'

mkdir -p "$directory"

for arg; do
    if [[ -d $arg ]]; then 
        #do nothing
        echo "Cannot trash directory $arg" >&2
    else    
        mv "$arg" "$directory"
        echo "Trashed $arg"
    fi      
done    

du -sh "$directory" 
```

随意使用`-cleanup`switch 改进它。

# c - 将字符数组的指针发送到 C 中的函数

> ID：12888579
> 
> 赞同：1
> 
> 时间：2012-10-15T02:36:20.780
> 
> 标签：c, arrays, string, pointers, character

好的，长话短说我遇到了一些麻烦：我正在尝试将字符数组（字符串）的起始地址发送到函数。一旦函数获得指针，我希望函数一一解析字符（以修改某些字符）。截至目前，我只是将其设置为打印每个字符，但我仍然非常失败。

这就是我所拥有的：

```
#include "system.h"
#include <stdio.h>

typedef unsigned int uint32;
typedef unsigned short uint16;
typedef unsigned char uint8;

void EXCLAIM(char *msg){
    char the_char = 0;
    the_char = msg;
    while (the_char != 0)
    {
        printf(the_char);
        *msg = *(msg++);
        the_char = *msg;
    }
}

int main(void) {
    char *first_str = "This is a test. Will this work. I. am. Not. Sure...";
    while (1) {
        EXCLAIM(first_str);
    }
} 
```

编辑：

这是我正在尝试做的更新代码；发送指针并遍历每个字符，用感叹号替换所有句点。

```
#include "system.h"
#include <stdio.h>

typedef unsigned int uint32;
typedef unsigned short uint16;
typedef unsigned char uint8;

void exclaim(char *msg){
    int i;
    for( i=0; msg[i]; i++ )
    {
        if (msg[i] == '.') {
            msg[i] = '!';
        }
    }
printf(msg);
}

int main(void) {
    char *the_sentences = "This is a test. Will this work. I. am. Not. Sure...";
    while (1) {
        exclaim(the_sentences);
    }
} 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:40:12.527

尝试这样的事情：

```
#include <stdio.h>

void exclaim(char * s)
{
    while (*s != '\0')
    {
        putc(*s);
        ++s;
    }
} 
```

笔记：

*   不要大喊大叫。除了预处理器宏之外，不要使用所有大写字母。

*   打印字符，而不是字符串。

*   无需再复制一份。函数参数*已经*是可以直接使用的局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T02:40:41.410

你的 main() 很好。

问题在于 EXCLAIM 中的指针算法。

我可以看到两个有用的不同版本：

使用指针算法

```
while (*msg)
{
    printf("%c", *msg);
    msg++
} 
```

使用索引

```
int i;
char the_char;
for( i=0; msg[i]; i++ )
{
    printf( "%c", msg[i] );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T02:46:29.537

你应该使用：

```
 the_char = *msg; 
```

不是：

```
 the_char = msg; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T02:54:28.413

```
*msg = *(msg++); 
```

你想用这行代码做什么？你了解它的实际作用吗？首先，您需要知道`msg++`更改指针的值。然后，您将它使用的任何内容分配给新位置。这意味着整个字符串将被字符串中第一个字符的副本替换。

这个故事的寓意是不要在一行代码中做太多事情。您必须特别小心增量运算符`++`。即使是经验丰富的程序员通常也会将类似的东西`msg++`放在自己的行中，因为当您尝试将它与复杂的表达式混合时它变得太复杂了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T04:22:47.797

未提及但尝试修改字符串文字是未定义的行为。

您需要更改以下行，

`char *the_sentences = "This is a test. Will this work. I. am. Not. Sure...";`

到一个数组。

`char the_sentences[] = "This is a test. Will this work. I. am. Not. Sure...";`

然后随意修改函数内的内容。

```
#include <stdio.h>

void foo(char *msg)
{
    for (; *msg; msg++)
        if (*msg == '?')
            *msg = '!';
}

int main(void)
{
    char line[] = "Hello, world?? How are you tonight??";

    foo(line);

    puts(line);
    return 0;
} 
```

# javascript - 有没有办法告诉 Chrome 网络调试器在页面坐标中显示当前鼠标位置？

> ID：12888584
> 
> 赞同：65
> 
> 时间：2012-10-15T02:36:58.507
> 
> 标签：javascript, html, google-chrome, debugging

我经常使用 Chrome 网络调试器调试我的 javascript 代码。在元素选项卡中，将鼠标悬停在一个元素上会显示一个工具提示，其中包含一些信息，包括该元素的宽度和高度。

有时，我需要查看当前鼠标位置的页面坐标。但似乎调试器不显示这种信息。

那么，有没有办法添加呢？像扩展程序一样，或者可能还有其他选择？

**编辑**

使用接受的答案，我可以添加以下书签并拥有我想要的内容：

```
javascript:document.onmousemove = function(e){var x = e.pageX;var y = e.pageY;e.target.title = "X is "+x+" and Y is "+y;}; 
```

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-10-15T02:50:40.543

你可以在控制台中输入这个，

```
document.onmousemove = function(e){
var x = e.pageX;
var y = e.pageY;
e.target.title = "X is "+x+" and Y is "+y;
}; 
```

这将在元素工具提示中为您提供鼠标移动时的鼠标位置。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2019-01-26T02:55:21.757

将[ppsreejith](https://stackoverflow.com/users/1405711/ppsreejith)的[答案](https://stackoverflow.com/a/12888676/4106215)与[JHarding](https://stackoverflow.com/users/920297/jharding)的[答案](https://stackoverflow.com/a/8993124/4106215)与 Chrome 70+ 的[Live Expressions](https://developers.google.com/web/updates/2018/08/devtools#watch)相结合，您可以获得不断更新`(x, y)`的坐标，而无需填满 devtools 控制台：

在控制台中输入：

```
var x, y; document.onmousemove=(e)=>{x=e.pageX;y=e.pageY;} 
```

将此作为实时表达式输入：

```
"("+x+", "+y+")" 
```

[![](../Images/9a6339b15ec39fe272426d590bc1d53d.png)](https://i.stack.imgur.com/h0Oz5.png)

这适用于 SVG。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-06-21T09:14:59.553

当我需要查看鼠标的坐标时，我会使用这个 Chrome 插件： [坐标插件](https://chrome.google.com/webstore/detail/coordinates/bpflbjmbfccblbhlcmlgkajdpoiepmkd/related)

# android - Android 4.0.3+ 上的全局音频和会话 ID

> ID：12888585
> 
> 赞同：5
> 
> 时间：2012-10-15T02:37:01.923
> 
> 标签：android, audio

我在市场上有一个应用程序，可以将低音增强效果应用于全球音频混音。不幸的是，自 4.0.3 以来，音频会话 0 的使用已被弃用，我无法找到解决方法。有没有办法扫描音频会话 ID？这是我的日志：

```
10-16 20:58:01.569: E/AndroidRuntime(645): FATAL EXCEPTION: main
10-16 20:58:01.569: E/AndroidRuntime(645): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.rustlesoft.bassbooster/com.rustlesoft.bassbooster.BassBooster}: java.lang.IllegalArgumentException: Effect type: 0634f220-ddd4-11db-a0fc-0002a5d5c51b not supported.
10-16 20:58:01.569: E/AndroidRuntime(645):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
10-16 20:58:01.569: E/AndroidRuntime(645):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-16 20:58:01.569: E/AndroidRuntime(645):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-16 20:58:01.569: E/AndroidRuntime(645):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-16 20:58:01.569: E/AndroidRuntime(645):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-16 20:58:01.569: E/AndroidRuntime(645):  at android.os.Looper.loop(Looper.java:137)
10-16 20:58:01.569: E/AndroidRuntime(645):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-16 20:58:01.569: E/AndroidRuntime(645):  at java.lang.reflect.Method.invokeNative(Native Method)
10-16 20:58:01.569: E/AndroidRuntime(645):  at java.lang.reflect.Method.invoke(Method.java:511)
10-16 20:58:01.569: E/AndroidRuntime(645):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-16 20:58:01.569: E/AndroidRuntime(645):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-16 20:58:01.569: E/AndroidRuntime(645):  at dalvik.system.NativeStart.main(Native Method)
10-16 20:58:01.569: E/AndroidRuntime(645): Caused by: java.lang.IllegalArgumentException: Effect type: 0634f220-ddd4-11db-a0fc-0002a5d5c51b not supported.
10-16 20:58:01.569: E/AndroidRuntime(645):  at android.media.audiofx.AudioEffect.<init>(AudioEffect.java:381)
10-16 20:58:01.569: E/AndroidRuntime(645):  at android.media.audiofx.BassBoost.<init>(BassBoost.java:101)
10-16 20:58:01.569: E/AndroidRuntime(645):  at com.rustlesoft.bassbooster.BassBooster.<init>(BassBooster.java:14)
10-16 20:58:01.569: E/AndroidRuntime(645):  at java.lang.Class.newInstanceImpl(Native Method)
10-16 20:58:01.569: E/AndroidRuntime(645):  at java.lang.Class.newInstance(Class.java:1319)
10-16 20:58:01.569: E/AndroidRuntime(645):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
10-16 20:58:01.569: E/AndroidRuntime(645):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
10-16 20:58:01.569: E/AndroidRuntime(645):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:23:14.943

它可能已被弃用，但对全局输出组合（会话 0）应用效果应该在 ICS 和 JB 中仍然有效，只要您获得`MODIFY_AUDIO_SETTINGS`许可并且您也不对除 0 以外的会话应用任何效果.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T02:17:50.370

这可能会抓住一根稻草，但查看您的堆栈跟踪，但我怀疑您尝试应用的音频效果可能根本不受支持。

您可以尝试调用[queryEffects()](http://developer.android.com/reference/android/media/audiofx/AudioEffect.html#queryEffects%28%29)并遍历[Descriptor](http://developer.android.com/reference/android/media/audiofx/AudioEffect.Descriptor.html)对象以检查是否首先支持您尝试应用的音频效果类型

# python - Python Opencv 相机选择超时

> ID：12888587
> 
> 赞同：3
> 
> 时间：2012-10-15T02:37:23.510
> 
> 标签：python, linux, opencv, camera, python-2.7

=问题1============================

我正在使用 python 2.7.3、Ubuntu 和 opencv。

我使用了这个脚本：

```
import sys, os
import pygtk, gtk, gobject
import pygst
import Image;
import cv;

camcapture = cv.CreateCameraCapture(0)
cv.SetCaptureProperty(camcapture,cv.CV_CAP_PROP_FRAME_WIDTH, 640)
cv.SetCaptureProperty(camcapture,cv.CV_CAP_PROP_FRAME_HEIGHT, 480);

if not camcapture:
    print "Error opening WebCAM"
    sys.exit(1)

while 1:
frame = cv.QueryFrame(camcapture)
if frame is None:
    break
    cv.ShowImage('Camera', frame)
    k=cv.WaitKey(1); 
```

我明白了：

```
** (test.py:21226): WARNING **: The connection is closed
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
select timeout 
```

它停止流式传输相机！我希望你能帮帮我！

=问题2（补充）============================

你知道任何可以在网络摄像头图像中查找对象的 Python 程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:07:21.257

尝试

```
k=cv.WaitKey(20) 
```

或者

```
k=cv.WaitKey(30) 
```

该程序可能会失败，因为您尝试访问相机的速度太快。

问题2：看模板。

# html - 用 VBScript 正则表达式替换 HTML

> ID：12888588
> 
> 赞同：2
> 
> 时间：2012-10-15T02:37:30.920
> 
> 标签：html, regex, vbscript

我正在尝试在 VBScript 中使用 Regex 将具有“候选人”类的 HTML 标记替换为文本“PLACEHOLDER”。但是，它并不总是有效。

```
<[^\>]*class=""[^\>]*candidate[^\>]*""[^\>]*>([\s\S]*?)</[^\>]*>

Flags: IgnoreCase = True, Multiline = True, Global = True 
```

问题是我不确定哪种类型的 HTML 标记将包含此类（例如，它可能是 < div > 标记或 < p > 标记）。其次，正则表达式不适用于内部 HTML 标记。

主题 HTML：

```
<div class="outer">
<div class="normal">
<p><strong><em>Test</em></strong></p>
</div>
<div class="candidate">
<p>Test 1:</p>
<ul>
    <li>Test 2</li>
    <li>Test 3 </li>
    <li>Test 4 </li>
</ul>
<p>Test 5</p>
</div>
<p>Test 6</p>
<div class="normal">
<p><strong>Test 7</strong></p>
</div>
</div> 
```

预期的：

```
<div class="outer">
<div class="normal">
<p><strong><em>Test</em></strong></p>
</div>
<div class="candidate">
PLACEHOLDER
</div>
<p>Test 6</p>
<div class="normal">
<p><strong>Test 7</strong></p>
</div>
</div> 
```

实际的：

```
<div class="outer">
<div class="normal">
<p><strong><em>Test</em></strong></p>
</div>
<div class="candidate">
PLACEHOLDER
    <li>Test 2</li>
    <li>Test 3 </li>
    <li>Test 4 </li>
</ul>
<p>Test 5</p>
</div>
<p>Test 6</p>
<div class="normal">
<p><strong>Test 7</strong></p>
</div>
</div> 
```

相同的 HTML 标记也可能具有相同类型但不同类的内部标记，这些标记目前偶尔会起作用。

例如：

```
<div class="candidate">Test<div class="normal">Test</div></div> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T06:42:17.037

它*必须*是正则表达式吗？[使用MSHTML](http://msdn.microsoft.com/en-us/library/aa741317%28VS.85%29.aspx)（或任何其他 HTML 解析器），这项任务非常简单。在此示例中，我将您的主题 HTML 放在一个名为“test.htm”的文件中：

```
Option Explicit

Const ForReading = 1

Dim fso
Set fso = CreateObject("Scripting.FileSystemObject")
Dim inFile
Set inFile = fso.OpenTextFile("test.htm", ForReading)

Dim html
Set html = CreateObject("htmlfile")
html.write inFile.ReadAll()
inFile.Close

Dim allElements
Set allElements = html.getElementsByTagName("*")

Dim el
For Each el in allElements
    If (HasClass(el, "candidate")) Then
        el.innerText = "PLACEHOLDER"
    End If
Next

WScript.Echo html.body.outerHtml

' Takes into account the fact that the HTML "class" attribute can
' contain multiple whitespace-delimited classes
Function HasClass(el, className)
    Dim re
    Set re = New RegExp

    re.Pattern = "\b" & className & "\b"
    HasClass = re.Test(el.className)
End Function 
```

# linux - Linux命令行如何接受没有pin的蓝牙设备配对

> ID：12888589
> 
> 赞同：39
> 
> 时间：2012-10-15T02:37:47.633
> 
> 标签：linux, command-line, bluetooth, bluez

有没有一种方法可以在不需要引脚的情况下在 linux 中配对设备（出于测试目的，所以我需要在没有人工交互的情况下完成它，假设您具有 root 访问权限）？

bluez-simple-agent 似乎需要一个别针，除了一些简单的设备（例如鼠标）。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-24T17:31:47.660

输入 PIN 实际上是一种过时的配对方法，现在称为[Legacy Pairing](http://en.wikipedia.org/wiki/Bluetooth#Pairing_mechanisms)。安全简单配对模式适用于蓝牙 v2.1 及更高版本，包括大多数现代蓝牙设备。SSPMode 身份验证由蓝牙协议栈处理，因此无需用户交互即可工作。

以下是连接设备的方法：

```
# hciconfig hci0 sspmode 1
# hciconfig hci0 sspmode
hci0:   Type: BR/EDR  Bus: USB
BD Address: AA:BB:CC:DD:EE:FF  ACL MTU: 1021:8  SCO MTU: 64:1
Simple Pairing mode: Enabled
# hciconfig hci0 piscan
# sdptool add SP
# hcitool scan
    00:11:22:33:44:55    My_Device
# rfcomm connect /dev/rfcomm0 00:11:22:33:44:55 1 &
Connected /dev/rfcomm0 to 00:11:22:33:44:55 on channel 1
Press CTRL-C for hangup 
```

这将建立与设备的串行连接。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-04-15T11:27:09.337

follow steps (CentOs):

1.  bluetoothctl
2.  devices
3.  scan on
4.  pair 34:88:5D:51:5A:95 (34:88:5D:51:5A:95 is my device code,replace it with yours)
5.  trust 34:88:5D:51:5A:95
6.  connect 34:88:5D:51:5A:95

If you want more details [https://www.youtube.com/watch?v=CB1E4Ir3AV4](https://www.youtube.com/watch?v=CB1E4Ir3AV4)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-24T00:03:47.557

尝试在 /etc/bluetooth/hcid.conf 中将安全设置为无

[http://linux.die.net/man/5/hcid.conf](http://linux.die.net/man/5/hcid.conf)

这可能仅适用于 HCI 设备（鼠标、键盘、太空球等）。如果您有不同类型的设备，则可能需要更改不同但相似的设置。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-03-22T09:32:10.650

这对我来说就像一个魅力，当然它需要超级用户权限:-)

`# hcitool cc <target-bdaddr>; hcitool auth <target-bdaddr>`

为了让*`<target-bdaddr>`*你可以发出以下命令：
`$ hcitool scan`

注意：排除`#`&`$`因为它们是命令行提示符。

[礼貌](http://pfalcon-oe.blogspot.com/2011/12/pairing-bluetooth-devices-from-command.html)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-05-16T18:50:24.037

对于 Ubuntu 14.04 和 Android 尝试：

```
hcitool scan #get hardware address
sudo bluetooth-agent PIN HARDWARE-ADDRESS 
```

Android 设备上会弹出 PIN 对话框。输入相同的 PIN。

注意：`sudo apt-get install bluez-utils`可能是必要的。

Note2: If PIN dialog does not appear, try pairing from Android first (will fail because of wrong PIN). Then try again as described above.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-09T03:28:04.110

```
~ $ hciconfig noauth 
```

This should do the trick (I'm using bluez 5.23 and there's no more simple-egent and blue-utils). However, I'm trying to look for a way to make changes hciconfig permanent because after power out and then power on, authentication is needed again. So far, the changes in hciconfig still stays the same when you reboot it. it reverts back only when power out. If anybody has found a way to make hciconfig permanent, do let me know!

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-13T06:25:37.237

```
~ $ hciconfig noauth 
```

It worked for me in "Linux mx 4.19"

The exact steps are:

1) open a terminal - run: "hciconfig noauth"
2) use the blueman-manager gui to pair the device (in my case it was a keyboard)
3) from the blueman-manager choose "connect to HID"

step(3) is normally asking for a password - the "hciconfig noauth" makes step(3) passwordless

# python - 如何自动调整图形大小以覆盖 Python matplotlib 中的所有子图？

> ID：12888595
> 
> 赞同：1
> 
> 时间：2012-10-15T02:38:32.187
> 
> 标签：python, scroll, matplotlib, paging, figure

如何根据子图的大小自动放大图形大小？

我已经为这个问题搜索了很多主题，但没有一个是有帮助的。

基本逻辑是：

```
fig = plt.figure()
sub_fig_order = 0
for i in range(0, len(Big Varying Num)):
  sub_fig_order += 1
  ax = fig.add_subplot(len(Big Varying Num), 1, sub_fig_order)
pp = PdfPages('multipage.pdf')
plt.savefig(pp, format='pdf')
pp.close() 
```

由于子图的个数不固定，而且数量很大，很难使用`fig.set_size_inches(x, y)`来预留一个合理的大小。子图如何相互重叠。

# .net - .net async/await 中异步数据获取方法的正确模式是什么

> ID：12888598
> 
> 赞同：0
> 
> 时间：2012-10-15T02:39:08.517
> 
> 标签：.net, asynchronous

给定一个具有 GetData 方法的类。其他一些客户端调用 GetData，而不是每次都获取数据，我想创建一个模式，其中第一个调用启动任务以获取数据，其余调用等待任务完成。

```
private Task<string> _data;
private async Task<string> _getdata()
{
    return "my random data from the net"; //get_data_from_net()
}
public string GetData()
{
    if(_data==null)
        _data=_getdata();

    _data.wait(); //are there not a problem here. cant wait a task that is already completed ? if(_data.status != rantocompletion) _data.wait() is not any better, it might complete between the check and the _data.wait?

    return _data.Result;
} 
```

我将如何正确地做模式？

（解决方案）

```
 private static object _servertime_lock = new object();
    private static Task<string> _servertime;
    private static async Task<string> servertime()
    {
        try
        {
            var thetvdb = new HttpClient();
            thetvdb.Timeout = TimeSpan.FromSeconds(5);
            // var st = await thetvdb.GetStreamAsync("http://www.thetvdb.com/api/Updates.php?type=none");
            var response = await thetvdb.GetAsync("http://www.thetvdb.com/api/Updates.php?type=none");
            response.EnsureSuccessStatusCode();
            Stream stream = await response.Content.ReadAsStreamAsync();
            XDocument xdoc = XDocument.Load(stream);
            return xdoc.Descendants("Time").First().Value;
        }
        catch
        {
            return null;
        }
    }
    public static async Task<string> GetServerTime()
    {
        lock (_servertime_lock)
        {
            if (_servertime == null)
                _servertime = servertime();
        }

        var time = await _servertime;
        if (time == null)
            _servertime = null;

        return time;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:44:00.597

`Wait()`两次调用没有错；第二个电话不会做任何事情。
实际上，如果任务未完成，该`Result`属性将隐式调用。`Wait()`

作为旁注，您还应该考虑进行`GetData()`异步，以允许调用者决定何时或是否等待。

请注意，您的代码不是线程安全的。
如果`GetData()`可能从多个线程调用，则应使用`Lazy<T>`该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:09:58.477

> 我想创建一个模式，其中第一个调用启动任务以获取数据，其余调用等待任务完成。

我建议您使用[异步延迟初始化](http://nitoprograms.blogspot.com/2012/08/asynchronous-lazy-initialization.html)，如我的博客所述。该`AsyncLazy<T>`类型简化了您需要编写的代码：

```
private readonly AsyncLazy<string> _data = new AsyncLazy<string>(async () =>
{
  return "my random data from the net"; //get_data_from_net()
});

public Task<string> GetData()
{
  return await _data;
} 
```

或者，如果您的客户都是`async`，您可以这样做：

```
public AsyncLazy<string> Data { get; private set; }

Constructor()
{
  Data = new AsyncLazy<string>(async () =>
  {
    return "my random data from the net"; //get_data_from_net()
  });
} 
```

然后您的客户可以这样做：

```
var data = await my.Data; 
```

# neural-network - 除了图像的下采样二进制网格之外，我还可以将哪些功能用于手写 OCR？

> ID：12888600
> 
> 赞同：1
> 
> 时间：2012-10-15T02:39:18.020
> 
> 标签：neural-network, ocr, handwriting, feature-extraction

嗨，我一直在搜索有关哪些特征对我有好处的研究论文，以用于我的手写 OCR 分类神经网络。我是一个初学者，所以我一直只是拍摄手写字符的图像，在它周围制作一个边界框，然后将其调整为 15x20 二进制图像。所以这意味着我有一个包含 300 个特征的输入层。从我在谷歌上找到的论文（其中大部分都很旧）中，方法确实有所不同。仅使用图像的二进制网格，我的准确性还不错，但是我想知道是否有人可以使用其他功能来提高准确性。甚至只是指出我正确的方向。我真的很感激！

谢谢，扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:49:01.497

我还没有读过任何关于这个主题的实际论文，但我的建议是要有创意。使用任何你能想到的可能有助于分类器识别数字的东西。

我的第一个想法是尝试识别图像中的“线条”，可能通过修改后的“滑动窗口”算法（滑动/旋转线？），或者尝试识别图像中的“最适合的线条”（到帮助分类器响应斜体或写作风格的变化）。确实，如果您使用的是神经网络，它应该在没有您手动帮助的情况下处理这些事情（这就是它们的全部意义！）

我会首先关注网络的结构和拓扑，以尝试提高性能，并且只有在您无法通过其他方式获得令人满意的性能时才担心附加功能。你也可以尝试改进你已经拥有的功能，确保字符在图像中居中，也许尝试一种算法来倾斜斜体字符以使它们垂直？

以我的经验，这些事情通常不会有帮助，但是您可能会很幸运并遇到可以改善您网络的事情:)

# scala - 演员模型中演员的生命周期

> ID：12888601
> 
> 赞同：5
> 
> 时间：2012-10-15T02:39:20.983
> 
> 标签：scala, akka, actor

我是演员模型的新手。谁能解释演员模型中演员的生命周期？我一直在文档中寻找答案，但找不到任何令人满意的东西。

我对演员完成`onReceive()`方法后的行为很感兴趣——它是还活着还是死了？我们可以控制它的生命周期来说“不要死，在那里等待下一条消息”吗？例如，使用循环路由器，如果我将其设置为有 5 个演员 - 它是否总是将工作分配给**相同**的5 个演员？或者，只要有消息，actor 就会被销毁和创建，但最大限制始终为 5。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T02:41:43.357

`Actor`除非你明确地“杀死”它（或者它以某种方式崩溃），否则它总是存在的。当它收到一条消息时，它会“使用”一个线程，处理该消息，然后回到“空闲”状态。当它收到另一条消息时，它再次变为“活动”。

在具有 5 s 的循环路由器的情况下`Actor`，它是相同的 5 `Actor`s - 路由器不会在每次向路由器发送消息时创建新的。

Actor 模型遵循“隔离可变性”（并发）模型——它仅将状态封装到自身——其他`Actor`s 无法直接接触此状态，它们只能通过消息传递与其交互。`Actor`s 必须“活着”才能保持状态。

# python - 用于高效查询的数据存储建模层次结构

> ID：12888611
> 
> 赞同：1
> 
> 时间：2012-10-15T02:40:42.077
> 
> 标签：python, google-app-engine, google-cloud-datastore

对于数据存储层次结构以及如何为我的应用程序建模，我真的很困惑。

我的应用程序将有用户。

数据将具有以下特定层次结构：

用户将拥有一场锦标赛。

比赛（属性：geodata）

在锦标赛内部，用户将添加一个或多个团队。

在 Teams 中，用户将每天添加信息。

例如：

```
Team: Hawks  
Concept: Equipment  
String: Buy t-shirts  
Number: 11  
Number (price) : 15 
```

这样的事情有意义吗？

```
class User(db.Model):
    name = db.StringProperty(required = True)
    pass = db.StringProperty(required = True)
    email= db.StringProperty()

class Tournament(db.Model):
    name  = db.StringProperty(required = True)
    place = db.GeoPt()
    owner = db.ReferenceProperty(User) 

class Teams(db.Model):
    belongs_to_tournament = db.ReferenceProperty(Tournament)
    name = db.StringProperty(required = True)
    players = db.IntegerProperty(required = True)

class DailyInfo(db.Model):
    created = db.DateTimeProperty(auto_now_add = True)
    concept = db.StringListProperty()
    info    = db.StringProperty()
    number  = db.IntegerProperty()
    price   = db.IntegerProperty()
    team    = db.ReferenceProperty(Teams) 
```

这个模型做得对还是我也应该添加祖先路径？我可以查询这个以显示每个用户的相应信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:12:33.730

在您尚未定义的模型`indexed=False`中，您是否需要对每个数据库的每个属性进行索引？

像这儿，

```
class Tournament(db.Model):
   name = db.StringProperty(required = True)
   place = db.GeoPt()

class Teams(db.Model):
   belongs_to_tournament = db.ReferenceProperty(Tournament, collection_name =  'tournament_teams')
   name = db.StringProperty(required = True)
   players = db.IntegerProperty(required = True)
   price = db.FloatProperty(indexed=False) 
```

# html - HTML 表单：带有文本字段的单选按钮

> ID：12888612
> 
> 赞同：19
> 
> 时间：2012-10-15T02:40:44.367
> 
> 标签：html, forms

这似乎是一个简单的问题，但我如何创建一个具有一系列单选按钮选项的基本 HTML 表单，最后一个是用于填写自定义响应的文本字段（即“其他”）。

我现在拥有的：

```
 Reason given for stop? <br>
    <input type="radio" name="reason" value="Fit Description">Fit Description<br>
    <input type="radio" name="reason" value="Suspicious Behavior">Suspicious Behavior<br>
    <input type="radio" name="reason" value="No Reason Given">No Reason Given<br>
    <input type="radio" name="reason" value="">Other<br> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-15T02:43:22.897

只需向其中添加一个文本输入字段。

```
Reason given for stop? <br>
    <input type="radio" name="reason" value="Fit Description">Fit Description<br>
    <input type="radio" name="reason" value="Suspicious Behavior">Suspicious Behavior<br>
    <input type="radio" name="reason" value="No Reason Given">No Reason Given<br>
<input type="radio" name="reason" value="">Other <input type="text" name="other_reason" />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/pgyA2/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T02:44:37.570

1.  创建一个文本字段，并将其设置为 display:none;
2.  然后使用 jQuery，检测“其他”单选按钮何时被选中并显示文本框。
3.  然后在您的流程脚本上，执行 if 语句以查看您的单选按钮组的值是否为“”（无），并获取文本框的发布数据并使用它执行您想要的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T04:55:12.703

只需像往常一样添加一个文本字段，但为其赋予与其他文本相同的名称属性，这样在访问它们时您将获得其中一个。

在 JavaScript 中（我假设您将使用它？）只需访问这些元素并检查文本字段是否为空，如果它获取单选按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-20T08:26:49.033

有一种简洁的方法可以在不使用函数或 Javascript (jQuery) 的情况下在单选按钮旁边添加文本字段。只需在 HTML 表单的顶部添加无线电 btn（其他）及其旁边的文本字段。这是我使用的：

颜色：

```
<input type="radio" name="title[<?=$red?>][color]" value="" <?php if ($row['color'] != ' ') {echo 'checked';} ?> />Other <input type="text" name="title[<?=$red?>][color]" value="<?php echo $row['color'] ?>" style="width: 200px;" /> |

<input type="radio" name="title[<?=$red?>][color]" value="natural" <?php if ($row['color'] == 'natural') {echo 'checked';} ?> />natural|

<input type="radio" name="title[<?=$red?>][color]" value="stain" <?php if ($row['color'] == 'stain') {echo 'checked';} ?> />stain |

<input type="radio" name="title[<?=$red?>][color]" value="white" <?php if ($row['color'] == 'white') {echo 'checked';} ?> />white| 
```

基本上，您不会将值放在“其他”单选输入上，而是放在文本输入上，因此您在文本字段中写入的任何内容都将发送到 db - 它在 FORM 中的第一个字段。如果文本字段中没有任何内容 - 将处理其他选中的无线电输入。

希望这可以帮助。

# zend-framework2 - Zend Framework 2 应用程序中的 RedBeanPHP FUSE 模型？

> ID：12888614
> 
> 赞同：1
> 
> 时间：2012-10-15T02:40:55.993
> 
> 标签：zend-framework2, redbean

我正在尝试在 ZF2 (v2.0.2) 应用程序中使用 ORM RedBeanPHP (v3.3)，但我在使用其自动 FUSE 模型时遇到了问题。我不能让它链接到我的模型类。它不会自动拾取它们，而是使用“常规”bean。

我正在使用[RjhRedbean](https://github.com/richardjh/RjhRedbean)模块在 ZF2 中加载 RedBean。

我的模型类如下，放在文件夹中`.\module\Check\src\Check\Model\Model`。

```
<?php
namespace Check\Model;

use \RedBean_SimpleModel;

class Model_Check extends RedBean_SimpleModel
{
   public $id;
   public $type;
   ...

   public function open()
   {
   }

   public function toArray()
   {
      return array($this->id, $this->type);
   } 
```

我确认它已被自动加载器拾取，因为它`$c = new Model_Check();`工作正常。

我试图`Check`从数据库中加载所有模型对象的控制器代码是：

```
<?php
namespace Check\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Zend\View\Model\JsonModel;
use RjhRedbean;
use Check\Model\Model_Check;

class CheckController extends AbstractActionController
{
   public function listAction()
   {
      $rb = $this->getServiceLocator()->get('RjhRedbean');

      $checks = $rb->findAll('Check');  // does not link to my Model object

      foreach ($checks as $check) {
         $ar = $check->toArray();         // does not exist in the objects returned
         ... 
```

返回的对象是`RedBean_OODBBean`

我应该在`findAll()`方法中输入什么作为 bean 名称？我试过：

```
$checks = $rb->findAll('Model_Check');
$checks = $rb->findAll('Check/Model/Check'); 
$checks = $rb->findAll('Check/Model/Model_Check'); 
```

似乎没有什么办法。创建bean时，我也遇到了同样的问题......

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T23:04:54.053

这不起作用的原因是由于使用命名空间中引入的问题，FUSE 无法像通常那样自动找到 bean 的模型。

您可以通过使用类映射文件并定义您在其中使用的所有模型来解决此问题。确保您的模型位于全局命名空间中。

更多信息和示例可以在我的博客上找到：[如何在 RjhRedbean 中使用 FUSE 模型](http://richardjh.org/blog/how-to-use-fuse-models-in-rjhredbean)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T09:21:00.650

我修改了 RjhRedbean 模块如下：
1.创建了一个名为 ModelFormatter 的类，这个类除了返回与您的模型相关的适当命名空间之外什么都不做。命名空间可以在您的配置中设置。

2.在RjhRedbeanServiceFactory类中添加
RedBean_ModelHelper::setModelFormatter($serviceLocator->get('ModelFormatter'));

# c# - 快速排序创建 Stackoverflow

> ID：12888616
> 
> 赞同：0
> 
> 时间：2012-10-15T02:40:57.847
> 
> 标签：c#, stack-overflow, quicksort

我有一个执行快速排序的应用程序。它工作得很好，直到我开始给它一些更大的数字（我第一次得到它是 10000000）。我知道 a`Stackoverflow`是由递归引起的，但我不明白为什么我的应用程序会因此而崩溃。任何意见，将不胜感激。这是我的代码：

```
class quickSort
{
    const int NOOFELEMENTS = 10000000;
    // this is our array to sort
    private int[] arr = new int[NOOFELEMENTS];

    // this holds a number of elements in array
    private int len;

    // Quick Sort Algorithm
    public void QuickSort()
    {
        sort(0, len - 1);
    }

    public void sort(int left, int right)
    {
        int pivot, l_holder, r_holder;

        l_holder = left;
        r_holder = right;
        pivot = arr[left];

        while (left < right)
        {
            while ((arr[right] >= pivot) && (left < right))
            {
                right--;
            }

            if (left != right)
            {
                arr[left] = arr[right];
                left++;
            }

            while ((arr[left] <= pivot) && (left < right))
            {
                left++;
            }

            if (left != right)
            {
                arr[right] = arr[left];
                right--;
            }
        }

        arr[left] = pivot;
        pivot = left;
        left = l_holder;
        right = r_holder;

        if (left < pivot)
        {
            sort(left, pivot - 1);
        }

        if (right > pivot)
        {
            sort(pivot + 1, right);
        }
    }

    public static void Main()
    {
        quickSort q_Sort = new quickSort();

        int[] arr = new int[NOOFELEMENTS];

        Random rnd = new Random();
        for (int i = 0; i < NOOFELEMENTS; i++)
        {
            arr[i] = rnd.Next(0, 1000);
        }
        q_Sort.arr = arr;
        q_Sort.len = q_Sort.arr.Length;

        var startTime = DateTime.Now;

        // Sort the array
        q_Sort.QuickSort();

        Console.WriteLine("Total Time: {0}\n", DateTime.Now - startTime);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:44:57.853

好。您的代码将在 log2 10000000 和 10000000 级别之间递归。

取决于可以使用大量堆栈空间的编译器（如果有）中的尾递归优化。

# android - Infinite ViewPager 不适用于我的日历

> ID：12888618
> 
> 赞同：2
> 
> 时间：2012-10-15T02:41:29.177
> 
> 标签：android, android-viewpager, infinite-scroll

我是安卓新手。我为我的应用程序开发了一个日历，我希望用户能够在月份之间顺利切换。所以我决定使用 ViewPager 并让它使用无限的几个月，我已经实施了这个解决方案：

[http://code.google.com/p/electricsleep/source/browse/trunk/src/com/androsz/electricsleepbeta/app/HistoryMonthActivity.java](http://code.google.com/p/electricsleep/source/browse/trunk/src/com/androsz/electricsleepbeta/app/HistoryMonthActivity.java)

不幸的是，它对我不起作用。当我尝试向左或向右滚动时，下一个要显示的月份到来，直到我用手指滚动，但是当我松开手指时，较早显示的月份又来了，但指示器上的日期仍然是正确的。

我发布代码：

```
 calendarView = new GridView(this);
            calendarView.setLayoutParams(new ViewGroup.LayoutParams(
                    ViewGroup.LayoutParams.WRAP_CONTENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT));
            calendarView.setNumColumns(7);
            adapter = new GridCellAdapter(getApplicationContext(), R.id.calendar_day_gridcell, newdatum);
            adapter.notifyDataSetChanged();
            calendarView.setAdapter(adapter);
            calendarView.setTag(newdatum.toString());

            viewpager = (ViewPager) this.findViewById(R.id.calviewpager);
            viewpager.setAdapter(new MonthPagerAdapter());
            viewpager.setOffscreenPageLimit(3);
            mTitleIndicator = (TitlePageIndicator) findViewById(R.id.indicator);
            mTitleIndicator.setViewPager(viewpager, 1);
            mTitleIndicator.setOnPageChangeListener(new PageListener());
            }

    private class PageListener implements OnPageChangeListener{

        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        }

        @Override
        public void onPageScrollStateChanged(int state) {
                if (state == ViewPager.SCROLL_STATE_IDLE) {

                        final DateTime old0 = DateTime.parse(viewpager.getChildAt(0).getTag().toString());
                        final DateTime old1 = DateTime.parse(viewpager.getChildAt(1).getTag().toString());
                        final DateTime old2 = DateTime.parse(viewpager.getChildAt(2).getTag().toString());

                        if (focusedPage == 0) {
                            Log.d("FOCUSEDPAGE=0",newdatum.toString());
                            DateTime minus = new DateTime();
                            minus=old0.minusMonths(1);
                            viewpager.getChildAt(0).setTag(minus.toString());
                            viewpager.getChildAt(1).setTag(old2.toString());
                            viewpager.getChildAt(2).setTag(old1.toString());
                            } 

                        else if (focusedPage == 2) {
                            Log.d("FOCUSEDPAGE=2",newdatum.toString());
                            DateTime plus = new DateTime();
                            plus=old2.plusMonths(1);
                            viewpager.getChildAt(0).setTag(old1.toString());
                            viewpager.getChildAt(1).setTag(old2.toString());
                            viewpager.getChildAt(2).setTag(plus.toString());
                        }
                        mTitleIndicator.setCurrentItem(1);
                }
        }

        @Override
        public void onPageSelected(int position) {
            newdatum=DateTime.parse(viewpager.getChildAt(position).getTag().toString());
            focusedPage = position;
        }

    }

     private class MonthPagerAdapter extends PagerAdapter{

         ViewPager container;

         private GridView addMonthViewAt(int position, DateTime date) {
             final GridView gv = new GridView(CalendarActivity.this);
             gv.setLayoutParams(new ViewGroup.LayoutParams(
                    ViewGroup.LayoutParams.WRAP_CONTENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT));
             gv.setNumColumns(7);
             gv.setTag(date.toString());
             setGridCellAdapterToDate(date, gv);
             container.addView(gv, position);
             return gv;
             }

         @Override
         public void destroyItem(View container, int position, Object object) {
                 ((ViewPager) container).removeViewAt(position);
         }

         @Override
         public void finishUpdate(View container) {
         }

         @Override
         public int getCount() {
                 return 3;
         }

         @Override
         public Object instantiateItem(View container, int pos) {
             this.container = (ViewPager) container;
             DateTime newdate=newdatum.plusMonths(pos-1);
             Log.d("INSTATIATE",newdate.toString());
             return addMonthViewAt(pos, newdate);
         }

         @Override
         public String getPageTitle(int position) {
                 final GridView gv = (GridView) container.getChildAt(position);
                 DateTime dt=DateTime.parse(gv.getTag().toString());
                 String title=dt.monthOfYear().getAsText()+" "+dt.getYear();
                 Log.d("GET PAGE TITLE",dt.toString());
                 return title;
         }

         @Override
         public boolean isViewFromObject(View view, Object object) {
                 return view.equals(object);
         }

         @Override
         public void restoreState(Parcelable state, ClassLoader loader) {
         }

         @Override
         public Parcelable saveState() {
                 return null;
         }

         @Override
         public void startUpdate(View container) {
         }

     }

    private void setGridCellAdapterToDate(DateTime newdate, GridView gridview){
        GridCellAdapter adapt = new GridCellAdapter(getApplicationContext(), R.id.calendar_day_gridcell, newdate);
        adapt.notifyDataSetChanged();
        gridview.setAdapter(adapt);
        } 
```

以及 GridCellAdapter 代码：

```
 public class GridCellAdapter extends BaseAdapter implements OnClickListener{
            private final Context _context;
            private final List<String> list;
            private Button gridcell;

            public GridCellAdapter(Context context, int textViewResourceId, DateTime datum){
                super();
                this._context = context;
                this.list = new ArrayList<String>();
                printMonth(datum);
                }

            public String getItem(int position){
                return list.get(position);
                }

            public int getCount(){
                return list.size();
                }

            private void printMonth(DateTime cal){
                    int daysInMonth = cal.dayOfMonth().getMaximumValue();
                    int daysInPrevMonth = cal.minusMonths(1).dayOfMonth().getMaximumValue()+1;
                    int trailingSpaces = cal.withDayOfMonth(1).dayOfWeek().get()-1;
                    SQLiteAdapter sql= new SQLiteAdapter(getApplicationContext());
                    sql.openToWrite(month(cal));
                    if(sql.tableExists()){
                        String back="blue";
                        for(int i=0;i<7;i++)
                            list.add("DAY:"+cal.withDayOfWeek(i+1).toString()+": ");
                        for (int i = 0; i < trailingSpaces; i++){
                            if(sql.rowExists(cal.minusMonths(1).withDayOfMonth((daysInPrevMonth-trailingSpaces)+i).toString("yyyy-MM-dd")))
                                back="green";
                            else back="blue";
                            list.add("GREY:"+cal.minusMonths(1).withDayOfMonth((daysInPrevMonth-trailingSpaces)+i).toString("yyyy-MM-dd")+": "+":"+back);
                            }
                        for (int i = 1; i <= daysInMonth; i++){
                            if(sql.rowExists(cal.withDayOfMonth(i).toString("yyyy-MM-dd")))
                                back="green";
                            else back="blue";
                                if (cal.withDayOfMonth(i).toString("yyyy-MM-dd").equals(DateTime.now().toString("yyyy-MM-dd"))){
                                    list.add("WHITE:"+cal.withDayOfMonth(i).toString("yyyy-MM-dd")+":"+checkIsFeiertag(cal.withDayOfMonth(i)).toString()+":"+back);
                                    }
                                else{
                                    checkIsFeiertag(cal.withDayOfMonth(i));
                                    list.add("BLUE:"+cal.withDayOfMonth(i).toString("yyyy-MM-dd")+":"+checkIsFeiertag(cal.withDayOfMonth(i)).toString()+":"+back);
                                    }
                            }

                        for (int i = 0; i < list.size() % 7; i++){
                            if(sql.rowExists(cal.plusMonths(1).withDayOfMonth(i+1).toString("yyyy-MM-dd")))
                                back="green";
                            else back="blue";
                            list.add("GREY:"+cal.plusMonths(1).withDayOfMonth(i+1).toString("yyyy-MM-dd")+": "+":"+back);
                            }
                    }
                    else{
                        for(int i=0;i<7;i++)
                            list.add("DAY:"+cal.withDayOfWeek(i+1).toString()+": "+": ");
                        for (int i = 0; i < trailingSpaces; i++){
                            list.add("GREY:"+cal.minusMonths(1).withDayOfMonth((daysInPrevMonth-trailingSpaces)+i).toString("yyyy-MM-dd")+": "+": ");
                            }
                        for (int i = 1; i <= daysInMonth; i++){
                                if (cal.withDayOfMonth(i).toString("yyyy-MM-dd").equals(DateTime.now().toString("yyyy-MM-dd"))){
                                    list.add("WHITE:"+cal.withDayOfMonth(i).toString("yyyy-MM-dd")+":"+checkIsFeiertag(cal.withDayOfMonth(i)).toString()+": ");
                                    }
                                else{
                                    checkIsFeiertag(cal.withDayOfMonth(i));
                                    list.add("BLUE:"+cal.withDayOfMonth(i).toString("yyyy-MM-dd")+":"+checkIsFeiertag(cal.withDayOfMonth(i)).toString()+": ");
                                    }
                            }

                        for (int i = 0; i < list.size() % 7; i++){
                            list.add("GREY:"+cal.plusMonths(1).withDayOfMonth(i+1).toString("yyyy-MM-dd")+": "+": ");
                            }
                    }
                    sql.close();
                }

            public long getItemId(int position){
                return position;
                }

            @SuppressLint("NewApi")
            public View getView(int position, View convertView, ViewGroup parent){
                    View row = convertView;
                    if(row == null){
                        LayoutInflater inflater = (LayoutInflater) _context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                        row = inflater.inflate(R.layout.calendar_day_gridcell, parent, false);
                        }

                    gridcell = (Button) row.findViewById(R.id.calendar_day_gridcell);
                    String[] day_color = list.get(position).split(":");
                    DateTime datum = DateTime.parse(day_color[1]);
                    if(!(day_color[0].equals("DAY"))){
                        gridcell.setText(String.valueOf(datum.getDayOfMonth()));
                        gridcell.setTag(datum.toString("yyyy-MM-dd"));
                        gridcell.setOnClickListener(this);
                    if (!day_color[2].equals(" "))
                        gridcell.setTextColor(Color.RED);
                    else if (day_color[0].equals("GREY"))
                        {
                            gridcell.setTextColor(Color.LTGRAY);
                        }
                    else if (day_color[0].equals("WHITE"))
                        {
                            gridcell.setTextColor(Color.WHITE);
                        }
                    else if (day_color[0].equals("BLUE"))
                        {
                            gridcell.setTextColor(getResources().getColor(R.color.static_text_color));
                        }
                    if(day_color[3].equals("green")){
                            int sdk = android.os.Build.VERSION.SDK_INT;
                            if(sdk < android.os.Build.VERSION_CODES.JELLY_BEAN) {
                                gridcell.setBackgroundDrawable(getResources().getDrawable(R.drawable.calendar_tile_green));
                            } else {
                                gridcell.setBackground(getResources().getDrawable(R.drawable.calendar_tile_green));
                            }
                            }
                    }                               
                    else {
                        gridcell.setText(datum.toString("EE"));
                        gridcell.setClickable(false);
                    }
                    gridcell.setOnLongClickListener(new View.OnLongClickListener() {
                        public boolean onLongClick(View v) {
                            if(gridcell.getBackground()==getResources().getDrawable(R.drawable.calendar_tile_green)){
                                SQLiteAdapter sql= new SQLiteAdapter(context);
                                DateTime bt = DateTime.parse(gridcell.getTag().toString());
                                sql.openToWrite(month(bt));
                                sql.getRows(month(bt));
                                sql.close();
                            }
                            return true;
                        }
                    });
                    return row;
                } 
```

当然，我接受不同的解决方案来提供相同的平滑滚动。

# map - 将 OCaml Maps 扩展为可格式化的 Maps

> ID：12888619
> 
> 赞同：6
> 
> 时间：2012-10-15T02:41:29.313
> 
> 标签：map, ocaml, functor

我为可格式化的集合制作了一个仿函数，如下所示：

```
module type POrderedType =
  sig
    type t
    val compare : t -> t -> int
    val format : Format.formatter -> t -> unit
  end

module type SET =
  sig
    include Set.S
    val format : Format.formatter -> t -> unit
  end

module MakeSet (P : POrderedType) : SET with type elt = P.t 
```

实现这一点很简单：

```
module MakeSet (P : OrderedType) =
  struct
    include Set.Make(P)

    let format ff s =
      let rec format' ff = function
        | [] -> ()
        | [v] -> Format.fprintf ff "%a" format v
        | v::tl -> Format.fprintf ff "%a,@ %a" format v format' tl in
      Format.fprintf ff "@[<4>%a@]" format' (elements s)
  end 
```

我想用地图做类似的事情。 `POrderedType`对键很好，但我需要一个更简单的值类型：

```
module type Printable =
  sig
    type t
    val format : Format.formatter -> t -> unit
  end 
```

然后我想做一些类似于我为集合所做的事情，但我遇到了以下问题。 `Map.S`值有类型`+'a t`。我想不出一种方法来包含`Map.S`定义，同时将其限制`'a`为`Printable.t`. 我想要的是以下内容（忽略它是非法的事实）：

```
module MakeMap (Pkey : POrderedType) (Pval : Printable) :
  MAP with type key = Pkey.t and type 'a t = 'a t constraint 'a = Pval.t 
```

有什么方法可以在不手动复制 Map 的整个签名的情况下做我想做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T05:44:50.327

我认为为多态地图提出打印功能的最简洁方法是使地图打印功能参数化于值打印功能。你可以这样想：

*   函子定义的类型是在函子级别定义的，因此最好通过添加新的函子参数（或丰富现有的参数）来为它们提供函数

*   参数类型在值级别绑定（泛化），因此最好通过向值添加新参数来为它们提供函数

在 OCaml 中，便利性往往使人们在可能的情况下偏爱参数多态性而不是函数化。函数化有时对于强制执行某种类型安全是必要的（这里它用于确保不同比较函数上的映射具有不兼容的类型），但除此之外人们宁愿尝试具有多态性。所以你在这里实际上是幸运的。

如果你真的想要一个生成单态地图的函子，那么，恐怕你将不得不复制整个地图界面并在单态情况下对其进行调整——这并不需要太多工作。

# html - 标题元素 [logo 和菜单] 根据屏幕分辨率改变位置

> ID：12888622
> 
> 赞同：0
> 
> 时间：2012-10-15T02:41:55.043
> 
> 标签：html, css

我有我的这个网站[www.virtualcloudguru.com](http://www.virtualcloudguru.com)。现在这里的问题是标题（徽标和菜单）。我已经为徽标和菜单定义了一个固定的 100 像素填充，但如果屏幕分辨率发生变化，它将向左/向右移动。

现在有2种方式

1.  使它们都在屏幕中央对齐
2.  使2个元素根据屏幕分辨率改变位置。

我已经复制[了**jsfiddle**](http://jsfiddle.net/uXXcY/)中的代码。虽然不完整

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:17:42.620

如果你想让元素根据屏幕分辨率改变位置，你可以使用 CSS 媒体查询。这是一个适用于您的页面的示例：

```
@media screen and (max-width: 600px) {
    #header .top-logo, #header ul {
        padding-left: 0;
    }
} 
```

您可以将这`@media`一行视为类似于 CSS 的“if”语句。在这种情况下，如果媒体是屏幕（即不是打印等）并且最大宽度为 600 像素，则将徽标的左侧填充为 0 并在标题中列出。

换句话说，本`@media`节中的任何 CSS 规则仅在浏览器的可见窗口宽度为 600 像素或更小时有效，在这种情况下，它们会覆盖任何以前的 CSS 规则。

将此添加到 CSS 的末尾并尝试缩小浏览器的窗口以查看效果。

编辑：我忘了补充说可以有多个`@media`部分。例如，您可以添加第二个部分，其中`max-width: 480px`包含（或类似的）小屏幕规则。

编辑 2：将徽标和菜单居中

徽标具有固定宽度，因此我们可以将其设为块元素并使用`margin: 0 auto`，如下所示：

```
#header .top-logo {
    display: block;
    margin: 0px auto;
    padding: 0;
    width: 425px;
} 
```

请记住删除您现有的`float: left`.

对于菜单，这只是文本，因此我们可以使用`text-align: center`. 同样，请记住删除`float: left`li 元素上的现有元素——我们将使用它`display: inline`。

```
#header ul {
    padding: 0;
    text-align: center;
}
#header ul li {
    display: inline;
} 
```

顺便说一句，请在实施之前仔细检查这个跨浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T02:51:43.850

### 请使用这个 CSS

```
#header {
    width: 1130px;
    padding: 0;
}

#header .top-logo {
    padding: 0;
} 
```

### 截屏

![截屏](../Images/ee83995c8a01c9a82d6fd6edfdd4cfd0.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T02:52:18.433

如果您希望页眉始终保持相对于页面正文的相同位置，则将两者放入一个公共 div 中，并将您将应用于正文的 width: 和 margin: 属性应用于该容器.

您也可以将`body`元素用作公共容器，并对其应用宽度和边距，作为替代方案。

# ios - ACAccountStore 未检索自定义 SLRequest 的 Facebook 帐户

> ID：12888623
> 
> 赞同：3
> 
> 时间：2012-10-15T02:42:03.757
> 
> 标签：ios, facebook, facebook-graph-api, ios6

目前，我正在构建一个应用程序，该应用程序利用新的 iOS 6 社交框架来收集存储在 iOS 中的 Facebook 帐户，并创建一个自定义 SLRequest 以将状态更新和照片发布到用户的时间轴。我在 Facebook 开发中心配置了一个应用程序，并收到了我的应用程序 ID，但是，当我尝试通过 ACAccountStore 请求 Facebook 帐户时，我总是收到以下本地化错误消息：

```
2012-10-14 17:34:46.429 Status Update[12042:4c0b] The operation couldn’t be completed. (com.apple.accounts error 8.) 
```

这是我目前用于处理从帐户商店获取帐户的请求的代码：

```
NSDictionary *options = @{
@"ACFacebookAppIdKey" : @"XXXXXXXXXXXXXXX",
@"ACFacebookPermissionsKey" : @[@"publish_stream"],
@"ACFacebookPermissionGroupKey" : @[@"write", @"email"]};

self.facebookStore = [[ACAccountStore alloc] init];
self.facebookAccountType = [self.facebookStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
self.facebookAccount = [[ACAccount alloc] initWithAccountType:self.facebookAccountType];
[self.facebookStore requestAccessToAccountsWithType:self.facebookAccountType options:options completion:^(BOOL granted, NSError *error)
{
    if (granted)
    {
        NSArray *accounts = [self.facebookStore accountsWithAccountType:self.facebookAccountType];
        self.facebookAccount = [accounts lastObject];
        NSLog(@"Facebook Account Enabled: %@", _facebookAccount);
    }
    else
    {
        NSLog([NSString stringWithFormat:@"%@", error.localizedDescription]);
    }
}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T00:54:09.170

请看一下：http: [//developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

并注意：

当请求访问 Facebook 帐户时，您的选项字典中唯一需要的键是 ACFacebookAppIdKey。ACFacebookPermissionGroupKey 和 ACFacebookAppVersionKey 现已过时。

如果您在 ACFacebookPermissionsKey 下请求写入权限，例如 publish_stream，则必须为 ACFacebookAudienceKey 提供一个值，该值可以是 ACFacebookAudienceEveryone、ACFacebookAudienceFriends 或 ACFacebookAudienceOnlyMe 之一。

```
NSDictionary *options = @{
ACFacebookAppIdKey: @"XXXXXXXX",
ACFacebookPermissionsKey: @[@"publish_stream"],
ACFacebookAudienceKey: ACFacebookAudienceFriends
}; 
```

# box2d - 如何使用选择器删除/销毁 b2Body？

> ID：12888624
> 
> 赞同：0
> 
> 时间：2012-10-15T02:42:30.090
> 
> 标签：box2d, box2d-iphone

我试图在创建后使用选择器删除 b2Body。它不适用于以下代码。请给我一个提示。

```
[self performSelector:@selector(removeBox:) withObject: body afterDelay:2]; 
```

这是错误消息：无法使用“b2Body *”类型的左值初始化“id”类型的参数

注意：我使用 Box2d 模板并尝试在创建后删除一个框。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-03T12:36:39.903

任何改变世界状态的事情都不应该在世界步骤中完成。根据[iforce2](http://iforce2d.net/b2dtut/removing-bodies) tuto ：

> 实现“定时删除”的一种简单方法，例如，如果您想在删除某些内容之前等待一段时间，只需计算游戏循环的时间步长（例如，2 秒是 120 次）以 60fps 的速度步进），在实体中设置该值，然后每帧递减它，直到它变为零，然后将其删除。

希望这会有所帮助。

# iphone - 相对于发件人选择的附件，如何在推送（带 segue）视图上更改 UILabel 的文本？

> ID：12888625
> 
> 赞同：0
> 
> 时间：2012-10-15T02:42:31.913
> 
> 标签：iphone, ios, uistoryboard

我有一个通过情节提要**segue**推动`UITableView`一个视图，该视图显示一个`UILabel`我希望相`indexPath.row`对于.**`UITableView`**

 **我知道这可能大错特错，但这是我的尝试。我觉得我做错了：

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"ArticlePreviewSegue" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSIndexPath *indexPath = [sender indexPathForSelectedRow];
    ArticlePreviewViewController *apvc = [segue destinationViewController];
    NSDictionary *article = [_newsFetcher.articles objectAtIndex:indexPath.row];
    apvc.titleLabel.text = [article objectForKey:@"title"];
    apvc.bodyLabel.text = [article objectForKey:@"body"];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:45:59.677

一个问题可能是点击附件不会选择行。您可以通过将索引路径作为 segue 的发送者来处理：

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {
    [self performSegueWithIdentifier:@"ArticlePreviewSegue" sender:indexPath];
} 
```

现在您可以访问索引路径，`prepareForSegue:sender:`而无需依赖被选中的行。

另一个问题是 in `prepareForSegue:sender:`,`apvc`还没有加载它的视图。所以`apvc.titleLabel`和`apvc.bodyLabel`都是零。

处理此问题的正确方法是提供`ArticlePreviewViewController`一个`article`属性并将该属性设置为`prepareForSegue:sender:`，如下所示：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSIndexPath *indexPath = (NSIndexPath *)sender;
    ArticlePreviewViewController *apvc = [segue destinationViewController];
    apvc.article = [_newsFetcher.articles objectAtIndex:indexPath.row];
} 
```

然后，在 中`-[ArticlePreviewViewController viewDidLoad]`，您可以根据文章设置标签：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.titleLabel.text = self.article[@"title"];
    self.bodyLabel.text = self.article[@"body"];
} 
```**

# c# - 通用委托实现

> ID：12888627
> 
> 赞同：0
> 
> 时间：2012-10-15T02:43:11.163
> 
> 标签：c#, generics, delegates

我正在尝试解决以下问题

声明一个具有返回类型 void 并将`T`值作为参数的通用委托类型 Action。这是昨天的委托类型的概括`IntAction`。声明一个有方法的类

`static void Perform<T>(Action<T> act, params T[] arr) { ... }`

此方法应将委托行为应用于数组 arr 的每个元素。实现方法时使用该`foreach`语句`Perform<T>`。

到目前为止，我的代码如下所示：

```
namespace CSharpexercices
{
    public delegate void Action<T>(T value);

    public class GenericDelegate
    {
        static void Perform<T>(Action<T> act, params T[] arr)
        {
            foreach (T i in arr)
            {
               act(arr[i]);
            }
        }
    }
} 
```

它不能正常工作，我迷失了“这是昨天的委托类型 IntAction 的概括。

有人可以帮助我吗：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:53:59.567

Action 没有返回类型，所以你不能做任何类似的事情

```
arr[i] = act(arr[i]); 
```

其次，您不能在 foreach 中迭代 int 数据类型。

**已编辑**

```
public delegate void Action<T>(T value);

public class GenericDelegate
{
    static void Perform<T>(Action<T> act, params T[] arr)
    {
        foreach (T obj in arr)
        {
            act(obj);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T02:52:00.777

如果你改变了怎么办

```
arr[i] = act(arr[i]); 
```

到

```
act(arr[i]); 
```

请记住return ，因此您没有要分配的返回值`act`。`void`

> 这是昨天的委托类型 IntAction 的概括。

这可能指的是一种类似的方法，您调用的是 an`Action<int> act`而不是`Action<T> act`.

**编辑：** 当然，迭代`arr`应该是：

```
for (T obj in arr) 
{ 
    act(obj); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T02:56:42.800

IntAction 是委托类型（表示对方法的引用的类型，如 C++ 中的函数指针）。

您的教练很可能是这样声明的：

```
public delegate void IntAction(int input); 
```

因此它代表了一个接受`int`并返回的方法`void`。为了概括这一点，你的家庭作业要求你对这样的代表进行概括。它希望您创建一个方法，该方法采用 ANY TYPE 的对象，比如说类型 T，并返回 void。这确实是您使用的委托 System.Action，但我认为您的作业要求您声明该委托类型。这就是你的做法（我调用了委托 GenericAction，你会以与使用 Action 完全相同的方式使用它）：

```
public delegate void GenericAction<T>(T input); 
```

您的 foreach 循环中有错误。您正在尝试将应用委托的结果分配给数组中的元素。但是委托动作返回无效！

修复此更改

```
arr [i] =  act (arr[i]); 
```

到

```
act (i); //you can't use the result of applying act to i (because it's void) so just leave it. 
```

如果您需要更多说明，请随时修改您的问题或评论。

# javascript - 无法在 html 中为文本框添加水印

> ID：12888638
> 
> 赞同：1
> 
> 时间：2012-10-15T02:44:39.570
> 
> 标签：javascript, jquery, html

我有一个包含用户名、密码和职业的 HTML 表单。如果职业恰好是学生，那么我使用 JavaScript 创建一个新框来输入用户的大学电子邮件。这很好用，我还可以给用户名和密码框加水印。但是，当新的大学邮箱出现时，我无法为其添加水印。我不明白为什么。

```
$('#editfill_occupation').change(function() {
    if ($("#editfill_occupation").val() == "0") {
        $('#editfill_uniemail').watermark("Please enter your university email address ");
        $('#editfill_uniemail').show();
    }
    else {
        $('#editfill_uniemail').hide();
    }
});​ 
```

我的 editfill_uniemail 定义如下：

```
<input type="text" name="editfill_uniemail"  id="editfill_uniemail" style="display: none;" > 
```

我还尝试使用上述定义中的占位符属性，但它不起作用。我可能做错了什么？还是不是水印的写入方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:53:15.553

您是否尝试过 HTML 占位符属性？

**编辑：**我看到你有，但我的代码工作正常。

演示：http: [//jsfiddle.net/SO_AMK/4nGdQ/](http://jsfiddle.net/SO_AMK/4nGdQ/)

HTML：

```
<select id="editfill_occupation">
    <option value="0">Providing demos for questions</option>
    <option value="1">Just kidding about that</option>
    <option value="2">But next time,</option>
    <option value="3">Please do your own :D</option>
</select>
<input type="text" name="editfill_uniemail" placeholder="Please enter your university email address" id="editfill_uniemail" style="display: none;" >​ 
```

目前[除 IE 之外的所有现代浏览器都](http://caniuse.com/#feat=input-placeholder)支持占位符属性，并将在 IE 10 中支持（在这种情况下，caniuse.com 只是在 IE 中不显示）

不要忘记一个`document.ready()`处理程序...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:01:46.423

**另一个演示** [http://jsfiddle.net/aXzuS/](http://jsfiddle.net/aXzuS/)

您可以通过使用API`.focus`来完成此操作。`.blur`

好链接：http: [//blogs.planetcloud.co.uk/mygreatdiscovery/post/A-simple-jQuery-watermark-textbox.aspx](http://blogs.planetcloud.co.uk/mygreatdiscovery/post/A-simple-jQuery-watermark-textbox.aspx)

希望能满足需求！`:)`

**代码**

```
$(document).ready(function() {

    var tbval = $('#hulk').val();

    $('#hulk').focus(function() {
        $(this).val('');
    });

    $('#hulk').blur(function() {
        $(this).val(tbval);
    });

});​ 
```

# ruby-on-rails - 有效的 TDD 策略的所有组成部分是什么？

> ID：12888640
> 
> 赞同：2
> 
> 时间：2012-10-15T02:44:47.540
> 
> 标签：ruby-on-rails, rspec, tdd, capybara

我对学习如何使用 TDD 正确开发软件感到非常沮丧。似乎每个人都以不同的顺序和不同的顺序做这件事。在这一点上，我只想知道所有考虑因素是什么？这就是我想出的：我应该使用 rspec 和 capybara。话虽如此，我需要编写哪些不同类型的测试，才能拥有一个构建良好且经过测试的应用程序。我正在寻找一个列表，其中包含我正在测试的应用程序区域、测试它所需的框架以及任何依赖项。

例如，似乎人们建议从对模型进行单元测试开始，但当我观看 TDD 教程时，他们似乎只编写集成测试。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:20:08.210

好吧，主题“你如何 TDD”与主题“你如何正确测试？”一样公开。在 Ruby 中，更具体地说，在 Rails 中，rspec 应该是开始使用的工具，但不是结束。RSpec 允许您为组件编写单元测试，以单独测试它们。在 Rails 上下文中，这意味着：

*   测试你的模型
*   测试你的控制器
*   测试你的观点
*   测试你的助手
*   测试你的路线

它是一个非常好的工具，不完全是 Rails 绑定的，它也用于测试其他框架。

在你完成 RSpec 之后，你应该跳到黄瓜。Cucumber (http://cukes.info/) 是编写集成测试最常用的工具（同样，用于 Rails 环境）。然后，您可以将水豚整合到黄瓜上。

完成 cucumber 之后，您将完成对应用程序后端及其（部分）HTML 输出的测试。那时您还应该测试您的 javascript 代码。怎么做？首先，您必须对其进行单元测试。Jasmine (http://pivotal.github.com/jasmine/) 是您可能用于这项工作的工具之一。

然后你必须测试它在你的结构中的集成。怎么做？您将回到 cucumber 并将 selenium (http://seleniumhq.org/) 与您的 cucumber 框架集成，您将能够在浏览器中“实时”测试您的集成，访问您的 javascript 魔法和测试它当场。

因此，在您完成这些步骤之后，您将了解拥有良好集成测试环境所需的大部分步骤。我们完了吗？并不真地。您还应该设置一个覆盖工具（一个可用的：[https](https://github.com/colszowka/simplecov) ://github.com/colszowka/simplecov ）来检查您的代码是否经过了很好的测试并且没有留下任何松散的结尾。

完成这些烦琐的步骤后，您还应该做最后一件事，以防您不是一个人开发它，并且团队足够大以使其仍然无法自行管理：您将设置一个测试服务器，它除了定期运行所有前面的步骤并发送有关其结果的通知外，不会做任何事情。

因此，所有这些都为感兴趣的开发人员设置了一个良好的 TDD 环境。我只为不同类型的测试命名了 ruby​​/rails 社区中最常用的框架，但这并不意味着没有其他框架可以或更适合您的工作。它仍然没有教你如何正确测试。为此，涉及更多的理论，以及很多子辩论。

如果我忘记了什么，请在下面的评论中写下来。

除此之外，您应该了解如何正确测试。也就是说，您要采用声明式还是命令式方法？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:41:22.000

从简单开始，并根据需要添加更多工具和技术。有很多方法可以 TDD 一个应用程序，因为每个应用程序都是不同的。一种方法是从使用 Rspec 和 Capybara（或 Cucumber 和 Capybara）的端到端测试开始，然后根据需要添加更细粒度的测试。

当 Capybara 测试通过需要超过几分钟的时间时，您知道您需要更细粒度的测试。

此外，如果您的应用程序的域不重要，那么首先开始测试域可能会更有成效。

这取决于！尝试不同的方法，看看什么对你有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T13:54:56.487

使用 TDD 对实际应用程序进行端到端开发确实是一项未充分记录的活动。确实，您可以在那里找到大部分教科书示例、katas 和理论文章。然而，有几本书对 TDD 采取了更全面和实用的方法 -例如[GOOS](http://www.growing-object-oriented-software.com/)（强烈推荐），在较小程度上，还有 Beck 的[Test Driven Development by Example](https://rads.stackoverflow.com/amzn/click/com/0321146530)，尽管它们没有具体解决 RoR。

GOOS 中描述的方法从编写端到端验收测试（*集成*测试，在您的情况下可能相当于 RSpec 测试）开始，但在该循环中，您编写尽可能多的 TDD*单元*测试，以设计您的较低级别对象。在编写这些内容时，您基本上可以从您想要的地方开始——从外层、内层或只是应用程序中对您最方便的部分。只要您模拟出任何依赖项，它们无论如何都将保持单元测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T14:23:09.847

当我开始学习 Rails 时，我也有同样的问题，有很多工具或方法可以让测试变得更好，但是在花了很多时间之后，我终于意识到你可以简单地忘记你必须做某事的规则或不是，先测试您认为可能有问题的东西，然后再测试其他地方。嗯，需要时间。

这只是我的观点。

# wordpress - Wordpress - 批准修改后的帖子

> ID：12888643
> 
> 赞同：4
> 
> 时间：2012-10-15T02:45:08.203
> 
> 标签：wordpress, edit, posts

我只是希望能够重新批准我的投稿人对已发布帖子的编辑。因此，当他们编辑帖子时，它会被发回以供批准。

有没有办法做到这一点？

# android - 我如何与飞镖社区联系以提出建议？

> ID：12888644
> 
> 赞同：0
> 
> 时间：2012-10-15T02:45:16.823
> 
> 标签：android, iphone, dart

我希望做的是告诉一些我认为对 Dart 社区很重要的事情。如果能以某种方式使用 Dart 编写 android 和/或 iPhone 应用程序，那对于 Dart 来说将是非常棒的。

有一种方法，就是在 Dart 中制作程序，将其编译为 JavaScript，然后使用 Adob​​e air 制作应用程序。

但看起来效率低下。

那么有没有其他我不知道的方法，至少可以通过它构建一个Android应用程序？使用 Dart 我知道你可以使用 JavaScript 和 HTML/CSS 构建一个应用程序。所以我正在寻找 HTML + CSS + Dart。

如果 adobe air 直接支持 Dart 语言就好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T03:33:06.750

好问题！你可以通过几种方式连接到 Dart 社区。

*   [在Dart 邮件列表中](http://www.dartlang.org/mailing-list)与其他社区成员和工程师讨论 Dart 。
*   在我们的公共错误跟踪器中提交错误和功能请求：[dartbug.com](http://dartbug.com)
*   使用标签在 Stack Overflow 上提问`dart`。:)

对于新闻和更新，我建议如下：

*   [new.dartlang.org](http://news.dartlang.org)用于博客风格的提要
*   + Google+ 上的[飞镖](https://plus.google.com/109866369054280216564/posts)
*   推特上的[@dart_lang](http://twitter.com/dart_lang)

在您的特定情况下，当您有一个像您建议的那样的大想法时，我会推荐邮件列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:08:21.337

只是为了添加到赛斯的评论中。与 Dart 社区交互的另一种方式是 irc.freenode.net 上的#dart 频道，您可以从任何 irc 客户端（例如 mIRC、xchat 等）或从[Freenode 网络客户端访问该频道](http://webchat.freenode.net/?channels=dart "irc.freenode.net#dart")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:26:58.937

[使用 Dart 构建手机应用程序需要考虑的东西是PhoneGap](http://phonegap.com)，尽管它仍然需要首先转换为 JS 。你是对的：如果 Dart 能在更多平台上得到直接支持会很酷，但是从 Dart 生成 JS 真的只是一个简单的步骤。

要查看我自己在 Dart 中创建的独立 iPhone Web 应用程序（当然是游戏）的一些实验，请单击[此处](http://richthepandagames.com/DartAndArt/)。

那么，简短的回答是，是的：当然可以使用 Dart 为移动设备创建应用程序，但至少目前，它可能需要在 DartEditor 的某个地方单击“生成 Javascript”选项。

# ipad - 直接从 PC 编辑 iPad 应用程序中包含的文件，无需越狱 iPad

> ID：12888651
> 
> 赞同：1
> 
> 时间：2012-10-15T02:46:11.173
> 
> 标签：ipad, file, edit

我想要编辑的混合 iPad 应用程序文件中有一些 CSS。我遇到了 iFunBox 和 iExplore，它允许我在 iOS 和 macOS 之间移动文件。但我无法直接编辑文件。我正在执行以下操作：

1.  通过单击 iFunBox UI 中的文件在 TextWrangler 中打开和编辑文件
2.  在查找器中显示文件
3.  通过将文件拖到 iFunbox 将文件复制到 iPad

看起来应该很容易 iFunBox 或类似的东西来自动化这个过程并让文件直接可编辑。

有人知道实现这一目标的应用程序吗？

附件是我凌乱的桌面的截图，显示了 iExplore、TextWrangler 和 Finder 窗口。理想情况下，我希望看到编辑选项以及打开和快速查看选项。

![在此处输入图像描述](../Images/32b6cf6e24aa2c992e78e9561933eb00.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:49:23.593

等等，您只是希望能够通过 FTP 编辑文件吗？如果是这样使用，[Gusto](http://horseandtherook.com/gusto/)

# python - 我该怎么做才能将此pyportmidi（pypm）用作python中的库？

> ID：12888655
> 
> 赞同：0
> 
> 时间：2012-10-15T02:47:03.563
> 
> 标签：python, audio, pygame, midi, pypm

这显然是这里的源代码（虽然我不确定）：

[https://bitbucket.org/pygame/pygame/src/01b2cb16dc17/src/pypm.pyx](https://bitbucket.org/pygame/pygame/src/01b2cb16dc17/src/pypm.pyx)

我是编程新手，并试图将 python 用作音频引擎。这似乎几乎是从 python 发送 midi 消息的唯一方法。

我真的不知道如何处理链接中提供的信息。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:41:50.943

Pygame 可以发送 midi 消息：[http](http://www.pygame.org/docs/ref/midi.html) ://www.pygame.org/docs/ref/midi.html 示例文件夹中的演示：http: [//www.pygame.org/docs/ref/examples.html#pygame .examples.midi.main](http://www.pygame.org/docs/ref/examples.html#pygame.examples.midi.main)

我相信您链接了 pygame 本身的源代码，而不是演示。

# jquery - 将 JSON 对象（数组）发布到 MVC3 控制器

> ID：12888657
> 
> 赞同：0
> 
> 时间：2012-10-15T02:47:04.887
> 
> 标签：jquery, asp.net, json, asp.net-mvc-3

> **可能重复：**
> [通过 JSON 将对象数组发布到 ASP.Net MVC3](https://stackoverflow.com/questions/4789481/post-an-array-of-objects-via-json-to-asp-net-mvc3)

我正在尝试将 JSON 对象发布到 MVC3 控制器。我在 stackoverflow 中看到了解决方案，但大多数解决方案都是将 JSON 对象绑定到模型。如何使后 JSON 对象（数组）转换为通用 c# 对象类型的数组？或者允许我遍历 json 对象的东西。请记住，对象永远不会相同。我基本上想创建一个控制器，它允许我循环 json 对象并从那里获取数据。目前，我在 MVC 控制器中获得了一组对象，但是我似乎看不到其中的数据。有任何想法吗？

不知道我是否走在正确的道路上。

谢谢你，-Tesh

Javascript：

```
 var parm = JSON.stringify({ session_id: sessionId, data: data, metaData: metaData })

    var ret = "";
    $.ajax({
        type: 'post',
        cache: false,
        url: path + "/Common/Export/Load",
        data: parm,
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        traditional: true,
        async: false,
        success: function (data) {
            //ret = data.Table[0].Column1;
        },
        error: function (event, request, settings) {
            //alert('save error: ' + JSON.stringify(request)) + ', ' + JSON.stringify(settings); 
        }
    }); 
```

MVC 控制器

```
[HttpPost]
    public ActionResult Load(String session_id, List<object> data, Object metaData)
    {

        return View();
    } 
```

传递给控制器​​的 JSON 对象。对象可以随时。

```
{ 
```

“表”：[{“first_name”：John，“last_name”：Doe，“creation_date”：“2012-10-04T15:50:37.55”，“created_by”：Mary Jane，“last_modified_date”：“2012-10- 04T15:50:37.55”，“last_modified_by”：乔恩·米切尔

```
},
{
   "first_name": Bill,
  "last_name": Doe,
  "creation_date": "2012-10-04T15:50:37.55",
  "created_by": Jane Wick,
  "last_modified_date": "2012-10-04T15:50:37.55",
  "last_modified_by": Jon Mitchell
} 
```

] }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:58:59.803

无论如何，默认情况下对象的属性很少，因此 JSON 绑定器不会将任何内容绑定到它们。

如果您有想要循环和获取的公共属性，请将它们声明为 ViewModel，然后将其设置为列表对象中的参数。

```
public class BaseModel
{
     public DateTime creation_date {get;set;}
} 
```

然后你可以使用

```
public ActionResult Load(String session_id, List<BaseModel> data, Object metaData)
{     
     ...
} 
```

如果你真的需要将它绑定到一个对象，你可以试试这个链接：

[将 JSON 转换为 ExpandoObject](http://coderjournal.com/2010/07/turning-json-into-a-expandoobject/)

高温高压

硅

# vb.net - 未捕获错误（AsyncCallback）

> ID：12888659
> 
> 赞同：0
> 
> 时间：2012-10-15T02:47:31.003
> 
> 标签：vb.net, sockets, asynchronous, error-handling

嗨，我有一段代码使用套接字连接到服务器

```
Try
    'Connect To The Server
    Dim socketclient As New TcpClient
    Dim success
    Dim result
    result = socketclient.BeginConnect(ip, port, socket.EndConnect, socketclient)
    success = result.AsyncWaitHandle.WaitOne(5000, True)
    If socketclient.Connected = False Then
        Throw New Exception("Server is offline")
    End If
catch ex as exception

End Try 
```

如你看到的。如果服务器离线，我的 try-catch 设置不会捕获错误“主机未知”我相信这是因为错误发生在异步调用期间。如果这是真的，如何在异步调用中捕获错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:43:54.667

您应该结束异步操作。您的等待是完全没有必要的，如果您只想阻止等待连接，只需通过套接字调用 EndConnect ;) [http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.endconnect。 aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.endconnect.aspx)

# python - uuid.UUID() 静默失败

> ID：12888661
> 
> 赞同：-1
> 
> 时间：2012-10-15T02:47:51.833
> 
> 标签：python, uuid, unicode-string

我正在尝试使用 uuid 模块将 unicode 对象转换为 UUID。这是我正在使用的代码：

```
GUID = $unicode
GUID = uuid.UUID( GUID )
print 'should be an UUID object:'
print GUID 
```

问题是 GUID 没有转换......即使在通过 UUID() 运行它之后，它也只是保持相同的 unicode。此外，不会抛出任何错误。这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:59:02.160

据我所知，您的问题是您将 UUID 作为字符串获取。这是因为您正在使用`print`，它`str()`在对象上运行。试试`print(repr(some_uuid))`。

```
>>> some_uuid = uuid.UUID("3F2504E0-4F89-11D3-9A0C-0305E82C3301")
>>> print(some_uuid)
3f2504e0-4f89-11d3-9a0c-0305e82c3301
>>> print(repr(some_uuid))
UUID('3f2504e0-4f89-11d3-9a0c-0305e82c3301') 
```

`isinstance()`您关于退货的断言`False`在我这边是不可重现的：

```
>>> isinstance(uuid.UUID("3F2504E0-4F89-11D3-9A0C-0305E82C3301"), uuid.UUID)
True 
```

# c# - HttpWebRequest POST 字节数组

> ID：12888664
> 
> 赞同：1
> 
> 时间：2012-10-15T02:48:23.593
> 
> 标签：c#, .net

如何使用 发布字节数组图片`HttpWebRequest`？

img 是一个字节数组。

下面是代码，当我使用 parse 函数时，我无法将 byte[] img 转换为 string ：

```
// Parse is the function to replace @xxx with a new string
string docString = Parse("action=@action&img=@img&signloclat=@lat&lng=@lng&id=@id",
    "@action", "upload", "@img", img, "@lat", latitude, "@lng", longitude, "@id", id);
byte[] docByte = Encoding.ASCII.GetBytes(docString);

Uri wsHost = new Uri(EnpointAddress());
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(wsHost);

request.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip,deflate");

request.ContentType = "application/x-www-form-urlencoded";
request.Method = "POST";
request.ContentLength = docByte.Length;

Stream stream = request.GetRequestStream();
stream.Write(docByte, 0, docByte.Length);
stream.Close(); 
```

如何使用字符串发布字节数组`HttpWebRequest`？

我可以在发送之前将字节数组转换为字符串吗？

谢谢你。

# ruby-on-rails - 如何将模型导入自定义 rake 任务？

> ID：12888669
> 
> 赞同：1
> 
> 时间：2012-10-15T02:49:08.863
> 
> 标签：ruby-on-rails, ruby

在我的 lib/tasks 文件夹中，我添加了一个新的 .rake 文件。

在 rake 任务中，我这样做：

```
p = Post.new( ....)
p.save! 
```

当我运行我的任务时，我收到错误：

```
rake aborted!
uninitialized constant Post 
```

我必须做什么才能导入我的 Post 模型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T02:53:51.527

我想你可能错过了环境声明。这对于 Rake 了解您的 Rails 环境是必要的。您的 rake 任务调用应如下所示：

```
task :my_rake_task => [:environment] do

    # Your code here

end 
```

让我知道这是否能解决问题！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T02:55:36.213

您想让任务依赖于 rails 环境。您可以通过在任务声明之后指定 => :environment 来做到这一点，如下所示：

```
namespace :my_task do 
  desc "an example task"
  task :create_post => :environment do 
    Post.new .... # the rest of the implementation
  end
end 
```

# php - PHP如何用比较运算符比较字符串？

> ID：12888674
> 
> 赞同：15
> 
> 时间：2012-10-15T02:50:09.147
> 
> 标签：php, string, compare, operators, type-coercion

我正在将字符串与比较运算符进行比较。

我需要对以下两个比较及其结果进行某种解释。

```
if('ai' > 'i')
{
    echo 'Yes';
}
else
{
    echo 'No';
}

output: No 
```

为什么这些输出是这样的？

```
if('ia' > 'i')
{
    echo 'Yes';
}
else
{
    echo 'No';
}

Output: Yes 
```

再说一遍，为什么？

也许我忘记了一些基础知识，但我真的需要对这些比较示例进行一些解释才能理解这个输出。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-15T02:57:26.153

PHP 将根据字母顺序使用大于和小于比较运算符来比较 alpha 字符串。

*   在第一个示例中，按字母顺序`ai`出现在前面，因此（大于）的测试是- 顺序中的较早被认为是“小于”而不是“大于”。`i``>``false`

*   在第二个示例中，`ia`在`i`字母顺序之后，因此`>`（大于）的测试是`true`- 稍后被认为是“大于”的顺序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T03:04:52.780

To expand on [coderabbi's answer](https://stackoverflow.com/questions/12888674/how-does-php-compare-strings-with-comparison-operators/12888720#12888720):

It is the same type of logic as when you order by number in some applications and get results like the following:

*   0
*   1
*   105
*   11
*   2
*   21
*   3
*   333
*   34

It's not based on string length, but rather each character in order of the string.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T03:21:41.717

PHP 中的`<`and`>`比较运算符将比较字符串的第一个字符，然后比较字符串中的其他字符。

因此，您的第一个表达式*ai*（第一个字符串）和*i*（第二个字符串）*a*是字符串中的第一个字符，而*i*作为第二个字符串中的第一个字符`>`将 return `false`，随后第二个语句将返回`true`由于相同原因。

但是，如果您确实需要比较两个较长的字符串值与许多字符，您可以尝试使用[substr_compare](https://www.php.net/manual/en/function.substr-compare.php)方法：

```
substr_compare("abcde", "bc", 1, 2); 
```

在此示例中，您有两个要比较的字符串，1 是偏移起始位置，2 表示要比较这些字符串右侧的字符数。-1 表示从第一个字符串的末尾开始的偏移量。例如做这样的事情：

```
substr_compare("string1", "string2", 0, length); 
```

此外，还可以考虑使用 strcmp() ，即`strcmp("string1", "string2", length)`长度是要从两个字符串中比较的字符数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-02T08:47:18.240

当两个*字符串*都是*数字*格式时，PHP 会将字符串转换为数字并转换值。

> 如果将数字与字符串进行比较或比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较。这些规则也适用于 switch 语句。当比较是 === 或 !== 时不会发生类型转换，因为这涉及比较类型和值。

参考：*[比较运算符](https://www.php.net/manual/en/language.operators.comparison.php)*

# python - NumPy 不会在 OS X 10.7 上从 1.5.1 升级到 1.6.2

> ID：12888679
> 
> 赞同：5
> 
> 时间：2012-10-15T02:51:04.357
> 
> 标签：python, numpy, osx-lion, easy-install

我正在尝试更新/升级我的 NumPy，但失败了。我想我可能在不同的目录中安装了多个版本的 NumPy，但默认情况下 python 会导入一个旧版本。有什么帮助吗？

这是我的 Python 所在的位置：

```
Gonzo-vs-Kitties:~ brian$ which python
/Library/Frameworks/Python.framework/Versions/2.7/bin/python 
```

这是 Python 导入的版本：

```
Gonzo-vs-Kitties:~ brian$ python
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy
>>> print numpy.__version__
1.5.1
>>> 
```

现在我使用 easy_install 来升级 NumPy：

```
Gonzo-vs-Kitties:~ brian$ sudo easy_install --upgrade numpy
Searching for numpy
Reading http://pypi.python.org/simple/numpy/
Reading http://numpy.scipy.org
Reading http://sourceforge.net/project/showfiles.php?group_id=1369&package_id=175103
Reading http://numeric.scipy.org
Best match: numpy 1.6.2
Processing numpy-1.6.2-py2.7-macosx-10.7-intel.egg
numpy 1.6.2 is already the active version in easy-install.pth
Installing f2py script to /usr/local/bin

Using /Library/Python/2.7/site-packages/numpy-1.6.2-py2.7-macosx-10.7-intel.egg
Processing dependencies for numpy
Finished processing dependencies for numpy 
```

即使在我升级后，NumPy 仍然是旧版本：

```
>>> import numpy
>>> print numpy.__version__
1.5.1
>>> 
```

这是我的系统路径：

```
>>> print sys.path
['', '/Library/Python/2.7/site-packages/nose-1.2.1-py2.7.egg', '/Library/Python/2.7/site-packages/virtualenv-1.8.2-py2.7.egg', '/Users/brian/Code/trac/genshi-trunk', '/Users/brian/Code/trac/trac-trunk', '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload', '/Library/Python/2.7/site-packages/pip-1.2.1-py2.7.egg', '/Library/Python/2.7/site-packages/numpy-1.6.2-py2.7-macosx-10.7-intel.egg', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages', '/Library/Python/2.7/site-packages'] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T04:01:04.643

检查 numpy 包的路径：

```
import numpy
print numpy.__path__ 
```

并检查它是否是您刚刚安装的那个。

# javascript - Backbone + RequireJS - A Deferred that awaits the creation of another deferred object

> ID：12888681
> 
> 赞同：1
> 
> 时间：2012-10-15T02:51:14.643
> 
> 标签：javascript, jquery, backbone.js, requirejs, jquery-deferred

I'm writing a Backbone + RequireJS project, and encountering the following situation:

**Module A:**

```
Backbone.Mediator.publish('ajax:fetch:in:module:b');

// I need to do something like **$.ajax(options).done()** here 
```

**Module B:**

```
subscriptions: {
    'ajax:fetch:in:module:b': fetch
},

fetch: {
    $.ajax(options);
} 
```

I've tried to hook `$.ajax(options)` under a shared namespace (like `cache.temp = $.ajax(options)`) in Module B, then calling `cache.temp.done()` inside Module A, but it happened way before `$.ajax(options)` was created so `cache.temp` was simply an `undefined`.

I guess one way to solve this problem is to create a deferred that delays the execution of the code before `$.ajax(options)` is ready, but am not very sure whether this is something doable. Or if there are better ideas around, I am all ears.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:26:14.607

这是 requirejs 与 jquery deferred 一起使用的简单示例：

**模块A.js**

```
define(['require', 'jquery'], function(require, $) {

    var deferred = $.Deferred();

    require(['moduleB'], function(moduleB) {
        deferred.resolve(moduleB);
    });

    return deferred.promise();

}); 
```

**应用程序.js**

```
require(['moduleA'], function(deferred) {
    deferred.done(function(moduleA) {
        console.log(moduleA);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:46:50.593

如果你有一个 ajax 或延迟的 obj，你可以使用`$.when`and like this。`$.then`

`$.when( ajax call).then( do other thing)`

# iphone - 用@符号和引号为NSDictionary和NSArray换行的程序？

> ID：12888683
> 
> 赞同：0
> 
> 时间：2012-10-15T02:51:42.917
> 
> 标签：iphone, nsdictionary

是否有可以采用这样的文本列表的程序：

```
cat, dog, bird 
```

并输出：

```
@"cat", @"dog", @"bird" 
```

我有一个很长的列表，我想转换为`NSDictionary`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:55:59.713

是的。有许多文本编辑器可以进行查找和替换。（搜索“，”并替换为“”，@“”。）在开头添加“@”，在末尾添加“”，你就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T02:59:25.810

为什么不使用 iOS 呢？将文件读入字符串，将其分成组件，迭代组件并以您想要的格式写入它们。

您会发现一些有用的方法：

```
NSString:
+ (id)stringWithContentsOfFile:(NSString *)path encoding:(NSStringEncoding)enc error:(NSError **)error

NSArray:
- (NSArray *)componentsSeparatedByString:(NSString *)separator

NSString:
+ (id)stringWithFormat:(NSString *)format, ... 
```

使用以下内容制作输出单词：

```
NSString *outputWord = [NSString stringWithFormat:@"@\"%@\"", word]; 
```

我不知道您的列表有多“长”，但我已经使用整个拼字游戏词典做到了这一点，其中单词由`\n`.

# msbuild - MSBuild 强制执行 HintPath 验证

> ID：12888687
> 
> 赞同：6
> 
> 时间：2012-10-15T02:52:09.250
> 
> 标签：msbuild

我经常看到程序集引用有错误的 HintPath 的情况，这可能会导致奇怪的随机故障。

例如，您有错误的 HintPath，但您的 GAC 中有相应的程序集。这意味着该项目将在您的机器上编译正常，但在其他机器上会失败。

在我的情况下，反之亦然，即使在 CI 服务器上，GAC 中也有一个库，因此持续集成无法检测到此问题。

我正在寻找类似自定义 MSBuild 任务的东西，它将验证所有 HintPaths 并在其中任何一个错误时导致构建失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T14:00:45.210

如果您想在提示路径无效的情况下使构建失败，为什么不直接引用一些东西呢？这是我公司的 SOP，因为同一库有很多版本。

例如：

```
 <Reference Include="C:\Path\To\Library\MyReference.dll">
      <Private>False</Private>
    </Reference> 
```

或者，如果您想动态地基于某个路径引用库，您可以设置一些 msbuild 属性，例如指向您的库文件夹的“ExternalLibs”（如果您将库保存在源代码管理等中）。然后，您可以通过命令行设置该属性（当您调用 msbuild 时）或为其提供一些默认值，例如，每个用户可以在其 .user 文件中覆盖该默认值。

```
 <Reference Include="$(ExternalLibs)\MyReference.dll">
      <Private>False</Private>
    </Reference> 
```

这个解决方案非常灵活。

# textbox - 如何在 rdlc 文本框中的行之间设置空格

> ID：12888688
> 
> 赞同：3
> 
> 时间：2012-10-15T02:52:12.370
> 
> 标签：textbox, report, rdlc, css

我们如何在 rdlc 文本框中设置行间距？场景：应用程序应将报告打印到预先打印的固定纸上。报表的一个字符串字段通常有大约400个字符的数据（用户输入的描述），需要多行打印。作为无法在 rdlc 中设置文本框控件的 LineHeight 属性问题的解决方法，我编写了一个自定义代码，它将新行字符插入到字符串中（通过添加 Environment.NewLine），以便将字符串拆分为多行. 但是，我无法在文本框中的每一行之间设置空格。我尝试设置 SpaceAfter 和 SpaceBefore 属性。没有变化:-(我也尝试使用 VbCrLf 以及 Chr(10) 和 Chr(13) 的组合而不是 Environment.NewLine。没有帮助......你能帮忙吗！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-06T13:08:33.757

我为报告中的每一行添加了新的文本框，并为它们设置了必要的行距。因为未应用文本框属性中的行距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-26T18:48:42.440

我就是这样做的。（它只在段落之间起作用，而不是在换行的单个段落中。）假设字体是 12 pt，我想要段落之间有一点空间，但不是完整的双倍行距。我在段落之间放置了多余的行，然后选择了那个空行并将字体设置为 6 pt。如果我想要 1.5 间距，我会将其设置为更大的字体。

# cocos2d-iphone - cocos2d中如何使用lua创建关卡和地图

> ID：12888692
> 
> 赞同：0
> 
> 时间：2012-10-15T02:52:28.710
> 
> 标签：cocos2d-iphone, lua, multi-level

我有这个想法，我想使用 lua 来创建我的关卡，以及这些关卡中的地图。我希望能够简单而明确地操作数据并在应用商店中添加新级别作为购买。如何使用 lua 在这些地图中创建地图和关卡？lua 是否支持 OOP，所以我可以创建一个基本 Map“类”和一个基本级别“类”，还是我需要对所有内容进行硬编码？我知道愤怒的小鸟使用 lua，我可以吗？

任何方向或样品都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:38:01.360

Lua 不直接支持类（尽管有一些库提供类功能），而是使用称为表的数据结构。表格非常通用，因为它们可以包含字符串、数字、函数和其他表格。

Lua 的一大好处是它是脚本化的，因此它可以作为文件下载并在编译的游戏运行时运行。这是存储在`.lua`文件中的级别的一个可能示例：

```
return {
  name = 'Example level',
  score = 80,
  map = {
    height = 8,
    width = 8,
    data = 'sssssssssoooooossoooooossoooooossoooooossoooooossbooooesssssssss'
  },
  ondraw = function (self)
    drawmap(self.map)
    drawscore(self.score)
  end
} 
```

您可能会发现另一个有用的特性是元表。它们有点允许继承与表一起使用。您可以在此处阅读有关使用元表实现类的更多信息：http: [//lua-users.org/wiki/SimpleLuaClasses](http://lua-users.org/wiki/SimpleLuaClasses)

# linux - 每次文件达到特定大小时使文件无效的 Shell 脚本

> ID：12888693
> 
> 赞同：0
> 
> 时间：2012-10-15T02:52:30.440
> 
> 标签：linux, shell, unix

如果文件达到一定大小，我正在编写一个 shell 脚本来取消/截断文件。该文件也一直被一个进程打开/写入。现在每次我取消文件时，文件指针会重新定位到文件的开头还是会保持在以前的位置？让我知道一旦文件被截断，我们是否可以重置文件指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:56:16.923

文件指针的位置取决于打开文件的进程如何打开文件。如果是以追加模式打开的，那么截断文件将意味着新数据将写入文件末尾，这实际上也是文件截断后第一次写入的开始。如果不是以追加模式打开，那么截断文件只是意味着文件开头有一系列虚拟零字节，但实际数据将在最后一次写入完成的同一点继续写入. 如果文件正在被其他进程重新打开，而不是保持打开状态，则应用大致相同的规则，但文件更有可能在开始时被写入。

您无法重置另一个进程的文件指针，AFAIK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-26T02:48:22.273

一个 cron 作业或类似的东西将完成这项任务；它会找到每个大于 4096 字节的文件，然后将文件无效

```
$ find -type f -size 4096c -print0 | while IFS= read -r -d $'\0' line; do cat /dev/null > $line; done 
```

[在此处输入链接描述](https://superuser.com/a/204571/234312)

# java - 使用 War 文件部署到 Tomcat 导致 ClassNotFoundException

> ID：12888694
> 
> 赞同：2
> 
> 时间：2012-10-15T02:52:30.670
> 
> 标签：java, tomcat, jdbc

我正在开发一个 Web 应用程序并且遇到了困难，可以使用一些建议。所以申请是由一个不再在我们公司的同事写的。他们在后端使用 Java 和 Javascript 为 Apache Tomcat 编写了一个 Web 应用程序。该应用程序使用 JDBC api 与 SQL Server 数据库进行交互。这个人在 Eclipse 中完成了所有开发并以这种方式运行它。

我正在尝试使用此 Web 应用程序并将其移动到服务器。我尝试使用 Eclipse 导出 WAR 文件，然后将其放在 Tomcat webapps 文件夹中。然后，当我启动 Tomcat 时，程序被提取出来。到现在为止还挺好。该网站出现并且运行良好。但是，当我尝试访问依赖数据库信息的页面时，一切都将变为 NULL。我浏览了 Tomcat 日志，发现在标准输出中给出了以下消息：

> ClassNotFoundException：com.microsoft.sqlserver.jdbc.SQLServerDriver

我曾假设 WAR 文件将包含所有依赖项，但我猜测可能并非如此。如果有人有经验，这是发生了什么事吗？如果有人知道，有没有办法告诉 Eclipse 这样做？否则，我的选择是什么？我不是 Java 开发人员，所以如果需要，我不知道如何安装 JDBC。

任何帮助表示赞赏。麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:16:04.637

您可以执行以下操作

1.  转到[Microsoft JDBC 驱动程序下载](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)页面并下载 JDBC 驱动程序并将其安装到某个位置。
2.  `.war`使用 zip 实用程序（如`7-zip`或）打开文件`winzip`。
3.  从安装下载的 JDBC 驱动程序的目录中复制 sqljdbc.jar`sqljdb_4.0/enu`并将其粘贴到`WEB-INF/lib`解压缩的 war 文件中。
4.  将其压缩为`.war`文件并再次部署。

这将使应用程序运行。

如果你想永久修复这个问题，那么你应该在你的构建系统中添加停止以包含`sqljdbc.jar`在你的`WEB-INF/lib`构建`war`文件中，即如果你正在使用 ANT，则在 build.xml 中，或者在你的 Maven 的 pom.xml`dependencies`中针对此特定依赖项的部分.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:20:20.500

您不需要手动执行“导出WAR>复制到tomcat>启动tomcat”，您可以配置eclipse直接在您的tomcat安装中进行部署，首先双击tomcat服务器，然后选择“使用tomcat安装” “服务器位置”部分。 ![在此处输入图像描述](../Images/7fcf03418e991ac57c66d8de106c9848.png)

确保您的应用程序`sqljdbc4.jar`在您的项目`WebContent/WEB-INF/lib`目录中包含 SQLServer JDBC 驱动程序 ()（假设您的同事使用 Eclipse“动态 Web 项目”进行项目布局），如果没有，请从[此处](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)下载，解压缩并将其复制到上述文件夹，下次启动tomcat时，它会自动为你添加。

`pom.xml`如果项目使用 maven 项目布局（项目根文件夹中有一个名为的文件），请使用[以下说明](https://stackoverflow.com/questions/6942407/setting-up-maven-dependency-for-sql-server)在本地存储库中安装依赖项（Maven 和 Microsoft 在驱动程序的许可和重新分发方面存在一些分歧，所以没有回购）

# android - 在 Android 中以非矩形形状裁剪图像，如 Face fighter

> ID：12888696
> 
> 赞同：4
> 
> 时间：2012-10-15T02:52:57.753
> 
> 标签：android, image, crop

我想在 Android 中以某种形状裁剪图像。

通过使用`Camera Intent`，我只能这样做：

![相机意图](../Images/5c9b513b360c558c6a068405c7aac4f0.png)

我不知道该怎么做：

![面对战斗机](../Images/54d82a1f42bae203bf06e9346dd7a20f.png)

可能吗？

# node.js - 在 node.js 中使用“自然”模块

> ID：12888700
> 
> 赞同：4
> 
> 时间：2012-10-15T02:53:58.740
> 
> 标签：node.js

我正在尝试使用 Node.JS 中的自然模块。我编写了一个简单的程序，它从浏览器获取输入并使用贝叶斯分类器对其进行分类。但是，在运行时，我收到以下错误：

```
/home/hadoop/cloud_major/testing/node_modules/natural/node_modules/apparatus/lib/apparatus/classifier/bayes_classifier.js:95
 classifier.__proto__ = BayesClassifier.prototype;
                      ^
TypeError: Cannot set property '__proto__' of undefined
at Function.restore (/home/hadoop/cloud_major/testing/node_modules/natural/node_modules/apparatus/lib/apparatus/classifier/bayes_classifier.js:95:27)
at restore (/home/hadoop/cloud_major/testing/node_modules/natural/lib/natural/classifiers/bayes_classifier.js:37:54)
at /home/hadoop/cloud_major/testing/node_modules/natural/lib/natural/classifiers/bayes_classifier.js:44:23
at /home/hadoop/cloud_major/testing/node_modules/natural/lib/natural/classifiers/classifier.js:114:13
at fs.readFile (fs.js:176:14)
at Object.oncomplete (fs.js:297:15) 
```

现在，为了研究，我在另一个 Node.JS 模块中有类似问题的人通过了以下线程： [https://github.com/andris9/mailcomposer/issues/6](https://github.com/andris9/mailcomposer/issues/6) 我遵循了自然卸载和重新安装的解决方案，没有帮助。我还发现：[http](http://tommytcchan.blogspot.in/2012_07_01_archive.html) ://tommytcchan.blogspot.in/2012_07_01_archive.html我用 npm ls 得到：

```
├─┬ natural@0.1.17
│ ├─┬ apparatus@0.0.6
│ │ └── sylvester@0.0.21
│ └── underscore@1.4.2 
```

然后，我通过：[找到已安装的 npm 包的版本](https://stackoverflow.com/questions/10972176/find-the-version-of-an-installed-npm-package)并得到以下输出：

```
├─┬ natural@0.1.17
│ ├─┬ apparatus@0.0.6
│ │ └── sylvester@0.0.21
│ └── underscore@1.4.2 
```

即我认为已安装包的本地版本与所需的依赖项匹配。有其他人使用过这个包，并设法调试了这个错误吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:50:43.957

只是一个猜测，但我认为这是由于初始化不当造成的。

```
TypeError: Cannot set property '__proto__' of undefined 
```

当我尝试使用我忘记首先初始化的对象的属性时，我会遇到类似的错误。从你可能没有定义或初始化的错误中猜测`classifier`，做出它`undefined`。你不能在`undefined`.

这是一个类似的帖子：

1.  [JavaScript - 无法设置未定义的属性](https://stackoverflow.com/questions/7479520/javascript-cannot-set-property-of-undefined)和
2.  [无法设置未定义的属性......奇怪](https://stackoverflow.com/questions/4197404/cannot-set-property-of-undefined-bizarre)

# linux - 为什么这个 curl 请求不提交 POST 数据？

> ID：12888701
> 
> 赞同：1
> 
> 时间：2012-10-15T02:54:05.203
> 
> 标签：linux, curl

我正在尝试使用 cURL（在 bash 脚本中）在我的 ISP 站点上加载包含我每月数据使用情况的页面。

这是页面中的相关表格：

```
<form method="post" id="Login" name="Login" action="https://signon.bigpond.com/login" class="form">
    <input type="hidden" name="goto" value="https://my.bigpond.com/mybigpond/default.do?ref=Net-Header-MyBigPond1"/>

    <div class="loginModule roundify">
        <div class="loginForm">

            <div class="formRow error">
                <label for="userName">
                    Username<span class="reqField">*</span>
                </label>
                <input type="text" tabindex="1" id="username" name="username" size="30" maxlength="200" onkeypress="EnterKeyPress(event)" value=""/>
            </div>

            <div class="formRow error">
                <label for="password">
                    Password<span class="reqField">*</span>
                </label>
                <input type="password" tabindex="2" id="password" name="password" size="30" maxlength="50" onkeypress="EnterKeyPress(event)"/>                                     
            </div>

           <div class="buttons">
                <input class="submit roundify" type="submit" value="Log in" onclick="setCookieForUser();this.disabled=true;document.forms['Login'].submit();" />
            </div>
        </div>
    </div>
</form> 
```

请注意，提交按钮没有名称。

在表单中输入文本时调用的函数：

```
function EnterKeyPress(e) {
    if (!e) var e = window.event;

                if (e.keyCode) code = e.keyCode;
                else if (e.which) code = e.which;

                if ( code == 13 && document.getElementById("username").value.length > 0 && document.getElementById("password").value.length > 0 ) {
                    document.forms['Login'].submit();
                    e.returnValue = false;
                }
} 
```

cURL 命令行：

```
 $ curl --user-agent "Mozilla/5.0" --verbose --location --cookie-jar "/tmp/bigpond.cookies" --cookie "/tmp/bigpond.cookies" -o "/tmp/bigpond.html" --data-urlencode "username=MY_USERNAME&password=MY_PASSWORD" https://signon.bigpond.com/login?goto=https://my.bigpond.com/mybigpond/default.do?ref=Net-Header-MyBigPond1 
```

但是，保存的 html 文件 (/tmp/bigpond.html) 仍然只是登录页面，并添加了文本说我忘记输入我的用户名和密码。**为什么 cURL 不发送 POST 数据或者我做错了什么？**

更新：回答了我自己的问题。解决方法见下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:59:12.613

试试看：

```
curl -A "Mozilla/5.0" -b /tmp/c -c /tmp/c -L -s -d "username=<USER NAME>&password=<PASSWORD>" https://signon.bigpond.com/login 
```

并比较`cURL`with的标题`LiveHttpHeaders firefox module`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:45:05.870

问题是在一个参数中将 POST 数据传递给 cURL，导致当 cURL 进行 URL 编码时数据被破坏。正确的用法是将每个字段作为单独的参数传递，如下所示：

```
curl --data-urlencode "username=XXXXXX" --data-urlencode "password=XXXXXX" ... 
```

# c - 将数组元素移动到寄存器程序集

> ID：12888702
> 
> 赞同：0
> 
> 时间：2012-10-15T02:54:07.487
> 
> 标签：c, assembly, x86

我的任务是使用嵌入到 C 中的程序集找到数组中的最小字母。我不确定如何访问数组的每个元素。我尝试使用谷歌搜索，发现有些人正在执行以下操作：

mov ecx, arrayOfLetters

然后增加 ecx 以访问每个元素。这是对的还是我写的是正确的？

请帮忙，我很困惑。

```
 char findMinLetter( char arrayOfLetters[], int arraySize )
{
    char min;

    __asm{
        push eax
        push ebx
        push ecx
        push edx
        mov dl, 0x7f        // initialize DL

        xor ebx, ebx //EBX started off as 0

        //moves letters from array to registers
        mov ecx, arrayOfLetters[ebx]
        mov edx, arrayOfLetters[ebx+1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:54:57.597

首先要了解的是传递给子例程的“arrayOfLetters”是一个指针。

要从汇编器中的指针（在 ecx 中）访问数据（一次一个字节），请使用：

```
mov al, [ecx]
mov al, [ecx+1]
...  or ...

mov al, [ecx]
inc ecx
mov al, [ecx] 
```

下一个问题是如何访问局部变量：使用了两种主要样式，并且都使用了*stack*。

```
mov ecx, _localvariable_ ; this translates to either

mov ecx, [ebp + offset]  ; style (1) or
mov ecx, [esp + offset]  ; style (2) 
```

如果有一个汇编器支持指令 mov ecx, _localvariable [+1]，那很可能会转换为：

```
mov ecx, [ebp + offset + 1] 
```

这不会访问 char 数组 []，而只是访问堆栈中的一些任意字节。

# objective-c - NSInvalidArgumentException，无参数

> ID：12888703
> 
> 赞同：0
> 
> 时间：2012-10-15T02:54:21.293
> 
> 标签：objective-c, xcode, switch-statement, ibaction

我已经浏览了该网站一段时间，我看到了一些东西，但对我没有任何帮助。不过这里是极端新手。

我正在尝试制作一个 2 组件选择器，从数组填充，从字典填充，从 plist 填充。组件填充，我有一个旋转一个组件的按钮。第二个按钮用于检查答案（第一个组件具有它们尝试与第二个组件中的大写字母匹配的状态），但这是它总是崩溃的地方。

我得到的错误如下：

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[NSPlaceholderString initWithFormat:locale:arguments:]: nil argument”
> 
> *** First throw call stack: (0x14b3022 0xeb3cd6 0x145ba48 0x145b9b9 0x916169 0x916ab4 0x3036 0x14b4e99 0x1914e 0x190e6 0xbfade 0xbffa7 0xbf266 0x3e3c0 0x3e5e6 0x24dc4 0x18634 0x139def5 0x1487195 0x13ebff2 0x13ea8da 0x13e9d84 0x13e9c9b 0x139c7d8 0x139c88a 0x16626 0x27ad 0x2715) terminate called throwing an exception(lldb)

我不确定我哪里出错了。我已经用硬编码数组完成了这个，它工作得很好。按钮的代码是这样的（请忽略开关代码，我还没有弄清楚如何使它工作，我希望屏幕变绿表示正确答案，红色表示不正确，但我更担心应用程序崩溃！）：

> -（IBAction）checkAnswer；{ NSInteger StateRow = [pickerCapital selectedRowInComponent:karrayStateComponent]; NSInteger CapitalRow =[pickerCapital selectedRowInComponent:karrayCapitalComponent];

```
NSString *state = [arrayState objectAtIndex:StateRow];
NSString *capital = [arrayCapital objectAtIndex:CapitalRow];

NSLog (@"%i",[pickerCapital selectedRowInComponent:karrayCapitalComponent]);
NSLog(@"%i", [pickerCapital selectedRowInComponent:karrayStateComponent]);

NSString *Title = [[NSString alloc]initWithFormat:@"You have selected %@ as the capital of %@.", capital, state];
NSString *Message =[[NSString alloc]initWithFormat:lblMsg];

UIAlertView *alert =[[UIAlertView alloc]initWithTitle:Title message:Message delegate:@"" cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];

if (StateRow == CapitalRow) {
    lblMsg = @"You are correct!";
    UIColor *myColor;
    switch ([not sure what to use here]) {
        case 0:
        myColor = [UIColor greenColor];
            break;
        default:
            break;
    }
}
else {
    lblMsg = @"Incorrect";
    UIColor *myColor;
    switch ([not sure what to use here]) {
        case 0:
        myColor = [UIColor redColor];
            break;        
        default:
            break;
    }
} 
```

}

如果有人可以为此提供任何帮助，我将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:58:26.637

要检查的两件事：

*   lblMsg 在哪里声明或赋值？
*   您确定对 [arrayCapital objectAtIndex] 的调用中的 capital 和 state 不是 nil 吗？

具体来说：[NSString 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)声明“重要：如果格式为 nil，则引发 NSInvalidArgumentException。” 对于 initWithFormat。

# c# - 下载字符串（和调用）上的 StackOverflowException

> ID：12888707
> 
> 赞同：0
> 
> 时间：2012-10-15T02:55:17.237
> 
> 标签：c#, stack-overflow

我似乎在 WebClient.DownloadString 上的 C# 中得到了 StackOverflowException。我不知道我是怎么做到的，它目前让我有点生气，因为它在过去三天一直在发生。

基本上我所做的是一个网络爬虫，它循环浏览大量页面并从中提取数据，准确地说是链接。当它碰到这段代码时，问题随机出现：

```
try
{
    derp = web.DownloadString(site + pageincr);
}
catch (Exception ex)
{
    ... 
```

站点是要从中抓取的站点，而 pageincr 是它要到达的页面。所以它获取数据，处理它，然后如果 pageincr 不大于最大页面集，它将增加 pageincr 然后再次启动该函数。但在最随机的时刻，它会在上面的代码中停止，并出现错误“StackOverflowException”。让我感到奇怪的是，它发生在 DownloadString 函数上，而且是随机发生的。如果它是一个真正的 StackOverflow，它不会立即停止代码吗？

如果有可能阻止这种情况，请告诉我。

**编辑：** 似乎它只是在这段代码上停止了它：

```
this.Invoke((Action)delegate
{
    console.SelectionFont = new Font(console.Font, FontStyle.Bold);
    appendConsole("\r\n===[ Page: " + pageincr + " ]===");
    console.SelectionFont = new Font(console.Font, FontStyle.Regular);
}); 
```

对于 StackOverflowException。这变得很奇怪。

# ruby-on-rails - 使用times方法在rails视图中打印html实体

> ID：12888709
> 
> 赞同：0
> 
> 时间：2012-10-15T02:55:35.053
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试在 rails 视图中打印书签的评级。我正在尝试从哈希中取出**评级**（“3”），然后将该字符串转换为 int，然后多次打印实心星号（html 实体）。这是我一直在尝试的，但它只是打印数字。我对 ruby​​-on-rails 很陌生，所以我可能在这里遗漏了一些非常微不足道的东西。

```
<% @bookmarks.each_with_index do |bookmark, index| %>
  <div class="bookmark">
    <%= link_to bookmark_path(index) do %>
        <ul>    
            <li><%= bookmark[:type] %></li>
            <li><%= bookmark[:title] %></li>
            <li>
              <%= bookmark[:rating].to_i.times do print "&bigstar;" end %>

              <%= bookmark[:rating].to_i.times do print "&bigstar;" end %>
            </li>
        </ul>
    <% end %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:00:43.383

I think I have figured it out by myself.

```
<li>
      <% bookmark[:rating].to_i.times do %>
        &bigstar;
      <% end %>
</li> 
```

# internet-explorer - Mootools 请求 onLoadstart、onProgress 在 IE 任何版本中都不起作用

> ID：12888717
> 
> 赞同：0
> 
> 时间：2012-10-15T02:56:55.127
> 
> 标签：internet-explorer, mootools, response

我在这里做了一个简单的测试

[http://jsfiddle.net/sUJRP/10/](http://jsfiddle.net/sUJRP/10/)

```
<input type="button" value="Test start" id="start" />
<br /><br /><br />

<div id="response1"></div><br />
<div id="response2"></div><br />
<div id="response3"></div>

var myRequest = new Request({
    url: 'http://fiddle.jshell.net',

    onLoadstart: function(event, xhr) {
        $('response1').set('html', 'Sending start');
    },

    onProgress: function(event, xhr) {
        $('response2').set('html', 'Progress');
    },

    onSuccess: function(event, xhr) {
        $('response3').set('html', 'All done');
    }

});

$('start').addEvent('click', function(event) {
    $$('#response1,#response2,#response3').set('html', '');
    myRequest.send();

});​ 
```

在所有浏览器中，您将获得所有 3 种状态的响应，但在所有版本的 IE 中，您获得的只是 onSuccess 响应。

有什么建议吗？

# html - 解决容器崩溃的溢出隐藏技术是否仅适用于部分标签？

> ID：12888718
> 
> 赞同：-1
> 
> 时间：2012-10-15T02:57:11.370
> 
> 标签：html, css

`overflow: hidden`解决容器崩溃问题的技术是否仅适用于部分标签？

```
<style>
aside, article, section, header, footer, nav {
    display: block;
}
html, body {
    margin: 0;
    padding: 0;
}
html {
    background: rgb(108,135,178);
}
body {
    width: 600px;
    background: #fff;
    margin: 0 auto;
    font: 90% Georgia, "Times New Roman", Times, serif;
}
div {
    width: 50px;
    height: 50px;
    padding: 50px;
}
section {
    background: rgb(178,155,107);
    border: 1px solid black;
    padding: 10px;
    overflow:hidden;
    width: 580px;
}
.one {
    background: rgb(207, 255, 245);
    float: left; 
}
.two {
    background: rgb(101,209,255);
    float: left;
}
.three {
    background: rgb(255, 231, 181);
    float: left;
}

</style>
</head>
<body>
<section>
<div class="one">One</div>
<div class="two">Two</div>
<div class="three">Three</div>
</section>
</body>
</html> 
```

看这个例子我使用溢出：隐藏在这里它解决了容器崩溃问题

但是当我这样改变它时会发生什么

```
<style>
aside, article, section, header, footer, nav {
    display: block;
}
html, body {
    margin: 0;
    padding: 0;
}
html {
    background: rgb(108,135,178);
}
body {
    width: 600px;
    background: #fff;
    margin: 0 auto;
    font: 90% Georgia, "Times New Roman", Times, serif;
}
div {
    width: 50px;
    height: 50px;
    padding: 50px;
}

.containerElement {
    background: rgb(178,155,107);
    border: 1px solid black;
    padding: 10px;
    overflow:hidden;
    width: 580px;
}
.one {
    background: rgb(207, 255, 245);
    float: left; 
}
.two {
    background: rgb(101,209,255);
    float: left;
}
.three {
    background: rgb(255, 231, 181);
    float: left;
}

</style>
</head>
<body>

<div class="containerElement">
<div class="one">One</div>
<div class="two">Two</div>
<div class="three">Three</div>
</div>
</body>
</html> 
```

溢出的部分现在被隐藏了。这是`overflow: hidden`应该如何工作的。`overflow: hidden`section标签中的技术怎么会这样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:10:00.690

您的问题是这`containerElement`是一个 div，因此正在使用样式规则`div`，然后被`containerElement`.

`div`样式规则指定，因此`height: 50px;`容器被设置为 50px 的静态高度。

作为一般经验法则，使用 CSS 来设置`div`标签样式会给您带来很多问题。如果您更改`div`为`.one, .two, .three`，您将获得您想要的结果。

# sql - 我不明白这个 SQL Server MIN() 结果集

> ID：12888721
> 
> 赞同：0
> 
> 时间：2012-10-15T02:57:27.553
> 
> 标签：sql, sql-server, tsql

我有这个`SQL Server`查询，我写了这个查询来查找*表**中记录最少的电影标题`RENTAL`*。

运行时，它返回的结果集与我通过自己执行子查询获得的结果集相同。

换句话说，它返回所有电影标题及其对应的 RentalCount，而不是返回具有最小 RentalCount 的单个电影。

```
SELECT B.Title, MIN(B.RentalCount) AS RentalCount
FROM (
    SELECT Movie.Title, Count(*) AS RentalCount
    FROM Rental
    JOIN Dvd ON Rental.RentalID=Dvd.DvdID
    JOIN Movie ON Dvd.Movieid=movie.MovieID
    GROUP BY Movie.Title
    ) B
GROUP BY B.Title 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T03:00:17.670

结果是正确的。您的子查询返回出租表上每个标题的总数。外部查询的结果将是相同的，因为您还按标题对它们进行了分组。

*追问：你想达到什么结果？*

> 查找 RENTAL 表中记录最少的电影标题

```
SELECT Movie.Title, Count(*) AS RentalCount
FROM Rental
        JOIN Dvd ON Rental.RentalID=Dvd.DvdID
        JOIN Movie ON Dvd.Movieid=movie.MovieID
GROUP BY Movie.Title
HAVING Count(*) = 
    (
        SELECT MIN(t_count)
        FROM
        (
            SELECT Count(*) t_count
            FROM Rental
            GROUP BY Title
        ) a
    ) 
```

**更新 1**

感谢**[马丁史密斯](https://stackoverflow.com/users/73226/martin-smith)**介绍我`TOP....WITH TIES`

```
SELECT TOP 1 WITH TIES Movie.Title, Count(*) AS RentalCount
FROM Rental
        JOIN Dvd ON Rental.RentalID=Dvd.DvdID
        JOIN Movie ON Dvd.Movieid=movie.MovieID
GROUP BY Movie.Title
ORDER BY RentalCount DESC 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/acc71/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:08:33.653

您可以在没有子查询的情况下完成此操作

```
SELECT TOP 1 Movie.Title, Count(*) AS RentalCount
FROM Rental
JOIN Dvd ON Rental.RentalID=Dvd.DvdID
JOIN Movie ON Dvd.Movieid=movie.MovieID
GROUP BY Movie.Title
ORDER BY Count(*) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T06:08:56.923

如果您正在寻找特定的电影标题，请执行以下操作：

```
SELECT Movie.Title, Count(*) AS RentalCount
    FROM Rental
    JOIN Dvd ON Rental.RentalID=Dvd.DvdID
    JOIN Movie ON Dvd.Movieid=movie.MovieID
    where Movie.Title='xyz'
    GROUP BY Movie.Title 
```

# html - HTML 中的类描述是否重叠？

> ID：12888722
> 
> 赞同：0
> 
> 时间：2012-10-15T02:57:41.573
> 
> 标签：html, css, class

我想知道您是否有两个类标识符，它们是否都影响了它们之间的代码，或者是否发生了其他事情。示例代码：

```
.
.
.
<div class='class1'>
<div class='class2'>
<p>Example statement</p>
</div>
</div> 
```

CSS：

```
.class1 {
           margin-right: 10px;
}

.class2 {
           margin-left: 10px;
} 
```

这样会不会使文本具有 10px 的左右边距？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:08:32.107

不，只有应用于*该元素*的类用于选择器。

但是，使用您的示例 HTML，您可以指定*只*需要作为 class1 子级的 class2 元素：

```
.class1 > .class2 {
  margin-left: 10px;
} 
```

或 class2 的元素，它们是class1 的*后代*：

```
.class1 .class2 {
  margin-left: 10px;
} 
```

可以在此处找到有关差异的信息：http: [//www.w3.org/TR/CSS2/selector.html#descendant-selectors](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)

为了使段落具有左右边距，您可以使用以下内容：

```
.class1 p {
  margin-right: 10px;
}

.class2 p {
  margin-left: 10px;
} 
```

第一个说作为 class1 元素的后代的段落应该有右边距，第二个将左边距应用于作为 class2 的后代的段落。由于您示例中的段落符合这两个标准，因此将应用两种格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:49:50.950

这完全取决于您应用的样式类型。如果这两种 div 样式是 class1 上的 font-family 和 class2 上的 font-size ，那么是的，文本将继承它们。边距是仅应用于其指定的实际元素的其中之一（尽管文本将适合这些 div 并且本质上将具有 10px 的左右边距，因为 div 包含将其推入其自己的边距内的文本。 )

CSS 也有一个特定的应用顺序，所以假设这两个 div 的颜色属性设置为不同的颜色。文本将获得 class2 的颜色，因为它是在 CSS 中读取的最后一行，并且会覆盖在 class1 中编写的任何冲突的内容。

有很多事情会影响这一点，例如它是 id 还是类选择器，是否内联等等。这里有一篇文章来解释具体的顺序。[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

这是一篇关于继承的文章，这是您的实际问题。[http://www.webdesignfromscratch.com/html-css/css-inheritance-cascade/](http://www.webdesignfromscratch.com/html-css/css-inheritance-cascade/)

# ruby - 在没有 Rails 的 Ruby 中本地化数字

> ID：12888726
> 
> 赞同：2
> 
> 时间：2012-10-15T02:58:28.947
> 
> 标签：ruby, localization

我有一个 Ruby 应用程序，它没有使用 Rails，但需要本地化。我一直在使用[I18n](https://github.com/svenfuchs/i18n) gem，它适用于日期、时间和字符串。不过，它似乎不做数字，除非我遗漏了一些东西。

我在 Rails 的 ActionView 中找到了 NumberHelper 类，[这个问题](https://stackoverflow.com/questions/6853015/how-do-i-use-an-actionviewhelper-in-a-ruby-script-outside-of-rails)说明了如何将它包含在非 Rails 应用程序中。然而，让我的应用程序依赖于整个 activemodel 框架似乎只是为了获得一些数字本地化例程。

有没有更好的方法来解决这个问题？我应该改用其他 Ruby 本地化库之一吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-19T21:00:02.033

我为此使用了 gem R18n：[https ://github.com/ai/r18n](https://github.com/ai/r18n)

它可以做与 I18n 相同的事情，但更灵活，还可以本地化数字。它没有其他宝石的依赖关系。

基本用法：

*   添加`r18n-core`到 Gemfile
*   用 `R18n.extension_places << 'path/to/yml/files' 初始化

然后要么：

```
i18n = R18n::I18n.new('en')
i18n.t[:foo][:bar] # => "Translated text"
i18n.l(123.45) # => "123.45" 
```

或者更静态的版本：

```
R18n.locale = 'en'
R18n.t[:foo][:bar]
R18n.l(123.45) 
```

Rails 和 sinatra 的助手存在（在其他 gem 中）

# ajax - 有哪些教程或书籍可用于学习使用 HTML5 进行回合制策略游戏编程？

> ID：12888727
> 
> 赞同：0
> 
> 时间：2012-10-15T02:58:39.123
> 
> 标签：ajax, html

我正在寻找编写 HTML5 回合制策略游戏的教程/书籍/其他资源。我也对任何源代码示例感兴趣。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:44:09.307

请查看[html5gamedevs.com](http://www.html5gamedevs.com)，这可能会对您有所帮助。

# perl - 在 Perl 中读取目录的内容

> ID：12888729
> 
> 赞同：-4
> 
> 时间：2012-10-15T02:59:07.627
> 
> 标签：perl

我正在尝试使用 Perl 脚本完成两件事。我有一个文件，它在第一个子目录中具有不同的用户目录，并且在每个用户目录中都包含一些包含文本文件的文件夹。我正在尝试编写一个 Perl 脚本

1.  列出每个用户的目录
2.  `.txt`获取文件总数

对于第二个目标，我有这个代码

```
my @emails = glob "$dir/*.txt";
for (0..$#emails){
    $emails[$_] =~ s/\.txt$//;
}
$emails=@emails; 
```

但`$emails`返回 0。有什么见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:43:00.270

通常，在处理目录和可能的子目录中的文件时，使用 glob 并不是一个好主意。更好的方法是使用 File::Find 模块，如下所示：

```
use File::Find;

my @emails;

File::Find::find(
    {
        # this will be called for each file under $dir:
        wanted => sub {
            my $file = $File::Find::name;
            return unless -f $file and $file =~ /\.txt$/;
            # this file looks like email, remember it:
            push @emails, $file;
        }
    },
    $dir
);

print "Found " . scalar @emails . " .txt files (emails) in '$dir'\n"; 
```

# java - java.lang.SecurityException：类“org.eclipse.core.runtime.PlatformObject”的签名者信息与签名者信息不匹配

> ID：12888734
> 
> 赞同：2
> 
> 时间：2012-10-15T03:00:12.807
> 
> 标签：java, eclipse, exception, junit, osgi

我在 Eclipse 中使用 OSGi 项目运行 JUnit 测试，我遇到了这个异常：

```
java.lang.SecurityException: class "org.eclipse.core.runtime.PlatformObject"'s signer information does not match signer information of other classes in the same package
at java.lang.ClassLoader.checkCerts(Unknown Source)
at java.lang.ClassLoader.preDefineClass(Unknown Source)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.access$000(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.access$000(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.access$000(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.access$000(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at com.etasgroup.visu.modelloader.autosar.services.impl.AutosarStandaloneSetup.doSetupForAutosar3x(AutosarStandaloneSetup.java:49)
at com.etasgroup.visu.modelloader.autosar.services.impl.test.AutosarStandaloneSetupTest.testDoSetupForAutosar3x(AutosarStandaloneSetupTest.java:56)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

有任何想法吗？请帮我 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:26:15.543

您可以尝试使用模拟框架进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:28:32.923

问题：Target Platforms 的 jar 和 Eclipse Plugins 的 jar 之间存在差异。在这种情况下，罐子是：`org.eclipse.equinox.common`和`org.eclipse.equinox.registry`

解决方法：使用相同的 jar，这些 jar 不应该是单例插件。

# go - Use tag in Go to display local image

> ID：12888737
> 
> 赞同：4
> 
> 时间：2012-10-15T03:00:35.627
> 
> 标签：go, image

How can I use the `<img>` tag to display a local image in Go?

I've tried the following:

```
fmt.Fprintf(w, "</br><img src='" + path.Join(rootdir,  fileName) + "' ></img>") 
```

where rootdir = os.Getwd() and fileName is the name of the file.

If I try `http.ServeFile` with the same path then I can download the image, however I would like to embed it in the webpage itself.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T03:59:23.470

我会先说我的 Go 知识充其量是很糟糕的，但我所做的少数实验涉及到这一点，所以也许这至少会为你指明正确的方向。基本上，下面的代码使用 Handle 来处理根目录中文件夹中的文件（在我的情况下是`/images/`）。然后，您可以在标签中进行硬编码，也可以像以前一样使用，制作第一个参数。`images``/home/username/go``/images/``<img>``path.Join()``images`

```
package main

import (
  "fmt"
  "net/http"
  "os"
  "path"
)

func handler(w http.ResponseWriter, r *http.Request) {
  fileName := "testfile.jpg"
  fmt.Fprintf(w, "<html></br><img src='/images/" + fileName + "' ></html>")
}

func main() {
  rootdir, err := os.Getwd()
  if err != nil {
    rootdir = "No dice"
  }

  // Handler for anything pointing to /images/
  http.Handle("/images/", http.StripPrefix("/images",
        http.FileServer(http.Dir(path.Join(rootdir, "images/")))))
  http.HandleFunc("/", handler)
  http.ListenAndServe(":8080", nil)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T03:30:21.950

也许您可以使用[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-11T21:27:14.983

这对我有用：

```
package main

import (
   "io"
   "net/http"
   "os"
)

func index(w http.ResponseWriter, r *http.Request) {
   f, e := os.Open(r.URL.Path[1:])
   if e != nil {
      panic(e)
   }
   defer f.Close()
   io.Copy(w, f)
}

func main() {
   http.HandleFunc("/", index)
   new(http.Server).ListenAndServe()
} 
```

# java - Swing label misalign the textfields

> ID：12888739
> 
> 赞同：0
> 
> 时间：2012-10-15T03:01:07.887
> 
> 标签：java, swing, user-interface

My swing label is messing up my layout once the text in the label changes, CODE:

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package question3_test;

/**
 *
 * @author jackandjill
 */
public class GUI extends javax.swing.JFrame {

    /**
     * Creates new form GUI
     */
    public GUI() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        title_lbl = new java.awt.Label();
        side1_lbl = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        side1_tf = new javax.swing.JTextField();
        side2_tf = new javax.swing.JTextField();
        side3_tf = new javax.swing.JTextField();
        jButton1 = new javax.swing.JButton();
        result_lbl = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setMinimumSize(new java.awt.Dimension(200, 100));

        jPanel1.setMaximumSize(new java.awt.Dimension(200, 200));

        title_lbl.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        title_lbl.setText("AREA OF TRIANGLE");

        side1_lbl.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        side1_lbl.setLabelFor(side1_tf);
        side1_lbl.setText("Side 1:");

        jLabel2.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel2.setLabelFor(side2_tf);
        jLabel2.setText("Side 2:");

        jLabel3.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel3.setLabelFor(side3_tf);
        jLabel3.setText("Side 3:");

        side1_tf.setColumns(6);
        side1_tf.setMinimumSize(new java.awt.Dimension(60, 20));

        side2_tf.setColumns(6);
        side2_tf.setMinimumSize(new java.awt.Dimension(60, 20));

        side3_tf.setColumns(6);
        side3_tf.setMinimumSize(new java.awt.Dimension(60, 20));

        jButton1.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jButton1.setText("Calculate Area");
        jButton1.setBorder(null);
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        result_lbl.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        result_lbl.setText("jLabel4");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap(25, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(33, 33, 33)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(side1_lbl)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(side1_tf, javax.swing.GroupLayout.DEFAULT_SIZE, 60, Short.MAX_VALUE))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                                        .addComponent(jLabel2)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED))
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addComponent(jLabel3)
                                        .addGap(10, 10, 10)))
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(side3_tf, javax.swing.GroupLayout.DEFAULT_SIZE, 60, Short.MAX_VALUE)
                                    .addComponent(side2_tf, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))))
                    .addComponent(title_lbl, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(17, 17, 17)
                        .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 132, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(30, 30, 30))
            .addComponent(result_lbl, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addComponent(title_lbl, javax.swing.GroupLayout.PREFERRED_SIZE, 44, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(side1_lbl)
                    .addComponent(side1_tf, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(side2_tf, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(side3_tf, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(result_lbl)
                .addGap(0, 21, Short.MAX_VALUE))
        );

        title_lbl.getAccessibleContext().setAccessibleName("Area of Triangle");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(37, Short.MAX_VALUE)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(25, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
        result_lbl.setText("This is getting longer,This is getting longer,This is getting longer");
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(GUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(GUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(GUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(GUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new GUI().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JLabel result_lbl;
    private javax.swing.JLabel side1_lbl;
    private javax.swing.JTextField side1_tf;
    private javax.swing.JTextField side2_tf;
    private javax.swing.JTextField side3_tf;
    private java.awt.Label title_lbl;
    // End of variables declaration
} 
```

So when I run this I get this

![enter image description here](../Images/7ba009efcc3cef9431b21f9fc49dc652.png)

Then after I press the Calculate Area button I get this

![enter image description here](../Images/5989b16661a79dcfdfe6abb143282aa9.png)

Had a similar problem with another application, asked a question [here](https://stackoverflow.com/questions/12803906/cant-find-why-the-layout-is-getting-smaller) And I was told to set a fixed column size did that, here as well but still the same effect.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:11:36.710

不要尝试使用`GroupLayout`或 GUI 编辑器来编写*整个*应用程序。[`GroupPanel`](https://stackoverflow.com/a/8504753/230513)相反，在`CENTER`a中使用类似这样的东西`BorderLayout`。将 a 添加`JLabel`到`NORTH`和`ControlPanel`到`SOUTH`. `JTextArea`中的A`ControlPanel`适合包装附加的文本。

![图片](../Images/aba51f1c897c991db7f52100c661b442.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T03:48:35.953

您可以使用 html 来设置多行标签。只是拉伸你的 jlabel 宽度。在你的情况下试试这个

```
mylabel.setText("<html>This is getting longer  <br> This is getting longer <br>This is getting longer</html>"); 
```

这是截图

![在此处输入图像描述](../Images/47a2a92f350e1f8dca3c4695841713d5.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T03:53:22.453

我不知道您使用的是哪种表单构建工具，我也不会使用，因此无法给您具体说明。我认为这是一个教科书案例，说明在不了解它的作用的情况下使用这种工具的危险，虽然你可能（或可能不能）用我的建议来修复它，但我预测你会继续遇到这个问题，并且如果出现更严重的问题您不了解该工具在幕后的作用。

似乎 UI 屏幕上的所有水平结构都以某种方式右对齐。即使在您单击按钮之前，如果您扩大 UI 屏幕，您的所有字段都会向右移动。我不知道这是为什么；也许您已将组字段设置为 Alignment.TRAILING 某处。

作为一个快速修复，您可以尝试将结果字段移动到与其他字段不同的面板，这样即使它变得很长，它也是唯一会被截断的内容。我不知道如何在您的 GUI 构建器中执行此操作，它并不能真正解决整个问题。但它可以让你超越底部字段中的长字符串将所有内容向右移动的点。

祝你好运。

# xcode - Enabling depth testing when using CAOpenGLLayer

> ID：12888741
> 
> 赞同：0
> 
> 时间：2012-10-15T03:01:23.577
> 
> 标签：xcode, cocoa, opengl

If one is using a subclass of `NSOpenGLView` then one enables depth testing by selecting a 16/24/32 bit buffer from the attributes menu in Xcode, and then adding

```
glEnable(GL_DEPTH_TEST);
glClear(GL_DEPTH_BUFFER_BIT); 
```

to the `drawRect` method. However, in the application I'm creating I'm rendering OpenGL content via the `drawInCGLContext` method of a `CAOpenGLLayer` which is contained within a subclass of `NSView`. This means that it is no longer possible to create a depth buffer via the inspector. Does anyone know how I can achieve this in such a situation?

# php - 是否可以在回声中运行 PHP include()？

> ID：12888744
> 
> 赞同：0
> 
> 时间：2012-10-15T03:03:12.593
> 
> 标签：php

这是否可以在回声中包含外部文件？

这就是我正在尝试的：

```
 echo 'stuff'.(include($_SERVER["DOCUMENT_ROOT"].'/theme/button.php')).'morestuff'; 
```

我可以简单地写 3 行，但为了简化起见，我想知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T03:05:01.450

你应该只使用`include`.

```
<div>
<?php include $_SERVER["DOCUMENT_ROOT"].'/theme/snippets/follow-button.php'; ?>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T17:50:09.787

我对此进行了测试，它可以工作......我只将 HTML 代码放在“button.php”文件中......

```
echo 'stuff'; include($_SERVER["DOCUMENT_ROOT"].'/theme/button.php'); echo 'morestuff'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T03:06:12.780

不 ，`echo`隐式调用`__toString()`语句中包含的任何内容为`echo`'d。

您应该做的是`include`文件并在包含的文件中包含 HTML。无需回声。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T03:13:58.940

你当然可以。如果包含的文件返回任何内容，则将被打印。包括基本上评估文件，可以用作正常功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T04:14:01.210

包含文件定义一个返回所需值的函数可能会更干净。然后你会这样做：

```
include($_SERVER["DOCUMENT_ROOT"].'/theme/button.php');
echo echo 'stuff'.button_func().'morestuff'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-15T07:51:14.240

没有必要这样做。只是打破回声。下面的例子...

```
<?php
echo "
  $value1 <div id='1'></div>
  $value2 <div id='2'></div>
  // I want my include here
  $value3 <div id='3'></div>
";
?> 
```

将以上更改为；

```
<?php
echo "
  $value1 <div id='1'></div>
  $value2 <div id='2'></div>
";
  include 'some_file.php';
echo "
  $value3 <div id='3'></div>
";
?> 
```

# c - C syntax parser

> ID：12888745
> 
> 赞同：3
> 
> 时间：2012-10-15T03:03:20.940
> 
> 标签：c, compiler-construction, code-analysis, static-analysis, static-code-analysis

Are there any libs out there that can parse C syntax?

For example I would like to write my own code/scripts that will analyze c files given the c syntax. Number of "if" statements per function/file, lines of comments per lines of code in a function and so on.....

I have no problem writing all this custom code just wanted to make the job easier if there was already some lib that I can use to jump start instead of starting with the parser.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:19:19.220

除了`clang`已经提出的建议，考虑[pycparser](https://code.google.com/p/pycparser/)和[Boost.Wave](http://www.boost.org/doc/libs/1_41_0/libs/wave/index.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T08:40:23.670

尽管它们更针对语义分析而不是句法分析，但您可能对基于它的[CIL](http://kerneis.github.com/cil/)和[Frama-C感兴趣（都在 OCaml 中）。](http://frama-c.com/)另一个感兴趣的工具（OCaml 和 Python 绑定）是[Coccinelle](http://coccinelle.lip6.fr/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T03:29:16.397

就个人而言，我会首先寻找一个现有的工具来做你想做的事。这听起来工作量很大，而且有很多很好的免费工具可用于代码度量（你在[SourceForge 上](http://sourceforge.net/)看过吗？）。

如果你坚持要继续你的项目，你可以在谷歌上搜索 C 的 Lex/Yacc 语法。

然而，几年前我从 Lex/Yacc 切换到[Antlr](http://www.antlr.org/)。我特别喜欢它允许您[直观地逐步完成解析](http://www.antlr.org/works/movies/debugger.mp4)的方式。

一个很棒的工具，而且是免费的。也有[完整的 C 语法](http://www.antlr.org/grammar/1153358328744/C.g)可用，因此您可以修改它以满足您的需要。

希望这可以帮助。祝你好运

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-02T18:22:04.777

您也可以考虑尝试使用代码覆盖率工具。尽管代码覆盖率旨在向您显示执行了多少百分比的源代码，但其中一些还显示了在进行代码覆盖时遇到了多少条件语句或循环。我可以根据我的经验分享一个例子是 windriver 工作台代码覆盖工具

# c++ - Qt 从 QString 动态创建 QWidget

> ID：12888746
> 
> 赞同：1
> 
> 时间：2012-10-15T03:03:27.150
> 
> 标签：c++, qt, qwidget, qstring

我正在尝试创建一个从数据库读取信息的程序，并相应地设置布局。具体来说，我想读取两个日期字段，并根据天数之间的差异，创建天数的元素。有没有人知道如何做到这一点？由于明显的原因，我尝试使用 QString->text() 属性创建一个元素但没有成功，我已经设法编写了一个函数来创建一个元素，但我的问题是我无法控制元素的名称，使得以我对 c++ 的垃圾知识，我不可能与给定的元素进行交互。

感谢您的时间，

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T06:28:04.923

我认为 a`QHash`将是满足您需求的完美工具。它允许通过唯一键存储和查找几乎所有内容。这意味着您可以将带有标题的小部件存储为键，然后稍后从该哈希中检索具有特定标题的小部件。

以下是如何定义这样的哈希：

```
// .h file
#include <QtCore/QHash>
#include <QtGui/QWidget>

class MyWidget : public QWidget
{
    // ...
private:
    QHash< QString, QWidget* > m_dynamicWidgetHash;
}; 
```

然后可以像这样将小部件（或任何 QWidget 子类）存储在哈希中，*假设标题始终是唯一的*：

```
// .cpp file
void MyWidget::someMethod()
{
    QList< QString > widgetTitles = getWidgetTitlesFromSomewhere();

    foreach( QString title, widgetTitles )
    {
        SomeWidgetSubclass* widget = new SomeWidgetSubclass( this );
        widget->setTitle( title );
        // Note: This will not work if two widgets can have the same title
        Q_ASSERT( !m_dynamicWidgetHash.contains( title ) );
        m_dynamicWidgetHash.insert( title, widget );
    }
} 
```

然后，您可以稍后找到您的小部件，只知道这样的名称：

```
// .cpp file
void MyWidget::someOtherMethod( const QString& title )
{
    SomeWidgetSubclass* widget = m_dynamicWidgetHash.value( title );
    if( !widget )
    {
        // TODO: Error Handling
        return;
    }

    // Do whatever you want with the widget here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:04:48.830

此外，您可能会对如何使用`QMetaType`. 有`QMetaType::construct`方法。它要求`qRegisterMetaType`函数应该在之前被调用。详细说明在[这里](http://doc.qt.digia.com/qt/qmetatype.html)。

# linux - 从许多 csv 文件中删除 dups

> ID：12888748
> 
> 赞同：2
> 
> 时间：2012-10-15T03:04:04.810
> 
> 标签：linux, bash, sorting, csv, uniq

给定 n 个 csv 文件，它们的大小加起来为 100 GB，我需要根据以下规则和条件删除重复的行：

*   csv 文件编号为 1.csv 到 n.csv，每个文件大小约为 50MB。
*   第一列是一个字符串键，如果它们的第一列相同，则认为 2 行是重复的。
*   我想通过将副本保留在以后的文件中来删除副本（2.csv 被认为晚于 1.csv）

我的算法如下，我想知道是否有更好的算法。

*   将所有文件合并为一个大文件

    ```
    cat *.csv > one.csv 
    ```

*   对csv进行排序

    ```
    sort one.csv >one_sorted.csv 
    ```

*   目前不知道如何消除重复。`uniq`有一个跳过前 N 个字段的 -f 标志，但在我的情况下，我想跳过除前 1 个字段之外的所有字段。

我需要最后一步的帮助（消除已排序文件中的重复数据）。还有更有效的算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:28:27.983

这是一种使用方法`GNU awk`：

```
awk -F, '{ array[$1]=$0 } END { for (i in array) print array[i] }' $(ls -v *.csv) 
```

解释：读取一个按数字排序的文件，我们将每个文件的第一列添加到一个关联数组，其值为整行。这样，保留的副本就是最新文件中出现的副本。完成后，循环遍历数组的键并打印出值。确实提供了通过和函数的`GNU awk`排序能力，但是将输出传递给使事情更容易阅读，并且可能更快更有效。`asort()``asorti()``sort`

如果您需要对第一列进行数字排序，则可以这样做：

```
awk -F, '{ array[$1]=$0 } END { for (i in array) print array[i] | "sort -nk 1" }' $(ls -v *.csv) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T05:10:11.000

### 如果你能把这些行保留在内存中

如果足够多的数据可以放入内存，那么[steve的](https://stackoverflow.com/users/751863/steve)[`awk`解决方案](https://stackoverflow.com/questions/12888748/remove-dups-from-many-csv-files/12888913#12888913)非常简洁，无论您是通过内部管道写入命令，还是简单地将未修饰的输出通过管道传输到shell 级别。`sort``awk``awk``sort`

如果您有 100 GiB 的数据，其中可能有 3% 的重复，那么您需要能够在内存中存储 100 GiB 的数据。这是很多主内存。64 位系统可能会使用虚拟内存来处理它，但它可能运行得相当慢。

### 如果密钥适合内存

如果您无法在内存中容纳足够多的数据，那么前面的任务就会困难得多，并且至少需要对文件进行两次扫描。我们需要假设，pro tem，您至少可以将每个键放在内存中，并计算该键出现的次数。

1.  扫描1：读取文件。
    *   计算每个键在输入中出现的次数。
    *   在`awk`，使用`icount[$1]++`。
2.  扫描 2：重新读取文件。
    *   计算每个键出现的次数；`ocount[$1]++`.
    *   如果`icount[$1] == ocount[$1]`，则打印该行。

（这假设您可以存储键和计数两次；另一种方法是`icount`（仅）在两次扫描中使用，在扫描 1 中递增，在扫描 2 中递减，当计数减为零时打印值。）

我可能会为此使用 Perl 而`awk`不是`awk`.

* * *

### 连钥匙都不配？

如果您甚至无法将键及其计数放入内存中怎么办？那么您将面临一些严重的问题，尤其是因为脚本语言可能无法像您希望的那样干净利落地向您报告内存不足的情况。在证明有必要之前，我不会尝试过这座桥。如果有必要，我们需要一些关于文件集的统计数据来了解可能的情况：

*   记录的平均长度。
*   不同键的数量。
*   *对于 N = 1, 2, ... max*中的每一个，具有 N 次出现的不同键的数量。
*   密钥的长度。
*   键数加上可以装入内存的计数。

可能还有其他一些人……所以，正如我所说，在证明有必要之前，我们不要尝试过那座桥。

* * *

## Perl 解决方案

示例数据

```
$ cat x000.csv
abc,123,def
abd,124,deg
abe,125,deh
$ cat x001.csv
abc,223,xef
bbd,224,xeg
bbe,225,xeh
$ cat x002.csv
cbc,323,zef
cbd,324,zeg
bbe,325,zeh
$ perl fixdupcsv.pl x???.csv
abd,124,deg
abe,125,deh
abc,223,xef
bbd,224,xeg
cbc,323,zef
cbd,324,zeg
bbe,325,zeh
$ 
```

注意没有千兆字节的测试！

### fixdupcsv.pl

这使用“向上计数，向下计数”技术。

```
#!/usr/bin/env perl
#
# Eliminate duplicate records from 100 GiB of CSV files based on key in column 1.

use strict;
use warnings;

# Scan 1 - count occurrences of each key

my %count;
my @ARGS = @ARGV;   # Preserve arguments for Scan 2

while (<>)
{
    $_ =~ /^([^,]+)/;
    $count{$1}++;
}

# Scan 2 - reread the files; count down occurrences of each key.
# Print when it reaches 0.

@ARGV = @ARGS;      # Reset arguments for Scan 2

while (<>)
{
    $_ =~ /^([^,]+)/;
    $count{$1}--;
    print if $count{$1} == 0;
} 
```

' `while (<>)`' 符号会破坏`@ARGV`（因此在执行任何其他操作之前复制到`@ARGS`），但这也意味着如果您重置`@ARGV`为原始值，它将再次运行文件。在 Mac OS X 10.7.5 上使用 Perl 5.16.0 和 5.10.0 进行测试。

这是 Perl；[TMTOWTDI](http://acronymfinder.com/TMTOWTDI.html)。你可以使用：

```
#!/usr/bin/env perl
#
# Eliminate duplicate records from 100 GiB of CSV files based on key in column 1.

use strict;
use warnings;

my %count;

sub counter
{
    my($inc) = @_;
    while (<>)
    {
        $_ =~ /^([^,]+)/;
        $count{$1} += $inc;
        print if $count{$1} == 0;
    }
}

my @ARGS = @ARGV;   # Preserve arguments for Scan 2
counter(+1);
@ARGV = @ARGS;      # Reset arguments for Scan 2
counter(-1); 
```

可能也有压缩循环主体的方法，但我发现那里的内容相当清晰，并且更喜欢清晰而不是极端简洁。

### 调用

您需要以`fixdupcsv.pl`正确的顺序显示带有文件名的脚本。由于您的文件编号从 1.csv 到大约 2000.csv，因此不要按字母数字顺序列出它们很重要。其他答案建议`ls -v *.csv`使用 GNU`ls`扩展选项。如果可用，那是最好的选择。

```
perl fixdupcsv.pl $(ls -v *.csv) 
```

如果这不可用，那么您需要对名称进行数字排序：

```
perl fixdupcsv.pl $(ls *.csv | sort -t. -k1.1n) 
```

* * *

## awk 解决方案

```
awk -F, '
BEGIN   {
            for (i = 1; i < ARGC; i++)
            {
                while ((getline < ARGV[i]) > 0)
                    count[$1]++;
                close(ARGV[i]);
            }
            for (i = 1; i < ARGC; i++)
            {
                while ((getline < ARGV[i]) > 0)
                {
                    count[$1]--;
                    if (count[$1] == 0) print;
                }
                close(ARGV[i]);
            }
        }' 
```

这会忽略`awk`' 固有的 'read' 循环并显式执行所有读取（您可以将 BEGIN 替换为 END 并获得相同的结果）。该逻辑在许多方面都基于 Perl 逻辑。`awk`在带有 BSD和 GNU的 Mac OS X 10.7.5 上测试`awk`。有趣的是，GNU`awk`坚持在`close`BSD`awk`没有的调用中使用括号。在第`close()`一个循环中调用是必要的，以使第二个循环完全工作。第二个循环中的`close()`调用是为了保持对称和整洁——但当您在一次运行中处理几百个文件时，它们也可能是相关的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T05:03:17.290

我的回答是基于[史蒂夫](https://stackoverflow.com/users/751863/steve)的

```
awk -F, '!count[$1]++' $(ls -rv *.csv) 
```

`{print $0}`隐含在 awk 语句中。

基本上`awk`只打印 $1 包含该值的第一行。由于 .csv 文件以相反的自然顺序列出，这意味着对于具有相同 $1 值的所有行，仅打印最新文件中的行。

**注意**：如果您在同一个文件中有重复项（即，如果您在同一个文件中有同一个键的多个实例），这将*不起作用*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T05:56:55.743

关于您的排序计划，对单个文件进行排序然后合并它们可能更实际，而不是连接然后排序。使用该`sort`程序进行排序的复杂性可能为`O(n log(n))`. 如果你说每个 50MB 文件有 200000 行，而 2000 个文件，`n`大约是 4 亿，并且 `n log(n) ~ 10^10`. 相反，如果您分别处理 R 记录的 F 个文件，则排序`O(F*R*log(R))`成本为，合并成本为`O(F*R*log(R))`. 这些成本足够高，单独排序不一定更快，但该过程可以分成方便的块，以便在事情进行时更容易检查。这是一个小规模的例子，假设逗号可以用作排序键的分隔符。（包含逗号的引号分隔键字段对于所示的排序将是一个问题。）请注意，它`-s`告诉`sort`进行稳定排序，使具有相同排序键的行按照遇到的顺序排列。

```
for i in $(seq 1 8); do sort -t, -sk1,1 $i.csv > $i.tmp; done
sort -mt, -sk1,1 [1-8].tmp > 1-8.tmp 
```

或者如果更加谨慎可能会节省一些中间结果：

```
sort -mt, -sk1,1 [1-4].tmp > 1-4.tmp
sort -mt, -sk1,1 [5-8].tmp > 5-8.tmp
cp 1-4.tmp 5-8.tmp /backup/storage
sort -mt, -sk1,1 1-4.tmp 5-8.tmp > 1-8.tmp 
```

此外，在一个或多个合并之后进行单独排序的一个优点是可以轻松地将工作负载拆分到多个处理器或系统之间。

在您对所有文件进行排序和合并之后（例如，文件 X），编写一个 awk 程序相当简单，该程序在 BEGIN 从 X 读取一行并将其放入变量 L 中。此后，每次它从 X 读取一行，如果 $0 的第一个字段与 L 不匹配，它会写出 L 并将 L 设置为 $0。但是如果 $0 确实匹配 L，它会将 L 设置为 $0。在 END 处，它写出 L。

# powershell - Error when re-declaring item as record via PowerShell - "The file has been modified "SHAREPOINT\system"

> ID：12888750
> 
> 赞同：0
> 
> 时间：2012-10-15T03:04:12.610
> 
> 标签：powershell, sharepoint-2010

We have had a PowerShell script scheduled and executing successfully for the past 3-4 months (In both Test and Prod). The purpose of the script is to update document properties in SharePoint when certain triggers are fired from external systems. Without getting into too much detail, below is the code that has been used to update item properties for a document that has been declared a record:

```
$recordsmanagement=[Microsoft.Office.RecordsManagement.RecordsRepository.Records]
$recordsmanagement::UndeclareItemAsRecord($item)
$item = $list.GetItemById($item.id)     
$item.File.CheckOut()
$item[$sSpFieldName]=$sDbValue
$item.Update()                                          
$item = $list.GetItemById($item.id)                                 
$item.File.CheckIn("")                          
$recordsmanagement::DeclareItemAsRecord($item) 
```

This code has worked hundreds of times without a problem. For some reason, this code started bombing a week ago on the last line (when re-declaring as a record):

```
System.Management.Automation.MethodInvocationException: Exception calling "DeclareItemAsRecord" with "1" argument(s): "The file /lib/folder/file.pdf has been modified by SHAREPOINT\system on 10 Oct 2012 00:00:47 -0500." 
```

The other weird part is that this is only happening in Prod. The Test environment seems to execute just fine. I haven't tried a fix for production yet, but I'm pretty sure I can just get the $item object again using GetItemById (after the CheckIn). I'm a little hesitant to do this just yet as I wanted to get some other people's perspective first.

Does anyone have any input on this? Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:14:14.900

我认为最好的选择是按照您所说的在办理登机手续后再次获得该物品。

错误消息正是表明了这一点。您正在尝试对已修改的 SPListItem 执行操作。因此，在将其声明为记录之前，请使用 GetItemById 再次拉取它。

为什么它只发生在某些记录和某些环境中，我不确定。我猜Sharepoint有点喜怒无常。

我也会尝试的事情：

*   签入时检查是否有任何工作流程对该项目进行一些工作
*   如果符合您的要求，请尝试使用 SystemUpdate() 而不是 Update()

祝你好运

# hadoop - why hadoop capacity scheduler uses 200% of Capacity

> ID：12888751
> 
> 赞同：2
> 
> 时间：2012-10-15T03:04:24.060
> 
> 标签：hadoop, scheduler, capacity

I encountered the same problem on our cluster and returned to my pc to do some simple experiments hoping to figure it out.I configured hadoop in Pseudo-distributed mode and used the default capacity-scheduler.xml and configured the mapred-site.xml as the following:

```
<!-- Put site-specific property overrides in this file. -->
<configuration>
<property>
  <name>io.sort.mb</name>
  <value>5</value>
</property>
 <property>
<name>mapred.job.tracker</name>
 <value>localhost:9001</value>
 </property>
<property>
 <name>mapred.child.java.opts</name>
 <value>-Xmx10m</value>
 </property>
<property>
<name>mapred.jobtracker.taskScheduler</name>
<value>org.apache.hadoop.mapred.CapacityTaskScheduler</value>
</property>
<property>
<name>mapred.queue.names</name>
<value>default</value>
</property>
<property>
<name>mapred.cluster.map.memory.mb</name>
<value>100</value>
</property>
<property>
<name>mapred.cluster.max.map.memory.mb</name>
<value>200</value>
</property>
</configuration> 
```

The web UI looks like this :

```
Queue Name  default      
Scheduling Information
Queue configurationfatal
Capacity Percentage: 100.0%
User Limit: 100%
Priority Supported: NO
-------------
Map tasks
Capacity: 2 slots
Used capacity: 2 (100.0% of Capacity)
Running tasks: 1
Active users:
User 'luo': 2 (100.0% of used capacity)
-------------
Reduce tasks
Capacity: 2 slots
Used capacity: 0 (0.0% of Capacity)
Running tasks: 0
-------------
Job info
Number of Waiting Jobs: 0
Number of users who have submitted jobs: 1 
```

Actually , it did work without anything wrong when I submitted a streaming job with one map task which occupies 2 slots and no reduce task.The streaming script is rather simple

~/hadoop/hadoop-0.20.2/bin/hadoop jar Streaming_blat.jar -D mapred.job.map.memory.mb=199 -D mapred.job.name='memory alloc' -D mapred.map.tasks=1 -input file://`pwd`/input/ -mapper ' /home/luo/hadoop/hadoop-0.20.2/bin/a.out' -output file://`pwd`/output/ -reducer NONE

a.out is just a C program simply outputting the pid and ppid to a specified file.

And problems came when I set mapred.map.tasks=3\. The web UI showed

```
Map tasks
Capacity: 2 slots
Used capacity: 4 (200.0% of Capacity)
Running tasks: 2
Active users:
User 'luo': 4 (100.0% of used capacity) 
```

which means it already exceeds the limit of map slots I set in mapred-site.xml. As a result, it prompted something like this again and again

```
Killing one of the least progress tasks - attempt_201210121915_0012_m_000000_0, as the cumulative memory usage of all the tasks on the TaskTracker exceeds virtual memory limit 207618048. 
```

What I want it to do is suspend the map task until there are available slots without exceeding the capacity.So what's wrong have I done ? Could any one provide some solutions? Thanks a lot.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:24:25.227

好吧，我自己回答。破解后知道这4个属性必须全部设置在mapred-site.xml中，否则调度器不会进行内存检查（我只设置了其中两个）。

```
mapred.cluster.map.memory.mb
mapred.cluster.reduce.memory.mb
mapred.cluster.max.map.memory.mb
mapred.cluster.max.reduce.memory.mb 
```

# xcode - iOS 6.0 Apple LLVM Compiler 4.1 error

> ID：12888752
> 
> 赞同：4
> 
> 时间：2012-10-15T03:04:24.633
> 
> 标签：xcode, ios6, llvm

Updated Xcode to latest version and now getting a strange compiler error when I try to compile my existing project. I assume this is some build setting which needs changing but can't work out where.

```
Apple LLVM Compiler 4.1 error
clang: error: the clang compiler does not support '-fobjc-abi-version=0'
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

What does this mean?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:39:46.593

从[clang 手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/clang.1.html)：

```
-fobjc-abi-version=version
           Select the Objective-C ABI version to use. Available versions are 1
           (legacy "fragile" ABI), 2 (non-fragile ABI 1), and 3 (non-fragile
           ABI 2). 
```

从这个[stackoverflow答案](https://stackoverflow.com/questions/12522053/what-is-a-non-fragile-abi)：

> non-fragile ABI 是指将实例变量添加到类而不需要重新编译所有子类的能力。
> 
> 即在 v1 中（实际上没有真正的 ObjC 版本），如果 Apple 要向 NSView（在 Cocoa 上，32 位）添加一个实例变量，那么 NSView 的每个子类（或子类的子类）都必须重新编译，否则它们会爆炸。v2 和 v3 解决了这个问题。

因此，在我看来，您想删除该选项并重新编译所有内容。

# php - Send html data from one php page to another

> ID：12888764
> 
> 赞同：0
> 
> 时间：2012-10-15T03:05:25.853
> 
> 标签：php, javascript, jquery

I want to send html data like,

```
<div style='padding: 0px; overflow: auto; width: 194px;' id='bar1'><div style='float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 60px'><div style='float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;'></div></div></div> 
```

from one php page to another. I have tried doing this via POST but all the div data gets changes to this in the page I am sending the html data to,

```
<div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 20px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 4px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 4px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 4px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 4px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 4px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 4px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 4px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 4px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 4px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 4px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 4px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 4px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 4px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 4px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 4px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 4px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 4px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 4px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 2px\'></div><div style=\'float: left; font-size: 0px; width:0; border-left: 2px solid #000000; height: 40px;\'></div><div style=\'float: left; font-size: 0px; background-color: #FFFFFF; height: 40px; width: 20px\'></div><div style=\'clear:both; width: 100%; background-color: #FFFFFF; color: #000000; text-align: center; font-size: 11px; margin-top: 5px;\'>asdc</div> 
```

Can anyone tell me where am I going wrong with this and how can I keep the integrity of the data between the php pages.

EDIT 1: Code that is sending the data is as follows, (#pdf_data is a textarea)

```
function export_as_pdf2(div_id)
{
            removeAllLinks('remove');
        div_id = 'bar1';
    var content = $('#'+div_id).html();
            content=content.replace(/\"/g,'\'');

    $('#pdf_data').val(content);
    $('#pdf_format_form').submit();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T05:38:51.470

Magic Quote 在您的 php.ini 设置中启用，这就是它自动将斜杠 () 添加到每个单引号的原因。关闭魔术报价，因为这是很好的做法。如果没有，请使用 stripslashes($_POST['post_var'])。不要再使用 $_REQUEST，这不是一个好习惯。

# javascript - 有没有比将分块输入附加到字符串并随后在其上运行“JSON.parse()”更好的方法来接受 JSON 数据？

> ID：12888765
> 
> 赞同：3
> 
> 时间：2012-10-15T03:05:53.060
> 
> 标签：javascript, json, node.js, post

**在 Node.js 中，有没有比将分块输入附加到字符串并`JSON.parse()`随后在其上运行更好的方法来接受 JSON 数据？**服务器不能假设 JSON 输入是有效的，并且`JSON.parse()`是我知道的验证 JSON 数据的唯一方法。

假设以下服务器接受：

*   仅 POST 请求
*   仅 JSON 数据
*   只有一个`Content-Type`标题`"application/json"`

.

```
var server = http.createServer(function(req, res) {
    ....

    var parsedData;
    var inputData = '';

    req.on('data', function(chunk) {
        inputData += chunk;
    });

    req.on('end', function() {
        parsedData = JSON.parse(inputData);
    }

    ....
} 
```

如果我如此严格地执行输入数据，那么简单地将这些数据附加到一个字符串然后`JSON.parse()`它，本质上（假设输入了正确的 JSON）似乎很奇怪`JSON -> string -> JSON`。（当然，不能假设数据是有效的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T05:05:32.440

你在做什么真的很好。但是，性能调整可能是将每个块添加到数组中，然后加入数组，而不是每次都创建一个新字符串。

例如

```
var inputData = [];
var parsedData;

req.on('data', function(chunk{
    inputData.push(chunk); //assuming chunk is from utf-8 stream, if not call chunk.toString()
});

req.on('end', function(){
    try {
       parsedData = JSON.parse(inputData.join(''));
    } catch (err) {
      //handle error    
    }
}); 
```

这样您就不会每次都重新分配和创建一个新字符串`inputData += chunk`。请注意，这对于预期的小输入来说很好，因为 V8 很好地优化了这种情况。

现在，关于糟糕的 JSON。您确实有可能想要查看的选项。

1.  [JSONStream](https://github.com/dominictarr/JSONStream) - 我不太确定它如何处理解析错误，但对于大型 JSON 输入来说非常好。

2.  [json-scrape](https://github.com/substack/json-scrape) - 这在过滤掉不是 JSON 的错误输入方面做得非常好。

希望这些信息对一些人有所帮助。

# arrays - Randomly initializing array using data pointer and size

> ID：12888769
> 
> 赞同：0
> 
> 时间：2012-10-15T03:06:24.400
> 
> 标签：arrays, pointers, matrix, matrix-multiplication

I see the following code in an NVidia matrix program and a program from my instructor. When I look at this code I know I am doing something stupid, so could someone please explain to me what I am doing wrong? **When I change the `rand` to a constant all I see is `0` for `data[i]`, and when I try to view `rand` I seem to see only about 4 different values.**

```
void randomInit(float* data, int size)  
{  
   for (int i = 0; i < size; ++i) {  
   data[i] = 1;//rand() / (float)RAND_MAX;  
   printf("%d %d\n",i, data[i]);  
  }  
} 
```

Thank you for any help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:21:13.350

`%d`打印格式化整数，尝试将其更改为`%f`. [这是其他 printf 代码。](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)

# java - How to split up input from System.in

> ID：12888772
> 
> 赞同：0
> 
> 时间：2012-10-15T03:06:54.933
> 
> 标签：java

Alright so I'm working on something where I take input from System.in; the first line is an int (n) representing the size of a matrix. The next n lines are the matrix itself like so:

```
10
0 0 0 0 0 0 0 0 1 0
0 0 0 0 0 0 1 0 1 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 1 0 0 0 0 0
0 0 0 1 0 1 0 0 0 0
0 0 0 0 1 0 0 1 1 0
0 1 0 0 0 0 0 1 0 0
0 0 0 0 0 1 1 0 0 0
1 1 0 0 0 1 0 0 0 0
0 0 0 0 0 0 0 0 0 0 
```

The problem is there may be multiple matrix's in a single input, so the next line would have another int and the corresponding matrix underneath until it hits a line with a single 0\. I then have to pass each matrix along with the size at the top as a BufferedReader to a method which adds the numbers to a 2D array.

I'm just a little unsure on how to split the input up and send it to the method. Would making a new BufferedReader using skip() and specifying a size each time work? The biggest problem I seem to be running into is reading the size but then the size being excluded as it has already been read.

Cheers

EDIT: Got it working using Bhesh Gurung's method, thanks a ton. This is what I ended up with. I think some of the if statements are redundant but it works.

```
BufferedReader buffer = new BufferedReader(new InputStreamReader(System.in));
ArrayList<GraphAdjMatrix> mat = new ArrayList<GraphAdjMatrix>();
try
    {
        String line = buffer.readLine().trim();
        String[] tokens = line.split("\\s+");
        boolean[][] adj;

        int n = Integer.parseInt(tokens[0]);

        while (n != 0) {
            if (tokens.length == 1 && n > 0) {

                adj = new boolean[n][n];

                for (int i = 0; i < n; i++) {
                    line = buffer.readLine().trim();
                    tokens = line.split("\\s+");
                    if (tokens.length != n)
                    {
                        throw new Error("bad format: adjacency matrix");
                    }

                    for (int j = 0; j < n; j++)
                    {
                        int entry = Integer.parseInt(tokens[j]);
                        adj[i][j] = entry != 0;
                    }
                }
                mat.add(new GraphAdjMatrix(adj, n));
            }
            line = buffer.readLine().trim();
            tokens = line.split("\\s+");
            n = Integer.parseInt(tokens[0]);
        }
    }
    catch (IOException x) { throw new Error("bad input stream"); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:14:27.173

`BufferedReader.readLine`使用该方法逐行读取输入。

对于每一行，使用`String.split`返回字符串数组的方法将其拆分。如果数组的大小为 1 并且唯一的元素是非零，则初始化一个二维数组，其大小为该数字。并用其余的行填充该数组并将该数组发送到该方法。当您找到另一个非零的单个整数时再次启动相同的过程，或者当它为 0 时退出。

您可以利用该`Integer.parseInt`方法从字符串中解析整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:13:08.737

根据您的帖子，大小似乎是绝对任意的。即首先您将输入 2 x 3 矩阵，然后输入 3 x 1 矩阵。

在这种情况下，您需要读取维度。您的输入可以是这种格式

```
Enter the number of Matrices : 3

First Matrix
Rows :
Columns :
Elements : 

Second Matrix 
Rows : 
Columns :
Elements :

.
. 
```

因此，您何时阅读！如果你在 google 和 codechef 中解谜。您将遇到类似的情况，您将提供测试用例的数量作为输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T03:17:45.743

我相信你只需要使用一个while循环来处理传入数组的大小。

您甚至可以获取数组的大小并在 while 循环条件中使用整数。

```
 Scanner sc = new Scanner(System.in);
    int x;
    while((x = sc.nextInt()) != 0){
        for (int i = 0; i < x; i++){
            System.out.println("do this " + x + " times");
        }
    } 
```

希望这可以帮助。

编辑：这可能不够清楚.. 在你的 while 循环中，你可以然后根据你的 x 变量填充一个二维数组（使用嵌套的 for 循环）。

因为输入的数量始终是已知的，所以这应该是管理数组创建输入的最简单方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T03:23:23.910

假设用户输入正确，您是否试图实现这样的目标？

```
 Scanner sc= new Scanner(System.in);
    int[][] matrix = new int[1][1];
    int size = 0;

    String inputString = null;
    while(!"0".equals((inputString = sc.nextLine()))){
        String[] elements = inputString.split(" ");
        if(elements.length == 1){
            //this is size entry
            size = Integer.parseInt(elements[0]);
            matrix = new int[size][size];
        }else{
            for(int i=0; i< size; i++){
                inputString = sc.nextLine();
                elements = inputString.split(" ");
                for(int j=0; j<elements.length; j++){
                    matrix[i][j] = Integer.parseInt(elements[j]);
                }
            }
            //pass your size and matrix to other class/method
            // .....
        }
    } 
```

# xml - How to change order for 问问题

> ID：12888774
> 
> 赞同：2
> 
> 时间：
> 
> 标签：xml, templates, magento, layout

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-05T09:57:46.740

您需要为`position`块本身添加一个属性：

```
<block type="cartview/view" name="cartview_toplink" template="cartview/toplink.phtml" >
    <action method="setAttribute"><key>position</key><value>1000</value></action>
</block>

<action method="addLinkBlock"><blockName>cartview_toplink</blockName></action> 
```

* * *

我通过检查 Magento Enterprise 1.10.1.1 中的代码来解决这个问题：

```
// Mage_Page_Block_Template_Links->addLinkBlock line 109
public function addLinkBlock($blockName)
{
    $block = $this->getLayout()->getBlock(ckName);
    $this->_links[$this->_getNewPosition((int)$block->getPosition())] = $block;
    return $this;
} 
```

（我知道这个问题是很久以前提出的，但我希望这会有所帮助）。

# sql-server - SQL 选择 @variable

> ID：12888775
> 
> 赞同：0
> 
> 时间：2012-10-15T03:07:43.183
> 
> 标签：sql-server, sql-server-2008

我有一个简单的 SQL 语句，用于从问题中获取第一个 rowid，但由于返回的项目太多，它会出错。那么我该如何解决呢？

```
 DECLARE @first_id int  

select @first_id = (SELECT row_number() over (order by id) as id FROM question) 
```

`SELECT @first_id = id FROM question`>> 这种语法工作正常，但不是我想要的查询结果。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T03:15:17.053

试试这个

```
set @first_id = (SELECT top 1 id FROM question order by id) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T03:15:32.357

您需要 ROW_NUMBER 还是只需要 id 字段本身？如果是 id 字段，则很简单：

```
SELECT @first_id = MIN(id) FROM question 
```

# objective-c - 使用异步 HTTP 获取操作的 GHUnit 测试

> ID：12888776
> 
> 赞同：0
> 
> 时间：2012-10-15T03:07:44.177
> 
> 标签：objective-c, unit-testing, nsurlconnection, gh-unit

我想测试异步 HTTP 获取操作。

```
@interface Sender : NSObject<NSURLConnectionDataDelegate, NSURLConnectionDelegate>
{
    NSMutableData       *buffer;
    NSString            *_html
}

- (void)getHtml;

@end

@implementation Sender

- (void)getHtml
{
    NSString *urlstr = @"http://www.yahoo.co.jp";
    NSURL *url = [NSURL URLWithString:urlstr];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    NSURLConnection *conn = [NSURLConnection connectionWithRequest:request delegate:self];
    if (conn) {
        buffer = [NSMutableData data];
    } else {
        // error handling
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [buffer appendData:data];
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"Succeed!! Received %d bytes of data", [buffer length]);
    _html = [[NSString alloc] initWithData:buffer encoding:NSUTF8StringEncoding];
    NSLog(@"%@", _html);
}

@end 
```

我要让`_html` **财产**？

```
#import "SenderTestCase.h"
#import "Sender.h"

@implementation SenderTestCase

- (void)setUpClass
{
    sender = [[Sender alloc] init];
}

- (void)testGetHtml
{
    [self prepare];
    [sender getHtml];
    [self performSelector:@selector(_succeedGetHtml) withObject:nil afterDelay:3.0];
    [self waitForStatus:kGHUnitWaitStatusSuccess timeout:4.0];
}

- (void)_succeedGetHtml
{
    if (sender.html != nil) {
        [self notify:kGHUnitWaitStatusSuccess forSelector:@selector(testGetHtml)];
    };
}

@end 
```

如果有更好的方法，请告诉我。谢谢你的好意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:14:33.847

你做得对。

如果您希望您的代码更好（更短），请考虑使用 AFNetworking 和使用块。

我有一个[GHUnit 异步测试示例](http://samwize.com/2012/11/25/create-async-test-with-ghunit/)，它在 1 种方法中显示得很好。

# php - 使用php从数据库中获取后如何比较日期和时间？

> ID：12888777
> 
> 赞同：1
> 
> 时间：2012-10-15T03:07:54.397
> 
> 标签：php, database, date, time, compare

假设我在一个循环中运行这段代码`$fid`，每轮都会收到一个值：

```
 $result2 = mysql_query( "SELECT date_create FROM users WHERE id = $fid"); 
```

现在， date_create 将采用以下格式，例如

> 2012-08-16 20:13:49

我的问题是，如何检查该日期是否在 2012-08-31 之前，例如 2012-08-10 ？

我的完整代码，以防万一有人问起。

```
$query = "(SELECT distinct fid FROM coin WHERE uid = 59  )";
$result = mysql_query($query);
while($rows = mysql_fetch_array($result))
{
    $fid = $rows['fid'];
    echo 'fid || '.$fid;
    $result2 = mysql_query( "SELECT id, date_create FROM users WHERE id = $fid");
     $rows2 = mysql_fetch_array($result2);

     echo "  ||   users id : " . $rows2['id']; 

     if( $rows2['date_create'] < "2012-8-31") // How do i get something like this? 
     {

          echo "  ||   date_create : " . $rows2['date_create'] ." True"; 

     }
     else
     {
           echo "  ||   date_create : " . $rows2['date_create'] . "False"; 
     }  
    l();
} 
```

到目前为止我得到的结果是这样的：

```
fid || 1112 || users id : 1112 || date_create : 2012-08-16 20:13:49 false <--
fid || 1113 || users id : 1113 || date_create : 2012-08-16 20:14:11 false <--
fid || 1115 || users id : 1115 || date_create : 2012-08-16 20:14:21 false <--
fid || 1117 || users id : 1117 || date_create : 2012-08-16 20:14:38 false <--
fid || 1118 || users id : 1118 || date_create : 2012-08-16 20:15:03 false <--
fid || 1119 || users id : 1119 || date_create : 2012-08-16 20:15:10 false <-- 
```

如果您也可以提供一种检查时间的方法，nb 将不胜感激。这将是额外的：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:18:37.353

你可以使用这样的东西：

```
$result = mysql_query($query);
$chk = strtotime("2012-08-31");
while( $rows = mysql_fetch_array($result) ) {
    $fid = $rows['fid'];
    echo 'fid || '.$fid;
    $result2 = mysql_query( "SELECT id, date_create FROM users WHERE id = $fid");
     $rows2 = mysql_fetch_array($result2);
     echo "  ||   users id : " . $rows2['id']; 
     if( $chk - strtotime($rows2['date_create']) > 0) {
          echo "  ||   date_create : " . $rows2['date_create'] ." True"; 
     }
     else {
           echo "  ||   date_create : " . $rows2['date_create'] . "False"; 
     }
    l();
} 
```

php.net 上的文档用于[`strtotime()`](http://www.php.net/manual/en/function.strtotime.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:26:54.470

您可以通过转换日期/时间字符串并使用[strtotime()](http://php.net/manual/en/function.strtotime.php)进行比较来做到这一点。使用该方法，您还可以调整它以比较几秒钟：

```
//this effectively checks to see that the time is greater than '2012-08-16 20:13:49'
//the total calculated time on the RHS of the >= operator is effectively '2012-08-16 20:13:49'
//hence, this will echo 'YES'

//this is of the form: hours, minutes, seconds
$time_difference = (44 * 60 * 60) + (13 * 60) + 49;

if (strtotime('2012-08-16 20:13:49') >= strtotime('2012-08-15') + $time_difference)
{
  echo 'YEAH';
}
else
{
  echo 'NO';
} 
```

更新：

[来自strtotime()](http://php.net/manual/en/function.strtotime.php)的 PHP 文档：

> 时间戳的有效范围通常是从 1901 年 12 月 13 日星期五 20:45:54 UTC 到 2038 年 1 月 19 日星期二 03:14:07 UTC。（这些日期对应于 32 位有符号整数的最小值和最大值。）此外，并非所有平台都支持负时间戳，因此您的日期范围可能限制为不早于 Unix 纪元。这意味着例如 1970 年 1 月 1 日之前的日期将不适用于 Windows、某些 Linux 发行版和一些其他操作系统。PHP 5.1.0 和更新的版本克服了这个限制。
> 
> 对于 64 位版本的 PHP，时间戳的有效范围实际上是无限的，因为 64 位在任一方向上都可以代表大约 2930 亿年。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T03:23:29.703

更好的是使用以下查询：

```
SELECT id, date_create,unix_timestamp(date_create) as time_stamp FROM users WHERE id = $fid" 
```

并比较为 int 的 time_stamp 变量

# php - 将从文本文件中提取句子的正则表达式

> ID：12888778
> 
> 赞同：6
> 
> 时间：2012-10-15T03:08:07.360
> 
> 标签：php, regex

我需要一个从文本文件中提取句子的正则表达式。示例文本：

*以 2004 年底发生的亚洲海啸灾难为例。在一个月内（1 月 17 日），对 Google 新闻 (http://news.google.com) 的查询返回了 80,000 多篇关于此事件的在线新闻文章至 2005 年 2 月 17 日）。先生的资料 卡哈娜。*

这是我的代码：

```
$re = '/(?<=[.!?]|[.!?][\'"])\s+/';
$sentences = preg_split($re, $text, -1, PREG_SPLIT_NO_EMPTY); 
```

但是最后一句话还是分裂了`information by mr.`，`Kahana.` 怎么解决？谢谢你 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T03:31:28.573

**你不能用正则表达式做到这一点**

英语作为一种语言不适合放置良好的格式规则。因此，正则表达式不适合实现您所寻求的目的。您真正需要的是自然语言处理器之类的东西。

除非这对您的程序至关重要，否则我建议您改为确定以下事项：

*   **可接受的误差水平是多少？** 你所做的任何事情都不会是完美的。但如果它工作 80% 可以吗？90%？99%？这对您/您的客户有多重要？
*   **文字从何而来？**例如，教科书的编写方式很可能与人们的 Twitter 提要不同。您可以根据您在使用的实际文本中看到的内容进行研究并进行例外处理。
*   **我在用文字做什么？**如果您只是索引关键字之类的内容，那么正确拆分句子并不重要（同样重要）。这一切都是为了调整程序以获得针对此特定目的的适当输出。

我的建议是使用反复试验来尽可能降低错误率。在大量文本上运行您的程序，并不断添加异常，直到您获得可接受的错误率。但是，如果您需要几十条左右的规则，您可能只想重新考虑这个问题。

简而言之，PHP 和正则表达式并不适用于此，因为英语很时髦。因此，要么通过添加异常来获得较小的错误率，要么重新考虑这一点。

# c - 如何在没有内存屏障的情况下实现 InterlockedIncrement

> ID：12888779
> 
> 赞同：2
> 
> 时间：2012-10-15T03:08:11.547
> 
> 标签：c, multithreading, interlocked

我实现了一个引用计数模式，为此我需要互锁设施，但没有内存围栏（据我所知）。

不幸的是，只有 Windows 具有 InterlockedDecrementNoFence 编译器内在函数。我如何使用 asm 内联来做到这一点？我也需要这个用于 gcc/clang。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T04:25:58.320

这不是一个直接的答案，而是一个替代建议。如果你可以使用 C11（或 C++11），那么原子操作`memory_order_relaxed`呢？您的编译器*可能*不会在弱内存模型平台上生成内存栅栏。（这取决于编译器供应商/版本）

```
#include <stdatomic.h>

atomic_int var;
int oldval;

oldval = atomic_fetch_sub_explicit(&var, 1, memory_order_relaxed); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:21:22.493

对于该操作的语义而言，缺少至少一个内在的内存栅栏操作（取决于平台）几乎是不可能的。为了使原子递增/递减工作，其他处理器必须保证在对变量执行自己的操作之前看到原子操作的值，并且对变量的操作的可见性必须有一定的保证总数命令。内存屏障，即使是像 x86 这样标准内存操作具有获取/释放语义的强内存模型中的隐式屏障，对于原子递增/递减操作的正确性也是至关重要的。

请记住，即使 MSVC/gcc 的文档说存在内存屏障，由于平台的强内存模型，在 x86 上也不会应用实际的内存屏障（即`MFENCE`指令），而是内存总线上的锁，以确保操作的原子性。另一方面，IA64 需要内存屏障，因为该平台的内存模型较弱。ARM 也是如此。

# java - 如何向 servlet 发送 HTTP 请求

> ID：12888780
> 
> 赞同：-2
> 
> 时间：2012-10-15T03:08:17.900
> 
> 标签：java, swing, tomcat, servlets

> **可能重复：**
> [如何在 java 中发送 HTTP 请求？](https://stackoverflow.com/questions/1359689/how-to-send-http-request-in-java)

我只有一个 servlet 在 Tomcat 服务器端运行。现在我想从一个 Swing 应用程序向这个 servlet 发送一个 HTTP 请求，它不是一个 APPLET 应用程序（因为我看到了一些从 applet 发送请求的示例）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:12:40.217

虽然您可以打开直接套接字连接并发送原始 HTTP 标头和内容并接收响应，但我建议您查看[HttpRequestBase](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/methods/HttpRequestBase.html)。

# javascript - 使用javascript asp.net将文本框中输入的日期更改为另一种格式

> ID：12888784
> 
> 赞同：1
> 
> 时间：2012-10-15T03:08:50.903
> 
> 标签：javascript, asp.net

我整天都在看论坛和教程，我似乎无法弄清楚这一点。我是 100% 的 asp.net 和网页设计（html 等）新手；我已经使用 winforms 和 vb.net 几个月了。

我在页面上有一个文本框（ID=DOBTextbox），我正在尝试实现 javascript 代码，当文本框文本长度至少为 6 个字符（或者更好，可以评估为日期）时，文本会更改到特定的日期格式（最好是 MMM dd、yyyy，但我愿意使用内置的 javascript 日期转换器函数来接近它）。我想使用 javascript，因为我希望它是客户端驱动的。

按照这些方面的许多示例，我知道我需要在我的源文件中创建一个函数，并且我可以将一个属性添加到我的代码隐藏文件中。

```
<script type="text/javascript">
function reformatDate(inputDate) {
    var outputDate = inputDate.toString();
    return outputDate;
}
</script> 
```

在我的代码隐藏中：

```
DOBTextBox.Attributes.Add("onblur", "reformatDate('" & DOBTextBox.Text & "')") 
```

但是，当我离开文本框时没有任何反应。

注意：我使用“onblur”是因为我一直在尝试。我的第一个偏好是当用户更改文本框的文本时触发的事件。另外，我在函数中使用了“.tostring()”，因为我收到一个错误，提示无法识别 todatestring()（我认为 todatestring() 输出更接近我想要的格式）。

提前感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:44:55.567

你可能想要这个：

```
DOBTextBox.Attributes.Add("onblur", "reformatDate(this.value);") 
```

使用您的代码，您正在尝试将 ASP.NET 代码和 javascript 结合起来。ASP.NET 在发送到浏览器时是静态的，而 javascript 是动态的。使用代码时，您是在将 ASP.NET 代码运行到属性中时对文本框的值进行硬编码。所以 HTML 可能会呈现为：

```
<input type="text" id="whatever" name="whatever" value="10/24/2001" onblur="reformatDate('10/24/2001')" /> 
```

通过我的更改，它将使 javascript 在文本框模糊时获取文本框的值并将其传递给`reformatDate`函数。所以它将呈现为：

```
<input type="text" id="whatever" name="whatever" value="10/24/2001" onblur="reformatDate(this.value)" /> 
```

您可能想要使用`onchange`, not `onblur`，以便该函数仅在文本框的值更改时触发，而不仅仅是在文本框模糊时触发。

更新：

ASP.NET 代码需要更改为：

```
DOBTextBox.Attributes.Add("onblur", "this.value = reformatDate(this.value);") 
```

以便将文本框的值重新设置为转换后的值。

更新2：

尝试将您的功能更改为：

```
function reformatDate(inputDate) {
    if (inputDate.length > 5) {                  // Least amount of characters for possible date
        var outputDate = new Date(inputDate);    // Convert input to date object
        if (!isNaN(outputDate.getTime())) {      // Makes sure the date is valid
            return outputDate.toDateString();    // Return formatted date only if valid
        }
    }
    return inputDate;    // Return original value if invalid date
} 
```

# javascript - 不明白这里发生了什么；带有 jQ uery 对象的匿名函数

> ID：12888785
> 
> 赞同：1
> 
> 时间：2012-10-15T03:09:14.730
> 
> 标签：javascript, jquery

很抱歉提出一个幼稚的问题，但我正在尝试找出将一堆代码构造成更易于管理的东西的最佳方法

我想将事件及其响应放入站点不同部分的“控制器”中。我正在浏览[Javascript Web Applications](https://rads.stackoverflow.com/amzn/click/com/144930351X)这本书，看到了一些像这样的有前途的东西（p5 - 我对我理解的东西的评论）：

```
var controller={};  // ok- an object literal

(Controller.users = function($){  // creating an anonymous function; I don't get the dollar sign since it seems to work fine without it
  var jtClick= function(){
    alert('you clicked on me!');
  };

  $(function(){
    $('#view').on('click',jtClick);
  });
})(jQuery); 
```

但我也注意到这做了同样的事情：

```
var controller={};

(Controller.users = function(){
  var jtClick= function(){
    alert('you clicked on me!');
  };

  $(function(){
    $('#view').on('click',jtClick);
  });
})(); 
```

那么我需要将 jQuery 作为匿名函数的一部分传递吗？这是否会改变处理范围的方式？我更新了标题以删除“完全”，因为我认为我没有得到太多

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:13:18.233

这是一个自调用函数，允许您安全地将 jQuery 与使用 $ 作为库对象/变量的其他库一起使用。

上面示例中的 $ 只不过是调用函数时传递的 jQuery 对象。

# mysql - 编辑 MySQL 连接查询的结果

> ID：12888787
> 
> 赞同：4
> 
> 时间：2012-10-15T03:09:44.463
> 
> 标签：mysql

我使用 mysql 连接三个表并在 HTML 表中打印数据。我的查询如下所示：

```
SELECT nid, title, cid, lid, street, city, state, cat_name, cat_icon 
FROM 
    node 
    JOIN location USING(nid) 
    LEFT JOIN categories USING(cid) 
ORDER BY nid DESC LIMIT 10 
```

然后我将数据打印到一个漂亮的 HTML 表格中。

这很适合显示我的数据，但我很好奇如何编辑结果。基本上，企业在“节点”表中有数据，在“位置”中有地址信息。

我打算制作一个模态或内联编辑表单，但我很好奇您如何更新数据，因为它来自多个表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T03:17:41.900

```
UPDATE node JOIN location USING(nid) LEFT JOIN categories USING(cid) 
SET    node.col1 = newvalue 
```

如 mysql 手册中所述，多表 UPDATE 语句可以使用 SELECT 语句中允许的任何类型的连接，例如 LEFT JOIN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:49:01.590

[table_Business] **BusinessID** **NodeID** **LocationID** BusinessName BusinessDescription

[table_Node] NodeID NodeName NodeDescription

[table_Location] LocationID LocationName LocationDescription

表之间的关系允许您修改/删除/添加数据。关系由标识符 (ID) 决定。在上述情况下，主表是 table_Business。一个业务有**一个 Node 和一个 Location**，这使得关系图中的 table_Node 和 table_Location 二级表。对于一项业务，我们可以在所有三个表中都有数据：table_business table_node，table_location 但即使数据分散，我们仍然可以修改/引用它，只要我们有一些东西可以识别它。这就是 businessID、nodeID 或 locationID 发挥作用的地方。

通过知道**NodeID**，我们可以修改一项业务的一个特定节点。

通过知道**LocationID**，我们可以修改一个企业的一个特定位置。

通过了解**BusinessID**，我们可以修改一个特定的业务，一个特定的数据和一个业务的一个特定位置。

（根据BusinessID，我们可以从table_Business中选择LocationID或NodeID，然后我们可以使用LocationID，NodeID分别修改table_Location，table_Node中的信息）

* * *

这是具有不同关系定义的相同数据

[table_Business] **BusinessID** **NodeID** BusinessName BusinessDescription

[table_Node] NodeID NodeName NodeDescription

[table_Location] LocationID **BusinessID** LocationName LocationDescription

请注意，LocationID 已从 table_Business 中删除，BusinessID 出现在 table_Location 中。通过这样做，我们可以为企业提供**多个**位置。如果您要存储肯德基类型的企业，那么能够定义多个位置会很有帮助。

通过知道**NodeID**，我们可以修改一项业务的一个特定节点。

通过知道**LocationID**，我们可以修改一个企业的一个特定位置。

通过了解**BusinessID**，我们可以修改一项特定业务、一个特定节点**，但不能修改一项业务的一个特定位置**。

（如果我们要使用 BusinessID 来修改位置数据，我们最终会修改该企业的所有位置。在这种情况下，我们需要 LocationID）

> [关系被定义为一组具有相同属性的元组。元组通常表示一个对象和有关该对象的信息。对象通常是物理对象或概念。关系通常被描述为一个表，它被组织成行和列。一个属性引用的所有数据都在同一个域中，并且符合相同的约束。关系模型指定关系的元组没有特定的顺序，并且元组反过来对属性没有顺序。应用程序通过指定查询来访问数据，这些查询使用诸如 select 来识别元组、project 来识别属性以及 join 来组合关系等操作。可以使用插入、删除和更新运算符修改关系。新元组可以提供显式值或从查询派生。相似地，查询标识要更新或删除的元组。关系的每个元组都必须通过其属性值的某种组合（一个或多个）来唯一标识。这种组合称为主键。](http://en.wikipedia.org/wiki/Relational_database)

# git - 完全从历史中删除文件

> ID：12888791
> 
> 赞同：0
> 
> 时间：2012-10-15T03:10:55.087
> 
> 标签：git

一位同事做了一些我告诉他们不要做的事情：

*   在线分叉原始仓库
*   克隆了 fork，添加了一个不应该添加到该本地 repo 的文件
*   把这个推到他们的叉子上

我当时：

*   合并来自 fork 的更改并找到文件

我想从以下内容中删除它：

*   我的本地仓库
*   叉子
*   他们的本地仓库

我有一个从历史记录中删除某些内容的解决方案，取自[Remove file from git repository (history)](https://stackoverflow.com/questions/2164581/remove-file-from-git-repository-history)。我需要知道的是，我的同事是否也应该经历这个，随后的推送会从分叉中删除所有信息吗？（我想要一个替代方法来破坏叉子，因为我不确定我的同事会这样做）

```
SOLUTION: This is the shortest way to get rid of the files:

check .git/packed-refs - my problem was that I had there a refs/remotes/origin/master line for a remote repository, delete it, otherwise git won't remove those files
(optional) git verify-pack -v .git/objects/pack/#{pack-name}.idx | sort -k 3 -n | tail -5 - to check for the largest files
(optional) git rev-list --objects --all | grep a0d770a97ff0fac0be1d777b32cc67fe69eb9a98 - to check what files those are
git filter-branch --index-filter 'git rm --cached --ignore-unmatch file_names' - to remove the file from all revisions
rm -rf .git/refs/original/ - to remove git's backup
git reflog expire --all --expire='0 days' - to expire all the loose objects
(optional) git fsck --full --unreachable - to check if there are any loose objects
git repack -A -d - repacking the pack
git prune - to finally remove those objects 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:33:53.893

好吧，推送肯定不会造成什么麻烦，因为你不会有线性历史。使用`--force`标志来推动和拉动应该可以完成这项工作。

虽然，如果没有，请让您的同事在第一次已知提交时重置他们的分支，`git reset --hard <initial commit sha-1>`然后让他们拉动。这种方式应该可以工作，因为重置不会正确地改变本地分支；该分支只会被大量提交标记为它的远程对应物的后面。然后，获取和合并将变得很容易，因为它们会随着线性历史一路上升。

但是，当然，这样的操作需要团队之间的组织/时间安排。

# android - Google drive SDK 2.0 抛出错误 400 Bad Request

> ID：12888795
> 
> 赞同：1
> 
> 时间：2012-10-15T03:11:36.037
> 
> 标签：android, google-drive-api

我已经与适用于 Android 的 Google Drive API 抗争了 50 多个小时，而且还没有接近一英寸。据我了解，有 1001 种方法可以访问 Google Drive（Google Docs API、REST 和 Google Drive SDK v2）。我正在使用 Google Drive SDK v2。我想访问 Google Drive 来上传 jpeg 文件。平台，Android 2.2+。

我试过的：

*   使用最近发布的 SDK： [http ://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API](http://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API)

*   我看过 Google I/O 会议，但最重要的部分（如何使用您的客户端 ID 和客户端密码创建 Drive 对象）被遗漏了： [https ://developers.google.com/events/io/sessions /gooio2012/705/](https://developers.google.com/events/io/sessions/gooio2012/705/)

*   我在[https://code.google.com/apis/console](https://code.google.com/apis/console)创建了多个密钥。我创建（并测试）的最后一个是使用“创建另一个客户端 ID ...”->“已安装的应用程序”->“Android”创建的。我已经使用了 ~/.android/debug.keystore 中的密钥。

*   我还尝试为“其他”（而不是 Android/iOS）安装的应用程序创建一个密钥，但这给了我一个客户端 ID 和客户端密码。Drive 对象似乎不接受客户端密码。

*   在代码显示“1234567890-abcdefghij123klmnop.apps.googleusercontent.com”的地方，我尝试同时使用“API 密钥”和“客户端 ID”，都给出了相同的错误。

我的代码：

```
Account account = AccountManager.get(context).getAccountsByType(
        "com.google")[0];

String token;
try {
    token = GoogleAuthUtil.getToken(context, account.name, "oauth2:"
            + DriveScopes.DRIVE_FILE);
} catch (UserRecoverableAuthException e) {
    context.startActivityForResult(e.getIntent(), ASK_PERMISSION);
    return;
} catch (IOException e) {
    return;
} catch (GoogleAuthException e) {
    return;
}

HttpTransport httpTransport = new NetHttpTransport();
JacksonFactory jsonFactory = new JacksonFactory();
Drive.Builder b = new Drive.Builder(httpTransport, jsonFactory, null);
final String tokenCopy = token;
b.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {
    public void initialize(JsonHttpRequest request) throws IOException {
        DriveRequest driveRequest = (DriveRequest) request;
        driveRequest.setPrettyPrint(true);
        driveRequest
                .setKey("1234567890-abcdefghij123klmnop.apps.googleusercontent.com");
        driveRequest.setOauthToken(tokenCopy);
    }
});

final Drive drive = b.build();
FileList files;
try {
    files = drive.files().list().setQ("mimeType=text/plain").execute();
} catch (IOException e) {
    e.printStackTrace(); // throws HTTP 400
} 
```

我得到的错误是：

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "location" : "q",
    "locationType" : "parameter",
    "message" : "Invalid Value",
    "reason" : "invalid"
  } ],
  "message" : "Invalid Value"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:37:31.043

正如错误消息所暗示的，您的错误在查询参数`q`中。`q`您的参数的正确语法是

```
files = drive.files().list().setQ("mimeType='text/plain'").execute(); 
```

并不是 ：

```
files = drive.files().list().setQ("mimeType=text/plain").execute(); 
```

查看您的代码，您已完全通过身份验证，并且由于此语法错误，您的请求失败。

# xml - XSLT：如何获取 XML

> ID：12888801
> 
> 赞同：2
> 
> 时间：2012-10-15T03:13:05.740
> 
> 标签：xml, xslt

我有一个将一种 XML 格式转换为另一种格式的 XSL。在输入 XML 中，我有一个具有以下值的节点 - 如果我们替换 < 这实际上是一个 XML 字符串 <（小于）例如

```
<otherInfo>&amp;lt;Paragraph&amp;gt;&amp;lt;Title&amp;gt;&amp;lt;!CDATA[Pour les nuits du 2012-10-01 - 2012-10-30]]&amp;gt;&amp;lt;/Title&amp;gt;&amp;lt;Text&amp;gt;&amp;lt;![CDATA[TAXES INCLUSES.]]&amp;gt;&amp;lt;/Text&amp;gt;&amp;lt;/Paragraph&amp;gt;</otherInfo> 
```

我希望将 otherInfo 的内容作为输出 XML 中的 XML 节点。

如果我执行 xsl:valueof select="otherInfo"，我不会将它作为 XML 节点 - 它只是作为文本输出。如何使 XSL 将 otherInfo 的内容输出为 XML 节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:32:49.483

您要么需要实现一个用 XSLT 编写的 XML 解析器，要么调用一个扩展函数，要么等待 XSLT 3.0，那里可能有一个标准[**`parse-xml()`**](http://www.w3.org/TR/xpath-functions-30/#func-parse-xml)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T04:02:30.647

如果我理解你的问题是正确的......

你可以尝试这样的事情（代码未测试）

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:exslt="http://exslt.org/common" version="1.0">

<xsl:template match="*">
    <xsl:variable name="xml-string">
    <Paragraph>
        <Title>
            <!CDATA[Pour les nuits du 2012-10-01 - 2012-10-30]]>
        </Title>
        <Text>
            <![CDATA[TAXES INCLUSES.]]>
        </Text>
    </Paragraph>
</xsl:variable>

    <xsl:variable name="xmlnode" select="exslt:node-set($xml-string)"/>

    Title is <xsl:value-of select="$xmlnode//Title"/>
</xsl:template> 
```

# c# - 如何使用 ZipPackage 创建一个 zip

> ID：12888805
> 
> 赞同：4
> 
> 时间：2012-10-15T03:13:34.810
> 
> 标签：c#, zip

我在 MSDN 上看到了有关[ZipPackage 类](http://msdn.microsoft.com/en-us/library/system.io.packaging.zippackage.aspx)的文档。

那里的例子不是很有用，任何人都可以提供一个关于这个类的例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-19T03:59:12.667

这是一个示例，请注意：
- ZipPackage 似乎不压缩
- 生成的 zip 有一个不需要的文件“[Content_Types].xml”
- [System.IO.Compression](http://msdn.microsoft.com/en-us/library/system.io.compression%28v=vs.110%29.aspx)因为 .Net 4.5 似乎是一个不错的选择

在 Visual Studio 中，您必须添加对“WindowsBase”的引用（不带“System.IO”之类的前缀）

```
using System;
using System.Linq;
using System.Text;
using System.IO.Packaging;
using System.IO;

namespace TestZip
{
 public static class  Program
 {
  public static void Main(string[] args)
  {
   byte[] data = Encoding.UTF8.GetBytes(String.Join("\n", new string[1000].Select(s => "Something to zip.").ToArray()));
   byte[] zippedBytes;
   using(MemoryStream zipStream = new MemoryStream())
   {
    using (Package package = Package.Open(zipStream, FileMode.Create))
    {
     PackagePart document = package.CreatePart(new Uri("/test.txt", UriKind.Relative), "");
     using (MemoryStream dataStream = new MemoryStream(data))
     {
      document.GetStream().WriteAll(dataStream);
     }     
    }    
    zippedBytes = zipStream.ToArray();
   }
   File.WriteAllBytes("test.zip", zippedBytes);
  }

  private static void WriteAll(this Stream target, Stream source)
  {
   const int bufSize = 0x1000;
   byte[] buf = new byte[bufSize];
   int bytesRead = 0;
   while ((bytesRead = source.Read(buf, 0, bufSize)) > 0)
    target.Write(buf, 0, bytesRead);
  }
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:18:32.780

看看这个代码项目 -

[C# 使用没有外部库的 Zip 档案](http://www.codeproject.com/Articles/209731/Csharp-use-Zip-archives-without-external-libraries)。

# php - 比较两个 PHP 数组

> ID：12888809
> 
> 赞同：2
> 
> 时间：2012-10-15T03:14:55.070
> 
> 标签：php, arrays

我有：

阵列1：`([0] => "Lion 1" [1] => "Cat 1" [2] => "Tiger 1" [3] => "Leopard 1")`

数组2：`([0] => "Lion 2" [1] => "Dog 2" [2] => "Tiger 2" [3] => "Leopard 2")`

要显示的输出：

```
 Array1    |   Array2
            ++++++++++++++++++++
            Lion 1    |   Lion 2
            Cat 1     |   ______ <-Blank row
            Tiger 1   |   Tiger 2
            Leopard 1 |   Leopard 2
Blank row -> _______   |   Dog 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:57:05.427

以下是一些可能对您有所帮助的代码：

```
<pre>
<?php
$array1 = Array("Lion 1", "Cat 1", "Tiger 1", "Leopard 1");
$array2 = Array("Lion 2", "Dog 2", "Tiger 2", "Leopard 2");

function build_map($array) {
    $map = Array();

    foreach($array as $val) {
        $parts = explode(' ', $val);
        $map[$parts[0]] = $val;
    }

    return $map;
}

$map1 = build_map($array1);
$map2 = build_map($array2);

$only1 = array_diff_key($map1, $map2);
$only2 = array_diff_key($map2, $map1);
$both = array_intersect_key($map1, $map2);

foreach($both as $key => $val)
    echo $map1[$key]."\t\t".$map2[$key]."\n";

foreach($only1 as $key => $val)
    echo "$val\t\t________\n";

foreach($only2 as $key => $val)
    echo "________\t\t$val\n";

?>
</pre> 
```

它的输出如下。

```
Lion 1      Lion 2
Tiger 1     Tiger 2
Leopard 1       Leopard 2
Cat 1       ________
________        Dog 2 
```

只要您在每个阵列中都有一种动物，这应该可行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T04:25:45.453

查看[str_word_count](http://php.net/manual/en/function.str-word-count.php)、[array_unique](http://php.net/manual/en/function.array-unique.php)和[array_intersect](http://php.net/manual/en/function.array-intersect.php)了解更多详情。

您可以像这样使用它们：

```
$array1 = Array(0 => "Lion 1", 1 => "Cat 1", 2 => "Tiger 1", 3 => "Leopard 1");
$array2 = Array(0 => "Lion 2", 1 => "Dog 2", 2 => "Tiger 2", 3 => "Leopard 2");

$animals1 = array_unique(str_word_count(implode(' ', $array1), 1));
$animals2 = array_unique(str_word_count(implode(' ', $array2), 1));

# Compare the two arrays.
$intersect = array_intersect($animals1, $animals2);

# Check if there's a match.
if (count($intersect)) {
   # found a match
} 
```

# ruby-on-rails - 如何使用 if 语句为 Ruby on Rails 中的多个更改字段创建回调？

> ID：12888812
> 
> 赞同：8
> 
> 时间：2012-10-15T03:15:23.947
> 
> 标签：ruby-on-rails

我想创建一个`before_save`回调，只有在三个字段（街道、城市、州）中的任何一个（但不一定是全部）发生更改时才会运行。你怎么做到这一点？谢谢

用户.rb

```
class User
  before_save :run_test_method, :if => street_changed?

  ...
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-15T03:28:21.217

**选项一**

您可以创建一个方法，如：

```
def ok_to_run_test_method?
  street_changed? || something_changed? || something_else_changed?
end 
```

然后使用：

```
before_save :run_test_method, :if => :ok_to_run_test_method? 
```

注意`:ok_to_run_test_method?`符号如何。不确定这是否是拼写错误，但在您的问题中，您实际上是在调用**类**方法`street_changed?`。

**选项二**

稍微现代化你的回调并使用块式语法：

```
before_save do
  if street_changed? || something_changed? || something_else_changed?
    # whatever you currently have in #run_test_method
  end
end 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-15T03:29:58.817

您可以使用以下命令在一行中完成`Proc`：

```
class User
  before_save :run_test_method, :if => Proc.new { |u| u.street_changed? || u.city_changed? || u.state_changed? }

  ...
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-13T08:25:53.627

您还可以使用`lambda`：

```
before_save :run_test_method, if: ->(u) {u.street_changed? || u.something_changed? || u.something_else_changed?} 
```

# ios - 「file:///」链接在 PhoneGap 中不起作用

> ID：12888815
> 
> 赞同：0
> 
> 时间：2012-10-15T03:15:29.283
> 
> 标签：ios, cordova

我正在使用 PhoneGap 2.1.0 和 iOS 6.0

在 PhoneGap 中打开外部站点后
，我想从外部站点返回本地 html。
但是，我无法使用“file:///”URL 移动到本地“index.html”文件。
如何从外部站点移动到本地 html？

例子：

```
<a href="file:///Users/hoge/Library/Application Support/iPhone Simulator/5.0/Applications/00000000-0000-0000-0000-000000000000/HelloWorld.app/www/index.html">首页</一个>
```

我使用 Ajax 在启动应用程序时将 index.html 的路径发送到服务器。
服务器缓存了路径并显示了一个链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:22:55.523

尝试以下操作：

*   打开你的文件`Cordova.plist`

*   将参数设置`OpenAllWhitelistURLsInWebView`为`YES`

*   右键单击`ExternalHosts`->`Add Row`

*   将`String`新添加的行的值设置为`*`。

因此，您新添加的行应如下所示：

```
Item0         String         * 
```

有关上述内容的更多信息，请查看在线文档：[http](http://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide) ://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide 。

让我知道此解决方案是否适合您。

# node.js - Node.js 使用 nodemailer 发送带有图像附件的电子邮件

> ID：12888817
> 
> 赞同：2
> 
> 时间：2012-10-15T03:15:43.840
> 
> 标签：node.js, email, express, node-modules, nodemailer

我正在尝试通过发布请求发送电子邮件。我正在使用 Express 和 nodemailer。我对“fs”感到困惑 我的电子邮件正在发送，但图像未作为附件包含在内。我检查了文档，但它们似乎都发送了静态文件，而不是从表单请求中流入的文件。

```
var smtpTransport = nodemailer.createTransport("SMTP",{
  service: "Gmail",
  auth: {
    user: "gmail_address@gmail.com",
    pass: "password_for_gmail_address"
  }
});

app.get('/', function(req, res){
    res.send('<form method="post" enctype="multipart/form-data">'
      + '<p>Post Title: <input type="text" name="title"/></p>'
      + '<p>Post Content: <input type="text" name="content"/></p>'
      + '<p>Image: <input type="file" name="image"/></p>'
      + '<p><input type="submit" value="Upload"/></p>'
      + '</form>');
  })

app.post('/', function(req, res, next){
  var mailOptions = {
    from: "gmail_address@gmail.com", // sender address
    to: "somebodyelse@example.com", // list of receivers
    subject: req.body.title, // Subject line
    text: req.body.content, // plaintext body
    attachments:[
      {
        fileName: req.body.title,
        streamSource: req.files.image
      }
    ]
  }

  smtpTransport.sendMail(mailOptions, function(error, response){
    if(error){
      console.log(error);
      res.send('Failed');
    }else{
      console.log("Message sent: " + response.message);
      res.send('Worked');
    }
  });   
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-05-22T16:26:53.070

这对我有用：

```
attachments: [{   // stream as an attachment
            filename: 'image.jpg',
            content: fs.createReadStream('/complete-path/image.jpg')
        }] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T03:36:41.177

假设`req.files.image`是一个[`File`](https://github.com/felixge/node-formidable#formidablefile)对象，而不是可读流，您需要为它创建一个可以在附件中使用的读取流：

```
streamSource: fs.createReadStream(req.files.image.path) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T03:30:41.810

而不是`streamSource`尝试使用`contents`

```
contents: new Buffer(req.files.image, 'base64') 
```

# ruby - 如何找到“runas”执行完成？

> ID：12888823
> 
> 赞同：1
> 
> 时间：2012-10-15T03:17:39.563
> 
> 标签：ruby, windows, windows-7, cmd, runas

我`ruby 1.9.3p194 (2012-04-20) [i386-mingw32]`在Windows7上使用。最近我从 Windows XP 升级，我不必以管理员身份运行命令，所以我没有遇到这样的问题。

要进行 mySQL 备份，我运行`runas /savecred /user:yogurt\administrator "cmd.exe /k mysqldump --user=#{dbuser} --password=#{dbpassword} #{dbname} > #{dump}"`- mysqldump 必须以管理员身份执行。我不在管理员帐户下运行我的 ruby​​ 脚本。

runas 启动新的 cmd.exe 并且 ruby​​ 不会等待它完成。转储过程大约需要一分钟才能完成。之后，我压缩转储文件并将其删除。

但是在对该文件执行任何其他操作之前，我必须确保转储过程已经完成。现在我使用`sleep(60)`它，但我想知道是否有更好的更系统的解决方案。

# 更新 - 红宝石代码

```
dump="c:\\dbdump.sql"
cmd="runas /savecred /user:yogurt\\administrator \"cmd.exe /c mysqldump --user=root --password=password tafdb413 > #{dump}\""
output = %x[#{cmd} 2>&1]
puts "flow continues even though dump hasn't finished yet :-("
      sleep(130)  
cmd="runas /savecred /user:yogurt\\administrator \"cmd.exe /c del #{dump}\""
output = %x[#{cmd} 2>&1] 
```

## 更新2

我在想我可以在转储完成后创建一个文件作为 cmd.exe 中的第二个命令。ruby 将每隔一秒左右检查文件是否存在。

# c# - 预期的类、委托、枚举、接口或结构

> ID：12888828
> 
> 赞同：0
> 
> 时间：2012-10-15T03:18:00.463
> 
> 标签：c#, asp.net

我是 ASP.NET 的新手，并试图从数据库中检索数据集，但正如标题所说，我遇到了一个错误

这是代码，有什么问题？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;

public partial class Admin_addNode : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        var category = new category();
        DataSet ds = new DataSet();
        ds = category.getNode();
        DataTable tbl = ds.Tables[0];
        for (int i = 0; i < tbl.Rows.Count; i++)
        {
        DataRow myRow = tbl.Rows[i];
        string MyValue = myRow["title"].ToString();
        Response.Write(MyValue);
        }
    } 

    }
    protected void Button1_Click(object sender, EventArgs e)
    {

    }
} 
```

protected void Button1_Click，其中“void”在 vwd 中带有红色下划线

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T03:19:48.177

删除“受保护的无效按钮1 ...”之前的}？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:48:07.503

第一个答案让您摆脱了一个问题，但我认为可能还有其他问题，如下所示：

数据集 ds = new DataSet(); ds = category.getNode();

您正在创建一个新的 DataSet，然后为它分配从方法 getNode() 检索到的其他内容，我想它返回另一个 DataSet，因此您丢失了第一个。

按照它的方式，它会运行，但您将创建一个不必要的 DataSet 实例。

数据集 ds = category.getNode()

# sql-server-2008 - 按计数排序未正确排序 - SQL (MS Access 2007)

> ID：12888829
> 
> 赞同：2
> 
> 时间：2012-10-15T03:18:05.903
> 
> 标签：sql-server-2008, ms-access-2007

概述：比较不同账户的农产品代理的日常交易，以发现代理和公司持股之间的差异，仅显示新产品；当前交易中的代码，但不是以前的交易。

目标：按频率最高的代码（即苹果）对交易进行排序。

当前表：

```
--------------------------------------------------------------------------------------------------------------
|        DATE | ACCT_CODE | TYPE | TYPE_DESCRIPTION |    CODE | DIFFERENCE | AGENT_HOLDING | COMPANY_HOLDING |
--------------------------------------------------------------------------------------------------------------
| 02 Aug 2012 | acc107101 | prod |          produce |   apple |      -1500 |             0 |            1500 |
| 02 Aug 2012 | acc107101 | prod |          produce |   apple |       1500 |          2000 |             500 |
| 02 Aug 2012 | acc107101 | prod |          produce |   apple |          0 |             0 |               0 |
| 02 Aug 2012 | acc107101 | prod |          produce |   apple |          0 |         49797 |           49797 |
| 02 Aug 2012 | acc170000 | prod |          produce |  grapes |       2500 |          2500 |               0 |
| 02 Aug 2012 | acc170000 | prod |          produce |  grapes |      -1500 |             0 |            1500 |
| 02 Aug 2012 | acc008221 | caus |             cash |    cash |          0 |             0 |               0 |
| 02 Aug 2012 | acc008221 | caus |             cash | carrots |          0 |         43273 |           43274 |
| 01 Aug 2012 | acc008221 | caus |             cash |    cash |          0 |             0 |               0 |
| 01 Aug 2012 | acc008221 | caus |             cash | carrots |          0 |         43273 |           43274 |
| 02 Aug 2012 | acc179185 | prod |          produce |   mango |        125 |          2775 |            2650 |
| 02 Aug 2012 | acc179185 | prod |          produce |   mango |     -57646 |        453639 |          511286 |
| 02 Aug 2012 | acc636903 | prod |          produce |   mango |          0 |        481081 |          481081 |
| 02 Aug 2012 | acc001049 | prod |          produce |   mango |       2500 |          2500 |               0 |
| 02 Aug 2012 | acc001189 | prod |          produce |   apple |      -1091 |             0 |            1091 |
-------------------------------------------------------------------------------------------------------------- 
```

代码：

```
SELECT 
    Count(CurrentTrade.Code) AS CountOfCode, 
    CurrentTrade.date, 
    CurrentTrade.Acct_Code, 
    CurrentTrade.Type, 
    CurrentTrade.Code, 
    CurrentTrade.Agent_Holding, 
    CurrentTrade.Company_Holding, 
    CurrentTrade.Difference
FROM CurrentTrade 
LEFT JOIN PrevTrade 
    ON CurrentTrade.Company_Holding=PrevTrade.Company_Holding
WHERE (((PrevTrade.Company_Holding) Is Null) AND ((CurrentTrade.Code)<>'cash'))
GROUP BY 
    CurrentTrade.Code,CurrentTrade.date, 
    CurrentTrade.Acct_Code, 
    CurrentTrade.Type, 
    CurrentTrade.Agent_Holding, 
    CurrentTrade.Company_Holding, 
    CurrentTrade.Difference
ORDER BY count(CurrentTrade.Code) ASC; 
```

当前结果：

```
---------------------------------------------
| COUNTOFCODE |        DATE | TYPE |   CODE |
---------------------------------------------
|           1 | 02 Aug 2012 | prod | grapes |
|           1 | 02 Aug 2012 | prod | grapes |
|           1 | 02 Aug 2012 | prod |  apple |
|           1 | 02 Aug 2012 | prod |  apple |
|           1 | 02 Aug 2012 | prod |  apple |
|           1 | 02 Aug 2012 | prod |  apple |
|           1 | 02 Aug 2012 | prod |  apple |
|           1 | 02 Aug 2012 | prod |  mango |
|           1 | 02 Aug 2012 | prod |  mango |
|           1 | 02 Aug 2012 | prod |  mango |
|           1 | 02 Aug 2012 | prod |  mango |
--------------------------------------------- 
```

问题：如何修复以使用正确的 ORDER BY 频率（苹果、芒果、葡萄）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:01:13.537

我认为问题在于您的分组太细了。

`AgentHolding`在这种情况下，从子句中排除三个 Amount 列（`CompanyHolding`和）并在输出中聚合它们（ ）可能是有意义的。`Difference``GROUP BY``sum`

这是此更改将产生的示例：[http ://www.sqlfiddle.com/#!3/fc4d4/7](http://www.sqlfiddle.com/#!3/fc4d4/7)

*注意：由于我不知道它的结构和数据，所以我省略了表格，但希望这能说明意图`left join`。`PrevTrade`*

# django - 服务器名称不起作用（django + nginx + gunicorn）

> ID：12888832
> 
> 赞同：1
> 
> 时间：2012-10-15T03:18:18.327
> 
> 标签：django, nginx, gunicorn

这是我第一次使用 django + nginx + gunicorn。我无法使 server_name 工作。通过以下配置，我可以在 localhost/admin 上看到 django 管理面板。但是当我访问 local-example/admin 时，我也应该能够看到管理面板吗？

开始我的独角兽

```
gunicorn web_wsgi_local:application
2012-10-14 19:45:50 [16532] [INFO] Starting gunicorn 0.14.6
2012-10-14 19:45:50 [16532] [INFO] Listening at: http://127.0.0.1:8000 (16532)
2012-10-14 19:45:50 [16532] [INFO] Using worker: sync
2012-10-14 19:45:50 [16533] [INFO] Booting worker with pid: 16533 
```

nginx.conf

```
worker_processes  1;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                  '$status $body_bytes_sent "$http_referer" '
                  '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /Users/ruixia/www/x/project/logs/nginx_access.log  main;
    error_log /Users/ruixia/www/x/project/logs/nginx_error.log debug;

    autoindex on;
    sendfile        on;
    tcp_nopush     on;
    tcp_nodelay    off;

    gzip  on;

    include /usr/local/etc/nginx/sites-enabled/*;
} 
```

启用站点/x 配置

```
server {
    listen 80;
    server_name local-example;
    root /Users/ruixia/www/x/project;

    location /static/ {
        alias /Users/ruixia/www/x/project/static/;
        expires 30d;
    }

    location /media/ {
        alias /Users/ruixia/www/x/project/media/;
    }

    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 10;
        proxy_read_timeout 10;
        proxy_pass http://localhost:8000/;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T04:18:19.087

嗯...我通过将 local-example 添加到 /etc/hosts 来解决它

# facebook - 如何创建具有无状态通信的 facebook Web 应用程序？

> ID：12888833
> 
> 赞同：-1
> 
> 时间：2012-10-15T03:18:27.823
> 
> 标签：facebook, web-applications, web

我正在开发一个 Web 应用程序，我希望在其中实现客户端和服务器之间的无状态通信。服务器向客户端提供网页模板。现在从客户端我想知道应用程序用户的身份，所以我可以在页面上打印他的名字。由于它是一个 facebook 应用程序，所以我不提供用户通过我的应用程序登录或注销的选项。

我怎么能做到呢？我不能使用 JSP 来提供动态网页，也不能使用 cookie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:21:30.437

我猜这会留下localStorage。

但我确实想知道只有客户端状态的应用程序有什么意义。

# iphone - ios 6：提示用户登录 facebook

> ID：12888837
> 
> 赞同：0
> 
> 时间：2012-10-15T03:18:47.083
> 
> 标签：iphone, ios

我正在使用 UIActivityViewController 在我的应用程序中使用 facebook 集成。我观察到，为了让 Facebook 选项显示在显示的选项列表中，用户需要在输入 UIActivityViewController 之前在其设备上的设置中登录 Facebook。

我想在调用 UIActivityViewController 之前提示用户登录 Facebook 并允许我的应用访问他们的帐户。有没有办法提示用户在他们的设备上登录 Facebook（我想我正在寻找重定向或挂钩到设置应用程序，并带有回调）？

注意：我想避免使用 Facebook SDK，并使用纯 Apple 提供的框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:42:55.483

这是不可能的`UIActivityViewController`。

但是您可以通过`SLComposeViewController`.

我创建了一个分支项目**OWActivityViewController** [，](https://github.com/brantyoung/OWActivityViewController)它通过.**`SLComposeViewController`**

 **[OWActivityViewController](https://github.com/brantyoung/OWActivityViewController)使用纯 Apple 提供的框架，与 iOS 5 兼容，希望对您有所帮助。**

# java - java - 如何在 TimeZone 类中获取特定时间

> ID：12888842
> 
> 赞同：0
> 
> 时间：2012-10-15T03:19:38.860
> 
> 标签：java, timezone

有人请告诉我如何从 TimeZone 课程中获取时间。当我运行这段代码

```
System.out.println("Default Timezone: " + TimeZone.getDefault()) 
```

我懂了

```
Default Timezone: sun.util.calendar.ZoneInfo[id="Asia/Manila",offset=28800000,dstSavings=0,useDaylight=false,transitions=10,lastRule=null] 
```

我找不到任何可以获取时间的函数，例如`TimeZone.getDefault().getTime()`. 请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T03:51:23.737

请尝试以下获取 EST TimeZone 的时间：

```
TimeZone est = TimeZone.getTimeZone("America/New_York");
Calendar calendar = new GregorianCalendar(est);
System.out.println(calendar.getTime());     //<-prints the date
System.out.println(calendar.getTimeInMillis()); //<-prints the time in milliseconds 
```

您可以将时区更改为其他时区，例如 PST 以获取其他时区的时间：

```
TimeZone pst = TimeZone.getTimeZone("America/Los_Angeles");
calendar.setTimeZone(pst);
System.out.println(calendar.getTime());      //<-prints the date
System.out.println(calendar.getTimeInMillis()); //<-prints the time in milliseconds 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T03:24:12.667

```
Date theCurrentDateAndTime = new GregorianCalendar(timeZone).getTime(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T04:02:24.300

[TimeZone](http://docs.oracle.com/javase/6/docs/api/java/util/TimeZone.html)是一个抽象类，代表时区而不是时间。正如您所提到的，您正在调用 getDefault()，`TimeZone.getDefault()`通过使用 getDefault()，您将获得基于程序运行位置的时区。

如果您只想打印日期，那么您可以使用[日历](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)或[日期](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html)等选项， 或者如果您希望使用时区特定时间移动，则设置时区并获取该区域的时间。

**您的程序**将以这种方式打印日期（这不仅是这种方式）：

```
 TimeZone defaultTimezone = TimeZone.getDefault();
    Calendar calendar = new GregorianCalendar(defaultTimezone);
    System.out.println(calendar.getTime()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T03:21:28.123

TimeZone 类表示时区而不是时间。您将不得不暂时使用 the[`Date`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)或[`Calendar`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)class 。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T03:23:22.943

您需要使用任一`Date`（或）`Calendar`API 来获取今天的日期/时间。

这些 API 使用系统中配置的默认时区。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-15T03:23:30.010

你没有。

[时区的 Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/TimeZone.html)。您会注意到这与当前时间无关。

查看[日历](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-23T00:51:04.350

# ios - Lack of understanding crash report

> ID：12888844
> 
> 赞同：1
> 
> 时间：2012-10-15T03:19:53.653
> 
> 标签：ios, objective-c, ios6

I have this crash report.

```
Incident Identifier: CA9E350A-C842-4349-AAD8-E9E62E93BDD1
CrashReporter Key:   360bc129d2f79a48e291eb5ca38b24e822ed5b6b
Hardware Model:      xxx
Process:         OrientalDailyiOS [1502]
Path:            /var/mobile/Applications/39480A57-68FF-4C46-8445-340EFE204119/OrientalDailyiOS.app/OrientalDailyiOS
Identifier:      OrientalDailyiOS
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-10-14 15:49:10.884 -0700
OS Version:      iOS 6.0 (10A403)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x37a0a29e __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x34e3197a objc_exception_throw + 26
2   CoreFoundation                  0x37955b70 -[__NSArrayM objectAtIndex:] + 160
3   OrientalDailyiOS                0x00064fdc -[Main_NewsDetail viewDidLoad] (Main_NewsDetail.m:43)
4   UIKit                           0x386cb590 -[UIViewController loadViewIfRequired] + 360
5   UIKit                           0x38757336 -[UIViewController shouldAutorotate] + 22
6   UIKit                           0x38798cd4 -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] + 1540
7   UIKit                           0x38797fca -[UIViewController presentViewController:withTransition:completion:] + 3390
8   UIKit                           0x388ba252 -[UIViewController presentModalViewController:animated:] + 26
9   Foundation                      0x34364a6a __NSFireDelayedPerform + 446
10  CoreFoundation                  0x379df5da __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 10
11  CoreFoundation                  0x379df28c __CFRunLoopDoTimer + 268
12  CoreFoundation                  0x379ddefc __CFRunLoopRun + 1228
13  CoreFoundation                  0x37950eb8 0x37948000 + 36536
14  CoreFoundation                  0x37950d44 CFRunLoopRunInMode + 100
15  GraphicsServices                0x373e32e6 GSEventRunModal + 70
16  UIKit                           0x387002fc 0x386a9000 + 357116
17  OrientalDailyiOS                0x0005fac2 main (main.m:16)
18  OrientalDailyiOS                0x0005fa84 0x5e000 + 6788 
```

However, I couldn't know where is error, I play around with my apps but show no error.

I also tried iOS 6 with iPad, no problem.

what apple feedback was

```
We found that your app crashed on iPad running iOS 6, which is not in compliance with the App Store Review Guidelines.

Your app crashed on both Wi-Fi and cellular networks when we:

1\. Launch the app.
2\. Tap any item on main page.
3\. App crashes. 
```

**Update**

```
Main_NewDetails

- (void)viewDidLoad
{
[super viewDidLoad];
[slider setHidden:YES];
DatabaseAction *getnews = [[[DatabaseAction alloc] init] autorelease];
self.singlenews = [getnews retrieveSingleNews:newsid];
self.defaultsize = [getnews retrieveFont];
font = [self.defaultsize objectAtIndex:0];
currentsize = font.Font_Size;
News *new = [self.singlenews objectAtIndex:0];
if(self.catsid != 10)
    self.header.text = new.News_Cat_Name;
else
    self.header.text = @"評論";
self.title.text = new.News_Title;
authortext = new.News_Author;
self.content.text = [NSString stringWithFormat: @"%@%@", new.News_IntroText,  new.News_FullText];
self.introtext = new.News_IntroText;
self.content.font = [UIFont systemFontOfSize:currentsize];
self.date.text = new.News_ArticalDate;
self.commentno.text = @"留言: 0";
imagepath = new.News_ImagePath;
onetime = YES;

if([Constant_Config NetworkStatus]){
    if(![imagepath isEqualToString:@"no picture"]){
        NSOperationQueue *queue = [NSOperationQueue new];
        NSInvocationOperation *operation = [[NSInvocationOperation alloc]
                                            initWithTarget:self
                                            selector:@selector(loadImage)
                                            object:nil];
        [queue addOperation:operation];
        [operation release];
    }

    NetworkHandler *networkHandler=[[NetworkHandler alloc] init];
    GetTotalCommentsRequest *gettotalcomments= [[GetTotalCommentsRequest alloc] init:newsid];

    [networkHandler setDelegate:self];
    [networkHandler request:gettotalcomments];
    [gettotalcomments release];
    [networkHandler release];

    [self.scrollView addSubview:[self addbanner]];
    [self.scrollView addSubview:[self addbanner]];
}

[self setlabelXY];

AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
[appDelegate openSessionWithAllowLoginUI:NO];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:34:11.773

What you're looking at is a stack trace, the path the program goes through your code. Each line is a function, starting at the main run loop (18) and ending at the crash (0).

The most useful parts are the functions that you have created in your app `OrientalDailyiOS` at frame 3\.

Your app is crashing trying to access an object in an NSArray (frame 2) inside your `Main_NewsDetail viewDidLoad]` method (frame 3).

**Edit**

As I said, your app is crashing trying to access an object in an NSArray. Take a closer look at your application specifically the two lines in your `viewDidLoad` method that use the method that's crashing above `objectAtIndex:`.

```
font = [self.defaultsize objectAtIndex:0];

News *new = [self.singlenews objectAtIndex:0]; 
```

How are you populating `self.singlenews` ? What is the case were it could have no objects?

# c - 使用指针而不是数组

> ID：12888845
> 
> 赞同：0
> 
> 时间：2012-10-15T03:20:06.710
> 
> 标签：c, pointers

几周前我使用数组编写了这个程序，现在我需要使用指针而不是数组。我不完全确定如何去做，所以任何提示将不胜感激！谢谢！:D

这是代码：

```
#include <stdio.h>

int showArray(int row);
int exchangeRow(int row1, int row2);

int x, y;
int array[10][10];
int j;
int k;
int inputrow;
int inputcolumn;
int scanrow;
int temp;
int row1;
int row2;

int main() {

    // Initialize array
    for(j = 0; j < 10; j++) {
          printf("\n");
          for(k = 0; k < 10; k++) {
                array[j][k] = j * 10 + k;
                printf("%d ", array[j][k]);
          }
    }
    printf("\n \n");

    // Print out selected row
    printf("Type in a number for the corresponding row to be printed \n");
    scanf("%d", &inputrow);
    if(inputrow >= 0 && inputrow < 10) {
             for(j = 0; j < 10; j++) {
                   printf("%d ", array[inputrow][j]);
             }
    }
    printf("\n \n");

    //Print out selected column
    printf("Type in a number for the corresponding column to be printed \n");
    scanf("%d", &inputcolumn);
    if(inputcolumn >= 0 && inputcolumn < 10) {
             for(j = 0; j < 10; j++) {
                   printf("%d ", array[j][inputcolumn]);
             }
    }
    printf("\n \n");

    printf("Type in a number for the row that method showArray will print \n");
    scanf("%d", &scanrow);
    showArray(scanrow);
    printf("\n \n");

    printf("Type in two numbers for the rows that method exchangeRow will switch \n");
    scanf("%d %d", &row1, &row2);
    exchangeRow(row1, row2);
    printf("\n \n");

    system("PAUSE");
}

int showArray(int row) {
    for(j = 0; j < 10; j++) {
           printf("%d ", array[row][j]);
     }
}

int exchangeRow(int row1, int row2) {
    if(row1 >= 0 && row1 < 10 && row2 >= 0 && row2 < 10) {
           temp = row1;
           row1 = row2;
           row2 = temp;
           printf("The first row now holds the values: ");
           showArray(row1);
           printf("\n");
           printf("The second row now holds the values: ");
           showArray(row2);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T03:37:52.253

我认为你的意思是“使用动态内存分配”......

很多人动态做二维数组的方式是这样的：

```
const size_t nrows = 10, ncols = 10;

int **array = malloc( nrows * sizeof(int*) );
for( i = 0; i < nrows; i++ ) {
    array[i] = malloc( ncols * sizeof(int) );
} 
```

但我讨厌这个。如果您正在编写生产代码，这可能会非常慢。处理内存不足的情况也更难处理，并且无法保证数组的位置。另外，免费是很难看的：

```
for( i = 0; i < nrows; i++ ) free(array[i]);
free(array); 
```

在内存中，您的静态`array[10][10]`是一个连续的块。所以你应该这样做：

```
int **array = malloc( nrows * sizeof(int*) );
array[0] = malloc( nrows * ncols * sizeof(int) );
for( i = 1; i < nrows; i++ ) {
    array[i] = array[i-1] + ncols;
} 
```

要释放它：

```
free(array[0]);
free(array); 
```

我经常更进一步，做一个内存分配而不是两个。这样我只有一个指针。但我不会在这里这样做。你必须有点注意对齐，代码有点混乱。这是您通常不需要的优化。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T03:43:59.227

更具体地说，您需要使用*指针表示法*而不是*数组表示法*

这可能意味着您的二维数组应分配为指针数组。此外，应该使用指针而不是通常的数组索引来访问它的各个元素。

例如

```
int * a = malloc(10 * sizeof(int)); // allocate memory for 10 integers
*a = 1;        // assign first element of array
*(a+1) = 2;    // assign second 
```

以上是一维数组。将其扩展到原始程序中的多个维度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T03:36:24.810

当您声明一个数组时，例如`int arr[4];`，`arr`实际上“指向”内存中的一个位置，其中有 4 个“空格”，每个“空格”都包含一个整数。

`&arr`意思是“地址” `arr`。

因此，指向 arr 的指针可以定义为：

```
int *ptr = &arr[0]; 
```

但是您将如何获得指向的*数据呢？*`ptr`答案是：

```
*ptr; 
```

但是，这只会向您显示存储在`arr`占用的第一个“空间”中的数据的第一个值。要获取数组中的其他内容，您需要做的就是沿着内存空间递增指针，如下所示：

```
ptr++; 
```

更多信息可以在这里找到：http: [//alumni.cs.ucr.edu/~pdiloren/C++_Pointers/neighbor.htm](http://alumni.cs.ucr.edu/~pdiloren/C++_Pointers/neighbor.htm)

# regex - ORACLE SQLLoader 中的 REGEXP_REPLACE

> ID：12888847
> 
> 赞同：1
> 
> 时间：2012-10-15T03:20:21.713
> 
> 标签：regex, oracle, sql-loader

在通过 SqlLoader 存储数据之前，有人可以帮助我使用 regexp_replace 替换文本文件中的值吗？

我的文本文件：

```
Andy     0001231231231
Bobby    0000032132132122
Charles  0000456456456 
```

DB中的预期结果是：

```
NAME     | PHONE
---------------------
Andy     | 1231231231
Bobby    | 32132132122
Charles  | 456456456 
```

这是我的 sqlLoader 文件：

```
PHONE POSITION(10:45) NULLIF PHONE=BLANKS "REGEXP_REPLACE(:PHONE, '^0+([^0]\d+)$','\1')", 
```

但是，我仍然得到这样的结果：

```
NAME     | PHONE
---------------------
Andy     | 0001231231231
Bobby    | 0000032132132122
Charles  | 0000456456456 
```

我的 SqlLoader 文件有什么问题？

谢谢

法扎尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:30:20.917

我忘记添加`\`每个`\`. 最后结果如我所料。

# java - Java 大整数

> ID：12888848
> 
> 赞同：3
> 
> 时间：2012-10-15T03:20:29.950
> 
> 标签：java, biginteger

> **可能的重复：**
> [BigInteger 的难度](https://stackoverflow.com/questions/10780209/diffucilty-with-biginteger)

```
import java.math.BigInteger;  
public class KillerCode{  
    public static void main(String[]args){  
        BigInteger sum=null;  
        for(int i=1;i<=1000;i++){        
            sum=sum+Math.pow(i, i);  
            System.out.println(sum);     
        }    
    }  
} 
```

当我尝试运行此代码时，出现以下错误消息。

> 对于参数类型 BigInteger,double，运算符 + 未定义。

我该如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T03:22:46.333

您不能将典型的数学运算符与 BigIntegers 一起使用，请在此处查看[http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)

你需要使用`BigInteger.add(your numbers here)`

进一步说明，

```
sum = sum.add(new BigInteger(i).pow(i)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T03:25:20.397

您不能这样做，因为*sum*不是整数，而是对对象的引用。

与 C++ 不同，java 不允许运算符重载，因此您需要使用类方法来执行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T04:39:08.573

1.  初始化`sum`为有意义的 NON-`null`值（您当前初始化为`null`）：

    ```
    BigInteger sum = BigInteger.ZERO; 
    ```

    否则表达式

    ```
    sum = sum.add(...) 
    ```

    没有意义（除非你*想要*a `NullPointerException`）。

2.  使用静态工厂`BigInteger.valueOf(long)`将整数值映射到`BigInteger`.

    不要使用表达式`new BigInteger(i)`。`new BigInteger(i)`由is调用的构造函数`BigInteger(byte[])`，对于大于 255 的值（您拥有的值...）会产生错误的结果（出于您的目的）。

3.  用于`BigInteger.add(BigInteger)`添加。

4.  使用`BigInteger.pow(int)`代替`Math.pow(int,int)`; 由于您正在执行（大）整数运算，请避免将您的工作映射到浮点世界的任何事情，即`double`or `float`，否则您将失去`BigInteger`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T03:23:19.433

BigInteger 没有`+`定义运算符。根据其[在此处找到的 javadocs](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html#add%28java.math.BigInteger%29)，您可以使用 .add() 函数来实现您正在寻找的结果。

# .net - UnauthorizedAccessException 设置目录安全

> ID：12888850
> 
> 赞同：1
> 
> 时间：2012-10-15T03:20:49.777
> 
> 标签：.net

我有一个应用程序，我希望用户能够将 SQL/Server 备份到他们的主目录。由于 SQL 在网络服务帐户下运行，因此在尝试备份时会出现文件系统权限错误。我尝试了以下代码和一些变体来尝试完全控制网络帐户：

```
Public Sub GiveFolderNetworkAccess(FilePath As String)
    Dim SID As SecurityIdentifier = New SecurityIdentifier(WellKnownSidType.NetworkServiceSid, Nothing)
    Dim FolderInfo As IO.DirectoryInfo = New IO.DirectoryInfo(FilePath)
    Dim FolderAcl As New DirectorySecurity
    FolderAcl.AddAccessRule(New FileSystemAccessRule(SID, FileSystemRights.FullControl, InheritanceFlags.ContainerInherit Or InheritanceFlags.ObjectInherit, PropagationFlags.None, AccessControlType.Allow))
    FolderInfo.SetAccessControl(FolderAcl) 
End Sub 
```

但是，在调用 FolderInfo.SetAccessControl 时出现 System.UnauthorizedAccessException 异常。我还在非 Windows 路径上尝试了代码，用户可以完全控制并获得相同的结果。任何想法表示赞赏，我目前正在 Windows 7 和 .NET Framework 4 下进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:12:59.887

非常感谢 OwerFlov 的建议，即即使用户对文件夹具有权限，设置文件夹权限也需要提升权限，事实证明确实如此。对于特定的应用程序，我决定使用具有适当权限的 InstallShield 创建一个备份目录，然后将 SQL/Server 备份文件复制到最终目的地。我使用了压缩，所以无论如何都需要额外的文件访问。

从那以后，我有机会进一步研究并发现更改特定文件的访问权限不需要提升。对于任何类似的未来要求，我编写了以下代码，该代码创建一个空文件，并授予网络服务帐户完全控制权限：

```
Public Sub CreateFileWithNetworkAccess(fileName As String)
    File.Create(fileName).Dispose()
    Dim SID As SecurityIdentifier = New SecurityIdentifier(WellKnownSidType.NetworkServiceSid, Nothing)
    Dim fSecurity As FileSecurity = File.GetAccessControl(fileName)
    Dim accessRule As FileSystemAccessRule = New FileSystemAccessRule(SID, FileSystemRights.FullControl, AccessControlType.Allow)
    fSecurity.AddAccessRule(accessRule)
    File.SetAccessControl(fileName, fSecurity)
End Sub 
```

做一些测试 SQL/Server 将成功地用备份集覆盖一个空文件。

# image - 在 CruiseControl.NET 仪表板中显示图像

> ID：12888852
> 
> 赞同：1
> 
> 时间：2012-10-15T03:20:55.103
> 
> 标签：image, cruisecontrol.net, dashboard, ndepend

我试图显示在 CruiseControl.NET 上运行 NDepend 的结果。这包括 VisualNDepend、Abstractness vs Instability 等图像。但是，我无法在 CruiseControl.NET 仪表板上显示这些结果。关于如何进行的任何建议？

# java - 从客户端接收空行

> ID：12888856
> 
> 赞同：1
> 
> 时间：2012-10-15T03:21:18.783
> 
> 标签：java, c++, networking

我有一个 C++ 客户端和一个 Java 服务器。我只是想从客户端发送一个字符串“Test”。这是我的相关JAVA代码，

```
Socket clientSocket = serverSocket.accept();
            BufferedReader reader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
            String line = "";
            while((reader.readLine()) != null) {
                System.out.println("Recieved Something. " + line.length());
                System.out.println(line);
            } 
```

这是我的输出（收到的东西后有一个空行）

```
Recieved Something. 0

Recieved Something. 0 
```

还有 C++ 代码（不完全确定你们需要什么，因为我是 C++ 新手

```
 SOCKET Socket = socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);

    if(Socket==INVALID_SOCKET)
    {
        printf("Winsock error - Socket creation Failed!\r\n");
        WSACleanup();
        return 0;
    }

    struct hostent *host;
    if((host=gethostbyname("localhost"))==NULL)
    {
        printf("Failed to resolve hostname.\r\n");
        WSACleanup();
        return 0;
    }

    SOCKADDR_IN SockAddr;
    SockAddr.sin_port= htons(2501);
    SockAddr.sin_family= AF_INET;
    SockAddr.sin_addr.s_addr= *((unsigned long*)host->h_addr);

    if(connect(Socket,(SOCKADDR*)(&SockAddr),sizeof(SockAddr))!=0)
    {
        printf("Failed to establish connection with server\r\n");
        WSACleanup();
        return 0;
    }
   string toSend = "Test\n";
    send(Socket,toSend.c_str(), strlen(toSend.c_str()), 0); 
```

那么为什么我没有收到测试字符串？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T03:23:02.587

您需要为行变量分配一些值。

采用

```
 while((line = reader.readLine()) != null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:23:20.577

你不保存`readLine`任何地方的结果。您可能希望将其分配给`line`变量。

# sql - 海量记录的数据库更新查询

> ID：12888864
> 
> 赞同：1
> 
> 时间：2012-10-15T03:21:42.950
> 
> 标签：sql, oracle

我们在表中有大约 20,80,000 条记录。我们需要向它添加新列，我们添加了它。

由于这个新列需要是主键，我们想用序列更新所有行这是查询

```
BEGIN
FOR loop_counter IN 1 .. 211 LOOP
update user_char set id = USER_CHAR__ID_SEQ.nextval where user_char.id is null and rownum<100000;
commit;
END LOOP;
end; 
```

但它现在几乎 1 天完成。查询仍在运行。注意：我不是数据库开发人员/程序员。

这个查询或任何其他查询解决方案（快速）做同样的工作有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:30:36.140

首先，似乎没有任何理由在这里使用 PL/SQL。简单地发出一条 SQL 语句来更新每一行会更有效

```
UPDATE user_char
   SET id = USER_CHAR__ID_SEQ.nextval
 WHERE id IS NULL; 
```

根据情况，创建新表并将数据从旧表移动到新表以避免行迁移也可能更有效，即

```
ALTER TABLE user_char
  RENAME TO user_char_old;

CREATE TABLE user_char
AS
SELECT USER_CHAR__ID_SEQ.nextval, <<list of other columns>>
  FROM user_char;

<<Build indexes on user_char>>
<<Drop and recreate any foreign key constraints involving user_char>> 
```

`CREATE TABLE`如果这是一个大表，您可以在语句中使用并行性。使用 200 万行的小表从并行性中获得很多好处并不明显，但这可能会缩短操作几秒钟的时间。

其次，如果仅仅更新 200 万行就需要一天的时间，那么肯定还有其他事情发生。如今，一个 200 万行的表非常小——我可以在几秒钟到几分钟的时间内在我的笔记本电脑上填充和更新一个 200 万行的表。这张桌子上有触发器吗？有外键吗？是否有其他会话更新行？查询在等待什么？

# javascript - JavaScript 不会在任何浏览器上加载

> ID：12888867
> 
> 赞同：0
> 
> 时间：2012-10-15T03:22:01.773
> 
> 标签：javascript

[http://jsfiddle.net/LThhd/8/](http://jsfiddle.net/LThhd/8/)

这是源代码，老实说，我不知道为什么它不会加载:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:29:45.080

看起来您需要添加`http://`到您的网址导入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:35:55.423

此行导致错误，因为`restart()`未在全局范围内定义：

```
setInterval('restart()', EVENT_RESTART_INTERVALL); 
```

在你的 jsFiddle 中，你所有的 javascript 都在`onload()`处理函数中，所以你的函数都不是全局的。您需要使重新启动函数成为真正的全局函数，以便`setInterval()`可以在顶层找到它，或者您需要更改为函数引用并`restart()`在 setInterval 行可以看到的某个范围内定义：

```
setInterval(restart, EVENT_RESTART_INTERVALL); 
```

仅供参考，这就是为什么将字符串传递给`setInterval()`. 函数引用更容易控制，因为它们可以在范围内的任何地方——不必只是全局函数。

# jquery - 更新 JScript Intellisense 时出错 - 由 MapQuest Javascript API 引起

> ID：12888868
> 
> 赞同：0
> 
> 时间：2012-10-15T03:22:02.070
> 
> 标签：jquery, asp.net, visual-studio-2008, intellisense, mapquest

我正在尝试让 jQuery Intellisense 为我的 ASP.NET 网站（注意，不是网络应用程序）项目工作。下面是引用脚本的地方。页面上的其他任何地方都没有 Javascript。- 这是一个测试页面，所以它只有几个`asp:labels`.

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
    <link rel="stylesheet" type="text/css" href="StyleSheets/StyleSheet.css" />
    <script type="text/javascript" src="Scripts/jquery-1.7.1.min.js"></script>
    <% If (False) Then%>
        <script type="text/javascript" src="Scripts/jquery-1.7.1.min-vsdoc.js"></script>
    <% End If%>
    <script type="text/javascript" src="http://open.mapquestapi.com/sdk/js/v7.0.s/mqa.toolkit.js"></script>
</asp:Content> 
```

这是我从 Visual Studio 得到的错误：

```
Warning 25  Error updating JScript IntelliSense: C:\Users\spaton\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.IE5\HPBD331X\mqa.toolkit-fds90[2]..js: 'document.implementation' is null or not an object @ 23:99602 
```

如果我删除引用 MapQuest API 的行，Intellisense 对 jQuery 工作正常。

我忍不住想我错过了一些简单/愚蠢的东西，但我看不到它。

安装了 Visual Studio 2008 SP1 和 KB958502。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:59:48.597

我设法解决了这个问题。没有完全“解决”，但我使用 ASP.NET 功能来解决问题。

我所做的是从 ASPX 标记中删除引用 MapquestAPI 的行：

```
<script type="text/javascript" src="http://open.mapquestapi.com/sdk/js/v7.0.s/mqa.toolkit.js"></script> 
```

然后我`ScriptManager`为我添加了它。

```
Dim mapQuestAPI As String = "<script type=""text/javascript"" src=""http://open.mapquestapi.com/sdk/js/v7.0.s/mqa.toolkit.js""></script>"
ScriptManager.RegisterStartupScript(Me, Me.GetType(), "MapQuestAPI", mapQuestAPI, False) 
```

不漂亮，但最终结果是页面仍然可以工作，现在 JQuery Intellisense 也可以在 Visual Studio 2008 中工作。

# java - 我需要一些东西来在自己的虚拟环境（Chrome）中自动执行网络浏览器任务

> ID：12888887
> 
> 赞同：1
> 
> 时间：2012-10-15T03:24:33.797
> 
> 标签：java, browser, automation

自从我开始学习 java 以来，我想创建一种方法来自动化几个网站上的一些操作，

例如，[topline](https://www.jointopline.com/?fid=MG5N25TYHV24)是一个网站，它用自己的广告替换您的所有广告并为此支付一些钱，我想模拟只是在网上冲浪的行为，然后开始模拟特定的任务，例如单击某些按钮或播放 Flash游戏（实际上是通过使用图像识别来玩游戏），这必须用 java 编写，因为我想在树莓派上运行它。

任何帮助表示赞赏，有我可以使用的课程吗？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T04:53:10.720

Selenium 是一个很好的浏览器自动化工具。参考[http://seleniumhq.org/](http://seleniumhq.org/)

您可以在 Google 上获取更多信息。如果您在寻找资源方面需要帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:36:23.497

检查类[Robot](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)，它将帮助您模拟鼠标与屏幕的交互，但是您必须实现图像识别

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T04:12:19.150

虽然我不能为您指出一个 JAVA 解决方案，但我想推荐两个非常有趣的工具：[PhantomJS](http://phantomjs.org/download.html)和[CasperJS](http://casperjs.org/installation.html)。后者依赖于前者，有了它们，浏览器导航脚本和测试变得轻而易举。

它们都可以在 Linux、MAC OS 和 Windows 上运行，并且与 Javascript 一样多平台。自然，它会在您的 Raspberry Pi 中正常工作。

# jsp - JSTL 1.2 在 Weblogic 10.3.5 上不能很好地工作

> ID：12888892
> 
> 赞同：0
> 
> 时间：2012-10-15T03:25:23.017
> 
> 标签：jsp, jakarta-ee, web-applications, jstl, weblogic-10.x

JSTL 1.2 核心标签在我的 Weblogic 10.3.5 上不能很好地工作，但使用 JSTL 1.0 就可以了。以下是行为：

JSP：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core"%>
<c:out value="${1+2}"/> 
```

输出：3

如果我将 URI 更改为`http://java.sun.com/jsp/jstl/core`，则输出将为 "${1+2}" ，就像直接将表达式打印为字符串一样。在这两种情况下，我都没有收到任何错误/异常。以下是我的设置：

网页.xml：

```
<web-app 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5"> 
```

一个jar文件“glassfish.jstl_1.2.0.1.jar”放在/WEB-INF/lib/下。

非常感谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:39:21.893

尝试在您的 jsp 页面顶部添加它。

`<%@ page isELIgnored="false" %>`

# android - getDefaultSensor(Sensor.TYPE_ACCELEROMETER).getMaximumRange()

> ID：12888894
> 
> 赞同：1
> 
> 时间：2012-10-15T03:26:10.027
> 
> 标签：android, sensors, android-sensors, sensormanager, sensor-fusion

如果我打电话

```
SensorManager mgr = (SensorManager) this.getSystemService(SENSOR_SERVICE);
String text = "The maximum G Force that this device can detect is: " + mgr.getDefaultSensor(Sensor.TYPE_ACCELEROMETER).getMaximumRange(); 
```

我得到 19.X m/s^2。现在是在每个轴上吗？

我的意思是，如果我想将 G-Force 应用于手机，我可以这样做：G-Force = SQRT(Xvalue^2 + Yvalue^2 + Zvalue^2) / 9.80 m/s^2

该值是否意味着：最大 G 力 = SQRT (19^2 + 19^2 + 19^2) = 33/9.80 = 3.3G？

是不是太慢了？我错过了什么吗？或者有什么技巧可以让价值更高吗？提前致谢。吉列尔莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:52:26.260

我相信你的计算是正确的。

这是一个适合检测设备上需要检测的大多数事物的范围。一些设备具有大范围和粗分辨率，而其他设备具有小范围和精细分辨率。

传感器的 G-Force 范围由使用的芯片和驱动程序设置的模式决定。不幸的是，没有办法增加给定设备的范围。

# unix - 使用 SCP 将文件从 Windows 传输到 Mac

> ID：12888897
> 
> 赞同：-1
> 
> 时间：2012-10-15T03:26:47.560
> 
> 标签：unix, sftp, file-transfer, scp

我正在尝试编写一个从 mac 执行的脚本，它将 4 个文件从 windows 机器下载到我的当前目录。我尝试使用 scp 下载这些文件，但每当我尝试连接到主机时，我都会收到“操作超时 - 连接丢失”消息。经过一番研究，我发现我需要在 windows 机器上安装一个 ssh daemon 工具才能完成连接。我安装了 FreeSSHd 并再次尝试使用 scp，但没有成功。我也试过关闭我的windows防火墙，但也没有用。

有谁知道我为什么会超时？为了能够从连接到 Windows 机器的 unix 机器（mac）使用 scp，我需要遵循哪些步骤？

PS：有没有可能我没有使用正确的IP地址连接到主机？我问是因为我也在mac上尝试过“ping XXX.XXX.XXX.XXX”，我收到了超时消息

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T04:05:14.483

从您的 PS 看来，您的问题很明显。由于您甚至无法从 MAC 主机 ping Windows 机器（并且假设 ICMP 数据包没有被过滤），我建议检查您的主机的网络和连接性（如果有网络管理员，他会很有帮助）， 尤其：

*   两台计算机都连接到内部网络或互联网；
*   网络中没有其他防火墙；
*   窗口的主机 IP（`ipconfig`在 windows 主机的命令行中）；

# types - 如何强制调度到现有的多方法实现？

> ID：12888900
> 
> 赞同：4
> 
> 时间：2012-10-15T03:27:03.480
> 
> 标签：types, clojure, multimethod

如果我为我的类型声明另一个命名空间（我无法更改的库）ns-a 的多方法：

```
defmethod ns-a/method-a Y [y] 
```

并且在 ns-a 中定义了 X 的现有方法：

```
defmethod method-a X [x] 
```

调度函数是

```
(defmulti method-a type) 
```

如果我的 Y 类型也是 X，我如何在 Y 的实现中分派给 X 的实现？

编辑：我发现了一个黑客：

```
(defmethod ns-a/method-a Y [y]
 (do-special-Y-stuff-here y)
    ; now do X stuff with Y:
    ((get-method ns-a/method-a X) y)
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:55:46.793

如果您在类型或类上进行调度，请考虑修改您的代码以使用[协议](http://clojure.org/protocols)。

**更详细的答案：**

如果还注册了精确的子类型， Clojure`defmulti`不允许您分派到父 Java 类型。[这是故意的（在Liskov 替代原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)辩论中，它站在“最小惊喜”的一边）。由于已经为 Y 注册了多方法，如果您的对象`isa?`恰好是 Y，那么您将点击 Y 的方法——即使它也是一个“X”。在 Java 中，类可以从多个接口继承，它们只能是*一种*类型。这就是你在这里遇到的问题。

根据多方法的[文档](http://clojure.org/multimethods)

> 派生是由 Java 继承（对于类值）或使用 Clojure 的 ad hoc 层次系统的组合确定的。层次系统支持名称（符号或关键字）之间的派生关系，以及类和名称之间的关系。派生函数创建这些关系，并且`isa?`函数测试它们的存在。**注意`isa?`不是`instance?`。**

如果您查看 的源代码`MultiFn`，您会发现 Clojure 总是使用给定的多方法调度值最具体的 Java 类（在类型上调度时）。

请参阅[Clojure 1.4.0 源代码中的这一行，`MultiFn`](https://github.com/clojure/clojure/blob/clojure-1.4.0/src/jvm/clojure/lang/MultiFn.java#L133)特别是`dominates`.

在 REPL：

```
user=> (defmulti foo #(class %))
user=> (defmethod foo java.util.RandomAccess [x] "RandomAccess")
user=> (defmethod foo java.util.Vector [x] "Vector")
user=> (defmethod foo java.util.Stack [x] "Stack") 
```

好的，这按预期工作，并且`prefer-method`不能覆盖类层次结构，因为`isa?`首先检查 Java 类型。

```
user=> (prefer-method foo java.util.RandomAccess java.util.Stack)
user=> (foo (new java.util.Stack))
"Stack" 
```

最后，在源代码中检查`MultiFn`与调度值类型匹配的所有方法键（按`isa?`）。如果找到多个匹配项，它会检查类型层次结构中的“支配”值。我们在这里看到`Stack`占主导地位的`RandomAccess`

```
user=> (isa? java.util.Stack java.util.RandomAccess)
true
user=> (isa? java.util.RandomAccess java.util.Stack)
false 
```

现在，如果我定义一个新方法`bar`如下：

```
user=> (defmulti bar #(class %))
user=> (defmethod bar Comparable [x] "Comparable")
user=> (defmethod bar java.io.Serializable [x] "Serializable") 
```

由于模棱两可，我得到以下信息：

```
user=> (bar 1)
IllegalArgumentException Multiple methods in multimethod 'bar' match dispatch value: class java.lang.Long -> interface java.lang.Comparable and interface java.io.Serializable, and neither is preferred  clojure.lang.MultiFn.findAndCacheBestMethod (MultiFn.java:136) 
```

现在，我可以解决这个问题`prefer-method`

```
user=> (prefer-method bar Comparable java.io.Serializable)
user=> (bar 1)
"Comparable" 
```

但是，如果我为`Long`

```
user=> (defmethod bar Long [x] "Long")
user=> (bar 1)
"Long" 
```

`Comparable`即使我使用，我也无法返回`prefer-method`：

```
user=> (prefer-method bar Comparable Long)
user=> (bar 1)
"Long" 
```

这似乎是你在这里遇到的。

请注意，您可以选择`remove-method`- 但我认为与您设计的“黑客”相比，这是一个更重量级/更危险（猴子补丁？）的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T16:59:01.307

这应该可以使用`prefer-method`（[doc](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/prefer-method)）：

> 用法：（首选方法multifn dispatch-val-x dispatch-val-y）
> 
> 当存在冲突时，使多方法更喜欢 dispatch-val-x 的匹配而不是 dispatch-val-y

在你的情况下，你会说：

```
(prefer-method ns-a/method-a X Y) 
```

这应该会导致为 dispatch-val X in 定义的方法在`ns-a`某事物同时是 X 和 Y 时被调用，并且如果某事物是 Y 而不是 X 则调用你的方法。

**编辑：** 原来`prefer-method`是为了解决调度值不完全匹配的冲突，并且多个父级匹配，没有一个派生另一个。如果方法表中的调度值完全匹配，则始终使用该方法。所以这不会解决 OP 的用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-06T17:19:14.230

来到这里寻找相同问题的惯用解决方案。因为，根据@noahiz 的说法，习惯上不应该这样做，所以我将发布我们当前的解决方法，以供开发人员自行决定使用。只需通过提供对具体方法的访问权限`defn`并将代理提供给`defmulti`.

```
;;price/basic.cljs

(defn get-final-price-impl [{amount :amount}]
  amount) ;;normally this would be a complicated computation we want to keep DRY

(defmulti get-final-price :type)
(defmethod get-final-price :price/price-basic-tag [price-map]
  (get-final-price-impl price-map)) 
```

```
;;price/foreign-currency.cljs

(defmethod price-basic/get-final-price :price/price-foreign-currency-tag
  [price-map]
  (* (price-basic/get-final-price-impl price-map) (:conversion-rate price-map))) 
```

PS 建议覆盖类型并递归调用多方法的评论之一。IE，如果`Y`派生自`X`，则在`ns-a/method-a`Y 内部我们应该这样做`(ns-a/method-a (create-an-X y))`。不要这样做。如果`ns-a/method-a`for X 本身调用其他多方法，则这些方法将被分派给 X 而不是 Y - 可能会出现模糊的逻辑错误。

# php - 通过 url 查询从 mysql 中删除。错误“查询为空”

> ID：12888901
> 
> 赞同：0
> 
> 时间：2012-10-15T03:27:05.590
> 
> 标签：php, mysql

我试图使用这个 url 从数据库中删除一些东西：

```
siteurl.com/mail.php?action=delete&mail_id=10 
```

使用此代码：

```
if ($action == delete) { 
    if(isset($_GET['id'])) { 
        $deleteid = $_GET['id'];
        $sql = "DELETE FROM mail WHERE mail_id = ".$deleteid." LIMIT 1";
        $query = mysql_query($sql);      
        header('Location: '.$_SERVER['HTTP_REFERER'].' ');
        exit(); 
    }
} 
```

但它不起作用，它显示错误：`Query was empty`

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:31:31.473

您`mail_id`在 URL 中使用，但`id`在 PHP 代码中使用。在两个地方都使用相同的，它会起作用的。

但是，这非常重要，您编写的代码存在一个巨大的安全问题，称为 SQL 注入。`mysql_*`函数已被弃用，因此请学习如何使用`mysqli_*`和/或`PDO`取而代之，并将准备好的语句与它们一起使用，这样您受到 SQL 注入攻击的可能性就会大大降低。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T03:29:53.397

你得到动作了吗？您应该获取邮件 ID，而不是获取 ID。

```
$_GET['action']  
$_GET['mail_id'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T03:38:35.600

在您的查询字符串中，您将变量名称传递为，`mail_id`但在检索时您只使用`id`. 您必须使用`mail_id`并且您没有检索`action`变量值。您应该使用`$_GET['action'] == delete`而不是 this `$action == delete`。所以最后你的代码应该是这样的

```
if ($_GET['action'] == delete) { 
    if(isset($_GET['mail_id'])) { 
        $deleteid = $_GET['mail_id'];
        $sql = "DELETE FROM mail WHERE mail_id = ".$deleteid." LIMIT 1";
        $query = mysql_query($sql);      
        header('Location: '.$_SERVER['HTTP_REFERER'].' ');
        exit(); 
    }
} 
```

# sql-server - 如果目标重新启动，则不会发送 Service Broker 消息

> ID：12888906
> 
> 赞同：35
> 
> 时间：2012-10-15T03:27:30.197
> 
> 标签：sql-server, service-broker

在高层次上，这是正在发生的事情：

1.  我们有两个 SQL Server 2008 R2 SP1 系统（Windows NT 6.1 上的标准版（Build 7601：Service Pack 1））它们运行良好，双向通信没有错误或问题。
2.  我们重新启动系统#2，期望在系统#2 不可用时发送给它的任何Service Broker 消息将在系统#1 上排队，直到系统#2 恢复。
3.  系统 #2 重新启动，那里的一切正常启动，没有错误。
4.  在系统 #1 上为系统 #2 排队的消息仍然在排队；他们永远不会被发送。此外，该对话中的新消息也会排队并且永远不会发送。
5.  在新对话中发送的消息传输得很好。

关于从未发送的消息的详细信息：

A. 当系统 #2 关闭时，队列中消息的传输状态显示各种错误，表明它无法与系统 #2 通信，如预期的那样。

B. 系统#2 恢复后不久，这些消息的传输状态变为空白。在此之后，空白状态永远不会改变。

C. 消息堆积的会话处于 CONVERSING/CO 状态。系统视图中没有任何列表明与其他正常工作的队列有任何不同。（如果我能找到任何设置不同的标志，我会知道终止糟糕的对话，但系统没有提供任何线索——除了不断增长的队列深度。）

D. 在系统#2 上永远不会收到消息，因为我的激活存储过程永远不会为这些消息调用。

E. 在 Profiler 中（打开所有 Broker 跟踪类型），良好的对话显示正在记录以下内容：

```
Broker:Conversation CONVERSING  1 - SEND Message        Initiator                                       
Broker:Message Classify 2 - Remote  Initiator
[SQL Batch complete; SQL that caused the SEND to occur]
Broker:Remote Message Acknowledgement   1 - Message with Acknowledgement Sent   Initiator
Broker:Message Classify     1 - Local   Initiator
Broker:Conversation CONVERSING  6 - Received Sequenced Message  Target
Broker:Remote Message Acknowledgement   3 - Message with Acknowledgement Received       Initiator
Broker:Activation       Microsoft SQL Server Service Broker Activation  1 - Start 
```

发送的注定会卡住的消息仅显示这些事件中的前两个：

```
Broker:Conversation CONVERSING  1 - SEND Message    Initiator
Broker:Message Classify 2 - Remote  Initiator 
```

据我所知，这就是这些消息所传得的全部内容。没有迹象表明 SQL Server 会再次尝试传输它们。系统#1 认为对话还不错，但系统#2 完全忘记了。系统#1 似乎永远无法解决这个问题。如果我们随后重新启动系统#1，那么一切都会恢复正常，所有消息都按预期流动。

我认为这些消息实际上已经发送，但是确认并没有返回到系统#1。但我没有看到任何备份确认队列的证据。

我们检查了双方的许多典型问题：

双方都启用了代理。2\. 所有队列都打开，所有适当的东西都启用（入队、接收）。队列没有中毒。3\. 不存在我们所知道的权限问题。4\. 我们没有使用即发即弃。5\. 我们正在重用对话，正如许多人所建议的那样。（事实上​​，对话重用是这里的问题！） 6\. 我们正在捕获 SQL 异常，按照指示使用事务等。 7\. ssbdiagnose 没有返回错误。

当 SQL Server 主机重新启动时，我们预计任何排队的消息最终都会被发送，但事实并非如此。这里发生了什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-12T11:28:07.723

我知道这是一个相当古老的线程，但我之前也遇到过完全相同的情况，在我的情况下，网络配置是罪魁祸首。

出于某种原因，发起者从一个 IP 地址发送了它的消息，但另一个 IP 已打开以接受传入的回复（并且第二个 IP 已在目标的路由中指定）。

我偶然发现了这一点，真的。当我试图在目标端结束对话时，它并没有关闭，但出现了 EndDialog 消息`sys.transmission_queue`，状态为：

> 连接尝试失败并出现错误：'10060（连接尝试失败，因为连接方在一段时间后没有正确响应，或建立连接失败，因为连接的主机没有响应。）'。

我不知道为什么目标重启会引发故障，但是当网络工程师解决了这个问题并且我改变了目标的路线时，一切都按照从一开始就应该到达的目的地。

# python - 用于html内容的python过滤器

> ID：12888908
> 
> 赞同：0
> 
> 时间：2012-10-15T03:27:46.973
> 
> 标签：python

我需要使用 ip 地址来获取内容，例如 ip address = 157.123.22.11 我需要获取组织值 Zenith Data Systems

```
<td>

  Zenith Data Systems</td>

 </tr>

 <tr class="odd">

<th>Organization:</th>

   <td>

      Zenith Data Systems</td>

  </tr>

 </table> 
```

我使用urllib2获取html内容，一些朋友喜欢的代码

```
 import urllib2
 import lxml.html as lh

 req = urllib2.Request("http://www.ip-adress.com/ip_tracer/157.123.22.11", headers={'User-Agent' : "Magic Browser"})
 html = urllib2.urlopen(req).read()
 doc=lh.fromstring(html)
 print ''.join(doc.xpath('.//*[@class="odd"]')[-1].text_content().split()) 
```

但它显示 import lxml.html as lh ImportError: No module named lxml.html。那你能不能给我在网站打印组织名称的解决方案，直接获取网站内容而无需像安装lxml这样的任何新安装，我的Python是2.4.3版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:40:20.033

lxml 不是标准库，所以需要安装。

通过 pip 安装 lxml 更好：

```
pip install lxml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:37:46.327

您需要创建一个继承 HTMLParser.HTMLParser 的类。您还需要实现 handle_starttag、handle_endtag 和 handle_data 方法来解析字符串 HTML。

检查 python 文档以获取详细信息：[HTMLParser 类](http://docs.python.org/library/htmlparser.html)

# mod-rewrite - mod_rewrite 与曾经工作的东西有关

> ID：12888909
> 
> 赞同：1
> 
> 时间：2012-10-15T03:27:52.907
> 
> 标签：mod-rewrite

我有一个虚拟专用服务器，在周末出现故障，并且已经升级。从现在到那时，已经进行了一些影响 mod_rewrite 调用的更改，但我不确定是哪个。

无论如何，我有一个包含模拟 CAS 服务器的 PHP 脚本的文件夹。直到今天，该系统一直运行良好。现在，不是 mod_rewrite 指令通过重写 index.php 文件来提供命令，而是 Apache 转到 '404' 并向我发送一个目录到 Wordpress 的 404 处理程序。

这是曾经工作的 htaccess 代码：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

RewriteEngine On
RewriteRule ^([A-Za-z0-9-]+)/?$ index.php?mode=$1 [QSA, L] 
```

URL 变量出现在适用于 CAS 的命令中（如 cas/login、cas/logout），但现在正在生成 404。

可能有 Apache 调整；我需要向 htaccess 添加任何命令（如选项索引）还是让 Apache 监听重写命令？

奇怪的是， force-https 命令似乎有效。

# flash - 如何为我的 Flash 应用程序创建 .exe 文件

> ID：12888916
> 
> 赞同：1
> 
> 时间：2012-10-15T03:29:02.013
> 
> 标签：flash

我创建了一个游戏，它将一些数据从 xml 文件加载到帧上。现在，我想为使用 adobe cs6 开发的游戏创建一个 .exe 文件，这样我就不需要每次都复制 xml 文件和 swf 文件。谢谢

# objective-c - 没有子类化的事件处理

> ID：12888917
> 
> 赞同：2
> 
> 时间：2012-10-15T03:29:07.137
> 
> 标签：objective-c, xcode, cocoa, appkit

我最近看了一些关于如何在 Objective C 和 Cocoa 中编程的 Lynda 教程。来自 PHP 和 C# 背景的一件事引起了我的注意——事件处理。在我观看教程时，导师正在通过子类化以附加到事件。

他最终讨论了以这种方式创建委托和附加到事件 - 更好，但仍然不像 C# 那样容易。然而，我后来发现并不是所有的东西都有一个委托，这让事情变得*更加*困难。

我一直在 Internet 上搜索一种无需创建子类即可处理事件的方法，这样我就不会得到这个包含大量文件但无济于事的应用程序。

我特别尝试为 NSSlider 对象附加 mouseLeave 或 mouseOut 事件，以便在完成滑动后隐藏标签。

有什么方法可以在不进行任何子类化的情况下附加到事件，或者在子类之后创建子类我应该习惯的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:04:16.360

事件处理有几种方法。就像你说的，子类化可能是最简单的。使用委托是另一种方式。在我看来，往往是最好的。另一种选择是使用块。

在我看来，Objective-C 非常结构化，我更喜欢它而不是 C#。

# node.js - Node.js/Express/Redis 只等待来自频道的一条消息

> ID：12888925
> 
> 赞同：1
> 
> 时间：2012-10-15T03:30:13.183
> 
> 标签：node.js, express, redis

我有一个 redis 连接订阅了一个带有获取请求的频道

```
app.get('/wait', function (req, res) {
    redisSub.on('message', function(channel, msg) {
        console.log('rcv: ' + msg);
    });
}); 
```

后来我用不同的获取请求发送消息

```
app.get('/done/:msg', function (req, res) {
    redisPub.publish('message', req.params.msg);
}); 
```

问题是我希望该请求在收到消息后停止侦听。否则，当我再次通过时，它仍然会在收听并再次收到下一条消息。收到消息后，我不确定如何从自身中删除侦听器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T05:36:52.650

未经测试，但这应该可以工作，

```
var callback = function(channel, msg) {
    console.log('rcv: ' + msg);
    redisSub.removeListener('message', callback); 
}
redisSub.on('message', callback); 
```

# html - 内联块元素仅在 Chrome 中以“em”（表格单元格内）的边距在容器内移动

> ID：12888932
> 
> 赞同：0
> 
> 时间：2012-10-15T03:30:56.020
> 
> 标签：html, css, google-chrome, html-table

我有一个表和 2 列连续。在第一个中，我有一个文本输入，而在另一个中，我有一个容器 div，其中有**em**中的边距和 2 个 inline-block 元素。

在 Firefox、Safari 甚至 Opera 中一切都很好。但是在 Chrome 中，第二个 inline-block 元素被移到了下面。有趣的是，如果我以像素为单位设置容器的边距（左），这不会发生。

这是一个小提琴：http: [//jsfiddle.net/inhan/bttBs/](http://jsfiddle.net/inhan/bttBs/)

这是结构：

```
<table>
    <tr>
        <td><input type="text" /></td>
        <td>
            <div class="buttons">
                <a href="#" class="button reset"><span>Reset</span></a>
                <a href="#" class="button submit"><span>Submit</span></a>
            </div>
        </td>
    </tr>
</table> 
```

这是粗略的 CSS

```
body {
    font-size:0.8em;
    font-family:Arial, Helvetica, sans-serif;
    color:#2E2E2E;
}
table,tbody,tr,td {
    border-spacing:0;
    margin:0;
    padding:0;
}
input[type="text"] {
    width:11em;
    border:1px solid #BBB;
    padding:4px 3px;
    margin:2px;
}
.buttons {margin-left:1em} /* set this to 13px */
a.button {
    text-decoration:none;
    outline:none;
    display:inline-block;
    *display:inline; zoom:1; /* IE 6/7 */
    width:65px;
    height:26px;
    margin:0 1px;
    font-family:'Open Sans';
    font-size:0.9em;
    text-align:center;
    color:#333;
    cursor:pointer;
    border-style:none;
    /* there's a bg image here */
    background-color:lightgray;
}
a.button span {
    display:block;
    margin:4px 0;
} 
```

有人知道那里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:49:02.753

一个可能有用的小建议是使用来自 meyerweb 的 CSS 重置，它可以在 Google 上轻松搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T04:57:43.903

从`class`_`<div class="buttons">`

[jsfiddle.net](http://jsfiddle.net/bttBs/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T02:28:09.190

显然，当我问这个问题时，这是那个版本的 Chrome 的一个错误。该问题不再存在，我提供的小提琴中的布局在 Mac 中 Chrome 的当前版本（23.0.1271.101）中看起来很好。

# java - 如何在Java的for循环中排除零

> ID：12888933
> 
> 赞同：1
> 
> 时间：2012-10-15T03:31:10.853
> 
> 标签：java, nested-loops

我试图在这里使用 != 0; 排除这个嵌套 for 循环中的零。但它什么也没做。我试图在滚动时获得 2 个六面骰子的每个出局的概率。我必须弄清楚它们首先滚动的次数，但是骰子里面没有零，所以我必须排除它。我不明白为什么这不起作用。

```
for( die2 = 0; die2 <= 6 && die2 != 0; die2++)
            for( die1 = 0; die1 <= 6 && die1 != 0; die1++)
                System.out.println("Die 2: " + (die2 * userInputValue) + " " + "Die 1: " +       (die1 * userInputValue)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:32:32.473

`1`只是从而不是开始循环`0`

```
for(int die2 = 1; die2 <= 6 ; die2++)
            for(int die1 = 1; die1 <= 6 ; die1++)
                System.out.println("Die 2: " + (die2 * userInputValue) + " " + "Die 1: " +       (die1 * userInputValue)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T03:32:35.953

您应该从 1 开始循环，而不是从 0 开始。

让我们看看您当前的代码：

```
for (die2 = 0; die2 <= 6 && die2 != 0; die2++)
    for (die1 = 0; die1 <= 6 && die1 != 0; die1++)
        // Do something 
```

你为什么不点击做某事？这段代码相当于（*）

```
die2 = 0;
while (die2 <= 6 && die2 != 0) {
    die1 = 0;
    while (die1 <= 6 && die1 != 0) {
        // Do something
        die1++;
    }
    die2++;
} 
```

请注意，第一个条件检查是否`die2`为 0，但在进入循环`die2`时*始终*为 0，因为这是您设置的。相反，您应该使用

```
for (die2 = 1; die2 <= 6; die2++)
    for (die1 = 1; die1 <= 6; die1++)
        // Do something 
```

这将跳过 0 因为你从来没有设置`die2`或`die1`首先设置为 0。

* * *

(*) while 循环的这种重写并不*完全*等同于 for 循环，因为这种重写不会保留`continue`语句的语义，但是您的代码没有使用 continue，所以在这种情况下它等同于原始.

# perl - CPAN 认为过时的模块是最新的

> ID：12888941
> 
> 赞同：6
> 
> 时间：2012-10-15T03:31:36.553
> 
> 标签：perl, cpan

```
$ sudo cpanm Heap::Priority
Heap::Priority is up to date. (0.01) 
```

当前版本是 0.11。我是 CPAN 的新手，所以我真的很沮丧。出了什么问题，我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-15T03:42:50.623

0.11 是未经授权的发布，由未被指定为 Heap::Priority 所有者允许的人上传的 CPAN。要安装 alpha/beta 或未经授权的版本，您需要明确指定作者和完整的发行版名称/版本：

```
cpanm FWOJCIK/Heap-Priority-0.11 
```

更新：我认为您也需要包含 .tar.gz （或其他扩展名），但是当我尝试它时，它没有；这可能因 perl/cpanm 版本而异？

# ftp - 本地和远程保存文件

> ID：12888942
> 
> 赞同：0
> 
> 时间：2012-10-15T03:31:39.807
> 
> 标签：ftp

我搜索了答案，但我的文件似乎没有在本地和远程保存。我从我的电脑（本地）导入了一个项目，并建立了一个到我的站点的 ftp 连接（远程）。我能够将文件下载并上传到服务器，但它们没有保存在本地？我确实在两个目录中都选择了同步。基本上我想做的是在本地（使用 XAMP）和远程开发 WordPress 网站——上传保存的文件。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:41:46.057

编辑器中有一个功能可以将文件保存在本地以及通过 ftp 保存在远程位置。你的编辑呢？

# jquery - rubyonrails网站上的jquery mobile photoswipe

> ID：12888943
> 
> 赞同：0
> 
> 时间：2012-10-15T03:31:44.517
> 
> 标签：jquery, ruby-on-rails, ruby, jquery-mobile

我正在 ruby​​onrails 服务器上使用 jquery mobile 设置 photoswipe，由于某种原因，photoswipe 仅在刷新页面后才开始，但是当我将页面的脚本放到普通网站时，它会正常工作。

任何人都可以告诉我如何在不刷新的情况下使其工作：

网站添加： http: [//prod.computersforpeople.info/users/262/properties/47198](http://prod.computersforpeople.info/users/262/properties/47198)

当您单击照片时，它将链接到照片滑动页面，但在您刷新页面之前它不会开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:28:31.107

当它仅在重新加载移动页面后才起作用时，我假设您正在使用 dom-ready 事件来注册照片滑动。

由于 jquery mobile 通过 ajax 加载页面，因此您需要绑定到 pageinit 事件。有关详细信息，请参阅文档：http: [//jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

# python - 什么是 Django 模型中的通用关系

> ID：12888949
> 
> 赞同：1
> 
> 时间：2012-10-15T03:32:44.897
> 
> 标签：python, django

有人写过这个`models.py`

```
documents = generic.GenericRelation(Document) 
```

我想知道它与其他类型（如`ForeignKey`和`OneToMany`字段）有何不同。

我没有看到足够的文档

如果在[这里找到东西](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#django.contrib.contenttypes.generic.GenericRelation)

但即使首先，我也不明白 contentype 做了什么以及为什么要使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T04:20:06.080

想象一下，您的数据库中有各种对象（图像、视频、歌曲等），并且您希望为每个对象添加关键字。但是，您希望有一个关键字表，它将管理所有带有关键字的对象的所有关键字。所以模型看起来像：

```
class Image(models.Model):
    # ...

class Video(models.Model):
    # ...

class Keyword(models.Model):
    keyword = models.CharField(max_length=64) 
```

因此，有了模型，您需要以某种方式将关键字连接到其他对象。为此，您需要使用多对多关系：

```
class KeywordItem(models.Model):
    keyword = models.ForeignKey('Keyword')
    image = models.ForeignKey('Image') 
```

但是这不起作用，因为这只会让您为图像添加关键字，但是您还需要为视频等添加关键字。换句话说，这种方法的问题在于它限制了将关键字链接到特定表，图像表。所以想法不是这样做，而是链接到任何表，然后只需指定要链接到哪个表：

```
class KeywordItem(models.Model):
    keyword = models.ForeignKey('Keyword')
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    object = generic.GenericForeignKey('content_type', 'object_id') 
```

`content_type`指定您要链接到哪个表，并指定您要链接到的`object_id`表中的行的主键是什么。

现在的问题是如何指定要链接到哪个表？一种解决方案是对选择进行硬编码（图像是`1`，视频是`2`等），但这很容易出错，因为必须对其进行维护。事实证明，Django 通过使用[内容类型框架](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/)解决了这个问题。发生的情况是，当您执行 . 时`syncdb`，Django 为您在项目中拥有的每个表/模型分配一个唯一编号。对我来说，更容易将其视为表类型 id（假设为表 id，因为表本身没有 id）。所以这个数字以后可以用来参考具体的表。

然后，如果图像内容类型（表类型 id）是`1`，并且您想将关键字与 pk 链接`7`到具有 pk 的图像`11`，您可以通过以下方式执行此操作：

```
KeywordItem.objects.create(keyword_id=7,
                           content_type_id=1,
                           object_id=11)

# or using Django magic (this automatically figures out the content type):
KeywordItem.objects.create(keyword_id=7,
                           object=Image.objects.get(pk=11)) 
```

希望这能解释一下为什么您可能需要泛型关系的概念。现在为`GenericRelation`. 使用上面的示例，假设您想要访问特定图像的所有关键字。您将不得不执行以下操作：

```
img = Image.object.get(...)
img_type = ContentType.objects.get_for_model(img)
img_keywords = KeywordItem.objects.filter(content_type_id=img_type,
                                          object_id=img.pk) 
```

然而，这看起来并不干净，这就是`GenericRelation`有用的原因。它使访问反向泛型关系变得非常容易。为此，您必须将以下字段添加到`Image`模型中：

```
class Image(models.Model):
    # ...
    keywords = generic.GenericRelation('KeywordItem') 
```

现在，这将允许您通过简单地执行以下操作来访问关键字：

```
Image.object.get(...).keywords.all() 
```

**注意事项**

通用外键是一项棘手的工作，尤其是在 Django 中，因为语法有些棘手。如果你是 Django 的初学者，我不建议你对它们做任何事情，直到你对 Django 中的外键和 Django 提供的所有“魔法”（例如`related_name`参数）感到满意。一旦你理解了这一点，通用外键将更容易理解和使用。

# sql - SQL在多种情况下插入特定列的值

> ID：12888956
> 
> 赞同：0
> 
> 时间：2012-10-15T03:33:36.760
> 
> 标签：sql, sql-server

假设我有一个表格，我必须在不同的合同键下插入合同的描述。

但是在执行的时候，在then附近有一个错误

使用语法集有什么限制吗？

下面是我的 SQL

```
declare @i int, @j v nvarchar(MAX)
set @i = 1
while (@i<=8)
begin

   set @j =  case when @i = 1 then 'CR'     when @i = 2  then 'Facebook'      else 'N/A' end

INSERT INTO CostNature (CNKey,  CNNDescription) VALUES (@i , @j );
set @i = @i + 1   
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:19:39.610

**不正确**

```
@j v nvarchar(MAX) 
```

**正确的**

```
@j nvarchar(MAX) 
```

否则，所有其他代码都可以。

# ios - 呈现的视图控制器如何从当前方向（尤其是横向）初始化？

> ID：12888962
> 
> 赞同：1
> 
> 时间：2012-10-15T03:35:19.123
> 
> 标签：ios, ipad, uiviewcontroller

我有一个视图控制器，名为 AViewController。AViewController 中有一个按钮。单击按钮时，我将呈现另一个视图控制器，称为 BViewController。如果 AViewController 是纵向的，它工作得很好。如果方向是横向，那么 BViewController 仍然以纵向初始化，但以横向显示。

这就是问题。我想知道如何以当前方向初始化 BViewController。我在 BViewController 的初始化中使用 [UIScreen mainScreen].bounds。但如果设备处于横向，则边界不在横向。我知道将帧从 AViewController 传递给 BViewController，它可能会起作用。但我认为这不是一个好的解决方案。那么有没有更好的方法呢？

呈现 BViewController 的函数如下：

```
- (void)BtnClicked
{
    BViewController *bvc = [[BViewController alloc] init];
    bvc.delegate = self;
    bvc.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentViewController:movie animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T03:39:44.357

我仍然不知道如何有效地做到这一点。`willAnimateRotationToInterfaceOrientation`但是我使用一种解决方案来手动调用该方法`viewDidAppear`。

片段如下：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self willAnimateRotationToInterfaceOrientation:[UIApplication sharedApplication].statusBarOrientation duration:0];
} 
```

# objective-c - 作者在解释中是否犯了逻辑错误？

> ID：12888963
> 
> 赞同：0
> 
> 时间：2012-10-15T03:35:40.160
> 
> 标签：objective-c

我正在向“Objective-c 编程”作者 Kochan 学习 Objective-c。第 3 版。在第 8 章“继承”中，Kochan 先生对该方法进行了如下解释：

```
-(void) setOrigin: (XYPoint *) pt
{
if (! origin)
origin = [[XYPoint alloc] init];
origin.x = pt.x;
origin.y = pt.y;
} 
```

"*该方法首先测试实例变量 origin 是否非零*（确保您了解该测试以及所使用的逻辑否定运算符 ! 的使用）。回想一下，所有实例变量最初都设置为零。所以当一个新的 Rectangle对象被分配后，它的实例变量，包括原点，将被设置为零。

*如果原点为零*，则 setOrigin: 方法将分配并初始化一个新的 XYPoint 对象，并将对它的引用存储在原点中。”

有没有逻辑错误？只有当原点不为零时，“setOrigin”方法才分配一个新的 XYPoint 对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T03:42:06.943

你的报价说：

> *如果原点为零*，...

也就是说，当`origin`为零 ( `nil`) 时，则为*true*`! origin` ，并且将分配一个新的。*`XYPoint`*

 *我在这里没有看到逻辑上的不一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:44:00.127

不，“！” 在这种情况下是一个逻辑 NOT 操作。当 "origin" 为零时，!origin 为 TRUE；当“origin”非零时，!origin 为 FALSE。因此，下一行（分配和初始化一个 XYPoint 对象）仅在 origin 为零时执行。正如作者所说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T03:38:01.217

作者确实是对的。

这就是为什么我不喜欢 C 中的不完整比较。

如果他编码`if (origin)`，那么对于任何`origin`非零值，该布尔表达式都为真。

因此，当他否定它时，布尔表达式`if (! origin)`只有在原点为零时才为真。

IMO，这太可怕了，应该对其进行编码`if (origin == NULL)`，以使其更清晰。

在我看来，他正在竭尽全力教导不良的编码习惯。这种结构总是会散发出[Code Smell](http://en.wikipedia.org/wiki/Code_smell)的味道。*

# linux - Linux SIGPIPE 崩溃服务器

> ID：12888966
> 
> 赞同：2
> 
> 时间：2012-10-15T03:36:13.353
> 
> 标签：linux, sigpipe

所以在我的应用程序开始时，我打电话给

```
signal(SIGPIPE, SIG_IGN); 
```

我认为我的应用程序会忽略 SIGPIPE。但是，我仍然使用以下代码导致 SIGPIPE 崩溃：

```
write(fd, outgoingStr->c_str(), size); 
```

其中 fd 是一个 int（文件描述符），size 是字符串的大小。我在这里做错了什么？

附带说明一下，我最近使用将该写入包装在 if 中以检查返回的错误值，并且我相信在将其删除之前我从未遇到过 SIGPIPE 崩溃。如果出现错误，if 检查除了 cout 之外什么也没做，所以我不确定它是否相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:36:43.837

问题最终是 GDB 将在 SIGPIPE 上停止，即使它被忽略。正常运行应用程序时，它按预期工作。

# python - 如何为 apscheduler 指定“记录器”

> ID：12888977
> 
> 赞同：3
> 
> 时间：2012-10-15T03:37:57.523
> 
> 标签：python, scheduled-tasks, scheduling

我正在尝试学习如何使用 Python 的 apscheduler 包，但它会定期抛出以下错误：

```
No handlers could be found for logger "apscheduler.scheduler" 
```

此消息似乎与计划作业中的错误有关，例如，使用 jobTester 作为计划作业，以下代码在 jobTester 中使用未定义的变量 (nameStr0) 给出了上述错误消息：

```
from apscheduler.scheduler import Scheduler
from apscheduler.jobstores.shelve_store import ShelveJobStore
from datetime import datetime, timedelta
from schedJob import toyJob

def jobTester(nameStr):
    outFileName = nameStr0 + '.txt'
    outFile = open(outFileName,'w')
    outFile.write(nameStr)
    outFile.close()

def schedTester(jobList):
    scheduler = Scheduler()
    scheduler.add_jobstore(ShelveJobStore('example.db'),'shelve')
    refTime = datetime.now()

    for index, currJob in enumerate(jobList):
        runTime = refTime + timedelta(seconds = 15)
        jobName = currJob.name + '_' + str(index)
        scheduler.add_date_job(jobTester, runTime, name = jobName,
                           jobstore = 'shelve', args = [jobName])

    scheduler.start()
    stopTime = datetime.now() + timedelta(seconds = 45)
    print "Starting wait loop .....",
    while stopTime > datetime.now():
        pass
    print "Done"

def doit():
    names = ['Alan','Barbara','Charlie','Dana']
    jobList = [toyJob(n) for n in names]
    schedTester(jobList) 
```

这可以通过运行此代码（存储在文件 schedTester.py 中）来查看，如下所示：

```
>>> import schedTester
>>> schedTester.doit()
No handlers could be found for logger "apscheduler.scheduler"
Starting wait loop ..... Done 
```

但是，当我将 nameStr0 替换为 nameStr （即变量名的正确拼写）时，代码运行良好，没有错误消息。

1.  如何为 apscheduler.scheduler 创建记录器？我是否在处理配置调度程序的文档部分中遗漏了什么

2.  我将这个记录器视为某种 stderr 是否正确？如果是这样，我将在哪里寻找它（如果这不是由我设置它的方式决定的）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T04:49:59.657

您可以只创建一个默认记录器，一切都应该去它：

```
import logging
logging.basicConfig() 
```

只有在使用尚未定义的变量时才会出现问题的原因是，这会导致`jobTester`函数抛出错误，而 apscheduler 正在捕获并尝试使用`logging.error()`. 由于您尚未设置记录器，因此它会抱怨。

如果您阅读[python 日志记录](http://docs.python.org/howto/logging.html#logging-basic-tutorial)，您会发现有很多方法可以配置它。您可以让它将所有内容记录到文件中或将其打印到标准输出。

# javascript - 如何在 asp.net 中使用 javascript 设置工具提示？

> ID：12888982
> 
> 赞同：0
> 
> 时间：2012-10-15T03:39:02.887
> 
> 标签：javascript, vb.net, tooltip

我的 aspx 页面中有一个文本框。当且仅当文本框被禁用/灰显时，我才需要显示其工具提示。如何使用 JavaScript 实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T03:50:55.143

您可以在启用/禁用文本框的位置调用此函数

```
function setToolTip()
{
    if(document.getElementById("myTextBox").disabled == true)
    {
        document.getElementById("myTextBox").title="ToolTip";
    }
    else
    {
        document.getElementById("myTextBox").title="";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:56:15.820

这是一种方法：

```
document.getElementById("<%=TextBox.ClientID%>").setAttribute('title','New Tooltip'); 
```

第二种方式：

```
function DisplayToolTip()
        {
            document.getElementById('divToolTip').style.left = window.event.x;
            document.getElementById('divToolTip').style.top = window.event.y;

            document.getElementById('divToolTip').style.visibility = 'visible';
        }

        function HideToolTip()
        {
            document.getElementById('divToolTip').style.visibility = 'hidden';
        } 
```

现在添加以下 HTML 标记代码：

```
 <span id="spanName" style="font-weight: bold;border: solid 2px red;" 
onmouseover="javascript:DisplayToolTip();"
        onmouseout="javascript:HideToolTip();">THIS IS THE SPAN
    </span>

   <div id="divToolTip" style="position: absolute; visibility: hidden;
   z-index: 20; background-color: white; border: solid 1px Blue;">
   This is ToolTip Text
   </div> 
```

# sql - 连接本地 SQL 服务器

> ID：12888984
> 
> 赞同：0
> 
> 时间：2012-10-15T03:39:31.987
> 
> 标签：sql, vb6, database-connection, windows-2000

我一直在尝试将 SQL Server 与 VB6 连接起来。我在 VMWare 上运行 Windows 2000。我这样做一直不成功。错误出现在连接字符串上。如何找到连接字符串的详细信息。

这是当前的连接字符串：

```
.ConnectionString = "user ID=" & DBUser & ";password=" & DBPass & ";" + "Data source=" & strservername & ";" + "Initial Catalog= StudentManagementSystem"
        .Provider = "SQLOLEDB.1" 
```

我从 err.description 得到错误

```
Login failed for user 'dbo.' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T04:10:58.400

经过讨论，尝试使用受信任的连接形式

```
Server=myServerAddress;Database=myDataBase;Trusted_Connection=True; 
```

并在修复服务器名称后它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T04:02:41.753

德博。不是用户名，而是模式。您需要验证用户名。

# debugging - 迭代器意外自增？

> ID：12888987
> 
> 赞同：0
> 
> 时间：2012-10-15T03:40:31.183
> 
> 标签：debugging, python-2.7

我在调试这段代码摘录时遇到了麻烦。别介意它实际上并没有返回作者想要的事实，我已经解释过了，我的问题是不同的。

```
def factors(n):
    result = []
    for x in xrange(2,n):
        print "\t%i,foo" % x
        if n % x == 0:
            isPrime = True
            print "\t\t%i,bar" % x
            for factor in result:
                print "\t\t%i %% %i = %i" % (x,factor,x % factor)
                if x % factor == 0:
                        isPrime = False
                        print "\t\t\t%i,foobar" % x
                        subFactors = factors(x)
                        result.extend(subFactors)
            if isPrime:
                result.append(x)
print ""
return result

def main():
    factor = dict()
    for i in xrange(1,100):
        factor[i] = factors(i)
        factor[i].insert(0,1)
        factor[i].append(i)
        print "%i: %s" % (i,factor[i])

if __name__ == "__main__":
     main() 
```

该代码是无限循环的！具体来说，重复输出以下内容：

```
2,foo
    2,bar
3,foo

    4 % 2 = 0
        4,foobar 
```

请注意，在第二次迭代中，它不打印“bar”打印语句，并且值`x`从“bar”打印语句更改为“mod”打印语句。

我无法向作者解释这种行为。你们中的一个善良的人可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T04:03:03.517

问题是`result`您在迭代列表内容时正在扩展列表。这是两条关键线，周围没有其他令人分心的部分：

```
for factor in result:
    result.extend(subFactors) 
```

根据 python 规范，这具有未定义的行为。我很确定这是无限循环的原因。

# html - 动态宽度 div 自动调整大小以适应浏览器宽度？

> ID：12888988
> 
> 赞同：2
> 
> 时间：2012-10-15T03:40:47.177
> 
> 标签：html, css, autoresize, flexbox

我有几个宽度未知（动态宽度）的 div。如何自动调整这些 div 的大小以适应浏览器宽度？

例如，我有 5 个宽度不同的 div。如果浏览器宽度只能填满 3 个 div，那么这 3 个 div 将自动调整大小以适应浏览器宽度，其余部分将显示在第二行。

如何使用 html5 和 css3 制作它。我知道 css3 中有一个新功能 flexbox，但我不确定我是否可以处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:51:44.733

您可以根据您的要求使用 calss - 值。最小/最大宽度/高度

参见示例[演示 jsFiddle](http://jsfiddle.net/centerwow/aYx7h/2/)

```
 .grid {
  display: box;
  display: -webkit-flex;
  display: flex;
}
.column {
  padding: 20px;
}
.fluid {
  box-flex: 1;
  background: #ccc;
}
.fixed {
    width: 100px;
  background: red;
}​ 
```

# php - TCPDF 在 Linux 客户端不显示中文

> ID：12888991
> 
> 赞同：2
> 
> 时间：2012-10-15T03:41:01.157
> 
> 标签：php, pdf-generation, tcpdf

无论我使用什么字体，我都无法`TCPDF`显示任何汉字。

我到处爬爬搜索，包括这些有趣的帖子

[tcpdf-utf-8-问题](https://stackoverflow.com/questions/5333702/tcpdf-utf-8-problem)
[tcpdf-encode-chinese-character](https://stackoverflow.com/questions/8737772/tcpdf-encode-chinese-character)

但仍然没有成功。

示例 #7`TCPDF`可以很好地处理许多不同的字符集，但是如果我在文本中添加一些中文，它将显示为正方形，最奇怪的是，如果我`stsongstdlight`按照一条消息中的建议将字体更改为文本将不会显示根本 - 但标题会。

来自日文字体的示例 #38`TCPDF`也不起作用。感谢您提供任何可以让我找到新想法尝试的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T04:07:58.590

我刚刚测试了设置字体

```
$pdf->SetFont('kozminproregular', '', 12); 
```

正如[tcpdf 中建议的编码中文字符](https://stackoverflow.com/questions/8737772/tcpdf-encode-chinese-character)，它似乎工作正常。

这是我输出的示例：

![在此处输入图像描述](../Images/ba7a97292db852a9bcce3a0ce24d83c1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:50:48.353

主要问题是由于 evince PDF 阅读器无法处理由 TCPDF 生成的 CJK 中文。后

```
sudo apt-get install poppler-data 
```

一切开始好转！我使用的是为中文设计的字体*stsongstdlight* ，这与看起来像为日语设计的*kozminproregular不同。*但是我仍然对非汉字的间距有问题，毕竟T，i，u......
为了解决第二个问题，我转换并使用字体*arialuni.ttf*，但这个字体不是开源的也不免费。我尝试转换许多其他包含中文的 unicode 字体但没有成功。

来源：

*   [evince – ubuntu PDF 阅读器 – 无法显示 CJK 中文](http://www.wangchaofeng.com/wordpress/?p=32)
*   [创建-pdfs-using-tcpdf-that-supports-all-languages-尤其是-cjk](https://stackoverflow.com/questions/9426983/creating-pdfs-using-tcpdf-that-supports-all-languages-especially-cjk)

# excel - 如何遍历指定列中的行？

> ID：12888994
> 
> 赞同：-1
> 
> 时间：2012-10-15T03:41:54.900
> 
> 标签：excel, vba

我一般是编程新手。使用 VBA 我试图遍历范围（“b6：b18”）。通过每次传递，我`b3`从值中减去，并将日期放入单元格中，并偏移一列，直到值小于`b3`. 基本上我正在尝试设置自动付款。示例：我有 5 个帐户。250.36、17.23、96.12、600.00、5.46。我的付款是每月 36.12。因此，1/1/13 = 36.12，直到第一个帐户 < 36.12。但每个月必须等于付款。每个帐户可能会在一个月内扣除钱。

我无法弄清楚的代码是：

```
pmt = b3
for each cell in range("b6:b18")
    if cell.value > pmt then
        activecell.value= cell.value -pmt
        activecell =activecell.offset(0,1) 
```

但是当使用下一个 endif 关闭时，该代码什么也不做，而且我不知道如何按顺序显示日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T05:19:36.823

我可以告诉您如何修复上述代码以使其“工作”，但您的整体描述令人困惑。

话虽如此，希望它能让你走上正轨

```
dim pmt as double
dim i as long

pmt = Range("B3").value

for i = 6 to 16
    if Range("B" & i).value > pmt then
        range("B" & i).value = range("B" & i).value - pmt
    end if
next i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T05:24:57.163

我不清楚您到底要做什么，也不知道您的数据是如何布置的，因此我无法为您提供解决问题所需的代码，但这里有一些提示可能会让您走上正确的道路。

1.  `Option Explicit`用作`Module`. _ 这将迫使您对所有变量进行 decalre。
2.  不要使用`ActiveCell`或`Select`除非绝对必要。有关如何避免这些问题的一些提示，请参阅[此答案。](https://stackoverflow.com/a/10717999/445425)
3.  分配对象时，例如设置`Range`变量，使用`Set`.

    ```
    Dim rng as Range
    Set rng = Range("B3") 
    ```

    不这样做意味着使用默认属性，即

    ```
    Dim rng as Range
    rng = Range("B3") 
    ```

    和

    ```
    rng.Value = Range("B3").Value 
    ```

    是等价的

4.  使用`Range`不指定 a 的引用`Worksheet`意味着活动工作表。

    ```
    Set rng = Range("B3") 
    ```

    和

    ```
    Set rng = ActiveSheet.Range("B3") 
    ```

    是等价的

5.  诊断您的代码：使用`Step Into`( `F8`) 一次运行您的代码，并且
6.  使用监视窗口查看变量的值（和类型）

如果您提供有关数据布局和预期结果的更多信息，可以获得更多帮助

# openlaszlo - OpenLaszlo DHTML InputText 在 Firefox 15 中的点击问题

> ID：12888997
> 
> 赞同：1
> 
> 时间：2012-10-15T03:42:12.873
> 
> 标签：openlaszlo, lzx

由于某种原因，我无法在 dhtml 环境中的 inputtext 中输入任何文本。在 swf10 环境中也可以正常工作。

当我将鼠标悬停在输入文本上时，我观察到光标没有变为选择器。看起来好像 inputtext 的 onmouseover 事件没有被触发。

有没有人在 openlaszlo dhtml 环境中遇到过这种问题？

我使用的是 OpenLaszlo 4.9、Windows 7，浏览器是 Firefox 15.0

我在 jira [http://jira.openlaszlo.org/jira/browse/LPP-9934](http://jira.openlaszlo.org/jira/browse/LPP-9934)中发现了一个错误报告。

请提出解决此问题的任何想法/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:03:25.897

您看到的问题可能与 OpenLaszlo 为 DHTML/JavaScript 运行时复制 Flash 运行时中的 Sprite 或可视元素单击行为的方式有关。直到最近浏览器才直接支持这种功能。因此，OpenLaszlo 团队不得不使用一种变通方法，该方法在[有关 LPP-5447 的评论](http://jira.openlaszlo.org/jira/browse/LPP-5447?focusedCommentId=53019&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#action_53019)中有详细描述。

> Clickdiv 的存在是为了对可点击的 sprite 进行独立控制，而不受常规 div 的干扰。它们被放置在常规 lzdiv sprite 层次结构的单独副本中，因此我们有更多的控制权。这也提供了一个放置重点输入文本 div 的位置，因此它们位于前景中，并且单击/拖动以进行编辑可以正常工作。

clickdiv 功能似乎不时因浏览器更新或由于回归而损坏。2012 年[，对 DHTML 运行时点击功能](http://jira.openlaszlo.org/jira/browse/LPP-10225)进行了一些改进，使用 Firefox 中的新浏览器功能（现在允许使用 CSS 样式点击 div 元素`pointer-events`）。由于 clickdiv 功能是 LFC 的一部分，因此不建议在您的应用程序中修复该功能。

您可以通过在组件中切换直到您的 inputtext 元素获得焦点并开始输入来测试 inputtext 是否有效。如果文字可以按预期输入，但是不能用鼠标点击组件来选择它，那肯定是clickdiv的问题。

**更新：使用 OpenLaszlo 4.9.0 和各种浏览器**
进行测试，我使用 OpenLaszlo 4.9.0、DHTML 运行时和 IE9、Firefox 以及 Chrome 测试，使用 LPP-9934 附带的测试用例：所有浏览器都显示特定的错误行为。如果错误尚未提交，请提交 JIRA 错误。