# StackOverflow 问答 14769000-14769999

# grails - Grails如何调用另一个数据库表？

> ID：14769000
> 
> 赞同：0
> 
> 时间：2013-02-08T09:03:57.210
> 
> 标签：grails, datasource, multiple-databases

示例：我有 2 个 db：db1 和 db2

我的应用程序中有 2 个域，

```
class domain1 {
    String test
    Domain2 domain2
    static mapping = {
      datasource 'db1'
    }
}

class domain2 {
   static mapping = {
      datasource 'db2'
   }
} 
```

当我尝试保存类 domain1 时，我收到错误“未映射的类”如何保存 domain1 类？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:14:42.093

一个数据库中的外键不能引用另一个数据库中的内容。这就是 Grails 拒绝映射这种关系的原因。

手动替换您的字段`Domain2 domain2`并`Integer domain2Id`控制其与数据库中对象的关系。`db2`

# mysql - SQL | 如何根据记录 ID 和另一列获取所有记录 ID？（可能很简单的问题:)）

> ID：14769001
> 
> 赞同：0
> 
> 时间：2013-02-08T09:04:01.083
> 
> 标签：mysql, sql

我有一个包含两列的表。这两列是 object_id 和 term_taxonomy_id。假设表格如下所示：

```
object_id | term_taxonomy_id
----------------------------
111       | 75
119       | 42
234       | 34
742       | 75
824       | 99
931       | 34
999       | 75 
```

现在假设**我知道****object_id**的值，并且我想检索所有具有相同 term_taxonomy_id 的对象 ID

例如，假设**我有对象 ID 742**，我想**获取****term_taxonomy_id 为 75**的所有 object_id 记录，因此我应该有类似

111、742、999

是否可以通过单个 SQL 查询来实现？

我使用的 DBMS 是 MySQL。

亲切的问候 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:05:15.743

采用`GROUP_CONCAT`

 ~~~~```
SELECT GROUP_CONCAT(Object_ID) ObjectList
FROM tableName
WHERE term_taxonomy_id = 75 
```~~ 

*   ~~[SQLFiddle 演示](http://www.sqlfiddle.com/#!2/dd51c/2)~~

**更新 1**

```
SELECT GROUP_CONCAT(object_id) ObjectList
FROM   tableName
WHERE  term_taxonomy_id = 
        (
          SELECT term_taxonomy_id
          FROM   tableName
          WHERE  object_id = 742
        ) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/dd51c/4)

或通过使用`JOIN`

```
SELECT GROUP_CONCAT(a.object_id) ObjectList
FROM   tableName a
       INNER JOIN tableName b
       ON a.term_taxonomy_id = b.term_taxonomy_id AND
               b.object_id = 742 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/dd51c/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:11:51.560

使用下面的查询：

```
SELECT DISTINCT t2.object_id FROM table as t1, table as t2
WHERE t1.object_id = XX
AND t2.term_taxonomy_id = t1.term_taxonomy_id 
```~~

# jquery - 在用户完成向导的步骤时更新模型

> ID：14769005
> 
> 赞同：1
> 
> 时间：2013-02-08T09:04:11.393
> 
> 标签：jquery, asp.net-mvc-4, viewmodel, smart-wizard

我将使用[SmartWizard](http://tech-laboratory.blogspot.be/2009/08/smart-wizard-javascript-wizard-control.html) jQuery 插件来创建一个类似向导的 ASP.Net MVC 应用程序。用户将通过多个步骤来填写数据。

**[为清晰而编辑]**

每一步都应该是一个局部视图。

ViewModel 对所有视图都是通用的：

```
public class myViewModel
{
    [Required]
    public int BM { get; set; }

    [Required]
    public int Cylindre { get; set; }        
} 
```

第一个部分视图应该显示字段 BM（当然，为了清楚起见，我在这里简化了一些事情）：

```
@model MvcApplication3.Models.QuoteViewModel
    <div class="editor-label">
      @Html.LabelFor(model => model.BM)
    </div>
    <div class="editor-field">
      @Html.EditorFor(model => model.BM)
      @Html.ValidationMessageFor(model => model.BM)
 </div> 
```

第二个局部视图应显示字段 Cylinder（与上面的代码相同）。

现在主视图如下所示：

```
@model MvcApplication3.Models.QuoteViewModel

@using (Html.BeginForm())
{
@Html.ValidationSummary(true)
<div id="wizard" class="swMain">
    <ul>
        <li><a href="#step-1">
            <label class="stepNumber">
                1</label>
            <span class="stepDesc">Step 1<br />
               </span></a></li>
        <li><a href="#step-2">
            <label class="stepNumber">
                2</label>
            <span class="stepDesc">Step 2<br />
                </span></a></li>
    </ul>

    <div id="step-1">
        <h2 class="StepTitle">
            Step 1 Content</h2>

        <!-- step content -->
        @Html.Partial("QuoteStep1", Model)

    </div>
    <div id="step-2">
        <h2 class="StepTitle">
            Step 2 Content</h2>

        <!-- step content -->
        @Html.Partial("QuoteStep2", Model)

    </div>
</div> 
```

}

这一切都很好。但正如您所见，两个 Partial View 是同时渲染的。

我想做的是加载第一个局部视图，然后当用户继续下一步时，将使用 AJAX 调用加载第二个局部视图。

问题是如何通过这些步骤保持模型状态？

**[编辑 2 - 新版本]**

我已经设法使用 AJAX 调用加载部分视图：

```
$('#wizard').smartWizard({ contentURL: '/home/getstep', transitionEffect: 'slideleft', onLeaveStep: leaveAStepCallback, onFinish: onFinishCallback }); 
```

在控制器中，我这样做：

```
 public ActionResult GetStep()
    {
        ActionResult pv = null;

        switch (Convert.ToInt16(Request["step_number"]))
        {
            case 1:
                pv = PartialView("QuoteStep1");
                break;
            case 2:
                pv = PartialView("QuoteStep2");
                break;
            default:
                break;
        }
        return pv;
    } 
```

现在我遇到的问题是，当我点击 SmartWizard 的下一个按钮时，即使我没有填写必填字段，我的控制器实际上也会被点击！这是因为 SmartWizard 插件似乎在 ajax 调用后进行验证以获取内容，这对我来说似乎很愚蠢。

有人遇到过这个问题，还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:16:05.550

您是否考虑过通过 javascript 提交以组合来自各个步骤的（仍然存在的）输入？您可以使用来自先前部分视图的信息来渲染部分视图 2 到 N，但是实际的数据提交是所有视图数据的组合。我不知道这是否是最佳实践，但这是一个想法。

# firefox - 在 Firefox 中不可见转换的内联 SVG，在 Chrome 中运行良好

> ID：14769006
> 
> 赞同：1
> 
> 时间：2013-02-08T09:04:22.983
> 
> 标签：firefox, svg

我在 PHP 脚本中有这段代码，由 Apache 提供。

```
<?php
header('Content-type: application/xhtml+xml');
?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>SVG in text/html</title>
</head>
<body>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
   <g width="100%" height="100%" transform="matrix(1, 0, 0,1,683,285)" buffered-rendering="dynamic">
   <line y2="208" x2="85" y1="10" x1="24" stroke="#999"></line></g></svg>

</body>
</html> 
```

该脚本在 Chrome 中运行良好（在屏幕上绘制一条直线）。然而，Firefox (18.0.2) 似乎根本没有渲染它。我只看到一个空白的白色屏幕。

我一直在绞尽脑汁想弄清楚这一点，但是对于我的一生，我无法理解为什么会发生这种情况。有任何想法吗？我已经浏览了有关该主题的所有 stackexchange 帖子，但没有一个对我有帮助

编辑：我忘了提一下：一旦我删除了“transform = ...”属性，它就可以正常工作，但我需要它来做我的计划。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:56:35.763

您没有指定任何宽度或高度，因此 SVG 为 300 x 150 像素（Chrome 弄错了），并且 html 和 body 也不扩展。这似乎更像你想要的。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%">
<head>
<title>SVG in text/html</title>
</head>
<body style="width: 100%; height: 100%">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%">
   <g width="100%" height="100%" transform="matrix(1, 0, 0,1,683,285)" buffered-rendering="dynamic">
   <line y2="208" x2="85" y1="10" x1="24" stroke="#999"></line></g></svg>

</body>
</html> 
```

# sql - 如果我使用复杂的表达式，哪个查询更有效？

> ID：14769009
> 
> 赞同：1
> 
> 时间：2013-02-08T09:04:30.137
> 
> 标签：sql, odbc

如果我想使用新的计算列来过滤、聚合和排序数据，任何人都可以告诉哪个查询更有效吗？一种是使用嵌套选择，还是一种在一个选择子句中重复表达式？是否指定了数据库？

查询1：

`SELECT count(*), (age - 18) AS newcol FROM qmao_person WHERE (age - 18) > 0 GROUP BY (age - 18) ORDER BY (age - 18) DESC;`

查询2：</p>

`SELECT count(*), s1.newcol FROM (SELECT (age - 18) AS newcol FROM qmao_person) s1 WHERE s1.newcol > 0 GROUP BY s1.newcol ORDER BY s1.newcol DESC;`

顺便说一句，问题是哪个查询更有效，而不是如何优化查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T09:11:21.313

此查询将产生相同的结果并击败两者：

```
SELECT
    count(*),
    (age - 18) AS newcol
FROM qmao_person
WHERE age > 18
GROUP BY age
ORDER BY age DESC 
```

但总的来说，对您的问题的回答是非常特定于供应商的。如果供应商使用大量优化——比如分解常用表达式或将子选择转换为连接，则结果很可能是相同的。

也就是说，如果我不能像刚才那样优化它，我仍然更喜欢你的第一个查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:08:18.520

您应该看一下这两个查询的执行情况，看看有什么区别。这取决于服务器如何优化它们。示例： [执行计划](http://www.codeproject.com/Articles/9990/SQL-Tuning-Tutorial-Understanding-a-Database-Execu)

# python - python类字典，值消失

> ID：14769024
> 
> 赞同：1
> 
> 时间：2013-02-08T09:06:02.510
> 
> 标签：python, class, dictionary

我正在尝试将类字典分配为值，将字符串分配为键。在主循环中打印它们时我有正确的值，但是一旦我离开主循环，我的“cliStat”变量就会出现刚刚用“O”值初始化..

这是我进行分配和打印的代码部分。我的问题是，为什么 cliStat 保持“0”值？

```
cliStat = {}
for org in client:

        cliStat[ org ] = StatEntry( org, "0", "0", "0", "0", "0", "0", "0" ) 

self.getFilteredStat( client, date_debut, date_fin )

for statEntry in self.tabStatEntry.values():

        cliStat[ statEntry.client ].nb_users += statEntry.nb_users
        cliStat[ statEntry.client ].nb_pages = ( statEntry.nb_pages + cliStat[ statEntry.client ].nb_pages ) / 2
        cliStat[ statEntry.client ].perf_rate = ( statEntry.perf_rate + cliStat[ statEntry.client ].perf_rate ) / 2
        cliStat[ statEntry.client ].response_time = ( statEntry.response_time + cliStat[ statEntry.client ].response_time ) / 2
        cliStat[ statEntry.client ].nb_errors = ( statEntry.nb_errors + cliStat[ statEntry.client ].nb_errors ) / 2
        cliStat[ statEntry.client ].perf_globale = ( statEntry.perf_globale + cliStat[ statEntry.client ].perf_globale ) / 2
        cliStat[ statEntry.client ].perf_server = ( statEntry.perf_server + cliStat[ statEntry.client ].perf_server ) / 2
        cliStat[ statEntry.client ].perf_network = ( statEntry.perf_network + cliStat[ statEntry.client ].perf_network ) / 2
        cliStat[ statEntry.client ].perf_redirect = ( statEntry.perf_redirect + cliStat[ statEntry.client ].perf_redirect ) / 2

for cle,val in cliStat.items():

        print val 
```

如果需要，这是完整的代码；[http://dpaste.com/914508/](http://dpaste.com/914508/)

如果需要运行代码，这里是数据文件[http://rapidshare.com/files/2185155450/meteo.7z](http://rapidshare.com/files/2185155450/meteo.7z)

只需使用您的文件夹更改 logDir 变量。

谢谢你看看！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:14:11.787

并非所有对象都保持填充零。

我将最后一个循环更改为

```
 for cle,val in cliStat.items():
        if val.nb_users:
            print val 
```

并得到六个客户端的输出，所有客户端都填充了非零数据。

最好先用少量数据测试代码。

# xml - xpath 表达式不返回子节点

> ID：14769025
> 
> 赞同：-2
> 
> 时间：2013-02-08T09:06:04.710
> 
> 标签：xml, xslt, xpath

我已经设置了一个简单的 xpath 表达式，我希望它可以立即工作，我现在尝试了很多变体，但仍然无法检索到 corect 信息：

```
<xsl:when test="$pageType='siteExtraLinks'">/home/section[name=&apos;Extra&apos;]/instance/*[starts-with(name(),'extraLinks') and boolean(.)]</xsl:when>    
<xsl:when test="$pageType='siteExtraLinksText'">/home/section[name=&apos;Extra&apos;]/instance/*[starts-with(name(),'extraLinks') and boolean(.)]/text</xsl:when>    
<xsl:when test="$pageType='siteExtraLinksHref'">/home/section[name=&apos;Extra&apos;]/instance/*[starts-with(name(),'extraLinks') and boolean(.)]/href</xsl:when>    
<xsl:when test="$pageType='siteExtraLinksExtraText'">/home/section[name=&apos;Extra&apos;]/instance/*[starts-with(name(),'extraLinks') and boolean(.)]/extraText</xsl:when> 
```

XML 正确输出

```
<extraLinks0>
  <text>text 0</text>
  <href>link 0</href>
  <extraText>extra text 0</extraText>
</extraLinks0>
<extraLinks1>
  <text>text 1</text>
  <href>link 1</href>
  <extraText>extra text 1</extraText>
</extraLinks1> 
```

Buts 在讲解员上读错了

```
text 0 link 0 extra text 0<br />
text 0 link 0 extra text 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:37:02.180

通过在 xpath 中进行相对引用来解决。

# mysql - 如何选择具有当天时间戳的行？

> ID：14769026
> 
> 赞同：127
> 
> 时间：2013-02-08T09:06:04.893
> 
> 标签：mysql, sql, timestamp

我试图从数据库表中只选择今天的记录。

目前我使用

```
SELECT * FROM `table` WHERE (`timestamp` > DATE_SUB(now(), INTERVAL 1 DAY)); 
```

但这需要过去 24 小时的结果，我需要它只选择今天的结果，而忽略时间。如何仅根据日期选择结果？

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2013-02-08T09:07:20.717

使用`DATE`和`CURDATE()`

```
SELECT * FROM `table` WHERE DATE(`timestamp`) = CURDATE() 
```

**警告！此查询没有有效地使用索引**。有关更有效的解决方案，请参阅[下面的答案](https://stackoverflow.com/a/14769096/285587)

[见 DEMO 上的执行计划](http://www.sqlfiddle.com/#!2/72440/2)

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2013-02-08T09:09:55.843

如果您希望使用索引并且查询不进行表扫描：

```
WHERE timestamp >= CURDATE()
  AND timestamp < CURDATE() + INTERVAL 1 DAY 
```

* * *

为了显示这对实际执行计划的影响，我们将使用**[SQL-Fiddle](http://sqlfiddle.com/#!2/3def7/1)**（一个非常有用的站点）进行测试：

```
CREATE TABLE test                            --- simple table
    ( id INT NOT NULL AUTO_INCREMENT
    ,`timestamp` datetime                    --- index timestamp
    , data VARCHAR(100) NOT NULL 
          DEFAULT 'Sample data'
    , PRIMARY KEY (id)
    , INDEX t_IX (`timestamp`, id)
    ) ;

INSERT INTO test
    (`timestamp`)
VALUES
    ('2013-02-08 00:01:12'),
    ---                                      --- insert about 7k rows
    ('2013-02-08 20:01:12') ; 
```

现在让我们试试 2 个版本。

* * *

版本 1**`DATE(timestamp) = ?`**

```
EXPLAIN
SELECT * FROM test 
WHERE DATE(timestamp) = CURDATE()            ---  using DATE(timestamp)
ORDER BY timestamp ; 
```

**解释：**

```
ID  SELECT_TYPE  TABLE  TYPE  POSSIBLE_KEYS  KEY  KEY_LEN  REF 
1   SIMPLE       test   ALL

ROWS  FILTERED  EXTRA
6671  100       Using where; Using filesort 
```

它**过滤所有（6671）行**，然后进行文件排序（这不是问题，因为返回的行很少）

* * *

版本 2**`timestamp <= ? AND timestamp < ?`**

```
EXPLAIN
SELECT * FROM test 
WHERE timestamp >= CURDATE()
  AND timestamp < CURDATE() + INTERVAL 1 DAY
ORDER BY timestamp ; 
```

**解释：**

```
ID  SELECT_TYPE  TABLE  TYPE  POSSIBLE_KEYS  KEY  KEY_LEN  REF 
1   SIMPLE       test   range t_IX           t_IX    9 

ROWS  FILTERED  EXTRA
2     100       Using where 
```

**它对索引**使用范围扫描，然后仅从表中读取相应的行。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-12-07T15:07:34.663

```
SELECT * FROM `table` WHERE timestamp >= CURDATE() 
```

它更短，不需要使用'AND timestamp < CURDATE() + INTERVAL 1 DAY'

因为 CURDATE() 总是返回当前日期

[MySQL CURDATE() 函数](http://www.w3schools.com/sql/func_curdate.asp)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-02-24T15:27:54.537

或者您可以使用 CURRENT_DATE 替代方案，结果相同：

```
SELECT * FROM yourtable WHERE created >= CURRENT_DATE 
```

[来自 database.guide 的示例](https://database.guide/curdate-examples-mysql/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-07T21:43:45.103

**如果要与特定日期进行比较，可以直接这样写：**

```
select * from `table_name` where timestamp >= '2018-07-07'; 
```

// 这里时间戳是类型为时间戳的列的名称

*或者*

**对于获取今天的日期，可以使用 CURDATE() 函数，因此：**

```
select * from `table_name` where timestamp >=  CURDATE(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-26T09:28:51.403

在我看来，这可能是最简单的：

```
SELECT * FROM `table` WHERE `timestamp` like concat(CURDATE(),'%'); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-08T09:07:44.873

只需将其转换为日期：

```
SELECT * FROM `table` WHERE CAST(`timestamp` TO DATE) == CAST(NOW() TO DATE) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-19T03:56:13.580

我们可以用多少种方法剥这只猫的皮？这是另一个变体。

SELECT * FROM `table`WHERE DATE(FROM_UNIXTIME( `timestamp`)) = '2015-11-18';

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-09T15:37:19.177

在 Visual Studio 2017 上，使用内置数据库进行开发时，我遇到了当前给定解决方案的问题，我不得不更改代码以使其正常工作，因为它抛出了 DATE() 不是内置函数的错误。

这是我的解决方案：

`where CAST(TimeCalled AS DATE) = CAST(GETDATE() AS DATE)`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-16T18:58:53.317

```
SELECT * FROM table WHERE FROM_UNIXTIME(your_column_with_unix_time,'%Y-%m-%d') = CURDATE() 
```

# c++ - C ++中单独文件中的类？

> ID：14769029
> 
> 赞同：0
> 
> 时间：2013-02-08T09:06:27.983
> 
> 标签：c++, oop, class

我从一本书中复制了这个。我只是不确定要在`main.cpp`源文件中添加什么以使其运行。

我知道类声明放在`.h`文件中，实现放在`.cpp`文件中。我需要写`main.cpp`什么？

我尝试了很多不同的东西，但我收到了很多错误消息。

```
 // cat.h
#ifndef ____2_cat_implementation__Cat__
#define ____2_cat_implementation__Cat__

#include <iostream>
using namespace std;
class Cat
{
public:
Cat (int initialAge);
~Cat();
int GetAge() { return itsAge;}              
void SetAge (int age) { itsAge = age;}      
void Meow() { cout << "Meow.\n";}          
private: int itsAge;
};

#endif /* defined(____2_cat_implementation__Cat__) */ 
```

...

```
// cat.cpp
#include <iostream>
#include "Cat.h"
using namespace std;

Cat::Cat(int initialAge) 
{
itsAge = initialAge;
}

Cat::~Cat() 
{

}

int main()
{
    Cat Frisky(5);
    Frisky.Meow();
    cout << "Frisky is a cat who is ";
    cout << Frisky.GetAge() << " years old.\n";
    Frisky.Meow();
    Frisky.SetAge(7);
    cout << "Now Frisky is " ;
    cout << Frisky.GetAge() << " years old.\n";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:08:49.217

再看这部分：

```
Cat::Cat(int initialAge); 
{
itsAge = initialAge;

Cat::~Cat() 
```

您缺少`}`构造函数的关闭，以及`;`函数头之后的额外内容。

在不相关的说明中，不要使用以下划线开头的全局名称（如`____2_cat_implementation__Cat__`），这些名称由规范保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:09:25.987

你有一个缺失`}`和不必要的`;`

```
 //----------------------v
  Cat::Cat(int initialAge); 
  {
      itsAge = initialAge;
  }
//^ 
```

* * *

> 我需要在 main.cpp 中写什么

通常，正如您所指出的，`.h`文件包含声明和`.cpp`文件 - 定义。然后，`main.cpp`文件应该包含`main`函数（不必命名文件，包含`main`函数`main.cpp`。它可以是任何东西。

因此，在您的示例中，您可以创建一个`main.cpp`包含以下内容的文件：

```
// include the declarations file
#include "cat.h"

// include the header for cin/cout/etc
#include <iostream>

using namespace std;

int main()
{
    Cat Frisky(5);
    Frisky.Meow();
    cout << "Frisky is a cat who is ";
    cout << Frisky.GetAge() << " years old.\n";
    Frisky.Meow();
    Frisky.SetAge(7);
    cout << "Now Frisky is " ;
    cout << Frisky.GetAge() << " years old.\n";
    return 0;
} 
```

* * *

其他注意事项：

*   `using namespace std;`是不好的做法，尤其是在头文件中。改为使用`std::`（例如`std::cout`，、、、`std::cin`等`std::string`）
*   正如你所拥有的`.h`和`.cpp`文件一样，不要将一半的​​实现放在头文件中，其余的放在源文件中。将所有定义放在源文件中（除非你想要`inline`函数，在头文件中实现）
*   `__`避免使用以or开头的名称，`_`它们是标准保留的。

# gwt - 在 GWT 中，单击按钮时会运行哪个 javascript 函数？

> ID：14769031
> 
> 赞同：1
> 
> 时间：2013-02-08T09:06:33.933
> 
> 标签：gwt

GWT 自动生成 JavaScript 代码。

我无法理解生成的代码事件机制。例如，当我单击按钮时会运行哪个功能？

我很想看到 GWT 为按钮生成的带有解释的 javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:49:15.080

对于事件处理，GWT 附加一个`EventListener`（通常是您的小部件）作为元素的扩展属性（称为`__listener`）。然后，这些事件都由一个*调度*方法处理，该方法查看`__listener`事件目标的扩展并将事件分派给它。当然，dispatch 方法做得更多（事件预览、入口/最终调度的命令等）

这种*舞蹈*是（或至少是）避免浏览器（主要是 IE）中的内存泄漏所必需的。您可以在 GWT wiki 中找到更多详细信息：[https ://code.google.com/p/google-web-toolkit/wiki/DomEventsAndMemoryLeaks](https://code.google.com/p/google-web-toolkit/wiki/DomEventsAndMemoryLeaks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:24:59.800

当您编译代码时，`Compiler`将生成自动生成的`Javascript`函数......而且这也是压缩的（这取决于您的编译类型）。

很难找到相应的函数和小部件 id，因为它们是`generated`由`compiler` ..所以最好调试你的`gwt`代码是托管模式 ..

即使您想在编译时阅读生成的代码，也可以将编译类型设置为

`DETAILED`，它改进了`PRETTY`更多细节（例如非常冗长的变量名）

更多细节可在此处获得[。](https://developers.google.com/web-toolkit/doc/1.6/FAQ_DebuggingAndCompiling)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:10:49.667

当您使用 GWT 进行开发时，您并不关心 JavaScript。

您应该查看**Java**代码，并搜索处理按钮单击事件的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T09:37:12.137

`STYLE`当您需要了解 GWT 的输出 js 时，您应该使用 GWT 编译器选项。GWT 默认压缩和混淆 javascript 输出，因为它使用**OBF**作为 STYLE 的默认值。

为了防止压缩和混淆，您可以使用**PRETTY**或**DETAILED**作为 STYLE 参数的参数。

**注意：**您应该始终使用 OBF 模式进行生产，因为它可以确保最小的带宽使用以及混淆。

**参考**- [https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideCompilerOptions](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideCompilerOptions)

![在此处输入图像描述](../Images/67fca5a2756dbb98bf898bfbe7ec27c8.png)

# javascript - 未知的 Ajax 输出

> ID：14769039
> 
> 赞同：0
> 
> 时间：2013-02-08T09:06:55.477
> 
> 标签：javascript, jquery

我的 jquery ajax 代码是这样的

```
 $(".head-text").live('click', function (event) {

        var url = new URI().addQuery("showlist", 1);
        $.ajax({
            url: url, type: "GET"
            , success: function (data) {

                var $response = $(data);
                alert($response.html);
            }
        });
        return false;

    }); 
```

并且警报始终显示此消息

```
 function ( str ) {
    if ( typeof str != 'undefined' )
    {
      if ( this.data( 'dotdotdot' ) )
      {
        if ( typeof str != 'function' )
        {
          return this.trigger( 'update', [ str ] );
        }
      }
      return _orgHtml.call( this, str );
    }
    return _orgHtml.call( this );
    } 
```

我不明白出了什么问题或这意味着什么。我只想查看结果 html。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T09:08:55.460

你忘了`()`. 所以你得到了`.html()`方法的源代码。

```
alert( $response.html() ); 
```

# sql - 在 where 子句中使用多个 AND 条件

> ID：14769040
> 
> 赞同：-1
> 
> 时间：2013-02-08T09:06:59.153
> 
> 标签：sql, database

我有一张桌子叫`Manuscript`

```
BOOKID  AUTHORID BOOKNAME       GENRE   NOOFCOPIES  AMOUNT
B105    A102     Diagnosis      Journal 500         10000
B102    A102     The Essence... Fiction 110         11000
B106    A102     Clinical Sci.  Educat. 125         18750
B104    A103     Mind Games     Fiction 200         20000
B100    A102     Sublime        Fiction 100         10000
B101    A105     C Programming  Educati 125         18750
B103    A101     Scribe         Journal 500         10000
B107    A101     Clinical Chem. Educat. 125         54646
B108    A103     Clinical Chem. Educat. 125         54646 
```

我怎样才能获得在所有类型中出版书籍的 AuthorId ？预期产出`A102`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:16:53.353

一个通用的查询，即使添加了更多的流派，它也可以工作，

```
select "AUTHORID"
  from table1
 group by "AUTHORID"
having count(distinct "GENRE") = (select count(distinct "GENRE") from table1) 
```

[**SQLFIDDLE 链接到上述查询**](http://www.sqlfiddle.com/#!4/d1b01/2/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:13:56.233

蛮力方法可能类似于

```
SELECT DISTINCT AUTHORID
FROM Manuscript
WHERE AUTHORID IN 
  (SELECT AUTHORID FROM Manuscript WHERE GENRE LIKE 'Journal')
AND AUTHORID IN
  (SELECT AUTHORID FROM Manuscript WHERE GENRE LIKE 'Fiction')
AND AUTHORID IN
  (SELECT AUTHORID FROM Manuscript WHERE GENRE LIKE 'Education') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T09:21:42.310

一个可能的解决方案是获取不同类型的计数，然后根据它进行过滤：

```
select 
  authorid, count(distinct genre)
from 
  Manuscript
group by 
  authorid
having 
  count(distinct genre) = (select count(distinct genre) from Manuscript) 
```

# emacs - 如何在后台执行自动完成查询？

> ID：14769042
> 
> 赞同：5
> 
> 时间：2013-02-08T09:07:05.253
> 
> 标签：emacs, concurrency, autocomplete, elisp

我对 emacs 自动完成模式感到非常兴奋。但是我的代码库很大，有时，当我键入时，它会尝试提示完成，它会搜索所有可能的单词，然后挂起。这很烦人。

有没有办法在后台并行运行搜索，所以 emacs 仍然会响应用户操作。并且只有当查询完成时该点仍然存在，才建议自动完成？

就像，键盘输入是一个主要过程，永远不会被延迟，并且自动完成作为机器资源的剩余部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T05:03:25.443

[emacs-jedi](https://github.com/tkf/emacs-jedi)正是为 Python 自动完成做的。[`init`您可以使用该属性](http://cx4a.org/software/auto-complete/manual.html#init)向后台进程发送请求，然后将结果存储在某处。在`candidate`属性中，您可以处理存储的结果以将其传递给自动完成。这是交流源定义。请查看源代码以获取详细信息。

```
(ac-define-source jedi-direct
  '((candidates . jedi:ac-direct-matches)
    (prefix . jedi:ac-direct-prefix)
    (init . jedi:complete-request)
    (requires . -1))) 
```

[emacs-ipython-notebook](https://github.com/tkf/emacs-ipython-notebook)也使用了类似的技术，但我猜 emacs-jedi 更容易阅读。

# git - 终端中的撤消树样式git

> ID：14769044
> 
> 赞同：4
> 
> 时间：2013-02-08T09:07:07.420
> 
> 标签：git, emacs

有一个用于 Emacs 的包，它可以让您使用撤消树，而不是仅仅使用撤消前进和后退：[http ://www.emacswiki.org/emacs/UndoTree](http://www.emacswiki.org/emacs/UndoTree)

git 有没有类似的东西，它可以让你查看提交树并选择一个？在命令行还是在 Emacs 中？

![在此处输入图像描述](../Images/d80f9caad3bf2f2849813761e1e3a982.png)

注意：我是 Emacs 新手，我已经安装了出色的 Emacs Live - [https://github.com/overtone/emacs-live](https://github.com/overtone/emacs-live) - 似乎包括 magit。Emacs Live 有一个添加自定义的系统 - 文件放在 ~/.live-packs/cannyboy-pack/ 中。其中有一个 init.el 文件，它引用另一个文件夹中的文件 - config。所以我添加了 (live-load-config-file "magit-custom.el") 并在 config 中添加了一个带有@event_jr 代码的 magit-custom.el 文件，然后在 ~/.live-packs/cannyboy-pack 中引用了它/init.el 通过添加 (live-load-config-file "magit-custom.el")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:48:50.127

在 Emacs 中，您可以使用 magit 的`magit-file-log` 命令查看文件的 git 提交日志树，然后按 键打开日志的 diff `RETURN`。我们可以在 magit 和 Emacs 的内部版本控制感知功能之上构建来直接访问文件。

1.  下载安装[magit](https://github.com/magit/magit)。
2.  添加到您的“init.el”

    ```
    (defun my-magit-visit-file-at-commit (&optional other-window)
      "Visit current commit's file in another window.

    This command makes sense from a `magit-file-log' buffer. "
      (interactive "P")
      (magit-section-action (item info "visit")
        ((commit)
         (let ((filename (expand-file-name (car magit-refresh-args)
                                           (concat (magit-git-dir) "../"))))
           (if (file-readable-p filename)
               (progn
                 (find-file-noselect filename)
                 (with-current-buffer (find-buffer-visiting filename)
                   (vc-revision-other-window info)))
             (message "not able to access %s" filename))))))

    (eval-after-load "magit.el"
      '(define-key magit-log-mode-map (kbd "C-c o") 'my-magit-visit-file-at-commit)) 
    ```

3.  重启 Emacs

4.  打开您感兴趣的提交历史的文件。
5.  `M-x magit-file-log`
6.  去有趣的提交新闻`C-c o`

**编辑**修复缺少的键盘映射规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:16:13.010

我认为那个[magit](https://github.com/magit/magit)就是你要找的。 [这是一个很好的教程](http://alexott.net/en/writings/emacs-vcs/EmacsGit.html)，展示了它的用法。

您还应该看看[Egg](https://github.com/bogolisk/egg)，据说它有更好的用户界面。

# html - 用于样式更改的 CSS - 不适用于 chrome

> ID：14769047
> 
> 赞同：0
> 
> 时间：2013-02-08T09:07:20.277
> 
> 标签：html, css, tags, styles

```
li.disabled a {color : #808080;} 
```

我已经在 .css 文件中添加了上述内容，我的期望是找到任何`<li>`带有禁用类的标签，并使`<a href="#">???</a>`该标签中给出的相应内容显示为灰色。

我的 html 示例是[http://pastebin.com/cnA4gqb3](http://pastebin.com/cnA4gqb3)

这似乎不适用于像chrome这样的浏览器。你能建议我一个通用的css，它可以在所有浏览器中通用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:22:29.227

这可能是一个“重要”问题。其他一些 CSS 可能对 Chrome 更重要。尝试添加 !important 或更改规则的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:13:11.467

你可以使用这样的东西：

这基本上用于 safari 和 chrome，

`@media screen and (-webkit-min-device-pixel-ratio:0) { #u { color:green; /* 仅限 Safari */ } }

# jquery - jQuery - 计算不包含类的 div 的子列表

> ID：14769056
> 
> 赞同：11
> 
> 时间：2013-02-08T09:07:44.077
> 
> 标签：jquery, html-lists, jquery-traversing

我有一个简单的 js 脚本，可以计算无序列表的子节点数。我正在尝试更改脚本，因此它不计算任何包含类“hiddenItem”的div的子项（li）。这是列表和js。

```
 <ul id="dlist" class="sortable">
        <li id="listItem_000002">
            <div>
                <div><a class="itemCollapse"></a>
                </div>Item 2</div>
        </li>
        <li id="listItem_000003">
            <div>
                <div><a class="itemCollapse"></a>
                </div>Item 3</div>
        </li>
        <li id="listItem_000009">
            <div>
                <div><a class="itemCollapse"></a>
                </div>Item 9</div>
        </li>
        <li id="listItem_000012">
            <div class="hiddenItem">
                <div><a class="itemCollapse"></a>
                </div>Item 12 (Hidden)</div>
        </li>
    </ul>
    <br>
    <br>

    <a class="count">Count</a> 
```

.

```
 $(".count").click(function () {
        var tcount = $("#dlist").children("li").length;
        alert(tcount);
    }); 
```

在此示例中，js 提醒有 4 个项目。但是，我正在尝试更改代码，以便它提醒 3 个项目，因为最后一个列表项包含具有类“hiddenItem”的 div。我尝试使用 .filter() 以及其他一些横向方法，但没有成功。有人有更好的主意吗？

这是一个工作小提琴：http: [//jsfiddle.net/YeDdq/1/](http://jsfiddle.net/YeDdq/1/)

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T09:11:40.850

你可以使用`not`方法。

```
var tcount = $("#dlist > li").not(':has(div.hiddenItem)').length; 
```

或`filter`方法：

```
var tcount = $("#dlist > li").filter(function(){
                 return $('div.hiddenItem', this).length === 0;
             }).length; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-21T01:58:43.980

[.not](http://api.jquery.com/not/)有效，并且更具可读性：

```
$('#dlist > li').not('.hiddenItem').length; 
```

编辑：刚刚意识到第一个答案也有 .not 列出，但我不确定他们为什么用`has`伪类让它变得如此复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T09:13:19.897

在这种情况下，过滤器绝对应该是你想要的。从你的小提琴：

```
$(".count").click(function () {
    var tcount = $("#dlist").children("li")
    .filter(function() { return !($(this).children().is('.hiddenItem')); })
    .length;
    alert(tcount);
}); 
```

我已经更新了你的小提琴以反映这一点：http: [//jsfiddle.net/YeDdq/8/](http://jsfiddle.net/YeDdq/8/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T09:26:59.740

您可以使用 :not 和 :has 选择器

```
$(function() {
    var tcount = $("#dlist li:not(:has(.hiddenItem))").length;
    alert(tcount);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T09:17:52.403

试试这个：

```
var tcount = $("#dlist > li").filter(function(){
                                         return $(this).find(".hiddenItem")
                                                       .length==0;
                                     }).length 
```

# java - 骆驼代理的 Web 服务返回一个空的肥皂信封

> ID：14769063
> 
> 赞同：1
> 
> 时间：2013-02-08T09:08:13.620
> 
> 标签：java, cxf, apache-camel

我正在使用 Camel 代理 web 服务（我需要先修改soap 标头）。我正在使用 CXF_MESSAGE 数据格式，因为它可以让我轻松更改肥皂标题。使用soapui 发送soap 消息效果很好，我可以看到它到达了真正的web 服务，但是，**响应总是一个空的soap 信封**？当我切换到 MESSAGE 数据格式时，响应是正确的（但是我无法更改 SOAP 标头）。

我究竟做错了什么？为什么数据格式会改变输入/输出行为？

```
<cxf:cxfEndpoint id="broker">
      ...
</cxf:cxfEndpoint>

<camelContext id="camelContext" xmlns="http://camel.apache.org/schema/spring">
    <endpoint id="realWS" uri="http://localhost:8080/service?throwExceptionOnFailure=true" />

    <route>
        <from uri="cxf:bean:broker?dataFormat=CXF_MESSAGE" />
        <to ref="realWS" />
    </route>        
</camelContext> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:11:23.413

据我所知，根本没有这样`CXF_MESSAGE`的数据格式。有`POJO`（这是默认设置）`PAYLOAD`和`MESSAGE`. 使用该`MESSAGE`数据格式，您将无法处理任何内容`SOAP`- 此模式适用于不`SOAP`处理。

为了处理`SOAP`标题，您需要指定`PAYLOAD`数据格式。然后你就可以处理`SOAP`标题了。[在此处](http://camel.apache.org/cxf.html#CXF-HowtogetandsetSOAPheadersinPAYLOADmode)查看如何执行此操作。**注意：**在此链接中，路由是通过 Java 代码完成的。为了通过 Spring 执行此操作，您必须创建自己的[处理器](http://camel.apache.org/processor.html)，然后从 URI 将您的消息转发到您的自定义处理器，修改标头并将其发送回真实端点。

**也可以看看：**

*   [使用 PAYLOAD 格式代理](http://fusesource.com/docs/esbent/7.1/camel_cxf/Proxying-Payload.html)
*   [Apache Camel CXF 组件](http://camel.apache.org/cxf.html)

# eclipse - SONAR 与 Eclipse 集成

> ID：14769073
> 
> 赞同：1
> 
> 时间：2013-02-08T09:08:51.300
> 
> 标签：eclipse, ant, sonarqube

正在使用 ant 研究与 eclipse 集成的声纳

但是当我“右键单击项目-->配置-->与声纳关联”时，什么也没有发生！

我的蚂蚁版本是1.7.1

Eclipse 是 Helios(3.6)

声纳版本是 3.4.1

欢迎大家的支持......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:00:17.310

Sonar Eclipse 与 Ant 无关，它是真正独立的。

[您应该遵循文档页面](http://docs.codehaus.org/display/SONAR/Using+Sonar+in+Eclipse)中列出的不同步骤。最值得注意的是，您需要在某处（在您的本地计算机或其他地方）启动并运行 Sonar 服务器，并且您必须确保您已经启动了对项目的分析，您可以在 Sonar Web 应用程序上浏览该分析。否则，您将永远无法在 Eclipse 中关联您的项目。

在 Sonar 服务器上对项目进行第一次分析后，您需要在 Eclipse 设置中配置服务器的 URL。只有在此之后，您才能将您的项目与 Sonar 相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:18:52.270

这可能与您的插件版本有关。如[文档](http://docs.codehaus.org/display/SONAR/Installing+Sonar+in+Eclipse)中所述， 3.0 版仅与 Eclipse 3.7 及更高版本兼容。

我建议您升级 Eclipse 或降级插件。

# sql-server-2005-express - sql-server 2005 中的动态查询与显式查询

> ID：14769078
> 
> 赞同：0
> 
> 时间：2013-02-08T09:09:03.133
> 
> 标签：sql-server-2005-express

有人可以解释一下吗？从理论上讲，两者都是相同的查询，但它们给出的答案不同。

一个）

```
declare @date varchar(10)

set date = '03/02/2013'

select count(*) from table1 where (from <= @date) and (@date <= to) 
```

b)

```
declare @date varchar(10)

set date = '03/02/2013'

set @sqlstring = 'select count(*) from table1 where (from <= ' + @date + ') and (' + @date + ' <= to)' 

exec sp_executeSql @sqlstring 
```

结果第一组句子给出'2'，这是正确答案，但在第二组句子中，我通过字符串动态执行相同的查询，但答案是'0'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:36:15.897

首先，有效的 SQL 是

```
select count(*) from table1 where (from <= '03/02/2013') and ('03/02/2013' <= to) 
```

在第二个中，有效的 SQL 是

```
select count(*) from table1 where (from <= 03/02/2013) and (03/02/2013 <= to) 
```

也就是说，第一个使用不需要分隔符的变量。在第二个中，你有一个整数常量表达式，它应用了“[常量折叠](http://en.wikipedia.org/wiki/Constant_folding)”。整数 3 除以 2 除以 2013 = 0 = 1900 年 1 月 1 日更改为日期

你需要这个：

```
set @sqlstring = 'select count(*) from table1
    where (from <= ''' + @date + ''') and (''' + @date + ''' <= to)' 
```

请注意，您应该使用`yyyymmdd`ISO 8601 日期以保持一致性和清晰性

*   [如何防止超出范围的日期时间值错误？](https://stackoverflow.com/questions/2420728/how-to-prevent-out-of-range-datetime-value-error/2420793#2420793)

# c# - 如何使用c#从当前日期中减去前一个日期

> ID：14769081
> 
> 赞同：1
> 
> 时间：2013-02-08T09:09:07.490
> 
> 标签：c#

我想从当前日期中减去上一个日期。上一个日期可能是 2 个月零 15 天或 1 年 9 个月零 10 天......像这样等等......所以请我如何用 C# 编写编码。多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:15:05.297

使用任何答案`TimeSpan`都*无法*给您“2个月零15天” - 因为一个月的长度会随着时间而变化。

使用基类库来做这件事很痛苦……这也是我开始[Noda Time](http://noda-time.googlecode.com)项目的原因之一。在其其他功能中，它允许您确定`Period`日期之间的时间（或日期和时间等）。

例如，让我们看看我在 Stack Overflow 上呆了多久：

```
LocalDate today = new LocalDate(2013, 2, 8);
LocalDate start = new LocalDate(2008, 9, 26);
// This defaults to using year, month, day units. You can specify alternatives.
Period period = Period.Between(start, today);

Console.WriteLine("{0} years; {1} months; {2} days",
                  period.Years, period.Months, period.Days); 
```

输出：

```
4 years; 4 months; 13 days 
```

或者，如果您*实际上*想从日期中减去一个句点（问题不是很清楚），您也可以这样做：

```
Period period = new PeriodBuilder { Years = 4, Months = 4, Days = 13 }.Build();
LocalDate today = new LocalDate(2013, 2, 8);
LocalDate start = today - period;
Console.WriteLine(start); 
```

输出：

```
25 September 2008 
```

请注意，这*并没有*给出 9 月 26 日，因为[日期/时间算术有点疯狂](http://noda-time.blogspot.co.uk/2010/11/joys-of-datetime-arithmetic.html)。如果您*将时间段添加*到 9 月 26 日，您会得到今天……但这不是一回事。将此视为警告，您需要*非常*小心地描述您想要实现的目标:)

但是，您*可以*很容易地使用 BCL 来完成第二面：

```
DateTime today = new DateTime(2013, 2, 8);
DateTime start = today.PlusYears(-4).PlusMonths(-4).PlusDays(-13); 
```

但是，没有 BCL 类型来表示“年、月、日”的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:12:07.523

你的问题有点令人困惑。您是要从另一个日期中减去一个日期，还是要从一个日期中减去一段时间。

**1\. 从另一个日期减去一个日期：**

```
DateTime previousDate = new DateTime(1990, 12, 12);
DateTime currentDate = DateTime.UtcNow;
TimeSpan difference = currentDate - previousDate; 
```

然后，您可以根据需要使用这些`TimeSpan`方法来获取不同时间单位的差异。

以下是有关 TimeSpan 的更多信息：http: [//msdn.microsoft.com/en-us/library/system.timespan.aspx](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

**2.从日期中减去一段时间**

```
DateTime currentDate = DateTime.UtcNow;
TimeSpan periodOfTime = new TimeSpan(12, 12, 0, 0);
DateTime newDate = currentDate - periodOfTime; 
```

但是，如果您想要的话，您必须自己计算一个月的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:12:14.613

当您在 C# 中减去两个日期时，您会得到一个 TimeSpan 对象。您可以访问它的不同属性以获取实际的天数、小时数、分钟数等。它代表：

```
DateTime a;
DateTime b;

//assign some values

TimeSpan span = a.Subtract(b);
Console.WriteLine("Days: " + span.Days); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T09:12:57.307

以下应该做。

```
TimeSpan diff = DateTime.Now - previousDate; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T09:11:35.293

您可以使用[`DateTime.Subtract`](http://msdn.microsoft.com/en-us/library/ae6246z1.aspx).

文章中的例子：

```
System.DateTime date1 = new System.DateTime(1996, 6, 3, 22, 15, 0);
System.DateTime date2 = new System.DateTime(1996, 12, 6, 13, 2, 0);
System.DateTime date3 = new System.DateTime(1996, 10, 12, 8, 42, 0);

// diff1 gets 185 days, 14 hours, and 47 minutes.
System.TimeSpan diff1 = date2.Subtract(date1);

// date4 gets 4/9/1996 5:55:00 PM.
System.DateTime date4 = date3.Subtract(diff1);

// diff2 gets 55 days 4 hours and 20 minutes.
System.TimeSpan diff2 = date2 - date3;

// date5 gets 4/9/1996 5:55:00 PM.
System.DateTime date5 = date1 - diff2; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T09:11:48.987

```
TimeSpan timeSpan = new TimeSpan(2,2,0);
DateTime dateTime = DateTime.Now.Subtract(timeSpan); 
```

# osx-mountain-lion - EPD Python vs System Python--OSX Mountain Lion 10.8

> ID：14769084
> 
> 赞同：1
> 
> 时间：2013-02-08T09:09:14.247
> 
> 标签：osx-mountain-lion, pycuda, enthought

我是一个两周大的 mac 用户，所以请耐心等待。我正在尝试将 EPD python 设置为我的默认 python 解释器，而不是 mac 附带的系统 python。据我了解，EPD 通过修改 .bash_profile 在安装时自动执行此操作，但在我安装 EPD 后，.bash_profile 没有改变，据我所知，系统 python 仍然是默认解释器。我该如何改变这个？

我想将默认python更改为EPD的主要原因是我安装的所有包都自动放入/Library/Python/2.7/site-packages目录而不是与EPD关联的site-packages目录。特别是，我无法将 PyCuda 安装在 EPD 的 site-packages 目录中。

我希望这有点道理。我迷路了，不知道从这里去哪里。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:40:01.387

添加行

`export PATH=/Library/Frameworks/Python.framework/Versions/Current/bin:$PATH`

到您的`.bashrc`文件应该可以工作。

从理论上讲，EPD 安装程序应该已经完成​​了这项工作……也许是权限问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:34:26.810

补充几点。

通常，EPD 安装程序通过在 ~/.bash_profile 的底部添加行来更改 PATH；如果您确定它没有，您也可以检查 ~/.profile 。

也许您以其他用户身份安装了 EPD？

既然您说您是 Mac 新手，我还要提一下，在您安装 EPD 之前已经打开的任何终端窗口中，PATH 都不会更改。

另外，一个重要的警告：由于您已经在系统 Python 中安装了第 3 方包，请参阅这篇文章： https: [//support.enthought.com/entries/22094157-OS-X-Conflict-with-installed-早期安装包中的 Python 安装](https://support.enthought.com/entries/22094157-OS-X-Conflict-with-installed-packages-in-earlier-Python-installation)

您还可以在同一个知识库站点中找到其他有用的文章。

# javascript - javascript函数如何访问事件变量？

> ID：14769085
> 
> 赞同：0
> 
> 时间：2013-02-08T09:09:16.130
> 
> 标签：javascript, dom

当 DOM 事件调用 javascript 函数时，在函数内部您可以访问代表 DOM 事件的事件变量吗？它在幕后如何运作？因为该函数没有获取事件参数，并且我们不使用参数对象..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:52:57.563

DOM 事件的简短摘要：

绑定事件监听器的正确方法是：

```
var elem = document.querySelector("div");

elem.addEventListener("event-type",function(e){ /*e is the event object*/ }); 
```

`addEventListener()`监听`event-type`DOM-Element 上的事件`elem`。

`addEventListener()`总是将事件对象作为第一个参数传递给函数。您可以通过在函数头（通常命名为`e`）中定义此参数或通过来访问此参数`arguments[0]`。`this`指的是事件发生的 Dom-Element。

IE（最高版本 8）具有绑定事件处理程序的专有方式：

```
elem.attachEvent("event-type",function(){}) 
```

它有一些缺点：`this`指的是全局对象而不是DOM-Element，并且`event`Object*没有*作为参数传递。

但是，Microsoft 引入`window.event`了始终保存文档中发生的最后一个事件的方法。因此，您可以在函数中使用它，如下所示：

```
function(){
   var e = window.event;
} 
```

这`window.event`在多个浏览器中可用，但您不应依赖它或使用它（建议大多数全局变量使用它）。

# grails - Grails WebFlow 错误处理

> ID：14769086
> 
> 赞同：1
> 
> 时间：2013-02-08T09:09:18.027
> 
> 标签：grails, spring-webflow, grails-2.0

一般来说，有没有简单的方法来处理 Grails Spring WebFlow 中的错误？我的意思是不要在每个块中都有一个 try-catch 块，而是要有一个用于整个流程的通用处理程序。

我们找到了一种将一些逻辑放入错误控制器（通过映射访问`"500"(controller: "serverErrors", action: "error500")`）的解决方案。但这还不够，因为无论如何都会抛出异常。

我们想捕获当用户手动更改 url 中的 web 流程步骤时发生的[SnapshotNotFoundException](http://static.springsource.org/spring-webflow/docs/2.3.x/javadoc-api/org/springframework/webflow/execution/repository/snapshot/SnapshotNotFoundException.html)`?execution=e4s2` ，比如说从到`?execution=e4s3`

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T06:14:17.870

为什么不为异常添加全局转换？

```
<global-transitions>
    <transition on-exception="java...SnapshotNotFoundException" to="..."/>
</global-transitions> 
```

# javascript - ios应用程序中的ChildBrowser插件崩溃

> ID：14769087
> 
> 赞同：1
> 
> 时间：2013-02-08T09:09:18.103
> 
> 标签：javascript, ios, cordova, phonegap-plugins

我正在使用 ChildBrowser iOS cordova 插件来显示 pdf 文件。当我严格滚动在子浏览器插件中打开的 pdf 文件时，应用程序崩溃并在控制台中打印以下消息。似乎是一种记忆问题

```
Feb  8 14:23:09 MobComp-iPad-3 MobileWorkManager[452] : Received memory warning.

Feb  8 14:23:09 MobComp-iPad-3 MobileWorkManager[452] : Received memory warning.

Feb  8 14:23:09 MobComp-iPad-3 MobileWorkManager[452] : Received memory warning.

Feb  8 14:23:09 MobComp-iPad-3 MobileWorkManager[452] : Received memory warning.

Feb  8 14:23:10 MobComp-iPad-3 backboardd[51] : BKSendGSEvent ERROR sending event type 3001: (ipc/send) invalid destination port (0x10000003)

Feb  8 14:23:10 MobComp-iPad-3 backboardd[51] : BKSendGSEvent ERROR sending event type 3001: (ipc/send) invalid destination port (0x10000003)

Feb  8 14:23:10 MobComp-iPad-3 com.apple.launchd[1] (UIKitApplication:com.InfoImage[0x2742][452]) : (UIKitApplication:com.InfoImage[0x2742]) Exited: Killed: 9

Feb  8 14:23:10 MobComp-iPad-3 UserEventAgent[13] : jetsam: kernel termination snapshot being created

Feb  8 14:23:10 MobComp-iPad-3 backboardd[51] : Application 'UIKitApplication:com.InfoImage[0x2742]' exited abnormally with signal 9: Killed: 9

Feb  8 14:23:10 MobComp-iPad-3 ReportCrash[480] : libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary

Feb  8 14:23:10 MobComp-iPad-3 ReportCrash[480] : Saved crashreport to /Library/Logs/CrashReporter/LowMemory-2013-02-08-142310.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0

Feb  8 14:23:09 MobComp-iPad-3 MobileWorkManager[452] : Received memory warning.

Feb  8 14:23:09 MobComp-iPad-3 MobileWorkManager[452] : Received memory warning.

Feb  8 14:23:09 MobComp-iPad-3 MobileWorkManager[452] : Received memory warning.

Feb  8 14:23:09 MobComp-iPad-3 MobileWorkManager[452] : Received memory warning.

Feb  8 14:23:10 MobComp-iPad-3 backboardd[51] : BKSendGSEvent ERROR sending event type 3001: (ipc/send) invalid destination port (0x10000003)

Feb  8 14:23:10 MobComp-iPad-3 backboardd[51] : BKSendGSEvent ERROR sending event type 3001: (ipc/send) invalid destination port (0x10000003)

Feb  8 14:23:10 MobComp-iPad-3 com.apple.launchd[1] (UIKitApplication:com.InfoImage[0x2742][452]) : (UIKitApplication:com.InfoImage[0x2742]) Exited: Killed: 9

Feb  8 14:23:10 MobComp-iPad-3 UserEventAgent[13] : jetsam: kernel termination snapshot being created

Feb  8 14:23:10 MobComp-iPad-3 backboardd[51] : Application 'UIKitApplication:com.InfoImage[0x2742]' exited abnormally with signal 9: Killed: 9

Feb  8 14:23:10 MobComp-iPad-3 ReportCrash[480] : libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary

Feb  8 14:23:10 MobComp-iPad-3 ReportCrash[480] : Saved crashreport to /Library/Logs/CrashReporter/LowMemory-2013-02-08-142310.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0 
```

有时应用程序崩溃并重新启动。提前致谢。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T04:02:46.113

将 childbrowser 插件更新到较新版本解决了该问题。

# linux - Linux下SVN结账使用Ant

> ID：14769088
> 
> 赞同：0
> 
> 时间：2013-02-08T09:09:20.907
> 
> 标签：linux, svn, ant

当我在 linux ubuntu 中运行 build.xml 时，应该从 svn 签出项目会给出以下错误：-

```
svn:

BUILD FAILED
java.net.MalformedURLException: Invalid svn url: svn://xxx-xx-xx-xx-xx.compute-1.amazonaws.com/srv/svn
    at org.tigris.subversion.svnclientadapter.SVNUrl.parseUrl(SVNUrl.java:117)
    at org.tigris.subversion.svnclientadapter.SVNUrl.<init>(SVNUrl.java:63)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.apache.tools.ant.IntrospectionHelper$11.set(IntrospectionHelper.java:1069)
    at org.apache.tools.ant.IntrospectionHelper.setAttribute(IntrospectionHelper.java:388)
    at org.apache.tools.ant.RuntimeConfigurable.maybeConfigure(RuntimeConfigurable.java:392)
    at org.apache.tools.ant.RuntimeConfigurable.maybeConfigure(RuntimeConfigurable.java:349)
    at org.apache.tools.ant.UnknownElement.handleChild(UnknownElement.java:568)
    at org.apache.tools.ant.UnknownElement.handleChildren(UnknownElement.java:346)
    at org.apache.tools.ant.UnknownElement.configure(UnknownElement.java:198)
    at org.apache.tools.ant.UnknownElement.maybeConfigure(UnknownElement.java:160) 
```

实际上 svn 的路径是我从本地盒子连接的。所以我不知道我应该在这里给出什么路径。svn 在同一个 linux 盒子里。

我build.xml所在的目录路径是：-/home/ubuntu/antCheckout 而svn所在的路径是：-/srv/svn

我也试过这条路：- ssh://srv/svn 但异常是一样的。

这是我的 build.xml：-

```
<?xml version="1.0"?>
<project name="Test" default="Main" basedir=".">
 <!-- Sets variables which can be used. -->
  <property name="checkout" location="./svncheckout" />
 <!-- Define the classpath which includes the jars 
      that are required for svnant.jar -->
 <path id="/usr/local/ant/apache-ant-1.7.1/">
  <pathelement location="lib/svnant.jar" />
  <pathelement location="lib/svnClientAdapter.jar" />
  <pathelement location="lib/svnjavahl.jar" />
  <pathelement location="lib/svnkit.jar" />
 </path>

 <typedef resource="org/tigris/subversion/svnant/svnantlib.xml"     
      classpathref="/usr/local/ant/apache-ant-1.7.1/" />

 <!-- Deletes the existing build, docs and dist directory-->
 <target name="clean">
  <delete dir="${checkout}" />
 </target>

 <!-- Creates the  build, docs and dist directory-->
 <target name="makedir">
  <mkdir dir="${checkout}" />
 </target>

 <!-- Checkout the latest source code of svnant itself-->
 <target name="svn">
  <svn username="guest" password="">
   <checkout url="svn://srv/svn" revision="HEAD" destPath="${checkout}" />
  </svn>
 </target>

 <target name="Main" depends="clean, makedir, svn">
  <description>Main target</description>
 </target>
</project> 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:41:55.047

如果你在 Linux 上，你有 Subversion 命令行客户端吗？

尝试这个：

```
$ svn --version 
```

如果您有 Subversion 命令行客户端，请尝试以下命令：

```
$ svn ls svn://svn/srv 
```

看看你得到了什么。我敢打赌，您会收到一条错误消息，告诉您该`svn://srv/svn`URL 未找到或不是有效的 URL。

这一行：

```
<checkout url="svn://srv/svn" revision="HEAD" destPath="${checkout}" /> 
```

相当于命令行：

```
$ svn checkout -rHEAD svn://srv/svn .svncheckout 
```

在此命令起作用之前，您必须找到有效的 Subversion 存储库 URL。然后，更改子任务中的`url`参数以匹配该 URL。`<checkout>`Subversion 使用 URL 指向存储库地址。

顺便说一句，这到底是做什么的？为什么要将工作目录签出到`.svncheckout`目录？那是 Unix 中的一个*隐藏*目录。

* * *

顺便说一句：除非程序在本地系统上运行，`svn co svn://127.0.0.1`否则它不会工作。`snvserve`该`svnserve`计划

# c# - 安装项目的C#快捷方式

> ID：14769090
> 
> 赞同：-1
> 
> 时间：2013-02-08T09:09:32.303
> 
> 标签：c#, shortcut, setup-deployment

我为 c# 应用程序创建了一个安装文件。我在其中为应用程序创建了一个快捷方式，安装后该快捷方式将添加到桌面中。但是我的应用程序必须启动将文件拖入快捷方式或双击它。但是将文件拖到快捷方式不起作用。

除此之外，我正在考虑将.exe 直接安装到deskyop 的可能性。但在这种情况下，还需要在桌面中添加支持文件，这不是一个好方法。

任何建议都是最受欢迎的。

问候拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:15:30.000

这是我在将文件放在快捷方式或 exe 上时尝试过的示例代码。Windows 自动将路径作为参数发送到程序的主程序。就那么简单。

尝试在这个小程序上放置一些东西，您将在控制台中看到文件的路径。

```
class Program
{
    static void Main(string[] args)
    {
        for (int i = 0; i < args.Length; i++)
        {
            Console.WriteLine("ARGS>>" + args[i]);
        }

        Console.ReadLine();

    }
} 
```

如果您是编程新手，并且您的程序没有主程序，您可以直接启动表单。您可以使用 `Environment.GetCommandLineArgs();` 它存储发送给我朋友的程序的参数。在这种情况下，它将有路径到快捷方式上的任何内容。

# php - 从特定文件夹出去时销毁会话

> ID：14769091
> 
> 赞同：0
> 
> 时间：2013-02-08T09:09:33.793
> 
> 标签：php, session

基本上，当用户从一个文件夹转到同一域上的另一个文件夹时，我正在使用一个函数，该函数会破坏 php 会话，如下所示：`mywebsite.com/folder1/index.php`

此文件夹具有能够启动会话的特定用户列表，但我不希望他们能够将此会话带到`mywebsite.com/folder2/`（它有自己的用户列表）。

我想在`isset($_SESSION['login'])`每次启动页面时检查是否并将其与用户列表进行比较。但是，我无法想象还有另一种方法可以做到这一点，因为在每一页的开头都有一个 sql req 并不是那么好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:15:10.307

设置 cookie 时，限制其*路径*：

```
session_set_cookie_params(0, '/folder1'); 
```

[http://php.net/session_set_cookie_params](http://php.net/session_set_cookie_params)

如果您另外使用每个文件夹的唯一[会话名称](http://php.net/session_name)，您将更好地确保会话被限制在某个路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:15:00.903

您可以使用附加级别数组：

```
$_SESSION['folder1']['login']
$_SESSION['folder2']['login'] 
```

# php - 如何使用mysql在php中显示两个日期之间的数据？

> ID：14769094
> 
> 赞同：-6
> 
> 时间：2013-02-08T09:09:45.217
> 
> 标签：php, mysql

如何从 mysql 显示这个 ..??

```
$sql=mysql_query("SELECT * FROM tour_table WHERE visited_date BETWEEN '" . $date1_ob . "' AND '" . $date2_ob . "'"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:19:11.887

尝试使用以下，我假设`$date1_ob`并且`$date2_ob`格式正确

```
$sql=mysql_query("SELECT * FROM tour_table WHERE visited_date >='" . $date1_ob . "' AND visited_date <= '" . $date2_ob . "'"); 
```

# jquery-ui - 确认后jquery模式弹出返回查看并显示摘要消息

> ID：14769097
> 
> 赞同：0
> 
> 时间：2013-02-08T09:09:56.720
> 
> 标签：jquery-ui, asp.net-mvc-4, modal-dialog

我有一个模式弹出窗口只是为了确认。单击“继续”时，它会关闭并转到控制器操作删除并返回。但是返回视图后，没有显示摘要消息验证 div，这正是我想要的。

这是带有 div 代码的模态：

```
<div id="delete-dialog" title="Confirmation">
    <p>Are you sure you want to delete this?</p>
</div>

<script type="text/javascript" lang="javascript">
    //$(document).ready(function () {

        $(function () {
            var deleteLinkObj;

            $('.delete-link').click(function () {
                deleteLinkObj = $(this);  //for future use
                $('#delete-dialog').dialog('open');

                return false; // prevents the default behaviour
            });

            $('#delete-dialog').dialog({
                autoOpen: false,
                width: 400,
                height: 250,
                resizable: false,
                modal: true, //Dialog options

                buttons: {
                    "Continue": function () {
                        $.post(deleteLinkObj[0].href, function (data)
                        {  //Post to action
                            if (data == '')
                            {

                            }
                            else
                            {

                            }

                        });

                        $(this).dialog("close");
                    },
                    "Cancel": function ()
                    {
                        $(this).dialog("close");
                    }
                }
            });
        });
    //})
</script> 
```

所以我基本上想要它做的是，如果单击“继续”，则转到控制器，并显示摘要消息。

那么从控制器来后如何“停止”jquery函数的执行呢？

我从[这个](http://ricardocovo.com/2010/09/02/asp-mvc-delete-confirmation-with-ajax-jquery-ui-dialog/)网站得到了模式代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:19:11.173

您应该在帖子之后在回调中使用[.append](http://api.jquery.com/append/) of 。`jQuery`

因为你没有显示任何 div。我假设 div 为

```
<div id="summary"></div> 
```

这就是你最终对话框的样子：

```
$('#delete-dialog').dialog({
        autoOpen: false,
        width: 400,
        height: 250,
        resizable: false,
        modal: true, //Dialog options

        buttons: {
            "Continue": function () {
                $.post(deleteLinkObj[0].href, function (data)
                {  //Post to action
                    if (data == '')
                    {

                    }
                    else
                    {
                        $('#summary').append(data); // this will append the content in data to your div with id as summary
                    }

                });

                $(this).dialog("close");
            },
            "Cancel": function ()
            {
                $(this).dialog("close");
            }
        }
    }); 
```

希望能帮助到你

# knockout.js - 滚动列表中的大量数据

> ID：14769103
> 
> 赞同：1
> 
> 时间：2013-02-08T09:10:24.323
> 
> 标签：knockout.js

我有问题。我用从 REST 获得的几个对象创建了滚动列表：

```
<script>
    ...
    that.array = ko.observableArray([]);
    that.getData = function(){
      $.getJson("linkToResource",function(json){
        that.array(ko.mapping.toJS(json));
      }
    }
    ...
</script> 
```

并将其作为模板显示在 foreach 中：

```
<ul data-bind="foreach: array">
  <li data-bind="template: {name: 'my-element-template'}"></li>
</ul> 
```

我将 mCustomScrollbar 应用于此 ul 列表。一切都很顺利，直到我的 REST 服务返回大量数据（2000-20000 行）。

这个数据包只是杀死浏览器。它必须显示 2000-20000 li 元素。

我做了一些研究，发现像 koGrid 这样的东西非常适合这么多的数据。这个插件在视口中只显示很少的元素，滚动只是改变应该显示的数据。

不幸的是 koGrid 不适合我的问题。

我需要带有自定义滚动的可滚动列表，并且可以在模板上定义为一行。

你知道任何可以帮助我解决这个问题的淘汰赛插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:26:05.620

老实说，我认为你问错了问题！为什么 koGrid 不适合您的问题？我没用过，但是看[文档](https://github.com/Knockout-Contrib/KoGrid/wiki/About-Custom-Templates)，你可以有一个自定义的行模板。koGrid 没有做的到底是什么你想做的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:47:14.437

我发现了类似 giga-scroll [https://github.com/mpj/giga-scroll](https://github.com/mpj/giga-scroll) 看起来不错，但我必须将普通滚动更改为自定义滚动，就像在 jScrollPane 中一样。

还支持延迟加载数据。

# ios - 尝试从我的自定义 iOS 应用与 Google+ 共享时出现 404 错误

> ID：14769105
> 
> 赞同：5
> 
> 时间：2013-02-08T09:10:28.507
> 
> 标签：ios, objective-c, http-status-code-404, share, google-plus

我为 iOS 安装了 google+ SDK 并实现了分享功能：

```
- (void)customUIASView:(CustomUIASView *)customUIASView didClickGoogle:(UIButton *)sender{

    static NSString * const kClientId = @"122385832599-2mcvobo565un3ab7d6d06m6fjemocto9.apps.googleusercontent.com";
    share = [[GPPShare alloc] initWithClientID:kClientId];
    share.delegate = self;
    [[[[share shareDialog]
       setURLToShare:[NSURL URLWithString:myUrl]]
      setPrefillText:oPin.sName] open];

} 
```

一切正常，控制台中没有错误，但是当使用此链接打开 safari mobile 时（适用于所有桌面浏览器），我收到 404 错误！

[https://plus.google.com/share?client_id=122385832599-2mcvobo565un3ab7d6d06m6fjemocto9.apps.googleusercontent.com&continue=com.pinstyle.pinstyle%3A%2F%2Fshare%2F&text=NEU%20H%26M%20Divided%20Grey%20blogger% 20Trend%20urban%20Leder%20Biker%20Jacke%20Nieten%2034%20S%20XS%2036&url=http%3A%2F%2Fpinboard.maryme.lan.s3.amazonaws.com%2F1%2F25607-neuhmdividedgreybloggertrendurbanlederbikerjackenieten34&sxs36.jpg.jpg pinstyle&gpsdk=1.0.0](https://plus.google.com/share?client_id=122385832599-2mcvobo565un3ab7d6d06m6fjemocto9.apps.googleusercontent.com&continue=com.pinstyle.pinstyle%3A%2F%2Fshare%2F&text=NEU%20H%26M%20Divided%20Grey%20blogger%20Trend%20urban%20Leder%20Biker%20Jacke%20Nieten%2034%20S%20XS%2036&url=http%3A%2F%2Fpinboard.maryme.lan.s3.amazonaws.com%2F1%2F25607-neuhmdividedgreybloggertrendurbanlederbikerjackenieten34sxs36.jpg&bundle_id=com.pinstyle.pinstyle&gpsdk=1.0.0)

有人有同样的错误： [https ://groups.google.com/forum/#!msg/google-plus-developers/ZSCxGNTqRJY/jidPJ076BfYJ](https://groups.google.com/forum/#!msg/google-plus-developers/ZSCxGNTqRJY/jidPJ076BfYJ)

但解决方案是将 BundleID 更改为另一个至少有一个点的。我的 bundleId 已经有两个点，所以我不知道该怎么做。有谁知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T12:37:57.157

似乎是捆绑包 ID 身份验证错误，如果您将捆绑包 ID 更改为另一个而没有在谷歌服务器上的应用程序服务中进行相应更改，您应该会收到此错误。

因此，请尝试修改您的 bundle id 并将其修改为您在 Google 服务器上输入的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T20:34:28.973

确保您在 Google 开发者控制台中的 bundle id 正确写入。请记住它是**区分大小写**的！这是我的问题...

# wordpress - 从 HTML 创建 Wordpress 模板

> ID：14769106
> 
> 赞同：0
> 
> 时间：2013-02-08T09:10:32.267
> 
> 标签：wordpress, wordpress-theming

我有一个使用各种 div 结构的 HTML 模板。现在我必须将其创建为 wordpress 主题。我对此有点困惑。我在这里附上设计![在此处输入图像描述](../Images/d33242e8da99543580b0f34bee67483d.png)

所以所有的粉红色边框都是div。现在我是将整个内容放在 wordpress 页面中，还是有更好的方法来创建模板？我希望我只是把内容放在 ADD PAGE 区域。它会自动进行对齐。所有的黑线都是内容（文本）。这是单页的设计。知道如何制作模板以使内容自动对齐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:17:34.163

我假设图像及其旁边的 3 个 div 都属于一个主题？如果是这样，您可以使用自定义帖子类型，然后为这些不同的 div 添加不同的元框。另一种解决方案是使用短代码，这样`[divone][/divone]` `[divtwo][/divtwo]`您就可以使用以下代码创建它们：

```
function divone_func($atts, $content="") {
     return '<div class="one">'.$content.'</div>';
}
add_shortcode('divone', 'divone_func'); 
```

此代码进入您的`functions.php`文件，`style.css`您可以使用以下代码设置 div 样式：

```
div.one{
    /* your CSS here */
} 
```

**更多阅读：**

*   [http://codex.wordpress.org/Function_Reference/register_post_type](http://codex.wordpress.org/Function_Reference/register_post_type)
*   [http://codex.wordpress.org/Function_Reference/add_meta_box](http://codex.wordpress.org/Function_Reference/add_meta_box)
*   [http://codex.wordpress.org/Function_Reference/add_shortcode](http://codex.wordpress.org/Function_Reference/add_shortcode)

# bulk - libusb 批量传输

> ID：14769107
> 
> 赞同：7
> 
> 时间：2013-02-08T09:10:32.183
> 
> 标签：bulk, libusb, data-transfer-objects

我正在尝试使用 libusb1.0.9 实现用户空间 USB 驱动程序。我有 lpc2148 蓝板（ARM7）。这个板由 Bertrik Sikken 先生加载了开源 USB 堆栈/固件。现在我的用户空间驱动程序正在尝试用板读写。我正在获取垃圾数据。我想了解大宗转账的流程。对于任何传输/事务是否涉及内核设备驱动程序？我们还需要usb gadget设备驱动程序吗？我无法理解数据被复制的位置。重要的是，当我产生读/写中断时，我可以在 LCD 上看到正确的数据。我需要读/写 USBRxData/USBTxData 吗？请做必要的事。

我尝试了以下代码进行批量传输读写..

```
int usb_read(struct libusb_device *dev,struct libusb_device_handle *hDevice)  
{  
    char *data,*data1;  
    struct  libusb_endpoint_descriptor *ep;     
    struct  libusb_interface_descriptor *id;  
    int len=64,r,ret_alt,ret_clm,ret_rst,i;  
    struct libusb_device **list;  

    data = (char *)malloc(512); //allocation  of buffers  
    data1 = (char *)malloc(512);  
    memset(data,'\0',512);  
    memset(data1,'\0',512);  

    if(hDevice==NULL)  
    {  
        printf("\nNO device found\n");  
        return 0;  
    }  
    int ret_open = libusb_open(dev,&hDevice);  
    if(ret_open!=0)  
    {  
        printf("Error in libusb_open\n");  
        libusb_free_device_list(list,1);  
        return -1;  
    }       
    char str_tx[512]="G";    //data to send to device  
    char str_rx[512];        //receive string   
    data = str_tx;  

    printf("data::%s\t,str::%s\n",data,str_tx);  
    //printf("%c\n",data);  
    ep = active_config(dev,hDevice);  
    printf("after ep\n");  
    //printf("alt_interface = %d\n",alt_interface);  
    ret_rst = libusb_reset_device(hDevice);  
    if(ret_rst < 0)  
    {  
        printf("Error in reset :: %d",ret_rst);  
        return -1;  
    }  
    printf("original data1 : %s\n",data1);  
    r = libusb_bulk_transfer(hDevice,0x08,str_tx,512,&len,0);  
    //write to device buffer from data  

    printf("Error number :: %d\n",r);  
    int le = ep->bEndpointAddress;  
    int ty = ep->bDescriptorType;  
    int y = ep->bmAttributes;  

    printf("y::%d\tatt:: %d\n",y,ep->bmAttributes);  
    if(r==-1)  
        printf("Error in io\n");  
    if(r==0)  
    {  
        printf("data returned :: %s\n",data);  
        printf("len= %d\n",len);  
        printf("Device Button Pressed!!!!\n");  
    }  
    else  
    {  
        printf("Error in bulk transfer\n");  
        return -1;  
    }  

    r = libusb_bulk_transfer(hDevice,0x82,data1,512,&len,0);   
    //read from device buffer to data1  
    //str_rx = data1;  
    //printf("End point address::%d\n",le);  
    //printf("End point desc.type::%d\n",ty);  
    if(r==-1)  
        printf("Error in io\n");  
    if(r==0)  
    {  
        printf("data1 returned::%s\n",data1);   //received string in data1  
        printf("len= %d\n",len);  
        printf("Device Button Pressed!!!!\n");  
    }  
    else  
    {  
        printf("Error in bulk transfer\n");  
        return -1;  
    }  

    return 0;  
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T14:30:26.400

试试下面给出的代码，它应该可以在 lpc2148 上运行。我已经使用配置为在写入发生（来自用户空间）并且 RTC 开始运行后从 USB 接收中断的 lpc2148 对此进行了测试。

回答您的问题是否涉及读/写内核驱动程序，据我研究，您必须分离内核驱动程序并使用 libusb API 声明接口。虽然我不确定它是否可以在不分离的情况下完成。

```
#include <stdio.h>    
#include <stdlib.h>    
#include <sys/types.h>    
#include <string.h>    
#include </usr/local/include/libusb-1.0/libusb.h>    

#define BULK_EP_OUT     0x82    
#define BULK_EP_IN      0x08    

int interface_ref = 0;    
int alt_interface,interface_number;    

int print_configuration(struct libusb_device_handle *hDevice,struct libusb_config_descriptor *config)    
{    
    char *data;    
    int index;    

    data = (char *)malloc(512);    
    memset(data,0,512);    

    index = config->iConfiguration;    

    libusb_get_string_descriptor_ascii(hDevice,index,data,512);    

    printf("\nInterface Descriptors: ");    
    printf("\n\tNumber of Interfaces : %d",config->bNumInterfaces);    
    printf("\n\tLength : %d",config->bLength);    
    printf("\n\tDesc_Type : %d",config->bDescriptorType);    
    printf("\n\tConfig_index : %d",config->iConfiguration);    
    printf("\n\tTotal length : %lu",config->wTotalLength);    
    printf("\n\tConfiguration Value  : %d",config->bConfigurationValue);    
    printf("\n\tConfiguration Attributes : %d",config->bmAttributes);    
    printf("\n\tMaxPower(mA) : %d\n",config->MaxPower);    

    free(data);    
    data = NULL;    
    return 0;    
}    

struct libusb_endpoint_descriptor* active_config(struct libusb_device *dev,struct libusb_device_handle *handle)    
{    
    struct libusb_device_handle *hDevice_req;    
    struct libusb_config_descriptor *config;    
    struct libusb_endpoint_descriptor *endpoint;    
    int altsetting_index,interface_index=0,ret_active;    
    int i,ret_print;    

    hDevice_req = handle;    

    ret_active = libusb_get_active_config_descriptor(dev,&config);    
    ret_print = print_configuration(hDevice_req,config);    

    for(interface_index=0;interface_index<config->bNumInterfaces;interface_index++)    
    {    
        const struct libusb_interface *iface = &config->interface[interface_index];    
        for(altsetting_index=0;altsetting_index<iface->num_altsetting;altsetting_index++)    
        {    
            const struct libusb_interface_descriptor *altsetting = &iface->altsetting[altsetting_index];    

            int endpoint_index;    
            for(endpoint_index=0;endpoint_index<altsetting->bNumEndpoints;endpoint_index++)    
            {    
                const struct libusb_endpoint_desriptor *ep = &altsetting->endpoint[endpoint_index];    
                endpoint = ep;      
                alt_interface = altsetting->bAlternateSetting;    
                interface_number = altsetting->bInterfaceNumber;    
            }    

            printf("\nEndPoint Descriptors: ");    
            printf("\n\tSize of EndPoint Descriptor : %d",endpoint->bLength);    
            printf("\n\tType of Descriptor : %d",endpoint->bDescriptorType);    
            printf("\n\tEndpoint Address : 0x0%x",endpoint->bEndpointAddress);    
            printf("\n\tMaximum Packet Size: %x",endpoint->wMaxPacketSize);    
            printf("\n\tAttributes applied to Endpoint: %d",endpoint->bmAttributes);    
            printf("\n\tInterval for Polling for data Tranfer : %d\n",endpoint->bInterval);    
        }    
    }    
    libusb_free_config_descriptor(NULL);    
    return endpoint;    
}    

int main(void)    
{    
    int r = 1;    
    struct libusb_device **devs;    
    struct libusb_device_handle *handle = NULL, *hDevice_expected = NULL;    
    struct libusb_device *dev,*dev_expected;    

    struct libusb_device_descriptor desc;    
    struct libusb_endpoint_descriptor *epdesc;    
    struct libusb_interface_descriptor *intdesc;    

    ssize_t cnt;    
    int e = 0,config2;    
    int i = 0,index;    
    char str1[64], str2[64];    
    char found = 0;    

// Init libusb     
    r = libusb_init(NULL);    
    if(r < 0)    
    {    
        printf("\nfailed to initialise libusb\n");    
        return 1;    
    }    
    else    
        printf("\nInit Successful!\n");    

// Get a list os USB devices    
    cnt = libusb_get_device_list(NULL, &devs);    
    if (cnt < 0)    
    {    
        printf("\nThere are no USB devices on bus\n");    
        return -1;    
    }    
    printf("\nDevice Count : %d\n-------------------------------\n",cnt);    

    while ((dev = devs[i++]) != NULL)    
    {    
        r = libusb_get_device_descriptor(dev, &desc);    
        if (r < 0)    
            {    
            printf("failed to get device descriptor\n");    
            libusb_free_device_list(devs,1);    
            libusb_close(handle);    
            break;    
        }    

        e = libusb_open(dev,&handle);    
        if (e < 0)    
        {    
            printf("error opening device\n");    
            libusb_free_device_list(devs,1);    
            libusb_close(handle);    
            break;    
        }    

        printf("\nDevice Descriptors: ");    
        printf("\n\tVendor ID : %x",desc.idVendor);    
        printf("\n\tProduct ID : %x",desc.idProduct);    
        printf("\n\tSerial Number : %x",desc.iSerialNumber);    
        printf("\n\tSize of Device Descriptor : %d",desc.bLength);    
        printf("\n\tType of Descriptor : %d",desc.bDescriptorType);    
        printf("\n\tUSB Specification Release Number : %d",desc.bcdUSB);    
        printf("\n\tDevice Release Number : %d",desc.bcdDevice);    
        printf("\n\tDevice Class : %d",desc.bDeviceClass);    
        printf("\n\tDevice Sub-Class : %d",desc.bDeviceSubClass);    
        printf("\n\tDevice Protocol : %d",desc.bDeviceProtocol);    
        printf("\n\tMax. Packet Size : %d",desc.bMaxPacketSize0);    
        printf("\n\tNo. of Configuraions : %d\n",desc.bNumConfigurations);    

        e = libusb_get_string_descriptor_ascii(handle, desc.iManufacturer, (unsigned char*) str1, sizeof(str1));    
        if (e < 0)    
        {    
        libusb_free_device_list(devs,1);    
            libusb_close(handle);    
            break;    
        }    
        printf("\nManufactured : %s",str1);    

        e = libusb_get_string_descriptor_ascii(handle, desc.iProduct, (unsigned char*) str2, sizeof(str2));    
        if(e < 0)    
        {    
        libusb_free_device_list(devs,1);    
            libusb_close(handle);    
            break;    
        }    
        printf("\nProduct : %s",str2);    
        printf("\n----------------------------------------");    

        if(desc.idVendor == 0xffff && desc.idProduct == 0x4)    
        {    
        found = 1;    
        break;    
        }    
    }//end of while    
    if(found == 0)    
    {    
        printf("\nDevice NOT found\n");    
        libusb_free_device_list(devs,1);    
        libusb_close(handle);    
        return 1;    
    }    
    else    
    {    
        printf("\nDevice found");    
        dev_expected = dev;    
        hDevice_expected = handle;    
    }    

    e = libusb_get_configuration(handle,&config2);    
    if(e!=0)    
    {    
        printf("\n***Error in libusb_get_configuration\n");    
        libusb_free_device_list(devs,1);    
        libusb_close(handle);    
        return -1;    
    }    
    printf("\nConfigured value : %d",config2);    

    if(config2 != 1)    
    {    
        libusb_set_configuration(handle, 1);    
        if(e!=0)    
        {    
            printf("Error in libusb_set_configuration\n");    
            libusb_free_device_list(devs,1);    
            libusb_close(handle);    
            return -1;    
        }    
        else    
            printf("\nDevice is in configured state!");    
    }    

    libusb_free_device_list(devs, 1);    

    if(libusb_kernel_driver_active(handle, 0) == 1)    
    {    
        printf("\nKernel Driver Active");    
        if(libusb_detach_kernel_driver(handle, 0) == 0)    
            printf("\nKernel Driver Detached!");    
        else    
        {    
            printf("\nCouldn't detach kernel driver!\n");    
            libusb_free_device_list(devs,1);    
            libusb_close(handle);    
            return -1;    
        }    
    }    

    e = libusb_claim_interface(handle, 0);    
    if(e < 0)    
    {    
        printf("\nCannot Claim Interface");    
        libusb_free_device_list(devs,1);    
        libusb_close(handle);    
        return -1;    
    }    
    else    
        printf("\nClaimed Interface\n");    

    active_config(dev_expected,hDevice_expected);    

    //   Communicate     

    char *my_string, *my_string1;    
    int transferred = 0;    
    int received = 0;    
    int length = 0;    

    my_string = (char *)malloc(nbytes + 1);    
    my_string1 = (char *)malloc(nbytes + 1);    

    memset(my_string,'\0',64);    
    memset(my_string1,'\0',64);    

    strcpy(my_string,"prasad divesd");    
    length = strlen(my_string);    

    printf("\nTo be sent : %s",my_string);    

    e = libusb_bulk_transfer(handle,BULK_EP_IN,my_string,length,&transferred,0);    
    if(e == 0 && transferred == length)    
    {    
        printf("\nWrite successful!");    
        printf("\nSent %d bytes with string: %s\n", transferred, my_string);    
    }    
    else    
        printf("\nError in write! e = %d and transferred = %d\n",e,transferred);    

    sleep(3);    
    i = 0;    

    for(i = 0; i < length; i++)    
    {    
        e = libusb_bulk_transfer(handle,BULK_EP_OUT,my_string1,64,&received,0);  //64 : Max Packet Lenght    
        if(e == 0)    
        {    
            printf("\nReceived: ");    
            printf("%c",my_string1[i]);    //will read a string from lcp2148
            sleep(1);    
        }    
        else    
        {    
            printf("\nError in read! e = %d and received = %d\n",e,received);    
            return -1;    
        }    
    }    

    e = libusb_release_interface(handle, 0);    

    libusb_close(handle);    
    libusb_exit(NULL);    

    printf("\n");    
    return 0;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-28T18:37:56.770

处理内核分离。

```
if(libusb_kernel_driver_active(dev_handle, 0) == 1)         //find out if kernel driver is attached
{
    cout << "Kernel Driver Active" << endl;

    if(libusb_detach_kernel_driver(dev_handle, 0) == 0)     //detach it
    {
        cout << "Kernel Driver Detached!" << endl;
    }
} 
```

# .htaccess - htaccess重写规则不适用于magento

> ID：14769108
> 
> 赞同：1
> 
> 时间：2013-02-08T09:10:47.160
> 
> 标签：.htaccess, mod-rewrite, apache2

这是重写规则在 .htaccess 中不起作用：

```
RewriteCond %{REQUEST_URI} ^/magento/resultados-busqueda/ 
RewriteRule resultados-busqueda/(.*) /magento/index.php/catalogsearch/result/$1 [L,QSA,NC] 
```

如果我添加 [R] 标志，它工作正常，但没有 [R] 不起作用。

请帮忙！！

对不起我的英语不好。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-24T22:35:55.967

事实证明，新的 Apache 版本发生了一些变化，如果您使用的是 apache 2.4，我建议您更改`etc/apache2/apache2.conf`文件（您需要 root 权限），如下所示：

```
<Directory /var/www/>
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory> 
```

然后重启apache。

```
sudo service apache2 restart 
```

有用 ;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:35:41.430

在您的以下 .htaccess 片段中使用`$DOCUMENT_ROOT/magento/.htaccess`：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /magento

RewriteRule ^resultados-busqueda/([^/]+)/?$ /magento/index.php/catalogsearch/result/?q=$1 [QSA,P,NC] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:29:30.053

URI 域/magento/resultados-busqueda/pantalones 并显示错误 404。这是我的 .htaccess：

```
<IfModule mod_rewrite.c>

Options +FollowSymLinks -MultiViews
RewriteEngine On

RewriteBase /magento

RewriteRule ^api/rest api.php?type=rest [QSA,L]

RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
RewriteRule .* - [L,R=405]

RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^resultados-busqueda/(.*)$ /magento/index.php/catalogsearch/result/?q=$1 [L,NC]

RewriteRule .* index.php [L] 
```

# android - 如何在 android 中使用图像制作自定义网格？

> ID：14769110
> 
> 赞同：9
> 
> 时间：2013-02-08T09:11:06.233
> 
> 标签：android, android-gallery, android-gridview, android-gridlayout

我想`custom grid`用我们通常在 android 手机中看到的画廊的图像制作一个

![在此处输入图像描述](../Images/a37650cdc4f6e84a8b3588513c77d558.png)

我已经搜索了几个小时。但是没有运气，最后我试图在这里提问。有人可以建议我如何实现这种网格视图。还是我需要遵循任何其他方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T07:14:15.333

![在此处输入图像描述](../Images/f1acfe1aaca936f971f1e993dd69348e.png)查看**main.xml**和**griditem.xml**的代码，我们只需根据我们设置的旋转设置 imageview 和边距的旋转。

**重要的提示**

**如果您的最低 SDK 版本是 11，则使用属性**android:rotation="20" **bcz 它从 API 级别 11 开始可用，因此如果您想运行它的版本低于使用适配器类中描述的旋转代码**

假设我有固定的**ImageView**大小 100dp*100dp 并且如果我将旋转设置为

```
android:rotation="20" 
```

很明显，我们的图像会在网格视图中从底部和顶部切下，所以根据旋转设置它的边距。

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
 >
<GridView
    android:id="@+id/gridView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:horizontalSpacing="10dp"
    android:numColumns="auto_fit">
</GridView>
</RelativeLayout> 
```

**网格项目.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:background="#000">
<RelativeLayout 
   android:layout_width="match_parent"
   android:layout_height="150dp">
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentTop="true"
    android:layout_marginTop="20dp"
    android:layout_marginLeft="30dp"
    android:src="@drawable/image1" />
<ImageView
    android:id="@+id/imageView2"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="40dp"
    android:layout_marginTop="20dp"
    android:src="@drawable/image2" />
<ImageView
    android:id="@+id/imageView3"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="50dp"
    android:layout_marginTop="20dp"
    android:src="@drawable/image3" />
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textStyle="bold"
    android:textColor="#fff"
     />
</RelativeLayout>
</RelativeLayout> 
```

**主要活动**

```
 import android.annotation.TargetApi;
 import android.app.Activity;
 import android.content.Context;
 import android.graphics.Bitmap;
 import android.graphics.BitmapFactory;
 import android.graphics.Matrix;
 import android.os.Build;
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.BaseAdapter;
 import android.widget.GridView;
 import android.widget.ImageView;
 import android.widget.TextView;

 @TargetApi(Build.VERSION_CODES.HONEYCOMB)
 public class MainActivity extends Activity{
String[] logtag=new String[]{"Log.e","Log.d","Log.i"};
GridView gv;
GridAdapter adapter;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    gv=(GridView)findViewById(R.id.gridView1);
    adapter=new GridAdapter(this);
    gv.setAdapter(adapter);

}
class GridAdapter extends BaseAdapter{
    LayoutInflater lf;
    Context context;

    public  GridAdapter(MainActivity activity) {
        // TODO Auto-generated method stub
        context=activity;
        lf=(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return logtag.length;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ViewHolder viewHolder;
        if(convertView==null){
            viewHolder=new ViewHolder();
            convertView=lf.inflate(R.layout.griditem, null);
            viewHolder.image1=(ImageView)convertView.findViewById(R.id.imageView1);
            viewHolder.image2=(ImageView)convertView.findViewById(R.id.imageView2);
            viewHolder.image3=(ImageView)convertView.findViewById(R.id.imageView3);
            viewHolder.text=(TextView)convertView.findViewById(R.id.textView1);
            convertView.setTag(viewHolder);
        }else{
            viewHolder=(ViewHolder) convertView.getTag();
        }
        if(android.os.Build.VERSION.SDK_INT < 11){
        RotateBitmap(viewHolder.image1,R.drawable.image1);
        RotateBitmap(viewHolder.image2,R.drawable.image2);
        RotateBitmap(viewHolder.image3,R.drawable.image3);
        }else{
            viewHolder.image1.setRotation(20);
            viewHolder.image2.setRotation(20);
            viewHolder.image3.setRotation(20);
        }
        viewHolder.text.setText(logtag[position]);
        return convertView;
    }
    class ViewHolder{
        ImageView image1;
        ImageView image2;
        ImageView image3;
        TextView text;
    }
    public void RotateBitmap(ImageView imageView, int imageid){
        Bitmap myImg = BitmapFactory.decodeResource(getResources(),imageid);
        Matrix matrix = new Matrix();
        matrix.postRotate(20);
        Bitmap rotated = Bitmap.createBitmap(myImg, 0, 0, myImg.getWidth(), myImg.getHeight(),matrix, true);
        imageView.setImageBitmap(rotated);
    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:19:00.407

`FrameLayout`用 3`ImageView`为网格项创建一个。然后在您的类中使用以下代码`BaseAdapter`来旋转`ImageView`'s.

```
Matrix matrix=new Matrix();
imageView.setScaleType(ScaleType.MATRIX);   //required
matrix.postRotate((float) angle, pivX, pivY);
imagView.setImageMatrix(matrix); 
```

添加必要的边距以分隔`ImageView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:56:44.120

查看[项目](http://www.netmite.com/android/mydroid/packages/apps/Camera/src/com/android/camera/ImageGallery2.java)`ImageBlock`源代码中的类。这些s 被管理并放入s 中。[`Android ImageGallery`](http://www.netmite.com/android/mydroid/packages/apps/Camera/src/com/android/camera/ImageGallery2.java)`ImageBlock``GridViewSpecial`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T13:20:55.780

您可以使用以下代码从中心点旋转图像

```
Bitmap targetBitmap = Bitmap.createBitmap(targetWidth, targetHeight, config);
Canvas canvas = new Canvas(targetBitmap);
Matrix matrix = new Matrix();
matrix.setRotate(mRotation,source.getWidth()/2,source.getHeight()/2);
canvas.drawBitmap(source, matrix, new Paint()); 
```

# android - 水平滑动菜单调用Activity，恢复后导致NullPointerException

> ID：14769111
> 
> 赞同：1
> 
> 时间：2013-02-08T09:11:12.547
> 
> 标签：android, horizontalscrollview

我的 ActivityA 有一个包含一个按钮的水平滑动菜单。这是行为：

1）在onClick期间，它会通过startActivityForResult()调用ActivityB，供用户选择类别组。

2）然后，它会调用另一个活动，ActivityC，供用户选择一个子类别。

3）之后，它将返回到ActivityA。（ActivityB 和 ActivityC 都在完成后调用 finish()。）

在恢复到 ActivityA 后，应用程序崩溃了，这是我在 Logcat 中看到的。他们都没有指向我的代码。请问有什么建议吗？

** 而且，我刚刚发现 NullPointer 发生在 CustomHorizo​​ntalScrollView.onLayout() 是因为滚动菜单在恢复后失去焦点吗？或者，它与应该显示哪个 TargetFragment 混淆了？我尝试在 onLayout() 中为 NullPointer 放入 try-catch，这样我的应用程序就不会 FC。滚动菜单和主布局显示得很好。但只有搜索结果没有显示。

活动一：源代码

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LayoutInflater inflater = LayoutInflater.from(this);
    scrollView = (CustomHorizontalScrollView) inflater.inflate(R.layout.slide_menu, null);
    setContentView(scrollView);

    menu = inflater.inflate(R.layout.horz_scroll_menu, null);
    app = inflater.inflate(R.layout.main_list, null);

    btnSlide = (ImageView) app.findViewById(R.id.ib_slide_menu);
    btnSlide.setOnClickListener(new ClickListenerForScrolling(scrollView, menu));      

    fAdsSearch = (AdsSearchFragment)getSupportFragmentManager().findFragmentById(R.id.f_search);
    fActionbar = (ActionBarFragment) getSupportFragmentManager().findFragmentById(R.id.f_actionbar);
    fAdsSearch.setTargetFragment(getSupportFragmentManager().findFragmentById(R.id.f_main), 0);
scrollView.initViews(new View[] {menu, app}, 1, new SizeCallbackForMenu(btnSlide));
} 
```

slide_menu.xml：源代码

```
<?xml version="1.0" encoding="utf-8"?>
<CustomHorizontalScrollView 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
android:background="#00ffffff" 
android:padding="0px"
android:layout_margin="0px" 
android:fadingEdge="none" 
android:fadingEdgeLength="0px"
android:scrollbars="none">
<LinearLayout 
    android:id="@+id/top" 
    android:layout_height="fill_parent" 
    android:layout_width="fill_parent"
    android:orientation="horizontal" 
    android:background="#ffffffff" 
    android:padding="0px" 
    android:layout_margin="0px">
</LinearLayout>
</CustomHorizontalScrollView> 
```

horz_scroll_menu.xml：源代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<fragment
    android:id="@+id/f_filter_menu"
    android:name="MenuFragment"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</fragment>
</LinearLayout> 
```

main_list.xml：源代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<fragment
    android:id="@+id/f_actionbar"
    android:name="ActionBarFragment"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
<fragment
    android:id="@+id/f_search"
    android:name="SearchFragment"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
<fragment
    android:id="@+id/f_main"
    android:name="MainFragment"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
</LinearLayout> 
```

日志错误：

```
02-08 15:57:12.959: E/AndroidRuntime(19322): FATAL EXCEPTION: main
02-08 15:57:12.959: E/AndroidRuntime(19322): java.lang.NullPointerException
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.Spinner.makeAndAddView(Spinner.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.Spinner.layout(Spinner.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.Spinner.onLayout(Spinner.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.View.layout(View.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.ViewGroup.layout(ViewGroup.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.onLayout(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.View.layout(View.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.ViewGroup.layout(ViewGroup.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.onLayout(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.View.layout(View.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.ViewGroup.layout(ViewGroup.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.FrameLayout.onLayout(FrameLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.View.layout(View.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.ViewGroup.layout(ViewGroup.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.onLayout(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.View.layout(View.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.ViewGroup.layout(ViewGroup.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.onLayout(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.View.layout(View.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.ViewGroup.layout(ViewGroup.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.FrameLayout.onLayout(FrameLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.HorizontalScrollView.onLayout(HorizontalScrollView.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.View.layout(View.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.ViewGroup.layout(ViewGroup.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.FrameLayout.onLayout(FrameLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.View.layout(View.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.ViewGroup.layout(ViewGroup.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.LinearLayout.onLayout(LinearLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.View.layout(View.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.ViewGroup.layout(ViewGroup.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.widget.FrameLayout.onLayout(FrameLayout.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.View.layout(View.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.ViewGroup.layout(ViewGroup.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.os.Handler.dispatchMessage(Handler.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.os.Looper.loop(Looper.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at android.app.ActivityThread.main(ActivityThread.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at java.lang.reflect.Method.invokeNative(Native Method)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at java.lang.reflect.Method.invoke(Method.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java)
02-08 15:57:12.959: E/AndroidRuntime(19322):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:45:44.837

原来这个 NullPointerException 和滑动菜单无关。这是因为我通过将适配器设置为 null 来清理列表数据。感谢你的帮助。

# liferay - Liferay 以编程方式从 larFile 导入访客布局

> ID：14769118
> 
> 赞同：0
> 
> 时间：2013-02-08T09:11:34.043
> 
> 标签：liferay

我正在尝试通过创建一个在 Startup Hook (然后将“application.startup.events”指向portal-ext.properties 文件中的此类。我希望每次服务器启动时都运行它，因为我的 larFile 版本可能会随着时间而改变。我的代码如下...

```
File larFile=new File("/Users/grai001/Desktop/default_guest_public_new_light.lar");

//using absolute path for now -need help in accessing the relative path to ${liferay.home}??

Group guestGroup = GroupLocalServiceUtil.getGroup(1, GroupConstants.GUEST);
LayoutLocalServiceUtil.importLayouts(guestGroup.getCreatorUserId(), guestGroup.getGroupId(), false, new HashMap<String,String[]>(), larFile);

//I want them to be a public layouts which are visible to every one even when a user is not logged in - like the default WHAT-WE-DO kind ofpages in liferay6.1 - I am using 6.1GA2 at both ends 
```

这怎么给我空指针异常，堆栈跟踪如下..

```
com.liferay.portal.kernel.exception.SystemException: java.lang.NullPointerException
at com.liferay.portal.service.impl.LayoutLocalServiceImpl.importLayouts(LayoutLocalServiceImpl.java:1398)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:122)
at com.liferay.portal.service.impl.LayoutLocalServiceVirtualLayoutsAdvice.invoke(LayoutLocalServiceVirtualLayoutsAdvice.java:197)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.service.impl.LayoutLocalServiceStagingAdvice.invoke(LayoutLocalServiceStagingAdvice.java:107)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.transaction.TransactionInterceptor.invoke(TransactionInterceptor.java:71)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.security.pacl.PACLAdvice.invoke(PACLAdvice.java:51)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ServiceBeanAopProxy.invoke(ServiceBeanAopProxy.java:211)
at $Proxy27.importLayouts(Unknown Source)
at com.liferay.portal.service.LayoutLocalServiceUtil.importLayouts(LayoutLocalServiceUtil.java:1037)
at com.walmart.services.mpportal.liferay.startup.StartupHook.run(StartupHook.java:88)
at com.liferay.portal.events.EventsProcessorImpl.processEvent(EventsProcessorImpl.java:106)
at com.liferay.portal.events.EventsProcessorImpl.process(EventsProcessorImpl.java:58)
at com.liferay.portal.events.EventsProcessorUtil.process(EventsProcessorUtil.java:53)
at com.liferay.portal.util.PortalInstances._initCompany(PortalInstances.java:462)
at com.liferay.portal.util.PortalInstances.initCompany(PortalInstances.java:92)
at com.liferay.portal.servlet.MainServlet.initCompanies(MainServlet.java:798)
at com.liferay.portal.servlet.MainServlet.init(MainServlet.java:355)
at javax.servlet.GenericServlet.init(GenericServlet.java:160)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NullPointerException
at com.liferay.portal.kernel.util.ParamUtil.getLong(ParamUtil.java:616)
at com.liferay.portal.service.impl.LayoutLocalServiceStagingAdvice.deleteLayout(LayoutLocalServiceStagingAdvice.java:70)
at com.liferay.portal.service.impl.LayoutLocalServiceStagingAdvice.invoke(LayoutLocalServiceStagingAdvice.java:113)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.transaction.TransactionInterceptor.invoke(TransactionInterceptor.java:71)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.security.pacl.PACLAdvice.invoke(PACLAdvice.java:51)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ServiceBeanAopProxy.invoke(ServiceBeanAopProxy.java:211)
at $Proxy27.deleteLayout(Unknown Source)
at com.liferay.portal.service.LayoutLocalServiceUtil.deleteLayout(LayoutLocalServiceUtil.java:435)
at com.liferay.portal.lar.LayoutImporter.deleteMissingLayouts(LayoutImporter.java:196)
at com.liferay.portal.lar.LayoutImporter.doImportLayouts(LayoutImporter.java:774)
at com.liferay.portal.lar.LayoutImporter.importLayouts(LayoutImporter.java:147)
at com.liferay.portal.service.impl.LayoutLocalServiceImpl.importLayouts(LayoutLocalServiceImpl.java:1382)
... 50 more 
```

现在做`LayoutLocalServiceUtil.importLayouts(guestGroup.getCreatorUserId(), guestGroup.getGroupId(), true, new HashMap<String,String[]>(), larFile);` **ie......将它们作为私有布局导入工作正常 - 不幸的是，我希望它们是公开的并且对每个人都可见。同样以门户管理员身份登录并从 UI 导入为公共布局运行良好且良好。我如何希望以自动化的方式完成**。

试图从过去 1 周解决我的这个问题 - 做了足够的研究 - 但仍然不能。任何形式的帮助表示赞赏..！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T08:33:21.327

```
public void larTest()  {

    LiferayFacesContext liferayFacesContext = LiferayFacesContext
            .getInstance();
    ActionRequest request = (ActionRequest) liferayFacesContext
            .getPortletRequest();
    ThemeDisplay td = (ThemeDisplay) request
            .getAttribute(WebKeys.THEME_DISPLAY);
    long userId = td.getUserId();
    long groupId = td.getScopeGroupId();

    File larFile=new File("C:\\Users\\youssef\\dahar\\Downloads\\ok.lar");

    //using absolute path for now -need help in accessing the relative path to ${liferay.home}??

    Group guestGroup = null;
    try {
        guestGroup = GroupLocalServiceUtil.getGroup(groupId);
    } catch (Exception e) {
        System.out.println("catch 1");
        e.printStackTrace();
    }
    try {
        LayoutLocalServiceUtil.importLayouts(guestGroup.getCreatorUserId(), guestGroup.getGroupId(), false, new HashMap<String,String[]>(), larFile);
    } catch (PortalException e) {
        System.out.println("catch 2");
        e.printStackTrace();
    } catch (SystemException e) {
        System.out.println("catch 3");
        e.printStackTrace();
    }

    //I want them to be a public layouts which are visible to every one even when a user is not logged in - like the default WHAT-WE-DO kind ofpages in liferay6.1 - I am using 6.1GA2 at both ends

} 
```

可能可以帮助你这个功能有时对我有用，有时对我有用:)

# wcf - 用于多平台开发的 WCF OData？

> ID：14769120
> 
> 赞同：0
> 
> 时间：2013-02-08T09:11:38.050
> 
> 标签：wcf, architecture, orm, odata

此问题中的 OP 询问有关使用 WCF/OData 作为内部数据访问层的问题。

[使用 WCF/OData 作为访问层而不是直接使用 EF/L2S/nHibernate 的论点](https://stackoverflow.com/questions/2498796/arguments-of-using-wcf-odata-as-access-layer-instead-of-ef-l2s-nhibernate-direct)

响亮的答复似乎是不要这样做。我与 OP 的立场相似，但在最初的问题中没有提出担忧。我正在尝试（本地）为许多不同的平台进行开发，但希望尽可能多地保留数据和业务逻辑服务器端。因此，我将拥有 iOS/Android/Web (MVC)/桌面应用程序。目前，我有一个带有 ORM 数据访问层 (LLBLGen Pro) 的 WinForms 应用程序。

我设想将我的大部分业务/数据访问逻辑（可能仍然使用 LLBLGen 或其他 ORM）移动到 WCF/OData 接口后面。然后让我在不同平台上的所有不同客户端都非常瘦（基本上是 UI 和 WCF 调用）。

这也是过度设计吗？我错过了一个更简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:57:00.970

I cannot see any problem in your architecture or consider it overengeenered as a OData is a standard protocol and your concept conforms the DRY principle as well.

I change the question: Why would you implement the same business logic in each client to introduce more possible bugs and loose the possibility to fix the errors at one single and centralized place. Your idea makes you able to implement the security layer only once.

OData is a cross-platform standard and you can find a OData libraries for each development platform ([MSDN](http://msdn.microsoft.com/en-us/data/ee720179), [OData.org](http://www.odata.org/), [JayData for JavaScript](http://jaydata.org)). Furthermore, you can use OData FunctionImports/Service methods and entity-level methods, which will simplify your queries.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:00:01.170

如果您正在运行多平台开发，那么您可能会发现选择与平台无关的通信协议（例如 HTTP）比使用多个驱动程序和 ORM 直接访问您的数据源更实用。此外，由于 OData 是一个 REST 协议，因此您在客户端不需要太多东西：任何可以格式化 OData HTTP 请求和解析 HTTP 响应的东西。不过有几个方面需要注意：

1.  OData 服务器不能替代 SQL 数据库。它支持批处理，但它们与 DB 事务不同（尽管在许多情况下可用于建模事务操作）。它支持父子关系，但不支持经典 SQL 意义上的 JOIN。因此，您必须计划作为 OData 实体公开的内容。使用包装 EF 模型的 WCF 数据服务构建 OData 服务器太容易了。太容易了，因为人们经常公开低级数据库内容而不是构建高级域类型。

2.  至于今天，OData 多平台客户端仍在开发中，但它们即将到来。如果我可以建议我个人正在研究的东西，请查看 Simple.Data OData 适配器（[https://github.com/simplefx/Simple.OData](https://github.com/simplefx/Simple.OData)，查看其 Wiki 页面以获取示例） - 它有一个 NuGet 包。虽然这是一个仅支持 .NET 4.0 的客户端库，但它的一部分正在被提取以发布为可移植类库 Simple.OData.Client 以支持 .NET 4.x、Windows Store、Silverlight 5、Windows Phone 8、Android和 iOS。事实上，如果你检查 Git 存储库的 winrt 分支，你会发现已经有一个多平台 PCL，只是还没有在 NuGet 上发布。

# valgrind - Eclipse IDE 在运行一定次数后崩溃，但使用 VALGRIND 分析器运行良好

> ID：14769139
> 
> 赞同：0
> 
> 时间：2013-02-08T09:12:24.397
> 
> 标签：valgrind, omnet++

当我在 OMNeT++（基于 Eclipse 的 IDE）中运行代码时，模拟在一定数量的事件后崩溃。因此，为了检查内存泄漏，我使用了 VALGRIND。当我使用这个 valgrind 分析器运行代码时，我的模拟运行得非常好。我不知道这种特殊行为的原因。有人可以解释这背后的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:56:41.720

可能是“heisenbug”。即如果您尝试检查它会改变其行为的问题。如果程序以不同的内存布局（即在 valgrind 下）启动，它可能是未初始化的变量或其他未出现的模糊错误。

即使没有发生崩溃，我仍然会查看 valgring 日志，因为日志可能包含一些提示。

# javascript - 获取列表格式中的值形式输入？

> ID：14769140
> 
> 赞同：0
> 
> 时间：2013-02-08T09:12:26.487
> 
> 标签：javascript

我有一个输入，它的值有分隔符。

```
 <input id="list_id_category" type="hidden" value="29,30,41" name="list_id_category"> 
```

我尝试但它不起作用

```
document.getElementsByName('list_id_category').value; 
```

我们怎样才能得到这个元素的值？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:14:00.793

```
var values = document.getElementById("list_id_category").value.split(","); 
```

之后`values`将是一个包含三个数字的数组。

您对该[`getElementsByName()`方法](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)的使用不起作用，因为（正如复数所暗示的那样）它返回一个元素列表（一个 HTMLCollection），并且该列表没有`.value`属性。改为使用[`getElementById()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:14:32.427

var temp = document.getElementById("list_id_category").value;

使用 temp.split(','); 拆分返回值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:15:22.950

```
var valuee=$('#list_id_category').val(); 
```

我希望这适用于您的问题。

# mule - 如何在 Mule 中调用 java 组件

> ID：14769142
> 
> 赞同：1
> 
> 时间：2013-02-08T09:12:27.030
> 
> 标签：mule

我正在使用以下 SOAP 客户端在 Apache OFBiz 中创建 Web 服务：

```
public class CreatePerson {

private static OMFactory fac;
private static OMNamespace omNs;
public static String fname;
public static String lname;

static {
      fac = OMAbstractFactory.getOMFactory();
      omNs = fac.createOMNamespace("http://my-ip-adress/service/", "ns1");
}

public static void main(String[] args) throws AxisFault {

      ServiceClient sc = new ServiceClient();
      Options opts = new Options();
      opts.setTo(new EndpointReference("http://my-ip-adress:port/webtools/control/SOAPService"));
      opts.setAction("createPerson");
      sc.setOptions(opts);
      OMElement res = sc.sendReceive(createPayLoad(fname, lname));
      System.out.println(res);
}

public static OMElement createPayLoad(@XPath("//person/return[1]")String firstName, @XPath("//person/return[2]")String lastName) {

      CreatePerson.fname = firstName;
      CreatePerson.lname = lastName;

      OMElement createPerson = fac.createOMElement("createPerson", omNs);
      OMElement mapMap = fac.createOMElement("map-Map", omNs);

      createPerson.addChild(mapMap);

      mapMap.addChild(createMapEntry("login.username", "admin"));
      mapMap.addChild(createMapEntry("login.password", "ofbiz"));
      // do the mapping here!
      mapMap.addChild(createMapEntry("firstName", firstName));
      mapMap.addChild(createMapEntry("lastName", lastName));

      return createPerson;
}

public static OMElement createMapEntry(String key, String val) {

      OMElement mapEntry = fac.createOMElement("map-Entry", omNs);

      // create the key
      OMElement mapKey = fac.createOMElement("map-Key", omNs);
      OMElement keyElement = fac.createOMElement("std-String", omNs);
      OMAttribute keyAttribute = fac.createOMAttribute("value", null, key);

      mapKey.addChild(keyElement);
      keyElement.addAttribute(keyAttribute);

      // create the value
      OMElement mapValue = fac.createOMElement("map-Value", omNs);
      OMElement valElement = fac.createOMElement("std-String", omNs);
      OMAttribute valAttribute = fac.createOMAttribute("value", null, val);

      mapValue.addChild(valElement);
      valElement.addAttribute(valAttribute);

      // attach to map-Entry
      mapEntry.addChild(mapKey);
      mapEntry.addChild(mapValue);

      return mapEntry;
}
} 
```

接下来，我想使用以下 xml 在上面的客户端中使用 firstName 和 lastName 将 return-element 中的值获取到“map”（AnnotatedEntryPointResolver）：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <ns2:getAllResponse xmlns:ns2="http://service.ofbiz.org/">
      <person>
        <return>Testname</return>
        <return>Test</return>
      </person>
    </ns2:getAllResponse>
  </soap:Body>
</soap:Envelope> 
```

因此，我使用的是骡子。正如您在我的客户端代码中看到的那样，我添加了一些 XPath 注释来引用返回元素中的 xml 值。出于测试目的，我的 Mule 配置很简单：

```
<flow name="test_flow" doc:name="test_flow">
    <file:inbound-endpoint path="[mypath]\xml\in" responseTimeout="10000" doc:name="File"/>
    <component class="org.ofbiz.service.CreatePerson" doc:name="Java"/>
</flow> 
```

我只是使用文件入站端点和上面引用我的客户端的 java 组件。运行 Mule 后，在我的客户端的 createPayLoad() 方法中正确完成了“映射”。但这不是我想做的。我的问题：对于本示例，如何使用 AnnotatedEntryPointResolvers 调用整个 java 组件（包括主方法）？如上所述，是否有替代或更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:16:25.110

调用`main()`很奇怪，但是......你可以这样做：

```
<scripting:component>
    <scripting:script engine="groovy">CreatePerson.main([] as String[])</scripting:script>
</scripting:component> 
```

# qt - qt web oauth 2.0 webview 重定向 bigquery

> ID：14769144
> 
> 赞同：1
> 
> 时间：2013-02-08T09:12:37.800
> 
> 标签：qt, oauth-2.0, google-bigquery, qwebview

我正在尝试使用此应用程序：[http](http://code.google.com/p/qt-google-bigquery/) ://code.google.com/p/qt-google-bigquery/ 在跨平台上通过 web 进行 google bigquery 授权，从回调 url 获取访问令牌，但是 qt webview单击网页上的“允许访问”后，组件似乎没有重定向。我在互联网上搜索了类似的问题，我发现这可能是由 ssl 引起的，尽管我对使用 openssl 重建 qt 的解决方案持怀疑态度，因为我首先打开的页面也是 ssl（[https： //accounts.google.com/o/oauth2/auth?](https://accounts.google.com/o/oauth2/auth?) ) 它工作得很好。我认为还有其他事情需要处理。我也尝试为 webview 启用 javascript，但没有帮助。有什么想法可以解决这个问题吗？

# c - #error 命令调用错误

> ID：14769146
> 
> 赞同：0
> 
> 时间：2013-02-08T09:12:46.277
> 
> 标签：c, debugging, cygwin, eclipse-cdt

我正在尝试在 Android 的 Tux Racer 源代码中运行和调试 C 代码。大部分代码都是用 C 编写的，所以我将 Android 项目转换为 C 项目（添加 C/C++ 性质）。我使用了 Cygwin 工具链。现在我遇到了问题，因为 Eclipse 在代码中发现了一些虚构的错误，例如：

```
#if defined( HAVE_SDL )
#   include "SDL.h"
#elif defined( HAVE_GLUT )
#   include "GL/glut.h"
#elif defined( __APPLE__ )

#else

# error "Neither SDL nor GLUT are present."

#endif 
```

，他认为这`#error "error text"`是一个错误。但并非无处不在！仅在代码中的这个地方。如果我把这条线移到别的地方，那就没问题了。但是，无论如何，这应该保持原状。

以前，我只是从 Cygwin 控制台重建 C 代码，然后从 Eclipse Android 应用程序运行，它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:32:21.967

Eclipse 的问题在于他假设了很多事情。他没有使用 NDK 和现有的 make 文件，而是开始使用自己的设置。为了使其正确构建，我需要更改一些设置：

1.  在 Project->Properties->C/C++ Build->Builder Settings 选项卡中： Use default build command 应该被取消选中；构建命令应该是 `bach <path to NDK>ndk-build`. 此外，自动生成 makefile 也应该取消选中。然后，应该输入一个正确的 Build 目录。这就是 Builder Settings 选项卡的全部内容。
2.  然后，应检查项目的构建“调试”
3.  CTRL + B，它的工作原理！

几乎！它仍然有一些错误问题，剩下的就是弄清楚如何在 Eclipse 上连接、运行和调试它。

# google-cloud-storage - 谷歌云存储预算限制

> ID：14769151
> 
> 赞同：3
> 
> 时间：2013-02-08T09:13:04.417
> 
> 标签：google-cloud-storage

Google Cloud Storage 是否允许设置每月预算限制，类似于 Google App Engine 可用的限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T17:50:18.817

Google Cloud Storage 不对 XML API 或公共对象的 HTTP GET 实施使用限制。

可以启用访问日志：[https](https://developers.google.com/storage/docs/accesslogs) ://developers.google.com/storage/docs/accesslogs 这将为您提供对对象的所有访问的详细日志。您可以监控日志，如果使用率高于您允许的范围，请更改对象上的 ACL 以禁用进一步访问。

# javascript - 使 JS 本地函数全局可访问

> ID：14769158
> 
> 赞同：10
> 
> 时间：2013-02-08T09:13:34.887
> 
> 标签：javascript, function, scope

我在需要直接访问的函数中有一个函数。

```
//#############################################################
//# Global vars
//#############################################################
var canvasWidth = 585;
var canvasHeight = 780;

//#############################################################
//# Init the canvas
//#############################################################
window.onload = function() {
    initStage();
};

//#############################################################
//# Init the main stage
//#############################################################
function initStage() {

    //*************************************************************
    //* Create a stage to work with
    //*************************************************************
    var stage = new Kinetic.Stage({
        container: "container",
        width: canvasWidth,
        height: canvasHeight
    });

    var layerOne = new Kinetic.Layer();
    var imageObj = new Image();

    //*************************************************************
    //* Load the image into a layer on the stage
    //*************************************************************
    ... Some Code ...

    //*************************************************************
    //* Set the hidden field value to the canvas dataURL
    //*************************************************************
    function autoSave(){
        stage.toDataURL({
            callback: function(dataUrl){
                document.getElementById("mapping-form:hiddenDataURL").value = dataUrl;
                console.log("Auto Save excecuted");
            }, 
            mimeType: 'image/jpeg', 
            quality: 1.0
        });        
    }

    //*************************************************************
    //* Function called to add text to the stage
    //*************************************************************
    ... Some Code ...    

        layerTwo.add(txt);
        stage.add(layerTwo);

    });

} 
```

我正在尝试访问 autoSave() （作为回报，它需要来自父函数的阶段 var）。我理解为什么我无法访问它，但我正在努力了解如何更改代码以使其可访问。

我的第一个想法是简单地声明一个“更高范围”的 var 并将函数分配给它。问题是（据我所知）这实际上不允许我在请求的时间执行 autoSave() 。

为这个问题的“基本性质”道歉，我是 JS 的新手，我认为这将是基本的！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-08T09:24:01.500

您可以使您的函数全局可访问，并且仍然保持对创建它的范围内的变量的引用。只需在窗口范围内创建和分配它 - 例如，而不是将其定义为：

```
function autoSave() {
    // ... code ...
} 
```

将其声明为：

```
window.autoSave = function() {
    // .... code ....
} 
```

您现在可以在任何地方调用它（当然，前提是首先调用了 initStage 方法来声明它）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T09:21:56.770

您可以将 autoSave 功能分配给 this 对象，即

```
function initStage() {        
    ... Some Code ...
    this.autoSave = function(){
        ... Some Code ...        
    }

    return this;
} 
```

现在你可以打电话

```
initStage().autoSave(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:29:18.860

正如您[在此处](http://jsfiddle.net/CAkVs/)看到的`autoSave`，调用没有问题。我相信问题出在代码的其余部分。你有`});`在脚本的底部；不能在任何地方打开

代码尽可能简单

```
window.onload = function() {
    initStage();
};

function initStage() {
    alert('a');

    function autoSave() {
        alert('b');
    }

    autoSave();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T09:33:49.657

您可以访问您的本地功能，如下所述

```
var myFunc = function () {
  //Local Scope
  this.scopeLocal = function () {
    alert("yipee!!! You Can Call Me");
  }
}

var myfunc = new myFunc();//Create a Object

window.onload = function () {
  myfunc.scopeLocal(); // Call it Globally
}; 
```

在这里查看演示：http: [//jsbin.com/efojom/1/edit](http://jsbin.com/efojom/1/edit)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T10:32:38.740

一般来说，我会建议这样的事情：您可以使用您的个人命名空间来使函数和对象可用。

```
// make a scope wrapper to keep vars local
(function () {
    // your module vars available within this scope
    var canvasWidth = 585;
    var canvasHeight = 780;

    // create a namespace
    var myspace = {
        stage: new Kinetic.Stage({
            container: "container",
            width: canvasWidth,
            height: canvasHeight
        },
        autoSave: function () {
            this.stage.toDataURL({
                callback: function(dataUrl){
                    document.getElementById("mapping-form:hiddenDataURL").value = dataUrl;
                    console.log("Auto Save excecuted");
                }, 
                mimeType: 'image/jpeg', 
                quality: 1.0
            });
        }
    };

    var layerOne = new Kinetic.Layer();
    var imageObj = new Image();

    layerTwo.add(txt);
    myspace.stage.add(layerTwo);

    // finally export to global namespace only what you really need
    window["myspace"] = myspace;
});

// then from anywhere, just call this

myspace.autosave();
myspace.stage; 
```

# joomla2.5 - 如何将变量添加到 joomla url？

> ID：14769161
> 
> 赞同：0
> 
> 时间：2013-02-08T09:13:48.240
> 
> 标签：joomla2.5

我正在创建 joomla 组件。在管理部分主页显示用户列表。通过单击每个用户的工具栏图标，我想从我的表格中显示一些信息列表。通过单击列表元素或工具栏菜单，我想从字段中打开以编辑列表中的信息。

如何将用户 ID 从用户列表转移到信息列表和编辑表单（然后添加新列表元素，当前用户的 ID 必须与其他数据一起保存在表中）？如果没有 joomla，我可以在 uri 中使用一些变量，比如 selected_user_id，joomla 中的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:04:16.140

也许使用标准 html 链接，您将在其中将 userId 放入 GET 变量中。在 Joomla 中，您有 JRequest 类（[http://docs.joomla.org/JRequest/11.1](http://docs.joomla.org/JRequest/11.1)）。您可以使用其中一种方法来获取 (getVar()、getInt() 或 getString()) 或设置变量 (set())。

# python - 在列表和字符串中查找匹配的单词

> ID：14769162
> 
> 赞同：9
> 
> 时间：2013-02-08T09:13:55.320
> 
> 标签：python, string, performance, list, comparison

我正在用 Python 编写一些代码，我想检查一个单词列表是否在一个长字符串中。我知道我可以多次迭代它，这可能是同一件事，但我想看看是否有更快的方法来做到这一点。我目前正在做的是这样的：

```
 all_text = 'some rather long string'
    if "motorcycle" in all_text or 'bike' in all_text or 'cycle' in all_text or 'dirtbike' in all_text:
        print 'found one of em' 
```

但我想做的是：

```
keyword_list = ['motorcycle', 'bike', 'cycle', 'dirtbike']
if item in keyword_list in all_text:
            print 'found one of em' 
```

有没有办法有效地做到这一点？我意识到我可以做到：

```
keyword_list = ['motorcycle', 'bike', 'cycle', 'dirtbike']
for item in keyword_list:
      if item in all_text:
            print 'found one of em' 
```

但是，一旦关键字列表变长，似乎会有更好的方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-08T09:16:49.640

您仍然必须至少检查它们，直到找到一个在文本中，但它可以更简洁：

```
keyword_list = ['motorcycle', 'bike', 'cycle', 'dirtbike']

if any(word in all_text for word in keyword_list):
    print 'found one of em' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T09:19:29.437

一种方法是从关键字列表中构建[前缀树。](http://en.wikipedia.org/wiki/Trie)然后您可以遍历每个字符的长字符串字符。在每次迭代中，您都尝试在前缀树中找到从当前位置开始的大字符串中的前缀。此操作需要`O(log k)`时间，其中关键字列表的大小为 k（假设前缀树是平衡的）。如果长字符串的长度为 n，那么总体复杂度就是，这比k 很大时`O(n log k)`的朴素要好得多。`O(n k)`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-08T09:41:50.753

这个怎么样。

```
>>> keyword_list = ['motorcycle', 'bike', 'cycle', 'dirtbike', "long"]
>>> all_text = 'some rather long string'
>>> if set(keyword_list).intersection(all_text.split()):
...     print "Found One"
Found One 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-09T02:58:10.780

使用正则表达式可能是最快的方法。

```
re.findall(r'motorcycle|bike|cycle|dirtbike', text) 
```

将返回所选单词的所有匹配项。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-10T09:39:24.383

您需要将 all_text 设为变量，否则将无法正常工作

```
keyword_list = ['motorcycle', 'bike', 'cycle', 'dirtbike']
all_text = input("what kind of bike do you like?")
for item in keyword_list:
      if item in all_text:
            print ('found one of em') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-02T11:18:00.233

我发现这个答案在这里真的很有用，它也可以用来搜索子字符串

[https://www.askpython.com/python/list/find-string-in-list-python](https://www.askpython.com/python/list/find-string-in-list-python)

```
ls = ['Hello from AskPython', 'Hello', 'Hello boy!', 'Hi']

matches = [match for match in ls if "Hello" in match]

print(matches) 
```

# sftp - Jsch 错误 - 发送频道请求失败

> ID：14769164
> 
> 赞同：10
> 
> 时间：2013-02-08T09:13:58.823
> 
> 标签：sftp, jsch, channel

我正在尝试使用 JSCH 库版本 0.1.49 连接到 SFTP 远程服务器。每次运行程序时，我都会收到以下错误：

```
Initializing...
Connection to SFTP server is successfully
com.jcraft.jsch.JSchException: Unable to connect to SFTP server.com.jcraft.jsch.JSchException: failed to send channel request
at shell.MainClass.JschConnect(MainClass.java:95)
at shell.MainClass.main(MainClass.java:30) 
```

第 30 行是：`sftpChannel.connect()`来自以下代码：

```
 System.out.println("Initializing...");
    JSch jsch = new JSch();

    Session session = null;
    try {   
        session = jsch.getSession(ProjectConstants.rmUsername,ProjectConstants.rmHost, 22);
        session.setPassword(ProjectConstants.rmPassword);

        java.util.Properties config = new java.util.Properties(); 
        config.put("StrictHostKeyChecking", "no");
        session.setConfig(config);

        session.connect();
        if (session.isConnected() == true) {
            System.out.println("Connection to SFTP server is successfully");
        }

        ChannelSftp sftpChannel = (ChannelSftp) session.openChannel("sftp");
        try {
            sftpChannel.connect();
        } catch (Exception e) {
            throw new JSchException("Unable to connect to SFTP server. "
                    + e.toString());
        } 
```

我使用的凭据是正确的（它使用相同的数据通过 FileZilla 连接），并且我还禁用了该服务器的代理（无论有没有代理，我都会得到相同的错误）

如果有人可以帮助我，我将不胜感激，因为我现在被这个错误困扰了大约一个星期......

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T08:10:52.133

检查 SFTP 服务器是否已启动并正在运行。

我遇到了同样的问题 - 我无法打开到我的服务器的 SFTP 通道，但我可以连接到 WinSCP。我花了一些时间才注意到 WinSCP 会退回到 SCP，因此让我感到困惑。启动服务器解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-07T17:13:45.933

签`Subsystem sftp /usr/lib/openssh/sftp-server`入 /etc/ssh/sshd_config

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-21T10:36:46.440

在`/etc/ssh/sshd_config`我改变了：

```
Subsystem sftp /usr/lib/openssh/sftp-server 
```

到：

```
Subsystem sftp internal-sftp 
```

它有助于。

# javascript - JSLint 在“^&;”上报告“不安全的 '^'” 来自 JavaScript: The Good Parts - 忽略？

> ID：14769166
> 
> 赞同：1
> 
> 时间：2013-02-08T09:14:03.760
> 
> 标签：javascript, regex

[JavaScript: The Good Parts p41](http://books.google.com/books?id=PXa2bby0oQ0C&pg=PA41)包含以下正则表达式：

```
/&([^&;]+);/g 
```

它用于查找所有 HTML 实体，例如`&gt;`. 如果使用 JSLint 验证此代码，它会报告

> 不安全的'^'

虽然严格来说这是正确的，但我仍然认为可以忽略它。或不？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:47:42.930

警告正则表达式的匹配可能超出预期，警告它是正确的；它会匹配这样的东西“<code>&abc def ghi;” 尽管它们是非法的实体名称。另一方面，在这种情况下它可能不是一个严重的问题（尽管它严格取决于您匹配后的操作）；你可以很容易地在 JSLint 中禁用它。

更好的 RE 将是：

```
/&(#[0-9]+|#[xX][a-fA-F0-9]+|[a-zA-Z0-9]+);/ 
```

我不记得实体名称中允许使用哪些其他字符，唉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:45:42.210

提供实际问题的答案。如果您知道它为什么*不安全*并且可以接受，请忽略它。如果您对 JSLint 的抱怨感到恼火，请修复它。;)

我认为它*足够安全*。

# jquery - 如何在带有动画翻转的图像顶部使用 jquery 在悬停时淡入 div

> ID：14769168
> 
> 赞同：0
> 
> 时间：2013-02-08T09:14:07.650
> 
> 标签：jquery, html, css

我有以下代码在悬停时淡入翻转图像。我还有一个带有一些文本的 div，当图像以相同的速度变化时，我想隐藏然后淡入。我知道如何分别做，只是不确定如何将它写成一个完整的函数。任何帮助表示赞赏。我想用 jquery 显示隐藏，以便在禁用 javascript 时显示文本。

的HTML：

```
<ul id="img_grid1">
    <li>
        <h2 class="bigimghead">Heading 1</h2>
        <img class="off" src="images/img1.jpg" alt=""/>
        <img class="on" src="images/img1over.jpg" alt=""/>
        <div class="copy">
            <p>some text, some text</p>
        </div>
    </li>

</ul> 
```

CSS：

```
h2.bigimghead {
    font-family: Tahoma, Geneva, sans-serif;
    position: relative;
    z-index: 2000;
    font-size: 16px;
    top: 10px;
}

img.off {
    position: absolute;
    left: 0;
    top: 0;
    z-index: 1000;
}

img.on {
    position: absolute;
    left:0; 
    top: 0;
}

ul#img_grid1 li {
    list-style-type: none;
}

.copy { z-index: 5000; position: relative; width: 200px; top: 20px; }

.copy p { color: #FFF; } 
```

jQuery：

```
 $(document).ready(function(){
$(function(){
   $(".copy").css("display","none")
});

$("img.off").hover(
function() {
$(this).stop().animate({"opacity": "0"}, "normal");
$(".copy").fadeIn(500);
},
function() {
$(this).stop().animate({"opacity": "1"}, "normal");
$(".copy").fadeOut(500);
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:34:57.780

如果您想以与图像相同的速度淡出文本，这里有两个选项

**图像悬停方法（[jsfiddle](http://jsfiddle.net/7dJuX/4/)）**

此方法类似于您在现有代码中使用的方法，只是在开始时通过不透明度隐藏了所有复制 div。

```
$(document).ready(function () {
    $('.copy').css("opacity", "0");
    $("img.off").on({
        mouseenter: function () {
            $(this).stop().animate({
                "opacity": "0"
            }, "normal");
            $('.copy').stop().animate({
                "opacity": "1"
            }, "normal");
        },
        mouseleave: function () {
            $(this).stop().animate({
                "opacity": "1"
            }, "normal");
            $('.copy').stop().animate({
                "opacity": "0"
            }, "normal");
        }
    });
}); 
```

**列表项悬停方法（[jsfiddle](http://jsfiddle.net/DRUYj/1/)）**

此方法假定您希望在单击整个列表项而不是仅单击图像时发生动画。这将确保如果您碰巧将鼠标悬停在绝对位于图像上方的任何项目（例如标题或复制文本）上，`mouseleave`处理程序将不会触发。

```
$(document).ready(function () {
    $('.copy').css("opacity", "0");
    $("#img_grid1").on({
        mouseenter: function () {
            $(this).find("img.off").stop().animate({
                "opacity": "0"
            }, "normal");
            $('.copy').stop().animate({
                "opacity": "1"
            }, "normal");
        },
        mouseleave: function () {
            $(this).find("img.off").stop().animate({
                "opacity": "1"
            }, "normal");
            $('.copy').stop().animate({
                "opacity": "0"
            }, "normal");
        }
    }, "li");
}); 
```

**注意：**在这两个示例中，我都为图像添加了一些额外的样式，以便在没有源文件的情况下可以看到它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:41:54.673

首先，您在`absolute`图像上设置位置，但 li 没有相对位置。

其次，我认为您应该在再次执行之前检查事件是否已完成：

*   添加一些`delay(500)`以防止另一个事件实现（例如延迟应该等于动画时间`fadeIn(500)`）
*   添加一个变量来告诉事件是否像这样完成：

    ```
    $(document).ready(function(){
        var eventIsRunning = false;
        $("img.off").hover(
            function() {
                if(!eventIsRunning) {
                    eventIsRunning = true;
                    $(this).fadeIn();
                    $('.copy').fadeOut();
                    eventIsRunning = false;
                }

            },function() {
                if(!eventIsRunning) {
                     eventIsRunning = true;
                     $(this).fadeOut();
                     $('.copy').fadeIn();
                     eventIsRunning = false;
                }
            }
        );
    }); 
    ```

# python - Sobel 运算符 - Open Cv Python

> ID：14769180
> 
> 赞同：2
> 
> 时间：2013-02-08T09:15:08.033
> 
> 标签：python, image, opencv, filter

Img 是我的 RGB 输入图像

```
import cv2
import numpy as np
img = cv2.imread("Lenna.png")
black = cv2.cvtColor(img , cv2.cv.CV_BGR2GRAY) 
```

现在我想使用 filter2D 对其应用 sobel 运算符

```
sobel = np.array([[-1 , 0 , 1] , [-2 , 0 , 2] , [-1 , 0 , 1] ])
dest = cv2.filter2D(black , -1 , sobel) 
```

根据文档的 -1 参数是图像的深度，我相信它是 'uint8' 或 cv2.cv.CV_8U ，当我执行 np.max(dest) 时，它给了我 255 ，这是预期的。

但是，当我将深度指定为 cv2.cv.CV_32F 时，即

```
dest = cv2.filter2D(black , cv2.cv.CV_32F , sobel) 
```

并做 np.max(dest) ，它给了我一个大于 255 的不同值。有人可以解释原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:30:41.793

该函数`filter2D`以全精度执行图像过滤，然后将结果值饱和到目标数据类型。实际上，输出图像包含更大范围的值。当您指定类型`CV_32F`时，输出值将保持原样。它们可能包含大于 255 且小于 0 的值。但是当类型为 时`CV_8U`，结果将被限制在`CV_8U`数据类型的范围内。所有负值都变为 0，所有大于 255 的值都将变为 255。

# ios - 没有订阅者时停止发布，有订阅者时自动启动

> ID：14769185
> 
> 赞同：6
> 
> 时间：2013-02-08T09:15:13.743
> 
> 标签：ios, objective-c, cocoa-touch, reactive-programming, reactive-cocoa

我将如何实现`RACSignal`在没有订阅者时停止发布并在有订阅者时自动启动？

这是一个场景：

假设我`currentLocationSignal`在`AppDelegate`. 我`LocationViewController`会`currentLocationSignal`在视图加载时订阅并在视图卸载时取消订阅（处置）。由于获取当前位置需要几秒钟，我希望始终订阅`currentLocationSignal`应用程序打开的时间（并在几秒钟后自动取消订阅），所以当我到达时，`LocationViewController`我会得到一个准确的位置。因此，信号的订阅者可能不止一个。当第一个订阅者收听时，它需要开始调用`startUpdatingLocation`，当没有订阅者时，它需要调用`stopUpdatingLocation`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T17:26:44.297

好问题！通常，对于这样的用例，您会使用[RACMulticastConnection](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/ReactiveCocoaFramework/ReactiveCocoa/RACMulticastConnection.h)，但是，因为您希望信号能够稍后*重新激活*，所以连接本身并不适合。

最简单的答案可能是模仿连接的工作方式，但具有您想要的特定行为。基本上，我们将跟踪在任何给定时间有多少[订阅者](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/Documentation/FrameworkOverview.md#subscription)，并根据该数字开始/停止更新位置。

让我们从添加一个`locationSubject`属性开始。主题需要是[RACReplaySubject](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/ReactiveCocoaFramework/ReactiveCocoa/RACReplaySubject.h)，因为我们总是希望新订阅者立即获得最近发送的位置。使用该主题实现更新很容易：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations {
    [self.locationSubject sendNext:locations.lastObject];
} 
```

然后，我们要实现跟踪和增加/减少订阅者计数的信号。这通过使用`numberOfLocationSubscribers`整数属性来工作：

```
- (RACSignal *)currentLocationSignal {
    return [RACSignal createSignal:^(id<RACSubscriber> subscriber) {
        @synchronized (self) {
            if (self.numberOfLocationSubscribers == 0) {
                [self.locationManager startUpdatingLocation];
            }

            ++self.numberOfLocationSubscribers;
        }

        [self.locationSubject subscribe:subscriber];

        return [RACDisposable disposableWithBlock:^{
            @synchronized (self) {
                --self.numberOfLocationSubscribers;
                if (self.numberOfLocationSubscribers == 0) {
                    [self.locationManager stopUpdatingLocation];
                }
            }
        }];
    }];
} 
```

在上面的代码中，`+createSignal:`每次将新订阅者添加到返回的信号时都会调用该块。发生这种情况时：

1.  我们检查订阅者数量当前是否为零。如果是这样，刚刚添加的订阅者是第一个订阅者，因此我们需要启用（或重新启用）位置更新。
2.  我们将订阅者直接连接到我们的`locationSubject`，因此来自后者的值会自动输入到前者。
3.  然后，在将来某个时间，当订阅被[处理时](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/Documentation/DesignGuidelines.md#disposal-cancels-in-progress-work-and-cleans-up-resources)，我们会减少计数并在适当的情况下停止位置更新。

现在，剩下的就是订阅`currentLocationSignal`on startup，并在几秒钟后自动取消订阅：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // Use a capacity of 1 because we only ever care about the latest
    // location.
    self.locationSubject = [RACReplaySubject replaySubjectWithCapacity:1];

    [[self.currentLocationSignal
        takeUntil:[RACSignal interval:3]]
        subscribeCompleted:^{
            // We don't actually need to do anything here, but we need
            // a subscription to keep the location updating going for the
            // time specified.
        }];

    return YES;
} 
```

这会`self.currentLocationSignal`立即订阅，然后在`+interval:`信号发送其第一个值时自动处理该订阅。

有趣的是，`-[RACMulticastConnection autoconnect]` *过去*的行为与`-currentLocationSignal`上述类似，但[这种行为已经改变](https://github.com/ReactiveCocoa/ReactiveCocoa/pull/235)，因为它使副作用变得难以预测。这个用例应该是安全的，但在其他时候（比如发出网络请求或运行 shell 命令时）自动重新连接会很糟糕。

# jquery - jQuery悬停动画在数组中的单个元素上

> ID：14769186
> 
> 赞同：0
> 
> 时间：2013-02-08T09:15:15.337
> 
> 标签：jquery, arrays, animation, hover

我有一个结果数组，所有结果都具有在结果列表中重复多次的相同类。我已经设置了一个 jQuery 悬停动画，当您将鼠标悬停在其中一个结果上时会发生，但是目前当我将鼠标悬停在一个结果上时，动画会发生在所有结果上。

这是我的 jQuery 代码：

```
jQuery(document).ready(function() {
    jQuery(".hover").hover(
        function(){
            jQuery(".agent").animate({top: '-=32px'},300, 'easeOutBack');
            jQuery(".fav").delay(150).animate({top: '-=32px'},300, 'easeOutBack');
            jQuery(".more_details").delay(300).animate({top: '-=32px'},300, 'easeOutBack');
        },
        function(){
            jQuery(".agent,.fav,.more_details").animate({top: '+=32px'},150);
    }
    );                              
}); 
```

是否可以在我的数组中挑出一个项目，让动画出现在悬停的项目上？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:17:08.380

假设具有类的元素`hover`是其余元素的父元素，则将当前对象作为[上下文传递给 selector](http://api.jquery.com/jQuery/)。

```
jQuery(document).ready(function() {
    jQuery(".hover").hover(
        function(){
            jQuery(".agent", this).animate({top: '-=32px'},300, 'easeOutBack');
            jQuery(".fav", this ).delay(150).animate({top: '-=32px'},300, 'easeOutBack');
            jQuery(".more_details", this).delay(300).animate({top: '-=32px'},300, 'easeOutBack');
        },
        function(){
            jQuery(".agent,.fav,.more_details").animate({top: '+=32px'},150);
    }
    );                              
}); 
```

# sql-server - 期末 - 差异

> ID：14769187
> 
> 赞同：0
> 
> 时间：2013-02-08T09:15:16.360
> 
> 标签：sql-server, sql-server-2008

我正在使用一个数据库，该数据库有一个表格，其中包含每个期末的所有付款。我必须计算出本月付款与上一期末相比的差异。我写了一个 SQL 查询，但它看起来很脏，而且看起来不是最好的方法。

```
((SELECT payment FROM paytable py1 WHERE py1.pay_id = pn.pay_id  AND period_id = '201310') 
  - 
((SELECT payment FROM paytable py2 WHERE py2.pay_id = pn.pay_id AND (period_id = '201310' -   1)))) as 'Payment Variance', 
```

有许多这样的计算要做。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:21:31.427

这有帮助吗？基本上在第 1 周期将同一张表加入到自身中。

```
SELECT py1.period_id, py1.payment - py2.payment as 'Payment Variance'
 FROM paytable py1 
 INNER JOIN paytable py2
        ON  py2.pay_id = py1.pay_id
        AND py2.period_id = CAST(CAST(py1.period_id as int) -1 as varchar(10))
 WHERE  py1.pay_id = pn.pay_id 
```

# iphone - 如何在 iPhone 应用中禁用网络

> ID：14769195
> 
> 赞同：0
> 
> 时间：2013-02-08T09:15:48.190
> 
> 标签：iphone, objective-c, network-programming

我有一个应用程序，它使用 Restkit 发布和获取对象，使用 MKMapView 查看地图。是否有任何通用属性可以在应用程序中关闭网络访问（wifi 和蜂窝）？

我想要一个看起来像这样的方法：

```
[Reachabillity disableNetwork] 
```

当我尝试访问网络（发布对象或将新地图加载到 MKMapView）时，我收到网络错误。

有可能还是我应该手动处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:43:51.260

如果您尝试禁用整个手机上的网络，请忘记它，除非您正在制作越狱应用程序。

话虽如此，越狱的应用程序可以随心所欲，因此要禁用手机的WiFi，您可以这样做：

```
Class _SBWifiManager = objc_getClass("SBWiFiManager"); // Steal a WiFi class from SpringBoard
[[_SBWifiManager sharedInstance] setWiFiEnabled:NO]; // disable 
```

如果您尝试这样做，您可能会实现类似的目标。

如您所述，如果您对该解决方案不感兴趣，最好手动处理它。

# php - 如何使用图像项目符号更改 WordPress 菜单？

> ID：14769202
> 
> 赞同：0
> 
> 时间：2013-02-08T09:16:01.900
> 
> 标签：php, wordpress

我正在开发 WordPress 主题菜单

[当前 WP 菜单]

```
 <ul>
        <li><a href="<?php echo get_option('home'); ?>">Home</a></li>
        <?php wp_list_pages('title_li'); ?>
    </ul> 
```

生成输出：

```
 <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Services</a></li>
        <li><a href="#">Book Online</a></li>
        <li><a href="#">Prices</a></li>
        <li><a href="#">Contact Us</a></li>
    </ul> 
```

我可以在我的代码中进行哪些更改以生成以下输出：

```
 <ul>
        <li><a href="#"><img src="<?php bloginfo('template_url'); ?>/images/bullet.png" width="15" height="9" />Home</a></li>
        <li><a href="#"><img src="<?php bloginfo('template_url'); ?>/images/bullet.png" width="15" height="9" />Services</a></li>
        <li><a href="#"><img src="<?php bloginfo('template_url'); ?>/images/bullet.png" width="15" height="9" />Book Online</a></li>
        <li><a href="#"><img src="<?php bloginfo('template_url'); ?>/images/bullet.png" width="15" height="9" />Prices</a></li>
        <li><a href="#"><img src="<?php bloginfo('template_url'); ?>/images/bullet.png" width="15" height="9" />Contact Us</a></li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:39:51.437

通过css将此子弹图像应用到标签的背景中。这将更容易然后将其放入li

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:39:46.267

使用类似的东西

```
<?php
                    $args = array(
        'title_li'     => __('Pages'),

    'link_before'   => '<img src="'.get_bloginfo('template_url').'/images/bullet.png" width="15" height="9" />'

);
                    wp_list_pages($args); ?> 
```

希望这对你有用

# javascript - 首次加载后 Chrome 中的 window.height() 会发生变化

> ID：14769204
> 
> 赞同：1
> 
> 时间：2013-02-08T09:16:05.330
> 
> 标签：javascript, jquery, jquery-ui, google-chrome, css

我正在构建一个取决于窗口高度的页面，但是在 Chrome 上，当我在打开浏览器后第一次加载页面时，这个值是不同的，它小了大约 60 像素，因此在页面底部留下了一个空白部分. 当我重新加载页面时，一切正常。

我使用 1920x1080 屏幕在加载插件（构建页面）之前和之后记录了页面的尺寸。第一次，在加载插件之前，窗口是 923px 高，在它变成 906px 之后（我假设这 17px 的差异是由于滑动条，因为它在宽度上发生了同样的事情）。如果我重新加载，页面会从 979px 的高度变为 962px。

有人能解释一下为什么会这样吗？我用 加载插件`$(window).ready()`，所以我认为当我构建页面时，一切都处于最终状态。我无法在其他浏览器上测试它，因为它是专门为 Chrome 编写的，并且有很多代码不能在 Firefox、IE 或 Opera 上运行（我试过了，当然 ^_^）

# cassandra - Cassandra 中的列族、超级列族、超级列

> ID：14769205
> 
> 赞同：3
> 
> 时间：2013-02-08T09:16:07.887
> 
> 标签：cassandra, hbase, datastax-enterprise

我想澄清一下。我有以下层次结构 -

```
Person: {
    personal_details:{
        name:aa
        age:aaa
        ddress:aa
    }
    official_details:{
        employeeid:aa
        cubicle_number:aa
    }
} 
```

我想在 Cassandra 数据库中表示 Person。我希望每个人都被他的**SSN**查询（​​不包括在上述层次结构中）。

如果它是**HBase 模式**，我会将**Person**称为我的表。我将**SSN**作为我的行键，**personal_details**和**official_details**作为列族，**name、age、address、employeeid 和隔间_number**作为列。这些层次结构的 cassandra 命名法是什么？在 cassandra 中这个层次结构的可能创建查询是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:48:39.717

Check the [DataStax documentation on Anatomy of a table](http://www.datastax.com/docs/1.2/ddl/table).

In this case, creating the data structure you are looking for in Cassandra, the [CQL](http://cassandra.apache.org/doc/cql3/CQL.html) would be very similar to SQL.

```
CREATE TABLE people 
(
  ssn text PRIMARY KEY,
  name text,
  age int,
  address text,
  employeeid int,
  cubicle_number int
); 
```

About super columns on Cassandra, it is now [not recommended](http://www.datastax.com/docs/1.2/cluster_architecture/anti_patterns#super-columns).

# codeigniter - Codeigniter - 无法修改标头信息 - 标头已由

> ID：14769209
> 
> 赞同：5
> 
> 时间：2013-02-08T09:16:29.127
> 
> 标签：codeigniter

```
A PHP Error was encountered
Severity: Warning

Message: Cannot modify header information - headers already sent by (output started at /home/aphotel/public_html/application/config/config.php:1)

Filename: libraries/Session.php

Line Number: 366 
```

#

奇怪的是，libraries 文件夹中没有 session.php 文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-02T16:51:49.777

我之前遇到过这个问题，它是由 output_buffering 关闭引起的。

编辑您的 php.ini 并搜索 output_buffering 并使其看起来像这样

```
output_buffering = On 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-20T10:52:27.860

在 PHP 中使用“ob_start();”在第一行和 CI 控制器构造函数在第一行“ob_start();”//输出缓冲区

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-02T18:42:38.257

`<?php`以下文件中的标签前有空格。我多次看到这个问题。

```
(output started at /home/aphotel/public_html/application/config/config.php:1) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-02T05:38:16.853

删除 print_r(); 在控制器、模型或会话中。在主机服务器中上传网站时出现问题或警告，但在 localhost 中没有警告

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-30T09:39:33.383

确保在控制器类中的开始 php 标记之前没有任何空白字符。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-03-06T09:41:40.123

php open 标记前似乎有空格

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-21T15:35:59.460

只需先加载会话库。

```
$autoload['libraries'] = array('session', 'encrypt', 'database',... 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-22T10:07:09.830

我将模型、控制器和助手文件夹中所有 php 文件的编码更改为“没有 BOM 的 UTF-8”，这很有帮助。

# ios - 通过 IB 和代码创建的 UIWebView 对方向不友好

> ID：14769216
> 
> 赞同：-1
> 
> 时间：2013-02-08T09:17:10.883
> 
> 标签：ios, uiwebview, landscape, uiinterfaceorientation, portrait

我在 viewDidLoad 中写这个，

```
// Programmatically creating uiwebview. 
UIWebView *webVPrg = [[UIWebView alloc] initWithFrame:self.view.frame];
NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
NSMutableURLRequest *urlReq = [[NSMutableURLRequest alloc] initWithURL:url];
[self.view addSubview:webVPrg];
[webVPrg loadRequest:urlReq]; 
```

此处创建的 Web 视图无法正确对齐纵向和横向方向，而如果 Web 视图是**通过 Interface Builder 创建**的，则它可以正常工作。

（不确定**initWithFrame:self.view.frame**是否有问题）

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:20:34.833

您应该设置`autoresizingMask`：

```
webVPrg.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

使视图根据其父视图自动调整其大小。你可能也需要对你的做同样的事情`self.view`。

# android - 播放 mp3/wav 和更改速度（音频速度）Android 的更好方法是什么？

> ID：14769222
> 
> 赞同：5
> 
> 时间：2013-02-08T09:17:22.660
> 
> 标签：android

我试过了

```
1) MediaPlayer(it Doesnt support speed change).
2) SoundPool (play only small audio files)
3) AudioTrack (tried with JLayer- there is delay. decoder is slow).
4) Sonic NDK master - unable to play mp3 audio files 
```

什么会更好用？有什么想法或建议吗？我应该如何接近？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-15T14:28:01.957

只是根据我的经验提供一些信息。OpenSL ES 是另一种选择。它是一个 C++ 库，因此您需要使用 Android NDK。我无法让这个方法工作，因为由于某种原因，我一直收到一个错误，指出接口不受支持，即使它在文档中说它是[http://mobilepearls.com/labs/native-android-api/ ndk/docs/opensles/](http://mobilepearls.com/labs/native-android-api/ndk/docs/opensles/)。

另一种选择是使用[http://www.surina.net/soundtouch/](http://www.surina.net/soundtouch/)，这是一个很棒的 C++ 库，可以与 android NDK 一起使用，并且得到了开发人员 Olli 的大力支持。

就您提到的其他方法而言：

*   MediaPlayer 根本不起作用
*   Soundpool 非常有限，因为它只能处理小文件
*   AudioTrack 看起来是最好的选择，但只播放 PCM 文件，因此可能需要转换 MP3 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-13T22:17:07.807

自上次回答以来，有些事情发生了变化，因此我将尝试提供一些新信息：

**TL;DR：** ExoPlayer 是最好的解决方案。它使用 Sonic 并且更容易编译。

**媒体播放器**

*   优点：部分android API，无需添加库，最快的解决方案
*   缺点：速度和音高仅适用于 API 23 及更高版本

如何改变速度：

```
mediaPlayer.setPlaybackParams(new PlaybackParams().setSpeed(1.5f)); 
```

**索尼克 NDK**

*   优点：使用旧 API，质量好
*   缺点：与 PCM 一起工作，因此需要 MP3 解码器，C 编译使您的项目和构建过程复杂化

但是... 缺点并没有那么糟糕。

PCM 的事情实际上不再是问题了，因为 Android 有 MediaCodec API，所以你不需要外部 MP3 解码器。

我在 github 上有一个项目，它使用 Sonic 和 Android 的解码器并为 Android Studio 配置（原始项目是 Eclipse）： [https ://github.com/mega-arbuz/android-mp3-sonic-ndk](https://github.com/mega-arbuz/android-mp3-sonic-ndk)

您还可以避免编译 C 代码并使用 Sonic 的 JAVA 实现： [https ://github.com/waywardgeek/sonic/blob/master/Sonic.java](https://github.com/waywardgeek/sonic/blob/master/Sonic.java)

**ExoPlayer**

*   优点：使用 Sonic 获得速度/音高/速率，质量好，与 API 16 一起使用，由 Google 支持
*   缺点：不像MediaPlayer那样是SDK的一部分，有点大（6k方法，1MB），使用比MediaPlayer复杂

[使用 ExoPlayer 创建 Activity 的教程](https://codelabs.developers.google.com/codelabs/exoplayer-intro/#0)

[文档和样本](https://developer.android.com/guide/topics/media/exoplayer)

完成本教程后，速度更改很简单：

```
player.setPlaybackParameters(new PlaybackParameters(1.5f, 1.0f)); 
```

* * *

几年前，带解码器的 Sonic 是最好的解决方案，但现在 ExoPlayer 是最好的。它支持足够老的 API，使用 Sonic，具有相同的语音质量，不需要复杂的编译和项目设置。

# c# - 没有 www（在 url 中）的 JQuery 自动完成不工作，但有 www 工作

> ID：14769223
> 
> 赞同：0
> 
> 时间：2013-02-08T09:17:34.453
> 
> 标签：c#, jquery, asp.net, autocomplete, dns

我正在处理 asp.net c# 项目，当我输入这样的 url 名称时：http: [//mydomain.com](http://mydomain.com) Jquery auto Complete 不起作用并给出错误消息，但是当我像这样将 www 添加到它时：www.mydomain。 com它的工作...

任何的想法..？

错误信息 ：-

```
XMLHttpRequest cannot load http://www.mydomain.com/AutoComplete.asmx/GetAutoCompleteData. Request header field X-Requested-With is not allowed by Access-Control-Allow-Headers. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:20:17.413

`www.example.com`并且`example.com`是[不同的来源](http://en.wikipedia.org/wiki/Same_origin_policy)，您不能（[FSVO 不能](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)）使用在其中一个上运行的 JavaScript 从另一个请求数据。

在 JavaScript 中使用相对 URI，而不是绝对的。

从一个主机名而不是两个相似的主机名运行您的站点也是一个好主意。选择一个`www.example.com`或`example.com`作为您的规范主机名并设置另一个以将其流量重定向到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:20:32.530

听起来您被同源政策所困扰。

我的猜测是您已将自动完成设置中的链接硬编码为`www.mydomain.com`，并在查看站点视图时将`mydomain.com`其视为跨站点请求。

解决方案是使自动完成设置中的 AJAX 请求 URL 相对。

# wso2 - 如果在不使用 ESPERHA 的情况下发生故障转移，我应该如何继续使用 ESPER（使用 WSO2）实现持久性？

> ID：14769229
> 
> 赞同：1
> 
> 时间：2013-02-08T09:17:57.480
> 
> 标签：wso2, complex-event-processing, esper, wso2cep

我正在使用带有 esper 的 WSO2 CEP-Server 作为后端运行时。WSO2 使用 cassandra 为 siddhi（后端运行时）提供了持久性。我需要使用 ESPER-CEP 引擎实现持久性。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:50:43.190

EsperHA 似乎非常适合。见 www.espertech.com

# scala - 如何使用 sbt 和 onejar 插件添加 log4J 属性文件？

> ID：14769230
> 
> 赞同：7
> 
> 时间：2013-02-08T09:17:59.557
> 
> 标签：scala, sbt

我正在尝试在 scala/java 项目上使用 sbt 构建一个 jar 文件。除 log4J 配置文件外，所有项目均已正确构建和打包。

我没有找到如何将它包含在最终 jar 的类路径中。

我试图将它添加到`unmanagedBase`文件中`build.sbt`但没有成功。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-08T13:13:02.570

如果您将文件放在`src/main/resources`.

# c# - 如何在c#.net中通过smtp邮件消息对象在电子邮件的信头中添加图像？

> ID：14769231
> 
> 赞同：-3
> 
> 时间：2013-02-08T09:18:03.453
> 
> 标签：c#

我需要在 C#.net 的 SMTP 邮件的字母中显示图像？如何通过编程方式在 c#.net 中通过 smtp 邮件消息对象在电子邮件的信头中添加图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:37:17.313

您可以使用 IMAGE 标记的 ContentID 来引用电子邮件 HTML 正文中的图像，如下所示：

```
 <IMG SRC="cid:content-id" /> 
```

然后将图像作为链接资源添加到邮件消息的备用视图部分：

```
 AlternateView body = AlternateView.CreateAlternateViewFromString(m_msg.Body,null,"text/html");
    //create the LinkedResource (embedded image)
    LinkedResource embimg= new LinkedResource(filename,System.Net.Mime.MediaTypeNames.Image.Jpeg);
    logo.ContentId = cid; // content-id used in image tag
    body.LinkedResources.Add(embimg);

    m_msg.AlternateViews.Add(body); 
```

# php - 如何使用 YII 强制登录？

> ID：14769234
> 
> 赞同：0
> 
> 时间：2013-02-08T09:18:15.150
> 
> 标签：php, authentication, yii

我有一个用户需要通过 OTP 验证他的帐户。为了进行身份验证，他填写了他的 OTP 并验证了手机号码。一旦通过身份验证，我想强制他登录。也就是说，他仍然不必手动登录。所以，对于这种形式，我基本上有：

```
if($model->validate())
{
   // Force Login
   $this->redirect(array('/site/index'));    
} 
```

只使用他的一个凭据（即他的手机号码），我需要强制他登录。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:03:30.437

该过程在以下文档中进行了说明`CWebUser`：

1.  用户提供认证所需的信息。
2.  使用用户提供的信息创建身份实例。
3.  调用 IUserIdentity::authenticate 以检查身份是否有效。
4.  如果有效，调用`CWebUser::login`登录用户，并将用户浏览器重定向到`returnUrl`.

您应该已经有一个实现`IUserIdentity`. 通常这是一个派生自 的类[`CUserIdentity`](http://www.yiiframework.com/doc/api/1.1/CUserIdentity)，它在构造时采用用户名和密码。这里有很大的自由度：您可以决定不从`CUserIdentity`您自己的自定义身份类派生并使用您希望的任何身份验证方式，或者您可以派生`CUserIdentity`并覆盖该`authenticate`方法以使用 OTP 进行身份验证。

该过程将与上述完全相同：

```
$identity = new MyIdentity(...); // you decide what params it takes
if ($identity->authenticate()) {
    $user = Yii::app()->user;
    $user->login($identity);
    $this->redirect($user->returnUrl);
} 
```

# linux - 在 ubuntu 上为交叉编译 ARM 构建 squish 时出错

> ID：14769238
> 
> 赞同：0
> 
> 时间：2013-02-08T09:18:26.513
> 
> 标签：linux, g++, armv7, squish

当我尝试使用 QT5 在 ubuntu 上为 armv7l-timesys-linux-gnueabi 构建 SQUISH 时，我遇到了错误

```
Checking Qt library path
> /opt/timesys/nitrogen6x/toolchain/opt/qt5/lib
? Checking whether Qt is built with thread support
: Looking for /opt/timesys/nitrogen6x/toolchain/opt/qt5/lib/libqt-mt.so
: Looking for /opt/timesys/nitrogen6x/toolchain/opt/qt5/lib/libqt-mt.so
: Looking for /opt/timesys/nitrogen6x/toolchain/opt/qt5/lib/libqte-mt.so
: Looking for /opt/timesys/nitrogen6x/toolchain/opt/qt5/lib/libqte.so
: findQtHelper: soversion: 4, debug false, framework false
: findQtHelper: No QtCore at /opt/timesys/nitrogen6x/toolchain/opt/qt5/lib/libQtCore.so.4
: findQtHelper: soversion: 4, debug true, framework false
: findQtHelper: No QtCore at /opt/timesys/nitrogen6x/toolchain/opt/qt5/lib/libQtCore_debug.so.4
: No suitable Qt libraries found
# No Qt library found in /opt/timesys/nitrogen6x/toolchain/opt/qt5 
```

下面是我使用的命令，

```
export PATH=$PATH:/opt/timesys/nitrogen6x/toolchain/bin

sudo ./configure --disable-all --enable-server --enable-wrappers --disable-tk --with-qtdir=/opt/timesys/nitrogen6x/toolchain/opt/qt5/ --with-qmake=/opt/qt5/bin/qmake --host =armv7l-timesys-linux-gnueabi 
```

请告诉我如何解决这些错误？

谢谢布里杰什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:18:37.837

您已经针对 Qt3.3 构建了吗？看起来它可能正在寻找那个......记住你必须做愚蠢的“双重构建”......除非Froglogic改变了Qt5的规则。

否则，在编译的前半部分运行 sudo apt-get install libqt3-mt 并指向这些库。

# python - 匿名化 HTML 文件中表格的第 1 列和第 3 列中的数据

> ID：14769241
> 
> 赞同：1
> 
> 时间：2013-02-08T09:18:45.310
> 
> 标签：python, perl, sed

我有一个包含多个表格的 HTML 文件。我想将第 1 列和第 3 列中的数据更改为名称+数字，其中数字在每行更新后递增。所以这：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">                              
<html lang="en">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>blah blah doc</title>
<style type="text/css">
...
...
</style>
</head>
<body>
<!-- lots of html tags p h1, h2 ul etc but no tables to be skipped over -->
<table id="something" summary="...">
<thead>
<th ...</th>
...
</thead>
<tbody>
<tr>
    <td>mark jones</td>

        <td>blah blah</td>
        <td>mark jones</td>
        <td>blah blah</td>
        <td>11/12/2009</td>
        <td>blah blah</td>

 </tr>
 ... 
```

会成为：

```
...
<tr>
    <td>name1</td>

        <td>blah blah</td>
        <td>name1</td>
        <td>blah blah</td>
        <td>11/12/2009</td>
        <td>blah blah</td>

 </tr> 
```

在表格之前、之后和表格之间还有许多其他 HTML 标记和文本。

上面只是一行的一个例子；每一行的名称和其他列数据不同。空白是我查看源代码时的显示方式。我对 Perl 和 Python 相当熟悉，但对解决这个问题的了解还不够。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:35:32.603

假设它在一张桌子上并且你已经`lxml`安装了（以及我还没有早上喝咖啡的警告！）：

```
html = """
<table>
<tr>
    <td>mark jones</td>

        <td>blah blah</td>
        <td>mark jones</td>
        <td>blah blah</td>
        <td>11/12/2009</td>
        <td>blah blah</td>

 </tr></table>"""

import lxml.html
import lxml.etree
from itertools import count

tree = lxml.html.fromstring(html)
next_name = lambda count=count(1): 'name{}'.format(next(count))
for trs in tree.findall('tr'):
    tds = trs.findall('td')
    anon_name = next_name()
    tds[0].text = anon_name
    tds[2].text = anon_name

print lxml.etree.tostring(tree) 
```

给你：

```
<table><tr><td>name1</td>

        <td>blah blah</td>
        <td>name1</td>
        <td>blah blah</td>
        <td>11/12/2009</td>
        <td>blah blah</td>

 </tr></table> 
```

# export - 在没有 Java 的情况下设置 highchart 导出服务器

> ID：14769245
> 
> 赞同：0
> 
> 时间：2013-02-08T09:18:58.127
> 
> 标签：export, highcharts

我想设置服务器端图表渲染并保存为图像以创建报告。我想在没有 Java 的情况下做到这一点。如果我理解正确，只有使用 PHP 和 JS 才能正常运行，当数据点少于 1500 个时。这是对的，还是我需要Java？不幸的是，我在第一步中失败了。首先，我想在本地测试环境中设置工作。我的文件系统如下：

D:/xampp/htdocs/chartExport

-- 索引.php

-- 演示.html

---- /js

-------- highcharts-convert.js

-------- highcharts-more.js

-------- highcharts.js

-------- jquery-1.8.2.js

-------- /tmp

问题是，index.php 停在证明 phantom_js 路径的点上。我对帮助说明有点困惑，因为在示例源代码中，一方面定义了路径，另一方面定义了脚本及其存储文件夹。我已经尝试了许多不同的绝对路径和相对路径组合，只有脚本名和 js/highcharts-convert.js 之类的东西我要为路径和脚本定义什么？我认为它应该是这样的：

```
define ('PHANTOMJS_PATH', 'js/');     
define ("PHANTOMJS_SCRIPT", 'highcharts-convert.js');     
define("TMP_DIR", "js/tmp"); 
```

但事实并非如此。是否需要定义绝对路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:43:48.303

自述文件中有错误。应该是这样的；

```
// PATH TO PHANTOMJS EXECUTABLE
define ('PHANTOMJS_PATH', '/usr/local/bin/phantomjs');
// PATH TO HIGHCHARTS PHANTOM SCRIPT
define ("PHANTOMJS_SCRIPT", 'highcharts-convert.js'); 
```

# javascript - 如何使用jquery更改img的src

> ID：14769247
> 
> 赞同：0
> 
> 时间：2013-02-08T09:19:00.327
> 
> 标签：javascript, jquery, twitter-bootstrap

我已经动态添加了新`li`标签，它们应该根据点击时切换的活动类显示不同的图像，但我无法掌握它。我知道因为应该更改的图像在 img 标签中，但更改标签的条件是`src`标签中`img`的活动类`li`

我尝试在 jquery 中使用以下代码

```
if ($("li").hasClass("active"))
{
    $("img#test2").attr("src","assets/img/button_home_selected3.png");
} 
else 
{
    $("img#test2").attr("src","assets/img/button_home_plain.png");
} 
```

html是：

```
<li id="test" style="list-style: none;" class="active">
    <a href="#home" data-toggle="tabs"><img src="assets/img/button_home_plain.png" id="test2"  width="83" style="margin-left:10px;"</a>
</li> 
```

事件处理程序：

```
$('.plus').click(function(e) {
e.preventDefault();
var li_count = $('#nav-tabs li').length;
if (li_count <= 3)
if(counter <= 3){
$('#nav-tabs').append('<a href="#tab' + counter + '" data-toggle="tabs"><li style="list-style: none; float:left; margin-left:-5px; width:82px;"><img src="assets/img/button_home_plain.png" width="83" style="margin-left:18px;" /></a></li>');
} else { alert("Only 3 Tabs Allowed!")}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:50:22.510

尝试这个：

```
...
...
//code where you are changing the class
...
...

$('li').each(function() {
    if($(this).class().indexOf("active") !== -1)
    {
        //Active class is applied
        $(this).children().children().attr("src", "assets/img/button_home_selected3.png");
    }
    else
    {
        $(this).children().children().attr("src", "assets/img/button_home_plain.png");
    }
});

...
... 
```

# linux - 在bash中提取另一个字符串之后的字符串？

> ID：14769250
> 
> 赞同：0
> 
> 时间：2013-02-08T09:19:16.100
> 
> 标签：linux, bash, grep, design-patterns

我有以下字符串：

> [1360308597] 服务通知：qreda;demo-jms2;OutConnectorResponse;notify-service-by-email;CRITICAL ConsumerCount=0[1360308817] 服务通知：qreda;demo-jms2;Disk Space;CRITICAL;notify-service-by-email ;DISK CRITICAL - 可用空间：/data 3018 MB (10% inode=92%):

在上面的字符串中，我想提取下面的字符串`demo-jms2`。这里`demo-jms2`出现两次。我想得到所有单词`demo-jms2`，所以答案应该是 `OutConnectorResponse`and `Disk Space`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:33:46.543

你想要的是 [积极的后视](http://www.regular-expressions.info/lookaround.html)：

```
$ grep -Po '(?<=demo-jms2;)[^;]+' file
OutConnectorResponse
Disk Space 
```

选项：

> -P, --perl-regexp PATTERN 是 Perl 正则表达式
> 
> -o, --only-matching 仅显示与 PATTERN 匹配的行的一部分

解释：

```
(?<=demo-jms2;) # Positive lookbehind: match the follow after literal demo-jms2;
[^;]+           # Match one or more non ; characters 
```

**编辑：**

要通过以下方式从结果管道中过滤重复项`sort -u`：

```
$ grep -Po '(?<=demo-jms2;)[^;]+' file 
OutConnectorResponse
Disk Space
OutConnectorResponse
Disk Space

$ grep -Po '(?<=demo-jms2;)[^;]+' file | sort -u
Disk Space
OutConnectorResponse 
```

# iphone - EXC_BREAKPOINT 崩溃。可能的越狱问题？

> ID：14769251
> 
> 赞同：8
> 
> 时间：2013-02-08T09:19:16.347
> 
> 标签：iphone, ios, objective-c, crash, jailbreak

我今天收到了 Crashlytics 的崩溃报告，但无法弄清楚问题所在。我的应用程序已经运行了几个月没有问题，所以这似乎是一次性的。

崩溃是`Exception Type EXC_BREAKPOINT Code UNKNOWN at 0xdefe`

```
1    UIKit   _shadowImageInRectForSlice + 258
2    UIKit   _shadowImageInRectForSlice + 258
3    UIKit   -[UIActionSheet(Private) layout] + 3586
4    UIKit   -[UIActionSheet(Private) presentSheetInView:] + 268
5    myapp   GraphViewController.m line 135
             -[GraphViewController graphButtonPressed:] + 135
6    UIKit   -[UIApplication sendAction:to:from:forEvent:] + 72
7    UIKit   -[UIBarButtonItem(UIInternal) _sendAction:withEvent:] + 120
8    UIKit   -[UIApplication sendAction:to:from:forEvent:] + 72
9    UIKit  -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 30
10   UIKit  -[UIControl sendAction:to:forEvent:] + 44
11   UIKit  -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 502
12   UIKit  -[UIControl touchesEnded:withEvent:] + 488
13   UIKit  -[UIWindow _sendTouchesForEvent:] + 524
14   UIKit  -[UIApplication sendEvent:] + 380
15   UIKit  _UIApplicationHandleEvent + 6154
16   GraphicsServices   _PurpleEventCallback + 590
17   GraphicsServices   PurpleEventCallback + 34
18   CoreFoundation     __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 34
19   CoreFoundation     __CFRunLoopDoSource1 + 138
20   CoreFoundation     __CFRunLoopRun + 1384
21   CoreFoundation     CFRunLoopRunSpecific + 356
22   CoreFoundation     CFRunLoopRunInMode + 104
23   GraphicsServices   GSEventRunModal + 74
24   UIKit  UIApplicationMain + 1120
25   myapp   main.m line 16
             main + 16 
```

现在 ViewController 的第 135 行它只是`[actionSheet showInView:self.view];`用于`UIActionSheet`

崩溃发生在 iPad2.5（不确定是哪个型号）上，但我的应用程序仅适用于 iPhone，因此会被窗口化。和 iOS 6.1

需要注意的另一件事是该设备已越狱。这会导致崩溃吗？我知道他们可以安装任何类型的插件来操作视图。

- - - - - 额外的 - - - - -

在写这篇文章时，我收到了第二份崩溃报告，它似乎来自不同的用户，因为这次是 iPhone4.1 上的 iOS 5.1.1。这款手机也被越狱了。

`Exception Type EXC_BAD_ACCESS Code KERN_INVALID_ADDRESS at 0x4003109b`

```
0    libobjc.A.dylib     objc_msgSend + 15
1    UIKit   -[UIActionSheet(Private) _buttonClicked:] + 250
2    CoreFoundation  -[NSObject performSelector:withObject:withObject:] + 52
3    UIKit   -[UIApplication sendAction:to:from:forEvent:] + 62
4    UIKit   -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 30
5    UIKit   -[UIControl sendAction:to:forEvent:] + 44
6    UIKit   -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 492
7    UIKit   -[UIControl touchesEnded:withEvent:] + 476
8    UIKit   -[UIWindow _sendTouchesForEvent:] + 318
9    UIKit   -[UIWindow sendEvent:] + 380
10   UIKit   -[UIApplication sendEvent:] + 356
11   UIKit   _UIApplicationHandleEvent + 5826
12   GraphicsServices    PurpleEventCallback + 882
13   CoreFoundation  __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
14   CoreFoundation  __CFRunLoopDoSource1 + 140
15   CoreFoundation  __CFRunLoopRun + 1370
16   CoreFoundation  CFRunLoopRunSpecific + 300
17   CoreFoundation  CFRunLoopRunInMode + 104
18   GraphicsServices    GSEventRunModal + 136
19   UIKit   UIApplicationMain + 1080
20   myapp  main.m line 16
            main + 16 
```

这个甚至没有显示`ViewController`导致崩溃的原因！

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T11:03:11.040

请注意，这种东西很难调试，尤其是在没有代码和除此崩溃日志之外的任何其他上下文的情况下。我会尝试给出一些指示/我会做的事情。

iPad 2,5的第一个[似乎是 iPad mini WiFi](http://www.imore.com/regarding-ipad-25-and-ipad-26)，但我对此并不完全确定。因此，在 iPad mini 上测试您的应用程序（也在装有 iOS 5.1.1 的设备上测试），看看会发生什么，专注于`UIActionSheet`您使用的实例并开始在`GraphViewController`. 确保您能想到的所有情况都能正常工作。

如果可行，并且这些是您仅有的 2 个崩溃报告：**不要惊慌！**我不知道您的应用程序有多少用户，但其中只有 2 个用户发生过一次崩溃。你说他们可能越狱了他们的设备，他们知道应用程序可能会因此而崩溃。

考虑到这一点，决定是否值得花时间和精力来解决这个问题。

`UIActionSheet`如果是，您可以查看在使用实例期间可以释放的对象或块，`EXC_BAD_ACCESS`基本上是说“天哪，我们必须使用的对象不见​​了！”。

`EXC_BREAKPOINT`大多数时候告诉您您正在引用一个不存在的符号或框架。这可能是因为手机已越狱，或者因为您说您的应用程序与 iOS 版本 X 兼容，但您使用的框架/方法仅在更新版本中可用。所以也检查一下。

我希望通过这种方式，您可以找到一些可疑代码，并能够将其发布到 StackOverflow 上，或者您可以自己解决问题。

希望这能在正确的方向上提供一点帮助，但是，再一次，只有没有代码或进行一些测试的能力的崩溃报告并没有多大意义......

# design-patterns - Windows Phone 8 中的静态资源优先级

> ID：14769253
> 
> 赞同：0
> 
> 时间：2013-02-08T09:19:26.603
> 
> 标签：design-patterns, windows-phone-8, resourcedictionary

我有一个基本样式文件，其中包含所有基本颜色和基本字体设置。然后我有 2 个使用该初始资源的其他资源字典。

我的设置如下：

```
<Application.Resources>
    <ResourceDictionary>
        <localization:LocalizationLocator x:Key="LocalizedStrings" />
        <viewModels:ViewModelLocater x:Key="VmLocator" />
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="\Resources\Styles\BaseStyles.xaml" />
            <ResourceDictionary Source="\Resources\Styles\FormInputStyles.xaml" />
            <ResourceDictionary Source="\Resources\Styles\OtherControllsStyles.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

然后我从 FormInputStyles.xml 得到以下异常

`Cannot find a Resource with the Name/Key MyNewAccentColor [Line: 17 Position: 44]`

有没有办法在添加合并字典之前加载 BaseStyles.xaml？

（我知道我可以将它们全部放在同一个文件中，但我希望我的样式被分解，以便我可以更好地重用代码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:46:12.593

我自己没有尝试过，但[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/hh968442.aspx)页面说：

`If multiple merged dictionaries exist, these dictionaries are checked in the inverse of the order in which they are declared in the MergedDictionaries property.`

即尝试将 BaseStyles.xaml 作为最后一个元素。

并且还请检查这个 SO 问题：[正确使用 Silverlight 3 中的合并资源字典](https://stackoverflow.com/questions/2226436/proper-usage-of-merged-resource-dictionaries-in-silverlight-3)

# jenkins - 如果下游作业失败，如何向上游提交者发送电子邮件？

> ID：14769258
> 
> 赞同：3
> 
> 时间：2013-02-08T09:19:37.677
> 
> 标签：jenkins, continuous-integration, hudson

我们在 Jenkins 有 2 个项目。1\. 项目-A 2\. 测试

测试是 Project-A 的下游工作。目前，如果 Project-A 中的某些更改破坏了测试工作，则不会向罪魁祸首（在 Project-A 中进行更改的人）发送电子邮件。

如果我的下游工作（测试模块）失败，我想向所有上游提交者发送邮件。我们该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-27T21:03:30.543

由于这个问题是在 2013 年提出的，Jenkins 中的电子邮件扩展插件已更新，以支持添加“上游提交者的收件人提供程序”。此功能是在 2.39 版（2014 年 11 月）中添加的

插件的链接在这里：[https ://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)

通过将可编辑的电子邮件通知构建后操作添加到测试作业，然后选择高级设置来访问此功能。“上游提交者”将作为选项出现在发送到下。

# oracle11g - Oracle 11 - sqlplus - 出错时回滚整个脚本 - 如何？

> ID：14769263
> 
> 赞同：5
> 
> 时间：2013-02-08T09:19:54.257
> 
> 标签：oracle11g, sqlplus, rollback

如何让 Oracle 11g 在包含的 SQL 文件中出现任何错误时回滚整个事务？

文件内容为：

```
set autocommit off
whenever SQLERROR EXIT ROLLBACK

insert into a values (1);
insert into a values (2);

drop index PK_NOT_EXIST;

commit; 
```

并且使用“@”将该文件包含到 sqlplus 会话中：

```
@error.sql 
```

正如所料，sqlplus 会话终止，输出为

```
SQL> @error.sql
1 row created.
1 row created.
drop index PK_NOT_EXIST           *
ERROR at line 1:
ORA-01418: specified index does not exist
Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options 
```

但是当我重新启动 sqlplus 时，表 a 包含 2 条记录，这意味着在退出 sqlplus 时存在**提交**而不是回滚。

我可以以某种方式强制 sqlplus 执行以下操作：

1.  出错时停止处理文件，
2.  并在错误时回滚整个事务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T09:53:34.610

我解决了这个问题，如果有人遇到这样的问题，我会发回解决方案。

如果我没有将 DDL 命令放入脚本中，则回滚将正确执行。

所以脚本：

```
set autocommit off
whenever SQLERROR EXIT ROLLBACK

insert into a values (1);
insert into a values (2);

insert into a values ('x');

commit; 
```

作品。

如果使用 DDL，那么一般 Oracle 不提供回滚功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T09:54:38.640

DDL 在运行之前和之后执行提交，这样即使您的 DDL 失败，oracle 也已经提交了事务。

你可以解决它：

```
set autocommit off
whenever SQLERROR EXIT ROLLBACK

declare
  procedure drop_idx(i varchar2)  
  is
    pragma autonomous_transaction; -- this runs in its own transaction.
  begin
    execute immediate 'drop index ' || i;
  end;
begin
  insert into a values (1);
  insert into a values (2);
  drop_idx('PK_NOT_EXIST');
end;
/ 
```

# highcharts - 我如何翻转高图？

> ID：14769266
> 
> 赞同：0
> 
> 时间：2013-02-08T09:20:03.163
> 
> 标签：highcharts, highstock

我怎样才能翻转图表，使其从右到左开始？

看下面的例子：（我翻转了图片）

* * *

![例子](../Images/1433ae5ea3e7998140aa6b2e8babcf69.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:33:32.510

除了 reversed 选项，您还应该使用 rtl 参数作为图例。 [http://api.highcharts.com/highcharts#legend.rtl](http://api.highcharts.com/highcharts#legend.rtl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:24:11.663

您可以翻转 xAxis 或 yAxis 而不翻转标签，如下所示：

```
xAxis: {
    reversed: true  
}, 
```

[演示](http://jsfiddle.net/WzVh4/547/)

# php - mysql加入varchar字段

> ID：14769267
> 
> 赞同：-4
> 
> 时间：2013-02-08T09:20:10.147
> 
> 标签：php, mysql, sql, join

我需要加入 2 张桌子

a) table_a

```
id        ref_no                        name
---------------------------------------------------
1       HRTU/00000001/2013             ram
2       HRTU/00000002/2013             sam 
```

b）table_b

```
 ref_no                        desg
---------------------------------------------------
    HRTU/00000001/2013               project manager
    HRTU/00000002/2013               developer 
```

这 2 个表将由它们的 ref_no 连接。并将给我如下输出

c) 输出表

```
 ref_no                              name                             desg
----------------------------------------------------------------------------------
    HRTU/00000001/2013               ram                       project manager
    HRTU/00000002/2013               sam                         developer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:21:30.733

```
SELECT a.*, b.*  -- SELECT columns you want
FROM    table1 a
        INNER JOIN table2 b
            ON a.ref_no = b.ref_no 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/08d91/1)

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:28:44.543

```
SELECT a.ref_no AS ref_no, a.valp AS name, b.desg AS desg
FROM table1 a
INNER JOIN table2 b ON a.ref_no = b.ref_no 
```

使用 SELECT 中的“AS”，您可以给列名称

# html - 一个表单中按钮的不同操作 URL

> ID：14769268
> 
> 赞同：2
> 
> 时间：2013-02-08T09:20:12.937
> 
> 标签：html

表单中有一些按钮。我希望其中一个使用另一个 url 作为操作 url。但我希望它在那个表格内，我不想也不能为此创建另一个表格。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-27T22:36:33.580

HTML5 (IE>9)，提供[`formaction`属性](http://www.w3schools.com/tags/att_button_formaction.asp).

```
 <form action="demo_form.asp" method="get">
  First name: <input type="text" name="fname"><br>
  Last name: <input type="text" name="lname"><br>
  <button type="submit">Submit</button><br>
  <button type="submit" formaction="demo_admin.asp">Submit as admin</button>
</form> 
```

> 带有两个提交按钮的表单。第一个提交按钮将表单数据提交到“demo_form.asp”，第二个提交到“demo_admin.asp”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:28:49.343

您可以为此使用 JavaScript

```
<form name="my_form" method="post">
   Name <input type="text" name="person_name" /><br />
   <input type="button" value="Button 1" name="button_1" onclick="return target_btn1();">
   <input type="button" value="Button 2" name="button_2" onclick="return target_btn2();">
</form>

<script>
function target_btn1() {
    document.my_form.action = "whatever.php"; //Trigger action
    document.my_form.submit(); //Submit action performed
    return true;
}

function target_btn2() {
    document.my_form.action = "whatever2.php"; //Trigger action
    document.my_form.submit(); //Submit action performed
    return true;
}
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T09:28:59.427

向调用 javascript 函数的按钮添加 onclick 事件。然后，在该函数中，设置表单的操作，然后提交。像这样的东西：

```
<input type="button" id="blah" value="Press Me" onclick="javascript:SetForm();"> 
```

然后，在javascript中：

```
 function SetForm()
{
  document.formname.action = '';
  document.formname.submit();
} 
```

# actionmailer - 发送带有文本附件的电子邮件时“缺少起始边界”

> ID：14769269
> 
> 赞同：3
> 
> 时间：2013-02-08T09:20:14.420
> 
> 标签：actionmailer, amazon-ses

我无法发送带有文本附件的电子邮件（没有附件，一切都很好）。我正在使用 actionmailer 3.2.11 并尝试通过 Amazon SES 发送电子邮件。在我看来，亚马逊 snmp 服务器在我生成的电子邮件方面存在问题。生成电子邮件的代码如下所示：

```
class ServiceMailer < ActionMailer::Base
    default from: "noreply@dungeonpilot.com"

    def server_crashed log_file_names
        attachments[ 'foo.txt' ] = 'Hallo'
        mail to: 'Txxx@xxzki.de', subject: '[dungeonpilot] Server Crashed'
   end
end 
```

发送邮件时的错误消息：`Net::SMTPFatalError: 554 Transaction failed: Missing start boundary`.

生成的邮件是这样的：

```
Date: Fri, 08 Feb 2013 10:11:09 +0000
From: noreply@dungeonpilot.com
To: Txxx@xxxzki.de
Message-ID: <5114cf3dc4886_701165e7f848869@ip-10-62-103-46.mail>
Subject: [dungeonpilot] Server Crashed
Mime-Version: 1.0
Content-Type: multipart/mixed;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

--
Date: Fri, 08 Feb 2013 10:11:09 +0000
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename=foo.txt
filename: foo.txt
Content-ID: <5114cf3d55085_701165e7f8487cc@ip-10-62-103-46.mail>

Hallo

---- 
```

将此作为测试邮件传递给 SES，也会导致“缺少开始边界”。所以我认为交付的内容一定有问题。

在views 文件夹中，只有一个.txt.erb 模板。我添加了一个 .html.erb 模板，现在`boundary="`邮件部分之间有一个 -header 和边界：

```
Date: Fri, 08 Feb 2013 10:26:57 +0000
From: noreply@dungeonpilot.com
To: Torsten@Robitzki.de
Message-ID: <5114d2f1b8175_702812508041181@ip-10-62-103-46.mail>
Subject: [dungeonpilot] Server Crashed
Mime-Version: 1.0
Content-Type: multipart/mixed;
 boundary="--==_mimepart_5114d2f18f621_7028125080411632";
 charset=UTF-8
Content-Transfer-Encoding: 7bit

----==_mimepart_5114d2f18f621_7028125080411632
Date: Fri, 08 Feb 2013 10:26:57 +0000
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename=foo.txt
filename: foo.txt
Content-ID: <5114d2f0ee34b_7028125080411545@ip-10-62-103-46.mail>

Hallo

----==_mimepart_5114d2f18f621_7028125080411632
Date: Fri, 08 Feb 2013 10:26:57 +0000
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-ID: <5114d2f19ce45_7028125080411785@ip-10-62-103-46.mail>

----==_mimepart_5114d2f18f621_7028125080411632-- 
```

看起来像 ActionMailer 中的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-09-09T22:13:22.823

当电子邮件文本正文和电子邮件 HTML 正文为空时，我遇到了此错误。因此，在使用 Amazon Simple Email SendRawEmailAsync 方法发送电子邮件时，其中之一必须具有价值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:24:15.313

我的错，我用 txt 扩展名命名模板，而不是文本扩展名。

在这种情况下，下一版本的 actionmailer 将抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T08:53:45.273

我遇到了类似的问题。对我来说，附件已正确连接。为我解决的解决方案是创建一个视图 (server_crashed.html.erb)。在此之后，当我运行 rake 任务时，它运行良好，我能够发送邮件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-02T20:09:06.253

我遇到了同样的问题，在我的情况下，我在电子邮件正文中附加了一个空的多部分。

# c++ - 错误 LNK2001 Visual C++

> ID：14769281
> 
> 赞同：-1
> 
> 时间：2013-02-08T09:20:48.060
> 
> 标签：c++

我编译这段代码：

```
class TextBox
{
public: 
struct Caret {int x; int y; int index;};
    static Caret caret;
    // more code...
} 
```

我得到了这个错误

```
error LNK2001: unresolved external symbol "public: static struct TextBox::Caret TextBox::caret" (?caret@TextBox@@2UCaret@1@A) 
```

我的错误是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:21:58.080

您需要实例化`caret`；在源文件中添加：

```
TextBox::Caret TextBox::caret; 
```

# highcharts - 更新 HighCharts 图表上的单个选项

> ID：14769282
> 
> 赞同：0
> 
> 时间：2013-02-08T09:20:48.317
> 
> 标签：highcharts

有没有办法在创建后更新图表的单个选项。所以在我的情况下，我想将 xAxis 的类型从 切换`linear`到`logarithmic`。目前我重绘了整个图表，但这似乎有点奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:53:30.480

目前它不可用（仅使用您的方式），但在下一个版本（3.0）中应该可用。

# glassfish - Glassfish 3.1.2 上带有 Jackrabbit OSGi Bundle 的 MalformedURLException

> ID：14769283
> 
> 赞同：1
> 
> 时间：2013-02-08T09:20:55.633
> 
> 标签：glassfish, osgi, jackrabbit, jcr, malformedurlexception

我正在尝试使用最新的 Jackrabbit 稳定版本（2.4.3）并将其部署为 Glassfish v3.1.2 上的 OSGi 包。

首先，我尝试了**jackrabbit-standalone**包，但我遇到了一些奇怪的依赖关系（com.ibm.jvm！？）的问题。然后我注意到**jackrabbit-bundle**项目并使用它所需的依赖项（Commons Logging、SLF4J、JCR API、DB2 驱动程序）进行部署。

尽管捆绑包在安装后似乎启动得很好，但当我重新启动 Glassfish 服务器时，会引发以下异常：

```
[#|2013-02-08T09:49:12.559+0100|SEVERE|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.config|_ThreadID=18;_ThreadName=Thread-2;|Critical error during deployment: 
com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: java.net.MalformedURLException: Unknown protocol: jndi
at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:672)
at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:322)
at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225)
at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLoaderService.processApplication(ApplicationLoaderService.java:375)
at com.sun.enterprise.v3.admin.adapter.InstallerThread.load(InstallerThread.java:210)
at com.sun.enterprise.v3.admin.adapter.InstallerThread.run(InstallerThread.java:108)
Caused by: java.util.concurrent.ExecutionException: java.net.MalformedURLException: Unknown protocol: jndi
at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
at java.util.concurrent.FutureTask.get(FutureTask.java:83)
at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:670)
... 19 more
Caused by: java.net.MalformedURLException: Unknown protocol: jndi
at java.net.URL.<init>(URL.java:601)
at java.net.URL.<init>(URL.java:464)
at java.net.URL.<init>(URL.java:413)
at java.net.URI.toURL(URI.java:1080)
at com.sun.faces.config.ConfigManager$ParseTask.call(ConfigManager.java:920)
at com.sun.faces.config.ConfigManager$ParseTask.call(ConfigManager.java:865)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:656)
... 19 more
|#] 
```

搜索这个错误并没有让我走得太远。我已经尝试将 bundle startlevel 提高到 10，假设它开始得太早了，但这并没有帮助。

有谁知道可能是什么问题？有人甚至将 Jackrabbit 用作纯 OSGi Bundle（不包括 Apache Sling 的东西）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:36:19.210

该问题并非特定于jackrabbit。看[http://java.net/jira/browse/GLASSFISH-18880](http://java.net/jira/browse/GLASSFISH-18880)，其中详细讨论了此错误。它已在 GlassFish 主干构建中得到修复。如果您使用的是 GlassFish 3.1.2.x，请使用 bug 状态白板中提到的解决方法。本质上，您必须通过运行以下命令来禁用管理控制台作为服务器启动的一部分自动出现：

`asadmin set configs.config.server-config.admin-service.property.adminConsoleStartup=NEVER`

希望这可以帮助，

萨虎

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:53:08.257

设置此属性对我不起作用。
会是什么？：[https](https://stackoverflow.com/questions/15020979/also-having-malformedurlexception-with-jackrabbit-osgi-bundle-on-glassfish-3-1-2)
://stackoverflow.com/questions/15020979/also-having-malformedurlexception-with-jackrabbit-osgi-bundle-on-glassfish-3-1-2 M。

# wpf - 实体框架映射、注释和一般信息

> ID：14769284
> 
> 赞同：0
> 
> 时间：2013-02-08T09:20:57.417
> 
> 标签：wpf, entity-framework, annotations

在将实体框架与 WPF 应用程序一起使用时，我有一个*（我希望）*基本问题。

我按照 msdn 演练：http: [//msdn.microsoft.com/en-us/data/jj200620](http://msdn.microsoft.com/en-us/data/jj200620) 它说：

> 许多开发人员宁愿使用 Data Annotations 而不是 fluent API 来执行配置。

我的理解是，所有映射类的映射“文件夹”都是无用的，人们更喜欢直接在模型类中使用注释。

所以从这里开始，要么我是对的，要么我想摆脱映射类

或者我错了，也许我需要某种指导线来开始使用实体框架

我选择代码优先方法，因为我在现有数据库上工作。问题是他们使用 EF 的方法太多了，我很困惑。

*   有些人正在使用 Edmx 文件
*   其他人使用逆向工程
*   注解
*   流利的api

对于最新版本的 EF，我找不到任何类型的真正完整的书籍或文档、基本指南。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:29:41.013

好吧，对于一个基本的初学者，我建议您首先尝试代码，因为它很容易开始，只需将您的实体定义为 c# 类，然后当包含在数据上下文中时，它们将自动创建您的数据库。我喜欢 codefirst 的原因，它对于最常见的情况很容易并且可以快速实现。迁移也有一些自动化。我建议你阅读这个[博客](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)。

# php - 使用jquery在codeigniter中提交带有标签的表单

> ID：14769285
> 
> 赞同：-1
> 
> 时间：2013-02-08T09:20:57.977
> 
> 标签：php, jquery, codeigniter

```
<script>
    function sendAction(obj){                
        var action=$(obj).attr('href');   
        alert(action);
        $("#refreshForm").attr("action",action);
        document.refreshForm.submit();
    }                           
</script>
<form id="refreshForm" action="" method="post" name="refreshForm">                     
    <input type="hidden" name="slide" value="slide" id="slide" />                   
</form>       
<ul class="navigation">
    <li class="about">
        <a class="mnu-about" id="about_us" onclick="sendAction(this);" href="<?php echo SITEURL ?>/about_us/"> About</a>
    </li>
</ul> 
```

单击一个标签时，我调用了我要提交表单的 sendAction 函数。但是没有提交表单。

以上代码是我在 home.php 视图中编写的，点击链接我正在打印 print_r($_POST)。但我没有在控制器中获得隐藏字段值。]

这意味着表单没有提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:31:40.057

为什么你想要`onclick="sendAction(this);" href="<?php echo SITEURL ?>/about_us/"`onclick 和 href。如果您正在提交表单 onclick，请删除`href`或制作它`href="#"`

提交表单使用`$("#refreshForm").submit();`

试试这个，这会起作用：

```
function sendAction(obj){                
    $("#refreshForm").submit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:26:33.420

尝试更改以下行

```
document.refreshForm.submit(); 
```

至

```
$("#refreshForm").submit(); 
```

祝你有美好的一天。

# java - 如何在主方法中访问 A 类的打印方法？在 main 方法中创建的对象 a 和 b 之间的区别？

> ID：14769289
> 
> 赞同：1
> 
> 时间：2013-02-08T09:21:20.233
> 
> 标签：java, inheritance, overriding, abstract

如何在主方法中访问 A 类的打印方法？在 main 方法中创建的对象 a 和 b 之间的区别？

```
 abstract class A {
        void print() {
            System.out.println("A");
        }
    }

    class B extends A {
        void print() {
        System.out.println("B");
        }
    }

    public class test {
        public static void main(String[] args) {
            B b = new B();
            A a = new B();
            b.print();
            a.print();
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:23:16.487

> 如何在主方法中访问 A 类的打印方法？

你不能，因为你没有一个实例`A`，只有一个`B`，它已经覆盖了该方法。

> 在 main 方法中创建的对象 a 和 b 之间的区别？

它们是不同的实例`B`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:25:11.507

要么将 a 初始化为 new A()，而不是 new B()，

或者

向 B 添加一个方法，例如 printA()

无效 printA() { super.print(); }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:25:14.010

在这两种情况下，都会调用`overriden print()`in 。`class B`

**情况1：** `B b = new B();`

这个案子很简单。您使用 B 引用创建 B 对象。

**案例2：** `A a = new B();`

在这里，您正在`B object`使用`A reference`. 这称为多态地创建对象或`coding to an interface`. 正如您在 中**重写** `print()`的那样`class B`，在**运行时**重载的方法`class B`将被调用。

**其他选项：**

在 B 类中创建一个方法，该方法将使用 super 关键字调用 A 类的打印方法。

```
 class B extends A {
        public void someOtherMethod(){
            super.print();
         }
    }
   from main:
      B  b = new B();
      b.someOthermethod(); 
```

# drools - 比较 DROOLS 中两个列表中的值

> ID：14769292
> 
> 赞同：0
> 
> 时间：2013-02-08T09:21:32.577
> 
> 标签：drools

我刚刚开始使用drools 规则引擎。我在一个事实中有两个列表，并且想要迭代地访问其中的值。我尝试了一件小事，但它没有用。我需要在流口水中实现类似嵌套 for 循环的东西。在这两个列表中，一个是类型`String`，另一个是用户定义的对象。

```
rule "for the Handling Exception"

when
$billInfo : BillingInfo ( $except : exceptions , $handException : handlingExceptions , $rate : rate , $price : price);

  HandlingException ( $exc : exceptionValue ; $exce : this  )from $except
 exists ( String ( $handExc : this == $exc  ) from $handException)
then 

$billInfo.setPrice($price + ($rate * $exce.getDiscount()) );

end 
```

上面，除了是用户定义的列表，`$handexception`属于`String`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:50:34.957

如果您要实现的目标是检查 BillingInfo 中是否至少有一个 HandlinExpection ($h) 和一个 String ($s)，来自 handlingExceptions，例如：$h.exceptionValue == $s，您可以做这样的事情：

```
when
    $b: BillingInfo()
    exists (
        $h: HandlingException(exceptionValue memberof $b.handlingExceptions) from $b.exceptions
    )
then

end 
```

希望能帮助到你，

# regex - 正则表达式 - 删除之间的字符

> ID：14769293
> 
> 赞同：0
> 
> 时间：2013-02-08T09:21:35.553
> 
> 标签：regex, unix, regex-negation

早些时候，我尝试了一些正则表达式来修剪`<!-- and -->`（也包括这些标签）之间的字符串，但没有成功。

你能给我一些关于这个问题的信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:32:58.170

正则表达式匹配*HTML 注释*：

```
/<!--.*?-->/s 
```

在这里解释演示：[http ://regex101.com/r/qZ4uP9](http://regex101.com/r/qZ4uP9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:34:12.737

要匹配看起来像 XML 注释规则（并且非常接近 HTML 注释规则）的文本中的注释，您需要这样的内容：

```
<!--.*?--> 
```

假设您的语言的 RE 引擎支持非贪婪量词。删除需要在整个输入文本中重复匹配并替换空字符串；其语法取决于所讨论的语言。

如果没有非贪婪的量词，事情会变得更加复杂（注意，这对于 HTML 注释来说有点偏离，但你真的不想了解差异的细节）：

```
<!--([^-]|-[^-])*--> 
```

请注意，这`--`不是您应该在 XML 注释中遇到的内容，除非它后面跟着`>`; 这是 XML 注释本质的一部分……</p>

# reporting-services - 隐藏查询结果的子报表

> ID：14769294
> 
> 赞同：0
> 
> 时间：2013-02-08T09:21:35.307
> 
> 标签：reporting-services

我正在开发一个包含几个子报告的 SSRS 报告。报表获取一个参数并使用它来查询一个对象 ID，该 ID 用作所有子报表的参数。问题在于，在某些情况下，查询不返回对象 ID（数据集没有数据记录）。在这种情况下，我必须隐藏子报告并显示一条短信。

我不知道如何设置子报表的显示/隐藏条件。我可以为此使用一个变量，但我不知道如何根据查询结果设置变量值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:38:34.593

正如 Jeroen 所写，SubReport 的 Visibility 值应设置如下：

=IIF(RowNumber("MyDataSet") = 0, True, False)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T11:39:18.557

在您的子报告中，您可以添加一个文本框，其中包含您想要在没有返回数据时显示的文本。文本框的可见性或隐藏属性应设置为

```
=iif(Count(Fields!SomeField.Value, "DataSet") > 0, true, false) 
```

同样，对于子报表，将其放入 Rectangle 并将可见性或隐藏属性设置为

```
=iif(Count(Fields!SomeField.Value, "DataSet") > 0, false, true) 
```

# java - 当 MDB 尝试连接到远程队列时，在 WebSphere 8 中出现异常

> ID：14769295
> 
> 赞同：1
> 
> 时间：2013-02-08T09:21:37.783
> 
> 标签：java, ejb, ibm-mq, websphere-8

当一条消息被丢弃在队列中时，我们在 Websphere 8 中遇到错误。

现在，如果我们重新启动服务器，队列中的所有消息都可以正常工作。但是在队列为空并且新消息被丢弃在队列中之后，它会在一段时间内工作，然后它会抛出错误。

关于为什么会发生这种情况的任何想法？

```
[2/7/13 20:20:41:363 PST] 0000001e LocalTranCoor E   WLTC0017E: Resources rolled back due to setRollbackOnly() being called.
[2/7/13 20:20:41:425 PST] 0000009a SibMessage    W   [:] CWSJY0003W: JMSCC0110: An exception '
                       Message : java.lang.NullPointerException
                         Class : class java.lang.NullPointerException
                         Stack : com.ibm.msg.client.wmq.v6.jms.internal.MQSession.consume(MQSession.java:1943)
                               : com.ibm.msg.client.wmq.v6.jms.internal.MQSession.loadMessageReference(MQSession.java:4442)
                               : com.ibm.msg.client.jms.internal.JmsSessionImpl.consume(JmsSessionImpl.java:3199)
                               : com.ibm.msg.client.jms.internal.JmsSessionImpl.run(JmsSessionImpl.java:2838)
                               : com.ibm.mq.jms.MQSession.run(MQSession.java:862)
                               : com.ibm.ejs.jms.JMSSessionHandle.run(JMSSessionHandle.java:1057)
                               : com.ibm.ejs.jms.listener.ServerSession.connectionConsumerOnMessage(ServerSession.java:1085)
                               : com.ibm.ejs.jms.listener.ServerSession.onMessage(ServerSession.java:755)
                               : com.ibm.ejs.jms.listener.ServerSession.dispatch(ServerSession.java:721)
                               : sun.reflect.GeneratedMethodAccessor22.invoke(null:-1)
                               : sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
                               : java.lang.reflect.Method.invoke(Method.java:611)
                               : com.ibm.ejs.jms.listener.ServerSessionDispatcher.dispatch(ServerSessionDispatcher.java:47)
                               : com.ibm.ejs.container.MDBWrapper.onMessage(MDBWrapper.java:98)
                               : com.ibm.ejs.container.MDBWrapper.onMessage(MDBWrapper.java:135)
                               : com.ibm.ejs.jms.listener.ServerSession.run(ServerSession.java:580)
                               : com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1659)
' was caught while processing a message for delivery to a message driven bean.
[2/7/13 20:20:41:425 PST] 0000009a LocalExceptio E   CNTR0020E: EJB threw an unexpected (non-declared) exception during invocation of method "onMessage" on bean "BeanId(JBoomerang#JBoomerangEJB.jar#LNPGWStatusResponseMDB1, null)". Exception data: java.lang.reflect.InvocationTargetException
                at sun.reflect.GeneratedMethodAccessor22.invoke(Unknown Source)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
                at java.lang.reflect.Method.invoke(Method.java:611)
                at com.ibm.ejs.jms.listener.ServerSessionDispatcher.dispatch(ServerSessionDispatcher.java:47)
                at com.ibm.ejs.container.MDBWrapper.onMessage(MDBWrapper.java:98)
                at com.ibm.ejs.container.MDBWrapper.onMessage(MDBWrapper.java:135)
                at com.ibm.ejs.jms.listener.ServerSession.run(ServerSession.java:580)
                at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1659)
Caused by: java.lang.NullPointerException
                at com.ibm.msg.client.wmq.v6.jms.internal.MQSession.consume(MQSession.java:1943)
                at com.ibm.msg.client.wmq.v6.jms.internal.MQSession.loadMessageReference(MQSession.java:4442)
                at com.ibm.msg.client.jms.internal.JmsSessionImpl.consume(JmsSessionImpl.java:3199)
                at com.ibm.msg.client.jms.internal.JmsSessionImpl.run(JmsSessionImpl.java:2838)
                at com.ibm.mq.jms.MQSession.run(MQSession.java:862)
                at com.ibm.ejs.jms.JMSSessionHandle.run(JMSSessionHandle.java:1057)
                at com.ibm.ejs.jms.listener.ServerSession.connectionConsumerOnMessage(ServerSession.java:1085)
                at com.ibm.ejs.jms.listener.ServerSession.onMessage(ServerSession.java:755)
                at com.ibm.ejs.jms.listener.ServerSession.dispatch(ServerSession.java:721)
                ... 8 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-28T11:17:03.270

我同意你的看法，这看起来像是 IV13714 的匹配项。查看该页面 ( [http://www-01.ibm.com/support/docview.wss?uid=swg1IV13714](http://www-01.ibm.com/support/docview.wss?uid=swg1IV13714) ) 我可以看到 IBM 在 MQ 7.0.1.9 中为它提供了修复程序。

由于您处于 WAS 环境中，这意味着您需要升级到附带 MQ 7.0.1.9+ 的 WAS 8.0.0 版本。

IBM 在此处详细说明此信息：[http ://www-01.ibm.com/support/docview.wss?uid=swg21248089](http://www-01.ibm.com/support/docview.wss?uid=swg21248089)

因此，将所有这些放在一起，看起来您需要升级到 WAS 8.0.0.5+

# java - 在 FusionTable API 的 POST 请求中将 SQL INSERT 查询作为参数发送

> ID：14769296
> 
> 赞同：0
> 
> 时间：2013-02-08T09:21:38.913
> 
> 标签：java, post, google-fusion-tables, google-api-java-client, google-oauth

我正在使用服务帐户访问 fusiontable API，并希望发送一个 POST 请求以在 fusiontable 中插入值。我收到以下错误：

```
 400 Bad Request
     {
   "error": {
  "errors": [
  {
"domain": "global",
"reason": "parseError",
"message": "Parse Error"
}
],
  "code": 400,
 "message": "Parse Error"
 }
 } 
```

这是我的代码，请让我知道我哪里出错了。

```
 String PostUrl = "https://www.googleapis.com/fusiontables/v1/tables";
            HttpRequestFactory requestFactory = HTTP_TRANSPORT.createRequestFactory(credential);

            //generate the REST based URL
            GenericUrl url = new GenericUrl(PostUrl.replaceAll(" ", "%20"));
            //make POST request
            String requestBody = "sql=INSERT INTO 1DqxKZUct_VhfG3fZy6Lru1CamniDO8vv5qW6jO8 (Species) VALUES ('Red Shoes')";
            HttpRequest request = requestFactory.buildPostRequest(url, ByteArrayContent.fromString("application/json", requestBody));
            request.getHeaders().setContentType("application/json");
            request.getHeaders().set("sql", "INSERT INTO 1DqxKZUct_VhfG3fZy6Lru1CamniDO8vv5qW6jO8 (Species) VALUES ('Red Shoes')");
            System.out.println("HttpRequest request" + request);
            HttpResponse response = request.execute();
            String content = response.parseAsString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:08:27.813

您需要发送请求以查询 Google API 服务的端点，而不是表端点。即将 PostUrl 值更改为

```
 String PostUrl = "https://www.googleapis.com/fusiontables/v1/query"; 
```

# java - 如何从特殊格式字符串中获取值？

> ID：14769299
> 
> 赞同：-1
> 
> 时间：2013-02-08T09:21:46.777
> 
> 标签：java, android, json, string

我从 web api 获取一个字符串，例如 {"time":"08:05","code":"CSTM","name":"MUMBAI CST"} ，这个 String 不能转换为 JSONObject ，因此我我无法从字符串中获取值。如何从字符串中获取值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:28:30.103

```
 link = new URL("The url");
           InputStream in = link.openStream();
          LoadRegistration_Api(in);

            protected void LoadRegistration_Api(InputStream json)   
                                     throws IOException, JSONException {
        // TODO Auto-generated method stub

        BufferedReader reader = new BufferedReader(new InputStreamReader(
                json));
        StringBuilder sb = new StringBuilder();
        String line = reader.readLine();
        while (line != null) {
            sb.append(line);
            line = reader.readLine();
        }
        reader.close();

        JSONObject jobj = new JSONObject(sb.toString());

        if (jobj.has("time")) // handle Se_wesam

        {
            Result = jobj.getString("time");

        }

        if (jobj.has("code")) // handle Se_wesam

        {
            UserId = jobj.getString("code");

        }

    }
} 
```

试试这个，我认为它会有所帮助

# mysql - 查找在特定上下文中一起出现的所有元素

> ID：14769302
> 
> 赞同：3
> 
> 时间：2013-02-08T09:21:50.997
> 
> 标签：mysql, sql, relational-database

我有一个餐厅评论数据库。我有三个表`restaurant`：`user`和`review`。

A`restaurant`有 N `reviews`，a`user`有 N `reviews`。因此，`review`包含外键`restaurant_id`和`author_id`. 每个表都有一个`ID`属性。

我想找到经常一起发帖的用户。更具体地说，我希望有一个表格，`user_A, user_B, reviewed_together`其中`user_A`和`user_B`为 2列，`user.IDs`并`reviewed_together`包含所有餐厅的数量，其中有 BOTH`user_A`和的评论`user_B`。

我是 SQL 的初学者，我想学习如何正确处理这些情况，因此资源链接和思维过程的草图将是一个巨大的帮助:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:56:09.133

你可以使用这个查询：

```
select r1.author_id as user_a, r2.author_id as user_b,
  count(r1.restaurant_id) as reviewed_together
from review r1 inner join review r2 on r1.restaurant_id = r2.restaurant_id
  and r1.author_id > r2.author_id
group by r1.author_id, r2.author_id 
```

但要小心

```
r1.author_id > r2.author_id 
```

部分，因为如果将其更改为 <> （不相等），您将获得重复的记录。

请尝试告诉我此查询是否为您提供所需的正确结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:58:13.757

其实这个答案可能不完全正确但我还不能使用评论，所以我会使用答案来回复，清除等。

我的第一个合乎逻辑的试验是下面的代码，看起来不错，但条件是。我不确定，如果您发表评论，我可以增强它。你能试试下面的代码吗，因为我没有任何数据，我无法尝试。

```
select UserA.UserID as USER_A, UserB.UserID as USER_B, count(restID) as COMMON_COMMENTS
from 
    (select distinct(userID),restID from reviews group by restID) UserA,
    (select distinct(userID),restID from reviews group by restID) UserB
where UserA.restID = UserB.restID
group by UserA.userID, userB.userID 
```

我希望您的评论将增强此查询。

# php - 在 PHP 中回显 Javascript 文件

> ID：14769303
> 
> 赞同：1
> 
> 时间：2013-02-08T09:21:53.947
> 
> 标签：php, javascript, echo

我正在尝试使用 php 在 head 标记中回显一个 .js 文件。css 文件工作正常，但 js 文件未包含在内。这是我所拥有的：

```
echo '<head>';
echo '<link rel="stylesheet" type="text/css" href="systemframe.css"/>';
echo '<script type="text/javascript" src="mainmenu.js"></script>';
echo '</head>';
echo '<form>';
echo '<body>';
...
echo '</body>';
echo '</form>'; 
```

我通过手动将它放在 index.html 文件的 head 标签中验证了 js 文件是好的。js 文件与所有其他文件位于同一文件夹中，因此没有文件目录级别。我的目标是通过php动态添加js文件到网站头部。我看到了其他类似的例子，所以我有点困惑为什么它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:30:13.227

它应该是这样的

```
echo '<head>';
echo '<link rel="stylesheet" type="test/css" href="systemframe.css"/>';
echo '<script type="text/javascript" src="mainmenu.js"></script>';
echo '</head>';

echo '<body>';
echo '<form>'; <------
...
echo '</form>';<------
echo '</body>'; 
```

你的表单标签应该在正文标签之内，而不是在外面。

检查您的控制台（开发人员工具）上是否有 JS 错误。确保 JS 正确连接。

最后一件事`type="test/css"`应该`type="text/css"`在

```
<link rel="stylesheet" type="test/css" href="systemframe.css"/>
                               ^------------------- should be text 
```

# c# - 使用带有处理程序的 jquery 加载用户控件

> ID：14769314
> 
> 赞同：1
> 
> 时间：2013-02-08T09:22:10.330
> 
> 标签：c#, jquery, asp.net, webusercontrol, dynamic-usercontrols

我想用 jquery 动态加载用户控件。首先我在根网站中创建这个 UserControl：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="UcProduct.ascx.cs" Inherits="UC_UcProduct" %>
<p> Mohsen</p> 
```

之后，我创建 .aspx 页面并编写此代码以加载 UserControl

```
<head runat="server">
    <title></title>

    <script src="Script/jquery-1.7.1.min.js"></script>
    <style>
        body {
            font-family: 'B Mitra', Tahoma, Arial;
            font-size: 20px;
            text-shadow: 4px 4px 4px #aaa;
        }
    </style>
    <script>
        $(function () {

            $("#UserCtrl").load("UcProduct.ascx");

        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <div id="UserCtrl">
            111
        </div>
    </form>
</body> 
```

此后我在 App_code 中创建类

```
namespace Eshop
{

    public class jQueryHandler : IHttpHandler
    {
        public bool IsReusable
        {
            get { throw new NotImplementedException(); }
        }

        public void ProcessRequest(HttpContext context)
        {
            using (var dummyPage = new Page())
            {
                dummyPage.Controls.Add(GetControl(context));
                context.Server.Execute(dummyPage, context.Response.Output, true);
            }
        }
        private Control GetControl(HttpContext context)
        {
            // URL path given by load(fn) method on click of button
            string strPath = context.Request.Url.LocalPath;
            UserControl userctrl = null;
            using (var dummyPage = new Page())
            {
                userctrl = dummyPage.LoadControl(strPath) as UserControl;
            }
            // Loaded user control is returned
            return userctrl;
        }
    }
} 
```

最后在 web.config 中添加此部分

```
<httpHandlers>
      <add verb="*" path="*.ascx" type="Eshop.jQueryHandler,App_Code" />
    </httpHandlers> 
```

运行 Default.aspx 页面时不加载 userControl ，当与 firebug 检查时，我收到此消息， ![在此处输入图像描述](../Images/15869691e35ea45fdebd4b6262ae1457.png) 请帮助我。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:53:17.383

我猜这是文件扩展名的问题。不允许服务器提供 ascx 文件。

您可以尝试：

```
<httpHandlers>
   <remove verb="*" path="*.ascx"/>
  <add verb="*" path="*.ascx" type="Eshop.jQueryHandler,App_Code" />
</httpHandlers> 
```

或者

声明处理程序`path="*.myascx"`，然后在处理程序中加载相应`.ascx`的（这会改变你的 ajax 调用 url）

# sorting - 合并排序：对包含混合元素的列表进行排序

> ID：14769319
> 
> 赞同：0
> 
> 时间：2013-02-08T09:22:42.713
> 
> 标签：sorting, merge, scheme, mixed

我正在Scheme中编写合并排序。我有一个合并排序定义、一个拆分列表的拆分器和一个合并列表的合并。

```
(define mymergesort
  (lambda (alist)
    (if (null? (cdr alist)) alist
        (let ((splits (splitter alist)))
          (merge (mymergesort (car splits)) (mymergesort (cadr splits)))))))

(define splitter
  (λ (alist) (splitter-helper alist () ())))

(define splitter-helper
  (λ (alist list_a list_b)
    (cond ((null? alist) (cons (reverse list_a) (cons list_b ())))
          ((null? (cdr alist)) (cons (reverse (cons (car alist) list_a)) (cons list_b ())))
           (else (splitter-helper (reverse (cdr (reverse (cdr alist)))) (cons (car alist) list_a) (cons (car (reverse (cdr alist))) list_b))))))

(define merge
  (λ (list_a list_b)
    (cond ((null? list_a) list_b)
          ((null? list_b) list_a)
          ((<= (car list_a) (car list_b)) (cons (car list_a) (merge (cdr list_a) list_b)))
          ((<= (car list_b) (car list_a)) (cons (car list_b) (merge list_a (cdr list_b))))))) 
```

这个实现似乎可以很好地对数字列表进行排序。但我希望能够对混合元素列表进行排序。

例如：'（我可以“去”4“大约”123苏打水k？）

有什么建议/解决方案吗？我还试图避免使用大多数过程，例如围绕递归解决方案“欺骗”的长度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:13:28.277

您需要一个对这些项目进行排名的“启发式”。例如，“go”是否在“about”之前？4个呢？因此，您可以编写一个函数来确定要排序的一个元素是否是另一个元素的 '<='。还，

`(<= (car list_a) (car list_b))`然后`(<= (car list_b) (car list_a))`有点多余。如果 a 不是 <= b，那么我们知道 a > b。

# jquery - 从计算中删除 NaN

> ID：14769320
> 
> 赞同：-1
> 
> 时间：2013-02-08T09:22:43.677
> 
> 标签：jquery

```
$('.field-name-field-weight-1 input').change(function(){
    var wt1 = $(this).val();
    var the = $(this).parent().parent().parent().parent();
    var wt2 = the.find('.field-name-field-weight-2 input').val();
    var total = parseFloat(wt1) - parseFloat(wt2);
    var result = the.find('.field-name-field-weight-3 input').val(total.toFixed(2));
});

$('.field-name-field-weight-2 input').change(function(){
    var wt2 = $(this).val();
    var the = $(this).parent().parent().parent().parent();
    var wt1 = the.find('.field-name-field-weight-1 input').val();
    var total = parseFloat(wt1) - parseFloat(wt2);
    var result = the.find('.field-name-field-weight-3 input').val(total.toFixed(2));
});
}
};
})(jQuery); 
```

我有这段代码。我想摆脱`NaN`. 基本上，当我在 weight-1 字段中输入一个数字时，它会显示`NaN`在`weight-3`字段中。我想摆脱这个。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:25:30.337

只需测试`NaN`：

```
if (!isNaN(total)) {
    // Put it in the field...
} 
```

`NaN`更好的是，在计算的早期捕获结果（就在`parseFloat`执行`wt1`and之后`wt2`），并向用户指出相关的无效字段值。

* * *

回复您的评论：

> 如果我把上面的内容放在结果字段中，我什么也看不到

如果您总是想更新结果，即使您有无效的输入，只需使用 an`else`并填写您希望输入无效时的结果。或者您可以使用三元运算符：

```
var result = the.find('.field-name-field-weight-3 input').val(
    isNaN(total) ? '' : total.toFixed(2)
); 
```

当输入无效时，这会将结果字段设置为空白。但同样，我会发现哪个输入无效并让用户知道。

# opencv - OpenCV 码本方法 - 背景模型

> ID：14769325
> 
> 赞同：0
> 
> 时间：2013-02-08T09:22:54.560
> 
> 标签：opencv, background, subtraction

我正在使用 OpenCV 库已集成到项目中的 CodeBook 方法。到目前为止，我已经设法让它在我的网络摄像头上工作，但似乎存在一些问题。由于整个区域（有时是整个图像）被标记为前景，因此相机的亮度自动调整会破坏整个最终结果。

我真的很想知道我是否可以访问算法生成的背景模型，以便进行一些基本的阴影检测，从而消除亮度变化。作为最终结果，我希望将前景图像分类为：a）异物 b）仅改变亮度的区域。

PS：我正在使用 OpenCV 2.1 和 Dev C++ 4.9.9.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:39:58.813

BackgroundSubtractorMOG2 和所有其他背景减法器都有一个返回背景图像的[函数](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html?highlight=background#backgroundsubtractormog2-getbackgroundimage)。不过，最好关闭相机的白平衡和自动对焦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T06:40:36.357

据我所知，没有背景模型不能去除阴影。为此，您可能需要使用需要机器学习的场景检测等方法。或者，您可以尝试一些使用超像素匹配来去除阴影的方法。

顺便说一句，CodeBook 模型是一种古老而缓慢的方法，我所知道的最好的背景模型之一是 ViBe，它已获得专利，但如果你将它用于学术目的，你可以从发明者那里获得 SDK，这是我的视频实现。当它应用于流量检测时，这里有另一个视频 [https://www.youtube.com/watch?v=uzY76q0mrh4](https://www.youtube.com/watch?v=uzY76q0mrh4)

如果您阅读他们发表的论文，您可以实现自己的版本。希望这可以帮助！

# python - 如何在python中更改环境变量？

> ID：14769326
> 
> 赞同：4
> 
> 时间：2013-02-08T09:23:04.437
> 
> 标签：python, cx-oracle

我有一个简单的 python 脚本（ test.py ）：

```
import cx_Oracle
from cx_Oracle
tns = cx_Oracle.makedsn('10.10.1.3', 1521, 'etst')
db = cx_Oracle.connect('test', 'test', tns) 
```

如果我使用环境设置运行脚本，它是有效的：

```
export LD_LIBRARY_PATH=/usr/lib/oracle/11.2/client64/lib
./test.py 
```

我可以在 python 脚本中设置环境变量吗？

```
os.environ['LD_LIBRARY_PATH'] = "/usr/lib/oracle/11.2/client64/lib"
os.putenv('LD_LIBRARY_PATH', "/usr/lib/oracle/11.2/client64/lib/") 
```

不行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T09:27:18.820

您可以这样设置它们，**但是** `$LD_LIBRARY_PATH`由之前已经运行的加载程序读取，因此您*必须*事先在外部设置它。

# gwt - 带边框的普通 GWT 屏幕的开发

> ID：14769334
> 
> 赞同：0
> 
> 时间：2013-02-08T09:23:36.163
> 
> 标签：gwt, uibinder, gwt2

![开发这样的屏幕](../Images/31d9ef39de46d945702a5c4daa1b1a80.png)

我想只使用 GWT 开发一个**如图所示的屏幕**，我正在使用 smartGwt，我对 gwt 非常陌生，你能告诉我如何

> 获得边界

和

> 虚线

? 这是一个紧迫的要求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:33:12.823

你可以试试 GWT 的 DecoratorPanel 面板[http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwDecoratorPanel](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwDecoratorPanel)

您应该查看 GWT 的展示 - [http://gwt.googleusercontent.com/samples/Showcase/](http://gwt.googleusercontent.com/samples/Showcase/)

您可能最常通过示例代码找到您正在寻找的小部件。

您可以在此处找到 GWT 示例代码 - [http://code.google.com/p/google-web-toolkit/source/browse/#svn%2Ftrunk%2Fsamples](http://code.google.com/p/google-web-toolkit/source/browse/#svn%2Ftrunk%2Fsamples)

您可以从这里提取“样本” - [http://code.google.com/p/google-web-toolkit/downloads/detail?name=gwt-2.5.0.zip](http://code.google.com/p/google-web-toolkit/downloads/detail?name=gwt-2.5.0.zip)

# android - Android菜单在语言环境中消失，我做错了什么？

> ID：14769338
> 
> 赞同：0
> 
> 时间：2013-02-08T09:23:45.340
> 
> 标签：android, locale

我有一个工作应用程序，我想将其翻译成另一种语言。

我在 res 文件夹中创建了多个文件夹：

```
values-en 
```

和

```
values-hu 
```

例如。但是如果我使用默认值以外的

```
values 
```

文件夹，应用程序的菜单（操作栏）消失。如果我使用默认值文件夹，一切都很好。

如果需要，可以提供额外的结构/代码。

# r - 检查相等性

> ID：14769346
> 
> 赞同：-1
> 
> 时间：2013-02-08T09:24:03.203
> 
> 标签：r, subset

我想检查数据集的相等性。数据集看起来像这样

```
Equips <- c(1,1,1,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,5,6,7,8)
Notifs <- c(10,10,20,55,63,67,71,73,73,73,81,81,83,32,32,32,32,
47,48,45,45,45,51,51,55,56,69,65,88)
Comps <- c("Motor","Ventil","Motor","Gehäuse","Ventil","Motor","Steuerung","Motor",
"Ventil","Gehäuse","Gehäuse","Ventil","Motor","Schraube","Motor","Festplatte",
"Heizgerät","Motor","Schraube","Schraube","Lichtmaschine","Bremse","Lichtmaschine",
"Schraube","Lichtmaschine","Lichtmaschine","Motor","Ventil","Schraube")
rank <- c(1,1,2,1,2,3,1,2,2,2,3,3,4,1,1,1,1,2,3,1,1,1,2,2,3,4,1,1,1)

df <- data.frame(Equips,Notifs,Comps,rank) 
```

数据帧应逐行读取。

我的问题如下：我有一个非常大的数据集，我想看看一个装备中的 Comps 是否在所有等级中都相同。

指定：装备 1 有等级 1 和等级 2 我想比较是否有列在等级 1 和等级 2 中的组件（在本例中：是）

装备 2 有 3 个等级，这里也没有列在第一、第二和第三等级的组合。

装备 5 有 4 个等级，是的，这是每个等级的 Comps：即“Lichtmaschine”。

那么我想要的输出是什么？如果我得到一个输出，带有装备的数量，以及 TRUE 或 FALSE（如摘要命令），这就足够了

如果每个等级（在一个装备内）都列出了一个 Comps，则应该输出 TRUE

还有一些注意事项：数据集非常大，所以我需要一个自动化版本，如果可能的话，只需使用没有任何包的标准 R 程序。

非常感谢您的努力。

查理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:36:01.837

这是一个使用`plyr`包的答案：

```
library(plyr)
ddply(df, .(Equips), function(d) {
  nb.comps <- length(unique(d$rank))
  tab <- table(d$rank, d$Comps) > 0
  tab <- margin.table(tab, 2)
  return(sum(tab>=nb.comps)>0)
}) 
```

这使 ：

```
 Equips    V1
1      1  TRUE
2      2 FALSE
3      3 FALSE
4      4 FALSE
5      5  TRUE 
```

如果实在不想用`plyr`，可以使用`by`函数：

```
by(df, df$Equips, function(d) {
  nb.comps <- length(unique(d$rank))
  tab <- table(d$rank, d$Comps) > 0
  tab <- margin.table(tab, 2)
  return(sum(tab>=nb.comps)>0)
})

df$Equips: 1
[1] TRUE
-------------------------------------------------------- 
df$Equips: 2
[1] FALSE
-------------------------------------------------------- 
df$Equips: 3
[1] FALSE
-------------------------------------------------------- 
df$Equips: 4
[1] FALSE
-------------------------------------------------------- 
df$Equips: 5
[1] TRUE 
```

如果要总结结果，可以执行以下操作：

```
result <- by(df, df$Equips, function(d) {
  nb.comps <- length(unique(d$Comps))
  tab <- table(d$rank, d$Comps) > 0
  tab <- margin.table(tab, 2)
  return(sum(tab>=nb.comps)>0)
})

data.frame(nb.equips=dim(result), nb.matched=sum(result)) 
```

这使 ：

```
 nb.equips nb.matched
1         5          2 
```

# javascript - 两个div同步滚动

> ID：14769350
> 
> 赞同：6
> 
> 时间：2013-02-08T09:24:15.610
> 
> 标签：javascript, jquery, scroll

我有一个 3 列布局，带有标题、左侧边栏、内容区域和右侧边栏。

左侧边栏在到达视口顶部时获得“固定”位置，因此它始终在视图中并且有溢出，因此可以通过滚动看到其中的任何内容。它总是有一个 preventdefault 功能，可以在鼠标悬停时停止主要内容区域和右侧边栏的滚动，因此页面的 3 个区域可以清楚地显示它们自己的元素。

页面大部分是流体宽度，因此中心内容区域可能比右侧边栏长或短，具体取决于其中包含的内容。

这是一些代码和一个 jsfiddle 来帮助您进行可视化。 [http://jsfiddle.net/9atDa/](http://jsfiddle.net/9atDa/)

我想做的是让右侧边栏滚动得比中心 div 更快或更慢，具体取决于它们的相对高度，因此右侧边栏永远不会在视口顶部消失。

效果可以看这里：[http ://readwrite.com/2013/02/06/blackberry-killing-it-in-canada-uk-with-launch-of-blackberry-10](http://readwrite.com/2013/02/06/blackberry-killing-it-in-canada-uk-with-launch-of-blackberry-10)

我猜某种jquery可以处理这个？

```
<html>
    <head>
        <title>Layout Test</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
        <script src="https://github.com/brandonaaron/jquery-mousewheel/raw/master/jquery.mousewheel.js"></script>
        <script>
            $(function() {
                var toolbox = $('.left'),
                        height = toolbox.height(),
                        scrollHeight = toolbox.get(0).scrollHeight;

                toolbox.bind('mousewheel', function(e, d) {
                    if ((this.scrollTop === (scrollHeight - height) && d < 0) ||
                            (this.scrollTop === 0 && d > 0)) {
                        e.preventDefault();
                    }
                });
            });
            $(function() { // document ready
                if (!!$('.sticky').offset()) { // make sure ".sticky" element exists
                    var stickyTop = $('.sticky').offset().top; // returns number
                    $(window).scroll(function() { // scroll event
                        var windowTop = $(window).scrollTop(); // returns number
                        if (stickyTop < windowTop) {
                            $('.sticky').css({position: 'fixed', top: 0});
                        }
                        else {
                            $('.sticky').css('position', 'static');
                        }
                    });
                }
            });
        </script>

        <style type="text/css">
            html {
                height: 100%;
            }

            body {
                margin: 0;
                padding: 0;
                height: 100%;
            }

            .header {
                height: 150px;
                background-color: aqua;
            }

            .main-content {
                position: relative;
                margin-left: 240px;
            }

            .left {
                width: 220px;
                height: 100%;
                padding-left: 10px;
                padding-right: 10px;
                background-color: red;
                position: absolute;
                top:150px;
                -webkit-transition-duration: .2s;
                -moz-transition-duration: .2s;
                -o-transition-duration: .2s;
                transition-duration: .2s;
                overflow: auto;
                float: left;
            }

            .left-inner {
                position: relative;
                height: auto;
                padding-bottom: 200px;
                background-color: green;
                -webkit-transition-duration: .2s;
                -moz-transition-duration: .2s;
                -o-transition-duration: .2s;
                transition-duration: .2s;
            }

            .center {
                background-color: blue;
                height: auto;
                min-height: 100%;
                margin-right: 300px;
                float: left;
            }

            .sidebar {
                width: 300px;
                height:auto;
                position: absolute;
                right:0;
                background-color: green;
                float: left;
                overflow: auto;
            }

            .clearfix {
                clear: both;
            }

            @media screen and (max-width:1150px) {

            }
        </style>
    </head>
    <body>
        <div class="header"></div>
        <div class="left sticky">
            <div class="left-inner">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum

    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum

                                                            THE END
            </div>                                      
        </div>

        <div class="main-content">
            <div class="center">

            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

            </div>
            <div class="sidebar">
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum

THE END
            </div>

            <div class="clearfix"></div>    
        </div> <!-- end div main-content -->

        <div class="footer"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T11:00:14.910

试试这个

```
$('#bottom').on('scroll', function () {
            $('#top').scrollTop($(this).scrollLeft());
        }); 
```

在哪里

```
<div id="top" style="overflow:auto">
</div>

<div id="bottom" style="overflow:auto">
</div> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T10:08:09.703

尝试使用 jQuery 插件 variscroll.min.js。请参阅此处的一些[文档](https://gist.github.com/vancura/3641814)。

您提供的示例链接使用相同的库。

# c# - 继承表单，没有 .Designer.cs

> ID：14769351
> 
> 赞同：3
> 
> 时间：2013-02-08T09:24:20.107
> 
> 标签：c#, .net, winforms, visual-studio-2010

当我继承`Form`或自定义表单时，我并不总是得到`a.Designer.cs`文件。如果我然后查看表单并双击它，则该`InitializeComponent()`方法最终会出现在我的派生类中。我将如何强制`Designer.cs`创建文件，什么可能导致它不创建？

我看到它不会发生在我的所有表格上，但不确定是什么原因造成的......？

编辑：

1.  通过右键单击解决方案 > 添加 > 新项目 > Windows 窗体应用程序创建新项目
2.  右键单击项目>添加>类>“FormA.cs”
3.  编辑类：“public class FormA：Form”=>仍然只是被视为一个类
4.  add 方法：public FormA(){} => 解决方案资源管理器显示一个表单图标，但没有子文件
5.  右键单击>查看设计器=>显示表单
6.  双击form => 生成FormA_Load方法，FormA.cs中的InitializeComponent方法，生成FormA.resx文件。但没有 Designer.cs。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:03:27.810

> 右键单击项目>添加>类>“FormA.cs”

那就是问题所在。设计器不添加`.Designer.cs`文件。设计器使用已经可用的文件。

如果您创建一个新表单，默认情况下它将有一个`.Designer.cs`文件。然后您可以更改基类，它将保留该`.Designer.cs`文件。

如果您创建一个新类，它将没有`.Designer.cs`文件。设计师不会为你创造一个；它实际上并不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:34:27.880

这里真正发生的是，当您向 VS 项目添加类或表单时，它是从模板开始创建的。事实上，如果您选择 Add New Item 而不是 Add Class 或 Add Form，您可以在所有已安装模板的列表中看到 Class 和 Form（包括标准模板和您可以自己构建的模板）。

模板只是一个项目，其中一些名称被参数化（例如类名和类的命名空间）。在 Form 的情况下，模板由两个不同的文件组成，而类 1 只包含一个文件。有 Designer 文件这一事实不会改变您的类的功能，它只是一种将生成的东西挡在您面前的方式，这样您就不太容易修改它。

您在设计器中查看表单的事实并不取决于设计器文件的存在，而是取决于 Visual Studio，当您双击您的项目时会查找您的类的 DesignerAttribute（从 Form 继承） ，并决定如何打开它。

试着快速查看一下结果：

```
typeof(Form).GetCustomAttributes(typeof(DesignerAttribute), false); 
```

# ios - 从笔尖加载的 Tableview headerview

> ID：14769352
> 
> 赞同：1
> 
> 时间：2013-02-08T09:24:24.793
> 
> 标签：ios, uitableview, nstableheaderview

我有一个 tableview 控制器，我试图在 viewdidload 中为它的 headerview 加载一个 nib。代码如下：

```
(void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationItem.rightBarButtonItem = self.editButtonItem;

    // Create and set the table header view.
    if (tableHeaderView == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"RZWordDetailHeaderView" owner:self options:nil];
        [tableHeaderView setContentMode:UIViewContentModeScaleAspectFill];

        self.tableView.tableHeaderView = tableHeaderView;
        self.tableView.allowsSelectionDuringEditing = YES;
    }
} 
```

当我运行程序时，屏幕变成了[这个图像](http://photo.weibo.com/2338062251/wbphotos/large/photo_id/3543482054384239?refer=weibofeedv5)。

似乎笔尖的某些部分位于导航栏后面，笔尖视图上的所有其他按钮都向下移动。

有谁知道如何解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-11T04:38:52.357

在`tableHeaderView`检查`nil`.

尝试：

```
tableHeaderView = [[[NSBundle mainBundle] loadNibNamed:@"RZWordDetailHeaderView"
                                                 owner:self
                                               options:nil] objectAtIndex:0]; 
```

# mongodb - 在 MongoDB 中如何在数组中搜索序列和复杂搜索

> ID：14769355
> 
> 赞同：1
> 
> 时间：2013-02-08T09:24:37.347
> 
> 标签：mongodb, nosql

我希望能够按子序列在我的文档中搜索。

例如

```
{
  "name": "doc1",
  "sequence": ["a", "b", "d", "g", "k"]
}
{
  "name": "doc2",
  "sequence": ["c", "a", "b", "m", "d"]
} 
```

我想按顺序匹配多个项目。查询示例：

1.  返回具有序列 ["a","b"] 的所有文档。（返回 doc1 和 doc2）
2.  返回所有具有“a”且在 3 个位置之后为“d”的文档（返回 doc2）
3.  返回所有具有序列 ["b","d","(whatever)", "k"] 的文档（返回 doc1）

我不确定我可以用 MongoDB 做到这一点。另一种解决方案是将序列保存为字符串而不是数组并使用正则表达式（但我不太喜欢这种解决方案）。

如果我不能在 MongoDB 中做到这一点，是否有另一个 noSql 引擎或任何支持这个的引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:58:50.220

正如另一个答案所说，在 MongoDB 中无法按订单 atm 进行搜索。

物化路径非常适合寻找序列：http: [//docs.mongodb.org/manual/tutorial/model-tree-structures/#model-tree-structures-with-materialized-paths](http://docs.mongodb.org/manual/tutorial/model-tree-structures/#model-tree-structures-with-materialized-paths)并且可以在这里工作。

因此，您将拥有第二个字段，其中包含您的序列字段的“路径”：

```
{
  "name": "doc2",
  "seq_path": "c,a,b,m,d",
  "sequence": ["c", "a", "b", "m", "d"]
} 
```

您可以只使用预先固定的正则表达式（可以使用索引）来搜索：

```
db.col.find({seq_path:/^c,a,b,m,d$/}) 
```

或者查找文档以该序列开头的位置：

```
db.col.find({seq_path:/^c,a,b/}) 
```

这可能是一种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:08:31.617

[我认为这在mongodb](/questions/tagged/mongodb "显示标记为“mongodb”的问题")是不可能的。

首先，[获取特定元素](https://stackoverflow.com/questions/5562485/get-particular-element-from-mongodb-array)并不容易，但是您可以使用[$elementMatch](http://docs.mongodb.org/manual/reference/projection/elemMatch/)，但据我所知，没有办法获取邻居的值。

我建议使用字符串。[我用一个简短的perl](/questions/tagged/perl "显示标记为“perl”的问题")示例进行了尝试，效果很好。

```
#!/usr/local/bin/perl

use strict;
use warnings;
use MongoDB;
use Data::Dumper;

my $client     = MongoDB::Connection->new(host => 'localhost', port => 27017);
my $database   = $client->get_database('oho');
my $documents = $database->get_collection('documents');

$documents->remove();

my $doc1 = {  "name"     => "doc1",
              "sequence" => ["abdgk"]
           };

my $doc2 = {
             "name"      => "doc2",
             "sequence"  => ["cabmd"]
           };

$documents->insert($doc1);
$documents->insert($doc2);

my @case1 = $documents->find( { "sequence" => qr/ab/i } )->all();
print "case 1:" . Dumper \@case1;

my @case2 = $documents->find( { "sequence" => qr/a..d/i } )->all();
print "case 2:" . Dumper \@case2;

my @case3 = $documents->find( { "sequence" => qr/bd.*k/i } )->all();
print "case 3:" . Dumper \@case3; 
```

# html - Z-index 不适用于嵌入代码插件

> ID：14769356
> 
> 赞同：3
> 
> 时间：2013-02-08T09:24:39.340
> 
> 标签：html, safari, z-index, always-on-top, html-object

我使用 Chrome 和 Safari 浏览器观看直播。

```
<div style="position:relative; z-index:0;">
<object>
    <param name="wmode" value="opaque"></param>
    <embed id="SIPCtrl" type="application/xxxxx-plugin"  wmode="opaque"></embed>
</object>
</div> 
```

我也尝试设置为：

```
<div style="position:relative; z-index:0;">
<object>
    <param name="wmode" value="transparent"></param>
    <embed type="application/xxxxx-plugin" wmode="transparent"></embed>
</object>
</div> 
```

我有另一个 div 来显示弹出消息。我已经设置了 Z-index:1000 但它仍然没有显示在直播视频上方（嵌入插件）。这两个html都不能工作。

HTML 代码：http: [//jsfiddle.net/8C2py/3/](http://jsfiddle.net/8C2py/3/)

截屏： ![在此处输入图像描述](../Images/b508b15356b2344e526f2393fca339fe.png)

[结果]：现在在 Chrome 中工作（添加 iframe），但在 Safari 浏览器中没有运气。

谁能告诉我我的错误？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:56:55.953

添加`wmode="opaque"`到 `object / embed` 标签参数，看看它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:24:23.273

很难看不到整个代码....试试这个
`<div style="position:relative; z-index:0;">`

在您的容器 div 上。注意：如果您在容器闪存上将 z-index 设置为负数，则不会显示。看起来您没有使用闪光灯，但无论如何我都会避免使用它，以防万一。

# iphone - 如何使用 iPhone 中的消息访问配置文件在蓝牙设备（如智能手表）上使用 SMS 和 iMessage 通知？

> ID：14769357
> 
> 赞同：5
> 
> 时间：2013-02-08T09:24:41.070
> 
> 标签：iphone, ios, bluetooth, sony-smartwatch

当使用消息访问配置文件有 SMS 或 iMessage 时，如何在蓝牙设备（如智能手表）上获得通知。这些东西已经在 pebble 等智能手表中实现。我想知道如何使用 ios sdk 实现这一点。

我在 iPhone 中使用 MAP 发布了关于 SMS、iMessage 通知的几个问题。这里是这些问题的链接

[如何在 iPhone 中使用消息访问配置文件 (MAP)](https://stackoverflow.com/questions/14579283/how-to-use-message-access-profile-map-in-iphone)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T09:36:07.093

你不需要做任何事情来获得 MAP 支持——它与推送通知系统相关联。任何通知都将通过 MAP 发送到实现它的任何配对蓝牙设备。（我认为如果他们有 MAP 配对设备，用户可以在通知设置中设置哪些应用程序发送 MAP。）

根据 Pebble 团队的说法，目前显然存在一些错误——有时你必须关闭每个应用程序的通知开关，然后再打开，然后才能开始推送它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T08:50:22.997

您可以使用 CoreTelephony 框架。但您必须使用一些私有 api。我有一些演示代码。[https://github.com/edison0951/AppNotifyBySMSDemo](https://github.com/edison0951/AppNotifyBySMSDemo)。最后的解决方案是MAP。

# syntax-highlighting - Geany 中的自定义语法高亮显示

> ID：14769358
> 
> 赞同：11
> 
> 时间：2013-02-08T09:24:42.030
> 
> 标签：syntax-highlighting, geany, kivy

我正在尝试在 Geany 编辑器中为 Kivy '.kv' 文件创建自定义语法突出显示。尽管特定的文件类型似乎与我遇到的问题无关，但因为我为使语法突出显示适用于自定义文件类型所做的任何努力都会导致完全未突出显示的文件。我相信我已经在这方面做了功课，但似乎没有任何效果。

我已将以下内容添加到 ~/.config/geany/filetype_extensions.conf

```
Kivy=*.kv; 
```

我在 ~/.config/geany/filedefs/ 中还有一个名为“filetypes.Kivy.conf”的自定义类型定义文件。我尝试将此文件基于 /usr/share/geany/ 中的几个库存类型定义文件，并且该文件从未在 Geany 中应用任何语法突出显示。现在，只是为了实验，我的 'filetypes.Kivy.conf' 文件如下所示：

```
# For complete documentation of this file, please see Geany's main documentation
[settings]
# default extension used when saving files
extension=kv

# single comments, like # in this file
comment_single=#

[keywords]
# all items must be in one line
primary=size canvas
secondary=pos size

[indentation]
width=4
# 0 is spaces, 1 is tabs, 2 is tab & spaces
type=0 
```

这非常松散地基于股票 XML 定义文件，但就像我说的那样，我已经尝试了许多其他股票文件。在许多情况下，我只将 'extension=' 值更改为 kv 并且仍然没有应用突出显示，*即使在 Geany 中转到 Document>Set Filetype 并选择几乎任何随机文件类型（除了我的自定义条目）都会在其中产生某种突出显示我的 .kv 文件。*甚至在使用未修改的股票定义内容时也是如此，否则当在 Geany 中特别选择时，它在我的 .kv 文件上工作正常！

*此外，Kivy 文件类型在 Geany 内的 Document>Set Filetype 中默认列出和选择*，所以我必须在这里做点什么！

我意识到有人问过这个类似的问题，但解决方案似乎与我的情况无关，因为我已经尝试了这个网站和许多其他网站上的所有相关主题。**我的 Geany 版本是 1.22**，我正在运行 Arch Linux。这让我发疯 - 有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T13:55:42.680

Set `lexer_filetype=` property in the `[settings]` section of your filetype file. Working highlighting requires that there is a lexer that could be used for highlighting the .kv-files.

For more info see [http://www.geany.org/manual/#lexer-filetype](http://www.geany.org/manual/#lexer-filetype)

# python - Python 中的电子邮件收集器：如何提高性能？

> ID：14769359
> 
> 赞同：-6
> 
> 时间：2013-02-08T09:24:44.700
> 
> 标签：python, performance, email, python-multithreading

我找到了一个名为“Best Email Extractor”的程序[http://www.emailextractor.net/](http://www.emailextractor.net/)。该网站说它是用 Python 编写的。我试图写一个类似的程序。上述程序每分钟提取大约 300 - 1000 封电子邮件。我的程序每小时提取大约 30-100 封电子邮件。有人可以给我一些关于如何提高我的程序性能的提示吗？我写了以下内容：

```
import sqlite3 as sql
import urllib2
import re
import lxml.html as lxml
import time
import threading

def getUrls(start):

    urls = []
    try:
        dom = lxml.parse(start).getroot()
        dom.make_links_absolute()

        for url in dom.iterlinks():
            if not '.jpg' in url[2]:
                if not '.JPG' in url[2]:
                    if not '.ico' in url[2]:
                        if not '.png' in url[2]:
                            if not '.jpeg' in url[2]:
                                if not '.gif' in url[2]:
                                    if not 'youtube.com' in url[2]:
                                        urls.append(url[2])
    except:
        pass

    return urls

def getURLContent(urlAdresse):

    try:
      url = urllib2.urlopen(urlAdresse)
      text = url.read()
      url.close()
      return text
    except:
        return '<html></html>'

def harvestEmail(url):
    text = getURLContent(url)

    emails = re.findall('[\w\-][\w\-\.]+@[\w\-][\w\-\.]+[a-zA-Z]{1,4}', text)

    if emails:
        if saveEmail(emails[0]) == 1:
            print emails[0]

def saveUrl(url):

    connection = sql.connect('url.db')

    url = (url, )

    with connection:
        cursor = connection.cursor()
        cursor.execute('SELECT COUNT(*) FROM urladressen WHERE adresse = ?', url)
        data = cursor.fetchone()
        if(data[0] == 0):
            cursor.execute('INSERT INTO urladressen VALUES(NULL, ?)', url)
            return 1
        return 0

def saveEmail(email):
    connection = sql.connect('emails.db')
    email = (email, )

    with connection:
        cursor = connection.cursor()
        cursor.execute('SELECT COUNT(*) FROM addresse WHERE email = ?', email)
        data = cursor.fetchone()
        if(data[0] == 0):
            cursor.execute('INSERT INTO addresse VALUES(NULL, ?)', email)
            return 1
    return 0

def searchrun(urls):
    for url in urls:
        if saveUrl(url) == 1:
            #time.sleep(0.6)
            harvestEmail(url)
            print url
            urls.remove(url)
            urls = urls + getUrls(url)

urls1 = getUrls('http://www.google.de/#hl=de&tbo=d&output=search&sclient=psy-ab&q=DVD')
urls2 = getUrls('http://www.google.de/#hl=de&tbo=d&output=search&sclient=psy-ab&q=Jolie')
urls3 = getUrls('http://www.finanzen.net')
urls4 = getUrls('http://www.google.de/#hl=de&tbo=d&output=search&sclient=psy-ab&q=Party')
urls5 = getUrls('http://www.google.de/#hl=de&tbo=d&output=search&sclient=psy-ab&q=Games')
urls6 = getUrls('http://www.spiegel.de')
urls7 = getUrls('http://www.kicker.de/')
urls8 = getUrls('http://www.chessbase.com')
urls9 = getUrls('http://www.nba.com')
urls10 = getUrls('http://www.nfl.com')

try:
    threads = []
    urls = (urls1, urls2, urls3, urls4, urls5, urls6, urls7, urls8, urls9, urls10)

    for urlList in urls:
        thread = threading.Thread(target=searchrun, args=(urlList, )).start()
        threads.append(thread)
    print threading.activeCount()
    for thread in threads:
        thread.join()
except RuntimeError:
    print RuntimeError 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:56:33.873

我认为没有多少人会帮助您收集电子邮件。这是一项普遍令人厌恶的活动。

关于代码中的性能瓶颈，您需要通过 profiling 找出时间的去向。在最低级别，将每个函数替换为不进行处理但返回有效输出的虚拟函数；因此电子邮件收集器可以返回相同地址的列表 100 次（或者这些 URL 结果中有很多）。这将向您显示哪个功能正在花费您的时间。

突出的事情：

1.  预先从服务器获取 URL 后面的文件；如果您每次运行脚本时都向 Google 发送垃圾邮件，他们很可能会阻止您。从磁盘读取比从 Internet 请求文件更快，并且可以单独和同时完成。
2.  数据库代码为每次调用 saveEmail 等创建一个新连接，这将花费大部分时间进行握手和身份验证。最好有一个对象来保持调用之间的连接，或者最好一次插入多条记录。
3.  一旦完成网络和数据库问题，正则表达式可能会`\b`围绕它进行，以便匹配减少回溯。
4.  str 中的一系列 if not 'foo': then if not 'blah' in str ... 是糟糕的编码。提取最后一段，并通过创建一个`set`或什`frozenset`至所有非允许值 like`ignoredExtensions = set([jpg,png,gif])`并与 like 比较来检查多个值`if not extension in ignoredExtensions`。另请注意，首先将扩展名转换为小写意味着无论是 jpg 还是 JPG，检查和工作都会减少。
5.  最后，考虑在多个命令行上运行相同的脚本而不使用线程。除了协调不同的 url 列表之外，实际上不需要在脚本中使用线程。坦率地说，在文件中只包含一组 url 列表并启动一个单独的脚本来处理每个列表会简单得多。让操作系统做多线程，它更擅长。

# scala - 播放框架 2 表单 - 无法获取错误消息以正常工作

> ID：14769360
> 
> 赞同：0
> 
> 时间：2013-02-08T09:24:45.260
> 
> 标签：scala, playframework-2.0

如果表单为空，则永远不会显示错误，只会呈现空白页:(可能有什么问题？

只想显示一个上传文件的表单并作为额外的表单输入，找不到任何关于表单数据和同时上传文件的好的文档。

```
def aboutUsImages = Action { implicit request =>
        val getall = AboutImages.findAll
        Ok(views.html.adminpages.aboutusimages(getall))
    }

  def editUsImages(id: Int) = Action { implicit req =>

    val getbyid = AboutImages.findById(id)
    val text = getbyid(0).name
    val dummyform = Form(ignored(("dummy")))
    Ok(views.html.adminpages.aboutusimgsForm(dummyform, id, text))
  }

  def upload() = Action(parse.multipartFormData) { implicit request =>
    val dump = ""
    val form = Form(tuple(
      "id" -> nonEmptyText,
      "name" -> text,
      "image" -> ignored(request.body.file("image")).
        verifying("File missing", _.isDefined)))
    form.bindFromRequest.fold(
      formWithErrors => {
        Ok(views.html.adminpages.aboutusimgsForm(formWithErrors, request.id, dump))
      },
      value => Ok
    )
  } 
```

和形式：

```
@helper.form(action = routes.AboutUsImages.upload(),'enctype -> "multipart/form-data") {
             <input type="hidden" name="id" value="@id">
            <input type="text" name="name" value="@text">
            @helper.inputFile(form("image"))

            <div class="actions">
                <input type="submit" value="Save Setting" class="btn primary"> or
                <a href="@routes.AboutUsImages.aboutUsImages()" class="btn">Cancel</a>
            </div>

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:55:29.123

例如，您可以使用表单助手以这种方式打印出您的错误：

```
@form.globalError.map { error =>
<p class="error">
    @error.message
</p>
} 
```

# ios - crt1.3.1.o到底是什么

> ID：14769366
> 
> 赞同：3
> 
> 时间：2013-02-08T09:25:00.900
> 
> 标签：ios, xcode4.5, clang

我正在使用 xcode 4.5 我的基础 SDK 是 6.0，我的部署目标是 5.1。当我尝试为发布或分析而构建时，我得到了这个错误的小宝石。

```
ld: file is universal (4 slices) but does not contain a(n) armv7s slice: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/usr/lib/crt1.3.1.o for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

现在....

我已经在 stackoverflow 上看到了这条消息，但我仍然不知道。

这个 crt1.2.1.o 到底是什么导致了所有的大惊小怪？我可以修改它以消除我的错误吗？最后有人建议我只为活动架构设置构建。这样做有什么影响？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T11:20:57.503

crt1.3.1.o 文件包含 C 运行时库的启动代码。这会初始化运行时，调用全局初始化程序，最后调用`main`函数。

您的项目设置一定有问题。您也在为 armv7s 进行编译，但是这些库是从尚不支持 armv7s 架构的 iOS 5.1 SDK 链接的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:36:03.070

我遇到了同样的问题，我从构建设置中的有效架构中删除了 armv7s，只留下了 armv7，之后我可以归档我的项目

# java - 如何使用 zk 在浏览器窗口中打开和编辑文件（doc、pdf、excel 等）？

> ID：14769368
> 
> 赞同：-1
> 
> 时间：2013-02-08T09:25:12.033
> 
> 标签：java, zk

我有一个在 ZK 框架上创建的应用程序，我想为用户提供一个功能，用户可以在编辑模式下打开保存的文件，然后再次将更改保存在数据库中，谁能知道哪个 API 可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:33:12.303

不幸的是，您提出的问题没有简单的答案。

您可以采取两种一般方法..

唾手可得的成果是为用户提供一个界面，供用户在使用他们选择/合适的任何编辑软件进行编辑后下载文件并上传文件。

另一种方法是提供一个 GUI 来编辑文件。无论您使用哪种 Web 框架，至少可以说这是一项艰巨的任务。正如@userRandom 所提到的，这是 Google Drive（以前的 Google Docs）试图解决的很大一部分问题。但即使是 Google 的解决方案也并不完美，而且还有很多工作正在进行中。

**我强烈建议在继续之前评估您的项目范围。**
如果您选择继续前进，请考虑一个适用于 .txt 文件的简单解决方案。然后，考虑如何处理 .doc 文件。然后，PDF 文件、XLS 文件等。

这里的人将能够回答具体问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:30:35.753

您可以使用**Google Apps**来执行此操作，并设置 Google Docs 来编辑您的 DOC、PDF 甚至 XLS 扩展文件。有关设置的更多帮助，请随时再次询问。:)

# php - php mysql + 创建个人资料页面

> ID：14769371
> 
> 赞同：0
> 
> 时间：2013-02-08T09:25:22.237
> 
> 标签：php, mysql

嘿，我是新来的，任何人都可以帮助我处理 php 和 mysql 中的这段代码，我知道这是一个小错误，但我不知道错误在哪里，谢谢。这是代码：

//index.php

```
<html>
<head>
<title>Search for a user</title>
</head>
<body>
<h2> Search for a user below:</h2><br /><br />
<form action="profileprocess.php" method="get">
  <table>
   <tr>
    <td>Username:</td><td><input type="text" id="username" name="username" /></td></tr>
    <tr>
    <td><input type="submit" name="submit" id="submit"  value="View Profile" /></td>
    </tr>

  </table>

</form>
</body>
</html> 
```

// profileprocess.php

```
<html>
<head>
<title><?php echo $username; ?> <?php echo $lastname; ?>s profile</title>

</head>
<body>
<?php
 if(isset($_GET['username'])){

    $username = $_GET['username']; 
    mysql_connect("localhost", "root", "") or die ("could not connect t the server");
    mysql_select_db("users") or die("this database was not found");
    $userquery = mysql_query("SELECT * FROM users WHERE username='$username'") or die("the query could be fale please try again");
    if(mysql_num_rows($userquery) != 1){
        die("that username could not be found!");
    }
    while($row = mysql_fetch_array($userquery, MYSQL_ASSOC)){
       $firstname = $row['firstname'];
       $lastname = $row['lastname'];
       $email = $row['email'];
       $dbusername = $row['username'];
       $activated = $row['activated'];
       $access = $row['access'];
       }
       if($username != $dbusername){
         die ("there has been a fatal error please try again. ");
       }
       if($activated == 0){
        $active = "this account has not been activated";
       }else{
          $active = "ths  account has been activated";
       }

       if($access == 0){
         $admin = "this user is not administrator";
       }else{
         $admin = "this user is  an administrator";
       }
?>
<h2><?php echo $username; ?> <?php echo $lastname; ?>s profile</h2>
<table>
<tr>
<td>firstname:</td><td><?php echo $firstname; ?></td>
</tr>
<tr>
<td>lastname:</td><td><?php echo $lastname; ?></td>
</tr>
<tr>
<td>email:</td><td><?php echo $email; ?></td>
</tr>
<tr>
<td>username:</td><td><?php echo $dbusername; ?></td>
</tr>
<tr>
<td>activated:</td><td><?php echo $active; ?></td>
</tr>
<tr>
<td>access:</td><td><?php echo $admin; ?></td>
</tr>

</table>

<?php      
 }else die("You need  to specify a username!");

?>

</body>
</html> 
```

//// 有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:19:40.863

我只是在我的 XAMPP 服务器上运行此代码，它似乎工作正常。

```
<html>
<head>
<title>Search for a user</title>
</head>
<body>
<h2> Search for a user below:</h2><br /><br />
<form action="" method="get">
  <table>
   <tr>
    <td>Username:</td><td><input type="text" id="username" name="username" /></td></tr>
    <tr>
    <td><input type="submit" name="submit" id="submit"  value="View Profile" /></td>
    </tr>

  </table>

</form>
</body>
</html>

<?php
 if($_GET['username'] != ''){
     echo $_GET['username'];

 } else 
 die('doesnt work'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:51:56.453

我肯定看到的一个问题是您在页面开头使用了 echo 并且查询没有运行。这会引发错误。

另外，请告诉我们错误是什么，以便我们可以尝试更好地帮助您。

# excel - 每次打开电子表格时，Excel #Name 错误都会不断弹出

> ID：14769373
> 
> 赞同：0
> 
> 时间：2013-02-08T09:25:25.543
> 
> 标签：excel, excel-formula, excel-2010

我有一个 Excel 工作簿，其中我使用数据表创建了一个分析。出于某种原因，每次我打开工作簿时，引用数据表的公式都会变成 #Name 错误。

我第一次打开它时，我以为我只是打错了，需要重新输入公式。我这样做并保存了文件。两分钟后打开它......同样的错误！

该错误仅适用于数据表中的两个引用列。同一表中的其他列引用正常，没有错误！

这是错误的示例：

`=SUMIFS(tblDB #REF!,tblDB[AWGW 2012],$B$3,tblDB[NWGW 2012],$B13)`

该文件（另存为 .xlsm）包含以下内容，但出现错误的公式均未使用或触及这些内容：

*   数据透视表
*   VBA 代码（都不是基于事件的......常规潜艇只需要手动启动）
*   其他数据表

我已经在以下系统上进行了测试：

*   Excel 2010（32 位）和 Windows XP
*   Excel 2010（64 位）和 Windows 7

有谁知道为什么会这样？

# android - 在 listview 中使用 ratingbar 的 android 必需示例

> ID：14769375
> 
> 赞同：3
> 
> 时间：2013-02-08T09:25:30.863
> 
> 标签：android

我正在学习 android 并且想要一个示例代码或一个示例，用于使用 ratingbar 来显示评级并且在列表视图中没有 onclick 事件。

我正在使用 json 从 mysql 数据库中获取数据。相同的数据转换成浮点数后必须显示在列表内的 ratingbar 中。我在 stackoverflow 上尝试了许多示例，但其中大多数似乎不完整。

谢谢你

编辑：

以下是 m 用于在列表中显示字符串值的代码

```
public class ReadReviewActivity extends ListActivity {

    // Progress Dialog
    private ProgressDialog pDialog;
    String pid;
    String ratings1;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> productsList;

    // url to get all products list
    private static String url_all_products = "http://10.0.2.2/hm_andro/get_reviews.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_PRODUCTS = "products";
    private static final String TAG_PID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_COMMENTS = "comments";
    private static final String TAG_RATINGS = "ratings";
    private static final String TAG_PIDD = "pid";
    private static final String TAG_DATE = "createddate";

    // products JSONArray
    JSONArray products = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.rev);

        // Hashmap for ListView
        productsList = new ArrayList<HashMap<String, String>>();

        // Loading products in Background Thread
        new LoadAllProducts().execute();

        Intent i = getIntent();
        pid = i.getStringExtra(TAG_PIDD);

        // Get listview
        ListView lv = getListView();

        // on seleting single product
        // launching Edit Product Screen
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        MainActivity.class);
                // sending pid to next activity

                // starting new activity and expecting some response back
                startActivityForResult(in, 100);
            }
        });

    }

    // Response from Edit Product Activity
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        // if result code 100
        if (resultCode == 100) {
            // if result code 100 is received 
            // means user edited/deleted product
            // reload this screen again
            Intent intent = getIntent();
            finish();
            startActivity(intent);
        }

    }

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllProducts extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(ReadReviewActivity.this);
            pDialog.setMessage("Loading products. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("pidd", pid));
            // getting JSON string from URL
            //params.add(new BasicNameValuePair("pid", "745"));
            JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

            // Check your log cat for JSON response
            Log.d("All Products: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    products = json.getJSONArray(TAG_PRODUCTS);

                    // looping through All Products
                    for (int i = 0; i < products.length(); i++) {
                        JSONObject c = products.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_PID);
                        String name = c.getString(TAG_NAME);
                         String comments = c.getString(TAG_COMMENTS);
                         String cdate = c.getString(TAG_DATE);
                    String rati = c.getString(TAG_RATINGS);

                    String rate1 [] = rati.split(",");
                    ratings1 = rate1[0];

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_PID, id);
                        map.put(TAG_NAME, name);
                    map.put(TAG_COMMENTS, comments);
                    map.put(TAG_DATE, cdate);
                    map.put(TAG_RATINGS,ratings1);

                        // adding HashList to ArrayList
                        productsList.add(map);

                    }
                } else {

                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            ReadReviewActivity.this, productsList,
                            R.layout.review_list, new String[] {TAG_NAME, TAG_COMMENTS, TAG_DATE},
                            new int[] {R.id.revname, R.id.revcomments, R.id.reviewdate});
                    // updating listview

                    setListAdapter(adapter);
                }
            });

        }

    }
    } 
```

xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:orientation="vertical"
    android:visibility="visible" >

    <TextView
        android:id="@+id/pid"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:visibility="gone" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="6dip"
        android:paddingTop="6dip"
        android:text="Reviewed by:"
        android:textColor="@color/blueish"
        android:textSize="15sp"
        android:visibility="visible" />

    <TextView
        android:id="@+id/revname"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="6dip"
        android:paddingTop="6dip"
        android:textColor="@color/magenta"
        android:textSize="17sp" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Overall Ratings:   "
        android:paddingLeft="6dip"
        android:textColor="@color/blueish"
        android:textSize="11sp" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/textView1"
            android:text="Service/Hospitality:   "
            android:paddingLeft="6dip"
            android:textColor="@color/blueish"
            android:textSize="11sp" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/textView2"
            android:paddingLeft="6dip"
            android:text="Clinical Treatment:   "
            android:textColor="@color/blueish"
            android:textSize="11sp" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/textView3"
            android:paddingLeft="6dip"
            android:text="Infrastructure:   "
            android:textColor="@color/blueish"
            android:textSize="11sp" />

        <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:paddingLeft="6dip"
            android:layout_below="@+id/textView4"
            android:text="Value for Money:   "
            android:textColor="@color/blueish"
            android:textSize="11sp" />

        <RatingBar
            android:id="@+id/Bar1"
            style="?android:attr/ratingBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/textView1"
            android:layout_toRightOf="@+id/textView1" />

        <RatingBar
            android:id="@+id/Bar2"
            style="?android:attr/ratingBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/textView2"
            android:layout_toRightOf="@+id/textView2" />

        <RatingBar
            android:id="@+id/Bar3"
            style="?android:attr/ratingBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/textView3"
            android:layout_toRightOf="@+id/textView3" />

        <RatingBar
            android:id="@+id/Bar4"
            style="?android:attr/ratingBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/textView4"
            android:layout_toRightOf="@+id/textView4" />

        <RatingBar
            android:id="@+id/Bar5"
            style="?android:attr/ratingBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/textView5"
            android:layout_toRightOf="@+id/textView5" />

    </RelativeLayout>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="6dip"
        android:paddingTop="6dip"
        android:text="Comments:"
        android:textColor="@color/blueish"
        android:textSize="15sp"
        android:visibility="visible" />

    <TextView
        android:id="@+id/revcomments"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="6dip"
        android:paddingTop="6dip"
        android:textColor="@color/magenta"
        android:textSize="17sp" />

    <TextView
        android:id="@+id/reviewon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Created On :"
        android:textColor="@color/blueish" />

    <TextView
        android:id="@+id/reviewdate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"
        android:textColor="@color/magenta" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:00:45.947

试试下面的代码

```
<RatingBar 
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:isIndicator="true"
    android:numStars="5"
    android:stepSize="1"
    android:rating="5"
    android:id="@+id/pop_ratingbar"
    style="?android:attr/ratingBarStyleSmall"
/>

RatingBar ratingBar = (RatingBar) findviewbyid(R.id.pop_ratingbar);
ratingBar.setRating(4.0f); 
```

仍然如果您遇到问题而不是更喜欢以下[项目](https://github.com/commonsguy/cw-android/tree/master/FancyLists/RateList)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:02:39.023

你试过这个教程吗？

我希望这个能帮上忙：

[Android 教程 7.4 ListView 与 RatingBar](http://animations.typepad.com/blog/2010/07/android-tutorial-74-listview-with-ratingbar.html)

# log4j - CassendraLog4net appenadar 的不可用异常

> ID：14769381
> 
> 赞同：0
> 
> 时间：2013-02-08T09:26:00.670
> 
> 标签：log4j, cassandra

我想开发一种使用`CassandraLog4net Appender`. 我越来越`Unavailable exception`。

你能告诉我在运行这段代码之前我是否必须创建一个键空间或数据库？

另外，我无法使用，`NODE TOOL`当我点击它时，它又消失了。

我应该做些什么改变？

请查找配置的详细信息`CassendraLog4netAppendar`。

```
 <KeyspaceName value="Logging" /><ColumnFamily value="LogEntries"/>\
 <PlacementStrategy value="org.apache.cassandra.locator.NetworkTopologyStrategy" />
 <StrategyOptions value="Datacentre1:1" /><ReplicationFactor value="1" />
 <ConsistencyLevel value="QUORUM" />
 <MaxBufferedRows value="1" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:55:44.947

UnavailableException 表示没有足够的可用副本来满足您的查询。从您的配置中，我看到您的集群配置中有很多不一致之处。您的 log4net appender 策略选项指向“Datacenter1”；您的拓扑文件列出了具有多个机架的“DC1”、“DC2”和“DC3”中的一堆机器；您的密钥空间仅设置了一个名为“DC1”的 DC；nodetool 显示在 127.0.0.1 上侦听的单个节点（与您配置的任何机器都无关）。所以你得到 UnavailableException 因为你要求的东西不存在。您需要在各个部分之间进行一致的配置。

# android - 如何在 Android 应用程序中使用 Mediacontroller？

> ID：14769384
> 
> 赞同：1
> 
> 时间：2013-02-08T09:26:13.140
> 
> 标签：android, video, media, master-detail

嗨，我尝试在 videoview 中播放视频并播放视频，但 mediacontroller 无法在下面运行我的代码。我使用了片段。

```
public class ItemDetailFragment extends Fragment {

    public static final String ARG_ITEM_ID = "item_id";

    private DummyContent.DummyItem mItem;

    public ItemDetailFragment() {
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (getArguments().containsKey(ARG_ITEM_ID)) {
            // Load the dummy content specified by the fragment
            // arguments. In a real-world scenario, use a Loader
            // to load content from a content provider.
            mItem = DummyContent.ITEM_MAP.get(getArguments().getString(
                    ARG_ITEM_ID));
            Log.v("log_tag","mItem   ::; "+ mItem);
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.fragment_item_detail,
                container, false);
        VideoView vcVideoView;
        // Show the dummy content as text in a TextView.
        if (mItem != null) {
            /*((TextView) rootView.findViewById(R.id.item_detail))
                    .setText(mItem.url);*/

            vcVideoView=((VideoView) rootView.findViewById(R.id.videoView));
        //  .setVideoPath(mItem.url);
            MediaController mc = new MediaController(this);
            //vcVideoView.setMediaController(new MediaController());
            //vcVideoView.setMediaController(mc);
            Uri uri = Uri.parse(mItem.url);
            vcVideoView.setVideoURI(uri);
            vcVideoView.setSoundEffectsEnabled(true);
            vcVideoView.requestFocus();
            vcVideoView.start();
        }

        return rootView;
    }
} 
```

错误是`The constructor MediaController(ItemDetailFragment) is undefined`！！如何解决它。请帮助我！

# php - codeigniter 从本地主机移动到服务器

> ID：14769395
> 
> 赞同：0
> 
> 时间：2013-02-08T09:27:05.323
> 
> 标签：php, codeigniter, http-status-code-404

收到 404 错误

> 404页面不存在
> 
> 未找到您所请求的页面。

配置文件

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$config['base_url'] = 'http://myhost/sitedir';

$config['index_page'] = '';

$config['uri_protocol'] = 'AUTO'; 
```

默认控制器

```
class MY extends CI_Controller{

    function __construct(){
        parent::__construct();

         // language
        if($this->input->post("lang")){
            $this->load->model("language");
            $this->language->lang($this->input->post("lang"));
        }

        // !language

        //$this->lang->load("ge");
        if (!$this->session->userdata('lang'))
            $this->lang->load("ge");
        else
        $this->lang->load($this->session->userdata('lang'));
    }

    /**
     * mtavari gverdis controleri
     */
    function index(){
        $this->load->model("dbs");
        $data['products'] = $this->dbs->get_products_by_limit("products",7);
        $this->load->view("header");
        $this->load->view("index_page",$data);
        $this->load->view("footer");
    }

} 
```

在其他目录中上传了默认的 ci 包并且它工作

我没有 .htaccess 文件

对不起，我的英语不好 ：（

帮我 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:59:46.097

没关系。我的英语也很差。

如果您不使用 .httaccess ，您网站的 URL 必须是：

```
'http://website/sitedir/index.php/my' 
```

在默认包中，您可以使用：

; 因为del defaul，`

> 配置['index_page'] = '';

，如果我没有忘记它被设置为“欢迎”。 [我的网站](http://maximilianofernandez.net)也在 codeignite 中，我在我的 incial 页面上也遇到了这个问题。

您的配置 .php 与 my.php 相同。但我使用 . httaccess，清除 index.php URL。我希望有一点帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:15:34.893

您的问题在路由或 HTACCESS 中将变量设置为空，如下所示。

```
$config['index_page'] = ''; 
```

尝试用这些参数（'AUTO'、'PATH_INFO'、'QUERY_STRING'、'REQUEST_URI'和'ORIG_PATH_INFO'）一一替换以下变量

```
$config['uri_protocol'] = 'AUTO'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T13:31:43.770

我遇到这个问题的时间最长..在我的情况下，在弄乱了配置文件、路由、htaccess 等之后......最后的问题是我的 CPANEL 服务器是通过 Linux 托管的，而 linux 是区分大小写的到文件名。我所有的控制器都有一个大写字母作为文件名的第一个字母。当我将其更改为小写时，它工作正常。也许这也是你的问题。祝你们好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T09:28:16.413

根据您的服务器地址编辑此行

```
$config['base_url'] = 'http://server_addr/sitedir';-->like this 
```

# c# - ComboBoxEdit 中 SelectedValue (Combobox) 的相关字段是什么

> ID：14769398
> 
> 赞同：0
> 
> 时间：2013-02-08T09:27:20.927
> 
> 标签：c#, winforms, combobox, devexpress

ComboboxEdit 中 Combobox.SelectedValue 的相关字段是什么当我从中选择某些内容时

```
 in Devexpress ComboboxEdit .. 

         combo.EditValue ="1​"

          combo.SelectedItem="1​"

           combo.SelectedText​="1"

                              these all gets same value ​

     In Normal Winform Combobox 

       cmb.SelectedItem="1"

       cmb.SelectedText=""

        cmb.SelectedValue=null​ 
```

我怎样才能在 Devexpress ComboxEdit 中实现这一点..​</p>

我有的例子

```
 Dictionary<string,string>  dic = new Dictionary<string,string>();

            dic.Add("Test","5");
            dic.Add("Test","6");
            dic.Add("Test","7");

       foreach(DictionaryEntry dic in dic)
         {
           Combobox.Items.add(dic);
           Comboboxedit.Properties.Items.Add(dic);
           } 
```

当我为普通的 Coombobox winfrom 设置值时

```
 Combobox.SelectedValue = dic["Test"]; 
```

我怎样才能为 Devexpress ComboboxEdit 做同样的事情，，，，，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:49:32.893

如果您需要行为类似于 winforms 标准组合框的 DevEx 控件，您应该使用[LookupEdit](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsLookUpEdittopic)控件。

从[ComboBoxEdit 文档](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsComboBoxEdittopic)：

*ComboBoxEdit 将单行文本编辑器的功能与下拉窗口相结合。
ComboBoxEdit 项目可以是任何类型。在下拉窗口和编辑框中，**项目由它们的显示文本（项目的 ToString 方法返回的字符串）表示**。 **从下拉列表中选择项目时，项目集合中的相应对象会自动分配给 SelectedItem 属性。** 此属性值与通过 EditValue 属性可用的编辑值相匹配。*

因此，在 ComboBoxEdit 中，您不能有 display 和 value 成员，它只显示项目的字符串表示形式。

**编辑**（将字典绑定到 LookupEdit）：

```
LookUpEdit lookupEdit = new LookUpEdit();
Dictionary<string,string>  dic = new Dictionary<string,string>();
dic["1"] = "jedan";
dic["2"] = "dva";
lookupEdit.Properties.ValueMember = "Key";
lookupEdit.Properties.DisplayMember = "Value";
lookupEdit.Properties.DataSource = dic.ToList();

// if you want to hide Key column
LookUpColumnInfo keyColumnInfo = new LookUpColumnInfo("Key");
keyColumnInfo.Visible = false;
lookupEdit.Properties.Columns.Add(keyColumnInfo);
lookupEdit.Properties.Columns.Add(new LookUpColumnInfo("Value"));

// set selected item
lookupEdit.EditValue = "2"; 
```

# android - 标记和选择列表视图的问题

> ID：14769399
> 
> 赞同：0
> 
> 时间：2013-02-08T09:27:28.127
> 
> 标签：android

在我的应用程序中，我有一个列表视图，现在的问题是我想获得标记的位置，我使用的代码是

```
 @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            System.out.println("Entered Delete Button");
                String selected = "";
                int cntChoice = lv.getCount();
                System.out.println("The Number Of Contacts"+cntChoice);
                SparseBooleanArray x = lv.getCheckedItemPositions();
                System.out.println(x);
                for(int i = 0; i < cntChoice; i++){
                    if(x.get(i)) {
                        selected += lv.getItemAtPosition(i).toString() + "\n";  

                    }
                }   
                Toast.makeText(ViewSelectedContacts.this, 
                        selected, 
                        Toast.LENGTH_LONG).show();
            }
        }); 
```

问题是 SparseBooleanArray 没有填充元素我还添加了

```
 android:choiceMode="multipleChoice" 
```

在列表视图中..有人请帮我解决问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:37:12.483

```
 Try this code (works for me):

// MainActivity

public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

       final ListView listTags = (ListView) findViewById(R.id.listPack);
       listTags.setAdapter(new ArrayAdapter<String>(this, R.layout.list_item, mStrings));
       listTags.setOnItemClickListener(new OnItemClickListener() {

           @Override
           public void onItemClick(AdapterView<?> parent, View view,
                   int position, long id) {
               listTags.setSelection(position);
//               Toast.makeText(getParent(), "hello", Toast.LENGTH_LONG).show();
           }
       });

    }

     private String[] mStrings = {

        "Comte", "Coolea", "Cooleney", "Coquetdale", "Corleggy", "Cornish Pepper",
        "Cotherstone", "Cotija", "Cottage Cheese", "Cottage Cheese (Australian)",
        "Cougar Gold", "Coulommiers", "Coverdale", "Crayeux de Roncq", "Cream Cheese",
        "Cream Havarti", "Crema Agria", "Crema Mexicana", "Creme Fraiche", "Crescenza",
        "Croghan", "Crottin de Chavignol", "Crottin du Chavignol", "Crowdie", "Crowley",
        "Cuajada", "Curd", "Cure Nantais", "Curworthy", "Cwmtawe Pecorino",
       };

// Main xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <ListView
        android:id="@+id/listPack"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_marginBottom="5dip"
        android:layout_marginLeft="5dip"
        android:layout_marginRight="5dip"
        android:layout_weight="1" >
    </ListView>

        </LinearLayout>

// list_item.xml // layout

<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp" >
</TextView> 
```

# selenium-webdriver - 无法使用 selenium webdriver 找到元素

> ID：14769401
> 
> 赞同：0
> 
> 时间：2013-02-08T09:27:29.007
> 
> 标签：selenium-webdriver

我正在使用 selenium webdriver 执行 1000 个测试。对于每个测试用例，我需要单击网页上的“ID”元素。

我用`WebElement x = driver.findElement(By.xpath("//*[@id='TEST']").click();`了事件。

但不幸的是，对于几个测试场景（1000 个中的 2 个或 3 个），它会抛出一个错误，说“无法找到一个元素”。对于其余的测试用例，它照常执行。

我尝试使用 Try & Catch 方法并刷新页面，但功能正常工作，但性能太慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:35:48.803

您是否尝试过使用 ExpectedConditions 类（[http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html)）应该足以添加一些等待在单击之前为 elementToBeClickable 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:36:54.533

“Try & Catch 方法和 Refresh 方法”是什么意思。Selenium 会模仿 Web 浏览器本身，因此有时会不稳定。1000 次测试需要很长时间，因此请确保您的计算机不会进入睡眠状态，并且在完成之前不要打扰它的测试过程。如果您最小化浏览器，某些测试将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T18:23:00.370

我建议可能增加你的隐式等待。就像是

```
driver.manage().timeouts().implicitlyWait(15, TimeUnit.SECONDS); 
```

# asp.net - 如何缓存将图像返回到asp.net mvc中的视图的操作方法的输出？

> ID：14769404
> 
> 赞同：11
> 
> 时间：2013-02-08T09:27:48.033
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, caching, outputcache

我已经阅读了很多关于缓存的帖子，但没有一个真正符合我的需求。在我的 mvc 3 应用程序中，我有一个返回图像类型文件的操作方法 GetImage()。然后我在视图中使用这个方法来显示图像：

```
<img width="75" height="75" src="@Url.Action("GetImage", "Store", new {productId = item.ProductId})"/> 
```

我想在服务器上缓存图像。所以，我已经尝试过：

1）使用OutputCacheAttribute：

```
 [HttpGet, OutputCache(Duration = 10, VaryByParam = "productId", Location = OutputCacheLocation.Server, NoStore = true)]
    public FileContentResult GetImage(int productId)
    {
        var p = _productRepository.GetProduct(productId);
        if (p != null)
        {
            if (System.IO.File.Exists(GetFullProductImagePath(productId)))
            {
                var image = Image.FromFile(GetFullProductImagePath(productId));
                return File(GetFileContents(image), "image/jpeg");
            }
        }
        var defaultPath = AppDomain.CurrentDomain.BaseDirectory +
                             ConfigurationManager.AppSettings["default-images-directory"];

        var defaultImage = Image.FromFile(Path.Combine(defaultPath, "DefaultProductImage.jpg"));
        return File(GetFileContents(defaultImage), "image/jpeg");
    } 
```

图像未缓存（我得到状态：200 OK）

2) 在 GetImage() 方法中使用以下 Response.Cache 方法：

```
 public FileContentResult GetImage(int productId)
    {
        Response.Cache.SetCacheability(HttpCacheability.Public);
        Response.Cache.SetMaxAge(new TimeSpan(0, 0, 0, 10));
        Response.Cache.SetExpires(DateTime.Now.Add(new TimeSpan(0, 0, 0, 10)));
        Response.Cache.AppendCacheExtension("must-revalidate, proxy-revalidate");        
        // other code is the same
    } 
```

图像未缓存

3) 在这里我得到：304 Not Modified，但 GetImage() 方法不返回任何内容（空图像）

```
 public FileContentResult GetImage(int productId)
    {
        Response.StatusCode = 304;
        Response.StatusDescription = "Not Modified";
        Response.AddHeader("Content-Length", "0");     
        // other code is the same
    } 
```

问题：如何在服务器上缓存此操作方法的输出？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T09:58:18.610

试试这样：

```
[HttpGet]
[OutputCache(
    Duration = 10, 
    VaryByParam = "productId", 
    Location = OutputCacheLocation.ServerAndClient)]
public ActionResult GetImage(string productId)
{
    ...
} 
```

注意事项：使用`OutputCacheLocation.ServerAndClient`和摆脱`NoStore = true`.

# image - 遍历像素

> ID：14769405
> 
> 赞同：-2
> 
> 时间：2013-02-08T09:27:49.130
> 
> 标签：image, matlab, set, pixel, belongs-to

假设我们有一个算法的以下部分，前提是我想在其中实现它`matlab`：

```
k = 0;
while k<n 
among all pixels that "belong to" a set, select that pixel
k = k+1; 
```

我该如何实施？

*   确定一个像素是否“属于”一个图像或一组图像

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:55:43.647

通常，在 Matlab 中，图像（灰色/彩色）表示为 2D/3D 矩阵

例如，

```
I = imread("lena.jpg"); 
```

所以，I 的大小是`m x n`灰色和`m x n x 3`彩色

现在，如果您想选择一个“属于”图像子集 (rectangle) 的像素`(xi yi) (w h)`。
原点，即图像的 (1,1) 像素是左上角。

```
Isub = I(xi:xi+w-1, yi:yf+h-1); 
```

此外，您可以使用`pixel = I(i,j);` `ith`顶部`jth`像素和左侧像素访问像素

如果“属于”是像所有红色或其他像素一样复杂的东西，则方法/复杂性会有所不同

# c# - 有没有办法让项目中的每个类都实现一个接口（无需进行批量查找和替换）

> ID：14769406
> 
> 赞同：1
> 
> 时间：2013-02-08T09:27:55.900
> 
> 标签：c#, reflection, metaclass

有没有办法做这样的事情：[在 Groovy 中是否有办法装饰每个类以添加跟踪？](https://stackoverflow.com/questions/3691933/in-groovy-is-there-a-way-to-decorate-every-class-to-add-tracing)但在 C# 中。由于 C# 不支持 metaClass，我不知道该怎么做。如果我能让这个解决方案发挥作用，那么我将使用反射遍历每个类并使其实现接口。

谢谢，

乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:40:13.783

是的，您可以使用动态代理。

你为什么不看看Castle DynamicProxy？[http://www.castleproject.org/projects/dynamicproxy/](http://www.castleproject.org/projects/dynamicproxy/)

或者 PostSharp，如果您想以更清洁的方式利用 AOP：

[http://www.sharpcrafters.com/postsharp/documentation](http://www.sharpcrafters.com/postsharp/documentation)

## 更新

OP在一些评论中说：

> 啊，我实际上是在使用 PostSharp 来输出调用了哪些方法以及何时调用。我试图避免做的是为我的代码中的每个类添加一个属性。所以我想我可以像这样创建一个接口： [MyAttribute] public interface IDebug {} 并让我的类在运行时实现这个接口。

PostSharp 支持汇编级方面：`[assembly:YourAspect]`. 稍后，在您的方面，您可以检查调用了哪个方法以及属于哪个对象，并根据它来完成整个工作。

# jquery - jQuery复选框选中/取消选中

> ID：14769408
> 
> 赞同：41
> 
> 时间：2013-02-08T09:28:11.930
> 
> 标签：jquery, checkbox

什么是检查/取消选中放置在触发我的功能的元素内的复选框的正确方法？

这是我的代码：

```
<table id="news_list">
<tr>
    <td><input type="checkbox" name="news[1]" /></td>
    <td>TEXT</td>
</tr></table>

$("#news_list tr").click(function() {
    var ele = $(this).find('input');
    if(ele.is(':checked')){
        ele.removeAttr('checked');
        $(this).removeClass('admin_checked');
    }else{
        ele.attr('checked', 'checked');
        $(this).addClass('admin_checked');
    }
}); 
```

问题是我只能检查和取消选中每个框一次。在我检查和取消选中后，有时它仍然会添加/删除类，但永远不会再次选中一个框（即使我点击复选框，而不是表格行）。

我试过使用 .bind('click') 触发器，但结果相同。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-08T10:03:13.530

改为使用`.prop()`，如果我们使用您的代码，然后像这样比较：

查看示例[***jsbin***](http://jsbin.com/ocolux/1/edit)：

```
 $("#news_list tr").click(function () {
    var ele = $(this).find(':checkbox');
    if ($(':checked').length) {
      ele.prop('checked', false);
      $(this).removeClass('admin_checked');
    } else {
      ele.prop('checked', true);
      $(this).addClass('admin_checked');
    }
 }); 
```

变化：

1.  改为。`input`_`:checkbox`
2.  `the length`的比较`checked checkboxes`。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-08T09:30:03.470

使用 prop() 而不是 attr() 来设置`checked`. 也可以`:checkbox`在 find 方法中使用，而不是`input`具体的。

[**现场演示**](http://jsfiddle.net/rajaadil/rXU64/)

```
$("#news_list tr").click(function() {
    var ele = $(this).find('input');
    if(ele.is(':checked')){
        ele.prop('checked', false);
        $(this).removeClass('admin_checked');
    }else{
        ele.prop('checked', true);
        $(this).addClass('admin_checked');
    }
}); 
```

[使用 prop 而不是 attr 来检查属性](http://api.jquery.com/attr/)

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。要检索和更改 DOM 属性，例如表单元素的选中、选择或禁用状态，请使用 .prop() 方法

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-16T02:14:13.747

```
 $('mainCheckBox').click(function(){
    if($(this).prop('checked')){
        $('Id or Class of checkbox').prop('checked', true);
    }else{
        $('Id or Class of checkbox').prop('checked', false);
    }
}); 
```

# gridview - 来自不同列的条件格式

> ID：14769411
> 
> 赞同：2
> 
> 时间：2013-02-08T09:28:23.730
> 
> 标签：gridview, extjs, formatting, ext.net

如 ext.net 示例中所示，[这](http://examples1.ext.net/#/GridPanel/ArrayGrid/Simple/)是格式化列条目的代码

```
var template = '<span style="color:{0};">{1}</span>';

var change = function (value) {
   return String.format(template, (value > 0) ? "green" : "red", value);
}; 
```

现在我的问题是，我也想格式化专栏公司。

```
var company = function(value) {
   return String.format(template, (record.data.change > 0) ? "green" : "red", value);
}; 
```

这不起作用，因为不会将记录提供给函数，而且我也未能将参数传递给在渲染器上调用的 Fn

```
var company = function(value, change) {
   return String.format(template, (change > 0) ? "green" : "red", value);
}; 
```

我也可以想象一个使用 jquery 的解决方法，但这只是一大堆工作和选择器。由于我对 ext.net / extjs 很陌生，我确信我忽略了一些东西

PS是的，我使用的是旧版本的ext.net，因此链接是examples1.ext.net ;)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T09:44:42.403

你应该总是看看 ExtJS API。在这里你会寻找**[Ext.grid.column.Column-cfg-renderer](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-renderer)**

渲染器参数是

*   **value** : *Object* 当前单元格的数据值
*   **metaData** : *Object* 关于当前单元格的元数据集合；可以由渲染器使用或修改。可识别的属性有：tdCls、tdAttr 和 style。
*   **record** : *Ext.data.Model* 当前行的记录
*   **rowIndex** : *Number* 当前行的索引
*   **colIndex** : *Number* 当前列的索引
*   **store** : *Ext.data.Store* 数据存储
*   **view** : *Ext.view.View* 当前视图

所以我想这应该对你有用

```
var company = function(value, meta, record) {
   return String.format(template, (record.data.change > 0) ? "green" : "red", value);
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:45:02.330

渲染器的第三个参数是记录。第一个是值，第二个是关于单元格的元数据：[http ://docs.sencha.com/ext-js/3-4/#!/api/Ext.grid.Column-cfg-renderer](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.grid.Column-cfg-renderer)

# ios - 我们应该在 iOS 的初始化程序或 layoutsubviews 方法中添加 UITableView 吗？

> ID：14769415
> 
> 赞同：0
> 
> 时间：2013-02-08T09:28:41.437
> 
> 标签：ios, uiview, customization, layoutsubviews

我正在为我的应用程序设计一个自定义 UIView。

UIView 将由以下组件组成：

1.  UI搜索栏
2.  UITableView

我的初始化程序如下：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        _searchBar = [[UISearchBar alloc]initWithFrame:CGRectZero];
        _tableView = [[UITableView alloc]initWithFrame:CGRectZero];
        _tableView.dataSource = self;
        [super addSubView:_searchBar];
        [super addSubView:_tableView];
        // Initialization code
    }
    return self;
} 
```

我打算在 layoutsubviews 方法中设置 _searchBar 和 _tableView 的框架。

但我认为我将 _tableView 添加到 super 的方式是错误的。因为在 _tableView 添加到子视图的那一刻，_tableView 的数据源方法就会被触发。这甚至发生在自定义类本身的创建之前。

这是一个正确的设计吗？

我可以按以下方式在 layoutSubviews 中单独添加 _tableView 吗？

```
-(void)layoutSubViews{

//Adjust frame 
[_tableView removeFromSuperView];
[self addSubView:_tableView];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:43:53.203

您不应该在视图中分配 UITableViewDataSource 。它应该在 ViewController 中分配。

你是对的。对此没有任何限制。但你的问题是关于设计的。想象一下这样的事情：

```
@implementation CustomViewController

- (void)loadView {
    customView = [[CustomView alloc] initWithFrame:CGRectZero];

    customView.tableView.dataSource = self;
    customView.tableView.delegate = self;
} 
```

使用 ViewController，您可以控制何时初始化自定义视图并控制其 tableView 何时加载数据。虽然您当然可以将所有这些代码放入您的 customView 中，但您会遇到比您现在询问的问题更严重的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:31:05.377

您绝对应该将其添加到 init 中，因为每次您调整视图大小时都会调用布局子视图，并且需要重新布局其子视图。布局子视图方法严格用作回调，告诉您您的视图将进行布局，并用作您希望制作的任何其他布局的覆盖点。另外，作为附加说明，使用 super 添加视图并不是一个好的设计。

# php - 设置 php 代理以访问受审查的网站并绕过防火墙

> ID：14769416
> 
> 赞同：2
> 
> 时间：2013-02-08T09:28:41.980
> 
> 标签：php, curl

我目前正在使用这个插件[http://wordpress.org/extend/plugins/repress/](http://wordpress.org/extend/plugins/repress/)它基本上使我的网站成为代理，以便用户可以访问这样的审查网站

```
www.mywebsite.com/proxy/www.cnn.com 
```

该插件运行良好，但是当涉及到绝对链接时，插件无法正确解析它并且链接仍然被阻止。该插件开发已停止。所以我需要编写自己的脚本。我一直在到处搜索并阅读我能找到的教程，但没有一个能在这方面特别帮助我。

我知道如何使用 php curl 获取网站并在空白页面上回显。我不知道的是如何设置代理脚本以像上面的示例一样工作，用户可以键入

```
www.mywebsite.com 
```

其次是

```
/proxy.php 
```

然后是他们的目标网站

```
/www.cnn.com 
```

目前我有这个设置：

```
<?php
$url = 'http://www.cnn.com';
$proxy_port = 80;
$proxy = '92.105.140.115';
$timeout = 0;
$referer = 'http://www.mydomain.com'

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 0);
curl_setopt($ch, CURLOPT_PROXYPORT, $proxy_port);
curl_setopt($ch, CURLOPT_PROXY, $proxy);
curl_setopt($ch, CURLOPT_PROXYTYPE, 'HTTP');
curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, 0);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);*/
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);       
curl_setopt($ch, CURLOPT_REFERER, $referer);

$data = curl_exec($ch);
curl_close($ch);
echo $data; 
?> 
```

这会拉主页，但没有检索到 CSS 或图像。同样，所有相关链接都被破坏了。我不知道如何应用 proxy_port 和 proxy 变量。我试过了

```
92.105.140.115:80/www.cnn.com 
```

但这不起作用。我也不太完全理解这段代码，因为我在一个示例网站上找到了它。

非常欢迎任何答案或教程链接。

谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T09:52:38.127

拥有一个功能齐全的代理并不是那么简单。已经有许多这样的项目可用。试一试：

*   [http://www.surrogafier.info/](http://www.surrogafier.info/)
*   [https://github.com/Alexxz/Simple-php-proxy-script](https://github.com/Alexxz/Simple-php-proxy-script)
*   [http://www.glype.com/](http://www.glype.com/)

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T16:22:12.100

您不能只在页面中回显 curl 获取网站的结果，因为浏览器会解释 Uris 错误，您需要当用户单击链接时，他会转到您的代理站点而不是原始站点，所以您可以t 只是使用 echo 打印，您需要手动编辑该获取页面中的每个链接，然后再将其打印给用户，我有一个由 php en p.listascuba.com 制作的全功能代理，您无法尝试。

与我联系获取更多信息

# c++ - 负升压范围过滤适配器

> ID：14769418
> 
> 赞同：5
> 
> 时间：2013-02-08T09:28:47.020
> 
> 标签：c++, boost, lambda, boost-range

是否有可能/可实现否定升压滤波适配器，例如

```
std::vector<int> v = {1, 2, 3, 4, 5};
for(auto i : v | !filtered(is_even))
    std::cout << i << std::endl; // prints 1,3,5 
```

而不是在 lambda 表达式中进行否定？

**动机：**我经常使用过滤器和 lambda 函数，但是当我多次使用过滤器时，我通常将其重构为自定义过滤器，例如

```
for(auto i : v | even) // note: my filters are more complex than even.
    std::cout << i << std::endl; // prints 2,4 
```

现在，当我需要否定时，我正在为他们构建一个自定义过滤器，例如

```
for(auto i : v | not_even)
    std::cout << i << std::endl; // prints 1,2,3 
```

但我会发现能够否定过滤器会更好，例如

```
for(auto i : v | !even)
    std::cout << i << std::endl; // prints 1,2,3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T11:12:30.687

这是我在短时间内想出的：

```
#include <boost/range/adaptors.hpp>
#include <boost/functional.hpp>
#include <iostream>

namespace boost { 
    namespace range_detail { 

        template <typename T>
            auto operator!(filter_holder<T> const& f) -> decltype(adaptors::filtered(boost::not1(f.val)))
            {
                return adaptors::filtered(boost::not1(f.val));
            }
    }
}

int main()
{
    using namespace boost::adaptors;
    int const v[] = { 1, 2, 3, 4 };

    std::function<bool(int)> ll = [](int i){return 0 == (i%2);}; // WORKS
    // bool(*ll)(int) = [](int i){return 0 == (i%2);};           // WORKS
    // auto ll = [](int i){return 0 == (i%2);};                  // not yet

    auto even = filtered(ll);

    for (auto i : v | !even)
    {
        std::cout << i << '\n';
    }
} 
```

**[在liveworkspace.org](http://liveworkspace.org/code/IDDkJ%245)**上现场观看

请注意，它目前处理形式的谓词`function pointer`and `std::function<...>`，但尚未处理裸 lambdas（在 GCC 4.7.2 上）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-11T12:06:16.543

这并不能完全回答问题，因为它不会否​​定过滤器，而只会否定**predicate**。我仍在发布这个，因为搜索解决方案将这个问题作为第一个结果。

与[其他答案](https://stackoverflow.com/a/14771272/7571258)相比，这具有我们不需要添加自定义代码的优势`namespace boost::range_detail`。

# C++17 解决方案

该函数[`std::not_fn`](https://en.cppreference.com/w/cpp/utility/functional/not_fn)可用于创建否定谓词。

```
#include <boost/range/adaptors.hpp>
#include <functional>
#include <iostream>

struct is_even
{
    bool operator()( int x ) const { return x % 2 == 0; }
};

int main()
{
    using namespace boost::adaptors;
    int const v[] = { 1, 2, 3, 4 };

    for( auto i : v | filtered( std::not_fn( is_even{} ) ) )
    {
        std::cout << i << ' ';
    }
} 
```

[**现场演示**](http://coliru.stacked-crooked.com/a/4889957141d665b1)

# C++11、C++14 解决方案

该函数[`std::not1`](https://en.cppreference.com/w/cpp/utility/functional/not1)可用于创建否定谓词。它有一个额外的要求，谓词必须定义一个成员类型，它与谓词参数`argument_type`具有相同的类型。`operator()`

```
#include <boost/range/adaptors.hpp>
#include <functional>
#include <iostream>

struct is_even
{
    using argument_type = int;
    bool operator()( int x ) const { return x % 2 == 0; }
};

int main()
{
    using namespace boost::adaptors;
    int const v[] = { 1, 2, 3, 4 };

    for( auto i : v | filtered( std::not1( is_even{} ) ) )
    {
        std::cout << i << ' ';
    }
} 
```

[**现场演示**](http://coliru.stacked-crooked.com/a/46783f053efbf6ba)

# algorithm - igraph 优先附件有向图是无环的吗？

> ID：14769419
> 
> 赞同：2
> 
> 时间：2013-02-08T09:28:47.180
> 
> 标签：algorithm, graph, igraph, directed-acyclic-graphs, directed-graph

我正在使用 igraph 实现的 Barabasi-Albert 模型生成图表：

```
Graph.Barabasi(10,5,directed=True) 
```

如何确定生成的有向图是无环的？是否存在暗示这一点的基本属性？

我在[这里](http://complexnt.blogspot.fr/2012/04/preferential-attachment-and-barabasi_11.html)找到了有关该模型的信息：

“然而，这个模型缺乏万维网的几个属性： • 如果我们认为该模型产生了一个有向网络，那么它会生成无环图，这是对 Web 的不良表示。”

但是我如何确定 igraph 生成的图表上的这些属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:33:06.127

该算法生成随机无标度网络。

以下是[wikipedia](http://en.wikipedia.org/wiki/Barab%C3%A1si%E2%80%93Albert_model)中对其工作原理的描述：

> 该网络以 m0 个节点的初始网络开始。[...] 一次将一个新节点添加到网络中。每个新节点连接到 m 个现有节点的概率与现有节点已经拥有的链接数量成正比。

这意味着如果我们从一个小型非循环网络开始并添加具有有向边的新节点，它们将始终指向现有节点。不可能以这种方式完成循环，因为这需要现有节点指向新节点。

当每个新节点只连接到另一个节点时，很容易看出结果图将是非循环的，如维基百科页面上的图所示。该图是用 生成的`m = 1`。

![每个新节点连接到一个现有节点时的图表。](../Images/115f1a96c6af507582668832bc327a7a.png)

但是这个属性也适用于更大的值，`m`当添加的边被定向时。

注意：这里假设种子图是非循环的。如果我们在小种子图中有一个循环，那么这个循环当然会随着新节点的生成和图的增长而保持。

# ruby - 如何将正则表达式与 Nokogiri::XML::Text 对象一起使用？

> ID：14769421
> 
> 赞同：0
> 
> 时间：2013-02-08T09:28:55.797
> 
> 标签：ruby, xml, regex, nokogiri

我有一个名为这些对象的人的数组：

```
Nokogiri::XML::Text:0x3fe41985e69c "CEO, Company_1"
Nokogiri::XML::Text:0x3fe4194dab74 "COO, Company_2 "
Nokogiri::XML::Text:0x3fe4195eb414 "CFO, Company_3" 
```

我想在“，”处拆分对象，所以我尝试做这样的事情：

```
companies = people.each do | company | 
  company.inner_text.match("/, (.*)/")
end 
```

和：

```
occupations = people.each do | occupation | 
  occupation.inner_text.match("/(.*),/") 
end 
```

`match`似乎没有从对象中提取我想要的值。我检查了 rubular.com，它应该可以工作，但我得到的字符串与我输入的字符串相同： 何时应该将其分开，`"CEO, Company_1"`以便.`occupations = [CEO, COO, CFO]``companies = [Company_1, Company_2, Company_3]`

如何拆分这些对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:53:03.013

怎么不`split`发文？

```
require 'nokogiri'

xml = '<x>
<people>CEO, Company_1</people>
<people>COO, Company_2</people>
<people>CFO, Company_3</people>
</x>
'

doc = Nokogiri::XML(xml)
people = doc.search('people')
companies = people.map do |company| 
  company.text.split(',')
end

pp companies

=> [["CEO", " Company_1"], ["COO", " Company_2"], ["CFO", " Company_3"]] 
```

如果您想摆脱公司之前的领先空间，请使用：

```
companies = people.map do |company| 
  company.text.split(/,\s*/)
end
=> [["CEO", "Company_1"], ["COO", "Company_2"], ["CFO", "Company_3"]] 
```

或者：

```
companies = people.map do |company| 
  company.text.split(',').map(&:lstrip)
end
=> [["CEO", "Company_1"], ["COO", "Company_2"], ["CFO", "Company_3"]] 
```

或使用`map{ |s| s.sub(/^\s+/, '') }`代替`lstrip`.

另请参阅“[如何避免在抓取时加入来自节点的所有文本](https://stackoverflow.com/questions/43594656/how-to-avoid-joining-all-text-from-nodes-when-scraping)”。

# javascript - PopUpAppender 的问题 - 似乎是“未定义”

> ID：14769424
> 
> 赞同：0
> 
> 时间：2013-02-08T09:29:03.743
> 
> 标签：javascript, appender, log4javascript

我尝试`log4javascript`在我的项目中包含 JS 库，因此按照一个简单的示例来配置一个简单的命名`logger`对象，`PopUpAppender`并且我一遍又一遍地看到相同的消息：

```
Uncaught TypeError: Cannot read property 'focusPopUp' of undefined 
```

它指向`PopUpAppender`函数中的以下行：

```
function PopUpAppender(lazyInit, initiallyMinimized, useDocumentWrite,
                               width, height) {
            this.create(false, null, lazyInit, initiallyMinimized,
                    useDocumentWrite, width, height, this.defaults.focusPopUp); // this is were the error seems to happen...
        } 
```

因此，我创建了一个简单的`HTML`项目，其中只有一个`index.html`普通`html`站点，并包含`log4javascript.js`并`log4javascript_uncompressed.js`交替测试任何文件中的行为是否不同。但是每次我尝试以`logger`所描述的方式初始化对象时，我都会看到同样的错误。

如果我退后一步并尝试以`logger`最简单的方式初始化，例如：

```
var log = log4javascript.getDefaultLogger(); 
```

一切正常，我看到记录器输出弹出并写出我的第一条日志消息。

`logger`我在尝试初始化对象时做错了吗？我看不到任何绊脚石，因为我基本上在做与该`log4javascript.getDefaultLogger()`方法相同的事情：

```
log4javascript.getDefaultLogger = function() {
        if (!defaultLogger) {
            defaultLogger = log4javascript.getLogger(defaultLoggerName);
            var a = new log4javascript.PopUpAppender();
            defaultLogger.addAppender(a);
        }
        return defaultLogger;
    }; 
```

对此有任何提示吗？

* * *

编辑：

我`logger`以这种方式初始化我的

```
var log = log4javascript.getLogger("main");
var appender = log4javascript.PopUpAppender();
log.addAppender(appender);
log.debug("Logging is enabled!"); 
```

* * *

编辑2：

所以，我开始了一个新的纯 HTML 项目，只有`index.html`页面和`js`文件夹，这是从`log4javascript`*.zip 包中提取的文件夹。

这是我的整个 HTML 页面：

```
<html>
<head>
    <title> Log4Javascript Tryout Page!</title>
    <script type="text/javascript" src="js/log4javascript.js"></script>
</head>
<body>
    <script type="text/javascript">
        var logger = log4javascript.getLogger('main');
        var appender = log4javascript.PopUpAppender();
        logger.addAppender(appender);
        logger.debug('Logging enabled!');
    </script>
</body>
</html> 
```

我仍然收到同样的错误......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:27:27.217

问题是您需要使用`new`：

```
var appender = new log4javascript.PopUpAppender(); 
```

# sql - SQL 查询的自动文档化

> ID：14769425
> 
> 赞同：1
> 
> 时间：2013-02-08T09:29:14.080
> 
> 标签：sql, postgresql, documentation, documentation-generation

我们使用 SQL 查询来完成我们公司 (PostgreSQL) 的大部分分析工作。目前有 250 多个查询存储在固定的目录结构中（还有很多 DDL/DML 文件）。

是否有任何自动文档工具来创建所有这些*查询*的文档并产生一些输出（例如 html）？

我知道有一些工具可用于函数/表/过程文档，但没有一个（据我了解）适合查询，例如：

*   [超SQL](http://projects.izzysoft.de/trac/hypersql)
*   [多氧](http://www.doxygen.nl/)
*   [自然文档](http://www.naturaldocs.org)

在文档中，我想跟踪以下内容：

*   文件名
*   sql描述
*   作者
*   项目
*   标签

固定目录结构的局限性是显而易见的——查询在逻辑上属于更多文件夹的情况很多时候，但您也只能选择一个。我们曾尝试使用 trac wiki，但它很复杂（您必须将查询的每个版本复制/粘贴到 wiki）。另一方面，您可以使用标签，它很容易搜索并且您有版本控制。我也尝试过使用一些带有高级内置搜索的查询工具（例如 eclipse 的 toad 插件），但是您必须编写非常复杂的正则表达式才能获取您感兴趣的文件。

这就是为什么我认为 autodoc 方法是完成这项任务的唯一可能方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:25:03.827

我不认为这样的工具对于一般用例来说是很容易的，所以你最好的选择是按照约定来编写你自己的。最重要的是，许多 SQL 文档生成器会尝试跟踪依赖关系等。您可以相对轻松地使用表执行此操作（例如动态发现外键），并且在某些情况下您可以使用函数执行此操作，但除此之外，它变得非常难的。注意我`postgresql_autodoc`用于 db 对象。能够跟踪表是有问题的（如果查询以不同的方式运行`search_path`怎么办？有很多事情你不知道......）。

如果是我，我会考虑修改 doxygen 以跟踪您想要的信息。仅当每个文件有一个 sql 语句时，才可以进一步执行此操作。例如，记录*文件是一回事，但与记录**查询*却大不相同。

 *但是，我建议采用可发现的存储过程接口并将注释放在 SQL`COMMENT ON`语句中。这就是我们所做的，它使自动文档变得更加容易。然后，您可以根据需要使用 postgresql_autodoc 或其他工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:31:58.653

我所知道的唯一一个是基于 MS SQL 的：http: [//www.apexsql.com/sql_tools_doc.aspx](http://www.apexsql.com/sql_tools_doc.aspx)*

# trigonometry - 如何在 Maple 中用三角函数简化这个表达式？

> ID：14769426
> 
> 赞同：0
> 
> 时间：2013-02-08T09:29:16.333
> 
> 标签：trigonometry, simplify, maple

```
cot(5*Pi*(1/22))+4*sin(2*Pi*(1/11)) 
```

可以简化为`sqrt(11)`，我尝试使用`simplify`and `combine`，但我无法使用 maple 获得该结果，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:53:06.997

简化为特定形式或表达类别（例如，仅涉及部首而不涉及三角）有时可能比零检测更难。Maple`simplify`成功确定您的输入表达式减去 sqrt(11) 为零。

```
restart:
e := cot(5*Pi*(1/22))+4*sin(2*Pi*(1/11)):
simplify(e - sqrt(11));
                           0 
```

但是当然你可能不会事先知道任何只涉及有理数和激进的结果，所以只做上面的事情包含太多的人为干预（“作弊”）。但是，有时您可以通过几种方法“相当”地计算零测试的纯精确候选者，例如，候选者涉及激进但不涉及三角函数。

```
cand1 := sqrt(simplify(e^2));

                          (1/2)
                        11     

simplify( cand1 - e );
                           0

cand2 := identify(evalf(e));

                          (1/2)
                        11     

simplify( cand2 - e );
                           0 
```

# java - 如何使用 PDFBOX 加载受密码保护的 PDF 表单

> ID：14769430
> 
> 赞同：12
> 
> 时间：2013-02-08T09:29:23.327
> 
> 标签：java, pdfbox

如何使用 PDFBOX 加载受密码保护的 PDF 表单

我有一小段代码来加载不受保护的 PDF 表单

```
 PDDocument pdfDoc;
  pdfDoc = PDDocument.load(filePath); 
```

谁能帮帮我..谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T09:38:26.440

**试试这个代码：**

```
private void openPDFDoc(final File pdfFile) throws Exception {
        File originalPDF = pdfFile;
        PDFParser parser = new PDFParser(new BufferedInputStream(new FileInputStream(
                originalPDF)));
        parser.parse();

        PDDocument originialPdfDoc = parser.getPDDocument();

        boolean isOriginalDocEncrypted = originialPdfDoc.isEncrypted();
        if (isOriginalDocEncrypted) {
            originialPdfDoc.openProtection(new StandardDecryptionMaterial("password"));
        }
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-12T06:22:06.957

你可以使用

```
public static void main(String[] args){
PDDocument pd;
try {
     File input = new File("p.pdf");  // password protected PDF file from where you would like to extract
     pd = PDDocument.load(input,"your_password");
     pd.setAllSecurityToBeRemoved(true);

     //for printing pdf file data
     PDFTextStripper reader = new PDFTextStripper();
     String pageText = reader.getText(pd);
     System.out.println(pageText);
     } catch (Exception e){
     e.printStackTrace();
    } 
 } 
```

# c++ - 与手动仿函数相比，std::mem_fn 的不足

> ID：14769437
> 
> 赞同：1
> 
> 时间：2013-02-08T09:29:43.760
> 
> 标签：c++, c++11, implicit-conversion, mem-fun

我遇到了一个用例，`std::mem_fn`它不能做手动包装函数可以做的事情。当包装函数用于不属于方法类但隐式可转换为它的类型时，就会出现这种情况：

```
#include <functional>

struct A
{
};

struct B
{
    B(A);  // implicit conversion from A to B
    void foo() const;
};

auto foo1 = std::mem_fn(&B::foo);     // std::mem_fn

void foo2(const B& b) { b.foo(); }    // hand-rolled wrapper

int main()
{
    A a;
    foo1(a);  // doesn't work
    foo2(a);  // works fine
} 
```

调用 foo1 的编译器错误如下（使用 GCC 4.8）：

```
In file included from test.cpp:1:0:
functional: In instantiation of '_Res std::_Mem_fn<_Res (_Class::*)(_ArgTypes ...)const>::_M_call(_Tp&, const volatile void*, _ArgTypes ...) const [with _Tp = A; _Res = void; _Class = B; _ArgTypes = {}]':
functional:608:42:   required from '_Res std::_Mem_fn<_Res (_Class::*)(_ArgTypes ...)const>::operator()(_Tp&, _ArgTypes ...) const [with _Tp = A; _Res = void; _Class = B; _ArgTypes = {}]'
test.cpp:21:11:   required from here
functional:586:13: error: no match for 'operator*' (operand type is 'A')
  { return ((*__ptr).*__pmf)(std::forward<_ArgTypes>(__args)...); }
             ^ 
```

是否有可能以`std::mem_fn`这种用例的方式实现，就像使用手卷包装器一样工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T09:41:26.307

有可能，是的，但这不是 C++ 标准指定的`mem_fn`.

该标准说，在 [func.require] 中定义的`foo1(a)`调用为：`INVOKE(&B::foo, a)`

> 定义`INVOKE (f, t1, t2, ..., tN)`如下：
> — `(t1.*f)(t2, ..., tN)`when`f`是指向类的成员函数的指针，`T`并且`t1`是类型对象`T`或类型对象的`T`引用或派生类型对象的引用`T`；
> —`((*t1).*f)(t2, ..., tN)`当 f 是指向类的成员函数的指针`T`并且`t1`不是上一项中描述的类型之一时；
> — ...

您的案例不符合第一个项目符号的条件，因为`a`它不是 class 的对象`B`，也不是对 a`B`或派生自 的类的引用`B`，因此第二个项目符号适用，因此它等同于`((*a).*f)()`which 无效。

它以这种方式定义以允许使用智能指针，例如

```
auto foo1 = std::mem_fn(B::foo);
auto p = std::make_shared<B>();
foo1(p); 
```

*`INVOKE`*（也被`bind`,`function`和创建调用包装器的库的其他部分使用）的定义`async`意味着当调用包装的指向成员的指针时，如果第一个参数`t1`不是 a`T`那么它被假定为某种指针并被取消引用。这意味着它适用于`std::shared_ptr`and`std::unique_ptr`但也适用于`std::mem_fn`一无所知的类型，例如`boost::shared_ptr`and `MyVeryOwnSmartPtr`。

为了使您的代码正常工作，可以添加额外的情况来处理 when `t1`is not a`T`或 type 派生自`T`，但`is_convertible<T>::value`为 true ，并调用`T(t1).*f)()`，但这会使规范复杂化，并且在某些情况下可能会产生不良后果。

您的“包装器”将强制对其参数进行隐式转换，但它无法处理 type 的智能指针或右值`B`，它们都受`mem_fn`. 如果您有特定情况想要将`A`对象转换`B`为调用函数，那么就这样做，通用`mem_fn`模板不适合，但它更灵活和通用，并且适用于许多其他情况。

（注意 的定义*`INVOKE`*实际上是有缺陷的，因为它`std::reference_wrapper`以与取消引用您的论点相同的方式取消引用对象`a`。我在[http://cplusplus.github.com/LWG/lwg-active.html#2219](http://cplusplus.github.com/LWG/lwg-active.html#2219)提出了修复，但是这不会影响您的示例。）

# android - ViewPager 中的 Android ViewPager 无法正确更新

> ID：14769438
> 
> 赞同：0
> 
> 时间：2013-02-08T09:29:57.113
> 
> 标签：android, android-viewpager, fragment

我有一个有 6 个屏幕的 ViewPager (mViewPagerMain)。在屏幕 4 中，我在另一个 (mViewPagerSub) 中有另一个 ViewPager。当使用 mViewPagerSub 时，我在我的 CustumViewPager 禁用 mViewPagerMain 的滚动 - 效果很好。现在的问题：当我滚动浏览主页时，一切正常，所有东西都加载了。当我从屏幕 4（包含子屏幕）滚动回屏幕 2 并返回到屏幕 4 时，子屏幕内的前 2 个屏幕未加载。如果我在 sub 中来回滚动，一切都会正确加载。

创建：

```
protected void onCreate(Bundle savedInstanceState) {
   mSectionsPagerAdapterMain = new SectionsPagerAdapterMain(getSupportFragmentManager());
   mSectionsPagerAdapterSub = new SectionsPagerAdapterSub(getSupportFragmentManager());
   mViewPagerMain = (CustomViewPager) findViewById(R.id.pagerMain);
   mViewPagerMain.setAdapter(mSectionsPagerAdapter);
} 
```

SectionPagerAdapters：（就像在 google 示例中一样，对于 sub 相同）

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {
    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        Fragment fragment = null;
        switch (position) {
        case 0:
            fragment = new SettingsFragment(0);
            break;
        case 1:
            fragment = new SettingsFragment(1);
            break;
        case 2:
            fragment = new SettingsFragment(2);
            break;
        // and so on...
        default:
            fragment = new SettingsFragment(0);
        }
        return fragment;
    }

    @Override
    public int getCount() {
        return 6;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return getString(R.string.title_section1).toUpperCase();
        case 1:
            return getString(R.string.title_section2).toUpperCase();
        // and so on ...
        }
        return null;
    }
} 
```

Settingsfragment：（就像在谷歌示例中一样）

```
public static class SettingsFragment extends Fragment {

    int position = 0;

    public SettingsFragment(int position) {
        this.position = position;

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView;
        if (position == 0) {
            rootView = inflater.inflate(R.layout.main0, container, false);
            main0(rootView);
            return rootView;

        } else if (position == 1) {
            rootView = inflater.inflate(R.layout.main1, container, false);
            main1(rootView);
            return rootView;
        } else if (position == 2) {
            rootView = inflater.inflate(R.layout.main2, container, false);
            main2(rootView);
            return rootView;
        } 
                    //...and so on...
    }

} 
```

相关页面：main4()：

```
public static void main4(View rootView) {
    subView = rootView;
    new setAdapterTask().execute();
} 
```

以及加载寻呼机的异步任务：

```
private static class setAdapterTask extends AsyncTask<Void, Void, Void> {
    protected Void doInBackground(Void... params) {
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        mViewPagerSub = (CustomViewPager)subView.findViewById(R.id.pagerSub);
        mViewPagerSub.setAdapter(mSectionsPagerAdapterSub);
        mViewPagerSub.refresh();
    }
} 
```

CustomViewPager.refresh():

```
public void refresh() {
       getAdapter().notifyDataSetChanged();
} 
```

我尝试使用这样的 PageListener 来模拟滚动，但没有效果：

```
private static class PageListener extends SimpleOnPageChangeListener {
        public void onPageSelected(int position) {
            currentPage = position;
            if (mViewPagerSub != null && currentPage == 3) {
                mViewPagerSub.setCurrentItem(5);
            } else if (mViewPagerSub != null && currentPage == 4) {
                mViewPagerSub.setCurrentItem(0);
            }
            if (mViewPagerSub != null)
                mViewPagerSub.refresh();
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:59:18.797

回答我自己的问题：这成功了：

```
private static class PageListener extends SimpleOnPageChangeListener {
   public void onPageSelected(int position) {
      currentPage = position;
      if(currentPage==4 && mViewPagerSub!=null){
         new setAdapterTask().execute();
      }
   }
} 
```

# python - 为什么 Popen 需要按 Enter 才能返回 shell

> ID：14769443
> 
> 赞同：0
> 
> 时间：2013-02-08T09:30:09.060
> 
> 标签：python, popen

我想在我的 Python 脚本中使用 bash 执行 shell 命令，在屏幕上获取实时打印消息。我使用以下行来执行此操作：

```
subprocess.Popen(my_commands, shell=True, stdout=sys.stdout, stderr=sys.stderr, executable='/bin/bash') 
```

一切看起来都很好，期望在 shell 命令完成后，输入光标仍然不可见。我必须按 Enter 键才能再次激活 shell。那么错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:47:27.900

这是因为你有两个贝壳，`shell=True`并且`/bin/bash`

如果您设置`shell=False`，您将不会在控制台上看到输出。您将不得不使用`PIPE`和/或`subprocess.communicate()`获取输出（取决于您想要什么）。

# mysql - 如何使用 SQL 在 magento 中获取产品 ID 和 sku

> ID：14769446
> 
> 赞同：10
> 
> 时间：2013-02-08T09:30:19.150
> 
> 标签：mysql, sql, magento, magento-1.7

我正在尝试使用 SQL 在 magento 中获取每个产品的产品 ID 和 SKU，我发现该表`catalog_product_entity`包含所有 SKU 但没有产品 ID。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-08T09:41:47.130

entity_id 是产品的唯一 id，所以如果你打电话给`$product->getId();`你，你实际上会得到 entity_id

该列名称的原因是产品是 EAV（实体属性值）模型，因此产品是实体 - 标准化 EAV 实体标识列名称，但它可能会带来混乱......

和查询：

```
SELECT entity_id as product_id, sku FROM catalog_product_entity 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:44:36.763

“entity_id”列**是**产品的 ID。所以该`catalog_product_entity`表确实包含这两个项目。

# visual-studio-2010 - Visual Studio 未将我的 Web 服务函数摘要显示为调用该函数

> ID：14769448
> 
> 赞同：0
> 
> 时间：2013-02-08T09:30:33.587
> 
> 标签：visual-studio-2010, web-services, summary, function-call

我想在函数被调用时显示我的摘要，但是我看不到我写的摘要。这是我的代码：

调用网络方法：

![在此处输入图像描述](../Images/9bacb070998388ef1e2eb2c0b9dd3019.png)

网络服务端： ![在此处输入图像描述](../Images/287971bf7871c32d2f6ed00d0aae2316.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:42:54.730

正如 uzay95 所说，Web 服务不会推送方法的注释。

# java - 如何将缺少 .project .settings .classpath 文件的 java 项目导入 eclipse

> ID：14769451
> 
> 赞同：10
> 
> 时间：2013-02-08T09:30:42.303
> 
> 标签：java, eclipse

我从一个开源项目中获得了一个 java 源代码。源代码没有 .project 、.classpath 、.setting(directory) 等 Eclipse 项目特定文件。如何将该 java 源代码导入 eclipse ？

* * *

我没有要指定的 pom.xml(mvn) 文件。所以我手动尝试。

按照以下步骤解决

1.  使用 projectName 和 projectName 下的目录“src”创建一个目录。
2.  将源代码（即：org/apache/hadoop 目录）移动到 projectName 下的 src 目录中。
3.  在 Eclipse 中创建一个示例项目并进入工作区并通过更改项目名称、.settings、.classpath 文件来修改 .project xml 文件
4.  将修改后的“.project”文件和“.settings”，“.classpath”从eclipse工作区项目目录复制到新创建的目录“projectName/” 5.使用文件菜单下的eclipse导入选项导入新创建的项目使用现有项目进入工作区选项
5.  将项目根目录作为 projectName 目录。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T09:33:49.953

如果您`mvn eclipse:eclipse`在项目文件夹上使用 Maven 类型

如果您不使用 Maven，请转到 Eclipse，导入->导入->常规->文件系统（然后选择包含源文件的目录）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-01T13:56:46.020

如果你没有 .project .classpath 和 .settings 文件，代表项目不是eclipse项目，所以你应该创建一个标准的eclipse项目

您可以按照以下步骤操作：

1.  **将您的项目或开源项目复制到工作区。**
2.  **窗口 -> 文件 -> 新建 -> Java 项目 -> 项目名称输入刚刚被复制的项目文件名 -> 完成**

记住配置你的源代码位置：

**项目 -> 属性 ->Java 构建路径 -> 源**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-24T04:22:57.853

如果这是一个 Maven 项目，那么您将找不到这些 .project 文件。因此，不要使用 import -> Existing project to Workspace，而是使用 Existing Maven Project。

[![在此处输入图像描述](../Images/d652e0dce807d5c2ece4905d51114bb6.png)](https://i.stack.imgur.com/kWmKT.png)

[![在此处输入图像描述](../Images/7d41361a911d31589a97b7141584add3.png)](https://i.stack.imgur.com/kQO9F.png)

# asp.net-mvc - 在 Azure 上发布 Web。操作可能会破坏 MVC3 中的运行时

> ID：14769457
> 
> 赞同：4
> 
> 时间：2013-02-08T09:31:07.623
> 
> 标签：asp.net-mvc, azure

我将我的 Web 项目发布到 Azure，当我在浏览器中将其拉起时，我看到了以下错误。当我将 Web ROLE 发布到 windows azure 时，我通过禁用 IntelliTrace 修复了相同的错误。但我找不到在发布网络设置中禁用它的位置。 [http://www.windowsazure.com/media/devcenter/dotnet/dev-net-getting-started-039.png](http://www.windowsazure.com/media/devcenter/dotnet/dev-net-getting-started-039.png)

[VerificationException：操作可能会破坏运行时。] FluentValidation.AbstractValidator`1..ctor() in c:\Projects\FluentValidation\src\FluentValidation\AbstractValidator.cs:36 Poll.Areas.Shared.Validators.Account.LogOnValidator.. D:\Code\Poll\Poll\Areas\Shared\Validators\Account\LogOnValidator.cs:15 中的 ctor()

[TargetInvocationException: 调用目标抛出异常。] System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0 System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +113 System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +232 System.Activator.CreateInstance(Type type, Boolean nonPublic) +83 System.Activator.CreateInstance （类型类型）+6 FluentValidation.Internal.InstanceCache.GetOrCreateInstance（类型类型，Func `2 factory) in c:\Projects\FluentValidation\src\FluentValidation\Internal\InstanceCache.cs:58 FluentValidation.Internal.InstanceCache.GetOrCreateInstance(Type type) in c:\Projects\FluentValidation\src\FluentValidation\Internal\InstanceCache.cs:37 FluentValidation.Attributes.AttributedValidatorFactory.GetValidator(Type type) in c:\Projects\FluentValidation\src\FluentValidation\Attributes\AttributedValidatorFactory.cs:48 FluentValidation.Mvc.FluentValidationModelValidatorProvider.GetValidators(ModelMetadata metadata, ControllerContext context) in c:\Projects\FluentValidation\src\FluentValidation.Mvc3\FluentValidationModelValidatorProvider.cs:75 System.Web.Mvc.<>c__DisplayClass7.<GetValidators>b__6(ModelValidatorProvider provider) +21 System.Linq.<SelectManyIterator>d__14`2.MoveNext() +234 System.Linq.d__14`2.MoveNext() +397 System.Web.Mvc.HtmlHelper.GetUnobtrusiveValidationAttributes(String name, ModelMetadata metadata) +297 System.Web.Mvc.Html.InputExtensions.InputHelper(HtmlHelper htmlHelper, InputType inputType, ModelMetadata metadata, String name, Object value, Boolean useViewData, Boolean isChecked, Boolean setId, Boolean isExplicitValue, IDictionary`2 htmlAttributes）+794 System.Web.Mvc.Html.InputExtensions.HiddenHelper（HtmlHelper htmlHelper，ModelMetadata 元数据，对象值，布尔 useViewData，字符串表达式，IDictionary `2 htmlAttributes) +124 System.Web.Mvc.Html.InputExtensions.HiddenFor(HtmlHelper`1 htmlHelper，表达式`1 expression, IDictionary`2 htmlAttributes）+90 System.Web.Mvc.Html。 InputExtensions.HiddenFor(HtmlHelper `1 htmlHelper, Expression`1 表达式) +54

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:50:25.313

我通过“启用包管理器还原”解决了这个问题。右键单击解决方案-> 启用包管理器还原

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:33:52.067

如果您认为它是 IntelliTrace，并且您已启用它，则可以通过以下方式禁用它：

*   右键单击您的云项目
*   选择发布
*   前往设置
*   先进的
*   （取消）选中“IntelliTrace”复选框

![IntelliTrace 禁用](../Images/fc5a182fc1a9571d6c9ad07a47c26e13.png)

此对话框仅在您为上下文菜单选择“发布”操作时可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T07:12:32.560

您可以通过查看异常堆栈的顶部并在高级设置中添加异常模块来继续使用 IntelliTrace。[在这里](http://ingeniarius.net/blog/azure-web-role-intelli-trace-castle-windsor-something-operation-destabilize-runtime-verificationexception/)解释。

# java - java中的盒型模式

> ID：14769458
> 
> 赞同：0
> 
> 时间：2013-02-08T09:31:19.780
> 
> 标签：java, for-loop

我想创建一个看起来像盒子的图案。

我尝试了每一个反射和镜子，但无法实现精确的循环。

它的盒子看起来像循环`String s="ROHIT";`

![在此处输入图像描述](../Images/3db0d6a9cbef50430b6cab80cf2d73c3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:49:43.140

这可以满足您的要求（想法是检查您的内部级别）：

```
public static void main(String[] args) {
    String s = "ROHIT";
    int size = s.length() * 2;
    for (int i = 0; i < size; i++) {
        for (int j = 0; j < size; j++) {
            if ((j > i && size - j > i) || (size - j > size - i && j >= size - i)) {
                print(s, i);
            } else {
                print(s, j);
            }
        }
        System.out.println("");
    }
}

private static void print(String s, int i) {
    if (i < s.length()) {
        System.out.print(s.charAt(i));
    } else {
        System.out.print(s.charAt(s.length() - i % s.length() - 1));
    }
} 
```

实际上，这更直观：

```
public static void main(String[] args) {
    String s = "ROHIT";
    int size = s.length() * 2;
    int max = s.length();
    for (int i = 0; i < size; i++) {
        for (int j = 0; j < size; j++) {
            int level = Math.min(normalize(i, max), normalize(j, max));
            System.out.print(s.charAt(level));
        }
        System.out.println("");
    }
}

private static int normalize(int i, int max) {
    return (i >= max) ? 2 * max - i - 1: i;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T09:51:15.160

```
int n = 2 * word.length();
for (int i = 0; i < n; ++i) {
    int iWord = i < word.length()? i : 2 * word.length() - 1 - i;
    for (int j = 0; j < n; ++j) {
        int jWord = j < word.length()? j : 2 * word.length() - 1 - j;
        int diagonal = Math.min(iWord, jWord);
        System.out.print(word.charAt(diagonal));
    }
    System.out.println();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T09:42:21.420

这是算法/伪代码

```
for(each row)
{
 if(firstrow) print total row;

else if(lastrow) print total row;
else {
  for (each column)
{
 if(firstcol) print col;
 if(lastcol) print col;
}
}
} 
```

# sts-springsourcetoolsuite - STS：在 Java 构建路径中丢失引用

> ID：14769460
> 
> 赞同：0
> 
> 时间：2013-02-08T09:31:24.257
> 
> 标签：sts-springsourcetoolsuite

我正在使用 Spring Source Tool Suite 2.8.1 来实现 Spring 应用程序。

我经常遇到构建错误，因为**引用无缘无故丢失**。在Package Explorer->Properties->Java Build Path->Order and Export中右键单击项目，我发现有时会取消选择项目。并且通常包在Package Explorer->Properties->Java Build Path->Deployment Assembly中的右键单击项目中消失了。

不得不经常重置这些设置令人沮丧。有什么办法可以解决这些问题吗？

* * *

我尝试将 STS 更新到最新版本，但升级过程失败并出现无法理解的错误消息。我想避免全新安装，因为再次设置环境可能是一场噩梦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:26:08.253

现在我知道这是一个 maven 项目，并且您自己添加了引用，这对我来说很有意义。STS 2.8.x 是与旧版 m2e（Eclipse 的 maven 插件）一起发布的最后一个 STS。它无法识别手动添加的构建路径条目（它喜欢完全控制类路径）。因此，可能发生的情况是您正在添加这些类路径条目，然后自动启动更新项目操作。这将具有删除所有额外类路径条目的效果。

您最好执行以下操作：

1.  升级 STS
2.  或者只是升级您的 m2e 组件（您必须先卸载旧的 m2e，但这应该从发现更新页面自动处理）。
3.  或者，只是接受您无法使用旧版 m2e 手动更改类路径的事实。

# batch-file - 批处理脚本不起作用 - 变量为空

> ID：14769461
> 
> 赞同：0
> 
> 时间：2013-02-08T09:31:28.460
> 
> 标签：batch-file

我有这个批处理脚本：

```
SET test = %TIME:~0,2%_%TIME:~3,2%_%TIME:~6,2%
SET testa = %date:.=_%
SET testb = %testa%%test%
Echo Datum:%testb% 
```

此脚本生成以下输出： SET test = 10_29_51

SET testa = 08_02_2013

设置测试b =

回波基准：

为什么变量testb突然为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:03:41.743

我认为是因为你的变量和值之间的空格。

```
SET test=%TIME:~0,2%_%TIME:~3,2%_%TIME:~6,2%
SET testa=%date:.=_%
SET testb=%testa%%test%
Echo Datum:%testb% 
```

现在应该可以了。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:39:22.417

你试过小写字母吗？

# iphone - 在本地通知中设置repeatInterval

> ID：14769462
> 
> 赞同：4
> 
> 时间：2013-02-08T09:31:30.123
> 
> 标签：iphone, ios, datepicker, uilocalnotification, repeat

我想将重复间隔设置为用户从日期选择器中选择的值。我的应用程序中有倒计时模式的日期选择器。如果用户从日期选择器中选择 4 小时 15 分钟，那么我将使用以下代码和警报响铃设置 firedate .

```
 [NSDate dateWithTimeIntervalSinceNow:[pickerTimer countDownDuration]] 
```

但我希望该通知应该每 4 小时 15 分钟后重复一次，直到用户取消它。我做了很多研发搜索，但我无法弄清楚。到目前为止我使用的代码是：

```
localNotification = [[UILocalNotification alloc] init]; 
[localNotification setFireDate:[NSDate dateWithTimeIntervalSinceNow:[pickerTimer countDownDuration]]]; 

if(localNotification.fireDate){

    [self _showAlert:@"Time is scheduled" withTitle:@"Daily Achiever"];
}
localNotification.timeZone = [NSTimeZone systemTimeZone];

localNotification.alertBody=@"alaram";
localNotification.soundName = UILocalNotificationDefaultSoundName;
[localNotification setAlertAction:@"View"];
[localNotification setRepeatInterval:[pickerTimer countDownDuration]];

//The button's text that launches the application and is shown in the alert
// [localNotification setAlertBody:[alertBodyField text]]; //Set the message in the notification from the textField's text
//[localNotification setHasAction: YES]; //Set that pushing the button will launch the application
[localNotification setApplicationIconBadgeNumber:[[UIApplication sharedApplication] applicationIconBadgeNumber]]; //Set the Application Icon Badge Number of the application's icon to the current Application Icon Badge Number plus 1

  localNotification.applicationIconBadgeNumber = 1;

localNotification.repeatInterval=NSHourCalendarUnit;

[[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; //Schedule the notification with the system

//[alertNotification setHidden:NO]; //Set the alertNotification to be shown showing the user that the application has registered the local notification 
```

请帮我解决。提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:12:32.030

我们不能在 中设置自定义`repeatInterval`值`UILocalNotification`。

最简单的方法是`localNotification` 每 4.25 小时创建一个新的并复制现有通知的详细信息并在处理本地通知时将其删除。

`firedate`另一种方法是在处理本地通知时更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:46:05.760

我已经使用以下代码解决了这个问题：

```
-(void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif {

testDate=notif.fireDate;
NSLog(@"Recieved Notification %@",notif);
[self playSoundWithNotification:notif];
[self _showAlert:@"Alaram" withTitle:@"Daily Achiever"];
 }

-(void)_showAlert:(NSString*)pushmessage withTitle:(NSString*)title
{

UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:title message:pushmessage delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

[alertView show];

if (alertView) {
    FocusViewController *fvc=[[FocusViewController alloc]initWithNibName:@"FocusViewController" bundle:nil];

    [fvc insert:[NSDate dateWithTimeInterval:refTimeIntrval sinceDate:testDate]];

}} 
```

这里 testDate 和 refTimeInterval 是在 .pch 文件中声明的变量。

# php - CForm 及其行为没有名为“beginWidget”的方法或闭包

> ID：14769464
> 
> 赞同：2
> 
> 时间：2013-02-08T09:31:32.697
> 
> 标签：php, yii

我在使用 Yii Fraework 方面非常陌生，我正在尝试使用来自 Yii Framework 的博客演示中的联系表单演示中的骨架来实现自定义表单。我做了与相应表单几乎完全相同的视图、控制器和模型，只是我得到以下 500 错误：

```
Error 500 
CForm and its behaviors do not have a method or closure named "beginWidget". 
```

这里是： 控制器：

```
<?php
    class CustomController extends Controller {

        public function actionSubmit()
        {
            $model = new CustomForm;
            $form = new CForm('application.views.custom._form', $model);
            $this->pageTitle = "ffffffffffff";//['title'] = "Authentication";
            if($form->submitted('submit') && $form->validate())
                $this->redirect(array('blog/index'));
            else
                $this->render('_form', array('form'=>$form));
        }

        public function getGenders()
        {
            return array(
                0 => 'Male',
                1 => 'Female');
        }
    }
?> 
```

该模型：

```
<?php

    class CustomForm extends CFormModel {
        public $firstName;
        public $LastName;
        public $phone;
        public $address;
        public $gender;
        public $email;

        public function rules()
        {
            return array(
                    array('firstName, lastName, gender', 'required'),
                    array('email', 'email')
                );
        }
    }
?> 
```

风景：

```
<?php
$this->pageTitle=Yii::app()->name . ' - Custom Form';
$this->breadcrumbs=array(
    'Custom Form',
);
?>

<h1>Custom Form</h1>

<?php if(Yii::app()->user->hasFlash('custom')): ?>

<div class="flash-success">
    <?php echo Yii::app()->user->getFlash('custom'); ?>
</div>

<?php else: ?>

<p>
If you have business inquiries or other questions, please fill out the following form to contact us. Thank you.
</p>

<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'custom-form',
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'firstName'); ?>
        <?php echo $form->textField($model,'firstName'); ?>
    </div>
    <div class="row">
        <?php echo $form->labelEx($model,'lastName'); ?>
        <?php echo $form->textField($model,'lastName'); ?>
    </div>
    <div class="row">
        <?php echo $form->labelEx($model,'email'); ?>
        <?php echo $form->textField($model,'email'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'phone'); ?>
        <?php echo $form->textField($model,'phone',array('size'=>60,'maxlength'=>128)); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'gender'); ?>
        <?php echo $form->radioButton($model,'gender',array('value'=>'Male')) . 'Male'; ?>
        <?php echo $form->radioButton($model,'gender',array('value'=>'Female')) . 'Female'; ?>
        <?php echo $form->error($model,'gender'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'address'); ?>
        <?php echo $form->textArea($model,'address',array('rows'=>6, 'cols'=>50)); ?>
    </div>

    <div class="row submit">
        <?php echo CHtml::submitButton('Submit'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form -->

<?php endif; ?> 
```

任何想法为什么我会收到此错误？我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:25:44.210

CForm 表示一个包含表单输入规范的表单对象。

您正在将视图文件作为参数传递给不起作用的 CForm。

我想这条线不需要：

```
$form = new CForm('application.views.custom._form', $model); 
```

请检查它是否有效:)

# mysql - MySQL .NET 连接器包

> ID：14769467
> 
> 赞同：0
> 
> 时间：2013-02-08T09:31:41.297
> 
> 标签：mysql, mono, rpm, opensuse

我有一些项目直接或通过 NHibernate 使用 MySQL Connector for .NET。

非常简单的问题：为了避免`Mysql.Data.dll`在每个项目中维护程序集并与上游开发保持同步，是否有人为 openSUSE 提供维护的 MySQL Connector for .NET/Mono 包？

它会通过 YaST 就好了。

如果“还没有”是答案，我会简单地`gacutil -i Mysql.Data.dll`以 root 身份进行。但是 RPM 可能会更好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-02T09:02:23.427

截至 2014 年 12 月，[存在](http://www.rpmfind.net/linux/rpm2html/search.php?query=mono%28MySql.Data%29)一个连接器 RPM ，但尚未在官方 Yast 分发存储库中提供。也许在一个单独的社区存储库中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:24:55.250

还没有人 :-) 至少[http://software.opensuse.org/](http://software.opensuse.org/)没有列出任何包，这通常非常详尽。

# serialization - KnowledgeAgent 可以用来自动将 KnowledgeBase 写入文件，以便在外部使用吗？

> ID：14769471
> 
> 赞同：0
> 
> 时间：2013-02-08T09:31:58.190
> 
> 标签：serialization, resources, drools, knowledge-management, guvnor

我正在做一个小小的drools项目，我遇到了以下问题：

-当我通过knowledgeAgent从drools读取知识包时，加载需要很长时间
（（现在我知道一般来说构建知识库，尤其是在从guvnor非常激烈））

*   所以我试图将知识库序列化为位于系统本地的文件
    - 一方面因为从本地文件加载 kBase 要快得多
    - 另一方面，我可以将知识库用于其他应用程序
    的问题是，在第一次使用知识代理加载知识库时，代理会自动更新

    基础但是：当基础更新时，我的本地文件也不会更新
    所以我想知道如何从我的 KnowledgeAgent 处理/获取 changeNotification 以便我可以调用一个方法来序列化我的 KnowledgeBase ？

    **这有可能吗？基本上我只想更新我的本地知识库文件，每次有人在州长中编辑规则，以便我的本地文件始终是最新的。

    如果这是不可能的，或者一开始是一个非常糟糕的解决方案，那么推荐/最好的方法是什么？**

    请忍受我的英语和问题本身，如果你不能真正弄清楚我想要完成什么，或者我的要求实际上不是一个好的解决方案，或者问题本身是多余的，我对 java 相当陌生，而且在谈到流口水。

下面是代码：

公共类 DroolsConnection {

```
private static KnowledgeAgent kAgent;
private static KnowledgeBase  kAgentBase;

public DroolsConnection(){
     ResourceFactory.getResourceChangeNotifierService().start();
     ResourceFactory.getResourceChangeScannerService() .start();

} 

public KnowledgeBase readKnowledgeBase( ) throws Exception {

     kAgent     = KnowledgeAgentFactory.newKnowledgeAgent("guvnorAgent");
     kAgent      .applyChangeSet( ResourceFactory.newFileResource(CHANGESET_PATH));
     kAgent.monitorResourceChangeEvents(true);

     kAgentBase = kAgent.getKnowledgeBase();
     serializeKnowledgeBase(kAgentBase);
     return kAgentBase;

   }

 public List<EvaluationObject> runAgainstRules( List<EvaluationObject> objectsToEvaluate,
                                                KnowledgeBase kBase ) throws Exception{

    StatefulKnowledgeSession knowSession = kBase.newStatefulKnowledgeSession();
    KnowledgeRuntimeLogger knowLogger    = KnowledgeRuntimeLoggerFactory.newFileLogger(knowSession, "logger");

    for ( EvaluationObject o : objectsToEvaluate ){
        knowSession.insert( o );
    }

    knowSession.fireAllRules();
    knowLogger .close();
    knowSession.dispose();
    return objectsToEvaluate;
 }

 public KnowledgeBase serializeKnowledgeBase(KnowledgeBase kBase) throws IOException{

        OutputStream outStream = new FileOutputStream( SERIALIZE_BASE_PATH );
        ObjectOutputStream oos = new ObjectOutputStream( outStream );
        oos.writeObject        ( kBase );
        oos.close();
        return kBase;
 }

 public KnowledgeBase loadFromSerializedKnowledgeBase() throws Exception {

        KnowledgeBase kBase   = KnowledgeBaseFactory.newKnowledgeBase(); 
        InputStream is        = new FileInputStream( SERIALIZE_BASE_PATH );
        ObjectInputStream ois = new ObjectInputStream( is );
        kBase                 = (KnowledgeBase) ois.readObject();
        ois.close();
        return kBase;
 } 
```

}

提前感谢您的帮助！
最好的问候，
马连科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:01:57.590

为了保持本地 kbase 更新，您可以使用 KnowledgeAgentEventListener 来了解其内部 kbase 何时更新：

```
 kagent.addEventListener( new KnowledgeAgentEventListener() {

        public void beforeChangeSetApplied(BeforeChangeSetAppliedEvent event) {
        }

        public synchronized void afterChangeSetApplied(AfterChangeSetAppliedEvent event) {
        }

        public void beforeChangeSetProcessed(BeforeChangeSetProcessedEvent event) {
        }

        public void afterChangeSetProcessed(AfterChangeSetProcessedEvent event) {
        }

        public void beforeResourceProcessed(BeforeResourceProcessedEvent event) {
        }

        public void afterResourceProcessed(AfterResourceProcessedEvent event) {
        }

        public void knowledgeBaseUpdated(KnowledgeBaseUpdatedEvent event) {
            //THIS IS THE EVENT YOU ARE INTERESTED IN 
        }

        public void resourceCompilationFailed(ResourceCompilationFailedEvent event) {               
        }
    } ); 
```

不过，您仍然需要处理本地 kbase 上的并发访问。

顺便说一句，由于您没有使用“newInstance”配置选项，因此每次应用变更集时，代理都会创建一个新的 kbase 实例。因此，请确保序列化 kagent 的内部 kbase (kagent.getKnowledgeBase())，而不是应用程序中的引用。

希望能帮助到你，

# jquery - 谷歌分析自定义变量点击

> ID：14769473
> 
> 赞同：0
> 
> 时间：2013-02-08T09:32:03.683
> 
> 标签：jquery, google-analytics

我正在尝试在点击时向 Google Analytics 触发自定义变量。我有一个网页，它有不同的语言，我的客户希望在点击时有一个自定义的变量记录。（点击只是隐藏和显示 div）。页面不会重新加载。我建议最好的解决方案是跟踪事件，但是他们不想要这个解决方案。

```
<script type="text/javascript">
         var _gaq = _gaq || [];
             _gaq.push(['_setAccount', 'UA-21556445-2']);
             _gaq.push(['_trackPageview', '/fpc/e-brochure-circle']);
             _gaq.push(['_setAllowLinker', true]);

         $('.lang').live('click', function (event, ui) {
             try {
                 var language = $(this).attr('data-language');
                 _gaq.push(['_setCustomVar', 5, 'content_language', '' + language + '', 3]); // change language value accordingly
                 _gaq.push(['_trackPageview', '/fpc/e-brochure-circle']);
             } catch (err) { }
         });

         (function () {
             var ga = document.createElement('script');
             ga.type = 'text/javascript';
             ga.async = true;
             ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
             var s = document.getElementsByTagName('script')[0];
             s.parentNode.insertBefore(ga, s);
         })();
    </script> 
```

是否可以在同一页面上多次触发自定义变量。使用 Firebug，我可以看到代码正在运行并且语言被正确输入。它只是不会出现在谷歌分析中。

任何有助于这项工作的帮助都会很棒。

非常感谢史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:01:18.537

您的代码对我来说看起来不错，我试了一下并看到它正确触发。所以这里有一些事情可能会有所帮助：

1.  您等了多长时间才在报告中查找数据？GA 官方声明数据可能需要 24 小时以上才能显示出来。通常，页面视图等基本数据会在一两个小时内显示出来，但根据我的经验，自定义变量数据需要更长的时间。
2.  您确定您指向正确的帐户/个人资料吗？我知道这可能是一个愚蠢的问题，但只是涵盖了基础......
3.  配置文件上是否有任何过滤器可能会更改或删除数据？
4.  您是否正在使用正确的指标查看正确的报告？您正在使用带有页面视图范围的插槽 #5。这意味着数据只会与该特定页面相关联。因此，也许您正在查看一般内容报告，但由于您设置的范围而没有看到任何数据。
5.  您是否将自定义 var #5 用于其他用途？根据您是否将它用于其他任何事情以及您在其他地方使用它的范围，该值可能会被覆盖
6.  您的 GA 实施的请求量有多大？GA 对每次访问需要的请求数量有限制。也许您在触发之前已经达到了这个限制。我怀疑这是你的测试命中的问题，但同样，只是把它扔在那里......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T07:00:31.820

trackpageview 代码错误。代替：

```
_gaq.push(['_trackPageview', '/fpc/e-brochure-circle']); 
```

利用：

```
 _gaq.push(['_trackPageview'], '/fpc/e-brochure-circle'); 
```

# jquery - jQuery 文件浏览器

> ID：14769475
> 
> 赞同：1
> 
> 时间：2013-02-08T09:32:32.337
> 
> 标签：jquery, html

我想仅使用 HTML 和 Jquery 实现 Jquery 文件浏览器。我一直在浏览各种 jquery 插件，但找不到一个只能使用 HTML/Jquery（无服务器端连接器）的插件。我已经浏览了[http://www.jquery4u.com/plugins/10-jquery-file-manager-plugins/](http://www.jquery4u.com/plugins/10-jquery-file-manager-plugins/)。

任何帮助/建议都会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:22:59.547

这是不可能的。浏览器不允许您在本地 m/c 中获取文件的正确路径，特别是在 IE 和 Safari 中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-17T10:23:32.500

只有 HTML/JS 是不够的，你需要一些服务器端，试试 elFinder， [www.elfinder.org](http://elfinder.org/)

# php - 为什么我的 RegEx 仅在我包含一些额外字符时才结束？

> ID：14769482
> 
> 赞同：1
> 
> 时间：2013-02-08T09:32:57.473
> 
> 标签：php, regex, parsing, preg-match

好的，假设我正在尝试解析：

```
href="http://google.com">Website</a> 
```

这不起作用：

```
preg_match('/href="http:\/\/(.+)">/', $a, $b); 
```

但这确实：

```
preg_match('/href="http:\/\/(.+)">Website/', $a, $b); 
```

为什么是这样？第一个只是一直到字符串的末尾。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T09:37:40.310

## 贪心选择器

这里的问题是你的选择器是贪婪的 - 它会匹配它可以匹配的最长的字符串：

```
preg_match('/href="http:\/\/(.+)">/', $a, $b); 
```

由于您使用“任何字符”（`.`），因此它一直匹配到`">`输入字符串中最后一次出现该字符为止。

## 非贪心选择器

如果您使选择器不贪婪，那么它将在最短的匹配中停止：

```
preg_match('/href="http:\/\/(.+?)">/', $a, $b); 
```

请注意正则表达式模式中的额外`?`内容，它将“一个或多个” ( `+`) 运算符修改为非贪婪的。

[`u`您还可以使用修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)使所有选择器默认为非贪婪：

```
preg_match('/href="http:\/\/(.+)">/u', $a, $b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:34:57.480

这是我用来测试它的最好的 href 解析器

```
 preg_match("#href=[\"|']([^\"]*)[\"|']#",' '.$a.' ',$b); 
```

# ios - 在上传到应用商店之前将数据预添加到应用钥匙串

> ID：14769486
> 
> 赞同：0
> 
> 时间：2013-02-08T09:32:58.340
> 
> 标签：ios, keychain

我可以在发货之前在应用钥匙串中添加一些秘密吗？如果是，正确的方法是什么？

沙尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:16:06.243

不。

钥匙串在应用程序运行时被访问，因此在应用程序发布之前你不能做任何事情。您可以在应用程序首次运行时添加您的秘密，但应用程序必须先上传并可供用户使用，然后才能执行此操作。

查看[钥匙串编程指南](https://developer.apple.com/library/mac/#documentation/security/Conceptual/keychainServConcepts/01introduction/introduction.html#//apple_ref/doc/uid/TP30000897-CH203-TP1)。

# android - Android 在 Galaxy S3 上内存不足，但在 HTC Desire S 上没有

> ID：14769492
> 
> 赞同：0
> 
> 时间：2013-02-08T09:33:20.287
> 
> 标签：android

我刚买了三星 Galaxy S3，还有 HTC Desire S。我的应用程序几乎完成了，它在 HTC Desire S 上运行良好。问题在于我的 S3 - 执行任务时出现内存不足错误。它第一次通过，但每次下一次执行都会使应用程序崩溃（由于错误-12，无法分配大小为 2097152 的 cursorWindow（数据库/baza ....））

我的线程：

```
 private class nalozi_statistiko_igralca extends AsyncTask<Void, Integer, Void> {

  protected Void doInBackground( Void... ignoredParams ) {

      publishProgress();
      vpisi_statistiko_igralca_update();
        cursor_statistika_igralca_tocke = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_domaci_kopija+ " ORDER BY tocke DESC", null);

        cursor_statistika_igralca_tocke_gosti = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_gosti_kopija+" ORDER BY tocke DESC", null);

        cursor_statistika_igralca_asistence = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_domaci_kopija+ " ORDER BY asistence DESC", null);

        cursor_statistika_igralca_asistence_gosti = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_gosti_kopija+ " ORDER BY asistence DESC", null);

        cursor_statistika_igralca_obrambni_skoki = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_domaci_kopija+ " ORDER BY defensive_rebounds DESC", null);

        cursor_statistika_igralca_obrambni_skoki_gosti = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_gosti_kopija+ " ORDER BY defensive_rebounds DESC", null);

        cursor_statistika_igralca_napadalni_skoki = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_domaci_kopija+ " ORDER BY offensive_rebounds DESC", null);

        cursor_statistika_igralca_napadalni_skoki_gosti = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_gosti_kopija+ " ORDER BY offensive_rebounds DESC", null);

        cursor_statistika_igralca_ukradene_zoge = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_domaci_kopija+ " ORDER BY steals DESC", null);

        cursor_statistika_igralca_ukradene_zoge_gosti = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_gosti_kopija+ " ORDER BY steals DESC", null);

        cursor_statistika_igralca_blokade = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_domaci_kopija+ " ORDER BY blocks DESC", null);

        cursor_statistika_igralca_blokade_gosti = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_gosti_kopija+ " ORDER BY blocks DESC", null);

        cursor_statistika_igralca_izgubljene_zoge = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_domaci_kopija+ " ORDER BY turnovers DESC", null);

        cursor_statistika_igralca_izgubljene_zoge_gosti = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_gosti_kopija+ " ORDER BY turnovers DESC", null);

        cursor_statistika_igralca_osebne = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_domaci_kopija+ " ORDER BY fouls DESC", null);

        cursor_statistika_igralca_osebne_gosti = baza5.rawQuery("SELECT * FROM player_stats" +
                " WHERE id_seznam_iger LIKE "+id_seznam_iger+ " AND id_ekipe LIKE "+ id_izbrane_ekipe_gosti_kopija+ " ORDER BY fouls DESC", null);

             return null; 
  }

  protected void onPostExecute( Void array )
  {
    if(nalozi_statistiko_igralca_ali_upload==0)
    {
      pokazi_statistiko_igralca(view);
      pokazi_statistiko_igralca_tocke2(view);
    }
    if(nalozi_statistiko_igralca_ali_upload==1)
    {
        naredi_pdf_izvrsi(view);
    }
    if(nalozi_statistiko_igralca_ali_upload==2)
    {
        pokazi_mvp_domaci(domaci_top_efficiency_id);
    }
    if(nalozi_statistiko_igralca_ali_upload==3)
    {
        pokazi_mvp_gosti(gosti_top_efficiency_id);
    }
  }

  protected void onProgressUpdate(Integer... values)
  {
      Context context = getApplicationContext();
      int duration = Toast.LENGTH_SHORT;
      Toast toast = Toast.makeText(context,  getString(R.string.toast_loading), duration);
      toast.show();

    }

}

public void vpisi_statistiko_igralca_update()
{
    Cursor cursor_ekipa_domaci;

    //list_home = (ListView) findViewById (R.id.list_home);
    //cursor2 = baza5.query("igralci", null, null, null, null, null,"_id" + " ASC");
    cursor_ekipa_domaci = baza5.query("igralci_kopija",null, 
            "id_ekipe like " + id_izbrane_ekipe_domaci_kopija,
            null, null, null, null);

    while (cursor_ekipa_domaci.moveToNext())
    {
        String a=cursor_ekipa_domaci.getString(0);
        update_statistiko_igralca((Integer.valueOf(a)),
                cursor_ekipa_domaci.getString(1),
                cursor_ekipa_domaci.getString(2));
    }

    Cursor cursor_ekipa_gosti;

    //list_home = (ListView) findViewById (R.id.list_home);
    //cursor2 = baza5.query("igralci", null, null, null, null, null,"_id" + " ASC");
    cursor_ekipa_gosti = baza5.query("igralci_kopija",null, 
            "id_ekipe like " + id_izbrane_ekipe_gosti_kopija,
            null, null, null, null);
    while (cursor_ekipa_gosti.moveToNext())
    {
        String a=cursor_ekipa_gosti.getString(0);
        update_statistiko_igralca((Integer.valueOf(a)),
                cursor_ekipa_gosti.getString(1),
                cursor_ekipa_gosti.getString(2));
    }
} 
```

繁重的工作在函数“vpisi_statistiko_igralca_update”中完成。我想知道 Galaxy S3 是否将数据保存在内存中，但 HTC Desire S 不...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:31:22.350

我想通了！！

当我不再需要它们时，我需要关闭我的光标。（我需要关闭大约 100 个不同的游标）。

(cursor.close());

# jquery - Jquery：如何将属性 disabled="disabled" 添加到选择表单的选项中？

> ID：14769493
> 
> 赞同：-5
> 
> 时间：2013-02-08T09:33:21.513
> 
> 标签：jquery

我有一个表单`<select>`元素。如果文本（显示为选项）不以“-”开头，则此选择有`<options>`我需要使用 jquery 来遍历所有`<options>`并添加属性`disabled="disabled"`

看看图片，看看我的意思。

[图片链接](http://content.screencast.com/users/chefnelone/folders/Snagit/media/3ef50377-79b7-4b9c-828c-bcc0c7d66ffe/2013-02-08_10-28-21.jpeg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:40:17.803

只需检查文本零`index`处的字符是否`-`存在

**[现场演示](http://jsbin.com/atetoc/4/edit)**

```
$('#selID option').each(function(){ 
   if($(this).text()[0] != '-') 
         this.disabled=true;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:38:13.930

```
$("select").find("option").each(function(i,e) {

          var t=$(e).text();
          if (t.replace(/^\-/,'')==t) e.disabled=true;
           }); 
```

编辑 0 索引实际上更好，但 e.disabled 更符合浏览器；& 查找速度更快

所以

```
 $("select").find("option").each(function(i,e) {

          var t=$(e).text()['0'];
          if (t!=='-') e.disabled=true;
           }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:39:07.500

```
$("YourSELECT options").each(function(){
  if(!$(this).html().startsWith("-"))
  {
      $(this).attr("disabled","true");
  }
});

String.prototype.startsWith = function(str) 
{return (this.match("^"+str)==str)} 
```

# php - 如何突出显示动态创建的菜单中的项目？

> ID：14769494
> 
> 赞同：1
> 
> 时间：2013-02-08T09:33:28.487
> 
> 标签：php, jquery, dynamic

我让 PHP 根据 mysql 数据库中的行数创建一个菜单。

这是 PHP 行：

```
print "<a href='diensten2.php?id={$row2['blog_id']}'>{$row2['navigatie']}</a>"; 
```

因此，每个菜单项都链接到具有相同菜单的新动态页面。但我希望所选菜单项具有不同的颜色（突出显示）。我用 javascript 和 PHP 尝试了一些东西，但我需要一些帮助，因为我猜我的知识太有限了。

谁能把我引向正确的方向？谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T09:38:07.220

如果你通过 url 传递相同的变量 - 你可以尝试做这样的事情 -

```
<a href='diensten2.php?id={<?php echo $row2['blog_id'] ?>}' <?php if($_GET['id'] == $row['blog_id']) { ?>class='active'<?php } ?>>{<?php echo $row2['navigatie'] ?>}</a>; 
```

将所有这些链接放在一个公共包含文件中。还要添加一个 CSS 代码来突出显示 .active 类。

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:39:07.750

假设您要突出显示链接到 ID 等于指定行 ['blog_id'] 的页面的 URL，您将必须检查每个动态链接，并为其分配一个突出显示类，可能是这样的：

```
if(isset($_GET["id"]) && $_GET["id"] == $row2["blog_id"])
    print "<a href='diensten2.php?id={$row2['blog_id']}' class=\"highlighted\">{$row2['navigatie']}</a>";

else
    print "<a href='diensten2.php?id={$row2['blog_id']}'>{$row2['navigatie']}</a>"; 
```

# mysql - 从 MySql 到 NoSql

> ID：14769495
> 
> 赞同：2
> 
> 时间：2013-02-08T09:33:33.663
> 
> 标签：mysql, mongodb, nosql

## 我现在用 Mysql 得到了什么

这是我的数据库：

![在此处输入图像描述](../Images/b1b4e6863a12b9548ca318072962298c.png)

我使用边界框按位置搜索用户。

还有两个表：user_tag 和 tags。整个数据库大小约为**1 Gb**。

我已经用这些表实现了一个任意标签系统，所以当用户想要使用尚未创建的标签时，这个标签被插入到标签表中。

我还按标签搜索用户。

**基准**

除了主键上的索引外，我在这个数据库中没有索引。

正如你所看到的，有很多插入，它们需要很长时间。

这里的主要问题是耗时的插入和更新。

使用标签创建新事件（~150ms）：

[http://pastebin.com/vyw6qhrN](http://pastebin.com/vyw6qhrN)

更新事件（~200ms）：

[http://pastebin.com/f28yvn9z](http://pastebin.com/f28yvn9z)

**我不喜欢这个解决方案：**

1.  当我创建新用户时，我会插入 3 个表以将用户与他的标签链接起来。
2.  更新用户信息时，我还需要在用户更改标签时进行 3 次更新和 1 次删除或插入。
3.  通过标签搜索用户变得非常混乱（复杂查询）（[如何实现标签系统](https://stackoverflow.com/questions/1810356/how-to-implement-tag-system)）

## 我能用 NoSql 得到什么

我想使用**面向文档的数据库**。然后我只需要一个集合：

```
{
"name": "Dan",
"lat": 60
"lon": 30
"tags":["football", "fishing"]  
} 
```

我将能够在**标签**和**lat**和**lon**上设置索引以加快搜索速度。

## 我的问题

1.  我应该切换到 NoSql 还是我可以以某种方式改进我当前的实现。或者也许切换到不同的**RDBMS**？
2.  如果我应该切换：在这种情况下哪个 NoSql 数据库是最好的？
3.  如果我应该切换到**MongoDb**：它是否足够可靠和成熟？因为我读过很多关于人们离开**MongoDb**的帖子。例如：[http ://www.reddit.com/search?q=mongodb](http://www.reddit.com/search?q=mongodb)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:18:24.060

这两种技术都可以解决您的问题。有些场景使用 RDBMS 更容易处理，而另一些场景则使用更专业的数据库。这取决于您的要求、您的经验和您的个人喜好的详细信息。

@mvp 评论了“SQL 的便利性”。就个人而言，我发现 SQL 是一个主要的痛点，因为面向对象和 SQL 不容易映射。人们经常使用他们的 ORM 庞然大物，我发现这是一种反模式——ORM 代码大小可能是你拥有的整个应用程序代码的 50 倍以上，所以有些东西很可疑。但这只是我的看法，SQL 可能仍然是最常见的数据存储。

就个人而言，我觉得你的问题很好地映射到 MongoDB，因为

*   它具有地理索引并支持各种地理查询
*   如果您需要的话，创建*简单的*标记非常容易
*   这很容易，处理几 GB 的数据也很容易。
*   这很容易管理。我不需要`innodb_buffer_pool_size`在那种规模上插手什么。
*   连接被高估了。需要连接，因为您拆分了属于一起的数据以将其压缩到表中。如果您想找到诸如“喜欢足球并且住在 foo 中的用户也喜欢？”之类的问题的答案，聚合框架和缓存比巨大的连接更容易且更具可扩展性。

如果我是你，我会坐下来一两天试一试：你有一个合理大小的数据集，所以你可以用真实世界的数据进行测试，并且只改变几个查询应该很容易。这会很有趣，你会亲身体验到优点和缺点。

顺便说一句，reddit 上的三篇文章相互引用：pastebin 上的“不要使用 MongoDB”、news.ycombinator.com 上的 Eliot Horowitz 的回答和“MongoDB 的故事是个骗局”，所以不，MongoDB 没有'不仅仅是随机崩溃并且有无数的错误。但是，当然，它不是神奇地使缩放问题消失的灵丹妙药。

# java - 如何在 iReport 中显示印度编号格式？

> ID：14769499
> 
> 赞同：2
> 
> 时间：2013-02-08T09:33:49.667
> 
> 标签：java, jasper-reports, ireport

我正在使用 iReports 生成报告。我想以印度编号格式显示 GrandTotal 字段。例如，

```
Value: 1,000,000 should be displayed as 10,00,000 
```

我尝试使用文本字段属性的模式，但无法获得结果。在一些论坛中，他们提到使用 JRParameter.REPORT_LOCALE。我试过这种方式

```
Locale locale = new Locale("en", "IN");
parameters.put(JRParameter.REPORT_LOCALE, locale); 
```

其中参数是一张地图，然后用于填写报告。

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:51:29.683

如果您使用 [ICU4J](http://site.icu-project.org/)，您可以执行类似的操作

`com.ibm.icu.text.NumberFormat.getCurrencyInstance(new Locale("en", "in")).format(new Java.math.BigDecimal(${FIELD_HOLDING_THE_VALUE}));`

ICU4J 的 NumberFormat 在[此](https://stackoverflow.com/a/5379337/1767366)线程中进行了解释

# html - 提交带有下拉列表的表单不起作用

> ID：14769505
> 
> 赞同：0
> 
> 时间：2013-02-08T09:33:58.320
> 
> 标签：html, forms, list, drop-down-menu, submit

我想在同一页面上发布一些信息。但是当我的表单中有下拉列表时，它不会提交值。

当我从表单中删除下拉列表时，可以提交表单。

那是我的 HTML 代码：

```
<?php
     echo '<form enctype="multipart/form-data" action="'.htmlentities($_SERVER['PHP_SELF']).'" method="post">';
?>
<label for="file">File:</label>
<input type="file" name="uploadfile[]" id="uploadfile" multiple="" /><br>
Speicherordner:
<select id="selectfolder" name="selectfolder" style="width: 250px">
<option value="/">1 - dir ("/..")</option>
<option value="dir1/">2 - dir ("/dir2/..")</option>
<option value="dir2/">3 - dir ("/dir3/..")</option>
<option value="dir3/">4 - dir ("/dir4/..")</option>
<option value="dir4/">5 - dir ("/dir5/..")</option>
<option value="dir5/">6 - dir ("/dir6/..")</option>
<option value="dir6/">7 - dir ("/events/..")</option>
<option value="dir7/">8 - dir ("/dir7/..")</option>
<option value="dir8/">9 - dir ("/dir8/..")</option> 
```

```
<input type="submit" name="submit1" value="Upload"> 
```

那是我的php代码：

```
if(isset($_POST['submit1'])) {
  echo '<div id="hidden" style="display:block">';
  $serv=$_POST["selectfolder"]; 
  echo "hallo";
  echo $serv;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:42:20.117

您的提交按钮肯定应该在表单标签内吗？如果这不起作用，请尝试从 DDL 值中删除“/”...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:44:43.710

提交按钮应该在标签内。还，

```
<form enctype="multipart/form-data" action="<?php echo $_SERVER['PHP_SELF']); ?>" method="post"> 
```

`<form>`比回显标签要好得多

# web-services - 使用 wsdl 的 Perl Soap 服务

> ID：14769508
> 
> 赞同：2
> 
> 时间：2013-02-08T09:34:25.357
> 
> 标签：web-services, perl, wsdl, soap-client, soapserver

我正在尝试使用 SOAP::Lite 创建 SOAP 服务，但它不返回值。它在 soap_client.pl 第 6 行的 print 中给出了错误使用未初始化值 $result。

```
<VirtualHost 192.168.1.187:80>
 ServerName perl.qlc.net
 ServerAlias www.perl.qlc.net
 DocumentRoot /web/perl.qlc.net/htdocs
 ErrorLog /var/log/httpd/perl.qlc.net_error_log
 TransferLog /var/log/httpd/perl.qlc.net_access_log
      <Directory "/web/perl.qlc.net/htdocs">
        <FilesMatch "\.mhtml$|\.pl$|\.html$">
                Options         +ExecCGI
                AddHandler      cgi-script .cgi .pl .html
                SetHandler      perl-script
                PerlHandler     ModPerl::Registry
                PerlSendHeader  On
        </FilesMatch>
      </Directory>
 DirectoryIndex index.phtml index.htm index.html index.php3 index.php
</VirtualHost> 
```

**安装的 perl 模块：**

```
MIME::Parser
SOAP::Lite 
```

**阿帕奇模块：**

```
mod_perl 
```

**肥皂服务器：math.pl**

```
#!/usr/bin/perl -w
use strict;
#use warnings;
use SOAP::Lite;
use SOAP::Transport::HTTP;

print "Content-type:text/xml\r\n\r\n";
#I have added above line because apache was throwing 500 error.

my $soap = SOAP::Transport::HTTP::CGI->new(
    dispatch_to => 'Arithmetic'
);
$soap->handle(); 

package Arithmetic;
sub add {
        return $_[1] + $_[2];
}
1; 
```

**肥皂客户端：soap_client.pl**

```
#!/usr/bin/perl -w
#use SOAP::Lite +trace =>'debug';
use SOAP::Lite;
my $result = 0;
my $client = SOAP::Lite->service("http://perl.qlc.net/math.wsdl");
print $result = $client->add(10, 20); 
```

**wsdl 文件：math.wsdl**

```
<?xml version="1.0"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://perl.qlc.net/math.wsdl" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="HelloService" targetNamespace="http://perl.qlc.net/math.wsdl">
<message name="addRequest">
    <part name="operand1" type="xsd:float" />
    <part name="operand2" type="xsd:float" />
</message>
<message name="addResponse">
    <part name="response" type="xsd:float" />
</message>
<portType name="Hello_PortType">
    <operation name="add">
        <input message="tns:addRequest"/>
        <output message="tns:addResponse"/>
    </operation>
</portType>
<binding name="Hello_Binding" type="tns:Hello_PortType">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="add">
        <soap:operation soapAction="add"/>
        <input>
            <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:examples:helloservice" use="encoded"/>
        </input>
        <output>
        <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:examples:helloservice" use="encoded"/>
        </output>
    </operation>
</binding>
<service name="Hello_Service">
<documentation>WSDL File for HelloService</documentation>
<port binding="tns:Hello_Binding" name="Hello_Port">
    <soap:address location="http://perl.qlc.net/math.pl"/>
</port>
</service>
</definitions> 
```

当我运行soap_client.pl时，它给了我以下错误：在soap_client.pl第6行打印中使用未初始化的值$result。我已经尝试了2天，没有得到任何线索我做错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:48:38.173

问题已经通过修改math.wsdl解决了修改 **math.wsdl**

```
<?xml version="1.0"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="urn:Arithmetic" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="HelloService" targetNamespace="urn:Arithmetic" xmlns:y="urn:Arithmetic">
<message name="addRequest">
    <part name="operand1" type="xsd:float" />
    <part name="operand2" type="xsd:float" />
</message>
<message name="addResponse">
    <part name="response" type="xsd:float" />
</message>
<portType name="Hello_PortType">
    <operation name="add">
        <input message="tns:addRequest"/>
        <output message="tns:addResponse"/>
    </operation>
</portType>
<binding name="Hello_Binding" type="tns:Hello_PortType">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="add">
        <soap:operation soapAction="urn:Arithmetic#add"/>
        <input>
            <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:Arithmetic" use="encoded"/>
        </input>
        <output>
        <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:Arithmetic" use="encoded"/>
        </output>
    </operation>
</binding>
<service name="Hello_Service">
<documentation>WSDL File for HelloService</documentation>
<port binding="tns:Hello_Binding" name="Hello_Port">
    <soap:address location="http://perl.qlc.net/math.pl"/>
</port>
</service>
</definitions> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:46:27.640

您需要包含 result 方法才能获得结果：

```
$client->add(10, 20)->result; 
```

此外，您可能应该在使用结果之前添加一些错误处理以检查命令是否成功：

```
my $added = $client->add(10,20);
unless (defined $added)
{
    die "Failed add: $!";
}
$result = $added->result; 
```

另外，您是否有机会使用 .net 服务器？该`Soap::Lite`文档[在这种情况下提出了一些具体建议](http://search.cpan.org/~mkutter/SOAP-Lite-0.715/lib/SOAP/Lite.pm#SOAP%3a%3aLite_client_with_a_.NET_server)，并建议不要使用上述格式。

# python - 从 ExFileObject 读取（）总是导致 StreamError 异常

> ID：14769510
> 
> 赞同：3
> 
> 时间：2013-02-08T09:34:31.707
> 
> 标签：python, extract, tar

我试图从 tar.gz 文件中只读取一个文件。对 tarfile 对象的所有操作都可以正常工作，但是当我从具体成员中读取时，总是会引发 StreamError，请检查以下代码：

```
import tarfile
fd = tarfile.open('file.tar.gz', 'r|gz')
for member in fd.getmembers():
    if not member.isfile():
        continue
    cfile = fd.extractfile(member)
    print cfile.read()
    cfile.close()
fd.close() 
```

cfile.read() 总是导致“tarfile.StreamError：不允许向后搜索”

我需要将内容读取到内存，而不是转储到文件（extractall 工作正常）

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T10:36:22.887

问题是这一行：

```
fd = tarfile.open('file.tar.gz', 'r|gz') 
```

你不想要`'r|gz'`，你想要`'r:gz'`。

如果我在一个简单的 tarball 上运行你的代码，我什至可以打印出`member`并查看`test/foo`，然后我会得到与`read`你得到的相同的错误。

如果我修复它使用`'r:gz'`，它的工作原理。

从[文档](http://docs.python.org/2/library/tarfile.html#tarfile.open)：

> mode 必须是格式为 'filemode[:compression]' 的字符串
> 
> ...
> 
> 出于特殊目的，模式有第二种格式：'filemode|[compression]'。tarfile.open() 将返回一个 TarFile 对象，该对象将其数据作为块流处理。不会对文件进行随机搜索...将此变体与例如 sys.stdin、套接字文件对象或磁带设备结合使用。但是，这样的 TarFile 对象是有限制的，因为它不允许被随机访问，请参阅示例。

`'r|gz'`适用于当您有不可搜索的流时，它只提供操作的子集。不幸的是，它似乎没有准确记录哪些操作是允许的——并且示例的链接也无济于事，因为没有一个示例使用此功能。因此，您必须阅读[源代码](http://hg.python.org/cpython/file/2.7/Lib/tarfile.py#l387)，或者通过反复试验找出答案。

但是，由于您有一个正常的、可搜索的文件，您不必担心这一点；只需使用`'r:gz'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-17T02:48:13.807

除了文件模式外，我还尝试`seek`了网络流。

我在尝试`requests.get`文件时遇到了同样的错误，所以我将所有内容提取到一个 tmp 目录：

```
# stream == requests.get
inputs = [tarfile.open(fileobj=LZMAFile(stream), mode='r|')]
t = "/tmp"
for tarfileobj in inputs:        
    tarfileobj.extractall(path=t, members=None)
for fn in os.listdir(t):
    with open(os.path.join(t, fn)) as payload:
        print(payload.read()) 
```

# c# - 发送带有自定义标头的 POST 请求

> ID：14769514
> 
> 赞同：1
> 
> 时间：2013-02-08T09:34:54.887
> 
> 标签：c#, .net, windows-phone-7, httpwebrequest, http-post

我正在尝试发送`POST`带有参数和正文的请求（通过 C# for Windows Phone）。为了发送参数，我需要使用`application/x-www-form-urlencoded`Content-Type 标头。

唯一的问题是我与之通信的服务器希望我`Content-Type`设置为其他值（自定义值）。

基本上对于形式的链接`ip/path/file?param1=value1&param2=value2`，通过 POST 发送，POST 正文是 JSON 内容，我需要设置`Content-Type`一些自定义的东西，但仍然发送参数。

有没有可以想象的方法来做到这一点？我意识到这有点悖论。无法更改服务器 API 以响应其他`Content-Type`标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:41:09.410

某些标头只能使用 API 属性进行设置。

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.androidlost.com/androidlost/greet");
request.ContentType = "text/x-gwt-rpc; charset=utf-8"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:07:43.460

我在发布问题后不久就找到了答案。似乎如果我构造 URL 字符串以包含实际参数，它就像一个魅力。

这与我通过 HTTP Requests api 有问题地添加参数的情况相反。

# c# - 在回发之前对字符串值调用 c# 函数？

> ID：14769516
> 
> 赞同：0
> 
> 时间：2013-02-08T09:34:58.343
> 
> 标签：c#, asp.net-mvc, security, razor

我是 ASP 的新手，并且已经跳入并开始了一个新的 MVC 4 项目。我正在使用标准模板并尝试编辑登录页面。我要解决的问题是：如果您打开 Fiddler 并登录，您可以看到纯文本的用户名和密码。我想做的是在提交帖子之前使用我在帮助文件中创建的 C# 函数，例如在按钮单击事件上，这可能吗？如果是这样，有人可以指出我的教程/示例的方向，因为这让我困惑了几天！

再次感谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:36:37.253

不要重新发明轮子。请改用 https，以免数据以纯文本形式传输。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:43:06.877

您不能在回发之前运行 C# 函数，您将如何实现呢？C# 代码在服务器端运行，但您从客户端发布表单。您不能将 C# 方法应用于尚未显示的内容。

你基本上有两个选择：

1.) 在将数据发送到服务器之前使用 javascript 以某种方式更改数据
2.) 使用 SSL 保护通道

第一个选项的问题是，任何看到表单的人都可以看到您的 JavaScript 代码。换句话说，无论你想出多么强大的保护，攻击者看到了算法，所以他可以很容易地解码数据……可能最可靠的选择是第二种——SSL。它不是100％，但至少它更难渗透......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:41:52.817

如果您想在提交表单之前加密数据，您只能依靠客户端代码 - javascript。正如其他人已经指出的那样，这绝不是最佳解决方案，您应该使用 https。

# wpf - 从代码隐藏绑定字符串格式？

> ID：14769529
> 
> 赞同：4
> 
> 时间：2013-02-08T09:35:41.183
> 
> 标签：wpf, binding, string-formatting

拜托，有人可以告诉我如何从代码隐藏中获取我的双值格式，如“0.0”，如下所示：

```
Binding b = new Binding(DoubleValue);
b.StringFormat = "????"; 
```

在 xaml 中，它就像“0.0”一样工作......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T09:41:52.637

那这个呢？

```
b.StringFormat = "{0:F1}"; 
```

* * *

[请参阅StringFormat](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)的文档以及[Standard Numeric Format Strings](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)和[Custom Numeric Format Strings](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)。

* * *

编辑：只是为了清楚如何在代码中创建和分配绑定（给`Text`虚构的 TextBlock 的属性`textBlock`）：

```
public class ViewModel
{
    public double DoubleValue { get; set; }
}

...

var viewModel = new ViewModel
{
    DoubleValue = Math.PI
};

var binding = new Binding
{
    Source = viewModel,
    Path = new PropertyPath("DoubleValue"),
    StringFormat = "{0:F1}"
};

textBlock.SetBinding(TextBlock.TextProperty, binding); 
```

或者：

```
var binding = new Binding
{
    Path = new PropertyPath("DoubleValue"),
    StringFormat = "{0:F1}"
};

textBlock.DataContext = viewModel;
textBlock.SetBinding(TextBlock.TextProperty, binding); 
```

# c# - 禁用特定 C# 类的所有 stylecop 警告

> ID：14769533
> 
> 赞同：8
> 
> 时间：2013-02-08T09:35:52.307
> 
> 标签：c#, .net-4.5, stylecop

我正在一个应用程序中工作，并为演示目的开发了几个类。我知道这些课程将来会被删除。

是否可以忽略这些类的所有 stylecop 警告，因为我不想花时间在这些警告上？

我搜索但发现我只能通过 stylecop 中的设置忽略（这也会影响其他类）或某些特定规则（我只想忽略所有警告）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-08T09:38:30.103

您可以通过在顶部添加此标头来欺骗 StyleCop 根本不处理文件：

```
//------------------------------------------------------------------------------
// <auto-generated>
// Well, not really. This is just a trick to get StyleCop off my back.
// </auto-generated>
//------------------------------------------------------------------------------ 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-08T09:53:44.613

从 StyleCop 4.4.0 开始，还可以使用单个抑制属性来抑制规则命名空间中的所有规则。这通过用单个星号替换规则 CheckID 和规则名称来表示。下面的代码示例在内部类中抑制了 StyleCop 的所有默认文档规则。在这种情况下，StyleCop 仍然会标记一个违规，表明外部类缺少文档，但它会忽略内部类及其内容的所有文档规则。

```
public class OuterClass
{
    [SuppressMessage("StyleCop.CSharp.DocumentationRules", "*")]
    public class InnerClass
    {
        public void MyUndocumentedMethod
        {
        }
    }
} 
```

[http://stylecop.soyuz5.com/Suppressions.html](http://stylecop.soyuz5.com/Suppressions.html)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-02-04T16:33:24.440

感谢 Bartłomiej Mucha 提供我刚刚使用的答案。正如我发现的那样，“*”适用于特定规则，但您必须为每个类别添加抑制。这是完整的集合 - 如果将它们复制到类的顶部，您应该会发现所有 StyleCop 错误都被抑制：

```
[SuppressMessage("StyleCop.CSharp.NamingRules", "*", Justification = "Reviewed. Suppression is OK here.")]
[SuppressMessage("StyleCop.CSharp.LayoutRules", "*", Justification = "Reviewed. Suppression is OK here.")]
[SuppressMessage("StyleCop.CSharp.MaintainabilityRules", "*", Justification = "Reviewed. Suppression is OK here.")]
[SuppressMessage("StyleCop.CSharp.OrderingRules", "*", Justification = "Reviewed. Suppression is OK here.")]
[SuppressMessage("StyleCop.CSharp.ReadabilityRules", "*", Justification = "Reviewed. Suppression is OK here.")]
[SuppressMessage("StyleCop.CSharp.SpacingRules", "*", Justification = "Reviewed. Suppression is OK here.")]
[SuppressMessage("StyleCop.CSharp.DocumentationRules", "*", Justification = "Reviewed. Suppression is OK here.")]
internal class MyClass 
{
    // ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T13:22:17.117

如果您想防止 StyleCop 在文件上运行，您可以使用[http://stylecop.codeplex.com/wikipage?title=Using%20StyleCop%20on%20Legacy%中提到的 ExcludeFromStyleCop 属性在您的 .csproj 文件中将其标记为已排除20Projects&referringTitle=文档](http://stylecop.codeplex.com/wikipage?title=Using%20StyleCop%20on%20Legacy%20Projects&referringTitle=Documentation)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T09:37:38.310

您可以通过向代码块添加属性来抑制规则。这是下面链接的博客文章中的一个类的简单示例，但您可以单独对各个成员执行此操作：

```
[SuppressMessage("Microsoft.StyleCop.CSharp.DocumentationRules", "SA1600:ElementsMustBeDocumented")]
public class MyUndocumentedClass
{
    public void MyUndocumentedMethod {}
} 
```

# ios - 如何保护来自 iphone 的网络服务 URL？

> ID：14769542
> 
> 赞同：0
> 
> 时间：2013-02-08T09:36:09.643
> 
> 标签：ios, web-services, security, ios4

我一直在使用 iphone 应用程序调用 web 服务（带参数的 php）很多次。但是我怎么问过它安全吗？我听说过网络监控工具，它可以检测出数据，从而获取 url + 参数。但是还有其他方法可以检测到 url + 参数吗？应用程序的日志控制台？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:05:09.097

确保 Web 服务端实现 SSL 等安全协议，并默认使用 HTTPS 安全。也就是说，通过 HTTPS 加密您的敏感数据。这与电子商务网站处理在线交易的方式相同。

# .net - 长时间运行过程中填充gridview（刷新）

> ID：14769543
> 
> 赞同：1
> 
> 时间：2013-02-08T09:36:11.533
> 
> 标签：.net, vb.net, winforms, multithreading, .net-4.0

我有一个针对不同值运行的方法，这些值进入数据库，检索值并`gridview`逐行填充。

每次通话都需要一些时间和屏幕冻结，直到过程完成。我喜欢在`gridview`方法运行时显示值而不冻结屏幕。

我尝试了类似下面的方法，它仍然会冻结屏幕，并且在处理完成之前我看不到网格上的值。

`Application.Doevents`如果我在循环中使用它，我不想使用它在网格中显示数据。

任何帮助表示赞赏

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

        Dim t = New Threading.Thread(AddressOf MyWork)
        t.Start()
End Sub

Private Sub MyWork()
        If Me.InvokeRequired Then
            Me.Invoke(New MethodInvoker(AddressOf DoWork))
        End If
End Sub

Private Function DoWork() As Boolean

    For i As Integer = 1 To 1000000
        FillGrid(i)
    Next    
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:43:55.130

您可以尝试使用具有[ProgressChanged事件的](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)类，该事件允许您在长时间操作期间为用户界面提供中间更新。在[DoWork](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.dowork.aspx)函数中，您可以多次调用[ReportProgress并将任何对象传递给](http://msdn.microsoft.com/en-us/library/a3zbdb1t.aspx)[ProgressChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)事件以更新 UI。

这是一个简单的例子来展示这个概念。首先`BackgroundWorker`从`ToolBox`. 该实例将显示在设计器窗口的底部。选择`BackgroundWorker`并将`WorkerReportsProgress`属性设置为`True`。

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    BackgroundWorker1.RunWorkerAsync()
End Sub

Private Sub BackgroundWorker1_DoWork(sender As System.Object, e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    Dim list1 As New List(Of String)
    list1.Add("A")
    list1.Add("B")
    list1.Add("C")
    BackgroundWorker1.ReportProgress("50", list1)
    Dim list2 As New List(Of String)
    list2.Add("1")
    list2.Add("2")
    list2.Add("3")
    BackgroundWorker1.ReportProgress("100", list2)
End Sub

Private Sub BackgroundWorker1_ProgressChanged(sender As System.Object, e As System.ComponentModel.ProgressChangedEventArgs) Handles BackgroundWorker1.ProgressChanged
    Dim myList As List(Of String)
    myList = e.UserState
    For Each str As String In myList
        DataGridView1.Rows.Add(str)
    Next
End Sub

Private Sub BackgroundWorker1_RunWorkerCompleted(sender As System.Object, e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
    MessageBox.Show("Operation Complete")
End Sub 
```

这是对正在发生的事情的解释。在`DoWork`例程中，您将`separate thread`在 UI 上执行长时间操作。调用`ReportProgress`函数时，可以传递两个参数：一个百分比和一个对象……在这种情况下，第二个参数更重要。在`ProgressChanged`例程中，您将从同一个对象中取出`e.UserState`并做您想做的事情。这发生在 上，`UI thread`因此您可以从此处更新控件。该`RunWorkerCompleted`例程在操作完成时被调用，并且也在`UI thread`. 重要的是，每当您调用函数时，都会在 the`BackgroundWorker`和 the之间执行线程安全的切换。`UI``ReportProgress`

# spring - Spring数据Neo4j：persist（）方法未定义

> ID：14769546
> 
> 赞同：3
> 
> 时间：2013-02-08T09:36:23.913
> 
> 标签：spring, persistence, neo4j, graph-databases, spring-data-neo4j

图形数据库、neo4j 和 spring 相当新。我有一个用@NodeEntity 注释的简单 POJO。但是，与我阅读的许多在线教程的智慧相反，我的 POJO 没有任何 persist() 方法将其保存到图形数据库中。

我需要做什么样的黑魔法才能使我的 POJO 可以使用这种方法，或者教程是否过时并且保存到 DB 的方式已经随着我使用的 Spring 版本而改变（2.1.0-RELEASE )?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:39:26.487

您所指的黑魔法是[AspectJ](http://eclipse.org/aspectj/)。Spring Data Neo4j 的高级映射模式使用 aspectJ 来增强你​​的 pojos。“persist()”是 aspectj 编译器在构建项目时添加到您的 pojo 中的方法之一。

查看Spring Data Neo4j Guide Book 中的[第 21 章“环境设置”](http://static.springsource.org/spring-data/data-neo4j/docs/2.1.0.RELEASE/reference/html/#setup)，了解如何设置项目以使用 aspectj 的高级映射模式。

# sql - SQL SERVER 日期时间格式

> ID：14769547
> 
> 赞同：15
> 
> 时间：2013-02-08T09:36:26.957
> 
> 标签：sql, sql-server, datetime

学习 SQL Server 有一些我不确定：

具有值的`datetime`字段： `2012-02-26 09:34:00.000`

如果我使用以下方法从表中选择：

```
CAST(dob2 AS VARCHAR(12) ) AS d1 
```

它将其格式化为： `Feb 26 2012`

我不确定他如何或为什么 SQL Server 像这样格式化 DateTime。如果你使用`datetime2`它不会 - 任何人都知道为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T09:40:16.687

尝试这个：

```
select convert(varchar, dob2, 101)
select convert(varchar, dob2, 102)
select convert(varchar, dob2, 103)
select convert(varchar, dob2, 104)
select convert(varchar, dob2, 105)
select convert(varchar, dob2, 106)
select convert(varchar, dob2, 107)
select convert(varchar, dob2, 108)
select convert(varchar, dob2, 109)
select convert(varchar, dob2, 110)
select convert(varchar, dob2, 111)
select convert(varchar, dob2, 112)
select convert(varchar, dob2, 113) 
```

参考：http : [//msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

[http://www.w3schools.com/sql/func_convert.asp](http://www.w3schools.com/sql/func_convert.asp)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-08T09:48:46.820

默认日期格式取决于数据库服务器的语言设置。您也可以[按会话更改它](http://msdn.microsoft.com/en-us/library/ms174398.aspx)，例如：

```
set language french
select cast(getdate() as varchar(50))
-->
févr 8 2013 9:45AM 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-08T09:48:46.193

[兼容性支持](http://msdn.microsoft.com/en-us/library/ms187928.aspx)表示在兼容级别 110 下，**`CAST and CONVERT`**操作`time`和**`datetime2`**数据类型的默认样式始终为 121。如果您的查询依赖于旧行为，请使用低于 110 的兼容级别，或在受影响的查询中明确指定 0 样式。

这意味着*默认情况下* `datetime2` *是* `CAST as varchar` *to* `121 format`。例如；`col1` *和* `col2`格式（下）相同（除了最后的 0）

```
SELECT CONVERT(varchar, GETDATE(), 121) col1,
       CAST(convert(datetime2,GETDATE()) as varchar) col2,
       CAST(GETDATE() as varchar) col3 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/d41d8/8597)

```
--Results
COL1                    | COL2                          | COL3
2013-02-08 09:53:56.223 | 2013-02-08 09:53:56.2230000   | Feb 8 2013 9:53AM 
```

仅供参考，如果您使用`CONVERT`而不是`CAST`您可以使用第三个参数来指定[MSDN上列出的某些格式](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-24T15:45:38.393

在 MS SQL Server 中，您可以执行以下操作：

```
SET DATEFORMAT ymd 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-29T16:01:46.250

要使用 sql 语法更改日期格式，您应该使用此查询

```
SELECT DATE_FORMAT(`<columnName>`, '%d/%m/%Y') FROM schemaname.tablename; 
```

前任：-

假设我有一个名为 bugloo 的模式，表名是`tbl_company` ，在这个`tbl_company`我有一列都是日期格式`%yy/%mm/%dd`，列名是`createdDate`，查询应该像这样

```
SELECT DATE_FORMAT(`createdDate`, '%d/%m/%Y') FROM bugloo.tbl_company; 
```

运行此查询后，我的输出日期将转换为`%dd/%mm/%yyyy`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-16T12:34:15.587

**这是我最喜欢的 112 和 114 用法**

```
select (convert(varchar, getdate(), 112)+ replace(convert(varchar, getdate(), 114),':','')) as 'Getdate() 

112 + 114 or YYYYMMDDHHMMSSMSS' 
```

**结果：**

> Getdate() 112 + 114 或 YYYYMMDDHHMMSSMSS

**20171016083349100**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-18T18:57:08.740

```
case when isdate(inputdate) = 1 
then convert(datetime, cast(inputdate,datetime2), 103)
else
case when isdate(inputdate) = 0 
then convert(datetime, cast(inputdate,datetime2), 103) 
```

# c# - Groupby 实体与另一个表连接

> ID：14769553
> 
> 赞同：0
> 
> 时间：2013-02-08T09:36:46.097
> 
> 标签：c#, linq, entity-framework

我有这种情况，我没有通过相关的 SO 问题找到任何解决方案：

```
 (from TD as tx 
   join P as px  on tx.field1= px.ID
   join Q as rp  on tx.field2 = rp.ID
   join L as lc  on tx.field3= lc.ID
    group by  tx.field1,
              tx.field2, 
              L.randomfield4,
              ....a bunch of fields from P,Q,L
   )as groupItem
   left outer join M on groupItem.field1=M.ID
   select new { */ Elements from groupItem and M /*} 
```

我的 Linq 如下所示：

```
from tx in TD 
join itemP in P on tx.field1 equals P.ID
join itemQ in Q on tx.field2 equals P.ID
join itemL in L on tx.field3 equals P.ID
 group new { tx.field1 ,tx.field2 ,L.randomfield4 } by new { **fields from tx,p,q,etc} into groupItem 
 join dM in M on ???? 
```

如果我尝试从 groupItems 中选择元素，我将无法访问属性（因为我没有选择任何内容）。

任何人都可以帮助我解决这个问题吗？
也帮我为这个问题取一个更好的名字:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:45:00.253

希望我正确理解了您的问题，但这是我的答案。我将查询分为两部分，因此如果您完全了解它，只需将它们组合在一起就很容易理解。

基本上，变量**“groupedCollection”**是您的第一个连接，您的分组基本上包括以下集合 TD、P、Q 和 L。然后第二个变量**“finalCollection”**是您的左外连接，它给出了您需要的结果。

```
var groupedCollection = from tx in TD
join itemP in P on tx.field1 equals itemP.ID
join itemQ in Q on tx.field2 equals itemQ.ID
join itemL in L on tx.field3 equals itemL.ID
group new
{   
    //Select the collections you want to group it by
    P,
    Q,
    L,
    TD
}
by new
{
    //Select fields you want to output group by here
    tx.field1,
    tx.field2,
    tx.field3,
    itemL.RandomField4
}
    into g
    select new
    {
        //Use ky to get your properties as they are already grouped by
        yourField1 = g.Key.field1,
        yourField2 = g.Key.field2,
        yourField3 = g.Key.field3,
        yourField4 = g.Key.RandomField4
    };

var finalCollection = from dM in M
    //This is your Left Outer Join
    join xx in groupedCollection on dM.ID equals xx.yourField1 into sr
    from w in sr.DefaultIfEmpty()
    //Until here
    select new
    {
        finalResultID = dM.ID,
        finalField1 = w.yourField1,
        finalField2 = w.yourField2,
        finalField3 = w.yourField3,
        finalField4 = w.yourField4
    }; 
```

对于更多 LINQ 的东西，这会给你一个想法 [http://anyrest.wordpress.com/2010/09/27/linq-to-sql-essentials/](http://anyrest.wordpress.com/2010/09/27/linq-to-sql-essentials/)

# html - 哪个页面布局更正确？

> ID：14769559
> 
> 赞同：4
> 
> 时间：2013-02-08T09:37:08.533
> 
> 标签：html

在 HTML5 草案规范中添加`<main>`元素后，哪个页面布局更正确？

```
<body>
    <header> ... </header>
    <main>
        <aside> ... </aside>
    </main>
    <footer> ... </footer>
</body> 
```

或者;

```
<body>
    <header> ... </header>
    <section>
        <main> ... </main>
        <aside> ... </aside>
    </section>
    <footer> ... </footer>
</body> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T03:39:17.687

关于每个示例标记模式的正确性的答案可以在主要元素的[规范定义中找到。](http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-main-element)

> 可以使用此元素的上下文：需要流式内容，但没有文章、旁边、页脚、页眉或导航元素祖先的地方。作者不得在文档中包含多个主要元素。

在这种情况下，任一示例标记都符合要求。仅从理论示例很难知道哪个是最合适或最实用的。

> 浏览器遵循哪个规范？

[浏览器已经实现了W3C HTML 规范](http://www.w3.org/html/wg/drafts/html/master/Overview.html)中定义的主要元素。[W3C HTML 验证](http://validator.w3.org/nu/)器等一致性检查器将实现 W3C HTML 规范的一致性要求。

**注意：**主要元素将在不久的将来[添加到 HTML 5.0 。](http://lists.w3.org/Archives/Public/public-html-admin/2013Jan/0205.html)

**注意：** HTML 5.1 中主要元素的规范取代了扩展规范。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:51:01.727

As always it depends on the content.

For me, if the contents of the `header` and `footer` are generic to all pages, then leave them outside of the `main` element whose content should be specific to that page. If, however, the `header` and/or `footer` are relevant to the main contents of that page only, then put them inside the `main`.

The same logic applies to the `aside` element.

Plus read what Steve Faulkner says on this page. He knows everything!

**Update!** Due to this particular question, I have posted an [article](http://www.iandevlin.com/blog/2013/02/html5/further-examples-on-using-the-main-element) with further examples on how the `main` element might be used.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:32:20.943

在第二个示例中，您将 <main> 放置在 <section> 中。

由于 <body> 隐含地是一个“节”并且 <section> 属于它，因此 <section> 实际上是一个小节。

这会导致问题。

为什么？

正如史蒂夫指出的那样，您每页只能使用 <main> 一次。在此示例中，您已选择在该页面的一个子部分中使用定义页面*主要*部分的一个元素。

某事物的“主要”部分肯定不能属于该事物的子集。无论根据当前规范“允许”做什么，这根本没有意义。在此示例中，您对 <main> 的部署与您使用分段内容所描述的结构意图不一致。

在结构方面，第一个示例 - 因此 - 稍微优越，尽管您对 <aside>的*语义选择不是最佳的。*您基本上说过，“这是我页面内容中最重要的部分，其中包含一些切线、松散相关的内容”。与什么相切？

除非...

您打算将一些流内容直接放在 <main> 区域内，与 <aside> 相邻。该内容将直接属于 main，而 main 则直接属于 <body>。<aside> 仍然是 <body> 的一个子部分，实际上是某些主要内容的“旁白”。

这将是完全合理的。

# jquery - 加载具有透明背景的ajax页面

> ID：14769565
> 
> 赞同：1
> 
> 时间：2013-02-08T09:37:28.800
> 
> 标签：jquery, opacity

我有一个 web 应用程序，我在其中使用 ajax 加载所有子页面，我试图将背景设置为不透明度 0 或透明，但它只会变成白色。

我加载的页面如下所示：

```
<div id="pageid">

  <div id="header">
  header
  </div>

Text

</div> 
```

以及尝试设置不透明度的代码：

```
$("#pageid").css({ opacity:0.1 }); 
```

任何输入表示赞赏，谢谢。

更新：这是 z-index 顺序的问题，我错过了没有显示，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:40:22.910

试试这个

```
$("body").css({ opacity:0.1 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:39:29.107

普通 div 的背景已经是透明的，你不需要做任何事情。可能你对事情应该如何工作有一些其他错误或误解。

# com - 如何通过 COM InterOp 访问暴露多个接口的 CoClass？

> ID：14769566
> 
> 赞同：1
> 
> 时间：2013-02-08T09:37:32.137
> 
> 标签：com, com-interop, typelib, midl, tlbimp

我有一个 CoClass，描述如下：

```
[
    uuid(xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx), 
    version(1.0), 
    helpstring("FooBar")
]
coclass FooBar
{
    [default] interface IFoo;
    interface IBar;
} 
```

所以我的问题是：

1.  为什么`tlbimp`只暴露`IFoo`接口，同时`oleview.exe`显示两个接口？
2.  `tlbimp`只公开[`[default]`](http://msdn.microsoft.com/en-us/library/aa366787.aspx)接口，为什么？（根据 MSDN `[default]` *“旨在供宏语言使用。”*）
3.  如何在 MIDL/COM 中建模这种情况？我应该使用关联而不是继承吗？

# opengl - 如何使用纹理作为深度附件？

> ID：14769570
> 
> 赞同：1
> 
> 时间：2013-02-08T09:37:52.257
> 
> 标签：opengl, framebuffer, render-to-texture, depth-buffer, deferred-shading

我有一个带有多个渲染目标的帧缓冲区。它们都是纹理而不是渲染缓冲区。如何使用纹理`A`组件作为[深度附件](http://www.opengl.org/wiki/Framebuffer_Object#Framebuffer_Object_Structure)？我想使用默认的深度测试。`RGBA`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:24:59.123

alpha 不是深度分量。并且只有格式具有深度组件的图像才能绑定到`GL_DEPTH_ATTACHMENT`.

在你问之前，没有 RGB_DEPTH_COMPONENT 格式。

没有理由不能使用`GL_DEPTH_COMPONENT24`.

# jsp - 使用 UseBean 在 Jsp 中获取价值

> ID：14769571
> 
> 赞同：3
> 
> 时间：2013-02-08T09:37:53.097
> 
> 标签：jsp, servlets, liferay

朋友们，我正在从 Action 类发送我的列表，这是代码

//我的Action类的代码

```
List matchUsersInTracker = new ArrayList<User>();

DynamicQuery userTrackerquery = DynamicQueryFactoryUtil.forClass(User.class, PortalClassLoaderUtil.getClassLoader())
    .add(PropertyFactoryUtil.forName("userId").in(DynamicQueryFactoryUtil.forClass(UserTracker.class, PortalClassLoaderUtil.getClassLoader())
    .setProjection(ProjectionFactoryUtil.property("userId"))));

matchUsersInTracker = UserLocalServiceUtil.dynamicQuery(userTrackerquery);

//Pass this entire List of user 
if(matchUsersInTracker!=null)
{
    actionRequest.setAttribute("match_base_Users", matchUsersInTracker);
} 
```

//我的Jsp中的代码-------

现在在 Jsp 中我正在使用 useBean：

```
<jsp:useBean id="match_base_Users" class="java.util.ArrayList"  scope="request">
</jsp:useBean> 
```

它给了我`ClassCastException`，现在在 for 循环中将每个元素一个一个地转换为用户类不是可行的方法。

增加我的jsp的加载时间。

所以任何猜测我如何将用户列表发送`ActionClass`到 Jsp

我也提到[了这个问题](https://stackoverflow.com/questions/3263642/jsp-usebean-with-hashmap "JSP Usebean 与 Hashmap")，但无法提出解决方案。

我只想在jsp中显示数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:28:20.397

`<jsp:useBean>`如果您已经在使用管理所需范围内的 bean 的 MVC 框架，则根本不需要。仅当`<jsp:useBean>`您不使用自行管理 bean 的 MVC 框架时才有用。

摆脱它，`${match_base_Users}`直接访问它。

# php - symfony 1.4 如何全局取消设置、隐藏或只读表单小部件？

> ID：14769581
> 
> 赞同：0
> 
> 时间：2013-02-08T09:38:33.523
> 
> 标签：php, forms, symfony-1.4, doctrine-1.2

在我的应用程序中，我有很多模块和很多带有自己小部件的表单。
我一直在尝试全局“*取消设置*”、“*隐藏*”或“*只读*”小部件。
我知道它可以在表单的*configure()*函数中为一个小部件执行此操作，但我正在寻找一种更好的解决方案，如果可能的话以全局方式。更改所有模块形式并跟踪它们可能会很痛苦。
线程可能有点长，但我认为它很容易理解问题。非常感谢您有时间阅读它 :)

我已经构建了一个带有时间戳行为的简单新闻模块来测试一些选项，但它们仍然没有工作。

*   桌子：`TbNews`
*   列：
    *   `id`作为主键
    *   `scontent`作为保存新闻内容的文本字段。
    *   `created_at`作为日期时间。（时间戳行为）
    *   `updated_at`作为日期时间。（时间戳行为）

**TbNews schema.yml：**

> ```
> TbNews:
>   connection: doctrine_master
>   tableName: tb_news
>   columns:
>     id:
>       type: integer(8)
>       fixed: false
>       unsigned: false
>       primary: true
>       autoincrement: true
>     scontent:
>       type: string(64000)
>       fixed: false
>       unsigned: false
>       primary: false
>       notnull: true
>       autoincrement: false
>   actAs:
>     Timestampable:
>       created:
>         name: created_at
>         type: timestamp
>         format: Y-m-d H:i:s
>         options:
>           notnull: false
>           required: false
>       updated:
>         name: updated_at
>         type: timestamp
>         format: Y-m-d H:i:s
>         options:
>           notnull: false
>           required: false 
> ```

**TbNews 中**
的updated_at （例如，这里只写了updated_at 列）：

> ```
> class TbNewsForm extends PluginTbNewsForm
> {
>   public function configure()
>   {
>       $this->setWidgets(array(
>           'updated_at'   => new sfWidgetFormDateTime(),
>       ));
>       $this->setValidators(array(
>         'updated_at'   => new sfValidatorDateTime(array('required' => false)),
>       ));
>   }
> } 
> ```

**TbNews updated_at 的模板 _form.php**：
测试了很多选项，手动渲染 updated_at ：“echo $form['updated_at']” 并且不渲染它。

> ```
> <?php echo $form->renderHiddenFields(false) ?> 
> ```

**`update_at`带有列的全局测试** *`lib/form/doctrine/BaseFormDoctrine.class.php`*：

*   使用`sfWidgetFormInputHidden()`，小部件不会在模板中呈现。
    测试取消设置它，没有取消它，使用 setWidget，没有它......所有可能的选项，但字段 updated_at 未在模板中呈现。（使用了 renderHiddenFields() ）

> ```
> abstract class BaseFormDoctrine extends sfFormDoctrine
> {
>   public function setup()
>   {
>       $value_updated_at = $this->getObject()->updated_at;
>       unset($this->widgetSchema['updated_at']);
>       unset($this->validatorSchema['updated_at']);
>       $this->widgetSchema['updated_at'] = new sfWidgetFormInputHidden();
>       $this->widgetSchema['updated_at']->setOption('is_hidden', 'true');
>       $this->widgetSchema['updated_at']->setOption('type', 'hidden'); 
>       $this->setDefault('updated_at', $value_updated_at);
>       $this->setWidget('updated_at', new sfWidgetFormInputHidden(array('value'=>$value_updated_at)));
>       //$this->setWidget('updated_at', $this->widgetSchema['updated_at']);
>   }
> } 
> ```

*   只读：在 _form.php 模板中
    添加了该字段`updated_at`，但未显示为只读。似乎不适用于`sfWidgetFormDateTime`.

    > ```
    >  $this->widgetSchema['updated_at']->setAttribute('readonly', 'readonly'); 
    > ```

**问题和想法：**
可能`BaseFormDoctrine`不是在所有表单模块中全局更改小部件的正确方法，或者我的测试中可能有问题。

您可能知道，如果我们直接在 Form 小部件中使用上述代码`TbNewsForm configure()`，我们可以轻松地将小部​​件从一种类型更改为另一种类型，并单独渲染或隐藏它，并且它可以工作。

*   但是我们如何才能在全球范围内实施它呢？
*   是否需要更改 symfony 的核心代码？

非常感谢您花时间阅读它，欢迎任何评论或解决方案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:56:44.657

换班对`BaseFormDoctrine`你没有帮助。表单的小部件在给定表单的基类中设置（`BaseTbNewsForm`在您的情况下），因此它们将覆盖`BaseFormDoctrine`类中所做的任何更改。

如果您想对每个表单执行相同的操作但不想重写每个类中的代码，您可以创建一个实用程序类并在表单`configure()`函数中调用它的方法。

我认为在不改变 Doctrine / Symfony 内部结构的情况下，没有办法在全局范围内执行此操作（您必须更改生成表单的基类的方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:29:58.947

我找到了一种可行的方法，但可能不是最好的解决方案，因为它涉及修改 symfony 的源代码。核心文件***sfFormDoctrine.class.php***中的函数***setupInheritance()***在设置小部件和验证器后被所有表单调用，如果我们在那里添加代码，我们的更改将对所有表单全局生效。 在下面的示例中，所有小部件 'created_at' 和 'updated_at' 将被取消设置，然后设置为隐藏：

 *```
 /**
   * Used in generated forms when models use inheritance.
   */
  protected function setupInheritance()
  {
    if (isset($this))
    {
      $oWidgetSchema = $this->getWidgetSchema();
      if (isset($oWidgetSchema))
      {
        $screatedcolumn = "created_at";
        $supdatedcolumn = "updated_at";

        //if ($this->isNew()) //we can add a check for new records

        //we can also add checks for frontend or backend
        //$request = sfContext::getInstance()->getRequest();
        //$this->url = 'http'.($request->isSecure() ? 's' : '').'://'. $request->getHost();
        //$suri_params = $request->getParameterHolder()->getAll();

        //set [created_at] as hidden field widget, and set its default value to the Original one before sending it to Timestampable.php Listener.
        if ( $oWidgetSchema->offsetExists($screatedcolumn) )
        {
          $value_created_at = $this->getObject()->created_at;
          unset($this->widgetSchema[$screatedcolumn]);
          $this->widgetSchema[$screatedcolumn] = new sfWidgetFormInputHidden();
          $this->widgetSchema[$screatedcolumn]->setOption('is_hidden', 'true');
          $this->widgetSchema[$screatedcolumn]->setOption('type', 'hidden');
          //unset($this->validatorSchema[$screatedcolumn]); //unset its validator to make sure values are not checked by default, optional.
          $this->setDefault($screatedcolumn, $value_created_at);
        }
        //set [updated_at] as hidden field widget, and set its default value to time() before sending it to Timestampable.php Listener.
        if ( $oWidgetSchema->offsetExists($supdatedcolumn) )
        {
          //$value_updated_at = $this->getObject()->updated_at;
          unset($this->widgetSchema[$supdatedcolumn]);
          $this->widgetSchema[$supdatedcolumn] = new sfWidgetFormInputHidden();
          $this->widgetSchema[$supdatedcolumn]->setOption('is_hidden', 'true');
          $this->widgetSchema[$supdatedcolumn]->setOption('type', 'hidden');
          //unset($this->validatorSchema[$supdatedcolumn]); //unset its validator to make sure values are not checked by default, optional.
          $this->setDefault($supdatedcolumn, time());
        }
      }
    } 
```*

# nginx - 在 Nginx 中保护远程 sqlbuddy

> ID：14769586
> 
> 赞同：1
> 
> 时间：2013-02-08T09:38:49.263
> 
> 标签：nginx

我在我的 nginx 服务器上添加了 sqlbuddy，用于远程管理我的数据库。为此，我添加了 .htaccess 和密码保护。但是，如果我在身份验证提示/窗口中单击取消，我仍然可以访问 sqlbuddy 的登录名。我可以登录并查看 UI 的一些部分。如果我访问浏览器源，我可以看到更多数据。我该如何阻止这个？在 nginx 中最好的设置是什么？

这是 nginx 配置文件：

```
 location /sqlbuddy {
            auth_basic "Administrator Login";
            auth_basic_user_file /opt/nginx/html/sqlbuddy/.htpasswd;
    } 
```

# javascript - 在没有全局变量的情况下存储用于全局访问的数据

> ID：14769590
> 
> 赞同：0
> 
> 时间：2013-02-08T09:38:55.443
> 
> 标签：javascript, socket.io

我正在制作一个 node.js 游戏服务器，并且我正在将 socket.io 用于 webscockets 和房间。然而，这主要是一个纯 JavaScript 问题：

我正在为每 2 个玩家创建一个随机数的房间，它的工作原理是这样的：

*   随机生成一个房间号并全局存储；*   玩家加入房间*   如果他是这个房间的第二个玩家，则生成一个新的房间号，下一个玩家加入下一个随机号房间

    ```
    var openRoom = Math.floor(Math.random() * 90000) + 10000;

    io.sockets.on('connection', function (socket) {

        socket.on('addPlayer', function(username) {

            if (io.sockets.clients(openRoom).length <= 2)  {
                socket.join(openRoom);
            } else {
                openRoom = Math.floor(Math.random() * 90000) + 10000;
                socket.join(openRoom);
            }
    ... 
    ```

    有没有办法不使用 global `openRoom`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:42:56.067

您需要使用闭包，以便将`openRoom`变量公开给内部函数。

例如：

```
(function() {

var openRoom = Math.floor(Math.random() * 90000) + 10000;

io.sockets.on('connection', function (socket) {

    socket.on('addPlayer', function(username) {

        if (io.sockets.clients(openRoom).length <= 2)  {
            socket.join(openRoom);
        } else {
            openRoom = Math.floor(Math.random() * 90000) + 10000;
            socket.join(openRoom);
        }
...

})(); 
```

您还可以创建一个全局对象来存储您的任何全局变量：

```
if (typeof window['MyApp'] == 'undefined') {

    MyApp = {
        someVar: someValue
    };

} 
```

这使您可以稍后获取/设置它：

```
var x = MyApp.someVar; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:48:43.253

查看 Redis.io 等数据存储解决方案。它们是为这类瞬态事物而设计的，以帮助您不让代码与全局变量混淆，同时具有足够的性能以不会显着减慢速度。

使用 redis，您只需调用一个函数，将 redis 中的键更新为新值。

# google-analytics - 如何创建跟踪 JavaScript 代码，如基于 Javascript 的谷歌分析？

> ID：14769592
> 
> 赞同：0
> 
> 时间：2013-02-08T09:39:00.743
> 
> 标签：google-analytics, cross-server

我正在尝试创建 Google Analytic 克隆。我知道如何在 PHP 中获取有关浏览器位置 IP 和其他类似内容的信息

我想知道的是如何创建一个 java 脚本，它从我的代码放置在我的服务器上的任何网站发送此信息？？？

创建像谷歌分析这样的跟踪 JavaScript 代码的最低安全要求是什么？

根据 PHP 中的会话数据将用户重定向到不同的页面？

或者换句话说，我必须向我的服务器发送一个 ajax 请求吗？

是否有任何可用的解决方案受 java-script 约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:00:55.403

大多数分析工具会生成一个附有查询字符串参数的 url，然后输出一个 1x1 图像像素，其中 img src 作为 url。然后，您的服务器将接收并存储数据。唯一返回的是实际的 1x1 像素。这是常用的方法，因为如果站点没有启用 js，您将硬编码的 img 包装到服务器的 noscript 标记中，仍然可以获得页面视图等基本信息。

但是，您是否有理由想要构建自己的分析脚本而不是使用现有的？有许多 3rd 方可用，包括免费的。或者，还有 Piwik，如果您想构建它而不必从头开始，它是一个免费和开源的解决方案。

# android - 如何在 DialogFrament 中恢复参数，如弹出窗口

> ID：14769598
> 
> 赞同：1
> 
> 时间：2013-02-08T09:39:15.910
> 
> 标签：android, android-layout, popup, android-alertdialog, android-dialogfragment

我正在尝试像男人一样弹出连接：http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

像man这样的例子已经完成，但现在我无法恢复用户填写的登录名和密码。

布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top|center"
        android:contentDescription="@string/logo"
        android:scaleType="center"
        android:src="@drawable/logo" />

    <EditText
        android:id="@+id/edtlogin"
        android:inputType="textEmailAddress"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="16dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginBottom="4dp"
        android:hint="@string/identifiant" />
    <EditText
        android:id="@+id/edtpassword"
        android:inputType="textPassword"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="4dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginBottom="16dp"
        android:fontFamily="sans-serif"
        android:hint="@string/motdepasse"/>
</LinearLayout> 
```

班级

```
 public class PopUpConnexion extends DialogFragment {

    private EditText login;

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(this.getActivity());
        // Get the layout inflater
        LayoutInflater inflater = this.getActivity().getLayoutInflater();

        // Inflate and set the layout for the dialog
        // Pass null as the parent view because its going in the dialog layout

        builder.setView(inflater.inflate(R.layout.popup_connexion, null))
        // Add action buttons
               .setPositiveButton(R.string.connexion, new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {

// Here I want to recover the login and the password for sign in.

                   }
               })
               .setNegativeButton(R.string.annuler, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       PopUpConnexion.this.getDialog().cancel();
                   }
               });    
        return builder.create();
    }

} 
```

我尝试通过各种方式恢复值，但 EditText 类型的对象登录始终为空。谢谢

编辑：

```
 public class PopUpConnexion extends DialogFragment {

    EditText login;
    EditText password;

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(this.getActivity());
        // Get the layout inflater
        LayoutInflater inflater = this.getActivity().getLayoutInflater();

        View textEntryView = inflater.inflate(R.layout.popup_connexion, null);
        login  = (EditText) textEntryView.findViewById(R.id.edtlogin); // with the debugger we can see it's the good EditText with the id
        login.setText("test"); // we can't see "test" in the EditText

        builder.setView(inflater.inflate(R.layout.popup_connexion, null))
        // Add action buttons
               .setPositiveButton(R.string.connexion, new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {

                            String tmp = "login: " + login.getText().toString() + "|"; // with the debugger we can see it's the good EditText with the id
                          Toast.makeText(getActivity().getApplication().getApplicationContext(), tmp, Toast.LENGTH_SHORT).show();
                   }
               })
               .setNegativeButton(R.string.annuler, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       PopUpConnexion.this.getDialog().cancel();
                   }
               });     
        return builder.create();
    }

} 
```

使用 login.setText("test"); 我们可以得出结论，可以看到的视图与我 getText() 的视图不同。

最终编辑：

```
 public class PopUpConnexion extends DialogFragment {

    EditText identifiant;
    EditText motdepasse;
    Button Connexion;

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(this.getActivity());
        // Get the layout inflater
        LayoutInflater inflater = this.getActivity().getLayoutInflater();

        View textEntryView = inflater.inflate(R.layout.popup_connexion, null);
        login = (EditText) textEntryView.findViewById(R.id.edtlogin);
        password = (EditText) textEntryView.findViewById(R.id.edtpassword);
        Connexion = (Button) textEntryView.findViewById(R.id.loginButton);

        Connexion.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Toast.makeText(getActivity().getApplication().getApplicationContext(), login.getText() + " " + password.getText(), Toast.LENGTH_SHORT).show();
            }
        });

        builder.setView(textEntryView);
        return builder.create();
    }

} 
```

最后，我不像男人那样使用事件管理器。我已经测试过这项技术，但由于在您编写 OnClickListener 时 DialogFragment.OnClickListener 和 View.OnClickListener 之间存在混淆，我遇到了一些错误。现在它可以工作了，但我认为它存在使用 builder.setPositiveButon() & co 的更好方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T09:44:05.870

您想要显示对话框 frnd。你想要的那种

# shared-libraries - MPI - 加载共享库时出错

> ID：14769599
> 
> 赞同：13
> 
> 时间：2013-02-08T09:39:18.967
> 
> 标签：shared-libraries, mpi, linker-errors

我遇到的问题已经在这里解决了： [Loading shared library in open-mpi/mpi-run](https://stackoverflow.com/questions/11368215/loading-shared-library-in-open-mpi-mpi-run)

当我的安装本身指定必要的 -L 参数时，我不知道如何设置`LD_LIBRARY_PATH`或指定`-x LD_LIBRARY_PATH`解决问题。我的安装在`~/mpi/`

我还包括了我的编译链接配置。

```
$ mpic++ -showme:version 
mpic++: Open MPI 1.6.3 (Language: C++)

$ mpic++ -showme
g++ -I/home/vigneshwaren/mpi/include -pthread -L/home/vigneshwaren/mpi/lib
-lmpi_cxx -lmpi -ldl -lm -Wl,--export-dynamic -lrt -lnsl -lutil -lm -ldl

$ mpic++ -showme:libdirs
/home/vigneshwaren/mpi/lib

$ mpic++ -showme:libs
mpi_cxx mpi dl m rt nsl util m dl    % Notice mpi_cxx here % 
```

当我编译`mpic++ <file>`并运行时，`mpirun a.out`出现（共享库）链接器错误

```
error while loading shared libraries: libmpi_cxx.so.1: 
cannot open shared object file: No such file or directory 
```

该错误已通过设置修复`LD_LIBRARY_PATH`。问题是如何以及为什么？我错过了什么？为什么`LD_LIBRARY_PATH`当我的安装看起来很好时需要。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T10:37:59.867

`libdl`、`libm`、`librt`和都是必不可少的系统范围的库，它们是非常基本的操作系统安装的一部分`libnsl`。并且是 Open MPI 安装的一部分，在您的情况下位于必须明确包含在链接器搜索路径中的非标准位置。`libutil``libmpi``libmpi_cxx``LD_LIBRARY_PATH`

可以修改 Open MPI 编译器包装器的配置并使它们将`-rpath`选项传递给链接器。获取库路径并将其附加到存储在可执行文件中的列表中，该列表告诉运行时链接编辑器（也称为动态链接器）在查询变量`-rpath`之前在哪里搜索库。`LD_LIBRARY_PATH`例如，在您的情况下，以下选项就足够了：

```
-Wl,-rpath,/home/vigneshwaren/mpi/lib 
```

这会将 Open MPI 库的路径嵌入到可执行文件中，并且该路径是否是`LD_LIBRARY_PATH`运行时的一部分并不重要。

要使相应的包装器将该选项添加到编译器标志列表中，`mpiXX-wrapper-data.txt`您必须修改位于. 例如，要通过该选项，您必须修改以下内容并将其添加到以 开头的行：`XX``cc``c++``CC``f90``mpi/share/openmpi/``mpicc``/home/vigneshwaren/mpi/share/openmpi/mpicc-wrapper-data.txt``linker_flags=`

```
linker_flags= ... -Wl,-rpath,${prefix}/lib 
```

`${prefix}`由包装器自动扩展为当前的 Open MPI 安装路径。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-11-26T11:21:17.363

就我而言，我只是简单地追加

```
export LD_LIBRARY_PATH=/PATH_TO_openmpi-version/lib:$LD_LIBRARY_PATH 
```

例如

```
export LD_LIBRARY_PATH=/usr/local/openmpi-1.8.1/lib:$LD_LIBRARY_PATH 
```

进入`$HOME/.bashrc`文件，然后将其重新激活`source $HOME/.bashrc`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-07T01:20:22.743

我在 Ubuntu 上使用以下命令安装了**mpich 3.2 。**

```
sudo apt-get install mpich 
```

当我尝试使用**mpiexec**运行 mpi 进程时，我得到了同样的错误。

```
/home/node1/examples/.libs/lt-cpi: error while loading shared libraries: libmpi.so.0: cannot open shared object file: No such file or directory 
```

配置**LD_LIBRARY_PATH**并没有解决我的问题。

我在我的机器上搜索了文件**“libmpi.so.0”**，但找不到。我花了一些时间才发现**“libmpi.so.0”**文件在我的机器上被命名为**“libmpi.so” 。**所以我将它重命名为**'libmpi.so.0'**。

*它解决了我的问题！*

如果您遇到同样的问题并且您通过 apt-get 安装了该库，请执行以下操作。

文件**“libmpi.so”**应位于**“/usr/lib/** ”位置。将文件重命名为**“libmpi.so.0”**

`mv /usr/lib/libmpi.so /usr/lib/libmpi.so.0`

之后，**MPI**作业应该可以毫无问题地运行。

如果在**'/usr/lib'**中找不到**'libmpi.so'**，您可以使用以下命令获取其位置。

 **```
whereis libmpi.so 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-09T19:51:00.623

首先，运行这个命令

```
$ sudo apt-get install libcr-dev 
```

如果仍然有这个问题，那么像这样配置 LD_LIBRARY_PATH：

```
export LD_LIBRARY_PATH=/usr/local/mpich-3.2.1/lib:$LD_LIBRARY_PATH 
```

然后将其添加到 ~/.bashrc 此行之前：

```
[ -z "$PS1" ] && return 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-16T14:45:20.420

简单地运行

```
$ ldconfig 
```

在我看来，这是解决问题的更好方法（取自对此问题的评论[）](https://stackoverflow.com/questions/480764/linux-error-while-loading-shared-libraries-cannot-open-shared-object-file-no-s)。特别是，因为它避免了`LD_LIBRARY_PATH`环境变量的误用。请参阅[此处](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)和[此处](https://www.hpc.dtu.dk/?page_id=1180)，了解为什么我认为它被滥用来解决手头的问题。**

# objective-c - 如何编写“clamp”/“clip”/“bound”宏来返回给定范围内的值？

> ID：14769603
> 
> 赞同：9
> 
> 时间：2013-02-08T09:39:40.757
> 
> 标签：objective-c, c, macros, predefined-macro

我经常发现自己在写类似的东西

```
int computedValue = ...;
return MAX(0, MIN(5, computedValue)); 
```

我希望能够把它写成一个单行宏。它必须没有副作用，就像现有系统宏 MIN 和 MAX 一样，并且应该适用于与 MIN 和 MAX 相同的数据类型。

谁能告诉我如何把它变成一个宏？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-08T10:17:32.087

这没有副作用，适用于任何原始数字：

```
#define MIN(A,B)    ({ __typeof__(A) __a = (A); __typeof__(B) __b = (B); __a < __b ? __a : __b; })
#define MAX(A,B)    ({ __typeof__(A) __a = (A); __typeof__(B) __b = (B); __a < __b ? __b : __a; })

#define CLAMP(x, low, high) ({\
  __typeof__(x) __x = (x); \
  __typeof__(low) __low = (low);\
  __typeof__(high) __high = (high);\
  __x > __high ? __high : (__x < __low ? __low : __x);\
  }) 
```

可以这样使用

```
int clampedInt = CLAMP(computedValue, 3, 7);
double clampedDouble = CLAMP(computedValue, 0.5, 1.0); 
```

其他建议的名称而不是`CLAMP`可以是`VALUE_CONSTRAINED_LOW_HIGH`, `BOUNDS`, `CLIPPED`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T09:58:01.860

取自该站点[http://developer.gnome.org/glib/2.34/glib-Standard-Macros.html#CLAMP:CAPS](http://developer.gnome.org/glib/2.34/glib-Standard-Macros.html#CLAMP:CAPS)

```
#define CLAMP(x, low, high)  (((x) > (high)) ? (high) : (((x) < (low)) ? (low) : (x))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T09:46:57.860

也许你想这样尝试：

```
template <class T> 
const T& clamp(const T& value, const T& low, const T& high) {
    return value < low ? low:
           value > high? high:
                         value;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T09:56:45.113

```
 #define MAX(a, b) (((a) > (b)) ? (a) : (b)) 
 #define MIN(a, b) (((a) > (b)) ? (b) : (a)) 
```

将它放在一个#define 指令中不会很容易阅读。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-08T09:55:28.397

仅使用一个比较操作：

```
static inline int clamp(int value, int min, int max) {
    return min + MIN((unsigned int)(value - min), max - min)
} 
```

# python - 在 django 中替换电子邮件中的一些特殊字符

> ID：14769609
> 
> 赞同：-2
> 
> 时间：2013-02-08T09:40:06.707
> 
> 标签：python, django, special-characters

我想在 django 中替换电子邮件中的特殊字符。我有谷歌这个问题，发现堆栈问题是非常有用的[问题](https://stackoverflow.com/questions/14747459/remove-special-chracters-from-a-string-in-django)。

但这有一些问题。如果我试过这个

```
a='testemail@email.com'
    replace=['@','.']
    for i in replace:
        a=a.replace(i,'_') 
```

或这个

```
u_name=re.sub(r'[^a-zA-Z0-9]', '_', str(email)) 
```

并在模板中

```
{% for i in u_name%}
{{i}}<br>
{% endfor %} 
```

它会回来

```
t
e
s
t
e
m
a
i
l
_
e
m
a
i
l
_
c
o
m 
```

但我想要这样`testemail_email_com`，这样我就可以在循环的帮助下将它存储在数据库中，但它只存储第一个字符。

所以请告诉我我该怎么做。

谢谢

我正在从其他数据库迁移一些数据，并希望将其存储到 django db 中。假设我有 1o 个用户的数据，这些用户的电子邮件存储到以下数组中。现在我想替换这些电子邮件中的特殊字符，以便我可以将它们用作用户名。

**编辑：**

```
email.append(row[i][1]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:47:38.737

如果`u_name`是一个字符串，你可以使用这个：

`{{u_name}}<br>`

您正在遍历字符串的每个字符 - 即

```
>>> for i in "mystring":
    print i

m
y
s
t
r
i
n
g 
```

* * *

根据您的编辑：

如果`emails`是数组的名称，则需要替换每个元素，然后打印：

```
>>> emails = ["me@apple.com", "you@test.com"]
>>> emails = [re.sub(r'[^a-zA-Z0-9]', '_', x) for x in emails]
>>> print emails
['me_apple_com', 'you_test_com'] 
```

然后使用模板：

```
{% for email in emails%}
{{email}}<br>
{% endfor %} 
```

# android - 从 AsyncTask 不调用 onPostExecute 方法

> ID：14769610
> 
> 赞同：1
> 
> 时间：2013-02-08T09:40:07.967
> 
> 标签：android, android-asynctask

这个 asyncTask 类在 Launcher Activity 的 onCreate() 方法中被调用，我想从这个 2 AsyncTask 类调用服务并将数据存储在 sqlite 数据库中。但是在这 2 个 asyncTask 中调用了 onPreExecute() 和 doInBackground() 方法，但从未调用过 onPostExecute() 方法。请告诉我为什么会这样，谢谢

```
public class EcafeHome extends Activity 
{
    @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);

            new GetOfferData(EcafeHome.this).execute("runnable");
            new GetMenuData(EcafeHome.this).execute("params");
        }
}

    public class GetOfferData extends AsyncTask<String, Void, String>
    {
        Context mContext = null;
        public GetOfferData(Context mContext)
        {
            this.mContext = mContext;
        }

        @Override
        protected void onPreExecute()
        {
            super.onPreExecute();
            Log.d("GetOfferJsonData", "onPreExecute");
        }

        @Override
        protected String doInBackground(String... params)
        {
            Log.d("GetOfferJsonData", "doInBackground");
            return Common.InputStreamToString(Common.HTTP_GET(Constant.host, Constant.serviceUrlProt, Constant.URL.catagoryList));
        }

        @Override
        protected void onCancelled(String result) 
        {
            super.onCancelled(result);
            Log.d("GetOfferJsonData", "onCancelled");
        }

        @Override
        protected void onPostExecute(String response) 
        {
            super.onPostExecute(response);
            Log.d("GetOfferJsonData", "onPostExecute");
            if(response != null)
            {
                Log.d("response", response);
                try 
                {
                    JSONObject mJsonObject = new JSONObject(response);
                    JSONArray jArrayPackages = mJsonObject.getJSONArray(Constant.JSON_KEY.PACKAGE.PACKAGES); 

                    for(int i = 0; i < jArrayPackages.length(); i++)
                    {
                        JSONObject jObjectPackages = jArrayPackages.getJSONObject(i);

                        int packageId = jObjectPackages.getInt(Constant.JSON_KEY.PACKAGE.ID);

                        String pkgName = jObjectPackages.getString(Constant.JSON_KEY.PACKAGE.NAME);

                        int pkgprice = jObjectPackages.getInt(Constant.JSON_KEY.PACKAGE.PRICE);

                        String pkgpic = jObjectPackages.getString(Constant.JSON_KEY.PACKAGE.PIC);

                        DBConstant.openDatabase(mContext);
                        Cursor cursorOffer = DBConstant.mDBHelper.getPackageInfo(DBConstant.mSQLiteDatabase, packageId); 
                        if(cursorOffer != null)
                        {
                            Log.d("package offer", ""+cursorOffer.getCount());
                            if(cursorOffer.getCount() == 0)
                            {
                                DBConstant.mDBHelper.insertPackageInfo(DBConstant.mSQLiteDatabase, packageId, pkgName, pkgprice, pkgpic);
                            }
                        }
                        else
                        {

                        }
                        if(!cursorOffer.isClosed())
                            cursorOffer.close();

                        JSONArray jArrayPackageItem = jObjectPackages.getJSONArray(Constant.JSON_KEY.PACKAGE.PACKAGE_ITEMS);

                        for(int j = 0; j < jArrayPackageItem.length(); j++) 
                        {
                            JSONObject jObjectPackageItem = jArrayPackageItem.getJSONObject(j);
                            int pkgItemID = jObjectPackageItem.getInt(Constant.JSON_KEY.PACKAGE_ITEM.ID);

                            int pkgItemQnty = jObjectPackageItem.getInt(Constant.JSON_KEY.PACKAGE_ITEM.QUANTITY);

                            int menuitemid = jObjectPackageItem.getInt(Constant.JSON_KEY.PACKAGE_ITEM.MENU_ITEM_ID);

                            int pkgID = jObjectPackageItem.getInt(Constant.JSON_KEY.PACKAGE_ITEM.PACKAGE_ID);

                            //DBConstant.mDBHelper.insertPackageItemInfo(DBConstant.mSQLiteDatabase, pkgItemID, pkgID, menuitemid, pkgItemQnty);
                            DBConstant.openDatabase(mContext);
                            Cursor cursorOfferItem = DBConstant.mDBHelper.getPackageItemInfo(DBConstant.mSQLiteDatabase, pkgItemID); 
                            if(cursorOfferItem != null)
                            {
                                Log.d("package Item offer", ""+cursorOfferItem.getCount());
                                if(cursorOfferItem.getCount() == 0)
                                {
                                    DBConstant.mDBHelper.insertPackageItemInfo(DBConstant.mSQLiteDatabase, pkgItemID, pkgID, menuitemid, pkgItemQnty);
                                }
                            }
                            if(!cursorOfferItem.isClosed())
                                cursorOfferItem.close();

                            DBConstant.closeDatabase(); 
                        }
                    }

                }
                catch (JSONException e) 
                {
                    e.printStackTrace();
                }
            }
        }
    } 
```

在此有 2 个 AsyncTask 不能并行工作，我想先执行两个 AsyncTask，然后再执行其他任务。那么它是如何实现的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:49:16.480

将 放在`super.onPostExecute(response);`的底部`protected void onPostExecute(String response)`，代码行之后。

还有他们`super.onPreExecute();`的`super.onCancelled(result);`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:03:48.420

也许你的http请求不返回结果？尝试在`doInBackground`没有互联网交互的情况下获得许多结果。

关于两个 AsyncTask：

> 如果你真的想要并行执行，你可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])。

从这里[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# c# - 如何将访问权限“所有人”分配给目录

> ID：14769616
> 
> 赞同：1
> 
> 时间：2013-02-08T09:40:22.103
> 
> 标签：c#, .net, security, permissions, windows-identity

我在 C# 中的小程序中为 Windows上的目录文件夹“ **wwwroot ”上的“** **Everyone** ”分配访问权限时遇到问题。这是我的做法。

 **```
//I also try with 'S-1-1-0'/'Everyone' but it's the same result 
string userPermission = "Everyone"  ;

DirectoryInfo myDirRoot = new DirectoryInfo(myArmsUpdate.InstallationPath);
DirectorySecurity myDirectorySecurity = myDirRoot.GetAccessControl();
FileSystemAccessRule myPermission = new FileSystemAccessRule(userPermission , FileSystemRights.ReadAndExecute, InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit, PropagationFlags.InheritOnly, AccessControlType.Allow);

myDirectorySecurity.AddAccessRule(myPermission);
myDirRoot.SetAccessControl(myDirectorySecurity); 
```

但是我仍然遇到同样的错误：

> System.Security.Principal.IdentityNotMappedException

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:52:50.090

试试下面的，

```
DirectorySecurity sec = Directory.GetAccessControl(path);
        // Using this instead of the "Everyone" string means we work on non-English systems.
        SecurityIdentifier everyone = new SecurityIdentifier(WellKnownSidType.WorldSid, null);
        sec.AddAccessRule(new FileSystemAccessRule(everyone, FileSystemRights.Modify | FileSystemRights.Synchronize, InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit, PropagationFlags.None, AccessControlType.Allow));
        Directory.SetAccessControl(path, sec); 
```

**注意：您必须是管理员才能执行此操作****

# c++ - 链表测试函数 + 除以零错误

> ID：14769620
> 
> 赞同：0
> 
> 时间：2013-02-08T09:40:33.450
> 
> 标签：c++, constructor, linked-list, division, zero

我应该创建一个双向链表。我还获得了一个测试链表函数的 CPP 文件（“test.cpp”文件）。我遇到的问题是 A）我不知道我的构造函数和析构函数应该做什么，并且 B）编译器不编译 test.cpp 文件，因为它有“除以零”错误，当当我的 List 构造函数将列表“head”初始化为 NULL 时，它正在编译它。

以下是**链表中节点的代码**：

```
template <class T>
struct ListItem
{
    T value;
    ListItem<T> *next;
    ListItem<T> *prev;

    ListItem(T theVal)
    {
         this->value = theVal;
         this->next = NULL;
         this->prev = NULL;
    }
}; 
```

**通用列表类**如下：

```
template <class T>
class List
{
    ListItem<T> *head;

public:

     // Constructor
     List();

    // Copy Constructor
    List(const List<T>& otherList);

    // Destructor
    ~List();

    void insertAtHead(T item);  
 }; 
```

以下是我目前**对构造函数、析构函数和 insertAtHead 函数**（获得零错误除法的函数之一）的实现。

```
template <class T>
List<T>::List()
{
               head->value=0; 
}

template <class T>
List<T>::~List()
{
            ListItem<T> *temp, *temp2;
            temp=head;
                if(head->next==NULL)
                {
                                    delete head;
                }
                else
                {
                    while(temp->next!=NULL)
                    {
                                 temp=temp->next;
                                 temp2=temp->prev;
                                 delete[] temp2;
                    }
                   delete [] temp;
                   delete [] head;
                }
}

template <class T>
void List<T>::insertAtHead(T item)
{
     ListItem<T>* a = new ListItem<T>(item);

                if(head->next==NULL && head->value=0)
                {
                             head=a;
                }

                else
                {
                    head->prev=a;
                    a->next=head;
                    head=a;
                }
} 
```

最后，这**是测试**包含被零除的 insertAtHead 的函数。

```
 void test_list_insert_head()
  {
       lasttotpoints = 5;

    List<int> l;
   for (int i = 0; i < 25000; i++)
    {
        l.insertAtHead(i);
        ListItem<int> *tmp = l.getHead();
        int k = i;
        while (tmp != NULL)
        {
            if (tmp->value != k)
             int a = 1/0;
             k--;
             tmp = tmp->next;
        }
    }
    cout << ".";

     lastpoints += 5;
} 
```

为什么编译器之前没有注意到除以零，我的构造函数和析构函数到底应该做什么？谢谢。PS。我知道我已经发布了很多代码，但我现在有点绝望。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:46:25.753

其实我不明白你在问什么。我看到了一种测试，而在不一致的情况下，测试应该生成“整数除以零”异常或适用于特定平台的任何异常。一个非常变态的想法恕我直言。

那么，为什么编译器不“注意到”除以零呢？AFAIK 它不必。严格来说，它可能会生成执行此操作的代码。是的，这会在运行时产生处理器异常（中断），那又如何呢？如果这是作者的意图 - 我在这里没有看到问题，至少从编译器的角度来看。

您是否想说编译器的行为不一致，有时允许编译？

# glassfish - 无法访问 glassfish 网络管理控制台

> ID：14769621
> 
> 赞同：0
> 
> 时间：2013-02-08T09:40:34.187
> 
> 标签：glassfish, debian, glassfish-3

我按照本[教程](http://www.nabisoft.com/tutorials/glassfish/installing-glassfish-311-on-ubuntu)进行了一些更改，以便在远程主机上安装 GlassFish。

*   Debian 6.0.5 而不是 Ubuntu 10.04
*   GlassFish 版本 3.1.2.2 而不是 3.1.1
*   sun-java6-jdk (1.6.0_26) - 也使用 openjdk 6u18 和 7u3 进行了测试。

一切正常，除了 Web 管理控制台。我可以通过 CLI 和 asadmin 部署应用程序（例如 Jenkins）并且它们可以工作。但我无法通过 http(s)://my-domain:4848 访问 Web 管理控制台

我的浏览器 (Safari) 通知我有关我的自签名证书，过了一会儿它报告它无法与我的服务器建立安全连接。

日志（glassfish/domains/domain1/log/server.log）是干净的。我关闭了防火墙，但问题仍然存在。

有人可以帮我解决这个问题，或者有人建议我可以尝试解决什么。

--

非常感谢，

埃尔玛

* * *

编辑：通过禁用安全管理员，我可以访问登录页面但无法登录（*必须启用安全管理员才能远程访问 DAS。*）。使用启用的安全管理员，我什至可以注意到访问登录页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:22:11.353

问题是Safari。通过 Firefox 访问管理控制台没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:52:08.387

"netstat -aptun | grep 4848" 告诉我们什么？

还看看是否启用了安全管理员？“asadmin> 获取安全管理员。启用”

据我所知，如果禁用了安全管理员，您将无法从远程访问 DAS。

我希望这将有所帮助。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T13:18:34.477

Safari 将不会与具有使用 DSA 签名和 SHA1 摘要签名算法的证书的服务器建立安全连接。您将不得不使用 RSA 算法。

尝试使用以下命令创建新证书：

```
keytool -genkeypair -keystore your_keystore.jks -keyalg RSA -keysize 1024 
```

# android - Android - 在类中设置和获取字符串数组

> ID：14769626
> 
> 赞同：0
> 
> 时间：2013-02-08T09:41:12.763
> 
> 标签：android, arrays, string

我有一堂课是这样的：

```
public class Personel {

  private 
    String Name = null;
    String pathOne[] = new String[3];
    String pathTwo[] = new String[3];

  public void setName(String name){
    Name = name;
  }

  public void setPathOne(String Path[]){
    pathOne[0] = Path[0];
    pathOne[1] = Path[1];
    pathOne[2] = Path[2];
  }

  public void setPathTwo(String Path[]){
    pathTwo[0] = Path[0];
    pathTwo[1] = Path[1];
    pathTwo[2] = Path[2];
  }

  public String getName(){
    return Name;
  }

  public String getPathOne(){
    return pathOne[];
  }

  public String getPathTwo(){
    return pathTwo[];
  }
} 
```

我有两个字符串数组，`pathOne[]`每个数组`pathTwo[]`有三个元素。我怀疑我是否正确初始化了它。

此外，我的`getPathOne()`和`getPathTwo()`方法出现错误。

我应该将字符串初始化为：

```
private 
    String Name = null;
    String[] pathOne = new String[3];
    String[] pathTwo = new String[3]; 
```

并将我的 getPath 方法设置为：

```
public String[] getPathOne(){
    return pathOne;
}

public String[] getPathTwo(){
    return pathTwo;
} 
```

抱歉，我在输入这个问题时才意识到另一种选择。我还没有尝试过。仍然欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:10:10.073

1.  只是你想将所有数据存储到数组中。
2.  之后你使用下面的代码。

    公共类 Personel {`public Array getPathOne(){ return pathOne[]; }

    public Array getPathTwo(){ return pathTwo[]; }

    }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:12:41.903

我想明白了。

私有变量应该是：

```
private 
    String Name = null;
    String pathOne[] = new String[3];
    String pathTwo[] = new String[3]; 
```

设置路径变量还是一样的。如果有人可以做我上面所做的简写版本，我将非常感激。我还没有尝试`pathOne = Path;`

返回方法应该如下

```
public String[] getPathOne(){
    return pathOne;
}

public String[] getPathTwo(){
    return pathTwo;
} 
```

它有效，因为我在尝试时设法获得了积极的结果：

```
 Personel Joe = new Personel();
        Joe.setName("Joe");
        String PathOne[] = {"X", "Y", "Z1"};

        Joe.setPathOne(PathOne);

        String pathOne[] = Joe.getPathOne();
        String name = Joe.getName();

        for(int i = 0 ; i < pathOne.length ; i ++){
            System.out.println("Personel " + name +  " Letter at index " + i + " is " + pathOne[i] + ".");
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:47:47.503

`return pathTwo[];`这不是正确的语法。

`public String[] getPathOne(){...}`这是获取`pathOne`数组的正确方法，你可以做些什么来`getPathOne(index)`通过索引获取价值。

```
public String getPathOne(int index){
    if(pathOne.length<index)
       return pathOne[index];
    return null;
}

public String[] getPathTwo(int index){
    if(pathTwo.index<index)
       return pathTwo[index];
    return null;
} 
```

# r - 如何使用 R 从图像中获取像素数据

> ID：14769628
> 
> 赞同：7
> 
> 时间：2013-02-08T09:41:24.247
> 
> 标签：r, colors, rgb, pixel

谁能帮助我如何从 R 中的图像中获取 RGB 像素数据？

我需要这些信息来比较鸟类羽毛的差异，以帮助理解物种形成事件。

我的照片是用数码相机拍摄的，现在是 NEF 文件。需要哪种类型的文件并不重要，我可以将文件转换为我想要的任何文件。但是，我更愿意在文件中保留尽可能多的信息（即 PNG 文件很好）。

我在 R 中尝试了许多软件包：Pixmap、Raster、ImageMetrics 并浏览了互联网、测试了方法、询问了同学等几个星期来试图解决这个问题。在 Stackoverflow 我试过这个：[如何提取像素数据使用 R 的 pixmap 包？](https://stackoverflow.com/questions/6085090/how-to-extract-the-pixel-data-use-rs-pixmap-package)，没有运气。我的文件对于 R 窗口来说也太大了（整个数组没有显示），我很难理解生成的数组。对我来说，最好的办法是将数据作为矩阵或以另一种更容易理解的方式获取数据。我发现了大量类似的问题，但在其他程序（如 Java、C++、IOS、Matlab、Python 等）中，我很遗憾不知道如何使用。

我的问题可能是由于我对这类工作的技能低下，但我正在尽我所能在我所拥有的背景下努力。如果有人可以帮助我或给我一些提示，我将非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T10:06:08.953

首先我生成一个示例`png`图像：

```
png("/tmp/test.png")
plot(rnorm(100))
dev.off() 
```

然后我将其转换为可读的格式`pixmap`：在这里我将 png 转换为 ppm 文件，因为我想保留颜色信息。我从命令行使用 ImageMagick，但你可以使用任何你想要的程序：

```
$ convert /tmp/test.png /tmp/test.ppm 
```

`read.pnm`接下来，您可以使用包中的函数读取图像`pixmap`：

```
x <- read.pnm("/tmp/test.ppm") 
```

然后，您可以使用`x@red`, `x@blue`,`x@green`插槽（或`x@grey`用于灰度图像）将每个通道的像素值作为矩阵获取。您可以检查矩阵的尺寸是否与图片的尺寸相同：

```
dim(x@red)
[1] 480 480 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-05T14:52:14.347

以这个 3x3 像素 png 图像为例：

![示例图像](../Images/c691bc628c8763857cb9a5498f4cd7ee.png)

然后：

```
library('png')
download.file('http://i.stack.imgur.com/hakvE.png', 'sample.png')
img <- readPNG('sample.png')
pix.top.left <- img[1,1,]     # row 1, column 1
pix.bottom.left <- img[3,1,]  # row 3, column 1
pix.top.right <- img[1,3,]    # row 1, column 3 
```

如果您正在读取带有 alpha 通道的 PNG 图像（如上面的示例图像），那么每个`pix.`变量都是一个包含四个条目的向量，每个条目对应于像素的红色、绿色、蓝色和 Alpha 值。

```
> pix.top.left
[1] 1 0 0 1 
```

# java - 无法连接到 FTPS 服务器

> ID：14769629
> 
> 赞同：1
> 
> 时间：2013-02-08T09:41:25.033
> 
> 标签：java, apache, file, ftps, b2b

我能够通过 FTP 连接到 Apache FTP 服务器（[http://mina.apache.org/ftpserver-project/index.html](http://mina.apache.org/ftpserver-project/index.html)）。我按照相同的方式进行 FTPS 连接。但是当我运行客户端程序时出现以下错误。有人可以帮助我编写客户端类吗？

这是启动服务器的代码。

```
public class FTPSServer {
public static void main(String[] args) {
    FtpServerFactory serverFactory = new FtpServerFactory();
    ListenerFactory factory = new ListenerFactory();
    // set the port of the listener
    factory.setPort(2221);
    // define SSL configuration
    SslConfigurationFactory ssl = new SslConfigurationFactory();
    ssl.setKeystoreFile(new File(
            "src/ftp/resources/cert.jks"));
    ssl.setKeystorePassword("password");
    // set the SSL configuration for the listener
    factory.setSslConfiguration(ssl.createSslConfiguration());
    factory.setImplicitSsl(true);
    // replace the default listener
    serverFactory.addListener("default", factory.createListener());

    PropertiesUserManagerFactory userManagerFactory = new PropertiesUserManagerFactory();

    userManagerFactory.setPasswordEncryptor(new SaltedPasswordEncryptor());
    UserManager userManager = userManagerFactory.createUserManager();

    BaseUser user = new BaseUser();
    user.setName("test");
    user.setPassword("test");
    user.setHomeDirectory("D:\\FTP-TEST-UPLOADS");
    List<Authority> auths = new ArrayList<Authority>();
    Authority auth = new WritePermission();
    auths.add(auth);
    user.setAuthorities(auths);
    try {
        userManager.save(user);
    } catch (FtpException e1) {
        e1.printStackTrace();
    }
    serverFactory.setUserManager(userManagerFactory.createUserManager());
    // start the server
    FtpServer server = serverFactory.createServer();
    try {
        server.start();
        System.out.println("FTPs Server Started");
    } catch (FtpException e) {
        e.printStackTrace();
    }
} 
```

}

和我的客户类：

```
class FtpClient {
private static String ftpServerAddress = "localhost";
private static int port = 2121;
private static String userName = "test";
private static String password = "test";

public static void main(String[] args) {
    try {
        uploadFile();
        downloadFile();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private static void downloadFile() throws IOException {
    FTPClient client = new FTPClient();
    FileOutputStream fos = null;
    boolean result;

    try {
        client.connect(ftpServerAddress, port);

        result = client.login(userName, password);

        if (!FTPReply.isPositiveCompletion(client.getReplyCode())) {
            client.disconnect();
            System.err.println("FTP server refused connection.");
            System.exit(1);
        }

        if (result == true) {
            System.out.println("Successfully logged in!");
        } else {
            System.out.println("Login Fail!");
            return;
        }

        // The remote filename to be downloaded.
        String filename = "Technolabs Logo.PNG";
        fos = new FileOutputStream(filename);

        // Download file from FTP server

        result = client.retrieveFile("receivedFiles/" + filename, fos);
        if (result == true)
            System.out.println("File was downloaded");
        client.logout();
    } catch (FTPConnectionClosedException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            client.disconnect();
            fos.close();
        } catch (FTPConnectionClosedException e) {
            System.out.println(e);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

private static void uploadFile() throws IOException {
    FTPClient client = new FTPClient();
    FileInputStream fis = null;
    boolean result;

    try {
        client.connect(ftpServerAddress, port);

        result = client.login(userName, password);

        if (!FTPReply.isPositiveCompletion(client.getReplyCode())) {
            client.disconnect();
            System.err.println("FTP server refused connection.");
            System.exit(1);
        }

        if (result == true)
            System.out.println("Successfully logged in!");
        else {
            System.out.println("Login Fail!");
            return;
        }
        client.setFileType(FTP.BINARY_FILE_TYPE);

        client.enterLocalPassiveMode();

        client.changeWorkingDirectory("/");

        File file = new File("D:/myFile.PNG");
        String testName = file.getName();
        fis = new FileInputStream(file);

        // Upload file to the ftp server
        result = client.storeFile(testName, fis);

        if (result == true) {
            System.out.println("File is uploaded successfully");
        } else {
            System.out.println("File uploading failed");
        }
        client.logout();
    } catch (FTPConnectionClosedException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            client.disconnect();
            fis.close();
        } catch (FTPConnectionClosedException e) {
            System.out.println(e);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:47:49.583

你可以通过

1 隐式SSL，首先需要协商 SSL/TLS ，然后建立连接

2 显式 SSL，如此[处所述](https://www.rfc-editor.org/rfc/rfc4217)

另外，你可以使用 apache-commons`FTPSClient`吗？

# python - django ManyToManyManager 在 post_save 中返回空列表

> ID：14769632
> 
> 赞同：0
> 
> 时间：2013-02-08T09:41:33.997
> 
> 标签：python, django

我有一个 post_save 信号连接到我的模型（发票 - 有 case=ManyToManyField(Case)）。但看起来它无法获得实际保存的值！当我创建一个 Invoice 对象时，会调用下面的函数并且 case.all() 返回空列表，即使这些案例已保存并显示在 GUI 中并且位于 DB 中。

```
 @receiver(post_save, sender=Invoice)
    def set_invoiced_to_jobs(sender, **kwargs):
        db_obj = sender.objects.get(pk=kwargs['instance'].pk)
        if kwargs['created']:
            print db_obj.from_date
            print db_obj.cases.all() 
```

# android - Android从活动启动Play商店，然后强制Play商店返回

> ID：14769635
> 
> 赞同：0
> 
> 时间：2013-02-08T09:41:47.620
> 
> 标签：android, google-play

从我的活动中，我正在启动 Play 商店并让用户安装应用程序，但我也希望 Play 商店将用户返回到我的活动中。

启动 PLAY 商店的代码

```
String blueFireId = "com.bluefirereader"; // this is out of the oncreate function

    try {
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id="+blueFireId)));
    } catch (android.content.ActivityNotFoundException anfe) {
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://play.google.com/store/apps/details?id="+blueFireId)));
    } 
```

上面的代码工作正常，还有什么方法可以让 Play 商店将用户返回到我的活动，以便我可以继续使用我的应用程序所需的剩余步骤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:45:34.173

不可以。您无法控制不属于您自己的任何其他应用程序的行为。

# php - PHP 变量中的下划线是什么意思？

> ID：14769636
> 
> 赞同：0
> 
> 时间：2013-02-08T09:41:49.760
> 
> 标签：php

我在 $_GET、$_POST、$_db 等上看到它们。这是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T09:46:10.973

大多数情况下，任何遵循约定 $_ 且全部大写的变量都是[PHP 预定义变量。](http://php.net/manual/en/reserved.variables.php)

以下所有都是预定义的变量：

```
$_SERVER — Server and execution environment information
$_GET — HTTP GET variables
$_POST — HTTP POST variables
$_FILES — HTTP File Upload variables
$_REQUEST — HTTP Request variables
$_SESSION — Session variables
$_ENV — Environment variables
$_COOKIE — HTTP Cookies 
```

在旧代码中还有一个约定，即类中的受保护变量和私有变量以 _ 或 __ 为前缀。

正如 Peter 在下面的评论中指出的那样，使用 __ 通常表示魔术功能（常量和方法），并且 PHP 开发团队强烈建议使用 __ 作为前缀可能会由于与新功能的冲突而中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:47:07.177

通常已经被 PHP 声明的变量被认为是全局的。

用户创建的以下划线开头的变量和函数可以被解释为私有的——但这只是一个约定。

# windows - Windows 管道用于进程间通信的主要缺点是什么？

> ID：14769638
> 
> 赞同：6
> 
> 时间：2013-02-08T09:41:50.370
> 
> 标签：windows, scalability, pipe

假设您将一个单一的 Windows 程序拆分为可重用的组件，这些组件可以使用某种[进程间通信](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa365574%28v=vs.85%29.aspx)(IPC) 相互通信，并且无论出于何种原因，您都选择匿名管道（例如，启动多个 Process-es 和将 Console.Out 连接到下一个进程的 Console.In，或仅在命令提示符下使用“|”）。

[Dobbs 博士的一篇文章，其中包含一个带有命名管道](http://www.drdobbs.com/windows/using-named-pipes-to-connect-a-gui-to-a/231903148)的示例：

与同一台机器中的其他 IPC 方法相比，性能损失是多少？当增加进程数量或传输的数据量时，首先遇到的问题是什么？

例如，如果我们使用文件而不是管道，我们会遇到锁定问题和磁盘速度问题。

请注意，必须序列化正在传输的数据结构已经存在开销，这是我的效率损失基线。

PS。对管道的兴趣是因为它们很容易在每个进程（Console.Readline、Console.WriteLine）中实现，很容易为它们编写 MSMQ 和异步 HTTP 接口，以及对 Unix 和命令行的热爱。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T17:18:57.217

您可以使用 CreatePipe() Win32 API 调用创建双向匿名管道，因此管道输入/输出不是唯一的方法。您只需获得一个可以提供给其他进程的新文件句柄。

匿名管道基于共享内存，但不支持异步操作（通过 ReadFileEx、ReadFileWrite）。因此，性能问题（缺点）是 1）同步操作，2）内存复制，3）进程间同步。通常，“原始”共享内存（没有实际支持文件的内存映射文件）和命名管道会更快，而套接字和窗口消息会慢（比匿名管道）。

您不能将 I/O 完成端口 (IOCP) 与匿名管道一起使用，而是必须“轮询”管道，从而导致额外的上下文切换。除了序列化数据之外，序列化的数据还必须在内存中复制，因为您不能直接写入共享内存。一个进程也必须等待另一个进程，这意味着另一个进程必须发出进程间同步原语的信号。性能在很大程度上取决于消息的大小（读/写调用与发送的数据量的比率），因为对于每次读/写，进程必须进行上下文切换，并可能进行自旋/休眠。

除了“原始”共享内存之外的所有方法都需要内存复制和某种进程间信号（同步），因此匿名管道的主要缺点是同步操作。当 CPU 花费大部分时间进行上下文切换时，您将在传输大量消息时达到上限。

在性能方面，命名管道更好，因为您可以让工作线程使用 IOCP 处理异步通知，甚至可以通过一次调用接收多条消息，从而减少 API 开销。如果您自己制作组件，那么为管道命名所带来的额外麻烦是值得的（您甚至可以跨网络连接）。后来的 Windows 版本实现了本地套接字的特殊路由，它也支持 IOCP。

最快的方法是直接使用共享内存，但是你必须自己处理进程间同步。可以自己实现无锁管道，但如果您不经常传输数据，您仍然必须使用同步原语来通知/唤醒监听进程。

另请注意，使用文件并不意味着您会受到磁盘速度的限制，因为您可以使用内存映射文件，即使是普通文件，缓存管理器也会处理读取/写入。其他方法（RPC、剪贴板等）基于这些“标准”方法，这意味着它们只会添加一些额外的协议层，并且更容易/更有帮助，或者更适合某些编程环境（但不要更快）。

# asp.net - UpdatePanel 部分回发后如何保留 javascripts

> ID：14769641
> 
> 赞同：4
> 
> 时间：2013-02-08T09:41:52.593
> 
> 标签：asp.net, updatepanel, ajaxcontroltoolkit

有很多代码，所以我想用文字简短地解释一下这个问题。我有一个母版页，其中包括对 javascript 文件的所有引用，并且有使用母版页的页面。我在我的页面中使用更新面板，在更新面板内有一些表单，包括具有回发功能的表单（即下拉列表）。问题是当状态发生变化并发生部分回发时，由于这些 javascripts 而具有某些功能和效果的表单会失去所有功能。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T09:57:34.687

这是因为在使用更新面板返回部分内容后，您需要重新初始化 javascript。这是一个一般的例子

```
<script type="text/javascript"> 
   // if you use jQuery, you can load them when dom is read.
   $(document).ready(function () {
       var prm = Sys.WebForms.PageRequestManager.getInstance();    
       prm.add_initializeRequest(InitializeRequest);
       prm.add_endRequest(EndRequest);

       // Place here the first init
    });        

    function InitializeRequest(sender, args) {
    }

    function EndRequest(sender, args) {
       // after update occur on UpdatePanel re-init what you need

    }
</script> 
```

相关问题：
[Asp.Net UpdatePanel in Gridview Jquery DatePicker](https://stackoverflow.com/questions/3341623/asp-net-updatepanel-in-gridview-jquery-datepicker/3341741#3341741)
[How to get Id update panel that initial a request in javascript](https://stackoverflow.com/questions/10041169/how-to-get-id-update-panel-that-initial-a-request-in-javascript/10041337#10041337)

net 4 之后你也可以简单的使用该`pageLoad`函数，类似于 OnLoad 函数，只不过是由 asp.net 处理，在第一次页面加载时调用，也是在每次 ajax 更新后调用。

```
function pageLoad()
{
    // init here your javascript
    // This is called when the page load first time
    //  and called again each time you have an Update inside an UpdatePanel
} 
```

参考： http: [//msdn.microsoft.com/en-us/library/bb386417 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb386417(v=vs.100).aspx)

# ios - 为了开始全职 IOS 开发，我需要知道什么？

> ID：14769645
> 
> 赞同：1
> 
> 时间：2013-02-08T09:42:18.943
> 
> 标签：ios

我是一位经验丰富的 Web 开发人员，想转为全职 ios 开发。目前我的技能包括 php、javascript 和 MySQL。

我目前正在做关于 ios 开发 (lynda.com) 的视频教程课程，其动机是能够开发 ios 应用程序来提供基本的东西，比如跟踪每月预算。

我的问题是 - 我需要知道什么才能开始全职应用程序开发？目标 C 就足够了，还是我还必须学习 C++？

我非常感谢您对我的问题的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:58:40.640

你只**需要**了解 Objective-C 语言。当我开始使用这些教程时，我发现它们与娱乐同样有用：[新波士顿](http://thenewboston.org/list.php?cat=28)。它从设置新项目的基础知识开始，通过应用程序进行一些基本导航，稍后您将学习保存和加载数据。在这些之后，您将顺利地为应用商店开发出色的应用程序。

我确信您可以通过这些教程开发跟踪每月预算的应用程序，但对于更复杂的问题，[raywenderlich](http://www.raywenderlich.com/tutorials)教程非常棒且易于遵循。

话虽这么说，您可以在您的 iOS 项目中使用 C++ 代码，但是当您绝对需要时，需要研究它。总而言之，拥有其他 C 语言的背景知识很好，但不是必需的。

**编辑：** [this](https://stackoverflow.com/a/4986375/1359306) other SO answer更详细地介绍了C语言的超集，应该可以帮助您-“我说，如果您对至少一种编程语言有扎实的了解并了解C的构造和语法的基础知识，那么您应该是可以开始其他的东西。在开始使用 Obj-C 之前，您不需要能够编写强大的 C 应用程序，但是一旦可以，它将对您有很大帮助。”

祝一切顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:03:24.940

关注这个网站，你可以了解更多......

[http://www.raywenderlich.com/tutorials](http://www.raywenderlich.com/tutorials)

[http://mobile.tutsplus.com/tutorials/iphone/learn-objective-c-day-1/](http://mobile.tutsplus.com/tutorials/iphone/learn-objective-c-day-1/)

[http://www.icodeblog.com/](http://www.icodeblog.com/)

[http://mobileorchard.com/](http://mobileorchard.com/)

但是你之前应该有objective-c编程的知识

按照以下网址...

[http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/OOP_ObjC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005149-CH1-SW2](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/OOP_ObjC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005149-CH1-SW2)

希望对你有帮助....！！！！干杯...！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:04:19.497

我也在学习。

iTunes 上有一系列来自斯坦福大学的免费讲座课程。我发现[这个](https://itunes.apple.com/us/itunes-u/ipad-iphone-application-development/id473757255)特别有用。

一点直C也不会受到伤害。

# database - 在线托管ms access数据库的方式

> ID：14769649
> 
> 赞同：1
> 
> 时间：2013-02-08T09:42:23.570
> 
> 标签：database, ms-access

我打算制作一个可以由我自己创建的应用程序（即android应用程序）访问的在线数据库。我一直在寻找在不使用共享点的情况下托管它的方式，是否可以从托管服务提供商的 ftp 托管它？或者有没有其他方法可以建议我使用？谢谢。我真的很困惑，因为有很多方法可以做到这一点，其中一些非常昂贵。我想尽可能降低成本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:11:41.287

不清楚您是否在谈论编写+创建本机android应用程序而不是简单地使用网络浏览器？我的意思是，如果您要使用 Web 浏览器，那么 Access 在这里可能并不重要，除非您想使用我们在 Access 中提供的新“Web 服务”选项来开发 Access 应用程序。

如果您的 android 应用程序只需要从网站中提取数据，那么您必须选择是否将数据作为 Web 服务从该网站公开，或者您是在谈论访问网站上的某些表格。如果您谈论的是使用表格而不是 Web 界面，那么该网站将必须允许外部连接到数据存储，并且我不会离开任何允许外部连接到放置在服务器上的访问文件的 Web 提供商。您没有连接到 power-point 或 word，或者在这种情况下是 Access 文件——基于文件的系统不能那样工作。

您当然可以将数据表移出 Access 应用程序并将它们放在某个 Web 服务器上，如果该 Web 服务器允许外部 (odbc) 连接。然后，您将现有的 Access 应用程序连接到数据库服务器（典型的 SQL 服务器或 MySQL）。这意味着桌面用户继续使用 Access 应用程序，但数据现在驻留在 Web 服务器上。然后，您的 android 应用程序也会访问相同的数据存储。但是，在这种情况下，请注意 Access 的数据存储现在不是 Access，而是某种数据库服务器。

所以不清楚您是否需要或要求现有的 Access 应用程序继续运行，或者您只是想在 android 应用程序中使用一些 Access 数据？而且不清楚您是否创建了基于 Web 的 Access 应用程序。

我的意思是，如果您有一个基于 Web 的 Access 应用程序，那么您可以使用任何浏览器访问这些 Web 表单——包括您的 android 上的那些，而您根本不需要在 android 方面做任何事情。

我一直在使用 Access 网络发布，每月 6 美元的 p1 小型企业计划成本非常低。因此，任何浏览器都可以使用 Access 网络表单，例如 iPad，或者在我的 windows 7 手机上，Access 中内置的网络屏幕在我的手机上看起来像这样：

![在此处输入图像描述](../Images/f6101c5b80f3da9909d8285d968a3248.png)

或者

![在此处输入图像描述](../Images/efe2a5050b9a6a40a43da7edfbbfd79a.png)

所以你有选择，但如果你还没有 Access Web 应用程序，那么你不需要任何特殊的 Access 托管，而只需要一个允许 Access 和你的 android 都可以使用的 Web 数据存储（例如 SQL server） .

使用 Access Web 发布确实允许大规模扩展，因为表单被转换为 XAML 表单，而且 Office 365 服务器不仅庞大，而且后端数据存储现在是云计算，而不是基于 Access“文件”。因此，在缩放方面确实不存在用户限制。所以访问网络发布

但是，如果您还没有 Access Web 应用程序，则此处可能不需要使用 Access。

这里悬而未决的问题是您打算如何让 android 应用程序使用这些数据，或者您是否愿意使用基于浏览器的应用程序？如果您使用基于浏览器的应用程序，那么您根本不需要编写任何安卓软件。

对于那些不知道的人，Access 现在允许网络发布。在下面的视频中，请注意我如何在中途切换到在浏览器中 100% 运行 Access 应用程序

[http://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

# ios - 保护 iOS 应用免受 MITM 攻击

> ID：14769651
> 
> 赞同：1
> 
> 时间：2013-02-08T09:42:30.123
> 
> 标签：ios, security, networking, ssl

出于教育目的，我目前正在分解一个应用程序，看看我是否可以公开它的 API。到目前为止，我做得很好。我弄清楚了 API 的位置，并且通过使用诸如 Charles 之类的 SSL 代理，我也能够解密客户端和服务器之间的连接。

但是，鉴于我是如何做到的，我想知道 iOS 客户端如何验证服务器证书。相关应用程序的服务器证书是由 Rapid SSL 授权签署的通配符证书。使用 SSL 代理时，我将其交换为我导入 iPhone 的 Charles 证书（因此它使其受信任）。

我的问题：应用程序是否可以通过某种方式验证用于 HTTPS 连接的证书来自 *.mydomain.com 并且由权威 X 签名有效？如果是这样，如果请求不匹配，则可以通过使请求失败来大大提高应用程序的安全性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:35:47.413

查看页面[http://www.inmite.eu/en/blog/20120314-how-to-validate-ssl-certificates-iOS-client](http://www.inmite.eu/en/blog/20120314-how-to-validate-ssl-certificates-iOS-client)它详细描述了如何检查服务器的证书以及如何接受或拒绝它.

# php - 存储过程将来自不同调用的结果混合到临时表中

> ID：14769653
> 
> 赞同：2
> 
> 时间：2013-02-08T09:42:32.827
> 
> 标签：php, mysql, apache, stored-procedures, temp-tables

我在 Mysql 中使用一个存储过程，它创建 3 个临时表来存储数据库表中的记录，然后用于从这些存储记录的子集中选择最终结果。

问题是，虽然假设存储过程中的临时表对于每个 MySQL 会话都是唯一的，但我从存储过程的不同调用中得到混合结果。

让我们用一个真实的案例来解释这个问题：

我们让访问我的网站**的用户 A、B、C**在“同一时刻”进行不同的搜索。

用户 A 搜索“AAAA”，用户 B 搜索“BBBB”，用户 C 搜索“CCCC”，然后**网络服务器在“同一时刻”对数据库服务器进行 3 次调用**。

对存储过程的**调用**是：

```
call SP('AAAA'); 
call SP('BBBB'); 
call SP('CCCC'); 
```

每次调用的**结果应该**类似于： For call SP('AAAA');

```
Record_AAAA1
Record_AAAA2
Record_AAAA3 
```

调用 SP('BBBB');

```
Record_BBBB1
Record_BBBB2
Record_BBBB3
Record_BBBB4 
```

调用 SP('CCCC');

```
Record_CCCC1
Record_CCCC2 
```

但**我得到的结果是**这样的： For call SP('AAAA');

```
Record_AAAA1
Record_AAAA2
Record_BBBB2
Record_AAAA3
Record_BBBB4
Record_CCCC2 
```

调用 SP('BBBB');

```
Record_BBBB1
Record_BBBB2
Record_CCCC1
Record_CCCC2
Record_AAAA1
Record_AAAA2
Record_BBBB3
Record_BBBB4 
```

调用 SP('CCCC');

```
Record_CCCC1
Record_AAAA1
Record_AAAA2
Record_CCCC2 
```

有时我没有得到任何结果，有时我得到正确的结果，所以结果取决于执行。

因此，如果超过 1 个用户同时使用网络搜索，我会得到错误的结果。正如我所读到的，临时表对于每个不同的会话都是唯一的，因此存储过程的每次不同执行都应该使用不同的临时表。

这是**MySQL 服务器问题**，因为我已经用 2 台计算机通过 Linux 控制台通过 MySQL 客户端连接到同一服务器进行了一些测试。

这发生在生产数据库服务器和我的本地数据库服务器中。

我正在使用**MySQL 服务器版本：5.1.67** -0ubuntu0.11.10.1-log (Ubuntu)

为什么会发生这种情况？怎么解决？

提前致谢，如果您需要来自数据库服务器的一些配置数据，请告诉我。

* * *

存储过程非常复杂和混乱（[http://pastebin.com/pQ6VqHBn](http://pastebin.com/pQ6VqHBn)），所以简而言之，它的作用如下：

1) 从调用中接收参数

2) 根据参数创建对 tmpfinal 临时表的插入查询

3) 使用 where 搜索词从 tmpfinal 中选择插入 tmpdest 临时表

4) 从 tmpfinal 中删除插入到 tmp dest 的记录

5) 使用 where 搜索词从 tmpfinal 中选择插入 tmpnorm 临时表

6) select * from tmpnorm temp table order by search_term_punctuation

7) select * from tmpdest temp table order by search_term_punctuation2

插入 tmpnorm 和 tmpdest 的结果有时是来自不同并发存储过程调用的混合结果。

**存储过程中的表定义**

```
DROP TEMPORARY TABLE IF EXISTS tmpfinal;

CREATE TEMPORARY TABLE  IF NOT EXISTS tmpfinal (
    convo int,
    justo int,
    rankin int,
    even int,
    centro int,
    destacado int,
    nivel decimal(12,8),
    num_fila int AUTO_INCREMENT  PRIMARY KEY,
    num_fila_centro int 
);

DROP TEMPORARY TABLE IF EXISTS tmpdest;

CREATE TEMPORARY TABLE  IF NOT EXISTS tmpdest (
    id int AUTO_INCREMENT PRIMARY KEY,
    convo int,
    tipo_destacado enum ('superdestacado', 'destacado', 'anadido') 
);

DROP TABLE IF EXISTS tmpnorm;

CREATE TABLE  IF NOT EXISTS tmpnorm (
    id int AUTO_INCREMENT PRIMARY KEY,
    convo int 
); 
```

**生成插入到 TMPFINAL 查询的示例**

```
insert into tmpfinal
        (convo,justo,rankin,even,nivel,destacado,centro) 
    select distinct convocatoria_id,justo,ranking,evento_id,niveldes,destacado,centro_id from  
            (select distinct MATCH (eventos_busqueda.temario_ind) AGAINST ('+salud') as ranking, 
                    MATCH (eventos_busqueda.curso_ind) AGAINST ('+salud' IN BOOLEAN MODE) as justo,  eventos.evento_id, centros.centro_id, 
                    orden_bus + 
                        (CASE 
                            WHEN convocatoria_opciones_webs.espacio_id=2 THEN 1 
                            WHEN convocatoria_opciones_webs.espacio_id=6 THEN 2
                            WHEN convocatoria_opciones_webs.espacio_id=1 THEN 3 
                            else 4 END ) * 1000 +
                            CAST( 1/( (
                            case 
                                when convocatoria_opciones_webs.nivel IS NULL then 1 
                                when convocatoria_opciones_webs.nivel=0 then 1 
                                else convocatoria_opciones_webs.nivel 
                            end)  
                            * (
                                case 
                                    when preciocupon IS NULL then 1 
                                    when preciocupon=0 then 1 
                                    else preciocupon 
                                end)) as decimal(14,10)) as niveldes ,  
                    convocatorias.convocatoria_id , 
                        CASE 
                            WHEN convocatoria_opciones_webs.orden_bus < 100 THEN 1 
                            ELSE 0 
                        END AS destacado 
                                 FROM eventos 
                                 INNER JOIN convocatorias ON eventos.evento_id = convocatorias.evento_id 
                                 INNER JOIN convocatoria_opciones_webs ON convocatoria_opciones_webs.convocatoria_id = convocatorias.convocatoria_id 
                                 LEFT JOIN aux_provincias ON convocatorias.provincia_id = aux_provincias.Provincia_id 
                                 INNER JOIN centros ON convocatorias.centro_id = centros.centro_id 
                                 INNER JOIN eventos_modalidad ON eventos_modalidad.Modalidad_id = eventos.Modalidad_id 
                                 INNER JOIN eventos_imparticion ON eventos_imparticion.Imparticion_id = eventos.Imparticion_id 
                                 INNER JOIN webs ON convocatoria_opciones_webs.web_id = webs.web_id and webs.web_id = 1
                                 INNER JOIN evento_subtemas on eventos.evento_id=evento_subtemas.evento_id
                                 INNER JOIN evento_temas on eventos.evento_id=evento_temas.evento_id                               
                                 INNER JOIN subtemas on subtemas.subtema_id=evento_subtemas.subtema_id
                                 INNER JOIN temas on temas.tema_id = evento_temas.tema_id             
                                 inner join eventos_busqueda on eventos.evento_id=eventos_busqueda.evento_id  
                        WHERE (convocatorias.publicar = 1 OR convocatorias.publicar = 3) AND (convocatorias.inicio > CURRENT_DATE() OR convocatorias.inicio IS NULL)  
                                and match   (eventos_busqueda.curso_ind, eventos_busqueda.temario_ind) AGAINST ('+salud' IN BOOLEAN MODE) 
                                AND not (convocatoria_opciones_webs.espacio_id is null) and not convocatoria_opciones_webs.nivel is null
                                and webs.web_id=1) as t 
```

**生成插入到 TMPDEST 查询的示例**

```
INSERT INTO tmpdest (convo, tipo_destacado) 
    SELECT Z.convo, tipo_destacado FROM (
        SELECT convo, tipo_destacado FROM (
            SELECT (@lim-@r) as orden_fila,tmpfinal.centro, tmpfinal.nivel,tmpfinal.convo, 
                    @cg <> tmpfinal.centro AS centro_distinto,              
                    CASE 
                        WHEN cow.orden <= 3 THEN 'superdestacado'
                        WHEN tmpfinal.destacado = 1 THEN 'destacado'
                        ELSE NULL
                    END AS tipo_destacado, 
                    CASE 
                        WHEN @cg <>tmpfinal.centro THEN @r := @lim 
                        ELSE 1 
                    END > 0 AND (@r := @r - 1) >= 0 AND (@cg := tmpfinal.centro) IS NOT NULL
                FROM tmpfinal
                INNER JOIN convocatoria_opciones_webs AS cow ON tmpfinal.convo = cow.convocatoria_id 
            WHERE destacado=1 AND cow.web_id = 1  AND justo >= 1 
                ORDER BY  tmpfinal.justo DESC, tmpfinal.rankin DESC, tmpfinal.nivel ASC ) T
        WHERE centro_distinto = 1 OR (orden_fila < 5 AND centro_distinto = 0)
            LIMIT 15 ) Z 
```

**插入 TMPNORM 查询的示例**

```
INSERT INTO tmpnorm (convo, tipo_destacado) 
    SELECT Z.convo, tipo_destacado FROM (
        SELECT convo, tipo_destacado FROM (
            SELECT (@lim-@r) as orden_fila,tmpfinal.centro, tmpfinal.nivel,tmpfinal.convo, 
                    @cg <> tmpfinal.centro AS centro_distinto,              
                    CASE 
                        WHEN cow.orden <= 3 THEN 'superdestacado'
                        WHEN tmpfinal.destacado = 1 THEN 'destacado'
                        ELSE NULL
                    END AS tipo_destacado, 
                    CASE 
                        WHEN @cg <>tmpfinal.centro THEN @r := @lim 
                        ELSE 1 
                    END > 0 AND (@r := @r - 1) >= 0 AND (@cg := tmpfinal.centro) IS NOT NULL
                FROM tmpfinal
                INNER JOIN convocatoria_opciones_webs AS cow ON tmpfinal.convo = cow.convocatoria_id 
            WHERE destacado=1 AND cow.web_id = 1  AND justo >= 1 
                ORDER BY  tmpfinal.justo DESC, tmpfinal.rankin DESC, tmpfinal.nivel ASC ) T
        WHERE centro_distinto = 1 OR (orden_fila < 5 AND centro_distinto = 0)
            LIMIT 15 ) Z 
```

**从 TMPNORM/TMPDEST 查询生成的选择示例**

```
select distinct tmpnorm.id, IFNULL(IF(centros.acronimos<>'', centros.acronimos, centros.centro), centros.centro) as centro, centros.centro_id,
                    eventos_modalidad.color AS color, eventos_modalidad.tipo AS tipo,convocatorias.evento_id,
                    eventos_imparticion.tipo AS tipoevento,
                    convocatorias.convocatoria_id, eventos.evento, convocatorias.inicio,
                    aux_provincias.provincia,SUBSTRING(temario, LOCATE(SUBSTRING_INDEX(temario, 'salud', 1), temario), 300) AS temario, 
                    orden_home as orden,convocatorias.horasduracion, convocatorias.textoduracion AS textoduracion, convocatorias.preciocurso, 
                    convocatorias.gratuito,case  when tipofecha IS NULL  then '' else COALESCE(tipofecha , '') +' '+ COALESCE(anotipofecha , '')  end as tipofecha,
                  convocatorias.preoferta, convocatorias.finoferta,convocatorias.subvencionado, convocatorias.pais_id, centros.pais_id AS pais_cen  
    FROM eventos 
    INNER JOIN convocatorias ON eventos.evento_id = convocatorias.evento_id
    INNER JOIN convocatoria_opciones_webs ON convocatoria_opciones_webs.convocatoria_id = convocatorias.convocatoria_id 
    LEFT JOIN aux_provincias ON convocatorias.provincia_id = aux_provincias.Provincia_id 
    INNER JOIN centros ON convocatorias.centro_id = centros.centro_id 
    INNER JOIN eventos_modalidad ON eventos_modalidad.Modalidad_id = eventos.Modalidad_id 
    INNER JOIN eventos_imparticion ON eventos_imparticion.Imparticion_id = eventos.Imparticion_id 
    INNER JOIN webs ON convocatoria_opciones_webs.web_id = webs.web_id and webs.web_id = 1
    INNER JOIN evento_subtemas on eventos.evento_id=evento_subtemas.evento_id
    INNER JOIN evento_temas on eventos.evento_id=evento_temas.evento_id

    INNER JOIN tmpnorm ON tmpnorm.convo=convocatorias.convocatoria_id            

    INNER JOIN subtemas on subtemas.subtema_id=evento_subtemas.subtema_id
    INNER JOIN temas on temas.tema_id = evento_temas.tema_id 

    order by tmpnorm.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:59:31.403

`tmpnorm`不是临时表，因此它将在您的所有会话之间共享。

```
CREATE TABLE  IF NOT EXISTS tmpnorm (
    id int AUTO_INCREMENT PRIMARY KEY,
    convo int 
); 
```

`tmpfinal`每个会话可能在临时表和中都有自己的隔离数据`tmpdest`，但是一旦它们插入到`tmpnorm`中，它们就会合并，使用来自所有会话的所有数据。然后，此数据将用于连接到所有其他非临时表的最终查询。

# java - 在 Java 枚举定义中使用序数

> ID：14769655
> 
> 赞同：5
> 
> 时间：2013-02-08T09:42:40.247
> 
> 标签：java, enums, ordinal

我注意到[Java 枚举文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html)说明了序数方法：

> 返回此枚举常量的序号（它在其枚举声明中的位置，其中初始常量的序号为零）。大多数程序员不会使用这种方法。它设计用于复杂的基于枚举的数据结构，例如 EnumSet 和 EnumMap。

我了解所有在线示例，这些示例建议不要使用`ordinal`索引来索引数组，而是使用索引`EnumMap`。特别[是 Effective Java 的第 33 条](http://books.google.co.uk/books?id=ka2VUBqHiWkC&pg=PA161&lpg=PA161&dq=Use%20EnumMap%20instead%20of%20ordinal%20indexing&source=bl&ots=yYIfLfr5P-&sig=uDv2JHThXFPNI7LdoYZED3O39JE&hl=en&sa=X&ei=0cEUUcmiNom-0QWRvYDAAw&ved=0CC8Q6AEwAA#v=onepage&q=Use%20EnumMap%20instead%20of%20ordinal%20indexing&f=false)`Enum`但我的问题是：可以在我的定义 中使用它吗？例如我的代码如下：

```
public enum Direction {
   NORTH(0, 1), NORTH_EAST(1, 1), EAST(1, 0), SOUTH_EAST(1, -1),
   SOUTH(0, -1), SOUTH_WEST(-1, 1), WEST(-1, 0), NORTH_WEST(-1, 1);

   private final int xOffset;
   private final int yOffset;

   private final static int DEGREES = 360;

   private Direction(int xOffset, int yOffset) {
     this.xOffset = xOffset;
     this.yOffset = yOffset;
   }

  public Position move(Position position) {
     return new Position(position.getX() + xOffset, position.getY() + yOffset);
  }

  public Direction rotate(int degrees) {
     int length = Direction.values().length;
     int index = (ordinal() + (degrees / (DEGREES / length))) % length;
     return Direction.values()[index];
  } 
} 
```

如您所见，我正在使用 ordinal() 以便我可以循环浏览方向（并返回下一个相关方向）。例如，旋转 90 度`NORTH`将返回`EAST`。

但是我知道使用序数不是好的做法，所以我想知道是否有更好的方法来做到这一点，同时仍然保持代码大小和可读性。

我会非常感谢任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T09:51:42.990

我会说这是完全可以接受的使用`ordinal`. 事实上，在我看来，它非常简洁。

关于不在代码中使用的注释`ordinal`只是`enum`为了阻止你这样做，因为大多数时候你可以使用它`enum`本身或`EnumMap`代替。

您的参考`EffectiveJava`是警告您不要这样做，因为选择正确`int`的用作数组的偏移量是令人担忧的并且通常是不必要的。在您的情况下不适用，因为a）您做得正确并且b）这是实现您正在寻找的功能的最简单方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T10:28:29.473

如果将来有人引入新成员是枚举，您的代码将会中断，例如 WEST_FAR_AWAY(-10, 0)。您需要根据您的应用程序的要求来估计这是一个“轻微且可接受的缺陷”还是“维护噩梦”......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T09:55:35.353

> 可以在我的枚举定义中使用它吗？

可以使用。但是您提供的链接中很好地说明了不使用它并使用 EnumMap 的原因（引用已修改，因为它指的是它的部分中描述的示例）

> 该程序有效，甚至可能看起来很优雅，但外观可能具有欺骗性。就像编译器无法知道序数和数组索引之间的关系一样。如果您在某个地方进行了更改而忘记相应地更新它，您的程序将在运行时失败。

如果您将 EnumMap 包含在您的设计中以获取方向，那么 EnumMap 似乎非常有效。

# eclipse - Google App Engine 上基于 Jersey 的 REST 服务 - 如何设置我的项目？

> ID：14769659
> 
> 赞同：0
> 
> 时间：2013-02-08T09:42:56.833
> 
> 标签：eclipse, google-app-engine, jersey

有没有人通过 POJO 映射到 JSON 让 Jersey 在 Google AppEngine 工作？我现在已经花了几个小时来让这个工作，但我被困在两个地方。在 Jetty 本地运行我比在 AppEngine 更进了一步，但我还没有到那里。这是我遇到的两个问题：

**本地**：

码头产生以下错误：

```
SEVERE: A message body writer for Java class
nilsnett.chinese.backend.BusinessObject, and Java type class
nilsnett.chinese.backend.BusinessObject, and MIME media type
application/json was not found 
```

`nilsnett.chinese.backend.BusinessObject`是我创建的一个普通的 Java 类，如下所示：

```
package nilsnett.chinese.backend;
import javax.xml.bind.annotation.XmlRootElement;
public class BusinessObject {
    public String text;
    public int value;
} 
```

这里有什么问题？

**在 AppEngine**：

`Uncaught exception from servlet java.lang.IncompatibleClassChangeError`

现在我在本地也遇到了这个错误，这与我在本地引用`asm-3.3.1.jar`Jersey 所依赖的 asm-4.0.jar 和`asm-4.0.jar, which AppEngine depends on. If I _only_ referenced`asm-4.0.jar 的事实有关，我会在这里得到同样的错误。在 AppEngine 中引用两者显然不能很好地工作。我怎样才能解决这个问题？

**更多数据**：

*   本地错误的完整 Jetty 日志在[这里](http://pastebin.com/prKm23p2)
*   来自 AppEngine 的完整异常日志在[这里](http://pastebin.com/XTpwsvhN)
*   [我的 web.xml](http://pastebin.com/YaEGuFEa)

SDK的参考：

*   AppEngine v1.7.4
*   Java SE 1.6

与泽西岛相关的罐子参考：

*   Jersey-bundle-1.17.jar
*   asm-3.3.1.jar
*   Jettison-1.1jar

我正在 Windows 8 上的 Eclipse Juno 中进行开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:05:40.787

您正在导入`XmlRootElement`注释但不使用它。你应该`@XmlRootElement`在你的班级之前添加。

至于第二个问题 - 你看过： [java.lang.IncompatibleClassChangeError: Implementing class deploying to app engine](https://stackoverflow.com/questions/12166382/java-lang-incompatibleclasschangeerror-implementing-class-deploying-to-app-engi)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:19:24.867

本地的第一个问题是由于缺少 .jar 文件。我误读了[Jersey 文档，并认为我只需要](http://jersey.java.net/nonav/documentation/latest/user-guide.html)[11.1 Core Server](http://jersey.java.net/nonav/documentation/latest/user-guide.html#core_server)和[11.4.3 JSON](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e1828)章节中列出的文件：

*   抛弃-1.1.jar
*   jersey-bundle-1.17.jar
*   asm-3.3.1.jar

原来我还需要在[JAXB](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e1718)下列出的 jar ：

*   杰克逊核心 asl.jar
*   杰克逊-映射器-asl.jar
*   杰克逊-jaxrs.jar
*   抛弃.jar
*   jaxb-impl.jar
*   jaxb-api.jar
*   激活.jar
*   stax-api.jar

当在 Glassfish 中运行时，没有引用最后一个 jar 的设置有效，我被这个事实愚弄了，但这是因为 jar 与 Glassfish 捆绑在一起。码头不是这样。

# xcode - 带有故事板和自动布局的大小值

> ID：14769660
> 
> 赞同：0
> 
> 时间：2013-02-08T09:43:00.513
> 
> 标签：xcode, storyboard, autolayout

使用带有自动布局的 Storyboard，我注意到了一些事情：我添加了一个 UIScrollView 并将它与一个 IBOutlet 连接起来。在我的 UIViewController 中，如果我创建日志：

```
NSLog(@"size %f",self.myScrollView.frame.size.width); 
```

结果为 0，但在视觉上测量结果是正确的。

如果我关闭自动布局，则日志参数是正确的，并且视觉上一切都保持不变。

如何使用自动布局查看正确的值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:06:58.537

显然，您可以通过询问它们来查看正确的大小值 in `viewDidAppear`，因为 in`viewDidLoad`并且`viewWillAppear`它们仍未使用自动布局确定：

```
-(void)viewDidAppear:(BOOL)animated{
  [super viewDidAppear:animated];
  NSLog(@"size %f",self.myScrollView.frame.size.width);
} 
```

如图所示：

```
-(void)viewDidLoad {
    [super viewDidLoad];
    NSLog(@"%s size %f",__PRETTY_FUNCTION__,_holderView.frame.size.width);
}

-(void)viewWillAppear:(BOOL)animated{
  [super viewWillAppear:animated];
   NSLog(@"%s size %f",__PRETTY_FUNCTION__,_holderView.frame.size.width);
}

-(void)viewDidAppear:(BOOL)animated{
  [super viewDidAppear:animated];
   NSLog(@"%s size %f",__PRETTY_FUNCTION__,_holderView.frame.size.width);
} 
```

> 2013-04-17 12:02:05.442 TryALASB[5421:c07]-[FirstViewController viewDidLoad]**大小 0.000000** 2013-04-17 12:02:05.444 TryALASB[5421:c07]-[FirstViewController viewWillAppear:]**大小 0.000000** 2013-04 -17 12:02:05.457 TryALASB[5421:c07] -[FirstViewController viewDidAppear:] **大小 150.000000**

# snmp - 适用于 SNMP 标量对象

> ID：14769666
> 
> 赞同：0
> 
> 时间：2013-02-08T09:43:19.160
> 
> 标签：snmp, net-snmp, scalar

在执行 SNMP-GET 请求时显示 SNMP 标量对象的适用性的正确方法是什么？

例如，假设我们有一个仅在特定系统配置下有效的监控参数：

*   我们是否应该返回一个 noSuchObject 错误，并表现得好像对象暂时没有实现？
*   我们应该返回 noSuchInstance 错误吗？
*   我们是否应该提供在这种情况下返回的“不适用值”？
*   我们应该返回 DEFVAL 吗？
*   还有其他选择吗？

RFC 中对此有明确的解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T00:58:14.227

认为这应该由您的 MIB 设计而不是 SNMP 协议使用来处理。

1) 查看 SNMPv2-MIB::sysContact，这似乎是 DisplayStrings 的合理方法。

“此受管节点的联系人的文本标识，以及有关如何联系此人的信息。 **如果不知道联系人信息，则该值是零长度字符串。** ”

2）对于标量中的[计数器或量具](http://vegan.net/MRTG/countergauge.php)，总会有一个值，否则您可能会使用 SNMP 表。

我知道这个问题很老了！

# css - 为了模块化目的，链接 CSS 类或单独命名它们更好吗？

> ID：14769668
> 
> 赞同：5
> 
> 时间：2013-02-08T09:43:25.923
> 
> 标签：css, oocss

例如，哪个更好：

**方法1（分别命名类）：**

```
/* CSS */

.textbox-red, 
.textbox-green {
   padding: 10px;
   border: 1px solid #CCC;
   border-radius: 10px;   
}

.textbox-red { color: #900; }
.textbox-green { color: #3c3; }

/*HTML*/

<div class="textbox-red"></div>
<div class="textbox-green"></div> 
```

或者 - - - - - -

**方法2（链类）：**

```
/* CSS */

.textbox {
  padding: 10px;
  border: 1px solid #CCC;
  border-radius: 10px;
}

.textbox.text-red { color: #900; }
.textbox.text-green { color: #3c3; }

/*HTML*/

<div class="textbox text-red"></div>
<div class="textbox text-green"></div> 
```

两者之间有什么更好的做法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T09:52:00.030

我的意见是你应该使用模块化 CSS - 你也可以组合类而不是链接它们：

```
/*CSS*/
.textbox {
  padding: 10px;
  border: 1px solid #CCC;
  border-radius: 10px;
}

.text-red { color: #900; }
.text-green { color: #3c3; }

/*HTML*/

<div class="textbox text-red"></div>
<div class="textbox text-green"></div> 
```

这样，当您想要没有文本框的红色背景时，您可以重复使用红色和绿色。这样，您可以更多地重用您的代码，并且您的文本框和文本颜色之间存在松散耦合

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:55:54.053

我个人会使用方法 2。这样，您可以轻松地将 text-red 或 text-green 换成 text-blue 或 text-yellow，并且仍然保留文本的基本样式。基本上，方法 2 允许更大的灵活性和可维护性，恕我直言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:49:24.953

根据我的经验，模块化方法为您提供了最大的灵活性。模块化 css 模式也用于[Twitter Bootstrap](http://twitter.github.com/bootstrap/)，其中灵活性非常重要。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-08T09:46:57.123

首先，如果您为 IE6 制作样式，则更好，因为此浏览器不支持第二种方法。

# tcl - Tcl setAttribute 方法..我如何只更新 xml 文件中的特定行

> ID：14769669
> 
> 赞同：0
> 
> 时间：2013-02-08T09:43:25.457
> 
> 标签：tcl, tdom

```
$intf setAttribute status "Shipped to Customer"
set status [$intf getAttribute status]
puts $status 
```

通常状态属性在该节点中不存在...所以我正在设置它..要知道它是否更新，我检查了 getAttribute..所以输出即将到来..但是在 .xml 文件中没有看到这个属性。 . 我到底错过了什么......？？
（或）
是否有任何最佳方法仅使用 tdom 方法仅更新 .xml 文件中的特定行我成功地创建了临时文件，这是传统过程..但我只想使用 tdom 解析器方法更新行..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:53:52.363

我认为，问题在于 tDOM 不会自动将您对文档对象模型所做的更改反映到文件中。相反，它的模型是基于文件内容的*断开连接*的副本；要保留更改，您必须重新序列化并保存它。

你可以这样做：

```
# Save to a temporary file, just in case things go wrong...
set f [open $filename.tmp "w"]
$doc asXML -channel $f;   # Or the asHTML method if it's HTML to be saved
close $f

# Now do the atomic replace
file rename -force $filename.tmp $filename 
```

就这么简单。（您需要知道它是 XML 还是 HTML；两种情况下的序列化规则略有不同。）

# c# - 我应该在 Service Stack 服务模型中使用什么命名约定？

> ID：14769670
> 
> 赞同：8
> 
> 时间：2013-02-08T09:43:27.613
> 
> 标签：c#, servicestack

我们正在考虑在下一个项目中使用 ServiceStack；在查看示例时，我注意到没有通用的命名约定。 [例如：](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/ServiceStack.MovieRest)

> 实体：电影
> 请求：电影
> 响应：MovieResponse

所有操作也是如此。 [现在这个例子：](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/RedisStackOverflow/RedisStackOverflow.ServiceModel/Answers.cs)

> 实体：回答
> 请求：回答
> 回答：AnswerResult

[完后还有：](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/ServiceStack.Examples/ServiceStack.Examples.ServiceModel/Operations/GetUsers.cs)

> 实体：用户？
> 请求：GetUsers
> 响应：GetUsersResponse

（看到类名以动词开头有点奇怪）

所以，也许你想出了一些聪明的命名约定并想分享。此外，在服务堆栈上是否有任何更大的开源项目，我可以在其中查看他们如何组织他们的服务模型？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T07:20:54.577

我使用具有以下样式的BREAD ^(1和动词实体：)

命名空间是“实体”，那么：

*   浏览实体
*   浏览实体响应
*   浏览实体服务
*   添加实体
*   添加实体响应
*   添加实体服务

请注意，表单实际上是 [Verb][Entity][Role]。

*   动词：浏览、阅读、编辑、添加、删除（面包）、验证、提取（例如其他操作）

*   实体：这是复数或单数，取决于受影响/检索到的实体的*正常*数量。（我并不完全否认像 DeleteEntity 这样的服务可能一次删除多个实体，但如果放入“单数”名称的 DTO/服务中，则应仔细考虑。它总是可以跟随复数 DeleteEntities。）

*   作用：（无）=请求DTO，响应=响应DTO，服务=服务。

*   命名空间：总是复数。这避免了与实体（单数）等 DAL 类的冲突。

对于 BREAD 绑定（端点总是复数，它代表一个集合）：

*   /entities GET - 浏览实体
*   /entities/Id GET - 读取实体
*   /entities/Id POST - EditEntity（不在 PUT 上出售；尚未研究 PATCH 支持）
*   /entities POST - 添加实体
*   /entities/Id DELETE - DeleteEntity

杂项。约束准则：

*   /entities/Id/verb POST/GET - VerbEntity（即 ValidateEntity），仅在幂等时获取。
*   /entities/_/verb POST/GET - VerbEntitiy，适用于没有资源标识的任意（但特定）实体。这很少见，但用于验证尚未保存的实体等情况。它允许模式保持一致。
*   /entities/verb POST/GET - VerbEntities，适用于*集合*，但不适用于任何特定资源。
*   /entities/Id/items/.. - 一个子/相关端点，与具有给定 ID 的实体相关。遵循前面讨论的相同模式。

* * *

¹不幸的是，BREAD 似乎是一个边缘术语。来自[CRUD 维基百科文章](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)：

> CRUD 的另一个变体是 BREAD，它是“浏览、阅读、编辑、添加、删除”的首字母缩写词。

我更喜欢它的声音，并且它有一个单独的浏览操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T10:14:20.590

我目前使用第三个选项，请求以动词开头。原因是我的实现并不完全基于典型的 REST 样式 url，而且我广泛使用 c# 客户端。在这种情况下，动词只是有助于清楚地识别服务的目的。

除了我的特殊情况，我会去

实体：电影请求：电影响应：MovieResponse

# ruby-on-rails - 在 gem 中定义 worker 的位置

> ID：14769671
> 
> 赞同：1
> 
> 时间：2013-02-08T09:43:29.210
> 
> 标签：ruby-on-rails, sidekiq

我正在写一个宝石。我希望调用 gem 的 api 来触发对一些 Sidekiq 工作人员的调用。我应该在我的 gem 中哪里写这些工作程序，以便 Sidekiq 找到它们，即使它们不在“应用程序/工作程序”中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:53:39.303

如果不确切知道自己在做什么，就很难回答。

但是，我想说添加一个安装您的 gem 的人可以使用的 procfile 会起作用。

参考[https://github.com/ddollar/foreman](https://github.com/ddollar/foreman)

# android - 显示星期几字符串的Android问题

> ID：14769675
> 
> 赞同：2
> 
> 时间：2013-02-08T09:43:48.170
> 
> 标签：android, sqlite, time, gregorian-calendar

我见过很多在 Android 中使用 Calendar 和 GregorianCalendar 类处理日期的例子。`Time`最近我在 Android Developers文档中遇到了以下内容：

> Time 类是 java.util.Calendar 和 java.util.GregorianCalendar 类的更快替代品。Time 类的一个实例表示时间中的一个时刻，以秒精度指定。

这促使我用更快的 Time 类函数替换所有 Calendar 函数。

这是我读取存储在 SQLite 数据库中的日期的代码：

`// extract milliseconds (long) value from SQLite database
Long timeLong = note.getLong(note.getColumnIndexOrThrow(NotesDbAdapter.KEY_DATE));
Time currentTime.set(timeLong);`

以下是准备整数值以填充日期选择器并在 mPickDate 按钮中显示格式化的日期字符串的部分代码：

```
 mDay = currentTime.monthDay;             // Day of the month (0-31)
    mMonth = currentTime.month;              // Month (0-11)
    mYear = currentTime.year;                // Year 
    mPickDate.setText(currentTime.format("%A, %d %b %Y")); // using strftime equivalent to dateFormat = new SimpleDateFormat("E, dd MMM yyyy"); 
```

请注意用于获取星期几的长字符串的格式 %A。这部分格式化代码运行良好，并显示带有格式化日期的正确字符串，包括正确的星期几。

单击 mPickDate 按钮会调用 DatePicker 小部件，该小部件允许更改和设置新日期。

以下代码显示了从 DatePicker 中新选择的日期的处理：

```
 private DatePickerDialog.OnDateSetListener mDateSetListener =
        new DatePickerDialog.OnDateSetListener() {

            public void onDateSet(DatePicker view, int year, int monthOfYear,
                    int dayOfMonth) {
                // new method using Time class
                currentTime.set(dayOfMonth, monthOfYear, year);

                mPickDate.setText(currentTime.format("%A, %d %b %Y"));

                // old method using GregorianCalendar class
                //mCalendar = new GregorianCalendar(year, monthOfYear, dayOfMonth);
                //mPickDate.setText(dateFormat.format(mCalendar.getTime()));                    
            }
        }; 
```

mPickDate 按钮会显示正确的日期字符串，如在日期选择器中选择的那样，但星期几 (%A) 除外，它始终显示为星期日。为什么 ？

请注意，mPickDate.SetText 代码与之前用于格式化按钮日期字符串的代码相同，从 SQLite 数据库字段中提取。

我不得不修改上面的代码，通过添加额外的代码行再次在 currentTime 时间对象中设置日期值：

```
 currentTime.set(dayOfMonth, monthOfYear, year);
            currentTime.set(currentTime.toMillis(true));
            mPickDate.setText(currentTime.format("%A, %d %b %Y")); 
```

我的问题是：为什么必须在上述 DatePickerDialog.OnDateSetListener 代码中使用 currentTime.set 过程两次，才能正确显示星期几字符串？

这可能是 Android`Time`代码本身的问题（使用 SDK 版本 16）吗？

# c++ - C++ 中的透明度

> ID：14769678
> 
> 赞同：0
> 
> 时间：2013-02-08T09:43:56.737
> 
> 标签：c++, transparency, gdi

我正在尝试在我的应用程序中创建透明度。例如，我的应用程序的窗口是方形的，我想通过隐藏窗口的一部分来使其变为圆形。

我的代码看起来像这样：

```
HDC hdcMask = nullptr;
HBITMAP hBMP = (HBITMAP)LoadImageW(nullptr, L"C:\\mask.bmp", IMAGE_BITMAP, 150, 160, LR_LOADFROMFILE);
SelectObject(hdcMask, hBMP);
HWND hWnd = GetActiveWindow();
HDC hdcWindow = GetDC(hWnd);

TransparentBlt(hdcWindow, 0, 0, 150, 160, hdcWindow, 0, 0, 150, 160, RGB(0,0,0)); 
```

其中 mask.bmp 是一个位图，其中白色是我想要透明的，黑色是我想要可见的。

应用此代码后，什么也没有发生。我究竟做错了什么 ？是否有另一种方法来获得所需的结果？

注意：我需要此代码才能在 Windows XP 操作系统或更高版本上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:52:55.753

有几种方法可以使窗口透明和/或半透明。

[SetWindowRgn](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd145102.aspx)将使窗口的某些部分变得透明。

[SetLayeredWindowAttributes](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633540.aspx)可以使窗口的某些部分透明，也可以将半透明应用于整个窗口的其余部分。

[UpdateLayeredWindow](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633556.aspx)可以为各个窗口提供不同程度的半透明度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:06:58.373

为什么不使用与 bmp 不同的格式，其中还可以包含 alpha 数据？

您可以使用 PixelFormat32bppPARGB 位图，使用 Bitmap::LockBits 和 Bitmap::Unlockbits 来保持文件的格式并避免覆盖 alpha 设置。

# javascript - 第一次后停止事件

> ID：14769681
> 
> 赞同：0
> 
> 时间：2013-02-08T09:44:06.770
> 
> 标签：javascript, jquery

[当我使用jquery.inview](https://github.com/protonet/jquery.inview)处于特殊滚动位置时，我正在触发一个事件。如果元素在视口中，它通过添加类来工作。在我的脚本中我说以下

```
 var $BG = $('#BG')
$('#BG').bind('inview', function (event, visible) 
{
        if (visible == true) {
        $(this).addClass("inview");

        } else {

        $(this).removeClass("inview");
        }
    });

   if($BG.hasClass("inview")){

        $('#diagonal').css('left',0)
        $('#diagonal').css('top',0)

    } 
```

但它会一次又一次地触发 .css 事件，但我希望它们仅在 #BG 第一次获得“inview”类时触发。谢谢泰德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:52:44.437

您可以使用 jQuery **unbind 方法**取消绑定事件处理程序，或者使用**一种方法**最多处理一次事件。

[http://api.jquery.com/category/events/event-handler-attachment/](http://api.jquery.com/category/events/event-handler-attachment/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:54:25.410

您可以添加一些 var 来告诉它是否已被解雇：

```
var $BG = $('#BG'), firedInView = false;

$BG.bind('inview', function (event, visible) {
    if(!firedInView) {
        firedInView = true; //set to true and it won't be fired
        //do your stuff
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:47:48.443

`.one()`改为尝试`.bind()`：

```
$('#BG').one('inview', 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T09:59:27.537

我假设您想在#BG 不在视线范围内时删除对角线上的样式？

我会把它分成两个听众

```
//If bg does not have class inview, addClass if it is visible
$('body').on('inview', '#BG:not(.inview)', function (event, visible) {
    if (visible == true) {
        $(this).addClass("inview");
        $('#diagonal').css({'left': 0, 'top': 0});
    }
});

//If bg does has class inview, removeClass if it is invisible
$('body').on('inview', '#BG.inview', function (event, visible) {
    if (visible == false) {
        $(this).removeClass("inview");
        $('#diagonal').css({'left': 'auto', 'top': 'auto'});
    }
}); 
```

# .net - 违反多重性约束的原因是什么。

> ID：14769682
> 
> 赞同：1
> 
> 时间：2013-02-08T09:44:06.767
> 
> 标签：.net, entity-framework, orm, entity-framework-mapping

我有一个 A 类，它有另一个 B 类的列表

```
Class A
{
  public List<B> PointCollection
   {
   get;
   set;
   }
} 
```

尽管所有其他文章都告诉 B 类也可能包含 A 类的对象，但事实并非如此。当我填充数据并尝试保存时，关系'A_PointCollection'的角色'A_PointCollection_Source'具有多重性1或0..1。抛出异常。.注意我不是在定义关系，而是让实体框架自己定义。所以，请提出可能的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:39:11.000

其实问题出在我们使用的保存方式上，我们有一个非常大的代码用于保存目的，所以有些方法是对PointCollection属性的回火，违反了PointCollection导航属性的关系，所以当我调试代码时，我发现我采用其他方式更新 PointCollection 导航属性的错误。

# intellij-idea - IntelliJ 12.0.3 Ctrl-Alt-U 不再有效？

> ID：14769685
> 
> 赞同：1
> 
> 时间：2013-02-08T09:44:15.673
> 
> 标签：intellij-idea

我刚刚发现 show UML Diagrams 在 IntelliJ 12.0.3 中不再有效。

有谁知道它是否有问题？或者它是否已被故意删除？

ps：在 11.1.5 中它仍然可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:29:07.913

我试过了，经历和你一样。

该功能已禁用，必须通过选中“**文件**” -> **“设置”** -> “**插件**”下的**“UML 支持”来启用**

 ******* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:17:42.020

好的，我发现`Ctrl`++在 12.0.3 终极版中有效，而不是在社区版中`Alt`。`U`******

# haskell - 是否有更严格的 Data.Sequence？

> ID：14769686
> 
> 赞同：3
> 
> 时间：2013-02-08T09:44:16.483
> 
> 标签：haskell, data-structures, sequence, lazy-evaluation

以下示例显示了我们遇到的问题`Data.Sequence`：

```
{-# LANGUAGE BangPatterns #-}
module Main where

import qualified Data.Sequence as S
import Data.Sequence ((|>), ViewL(..))
import Data.List (foldl')
import GHC.AssertNF

update !init !x = init |> x

main =
   do let !seq = foldl' update S.empty [1..10]
      assertNF seq 
```

它打印

```
Parameter not in normal form: 1 thunks found:
Deep (One (S# 1)) (_thunk (Deep (One ...) (_thunk ... ... ... ...) (Three ... ... ...) 93) (S# 95) (S# 96) (S# 97)) (Three (S# 98) (S# 99) (S# 100)) 100 
```

但是，`Data.Sequence`声称所有操作都是严格的文档，那么为什么在插入后没有对树进行完全评估？是否需要保证一些摊销的复杂性界限？

我们这里不是很喜欢懒惰，所以不知道有没有更严格`|>`或者类似的数据结构，支持后面追加和前面枚举，可能更高效？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T11:04:43.187

Data.Sequence 是一个元素严格、数字严格的数据结构，具有惰性脊椎。

```
data FingerTree a
    = Empty
    | Single a
    | Deep {-# UNPACK #-} !Int !(Digit a) (FingerTree (Node a)) !(Digit a) 
```

这意味着插入的值将被存储评估，但结构的脊椎将仅在查询时评估。这通常是您想要的——更小的数据结构。

如果您想对其施加严格的脊椎，您将承担更大的插入成本，但您可能会在其他地方获得收益。

尝试将fingertrees 包修改为spine strict，看看它是否真的更快——我很想知道结果。

* * *

顺便说一句：“我们在这里不太喜欢懒惰”，这不是避免脊椎懒惰数据结构的好理由。如果 [a] 是严格的，那将是一个糟糕的数据类型。Data.Sequence 可能也是如此。您应该量化为什么脊椎严格性对于您的用例来说是错误的语义。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-08T12:54:38.007

手指树的良好性能取决于惰性。引用[拉尔夫 Hinze 的话；Paterson, Ross (2006)，“手指树：一种简单的通用数据结构”](http://www.soi.city.ac.uk/~ross/papers/FingerTree.html)：

> ...虽然该结构本质上使用了惰性，但它也适用于提供惰性求值原语的严格语言。

并在分析其属性时：

> ...因此，在一系列操作中，平均成本是恒定的。
> 
> 如果子树使用惰性评估挂起，则相同的界限在持久设置中成立。这确保了在后续手术需要深入到那么远之前，不会发生脊柱深处的转变。由于安全和危险数字的上述特性，到那时将执行足够便宜的浅层操作来支付这种昂贵的评估费用。

因此，如果您将实现从惰性更改为严格，您可能会失去良好的时间复杂度界限（取决于您使用的操作和顺序）。

# java - 如何解决 org.hibernate.MappingException：没有 JDBC 类型的方言映射：-4

> ID：14769687
> 
> 赞同：0
> 
> 时间：2013-02-08T09:44:21.160
> 
> 标签：java, hibernate

我在代码中的查询是

```
 ArrayList lst = genericDao.query("select * from fdfiles where fileid = " + fileId); 
```

在这一行我得到了例外

```
Caused by: org.hibernate.MappingException: No Dialect mapping for JDBC type: -4 
```

我如何克服上述异常。

我的休眠有属性

```
<property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.cache.use_query_cache">false</prop>
            <prop key="hibernate.cache.use_second_level_cache">false</prop>
            <prop key="hibernate.generate_statistics">true</prop>
        </props>
    </property> 
```

日志文件显示

```
java.lang.Exception: No Dialect mapping for JDBC type: -4; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: -4
at com.duncansolutions.databus.dao.GenericDao.query(GenericDao.java:135)
at com.duncansolutions.databus.service.mechanismmanagement.datakey.FileListByLocationDaoService.getFile(FileListByLocationDaoService.java:151)
at com.duncansolutions.databus.html.DatakeyFileDownloadController.getFilebyId(DatakeyFileDownloadController.java:34)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:174) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:20:00.463

This **No Dialect mapping for JDBC type: -4**当休眠尝试转换结果列表实际列表时出现异常，`hibernate`无法识别列`dataTypes`。

尝试使用`HSQL`来获取如下记录。

假设您`fdfiles`的映射到`FdFiles`实体

```
Query query = session.createQuery("SELECT fd.propert1,fd.property2 FROM FdFiles fd WHERE fd.fileId = :fileId");
                query.setParameter("fileId", fileId);
                List<FdFiles> list = query.list(); 
```

# android - webview 没有在 android 4.0 (ICS) 上显示你的视频

> ID：14769691
> 
> 赞同：1
> 
> 时间：2013-02-08T09:44:33.817
> 
> 标签：android

我想在 android 低版本和更高版本上向您展示管视频。我的代码在 android 3.0 上运行良好，但在 4.0 上它显示您的管视频屏幕，但是当点击播放时它只显示您管视频的进度条。

这是我的代码-

```
 if(Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB)
        {
            playVideoForBelowVersion();
        }

        else
        {

            playVideoForIcs();
        }
private void playVideoForBelowVersion() 
     {
        String url =  videoLinks[position] + "?autoplay=1";
        webView.getSettings().setJavaScriptEnabled(true);
        webView. getSettings().setJavaScriptCanOpenWindowsAutomatically (false);
        webView. getSettings().setPluginsEnabled (true);
        webView. getSettings().setSupportMultipleWindows (false);
        webView. getSettings().setSupportZoom (false);
        webView. setVerticalScrollBarEnabled (false);
        webView. setHorizontalScrollBarEnabled (false);
        webView.loadUrl(url);
        webView.setWebChromeClient(new WebChromeClient());
        webView.setWebViewClient(new WebViewClient()
        {

            @Override
            public void onPageFinished(WebView view, String url) {
                // TODO Auto-generated method stub
                super.onPageFinished(view, url);
//               progressDialog.dismiss();

            }

            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                // TODO Auto-generated method stub
                super.onPageStarted(view, url, favicon);
                 /*progressDialog.setMessage("Loading Video please wait...");
                 progressDialog.show();*/

            }

            @Override
            public void onReceivedError(WebView view, int errorCode,
                    String description, String failingUrl) {
                // TODO Auto-generated method stub
                super.onReceivedError(view, errorCode, description, failingUrl);
                Utilities.showToast(FullVideoAct.this, "Video Error...");
            }

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                // TODO Auto-generated method stub
                view.loadUrl(url);
                return true;
            }

        });
        webView.requestFocus();
     }

    private void playVideoForIcs() 
     {
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,  WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);
        String strUrl = "http://m.youtube.com/index?&desktop_uri=%2F#/watch?v="+videoLinksIds[position];
//      String strUrl =  videoLinks[position] + "?autoplay=1";
//      String strUrl ="http://www.youtube.com/v/"+videoLinksIds[position]+"?enablejsapi=1&version=3&playerapiid=ytplayer";
        webView.getSettings().setJavaScriptEnabled(true);
        webView. getSettings().setJavaScriptCanOpenWindowsAutomatically (false);
        webView. getSettings().setPluginsEnabled (true);
        webView. getSettings().setSupportMultipleWindows (false);
        webView. getSettings().setSupportZoom (false);
        webView. setVerticalScrollBarEnabled (false);
        webView. setHorizontalScrollBarEnabled (false);
        webView.loadUrl(strUrl);
        //wvVideo.loadData(htmlString, "text/html", "UTF-8");
        webView.setWebChromeClient(new WebChromeClient());

        webView.requestFocus();

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:19:22.883

**在 android 清单文件中设置 android:hardwareAccelerated="true" 在应用程序标记中，如此应用程序 android:icon="@drawable/ic_launcher" android:hardwareAccelerated="true" android:label="@string/app_name"**

# javascript - 在开始标记之后立即放置一个脚本

> ID：14769702
> 
> 赞同：7
> 
> 时间：2013-02-08T09:45:43.237
> 
> 标签：javascript, jquery

我想放置一个谷歌标签管理器脚本，根据谷歌标签文档，脚本应该放在开始标签之后。

由于我们无法更改源代码，因此我们必须使用以下代码片段附加脚本。

```
<script type="text/javascript">
(function () {
    var url = "path/to/js/file";
    var gtm = document.createElement('script');
    gtm.type = 'text/javascript';
    gtm.async = true;
    gtm.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + url;
    var s = document.getElementsByTagName('body')[0];
    s.parentNode.insertBefore(gtm, s);
})();
</script> 
```

它与 Google 分析脚本片段几乎相同。现在脚本被附加在 body 标记之前。我不确定使用 jQuery 方法 insertAfter 是否是正确的方法，或者是否有更好的方法！

我很感激你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T09:59:51.813

实际上，您的代码在and标记`script`之间插入。改用这个：`head``body`

```
var s = document.body.firstChild;
s.parentNode.insertBefore(gtm, s); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T10:02:06.720

您可以[`Node.insertBefore`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)为此使用：

```
var body = document.getElementsByTagName("body")[0];
body.insertBefore(gtm, body.firstChild); 
```

即使 body 标签没有`firstChild`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-30T13:19:23.360

**此 Q 不再相关**（2021 年 12 月），因为 GTM 更改了跟踪代码管理器的设置和安装：

在“新”设置中，您应该：

> *   将`<script>`代码片段放在`<head>`网页的 HTML 输出中，最好尽可能靠近开始`<head>`标记，但在任何 dataLayer 声明的下方。
> *   **另外 - 将`<noscript>`代码片段紧跟在 HTML 输出中的标记之后。

[https://support.google.com/tagmanager/answer/6103696](https://support.google.com/tagmanager/answer/6103696)

任何Javascript代码都`<noscript>`没有添加的意义`<noscript>`（noscript 仅在 JavaScript 关闭时在浏览器中有效）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-08T10:01:02.130

我想你可以试试这个 - appendChild

```
 document.getElementsByTagName("body")[0].appendChild(gtm); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-08T10:02:35.673

试试这个：

```
var script = 'The script content here'; // Add your JS as a string,
var url    = 'path/to/js/file';         // Or link to the file.
var scriptNode = document.createElement('script');       // Create a script Element
scriptnode.setAttribute('type', "text/javascript");      // Set the Element's `type` attribute.
// Either:
scriptNode.appendChild(document.createTextNode(script)); // Add the text to the script Element.
// Or:
scriptNode.setAttribute('src', url);                     // Link to the script
// Place the script Element before the first child of the body.
document.body.insertBefore(scriptNode , document.body.firstChild); 
```

所以，基本上，使用[`insertBefore`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-08T10:05:19.307

如果您正在使用 jQuery，则可以使用[.prepend()](http://api.jquery.com/prepend/)。

```
(function () {
    var url = "path/to/js/file";
    var gtm = document.createElement('script');
    gtm.type = 'text/javascript';
    gtm.async = true;
    gtm.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + url;
    $('body').prepend(gtm);
})(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-08T10:13:20.130

你可以在你的body标签中有一个元素作为第一个元素，并在它之前附加脚本。使用 `yourFirstElementIdfromBodyTag.before(here is your appended code goes)`..

例如

```
<body>
<your first element> like <input type="hidden" id="hidA" />
//rest code goes here
</body> 
```

现在按照建议使用`$('#hidA').before('the script code')`. 我相信它会在`<body>`.

# reporting-services - 每页的行数 SSRS

> ID：14769703
> 
> 赞同：1
> 
> 时间：2013-02-08T09:45:44.600
> 
> 标签：reporting-services, ssrs-2008

我们的服务器团队资源成员将 SSRS 报告从 sql 报告服务器 2005 上传到 sql 报告服务 2008 R2 服务器。在我进行测试时，我发现了一个区别，2008 r2 服务器的页面数量比 2005 服务器多。例如，我在 sql 2005 服务器中获得了 20 个页面，在 sql 2008 r2 服务器中获得了 30 个页面。是设置还是我缺少的任何东西或需要调整的东西？

我还比较了两份报告，两份报告都有相同的数据。我看到的唯一区别是 2008 r2 服务器上每页的行数更少。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:17:53.650

您能否检查两个报告的尺寸属性，例如：

1.  页面大小和方向。
2.  页边距。
3.  tablix 上的文本大小。
4.  tablix 单元格之间和之间的间距。

除了这些我不太确定。

我对你的问题很感兴趣。祝你好运！

# codeigniter - 文件上传代码点火器..不工作

> ID：14769709
> 
> 赞同：3
> 
> 时间：2013-02-08T09:46:15.830
> 
> 标签：codeigniter, upload

这是在我的控制器中用于文件上传

```
$config['upload_path'] = './assets/images/b2b/banner-agent/';
$config['allowed_types'] = 'gif|jpg|png';
$config['overwrite'] = TRUE;
$config['file_name'] = "$banner2";
$this->load->library('upload', $config);
$this->upload->data();
$this->upload->do_upload();
$this->upload->initialize($config); 
```

我的代码有什么问题吗？上传不工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:13:19.100

`do_upload`在为上传类初始化和设置配置变量之前，您不能简单地调用方法。

您需要像这样修改您的代码：

```
$config['upload_path'] = './assets/images/b2b/banner-agent/';
$config['allowed_types'] = 'gif|jpg|png';
$config['overwrite'] = TRUE;
$config['file_name'] = $banner2;
$this->load->library('upload'); //initialize
$this->upload->initialize($config); //Alternately you can set preferences by calling the initialize function. Useful if you auto-load the class
$this->upload->do_upload(); // do upload
if($this->upload->do_upload()){
    $this->upload->data(); //returns an array containing all of the data related to the file you uploaded.
} 
```

您也可以咨询**Codeigniter wiki**：

**[http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)**

希望这可以帮助。

# jquery - Select2 插件和取消选中的数据

> ID：14769711
> 
> 赞同：1
> 
> 时间：2013-02-08T09:46:22.637
> 
> 标签：jquery, select, input

我正在使用[Select2 库](https://github.com/ivaynberg/select2)v3.3，这是一种流行的基于 jQuery 的选择框替代品。

特别是，我正在使用对*RottenTomatoes*的 ajax 调用来测试该示例（请参阅[此处的](http://ivaynberg.github.com/select2/index.html)*加载远程数据*部分）。在那里，将隐藏输入放入 HTML 代码中，然后将 Select2 库附加到隐藏输入以呈现“自定义选择”。

为了使示例自包含，我在这里报告 HTML 的代码：

```
<input type="hidden" id="e6" style="width:600px"/> 
```

以及对于 JS：

```
<script>
    $("#e6").select2({
        placeholder: "Search for a movie",
        minimumInputLength: 1,
        ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
            url: "http://api.rottentomatoes.com/api/public/v1.0/movies.json",
            dataType: 'jsonp',
            data: function (term, page) {
                return {
                    q: term, // search term
                    page_limit: 10,
                    apikey: "ju6z9mjyajq2djue3gbvv26t" // please do not use so this example keeps working
                };
            },
            results: function (data, page) { // parse the results into the format expected by Select2.
                // since we are using custom formatting functions we do not need to alter remote JSON data
                return {results: data.movies};
            }
        },
        formatResult: movieFormatResult, // omitted for brevity, see the source of this page
        formatSelection: movieFormatSelection,  // omitted for brevity, see the source of this page
        dropdownCssClass: "bigdrop", // apply css that makes the dropdown taller
        escapeMarkup: function (m) { return m; } // we do not want to escape markup since we are displaying html in results
    });

  function movieFormatResult(movie){return movie.title;}
  function movieFormatSelection(movie){return movie.title;}
</script> 
```

**一旦选择了一个值，我如何从 jQuery 函数中删除这个值？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:08:34.960

以下几行应该有效：

```
function erase(){
    $("#e6").select2("data", null);
} 
```

我知道，人们期望`val`应该为这个例子设置参数，但你必须使用它`data`。

# android - 是否可以为 Android 编写复杂的功能测试？

> ID：14769722
> 
> 赞同：0
> 
> 时间：2013-02-08T09:46:39.637
> 
> 标签：android, junit, functional-testing, android-testing

有可能有这样的东西吗？使用 Android/Robotium 测试框架或任何其他解决方案

```
public void testAll() throws Exception {
    test_001_LoginActivity();
    test_002_MainActivity();
}

public void test_001_LoginActivity() throws Exception {
    startActivity();
    test_001_LoginActivity_001_emptyUsername();
    test_001_LoginActivity_002_emptyPassword();
    test_001_LoginActivity_003_incorrectValues();
    test_001_LoginActivity_004_correctValues(); // MainActivity is opened on success
}

public void test_002_MainActivity() throws Exception {
    test_002_MainActivity_001_profile();
    test_002_MainActivity_002_list();
    test_002_MainActivity_003_logout();
} 
```

这个想法是在不重新创建活动的情况下拥有`test_001_LoginActivity()`并`test_002_MainActivity()`包含所有相应的活动测试。并显示这样的结果：

```
test_001_LoginActivity() - OK
--->test_001_LoginActivity_001_emptyUsername() - OK
--->test_001_LoginActivity_002_emptyPassword() - OK
--->test_001_LoginActivity_003_incorrectValues() - OK
--->test_001_LoginActivity_004_correctValues() - OK

test_002_MainActivity() - NOK
--->test_002_MainActivity_001_profile() - OK
--->test_002_MainActivity_002_list() - NOK
--->test_002_MainActivity_003_logout() - OK 
```

这意味着所有测试`LoginActivity`都成功通过；`test_002_MainActivity_002_list()`测试失败`MainActivity`，但`test_002_MainActivity_003_logout()`测试通过（因为未重新创建活动）

我是测试新手，所以也许我弄错了，并且测试总是针对全新的活动实例执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:51:00.023

如果您重命名所有 test_00X_METHOD 方法，那么您尝试做的事情可能是可能的，因为目前它会变得一团糟，因为方法之前的“test”前缀对 jUnit 框架具有特殊含义 - 除此之外，所有方法都将由您从 testAll() 执行此外，所有方法都将在稍后单独执行，因为 jUnit 将所有带有“test”前缀的方法作为单独的测试用例运行，甚至在这些方法之间重新启动应用程序。因此，如果您丢弃所有“测试”前缀但保留它以供 testAll() 使用，它应该可以正常工作。而且您不需要在 test_001_Lo​​ginActivity() 开始时使用“startActivity()”方法，因为 Activity 是自动启动的 - 哪个活动？您作为类型参数传递给此类的活动：http: [//developer.android。](http://developer.android.com/reference/android/test/ActivityInstrumentationTestCase2.html)

我希望这个答案对你有用。

Krzysiek，Bitbar 软件工程师

# android - 在 videoView 持续时间之后，如何更改进度条的位置？

> ID：14769723
> 
> 赞同：0
> 
> 时间：2013-02-08T09:46:40.417
> 
> 标签：android, video, progress-bar, android-videoview, seek

我有以下代码：

```
final SeekBar videoBar = (SeekBar) findViewById(R.id.videoBar);
final VideoView videoView = (VideoView) findViewById(R.id.videoViewPaint);
videoView.setVideoPath(videoPath);
videoView.start();
videoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
                        @Override
                        public void onPrepared(MediaPlayer mp) {
                            long duration = videoView.getDuration();
                            videoBar.setMax((int) duration);
                            LogService.log("in runnable", "videoView duration= " + videoView.getDuration());
                        }
                    });
videoBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
            if (isVideo) {
                videoView.seekTo(progress);
            }
        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {

        }

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {

        }
    });
playBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if (isPlaying) {
                // Button is ON
                videoView.pause();
                playBtn.setImageResource(R.drawable.play);// Do Something
                isPlaying = false;
            } else if (!isPlaying) {
                // Button is OFF
                videoView.start(); // Do Something
                playBtn.setImageResource(R.drawable.pause);
                isPlaying = true;
            }
        }
    }); 
```

现在，如果我移动进度条（videoBar），它会将视频带到视频的那部分，但如果视频播放，它不会移动到进度条，旁边。我怎样才能做到，在视频播放时移动进度条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:54:40.100

这帮助我做对了，现在它可以工作了。第一个答案

[如何在android中同时使用Seekbar作为seekBar和progressBar？](https://stackoverflow.com/questions/7731354/how-to-use-a-seekbar-in-android-as-a-seekbar-as-well-as-a-progressbar-simultaneo)

# highcharts - 导航器系列如何在highstock中定位？

> ID：14769724
> 
> 赞同：2
> 
> 时间：2013-02-08T09:46:44.110
> 
> 标签：highcharts, highstock

我想最后修复导航器手柄的位置。当我重新加载页面时，导航器句柄完全展开。

我想像这样修复导航器手柄的位置。

![在此处输入图像描述](../Images/ab517f8701d68098c37872ccbbb62b93.png)

在下图中，我最后手动调整了手柄位置。我想默认固定位置。

![在此处输入图像描述](../Images/660fd91a9b182eea2c8a7ec0bb1a1e45.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T14:53:36.457

您需要以毫秒为单位设置 xAxis 范围：http: [//api.highcharts.com/highstock#xAxis.range](http://api.highcharts.com/highstock#xAxis.range)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:51:01.667

您可以使用 setExtremes 函数[http://api.highcharts.com/highstock#Axis.setExtremes()](http://api.highcharts.com/highstock#Axis.setExtremes())

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-06T06:47:17.820

使用 xAxis.range ：

```
$('#container').highcharts('StockChart', {
    xAxis: {
        range: 6 * 30 * 24 * 3600 * 1000 // six months
    },
    ....
} 
```

演示[提琴手](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/xaxis/range/)

# image - 检查像素是否属于图像

> ID：14769730
> 
> 赞同：0
> 
> 时间：2013-02-08T09:47:00.823
> 
> 标签：image, matlab, pixel, belongs-to

我编写了以下函数来查找像素是否属于`matlab`.

一开始，我想测试它，好像一个集合中的一个数字属于一个向量，如下所示：

```
function traverse_pixels(img)
for i:1:length(img)
    c(i) = img(i)
end 
```

但是，例如，当我运行以下命令时，我得到了最后显示的错误：

```
>> A = [ 34 565 456 535 34 54 5 5 4532 434 2345 234 32332434];
>> traverse_pixels(A);
??? Error: File: traverse_pixels.m Line: 2 Column: 6
Unexpected MATLAB operator. 
```

这是为什么？我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:50:35.237

你的 for 循环的头部有一个语法错误，它应该是：

```
for i = 1:length(img) 
```

此外，要检查数组是否包含您可以使用的特定值：

```
A = [1 2 3]
if sum(A==2)>0
    disp('there is at least one 2 in A')
end 
```

这应该更快，因为不包含 for 循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:51:03.640

对于 i = 1：长度（图像）

愚蠢的错误，不是**:**，它是**=**

# button - 如何在 PrimeFaces 仪表板组件上添加关闭按钮？

> ID：14769733
> 
> 赞同：0
> 
> 时间：2013-02-08T09:47:21.100
> 
> 标签：button, primefaces, widget, dashboard

我正在尝试使用 PrimeFaces`dashboard`组件创建小部件。根据用户的选择，他应该能够折叠/关闭小部件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:54:38.877

在仪表板项目中使用可关闭的面板；

```
 <p:panel id="pnl" toggleable="true" closable="true" toggleSpeed="500" closeSpeed="500" widgetVar="panel"> 
```

祝你好运！

# lotus-notes - Lotus Script - 检查 Windows 进程是否正在运行

> ID：14769736
> 
> 赞同：0
> 
> 时间：2013-02-08T09:47:29.387
> 
> 标签：lotus-notes

我是编程新手。我制作了一个简单的代码块，当我在 Lotus Notes 8.5.3（基本）中打开应用程序时运行 Windows 程序 POSTOPEN

```
' [ML]Check if user is member of the [ConnectClient] role. 
ipConnect = HasRole("[ConnectClient]") 
If ipConnect = True Then 
    Dim result As Integer
    Print "Postopen: Has [ConnectClient] role - starting Connect Client"
    result = Shell("c:\program files (x86)\ipvision\Connect\connect.exe", 1) 
End If 
```

Lotus Script 有什么方法可以检查 Windows 进程是否已经在运行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:02:01.193

用于`Shell`运行`tasklist`并将输出定向到文件。然后在 LotusScript 中读取该文件并检查该进程是否在此处列出。

**编辑**

看起来您甚至可以使用以下命令检查特定进程是否正在运行`tasklist`：

```
tasklist /FI "IMAGENAME eq connect.exe" /FO CSV > search.log 
```

[如何通过批处理脚本检查进程是否正在运行](https://stackoverflow.com/questions/162291/how-to-check-if-a-process-is-running-via-a-batch-script)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:10:09.473

根据这个片段：[http](http://blog.panagenda.com/pub/panablog.nsf/d6plinks/FLOR-7D5KZR) ://blog.panagenda.com/pub/panablog.nsf/d6plinks/FLOR-7D5KZR 我假设以下代码可以工作：[http ://coderstalk.blogspot.sk/2009/10/list-windows -xp-running-process-and.html](http://coderstalk.blogspot.sk/2009/10/list-windows-xp-running-process-and.html)

```
Option Explicit

Dim oProc, oWMIServ, colProc
Dim strPC, strList
Dim StrSpace

strPC = "."

Set oWMIServ = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strPC & "\root\cimv2")    

Set colProc = oWMIServ.ExecQuery("Select * from Win32_Process")

strSpace = string(20," ")
strList = "ProcName" & strSpace & vbTab & "ProcID" & vbCrLf & string(45,"-")

For Each oProc In colProc
    strSpace = string(28 - len(oProc.Name)," ")
    strList = strList & vbCrLf & oProc.Name & strSpace & vbTab & oProc.ProcessId
Next 
```

所以一旦你有了进程ID（假设你已经通过shellid函数运行了你的任务），对所有正在运行的进程执行检查并确定你是否已经启动了进程ID。

顺便说一句：可以使用相同的方法来终止此类过程。只需谷歌搜索>“winmgmts”lotusscript<。

# php - CRUD 资源包括与 RESTfull JSON-API 的 MANY_MANY 关系中的子资源

> ID：14769737
> 
> 赞同：1
> 
> 时间：2013-02-08T09:47:34.593
> 
> 标签：php, crud, yii

我将 YII 框架用于具有 RESTfull JSON-API 和 CRUD 操作的 Web 应用程序。对于 API，我使用[restfullyii](http://www.yiiframework.com/extension/restfullyii/)扩展。有替代方案吗？

具有 MANY_MANY 关系的三个表（User、Event 和 event_participant）。这是**事件**模型中的关系：

```
public function relations()
{
    return array(
        'participants' => array(
            self::MANY_MANY,
            'User',
            'event_participant(studiobooking, user)'
        )
    );
} 
```

我想在一个请求中使用 CRUD 操作对带有用户子资源的事件进行 CRUD。它可以使用子资源获取资源。现在我想保存/更新/删除资源，包括。子资源，例如带有此数据的 POST 请求：

```
{
    "event": "eventname",
    "start": "2013-02-17 14:30:00",
    "end": "2013-02-17 16:00:00",
    "participants": [ {
        "id": "2"
    },{
        "id": "3"
    }]
} 
```

这应该在 Event 表中创建新事件，并在“event_participant”表中创建具有参与者 id 的事件的新 id。YII 框架可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:25:39.310

你必须想出自己的代码来做到这一点，但它相对简单。这是一个例子。注意：这是在 StackOverflow 编辑器中“编码”的，所以它不是生产就绪的，经过测试的代码 :)

```
//in your Event model
public function associateWithParticipant(int $participantId)
{
    //you may check if the participant even exists before inserting it, but this is a detail
    $sql="INSERT INTO tbl_event_participant_pivot (event_id, participant_id) VALUES(:event_id,:participant_id)";
    $command=Yii::app()->db->createCommand($sql);
    $command->bindParam(":event_id",$this->id,PDO::PARAM_INT);
    $command->bindParam(":participant_id",$participantId,PDO::PARAM_INT);
    $command->execute();
}

//in your Event controller (or ApiController or whatsoever you are using)
public function actionCreateEvent()
{
    //if for any reason POST is not giving you any JSON try file_get_contents('php://input')
    if(isset($_POST['Event'])) {
        $data = CJSON::decode($_POST['Event']);
        //first, make sure this is transactional or an error while adding participants could leave
        //your db in an inconsistent state
        $tx = Yii::app()->db->beginTransaction();
        try {
            //create the event
            $event = new Event();
            $event->attributes = $data;

            //save it and if that works check if there is anything in the participants "array"
            if($event->save()) {
                if(isset($data['participants'])) {
                    //check if this is a correct JSON array
                    if(is_array($data['participants']) {
                        foreach($data['participants'] as $participantEntry) {
                            //add a new row to the pivot table
                            $event->associateWithParticipant($participantEntry['id']);
                        }
                    } else {
                        throw new CHttpException(400,'Participants has to be a JSON array');
                    }
                }
            }
            //commit the transaction as we are finished now
            $tx->commit();
        } catch (Exception $e) {
            //roll back the tx if an error occurred
            throw new CException("I've seen the horrors of bad coding")
            $tx->rollback();
        }
    }
} 
```

# android - RSS阅读器Android 4.xx

> ID：14769738
> 
> 赞同：0
> 
> 时间：2013-02-08T09:47:34.750
> 
> 标签：android, rss-reader

我是 Android 的初学者，我尝试为 Android 平台编写一个 rss 阅读器。我用这个[http://androidresearch.wordpress.com/2012/01/21/creating-a-simple-rss-application-in-android/](http://androidresearch.wordpress.com/2012/01/21/creating-a-simple-rss-application-in-android/)

教程，但它不适用于 android 4.2.1 有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:45:46.763

“tutorial, but it doesn't work on android 4.2.1” 很难说哪里出了问题，信息不够。

这些教程之一应该可以帮助您使用 RSS 阅读器：

[在 Android 中制作一个流畅的 RSS 阅读器](http://www.ingeniumblog.net/2012/01/making-a-slick-rss-reader-in-android/)

[Android RSS阅读器教程](http://www.cse.nd.edu/~cpoellab/teaching/cse40814/RSS_Android.pdf)

# php - Symfony 和处理 Json

> ID：14769741
> 
> 赞同：1
> 
> 时间：2013-02-08T09:47:39.537
> 
> 标签：php, json, symfony

首先，我不得不说，我对 Symfony 很陌生。。我需要了解正确的方法，以及代码的去向，以及如何处理输出。

我得到了一个调用网站的规范；例子;

```
Path:   http://mywebsiteserver.com/getstuff/studentID=100 
Method: GET 
```

它会返回一个 json ；

例子;

```
{"response":{"data":[{"StudentID":..................... 
```

我需要解析这些数据，并在网站上显示为表格......

什么是正确的结构？如果您能指引我正确的方向，我们将不胜感激所有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:05:25.450

这是由 PHP 本地完成的。

```
// inside controller
$jsrc = "http://mywebsiteserver.com/getstuff/studentID=100";
$json = file_get_contents($jsrc);
$jset = json_decode($json, true); 
```

然后把数据放在你喜欢的地方

# google-drive-api - 如何过滤列表返回的项目以排除我上次修改的文件？

> ID：14769748
> 
> 赞同：0
> 
> 时间：2013-02-08T09:47:53.157
> 
> 标签：google-drive-api

查看列表的结果，有一个 lastModifyingUserName，但没有用户 ID 或其他对用户的具体引用，因此我可以强烈验证该文件是否由我或其他人最后修改。

我可以使用我的用户配置文件信息的字符串比较来近似此行为，但这不是精确检查。

我还查看了时间戳，我修改过的文件的时间戳似乎没有对齐，所以看起来我也不能使用时间戳来做到这一点，这本身就是一个错误，例如：

```
 "modifiedByMeDate": "2013-01-31T02:25:26.738Z",
    "modifiedDate": "2013-01-31T02:29:58.363Z", 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:58:08.587

`lastModifyingUserName`Google 正在努力改进这一点，以便在字段中返回的参与者和权限 ID之间保持一致。

现在我同意你的看法，这几乎是不可能的，对不起。

# cloudbees - 使我们自己的“应用程序不可用”页面

> ID：14769749
> 
> 赞同：2
> 
> 时间：2013-02-08T09:47:54.050
> 
> 标签：cloudbees

我们需要在升级期间完全停止我们的应用程序，因为我们必须执行一个关键的 mysql 脚本。

所以我们的应用程序将在几分钟内关闭，然后 Cloudbees 将显示一个基本的“应用程序不可用”页面。我们想通过我们自己的带有徽标的页面来更改它，就像我们在拥有自己的 apache/tomcat 服务器时所做的那样。有可能吗？

顺便说一句，是否有像我们在 Tomcat 管理器中的活动会话的页面？

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:17:51.347

您可以使用 beta 功能[的蓝绿](http://martinfowler.com/bliki/BlueGreenDeployment.html)支持将您的应用程序切换到另一个运行“维护”页面的实例

使用最新的SDK（1.3.1），运行`bees app:proxy:update -a acme-maintenance -al www.acme.com`将www.acme.com的http路由器重新配置到维护应用程序，然后让您的应用程序运行mysql升级脚本，完成后恢复路由器配置。

警告：此功能处于测试阶段，可能会出现不稳定/API 更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:53:30.437

目前还没有一种简单的方法可以做到这一点 - 但很快就会有一个功能可以让这变得容易（除其他外）。

目前唯一的方法是拥有一个应用程序（另一个应用程序） - 这是您的简单页面 - 然后您从当前应用程序中删除域名并将其添加到该应用程序（等） - 混乱，但可能。

在会话方面，Web 控制台的操作选项卡显示类似的信息，还有提供其他见解的 newrelic 控制台。

# php - PHP 警告指令 register_global 在 php 5.3 中被贬低

> ID：14769751
> 
> 赞同：-1
> 
> 时间：2013-02-08T09:47:57.763
> 
> 标签：php, html

我正在尝试运行 selenim 测试用例，并且在未知行 0 中出现错误 register_globals is depriated and greater 可以帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:55:50.557

您必须在 register_globals 上执行此操作，您可以在**php.ini**或

```
ini_set('register_globals','1'); 
```

在 php 代码上，你也可以通过 htaccess 来做到这一点

```
<IfModule mod_php4.c>
  php_value register_globals 1
</IfModule>

<IfModule sapi_apache2.c>
  php_value register_globals 1
</IfModule>

php_flag register_globals 1 
```

# javascript - 自定义搜索 DOM 元素

> ID：14769753
> 
> 赞同：-1
> 
> 时间：2013-02-08T09:48:05.527
> 
> 标签：javascript, dom

我正在编写一个自定义方法来返回 DOM 元素引用，但它似乎适用于所有现代浏览器，如 Chrome、Firefox、Safari，但在 IE 9 中失败......返回的元素未定义它表明我不确定我在做什么错误的

```
var searchEle = function (parent, ref) {
var refEle;
if (typeof document.getElementByClassName === "function") {
    if (ref.substr(0, 1) === ".") {
        refEle = parent.getElementsByClassName(ref.replace(".", ""));
    } else {
        refEle = parent.getElementsByTagName(ref);
    }
} else {
    if (ref.substr(0, 1) === "#") {
        refEle = parent.getElementById(ref.replace("#", ""));
    } else if (ref.substr(0, 1) === ".") {
        refEle = parent.querySelector(ref);
    }
}
return refEle;
}; 
```

在 IE9 上查看演示：http: [//jsbin.com/ubokop/5/edit](http://jsbin.com/ubokop/5/edit)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:47:37.183

首先，将这个 polyfill 用于`getElementsByClassName`，因为这确实是唯一需要一个的函数。它并不完美，但已经足够接近了。

```
// Add a getElementsByClassName function if the browser doesn't have one
// Limitation: only works with one class name
// Copyright: Eike Send http://eike.se/nd
// License: MIT License
if (!document.getElementsByClassName) {
    document.getElementsByClassName = function(search) {
        var d = document, elements, pattern, i, results = [];
        if (d.querySelectorAll) { // IE8
            return d.querySelectorAll("." + search);
        }
        if (d.evaluate) { // IE6, IE7
            pattern = ".//*[contains(concat(' ', @class, ' '), ' " + search + " ')]";
            elements = d.evaluate(pattern, d, null, 0, null);
            while (i = elements.iterateNext()) {
                results.push(i);
            }
        } else {
            elements = d.getElementsByTagName("*");
            pattern = new RegExp("(^|\\s)" + search + "(\\s|$)");
            for (i = 0; i < elements.length; i++) {
                if ( pattern.test(elements[i].className) ) {
                    results.push(elements[i]);
                }
            }
        }
        return results;
    }
} 
```

**（[这个polyfill的来源](https://gist.github.com/eikes/2299607)）**

那么，这就足够了：

```
var searchEle = function (ref) {
    if (ref.charAt(0) === "#") {
        return document.getElementById(ref.substr(1));
    }else if (ref.charAt(0) === ".") {
        return document.getElementsByClassName(ref.substr(1));
    }else{
        return document.getElementsByTagName(ref);
    }
}; 
```

# python - 在 Python 中循环的多次迭代中执行一次操作

> ID：14769754
> 
> 赞同：0
> 
> 时间：2013-02-08T09:48:09.387
> 
> 标签：python, loops

我正在编写的代码在屏幕上放置一个形状，并允许通过向上/向下箭头键操作该形状。我一直试图让它做的是使形状变化的数量取决于按键的顺序；只要输入与初始按键相同，形状变化量就会很大。然而，当按键的第一次“反转”发生时（例如，进行微调），在该点之后的每一次按键（不管它是否与最初的按键相同）都应该以小得多的比例改变圆圈（不是交互的，只是 0.1cm 变化而不是 2cm）。代码是用 Psychopy 编写的。

我想我还没有掌握应该为此设置循环的方式，但我看不出如何改变它们来做我想做的事情。为实际代码道歉，而不是一个最小的例子 - 任何建议都非常感谢。

```
for thisTrial in trials:
    endKey = 0
    nKeypress = 0
    count = 0
    counting = 0
    if thisTrial == 'ellipse':
        ellipseHeightinit = 7.6,1.9 + (round(numpy.random.uniform(-1,1),1))
    elif thisTrial == 'circle':
        ellipseHeightinit = 7.6,7.6 + (round(numpy.random.uniform(-1,1),1))
    ellipseHeight = ellipseHeightinit
    ellipseStim.setSize(ellipseHeight, log = False) # set the initial size of the shape  
    while endKey == 0:
        ellipseStim.setAutoDraw(True)
        win.flip() # flip the window to see the stimuli
        allKeys = event.waitKeys() 
        if count < 1: #store the first keypress made
            for thisKey in allKeys:
                firstKeypress = thisKey
                count += 1
                event.clearEvents()
        for thisKey in allKeys: # change the size of the shape depending on key pressed
            if thisKey == 'up':
                nKeypress = nKeypress + 1
            elif thisKey == 'down':
                nKeypress = nKeypress - 1
            elif thisKey == 'space':
                endKey = 1
            while counting < 1: # attempt to make step size large until reversal
                if thisKey == firstKeypress:
                    ellipseHeight = 7.6, ellipseHeightinit[1] + nKeypress*20
                    break
                elif thisKey != firstKeypress:
                    ellipseHeight = 7.6, ellipseHeightinit[1] + nKeypress*0.1
                    counting += 1
                    break
       ellipseStim.setSize(ellipseHeight, log = False) # set new shape size     
    ellipseStim.setAutoDraw(False) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:51:25.843

您应该存储最后一次按下的键，以及最后使用的移动量。如果按下的新键相同，则增加您的金额。否则，您将其设置为最小值。

# c - ROM 变量未获得定义的值

> ID：14769756
> 
> 赞同：3
> 
> 时间：2013-02-08T09:48:12.963
> 
> 标签：c, embedded

我正在开发基于 Renesas RL78 控制器的汽车软件堆栈。直接进入问题，声明为 const（ROM 变量）的变量没有使用定义的值进行初始化。

例如：const uint8 var_test = 1；

另一方面，全局静态变量正在初始化。

这是启动代码的问题吗？请建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:05:24.020

通常 const 不足以作为允许变量进入 ROM 的限定符（您总是可以将其丢弃）。通常你需要用编译器特定的东西来标记变量以表明你想要什么，或者可能是一个编译器标志来表明你的意图。我相信 IAR 编译器使用 @ 符号来允许您指定变量的位置。我会检查它的手册:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:48:59.933

像其他答案一样，您的 const 变量可能没有放入 ROM 部分。

您需要告诉编译器/链接器将其放置在何处。

使用 IAR 工具链可能类似于

```
#pragma SET_CONST_PAGE(ConstArea)

const int myVariable1=42;
const int myVariable2=4711;

#pragma SET_DEFAULT_CONST_PAGE 
```

但是您的调试器没有显示正确的值是另一个问题，变量可能已被优化。
要确定会发生什么，请查看映射文件并（使用调试器）在程序集级别查看已完成的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:53:57.327

通常，非静态`const`变量不是“足够恒定”以进入 ROM。如果您使用这些变量检查一个函数，您可能会看到该函数的前导码有代码来初始化本地堆栈上的变量。

当然，启动代码不能解决这个问题，因为它（根据定义）不能将值写入 ROM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T23:35:23.197

语言不要求 const 对象位于 ROM 中，而只是在初始化后是只读的，并且出于某些目标的性能原因，例如编译器可能会故意避免这样做。

IAR RL78 [C/C++ 编译器参考指南](ftp://ftp.iar.se/WWWfiles/rl78/CRL78-1.pdf)指出：

> “声明为 const 并位于远内存中的静态和全局对象在 ROM 中分配。声明为 const 的 saddr 对象在 RAM 中分配，并在启动时由运行时系统初始化。声明为 const 的近对象根据选项--near_const_location 分配。
> 
> 在 C++ 中，需要运行时初始化的对象不能放在 ROM 中。”

请参阅手册中的`#pragma location`指令或`@`运算符，它们允许放置在绝对地址或命名内存段内。

# html - html css ol 垂直

> ID：14769757
> 
> 赞同：-1
> 
> 时间：2013-02-08T09:48:16.680
> 
> 标签：html, css

我写了一段代码：

```
<p> 
    Example:
</p>
<ol>
    <li>Text 1</li>
    <li>Text 2</li>
</ol> 
```

这需要将我的文本垂直设置在彼此下方

但它给我的输出是我的文本是相互覆盖的，所以不是垂直的，而是在一行上。

我需要这样的：

```
<p> 
    Example:
</p>
<ol>
    <li>Text 1</li>
    <li>Text 2</li>
</ol> 
```

现在是这样的：

![在此处输入图像描述](../Images/86dfa7a0b6f14742261026f8afe709ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:37:25.500

这可能是一个评论。但我想我可以指导你并解释更多。

该问题仅包含没有出现问题的 HTML 标记。很好。问题在于**CSS**，这是表示样式。所以，这与CSS有关。

我从您的屏幕截图中感受到的是，可能有一个带有规则的 CSS：

```
* {line-height: 0;} 
```

这可能是一个错误，或者由于某些原因，它被覆盖了。您需要通过以下任一方式重置这些值：

*   使用 CSS 重置 - Eric Meyer、简单重置或 YUI 重置。
*   如果是简单重置，你可以给出这个规则：

    ```
    * {margin: 0; padding: 0; line-height: 1.2em;} 
    ```

    这`line-height`是针对您的特定情况的。

*   并确保将自定义 CSS 放在最后，以便它有效并覆盖所有其他样式。

希望你能完成它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T09:50:48.213

尝试使用：

```
li {
    float: none;
    dispaly: block;
    clear: both;
} 
```

# php - 在任何请求之前测试用户身份

> ID：14769758
> 
> 赞同：1
> 
> 时间：2013-02-08T09:48:27.190
> 
> 标签：php, zend-framework2, user-identification

我想知道如何在整个模块中执行访问控制。让我解释一下：如果我有一个仅用于创建会话的模块（/authentication/）。还有一个包含主应用程序的模块（/Main/）。

如果用户正确创建了会话，我想要做的是检查主模块上的任何请求。

在我对互联网的研究中，我看到了一种方法。我不确定，所以请告诉我我的解决方案是否良好：我将在我的引导函数（在 module.php 上）中实现一个事件，该事件将检查会话是否正确创建。如果不是，我将重定向到模块身份验证。

```
public function onBootstrap($e){

    $eventManager = $e->getApplication()->getEventManager();

    $auth = new AuthenticationService();
    if (!$auth->hasIdentity()) {
        $response  = $e->getResponse();
        $response->getHeaders()->addHeaderLine('Location', 'authentification');
        $response->setStatusCode(302);
    }

    $moduleRouteListener = new ModuleRouteListener();
    $moduleRouteListener->attach($eventManager);
} 
```

你觉得这个解决方案怎么样？

不幸的是，这个解决方案并不好。我不知道为什么，但似乎即使在模块身份验证中也会执行此代码。因此，在第一次调用时，当您尝试进入 url:/main 时，您将被重定向到模块 /authentication 并且代码将再次被重新执行，并且模块会将您重定向到 /authentication 并一次又一次地再次...

所以我认为解决方案是检查请求的 url 是否与这个 /authentication 不同。

这该怎么做 ？

希望我的问题清晰易懂。

谢谢你=D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:59:16.010

```
public function onBootstrap(MvcEvent $e) {

        $eventManager = $e->getApplication()->getEventManager();

        $eventManager->attach(MvcEvent::EVENT_DISPATCH, function($e) {

            $controller = $e->getTarget();
            $auth = new AuthenticationService();
            $is_login = $auth->hasIdentity();

                        //check if action is login

            $params = $e->getApplication()->getMvcEvent()->getRouteMatch()->getParams();

            if ($params['action'] == 'login') {

                if ($is_login) {
                    return $controller->redirect()->toRoute('adminindex');
                }

            } else {

                if (!$is_login) {
                    return $controller->redirect()->toRoute('adminauthlogin');
                }

            }
});

    } 
```

更好的解决方案；）

# java - 服务器和客户端之间的密码以明文形式传递

> ID：14769759
> 
> 赞同：0
> 
> 时间：2013-02-08T09:48:28.697
> 
> 标签：java, tomcat, ssl, sniffing

当 SSL 已激活时，服务器和客户端之间的密码以明文形式传递。安全测试人员说，密码可以在网络层看到。其中，由于 SSL，它在应用层受到保护。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:11:32.687

为了防止这种情况，请使用摘要身份验证 [http://en.wikipedia.org/wiki/Digest_access_authentication](http://en.wikipedia.org/wiki/Digest_access_authentication)

阅读例如 Spring 解决方案 [http://static.springsource.org/spring-security/site/docs/3.0.x/reference/basic.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/basic.html) [http://www.jpalomaki.fi/?p=190](http://www.jpalomaki.fi/?p=190) [http://www .tinhtruong.me/2011/10/spring-security-with-digest.html](http://www.tinhtruong.me/2011/10/spring-security-with-digest.html)

# php - 使用 PHPMyAdmin 导入 MySQL 数据库时如何解决权限错误？

> ID：14769766
> 
> 赞同：0
> 
> 时间：2013-02-08T09:48:59.673
> 
> 标签：php, mysql, sql, permissions, phpmyadmin

我正在开发一个基于 MySQL 数据库的网站。因为我想先离线，所以我在我的机器上安装了 WAMP 服务器。这有 Apache、SQL 服务器和 PHP。

我在离线机器上创建了一个数据库。该数据库由用户调用`OffDB`，由用户`OffUser`使用密码创建`OffPwd`。我已将它导出到一个 SQL 文件（小于 1 MB）。我想将此数据库导入我的在线数据库，该数据库`OnDB`由用户创建`OnUser`，密码为`OnUser`。当我尝试在 PHPMyAdmin 中导入时，出现以下错误：

> “用户 OnUser 无权访问数据库 OffDB”

在离线 PHPMyAdmin 中，我添加了一个新用户 ,`OnUser`密码`OnPwd`，并授予它对 OffDB 的所有权限。然后我再次导出 OffDB，并尝试再次导入。它因同样的错误而失败。如果我添加新的离线用户 OnUser，密码为 OffPwd，并授予它权限，同样的事情 - 导入时我总是收到错误。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:58:26.277

您需要将 OffUser 和 OffDB 添加到实时服务器，而不是相反。

或者，进行不指定数据库名称和用户的备份（对于后者，查找涉及 GRANT 的选项，然后禁用这些选项）。`mysqldump`应该有选项，至少如果你使用`mysqldump <database_name>`变体，PHPMyAdmin 也应该如此。

# jquery - 在 JQuery timePicker NOW 按钮上设置服务器时间

> ID：14769767
> 
> 赞同：0
> 
> 时间：2013-02-08T09:49:13.053
> 
> 标签：jquery, jquery-ui, timepicker, jquery-ui-timepicker

我正在使用 opencart 版本 1.5.1.3，我们多次使用 jQuery 时间选择器，当前 NOW 按钮设置系统时间，但我想在 NOW 按钮上设置当前服务器时间。

我的站点服务器在美国运行，所以我想为我的所有时间选择器设置 CST 时区。

现在代码看起来像下面的行，

```
$('.time').timepicker({showSecond: true,timeFormat: 'hh:mm:ss',defaultTimezone:'-0600',showTimezone:false}); 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:16:39.490

从[这里](https://github.com/trentrichardson/jQuery-Timepicker-Addon/pull/475)的讨论中我了解到，如果您将其设置`defaultTimezone`为您的服务器所拥有的并离开，`showTimezone: false`那么您将实现您的要求。

我没有测试过这个

# java - Android活动状态，无法获取保存的信息

> ID：14769769
> 
> 赞同：0
> 
> 时间：2013-02-08T09:49:15.630
> 
> 标签：java, android, android-emulator

关于这个主题还有很多其他问题，但我一直无法弄清楚这个问题。

在 Android 文档（[http://developer.android.com/training/basics/activity-lifecycle/recreating.html](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)）中它说：

> 默认情况下，系统使用 Bundle 实例状态来保存有关您的活动布局中每个 View 对象的信息（例如输入到 EditText 对象中的文本值）。因此，如果您的活动实例被销毁并重新创建，则布局的状态将恢复到之前的状态，而您不需要任何代码。

因此，我通过简单地创建一个包含 EditText 视图的视图在模拟器中对此进行了测试。然后我在其中输入信息并按主页按钮。当我重新打开应用程序时，信息消失了。这不应该自动保留还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:27:14.190

好吧，您部分错误，部分正确。你错了，因为灰色的引用是脱离上下文的。我将通过从您提供的链接中正确引用来简要解释一下：

> 当您的 Activity 因用户按下 Back 或 Activity 自行结束而被销毁时，系统对该 Activity 实例的概念将永远消失，因为该行为表明不再需要该 Activity。但是，如果系统由于系统限制（而不是正常的应用程序行为）而破坏了 Activity，那么尽管实际的 Activity 实例已经消失，但系统会记住它的存在，因此如果用户导航回它，系统会创建一个新的使用一组保存的数据来描述活动被销毁时的状态的活动实例。

现在，在那段之后，我们有一个澄清：

> **注意：**每次用户旋转屏幕时，您的活动都会被销毁并重新创建。当屏幕改变方向时，系统会销毁并重新创建前台 Activity，因为屏幕配置已更改并且您的 Activity 可能需要加载替代资源（例如布局）。

另一个，下面几行是：

> 要保存有关活动状态的其他数据，您必须重写 onSaveInstanceState() 回调方法。当用户离开您的活动时，系统会调用此方法，并将 Bundle 对象传递给它，该对象将在您的活动被意外销毁时保存。如果系统必须稍后重新创建活动实例，它会将相同的 Bundle 对象传递给 onRestoreInstanceState() 和 onCreate() 方法。

当应用程序意外崩溃或启用屏幕旋转（仅举几例）时使用此 Bundle（Bundle savedInstanceState），这也会破坏（然后重新创建）您的前景。

您还可以查看以下“保存您的活动状态”部分，但我会[在此处](http://developer.android.com/guide/topics/data/data-storage.html)向您推荐此链接。

# ipad - iPad2 上的 Flash App（由 Air 编译）和 iPad2 Flash 浏览器上运行的 Flash 之间的性能速度有何不同？

> ID：14769772
> 
> 赞同：0
> 
> 时间：2013-02-08T09:49:21.567
> 
> 标签：ipad, flash, air, adobe

我正计划开发 iPad 游戏，但目前我还没有 Mac 或苹果开发许可证，我想在购买之前做一些性能检查。

我的 iPad2 有一个名为 puffin 的 Web 浏览器应用程序，它可以在 Internet 上运行 Flash。我想知道如果你使用 Adob​​e Air 制作 Flash iPad 应用程序，它会像在海雀上运行的 Web Flash 版本一样快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:56:46.097

我想 Flash through puffin 的性能不如 Adob​​e Air 制作的。

Puffin 能够在 iOS 上实现 Flash，方法是在其服务器上远程运行 Flash 代码，然后将结果发送回设备。这涉及大量的空中传输时间，并可能导致相当多的延迟。

Adobe Air 是在设备上运行的本机代码；这基本上是在本地运行 Flash 代码的最佳选择。两者都由 Adob​​e 原生支持，这意味着它也是您将获得的最佳支持。

使用 Adob​​e Air 意味着您可以接触到更广泛的受众，您的游戏可以在 App Store 上供所有人查看。如果您只通过 puffin 提供它，那么您将受众限制为 puffin 应用程序的所有者（我以前从未听说过 puffin，我想很多人都没有听说过），以及知道您游戏 URL 的人。应用商店中的许多应用程序已经使用 Adob​​e Air 制作，并且它们没有性能问题。

# git - 将 git 分支显示为网站

> ID：14769774
> 
> 赞同：3
> 
> 时间：2013-02-08T09:49:25.310
> 
> 标签：git

我是一家半大公司的实习生，我们开始使用 git。目前一切都已设置好，只有一件事丢失了，那就是一种以客户友好的方式跟踪项目进度的方法。

理想情况下，我们希望网站以当前状态显示 git repo。所以让我们说`dev.website.com`显示主分支，`login.dev.website.com`显示分支“登录”等等。

所以这个想法不是查看 git 本身，而是查看特定分支状态的实际网站。这是一种检查非开发人员的开发进展情况的方法，以便他们可以实际*看到*更改。此外，如果可能的话，一个独立的解决方案，所以不是一个完整的托管服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:31:05.550

也许你可以试试[`git instaweb`](http://kernel.org/pub/software/scm/git/docs/git-instaweb.html)

```
NAME
       git-instaweb - Instantly browse your working repository in gitweb

DESCRIPTION
       A simple script to set up gitweb and a web server for browsing the
       local repository. 
```

[**例子**](http://gitready.com/intermediate/2009/01/13/visualizing-your-repo.html)

```
git instaweb --httpd webrick 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:11:51.303

所以，感谢您的建议，但我得到了它的工作。我们使用 Beanstalk 作为存储库主机，猜猜看，它内置了部署！哈哈 连这个都没看出来。

不过感谢您的努力，感谢它。

# java - 比较两个 XML

> ID：14769776
> 
> 赞同：0
> 
> 时间：2013-02-08T09:49:26.333
> 
> 标签：java, xml, xml-parsing, comparison, xmlunit

我的 Java EE 应用程序中有一个案例，比如我需要比较两个自动生成的大型 XML。我只需要检查两个 XML 是否相等（标签和值）。

我尝试使用`XMLUnit`，但`false`即使标签之间有空格，它也会返回（这些 XML 是自动生成的！）。有什么有效的方法可以做到这一点或写下我们自己的逻辑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:32:56.753

我会建议StAX。最好处理大文件。这可能是这样的

```
private boolean compare(XMLEventReader xr1, XMLEventReader xr2) throws XMLStreamException {
    for (;;) {
        XMLEvent e1 = nextTag(xr1);
        XMLEvent e2 = nextTag(xr2);
        if (e1 == null || e2 == null) {
            return e1 == e2;
        }
        if (!equals(e1, e2)) {
            return false;
        }
    }
}

private static XMLEvent nextTag(XMLEventReader xr) throws XMLStreamException {
    while (xr.hasNext()) {
        XMLEvent e = xr.nextEvent();
        if (e.getEventType() == XMLStreamConstants.START_ELEMENT) {
            return e;
        }
    }
    return null;
}

private boolean equals(XMLEvent e1, XMLEvent e2) {
    // compare attributes and content
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:58:54.083

使用 jaxb 通过解析将 xml 转换为 POJO

在上面的 POJO 中实现 object.equals()

然后使用 Comparator 比较解析的对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:11:47.760

您可以使用带有内置差异工具的编辑器。我使用 netbeans 编辑器来比较文件。我发现它又快又容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-01T15:05:47.750

您可以尝试：

XMLUnit.setIgnoreWhitespace(Boolean.TRUE);

XMLUnit.setNormalizeWhitespace(Boolean.TRUE);

现在应该可以了。

# java - 按下 JButton 后如何清除 JTable 内容？

> ID：14769778
> 
> 赞同：0
> 
> 时间：2013-02-08T09:49:29.710
> 
> 标签：java, swing, jtable

在我的程序中有一个 JTable 和 2 个名为“保存”和“刷新”的按钮。我的计划概述：

让，手动我在 JTable 中输入了 10 行。然后我通过单击“保存”按钮将这些数据更新到数据库中。

现在我的观点是：

单击“刷新”按钮时，应清除 JTable 的所有行以供下次输入。

```
dataModel = new AbstractTableModel() {
        private String[] columnNames = {"Sl No","Material Code", "Material         Name", "Quntity", "Unit", "Unit/Price","Total Price", "Status" };//new String[9];
        private Object[][] data = new Object[100][9];

          public int getColumnCount() { return columnNames.length; }
          public int getRowCount() { return data.length;}
          public String getColumnName(int col) {
            // TODO Auto-generated method stub
            return columnNames[col];
        }
          public Object getValueAt(int row, int col) {
            // TODO Auto-generated method stub
            return data[row][col];
        }

        @Override
        public void setValueAt(Object aValue, int row, int col) {
            // TODO Auto-generated method stub
            data[row][col] = aValue;
            fireTableCellUpdated(row, col);
        }

        public boolean isCellEditable(int rowIndex, int columnIndex) {
            // TODO Auto-generated method stub
            return true;
        }
        public Class getColumnClass(int col) {
            if((col == 3) || (col == 5) || (col == 6))
                return Double.class;
            //return getValueAt(0, c).getClass();
            return String.class;
        }
      }; 
```

使用抽象数据模型创建表。

```
 table = new JTable(dataModel);
    JTableHeader header = table.getTableHeader();
    header.setBackground(Color.yellow);
    JScrollPane pane = new JScrollPane(table);
    pane.setPreferredSize(new Dimension(800, 350));
    table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF); 
```

将此面板添加到 ContentPane。

```
 panel.add(pane);
    panel.setBounds(100, 100, 800, 360);
    c.add(panel); 
```

框架有一个按钮“刷新”。`actionPerformed(ActionEvent e) {}` 我手动将数据输入到 JTable 中。然后我通过单击“保存”按钮将这些数据更新到数据库中。

现在我的观点是：

单击“刷新”按钮时，应清除表格的所有单元格。

我已经实现`TableModeListner`如下。

```
public void tableChanged(TableModelEvent e) {
// TODO Auto-generated method stub
int row = e.getFirstRow();
int column = e.getColumn(); 
```

row_sl 初始化为 0。

```
 if(row_sl >= row){
 if(column == 1){
 String dat = (String) dataModel.getValueAt(row, column);
dataModel.removeTableModelListener(this); 
```

//它获取数据库并重新分配材料名称和单位。然后将其设置为相应的列。

```
 mat.getmaterial_name(dat); 
       dataModel.setValueAt(mat.materialname, row, column+1);
dataModel.setValueAt(mat.unit, row, column+3);
//dataModel.setValueAt(dat, 1, 2);
dataModel.addTableModelListener(this);
}
if((column == 5) && (Double)dataModel.getValueAt(row, 3) != null){
    dataModel.removeTableModelListener(this);
    Double d = (Double) dataModel.getValueAt(row, 3);
    d = d * (Double)dataModel.getValueAt(row, column);
    dataModel.setValueAt(d, row, 6);
    dataModel.addTableModelListener(this);
}
if(row == row_sl && column == 7)
    row_sl ++;
}
else
    new error_frame("Complete the row no:"+row_sl);

  public void actionPerformed(ActionEvent e) {
  if(e.getSource() == Refresh){
     dataModel.removeTableModelListener(this);
        for (int i=0;i<=count;i++){
            for(int j=0;j<=7;j++){
                    dataModel.setValueAt(null, i, j);
            }
        }
        dataModel.addTableModelListener(this);
 }
} 
```

单击“刷新”按钮时，`dataModel.setValueAt(null, i, j);`正在调用该方法。此方法触发`TableModeListner`事件`public void tableChanged(TableModelEvent e)`。

于是问题就来了。我的要求是：

单击“刷新按钮时，应清除所有表格单元格，而不会影响我在此方法下的代码`public void tableChanged(TableModelEvent e){`

请在这方面给我建议。当单击“刷新”按钮时，我有另一个选项，它将通过处理最后一个来调用框架本身。这是一个好习惯吗？建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:28:06.933

[正如这里](https://stackoverflow.com/a/13880668/230513)所讨论的，删除需要更新模型的内部数据结构。一种权宜之计是简单地为一些行和列创建数组：

```
data = new Double[rows][cols];
fireTableDataChanged(); 
```

还要考虑`Arrays.fill()`替换默认值，`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:24:33.150

```
public static void removeAllDataFromJTable(JTable table) {
    f=flase;
    int numberOfRows = table.getRowCount();
    int numberOfColumns = table.getColumnCount();
    int rowCounter = 0;
    int columnCounter = 0;
    //we will travel to every row and clean it
    for (rowCounter = 0; rowCounter < numberOfRows; rowCounter++) {
        for (columnCounter = 0; columnCounter < numberOfColumns; columnCounter++) {
            table.setValueAt(null, rowCounter, columnCounter);
        }
    }
}

static boolean f = true;

 public void tableChanged(TableModelEvent e) {

 if(f){------}
 }

  public void methode(){
removeAllDataFromJTable(table);
f=true;
  } 
```

# ios6 - 如何在 iOS 中在后台运行广播流

> ID：14769781
> 
> 赞同：0
> 
> 时间：2013-02-08T09:49:34.200
> 
> 标签：ios6, multitasking, http-live-streaming

我在 iOS 中创建了一个广播应用程序。现在我想让它在后台运行。我提到的[这个。](https://stackoverflow.com/questions/5473870/iphone-keep-radio-running-in-background)我想知道这个“应用程序播放音频”是什么。我在 plist 中给出了相同的内容。但它不会连续播放。我在设备上进行测试。请帮帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:59:04.403

希望这可以帮助你。您可以在此链接中找到答案

[http://iphonedevsdk.com/forum/iphone-sdk-development/54158-playing-a-radio-stream-in-the-background-ios-4.html](http://iphonedevsdk.com/forum/iphone-sdk-development/54158-playing-a-radio-stream-in-the-background-ios-4.html)

# arrays - 如何根据键的值对 TCL 数组进行排序？

> ID：14769783
> 
> 赞同：4
> 
> 时间：2013-02-08T09:49:41.987
> 
> 标签：arrays, sorting, tcl

`INITIAL_ARRAY`是_

```
Key -> Value
B      8
C     10
A      5
E      3
D      1 
```

要获得基于键的排序数组，我使用

```
set sorted_keys_array [lsort [array names INITIAL_ARRAY]] 
```

得到输出

```
Key -> Value
A     5
B     8
C     10
D     1
E     3 
```

**同样，如何根据键的值**获取排序的 tcl 数组，如下面的输出？

```
Key -> Value
 C     10
 B     8 
 A     5
 E     3
 D     1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T10:24:41.597

从 Tcl 8.6 开始，你可以做

```
lsort -stride 2 -integer [array get a] 
```

这将生成按值排序的键/值对的*平面列表。*

在`lsort`获得该`-stride`选项之前，您必须求助于从平面列表`array get`返回中构建列表列表，然后使用以下`-index`选项对其进行排序`lsort`：

```
set x [list]
foreach {k v} [array get a] {
    lappend x [list $k $v]
}
lsort -integer -index 1 $x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-16T09:42:46.123

当我有一个数组时，以前的方法对我不起作用：

```
[array get a] == D 1 E 3 A 5 B 8 C 10 
```

我执行以下操作并收到错误：

```
lsort -stride 2 -integer [array get a] 
```

> 预期整数，但得到“D”

您还需要添加一个索引：

```
lsort -integer -stride 2 -index 1 [array get a] 
```

> D 1 C 10 E 3 A 5 B 8

然后你可以改变方向：

```
lsort -decreasing -integer -stride 2 -index 1 [array get a] 
```

> C 10 B 8 A 5 E 3 D 1

然后给出正确答案

# c++ - 没有参数的函数的模板特化

> ID：14769785
> 
> 赞同：20
> 
> 时间：2013-02-08T09:49:43.367
> 
> 标签：c++, templates, specialization

我需要在 c++ 中专门化一个函数模板。

```
template<typename T>  
void doStuff<T>() {} 
```

至

```
template<>
void doStuff<DefinedClass>(); 
```

和

```
template<>
void doStuff<DefinedClass2>(); 
```

我猜这不是正确的语法（因为它没有编译）。我该怎么做？
另外，由于我没有未定义的模板参数`doStuff<DefinedClass>`，是否可以在 .cpp 中声明正文？

注意：doStuff 将在其主体中使用 T 来声明一个变量。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-08T09:51:16.443

主模板没有获得第二对模板参数。只是这个：

```
template <typename T> void doStuff() {}
//                        ^^^^^^^^^ 
```

只有专业的名称`template <>`前面有a，后面有a `<...>`，例如：

```
template <> void doStuff<int>() { } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T10:01:34.020

主模板的正确语法是：

```
template <typename T>
void doStuff() {} 
```

要定义专业，请执行以下操作：

```
template <>
void doStuff<DefinedClass>() { /* function body here */ } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T10:02:37.153

> 我猜这不是正确的语法（因为它没有编译）。我该怎么做？doStuff 将在其主体中使用 T 来声明一个变量。

```
template<typename T>  
void doStuff() 
{
  T t = T();   // declare a T type variable

} 
```

> 是否可以在.cpp 中声明主体？

C++ 只支持`inclusive mode`，不能单独编译后再链接。

从评论中，如果您想专注于`int`类型：

```
template<>
void doStuff<int>()
{
} 
```

# r - R - 预测自定义聚类

> ID：14769786
> 
> 赞同：2
> 
> 时间：2013-02-08T09:49:44.513
> 
> 标签：r, cluster-analysis

我已经实现了自己的聚类算法，我需要知道的是如何使我的聚类可以通过默认方法“predict”用于预测测试集实例的聚类归属。我有训练集，我根据它们制作集群，我得到一个代表集群中心的新对象，并且对于训练集的每个实例，他的集群；现在我想使用“预测”将测试集的每个实例分配给他自己的集群

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:03:39.043

基本思路是：

```
# clustering function
myclust <- function(x){
  ret <- list(x=x)
  class(ret) <- "mycluster" # your class name
  ret
}

# predict function for your class
predict.mycluster <- function(obj){
  result <- obj$x
  return(result)
}

# clustering
y <- myclust(1:4)
class(y)
# [1] "mycluster"
predict(y)
# [1] 1 2 3 4 
```

# ruby-on-rails - RSpec：检查是否已保存任何模型

> ID：14769787
> 
> 赞同：2
> 
> 时间：2013-02-08T09:49:48.047
> 
> 标签：ruby-on-rails, database, rspec, mocking

在我的 Rails 应用程序中，我创建了一个基于 JSON 数据创建模型层次结构的方法。我想确保该方法不会将任何内容保存到数据库中。我知道我可以编写如下测试：

```
expect {
  Importer.import(json)
}.not_to change(Model1, :count)
expect {
  Importer.import(json)
}.not_to change(Model2, :count)
# etc. 
```

但我想以更通用的方式来做。RSpec 中是否有一种方法可以检查在测试期间是否保存了任何模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:16:22.543

你这样做的方式并不算太糟糕，尽管它有点冗长。你可以使用`have`匹配器。

```
Importer.import(json)
collection1 = Model.all
collection1.should have(5).items

...

collection2.should_not have(5).items

# etc.... 
```

但是，对于您的上下文，像原始测试一样阅读它更有意义（除了创建真正有意义的自定义匹配器之外）。您测试“进口商”应该做什么或不做什么。

[have(n).items 匹配器](https://www.relishapp.com/rspec/rspec-expectations/v/2-0/docs/matchers/have-n-items-matcher)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-18T04:05:32.673

如果“import”方法可以返回一个模型对象，你可以这样写期望：

```
imported_obj = Importer.import(json)
expect(imported_obj).not_to be_persisted 
```

" **be_persisted** " 是一个[谓词匹配器](https://relishapp.com/rspec/rspec-expectations/v/3-6/docs/built-in-matchers/predicate-matchers)，它只是简单地调用**持久化？** import_obj 上的方法。该方法“持续存在？” 是 Rails 的方法，如果 import_obj 已保存，则返回 true。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T10:10:47.983

不确定 Rspec 是否可以帮助您，但是快速手动访问数据库可能会完成这项工作？

```
[Model1, Model2].each do |model|
  model.where('updated_at > ?', Time.now - 2.seconds).count.should eq 0
end 
```

# ms-access - 根据表单中组合框中的值创建报告

> ID：14769789
> 
> 赞同：0
> 
> 时间：2013-02-08T09:50:05.780
> 
> 标签：ms-access, vba

我需要帮助来解决表格和报告的问题。我需要创建一个带有组合框的表单，该组合框选择带有按钮的公司，以从组合框中查看带有所选公司的一些值的报告。我怎样才能做到这一点？我创建了组合框，当我按下预览按钮时，它会显示所有公司。有什么建议么？

这是我的 VBA 代码：

```
Option Compare Database

Private Sub Button_Click()
    'Forms!FormFirmKarnet.Visible = False
    DoCmd.OpenReport "FirmKarnet", acViewPreview
End Sub

Private Sub Close_Click()
    DoCmd.Close acForm, "FormFirmKarnet"
End Sub

Private Sub id_AfterUpdate()
    Forms!FormFirmKarnet!Code_company = Forms!FormFirmKarnet!id.Column(1)
End Sub

Private Sub id_LostFocus()
    Forms!FormFirmKarnet!code_company = Forms!FormFirmKarnet!id.Column(1)
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:35:43.003

`where`在这种情况下，您可以使用过滤器 打开报告：

```
DoCmd.OpenReport "reportname", acViewPreview, , "Company_ID = " & Me.comboBoxName 
```

这假定您的组合框有一个 ID 字段作为绑定列，并且该字段`Company_ID`在报表的查询中被调用。ComboBox 不再需要任何代码，您可能只需要在打开报表之前检查是否选择了任何内容。

# ldap - ldap搜索过滤查询提取用户组信息

> ID：14769790
> 
> 赞同：0
> 
> 时间：2013-02-08T09:50:08.267
> 
> 标签：ldap, ldap-query

目前在我的部署中，我只想提取用户组信息作为搜索查询的一部分。到目前为止，我正在进行顶级搜索，这会导致从 LDAP 服务器下载完整的 LDAP 用户配置文件信息。这是一种开销。那么是否可以在搜索查询中包含一个搜索过滤器，它可以只给我直接的用户组成员身份，而不是完整的用户配置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:21:52.620

组上的“成员”属性将提供该组所有成员的 DN。

如果您正在查看用户与组，则没有标准可以查看用户的组关系。（AD 和 eDirectory）在某种程度上支持这一点。

LDAP 中的嵌套组可能会导致更多工作来查找用户组关系。

# java - 整数分解

> ID：14769792
> 
> 赞同：2
> 
> 时间：2013-02-08T09:50:14.340
> 
> 标签：java

谁能向我解释为什么下面的算法是一个无错误的整数分解方法，它总是返回一个非平凡的 N 因子。我知道这听起来很奇怪，但我在 2 年前设计了这个方法，但仍然不明白它背后的数学逻辑，这让我很难改进它。它非常简单，只涉及加法和减法。

```
public static long factorX( long N )
{
    long x=0, y=0;
    long b = (long)(Math.sqrt(N));
    long a = b*(b+1)-N;
    if( a==b ) return a;

    while ( a!= 0 )
    {
        a-= ( 2+2*x++ - y);
        if( a<0 ) { a+= (x+b+1); y++; }
    }

return ( x+b+1 );
} 
```

看来上述方法实际上是通过对丢番图方程的迭代找到了解：

```
f(x,y) = a - x(x+1) + (x+b+1)y
where b = floor( sqrt(N) ) and a = b(b+1) - N
that is, when a = 0, f(x,y) = 0 and (x+b+1) is a factor of N.

Example: N = 8509  
b = 92, a = 47  
f(34,9) = 47 - 34(34+1) + 9(34+92+1) = 0  
and so x+b+1 = 127 is a factor of N. 
```

重写方法：

```
public static long factorX(long N)
{
long x=1, y=0, f=1;
long b = (long)(Math.sqrt(N));
long a = b*(b+1)-N;
if( a==b ) return a;

  while( f != 0 )
  {
    f = a - x*(x+1) + (x+b+1)*y;
      if( f < 0 ) y++;
    x++;
  }

return x+b+1;
} 
```

我非常感谢有关如何改进此方法的任何建议。

这是 10 个 18 位随机半素数的列表：

```
349752871155505651 = 666524689 x 524741059   in 322 ms
259160452058194903 = 598230151 x 433211953   in 404 ms
339850094323758691 = 764567807 x 444499613   in 1037 ms
244246972999490723 = 606170657 x 402934339   in 560 ms
285622950750261931 = 576888113 x 495109787   in 174 ms
191975635567268981 = 463688299 x 414018719   in 101 ms
207216185150553571 = 628978741 x 329448631   in 1029 ms
224869951114090657 = 675730721 x 332780417   in 1165 ms
315886983148626037 = 590221057 x 535201141   in 110 ms
810807767237895131 = 957028363 x 847213937   in 226 ms
469066333624309021 = 863917189 x 542952889   in 914 ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:39:35.820

好的，我用 Matlab 看看这里发生了什么。这是 N=100000 的结果： ![在此处输入图像描述](../Images/87130db3b11fb04f8567eef44e3f7467.png) 您`x`在每次迭代中都在增加，变量的有趣模式`a`与余数密切相关`N % x+b+1`（正如您在图中的灰线中看到的那样`a + (N % (x+b+1)) - x = floor(sqrt(N))`）。因此，**我认为**您只是找到了比`sqrt(N)`简单迭代更大的第一个因素，但是有一个相当模糊的标准来确定它确实是一个因素：D（对不起，半答案......我必须离开，我可能会稍后继续）。

这是 matlab 代码，以防万一您希望它自己测试：

```
clear all
close all

N = int64(100000);

histx = [];
histDiffA = [];
histy = [];
hista = [];
histMod = [];
histb = [];

x=int64(0);
y=int64(0);
b = int64(floor(sqrt(double(N))));
a = int64(b*(b+1)-N);
if( a==b ) 
    factor = a;
else
    while ( a ~= 0 )
        a = a - ( 2+2*x - y);
        histDiffA(end+1) = ( 2+2*x - y);
        x = x+1;
        if( a<0 ) 
            a = a + (x+b+1); 
            y = y+1;
        end
        hista(end+1) = a;
        histb(end+1) = b;
        histx(end+1) = x;
        histy(end+1) = y;
        histMod(end+1) = mod(N,(x+b+1));
    end
    factor = x+b+1;
end

figure('Name', 'Values');
hold on
    plot(hista,'-or')
    plot(hista+histMod-histx,'--*', 'Color', [0.7 0.7 0.7])
    plot(histb,'-ob')
    plot(histx,'-*g')
    plot(histy,'-*y')
    legend({'a', 'a+mod(N,x+b+1)-x', 'b', 'x', 'y'}); % 'Input',
hold off

fprintf( 'factor is %d \n', factor ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:33:44.870

您的方法是 (na)*(n+b) 的试乘法的变体，其中 n=floor(sqrt(N)) 和 b==1。

然后该算法迭代 a-- / b++ 直到 (na)*(n+b) - N == 0 的差值。

部分差异（关于 a 和 b）分别与 2b 和 2a 成比例。因此，不需要真正的乘法。

复杂度是 |a| 的线性函数 或 |b| -- N 越“方形”，方法收敛得越快。总之，有更快的方法，最容易理解的方法之一是二次残差筛。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-15T00:10:57.970

请原谅我的 c#，我不懂 Java。将 x 和 y 步进 2 可提高算法速度。

```
using System.Numerics;                      // needed for BigInteger
    /* Methods ************************************************************/
    private static BigInteger sfactor(BigInteger k) // factor odd integers
    {
        BigInteger x, y;
        int flag;
        x = y = iSqrt(k);                   // Integer Square Root
        if (x % 2 == 0) { x -= 1; y += 1; } // if even make x & y odd
        do
        { 
            flag = BigInteger.Compare((x*y), k);
            if (flag > 0) x -= 2;
            y += 2;
        } while(flag != 0);
        return x;                           // return x
    } // end of sfactor()

    // Finds the integer square root of a positive number
    private static BigInteger iSqrt(BigInteger num)
    {
        if (0 == num) { return 0; }           // Avoid zero divide
        BigInteger n = (num / 2) + 1;         // Initial estimate, never low
        BigInteger n1 = (n + (num / n)) >> 1; // right shift to divide by 2
        while (n1 < n)
        {
            n = n1;
            n1 = (n + (num / n)) >> 1;        // right shift to divide by 2
        }
        return n;
    } // end iSqrt()
```

# c# - C# 类是否继承构造函数？

> ID：14769794
> 
> 赞同：10
> 
> 时间：2013-02-08T09:50:21.380
> 
> 标签：c#

我刚读了[http://blog.gurock.com/articles/creating-custom-exceptions-in-dotnet/](http://blog.gurock.com/articles/creating-custom-exceptions-in-dotnet/)

不知道什么时候写的。它说：

“不幸的是，由于 C# 没有继承基类的构造函数，因此这种新类型只有标准构造函数，没有参数，因此相对无用。”

这在 2010 年也是如此：[C#：继承构造函数](https://stackoverflow.com/questions/3873343/c-inheriting-constructors)

这仍然是真的吗？

编辑：继答案之后，我确信有一种方法可以绕过默认的无参数构造函数。缺少构造函数继承还有其他原因吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T09:52:07.037

在 C# 语言的整个生命周期中，构造函数从未被继承。这在 C# 5.0 中没有改变：在 C# 5.0 规范第 1.6.7.1 节的末尾，它仍然说：

> 与其他成员不同，实例构造函数不是继承的，并且一个类除了在类中实际声明的实例构造函数之外没有实例构造函数。如果没有为类提供实例构造函数，则自动提供一个没有参数的空实例构造函数。

所以它今天仍然适用，我想在可预见的未来也会如此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T09:52:17.030

您必须显式调用基类的构造函数，除非基类定义了默认构造函数。所以是的，它们不是遗传的。

这有时会导致一堆样板代码，除了将参数从一个构造函数传递给另一个构造函数之外，您什么都不做

```
public class NegativArgument : Exception {
     public NegativeArgument() : this("The number given was less than zero"){}
     public NegativeArgument(string message) : this(message,null){}
     public NegativeArgument(string message, Exception inner) : base:(message,inner){}
} 
```

但是如果你有一个应该总是有相同消息的异常类型呢？如果构造函数被继承，你将如何解决这个问题？异常类有一个接受消息的构造函数，因此在这种情况下，创建一个新的异常类型也会获得该构造函数，而不是继承构造函数会很容易

```
public class NegativArgument : Exception {
     public NegativeArgument() : base("The number given was less than zero"){}
} 
```

如果基类没有默认构造函数，如果您没有显式调用基类构造函数，则会出现编译错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T09:58:20.510

C# 中不继承构造函数。

如果是这样，那么*每个*类都会有一个默认的无参数构造函数（因为所有类都派生自 Object 并且 Object 有一个默认的无参数构造函数）。

许多类只能用特定的值来构造；如果每个类都有一个默认的无参数构造函数，这将是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T09:53:39.863

您应该将它们显式称为基类的构造函数。它们是不可*继承*的。

没有改变他们的任何事情。

查看 ：[`Constructors (C# Programming Guide)`](http://msdn.microsoft.com/en-us/library/vstudio/ace5hbzh.aspx)

从规范§1.6.7.1：

> 与其他成员不同，实例构造函数不是继承的，并且一个类除了在类中实际声明的实例构造函数之外没有实例构造函数。如果没有为类提供实例构造函数，则自动提供一个没有参数的空实例构造函数。

[http://msdn.microsoft.com/en-us/library/ms228593.aspx](http://msdn.microsoft.com/en-us/library/ms228593.aspx)

# sql - SQL Server - 数据库对象的结帐系统？

> ID：14769798
> 
> 赞同：0
> 
> 时间：2013-02-08T09:50:29.660
> 
> 标签：sql, sql-server

我想知道是否有人知道 SQL Server 2008 中的任何 3rd 方工具或现有功能，因此当有人在处理表或过程时，它被锁定给那个人。我已经广泛搜索了网络，似乎找不到与此相关的任何内容。我们面临一个问题，即两个人可能正在处理相同的存储过程，而最后执行的人获得了代码更改！这种功能会派上用场。我认为锁定或签入/签出系统将使项目受益，有什么想法吗？

我已经连接到不提供此功能的 Redgate 源代码控制。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:01:08.907

你可以试试这个： http: [//www.apexsql.com/sql_tools_version.aspx](http://www.apexsql.com/sql_tools_version.aspx)

或者，试试这个：[http ://www.red-gate.com/products/sql-development/sql-source-control/entrypage/5-minutes?utm_source=google&utm_medium=cpc&utm_content=unmet_need&utm_campaign=sqlsourcecontrol&gclid=CK_qsPC5prUCFe7MtAodzC8ACA](http://www.red-gate.com/products/sql-development/sql-source-control/entrypage/5-minutes?utm_source=google&utm_medium=cpc&utm_content=unmet_need&utm_campaign=sqlsourcecontrol&gclid=CK_qsPC5prUCFe7MtAodzC8ACA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:57:41.813

尝试看看这个 SO 讨论：[如何在 SVN 中对我的 SQL Server 数据库进行版本控制](https://stackoverflow.com/questions/173/how-do-i-version-my-sql-server-database-in-svn)？

它可能不会像你想要的那样锁定东西，但它有助于确保代码是可恢复的。您还可以考虑使用[DDL 触发器](http://msdn.microsoft.com/en-us/library/ms186406%28v=sql.105%29.aspx)作为某种检查机制。

# oracle - vb6/ODBC：浏览记录集时崩溃

> ID：14769802
> 
> 赞同：0
> 
> 时间：2013-02-08T09:50:35.777
> 
> 标签：oracle, vb6, odbc, oledb

我正在维护一个具有内置查询功能的旧 VB6 应用程序。该功能通常效果很好，但当用户输入特定查询时它会崩溃。对于给定的查询，崩溃在 100% 的时间内是可重现的，并且发生在代码中的相同位置。

在线上

```
toto = rcs.Fields(i) 
```

, VB6 从 OLE-DB 捕获一个阻塞错误：“Multiple-step OLE DB operation generated errors”（执行错误 -214721778 (80040e21)

“我”没有越界。其他列也出现同样的问题。在崩溃时中断时，rcs.Fields(i + 1).Value 为 Null，rcs.Fields(i + 2).Value 会引发相同的错误，并且 rcs.Fields(i + 3).Value 有非 Null 和有效值。它似乎与返回的结果数量无关，因为我已经在其他表上测试过 select 语句并且它们不会崩溃。该错误似乎与某些列有关，因为从选择中删除一些（但只有特定列，日期类型）可以防止应用程序崩溃。它与列的总数没有直接关系（因为事情似乎与大量的列一起工作，我已经测试过了）。

连接打开如下：

```
conn.ConnectionString = "uid=uidValue;pwd=pwdValue;DRIVER={Microsoft ODBC for Oracle};server=serverValue"
conn.ConnectionTimeout = 30 
```

我已经上传了两个 ODBC 日志，一个包含崩溃前的内容 ( [http://pastebin.com/PH1nQ2VC](http://pastebin.com/PH1nQ2VC) )，另一个 ( [http://pastebin.com/AJqsYviQ](http://pastebin.com/AJqsYviQ) ) 在我的连接打开之后。打开连接时会出现一些可疑消息，但实际上很难判断它们是否与错误有关。

* * *

询问：

```
SELECT
 table_.someDateField -- type DATE
FROM
 table_actual_name table_
WHERE
 table_.someStringField LIKE '%5582%' -- type VARCHAR2 (10)

-- notes
--  someDateField can be NULL
--  someStringField can be NULL too (although that would make no sense and the actual database has 1 line with a NULL) 
```

# sql - SQL 查询中的不同关键字用法

> ID：14769804
> 
> 赞同：1
> 
> 时间：2013-02-08T09:50:43.763
> 
> 标签：sql, database

我有一张桌子叫作稿

```
BOOKID  AUTHORID BOOKNAME       GENRE   NOOFCOPIES  AMOUNT
B105    A102     Diagnosis      Journal 500         10000
B102    A102     The Essence... Fiction 110         11000
B106    A102     Clinical Sci.  Educat. 125         18750
B104    A103     Mind Games     Fiction 200         20000
B100    A102     Sublime        Fiction 100         10000
B101    A105     C Programming  Educati 125         18750
B103    A101     Scribe         Journal 500         10000
B107    A101     Clinical Chem. Educat. 125         54646
B108    A103     Clinical Chem. Educat. 125         54646 
```

如何获取已支付最高金额的 AuthorId？如果我写

```
select distinct a.AuthorId,m.amount 
from Author a,manuscripts m 
where m.amount in (select max(amount) 
                   from manuscripts m 
                   where a.AuthorId=m.AuthorId) 
```

然后我能够得到正确的输出，但如果我添加 bookname 那么它不会正确产生..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:53:30.450

因为你没有提到你正在使用的 RDBMS，所以下面的查询几乎可以工作 RDBS，（*不是全部*）

```
SELECT  a.*
FROM    tablename a
        INNER JOIN
        (
            SELECT  AuthorID, MAX(Amount) max_amount
            FROM    tableName
            GROUP   BY AuthorID
        ) b ON  a.AuthorID = b.AuthorID AND
                a.Amount = b.max_amount 
```

为了获得更快的性能，请`INDEX`在`AuthorID, Amount`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:56:39.960

这将显示价格最高的每一行：

```
SELECT m.*
FROM amanuscripts m
WHERE m.amount = (select MAX(amount) FROM manuscripts) 
```

这将显示每个作者的价格最高的每一行：

```
SELECT m.*
FROM manuscripts m
WHERE (m.authorid, m.amount) IN (select authorid, MAX(amount)
                                 FROM manuscripts
                                 GROUP BY authorid) 
```

（鉴于上面表格的结构，无需将 Author 表与 Manuscripts 表连接）

# javascript - 在 IPAD 或 Iphone 的情况下，无法捕捉视频和音频 mediaelement.js 的播放、暂停事件

> ID：14769825
> 
> 赞同：2
> 
> 时间：2013-02-08T09:51:31.977
> 
> 标签：javascript, jquery, html5-video, html5-audio, mediaelement.js

我正在尝试此处建议的方法[避免停止音频或视频](http://css-tricks.com/dont-stop-the-audio/)。

我的意图是检查视频或音频是否正在播放，如果它正在播放我在该页面中的所有链接应该在新选项卡中打开。此外，如果用户暂停视频或音频，那么我必须使该页面中的所有链接在同一页面中打开。

**下面是我的代码**

```
 var media = $('audio,video').mediaelementplayer({ });
 $(media).on("play", function(event) {

        // Links in new tabs
        $("a").attr("target", "_blank");
        $("a").attr("rel", "external");

    }).on("pause", function(event) {

        // Links in new tabs
        $("a").removeAttr("target");
        $("a").removeAttr("rel");
  }); 
```

上面的代码在谷歌 chrome 浏览器的情况下运行得很好，但在最新的 Firefox 的情况下它根本不起作用。

此外，我的主要问题是它无法在非 Apple 设备上运行，例如 Ipad2 、 3 或 1

这是[Mediaelement.js](http://mediaelementjs.com/)还是 safari browser 的错误。

我可以很容易地理解，在 Firefox 或其他苹果设备的情况下，播放或暂停事件不会被正确捕获。

请建议是否有解决此问题的方法。

提前感谢您回复此帖子。

# delphi - 如何防止 firemonkey 表单自己绘制（用于调用自己的绘图函数）？

> ID：14769827
> 
> 赞同：0
> 
> 时间：2013-02-08T09:51:33.800
> 
> 标签：delphi, opengl, firemonkey

我尝试在 C++ Builder XE3 中将现有的 OpenGL 应用程序从基于 VCL 的表单转换为基于 FMX 的表单。

为此，我使用 Firemonkey 窗体的句柄来创建 OpenGL 设备上下文，并使该窗体成为另一个窗体的子窗体，以模仿我在基于 VCL 的应用程序中的窗体内的面板。

现在的问题是，在调整大小事件之后或通常在调用 Invalidate() 之后，表单会以其背景呈现。这会导致闪烁甚至更糟：有时会显示背景而不是我的 OpenGL 渲染场景。

如何防止在我的 Firemonkey-OpenGL-form 位置重绘该区域。或者，我可以定义一个 Ownerdraw 函数或其他东西吗？

请注意，我无法选择使用 Firemonkey-3d-Form。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:07:04.283

是否尝试为表单提供透明背景？然后你可以画任何你想要的“在顶部”。

快速的方法是将表单的透明属性设置为 True，但这会导致组合框出现问题。

另一种方法是在窗体上放置一个 TRectangle。将它的 StyleName 设置为“backgroundstyle”。将其 Fill.Color 设置为 claNull。将 Stroke.Thickness 设置为 0。这将替换表单的默认背景样式。

如果您也想绘制自己的边框，则需要研究非客户区样式，但我目前没有指向好的资源的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:34:31.403

经过数小时的试验，我找到了解决方案：“TCommonCustomForm”具有所需的属性：（1）它不会自行绘制，（2）它有一个可用于 OpenGL 初始化的句柄。

我希望这些信息对其他人有所帮助。

# php - php代码错误，不更新日期表

> ID：14769836
> 
> 赞同：-4
> 
> 时间：2013-02-08T09:52:22.353
> 
> 标签：php, mysql

我有 unsub.php 代码：

```
<?php 
include("config.inc.php");
$id=$_REQUEST['id'];
$time=$_REQUEST['t'];
$cid=0;
if(isset($_REQUEST['cid']))
$cid=$_REQUEST['cid']

if($cid==0)
mysql_query("update email_advt set unsubstatus=1 where id=$id AND time=$time");
else
{
if($mysql->total(email_advt","id=$id AND time=$time")>0)
mysql_query("delete from ea_em_n_cat where eid=$id AND cid=$cid");
}

?><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html>
<head>
<title> Unsubscribe Email</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body>
Your email has been successfully unsubscribed from our mailing list. <br>
</body>
</html> 
```

而这个表：

```
CREATE TABLE IF NOT EXISTS `email_advt` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `email` varchar(250) NOT NULL DEFAULT '',
  `unsubstatus` int(11) NOT NULL DEFAULT '0',
  `time` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `email` (`email`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;

CREATE TABLE IF NOT EXISTS `ea_em_n_cat` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `eid` int(11) NOT NULL DEFAULT '0',
  `cid` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7 ; 
```

访问时 unsub.php?id=1&t=1360306174&cid=0
不显示 您的电子邮件已成功从我们的邮件列表中退订。
怎么了 ？访问 unsub.php?id=1&t=1360306174&cid=0 时 unsubstatus 未设置为 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:00:59.597

我认为你在这里有错误：

`if($mysql->total(email_advt","id=$id AND time=$time")>0)`

尝试

`if($mysql->total("email_advt"," id=$id AND time=$time")>0)`

尽管我不确定您要获得什么或该`total()`方法的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:03:52.013

如果您使用内置函数作为列名，则需要将其括在重音中。即在您的查询中，您使用的列`time`是 MySQL 中的内置函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:55:45.440

使用这个查询，你错过了反引号```

```
mysql_query("update email_advt set `unsubstatus`=1 where `id`=$id AND `time`=$time"); 
```

# file - 如何删除所有空格并在 prolog 文件中发送？

> ID：14769837
> 
> 赞同：0
> 
> 时间：2013-02-08T09:52:27.910
> 
> 标签：file, prolog

我想读取一个文件并删除所有空格并发送（nl）这些并将所有内容放在一个列表中。

例如：从

```
myfile.txt = (First Line (Second ( line ) and Third and other)
To List = [FirstLine(Second(line)andthirdandother)] 
```

如何实现？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:34:27.297

如果你的 Prolog 有适当的内置函数，比如[read_file_to_codes](http://www.swi-prolog.org/pldoc/doc_for?object=read_file_to_codes/3) /3 和[code_type](http://www.swi-prolog.org/pldoc/doc_for?object=code_type/2) /2，你可以这样做

```
file_to_list(File, List) :-
  read_file_to_codes(File, Codes, []),
  exclude(bad_char, Codes, List).

bad_char(C) :-
  code_type(C, space). 
```

# sql - 将 3 行转为一行

> ID：14769838
> 
> 赞同：3
> 
> 时间：2013-02-08T09:52:34.470
> 
> 标签：sql, sql-server-2008

我有一个报价，我想将该报价的最后 3 个注释放在一行中。通过从引号中选择前 3 个，我有一个 QuoteNote 表：

```
QuoteNoteID       QuoteID      Note        NoteAreaID
     1               1         Test            2
     2               1         Test2           1
     3               1         Test3           1 
```

我在这张桌子上有一个选择，它带回了我需要的信息

```
SELECT q.QuoteNoteID, q.QuoteID, q.Note, q.NoteAreaID, n.Description AS NoteAreaDesc
FROM Quote q INNER JOIN QuoteNote n ON n.QuoteID = q.QuoteID 
```

这给了我

```
QuoteNoteID       QuoteID      Note        NoteAreaID        NoteAreaDesc
     1               1         Test            2               Internal
     2               1         Test2           1               External
     3               1         Test3           1               External 
```

现在我想做的就是把它放在一排

```
QuoteID    Note1    Note2    Note3    NoteAreaID1     NoteAreaID2    NoteAreaID3    NoteAreaDesc1    NoteAreaDesc2      NoteAreaDesc3
  1         Test     Test2   Tes3         2                1              1           Internal            External       External 
```

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:28:00.363

这应该适合你：

```
WITH QuoteNotes AS
(   SELECT  QuoteNote.QuoteNoteID, 
            Quote.QuoteID, 
            QuoteNote.Note, 
            QuoteNote.NoteAreaID, 
            [NoteAreaDesc] = QuoteNote.Description,
            [QuoteNoteNumber] = ROW_NUMBER() OVER(PARTITION BY Quote.QuoteID ORDER BY QuoteNote.QuoteNoteID)
    FROM    Quote
            INNER JOIN QuoteNote
                ON QuoteNote.QuoteID = Quote.QuoteID
)
SELECT  QuoteID,
        [Note1] = MAX(CASE WHEN QuoteNoteNumber = 1 THEN Note END),
        [Note2] = MAX(CASE WHEN QuoteNoteNumber = 2 THEN Note END),
        [Note3] = MAX(CASE WHEN QuoteNoteNumber = 3 THEN Note END),
        [NoteAreaID1] = MAX(CASE WHEN QuoteNoteNumber = 1 THEN NoteAreaID END),
        [NoteAreaID2] = MAX(CASE WHEN QuoteNoteNumber = 2 THEN NoteAreaID END),
        [NoteAreaID3] = MAX(CASE WHEN QuoteNoteNumber = 3 THEN NoteAreaID END),
        [NoteAreaDesc1] = MAX(CASE WHEN QuoteNoteNumber = 1 THEN NoteAreaDesc END),
        [NoteAreaDesc2] = MAX(CASE WHEN QuoteNoteNumber = 2 THEN NoteAreaDesc END),
        [NoteAreaDesc3] = MAX(CASE WHEN QuoteNoteNumber = 3 THEN NoteAreaDesc END)
FROM    QuoteNotes
GROUP BY QuoteID; 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/177a7/3)**

或者

```
WITH QuoteNotes AS
(   SELECT  QuoteNote.QuoteNoteID, 
            Quote.QuoteID, 
            QuoteNote.Note, 
            QuoteNote.NoteAreaID, 
            [NoteAreaDesc] = QuoteNote.Description,
            [QuoteNoteNumber] = ROW_NUMBER() OVER(PARTITION BY Quote.QuoteID ORDER BY QuoteNote.QuoteNoteID)
    FROM    Quote
            INNER JOIN QuoteNote
                ON QuoteNote.QuoteID = Quote.QuoteID
)
SELECT  q1.QuoteID,
        [Note1] = q1.Note,
        [Note2] = q2.Note,
        [Note3] = q3.Note,
        [NoteAreaID1] = q1.NoteAreaID,
        [NoteAreaID2] = q2.NoteAreaID,
        [NoteAreaID3] = q3.NoteAreaID,
        [NoteAreaDesc1] = q1.NoteAreaDesc,
        [NoteAreaDesc2] = q2.NoteAreaDesc,
        [NoteAreaDesc3] = q3.NoteAreaDesc
FROM    QuoteNotes q1
        LEFT JOIN QuoteNotes q2
            ON q1.QuoteID = q2.QuoteID
            AND q2.QuoteNoteNumber = 2
        LEFT JOIN QuoteNotes q3
            ON q1.QuoteID = q3.QuoteID
            AND q3.QuoteNoteNumber = 3 -- changed this to be 3
WHERE   q1.QuoteNoteNumber = 1; 
```

两者都应该产生相同的结果，但其中一个可能比另一个执行得更好。

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/177a7/4)**

# c++ - 更快的算法来检查图像中的颜色

> ID：14769841
> 
> 赞同：2
> 
> 时间：2013-02-08T09:52:44.533
> 
> 标签：c++, visual-c++

假设给定一张 2048x2048 的图像，并且我想知道图像中存在的颜色总数，那么最快的算法是什么？我想出了两个算法，但它们很慢。

算法1：

*   比较当前像素和下一个像素，如果它们不同
*   检查包含所有检测到的颜色的临时变量，以查看颜色是否存在
*   如果不存在，则将其添加到数组（列表）并增加 noOfColors。

该算法有效，但速度很慢。对于 1600x1200 像素的图像，大约需要 3 秒。

算法2：将每个像素与所有其他像素检查并记录颜色出现次数并增加计数的明显方法。这非常非常慢，几乎就像一个挂起的应用程序。那么有没有更好的方法呢？我需要所有的像素信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:56:53.780

您可以使用[`std::set`](http://en.cppreference.com/w/cpp/container/set)（或[`std::unordered_set`](http://en.cppreference.com/w/cpp/container/unordered_set)），并简单地通过像素进行一个循环，将颜色添加到集合中。那么颜色的数量就是集合的大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T09:58:36.127

嗯，这适合并行化。将图像分成几个部分，并在单独的任务中为每个部分执行算法。为了避免同步，每个都应该有自己的存储空间来存储独特的颜色。完成所有任务后，您可以汇总结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T12:24:26.850

DRAM非常便宜。使用蛮力。填一个标签，数一数。

在 core2duo @ 3.0GHz 上：

4096x4096 32 位 RGB 为 0.35 秒

一些微不足道的并行化后 0.20 秒（我对 omp 一无所知）

但是，如果您要使用 64 位 rgb（一个通道 = 16 位），那就是另一个问题（内存不足）。您可能需要一个好的哈希表函数。使用随机像素，相同大小需要 10 秒。

备注：在 0.15 秒时，std::bitset<> 解决方案更快（它变得更慢，通常并行化！）。

解决方案，c++11

```
 #include <vector>
#include <random>
#include <iostream>
#include <boost/chrono.hpp>

#define  _16M 256*256*256

typedef union {
    struct { unsigned char r,g,b,n ; } r_g_b_n ;
    unsigned char rgb[4] ;
    unsigned i_rgb;
} RGB ;

RGB make_RGB(unsigned char r, unsigned char g , unsigned char b) {
    RGB res; 
    res.r_g_b_n.r = r; 
    res.r_g_b_n.g = g;
    res.r_g_b_n.b = b;
    res.r_g_b_n.n = 0;
    return res;
}

static_assert(sizeof(RGB)==4,"bad RGB size not 4");
static_assert(sizeof(unsigned)==4,"bad i_RGB size not 4");

struct Image 
{ 
  Image (unsigned M, unsigned N) : M_(M) , N_(N) , v_(M*N) {}
  const RGB* tab() const {return & v_[0] ; }
  RGB* tab() {return & v_[0] ; }
  unsigned M_ , N_;
  std::vector<RGB> v_;
};

void FillRandom(Image & im) {
    std::uniform_int_distribution<unsigned> rnd(0,_16M-1);
    std::mt19937 rng;
    const int N = im.M_ * im.N_;
    RGB* tab = im.tab();
    for (int i=0; i<N; i++) {
        unsigned r = rnd(rng) ;
        *tab++ = make_RGB(  (r & 0xFF) , (r>>8 & 0xFF), (r>>16 & 0xFF) ) ;
    }
}

size_t Count(const Image & im) {
const int N = im.M_ * im.N_;
std::vector<char> count(_16M,0);
const RGB* tab = im.tab();
#pragma omp parallel 
{
#pragma omp for 
for (int i=0; i<N; i++) {
    count[ tab->i_rgb ] = 1 ;
    tab++;
    }
}
size_t nColors = 0 ;
#pragma omp parallel 
{
#pragma omp for 
for (int i = 0 ; i<_16M; i++) nColors += count[i];
}
return nColors;
}

int main() {
    Image im(4096,4096);
    FillRandom(im);
    typedef boost::chrono::high_resolution_clock hrc;
    auto start = hrc::now();

    std::cout << " # colors " << Count(im) << std::endl ; 

    boost::chrono::duration<double> sec  = hrc::now() - start;
    std::cout << " took " << sec.count() << " seconds\n";
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T10:07:15.457

这里唯一可行的算法是建立一种图像颜色的直方图。在您的情况下，唯一的区别是，您不需要计算每种颜色的总体，而是只需要知道它是否为零。

根据您使用的颜色空间，您可以使用 a`std::set`来标记现有颜色（如 Joachim Pileborg 建议的那样），或者只使用类似的东西`std::bitset`，这显然更快。这取决于您的色彩空间中存在多少不同的颜色。

此外，正如 Marius Bancila 所指出的，此过程非常适合并行化。计算图像部分的直方图数据，然后将其合并。自然地，图像划分应该基于它的内存划分，而不是几何属性。简而言之 - 垂直分割图像（按批次扫描线），而不是水平分割。

而且，如果可能的话，您应该使用一些低级库/代码来运行像素，或者尝试编写自己的。至少您**必须**`GetPixel`获得一个指向扫描线的指针并在其像素上批量运行，而不是为每个像素做类似的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T10:10:31.807

这里的要点是，图像作为二维颜色数组的理想表示不是图像存储在内存中的方式（颜色分量可以排列在“平面”中，可能存在“填充”等. 所以使用`GetPixel`-like函数获取像素可能需要一些时间。

那么，如果图像不是“矢量绘制”的结果，这个问题甚至可能毫无意义：想想一张照片：在两个附近的“绿色”之间，你会发现所有的绿色阴影，所以颜色 - 在这种情况下- 不亚于图像本身的编码（2^24、256、16 或 ...）所支持的，因此，除非您对颜色分布感兴趣（它们的使用方式有多么不同），仅仅计算它们是没有意义的。

解决方法可以是：

1.  创建具有“单平面格式”像素的内存位图
2.  使用 BitBlt 或类似方法将您的图像插入该位图（这让操作系统可以从 GPU 进行像素转换，如果有的话）
3.  获取位图位（这使您可以访问存储的值）
4.  在这些值上播放您的“计数算法”（无论是什么）。

请注意，如果您已经知道图像已经是平面格式，则可以避免步骤 1 和 2。

如果你有一个多核系统，步骤 4 也可以分配给不同的线程，图像的每个工作部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-08T10:30:15.713

您可以使用[`bitset`](http://en.cppreference.com/w/cpp/utility/bitset)它允许您设置各个位并具有[`count`](http://en.cppreference.com/w/cpp/utility/bitset/count)功能。

每种颜色都有一个位，每个 RGB 有 256 个值，因此是 256*256*256 位（16,777,216 种颜色）。每 8 位将`bitset`使用一个字节，因此它将使用 2MB。

使用像素颜色作为索引`bitset`：

```
bitset<256*256*256> colours;

for(int pixel: pixels) {
    colours[pixel] = true;
}

colours.count(); 
```

这具有线性复杂性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-18T05:13:39.037

这个答案迟到了，但由于这个算法非常快，大约在 2 年或更长时间前开发，当时它真的很重要。3-D 查找表颜色匹配 [http://www.ddj.com/cpp/184403257](http://www.ddj.com/cpp/184403257)

基本上，它创建了一个 3d 颜色循环表，搜索速度非常快，我做了一些修改以适应我的图像二值化目的，所以我将颜色空间从 ff ff ff 减少到 fff，甚至快了 10 倍. 因为它是开箱即用的，所以我还没有找到任何接近的东西，包括哈希表。

```
char * creatematcharray(struct rgb_color *palette, int palettesize)
    {
      int rval=16, gval=16, bval=16, len, r, g, b;
      char *taken, *match, *same;
      int i, set, sqstep, tp, maxtp, *entryr, *entryg, *entryb;
      char *table;

      len=rval*gval*bval;

      // Prepare table buffers:
      size_t size_of_table = len*sizeof(char);
      table=(char *)malloc(size_of_table);
      if (table==nullptr) return nullptr;

      // Select colors to use for fill:
      set=0;
      size_t size_of_taken = (palettesize * sizeof(int) * 3) +
          (palettesize*sizeof(char)) + (len * sizeof(char));
      taken=(char *)malloc(size_of_taken);
      same=taken + (len * sizeof(char));
      entryr=(int*)(same + (palettesize * sizeof(char)));
      entryg=entryr + palettesize;
      entryb=entryg + palettesize;
      if (taken==nullptr)
      {
        free((void *)table);
        return nullptr;
      }
      std::memset((void *)taken, 0, len * sizeof(char));
    //  std::cout << "sizes: " << size_of_table << " " << size_of_taken << std::endl;

      match=table;
      for (i=0; i<palettesize; i++)
      {
        same[i]=0;
        // Compute 3d-table coordinates of palette rgb color:
        r=palette[i].r&0x0f, g=palette[i].g&0x0f, b=palette[i].b&0x0f;
        // Put color in position:
        if (taken[b*rval*gval+g*rval+r]==0) set++;
        else same[match[b*rval*gval+g*rval+r]]=1;
        match[b*rval*gval+g*rval+r]=i;
        taken[b*rval*gval+g*rval+r]=1;
        entryr[i]=r; entryg[i]=g; entryb[i]=b;
      }

      // @@@ Fill match_array by steps: @@@
      for (set=len-set, sqstep=1; set>0; sqstep++)
      {
        for (i=0; i<palettesize && set>0; i++)
          if (same[i]==0)
          {
            // Fill all six sides of incremented cube (by pairs, 3 loops):
            for (b=entryb[i]-sqstep; b<=entryb[i]+sqstep; b+=sqstep*2)
              if (b>=0 && b<bval)
                for (r=entryr[i]-sqstep; r<=entryr[i]+sqstep; r++)
                  if (r>=0 && r<rval)
                  { // Draw one 3d line:
                    tp=b*rval*gval+(entryg[i]-sqstep)*rval+r;
                    maxtp=b*rval*gval+(entryg[i]+sqstep)*rval+r;
                    if (tp<b*rval*gval+0*rval+r)
                      tp=b*rval*gval+0*rval+r;
                    if (maxtp>b*rval*gval+(gval-1)*rval+r)
                      maxtp=b*rval*gval+(gval-1)*rval+r;
                    for (; tp<=maxtp; tp+=rval)
                      if (!taken[tp])
                        taken[tp]=1, match[tp]=i, set--;
                  }
            for (g=entryg[i]-sqstep; g<=entryg[i]+sqstep; g+=sqstep*2)
              if (g>=0 && g<gval)
                for (b=entryb[i]-sqstep; b<=entryb[i]+sqstep; b++)
                  if (b>=0 && b<bval)
                  { // Draw one 3d line:
                    tp=b*rval*gval+g*rval+(entryr[i]-sqstep);
                    maxtp=b*rval*gval+g*rval+(entryr[i]+sqstep);
                    if (tp<b*rval*gval+g*rval+0)
                      tp=b*rval*gval+g*rval+0;
                    if (maxtp>b*rval*gval+g*rval+(rval-1))
                      maxtp=b*rval*gval+g*rval+(rval-1);
                    for (; tp<=maxtp; tp++)
                      if (!taken[tp])
                        taken[tp]=1, match[tp]=i, set--;
                  }
            for (r=entryr[i]-sqstep; r<=entryr[i]+sqstep; r+=sqstep*2)
              if (r>=0 && r<rval)
                for (g=entryg[i]-sqstep; g<=entryg[i]+sqstep; g++)
                  if (g>=0 && g<gval)
                  { // Draw one 3d line:
                    tp=(entryb[i]-sqstep)*rval*gval+g*rval+r;
                    maxtp=(entryb[i]+sqstep)*rval*gval+g*rval+r;
                    if (tp<0*rval*gval+g*rval+r)
                      tp=0*rval*gval+g*rval+r;
                    if (maxtp>(bval-1)*rval*gval+g*rval+r)
                      maxtp=(bval-1)*rval*gval+g*rval+r;
                    for (; tp<=maxtp; tp+=rval*gval)
                      if (!taken[tp])
                        taken[tp]=1, match[tp]=i, set--;
                  }
          }
      }
      free((void *)taken);`enter code here`
      return table;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-09T19:49:23.420

答案：**unordered_map**

根据*我的*测试，我使用 unordered_map。

> **您应该进行测试，因为您的编译器/库可能会表现出不同的性能**注释掉`#define USEHASH`以使用 map 代替。

在我的机器上，vanilla unordered_map（一种哈希实现）的速度大约是 map 的两倍。由于不同的编译器，库可以有很大的不同，你*必须*测试看看哪个更好。在生产中，我在应用程序第一次启动时构建一个假图像，在其上运行两种算法并计时，保存一个指示哪个更快，然后优先使用该机器上的所有后续启动。这很挑剔，但是，用户的时间对他们来说很宝贵。

对于具有 12,106,244 像素（约 12 兆像素，不是拼写错误）和 11,857,131 种不同颜色（也不是拼写错误）的 DSLR 图像，地图大约需要 14 秒，而无序地图大约需要 7 秒：

**测试代码：**

```
#define USEHASH 1
#ifdef USEHASH
#include <unordered_map>
#endif

size = im->xw * im->yw;
#ifdef USEHASH
// unordered_map is about twice as fast as map on my mac with qt5
// --------------------------------------------------------------
#include <unordered_map>
    std::unordered_map<qint64, unsigned char> colors;
    colors.reserve(size); // pre-allocate the hash space
#else
    std::map<qint64, unsigned char> colors;
#endif 
```

...使用其中之一是在循环中，我在对应于图像像素的 16 位 RGB 值的 64 位变量中构建 0RGB 的 48 位值，如下所示：

```
for (i=0; i<size; i++)
{
    pel = BUILDPEL(i); // macro just shovels 0RGB into 64 bit pel from im
                       // You'd do the same for your image structure
                       // in whatever way is fastest for you
    colors[pel] = 1;
}
cc = colors.size();
// time here: 14 secs for map, 7 secs for unordered_map with
// 12,106,244 pixels containing 11,857,131 colors on 12/24 core,
// 3 GHz, 64GB machine. 
```

# ruby-on-rails - Rails 多个 HABTM

> ID：14769845
> 
> 赞同：1
> 
> 时间：2013-02-08T09:52:56.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在为一个艺术展览网站构建一个 Rails 应用程序。目前我有4个模特，策展人，展览，艺术家和艺术品。

该应用程序应该如下工作，一个展览可以由多个策展人策展，一个展览可以展示多件艺术品，一件艺术品可以在多个展览中展示，艺术家可以拥有多件艺术品，艺术品属于一个艺术家。

我是一名铁路新手，我很难建立模型之间的关系。你能告诉我我这样做是否正确，或者有更好的方法吗？

策展人.rb

```
class Curator < ActiveRecord::Base
    has_and_belongs_to_many :exhibitions
end 
```

展览.rb

```
class Exhibition < ActiveRecord::Base
  has_and_belongs_to_many :curators
  has_and_belongs_to_many :artworks
end 
```

艺术品.rb

```
class Artwork < ActiveRecord::Base
  has_and_belongs_to_many :exhibitions
  belongs_to :artist
end 
```

艺术家.rb

```
class Artist < ActiveRecord::Base
  has_many :artworks
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:58:27.197

它看起来对我来说是正确的。创建连接表命名约定将是：

```
curators_exhibitions

artworks_exhibitions 
```

希望你能明白。

此外，您还想查看 has_many :through 以防您想在关系之上进行验证！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:05:58.857

我建议使用 has_many :through 如果你想对你的关系进行验证，使用回调或者想要添加额外的属性。

如果您想了解有关此问题的更多信息，此 Rails 指南很棒：

[http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)

不过，您的 HABTM 看起来不错。如果您遇到任何问题，建议您也参考您的联接表。

# jquery - JSON 在 asp.net mvc 中未定义

> ID：14769851
> 
> 赞同：0
> 
> 时间：2013-02-08T09:53:22.243
> 
> 标签：jquery, asp.net-mvc, json

在 ASP.NET MVC 3 中，我在 AJAX 调用中使用 JSON。当我在我的开发机器上使用 Visual Studio 运行我的应用程序时，应用程序工作正常。但是如果我发布相同的应用程序并尝试使用虚拟目录访问它，我会收到错误**JSON is Undefined**。

代码

```
function PopulateData() {

            $.ajax({ url: '../Home/Populate/',//**Error Line**
                type: 'POST',
                    data:  JSON.stringify({
                    'id':@ViewBag.Id                     }),

                    dataType: 'json',
                    contentType: "application/json; charset=utf-8",
                success: function (data) 
                {         
                    //code

                } // ajax callback

            });  // ajax call

        } 
```

请回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:58:18.117

这是因为您提供了项目本地的控制器 url。

遵循`@Url.Action("actionname","controllername")`这种方法总是更好。

```
 $.ajax({ 
            url: '@Url.Action("Populate","Home")',
            type: 'POST',
            data:  JSON.stringify({id:@ViewBag.Id}),
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            success: function (data) 
            {         
                //code

            } // ajax callback

        });  // ajax call 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:57:38.507

我认为问题是这条线的物理路径

```
url: '../Home/Populate/' 
```

将其更改为这样的相对路径：

```
url: '@Url.Action("Populate", "Home")' 
```

此外，您可以使用浏览器的 devTools 查看您的 json url。并且，检查它，如果你的 json url 是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T10:21:51.573

**JSON is Undefined**看起来更像是浏览器错误。IE7、FF3.0 等旧浏览器中没有内置 `JSON`。因此，看起来您正在使用不同的浏览器来查看您的网站。假设如果你删除`JSON.stringify`它会正常工作（不知道你为什么需要它，jquery 接受数据作为一个对象，并会做所有需要的事情来正确地将它传递给服务器）：

```
function PopulateData() {

            $.ajax({ url: '../Home/Populate/',//**Error Line**
                type: 'POST',
                    data:  {'id':@ViewBag.Id },    
                    dataType: 'json',
                    contentType: "application/json; charset=utf-8",
                success: function (data) 
                {         
                    //code

                } // ajax callback

            });  // ajax call

        } 
```

正如这里的其他答案所告诉的那样，您应该更好地使用`url: @Url.Action("Populate", "Home")`而不是像现在这样的相对网址

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T20:16:58.853

因为并非所有浏览器都内置了 JSON，所以请在[https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)下载它并包含在您的网站上

顺便说一句，为什么您将 stringify 用于原始类型？

你可以做

```
 data:  { id: @ViewBag.Id } 
```

然后在 ASp.Net Mvc 控制器端

```
public ActionResult Populate(int id) 
```

所以 ASp.net 会为你解析你的参数。

# ruby-on-rails - Rails 代码段解释

> ID：14769853
> 
> 赞同：2
> 
> 时间：2013-02-08T09:53:32.773
> 
> 标签：ruby-on-rails, ruby, oop

我正在开发具有以下代码的应用程序：

```
def app
  @app ||= begin
    if !::File.exist? options[:config]
      abort "configuration #{options[:config]} not found"
    end

    app, myoptions = Rack::Builder.parse_file(self.options[:config], opt_parser)
    self.myoptions.merge! myoptions
    app
  end
end 
```

我正在努力理解它的几个部分..

```
@app||= begin...end 
```

这是否意味着如果 @app 不存在，则运行该块？

```
app ,options = rack::builder 
```

逗号对它有什么作用？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:54:12.257

您的第一个假设是正确的，它确实说如果`@app`是 nil，请将其设置为以 . 分隔的块中返回的任何内容`begin, end`。

关于逗号，它的工作原理如下：

```
avar, bvar = "atest", "btest" 
```

如果您查看源代码，`Rack:Builder.parse_file`那么您会注意到最后一行

```
return app, options 
```

所以它返回两个值。

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:06:46.040

@Craig-Taub 回答了这个问题，
我只想添加一些注释：

Ruby 命令是表达式，这意味着它们返回值，您可以将它们分配给变量。[您可以在Wikipedia](http://en.wikipedia.org/wiki/Statement_%28computer_science%29#Expressions)和[PragProg](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_expressions.html)
上阅读有关表达式和语句的更多信息。

其次，当您在代码块中返回多个值时，Ruby 会将其包装到一个简单的数组中并将其返回给调用者。
这就是它这样工作的原因。

# multithreading - SoapUI 线程与服务器进程线程

> ID：14769858
> 
> 赞同：0
> 
> 时间：2013-02-08T09:53:58.170
> 
> 标签：multithreading, soapui

从客户端发布到服务器时，我有一个 API 请求，以 8 个最大线程数执行。我尝试使用soapUI 模拟 Web 服务 API 调用，并且能够成功完成该任务。

现在我的任务是使用soapUI 执行一个简单的负载测试。在soapUI 中，我有一个设置线程数的选项，我从soapUI 文档中了解到线程是像负载生成器一样的虚拟用户。

我的问题是，如果我在soapUI 中以8 个线程数运行负载测试，它会模拟我上面描述的服务器线程进程。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:15:52.880

不一定（但可能）。如果您的服务器处理请求的速度比客户端发送请求的速度快，那么您将不会获得 8 个同时处理请求的服务器线程。

如果您真的想在负载测试 SoapUI TestCase 时查看服务器端发生了什么，最简单的选择是使用 LoadUI Pro，它可以显示服务器正在使用多少线程。

*来源/免责声明：我专业开发 LoadUI 和 SoapUI。*

# math - 加权线性最小二乘线性拟合。如何强制通过在线的第一个点？

> ID：14769863
> 
> 赞同：0
> 
> 时间：2013-02-08T09:54:05.590
> 
> 标签：math, alglib

我正在使用 alglib 使用最小二乘线性拟合方程计算斜率和截距值，如下所示： -

```
int info;
double[] c;
alglib.lsfitreport rep;
var fmatrix = new double[,] { { 1, 0 }, { 1, 0.05 }, { 1, 0.1 }, { 1, 0.2 } };
var y = new double[] { 32046, 32260, 32296, 32678 };
var w = new double[] { 1, 1, 1, 1 };

alglib.lsfitlinearw(y, w, fmatrix, out info, out c, out rep);

var intercept = c[0];
var slope = c[1]; 
```

“fmatrix”包含我的 x 轴值（每对中的第二个值：- 0、0.05、0.1、0.2）；“y”显然包含我的 y 轴值；“w”是权重 - 在本例中全为 1，因此在此示例中未应用权重。

现在，我需要应用几个不同的“强制”。我设法通过将每个 fmatrix 对的第一个值从“1”更改为“0”来找到如何“强制通过原点”，即：

```
var fmatrix = new double[,] { { 0, 0 }, { 0, 0.05 }, { 0, 0.1 }, { 0, 0.2 } }; 
```

但是我还需要强制通过第一点（x=0，y=32046）。任何想法如何实现这一目标？数学不是我的强项，我也不太了解函数的文档： [http ://www.alglib.net/translator/man/manual.csharp.html#sub_lsfitlinearw](http://www.alglib.net/translator/man/manual.csharp.html#sub_lsfitlinearw)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:13:13.290

抱歉，我设法弄清楚了。我必须从数组中的所有 Y 值中减去第一个点的 Y 值。然后我使用“通过原点的力”进行计算。

该函数当然会返回一个截距值 0，我应该忽略它并使用第一个 Y 值作为截距。

# asp.net - 输出 .xls 错误

> ID：14769864
> 
> 赞同：0
> 
> 时间：2013-02-08T09:54:11.947
> 
> 标签：asp.net, output

[http://forums.asp.net/t/1038105.aspx/1](http://forums.asp.net/t/1038105.aspx/1)

允许我输出一个 .xsl 文档，但是当我打开它时，它似乎没有包含适当的数据，而是试图截取我的主页并通过它输出文本？

关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:14:51.070

最后搞定了...缺少 Response.End(); 在方法的最后——</p>

# android - JSON解析阿拉伯语android

> ID：14769867
> 
> 赞同：0
> 
> 时间：2013-02-08T09:54:22.990
> 
> 标签：android, json, arabic

我有这段代码从用 php 编写的文件中读取专辑名称，并将它们显示为 ListView。问题是，一旦我用阿拉伯语写出专辑名称，它就会在列表中显示为“Null”。

我的 php 文件：album.php

```
include_once './data.php';
$albums = array();
looping through each album
foreach ($album_tracks as $album) {
$tmp = array();
$tmp["id"] = $album["id"];
$tmp["name"] = $album["album"];
$tmp["songs_count"] = count($album["songs"]);
// push album
array_push($albums, $tmp);
}
// printing json
echo json_encode($albums); 
```

数据.php

```
$album_tracks = array(
9 => array(
    "id" => 9,
    "album" => "No Angel",  // album name
    "songs" => array(
        array("id" => 1, "name" => "Here With Me", "duration" => "4:05")
    )
) 
```

如果您需要我的 java 代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:59:17.377

放入`header('Content-type: text/html; charset=sjis');` 你的php文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:47:07.293

我通过将php文件的编码更改为UTF-8解决了这个问题。

# android - 如何在类和活动之间共享对象和变量

> ID：14769870
> 
> 赞同：0
> 
> 时间：2013-02-08T09:54:30.870
> 
> 标签：android

我需要与所有其他活动和类共享我在第一个活动中创建的变量和对象（TextView、按钮等）。

例如：

第 1 步：在我的主要活动（A 类）中，我调用了一个方法（在 B 类中），该方法在动态上创建了几个按钮。

第 2 步：当用户单击其中一个按钮时，我调用一个方法（在 C 类中）来检查用户是否“做了某事”。

第 3 步：如果用户做了某事，我从 C 类调用一个方法（在 D 类中），该方法禁用我在 B 类中创建的所有按钮。

问题：从 D 类到达 B 类中创建的按钮的正确方法是什么

我应该如何处理？即使在不是活动的简单类中，我也必须使用这个对象和变量，所以我不能使用 Application.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:31:27.787

这是根据您的解释提出的建议。请记住，我是用心输入的，可能有一些错别字。

第 1 步：在我的主要活动（A 类）中，我调用了一个方法（在 B 类中），该方法在动态上创建了几个按钮。

```
public class A extends Activity implements OnClickListener{
      private ArrayList<Buttons> mybuttons = new ArrayList<Butons>

      // ... at some point you call B
      mybuttons.addAll(b.createButton(this));
           // createButtons should receive an OnClickListener as parameter to set on the buttons
           // createButtons returns a List<Buttons> that you add to your list.
           // note that it's NOT a static list, and that the list is part of the Activity, the Activity can hold reference to its views without problem

} 
```

第 2 步：当用户单击其中一个按钮时，我调用一个方法（在 C 类中）来检查用户是否“做了某事”。

第 3 步：如果用户做了某事，我从 C 类调用一个方法（在 D 类中），该方法禁用我在 B 类中创建的所有按钮。

```
 // because A implements the OnClickListener, the OnClick is called inside A
  onClick(View v){
        // call the C to check. and make it return a boolean (true or false)
       if(c.CheckStuff()){
           // disable your buttons.
           for(Button btn:mybuttons) {  btn.setEnabled(false);  }
        }
  } 
```

问题：从 D 类到达 B 类中创建的按钮的正确方法是什么

回答：公平地说，您不必这样做，如果 D 只是禁用按钮只是我输入的那一行。如果它正在做更多的事情，你可以传递`mybuttons`给 D，但我敦促不要在 D 中保留对它的永久引用，这是因为 D 不是活动生命周期的一部分。

# c - 静态无符号长变量之间的减法

> ID：14769872
> 
> 赞同：0
> 
> 时间：2013-02-08T09:54:43.907
> 
> 标签：c

我对两个静态无符号长变量之间的减法有疑问。

我的变量定义如下：

```
static unsigned long actual_value;
static unsigned long incoming;
static unsigned long outgoing; 
```

我在while循环中做的操作是：

```
actual_value = actual_value - (outgoing - incoming) / 1000; 
```

其中“传出”始终大于“传入”。问题是我的 actual_value 在每次迭代时都不会改变。我从不在 while 循环的任何其他时间点修改“actual_value”的值，所以问题就在这里。

事实上，如果我尝试用以下公式代替该等式：

```
actual_value = actual_value - 1; 
```

在每次迭代中正确地值减 1。

但是，如果我将其更改为：

```
actual_value = actual_value - 0.1; 
```

在每次迭代中，该值再次减少 1。所以我想我还没有完全理解静态无符号变量是如何工作的。

问题出在哪里？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:03:08.497

根据您对我的评论的回复 -`outgoing - incoming`小于`1000`，结果`(outgoing - incoming) / 1000`将始终为 0。

解决方案取决于您需要什么。如果您想从除法中获得真正的价值，请执行以下操作：

```
( outgoing - incoming ) / 1000.0 
```

这与

```
( outgoing - incoming ) / 1000. 
```

那么你会得到一个介于 0 和 1 之间的浮点数。

但是你想达到什么目的？如果`( outgoing - incoming )`is always`< 1000`和 not ，此代码将始终按原样`0`减少`actual_value`by的值。当且仅当为 0 时，则不会改变。这是你需要的吗？`1``actual_value``unsigned long``outgoing - incoming``actual_value`

* * *

根据下面的评论，您需要一个`float`or`double`类型 for `actual_value`。然后，使用`actual_value -= ( outgoing - incoming ) / 1000.;`

如果要将最接近的整数值打印到`actual_value`，则需要

```
printf( "%ul\n", (unsigned long)( actual_value + .5 ) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:57:14.243

如果`(outgoing - incoming)`小于 1000，那么您`0`每次都减去，`(outgoing - incoming) / 1000`评估结果为`0`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T10:00:06.660

您可以忘记`static`，它根本不影响算术结果，它仅处理变量的存储细节。

这听起来像是整数算术的问题......对我来说是整数。

减少 0.1 有效，因为这会导致舍入对您有利（增加不起作用）。

但是您的表达式`(outgoing - incoming) / 1000`是*integer*，并且可能评估为 0。

此外，您应该像这样编写第一个表达式：

```
actual_value -= (outgoing - incoming) / 1000; 
```

它更清楚。当然，使用调试器进行调试以查看发生了什么也很简单。

# c# - 流中的位图：错误？

> ID：14769874
> 
> 赞同：4
> 
> 时间：2013-02-08T09:54:57.980
> 
> 标签：c#, bitmap, stream, jpeg

我有一个非常奇怪的错误。我需要缩小图像，缩小质量并转换为 JPEG。当我将文件保存在磁盘上时，这一切都有效，但是当我将它保存到流时它不起作用。

```
System.Drawing.Bitmap bitmap = // valid Bitmap from Disk
System.IO.Stream stream = new MemoryStream();

// JPEG Encoding

System.Drawing.Imaging.ImageCodecInfo jpgEncoder = GetEncoder( System.Drawing.Imaging.ImageFormat.Jpeg );
System.Drawing.Imaging.Encoder encoder2 = System.Drawing.Imaging.Encoder.Quality;
System.Drawing.Imaging.EncoderParameters parameters = new System.Drawing.Imaging.EncoderParameters( 1 );
System.Drawing.Imaging.EncoderParameter parameter = new System.Drawing.Imaging.EncoderParameter( encoder2, qualityLevel );
parameters.Param[0] = parameter;

// Save downscaled on Disk and stream

bitmap.Save( stream, jpgEncoder, parameters );
bitmap.Save( @"C:\TestJPEG.jpg", jpgEncoder, parameters );

// some stream stuff

var bytes = ((MemoryStream)stream).ToArray();
System.IO.Stream inputStream = new MemoryStream( bytes );

// Load from disk and stream

Bitmap fromDisk = new Bitmap( @"C:\TestJPEG.jpg" ); // works
Bitmap fromStream = new Bitmap( inputStream ); // crash invalid parameter no inner message or description
Bitmap fromStream2 = (Bitmap)Bitmap.FromStream( inputStream ); // same error here
// also crashes if I load the "stream" named Stream 
```

我也可以用 Paint 打开转换后的文件。有什么建议么？

**编辑：** 我在 Windows 7 Professional 上使用 .Net Framework 4.0

**Edit2：** 尝试了 Seek 的事情（答案已被删除）

```
stream.Seek( 0, SeekOrigin.Begin ); 
```

它适用于“旧”流。但我需要从字节数组中加载它。还是一样的崩溃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:58:06.367

以下代码适用于我：

```
var bitmap = new Bitmap(@"c:\Dokumente und Einstellungen\daniel.hilgarth\Desktop\Unbenannt.bmp");

ImageCodecInfo jpgEncoder = ImageCodecInfo.GetImageEncoders().Single(x => x.FormatDescription == "JPEG");
Encoder encoder2 = System.Drawing.Imaging.Encoder.Quality;
EncoderParameters parameters = new System.Drawing.Imaging.EncoderParameters( 1 );
EncoderParameter parameter = new EncoderParameter( encoder2, 50L );
parameters.Param[0] = parameter;

System.IO.Stream stream = new MemoryStream();
bitmap.Save( stream, jpgEncoder, parameters );
bitmap.Save(@"C:\Temp\TestJPEG.jpg", jpgEncoder, parameters);

var bytes = ((MemoryStream)stream).ToArray();
System.IO.Stream inputStream = new MemoryStream(bytes);
Bitmap fromDisk = new Bitmap(@"C:\Temp\TestJPEG.jpg");
Bitmap fromStream = new Bitmap(inputStream); 
```

您的代码有一些不同之处。哪一个导致您的问题取决于您自己，我猜：

*   我`50L`用作`qualityLevel`. 使用`1`、或时`2`，我收到“参数无效”。因为我不知道你的变量的类型或值很可能是问题所在。`50``100``ArgumentException``qualityLevel`
*   我替换了你的`GetEncoder`方法。我不知道你的方法到底是做什么的，所以这可能是问题所在，但我对此表示怀疑。

# django - 如何获得注册日期？

> ID：14769876
> 
> 赞同：5
> 
> 时间：2013-02-08T09:55:08.017
> 
> 标签：django, django-authentication

如何获得注册日期？这个字段的名称是什么？我使用 django 注册。我在文档中没有看到这个

```
User.objects.filter(date_of_registration_field__lt = my_date) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-08T09:58:06.617

> [`date_joined`](https://docs.djangoproject.com/en/stable/ref/contrib/auth/#django.contrib.auth.models.User.date_joined)
> 
> 指定帐户创建时间的日期时间。创建帐户时默认设置为当前日期/时间。

# c++ - 使用 log4cxx 关闭日志记录以获得最小开销

> ID：14769878
> 
> 赞同：3
> 
> 时间：2013-02-08T09:55:15.637
> 
> 标签：c++, performance, logging, log4cxx

我使用[log4cxx](http://logging.apache.org/log4cxx/)进行日志记录。但是，日志记录可能会引入一些我需要最小化的性能开销。

如何关闭日志记录（在运行时或编译时）以最小化开销 - 没有从代码中删除所有日志语句？

该文件指出

> 用户应注意以下性能问题。
> 
> 关闭日志记录时的日志记录性能。
> 
> 当日志完全关闭或仅关闭一组级别时，日志请求的成本包括方法调用和整数比较。如果请求未启用，LOG4CXX_DEBUG 和类似的宏会抑制不必要的表达式评估。

但是如何完全关闭它呢？这是可以实现的最小开销吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:34:48.987

如果您真的想在编译时禁用所有日志记录，只需将 log4cxx 宏重新定义为空，即

```
#define LOG4CXX_TRACE(logger, expression)    
#define LOG4CXX_DEBUG(logger, expression)    
#define LOG4CXX_INFO(logger, expression)   
#define LOG4CXX_WARN(logger, expression)    
#define LOG4CXX_ERROR(logger, expression)    
#define LOG4CXX_FATAL(logger, expression) 
```

零开销。对于运行时的情况，你总是要付出一些代价。快速浏览一下，我实际上使开销比他们的文档所说的要大一些，通常涉及一个额外的虚拟方法调用。这基本上是使用此库的最小开销，尽管您可能会使用链接时间优化等获得一些非常小的改进，以消除方法调用开销。

# java - 覆盖 JTable 的 DefaultTableCellRenderer 以使 JTable 中的所有单元格居中

> ID：14769885
> 
> 赞同：3
> 
> 时间：2013-02-08T09:55:35.980
> 
> 标签：java, swing, jtable, renderer

我有一个无法摆脱的问题。

你知道，我对使用 JTables 还很陌生，所以答案可能很简单，但我找不到解决方案：/

所以，我有一个使用 AbstractTableModel 的 JTable，它覆盖了

```
 public Class<?> getColumnClass(int columnIndex_p) 
```

方法，告诉要显示的每一列的类型。其中之一是布尔值。

当我创建一个简单的 JTable 时，使用

```
 table_l = new JTable(new MyTableModel()); 
```

一切都很好，布尔值使用复选框（开/关）正确显示。

现在，我想将每个单元格上的文本居中（以后可能还有更多选项）。

因此，我为每一列定义了一个新的 DefaultTableCellRenderer，如下所示：

```
 DefaultTableCellRenderer cellRenderer_l = new DefaultTableCellRenderer() {
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
          // delegate the rendering part to the default renderer (am i right ???)
          Component comp = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
          return comp;
        }
    } 
```

然后我只是将此 CellRender 的水平对齐设置为：

```
 cellRenderer_l.setHorizontalAlignment(JLabel.CENTER); 
```

然后我在 JTable 的每一列上安装这个新的 CellRenderer：

```
 for (int i = 0; i < table_l.getColumnCount(); ++i) {
        table_l.getColumnModel().getColumn(i).setCellRenderer(cellRenderer_l);
    } 
```

但是，使用新的 CellRenderer，显示的 JTable 不再使用我的 TableModel 的 getColumnClass() 方法，因此只在布尔值上显示“真/假”字符串。

我不知道如何让它仍然像以前一样使用 getColumnClass() 。

如果有人有答案...谢谢

编辑：感谢您所做的所有澄清。事实上，我真正的问题是：“如何影响 JTable 的所有 DefaultRenderer 以使它们将结果集中在 JTable 的单元格中”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T10:02:44.743

默认单元格[渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)已经为 type 的值执行此操作[，](https://stackoverflow.com/a/13919878/230513)`Boolean.class`如此处所示。如果这还不够，请编辑您的问题以包含一个[sscce](http://sscce.org/)，以展示您遇到的任何问题。

附录：如果您需要进一步自定义 a `DefaultTableCellRenderer`，请使用 指定适用类型的渲染器，`setDefaultRenderer()`如下所示[。](https://stackoverflow.com/a/10067560/230513)

```
table.setDefaultRenderer(Boolean.class, yourCellRenderer); 
```

![图片](../Images/6dd35404326978dd7730694de988e2e1.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T10:59:50.790

为了对所有渲染组件应用相同的视觉装饰（如果这是您*真正*想要的，请小心，它可能会降低可用性！）您可以覆盖 JTable 的 prepareRenderer 方法：

```
@Override
public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
    Component comp = super.prepareRenderer(...);
    if (comp instanceof JLabel) {
        ((JLabel) comp).setHorizontalAlignment(...);
    }
    return comp;
} 
```

顺便说一句：这种方法违反了*不*为应用程序需求子类化 JSomething 的规则。您可以考虑使用正式支持视觉装饰渲染组件的[SwingX 。](http://swingx.java.net)因此，您可以在表中注册一个 Highlighter，而不是子类化：

```
JXTable table = ...
table.addHighlighter(new AlignmentHighlighter(CENTER), HighlightPredicate.ALWAYS); 
```

# extjs - 未设置 Ext JS LoadRawData TotalProperty

> ID：14769899
> 
> 赞同：1
> 
> 时间：2013-02-08T09:56:13.143
> 
> 标签：extjs, extjs4

我正在通过 LoadRawData 将数据加载到网格面板中，但未设置总属性。

App.GP.getStore().loadRawData(obj);

最后，我重写了 LoadRawData 方法以强制它设置，但这仍然不起作用。

```
 Ext.define('App.patch.app.Store', {
    override: 'Ext.data.Store',

    loadRawData: function (data, append) {
        var me = this,
         result = me.proxy.reader.read(data),
         records = result.records;

        if (result.success) {
            me.totalCount = result.total;
            me.loadRecords(records, { addRecords: append });
            me.fireEvent('load', me, records, true);
        }
    }
}); 
```

我正在加载 3 条记录，页面大小为 3，但将 totalCount 设置为 8。

我逐行调试并确认 me.totalCount 设置为 8，但是当 pagegrid 加载分页工具栏中的显示消息时，显示 Offices 1 - 3 of 3。

应该是 1 - 3 of 8。

这是我的网格面板

```
pitem.Add(Html.X().GridPanel()
                             .ID("GP")
                             .Title(_AllOffices.SelectOffices_Text)
                             .Header(true)
                             .Border(false)
                             .Frame(true)
                             .Store(st => st.Add(Html.X().Store()
                                                        .ID("Store")
                                                        .AutoLoad(true)
                                                        .RemoteSort(false)
                                                        .IsPagingStore(true)
                                                        .RemotePaging(true)                
                                                        .AutoDataBind(true)                                                           
                                                        .PageSize(3)
                                                        .Reader(x=>x.Add(Html.X().JsonReader().Root("data")))
                                                        .Model(Html.X().Model().Fields(new ModelField("Id")))                                                                                                                                                                                                        
                             ))
                             .ColumnModel(columnModel => columnModel.Columns.Add(Html.X().Column().Text("Id").DataIndex("Id").Flex(1)))
                             .SelectionModel(Html.X().CheckboxSelectionModel())               
                             .BottomBar(bar => bar.Add(Html.X().PagingToolbar()
                                                           .DisplayInfo(true)
                                                           .HideRefresh(true)
                                                           .Listeners(x=> x.BeforeChange.Fn="GetSelectedRows").Listeners(x=> x.Change.Fn="CheckRows")                                                               
                                                           .DisplayMsg(_AllOffices.DisplayingOffices_Text + " {0} - {1} of {2}"))
                             )
                             .View(view => view.Add(Html.X().GridView()))
                   ); 
```

我还应该在 loadrawdata 调用之前添加我在很多列和字段中动态添加的内容，但这一切都很好。

# iphone - 上传到应用商店

> ID：14769900
> 
> 赞同：0
> 
> 时间：2013-02-08T09:56:17.323
> 
> 标签：iphone, xcode, appstore-approval

最后，我已经成功完成了我的第一个应用程序，但是自昨晚上传以来我遇到了两个问题。

1.  Appnametests.octest 为红色。

2.  右键单击 .app 并“在 finder 中显示”重定向到 debug-iphoneos 文件夹。其中，当使用“应用程序加载器”压缩和上传时，会给出错误“应用程序代码
    验证失败。签名无效，或者未使用 iPhone 分发证书签名。

在玩的时候，我去'Release-iPhoneos'文件夹，压缩.app文件，然后上传，突然文件已经上传了。

我的问题是，

1.  我做错什么了吗？

2.  我的申请有可能被拒绝吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:10:28.157

首先放松。Appstore上传并不难。当你第一次做的时候，这是一个令人困惑的过程。请务必正确执行所有步骤。但是，您可以随时在 iTunes Connect 上重新上传二进制文件。

1.  最好从 Xcode 上传您的应用程序。假设您使用 XCode 上传您的应用程序。
2.  在您准备好在应用商店上传应用之前。您必须在应用设置中选择您的分发证书。此“ '应用程序未通过协同签名验证。签名无效，或未使用 iPhone 分发证书签名。” **错误表示您没有选择分布配置文件。**我建议你再次确认这一点。您可以选中[此项](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingaDistributionProvisioningProfile/CreatingandDownloadingaDistributionProvisioningProfile.html)以创建分发证书。
3.  完成此操作后，您必须将 iTunes 上的应用状态连接为“准备上传”。
4.  然后你继续分发你的应用程序。哪个被提交到应用商店进行审查。
5.  当您的二进制文件成功上传后，您的应用状态更改为“等待审核”

1.我做错了吗？- 如果您错过了上述任何步骤，您可能犯了一些错误。

2.我的申请有可能被拒绝吗？- 如果您犯了任何错误，这意味着您的二进制文件未正确上传。所以这无关紧要。

如果您觉得有问题，那么不要等待接下来的 7 天，然后应用程序告诉您我们没有收到您的二进制文件。如有必要，只需按照[此处给出的步骤删除正确的二进制文件](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/AboutYourFirstAppStoreSubmission/AboutYourFirstAppStoreSubmission.html)

# spring - Spring Data JPA 类项目不依赖于 Spring

> ID：14769903
> 
> 赞同：6
> 
> 时间：2013-02-08T09:56:22.300
> 
> 标签：spring, jakarta-ee, guice, spring-data-jpa

有谁知道任何遵循存储库方法并自动实现查询方法（例如`findByNameAndLastName(…)`）但不依赖于 Spring 的 Java 框架，只有纯 JPA。这样的特性在 GORM 中也存在。我想看看是否有任何项目可以在Guice或纯JavaEE环境中使用而无需将Spring作为依赖项。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-08T10:41:21.647

（免责声明：我是 Spring Data JPA 的作者）

有[CDI 查询模块](http://ctpconsulting.github.com/query/1.0.0.Alpha5/index.html)，它与 Spring Data JPA 非常相似。还有一个[DeltaSpike 模块](http://deltaspike.apache.org/documentation/data.html)。

请注意，Spring Data JPA 附带一个 CDI 扩展，该扩展将存储库代理创建为普通 CDI bean，并且不引导 Spring 容器。有些 API 允许以编程方式创建存储库代理，例如：

```
EntityManager em = // … obtain EntityManager
JpaRepositoryFactory factory = new JpaRepositoryFactory(em);
UserRepository repository = factory.getRepository(UserRepository.class); 
```

是的，它仍然需要在类路径中存在 Spring 库，但是它使用它们的方式类似于您使用 Commons Collection 等的方式。我们尽量不重新发明轮子，我们所依赖的 Spring 库提供了许多我们不必重新编码的有用代码。

因此，如果您担心的是 Spring 作为 DI 容器，请随意选择 Spring Data JPA 的 CDI 扩展。如果您不想使用任何 Spring（无论出于何种原因），请查看替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T18:53:27.037

根据 Oliver 的信息，后续也对这个话题感兴趣——

CDI 查询加入 Deltaspike 邮件线程：[http ://apache-deltaspike-incubator-discussions.2316169.n4.nabble.com/Porting-the-CDI-Query-extension-project-to-DeltaSpike-td4329922.html](http://apache-deltaspike-incubator-discussions.2316169.n4.nabble.com/Porting-the-CDI-Query-extension-project-to-DeltaSpike-td4329922.html)

Deltaspike 基础链接：[http ://deltaspike.apache.org/index.html](http://deltaspike.apache.org/index.html)

入门：[http ://deltaspike.apache.org/documentation.html](http://deltaspike.apache.org/documentation.html)

截至 2013 年 5 月 31 日，他们刚刚发布了第 0.4 个版本。

但是，还没有做足够的审查来对比/比较 Deltaspike 与带有 CDI 扩展的 Spring-Data（spring-data 非常成熟）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T22:02:26.593

看看github上的Tomato吧！

它是 Spring JPA 的功能替代品，具有零依赖性，性能更好并且更易于使用。它将您的数据访问代码减少 98%，并立即提供您想要的结果。

[https://rpbarbati.github.io/Tomato](https://rpbarbati.github.io/Tomato)。

如果您想要任何番茄实体或层次结构的免费、功能齐全的动态表单和/或表格，也可以轻松定制，请尝试基于角度的配套项目......

[https://rpbarbati.github.io/Basil](https://rpbarbati.github.io/Basil)

两者都是当前维护的项目。

自己尝试一下，或通过 rodney.barbati@gmail.com 联系作者有问题。

# eclipse - 我在哪里可以找到 eclEmma 依赖项？

> ID：14769904
> 
> 赞同：6
> 
> 时间：2013-02-08T09:56:22.740
> 
> 标签：eclipse, plugins, installation, eclemma

我正在尝试在我的 eclipse Juno 安装中安装 eclEmma。

当我通过“安装新软件”安装时，eclipse 计算依赖关系，要求我接受许可证，然后产生此错误：

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,com.mountainminds.eclemma.asm,2.2.0.201210261515
No repository found containing: osgi.bundle,com.mountainminds.eclemma.core,2.2.0.201210261515
No repository found containing: osgi.bundle,com.mountainminds.eclemma.debug.ui.compatibility,2.2.0.201210261515
No repository found containing: osgi.bundle,com.mountainminds.eclemma.doc,2.2.0.201210261515
No repository found containing: org.eclipse.update.feature,com.mountainminds.eclemma.feature,2.2.0.201210261515
No repository found containing: osgi.bundle,com.mountainminds.eclemma.ui,2.2.0.201210261515
No repository found containing: osgi.bundle,org.jacoco.agent,0.6.0.201210061924
No repository found containing: osgi.bundle,org.jacoco.core,0.6.0.201210061924
No repository found containing: osgi.bundle,org.jacoco.report,0.6.0.201210061924 
```

如果我穿过市场，我会得到

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No artifact repository available.
noArtifactRepositoriesAvailable 
```

选择要安装的内容后不久。

问题：我能做些什么来解决这个问题？我需要额外的更新站点吗？

注意：我刚刚安装了 MoreUnit，所以互联网连接似乎很好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-01T11:26:16.757

我遇到了同样的问题，并且网站上描述的手动安装 eclemma 不起作用。这就是我所做的（在 4.3 Kepler 上）。

打开 eclemma-2.2.1.zip。转到功能子目录。在 eclipse/feature 目录中，使用 zip 文件的 feature 子目录中的 jar 名称创建一个目录（不带 jar 后缀）。现在打开 jar 并将其内容复制到这个新创建的目录中。

完成后应如下所示：

```
./eclipse/features/com.mountainminds.eclemma.feature_2.2.1.201306092145/
                   |-META-INF
                   |-about.html
                   |-feature.properties
                   |-feature.xml 
```

然后将 jar 从 zip 中的 plugins 目录复制到 eclipse 安装的 plugins 目录中：

```
./eclipse/plugins/
          |-com.mountainminds.eclemma.asm_2.2.1.201306092145.jar
          |-com.mountainminds.eclemma.core_2.2.1.201306092145.jar
          |-com.mountainminds.eclemma.debug.ui.compatibility_2.2.1.201306092145.jar
          |-com.mountainminds.eclemma.doc_2.2.1.201306092145.jar
          |-com.mountainminds.eclemma.ui_2.2.1.201306092145.jar
          |-org.jacoco.agent_0.6.3.201306030806.jar
          |-org.jacoco.core_0.6.3.201306030806.jar
          |-org.jacoco.report_0.6.3.201306030806.jar 
```

启动 eclipse 并且覆盖启动器应该是可见的并且覆盖应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T11:57:07.337

通过 Marketplace（选项 1）和更新站点（选项 2）安装对我来说也不起作用。

我安装了它

> [选项 3：手动下载和安装](http://www.eclemma.org/installation.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-12T05:28:34.403

我尝试按照[官方文档](http://www.eclemma.org/installation.html)手动安装，但它对我不起作用。

> 选项 3：手动下载和安装

如需手动安装，请下载最新的 EclEmma 版本。将存档解压缩到 Eclipse 安装的 dropins 文件夹中，然后重新启动 Eclipse：

```
<your eclipse installation>/
+- dropins/
   +- eclemma-x.y.z/
      +- plugins/
      |  +- ...
      +- feature/
         +- ... 
```

而不是直接将提取的 zip 文件放入 dropins 文件夹。我已经复制了 features 和 plugins 文件夹中可用的所有 jar 文件，并分别手动粘贴到 eclipse 根文件夹下的相同 features 和 plugin 文件夹中。现在它开始工作了。

解决方案：

```
<your eclipse installation>/
   +- plugins/
   |  +- com.mountainminds.eclemma.asm_2.3.3.201602231923
   |  +- com.mountainminds.eclemma.core_2.3.3.201602231923
   |  +- com.mountainminds.eclemma.debug.ui.compatibility_2.3.3.201602231923
   |  +- com.mountainminds.eclemma.doc_2.3.3.201602231923
   |  +- com.mountainminds.eclemma.ui_2.3.3.201602231923
   |  +- org.jacoco.agent_0.7.6.201602180812
   |  +- org.jacoco.core_0.7.6.201602180812
   |  +- org.jacoco.report_0.7.6.201602180812
   +- feature/
      +- com.mountainminds.eclemma.feature_2.3.3.201602231923 
```

# android - 选择联系人

> ID：14769906
> 
> 赞同：0
> 
> 时间：2013-02-08T09:56:27.100
> 
> 标签：android, android-contacts

我制作了一个应用程序，可以检索所有存储的联系人。我想制作一个应用程序，允许用户选择他想要添加到应用程序中的联系人。我应该动态创建复选框并检索选定的联系人还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:24:28.283

这是一个例子，就像你需要工作一样

```
 // MainActivity

      public class MainActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

   final ListView listTags = (ListView) findViewById(R.id.listPack);
   listTags.setAdapter(new ArrayAdapter<String>(this, R.layout.list_item, mStrings));
   listTags.setOnItemClickListener(new OnItemClickListener() {

       @Override
       public void onItemClick(AdapterView<?> parent, View view,
               int position, long id) {
           listTags.setSelection(position); 
```

// Toast.makeText(getParent(), "hello", Toast.LENGTH_LONG).show(); } });

```
}

 private String[] mStrings = {

    "Comte", "Coolea", "Cooleney", "Coquetdale", "Corleggy", "Cornish Pepper",
    "Cotherstone", "Cotija", "Cottage Cheese", "Cottage Cheese (Australian)",
    "Cougar Gold", "Coulommiers", "Coverdale", "Crayeux de Roncq", "Cream Cheese",
    "Cream Havarti", "Crema Agria", "Crema Mexicana", "Creme Fraiche", "Crescenza",
    "Croghan", "Crottin de Chavignol", "Crottin du Chavignol", "Crowdie", "Crowley",
    "Cuajada", "Curd", "Cure Nantais", "Curworthy", "Cwmtawe Pecorino",
   }; 
```

// 主xml

```
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

<ListView
    android:id="@+id/listPack"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_marginBottom="5dip"
    android:layout_marginLeft="5dip"
    android:layout_marginRight="5dip"
    android:layout_weight="1" >
</ListView>

    </LinearLayout> 
```

// list_item.xml // 布局

# c++ - 塑造二维码opencv c++

> ID：14769909
> 
> 赞同：0
> 
> 时间：2013-02-08T09:56:37.640
> 
> 标签：c++, opencv

我目前正在构建一个基于 c++ 和 opencv 的小应用程序。这个应用程序的目的是创建一个二维码，然后使用 opencv 函数“平滑”它。

问题是我没有得到我期望的结果。到目前为止我用过

```
Mat element = getStructuringElement(CV_SHAPE_ELLIPSE, Size(3, 3));
morphologyEx(paternMat, paternMat, MORPH_CLOSE, element, Point( -1, -1 ), 3 ); 
```

当然也尝试过 MORPH_OPEN, cv::erode, cv::dilate ...但我仍然无法获得我想要的结果。

我的问题很简单，在[这个例子](http://qrcode.selectionpro.fr/www/qrcode/)中，我怎样才能设法从第一个 qrcode 到第二个，使用 opencv 函数......

非常感谢 ;）

**编辑 ：**

中值模糊按预期工作，非常感谢您的快速回答。

我有最后一个问题。我已经用另一个 qrcode 编辑了我的示例，我想知道如何使用 opencv 获得它。我尝试了各种组合，但没有人会真正起作用。

我最后一次请求您的慷慨帮助；），这是示例：[此示例](http://qrcode.selectionpro.fr/www/qrcode/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:23:58.120

您是否尝试过**cv::Smooth**功能？

在这里你有一些细节：[http ://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=smooth#smooth](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=smooth#smooth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:25:53.633

查看 OpenCV 中的函数`blur`, `gaussianBlur`, `medianBlur`, `bilateralFilter`。

参考：[http ://docs.opencv.org/doc/tutorials/imgproc/gausian_median_blur_bilateral_filter/gausian_median_blur_bilateral_filter.html](http://docs.opencv.org/doc/tutorials/imgproc/gausian_median_blur_bilateral_filter/gausian_median_blur_bilateral_filter.html)

# c# - 关于脚本引擎实现的一些问题

> ID：14769914
> 
> 赞同：1
> 
> 时间：2013-02-08T09:56:53.280
> 
> 标签：c#, scripting, mono

由于这很难解释，让我从一个图表开始：

![在此处输入图像描述](../Images/5e8b5569f66b21ccd18724d51e194164.png)

理论讲了这么多，但我将如何实际实施呢？这甚至可能/可行吗？

想到的一些问题：

*   我如何将脚本实际加载到对象中以供 ScriptManager 保存？
*   如何公开某些功能？我不希望他们对我的程序拥有最终的权力，只有一个域。
*   脚本如何甚至知道例如 EngineClass？我应该在脚本中使用吗？那不需要在脚本路径中复制程序集吗？
*   我听说过 MEF，这可能吗？它似乎更适合插件。
*   我什至如何编译脚本？

当然，我知道您无法回答所有这些问题或为我实现整个引擎。但是我需要关于该做什么的指示，我一直在研究这个概念很长一段时间。

提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:45:42.107

经过更多研究后，我偶然发现了[嵌入 C# 桌面应用程序的最佳脚本语言是什么？](https://stackoverflow.com/questions/137933/what-is-the-best-scripting-language-to-embed-in-a-c-sharp-desktop-application)和[http://blogs.msdn.com/b/abhinaba/archive/2005/11/14/492458.aspx](http://blogs.msdn.com/b/abhinaba/archive/2005/11/14/492458.aspx)它似乎做了一些修改我想要的。在我不知道之前的几周，我怎么没有偶然发现这一点。

# c++ - 何时使用无符号字符指针

> ID：14769917
> 
> 赞同：10
> 
> 时间：2013-02-08T09:57:12.040
> 
> 标签：c++, pointers

`unsigned char`指针有什么用？我在很多地方都看到过指针类型转换为指向指针的指针我们`unsinged char`为什么要这样做？

我们收到一个指向的指针`int`，然后将其类型转换为`unsigned char*`。但是，如果我们尝试使用 cout 打印该数组中的元素，它不会打印任何内容。为什么？我不明白。我是 C++ 新手。

**编辑**下面的示例代码

```
int Stash::add(void* element)
{
    if(next >= quantity)
    // Enough space left?
        inflate(increment);

    // Copy element into storage, starting at next empty space:
    int startBytes = next * size; 
    unsigned char* e = (unsigned char*)element;
    for(int i = 0; i < size; i++)
        storage[startBytes + i] = e[i];
    next++;
    return(next - 1); // Index number
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T10:04:59.440

您实际上正在寻找[指针算术](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/pointer.html)：

```
unsigned char* bytes = (unsigned char*)ptr;
for(int i = 0; i < size; i++)
    // work with bytes[i] 
```

在此示例中，`bytes[i]`等于`*(bytes + i)`，它用于访问地址上的内存：`bytes + (i* sizeof(*bytes))`。换句话说：如果你有`int* intPtr`并且你尝试访问`intPtr[1]`，你实际上是在访问存储在字节中的整数：4 到 7：

```
0  1  2  3
4  5  6  7 <-- 
```

指针指向的类型大小会影响它在递增/递减后指向的位置。因此，如果您想逐字节迭代数据，则需要有一个指向大小为 1 字节的类型的指针（这就是为什么`unsigned char*`）。

* * *

`unsigned char`通常用于保存`0`有效值且仍然是数据的一部分的二进制数据。在使用“naked”`unsigned char*`时，您可能必须保持缓冲区的长度。

`char`通常用于保存表示字符串的字符，`0`等于`'\0'`（终止字符）。如果您的字符缓冲区始终以 终止`'\0'`，则您不需要知道它的长度，因为终止字符准确地指定了数据的结尾。

请注意，在这两种情况下，最好使用一些隐藏数据内部表示并为您处理内存管理的对象（请参阅[RAII idiom](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)）。所以最好使用`std::vector<unsigned char>`（二进制数据）或`std::string`（字符串）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-08T10:06:25.760

在 C 中，`unsigned char`是唯一保证没有陷印值的类型，并且保证复制将产生精确的按位图像。（C++ 也将此保证扩展到`char`。）出于这个原因，它传统上用于“原始内存”（例如 的语义是`memcpy`根据 定义的`unsigned char`）。

此外，当要使用按位运算（ 、 等）时，通常会使用无符号`&`整数类型 `|`。是最小的无符号整数类型，可以在处理使用按位运算的小值数组时使用。有时，它也被使用，因为在溢出的情况下需要模行为，尽管这对于较大的类型更常见（例如，在计算哈希值时）。这两个原因通常都适用于无符号类型。通常仅在需要减少内存使用时才用于它们。`>>``unsigned char``unsigned char`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T10:05:39.817

该`unsinged char`类型通常用作单个`byte`二进制数据的表示。因此，数组通常用作二进制数据缓冲区，其中每个元素都是一个字节。

该`unsigned char*`构造将是一个指向二进制数据缓冲区（或其第一个元素）的指针。

我不是 100% 确定`c++`标准对大小的确切说明是什么`unsigned char`，无论它是否固定为 8 位。**通常**是这样。我会尝试找到并发布它。

**看到你的代码后**

当您使用类似`void* input`函数的参数时，您会故意剥离有关输入原始类型的信息。这是一个非常强烈的建议，即输入将以非常一般的方式处理。即作为任意字节串。`int* input`另一方面，建议将其视为单整数的“字符串”。

`void*`主要用于输入被编码或出于任何原因被处理`bit`/`byte`明智的情况，因为您无法就其内容得出结论。

然后在您的函数中，您似乎希望将输入视为一串字节。**但是**要对对象进行操作，例如执行`operator=`（赋值），编译器需要知道要做什么。由于您将输入声明为`void*`赋值，`*input = something`因此没有任何意义，因为`*input`它是`void`类型。为了使编译器将`input`元素视为“最小的原始内存块”，您将其转换为适当的类型，即`unsigned int`.

由于`cout`错误或意外的类型转换，可能无法正常工作。`char*`被认为是一个空终止的字符串，很容易在代码中混淆`singed`和`unsigned`版本化。如果您将`unsinged char*`其`ostream::operator<<`作为 a传递，`char*`它会将`byte`输入视为普通的 ASCII 字符，其中`0`意味着是字符串的结尾而不是`0`. 当您想打印内存内容时，最好显式地转换指针。

另请注意，要打印缓冲区的内存内容，您需要使用循环，否则打印函数将不知道何时停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T10:06:40.240

当您要逐字节访问数据时，无符号字符指针很有用。例如，将数据从一个区域复制到另一个区域的函数可能需要：

```
void memcpy (unsigned char* dest, unsigned char* source, unsigned count)
{
    for (unsigned i = 0; i < count; i++)
        dest[i] = source[i];
} 
```

它还与字节是内存的最小可寻址单元这一事实有关。如果要从内存中读取小于字节的任何内容，则需要获取包含该信息的字节，然后使用位操作选择信息。

您可以使用指针很好地复制上述函数中的数据`int`，但这会复制 4 个字节的块，这在某些情况下可能不是正确的行为。

为什么当你尝试使用时屏幕上什么也没有出现`cout`，最可能的解释是数据以零字符开头，在 C++ 中它标志着一串字符的结尾。

# cocoa - 从非沙盒应用程序修改沙盒应用程序的默认值

> ID：14769923
> 
> 赞同：2
> 
> 时间：2013-02-08T09:57:25.037
> 
> 标签：cocoa, nsuserdefaults, sandbox

我有一个应用程序，我现在正在沙盒中。我使用来自不同流程的可访问性 API 进行自动化验收测试。在沙盒之前，测试套件使用 CFPreferencesSetValue 和朋友为应用程序设置某些默认值。

沙箱化后，默认值是从 ~/Library/Containers/BUNDLEID/Data/Library/Preferences 读取的，但据我所知，CFPreferencesSetValue 函数仅写入 ~/Library/Preferences。

有没有办法以编程方式将首选项写入沙盒首选项，而无需例如硬编码位置并直接修改 plist，或使用默认命令行实用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T13:53:36.633

一种解决方案是向您的沙盒应用程序添加“应用程序组”，从而允许该组的其他应用程序共享其首选项，请参阅：[Reading NSUserDefaults from helper app in the sandbox](https://stackoverflow.com/questions/14014417/reading-nsuserdefaults-from-helper-app-in-the-sandbox?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-21T13:18:29.080

实际上，有一种更好的方法，请在此处查看我自己的问题的答案：[OS X 的默认命令如何访问沙盒应用程序的首选项？](https://stackoverflow.com/questions/20705279)

诀窍是使用沙盒容器中首选项文件的完整路径（减去“.plist”扩展名）作为应用程序 ID。

# jquery - 如何从下面的html字符串中获取ID

> ID：14769924
> 
> 赞同：3
> 
> 时间：2013-02-08T09:57:31.567
> 
> 标签：jquery, jquery-selectors

使用选择器时

```
$(this).children('td ').eq(0).html() 
```

我明白了

```
<input name="abc" type="checkbox" value="checked" class="check2" id="xyz" checked=""> 
```

我想从此输入元素中获取“id”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:59:32.657

```
$(this).children('td:first').find('input[type="checkbox"]').prop('id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:07:20.730

快点

```
var $t=$(this);

$t.find("> td:first-child").get(0).id 
```

编辑以回答消失的评论：

> 当前获胜者
> 
> 缓存的 .find()
> 
> var $a = $('#a'); $a.find('.b');

[http://vaughnroyko.com/the-real-scoop-on-jquery-find-performance/](http://vaughnroyko.com/the-real-scoop-on-jquery-find-performance/)

# erlang - 如何防止 io:format 输出其 ASCII 字符表示？

> ID：14769927
> 
> 赞同：2
> 
> 时间：2013-02-08T09:57:36.767
> 
> 标签：erlang

我有以下行：

```
io:format("~p~n",[<<40,45,50,51>>]). 
```

它会输出

```
<<"(-23">> 
```

如何强制它打印为 <<40,45,50,51>> ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:13:10.660

```
 > io:format("~w~n",[<<40,45,50,51>>]).
   <<40,45,50,51>> 
```

这是用于输出的[控制序列。](http://erlang.org/doc/man/io.html)

# sql - SQL group by 只返回第一行

> ID：14769929
> 
> 赞同：1
> 
> 时间：2013-02-08T09:57:40.557
> 
> 标签：sql, group-by, having-clause

我有一个包含两列“id”和“布局计划”的表

我需要查看所有具有相同布局计划的行

我使用这个查询。

```
select * 
from project_layout 
group by layout_plan 
having count(layout_plan) > 1 
```

但是这个查询只返回第一行。

我想查看所有具有相同布局计划的组。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T10:00:05.407

如果您使用未分组且没有聚合的列，则 MySQL 以外的数据库会出错。但是 MySQL 将从组的行中返回一个不确定的值。

要检索`layout_plan`多于一行的组中的所有行，您可以使用：

```
select  *
from    project_layout
where   layout_plan in
        (
        select  layout_plan 
        from    project_layout 
        group by 
               layout_plan 
        having 
               count(*) > 1
        ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T10:02:41.150

尝试这个，

```
select * from project_layout 
where layout_plan in (select layout_plan   
            from project_layout    
            group by layout_plan   
            having count(layout_plan) > 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T10:01:28.373

```
Select  a.*
from    project_layout
        INNER JOIN 
        (
            select  layout_plan 
            from    project_layout 
            group   by  layout_plan 
            having  count(layout_plan ) > 1
        ) b ON a.layout_plan = b.layout_plan 
```

为了获得更快的性能，请添加一个`index`on 列`layout_plan`

# c# - 通过 servicebus 之类的应用程序内部的模块通信

> ID：14769932
> 
> 赞同：0
> 
> 时间：2013-02-08T09:57:46.283
> 
> 标签：c#, wpf, design-patterns, architecture

我们需要构建一个桌面应用程序。
操作员使用商店列表。他有一个过滤商店的主窗口，还有许多额外的窗口：地图（显示商店的位置，在地图上将列表中选定的商店标记为粗体），库存表格（查询选定商店库存的外部服务）。表单可以同时打开，也可以隐藏其中的一些，除了主表单。

**可能的实现**：
我将每个表单视为我的应用程序的独立模块。为什么？我预计表格的数量会增加。例如，商店最新销售的新表格，与商店经理聊天的另一种表格。

**问题**：
如何组织模块之间的通信？
现在我有一个使用共享总线的想法，模块可以通过它发送和接收消息。
有没有其他选择？
是否有此总线的任何实现，或者我对基于发布者/订阅者模式的直接实现就足够了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:16:58.847

首先，您需要保持模块解耦。否则，它将导致模块之间的依赖关系非常严重。
为了实现这一点，最好的办法是使用 EventAggregator 结构。虽然名字看起来像是事件，但实际上它是一个管理 pub/sub 的总线结构。

[您可以在此处](http://www.martinfowler.com/eaaDev/EventAggregator.html)找到有关 EventAggregator 模式表单的信息。

.NET 世界有一个提供此功能的开源 API（名为[Prism ）。](http://msdn.microsoft.com/en-us/library/gg406140.aspx)我强烈建议您从[这里](http://msdn.microsoft.com/en-us/library/ff921122%28v=PandP.40%29.aspx)阅读 Prism 文档的事件聚合部分并挖掘源代码。

目前我们正在开发一个 Silverlight 应用程序，其中包括完全相互分离的不同模块（没有模块知道另一个模块的实例/引用）并通过 Prism API 进行通信。

# php - 将带有数字和小写字符的字符串转换为带有数字、小写和大写字符的字符串

> ID：14769935
> 
> 赞同：0
> 
> 时间：2013-02-08T09:57:50.370
> 
> 标签：php, hash, base

我有一个生成唯一 ID 的函数。输出格式仅包含数字和小写字符。问题是，这些 id 很长，因此对用户不是很友好。我的问题是，是否有可能将此 id 转换为还包含大写字符的 id，从而使字符串更短，因为每个字符的值可以是 62 (10 + 2*26) 而不是 32 (10 + 26 )? 我正在用 PHP 编写这个函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:05:17.230

这个函数可以让你随机字符串长度

```
 function Random($length){//40-95--97-126
 $id='';
 for($i=0;$i<$length;$i++){  
   while(1) {  
     $id1=rand(48,122);
     if(($id1!=91)and($id1!=92)and($id1!=93)and($id1!=94)and($id1!=95)and($id1!=96)and($id1!=58)and($id1!=59)and($id1!=60)and($id1!=61)and($id1!=62)and($id1!=63)and($id1!=64)and($id1<123)and($id1>47)){
       break;
     }
   }
   $id.=chr($id1);
 }
 return($id);
} 
```

用于测试

```
echo Random(10); 
```

# jquery - 在 jquery 表单验证器中为一个字段显示不同的错误消息

> ID：14769941
> 
> 赞同：1
> 
> 时间：2013-02-08T09:58:16.500
> 
> 标签：jquery, jquery-validate

我想显示不同的错误消息来验证出生日期。我想在年龄低于 13 岁时单独显示错误消息。我有一个 jquery validae addmethod 来计算年龄。找到以下代码并建议我如何显示验证年龄的错误消息。

```
$.validator.addMethod("check_date_of_birth", function(value, element) {

        var day = $("#dob_date").val();
        var month = $("#dob_month").val();
        var year = $("#dob_year").val();
        var age =  13;

        var mydate = new Date();
        mydate.setFullYear(year, month-1, day);

        var currdate = new Date();
        currdate.setFullYear(currdate.getFullYear() - age);

        return currdate > mydate;

    }, 'Age should not be less than 13');

$('#form').validate({

groups: {
             dob: "dob_date dob_month dob_year"
            },

rules: {
            sex      : "required",
            name     : "required",
            dob_date : { required: true },
            dob_month: { required: true },
            dob_year : { required: true, check_date_of_birth: true },
       },

messages: {
            sex      : "Choose gender",
            name     : "Enter name",
            dob_date : "Please select date/month/year",
            dob_month: "Please select date/month/year",
            dob_year : "Please select date/month/year",
          },
}); 
```

HTML

```
<div data-role="fieldcontain">
                    <legend><span lang="en">Date of Birth</span></legend>
                    <fieldset data-role="controlgroup" data-type="horizontal">
                        <div id="id-error">
                            <label for="dob" class="error" generated="true"></label>
                        </div>
                        <select name="dob_date" id="dob_date" ></select>
                        <select name="dob_month" id="dob_month"></select>
                        <select name="dob_year" id="dob_year"></select>
                    </fieldset>
                </div> 
```

在上面的 html 标签“dob”中，如果我也输入 13 岁以下的年龄，则始终显示“请选择日期/月份/年份”消息。如果我选择 13 岁以下的年龄，我想显示另一条错误消息。在哪里更改以获取相同输入字段的新错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:39:27.137

另一种方法是删除所有可以为 13 岁或以下年龄选择的 DOB 选项。

*   [http://jsfiddle.net/7dNVR/](http://jsfiddle.net/7dNVR/)

HTML

```
<div data-role="fieldcontain">
    <legend><span lang="en">Date of Birth</span>
    </legend>
    <fieldset data-role="controlgroup" data-type="horizontal">
        <div id="id-error">
            <label for="dob" class="error" generated="true"></label>
        </div>
        <select name="dob_date" id="dob_date"></select>
        <select name="dob_month" id="dob_month"></select>
        <select name="dob_year" id="dob_year"></select>
    </fieldset>
</div> 
```

JS

```
var month = [];

// set the names of the months 
month[0] = "January";
month[1] = "February";
month[2] = "March";
month[3] = "April";
month[4] = "May";
month[5] = "June";
month[6] = "July";
month[7] = "August";
month[8] = "September";
month[9] = "October";
month[10] = "November";
month[11] = "December";

var date = new Date();
var ageRestriction = 13;
var day = date.getDate();
//var month = month[date.getMonth()];

// set restriction
date.setFullYear(date.getFullYear() - ageRestriction);
var year = date.getFullYear();

var dayOptions = [];
$.each(new Array(31), function(n) { 
    n = n + 1; // offset by 1
    if (day > n) {
        dayOptions.push('<option value="'+ n +'" disabled="disabled">'+ n +'</option>');
    } else {
        dayOptions.push('<option value="'+ n +'">'+ n +'</option>');
    }    
});

var monthOptions = [];
$.each(new Array(12), function(n) { 
    if (date.getMonth() > n) {
        monthOptions.push('<option value="'+ (n + 1) +'" disabled="disabled">'+ month[n] +'</option>');
    } else {
        monthOptions.push('<option value="'+ (n + 1) +'">'+ month[n] +'</option>');
    }    
});

var yearOptions = [];
$.each(new Array(year), function(n) { 
    n = n + 1900;
    if (year >= n) {
        yearOptions.push('<option value="'+ n +'">'+ n +'</option>');
    }    
});

$('#dob_date').html(dayOptions.join(''));
$('#dob_month').html(monthOptions.join(''));
$('#dob_year').html(yearOptions.reverse().join(''));

$('#dob_date').on('change', function() {
    isValidDOB(date);
});

function isValidDOB(date)
{
    var selectedDate = $('#dob_date').val();
    var selectedMonth = $('#dob_month').val();
    var selectedYear = $('#dob_year').val();

    userSelectedDOB = new Date(selectedYear+"/"+selectedMonth+"/"+selectedDate);

    if (date.getMonth() != userSelectedDOB.getMonth()) {
        alert('Day selected out of range for Month');
        return false;
    }

    if (userSelectedDOB.valid()) {         
        return true;
    }
    return false;
} 
```

这可以优化，因为它只是一个工作示例

顺便说一句，isValidDOB 函数无法正常工作，它只是作为示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:41:25.200

你的代码：

```
rules: {
    // your other rules,
    dob_year : { 
        required: true,
        check_date_of_birth: true
    },
},
messages: {
    // other messsages,
    dob_year : "Please select date/month/year",
}, 
```

对于该`dob_year`字段，您只为*两条*规则声明了一条消息。

您只需为*每个规则明确指定**相应*的消息：

 *```
messages: {
    // your other messsages,
    dob_year: {
        required: "Please select date/month/year",
        check_date_of_birth: "you are not yet 13"
    }
}, 
```

**工作演示：http: [//jsfiddle.net/9x6Lb/](http://jsfiddle.net/9x6Lb/)***

# java - Java - 是否有欧几里得或底模的方法

> ID：14769943
> 
> 赞同：13
> 
> 时间：2013-02-08T09:58:17.680
> 
> 标签：java, operators, modulo, modulus, negative-number

Java 模运算符`%`基于截断除法（参见[维基百科：模运算](http://en.wikipedia.org/wiki/Modulo_operation)）。

*   `5%3`产生`2`（注意`5/3`产生`1`）
*   `5%(-3)`产生`2`（注意`5/(-3)`产生`-1`）
*   `(-5)%3`产生`-2`（注意`(-5)/3`产生`-1`）
*   `(-5)%(-3)`产生`-2`（注意`(-5)/(-3)`产生`1`）

在计算科学中，给定两个整数`a`并且`n`, > 0，有时获得与模一致`n`的唯一整数是有用`r`的。`[a,n[``a``n`

# 问题

Java中是否有一个有效的通用运算符/方法尊重这个模数规范？

这是为了避免在每个需要它的项目中重写它......

# 各种各样的

我在stackoverflow上发现了很多关于这个问题的问题，其中大多数混淆了不同的模实现。如果您只是对负数的模运算结果感到困扰，下面是一些**基于 Java`%`运算符**的实现，它们可能有用。

## 常见的黑客

由于我们几乎不使用负除数，因此此实现在 时返回欧几里得或底模`n > 0`。

```
static int mod(int a, int n){    
  return a<0 ? (a%n + n)%n : a%n;
} 
```

*   `mod( 5, 3)`生产`2`
*   `mod(-5, 3)`生产`1`

## 欧几里得模

```
static int euclideanModulo(int a, int n){
  return n<0 ? euclideanModulo(a, -n) : mod(a, n);
} 
```

*   `euclideanModulo( 5, 3)`生产`2`
*   `euclideanModulo(-5, 3)`生产`1`
*   `euclideanModulo( 5,-3)`生产`2`
*   `euclideanModulo(-5,-3)`生产`1`

## 底模

```
static int flooredModulo(int a, int n){
  return n<0 ? -flooredModulo(-a, -n) : mod(a, n);
} 
```

*   `flooredModulo( 5, 3)`生产`2`
*   `flooredModulo(-5, 3)`生产`1`
*   `flooredModulo( 5,-3)`生产`-1`
*   `flooredModulo(-5,-3)`生产`-2`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-28T16:42:42.497

```
+----+----+------------+----------+------------+----- ------+---------+------------+
| x mod y | 商'q' | 余数'r' |
| x | 是 | 截断 | 地板 | 欧几里得 | 截断 | 地板 | 欧几里得 |
+----+----+------------+----------+------------+----- ------+---------+------------+
| 5 | 3 | 1 | 1 | 1 | 2 | 2 | 2 |
| -5 | 3 | -1 | -2 | -2 | -2 | 1 | 1 |
| 5 | -3 | -1 | -2 | -1 | 2 | -1 | 2 |
| -5 | -3 | 1 | 1 | 2 | -2 | -2 | 1 |
+----+----+------------+----------+------------+----- ------+---------+------------+

```

至少其中任何一个都满足`x = yq + r`。

## 截断除法和取模

```
static int truncatedDiv(int x, int y) {    
    return x / y;
}

static int truncatedMod(int x, int y) {    
    return x % y;
} 
```

## 地板除法和模数

您可以使用`java.lang.Math`自 Java 8 以来的方法。请参阅[floorDiv](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/Math.java#l1051)和[floorMod](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/Math.java#l1138)。

```
static int floorDiv(int x, int y) {    
    return Math.floorDiv(x, y);
}

static int floorMod(int x, int y) {    
    return Math.floorMod(x, y);
} 
```

## 欧几里得除法和取模

### a) 基于截断除法

```
import static java.lang.Math.*;

static int euclideanDiv(int x, int y) {
    int r = x / y;
    // if the divident is negative and modulo not zero, round down for positive divisor, otherwise round up
    if (x < 0 && r * y != x) {
        r -= signum(y);
    }
    return r;
}

static int euclideanMod(int x, int y) {
    int r = x - euclideanDiv(x, y) * y;
    return r;
} 
```

### b) 基于地板分割

```
import static java.lang.Math.*;

static int euclideanDiv(int x, int y) {
    int r = floorDiv(x, y);
    // if the divisor is negative and modulo not zero, round up
    if (y < 0 && r * y != x) {
        r++;
    }
    return r;
}

static int euclideanMod(int x, int y) {
    int r = x - euclideanDiv(x, y) * y;
    return r;
} 
```

### c) 基于绝对模数

```
import static java.lang.Math.*;

static int euclideanMod(int x, int y) {
    int r = abs(x) % abs(y);
    // apply the sign of divident and make sure the remainder is positive number
    r *= signum(x);
    r = (r + abs(y)) % abs(y);
    return r;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T10:07:28.170

这段代码怎么样

```
public static int gcd(int p, int q) {
    if(count == 0) 
        System.out.print("Gcd for " + p + " and " + q);
    if (q == 0) {
           System.out.println(" returns " + p + " after " + count + " iterations");
        return p;
    }
    count++;
    return gcd(q, p % q);
}
public static void main(String[] args) {
    count = 0;
    gcd(4, 16);
    count = 0;
    gcd(4, 16);
    count = 0;
    gcd(16, 4);
    count = 0;
    gcd(15, 60);
    count = 0;
    gcd(15, 65);
    count = 0;
    gcd(1052, 52);
} 
```

# c# - C# - 在运行时将文件作为资源添加到我的 Exe

> ID：14769947
> 
> 赞同：3
> 
> 时间：2013-02-08T09:58:24.203
> 
> 标签：c#, .net, resources

我发现我可以在 Visual Studio 2010 中将文件 (*.jpg) 添加到我的 C# 资源中。据我所知，应该可以在运行时重新组装 exe。我不想自己剥离 exe。我正在寻找可以为我执行此操作的 C# 例程。当然，我不想修改正在运行的 exe，而是修改它的副本。如果我需要在运行时再次编译它，我也可以将我的源代码放在我的 exe 中。

我的目标：

1.  创建正在运行的exe的副本
2.  **以某种方式**将文件添加到该副本。
3.  关闭正在运行的应用程序
4.  当用户执行副本时，它必须将文件作为内部资源。而已。

* * *

**编辑：** C# 编译器 + Visual Studio 2010 在目标系统上可用。

* * *

（我不是在编写完整的安装程序，请不要说那些坏话：“重新发明”和“轮子”，我自己知道）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:21:13.633

如果没有完整编译器的好处，您将很难以不会破坏可执行文件的方式修改资源部分。

但是，您可以做的是：

*   制作一个 ZIP 文件（或其他包含所有文件的存档）
*   将 ZIP 文件的内容添加到可执行文件的末尾
*   还附加一个包含存档长度的 int32

您可以通过为您自己的可执行文件打开一个`FileStream`开始`ExecutableLength - ZipLength - 4`并读取`ZipLength`字节来读取它 - 它只为您提供可以使用 DotNetZip 或其他库读取的 zip 部分。

然后当你想修改存储的数据时：

*   在运行时重命名现有的可执行文件（您可以这样做）
*   读取`ExecutableLength - ZipLength - 4`可执行文件的第一个字节并将它们写入一个新文件，该文件的名称是可执行文件在重命名之前的原始名称。
*   使用您的信息创建新的 ZIP 存档并将其附加。
*   附加新存档长度的 int32。
*   关闭现有应用程序并启动新应用程序。

Tadah - 一个可以修改自己存储资源的可执行文件。

# iphone - 如何检查互联网是否重新连接？

> ID：14769950
> 
> 赞同：0
> 
> 时间：2013-02-08T09:58:32.297
> 
> 标签：iphone, ios, objective-c

如果我的 iPhone 没有互联网连接。我想在手机连接到互联网时触发一个事件。有什么办法吗？？或者我应该每 10 分钟检查一次互联网连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:05:44.587

你可以试试下面的链接，这肯定会帮助你

[可达性检查](https://stackoverflow.com/questions/1083701/how-to-check-for-an-active-internet-connection-on-iphone-sdk/3597085#3597085)

快乐编码

# git - 在 IntelliJ 中重构时如何将更改日志保留在 git 文件中？

> ID：14769958
> 
> 赞同：6
> 
> 时间：2013-02-08T09:58:55.813
> 
> 标签：git, logging, intellij-idea, refactoring, atlassian-sourcetree

当我在 IntelliJ 中重构类时，git 会丢失文件旧日志的跟踪？有没有办法重构文件以保留日志，或者我错过了什么？

我正在检查 SourceTree 中文件的日志，但我想一切都是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:01:39.020

移动/重命名[由 Git 自动处理，](https://stackoverflow.com/q/2641146/104891)如果 git 检测到它实际上是移动，则应保留日志。无论您是从 IDEA、终端还是文件管理器重命名都没有关系。

另请参阅[为什么 git 不“跟踪”重命名？](https://git.wiki.kernel.org/index.php/GitFaq#Why_does_Git_not_.22track.22_renames.3F)和[相关错误报告中的评论](http://youtrack.jetbrains.com/issue/IDEA-98854)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-26T06:47:54.280

这种方法虽然可能不是你想听到的，但在我正在做的一个相当大的重新打包过程中帮助 git 检测重命名（并最终了解真实的文件历史记录）（将包重命名`com.something`为`com.somethingelse`其中包含约 300 个文件）：

1.  仅在 IntelliJ 之外使用“git mv”重命名，例如“ `git mv MyProject\src\main\java\com\something MyProject\src\main\java\com\somethingelse`”
2.  犯罪
3.  使用常规 IntelliJ 文本替换对源文件进行重新打包更改 -`Edit > Find > Replace in path`并将所有出现`com.something`的`com.somethingelse`.
4.  犯罪

# bash - 计算两列文件中两个连续数字的顺序颠倒了多少次

> ID：14769959
> 
> 赞同：0
> 
> 时间：2013-02-08T09:58:58.593
> 
> 标签：bash, awk

给定 2 个包含 N 个数字的文件，例如

文件 1

```
1 0.001
2 0.002
3 0.002
4 0.005
5 0.007
6 0.008
7 0.008
8 0.009
9 0.0010
0 0.011 
```

并且 file2 只是 file1 的洗牌版本：

```
0 0.011
8 0.009
7 0.008
3 0.002
5 0.007
9 0.0010
1 0.001
4 0.005
2 0.002
6 0.008 
```

我想计算两个连续数字的顺序，但在这种情况下，如果在 file1.dat 的第二列中有两个相同的连续数字（对于 2-3 和 6-7 的情况），我会像这样我们直接将反转计为 0.5，而不查看 file2.dat。在这种情况下，结果将是 4 次反转。一个类似的问题（和答案）是关于[计算文件中两个连续数字的顺序在 BASH 中的第二个文件中颠倒的次数](https://stackoverflow.com/questions/14295399/counting-how-many-time-the-order-of-two-consecutive-number-in-a-file-are-reverse/14296306#comment20675280_14296306)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:14:04.577

我做了两个案例，选择一个你需要的：

**这是计算 0.5 或 1 个案例**结果 =4

```
kent$  awk  'FNR==NR{o[NR]=$1;next;}{v[$1]=FNR;m[$1]=$2;n=FNR}                               
        END{ for(i=1;i<=n-1;i++) { t+=m[o[i]]==m[o[i+1]]?0.5:v[o[i]]>v[o[i+1]]?1:0};                                                                                        
                print "invertions:"t;    
        }' f1 f2
invertions:4 
```

**这是添加额外的 0.5 案例**结果 = 6

```
kent$  awk  'FNR==NR{o[NR]=$1;next;}{v[$1]=FNR;m[$1]=$2;n=FNR}
        END{ for(i=1;i<=n-1;i++) {t1+=(v[o[i]]>v[o[i+1]])?1:0; t2+=m[o[i]]==m[o[i+1]]?0.5:0};
                print "invertions:"t1+t2;
        }' f1 f2
invertions:6 
```

# objective-c - 检查多个搜索组合的最佳方法

> ID：14769961
> 
> 赞同：1
> 
> 时间：2013-02-08T09:58:59.817
> 
> 标签：objective-c, algorithm

我制作了一个具有不同搜索组合的应用程序。

该应用程序有 6 个文本字段可用于输入和搜索文本。每个文本字段都用于另一个搜索条件。

搜索前只需填写 1 个文本字段。除此之外，用户可以选择要填写和搜索多少个文本字段。所以可能有多种搜索组合。

问题是，确定填写哪些文本字段以及如何搜索满足搜索条件的对象的最佳方法是什么。

搜索方法应该遍历一个对象数组（在我的例子中是一个员工对象数组）并检查值是否匹配。

我的目标是限制 if 语句的数量。

**更新：**

到目前为止，这是我的代码：

```
-(IBAction)SearchEmployees:(id)sender{

NSString *fullName = [(textfieldName.text)uppercaseString];
NSString *functionName = [(textfieldFunction.text)uppercaseString];
NSString *department = [(textfieldDepartment.text)uppercaseString];
NSString *field = [(textfieldField.text)uppercaseString];
NSString *expertise = [(textfieldExpertise.text)uppercaseString];
NSString *interest = [(textfieldInterest.text)uppercaseString];

NSMutableDictionary *filledTextfields = [NSMutableDictionary dictionary];

if (![fullName isEqualToString:@""]){
    [filledTextfields setObject: fullName  forKey: @"fullName"];
}

if (![functionName isEqualToString:@""]){
    [filledTextfields setObject: functionName  forKey: @"functionName"];
}

if (![department isEqualToString:@""]){
    [filledTextfields setObject: department  forKey: @"department"];
}

if (![field isEqualToString:@""]){
    [filledTextfields setObject: field  forKey: @"field"];
}

if (![expertise isEqualToString:@""]){
    [filledTextfields setObject: expertise  forKey: @"expertise"];
}

if (![interest isEqualToString:@""]){
    [filledTextfields setObject: interest forKey: @"interest"];
}

NSMutableArray *foundEmployee = [[NSMutableArray alloc]init];

 for (id key in filledTextfields)
 {
     NSLog(@"KEY: %@ OBJECT: %@", key, [filledTextfields objectForKey:key]);

     for (Employee *employee in self.employees){    //self.employees is the array to search in
         //do something
     }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:17:14.693

我会使用 NSMutableDictionary，将数组的内容添加到字典中，并使用适当的搜索词作为字典的键，然后当您搜索某些内容时，您可以从文本字段中获取文本，然后执行`[dictionary objectForKey:textfieldText]`它将返回适当的对象，如果没有该搜索词的对象，则返回 nil。

我不确定您的搜索条件是如何工作的，但这可能会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:24:52.520

我会构建一个“复合谓词”来过滤数组：

```
NSMutableArray *predicates = [NSMutableArray array];
if ([textFieldName.text length] > 0) {
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"fullName =[c] %@", textFieldName.text];
    [predicates addObject:pred];
}
if ([textfieldFunction.text length] > 0) {
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"functionName =[c] %@", textfieldFunction.text];
    [predicates addObject:pred];
}
// ... same procedure for remaining search criteria ...

if ([predicates count] > 0) { // At least one search criterion
    NSPredicate *finalPredicate = [NSCompoundPredicate andPredicateWithSubpredicates:predicates];
    NSArray *foundEmployees = [self.employees filteredArrayUsingPredicate:finalPredicate];
} 
```

`=[c]`进行不区分大小写的比较。如果合适，您也可以使用`BEGINSWITH[c]`或。`CONTAINS[c]`

谓词使用键值编码，因此`fullName`等`functionName`应该是员工对象的属性。

# python - 大型项目中 OptionParser 和 sphinx-build 的冲突该如何解决？

> ID：14769962
> 
> 赞同：2
> 
> 时间：2013-02-08T09:59:01.230
> 
> 标签：python, python-sphinx, optionparser

我有一个大型 Python 项目，其中包含许多我不想接触的外部库，我想用 sphinx 生成文档。我的问题是，每当我执行“make html”时，我都会收到此错误：

```
...
usage: sphinx-build [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
   or: sphinx-build --help [cmd1 cmd2 ...]
   or: sphinx-build --help-commands
   or: sphinx-build cmd --help

error: option -b not recognized
make: *** [html] Fehler 1 
```

我已经发现当我要记录的某些目录中有 OptionParser 时会出现此问题（[OptionParser 与 sphinx 冲突吗？](https://stackoverflow.com/questions/6912025/is-optionparser-in-conflict-with-sphinx)）。实际上，我有很多脚本在这些目录中使用 OptionParser 并且不使用`if __name__ == "__main__": ...`. 我的问题是：

如何在不触及任何这些脚本的情况下生成文档？

有没有办法排除这些文件/路径？我已经在我的 conf.py 中尝试了 exclude_patterns 但这不起作用。我不知道为什么。有没有办法捕捉到这个错误？

## 更新

问题原来是`setup.py`树中的一个文件，由`autodoc`.

# android - 使用编辑文本过滤列表

> ID：14769969
> 
> 赞同：0
> 
> 时间：2013-02-08T09:59:20.130
> 
> 标签：android, json, listactivity, textwatcher

我想使用编辑文本在我的列表中搜索，但是当我尝试在编辑文本中输入内容时，应用程序停止并在控制台中显示以下错误。

```
02-08 09:46:23.675: E/AndroidRuntime(3759): FATAL EXCEPTION: main
02-08 09:46:23.675: E/AndroidRuntime(3759): java.lang.NullPointerException
02-08 09:46:23.675: E/AndroidRuntime(3759):     at com.example.search.MainActivity$JSONfunctions.onTextChanged(MainActivity.java:142)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.widget.TextView.sendOnTextChanged(TextView.java:7092)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.widget.TextView.handleTextChanged(TextView.java:7151)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.widget.TextView$ChangeWatcher.onTextChanged(TextView.java:8794)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.text.SpannableStringBuilder.sendTextChanged(SpannableStringBuilder.java:962)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:496)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:435)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:30)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.text.method.QwertyKeyListener.onKeyDown(QwertyKeyListener.java:222)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.text.method.TextKeyListener.onKeyDown(TextKeyListener.java:136)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.widget.TextView.doKeyDown(TextView.java:5246)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.widget.TextView.onKeyDown(TextView.java:5065)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.view.KeyEvent.dispatch(KeyEvent.java:2609)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.view.View.dispatchKeyEvent(View.java:7198)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1359)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1359)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1359)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1359)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1920)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1395)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.app.Activity.dispatchKeyEvent(Activity.java:2370)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1847)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3701)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.view.ViewRootImpl.handleImeFinishedEvent(ViewRootImpl.java:3651)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.view.ViewRootImpl$ViewRootHandler.handleMessage(ViewRootImpl.java:2818)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.os.Looper.loop(Looper.java:137)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at java.lang.reflect.Method.invokeNative(Native Method)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at java.lang.reflect.Method.invoke(Method.java:511)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-08 09:46:23.675: E/AndroidRuntime(3759):     at dalvik.system.NativeStart.main(Native Method) 
```

我的代码：

```
public class MainActivity extends ListActivity {

     SimpleAdapter adapter;
     ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
           setContentView(R.layout.list);

        JSONfunctions jsfn=new JSONfunctions();
        jsfn.execute("http://192.168.6.43/employees.php");
    }

    public class JSONfunctions extends AsyncTask<String, Integer, ArrayList<HashMap<String, String>> > implements TextWatcher {

         InputStream is;
         String result ;
         JSONObject jArray;
        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        @Override
        protected ArrayList<HashMap<String, String>> doInBackground(String... params)
        {

            try{
/*get jobject from the url
                HttpClient httpclient = new DefaultHttpClient();

                HttpPost httppost = new HttpPost(params[0]);
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
        }
        try{
             BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
             StringBuilder sb = new StringBuilder();
             String line = null;
             while ((line = reader.readLine()) != null) {
                     sb.append(line + "\n");
             }
             is.close();
             result=sb.toString();

     }catch(Exception e){
             Log.e("log_tag", "Error converting result "+e.toString());
     }

     try{

         jArray = new JSONObject(result);    

       //  MainActivity.dataFromAsyncTask=jArray;
     }catch(JSONException e){
             Log.e("log_tag", "Error parsing data "+e.toString());
     }*/
            try{

                JSONArray  ip = jArray.getJSONArray("Employees");

                for(int i=0;i<ip.length();i++){                     
                    JSONArray e = ip.getJSONArray(i);
                    HashMap<String, String> map = new HashMap<String, String>();    

                    map.put("name", e.getString(0)+" "+e.getString(1)+" "+e.getString(2));
                    //map.put("email id",e.getString(3));
                    //map.put("phone no",e.getString(4));

                    mylist.add(map);        
                } 

            }catch(JSONException e)        {
                 Log.e("log_tag", "Error parsing data "+e.toString());
            }
            return mylist;

                }

                @Override
                protected void onPostExecute(ArrayList<HashMap<String, String>> result)
                {
                    ListAdapter adapter = new SimpleAdapter(MainActivity.this, result , R.layout.activity_main, 
                            new String[] { "name" }, 
                            new int[] { R.id.item_title });
                    MainActivity.this.setListAdapter(adapter);// If Activity extends ListActivity
                    final ListView lv = getListView();
                    lv.setTextFilterEnabled(true);
                    EditText myFilter = (EditText) findViewById(R.id.editText1);
                    myFilter.addTextChangedListener(this);
                }

                @Override
                public void afterTextChanged(Editable s) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void beforeTextChanged(CharSequence s, int start,
                        int count, int after) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onTextChanged(CharSequence s, int start,
                        int before, int count) {
                    // TODO Auto-generated method stub
                    MainActivity.this.adapter.getFilter().filter(s.toString());

                }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:15:51.260

您永远不会初始化您在方法中使用的*适配器*变量。`onTextChanged`所以你要么写：

```
adapter = new SimpleAdapter(MainActivity.this, result , R.layout.activity_main, new String[] { "name" }, new int[] { R.id.item_title }); 
```

在方法中，或者您在方法中使用以下代码`onPostExecute`过滤：`ListView``onTextXhanged`

```
@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    ((Filterable)MainActivity.this.getListView().getAdapter()).getFilter().filter(s.toString());   
} 
```

# c# - 检查字符串的第一个元素是否为正整数

> ID：14769973
> 
> 赞同：1
> 
> 时间：2013-02-08T09:59:35.470
> 
> 标签：c#, string, parsing

我需要检查字符串的第一个元素是否是 C# 中的正整数。有没有聪明的方法来做到这一点？外汇

```
string str = "2001";
if (str.First() == isANumber) {
...                                
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T10:01:23.870

你可以试试这个：

```
string s = "1sdfa";
bool isDigit = char.IsDigit(s[0]); 
```

此外，如果您想对字符串进行额外检查，您可以这样做：

```
bool isDigit = !string.IsNullOrEmpty(s) && char.IsDigit(s[0]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T10:01:55.977

我相信如果没有迹象，那么它是积极的？所以只要检查第一个sybmol是否不是`"-"`。

编辑：正如马克在下面的评论中指出的那样 - 它可能取决于所使用的文化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T10:01:21.867

可以使用[Char.IsDigit](http://msdn.microsoft.com/en-us/library/0t641e58.aspx)

```
Char.IsDigit(str[0]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T10:01:48.377

您可以使用[char.IsDigit](http://msdn.microsoft.com/en-us/library/7y5kahff.aspx)方法检查第一个字符是否为数字。

```
if(char.IsDigit(str[0]))
    Console.WriteLine("Starting character is positive digit");
else
    Console.WriteLine("Starting character is not a digit"); 
```

如果您可以在访问其索引之前检查字符串的长度，那就更好了`0`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-08T10:02:13.353

你应该使用[`Char.IsDigit()`](http://msdn.microsoft.com/en-us/library/7f0ddtxh.aspx)方法。

> 指示指定的 Unicode 字符是否归类为十进制数字。

像;

```
string str = "2001";
if (Char.IsDigit(str[0]))
{
    Console.WriteLine ("Positive digit");
}
else
{
    Console.WriteLine ("Not digit");
} 
```

这是一个[`DEMO`](http://ideone.com/fVOybO).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T10:03:17.250

```
if(Char.IsDigit(str.First()))
{
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-08T10:04:57.067

```
string str = "2001";

if (char.IsDigit(str.First())
{
   if(Convert.toInt32(str.First().ToString()) >= 0)
   {
     // positive integer
   }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-08T10:05:59.240

你好你可以用这个...

```
string something = "some string";
bool isDigit = char.IsDigit(something[0]); 
```

# ios - Cocos2d、iOS 和 XCode：我如何调试/理解这个堆栈跟踪？

> ID：14769979
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:00:01.227
> 
> 标签：ios, xcode, eclipse, cocos2d-iphone, stack-trace

我正在开发一款 Cocos2d 2.0 游戏，无法安静地解决我的应用程序崩溃的原因。

控制台输出如下：

```
2013-02-08 10:52:08.298 AppName[994:15203] cocos2d: CCSpriteBatchNode: resizing TextureAtlas capacity from [29] to [40].
2013-02-08 10:52:08.299 AppName[994:15203] cocos2d: CCSpriteBatchNode: resizing TextureAtlas capacity from [40] to [54].
2013-02-08 10:52:08.300 AppName[994:15203] cocos2d: CCSpriteBatchNode: resizing TextureAtlas capacity from [54] to [73].
(lldb) 
```

“游戏场景”立即加载并崩溃。我可以看到这与 CCSpriteBatchNode 有关，但我完全不知道代码到底在哪里失败。如果我添加一个断点，它没有多大用处，因为它会在到达失败的确切时刻之前触发多次。

**(lldb)**是什么意思？有没有办法获得更明确的堆栈跟踪？**我曾经在 Java 和 Eclipse 中工作，并且可以用英语阅读完整的堆栈跟踪。我希望它与使用 XCode 一样简单。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T22:02:49.590

您可能会遇到那些讨厌的 EXC_BAD_ACCESS 虫子之一。不，没有例外。例如

```
@try {

//        this is caught
//        NSMutableArray *ar = [NSMutableArray array];
//        [ar addObject:nil];

//        this is caught
//        NSMutableDictionary *dic = [NSMutableDictionary dictionary] ;
//        [dic setObject:@"a" forKey:nil];

//    this crashes , no exception
//    NSLog("21");

//    and this will cause a message sent to a dealloced instance (zombie).
//    no exception, just a bad crash.

    GEIntEffect *eff = [GEIntEffect intEffectWithString:@"*1.1"
                                              withOrder:geEffectOrderFightMagic
                                              andImpact:geEffectImpactPositive];
    [eff release];
    NSLog([eff description]);

    [[GameSpecs sharedGameSpecs] setupBattlesInitialSpecs];
    // with  a comment
}

@catch (NSException *e) {
    MPLOGERROR(@"*** an exception [%@] occured while writing the game specs, continuing.\n%@\n\n%@",
    e.description,
    e.callStackSymbols,
    e.callStackReturnAddresses);
} 
```

前两个被困并且日志语句是明确的，向我吐出日志中的堆栈跟踪。NSLog("21") ...哎呀，忘记了“@”严重崩溃。第四个例子，在使用前错误地释放了一个对象……你知道那是做什么的。我只能建议你：

*   检查你所有的警告（我在坏的 NSLog 上有一个）
*   使用仪器分析您的应用程序是否有僵尸。发送到已释放对象的消息也会导致严重崩溃。
*   尽管存在性能损失，即不要过度使用，但一些策略性放置的 try/catch 块可以提供极大的帮助。通常，我在 Debug 中包装任何“更新”方法，在 Release 中删除 try/catch。
*   重新检查所有警告:)

祝你好运。

ps：这是我捕获异常时日志的样子。偏移量不是“代码行”，符号化允许这样做。但是，通常情况下，我从跟踪中获得了足够的信息来将其缩小到真正接近。：

-[MPGameSequencer sequenceInitState] : *** 编写游戏规范时发生异常 [*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil]，继续。(

```
0   CoreFoundation                      0x028de02e __exceptionPreprocess + 206
1   libobjc.A.dylib                     0x022bbe7e objc_exception_throw + 44
2   CoreFoundation                      0x02891b6a -[__NSArrayM insertObject:atIndex:] + 314
3   CoreFoundation                      0x02891a20 -[__NSArrayM addObject:] + 64
4   Battles                             0x00221c49 -[MPGameSequencer sequenceInitState] + 809
5   Battles                             0x0021e359 -[MPGameSequencer nextFrame:] + 121
6   Battles                             0x00067324 -[CCTimer update:] + 308
7   Battles                             0x00070444 -[CCScheduler update:] + 772
8   Battles                             0x0009dc81 -[CCDirectorIOS drawScene] + 225
9   Battles                             0x0009ef44 -[CCDirectorDisplayLink mainLoop:] + 52
10  QuartzCore                          0x007c32d2 _ZN2CA7Display11DisplayLink8dispatchEyy + 110
11  QuartzCore                          0x007c375f _ZN2CA7Display16TimerDisplayLink8callbackEP16__CFRunLoopTimerPv + 161
12  CoreFoundation                      0x0289d376 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
13  CoreFoundation                      0x0289ce06 __CFRunLoopDoTimer + 534
14  CoreFoundation                      0x02884a82 __CFRunLoopRun + 1810
15  CoreFoundation                      0x02883f44 CFRunLoopRunSpecific + 276
16  CoreFoundation                      0x02883e1b CFRunLoopRunInMode + 123
17  GraphicsServices                    0x035e57e3 GSEventRunModal + 88
18  GraphicsServices                    0x035e5668 GSEventRun + 104
19  UIKit                               0x00e9165c UIApplicationMain + 1211
20  Battles                             0x000c2bce main + 270
21  Battles                             0x00002a15 start + 53 
```

)

# naming-conventions - 命名约定和语法

> ID：14769981
> 
> 赞同：0
> 
> 时间：2013-02-08T10:00:03.123
> 
> 标签：naming-conventions, naming

我很想知道语法相关/英语相关命名属性的规则（不是关于大写等）。

命名类属性的推荐方法（对于公共 API）：DateEnd 或 EndDate？

DateEnd 方法允许更轻松地查找和分组相关属性（智能感知和文档）：DateStart、DateEnd ... 但我们不使用 IdTask、TypeProperty 之类的名称。我们使用 TaskId 和 PropertyType。最后一个在语法上更正确。

那么为什么谷歌搜索显示两种方式都使用了〜50/50？microsoft 在公共 API 中使用这两种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:56:01.170

遵循惯例，通常是语法，有助于使 API 直观且令人难忘。
正如您所建议的，TaskId 比 IdTask 更常见，因此应该首选。

如果不会使属性名称过于晦涩，则对相关属性进行分组是一个有用的好处。

以[Exchange Web 服务任务元素](http://msdn.microsoft.com/en-us/library/aa563930%28v=exchg.140%29.aspx)为例，提醒属性以“提醒”开头进行分组，例如

*   提醒到期
*   提醒设置

可以单独使用“HasReminder”，但可以将其更改为“ReminderIsSet”以允许分组，而不会牺牲语法或可读性。

有趣的是，这个 Microsoft 示例是不一致的，因为大多数日期命名为例如“StartDate”、“DueDate”，但其他日期不遵循约定，例如“DateTimeSent”和“DateTimeCreated”。

# php - 创建 config.php 的正确方法

> ID：14769984
> 
> 赞同：0
> 
> 时间：2013-02-08T10:00:06.677
> 
> 标签：php, security, include, config

目前，我将 config.php 文件`include folder` 放在我的 Apache 服务器上，这样我就可以轻松访问该文件，而无需编写目录路径。我认为这是一个好主意，因为它是安全的，并且无法从公共根文件夹外部访问。

我从来没有被告知如何创建`config.php`文件，所以我即兴创作，但似乎它可能以错误的方式完成......（现在不那么安全）。然后我开始搜索有关如何以正确方式构建这些配置文件的教程，但是每个教程都有自己的方法。有些是通过使用数组来实现的。有些是通过定义配置变量来实现的。其他人通过使用类..可能没有正确的方法，但我想要一个安全且功能强大的系统来工作，而且我真的不在乎它有多先进..

这是我当前的配置文件。你应该很容易看到它在任何方面都不是那么安全，因为任何人都可能只能回显变量然后读取连接。

```
<?
$main_host = 'db01.server.local'; // There may be db02, db03 etc.
$main_psw = '********';
$main_host_end = '.server.local'; // makes it possible for me to connect to a different datastore only knowing the subdomain.

// ***    USERS    *** //
$w_user = 'w_user';
$xr_user = 'xr_user';
$r_user = 'r_user';
$w_server = 'w_server';
$w_db_admin = 'dbw_admin';

// ***    DATABASES    *** //
$db_accounts = 'accounts';
$db_server = 'server_setup';

// ***    DB ACCOUNTS    *** //
try {
    $w_accounts = new PDO("mysql:host=$main_host;dbname=$db_accounts", $w_user, $main_psw);
    $w_accounts->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
}

try {
    $r_accounts = new PDO("mysql:host=$main_host;dbname=$db_accounts", $r_user, $main_psw);
    $r_accounts->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
}

// ***    DB SERVER SETUP    *** //
try {
    $w_server = new PDO("mysql:host=$main_host;dbname=$db_server", $w_user, $main_psw);
    $w_server->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
}

try {
    $r_server = new PDO("mysql:host=$main_host;dbname=$db_server", $r_user, $main_psw);
    $r_server->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
}

?> 
```

所以..直接问这个问题。创建 config.php 文件的正确方法是什么？我真的也希望其他人会发现这很有用。

**编辑**我还应该提到这可能不是全部..我可能还有更多的联系要建立..不仅是`accounts`和`server_setup`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:27:01.263

如果有人在您的项目中编写您不信任的代码，那么无论如何您都会遇到大麻烦。因此，不必担心回显变量。因此，您唯一关心的是如何保护您的 PHP 配置免受通过 Web 浏览器访问它们的人的影响。为此，我建议将所有配置文件放入`configs/`目录并添加`.htaccess`具有以下内容的文件：

```
Options -Indexes
<FilesMatch .*\.php$>
  order deny,allow
  deny from all
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:17:45.540

首先，永远不要在生产环境中回显异常消息，而是将它们放入可读的日志文件中。

如果您查看许多 MVC 框架，它们的 php 配置文件仅包含一个数组，该数组在文件末尾返回。

限制对这些配置文件的访问可以通过 .htaccess 和“拒绝所有”来完成

# php - 与多个开发人员和设计人员一起进行 PHP 网站开发的工作流程

> ID：14769986
> 
> 赞同：0
> 
> 时间：2013-02-08T10:00:18.413
> 
> 标签：php, html, git, svn, netbeans

我认为这必须是一个常见问题，但我无法找到一个简单的解决方案。问题是，我们正在与多个人合作开发一个网站，而不涉及任何版本控制。这会导致编辑冲突的明显问题，并且有人在没有简单的恢复方法的情况下搞砸了整个网站。目前有些使用 Filezila + Notepad++ 直接下载、添加和上传文件。其他人在其本地副本上使用 Netbeans 并在保存时自动上传文件。

我现在想做的是引入一个版本控制系统，它仍然让每个人都可以在实时系统上工作，但会检查冲突并允许将文件回滚到以前的版本。

我尝试使用将所有内容复制到 webroot 的 post-receive 挂钩来设置 GIT，但这样做失败了。此外，我认为 SVN 可能是一个更好的解决方案，因为每个人都只需要 checkout/commit 而不是 pull/commit/push。

*   是否可以按照我喜欢的方式设置 GIT/SVN？
*   有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:14:29.060

“常见”问题来自您让他们在现场网站上工作......
现场开发人员总会找到一种方法来破坏您的一天！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:23:44.533

我在开发服务器上有一个 SVN 服务器设置和一个 cron 作业，以每 60 秒拉出最新版本。然后我在实时服务器上有另一个脚本，它没有被croned，但我可以手动运行它，当我请求它时，它会将实时服务器更新到指定的修订版。

这允许开发人员几乎实时地在开发服务器上提交和自动测试，然后当我们在开发服务器上查看代码更改等并且我们对此感到满意时，我会在实时服务器上手动运行更新。

# python - Django / Python：捕获 MySQL IntegrityError

> ID：14769988
> 
> 赞同：2
> 
> 时间：2013-02-08T10:00:27.577
> 
> 标签：python, mysql, django

在 Django/Python 中，如何捕获特定的 mySQL 错误：“IntegrityError”：

```
try:
   cursor.execute(sql)
except IntegrityError:
    do_something 
```

不确定我应该导入什么以及从哪里导入。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T10:06:03.913

你试过了`from django.db import IntegrityError`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T21:38:17.743

[这](https://stackoverflow.com/questions/11293380/django-catching-integrity-error-and-showing-a-customized-message-using-template)是一个类似的回应。总之

```
from django.db import IntegrityError
from django.shortcuts import render_to_response

try:
# code that produces error
except IntegrityError as e:
return render_to_response("template.html", {"message": e.message}) 
```

# eclipse - Can't run local Sonar analysis in Eclipse: Sonar version 3.4 is required to perform local analysis

> ID：14769989
> 
> 赞同：1
> 
> 时间：2013-02-08T10:00:28.777
> 
> 标签：eclipse, jenkins, sonarqube

我在 Jenkins 和本地 Eclipse 上都运行 Sonar。最近我更新了 Eclipse 的 Sonar 插件，从那以后我不断收到上面提到的错误。我也更新了 Jenkins 上的插件，但没有解决问题。我可以从 Eclipse 连接到服务器并在那里查看声纳报告，但是本地分析不会开始。如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:10:02.220

您正在尝试连接到版本低于 3.4 的 Sonar 服务器。

如果您将 Sonar 服务器升级到最新版本 (3.4.1)，一切都会恢复正常。

# javascript - 在 JS 中获取函数的 Udefined 值

> ID：14769994
> 
> 赞同：0
> 
> 时间：2013-02-08T10:00:46.577
> 
> 标签：javascript, html

将未定义为方法 validateHallticket 的返回类型请检查代码并进行相应修改，以便当我单击提交按钮时，我应该能够获得适当的返回类型。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <title>4Cubes Site</title>
    <script type="text/javascript">
      function validateForm(form) {
      document.writeln(validateNames(form["firstname"]));         
      document.writeln(validateHallticket(form["hallticket"])); // getting undefined value 
          if (validateNames(form["firstname"]) && validateHallticket(form["hallticket"])) {
              form.sub`enter code here`mit();
          }
          else {
              alert("Please Fill the required Fields");
          }
      }

      function validateNames(inputField) {
          Names_help = document.getElementById('lastname_help');
          if (inputField.value.length == 0) {
              if (Names_help!= null) {
                  Names_help.innerHTML = "Please Enter a validate Name";              
                  return false;
              }
          }
          else {
              Names_help.innerHTML = "";
              return true;
          }

      }

      function validateHallticket(inputField) {

          var regex = /^\d{2}K91A\d{4}$/;
          var rs = regex.test(inputField.value);
          hallticket_help = document.getElementById('hallticket_help');

          if (!regex.test(inputField.value)) {
              if (hallticket_help != null) {
                  hallticket_help.innerHTML = "Enter a valid hallticket";
                  return false;
              }
          }
          else {
              hallticket_help.innerHTML = "";
              return true;
          }

      }
    </script>
  </head>
  <body>
    <center>
      <font face="Arabic Transparent" size="6" color="Teal">4cUBeS College</font>
    </center>

    <br></br>

    <br></br>

    <form method="post" action="servlet.do" name="myform">
      HallTicket:
      <input type="text" name="hallticket" id="hallticket"
             onblur="validateHallticket(this)"></input>
      <span id="hallticket_help" style="color:Red; font-style:italic;"> </span>
      <br></br>
      FirstName:
      <input type="text" name="firstname" id="firstname"
             onblur="validateNames(this)"></input>
      <span id="firstname_help" style="color:Red; font-style:italic;"> </span>
      <br></br>
      LastName:
      <input type="text" name="lastname" id="lastname"
             onblur="validateNames(this)"></input>
      <span id="lastname_help" style="font-style:italic; color:Red;"> </span>

      <center>
        <input type="button" value="SUBMIT" onclick="validateForm(this.form);"></input>

      </center>
    </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:04:37.263

这是因为，函数在 DOM 加载之前加载。尝试在`<script>`之前移动标签`</body>`，它可以工作。

**笔记**

1.  `return false;`无效时添加。
2.  将处理程序添加到标记的`onsubmit`事件中。`<form>`

### 完整代码

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <title>4Cubes Site</title>
  </head>
  <body>
    <center>
      <font face="Arabic Transparent" size="6" color="Teal">4cUBeS College</font>
    </center>

    <br></br>

    <br></br>

    <form method="post" action="servlet.do" name="myform" onsubmit="return false;">
      HallTicket:
      <input type="text" name="hallticket" id="hallticket"
             onblur="validateHallticket(this)"></input>
      <span id="hallticket_help" style="color:Red; font-style:italic;"> </span>
      <br></br>
      FirstName:
      <input type="text" name="firstname" id="firstname"
             onblur="validateNames(this)"></input>
      <span id="firstname_help" style="color:Red; font-style:italic;"> </span>
      <br></br>
      LastName:
      <input type="text" name="lastname" id="lastname"
             onblur="validateNames(this)"></input>
      <span id="lastname_help" style="font-style:italic; color:Red;"> </span>

      <center>
        <input type="button" value="SUBMIT" onclick="return validateForm(this.form);"></input>

      </center>
    </form>
    <script type="text/javascript">
      function validateForm(form) {
      document.writeln(validateNames(form["firstname"]));         
      document.writeln(validateHallticket(form["hallticket"])); // getting undefined value 
          if (validateNames(form["firstname"]) && validateHallticket(form["hallticket"])) {
              form.submit();
          }
          else {
              alert("Please Fill the required Fields");
          }
        return false;
      }

      function validateNames(inputField) {
          Names_help = document.getElementById('lastname_help');
          if (inputField.value.length == 0) {
              if (Names_help!= null) {
                  Names_help.innerHTML = "Please Enter a validate Name";              
                  return false;
              }
          }
          else {
              Names_help.innerHTML = "";
              return true;
          }
        return false;
      }

      function validateHallticket(inputField) {

          var regex = /^\d{2}K91A\d{4}$/;
          var rs = regex.test(inputField.value);
          hallticket_help = document.getElementById('hallticket_help');

          if (!regex.test(inputField.value)) {
              if (hallticket_help != null) {
                  hallticket_help.innerHTML = "Enter a valid hallticket";
                  return false;
              }
          }
          else {
              hallticket_help.innerHTML = "";
              return true;
          }
          return false;
       }
    </script>
  </body>
</html> 
```

### 小提琴：http: [//jsbin.com/apuyaw/1](http://jsbin.com/apuyaw/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:05:08.067

将您的脚本标签放在结束正文标签之前，因为您目前没有元素的引用

```
<body>
<script>
your code in here
</script>
</body> 
```

# truecrypt - True crypt 启动时自动挂载不起作用

> ID：14769997
> 
> 赞同：1
> 
> 时间：2013-02-08T10:01:00.777
> 
> 标签：truecrypt

从昨天开始，我的 true-crypt 分区每次都不会在我的操作系统启动时自动挂载（有时有效，有时无效）。

*   是的，它们被设置为系统收藏夹，并设置了启动时安装复选框。
*   是的，他们有相同的密码，使用相同的 (EN INTL) 布局键入。
*   是的，它在几次之前以某种方式起作用。

谢谢您的帮助。

编辑：操作系统：Windows 8

**更新** 它似乎只是在冷启动时不起作用。

温暖的开始似乎有效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:35:46.750

我在我的 Windows 8 笔记本电脑上遇到了这个问题。我将问题跟踪到 Windows 8 的新关机过程。当你这样做时，它不会完全关机/启动，只有某种混合关机（[https://superuser.com/questions/496241/are-there- Windows-8-hybrid-shutdown 的缺点](https://superuser.com/questions/496241/are-there-downsides-to-windows-8-hybrid-shutdown)）

我发现如果我使用普通的 Charm -> Settings -> Power -> Shutdown，当我进入桌面时，它会无法加载加密分区。

但是，如果您使用命令行“shutdown.exe /s /t 0”来关闭它，它会在您下次启动时可靠地加载。

我被迫以这种方式修复它，因为我的 Dropbox 位于加密分区上，并且 Dropbox 会抱怨它再也找不到该文件夹​​（与 Google Drive 和 SkyDrive 相同，只是更糟）。

这可能会解决这个问题，但我还没有尝试过（[http://www.askvg.com/fix-windows-8-restart-and-shutdown-problems-by-disabling-hybrid-shutdown-feature/](http://www.askvg.com/fix-windows-8-restart-and-shutdown-problems-by-disabling-hybrid-shutdown-feature/)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-15T13:02:45.790

Win 8.x 接缝提供快速重启的特殊关闭选项。这也会导致引导驱动程序上的另一个特殊文件（除了炒作和页面）。因此，“冷启动”并不是真正的冷启动，而是类似于“光”的过度状态。

在电源选项中您可以尝试禁用选项“开启快速启动（推荐）”选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-01T07:27:54.693

除了禁用混合启动/关闭之外，还有另一种方法。如果您转到 TrueCrypt、收藏夹、组织系统收藏卷，然后勾选*仅允许管理员查看和卸载系统收藏卷*选项，您也可以使其始终如一地工作。 [来源](https://github.com/veracrypt/VeraCrypt/issues/8)。