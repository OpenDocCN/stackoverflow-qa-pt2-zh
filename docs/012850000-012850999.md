# StackOverflow 问答 12850000-12850999

# scala - 如何使用 Scala 框架处理十进制数

> ID：12850000
> 
> 赞同：2
> 
> 时间：2012-10-11T23:14:47.017
> 
> 标签：scala, playframework, decimal

我希望能够将十进制数字输入到游戏表格中。我想要以下映射，但它无法编译。

```
mapping(
 "id" -> ignored(NotAssigned:Pk[Long]),
 "date" -> date("yyyy-MM-dd"),
 "amount" -> decimal,
 "description" -> nonEmptyText
)(Expense.apply)(Expense.unapply) 
```

一定有办法的。我对 Scala 和 Play 很陌生。任何指针，非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T06:30:18.563

`of[T]`object 上有一个方法[`Forms`](http://www.playframework.org/documentation/api/2.0.4/scala/index.html#play.api.data.Forms%24)，它创建类型的映射`T`。在您的情况下，它将是`of[Int]`：

```
mapping(
 "id" -> ignored(NotAssigned:Pk[Long]),
 "date" -> date("yyyy-MM-dd"),
 "amount" -> of[Int],
 "description" -> nonEmptyText
)(Expense.apply)(Expense.unapply) 
```

还有两个辅助方法

```
val number: Mapping[Int] = of[Int]
val longNumber: Mapping[Long] = of[Long] 
```

这只是参考通用`of`函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-05T16:30:59.610

从[这个拉取请求](https://github.com/Timshel/Play20/commit/b78865f0e759cf02d36b75986d9b686ac1eff04e)开始，您现在可以将[BigDecimal](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)指定为一种输入。修改 OP 的示例：

```
mapping(
 "id" -> ignored(NotAssigned:Pk[Long]),
 "date" -> date("yyyy-MM-dd"),
 "amount" -> bigDecimal,
 "description" -> nonEmptyText
)(Expense.apply)(Expense.unapply) 
```

请注意**bigDecimal**映射类型。

要获得更高的精度和比例，您可以将它们指定为：

```
 "amount" -> bigDecimal(10, 2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T09:29:23.457

这是您需要的隐式的实际代码。我把它们放在一个单独的对象中，因为我自己的类型也有很多。能够以`Form`这种方式在 s 中使用自定义类型非常方便。

```
object FormFieldImplicits {
  // Code merged into future Play release
  //
  implicit def doubleFormat = new Formatter[Double] {
    def bind(key: String, data: Map[String, String]) = Right(data(key).toDouble)
    def unbind(key: String, value: Double) = Map(key -> value.toString)
  }

  ...
} 
```

然后就`import FormFieldImplicits._`在你想要使用 a`mapping` `of[Double]`和 Bob 的你的叔叔的控制器中，如下所示

```
def impactMapping = mapping(
    "value" -> of[Double],
    "percent" -> of[Double])(Impact.apply)(Impact.unapply) 
```

# objective-c - NSString：blabla.DDD+DDDD 的正则表达式，其中 D 是数字

> ID：12850001
> 
> 赞同：0
> 
> 时间：2012-10-11T23:15:01.300
> 
> 标签：objective-c, ios, regex, nsstring

我需要一个正则表达式来检查字符串是否具有这种模式：

[一些随机字符].DDD+DDDD

它可以以随机字符开头，但以点结尾。然后是三位数字，然后是一个加号，然后是四位数字。如何构造正则表达式并检查 NSString 是否具有这种模式？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:34:59.430

这应该是您正在寻找的。

```
NSString *regex = @"(^[^.]*\.[0-9]{3}\+[0-9]{4}$)";
NSPredicate *pred = [NSPRedicate predicateWithFormat:@"SELF MATCHES %@", regex];
if ([pred evaluateWithObject:mystring])
{
  //do something
} 
```

有很多很好的正则表达式生成器来测试你的正则表达式。例如：[http ://rubular.com](http://rubular.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:43:22.783

正确的正则表达式是`^[^.]*\.[0-9]{3}\+[0-9]{4}$`

其他两个答案都忘记转义某些字符。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-11T23:22:57.373

表达式 ^[^.]*\.[0-9]{3}\+[0-9]{4}$ 应该这样做。

^ 表示字符串 [^.]*\ 的开头。表示零个或多个非句点字符后跟一个句点 [0-9]{3} 表示 3 位 (0-9) \+ 表示加号 [0-9]{4} 表示 4 位 $ 表示字符串结尾

# c# - ListBox 不显示 XML 文件中的数据

> ID：12850002
> 
> 赞同：0
> 
> 时间：2012-10-11T23:15:03.470
> 
> 标签：c#, xml, listbox

问题：我将数据保存到 XML 文件中，但是当我重新打开应用程序时，XML 文件中的数据应该会填充我的列表框，但没有显示任何内容。我已经在这里待了2个小时，找不到问题。

我加载 xml 文件的代码：

```
public void Load()
{
    XDocument myDoc = XDocument.Load(".../.../parking.xml");

    var ticks = from xElem in myDoc.Descendants("Ticket")
               select new Ticket
               {
                   TimeIn = Convert.ToDateTime(xElem.Element("TimeIn").Value),
                   TicketNum = Convert.ToInt32(xElem.Element("TicketNumber").Value),
               };

    this.Clear();

    AddRange(ticks);
} 
```

我的代码尝试填充列表框：

```
{
        newList = new TickList();

        newList.Load();

        foreach (var nTick in newList)
        {
            spotList.Items.Add(nTick.ToString());
        }
    } 
```

编辑： http: [//pastebin.com/YwPj0Nxc](http://pastebin.com/YwPj0Nxc)

在此站点上找不到格式化该文件的好方法，但那是 XML 文件。

**Smurf 编辑**：添加 pastebin XML

```
<?xml version="1.0" encoding="utf-8"?>
<Tickets>
  <Ticket>
    <TicketNum>1</TicketNum>
    <TimeIn>2012-10-11T17:49:49.896445-05:00</TimeIn>
  </Ticket>
  <Ticket>
    <TicketNum>2</TicketNum>
    <TimeIn>2012-10-11T17:49:50.2714664-05:00</TimeIn>
  </Ticket>
  <Ticket>
    <TicketNum>3</TicketNum>
    <TimeIn>2012-10-11T17:49:50.4304755-05:00</TimeIn>
  </Ticket>
  <Ticket>
    <TicketNum>4</TicketNum>
    <TimeIn>2012-10-11T17:49:50.5944849-05:00</TimeIn>
  </Ticket>
</Tickets> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:19:27.353

不查看 XML 文件本身就无法回答。确保所有属性和名称与查询匹配。在将 TicketList 绑定到 ListBox 之前，请确保它有数据。您需要大量调试。我认为问题在于您的 Linq 查询。您需要简化 LINQ 查询。

更新：您的元素名称不匹配。我认为 LINQ 也缺少它的外部“Tickets”元素。它应该进入“Tickets”中的每个元素。它说“TicketNum”，但 XML 有“TicketNumber”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:14:04.057

看起来 XML 与 LINQ 中有拼写错误：

```
Convert.ToInt32( xElem.Element( "TicketNumber" ).Value ) 
```

应该：

```
Convert.ToInt32( xElem.Element( "TicketNum" ).Value ) 
```

# android - 有没有人看到或知道此错误消息的原因？Android 模拟器无法启动

> ID：12850006
> 
> 赞同：3
> 
> 时间：2012-10-11T23:15:15.550
> 
> 标签：android

当我尝试启动 AVD -any- AVD 时，模拟器会吐出这个错误和一个巨大的回溯：

```
*** glibc detected *** /opt/android-sdk/tools/emulator-arm: munmap_chunk(): invalid pointer: 0x082550ca ***
======= Backtrace: =========
/usr/lib32/libc.so.6(+0x75922)[0xf748a922]
/usr/lib32/libc.so.6(+0x75fe5)[0xf748afe5]
/opt/android-sdk/tools/emulator-arm[0x80df9d2]
/opt/android-sdk/tools/emulator-arm[0x80dfd0c]
/opt/android-sdk/tools/emulator-arm[0x80fb1fb]
/opt/android-sdk/tools/emulator-arm[0x80fb329]
/opt/android-sdk/tools/emulator-arm[0x80fed74]
/opt/android-sdk/tools/emulator-arm[0x80feff9]
/opt/android-sdk/tools/emulator-arm[0x80b5632]
/opt/android-sdk/tools/emulator-arm[0x80da79f]
/opt/android-sdk/tools/emulator-arm[0x80daa5f]
/opt/android-sdk/tools/emulator-arm[0x8131cb3]
/opt/android-sdk/tools/emulator-arm[0x813234f]
/opt/android-sdk/tools/emulator-arm[0x814402d]
[0xebeee67d]
======= Memory map: ========
08048000-082d8000 r-xp 00000000 08:01 2896026                            /opt/android-sdk/tools/emulator-arm
082d8000-082dc000 rw-p 0028f000 08:01 2896026                            /opt/android-sdk/tools/emulator-arm
082dc000-084d6000 rw-p 00000000 00:00 0 
084d6000-084d7000 rwxp 00000000 00:00 0 
084d7000-08514000 rw-p 00000000 00:00 0 
095b0000-09dc1000 rw-p 00000000 00:00 0                                  [heap]
b7be4000-b7be5000 rw-p 00000000 00:00 0 
b7be5000-b7efe000 rw-s 00000000 00:04 914358272                          /SYSV00000000 (deleted)
b7efe000-bbeff000 r--s 00000000 00:0f 8877                               /dev/shm/pulse-shm-3330042333
bbeff000-bbf00000 ---p 00000000 00:00 0 
bbf00000-bc700000 rw-p 00000000 00:00 0                                  [stack:17238]
bc700000-bc721000 rw-p 00000000 00:00 0 
bc721000-bc800000 ---p 00000000 00:00 0 
bc80a000-bc80b000 ---p 00000000 00:00 0 
bc80b000-bd00b000 rw-p 00000000 00:00 0                                  [stack:17237]
bd00b000-c100c000 rw-s 00000000 00:0f 619464                             /dev/shm/pulse-shm-4256856931
c100c000-c100d000 ---p 00000000 00:00 0 
c100d000-c180d000 rw-p 00000000 00:00 0                                  [stack:17236]
c180d000-c580e000 rw-s 00000000 00:0f 620934                             /dev/shm/pulse-shm-22245207
c580e000-c5973000 r-xp 00000000 08:01 1844920                            /usr/lib32/libvorbisenc.so.2.0.9
c5973000-c5984000 r--p 00165000 08:01 1844920                            /usr/lib32/libvorbisenc.so.2.0.9
c5984000-c5985000 rw-p 00176000 08:01 1844920                            /usr/lib32/libvorbisenc.so.2.0.9
c5afd000-eb700000 rw-p 00000000 00:00 0 
eb700000-f3700000 rwxp 00000000 00:00 0 
f3700000-f3721000 rw-p 00000000 00:00 0 
f3721000-f3800000 ---p 00000000 00:00 0 
f3819000-f382c000 r-xp 00000000 08:01 1842908                            /usr/lib32/libresolv-2.16.so
f382c000-f382d000 ---p 00013000 08:01 1842908                            /usr/lib32/libresolv-2.16.so
f382d000-f382e000 r--p 00013000 08:01 1842908                            /usr/lib32/libresolv-2.16.so
f382e000-f382f000 rw-p 00014000 08:01 1842908                            /usr/lib32/libresolv-2.16.so
f382f000-f3831000 rw-p 00000000 00:00 0 
f3831000-f3846000 r-xp 00000000 08:01 1842907                            /usr/lib32/libnsl-2.16.so
f3846000-f3847000 r--p 00014000 08:01 1842907                            /usr/lib32/libnsl-2.16.so
f3847000-f3848000 rw-p 00015000 08:01 1842907                            /usr/lib32/libnsl-2.16.so
f3848000-f384a000 rw-p 00000000 00:00 0 
f384a000-f3850000 r-xp 00000000 08:01 1844902                            /usr/lib32/libogg.so.0.8.0
f3850000-f3851000 r--p 00005000 08:01 1844902                            /usr/lib32/libogg.so.0.8.0
f3851000-f3852000 rw-p 00006000 08:01 1844902                            /usr/lib32/libogg.so.0.8.0
f3852000-f387d000 r-xp 00000000 08:01 1844915                            /usr/lib32/libvorbis.so.0.4.6
f387d000-f387e000 r--p 0002a000 08:01 1844915                            /usr/lib32/libvorbis.so.0.4.6
f387e000-f387f000 rw-p 0002b000 08:01 1844915                            /usr/lib32/libvorbis.so.0.4.6
f387f000-f38ce000 r-xp 00000000 08:01 1844912                            /usr/lib32/libFLAC.so.8.2.0
f38ce000-f38cf000 ---p 0004f000 08:01 1844912                            /usr/lib32/libFLAC.so.8.2.0
f38cf000-f38d0000 r--p 0004f000 08:01 1844912                            /usr/lib32/libFLAC.so.8.2.0
f38d0000-f38d1000 rw-p 00050000 08:01 1844912                            /usr/lib32/libFLAC.so.8.2.0
f38d1000-f38d2000 ---p 00000000 00:00 0 
f38d2000-f40d2000 rw-p 00000000 00:00 0                                  [stack:17235]
f40d2000-f413f000 r-xp 00000000 08:01 1844928                            /usr/lib32/libsndfile.so.1.0.25
f413f000-f4141000 r--p 0006c000 08:01 1844928                            /usr/lib32/libsndfile.so.1.0.25
f4141000-f4142000 rw-p 0006e000 08:01 1844928                            /usr/lib32/libsndfile.so.1.0.25
f4142000-f4146000 rw-p 00000000 00:00 0 
f4146000-f418f000 r-xp 00000000 08:01 1844877                            /usr/lib32/libdbus-1.so.3.7.2
f418f000-f4190000 r--p 00048000 08:01 1844877                            /usr/lib32/libdbus-1.so.3.7.2
f4190000-f4191000 rw-p 00049000 08:01 1844877                            /usr/lib32/libdbus-1.so.3.7.2
f4191000-f41f5000 r-xp 00000000 08:01 1844945                            /usr/lib32/pulseaudio/libpulsecommon-2.1.so
f41f5000-f41f6000 r--p 00064000 08:01 1844945                            /usr/lib32/pulseaudio/libpulsecommon-2.1.so
f41f6000-f41f7000 rw-p 00065000 08:01 1844945                            /usr/lib32/pulseaudio/libpulsecommon-2.1.so
f41f7000-f43f7000 rw-s 8688d000 00:05 12939                              /dev/nvidia0
f43f9000-f45f9000 rw-s 1b1954000 00:05 12939                             /dev/nvidia0
f45f9000-f47f9000 rw-s 1ce2ce000 00:05 12939                             /dev/nvidia0
f47f9000-f48f9000 rw-s 15d57b000 00:05 12939                             /dev/nvidia0
f48f9000-f48fd000 rw-s 2127c5000 00:05 12939                             /dev/nvidia0
f48fd000-f491d000 rw-s c80e0000 00:05 12939                              /dev/nvidia0
f491d000-f491e000 rw-s cfeed000 00:05 12939                              /dev/nvidia0
f491e000-f495e000 rw-s 1fe97a000 00:05 12939                             /dev/nvidia0
f495e000-f497e000 rw-s 1b1a26000 00:05 12939                             /dev/nvidia0
f497e000-f49be000 rw-s 203bb5000 00:05 12939                             /dev/nvidia0
f49be000-f49de000 rw-s 209291000 00:05 12939                             /dev/nvidia0
f49de000-f49df000 rw-s cfeeb000 00:05 12939                              /dev/nvidia0
f49df000-f4a1f000 rw-s 1a6d61000 00:05 12939                             /dev/nvidia0
f4a1f000-f4a3f000 rw-s 199d13000 00:05 12939                             /dev/nvidia0
f4a3f000-f4ad5000 rw-p 00000000 00:00 0 
f4adc000-f4ae1000 r-xp 00000000 08:01 1844889                            /usr/lib32/libasyncns.so.0.3.1
f4ae1000-f4ae2000 r--p 00004000 08:01 1844889                            /usr/lib32/libasyncns.so.0.3.1
f4ae2000-f4ae3000 rw-p 00005000 08:01 1844889                            /usr/lib32/libasyncns.so.0.3.1
f4ae3000-f4aea000 r-xp 00000000 08:01 1844882                            /usr/lib32/libjson.so.0.0.1
f4aea000-f4aeb000 r--p 00006000 08:01 1844882                            /usr/lib32/libjson.so.0.0.1
f4aeb000-f4aec000 rw-p 00007000 08:01 1844882                            /usr/lib32/libjson.so.0.0.1
f4aec000-f4b39000 r-xp 00000000 08:01 1844939                            /usr/lib32/libpulse.so.0.14.3
f4b39000-f4b3a000 ---p 0004d000 08:01 1844939                            /usr/lib32/libpulse.so.0.14.3
f4b3a000-f4b3b000 r--p 0004d000 08:01 1844939                            /usr/lib32/libpulse.so.0.14.3
f4b3b000-f4b3c000 rw-p 0004e000 08:01 1844939                            /usr/lib32/libpulse.so.0.14.3
f4b3c000-f4b3f000 r-xp 00000000 08:01 1844940                            /usr/lib32/libpulse-simple.so.0.0.3
f4b3f000-f4b40000 r--p 00002000 08:01 1844940                            /usr/lib32/libpulse-simple.so.0.0.3
f4b40000-f4b41000 rw-p 00003000 08:01 1844940                            /usr/lib32/libpulse-simple.so.0.0.3
f4b41000-f4bc2000 rw-p 00000000 00:00 0 
f4bc2000-f4bcd000 r-xp 00000000 08:01 1842901                            /usr/lib32/libnss_files-2.16.so
f4bcd000-f4bce000 r--p 0000a000 08:01 1842901                            /usr/lib32/libnss_files-2.16.so
f4bce000-f4bcf000 rw-p 0000b000 08:01 1842901                            /usr/lib32/libnss_files-2.16.so
f4bf6000-f4c77000 rw-p 00000000 00:00 0 
f4c77000-f4caf000 r-xp 00000000 08:01 2896245                            /opt/android-sdk/tools/lib/libGLES_V2_translator.so
f4caf000-f4cb0000 rw-p 00038000 08:01 2896245                            /opt/android-sdk/tools/lib/libGLES_V2_translator.so
f4cb0000-f4ceb000 r-xp 00000000 08:01 2896244                            /opt/android-sdk/tools/lib/libGLES_CM_translator.so
f4ceb000-f4cec000 rw-p 0003a000 08:01 2896244                            /opt/android-sdk/tools/lib/libGLES_CM_translator.so
f4cec000-f4cf4000 rw-p 00000000 00:00 0 
f4cf4000-f6981000 r-xp 00000000 08:01 1843359                            /usr/lib32/libnvidia-glcore.so.304.51
f6981000-f69e6000 rwxp 01c8d000 08:01 1843359                            /usr/lib32/libnvidia-glcore.so.304.51
f69e6000-f69f9000 rwxp 00000000 00:00 0 
f69f9000-f69fc000 r-xp 00000000 08:01 1843357                            /usr/lib32/libnvidia-tls.so.304.51
f69fc000-f69fd000 rw-p 00002000 08:01 1843357                            /usr/lib32/libnvidia-tls.so.304.51
f69fd000-f6aaa000 r-xp 00000000 08:01 1843355                            /usr/lib32/libGL.so.304.51
f6aaa000-f6aca000 rwxp 000ac000 08:01 1843355                            /usr/lib32/libGL.so.304.51
f6aca000-f6ad9000 rwxp 00000000 00:00 0 
f6ada000-f6adb000 rw-s 2127c4000 00:05 12939                             /dev/nvidia0
f6adb000-f6adf000 rw-s 209326000 00:05 12939                             /dev/nvidia0
f6adf000-f6ae0000 rw-s da641000 00:05 12939                              /dev/nvidia0
f6ae0000-f6ae1000 rw-s 1c4a0c000 00:05 12939                             /dev/nvidia0
f6ae1000-f6ae2000 rw-s 2125bf000 00:05 12939                             /dev/nvidia0
f6ae3000-f6b00000 rw-s 233b59000 00:05 12939                             /dev/nvidia0
f6b00000-f6b2a000 r-xp 00000000 08:01 2896247                            /opt/android-sdk/tools/lib/libEGL_translator.so
f6b2a000-f6b2b000 rw-p 00029000 08:01 2896247                            /opt/android-sdk/tools/lib/libEGL_translator.so
f6b2b000-f6b2c000 rw-p 00000000 00:00 0 
f6b2c000-f6b6f000 r-xp 00000000 08:01 2896246                            /opt/android-sdk/tools/lib/libOpenglRender.so
f6b6f000-f6b72000 rw-p 00043000 08:01 2896246                            /opt/android-sdk/tools/lib/libOpenglRender.so
f6b72000-f7276000 rw-p 00000000 00:00 0 
f7276000-f727a000 r-xp 00000000 08:01 1843309                            /usr/lib32/libXfixes.so.3.1.0
f727a000-f727b000 r--p 00003000 08:01 1843309                            /usr/lib32/libXfixes.so.3.1.0
f727b000-f727c000 rw-p 00004000 08:01 1843309                            /usr/lib32/libXfixes.so.3.1.0
f727c000-f7285000 r-xp 00000000 08:01 1843427                            /usr/lib32/libXcursor.so.1.0.2
f7285000-f7286000 r--p 00008000 08:01 1843427                            /usr/lib32/libXcursor.so.1.0.2
f7286000-f7287000 rw-p 00009000 08:01 1843427                            /usr/lib32/libXcursor.so.1.0.2
f7287000-f7290000 r-xp 00000000 08:01 1843433                            /usr/lib32/libXrandr.so.2.2.0
f7290000-f7291000 r--p 00008000 08:01 1843433                            /usr/lib32/libXrandr.so.2.2.0
f7291000-f7292000 rw-p 00009000 08:01 1843433                            /usr/lib32/libXrandr.so.2.2.0
f7292000-f729a000 r-xp 00000000 08:01 1843424                            /usr/lib32/libXrender.so.1.3.0
f729a000-f729b000 r--p 00007000 08:01 1843424                            /usr/lib32/libXrender.so.1.3.0
f729b000-f729c000 rw-p 00008000 08:01 1843424                            /usr/lib32/libXrender.so.1.3.0
f729c000-f72ac000 r-xp 00000000 08:01 1843342                            /usr/lib32/libXext.so.6.4.0
f72ac000-f72ad000 r--p 0000f000 08:01 1843342                            /usr/lib32/libXext.so.6.4.0
f72ad000-f72ae000 rw-p 00010000 08:01 1843342                            /usr/lib32/libXext.so.6.4.0
f72ae000-f72b3000 r-xp 00000000 08:01 1843198                            /usr/lib32/libXdmcp.so.6.0.0
f72b3000-f72b4000 r--p 00004000 08:01 1843198                            /usr/lib32/libXdmcp.so.6.0.0
f72b4000-f72b5000 rw-p 00005000 08:01 1843198                            /usr/lib32/libXdmcp.so.6.0.0
f72b5000-f72b7000 r-xp 00000000 08:01 1843202                            /usr/lib32/libXau.so.6.0.0
f72b7000-f72b8000 r--p 00001000 08:01 1843202                            /usr/lib32/libXau.so.6.0.0
f72b8000-f72b9000 rw-p 00002000 08:01 1843202                            /usr/lib32/libXau.so.6.0.0
f72b9000-f72d9000 r-xp 00000000 08:01 1843251                            /usr/lib32/libxcb.so.1.1.0
f72d9000-f72da000 r--p 0001f000 08:01 1843251                            /usr/lib32/libxcb.so.1.1.0
f72da000-f72db000 rw-p 00020000 08:01 1843251                            /usr/lib32/libxcb.so.1.1.0
f72db000-f740e000 r-xp 00000000 08:01 1843302                            /usr/lib32/libX11.so.6.3.0
f740e000-f740f000 r--p 00132000 08:01 1843302                            /usr/lib32/libX11.so.6.3.0
f740f000-f7412000 rw-p 00133000 08:01 1843302                            /usr/lib32/libX11.so.6.3.0
f7412000-f7415000 rw-p 00000000 00:00 0 
f7415000-f75b9000 r-xp 00000000 08:01 1842853                            /usr/lib32/libc-2.16.so
f75b9000-f75bb000 r--p 001a4000 08:01 1842853                            /usr/lib32/libc-2.16.so
f75bb000-f75bc000 rw-p 001a6000 08:01 1842853                            /usr/lib32/libc-2.16.so
f75bc000-f75bf000 rw-p 00000000 00:00 0 
f75bf000-f75d9000 r-xp 00000000 08:01 1843408                            /usr/lib32/libgcc_s.so.1
f75d9000-f75da000 rw-p 00019000 08:01 1843408                            /usr/lib32/libgcc_s.so.1
f75da000-f75dc000 r-xp 00000000 08:01 1842910                            /usr/lib32/libutil-2.16.so
f75dc000-f75dd000 r--p 00001000 08:01 1842910                            /usr/lib32/libutil-2.16.so
f75dd000-f75de000 rw-p 00002000 08:01 1842910                            /usr/lib32/libutil-2.16.so
f75de000-f761b000 r-xp 00000000 08:01 1842906                            /usr/lib32/libm-2.16.so
f761b000-f761c000 r--p 0003d000 08:01 1842906                            /usr/lib32/libm-2.16.so
f761c000-f761d000 rw-p 0003e000 08:01 1842906                            /usr/lib32/libm-2.16.so
f761d000-f761e000 rw-p 00000000 00:00 0 
f761e000-f76fa000 r-xp 00000000 08:01 1843412                            /usr/lib32/libstdc++.so.6.0.17
f76fa000-f76fb000 ---p 000dc000 08:01 1843412                            /usr/lib32/libstdc++.so.6.0.17
f76fb000-f76ff000 r--p 000dc000 08:01 1843412                            /usr/lib32/libstdc++.so.6.0.17
f76ff000-f7700000 rw-p 000e0000 08:01 1843412                            /usr/lib32/libstdc++.so.6.0.17
f7700000-f7707000 rw-p 00000000 00:00 0 
f7707000-f770e000 r-xp 00000000 08:01 1842909                            /usr/lib32/librt-2.16.so 
```

我找不到其他有这个问题的人，我不知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T00:26:29.500

这可能是因为您没有本地时间文件（我遇到了同样的问题）

要修复它，您需要创建它：

```
ln -sf /usr/share/zoneinfo/US/Eastern /etc/localtime 
```

我希望它会帮助你

# algorithm - SELECT算法分析中的递归

> ID：12850008
> 
> 赞同：2
> 
> 时间：2012-10-11T23:15:17.207
> 
> 标签：algorithm, clrs

在 CLRS中，对查找数组中第 i 个最小元素`(2/e, page 191, section 9.3)`的算法的分析通过以下归纳证明给出：`SELECT`

```
1\.  T(n) <= c celing(n/5) + c(7n/10 + 6) + an
2\.       <= cn/5 + c + 7cn/10 + 6c + an
3\.       = 9cn/10 + 7c + an
4\.       = cn + (-cn/10 + 7c + an)
5\.       = cn,  when -cn/10 + 7c + an <= 0 
```

我理解算法，但证明中的两个操作让我有点难过。

**问题 1**：在第 2 行中，额外的 c 项是从哪里来的（第二项）？c 乘以`(7n/10 + 6)`项给出`7cn/10 + 6c`。

**问题 2**：在第 4 行中，我们是如何从`9cn/10`to得到的`cn + (-cn/10 ...)`？9 系数去哪了？

**这不是家庭作业**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:35:27.790

1.  额外`c`的来自`c*celing(n/5)` - 考虑`n/5 = 10.2`- 那么`c * ceiling(n/5) = 11c > cn/5`我们需要添加额外的`c`.
2.  `9cn/10 = (10-1)cn/10 = 10cn/10 - cn/10 = cn - cn/10 ... = cn + (-cn/10 ...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-18T14:04:19.583

只是为了为第 2 行添加更多信息。我们有`ceiling(x) <= x + 1`。因为 x 舍入到下一个整数。假设`m <= x < m+1`，那么`ceiling(x) = m+1,x+1 >= m+1`，所以我们有`ceiling(x) <= x + 1`。在那种情况下，`c * ceiling(n/5)`必须小于或等于`c*(n/5+1)`，然后你得到了额外的`c`。

# apache - URL重写和参考学习apache mod_rewrite？

> ID：12850013
> 
> 赞同：-2
> 
> 时间：2012-10-11T23:15:44.457
> 
> 标签：apache, url, mod-rewrite, url-rewriting

请原谅我提出了一个关于 url 重写的愚蠢问题。

我有一个网址

[https://example.com/?hash=3aa24be66484f1a39c72287fc994c7865e0a6126f1e678c94a1da5e2eb59bdb1](https://example.com/?hash=3aa24be66484f1a39c72287fc994c7865e0a6126f1e678c94a1da5e2eb59bdb1)

我必须配置 .htaccess，即以下网址将是有效链接 [https://example.com/hash/3aa24be66484f1a39c72287fc994c7865e0a6126f1e678c94a1da5e2eb59bdb1](https://example.com/hash/3aa24be66484f1a39c72287fc994c7865e0a6126f1e678c94a1da5e2eb59bdb1)

而已！

这是我第一次遇到 url 重写，在 web 中找不到好的资源从零开始学习。**你能给我一个建议从哪里开始吗？**

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T00:12:17.433

阅读文档：

[Apache 2.2 mod_rewrite 模块参考](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)

[Apache 2.2 重写指南](http://httpd.apache.org/docs/2.2/rewrite/)

接下来使用google：[apache mod_rewrite教程](http://www.google.com/search?hl=en&safe=off&q=apache+mod_rewrite+tutorial&oq=apache+mod_rewrite)

您的具体问题：

```
RewriteEngine On
RewriteRule ^/?hash/(.*)$ /?hash=$1 [L] 
```

此外，要澄清什么是“重写”和“重定向”，[请参见此答案的顶部](https://stackoverflow.com/a/11711948/851273)。

# android - Mono for Android - ZIP 数据压缩

> ID：12850016
> 
> 赞同：1
> 
> 时间：2012-10-11T23:15:48.683
> 
> 标签：android, zip, compression, unzip

我正在尝试*解压缩*服务器发送的一些大文件，然后经过一些处理，将*压缩*后的文件发送回服务器，始终使用***ZIP***格式。

我想知道是否有一些 zip 压缩/解压缩实用程序方法可以在我的代码中使用，以便在几行中完成后者。

我知道*DotNetZip*或*SharpZipLib*之类的解决方案，但我想避免使用外部库或必须跟踪额外的 .dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:23:18.457

Apparently there is no compression/decompression utility method built-in in *Mono For Android* based on the ZIP format, so I ended up integrating ***SharpZipLib*** to my project and using the *InflaterInputStream.Read()* method, which works great for me, as referenced in the following link:

[How to use ICSharpCode.ZipLib with stream?](https://stackoverflow.com/questions/741591/how-to-use-icsharpcode-ziplib-with-stream)

Cheers!

# jquery - jQuery - 链接到 ul.tabs 之外的选项卡

> ID：12850017
> 
> 赞同：3
> 
> 时间：2012-10-11T23:15:50.013
> 
> 标签：jquery, html, html-lists, hyperlink

如何更改下面的脚本，以便可以在`ul.tabs`?

任何帮助将不胜感激。

```
<script type="text/javascript">
    $(document).ready(function() {
        var $tabContent = $(".tab-content"),
            $tabs = $("ul.tabs li"),
            tabId;

        $tabContent.hide();
        $("ul.tabs li:first").addClass("active").show();
        $tabContent.first().show();

        $tabs.click(function() {
            var $this = $(this);
            $tabs.removeClass("active");
            $this.addClass("active");
            $tabContent.hide();
            var activeTab = $this.find("a").attr("href");
            $(activeTab).fadeIn();
            //return false;
        });

        // Grab the ID of the .tab-content that the hash is referring to
        tabId = $(window.location.hash).closest('.tab-content').attr('id');

        // Find the anchor element to "click", and click it
        $tabs.find('a[href=#' + tabId + ']').click();
    })

    $('a').not('.tabs li a').on('click', function(evt) {
        evt.preventDefault();
        var whereTo = $(this).attr('goto');
        $tabs = $("ul.tabs li");
        $tabs.find('a[href=#' + whereTo + ']').trigger('click');
        //alert(attr('name'));
    //alert( $('#'+whereTo+' a').offset().top );
        $('html, body').animate({
            scrollTop: $('#'+whereTo+' a').offset().top
        });

    });

    $(function() {
        $('a.refresh').live("click", function() {
            location.reload();
        });
    });
</script> 
```

代码来自：http: [//jsfiddle.net/dhirajbodicherla/TGMDd/2/](http://jsfiddle.net/dhirajbodicherla/TGMDd/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:19:18.897

它已经为您准备好了，只需指定与您要转到的选项卡`goto`匹配的属性：`href`

```
<a href="#" goto="my_tab">Clicky</a> 
```

将转到设置为的选项卡

```
<ul class="tabs">
    <li><a href="#my_tab">It goes here</a></li> 
```

# php - 允许脚本在 cms 内执行

> ID：12850022
> 
> 赞同：0
> 
> 时间：2012-10-11T23:16:05.553
> 
> 标签：php, .htaccess

我有一个基于 Silverstripe cms 的站点设置并运行良好。我创建了一个进行文件转换的 php 脚本（不是插件）。我将脚本上传到站点根目录，并在其中创建了一个带有“全部允许”的 .htaccess，我将 777 授予文件夹权限，以便允许从浏览器访问此脚本。但是，该站点的“找不到页面”页面反而显示出来。

有人可以解释我在这里缺少什么吗？这是 htaccess 文件中的一些条件：

```
RewriteCond %{REQUEST_URI} !(\.gif)|(\.jpg)|(\.png)|(\.css)|(\.js)|(\.php)$
RewriteCond %{REQUEST_URI} ^(.*)$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule .* sapphire/main.php?url=%1&%{QUERY_STRING} [L] 
```

这是当前的 htaccess 文件：

```
Options +FollowSymlinks 
### SILVERSTRIPE START ### 
<IfModule mod_dir.c> DirectorySlash Off </IfModule> 
RewriteEngine On RewriteBase / RewriteRule ^index.html$ http://www.domain.com/ [R=301,L] RewriteCond %{REQUEST_URI} !(\.gif)|(\.jpg)|(\.png)|(\.css)|(\.js)|(\.php)$ 
RewriteCond %{REQUEST_URI} ^(.*)$ 
RewriteCond %{REQUEST_URI} !^/csv_compare 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteRule .* sapphire/main.php?url=%1&%{QUERY_STRING} [L] 
### SILVERSTRIPE END ### 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:18:42.393

我不熟悉 Silverstripe，但听起来 root htaccess 可能正在重定向。但是，allow from all/777 的安全性有点冒险！

编辑：查看[https://github.com/silverstripe/silverstripe-in](https://github.com/silverstripe/silverstripe-installer/blob/master/.htaccess) ​​staller/blob/master/.htaccess 的 htaccess ：

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

如果请求不是针对有效文件的，那就是告诉系统重定向到框架。如果你被要求一个目录，那可能就是问题所在。您可以在上面的行之前添加以下内容：

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

# c# - MVC3 Html.DropDownList — DropDownList 的值永远不会改变

> ID：12850028
> 
> 赞同：0
> 
> 时间：2012-10-11T23:16:47.047
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我的模型 TaskDetailsModel 中有一个 DropDownList 控件。我已将我的 DropDownList 声明为：

```
<%= Html.DropDownListFor(model => model.TaskType, new SelectList(Model.TaskTypeDisplayNames, Model.TaskTypes))%> 
```

我的模型对应的类包含以下属性声明：

```
public class TaskDetailsModel
{        
    [DisplayName("Task Type")]
    public TaskType TaskType { get; set; }

    public List<TaskType> TaskTypes = new List<TaskType> { TaskType.Decommission, TaskType.Install, TaskType.Modify, TaskType.Move, TaskType.Other, TaskType.Rename };
    public List<string> TaskTypeDisplayNames = new List<string> { "Decommission", "Install", "Modify", "Move", "Other", "Rename" };
} 
```

当所有内容都加载并显示给用户时 - 已做出正确的 TaskType 选择。也就是说，我使用非默认选择选项加载没有问题。因此，我相信至少有一部分代码可以正常工作。

但是，对选择所做的任何更改都将丢失。当我尝试将表单发布回服务器时——我看到我选择的选项永远不会改变。我想知道我做错了什么会导致这种行为。

**更新：**

```
public TaskDetailsModel(Task task)
{
    TaskType = task.TaskType;
}

//Client-side code to retrieve form values:
var getDialogData = function () {
    var dialogData = {};

    $(workflowDialogContent).find('input,p,select').each(function () {
        if ($(this).is('input')) {
            dialogData[this.id] = $.trim($(this).val());
        }
        else if ($(this).is('select')) {
            //At this point in time the selected option does not match what I see on the screen. The user has modified the selected value. I do not see it reflected here.
            console.log("Inside here for:", this);
            dialogData[this.id] = $.trim($(this).find('option:selected').val());
        }
        else {
            dialogData[this.id] = $.trim($(this).text());
        }
    });

    return JSON.stringify(dialogData);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:45:21.163

要使用 jquery 获取下拉列表的选定值，您应该使用，

```
$('#dropdownid').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:04:10.890

问题实际上在于我以一种明显不正确的方式重命名我的枚举值。传回服务器时唯一丢失的值是其中包含空格的选择。（例如更改为“Decommission”很好，但更改为“Waiting For Customer”无法正确翻译）。

# git - git - 获取特定文件/文件夹的所有先前版本

> ID：12850030
> 
> 赞同：33
> 
> 时间：2012-10-11T23:17:20.117
> 
> 标签：git, git-clone, git-checkout

我想检索git 存储库中特定文件的**所有先前版本。**

我看到可以使用 checkout 命令获得一个特定版本，但我想要它们全部。带有深度选项的 git clone 命令似乎不允许我克隆子文件夹（“无效的存储库名称”）。

你知道这是否可能以及如何？

谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2017-01-24T17:23:20.003

OP 想要检索**所有**版本，但无法提供答案。特别是如果文件有数百个修订版（所有建议都太手动了）。@Tobias 在评论中提出了唯一的半工作解决方案，但建议 bash 循环会以随机顺序构建文件，并且在针对我们的存储库使用时会生成数百个空文件。原因之一是“rev-list --all --objects”会列出不同的对象（包括树 - 但对我们的目的无用）。

我从 Tobias 的解决方案开始，添加了计数器，进行了一些清理，最后以下面列出的 bash 脚本的形式重新发明了轮子。

该脚本将：

*   **将所有**文件版本提取到 /tmp/all_versions_exported

*   取 1 个参数 - git repo 中文件的相对路径

*   给结果文件名数字前缀（可排序）

*   在结果文件中提到检查的文件名（以区分苹果和橙子：）

*   在结果文件名中提及提交日期（参见下面的输出示例）

*   不创建空结果文件

猫 /usr/local/bin/git_export_all_file_versions

```
#!/bin/bash

# we'll write all git versions of the file to this folder:
EXPORT_TO=/tmp/all_versions_exported

# take relative path to the file to inspect
GIT_PATH_TO_FILE=$1

# ---------------- don't edit below this line --------------

USAGE="Please cd to the root of your git proj and specify path to file you with to inspect (example: $0 some/path/to/file)"

# check if got argument
if [ "${GIT_PATH_TO_FILE}" == "" ]; then
    echo "error: no arguments given. ${USAGE}" >&2
    exit 1
fi

# check if file exist
if [ ! -f ${GIT_PATH_TO_FILE} ]; then
    echo "error: File '${GIT_PATH_TO_FILE}' does not exist. ${USAGE}" >&2
    exit 1
fi

# extract just a filename from given relative path (will be used in result file names)
GIT_SHORT_FILENAME=$(basename $GIT_PATH_TO_FILE)

# create folder to store all revisions of the file
if [ ! -d ${EXPORT_TO} ]; then
    echo "creating folder: ${EXPORT_TO}"
    mkdir ${EXPORT_TO}
fi

## uncomment next line to clear export folder each time you run script
#rm ${EXPORT_TO}/*

# reset coutner
COUNT=0

# iterate all revisions
git rev-list --all --objects -- ${GIT_PATH_TO_FILE} | \
    cut -d ' ' -f1 | \
while read h; do \
     COUNT=$((COUNT + 1)); \
     COUNT_PRETTY=$(printf "%04d" $COUNT); \
     COMMIT_DATE=`git show $h | head -3 | grep 'Date:' | awk '{print $4"-"$3"-"$6}'`; \
     if [ "${COMMIT_DATE}" != "" ]; then \
         git cat-file -p ${h}:${GIT_PATH_TO_FILE} > ${EXPORT_TO}/${COUNT_PRETTY}.${COMMIT_DATE}.${h}.${GIT_SHORT_FILENAME};\
     fi;\
done    

# return success code
echo "result stored to ${EXPORT_TO}"
exit 0 
```

使用示例：

```
cd /home/myname/my-git-repo

git_export_all_file_versions docs/howto/readme.txt
    result stored to /tmp/all_versions_exported

ls /tmp/all_versions_exported
    0001.17-Oct-2016.ee0a1880ab815fd8f67bc4299780fc0b34f27b30.readme.txt
    0002.3-Oct-2016.d305158b94bedabb758ff1bb5e1ad74ed7ccd2c3.readme.txt
    0003.29-Sep-2016.7414a3de62529bfdd3cb1dd20ebc1a977793102f.readme.txt
    0004.28-Sep-2016.604cc0a34ec689606f7d3b2b5bbced1eece7483d.readme.txt
    0005.28-Sep-2016.198043c219c81d776c6d8a20e4f36bd6d8a57825.readme.txt
    0006.9-Sep-2016.5aea5191d4b86aec416b031cb84c2b78603a8b0f.readme.txt
    <and so on and on . . .> 
```

编辑：如果你看到这样的错误：

> 致命：不是有效的对象名称 3e93eba38b31b8b81905ceaa95eb47bbaed46494:readme.txt

这意味着您不是从 git 项目的根文件夹启动脚本。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-05-02T21:13:33.057

Dmitry 提供的脚本确实解决了这个问题，但它有一些问题导致我对其进行调整以更适合我的需要。具体来说：

1.  `git show`由于我的默认日期格式设置，使用了打破。
2.  我希望结果按日期顺序排序，而不是逆日期顺序。
3.  我希望能够针对已从存储库中删除的文件运行它。
4.  我不希望所有分支上的所有修订；我只是想从 HEAD 获得修订。
5.  如果它不在 git repo 中，我希望它出错。
6.  我不想编辑脚本来调整某些选项。
7.  它的工作方式效率低下。
8.  我不需要输出文件名中的编号。（格式合适的日期也有同样的作用。）
9.  我想要更安全的“带空格的路径”处理

[您可以在我的 github 存储库](https://github.com/truist/settings/blob/master/bin/git_export_all_file_versions)中看到我修改的最新版本，或者这是撰写本文时的版本：

```
#!/bin/sh

# based on script provided by Dmitry Shevkoplyas at http://stackoverflow.com/questions/12850030/git-getting-all-previous-version-of-a-specific-file-folder

set -e

if ! git rev-parse --show-toplevel >/dev/null 2>&1 ; then
    echo "Error: you must run this from within a git working directory" >&2
    exit 1
fi

if [ "$#" -lt 1 ] || [ "$#" -gt 2 ]; then
    echo "Usage: $0 <relative path to file> [<output directory>]" >&2
    exit 2
fi

FILE_PATH="$1"

EXPORT_TO=/tmp/all_versions_exported
if [ -n "$2" ]; then
    EXPORT_TO="$2"
fi

FILE_NAME="$(basename "$FILE_PATH")"

if [ ! -d "$EXPORT_TO" ]; then
    echo "Creating directory '$EXPORT_TO'"
    mkdir -p "$EXPORT_TO"
fi

echo "Writing files to '$EXPORT_TO'"
git log --diff-filter=d --date-order --reverse --format="%ad %H" --date=iso-strict "$FILE_PATH" | grep -v '^commit' | \
    while read LINE; do \
        COMMIT_DATE=`echo $LINE | cut -d ' ' -f 1`; \
        COMMIT_SHA=`echo $LINE | cut -d ' ' -f 2`; \
        printf '.' ; \
        git cat-file -p "$COMMIT_SHA:$FILE_PATH" > "$EXPORT_TO/$COMMIT_DATE.$COMMIT_SHA.$FILE_NAME" ; \
    done
echo

exit 0 
```

输出示例：

```
$ git_export_all_file_versions bin/git_export_all_file_versions /tmp/stackoverflow/demo
Creating directory '/tmp/stackoverflow/demo'
Writing files to '/tmp/stackoverflow/demo'
...

$ ls -1 /tmp/stackoverflow/demo/
2017-05-02T15:52:52-04:00.c72640ed968885c3cc86812a2e1aabfbc2bc3b2a.git_export_all_file_versions
2017-05-02T16:58:56-04:00.bbbcff388d6f75572089964e3dc8d65a3bdf7817.git_export_all_file_versions
2017-05-02T17:05:50-04:00.67cbdeab97cd62813cec58d8e16d7c386c7dae86.git_export_all_file_versions 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-11T23:25:22.423

```
git rev-list --all --objects -- path/to/file.txt 
```

列出与 repo 路径关联的所有 blob

获取文件的特定版本

```
git cat-file -p commitid:path/to/file.txt 
```

（commitid 可以是任何东西

*   符号引用（分支、标签名称；也是远程）
*   提交哈希
*   修订规范，如 HEAD~3、branch1@{4} 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-07T04:33:58.527

有时文件的旧版本只能通过`git reflog`. 我最近遇到了一种情况，我需要挖掘所有的提交，即使是那些因为在交互式变基期间意外覆盖而不再是日志一部分的提交。

我编写了这个 Ruby 脚本来输出文件的所有先前版本以找到孤立的提交。用 grep 的输出来追踪我丢失的文件很容易。希望它可以帮助某人。

```
#!/usr/bin/env ruby
path_to_file = ""
`git reflog`.split("\n").each do |log|
   puts commit = log.split(" ").first
   puts `git show #{commit}:#{path_to_file}`
   puts
 end 
```

同样的事情可以用`git log`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-02T19:52:31.227

你可以使用`git blame <file>`.

也在这里：[https ://docs.github.com/en/github/managing-files-in-a-repository/managing-files-on-github/tracking-changes-in-a-file](https://docs.github.com/en/github/managing-files-in-a-repository/managing-files-on-github/tracking-changes-in-a-file)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-11T23:23:56.710

当您 git clone 时，文件的所有版本都已经在 git repo 中。您可以创建与特定提交的签出关联的分支：

```
git checkout -b branchname {commit#} 
```

这可能足以对更改进行快速而肮脏的手动比较：

*   结帐到分支机构
*   复制到编辑器缓冲区

这可能没问题，如果您只需要关注几个版本并且不介意一些手动操作，尽管是 git 内置命令。

对于脚本化解决方案，其他答案中已经提供了一些其他解决方案。

# android - 支持不同的设备（操作栏，左侧导航）

> ID：12850031
> 
> 赞同：0
> 
> 时间：2012-10-11T23:17:23.933
> 
> 标签：android

我注意到对于运行 FB 应用程序的旧设备，它没有操作栏或滑入式左侧导航。有 2 个不同的版本是常见的做法吗？还是为适应所有版本而构建的同一个应用程序是最好的选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:52:10.137

OK 从 Professional Android 4 Application Development 得到了一些答案。根据本书的最佳实践似乎是在运行时检查版本，然后决定实现，无论是布局还是活动。可能带有界面，因此它是一个更好的设计。

并行活动和片段很好，其中片段在运行时决定或活动在运行时根据版本选择。

不要依赖异常处理，因为 Android 处理得很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:03:06.253

老实说，如果您正在为 Android 2.0+ 开发应用程序并尝试实现通用导航系统，IMO 我只会实现[ActionBarSherlock](http://actionbarsherlock.com/)，它符合[google ui 设计指南](http://developer.android.com/design/patterns/actionbar.html)。

在不同的 android 版本或设备上拥有不同的导航基础，可能会使用户在升级时感到困惑，而且它会为您节省一些编码并使您的项目更简单。

# objective-c - Facebook SDK 3.1 iOS：如果用户从 Facebook 设置中删除应用程序，则处理登录

> ID：12850032
> 
> 赞同：10
> 
> 时间：2012-10-11T23:17:24.497
> 
> 标签：objective-c, ios, facebook, facebook-ios-sdk

我想在我的应用程序中加入一些 Facebook 集成。在这一点上，我已经成功登录，发布到朋友墙，检索朋友列表等。除了一件事，一切都很好......

如果用户从[您的 Facebook 设置/应用程序](https://www.facebook.com/settings?tab=applications)中删除应用程序 ，然后进入 iOS 应用程序，则代码不会识别 Facebook 应用程序已从用户设置中删除并假定已登录（这是问题，因为如果用户尝试在朋友的墙上发帖，应用程序什么也不做）。

然后，用户关闭 iOS 应用程序并重新启动它......通过此重新启动，iOS 应用程序“已修复”并检测到用户不再登录。

在用户从设置中删除 Facebook 应用程序以便将登录流程带给用户后，我无法立即检测到...

这是我的代码：

**在我的应用程序的第一个场景......**

```
if([FBSession activeSession].state == FBSessionStateCreatedTokenLoaded)
{
    NSLog(@"Logged in to Facebook");
    [self openFacebookSession];
    UIAlertView *alertDialog;

    alertDialog = [[UIAlertView alloc] initWithTitle:@"Facebook" message:@"You're already logged in to Facebook" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];

    [alertDialog show];

    [alertDialog release];
    return YES;
}
else{
    NSLog(@"Not logged in to Facebook"); //Show the login flow
    return NO;
} 
```

**这是 openFacebookSession 的代码**

```
-(void)openFacebookSession
{
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"publish_stream",
                            nil];

    [FBSession openActiveSessionWithPublishPermissions:permissions defaultAudience:FBSessionDefaultAudienceFriends allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
        [self sessionStateChanged:session state:status error:error];
    }];
} 
```

**sessionStateChanged 的​​代码...**

```
-(void)sessionStateChanged:(FBSession *)session state:(FBSessionState)state error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen: {
            NSLog(@"Session opened");
        }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [FBSession.activeSession closeAndClearTokenInformation];
            break;
        default:
            break;
    }

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
    }
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-04T07:20:18.397

我发现这也发生在我自己身上......当用户更改他们的 Facebook 密码时发现它，我们无法再进行身份验证。手动重新同步/清除帐户会话允许他们再次登录。

```
-(void)syncFacebookAccount
 {
    [self forceLogout];
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountTypeFB = [accountStore         accountTypeWithAccountTypeIdentifier:@"com.apple.facebook"];
    if (accountStore && accountTypeFB) {
    NSArray *fbAccounts = [accountStore accountsWithAccountType:accountTypeFB];
    id account;
    if (fbAccounts && [fbAccounts count] > 0 && (account = [fbAccounts objectAtIndex:0])) {
    [accountStore renewCredentialsForAccount:account completion:^(ACAccountCredentialRenewResult renewResult, NSError *error) {
                    // Not actually using the completion handler...
    }];
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T11:09:28.157

实际上很难解析和检测这些类型的错误，原因有两个：

1.  在您实际尝试并失败 FBRequest （或类似的）之前，我无法找出任何方法来检测此问题，并且
2.  `NSError`从失败传递的对象`FBRequest`非常难以以任何功能方式解析和使用。

下面是我写的疯狂的方法，同时通宵达旦地处理这个问题。它处理`NSError *error`来自失败`FBRequest`尝试的对象，并将其传递给相关方法或显示我能找到的最明智的错误（或击中底部的全部错误）。

请注意评论 - 特别是围绕`innerError`和`parsedResponse`- 详细说明我到目前为止发现的内容。祝你好运，勇敢的士兵：

```
- (void)handleFacebookError:(NSError *)error
         withPermissionType:(RMFacebookPermissionsType)type // this is just a typedef enum specifying Write or Read permissions so I can react accordingly
             withCompletion:(void (^)(BOOL retry))completionBlock {

    newMethodDebugLog;
    NSParameterAssert(error);
    NSParameterAssert(type);
    NSParameterAssert(completionBlock); //  the completion block tells the controller whether the error is 'fatal' or can be recovered - if YES, it can be recovered

    // this is the parsed result of the graph call; some errors can appear here, too, sadly
    NSDictionary *parsedResponse = [error.userInfo objectForKey:@"com.facebook.sdk:ParsedJSONResponseKey"];
    int parsedErrorCode = [[[[parsedResponse objectForKey:@"body"]
                             objectForKey:@"error"]
                            objectForKey:@"code"]
                           intValue];

    // this is an instance of NSError created by Facebook; it contains details about the error
    NSError *innerError = [error.userInfo objectForKey:@"com.facebook.sdk:ErrorInnerErrorKey"];

    // innerError is usually un-recoverable
    if (innerError) {

        // innerError seems to be the response given in true HTTP problems;
        DebugLog(@"______innerError FOUND______");
        DebugLog(@"innerError: %@",innerError);
        DebugLog(@"innerError.code: %d",innerError.code);

        // digging deep enough, you can actually find a coherent error message! :D
        DebugLog(@"innerError.localizedDescription: %@",innerError.localizedDescription);

        if (![alert isVisible]) {

            NSString *errorString = @"Facebook Connection Failed";

            NSString *okString = @"OK";

            alert = [[UIAlertView alloc] initWithTitle:errorString
                                               message:innerError.localizedDescription
                                              delegate:nil
                                     cancelButtonTitle:okString
                                     otherButtonTitles:nil];

            [alert show];

        } else {

            DebugLog(@"Alert already showing!");

        }

        completionBlock(NO);

    } else if (parsedResponse &&
               parsedErrorCode != 2) { // I honestly forget what error 2 is.. documentation fail :(

        // parsedResponses can usually be recovered
        DebugLog(@"parsed response values: %@",[parsedResponse allValues]);

        switch (parsedErrorCode) {
            case 2500:
            case 200:
            case 190:
            {
                DebugLog(@"parsedError code hit! forcing re-login.");

                // all errors in case 190 seem to be OAuth issues
                // http://fbdevwiki.com/wiki/Error_codes#Parameter_Errors
                // if needed, "error_subcode" 458 == user has de-authorized your app
                // case 2500 reported while grabbing from a photo album & not logged in
                // case 200 "requires extended permission: publish_actions"

                if (type == RMFacebookPermissionsTypeRead) {

                    [self _getFacebookReadPermissionsWithUI:YES
                                                 completion:completionBlock];

                } else if (type == RMFacebookPermissionsTypeWrite) {

                    [self _getFacebookWritePermissionsWithUI:YES
                                                  completion:completionBlock];

                }

                break;
            }

            default:
                completionBlock(YES);
                break;
        }

    } else {

        if (![alert isVisible]) {

            NSString *errorString = @"Facebook Error";

            NSString *messageString = @"Mixture Photos was unable to connect to Facebook on your behalf. This is usually a temporary problem. Please try again later.";

            NSString *okString = @"OK";

            alert = [[UIAlertView alloc] initWithTitle:errorString
                                               message:messageString
                                              delegate:nil
                                     cancelButtonTitle:okString
                                     otherButtonTitles:nil];

            [alert show];

        } else {

            DebugLog(@"Alert already showing!");

        }

        completionBlock(NO);

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:57:20.200

我有同样的问题，在 Facebook SDK 网站上找不到有关错误代码的正确文档。

`[error code];`我通过比较or`[error userInfo];`值解决了问题。

您的会话将具有状态`FBSessionStateClosedLoginFailed`和 userInfo 错误字典将具有以下形式

```
"com.facebook.sdk:ErrorLoginFailedReason" = "com.facebook.sdk:ErrorLoginFailedReason"; 
```

另一方面，错误代码向我显示`2`，以便您可以在 sessionStateChanged::: 函数结束时处理它

```
- (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState)state
                  error:(NSError *)error {
switch (state) {
    case FBSessionStateOpen: {
        //update permissionsArrat
        [self retrieveUSerPermissions];

        if (!needstoReopenOldSession) {
            //First User information
            [self getUserInformation:nil];
        }

        NSNotification *authorizationNotification = [NSNotification notificationWithName:facebookAuthorizationNotification object:nil];
        [[NSNotificationCenter defaultCenter] postNotification:authorizationNotification];

    }
    case FBSessionStateClosed: {
        break;
    }
    case FBSessionStateClosedLoginFailed: {
        [FBSession.activeSession closeAndClearTokenInformation];
        break;
    }
    default:
        break;
}

if (error) 
{
    NSNotification *authorizationNotification = [NSNotification  notificationWithName:faceBookErrorOccuredNotification object:error];
    [[NSNotificationCenter defaultCenter] postNotification:authorizationNotification];
}
} 
```

# java - 尝试在android中构建一个简单的通知

> ID：12850033
> 
> 赞同：4
> 
> 时间：2012-10-11T23:17:26.907
> 
> 标签：java, android, android-notifications

我正在尝试在我的 android 应用程序中设置一个通知，它只会说“它有效”，但我需要我的应用程序一直兼容到 API 1。不过，我真的很困惑如何做到这一点。有些旧教程已弃用，有些新教程不支持旧 API 级别。根据这个[SO](https://stackoverflow.com/questions/6391870/how-exactly-to-use-notification-builder) question，我应该使用[NotificationCompat.Builder](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)。我正在使用一个示例，但我并不完全理解代码。

从这段代码中：

```
Intent notificationIntent = new Intent(ctx, YourClass.class);
PendingIntent contentIntent = PendingIntent.getActivity(ctx,
        YOUR_PI_REQ_CODE, notificationIntent,
        PendingIntent.FLAG_CANCEL_CURRENT);

NotificationManager nm = (NotificationManager) ctx
        .getSystemService(Context.NOTIFICATION_SERVICE);

Resources res = ctx.getResources();
Notification.Builder builder = new Notification.Builder(ctx);

builder.setContentIntent(contentIntent)
            .setSmallIcon(R.drawable.some_img)
            .setLargeIcon(BitmapFactory.decodeResource(res, R.drawable.some_big_img))
            .setTicker(res.getString(R.string.your_ticker))
            .setWhen(System.currentTimeMillis())
            .setAutoCancel(true)
            .setContentTitle(res.getString(R.string.your_notif_title))
            .setContentText(res.getString(R.string.your_notif_text));
Notification n = builder.build();

nm.notify(YOUR_NOTIF_ID, n); 
```

`ctx`我在： ，`YOUR_PI_REQ_CODE`和下得到红线`YOUR_NOTIF_ID`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:31:48.867

`ctx`是上下文。它可以改为通过您的活动。

`YOUR_PI_REQ_CODE`是 PendintIntent 请求代码。它可以是任何 int 常量。

`YOUR_NOTIF_ID`是通知 ID。它也可以是任何 int 常量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T23:32:01.283

该`ctx`变量旨在成为一个 Android 上下文——通常是一个 Activity（或者实际上是一个扩展 Activity 的类）。

您应该对课程进行一些研究`PendingIntent`以理解`YOUR_PI_REQ_CODE`，但您需要确定放在这里的内容；这是*您*待处理的意图请求代码。

您还应该研究`NotificationManager` `notify()`确定要用作通知 ID*的方法。*

# excel - Excel 到 Word (VB) 循环遍历行

> ID：12850037
> 
> 赞同：0
> 
> 时间：2012-10-11T23:18:06.900
> 
> 标签：excel, vba

我在 excel 中的宏从每一行读取数据，并根据该数据为每一行创建一个 word 文件。用作模板的 word 文件有书签（列中的值映射到书签）。

我让它为一行工作，但它不会遍历所有行。我使用的代码来自：http://www.wiseowl.co.uk/blog/s199/word-bookmarks.htm

这是我的代码：

```
Option Explicit

'change this to where your files are stored

Const FilePath As String = "C:\Files\"

Dim wd As New Word.Application

Dim SOPCell As Range

Sub CreateWordDocuments()

    'create copy of Word in memory

    Dim doc As Word.Document

    wd.Visible = True

    Dim SOPRange As Range

    'create a reference to all the people

    Range("A1").Select

    Set SOPRange = Range(ActiveCell, ActiveCell.End(xlDown)).Cells

    'for each person in list ï¿½

    For Each SOPCell In SOPRange

        'open a document in Word

        Set doc = wd.Documents.Open(FilePath & "template.doc")

        'go to each bookmark and type in details

        CopyCell "sop", 0
        CopyCell "equipment", 1
        CopyCell "component", 2
        CopyCell "step", 3
        CopyCell "form", 4
        CopyCell "frequency", 5
        CopyCell "frequencyB", 5

        'save and close this document

        doc.SaveAs2 FilePath & "SOP " & SOPCell.Value & ".doc"

        doc.Close

    Next SOPCell

    wd.Quit

    MsgBox "Created files in " & FilePath & "!"

End Sub

Sub CopyCell(BookMarkName As String, ColumnOffset As Integer)

    'copy each cell to relevant Word bookmark

    wd.Selection.GoTo What:=wdGoToBookmark, Name:=BookMarkName

    wd.Selection.TypeText SOPCell.Offset(0, ColumnOffset).Value

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:22:47.193

您似乎错过了 copyCell Sub 中的范围参数

```
Sub CreateWordDocuments()

    'create copy of Word in memory

    Dim doc As Word.Document
    wd.Visible = True
    Dim SOPRange As Range
    'create a reference to all the people

    Set SOPRange = Range(Range("A1"), Range("A1").End(xlDown)).Cells

    'for each person in list 

    For Each SOPCell In SOPRange
        'open a document in Word
        Set doc = wd.Documents.Open(FilePath & "template.doc")
        'go to each bookmark and type in details
        CopyCell SOPCell, "sop", 0
        CopyCell SOPCell, "equipment", 1
        CopyCell SOPCell, "component", 2
        CopyCell SOPCell, "step", 3
        CopyCell SOPCell, "form", 4
        CopyCell SOPCell, "frequency", 5
        CopyCell SOPCell, "frequencyB", 5
        'save and close this document
        doc.SaveAs2 FilePath & "SOP " & SOPCell.Value & ".doc"

        doc.Close

    Next SOPCell

    wd.Quit

    MsgBox "Created files in " & FilePath & "!"

End Sub

Sub CopyCell(rg As Range, BookMarkName As String, ColumnOffset As Integer)

    'copy each cell to relevant Word bookmark

    wd.Selection.GoTo What:=wdGoToBookmark, Name:=BookMarkName

    wd.Selection.TypeText rg.Offset(0, ColumnOffset).Value

End Sub 
```

# php - 如何检测按下了哪个提交按钮？

> ID：12850041
> 
> 赞同：0
> 
> 时间：2012-10-11T23:18:37.883
> 
> 标签：php, javascript, html, forms, submit

我在 PHP 中有一个脚本，我需要在其中检测在 HTML 页面中按下了哪个按钮。我发现其他人问了很多类似的问题，但我遇到了问题。

HTML

```
<form method="post" action="kode/kode_newsletter_operation.php" id="newsletter_step3Form">
                    <p>
                        <label>Schedule newsletter:</label>
                        <select name="send_date_month" id="send_date_month">
                            <option value="01">January</option>
                            <option value="02">February</option>
                            <option value="03">March</option>
                            <option value="04">April</option>
                            <option value="05">May</option>
                            <option value="06">June</option>
                            <option value="07">July</option>
                            <option value="08">August</option>
                            <option value="09">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                        -
                        <select name="send_date_day" id="send_date_day">
                            <option value="01">1</option>
                            <option value="02">2</option>
                            <option value="03">3</option>
                            <option value="04">4</option>
                            <option value="05">5</option>
                            <option value="06">6</option>
                            <option value="07">7</option>
                            <option value="08">8</option>
                            <option value="09">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                            <option value="22">22</option>
                            <option value="23">23</option>
                            <option value="24">24</option>
                            <option value="25">25</option>
                            <option value="26">26</option>
                            <option value="27">27</option>
                            <option value="28">28</option>
                            <option value="29">29</option>
                            <option value="30">30</option>
                            <option value="31">31</option>
                        </select>
                        -
                        <select name="send_date_year" id="send_date_year">
                            <option value='2012'>2012</option><option value='2013'>2013</option>                                </select>&nbsp;
                            <select name="send_date_hour" id="send_date_hour">
                                <option value="00">0</option>
                                <option value="01">1</option>
                                <option value="02">2</option>
                                <option value="03">3</option>
                                <option value="04">4</option>
                                <option value="05">5</option>
                                <option value="06">6</option>
                                <option value="07">7</option>
                                <option value="08">8</option>
                                <option value="09">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                                <option value="16">16</option>
                                <option value="17">17</option>
                                <option value="18">18</option>
                                <option value="19">19</option>
                                <option value="20">20</option>
                                <option value="21">21</option>
                                <option value="22">22</option>
                                <option value="23">23</option>
                            </select>:<select name="send_date_min" id="send_date_min">
                                <option value="00">00</option>
                                <option value="00">05</option>
                                <option value="10">10</option>
                                <option value="00">15</option>
                                <option value="20">20</option>
                                <option value="00">25</option>
                                <option value="30">30</option>
                                <option value="00">35</option>
                                <option value="40">40</option>
                                <option value="00">45</option>
                                <option value="50">50</option>
                                <option value="00">55</option>
                            </select>
                            <div>Server Time: October 12, 2012 04:54</div>
                        </p>
                        <p>
                            <label for="send_date">Preview in Email:</label>
                            <input type="text" id="preview_email"  value="" name="preview_email" />
                            <input type="button" id="preview_btn" name="preview_btn" class="btn btn_red" onclick="previewSendMail(1)" value="Send Preview"/>
                        </p>
                        <p>&nbsp; </p>
                        <div id="kode_result"></div>
                        <div id="content_buttons">
                            <input type="button" class="btn btn_blue big" name="goback" value="Last Step" onclick="window.location.href='./newsletter_create_step2.php?id=1'" />
                            <input type="submit" name="submit_btn_now" value="Send now!" class=" btn btn_red big"/>
                            <input type="submit" name="submit_btn" value="Schedule" class=" btn btn_green big"/>
                            <input name="action" type="hidden" value="newsletter_step3" />
                            <input type="hidden" name="newsletter_id" id="newsletter_id" value="1"/>
                        </div>
                    </form> 
```

PHP

```
print_r($_POST); 
```

输出

```
Array(
[send_date_month] => 10
[send_date_day] => 12
[send_date_year] => 2012
[send_date_hour] => 01
[send_date_min] => 50
[preview_email] =>
[action] => newsletter_step3
[newsletter_id] => 1
) 
```

两个按钮都在`<form>`标签内，但`$_POST`数组不包含关于它们的任何信息。我究竟做错了什么？最新的浏览器是否没有发送有关提交按钮的信息，还是我遗漏了什么？我没有 javascript 技能来为此开发解决方法，我只知道 PHP。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T23:22:48.037

为提交按钮提供相同的名称属性，但具有不同的值，然后您可以针对提交按钮上使用的文本进行测试。

```
<pre><? print_r($_POST);?></pre>
<form method="post">
<input type="submit" name="button" value="AAA">
<input type="submit" name="button" value="BBB">
</form> 
```

输出：

```
Array
(
    [button] => AAA
) 
```

* * *

编辑：实际上，我认为您的代码没有任何问题？

```
<pre><? print_r($_POST);?></pre>
<form method="post">
<input type="submit" name="submit_btn_now" value="Send now!" class=" btn btn_red big"/>
<input type="submit" name="submit_btn" value="Schedule" class=" btn btn_green big"/>
</form> 
```

输出只点击一个：

```
Array
(
    [submit_btn_now] => Send now!
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T23:38:31.900

您的表单上是否运行了 JQuery 或任何其他 JS 库？他们倾向于接管提交事件，因此提交不是来自实际的提交输入。在没有 js 库的情况下试试？

编辑：这是一个解决方法：

```
$('#submit_btn_now').on('click', function() {
    var hiddensubmit=document.createElement('input');
    hiddensubmit.value = this.value;
    hiddensubmit.name = this.name;
    hiddensubmit.setAttribute('hidden','hidden');
    $('#newsletter_step3Form').append(hiddensubmit);
    $('#newsletter_step3Form').submit()
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-08T10:53:14.213

如果您想对所有按钮使用相同的值（因为它是显示为文本的值），您可以使用 name 属性作为信息持有者并为其添加前缀。那么获取值的方法是：

```
$information = substr(
  end(
    array_filter(
      array_keys($_REQUEST),
      function ($key) { return substr($key, 0, strlen(PREFIX)) == PREFIX; }
    )
  ),
  strlen(PREFIX)
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-18T20:14:35.253

将两个按钮的**名称**属性设置为*相同*的值。
为每个按钮赋予*不同的* **值**属性，如下所示：

```
<input type="submit" name="submit" value="Log In">
<input type="submit" name="submit" value="Sign Up"> 
```

然后你可以在你的 php中使用**if语句，如下所示：**

```
if ($_POST['submit']=="Log In") {}
else {} // ELSE DETECTS THE "Sign Up" BUTTON, OR ANY OTHER BUTTON WITH A DIFFERENT VALUE 
```

我认为这几乎可以为您提供您正在寻找的答案：一种仅使用 PHP 而不使用 JavaScript 来检测按下哪个按钮的方法。

# html - html5和flash视频大小对比

> ID：12850053
> 
> 赞同：1
> 
> 时间：2012-10-11T23:19:55.777
> 
> 标签：html, flash

我在 youtube 中注意到，对于相同的分辨率，例如相同视频的 360p（具有相同的视频 ID）html5 视频的大小比 Flash 视频大得多

html5和flash之间的视频大小有什么关系吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:34:17.057

这实际上取决于您使用的编解码器以及视频的设置（比特率，帧率），编解码器通常也有一定的调整。Flash 和 HTML 都可以播放 .h645 视频，相同的配置文件，相同的设置。在这种情况下，它将是相同的（因为它是同一个文件），但并非所有浏览器和操作系统都支持所有编解码器。例如，这个是专有的，Firefox 不支持它。

Theora Vorbis 是 Firefox 支持的另一种编解码器，它平均提供更保守的压缩，在牺牲大小的同时提供更好的质量。即它的尺寸更大，但可能更清晰/更详细，不太确定，我无法分辨出观看视频的区别。

因此，虽然文件的大小不必不同，但为了兼容性，如果您想使用 HTML 视频标签，您必须至少拥有 2 个以不同格式编码的视频副本。

# interrupt - 写入 OC8R/RS 导致 INT4 意外触发

> ID：12850057
> 
> 赞同：0
> 
> 时间：2012-10-11T23:20:30.697
> 
> 标签：interrupt, pic, microchip, pwm

标题几乎是不言自明的。当我写入输出比较寄存器（OC8RS 或 OC8R）时，会触发外部中断 INT4 引脚上的中断。我正在使用 Timer3 和 OC8 模块进行 PWM。INT4 引脚连接到一个物理开关，按下时会触发中断。但是，当我为我的 PWM 功能更新 OC8RS 寄存器时，从 INT4 触发了一个中断......这是没有意义的（再次，因为这个引脚连接到一个物理开关 - 与 PWM 无关）。

我猜我没有正确初始化、设置或清除某些东西，但我没有想法。其他人有吗？谢谢！

我使用的是 PIC24HJ256GP610A 处理器，以及最新的 MPLAB v8 和 C30 以及 ICD3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:27:15.230

I found a solution. Instead of setting the tristate bit of INT4 to be an input (i.e., bit 15 of TRISA = 1), I set it to be an output (TRISAbit15=0). Now, this doesn't make sense because as I've already stated, I'm using a mechanical switch to send a pulse to the INT4 pin when pressed... i.e., an input signal to the MCU. I have the INT4 pin connected to a 10K pullup resistor for the switch to work.

So, setting the pin/tristate bit as an output no longer causes the INT4 interrupt to trigger. The signal looks noisier than it should, as if it's "fighting" with another signal, but it works fine now. Still confused as to how this could work with the pin set as an output when it's receiving an input...

# c++ - 多线程 Web 服务器流程图

> ID：12850059
> 
> 赞同：0
> 
> 时间：2012-10-11T23:20:41.877
> 
> 标签：c++, c

我正在用 C++ 编写一个具有 1 个调度线程、1 个排队线程和 n 个执行线程的多线程 Web 服务器，这是一个家庭作业问题。我不是在问代码。我为服务器创建了一个流程。你能告诉我流程是否正确吗？

```
main()              //queuing thread
{
     define sockets
     create scheduling thread
     create queue of n execution threads   //n execution threads
     accpet connection infinetly
     {
          insert the request in a queue 
     }
 }

 scheduling thread         // scheduling thread
 {
      job = take each request from queue ( FCFS or SJF)
      take 1 thread from queue of execution threads and assign the job request
  } 
```

这个问题的流程是否正确？我只需要方向。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:38:27.007

你的伪代码对我来说看起来很合理。

# ios - 通过修改 OpenGL 中的 GL_PROJECTION 来补偿屏幕旋转

> ID：12850060
> 
> 赞同：0
> 
> 时间：2012-10-11T23:20:42.623
> 
> 标签：ios, opengl-es, augmented-reality, projection-matrix, stereoscopy

是否可以在 OpenGL 中设置 GL_PROJECTION 来补偿屏幕旋转？

我认为这有很多应用，例如在增强现实或立体视图中。

特别是，我想在移动设备倾斜时对视角进行“假”改变。

此效果如图所示![在此处输入图像描述](../Images/1f76d6e0555cf8f81b9615bdc7ab68c7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:29:59.700

实际上，您的特定情况需要调整投影和模型视图。模型视图负责设置原点。通过有角度的视角，有利位置发生了变化。然而，镜头也会发生移位（从字面上看，它就像真实相机上的移位镜头），这需要移位项。

现在你的草图有点不清楚实际需要什么。我可以清楚地说，它不是旋转的，而是移动的。建议：下载Blender，搭建一个简单的场景，修改相机对象的“Shift”参数；如您所见，您将不得不应用镜头移位和相机移位的组合。

但一般来说：是的，在某些情况下需要调整投影矩阵。

# ruby-on-rails - 使服务器上的 Current Rails 应用程序指向以前的版本

> ID：12850065
> 
> 赞同：1
> 
> 时间：2012-10-11T23:21:05.123
> 
> 标签：ruby-on-rails, ubuntu, capistrano

您如何将通过 Capistrano 推送到 Ubuntu 服务器的 Ruby on Rails 应用程序的当前版本更改为早期版本？ ![在此处输入图像描述](../Images/d32be0df76ccdb0b429d724b2a05564f.png)

这些文件位于 /var/www/application/current 中

我目前正在运行 Ubuntu 12.04、Rails 3.2.7 和 Ruby 1.9.3

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:44:54.967

当前是发布文件夹的链接，因此您只需将其指向不同的发布文件夹，即

```
ln -s 20120930184735 current 
```

并重新启动应用程序请记住，如果有迁移更改，您可能还必须回滚它们......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:39:47.740

Capistrano 有一个内置任务来做你想做的事：

```
cap deploy:rollback

# or:

cap deploy:rollback:code 
```

选择一个更适合您的。

[文档](https://github.com/capistrano/capistrano/wiki/Capistrano-Tasks#deploy%3arollback)

# .net - 在 perl 中使用 .Net 的替代方法是 Win32::OLE？

> ID：12850066
> 
> 赞同：1
> 
> 时间：2012-10-11T23:21:17.663
> 
> 标签：.net, perl

Perl 中是否有与使用 Win32::OLE 将 .Net dll 合并到 Perl 中不同的替代方法？我对 Perl 完全陌生，还不太了解它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:20:49.193

我没有将它用于使用 .NET 创建的 DLL，告诉模块在哪里查找 DLL 并获得正确的方法签名可能会很棘手，但我已经成功地使用[`Win32::API`](http://search.cpan.org/perldoc?Win32%3a%3aAPI)模块调用 DLL 中的任意函数：

```
use Win32::API;

$my_function = Win32::API->new( 'my_dll_name', 'int my_func(int a,double b)' );

# call  my_func(7, 1.5)  in  my_dll_name.dll
$result = $my_function->(7, 1.5); 
```

# java - 使用 Mockito 测试方面

> ID：12850067
> 
> 赞同：3
> 
> 时间：2012-10-11T23:21:20.743
> 
> 标签：java, mockito

我正在尝试测试一个使用自定义注释实现注释私有方法的类。有没有办法用 Mockito 测试这个？我应该如何使用 Mockito 注释注入方面实现？

```
公共类 XYZ {
  @retryOnException（异常=Exception.class）
  私人无效doSomething（）
  {
  }

```

谢谢

# visual-studio-2010 - 如何使用循环反向获取值

> ID：12850070
> 
> 赞同：0
> 
> 时间：2012-10-11T23:21:53.700
> 
> 标签：visual-studio-2010, variables, loops

问题在于我的代码底部，我必须让程序以相反的顺序背诵输入的值。我认为这可能与索引有关？

Option Explicit On Option Strict On

“作者：默里·斯皮尔斯”日期：2012 年 10 月 12 日

'编写一个程序，接受五个输入值并将它们存储到一个数组中。'然后以相反的顺序显示数字。'然后显示平均数，以及所有高于平均数的数。

进口系统

模块值

```
Sub Main()
    Dim Number(4) as Integer
    Dim Average as Double = 0
    Dim Index as integer
'   
  For Index = 0 to 4
  Console.Write("Enter number: ")
  Number(Index)=Convert.ToInt32(Console.Readline())
  Next Index

'Figure out the average for all the entered values.
Average = (Number(0)+Number(1)+Number(2)+Number(3)+Number(4))/5
Console.Writeline("The average of the numbers is: " &Average)

Console.Write("Numbers that are greater than the average: ")
Index = 4
Do until Index = 0
If Number(Index) > Average then 
Console.Writeline(Number(Index))
End If
Index -=1
Loop

Console.Writeline("Numbers in reverse order: ")
Index = 4
Do while Number(index) > 0
Console.Writeline(Number(Index))
Number(index) -= 1
Loop

End Sub 
```

端模块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:25:21.783

用于`Step -1`后退。

```
For Index = 4 To 0 Step -1
    ' do your thing
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:37:53.420

Imo，最简单的方法是像输入数字时那样使用循环，但正如您自己编写的那样，使索引反向。这就是“步骤-1”的用途。

```
For Index As Integer = 4 To 0 Step -1
  Console.Writeline(Number(Index))
Next 
```

# c - 使用单个光源渲染 3D 立方体的最简单方法是什么？

> ID：12850071
> 
> 赞同：1
> 
> 时间：2012-10-11T23:21:54.893
> 
> 标签：c, opengl, graphics, 3d

下图是一个糟糕的 Photoshop 三维立方体模型。

![一个糟糕的 3D 立方体](../Images/094eec7033c338251ea715706e6c363d.png)

这是我的参数：解决方案必须...

*   ... 在我小巧但忠实的 Macbook Air 上编译和运行，*无需*使用 Wine 等 Windows 模拟器
*   ...在运行时生成一个看起来与上述模型相当接近的窗口
*   ... 仅使用免费工具（“免费”，如“演讲”*和*“啤酒”）
*   ... 使用 C（不是 C++ 或 C#）
*   ...能够渲染从编译时定义的不同角度查看的立方体，可能使用预处理器宏
*   ... 利用 GPU

哇！

潜在资源：

*   [http://www.gamedev.net/topic/579689-sdl--opengl-rendering-a-cube/](http://www.gamedev.net/topic/579689-sdl--opengl-rendering-a-cube/)
*   [http://www.evl.uic.edu/arao/cs594/sdlglsl.html](http://www.evl.uic.edu/arao/cs594/sdlglsl.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T23:29:41.623

我会去Nehe教程，1-5。到 #5 时，您将在 OpenGL 中渲染上述立方体。

这些教程是纯 C 语言，但它们在页面底部有指向您可能想要使用的几乎所有语言的端口的链接。

[呐呐OpenGL](http://nehe.gamedev.net/tutorial/lessons_01__05/22004/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T16:24:08.730

NeHe 教程已过时且无法编译，因此我编写了[此要点](https://gist.github.com/mcantor/10995685)以使用符合我问题的所有参数的工作片段来回答我自己的问题。

它可以像这样在 OS X 10.9.2 上编译：

`$ gcc -Wall -framework OpenGL -framework GLUT -o my3dcube my3dcube.c`

它大量改编自[本要点](https://gist.github.com/10995796)中的代码和 Mark Stevens 答案中链接的 NeHe 教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T23:26:43.127

您将要从 OpenGL 开始。这是唯一完全符合该法案的东西。话虽如此，如果您以前从未编写过 C 代码……这将是一个沉重的开始。

在你对 OpenGL 和图形做任何事情之前，我会先访问[这个站点](http://www.cprogramming.com/tutorial/c-tutorial.html)并学习 C。

# ios5 - 带有 iOS 5 标准幻灯片过渡动画的 UIPageViewController 替代方案

> ID：12850073
> 
> 赞同：0
> 
> 时间：2012-10-11T23:22:12.217
> 
> 标签：ios5, uiviewcontroller, transition, uipageviewcontroller

我正在为 iOS 5 制作一个应用程序，它一次显示一个 UIViewController，没有导航栏。

UIPageViewController 对于我想要实现的目标几乎是完美的，除了它只为 iOS 5 提供页面卷曲过渡动画。

我找到了一个替代方案，但它有点像黑客。我创建了一个 UINavigationController 并将导航栏设置为隐藏。

向前导航时，我打电话

```
[navigationController setViewControllers:@[newVC] animated:YES]; 
```

当导航回来时，我打电话

```
[self.navigationController setViewControllers:@[prevVC, currentVC] animated:NO];
[self.navigationController popViewControllerAnimated:YES]; 
```

这个技巧似乎很有效，给了我想要的确切过渡，但必须有更好的方法。

我在想另一种选择是使用 UIView 动画块。但这将需要更多的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:18:26.837

看起来我应该能够在 UIViewController 中使用这两个函数后实现我的目标：

```
addChildViewController: 
```

和

```
transitionFromViewController:toViewController:duration:options:animations:completion: 
```

这些功能在 iOS 5 中可用。我应该首先正确阅读所有新的 iOS 5 功能。

# ios - iOS 版本特定的 Default.png？

> ID：12850074
> 
> 赞同：2
> 
> 时间：2012-10-11T23:22:22.413
> 
> 标签：ios, ios6, default.png

现在 iOS 6 已经发布并调整了一些控件外观，我的 Default.png 系列不再匹配更新的外观。

但是，如果我更新 iOS 6 的外观，Default.png 系列将不再匹配 iOS 5。

有没有办法为 iOS 5 和 iOS 6 提供不同的启动图像？

添加 Default-568h@2x.png 并不能解决这个问题；问题是 Default.png 和 Default@2x.png 必须显示 iOS 5 或 iOS 6 屏幕，而且它们看起来不一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:31:09.240

我注意到在我的一个应用程序中，iOS 5 和 iOS 6 之间的一种标准控件类型（在我的启动图像中捕获）的位置存在微小差异。我选择使用新的 iOS 6 屏幕截图作为启动图像，即使在 iOS 5 上启动时这会导致轻微的视觉变化。几乎每个人都会升级，所以我并不真正担心这种变化只出现在 iOS 5 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:25:17.493

iOS 6 的启动图像被命名为“Default-568h@2x.png”

# php - PHP ssh2_scp_send 远程文件名用单引号括起来

> ID：12850082
> 
> 赞同：0
> 
> 时间：2012-10-11T23:23:04.373
> 
> 标签：php, scp

我正在编写一个代码来 SCP 一个从 Solaris 10 机器到路由器的文件（再简单不过了）。这是代码：

```
<?php
$src = "test.txt";
$trg = "test.txt";

echo "Connecting...\n";
$connection = ssh2_connect('myrouter',22);

echo "Authenticating...\n";
ssh2_auth_password($connection, 'mylogin', 'mypassword');

echo "Sending...\n";
ssh2_scp_send($connection, $src, $trg);
?> 
```

这工作得很好，但远程文件名搞砸了：

```
10/11/2012  10:57p                  15 'test.txt' 
```

注意文件名两边的单引号`test.txt`。

当我使用 Solaris SCP 时，一切正常。这是命令：

```
solaris10$ scp test.txt mylogin@myrouter:test.txt 
```

远程文件名如下所示：

```
10/11/2012  11:10p                  15 test.txt 
```

所以问题似乎仅限于PHP。

有没有人有类似的问题？我应该从哪里开始寻找？

远程文件系统是 FAT32。

谢谢你，PN。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T20:02:01.317

我在使用 ssh2_scp_send() 时遇到了同样的问题。但是，我切换到使用 ssh2_sftp() 和 fwrite() 并且问题消失了。[请参阅http://www.php.net/manual/en/function.ssh2-sftp.php](http://www.php.net/manual/en/function.ssh2-sftp.php)页面上的评论中的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:14:54.587

[此页面http://www.php.net/manual/en/function.ssh2-scp-send.php](http://www.php.net/manual/en/function.ssh2-scp-send.php)的底部评论指的是您可能遇到的问题；

您可以设置`$trg`为完整的远程服务器路径吗？

```
$trg = "/var/www/test.txt"; 
```

或者

```
$trg = "/test.txt"; 
```

# html - 在图像上居中文本

> ID：12850086
> 
> 赞同：1
> 
> 时间：2012-10-11T23:23:45.243
> 
> 标签：html, css

这可能很容易做到，但由于某种原因，我没有任何工作。假设我有一个图像和一个像这样的文本：

```
<div id="my_div">
    <img src="my_img.png" alt="Test" />
    <p>Some Text</p>
</div> 
```

如何`Some Text`在图像上水平和垂直居中文本（我希望文本出现在图像中间）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:11:08.673

一种适用于几乎所有浏览器的简单方法是使图像成为 div 的背景图像，然后设置段落的 line-height 属性。请注意，这仅在文本位于一行时才真正有效。

**[jsFiddle 示例](http://jsfiddle.net/j08691/29Bee/1)**

**CSS**

```
#my_div p {
    line-height:200px;
    text-align:center;
    color:white;
}

#my_div {
    background-image: url(http://www.placekitten.com/400/200);
    width:400px;
    height:200px;
} 
```

**HTML**

```
<div id="my_div">
    <p>Some Text</p>
</div>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:35:36.273

您可以使用`display: table/table-cell`：

CSS：

```
.example {
    display: table;
    width: 100px; /* Width of the image */
    height: 100px; /* Height of the image */
}

.example > P {
    background: url(my_img.png) no-repeat;
    display: table-cell;
    text-align: center; /* Center text horizontally. */
    vertical-align: middle; /* Center text vertically. */
} 
```

HTML：

```
<div class="example"><p>
    Some text
</p></div> 
```

如果您需要将图像作为`IMG`元素，您可以使用类似的代码，`IMG`在它之前添加元素，并使用负`margin-top`元素`display:table`将文本放置在图像上方。

# jquery - 将特殊字符插入 textarea 字段（非编辑器）的简单 jquery 插件？

> ID：12850088
> 
> 赞同：1
> 
> 时间：2012-10-11T23:23:48.537
> 
> 标签：jquery, jquery-plugins, utf-8, character-encoding

有谁知道一个简单的 jquery 插件，允许将 ½、¼、¾、Õ、™ 等特殊字符（仅限 UTF-8）插入到 textarea 字段中？

我本来想自己写的，但我想我会先在这里问。我似乎无法通过谷歌搜索找到任何东西。我需要一个模式来允许某人选择一个特殊字符，然后将其插入到 textarea 中。这将是纯基于文本的 UTF-8 字符编码。不能使用 CKEditor、TinyMCE、Markitup 等 HTML 编辑器，因为它们对于系统/项目的所有者来说太复杂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:44:58.027

[http://keith-wood.name/keypad.html](http://keith-wood.name/keypad.html)怎么样

# linux - 如何扩展以破折号 (-) 开头的文件名

> ID：12850089
> 
> 赞同：0
> 
> 时间：2012-10-11T23:23:52.200
> 
> 标签：linux, bash

我知道如果你用双引号将一个变量（包含一个文件名）括起来，它会扩展`$`，`*`s 和反引号（`'`）。例如`cmp "$file1" "$file2"`，如果两个文件`*`的开头都包含 s 或其他任何“正常”的东西，那就没问题了。但是，如果文件在开头有任意数量的破折号，它将不起作用。相反，它将尝试执行 - 的字面意思，将其视为一个选项。你如何解决这个问题？

这将起作用：

```
var1=*file.txt
var2=*file2.txt

cmp "$var1" "$var2" 
```

但

```
var1=-file.txt 
cmp "$var1" "$var2" 
```

会说 - 是一个无法识别的选项。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:31:24.797

大多数 shell 命令都支持 -- 选项来告诉他们该行的其余部分是实际参数，而不是选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:38:59.063

刚刚测试：

```
solaris10$ var3=-ts
solaris10$ var4=ts1
solaris10$ cmp -- "$var3" "$var4"
-ts ts1 differ: char 10, line 1
solaris10$ 
```

工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T23:32:09.750

大多数命令将接受 a`--`来标记参数选项的结束，因此`cmp -- "$var1" "$var2"`应该可以工作。实际上这不是关于 shell 扩展值的问题，而是关于命令本身将传递的参数解释为文件名或选项的问题。

此外，如果它们是当前目录中的文件，您可以执行`cmp ./"$var1" ./"$var2"`.

# php - 如何单击图像的某些部分

> ID：12850092
> 
> 赞同：0
> 
> 时间：2012-10-11T23:24:10.113
> 
> 标签：php, javascript, jquery

我只需要使用以下图像制作索引页。

当用户点击标志之间的水时，他可以继续到下一页。如果用户在任何其他位置按下，将显示警告消息。我们在 PHP 中有 x 轴、y 轴的概念吗？

任何人都知道如何使图像的某些部分可点击？任何人都可以为我提供示例或文档链接吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T23:27:56.110

您可以使用地图标签：
[http ://www.w3schools.com/tags/tag_map.asp](http://www.w3schools.com/tags/tag_map.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T23:31:26.960

进行图像映射，然后将一些单击事件处理程序与映射区域绑定。不久前我用[它](http://www.image-maps.com/)来创建正确的地图。希望这对您的情况也很方便。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T23:28:26.457

由于您使用的是 JQuery，因此您可能希望[在 SO 上查看此答案](https://stackoverflow.com/questions/1128643/get-accurate-position-for-a-click-on-a-linked-image-using-jquery)  

```
$("#imageId").click(function(e){
var x = e.pageX - $(this).offset().left;
var y = e.pageY - $(this).offset().top;
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T23:30:40.627

使用`<input type="image" src="...picture..." name="my_button" />`将导致它发布`$_POST['my_button_x']`并``$_POST['my_button_y']`包含它被点击的坐标。然后，您可以根据需要为“有效”点击定义一些规则：

```
<?php
if ( (int) $_POST['my_button_x'] > 100 && (int) $_POST['my_button_x'] < 300
     && (int) $_POST['my_button_y'] > 20 && (int) $_POST['my_button_y'] < 50 )
{
    // valid
}
else
{
    // invalid
} 
```

显然，这是一个准系统示例 - 您仍然需要测试`isset()`等等。

# php - 糟糕的范围界定实践（全局和恒定）和实用性？

> ID：12850098
> 
> 赞同：0
> 
> 时间：2012-10-11T23:24:46.120
> 
> 标签：php

我研究过 using`global`被认为是不好的做法，因为它允许函数在没有实际设置变量的情况下执行，并且`CONSTANT`' 不应该用于任何非常非常静态的东西，例如一周中的天数。

我真正感到沮丧的问题是在函数和*实用性*中使用变量。例如，假设我获得了用户的 IP，`$_SERVER["REMOTE_ADDR"]`并且在多个功能中都需要它。当我想使用其中一个函数时，我必须回顾该函数并提醒自己参数的顺序是什么，即使我*知道*该函数需要它。

另一个例子是不会改变的用户信息，比如他们的用户名或年龄。我需要在多个功能中使用它，但我必须再次弄清楚参数的顺序并为所有信息包含大约 5 个额外参数，老实说，遵循良好做法似乎适得其反。

我做对了吗？你们通常只包含所有参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:34:11.490

您可能会发现查看[注册表模式](http://www.phppatterns.com/docs/design/the_registry)很有帮助。

就个人而言，如果一个方法需要访问经过身份验证的用户的详细信息，我的代码往往看起来像：

```
public function sayHello() {
    $user = Auth::getAuthenticatedUser();

    return 'Hello, ' . $user->getName();
} 
```

# drupal - 单独渲染字段 drupal

> ID：12850099
> 
> 赞同：1
> 
> 时间：2012-10-11T23:24:55.200
> 
> 标签：drupal, drupal-7, drupal-theming

我希望在 page.tpl.php 中单独呈现每个字段。我的情况是，我有一个图像字段、无限值和幻灯片格式。我想使用幻灯片格式呈现此字段并将其放置在我想要的任何位置。

我尝试了以下方法，但这没有应用正确的格式，它只是以默认格式输出：

```
$field_view_field_field_banners = field_view_field('node', $node, 'field_banners');
$field_view_field_field_banners['#formatter'] = 'slideshow'; // I added this because the formatter was 'image'
echo render($field_view_field_field_banners); 
```

非常感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T15:19:44.770

采用的第四个参数`field_view_field`可以是视图模式的名称，也可以是显示设置键的数组：`label`、`type`、`settings`和`weight`。

看起来好像您正在尝试指定字段的格式，但实际上`field_view_field`正在寻找一种称为“幻灯片放映”的视图模式（如默认或预告片）。

代替

```
$foo = field_view_field('node', $node, 'field_banners', 'slideshow'); 
```

尝试：

```
$foo = field_view_field('node', $node, 'field_banners', array('type' => 'slideshow')); 
```

* * *

您的第二个问题的答案实际上是基于上述问题。区别在于视图模式和字段格式化程序。当您导航到

```
/admin/structure/types/manage/foo/display 
```

您有两种默认视图模式：`Default`和`Teaser`. 如果您已将`field_banners`字段设置为在默认视图模式下使用`slideshow`格式化程序，那么甚至不需要使用第四个参数，因为当未指定时将使用“默认”视图模式。

在那种情况下，你可以这样做： $foo = field_view_field('node', $node, 'field_banners');

并在渲染时`$foo`具有`slideshow`格式。

查看[field_view_field](http://api.drupal.org/api/drupal/modules%21field%21field.module/function/field_view_field/7)的 Drupal API 文档。

# python - 使用牛顿法求平方根（错误！）

> ID：12850100
> 
> 赞同：2
> 
> 时间：2012-10-11T23:25:01.470
> 
> 标签：python, math, newtons-method

我正在努力完成一个数学问题，该问题使用 Python 中的牛顿猜测和检查方法来近似数字的平方根。用户应该输入一个数字，对该数字的初始猜测，以及他们想要在返回之前检查他们的答案多少次。为了让事情变得更容易并了解 Python（几个月前我才刚刚开始学习这门语言），我将它分解为许多较小的函数；但是，现在的问题是我无法调用每个函数并传递数字。

这是我的代码，带有帮助的注释（每个函数按使用顺序排列）：

```
# This program approximates the square root of a number (entered by the user)
# using Newton's method (guess-and-check). I started with one long function,
# but after research, have attempted to apply smaller functions on top of each
# other.
# * NEED TO: call functions properly; implement a counting loop so the
# goodGuess function can only be accessed the certain # of times the user
# specifies. Even if the - .001 range isn't reached, it should return.

# sqrtNewt is basically the main, which initiates user input.

def sqrtNewt():
    # c equals a running count initiated at the beginning of the program, to
    # use variable count.
    print("This will approximate the square root of a number, using a guess-and-check process.")
    x = eval(input("Please type in a positive number to find the square root of: "))
    guess = eval(input("Please type in a guess for the square root of the number you entered: "))
    count = eval(input("Please enter how many times would you like this program to improve your initial guess: ")) 
    avg = average(guess, x)
    g, avg = improveG(guess, x)
    final = goodGuess(avg, x)
    guess = square_root(guess, x, count)
    compare(guess, x)

# Average function is called; is the first step that gives an initial average,
# which implements through smaller layers of simple functions stacked on each
# other.
def average(guess, x) :
    return ((guess + x) / 2)

# An improvement function which builds upon the original average function.
def improveG(guess, x) :
    return average(guess, x/guess)

# A function which determines if the difference between guess X guess minus the
# original number results in an absolute vale less than 0.001\. Not taking
# absolute values (like if guess times guess was greater than x) might result
# in errors
from math import *
def goodGuess(avg, x) :
    num = abs(avg * avg - x)
    return (num < 0.001)

# A function that, if not satisfied, continues to "tap" other functions for
# better guess outputs. i.e. as long as the guess is not good enough, keep
# improving the guess.
def square_root(guess, x, count) :
    while(not goodGuess(avg, x)):
        c = 0
        c = c + 1
        if (c < count):
            guess = improveG(guess, x)
        elif (c == count):
            return guess
        else :
            pass

# Function is used to check the difference between guess and the sqrt method
# applied to the user input.
import math
def compare(guess, x):
    diff = math.sqrt(x) - guess
    print("The following is the difference between the approximation") 
    print("and the Math.sqrt method, not rounded:", diff)

sqrtNewt() 
```

目前，我收到此错误：`g, avg = improveG(guess, x) TypeError: 'float' object is not iterable.` 最终函数使用猜测的最终迭代从数学平方根方法中减去，并返回整体差异。我这样做对吗？如果您可以提供工作代码，我们将不胜感激，并提供建议。同样，我是新手，所以我为误解或盲目的明显错误道歉。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T23:37:26.057

牛顿法的实现：

在需要时添加一些小调整应该是相当容易的。尝试，并在遇到困难时告诉我们。

```
from math import *
def average(a, b):
    return (a + b) / 2.0
def improve(guess, x):
    return average(guess, x/guess)
def good_enough(guess, x):
    d = abs(guess*guess - x)
    return (d < 0.001)
def square_root(guess, x):
    while(not good_enough(guess, x)):
        guess = improve(guess, x)
    return guess
def my_sqrt(x):
    r = square_root(1, x)
    return r

>>> my_sqrt(16)
4.0000006366929393 
```

注意：您会在 SO 或谷歌搜索中找到足够多的关于如何在此处使用原始输入的示例，但是，如果您正在计算循环，则`c=0`必须在循环之外，否则您将陷入无限循环。

Quiqk 和脏，有很多改进的方法：

```
from math import *
def average(a, b):
    return (a + b) / 2.0
def improve(guess, x):
    return average(guess, x/guess)
def square_root(guess, x, c):
    guesscount=0
    while guesscount < c :
        guesscount+=1
        guess = improve(guess, x)
    return guess
def my_sqrt(x,c):
    r = square_root(1, x, c)
    return r

number=int(raw_input('Enter a positive number'))
i_guess=int(raw_input('Enter an initial guess'))
times=int(raw_input('How many times would you like this program to improve your initial guess:'))    
answer=my_sqrt(number,times)

print 'sqrt is approximately ' + str(answer)
print 'difference between your guess and sqrt is ' + str(abs(i_guess-answer)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-08T02:13:40.480

选择的答案有点令人费解……不尊重 OP。

对于将来使用谷歌搜索的任何人，这是我的解决方案：

```
def check(x, guess):
    return (abs(guess*guess - x) < 0.001)

def newton(x, guess):
    while not check(x, guess):
        guess = (guess + (x/guess)) / 2.0
    return guess

print newton(16, 1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T02:11:11.877

这是计算平方根的一个相当不同的函数；它假设*n*是非负的：

```
def mySqrt(n):
    if (n == 0):
        return 0
    if (n < 1):
        return mySqrt(n * 4) / 2
    if (4 <= n):
        return mySqrt(n / 4) * 2
    x = (n + 1.0) / 2.0
    x = (x + n/x) / 2.0
    x = (x + n/x) / 2.0
    x = (x + n/x) / 2.0
    x = (x + n/x) / 2.0
    x = (x + n/x) / 2.0
    return x 
```

该算法类似于牛顿的算法，但并不完全相同。它是由一世纪（大约两千多年前）居住在埃及亚历山大港的一位名叫赫伦（他的名字有时拼写为英雄）的希腊数学家发明的。Heron 的递推公式比 Newton 的简单；苍鹭用`x' = (x + n/x) / 2`在牛顿用过的地方`x' = x - (x^2 - n) / 2x`。

第一个测试是零的特殊情况；没有它，`(n < 1)`测试会导致无限循环。接下来的两个测试将*n*标准化为范围`1 < n <= 4`; *使范围更小意味着我们可以轻松计算n*的平方根的初始近似值，这是在*x*的第一次计算中完成的，然后“展开循环”并迭代递归方程固定次数，从而消除如果两个连续循环之间的差异太大，则需要测试和重复。

顺便说一句，Heron 是一个非常有趣的家伙。除了发明一种计算平方根的方法之外，他还建造了一个可以工作的喷气发动机、一台投币式自动售货机，以及许多其他巧妙的东西！

[您可以在我的博客](http://programmingpraxis.com/2012/06/01/square-roots/)上阅读有关计算平方根的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-16T23:48:08.410

我写的不应该那么复杂

```
def squareroot(n,x):
final = (0.5*(x+(n/x)))
print (final)
for i in range(0,10):
    final = (0.5*(final+(n/final)))
    print (final) 
```

或者你可以把它改成这样

```
n = float(input('What number would you like to squareroot?'))
x = float(input('Estimate your answer'))
final = (0.5*(x+(n/x)))
print (final)
for i in range(0,10):
    final = (0.5*(final+(n/final)))
    print (final) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-29T17:47:23.013

您只需要知道序列中的第 n 个项。从莱布尼茨级数，我们知道这是 ((-1)**n)/((2*n)+1)。只需对所有 i 的初始条件为零的系列求和，就可以了。

```
def myPi(n):

pi=0
for i in range(0,n):
    pi=pi+((-1)**i)/((2*i)+1)
return 4*pi
print (myPi(10000)) 
```

# algorithm - 算法界限分析和使用积分

> ID：12850102
> 
> 赞同：2
> 
> 时间：2012-10-11T23:25:13.857
> 
> 标签：algorithm, math, analysis

我应该使用积分获得算法的下限和上限，但我不明白该怎么做。我知道基本的积分原理，但我不知道如何从算法中找出积分。

**问题：**

*   我的第一个 for 循环从 i = 5n ---> 开始，然后到 6n 立方，
    *   里面的下一个将从 j=5 ---> 开始，然后到 i，
        *   那么最后的下一个 for 循环将从 k=j 开始并到 i。

自然，我的第一步是把它变成 3 个总和。因此，我设置了 3 个汇总，我想要做的是尽可能将这些汇总简化为一个汇总。这样，如果我的求和右侧有一些变量，我现在可以取积分。

就我用于积分的范围而言，从 Cormen、Leiserson 等的算法介绍中，您可以通过积分进行近似。

**积分的性质**：

*   对于上限，您的积分界限可能是：上限 n+1，下限 m。
*   对于下限，您的积分界限可能是：上限 n，下限 m-1。

如果可能，我想知道如何将我的三个总和简化为一个。如果事情是一个总和，我可以开始取积分并自己从那里开始。

这是*非常*粗糙的伪代码，但我尽我所能让它看起来与实际代码相似。

```
for(i = 5n; i<6n^3; i++)
{
    for(j =5; j<i; j++)
    {
        for(k=j; k < i; k++)
        {
            i - j + k;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T07:14:05.500

让任何一个`int(i,j,f)`或`int(x=i,j,f(x))`或`∫(x=i,j,f(x))`表示 x 的定积分`f(x)`范围从 i 到 j。如果`f(x)`是当 x 具有特定值时（由程序）完成的工作量，并且如果 f 是单调递增函数，那么正如您在问题中指出的那样，`int(m,n+1,f)`是工作的上限和 `int(m+1,n,f)`下限在 x 取值时完成`m...n`。在下文中，我会说这`int(m,n,f)`近似于工作，您可以`+1`在适当的地方添加术语以获得上限和下限。注意，6n^3-1 代表 6*(n^3)-1，5n 代表 5*n，等等。

近似的工作是：
`int(i=5n, 6n^3-1, u(i))`
where `u(i)`is
`int(j=5, i-1, v(i,j))` where `v(i,j)`is
`int(k=j, i-1, w(k))` where `w(k)`is 1\. 下面我们使用函数 p、q、r 代表不定积分，而 C 代表积分常数，抵消定积分。

让`r(x) = ∫1dx = x + C`.
现在`v(i,j) = ∫(k=j, i-1, 1) = r(i-1)-r(j) = i-1-j`。

让`q(x,i) = ∫(i-1-x)dx = x*(i-1)-x*x/2 + C`.
现在`u(i) = ∫(j=5, i-1, i-1-j) = q(i-1,i)-q(5,i)`
这是 中的一些二次方`i`。您将需要计算出上限和下限案例的详细信息。

让`p(x) = ∫u(x)dx = ∫(q(x-1,x)-q(5,x))`，它是 x 中的某个立方。总体结果是
`p(6n^3-1)-p(5n)`
，您将需要再次确定细节。但请注意，当`6n^3-1`在 p(x) 中替换 x 时，顺序将是`(6n^3-1)^3`，即 O(n^9)，因此您应该期望上界和下界表达式为 O(n^9)。请注意，您还可以通过检查循环来查看 O(n^9) 顺序：在`for(i=5n; i<6n^3; i++)`中，我将平均大约`3n^3`. 在`for(j =5; j<i; j++)`中，j 的平均值约为 i/2，或 n^3 的一些小倍数。在`for(k=j; k < i; k++)`中，`k-j`也将平均 n^3 的小倍数。因此，表达式`i-j+k`将被计算 n^3*n^3*n^3 或 n^9 次的小倍数。

# python - Python 3.2.2 将脚本写入 EXE 文件

> ID：12850106
> 
> 赞同：-1
> 
> 时间：2012-10-11T23:25:27.117
> 
> 标签：python, exe, python-3.2

有没有一种简单有效的方法可以将 python 3.2.2 脚本制作成可执行文件？如果是这样，如何？

我试过 CX_Freeze 但exe文件没有运行。

请让我知道是否有其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:55:14.133

没有（至少没有广泛传播）。我建议将您的代码反向移植到 Python 2.7.2，然后使用 PyPy 编译独立软件（这也会给您带来不错的[性能提升](http://speed.pypy.org/)！）。

在此处查看示例： [链接到 Pypy 独立示例](http://www.rfk.id.au/blog/entry/compiling-rpython-programs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:30:06.357

[http://www.py2exe.org/](http://www.py2exe.org/)

如果我没记错的话，它需要一些命令行咒语，但我过去曾使用过几次。

* * *

我开枪了... :[ 看起来 py2exe 没有像您在问题中所说的那样针对 Python3 进行更新。对不起。

# java - 需要将对象转换为无界通配符....但在我的情况下如何？

> ID：12850108
> 
> 赞同：2
> 
> 时间：2012-10-11T23:25:35.133
> 
> 标签：java, unbounded-wildcard

```
public myConstuctor(Map<String, ?> myMap) {

    if (myMap.containsKey(MY_KEY)) {            

        myMap.put(MY_KEY, someObject);
    }

    someMemberVariable = new someClass(myMap);  
} 
```

由于无界通配符，我无法在地图中放置对象。我不熟悉通配符。让我感到困难的是（对我来说......）我无法更改构造函数的输入类型（即 myMap），但我需要在地图中放置一个对象。

有人会帮忙吗..？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:43:26.740

如果您认为 的类型与`someObject`兼容`myMap`，

```
((Map)myMap).put(k, v); 
```

# html - 位置/溢出/浮动 css 和 div

> ID：12850109
> 
> 赞同：0
> 
> 时间：2012-10-11T23:25:36.933
> 
> 标签：html, css

```
<html>
<head>

<style type="text/css">

.parent
{
    width: auto;
    height: auto;
    min-width: 600px;
    min-height: 600px;
    border: 1px dashed #f00;
    padding: 5px;
    overflow: auto;
    position: absolute;
}

.child
{
    width : 100px;
    height: 500px;
    border: 1px solid #0f0;
    float: left;
    position: relative;
}
.second_child
{
    width : 1800px;
    height: 100px;
    border: 1px solid black;
    float: left;
    position:relative;
}
</script>

</style>

</head>

<body style="overflow:auto">

<div class="parent">
    <div class="child">
    </div>
    <div class="second_child">
    </div>
</div>
</body>
</html> 
```

我想把两个盒子放在一个更大的盒子里。我把它放在一起，如果我将第二个框的宽度扩大到大于窗口的宽度，它现在可以正常工作了。例如，您的屏幕为 1024x720，第二个框的宽度为 1800 像素，第二个框重新定位在第一个框下方。我只是好奇它为什么这样做而不是放置滚动条并保持对象的位置。

我是否定位错误，或者我是否以错误的方式思考这个问题。我几乎很想用表格作为布局来尝试这个，但这对我来说似乎很反直觉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:28:28.783

这就是浮动 DOM 元素的本质。他们不强迫任何事情。如果你想让它们并排放置，你需要给容器一个宽度来支持内容（> 1904px）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:38:21.857

> 我只是好奇它为什么这样做而不是放置滚动条并保持对象的位置。

您可以设置`.parent`为`overflow: scroll;`强制执行此操作。

# ruby-on-rails - 如何为现有表中的列添加默认值？

> ID：12850112
> 
> 赞同：0
> 
> 时间：2012-10-11T23:26:14.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-migrations

> **可能重复：**
> [通过迁移向列添加默认值](https://stackoverflow.com/questions/7098602/add-a-default-value-to-a-column-through-a-migration)

我知道它不会影响现有数据，但对于未来的每条记录，我希望有一个默认值 - 即不`null`存储在列中。

如何在不删除列的情况下对现有列执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:18:37.693

按照评论中的链接，这对我有用：

```
change_table :my_model do |t|
     t.change_default :my_column, 0
end 
```

`0`我想设置的默认值在哪里- 并且`:my_column`是列的名称。

附加信息可以在[API Docs中找到](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/Table.html#method-i-change_default)

# c++ - C++：如何在协变返回类型中重用代码？

> ID：12850113
> 
> 赞同：0
> 
> 时间：2012-10-11T23:26:22.167
> 
> 标签：c++, inheritance, covariance, code-reuse

我有以下简单的课程

```
class base
{
public:
  int x;
  base &set(int y)
    {
      x = y;
      return *this;
    }
}; 
```

并想创建一个具有附加功能的新功能，例如打印值 x。所以我这样做：

```
class derived : public base
{
public:
  void print()
    {
      cout << x << endl;
    }
}; 
```

现在在主程序中我想做类似的事情

```
D.set(2).print(); 
```

然而，编译器抱怨类基没有名为“print”的成员。

如果我尝试使用协变返回类型并将这两个类写为

```
class base
{
public:
  int x;
  virtual base &set(int y)
    {
      x = y;
      return *this;
    }
};

class derived : public base
{
public:
  derived &set(int y)
    {
      x = y;
      return *this;
    }
  void print()
    {
      cout << x << endl;
    }
}; 
```

那么该语句工作得很好，但我被迫在两个类中为“set”重写完全相同的函数体，即使唯一改变的是返回类型。

如果以后我需要更改 base::set 的功能，那么我将不得不通过所有派生类来更改“set”功能......有什么办法可以避免这种情况吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:58:37.257

根据您的情况，您可能可以使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)：

```
template <class D>
class base {
    D& set(int x) {
        …;
        return *static_cast<D*>(this);
    }
};

class derived : base<derived> { … }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:43:49.520

C++ 像你说的那样工作，你在基类中说`set`return `base&`，所以这就是 C++ 所做的。但是为了解决这个问题，你有很多方法。

首先，您不必`virtual`在派生类中创建一个函数来覆盖它（请注意，虚拟调用比正常调用稍慢）。

其次，您可以参考基类实现，`base::set`因此代码如下：

```
class base {
    ...
    base& set( int x ) {...}
};
class derived : public base {
    derived& set( int x ) {
        return static_cast<derived&>( base::set(x) );
    }
}; 
```

# salesforce - Salesforce 使用 Web 服务显示自定义字段

> ID：12850121
> 
> 赞同：0
> 
> 时间：2012-10-11T23:26:51.613
> 
> 标签：salesforce, apex-code

我需要使用一些自定义字段自定义联系页面。

在联系人页面上，我想包含一些自定义字段，这些字段可以通过使用 apex 的 Web 服务调用填充，并且在调用页面时我应该能够将特定参数传递给 apex 代码以调用 Web 服务？

简而言之，我没有存储在 salesforce 数据库中的这个字段的值我有一些代码（需要为此调用的顶点代码）。并从不同的系统中获取价值。是否有可能以及如何？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T05:59:55.727

可以将 visualforce 页面嵌入到页面布局中。所以我建议创建一个如下例所示的 visualforce 页面。使用您已经拥有的执行 web 服务调用的 apex 代码作为此页面的控制器扩展，您将能够显示这些字段。

我唯一不清楚的是你想传递给你的网络服务的具体参数是什么？目前是如何传递到联系页面的？如果它只是一个 url 参数，您的控制器扩展将可以使用 ApexPages 类访问它。如果它是联系人的 ID，控制器扩展的构造函数将能够从 StandardController 参数中获取它。

需要注意的一些重要事项：

*   visualforce 页面必须使用 Contact standardController 才能作为可嵌入的 visualforce 页面使用。
*   如果联系人视图操作已被覆盖，则嵌入的 visualforce 页面将不会呈现。但是，如果页面已经被覆盖，则不会出现此问题，因为您可以将所需的代码直接添加到覆盖页面。

    ```
    <apex:pageBlock id="block">
        <apex:pageBlockSection id="section">
            <apex:pageBlockSectionItem id="item">
                <apex:outputLabel value="External Value:" for="externalValue" />
                <apex:outputText id="externalValue" value="{!externalField}" />
            </apex:pageBlockSectionItem>
        </apex:pageBlockSection>
    </apex:pageBlock> 
    ```

# php - EasyPhpThumbnail 动态裁剪

> ID：12850122
> 
> 赞同：1
> 
> 时间：2012-10-11T23:26:56.603
> 
> 标签：php, html

我正在 PHP 上建立画廊。我决定将 EasyPhpThumbnail 集成到我的项目中。

我遇到的问题是设置。

可能有人用过这个Class，可以分享一下经验。如果对其他班级有任何建议 - 我会很高兴听到他们的意见。

我想动态裁剪上传的图像。我想将缩略图大小设置为特定的宽度和高度。

有什么建议么？

我的代码现在看起来像这样：

```
$thumb = new Classes_Images_EasyThumbMaker();
$thumb -> Cropimage = array(1,0,20,20,35,35);  // maybe something should be set here.                               
$thumb -> Thumbwidth = 205;
$thumb -> Thumbheight = 156;
$thumb -> Quality = 100;
// Full path to the images
$pathToImage = 'uploads/portfolio/original/' . basename($form->image->getFileName());
//$thumb -> Chmodlevel = '0755';
$thumb -> Thumblocation = 'uploads/portfolio/thumb/';
$thumb -> Thumbprefix = 'thumb_';
// Create the thumbnail and save it
$thumb ->Createthumb($pathToImage, 'file'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:35:28.723

您可能需要使用文件的绝对路径，如下所示：

```
// Your full path to the images
$dir = str_replace(chr(92),chr(47),getcwd()) . 'uploads/' ; 
```

# javascript - Last.fm 使用 JQuery 进行 JSON 排序

> ID：12850124
> 
> 赞同：0
> 
> 时间：2012-10-11T23:27:29.563
> 
> 标签：javascript, jquery, sorting, last.fm

我正在执行 AJAX 调用以从 last.fm API 获取数据，并决定使用 JSON 作为返回数据类型。到现在为止还挺好。问题是这样的：我想使用`tag.getTopTags`API 中的方法获取热门曲目，它返回给我的 JSON 不是按受欢迎程度排序的（即使[他们说它是](http://www.last.fm/api/show/tag.getTopTags)）。

那么`count`，一旦我在代码中的变量中有这个 JSON，如何按属性（表示受欢迎程度）对这个 JSON 进行排序？

这是 JSON 的[示例](http://ws.audioscrobbler.com/2.0/?method=tag.getTopTags&api_key=f245911742cba645759331d8ec26f609&format=json)（请原谅缺少格式，这是来自他们在其网站上提供的链接）。它是这样的： toptags 有一个标签，其中包含一个标签数组，这些标签有名称、计数等......

这是我的代码中请求顶级曲目的方法（通过 GET 与我的 Web 服务器上的 PHP 文件 - 这工作正常）：

```
var getTopTracks = function() {
    $.getJSON(
      settings.PHP_REQUEST_URL,
      {
        method: "tag.getTopTags",
        api_key: settings.LASTFM_APIKEY,
        format: "json",
        callback: "?"
      },
      function(data) {
        // treat data here
      });
  }; 
```

我知道如何显示数据和东西，我只想在显示之前对数据进行排序。任何人都知道如何以简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:34:23.937

您将要使用 Array 的内置排序方法和传入的比较器函数。在您的情况下：

```
data.toptags.tag.sort(function (t1, t2) {
    return t1.count - t2.count;
}); 
```

代码非常不言自明，但它的工作方式是使用 Array 原型提供的常规排序函数，并通过提供的比较函数比较数组中的元素。因此，当它进行比较检查时（比如 count1 > 比 count2相比下。

# view - 使用外部类以编程方式创建视图控制器视图

> ID：12850129
> 
> 赞同：1
> 
> 时间：2012-10-11T23:28:01.857
> 
> 标签：view, controller

我正在尝试创建一个类，使我可以轻松地在任何视图控制器中实现教程屏幕“覆盖”。我使用以下内容作为参考：

[http://highoncoding.com/Articles/824_Creating_Pulse_Application_Like_Tutorial_Overlay.aspx](http://highoncoding.com/Articles/824_Creating_Pulse_Application_Like_Tutorial_Overlay.aspx)

所以，我希望我可以创建一个类（即 TutorialOverlay.h / TutorialOverlay.m ），然后在给定的视图控制器（即 VievController.h / ViewController.m ）内我可以实例化该类的一个实例并创建一个通过执行以下操作来覆盖教程屏幕：

@property (nonatomic,strong) TutorialOverlay *tutorialScreen; @synthesize tutorialScreen = _tutorialScreen;

self.tutorialScreen = [[TutorialOverlay alloc] initWithValues:@"specialscreen.png"]; [self.tutorialScreen showScreen];

我遇到的问题是：由于我将 highoncoding.com 示例中的所有代码都保存到了这个外部类（即 TutorialOverlay.h / TutorialOverlay.m ）中，因此该代码无法执行最后一个 [self.view addSubview:topView ] 因为外部类在调用它的视图控制器中看不到/使用视图。

我不知道去哪里做这项工作 - 代表？制作 UIView 的 TutorialOverlay.h / TutorialOverlay.ma 子类？

任何帮助和指导表示赞赏 - 能够轻松地将这些类型的教程屏幕抽出并添加额外的逻辑，使它们仅在应用程序第一次运行时运行等，而不是重新编码中的方法，那就太好了每个视图控制器！

# java - 基本面向对象设计java

> ID：12850134
> 
> 赞同：0
> 
> 时间：2012-10-11T23:28:26.760
> 
> 标签：java, oop, object

我真的不明白面向对象设计的原理？？所以我有课

地图类保存房间并连接所有房间，将所有危险随机放入房间，返回微粒房间，返回随机房间。

和

玩轮流的玩家类，将玩家从一个房间移动到另一个房间，射入房间并玩游戏。

还

房间等级如下。

```
import java.util.ArrayList;

public class Room
{
    private int myRoomID;
    private ArrayList<Room> myNeighbours;

    private boolean myHasBats;
    private boolean myHasPit;
    private boolean myHasWumpus;

    public Room(int id) {
        myRoomID = id; 
        myNeighbours = new ArrayList<Room>();
    }

    public int getRoomID() {
        return myRoomID;
    }

    public ArrayList<Room> getNeighbours() {
        return myNeighbours;
    }

    public void connectTo(Room room) {
        myNeighbours.add(room);
    }    

    public boolean hasBats() {
        return myHasBats;
    }

    public void setHasBats(boolean flag) {
        myHasBats = flag;
    }

    public boolean hasPit() {
        return myHasPit;
    }

    public void setHasPit(boolean flag) {
        myHasPit = flag;
    }

    public boolean hasWumpus() {
        return myHasWumpus;
    }

    public void setHasWumpus(boolean flag) {
        myHasWumpus = flag;
    }

    public void checkBats() {
        boolean bats = false;
        for (Room r : myNeighbours) {
            if (r.hasBats()) {
                bats = true;
            }
        }
        if (bats) {
            System.out.println("I hear squeaking!");
        }
    }

    public void checkPit() {
        boolean pit = false;
        for (Room r : myNeighbours) {
            if (r.hasPit()) {
                pit = true;
            }
        }
        if (pit) {
            System.out.println("I feel a draft!");
        }
    }

    public void checkWumpus() {
        boolean wumpus = false;
        for (Room r : myNeighbours) {
            if (r.hasWumpus()) {
                wumpus = true;
            }
        }
        if (wumpus) {
            System.out.println("I smell a wumpus!");
        }
    }

    public boolean enter(Player player) {
        System.out.println("You are in Room " + myRoomID);
        System.out.print("Exits lead to rooms");

        for (Room r : myNeighbours) {
            System.out.print(" " + r.getRoomID());
        }
        System.out.println();
        checkBats();
        checkPit();
        checkWumpus();

        if (myHasBats) {
            System.out.println("A flock of bats picks you up and carries you off to another room!");
            return player.moveRandom();
        }
        else if (myHasPit) {
            System.out.println("You fall into a bottomless pit!");
            return true;
        }
        else if (myHasWumpus) {
            System.out.println("You have been eaten by a wumpus!");            
            return true;
        }

        return false;
    }

public boolean shoot()

        if (myHasWumpus) {

            System.out.println("You killed the Wumpus!");

            return true;

        }
        else {

            System.out.println("Your arrow falls with a clatter to the floor!");

            return false;

        }

    } 
```

我想改变这一点，这样 wumpus 需要被多次射击（你选择多少次）才能被杀死。每次射击时，它都会随机跑到相邻的房间（不是玩家所在的房间）。

我假设我需要将`public boolean shoot()`方法更改为循环并调用`public Room getRandomRoom()`如下。

但我真的不明白如何做到这一点，特别是因为布尔方法的使用让我很困惑。有谁知道我在哪里可以找到学习面向对象设计基础的信息？

```
 public Room getRandomRoom() {

        Random rng = new Random();

        int i = rng.nextInt(Map.NUM_ROOMS);  

        return myRooms.get(i);

  } 
```

稍后我们将`implements`在类中使用将所有危险划分为类。但不是他们都在地图和房间类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:49:38.490

好吧，如果没有 wumpus 类，那将是混乱和有限的，甚至会更加低效。您的问题不是您没有获得 OO，而是您被限制使用它。

没有下课。你将不得不向房间添加一个 myWumpusShotCount 然后在你的拍摄功能中，向它添加 1，测试它是否为 3，如果是，则将其杀死，否则随机选择一个房间并在其中设置 hasWumpus 和 WumpusShotCount

如果你有一个 wumpus 类，它会有一个属性房间，另一个是它运送了多少子弹和射击时的行为，即 wumpus 的状态和 wumpus 的行为将由 wumpus 实现，而不是房间。那是OO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:09:01.417

在托尼霍普金森的帮助下，我想出了这段代码，但它还没有编译。它说找不到符号 - 方法`getRandomRoom() To call the method`getRandomRoom();` 来自 Map 类。随机发送 wumpus 到另一个房间

```
public boolean shoot() {

 if (myHasWumpus) {
   myWumpusShotCount = 3;
   for(int i = 0; i< myWumpusShotCount; i++){
      if(myWumpusShotCount<=i){ 
          System.out.println("You killed the Wumpus!");
          return true;
      }
      else {
         Room wRoom = getRandomRoom(); 
         System.out.println("You killed the Wumpus!");
         return false;
         myWumpusShotCount++;

      }

        System.out.println("Your arrow falls with a clatter to the floor!");
        return false;
}

         System.out.println("You killed the Wumpus!");
         return true;
      }
   }
        System.out.println("Your arrow falls with a clatter to the floor!");
        return false;
} 
```

# php - 在 php 的全局空间中使用类函数？

> ID：12850136
> 
> 赞同：0
> 
> 时间：2012-10-11T23:28:34.157
> 
> 标签：php

是否可以从类实例中提取所有方法并在全局空间中使用它们？

说我有：

```
class Library {
  public function num_one() { echo "number one"; }
  public function num_two() { echo "number two"; }
} 
```

加载类后，我希望能够在不指定实例的情况下使用函数

```
include '/path/to/library-class.php';
$lib = new Library();

#$lib->num_one();
#$lib->num_two();

num_one();
num_two(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:34:28.787

例如，您可以将它们设为静态

```
class Library {
    public static function num_one() { echo "number one"; }
    public static function num_two() { echo "number two"; }
} 
```

那么你可以使用

```
Library::num_one()
Library::num_two() 
```

你也不需要'$lib = new Library();' 然后行:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:34:38.830

我不确定您为什么需要这样做，因为 OOP 的优点之一是将方法安全地封装到命名空间中并防止函数名称发生冲突。

但是，如果您绝对需要这样做（并且我认为您可以并且应该以不必这样做的方式进行重构），则可以这样做；您可以将其添加到 /path/to/library-class.php：

```
class Library {
    public function num_one() { echo "number one"; }
    public function num_two() { echo "number two"; }
}

$global_Library = new Library();

function num_one ($whateverParameter) {
    global $global_Library;
    return $global_Library->num_one($whateverParameter);
}
// Continue adding your wrapper functions here. 
```

我仍然认为使用静态方法比你要求做的更好，即使它们不应该被视为万灵药。

[http://code.google.com/p/google-singleton-detector/wiki/WhySingletonsAreControversial](http://code.google.com/p/google-singleton-detector/wiki/WhySingletonsAreControversial)

# javascript - 使用 YUI Masonry 插件添加新项目

> ID：12850139
> 
> 赞同：0
> 
> 时间：2012-10-11T23:28:48.990
> 
> 标签：javascript, yui

根据[这里的文档，](http://yui-masonry.appspot.com/yuidoc/classes/Masonry.html#method_appended)我应该可以使用

```
Y.one("#container").appended( newImages, function(){
   console.log("appended");
}); 
```

向我的页面添加新项目，但我收到一条错误消息`#container has no method 'appended'`。

如果我尝试`Y.one("#container").masonry('appended', newImages);`它告诉我`#container`没有“砌体”方法

我确实在我的函数开始时定义了砌体，`var masonry = new Y.Masonry({ ...`所以我对我缺少的东西感到困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:57:23.703

您将 jQuery 样式与 YUI 样式混淆了一点。在 jQuery 中调用该`$`函数会返回一个`jQuery`具有很多函数的对象。但在 YUI 中，并非所有组件都是可以从节点查询中调用的方法。在这种情况下，Masonry 被定义为一个类，所有实例都可以从中获取某些方法，例如`appended()`or `reload()`。这意味着您的代码应如下所示：

```
var masonry = new Y.Masonry({ ... });
masonry.appended(newImages, function () {
  console.log("appended");
}); 
```

# r - 子集的编程安全版本 - 在从另一个函数调用时评估其条件

> ID：12850141
> 
> 赞同：12
> 
> 时间：2012-10-11T23:28:51.020
> 
> 标签：r

如`subset()`手册所述：

> **警告**：这是一个旨在交互使用的便利功能

我从[这篇很棒的文章中](http://adv-r.had.co.nz/Computing-on-the-language.html)不仅学到了这个警告背后的秘密，而且很好地理解了`substitute()`, `match.call()`, `eval()`, `quote()`, ‍<code>call`promise`和其他相关的 R 主题，这些主题有点复杂。

现在我明白了上面的警告是什么。一个超级简单的实现`subset()`可能如下：

```
subset = function(x, condition) x[eval(substitute(condition), envir=x),] 
```

虽然返回满足`subset(mtcars, cyl==4)`的行表，但封装在另一个函数中失败：`mtcars``cyl==4``subset()`

```
sub = function(x, condition) subset(x, condition)

sub(mtcars, cyl == 4)
# Error in eval(expr, envir, enclos) : object 'cyl' not found 
```

使用 的原始版本`subset()`也会产生完全相同的错误情况。这是由于`substitute()-eval()`pair 的限制：虽然`condition`is可以正常工作`cyl==4`，但是当`condition`通过包络函数传递时`sub()`，`condition`参数`subset()`将不再是`cyl==4`，而是嵌套`condition`在`sub()`主体中，并且`eval()`失败 - 这有点复杂。

但是它是否存在`subset()`具有**完全相同的参数**的任何其他实现，这些参数将是编程安全的 - 即能够在另一个函数调用它时评估它的条件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T23:39:38.280

[ 功能是您正在寻找的。?"["。`mtcars[mtcars$cyl == 4,]`等效于子集命令并且是“编程”安全的。

```
sub = function(x, condition) {
 x[condition,]
}

sub(mtcars, mtcars$cyl==4) 
```

`with()`在函数调用中没有隐含的情况下执行您的要求。细节很复杂，但功能如下：

```
sub = function(x, quoted_condition) {
  x[with(x, eval(parse(text=quoted_condition))),]
}

sub(mtcars, 'cyl==4') 
```

Sorta 可以满足您的需求，但在某些极端情况下，这会产生意想不到的结果。

* * *

使用`data.table`和`[`子集函数，您可以获得`with(...)`您正在寻找的隐式。

```
library(data.table)
MT = data.table(mtcars)

MT[cyl==4] 
```

有更好、更快的方法可以在 中进行此子集化`data.table`，但这很好地说明了这一点。

* * *

使用`data.table`您还可以构造表达式以供稍后评估

```
cond = expression(cyl==4)

MT[eval(cond)] 
```

这两个现在可以通过函数传递：

```
wrapper = function(DT, condition) {
  DT[eval(condition)]
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T03:57:59.160

这是一个替代版本，`subset()`即使它是嵌套的，它也可以继续工作——至少只要将逻辑子集表达式（例如`cyl == 4`）提供给顶级函数调用。

它通过爬上调用堆栈来工作，`substitute()`在每个步骤中最终捕获用户传入的逻辑子集表达式。`sub2()`例如，在下面的调用中，`for`循环将调用堆栈从`expr`到`x`到`AA`最后到`cyl ==4`。

```
SUBSET <- function(`_dat`, expr) {
    ff <- sys.frames()
    ex <- substitute(expr)
    ii <- rev(seq_along(ff))
    for(i in ii) {
        ex <- eval(substitute(substitute(x, env=sys.frames()[[n]]),
                              env = list(x = ex, n=i)))
    }
    `_dat`[eval(ex, envir = `_dat`),]
}

## Define test functions that nest SUBSET() more and more deeply
sub <- function(x, condition) SUBSET(x, condition)
sub2 <- function(AA, BB) sub(AA, BB)

## Show that it works, at least when the top-level function call
## contains the logical subsetting expression
a <- SUBSET(mtcars, cyl == 4)  ## Direct call to SUBSET()
b <- sub(mtcars, cyl == 4)     ## SUBSET() called one level down
c <- sub2(mtcars, cyl == 4)    ## SUBSET() called two levels down

identical(a,b)
# [1] TRUE
> identical(a,c)
# [1] TRUE
a[1:5,]
#                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
# Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
# Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
# Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
# Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
# Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2 
```

** 有关`for`循环内部构造的一些解释，请参阅R 语言定义手册的[第 6.2 节第 6 段。](http://cran.r-project.org/doc/manuals/R-lang.html#Substitutions)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T23:19:58.517

仅仅因为它是如此令人费解的乐趣（？？），这里有一个稍微不同的解决方案，它解决了哈德利在对我接受的解决方案的评论中指出的问题。

Hadley[发布了一个要点](https://gist.github.com/3880527)，展示了我接受的功能出错的情况。该示例中的扭曲（复制如下）是传递给的符号`SUBSET()`是在调用函数之一的主体（而不是参数）中定义的；因此，它被`substitute()`而不是预期的全局变量捕获。令人困惑的东西，我知道。

```
f <- function() {
  cyl <- 4
  g()
}

g <- function() {
  SUBSET(mtcars, cyl == 4)$cyl
}
f() 
```

这是一个更好的函数，它只会替换调用函数的参数列表中的符号值。它适用于 Hadley 或我迄今为止提出的所有情况。

```
SUBSET <- function(`_dat`, expr) {
   ff <- sys.frames()
   n <- length(ff)
   ex <- substitute(expr)
   ii <- seq_len(n)
   for(i in ii) {
       ## 'which' is the frame number, and 'n' is # of frames to go back.
       margs <- as.list(match.call(definition = sys.function(n - i),
                                   call = sys.call(sys.parent(i))))[-1]
       ex <- eval(substitute(substitute(x, env = ll),
                             env = list(x = ex, ll = margs)))
   }
   `_dat`[eval(ex, envir = `_dat`),]
}

## Works in Hadley's counterexample ...
f()
# [1] 4 4 4 4 4 4 4 4 4 4 4

## ... and in my original test cases.
sub <- function(x, condition) SUBSET(x, condition)
sub2 <- function(AA, BB) sub(AA, BB)

a <- SUBSET(mtcars, cyl == 4)  ## Direct call to SUBSET()
b <- sub(mtcars, cyl == 4)     ## SUBSET() called one level down
c <- sub2(mtcars, cyl == 4)
all(identical(a, b), identical(b, c))
# [1] TRUE 
```

**重要提示：**请注意，这仍然不是（也不能成为）*普遍*有用的功能。该函数根本无法知道您希望它在它执行的所有替换中使用哪些符号，因为它在调用堆栈上工作。在许多情况下，用户*希望*它使用分配给函数体内的符号值，但此函数将始终忽略这些值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T11:30:38.730

**更新：**

这是一个新版本，它解决了两个问题：

a) 以前的版本只是简单地`sys.frames()`向后遍历。此版本将遵循`parent.frames()`直到达到`.GlobalEnv`. 这在例如应该忽略 ' 框架的情况`subscramble`下很重要。`scramble`

`substitute`b) 这个版本每个级别都有一个。这可以防止第二次`substitute`调用替换第一次`substitute`调用引入的更高级别的符号。

```
subset <- function(x, condition) {

    call <- substitute(condition)
    frames <- sys.frames()
    parents <- sys.parents()

    # starting one frame up, keep climbing until we get to .GlobalEnv 
    i <- tail(parents, 1)
    while(i != 0) {

        f <- sys.frames()[[i]]

        # copy x into f, except for variable with conflicting names.
        xnames <- setdiff(ls(x), ls(f))
        for (n in xnames) assign(n, x[[n]], envir=f)

        call <- eval(substitute(substitute(expr, f), list(expr=call)))

        # leave f the way we found it
        rm(list=xnames, envir=f)

        i <- parents[i]
    }

    r <- eval(call, x, .GlobalEnv)

    x[r, ]
} 
```

这个版本通过了@hadley 的评论测试：

```
mtcars $ condition <- 4; subscramble(mtcars, cyl == 4) 
```

不幸的是，以下两个示例现在表现不同：

```
cyl <- 6; subset(mtcars, cyl==4)
local({cyl <- 6; subset(mtcars, cyl==4)}) 
```

* * *

这是对 Josh 的第一个函数的轻微修改。在堆栈中的每一帧，我们`x`在从帧中替换之前替换。这意味着数据框中的符号在每一步都具有优先权。我们可以通过在循环中`_dat`跳过`subset`'s 帧来避免伪生成符号。`for`

```
subset <- function(x, condition) {

    call <- substitute(condition)
    frames <- rev(sys.frames())[-1]

    for(f in frames) {

        call <- eval(substitute(substitute(expr, x), list(expr=call)))
        call <- eval(substitute(substitute(expr, f), list(expr=call)))
    }

    r <- eval(call, x, .GlobalEnv)

    x[r, ]
} 
```

这个版本在简单的情况下工作（值得检查我们没有回归）：

```
subset(mtcars, cyl == 4)
#                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
# Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
# Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
# Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
# Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
# Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
# Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
# Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
# Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
# Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
# Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
# Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2 
```

它也适用于`subscramble`and `f`：

```
scramble <- function(x) x[sample(nrow(x)), ]
subscramble <- function(x, condition) scramble(subset(x, condition))

subscramble(mtcars, cyl == 4) $ cyl
# [1] 4 4 4 4 4 4 4 4 4 4 4

f <- function() {cyl <- 4; g()}
g <- function() subset(mtcars, cyl == 4) $ cyl

g()
# [1] 4 4 4 4 4 4 4 4 4 4 4 
```

甚至可以在一些更棘手的情况下工作：

```
gear5 <- function(z, condition) {

    x <- 5
    subset(z, condition & (gear == x))
}

x <- 4
gear5(mtcars, cyl == x)
#                mpg cyl  disp  hp drat    wt qsec vs am gear carb
# Porsche 914-2 26.0   4 120.3  91 4.43 2.140 16.7  0  1    5    2
# Lotus Europa  30.4   4  95.1 113 3.77 1.513 16.9  1  1    5    2 
```

* * *

`for`循环内的行可能需要一些解释。假设`call`分配如下：

```
call <- quote(y == x)
str(call)
# language y == x 
```

我们想将值替换`4`为`x`in `call`。但是直截了当的方法是行不通的，因为我们想要的是 的内容`call`，而不是符号`call`。

```
substitute(call, list(x=4))
# call 
```

所以我们使用另一个`substitute`调用来构建我们需要的表达式。

```
substitute(substitute(expr, list(x=4)), list(expr=call))
# substitute(y == x, list(x = 4)) 
```

现在我们有了一个描述我们想要做什么的语言对象。剩下的就是让它真正做到这一点：

```
eval(substitute(substitute(expr, list(x=4)), list(expr=call)))
# y == 4 
```

# android - Android 基础：在 UI 线程中运行代码

> ID：12850143
> 
> 赞同：487
> 
> 时间：2012-10-11T23:28:55.027
> 
> 标签：android, android-asynctask, android-view, android-ui

从在 UI 线程中运行代码的角度来看，两者之间有什么区别：

```
MainActivity.this.runOnUiThread(new Runnable() {
    public void run() {
        Log.d("UI thread", "I am the UI thread");
    }
}); 
```

或者

```
MainActivity.this.myView.post(new Runnable() {
    public void run() {
        Log.d("UI thread", "I am the UI thread");
    }
}); 
```

和

```
private class BackgroundTask extends AsyncTask<String, Void, Bitmap> {
    protected void onPostExecute(Bitmap result) {
        Log.d("UI thread", "I am the UI thread");
    }
} 
```

* * *

## 回答 #1

> 赞同：309
> 
> 时间：2012-10-11T23:33:44.123

这些都不是完全相同的，尽管它们都会产生相同的净效应。

第一个和第二个的区别在于，如果您在执行代码时恰好*在*主应用程序线程上，第一个（`runOnUiThread()`）将`Runnable`立即执行。第二个 ( `post()`) 始终将 放在`Runnable`事件队列的末尾，即使您已经在主应用程序线程上。

第三个，假设您创建并执行 的实例`BackgroundTask`，将浪费大量时间从线程池中获取线程，执行默认的 no-op `doInBackground()`，然后最终执行相当于 a 的操作`post()`。这是迄今为止三者中效率最低的。如果`AsyncTask`您在后台线程中确实有工作要做，请使用，而不仅仅是为了使用`onPostExecute()`.

* * *

## 回答 #2

> 赞同：281
> 
> 时间：2014-08-11T19:01:03.300

我喜欢来自[HPP 的评论](https://stackoverflow.com/questions/12850143/android-basics-running-code-in-the-ui-thread/12850234#comment28293125_12850234)，它可以在任何地方使用，无需任何参数：

```
new Handler(Looper.getMainLooper()).post(new Runnable() {
    @Override
    public void run() {
        Log.d("UI thread", "I am the UI thread");
    }
}); 
```

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2012-10-11T23:36:59.190

还有第四种使用方法[`Handler`](http://mobileorchard.com/android-app-developmentthreading-part-1-handlers/)

```
new Handler().post(new Runnable() {
    @Override
    public void run() {
        // Code here will run in UI thread
    }
}); 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-01-05T09:24:54.150

Pomber 的回答是可以接受的，但是我不喜欢重复创建新对象。最好的解决方案总是那些试图减轻内存占用的解决方案。是的，有自动垃圾收集，但移动设备中的内存保护属于最佳实践范围。下面的代码更新服务中的 TextView。

```
TextViewUpdater textViewUpdater = new TextViewUpdater();
Handler textViewUpdaterHandler = new Handler(Looper.getMainLooper());
private class TextViewUpdater implements Runnable{
    private String txt;
    @Override
    public void run() {
        searchResultTextView.setText(txt);
    }
    public void setText(String txt){
        this.txt = txt;
    }

} 
```

它可以在任何地方使用，如下所示：

```
textViewUpdater.setText("Hello");
        textViewUpdaterHandler.post(textViewUpdater); 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2018-03-09T03:54:48.497

从 Android P 开始，您可以使用`getMainExecutor()`：

```
getMainExecutor().execute(new Runnable() {
  @Override public void run() {
    // Code will run on the main thread
  }
}); 
```

来自[Android 开发者文档](https://developer.android.com/reference/android/content/Context.html#getMainExecutor())：

> 返回一个 Executor，它将在与此上下文关联的主线程上运行排队的任务。这是用于分派对应用程序组件（活动、服务等）的调用的线程。

来自[CommonsBlog](https://commonsware.com/blog/2018/03/08/random-musings-p-developer-preview-1.html)：

> 您可以在 Context 上调用 getMainExecutor() 来获取将在主应用程序线程上执行其作业的 Executor。还有其他方法可以实现这一点，使用 Looper 和自定义 Executor 实现，但这更简单。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2018-04-28T14:32:10.443

如果你需要在 Fragment 中使用，你应该使用

```
private Context context;

    @Override
    public void onAttach(Context context) {
        super.onAttach(context);
        this.context = context;
    }

    ((MainActivity)context).runOnUiThread(new Runnable() {
        public void run() {
            Log.d("UI thread", "I am the UI thread");
        }
    }); 
```

代替

```
getActivity().runOnUiThread(new Runnable() {
    public void run() {
        Log.d("UI thread", "I am the UI thread");
    }
}); 
```

因为在某些情况下会出现空指针异常，例如寻呼机片段

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-06-01T04:50:25.057

使用**处理程序**

```
new Handler(Looper.getMainLooper()).post(new Runnable() {
    @Override
    public void run() {
        // Code here will run in UI thread
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-08T13:35:04.307

科特林版本：

```
Handler(Looper.getMainLooper()).post {
   Toast.makeText(context, "Running on UI(Main) thread.", Toast.LENGTH_LONG).show()
} 
```

或者，如果您使用的是 Kotlin 协程：在协程范围内添加：

```
withContext(Dispatchers.Main) {
   Toast.makeText(context, "Running on UI(Main) thread.", Toast.LENGTH_LONG).show()
} 
```

# playframework - 在 ebean 数据库中存储 textarea 内容

> ID：12850145
> 
> 赞同：0
> 
> 时间：2012-10-11T23:29:17.263
> 
> 标签：playframework, playframework-2.0, ebean

我认为这个问题可能有点愚蠢——我正在做我的第一个 Play 项目，因此我仍在训练中尝试了解该软件；）

好吧，我有一个包含 textarea 的页面。用户应该能够在那里输入文本并将其永久存储在标准 ebean 数据库中。但是存储永远不起作用，我找不到原因！

这是数据库对象的类定义：

```
public class Entry extends Model {
    @Required
    public String   text;   
    public String   studentName;
    @Id
    public long     id;
    public static   Finder<Long, Entry> finder = new Finder<Long, Entry>( Long.class, Entry.class);

    public static Entry getMe(Long id) {
        return finder.byId(id);
    }
    public static void saveMe(Entry toDataBase) {
        toDataBase.save();
    }
    // ....
 } 
```

这是文本区域：

```
@(entryForm: Form[Entry])
@import helper._
@main("xy") {

<h1>report for @entryForm("studentName")</h1>

    @form(routes.Application.storeReport()) {
        @textarea(entryForm("report:"))
        <input type="submit" value="Store Report">
    }
} 
```

在`Application.storeReport()`方法 entryForm.bindFromRequest().hasErrors() 中总是 true..

并更改`@textarea(entryForm("report:"))`为`@textarea(entryForm("text"))`（..告诉事情，我真正想要填写的 3 个条目字段中的哪一个）甚至会导致 PersistenceException：

> “类型 [class models.Entry] 不是注册实体？如果您没有明确列出要使用的实体类，Ebean 将在类路径中搜索它们。如果实体在 Jar 中，请检查 ebean.search.jars ebean.properties 文件中的属性或检查 ServerConfig.addJar()。]"

以[ToDoList 示例](http://www.playframework.org/documentation/2.0.2/JavaTodoList)为导向，除了让它扩展 play.db.ebean.Model 之外，我无法检测到如何注册一个实体！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T06:30:46.567

我认为您忘记了 Entry 类上的 @Entity 注释。

# feed - Web 平台安装程序 - 未找到 ProductId NETFramework4

> ID：12850146
> 
> 赞同：2
> 
> 时间：2012-10-11T23:29:27.003
> 
> 标签：feed, runtime-error, web-platform-installer

在尝试设置 mojoPortal 时在 Web 平台安装程序中设置自定义提要后，程序因错误而崩溃`ProductId NETFramework4 not found`：

[![](../Images/b9f8af8507302fc78b48cbddfdef7fa6.png)](https://i.stack.imgur.com/jtdHd.png)

当尝试再次启动程序时，启动时发生了同样的错误。

我尝试重新安装程序，但问题仍然存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T23:29:27.003

对我有用的修复是删除文件`webpi.preferences`夹中的配置文件：

```
C:\Users\UserName\AppData\Roaming\Microsoft\Web Platform Installer 
```

要到达那里，您可以：

1.  按：`Win`+`R`

2.  类型：%APPDATA%`Enter`

3.  然后导航到上面提到的文件夹并删除首选项文件。

# java - 在 Java 中，如何在进行选择后隐藏 JList？

> ID：12850149
> 
> 赞同：1
> 
> 时间：2012-10-11T23:29:30.650
> 
> 标签：java, swing, hide, jlist

我正在用 Java 制作一个简单的石头剪刀布游戏，我有两个 JList，玩家 1 和玩家 2 可以在其中进行选择。问题是，我希望在进行选择时隐藏 JList（出于显而易见的原因，否则游戏将毫无意义^_^），但我还没有找到一种方法来做到这一点并且仍然保持选中状态价值。谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:34:17.260

JList 扩展了 JComponent，它有一个[广泛的方法列表，](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html)您可以在不同程度上使用。例如，如果您只想从用户交互中禁用 JList，则[setEnabled](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#setEnabled%28boolean%29)将“灰色”该组件。如果要完全隐藏 JList，请参阅[setVisible](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#setVisible%28boolean%29)。

无论您采用哪种方式，只需将其中一种方法放在用户进行选择的位置，您就可以开始了。为了存储用户的选择，您需要将其保存到超出该特定 JList 的变量中，以便稍后将其与对手的值进行比较。我建议[读一读](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:53:32.620

jlist1.setVisible(false) 将使其不可见

# c# - 枚举语法 - 末尾允许额外的逗号？

> ID：12850158
> 
> 赞同：3
> 
> 时间：2012-10-11T23:30:51.427
> 
> 标签：c#

惊讶地发现 C# Enum 定义似乎允许在末尾添加一个额外的逗号（至少在 VS2010 中）。

例如：

```
public enum EnumTest1
{
    Abc,
    Def,
} 
```

即“Def”末尾有一个逗号。只是想知道这是设计允许的，还是疏忽。（这可能很高兴知道，因为如果它是一个错误，则可能无法保证像上面这样的代码将在未来的 C# 版本中编译）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T23:34:03.673

这是设计允许的。同样，您也可以在初始化程序中使用尾随逗号。例如：

```
var ints = new[] { 2, 3, 4, 3, };

var obj = new SomeClass { Prop1 = "foo", Prop2 = "bar", }; 
```

我认为允许尾随逗号可以更轻松地创建自动生成的代码，因为在代码中输出列表时不必添加最后一个列表逻辑。

# php - 在 PHP 中插入 HTML 电子邮件模板

> ID：12850161
> 
> 赞同：0
> 
> 时间：2012-10-11T23:30:57.087
> 
> 标签：php, html, email, templates

有人可以帮我理解问题所在。我已经尝试过几次让它正常运行，但没有成功。我正在尝试将我的 HTML 电子邮件模板插入到 php 文件中，该文件会生成自动电子邮件响应以注册到我的网站。

这是文件：

```
function simplr_send_notifications($atts, $data, $passw) {
$site = get_option('siteurl');
$name = get_option('blogname');
$user_name = @$data['username'];
$email = @$data['email'];
$notify = @$atts['notify'];
$emessage = apply_filters('simplr_email_confirmation_message');
$message = <<<EOF 
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

   I cut out the bulk of the template to save space...
        </table>
    </center>
</body>
</html>
EOF;
$headers = "From: $name" . ' <' .get_option('admin_email') .'> ' ."\r\n\\";
wp_mail($notify, "A new user registered for $name", "A new user has registered for $name.\rUsername: $user_name\r Email: $email \r",$headers);
$emessage = $emessage . "\r\r---\r";
    if(!isset($data['password'])) {
        $emessage .= "You should login and change your password as soon as possible.\r\r";
    }
$emessage .= "Username: $user_name\r";
$emessage .= (isset($data['fbuser_id']))?'Registered with Facebook':"Password: $passw\rLogin: $site/wp-login.php";
wp_mail($data['email'],"$name - Registration Confirmation", $emessage, $headers); 
```

任何帮助表示赞赏！谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-27T10:28:47.330

尝试这个

```
<?php

            $template_text=addslashes('<table background="http://www.saptatec.com/shivusapta/ram/livesearch1/kcr.gif;"><tr><tr><th background="http://www.saptatec.com/shivusapta/ram/livesearch1/kcr.gif">mail</th></tr><tr><tr><th>email</th></tr> <tr><tr><th>gmail</th></tr><tr><td><img src="http://www.saptatec.com/shivusapta/ram/livesearch1/kcr.jpg" alt="baba"" /></td> </tr></table>');

            eval("\$body=\"$template_text\";");

            $header="Content-type:text/html \r\n";
            $header.="From: From Name <noreply@yourweb.com> \r\n";

            mail("yiy143@gmail.com","Activate Your Account",$body,$header);
?> 
```

# iphone - 检查有效的 Facebook 会话

> ID：12850162
> 
> 赞同：1
> 
> 时间：2012-10-11T23:30:57.507
> 
> 标签：iphone, ios, facebook, ios5, facebook-ios-sdk

我只是在检查 FBSession 的状态

```
- (BOOL)hasValidSession {
    return (self.session.state == FBSessionStateOpen)
 } 
```

有时状态会短暂更改为 FBSessionStateOpenTokenExtended，这将返回 NO，这会降低我的登录模式。当我再次单击连接时，它会使应用程序崩溃以尝试重新建立活动的 facebook 会话。所以我把它改成了

```
- (BOOL)hasValidSession {
if (self.session.state == FBSessionStateOpen || self.session.state == FBSessionStateOpenTokenExtended) {
    return YES;
}
else {
    return NO;
}} 
```

到目前为止，我的上述方法有效，但它似乎是一个 hack……在您的应用程序中检查有效会话的最佳普遍方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T23:41:07.210

这是我在我的应用程序中检查 facebook 会话的方式，它适用于我：

```
-(BOOL)checkFacebookSession
{
    if([FBSession activeSession].state == FBSessionStateCreatedTokenLoaded)
    {
        NSLog(@"Logged in to Facebook");
        [self openFacebookSession];
        UIAlertView *alertDialog;

        alertDialog = [[UIAlertView alloc] initWithTitle:@"Facebook" message:@"You're already logged in to Facebook" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];

        [alertDialog show];

        [alertDialog release];
        return YES;
    }
    else{
        NSLog(@"Not logged in to Facebook");
        return NO; //Show login flow.
    }
} 
```

希望能帮助到你！:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T06:35:20.750

如果状态为 in`FBSessionStateOpen`或 in ，则会话处于活动状态`FBSessionStateOpenTokenExtended`。您可以使用下面的方法来获取用户当前的登录状态：

```
- (BOOL)isActiveSession
{
    return (FBSession.activeSession.state == FBSessionStateOpen 
           || FBSession.activeSession.state == FBSessionStateOpenTokenExtended);
} 
```

# shell - C shell 对大数进行算术运算

> ID：12850167
> 
> 赞同：1
> 
> 时间：2012-10-11T23:31:28.950
> 
> 标签：shell, unix, csh

首先：不好意思用c shell，怪我公司不怪我。我和你们大多数人现在一样讨厌这该死的东西（起初我想，嘿，这还不错）。

我正在尝试减去从时间戳中获得的大量数字。这是我正在尝试的：

```
set curTime = `date +%s%N`
#... some stuff
@curTime = `date +%s%N` - $curTime #get the diff
echo "time taken: $curTime" 
```

但是我猜这些数字太大了——在我尝试几秒钟之前它工作得很好。这是我在日志中看到的内容：

```
@curMilli = 1349996279792995000 - 1349996279170458000
@curMilli: Command not found. 
```

正如我所说，我做了完全相同的事情`date +%s`并且很好，所以我假设这与数字的庞大有关。

我怎样才能做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:33:35.273

文章[http://en.wikipedia.org/wiki/Bc_programming_language](http://en.wikipedia.org/wiki/Bc_programming_language)有一个简短的部分“在 shell 脚本中使用 bc”。一个测试：

```
set curTime = `/bin/date +%s%N`
/bin/sleep 2
set prevTime = $curTime
set curTime = `/bin/date +%s%N`
set diff = `echo "$curTime - $prevTime;" | /usr/bin/bc`
echo $diff 
```

`20`将给出（初始变量后面的数字）：

```
2016204108 
```

Ps：我希望我能投票给你两次`"I hate the damn thing as much as most of you do now (at first I was like, hey this ain't so bad)."`

# django - 在 Heroku 上的 python 应用程序中安装 gem 包

> ID：12850168
> 
> 赞同：3
> 
> 时间：2012-10-11T23:31:28.913
> 
> 标签：django, heroku

我在 Heroku 上有一个使用 Django 运行的 Python 应用程序。该应用程序启动并完美运行。push 的前几行如下所示：

```
(venv)➜  djangoproject git:(development) ✗ git push
Counting objects: 33, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (21/21), done.
Writing objects: 100% (21/21), 1.96 KiB, done.
Total 21 (delta 15), reused 0 (delta 0)

-----> Heroku receiving push
-----> Python/Django app detected
... 
```

我需要在测功机（特别是 Compass）上安装一个 gem 程序。

Heroku 的说明是在根目录中提供一个`Gemfile`和`Gemfile.lock`所需的 gem。然而，一旦我提供了这个，Heroku 就认为该应用程序是一个 Ruby 应用程序：

```
(venv)➜  djangoproject git:(development) ✗ git push
Counting objects: 33, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (21/21), done.
Writing objects: 100% (21/21), 1.96 KiB, done.
Total 21 (delta 15), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby app detected (NOTE: this is paraphrased)
... 
```

有什么方法可以在将站点作为 Python/Django 应用程序运行时安装 ruby​​ gem？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:36:17.927

尝试使用显式选择 python buildpack`heroku config:add BUILDPACK_URL=https://github.com/heroku/heroku-buildpack-python.git`

它仍然会执行检测过程，但我认为（？）它将运行您之前明确选择的 buildpack，而不是尝试任何其他构建包，并且由于您仍然安装了 python 应用程序，它应该可以工作。

请注意，在执行 config:add 之后，您需要在 Heroku 上重建 slug，目前只能通过通过 git 推送实际代码更改来完成。如果您没有要推送的任何实际更改，则可以使用空的 git commit`git commit --allow-empty -m "Empty commit"`

您还可以使用 --buildpack 命令行选项创建一个新项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T09:48:46.297

您需要使用自定义 buildpack，它允许您构建 ruby​​ 和 python 依赖项。

1.  `heroku config:add BUILDPACK_URL=https://github.com/mandest/heroku-buildpack-rubypython`
2.  将 Gemfile 添加到您的项目中在本地运行捆绑安装（以创建
3.  Gemfile.lock 文件）将您的 Gemfile 和 Gemfile.lock 推送到 heroku

那应该首先安装 ruby​​，然后运行 ​​bundle install，然后安装 python，以及 requirements.txt 文件中的所有 deps。

然而，就我而言，我还想使用 ruby​​ 库运行一些命令，即**SASS/COMPASS**。为了做到这一点，我认为你有两个选择。第一个，是 fork 上面的存储库并在构建中添加运行这些命令（这​​样他们就拥有所有需要的权限，而不是你运行 heroku run ...）。

第二个选项是添加一个 Rakefile 并在`rake assets:precompile task`.

因此，在我使用 Compass 的情况下，Rakefile 看起来像：

```
require 'yaml'
require 'pathname'
require 'rspec/core/rake_task'
include FileUtils

namespace 'assets' do
  desc 'Updates the stylesheets generated by Sass/Compass'
  task :precompile do
    print %x(compass compile --time)
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T16:31:12.570

我遇到了同样的问题，这对我有用： [https ://github.com/ddollar/heroku-buildpack-multi](https://github.com/ddollar/heroku-buildpack-multi)

这个怎么运作：

1.  你明确告诉 Heroku 你想使用这个“多”构建包，使用“heroku config:add BUILDPACK_URL=...”命令
2.  您在根目录中创建一个 .buildpacks 文件，该文件仅列出您要使用的各种构建包的 git URL。我使用了 python 和 ruby​​ 构建包。
3.  git push 到 Heroku 并观察所有 buildpacks 的使用情况

值得一提的是，python buildpack 有几个钩子可以用来做额外的自定义工作。如果您创建 bin/pre_compile 文件或 bin/post_compile 文件，那么这些脚本将在主要编译步骤之前/之后由 python buildpack 调用。所以你也可以使用这些钩子来安装 Ruby 或其他依赖项。但是 IMO 让 Ruby 自己的 buildpack 安装 Ruby 依赖项更容易。

# c# - MVC3 - HiddenFor 字典值

> ID：12850169
> 
> 赞同：3
> 
> 时间：2012-10-11T23:31:34.283
> 
> 标签：c#, asp.net-mvc-3, model-binding

我有一个名为 Week 的字典属性：

```
public IDictionary<DayOfWeek, Day> Week { get; private set; } 
```

我正在尝试将其值传递给`HiddenFor`(Days)

```
@Html.HiddenFor(x => x.Week.Values) 
```

它必须是模型的属性，所以我不能这样做`x.Week.Values.ToList();`

我将如何将字典值传递给`Html.HiddenFor`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T23:37:33.497

好吧，自从您使用以来`HiddenFor`，我将假设您需要在表单发布时重新绑定字典的值。要将字典绑定到视图，您需要执行以下操作：

```
@foreach (var key in Model.Week.Keys)
{
    Html.DisplayFor(model=>model.Week[key]);
} 
```

字典中的每个值都将被赋予其自己的隐藏输入字段，具有 name 属性： `name="Week.{key here}`

另一方面，如果您只需将模型中的数据发送到客户端，以便您可以在 JavaScript 中对其进行处理，您可能希望将其作为 JSON 写入页面。

```
<script type="text/javascript">
@Html.Raw(Json.Encode(Model.Week))
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-08T02:37:25.917

我会使用：

```
@foreach (var key in Model.Week.Keys)
{
    @Html.HiddenFor(model=>model.Week[key]);
} 
```

Html 之前的“@”似乎是剃须刀输出隐藏字段所必需的。

它为每个键输出如下内容：

```
<input data-val="true" data-val-number="The field Int32 must be a number." 
   data-val-required="The Int32 field is required." id="Week_5_" name="Week[5]" 
   type="hidden" value="3"> 
```

# llvm - 如何告诉clang不要将寄存器保存到堆栈？

> ID：12850170
> 
> 赞同：11
> 
> 时间：2012-10-11T23:31:39.320
> 
> 标签：llvm, clang, avr, llvm-clang, optimization

## 目标

我目前正在尝试 avr-llvm（支持 AVR 作为目标的 llvm）。我的主要目标是使用它希望更好的优化器（与 gcc 相比）来实现更小的二进制文件。如果您对 AVR 稍有了解，您就会知道您只有很少的内存。

我目前使用 ATtiny45、4KB 闪存和 256 字节（只是字节而不是 KB！）的 SRAM。

## 问题

我正在尝试编译一个简单的 C 程序（见下文），以检查生成了哪些汇编代码以及机器代码大小是如何发展的。我使用“clang -Oz -S test.c”来生成汇编输出并优化它以实现最小尺寸。我的问题是不必要地保存了寄存器值，因为我知道这种方法永远不会返回。

## 我的问题...

如果需要，我如何告诉 llvm 它可以破坏任何寄存器而不保存/恢复它的内容？任何想法如何进一步优化它（例如更有效的堆栈设置）？

## 详细信息/示例

这是我的测试程序。如上所述，它是使用“clang -Oz -S test.c”编译的。

```
#include <stdint.h>

void __attribute__ ((noreturn)) main()  {
     volatile uint8_t res = 1;
     while (1) {}
} 
```

如您所见，它只有一个 uint8_t 类型的“易失性”变量（如果我不将其设置为易失性，一切都会被优化）。这个变量设置为1。最后有一个无限循环。现在让我们看看汇编输出：

```
.file   "test.c"
    .text
    .globl  main
    .align  2
    .type   main,@function
main:
    push    r28
    push    r29
    in  r28, 61
    in  r29, 62
    sbiw    r29:r28, 1
    in  r0, 63
    cli
    out 62, r29
    out 63, r0
    out 61, r28
    ldi r24, 1
    std Y+1, r24
.BB0_1:
    rjmp    .BB0_1
.tmp0:
    .size   main, .tmp0-main 
```

是的！对于这样一个简单的程序，有很多机器代码。我刚刚测试了一些变化并查看了 AVR 的参考手册......所以我可以解释发生了什么。让我们来看看每个部分。

这就是“牛肉”，它只是在做我们的 c 程序要做的事情。它使用值“1”加载 r24，该值存储在 Y+1（堆栈指针 + 1）处的内存中。当然还有我们的无限循环：

```
ldi r24, 1
std Y+1, r24

.BB0_1:
    rjmp    .BB0_1 
```

注意：需要无限循环。否则将`__attribute__ ((noreturn))`被忽略，堆栈指针+保存的寄存器稍后会恢复。

就在此之前，“Y”中的指针已设置：

```
in  r28, 61
in  r29, 62
sbiw    r29:r28, 1
in  r0, 63
cli
out 62, r29
out 63, r0
out 61, r28 
```

这里发生的是：

1.  Y（寄存器对 r28:r29 相当于“Y”）从端口 61 和 62 加载，这些端口映射到一些“寄存器”，即 SPL 和 SPH（“S”的“L”ow 和“H”高字节大头钉“P”指针）
2.  加载的值递减（sbiw r29:r28）
3.  堆栈指针的更改值被保存回端口；我想避免问题：之前禁用中断；“cli/sti”的状态[存储在寄存器 63 (SREG)] 被保存到 r0，然后恢复到端口 63。

堆栈寄存器的这种设置似乎效率低下。要增加堆栈指针，我只需要将 r0 推入堆栈。然后我可以将 SPH/SPL 的值加载到 r29:r28 中。然而，这可能需要在源代码中对 llvm 的优化器进行一些更改。如果必须为局部变量保留超过 3 个字节的堆栈，则上面的代码才有意义（即使优化 -O3，对于 -Oz，最多 6 个字节也是有意义的）。怎么...我想我们需要为此接触llvm的来源；所以这超出了范围。

更有趣的是这部分：

```
 push    r28
    push    r29 
```

由于 main() 不打算返回，这没有意义。这只会将 RAM 和闪存浪费在愚蠢的指令上（请记住：我们在某些设备中只有 64、128 或 256 字节的 SRAM）。

我对此进行了进一步调查：如果我们让 main 返回（例如没有无限循环）堆栈指针被恢复，我们在末尾有一个“ret”指令并且寄存器 r28 和 r29 通过“pop r29，pop”从堆栈中恢复28"。但是编译器应该知道，如果函数“main”的范围永远不会离开，那么所有寄存器都可以被破坏，而无需将它们存储到堆栈中。

当我们谈到 2 字节 RAM 时，这个问题似乎有点“愚蠢”。但是想想如果程序开始使用其余的寄存器会发生什么。

这一切真的改变了我对当前“编译器”的看法。我认为今天通过汇编程序进行优化的空间不大。不过好像有...

**所以，问题仍然是......**

您是否知道如何改善这种情况（提交错误报告/功能请求除外）？

我的意思是：是否有一些我可能忽略的编译器开关......？

## 附加信息

使用`__attribute__ ((OS_main))`适用于 avr-gcc。

输出如下：

```
 .file   "test.c"
__SREG__ = 0x3f
__SP_H__ = 0x3e
__SP_L__ = 0x3d
__CCP__  = 0x34
__tmp_reg__ = 0
__zero_reg__ = 1
    .global __do_copy_data
    .global __do_clear_bss
    .text
.global main
    .type   main, @function
main:
    push __tmp_reg__
    in r28,__SP_L__
    in r29,__SP_H__
/* prologue: function */
/* frame size = 1 */
    ldi r24,lo8(1)
    std Y+1,r24
.L2:
    rjmp .L2
    .size   main, .-main 
```

这（在我看来）在大小（6 条指令或 12 字节）上是最佳的，而且对于这个示例程序的速度也是最佳的。llvm 是否有任何等效属性？（clang version '3.2 (trunk 160228) (based on LLVM 3.2svn)' 既不知道 OS_task 也不知道 OS_main）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-07T07:39:53.647

Anton 在他的评论中提出了这个问题的答案：问题不在于 LLVM，而在于您的 AVR 目标。例如，这是一个通过 Clang 和 LLVM 为其他目标运行的等效程序：

```
% cat test.c
__attribute__((noreturn)) int main() {
  volatile unsigned char res = 1;
  while (1) {}
}

% ./bin/clang -c -o - -S -Oz test.c  # I'm on an x86-64 machine
<snip>
main:                                   # @main
        .cfi_startproc
# BB#0:                                 # %entry
        movb    $1, -1(%rsp)
.LBB0_1:                                # %while.body
                                        # =>This Inner Loop Header: Depth=1
        jmp     .LBB0_1
.Ltmp0:
        .size   main, .Ltmp0-main
        .cfi_endproc

% ./bin/clang -c -o - --target=armv6-unknown-linux-gnueabi -S -Oz test.c
<snip>
main:
        sub     sp, sp, #4
        mov     r0, #1
        strb    r0, [sp, #3]
.LBB0_1:
        b       .LBB0_1
.Ltmp0:
        .size   main, .Ltmp0-main

% ./bin/clang -c -o - --target=powerpc64-unknown-linux-gnu -S -Oz test.c
<snip>
main:
        .align  3
        .quad   .L.main
        .quad   .TOC.@tocbase
        .quad   0
        .text
.L.main:
        li 3, 1
        stb 3, -9(1)
.LBB0_1:
        b .LBB0_1
        .long   0
        .quad   0
.Ltmp0:
        .size   main, .Ltmp0-.L.main 
```

正如您所看到的所有这三个目标，生成的唯一代码是保留堆栈空间（如果需要，它不在 x86-64 上）并在堆栈上设置值。我认为这是最小的。

也就是说，如果您确实发现 LLVM 的优化器有问题，获得帮助的最佳方式是向开发邮件列表发送电子邮件，或者如果您有一个应该产生更小的输出 IR 的特定输入 IR 序列，则提交错误。

最后，回答您在评论中提出的问题：实际上，LLVM 的优化器在某些领域比 GCC 强大得多。但是，也有一些领域它的功能明显不那么强大。=] 对您关心的代码进行基准测试。

# delphi - Delphi应用程序中的子菜单位置错误

> ID：12850176
> 
> 赞同：5
> 
> 时间：2012-10-11T23:32:04.280
> 
> 标签：delphi, menu, main

我的应用程序是用 delphi 编写的。由于某种原因，主菜单的行为不再像昨天那样（我可能在不知情的情况下触摸了一些属性）。现在，当我单击带有子项的菜单项时，尽管箭头位于右侧，但子菜单仍向左打开。

![在此处输入图像描述](../Images/871c8c3ea05827c70e17b8e18d78c855.png)

是什么原因以及如何恢复？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T01:08:30.183

正如对该问题的评论所揭示的，这与编程无关。在控制面板的平板电脑设置中有一个设置可以做到这一点。设置的原因是，当一个人用右手使用笔或类似物时，如果子菜单在其父菜单的右侧打开，则被笔遮挡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-21T22:41:42.017

我遇到了同样的问题，这与我通过更改 TMainMenu 类型的 MainMenu 的一些功能发现的“触摸屏”或其他 PC 平板电脑相关设置无关：只需将“OwnerDraw”功能设置为 False 和“ParentBiDiMode”为 true 因此，如果您的父视图已经很好，则此 MainMenu（子菜单）将符合其父视图。我做了100次，它对我有用

# database - MySQL：在条件更新之前直接更新还是选择？

> ID：12850180
> 
> 赞同：0
> 
> 时间：2012-10-11T23:32:25.357
> 
> 标签：database, performance, updates

只是想知道-如果我们需要在**大**表中进行条件更新，那么这是最好的方法-

在更新之前直接进行更新或检查现有条目。

```
function doDirectUpdate()
{
   // UPDATE table WHERE condn
} 
```

或者

```
function doCheckAndUpdate()
{
   // SELECT COUNT(id) AS exist FROM table WHERE condn
   if(id exists)
   {
      // UPDATE table WHERE condn
   }
   else
   {
      echo 'No matching entry';
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:35:49.147

一个人不应该同时执行 a `SELECT`，然后是一个 conditional `UPDATE`，只是为了显示匹配行的数量 - 或缺少匹配的行。您应该执行的唯一一次`SELECT`是如果您有其他逻辑声明如果有超过 X 个匹配行则不更新。

`UPDATE`返回已更新并因此匹配的行数。您应该获取返回值 from `UPDATE`，然后在没有匹配条目时发出警报。

```
function doUpdateAndAlertIfNotMatched()
{
   numberOfRowsUpdated = UPDATE table WHERE condn;
   if(numberOfRowsUpdated == 0)
   {
      echo 'No matching entry';
   }
} 
```

参考：[http ://dev.mysql.com/doc/refman/5.0/en/update.html#id844302](http://dev.mysql.com/doc/refman/5.0/en/update.html#id844302)

# c++ - std::unique 并从对象容器中删除重复项

> ID：12850181
> 
> 赞同：4
> 
> 时间：2012-10-11T23:32:35.997
> 
> 标签：c++, stl, std

我想知道是否有一种有效的方法可以根据对象成员字段的值从容器中删除对象。例如，我可以使用带有字符串列表的 stl::unique 执行以下操作：

```
#include<iostream>
#include<list>
#include<string>
#include<algorithm>
using namespace std;

bool stringCompare(const string & l, const string & r)                                                                                   
{                                                                                                                                    
   return (l==r);                                                                                                                         
}

int main()                                                                                                                               
{                                                                                                                                        

  list<string> myStrings;                                                                                                                
  myStrings.push_back("1001");                                                                                                           
  myStrings.push_back("1001");                                                                                                           
  myStrings.push_back("81");                                                                                                             
  myStrings.push_back("1001");                                                                                                           
  myStrings.push_back("81");                                                                                                             

  myStrings.sort();                                                                                                                      
  myStrings.erase(unique(myStrings.begin(), myStrings.end(), stringCompare), myStrings.end());                                           

  list<string>::iterator it;                                                                                                             
  for(it = myStrings.begin(); it != myStrings.end(); ++it)                                                                               
  {                                                                                                                                      
    cout << *it << endl;                                                                                                                 
  }                                                                                                                                      

  return     0;                                                                                                                              
} 
```

打印 1001、81...

有没有办法可以用下面的代码做类似的事情，或者我需要使用运算符“手动”执行比较并遍历容器。我想不出更优雅的解决方案，并且想知道这是否可能在不编写大量代码的情况下实现。任何帮助都感激不尽！

```
class Packet
{
public:
Packet(string fTime, string rID) : filingTime(fTime), recordID(rID)

  string getFilingTime() {return filingTime;}
  string getRecordId() {return recordID;}

private:
  string filingTime;
  string recordID;

};

int main()
{
vector<Packet*> pkts;
pkts.push_back(new Packet("10:20", "1004"));
pkts.push_back(new Packet("10:20", "1004")); // not unique (duplicate of the line above)
pkts.push_back(new Packet("10:20", "251"));
pkts.push_back(new Packet("10:20", "1006"));

// remove packet from vector if time and ID are the same

return 0;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T23:41:31.073

可以使用的两个选项[`std::unique`](http://en.cppreference.com/w/cpp/algorithm/unique)：

1.  为定义一个`operator==`方法`Packet`并将其更改`vector<Packet*>`为`vector<Packet>`。

    ```
    bool Packet::operator==(const Packet& rhs) const
    {
        if (getFilingTime() != rhs.getFilingTime())
            return false;
        if (getSpid() != rhs.getSpid())
            return false;
        return true;
    }

    //etc.

    int main()
    {
        vector<Packet> pkts;
        pkts.push_back(Packet("10:20", "1004"));
        pkts.push_back(Packet("10:20", "1004")); // not unique (duplicate of the line above)
        pkts.push_back(Packet("10:20", "251"));
        pkts.push_back(Packet("10:20", "1006"));

        // remove packet from vector if time and ID are the same

         pkts.erase(unique(pkts.begin(), pkts.end()), pkts.end());                   

        return 0;
    } 
    ```

2.  保持向量为`vector<Packet*>`并定义一个方法来比较元素。

    ```
    bool comparePacketPtrs(Packet* lhs, Packet* rhs)
    {
        if (lhs->getFilingTime() != rhs->getFilingTime())
            return false;
        if (lhs->getSpid() != rhs->getSpid())
            return false;
        return true;
    }

    //etc.

    int main()
    {
        vector<Packet*> pkts;
        pkts.push_back(new Packet("10:20", "1004"));
        pkts.push_back(new Packet("10:20", "1004")); // not unique (duplicate of the line above)
        pkts.push_back(new Packet("10:20", "251"));
        pkts.push_back(new Packet("10:20", "1006"));

        // remove packet from vector if time and ID are the same

         pkts.erase(unique(pkts.begin(), pkts.end(), comparePacketPtrs), pkts.end());                   

        return 0;
    } 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T23:40:18.613

作为 的替代方法`unique`，您可以简单地将元素插入 a `set`（或`unordered_set`在 C++11 中）。

无论您决定采用哪种方式，都需要为`Packet`. 因为`unique`，你需要`operator==`；因为`set`你需要`operator<`。为了完整起见，您应该定义两者及其对应物：

```
class Packet {
    …
    bool operator==(const Packet& p) const {
        return fillingTime == p.fillingTime && recordID == p.recordID;
    }
    bool operator<(const Packet& p) const {
        return fillingTime < p.fillingTime ||
               (fillingTime == p.fillingTime && recordID < p.recordID);
    }
    bool operator!=(const Packet& p) const { return !(*this == p); }
    bool operator> (const Packet& p) const { return p < *this; }
    bool operator>=(const Packet& p) const { return !(*this < p); }
    bool operator<=(const Packet& p) const { return !(p < *this); }
    …
}; 
```

如果您使用 C++11 `unordered_set`，则需要更进一步并定义一个哈希函数。

**编辑：**我刚刚注意到您正在存储指向`Packet`. 为什么？直接存放就`Packet`行了。

# iphone - 使用 datepicker 制作 url 字符串

> ID：12850183
> 
> 赞同：0
> 
> 时间：2012-10-11T23:33:05.637
> 
> 标签：iphone, xcode, datepicker, request, nsurlconnection

嗨，我制作了一个代码，它给了我一个带有日期的网址，如 www.google.com/2012-10-09

但由于某种原因，它不会将我重定向到正确的网址？理解 NSURL URLwithstring 似乎有些问题？

**这是我的代码**

```
- (IBAction)sedato:(id)sender {

    //Finds date and make string

    NSDate *ddato = [_datepickout date];

    NSString *vdato = [NSString stringWithFormat:@"%@", ddato];

    NSDateFormatter *datoform = [[NSDateFormatter alloc] init];
    [datoform setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]];
    [datoform setDateFormat: @"yyyy-MM-dd HH:mm:ss Z"];

    NSDate *datemedform = [datoform dateFromString: vdato];
    NSString *strdate = [[NSString alloc] initWithFormat:@"%@", datemedform];
    NSArray *arr = [strdate componentsSeparatedByString:@" "];
    NSString *endelig;
    endelig = [arr objectAtIndex:0];

    NSArray *arr2 = [endelig componentsSeparatedByString:@"-"];
    NSString *year;
    year = [arr2 objectAtIndex:0];
    NSString *mm;
    mm = [arr2 objectAtIndex:1];
    NSString *dag;
    day = [arr2 objectAtIndex:2];

   NSString *url = [NSString stringWithFormat:@"http://www.coutbound.dk/logon/add_date.asp?view_date=%@/%@/%@",year,mm,day];

//Send url request with string     

    ASIFormDataRequest *request2 = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:url]];

    [request2 setUseKeychainPersistence:YES];
    [request2 setUseCookiePersistence:YES];
    [request2 setDelegate:self];
    [request2 startAsynchronous];

}
    - (void)requestFinished:(ASIHTTPRequest *)request {
        NSLog(@"Saved form successfully");
        NSLog(@"Response was:");
        NSLog(@"%@",[request responseString]);
        NSLog(@"HEADERS: %@",[request responseHeaders]);
        NSLog(@"STATUSCODE: %u",[request responseStatusCode]);
        NSLog(@"COOkies: %@",[request responseCookies]);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:48:14.073

您正在将日期转换为字符串，然后再转换为日期，再转换为字符串，再转换为组件，然后再转换为字符串！某处一定有错误。

试试这个：

```
NSDate *myDate = [_datePicker date];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"yyyy/MM/dd";
NSString *dateStr = [formatter stringFromDate:myDate];
NSString *url = [NSString stringWithFormat:@"%@%@", urlBase, dateStr]; 
```

检查结果

```
NSLog(@"URL: %@", url); 
```

# javascript - Sencha Touch 2 - 将轮播添加到面板

> ID：12850198
> 
> 赞同：0
> 
> 时间：2012-10-11T23:34:12.343
> 
> 标签：javascript, sencha-touch-2

我正在尝试将轮播添加到面板视图中，该视图内部有几个子面板。当我运行代码时，虽然我从轮播中看不到任何东西。其他面板看起来很好。这是我现在得到的代码

```
Ext.define('app.view.HeroDetail', {
extend: 'Ext.Panel',
requires: ['Ext.Carousel'],
xtype: 'herodetail',
layout: 'vbox',
fullscreen: true,

config: {

items: [
    {
        xtype: 'panel',
        html: 'first panel',
        flex: 1
    },

    {
        xtype: 'carousel',
        items: [
            {
                xtype: 'panel',
                html: 'carousel1'
            },
            {
                xtype: 'panel',
                html: 'carousel2'
            }
        ],
        flex: 1
    },

    {
        xtype: 'panel',
        html: 'second panel',
        flex: 1
    }
]

}
}); 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T05:06:38.047

试试这个代码。这对我有用。在配置中定义**layout:'vbox'**。

```
 Ext.define('app.view.HeroDetail', {
            extend: 'Ext.Panel',
            requires: ['Ext.Carousel'],
            xtype: 'camerapanel',
            fullscreen: true,
            config: {
            layout: 'vbox', //defines layout inside config
            items: [
                {
                    xtype: 'panel',
                    html: 'first panel',
                    flex: 1
                },

                {
                    xtype: 'carousel',
                    flex: 1,
                    items: [
                        {
                            xtype: 'panel',
                            html: 'carousel1'
                        },
                        {
                            xtype: 'panel',
                            html: 'carousel2'
                        }
                    ]

                },

                {
                    xtype: 'panel',
                    html: 'second panel',
                    flex: 1
                }
            ]

            }
            }); 
```

# node.js - 如何扩展使用其他服务的 Node.js 服务？

> ID：12850201
> 
> 赞同：1
> 
> 时间：2012-10-11T23:34:19.287
> 
> 标签：node.js, rest, heroku

我已经构建了一个 JSON 服务，它使用了另外两个服务，每个服务都有一些延迟，并且由于这种依赖关系，每个请求最多可能需要 800 毫秒才能完成。

我选择 Node.js 的主要原因之一是事件 IO。我希望新请求能够顺利处理，而不是挂起，因为缓慢的请求正在完成。

我如何测试服务并获得一些关于我的服务将如何在 Heorku 上执行的可靠指标——这很难弄清楚，因为我不想达到我所依赖的其他服务的查询限制。我的服务将同时接受多少个请求？我能做些什么来最大化这个数字？

此外，我想得到一些反馈，关于 Node.js 是否会在这种情况下为我提供更好的性能，比如 Rails？

（哦，还有……Heroku 是部署服务的好选择吗？抱歉……我是 Node 新手。）

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:13:21.337

首先，您不应该使用内存会话，而是使用 DB 会话、Memcached 或 Redis 会话来共享状态。

其次，您应该将延迟的进程分开`worker process`并使用**工作队列**来添加和获取那些延迟的作业。您可以使用 Redis 作为[kue](http://learnboost.github.com/kue/)队列，或者使用其他消息队列是不错的选择。

第三，确保在您的节点代码上保持非阻塞。`process.nextTick`是关键。

* * *

[您可以使用Blitz](https://addons.heroku.com/blitz)测试许多同时请求，这是**Heroku**上的附加组件之一。

# asp.net-mvc-3 - MVCSiteMapProvider 动态节点未显示

> ID：12850209
> 
> 赞同：1
> 
> 时间：2012-10-11T23:34:42.497
> 
> 标签：asp.net-mvc-3, mvcsitemapprovider

我目前正在使用[Maartenba 的 MVC Sitemap Provider](https://github.com/maartenba/MvcSiteMapProvider "Maartenba 的 MVC 站点地图提供程序")在 MVC3 Razor 应用程序中实现面包屑。当我尝试为博客文章创建动态节点时，就会出现问题。我想要实现的是为博客页面显示*Home>Blog和为帖子页面显示 Home* *>Blog> **BlogPostTitle***，其中***BlogPostTitle***是当前显示的帖子的标题。我实际得到的是：*主页>博客*页面和任何帖子页面的博客。

为了测试动态节点的生成，我还在_Layout 中包含了对@Html.MvcSiteMap().Menu(false, true, true) 的调用。显示的菜单确认节点已正确生成：

*   家
*   关于
*   博客

    *   文章 #1 标题
    *   文章 #2 标题
*   接触

尽管如此，@Html.MvcSiteMap().SiteMapPath() 仍然为博客页面和文章显示*Home>Blog 。*

这是代码：

网站地图：

```
<mvcSiteMapNode title="Home" controller="Home" action="Index">
    <mvcSiteMapNode title="About" controller="Home" action="About"/>
    <mvcSiteMapNode title="Blog" controller="BlogPost" action="Index" key="News" >
        <mvcSiteMapNode title="" controller="BlogPost" action="Details" dynamicNodeProvider ="MyApp.Helpers.BlogPostDynamicNodeProvider, myApp" />
    </mvcSiteMapNode>
    <mvcSiteMapNode title="Contact" controller="Home" action="Contact"/>
</mvcSiteMapNode> 
```

动态节点提供者：

```
public class BlogPostDynamicNodeProvider : DynamicNodeProviderBase
{
    public BlogPostRepository _repository = new BlogPostRepository();
    public List<BlogPost> articles = new List<BlogPost>();

    public override IEnumerable<DynamicNode> GetDynamicNodeCollection()
    {
        articles = _repository.FindAllBlogPosts();
        var returnValue = new List<DynamicNode>();

        foreach (var article in articles)
        {
            DynamicNode node = new DynamicNode();
            node.ParentKey = "News";
            node.Title = article.PostTitle;
            node.RouteValues.Add("id", article.Post_ID);
            returnValue.Add(node);
        }
        return returnValue;
    }

    public override CacheDescription GetCacheDescription()
    {
        return new CacheDescription("BlogPostDynamicNodeProvider")
        {
            SlidingExpiration = TimeSpan.FromMinutes(1)
        };
    }
} 
```

博客帖子控制器

```
 public ViewResult Index(long? BlogPost_ID)
    {

        var BlogPostList = new PagedData<BlogPost>();
        BlogPostList.Data = repository.FindAllBlogPostsPaged(1, 3, 1);

        BlogPostList.NumberOfPages = Convert.ToInt32(Math.Ceiling((double)repository.NumberOfPosts(1) / 3));
        BlogPostList.CurrentPage = 1;

       BlogPost pBlogPost = new BlogPost();
            pBlogPost.PostDate = DateTime.Now;

            return View(new BlogPostPagedViewModel(pBlogPost, repository.FindAllBlogPosts()
                new SelectList(ctgRepository.FindAllBlogCategories(), "Category_ID", "Category_Name")));
    }

    [SiteMapPreserveRouteData]
    public ActionResult Details(long id)
    {
        BlogPost post = repository.FindABlogPostByID(id);
        return PartialView("_Details", post);
    } 
```

_布局

```
<div id="pagecontent">
    @Html.MvcSiteMap().Menu(false, true, true)   <!-- for test purpose only -->
    @Html.MvcSiteMap().SiteMapPath() 
    @Html.Partial("_PagedList", Model.BlogPostList)
</div><!-- page blogcontent --> 
```

博客索引视图

```
<div id="blogcontent">
    @Html.Partial("_PagedList", Model.BlogPostList)
</div><!-- end blogcontent --> 
```

博客_PagedList局部视图

```
@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = "blogcontent", InsertionMode = InsertionMode.Replace }))
{
    foreach (var item in Model.Data)
    {
        <h2 class="posttitle">
            @Ajax.ActionLink(item.PostTitle, "Details", "BlogPost", new { id = item.Post_ID }, new AjaxOptions { UpdateTargetId = "blogcontent" }, null)            
        </h2>
    }
} 
```

详情视图

```
@model MyApp.Models.BlogPost
@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = "blogcontent", InsertionMode = InsertionMode.Replace }))
{
    <div class="blogpost">
    ...
    </div>
} 
```

_ 编辑 _ 我发现，如果我`@Html.MvcSiteMap().SiteMapPath()`从 _Layout 中删除并将其放置在博客索引视图和详细信息视图中，则面包屑会正确显示当前位置。

但这意味着我需要将它放在项目的每个页面上，这与 _Layout 共享视图的作用相矛盾！

我的代码中的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T09:20:30.313

从控制器操作中删除 SiteMapPreserveRouteDataAttribute。

SiteMapPreserveRouteDataAttribute（现已弃用）并非旨在与动态节点一起使用。而且没有必要，因为无论如何您都在动态节点提供程序中显式添加 RouteValues。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:05:05.373

在您的 Index 操作中，您有一个 id 参数，如果您删除它并应用@Xharze 建议，这有什么不同。您是否在 web.config 中定义了特定于 blogs/posts 的任何路由？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:00:33.053

在创建 DynamicNode 时尝试设置 Controller 和 Action：

```
DynamicNode node = new DynamicNode();
node.Controller = "ControllerName";
node.Action = "ActionName";
node.ParentKey = "News";
node.Title = article.PostTitle;
node.RouteValues.Add("id", article.Post_ID);
returnValue.Add(node); 
```

此信息用于选择正确的路线。

# php - pdf生成在Zend框架中不起作用

> ID：12850210
> 
> 赞同：0
> 
> 时间：2012-10-11T23:34:50.957
> 
> 标签：php, zend-framework, pdf-generation

我有一个在 Zend 中生成 PDF 的脚本。我将脚本从将图像转换为 pdf 复制到服务器上的另一个目录。我现在得到错误：

```
Fatal error: Uncaught exception 'Zend_Pdf_Exception' with message 'Cannot create image resource. 
File not found.' in /kalendarz/Zend/Pdf/Resource/ImageFactory.php:38 
 Stack trace: 
 #0 /kalendarz/Zend/Pdf/Image.php(124): Zend_Pdf_Resource_ImageFactory::factory('data/0116b4/cro...') 
 #1 /kalendarz/cms.php(56): Zend_Pdf_Image::imageWithPath('data/0116b4/cro...') 
 #2 {main} thrown in /kalendarz/Zend/Pdf/Resource/ImageFactory.php on line 38 
```

网站代码，图片链接示例 (http://tinyurl.com/8srbfza)：

```
else if($_GET['action']=='generate') {
    //1 punkt typograficzny postscriptowy (cyfrowy) = 1/72 cala = 0,3528 mm
    function mm_to_pt($size_mm) {
      return $size_mm/0.3528;
    }

    require_once("Zend/Pdf.php");

    $pdf = new Zend_Pdf(); 

    $page_w = mm_to_pt(100);
    $page_h = mm_to_pt(90);

    $page = $pdf->newPage($page_w.':'.$page_h.':'); 
    $pdf->pages[] = $page; 

    $imagePath= 'data/'.$_GET['id'].'/crop_'.$_GET['id'].'.jpg'; //to nie jest miniaturka
    $image = Zend_Pdf_Image::imageWithPath($imagePath);

    $left = mm_to_pt(0);
    $right = mm_to_pt(100);
    $top = mm_to_pt(90);
    $bottom = mm_to_pt(0);

    $page->drawImage($image, $left, $bottom, $right, $top);     

    $pdfData = $pdf->render(); 

    header("Content-Disposition: inline; filename=".$_GET['id'].".pdf"); 
    header("Content-type: application/x-pdf"); 
    echo $pdfData; 
    die();
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:58:29.087

Zend_Pdf_Image::imageWithPath 需要一个有效的文件并使用 is_file 函数调用来检查文件是否存在。

首先，使用图像的绝对路径，而不是使用相对路径。您可以通过引用您的 APPLICATION_PATH 来指定绝对路径。例如，

```
 APPLICATION_PATH . '/../public/data 
```

如果 APPLICATION_PATH 尚未在您的代码中定义，请将此代码粘贴到您的 public/index.php

```
 defined('APPLICATION_PATH')
|| define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application')); 
```

然后，检查 'data/'.$ *GET['id'].'/crop* '.$_GET['id'].'.jpg' 是否存在。此外，检查文件是否具有 PHP 访问的适当权限。

注意：使用[Zend 请求对象](http://framework.zend.com/manual/1.12/en/zend.controller.request.html)而不是 $_GET。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:56:09.647

使用绝对路径：

```
$imagePath = '/kalendarz/data/'.$_GET['id'].'/crop_'.$_GET['id'].'.jpg'; 
```

或者：

```
$imagePath = APPLICATION_PATH.'/../data/'.$_GET['id'].'/crop_'.$_GET['id'].'.jpg'; 
```

您可能还想对`$_GET['id']`.

# mysql - 带有排序的 GROUP BY

> ID：12850214
> 
> 赞同：0
> 
> 时间：2012-10-11T23:35:15.480
> 
> 标签：mysql, sql

`SELECT * FROM title`给我以下输出：

```
title_number    version_type    hd_sd
1000046         Standard    SD
1000046         Standard    HD
1000050         Standard    SD
1000093         Standard    SD
1000093         Standard    HD
1000125         Standard    SD
1000269         Standard    SD 
```

我需要获取所有不同的 title_numbers，然后 hd_sd 将 =`HD`如果存在，否则它将 = `SD`。正确的输出是：

```
title_number    version_type    hd_sd
1000046         Standard    HD
1000050         Standard    SD
1000093         Standard    HD
1000125         Standard    SD
1000269         Standard    SD 
```

我最接近这个的是`SELECT * FROM title GROUP BY title_number`，但这并没有给我正确的`hd_sd`列值。我将如何正确执行此查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:36:57.490

```
SELECT title_NUMBer, Version_type,
        MIN(hd_sd)
FROM tableName
GROUP BY title_NUMBer 
```

为了改进，

```
SELECT a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT title_NUMBer, MIN(hd_sd) minCol
            FROM tableName
            GROUP BY title_NUMBer
        ) b ON a.title_number = b.title_Number AND
                a.hd_sd = b.mincol 
```

# backbone.js - 在 Apache 或 IIS 中托管时将 Backbone.js 与 CouchDB 连接

> ID：12850216
> 
> 赞同：0
> 
> 时间：2012-10-11T23:35:21.410
> 
> 标签：backbone.js, couchdb

如果我要从 Apache Web 服务器或 IIS（不是来自 node.js 或 couchApp）提供 ​​html 和 js 文件，我无法理解如何干净地将 Backbone.js 与 CouchDB 连接起来。

我应该使用backbone.js CouchDB 扩展来抽象请求吗？如果是这样？

我应该将 Backbone.js 直接连接到 CouchDB RESTful 接口，还是应该使用中间 PHP 层（因为我熟悉 PHP，但不熟悉 Java 或其他服务器端设置）？如果是这样？

处理阻止我与数据库交互的“同源策略”的最佳方法是什么？

基本上，我想要一种整洁的方式，使用backbone.js 来`GET`从多个`collections`by id、一组id 或所有id 中生成json 文档。另外，从第二个管理 Web 界面，我需要能够通过以下方式更新、创建和删除`id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:08:55.693

我认为您不需要任何扩展来使用 CouchDB。

您需要做的主要事情是在您的所有模型中设置[idAttribute](http://backbonejs.org/#Model-idAttribute)`_id`。

另外，我建议您在 CouchDB 和您的客户端之间放置一个中间层。除非您的用例非常简单，否则您很快就会想在将文档发送给客户之前对其进行转换。如果你想坚持使用 CouchDB，你可以使用 PHP、Express 和[CouchApp来做到这一点。](http://couchapp.org/page/what-is-couchapp)

如果您想彻底绕过 SOP，请查看现在大多数浏览器都支持的[CORS 。](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

我不熟悉 PHP，但这是我使用[Express](http://expressjs.com)和[felix-couchdb 的](https://github.com/felixge/node-couchdb)方法：

```
var couchdb = require('felix-couchdb'),
    client = couchdb.createClient(config.port, config.host),
    myDb = client.db('my_db');

// (... express boilerplate)
app.get('/resource/:resource_id', function (req, res) {
  myDb.getDoc(req.params.resource_id, function (err, doc) {
    if(err)
      return res.send(err);

    res.send(doc);
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:57:30.507

[我在https://cloudant.com/blog/backbone-and-cloudant/](https://cloudant.com/blog/backbone-and-cloudant/)上运气很好

# xslt - XPATH 用于名称在其他一些元素的名称中的第一个元素

> ID：12850223
> 
> 赞同：2
> 
> 时间：2012-10-11T23:35:46.290
> 
> 标签：xslt, xpath, xpath-2.0

```
<choices>
   <sic  />
   <corr />
   <reg  />
   <orig />
</choices>

<choice>
   <corr>Red</corr>
   <sic>Blue</sic>
<choice> 
```

我想选择`<choice>`名称与`<choices>`.

如果 name(node-set) 返回名称列表而不仅仅是第一个节点的名称，我可以使用

`select="choice/*[name() = name(choices/*)][1]"`

但它没有（至少在 1.0 中没有），所以我将名称连接在一个字符串中并使用 contains()：

```
<xsl:variable name="choices.str">
    <xsl:for-each select="choices/*">
        <xsl:text> </xsl:text><xsl:value-of select="concat(name(),' ')"/>
    </xsl:for-each>
</xsl:variable>
<xsl:apply-templates select="choice/*[contains($choices.str,name())][1]"/> 
```

并得到我想要的：

`Red`， 的价值`<corr>`

有没有更直接的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:57:28.177

**I. 使用这个 XPath 2.0 单线**：

```
/*/choice/*[name() = /*/choices/*/name()][1] 
```

**当此 XPath 表达式针对以下 XML 文档**（提供的文档，但已更正为格式良好的 XML 文档）进行评估时：

```
<t>
    <choices>
        <sic  />
        <corr />
        <reg  />
        <orig />
    </choices>
    <choice>
        <corr>Red</corr>
        <sic>Blue</sic>
    </choice>
</t> 
```

**选择了正确的元素**：

```
<corr>Red</corr> 
```

* * *

**二、XSLT 1.0（没有键！）：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vNames">
  <xsl:for-each select="/*/choices/*">
   <xsl:value-of select="concat(' ', name(), ' ')"/>
  </xsl:for-each>
 </xsl:variable>

 <xsl:template match="/">
  <xsl:copy-of select=
  "/*/choice/*
         [contains($vNames, concat(' ', name(), ' '))]
           [1]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（上图）时，再次选择正确的元素（并复制到输出中）：**

```
<corr>Red</corr> 
```

* * *

**三、使用键**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

  <xsl:key name="kChoiceByName" match="choice/*"
   use="boolean(/*/choices/*[name()=name(current())])"/>

 <xsl:template match="/">
  <xsl:copy-of select="/*/choice/*[key('kChoiceByName', true())][1]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于同一个 XML 文档（上图）时，会产生相同的正确结果**：

```
<corr>Red</corr> 
```

**建议读者尝试了解这一切是如何“工作”的:)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:52:54.050

您可以像这样使用 key() 函数...

**当这个输入文件...**

```
<t>
<choices>
   <sic  />
   <corr />
   <reg  />
   <orig />
</choices>
<choice>
   <corr>Red</corr>
   <sic>Blue</sic>
  </choice>
</t> 
```

**...作为此 XSLT 1.0 样式表的输入提供...**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>
<xsl:key name="kChoices" match="choices/*" use="name()" />  

<xsl:template match="/">
  <xsl:variable name="first-choice" select="(*/choice/*[key('kChoices',name())])[1]" />
  <xsl:value-of select="$first-choice" />
  <xsl:text>, the value of &lt;</xsl:text>
  <xsl:value-of select="name( $first-choice)" />
  <xsl:text>&gt;</xsl:text>
</xsl:template>

</xsl:stylesheet> 
```

**...生成此输出文本...**

```
Red, the value of <corr> 
```

## 除了 XSLT 2.0

在 XSLT 2.0 中，您可以使用以下替代方法来计算 $first-choice 变量...

选项1：

```
(*/choice/*[for $c in . return ../../choices/*[name()=name($c)]])[1] 
```

选项 2：

```
(*/choice/*[some $c in ../../choices/* satisfies name($c)=name()])[1] 
```

# visual-studio-lightswitch - 阻止模式窗口选择器上的自动执行

> ID：12850225
> 
> 赞同：0
> 
> 时间：2012-10-11T23:36:07.333
> 
> 标签：visual-studio-lightswitch

我有一个带有“模式窗口选择器”的屏幕，用于“代理”字段。如果用户单击它，它将弹出并允许用户选择代理。

但是我们有很多代理，用户总是会输入代理的搜索条件。如何停止弹出窗口的初始加载，它只需要时间而且从来没有用处？

# intellij-idea - IDEA项目，需要澄清

> ID：12850230
> 
> 赞同：0
> 
> 时间：2012-10-11T23:36:41.377
> 
> 标签：intellij-idea

使用`InteliJ IDEA`，我正在尝试设置**多个**项目以作为同一 IDE 的一部分运行。

导入时 ( `File->New Project->From Maven`) 仅显示最新导入的项目。

如何让多个项目出现？

![在此处输入图像描述](../Images/17035b59e4643d353b8cf89d97df3112.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T00:16:50.660

正如您可以[在 FAQ 中找到的那样](http://www.jetbrains.com/idea/documentation/migration_faq.html)，IntelliJ IDEA`project`映射到 Eclipse`workspace`并`module`映射到 Eclipse `project`。

创建一个 IDEA 项目，然后向其中添加多个模块。模块可以有不同的 JDK 和语言级别设置。

# c# - 如何在模型上绘制纹理

> ID：12850231
> 
> 赞同：0
> 
> 时间：2012-10-11T23:36:51.190
> 
> 标签：c#, model, xna, textures

下面的代码是一个完整的 XNA 3.1 程序，几乎没有改变 Visual Studio 在创建新项目时创建的代码骨架。

我唯一改变的是

*   将 .x 模型导入 VS 解决方案的内容文件夹。

    （模型是一个简单的正方形，上面有一个纹理 - 使用 Google Sketchup 制作并使用多个 .x 导出器导出）

*   在 Load() 方法中，我将 .x 模型加载到游戏中。

*   Draw() 方法使用 BasicEffect 来渲染模型。

除了这三件事我没有添加任何代码。

为什么模型不显示纹理？我该怎么做才能使纹理可见？

这是纹理文件（调色板中的标准 SketchUp 纹理）：

![在此处输入图像描述](../Images/3b709ea020166cf79d1375e66bade04e.png)

这就是我的程序的样子——你可以看到：没有纹理！

![在此处输入图像描述](../Images/ff703ed1a3cba6c29e39f19f99bbbcc2.png)

这是程序的完整源代码：

```
namespace WindowsGame1 {
/// <summary>
/// This is the main type for your game
/// </summary>
public class Game1 : Microsoft.Xna.Framework.Game {
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    public Game1() {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    /// <summary>
    /// Allows the game to perform any initialization it needs to before starting to run.
    /// This is where it can query for any required services and load any non-graphic
    /// related content.  Calling base.Initialize will enumerate through any components
    /// and initialize them as well.
    /// </summary>
    protected override void Initialize() {
        // TODO: Add your initialization logic here
        base.Initialize();
    }

    Model newModel;

    /// <summary>
    /// LoadContent will be called once per game and is the place to load
    /// all of your content.
    /// </summary>
    protected override void LoadContent() {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);

        // TODO: usse this.Content to load your game content here

        newModel = Content.Load<Model>(@"aau3d");

        foreach (ModelMesh mesh in newModel.Meshes) {

            foreach (ModelMeshPart meshPart in mesh.MeshParts) {

                meshPart.Effect = new BasicEffect(this.GraphicsDevice, null);
            }
        }

    }

    /// <summary>
    /// UnloadContent will be called once per game and is the place to unload
    /// all content.
    /// </summary>
    protected override void UnloadContent() {
        // TODO: Unload any non ContentManager content here
    }

    /// <summary>
    /// Allows the game to run logic such as updating the world,
    /// checking for collisions, gathering input, and playing audio.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Update(GameTime gameTime) {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        // TODO: Add your update logic here

        base.Update(gameTime);
    }

    /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Draw(GameTime gameTime) {

        if (newModel != null) {

            GraphicsDevice.Clear(Color.CornflowerBlue);

            Matrix[] transforms = new Matrix[newModel.Bones.Count];
            newModel.CopyAbsoluteBoneTransformsTo(transforms);

            foreach (ModelMesh mesh in newModel.Meshes) {
                foreach (BasicEffect effect in mesh.Effects) {
                    effect.EnableDefaultLighting();
                    effect.TextureEnabled = true;

                    effect.World = transforms[mesh.ParentBone.Index] * Matrix.CreateRotationY(0)
                * Matrix.CreateTranslation(new Vector3(0, 0, 0));
                    effect.View = Matrix.CreateLookAt(new Vector3(200, 1000, 200), Vector3.Zero, Vector3.Up);
                    effect.Projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(45.0f),
                        0.75f, 1.0f, 10000.0f);
                }
                mesh.Draw();
            }
        }

        base.Draw(gameTime);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T02:00:29.840

我认为你试图做的太多了。这将取决于“.x”文件中的内容，但这些可以包含为模型着色和纹理所需的所有着色器。

我认为问题在于加载模型后，您使用 BasicEffect 覆盖模型的效果，它不知道您要用于模型的纹理。

我认为最简单的做法是注释掉与 LoadContent 中的 BasicEffect 相关的代码。“EnableDefaultLighting()”和/或“TextureEnabled”的设置也可能是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T01:33:58.667

过去我在使用 .x 模型时遇到了一些问题。尝试使用 .fbx 导出文件。从您的 3D 应用程序导出后，将模型资产及其纹理放在项目中的同一地图中。不要重命名它，因为纹理的名称在 .FBX 中可能不可读。

# android - 如何检索暂停以及是否在 Android 4.0 上使用 HTML5 视频全屏播放？

> ID：12850237
> 
> 赞同：1
> 
> 时间：2012-10-11T23:37:28.520
> 
> 标签：android, html, video, html5-video

嘿，我有几个关于适用于 Android 4.0 默认浏览器的 HTML5 视频的问题。

我想始终全屏播放视频，我通过以下代码成功地做到了这一点

```
onClick = playVideo();
function playVideo() {
    player.load();
    player.webkitEnterFullScreen();
    player.play(); 
} 
```

所以我需要知道一些事情，尽管这会对我有很大帮助......，

1.  有没有办法判断视频是否正在全屏播放。我可以通过检查 webkitDisplayingFullScreen 来为 iphone 获取它，所以这是在 iphone 的完成按钮上触发的。Android只有后退按钮，是否也有响应按钮？

2.  在默认视频播放器中播放时暂停不会触发事件，有没有办法实现默认播放器暂停的事件？

3.  play() 函数在 Android 4.0 默认播放器上不起作用，有什么理由这样或者我没有调用它吗？它适用于 Chrome 浏览器

谢谢，任何帮助都会很棒。

# html - 将每个聚合值分配给 R 中的单独变量并在 HTML 中显示

> ID：12850241
> 
> 赞同：1
> 
> 时间：2012-10-11T23:37:58.023
> 
> 标签：html, r

我正在使用以下 R 脚本来计算每月的 CpK 数：

```
mydf <- read.csv('file.csv', header = TRUE, sep=",")
date <- strptime(mydf$PDATETIME, "%Y/%m/%d %H:%M:%S")
plot(date,mydf$MEAS_AVG,xlab='Date',ylab='MEAS_AVG',main='year')
abline(h=mydf$TARG_MIN,col=3,lty=1)
abline(h=mydf$TARG_MAX,col=3,lty=1)
grid(NULL,NULL,col="black")
legend("topright", legend = c(" ", " "), text.width = strwidth("1,000,000"), lty = 1:2, xjust = 1, yjust = 1, title = "Data")
myavg <-mean(mydf$MEAS_AVG, na.rm=TRUE)
newds <- (mydf$MEAS_AVG - myavg)^2
newsum <- sum(newds, na.rm=TRUE)
N <- length(mydf$MEAS_AVG) - 1
newN <- 1/N
total <- newN*newsum
sigma <- total^(1/2)
USL <- mean(mydf$TARG_MAX, na.rm=TRUE)
LSL <- mean(mydf$TARG_MIN, na.rm=TRUE)
cpk <- min(((USL-myavg)/(3*sigma)),((myavg-LSL)/(3*sigma)))
cpkmonthly <- aggregate(mydf$MEAS_AVG, na.rm=TRUE, list(month=months(as.Date(mydf$PDATETIME))), mean)
monthlycpk <- by(mydf$MEAS_AVG, na.rm=TRUE, list(month=months(as.Date(mydf$PDATETIME))), mean)
cpk 'variable to store the entire year's CpK number
cpkmonthly 'variable to store the each month's mean CpK number 
```

到目前为止，上述脚本正确地执行了所有代码，将值分配给 cpkmonthly 和 cpk 变量。他们的输出如下：

```
> cpk
[1] 0.5892231

> cpkmonthly
month         x
1  April 0.2456467
2 August 0.2415564
3   July 0.2456895
4   June 0.2541071
5  March 0.1234333
6    May 0.4321418 
```

**问题：**如何分解 appregated 的“cpkmonthly”变量并为每个条目分配一个单独的变量？理想情况下，我希望每个都进入一个数组，因为我希望最终输出变量位于 HTML 显示字符串中。

```
SudoCode:
cpkmonth[1] = April
cpkvalue[1] = .245...
cpkmonth[2] = August
cpkvalue[2] = .2415...
... 
```

我希望 HTML 中的最终表格如下所示：

![理想的 HTML](../Images/94c2a6b1d6572f2a4065f18c2b4b5414.png)

所以最终的输出变量需要采用这种格式：

```
<tr><td>"Total Cpk"</td><tdcpkmonth[0]</td><td>cpkmonth[1]</td><td>...</td></tr>
<tr><td>"cpk"</td><tdcpkvalue[0]</td><td>cpkvalue[1]</td><td>...</td></tr> 
```

对于 HTML，我尝试过使用 toJSON/RJSON、R2HTML、HTMLUtil 和其他一些，但我只是在寻找一个输出变量。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:25:08.860

您应该能够使用以下`$`语法访问这两个列：

```
cpkmonth = cpkmonthly$month
cpkvalue = cpkmonthly$value 
```

你也可以使用`[`：

```
cpkmonth = cpkmonthly['month'] 
```

# android - 在 FFmpeg for Android 中解码 AAC

> ID：12850247
> 
> 赞同：4
> 
> 时间：2012-10-11T23:38:31.627
> 
> 标签：android, ffmpeg, decoding, aac

我正在尝试使用 AAC 解码 Android 设备上的 M4A 文件。

我使用以下代码来初始化编解码器。

```
codec = avcodec_find_decoder(CODEC_ID_AAC);
c= avcodec_alloc_context();
avcodec_open(c, codec); 
```

但是，当我后来尝试使用以下方法解码帧时：

```
len = avcodec_decode_audio3(c, (short *)mOutbuf, &out_size, &avpkt); 
```

我在日志中得到 -1（表示错误）和以下内容。

```
10-11 16:30:01.115: INFO/M4ADecoder(5260): channel element 0.0 is not allocated
10-11 16:30:02.195: INFO/M4ADecoder(5260): channel element 2.0 is not allocated
10-11 16:30:03.295: INFO/M4ADecoder(5260): channel element 0.6 is not allocated
10-11 16:30:07.645: INFO/M4ADecoder(5260): Sample rate index in program config element does not match the sample rate index configured by the container.
10-11 16:30:07.655: INFO/M4ADecoder(5260): Number of bands (3) exceeds limit (2). 
```

设置编解码器时我还需要执行其他步骤吗？在将数据发送到 AAC 解码器之前，我是否需要预先解析文件？

相同的文件适用于 Mac OSX 上的最新 ffmpeg 代码（即 ffmpeg -i filename.m4a"）。

# mplab - MPLAB 跟踪寄存器

> ID：12850253
> 
> 赞同：0
> 
> 时间：2012-10-11T23:40:16.880
> 
> 标签：mplab

我是 PIC mplab 和 PIC 的新手。我开发了一个在模拟器下运行的程序，一切似乎都按预期工作。现在，我想记录我的程序在端口 C 上所做的事情。我有一个应用刺激的文本脚本。一旦事情开始，我就从那个脚本中分离出来，并为 LATC 添加一个带有触发器需求和跟踪文件名的跟踪寄存器条目。但是没有任何东西被写入文件。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:06:52.913

好吧，我不知道为什么上述方法不起作用。我能够使用 PC=trigger 来跟踪 RAM 位置。无论如何，我决定跟踪寄存器不是我想要的。在它的位置，我定义了一个宏，它将我想要的任何内容捕获到 RAM 位置并进行 CALL 调试。通过在调试时设置 BREAKPOINT，我就能够观察我想要的任何 SFR 和 RAM 位置。

# javascript - 我有一个 jQuery onclick 问题

> ID：12850257
> 
> 赞同：0
> 
> 时间：2012-10-11T23:40:33.647
> 
> 标签：javascript, jquery, function, click

所以我将用一个例子来解释这一点。

我的提要或流有一个“喜欢”按钮（类：.like）。当用户单击它（使用 $(".like") ）时，它会以不刷新的方式将 like 插入数据库（使用 jQuery）。

插入后，我将文本更改为“Unlike”，将类更改为“.unlike”。

但是，当用户重新单击它时，它只是再次执行相同的函数，而不是转到 $(".unline").click 函数。我是否必须“更新”脚本或其他内容？

例如：

```
 $(".like").click(function(){
       alert("Like!");
       $(this).attr("class", "unlike");
    });
    $(".unlike").click(function(){
       alert("Unlike!");
       $(this).attr("class", "like");
    }); 
```

问题是它不会出现在like 函数中，它只会重复like 函数，即使属性发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:44:51.723

当您分配运行上述代码时，会发生事件绑定。您必须每次都重新绑定事件，或者更好的是，使用事件委托：

```
$(document)on("click",".like",function(){
   alert("Like!");
   $(this).addClass("unlike");
   $(this).removeClass("like");
});
$(document)on("click",".unlike",function(){
   alert("Unike!");
   $(this).addClass("like");
   $(this).removeClass("unlike");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:47:52.370

那是因为“不像”属性。脚本加载时尚未添加到 dom 中。试试这个：

```
<body>
<div class="like_it_or_not">
   HELLO!
</div>
</body> 
```

和 JS

```
$("body").on('click','.like_it_or_not', function(){
    $(this).toggleClass('like', 'unlike');
    if ($(this).hasClass('like')) {
       alert('like');
    } else if ($(this).hasClass('unlike')) {
       alert('unlike');
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T00:01:56.713

如果您不想委托您的点击事件（这是过度设计的 IMO），请检查处理程序：

```
$(".like").click(function(){
   alert( $(this).hasClass('unlike') ? 'unlike' : 'like' );
   $(this).toggleClass("unlike like");
}); 
```

[http://jsfiddle.net/NScyM/](http://jsfiddle.net/NScyM/)

每次单击并按预期切换类时，它应该检查“不同”类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T23:45:10.313

试试这个

```
$(".like").click(function(){
   alert("Like!");
   $(this).removeClass("like");
   $(this).attr("class", "unlike");
});
$(".unlike").click(function(){
   alert("Unlike!");
   $(this).removeClass("unlike");
   $(this).attr("class", "like");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T23:45:11.183

我认为您将不得不使用[live()](http://api.jquery.com/live/)或[on()](http://api.jquery.com/on/)来完成这项工作：

```
 $(".like").live("click", function() {
    $(this).removeClass("like").addClass("unlike");
 });
 $(".unlike").live("click", function() {
    $(this).removeClass("unlike").addClass("like");
 }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T23:46:48.427

为了让我的代码在这样的事情上保持干净，我分配了一个永远不会改变的类，并将点击事件与它联系起来。样式类只是作为 CSS 更改。例如：

```
<button class="vote like">button text</button>

$('.vote').click(function () {
    var alertText = ($(this).hasClass('like')) ? 'Like!' : 'Unlike!';
    alert(alertText);
    $(this).toggleClass('like').toggleClass('unlike');
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-11T23:49:11.057

试试这个

```
$(document).on('click', '.like', function(){
   alert("Like!");
   $(this).html('Unlike').removeClass("like").addClass("unlike");
});

$(document).on('click', '.unlike', function(){
   alert("Unlike!");
   $(this).html('Like').removeClass("unlike").addClass("like");
}); 
```

[**演示**](http://jsfiddle.net/VU37w/1/)。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-11T23:45:04.360

单击事件`unlike`处理程序尚未与新项目关联。如果您要像那样动态更改类，则需要查看（jQuery`on`处理程序）[http://api.jquery.com/on/]

```
$(document).on('click',".like", function(){
   alert("Like!");
   $(this).addClass("unlike").removeClass('like');

});
$(document).on('click',".unlike",function(){
   alert("Unlike!");
   $(this).addClass("like").removeClass('unlike');
}); 
```

# gcc - 在 Emacs 中自动提取用于索引源代码的 gcc -I 路径

> ID：12850266
> 
> 赞同：6
> 
> 时间：2012-10-11T23:41:56.630
> 
> 标签：gcc, emacs, autocomplete, makefile, cedet

看完之后：

*   [CEDET 简介](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html#sec6)
*   [CEDET-EDE 的功能介绍](http://epsilonvectorplusplus.wordpress.com/2012/04/27/a-functional-introduction-to-cedet-ede/)

我了解到，在使用现有的 make 文件和源代码创建项目文件夹时，我可以通过以下任一方式对文件进行[语义](http://cedet.sourceforge.net/semantic.shtml)索引：

1.  定义一个简单的 EDE 项目：

    `(ede-cpp-root-project ... :system-include-path '( "~/exp/include/boost_1_37" )`

2.  或者通过直接指定语义的包含路径

    `(semantic-add-system-include "~/exp/include/boost_1_37" 'c++-mode)`

但这仍然需要我**手动**输入路径。有没有办法从**现有的 make 文件**`include`中自动提取语义路径？

 ****背景：** 一些 IDE 具有从现有 make 文件中自动发现 gcc 路径**的**功能。`-I`例如，在 Eclipse 中，您可以在具有现有 make 文件和源代码的路径上创建项目，Eclipse 会在构建项目时推断其“智能感知”的包含路径（我假设 Eclipse 将 GNU make 的输出解析为做这个）。我想在 Emacs 中做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:13:24.293

答案是“是”：有一种方法可以发现这个包含路径。AFAIK 它的代码还没有写出来（我可能在这个上弄错了）。您需要做的就是运行`make -n`并在输出中查找“-I”。当然，魔鬼在细节中，但应该可以相当容易地编写概念证明。**

# c++ - 将 OpenCV 库与 Eclipse Ubuntu 链接

> ID：12850270
> 
> 赞同：0
> 
> 时间：2012-10-11T23:42:17.007
> 
> 标签：c++, eclipse, ubuntu, opencv, kalman-filter

> **可能重复：**
> [ubuntu 11.10 上的 OpenCV](https://stackoverflow.com/questions/7781302/opencv-on-ubuntu-11-10)

我很难在 Ubuntu 上安装 OpenCV。我相信我已经安装了 OpenCV；但是，我正在尝试使用 Eclipse 编译示例程序 kalman.cpp 之一，但我无法编译它。我相信我的问题是与图书馆链接。

看了很多教程，不明白为什么在我的电脑上安装opencv后，使用命令后得到以下输出`pkg-confi opencv --libs`：

```
manuel@manuel:~$ sudo pkg-config opencv --libs
/usr/local/lib/libopencv_calib3d.so
/usr/local/lib/libopencv_contrib.so /usr/local/lib/libopencv_core.so
/usr/local/lib/libopencv_features2d.so
/usr/local/lib/libopencv_flann.so /usr/local/lib/libopencv_gpu.so
/usr/local/lib/libopencv_highgui.so
/usr/local/lib/libopencv_imgproc.so /usr/local/lib/libopencv_legacy.so
/usr/local/lib/libopencv_ml.so /usr/local/lib/libopencv_nonfree.so
/usr/local/lib/libopencv_objdetect.so
/usr/local/lib/libopencv_photo.so
/usr/local/lib/libopencv_stitching.so /usr/local/lib/libopencv_ts.so
/usr/local/lib/libopencv_video.so
/usr/local/lib/libopencv_videostab.so 
```

*那里的*每个教程库都显示为：**

 *```
-L/where/you/have/installed/opencv/lib -lcxcore -lcv -lhighgui -lcvaux 
```

这真的很烦人，因为 Eclipse 找不到 libopencv_contrib.so 库。它正在等待 -lopencv_contrib

我真的很感激帮助。请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:09:12.423

要链接到库，您需要使用`-L /path/to/libraries`标志指定其所在目录的路径。

您还需要您想要使用的特定库`-l my_library`。

通常你还需要指定必要的包含路径使用`-I /path/to/headers`

* * *

`pkg-config`可以用作执行此操作的助手，因为它返回您使用库所需的确切参数。

你应该像这样使用它：

```
echo `pkg-config opencv --cflags --libs` 
```

分别

```
g++ my_first_opencv_app.cc `pkg-config opencv --cflags --libs` 
```

在我的系统上评估为

```
g++ my_first_opencv_app.cc -I/usr/include/opencv -lml -lcvaux -lhighgui -lcv -lcxcore 
```

* * *

要让它与 eclipse 一起工作，您可能需要通过项目设置中的某个 GUI 元素指定包含路径 ( `/usr/local/include/opencv`?)、库路径 ( ?) 和所需的库。`/usr/local/lib`那时你可能不需要`pkgconfig`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:02:59.890

我从未在 Eclipse 中使用过 OpenCV。我基本上使用 gcc 或 g++（取决于 c 或 C++）文件编译它。

对于 C 文件，

```
$ gcc -ggdb `pkg-config --cflags opencv` -o `basename opencvtest.c .c` opencvtest.c `pkg-config --libs opencv` 
```

对于 C++ 文件，

```
$ g++ -ggdb `pkg-config --cflags opencv` -o `basename opencvtest.cpp .cpp` opencvtest.cpp `pkg-config --libs opencv` 
```

有关详细信息，请参阅[http://jayrambhia.wordpress.com/2012/05/08/beginning-opencv/](http://jayrambhia.wordpress.com/2012/05/08/beginning-opencv/)

如果您对此感到满意，我认为您不需要使用 Eclipse。

希望这可以帮助。*

# wpf - 如何将列表绑定到 WPF 中的数据网格？

> ID：12850272
> 
> 赞同：0
> 
> 时间：2012-10-11T23:42:27.613
> 
> 标签：wpf, wpfdatagrid

我有一个包含对象的列表。这些对象中有 6 个双精度数组。我需要能够在数据网格的列中显示这些数组。

我试图弄清楚如何将列表绑定到数据网格，这让我今天大部分时间都很沮丧。

有人可以逐步指导我如何将此对象列表绑定到数据网格吗？

该列表只是展示所需要的。它是只读的。

（对于看过措辞并提供解决方案的人，谢谢）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T04:12:05.787

您可以创建一个 ObservableCollection 并将该集合绑定到 GridView 的 ItemsSource 属性。

你可以试试这篇文章： [http ://www.c-sharpcorner.com/UploadFile/mahesh/datagrid-in-wpf/](http://www.c-sharpcorner.com/UploadFile/mahesh/datagrid-in-wpf/)

如果您提供自定义对象并希望获得更好的控制，请定义 DataTemplate 并自己指定属性并将 AutogenerateColums 设置为 false。

# wcf - WCF 服务激活异常，原因非常罕见

> ID：12850278
> 
> 赞同：0
> 
> 时间：2012-10-11T23:43:44.450
> 
> 标签：wcf, exception

> 无法加载文件或程序集“App_Web_itds5u52，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.IO.FileNotFoundException：无法加载文件或程序集“App_Web_itds5u52，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。

我第一次部署它工作正常。第二次，从那时起，它让我 ServiceActivatioException 赢得访问服务，我在浏览到 service.svc 页面时收到上述错误。

我该如何解决这个问题？我正在使用 WCF 跟踪，我不知道它是否重要。

```
 <add name="xml" type="System.Diagnostics.XmlWriterTraceListener" initializeData="~/Logs/1OperatorMessagesLog1.svclog" /> 
```

谢谢你，瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:24:07.180

清理和重建解决了它...

# java - 使用 java 或 C++ 更改 mp3 的详细信息

> ID：12850280
> 
> 赞同：0
> 
> 时间：2012-10-11T23:43:50.750
> 
> 标签：java, c++, mp3

我正在尝试清理我的 mp3 收藏，并且我有一堆歌曲的开头有艺术家或数字，所以我想知道是否有办法从文件名中获取数字并将其放入细节中（轨道号）的文件。我已经知道如何从文件夹中读取文件我只是不确定如何尽可能更改文件的详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T23:46:44.117

您是否考虑过使用[Mp3Tag](http://www.mp3tag.de/en/)，它是一个非常好的应用程序，它实际上具有用于分析文件名并将详细信息放入标签的工具。

# php - 从mysql创建一个数组，其中column等于id column

> ID：12850285
> 
> 赞同：0
> 
> 时间：2012-10-11T23:44:39.203
> 
> 标签：php, mysql, arrays

好的，我有一个问题，很难把标题放在上面。我正在尝试从 id = something 的 A 列中获取所有行。以下是数据库外观的示例：

```
 id_1  id_2
-------------------
     7     13
     14    43
     14    44
     14    45
     12    43
     12    44
     18    46 
```

我需要从 id_2 获取所有项目，并根据它们的 id_1 id 将它们放入一个数组中。简而言之，我需要从这个数据库中得到这个结果：

```
7  =>  13
14 =>  43,44,45
12 =>  43,44
18 =>  46 
```

抱歉，这似乎令人困惑。我尝试过 GROUP BY，将 mysql 查询放在 for 循环中。我在这个表中有大约 1402 行。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:08:43.797

为此，您需要使用 group_concat mysql 函数。例如

```
SELECT id_1, GROUP_CONCAT(id_2) 
```

那应该给你你正在寻找的东西:)

# android - 为什么当我调用它时，我的 LinearLayout 没有出现在 FrameLayout 上？

> ID：12850293
> 
> 赞同：1
> 
> 时间：2012-10-11T23:45:28.360
> 
> 标签：android, fragment

我正在尝试做动态片段布局。我正在使用 2 个 xml 文件：一个是 ，`main_layout`另一个是`fragment1`.

我使用了，`Log.i`所以我可以知道我的程序在哪里崩溃，但它引用了运行代码正常但它没有出现在 main_layout 上的 fragment1。

这是我的代码：

## main_layout.xml

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:id="@+id/testFragment"
        android:visibility="gone" >
</FrameLayout> 
```

## 片段.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:id="@+id/fragmenta" 
    android:background="#F000F0">

    <TextView
        android:id="@+id/fragmentatext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Fragmenta 1" />

</LinearLayout> 
```

这是我`Side_Fragment`的扩展`SherlockFragment`：

```
View view;
    private final String TAG = "Side_Fragment";
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

            view = inflater.inflate(R.layout.fragmenta, container, false);
            Log.i(TAG,"fragment installed");
            return view;
    }
    @Override
    public void onAttach(Activity activity) {
        // TODO Auto-generated method stub
        super.onAttach(activity);
    }

} 
```

这是**主要活动**：

```
 private final String TAG = "Main Activity";
    FragmentManager fm = getSupportFragmentManager();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_layout);
        Log.i(TAG,"OnCreate");

        Button add = (Button) findViewById(R.id.button1);

        Log.i(TAG,"called FragmentManager");
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId())
        {
        case R.id.twitter:
            Log.i(TAG,"Twitter is clicked");
             // Check to see if the Fragment back stack has been populated // If not, create and populate the layout.
            Fragment detailsFragment = (Side_Fragment)fm.findFragmentById(R.id.fragmenta);
            Log.i(TAG,"called FragmentManager");
            if (detailsFragment == null) {
            Log.i(TAG,"pass ifstatment");
            FragmentTransaction ft = fm.beginTransaction(); 
            Log.i(TAG,"called FragmentTransaction");
            Side_Fragment test = new Side_Fragment();
            ft.add(R.id.testFragment,test);
            Log.i(TAG,"called add");
            ft.addToBackStack(null);
            ft.commit();
            Log.i(TAG,"called commit");
            getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE);
            }
            return true;
        case R.id.facebook:
            Log.i(TAG,"Facebook is clicked");
            return true;
        case R.id.refresh:
            Log.i(TAG,"Refresh is clicked");
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }

    }

    @Override
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
        final MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.main, menu);
        return true;
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        Log.i(TAG,"onPause");
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        Log.i(TAG,"onResume");
    }

    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
        Log.i(TAG,"onStart");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:46:41.797

您将`FrameLayout`宽度设置得有点小：`android:layout_width="0dp"`. 这将使它无法看到。

# security - 如何在 SQLAlchemy 中使用双引号转义

> ID：12850295
> 
> 赞同：2
> 
> 时间：2012-10-11T23:45:54.340
> 
> 标签：security, postgresql, sqlalchemy

我希望安全地将必须双引号转义的模式名称传递给数据库引擎，在这种情况下，在构造 GRANT 语句时，我想将包含 test 的变量安全地传递给数据库。

```
GRANT SELECT ON ALL TABLES IN SCHEMA "test" TO readuser 
```

我不确定如何从 SQLAlchemy 执行此操作。

如果有帮助，我正在使用 psycopg2 连接到 postgreSQL

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T00:44:53.307

我从未尝试过`GRANT`通过 SQLAlchemy 发出数据库维护查询。我想 ORM 不会发出这种查询，因此我猜你想使用[Session.execute](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#sqlalchemy.orm.session.Session.execute)以文本方式发出它。如果是这样，文档中的示例就如何做到这一点非常简单：

```
session.execute(
    "GRANT SELECT ON ALL TABLES IN SCHEMA :param TO readuser",
    { "param": "test" }
) 
```

# ios - 似乎无法将纹理加载到 OpenGL ES 中。我究竟做错了什么？

> ID：12850296
> 
> 赞同：2
> 
> 时间：2012-10-11T23:45:58.160
> 
> 标签：ios, opengl-es

我正在尝试在 iOS 下的 OpenGL ES 中加载纹理。这是我正在采取的方法：

1.  解析一个 obj，从中我得到位置、正常和 texcoord 属性。
2.  仅启用（对于此测试）着色器的位置和 texcoords。
3.  通过采样器 0 将任意 512x512 png 转换为 raw 并将其加载到 GL。
4.  在顶点着色器中，仅在规范体积/剪辑空间中返回 gl_Position，同时将 texcoords 传递给片段着色器。
5.  在片段着色器中，将来自 texture2d 的查找分配给 gl_FragColor。

纹理文件：t1.png： ![在此处输入图像描述](../Images/a20c32fdaa38c862d063f58153572cdd.png)

渲染结果：

![在此处输入图像描述](../Images/0ecda14fa7d3f28d971d9bd9e4b5f5ce.png)

**显然没有纹理映射到立方体上。**尽管我从 texture2D() 中获得了一些价值，因为正如您所见，在着色器中没有传递或处理光照或颜色......我的猜测是我以某种方式搞砸了我认为我正在转换的方式png 到原始缓冲区以传递到纹理内存。

这是 obj 文件。一个测试立方体：

```
# Blender v2.63 (sub 0) OBJ File: ''
# www.blender.org
mtllib cube2.mtl
o Cube
v 1.000000 -1.000000 -1.000000
v 1.000000 -1.000000 1.000000
v -1.000000 -1.000000 1.000000
v -1.000000 -1.000000 -1.000000
v 1.000000 1.000000 -0.999999
v 0.999999 1.000000 1.000001
v -1.000000 1.000000 1.000000
v -1.000000 1.000000 -1.000000
vt 0.000000 0.000000
vt 1.000000 0.000000
vt 1.000000 1.000000
vt 0.000000 1.000000
vn 0.000000 -1.000000 0.000000
vn 0.000000 1.000000 0.000000
vn 1.000000 0.000000 0.000000
vn -0.000000 -0.000000 1.000000
vn -1.000000 -0.000000 -0.000000
vn 0.000000 0.000000 -1.000000
usemtl Material
s off
f 1/1/1 2/2/1 3/3/1
f 1/1/1 3/3/1 4/4/1
f 5/1/2 8/2/2 7/3/2
f 5/1/2 7/3/2 6/4/2
f 1/1/3 5/2/3 6/3/3
f 1/1/3 6/3/3 2/4/3
f 2/1/4 6/2/4 7/3/4
f 2/1/4 7/3/4 3/4/4
f 3/1/5 7/2/5 8/3/5
f 3/1/5 8/3/5 4/4/5
f 5/1/6 1/2/6 4/3/6
f 5/1/6 4/3/6 8/4/6 
```

然后是解析 obj 并创建数据结构的代码 - 法线被正确解析。然后，相关的代码片段是：

确保在链接期间绑定位置和 texcoords：

```
 // Attach vertex shader to program.
        glAttachShader(_program, vertShader);

        // Attach fragment shader to program.
        glAttachShader(_program, fragShader);

        // Bind attribute locations.
        glBindAttribLocation(_program, 0, "position");
        glBindAttribLocation(_program, 1, "tCoordinates"); 
```

顶点着色器（只是将 texcoords 传递给片段着色器）：

```
uniform mat4 modelViewProjectionMatrix;
uniform mat3 normalMatrix;

attribute vec4 position;
attribute vec2 tCoordinates;

varying highp vec2 tCoordinatesVarying;

void main()
{
    tCoordinatesVarying = tCoordinates;
    gl_Position = modelViewProjectionMatrix * position;
} 
```

片段着色器，它“应该”从加载的纹理中获取 vec4 并仅将其作为片段颜色传递：

```
uniform sampler2D s_texture;

varying highp vec2 tCoordinatesVarying;

void main()
{
    gl_FragColor = texture2D(s_texture, tCoordinatesVarying);
} 
```

以及设置代码，预绘图，在设置顶点属性以及纹理和纹理单元/采样器绑定的应用程序中：（暂时忽略我不释放CG对象）

```
 NSString* path = [[NSBundle mainBundle] pathForResource:@"t1.png" ofType:nil];
    NSData* texData = [NSData dataWithContentsOfFile:path];
    UIImage* image = [UIImage imageWithData:texData];
    GLuint width = CGImageGetWidth(image.CGImage);
    GLuint height = CGImageGetHeight(image.CGImage);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    void* imageData = malloc(height*width*4);
    CGContextRef context = CGBitmapContextCreate(imageData, width, height, 8, 4*width, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Host);
    CGContextClearRect(context, CGRectMake(0, 0, width, height));
    CGContextDrawImage(context, CGRectMake(0, 0, width, height), image.CGImage);
    CGContextRelease(context);

    [EAGLContext setCurrentContext:self.context];
    [self loadShaders];

    glEnable(GL_DEPTH_TEST);
    glPixelStorei(GL_UNPACK_ALIGNMENT, 4);

    glActiveTexture(GL_TEXTURE0);

    glGenTextures(1, &_textureId);
    glBindTexture(GL_TEXTURE_2D, _textureId);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, imageData);

    int loc = glGetUniformLocation(_program, "s_texture");
    glUniform1i(loc, 0);

    glGenVertexArraysOES(1, &_vertexArray);
    glBindVertexArrayOES(_vertexArray);

    glGenBuffers(1, &_vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, vboData->vertexAttributesSize, vboData->vertexAttributes, GL_STATIC_DRAW);
    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, vboData->vertexAttributesStride,vboData->vPositionOffset);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, vboData->vertexAttributesStride,vboData->vTCoordinatesOffset); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:26:17.997

根据 zacaj 的建议，我意识到我只是没有将任何 texcoords 放入着色器中。错误是：

```
glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, vboData->vertexAttributesStride,vboData->vTCoordinatesOffset); 
```

因此，我启用了通过引用的属性编号，`GLKVertexAttribTexCoord0`但绑定了属性 1 中的属性。显然，GLK 常量没有转换为 1。

而是做

```
glEnableVertexAttribArray(1);
glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, vboData->vertexAttributesStride,vboData->vTCoordinatesOffset); 
```

我开始在着色器中获取 texcoords。

# c# - 在 NUnit 测试中使用 moq 模拟 HttpContext.Current

> ID：12850299
> 
> 赞同：3
> 
> 时间：2012-10-11T23:46:32.150
> 
> 标签：c#, asp.net-mvc-3, nunit, moq

我正在测试一个调用此类方法的 MVC 3 控制器：

```
public class SessionVar
{
    /// <summary>
    /// Gets the session.
    /// </summary>
    private static HttpSessionState Session
    {
        get
        {
            if (HttpContext.Current == null)
                throw new ApplicationException
                                   ("No Http Context, No Session to Get!");

            return HttpContext.Current.Session;
        }
    }

    public static T Get<T>(string key)
    {
        return Session[key] == null ? default(T) : (T)Session[key];
    }
    ...
} 
```

[根据Hanselman 博客](http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx "汉塞尔曼的博客")的建议，我的测试方法是：

```
[Test]
public void CanRenderEmployeeList()
{
    _mockIEmployeeService.Setup(s => s.GetEmployees(StatusFilter.OnlyActive))
        .Returns(BuildsEmployeeList().Where(e => e.IsApproved));

    var httpContext = FakeHttpContext();
    var target = _employeeController;
    target.ControllerContext = new ControllerContext
                  (new RequestContext(httpContext, new RouteData()), target);
    var result = target.Index();

    Assert.IsNotNull(result);
    Assert.IsInstanceOf<ViewResult>(result);
    var viewModel = target.ViewData.Model;
    Assert.IsInstanceOf<EmployeeListViewModel>(viewModel);
}

public static HttpContextBase FakeHttpContext()
{
    var context = new Mock<HttpContextBase>();
    var request = new Mock<HttpRequestBase>();
    var response = new Mock<HttpResponseBase>();
    var session = new Mock<HttpSessionStateBase>();
    var server = new Mock<HttpServerUtilityBase>();

    context.Setup(ctx => ctx.Request).Returns(request.Object);
    context.Setup(ctx => ctx.Response).Returns(response.Object);
    context.Setup(ctx => ctx.Session).Returns(session.Object);
    context.Setup(ctx => ctx.Server).Returns(server.Object);

    return context.Object;
} 
```

但是我的测试一直失败，我得到：

```
CanRenderEmployeeListSystem.ApplicationException : No Http Context, 
                                                          No Session to Get! 
```

这是要抛出的异常消息`HttpContext.Current == null`

我只需要 Session 对象“存在”，而不是存储在 Session 上的实际值。

你能告诉我我做错了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:30:01.030

Session 属性中的 HttpContext.Current 不受您正在创建的模拟 HttpContextBase 的影响。也就是说，简单地创建一个本地 HttpContextBase 不会自动填充 HttpContext.Current。事实上 HttpContext 和 HttpContextBase 实际上并不相关。您必须使用 HttpContextWrapper 来统一它们。

因此，您最好将 HttpContextWrapper 实现传递给您的类 SessionVar。在下面的代码中，我将您的方法和属性更改为实例级别，以便我们可以在构造函数中设置上下文。如果没有将上下文传递给构造函数，我们假设为 HttpContext.Current，但您也可以将模拟实例传递给您的测试。

```
public class SessionVar
{
    HttpContextWrapper m_httpContext;

    public SessionVar(HttpContextWrapper httpContext = null)
    {
        m_httpContext = httpContext ?? new HttpContextWrapper(HttpContext.Current);
    }

    /// <summary>
    /// Gets the session.
    /// </summary>
    private HttpSessionState Session
    {
        get
        {
            if (m_httpContext == null)
                throw new ApplicationException("No Http Context, No Session to Get!");

            return m_httpContext.Session;
        }
    }

    public T Get<T>(string key)
    {
        return Session[key] == null ? default(T) : (T)Session[key];
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T22:59:40.487

从长远来看，如果您为 SessionVar 类创建一个接口，您会更开心。在运行时使用您当前的实现（通过依赖注入）。在测试期间插入模拟。无需模拟所有这些 Http 运行时依赖项。

# ajax - 在 Telerik RadGrid 中编辑

> ID：12850300
> 
> 赞同：1
> 
> 时间：2012-10-11T23:46:34.433
> 
> 标签：ajax, telerik, edit, radgrid

我正在使用以下示例来实现在单击单元格时编辑网格中的单元格：

[http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/editondblclick/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/editondblclick/defaultcs.aspx)

我希望它像示例中一样工作，但基于单击。我无法让它工作，因为我一直在 Telerik.Web.UI.WebResource 中隐藏以下错误：

0x800a139e - Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerServerErrorException：字符串未被识别为有效格式。

如果有人可以提供任何帮助，我会亏欠你我的第一个孩子，因为我正在拔头发试图让它发挥作用。

谢谢

最初，错误就在这里，但似乎并不重要：

```
protected void detailsGrid_ItemCreated(object sender, GridItemEventArgs e)
{
    if (e.Item is GridDataItem && e.Item.IsInEditMode)
    {
        ((e.Item as GridDataItem)["detailsGridMonthOneCol"].Controls[0] as RadNumericTextBox).Width = Unit.Pixel(50);   // ArgumentOutOfRangeException - Specified argument was out of the range of valid values
    }
} 
```

detailsGridMonthOneCol 是我双击的列的名称。这似乎不是必需的，所以我将其注释掉，这时我收到以下错误：

```
Unhandled exception at line 15, column 16485 in http://localhost:63919/Telerik.Web.UI.WebResource.axd?_TSM_HiddenField_=RadScriptManager1_TSM&compress=1&_TSM_CombinedScripts_=;;System.Web.Extensions,+Version=4.0.0.0,+Culture=neutral,+PublicKeyToken=31bf3856ad364e35:en-US:10a773fc-9022-49ec-acd6-8830962d8cbb:ea597d4b:b25378d2;Telerik.Web.UI,+Version=2012.2.815.40,+Culture=neutral,+PublicKeyToken=121fae78165ba3d4:en-US:bd12f06c-2391-4523-868e-0017245d9792:16e4e7cd:ed16cbdc:f7645509:24ee1bba:e330518b:1e771326:8e6f0d33:6a6d718d:58366029:4b09f651:a2c5be80:874f8ea2:c172ae1e:f46195d3:9cdfc6e7:2003d0b8:c8618e41:e4f8f289

0x800a139e - Microsoft JScript runtime error: Sys.WebForms.PageRequestManagerServerErrorException: The string was not recognized as a valid format. 
```

代码被埋没了，但这里是抛出异常的地方：

```
var e=this._get_eventHandlerList().getHandler("endRequest"),b=false;if(e){var c=new Sys.WebForms.EndRequestEventArgs(a,f?f.dataItems:{},d);e(this,c);b=c.get_errorHandled()}if(a&&!b)throw a} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:43:45.010

代码并没有真正被埋没。Javascript 向您显示此错误。然而。错误发生在服务器端（`Sys.WebForms.PageRequestManagerServerErrorException`）

检查事件查看器（开始 => 运行 => eventvwr）它将向您显示错误的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:13:15.720

在您的脚本管理器中，向 OnAsyncPostBackError="myScriptManager_AsyncPostBackError" 添加一个处理程序，并在后面的代码中将一个断点放在该方法的打开花括号上。

```
protected void myScriptManager_AsyncPostBackError(object sender, AsyncPostBackErrorEventArgs e)
{ // breakpoint this line.

} 
```

这样做，很可能，这个断点会被命中，你可以调试你的代码，并检查谁在抛出异常。

这可能会有所帮助，但事实上，唯一能帮助您的方法是您提供完整的源代码。我建议您创建另一个项目，隔离您想要工作的代码，并将此代码发布到 github、ftp 等。请发布您的代码，我会提供帮助。

# android - 手机联系人android中的搜索算法

> ID：12850308
> 
> 赞同：0
> 
> 时间：2012-10-11T23:47:52.483
> 
> 标签：android, algorithm, search, android-contacts

在我的应用程序中，我从电话中获取了联系人列表。我需要通过联系人列表实现上下文过滤/搜索机制。

过滤条件：根据数字键上的字母（所有可能的组合）按联系人姓名过滤！

当我输入每个新号码列表时，应更改仅留下合适的联系人。

像这儿。

[http://i.stack.imgur.com/IXZmJ.png](http://i.stack.imgur.com/IXZmJ.png)

我输入“253”，应用程序找到了 ALE。请帮助我做到这一点。

```
private List<Contact> contacts = new ArrayList<Contact>();
private List<Contact> sortContacts = new ArrayList<Contact>();
int textlength = 0;
TextView textView;

private class CustomTextWatcher implements TextWatcher {

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        textlength = textView.getText().length();

        for (int i = 0; i < contacts.size(); i++) {
            if (textlength <= contacts.get(i).getName().length()) {
                            // need help here
                                                                       }}}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T23:52:05.353

您可以使用[trie](http://en.wikipedia.org/wiki/Trie)或[基数树](http://en.wikipedia.org/wiki/Radix_tree)来获取具有特定前缀的所有字符串。

但是请注意，在您的情况下 - 您在每次搜索中检查多个前缀，一个可能的解决方案是持有代表字符串的数字的 trie，并且 trie 的前导将指向它实际代表的字符串（有可能不止一次）。
查找数字时，使用前缀数字中的简单[DFS](http://en.wikipedia.org/wiki/Depth-first_search)来获取所有相关字符串。

如果名称列表不经常更改，则尝试可能会过大。相反，您可以将表示数字和名称的元组存储`(number,string)`在`number`排序`string`数组中，并使用[二进制搜索](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#binarySearch%28java.lang.Object%5B%5D,%20java.lang.Object%29)来获取具有所需前缀的第一个数字，并在找到后通过线性搜索返回所有名称。
但是请注意，在这种情况下插入一个新条目将会是`O(n)`，因此如果它确实经常发生 - 请避免使用此解决方案，因为它预计效率不高。

# iphone - 有没有办法从应用的 .ipa 存档中查看应用的 .entitlements 文件？

> ID：12850309
> 
> 赞同：13
> 
> 时间：2012-10-11T23:48:09.937
> 
> 标签：iphone, xcode, ios6, ad-hoc-distribution, archiving

我认为创建 .ipa 时我的应用程序的 .entitlements 文件存在问题，因此我想检查权利文件的 Bundle ID。在构建之前，我使用了一个相当复杂的构建脚本来更改其中的一些内容，所以我想看看最终产品是什么。我知道曾经有一个 Entitlements.plist，我可以从 ipa 中删除，但它似乎不再存在。现在有什么方法可以访问 .entitlements 文件吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-04-14T22:20:13.330

对于那些通过谷歌到达这里的人来说，Apple 在[https://developer.apple.com/library/ios/qa/qa1798/_index.html](https://developer.apple.com/library/ios/qa/qa1798/_index.html)提供的信息要更新得多。具体来说，解压 IPA 后：

通过运行显示应用程序中的权利：

```
codesign -d --entitlements :- "Payload/YourApp.app" 
```

并通过运行显示配置文件：

```
security -D -i "Payload/YourApp.app/embedded.mobileprovision" 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-12T03:41:44.080

当然，解压缩`.ipa`将创建一个 Payload 目录的文件。Payload 目录内部是应用程序包。在 Finder 中右键单击应用程序包以“显示包内容”。

查找可以使用文本编辑器或 plist 编辑器打开的 embedded.mobileprovision 文件。寻找`<key>Entitlements</key>`

# google-chrome-extension - 使用 chrome.tabs.onUpdated 时忽略本地 URL

> ID：12850311
> 
> 赞同：3
> 
> 时间：2012-10-11T23:48:39.917
> 
> 标签：google-chrome-extension

我正在编写一个 Chrome 扩展程序来分析用户访问的网站。我决定使用 chrome.tabs.onUpdated 来运行我的分析脚本，而不是 manifest.json 中的 content_scripts，因为 chrome.tabs.onUpdated 在 AJAX 重度网站上的页面刷新方面做得更好。

我不需要分析对新的空选项卡或 chrome-extension://（本地）页面的更新，事实上，如果我尝试将脚本注入这些选项卡，则会引发错误。是否有更自动的方法来忽略这些页面，或者我是否必须使用 Try/Catch 块或通过分析 URL 手动执行？我确信我可以手动完成，但似乎应该有一种更自动的方式来完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-03-25T20:46:29.863

您可以通过过滤掉以下开头的 URL 来忽略所有本地或内部 chrome 扩展 URL `'chrome'`：

```
// Listen for changes on tabs
chrome.tabs.onUpdated.addListener(function(tabId, info, tab) {
    log_console('tab', tab)

    // If tab is not an internal chrome tab
    if (!tab.url.startsWith('chrome')) {
        console.log('Non-internal URL updated")
    }

}); 
```

请注意，如果您想访问 URL，则需要您的`tabs`权限，否则将是并且这将不起作用。如果您无法获得许可，最好的办法可能是在尝试注入时捕获并处理错误。`manifest.json``tab.url``undefined``tabs`

# java - File.length() 在 Java 中返回不正确的值

> ID：12850312
> 
> 赞同：6
> 
> 时间：2012-10-11T23:48:42.063
> 
> 标签：java, file

在文件对象上调用 .length() 时，超过 2 GB 的文件返回不正确的值。

这发生在运行在 tomcat 容器中的 Web 应用程序中。

例如，windows 报告为 2,083,344,714 字节的文件从 java 中返回为 1887961088。

以下是环境细节：

*   jdk 1.6.0_24(64位)
*   Java JotSpot(TM) 64 位服务器 VM（内部版本 17.0-b17，混合模式）
*   雄猫 6.0.29
*   视窗服务器 2008 r2

所以我立即怀疑与 32 位虚拟机有关，但一切似乎都在 64 位运行。我完全被难住了，任何帮助将不胜感激，只要帮助开发一些测试，看看问题是否与以某种方式在 32 模式下运行的东西有关..

编辑：

回答一些评论：当我使用相同的 JVM（仅输出 file.length）运行一个非常简单的测试用例时，我得到了正确的值：2,083,344,714。

我非常有信心这*应该可以*工作，我只是觉得我的 tomcat 配置/java 配置/应用程序让我很难过。它仅影响超过一定大小的文件这一事实确实使它看起来像是 32 位与 64 位的问题，但据我所知，一切都是 64 位的。

编辑 2：开始怀疑这几乎是不可能的，我可能会遇到一个问题，即线程在文件被完全复制之前占用了文件的长度。如果有人在乎，我会在我弄清楚时在这里发布:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T00:19:19.377

对我来说似乎工作得很好......

Windows 7 x64 上的 pagefile.sys，由 DOS 报告为 8446545920 字节

Java 7.0_02 x32 8446545920 / 7.87 GB

Java 1.6_30 x32 8446545920 / 7.87 GB

```
import java.io.File;
import java.text.NumberFormat;

public class TestFileSize {

    public static void main(String[] args) {
        File test1 = new File("C:/pagefile.sys");
        File test2 = new File("C:/hiberfil.sys");

        System.out.println(test1.length() + " / " + ByteFormatter.format(test1.length()));
        System.out.println(test2.length() + " / " + ByteFormatter.format(test2.length()));

    }

    public static class ByteFormatter {

        public static final long KILO_BYTES = 1024;
        public static final long MEGA_BYTES = 1024 * KILO_BYTES;
        public static final long GIGA_BYTES = 1024 * MEGA_BYTES;
        public static final long TERA_BYTES = 1024 * GIGA_BYTES;
        public enum Format {

            TeraBytes(TERA_BYTES),
            GigaBytes(GIGA_BYTES),
            MegaBytes(MEGA_BYTES),
            KiloBytes(KILO_BYTES);
            private long multiplier;

            private Format(long multiplier) {
                this.multiplier = multiplier;
            }

            public long getMultiplier() {
                return multiplier;
            }
        }

        public static String format(long bytes) {
            NumberFormat nf = NumberFormat.getNumberInstance();
            nf.setMaximumFractionDigits(2);
            nf.setMinimumFractionDigits(0);
            String format = bytes + " bytes";
            if (bytes / TERA_BYTES > 0) {
                format = nf.format((double) bytes / TERA_BYTES) + " tb";
            } else if (bytes / GIGA_BYTES > 0) {
                format = nf.format((double) bytes / GIGA_BYTES) + " gb";
            } else if (bytes / MEGA_BYTES > 0) {
                format = nf.format((double) bytes / MEGA_BYTES) + " mb";
            } else if (bytes / KILO_BYTES > 0) {
                format = nf.format((double) bytes / KILO_BYTES) + " kb";
            } else {
                format = nf.format(bytes) + " bytes";
            }

            return format;
        }

        public static String formatMegaBytes(long lMegaBytes) {

            return format((long) ((double) lMegaBytes * MEGA_BYTES));

        }

        public static String formatKiloBytes(long kbytes) {

            return format(kbytes * KILO_BYTES);

        }

        public static String formatGigaBytes(long gbytes) {

            return format(gbytes * GIGA_BYTES);

        }

        public static String formatTeraBytes(long gbytes) {

            return format(gbytes * TERA_BYTES);

        }

        public static long toBytes(String value, Format format) {

            long multipler = format.getMultiplier();

            long bytes = (long) (Double.parseDouble(value.trim()) * multipler);

            return bytes;

        }

        public static long toBytes(String sValue) {

            long lBytes = 0;

            if (sValue.indexOf(" ") > -1) {

                String sElements[] = sValue.split(" ");

                lBytes = Long.parseLong(sElements[0]);

                if (sElements[1].toLowerCase().startsWith("gb")) {

                    lBytes *= GIGA_BYTES;

                } else if (sElements[1].toLowerCase().startsWith("mb")) {

                    lBytes *= MEGA_BYTES;

                } else if (sElements[1].toLowerCase().startsWith("kb")) {

                    lBytes *= KILO_BYTES;

                }

            } else {

                sValue = sValue.trim();
                long lMultiplier = 1;
                String sBytes = null;

                if (sValue.toLowerCase().endsWith("gb")) {

                    sBytes = sValue.substring(0, sValue.toLowerCase().indexOf("gb"));
                    lMultiplier = GIGA_BYTES;

                } else if (sValue.toLowerCase().endsWith("mb")) {

                    sBytes = sValue.substring(0, sValue.toLowerCase().indexOf("mb"));
                    lMultiplier = MEGA_BYTES;

                } else if (sValue.toLowerCase().endsWith("kb")) {

                    sBytes = sValue.substring(0, sValue.toLowerCase().indexOf("kb"));
                    lMultiplier = KILO_BYTES;

                }

                lBytes = Long.parseLong(sBytes);

                lBytes *= lMultiplier;

            }

            return lBytes;

        }
    }
} 
```

# google-earth-plugin - 双击谷歌地球树视图节点不会“飞到”地标

> ID：12850314
> 
> 赞同：0
> 
> 时间：2012-10-11T23:49:05.020
> 
> 标签：google-earth-plugin

我在桌面应用程序（Visual Studio C#）中使用插件。我正在使用以下代码创建地标：

```
// Create a new coordinate object based on the lat/lon of the device
// TODO :: add lat/lon once data is available
FC.GEPluginCtrls.Geo.Coordinate Coord = 
     new FC.GEPluginCtrls.Geo.Coordinate(0, 0, 0, AltitudeMode.RelativeToGround);

// Create a placemark and put it in the tree.
kmlTreeView.ParseKmlObject(KmlHelpers.CreatePlacemark(
            ge,
            Coord,
            ((Device)DeviceList[i]).sSerialNum,  // ID
            ((Device)DeviceList[i]).sNickname,   // Name - shown in tree
            ((Device)DeviceList[i]).sName));     // Description - shown in bubble 
```

在 TreeView 中显示了新节点，当我双击它们时，气泡会弹出，其中包含信息，但视图不会改变。我试图验证文档中显示的属性“public bool FlyToOnDoubleClickNode”，但我使用的版本（1.010）中显然不存在该属性。

当我加载 KML 文件时，双击按预期工作，但自从我手动添加地标后，它就不起作用了。

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:58:09.977

您是否尝试过手动分配`<LookAt>`or `<Camera>`？那应该工作

编辑：`FlyToOnDoubleClickNode`默认情况下是打开的，所以你的问题在别处

我不知道您为什么在设置多个 LookAt 时遇到问题。您是否尝试过为您的 'ids' 分配`LookAt`？根据您实际在做什么，这可能会有所帮助。

否则，你见过[setFlyToView()](https://developers.google.com/earth/documentation/reference/interface_kml_network_link)

不过，我不确定这会对您有所帮助，因为它与通过 NetworkLinks 加载的 KML 有关

这就是关于我的想法 - 祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:45:42.250

看起来坐标 0,0 在某种程度上很重要。如果坐标更改为其他值，则“FlyTo”有效（0.1 和 0.1 有效）。

# iphone - 如何指定我的应用绝对需要启用位置服务？

> ID：12850315
> 
> 赞同：1
> 
> 时间：2012-10-11T23:49:07.110
> 
> 标签：iphone, ios, info-plist

这个 UIRequiredDeviceCapabilities 键带有“位置服务”项。

文档对此有点含糊：

> 如果您的应用需要（或明确禁止）使用核心位置框架检索设备当前位置的能力，请包含此键。（此键是指通用定位服务功能。如果您特别需要 GPS 级别的精度，则还应包括 gps 键。）

这个“必需的能力”键的目的是定义什么是绝对需要的。但是文档说“（或明确禁止）”这让我感到困惑。现在要么这个键说必须有定位服务，要么说禁止定位服务？那有意义吗？

**如果我指定了这一点，并且有人对位置服务有家长控制或其他无法控制的限制，这是否意味着他们一开始就无法从 App Store 购买该应用程序？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:54:14.370

如果 的值`UIRequiredDeviceCapabilities`是一个数组，那么它指定了所需的功能，但如果值是一个字典，那么键是功能，值是真/假，无论它们是必需的还是禁止的。

文档中提到了这一点，但您可能忽略了它，因为它有点隐藏。

# c# - 更少锁定的线程安全

> ID：12850318
> 
> 赞同：3
> 
> 时间：2012-10-11T23:49:13.687
> 
> 标签：c#, multithreading

> **可能重复：**
> [C# 线程和阻塞](https://stackoverflow.com/questions/12810549/c-sharp-threading-blocking)

我正在尝试有效地确定哪种方法更好：

目前，我有一个单例实例，它公开了以延迟加载方式加载的实体。我列出了三种方法，每种方法都有一些优点。第一种方法完全依赖双锁模式来确保线程安全。第二种方法不使用锁定，但它有可能在比赛中双重加载。第三种方法确实使用了我非常喜欢的解决方案。（系统。懒惰）。

出于某种原因，我觉得第二种方法（System.Thread.InterLocked）有问题，但我无法指出它。有理由支持一种方法而不是另一种方法吗？我在之前的一篇文章中确实提到了这一点，我觉得第三种选择是从现在开始的方式。

我将代码剥离为准系统以便能够解释设计。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TPLDemo
{
  public class SomeEntity
  {
  }

  public class MultiThreadedManager
  {
    private static readonly System.Lazy<MultiThreadedManager> instance = new Lazy<MultiThreadedManager>(() => { return new MultiThreadedManager(); });
    private readonly object _syncRoot = new object();
    private List<SomeEntity> _inMemoryEntities = null;
    private List<SomeEntity> _inMemoryEntitiesUsingLockFreeApproach = null;
    private System.Lazy<List<SomeEntity>> _inMemoryUsingLazy = new Lazy<List<SomeEntity>>(() => { return MultiThreadedManager.Instance.LoadFromSomewhere(); });

    public static MultiThreadedManager Instance
    {
      get { return instance.Value; }
    }

    public IEnumerable<SomeEntity> LazyEntities
    {
      get
      {
        return _inMemoryUsingLazy.Value;
      }
    }

    public IEnumerable<SomeEntity> LocklessEntities
    {
      get
      {
        if (_inMemoryEntitiesUsingLockFreeApproach == null)
        {
          do
          {
          // Is it possible multiple threads hit this at the same time?
          } while (System.Threading.Interlocked.CompareExchange<List<SomeEntity>>(ref                _inMemoryEntitiesUsingLockFreeApproach, this.LoadFromSomewhere(), null) != null);
        }

        return _inMemoryEntitiesUsingLockFreeApproach;
      }
    }

    /// <summary>
    /// This is thread safe but it involved some locking. 
    /// </summary>
    public IEnumerable<SomeEntity> Entities
    {
      get
      {
        if (_inMemoryEntities == null)
        {
          lock (_syncRoot)
          {
            if (_inMemoryEntities == null)
            {
              List<SomeEntity> list = this.LoadFromSomewhere();
              _inMemoryEntities = list;
            }
          }
        }

        return _inMemoryEntities;
      }
    }

    private List<SomeEntity> LoadFromSomewhere()
    {
      return new List<SomeEntity>();
    }

    public void ReloadEntities()
    {
      // This is sufficient becasue any subsequent call will reload them safely. 
      _inMemoryEntities = null;

      // This is sufficient becasue any subsequent call will reload them safely. 
      _inMemoryEntitiesUsingLockFreeApproach = null;

      // This is necessary becasue _inMemoryUsingLazy.Value is readonly.
      _inMemoryUsingLazy = new Lazy<List<SomeEntity>>(() => { return MultiThreadedManager.Instance.LoadFromSomewhere(); });
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:01:54.870

第三个选项 ( `Lazy`) 允许您配置它的行为方式。您可以使其行为类似于 (1) 或 (2)。

在任何情况下，一旦它被加载，它就不需要在内部锁定或互锁以将加载的`Value`.

所以一定要争取`System.Lazy`。

但是有一件令人讨厌的事情：如果工厂函数失败，则每次`Value`访问属性时都会存储并抛出异常。这意味着这个`Lazy`实例没有被破坏。你永远不能重试。这意味着暂时性故障（网络错误，...）可能会永久关闭您的应用程序，直到手动重新启动它。

如果在 MS Connect 上对此有所抱怨，但这是设计使然。

我的解决方案是编写自己的`Lazy`. 这并不难。

# jquery - Jquery - 如何在检索显示给用户时显示存储数值的文本查找

> ID：12850322
> 
> 赞同：0
> 
> 时间：2012-10-11T23:49:52.973
> 
> 标签：jquery, local-storage, each

首先 - 我是一个新手，正在尝试处理别人的代码，所以希望我能提供所有必要的信息。

由于与后端的接口，我的 jquery 移动应用程序将搜索参数作为文本的数字表示形式存储到本地存储中。搜索参数有三个问题，有 6 到 15 个不同的选项。客户可以将搜索保存在他们的收藏夹中。我需要将数字转换为文本以使其对客户友好。我知道如何转换少于两个响应的响应，但我不知道如何转换三个或更多响应。

几乎所有的内容都是通过 Ajax 动态生成的，所以 jsFiddle 是不可能的（至少对我来说是 ;-)。

当返回搜索结果时（考虑搜索游轮），通过此命令将以下信息存储在本地存储中：

```
localStorage.search = JSON.stringify(searchParams); 
```

它的存储方式如下：

> {"departuredate":"","re​​turndate":"","re​​gion":"62224","price":"4","duration":"5"}

然后，如果客户想要将搜索保存为“收藏夹”，则使用以下命令进行存储：

```
localStorage.favorites = JSON.stringify(favorites); 
```

存储在 localStorage 中的收藏搜索示例：

> {"search":{"62224:4:5::":{"searchID":"62224:4","searchinfo":{"departuredate":"","re​​turndate":"","re​​gion": "62224","price":"4","duration":"5"}}}}

这是我用于检索已保存搜索的代码：

```
>     $.each(searches, function(idx, searchFav){
>     var search = searchFav.searchinfo;
>     var newSearchFav = template.clone().appendTo(disp);
>     newSearchFav.attr('id', idx);
>     $('#region', newSearchFav).html(search.region);
>     $('#price', newSearchFav).html(search.price);
>     $('#duration', newSearchFav).html(search.duration);
>     $('#depart', newSearchFav).html((search.departuredate);
>     $('#return', newSearchFav).append((search.returndate); 
```

使用上面在 localStorage 中保存的搜索示例，上面的代码在 html 页面上显示如下：

*   地区编号：62224
*   价格编号：4
*   持续时间 ID：5
*   出发编号：
*   返回编号：

根据以下查找表，我希望持续时间显示为“14 晚以上”而不是“5”：

*   0 =“任何夜晚！”
*   1 =“1-3 晚”
*   2 =“4-6 晚”
*   3 =“7-9 晚”
*   4 =“10-13 晚”
*   5 = "14+ 晚"

如果我只有两个响应，我可以输入以下内容（例如）

```
 search.duration = ((search.duration > 4) ? "14+ Nights" : "Any");
$('#duration', newSearchFav).html(search.duration); 
```

任何 4 或以下的值都将显示“任何”。但我不知道如何做两个以上的回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:19:25.750

我通过使用以下方法解决了这个问题：

```
search.duration = (search.duration > 4) ? "14+ Nights" : (search.duration == 4) ? "10-13 Nights" : (search.duration == 3) ? "7-9 Nights" : (search.duration == 2) ? "4-6 Nights" : (search.duration == 1) ? "1-3 Nights" : "Any Duration"; 
```

# php - in_array 函数总是返回 true

> ID：12850326
> 
> 赞同：0
> 
> 时间：2012-10-11T23:50:55.120
> 
> 标签：php, http

我正在构建一个网页以将相机预订提交到 MYSQL 数据库。该网页有一个 html 前端，将其转发到以下 PHP 页面，然后将该信息提交给 MYSQL 目前客户希望没有办法重复预订相机。为了实现这一点，我构建了以下 PHP 页面，它检查 html 前端 ($_POST[camera]) 中选择的摄像头是否与 $result_array 数组中的任何内容相同。代码如下：

```
<?php
$con = mysql_connect("****","*****","*******");

if (!$con) {
  die('Could not connect: ' . mysql_error());
}

mysql_select_db("****", $con);
$query = "SELECT Camera FROM T_Bookings";
$result = mysql_query($query) or die ("no query");
$result_array = array();

while($row = mysql_fetch_array($result)) {
  $result_array[] = $row;
}

$fixed_array = array_keys($result_array);

if (in_array($_POST[camera],$result_array)){
  $x = 1;
  $y = 2;
}

if($x + $y == 3){
  echo "Camera already booked!";
}
else {
  mysql_query("INSERT INTO T_Bookings (F_Name, L_Name, Camera, Bag, Cable, Tripod, MemoryCard, Date, Authorised) 
VALUES ('$_POST[firstname]','$_POST[lastname]','$_POST[camera]','$_POST[bag]','$_POST[cable]','$_POST[tripod]','$_POST[memory]','$_POST[date]',)");

  echo "1 record added";

  if (!mysql_query($sql,$con)) {
    die('Error: ' . mysql_error());
  }
}

mysql_close($con);
?> 
```

但是，即使不满足这些条件，它也会一直进行预订。为什么会这样？谢谢，戴恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:58:26.777

mysql_fetch_array($result) 返回一个数组，如

```
array('Camera' => 'Whatever') 
```

所以将下面的行改为阅读

```
$result_array[] = $row['Camera']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:18:02.090

你的逻辑有一个根本性的缺陷。您需要唯一值，而当前的实现不提供任何此类保证（在 Wikipedia 上了解 ACID：http: [//en.m.wikipedia.org/wiki/ACID](http://en.m.wikipedia.org/wiki/ACID)）。

不过你很幸运。MySQL 恰好可以轻松提供您所需要的东西。在 Camera 列上创建唯一索引 (http://dev.mysql.com/doc/refman/5.5/en/create-index.html)。然后不要检查以前的同名条目。只需尝试进行插入。MySQL 将返回一个易于处理的错误，并且您的代码变得更简单、更易于阅读和管理。

# c# - 在onclientclick中将变量传递给javascript

> ID：12850327
> 
> 赞同：4
> 
> 时间：2012-10-11T23:51:01.560
> 
> 标签：c#, javascript, asp.net, onclientclick

好的，我想我已经从 stackoverflow 尝试了 3-4 种方法，但似乎没有一个有效。

我有：

```
OnClientClick='<%# Eval("albumName", "doConfirm(\"delete\", \"{0}\");").ToString() %>' 
```

但在 html 中它呈现为：

```
onclick="doConfirm(&quot;delete&quot;, &quot;Test&quot;);" 
```

还尝试制作一个方法来调用：

```
public string CreateConfirmation(String action, String item) {
    return String.Format(@"return confirm('Sikker på du vil {0}: {1}');", action, item);
} 
```

有了这个：

```
OnClientClick='<%# CreateConfirmation("delete", (string)Eval(albumName)) %>' 
```

但是给了我完全相同的问题....所以我很迷茫？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T12:58:37.590

我提前为这么长的答案道歉，但我想彻底。

这显然是 .Net 4.0（及更高版本）中的“安全”功能。你可以阅读更多关于它的信息：

*   [http://avinashsing.sunkur.com/2010/10/29/asp-net-html-encoding-attributes-in-server-controls/](http://avinashsing.sunkur.com/2010/10/29/asp-net-html-encoding-attributes-in-server-controls/)
*   [http://forums.asp.net/p/1554455/3818604.aspx](http://forums.asp.net/p/1554455/3818604.aspx)
*   [停止标签生成器转义单引号 ASP.NET MVC 2](https://stackoverflow.com/questions/3924861/stop-the-tag-builder-escaping-single-quotes-asp-net-mvc-2)

上述所有链接还建议声明一个公共类来覆盖该行为：

```
public class HtmlAttributeNoEncoding : System.Web.Util.HttpEncoder
{
    protected override void HtmlAttributeEncode(string value, System.IO.TextWriter output)
    {
        output.Write(value);
    }
} 
```

然后将其添加到`<system.web>`web.config 中的元素中：

```
<httpRuntime encoderType="HtmlAttributeNoEncoding"/> 
```

这绝对解决了呈现问题，因此引号和撇号呈现为`"`和`'`（如预期的那样）。

也就是说，我用以下方法测试了你的问题：

```
<script type="text/javascript">
    var doConfirm = function (action, item) {
        alert('Sikker på du vil ' + action + ': ' + item);
        return false;
    };
</script>

<p>Some "arbitrary" text. <asp:Button ID="Button3" runat="server" Text="Button" OnClientClick="doConfirm('delete', 'myalbum');" /></p>
<asp:GridView ID="GridView1" runat="server">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Button ID="Button1" runat="server" Text="Button" OnClientClick='<%# Eval("albumName", "doConfirm(\"delete\", \"{0}\");").ToString() %>' />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField HeaderText="Album Name" DataField="albumName" />
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Button ID="Button2" runat="server" Text="Button" OnClientClick='<%# CreateConfirmation("delete", (string)Eval("albumName")) %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

在代码隐藏中：

```
public partial class _Default : System.Web.UI.Page
{
    public string CreateConfirmation(String action, String item)
    {
        return String.Format(@"return doConfirm('{0}', '{1}');", action, item);
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        DataTable dt = new DataTable();
        DataColumn dc = new DataColumn("albumName", typeof(string));
        DataRow dr = null;

        dt.Columns.Add(dc);

        dr = dt.NewRow();
        dr["albumName"] = "Zen Arcade";
        dt.Rows.Add(dr);

        dr = dt.NewRow();
        dr["albumName"] = "New Day Rising";
        dt.Rows.Add(dr);

        dr = dt.NewRow();
        dr["albumName"] = "Candy Apple Grey";
        dt.Rows.Add(dr);

        GridView1.DataSource = dt;
        GridView1.DataBind();
    }

} 
```

我能够复制您的渲染问题：

```
<p>Some "arbitrary" text.
    <input type="submit" onclick="doConfirm(&#39;delete&#39;, &#39;myalbum&#39;);" value="Button" name="ctl00$MainContent$Button3" id="MainContent_Button3" />
</p>
<div>
    <table cellspacing="0" rules="all" border="1" id="MainContent_GridView1"
    style="border-collapse:collapse;">
        <tr>
            <th scope="col">&nbsp;</th>
            <th scope="col">Album Name</th>
            <th scope="col">&nbsp;</th>
            <th scope="col">albumName</th>
        </tr>
        <tr>
            <td>
                <input type="submit" onclick="doConfirm(&quot;delete&quot;, &quot;Zen Arcade&quot;);" value="Button" name="ctl00$MainContent$GridView1$ctl02$Button1" id="MainContent_GridView1_Button1_0" />
            </td>
            <td>Zen Arcade</td>
            <td>
                <input type="submit" onclick="return doConfirm(&#39;delete&#39;, &#39;Zen Arcade&#39;);" value="Button" name="ctl00$MainContent$GridView1$ctl02$Button2" id="MainContent_GridView1_Button2_0" />
            </td>
            <td>Zen Arcade</td>
        </tr>
        <tr>
            <td>
                <input type="submit" onclick="doConfirm(&quot;delete&quot;, &quot;New Day Rising&quot;);" value="Button" name="ctl00$MainContent$GridView1$ctl03$Button1" id="MainContent_GridView1_Button1_1" />
            </td>
            <td>New Day Rising</td>
            <td>
                <input type="submit" onclick="return doConfirm(&#39;delete&#39;, &#39;New Day Rising&#39;);" value="Button" name="ctl00$MainContent$GridView1$ctl03$Button2" id="MainContent_GridView1_Button2_1" />
            </td>
            <td>New Day Rising</td>
        </tr>
        <tr>
            <td>
                <input type="submit" onclick="doConfirm(&quot;delete&quot;, &quot;Candy Apple Grey&quot;);" value="Button" name="ctl00$MainContent$GridView1$ctl04$Button1" id="MainContent_GridView1_Button1_2" />
            </td>
            <td>Candy Apple Grey</td>
            <td>
                <input type="submit" onclick="return doConfirm(&#39;delete&#39;, &#39;Candy Apple Grey&#39;);" value="Button" name="ctl00$MainContent$GridView1$ctl04$Button2" id="MainContent_GridView1_Button2_2" />
            </td>
            <td>Candy Apple Grey</td>
        </tr>
    </table>
</div> 
```

单击任何按钮时，JavaScript 函数会忽略 HTML 编码，提醒我：

```
Sikker på du vil delete: Zen Arcade 
```

因此，虽然它在源代码中看起来很时髦，但引号和撇号呈现为`&quot;`并且`&#39;`似乎并没有真正影响任何东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T00:00:37.697

尝试以下操作：

```
<asp:Button OnClientClick="Delete(this);" Text='<%# Eval("albumName"); %>' /> 
```

JS：

```
function Delete(element) {
    var value = element.value;
    return confirm('Delete' + value + '?');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T15:16:23.213

只需将事件服务器端附加到事件`rowDataBound`中，例如（您可以将链接按钮替换为按钮）

```
LinkButton myLinkButton=(LinkButton)e.row.FindControl("yourButtonName");
if(myLinkButton!=null)
{
     myLinkButton.Attributes.Add("onclick","javascript:return confirm ('Are you sure you want to delete "+ DataBinder.Eval(e.row.DataItem, "YourDbField") + " ?');");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-30T15:59:19.383

即使这个问题已经 5 年了，我还是想跟进，因为我在 ImageButton 上遇到了同样的问题，并且能够使用 HiddenField 解决它。

背景：我有一个 Web 用户控件，如果有可用的帮助，我希望显示一个帮助按钮。

我在用户控件中添加了一个 HiddenField 和一个 ImageButton。然后我在控件上创建了一个属性，以便开发人员可以添加帮助文本。

ASPX 页面

```
<asp:HiddenField ID="hidHelpText" runat="server" />
<asp:ImageButton ID="imgHelp" runat="server" ImageUrl="~/images/help.png" Visible="False" /> 
```

代码隐藏（CS 文件）

```
public string HelpText
{
    get { return hidHelpText.Value; }
    set { hidHelpText.Value = value; }
}

protected void Page_Load(object sender, EventArgs e)
{
    imgHelp.Visible = !string.IsNullOrEmpty(HelpText);
    imgHelp.OnClientClick = string.Format("MsgBox({0}.value, MessageButtons.OK); return false;", hidHelpText.ClientID);
} 
```

这解决了这个问题，因为文本属于隐藏字段，而不是尝试将其包含在 OnClientClick 属性的 JavaScript 中。

顺便说一句：我无法复制和粘贴，因此此代码可能包含一些拼写错误，但我相信它是正确的。至少它指出了方向，因此您可以解决该问题。

# macos - 无法使用 Filezilla 在 Macintosh 上选择密钥

> ID：12850329
> 
> 赞同：3
> 
> 时间：2012-10-11T23:51:36.820
> 
> 标签：macos, ssh-keys, filezilla

我正在尝试使用 FileZilla -> Preferences -> Connection -> SFTP 导入我的 ssh 密钥，但该密钥位于隐藏的 ~/.ssh 目录中。文件选择框看不到它。有什么建议么？

# sql - T-SQL 中的错误 8120（嵌套选择命令）

> ID：12850330
> 
> 赞同：0
> 
> 时间：2012-10-11T23:51:47.147
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我在这个声明中的错误是什么？

```
Select Max (TBLvirtual.c2) as MOF --> Most ordered food (MOF)--//
      ,TBLvirtual.c1
from
    (select a.OrdItems as c1, count(a.OrdID) as c2
     from Orderrouter a 
     group by a.OrdItems) as TBLvirtual 
```

我收到了这个错误：

> 消息 8120，级别 16，状态 1，第 3 行列“TBLvirtual.c1”在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T23:58:40.553

`SELECT`您在中未包含在聚合函数中的任何字段都必须在 中`GROUP BY`：

```
Select Max(TBLvirtual.c2) as MOF --> Most ordered food (MOF)--// 
    ,TBLvirtual.c1 
from 
(
    select a.OrdItems as c1 , 
        count(a.OrdID)as c2 
    from Orderrouter a 
    group by a.OrdItems
) as TBLvirtual
group by TBLvirtual.c1  -- add this line 
```

如果你只想要一行（参见[SQL Fiddle With Demo](http://sqlfiddle.com/#!3/39e91/2)）：

```
Select Top 1 c1, c2
from 
(
    select a.OrdItems as c1 , 
        count(a.OrdID)as c2 
    from Orderrouter a 
    group by a.OrdItems
) as TBLvirtual
order by c2 desc 
```

而且你真的不需要派生表：

```
Select Top 1 
    a.OrdItems as c1 , 
    count(a.OrdID) as c2 
from Orderrouter a 
group by a.OrdItems
order by c2 desc ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:11:15.200

内部 Group By for count 已经使 C1 唯一，因此无需对它们进行聚合以用于 MAX。做这个

```
 select a.OrdItems as c1, count(a.OrdID) as c2
 from Orderrouter a 
 group by a.OrdItems
 order by count(a.OrdID) desc 
```

这会给你最高的计数，然后是下一个。如果您想要前 1 名或前 N 名，请执行

```
Select TOP 1 c1, c2 FROM
(
 select a.OrdItems as c1, count(a.OrdID) as c2
 from Orderrouter a 
 group by a.OrdItems
) TopMost
Order By C2 DESC 
```

# actionscript-3 - 多个数组，私有静态函数

> ID：12850334
> 
> 赞同：0
> 
> 时间：2012-10-11T23:52:08.317
> 
> 标签：actionscript-3, arraycollection

我有一个与私有静态函数连接的数组列表，并且想在不同的视图（Flex builder，Action script）上创建另一个数组列表，所以我复制了私有静态函数编辑了名称和“选择”部分，但我得到一个错误说：

“1061：通过静态类型类的引用调用可能未定义的方法成员。”

这是AS的代码：

```
package model
{
    import flash.data.SQLConnection;
    import flash.data.SQLResult;
    import flash.data.SQLStatement;
    import flash.events.SQLEvent;
    import flash.filesystem.File;
    import flash.filesystem.FileMode;
    import flash.filesystem.FileStream;

    import model.Dish;

    import mx.collections.ArrayCollection;

    public class SQLiteDatabase
    {
        private static var _sqlConnection:SQLConnection;

        public static function get sqlConnection():SQLConnection
        {
            if (_sqlConnection)
                return _sqlConnection;
            openDatabase(File.desktopDirectory.resolvePath("test.db"));
            return _sqlConnection;
        }

        public  function getNote(id:int):Dish
        {
            var sql:String = "SELECT id, title, time, message FROM notes WHERE id=?";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = id;
            stmt.execute();
            var result:Array = stmt.getResult().data;
            if (result && result.length == 1)
                return processRow(result[0]);
            else
                return null;
        }
        public function getmember(id:int):Dish
        {
            var sql:String = "SELECT id, title, time, message FROM notes WHERE id=?";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = id;
            stmt.execute();
            var result:Array = stmt.getResult().data;
            if (result && result.length == 1)
                return processRow(result[0]);
            else
                return null;
        }

        public function getMYBlist(id:int):Dish
        {
            var sql:String = "SELECT id, title, time, message FROM notes WHERE id=?";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = id;
            stmt.execute();
            var result:Array = stmt.getResult().data;
            if (result && result.length == 1)
                return processRow(result[0]);
            else
                return null;
        }

        public static function notes():ArrayCollection
        {
            var noteList:ArrayCollection = new ArrayCollection();

            var sql:String = "SELECT id, title, time, message FROM notes";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.execute();
            var sqlResult:SQLResult = stmt.getResult();
            if (sqlResult) {
                var result:Array = sqlResult.data;
                if (result) {
                    for (var index:Number = 0; index < result.length; index++) {
                        noteList.addItem(processRow(result[index]));
                    }
                }
            }
            return noteList;
        }

        public static function members():ArrayCollection
        {
            var memberslist:ArrayCollection = new ArrayCollection();

            var sql:String = "SELECT id, name FROM members";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.execute();
            var sqlResult:SQLResult = stmt.getResult();
            if (sqlResult) {
                var result:Array = sqlResult.data;
                if (result) {
                    for (var index:Number = 0; index < result.length; index++) {
                        memberslist.addItem(processRow(result[index]));
                    }
                }
            }
            return memberslist;
        }

        public static function addNote(note:Dish):void
        {
            var sql:String = 
                "INSERT INTO notes (title, time, message) " +
                "VALUES (?,?,?)";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = note.title;
            stmt.parameters[1] = note.time;
            stmt.parameters[2] = note.message;
            stmt.execute();
        }

        public static function addMember(note:Dish):void
        {
            var sql:String = 
                "INSERT INTO notes (title, time, message) " +
                "VALUES (?,?,?)";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = note.title;
            stmt.parameters[1] = note.time;
            stmt.parameters[2] = note.message;
            stmt.execute();
        }

        public static function deleteNote(note:Dish):void
        {
            var sql:String = "DELETE FROM notes WHERE id=?";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = note.id;
            stmt.execute();
        }

        public static function updateNote(note:Dish):void
        {
            var sql:String = "UPDATE notes SET title=?, time=?, message=? WHERE id=?";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = note.title;
            stmt.parameters[1] = note.time;
            stmt.parameters[2] = note.message;
            stmt.parameters[3] = note.id;
            stmt.execute();
        }

        protected static function processRow(o:Object):Dish
        {
            var note:Dish = new Dish();
            note.id = o.id;
            note.title = o.title == null ? "" : o.title;
            note.time = o.time == null ? "" :o.time;
            note.message = o.message == null ? "" : o.message;
            return note;
        }

        public static function openDatabase(file:File):void
        {
            var newDB:Boolean = true;
            if (file.exists)
                newDB = false;
            _sqlConnection = new SQLConnection();
            _sqlConnection.open(file);
            if (newDB)
            {
                createDatabase();
                populateDatabase();
            }
        }

        protected static function createDatabase():void
        {
            var sql:String = 
                "CREATE TABLE IF NOT EXISTS notes ( "+
                "id INTEGER PRIMARY KEY AUTOINCREMENT, " +
                "title VARCHAR(50), " +
                "time VARCHAR(50), " +
                "message VARCHAR(200))";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.execute();         
        }

        protected static function populateDatabase():void
        {
            var file:File = File.applicationDirectory.resolvePath("assets/notes.xml");
            if (!file.exists) return;
            var stream:FileStream = new FileStream();
            stream.open(file, FileMode.READ);
            var xml:XML = XML(stream.readUTFBytes(stream.bytesAvailable));
            stream.close();
            for each (var n:XML in xml.note)
            {
                var note:Dish = new Dish();
                note.id = n.id;
                note.title = n.title;
                note.time = n.time;
                note.message = n.message;
                addNote(note);
            }
        }

    }
} 
```

以及 MXML 文件的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="Profile">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import model.Dish;
            import model.SQLiteDatabase;

            import spark.events.IndexChangeEvent;

            protected function onNote2Selected(event:IndexChangeEvent):void {
                var selectedNote:Dish = event.currentTarget.dataProvider[event.newIndex];
                navigator.pushView(MemberDetailsView, selectedNote);
            }

            protected function onAddButtonClicked(event:MouseEvent):void {
                navigator.pushView(AddMemberView);
            }

        ]]>
    </fx:Script>

    <s:VGroup gap="-1">
    </s:VGroup>
    **<s:List dataProvider="{SQLiteDatabase.members()}"  change="onNoteSelected(event)"**
            left="0" right="0" top="0" bottom="0">

        <s:itemRenderer>
            <fx:Component>
                <s:IconItemRenderer labelField="title" messageField="message"/>
            </fx:Component>
        </s:itemRenderer>
    </s:List>
</s:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:21:04.817

```
public static function notes():ArrayCollection
        {
            var noteList:ArrayCollection = new ArrayCollection();

            var sql:String = "SELECT id, title, time, message FROM notes";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.execute();
            var sqlResult:SQLResult = stmt.getResult();
            if (sqlResult) {
                var result:Array = sqlResult.data;
                if (result) {
                    for (var index:Number = 0; index < result.length; index++) {
                        noteList.addItem(processRow(result[index]));
                    }
                }
            }
            return noteList;
        }

        public static function members():ArrayCollection
        {
            var noteList:ArrayCollection = new ArrayCollection();

            var sql:String = "SELECT testid, Dish_Name FROM DishInventory";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.execute();
            var sqlResult:SQLResult = stmt.getResult();
            if (sqlResult) {
                var result:Array = sqlResult.data;
                if (result) {
                    for (var index:Number = 0; index < result.length; index++) {
                        noteList.addItem(processRow2(result[index]));
                    }
                }
            }
            return noteList;
        }
protected static function processRow(o:Object):Dish
        {
            var note:Dish = new Dish();
            note.id = o.id;
            note.title = o.title == null ? "" : o.title;
            note.time = o.time == null ? "" :o.time;
            note.message = o.message == null ? "" : o.message;
            return note;
        }

        protected static function processRow2(o:Object):Dish
        {
            var note:Dish = new Dish();
            note.id = o.testID;
            note.title = o.Dish_Name == null ? "" : o.Dish_Name;

            return note;
        } 
```

不过还是要清理我的编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:02:06.793

该错误是因为您正在访问非静态类的静态方法。意思是实例还没有被创建，所以虽然链接器应该能够定位静态成员函数，但是没有办法解析对象的哪个实例。如果你声明类静态，它应该解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T22:31:11.023

解决方案是：

```
private function sqlResult(res:SQLEvent):void {

var sqlResult:SQLResult = stmt.getResult();

if (sqlResult) {        
    var data:Array = sqlResult.data;

    contactList = new ArrayCollection();

    for each(var item:Object in data){
        contact = new Contact(item);
        contactList.addItem(contact);
    }
} 
```

}

# apache - java.lang.UnsupportedClassVersionError：偏移量 = 6 处的主要版本错误

> ID：12850336
> 
> 赞同：10
> 
> 时间：2012-10-11T23:52:12.530
> 
> 标签：apache, tomcat, unsupported-class-version

我已经`WAR file`在`webapps`我的`tomcat`. 当我启动我的tomcat时，如下所示

```
C:\apache-tomcat-6.0.35\bin>startup.bat
Using CATALINA_BASE:   "C:\apache-tomcat-6.0.35"
Using CATALINA_HOME:   "C:\apache-tomcat-6.0.35"
Using CATALINA_TMPDIR: "C:\apache-tomcat-6.0.35\temp"
Using JRE_HOME:        "C:\Program Files (x86)\IBM\RationalSDLC\Common\Java5.0\jre"
Using CLASSPATH:       "C:\apache-tomcat-6.0.35\bin\bootstrap.jar" 
```

我得到这个例外 -

```
SEVERE: Error deploying web application archive DirectoryServer.war
java.lang.UnsupportedClassVersionError: (com/services/rest/Listener) bad major version at offset=6 (unable to load class com.services.rest.Listener)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2822)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.apache.catalina.startup.WebAnnotationSet.loadClassAnnotation(WebAnnotationSet.java:145)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationListenerAnnotations(WebAnnotationSet.java:73)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:56)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:297)
    at org.apache.catalina.startup.ContextConfig.start(ContextConfig.java:1078)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:261)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4612)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:618)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

这是我的 JAVA 版本-

```
C:\apache-tomcat-6.0.35\bin>java -version
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) 64-Bit Server VM (build 20.1-b02, mixed mode) 
```

谁能提供任何建议为什么会发生？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-12T00:03:32.190

您实际上已经使用 JDK 1.6 编译了您的代码，但使用 Java 5 运行它 - 只需确保 Java 6 运行时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-29T04:42:08.123

即使我面临同样的问题。问题是不适当的类版本，例如。用不同的jre编译。

解决方案：如果您使用的是 Eclipse 或 RAD，请根据您的要求设置更改编译器设置，并通过单击“配置项目特定设置”将相同的设置更改为项目配置。Windows->首选项->编译器->单击链接“配置项目特定设置”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-29T18:36:42.537

对我来说，解决方法是将 JAVA_Home 系统变量设置为正确的路径。

[![JAVA_Home 系统变量](../Images/ff439e49f1a2a10304a12542a306a6f7.png)](https://i.stack.imgur.com/cXqGL.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-02-13T12:06:13.647

这是一个编译器问题。确保所有模块都配置了 java 1.5 作为编译器。窗口--> 首选项--> Java--> 编译器。确保选择 1.5。

# memory-management - .NET 4.0 中的 GC 不影响任务管理器中的工作集

> ID：12850338
> 
> 赞同：1
> 
> 时间：2012-10-11T23:52:30.260
> 
> 标签：memory-management, .net-4.0, garbage-collection, taskmanager, clr4.0

好的，为了清楚起见，我知道任务管理器从来都不是监控程序内存消耗的好方法。现在我已经清除了空气...

我已经使用 SciTech 的 .Net 内存分析器有一段时间了，但几乎只在我们应用程序的 .Net 3.5 版本上使用。通常，我会运行一个操作，收集基线快照，再次运行该操作并收集比较快照并从那里攻击泄漏。一般来说，任务管理器会模仿记忆的上升和下降（在一定的准确度范围内和一定的时间段内）。

在我们的 .net 4.0 应用程序中，我们的测试部门在执行一组特定操作（我将其称为操作 A）时报告了内存。在分析器中，我会看到活动字节的相当大的变化（通常表示泄漏）。如果我立即收集另一个快照，则会回收内存（无论我等待收集初始比较快照多长时间）。我认为终结器可能会卡住，所以我手动注入了以下调用：

```
GC.Collect();
GC.WaitForPendingFinalizers();
GC.Collect(); 
```

当我这样做时，我看不到分析器中的初始泄漏，但我在任务管理器中的工作集仍然高得离谱（操作 A 涉及加载图像）。我认为这个问题可能是一个卡住的终结器（当分析器收集它的快照时，SciTech 能够做一些巫术魔法），但是在我使用 WinDbg 和 MDbg 所花费的所有时间里，我找不到任何暗示终结器卡住了。如果我只是让我的应用程序坐几个小时，工作集中的内存将永远不会减少。但是，如果我继续执行其他操作，内存将在随机点大幅下降。

**我的问题** 我知道 GC 在 CLR 4.0 中发生了很大变化，但它是否影响操作系统查看分配内存的方式？我的电脑有 12 GB RAM，所以当我运行我的应用程序并增加内存使用时，我仍然有 TONS 空闲，所以我假设它只是不关心减少它已经分配的内容（如任务管理器中所述)，即使内存已被“收集”。当我在具有 1GB RAM 的机器上运行相同的操作时，我从来没有遇到内存不足的异常，这表明我真的没有泄漏内存（这也是分析器所建议的）。

我关心任务管理器显示的唯一原因是因为我们的客户如何监控我们的内存使用情况。如果 GC 发生变化会影响到这一点，我只想向他们展示说明这是 Microsoft 的错，而不是我们的错的文档 :)

*在我的尽职调查中，我搜索了一堆其他 SO 线程来寻找答案，但我发现的只是关于分代清理的并发性和其他不相关但有用的事实的文章。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:00:16.673

您不能期望看到托管堆使用的变化会立即反映在进程内存中。CLR 本质上代表您的应用程序充当内存管理器，因此它根据需要分配和释放段。由于分配和释放段是一项昂贵的操作，CLR 试图对此进行优化。它通常不会立即释放空段，因为它可以用于提供新的托管分配。如果要监视托管内存使用情况，则应依赖 .NET 特定的计数器。

# vb.net - Entity Framework 5 Database First 的依赖注入。入门？

> ID：12850340
> 
> 赞同：4
> 
> 时间：2012-10-11T23:52:43.117
> 
> 标签：vb.net, entity-framework, dependency-injection, entity-framework-5, ef-database-first

我正在考虑使用 Entity Framework 5 和 Database First（连接到 SQL Server 2008 R2）创建一个 VB.NET 11 WPF MVVM 应用程序。

我选择了 Database First，因为我正在将现有解决方案迁移到 WPF MVVM，当然，其中的数据库已经存在。

我想开始使用依赖注入，这样我就可以尽可能多地对我的代码进行单元测试。

我似乎无法找到关于如何将依赖注入与 EF DB-First，尤其是 vb.net 一起使用的清晰简洁的演练。尽管我敢肯定，即使是 C# 示例也可以。

我真正想要的是一个简单的分步指南，解释如何设置解决方案，如何设置每个部分为依赖注入做好准备等，但这些似乎很难实现。

到目前为止，我已经创建了解决方案及其项目，如下所示；

*   **DBAccess** - 它只包含我的 .edmx 文件和一个能够将 ConnectionString 提供给构造函数的小模块。
*   **DBControl** - 这包含了我用来在我的 EDMX 和我的 ViewModel 之间提供一个层的各种类。具体来说，我在这里填充复杂类型（我使用设计器创建的）以通过 UI 显示“更友好”的数据，以及将这些“友好”复杂类型转换为映射实体以进行保存/更新。我的数据库中每个表都有一个类。每个都有两个*“FetchFriendlyRecords”*方法（一个接受过滤器）和一个“ *AddUpdateFriendlyRecord* ”方法。我为每个类创建了一个接口。每个类在其构造函数中接受一个 DbContext，我只是从 DBAccess 项目传递我的 DBContext。
*   **MainUI** - 这包含我的 MVVM 层，并引用 DBControl 项目中的每个类以提供 DataBinding 等。

我已经看到建议，与其花时间编写一个能够使用 EF 进行单元测试的复杂解决方案，不如创建一个填充了测试数据的牢固模拟数据库，并将代码指向模拟数据库，而不是住一个。但是，我更希望能够创建一个完全无需访问 SQL Server 即可运行的内存解决方案。

任何帮助都会很棒，包括告诉我这一切是否都错了！！

**更新：**

我采用了下面 Paul Kirby 提供的解决方案，并创建了我相信的“某种”存储库模式。

我创建了一个界面；

```
Public Interface IFriendlyRepository(Of T)
        ReadOnly Property FriendlyRecords As ObservableCollection(Of T)
        Function GetFilteredFriendlyRecords(predicates As List(of Func(Of T, Boolean))) As ObservableCollection(Of T)
        Function AddEditFriendlyRecord(ByVal RecordToSave As T) As EntityException
        Sub SaveData()
End Interface 
```

然后我逐个类地实现了这个接口；

```
Namespace Repositories
    Public Class clsCurrenciesRepository
        Implements Interfaces.IFriendlyRepository(Of CriticalPathDB.FriendlyCurrencies)

        Private _DBContext As CriticalPathEntities                          'The Data Context

        Public Sub New(ByVal Context As DbContext)   
            _DBContext = Context
        End Sub

        Public ReadOnly Property FriendlyRecords As ObservableCollection(Of FriendlyCurrencies) Implements Interfaces.IFriendlyRepository(Of CriticalPathDB.FriendlyCurrencies).FriendlyRecords
            Get
                ' We need to convert the results of a Linq to SQL stored procedure to a list,
                ' otherwise we get an error stating that the query cannot be enumerated twice!
                Dim Query = (From Currencies In _DBContext.Currencies.ToList
                             Group Join CreationUsers In _DBContext.Users.ToList
                             On Currencies.CreationUserCode Equals CreationUsers.User_Code Into JoinedCreationUsers = Group
                             From CreationUsers In JoinedCreationUsers.DefaultIfEmpty
                             Group Join UpdateUsers In _DBContext.Users.ToList
                             On Currencies.LastUpdateUserCode Equals UpdateUsers.User_Code Into JoinedUpdateUsers = Group
                             From UpdateUsers In JoinedUpdateUsers.DefaultIfEmpty
                             Where (Currencies.Deleted = False Or Currencies.Deleted Is Nothing)
                             Order By Currencies.NAME
                             Select New FriendlyCurrencies With {.Currency_Code = Currencies.Currency_Code,
                                                                .NAME = Currencies.NAME,
                                                                .Rate = Currencies.Rate,
                                                                .CreatedBy = If(Currencies.CreationUserCode Is Nothing, "", CreationUsers.First_Name & " " & CreationUsers.Last_Name),
                                                                .CreationDate = Currencies.CreationDate,
                                                                .CreationUserCode = Currencies.CreationUserCode,
                                                                .Deleted = Currencies.Deleted,
                                                                .LastUpdateDate = Currencies.LastUpdateDate,
                                                                .LastUpdatedBy = If(Currencies.LastUpdateUserCode Is Nothing, "", UpdateUsers.First_Name & " " & UpdateUsers.Last_Name),
                                                                .LastUpdateUserCode = Currencies.LastUpdateUserCode}).ToList

                Return New ObservableCollection(Of FriendlyCurrencies)(Query)
            End Get
        End Property

        Public Function GetFilteredFriendlyRecords(predicates As List(of Func(Of FriendlyCurrencies, Boolean))) As ObservableCollection(Of FriendlyCurrencies) Implements Interfaces.IFriendlyRepository(Of CriticalPathDB.FriendlyCurrencies).GetFilteredFriendlyRecords
            Dim ReturnQuery = FriendlyRecords.ToList

            For Each Predicate As Func(Of FriendlyCurrencies, Boolean) In predicates
                If Predicate IsNot Nothing Then
                    ReturnQuery = ReturnQuery.Where(Predicate).ToList
                End If
            Next
            Return New ObservableCollection(Of FriendlyCurrencies)(ReturnQuery)
        End Function

        Public Function AddEditFriendlyRecord(ByVal RecordToSave As FriendlyCurrencies) As EntityException Implements Interfaces.IFriendlyRepository(Of CriticalPathDB.FriendlyCurrencies).AddEditFriendlyRecord

            Dim dbCurrency As New Currency
            ' Check if this Staff Member Exists
            Dim query = From c In _DBContext.Currencies
                        Where c.Currency_Code = RecordToSave.Currency_Code
                        Select c

            ' If Asset exists, then edit.
            If query.Count > 0 Then
                dbCurrency = query.FirstOrDefault
            Else
                'Do Nothing
            End If

            dbCurrency.Currency_Code = RecordToSave.Currency_Code
            dbCurrency.NAME = RecordToSave.NAME
            dbCurrency.CreationDate = RecordToSave.CreationDate
            dbCurrency.CreationUserCode = RecordToSave.CreationUserCode
            dbCurrency.LastUpdateDate = RecordToSave.LastUpdateDate
            dbCurrency.LastUpdateUserCode = RecordToSave.LastUpdateUserCode
            dbCurrency.Deleted = RecordToSave.Deleted

            ' Save Asset Object to Database
            If query.Count > 0 Then
                ' If Asset exists, then edit.
                Try
                    '_dbContext.SaveChanges           'We could save here but it's generally bad practice
                Catch ex As EntityException
                    Return ex
                End Try
            Else
                Try
                    _DBContext.Currencies.Add(dbCurrency)
                    '_dbContext.SaveChanges           'We could save here but it's generally bad practice
                Catch ex As EntityException
                    Return ex
                End Try
            End If
            Return Nothing
        End Function

        Public Sub SaveData() Implements Interfaces.IFriendlyRepository(Of CriticalPathDB.FriendlyCurrencies).SaveData
            _DBContext.SaveChanges()
        End Sub
    End Class
End Namespace 
```

我使用构造函数注入将 dbContext 插入到类中。

我曾希望能够使用我现有的上下文和[“努力”单元测试工具](http://effort.codeplex.com/)来模拟一个假的 dbContext 。

但是，我似乎无法让它发挥作用。

在此期间，在我的单元测试项目中，我正在删除（如果它已经存在）并使用 SQLCMD 命令创建一个空的测试数据库，使用与我的实时数据库相同的模式。

然后我创建一个引用测试数据库的 dbContext，用测试数据填充它，并对此进行测试。

作为说明，我将重构我的“添加/编辑”方法以使用实际的基本实体，而不是我的“友好”复杂版本，这是当时最简单的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T18:04:00.987

如果您首先使用 DB，这就是我的建议。

1.  打开您的 .edmx 文件，右键单击任何空白区域并选择“添加代码生成项”
2.  在“在线模板”区域中，搜索“EF 5.x DbContext Generator for VB”。
3.  给 .tt 文件命名，点击添加。这将改变您的 .edmx 文件生成支持代码的方式，以便您的实体都是 POCO，从而通过使您的主要逻辑与 EF 断开连接来简化整体测试。

完成之后，您可能想要研究类似工作单元模式的东西。这是一个快速的代码示例，我将在后面解释。

```
public interface IUnitOfWork
{
    IDbSet<Location> Locations { get; }
    void Commit();
}

public class EFUnitOfWork : IUnitOfWork
{
    private readonly YourGeneratedDbContext _context;

    public EFUnitOfWork(string connectionString)
    {
        _context = new YourGeneratedDbContext();
    }

    public IDbSet<Location> Locations
    {
        get { return _context.Locations; }
    }

    public void Commit()
    {
        _context.SaveChanges();
    }
} 
```

这是一个基本的工作单元，它以一些位置列表为例（抱歉，它是在 C# 中，但我不太了解 VB）。

请注意，它公开了 IDbSet 对象——这就是神奇之处。如果在您的 DBAccess 项目中，您使用此工作单元或存储库模式来隐藏 EF，并且因为它实现了一个接口并返回 IDbSet 对象，任何地方需要您的数据时，可以将这个 IUnitOfWork 构造函数注入 DI，并在您需要进行单元测试时替换为返回模拟 IDbSet 对象（它们最终只是 IQueryables）的模拟版本。

您可能会发现，使用新模板中的 POCO 生成，您甚至可以取消您在 DBControl 项目中所做的许多工作。

无论如何，这只是定位项目以实现最佳单元测试和 DI 的一些基本内容。

# c++ - C++ 切片的潜在解决方法？

> ID：12850344
> 
> 赞同：1
> 
> 时间：2012-10-11T23:53:34.707
> 
> 标签：c++, subclass, object-slicing

我有一个 C++ 切片问题。我是 C++ 的新手，所以可能太笨了，无法意识到这无法完成....我尝试了各种解决方法，我目前的最佳方法如下所示。（我需要做这样的事情来避免在非常大的遗留代码库中更改大量接口。无论如何不要声称这是优雅的风格！！）

编译时遇到麻烦。这个想法合理吗？还是整个方法注定要失败？引用的构造函数似乎是问题所在。我已经阅读了 Stroustrup 的“C++ Programming Language”（或者至少我认为是相关部分），但它没有帮助。

```
class FOO {};

class FOOSUBCLASS : public FOO {
public:
    FOOSUBCLASS(const int id = 0) : _id(id) {}
private:
    int _id;
};

class BAR {
public:
    BAR(const FOO foo) : _foo(foo), _realFoo(&_foo) { }

BAR(const FOOSUBCLASS foosc) : _foosc(foosc), _realFoo(&_foosc) {} 
private:
    FOO _foo;
    FOOSUBCLASS _foosc;
    FOO& _realFoo;
}; 
```

编译器不喜欢我的`_realFoo(&_foo)`行。我希望对`_foo`, 的引用只是类中成员变量的引用。这在 C++ 中是不可能的吗？

这是来自 VS2005 的具体错误：

```
'initializing' : cannot convert from 'FOO *' to 'FOO &' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:57:22.873

`_foo`是一个`FOO&`。
`&_foo`是一个`FOO*`。
编译器`cannot convert from 'FOO *' to 'FOO &'`。
你想要的是`..., _realFoo(_foo)`

不相关：你可能真正想要的是一个`std::unique_ptr<FOO>`成员。这将更小，更不容易出错。

您现在拥有的结构包含 的完整且完整的实例`FOO`、 的完整且完整的实例`FOOSUBCLASS`和引用。至少把这两个东西放在一个联合体中，所以 的大小只比最大的导数大*一点*。那可能会使用与. 不幸的是，s 是 C 和 C++ 中常见的错误来源。`FOO``BAR``FOO``unique_ptr<FOO>``union`

另一个问题是，如果有人过来写

```
class FOOSOMETHINGELSE : public FOO {
   int buffer[1024];
}; 
```

然后你必须去找到这个`BAR`类，改变它，让它变得更大，然后重新编译你`BAR`在任何地方都使用的所有代码。然而，如果您使用 a `unique_ptr<FOO>`，那么您将不必更改`BAR`或重新编译任何内容。所以出错的机会更小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T00:26:27.893

这里有几个问题。您正确地将其中之一识别为切片，但切片不会导致编译时错误（这就是让它如此可怕的原因......）。Mooing Duck 的答案应该可以解决您遇到的编译问题，但切片问题仍然存在。假设你有

```
FOO *x = new FOOSUBCLASS;
BAR y(*x); 
```

这将导致切片，因为将调用以下构造函数：

```
BAR(const FOO foo) : _foo(foo), _realFoo(&_foo) { } 
```

它按值获取参数，这意味着将发生从派生到基的复制。

当您尝试将派生类类型的对象分配给基类对象时，就会发生切片，例如，通过将派生类传递给一个函数，该函数*按值*获取基类，就像您在此处所做的那样。基本上，派生类对象的任何数据成员都会默默地被“切掉”，因为根本没有任何空间可以将它们放入一块仅足以容纳基类对象的内存中。当您需要使用可能实际上是派生类的对象时，您*必须*使用引用我们的指针（或智能指针，如`shared_ptr`or `unique_ptr`）。

我很确定您在这里要做的就是让一个`BAR`对象引用一个对象，该对象要么是一个对象，要么是`FOO`从它派生的东西——对吗？在这种情况下（并假设对象的生命周期`FOO`超过了对象的生命周期`BAR`），您只需要：

```
class BAR {
public:
    explicit BAR(FOO& foo) : _foo(foo) {}

private:
    FOO& _foo;
}; 
```

# python - 如何组合两个数据框？

> ID：12850345
> 
> 赞同：169
> 
> 时间：2012-10-11T23:53:37.280
> 
> 标签：python, pandas

我正在使用熊猫数据框。我有一个初始数据框，比如说`D`。我像这样从中提取两个数据框：

```
A = D[D.label == k]
B = D[D.label != k] 
```

我想合并`A`，`B`所以我可以将它们作为一个 DataFrame，类似于联合操作。数据的顺序并不重要。但是，当我们从中采样时`A`，它们会保留从 中的索引。`B``D``D`

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2012-10-12T00:07:38.193

> **弃用通知**：`DataFrame.append`并[在 v1.4.0](https://pandas.pydata.org/pandas-docs/stable/whatsnew/v1.4.0.html#deprecated-dataframe-append-and-series-append)`Series.append`中弃用

我相信你可以使用该`append`方法

```
bigdata = data1.append(data2, ignore_index=True) 
```

保持他们的索引只是不使用`ignore_index`关键字......

* * *

## 回答 #2

> 赞同：133
> 
> 时间：2015-05-31T11:47:29.527

您也可以使用`pd.concat`，当您加入两个以上的数据框时，这特别有用：

```
bigdata = pd.concat([data1, data2], ignore_index=True, sort=False) 
```

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2016-09-22T08:38:50.830

想在这里添加它，以防有人发现它有用。@ostrokach 已经提到如何跨行合并数据框

```
df_row_merged = pd.concat([df_a, df_b], ignore_index=True) 
```

要跨列合并，可以使用以下语法：

```
df_col_merged = pd.concat([df_a, df_b], axis=1) 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2017-10-10T07:53:37.760

如果您正在处理大数据并且需要连接多个数据集，则多次调用`concat`可能会占用大量性能。

如果您不想每次都创建新的 df，则可以改为聚合更改并`concat`仅调用一次：

```
frames = [df_A, df_B]  # Or perform operations on the DFs
result = pd.concat(frames) 
```

这在本节底部[连接对象](http://pandas.pydata.org/pandas-docs/stable/merging.html#concatenating-objects)下的 pandas 文档中指出）：

> **注意**：然而值得注意的是，`concat`（因此`append`）制作了数据的完整副本，并且不断重用此函数可能会对性能产生重大影响。如果您需要对多个数据集使用该操作，请使用列表推导。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-01-09T22:45:33.323

如果您想`df1`用第二个数据帧的值更新/替换第一个数据帧的值`df2`。你可以按照以下步骤来做——</p>

**第 1 步：**设置第一个数据帧的索引（df1）

```
df1.set_index('id') 
```

**第 2 步：**设置第二个数据帧的索引（df2）

```
df2.set_index('id') 
```

最后使用以下代码片段更新数据框 —</p>

```
df1.update(df2) 
```

# java - 使用 O(log^2 N) 运行时间的算法？

> ID：12850346
> 
> 赞同：-3
> 
> 时间：2012-10-11T23:53:38.153
> 
> 标签：java, algorithm, big-o

我已经编辑了这个问题，希望这个问题可以重新打开。

首先，这是任务的一部分。

我被要求编写一个运行时间与 O(log² N) 成正比的方法。

log² N 不应该等于 log N²，因为在我的 log N² 作业中还有另一个类似的问题。

我已经搜索并查看了以前的问题，但找不到任何关于 log² N 的话题。

我对 log² N 的猜测是它是 log n 的嵌套 for 循环：

```
for(int i=0; i < n; i*=2){
  for(int j=0; j < n; j*=2){
   //some code here...
  }
} 
```

但是，它并不能真正证明一个好的答案是正确的，因为此代码也可以表示 log N²。

因此，我希望你们中的一些人能给我一些关于 log² N 的指导，或者可能是一个可能在 O(log² N) 中运行的算法示例

我希望这能让我的问题更清楚，从而允许重新打开这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T23:58:01.227

像这样的事情的复杂性为`O(n) = log^2(n)`：

```
for(int i = 1; i < n; i = i * 2)
{
    for(int j = 1; j < n; j = j * 2)
    {
        //Code
    }
} 
```

# python - Scapy 视图传输的 Html

> ID：12850348
> 
> 赞同：1
> 
> 时间：2012-10-11T23:54:15.133
> 
> 标签：python, scapy

我正在尝试使用 scapy 查看通过网络发送的原始 html。我遇到的问题是 tcp 数据包的有效负载没有打印为 ascii。

```
def sniffer_callback(packet):
    print "[*] Got a packet"
    if(validate_packet(packet)):
            resend_packet(packet)
    else:
            resend_packet(packet)
             print "------------------------------"

def validate_packet(packet):
# Validate whether the packet came from the right domain    
     print "[!] Validating Packet"
      tcp = packet[TCP]
      print  tcp.payload 
```

[*] 收到一个数据包

[!] 验证数据包

HTTP/1.1 200 正常

内容类型：application/json;charset=utf-8

缓存控制：max-age=5

内容编码：gzip

内容长度：121

接受范围：字节

日期：2012 年 10 月 11 日星期四 23:45:45 GMT

年龄：4

连接：保持活动

P3P: CP="CAO DSP COR CURa ADMa DEVa TAIa PSAa PSDa IVAi IVDi CONi OUR SAMo OTRo BUS PHY ONL UNI PUR COM NAV INT DEM CNT STA PRE"

m�= �0 ��� MSkxqP�A��I�n������F 归 3���/HE����jFn�Vm���xk��ZL��b��m�� ������"h��=�L,�2�Q����

这是我收到的数据包的一个示例，但我想知道如何查看整个数据包而不仅仅是 http 标头。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:59:17.293

您选择的数据包实际上是使用 gzip 压缩的。注意这个标题：

```
Content-Encoding: gzip 
```

您应该能够使用`gzip`模块解压缩它。指南可在以下位置获得：

[http://www.diveintopython.net/http_web_services/gzip_compression.html](http://www.diveintopython.net/http_web_services/gzip_compression.html)

# variables - AutoHotKey 可以被不同的宏访问和修改的全局变量？

> ID：12850350
> 
> 赞同：4
> 
> 时间：2012-10-11T23:54:48.047
> 
> 标签：variables, global-variables, autohotkey

我在 sof 上看到过类似的主题，但它的解决方案对我没有帮助。这让我心烦意乱，基本上我想要的只是有一些方法来访问和修改一个值，该值将通过我的单个 .ahk 文件中的宏保持其最后更改的状态。

请参见下面的示例，

```
~Home::Suspend

XButton1::

tog()

return

LButton::

shot()

return

var := "1"

tog(){
var *= -1
}

shot(){

If (var = "1") {

    Loop, 1 {

        Send {k}
        Sleep 65
        Send {WheelDown}
        Sleep 100
        Send {WheelUP}
        Sleep 10

    }

} Else {

    Send {k}

}

} 
```

我知道上面是不正确的，我试图在我的函数中使用“全局”，但我无法得到我想要的效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T00:41:37.473

使用“全局”应该可以。就像是：

```
shot(){
    global var
    If (var = "1") { 
```

这将 shot() 函数中的“var”变量指向函数外部定义的现有“var”变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-10T14:39:10.967

我遇到了同样的问题，经过反复试验，我发现我的错误与提供的代码相同：

声明全局的正确方法是在其他函数之前

```
var := "1"

XButton1::
     ; code...
return 
```

OPs 脚本中的代码将首先返回并且从不声明变量

```
XButton1::
   ; code...
return     ; Returns Here

var := "1" ; Incorrect Will Not Be Declared 
```

我只是想提供这个作为答案，因为虽然我确实在其中一个评论中看到了这些信息，但直到我自己又花了一个小时弄清楚之后才看到它。由于这是我需要的答案，因此将其作为实际突出的答案可能会帮助其他人节省时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T08:00:04.693

我所做的，特别是因为我有时运行多个脚本需要访问同一个变量，就是将 var 放在一个 .ini 文件中。我还使用它来在重新启动后保留变量值。由于数据保存到硬盘/SSD，该解决方案有点慢，但它工作得很好。

将值“S”写入“完成”组中的变量“状态”的示例

```
IniWrite, S, C:\2Podcasts\FinishOptions.ini, Finish, State 
```

在另一个脚本（其他 AutoHotKey 实例）中，我读取了该值并将其分配给变量“FinishOption”。

```
IniRead, FinishOption, C:\2Podcasts\FinishOptions.ini, Finish, State 
```

如果你想切换值（真/假），你可以使用它。这将对变量的当前值执行 IF 并将变量设置为相反的值。

```
If (MyLoop := !MyLoop) ; Toggle the variable "MyLoop" True/False
{
    Do something
}
Else
{
    Do something else
}
return 
```

# php - 试图让字段数据适合 inarray() 检查

> ID：12850351
> 
> 赞同：0
> 
> 时间：2012-10-11T23:55:08.097
> 
> 标签：php, sql-server, arrays

只是想知道是否有人可以帮助我解决这个问题...我希望能够检查某个 ID（例如用户是否已登录）这些用户的 ID 将从表中提取，然后输入数组然后检查它是否在那里。

但是，当我提取数据时，如果 inarray() 不再像我直接在代码中输入而不是提取数据那样工作。

我想提取已批准的 ID，以便他们可以访问某个链接！

任何帮助，将不胜感激！谢谢！

```
<?php
mssql_select_db("$ins", $con);

$result = mssql_query("SELECT ID FROM Event WHERE  EventPublic LIKE 'Yes' AND EventDate >=       GETDATE() -1   ORDER BY EventDate ASC    ");

while($row = mssql_fetch_array($result))
{

$test = "". $row['ID'] .",";

}

$tests = explode(',', $test);

if (in_array("2, 48", $tests)) {
   echo "WOO";
 }
 else
{
echo "BOO";
 }

mssql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:06:38.707

您的 in_array 测试存在问题，因为您正在比较数组和以下行中的字符串：

```
if (in_array("2, 48", $tests)) 
```

上面的行检查字符串“2, 48”是否存在于数组中。但是该数组将 2 作为一个元素，将 48 作为一个单独的元素。要解决此问题，您可以使用以下内容单独搜索每个元素：

```
if(in_array('2',$tests) || in_array('48',$tests)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:03:47.067

in array 应该是一个实际的数组

```
in_array(array('2', '48'), $tests) 
```

另外，最好把

```
$tests = array(); 
```

在while循环之前，然后将循环内的代码更改为读取

```
$tests[] = $row['ID']; 
```

那么你可以取消 '$tests = explode(...' 行。

# asp.net - 添加新 dll 时网站请求延迟

> ID：12850354
> 
> 赞同：1
> 
> 时间：2012-10-11T23:55:28.560
> 
> 标签：asp.net, vb.net, iis

每次我粘贴我的项目的新 dll 版本并请求我的网站时，请求返回页面大约需要 3 分钟。我该怎么办？我正在使用 asp.net 网络表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T23:59:37.137

是的，每次 bin 文件夹中发生更新时，应用程序都会重新启动，并且工作进程会再次编译页面。

# c++ - 自动更新 QDateTimeEdit 使其显示当前系统日期和时间

> ID：12850355
> 
> 赞同：1
> 
> 时间：2012-10-11T23:55:29.087
> 
> 标签：c++, qt, signals-slots

使用 Qt 库，有没有一种方法可以`QDateTimeEdit`使用信号自动更新 a，以便小部件以类似于时钟的方式显示当前日期和时间？

在下面的代码示例中，`dateTimeEditSystem`是`QDateTimeEdit`对象。但是，该`setDateTime()`功能只运行一次。我希望`QDateTimeEdit`对象动态更新。有没有不使用计时器（即使用信号和插槽）的可靠方法？或者计时器是这样做的唯一方法？

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    // setup the UI
    ui->setupUi(this);
    // set the current date and time
    ui->dateTimeEditSystem->setDateTime( QDateTime::currentDateTime() );
} 
```

我尝试使用计时器，但不幸的`QDateTimeEdit`是没有更新。这是完整的 mainwindow.cpp 代码。我在这里做错了什么？

```
#include <QTimer>

#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    ui->dateTimeEditSystem->setDateTime( QDateTime::currentDateTime() );

    QTimer *timer = new QTimer(this);
    connect(timer, SIGNAL(timeout()), this, SLOT( updateTime() ));
    timer->start(1000);
}

void MainWindow::updateTime()
{
    ui->dateTimeEditSystem->setDateTime( QDateTime::currentDateTime() );
}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

**更新：**

这实际上很容易做到。代码没有更新的原因是 mainwindow.h 文件中缺少插槽声明。这是 mainwindow.h 标头的完整内容。

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    Ui::MainWindow *ui;

 private slots:
     void updateTime();

};

#endif // MAINWINDOW_H 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:17:25.663

使用. `QDateTimeEdit`_ `QTimer`有关如何完成此操作，请参阅以下示例：

[http://qt-project.org/doc/qt-4.8/widgets-digitalclock.html](http://qt-project.org/doc/qt-4.8/widgets-digitalclock.html)

或者

[http://qt-project.org/doc/qt-4.8/widgets-shapeclock.html](http://qt-project.org/doc/qt-4.8/widgets-shapedclock.html)

请注意，a 的分辨率`QTimer`在不同的操作系统上有所不同，但对于需要一次大约 1 秒的更新，a`QTimer`在几乎所有平台上都应该没问题。有关分辨率的更多信息，请参阅以下内容`QTimer`：

[http://qt-project.org/doc/qt-4.8/QTimer.html#accuracy-and-timer-resolution](http://qt-project.org/doc/qt-4.8/QTimer.html#accuracy-and-timer-resolution)

# ckeditor - CKEditor config.stylesSet

> ID：12850357
> 
> 赞同：0
> 
> 时间：2012-10-11T23:55:43.980
> 
> 标签：ckeditor

我正在尝试配置 CKEditor V4 中的下拉样式选项。如下所示，我的测试没有按预期工作。下拉样式菜单本身确实显示“绿色检查”选项（样式中使用的标签和图像），但在使用时不应用于编辑器实例的内容。我正在使用新的内联编辑功能（它也很酷）。

```
config.stylesSet = [
   { name: 'Green Check', element : 'ul li',
    styles :
    {
        'background' : 'url(/images/bullets/greencheck.png) no-repeat top left;',
        'list-style-type' : 'none;'  
    }
}

]; 
```

我指定了*元素* 元素：'ul li'，因为'ul' 显然以 ul 元素为目标，但是当指定'li' 时，我在下拉菜单中什么也得不到或应用于内容。

这或多或少是我要配置的完整样式...

```
ul.greencheck li{
list-style-type:none;
line-height:18px;
background: url(/images/bullets/greencheck.png) no-repeat center left;
padding-left:30px;
} 
```

感激地收到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:30:29.090

`'ul li'`不是有效元素，您可以使用其中一个`'ul'`或 '`li'`但不能同时使用

您还应该删除样式中的结尾分号`'none;'`无效，`'none'`是正确的

与其设置内联样式，不如将一个类应用于 UL 并将样式留给单独的 css 文件。

# opengl-es - 2D几何轮廓着色器

> ID：12850360
> 
> 赞同：1
> 
> 时间：2012-10-11T23:56:19.510
> 
> 标签：opengl-es, 2d, opengl-es-2.0, glsl, outline

我想创建一个着色器来勾勒 2D 几何图形。我正在使用 OpenGL ES2.0。我不想使用卷积过滤器，因为轮廓不依赖于纹理，而且速度太慢（我尝试将纹理几何体渲染到另一个纹理，然后使用卷积着色器绘制它）。我也尝试过 2 次通过，第一次是单色超比例几何体来表示一个 oultine，然后在顶部进行正常绘图，但这会导致不同的厚度或未对齐的轮廓。我正在研究 cel-shading 中的剪影是如何完成的，但它们都是使用法线和灯光计算的，我根本不使用。

我将 Box2D 用于物理，并且具有带有多个固定装置的“可破坏”对象。在任何时候都可以分解对象（删除夹具），我希望轮廓跟随新的外部计数器。我正在使用与固定装置的顶点、预设纹理坐标和用于绘制三角形的索引相匹配的顶点缓冲区进行绘图。当一个夹具被移除时，它在索引缓冲区中的相关索引被设置为 0，因此不再在那里绘制三角形。下图显示了一个完整完整的对象的外观。红点是顶点位置（未显示纹理），黑线是固定装置，蓝线显示三角形绘制方式的分离。灰色轮廓是我希望轮廓在任何情况下看起来的样子。

![1](../Images/f8a9c8908d8216fe0fc99d42df40f562.png)

此图像显示了删除了一些固定装置的同一对象。

![2](../Images/ff87986593cf0c984085f7a0321f0fdb.png)

这可以在顶点着色器中（或与其他简单方法结合使用）吗？任何帮助，将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:51:55.027

假设你能够对那些从角落稍微插入的尴尬点做点什么（例如，如果你按照英语阅读顺序对点进行编号，第一个是“1”，第 6 点就是一个）......

如果一个点在内部，那么如果您按顺时针顺序列出与其相连的所有多边形边，则顺序中的每对边将有一个共同的多边形。如果任何两条边没有共同的多边形，那么它就是一个外部点。

从任何外部点开始，您可以通过首先向任何方向行走，然后沿着连接到您尚未访问的外部点的任何边缘（或者，这不是您刚刚走过的边缘）来获得整个轮廓现在）。

从现有轮廓开始并删除一些部分，您显然可以从曾经连接到另一个但不再连接的外部点开始，然后从那里步行直到到达另一个。

你不能在 ES 下的着色器中处理这些东西，因为你没有得到连接信息。

* * *

我认为你可以在着色器中做的最好的事情是通过沿表面法线向外推动顶点来扩展几何体。假设您的数据结构是一个矩形列表，每个矩形都由一个中心、一个宽度和一个高度来描述，您可以通过绘制每个具有相同中心但在宽度和高度上添加少量的矩形来实现相同的效果.

为了完全通用，您需要在顶点存储法线，但还需要在删除几何图形时更新它们。所以会有一些来自 CPU 的新信息推送，但相对有限。

# iphone - 从 XCode Run 开始的快速设备应用

> ID：12850361
> 
> 赞同：0
> 
> 时间：2012-10-11T23:56:18.503
> 
> 标签：iphone, xcode, ipad, xcode4.5

旧 XCode 和新 XCode 有 1 个问题：

如果应用程序的资源最大，从按下运行按钮到应用程序在设备上启动的时间很长。

当我们按下 Run 按钮时，XCode 执行以下步骤：

> 1）编译更改的类
> 
> 2) 构建应用程序
> 
> 3）将.app复制到具有所有资源的设备
> 
> 4) 沙盒
> 
> 5) 应用程序已运行

例子：

如果资源大小为 1 Gb，则应用程序在 1 分钟或更长时间后运行。

有人知道吗？如何减少应用程序启动的时间或每次禁用资源复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:56:18.503

我为此建立了一个解决方案，但也许很多人会反驳这种方法。

是的，这种方法不适用于所有项目，但我已经想对所有人说：

> 1) 在 XCode 中我们添加资源文件夹，因为 XCode 会检测到他并复制到设备；
> 
> 2）第一次我们必须运行所有资源将复制到设备。现在我们在 Mac 和 Device 中有一个资源文件夹；
> 
> 3）现在我只是将资源文件夹替换为另一个临时文件夹。并创建一个同名的空文件夹。现在 XCode 会看到一个文件夹，而不会告诉我们，缺少什么资源文件夹；
> 
> 4）更改一些代码并推送运行。太好了，资源复制的第 3 步进展最快！

如果资源文件夹中缺少任何文件，XCode 不会将他从设备中删除，您可以在这里找到很多关于此的问题。所以，如果你今天只在代码修改上工作，这个方法是可行的。

如果您想使用资源（添加、删除、修改），您只需将资源文件夹替换回去并开始工作 =)

# objective-c - 如何使用 IB 中的按钮添加 UITableViewCell

> ID：12850363
> 
> 赞同：0
> 
> 时间：2012-10-11T23:56:30.570
> 
> 标签：objective-c, button, uitableview, xcode4.5

所以我想做的是为我的应用程序创建一个记事本样式。我只想让它像苹果现有的记事本一样工作在 UITableView 中。

我已经有了 UITableView 和一切设置我只需要知道如何运行这个动作

-(IBAction)noteAdd:(id)sender{ }

然后，当您单击该按钮时，它会执行我上面描述的操作。

我该怎么做呢？我有点失落。

顺便说一句，这就是我将 TableView 添加到场景中的方式。

```
//tableview datasource delegate methods
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
return 1;
}
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
return cameraArray.count;
}
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath{
CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

if(cell == nil){
    cell = [[CustomCell alloc]initWithStyle:UITableViewCellStyleDefault     reuseIdentifier:@"Cell"];
}

NSEnumerator *enumerator = [cameraArray objectEnumerator];
id anObject;
NSString *cellName = nil;
while (anObject = [enumerator nextObject]) {
   cellName = anObject;
}
//static NSString *cellName = [cameraArray.objectAtIndex];
cell.textLabel.text = [NSString stringWithFormat:cellName];
return cell;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:21:08.517

在[`UITableView`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html)

```
- (void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation 
```

所以你会做类似的事情

```
-(IBAction) noteAdd:(id)sender
{
    NSIndexPath *newCellPath = [NSIndexPath indexPathForRow:cameraArray.count 
                                                  inSection:0];

    // I'm assuming cameraArray is declared mutable.
    [cameraArray addObject:@"New item"];

    [self.tableView insertRowsAtIndexPaths:@[newCellPath]
                          withRowAnimation:UITableViewRowAnimationFade];
} 
```

当我在这里时，对您的代码有一些评论：

我很确定这段代码：

```
NSEnumerator *enumerator = [cameraArray objectEnumerator];
id anObject;
NSString *cellName = nil;
while (anObject = [enumerator nextObject]) {
   cellName = anObject;
} 
```

是获取数组中最后一个字符串的一种相当迂回的方法。您可以使用`cameraArray.lastObject`. 但我认为这也不是你想要的，我认为你正在寻找

```
// XCode >= 4.5:
cellName = cameraArray[indexPath.row];

// XCode < 4.5:
cellName = [cameraArray objectAtIndex:indexPath.row]; 
```

下一行：

```
cell.textLabel.text = [NSString stringWithFormat:cellName]; 
```

最好的情况是，这会创建一个无关的字符串。如果单元格名称中恰好有一个`%`，你几乎肯定会得到一个错误或一个`EXC_BAD_ACCESS`. 要修复该错误，您可以使用

```
cell.textLabel.text = [NSString stringWithFormat:@"%@", cellName]; 
```

但真的没有理由这样做。只需直接分配字符串：

```
cell.textLabel.text = cellName; 
```

或者，如果您坚持要一份副本：

```
cell.textLabel.text = [NSString stringWithString:cellName];
// OR
cell.textLabel.text = [[cellName copy] autorelease];
// OR 
```

# iphone - 如果我的应用程序依赖于调用 Web 服务，我是否需要设置 wifi UIRequiredDeviceCapabilities 键？

> ID：12850364
> 
> 赞同：3
> 
> 时间：2012-10-11T23:56:36.110
> 
> 标签：iphone, ios, wifi, info-plist

文档说：

> “如果您的应用需要（或明确禁止）访问设备的网络功能，请包含此密钥。”

它在可用时使用 WiFi，但也使用 3G/移动数据。

恐怕如果我指定此密钥，它实际上意味着该应用程序在没有 WiFi 连接的情况下无法运行。这是错误的。它只需要互联网访问。

# c# - 多个网格视图之间的冲突

> ID：12850366
> 
> 赞同：0
> 
> 时间：2012-10-11T23:56:40.460
> 
> 标签：c#, asp.net, gridview, insert

我在一页上有多个网格视图。对于每个gridview，有两种方法可以插入一条新记录。一种是在gridview 有数据时通过TemplateField 的FooterTemplate，另一种是在gridview 为空时通过EmptyDataTemplate。

就其本身而言，插入物工作良好。但是，如果另一个 gridview 为空，则默认情况下，将显示其 EmptyDataTemplate 中的插入部分。显示此内容时，我无法显示另一个 gridview 的 FooterTemplate。在我通过强制插入摆脱 EmptyDataTemplate 之前，该部分是不可访问的。

```
<asp:Button ID="btnAddNewDomSoilType" runat="server" Text="Add new record"  CssClass="btnNewRecord" OnClick="addNewDomSoilType" />              
<asp:GridView ID="gvDomSoilType" runat="server" AllowPaging="True" 
AutoGenerateColumns="False" DataSourceID="dsDomSoilType" CssClass="data" 
AllowSorting="True" onrowcommand="gvDomSoilType_RowCommand" DataKeyNames="HabitatObsSubstrateID, HabitatObservationID, SubstrateID" >
    <Columns>                        
    <asp:TemplateField ShowHeader="False">                            
        <ItemTemplate>
            <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                CommandName="Delete" Text="Delete" 
                OnClientClick="return confirm('Are you sure?');"
                AlternateText="Delete" ForeColor="Blue"></asp:LinkButton>
        </ItemTemplate>
        <FooterTemplate>
            <asp:Button ID="btnInsertSubmit" runat="server" Text="Submit" CommandName="SubmitInsert" CssClass="btnInsertSEID" />
            <asp:Button ID="btnInsertCancel" runat="server" Text="Cancel" CommandName="CancelInsert" CssClass="btnInsertSEID" CausesValidation="false" />
        </FooterTemplate>
    </asp:TemplateField>                        
    <asp:TemplateField HeaderText="Substrate" SortExpression="Substrate">
        <FooterTemplate>
            <asp:DropDownList ID="ddlSoilType" runat="server" 
                DataSourceID="dsDomSoilType_Insert" DataTextField="Description" 
                DataValueField="Value" AppendDataBoundItems="true">
                <asp:ListItem Text="" Value="" Selected="True"></asp:ListItem>
            </asp:DropDownList>                          
        </FooterTemplate>
        <ItemTemplate>
            <asp:Label ID="Label1" runat="server" Text='<%# Bind("Substrate") %>'></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>
    </Columns>
    <EmptyDataTemplate>
    <asp:Label ID="Label4" runat="server" Text="Substrate: " CssClass="insertLabel"></asp:Label> 
    <asp:DropDownList ID="ddlSoilType2" runat="server" 
        DataSourceID="dsDomSoilType_Insert" DataTextField="Description" 
        DataValueField="Value" AppendDataBoundItems="true">
        <asp:ListItem Text="" Value="" Selected="True"></asp:ListItem>
    </asp:DropDownList>
    <asp:Button ID="btnInsertEmpty" runat="Server" Text="Insert" CommandName="EmptyInsert" UseSubmitBehavior="False" />
</EmptyDataTemplate>
</asp:GridView>    

<asp:Button ID="btnAddNewVegCover" runat="server" Text="Add new record"  CssClass="btnNewRecord" OnClick="addNewVegCover" />
<asp:GridView ID="gvVegCover" runat="server" AllowPaging="True" 
AutoGenerateColumns="False" DataSourceID="dsVegCover" CssClass="data" 
AllowSorting="True" onrowcommand="gvVegCover_RowCommand" DataKeyNames="HabitatObsVegID">
    <Columns>
    <asp:TemplateField ShowHeader="False">                           
        <ItemTemplate>
            <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                CommandName="Delete" Text="Delete" 
                OnClientClick="return confirm('Are you sure?');"
                AlternateText="Delete" ForeColor="Blue"></asp:LinkButton>
        </ItemTemplate>
        <FooterTemplate>
            <asp:Button ID="btnInsertSubmit" runat="server" Text="Submit" CommandName="SubmitInsert" CssClass="btnInsertSEID" />
            <asp:Button ID="btnInsertCancel" runat="server" Text="Cancel" CommandName="CancelInsert" CssClass="btnInsertSEID" CausesValidation="false" />
        </FooterTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="HabitatVegetationType" SortExpression="HabitatVegetationType">                            
        <FooterTemplate>
            <asp:DropDownList ID="ddlVegType" runat="server" 
                DataSourceID="dsVegType_Insert" DataTextField="Description" 
                DataValueField="Value" AppendDataBoundItems="true">
                <asp:ListItem Text="" Value="" Selected="True"></asp:ListItem>
            </asp:DropDownList>                                 
        </FooterTemplate>
        <ItemTemplate>
            <asp:Label ID="lblVegType" runat="server" Text='<%# Bind("HabitatVegetationType") %>'></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="VegetationTypePercent" SortExpression="VegetationTypePercent">                            
        <FooterTemplate>                                    
            <asp:TextBox ID="txtVegTypePercent" runat="server"></asp:TextBox>               
        </FooterTemplate>
        <ItemTemplate>
            <asp:Label ID="lblVegTypePercentage" runat="server" Text='<%# Bind("VegetationTypePercent") %>'></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>                                                     
    </Columns>
    <EmptyDataTemplate>
    <asp:Label ID="Label2" runat="server" Text="Vegetation Type:" CssClass="insertLabel"></asp:Label>  
    <asp:DropDownList ID="ddlVegType2" runat="server" 
        DataSourceID="dsVegType_Insert" DataTextField="Description" 
        DataValueField="Value" AppendDataBoundItems="true">
        <asp:ListItem Text="" Value="" Selected="True"></asp:ListItem>
    </asp:DropDownList>
    <asp:Label ID="Label5" runat="server" Text="Percenttage:" CssClass="insertLabel"></asp:Label>
    <asp:TextBox ID="txtVegTypePercent2" runat="server"></asp:TextBox>      
    <asp:Button ID="btnInsertEmpty" runat="Server" Text="Insert" CommandName="EmptyInsert" UseSubmitBehavior="False" />
    </EmptyDataTemplate>        
</asp:GridView> 
```

后面的代码：

```
 protected void addNewDomSoilType(object sender, EventArgs e)
    {
        gvDomSoilType.ShowFooter = true;
    }

    protected void addNewVegCover(object sender, EventArgs e)
    {
        gvVegCover.ShowFooter = true;
    } 
```

我知道我的解释有点混乱。让我知道什么没有意义，我会尽力澄清。感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:01:37.020

这两个网格视图不应相互影响。我认为可能是 PostBack 搞砸了网页的状态。在 PageLoad 上执行 Page.IsPostBack false 然后填充数据。确保事件连接到正确的 GridView。

# magento - 修改特定页面或扩展的 Magento 布局而不影响其他页面

> ID：12850368
> 
> 赞同：0
> 
> 时间：2012-10-11T23:56:49.337
> 
> 标签：magento, magento-1.7

Magento 的新手在这里寻求建议，以确保我修改正确的文件以限制更改范围并且在更新时不会遇到任何问题。我为常见问题解答功能安装了以下扩展：

[http://www.magentocommerce.com/magento-connect/flagbit-faq.html](http://www.magentocommerce.com/magento-connect/flagbit-faq.html)

默认情况下，前端常见问题页面显示为 2 列（1 个左侧边栏显示产品比较块，这在常见问题页面上是不必要的）。我找到了以下文件：

```
/app/design/frontend/base/default/layout/faq.xml 
```

并改变：

```
<default>
<reference name="root">
<action method="setTemplate"><template>page/page/2columns-left.phtml</template></action>
</reference>
</default> 
```

到：

```
<default>
<reference name="root">
<action method="setTemplate"><template>page/1column.phtml</template></action>
</reference>
</default> 
```

这在常见问题解答页面上产生了预期的结果，但也产生了从实际产品列表页面中删除比较框的不良结果。在不影响其他页面的情况下，如何最好地对 FAQ 页面布局进行所需的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:43:45.780

他们模块的 faq.xml 不应该在默认节点上设置它。

检查页面并在 body 上查找类。它可能类似于 cms-faq （应该说一些关于 faq 的内容）。将破折号 - 转换为下划线 _ 并使用该值代替 faq.xml 中的默认值

```
<cms_faq>
    <reference name="root">
    ....
</cms_faq> 
```

这应该确保对 setTemplate 操作的更改仅影响该页面。

通过在此处设置默认值，它们针对所有布局句柄，这实际上不是它们在仅创建新页面的模块中应该做的事情。

# javascript - 使用 NVD3 分组和堆叠的 multiBarChart

> ID：12850376
> 
> 赞同：7
> 
> 时间：2012-10-11T23:58:08.783
> 
> 标签：javascript, charts, nvd3.js

[Javascript中条形图的](https://stackoverflow.com/questions/5043236/bar-chart-in-javascript-stacked-bars-grouped-bars)可能重复问题：堆积条形图+分组条形图

我正在尝试创建一个堆积条形图，让您将 2 个值（深蓝色和中蓝色）与上周的数据点（第二个浅蓝色“后面”）进行比较。

![分组和堆叠的 multiBarChart](../Images/dbc75e3df0dc87518b1a34de48b8c02c.png)

1.  从第一个开始`multiBarChart()`，`.stacked(true)`我尝试将两个星期合并成一个包含 14 个条的数组，其中的`x`位置可以帮助对条进行分组。我试图形成我的对象组合数组，其中`.x`属性的值为`0`, `0.3`, `1`, `1.3`, `2`,`2.3`等。 ![在此处输入图像描述](../Images/1e0cafa10a877aa55a904f0df1eff46e.png) 不幸的是`lineChart()`，它不使用该`x`值进行定位。

2.  另一个想法是利用 group `.stacked(false)`，提供具有相同`x`值的 4 个项目（而不是 2 个）。然后这些看起来是相互重叠的，而不是堆叠的。 ![在此处输入图像描述](../Images/9ba13ee3935062327faa3ecfdceddfcb.png) 这里的间距看起来不错，但是我如何将这些 2 x 2 堆叠起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:27:33.013

嘿，我刚刚在 d3.js 上开发了分组+堆叠条形图。它不是 NVD3，但它可以帮助你。

*   [资源](https://github.com/gencay/stackedGroupedChart)

*   [演示](http://bl.ocks.org/4629518)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:42:49.057

让我先说一下，我不是 nvd3 专家。我自己也刚过了入门阶段。

也就是说，看起来你对自己太苛刻了。

我想你真的想发送 nvd3 两组数据，x 在两者之间匹配。（例如，(1,y1a) 对应于 (1,y2a)，然后 (2,y2a) 对应于 (2,y2b) 等）

您可以通过以下方式更清楚地看到这一点：

1.  前往他们的[实时代码页面](http://nvd3.org/livecode/ "实时代码页面")
2.  选择组/堆叠条形图。
3.  选择数据 (JSON) 选项卡。
4.  将第一个函数替换为以下内容，并观察生成的 x 值：

```
 function() {
      return stream_layers(2,10,.1).map(function(data, i) {
        alert( 'Stream '+i+': '+JSON.stringify(data));
        return {
          key: 'Stream' + i,
          values: data
        };
      });
    } 
```

据我了解，最好的就是您要寻找的模型。

# compression - 尝试生成唯一可解码的代码并对其进行解码

> ID：12850377
> 
> 赞同：0
> 
> 时间：2012-10-11T23:58:19.317
> 
> 标签：compression, huffman-code, entropy

我正在尝试将任意符号编码为位串，但我真的不明白如何生成它们甚至解码包含这些符号的位串。

我想处理任意符号进行压缩，我真的不知道我正在寻找一个唯一可解码的代码，也许是算术代码或规范的霍夫曼代码？

对于任何大小的符号表，我只需要一个位串列表，描述最频繁到最不频繁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:22:18.117

1.  **编码**：

    1.  为每个符号生成频率表
    2.  根据这个频率表生成概率树
    3.  生成代码表 - 使最常见的符号获得最小的位串
    4.  输出：[频率表+位串序列（首尾相连）]

        需要注意的重要一点是，这些位串的序列稍后可以由它们自己直接分离。即说 [10010001] => {100, 1000, 1} （仅作为示例）

2.  **解码**：

    1.  获取频率表和位串序列。
    2.  生成概率树（同 1.2）
    3.  生成代码表（同1.3）
    4.  重新创建数据：

        1.  解析位串
        2.  与代码表匹配
        3.  输出匹配符号

# javascript - 定时事件永远循环

> ID：12850378
> 
> 赞同：-1
> 
> 时间：2012-10-11T23:58:20.163
> 
> 标签：javascript, events, timed

我有在页面加载时执行的代码：

```
<script type="text/javascript">
function timedEvent1()
{
  setTimeout("ShowObjectWithEffect('wb_TextArt2', 1, 'dropup', 500)",0);
  setTimeout("ShowObjectWithEffect('wb_TextArt2', 0, 'dropdown', 500)",3000);
  setTimeout("ShowObjectWithEffect('wb_TextArt3', 1, 'dropup', 500)",3000);
  setTimeout("ShowObjectWithEffect('wb_TextArt3', 0, 'dropdown', 500)",6000);
  setTimeout("ShowObjectWithEffect('wb_TextArt4', 1, 'dropup', 500)",6000);
  setTimeout("ShowObjectWithEffect('wb_TextArt4', 0, 'dropdown', 500)",9000);
  setTimeout("ShowObjectWithEffect('wb_TextArt5', 1, 'dropup', 500)",9000);
  setTimeout("ShowObjectWithEffect('wb_TextArt5', 0, 'dropdown', 500)",12000);
  setTimeout("ShowObjectWithEffect('wb_TextArt6', 1, 'dropup', 500)",12000);
  setTimeout("ShowObjectWithEffect('wb_TextArt6', 0, 'dropdown', 500)",15000);
}
</script> 
```

我怎样才能永远循环这组事件？我阅读了有关“setInterval”函数的信息，但似乎无法在上面的代码中正确实现它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:01:23.647

把你想做的任何事情放在一个函数中，然后用 setInterval 调用这个函数：

```
$(document).ready (
    timing = setInterval ( yourFunction , 900 ) ;
) ; 
```

哦，要使用该 jquery 功能，请确保您在文档中加载 jquery

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:02:07.017

你试过这个吗？

```
function timedEvent1() {
    setTimeout("ShowObjectWithEffect('wb_TextArt2', 1, 'dropup', 500)", 0);
    setTimeout("ShowObjectWithEffect('wb_TextArt2', 0, 'dropdown', 500)", 3000);
    setTimeout("ShowObjectWithEffect('wb_TextArt3', 1, 'dropup', 500)", 3000);
    setTimeout("ShowObjectWithEffect('wb_TextArt3', 0, 'dropdown', 500)", 6000);
    setTimeout("ShowObjectWithEffect('wb_TextArt4', 1, 'dropup', 500)", 6000);
    setTimeout("ShowObjectWithEffect('wb_TextArt4', 0, 'dropdown', 500)", 9000);
    setTimeout("ShowObjectWithEffect('wb_TextArt5', 1, 'dropup', 500)", 9000);
    setTimeout("ShowObjectWithEffect('wb_TextArt5', 0, 'dropdown', 500)", 12000);
    setTimeout("ShowObjectWithEffect('wb_TextArt6', 1, 'dropup', 500)", 12000);
    setTimeout("ShowObjectWithEffect('wb_TextArt6', 0, 'dropdown', 500)", 15000);
    setTimeout(timedEvent1, 18000);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T00:03:15.847

假设“ShowObjectWithEffect”函数的第三个参数是以毫秒为单位的动画时间，您可以每 15500 秒调用一次 timeEvent1。

```
setInterval(function(){ timedEvent1(); }, 15500); 
```

# java - Junit 保护方法

> ID：12850382
> 
> 赞同：9
> 
> 时间：2012-10-11T23:58:39.720
> 
> 标签：java, junit, junit4, junit3

我想知道在 Junit 中处理受保护方法的好方法。

假设我想测试一个名为 A 的类，它有一个受保护的成员和构造函数。我知道为了测试类 AI 应该编写另一个名为 ATest 的类，它可能扩展 TestCase （这在 Junit3 中应该是强制性的）。因为我想测试一个受保护的方法并且因为 A 有一个受保护的构造函数，所以我的测试类 ATest 还应该扩展实现该方法的类 A，以便能够创建该类并访问该方法。

可能是两个类的双重继承一个不错的解决方案？

PS 我已经知道在 Junit 4 中可以避免从 TestCase 继承。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-12T00:12:41.997

要访问`A`的受保护成员，您只需将`A`和`ATest`放在同一个包中即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T00:00:20.067

Java 不允许实现的多重继承。您可以实现多个接口。

我更喜欢使用反射来获取我不想让客户知道的测试方法。也适用于私有方法。

# c# - 我可以使用 C# WebBrowser 控件获取 Javascript 加载的 HTML 吗？

> ID：12850384
> 
> 赞同：1
> 
> 时间：2012-10-11T23:58:42.500
> 
> 标签：c#, html

我有一个网站，内容通过 javascript 加载，当您向下滚动或在底部创建 javascript 按钮时触发。

我已经尝试了scrolltoview并将其设置为false，然后获取documenttext但仍然没有运气。

关于如何解决这个问题的任何想法？

# r - 按因子选择数据框中的第 n 个元素

> ID：12850386
> 
> 赞同：2
> 
> 时间：2012-10-11T23:58:54.547
> 
> 标签：r

我有一个带有 text 列`name`和 factor的数据框`city`。它按字母顺序首先 by`city`然后`name`。现在我需要获取一个数据框，其中每个中仅包含第 n 个元素`city`，并保持此顺序。如何在没有循环的情况下以漂亮的方式完成？

我有：

```
name    city
John    Atlanta
Josh    Atlanta
Matt    Atlanta
Bob     Boston
Kate    Boston
Lily    Boston
Matt    Boston 
```

我想要一个函数，它返回第 n 个元素`city`，即，如果它是第 3 个，那么：

```
name    city
Matt    Atlanta
Lily    Boston 
```

如果超出选定的范围`NULL`，即第 4 次，它应该返回：`name``city`

```
name    city
NULL    Atlanta
Matt    Boston 
```

请问只使用base R吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T00:12:12.437

在基础 R 中使用`by`：

设置一些测试数据，包括一个额外的超出范围的值：

```
test <- read.table(text="name    city
John    Atlanta
Josh    Atlanta
Matt    Atlanta
Bob     Boston
Kate    Boston
Lily    Boston
Matt    Boston
Bob     Seattle
Kate    Seattle",header=TRUE) 
```

获得每个城市的第 3 项：

```
do.call(rbind,by(test,test$city,function(x) x[3,])) 
```

结果：

```
 name    city
Atlanta Matt Atlanta
Boston  Lily  Boston
Seattle <NA>    <NA> 
```

为了得到你想要的，这里有一个小功能：

```
nthrow <- function(dset,splitvar,n) {
    result <- do.call(rbind,by(dset,dset[splitvar],function(x) x[n,]))
    result[,splitvar][is.na(result[,splitvar])] <- row.names(result)[is.na(result[,splitvar])]
    row.names(result) <- NULL
    return(result)
} 
```

像这样称呼它：

```
nthrow(test,"city",3) 
```

结果：

```
 name    city
1 Matt Atlanta
2 Lily  Boston
3 <NA> Seattle 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T04:57:20.943

一个`data.table`解决方案

```
library(data.table)
DT <- data.table(test)

# return all columns from the subset data.table
n <- 4
DT[,.SD[n,] ,by = city]
##      city name
## 1: Atlanta   NA
## 2:  Boston Matt
## 3: Seattle   NA

# if you just want the nth element of `name` 
# (excluding other columns that might be there)
# any of the following would work

DT[,.SD[n,] ,by = city, .SDcols = 'name']

DT[, .SD[n, list(name)], by = city]

DT[, list(name = name[n]), by = city] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T00:08:28.400

您可以`plyr`为此使用：

```
dat <- structure(list(name = c("John", "Josh", "Matt", "Bob", "Kate", 
```

“百合”，“马特”），城市= c（“亚特兰大”，“亚特兰大”，“亚特兰大”，“波士顿”，“波士顿”，“波士顿”，“波士顿”）），.Names = c（“名称", "city"), class = "data.frame", row.names = c(NA, -7L))

```
library(plyr)

ddply(dat, .(city), function(x, n) x[n,], n=3)

> ddply(dat, .(city), function(x, n) x[n,], n=3)
  name    city
1 Matt Atlanta
2 Lily  Boston
> ddply(dat, .(city), function(x, n) x[n,], n=4)
  name   city
1 <NA>   <NA>
2 Matt Boston
> 
```

`data.table`使用base R or or `sqldf`...还有很多其他选项

# html - 页面渲染后的固定正文宽度 - 不同大小的 div

> ID：12850387
> 
> 赞同：0
> 
> 时间：2012-10-11T23:59:09.867
> 
> 标签：html, css

我有一个渲染的页面，它有多个 div，所有的宽度都不同（取决于内容）。这些 div 可以切换 - 这意味着我可以在页面渲染后显示一个 div 并隐藏其他 div。举个例子，我可能有 4 个 div，其中 x'es 决定了 div 的宽度：

```
xxxxxxx
xxx
xxxxx
x 
```

页面呈现，body 是 xxxxxxx 的宽度。当我切换 div 时，主体宽度将采用显示的 div 的宽度。

我很好奇 - 即使我切换 div，是否可以将主体的大小固定为始终为 xxxxxxx 的大小？所以即使显示div xxx，大小也是xxxxxxx的宽度。这可以用 jQuery 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T00:01:14.103

可以用 jQuery 轻松完成

```
$(document).ready(function(){
   $('body').width($('#div_xxxxx').width());
}); 
```

# ios - 一个控制器中的多个 UICollectionView

> ID：12850396
> 
> 赞同：7
> 
> 时间：2012-10-12T00:00:13.767
> 
> 标签：ios, uicollectionview

我有一个使用两个 UICollectionViews 设置的视图。这些视图中的每一个都有一个以不同大小支持它的数组。collection1 由 array1 支持，而 collection2 由 array2 支持。问题是，从 numberOfItemsInSection 为 collection1 返回的任何数字都应用于两个集合视图。

例如，如果 array1 的大小为 4，而 array2 的大小为 5，则两个集合都将显示 4 个元素。如果array1 的大小为5，array2 的大小为4，当我一直滚动collection2 时，它会调用cellForItemAtIndexPath，collection2 的itemIndex 为5，我得到一个NSRangeException。

如何让每个 collectionView 使用它自己的大小？

```
- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section;
{
    if(view == self.colleciton1){
        return self.array1.count;
    } else if (view == self.collection2){
        return self.array2.count;
    }

    return 0;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath;
{
    if(cv == self.collection1){
        CharacterCell *cell = [cv dequeueReusableCellWithReuseIdentifier:FIRST_CELL_IDENTIFIER forIndexPath:indexPath];
        cell.label.text = self.array1[indexPath.item];
        return cell;
    } else if (cv == self.collection2){
        EpisodeCell *cell = [cv dequeueReusableCellWithReuseIdentifier:SECOND_CELL_IDENTIFIER forIndexPath:indexPath];
        cell.label.text = self.array2[indexPath.item];
        return cell;
    }

    return nil;
} 
```

我在一个项目中包含了一个 git repo 来说明这个问题。

git@github.com:civatrix/MultipleCollectionViews.git

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-12T15:05:08.533

问题是我为每个集合使用了相同的布局对象。回想起来这是有道理的，但是您必须确保为每个 collectionView 创建不同的布局。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T21:53:20.540

使用 ContainerViews 并为每个 UICollectionView 有两个单独的 UICollectionView 控制器可能会更容易

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T01:07:23.563

你所拥有的应该工作。self.colleciton1 和 self.collection2 是 IBOutlets 吗？如果是这样，您能否再次检查它们是否正确连接？

# file-format - iNES 格式的 ROM 库大小是多少？

> ID：12850398
> 
> 赞同：3
> 
> 时间：2012-10-12T00:00:24.857
> 
> 标签：file-format, nintendo

根据[iNES 文档](http://fms.komkon.org/EMUL8/NES.html#LABM)，ROM 库为 16kB。

每个 ROM bank 是 16000 字节 (16 kB) 还是 16384 字节 (16 KiB)？我在文档中的任何地方都找不到这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T00:27:43.730

16384B - 存储库是可单独寻址的 ROM 芯片，这意味着它们需要填充其相关列选择线的完整地址空间。

底线 - 数字硬件总是使用 2^x，至少直到 1990 年代marketoids 决定增加驱动器尺寸。

# c# - 如何在 DataGridView 中显示从 pulgin 架构（加载的程序集）添加的数据和列

> ID：12850399
> 
> 赞同：1
> 
> 时间：2012-10-12T00:00:25.523
> 
> 标签：c#, plugins

我有一个在 DataGridView 中显示数据的程序，并且还有一个插件架构。我希望插件添加额外的数据列，并根据主键填充这些列。为简单起见，假设这个键是一个字符串。

我想不出也想不出办法让多个插件将多列数据添加到我的程序的默认数据集中，目前我已将其存储在 BindingList 中。我曾尝试使用 Linq 加入通用列表，但我遇到了一个问题，即这不够动态，无法处理添加多行的多个插件。

如果我使用 SQL，它会像执行许多 Join 语句一样简单，但是任何外部数据库服务都不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:03:55.257

您必须在后面的 C# 代码中执行此操作。在DataTable中添加一列，在后面的代码中给GridView添加一列，然后在后面的代码中再次将datatable绑定到Gridview。您需要具有额外列的统一数据表，并在 gridview 中执行相同的操作并将两者绑定。这需要更多的 C# 代码，并确保新的列数据与现有的行数据匹配，等等。

# javascript - Facebook FB.Event.subscribe 不起作用

> ID：12850405
> 
> 赞同：4
> 
> 时间：2012-10-12T00:01:14.667
> 
> 标签：javascript, facebook, button, event-handling, facebook-like

我想了解我在我的页面上获得了多少赞，但是出了点问题。我正在使用 Facebook javascript 事件处理程序，但它不起作用。

当我点击喜欢或不喜欢按钮时，它应该会提醒我，但它什么也没做。知道我哪里错了吗？谢谢！对不起我的英语。

这是我的更新代码：

```
<!DOCTYPE html>
<html xmlns:fb="http://ogp.me/ns/fb#">
<head>
<title>FBlike check</title>
</head>
<body>
<div id="fb-root"></div>
<script>
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=00000000000000000";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk')); 

FB.Event.subscribe('edge.create',
    function(response) {
        alert('You liked the URL: ' + response);
    }
);
</script>
<fb:like href="https://www.facebook.com/XYZ" send="false" layout="button_count" width="200" show_faces="false"></fb:like>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T09:34:07.470

好吧..我尝试了很多版本，而不是这个版本完美：

```
<script>  
window.fbAsyncInit = function () {
            FB.init({
                appId: 'MY_APP_ID', 
                status: false,
                cookie: false, 
                xfbml: true
            });

            //Additional
            FB.Event.subscribe('edge.create',
                        function (response) {
                            alert('LIKED: ' + response);
                        }
                 );
        };

        // Asynchronously
        (function (d) {
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            ref.parentNode.insertBefore(js, ref);
        } (document));

    </script>
    <fb:like href="https://www.facebook.com/MY_FB_PAGE" send="false" layout="button_count" width="200" show_faces="false"></fb:like> 
```

我希望它可以对其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T00:04:24.157

您正在使用 iframe 版本的like 按钮 - javascript 事件仅从 XFBML 版本触发 - 这在[Like Button 文档中进行了解释](https://developers.facebook.com/docs/reference/plugins/like/)

**我如何知道用户何时点击了“赞”按钮？**

*如果您使用的是 XFBML 版本的按钮，您可以通过 FB.Event.subscribe 订阅 'edge.create' 事件。*

# java - 出现异常：网络适配器无法在简单的 jdbc 程序中建立连接

> ID：12850407
> 
> 赞同：0
> 
> 时间：2012-07-22T10:51:38.880
> 
> 标签：java, oracle10g

我试图运行一个简单的jdbc代码[使用jdk 1.6，oracle 10g]，

```
package javaapplication2;
import java.text.*;
import java.sql.*;
import java.io.FileWriter;
import java.io.PrintWriter;
import java.io.BufferedWriter;
/**
 * @author animark
 */
public class CallableStatementEx1 {
    public CallableStatementEx1(){;}

public static void main(String s[]) throws Exception {
    try
    {
        Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();
        Connection con=null;
        String url= "jdbc:oracle:thin:@//localhost:1521:orcl" ;   
        con = DriverManager.getConnection(url,"scott","password");

        String query="update emp set HIREDATE=?,ENAME=? where empno=?";

        //Step1: Get PreparedStatement
        PreparedStatement ps=con.prepareStatement(query);

        //Prepare java.sql.Date object
        /*
        This logic shows how to convert simple String that is in 
        dd-MM-yyyy format into Date object
        */
        SimpleDateFormat sdf=new SimpleDateFormat("dd-MM-yyyy");
        java.util.Date d=sdf.parse("26-12-2001");
        java.sql.Date newdate=new java.sql.Date(d.getTime());

        //Step2: set parameters
        ps.setDate(1,newdate);
        ps.setString(2,"animark");
        ps.setInt(3,7839);

        //Step3: execute the query
        int i=ps.executeUpdate();

        System.out.println("record updated count: "+i);
        con.close();
    }
    catch(Exception e)
    {
                    e.printStackTrace();

    }
    }//main
}//class 
```

代码正在正确编译。但是当我试图运行它时，我得到了以下异常..

```
java.sql.SQLException: Io exception: The Network Adapter could not establish the connection
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:255)
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)
    at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:414)
    at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:165)
    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
at javaapplication2.CallableStatementEx1.main(CallableStatementEx1.java:19) 
```

我检查了 oracle 服务，它们都已启动并正在运行。

另外，请查找其他文件的内容为

==================================================== ================================ tnsnames.ora:

```
# tnsnames.ora Network Configuration File: C:\oraclexe\app\oracle\product\10.2.0\server\BIN\network\admin\tnsnames.ora
# Generated by Oracle configuration tools.

ORCL =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl)
    )
  )

EXTPROC_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
    )
    (CONNECT_DATA =
      (SID = PLSExtProc)
      (PRESENTATION = RO)
    )
  ) 
```

==================================================== ====================================

sqlnet.ora

```
# sqlnet.ora Network Configuration File: C:\oraclexe\app\oracle\product\10.2.0\server\BIN\network\admin\sqlnet.ora
# Generated by Oracle configuration tools.

# This file is actually generated by netca. But if customers choose to 
# install "Software Only", this file wont exist and without the native 
# authentication, they will not be able to connect to the database on NT.

SQLNET.AUTHENTICATION_SERVICES= (NTS)

NAMES.DIRECTORY_PATH= (TNSNAMES, EZCONNECT) 
```

==================================================== ===============================

```
# listener.ora Network Configuration File: C:\oraclexe\app\oracle\product\10.2.0\server\BIN\network\admin\listener.ora
# Generated by Oracle configuration tools.

SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = PLSExtProc)
      (ORACLE_HOME = C:\oraclexe\app\oracle\product\10.2.0\server\BIN)
      (PROGRAM = extproc)
    )
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    )
  ) 
```

==================================================== ==============================

我能够使用凭据“scott/password”连接到实例“orcl”，但是当我尝试使用语句连接时

SQL> 以 sysdba 身份连接 sys/password@orcl

我收到以下错误.. ORA-12514: TNS:listener 目前不知道连接中请求的服务

描述符。

我还为 orcl 运行 LSNRCTL 并发现

适用于 32 位 Windows 的 LSNRCTL：版本 10.2.0.1.0 - 2012 年 7 月 22 日 13:42:30 生产

版权所有 (c) 1991, 2005, Oracle。版权所有。

```
Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=orcl)))
Services Summary...
Service "PLSExtProc" has 1 instance(s).
  Instance "PLSExtProc", status UNKNOWN, has 1 handler(s) for this service...
    Handler(s):
      "DEDICATED" established:0 refused:0
         LOCAL SERVER
The command completed successfully 
```

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:47:19.323

侦听器不知道数据库。实例是否正在运行？

您可以参考[http://docs.oracle.com](http://docs.oracle.com)上的 Oracle 文档，甚至可以参考[http://www.tldp.org/HOWTO/Oracle-7-HOWTO-4.html](http://www.tldp.org/HOWTO/Oracle-7-HOWTO-4.html)上的旧方法来了解不同的侦听器配置。

在大多数情况下，网络配置助手 (netca) 能够为您提供工作的基本配置，其中数据库会自动向侦听器注册。

# javascript - 使用数组时不会显示 div

> ID：12850411
> 
> 赞同：2
> 
> 时间：2012-10-12T00:01:47.223
> 
> 标签：javascript

尝试在每次加载页面时从数组中随机生成一个 div。

我已经设法将一些随机图像生成器的位放在一起来创建以下内容。

当数组中的 [0] 包含图像时，与其他图像一样，一切正常。一旦我用 div 或视频替换 [0] 的图像，什么都不会显示并且页面是空白的。

有什么建议我哪里出错了吗？

```
 <link rel="stylesheet" type="text/css" href="style.css" >
     <script type="text/javascript">
         function random()
         {
             video = new Array(4);
             video[0] = "<div class="clip"> </div> ";
             video[1] = "<a href=''><img src='http://lorempixel.com/output/city-q-c-640-480-3.jpg' alt='' /></a>";
             video[2] = "<a href=''><img src='http://lorempixel.com/output/fashion-q-c-640-480-6.jpg' alt='' />";
             video[3] = "<a href=''><img src='http://lorempixel.com/output/technics-q-c-640-480-1.jpg' alt='' />";
             for(var i = 0; i < video.length; i++)
             {
                 index = Math.floor(Math.random() * video.length);
                 document.write(video[index]);
             }
         }
     </script>
 </head>
 <body>
     <script type="text/javascript">
         random();
      </script>
 </body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T00:03:35.837

你需要逃避你的报价。尝试：

`video[0] = "<div class=\"clip\"> </div>";`

或使用单打：

`video[0] = "<div class='clip'> </div>";`

另外，您知道您的 div 是空的，对吗？除非您的样式做某事使其显示某些内容，否则它将显示为空白。

# java - Android AlertDialog 全局变量使用

> ID：12850421
> 
> 赞同：0
> 
> 时间：2012-10-12T00:02:46.020
> 
> 标签：java, android, android-alertdialog

我面临一个奇怪的问题。我在我的一个 Activity 类中将对象名称“term”定义为全局变量。我在显示警报对话框的方法中使用此变量。假设我首先将标题设置为 123。

```
term.setTitle("123"); 
```

然后我显示警报对话框。显示警报对话框的代码是：

```
private void displayNoteDialog() {
    final CharSequence[] items = {
            AgileFlashCardConstants.CREATE_NEW_NOTE, 
            AgileFlashCardConstants.SHOW_CUSTOM_NOTE,
            AgileFlashCardConstants.EDIT_FLASH_CARD + " - " + term.getTitle()
            };

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Note Options");
    builder.setItems(items, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
            if(AgileFlashCardConstants.CREATE_NEW_NOTE.equals(items[item]))  {
                createNewNote(); 
            } else if(AgileFlashCardConstants.SHOW_CUSTOM_NOTE.equals(items[item])) {
                displayCustomNoteDialog();
            } else if(AgileFlashCardConstants.EDIT_FLASH_CARD.equals(items[item])) {
                editFlashCard();

            }

        }

    });

    builder.setPositiveButton("Close", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            dialog.cancel();
        }
    });
    builder.setIcon(R.drawable.note_icon);

    AlertDialog alert = builder.create();
    alert.show(); 
```

显示并关闭警报对话框后，我的应用程序会修改“术语”以具有不同的标题。

```
term.setTitle("ABC"); 
```

问题是下次我再次显示 AlertDialog 时，它不会从修改后的全局对象中选择值。它继续显示最初传递的“术语”对象的值。（在本例中为“123”）

我尝试在第一次显示 AlertDialog 后将其关闭。但似乎没有帮助。不知道我在这里缺少哪一块拼图。

# django - 如何删除选择选择生成的----

> ID：12850424
> 
> 赞同：1
> 
> 时间：2012-10-12T00:03:10.110
> 
> 标签：django, django-forms, django-widget

我有一个问题，关于如何从选择下拉菜单中删除 ---- 不在第一行显示 null(---)。我从 RadioSelect 上的 stackoverflow 中发现，我设法摆脱了 --- 但我被困在选择下拉菜单中......：（这是我的编码示例。

模型.py

```
colorradio = (("1" , 'Yellow'),
              ("2" , 'Red'),
              ("3" , 'Blue'),
              ("4" , 'Black'),)
COLORRADIO = models.CharField(max_length = 2, choices = colorradio, null = True,  blank = True)

colorselect= (("1" , 'Yellow'),
              ("2" , 'Red'),
              ("3" , 'Blue'),
              ("4" , 'Black'),)
COLORSELECT= models.CharField(max_length = 2, choices = colorselect, null = True, blank = True) 
```

表格.py

```
class RadioSelectNotNull(RadioSelect, Select):

    def get_renderer(self, name, value, attrs=None, choices=()):
        """Returns an instance of the renderer."""
        if value is None: value = ''
        str_value = force_unicode(value) # Normalize to string.
        final_attrs = self.build_attrs(attrs)
        choices = list(chain(self.choices, choices))
        if choices[0][0] == '':
            choices.pop(0)
        return self.renderer(name, str_value, final_attrs, choices)   

class RainbowForm(ModelForm):

    class Meta:
        model = Rainbow
        widgets = {'COLORRADIO':RadioSelectNotNull(), # this is correct and NOT shown ---
                   'COLORSELECT':RadioSelectNotNull(), #should be in dropdown menu
                   } 
```

我确实喜欢`COLORSELECT`显示为下拉菜单，也没有在第一行显示----。但是，如果我使用上面的代码，我会得到`COLORSELECT`as`RadioSelect`而不是显示 ---- （这是我想要的不显示 ---）但不是 as `RadioSelect`。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T05:39:47.487

`models.CharField``TypedChoiceField`默认情况下，当有选择时使用表单字段。因此无需手动指定它（也是它的`django.forms.fields.TypedChoiceField`）。

尝试删除`blank=True`并设置默认值（或在 中提供初始值`formfield`，通常您不必这样做，`ModelForm`会为您处理它）。`CharField`具有可空性也没有意义；我正在按照惯例切换变量`COLORSELECT`名称`colorselect`。

```
>>> COLORSELECT = (("1" , 'Yellow'),
...               ("2" , 'Red'),
...               ("3" , 'Blue'),
...               ("4" , 'Black'),)

>>> colorselect = models.CharField(max_length=2, choices=COLORSELECT, default='1')
>>> colorselect.formfield().__class__
django.forms.fields.TypedChoiceField

>>> print(colorselect.formfield().widget.render('','1'))
<select name="">
<option value="1" selected="selected">Yellow</option>
<option value="2">Red</option>
<option value="3">Blue</option>
<option value="4">Black</option>
</select> 
```

# objective-c - 将颜色从 colorWithRGBA 转换为 colorWithWhite

> ID：12850428
> 
> 赞同：1
> 
> 时间：2012-10-12T00:03:26.287
> 
> 标签：objective-c, ios, uicolor

我一直在使用十六进制计算器将十六进制值转换为 RGB 值（#666 = 102/102/102 等等）。

看来我不能将它与 UIColor 一起使用，`[UIColor colorWithRed:102 green:102 blue:102 alpha: 1.0]`只是似乎返回白色（也尝试了 60）。如果我使用 [UIColor colorWithWhite: 0.6 alpha:1.0] 我会得到深色 - 那么如何将 102/102/102 之类的值转换为 colorWithWhite 值？

我尝试过的一种方法是将该值除以 255，因此 102/255 = 0.4，因此我将`colorWithWhite`值设置为 0.4。那准确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:05:17.680

`+ (UIColor *)colorWithRed:(CGFloat)red green:(CGFloat)green blue:(CGFloat)blue alpha:(CGFloat)alpha`

参数： red - 颜色对象的红色分量，指定为 0.0 到 1.0 之间的值。

green - 颜色对象的绿色分量，指定为 0.0 到 1.0 之间的值。

blue - 颜色对象的蓝色分量，指定为 0.0 到 1.0 之间的值。

alpha - 颜色对象的不透明度值，指定为 0.0 到 1.0 之间的值。

因此，要将 RGB 值转换为 0.0 和 1.0 之间，请执行 #/255

编辑：响应您的编辑，是的，它是正确的。但请记住，如果你在代码中这样做，你正在做整数除法，你会得到 0。将 255 设为浮点变量或使用常量 255.f

# c - 将 struct 的成员声明为 c 中的指针并使用它

> ID：12850436
> 
> 赞同：1
> 
> 时间：2012-10-12T00:04:29.847
> 
> 标签：c, pointers, struct, contiki

*   我有一个`uint8_t *C = malloc(24*sizeof(uint8_t));`

*   我需要将一些整数和这个 *C 发送到另一个节点（在 ad hoc 网络中）。所以我将使用一个结构

    ```
    struct fulMsg {
      int msgType;
      int msgCount;
      //uint8_t *CC;     
    } fulMsg_t;

    typedef struct fulMsg fulMsg_tt;` 
    ```

*   `packetbuf_copyfrom(X, sizeof(X));` 在我的 api(contiki) 中有一个方法调用。如果我像这样创建结构， `struct fulMsg *fmsg = &fulMsg_t;`我可以像这样使用上面的方法`packetbuf_copyfrom(fmsg, 8);`，从另一端我可以很容易地得到这两个值。

*   所以我的问题是，当我要对该指针应用相同的东西时，它无法正常工作，我正在使用的网络模拟器突然崩溃（我认为存在分段错误）。我无法在结构号中初始化 *C 的大小。以及如何正确地做到这一点`fmsg->CC = C;`

*   在另一端，这就是我收到这个结构的方式是`struct fulMsg *r_fmsg = &fulMsg_t;`和`rfmsg = (fulMsg_tt *)(packetbuf_dataptr());`。所以我可以很容易地从另一端获取值。（不需要ntoh和hton，但如果真的需要也可以）

*   简单来说，我想做的是将 *C contains 的值和其他一些整数发送到另一个节点。我怎样才能正确地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:33:55.177

我对 contiki 不熟悉，而且似乎没有太多方便的文档，但从我发现的情况来看，该函数看起来不够聪明，无法知道结构的哪些部分是指针，所以我的猜测是它不是为此而设计的。我认为您必须创建一个直接包含完整数组的结构，例如，

```
struct fulMsg {
  int msgType;
  int msgCount;
  uint8_t CC[24];
} fulMsg_t;

typedef struct fulMsg fulMsg_tt;
fulMsg_tt msg;
uint8_t *C = malloc(24*sizeof(uint8_t));
// Do whatever with this array, then
msg.msgCount = 24; // or whatever
memcpy(&msg.CC, C, 24*sizeof(uint8_t));

packetbuf_copyfrom(&msg, sizeof(fulMsg_tt)); 
```

# mysql - SQL(ite) LIKE 优化（或任何其他数据库）

> ID：12850441
> 
> 赞同：0
> 
> 时间：2012-10-12T00:05:27.503
> 
> 标签：mysql, sql, database, sqlite, relational-database

给定一个包含一个 TEXT（单个单词）列和最多 100 万行的表，优化此查询的最佳方法是什么：

```
SELECT name
FROM searchIndex
WHERE name LIKE '%q%u%e%r%y%'
ORDER BY (CASE
              WHEN name LIKE 'query' THEN 1
              WHEN name LIKE 'query%' THEN 2
              WHEN name LIKE '%query' THEN 3
              WHEN name LIKE '%query%' THEN 4
              WHEN name LIKE 'q%u%e%r%y%' THEN 5
              ELSE 6
          END); 
```

目前，我正在使用 SQLite。但是，我愿意尝试任何（免费）数据库系统和任何表结构。

我需要它用于 Mac OS X 应用程序（[文档浏览器](http://kapeli.com/dash)），它将用于搜索文档集的索引。在给定的时间段内不会有很多查询运行，因此并发使用并不是真正的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:33:19.587

我知道没有实用的方法来优化查询，如`%q%u%e%r%y%`. 但这几乎肯定不是一个有用的查询，因为如果索引列有点大，它最终会生成大量不相关的匹配。（例如，您的问题文本将与 匹配`the alien invasion`，因为它恰好按该顺序包含这些字母。）

SQLite [FTS](http://www.sqlite.org/fts3.html)扩展在这里可能很有趣——它将允许您索引出现在列中的单词。对于您描述的任务，它应该是完美的。

# tree - 算术树的前后顺序[方案/球拍]

> ID：12850443
> 
> 赞同：2
> 
> 时间：2012-10-12T00:06:13.713
> 
> 标签：tree, scheme, racket, tree-traversal

想象一个算术表达式，例如 (+ 1 (* 2 (- 3 5))) 被认为是一个树状结构，其叶子为数字，内部节点为运算符符号，如下所示：

```
 +
   /   \
  1     *
       /  \
      2    -
          /  \
         3    5 
```

我已经定义了这些函数来访问树的某些部分：

```
;; returns tree node
(define (operator lst)
  (cadr lst))

;; returns left tree
(define (left-op lst)
  (car lst))

;; returns right tree
(define (right-op lst)
  (cddr lst)) 
```

我正在尝试编写 3 个函数`preorder`, `inorder`, 并`postorder`返回按遇到的顺序遍历的树的列表

我从以前的 java 编程中知道树遍历是如何工作的，但是在编码时遇到了麻烦

上面的前： `(preorder '(+ 1 (* 2 (- 3 5))))`=>`(+ 1 * 2 - 3 5)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:18:26.727

您对树的实现并不完全正确，您需要将叶子（示例中的数字）表示为另一棵具有空左子树和右子树的树。`make-tree`此外，拥有“构造函数”也很有用。让我们一步一步来 - 首先，表示树的正确抽象：

```
(define (make-tree value left right)
  (list left value right))

(define (operator tree)
  (cadr tree))

(define (left-op tree)
  (car tree))

(define (right-op tree)
  (caddr tree)) 
```

现在进行遍历。我会帮你做第一个，`preorder`：

```
(define (preorder tree)
  (if (null? tree)
      '()
      (append (list (operator tree))
              (preorder (left-op tree))
              (preorder (right-op tree))))) 
```

问题中的树如下所示：

```
(define tree
  (make-tree '+
             (make-tree 1 '() '())
             (make-tree '*
                        (make-tree 2 '() '())
                        (make-tree '-
                                   (make-tree 3 '() '())
                                   (make-tree 5 '() '()))))) 
```

像这样使用它：

```
(preorder tree)
> '(+ 1 * 2 - 3 5) 
```

其他两个遍历非常相似，只需`append`为每种情况以正确的顺序重新排列三个参数 - 我将把它作为读者的练习。

# java - 如何安装 Solr 使码头不会膨胀其文件？

> ID：12850447
> 
> 赞同：1
> 
> 时间：2012-10-12T00:06:35.930
> 
> 标签：java, linux, solr, installation, jetty

当我运行 java -jar start.jar 时，我得到这个目录结构： `./mydir/work/Jetty_0_0_0_0_8984_solr.war__solr__.sltihw/webapp/WEB-INF/`

下面的所有内容`/work`在运行时都已膨胀。但是，执行用户将没有对 Solr 安装目录的写入权限，因此动态膨胀将不起作用。

有没有办法预先给码头充气，或者类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:04:21.817

war文件的解包由该`org.eclipse.jetty.webapp.WebAppContext#extractWar(boolean)`方法控制。

您可以使用[ContextDeployer](http://wiki.eclipse.org/Jetty/Feature/ContextDeployer)设置此标志，并将上下文配置上的该标志设置为 false。注意：这意味着您不再使用[WebAppDeployer](http://wiki.eclipse.org/Jetty/Feature/WebAppDeployer)的简单部署，即将war 文件放入 webapps 目录。

`<Set name="extractWAR">false</Set>`

`contexts/test.xml`有关xml 文件的示例，请参见 jetty-distribution 。

# javascript - 我可以在单个请求中呈现部分并返回 JSON 吗？

> ID：12850450
> 
> 赞同：0
> 
> 时间：2012-10-12T00:07:09.417
> 
> 标签：javascript, ruby-on-rails, ruby, json, xmlhttprequest

我想要完成的事情很简单。我正在使用 Rails 和 CoffeeScript（和 S3）。

1.  用户将文件拖到放置区域以进行上传。

2.  CoffeeScript 向 Rails 控制器操作发送 xmlHTTP 请求，以获取 S3 请求的签名 URL。

3.  Rails 为上传创建一条记录，创建一个签名的请求 URL，然后发回一个 JSON 对象，其中包含签名的 URL 以及进度事件的上传 ID 等等。

因为我的 Rails 操作使用 JSON 响应，所以我不能让 rails 也渲染一个 .js.coffee(.erb) 文件来更新包含上传计数的部分。

有没有一种方便的方法可以通过一个请求来完成这两项任务？

感谢您的任何帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T04:54:28.573

而不是使用 js.erb，对部分使用 render_to_string 方法并将其与 json 响应一起发送

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T07:48:04.283

如果您想通过一个请求完成所有事情，您可以：

*   以 js 格式响应操作，然后编写所有逻辑以将 JSON 字符串设置在已知位置/变量中，更新计数器等，所有这些都在一个位置。

*   将 XMLHttpRequest 的编码设置为 JSON，使用所需的 JSON 字符串以 JSON 格式响应操作，然后在客户端请求的成功回调中更新客户端的计数器。通过将所有计算留在最终用户的设备手中，这具有“简化”响应逻辑的优势。

# c# - 将边界框从 JavaScript 发送到操作方法

> ID：12850451
> 
> 赞同：0
> 
> 时间：2012-10-12T00:07:14.253
> 
> 标签：c#, asp.net, asp.net-mvc-3

我有一个 JavaScript 变量，它基本上是一个边界框数组（称为`bounds`）。每个数组元素的形式为：

```
{
    XHigh: -71.00742992911023,
    XLow: -71.00670274612378,
    YHigh: 42.09467040703646,
    YLow: 42.09458047487587
} 
```

我正在尝试通过 POST 将其发送到操作方法：

```
$.ajax({
    url: '/Map/GetLocations',
    type: 'POST',
    data: { boxes: bounds },
    success: function(data) {
        // doing something with the result
    }
}); 
```

在服务器上，我将数据消耗到 action 方法中，如下所示：

```
[HttpPost]
public ActionResult GetLocations(IList<BoundingBox> boxes)
{
    // do something with boxes and return some json
} 
```

DTO 类定义为：

```
public class BoundingBox
{
    public decimal XHigh { get; set; }
    public decimal XLow { get; set; }
    public decimal YHigh { get; set; }
    public decimal YLow { get; set; }
} 
```

在 action 方法中，该`boxes`值确实包含我在 POST 中发送的正确数量的元素。但是，所有的十进制值都是 0。我尝试在 DTO 中将它们更改为`double`s，仍然是 0.0。我尝试将它们更改为`string`s 并且它们是空的。

我是否在模型绑定中遗漏了有关如何填充这些值的内容？如何将这个对象数组发送到我的操作方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:41:39.520

我为这个问题写了一个小助手，因为我也遇到了你的问题的一些变化。我通过将我的 JS 对象的序列化版本发送到服务器（使用`JSON.stringify()`）并让 MVC 即时反序列化它来解决这些问题。

我写的第一堂课是`JsonParameterAttribute`. `TypedJsonBinder`它指示 MVC在绑定修饰参数时使用 my 。

```
public class JsonParameterAttribute : CustomModelBinderAttribute
{
    public override IModelBinder GetBinder()
    {
        return new TypedJsonBinder();
    }
} 
```

在我的例子中`TypedJsonBinder`，将修饰参数的值作为字符串并尝试使用[Json.NET](http://json.net)库将其反序列化为参数的类型。（当然，您可以使用其他反序列化技术。）

```
public class TypedJsonBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        try
        {
            var json = (string) bindingContext.ValueProvider.GetValue(bindingContext.ModelName).ConvertTo(typeof (string));

            return JsonConvert.DeserializeObject(json, bindingContext.ModelType);
        }
        catch
        {
            return null;
        }
    }
} 
```

然后你可以使用`JsonParameterAttribute`这样的：

```
public ActionResult GetLocations([JsonParameter] List<BoundingBox> boxes)
{
    // ...
} 
```

并且不要忘记序列化：

```
$.ajax({
    url: '/Map/GetLocations',
    type: 'POST',
    data: { boxes: JSON.stringify(bounds) },
    success: function(data) {
        // doing something with the result
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T05:00:06.790

如果您的 Json 的格式与您显示的完全一样，那么我认为它需要采用这种形式：

```
{ 
    XHigh: -71.00742992911023, 
    XLow: -71.00670274612378, 
    YHigh: 42.09467040703646, 
    YLow: 42.09458047487587 
} 
```

Json 反序列化会扼杀`=`角色。

**编辑**

如果你改变

```
[HttpPost] 
public ActionResult GetLocations(IList<BoundingBox> boxes) 
{ 
    // do something with boxes and return some json 
} 
```

到

```
[HttpPost] 
public ActionResult GetLocations(BoundingBoxRequest request) 
{ 
    // do something with boxes and return some json 
} 

public class BoundingBoxRequest
{
    public IList<BoundingBox> Boxes { get; set; }
} 
```

那么您*应该*能够将其发回并对其进行反序列化。

# javascript - 可以使用 websharper 作为插入式 JS 替代品吗？

> ID：12850454
> 
> 赞同：5
> 
> 时间：2012-10-12T00:07:38.960
> 
> 标签：javascript, f#, websharper

是否可以使用 websharper 作为 javascript 的替代品，而不会增加站点或 ASP.NET 的复杂性？

例如，我可以将以下 websharper 库编译为 .js 文件并从我的 html 中的 javascript 脚本块中调用 hello() 函数吗？

```
namespace WebSharperLib

open IntelliFactory.WebSharper

module HelloWorld =
  [<JavaScript>]
  let hello () =
    IntelliFactory.WebSharper.JavaScript.Alert("Hello World") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T10:20:05.320

你确实可以做这样的事情。我找到的解决方案如下：

*   在 VS 中创建 WebSharper 库项目
*   将代码粘贴到您的示例中
*   生成解决方案
*   复制解决方案生成的最后一行（它运行 websharper）并在 powershell/console 中运行它，只需添加选项

    -js 你的js文件的名字

问题是，这样你就没有任何已编译的依赖项。我想如果你制作一个完整的项目并在那里获取编译好的 js 输出，你可以得到它们。

Tt 在我看来，WebSharper 并不是为了以这种方式使用，而是作为一个完整的包使用。

如果您只想将 F# 编译为 Javascript，则有专门为此目的而制作的[Pit](http://pitfw.org/)，因此我建议您先尝试一下。

# ipad - Apple 的 App Store 是否接受需要用户登录的应用程序？

> ID：12850456
> 
> 赞同：1
> 
> 时间：2012-10-12T00:07:55.010
> 
> 标签：ipad, web-applications, cordova, login, app-store

我使用 PhoneGap 开发了一个 iPad 应用程序，需要用户登录。

Apple 是否会批准要求用户登录的应用程序，或者他们是否制定了反对要求用户登录的政策？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T00:26:52.797

您必须为审核团队提供一个测试/演示帐户（提交应用程序时有一个字段），但要求登录应该不是问题 - 否则不会有 Facebook 应用程序、Instagram ， ETC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T00:16:46.667

几乎可以肯定，您可以要求用户登录，但是您管理用户和密码的方式可能会受到限制。在收到 Apple 的反馈之前，您很可能不知道。

请务必检查提交应用程序的参数。 [https://developer.apple.com/appstore/resources/submission/](https://developer.apple.com/appstore/resources/submission/)

# tabs - 恢复 chrome 标签标识

> ID：12850458
> 
> 赞同：0
> 
> 时间：2012-10-12T00:08:03.927
> 
> 标签：tabs, google-chrome-extension

我想以一种在浏览器重新启动后仍然存在的方式计算 chrome 浏览器中选项卡的身份。我正在尝试实施这个[问题](https://stackoverflow.com/questions/11005258/persistent-unique-id-for-chrome-tabs-that-lasts-between-browser-sessions)中提出的解决方案。

在我的 bg.htmtl 中，我编写了以下事件处理程序：

```
chrome.windows.onCreated.addListener(
    function(win) {
        console.log("window.onCreated", win);
        for(tab in win.tabs) {
            console.log("window.created.tab", tab);
        }
    }); 
```

然后我通过在 Chrome 上按下焦点来创建一个新窗口`ctl-n`，但我没有触发该事件。然后我通过创建第二个选项卡`ctrl-t`，事件仍然没有触发。然后我关闭窗口，再次创建一个新窗口，然后在最近关闭的列表中重新加载之前关闭的“2 个选项卡”项目。然后触发该事件。不幸的是，它缺少 tabs 属性，该属性在[文档](http://developer.chrome.com/extensions/windows.html#type-Window)中被描述为可选。我在清单中指定了“标签”权限。

接下来我应该尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T07:50:38.633

我觉得很奇怪你的`onCreated`听众没有被 Ctrl-N 触发。我刚刚对此进行了测试，它对我来说效果很好。你确定你正在寻找正确的控制台吗？

获得 后，您可以使用参数中设置的字段`windowId`检索选项卡。`chrome.windows.get``populate``getInfo`

# java - 使用数字对对数组进行排序

> ID：12850461
> 
> 赞同：3
> 
> 时间：2012-10-12T00:08:30.667
> 
> 标签：java, sorting, arraylist

好的，假设我有一个如下所示的对象数组： obj(from, to) 我想通过比较 from 和 to 对该数组进行排序。我想要做的一个例子：假设我有这些参数的对象 (0,2) (2,4) (0,3) (4,5) (2,3)
我希望对象按此顺序排序: (0,2) (0,3) (2,3) (2,4) (4,5)

我希望比较前两个“来自”变量并将较低的变量放在前面。如果它们相等，那么我想要比较第二对数字。为此，我创建了一个比较方法

```
public int compare (EdgeI e1, EdgeI e2) {
  if(e1.from < e2.from) { return -1; }
  else if(e1.from == e2.from) {
    if(e1.to < e2.to) { return -1; }
    else if(e1.to == e2.to) { return 0; }
    else if(e1.to > e2.to) { return 1; }
  }
  return 1;
} 
```

这行得通吗？如果是这样，我将如何通过数组运行这种排序？谢谢你的帮助。

编辑

```
 public class mySorter implements Comparator <EdgeI> {

  public int compare(EdgeI e1, EdgeI e2) {
    if(e1.from < e2.from) { return -1; }
    else if(e1.from == e2.from) {
      if(e1.to < e2.to) { return -1; }
      else if(e1.to == e2.to) { return 0; }
      else if(e1.to > e2.to) { return 1; }
    }
    return 1;
  }

  public void sorterM () {
    Collections.sort(tet2, new mySorter());
  }

} 
```

我收到错误集合无法解析，并且 tet2 无法解析。Tet2 是另一个类中的公共列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T00:37:20.547

您可以做的是创建一个实现`Comparator<Edge>`. 然后，您可以使用您的 compare 方法从接口实现该方法。

完成此操作后，您可以使用比较器对`Edge`对象列表进行排序`Collections.sort()`。

这看起来像这样：

```
import java.util.Collections;
import java.util.List;
import java.util.Comparator;

public class EdgeComparator implements Comparator<Edge> {
    public int compare(Edge l, Edge r) { ... }
}

void yourCode() {
    List<Edge> edges = ...;
    Collections.sort(edges, new EdgeComparator());
    //edges now contains the sorted edges
} 
```

[这是关于Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)和[Collections.sort](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)的 javadoc 。

如果你有一个数组而不是一个列表，你可以像使用[Array.sort](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)一样使用 Array.sort `Collections.sort`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T00:37:50.003

您可以使您的 EdgeI 对象具有可比性，也可以创建一个单独的比较器来处理比较 EdgeI 对象。在这种情况下，（假设您编写了 EdgeI 类），更面向对象的方法是实现 Comparable。

```
public class EdgeI implements Comparable<EdgeI> {
    ...
    public int compareTo(EdgeI other) {
        // implement your compare method to use this and other instead of e1 and e2
    }
    ...
} 
```

然后，您可以使用 plain ，该方法将根据继承方法指定的*自然顺序*`Arrays.sort`对边缘进行排序。*`compareTo`*

 *```
EdgeI[] edges = ...;
Arrays.sort(edges); 
```

或者，您可以实现一个 Comparator 并将其与目标数组一起传递给 sort 方法以进行排序。

```
public class EdgeComparator implements Comparator<EdgeI> {

    public int compare(EdgeI e1, EdgeI e2) {
        // your method in its exact format
    }
} 
```

然后对其进行排序：

```
EdgeI[] edges = ...;
Arrays.sort(edges, new EdgeComparator()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T01:24:54.570

迟到了，但这是一种可能的实施方式。您可以通过在方法中调用 Collections.sort 来避免将比较器设为静态，而不是在主方法中，这实际上是您会做的。请注意，有两个比较器。如果您希望有不止一种排序方式，即在这种情况下是升序与降序，您可以随意进行任意数量的排序。这只是一个调用`Collections.sort(edges, ORIGINAL);`或的问题`Collections.sort(edges, REVERSE);`。

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;

public class EdgeI{

    private int from;
    private int to;

    public EdgeI(int f, int t)
    {
        from = f;
        to = t;
    }

    public void setFromTo(int f, int t)
    {
        from = f;
        to = t;
    }

    public int getFrom()
    {
        return from;
    }

    public int getTo()
    {
        return to;
    }

    public final static Comparator<EdgeI> REVERSE = new Comparator<EdgeI>()
    {
    @Override
    public int compare(EdgeI e1, EdgeI e2)
    {
        if(e1.from < e2.from)
            return 1;
        if(e1.from > e2.from)
            return -1;
        //else they are equal
        if(e1.to < e2.to)
            return 1;
        if(e1.to > e2.to)
            return -1;
        //else both edges are equal
        return 0;
    }
    };

    public final static Comparator<EdgeI> ORIGINAL = new Comparator<EdgeI>()
    {
    @Override
    public int compare(EdgeI e1, EdgeI e2)
    {
          if(e1.from < e2.from) { return -1; } 
          else if(e1.from == e2.from)
          { 
            if(e1.to < e2.to) { return -1; } 
            else if(e1.to == e2.to) { return 0; } 
            else if(e1.to > e2.to) { return 1; } 
          } 
          return 1; 
    } 
    };

    public static void main(String[] args) {
        ArrayList<EdgeI>edges = new ArrayList<EdgeI>(5);
        edges.add(new EdgeI(0, 2));
        edges.add(new EdgeI(2, 4));
        edges.add(new EdgeI(0, 3));
        edges.add(new EdgeI(4, 5));
        edges.add(new EdgeI(2, 3));

        System.out.println("\nBefore sorting:");
        for(EdgeI i : edges)
            System.out.println("("+i.getFrom()+", "+i.getTo()+")");

        Collections.sort(edges, ORIGINAL);

        System.out.println("\nAfter sorting:");
        for(EdgeI i : edges)
            System.out.println("("+i.getFrom()+", "+i.getTo()+")");

    }
}
/*
Output on the console:

Before sorting:
(0, 2)
(2, 4)
(0, 3)
(4, 5)
(2, 3)

ORIGINAL:
After sorting:
(0, 2)
(0, 3)
(2, 3)
(2, 4)
(4, 5)

REVERSE:
After sorting:
(4, 5)
(2, 4)
(2, 3)
(0, 3)
(0, 2)
*/ 
```*

# python - 正则表达式 a: bcda:b

> ID：12850467
> 
> 赞同：0
> 
> 时间：2012-10-12T00:10:05.577
> 
> 标签：python, regex

我目前有 regex `'([^: ]+):([^ ]+)?'`，当给定一个类似`This is a correct:test msg: a b c bool:y`返回的字符串时`[('correct', 'test'), ('msg', ''), ('bool', 'y')]`（使用 pythons `re.findall`）。

我实际上希望它返回类似`[('correct', 'test'), ('msg', 'a b c'), ('bool', 'y')]`. 如何强制正则表达式查看第二个块，看看里面是否有 a `:`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T00:26:55.977

您可以在第二部分使用[积极的前瞻，例如](http://www.regular-expressions.info/lookaround.html)

```
'([^ :]+): *(.+?)?(?:(?= [^ ]+:)|$)' 
```

# sql - 适当的聚合函数，或如何绕过它

> ID：12850468
> 
> 赞同：1
> 
> 时间：2012-10-12T00:10:07.027
> 
> 标签：sql, sql-server-2008

我正在尝试使用**“CASE”**操作执行选择语句，但它说我的条件 (abc.reason) 无效，因为它既不包含在聚合函数也不包含在 GROUP BY 子句中。我尝试将它添加到 GROUP BY 子句，但在我的结果表中创建了一个不必要的行。有小费吗？

`SELECT`

 ````
DISTINCT ID 
,(CASE WHEN reason = 4 THEN null ELSE SUM(quantity*price) END) AS Value
,COUNT(*) AS CountAll 
```` 

`FROM TransactionsDB`

`GROUP BY ID`

`ORDER BY ID DESC`

如果我将 GROUP BY 子句更改为，**`GROUP BY ID, reason`**那么我的结果是：

ID ---- VALUE ----- COUNTALL

id1 - - 1000 - - - - - 22

id1 - - - NULL - - - - 1

id2 - - - - 232 - - - 17

id3 - - - - 113 -- - - 2

id3 - - - - NULL - - 1

当我真的需要结果时：

ID ---- VALUE ----- COUNTALL

id1 - - 1000 - - - - - **23**

id2 - - - - 232 - - - 17

id3 - - - - 113 -- - - **3**

先感谢您！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:14:42.417

```
SELECT ID 
,SUM(CASE WHEN reason = 4 THEN 0 ELSE quantity*price END) AS Value
,COUNT(*) AS CountAll
FROM TransactionsDB
GROUP BY ID
ORDER BY ID DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:15:09.163

```
SELECT DISTINCT ID,
    SUM(CASE WHEN reason = 4 THEN 0 ELSE quantity*price END) AS Value,
    COUNT(*) AS CountAll
FROM TransactionsDB
GROUP BY ID
ORDER BY ID DESC 
```

# remote-debugging - 在远程调试期间如何比较 RemoteObject(s)？

> ID：12850471
> 
> 赞同：1
> 
> 时间：2012-10-12T00:10:34.433
> 
> 标签：remote-debugging, google-chrome-devtools

我指[的是 Chrome Debugging API 1.0 文档中指定的 RemoteObjects](https://developers.google.com/chrome-developer-tools/docs/protocol/1.0/runtime#type-RemoteObject)。

### 背景

我正在尝试将后续调用帧与之前的调用帧相关联。

假设：我在函数`a`, `b`, `c`,上设置断点`d`。我运行以下命令： `a(b(c(d())));`

执行暂停，我收到`Debugger.paused`每个功能的通知并每次恢复。在每个`Debugger.paused`通知上，我都会收到一个 s 数组`CallFrame`。但是，`objectId`每个`CallFrame`对象中的 s 及其属性都是唯一的。因此，我无法通过它们来比较它们`id`。

任何人都知道一些方法来做到这一点？

并且允许我根据它们的 id 在单个对象上执行代码`Runtime.callFunctionOn`，`Runtime.evaluate`但是，它似乎不允许我在*多个*对象上执行代码，所以我不能做一些类似检查的事情`CallFrameA.objectX === CallFrameB.objectY`（例如）。

我也不确定通过 API 检索对象并进行深度相等检查是否是个好主意。一种方法是进行递归`Runtime.getProperties`调用并检查除 unique 之外的所有属性的相等性`objectId`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:35:25.097

1.  我建议您针对 Chromium 或 WebKit 提出问题，以支持对象的唯一 ID——这是实现 V8 的本机调试协议的东西。

2.  *实际上，您可以通过其arguments*参数向 Runtime.callFunctionOn 提供几个 id 。

# ios - iOS 不符合键值编码的 uitableview

> ID：12850474
> 
> 赞同：3
> 
> 时间：2012-10-12T00:11:10.453
> 
> 标签：ios, uitableview, key, tableview

我有一个 UIViewController，里面有一个 UITableView。UIViewController 不是 UITableViewController，因为视图上还有其他内容。如果我不连接任何插座，空表和其他东西一起出现在视图上，没有错误。如果我将 UIViewController 的插座连接到 UITableView，我会收到以下错误：

> '[<UIViewController 0x748a420> setValue:forUndefinedKey:]: 这个类对于 key tableStories 来说是不符合键值编码的。'

如果我还将数据源和委托插座从 UITableView 连接到 UIViewController，我会得到同样的错误。这是视图控制器的 .h

```
#import <UIKit/UIKit.h>

@interface IntroViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@property (nonatomic, weak) IBOutlet UITableView *tableStories;
@property (nonatomic, strong) NSManagedObjectContext* managedObjectContext;
@property (nonatomic, strong) NSArray *stories; 
```

这是.m

```
@implementation IntroViewController

@synthesize tableStories;
@synthesize stories;
@synthesize managedObjectContext;

- (void)viewDidLoad
{
    [super viewDidLoad];

    tableStories.delegate = self;
    tableStories.dataSource = self;

    managedObjectContext = ((ReadMeAppDelegate *)[UIApplication sharedApplication].delegate).managedObjectContext;
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"RMStory" inManagedObjectContext:managedObjectContext];
    [fetchRequest setEntity:entity];
    NSError *error;
    self.stories = [managedObjectContext executeFetchRequest:fetchRequest error:&error];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [stories count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    if (cell == nil) {
         cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    RMStory *thisStory = [stories objectAtIndex:indexPath.row];
    cell.textLabel.text = thisStory.title;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"%@", thisStory.author];

    return cell;
} 
```

它可能与我的核心数据命令有关，但我一直在尝试堆栈中提到的其他解决方案来克服这个错误，但到目前为止没有任何效果。：-/

另外，我从另一个应用程序导入了故事板，所以可能会造成一些麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T07:09:17.500

我想到了。我在调试器输出的一开始就收到一个错误，上面写着

```
Unknown class IntroViewController in Interface Builder file. 
```

我在 StackExchange 上查找了错误并在[这里](https://stackoverflow.com/questions/4591911/unknown-class-firstviewcontroller-in-interface-builder-file)找到了答案是[Matthew](https://stackoverflow.com/users/1591653/matthew)给出了我使用的答案。我不得不将 IntroViewController 添加到编译源列表中。我不确定这意味着什么，或者为什么它没有阻止程序在没有表格视图的情况下运行，但现在它可以工作了。感谢堆栈交换！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T01:13:55.317

在 IB 中，不要忘记将 UIViewController 类设置为`IntroViewController`.

# jquery - 当我单击具有此复选框的元素跨度时，如何设置项目复选框？

> ID：12850476
> 
> 赞同：3
> 
> 时间：2012-10-12T00:11:11.110
> 
> 标签：jquery, checkbox

当我单击具有此复选框的元素跨度时，我需要设置项目复选框。

代码：

```
<script>
$('.CheckMemberClassList').bind('click',function(){
    $('.CheckMemberClassList').removeClass('MemberClassActive').addClass('MemberClassInactive');
    $(this).removeClass('MemberClassInactive').addClass('MemberClassActive');
    });
</script>

<span class="MemberClass1 MemberClassActive CheckMemberClassList">
<input type="radio" name="MemberClassList" id="MemberClassList1" value="1" checked="checked">
Text One
</span>

<span class="MemberClass2 MemberClassInactive CheckMemberClassList">
<input type="radio" name="MemberClassList" id="MemberClassList2" value="2">
Text Two
</span>

<span class="MemberClass3 MemberClassInactive CheckMemberClassList">
<input type="radio" name="MemberClassList" id="MemberClassList3" value="3">
Text Tree
</span> 
```

请告诉我我需要如何在这段代码中制作它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T00:20:49.543

change your `<span>`s to `<label>` with a `for=` attribute matching the ID of your input, like so:

```
<label for="checkbox1">Click Me!</label>
<input type="checkbox" id="checkbox1"> 
```

[http://jsfiddle.net/2GbPS/](http://jsfiddle.net/2GbPS/)

Actually, since you have your checkbox inside the span, this will work:

```
<label>
<input type="checkbox">
Click Me!
</label> 
```

(fiddle updated)

Works with radios too!

```
<label>
<input type="radio">
Click Me!
</label> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T00:19:41.493

```
$('.CheckMemberClassList').bind('click',function(){
    $('.CheckMemberClassList').removeClass('MemberClassActive').addClass('MemberClassInactive');
    $(this).removeClass('MemberClassInactive').addClass('MemberClassActive');
    $(this).find('input:radio').prop('checked', true);
}); 
```

工作示例：http: [//jsfiddle.net/hMYtg/](http://jsfiddle.net/hMYtg/)

Jquery .prop() 文档：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T00:21:03.780

First of all, do you want a checkbox or a radio input? Your code is a radio input.

Here is a [jsfiddle](http://jsfiddle.net/YvrSf/2/) showing what you require

You need the following javascript:

```
$('span').click(
    function() {
        var cb = $(this).find(":radio")[0];

        if (!$(cb).attr("checked")) {
            $(cb).attr("checked", "checked");
        } else {
            $(cb).removeAttr("checked");
        }
    }
);

$('span input').click(
    function(event){
        event.stopPropagation();
});​ 
```

# c# - msbuild.exe 突然死机

> ID：12850478
> 
> 赞同：0
> 
> 时间：2012-10-12T00:11:25.343
> 
> 标签：c#, msbuild, freeze

使用 msbuild.exe 构建 C# 项目时遇到问题，它会冻结。查看 Process Explorer 中的 msbuild.exe 进程，我得到如下信息：

```
MSBuild.exe
    |
    +--csc.exe
          |
          +--cvtres.exe 
```

这很奇怪，因为它不是经常重现的，但是当它重现时，它总是在 cvtres.exe 中。如果我杀死 cvtres.exe，它会给我一条消息说

```
'[PROJECT_PATH]\obj\Release\[TEMP_FILE_NAME].tmp' is not a valid Win32 resource file 
```

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:17:56.883

我相信 cvtres 用于编译您的资源文件。也许你有很多资源，或者正在编译的资源很大或无效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:58:30.177

发现了这个。这是因为我安装了旧版本的 Visual Studio（即 2003）。它添加了环境变量“LIB”和“INCLUDE”以及 .NET 1.1 的值（添加到您的系统变量而不是用户！！）。删除它们解决了这个问题。

# javascript - 计算 4 个数值和税的 Javascript 计算器乘以总数

> ID：12850479
> 
> 赞同：1
> 
> 时间：2012-10-12T00:11:41.153
> 
> 标签：javascript

简而言之，我必须创建一个计算，输入 4 个数值，然后将其乘以每单位的价格相加，并将税款计算到总数中。我一直在寻找脚本但失败了。

编辑***：我已经根据我阅读和理解的内容编辑了部分代码，但仍然无法让我的函数执行命令并执行带有税的值。

```
 <html>
<head>
<title>Purchase&Tip Calculator</title>
function calculate() {
    var total = cost*total;
    var cost = document.getElementById("cost").value;
    var tax = document.getElementById("tax").value;

    total = cost*tax;
    document.getElementById("total").value = total;
}
</script>

</head>

<body>

<h1 align="left">Purchase&Tip Calculator</h1>

<input type="text" id="cost" />

<input type="text" id="cost" />

<input type="text" id="cost" />

<input type="text" id="tax" />

<input type="text" id="total" />

<button id="cost" onclick="calculate()" value="Calculate!" />Calculate!</button>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:56:56.673

在您的代码中：

```
> function fixOrder() {
>     const TAX = 0.975; 
```

`const`是[未来的保留字](http://ecma-international.org/ecma-262/5.1/#sec-7.6.1)，而不是 ECMAScript 的一部分。它已被[添加到 JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/const)中，并且可能在 ECMAScript 的未来版本中，但不应在一般网络上使用，因为它会在不支持它的浏览器中引发错误。

```
>    var numPrice;
>    var total;
>    var tax;
> 
>    numPrice = parseFloat(document.getElementById("cost").value, 10); 
```

[parseFloat](http://ecma-international.org/ecma-262/5.1/#sec-7.6.1)接受单个字符串参数。parseInt 没有基数。将字符串转换为数字的方法有很多种，一种是一元运算`+`符，另一种是`Number`作为函数调用。`parseFloat`可能很好，只是要输入更多内容。

由于您的控件位于表单中，因此您可以更轻松地访问它们作为表单的命名属性：

```
 var form = document.getElementById('form');
  numPrice = +form.cost.value;

>    tax      = parseFloat(document.getElementById("tax").value, 10); 
```

已经有一个名为 的变量`TAX`，该值不会在任何地方使用。

```
>    total    = parseFloat(document.getElementById("total").value, 10);
>    numPrice = numPrice * TAX;
>    total    = numPrice; 
```

这里的值`total`被分配了两次，第二次替换了第一次。

```
>    total    = document.getElementById("total").value = "$" + total.toFixed(2); 
```

这种类型的分配不利于维护，最好保持简单。此外，它似乎`total`会有一个前导的“$”，这将导致`parseFloat`return `NaN`。最好将“$”放在表单的文本中，然后将值放在字段中。

您可以使用复合运算符进行算术运算，它们可能会造成混淆，但如果多次使用会更容易发现。也许你的意思是：

```
 total = parseFloat(form.total.value);
  numPrice *= TAX;
  total += numPrice;
  form.total.value = total.toFixed(2); 
```

在 HTML 部分：

```
>  <p>Total: <input type="text" id="total" name="total" value="" disabled=
   "disabled" /></p> 
```

您不希望禁用总计字段，因为这会使其具有禁用外观。此外，disabled 属性不需要值（除非您使用的是 XHTML，并且实际上没有人在 Web 上使用它）。

您可以将该字段设为只读：

```
 <p>Total: $<input type="text" name="total" readonly></p> 
```

但是用户会想知道为什么有一个他们不能修改的字段。考虑改为将其设为 span 并更新其文本或 innerHTML：

```
 <p>Total: $<span id="total">0.00</span></p> 
```

和

```
 document.getElementById('total').innerHTML = total.toFixed(2); 
```

然后，您还可以将内容样式设置为粗体或相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:22:58.160

If I understand you correctly, you are attempting to gather a few numbers from input fields, do some calculations, and print the result? If that's the case I'll give you a base example:

```
var total = 0;
var cost = document.getElementById("cost").value;
var tax = document.getElementById("tax").value;

total = cost*tax; 
```

Your total value shouldn't be coming from an input element (at least that doesn't make sense to me). You instead want to define it within your code, zero is standard practice. Then you simply initialize cost and tax with the appropriate variables and multiply them together, setting that result as the value of your "total" variable.

This should be bound to an event (such as a button click or a keydown/up) to be fired after the input fields have been appropriated. Hope this helps!

## Part II

This is in response to the received comment below. First you want to create a function to encapsulate this code:

```
function calculate() {
    var total = 0;
    var cost = document.getElementById("cost").value;
    var tax = document.getElementById("tax").value;

    total = cost*tax;
    document.getElementById("total").value = total;
} 
```

Here is the corresponding HTML:

```
<input type="text" id="cost" />
<input type="text" id="tax" />
<input type="text" id="total" />
<button id="cost" onclick="calculate()" value="Calculate!" />Calculate!</button> 
```

Here is a working example: [http://fluidev.com/stack/calculate/index.html](http://fluidev.com/stack/calculate/index.html)

# ruby-on-rails - 将代码重构为循环

> ID：12850480
> 
> 赞同：0
> 
> 时间：2012-10-12T00:11:51.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

目前我有

```
 <b>Step 1</b>    
      <%= @recipe_records.instruct_1 %>
     </p>   
    <p> 
    <b>Step 2</b>       
      <%= @recipe_records.instruct_2 %>
      </p>
    .....
    <b>Step 30</b>      
      <%= @recipe_records.instruct_30 %>
      </p> 
```

如何将它放在一个循环中，而不是列出所有 30 个步骤并且不显示空步骤？

```
 <% 30.times do |n|%>
        <% ri = @recipe_records.instruct_#{n+1}%>
        <%= if !ri.empty? %>
            <p>
            <%= ri %>
        <% end%>
    <% end %> 
```

试过但无法工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T00:27:32.897

```
<% 30.times do |n|%>
    <% ri = @recipe_records.send("instruct_#{n+1}")%>
    <%= unless ri.empty? %>
        <p/>
        <%= ri %>
    <% end%>
<% end %> 
```

作为记录，我不同意您的访问器方法名称。您应该以数组方式访问条目，并且每个条目都没有访问器。例如 @recipe_records[3] 而不是 @recipe_records_3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:14:54.360

经过一番摆弄，我得到了以下工作代码：

```
<% 30.times do |n|%>
    <% ri = @recipes.send("instruct#{n+1}")%>
    <% unless ri.blank? %>
        <p>
        <b><%= "Step #{n+1}"%></b>
        <%= ri %>
        <p/>
    <% end%>
<% end %> 
```

# javascript - Knockout JS：使用预定义的对象构建视图模型

> ID：12850483
> 
> 赞同：1
> 
> 时间：2012-10-12T00:12:02.980
> 
> 标签：javascript, object, knockout.js

我有一个大型 XML 文件（转换为 JSON），其中包含多个具有相同结构的重复部分。`myAttributes`除了特定于部分的属性外，每个部分都有一组结构相同的属性（XML 到 JSON 的转换将所有属性移动到一个名为 的对象中）。我的目标是能够读取现有的 XML 并生成新的 XML。

我尝试使用映射插件，把它只允许我读取 XML，而不是生成它，加上对象元素之间存在多个相互依赖关系。

我认为解决此问题的最佳方法是预先定义一组与 XML 的小部分匹配的对象。当组装在一起时，这些对象将能够生成我需要的 XML 结构。这样，我可以循环通过我从 XML 生成的 JSON 数组，使用适当的数据填充我预定义的对象并将它们附加到我的 viewModel（比如说 10 个警报、3 个操作、6 个指标分组等）。从预定义的对象生成 XML 也应该很容易。

但是，由于我对 JavaScrip 和 KnockoutJS 普遍缺乏经验，我很难弄清楚这一点。

```
// Main Top Level Management Module Object
function ManagementModule(data) {
    this.myAttributes = new Object();
    this.myAttributes.Name = ko.observable(data.Name);
    this.myAttributes.IsActive = ko.observable(data.IsActive);
    this.myAttributes.DescriptionContentType = ko.observable(data.DescriptionContentType);
    this.myAttributes.Description = ko.observable(data.Description);
    // There are other object specific properties, but I omitted them for now
}

// New Alert Object. It will be deep in the hierarchy of the main top level object
// but for now i will make it top level for test purposes.
function Alert(data) {
    this.myAttributes = new Object();
    this.myAttributes.Name = ko.observable(data.Name);
    this.myAttributes.IsActive = ko.observable(data.IsActive);
    this.myAttributes.DescriptionContentType = ko.observable(data.DescriptionContentType);
    this.myAttributes.Description = ko.observable(data.Description);
    // There are other object specific properties, but I omitted them for now
}

// View Model
function myModel() {
    var self = this;
    self.ManagementModule = ko.observableArray();
    self.Alerts = ko.observableArray();
};
var myViewModel = new myModel(); 
```

然后我遍历我的 JSON 并尝试将内容附加到视图模型......这就是事情无法正常工作的地方。也许是因为我误解了这些对象......

```
$.getJSON("/getXML", function (data) {

    for (var key in data) {
        // Do something here
    }

    // This seems to work OK. There is only 1 so, I just
    // set it.
    myViewModel.ManagementModule(data['myAttributes']);

    for (var i = 0; i < data['DataGroups']['DataGroup'].length; i++) {
        var current = data['DataGroups']['DataGroup'][i];
        if(current['AlertBase']) {

             var AlertBase = current['AlertBase'];

             // There are multiple Alarts
             for (var i = 0; i < AlertBase.length; i++) {
                     myViewModel.Alerts.push(Alert(AlertBase[i].myAttributes));
             }
        }

    };
    ko.applyBindings(myViewModel);

}); 
```

这有点有效....当我尝试绑定它时

```
<div data-bind="text: Alerts.myAttributes.Name"></div>
<div data-bind="text: ManagementModule.myAttributes.Name"></div> 
```

它不工作。如果我这样绑定：

```
<div data-bind="text: myAttributes.Name"></div> 
```

它输出两者，`myViewModel.ManagementModuleName.myAttributes.Name`最后一个`myViewModel.Alert.myAttributes.Name`连接在一起。

我究竟做错了什么？如何从多个嵌套对象中组装一个 viewModel？

更新：刚刚意识到我绑定不正确，但这仍然会产生一堆 `myViewModel.ManagementModuleName.myAttributes.Name`和最后一个`myViewModel.Alert.myAttributes.Name`连接在一起

```
<div data-bind="foreach: Alerts()">
    <div data-bind="text: myAttributes.Name"></div>
</div> 
```

我想我解决了它......

```
myViewModel = new ManagementModule(data['myAttributes']);

myViewModel.Alerts = ko.observableArray();
myViewModel.Alerts.push(new Alert(AlertBase[i].myAttributes));

<div data-bind="text: myAttributes.Name"></div><br />
<div data-bind="foreach: Alerts()">
    <div data-bind="text: myAttributes.Name"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:49:25.010

对于初学者，您引用 observableArrays 就好像它们是我们可观察的一样。你需要一个 data-bind=foreach: Alarms() 在某个地方。

好的：看看这个 jsFiddle 是否对你有帮助：http: [//jsfiddle.net/8QVe6/](http://jsfiddle.net/8QVe6/)

请注意，我制作了属性 camelCased（即 managementModule）。

# powershell - 使用脚本中的参数调用第二个脚本

> ID：12850487
> 
> 赞同：74
> 
> 时间：2012-10-12T00:12:35.043
> 
> 标签：powershell, parameter-passing, command-line-arguments, invoke-command, start-job

我有一个脚本，它读取一个配置文件，该文件产生一组名称值对，我想将它们作为参数传递给第二个 PowerShell 脚本中的函数。

我不知道在设计时会在这个配置文件中放置什么参数，所以就在我需要调用第二个 PowerShell 脚本的时候，我基本上只有一个变量具有第二个脚本的路径，还有一个变量变量，它是要传递给路径变量中标识的脚本的参数数组。

因此，包含第二个脚本 ( `$scriptPath`) 路径的变量可能具有如下值：

```
"c:\the\path\to\the\second\script.ps1" 
```

包含参数 ( `$argumentList`) 的变量可能类似于：

```
-ConfigFilename "doohickey.txt" -RootDirectory "c:\some\kind\of\path" -Max 11 
```

如何使用 $argumentList 中的所有参数从这种事态中执行 script.ps1？

我希望从调用第一个脚本的控制台可以看到来自第二个脚本的任何写入主机命令。

我尝试过点源、Invoke-Command、Invoke-Expression 和 Start-Job，但我还没有找到不会产生错误的方法。

例如，我认为最简单的第一条路线是尝试 Start-Job，如下所示：

```
Start-Job -FilePath $scriptPath -ArgumentList $argumentList 
```

...但这失败并出现此错误：

```
System.Management.Automation.ValidationMetadataException:
Attribute cannot be added because it would cause the variable
ConfigFilename with value -ConfigFilename to become invalid. 
```

...在这种情况下，“ConfigFilename”是第二个脚本定义的参数列表中的第一个参数，我的调用显然是试图将其值设置为“-ConfigFilename”，这显然是为了通过名称来识别参数，不设置它的值。

我错过了什么？

**编辑：**

好的，这是一个被调用脚本的模型，在一个名为 invokee.ps1 的文件中

```
Param(
[parameter(Mandatory=$true)]
[alias("rc")]
[string]
[ValidateScript( {Test-Path $_ -PathType Leaf} )]
$ConfigurationFilename,
[alias("e")]
[switch]
$Evaluate,
[array]
[Parameter(ValueFromRemainingArguments=$true)]
$remaining)

function sayHelloWorld()
{
    Write-Host "Hello, everybody, the config file is <$ConfigurationFilename>."
    if ($ExitOnErrors)
    {
        Write-Host "I should mention that I was told to evaluate things."
    }
    Write-Host "I currently live here: $gScriptDirectory"
    Write-Host "My remaining arguments are: $remaining"
    Set-Content .\hello.world.txt "It worked"
}

$gScriptPath = $MyInvocation.MyCommand.Path
$gScriptDirectory = (Split-Path $gScriptPath -Parent)
sayHelloWorld 
```

...这是调用脚本的模型，在一个名为 invoker.ps1 的文件中：

```
function pokeTheInvokee()
{
    $scriptPath = (Join-Path -Path "." -ChildPath "invokee.ps1")
    $scriptPath = $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($scriptPath)

    $configPath = (Join-Path -Path "." -ChildPath "invoker.ps1")
    $configPath = $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($configPath)

    $argumentList = @()
    $argumentList += ("-ConfigurationFilename", "`"$configPath`"")
    $argumentList += , "-Evaluate"

    Write-Host "Attempting to invoke-expression with: `"$scriptPath`" $argumentList"
    Invoke-Expression "`"$scriptPath`" $argumentList"
    Invoke-Expression ".\invokee.ps1 -ConfigurationFilename `".\invoker.ps1`" -Evaluate
    Write-Host "Invokee invoked."
}

pokeTheInvokee 
```

当我运行invoker.ps1 时，这是我当前在第一次调用Invoke-Expression 时遇到的错误：

```
Invoke-Expression : You must provide a value expression on
the right-hand side of the '-' operator. 
```

第二个调用工作得很好，但一个显着的区别是第一个版本使用的参数的路径中有空格，而第二个没有。我是否错误地处理了这些路径中存在的空格？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-10-12T03:25:56.720

啊哈。原来这是一个简单的问题，即脚本路径中有空格。

将 Invoke-Expression 行更改为：

```
Invoke-Expression "& `"$scriptPath`" $argumentList" 
```

...足以让它开始。感谢 Neolisk 的帮助和反馈！

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-10-12T00:52:49.267

`Invoke-Expression`应该可以完美运行，只需确保您正确使用它。对于您的情况，它应该如下所示：

```
Invoke-Expression "$scriptPath $argumentList" 
```

我使用 Get-Service 测试了这种方法，并且似乎按预期工作。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2014-01-23T03:42:03.917

实际上要[简单得多](http://technet.microsoft.com/en-us/library/ee176880.aspx)：

**方法一：**

```
Invoke-Expression $scriptPath $argumentList 
```

**方法二：**

```
& $scriptPath $argumentList 
```

**方法三：**

```
$scriptPath $argumentList 
```

如果您的 中有空格`scriptPath`，请不要忘记转义它们``"$scriptPath`"`

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-08-19T14:06:52.817

我们可以为此使用[喷溅：](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_splatting?view=powershell-5.1&viewFallbackFrom=powershell-Microsoft.PowerShell.Core)

```
& $command @args 
```

其中`@args`（[自动变量 $args](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_automatic_variables?view=powershell-5.1)）被放入参数数组中。

在 PS 下，5.1

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-11-26T15:32:50.027

这是一个涵盖从 PS 脚本调用另一个 PS 脚本的更一般问题的答案，如果您正在编写许多小的、用途狭窄的脚本的脚本，您可能会这样做。

我发现这只是使用点源的一个案例。也就是说，您只需执行以下操作：

```
# This is Script-A.ps1

. ./Script-B.ps1 -SomeObject $variableFromScriptA -SomeOtherParam 1234; 
```

我发现所有的 Q/A 都非常混乱和复杂，最终落在了上面的简单方法上，这真的就像调用另一个脚本一样，好像它是原始脚本中的一个函数，我觉得这更直观。

点源可以“导入”整个其他脚本，使用：

```
. ./Script-B.ps1 
```

现在好像这两个文件合并了。

最终，我真正缺少的是我应该构建一个可重用函数模块的概念。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-21T11:17:40.577

我尝试了使用 Invoke-Expression cmdlet 的公认解决方案，但它对我不起作用，因为我的参数上有空格。我试图解析参数并转义空格，但我无法使其正常工作，而且在我看来，这确实是一项肮脏的工作。所以经过一些实验，我对这个问题的看法是：

```
function Invoke-Script
{
    param
    (
        [Parameter(Mandatory = $true)]
        [string]
        $Script,

        [Parameter(Mandatory = $false)]
        [object[]]
        $ArgumentList
    )

    $ScriptBlock = [Scriptblock]::Create((Get-Content $Script -Raw))
    Invoke-Command -NoNewScope -ArgumentList $ArgumentList -ScriptBlock $ScriptBlock -Verbose
}

# example usage
Invoke-Script $scriptPath $argumentList 
```

此解决方案的唯一缺点是您需要确保您的脚本没有“Script”或“ArgumentList”参数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-03T10:19:34.287

You can execute it same as SQL query. first, build your command/Expression and store in a variable and execute/invoke.

```
$command =  ".\yourExternalScriptFile.ps1" + " -param1 '$paramValue'" 
```

It is pretty forward, I don't think it needs explanations. So all set to execute your command now,

```
Invoke-Expression $command 
```

I would recommend catching the exception here

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-03-31T08:34:39.850

我假设您想从另一个 .ps1 文件运行 .ps1 文件 [此处为 $scriptPath 以及存储在 $argumentList 中的多个参数]

```
Invoke-Expression "& $scriptPath $argumentList" 
```

这段代码可以正常工作

# mysql - mysql。一列，两种不同的数据类型，多种where查询

> ID：12850488
> 
> 赞同：3
> 
> 时间：2012-10-12T00:12:40.733
> 
> 标签：mysql

我有一个mysql表结构：

```
uid     company     value 
```

说明：
uid -> unical id
company -> 公司的四字母代码，即。`AAAA`, `BIEW`
value -> 是两种不同类型数据的代码：国家或地区，其中：
国家：`"/[0-9]+\-/"`，即。*49-* , 末尾的字符`-`表示这是一个区域值
region: `"/[0-9]+\_[0-9]+/"`, 即。*49_002* , *49_4* , 字符`_`表示这是一个国家值

现在我想选择所有记录，其中：

*   有多个公司定义，即。`AAAA' OR 'BIEW'`
*   有多个国家定义，即。`'49-' OR '5698-'`
*   上述国家中的第一个已指定区域。我只想搜索`49_01`而不是`49_03`and `49_965`，它也“属于”`49-`国家
*   第二个国家`'5698-'`没有指定区域，应该只返回记录`value='5698-'`

该`AAAA`公司具有指定国家/地区记录的“过滤器”，但`BIEW`没有任何指定的国家/地区值。MYSQL 查询不能正常工作：

```
SELECT * FROM `table` WHERE (company='AAAA' OR company='BIEW') AND (value='5698-' OR value='49_01') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:33:36.253

如果我明白

```
SELECT * 
FROM `table` 
WHERE tourOP = 'AAAA' AND (val = '5698-' OR val = '49_01') OR tourOP = 'BIEW' 
```

# php - 如果用户按下浏览器的上一个按钮，则初始化表单

> ID：12850492
> 
> 赞同：0
> 
> 时间：2012-10-12T00:13:18.897
> 
> 标签：php, session-variables

我在我的主页上有一个搜索工具，它的表单包含两个链接到 ajax 的选择/选项。如果我改变国家，城镇列表也会改变。

我还有一个选择，其中包含从 1 到 5 的数字列表，允许用户使用 jquery 复制其他输入

问题是，用户倾向于点击浏览器的上一个按钮，并尝试更改其他值以进行新的研究，但例如城镇列表被堆栈为空值。此外，如果用户重复输入三次，则选择将显示 3 但没有克隆 3 个字段。

如果用户按下浏览器的上一个按钮，我想初始化我的所有字段，我试图在结果页面中保存一个 $_SESSION['result'] 变量，并在家里测试这个变量是否不为空，如果这个 var 不是，我会重定向到 home 来重置我的表单，但它对我不起作用！

```
if (!empty($_SESSION['result'])) {
header('Location: home.php');

} 
```

我怎么解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:28:54.357

这很简单:)

```
<body onload="init_form()">

function init_form()
    {
    document.forms[0].listeCity.options[0].selected = true;
    document.forms[0].sctRoom.options[0].selected = true;
    } 
```

我希望这个能帮上忙 ！

# ruby-on-rails - 如何使用 Ember.js 和 Rails 在一个请求中创建模型及其关联？

> ID：12850495
> 
> 赞同：2
> 
> 时间：2012-10-12T00:13:39.253
> 
> 标签：ruby-on-rails, ember.js

在 ember.js/ember-data.js 中，有没有办法让商店 POST 到 rails，以便它发送信息以创建模型及其关联？让我提供一些上下文。

假设我有 3 个导轨模型：

```
class Post < ActiveRecord::Base
  has_many :categorizations
  has_many :categories, :through => :categorizations

  attr_accessible :categories_attributes

  accepts_nested_attributes_for :categories
end

class Categories < ActiveRecord::Base
  has_many :categorizations
  has_many :posts, :through => :categorizations
end

class Categorizations < ActiveRecord::Base
  belongs_to :post
  belongs_to :categories
end 
```

在 ember.js 中，我希望能够在一个请求中创建一个帖子及其分类。这就是我为实现这一目标所做的事情：

```
App.Category = DS.Model.extend
  name: DS.attr 'string'

App.Categorization = DS.Model.extend
  post: DS.belongsTo 'App.Post'
  category: DS.belongsTo 'App.Category'

App.Post = DS.Model.extend
  title: DS.attr 'string'
  content: DS.attr 'string'
  categorizations: DS.hasMany 'App.Categorization',
    embedded: true
  toJSON: (options={}) ->
    options.associations = true
    @_super(options)

# meanwhile, somewhere else in code...

post = App.store.createRecord App.Post,
  title: "some title"
  content: "blah blah"

transaction = App.store.transaction()
categorization = transaction.createRecord App.Categorization,
  category: category # an instance of DS.Category

post.get('categorizations').pushObject categorization

# XXX: This enables ember-data to include categorizations in the post hash when
# POSTing to the server so that we can create a post and its categorizations in
# one request. This hack is required because the categorization hasn't been
# created yet so there is no id associated with it.
App.store.clientIdToId[categorization.get('clientId')] = categorization.toJSON()
transaction.remove(categorization)

App.store.commit() 
```

我正在努力做到这一点，以便当 App.store.commit() 被调用时，它会通过以下方式发布到 /posts：

```
{
  :post => {
    :title => "some title",
    :content => "blah blah,
    :categorizations => [ # or :categorizations_attributes would be nice
      {
        :category_id => 1
      } 
    ]
  }
} 
```

有没有办法在没有 ember POST 到 categorizations_controller 来创建分类的情况下实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:34:50.010

你应该看看`RESTAdapter`它的`bulkCommit`选项做了什么。旨在与 Rails 一起使用`RESTAdapter`，但您可能需要在 Rails 端进行一些配置以完全支持它。请参阅[https://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/rest_adapter.js](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/rest_adapter.js)

# types - 如何在 TypeScript 中注释递归类型？

> ID：12850499
> 
> 赞同：10
> 
> 时间：2012-10-12T00:14:06.570
> 
> 标签：types, typescript

如果我有这样的功能：

```
function say(message: string) {
    alert(message);
    return say;
} 
```

它有一个有趣的属性，我可以将调用链接到它：

```
say("Hello,")("how")("are")("you?"); 
```

如果我将数字传递给第一次调用，编译器将生成警告，但它允许我将数字放入后续调用中。

```
say("Hello")(1)(2)(3)(4) 
```

当我将无效类型传递给链式调用时，我需要向`say`函数添加什么类型注释以使编译器生成警告？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-12T00:40:13.623

引用自身的类型必须有名称。例如，

```
interface OmegaString {
    (message: string): OmegaString;
} 
```

然后您可以注释`say`为`OmegaString`,

```
function say(message: string): OmegaString {
    alert(message);
    return say;
} 
```

那么下面的代码将进行类型检查。

```
say("Hello,")("how")("are")("you?"); 
```

但以下不会，

```
say("Hello")(1)(2)(3)(4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-01T06:44:24.317

# 可链接的方法

当您使用类而不是函数时，您可以使用`this`类型来表示方法返回调用它的实例的事实*（链接方法）*。

没有`this`：

```
class StatusLogger {
    log(message: string): StatusLogger { ... }
}
// this works
new ErrorLogger().log('oh no!').log('something broke!').log(':-(');

class PrettyLogger extends StatusLogger {
    color(color: string): PrettyLogger { ... }
}
// this works
new PrettyLogger().color('green').log('status: ').log('ok');
// this does not!
new PrettyLogger().log('status: ').color('red').log('failed'); 
```

与`this`：

```
class StatusLogger {
    log(message: string): this { ... }
}
class PrettyLogger extends StatusLogger {
    color(color: string): this { ... }
}
// this works now!
new PrettyLogger().log('status:').color('green').log('works').log('yay'); 
```

# 可链接功能

当函数可链接时，您可以使用接口键入它：

```
function say(text: string): ChainableType { ... }
interface ChainableType {
    (text: string): ChainableType;
}
say('Hello')('World'); 
```

# 具有属性/方法的可链接函数

如果函数具有其他属性或方法（例如`jQuery(str)`vs `jQuery.data(el)`），您可以将函数本身键入为接口：

```
interface SayWithVolume {
    (message: string): this;
    loud(): this;
    quiet(): this;
}

const say: SayWithVolume = ((message: string) => { ... }) as SayWithVolume;
say.loud = () => { ... };
say.quiet = () => { ... };

say('hello').quiet()('can you hear me?').loud()('hello from the other side'); 
```

# logback - 如何将 syslog4j 与 logback 一起使用

> ID：12850501
> 
> 赞同：1
> 
> 时间：2012-10-12T00:14:32.343
> 
> 标签：logback

我正在使用 logback 进行日志记录。我想使用 syslog4j 本地登录到 syslog。（因为我不想打开 udp 端口​​来登录到 syslog）我可以使用 syslog4j 作为 logback 的附加程序吗？如果没有，是否有任何其他方式使用 logback 登录 syslog 而无需打开 udp 端口​​，即使用本机 unix 套接字！

谢谢苏曼思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:56:21.463

不幸的是，Logback 中的 SyslogAppender 不支持除 UDP syslog 协议以外的任何东西。

我还没有尝试过，但是为 Logback 编写一个 Syslog4jAppender 可能很简单（我很惊讶没有其他人已经这样做了）

尚未回答，但问题“ [https://stackoverflow.com/questions/12905480/using-syslog4j-as-an-appender-to-logback](https://stackoverflow.com/questions/12905480/using-syslog4j-as-an-appender-to-logback) ”将涵盖您想要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:13:35.483

我认为您正在寻找[SyslogAppender](http://logback.qos.ch/manual/appenders.html#SyslogAppender)

这里的配置示例[logback-syslog.xml](https://github.com/qos-ch/logback/blob/master/logback-examples/src/main/java/chapters/appenders/conf/logback-syslog.xml)

# scala - scala中的基准测试

> ID：12850503
> 
> 赞同：7
> 
> 时间：2012-10-12T00:14:42.607
> 
> 标签：scala, benchmarking

> **可能重复：**
> [如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)

假设我有两种算法，我如何找出哪一种具有更高的性能？

我的意思是我可以在数学上证明它，但如果我使用一些库，这可能会变得乏味。我从来没有学会如何在没有数学的情况下进行正确的基准测试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T04:14:31.637

快速的方法是使用`testing.Benchmark`：你只需编写类似的东西

```
object Bench extends testing.Benchmark {
  // initialize your data here
  def run() {
    // code to benchmark here
  }
} 
```

您使用类似的东西运行它`scala Bench 5 1000000`（或直接从您的 IDE，编辑运行配置），它为您提供 5 组 1000000 次重复该`run()`方法的时间。您可以比较每组的时间并检查它是否一致（由于 JVM 预热，第一组通常较慢）。

有关使用 Java 微基准测试框架 Caliper 的更严格的方法，请参阅此博客文章： http: [//www.decodified.com/scala/2011/04/19/microbenchmarking-scala-code](http://www.decodified.com/scala/2011/04/19/microbenchmarking-scala-code)。

# python-3.x - 如何在cygwin下为window中的eclipse配置python32解释器？

> ID：12850504
> 
> 赞同：0
> 
> 时间：2012-10-12T00:14:47.880
> 
> 标签：python-3.x, cygwin

我已经看到新的 cygwin for window 包含 python3.2 文件。

`python3.2.exe`windows下cygwin下的文件在哪里？我需要它在窗口中为 Eclipse 配置解释器，但我没有看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:46:01.710

大概在`/usr/bin`，或者在windows中`{Cygwin Install directory}\bin`。例如：`D:\Cygwin\bin\`

确保您`python3.2.exe`在 Cygwin 仿真层内运行。

# c# - C#：使用列表作为字典值。值不会存储在字典中

> ID：12850510
> 
> 赞同：1
> 
> 时间：2012-10-12T00:16:01.327
> 
> 标签：c#, list, dictionary

我在处理这段代码时遇到了麻烦。我是 C# 的新手，但从我到目前为止所做的事情来看，我得出的结论是字典只是引用，实际上并不存储数据？

```
 foreach (Microsoft.Office.Interop.Excel.Range row in range1.Rows)
            {
                string upc;
                upc = row.Cells[1, 2].Value2;
                list.Add(upc);
                list.Add(row.Cells[1, 3].Value2);
                list.Add("6");

                //add row to dictionary
                dictionary.Add(row.Cells[1, 1].Value2, list); 
```

}

在这个例子中，如果我对 range1 中的每一行保持这个循环，它会将每一行的数据添加到列表中。IE，字典中的最后一项将包含范围内所有行的每个属性。我尝试在每次迭代后清除列表，但是字典报告说没有任何价值，让我相信我必须为每个字典条目创建一个单独的列表？我该怎么做，这是最有效的方法吗？似乎有些不对劲。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T00:20:01.277

看起来您的代码中只有一个列表，并且对它的引用存储为每个字典键的值。您想在每次循环迭代时创建一个新列表并将其添加到字典中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T00:40:43.403

您不太了解的问题`List<T>`是引用类型。这意味着当您将它存储在某个位置时，无论是类中的属性还是作为 a 中的值`Dictionary<TKey,List<T>>`，任何更改都会影响保存引用的每个位置中的列表。例如：

```
List<String> list = new List<String>();
Dictionary<Int32, List<String>> dict = new Dictionary<Int32, List<String>>();

for (int i = 0; i < 3; i++)
{
    list.Add("String" + i);
    dict.Add(i, list);
} 
```

这有点接近你想要做的事情。

但是如果你把输出写出来：

```
foreach (var kvp in dict)
{
    Console.WriteLine("Key: {0}", kvp.Key);

    foreach (var item in kvp.Value)
    {
        Console.WriteLine("    Value: {0}", item);        
    }
} 
```

如果我正确地阅读了您的期望，我认为您认为会出现以下情况：

```
Key: 0
    Value: String0
Key: 1
    Value: String0
    Value: String1
Key: 2
    Value: String0
    Value: String1
    Value: String2
Key: 3
    Value: String0
    Value: String1
    Value: String2
    Value: String3 
```

但实际输出是：

```
Key: 0
    Value: String0
    Value: String1
    Value: String2
    Value: String3
Key: 1
    Value: String0
    Value: String1
    Value: String2
    Value: String3
Key: 2
    Value: String0
    Value: String1
    Value: String2
    Value: String3
Key: 3
    Value: String0
    Value: String1
    Value: String2
    Value: String3 
```

这是因为您正在为每个键添加**相同**的列表到字典中，并且无论何时进行更改，无论是添加新值还是清除它（使用`List.Clear()`），您都在更改同一列表的每次出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T00:28:15.777

`Dictionary`不是参考，但在这种情况下，它包含*参考*。

`Lists`也不是“引用”，但它们是通过引用访问和操作的。如果您将 a 添加`List`到某物，则会添加对 that 的引用，`List`而不是副本。

引用类型通常仅在您明确指定要复制或创建新实例时才被复制。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-12T00:21:32.673

`Dictionary<string, List<string>>`应该是字典。您的代码应该可以工作。如果字典有键，.Add 将抛出异常。确保字典在循环之外。

# c - fgets 被通过

> ID：12850513
> 
> 赞同：0
> 
> 时间：2012-10-12T00:16:14.057
> 
> 标签：c

`M x N`它是一个整数矩阵。

*   我要求自动填充或手动填充。
*   我选择自动，它会填充。
*   然后我测试矩阵以查看其列 (1) 或行 (0) 是否为回文（例如：）`1 2 9 2 1`。
*   我要求重新启动或退出。

如果我重新启动，矩阵会自动填充，这就是我不明白为什么会发生的原因，因为`fgets`它在 while 内并且应该始终执行。

函数`llenar_matriz`，第 4 行。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <string.h>

#define COL 5
#define FIL 5

int reiniciar( void );
void llenar_matriz( int mat[ FIL ][ COL ] );
void imprimir_matriz( int mat[ FIL ][ COL ] );
int matriz_palindrome( int mat[ FIL ][ COL ], int tipo );

int main () {
    do {
        int mat[ FIL ][ COL ] = {0};
        llenar_matriz( mat );
        if ( matriz_palindrome( mat, 1 ) ) {
            puts( "Las columnas de la matriz son palindromos" );
        }
        else {
            puts( "Las columnas de la matriz no son todas palindromos" );
        }
    } while( reiniciar() );
    system( "pause" );
}

void imprimir_matriz( int mat[ FIL ][ COL ] ) {
    int i, j;
    for( i = 0; i < FIL; i ++ ) {
        for( j = 0; j < COL; j++ ) {
            printf( "%4d", mat[ i ][ j ] );
        }
        printf( "\n" );
    }
}

void llenar_matriz( int mat[ FIL ][ COL ] ) {
    char rta[3];
    int i, j;
    printf( "Desea llenar la matriz automaticamente? Si / No\n" );
    while( fgets( rta, 3, stdin ) == NULL ) {
        fflush( stdin );
        printf( "Ocurrio un error al obtener su respuesta. Intente nuevamente.\n" );
    }
    if( strcmp( rta, "No" ) == 0 | strcmp( rta, "no" ) == 0 ) {
        for( i = 0; i < FIL; i++ ) {
            for( j = 0; j < COL; j++ ) {
                printf( "Ingrese el valor de la posicion %d, %d\n", i+1, j+1 );
                while( scanf( "%d", &mat[ i ][ j ] ) == NULL ) {
                    fflush( stdin );
                    puts( "Hubo un error al obtener su respuesta. Intente nuevamente" );
                }
                imprimir_matriz( mat );
            }
        }
    }
    else {
        srand( time(NULL) );
        for( i = 0; i < FIL; i++ ) {
            for( j = 0; j < COL; j++ ) {
                mat[ i ][ j ] = rand() % 99 + 1;
            }
        }
        imprimir_matriz( mat );
    }
    fflush( stdin );
}

int reiniciar( void ) {
    char rta[3];
    int centinel = 0;
    puts( "Desea reiniciar la prueba? Si / No" );
    do{
        while( fgets( rta, 3, stdin ) == NULL ) {
            fflush( stdin );
            printf( "Ocurrio un error al obtener su respuesta. Intente nuevamente.\n" );
        }
        if( strcmp( rta, "Si" ) == 0 | strcmp( rta, "si" ) == 0 ) {
            return 1;
        }
        else {
            if( strcmp( rta, "No" ) == 0 | strcmp( rta, "no" ) == 0 ) {
                return 0;
            }
            else {
                printf( "Respuesta incorrecta. Intente nuevamente.\n" );
                centinel = 1;
            }
        }
        fflush( stdin );
    } while( centinel );
}

int matriz_palindrome( int mat[ FIL ][ COL ], int tipo ) {
    int i, j;
    if( tipo == 0 ) {
        for( i = 0; i < FIL; i++ ) {
            for( j = 0; j <= COL/2; j++ ) {
                if( mat[ i ][ j ] != mat[ i ][ COL - j - 1] ) {
                    return 0;
                }
            }
        }
    }
    if( tipo == 1 ) {
        for( i = 0; i < COL; i++ ) {
            for( j = 0; j <= FIL/2; j++ ) {
                if( mat[ j ][ i ] != mat[ FIL - j - 1 ][ i ] ) {
                return 0;
            }
            }
        }
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:26:16.540

问题是函数 reiniciar() 中的 fflush(stdin) 没有被读取，因为该函数将返回前几行中的值。所以我把它移到`return 1`了`reiniciar`函数的前面，它解决了。

# java - 由于权限被拒绝，在 hadoop.tmp.dir /tmp/hadoop-sha 中创建临时目录时出错

> ID：12850514
> 
> 赞同：0
> 
> 时间：2012-10-12T00:16:31.433
> 
> 标签：java, debugging, hadoop, mapreduce, cloudera

在 hadoop 集群上运行 java map reduce 代码时收到以下错误消息：

```
-sh-3.2$ hadoop jar PearsonSim1.jar PearsonSim.PearsonDriver1 /user/sha/data/rating_sample_item /user/sha/cf/PearsonSim1 
```

“由于权限被拒绝，在 hadoop.tmp.dir /tmp/hadoop-sha 中创建临时目录时出错”

有没有人遇到过这样的问题？我想知道我的代码是否有任何问题，或者只是帐户权限设置。我的代码在 Cloudera 的 CDH3 VM 上运行良好。

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:39:22.963

`hadoop.tmp.dir`作业客户使用它来组装您的作业类/文件等，然后将它们发送到作业跟踪器。

为了让您收到此错误消息，以下情况之一可能是正确的：

作为当前用户，您没有 /tmp 目录的写入和执行权限。尝试在 /tmp 中手动创建一个目录，看看是否收到错误消息。如果这样做，则需要打开该文件夹的权限 ( `sudo chmod a+rwx /tmp`)

如果没问题，那么目录 /tmp/hadoop-sha 是否已经存在，您是否有权写入该文件夹？

# iphone - iPhone 应用程序添加新的入口行

> ID：12850520
> 
> 赞同：0
> 
> 时间：2012-10-12T00:17:36.800
> 
> 标签：iphone, ios, xcode

我是 ios 应用程序开发的新手，我一直在开发一个小应用程序，您可能会在下面看到我附上了我的代码。我要做的是在应用程序底部添加一个按钮，以允许用户在每次点击按钮时添加另一行，另一行将包括另外 3 列，每次点击按钮时添加一个新行我希望总数（在这种情况下为 c & d）遵循与代码中相同的模式。将权重（textField2 和 textField3）乘以（x）的数量：并添加到先前的总数（c 和 d）。任何帮助或建议将不胜感激。谢谢。

**例子：**

数量：10

姓名 总重量

10 100

b 5 150

** 我现在想给用户添加另外 3 列并继续的选项**

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (IBAction)calculate {
    float x = ([textField1.text floatValue]);

float c = x*([textField2.text floatValue]);
float d = c+x*([textField3.text floatValue]);

label.text = [[NSString alloc] initWithFormat:@"%2.f", c];
label2.text = [[NSString alloc] initWithFormat:@"%2.f", d];}

- (void)viewDidLoad
{
    [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T04:45:50.153

您正在寻找的那种基于动态列表的绘图更适合 UITableViews，而不仅仅是将标签放入视图中。如果您继续将标签添加到视图，您最终将耗尽空间，除非您使用的视图是 UIScrollView，否则您将无法向下滚动以查看其他结果。

我认为，对 UITableViews 的介绍有点超出我可以在这里输入的范围，但你可以在网上找到很多好的教程——这里有一个来自 GitHub 的示例代码：[https ://github.com/vladexogija/ UITableView-介绍](https://github.com/vladexologija/UITableView-introduction)

在您对表格视图有所了解之后，在这种情况下，我会：您添加的其他行只是表格视图中的单元格，您希望在最后添加的按钮应该是在 UIView 中并分配为表格的页脚视图。

# office-interop - 如何使用 Outlook interpo 更新服务器和登录信息

> ID：12850521
> 
> 赞同：1
> 
> 时间：2012-10-12T00:17:49.390
> 
> 标签：office-interop, outlook-addin

我需要创建一个应用程序，允许我更改 Outlook 中所有 pop3 帐户的服务器信息和凭据。

我能够像这样拉出一些东西：

```
Outlook.Application oapp = new Outlook.Application[];
Outlook.Accounts accounts = oapp.Session.Accounts;

foreach (Outlook.Account account in accounts) {
    MessageBox.Show(account.SmtpAddress);
    Marshal.ReleaseComObject(account);
}

Marshal.ReleaseComObject(accounts);
Marshal.ReleaseComObject(oapp); 
```

但是我找不到访问和更改所需信息的方法，即：

*   接收邮件服务器
*   对外邮件服务器
*   用户名和密码

# sql-server-2008 - SSRS - 组表达式总计的总计

> ID：12850524
> 
> 赞同：2
> 
> 时间：2012-10-12T00:18:13.983
> 
> 标签：sql-server-2008, reporting-services

我的组总数是一个表达式，它从数据集“dataset1.x”的组的`[Hours1]`第一个值中减去最后一个值。`[Hours1]``[EquipmentName1]`

我需要一个 Grand Total 每个设备的组表达式总计

我无法使用相同的公式从数据集“dataset1”的第一个 [Hours1] 值中减去最后一个 [Hours1] 值，因为。

如果我有 2 件设备，比如 Equipment1 和 Equipment2：

```
Equipment1 last [Hours1] = 10000 and first [Hours1] = 9500
Equipment2 last [Hours1] = 10500 and first [Hours1] = 10000 
```

如果我使用从数据集的`[Hours1]`第一个值中减去最后一个值的公式，则公式将为 10500 - 9500`[Hours1]``"dataset1"`

但是，我想要：

```
(10000 - 9500) + (10500 - 10000) = Grand Total 
```

下面是尝试绘制我的表格的一部分

```
|_[Hours1]_|  =  Fields!Hours1.Value    
(e.g. 9500)

|___Expr___|  =  Last(Fields!Hours1.Value) - First(Fields!Hours1.Value) 
(e.g. 10000 - 9500 = 500)

|__________|  =  I need to total the value of Expr for all pieces of equipment 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:02:40.733

您需要使用一些自定义代码来实现这一点。

转到`Report -> Report Properties -> Code`并输入

```
Dim grandTotal As Integer;
Function AccumulateTotal(value as Integer)
    grandTotal = grandTotal + value
    return value
End Function

Function GetTotal()
    return grandTotal
End Function 
```

然后在文本框上你需要调用累加函数

```
=Code.AccumulateTotal(Last(Fields!Hours1.Value) - First(Fields!Hours1.Value)) 
```

在 Grand Total 文本框中，您调用 get total 函数

```
=Code.GetTotal() 
```

# asp.net - 在 ASP.NET 中用 PlaceHolder 控件替换 HTML

> ID：12850528
> 
> 赞同：0
> 
> 时间：2012-10-12T00:18:37.867
> 
> 标签：asp.net, placeholder

有没有办法在运行时读取一些 HTML 并用 PlaceHolder 控件动态替换该 HTML？

例如，我有一些 HTML 包含诸如 ##MainContent## 或 ##SideContent## 之类的标签。

我需要以某种方式找到每个标签并动态添加一个 asp:PlaceHolder 控件。

编辑 - 这样做的原因是读取 HTML，然后将控件动态添加到页面的一部分。我正在尝试创建一个 CMS 系统，尽管我不确定这是最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:55:03.697

我希望这是一个思想练习。:)

理想情况下，您应该只用`<asp:PlaceHolder>`控件替换标记中的这些标签。如果您不能这样做（无论出于何种原因），请尝试用`<asp:Literal>`控件替换它们：

```
<asp:Literal ID="litMainContent" runat="server" Text="##MainContent##"><asp:Literal>
<asp:Literal ID="litSideContent" runat="server" Text="##SideContent##"><asp:Literal> 
```

这样，它们仍然会像现在一样在页面上呈现。然后你应该能够在你的代码隐藏中使用`litMainContent`和：`litSideContent`

对于 VB.Net：

```
Dim phMainContent As PlaceHolder = New PlaceHolder
Dim phMainContent As PlaceHolder = New PlaceHolder

litMainContent.Controls.Add(phMainContent)
litSideContent.Controls.Add(phSideContent) 
```

对于 C#.Net

```
PlaceHolder phMainContent = new PlaceHolder();
PlaceHolder phMainContent = new PlaceHolder();

litMainContent.Controls.Add(phMainContent);
litSideContent.Controls.Add(phSideContent); 
```

# java - 搜索文本中的 Java RegEx 单引号失败模式

> ID：12850529
> 
> 赞同：1
> 
> 时间：2012-10-12T00:18:38.967
> 
> 标签：java, regex

当我的文本有单引号时，模式会失败。

我试图用 Perl 来解决它，`\\Q`但是`\\E`模式编译失败了。

例如

用于图案`"(?i)Name is\\b(\\w+)\\b"`

如果 text 是`"My name is Foampile X"`，我得到一个匹配。但是因为`"My name is 'Foampile'"`我没有比赛。

我该怎么做才能像对待任何其他字符一样对待文本中的单引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:24:40.347

我觉得在任何情况下你都得到一个匹配很奇怪，因为你忽略了前面的空格`Foampile`（`\b`不消耗一个字符）。请注意，`\w`不匹配引号，而仅匹配`[a-zA-Z0-9_]`. 因此，根据您是否要包含引号，您可以尝试其中一种：

```
"(?i)Name is\\W+(\\w+)"
or
"(?i)Name is\\W+?('?\\w+'?)" 
```

如果您想断言名称仅由一个空格分隔，无论是否使用引号，这些可以简化为：

```
"(?i)Name is '?(\\w+)'?"
or
"(?i)Name is ('?\\w+'?)" 
```

**如果**您的问题实际上意味着您只是在不带引号的情况下进行了测试，但您的实际目标是只接受引号中的名称，那么您可以忽略`?`后面的所有内容`'`。

但是，第一个变体将起作用，无论是否有任何非单词字符将名称与句子的其余部分分隔开来。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T00:23:28.507

字符类`\w`是任何字母。您将需要扩展您的正则表达式以包含其他可能性：

```
"Name is [\w']+" 
```

这为正则表达式提供了一组可能的值来扩展，包括字母或引号。但是，强制使用正确引用的名称并不是精确匹配。那看起来更像：

```
"Name is ['"]?[\w']+['"]?" 
```

# html - 填充时绝对定位的元素离开屏幕

> ID：12850531
> 
> 赞同：5
> 
> 时间：2012-10-12T00:18:48.813
> 
> 标签：html, css, css-position

我有一个 DIV 容器，`.floatingPage`它绝对位于其他两个 DIV 容器`.top`和`.bottom`. 我的问题是`.floatingPage`元素的内容是动态的，*有时*包含大量数据，这些数据延伸`.floatingPage`到屏幕的可见部分下方。

```
.top { 
  height:350px; 
  background:'images/background.png'; 
  position:relative; 
}

.bottom { 
  height:350px; 
  background:#F1F1F1; 
}

.floatingPage { 
  position:absolute; 
  top:50px; 
}
```

```
<div class="top">
    <div class="floatingPage">
        // blah blah blah (lots of data)
    </div>
</div>
```

现在，因为我知道我的应用程序的用户使用 JS（公司控制面板），所以我一直在计算`.floatingPage`元素的高度并扩展高度`.bottom`以适应新内容。到目前为止，这一直没问题，并且已经开始引起问题。另外，我不想为其他没有 JS 的用户的项目做这个 hack。

我需要这个`floatingPage`元素浮在其他两个之上——这就是网站设计的重点。在没有 JS 的情况下，如何保持这种影响但防止它从页面上消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:22:34.403

试试这个：

```
.top { 
  height:350px; 
  background:'images/background.png'; 
  position:relative; 
}

.bottom { 
  height:350px; 
  background:#F1F1F1; 
}

.floatingPage { 
  position:absolute; 
  top      : 50px; 
  bottom   : 50px;
  overflow : auto;
}
```

```
<div class="top">
    <div class="floatingPage">
        // blah blah blah (lots of data)
    </div>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:20:44.340

您是否尝试过为 .floatingPage 元素指定底部而不是顶部的绝对定位？

例如：

```
.floatingPage { position:absolute; bottom:10px; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T00:22:34.990

您是否尝试过使用溢出属性并设置 DIV 的高度？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T00:24:21.343

如果您需要元素浮动在其他两个的顶部，请尝试添加 z-index 并使用溢出。

这是一个 jsfiddle：http: [//jsfiddle.net/k8w79/](http://jsfiddle.net/k8w79/)

# asp.net-mvc - 模型属性为空

> ID：12850534
> 
> 赞同：0
> 
> 时间：2012-10-12T00:19:21.683
> 
> 标签：asp.net-mvc

我正在尝试从 webForms 迁移到 Asp.net-MVC 并且遇到了一些问题。我试图弄清楚为什么这不起作用，我收到此错误：“**对象引用未设置为对象的实例**”

**我有“页面”类：**

```
namespace _2send.Model
{   
    public class Pages
    {        
        public string PageContent { get; set; }        
        public string PageName { get; set; }       
        public int LanguageId { get; set; }      
    }    
} 
```

**我正在使用此类将值插入到“Pages.PageContent”属性中：**

```
namespace _2send.Model.Services
{
    public class PagesService : IPagesService
    {
        public void GetFooterlinksPage()
        {

            DB_utilities db_util = new DB_utilities();           
            SqlDataReader dr;

            Pages pages = new Pages();

            using (dr = db_util.procSelect("[Pages_GetPageData]"))
            {
                if (dr.HasRows)
                {
                    dr.Read();
                    pages.PageContent = (string)dr["PageContent"];
                    dr.Close();
                }                
            }

        } 
```

**控制器方法如下所示：**

```
private IPagesService _pagesService;
    public FooterLinksPageController(IPagesService pagesService)
    {
        _pagesService = pagesService;
    }

public ActionResult GetFooterLinksPage()
        {            
            _pagesService.GetFooterlinksPage();
            return View();      
        } 
```

**我正在尝试在视图中编写属性，如下所示：**

```
@model _2send.Model.Pages
<div>
    @Model.PageContent;
</div> 
```

调试时，该方法被触发并且 dataReader 将值插入到“PageContent”属性中，但我仍然从视图中收到此错误。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T00:20:37.347

```
return View(); 
```

你没有通过模型。

您需要将模型作为参数传递给`View()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T01:36:11.130

您可以返回一个模型：

```
var viewmodel = new _2send.Model.Pages().
//here you configure your properties

return View(viewmodel); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T06:50:53.273

您需要重写服务方法以返回页面：

```
 public Pages GetFooterlinksPage()
    {

        DB_utilities db_util = new DB_utilities();           

        Pages pages = new Pages();

        using (var dr = db_util.procSelect("[Pages_GetPageData]"))
        {
            if (dr.HasRows)
            {
                dr.Read();
                pages.PageContent = (string)dr["PageContent"];                    
                return pages;
                // Because you use using, you don't need to close datareader
            }                
        }
    } 
```

然后重写你的动作方法：

```
 public ActionResult GetFooterLinksPage()
    {            
        var viewmodel = _pagesService.GetFooterlinksPage();
        return View(viewmodel);      
    } 
```

# python - graphics.py 中的错误消息

> ID：12850535
> 
> 赞同：0
> 
> 时间：2012-10-12T00:19:25.227
> 
> 标签：python, graphics

我是一名正在学习 python 的高中生，我对为什么在这个脚本中收到错误消息感到有点困惑。它应该提示用户输入他们的年龄信息，然后以天、小时和分钟为单位返回信息。我正在使用 Graphics.py 模块来完成此操作。我得到的错误是：

```
how old are you.py", line 17, in <module>
    years=entry1.getText()
AttributeError: 'NoneType' object has no attribute 'getText' 
```

我知道该模块已正确安装，因为 getText 函数适用于另一个脚本。我的代码如下所示。谢谢你的帮助！

```
from graphics import*

win=GraphWin('How Old Are You?',250,500)
win.setBackground ('Gray')

entry1= Entry(Point(125,100),10).draw(win)
entry2= Entry(Point(125,200),10).draw(win)
entry3= Entry(Point(125,300),10).draw(win)

Text(Point(125,50),'How many years old are you?').draw(win)
Text(Point(125,150),'What month in the year? (number)').draw(win)
Text(Point(125,250),'How many weeks into the month?').draw(win)
Text(Point(125,25),'When done click outside a box').draw(win)

win.getMouse()

years=entry1.getText()
months=entry2.getText()
days=entry3.getText()

totalDays=(years*365)+(months*30)+(days)
totalHours=((years*365)+(months*30)+(days))*24
totalMinutes=(((years*365)+(months*30)+(days))*24)*60

Text(Point(125,350),totalDays)
Text(Point(125,400),totalHours)
Text(Point(125,450),totalMinutes) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T00:26:04.837

我不知道`graphics`您正在使用的库，但您的错误似乎试图一次完成太多。

你做：

```
entry1= Entry(Point(125,100),10).draw(win)
entry2= Entry(Point(125,200),10).draw(win)
entry3= Entry(Point(125,300),10).draw(win) 
```

在这里的每一行中，您确实创建了一个对象 - 通过调用`Entry(...)`, 并调用该对象的方法。方法的返回值`draw`最终存储在变量中。

通常，在 Python 对象中，方法不会返回它们的对象。如果该方法确实执行了`draw`建议的操作（如名称），它通常会返回`None`- 这就是这里发生的事情，正如我们在您的错误消息中看到的那样。

所以，你所要做的就是首先创建你的条目，然后调用`draw`它们的方法：

```
entry1= Entry(Point(125,100),10)
entry2= Entry(Point(125,200),10)
entry3= Entry(Point(125,300),10)
entry1.draw(win)
entry2.draw(win)
entry3.draw(win) 
```

除此之外，如果您不希望您的代码如此重复，您可以在循环中创建条目并将它们存储在 Python 列表中：

条目 = []

```
for vpos in (100,200,300):
    entry = Entry(Point(125,vpos),10)
    entries.append(entry)
    entry.draw(win)

Text(Point(125,50),'How many years old are you?').draw(win)
Text(Point(125,150),'What month in the year? (number)').draw(win)
Text(Point(125,250),'How many weeks into the month?').draw(win)
Text(Point(125,25),'When done click outside a box').draw(win)

win.getMouse()

years, months, days = (entry.getText() for entry in entries) 
```

# objective-c - NSObject 用法：创建、继承和修改

> ID：12850540
> 
> 赞同：-2
> 
> 时间：2012-10-12T00:19:46.867
> 
> 标签：objective-c, ios

我对 Objective-C 的语法非常有经验，但缺乏它的对象部分是如何工作的（是的，我知道，它不好）。我想知道一些事情：

1.  如何创建对象。
2.  如何使它从其他类（即 UIView）继承某些属性。
3.  如何在其中制作自己的属性（即健康、伤害、耐力）。

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T00:55:13.313

在阅读已经发布的文档之前要查看一些示例：实例化一个类：

```
SomeClass *instantOfSomeClass = [[SomeClass alloc] init]; 
```

要继承属性，您可以对其进行子类化。要添加自定义属性，请在您的子类中指定它们。

```
@interface SomeClassThatExtendsUIView : UIView
@property NSInteger health;
@property NSInteger damage;
@property NSInteger stamina;
@end

@implementation SomeClassThatExtendsUIView
// if not using auto synthesize
@synthesize health = _health;
@synthesize damage = _damage;
@synthesize stamina = _stamina;
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:10:19.193

**如何创建对象。**

对象是面向对象编程的概念，但实际上可以将其定义为类的实例。

根据您想要的对象类型，有几种方法可以创建它。然而，它们都可以用一个简单的 alloc - init 创建

一般来说应该是：

```
ClassName *objectName = [[ClassName alloc] init]; 
```

**如何使它从其他类（即 UIView）继承某些属性。**

当您对它们进行子类化时，它们会继承这些属性。例如：

```
@interface UIView : UIResponder 
```

是 UIResponder 的子类，它是 NSObject 的子类：

```
@interface UIResponder : NSObject 
```

如果您想使用 UIView 的属性创建自己的“对象”，您只需执行以下操作：

```
@interface customView : UIView 
```

*在您的自定义类*的标题上。

xcode 通过让您在创建新类时选择超类来方便地进行子类化。如果你这样做，它甚至会给你一个常用覆盖方法的模板。

**如何在其中制作自己的属性（即健康、伤害、耐力）。**

一旦您将自定义类创建为您想要的任何内容的子类，您只需在头文件中添加您自己的属性：

自定义视图.h：

```
@interface CustomViewClass : UIView

@property (strong, nonatomic) UIButton *customButton;

- (void)someCustomMethod;

@end 
```

然后，当您想使用它时，您只需

```
CustomViewClass *customView = [[CustomViewClass alloc] init]; 
```

并且您的自定义视图也可以访问通常的 UIView 属性和 customButton 属性。

（实际的 uiview 类默认构造函数是 initWithFrame 但您也可以通过这种方式初始化它并稍后设置框架）命令单击任何 UIView 声明，您将看到：

```
- (id)initWithFrame:(CGRect)frame;          // default initializer 
```

希望这可以帮助

# google-chrome - 在 PC 上使用 Chrome

> ID：12850544
> 
> 赞同：1
> 
> 时间：2012-10-12T00:20:26.627
> 
> 标签：google-chrome, haml, erb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T23:06:48.867

也许在其他浏览器中 multiple: 'some_string' 验证为 true 但通常你想要这个：

```
%input{type: "file", name: "file", class: "native-file-input", multiple: true} 
```

# c# - 使用未知 dll 从文件中读取字节数组

> ID：12850549
> 
> 赞同：0
> 
> 时间：2012-10-12T00:21:08.967
> 
> 标签：c#, bytearray

[这是我使用未知 dll 从字符串中写入字节数组后的](https://stackoverflow.com/questions/12847498/writing-a-byte-array-from-as-string-using-an-unknown-dll/12847610#12847610)下一个问题

所以我设法写了字节数组，现在我想用同一个 dll 读回它。

我尝试了以下方法：

```
int BufSize = 60000000;  // Size of file I/O buffers.
int BufSizeM1M = BufSize - 1000000; // The max amount of data read in at any one time.
using (WinFileIO WFIO = new WinFileIO())
{
    WFIO.OpenForReading(path);
    WFIO.ReadBlocks(BufSizeM1M);
    WFIO.Close();
    WFIO.Dispose();
} 
```

这是 WinFileIO.ReadBlocks 函数：

```
public int ReadBlocks(int BytesToRead)
        {
            // This function reads a total of BytesToRead at a time.  There is a limit of 2gb per call.
            int BytesReadInBlock = 0, BytesRead = 0, BlockByteSize;
            byte* pBuf = (byte*)pBuffer;
            // Do until there are no more bytes to read or the buffer is full.
            do
            {
                BlockByteSize = Math.Min(BlockSize, BytesToRead - BytesRead);
                if (!ReadFile(pHandle, pBuf, BlockByteSize, &BytesReadInBlock, 0))
                {
                    Win32Exception WE = new Win32Exception();
                    ApplicationException AE = new ApplicationException("WinFileIO:ReadBytes - Error occurred reading a file. - "
                        + WE.Message);
                    throw AE;
                }
                if (BytesReadInBlock == 0)
                    break;
                BytesRead += BytesReadInBlock;
                pBuf += BytesReadInBlock;
            } while (BytesRead < BytesToRead);
            return BytesRead;
        } 
```

我的问题是，如何使用该功能来读取实际文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:03:56.590

要尝试在稍微更高的抽象级别上回答您的问题，如果您正在使用“未知”.NET 程序集，您可以尝试的一件事是反编译程序集并从源代码中找出发生了什么。

反编译比听起来容易。[只需使用免费工具ILSpy](http://ilspy.net/)打开程序集 (DLL) 。然后，您可以查看您尝试在 C#（甚至 CIL）中使用的方法的源代码。

查看源代码可以让您了解正在使用 .NET 基类库的哪些部分，并为此查阅文档，或者甚至在此处发布另一个关于您不理解的源代码的问题。

如果没有该来源，我们所能做的就是猜测未知程序集支持的可能 API 和工作流程。

尽管上面有我的建议，但这是我的猜测：

*   看起来您正在尝试`BufSizeM1M`从文件中读取字节而不检查它是否包含那么多数据。

以下是对您的代码的其他一些评论：

*   您正在调用`WFIO.Dispose();`，但`WFIO`它是在 using 语句中创建的，因此该行是不必要的（但这不会是错误）。
*   `WFIO.Close()`当您还处理对象时，它可能（并且可取）是多余的。

**编辑：**

所以看起来像`WinFileIO.ReadBlocks`使用 Win32[`ReadFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467%28v=vs.85%29.aspx)函数将`BytesToRead`字节读入指向的缓冲区`pBuffer`。我想您需要找到另一种方法来`WinFileIO`访问缓冲区。诀窍是查看哪些其他方法对`pBuffer`. 例如，可能有一个方法可以将它转换为 a`byte[]`并像这样返回给你，它可能看起来像这样：

```
public byte[] GetBuffer()
{
    byte[] bytes=new byte[length];
    for(int i=0; i<length; i++)
    {
        bytes[i]=Marshal.ReadByte(pBuffer,i);
    }
    return bytes;
} 
```

# python - PostgreSQL for Django on Elastic Beanstalk

> ID：12850550
> 
> 赞同：5
> 
> 时间：2012-10-12T00:21:15.210
> 
> 标签：python, django, postgresql, amazon-elastic-beanstalk

I'm reading conflicting reports about using PostgreSQL on Amazon's Elastic Beanstalk for python (Django).

Some sources say it isn't possible: (http://www.forbes.com/sites/netapp/2012/08/20/amazon-cloud-elastic-beanstalk-paas-python/). I've been through a dummy app setup, and it does seem that MySQL is the only option (amongst other ones that aren't Postgres).

However, I've found fragments around the place mentioning that it is possible - even if they're very light on detail.

I need to know the following:

1.  Is it possible to run a PostgreSQL database with a Django app on Elastic Beanstalk?
2.  If it's possible, is it worth the trouble?
3.  If it's possible, how would you set it up?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-27T21:07:49.970

现在可以从 AWS RDS 配置中选择 Postgre。通过 Elastic Beanstalk 应用程序设置 2014-01-27 验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T09:40:32.690

> 是否可以在 Elastic Beanstalk 上使用 Django 应用程序运行 PostgreSQL 数据库？

是的。您提到的虚拟应用程序设置是指使用 Amazon Relational Database Service。目前 PostgreSQL 不能用作 Amazon RDS，但您可以将 beanstalk AMI 配置为本地 PostgreSQL 服务器或设置您自己的 PostgreSQL RDS。

> 如果可能，是否值得麻烦？

这确实是一个关于是否值得使用 RDS 还是单独使用 RDS 的问题，归结为成本、工作量、使用、所需效率等问题。切换为 django 服务的数据库引擎非常简单，所以如果你改变主意切换设置很容易。

> 如果可能，你会如何设置它？

本质上，您需要通过在 Amazon linux EB 支持的 AMI 实例上安装 PostgreSQL 数据库服务器来自定义 beanstalk AMI。

有关自定义 beanstalk AMI 的建议/说明在这里：

[http://blog.jetztgrad.net/2011/02/how-to-customize-an-amazon-elastic-beanstalk-instance/](http://blog.jetztgrad.net/2011/02/how-to-customize-an-amazon-elastic-beanstalk-instance/)

[https://forums.aws.amazon.com/thread.jspa?messageID=219630姮](https://forums.aws.amazon.com/thread.jspa?messageID=219630&#219630)

[自定义 Elastic Beanstalk AMI](https://stackoverflow.com/questions/12002445/customizing-an-elastic-beanstalk-ami?rq=1)

# java - Is there a Netflix video library?

> ID：12850551
> 
> 赞同：-3
> 
> 时间：2012-10-12T00:21:17.723
> 
> 标签：java, netflix

Is there a Java library to download movie data from Netflix? I'm not just talking about the tags, but the actual movie itself. I've tried Googling it but I can't find anything.

Edit: I want to stream it, not download it. Sorry for the confusion.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T00:33:39.170

不。

无法下载 Netflix 电影。Netflix 点播服务上的电影可用于流媒体播放。Netflix 和电影的版权持有者都不想给你自己的永久副本。

# ruby - 使用 shopify_api Ruby gem 创建带有图像的新产品

> ID：12850554
> 
> 赞同：3
> 
> 时间：2012-10-12T00:22:00.407
> 
> 标签：ruby, shopify

Shopify 有一个 RESTful API 和一个方便的 shopify_api ruby​​ gem，我已经使用它们来更新库存水平。

今天我必须做一些新的事情，用图像创建一个新产品，我想使用 shopify_api gem 而不是使用 rest-client 或 httparty 之类的东西来与 API 交互。

Shopify API 支持同时创建具有默认变体的新产品和将由 Shopify 使用此调用下载的产品图像：

**发布 /admin/products.json**

使用 JSON 请求字符串：

```
{
  "product": {
    "title": "Burton Custom Freestlye 151",
    "body_html": "<strong>Good snowboard!</strong>",
    "vendor": "Burton",
    "product_type": "Snowboard",
    "images": [
      {
        "src": "http://example.com/rails_logo.gif"
      }
    ]
  }
} 
```

问题是如何使用 shopify_api gem 做到这一点？

干杯，

马库斯

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T10:30:51.203

我找到了一种不优雅的方法来做到这一点。请参阅下面的解决方案：

```
images = []
image = {}
image["src"] = "http://i.dailymail.co.uk/i/pix/2012/09/10/article-0-14EE3D4E000005DC-303_634x434.jpg"

images << image

variant = ShopifyAPI::Variant.new(
  :price                => 69.99,
  :inventory_management => 'shopify',
  :inventory_quantity   => 69, 
  :sku => "MS_TEST"
)

product = ShopifyAPI::Product.new(
:title => "MS Test",
:body_html =>  "<strong>Good snowboard!</strong>",
:vendor => "MS Test",
:product_type => "MS Test",
:images => images,
:variants => variant
) 
```

# codeigniter - db active records

> ID：12850555
> 
> 赞同：0
> 
> 时间：2012-10-12T00:22:10.727
> 
> 标签：codeigniter

I'm trying to get some data from my database with active records,and I'm having the following problem. I wanna learn how to do it with active records since after this code i have a ton of joins and other stuff. Otherwise I would write a normal query.

```
 $this->db->where("sa.country", $country);

         // I NEED TO OPEN BRACKETS HERE SO THAT I CAN GET THE LANGUAGES IF THERE IS DATA IN ONE OF THE ARRAYS

        if (isset($lid[0]))$this->db->where("sa.lang", $lid[0]);
        if (isset($lid[1]))$this->db->or_where("sa.lang", $lid[1]);
        if (isset($lid[2]))$this->db->or_where("sa.lang", $lid[2]);
        if (isset($lid[3]))$this->db->or_where("sa.lang", $lid[3]);
        if (isset($lid[4]))$this->db->or_where("sa.lang", $lid[4]);

        //AND CLOSE THEM HERE 
```

My goal is to get a specific country from db, with the corresponding languages that are in the arrays.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:01:21.477

这有帮助吗？

```
$this->db->where("sa.country", $country);

// loop through *set* languages
foreach($lid as $item)
{
    $this->db->where('sa.lang', $item);
}

// will return a query object
return $this->db->get('my_table'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T06:15:54.100

我认为你应该使用`WHERE...IN...`！请参阅[有关“在哪里”的](http://www.w3schools.com/sql/sql_in.asp)帮助。

使用 ActiveRecord：

```
$this->db->where_in("sa.lang",$lid); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T04:21:28.433

这是我为对解决方案感兴趣的任何人解决问题的方法。

```
$this->db->where("(`sa`.`lang` = '$lid[0]' OR `sa`.`lang` = '$lid[1]' OR `sa`.`lang` = '$lid[2]' OR `sa`.`lang` = '$lid[3]' OR `sa`.`lang` = '$lid[4]')"); 
```

# unix - how to append to an existing line using sed

> ID：12850556
> 
> 赞同：2
> 
> 时间：2012-10-12T00:22:17.907
> 
> 标签：unix, scripting, sed

I would like to output a file's contents appended with a string without creating a new line.

so far my command places the appended string on a new line:

```
sed -e 'a foo' file.txt
>> file contents...
>> foo 
```

I want the output to look like this:

```
>> file contents...foo 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T00:34:25.313

使用`sed`（在`Archlinux`&上成功测试`Minix`）：

```
sed '$s/$/foo/' file.txt 
```

`$`开头，意思是***文件****的结尾***。**

 **如果您需要在每行添加*foo ：*

```
sed 's/$/foo/' file.txt 
```

在最新的上下文中，`$`平均***行****尾***

# c - input from command-line argument works, but input from internal char* gives Bus Error. Shouldn't it be identical?

> ID：12850557
> 
> 赞同：0
> 
> 时间：2012-10-12T00:22:24.250
> 
> 标签：c, bus

I wrote a function that will take a `char*` representing a binary number, and add one to that number. I've encountered a very confusing error, which is that the function works fine and dandy when the `char*` comes from user input when calling the function (a.k.a. `argv[1]`), but gives me a `Bus error: 10` when I instead initialize the variable internally and pass it to the same function. I'm not sure what's behind this, so I turn to you guys. Here's my code:

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void addOneBinaryMain(char* strBiNum, int index)
{
    if (strBiNum[index] == '0' || index == 0) { //BUS ERROR OCCURS HERE
        strBiNum[index] = '1';
        return;
    } else {
        strBiNum[index] = '0';
        addOneBinaryMain(strBiNum, index - 1);
    }
}

void addOneBinary(char* strBiNum)
{
    addOneBinaryMain(strBiNum, strlen(strBiNum)-1);
}

int main(int argc, char* argv[]) {
    char* str = argv[1];
    char* strZero = "00000000";
    int i;

    printf("%s\n", str);
    printf("%s\n", strZero);

    addOneBinary(str);
    printf("added one to input string: %s\n", str); //succeeds
    addOneBinary(strZero);
    printf("added one to internal zero string: %s\n", strZero);

    return 0;
} 
```

Following around the error with print statements, it seems that it occurs in the `addOneBinaryMain` function (the recursive step), at the point I've marked.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:27:54.090

`strZero`指向一个不能改变的常量字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T00:30:45.423

strZero 只是用您的文字字符串“000000”的地址初始化的一个点。这个文字字符串存储在应用程序内存中只读的位置（如果我没记错的话，认为它被称为**静态存储**）。

尝试在堆栈或堆上声明一个 char 数组并使用 strcpy 将 strZero 复制到它。

# html-table - IE9，将表格复制到记事本之类的TextEditor，表格结构丢失

> ID：12850565
> 
> 赞同：0
> 
> 时间：2012-10-12T00:23:52.703
> 
> 标签：html-table, copy, internet-explorer-9, paste

一个非常简单的案例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<body>
<table><tr><td>1</td><td>2</td></tr><tr><td>3</td><td>4</td></tr></table>
</body>
</html> 
```

在IE9中渲染页面，将表格复制出来，粘贴到记事本之类的文本编辑器中，你会发现输出是

```
1
2
3
4 
```

不好，我在火狐和其他浏览器中测试过，它们可以将 1 & 2 (3 & 4) 渲染成一行。

此外，如果我将 IE9 更改为 QuirksMode，它看起来会运行良好。

如何在IE9标准模式下正确复制表格，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:49:11.107

似乎您可以在页面上[添加](http://www.alistapart.com/articles/beyonddoctype)HTTP`X-UA-Compatible` *标头*或*元标记*（在 HTML5 中无效）时保留原始文档类型选择。

也就是说，这似乎可以解决您在 IE9 中的复制/粘贴问题，同时仍会在其他浏览器中触发标准[模式：](http://hsivonen.iki.fi/doctype/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8">
<body>
<table><tr><td>1</td><td>2</td></tr><tr><td>3</td><td>4</td></tr></table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:17:25.760

IE9 在涉及表格时存在空格问题......

尝试：

```
<table>
    <tr>
        <td>1</td>
        <td>2</td>
    </tr>
    <tr>
        <td>3</td>
        <td>4</td>
    </tr>
</table> 
```

让我知道这是否适合您！

# esb - Mule ESB 3.3“全部”流弄乱了下游组件的有效负载

> ID：12850566
> 
> 赞同：1
> 
> 时间：2012-10-12T00:24:06.957
> 
> 标签：esb, mule, synchronous, payload

编辑：简化问题。

为什么写入的文件是垃圾（二进制序列化数据）而不是在 Groovy 组件中设置的有效负载？仅当存在“全部”流组件时才会发生这种情况。

流动：

![在此处输入图像描述](../Images/eb0a36dd6b0a44979750925210e6c66e.png)

XML:

```
<file:connector name="OutputFile" autoDelete="true" streaming="true" validateConnections="true" doc:name="File" writeToDirectory="#{systemProperties['user.home']}"/>
<flow name="AllProblemFlow1" doc:name="AllProblemFlow1">
    <vm:inbound-endpoint exchange-pattern="one-way" path="in" doc:name="VM"/>
    <all doc:name="All">
        <processor-chain>
            <scripting:component doc:name="Groovy">
                <scripting:script engine="Groovy">
                    <scripting:text><![CDATA[return payload + 1]]></scripting:text>
                </scripting:script>
            </scripting:component>
        </processor-chain>
        <processor-chain>
            <scripting:component doc:name="Groovy">
                <scripting:script engine="Groovy">
                    <scripting:text><![CDATA[return payload + 2]]></scripting:text>
                </scripting:script>
            </scripting:component>
        </processor-chain>
    </all>
    <logger message="All payload: #[payload]" level="INFO" doc:name="Logger"/>
    <scripting:component doc:name="Groovy">
        <scripting:script engine="Groovy">
            <scripting:text><![CDATA[return "new payload"]]></scripting:text>
        </scripting:script>
    </scripting:component>
    <file:outbound-endpoint responseTimeout="10000" connector-ref="OutputFile" doc:name="File" outputPattern="output.txt" path="#{systemProperties['user.home']}"/>
</flow> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:26:09.500

这是非常棘手的：`all`消息处理器将飞行中的 Mule 消息的本质从 a`MuleMessage`更改为 a `MuleMessageCollection`。更改 a 上的有效负载`MuleMessageCollection`基本上是无效的。

您需要`MuleMessageCollection`用全新的`MuleMessage`. 为您的最后一个 Groovy 组件使用以下代码：

```
<scripting:text><![CDATA[
    return new org.mule.DefaultMuleMessage("new payload", muleContext)
]]></scripting:text> 
```

# python - 在视图函数中获取请求对象，但从 `manage.py shell` 调用

> ID：12850567
> 
> 赞同：0
> 
> 时间：2012-10-12T00:24:06.987
> 
> 标签：python, django

当我从视图函数中打印请求对象时，`views.py`我得到一个类似字典的`django.core.handlers.wsgi.WSGIRequest`对象（继承自`django.http.HttpRequest`）。从视图函数打印这个类似字典的对象会返回一堆值，尤其是对于`META`键。

现在我想从`manage.py shell`我的项目中调用相同的数据，但`handlers`不是`django.core`shell 中的属性，所以我无法获取`django.core.handlers.wsgi.WSGIRequest`对象。有没有办法像在我的视图函数中那样获取请求对象，但从`manage.py shell`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T05:01:47.357

由于您的目标是“*复制请求对象并从外壳中对其进行自省*”，因此完成对请求对象的摆弄的最简单方法是使用调试器。

将以下内容复制粘贴到您的视图中并重新加载：

```
import pdb; pdb.set_trace() 
```

现在重新加载指向该视图的页面，您可以使用[PDB 的调试器命令](http://docs.python.org/library/pdb.html#debugger-commands)来执行您的内容。例如，在视图函数中，您可以使用`p request`打印请求的值，也可以执行标准 python 代码：

```
(Pdb) path = request.META['USERNAME']
(Pdb) h p
p expression
Print the value of the expression.
(Pdb) p path
'Caspar'
(Pdb) from foo.models import MyUser
(Pdb) MyUser.objects.all()
[<MyUser: Bob: 3.62810036125>, <MyUser: Tim: no rating>, <MyUser: Jim: 2.41014167534>, <MyUser: Rod: 1.35651839383>] 
```

更好的是，安装[`ipdb`](http://pypi.python.org/pypi/ipdb)( `pip install ipdb`)，它可以让您使用更好的[IPython](http://ipython.org/) shell，具有精美的颜色和制表符补全。

或者，如果您不需要调试器而只需要一个交互式控制台，请安装 IPython ( `pip install ipython`) 并使用以下代码段：

```
import IPython; IPython.embed() 
```

请注意，IPython 是 ipdb 的先决条件，因此安装 ipdb 也会安装 IPython。

# system - 如何计算我提出的拓扑中的 HOP 数，是否有任何网络模拟器可以做到这一点？

> ID：12850574
> 
> 赞同：2
> 
> 时间：2012-10-12T00:25:18.720
> 
> 标签：system, distributed

我提出了一个新的拓扑，并且需要知道网络中另一个节点与一个节点通信的平均跳数，有没有专门针对它的软件？

谢谢

# node.js - 如何在本地服务器上启动 Nodejs、Express、Jade webapp

> ID：12850576
> 
> 赞同：0
> 
> 时间：2012-10-12T00:25:30.150
> 
> 标签：node.js, express

我在 MacOSX 计算机上获得了一个高级项目，该项目使用 Node.js、Express 和 Jade。我对每个概念都有一点熟悉，但对任何一个都没有经验。我还发现 MAMP 在应用程序所在的开发机器上运行。我对如何启动或运行应用程序一无所知。文件和数据库在那里，我知道如何让 MAMP 运行，但似乎文件未定位或与 MAMP 位置无关。

我对终端也不是很熟悉。我想知道我应该运行什么来让 web 应用程序显示在 web 浏览器上（现在在本地）。

我已经看到该应用程序在 localhost 和一个端口上运行，但它现在不会运行。

我想我还没有开始做一些事情，但老实说，我不知道我在寻找什么以及如何运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T00:33:35.350

Node.JS 应用程序不需要网络服务器，例如 Apache。应用程序通常是服务器本身。

通常，您会像这样启动 Node 应用程序：

```
node yourApplication.js 
```

如何通过浏览器访问该应用程序取决于该应用程序的编写方式。没有真正的标准，但它只是 JavaScript，所以如果你是一名程序员，你应该能够相当容易地阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:04:02.710

安装节点后，表示启动e很容易:)

在所选文件夹中：

表达 npm install node app.js

你将启动并运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T13:40:58.897

确保已经安装了*Nodejs*、*Express*和*Jade ！*

要启动本地服务器，您需要在空文件夹中创建**app.js**文件，例如在**myApp**文件夹中。将此代码复制到您的**app.js**：

```
var express = require('express');
var app = express();
//Middleware
app.listen(3000)

app.configure(function(){
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
});

app.get('/', function(){
    res.render('index', {option: 'value'});
}); 
```

从**myApp**文件夹：`express npm superApp`. 您可以将**superApp**替换为您喜欢的任何名称。然后键入`cd superApp && npm install`，您必须自动重新定位到**myApp/superApp**。键入`npm install`，然后您可以通过键入来运行服务器`node app.js`（您应该在**myApp/superApp 中**）。服务器现在必须正在运行，转到[http://localhost:3000/](http://localhost:3000/)并检查。如果你看到类似的东西：

*“Express 500 错误：/home/.../myApp/superApp/views/layout.jade:1 > 1| !!! 2| html 3| head 4| title= title`!!!`已弃用，您现在必须使用`doctype`”*

只需更改`!!!`为`doctype`layout.jade **。**

最后你应该看到这条消息：

"***快递***

*欢迎来到快递*》

`node app.js`现在，您只需从**myApp/superApp**键入即可运行服务器。

# configuration - 如何在加载时配置 AngularJS 应用程序？

> ID：12850588
> 
> 赞同：6
> 
> 时间：2012-10-12T00:26:59.467
> 
> 标签：configuration, angularjs, dry, bootstrapping

我想做这样的事情（但显然不是这样，因为这个功能不能这样工作）

```
angular.bootstrap( $("#myelement"), ['myModule'], {foo: bar} ); 
```

我想传入一个配置对象，因为我们可能希望在页面上有多个应用程序实例，具有不同的设置等。我能想到的只是丑陋的解决方法。我认为最好的办法是覆盖我自己制作的“选项”服务，但我仍然无法找出正确的方法来做到这一点（简而言之）。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T01:29:46.480

你试试这样的事情怎么样：

```
angular.module('configFoo', []).run(function() {});

angular.module('configBar', []).run(function() {});

angular.bootstrap(myEl, ['myModule', 'configFoo']);

angular.bootstrap(myOtherEl, ['myModule', 'configBar']); 
```

[http://docs.angularjs.org/api/angular.Module](http://docs.angularjs.org/api/angular.Module)获取所有可用的模块方法（您可能只对 .run() 和 .config() 感兴趣）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T08:56:24.037

这是一个工作代码：http: [//jsfiddle.net/x060aph7/](http://jsfiddle.net/x060aph7/)

```
angular.module('myModule', [])
    .controller('myController', function($scope,myConfig) {            
        $scope.name = 'inst '+myConfig.foo;
    })
;

var aConfig = [{foo:1},{foo:2},{foo:3}];
aConfig.forEach(function(config){
    angular.module('fooConfig',[]).value('myConfig', config);
    angular.bootstrap(getDiv(), ['myModule','fooConfig']);
});

function getDiv(){
    var mDiv = document.createElement('div');
    mDiv.setAttribute('ng-controller','myController');
    mDiv.innerHTML = '<span>{{name}}</span>';
    document.body.appendChild(mDiv);
    return mDiv;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-14T07:12:18.247

以下示例帮助我们将小部件引导到页面。首先制作了一个 div - 使用一点 jQuery - 让小部件加载带有 . 的模板`ng-include`，它由`WidgetLogoController`. 接下来`WidgetConfig`创建一个包含小部件配置的模块。

```
$('#pageWidget').html(`<ng-include src="'/dist/templates/widgetLogo.html'"></ng-include>`)
    .attr('ng-controller','WidgetLogoController');

    var widgetConfig = {
        'widgetId': data.pageWidgetId,
        'areaId': data.area,
        'pageId': data.pageId
    };
    angular.module('WidgetConfig', []).value('WidgetConfig', widgetConfig);
    angular.bootstrap(document.getElementById('pageWidget'), ['Widget', 'WidgetConfig']); 
```

`Widget`模块包括`WidgetConfig`配置，但也有自己的位置`CONFIG`：

```
(function (window, angular) {

    'use strict';

    window.app = angular.module('Widget', ['ngFileUpload', 'WidgetConfig'])

    .constant('CONFIG', {
        BASE_URL: 'http://osage.brandportal.com/'
    });

})(window, angular); 
```

`WidgetController`可以访问`CONFIG`和`WidgetConfig`。

```
(function (app) {

    'use strict';

    app.controller('WidgetLogoController', ['CONFIG', 'WidgetConfig', 
        function(CONFIG, WidgetConfig){

            console.log('---WidgetLogoController');
            console.log('CONFIG', CONFIG);
            console.log('WidgetConfig', WidgetConfig);

        }]);

}(app)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-20T18:13:11.110

关于什么：

1.  加载配置而不是加载角度：

    ```
    angular.element(document).ready(() => {
    $.get('config', // url to my configuration 
           {},
           function (data) {
               window.config = data;
               angular.bootstrap(document, ['myApp']);
            }
        );
    }); 
    ```

2.  访问配置：

    ```
    angular.module('myApp').run(myAppRun);

    function myAppRun($window) {
        $window.config; // here I have config
    } 
    ```

# c# - 捕获笔迹并将其转换为输入文本的最佳方法

> ID：12850590
> 
> 赞同：2
> 
> 时间：2012-10-12T00:27:10.607
> 
> 标签：c#, kinect

我想编写一个程序，它使用 Kinect 捕捉运动，然后保存运动路径，然后将创建的图像转换为文本。

我不确定 OCR 是否是最好的方法，因为图像质量很可能会很低。

有没有人可以建议的系统。还有关于如何实现它的任何提示。干杯

编辑：

Windows Journal 几乎完全符合我的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:29:43.040

你需要一个像 Kinect 这样的传感器并使用它的 API 来捕捉动作。这对于传感器和动作捕捉技术来说是非常具体的。我认为你不能使用 C# 编写没有第三方 API 的动作捕捉技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:29:55.840

我看不到 Kinect 在这里能给你带来的好处。

您必须首先定义该系统将具有什么样的输入：例如是字符的 RGB 图像还是更复杂的东西，例如随时间跟踪的手部位置？

如果您想将 Kinect 用于其深度图，那么您尝试做的似乎更像是手势识别（并将每个手势映射到字符）而不是 OCR。

***编辑手势识别方式：***

我自己还没有在这方面实施任何事情，所以我真的不能给你明确的方向或建议。有几篇关于该主题的论文[（谷歌学者搜索）](http://scholar.google.com/scholar?q=gesture+recognition+kinect&btnG=&hl=en&as_sdt=0%2C44)利用可用的深度信息而不是使用 2D 图像。我猜想 DIY 方法是为每个手势获取尽可能多的训练样本，训练你的分类器（[关于监督学习的维基百科](http://en.wikipedia.org/wiki/Supervised_learning)），然后测试你的新样本。

如果您不喜欢冒险，可以从测试一些现有的代码示例开始：

*   *OpenNI*的手部跟踪示例——你可以[在这里](http://vimeo.com/21401266)看到一个例子，我认为它也可以识别一些手势——。
*   [Candescent NUI](http://candescentnui.codeplex.com/) “使用 Kinect 深度数据进行手和手指跟踪”，我认为它不包含任何识别，但也许它可以帮助您获得更好的数据。
*   [Kinect for Windows Developer Kit](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)可能包含一些有用的东西，但说实话我还没有检查过。

我可以看到手势识别方法非常棘手。手势之间必须存在显着差异，否则，考虑到 Kinect 低分辨率和噪音问题，即使您获得大量训练样本，它仍然可能失败。例如，想象一下写“i”或“l”。或者'o'和'a'之间的区别（当然取决于你的笔迹）。规模如此之小，手的移动如此微不足道，以至于我不知道一个分类器——即使是一个强大的分类器——是否能捕捉到这种变化。

# ruby-on-rails - ruby on rails：多态关联

> ID：12850591
> 
> 赞同：1
> 
> 时间：2012-10-12T00:27:13.497
> 
> 标签：ruby-on-rails, polymorphic-associations

在[Ruby on Rails Guide](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)中，是`imageable`一个模型吗？并且`imageable`有数据库表吗？

如何`imageable_id`指向`id`Employee 和 Product 的两个不同属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T00:34:55.060

不，在您链接的页面中， imageable 表示与 Employee 或 Product 的多态关联。为了使多态关联起作用，rails 需要通过查看 db 中的“imageable_type”条目，然后查看相应对象的 id（imageable_id）来确定对象的“类型”（即员工或产品） ）。

例如，imageable_type => 'Employee' 和 imageable_id => '4' 的 db 中的条目。ActiveRecord 会发现该关联与employees 表中的id 4 相关联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T05:53:36.643

imageable_type 帮助 Rails 了解模型属于哪个类。如果您使用`imageable:references`然后生成模型，那么 rails 将在您的迁移中自动生成 imageable_id 和 imageable_type 列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T00:32:16.923

Imageable 不是模型。它是某些模型的占位符（在本例中为 Employee 或 Product）。

`imageable_id`可以指向不同类型id的方式是Picture也有一个属性`imageable_type`。对于一个给定的 Picture 实例，它`imageable_id`通过查看它的`imageable_type`.

# jquery - 通过 Ether Builder 实现的 Colorbox 将 div 布局抛出 1 个像素

> ID：12850592
> 
> 赞同：1
> 
> 时间：2012-10-12T00:27:19.737
> 
> 标签：jquery, colorbox, pixel

因此，在 Catalyst 中，我使用了 Ether Builder，它利用 Colorbox 作为它的首选灯箱（足够复杂？）要在 Colorbox 中打开的图像的任何实例都会引发 2px 的对齐。此处示例：[http ://www.artifaktory.com/work/design/bollard/](http://www.artifaktory.com/work/design/bollard/)

任何想法可能会发生什么？

# c++ - C++ 成员函数未声明错误，当它看起来是

> ID：12850598
> 
> 赞同：0
> 
> 时间：2012-10-12T00:28:00.310
> 
> 标签：c++, function, private-members, function-declaration

我收到错误：

cs163hw1.cpp:41:24: 错误：没有在类“menutype”中声明的“int menutype::run_prog()”成员函数</p>

和

main.cpp:18:7: 错误：“struct menutype”没有名为“run_prog”的成员</p>

尝试使用相关代码（跨越 appriprait .cpp 和 .h 文件）编译我的程序时：

```
int main(int argc, char ** argv){
...
menu.run_prog();
...

class menutype{
public:
  menutype(int);
  int display();
  int run_prog();
private:
  extras list;
  person menup;
};

int menutype::run_prog(){
bool exit = false;
int input;
while(!exit){
    input = 0;
    while(input < 1 || input > 4)
        input = display();
    switch(input){
        case 1 : 
            break;
        case 2 :
            break;
        case 3 :
            break;
        case 4 : exit = true;
            break;
        default :
            break;
    }
}
} 
```

我不知道为什么会这样，有什么猜测吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:27:15.103

你需要有`class menutype`上面声明的main()。更好的办法是将类移动到其自己的名为 menutype.cpp 的专用文件中，并将标头包含在 main 的源文件中。正如您所描述的，编译器在从文件顶部解析源文件时还不知道菜单类型。

# android - 精灵不会在 cocos2d for android 中移动

> ID：12850603
> 
> 赞同：0
> 
> 时间：2012-10-12T00:28:21.280
> 
> 标签：android, cocos2d-iphone, cocos2d-android

我在使用 cocos2d for Android 时遇到问题。我尝试了多种方法，但似乎无法让精灵在屏幕上移动。两张图片都显示了，但电脑精灵没有移动。运行代码时没有出现任何错误，但是除了显示没有移动的两张图片之外，什么也没有发生。

```
 package com.example.minigameapp;

import java.util.Random;

import org.cocos2d.actions.instant.CCCallFuncN;
import org.cocos2d.actions.interval.CCMoveTo;
import org.cocos2d.actions.interval.CCSequence;
import org.cocos2d.layers.CCColorLayer;
import org.cocos2d.layers.CCScene;
import org.cocos2d.nodes.CCDirector;
import org.cocos2d.nodes.CCSprite;
import org.cocos2d.types.CGPoint;
import org.cocos2d.types.CGSize;
import org.cocos2d.types.ccColor4B;

import android.util.Log;

public class GameLayer extends CCColorLayer{
    CCSprite _player;
    CCSprite _computer;
    public static CCScene scene()
    {
        CCScene scene = CCScene.node();
        CCColorLayer layer = new GameLayer(ccColor4B.ccc4(255, 255, 255, 255));

        scene.addChild(layer);

        return scene;
    }

    protected GameLayer(ccColor4B color)
    {
        super(color);
        this.setIsTouchEnabled(true);
        CGSize winSize = CCDirector.sharedDirector().displaySize();

        _player = CCSprite.sprite("race_car2.png");
        _computer = CCSprite.sprite("race_car.png");
        _player.setPosition(CGPoint.ccp(_player.getContentSize().width / 2.0f, winSize.height / 2.0f));
        _computer.setPosition(CGPoint.ccp(_computer.getContentSize().width / 2.0f,winSize.height / 2.0f + _player.getContentSize().height*3));

        addChild(_player);
        addChild(_computer);
        this.schedule("moveComputer",1.0f);
    }
    public void moveComputer(){
        CGSize winSize = CCDirector.sharedDirector().displaySize();
        float finalX=winSize.width;

        // Determine speed of the target
        Random rand = new Random();
        int minDuration = 2;
        int maxDuration = 15;
        int rangeDuration = maxDuration - minDuration;
        //int actualDuration = rand.nextInt(rangeDuration) + minDuration;
        int actualDuration=1;

        Log.d("GameLayer","Set Action");
        //CCMoveTo actionMove = CCMoveTo.action(actualDuration, CGPoint.ccp(-computer.getContentSize().width / 2.0f, finalX));
        //CCCallFuncN actionMoveDone = CCCallFuncN.action(this, "spriteMoveFinished");
        //CCSequence actions = CCSequence.actions(actionMove, actionMoveDone);
        //computer.runAction(actions);
        CGPoint point = CGPoint.ccp(finalX,winSize.height / 2.0f + _player.getContentSize().height*3);
        CCMoveTo actionMove = CCMoveTo.action(10, point);
        _computer.runAction(actionMove);
        Log.d("GameLayer", "Start Moving");
    }

    public void spriteMoveFinished(Object sender)
    {
        Log.d("GameLayer", "Finished Moving");
        //CCSprite sprite = (CCSprite)sender;
        //this.removeChild(sprite, true);
        this.removeChild(_computer, true);
        Log.d("GameLayer", "Remove Sprite");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T05:52:36.683

你已经固定了 CGPoint 的位置

```
CGPoint point = CGPoint.ccp(finalX,winSize.height / 2.0f + _player.getContentSize().height*3);
        CCMoveTo actionMove = CCMoveTo.action(10, point); 
```

您还必须在每个计划中更改 CGPoint 值。

您的计划方法正在运行，但每次调用方法时 CG 点值都相同，并且您使用了 CCMoveTo 将精灵移动到屏幕上的特定位置。所以精灵已经在你想要移动的位置，所以看起来静止（未移动）。

每次调用调度方法时更改 CGPoint 值...

您可以通过将 CGPoint 值替换为

```
CGPoint point = CGPoint.ccp(finalX+(100*Math.random()),winSize.height / 2.0f + player.getContentSize().height*3+(100*Math.random())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:26:00.173

一个小错误，即在`moveComputer()`你没有传递`argumets.pass`像下面这样的参数时，你的对象会移动

```
public void moveComputer(float dt)
{
  //
} 
```

# python - 如何在 WTForms 中生成动态字段

> ID：12850605
> 
> 赞同：18
> 
> 时间：2012-10-12T00:28:42.203
> 
> 标签：python, flask, wtforms

我正在尝试根据本文档[http://wtforms.simplecodes.com/docs/1.0.2/specific_problems.html#dynamic-form-composition在具有动态字段的 WTForms 中生成一个表单](http://wtforms.simplecodes.com/docs/1.0.2/specific_problems.html#dynamic-form-composition)

我有这个子表单类，它允许用户从列表中选择要购买的项目：

```
class Item(Form):
    itmid = SelectField('Item ID')
    qty = IntegerField('Quantity')

class F(Form):
        pass 
```

会有不止一个类别的购物项目，所以我想根据用户将选择的类别生成一个动态选择字段：

```
fld = FieldList(FormField(Item))
fld.append_entry() 
```

但我收到以下错误：

```
AttributeError: 'UnboundField' object has no attribute 'append_entry' 
```

我做错了什么，还是没有办法在 WTForms 中做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-06T05:04:36.877

我今晚遇到了这个问题并以这个结束。我希望这对未来的人有所帮助。

### 食谱表格.py

```
class RecipeForm(Form):
    category = SelectField('Category', choices=[], coerce=int)
    ... 
```

### 视图.py

```
@mod.route('/recipes/create', methods=['POST'])
def validateRecipe():
    categories = [(c.id, c.name) for c in g.user.categories.order_by(Category.name).all()]
    form = RecipeForm(request.form)
    form.category.choices = categories
    ...

@mod.route('/recipes/create', methods=['GET'])
def createRecipe():
    categories = [(c.id, c.name) for c in g.user.categories.order_by(Category.name).all()]
    form = RecipeForm(request.form)
    form.category.choices = categories
    return render_template('recipes/createRecipe.html', form=form) 
```

我发现这篇[文章](https://stackoverflow.com/a/11377216/873559)也很有帮助

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-19T23:06:22.420

```
class BaseForm(Form):
    @classmethod
    def append_field(cls, name, field):
        setattr(cls, name, field)
        return cls

from forms import TestForm
form = TestForm.append_field("do_you_want_fries_with_that",BooleanField('fries'))(obj=db_populate_object) 
```

我对所有表单都使用扩展类**BaseForm**并在类上有一个方便的 append_field 函数。

返回附加字段的类，因为（表单字段的）实例不能附加字段。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-12T07:14:23.803

在没有编写完整代码或测试代码的情况下发布，但也许它会给你一些想法。此外，这可能仅有助于填充所需的数据。

您需要填写`choices`才能`SelectField`看到数据并能够选择它。你在哪里填写？初始填充应该在表单定义中，但如果您喜欢动态填充，我建议您在创建此表单以显示给用户的地方对其进行修改。就像您执行某些操作`form = YourForm()`然后将其传递给模板的视图一样。

如何用选项填写表单的选择字段？你必须有元组列表，然后是这样的：

```
form.category_select.choices = [(key, categories[key]) for key in categories]
form.category_select.choices.insert(0, ("", "Some default value...")) 
```

`categories`这里必须是包含您的类别的字典，格式如下`{1:'One', 2:'Two',...}`

因此，如果您在定义表单时将某些内容分配给选择，它将从一开始就拥有该数据，并且您需要在哪里拥有用户类别，只需在视图中覆盖它即可。

希望这会给你一些想法，你可以继续前进:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-11T20:03:16.630

您是否尝试过调用`append_entry()`表单实例而不是 FieldList 定义？

```
class F(Form)
  fld = FieldList(SelectField(Item))

form = F()
form.fld.append_entry() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-08T13:22:27.570

这就是我让它工作的方式。

```
class MyForm(FlaskForm):
    mylist = SelectField('Select Field', choices=[])

@app.route("/test", methods=['GET', 'POST']
def testview():
    form = MyForm()
    form.mylist.choices = [(str(i), i) for i in range(9)] 
```

奇怪的是，如果我使用`coerce=int`. 我自己是`flask`初学者，所以我不确定为什么`coerce=int`会导致问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-03-17T07:21:11.183

[**WTForms 文档**：*类 wtforms.fields.SelectField*](http://wtforms.readthedocs.io/en/latest/fields.html#wtforms.fields.SelectField)

**选择具有动态选择值的字段：**

```
class UserDetails(Form):
    group_id = SelectField(u'Group', coerce=int)

def edit_user(request, id):
    user = User.query.get(id)
    form = UserDetails(request.POST, obj=user)
    form.group_id.choices = [(g.id, g.name) for g in Group.query.order_by('name')] 
```

# assembly - 在 MASM 中使用常量初始化大数

> ID：12850607
> 
> 赞同：2
> 
> 时间：2012-10-12T00:29:15.397
> 
> 标签：assembly, x86, masm

我正在尝试在 MASM 中编写一些宏来处理大数字（即值大于可以存储在寄存器中的数字）。但是，我遇到了在汇编时从常量创建 bignums 的问题。似乎 MASM 对数值常量的大小有限制。我想做的是这样的：

```
DECLARE_BIGINT example, 19292109310024103209481293008 
```

但我得到这个错误：

```
错误 A2071：初始化程序幅度对于指定大小来说太大

```

我假设这意味着常数大于 MASM 可以处理的。我想我可以通过将常量声明为文本来解决这个问题：

```
DECLARE_BIGINT example, <19292109310024103209481293008> 
```

然后解析数字，但我无法弄清楚如何（或者即使可能）在 MASM 中操作文本常量。

任何帮助将不胜感激。此外，我这样做是为了好玩，并尝试更好地学习汇编和 MASM，所以我宁愿不只是使用一个为我做这件事的库（从中获得所有乐趣）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T04:24:25.543

整数常量不适合 64 位，这是当今任何实用的 x86/64 汇编程序可能支持的最大整数。

专门针对 MASM，查看官方文档，阅读[此页面](http://msdn.microsoft.com/en-us/library/8t163bt0.aspx)。它列出了 MASM 支持的数据声明类型。其中最大的整数类型有：

[`QWORD`](http://msdn.microsoft.com/en-us/library/2s70e2x4.aspx)= 8 字节（或 64 位）和
[`TWORD`](http://msdn.microsoft.com/en-us/library/e3zfxb7e.aspx)= 10 字节（或 80 位）。

您的整数常量需要 log [2] (19292109310024103209481293008) ≈ 94 位或 12 字节。那只是不适合`TWORD`.

现在，您可以访问作为宏参数的字符串的各个字符。使用[`FORC`/`IRPC`](http://msdn.microsoft.com/en-us/library/bsz2ce0w.aspx)。

这会将字符串参数转换为字节声明，每个字节代表相应字符的 ASCII 码：

```
FORC value, <012345>
DB   '0' + value
ENDM 
```

这相当于

```
DB '0'
DB '1'
DB '2'
DB '3'
DB '4'
DB '5' 
```

但仅此一项并没有太大帮助。

您也许可以使用[宏函数](http://cs.smith.edu/~thiebaut/ArtOfAssembly/CH08/CH08-8.html#HEADING8-1)和字符串操作宏 ( `CATSTR`, `INSTR`, `SUBSTR`) 做一些有用的事情。还需要一些循环或递归来将表示十进制整数的字符串转换为具有相同整数的二进制表示的字节序列。目前这似乎并不容易，我也不完全确定这是否可能。

# java - 将图像添加到 Java 小程序？

> ID：12850610
> 
> 赞同：1
> 
> 时间：2012-10-12T00:29:31.063
> 
> 标签：java, eclipse, image

当我尝试创建图像时，我正在使用这一行但没有图像，只有空白行。

```
g.drawImage(getImage(getDocumentBase(), "Piece_1.png"),coorx, 
coory, SIZE_Y / 8, SIZE_Y / 8, this); 
```

您如何显示图像以及将其放在 Eclipse 项目中的什么位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:40:30.513

`src`Eclipse IDE 从目录执行程序。这些步骤解决了我这个问题。

1.  创建一个名为`resources`. 你可以随意命名它。
2.  将您的图像文件添加到该包中。
3.  现在首先在绘制之前加载您的图像。

    ```
    public Image getImage(String name){
        URL imgUrl = getClass().getClassLoader().getResource("resources/"+name);
        ImageIcon icon = new ImageIcon(imgUrl);
        return icon.getImage();
    } 
    ```

## 一个例子

您可以拥有的构造函数。

```
Image piece1;

public Checkers(){
    piece1 = getImage("Piece_1.png");
}

public void paint(Graphics g){
    if (piece1!=null){
        g.drawImage(piece1, xcoord, ycoord, null);
    }
} 
```

希望这能解决您的问题。

# phantomjs - Does phantomjs have something similar to node_modules?

> ID：12850618
> 
> 赞同：2
> 
> 时间：2012-10-12T00:30:39.493
> 
> 标签：phantomjs

Does phantomjs have something similar to node_modules (from nodejs) ?

This is so I can use something like `require('moduleName');` to make the code cleaner.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:01:31.730

您可以使用 injectJs 来动态加载幻像脚本。

```
 console.log(phantom.injectJs('./path-to-file.js')); 
```

来自维基

**injectJs（文件名）{boolean}**

将指定文件中的外部脚本代码注入 Phantom 外层空间。如果在当前目录中找不到该文件，则使用 libraryPath 进行额外查找。如果注入成功，此函数返回 true，否则返回 false。

[https://github.com/ariya/phantomjs/wiki/API-Reference](https://github.com/ariya/phantomjs/wiki/API-Reference)

# javascript - $.ready() 在关闭正文之前

> ID：12850622
> 
> 赞同：10
> 
> 时间：2012-10-12T00:30:49.180
> 
> 标签：javascript, jquery, performance, delay, domready

这不是一个真正的编码问题，更像是一个真实世界的陈述。

我之前已经[注意到](https://stackoverflow.com/questions/9557846/why-is-jquery-ready-recommended-when-its-so-slow)事件`DOMReady`很慢，非常慢。因此，我在浏览 jQuery 源代码时注意到，可以使用`$.ready()`. 然后我想，在关闭正文之前放置这个简单的执行脚本应该会触发之前附加的所有“onDomReady”侦听器。是的，它按预期工作：

```
 <script>$.ready()</script>
</body> 
```

这里有两个例子，一个测量等待 DOMReady 所花费的毫秒数：

[http://jsbin.com/aqifon/10](http://jsbin.com/aqifon/10)

如您所见，DOMReady 触发器本身非常慢，用户必须等待整整 200-300 毫秒才能启动 domready 脚本。

无论如何，如果我们`$.ready()`在关闭标签之前放置，`BODY`我们会得到：

[http://jsbin.com/aqifon/16](http://jsbin.com/aqifon/16)

看到不同？通过手动触发 domready，我们可以切断 100-300 毫秒的执行延迟。这是一个大问题，因为我们可以在看到 DOM 操作之前依靠 jQuery 来处理它们。

现在，对于一个问题，我以前从未见过有人推荐或讨论过这个问题，但它似乎仍然是一个主要的性能问题。一切都是为了优化代码本身，这当然很好，但是如果执行延迟这么长时间，用户看到“unjQueryedContent”的闪光，那是徒劳的。

任何想法为什么不更频繁地讨论/推荐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T00:39:30.067

通过自己触发事件，您是在向您的 ready() 处理程序声明您的 dom 已加载但可能尚未加载！DOM 就绪事件没有捷径可走。如果确实有很长的等待时间，那么请使用 firebug、chrome 等令人惊叹的调试工具......检查您的资源及其时序问题。这一切都是黑白的，并会指出什么需要这么长时间（请求、渲染、多少资源等。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T00:52:01.603

实际上，在标签之前放置一个函数调用`</body>`使得使用 jQuery 的`ready()`. 只需将本机 JS-wrapper 函数调用包含在文档就绪时应调用的所有其他函数的调用。

一般来说，对于作者根本不需要/不想使用 jQuery 的情况，它是一种可行的替代方案（尽管 HTML 代码有些乱七八糟，因此对于完美主义者来说是不可接受的）。不过，在这种情况下，我更愿意使用`DOMContentLoaded`大多数浏览器（包括 IE9+）都支持的本机事件处理程序（对于 IE8，我们可以将`window.load()`其用作可接受的后备）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-14T02:16:29.890

> 任何想法为什么不更频繁地讨论/推荐？

之前放置 JavaScript`</body>`已经讨论了很多，并且如您所知，如果您正在寻找更快的页面加载，建议您这样做。`ready`实际上，手动触发 jQuery处理程序的讨论很少。为什么？好吧，我不认为有一个单一的客观答案，但我会尝试在这里概述一些可能性：

1.  **性能不是 jQuery 的主要目标**（尽管它绝对是一个问题），性能狂通常会寻找更轻的库来进行跨浏览器的 DOM 操作和事件处理，或者自己开发。

2.  **这是一个额外的步骤，它看起来并不干净**。jQuery 试图简洁和优雅，并且推荐一个额外的步骤来初始化脚本听起来不像会发生的事情。他们建议绑定到`ready`，因此建议强制`.ready()`并忽略实际的浏览器事件看起来“错误”。关心这个问题的人可能都知道，在此之前初始化脚本`</body>`会更快。

3.  **优化`DOMContentLoaded`听起来像是浏览器供应商的任务**。不过，我不确定为什么它会变慢，而且可能没有太大的优化空间——在我的理解中，之前调用 init 脚本`</body>`应该始终是初始化东西的最快方法（因为它在解析容器`<script>`标签时立即执行，而浏览器必须在触发之前完成整个文件的解析`DOMContentLoaded`）。

您可能还记得不久前，`<script>`在 HTML 上到处散布块是一种常见的做法。然后 Web 标准运动来了，并推荐了更理智和可维护的做事方式。这包括从一个地方引导脚本——最初`window.onload`是`DOMContentLoaded`. 但是，我们仍然每天在 StackOverflow 上到处都能看到带有脚本的 spaghetti-HTML。所以我不确定今天推荐在正文结尾之前放置脚本是否合适，因为它可能被解释为在正文中的任何位置添加脚本的许可。

Finally, if you're really concerned about loading your script fast, and your code does not manipulate the DOM, the fastest way to load it is to put it in the `<head>` before any stylesheets. And I'm stating that just to say that there's no silver bullet, no optimal way to init scripts that is the fastest and most elegant in every scenario. I think that's why the community sticks with recommending something that looks sane and tends to create more maintainable code, instead of other better performing alternatives.

# mysql - 在不创建其他视图的情况下统计 SQL 语句

> ID：12850627
> 
> 赞同：1
> 
> 时间：2012-10-12T00:31:37.690
> 
> 标签：mysql, sql, oracle

我有一个表名为 JOB_Details ，数据显示如下：

```
 Employee_ID   Age          Department     Gender       
    001       30yrs          IT               M 
    002       34yrs          HR               F    
    003       39yrs          HR               F   
    004       49yrs          Finance          M        
    005       54yrs          IT               M 
    006       20yrs          HR               M 
    007       24yrs          HR               F   
    008       33yrs          Finance          F       
    009       29yrs          Finance          F        
    010       44yrs          IT               M 
```

我希望显示的输出应该是

```
Age          Department:IT       Department:Finance  Department:HR    Total
             Male     Female     Male     Female     Male     Female
<30yrs         1         0         0         1         1         1       4
 30-34yrs      0         0         0         1         0         1       2
 35-39yrs      0         0         0         0         0         1       1
 40-49yrs      1         0         1         0         0         0       2
 50-54yrs      1         0         0         0         0         0       1
 Total         3         0         1         2         1         3       10 
```

根据我的知识，唯一的方法是创建另一个视图并将它们一个一个分组。但我想知道是否有其他方法可以在不创建其他视图的情况下做到这一点？如果有人有其他好的建议，我希望学习它。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:09:14.143

MySQL 版本。在 SQL Server 和 Oracle 中都不起作用。[SQL小提琴](http://sqlfiddle.com/#!2/d9d01/1)

```
select *, IT_Male + IT_Female + Finance_Male + Finance_Female + HR_Male + HR_Female as Total
from (
    select 
        ar.`range` as Age,
        count(Department = 'IT' and Gender = 'M' or null) as IT_Male,
        count(Department = 'IT' and Gender = 'F' or null) as IT_Female,
        count(Department = 'Finance' and Gender = 'M' or null) as Finance_Male,
        count(Department = 'Finance' and Gender = 'F' or null) as Finance_Female,
        count(Department = 'HR' and Gender = 'M' or null) as HR_Male,
        count(Department = 'HR' and Gender = 'F' or null) as HR_Female
    from 
        JOB_Details jd
        inner join
        age_range ar on jd.Age between ar.bottom and ar.top
    group by ar.`range`
    order by ar.bottom
) s
union
select 
    'Total',
    count(Department = 'IT' and Gender = 'M' or null),
    count(Department = 'IT' and Gender = 'F' or null),
    count(Department = 'Finance' and Gender = 'M' or null),
    count(Department = 'Finance' and Gender = 'F' or null),
    count(Department = 'HR' and Gender = 'M' or null),
    count(Department = 'HR' and Gender = 'F' or null),
    count(*)
from JOB_Details 
```

没有外部表或视图的 Oracle 版本：[SQL Fiddle](http://sqlfiddle.com/#!4/54916/96)

```
with age_range as (
    select 0 as "bottom", 29 as "top", '<30' as "range" from dual union
    select 30, 34, '30-34' from dual union
    select 35, 39, '35-59' from dual union
    select 40, 49, '40-49' from dual union
    select 50, 54, '50-54' from dual
)
select s.*, IT_Male + IT_Female + Finance_Male + Finance_Female + HR_Male + HR_Female as Total
from (
    select 
        ar."range" as Age,
        count(case when Department = 'IT' and Gender = 'M' then 1 end) as IT_Male,
        count(case when Department = 'IT' and Gender = 'F' then 1 end) as IT_Female,
        count(case when Department = 'Finance' and Gender = 'M' then 1 end) as Finance_Male,
        count(case when Department = 'Finance' and Gender = 'F' then 1 end) as Finance_Female,
        count(case when Department = 'HR' and Gender = 'M' then 1 end) as HR_Male,
        count(case when Department = 'HR' and Gender = 'F' then 1 end) as HR_Female
    from 
        JOB_Details jd
        inner join
        age_range ar on jd.Age between ar."bottom" and ar."top"
    group by ar."range", ar."bottom"
    order by ar."bottom"
) s
union
select 
    'Total',
    count(case when Department = 'IT' and Gender = 'M' then 1 end),
    count(case when Department = 'IT' and Gender = 'F' then 1 end),
    count(case when Department = 'Finance' and Gender = 'M' then 1 end),
    count(case when Department = 'Finance' and Gender = 'F' then 1 end),
    count(case when Department = 'HR' and Gender = 'M' then 1 end),
    count(case when Department = 'HR' and Gender = 'F' then 1 end),
    count(*)
from JOB_Details 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:06:33.137

```
SELECT 
   CASE WHEN Age < 30 THEN '<30' 
        WHEN 30 <= Age AND Age < 34 THEN '30-34'
        ...
   END as Age,

   SUM(CASE WHEN Department = 'IT' AND Gender = 'M' THEN 1 ELSE 0) END AS IT_M,
   SUM(CASE WHEN Department = 'IT' AND Gender = 'F' THEN 1 ELSE 0) END AS IT_F,
   ...

FROM JOB_DETAILS

GROUP BY
   CASE WHEN Age < 30 THEN '<30y' 
        WHEN 30 <= Age AND Age < 34 THEN '30-34'
        ...
   END 
```

# html - 占位符句子进入新行

> ID：12850628
> 
> 赞同：0
> 
> 时间：2012-10-12T00:31:57.643
> 
> 标签：html, placeholder

我正在寻找解决方案。如果没有，那我无能为力：]

我非常喜欢占位符属性。今天/今晚我正在制作联系表格。

但是我想知道是否有任何解决方案可以将单词/句子放入占位符的新行中......

例子：

```
You are suppoused,
to write an message to me... 
```

代替：

```
You are suppoused, to write an message to me... 
```

我希望有办法。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:41:48.210

[来自 WHATWG](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#attr-input-placeholder)（重点是我的）：

> 4.10.7.3.10 占位符属性
> 
> 占位符属性表示一个简短的提示（一个单词或短语），用于在控件没有值时帮助用户输入数据。提示可以是示例值或预期格式的简要描述。如果指定，该属性**的值必须不包含 U+000A LINE FEED (LF) 或 U+000D CARRIAGE RETURN (CR) 字符**。

似乎是一个很明确的不。

# facebook-graph-api - 如何在 facebook iOS SDK 3.1 中发布到朋友的墙上？

> ID：12850630
> 
> 赞同：2
> 
> 时间：2012-10-12T00:32:09.873
> 
> 标签：facebook-graph-api, ios6, facebook-ios-sdk

我有适用于 iOS 6 的 SDK 3.1 用于发布状态更新，并且我有我想在他们的墙上发布的人的 facebook 用户 ID。

我只是想让它说“嗨”。只有一个人的墙。我可以使用“/[id]/feed”来定位他们的提要，但是我必须提供一个图形对象？如果我仍然使用 startForPostWithGraphPath() 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T19:19:44.777

我想到了！

首先当然在这里实现 FBFriendPickerDelegate ，除非您已经以某种方式获得了他们的朋友 ID。[http://developers.facebook.com/docs/howtos/filter-devices-friend-selector-using-ios-sdk/](http://developers.facebook.com/docs/howtos/filter-devices-friend-selector-using-ios-sdk/)

然后是重要的部分，如何发布到朋友的墙：

```
- (void)facebookViewControllerDoneWasPressed:(id)sender
{
    NSString* fid;
    NSString* fbUserName;

    // get facebook friend's ID from selection. just gets 1 right now.
    for (id<FBGraphUser> user in friendPickerController.selection)
    {
        NSLog(@"\nuser=%@\n", user);
        fid = user.id;

        fbUserName = user.name;
    }

    //Make the post.
    NSMutableDictionary* params = [[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Join me!", @"message", @"http://itunes.apple.com/my-super-app", @"link", @"My Super App", @"name", nil];

    NSLog(@"\nparams=%@\n", params);

    //Post to friend's wall.
    [FBRequestConnection startWithGraphPath:[NSString stringWithFormat:@"%@/feed", fid] parameters:params HTTPMethod:@"POST"
                          completionHandler:^(FBRequestConnection *connection, id result, NSError *error)
     {
         //Tell the user that it worked.
         UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Shared"
                                                             message:[NSString stringWithFormat:@"Invited %@! error=%@", fbUserName, error]
                                                            delegate:nil
                                                   cancelButtonTitle:@"OK"
                                                   otherButtonTitles:nil];
         [alertView show];
     }
    ];

    //Close the friend picker.
    [self dismissModalViewControllerAnimated:YES];
} 
```

# java - 点击通知

> ID：12850633
> 
> 赞同：3
> 
> 时间：2012-10-12T00:32:30.887
> 
> 标签：java, android, android-notifications

由于我的另一个[问题](https://stackoverflow.com/questions/12850033/trying-to-build-a-simple-notification-in-android/12850175#comment17389944_12850175)，我使用 NotificationCompat 成功创建了一个通知。我现在只想更改通知在 onClick 上的作用。我真的很想弹出一个警报对话框（我见过一些应用程序这样做），但每次我点击它时，我都会显示我的活动。有任何想法吗？

通知代码：

```
Intent notificationIntent = new Intent(ctx, YourClass.class);
PendingIntent contentIntent = PendingIntent.getActivity(ctx,
        YOUR_PI_REQ_CODE, notificationIntent,
        PendingIntent.FLAG_CANCEL_CURRENT);

NotificationManager nm = (NotificationManager) ctx
        .getSystemService(Context.NOTIFICATION_SERVICE);

Resources res = ctx.getResources();
Notification.Builder builder = new Notification.Builder(ctx);

builder.setContentIntent(contentIntent)
            .setSmallIcon(R.drawable.some_img)
            .setLargeIcon(BitmapFactory.decodeResource(res, R.drawable.some_big_img))
            .setTicker(res.getString(R.string.your_ticker))
            .setWhen(System.currentTimeMillis())
            .setAutoCancel(true)
            .setContentTitle(res.getString(R.string.your_notif_title))
            .setContentText(res.getString(R.string.your_notif_text));
Notification n = builder.build();

nm.notify(YOUR_NOTIF_ID, n); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T00:40:08.970

没有活动就无法进行正常对话。有几种可能的解决方法，包括[将 Activity 设置为像对话框一样的样式](https://stackoverflow.com/questions/1979369/android-activity-as-a-dialog)，并使 Activity 本身不可见并立即从中启动对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:45:36.627

您可以使用[远程视图](http://developer.android.com/reference/android/widget/RemoteViews.html)来显示一个对话框，而无需进入您的应用程序进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T20:30:02.760

你可以设置

```
 Intent intent = new Intent(context, ReserveStatusActivity.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);

    NotificationManager notificationManager =
            (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

    intent = new Intent(String.valueOf(PushActivity.class));
    intent.putExtra("message", MESSAGE);
    TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
    stackBuilder.addParentStack(PushActivity.class);
    stackBuilder.addNextIntent(intent);
    // PendingIntent pendingIntent =
    stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);

    PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(
            0, PendingIntent.FLAG_UPDATE_CURRENT);

    NotificationCompat.BigPictureStyle notiStyle = new
            NotificationCompat.BigPictureStyle();

    android.app.Notification notification = new NotificationCompat.Builder(context)
            .setSmallIcon(R.mipmap.ic_launcher)
            .setContentTitle(en_title)
            .setContentText(en_alert)
            .setAutoCancel(true)
            .setNumber(++numMessages)
            .setStyle(notiStyle)

            //.setContentIntent(resultPendingIntent)

                   .setContentIntent(pendingIntent)

            .build();

    notification.sound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);

    notificationManager.notify(1000, notification); 
```

# unreal-development-kit - 我找不到答案的碰撞问题

> ID：12850634
> 
> 赞同：0
> 
> 时间：2012-10-12T00:32:37.413
> 
> 标签：unreal-development-kit, collision, unrealscript

我急需帮助。我已经使用 UDK 几个月了，但一直遇到问题。

简而言之，我正在尝试使用 UDK 作为游戏引擎制作自己的视频游戏。在 3ds max 2013 中，我创建了两个完整的房子，我一直在尝试将它们导入 UDK，以便能够在其中四处走动并最终对事件进行编码等等。

我现在的主要问题是我正在尝试使用我使用此处的视频教程制作的自定义碰撞导入前草坪（实际上是一个近平面） - [http://www.3dmotive.com/training/fre ... k/?follow=true](http://www.3dmotive.com/training/fre...k/?follow=true) 我知道本教程很旧，但我认为它会起作用——它对我不起作用——碰撞模型没有注册，而且我在 3ds 中制作的碰撞框似乎包围了实际平面。

所以我正在寻求尽可能多的帮助！有没有人对此有特别的建议，你被认为是史诗般的和令人敬畏的，那些有提示或教程或任何最近的东西（对于 2012 年 7 月的 UDK 测试版）的人，我会永远爱你。

请帮助新手！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:33:13.063

为了将网格导入 UDK，它必须是 ASE 文件格式。

格式是否正确？如果是这样，请检查您的导出设置并使用这些设置。

UDK 也有一个引擎内的碰撞生成器，它使用简单，是一个有用的工具。

您可以通过在碰撞时转到静态网格属性切换并生成新的碰撞来使用它。

（您提供的链接不起作用）。

# http - 无法获得摘要身份验证以与 node.js 一起使用

> ID：12850646
> 
> 赞同：2
> 
> 时间：2012-10-12T00:33:56.893
> 
> 标签：http, node.js, authorization

我正在尝试使用来自gathercontent.com 的API 使用节点js 进行简单的（！）摘要身份验证。

一切似乎都正常，但我仍然收到如下所示的“错误凭据”响应：

```
{ success: false, error: 'Wrong Credentials!' } 
```

代码如下所示：

```
var https = require('https'),
    qs = require('querystring');
apikey = "[my api key goes in here]",
    pwd = "[my password goes in here]",
    crypto = require('crypto');

module.exports.apiCall = function () {

    var options = {
        host:'abcdefg.gathercontent.com',
        port:443,
        path:'/api/0.1/get_pages_by_project/get_me',
        method:'POST',
        headers:{
            "Accept":"application/json",
            "Content-Type":"application/x-www-form-urlencoded"
        }
    };

    var req = https.request(options, function (res) {

        res.on('data', function (d) {
            var creds = JSON.parse(d);

            var parsedDigest = parseDigest(res.headers['www-authenticate']);
            console.log(parsedDigest);
            var authopts = {
                host:'furthercreative.gathercontent.com',
                port:443,
                path:'/api/0.1/get_pages_by_project/get_me',
                method:'POST',
                headers:{
                    "Accept":"application/json",
                    "Content-Type":"application/x-www-form-urlencoded",
                    "Authorization" : getAuthHeader(parsedDigest, apikey, parsedDigest['Digest realm'], pwd)
                }
            };

            console.log(authopts);
            console.log('\n\n\n');
            var req2 = https.request(authopts, function (res2) {
                console.log("statusCode: ", res2.statusCode);
                console.log("headers: ", res2.headers);

                res2.on('data', function (d2) {
                    var result = JSON.parse(d2);

                });
            });

            req2.end();

        });

    });

    req.write('id=1234');

    req.end();

    req.on('error', function (e) {
        console.error(e);
    });

};

function parseDigest(s){

    var parts = s.split(',');
    var obj = {};
    var nvp = '';

    for(var i = 0; i < parts.length; i++){

        nvp = parts[i].split('=');
        obj[nvp[0]] = nvp[1].replace(/"/gi, '');
    }

    return obj;
}

function getAuthHeader(digest, apikey, realm, pwd){
    var md5 = crypto.createHash('md5');
    var s = '';

    var nc = '00000001';
    var cn = '0a4f113b';

    var HA1in = apikey+':'+realm+':'+pwd;
    md5 = crypto.createHash('md5');
    md5.update(HA1in);
    var HA1out = md5.digest('hex');

    var HA2in = 'POST:/api/0.1/get_pages_by_project/get_me';
    md5 = crypto.createHash('md5');
    md5.update(HA2in);
    var HA2out = md5.digest('hex');

    md5 = crypto.createHash('md5');
    var respIn = HA1out + ':' + digest.nonce + ':'+nc+':'+cn+':'+digest.qop+':'+ HA2out;
    md5.update(respIn);
    var resp = md5.digest('hex');

    s = [   'Digest username="',apikey,'", ',
        'realm="',digest['Digest realm'],'", ',
        'nonce="',digest.nonce,'", ',
        'uri="/api/0.1/get_pages_by_project/get_me", ',
        'cnonce="',cn,'", ',
        'nc="',nc,'", ',
        'qop="',digest.qop,'", ',
        'response="',resp,'", ',
        'opaque="',digest.opaque,'"'].join('')

    return s;
} 
```

我会尝试卷曲它，但我不知道怎么做！

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T00:59:19.290

我看到了几个可能与您的问题有关的问题。很难说哪些是真正的罪魁祸首，因为对gathercontent 的实现一无所知。如果您粘贴了他们的“WWW-Authenticate”标头的示例，则提供特定帮助会容易得多。

所以我在猜测实际原因是什么，但这里有一些实际问题你应该解决，以符合规范（即保护它在未来不被破坏，因为服务器开始做的事情略有不同）：

*   在`Authorization`您正在创建的标题中，**删除周围的双引号**，`nc`也许还有`qop`
*   我不知道`qop`gathercontent正在使用什么价值。如果是**`auth-int`**，那么您还必须将散列的 HTTP 正文附加到`HA2`，请参阅[规范的 #3.2.2.3](https://www.rfc-editor.org/rfc/rfc2617#section-3.2.2.3) - 此外，他们可能会指定**一个逗号分隔的 qop 值列表**供您选择 - 或者服务器**可能`qop`根本不发送值**，即他们使用 HTTP 摘要身份验证中最基本的 from，在这种情况下，您的实现将违反[规范](https://www.rfc-editor.org/rfc/rfc2617#section-3.2.2)，因为那时您不允许发送 a`cnonce`等`nc`。
*   您尝试通过 获取领域`parsedDigest['Digest realm']`，即**您假设 the`realm``Digest`**是初始关键字**之后的第一个属性。**情况可能是这样，也可能不是，但你不应该依赖它（在拆分其余部分之前修改你的`parseDigest`函数以剥离字符串）`"Digest "`
*   您使用 的方式`parsedDigest`，您假设**Digest**总是以这种方式大写，并且**`realm`,`nonce`等**总是小写。根据规范，这些都是**不区分大小写的**

几个不相关的问题：

*   服务器真的强迫你使用`Digest authentication`吗？这是 HTTPS，所以你不妨这样做`Basic authentication`，它更容易，而且使用 HTTPS，同样安全。（在这里回答我自己，检查了收集内容后：基本身份验证显然是[不可能的](http://help.gathercontent.com/customer/portal/articles/250475-getting-started-with-gathercontent-api)）
*   正如我在对您的问题的评论中提到的那样，`cnonce`每个请求都应该是随机的，尤其是，您不应该从[Wikipedia](http://en.wikipedia.org/wiki/Digest_access_authentication#Example_with_explanation)复制和粘贴它，这会使您更容易受到攻击（但这里不是问题，因为您的所有数据都通过 SSL案子）

关于如何卷曲 - 试试这个：

```
curl --data 'id=1234' --digest --user "apikey:pwd" https://abcdefg.gathercontent.com:443/api/0.1/get_pages_by_project/get_me 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T13:44:05.200

是来自 GatherContent 的彼得。

第一个非常明显的事情是使用 just`get_me`而不是`get_pages_by_project/get_me`. 你在后者中混合了两种不同的东西。`get_me`不需要通过 POST 发送的任何参数，因此您可以删除它们。

另外，请确保您的密码始终为小写`x`。

它有什么改变吗？

**编辑：** 对于任何感兴趣的人，这里是我们的 API 文档： http: [//gathercontent.helpjuice.com/questions/26611-How-do-I-use-the-API](http://gathercontent.helpjuice.com/questions/26611-How-do-I-use-the-API)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T16:32:27.083

该`express-auth`模块支持多种身份验证方案，包括 HTTP Digest。见：[https ://github.com/ciaranj/express-auth](https://github.com/ciaranj/express-auth)

另一个很好的选择是`passport`：[https ://github.com/jaredhanson/passport](https://github.com/jaredhanson/passport)

两个模块中的 http-digest 示例往往侧重于为您的 node.js 应用程序建立身份验证，而不是将身份验证请求转发给第三方。但是，您应该能够通过一些面条使其工作。

如果按下，我会使用护照。提供的示例更加清晰和记录在案。

希望有帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T00:36:37.180

我会建议你使用 mikeal 的[请求](https://github.com/mikeal/request)模块，它使它更容易和更清洁。

遗憾的是，Request 尚不支持 HTTP Auth，但您只需要设置`Authorization`标头即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-26T13:29:35.693

**试试[urllib](https://www.npmjs.com/package/urllib)它将与简单和 disgest auth 一起使用。**

**参见示例：** [https ://stackoverflow.com/a/57221051/8490598](https://stackoverflow.com/a/57221051/8490598)

# solr - 使用 termfreq 作为函数查询

> ID：12850648
> 
> 赞同：0
> 
> 时间：2012-10-12T00:34:23.103
> 
> 标签：solr

我正在开发 Sol4 中的自动完成功能，我想知道是否可以在过滤器查询中使用 termfreq。我的查询如下所示：

```
http://example.com/autocomplete/?q=ful&start=0&rows=5&&fl=Location,freq:termfreq(textng,'ful') 
```

并返回：

```
<response>
<lst name="responseHeader">
<int name="status">0</int>
<int name="QTime">1</int>
</lst>
<result name="response" numFound="18" start="0">
<doc>
<str name="Location">Fullerton, CA</str>
<int name="freq">1</int>
</doc>
<doc>
<str name="Location">Fulton, NY</str>
<int name="freq">1</int>
</doc>
<doc>
<str name="Location">Fultondale, AL</str>
<int name="freq">1</int>
</doc>
<doc>
<str name="Location">Cal State University Fullerton</str>
<int name="freq">1</int>
</doc>
<doc>
<str name="Location">Full Sail Real World Education</str>
<int name="freq">1</int>
</doc>
</result>
</response> 
```

我希望能够做类似的事情`fq:termfreq(textng,'ful'):1`。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:23:41.543

```
fq={!frange l=1 u=10}termfreq(Location,'ful') 
```

可以

将 fq= 与 OR 组合时，在 fq= 之前的 "(" 有一些奇怪的语法位置：

```
(fq={!frange l=1 u=10}termfreq(textng,'ful') OR {!frange l=1 u=10}termfreq(textng,'county')) 
```

# clojure - ARef 中使用的验证方法是什么？

> ID：12850650
> 
> 赞同：3
> 
> 时间：2012-10-12T00:34:42.210
> 
> 标签：clojure

在clojure的`ARef`实现中，有三种方法

```
void setValidator(IFn vf);

IFn getValidator();

void validate(IFn vf, Object val) 
```

这些方法是用来做什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:51:47.310

验证器函数是一个单参数函数，将在发布 ARef (var/ref/agent/atom) 的新值之前调用。如果函数返回 false 或抛出异常，则 ARef 的值不会改变。

getter 对应于核心函数`get-validator`，setter 对应于`set-validator!`. 由`validate`clojure 代码调用，因此您不需要调用它。

有关示例，请参阅[clojure 文档](http://clojuredocs.org/clojure_core/1.2.0/clojure.core/set-validator!)

# c - 设置透视图的坐标系？

> ID：12850653
> 
> 赞同：0
> 
> 时间：2012-10-12T00:35:26.863
> 
> 标签：c, opengl, projection-matrix, frustum, perspectivecamera

我理解平截头体查看系统背后的概念；它的形状像金字塔，随着物体靠近中心，它们会变小，直到最终被剪掉。但是，当在 OpenGL 中使用查看投影时（请注意：我不使用已弃用的功能），您可以像这样设置坐标系：

orthoExample（左、右、下、上、近、远）；

这一切都很好，但是说到透视，事情变得有点奇怪。

透视示例（field_of_view_y，方面，近，远）；

我该如何设置具有这样功能的坐标系？！？它不允许我指定左、右、下、上等。我知道透视只是平截头体投影的一种变体......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:40:17.733

[在这里](http://steinsoft.net/index.php?site=Programming/Code%20Snippets/OpenGL/gluperspective)找到的代码应该可以为您解决问题。

以 Z 轴为投影中心。tan(fov_y)*near 给你顶部（和负值，底部）。纵横比是宽度与高度的比率，因此将纵横比乘以顶部可以得到右，而负数是左。

# r - 如何在 R 中对变量名进行子集化？

> ID：12850656
> 
> 赞同：1
> 
> 时间：2012-10-12T00:35:40.693
> 
> 标签：r

我有一个如下所示的数据集：

```
head(data)
                              country      fixef
1             as.factor(country.x)Albania -0.4446439
2             as.factor(country.x)Algeria -0.3400060
3             as.factor(country.x)Andorra -1.0455948
4              as.factor(country.x)Angola  0.7477114
5 as.factor(country.x)Antigua and Barbuda -0.1996655
6           as.factor(country.x)Argentina -0.3404206 
```

除了国家/地区名称之外，我如何删除（在 R 中）其他所有内容，使其看起来像这样：

```
head(data)
                     country      fixef
1                    Albania -0.4446439
2                    Algeria -0.3400060
3                    Andorra -1.0455948
4                    Angola   0.7477114
5        Antigua and Barbuda -0.1996655
6                  Argentina -0.3404206 
```

谢谢，

安东尼奥·佩德罗。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T00:46:11.760

我同意几分钟前发布的答案（但似乎已被撤回）最好不要一开始就产生这个问题！但是，如果您想更正已有的内容，请查找`?gsub`并尝试以下操作：

```
data$country <- gsub("as\\.factor\\(country\\.x\\)", "", data$country) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T00:43:41.030

```
data$country <- with(data, {
    country <- as.character(country)
    factor(substr(country, 21, nchar(country)))
}) 
```

# android - Eclipse 中没有 AVD 的可用消息

> ID：12850659
> 
> 赞同：2
> 
> 时间：2012-10-12T00:36:39.750
> 
> 标签：android, eclipse, android-emulator

`No AVD's Available`尝试在模拟器中运行代码时，我一直遇到 Eclipse 返回的问题。

检查更新，重新启动 Eclipse，确认`~/.android`目录的权限，并尝试了所有其他选项。

我做的唯一不同的事情，不应该有什么不同，我在 Zend Studio 中运行 Android SDK，这是 Eclipse，直到现在我从来没有遇到过这个问题。

有人有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T00:36:39.750

这是愚蠢的...

如果通过 USB 插入真实设备，则 AVD 列表将变为空白。

一旦我拔掉它，我所有的 AVD 都会立即显示出来。

如果 AVD 正在运行，然后设备已插入，则两者都在 Running Device 窗口中可用。

# asp.net - 在 IIS 7 中部署 WCF Web 服务 - 出现错误

> ID：12850662
> 
> 赞同：0
> 
> 时间：2012-10-12T00:36:50.093
> 
> 标签：asp.net, wcf, web-services

我正在尝试将 VS 2010 中的服务引用添加到我在 Server 2008/IIS7 服务器上的 WCF Web 服务中。我将服务放入现有/正在运行的 ASP.NET 站点中。当我输入服务的 url 时，它会出现标准服务屏幕，但是当我尝试添加对我正在开发的新网站项目的引用时，我收到以下错误。

网址为[https://www.nameofsite.net/service.svc?wsdl](https://www.nameofsite.net/service.svc?wsdl)的文档未被识别为已知文档类型。来自每种已知类型的错误消息可能会帮助您解决问题： - 来自“XML 架构”的报告是“无法识别文档格式（内容类型为 'text/html; charset=UTF-8'）。”。- 来自“https://www.nameofsite.net/service.svc?wsdl”的报告是“无法识别文档格式（内容类型为 'text/html; charset=UTF-8'）。”。- 来自“DISCO 文档”的报告是 URL [https://www.nameofsite.net/Service.svc?disco上的“发现文档”](https://www.nameofsite.net/Service.svc?disco)找不到。- 无法识别文档格式。- 来自“WSDL 文档”的报告是“无法识别文档格式（内容类型为 'text/html; charset=UTF-8'）。”。元数据包含无法解析的引用：“https://www.nameofsite.net/service.svc?wsdl”。在[https://www.nameofsite.net/service.svc?wsdl](https://www.nameofsite.net/service.svc?wsdl)上没有可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。远程服务器返回错误：(404) Not Found。如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

我尝试将 mime 类型 svc 添加到 IIS，但没有奏效。我看到有很多关于soap 1.1 不与soap 1.2 通信的讨论，但我对此太陌生，甚至无法按照我所看到的说明进行操作。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:03:33.233

服务是否发布其元数据？检查服务的 web.config 文件中的 httpsGetEnabled 标志：

```
<behaviors>
 <serviceBehaviors>
  <behavior name="NewBehavior">
    <serviceMetadata httpsGetEnabled="true" 
     httpsGetUrl="https://myComputerName/myEndpoint" />
  </behavior>
 </serviceBehaviors>
</behaviors> 
```

有关这些标签的更多信息：[ServiceMetaData](http://msdn.microsoft.com/en-us/library/ms731317.aspx)

您可能还需要在 web.config 中为服务配置此端点：

```
<endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" /> 
```

更多背景知识： [Web.Config](http://msdn.microsoft.com/en-us/library/ms733932.aspx)

[WSDL 与 MEX](http://blogs.microsoft.co.il/blogs/idof/archive/2011/08/10/wsdl-vs-mex-knockout-or-tie.aspx)

# java - 模拟棒的逻辑产生正方形而不是圆形

> ID：12850668
> 
> 赞同：1
> 
> 时间：2012-10-12T00:37:50.767
> 
> 标签：java, algorithm

我正在尝试在移动平台上模拟模拟棒。

我根据手指的位置和棒的半径计算一个棒矢量，返回一个从 -1 到 1 的值。

```
public void calcStickVector(float x, float y)
{
    float cx = getCenterX();
    float cy = getCenterY();

    float distX = x - cx;
    float distY = y - cy;
    distX /= getRadius();
    distY /= getRadius();

    distX = JMath.clamp(-1.0f, 1.0f, distX);
    distY = JMath.clamp(-1.0f, 1.0f, distY);
    stickVector.x = distX;
    stickVector.y = distY;
}

public RectF getInnerStickRect()
{
    float r = getInnerRadius();
    float cx = getCenterX() + (getRadius() * getStickVector().x);
    float cy = getCenterY() + (getRadius() * getStickVector().y);

    innerStickRect.left = cx - r;
    innerStickRect.top = cy - r;
    innerStickRect.right = cx + r;
    innerStickRect.bottom = cy + r;

    return innerStickRect;
} 
```

它几乎可以工作，但从视觉上看，内棒在四处移动时似乎形成了一个正方形，而不是绕一个圆圈。我的逻辑有问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:52:33.503

实际上，您实际上是在制作一个以 1 为角的盒子。您需要对向量进行归一化（将 x 和 y 除以距离），而不是除以半径和钳位。

```
double dist = Math.sqrt(distX*distX) + (distY*distY));
distX /= dist;
distY /= dist; 
```

# php - 这个 preg_match 是怎么回事？

> ID：12850669
> 
> 赞同：0
> 
> 时间：2012-10-12T00:38:32.493
> 
> 标签：php, regex

```
 $var = 3;
        if ($cleanvar = preg_match('/^[0-9]{0,2}$/', $var)) 
            {
                echo $cleanvar; echo $var; exit();
            }
        else
              . . . 
```

奇怪的输出。这导致我的`cleanvar`回声仍然回声。为什么会这样？这样做的目的是仅匹配整数，例如 1 位或 2 位数字。例如（1、2、4、38、24）`1``var``3``regex`

他们是我的正则表达式的问题吗？或者是什么导致了这种奇怪的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T00:40:20.700

`$cleanvar`只是对或错。您正在查找长度在 0 到 2 位之间的数字（从字符串的开头到结尾，因此不允许使用其他字符）。

编辑：如果匹配则返回 1，否则返回 0。

有关更多信息，请参见：http: [//us3.php.net/preg_match](http://us3.php.net/preg_match)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:53:46.113

如果您尝试验证输入值，则只需查看`preg_match`. 使用`+`运算符匹配“一个或多个前面的元素”。

```
if (preg_match('/^[0-9]+$/', $var)) {
    // we matched a number only, so we know $var is clean
} else {
} 
```

如果需要从输入字段中提取数字，可以使用捕获组：

```
if (preg_match('/([0-9]+)/', $var, $matches)) {
    $num = $matches[1];
} else {
} 
```

请注意，这不匹配整个输入，但会返回它在输入中找到的第一个数字`$var`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T00:44:43.130

`$var`如果你想设置它，后面应该跟着一个数组。`{1,2}`如果匹配 >=1 ，您可能希望更改为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T00:44:55.260

您的正则表达式是正确的，并且匹配正确。只是 preg_match 如果你得到匹配则返回 1，如果没有匹配则返回 0。请参阅[文档。](http://us1.php.net/preg_match)

# objective-c - 是否可以在 iOS 中获取目录并让操作系统缓存结果？

> ID：12850671
> 
> 赞同：4
> 
> 时间：2012-10-12T00:39:03.337
> 
> 标签：objective-c, ios, file-io, nsfilemanager, glob

许多`NSFileManager`在 iOS 上使用和较低级别的 API 从文件系统读取的方法都涉及内置缓存，因此即使目录中有很多项目，从未更改的目录中读取也可以非常快。

我有一种情况，我希望能够使用 glob 枚举目录中的文件：

即文件夹有这样命名的文件：

```
1-1-0.png
1-2-0.png
1-3-0.png
1-3-1.png
2-2-1.png
5-1-1.png
5-1-2.png
5-2-1.png
5-3-0.png
6-1-1.png
...
1501-5-2.png 
```

我可能想得到所有匹配的文件名`5-*-1.png`，这会给我回来`5-1-1.png`和`5-2-1.png`.

加载整个目录列表然后在 RAM 中进行 globbing 非常简单，但是有没有一种在 OS 级别执行此操作的方法，该方法具有内置缓存，因此重复调用同一个 glob 会产生缓存（更快）结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-25T00:21:09.500

您可以使用`glob()`此要点中概述的功能：[https ://gist.github.com/bkyle/293959](https://gist.github.com/bkyle/293959)

```
#include <glob.h> 

+ (NSArray*) arrayWithFilesMatchingPattern: (NSString*) pattern inDirectory: (NSString*) directory { 
  NSMutableArray* files = [NSMutableArray array];
  glob_t gt;
  NSString* globPathComponent = [NSString stringWithFormat: @"/%@", pattern];
  NSString* expandedDirectory = [directory stringByExpandingTildeInPath];
  const char* fullPattern = [[expandedDirectory stringByAppendingPathComponent: globPathComponent] UTF8String];
  if (glob(fullPattern, 0, NULL, &gt) == 0) {
      int i;
      for (i=0; i<gt.gl_matchc; i++) {
          size_t len = strlen(gt.gl_pathv[i]);
          NSString* filename = [[NSFileManager defaultManager] stringWithFileSystemRepresentation: gt.gl_pathv[i] length: len];
          [files addObject: filename];
      }
  }
  globfree(&gt);
  return [NSArray arrayWithArray: files];
} 
```

# c++ - C++ 函数中出现奇怪的舍入

> ID：12850673
> 
> 赞同：1
> 
> 时间：2012-10-12T00:39:26.927
> 
> 标签：c++, floating-point

我正在用 c++ 编写一个函数，它应该在传递的数字中找到最大的单个数字（inputValue）。例如，0.345 的答案是 5。但是，过了一会儿，程序将 inputValue 更改为类似于 0.3449 的值（然后将最大数字设置为 9）。我不知道为什么会这样。任何解决此问题的帮助将不胜感激。

这是我的 .hpp 文件中的函数

```
void LargeInput(const double inputValue)
//Function to find the largest value of the input
{
  int tempMax = 0,//Value that the temporary max number is in loop
  digit = 0,//Value of numbers after the decimal place
  test = 0,
  powerOten = 10;//Number multiplied by so that the next digit can be checked
  double number = inputValue;//A variable that can be changed in the function
  cout << "The number is still " << number << endl;
  for (int k = 1; k <= 6; k++)
  {
    test = (number*powerOten);
    cout << "test: " << test << endl;
    digit = test % 10;
    cout << (static_cast<int>(number*powerOten)) << endl;
    if (tempMax < digit)
      tempMax = digit;
    powerOten *= 10;
  }
  return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:50:25.103

您不能在计算机中精确地表示实数（双精度数）——它们需要近似。如果您将函数更改为在 long 或 int 上工作，则不会有任何不准确之处。对于您的问题而言，这似乎很自然，您只查看数字而不是数字，因此 .345 可以是 345 并获得相同的结果。

尝试这个：

```
int get_largest_digit(int n) {
  int largest = 0;

  while (n > 0) {
    int x = n % 10;
    if (x > largest) largest = x;
     n /= 10;
  }
  return largest;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:57:09.313

这是因为实数的小数部分是 1/2^n 的形式。结果，您可以获得非常接近您想要的值，但您永远无法获得像 1/3 这样的精确值。

通常使用整数并进行转换（如 1000 = 1），因此如果您有数字 1333，您可以`printf("%d.%d", 1333/1000, 1333 % 1000)`打印出 1.333。

顺便说一句，第一句话是对浮点数实际表示方式的简化。欲了解更多信息，请查看；[http://en.wikipedia.org/wiki/Floating_point#Representable_numbers.2C_conversion_and_rounding](http://en.wikipedia.org/wiki/Floating_point#Representable_numbers.2C_conversion_and_rounding)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T01:26:19.640

不幸的是，这就是浮点数的工作方式。问题的核心是浮点数的数量是无限的。更具体地说，在 0.1 和 0.2 之间有无数个值，在 0.01 和 0.02 之间有无数个值。但是，计算机具有有限数量的位来表示浮点数（双精度数为 64 位）。因此，大多数浮点数必须近似。在任何浮点运算之后，处理器必须将结果四舍五入到它可以用 64 位表示的值。

浮点数的另一个特性是，随着数字变大，它们变得越来越不精确。这是因为相同的 64 位必须能够表示非常大的数字（1,000,000,000）和非常小的数字（0.000,000,000,001）。因此，当使用更大的数字时，舍入误差会变大。

这里的另一个问题是您正在从浮点转换为整数。这引入了更多的舍入误差。看来，当 (0.345 * 10000) 转换为整数时，结果比 3450 更接近 3449。

我建议您不要将数字转换为整数。用浮点数编写程序。您不能对浮点数使用模数 (%) 运算符来获取数字的值。而是使用 C 数学库 (cmath.h) 中的 fmod 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T02:16:01.910

正如其他答案所表明的那样，二进制浮点无法准确表示大多数十进制数。因此，您必须重新考虑您的问题陈述。一些替代方案是：

*   该数字以双精度形式传递（特别是 64 位 IEEE-754 二进制浮点值），并且您希望找到传递的确切值的十进制表示中的最大数字。在这种情况下，用户 millimoose 建议的解决方案将起作用（前提是使用的`asprintf`or`snprintf`函数具有良好的质量，因此它不会产生阻止其产生正确舍入输出的舍入错误）。
*   该数字作为双精度数传递，但旨在表示一个数字，该数字可以精确地表示为具有已知位数的十进制数字。在这种情况下，用户 millimoose 建议的解决方案再次起作用，将格式规范更改为将 double 转换为具有所需位数的十进制（例如，您可以使用“%.6f”而不是“%.64f”） .
*   该函数被更改为以另一种方式传递数字，例如使用十进制浮点、作为缩放整数或作为包含十进制数字的字符串。

一旦你澄清了问题陈述，考虑如何用浮点运算来解决它可能会很有趣，而不是调用库函数来格式化输出。这可能具有教学价值（顺便说一句，可能会产生一个比调用库函数在计算上更有效的解决方案）。

# java - 并发代码中赋值运算符的返回值

> ID：12850676
> 
> 赞同：33
> 
> 时间：2012-10-12T00:39:55.523
> 
> 标签：java, concurrency, variable-assignment, jls

给定以下课程：

```
class Foo {
  public volatile int number;

  public int method1() {
    int ret = number = 1;
    return ret;
  }

  public int method2() {
    int ret = number = 2;
    return ret;
  }
} 
```

并且给定多个线程在同一个实例上同时调用`method1()`，对method1（）的调用可以返回1以外的任何东西吗？`method2()``Foo`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T00:50:19.390

我认为答案取决于编译器。语言[规定](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26)：

> 在运行时，赋值表达式的结果是赋值发生后变量的值。

我想理论上这个值可以在第二个（最左边的）赋值发生之前改变。

但是，使用 Sun 的 javac 编译器，`method1`会变成：

```
0:   aload_0
1:   iconst_1
2:   dup_x1
3:   putfield        #2; //Field number:I
6:   istore_1
7:   iload_1
8:   ireturn 
```

这将复制`1`堆栈上的常量并将其加载到`number`然后再加载到`ret`返回之前`ret`。`number`在这种情况下，如果在分配给 之前修改了存储的值，则无关紧要`ret`，因为分配的是`1`not `number`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-12T00:57:58.403

JLS 15.26 规定：

> 有12个赋值运算符；所有在语法上都是右关联的（它们从右到左分组）。因此，a=b=c 表示 a=(b=c)，将 c 的值赋给 b，然后将 b 的值赋给 a。

Ted Hopp 的回答表明 Sun 的 javac 不遵循这种行为，可能是作为一种优化。

由于这里的线程，method1 的行为将是未定义的。如果 Sun 的编译器使行为保持不变，那么它不会中断未定义的行为。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-12T17:05:56.827

该语句要么包含易失性读取，要么不包含易失性读取。这里不能有任何歧义，因为 volatile read 对于程序语义非常重要。

如果 javac 是可信的，我们可以得出结论，该语句不涉及对`number`. 赋值表达式`x=y`的值实际上只是`y`（转换后）的值。

我们也可以推断出

```
 System.out.println(number=1); 
```

不涉及阅读`number`

```
 String s;

    (s="hello").length(); 
```

不涉及阅读`s`

```
 x_1=x_2=...x_n=v 
```

不涉及阅读`x_n, x_n-1, ...`；相反， 的值`v`被直接分配给`x_i`（在通过类型的必要转换之后`x_n, ... x_i`

# css - 指南针可以在单独的行上编译 css 选择器吗？

> ID：12850678
> 
> 赞同：1
> 
> 时间：2012-10-12T00:40:12.043
> 
> 标签：css, sass, compass-sass

`compass compile --output-style expanded`编译如下：

```
.story, .passage {
 color: blue;
} 
```

我希望它在自己的行上使用每个选择器进行编译：

```
.story,
.passage {
 color: blue;
} 
```

# php - Codeigniter 视图显示 0 条记录

> ID：12850682
> 
> 赞同：2
> 
> 时间：2012-10-12T00:40:40.827
> 
> 标签：php, codeigniter, activerecord, foreach

我在`ms_kategori_material`表格中插入了 5 行，并在这里制作了一些模型

```
function read()
{   
    $query = $this->db->get('ms_kategori_material');

    if($query->num_rows()>0)
    {            
        foreach ($query->result_array() as $value) {
            echo $value['Kode_Kategori_Material_Jasa'];
            echo $value['Nama_Material_Jasa'];
        }
        return $value;
    }
    else
    {
        return null;
    }
} 
```

和控制器

```
function index()
{
      $data['kirim'] = $this->m_kategorimaterial->read();
      echo $data; //returns KKMJ001batuKKMJ002batuKKMJ003batuKKMJ004batuKKMJ005batuArray
      $this->load->view('v/vkategorimaterial',$data);

} 
```

和意见

```
<?php  
                if ( !empty($kirim) ) {  
                 $no = 1;   
                 foreach ($kirim as $row) { ?>  
                 <tr id="row">  
                  <td id="no"><?php echo $no;?></td>  
                  <td id="judul"><?php echo $row->Kode_Kategori_Material_Jasa;?></td>  
                  <td id="kategori"><?php echo $row->Nama_Material_Jasa;?></td>  
                    </tr>  ?>
                    <?php  
                     $no++;  
                    }  
                   } else { ?>  
                                <tr id="row">  
                                <td colspan="6" align="center">Data tidak ditemukan</td>  
                               //the screen shows 'data tidak ditemukan' </tr>  
                            <?php  
                   }  
                   ?> 
```

这太令人困惑了，因为我可以在控制器中看到数据，然后将它们传递给视图，视图说没有收到数据

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T00:54:24.600

在你的`model`

```
if($query->num_rows()>0)
{            
    foreach ($query->result_array() as $value) {
        echo $value['Kode_Kategori_Material_Jasa'];
        echo $value['Nama_Material_Jasa'];
    }
    return $value;
} 
```

错了，应该是

```
if($query->num_rows()>0)
{            
    return $query->result();
} 
```

在你的`controller`你应该有

```
function index()
{
  $this->load->model('m_kategorimaterial'); // load it if it's not autoloaded
  $data['kirim'] = $this->m_kategorimaterial->read();
  $this->load->view('v/vkategorimaterial',$data);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T00:49:30.607

只需重新阅读您的代码。您正在返回 $value 但从未填充它。见下文。

```
{   
    $query = $this->db->get('ms_kategori_material');

    if($query->num_rows()>0)
    {            
        $value = $query->result(); // or result_array() but you're using it as an object in the view not an array.
        return $value;
    }
    else
    {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:30:03.657

您实际上并没有在模型中返回结果，

**代替**

```
foreach ($query->result_array() as $value) 
{
 echo $value['Kode_Kategori_Material_Jasa'];
 echo $value['Nama_Material_Jasa'];
} 
```

**和**

```
if($query->num_rows()>0)
{            
  return $query->result();
} 
```

# ios - iOS 从 UIViews 创建 PDF

> ID：12850684
> 
> 赞同：2
> 
> 时间：2012-10-12T00:40:43.573
> 
> 标签：ios, cocoa-touch, pdf-generation, calayer

我目前正在使用`CALayer`and`renderInContext`方法从 iOS 中的 UIView 创建 PDF 文档。

我面临的问题是标签的清晰度。我创建了一个像这样`UILabel`覆盖的子类`drawLayer`：

```
/** Overriding this CALayer delegate method is the magic that allows us to draw a vector version of the label into the layer instead of the default unscalable ugly bitmap */
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx {
    BOOL isPDF = !CGRectIsEmpty(UIGraphicsGetPDFContextBounds());
    if (!layer.shouldRasterize && isPDF)
        [self drawRect:self.bounds]; // draw unrasterized
    else
        [super drawLayer:layer inContext:ctx];
} 
```

这种方法可以让我画出漂亮清晰的文本，但是，问题在于我无法控制的其他视图。有没有什么方法可以让我对嵌入的标签做类似的事情`UITableView`or `UIButton`。我想我正在寻找一种方法来遍历视图堆栈并做一些事情来让我绘制更清晰的文本。

这是一个示例：此文本呈现得很好（我的自定义 UILabel 子类） ![伊姆古尔](../Images/03a93bb057185190ae0d2212799d30ca.png)

标准分段控件中的文本没有那么清晰：

![伊姆古尔](../Images/92ac7dd494556bb33ede11a02df00b74.png)

编辑：我正在获取要绘制到我的 PDF 中的上下文，如下所示：

```
UIGraphicsBeginPDFContextToData(self.pdfData, CGRectZero, nil);
pdfContext = UIGraphicsGetCurrentContext();
UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, 612, 792), nil);
[view.layer renderInContext:pdfContext]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:58:03.383

我最终遍历了视图层次结构并将 each 设置`UILabel`为我的自定义子类覆盖`drawLayer`.

这是我遍历视图的方式：

```
+(void) dumpView:(UIView*) aView indent:(NSString*) indent {
    if (aView) {
        NSLog(@"%@%@", indent, aView);      // dump this view

        if ([aView isKindOfClass:[UILabel class]])
            [AFGPDFDocument setClassForLabel:aView];

        if (aView.subviews.count > 0) {
            NSString* subIndent = [[NSString alloc] initWithFormat:@"%@%@",
                               indent, ([indent length]/2)%2==0 ? @"| " : @": "];
            for (UIView* aSubview in aView.subviews)
                [AFGPDFDocument dumpView:aSubview indent:subIndent];
        }
    }
} 
```

以及我如何更改课程：

```
+(void) setClassForLabel: (UIView*) label {
    static Class myFancyObjectClass;
    myFancyObjectClass = objc_getClass("UIPDFLabel");
    object_setClass(label, myFancyObjectClass);
} 
```

比较：

老的：

![图片](../Images/92ac7dd494556bb33ede11a02df00b74.png)

新的：

![伊姆古尔](../Images/ba212e565db870978f30bdc5a14062c3.png)

不确定是否有更好的方法来做到这一点，但它似乎对我的目的有用。

编辑：找到了一种更通用的方法来做到这一点，它不涉及更改类或遍历整个视图层次结构。我正在使用方法调配。这种方法还可以让你做一些很酷的事情，比如如果你愿意，可以用边框包围每个视图。`UIView+PDF`首先，我使用该方法的自定义实现创建了一个类别`drawLayer`，然后在该`load`方法中使用以下内容：

```
// The "+ load" method is called once, very early in the application life-cycle.
// It's called even before the "main" function is called. Beware: there's no
// autorelease pool at this point, so avoid Objective-C calls.
Method original, swizzle;

// Get the "- (void) drawLayer:inContext:" method.
original = class_getInstanceMethod(self, @selector(drawLayer:inContext:));
// Get the "- (void)swizzled_drawLayer:inContext:" method.
swizzle = class_getInstanceMethod(self, @selector(swizzled_drawLayer:inContext:));
// Swap their implementations.
method_exchangeImplementations(original, swizzle); 
```

从这里的例子开始工作：http: [//darkdust.net/writings/objective-c/method-swizzling](http://darkdust.net/writings/objective-c/method-swizzling)

# iphone - 线程 1：EXC_BAD_ACCESS（代码=1，地址=0x70745092）

> ID：12850688
> 
> 赞同：1
> 
> 时间：2012-10-12T00:41:05.880
> 
> 标签：iphone, objective-c, ios6

所以正如标题所说，我的代码中出现了这个错误。除了通常`(lldb)`的东西外，没有任何输出。它指向的线是

> 0x10df051: 移动 8(%edx), %edi0x10df051: 移动 8(%edx), %edi

代码本身是

```
DeltaViewController *deltaview = [[DeltaViewController alloc] initWithNibName:@"DeltaViewController" bundle:nil]; 
```

当我在我的选择器中选择一个对象并且它应该添加一个子视图时发生了这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:12:29.110

`deltaview`是 DeltaViewController 类型，所以它是一个控制器，而不是一个视图。将其添加为 self.view ([self.view addSubview:deltaview.view];) 的子视图后，您可能会释放`deltaview`. 然后，每当您向 发送一个方法（在 DeltaViewController 中实现）时`deltaview`，您当然会得到这个 EXC_BAD_ACCESS 错误。

一个简单的解决方案：只需`deltaview`将（实际上应该`deltaViewController`改为）声明为 iVar 而不是局部变量。

* * *

### 编辑：

好吧，这是一个简单的代码片段：

你的视图控制器.h：

```
@interface YourViewController : UIViewController

@property DeltaViewController *deltaViewController;

@end 
```

你的视图控制器.m：

```
@implementation YourViewController

@synthesize deltaViewController;
...

- (void)aMethod;

@end

- (void)dealloc {
  self.deltaViewController = nil; // set it to nil & release it after yourViewController dealloced.
  [super dealloc];
}

- (void)aMethod {
  DeltaViewController *deltaViewController = [[DeltaViewController alloc] initWithNibName:@"DeltaViewController" bundle:nil];
  // ...(setup deltaViewController)
  self.deltaViewController = deltaViewController; // it'll retain deltaViewController
  [deltaViewController release];

  ...
} 
```

# mysql - MySQL - 执行此操作的最佳方法是什么

> ID：12850689
> 
> 赞同：0
> 
> 时间：2012-10-12T00:41:06.067
> 
> 标签：mysql, select, distinct, min

我有一张像这样的桌子：

```
| ID | value |
|  0 |   5   |
|  1 |   2   |
|  0 |   1   |
|  1 |   6   |
|  2 |   3   |
|  2 |   8   |
|  1 |   2   |
|  0 |   1   |
|  2 |   4   | 
```

我试图在我的结果中只接受一行 id ，其中 value 是所有列的最小值，例如：

```
SELECT DISTINCT * FROM table WHERE MIN(table.value) = table.value 
```

我该如何解决？谢谢！

编辑：

我想要的输出是：

```
| ID | value |
|  0 |   1   | -> is the min of all the rows with id = 0
|  1 |   2   |
|  2 |   3   | 
```

编辑2：

就像是：

```
SELECT DISTINCT *
FROM tableName AS A
WHERE value = (SELECT MIN(value) From tableName AS B WHERE A.ID=B.ID) 
```

但是tableName是`(SELECT * FROM ...........)`..我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:42:18.327

```
SELECT DISTINCT ID, Value
FROM tableName
WHERE value = (SELECT MIN(value) From tableName) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/f174e3/1)

后续问题，如果最低相同但`value`不同会发生`ID`什么，将显示什么记录？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T01:45:53.817

这个怎么样：

```
SELECT DISTINCT a.ID, a.value
FROM tableName AS a
WHERE a.value = (SELECT MIN(b.value)
                 FROM tableName AS b
                 WHERE a.id = b.id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T02:50:24.067

这就是你想要的

```
select id,min(value) from tableName group by id 
```

# mapping - 插入时的实体框架一对一关系错误

> ID：12850690
> 
> 赞同：2
> 
> 时间：2012-10-12T00:41:23.123
> 
> 标签：mapping, foreign-keys, entity-framework-5, sql-server-2008r2-express

我在让一组实体设置正常工作时遇到了一些麻烦。我在 VS2012 中针对 SQL Server 2008 R2 Express 使用 EF v5。

生成的数据库似乎一切都正确，但我没有成功写入某些表。

我有一个`UserProfile`对象定义如下：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    public long UserId { get; set; }

    [StringLength(56)]
    public string UserName { get; set; }

    public Country Country { get; set; }
    ...
} 
```

我还`Country`定义了如下实体：

```
[Table("Country")]
public class Country
{
    [Key]
    public int Id { get; set; }

    [StringLength(2)]
    public string CountryCode {  get; set; }

    [StringLength(100)]
    public string CountryName { get; set; }

    public ICollection<UserProfile> UserProfiles { get; set; }
    ... 
} 
```

生成的列在数据库中看起来是正确的，如果我编写它看起来不错：

```
ALTER TABLE [dbo].[UserProfile]  WITH CHECK ADD  CONSTRAINT [UserProfile_Country] FOREIGN KEY([Country_Id])
REFERENCES [dbo].[Country] ([Id])
GO 
```

仅出于在控制器操作中进行测试的目的，我有以下内容：

```
WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new 
{
    Country = new Country { Id = 223, CountryCode = "UK", CountryName = "UK" },
    ...
}); 
```

执行此`WebSecurity`方法时，我收到以下错误：

> *不存在从对象类型 MyApi.Data.Entities.Country 到已知托管提供程序本机类型的映射。*

我尝试设置一个配置文件来指定代码和数据库中的关系，但它仍然不友好。

配置看起来像：

```
public class CountryEntityConfig : EntityTypeConfiguration<Country>
{
    public CountryEntityConfig()
    {
        this.HasMany(x => x.UserProfiles)
            .WithRequired()
            .HasForeignKey(FKey => FKey.Country);            
    }
} 
```

在国家对象中列出个人资料列表感觉真的很奇怪，我的一些基础知识完全错了吗？任何输入表示赞赏。

**编辑：**

在我现在拥有的用户配置文件中，我修改了一些课程并进行了一些更改：

```
 public int CountryId { get; set; }

    public virtual Country Country { get; set; } 
```

国家.cs

```
public class Country
{
    public int CountryId { get; set; }

    [StringLength(2)]
    public string CountryCode {  get; set; }

    [StringLength(100)]
    public string CountryName { get; set; }

    public virtual ICollection<UserProfile> UserProfiles { get; set; }
} 
```

并且数据库现在在 UserProfile 表中包含两个 CountryId 相关字段，这些字段与 Country 表有关系，我仍然收到原始错误消息。

TIA,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T05:36:32.970

No mapping 错误可能是因为您没有将 Country 实体添加到 DbContext。

在 AccountModels.cs 文件中，您将找到一个派生自 DbContext 的 UsersContext，您必须在其中添加一个`DbSet<Country>`.

然而，这里还有其他问题。例如，您正在使用 Key 创建 Country 表，EF 默认情况下将为 Country 表提供一个自动生成的标识列。这意味着您不能为 ID 插入值，它将自动生成。

无论如何，Country 可能是一个查找表，您将使用国家值填充它。因此，您可能只需将 CountryId 设置为您想要的国家/地区的值

# ruby-on-rails-3 - Rails：collection_select 命名方法

> ID：12850695
> 
> 赞同：1
> 
> 时间：2012-10-12T00:42:05.940
> 
> 标签：ruby-on-rails-3

有谁知道`collection_select`为文本方法的名称而不是它们的值命名其字段的方法？

我有`print_100`、`print_200`和 ，`print_500`并计划在必要时添加更多。我希望选择框的值从`Billing`所有以开头的字段中读取，`print_`因此选择框只有`100`,`200`和`500`.

```
f.collection_select(:print_quantity, Billing.all, :print_100, :print_100) 
```

有什么想法吗？干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:54:35.680

我对rails的这一部分没有我想的那么熟悉，所以要温柔。

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)

语法是 collection_select(object, method, collection, value_method, text_method, options = {}, html_options = {})

如果您要将第二个参数 ( `method`) 更改为实际方法（而不仅仅是您想要的计费对象的属性），您可以根据需要设置任何值。

如果这不起作用（或者如果您不允许将属性替换为方法），那么您可以使用第 5 或第 6 个参数`value_method`和来使其工作`text_method`，这些参数定义了应将哪些值应用于标签.

无论如何，这个答案主要是为您指出（希望）正确的方向，因为我不确定该方法或它是如何工作的。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:33:08.547

感谢@DavidDraughnn 提出这个解决方案的想法。我在相关助手中编写了一个方法，因此：

```
def get_quantities
  @quantities = {}
  Billing.column_names.each do |a|
    if a.match(/^print_/)
      @quantities[a.delete "print_"] = a.delete "print_"
    end
  end
  return @quantities
end 
```

我已经调整`collection_select`到`select`，因此：

```
<% get_quantities %>
<%= f.select(:print_quantity, @quantities, {:prompt => "Please select..."}) %> 
```

希望对某人有所帮助。

# c# - 使用 Json.Net 反序列化部分 json 块

> ID：12850698
> 
> 赞同：1
> 
> 时间：2012-10-12T00:42:19.427
> 
> 标签：c#, json.net

我正在寻找一种反序列化部分 json 块的好方法。我正在使用 Json.Net。我尝试使用 JsonTextReader 遍历，直到找到我正在寻找的块并将其传递给 JsonSerializer 但它似乎试图从流的开头反序列化。除了接近末尾的“数据”之外，我不关心任何 json。

```
"jquery":[
  [0, 1, "call", ["#form-t3_iqhw5ili"]],
  [1, 2, "attr", "find"],
  [2, 3, "call", [".status"]],
  [3, 4, "attr", "hide"],
  [4, 5, "call", []],
  [5, 6, "attr", "html"],
  [6, 7, "call", [""]],
  [7, 8, "attr", "end"],
  [8, 9, "call", []],
  [1, 10, "attr", "find"],
  [10, 11, "call", ["textarea"]],
  [11, 12, "attr", "attr"],
  [12, 13, "call", ["rows", 3]],
  [13, 14, "attr", "html"],
  [14, 15, "call", [""]],
  [15, 16, "attr", "val"],
  [16, 17, "call", [""]],
  [0, 18, "attr", "insert_things"],
  [18, 19, "call", [
        [{
              "data":{
                 "content":"<div class=\"thing id-t1_c25u9i3 even odd comment \" onclick=\"click_thing(this)\"><p class=\"parent\"><a name=\"c25u9i3\" ></a></p><div class=\"midcol likes\" ><div class=\"arrow upmod\" onclick=\"$(this).vote('f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0', null, event)\" ></div><div class=\"arrow down\" onclick=\"$(this).vote('f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0', null, event)\" ></div></div><div class=\"entry likes\"><div class=\"collapsed\" style='display:none'><a href=\"#\" class=\"expand\" onclick=\"return showcomment(this)\">[+]</a><a href=\"http://www.reddit.com/user/KerrickLong\" class=\"author gray submitter id-t2_4appr\" >KerrickLong</a><span class=\"userattrs\">&#32;[<a class=\"submitter\" title=\"submitter\" href=\"/r/MostlyHarmless/comments/iqhw5/changelog_mostly_harmless_v041_released/\">S</a>]</span>&#32;<span class=\"score dislikes\">-1 points</span><span class=\"score unvoted\">0 points</span><span class=\"score likes\">1 point</span>&#32;<time title=\"Fri Jul 15 16:57:16 2011 GMT\" datetime=\"2011-07-15T16:57:16.209277+00:00\">91 milliseconds</time>&#32;ago &nbsp;<a href=\"#\" class=\"expand\" onclick=\"return showcomment(this)\">(0 children)</a></div><div class=\"noncollapsed\" ><p class=\"tagline\"><a href=\"#\" class=\"expand\" onclick=\"return hidecomment(this)\">[&ndash;]</a><a href=\"http://www.reddit.com/user/KerrickLong\" class=\"author submitter id-t2_4appr\" >KerrickLong</a><span class=\"userattrs\">&#32;[<a class=\"submitter\" title=\"submitter\" href=\"/r/MostlyHarmless/comments/iqhw5/changelog_mostly_harmless_v041_released/\">S</a>]</span>&#32;<span class=\"score dislikes\">-1 points</span><span class=\"score unvoted\">0 points</span><span class=\"score likes\">1 point</span>&#32;<time title=\"Fri Jul 15 16:57:16 2011 GMT\" datetime=\"2011-07-15T16:57:16.209277+00:00\">91 milliseconds</time>&#32;ago</p><form action=\"#\" class=\"usertext\" onsubmit=\"return post_form(this, 'editusertext')\" id=\"form-t1_c25u9i38va\"><input type=\"hidden\" name=\"thing_id\" value=\"t1_c25u9i3\"/><div class=\"usertext-body\"><div class=\"md\"><p>Hey!</p><p><strong><a href=\"http://www.google.com/\">search!</a></strong></p></div>\n</div><div class=\"usertext-edit\" style=\"display: none\"><div><textarea rows=\"1\" cols=\"1\" name=\"text\" >test&#32;comment</textarea></div><div class=\"bottom-area\"><span class=\"help-toggle toggle\" style=\"display: none\"><a class=\"option active \" href=\"#\" tabindex=\"100\" onclick=\"return toggle(this, helpon, helpoff)\" >formatting help</a><a class=\"option \" href=\"#\">hide help</a></span><span class=\"error TOO_LONG field-text\" style=\"display:none\"></span><span class=\"error RATELIMIT field-ratelimit\" style=\"display:none\"></span><span class=\"error NO_TEXT field-text\" style=\"display:none\"></span><span class=\"error TOO_OLD field-parent\" style=\"display:none\"></span><span class=\"error DELETED_COMMENT field-parent\" style=\"display:none\"></span><span class=\"error DELETED_LINK field-parent\" style=\"display:none\"></span><span class=\"error USER_BLOCKED field-parent\" style=\"display:none\"></span><div class=\"usertext-buttons\"><button type=\"submit\" onclick=\"\" class=\"save\" style='display:none'>save</button><button type=\"button\" onclick=\"cancel_usertext(this)\" class=\"cancel\" style='display:none'>cancel</button><span class=\"status\"></span></div></div><table class=\"markhelp md\" style=\"display: none\"><tr style=\"background-color: #ffff99; text-align: center\"><td><em>you type:</em></td><td><em>you see:</em></td></tr><tr><td>*italics*</td><td><em>italics</em></td></tr><tr><td>**bold**</td><td><b>bold</b></td></tr><tr><td>[reddit!](http://reddit.com)</td><td><a href=\"http://reddit.com\">reddit!</a></td></tr><tr><td>* item 1<br/>* item 2<br/>* item 3</td><td><ul><li>item 1</li><li>item 2</li><li>item 3</li></ul></td></tr><tr><td>&gt; quoted text</td><td><blockquote>quoted text</blockquote></td></tr><tr><td>Lines starting with four spaces<br/>are treated like code:<br/><br/><span class=\"spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</span>if 1 * 2 &lt 3:<br/><span class=\"spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>print \"hello, world!\"<br/></td><td>Lines starting with four spaces<br/>are treated like code:<br/><pre>if 1 * 2 &lt 3:<br/>&nbsp;&nbsp;&nbsp;&nbsp;print \"hello, world!\"</pre></td></tr><tr><td>~~strikethrough~~</td><td><strike>strikethrough</strike></td></tr><tr><td>super^script</td><td>super<sup>script</sup></td></tr></table></div></form><ul class=\"flat-list buttons\"><li class=\"first\"><a href=\"http://www.reddit.com/r/MostlyHarmless/comments/iqhw5/changelog_mostly_harmless_v041_released/c25u9i3\" class=\"bylink\" rel=\"nofollow\" >permalink</a></li><li><a class=\"edit-usertext\" href=\"javascript:void(0)\" onclick=\"return edit_usertext(this)\">edit</a></li><li><form class=\"toggle del-button\" action=\"#\" method=\"get\"><input type=\"hidden\" name=\"executed\" value=\"deleted\"/><span class=\"option active\"><a href=\"#\" onclick=\"return toggle(this)\">delete</a></span><span class=\"option error\">are you sure? &#32;<a href=\"javascript:void(0)\" class=\"yes\" onclick='change_state(this, \"del\", hide_thing)'>yes</a>&#32;/&#32;<a href=\"javascript:void(0)\" class=\"no\" onclick=\"return toggle(this)\">no</a></span></form></li><li><form action=\"/post/remove\" method=\"post\" class=\"state-button remove-button\"><input type=\"hidden\" name=\"executed\" value=\"removed\" /><span><a href=\"javascript:void(0)\" onclick=\"return change_state(this, 'remove');\">remove</a></span></form></li><li class=\"toggle\"><form method=\"post\" action=\"/post/distinguish\"><input type=\"hidden\" value=\"distinguishing...\" name=\"executed\"/><a href=\"javascript:void(0)\" onclick=\"return toggle_distinguish_span(this)\">distinguish</a><span class=\"option error\">distinguish this? &#32;<a href=\"javascript:void(0)\" onclick=\"return set_distinguish(this, 'yes')\">yes</a>&#32;/&#32;<a href=\"javascript:void(0)\" onclick=\"return set_distinguish(this, 'no')\">no</a>&#32; /&#32;<a class=\"nonbutton\" href=\"/help/moderation#Distinguishing\">help</a>&#32;</span></form></li><li><a class=\"\" href=\"javascript:void(0)\" onclick=\"return reply(this)\">reply</a></li></ul></div></div><div class=\"child\" ></div><div class=\"clearleft\"><!--IE6sux--></div></div><div class=\"clearleft\"><!--IE6sux--></div>",
                 "contentHTML":"<div class=\"md\"><p>Hey!</p><p><strong><a href=\"http://www.google.com/\">search!</a></strong></p></div>",
                 "contentText":"Hey!\n\n**[search!](http://www.google.com/)**",
                 "id":"t1_c25u9i3",
                 "link":"t3_iqhw5",
                 "parent":"t3_iqhw5",
                 "replies":""
              },
              "kind":"t1"
           }],
        false
     ]
  ], 
```

我也有一个数据类：

```
public class AddCommentData
{
    public string content { get; set; }
    public string contentHTML { get; set; }
    public string contentText { get; set; }
    public string id { get; set; }
    public string link { get; set; }
    public string parent { get; set; }
    public string replies { get; set; }
} 
```

这里的最佳实践？

**编辑：** 我尝试过这样的事情......

```
 var serializer = new JsonSerializer();
        var reader = new JsonTextReader(new StringReader(results));
        while (reader.Read())
        {
            if (reader.Value != null)
            {
                if(reader.TokenType == JsonToken.PropertyName && reader.Value.ToString() == "data")
                {
                    return serializer.Deserialize<AddCommentData>(reader);

                }
            }
        } 
```

# c++ - 为什么我的 boost::multi_index modify() 没有编译？

> ID：12850699
> 
> 赞同：0
> 
> 时间：2012-10-12T00:42:21.013
> 
> 标签：c++, templates, boost

我正在使用`boost::multi_index_container`并正在尝试使`modify`操作正常进行。我的修改例程看起来像这样（大致），使用函数内部类：

```
void FooContainer::modifyAttribute(string key, int newValue) {
    struct ModifyFunc {
        int val;
        ModifyFunc(int val): val(val) {}
        void operator()(Foo &f) {
            foo.val = val;
        }
    };
    StorageContainer::index<keyTag>::type &idx = mContainer.get<keyTag>();
    StorageContainer::index<keyTag>::type::iterator iter = idx.find(key);
    idx.modify(iter, ModifyFunc(newValue));
} 
```

当我尝试编译它时，我得到一个多页的编译器错误，如下所示（大部分都省略了）：

```
FooContainer.cpp:##: error: no matching function for call to [...]::modify([...]&, FooContainer::modifyAttribute(string,int)::ModifyFunc)’ 
```

这个调用有什么问题，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:42:21.013

问题是编译器无法将函数内部类识别为模板参数的有效类型名。这并不明显，但该`multi_index_container::index<T>::type::modify`方法使用修改参数的类型作为模板参数，这是一个通常隐藏在视图中的细节。但是，请查看它的声明，例如`boost/multi_index/hashed_index.hpp`：

```
template<typename Modifier>
bool modify(iterator position,Modifier mod) 
```

简单的解决方法是使`ModifyFunc`结构不是函数内部类；琐碎地，使其内部`FooContainer`而不是`FooContainer::modifyAttribute`方法。当然，这也意味着您可以在`ModifyFunc`其他地方重用该类，如果事实证明您在多个地方需要它。

# twitter-bootstrap - JQuery 表单验证在 Firefox 上非常缓慢

> ID：12850701
> 
> 赞同：0
> 
> 时间：2012-10-12T00:42:28.990
> 
> 标签：twitter-bootstrap, jquery-validate

我正在使用 jquery-validate 结合 twitter 引导程序在页面上进行一些简单的表单验证。

在 Chrome 上，它可以完美运行，没有任何延迟，但在 FireFox 上却存在可怕的延迟，文本出现的时间远远晚于按键。除此之外，它工作正常。

这是我的代码，我做错了吗？

```
<form class="form-horizontal" id="enrolform" method="post">  
<fieldset>
<legend>Enrolment Form <small>* required fields</small></legend>
<div class="control-group" >
  <label class="control-label" for="invite">Invite Code *</label>
  <div class="controls">
    <input type="text" class="input-xlarge" name="invite" id="invite"> 
  </div>
</div> 
<div class="control-group">
  <label class="control-label" for="first">First Name *</label>
  <div class="controls">
    <input type="text" class="input-xlarge" name="first" id="first" value="{{ first }}" >
  </div>
</div> 
<div class="control-group">
  <label class="control-label" for="last">Last Name *</label>
  <div class="controls">
    <input type="text" class="input-xlarge" name="last" id="last" value="{{ last }}">
  </div>
</div> 
<div class="control-group">
  <label class="control-label" for="email">Email Address *</label>
  <div class="controls">
    <input type="text" class="input-xlarge" name="email" id="email" value="{{ email }}" >
  </div>
</div>
<div class="control-group">
  <label class="control-label" for="phone">Phone Number</label>
  <div class="controls">
    <input type="text" class="input-xlarge" name="phone" id="phone" class="required" value="{{ phone }}" >
  </div>
</div> 
<div class="control-group">
  <label class="control-label" for="mobile">Mobile Number</label>
  <div class="controls">
    <input type="text" class="input-xlarge" name="mobile" id="mobile" value="{{ mobile }}" >
  </div>
</div> 
<div class="form-actions">
    <button type="submit" class="btn btn-primary btn-large"\">Enrol</button> 
</div> 
</fieldset>
</form> 

<script>

$(document).ready(function(){

var validator = $('#enrolform').validate(
{
 rules: {
 invite: {
  minlength: 2,
  required: true
},
email: {
  required: true,
  email: true
},
first: {
  required: true
},
last: {
  required: true
},
phone: {
  digits: true
},
    mobile: {
  digits: true
}
},
highlight: function(label) {
$(label).closest('.control-group').addClass('error');
},
success: function(label) {
label
  .text('OK!').addClass('valid')
  .closest('.control-group').addClass('success');
}
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:48:27.883

我怀疑是因为 FireBug html 调试器插件。

我尝试在没有安装 firebug 插件的情况下从另一台机器登录，并且验证就像一个魅力。

# c# - 将一些位移代码从 C++ 复制到 C#

> ID：12850702
> 
> 赞同：6
> 
> 时间：2012-10-12T00:42:44.900
> 
> 标签：c#, c++, bit-shift

我正在尝试将枚举从 C++ 代码转换为 C# 代码，但我无法理解它。C++ 代码是：

```
enum FOO {
  FOO_1 = 0,
  FOO_2,
  // etc
 }

#define MASK(x)  ((1 << 16) | (x))

enum DISP
{
  DISP_1 = MASK(FOO_1),
  DISP_2 = MASK(FOO_2),
  // etc
} 
```

我不明白的是 MASK 在做什么，以及我如何在 C# 中模拟该功能，或者了解它在做什么并在没有它的情况下手动设置枚举 DISP。

我不确定我所说的是否有道理，但是当我不完全确定我在看什么时，这是可以预料的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T00:52:55.083

当您进行位移时，它会将所有 1 和 0 向左或向右移动一些值。

在您的情况下`1 << 16`，以二进制创建 10000000000000000 。（是的，那是 16 个零）。

然后它采用该数字并使用`|`哪个是按位或运算符。因此，无论枚举的整数值是什么，它都会按位或按位或移位到我们移位的那个数字中。

例如，如果您使用`MASK(FOO_4)`（其文字值为 3）3 在二进制中是 11，因此结果将是 10000000000000011。这在功能上与将 65,536 加到每个值相同。

现在，当我们声明第二个枚举时，我们将这些枚举值的值设置为这个奇怪的屏蔽函数。

要在 c# 中做同样的事情，试试这个：

```
enum Foo { //this may not be needed anymore?
   FOO_1 = 0, FOO_2, ... etc
}

enum Disp { //DISP_2 gets the next value ie 65536 + 1, and so forth
   DISP_1 = 65536, DISP_2, DISP_3, ... etc 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T00:52:03.310

`MASK(x)`通过对带有二进制数的数字进行`OR`-ing构造一个数字（向左移动 16 次）。`x``10000000000000000`

在 C# 中，您可以直接使用表达式，如下所示：

```
enum FOO {
    FOO_1 = 0,
    FOO_2,
    // etc
}

enum DISP
{
    DISP_1 = (1<<16) | (int)(FOO.FOO_1),
    DISP_2 = (1<<16) | (int)(FOO.FOO_2),
    // etc
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T00:51:34.633

只需将其替换`MASK`为定义的内容（`<<`and`|`运算符也存在于 C# 中）：

```
enum DISP
{
    DISP_1 = ((1 << 16) | FOO.FOO_1),
    DISP_2 = ((1 << 16) | FOO.FOO_2)
} 
```

* * *

如果您想知道 shift 和 or 运算符到底是做什么的，那么您将获取 的二进制值`0000000000000001`并将其向左移动 16 个值：`1000000000000000`.

另一个例子，`(000001101 << 3)`变成`001101000`。

or 运算符从任一操作数中获取所有 1 值并将结果的值设置为 1。

例如，`0001 | 0110`变成`0111`。

那么，以 DISP_2 为例：

```
 (0b00000000000000001 << 16) | 0b00000000000000010)
= (0b10000000000000000 | 0b00000000000000010)
= (0b10000000000000010)
= 65538 
```

（我知道该`0b`格式在 C# 中不起作用，在 C 中也不是标准格式，但使用二进制表示法而不是十六进制更有用，更容易看到运算符在做什么）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T00:55:27.700

位移位运算符在 C# 中有效，但定义宏不可用。

要了解发生了什么，您可以做的是分别计算这些值，然后将它们放入枚举中。

当然你知道那`|`是按位或运算符。以防万一操作员`<<`将二进制文件向左移动：

```
1 << 16 = 10000000000000000_2 //those are 16 zeroes and _2 indicates binary 
```

反过来：

```
10000000000000000_2 = 65536 
```

这相当于将数字乘以第二个操作数指示的次数。

```
1 << 1 = 2
1 << 2 = 4
1 << 3 = 8 
```

没错，就是将数字乘以 2 的幂：

```
1 << 1 <=> 1 * 2^1 = 2
1 << 2 <=> 1 * 2^2 = 4
1 << 3 <=> 1 * 2^3 = 8 
```

现在，从那时`FOO_1 = 0`起

```
DISP_1 = MASK(FOO_1)
=>
DISP_1 = ((1 << 16) | (FOO_1))
=>
DISP_1 = (65536 | (FOO_1))
=>
DISP_1 = (65536 | FOO_1)
=>
DISP_1 = (65536 | 0)
=>
DISP_1 = 65536 
```

做同样的`FOO_2`事情，我取值为 1 会给你：

```
DISP_2 = (65536 | FOO_2)
=>
DISP_2 = (65536 | 1)
=>
DISP_2 = 65537 
```

* * *

话虽如此，以下工作正常：

```
enum FOO
{
    FOO_1 = 0,
    FOO_2,
    // etc
}

enum DISP
{
    DISP_1 = (1<<16) | (int)(FOO.FOO_1),
    DISP_2 = (1<<16) | (int)(FOO.FOO_2),
    // etc
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T00:54:30.220

DISP_x 相等的数值：

```
DISP_1 == 0x10000
DISP_2 == 0x10001
DISP_3 == 0x10002
... 
```

# jetty - 使用 jre 的 java.exe 运行 jetty-runner

> ID：12850703
> 
> 赞同：0
> 
> 时间：2012-10-12T00:43:00.717
> 
> 标签：jetty

有什么方法可以使用 jre 的 java.exe在[jetty-runner](http://webtide.intalio.com/2008/04/jetty-runner/)中运行我的战争文件？如果我使用 jdk 的 java.exe 运行它，它工作正常。但是当我使用 jre 的 java.exe 运行它时，Spring and Tiles 无法正常工作。我收到以下异常。

org.apache.tiles.impl.CannotRenderException: ServletException 包括路径'/W..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:05:27.790

Jetty 本身可以像这样使用 jre 运行良好，但是如果您使用 jsp 之类需要 jdk 编译的东西，那么您需要一个 jdk 或带有类路径和 jsp 设置的猴子，以确保它使用我们分发的 ejc 依赖项用我们的jsp jars。这一切都假设它是使用jsps的spring/tiles，如果他们对jdk有其他要求，我不能说。

再次假设 jsps，如果您绝对必须使用 jre 运行，请交替考虑预编译这些 jsps。有很多方法，我们有一个 maven 插件'org.mortbay.jetty:jetty-jspc-maven-plugin'，我知道它也有 ant 任务。

干杯

# css - div的CSS Magento错位

> ID：12850704
> 
> 赞同：0
> 
> 时间：2012-10-12T00:43:04.510
> 
> 标签：css, magento

我正在建立一个 Magento 网站，并从 Themeforest 为 Magento 购买了一个主题。然后，我向主题添加了背景图像，而不是默认的白色页面背景。

现在似乎正在发生的事情是整个侧面的主 div 都被推到了右侧，但只有在 Chrome 等某些浏览器中查看时，并且只有在您在大屏幕上查看网站时。更具体地说，在我的 18 英寸 PC 显示器上，使用 Chrome、FF 和 IE，该网站看起来不错，但是当一位同事去查看该网站并且他有一个更大的显示器时，他说该网站在 Chrome、FF 中看起来不同等等

此外，如下图所示，他的屏幕截图中存在错位：http: [//bit.ly/QnlrVA](http://bit.ly/QnlrVA)

但是，我无法重现这一点，甚至无法弄清楚 css 问题。

如果人们可以查看并提供反馈，该网站位于[http://bit.ly/R1RV8S](http://bit.ly/R1RV8S)

另一个问题是，当您查看特定类别的产品列表页面时，产品列表会右对齐。结果，正常的右侧列框（比较产品框等）下拉到新行，而不是在产品列表旁边。这发生在我的计算机显示器以及其他所有人以及所有浏览器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:03:37.810

对于背景 - 你只需要一个更宽的图形。喜欢> 1600px。您当前的背景图像太小而无法覆盖宽屏幕。您还可以将`background-color`道具设置为“黑色”或您需要的任何颜色（某种深蓝色）。或将其设置为重复。

就右栏问题而言 - 进入 `catalog -> manage categories -> <your category> ->design ->custom design`并尝试两栏布局之一（可能是带有右栏的 2 栏）。

在您的主题中，“col-wrapper”规则+“右列”大于您的整体宽度，因此将其撞倒。其他布局之一可能会解决此问题...或者您可以尝试更改该列的值。（请注意，这样做会导致意外更改 - 因此请彻底测试您的主题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:03:48.567

我现在没有大屏幕来测试它，但这应该会有所帮助：

```
body         
 {
    background:url(../images/stymulus_bg_pg.jpg); 
    font:12px/1.55 Arial, Helvetica, sans-serif; color:#666; 
    text-align:center; 
    background-repeat:no-repeat;
    position:absolute;      /*this */
    left:0px;                   /* and this */
    width:   **set to the width of the background image , it shouldn't strech***
  } 
```

这将使您的整个身体绝对位于左侧，并且它还将阻止任何东西从身体外部进入，除非有东西故意试图离开它的父母。

# assembly - 32bit intel 汇编比较和跳转

> ID：12850709
> 
> 赞同：0
> 
> 时间：2012-10-12T00:44:17.947
> 
> 标签：assembly, intel, 32-bit

看起来这应该可以，但是在输入值后我不断收到分段错误。有什么建议吗？

```
.section .data

speed: .int 0
fine: .int 0
points: .int 0

inputPrompt: .asciz "Enter an integer value for speed ==> "
outputPrompt: .asciz "With a speed of %d the fine will be $%d and %d points will be added to your license"

inputSpec: .ascii "%d"

.section .text #read in values

.globl main

main: 
    nop

    pushl   $inputPrompt

    call    printf

    addl    $4, %esp

#read in speed value    

    pushl   $speed

    pushl   $inputSpec

    call scanf

    addl    $8, %esp

#-------------------greater than or equal to 86--------------------------

movl    speed,   %eax

subl    $85,     %eax   

Jg  fine4

#-------------------81 - 85---------------------------------------------

movl    speed,   %eax

subl    $80,     %eax

Jg  fine3

#-------------------76 - 80---------------------------------------------

movl    speed,   %eax

subl    $75,     %eax   

Jg  fine2

#-------------------71 - 75---------------------------------------------

movl    speed,   %eax

subl    $70,     %eax   

Jg  fine1

#-----------------less than 71-----------------------------------------------

movl    $0,     fine
movl    $0,     points

JMP output

 #---------------------71 - 75-------------------------------------------

fine1:
movl    $60,        fine

movl    $2,     points

JMP output

#---------------------76 - 80-------------------------------------------

fine2:
movl    $90,        fine

movl    $3,     points

JMP output

#---------------------81 - 85-------------------------------------------

fine3:
movl    $120,       fine

movl    $4,     points

JMP output

#---------------------less than or equal to 86------------------------------------------

fine4:
movl    $150,       fine

movl    $6,     points

#----------------------------------------------------------------

output:
pushl   points
pushl   fine
pushl   speed
pushl   outputPrompt

call printf

addl $8, %esp

#-----------------------------------------------------------------
call exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:41:09.757

您缺少`$`登录信息`pushl outputPrompt`。该指令将前 4 个字节放入`outputPrompt`堆栈，但您需要地址。因此使用`pushl $outputPrompt`

此外，学习使用调试器，以便您可以修复自己的错误。

# ios - 如何使用 FBTestSession

> ID：12850710
> 
> 赞同：3
> 
> 时间：2012-10-12T00:44:19.653
> 
> 标签：ios, facebook, facebook-fql, facebook-ios-sdk

我正在构建一个本机 iOS 应用程序，该应用程序将允许用户登录 Facebook 并“喜欢”Open Graph 对象。我正在尝试为执行内置喜欢的代码编写单元测试。我在 Facebook 应用程序的管理网页中创建了测试用户，我想在单元测试中以测试用户身份登录，“喜欢”一个打开的图形对象，检查以确保“喜欢”的数量'改变，然后'不喜欢'它。

我正在使用 Facebook iOS SDK，它带有 FBTestSession，我认为它非常适合我的需求。我的理解是它会随机抓取一个测试用户以登录（或者如果你愿意，可以创建一个临时用户）。但是，有几个问题，我没有看到任何解释它的文档。

第一个问题：它尝试从 Documents 目录加载 FacebookSDK-UnitTestConfig.plist 以读取 AppID 和 AppSecret。为了解决这个问题，我制作了这样一个文件，并在测试开始时将其复制到 Documents 目录中。这是正确的做法吗？

第二个问题是，当我尝试打开测试会话时，它会抛出一个错误，带有 400 响应代码并且没有有用的消息。查看它尝试发出的请求，似乎它正在使用 fql 来查询所有测试帐户。当我在网络浏览器中输入适当的 URL

`https://graph.facebook.com/fql?access_token=ACCESS_TOKEN&q=SELECT id,access_token FROM test_account WHERE app_id = APP_ID)`

我收到错误消息“（＃15）本机应用程序不支持此方法”。但显然 FBTestSession 是为原生应用程序设计的，那么到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:56:33.553

根据他们的文档，它不适用于应用程序代码：

[http://developers.facebook.com/docs/reference/ios/3.0/class/FBTestSession](http://developers.facebook.com/docs/reference/ios/3.0/class/FBTestSession)

> 此方法不应在应用程序代码中使用——但对于创建使用 Facebook SDK 的单元测试很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:59:58.870

使用 FBTestSession 很简单，它会在打开时创建一个测试用户，并在关闭时销毁它。在您可以像经典会话一样使用会话之后（内部 FBTestSession 继承自 FBSession）：

```
FBSession *fbSession = [FBTestSession sessionWithPrivateUserWithPermissions:@[@"publish_stream", @"email"]];
[fbSession openWithCompletionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
    // Test here, you can use the session.accessToken attribute
} 
```

我遇到了一些麻烦`FacebookSDK-UnitTestConfig.plist`，我认为 Facebook SDK 中有一些奇怪的东西，我查看了代码并构建了这个 plist 的路径，他们正在寻找文档目录：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *configFilename = [documentsDirectory stringByAppendingPathComponent:@"FacebookSDK-UnitTestConfig.plist"]; 
```

测试的时候文档目录和我们在模拟器中执行一个App的时候不一样，我打印出来是：

```
/Users/{user}/Library/Application Support/iPhone Simulator/{iOS_version}/Documents/ 
```

如果你把你的 plist 放在那里应该可以工作。您的 plist 文件具有字典结构并包含 2 个键：`FacebookAppID`和`FacebookAppSecret`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:08:36.323

只要它是真的，因此不会给您的应用程序带来安全风险，请将您的 Facebook 应用程序的*高级*设置中的**App Secret in Client**值更改为**No**。这应该让您可以使用您的应用访问令牌来请求测试用户信息。

 ***如果您的应用程序确实在分布式本机代码中包含应用程序机密，则可能会被发现并因此损害您的应用程序的安全性。我认为这就是为什么 FB 在您拥有本机应用程序时默认打开此设置的原因。***

# django - 返回表单错误的ajax选择字段

> ID：12850716
> 
> 赞同：1
> 
> 时间：2012-10-12T00:44:56.347
> 
> 标签：django, django-forms

我有一个表单，它会在用户从“地址”字段中跳出后触发对视图的 ajax 请求。它检索邮政编码，然后使用相同的邮政编码填充取件。问题是，如果有任何表单错误，我从 get_pickups 视图生成的结果下拉列表会丢失。我怎样才能保留它，以便即使出现表单错误它也会保留结果

```
def get_pickups(request):   

    if request.is_ajax():   
        # Get available pickup dates based upon zip code
        zip = request.POST.get('zip',None)
        routes = Route.objects.filter(zip=zip).values_list('route',flat=True)       

        two_days_from_today = date.today() + relativedelta(days = +2)

        submitted_from = request.POST.get('template',None)
        if submitted_from == '/donate/':
            template = 'donate_form.html'
            results = PickupSchedule.objects.filter(route__in=routes,date__gt = two_days_from_today, current_count__lt=F('specials')).order_by('route','date')
        else:
            template = 'donate-external.html'
            results = PickupSchedule.objects.filter(route__in=routes,date__gt = two_days_from_today, current_count__lt=F('specials')).order_by('date')          

        return render_to_response(template,{ 'zip':zip, 'results':results}, context_instance=RequestContext(request)) 
```

我通过 jquery 的 ajax 调用：

```
$.ajax({
        type: "POST",
        url:"/get_pickups/",
        data: {
        'zip': zip,
        'template':template
        },
        success: function(data){            

                results = $(data).find('#results').html()           
                $("#id_pickup_date").replaceWith("<span>" + results + "</span >");      
        },
        error: function(){
            alert("Error");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:24:21.567

我可以想到两种方法：

1.  将该下拉列表的内容附加到您的 POST 并在出现错误时将其与其他字段中的数据一起返回（缺点：增加了服务器代码的复杂性）
2.  使用 javascript 检查页面加载/重新加载时该 zip 字段是否为非空。如果它不为空（例如错误返回），请调用您的 ajax 查找该下拉列表（缺点：重复计算）

我会使用您认为最熟练的任何解决方案（python/django 或 javascript）

# jquery - 将元素定位在树的上方

> ID：12850719
> 
> 赞同：0
> 
> 时间：2012-10-12T00:45:35.783
> 
> 标签：jquery, html, css, jquery-selectors

我需要抓住一个特定的元素。`a`我有一个在我单击标签时触发的事件。我无法到达它，因为我只能影响`ul`a 标签在里面。我要选择的元素有一个`target`. 显而易见的答案是 select `target`，但是有多个目标类。我的问题是如何定位我想要的元素。下面是代码。

```
<div id="section">
    <div id="target">
        Here is the div that I want to target. But I can't target it.
    </div>

    <div>
        <ul>
            <li></li>
            <a>Clicking here triggers the event.</a>
            <li></li>
        </ul>
    </div>
</div>

<script>
    $(a).parentsUntil('#section').children(':gt(0)').children(':gt(2)').css('color','red');
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:12:10.273

```
$('a').parents('#section').find('#target').css('color', 'red'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T00:48:24.893

首先，您需要将您的代码包含在 DOM Ready Handler 中。

```
$(function() {
    // Your code Here
}); 
```

其次，您的选择器错误

应该是`$('a')` 代替`$(a)`

试试这个代码

```
$(this).closest('div').prev('#target').css('color', 'red'); 
```

或者

```
$('a').parents('#section').find('#target').css('color', 'red'); 
```

**[检查演示](http://jsfiddle.net/sushanth009/6DuTn/)**

```
$(function() {
    $('a').on('click', function() {

        $(this).closest('div').prev('#target').css('color', 'red');
    });
});​ 
```

# qt - 如何在 QML 中显示 WebView 的图标？

> ID：12850723
> 
> 赞同：0
> 
> 时间：2012-10-12T00:45:44.703
> 
> 标签：qt, webkit, qml

我正在使用 WebKit 在 QML 中编写一个简单的 Web 浏览器。

该`WebView`元素具有`icon`类型`pixmap`(QVariant::Pixmap) 的属性。我想在 QML 中显示这个图标。

在 QML 稳定之前，`Image`元素有`pixmap`type的属性`pixmap`，被其他人用来显示`WebView`元素的图标。

但`Image.pixmap`已被删除。

现在如何在 Image 元素上设置图标？我真的必须使用 C++ 解决这个问题`QDeclarativeImageProvider`吗？最直接的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:48:15.853

使用 QtWebkit3：

```
import QtQuick 2.0
import QtWebKit 3.0

WebView {
    id: webview;
}
Image {
    source: webview.icon;
} 
```

由于[图标](http://qt-project.org/doc/qt-5.0/qtwebkit/qml-qtwebkit3-webview.html#icon-prop)是作为 URL 提供的，因此可以直接按`Image`项目使用。

# c++ - 从 std::string C++ 中提取任意数据值

> ID：12850725
> 
> 赞同：1
> 
> 时间：2012-10-12T00:46:00.320
> 
> 标签：c++, string, alphanumeric

我有这样的字符串

```
10z45
9999i4a 
```

基本上`int-char-int-optionalchar`

我想做这个函数原型

```
void process(std::string input, int &first, char &c, int &last, bool &optional) 
```

唯一的问题是我不确定迭代字符串以提取这些值的最佳方法。宁愿不使用正则表达式库，似乎可以简单地完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T00:52:21.923

使用字符串流：

```
#include <sstream>
...
std::istringstream iss(input);
iss >> first >> c >> last >> optional; 
```

如果没有最终字符，`optional`则不会触及 的值，因此我建议事先将其设置为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T00:54:00.523

使用`std::istringstream`，读取 int、char、int，然后尝试下一个 char：

```
std::istringstream is(input);
is >> first >> c >> last;
char c2;
optional = (is >> c2); 
```

我不确定这是 100% 你想要的——但我会这样做。

# ubuntu - Yii、apache2 和子域

> ID：12850730
> 
> 赞同：1
> 
> 时间：2012-10-12T00:46:50.990
> 
> 标签：ubuntu, yii, apache2

我希望这不会被标记，因为它不一定是关于代码的问题。我在开发 ubuntu 服务器上有几个站点。我已经成功安装了 yii 框架。我使用 yiic 在此服务器上创建了一个域/站点，并且该站点已启动并正常运行。今天我去给这个站点添加一个子域，好吧，现在我很困惑。我进入 etc/apahe2/sites-available 为子域添加记录，我很惊讶地发现原始域没有列表。此服务器上的每个其他站点都有一个文件，除了使用 yiic 创建的那个。如果没有站点可用或站点启用中的文件，该站点如何在 apache 上工作？更重要的是，我到底如何创建子域？是否可以简单地将现有域作为 doc root 进行 yiic？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T07:32:21.960

在你的本地主机上运行 yiic 工具并将生成的文件上传到子域

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:30:12.647

通常 ubuntu 使用 /etc/apache2/sites-available/default 作为默认域。您可以使用该文件来配置您的子域

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T10:21:31.737

我不认为网站需要有一个文件`/etc/apache2/sites-available`才能工作。

您可以很好地运行一个网站，`localhost/yourwebsitename`并且它可以在没有条目的情况下运行`sites-available`。

我的建议是：复制默认文件`sites-available`，然后更改文件内容以匹配根目录和您希望虚拟主机（子域）拥有的名称。然后运行`a2ensite <yoursitename>`为您启用它。之后不要忘记重新启动apache。

附注：一个虚拟主机（如果你执行我上面描述的过程，你会得到）是你应该做的，以便让一个 URL`yourapp.yourwebsite.com`指向一个特定的文件夹（你将有你的 Yii 应用程序主条目文件）。

如果你只是想拥有，`yoursite.com/yourapp`那么你不需要为它创建一个虚拟主机。只需将 Yii 项目放在下面`/var/www/yourapp`，您就可以通过`localhost/yourapp`.

# backbone.js - 类型错误：Backbone.Router 未定义

> ID：12850732
> 
> 赞同：0
> 
> 时间：2012-10-12T00:47:17.997
> 
> 标签：backbone.js

我一直在阅读[Derick Bailey](http://www.watchmecode.net/)的一组精彩教程，并遇到了添加路由器的问题。在 IE 中，它将错误描述为： SCRIPT5007：无法获取属性“扩展”的值：对象为空或未定义（在 IE 中）未捕获的类型错误：无法调用未定义的方法“扩展”（在 Chrome 中）

我确实读过这个问题：[uncaught-typeerror-cannot-call-method-extend-of-undefined 有问题的代码在这里：](https://stackoverflow.com/questions/8762169/uncaught-typeerror-cannot-call-method-extend-of-undefined)，但我确实通过 HTTPWatch 验证了下划线已加载到页面的 html 中。此外，在同一个文件的大约 100 行之前，我为另一种方法调用下划线。据我所知，代码与教程中的内容一致。

```
ImageGallery.Router = Backbone.Router.extend({
routes: {
    "images/:id": "showImage"
},
initialize: function (options) {
    this.collection = options.collection;
},
showImage: function (id) {
    var image = this.collection.get(id);
    ImageGallery.showImage(image);
} 
```

});

任何见解将不胜感激。

我将其余的主干代码放在 JSFiddle 上[http://jsfiddle.net/poundingCode/4ekU3/b/c](http://jsfiddle.net/poundingCode/4ekU3/)太难格式化了。

# google-app-engine - Google App Engine：如何执行远程部署到开发应用服务器？

> ID：12850734
> 
> 赞同：0
> 
> 时间：2012-10-12T00:47:26.843
> 
> 标签：google-app-engine, deployment, ant

我正在为我的 GAE 应用程序设置“QA 环境”。这个 QA 环境将只是我的家庭网络上的一个小型服务器，具有专用的 IP 地址。我正在编写一个 Ant 脚本来从我的 SVN 存储库中检查项目，在我的构建服务器上构建它，然后将它“远程”（通过我的家庭 LAN）部署到 QA 应用服务器。

使用 Tomcat，我只需`scp`将 Web 存档保存到机器的`webapps/`目录中，并且由于它可以配置为热部署，这就是我通常需要进行 QA 部署的全部内容。

但是我是 GAE 的新手，所以我不知道如何通过 Ant 实现这样的远程部署。我能想到的最好的（虽然有些令人费解）是：

1.  像我通常那样在构建服务器上签出并构建 WAR
2.  `scp`WAR 到 QA 机器上某处的暂存目录；说`192.168.1.55:/opt/gae/staging`
3.  在该机器（可能由 Tomcat 或 Jetty 托管）上运行一个轻量级 RESTful Web 服务，以监听客户端访问某个 API，例如`http://192.168.1.55:8080/GaeRemoteApi/deploy`；当请求处理程序收到对该 URL 的请求时，它会启动一个 shell 命令以将 WAR 复制到正确的目录中，然后执行`appcfg.sh -upload`以将 WAR 实际部署到我的 QA 应用程序服务器

我很确定我可以在一两天内完成这项工作，但我想知道 GAE 是否提供了更简单（成熟）的解决方案；或者，如果一双新的眼睛能想到更简单的事情。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:51:34.450

运行开发服务器？

[https://developers.google.com/appengine/docs/java/tools/devserver](https://developers.google.com/appengine/docs/java/tools/devserver)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T01:01:36.917

我认为你应该保持简单：

由于您使用的是 Ubuntu，因此您可以编写一个 shell 脚本，该脚本将：

1.  ssh 到远程服务器
    *   停止当前的 gae dev appserver
    *   重命名现有的war目录
2.  将新部署 scp 到 QA 服务器的 war 目录
3.  ssh 到 QA 服务器并启动 gae dev appserver

您可以使用以下命令从 ant 调用 shell 脚本：http: [//sumedha.blogspot.com.au/2008/06/how-to-call-shell-script-from-ant.html](http://sumedha.blogspot.com.au/2008/06/how-to-call-shell-script-from-ant.html)

停止开发应用服务器：

```
killall -e ./appengine-java-sdk/bin/dev_appserver.sh 
```

运行开发应用服务器：

```
nohup ./appengine-java-sdk/bin/dev_appserver.sh you/war/directory & 
```

# amazon-ec2 - 无法登录自定义 ami

> ID：12850735
> 
> 赞同：0
> 
> 时间：2012-10-12T00:47:35.407
> 
> 标签：amazon-ec2

我正在尝试启动一个在此处找到的实例...

[https://aws.amazon.com/amis/aws-tools](https://aws.amazon.com/amis/aws-tools)

实例已启动，但当我尝试登录时，我收到以下消息：

```
ssh -i oct9.pem root@ec2-50-16-125-42.compute-1.amazonaws.com
Permission denied (publickey,gssapi-keyex,gssapi-with-mic). 
```

如果我使用内置向导启动一个新实例，它可以使用相同的 .pem 键按预期工作。

直到最近，此 AMI 都按预期工作。我以前用过几次。我想使用它，因为它预装了几个实用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:49:06.783

当您从正在运行的实例生成新图像时，您最终会被锁定在正在运行的实例之外。我不知道为什么，但是您可以从刚刚创建的映像中重新启动一个新实例。

不过，目前尚不清楚这是否是您遇到的问题。

# file - 如何让 Windows 批处理文件查看数百个文件夹并根据 list.txt 移动文件？

> ID：12850736
> 
> 赞同：0
> 
> 时间：2012-10-12T00:47:39.353
> 
> 标签：file, sorting, batch-file, copy, move

我似乎无法让它工作。我需要一个批处理文件来遍历一堆包含文件的文件夹，并将它们移动到列表.txt 中指定的文件夹中。

基本上我希望它执行以下操作：示例 list.txt

```
folder1 file1
folder2 file1 
```

并解析它，以便我可以：

```
copy C:\folder1\file1*.txt to destination folder
copy C:\folder2\file1*.txt to destination folder
etc 
```

这是我到目前为止所拥有的：

主程序：

```
echo off
set lines=0

for /f "tokens=1 delims=" %%a in (%CD%\list.txt) do (
                echo %%a
                echo 1 %SN% from EEN %EEN%               
                call :first %%a
                echo 2 %SN% from EEN %EEN%               
                call :second %%a
                echo 3 %SN% from EEN %EEN%               
                set /a lines+=1
)

echo %lines%
pause
goto :eof

:first
set EEN=%1
goto :eof

:second
set SN=%2
goto :eof

pause 
```

list.txt（第一列是文件夹名，第二列是文件名）：

```
DM5V37H WMC1F0077774
DM5V37H WMC1F0077711
DM5V37H WMC1F0086480
DM5V37H WMC1F0086372
DM5V37H WMC1F0077655
DM5V37H WMC1F0077770 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:05:29.220

我不确定您对 SN 和 EEN 的引用，但我刚刚对此进行了测试，它似乎有效。第一部分演示如何访问从文件中读取的行中的每个项目，然后执行实际的移动操作。我相信您可以根据需要对其进行修改。

```
@echo off
set lines=0

for /f "tokens=1,2 delims= " %%a in (list.txt) do echo %%a %%b&set /a lines+=1
echo Number of lines: %lines%

:: Perform move operation.  
for /f "tokens=1,2 delims= " %%a in (list.txt) do (
if not exist %%a (md %%a)
move "%%b" "%%a\%%b"
) 
```

# jquery - Internet Explorer 中预期的 jQuery 对象（IE8 和 -）

> ID：12850737
> 
> 赞同：1
> 
> 时间：2012-10-12T00:47:49.160
> 
> 标签：jquery, internet-explorer, object, jquery-isotope

我在 IE8 及以下版本中收到以下错误消息：预期对象。

它适用于所有其他浏览器。

该网站是[http://www.gablabelle.com/](http://www.gablabelle.com/)

但我找不到问题所在。

```
var layoutI = 0;
var $container = $("#stream");
var $window = $(window);
function reLayout(){  
    var mediaQueryId = getComputedStyle( document.body, ':after' ).getPropertyValue('content');
    var mediaQueryId = mediaQueryId.replace( /"/g, '' );
    var windowSize = $window.width();
    var masonryOpts;
    switch ( mediaQueryId ) {
        case 'bigger' :
            masonryOpts = {
                columnWidth: 270,
                gutterWidth: 30
            };
        break;
        case 'big' :
            masonryOpts = {
                columnWidth: 220,
                gutterWidth: 20
            };
        break;
        case 'medium' :
            masonryOpts = {
                columnWidth: 166,
                gutterWidth: 20
            };
        break;
        case 'small' :
            masonryOpts = {
                columnWidth: $container.width() / 2,
                gutterWidth: 0
            };  
        break;
    };
    $container.isotope({
        resizable: false, // disable resizing by default, we'll trigger it manually
        itemSelector : "article.post",
        animationEngine: "best-available",
        masonry: masonryOpts,
        onLayout: function() {
        //  console.log('layout!' + (layoutI++) )
            forceLoad();
            setTimeout(function(){
                html_height = $container.height();
                $("#sidebar").height(html_height - masonryOpts.gutterWidth);
            }, 500);
        }
    });
};
$container.imagesLoaded( function(){
    reLayout();
    $window.smartresize( reLayout );
}); 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:33:52.473

错误开启`getComputedStyle()`。IE<8 不支持此功能

有关支持图表，请参见[此处。](http://caniuse.com/getcomputedstyle)

您可以使用这样的替代方法[。](http://snipplr.com/view/13523/)

# matlab - Matlab将向量转换为矩阵

> ID：12850745
> 
> 赞同：2
> 
> 时间：2012-10-12T00:48:49.143
> 
> 标签：matlab

我不确切知道如何表达这个问题，但我有 3 个列向量，我试图将它们变成一个矩阵，这样矩阵基本上看起来像 [v1 v2 v2]

其中每个向量的长度明显大于1。

有没有自动的方法来做到这一点？

马上，我要去

```
matrix{1} = v1;
matrix{2} = v2;
matrix{3} = v3; 
```

但这不起作用，因为当我打印出我的矩阵时，我得到了

```
matrix = 

    [50x1 double]    [50x1 double]    [50x1 double] 
```

而不是实际数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T00:57:33.067

假设您的列向量定义为：

```
>>v1 = [1; 2; 3];
>>v2 = [4; 5; 6];
>>v3 = [7; 8; 9]; 
```

那么您的矩阵只是这些列的行向量：

```
>>m = [v1 v2 v3]; 
```

# c# - 如何在 caliburn micro 中启动无模式窗口并强制执行它的单个实例

> ID：12850747
> 
> 赞同：1
> 
> 时间：2012-10-12T00:48:57.893
> 
> 标签：c#, .net, wpf, caliburn.micro

启动无模式窗口但强制在使用 Caliburn Micro 的应用程序中只有一个已启动窗口实例的推荐方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T01:01:19.340

我不确定这是否是批准的方法；但是，这是我过去所做的，以确保一次只打开一个窗口实例。请注意，没有任何特定的方法，afaik，使用 Caliburn 创建模态类型窗口；您需要自己设置窗口。

```
// Create a reference to the model being used to instantiate the window
// and let the IoC import the model. If you set the PartCreationPolicy
// as Shared for the Export of SomeOtherModel, then no matter where you are
// in the application, you'll always be acting against the same instance.
[Import]
private SomeOtherModel _otherModel;

public void ShowSomeOtherWindow()
{
    // use the caliburn IsActive property to see if the window is active
    if( _otherModel.IsActive )
    {
        // if the window is active; nothing to do.
        return;
    }

    // create some settings for the new window:
    var settings = new Dictionary<string, object>
                   {
                           { "WindowStyle", WindowStyle.None },
                           { "ShowInTaskbar", false },
                   };

    // show the new window with the caliburn IWindowManager:
    _windowManager.ShowWindow( _otherModel, null, settings );
} 
```

# out-of-memory - 使用 Docx4j 和 PdfBox 将 Docx 转换为图像会导致 OutOfMemoryError

> ID：12850753
> 
> 赞同：1
> 
> 时间：2012-10-12T00:49:50.610
> 
> 标签：out-of-memory, pdfbox, docx4j

我正在使用 dox4j 和 pdfbox 分两步将 docx 文件的第一页转换为图像，但我目前`OutOfMemoryError`每次都得到一个。

我已经能够确定在该过程的最后一步引发了异常，而该`convertToImage`方法正在被调用，但是我一直在使用该方法的第二步来转换 pdf 一段时间没有问题所以我不知道可能是什么原因，除非 dox4j 正在编码 pdf 是一种我尚未测试或已损坏的方式。

我试过用`ByteArrayOutputStream`a替换`FileOutputStream`pdf 似乎正确渲染并不比我预期的要大。

这是我正在使用的代码：

```
WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.load(file);
org.docx4j.convert.out.pdf.PdfConversion c = new org.docx4j.convert.out.pdf.viaXSLFO.Conversion(wordMLPackage);

((org.docx4j.convert.out.pdf.viaXSLFO.Conversion)c).setSaveFO(File.createTempFile("fonts", ".fo"));
ByteArrayOutputStream os = new ByteArrayOutputStream();
c.output(os, new PdfSettings());

byte[] bytes = os.toByteArray();
os.close();

ByteArrayInputStream is = new ByteArrayInputStream(bytes);

PDDocument document = PDDocument.load(is);

PDPage page = (PDPage) document.getDocumentCatalog().getAllPages().get(0);
BufferedImage image = page.convertToImage(BufferedImage.TYPE_INT_RGB, 96);

is.close();
document.close(); 
```

**编辑** 为了在这种情况下提供更多上下文，此代码正在 grails web 应用程序中运行。我尝试了该代码的几种不同变体，包括将不再需要的所有内容清空，使用 FileInputStream 和 FileOutputStream 来尝试节省更多物理内存并检查 docx4j 和 pdfbox 的输出，它们似乎都可以正常工作。

我正在使用 docx4j 2.8.1 和 pdfbox 0.7.3，我也尝试过 pdf-renderer，但仍然出现 OutOfMemoryError。我的怀疑是 docx4j 使用了太多内存，但在 pdf 到图像转换之前不会产生错误。

我很乐意将 docx 文件转换为 pdf 或直接转换为图像作为答案的另一种方法，但是我目前正在尝试替换在服务器上运行有问题的 jodconverter。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:16:27.127

我是 XDocreport 团队的一员。

我们最近开发了一个部署在 cloudbees (http://xdocreport-converter.opensagres.cloudbees.net/) 上的小 web 应用程序，它显示了行为转换器。

您可以轻松比较 docx4j 和 xdocreport 用于 PDF 和 Html 转换的行为和性能。

源代码可以在这里找到：

[https://github.com/pascalleclercq/xdocreport-demo（REST-Service-Converter-WebApplication](https://github.com/pascalleclercq/xdocreport-demo)子文件夹）。在这里： [https ://github.com/pascalleclercq/xdocreport/blob/master/remoting/fr.opensagres.xdocreport.remoting.converter.server/src/main/java/fr/opensagres/xdocreport/remoting/converter/server /ConverterResourceImpl.java](https://github.com/pascalleclercq/xdocreport/blob/master/remoting/fr.opensagres.xdocreport.remoting.converter.server/src/main/java/fr/opensagres/xdocreport/remoting/converter/server/ConverterResourceImpl.java)

我得到的第一个数字是 Xdocreport 生成 PDF 的速度比 Docx4J 快大约 10 倍。

欢迎反馈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T22:05:45.717

终于取得了辉煌的成功！我用[XDocReport](https://github.com/opensagres/xdocreport)替换了 docx4j，文档立即转换为 PDF。但是，某些文档似乎存在一些问题，但我希望这是由于创建它们的操作系统造成的，并且可以通过以下方式解决：

```
PDFViaITextOptions options = PDFViaITextOptions.create().fontEncoding("windows-1250"); 
```

使用适当的操作系统，而不仅仅是：

```
PDFViaITextOptions options = PDFViaITextOptions.create(); 
```

默认为当前操作系统。

这是我现在用来从 DOCX 转换为 PDF 的代码：

```
FileInputStream in = new FileInputStream(file);
XWPFDocument document = new XWPFDocument(in);

PDFViaITextOptions options = PDFViaITextOptions.create();

ByteArrayOutputStream out = new ByteArrayOutputStream();
XWPF2PDFViaITextConverter.getInstance().convert(document, out, options);

byte[] bytes = out.toByteArray();
out.close();

ByteArrayInputStream is = new ByteArrayInputStream(bytes);
PDDocument document = PDDocument.load(is);

PDPage page = (PDPage) document.getDocumentCatalog().getAllPages().get(0);
BufferedImage image = page.convertToImage(BufferedImage.TYPE_INT_RGB, 96);

is.close();
document.close();

return image; 
```

# antlr - Antlr 字符串模板

> ID：12850754
> 
> 赞同：0
> 
> 时间：2012-10-12T00:50:15.833
> 
> 标签：antlr, antlr3, stringtemplate

如何防止 StringTemplate 中出现新行？例如

```
myAssigns(isConst, myType, myName,exp1,exp2) ::=
<<
<if(isConst)>const <endif><myType> <myName> <if(exp2)> [<exp2>]<endif>= <exp1>;
>> 
```

工作并将翻译保持在一行，但不容易阅读。如何逃避我的 if 语句以防止它们在不同的行上打印。（在我的特定情况下，const 类型名称将在一行上，而 exp2 和 exp1 在打印到屏幕时将在下一行。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:58:53.750

在 v4 中，您可以使用 t() ::= <%...%> 语法让它忽略缩进和换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:16:53.857

[我在这里](http://www.antlr.org/wiki/display/ST/Conditionally+included+subtemplates)找到了我的问题的答案（在页面底部）。看起来我这样做的方式是您必须如何（全部在一行上）以防止不需要的换行符。如果有人知道我不知道的事情，请告诉我。

# eclipse - 如何在eclipse中删除文件关联锁定

> ID：12850756
> 
> 赞同：11
> 
> 时间：2012-10-12T00:50:23.383
> 
> 标签：eclipse, file, locking

在 Eclipse 中，我想更改一些 .htm 文件的默认编辑器。

如果我尝试转到 FIle Association 并关联默认编辑器，则文件会在该新编辑器中打开，但我没有突出显示语法。

解决方案是文件关联被某些插件编辑器锁定

`Preferences -- Context type----text ----Your editor -- reomve the extension`

但我得到了 `.htm(locked)` 所以我不能删除它。

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Freference%2Fref-content-type.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Freference%2Fref-content-type.htm)

> 注意：某些项目将被标记为“锁定”。如果项目是声明内容类型的插件提供的关联之一，则该项目被锁定。换句话说，您只能删除用户贡献的关联。

有什么办法可以去掉那些锁，即使它可能是骇人听闻的方式，但我想这样做

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-22T18:00:13.387

您无需“解锁”现有关联即可添加新关联并将其设为默认关联。

1.  通过“添加”按钮添加新关联
2.  选择新条目
3.  点击“默认”按钮，使您的新条目成为默认编辑器

![在此处输入图像描述](../Images/43fce202410cbdb35930b93aaeb41512.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-03T08:56:53.960

Could it be, that you want to change the "File Association"? This can be done in General / Editors / File Associations. BUT Eclipse uses at least one default-editor and this is the reason for the "locked"-message in the "Content Types". You could set the "Text Editor" to all unwanted types. Looks like a workaround, but makes sense, because it is the same as the file associations of your operating system, that asks you for the program to display the file.

Another question is, why do you want to unlock or remove the "Content Type"? Does it change anything in the Eclipse logic?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-16T20:51:48.010

从“Greg Desmarais”中查看这个答案（将所需的编辑器分配给“默认”）

[https://stackoverflow.com/a/15642583/162094](https://stackoverflow.com/a/15642583/162094)

# ruby - 如何通过 Apache Thrift 从 Rails 应用程序异步访问我的 Java 后端服务？

> ID：12850761
> 
> 赞同：1
> 
> 时间：2012-10-12T00:51:07.697
> 
> 标签：ruby, ruby-on-rails-3, web-applications, asynchronous, thrift

所以我有一个用 Java 编写的相当繁重的后端服务，它通过 Apache Thrift 连接到 Rails 应用程序。我正在使用 TCP 连接来访问在远程机器上运行的后端服务。

对于每个传入的请求，我的 Rails 控制器执行以下操作：

```
transport = Thrift::BufferedTransport.new(Thrift::Socket.new(SERVER_ADDRESS, SERVER_PORT))
protocol = Thrift::BinaryProtocol.new(transport)
client = MyService::Client.new(protocol)
transport.open()

@result = client.processUserRequest(query)

transport.close() 
```

现在，上面的服务调用清楚地阻塞了后端服务器处理请求的整个时间。有没有办法让这个异步？这样，当后端服务器为请求提供服务时，Web 前端可以继续接受传入的 HTTP 请求。我有什么选择来实现这一目标？

我正在将 Phusion 乘客与 Apache 一起使用。我希望最多看到几十到几百个并发连接。我的 Web 服务器位于具有 1.7 GB RAM 的小型 ec2 实例上。

我对 Ruby/Rails 很陌生（来自 Java/C++ 背景），所以仍然试图掌握 Ruby 领域的工作原理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:31:35.930

是的。只需`async`在 Thrift 定义中使用修饰符即可。方法返回类型必须为 void。请注意，您不能保证消息已成功处理，只是已将其发送到服务器。

```
service MyService
{
   async void processUserRequest(1: Query query);
} 
```

# android - 重心移动单选按钮描述，而不是按钮本身

> ID：12850767
> 
> 赞同：1
> 
> 时间：2012-10-12T00:52:07.157
> 
> 标签：android, android-layout

在接下来的 XML 中，每个`RadioButton`都设置为`android:gravity="center"`.

所有三个按钮都会显示，但按钮说明居中。按钮本身不是。如何使按钮及其描述居中？

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:orientation="horizontal">

        <RadioButton
            android:id="@+id/radio1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight=".3"
            android:gravity="center"
            android:text="RadioButton" />

        <RadioButton
            android:id="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight=".3"
            android:gravity="center"
            android:checked="true"
            android:text="RadioButton" />

        <RadioButton
            android:id="@+id/radio2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight=".3"
            android:gravity="center"
            android:text="RadioButton" />
    </RadioGroup>
</LinearLayout> 
```

在这张图片中，您可以忽略顶部栏。这已经被编码了。我看到的是“RadioButton”文本右侧的 RadioButtons（按钮本身位于布局边界上）。想要的最终结果是，因为我无法发布图片：[就是这样。](http://i.stack.imgur.com/hvWqs.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T01:41:31.570

我已尝试编辑您的布局以执行屏幕截图中的操作。我认为这不是一种有效的方法，但这是对我有用的唯一方法。

我将每个单选按钮插入到父 linerlayout 中，然后使用重心。

```
<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight=".3"
        android:gravity="center" >

        <RadioButton
            android:id="@+id/radio1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="RadioButton" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight=".3"
        android:gravity="center" >

        <RadioButton
            android:id="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="RadioButton" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight=".3"
        android:gravity="center" >

        <RadioButton
            android:id="@+id/radio2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="RadioButton" />
    </LinearLayout>
</RadioGroup> 
```

我真的希望有比这更好的解决方案。但在这里，希望它有所帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-18T19:08:01.227

只需在两者之间添加 widget.Space，这样整个 widget.RadioButton 就会向右移动...

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="match_parent"
          android:layout_height="wrap_content">

  <RadioGroup
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <Space
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"/>

    <RadioButton
        android:id="@+id/radio1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        />

    <Space
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"/>

    <RadioButton
        android:id="@+id/radio2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        />
</RadioGroup> 
```

# cocoa - Mac OS App：如何在沙箱中解析别名并读取原始文件

> ID：12850786
> 
> 赞同：3
> 
> 时间：2012-10-12T00:55:04.653
> 
> 标签：cocoa, appstore-sandbox

我的mac os应用程序通过用户交互（拖放）获取别名的NSURL，因此该应用程序有权读取别名文件，但它无权读取应用程序沙箱中的原始文件（Mac OS X 10.7 /8)。

我通过以下方式解析别名

```
NSData* bookmark = [NSURL bookmarkDataWithContentsOfURL:aliasURL error:nil];
origURL = [NSURL URLByResolvingBookmarkData:bookmark
                                    options:NSURLBookmarkResolutionWithoutUI
                              relativeToURL:nil
                        bookmarkDataIsStale:nil
                                      error:&error]; 
```

当我尝试读取 origURL 文件时，出现错误：`The file couldn’t be opened because you don’t have permission to view it`.

我也尝试`start/stopAccessingSecurityScopedResource`在 origURL 上调用，但没有帮助。

我也尝试使用`NSURLBookmarkResolutionWithSecurityScope`选项解析书签数据，但从`"The file couldn’t be opened because it isn’t in the correct format."`URLByResolvingBookmarkData 方法中得到错误。

那么，怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:28:56.520

我还没有尝试过，但我想我可能知道发生了什么。OS X 通过拖放穿透沙箱的方式是授予应用程序将文件拖放到对已删除文件的访问权限，直到应用程序退出。这使用粘贴板上的普通`NSString`文件路径工作，因此它不依赖于安全范围机制。

您的应用程序可能有权访问别名文件，但只能访问该文件，而不是它所引用的文件。沙盒打孔机制可能不遵循别名并授予对底层文件的访问权限。如果您可以获得别名指向的文件的路径（我不确定这是否可能），您可以通过提示用户在`NSOpenPanel`. 这是通过沙盒的另一种方式，使用 Apple 所谓的“Power Box”。

有关如何执行此操作的更多信息，请查看我在这里写的答案：[https](https://stackoverflow.com/a/11786156/105717) ://stackoverflow.com/a/11786156/105717 。它链接到另一个答案，然后添加一些有用的细节，使用户更清楚正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:28:22.913

也许，也许我的类似情况和解决方案会有所帮助：

您是否确定在您的权利文件中将权利“com.apple.security.files.bookmarks.app-scope”设置为“yes”？

“无法打开该文件，因为它的格式不正确。” 我在尝试解决书签时遇到了同样的错误，原来是文件被锁定在 Finder 中（在文件上执行“获取信息”并选中“锁定”框已关闭）所以安全性数据从一开始就没有生成。

希望里面有帮助！

托德。

# firebase - 有没有办法知道在什么上下文中添加了 Child 添加？特别是页面加载与其他事件

> ID：12850789
> 
> 赞同：2
> 
> 时间：2012-10-12T00:55:12.907
> 
> 标签：firebase

这是我的场景。当通过浏览器事件发布页面加载添加孩子时，我想在标题中指出它。但是在页面加载时，也会调用添加的子项。

如何区分添加的初始子项与实际添加了新条目的子项。

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T02:03:56.870

Firebase 非常有意地不区分“初始”数据和“新”数据。在大多数情况下，这允许更简单的开发，因为您只需为数据编写一组逻辑，而不是同时处理初始数据案例和新数据案例。

在这种情况下，我可以看到您希望如何区分。我不确定你在做什么，但如果你正在构建一个聊天应用程序，你可能希望根据最新消息的时间戳而不是它是否是“新”消息来闪烁标题。如果在页面加载之前发送消息，这将允许标题在页面加载时闪烁，这可能是可取的。在其他一些情况下，您可能实际上想要为未读数据闪烁标题，并且您可能需要考虑将子项标记为“已读”，并且只为没有“已读”位出现的子项闪烁标题。这将允许事情在页面刷新之间无缝地工作。

如果您绝对需要知道“新”数据何时出现，您可以尝试使用带有“值”事件类型的“once”来获取数据，然后使用带有 startAt 查询和“child_added”事件类型的“on”之后显示新数据。它看起来像这样：

```
var data = new Firebase(...);
data.once("value", function(d) {
  //TODO: display initial state...

  data.startAt(null, <last id in snapshot>).on("child_added", function(newMessSnapshot) {
    //TODO: render new child and flash title bar.
  }
} 
```

或者，如果您想以*非常*简单的方式进行操作，您可以设置一个计时器，以便在页面加载的前 N ​​秒内收到的任何消息都不会闪烁标题。

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T01:52:59.320

[您可以使用此 SO question](https://stackoverflow.com/questions/11788902/firebase-child-added-only-get-child-added)中的方法设置仅接收新事件而不是现有事件的呼叫。

所以基本上，`.on('child_added'...)`用`endAt`and打电话`limit`。你仍然会得到一个条目（最后一个），你可以忽略它：

```
// connect to firebase
var fb = new Firebase(...);

// retrieve the last record from `ref` (endAt() tells it to start at the end)
var first = true;
fb.child('table_name').endAt().limit(1).on('child_added', function(snapshot) {

   if( first ) {
       // ignore the first snapshot, which is an existing record
       first = false;
       return;
   }

   // all records after the last continue to invoke this function
   console.log(snapshot.name(), snapshot.val());

}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-14T17:06:01.850

我想我会更新加藤的答案，因为 Datasnapshot.name() 和 limit 现在都已贬值。

我决定让它更简单一点；）

```
 // connect to firebase
  var fb = new Firebase("https://your-firebase-ref/");
  var firstTime = false;

  fb.limitToLast(1).on('child_added', function(snapshot) {
    if (firstTime) {
      console.log(snapshot.key(), snapshot.val());
    };
    firstTime = true;
  });
```

我希望这有帮助

# c# - 解码字符串以获取值“Indsætning”

> ID：12850791
> 
> 赞同：0
> 
> 时间：2012-10-12T00:55:16.347
> 
> 标签：c#, encoding, urlencode

我有一个字符串（C# 代码），如下所示：

```
string s = "IndsÃ¦tning"; 
```

它以某种我不确定的方式编码。

我想对其进行解码，以便获得以下字符串：

```
Indsætning 
```

我试过了

```
string s1 = HttpUtility.UrlDecode(s);
string s2 = HttpUtility.HtmlDecode(s); 
```

但是，我没有得到我正在寻找的字符串。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T01:07:59.713

将字符串转换为字节，然后使用[Encoding](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)类获取`UTF-8`字符串表示形式。

```
string s = "IndsÃ¦tning";

byte[] sBytes = s.Select(x => (byte)x).ToArray();
string decoded = Encoding.UTF8.GetString(sBytes); 
```

编辑 - 如评论中所述，这假设要转换的字符串具有特定的编码（在本例中为[Latin-1](http://www.fileformat.info/info/unicode/char/e6/index.htm)）。因此，它不一定适用于所有字符串，除非您知道它们都已被编码为相同的格式。

# php - 具有 HTML 的 htmlentities 内容

> ID：12850794
> 
> 赞同：2
> 
> 时间：2012-10-12T00:56:24.487
> 
> 标签：php, codeigniter, multilingual

我正在尝试在我的网站上支持多种语言。一些需要翻译的内容将具有实体引用，例如`Ç`. 我可以`htmlentities`用来将其转换为`&Atilde;`. 但是，如果我需要翻译一个带有标记的字符串怎么办：

```
"<p>Hello, <a href="">world with Ç</a></p>" 
```

如果我使用`htmlentities`，`<`and`>`也会被转换。我不想将字符串分解为标签和非标签部分，然后`htmlentities`仅适用于非标签部分。那将太混乱和乏味。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:02:57.387

[此处](http://af-design.com/blog/2010/08/17/escaping-unicode-characters-to-html-entities-in-php/)发布的解决方法

将您的字符串传递给以下函数并使用返回的字符串。

```
 function unicode_escape_sequences($str){
      $working = json_encode($str);
      $working = preg_replace('/\\\u([0-9a-z]{4})/', '&#x$1;', $working);
      return json_decode($working);
  } 
```

# forms - 使用流体网格系统在引导程序上对齐输入

> ID：12850798
> 
> 赞同：3
> 
> 时间：2012-10-12T00:56:41.523
> 
> 标签：forms, twitter-bootstrap, responsive-design, fluid-layout

我正在创建一个表单，要求用户输入他们的姓名和电子邮件地址。表单的第一行有两个并排的输入，用于名称的每个部分，第二行有一个用于电子邮件地址的输入，其宽度应与第一行的组合宽度相同。我正在尝试使用流体网格系统，但无法将第二行与第一行对齐。

```
<form action="/subscriptions" method="post">
  <fieldset>
    <div class="control-group">
       <label class="control-label" for="name">Name</label>
       <div class="controls row-fluid">
          <input class="span2" id="first_name" name="first_name" placeholder="First" required="required" type="text">
          <input class="span2" id="last_name" name="last_name" placeholder="Last" required="required" type="text">
       </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="email">Email</label>
      <div class="controls row-fluid">
      <input class="span4" id="email" name="email" type="email">
    </div>
   </div>
 </fieldset>
</form>​ 
```

[http://jsfiddle.net/sguha095/v4amX/](http://jsfiddle.net/sguha095/v4amX/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T08:58:29.990

看看这个 jdfiddle：http: [//jsfiddle.net/kY5LL/18/](http://jsfiddle.net/kY5LL/18/)

我`div.row-fluid`在表单的每行添加了一些容器，并添加了一组额外的输入用于演示。

希望这就是你要找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T05:21:29.240

首先我们需要清理一下 HTML，第一行有一个额外的关闭 div。

我刚刚添加了一些类来改进样式，以便您了解它是如何工作的。该类 `input-block-level`是一个引导混合，强制输入像真正的块级元素一样工作。如果您希望它干净并利用 CSS 的好处，则需要这样做。如果你想用 HTML 来做所有的样式，那么你可以用更多的标记和更少的语义方法来做，但我不建议这样做。

希望这可以帮助！

[http://jsfiddle.net/kY5LL/12/](http://jsfiddle.net/kY5LL/12/)

# c++ - 保持进程不受上下文切换

> ID：12850801
> 
> 赞同：0
> 
> 时间：2012-10-12T00:57:16.217
> 
> 标签：c++, windows, operating-system, scheduler

我在 Windows 上用 C++ 编写了一个特定的进程，它不断地轮询以检查是否发生了上下文切换。因为这个进程不遗漏任何东西是必不可少的，所以我想知道是否有一种方法可以告诉调度程序在运行时不要上下文切换这个特定进程。我不是简单地谈论将其设置为高优先级，而是将其设置为根本不切换的优先级。

# php - 如何在不出现 E_STRICT 错误的情况下调用祖父方法？

> ID：12850802
> 
> 赞同：17
> 
> 时间：2012-10-12T00:57:24.303
> 
> 标签：php, inheritance

有时我需要执行祖父方法（即绕过父方法），我知道这是代码异味，但有时我无法更改其他类（框架、库等）。

在 PHP 中，我们可以这样做：

```
call_user_func(array(get_parent_class(get_parent_class($childObject)), 'grandParentMethod')); 
```

问题是，如果您启用了 E_STRICT 错误，您将收到如下错误：

**严格标准：非静态方法 GrandParent::grandParentMethod() 不应在 ...**

我只找到了一个解决方案（不删除 E_STRICT），它只是添加`@`来抑制错误。

但这真的很难看，有人知道更好的解决方案吗？

谢谢 ！PS：我无法实例化一个新对象，例如：

```
$grandparent = get_parent_class(get_parent_class($son));
$gp= new $grandparent;
$gp->grandParentMethod 
```

因为我需要在 $son 的上下文中调用我的祖父母方法。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2015-07-01T00:26:52.857

您可以直接按名称调用祖父母（不需要反射，也不需要`call_user_func`）。

```
class Base {
    protected function getFoo() {
        return 'Base';
    }
}

class Child extends Base {
    protected function getFoo() {
        return parent::getFoo() . ' Child';
    }
}

class Grandchild extends Child {
    protected function getFoo() {
        return Base::getFoo() . ' Grandchild';
    }
} 
```

该`Base::getFoo`调用可能看起来像一个静态调用（由于冒号`::`语法），但事实并非如此。就像`parent::`不是静态的一样。

从类中的继承链调用方法将正确绑定`$this`值，将其作为常规方法调用，遵守可见性规则（例如受保护），并且不违反任何形式！

起初这可能看起来有点奇怪，但是，这是在 PHP 中执行此操作的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T02:43:06.367

您可以使用[ReflectionMethod->invoke()](http://www.php.net/manual/en/reflectionmethod.invoke.php)

例子：

```
<?php
class Grandpa {
    protected $age = 'very old';
    public function sayMyAge() {
        return 'sayMyAge() in Grandpa should be very old. ' . 
                  'My age is: ' . $this->age;
    }
}

class Pa extends Grandpa {
    protected $age = 'less old';
    public function sayMyAge() {
        return 'sayMyAge() in Pa should be less old. ' .
                  'My age is: ' . $this->age;
    }
}

class Son extends Pa {
    protected $age = 'younger';
    public function sayMyAge() {
        return 'sayMyAge() in Son should be younger. ' .
                  'My age is: ' . $this->age;
    }
}

$son = new Son();
$reflectionMethod = new ReflectionMethod(get_parent_class(get_parent_class($son)), 
                                         'sayMyAge');
echo $reflectionMethod->invoke($son);
// returns:
// sayMyAge() in Grandpa should be very old. My age is: younger 
```

**注意：**调用的方法必须是公共的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-03T23:34:01.313

蒂莫的回答有效，但我认为它的作用是偶然的，而不是设计的。如果您查看 $this->doX 与 parent::doX 与 Grandparent::doX 的操作码，您会看到 Grandparent::doX 作为静态方法调用，但 PHP 将使用范围内的 $this

```
$this->doX
  17     1        EXT_STMT                                                 
         2        INIT_METHOD_CALL                               'doX'
         3        EXT_FCALL_BEGIN                                          
         4        DO_FCALL                                      0          
         5        EXT_FCALL_END                                            

parent::doX
  18     6        EXT_STMT                                                 
         7        FETCH_CLASS                                 514  :1      
         8        INIT_STATIC_METHOD_CALL                     $1, 'doX'
         9        EXT_FCALL_BEGIN                                          
        10        DO_FCALL                                      0          
        11        EXT_FCALL_END                                            

Grandparent::doX
  19    12        EXT_STMT                                                 
        13        INIT_STATIC_METHOD_CALL                  'C1', 'doX'
        14        EXT_FCALL_BEGIN                                          
        15        DO_FCALL                                      0          
        16        EXT_FCALL_END 
```

由于这个原因，$this 参数在祖父母的静态调用中可用（来自[https://www.php.net/manual/en/language.oop5.basic.php](https://www.php.net/manual/en/language.oop5.basic.php)）：

> 当从对象上下文中调用方法时，伪变量 $this 可用。$this 是对调用对象的引用（通常是方法所属的对象，但也可能是另一个对象，如果该方法是从辅助对象的上下文中静态调用的）。从 PHP 7.0.0 开始，从不兼容的上下文中静态调用非静态方法会导致 $this 在方法内部未定义。自 PHP 5.6.0 起，从不兼容的上下文中静态调用非静态方法已被弃用。从 PHP 7.0.0 开始，静态调用非静态方法通常已被弃用（即使从兼容的上下文中调用）。在 PHP 5.6.0 之前，此类调用已经触发了严格的通知。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-10T09:22:03.940

您可以使用单独的内部方法（例如`_doStuff`补充`doStuff`）并通过父级直接从孙子级调用它。

```
// Base class that everything inherits
class Grandpa  {
    protected function _doStuff() {
        // grandpa's logic
        echo 'grandpa ';
    }

    public function doStuff() {
        $this->_doStuff();
    }

}

class Papa extends Grandpa {
    public function doStuff() {
        parent::doStuff();
        echo 'papa ';
    }
}

class Kiddo extends Papa {
    public function doStuff() {
        // Calls _doStuff instead of doStuff
        parent::_doStuff();
        echo 'kiddo';
    }
}

$person = new Grandpa();
$person->doStuff();
echo "\n";
$person = new Papa();
$person->doStuff();
echo "\n";
$person = new Kiddo();
$person->doStuff(); 
```

节目

```
grandpa
grandpa papa
grandpa kiddo 
```

# javascript - 通过 JavaScript 函数分配动态变量

> ID：12850804
> 
> 赞同：1
> 
> 时间：2012-10-12T00:57:44.073
> 
> 标签：javascript

我一直在做一个宠物项目，在那里我一直在创建一个只有函数的 JS 框架......并且不确定是否有任何方法可以简化以下内容......在这种情况下是动态变量分配......

```
String.prototype.is = function(x) {window[this]=window[this]||x;}
"a".is(42);
alert(a); // window.alert shows 42 
```

有没有更简单的方法可以用函数做到这一点？这样做的唯一目的是实现仅功能框架……所以使用“a = 42;” 不允许...我希望它不仅可用于数字，还可以用于字符串、数组、布尔值、日期等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:10:22.783

你的想法有问题，改变原生类型的原型不是一个好习惯。与第三方代码一起使用时，这可能会导致意外（有时几乎无法调试）行为。

您的主要想法没有问题，但我建议您将要操作的对象包装在您完全控制下的另一个对象中，并使用包装器提供的附加行为来装饰这些对象。这是jQuery方法，更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:08:13.503

您可以使用新的 ES 5 getter 和 setter。 [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/get](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/get)

# iphone - PhoneGap - 写入 iCloud 目录？

> ID：12850808
> 
> 赞同：2
> 
> 时间：2012-10-12T00:59:01.850
> 
> 标签：iphone, ios, cordova, icloud

我的应用程序告诉我，我的 iCloud 通用容器在这里：

`file://localhost/private/var/mobile/Library/Mobile%20Documents/.../`

当我尝试使用 获取目录时`fileSystem.root.getDirectory`，我出错并且没有得到`DirectoryEntry`. 我试过`window.resolveLocalFileSystemURI`了，但这也以错误结束。

如何获取此目录的条目，以便我可以写入它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T13:58:55.340

使用 javascript 桥接器。iCloud 有如此多的设置和错误处理，如果没有某种复杂的包装器，它实际上不可能完全在 javascript 中处理。

# javascript - JavaScript 仅使用外部 javascript 阻止默认链接行为

> ID：12850809
> 
> 赞同：1
> 
> 时间：2012-10-12T00:59:36.460
> 
> 标签：javascript, function, event-handling, onclick

我有一个带有链接的 javascript 外部文件。仅使用 javascript，如何取消链接的默认行为？（即返回假）。我需要在不向 HTML 添加 javascript 代码或使用任何 innerHTML 的情况下执行此操作。我需要在外部 javascript 文件中的函数内执行此操作。此外，不能使用 jQuery 或类似 jQuery 的任何东西。这是初学者的东西，所以我不能使用任何复杂的javascript。只需要使用最少代码的最佳实践。我将在下面包含我的 javascript 和 html。我的问题从 javascript 代码的第 5 步开始。谢谢，杰森

*** HTML ***

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Assignment 7</title>
<link href="css.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="js.js"></script>
</head>

<body>

<div id="content">
<h1>Do you have JavaScript enabled?</h1>
<p id="noJS">No! You do <strong>not</strong> have JavaScript enabled!</p>
<p id="extraCredit" ><a href="http://www.w3schools.com/tags/tag_a.asp">What does this link do?</a></p>
</div>

</body>
</html> 
```

*** JavaScript（到目前为止）***

```
function hideMessage() {
    // Get elements that I will need
    var content = document.getElementById('content');
    var noJS = document.getElementById('noJS');
    var extraCredit = document.getElementById('extraCredit');
    var link = document.getElementsByClassName('a');

    // Step 1: Hide the “no JavaScript” message using pure JavaScript on page load. No CSS or class name switching allowed. (DONE)
    noJS.parentNode.removeChild(noJS);

    // Create new elements that I will need
    var newPara = document.createElement('p');
    var strong = document.createElement('strong');

    // Step 2: Show the new “yes JavaScript” message in a new paragraph on page load. (DONE)
    var beginNewParaText = document.createTextNode('Yes! You '); 
    var strongNewParaText = document.createTextNode('do ');
    var endNewParaText = document.createTextNode('have JavaScript enabled!');

    // add(append) new elements and text
    noJS.appendChild(newPara);
    content.insertBefore(newPara, extraCredit);
        // Step 3: Set the ID of the new message to “yesJS” so it turns green (as per the provided CSS). (DONE)
    newPara.setAttribute('id', 'yesJS');
    newPara.appendChild(beginNewParaText);
        // Step 4: In the new message, “do” appears <strong>. (DONE)
    newPara.appendChild(strong);
    strong.appendChild(strongNewParaText);
    newPara.appendChild(endNewParaText);

        // Step 5: Cancel the default behavior of the link. (NOT DONE)

        // Step 6: Display a message of your choice in a paragraph below the link when     the link is clicked. (NOT DONE)

// Step 9: Produce function modularity. You don’t have everything crammed into a single function. (NOT DONE)
// You can probably do everything you need in three functions. (NOT DONE)

// Step 10: Works in both Firefox and Internet Explorer. (NOT DONE)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T04:29:22.017

你应该得到这样的**链接**元素：

```
var link = document.getElementsByTagName('a')[0]; 
```

或者分配一个 id 并使用会更干净：

```
var link = document.getElementById('extraCreditBtn'); 
```

然后您可以在第 5 步中更改 href 属性：

```
link.href = "http://stackoverflow.com/questions/12850809/javascript-prevent-default-link-behavior-using-only-external-javascript"; 
```

或者你可以做这样的事情来防止点击动作。

```
link.onclick = function () {
    alert("click on <a>");
    return false;
}; 
```

这取决于您的需求（我认为第二种选择会更好地满足您的要求）。

# mysql - mysql_query() 没有按预期工作，但 phpmyadmin 是

> ID：12850811
> 
> 赞同：0
> 
> 时间：2012-10-12T00:59:46.513
> 
> 标签：mysql

使用 mysql_query() 函数时，以下代码无法按预期工作。

```
$conn = mysql_connect('localhost','user','pass') or die (mysql_error());

mysql_select_db('db') or die (mysql_error());

$sql = "SET @orig_lat=33.81978250;SET @orig_lon=-118.10641560; SET @dist =10;SELECT Name, Address, City, State, Zip, 3956 *2 * ASIN( SQRT( POWER( SIN( ( @orig_lat - abs( b.lat ) ) * pi( ) /180 /2 ) , 2 ) + COS( @orig_lat * pi( ) /180 ) * COS( abs( b.lat ) * pi( ) /180 ) * POWER( SIN( ( @orig_lon - b.lng) * pi( ) /180 /2 ) , 2 ) ) ) AS distance FROM tblDealer AS b HAVING distance < @dist ORDER BY distance LIMIT 10";

$result = mysql_query($sql, $conn) or die (mysql_error());

$num_rows = mysql_num_rows($result) or die (mysql_error());

echo $num_rows; 
```

不过，这在 phpMyAdmin 中运行良好。谁能告诉我怎么了？

当我尝试运行它时出现以下错误：

```
您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'SET @orig_lon=-118.10641560; 附近使用的正确语法；SET @dist =10;在第 1 行选择姓名、地址、城市、州、Zi'
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T01:03:19.843

来自[mysql_query 上的 PHP 文档](http://php.net/manual/en/function.mysql-query.php)。

> mysql_query() 将唯一查询（**不支持多个查询**）发送到与指定链接标识符关联的服务器上当前活动的数据库。

如何克服这一点？请改用[**mysqli**扩展名](http://de1.php.net/manual/en/book.mysqli.php)。

# c# - ASP.NET WebApi FormsAuthentication 401（未经授权）问题

> ID：12850812
> 
> 赞同：2
> 
> 时间：2012-10-12T00:59:48.993
> 
> 标签：c#, authorization, asp.net-web-api, asp.net-authorization

我一直在学习 ASP.Net WebApi 中的授权是如何工作的，并且我在另一篇文章（[ASP.NET Web API 身份验证](https://stackoverflow.com/questions/11014953/asp-net-mvc-4-webapi-authentication)）中遇到了 Darin Dimitrov 的回答，我需要一些帮助来理解为什么我会得到 401。

按照 Darin 的代码，我创建了一个 WebApi 项目并添加了以下控制器和模型：

AccountController.cs

```
using System.Web.Http;
using System.Web.Security;
using AuthTest.Models;

namespace AuthTest.Controllers
{
    public class AccountController : ApiController
    {
        public bool Post(LogOnModel model)
        {
            if (model.Username == "john" && model.Password == "secret")
            {
                FormsAuthentication.SetAuthCookie(model.Username, false);
                return true;
            }

            return false;
        }
    }
} 
```

用户控制器.cs

```
using System.Web.Http;

namespace AuthTest.Controllers
{
    [Authorize]
    public class UsersController : ApiController
    {
        public string Get()
        {
            return "This is top secret material that only authorized users can see";
        }
    }
} 
```

登录模型.cs

```
namespace AuthTest.Models
{
    public class LogOnModel
    {
        public string Username { get; set; }
        public string Password { get; set; }
    }
} 
```

我创建了一个带有两个按钮和一个标签的 Web 表单应用程序，用于测试目的。

默认.aspx.cs

```
using System;
using System.Net.Http;
using System.Threading;

namespace AuthTestWebForms
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
        }

        protected void ButtonAuthorizeClick(object sender, EventArgs e)
        {
            using (var httpClient = new HttpClient())
            {
                var response = httpClient.PostAsJsonAsync(
                    "http://localhost/authtest/api/account",
                    new { username = "john", password = "secret" },
                    CancellationToken.None
                ).Result;
                response.EnsureSuccessStatusCode();

                bool success = response.Content.ReadAsAsync<bool>().Result;
                if (success)
                {
                    //LabelResponse.Text = @"Credentials provided";
                    var secret = httpClient.GetStringAsync("http://localhost/authtest/api/users");
                    LabelResponse.Text = secret.Result;
                }
                else
                {
                    LabelResponse.Text = @"Sorry, you provided the wrong credentials";
                }
            }
        }

        protected void ButtonTestAuthClick(object sender, EventArgs e)
        {
            using (var httpClient = new HttpClient())
            {
                var secret = httpClient.GetStringAsync("http://localhost/authtest/api/users");
                LabelResponse.Text = secret.Result;
            }
        }
    }
} 
```

当我单击按钮并运行 ButtonAuthorizeClick() 时，它会触发 Account 的控制器，然后触发 Users 的控制器，一切都很好。

如果我然后单击 ButtonTestAuthClick()，则会收到 401（未经授权）错误。

当我在 Chrome 或 FireFox 中寻找 ASPXAUTH cookie 时，我没有看到一个，所以我不能 100% 确定为什么 ButtonAuthorizeClick() 有效，以及我需要做什么才能使 ButtonTestAuthClick() 有效。

感谢任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T15:02:57.580

我遇到了类似的问题，虽然不是通过 Web 窗体客户端页面，而是通过 JavaScript 和 AJAX 调用。原来我已将 web.config 中的身份验证模式保留为“无”。显然，您必须在此处打开 Forms Authentication 才能使 FormsAuthentication.SetAuthCookie() 方法生效。

```
<authentication mode="Forms" /> 
```

一旦我解决了这个疏忽，一切都开始正常工作。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T05:58:46.827

您正在调用带有中间身份验证的 web api。为什么不通过 ajax 在客户端对用户进行身份验证？

这里的问题是每次通过 HttpClient 向 Web api 发送请求时，它实际上是由服务器处理的新 Web 请求。所有 cookie 信息都不会保留在当前请求中。为了支持这种场景，您需要自己处理cookie。

例如：如果响应有，则在 ButtonAuthorizeClick 方法中将 cookie ASPXAUTH 设置为 asp.net 标头。将 cookie ASPXAUTH 设置为 HttpRequestMessage 并由 HttpClient 发送。

Web api 最近增加了支持使用 HttpServer 创建进程内服务器，可以在当前进程中直接向当前消息处理程序发送请求。所以你可以编写如下代码：

```
HttpClient c = new HttpClient(new HttpServer(GlobalConfiguration.DefaultHandler));
c.GetStringAsync("http://localhost/api/Values").Wait(); 
```

在进程中发送您的请求，以便在 web api 操作中设置的 cookie 标头仍将在当前请求的管道中。签入似乎不在 RTM 版本中。你可以试试它的夜间构建[http://aspnetwebstack.codeplex.com/discussions/353867](http://aspnetwebstack.codeplex.com/discussions/353867)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T09:30:43.150

虽然晚了，但 ButtonTestAuthClick 中的客户端不是浏览器。它是这里的 httpClient 对象。因此，您需要以编程方式设置从其他按钮生成的 cookie。

# iphone - 由于未找到所有框架，Xcode 4.5 构建失败

> ID：12850814
> 
> 赞同：0
> 
> 时间：2012-10-12T01:00:15.300
> 
> 标签：iphone, ios, xcode

这是我第二次遇到这个问题。当我第一次遇到这个问题时，我重新安装了 Xcode，但我想知道是什么导致了这个问题。

由于未找到所有框架，因此没有一个项目无法编译。

即使我开始了新项目，Xcode 仍抱怨“未找到可用性.h”。一旦我删除了该行，它就会抱怨“找不到 UIKit/UIKit.h”，等等。

有谁如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:02:55.217

这是 Xcode 4.5 中的瘟疫。如果您进入构建设置并将构建活动架构仅切换为是，我相信这将解决您的问题

# java - 对象的在线实例化

> ID：12850817
> 
> 赞同：2
> 
> 时间：2012-10-12T01:00:29.283
> 
> 标签：java, inline-code

这是一个非常笼统的问题，我想提前为这个菜鸟问题道歉，但是......

在java中，一般来说，行内声明是否有一个特定的名称，或者只是简单地调用它？

我指的是以下声明对象的方法：

`panel.add(new JLabel("Hello World"));`

相对于：

`JLabel label = new JLabel("Hello World); panel.add(label);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:11:52.757

我不认为有，内联脚本或运行代码是我听说过的，有时是单行分隔的。

```
JLabel labe;
panel.add(labe = new JLabel("Hello World"));

//Instantiation
JLabel label = **new** JLabel("Hello World);

//declaration
JLabel label,label2,label3; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T01:03:14.560

我不认为有一个具体的名称。

但是，您不是在“声明”标签。您只是在“实例化”一个实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T01:22:49.963

人们似乎称其为“匿名对象”或“未命名对象”。另请参阅[https://stackoverflow.com/a/5330408/659002](https://stackoverflow.com/a/5330408/659002)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T11:50:16.337

Java 语言规范调用

```
new JLabel("Hello World") 
```

实例创建[表达式](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.9)，以及

```
JLabel label = new JLabel("Hello World); 
```

带有[变量初始化器的变量声明](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.4)（初始化器恰好包含实例创建表达式）。

也就是说，JLS 说*变量*被*声明*，*对象被创建*。这些是独立的概念；您可以在不创建对象的情况下声明变量，也可以在不声明变量的情况下创建对象。

为了强调代码示例之间的区别，您可以说您确实（或不）声明了一个变量，如“此处无需声明变量”或“将引用放入变量有助于调试”。

# c# - 无法将参数值从 SqlParameter 转换为 String

> ID：12850818
> 
> 赞同：1
> 
> 时间：2012-10-12T01:00:32.197
> 
> 标签：c#, .net, sql-server, tsql

我得到错误：

> *无法将参数值从 SqlParameter 转换为 String。*

我传入：

```
TestUsername,
TestPassword,
TestFirstName,
TestLastName,
TestEmail@Email.Com 
```

代码：

```
 try
        {

            Console.WriteLine("Inputs: Username, Password, First Name, Last Name, Email");
            Console.WriteLine("Username: ");
            string usernameInput = Console.ReadLine();
            Console.WriteLine("Password: ");
            string passwordInput = Console.ReadLine();
            Console.WriteLine("First Name: ");
            string firstNameInput = Console.ReadLine();
            Console.WriteLine("Last Name: ");
            string lastNameInput = Console.ReadLine();
            Console.WriteLine("Email: ");
            string emailInput = Console.ReadLine();

            SqlCommand createLogin = new SqlCommand("INSERT INTO [dbo].[Users] VALUES ('@username', '@password', '@firstname', '@lastname', '@email')", myConnection.SqlConnection);
            SqlParameter usernameParam = createLogin.Parameters.Add("@username", SqlDbType.VarChar, 40);
            SqlParameter passwordParam = createLogin.Parameters.Add("@password", SqlDbType.VarChar, 50);
            SqlParameter firstNameParam = createLogin.Parameters.Add("@firstname", SqlDbType.VarChar, 40);
            SqlParameter lastNameParam = createLogin.Parameters.Add("@lastname", SqlDbType.VarChar, 40);
            SqlParameter emailParam = createLogin.Parameters.Add("@email", SqlDbType.VarChar, 40);

            usernameParam.Value = usernameInput;
            passwordParam.Value = passwordInput;
            firstNameParam.Value = firstNameInput;
            lastNameParam.Value = lastNameInput;
            emailParam.Value = emailParam;

            createLogin.ExecuteNonQuery();
            Console.WriteLine("Username: {0} with Password: {1} created.", usernameInput, EncDec.Decrypt(passwordInput, "testEncryption"));
        }
        catch (Exception CreateLoginException)
        {
            Console.WriteLine(CreateLoginException);
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T01:01:54.277

您的参数声明和值设置很好。您的代码的唯一问题是，您将参数括在单引号中，这使其成为字符串而不是参数。删除查询中参数周围的单引号，

```
SqlCommand createLogin = new SqlCommand(
                 "INSERT INTO [dbo].[Users] 
                  VALUES (@username, @password, @firstname, @lastname, @email",
                 myConnection.SqlConnection); 
```

`Command`对象会自动为您处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T01:05:03.993

它应该是

`createLogin.Parameters.AddwithValue("@parameter", parametervalue)`

并删除其余参数代码。

你不需要那么复杂的使用，`AddWithValue`而不是`Add(`

# javascript - 简单的 jQuery 验证失败

> ID：12850820
> 
> 赞同：1
> 
> 时间：2012-10-12T01:01:02.770
> 
> 标签：javascript, jquery

我想验证我的价值，但如果有人可以帮助我，那我就不行了

```
function countrySelectChanged() {
    $('.sub-menu').hide();
    var selectedCountry = $('#country-select').val();
    if (selectedCountry) {
        $('#' + selectedCountry + '-select').show();
    }
}
$(document).ready(function() {     
    $('#country-select').change(countrySelectChanged);
    countrySelectChanged();

    var valid;

    $('#click').click(function(){           
        if ($("#us-select").val() =="" || $("#germany-select").val() ==""  ){
            valid = false;
        } else {
            valid = true; 
        }

        if (!(valid)) {
            $('#msg').html('NOt Passed')
        } else {
            $('#msg').html('Pass')
        }
    });    
}); 
```

这是HTML

```
<select id="country-select">
    <option value="none" >---</option>
    <option value="us" >US</option>
    <option value="germany">Germany</option>
</select>

<select id="us-select" class="sub-menu hide">
    <option value="none" >---</option>
    <option value="austin"  >Austin</option>
    <option value="austin2"  >Austin2</option>
</select>

<select id="germany-select" class="sub-menu hide">
    <option value="none" >---</option>
    <option value="berlin">Berlin</option>
    <option value="berlin2">Berlin2</option>
</select>

<select id="none-select" class="sub-menu hide">
    <option value="none" >---</option>
</select>

<a href="#" id="click">click me</a>
<div id="msg"></div>​ 
```

这是网络版

[http://jsfiddle.net/RPWPZ/14/](http://jsfiddle.net/RPWPZ/14/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:09:26.670

**工作演示** [http://jsfiddle.net/SJ7Sg/](http://jsfiddle.net/SJ7Sg/) **或** [http://jsfiddle.net/95zXa/](http://jsfiddle.net/95zXa/)

要获得选择的选项，您需要执行此操作`$("#us-select option:selected").val()`

**API** => [http://api.jquery.com/selected-selector/](http://api.jquery.com/selected-selector/)

休息它应该适合原因`:)`

**代码**

```
function countrySelectChanged() {
    $('.sub-menu').hide();
    var selectedCountry = $('#country-select').val();
    if (selectedCountry) {
        $('#' + selectedCountry + '-select').show();
    }
}
$(document).ready(function() {

    $('#country-select').change(countrySelectChanged);
       countrySelectChanged();

    var valid;

    $('#click').click(function(){

   if ($("#us-select option:selected").val() =="none"){

      valid = false;
            }else{
      valid = true;

   }

 if (valid) {
      $('#msg').html('Success')
       return false;
  } else {

      $('#msg').html('Fail')
  }

});

});

​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:17:33.427

```
if ($('#country-select').val() =="us") {
  valid = false;
} else 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T01:34:18.713

你必须 `$("#us-select").val() =="" || $("#germany-select").val() ==""` 改变 `$("#us-select").val() =="none" || $("#germany-select").val() =="none"`

因为您选择的默认值是“无”->

`<select id="country-select"> <option **value="none"** >---</option> <option value="us" >US</option> <option value="germany">Germany</option> </select>`

# javascript - 将 div 动态变成按钮

> ID：12850823
> 
> 赞同：0
> 
> 时间：2012-10-12T01:01:20.927
> 
> 标签：javascript, jquery, html, onclick

我似乎没有找到任何方法来解决这个问题..所以我想我需要一些帮助..我正在制作一个 phonegap 应用程序，其中我有一个 sqlite 数据库。我执行查询并动态获取结果从数据库中创建了 div，问题是我想要为我提取的每条记录制作包含它的 div，作为具有可编辑角色的按钮..

例如，假设我有一个带有这些列 id option1 option2 的数据库，并且我有三个记录。这意味着我将拥有三个我想要的 div，每个 div 都是一个按钮，这样如果用户点击它就能够执行删除（或编辑/更新）查询而不用担心 id 例如，如果他选择 div2 执行将删除第二条记录的查询..

到目前为止我的代码..

```
for (var i = 0; i < len; i++) {
    var test1 = results.rows.item(i).option1;
    var d = new Date();
    d.setTime(results.rows.item(i).date);
    var newLI = document.createElement("LI");
    newLI.className = lt;
    newLI.id = results.rows.item(i).id;
    var container = ("<div id=\"" + results.rows.item(i).id + "\" class=\"test\"><div id=\"text\">option1</div><div id=\"data\">" + test1 + "</div></div>");
    newLI.innerHTML = cont;
    var gl = document.getElementById("sqltest");
    gl.appendChild(newLI);
}
for (var i = 0; i < len; i++) {
    var divid = "#" + results.rows.item(i).id;
    $(divid).on("click", function () {
        alert(divid);
    })
}

<ul id="sqltest"></ul> 
```

上面代码的问题是，虽然每个 div 都有正确的 id，但当我点击它时，我总是得到相同的结果，例如 #1 尽管我可能有 3 个 div .. 而不是结果

```
div1 alert #1 div2 alert #2 
```

我明白了

```
div1 alert #1 div2 alert#1 
```

我使用警报只是为了简化它，而不是警报`DELETE from SQLDB WHERE id=results.rows.item(i).id;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T04:07:31.590

由于 javascript 作用域和闭包的工作方式，您总是在检索相同的“除”变量。这是一个非常常见的错误。您可以谷歌“javascript 关闭臭名昭著的循环”以获取有关此的更多信息。

你应该用这个替换你*的*：

```
for (var i = 0; i < len; i++) {

    (function () {
        var divid = "#" + results.rows.item(i).id;
        $(divid).on("click", function () {
            alert(divid);
        });
    })();
} 
```

这样，变量*divid 每次*都在不同的范围内声明。

我不明白这是否是您遇到的唯一问题。

# asp.net - 如何从 LINQ 列表中获取数据？

> ID：12850826
> 
> 赞同：0
> 
> 时间：2012-10-12T01:01:47.107
> 
> 标签：asp.net, linq

我有这些模型：

```
public class StationData
{
    public List<StationToStationModel> Distances { get; set; }
    public List<int> SortestPath { get; set; }
}

public class StationToStationModel
{
    public int FromStation { get; set; }
    public int ToStation { get; set; }
    public int Distance { get; set; }
} 
```

在我的主页中，我调用了一个方法，该方法将返回“StationData”类型的对象。

现在，我想要的是获取“ToStation”值，其中“Distance”是给定的 StationToStationModel 列表中的最小距离值。怎么做？

谢谢

RJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:24:42.697

尝试这个：

```
StationData sd = new StationData(); 
var toStation= sd.Distances.Where(row => row.Distance== sd.Distances.Min(r => r.Distance))
                  .Select(row => row.ToStation); 
```

# python - 使静态方法显式引用该类

> ID：12850828
> 
> 赞同：2
> 
> 时间：2012-10-12T01:01:49.993
> 
> 标签：python, coding-style, static-methods

Python 不仅允许从类调用静态方法，还允许从实例调用静态方法：

```
class X:
  @staticmethod
  def f():
    print('f')

x = X()
X.f() 
x.f() # same as above 
```

当我们只有一个实例可以使用时，这可能很方便；毕竟，谁想写`x.__class__.f()`而不是`x.f()`。

但是我发现许多代码的读者（包括我自己）倾向于将其解释`x.f()`为实例方法。也就是说，他们假设所做的任何事情要么使用要么改变`x`。在某些情况下，这甚至会导致错误（开发人员错误地解释了 的语义`f`）。

所以我正在考虑采用一种约定，即所有静态方法都只使用类对象调用。如果违反此约定，是否有任何静态分析工具会警告我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T01:17:04.087

我不认为这么多的静态检查是pythonic，但是......

```
class enforced_staticmethod(staticmethod):
     def __get__(self, instance, cls):
         if instance is not None:
             raise Exception('Do not call with an instance.')
         return super(enforced_staticmethod, self).__get__(self)

class C:
    @enforced_staticmethod
    def hai(x):
        return x + 1 
```

你可以测试：

```
>>> C.hai(10)
11
>>> C().hai(10)
Traceback (most recent call last):
  File "<pyshell#52>", line 1, in <module>
    C().hai(10)
  File "<pyshell#48>", line 4, in __get__
    raise Exception('Do not call with an instance.')
Exception: Do not call with an instance. 
```

# asp.net - 让coldfusion和asp.net共享会话变量

> ID：12850832
> 
> 赞同：2
> 
> 时间：2012-10-12T01:02:40.573
> 
> 标签：asp.net, session, coldfusion, session-variables, coldfusion-9

我正在寻找一种让 ColdFusion 和 ASP.NET 共享会话变量的方法。我过去看过一些帖子说，如果不调用某种 ColdFusion 函数来返回会话的某种字符串表示形式，就无法直接执行此操作。我最近了解了一个叫做 ehcache 的东西，它是一个第三方会话存储工具。这让我想知道是否有第三方会话工具允许 ASP.NET 和 ColdFusion 共享会话。

关于我们系统的一些细节：

*   他们正在运行 Windows Server 2008
*   我们正在使用 IIS
*   我们正在使用 ColdFusion 9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:16:55.090

ColdFusion/Railo 和 asp.net 可以使用 EHCache，但它们不太可能开箱即用地共享会话。每个人都有自己的会话密钥，他们将使用它来输入/输出数据。他们都有自己的数据存储方式。我可能错了，但从记忆中，ColdFusion 使用 WDDX，Railo 使用 JSON 之类的东西，我不知道 .Net 平台使用什么。

关键是每个都隐藏了直接处理 ehcache 的复杂性，但是他们每个人都以自己的方式来做。如果您想进行互操作，您可能需要将每个读/写直接写入 ehcache（或数据库）。您还必须想出一种在 .Net 和 ColdFusion 之间共享公用密钥的方法。

如果您正在推出自己的版本，那么使用 JSON 作为通用格式可能是有意义的。

# c++ - C ++如何从main（）外部访问在main（）中初始化的对象？

> ID：12850833
> 
> 赞同：0
> 
> 时间：2012-10-12T01:02:40.360
> 
> 标签：c++

我的 main() 看起来像这样：

```
 int main(int argc, char** argv)
    {
    // Initialize GLUT
    glutInit(&argc, argv);

    ...

    glutDisplayFunc(display);
    ...

    // Set robot's parameters
    Robot robot; // Initialize global object robot
    robot.setSize(50);
    robot.setColor('G');
    robot.setLocation(50,100);

    glutMainLoop();
    return EXIT_SUCCESS;
} 
```

然后我有另一个函数，我想访问机器人的方法：

```
// This function is constantly "looped"
void display() {
    ...
    robot.draw();
    ...
} 
```

在 C++ 中这样做的合法方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T01:06:04.513

对于任何感兴趣的人，问题都发生了变化，所以我的旧答案在编辑中丢失了。

如果您的`display`函数需要具有特定签名 ( `void()`)，则可以使用`std::bind`，假设您可以访问 C++11：

```
void display(Robot &robot){...}

//in main
Robot robot;
glutDisplayFunc(std::bind(std::ref(display), robot)); 
```

如果您没有 C++11，`boost::bind`也可以使用：

```
glutDisplayFunc(boost::bind(boost::ref(display), robot)); 
```

如果两者都没有，则必须在`robot`全球范围内存储更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T01:19:58.440

由于 glut 显示回调不带参数，因此您必须使用全局变量 (Robot * gRobot; ) 或单例模式。

# php - 使用 GD 库从现有图像中去除黑边

> ID：12850834
> 
> 赞同：3
> 
> 时间：2012-10-12T01:02:55.027
> 
> 标签：php, image, gd

我正在下载一张已经有黑边的图像。注意：这不是我调整图像大小的结果。如何使用 GD 库来检测和去除这些黑边？

![在此处输入图像描述](../Images/608ef690421a277e5bb76c0ab247e4d4.png)

![在此处输入图像描述](../Images/ce0699b1e3356d599a1744342f254410.png)

**更新**

这是使用脚本裁剪的图像 ![在此处输入图像描述](../Images/a60157ba4abde13abe076669cc5d59d7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T02:10:29.220

我能够想出一个耗时的解决方法。存储的图像是否*需要*使用那些黑色边框存储？如果您可以通过以下脚本运行每个带有黑色边框的图像（使用 php 循环遍历目录中的每个图像）并让 php 用新的无边框图像覆盖旧的黑色边框图像，那就更好了。

我采用的方法是创建 4 个循环：

1.  查看右侧的黑色边框（循环通过 x -> 循环通过 y）
2.  查看左侧的黑色边框（循环通过 x -> 循环通过 y）
3.  查看底部的黑色边框（循环 y -> 循环 x）
4.  查看顶部的黑色边框（循环 y -> 循环 x）

现在，这些循环中的每一个都有另一个循环，它将循环通过另一个坐标（即，x->y 或 y->x）。如果内循环发现位于外循环线上的像素之一不是黑色的，它就会破坏整个外观。如果它没有找到，它会向计数器增加一个。

最后，我们只需创建一个具有新尺寸的新图像，然后从新图像复制到旧图像。

```
<?php
$image_path = "jcMHt.jpg";

$jpg = imagecreatefromjpeg($image_path);
$black = array("red" => 0, "green" => 0, "blue" => 0, "alpha" => 0);

$removeLeft = 0;
for($x = 0; $x < imagesx($jpg); $x++) {
    for($y = 0; $y < imagesy($jpg); $y++) {
        if(imagecolorsforindex($jpg, imagecolorat($jpg, $x, $y)) != $black){
            break 2;
        }
    }
    $removeLeft += 1;
}

$removeRight = 0;
for($x = imagesx($jpg)-1; $x > 0; $x--) {
    for($y = 0; $y < imagesy($jpg); $y++) {
        if(imagecolorsforindex($jpg, imagecolorat($jpg, $x, $y)) != $black){
            break 2;
        }
    }
    $removeRight += 1;
}

$removeTop = 0;
for($y = 0; $y < imagesy($jpg); $y++) {
    for($x = 0; $x < imagesx($jpg); $x++) {
        if(imagecolorsforindex($jpg, imagecolorat($jpg, $x, $y)) != $black){
            break 2;
        }
    }
    $removeTop += 1;
}

$removeBottom = 0;
for($y = imagesy($jpg)-1; $y > 0; $y--) {
    for($x = 0; $x < imagesx($jpg); $x++) {
        if(imagecolorsforindex($jpg, imagecolorat($jpg, $x, $y)) != $black){
            break 2;
        }
    }
    $removeBottom += 1;
}

$cropped = imagecreatetruecolor(imagesx($jpg) - ($removeLeft + $removeRight), imagesy($jpg) - ($removeTop + $removeBottom));
imagecopy($cropped, $jpg, 0, 0, $removeLeft, $removeTop, imagesx($cropped), imagesy($cropped));

header("Content-type: image/jpeg");
imagejpeg($cropped); //change to `imagejpeg($cropped, $image_path);` to save
imagedestroy($cropped);
imagedestroy($jpg); 
```

# google-apps-script - 列出 Google 协作平台中 Google Drive 文件夹中的文件

> ID：12850839
> 
> 赞同：2
> 
> 时间：2012-10-12T01:03:18.717
> 
> 标签：google-apps-script, google-docs-api, google-sites

我正在关注本[教程](https://developers.google.com/apps-script/articles/embedding_docslist_in_sites)，特别是在第 2 节中。

这段代码片段给了我问题

```
function showFolderInSite() {
  var files = DocsList.getFolderById("PASTE_FOLDER_ID_HERE").getFiles();
  var page = SitesApp.getPageByUrl("PASTE_PAGE_URL_HERE");
  var listItems = page.getListItems();
  for(i in listItems){
     listItems[i].deleteListItem();
  }
  for(i in files){
     var title = "<a href=\""+files[i].getUrl()+"\">"+ files[i].getName() +"</a>";
     // Add data according to the order of columns in your list
     page.addListItem([title, files[i].getType(), files[i].getSize(), files[i].getOwner(), files[i].getLastUpdated()]);
 }
} 
```

我遇到的错误是

```
The anchor tag supplied for the List Item was not properly formed. (line 13) 
```

当我将代码更改为

```
var title = "<a href=\"File"+i+"\">"+ "DEBUG: File " + i +"</a>"; 
```

该脚本运行正常，并且 Google 站点页面上的列表已更新 - 显然名称为“DEBUG”且链接无效。我实际上可以看到正确的类型和所有者，尽管其他列没有。

这里可能是什么问题？

网址是[https://sites.google.com/site/startupgaragemalaysia/file-list](https://sites.google.com/site/startupgaragemalaysia/file-list)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:29:55.690

我复制了你的代码，它在我的环境中运行没有问题。我创建了一个包含 5 列的列表的 Listpage。只需确保您将列表的第一列设置为键入 URL，并将列表的最后一列设置为日期。

-- 更新：我让它在另一个文件夹上运行。该文件夹中包含带有“&”符号和其他一些需要 URL 编码的符号的文件。所以你必须做类似 encodeURIComponent(files[i].getName())

# jquery - 自定义验证 jquery 插件

> ID：12850844
> 
> 赞同：0
> 
> 时间：2012-10-11T23:28:46.823
> 
> 标签：jquery, twitter-bootstrap, jquery-validate

我有一个由 validate jquery 插件验证的表单。

```
<form action="" id="contact-form" class="form-horizontal">
    <fieldset>
        <div class="control-group">
            <label class="control-label" for="name">Nome:</label>
            <div class="controls">
                <input type="text" class="input-xlarge" name="name" id="name" placeholder="Indique o seu nome" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="email">Email:</label>
            <div class="controls">
                <input type="email" class="input-xlarge" name="email" id="email" placeholder="Indique o seu email" />
            </div>
        </div>
        <!-- ... -->
    </fieldset>
</form> 
```

**脚本代码：**

```
$('form#contact-form').validate({
    rules: {
        name: {
            minlength: 2,
            required: true
        },
        email: {
            required: true,
            email: true
        },
        // ...
    },
    highlight: function(label) {
        $(label).closest('.control-group').addClass('error').removeClass('success');
    },
    success: function(label) {
        label.closest('.control-group').addClass('success');
    },
    submitHandler: function(form) {
        $('form#contact-form').slideUp("slow", function() {
            $(this).before('<div class="alert alert-success"><h4>Informação</h4>Mensagem Enviada com sucesso.</div>');
            setTimeout(function () {
                $('#modal').modal('hide');
            }, 3000);
        });
        return false;
    }
}); 
```

我有两个问题：

1.  他们需要的是，当错误得到纠正时，.error 类被删除，生成的标签也被删除。
2.  我必须放置一个具有具体值的元素的规则是什么，例如数字 8？

**当元素包含错误时，代码如下所示：**

```
<div class="control-group error">
    <label class="control-label" for="email">Email:</label>
    <div class="controls">
        <input type="email" class="input-xlarge" name="email" id="email" placeholder="Indique o seu email">
        <label for="email" generated="true" class="error" style="">Por favor introduza um endereço de email válido.</label>
    </div>
</div> 
```

**更正错误后，代码如下所示：**

```
<div class="control-group error success">
    <label class="control-label" for="name">Nome:</label>
    <div class="controls">
        <input type="text" class="input-xlarge" name="name" id="name" placeholder="Indique o seu nome">
        <label for="name" generated="true" class="error" style=""></label>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:33:31.923

1.  将您的成功功能更改为：

    ```
    success: function(label) {
        label.closest('.control-group').removeClass('error').addClass('success');
    } 
    ```

    从 html-tag 中删除 generated=true 参数是不明智的。我过去曾这样做过，它只会给验证功能增加麻烦。

2.  您可以添加一个方法：

    ```
    $.validator.addMethod("equalTo", function(value, element, param) { return (value == param); }); 
    ```

    比你的规则：

    ```
    name: {
        minlength: 2,
        required: true,
        equalTo: "8"
    } 
    ```

# php - 将 example.com/out/1234 重定向到另一个 URL

> ID：12850847
> 
> 赞同：0
> 
> 时间：2012-10-12T01:04:05.990
> 
> 标签：php, apache, .htaccess, mod-rewrite, redirect

我知道有很多关于重定向的帖子，但这有点不同（我认为）。

基本上，我希望我的外链是 example.com/out/1234，并且我希望它们转到一个 php，如果在 MySQL 中引用，则该 php 会查找 URL 1234，并且 php 标头重定向到该 URL。

我遇到的问题是将 1234 传递到页面。我知道如果它是 out.php?q=1234 但我希望它是 /out/1234

/out 目录中是否需要有一个索引文件也有一个 htaccess 来重写它？

如果是这样，任何想法正则表达式需要这样做吗？我见过一些网站这样做，但我无法解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:12:43.847

htaccess 文件，您可以尝试添加：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?out/(.*)$ /out.php?q=$1 [L] 
```

将 替换为`/out.php`您用于处理 URL 的 php 脚本

# php - PHP - 许可类型脚本的 CMS 推荐

> ID：12850853
> 
> 赞同：0
> 
> 时间：2012-10-12T01:05:16.147
> 
> 标签：php, content-management-system, encode, superglobals

因此，我正在尝试制作自己的迷你 CMS，并且就我的知识而言，一旦我做得足够好，而且我知道的足够多，我想卖掉它。现在对于许可，我知道您可以支付大量许可脚本，但是以下是否可取？

我想在我的 CMS 中植入一个隐藏的脚本，而不是检查某种密钥，它通过运行主 CMS 数据库来检查您的域是否允许运行 CMS。现在我有两个问题。

1.）我可以加密代码吗，所以如果我想让它重定向到一个页面，它只显示“CMS 已停用”，例如，这样人们就不会通过 ctrl-f 搜索关键文本的代码？

2.）我打算通过执行以下操作来访问域名，`$_SERVER['SERVER_NAME']`. 这将是检查域的可靠方法吗？IE。IIS 会接受它吗？

我并不是要彻底消灭 CMS 的破解，我知道那是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:11:03.943

也许您应该考虑将整个内容放在您自己的服务器上，并通过 REST API 使内容可访问。您当然可以通过这种方式进行限制和控制。

向任何客户提供带有源代码的 CMS 可以让您进行评估和清理。并不是说没有办法，而是我说通过 REST 提供内容可能比编写完美的安全性更容易。特别是如果你问这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:11:34.280

正如我在评论中所说，我认为现在担心金钱无关紧要，但这里有一些信息供您学习。

1.) 我还没有找到有效的加密解决方案。任何都需要您安装额外的 PHP 组件（当有大量免费的 CMS 时，没有人愿意处理这个问题）。存在代码混淆，但[充其量是不确定的。](https://stackoverflow.com/questions/232736/code-obfuscator-for-php)

2.）根据[this page](http://koivi.com/archives/apache-iis-php-server-array.php)，这应该可以在IIS上运行！

# boost - 通过 Codeblocks、windows 提升构建

> ID：12850855
> 
> 赞同：1
> 
> 时间：2012-10-12T01:05:32.293
> 
> 标签：boost

我按照之前的一些说明构建了 boost

[增强 Windows/代码块的构建说明，寻求帮助](https://stackoverflow.com/questions/12832895/boost-build-instructions-for-windows-codeblocks-help-sought)

但是现在我在尝试编译时遇到了这个奇怪的错误

对`_imp___ZN5boost6thread12start_threadEv'的未定义引用|

我想做的就是使用增强线程...

这家伙有同样的问题（它是法语）

[http://www.siteduzero.com/forum-83-603401-p1-lib-boost-thread.html](http://www.siteduzero.com/forum-83-603401-p1-lib-boost-thread.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:16:09.147

solved in codeblocks, this fixed it

settings compiler & debugger linker settings add

```
F:\CodeBlocks\lib\libboost_regex-mgw44-1_51.a
F:\CodeBlocks\lib\libboost_thread-mgw44-mt-1_51.a
F:\CodeBlocks\lib\libboost_chrono-mgw44-1_51.a
f:\codeblocks\lib\*.a 
```

depends on libraries needed, which depends on your #includes

# java - 如何获取网页中当前 AJAX 调用的列表以及如何以编程方式跟踪（如果已完成）

> ID：12850856
> 
> 赞同：0
> 
> 时间：2012-10-12T01:05:32.517
> 
> 标签：java, testing, selenium, webdriver

我有一个有趣的测试问题。
我的要求是在网站上进行性能测试。

在这里发布以获得加载网页的真实时间（我正在测试）。我在这里指的是完成所有（初始）AJAX 调用（带有一些响应）所花费的总时间。我想到了使用页面加载事件。
但是这种方法并没有给出真正的时间。
任何建议如何做任何参考信息也很棒！

我的环境：Java 和 WedDriver。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:31:18.420

使用时间戳标记您的请求对象，并在收到相应响应时从系统时间中减去它。

根据您的方法，您可以`<T>`在服务器端拥有带有有效负载和解复用器的通用请求/响应对象。然后，这些通用对象可以包含代码以自动注册发送和接收的时间，并将花费的时间提供给客户端。使用这种方法聚合加载整个页面所花费的时间有点棘手，但我认为并非不可能 - 如果请求也被标记为原始页面，则 RPC 代理可能会跟踪这一点。

如果您要提供一些设置/代码的具体示例，我可能会更准确。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T08:17:42.277

正如大家所说，WebDriver 并不意味着性能。但是，请参阅我有时使用的以下方法。

如果您可以捕获针对某些特定 web 元素（可以是一个`div`或一个`span`块）的性能，则以下代码将起作用。

**1**使用任何秒表。我正在使用 apache 秒表。

```
import org.apache.commons.lang3.time.StopWatch; 
```

**2**初始化变量

```
StopWatch timer = new StopWatch(); 
```

**3**启动计时器并在下一行导航到您的页面。我更喜欢`driver.navigate().to()`它，`driver.get()`因为我觉得它减少了调用新 URL 的其他处理时间。

```
timer.start();
driver.navigate().to(URL); 
```

**4**等待可以指定*页面加载完成*的特定元素。一旦出现，在下一行停止计时器。

```
new WebDriverWait(driver, 10).until(ExpectedConditions. presenceOfElementLocated(By.className("demoClass")));
timer.stop();
System.out.println("timer.getTime() + " milliseconds"); 
```

**附加说明：**如果您想知道任何特定 webapge 加载的网络调用的加载时间，请使用 webkit like`phantomJS`或类似`browsermobproxy`. 它将在 HAR/JSON 文件中返回网络调用。解析这些文件，你可能会得到你的时间。

希望这可以帮助。

# javascript - 如何在不使用 onclick 或 onmousedown 的情况下从锚的 href 属性中停止事件传播

> ID：12850860
> 
> 赞同：3
> 
> 时间：2012-10-12T01:06:36.300
> 
> 标签：javascript, jquery, anchor, event-propagation

由于限制，即使它是我完全避免的，在某些情况下我必须使用 javascript: 在 achor 标记的 href 属性中的语法。

*（说明：在我的 CMS 中，我使用富文本编辑器来允许用户更改文本元素，包括链接。在某些情况下，需要特定的 javascript: 调用，并且我从链接编辑功能中完全禁止了 onclick（以简化过程对于用户）。但是，由于其中一个链接出现在对 onclick 事件做出反应的块中，所以事情会双重触发）*

像这样：

```
<a href="javascript:doSomething()"></a> 
```

我的问题是该链接位于已经对 onclick 事件作出反应的容器内。因此我想将事件对象传递给 doSomething() 方法，这样我就可以使用 jQuery 的

```
event.stopPropagation() 
```

方法。

然而不幸的是，似乎传递事件对象

```
<a href="javascript:doSomething(event)"></a> 
```

似乎根本不起作用。Safari 什么也不说，而 Firefox 会报告*ReferenceError: event is not defined*

我假设是这种情况，因为 href="" 不是脚本启动属性（例如 onclick）。问题是在这种情况下，我将无法访问超出我已经做过的标签。

因此我要么需要

1.) 一种从 href 属性中将事件对象传递给 doSomething() 函数的方法

或者

2.) 一种通过其他方式在该锚点（点击后）停止事件传播的方法。

感谢您的任何建设性意见！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T01:51:39.197

您无法停止从`href`属性传播事件，因为：

1.  当`href`代码执行时，它不是一个事件。它只是执行该代码，类似于“位置破解”。就像`javascript:doSomething()`在浏览器的地址栏中输入一样。

2.  href 代码在链接上触发事件 ***后执行——包括冒泡。***

    [您可以在这个 jsFiddle](http://jsfiddle.net/QE8zt/1/)中看到这种行为。请注意，在代码执行之前，当链接被点击时`mouseup`，`mousedown`, 和`click`all 都会为链接和容器触发。`href`

如果有要阻止的事件侦听器，则必须找到另一种方法。

* * *

但是，**如果您可以将 javascript 附加到文档**中，则可以阻止`href`using `preventDefault()`。

例如：

*   **jQuery，在 1.7 版之前：**

    ```
    $("#container a").bind ("mousedown mouseup click", function (e) {
        e.preventDefault();
    } ); 
    ```

*   **jQuery 1.7 及更高版本：**

    ```
    $("#container a").on ("mousedown mouseup click", function (e) {
        e.preventDefault();
    } ); 
    ```

    或更好）：

    ```
    $("#container").on ("mousedown mouseup click", "a", function (e) {
        e.preventDefault();
    } ); 
    ```

您可以[**在 jsFiddle 看到最新版本**](http://jsfiddle.net/n7oo9o6d/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:01:13.533

如果您无法更改链接本身（使用 onclick），那么您唯一的选择是更改容器的 onclick 处理程序。

你能做类似的事情吗

```
function containerClickHandler(e) {
  e = e || event;
  var el = e.target || e.srcElement;
  if (el.nodeName === 'A' && someOtherMatchChecks) {
       // eat event
  }
  else {
       // process event
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-26T18:46:22.330

好吧，这是一个老问题，但在我的特殊情况下，我确实找到了一个解决方法，但它可能只适用于部分情况。我有一个有 onclick 的 div。但是，如果单击该 div 内部，我不希望该 div 的 onclick 触发。这是我所做的：

```
function myOnClick () {

  // loop over all <a>'s, and test if they are hovered over right now.
  var allLinks = document.links;
  var dont = 0;
  for (var i = 0, n = allLinks.length; i < n; i++) {
    // pure javascript test to see if element is hovered.
    if(allLinks[i].parentElement.querySelector(":hover") === allLinks[i]) {dont = 1; }
  };

  if(dont)return;

  // your stuff here, only fires when dont is false.

} 
```

我在这里了解了查询选择器技巧：[https ://stackoverflow.com/a/14800287/2295722](https://stackoverflow.com/a/14800287/2295722)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T01:23:58.110

如果您在 href 属性中编写 javascript，我不知道是否有办法获取参数。但是您可以在 onclick 中按以下方式获取它，但是正如您所说，这不是最佳实践：

```
<a onclick="console.log(arguments)">your link</a> 
```

在参数数组中，您将获得您的事件对象。

这是一个演示：

[http://jsfiddle.net/tEw5J/1/](http://jsfiddle.net/tEw5J/1/)

# github - 是否可以跟踪我的 github 存储库的视图和克隆

> ID：12850864
> 
> 赞同：26
> 
> 时间：2012-10-12T01:07:31.987
> 
> 标签：github

只是想知道是否有任何可用于 github 的 Analytics 类型的东西。我很想知道谁在查看/使用我的代码，如果有人...

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-05-23T20:53:27.787

GitHub 存储库的所有分析都可在

```
https://github.com/<username>/<reponame>/graphs/traffic 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-12T07:36:39.920

2014 年 8 月更新：

流量图现在包括**克隆数量**：请参阅“[克隆图](https://github.com/blog/1873-clone-graphs)”

![https://cloud.githubusercontent.com/assets/395621/3867646/2c340b8a-2009-11e4-8823-9ddda44b51e0.png](../Images/1dabae6496c89904a11cc72fd20df3b1.png)

[2020 年](https://docs.github.com/en/free-pro-team@latest/github/visualizing-repository-data-with-graphs/viewing-traffic-to-a-repository)的文件 指出：

> 任何对存储库具有推送访问权限的人都可以查看其流量，包括完整克隆（而非获取）、过去 14 天的访问者、引用站点以及流量图中的热门内容。

* * *

所有信息主要通过[（新装修的）用户页面](https://github.com/blog/1256-new-user-profile-pages)获得。

[但是您可以通过Github API 为用户](http://developer.github.com/v3/users/)查询其中一些数据，如“[我如何在一天内建立我的博客](http://erjjones.github.com/blog/How-I-built-my-blog-in-one-day/)”中所述

> 我想要一个按钮来显示我的 GitHub 关注者数量和动态的 GitHub 存储库。
> GitHub提供了每个用户信息的api：

```
jQuery(document).ready(function() {

        $('#gf').text('GitHub Followers');
        $('#gfr').text('GitHub Repos'); 

$.get('https://api.github.com/users/erjjones', function(res) {
var obj = jQuery.parseJSON(res);    
if(typeof obj.followers != 'undefined') 
{   
$('#gf').text(obj.followers + ' GitHub Followers');
$('#gfr').text(obj.public_repos + ' GitHub Repos'); 
}   
    }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-19T08:06:44.770

（免责声明：我开始构建这个）

[https://github.com/jgehrcke/github-repo-stats](https://github.com/jgehrcke/github-repo-stats)是一个 GitHub Action，它定期从 GitHub 查询有关总/唯一视图、总/唯一克隆（以及更多，例如观星者、分叉等）的数据HTTP API。它保存数据，并生成带有各种图表的 HTML 报告。该报告还生成为 PDF 文档（带有矢量图形！:)）

部分报告截图：[https ://i.imgur.com/Vxwp15l.png](https://i.imgur.com/Vxwp15l.png)

演示报告链接在[https://github.com/jgehrcke/github-repo-stats](https://github.com/jgehrcke/github-repo-stats)的主 README 中。

[![在此处输入图像描述](../Images/27225bd2d638a6ea9c2d625ed4b924b2.png)](https://i.stack.imgur.com/833AZ.png)

# silverlight - 从视图绑定到基本视图模型命令

> ID：12850865
> 
> 赞同：0
> 
> 时间：2012-10-12T01:07:32.930
> 
> 标签：silverlight, mvvm, binding, command, viewmodel

我有一个基本视图模型和两个派生的视图模型。在我的基本视图模型中，我有一些命令 CloseCommand、CancelCommand 等。

我的视图附加到派生的视图模型之一。我需要将一个按钮绑定到基本视图模型中的 CloseCommand。我怎样才能通过继承做到这一点？

我已将按钮的内容与基本 viewModel 中的字符串属性绑定，并且工作正常，但是如何绑定命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:51:37.840

只要将这些命令公开为 ViewModel 的公共属性，您无需做任何特别的事情来绑定这些命令。我有同样的情况，所以这是我自己的实现方式。

首先在您的基类中定义 ICommand 类型的 OKCommand / CancelCommand。就 Execute 和 CanExecute 方法而言，我将它们定义为受保护的虚拟方法（顺便说一下，您还可以将命令定义为虚拟。这将使您能够编写 XAML 样式，将按钮的可见性模式设置为折叠，如果它命令值为空）。在派生的 ViewModel 中，您只需根据需要覆盖命令、Execute 和 CanExecute 方法，但从您的角度来看，您始终只需直接绑定到命令名称。

以下是我刚刚向您解释的示例。

```
public abstract class ViewModelbase
{
    private DelegateCommand _okCommand;
    public virtual DelegateCommand OkCommand
    {
        get { return _okCommand ?? (_okCommand = new DelegateCommand(OkExecuteCommand, CanOkExecute)); }
    }

    protected virtual void OkExecuteCommand()
    {
        DialogResult = true;
    }

    protected virtual bool CanOkExecute()
    {
        return IsValid;
    }
} 
```

然后你只需定义从基本 ViewModel 类派生的具体 ViewModel 类

```
public class SampleViewModel : ViewModelbase
{
   //If u have defined XAML style which sets viability of button as collapsed if its command value is null u simply override command
   public override DelegateCommand OkCommand { get { return null; } }
    protected override void OkExecuteCommand()
    {
        do whatever u want as this is a command execution
    }
} 
```

在 XAML 部分中，您不必做任何特别的事情，只需将您的按钮命令绑定到 Viewmodel 命令，就像没有基类时所做的那样。 **这里的关键点是您应该使用 public 修饰符从基本 ViewModel 类中公开命令（您只需要 getter，因此此代码提供了您可以公开命令的一种方式的示例）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T04:36:52.840

没什么特别的，这是你需要做的：

1.  将 View 的 DataContext 设置为派生的 ViewModel
2.  例如，确保将 CloseCommand 声明为 ViewModelBase 中的公共属性
3.  将 Button 的 Command 属性设置为“{Binding CloseCommand}”

# javascript - Javascript 中的碰撞处理 - 粒子被卡住

> ID：12850870
> 
> 赞同：1
> 
> 时间：2012-10-12T01:08:23.470
> 
> 标签：javascript, collision-detection, physics, collision, momentum

我正在尝试重新创建[它](http://mbostock.github.com/protovis/ex/nbody.html)，并且我已经相当成功。不过，我在碰撞处理方面遇到了问题。尽管碰撞处理似乎有效，但它的行为非常奇怪。[这](http://www.colekito.com)是我到目前为止所拥有的。这是处理冲突的代码：

```
var dx = particle2.getX() - particle1.getX();
var dy = particle2.getY() - particle1.getY();
var angle = Math.atan2(dy, dx);

var newP2X = particle1.getX() + (particle1.getRadius() + particle2.getRadius()) * Math.cos(angle);
var newP2Y = particle1.getY() + (particle1.getRadius() + particle2.getRadius()) * Math.sin(angle);

particle2.setX(newP2X);
particle2.setY(newP2Y);     

var p1Vxi = particle1.getVx();
var p1Vyi = particle1.getVy();
var p1Mass = particle1.getMass();

var p2Vxi = particle2.getVx();
var p2Vyi = particle2.getVy();
var p2Mass = particle2.getMass();

var vxf = (p1Mass * p1Vxi + p2Mass * p2Vxi) / (p1Mass + p2Mass);
var vyf = (p1Mass * p1Vyi + p2Mass * p2Vyi) / (p1Mass + p2Mass);

particle1.setVx(vxf);
particle1.setVy(vyf);
particle2.setVx(vxf);
particle2.setVy(vyf); 
```

**编辑：我试图将其更改为建议的非弹性碰撞，但由于某种原因，球碰撞不规律。[在这里](http://www.colekito.com)查看。**

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:44:53.860

首先，直观地想象一下将一个豆袋扔到结冰的池塘上。它击中，根本不反弹（失去它所拥有的任何垂直速度），并以与它相同的横向速度滑动。这就是我们正在尝试的那种碰撞。

现在物理。移动参考系。一列北行的火车经过一个谷仓。在谷仓农民的参考系中，谷仓是静止的，火车以 10 m/s 的速度向北 (0°) 移动。在火车乘客的参考系中，火车是静止的，而谷仓以 10 m/s 的速度向南 (180˚) 移动。一名骑自行车的人以 5 m/s 的速度向东 (90˚) 骑行（在农民的参考系中）；在自行车手的框架中，自行车是静止的，谷仓以 5 m/s 的速度向西 (270˚) 移动，火车以 11.18 m/s 的速度移动，轴承 333.4˚。我们可以轻松地在不同的帧之间进行转换。

两件事正在发生冲突。我们感兴趣的框架是总动量为零的框架。这称为质心框架。如果两个质量是 m [1]和 m [2]，速度是**v [1]**和**v [2]**，那么质心的速度（在质心框架中的一个静止点，就像自行车手的自行车一样）帧）是（m [1] **v [1]** + m [2] **v [2]**）/（m [1] + m [2]）。我们计算这个框架中两个物体的速度并继续。

物体发生碰撞。我们画了一个接触平面——在这种情况下，一条在接触时与两个圆相切的线。这是一个瞬时构造，在所有参考系中都相同（不涉及旋转）。在质心框架中，每个物体的行为就像这个边界是一个静止的固体表面——在这种情况下是一块冰，没有反弹。所以我们把速度矢量分成两个分量，一个平行于冰的表面，一个垂直（垂直）它；我们保留第一个并丢弃第二个。

然后我们转换回谷仓框架，我们就完成了。

# python - AttributeError：“Win32EventLoop”对象没有属性“_next_idle_time”

> ID：12850871
> 
> 赞同：2
> 
> 时间：2012-10-12T01:08:26.130
> 
> 标签：python, pyglet

我在 python 中做 OpenGL，我将我的上下文从 glut 切换到 pyglet，因为 glut 没有关闭窗口事件。当我做窗口时，只有当我将鼠标移到它上面时才会更新。文档说绘制函数将在所有事件被拉出后被调用。我猜它不会因为这个错误。

```
AttributeError: 'Win32EventLoop' object has no attribute '_next_idle_time' 
```

我把它画出来了，但是有几个问题。我必须为空的 pyglet 时钟安排一个函数，以便调用 1/60 次并且它会更新。但是因为它是在收到任何事件后绘制的。如果我将鼠标移到它上面，cpu 使用率会从 3-4 变为一个完整的核心，即 25%。（我有一个四核）。我的猜测是当我将鼠标移到它上面时它正在绘制超过 60 帧。如果这是 Windows 7 的问题，我将不得不回到 glut。

# android - 从互联网下载图像会损失透明度

> ID：12850874
> 
> 赞同：4
> 
> 时间：2012-10-12T01:09:02.397
> 
> 标签：android

当我从互联网下载图像并保存到 sdcard 时，当原始图像没有时，图像具有黑色背景

```
httpRequest = new HttpGet(fileUrl);
 HttpClient httpclient = new DefaultHttpClient();
 HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);
 HttpEntity entity = response.getEntity();
 BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
 InputStream instream = bufHttpEntity.getContent();
 Bitmap    bm = BitmapFactory.decodeStream(instream);
 String file_path = Environment.getExternalStorageDirectory()+File.separator+"basquetMobile-  images";
 File dir = new File(file_path);     
 if(!dir.exists())
        dir.mkdirs();
 File file = new File(dir, tipoImagen+idEquipo+".jpg");
 FileOutputStream fOut = new FileOutputStream(file);
 bm.compress(Bitmap.CompressFormat.JPEG, 75, fOut);
 fOut.flush();
 fOut.close(); 
```

谢谢您的帮助！！

**>>>>>>>>>>>>>>>>>>>>>>[解决方案]<<<<<<<<<<<<<<<<<>>>>>**

改变：

文件 file = new File(dir, tipoImagen+idEquipo+" **.png** ");

**bm.compress(Bitmap.CompressFormat.PNG, 100, fOut);**

**>>>>>>>>>>>>>>>>>>>>>>谢谢！<<<<<<<<<<<<<<<<<>>>>>**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:00:08.730

改变：

文件 file = new File(dir, tipoImagen+idEquipo+".png");

bm.compress(Bitmap.CompressFormat.PNG, 100, fOut);

# json - 杰克逊 JSON 视图被忽略

> ID：12850875
> 
> 赞同：1
> 
> 时间：2012-10-12T01:09:09.390
> 
> 标签：json, spring, spring-mvc, jackson

我正在尝试将 Jackson2.0.0 与 Spring3.1 一起使用，以便可以使用 jackson-Module-Hibernate。我已经按照这里描述的步骤[http://blog.pastelstudios.com/2012/03/12/spring-3-1-hibernate-4-jackson-module-hibernate/](http://blog.pastelstudios.com/2012/03/12/spring-3-1-hibernate-4-jackson-module-hibernate/)。所有这一切似乎都很好，但是当我尝试使用 JSON 视图以便 JSON 仅包含视图中的字段时，它不起作用。

活动视图始终为空。如何使视图处于活动状态？我已经尝试了一天没有运气......任何帮助都将不胜感激。提前致谢。

以下是相关代码。

这是映射器

```
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.datatype.hibernate4.Hibernate4Module;

public class HibernateAwareObjectMapper extends ObjectMapper {

public HibernateAwareObjectMapper() {
    Hibernate4Module hm = new Hibernate4Module();
    registerModule(hm);  
    hm.configure(Hibernate4Module.Feature.FORCE_LAZY_LOADING, true);
} 
```

}

这是视图类

```
public class DiffViews {
 public static class Public { } 
```

}

这是我使用视图的 POJO

```
 @JsonIdentityInfo(generator=ObjectIdGenerators.IntSequenceGenerator.class, property="@id")
 @JsonIgnoreProperties(ignoreUnknown=true)
 @Entity
 public class Premium implements java.io.Serializable {

@JsonView(DiffViews.Public.class)
private String sequence;
@JsonView(DiffViews.Public.class)

@Column(name = "SEQUENCE", nullable = false, length = 4)
public String getSequence() {
    return this.sequence;
}

public void setSequence(String sequence) {
    this.sequence = sequence;
}

@Column(name = "NAME", nullable = false)
public String getName() {
    return this.name;
}

public void setName(String name) {
    this.name = name;
} 
```

)

在我的弹簧控制器中

```
@RequestMapping("/cartonPremium")
public void listAll(
        @RequestParam("page") int page, @RequestParam("rows") int maxResults, 
        @RequestParam("sidx") String sortKey, @RequestParam("sord") String sortOrder, HttpServletResponse response) {

    HibernateAwareObjectMapper mapper = new HibernateAwareObjectMapper();
    mapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS);
    mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);
    mapper.enable(SerializationFeature.WRITE_CHAR_ARRAYS_AS_JSON_ARRAYS);
    mapper.disable(MapperFeature.DEFAULT_VIEW_INCLUSION );

    JqgridResponse<Premium> gridResponse = new JqgridResponse<Premium>();
    gridResponse.setRows(premiumList);
    gridResponse.setRecords(""+premiumList.size());
    gridResponse.setTotal(""+premiumList.size());
    gridResponse.setPage(""+page);      

    try {
        ObjectWriter objWriter= mapper.writerWithView(DiffViews.Public.class);
        Class<?> xxx = mapper.getSerializationConfig().getActiveView();
        objWriter.writeValue(response.getOutputStream(), gridResponse);
        //mapper.writerWithView(DiffViews.Public.class).writeValue(response.getOutputStream(), gridResponse);
    } catch (JsonGenerationException e) {
        e.printStackTrace();
    } catch (JsonMappingException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

我的弹簧配置

```
 <mvc:annotation-driven>
    <mvc:message-converters>    
        <bean class="com.creata.json.MappingJackson2HttpMessageConverter">        
            <property name="objectMapper">            
                <bean class="com.creata.json.HibernateAwareObjectMapper" />        
            </property>    
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:39:41.997

我终于找到了我的错误......我在一个名为 JqgridResponse 的包装器中返回了我的域 POJO，并且我没有在这个包装器类的字段上添加 @JsonView 注释。所以一切都很好，json 视图不会被忽略。

# c#-4.0 - 如何让有符号数值的 DataGridView 列正确排序？

> ID：12850879
> 
> 赞同：0
> 
> 时间：2012-10-12T01:09:32.400
> 
> 标签：c#-4.0

如何获取有符号数值的 DataGridView 列以按有符号值排序？目前 ColumnType 是 DataGridViewTextBoxColumn 并且 ValueType 是 typeof(System.Single)，但排序是绝对值而不是有符号值，例如：

```
-2.728
 3.835
 4.132
-4.511 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:13:39.923

忽略 ValueType 和列类型是什么。

单元格中实际对象的类型是什么（dataGrid[x, y].Value.GetType()）？您可能正在使用 System.String 对象填充网格。如果您使用 System.Single 对象填充网格，它们将被正确排序。

另一种选择是处理[SortCompare](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.sortcompare.aspx)事件。

# linux - 覆盖文件时拒绝 sed 权限

> ID：12850882
> 
> 赞同：16
> 
> 时间：2012-10-12T01:09:47.970
> 
> 标签：linux, sed

我正在尝试使用 sed 覆盖我的 index.php 文件，但出现错误：

```
$ sed -i 's@<head>@<head><script type="text/javascript" src="new.js"></script>@' index.php
sed: couldn't open temporary file ./sedmZNx8T: Permission denied 
```

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-06-09T01:28:57.227

这里真的没有很好的答案。抱歉，如果线程死了，它出现在谷歌搜索中，没有真正回答这个问题。虽然 altendky 的回答和我的有点像......有一个解决方法......找到一个世界可写目录，比如 /tmp

```
cp /etc/file_to_mod /tmp
sed -i -e 's/foo/bar/g' /tmp/file_to_mod
cat /tmp/file_to_mod >/etc_file_to_mod 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-02-17T10:57:39.580

在原地编辑文件时，sed 创建一个临时文件，保存结果，然后最后用临时文件 mv 原始文件。

问题是您在 sed 尝试创建临时文件的目录中没有写权限。

由于文件是/tmp/file，请检查您运行命令的目录的权限。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-12T01:13:14.110

好像您在`/tmp`目录上有权限问题。（如下所述，您在 中运行命令`phpshell`，因此`TMP dir`可以在 以外的其他地方设置`/tmp`）

它应该看起来像：

```
$ ls -ld /tmp
drwxrwxrwx 333 root root 32768 12 oct.  03:13 /tmp/ 
```

**解释**

`sed`使用`-i`flag调用时，在dir`sed`中创建一个临时文件。`/tmp`

* * *

证明`strace`：

```
$ strace -f -e trace=file sed -i 's/a/z/' /tmp/a
execve("/bin/sed", ["sed", "-i", "s/a/z/", "/tmp/a"], [/* 94 vars */]) = 0
access("/etc/ld.so.preload", R_OK)      = -1 ENOENT (No such file or directory)
open("/etc/ld.so.cache", O_RDONLY|O_CLOEXEC) = 3
(...)
open("/tmp/sedPSBTPG", O_RDWR|O_CREAT|O_EXCL, 0600) = 4
rename("/tmp/sedPSBTPG", "/tmp/a")      = 0
+++ exited with 0 +++ 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-14T13:10:20.493

我认为你可以在你的命令前“sudo”。就像 sudo sed -i 's/geteuid/getppid/g' /usr/bin/vlc 它对我有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-14T17:12:12.727

鉴于您没有对`index.php`存储目录的写访问权限，那么通常您将无权访问`index.php`...？假设这是一个“非标准”案例并且您确实具有写访问权限，`sed -i`则尝试在与`index.php`（刚刚检查过的，它是同一个目录，而不是 CWD）相同的目录中创建一个临时文件。`sed`在没有运行的情况下运行并以将结果写入主目录中的文件之`-i`类的方式结束该行。`> ~/sed.out`然后对那个文件做你想做的事。

```
sed 's@<head>@<head><script type="text/javascript" src="new.js"></script>@' index.php > ~/sed.out 
```

请注意，您虽然可以`cp ~/sed.out index.php`，但不能`mv ~/sed.out index.php`。在尝试更改目录（您没有写入权限）时，似乎`cp`会将内容放入`index.php`（不修改您没有写入权限的目录）。`mv`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-01T14:19:15.810

如果使用 sed 不是硬性要求，您可能可以使用高度忽略的命令`ed`。

`ed -s index.php <<< $'%s@<head>@<head><script type="text/javascript" src="new.js"></script>@\nwq'`

*   该`<command> <<< '<my_input_string>'`构造将通过管道将“<my_input_string>”`<command>`作为标准输入
*   该`$'...'`构造将被解析为特殊字符。在这种情况下，`\n`将字符串分成两行
*   您可以在输入中使用您想要生成和管道的任何构造（echo、printf 等）

标准输入字符串：

```
%s@<head>@<head><script type="text/javascript" src="new.js"></script>@
wq 
```

第一行是您的正则表达式搜索和替换为`ed`. 第二行告诉`ed`写入更改并退出。您可以从 vi 中识别这些命令。

来源：[mrbluecoat.blogspot.com/2014/03/in-place-editing-right-way-hint-dont.html](https://mrbluecoat.blogspot.com/2014/03/in-place-editing-right-way-hint-dont.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-28T20:24:37.993

我认为有一个更简单的解决方案。您可以将文件打印到标准输出，然后`sed`在流上使用。之后，您只需将流重定向到同一个文件。显然，这是一个有风险的解决方案，因为如果您不能 100% 确定您知道自己在做什么，您可能会丢失相关文件的全部内容。

```
cat index.php | sed 's@<head>@<head><script type="text/javascript" src="new.js"></script>@' > index.php 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-16T09:38:28.617

检查`/tmp`文件夹权限它应该具有以下权限

```
drwxrwxrwt   7 root root 4.0K Nov 16 15:06 tmp 
```

如果不适合您，请运行以下命令

```
sudo chown root:root /tmp
sudo chmod 1777 /tmp 
```

完成此操作后，`sudo`请`sed`在命令前面添加一个以 root 用户身份执行命令。

这将解决问题

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-29T12:43:49.157

简短的回答：

```
$ chmod +w . 
```

并重新运行`sed`。

长答案：

如前所述，问题来自您没有`.`（您运行的当前目录`sed`）的写权限这一事实。如果您在自己的机器/驱动器上，那么您当然可以授予自己在此目录上写入的权限，这就是在`chmod`这里所做的，除非您出于某种原因想要保护它。但是，如果您在网络驱动器上并且无法更改您对它的权限，那么您应该要求拥有该目录的人来执行此操作，或者使用解决方法解决方案，例如在其他地方复制-修改-粘贴文件。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-12-11T20:11:53.273

您需要对要更改其文件的文件夹具有写入权限。

如此处所述：[https ://stackoverflow.com/a/36404569/5381704](https://stackoverflow.com/a/36404569/5381704)

# php - 使用 PDO 计算每个页面加载的查询数

> ID：12850886
> 
> 赞同：7
> 
> 时间：2012-10-12T01:10:31.543
> 
> 标签：php, mysql, pdo

我特别希望以`PDO`某种方式扩展对象以在每次执行查询时添加一个内部计数器。我想这样做的方式是我不必更改任何现有的查询或添加[像这样建议](https://stackoverflow.com/questions/1290867/count-number-of-mysql-queries-executed-on-page)的额外功能。

我对类或 PDO 类特别不熟悉，但这可以做到吗？我该怎么办？

我正在考虑在每次调用它们时扩展`query`和增加一个存储的变量。`execute`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T01:26:25.753

扩展`PDO`将像任何其他类一样完成。这会满足您的需求吗？`PDO`唯一的其他代码更改是在进行初始连接时必须实例化此类而不是类。

```
class PDOEx extends PDO
{
    private $queryCount = 0;

    public function query($query)
    {
    // Increment the counter.
        ++$this->queryCount;

    // Run the query.
        return parent::query($query);
    }

    public function exec($statement)
    {
    // Increment the counter.
        ++$this->queryCount;

    // Execute the statement.
        return parent::exec($statement);
    }

    public function GetCount()
    {
        return $this->queryCount;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T17:38:43.227

只需执行：

```
SHOW PROFILES; 
```

最伟大`Query ID`的是你所追求的。这还将为您提供有关最近 15 次（默认）查询执行时间的信息。

# ruby - 有没有一种快速的方法可以在 Ruby 中找到缺失的结尾？

> ID：12850887
> 
> 赞同：18
> 
> 时间：2012-10-12T01:10:52.090
> 
> 标签：ruby, syntax

> 语法错误，意外的 $end，预期为 keyword_end

我们都去过！假设更改了足够多的代码，快速浏览`git diff`或类似的东西并不明显，是否有一种简单的方法可以找到缺失`end`的内容（没有切换到像 Python 这样的基于缩进的语言）？

FWIW，我使用 Sublime Text 2 作为我的编辑器。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-12T01:19:07.193

如果您使用的是 Ruby 1.9，请`-w`在运行 ruby​​ 程序时尝试使用该标志。

```
# t.rb
class Example
  def meth1
    if Time.now.hours > 12
      puts "Afternoon"
  end
  def meth2
    # ...
  end
end

ruby t.rb  
=> t.rb:10: syntax error, unexpected $end, expecting keyword_end

ruby -w t.rb
=> t.rb:5: warning: mismatched indentations at 'end' with 'if' at 3
   t.rb:9: warning: mismatched indentations at 'end' with 'def' at 2
   t.rb:10: syntax error, unexpected $end, expecting keyword_end 
```

来源：

[http://pragdave.blogs.pragprog.com/pragdave/2008/12/ruby-19-can-check-your-indentation.html](http://pragdave.blogs.pragprog.com/pragdave/2008/12/ruby-19-can-check-your-indentation.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-03-23T20:30:51.633

自 2020 年 12 月起，还有[dead_end](https://github.com/zombocom/dead_end) gem 可帮助您检测缺失`end`的 s。

最简单的入门方法是安装 gem：

```
gem install dead_end 
```

并直接从控制台运行它，提供要扫描的文件名：

```
dead_end myfile.rb 
```

这将为您提供更有用的错误消息：

```
 43          if (col_idx - 1) % 3 == 0
  50            if !contains?(doc, node)
❯ 51              doc.add_child(node)
❯ 52              tree.
  53            end
  54          end 
```

有关更多选项，请参阅[文档](https://github.com/zombocom/dead_end)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-26T14:11:49.303

如果您使用的是 rails，则可以使用 -w 标志专门运行有问题的文件。

如果您仍然找不到有问题的不匹配，那么我解决此问题的首选方法就是注释掉代码块，直到我可以隔离有问题的区域。

在 OS X 上，您可以使用 command + / 注释掉突出显示的文本。

# java - 二叉树的有序迭代器

> ID：12850889
> 
> 赞同：28
> 
> 时间：2012-10-12T01:11:03.460
> 
> 标签：java, algorithm, iterator, binary-tree, nodes

如何编写一个 Java 迭代器（即需要`next`and方法），它以二叉树的根为根并按**顺序**`hasNext`遍历二叉树的节点？

 *** * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-12T02:33:47.337

子树的第一个元素总是最左边的。元素之后的下一个元素是其右子树的第一个元素。如果元素没有右子元素，则下一个元素是元素的第一个右祖先。如果元素既没有右子元素也没有右祖先，则它是最右边的元素，并且是迭代中的最后一个元素。

我希望我的代码是人类可读的并涵盖所有情况。

```
public class TreeIterator {
    private Node next;

    public TreeIterator(Node root) {
        next = root;
        if(next == null)
            return;

        while (next.left != null)
           next = next.left;
    }

    public boolean hasNext(){
        return next != null;
    }

    public Node next(){
        if(!hasNext()) throw new NoSuchElementException();
        Node r = next;

        // If you can walk right, walk right, then fully left.
        // otherwise, walk up until you come from left.
        if(next.right != null) {
            next = next.right;
            while (next.left != null)
                next = next.left;
            return r;
        }

        while(true) {
            if(next.parent == null) {
                next = null;
                return r;
            }
            if(next.parent.left == next) {
                next = next.parent;
               return r;
            }
            next = next.parent;
        }
     }
 } 
```

考虑以下树：

```
 d
   /   \
  b     f
 / \   / \
a   c e   g 
```

*   第一个元素是“完全离开根”
*   `a`没有右孩子，所以下一个元素是“直到你从左边来”
*   `b`确实有一个正确的孩子，所以 iterate`b`的右子树
*   `c`没有合适的孩子。它的父是`b`，已经被遍历了。下一个父节点是`d`，还没有遍历，所以到此为止。
*   `d`有一个右子树。它最左边的元素是`e`.
*   ...
*   `g`没有右子树，所以往上走。`f`已经被访问过，因为我们来自右边。`d`已被访问。`d`没有父母，所以我们不能更进一步。我们来自最右边的节点，我们已经完成了迭代。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T02:31:34.077

为了获得迭代器的下一个条目“nextEntry()”，我查看了`java.util.TreeMap`下面粘贴的片段。用简单的英语，我会说你首先确保根节点不为空，否则返回空。如果不是，则访问正确的节点（如果它不为空）。然后访问左边（如果不是 null）并在 while 循环中反复访问左边，直到达到 null。如果原始右节点为空，那么如果不为空，则访问父节点。现在进入一个 while 循环，您可以在其中访问父节点，直到它为 null 或者您当前访问的节点的右（子）节点等于您的最后一个位置。现在返回您正在使用的任何条目。如果所有这些选项都失败，则返回（原始）根节点。'HasNext()' 仅检查此“下一个条目”是否

```
public final boolean hasNext() {
     return next != null;
}

final TreeMap.Entry<K,V> nextEntry() {
    TreeMap.Entry<K,V> e = next;
    if (e == null || e.key == fenceKey)
        throw new NoSuchElementException();
    if (m.modCount != expectedModCount)
        throw new ConcurrentModificationException();
    next = successor(e);
    lastReturned = e;
    return e;
}

static <K,V> TreeMap.Entry<K,V> successor(Entry<K,V> t) {
    if (t == null)
        return null;
    else if (t.right != null) {
        Entry<K,V> p = t.right;
        while (p.left != null)
            p = p.left;
        return p;
    } else {
        Entry<K,V> p = t.parent;
        Entry<K,V> ch = t;
        while (p != null && ch == p.right) {
            ch = p;
            p = p.parent;
        }
        return p;
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-12T01:14:53.097

这很简单，对于按顺序遍历，如果有左孩子，则访问左孩子，然后是根节点，然后是右孩子：

```
visit_node(node)
   if node.left: visit_node(node.left)
   // visit the root node
   if node.right: visit_node(node.right) 
```

图表：

```
 a 
   /   \        (in-order traversal would give bac)
  b     c 
```**

# mysql - order by number of commas

> ID：12850893
> 
> 赞同：1
> 
> 时间：2012-10-12T01:11:52.657
> 
> 标签：mysql

I am trying to order results from a select statement by the number of commas existing in one of the column.

is there a way to exclusively order by commas in mysql.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:21:59.360

You can order your results by the number of comma's in a specific field with a query like the following:

```
select * from table order by length(areaCodeField)-length(replace(areaCodeField, ",", ""))) desc 
```

The **order by** piece of the query will count all of the characters in the field and then subtract all of the characters not counting the commas. This leaves you with the number of commas.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:26:11.287

You could use a simple workaround (that may be not very efficient):

```
ORDER BY
    LENGTH(column) - LENGTH(REPLACE(column, ',', '')) asc 
```

I don't know whether other solutions exist, sorry.

# iphone - iPhone OpenGL ES1 VBO 纹理坐标问题

> ID：12850894
> 
> 赞同：0
> 
> 时间：2012-10-12T01:11:58.357
> 
> 标签：iphone, opengl-es, vbo, texture-mapping

我将我的代码切换为使用 VBO，突然我的精灵（2 个三角形三角形条）的纹理坐标不好。

禁用 VBO 会使问题消失。

注意 - 我将我的顶点和纹理坐标数据对齐到此链接中指定的 4 个字节： [https ://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html](https://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html)

这是顶点数据的打印输出，它是：x, y, z, 0.0f, tu, tv, 0.0f, 0.0f

```
 Vertex 0 -0.500000 0.500000 0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 
    Vertex 1 -0.500000 -0.500000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 
    Vertex 2 0.500000 0.500000 0.000000 0.000000 1.000000 1.000000 0.000000 0.000000 
    Vertex 3 0.500000 -0.500000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 
```

这就是我生成 VBO 的方式：

```
m_numVertices = 4
m_stride = 8

glGenBuffers( 1, &m_vboVertices); // Generate our Vertex Buffer Object
glBindBuffer( GL_ARRAY_BUFFER, m_vboVertices); // Bind our Vertex Buffer Object
glBufferData( GL_ARRAY_BUFFER, (m_numVertices * m_stride) * sizeof(float), m_pVertexData, GL_STATIC_DRAW); // Set the size and data of our VBO and set it to STATIC_DRAW
glBindBuffer( GL_ARRAY_BUFFER, 0 );

glGenBuffers( 1, &m_vboIndices );
glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, m_vboIndices );
glBufferData( GL_ELEMENT_ARRAY_BUFFER, sizeof(GLubyte)*4, m_pIndices, GL_STATIC_DRAW );
glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, 0 ); 
```

这就是我渲染精灵的方式：

```
glBindBuffer(GL_ARRAY_BUFFER, m_vboVertices);
glVertexPointer( 3, GL_FLOAT, byteStride, BUFFER_OFFSET(0) );
glTexCoordPointer( 2, GL_FLOAT, byteStride, BUFFER_OFFSET(4) );
glBindBuffer(GL_ARRAY_BUFFER,0); // reset

glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, m_vboIndices );
glDrawElements(GL_TRIANGLE_STRIP, m_numVertices, GL_UNSIGNED_BYTE, BUFFER_OFFSET(0));
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,0); // reset 
```

BUFFER_OFFSET 定义为：

```
#define BUFFER_OFFSET(i) ((char *)NULL + (i)) 
```

使用 VBO：![http://i.imgur.com/zQ4GA.png](../Images/8634e04084b583b2e748c05709aadbe6.png)

没有 VBO：![http://i.imgur.com/ByRVz.png](../Images/a2826bac6d759ad46dee7d7822dd0a9f.png)

谢谢。

编辑 - 在对代码进行了一些处理之后，使用 GL_TRIANGLES 进行绘图时似乎也会出现此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T06:02:21.787

看来问题是我没有以字节为单位计算 glTexCoordPointer 偏移量。它应该是：

```
glTexCoordPointer( 2, GL_FLOAT, byteStride, (char*)NULL + (4*sizeof(float)) ); 
```

宏 BUFFER_OFFSET 不正确。

应用此修复程序解决了问题。

# android - android Mediaplayer中暂停方法的空指针异常

> ID：12850898
> 
> 赞同：0
> 
> 时间：2012-10-12T01:12:23.207
> 
> 标签：android, nullpointerexception, media-player, onclicklistener, null-pointer

我不断收到 MediaPlayer 方法的空指针异常。我终于能够通过将播放和初始化播放函数的代码移动到一个单独的方法中并从 onClick 侦听器内部调用该方法来使播放函数工作。

但是，应用程序暂停功能仍然出现空指针异常。我正在使用媒体播放器的暂停方法。如何暂停工作？我认为问题出在我的代码结构及其组织方式的某个地方。

我尝试将媒体播放器的初始化移动到代码中的不同位置。而且似乎没有任何效果。有任何想法吗？

```
// onclick listener for the playing the selected song
playB.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        playSong();
    }
});

// onclick listener for pausing the song that is playing
pauseB.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        pauseSong();
    }
});

// method to pause song
public void pauseSong(){
    player.pause();
    length = player.getCurrentPosition();
}

// method to play song and initialize the MediaPlayer class with one file
// from the drawable folder, need to initialize with something or it will be null
// for that i decided to use an mp3 in R.raw folder
public void  playSong(){
    // Play song
    MediaPlayer player = MediaPlayer.create(this, R.raw.g2);
    player.reset();
    try {
        player.setDataSource(selectedAudioPath);

        player.prepare();
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    player.seekTo(length);
    player.start();
} // play method 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:19:24.290

您必须创建一个 MediaPlayer 播放器全局变量。pauseSong() 方法看不到播放器，因此您有 nullPointerException。在你的主类中创建一个 MediaPlayer 播放器，然后在 onPlaySong() 中初始化它，如下所示：

```
player = MediaPlayer.create(this, R.raw.g2); 
```

# c++ - 当有许多项目相互依赖时，Visual C++ 中的文件夹结构

> ID：12850899
> 
> 赞同：1
> 
> 时间：2012-10-12T01:12:25.533
> 
> 标签：c++, visual-studio, include-path, directory-structure

假设我有一个包含 10 个项目（命名为 proj1 到 proj10）的 sln，proj1 是生成 EXE 文件的默认项目。

我的问题是：如何放置“包含”文件夹？我的意思是如果proj2使用proj3（包括它的头文件并链接它的lib文件），如何放置'include'文件夹？

有两种方法：

1.  将所有头文件和 lib 文件放在项目同一级别的不同根文件夹中

2.  让每个项目都自动关闭，其他想要使用这个项目的项目应该注意包含路径和链接路径。当然我们应该给每个项目的布局一个规则（例如每个项目必须在根文件夹中有一个“包含”文件夹和“lib”文件夹）

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:43:54.540

对于 Visual Studio，我不喜欢您建议的两种方法中的任何一种，尽管我的方法与您的选项 #2 最密切相关。我喜欢的组织方式是这样的：

```
<SolutionRoot>
  <Project1>
     project1.vcxproj
     someheader.h
     somesource.cpp
  <Project2>
  <Project3>
  <Project4>
  <Project5>
  application.sln 
```

如果这不明显，那是一个准目录列表，显示了一些项目文件夹和基本解决方案文件。

所有新项目都只是使用 Visual Studio 的默认设置添加到解决方案中。试图违背这一点并使项目像 Linux 项目（`lib`,`include`等）一样工作最终`src` *只会*让你感到悲伤，所以不要这样做。

现在，我将每个项目的“附加包含”路径设置为`$(SolutionDir)`. 然后，如果我想包含 Project1 中的内容：

```
#include "Project1/someheader.h" 
```

这样做的好处是您不会弄乱您的“附加包含”，因此很容易一目了然地看到项目具有哪些*外部*包含。

至于链接到 lib 文件，为什么不利用 Visual Studio 的项目引用功能。老实说，你的生活会更轻松。只需将其连接起来，以便 Project2 引用 Project1*等*……然后您不必担心库和链接器路径。您只对解决方案树之外的工具包执行此操作（*例如*，**libpng**或**openssl**等发行版）。

同样，您释放了该设置，因此它仅显示解决方案之外的链接。另一个优点是，如果您使用引用，您的构建顺序是隐式定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:34:51.253

我会选择第一个解决方案。它使项目设置变得简单。作为我们从事的 C++ 项目，我们总是将头文件放在一起。

# python - 优先级队列和可变性

> ID：12850903
> 
> 赞同：0
> 
> 时间：2012-10-12T01:13:01.897
> 
> 标签：python, dictionary, tuples, priority-queue, mutable

```
>>> import Queue
>>> q = Queue.PriorityQueue()
>>> a = (1, {'item': 'value'})
>>> q.put(a)
>>> q.queue
[(1, {'item': 'value'})]
>>> a[1]['count'] = 1
>>> q.queue
[(1, {'count': 1, 'item': 'value'})]
>>> q.get()
(1, {'count': 1, 'item': 'value'}) 
```

为什么添加后更改'a'的值时队列中的值会更改？元组本身是不可变的，但里面的字典是可变的。但我不明白为什么要更改队列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:22:53.843

在 Python 中，对象是通过引用传递的。有些对象可能看起来是作为值传递的（例如字符串和整数），但那是因为这些对象是不可变的（例如，您不能更改整数对象的值`1`）。

因此，当您将字典放入队列时，将弹出另一端的实际字典而不是副本。

如果你想要一个副本，你可以使用字典的`copy()`方法，但请注意，它只会给你一个字典的浅副本：副本中的键和值将是相同的对象，它们本身可能是可变的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-12T13:03:24.250

在 Python 中，对象既不是“按引用”传递，也不是“按值”传递。

在您的示例中，名称`a`绑定到 object `(1, {'item': 'value'})`。

该名称`q`绑定到队列对象。

当`q.put(a)`被调用时，名称`a`绑定的对象被“放入”了名称`q`绑定的对象，从而名称`a`和`q[0]`引用同一个对象。因此，当您修改该对象时，您正在修改 BOTH`a`和`q[0]`绑定到的对象（因为它们绑定到同一个对象）。

其次，虽然元组是不可变的，但这并不意味着它不能改变。虽然作为一个“容器”，它是不可变的，自身不能改变，但它可以包含可变对象，因此它的内容可以改变。

此处非常有用且清晰的文章： [https ://jeffknupp.com/blog/2012/11/13/is-python-callbyvalue-or-callbyreference-neither/](https://jeffknupp.com/blog/2012/11/13/is-python-callbyvalue-or-callbyreference-neither/)

# django - 在 Django 表单集中使用 extra 和 max_num

> ID：12850904
> 
> 赞同：1
> 
> 时间：2012-10-12T01:13:02.100
> 
> 标签：django

我有一个没有与之关联的模型的表单集，一旦所有现有表单都有效，我希望能够向表单集添加一个表单，因此阅读文档时，我发现：“如果 max_num 的值大于数字现有对象，最多额外的额外空白表单将添加到表单集中，只要表单总数不超过 max_num。”（https://docs.djangoproject.com/en/dev/topics/forms/表单集/#limiting-the-maximum-number-of-forms）：

所以我这样做了：

```
FormSet = formset_factory(SomeForm, extra=2, max_num=10)
    if request.method == 'POST':
        formset = FormSet(data=request.POST)
    else:
        formset = FormSet() 
```

和这个：

```
<form action="" method="POST">
{{ formset }}
<input type="submit" value="Next" />
</form> 
```

期望看到 2 个空表格，如果我填写一个（或 2 个）表格并按“下一步”，我会在其中获得额外的表格。但是，即使我有 1 或 2 个有效表单，模板中也只会显示 2 个表单。

这应该如何工作？我是否误解了文档？我的代码错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:35:45.123

我找到了我的问题的部分答案：我让它工作了，但我发现解决方案不是很像 Django。我希望这些事情会自动发生，没有下面的麻烦。

无论如何，我因此改变了看法：

```
if request.method == 'POST':
    formset = FormSet(data=request.POST)
    if formset.is_valid():
        clean_data = formset.cleaned_data
        if not any(not(len(f)) for f in clean_data):
            formset = FormSet(initial=clean_data)
else:
    formset = FormSet() 
```

因此，我使用 POST 数据中的 clean_data 重新实例化了表单集，并添加了一些内容以防止在仍有空表单时按“下一步”弹出额外的表单。

它有效，但我真的不认为这应该是这样做的方法。

# php - 如何将 Oracle 时间戳对象转换为 php 日期？

> ID：12850905
> 
> 赞同：4
> 
> 时间：2012-10-12T01:13:08.357
> 
> 标签：php, oracle, date

日期数据是这样的

```
09-OCT-12 03.19.59.000000000 PM 
```

它来自一个对象：

```
$objectvar->datedata; 
```

我试过这个

```
$date = new DateTime($objectvar->datedata);
echo $date->format('M d,Y'); 
```

它不起作用，它不显示来自对象的正确数据；

我也试过这个

```
echo date('M d,Y',strtotime($objectvar->datedata)); 
```

它也不起作用，就像它没有显示来自对象的正确数据；

我该怎么做才能正确转换日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T01:27:12.553

我找到了正确的答案

```
$date = DateTime::createFromFormat($objectvar->date);
$converteddate = $date->format('M d,Y');
echo $converteddate; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-08T17:23:58.083

这个答案应该在这里：

```
$dt = DateTime::createFromFormat("d#M#y H#i#s*A", $objectvar->datedata); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T01:42:23.093

可能有一种本地方法可以做到这一点，但也许您可以同时使用此方法：

```
list($day,$month,$year) = sscanf($objectvar->datedata,"%d-%s%-%d"); 
```

现在你可以用它来创建你的日期格式

```
echo date("M d, Y",strtotime("$year-$month-$day")); 
```

# javascript - 如何保持 javascript window.open 变量引用

> ID：12850906
> 
> 赞同：0
> 
> 时间：2012-10-12T01:13:09.787
> 
> 标签：javascript

我有一个要求，我需要创建一个链接以在新窗口中打开表单，然后当我单击相同的链接时，它将再次关注现有窗口。

这适用于以下代码

```
<input type="button" value="Click" onclick = "return OpenWindow();"/>

<script>
var win = null;
function OpenWindow()
{
   if (win == null || win.closed)
   {
      win = window.open('http://localhost/Conditions.aspx', 'Condition');
   }
   win.focus();
   return false;
}
</script> 
```

但是，当我切换到不同的页面并返回具有链接的页面时，我遇到了一个问题。该变量`win`不会保留以前的引用。如果我再次单击该链接，它将刷新现有窗口（这不是我想要的！）然后专注于它。

有什么方法可以保留变量引用吗？或者有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:46:04.920

Chia，您的问题是 JS 不会跨页面持续存在。HTML 是无状态的，因此在您转到 page-2 和 page-3 之后，位于顶部的 JS 还需要“忘记”它在 page-1 上所做的事情。

有一些方法可以存储字符串和数字，并在其他页面上检索它们，但这不是您想要的。

为此，您目前的设置无能为力。

有不同的方法可以让您保留子引用（在主页的 iFrame 内进行主页导航......如果你真的，真的必须......或者页面中的 AJAX 更改，对于有能力的人浏览器，并为 JS 引擎较差的浏览器使用老式导航）。

但是您不可能打开window2，单击将window1 指向page3 的链接，并且仍然让page3 具有对window2 的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T22:41:54.483

我有同样的问题，[只有在窗口未打开时才在 Window.open上解决](https://stackoverflow.com/questions/13411960/window-open-only-if-the-window-is-not-open)

如果您基本上希望在单击链接时窗口聚焦而不是刷新，即使父窗口已关闭、重新打开或更改，这也可以解决问题。

我正要求助于使用cookies。

# python - 如何根据两列删除csv文件中的重复项？

> ID：12850909
> 
> 赞同：12
> 
> 时间：2012-10-12T01:13:20.677
> 
> 标签：python

我有一个这样的 csv 文件：

```
column1    column2

john       kerry
adam       stephenson
ashley     hudson
john       kerry
etc.. 
```

我想从此文件中删除重复项，仅获取：

```
column1    column2

john       kerry
adam       stephenson
ashley     hudson 
```

我编写了这个脚本，它根据姓氏删除重复项，但我需要根据姓氏和名字删除重复项。

```
import csv

reader=csv.reader(open('myfilewithduplicates.csv', 'r'), delimiter=',')
writer=csv.writer(open('myfilewithoutduplicates.csv', 'w'), delimiter=',')

lastnames = set()
for row in reader:
    if row[1] not in lastnames:
        writer.writerow(row)
        lastnames.add( row[1] ) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-12T01:50:03.410

你真的很亲近。使用这些列作为集合条目

```
entries = set()

for row in reader:
   key = (row[0], row[1]) # instead of just the last name

   if key not in entries:
      writer.writerow(row)
      entries.add(key) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-13T02:29:25.773

您现在可以在 pandas 中使用 .drop_duplicates 方法。我会做以下事情：

```
import pandas as pd
toclean = pd.read_csv('myfilewithduplicates.csv')
deduped = toclean.drop_duplicates([col1,col2])
deduped.to_csv('myfilewithoutduplicates.csv') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T01:36:16.997

一种快速的方法是使用以下技术创建一组唯一的行（从本文中的@CedricJulien 采用[）](https://stackoverflow.com/questions/7090758/python-remove-duplicate-dictionaries-from-a-list)。您失去了`DictWriter`将列名存储在每一行中的好处，但它应该适用于您的情况：

```
>>> import csv
>>> with open('testcsv1.csv', 'r') as f:
...   reader = csv.reader(f)
...   uniq = [list(tup) for tup in set([tuple(row) for row in reader])]
...
>>> with open('nodupes.csv', 'w') as f:
...   writer=csv.writer(f)
...   for row in uniq:
...     writer.writerow(row) 
```

这使用了@CedricJulien 使用的相同技术，这是一个很好的单行删除重复行（定义为相同的名字和姓氏）。这使用`DictReader`/`DictWriter`类：

```
>>> import csv
>>> with open('testcsv1.csv', 'r') as f:
...   reader = csv.DictReader(f)
...   rows = [row for row in reader]
...
>>> uniq = [dict(tup) for tup in set(tuple(person.items()) for person in rows)]
>>> with open('nodupes.csv', 'w') as f:
...   headers = ['column1', 'column2']
...   writer = csv.DictWriter(f, fieldnames=headers)
...   writer.writerow(dict((h, h) for h in headers))

...   for row in uniq:
...     writer.writerow(row)
... 
```

# php - cakephp：有没有办法从 $this->Session->read('Auth'); 获取关系？

> ID：12850910
> 
> 赞同：0
> 
> 时间：2012-10-12T01:13:28.357
> 
> 标签：php, mysql, cakephp

```
$user = $this->Session->read('Auth'); 
```

产生以下数组：

```
array(
    'User' => array(
        'id' => '2',
        'email' => 'info@trinoweb.com',
        'username' => 'trino',
        'created' => '2012-10-11 12:41:52',
        'modified' => '2012-10-11 12:41:52',
        'last_online' => null,
        'main_image' => null,
        'address' => null
    )
) 
```

我希望它产生相同的东西，但所有的连接/关系......就像这样......

```
array(
    'User' => array(
        'password' => '*****',
        'id' => '128',
        'email' => '12312@asdas.com',
        'username' => 'teresa',
        'created' => '2012-10-11 12:41:52',
        'modified' => '2012-10-11 12:41:52',
        'last_online' => null,
        'main_image' => null,
        'address' => null
    ),
    'Inbox' => array(),
    'Sender' => array(),
    'Upload' => array()
) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:46:54.767

不，除非您在填充 Auth 密钥时将其写入其中。这是一个会话变量，而不是模型上的动态查找。

您将需要基本上修改登录方法以查找这些关系并随后填充会话数据。

请记住，这将是静态数据。如果您更改关系，则不会反映在此数组中。发生这种情况时，您将需要更新此数组，然后它会变得一团糟。

# c - 性能下降

> ID：12850912
> 
> 赞同：0
> 
> 时间：2012-10-12T01:14:07.783
> 
> 标签：c, performance

谁能帮我这个？

```
void _vect_mat(float *vect,float **mat){
  float temp[4];

  temp[0] = vect[0];
  temp[1] = vect[1];
  temp[2] = vect[2];
  temp[3] = vect[3];

  vect[0] = (temp[0] * mat[0][0]) + (temp[1] * mat[1][0]) + (temp[2] * mat[2][0]) + (temp[3] * mat[3][0]);
  vect[1] = (temp[0] * mat[0][1]) + (temp[1] * mat[1][1]) + (temp[2] * mat[2][1]) + (temp[3] * mat[3][1]);
  vect[2] = (temp[0] * mat[0][2]) + (temp[1] * mat[1][2]) + (temp[2] * mat[2][2]) + (temp[3] * mat[3][2]);
  vect[3] = (temp[0] * mat[0][3]) + (temp[1] * mat[1][3]) + (temp[2] * mat[2][3]) + (temp[3] * mat[3][3]);
}

int main(){
  int i,j,k;

  float *vect,**mat;

  vect =  (float *)malloc(4 * sizeof(float));
  mat  = (float **)malloc(4 * sizeof(float *);
  for(i=0;i<4;i++)mat[i] = (float *)malloc(4 * sizeof(float));

  vect[0] = 1.0;
  vect[n] = ......etc.

  mat[0][0] = 1.0;
  mat[n][m] ......etc.     

  while (1){
    for(i = 0;i < 5;i++){
      for(j = 0;j< 6;j++){
        for(k = 0;k < 3600;k++)_vect_mat(vect,mat); 
      }
    }
  }
} 
```

`_vect_mat`当我在循环内调用函数时，所有性能都会下降。这是正常的？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:06:43.907

你说的一个问题`float **mat`。这意味着获取类似的元素`mat[1][2]`是一个两步过程。首先它必须`mat[1]`作为指针获取，然后它必须从中获取元素`[2]`。

相反，如果您声明`float mat[16]`, 并直接对其进行索引，例如`mat[1 + 2*4]`，这些元素的获取可能会快两倍。

# spring - 使用 GlassFish 3.1 扩展 SpringBeanAutowiringSupport

> ID：12850913
> 
> 赞同：1
> 
> 时间：2012-10-12T01:14:20.813
> 
> 标签：spring, jax-ws, glassfish-3

我试图通过扩展 SpringBeanAutowiringSupport 来公开我的 Web 服务。我正在使用 GlassFish 3.1 和 Spring 3.0.5.RELEASE。

我在[这里](http://www.javacodegeeks.com/2010/11/jaxws-with-spring-and-maven-tutorial.html)学习教程。

但是，**当我转到我的 Web 服务的 URL 时，我得到了 ClassCastException。**

关于我缺少什么或做错了什么的任何想法？

```
WARNING: StandardWrapperValve[GreetingService]: PWC1382: Allocate exception for servlet GreetingService
java.lang.ClassCastException: com.service.GreetingServiceEndpoint cannot be cast to javax.servlet.Servlet
    at com.sun.enterprise.web.WebContainer.createServletInstance(WebContainer.java:702)
    at com.sun.enterprise.web.WebModule.createServletInstance(WebModule.java:1958)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1263)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:1070)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:189)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:326)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:227)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:170)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:680) 
```

## 端点

```
@WebService (serviceName="GreetingService")
public class GreetingServiceEndpoint extends SpringBeanAutowiringSupport {
    @Autowired
    private GreetingService greetingService;

    @WebMethod
    public String sayHello () {
        return greetingService.sayHello();
    }
} 
```

## 服务

```
@Service ("greetingService")
public class GreetingService {
    public String sayHello () {
        return "Hello from Greeting Service";
    }
} 
```

## web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0" metadata-complete="true">  

    <display-name>Archetype Created Web Application</display-name>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>

  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
    <servlet-name>GreetingService</servlet-name>
    <servlet-class>com.service.GreetingServiceEndpoint</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>GreetingService</servlet-name>
    <url-pattern>/GreetingService</url-pattern>
  </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:16:55.117

你的类：`com.service.GreetingServiceEndpoint`不是`javax.servlet.Servlet`. 您不能将其`web.xml`作为 servlet 放入。要运行`JAX-WS`Web 服务，`JAX-WS`必须在 web.xml 中声明 servlet：`com.sun.xml.ws.transport.http.servlet.WSServlet`该 servlet 将为您的 Web 服务提供请求。

完整的 servlet 声明应如下所示：

```
<servlet>
    <servlet-name>Greeting</servlet-name>
    <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Greeting</servlet-name>
    <url-pattern>/services/Greeting</url-pattern>
</servlet-mapping> 
```

您的`com.service.GreetingServiceEndpoint`类应该在`sun-jaxws.xml`文件中定义，如下所示：

```
<endpoints xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime" version="2.0">
    <endpoint name="Greeting" implementation="com.service.GreetingServiceEndpoint" url-pattern="/services/Greeting"/>
</endpoints> 
```

必须将此文件添加到`WEB-INF`您的 Web 应用程序中。看看我的帖子[在这里](https://stackoverflow.com/questions/10462340/exposing-jax-ws-web-service-as-spring-bean/10462359#10462359)。应该会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:57:29.027

无需在;中注册`com.service.GreetingServiceEndpoint`为 Servlet `web.xml`因为它没有扩展 HttpServlet。

# jquery - fancybox.open() 在 IE 中不起作用

> ID：12850917
> 
> 赞同：0
> 
> 时间：2012-10-12T01:14:37.693
> 
> 标签：jquery, ajax, fancybox

此代码在 FF 中有效，但在 IE 中无效，没有任何内容的弹出式幻想框，怀疑内容：$response.html() 在 IE 中无效

请帮忙！

```
$.ajax({
    type: 'POST',
    url: 'loginSelectAccount',
    data:{clientId:$username, password:$password, activationCode:$activationCode},
    dataType: 'html', 
    success: function (data) {
                 var $response = $(data);
                 var $retval = $response.find('#multiRecord').attr('value');

                 if ($retval == 'false'){
                     $.fancybox.close(true);
                     $("#logFormid").submit();
                  } else if($retval == 'true'){
                      $response.find('#username').attr('value',$username);
                      $response.find('#password').attr('value',$password);
                      $response.find('#activationCode').attr('value',$activationCode);
                      $response.find('#pageTryLogin').attr('value',$pageTryLogin);
                      $.fancybox.open({
                          content : $response.html(),
                          afterClose : function() {
                              $("#select_login").show();
                         }
                      });
                  }
             }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:39:45.553

尝试将 $response.html() 作为参数发送之前将其放入变量中...

# c# - 在 c# 中使用正则表达式的字符串中的特定值

> ID：12850919
> 
> 赞同：1
> 
> 时间：2012-10-12T01:14:40.123
> 
> 标签：c#, regex, pattern-matching

我需要从给定的字符串中提取 $value 。

```
string text = "<h2 class="knownclass unknownclass1 unknownclass2" title="Example title>$Value </h2>" 
```

使用代码-：

```
Match m2 = Regex.Match(text, @"<h2 class=""knownclass(.*)</h2>", RegexOptions.IgnoreCase); 
```

它让我获得了完整的价值 -: unknownclass1 unknownclass2" title="Example title>$Value 。但我只需要 $value 部分。请告诉我。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:24:25.333

假设字符串始终遵循这种格式，请考虑以下代码：

```
var index = text.IndexOf(">");
text.Substring(index + 1, text.IndexOf("<", index)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:18:39.123

正如多次所说，使用正则表达式解析 HTML 或 XML 是不好的。忽略这一点，你捕捉的太多了。这是一个应该工作的替代正则表达式。

```
@"<h2 class=""knownclass[^""]*"">(.*)</h2>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T12:59:56.040

如果你的字符串总是相同的模式，你可以考虑这个：

```
string text = "<h2 class=\"knownclass unknownclass1 unknownclass2\" title=\"Example title>$Value </h2>";
string result = "";

Regex test = new Regex(@"\<.*?\>(.*?)\</h2\>");
MatchCollection matchlist = test.Matches(text);

if (matchlist.Count > 0)
{
    for (int i = 0; i < matchlist.Count; i++)
    {
        result = matchlist[i].Groups[1].ToString();
    }
} 
```

但如果您使用 XML 文件或 HTML 文件，我建议您使用 XmlTextReader for XML 和 HtmlAgilityPack for HTML

[http://msdn.microsoft.com/en-us/library/system.xml.xmltextreader.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmltextreader.aspx)

[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

希望能帮助到你！

# python - 在 scipy 中选择积分变量

> ID：12850920
> 
> 赞同：2
> 
> 时间：2012-10-12T01:14:49.700
> 
> 标签：python, scipy, integrate

当我将它与 scipy.integral.quadrature 集成时，我想选择哪个变量将成为函数中的集成变量。例如

```
def f(x,a,b):
   return a*x+b

print scipy.integrate.quadrature(f,0,3,args=(2,3)) 
```

这段代码运行良好，结果应该是 17.9999999999。如果我希望 b 成为我的积分变量而不是 x，我应该在方括号中写什么？我也可以在 args 中按名称设置值，例如 a=2 b=3？我想在具有更多参数的函数中应用求积，并且我不希望用户记住参数队列，只需设置积分变量并将值赋予其他参数，这些参数只是名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:53:44.313

第一个变量是被积分的变量，因此要在 b 上积分，例如将函数定义为 f(b,a,x)。

args 传递一个元组，因此必须对其进行排序。如果您不希望用户必须使用 order，则只需将该函数包装在另一个函数中，该函数包装了 integration.quadrature 部分并将 a 和 b 作为参数（无序），然后您可以只使用 args(a, b) 你的问题就解决了。

# c++ - 将向量的元素添加到无序集合

> ID：12850927
> 
> 赞同：39
> 
> 时间：2012-10-12T01:17:01.757
> 
> 标签：c++, vector, unordered-set

有没有一种简单的方法可以将 a 的所有元素添加`vector`到 a `unordered_set`？它们属于同一类型。现在，我正在使用 for 循环，想知道是否有更好的方法来做到这一点

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-12T01:28:15.443

如果您正在构建 unordered_set 则：

```
std::vector<int> v;
std::unordered_set<int> s(v.begin(), v.end()); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-12T01:21:36.020

如果我的语法有任何小错误，请原谅我，但您可以尝试[std::copy 函数](http://www.cplusplus.com/reference/algorithm/copy/)，它就是为此目的。

```
std::vector<int> v;
std::unordered_set<int> s;
std::copy(v.begin(),v.end(),std::inserter(s,s.end())); 
```

# json - 谷歌图表 json 日期格式

> ID：12850931
> 
> 赞同：5
> 
> 时间：2012-10-12T01:17:30.110
> 
> 标签：json, google-visualization

我正在使用 Google Charts 并尝试生成自己的 JSON 格式来呈现图表，而不是使用库。一切都很好，除了试图弄清楚如何在 json 中表示谷歌图表可以理解的日期格式......

规范：JSON 不支持 JavaScript 日期值（例如，“new Date(2008,1,28,0,31,26)”；API 实现支持。但是，API 现在支持自定义的有效 JSON 日期表示作为以下格式的字符串： Date(year, month, day[,hour, minute, second[, millisecond]]) 其中 day 之后的所有内容都是可选的，而月份是从零开始的。

参考： [https ://developers.google.com/chart/interactive/docs/dev/implementing_data_source#jsondatatable](https://developers.google.com/chart/interactive/docs/dev/implementing_data_source#jsondatatable)

阅读上述规范似乎表明将 json 中的日期格式表示为 Date(year, date, month) 会起作用，但这似乎对我不起作用。

错误：

```
Uncaught Error: Type mismatch. Value Date(2012, 10, 3) does not match type date in column index 0 
```

json响应：

```
{"type":"ComboChart","cols":[["date","Date"],["number","Overall"],["number","Current"],["number","Rating Count"]],"rows":[["Date(2012, 10, 3)",4.0,4.0,69],["Date(2012, 10, 4)",4.0,4.0,69]],"options":{"title":"Rating for FI","chartArea":{"width":"90%","height":"75%"},"hAxis":{"title":"Date"},"legend":"top","curveType":"none","pointSize":8,"seriesType":"bars","series":{"0":{"type":"bars","targetAxisIndex":0},"2":{"type":"line","targetAxisIndex":1}},"vAxes":{"0":{"title":"Rating","minValue":0,"maxValue":5},"1":{"title":"Rating Count"}}}} 
```

没有什么能引起我的注意，因为这应该遵循规范所需的格式。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:02:10.403

你的语法是错误的，我认为......你应该尝试这样的事情：

```
{"type":"ComboChart","cols":[["date","Date"],["number","Overall"],["number","Current"],["number","Rating Count"]],"rows":[["Date(2012, 10, 3)"]],["Date(2012, 10, 4)"]],"options":{"title":"Rating for FI","chartArea":{"width":"90%","height":"75%"},"hAxis":{"title":"Date"},"legend":"top","curveType":"none","pointSize":8,"seriesType":"bars","series":{"0":{"type":"bars","targetAxisIndex":0},"2":{"type":"line","targetAxisIndex":1}},"vAxes":{"0":{"title":"Rating","minValue":0,"maxValue":5},"1":{"title":"Rating Count"}}}} 
```

对我来说，这段代码有效：

```
{"c":[{"v":"Date(2012,11)"},{"v":6657}..... 
```

但这是更改月份，而不是日期并使用 json....

# javascript - 这个数字像参数一样附加到脚本 url 是什么？

> ID：12850935
> 
> 赞同：1
> 
> 时间：2012-10-12T01:17:43.930
> 
> 标签：javascript, parameters, src

我正在查看页面的来源，我看到了这个：

```
<script type="text/javascript" src="tsp.js?1347090849"></script> 
```

附加到 src 的这个数字是什么？1347090849

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T01:18:40.697

您可以这样做以防止浏览器加载文件的缓存版本。

对于浏览器来说，这看起来与上次加载时的文件不同。每次页面加载时，数字应该不同，所以浏览器会再次向服务器请求，而不是从缓存中加载。

数字不必每次都不同。您可以在更新文件时更改它，以便客户端可以加载缓存的版本，直到您更新它，之后，因为它有不同的编号，他们将请求新版本并缓存它。

相关：[如何将时间戳附加到标记 url 中的 java 脚本文件以避免缓存](https://stackoverflow.com/questions/11467873/how-to-append-timestamp-to-the-java-script-file-in-script-tag-url-to-avoid-cac)向您*展示了如何*动态地对脚本执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T01:18:20.623

该数字仅用于强制对正在请求的脚本进行缓存刷新。由于不同的查询字符串可能导致不同的页面内容，浏览器必须假定每个不同的查询字符串都是一个全新的页面。

开发人员可以通过附加时间戳或随机数作为查询字符串来强制页面重新请求脚本来利用这一点。

```
filename.js?0 <-- browser requests this one and caches it
filename.js?1 <-- browser must request this one because it might be different 
```

如果将其视为时间戳，则您特别发布的数字 ( `1347090849`) 将计算为。`Sat, 08 Sep 2012 07:54:09 GMT`我猜那是最后一次更改文件的日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T01:19:26.427

它只是一个标识符，以确保客户端每次更改数字时都能获取更新的脚本文件。

# sql - 两个查询的完全联接

> ID：12850937
> 
> 赞同：2
> 
> 时间：2012-10-12T01:18:18.703
> 
> 标签：sql, sql-server-2008

我正在尝试对两个 SQL 查询进行完全联接，如下所示：

**第一个查询：**

```
SELECT
    ID
    ,SUM(CASE WHEN reason = 4 THEN 0 ELSE quantity*price END) AS TValue
    ,COUNT(*) AS CountAll
FROM table1
WHERE Date>=@StartDate AND Date<=@EndDate
GROUP BY ID 
```

**第二个查询：**

```
SELECT
    ID
    ,SUM(CASE WHEN reason = 1 THEN 1 ELSE 0 END) AS New
    ,SUM(CASE WHEN reason = 6 THEN 1 ELSE 0 END) AS Amend
    ,SUM(CASE WHEN reason = 5 THEN 1 ELSE 0 END) AS Cancel
FROM Table2
WHERE Date2 >=@StartDate AND Date2<= @EndDate
GROUP BY ID 
```

**查询1的结果**

```
ID   CountAll     TValue    
-------------------------
id1     24         1020      
id2     13         2030      
id3      4          120 
```

**查询 2 的结果：**

```
ID     New     Amend     Cancel
--------------------------------
id1    12         4         6
id2     7         6         1
id4     2         1         2 
```

需要的输出：

```
ID     TValue     CountAll     New    Amend    Cancel   Total(countall+new+amend+cancel)
----------------------------------------------------------------------------------------
Id1    1020          24        12       4         6        46
Id2    2030          13         7       6         1        27
id3     120           4         0       0         0         4
Id4       0           0         2       1         2         5 
```

如果需要，我会发布我当前的解决方案，但它离工作还很远。

我一直在做一些研究，我认为我需要建立一个工会来加入 ID'S，或者只是做一个完全加入。（第二天做sql）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:23:34.907

试试这个，

```
SELECT *
FROM
(
    SELECT  ID ,
            SUM(CASE WHEN reason = 4 THEN 0 ELSE quantity*price END) AS TValue,
            COUNT(*) AS CountAll
    FROM    table1
    WHERE   Date>=@StartDate AND Date<=@EndDate
    GROUP BY ID
) a FULL JOIN
(
    SELECT  ID ,
            SUM(CASE WHEN reason = 1 THEN 1 ELSE 0 END) AS New ,
            SUM(CASE WHEN reason = 6 THEN 1 ELSE 0 END) AS Amend ,
            SUM(CASE WHEN reason = 5 THEN 1 ELSE 0 END) AS Cancel
    FROM Table2
    WHERE Date2 >=@StartDate AND Date2<= @EndDate 
    GROUP BY ID
) b ON a.ID = b.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T01:28:43.870

我会写如下内容：

```
select decode (a.id, null, b.id, a.id) as ID, a.TValue, CountAll, b.new, b.Amend, b.cancel 
   from (SELECT ID ,SUM(CASE WHEN reason = 4 THEN 0 ELSE quantity*price END) 
         AS TValue ,COUNT(*) AS CountAll 
         FROM table1 
         WHERE Date>=@StartDate AND Date<=@EndDate GROUP BY ID
        ) a FULL OUTER JOIN
        (SELECT ID , SUM(CASE WHEN reason = 1 THEN 1 ELSE 0 END) 
            AS New ,SUM(CASE WHEN reason = 6               
            THEN 1 ELSE 0 END) AS Amend , 
            SUM(CASE WHEN reason = 5 THEN 1 ELSE 0 END) AS Cancel
            FROM Table2 WHERE Date2 >=@StartDate AND Date2<= @EndDate GROUP BY ID
        ) b
     on a.id = b.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T06:16:05.150

你试过这个...

```
select isnull (a.id,b.id) as ID, a.TValue, CountAll, b.new, b.Amend, b.cancel   
from (SELECT ID ,SUM(CASE WHEN reason = 4 THEN 0 ELSE quantity*price END) AS TValue ,COUNT(*) AS CountAll         
                FROM table1          
                WHERE Date>=@StartDate AND Date<=@EndDate GROUP BY ID         ) a 
                FULL OUTER JOIN (SELECT ID , SUM(CASE WHEN reason = 1 THEN 1 ELSE 0 END)  AS New ,SUM(CASE WHEN reason = 6 THEN 1 ELSE 0 END) AS Amend , SUM(CASE WHEN reason = 5 THEN 1 ELSE 0 END) AS Cancel       
                FROM Table2 WHERE Date2 >=@StartDate AND Date2<= @EndDate GROUP BY ID         ) b  on a.id = b.id 
```

# c# - 连接无向图中某些节点的最短路径

> ID：12850941
> 
> 赞同：3
> 
> 时间：2012-10-12T01:18:30.810
> 
> 标签：c#, algorithm, graph

我有一个无向和未加权图的某个节点子集。我正在尝试确定所有这些节点之间是否存在路径，如果存在，最短路径是什么，其中包含不在节点子集中的最少节点。

我一直在想一种方法来修改最小生成树算法来实现这一点，但到目前为止我还没有想出一个可行的解决方案。

有没有一种好方法可以做到这一点，或者这是对已知算法的描述？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:11:06.270

> 我正在尝试确定所有这些节点之间是否存在路径

（据我了解，您正在寻找访问所有标记节点的单一路径）

好吧，我的朋友，这可能是一个问题 - 您正在描述[**旅行商问题**](http://en.wikipedia.org/wiki/Travelling_salesman_problem)和[哈密顿路径问题](http://en.wikipedia.org/wiki/Hamiltonian_path_problem)的变体（如果您正在寻找一条*简单的路径*，哈密顿路径的[简化](http://en.wikipedia.org/wiki/Polynomial-time_reduction)是直截了当的：标记所有节点）。
但恐怕这些问题是[**NP-Hard**](http://en.wikipedia.org/wiki/NP-hard)。

NP-Hard 问题是一个我们**不知道任何多项式时间解决方案**来解决它的问题，并且一般假设是 - 不存在¹。

因此，您最好的选择可能是某种指数解决方案。有`O(n^2 * 2^n)`使用动态编程或蛮力解决方案的 TSP 解决方案，它们是`O(n!)`

* * *

(1) 真的不是一个正式的定义，但这是足够的信息来理解问题，NP-Hard 问题真的有很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T01:59:35.577

这是一种方法，可以帮助您实现一些目标：

对于每个 i 和 j，使用[Floyd-Warshall](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)或 Dijkstra 求节点 i 和节点 j 之间的距离 d(i, j)，使得节点 i 和节点 j 在节点的子集中。

（如果 d(i,j) = infinity 那么现在停止，没有解决方案）

制作一个包含子集中每个节点的新图。对于每个 d(i, j)，在新图中的节点 i、节点 j 之间添加一条边，权重 = d(i, j)

现在在这个新图上使用旅行商算法来找到访问所有节点的最短路径。

这条最短路径为您提供了路径的长度，但该路径可能会多次访问某些节点。这意味着我们对所需子集之外的节点数量有一个上限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T01:21:09.557

Dijkstra 算法或使用广度优先搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-05T12:36:30.307

我创建了一个 Graph/Node/Connection 类，它不仅可以显示最短路径，还可以告诉您是否所有节点都已连接：

```
var allNodesAreConnected = StartNode.AllNodes.All(n => n.IsConnectedToStartNode); 
```

或者，如果您想知道哪些节点未连接，请稍微更改一下：

```
var anotConnectedNodes = StartNode.AllNodes.Where(n => !n.IsConnectedToStartNode); 
```

这篇文章中的更多示例和完整代码： [创建您自己的导航系统（使用 Graph、Node 和 Connection 类）](https://www.siepman.nl/blog/create-your-own-navigation-system-with-a-graph-node-and-connection-class)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T07:54:02.847

您应该使用[Dijkstra 的最短路径算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)。首先，您必须为图中的所有边分配权重（或距离），连接不在子集中的两个节点的每条边必须被赋予权重 1。连接子集中一个或两个节点的每条边必须被赋予无限重量。其次，您应该在结果图上运行 Dijkstra 算法。该算法将检查图的每条边。

此外，您可以使用[A* (A-star) 算法](http://en.wikipedia.org/wiki/A_star)。

更新：起初我不明白这个问题。正如@amit 所说，这是一个 NP 难题，是 HCP 和 TSP 的组合。也许某种随机搜索算法可以在多项式时间内以高概率解决这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-31T14:57:41.117

对于真正没有图论背景的人，我已经解决了这个问题，发现在**未加权**的无向图中，最简单的方法是[深度优先搜索](https://en.wikipedia.org/wiki/Depth-first_search)。Dijkstra 等算法的实现通常采用**加权**解决方案并为权重输入任意值。

我发现可行的解决方案是在使用**DFS**时遍历节点并记录每个成功的旅程，然后它只是返回最短成功旅程的一个案例。

这是完成繁重工作的文件： [深度优先搜索算法](https://github.com/steve-westwood/NodePath/blob/master/BL/DepthFirstSearch.cs)

# windows - XP 中缺少 Microsoft.Web 名称空间

> ID：12850944
> 
> 赞同：0
> 
> 时间：2012-10-12T01:18:57.053
> 
> 标签：windows, iis-7, iis-6, servermanager

我正在尝试使用 ServerManager 类，但我发现在 XP OS 上找不到“Microsoft.Web.Administration”和“Web.Management.Server”。

下载 Microsoft.Web.Management dll 的任何帮助或任何其他建议？我在XP机器上使用VS2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:21:55.773

这些命名空间可用于 IIS 7 及更高版本。没有办法在下层平台上实现它们。

要针对 IIS 5.1 (Windows XP) 或 IIS 6 (Windows Server 2003) 进行编码，请参阅以下内容：

[IIS 编程管理 SDK](http://msdn.microsoft.com/en-us/library/ms525041%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T13:48:04.150

帮助我解决相同问题的是安装“Web Services Enhancements (WSE) 2.0 SP3 for Microsoft .NET Redistributable Runtime MSI”

[http://www.microsoft.com/en-us/download/confirmation.aspx?id=772](http://www.microsoft.com/en-us/download/confirmation.aspx?id=772)

希望这会帮助别人......

# c# - 正则表达式选项 - 没有递归正则表达式

> ID：12850949
> 
> 赞同：0
> 
> 时间：2012-10-12T01:19:36.240
> 
> 标签：c#, regex

我正在尝试使用`System.Text.RegularExpressions.Regex`类从 JSON 字符串中获取一些文本。刺痛是这样的

```
[{"name":"joe","message":"hello","sent":"datetime"}{"name":"steve","message":"bye","sent":"datetime"}] 
```

我正在尝试使用 Matches() 方法来获取“消息”值。但是，将匹配指定为类似于`message":"*","sent`模式将返回 3 个匹配项：

```
hello
bye
hello","sent":"datetime"}{"name":"steve","message":"bye 
```

如何构建选项或修改我的模式以排除递归正则表达式检查？我只想要比赛

```
hello
bye 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:27:49.623

JSON 最好由 JSON 工具解析。

例如，您可以尝试使用非贪婪语法`.*?`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:35:50.050

JavaScriptSerializer 类（命名空间 System.Web.Script.Serialization，程序集 System.Web.Extensions.dll）对于处理这样的 JSON 字符串非常有用。

```
var json = "[{\"name\":\"joe\",\"message\":\"hello\",\"sent\":\"datetime\"},{\"name\":\"steve\",\"message\":\"bye\",\"sent\":\"datetime\"}]";

var serializer = new JavaScriptSerializer();
var result = serializer.Deserialize<object[]>(json);

// now have an array of objects, each of which happens to be an IDictionary<string, object>
foreach(IDictionary<string, object> map in result)
{
    var messageValue = map["message"].ToString();
    Console.WriteLine("message = {0}", messageValue);
} 
```

# python - Python - 将列表组合排列成各种大小的元组列表

> ID：12850950
> 
> 赞同：2
> 
> 时间：2012-10-12T01:19:50.483
> 
> 标签：python, list, recursion, tuples, combinations

我有一个字符串列表：

```
l = ['a', 'b', 'c'] 
```

我想在不同大小的组中创建列表元素的所有可能组合。我希望这是一个元组的列表，但它也可以是列表的列表等。元组的顺序和元组中的元组的顺序无关紧要。元组或元组的元组中都不能重复列表元素。对于上面的列表，我希望是这样的：

```
[(('a'),('b'),('c')),
 (('a', 'b'), ('c')),
 (('a', 'c'), ('b')),
 (('b', 'c'), ('a')),
 (('a', 'b', 'c'))] 
```

任何帮助是极大的赞赏。

编辑：我确实要求列表中的每个元组都包含 l 的所有元素。senderle 和 Antimony，关于遗漏，您都是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T01:32:58.937

这是做事的一种方法。不知道有没有更优雅的方法。该`itertools`模块具有组合和排列功能，但不幸的是，没有分区功能。

编辑：我的第一个版本不正确，但幸运的是，我已经从我做的一个旧项目中得到了这个。

您还可以通过返回`d`而不是`d.values()`. 这对于有效测试一个分区是否是另一个分区的细化很有用。

```
def connectivityDictSub(num, d, setl, key, i):
    if i >= num:
        assert(key not in d)
        d[key] = setl
    else:
        for ni in range(len(setl)):
            nsetl, nkey = setl[:], key
            for other in nsetl[ni]:
                assert(other != i)
                x,y = sorted((i, other))
                ki = ((2*num-3-x)*x)/2 + y-1
                nkey |= 1<<ki
            nsetl[ni] = nsetl[ni] + [i] #not the same as += since it makes a copy
            connectivityDictSub(num, d, nsetl, nkey, i+1)
        nsetl = setl + [[i]]
        connectivityDictSub(num, d, nsetl, key, i+1)

def connectivityDict(groundSet):
    gset = sorted(set(groundSet))
    d = {}
    connectivityDictSub(len(gset), d, [], 0, 0)
    for setl in d.values():
        setl[:] = [tuple(gset[i] for i in x) for x in setl]
    return map(tuple, d.values())

for x in connectivityDict('ABCD'):
    print x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T01:34:04.097

[itertools](http://docs.python.org/library/itertools.html%20itertools)应该可以完成您想要的大部分工作。

例子：

```
stuff = [1, 2, 3]
for L in range(0, len(stuff)+1):
  for subset in itertools.combinations(stuff, L):
    print(subset) 
```

这个例子只是为了展示 itertools。您必须弄清楚才能获得所需的确切输出。

# c# - 如何使用 C# 在块/扇区级别访问驱动器？

> ID：12850953
> 
> 赞同：3
> 
> 时间：2012-10-12T01:20:11.087
> 
> 标签：c#, filesystems, block, sector

我正在开发一个嵌入式项目，其中数据存储在不使用文件系统的 SD 卡上（我将数据写入特定块）。我的嵌入式设备为设备提供了大容量存储接口，但设备上没有格式化的文件系统。

我想知道如何访问设备并一次读取指定的扇区？我找到了 pinvoke 的参考资料，但通过查看 pinvoke 的网站，我无法弄清楚很多。

任何建议，将不胜感激; 谢谢！

# hibernate - 在 Grails 中配置 Postgres

> ID：12850955
> 
> 赞同：2
> 
> 时间：2012-10-12T01:21:01.447
> 
> 标签：hibernate, postgresql, grails, grails-orm

我有一个迁移到 MySQL 和 PostgreSQL 的应用程序，我在数据分配方面都有不同的行为。

通过分析在 Postgres 中创建的数据库，我意识到在每个表中创建的 ID 编号并没有被重置为另一个表的更改。例如，它被设置在寄存器 3 'Table1' 中并计数 ID 1 到 3。当插入另一个表中另一个类的对象时，应该为该表启动 ID，但它遵循前一个和当对象保留在“table2”中时，他的第一个 ID 开头继续从 4 开始计数。我还注意到 Mysql 中的一些变化，因为“false”字段“boolean”是 preenchdio，在 Postgres 中填充了“0”错误的 '。

我更新了 JDBC，但问题仍然存在。我认为也许应该在现场进行一些“映射”配置，但不确定。

我的数据源是这样的：

```
environments {
development {
    dataSource {

        dbCreate = "update" // one of 'create', 'create-drop', 'update', 'validate', ''

    url = "jdbc:postgresql://localhost:5432/app"
        driverClassName = "org.postgresql.Driver"
        dialect = org.hibernate.dialect.PostgreSQLDialect
        //url = "jdbc:mysql://localhost:3306/app"
        username = "app"
        password = "app123"

    }
}
test {
    dataSource {
        dbCreate = "update"
        url = "jdbc:h2:mem:testDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
        username = "sa"
        password = ""
    }
}
production {
    dataSource {
        dbCreate = "update"
        url = "jdbc:postgresql://localhost:5432/app"
        driverClassName = "org.postgresql.Driver"
        username = "postgres"

        pooled = true
        properties {
           maxActive = -1
           minEvictableIdleTimeMillis=1800000
           timeBetweenEvictionRunsMillis=1800000
           numTestsPerEvictionRun=3
           testOnBorrow=true
           testWhileIdle=true
           testOnReturn=true
           validationQuery="SELECT 1"
        }
    }
} 
```

}

您可以遵循与 Mysql Postgres 中相同的模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:37:19.633

Hibernate 为 Postgres 和 Oracle 中的所有表创建一个序列，但很容易为每个表创建一个序列。请参阅此解决方案：http: [//grails.1312388.n4.nabble.com/One-hibernate-sequence-is-used-for-all-Postgres-tables-td1351722.html#a1351725](http://grails.1312388.n4.nabble.com/One-hibernate-sequence-is-used-for-all-Postgres-tables-td1351722.html#a1351725)

要使用自定义方言，请在 src/groovy 或 src/java 中创建类。使用您想要的任何包和类名。要在 Grails 中注册它，请在 中的块中设置`dialect`属性，例如`dataSource``DataSource.groovy`

```
dataSource {
   pooled = true
   dialect = com.foo.bar.MyDialect
   driverClassName = ...
   username = ...
   password = ...
} 
```

# session - 当您需要会话管理时，使用什么架构风格来代替 REST？

> ID：12850963
> 
> 赞同：-3
> 
> 时间：2012-10-12T01:22:04.180
> 
> 标签：session, rest, authentication, web-applications

在使用 REST 时，我一直在阅读有关会话管理和身份验证的主题，尽管有解决方案，但我的理解是 REST 应该是无状态的，因此管理会话并不真正属于那种架构风格。

如果我的项目需要身份验证（但不一定是 REST），那么开发基于浏览器的 Web 应用程序有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:52:20.557

我认为 Web 服务（REST 或 SOAP）应该是**无状态**的，这是普遍的看法。[Stateful Webservice](https://stackoverflow.com/questions/988819/stateful-webservice)有几个很好的理由。

所以我认为，如果您的项目需要会话管理，它应该在表示层（Web 应用程序）中，而不是在您的业务逻辑层（您的 Web 服务）中。每个 Web 服务都应该 - 并且必须 - 启用身份验证，但会话管理应该在您的 Web 容器中完成：每个 Web 应用程序平台都支持这一点，并且是应该完成的正确位置。

# ruby-on-rails-3 - 与文本字段的简单表单关联

> ID：12850976
> 
> 赞同：0
> 
> 时间：2012-10-12T01:24:13.550
> 
> 标签：ruby-on-rails-3

我有一个使用[simple_form gem](https://github.com/plataformatec/simple_form)的 Rails 应用程序。我有两个相关的模型，交易和股票。在交易表格中，我希望用户能够在文本字段中输入他们的股票代码。目前，我正在使用呈现选择框的关联函数。问题是我想要一个文本字段，因为我有大约一千只股票可供选择。

有没有办法可以做到这一点（有或没有简单表格）？

**型号：**

```
class Trade < ActiveRecord::Base
 belongs_to :stock
end

class Stock < ActiveRecord::Base
  has_many :trades
end 
```

**交易表格#new**

```
<%= simple_form_for(@trade)  do |f| %>
  <%= f.association :stock %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:11:12.660

您应该能够只使用以下语法：

```
 <%= f.input :stock_id, :label => 'Enter your ticker:' %> 
```

这里的问题是用户将不知道 :stock_id 是什么，因为它是对许多 Stock 对象之一的引用。

所以你可能想要实现一个简单的[jquery 自动完成接口](http://jqueryui.com/autocomplete/)，它返回一个股票列表，如下所示：

```
[{:ticker => 'AAPL', :name => 'Apple Inc', :id => 1}, {:ticker => 'IBM', :name => 'International Business Machines', :id => 2}, etc ] 
```

然后，您可以将类似这样的内容显示为自动完成结果：

```
AAPL - Apple Inc
IBM - International Business Machines 
```

并允许用户选择他们正在寻找的那个。在幕后，您捕获 :id 并将其用作关联的 :stock_id。

您将需要添加一个stocks_controller 操作，该操作接受一个字符串并根据部分股票代码查找股票并返回最大数量的股票，例如20。

```
def search
  ticker_query = "%#{params[:ticker]}%"
  stocks = Stock.where('ticker LIKE ?', ticker_query).limit(20)
  render :json => stocks
end 
```

# c# - 在 XML 中删除特定的父级及其子级

> ID：12850980
> 
> 赞同：-1
> 
> 时间：2012-10-12T01:24:43.413
> 
> 标签：c#, xml, parent, children

> **可能重复：**
> [如何使用 C# 删除 xml 元素？](https://stackoverflow.com/questions/9709704/how-to-delete-xml-element-with-c)

假设我有一个这样的 XML 文档：

```
<doc>
     <car>
         <color>Red</color>
         <size>compact</size>
     </car>
     <car>
         <color>Yellow</color>
         <size>mid-size</size>
     </car>
</doc> 
```

我想删除带有黄色属性的汽车的整个条目，所以xml文件就变成了

```
<doc>
     <car>
         <color>red</color>
         <size>compact</size>
     </car>
</doc> 
```

我该怎么办？我搜索了高低并找到了解决方案，但遗憾的是不是 c#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:58:54.193

您可以使用 Linq to XML：

```
 var yellowCars = from car in xDoc.Elements("doc").Elements("car") 
                     where car.Element("Color").Value == "Yellow" 
                     select car;

    foreach (var car in yellowCars)
    {
        car.Remove();
    }

  xDoc.Save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:34:28.390

我总是如何处理这种情况：我将整个文件加载到内存中，您可以通过将 xml 反序列化为 c# 类或 xmlnode 结构来做到这一点，这方面有很多教程。后记我对列表或数组进行任何编辑，然后重新序列化并覆盖整个文件。如果您的文件没有数百条记录，则应该没有明显的性能问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T01:36:56.297

```
using System.Xml.XPath; 
```

...

```
var doc = XDocument.Parse(xml);
var list = new List<XElement>();
foreach (var element in doc.XPathSelectElements(@"/doc/car[color='Yellow']")) {
    list.Add(element);
}
foreach (var element in list) element.Remove(); 
```

更新：所以它在迭代时不会改变集合。

# css - CSS连续浮动多个元素

> ID：12850982
> 
> 赞同：0
> 
> 时间：2012-10-12T01:25:04.410
> 
> 标签：css

我有一个带有标题栏 div 的面板 div。在标题栏中，我可能在右侧有几个不同的图标（要在运行时确定）。我正在尝试构建 CSS，以便图标始终尽可能向右堆叠，并且标题文本不会超出图标（即，如果必要的）。我只是没能把它弄好。对于我的图标，我有`<img class="icon" ...>`哪里

```
.icon {
display: block;
float: right;
padding-left: 4px;
} 
```

图标本身看起来很好。但是当我尝试添加实际标题时，事情变得不稳定。我似乎无法让标题正确占用左侧的剩余空间。div（或我尝试过的跨度）将完全位于图标下方或上方。或者有时，它会强制图标在右侧垂直堆叠，具体取决于标题的长度。

所以本质上，我正在寻找的是一个或多个固定大小的小元素水平堆叠到右上角，一个更长的元素占据左侧的剩余空间，最后一个元素可能最终占据更多空间垂直取决于是否有任何文本换行。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:16:09.970

我想我成功了。

基本上，我在 div 中有标题文本（也尝试过 span）。但是，如果我没有将它放在任何内容中（即，它是主标题 div 的一部分），那么一切似乎都可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:53:57.263

将以下规则添加到您拥有文本的元素的 css 中可能会有所帮助：

```
white-space: nowrap; 
```

# javascript - 将上下文传递给 jquery hoverIntent

> ID：12850983
> 
> 赞同：1
> 
> 时间：2012-10-12T01:25:12.843
> 
> 标签：javascript, jquery, hoverintent

我需要将上下文传递给我对 showPictureZoom 的调用（事件结束）。有谁知道该怎么做？我的想法是我需要传递一个存储在 dom 中的变量（图像 src），但我不知道该怎么做......
这是我目前所拥有的：

```
var showPictureZoom = function(src)
{
    console.log(src)
}

var config = {
    over: function(){showPictureZoom(context)},
    sensitivity:6,
    interval:400,         
    out: hidePictureZoom,
};

$(".image img").hoverIntent(config); 
```

谢谢你的帮助！（：

编辑：这是html代码：

```
<td class="image">
    <img src="img_url" data-large-square="DATA_NEEDED">
</td> 
```

我需要的是在过度回调中获取变量“data-large-square”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T03:08:45.033

您可以将上下文传递给“this”，即元素：

```
var showPictureZoom = function(el)
{
    console.log($(el).attr('src'));
}

var config = {
    over: function(){showPictureZoom(this)},
    sensitivity:6,
    interval:400,         
    out: hidePictureZoom,
};

$(".image img").hoverIntent(config); 
```

# java - 使用 JPA 从孩子那里获取父母

> ID：12850986
> 
> 赞同：0
> 
> 时间：2012-10-12T01:25:28.510
> 
> 标签：java, spring, hibernate, jpa

我有一个电话对象和一个电话历史记录对象。我希望能够检索电话历史记录对象，然后获取其父级（电话），但由于某种原因，当我尝试执行此操作然后保留子级时，我收到一个异常，说 phone_id 未填充. 不知道如何解决这个问题，尽管我怀疑它与我的映射注释有关。

下面是我的实体类。我尝试更改注释以匹配此处双向关系部分中的建议：http: [//docs.jboss.org/hibernate/annotations/3.5/reference/en/html/entity.html#entity-mapping-association](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html/entity.html#entity-mapping-association)但是这似乎没有奏效。我是 JPA 的新手，所以对于有更多经验的人来说这可能很简单，但我很难过。TIA。

电话实体：

```
package com.blah.model;

import java.util.ArrayList;
import java.util.Calendar;
import java.util.List;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;

@Entity
@Table(name = "phones")
public class EPhone implements BaseModel {

    private static final long serialVersionUID = 3497994786207995664L;

    @Id
    @GeneratedValue
    @Column(name = "id")
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "account_id",
            nullable = false)
    private EAccount account;

    @Temporal(TemporalType.TIMESTAMP)
    private Calendar created;

    @Column(name = "value",
        nullable = false)
        private Long value;

    @OneToMany(fetch = FetchType.LAZY,
            mappedBy = "phone",
            cascade = CascadeType.ALL)
    private final List<EPhoneHistory> history;

    public EPhone() {
        this(Calendar.getInstance());
    }

    public EPhone(final Calendar createdDate) {
        setCreated(createdDate);
        history = new ArrayList<EPhoneHistory>();
    }

    public void add(EPhoneHistory phoneHistoryItem) {
        history.add(phoneHistoryItem);
    }

    public EAccount getAccount() {
        return account;
    }

    public Calendar getCreated() {
        return created;
    }

    @OneToMany(fetch = FetchType.LAZY,
            mappedBy = "phone",
            cascade = CascadeType.ALL)
    public List<EPhoneHistory> getHistory() {
        return history;
    }

    public Long getId() {
        return id;
    }

    public Long getValue() {
        return value;
    }

    public void setAccount(EAccount account) {
        this.account = account;
    }

    public void setCreated(Calendar created) {
        this.created = created;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public void setValue(Long value) {
        this.value = value;
    }

} 
```

电话历史实体：

```
package com.blah.model;

import java.util.Calendar;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.EnumType;
import javax.persistence.Enumerated;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;

@Entity
@Table(name = "phone_history")
public class EPhoneHistory implements BaseModel {

    private static final long serialVersionUID = 4591314258588732076L;

    @Id
    @GeneratedValue
    @Column(name = "id")
    private Long Id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "phone_id",
            nullable = false)
    private EPhone phone;

    @Temporal(TemporalType.TIMESTAMP)
    private Calendar created;

    @Enumerated(EnumType.ORDINAL)
    @Column(name = "type_id")
    private PhoneHistoryType type;

    public Calendar getCreated() {
        return created;
    }

    public Long getId() {
        return Id;
    }

    public EPhone getPhone() {
        return phone;
    }

    public PhoneHistoryType getType() {
        return type;
    }

    public void setCreated(Calendar created) {
        this.created = created;
    }

    public void setId(Long id) {
        Id = id;
    }

    public void setPhone(EPhone phone) {
        this.phone = phone;
    }

    public void setType(PhoneHistoryType type) {
        this.type = type;
    }

} 
```

**更新澄清（这是一个失败的测试）：**

```
package com.blah.model.repository;

import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.transaction.annotation.Transactional;

import com.blah.AbstractBaseDbTestCase;
import com.blah.model.EPhoneHistory;
import com.blah.model.PhoneHistoryType;

public class PhoneHistoryRepositoryTest extends AbstractBaseDbTestCase {

    @Autowired
    PhoneHistoryRepository phoneHistoryRepo;

    @Test
    @Transactional
    public void testCreateAndSavePhoneHistory() {

        EPhoneHistory existingPhoneHistory = phoneHistoryRepo.find(1L);

        EPhoneHistory newPhoneHistory = new EPhoneHistory();
        newPhoneHistory.setType(PhoneHistoryType.VOICE);

        // I assume this is where I would
        // set the phone, but I don't have it.
        // existingPhoneHistory.setPhone(phone);

        // This is what I'm having trouble with. getPhone() doesn't populate the
        // phone field with the parent phone object.
        existingPhoneHistory.getPhone().add(newPhoneHistory);

        phoneHistoryRepo.persist(existingPhoneHistory);
        phoneHistoryRepo.flush();
    }
} 
```

和失败堆栈跟踪：

```
org.springframework.dao.DataIntegrityViolationException: NULL not allowed for column "PHONE_ID"; SQL statement:
insert into phone_history (id, created, phone_id, type_id) values (null, ?, ?, ?) [23502-168]; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: NULL not allowed for column "PHONE_ID"; SQL statement:
insert into phone_history (id, created, phone_id, type_id) values (null, ?, ?, ?) [23502-168]
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:643)
    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:104)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:403)
    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:58)
    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:163)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at com.blah.model.repository.PhoneHistoryRepository$$EnhancerByCGLIB$$4f90cdde.flush(<generated>)
    at com.blah.model.repository.PhoneHistoryRepositoryTest.testCreateAndSavePhoneHistory(PhoneHistoryRepositoryTest.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.hibernate.exception.ConstraintViolationException: NULL not allowed for column "PHONE_ID"; SQL statement:
insert into phone_history (id, created, phone_id, type_id) values (null, ?, ?, ?) [23502-168]
    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:128)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy37.executeUpdate(Unknown Source)
    at org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.executeAndExtract(IdentityGenerator.java:96)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:58)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2870)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3381)
    at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:203)
    at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:183)
    at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:167)
    at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:320)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:126)
    at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:78)
    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:208)
    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:151)
    at org.hibernate.internal.SessionImpl.firePersistOnFlush(SessionImpl.java:870)
    at org.hibernate.internal.SessionImpl.persistOnFlush(SessionImpl.java:863)
    at org.hibernate.engine.spi.CascadingAction$8.cascade(CascadingAction.java:346)
    at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:380)
    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:323)
    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
    at org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:409)
    at org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:350)
    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:326)
    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
    at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)
    at org.hibernate.event.internal.AbstractFlushingEventListener.cascadeOnFlush(AbstractFlushingEventListener.java:160)
    at org.hibernate.event.internal.AbstractFlushingEventListener.prepareEntityFlushes(AbstractFlushingEventListener.java:151)
    at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:88)
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1214)
    at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:986)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
    at $Proxy32.flush(Unknown Source)
    at com.blah.model.repository.AbstractRepository.flush(AbstractRepository.java:41)
    at com.blah.model.repository.AbstractRepository$$FastClassByCGLIB$$1ba8d45c.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
    ... 36 more
Caused by: org.h2.jdbc.JdbcSQLException: NULL not allowed for column "PHONE_ID"; SQL statement:
insert into phone_history (id, created, phone_id, type_id) values (null, ?, ?, ?) [23502-168]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.table.Column.validateConvertUpdateSequence(Column.java:293)
    at org.h2.table.Table.validateConvertUpdateSequence(Table.java:689)
    at org.h2.command.dml.Insert.insertRows(Insert.java:120)
    at org.h2.command.dml.Insert.update(Insert.java:84)
    at org.h2.command.CommandContainer.update(CommandContainer.java:75)
    at org.h2.command.Command.executeUpdate(Command.java:230)
    at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:156)
    at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:142)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 83 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:36:01.580

由于您已经进行了连接`lazy`，我怀疑您的子对象中没有`phone`填充父对象`phoneHistory`。请验证（通过 phoneHistory 调试/打印电话对象值）。如果是这样，请在保存之前先设置`phone`对象。`phoneHistory`

`addPhoneHistory`在`Phone`对象中添加一个方法，如下所示：

```
 public void addPhoneHistory(PhoneHistory phoneHistory){
         phoneHistory.setPhone(this); //This is importtant as its sets the parent
         if(this.phoneHistories == null){
            this.phoneHistories = new ArrayList<PhoneHistory>();
         } 
         this.phoneHistories.add(phoneHistory); 
      } 
```

在代码中添加要在对象中添加`PhoneHistory`对象`Phone`以使用上述方法的行。

```
 existingPhoneHistory.getPhone().addPhoneHistory(newPhoneHistory); 
```

`in place of`保存“Phone existingPhoneHistory ”也是一个好主意，如下所示：

```
 Phone phone = existingPhoneHistory.getPhone();
   phone.addPhoneHistory(newPhoneHistory);
   entityManager.save(phone);//use your PhoneRepo, if there to persist 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:43:52.403

检查填充 phone_id 变量的 SQL 查询（或您使用的其他一些数据采集系统）已用于获取列字段。其次，检查这些字段是否由应该创建 phone_id 数据的任何系统填写（例如，其他 servlet 管理并将信息发送到 sql 表中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T01:23:32.547

应该很容易修复。

1.  延迟加载在这里不是问题。
    您所有的测试调用都在同一个 Spring 测试事务中运行。因此，当您通过 .getXXX() 调用遍历关系以获取必要的数据时，JPA 提供程序将自动加载所有 LAZY 加载的关系。
2.  测试代码中的错误。在子对象newPhoneHistory 中，您没有设置phone 对象，它提供了必填列phoneId。在致电之前或之后：

    ```
    existingPhoneHistory.getPhone().add(newPhoneHistory); 
    ```

    只需添加：

    ```
    newPhoneHistory.setPhone(existingPhoneHistory.getPhone()); 
    ```

您需要手动设置双向关系双方的关系数据。从 JPA 2 规范：

> *托管实体之间的双向关系将基于关系拥有方持有的引用进行持久化。开发人员有责任保持拥有方的内存引用和相反方的内存引用在更改时彼此保持一致。在单向一对一和一对多关系的情况下，开发人员有责任确保*（原文如此）*关系的语义得到遵守。[29]*
> 
> 尤其重要的是要确保对关系反向方的更改会导致拥有方进行适当的更新，以确保更改同步到数据库时不会丢失。

:-)

# java - 在随机路径上将一个对象移动到另一个对象

> ID：12850989
> 
> 赞同：0
> 
> 时间：2012-10-12T01:26:18.560
> 
> 标签：java, object

我有一个程序，它在开始时创建多个随机放置的对象（球），现在我试图将玩家球自动移向最近的对象，直到它们的中心相同。我已经确定了存储在名为 distance 的数组中的最近对象的距离，索引为“最近”，并将速度设置为在其他地方初始化的变量 delta，我如何获得正确的方向？现在它只是沿对角线移动，但不会向最近的球移动

coordinatex[closest] 和 coordinatey[closest] 是最近对象的 x 和 y 坐标。

playerObject.getX 和 playerObjectgetY 给了我玩家对象的坐标

```
public void move(int delta) {
     for(int i=0; i<distance[closest]; i++) {
        if (x<coordinatex[closest] && y<coordinatey[closest]) {     
            playerObject.setX(playerObject.getX() + 0.1*delta);     
            playerObject.setY(playerObject.getY() + 0.1*delta);    
        } else if(x>coordinatex[closest] && y>coordinatey[closest]) {     
            playerObject.setX(playerObject.getX() - 0.1*delta);     
            playerObject.setY(playerObject.getY() - 0.1*delta);    
        } else if(x>coordinatex[closest] && y<coordinatey[closest]) {     
            playerObject.setX(playerObject.getX() - 0.1*delta);     
            playerObject.setY(playerObject.getY() + 0.1*delta);    
        } else if (x<coordinatex[closest] && y>coordinatey[closest]) {     
            playerObject.setX(playerObject.getX() + 0.1*delta);     
            playerObject.setY(playerObject.getY() - 0.1*delta);         
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:36:23.523

与此非常相似的东西：

```
angle=atan2(ClosestBally-player_y,closestBallx-player_x);
dxperframe = cos(angle);
dyperframe = sin(-angle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:49:03.537

我看到了四个半基本（对角线）方向的处理程序，但*没有*看到四个[基本方向](http://en.wikipedia.org/wiki/Cardinal_direction)。例如，在这个[游戏中，敌人使用](http://robotchase.sourceforge.net/)[此处](https://sourceforge.net/p/robotchase/code/67/tree/trunk/src/org/gcs/robot/RCModel.java#l238)[`move(int row, int col)`](http://robotchase.sourceforge.net/org/gcs/robot/RCModel.html#move%28int,%20int%29)所示的方法从八个方向中的任何一个逐步接近玩家。

# ruby - 正则表达式：为什么“名称”没有作为匹配返回

> ID：12850994
> 
> 赞同：1
> 
> 时间：2012-10-12T01:26:41.410
> 
> 标签：ruby, regex

以下正则表达式返回“Gray”和“James”作为匹配项。我不明白为什么“名称”不匹配。你可以解释吗？

```
"Name:  Gray, James"[/(\w+), (\w+)/] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T01:29:11.203

这是您的正则表达式如何工作的解释

```
Match the regular expression below and capture its match into backreference number 1 «(\w+)»
   Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Match the characters “, ” literally «, »
Match the regular expression below and capture its match into backreference number 2 «(\w+)»
   Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+» 
```

格雷，詹姆斯
(\w+), (\w+)

`Name`不跟逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:32:24.663

匹配逗号旁边的单词没有空格“(\w+),”

匹配逗号和空格 ", (\w+)" 后的单词

# ruby-on-rails - 方法未定义的别名方法链

> ID：12850998
> 
> 赞同：0
> 
> 时间：2012-10-12T01:27:14.210
> 
> 标签：ruby-on-rails, ruby, metaprogramming, alias-method-chain

我有一个包含在 Rails Observer 中的模块。

目的是：

*   调用`after_save`和`after_update`一个名为的方法`check_integrity`
*   `check_integrity`在`after_save`或/和`after_update`如果在观察者中定义时调用。

**所以简而言之，它应该总是调用`check_integrity`.**

我尝试了类似于以下代码的内容：

```
module IntegrityObserver
  extend ActiveSupport::Concern

  included do
    alias_method_chain :after_save,   :check_integrity
    alias_method_chain :after_update, :check_integrity
  end

  def check_integrity
    # do something
  end
end

class UserObserver < ActiveRecord::Observer
  include IntegrityObserver

  def after_save(object)
    # do something
  end
end 
```

但它引发了一个错误：`activesupport-3.0.17/lib/active_support/core_ext/module/aliasing.rb:31:in alias_method': undefined method after_update' for class TaskObserver' (NameError)`

有人知道我怎么能做我想做的事吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:17:53.627

ActiveRecord 已经提供了观察者功能来监控模型的生命周期。以下是如何注册一个响应多个模型的通用观察者：

```
class AuditObserver < ActiveRecord::Observer
  observe :account, :balance

  def after_update(record)
    AuditTrail.new(record, "UPDATED")
  end
end 
```

在您的 config/application.rb 文件中：

```
config.active_record.observers = :audit_observer 
```

[在此处](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html)查看更多示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T07:58:52.690

alias_method_chain 不能那样工作。如果您定义如下内容：

```
alias_method_chain :after_save,   :check_integrity 
```

您必须定义以下方法：

```
def after_save_with_check_integrity(*args)
  # do something
  # you can call the original after_save by calling:
  # after_save_without_check_integrity(*args)
end 
```

请注意，在大多数情况下使用 alias_method_chain 被认为是一种不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T08:38:01.623

与模型不同，观察者没有预定义的回调方法，例如 after_save、after_update。所以你得到一个“未定义的方法”错误。

你可以这样做，

```
module IntegrityObserver
  extend ActiveSupport::Concern

  def after_save(record)
    check_integrity
  end

  def after_update(record)
    check_integrity
  end

  def check_integrity
    # do something
  end
end 
```