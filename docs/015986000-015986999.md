# StackOverflow 问答 15986000-15986999

# search - 如何使用批处理搜索和替换区分大小写的字符串

> ID：15986001
> 
> 赞同：2
> 
> 时间：2013-04-13T08:50:34.400
> 
> 标签：search, batch-file, replace, case

我想搜索和替换区分大小写的字符串

就像如果我在文本文件中增加 Rise RISE 我只想替换字符串“rise”，下面的代码是替换所有三个字符串。

请帮助我！

```
@Echo on
SETLOCAL ENABLEEXTENSIONS
SETLOCAL DISABLEDELAYEDEXPANSION

set file="c:\Users\rawal\Desktop\a\file.txt"
set /p Input=Enter some text:
set OldStr="rise"
set NewStr=%Input% 

for /f "tokens=1,* delims=]" %%A in ('"type %file% |find /n /v """') do (
set "line=%%B"
if defined line (
call echo %%line:%OldStr%=%NewStr%%%>> %file%_new
) ELSE echo.
)

move /Y %file%_new %file% > nul 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T13:23:42.730

这是一个让我很感兴趣的话题。我个人的标准是该解决方案是一个仅使用本机 Windows 命令的脚本，并且它与从 XP 开始的所有 Windows 版本兼容。

我已经开发了两种解决方案：1) 我认为对于批处理而言尽可能高效的纯批处理解决方案，以及 2) 非常强大且速度非常快的混合 JScript/批处理解决方案。

我几乎放弃了纯批处理解决方案，转而使用 JScript/批处理混合，因为混合功能更强大，完全支持正则表达式，而且速度更快。

**1）纯批处理解决方案：MODFILE.BAT**

我首先在 DOSTIPS 上发表了这篇文章：[“终极”文件搜索和替换批处理实用程序](http://www.dostips.com/forum/viewtopic.php?f=3&t=2710)

批处理功能可用作独立实用程序，或合并到更大的批处理脚本中。

假设该函数是一个名为 MODFILE.BAT 的文件中的独立实用程序，该文件位于您当前的文件夹中，或者位于您的 PATH 中的某个位置，那么您的脚本将变为：

```
@echo off
setlocal enableDelayedExpansion

set file="c:\Users\rawal\Desktop\a\file.txt"
set "OldStr=rise"
set "NewStr="
set /p "NewStr=Enter some text: "

call ModFile "%file%" OldStr NewStr 
```

这是 ModFile 函数本身。完整的文档嵌入在脚本中。我非常努力地优化代码，并消除困扰大多数批处理解决方案的限制。但是文档中列出了一些剩余的限制。

```
@echo off
:modFile File SearchVar [ReplaceVar] [/I]
::
::  Perform a search and replace operation on each line within File.
::
::  SearchVar = A variable containing the search string.
::
::  ReplaceVar = A variable containing the replacement string.
::               If ReplaceVar is missing or is not defined then the
::               search string is replaced with an empty string.
::
::  The /I option specifies a case insensitive search.
::
::  A backup of the original File is made with an extension of .bak
::  prior to making any changes.
::
::  The number of replacements made is returned as errorlevel.
::
::  If an error occurs then no changes are made and
::  the errorlevel is set to -1.
::
::  Limitations
::    - File must use Windows style line terminators <CR><LF>.
::    - Trailing control characters will be stripped from each line.
::    - The maximum input line length is 1021 characters.
::
setlocal enableDelayedExpansion

  ::error checking
  if "%~2"=="" (
    >&2 echo ERROR: Insufficient arguments
    exit /b -1
  )
  if not exist "%~1" (
    >&2 echo ERROR: Input file "%~1" does not exist
    exit /b -1
  )
  2>nul pushd "%~1" && (
    popd
    >&2 echo ERROR: Input file "%~1" does not exist
    exit /b -1
  )
  if not defined %~2 (
    >&2 echo ERROR: searchVar %2 not defined
    exit /b -1
  )
  if /i "%~3"=="/I" (
    >&2 echo ERROR: /I option can only be specified as 4th argument
    exit /b -1
  )
  if "%~4" neq "" if /i "%~4" neq "/I" (
    >&2 echo ERROR: Invalid option %4
    exit /b -1
  )

  ::get search and replace strings
  set "_search=!%~2!"
  set "_replace=!%~3!"

  ::build list of lines that must be changed, simply exit if none
  set "replaceCnt=0"
  set changes="%temp%\modFileChanges%random%.tmp"
  <"%~1" find /n %~4 "!_search:"=""!^" >%changes% || goto :cleanup

  ::compute length of _search
  set "str=A!_search!"
  set searchLen=0
  for /l %%A in (12,-1,0) do (
    set /a "searchLen|=1<<%%A"
    for %%B in (!searchLen!) do if "!str:~%%B,1!"=="" set /a "searchLen&=~1<<%%A"
  )

  ::count number of lines + 1
  for /f %%N in ('find /v /c "" ^<"%~1"') do set /a lnCnt=%%N+1

  ::backup source file
  if exist "%~1.bak" del "%~1.bak"
  ren "%~1" "%~nx1.bak"

  ::initialize
  set "skip=2"

  <"%~1.bak" (

    %=for each line that needs changing=%
    for %%l in (!searchLen!) do for /f "usebackq delims=[]" %%L in (%changes%) do (

      %=read and write preceding lines that don't need changing=%
      for /l %%N in (!skip! 1 %%L) do (
        set "ln="
        set /p "ln="
        if defined ln if "!ln:~1021!" neq "" goto :lineLengthError
        echo(!ln!
      )

      %=read the line that needs changing=%
      set /p "ln="
      if defined ln if "!ln:~1021!" neq "" goto :lineLengthError

      %=compute length of line=%
      set "str=A!ln!"
      set lnLen=0
      for /l %%A in (12,-1,0) do (
        set /a "lnLen|=1<<%%A"
        for %%B in (!lnLen!) do if "!str:~%%B,1!"=="" set /a "lnLen&=~1<<%%A"
      )

      %=perform search and replace on line=%
      set "modLn="
      set /a "end=lnLen-searchLen, beg=0"
      for /l %%o in (0 1 !end!) do (
        if %%o geq !beg! if %~4 "!ln:~%%o,%%l!"=="!_search!" (
          set /a "len=%%o-beg"
          for /f "tokens=1,2" %%a in ("!beg! !len!") do set "modLn=!modLn!!ln:~%%a,%%b!!_replace!"
          set /a "beg=%%o+searchLen, replaceCnt+=1"
        )
      )
      for %%a in (!beg!) do set "modLn=!modLn!!ln:~%%a!"

      %=write the modified line=%
      echo(!modLn!

      %=prepare for next iteration=%
      set /a skip=%%L+2
    )

    %=read and write remaining lines that don't need changing=%
    for /l %%N in (!skip! 1 !lnCnt!) do (
      set "ln="
      set /p "ln="
      if defined ln if "!ln:~1021!" neq "" goto :lineLengthError
      echo(!ln!
    )

  ) >"%~1"

  :cleanup
  del %changes%
exit /b %replaceCnt%

:lineLengthError
  del %changes%
  del "%~1"
  ren "%~nx1.bak" "%~1"
  >&2 echo ERROR: Maximum input line length exceeded. Changes aborted.
exit /b -1 
```

**2) 混合 JScript/批处理解决方案：REPL.BAT**

我第一次在 DOSTIPS 上发表了这篇文章：[regex search and replace for batch - 轻松编辑文件！](http://www.dostips.com/forum/viewtopic.php?f=3&t=3855)

我真的很喜欢这个实用程序。大多数批处理脚本都是我的业余爱好，但我在日常工作中经常使用这个实用程序。它非常强大和快速，但只需要很少的代码。它支持正则表达式搜索和替换，但也有`/L`文字选项。默认情况下，搜索区分大小写。

假设 REPL.BAT 在您当前的文件夹中，或者在您的 PATH 中的某个位置，那么您的代码将变为：

```
@echo off
setlocal enableDelayedExpansion

set "file=c:\Users\rawal\Desktop\a\file.txt"
set "OldStr=rise"
set "NewStr="
set /p "NewStr=Enter some text: "

type "%file%" | repl OldStr NewStr VL >"%file%.new"
move /y "%file%.new" "%file%" >nul 
```

我使用`L`选项来强制进行文字搜索而不是默认的正则表达式搜索，以及`V`直接从环境变量中读取搜索和替换值而不是传递字符串文字的选项。

这是实际的 REPL.BAT 实用程序。完整的文档嵌入在脚本中。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript regex syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            B - The Search must match the beginning of a line.
:::                Mostly used with literal searches.
:::
:::            E - The Search must match the end of a line.
:::                Mostly used with literal searches.
:::
:::            V - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEBVX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("v")>=0) {
  options=options.replace(/v/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("b")>=0) {
  options=options.replace(/b/g,"");
  search="^"+search
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=search+"$"
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:32:56.893

```
@ECHO OFF
SETLOCAL
SET "old=rise"
SET "new=deflate"
DEL newfile.txt /F /Q
FOR /f "delims=" %%i IN ('type somefile.txt^|findstr /n "$" ') DO (
ECHO %%i
SET line=%%i
CALL :replace
)

FC somefile.txt newfile.txt

GOTO :eof

:REPLACE
:: first replace all characters up to the colon by nothing
SET line=%line:*:=%
SET "withreplacements="
:loop
IF NOT DEFINED line >>newfile.txt ECHO(%withreplacements%&GOTO :EOF 
ECHO %line%|FINDSTR /b /l /c:"%old%" >NUL
IF ERRORLEVEL 1 SET withreplacements=%withreplacements%%line:~0,1%&SET line=%line:~1%&GOTO loop
SET withreplacements=%withreplacements%%new%
SET remove=%old%
:loploop
IF DEFINED remove SET remove=%remove:~1%&SET line=%line:~1%&GOTO loploop
GOTO loop 
```

这是一个比较简单的方法。它对某些字符有明显的敏感性，`"^&|<>`是问题——也许还有其他一些问题——但`space,;%!)(`看起来很好。

它通过对位于每行开头的usinf 编号来读取每一`FINDSTR`行`linenumber :`

删除该前缀并`withreplacements`逐个字符构建行

*   查看该行是否以目标`replaceme`字符串开头
*   如果它没有删除第一个字符，请将其放在正在构建的字符串的末尾
*   如果匹配，
    *   附加替换字符串
    *   复制要替换的字符串
    *   删除源字符串的第一个字符和复制到替换，直到复制到替换变为空

并重复直到原件`line`变空

是的 - 它很慢。但它有效。有点。

欢迎提出改进建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T18:49:35.557

我们都知道批处理文件有多重限制，因此创建通用解决方案很困难。因此，我总是首先尝试满足某个给定问题的特定要求。如果这是可能的，那么 Batch 的局限性为其他类似问题提供更通用的解决方案，而这些问题*目前没有被某人请求*，对吧？

下面的批处理文件对一个字符串进行区分大小写的替换，并且速度非常快，但是在包含以不同大小写组合（包括目标字符串）多次写入的原始字符串的行中，它会失败。我认为这种方法对于大多数有此要求的用户来说已经足够了。

```
@echo off
setlocal EnableDelayedExpansion

set /P "file=Enter file name: "
set /P "OldStr=Enter original text: "
set /P "NewStr=Enter new text: "

rem Get list of numbers of matching lines to replace
set n=0
for /F "delims=:" %%a in ('findstr /N /C:"%OldStr%" "%file%"') do (
   set /A n+=1
   set replace[!n!]=%%a
)
if %n% equ 0 (
   echo Original text not found in file
   goto :EOF
)
set /A n+=1
set replace[%n%]=0

rem Process all lines in the file
setlocal DisableDelayedExpansion
set i=1
(for /F "tokens=1* delims=:" %%a in ('findstr /N "^" "%file%"') do (
   set line=
   set "line=%%b"
   setlocal EnableDelayedExpansion
   rem If this line have the original string...
   for %%i in (!i!) do if %%a equ !replace[%%i]! (
      rem ... replace it and advance to next matching line number
      echo !line:%OldStr%=%NewStr%!
      endlocal & set /A i=%%i+1
   ) else (
      echo(!line!
      endlocal
   )
)) > "%file%_new.txt
rem If you want to replace the original file, remove REM from next line:
REM move /Y "%file%_new.txt" "%file%" 
```

例如，这个输入文件：

```
This line is not changed: Rise. 
No problem with special characters: & | < > ! " ^ 
This line is changed: rise
This line is not changed: RISE
This line is incorrectly changed: Rise & rise 
```

用“New Text”代替“rise”，产生：

```
This line is not changed: Rise. 
No problem with special characters: & | < > ! " ^ 
This line is changed: New Text
This line is not changed: RISE
This line is incorrectly changed: New Text & New Text 
```

# visual-c++ - c++ cli 十六进制编辑器可以工作，但速度很慢

> ID：15986003
> 
> 赞同：0
> 
> 时间：2013-04-13T08:50:53.747
> 
> 标签：visual-c++, user-interface, file-io, c++-cli, hex

我试图在 c++ cli 中构建一个十六进制编辑器，并让它将二进制文件读取到富文本框，并将二进制文件从富文本框写入空文件。它工作正常，但阅读速度很慢，尤其是写作。有人可以告诉我如何修复此代码或更好的方法一起完成这一切。

是的，我知道 256 if 语句会减慢写入速度，但我不知道如何转换数据 system::string 以将其写出。

作者需要大约 2 分钟来写入 50kb，而读者需要大约 10 秒来读取 50kb。我认为这真的很慢

谢谢

读者

```
if (openFileDialog1->ShowDialog() == System::Windows::Forms::DialogResult::OK) {

             richTextBox1->Text = "";

                 String^ datafile = openFileDialog1->FileName;

FileStream fs(datafile, FileMode::Open);

BinaryReader br(%fs);

String^ data;
String^ datatotal;

double progressBar1count = 0;
double length = fs.Length;

progressBar1->Maximum = 100;

unsigned char byte;

for (__int64 count = 0, count_max = fs.Length; count < count_max; ++count)

{

  byte = br.ReadByte();

  data = byte.ToString(L"x2");

  datatotal = datatotal + data;

  Application::DoEvents();

  progressBar1count += 1;

  progressBar1->Value = progressBar1count / length * 100;

             }

datatotal = datatotal->ToUpper();

richTextBox1->Text = datatotal;

                 }

             progressBar1->Value = 0; 
```

作家

```
if (saveFileDialog1->ShowDialog() == System::Windows::Forms::DialogResult::OK) {

    String^ datafile = saveFileDialog1->FileName;

String^ data = richTextBox1->Text;
double length = data->Length;

progressBar1->Maximum = 100;

int count = 0;
double countlength = 0;

string databasicstring;

fstream f(
    "C:\\users\\patchvista2\\b.exe",
    ios::out | ios::binary
    );

while (countlength < length - 1)

{

    String^ data = richTextBox1->Text;

    f.seekp(count, ios::beg );

    data = data->Substring(countlength , 2);

    count += 1;

  countlength += 2;

  progressBar1->Value = countlength / length * 100;

if (data == "00") {
     f.put(0x00);    
}

if (data == "01") {
     f.put(0x01);
}

if (data == "02") {
     f.put(0x02);
}

if (data == "03") {
     f.put(0x03);
}

if (data == "04") {
     f.put(0x04);
}

if (data == "05") {
    f.put(0x05);
}

if (data == "06") {
    f.put(0x06);
}

if (data == "07") {
    f.put(0x07);
}

if (data == "08") {
    f.put(0x08);
}

if (data == "09") {
    f.put(0x09);
}

if (data == "0A") {
    f.put(0x0A);
}

if (data == "0B") {
    f.put(0x0B);
}

if (data == "0C") {
    f.put(0x0C);
}

if (data == "0D") {
    f.put(0x0D);
}

if (data == "0E") {
    f.put(0x0E);
}

if (data == "0F") {
    f.put(0x0F);
}

if (data == "10") {
    f.put(0x10);
}

if (data == "11") {
    f.put(0x11);
}

if (data == "12") {
    f.put(0x12);
}

if (data == "13") {
    f.put(0x13);
}

if (data == "14") {
    f.put(0x14);
}

if (data == "15") {
    f.put(0x15);
}

if (data == "16") {
    f.put(0x16);
}

if (data == "17") {
    f.put(0x17);
}

if (data == "18") {
    f.put(0x18);
}

if (data == "19") {
    f.put(0x19);
}

if (data == "1A") {
    f.put(0x1A);
}

if (data == "1B") {
    f.put(0x1B);
}

if (data == "1C") {
    f.put(0x1C);
}

if (data == "1D") {
    f.put(0x1D);
}

if (data == "1E") {
    f.put(0x1E);
}

if (data == "1F") {
    f.put(0x1F);
}

if (data == "20") {
    f.put(0x20);
}

if (data == "21") {
    f.put(0x21);
}

if (data == "22") {
    f.put(0x22);
}

if (data == "23") {
    f.put(0x23);
}

if (data == "24") {
    f.put(0x24);
}

if (data == "25") {
    f.put(0x25);
}

if (data == "26") {
    f.put(0x26);
}

if (data == "27") {
    f.put(0x27);
}

if (data == "28") {
    f.put(0x28);
}

if (data == "29") {
    f.put(0x29);
}

if (data == "2A") {
    f.put(0x2A);
}

if (data == "2B") {
    f.put(0x2B);
}

if (data == "2C") {
    f.put(0x2C);
}

if (data == "2D") {
    f.put(0x2D);
}

if (data == "2E") {
    f.put(0x2E);
}

if (data == "2F") {
    f.put(0x2F);
}

if (data == "30") {
    f.put(0x30);
}

if (data == "31") {
    f.put(0x31);
}

if (data == "32") {
    f.put(0x32);
}

if (data == "33") {
    f.put(0x33);
}

if (data == "34") {
    f.put(0x34);
}

if (data == "35") {
    f.put(0x35);
}

if (data == "36") {
    f.put(0x36);
}

if (data == "37") {
    f.put(0x37);
}

if (data == "38") {
    f.put(0x38);
}

if (data == "39") {
    f.put(0x39);
}

if (data == "3A") {
    f.put(0x3A);
}

if (data == "3B") {
    f.put(0x3B);
}

if (data == "3C") {
    f.put(0x3C);
}

if (data == "3D") {
    f.put(0x3D);
}

if (data == "3E") {
    f.put(0x3E);
}

if (data == "3F") {
    f.put(0x3F);
}

if (data == "40") {
    f.put(0x40);
}

if (data == "41") {
    f.put(0x41);
}

if (data == "42") {
    f.put(0x42);
}

if (data == "43") {
    f.put(0x43);
}

if (data == "44") {
    f.put(0x44);
}

if (data == "45") {
    f.put(0x45);
}

if (data == "46") {
    f.put(0x46);
}

if (data == "47") {
    f.put(0x47);
}

if (data == "48") {
    f.put(0x48);
}

if (data == "49") {
    f.put(0x49);
}

if (data == "4A") {
    f.put(0x4A);
}

if (data == "4B") {
    f.put(0x4B);
}

if (data == "4C") {
    f.put(0x4C);
}

if (data == "4D") {
    f.put(0x4D);
}

if (data == "4E") {
    f.put(0x4E);
}

if (data == "4F") {
    f.put(0x4F);
}

if (data == "50") {
    f.put(0x50);
}

if (data == "51") {
    f.put(0x51);
}

if (data == "52") {
    f.put(0x52);
}

if (data == "53") {
    f.put(0x53);
}

if (data == "54") {
    f.put(0x54);
}

if (data == "55") {
    f.put(0x55);
}

if (data == "56") {
    f.put(0x56);
}

if (data == "57") {
    f.put(0x57);
}

if (data == "58") {
    f.put(0x58);
}

if (data == "59") {
    f.put(0x59);
}

if (data == "5A") {
    f.put(0x5A);
}

if (data == "5B") {
    f.put(0x5B);
}

if (data == "5C") {
    f.put(0x5C);
}

if (data == "5D") {
    f.put(0x5D);
}

if (data == "5E") {
    f.put(0x5E);
}

if (data == "5F") {
    f.put(0x5F);
}

if (data == "60") {
    f.put(0x60);
}

if (data == "61") {
    f.put(0x61);
}

if (data == "62") {
    f.put(0x62);
}

if (data == "63") {
    f.put(0x63);
}

if (data == "64") {
    f.put(0x64);
}

if (data == "65") {
    f.put(0x65);
}

if (data == "66") {
    f.put(0x66);
}

if (data == "67") {
    f.put(0x67);
}

if (data == "68") {
    f.put(0x68);
}

if (data == "69") {
    f.put(0x69);
}

if (data == "6A") {
    f.put(0x6A);
}

if (data == "6B") {
    f.put(0x6B);
}

if (data == "6C") {
    f.put(0x6C);
}

if (data == "6D") {
    f.put(0x6D);
}

if (data == "6E") {
    f.put(0x6E);
}

if (data == "6F") {
    f.put(0x6F);
}

if (data == "70") {
    f.put(0x70);
}

if (data == "71") {
    f.put(0x71);
}

if (data == "72") {
    f.put(0x72);
}

if (data == "73") {
    f.put(0x73);
}

if (data == "74") {
    f.put(0x74);
}

if (data == "75") {
    f.put(0x75);
}

if (data == "76") {
    f.put(0x76);
}

if (data == "77") {
    f.put(0x77);
}

if (data == "78") {
    f.put(0x78);
}

if (data == "79") {
    f.put(0x79);
}

if (data == "7A") {
    f.put(0x7A);
}

if (data == "7B") {
    f.put(0x7B);
}

if (data == "7C") {
    f.put(0x7C);
}

if (data == "7D") {
    f.put(0x7D);
}

if (data == "7E") {
    f.put(0x7E);
}

if (data == "7F") {
    f.put(0x7F);
}

if (data == "80") {
    f.put(0x80);
}

if (data == "81") {
    f.put(0x81);
}

if (data == "82") {
    f.put(0x82);
}

if (data == "83") {
    f.put(0x83);
}

if (data == "84") {
    f.put(0x84);
}

if (data == "85") {
    f.put(0x85);
}

if (data == "86") {
    f.put(0x86);
}

if (data == "87") {
    f.put(0x87);
}

if (data == "88") {
    f.put(0x88);
}

if (data == "89") {
    f.put(0x89);
}

if (data == "8A") {
    f.put(0x8A);
}

if (data == "8B") {
    f.put(0x8B);
}

if (data == "8C") {
    f.put(0x8C);
}

if (data == "8D") {
    f.put(0x8D);
}

if (data == "8E") {
    f.put(0x8E);
}

if (data == "8F") {
    f.put(0x8F);
}

if (data == "90") {
    f.put(0x90);
}

if (data == "91") {
    f.put(0x91);
}

if (data == "92") {
    f.put(0x92);
}

if (data == "93") {
    f.put(0x93);
}

if (data == "94") {
    f.put(0x94);
}

if (data == "95") {
    f.put(0x95);
}

if (data == "96") {
    f.put(0x96);
}

if (data == "97") {
    f.put(0x97);
}

if (data == "98") {
    f.put(0x98);
}

if (data == "99") {
    f.put(0x99);
}

if (data == "9A") {
    f.put(0x9A);
}

if (data == "9B") {
    f.put(0x9B);
}

if (data == "9C") {
    f.put(0x9C);
}

if (data == "9D") {
    f.put(0x9D);
}

if (data == "9E") {
    f.put(0x9E);
}

if (data == "9F") {
    f.put(0x9F);
}

if (data == "A0") {
    f.put(0xA0);
}

if (data == "A1") {
    f.put(0xA1);
}

if (data == "A2") {
    f.put(0xA2);
}

if (data == "A3") {
    f.put(0xA3);
}

if (data == "A4") {
    f.put(0xA4);
}

if (data == "A5") {
    f.put(0xA5);
}

if (data == "A6") {
    f.put(0xA6);
}

if (data == "A7") {
    f.put(0xA7);
}

if (data == "A8") {
    f.put(0xA8);
}

if (data == "A9") {
    f.put(0xA9);
}

if (data == "AA") {
    f.put(0xAA);
}

if (data == "AB") {
    f.put(0xAB);
}

if (data == "AC") {
    f.put(0xAC);
}

if (data == "AD") {
    f.put(0xAD);
}

if (data == "AE") {
    f.put(0xAE);
}

if (data == "AF") {
    f.put(0xAF);
}

if (data == "B0") {
    f.put(0xB0);
}

if (data == "B1") {
    f.put(0xB1);
}

if (data == "B2") {
    f.put(0xB2);
}

if (data == "B3") {
    f.put(0xB3);
}

if (data == "B4") {
    f.put(0xB4);
}

if (data == "B5") {
    f.put(0xB5);
}

if (data == "B6") {
    f.put(0xB6);
}

if (data == "B7") {
    f.put(0xB7);
}

if (data == "B8") {
    f.put(0xB8);
}

if (data == "B9") {
    f.put(0xB9);
}

if (data == "BA") {
    f.put(0xBA);
}

if (data == "BB") {
    f.put(0xBB);
}

if (data == "BC") {
    f.put(0xBC);
}

if (data == "BD") {
    f.put(0xBD);
}

if (data == "BE") {
    f.put(0xBE);
}

if (data == "BF") {
    f.put(0xBF);
}

if (data == "C0") {
    f.put(0xC0);
}

if (data == "C1") {
    f.put(0xC1);
}

if (data == "C2") {
    f.put(0xC2);
}

if (data == "C3") {
    f.put(0xC3);
}

if (data == "C4") {
    f.put(0xC4);
}

if (data == "C5") {
    f.put(0xC5);
}

if (data == "C6") {
    f.put(0xC6);
}

if (data == "C7") {
    f.put(0xC7);
}

if (data == "C8") {
    f.put(0xC8);
}

if (data == "C9") {
    f.put(0xC9);
}

if (data == "CA") {
    f.put(0xCA);
}

if (data == "CB") {
    f.put(0xCB);
}

if (data == "CC") {
    f.put(0xCC);
}

if (data == "CD") {
    f.put(0xCD);
}

if (data == "CE") {
    f.put(0xCE);
}

if (data == "CF") {
    f.put(0xCF);
}

if (data == "D0") {
    f.put(0xD0);
}

if (data == "D1") {
    f.put(0xD1);
}

if (data == "D2") {
    f.put(0xD2);
}

if (data == "D3") {
    f.put(0xD3);
}

if (data == "D4") {
    f.put(0xD4);
}

if (data == "D5") {
    f.put(0xD5);
}

if (data == "D6") {
    f.put(0xD6);
}

if (data == "D7") {
    f.put(0xD7);
}

if (data == "D8") {
    f.put(0xD8);
}

if (data == "D9") {
    f.put(0xD9);
}

if (data == "DA") {
    f.put(0xDA);
}

if (data == "DB") {
    f.put(0xDB);
}

if (data == "DC") {
    f.put(0xDC);
}

if (data == "DD") {
    f.put(0xDD);
}

if (data == "DE") {
    f.put(0xDE);
}

if (data == "DF") {
    f.put(0xDF);
}

if (data == "E0") {
    f.put(0xE0);
}

if (data == "E1") {
    f.put(0xE1);
}

if (data == "E2") {
    f.put(0xE2);
}

if (data == "E3") {
    f.put(0xE3);
}

if (data == "E4") {
    f.put(0xE4);
}

if (data == "E5") {
    f.put(0xE5);
}

if (data == "E6") {
    f.put(0xE6);
}

if (data == "E7") {
    f.put(0xE7);
}

if (data == "E8") {
    f.put(0xE8);
}

if (data == "E9") {
    f.put(0xE9);
}

if (data == "EA") {
    f.put(0xEA);
}

if (data == "EB") {
    f.put(0xEB);
}

if (data == "EC") {
    f.put(0xEC);
}

if (data == "ED") {
    f.put(0xED);
}

if (data == "EE") {
    f.put(0xEE);
}

if (data == "EF") {
    f.put(0xEF);
}

if (data == "F0") {
    f.put(0xF0);
}

if (data == "F1") {
    f.put(0xF1);
}

if (data == "F2") {
    f.put(0xF2);
}

if (data == "F3") {
    f.put(0xF3);
}

if (data == "F4") {
    f.put(0xF4);
}

if (data == "F5") {
    f.put(0xF5);
}

if (data == "F6") {
    f.put(0xF6);
}

if (data == "F7") {
    f.put(0xF7);
}

if (data == "F8") {
    f.put(0xF8);
}

if (data == "F9") {
    f.put(0xF9);
}

if (data == "FA") {
    f.put(0xFA);
}

if (data == "FB") {
    f.put(0xFB);
}

if (data == "FC") {
    f.put(0xFC);
}

if (data == "FD") {
    f.put(0xFD);
}

if (data == "FE") {
    f.put(0xFE);
}

if (data == "FF") {
    f.put(0xFF);
}

}

f.close();

progressBar1->Value = 0;

MessageBox::Show("done saving the file");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:20:41.147

### 作家

首先，如果您不在编写`String^ data = richTextBox1->Text;`器端的循环的每次迭代开始时分配，您可以节省时间。相反，为什么不声明另一个变量 ( `temp`) 并保持`data`不变以减少赋值操作？例如：

```
String temp;
temp = data->Substring(countlength , 2); 
```

然后，您可以有效地`data = data->Substring(countlength , 2);`从编写器例程中的循环开头删除。

其次，熟悉[strtol()](http://www.cplusplus.com/reference/cstdlib/strtol/)。该函数可以有效地将字符串 ( `char *`) 转换为任意基数的整数。例如：

```
char * string = "0f";
int num = strtol(string, NULL, 16); //Using base 16 (hex) 
```

`num`int 这种情况下将是`15`或`0x0F`十六进制。这将基本上取代你的`if`声明堆。

### 读者

减少调用，`Application::DoEvents();`因为如果您不需要每次读入一个字节时都重新绘制，那么这太昂贵了。相反，例如以 10% 的间隔重新绘制。每次迭代都需要付出高昂代价，`progressBar1->Value = progressBar1count / length * 100;`但这也与整个重绘概念有关。换句话说，**以比每个字节更合理的间隔更新您的 GUI**。

*编辑 1：更改`strtol(s, NULL, 16)`为`strtol(string, NULL, 16)`
编辑 2：将答案分成读/写部分。*

# c# - 新窗口中的 WPF 进度条

> ID：15986009
> 
> 赞同：1
> 
> 时间：2013-04-13T08:51:20.657
> 
> 标签：c#, wpf, progress-bar

我是 WPF 的新手。现在，我必须在主窗口的新窗口中创建一个进度条，但我不知道如何让它在新窗口中运行进度。

下面是我在 mainwindow.xaml.cs 中的声明：

```
 progressWnd = new ProgressDownloadWindow(cnt_s);
   progressWnd.Owner = this;
   progressWnd.ShowDialog();
   foreach (var dl in this.dldatagrid.SelectedItems)
   {
        string fileName = dl.path;
        this.Download(fileName, false, date);
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:15:55.100

`ProgressBar`公开了一个名为 的属性，`Value`您可以使用它来设置进度条的值。所以你需要像

```
foreach (var dl in this.dldatagrid.SelectedItems)
{ 
    string fileName = dl.path;
    this.Download(fileName, false, date);
    progressbar.Value++;
} 
```

除此之外，您的系统将无法正常工作，因为您正在使用`ShowDialog()`它创建一个模态对话框并且父窗口将被阻止。因此，您需要使用新窗口创建窗口`Dispatcher`并在另一个线程上运行它以使其在您进行下载时工作。

查看[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.progressbar.aspx)以供参考。

# javascript - how to get element height in mootools 1.1

> ID：15986010
> 
> 赞同：0
> 
> 时间：2013-04-13T08:51:22.060
> 
> 标签：javascript, mootools

I am trying to get the height of a `li`, am new to **mootools** and using version 1.1...

My Code which have tried:-

```
window.addEvent('domready', function(){ 
   alert($('#slider_more li').getSize().y);
});

myMore.start(425*2); //and implement in the place of 425 
```

Also want to know if their is a feature with mootools as height set to auto??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:45:52.790

Try `$$('#slider_more li')[0].getSize().size.y`.

[http://jsfiddle.net/SW3tP/1/](http://jsfiddle.net/SW3tP/1/)

# java - 当我期待 403 时，Google App Engine 请求返回状态代码 200

> ID：15986016
> 
> 赞同：0
> 
> 时间：2013-04-13T08:52:11.373
> 
> 标签：java, android, google-app-engine

我正在制作一个向谷歌应用引擎服务发出请求的安卓应用。该服务需要使用谷歌帐户进行身份验证。

我可以对用户进行身份验证并毫无问题地发出请求。但我不想在每个请求之前进行身份验证，我宁愿先检查它是否在身份验证失败。

我提出这样的要求：

```
HttpPost httpPost = new HttpPost(url);
httpPost.setEntity(new StringEntity(jsonString));
httpPost.setHeader("Accept", "application/json");
httpPost.setHeader("Content-type", "application/json");
HttpResponse response = httpClient.execute(httpPost);
int statusCode = response.getStatusLine().getStatusCode();
switch(statusCode)
{
    case HttpStatus.SC_OK:
    {
        //handle result
        break;
    }
    case HttpStatus.SC_FORBIDDEN:
    {
    //handle authentication and request again
        break;
    }
} 
```

我总是返回的状态码是 200 (HttpStatus.SC_OK)。如果我阅读响应中的内容，则它是默认的应用引擎帐户登录页面。我在这里缺少什么吗？为什么我得到状态码 200 而不是 403？

# c# - 如果您有与系统具有相同字节序的数据，您可以简单地将 1-1 字节映射为整数类型吗？

> ID：15986018
> 
> 赞同：0
> 
> 时间：2013-04-13T08:52:19.627
> 
> 标签：c#, endianness

我正在编写一个类，它可以让我在字节和各种整数数据类型之间进行转换。我没有选择反转数组然后转换数据，而是选择确定系统的字节顺序是否与数据相同。如果是，我只需将数据映射到整数，例如 64 位整数：

```
result = (long)(
    (buffer[index] << 56) |
    (buffer[index + 1] << 48) |
    (buffer[index + 2] << 40) |
    (buffer[index + 3] << 32) |
    (buffer[index + 4] << 24) |
    (buffer[index + 5] << 16) |
    (buffer[index + 6] << 8) |
    (buffer[index + 7])); 
```

如果系统和数据的字节序不同，它会像这样颠倒过来：

```
result = (long)(
    (buffer[index]) |
    (buffer[index + 1] << 8) |
    (buffer[index + 2] << 16) |
    (buffer[index + 3] << 24) |
    (buffer[index + 4] << 32) |
    (buffer[index + 5] << 40) |
    (buffer[index + 6] << 48) |
    (buffer[index + 7] << 56)); 
```

`result`是一个 64 位有符号整数

`buffer`是一个字节数组

`index`是一个 32 位有符号整数，指示缓冲区中开始读取的位置

我的问题是......我做错了还是这只是一种非常简单的转换方法，而无需反转数组或制作副本？

这似乎应该适用于系统和数据字节序的所有组合，并在两者之间正确转换。

是否有可能更容易阅读或更简单的不同方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:15:43.420

您可以反转数组，而不是反转数组`long`（使用 a 会稍微容易一些`ulong`）：

```
ulong raw = BitConverter.ToUInt64(array, pos);
if (wrong_endian)
{
    // swap groups of 4
    raw = (raw >> 32) | (raw << 32);
    // swap groups of 2
    raw = ((raw >> 16) & 0x0000FFFF0000FFFF) | ((raw << 16) &0xFFFF0000FFFF0000);
    // swap groups of 1
    raw = ((raw >> 8) & 0x00FF00FF00FF00FF) | ((raw << 8) & 0xFF00FF00FF00FF00);
} 
```

代码没有经过测试，但你明白了。反转整数而不是数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T08:59:43.500

您可以轻松使用BitConverter[类。](http://msdn.microsoft.com/en-us/library/system.bitconverter.aspx)

这是一个直接来自[这里](http://msdn.microsoft.com/en-us/library/bb384066.aspx)的示例。

```
byte[] bytes = { 0, 0, 0, 25 };

// If the system architecture is little-endian (that is, little end first), 
// reverse the byte array. 
if (BitConverter.IsLittleEndian)
    Array.Reverse(bytes);

int i = BitConverter.ToInt32(bytes, 0);
Console.WriteLine("int: {0}", i);
// Output: int: 25 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T09:11:52.737

是的，你做得对。（评论中提到的bug除外）

代码很简单，但可能不短。如果您想要更少的行，可以这样做：

```
result = 0;
for(var i = 0; i < 8; i++)
    result |= (long)buffer[index + i] << (8*i); 
```

并希望编译器确实循环展开。其他代码类似：

```
result = 0;
for(var i = 0; i < 8; i++)
    result |= (long)buffer[index + i] << (56 - 8*i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T09:53:07.513

在整数及其字节表示之间进行转换时，主要有两种情况：

## 原生字节序

这通常是与本机代码互操作时的情况。使用自然使用原生字节序的代码，例如`Buffer.BlockCopy`, `BitConverter.ToBytes`/`ToInt64`和不安全的代码。在某些情况下，p/invoke marshaller 可以为您完成大部分工作。

## 固定字节序

这通常是解析文件或网络协议时的情况。在这种情况下，您的代码片段（减去转换错误）是处理它的理想方式。给他们一个提及字节序的名称，例如`ToInt64BitEndian`.

它们易于理解、易于测试（不依赖于系统字节序）并且速度相当快。

有时它可以提高使用`Buffer.BlockCopy`或不安全的重新解释强制转换的性能，但我只会在分析后使用那些表明此代码存在瓶颈的。在我的程序中，这从来都不是瓶颈，所以我使用的代码与您的示例非常相似。

我不喜欢为此使用基于反转的代码，因为大端系统的代码路径不会在典型的小端系统上运行。

* * *

ErrataRob[对沉默圈的代码审查](http://erratasec.blogspot.de/2013/02/silent-circle-and-inexperienced.html)提出了类似的观点，详细说明了一点：

> 协议解析与 CPU 无关。没有理由根据 CPU 做不同的事情。
> 
> ## 强制转换和字节交换
> 
> 执行上述`#if`条件的错误来自于试图修复在`char*`and之间转换的潜在错误`int*`。这是“UNIX 网络编程”课程中教授的一种常用技术。这也是错误的。解析数据包时永远不要这样做。
> 
> 避免这种情况有两个原因。首先是（如上所述）某些 CPU，例如 SPARC 和某些版本的 ARM 在引用未对齐的整数时会崩溃。这使得 RISC 系统上的网络代码不稳定，因为大多数整数通常无论如何都是对齐的，这意味着许多对齐问题会在未检测到的情况下逃逸到运输代码中。制作稳定代码的唯一方法是停止在网络（或文件）解析器中转换整数。
> 
> 第二个问题是它会导致与字节顺序/字节序混淆，如果您不强制转换整数，则不会发生这种情况。考虑 IP 地址“10.1.2.3”。这个数字只有两种形式，要么是值为 的整数，要么是`0x0a010203`值为 0a 01 02 03 的字节数组。问题是小端机器很奇怪。整数`0x0a010203`在内部表示为`03 02 01 0a`x86 处理器，字节顺序“交换”。
> 
> 但这只是您永远不需要担心的内部细节。只要您从不跨越流并从 a`char*`转换为 a `int*`（或相反），那么字节顺序/字节序就无关紧要。

# java - 找不到播放器 :vfw:Microsoft WDM Image Capture (Win32):0

> ID：15986023
> 
> 赞同：1
> 
> 时间：2013-04-13T08:52:47.733
> 
> 标签：java, webcam, jmf

我正在尝试使用您的网络摄像头拍照，但出现错误：

> javax.media.NoPlayerException：找不到播放器：vfw：Microsoft WDM 图像捕获（Win32）：0

我有一个简单的标准代码：

```
public class Main extends JFrame {

    Player player;

    Main() {
        addWindowListener(new WindowAdapter() {

            @Override
            public void windowClosing(WindowEvent e) {
                try{
                    player.stop();
                    player.deallocate();
                    player.close();
                }catch(Exception ex){}
                System.exit(0);
            }
        });
        setSize(640, 480);
        JPanel panel = (JPanel) getContentPane();
        panel.setLayout(new BorderLayout());
        String mediaFile = "vfw:Microsoft WDM Image Capture (Win32):0";
        try {
            MediaLocator mlr = new MediaLocator(mediaFile);
            player = Manager.createRealizedPlayer(mlr);
            player.setRate(100);
            if (player.getVisualComponent() != null) {
                panel.add("Center", player.getVisualComponent());
            }
            if (player.getControlPanelComponent() != null) {
                panel.add("South", player.getControlPanelComponent());
            }
        } catch (Exception e) {
            System.err.println("Got exception " + e);
        }
    }

    public static void main(String[] args) {
        Main m = new Main();
        m.setVisible(true);
    }
} 
```

我已经检查过 JMF Registry，相机匹配，这是毫无疑问的：

> 名称 = vfw:Microsoft WDM 图像捕获 (Win32):0
> 
> 定位器 = vfw://0

并且JMStudio也正常工作并显示视频

我还阅读了这个关于**jmf.propertis**的页面，并将该文件放在 Eclipse 项目的**根目录**中，以及根**src中**

> [使用 JMF 访问网络摄像头？](https://stackoverflow.com/questions/6313911/accessing-webcams-with-jmf)

现在我不知道为什么它不能工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-14T09:49:27.487

1.  需要在windows环境变量中设置java路径为32bit jdk。
2.  然后使用 JMF 来捕获设备
3.  将正确的 JMF jar 添加到项目中
4.  运行项目。

它对我有用。

# sql-server-2005 - 更新 SQL Server 中的表集列

> ID：15986024
> 
> 赞同：0
> 
> 时间：2013-04-13T08:52:52.710
> 
> 标签：sql-server-2005

在 SQL Server 2005 中，我有两个表：

`A (ID, PRODUCT)` `B(ID_2, PRODUCT)`

现在我想`update table A.ID`和`Set A.ID=B.ID_2 where A.Product =B.Product`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:59:27.603

您可以使用`INNER JOIN`

```
UPDATE A
SET A.ID = B.ID_2
FROM A
INNER JOIN B ON B.Product = A.Product 
```

# python - django 编辑页面和更新

> ID：15986031
> 
> 赞同：0
> 
> 时间：2013-04-13T08:53:48.150
> 
> 标签：python, django

我有一个 HTML 页面，它显示从我的数据库中获取的详细信息，该数据库已经存储。我必须编辑我的详细信息，并且详细信息必须替换我的旧内容 id db（即；过度写入同一字段）。我正在使用 MySQL 数据库。我已经添加了我的代码。当我提交表单时，它没有更新到数据库中。检查一下，这段代码是否正确？

### 模型.py

```
class js_details(models.Model):
    user      = models.ForeignKey(User, unique=True)
    #PERSONAL INFO
    fname     = models.CharField(max_length=30)
    contactno = models.IntegerField(max_length=30)
    emailid   = models.EmailField(max_length=30)
    dob       = models.IntegerField(max_length=30) 
```

### 表格.py

```
class EditForm(forms.ModelForm):
class Meta:
    model = js_details
    exclude = ('user') 
```

### 视图.py

```
def editresume(request):
    user = request.user
    profile_info = js_details.objects.filter(user_id=user)
    profile_data = { "profile_detail" : profile_info }
    if request.method == "POST":
        edit = EditForm(request.POST, request.FILES, instance = request.user.get_profile())

        if edit.is_valid():
            edit.save()        
            return HttpResponseRedirect('/accounts/Profile/')
    else:
        edit = EditForm(instance = request.user.get_profile())
    return render_to_response('registration/personal_information.html', profile_data, context_instance=RequestContext(request)) 
```

### 个人信息.html

```
<h4> Personal Details</h4>
<table width="90%" border="0">
    <tr>
        <td width="30%">
            <p> Name </p>
            <p> Contact Number </p>
            <p> Email ID</p>
            <p>DateOfBirth</p>
        </td>
        <td width="30%">
            <p>{% for detail in profile_detail %}{{ detail.fname}} {{ detail.lastname}}{% endfor %}</p>
            <p>{% for detail in profile_detail %}{{ detail.pri_contact }}{% endfor %}</p>
            <p>{{ user.email }}</p>
            <p>{% for detail in profile_detail %}{{ detail.dob }}{% endfor %}</p>
        </td>
        <td width="30%">
            <p><a href="">Edit</a></p>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:08:23.510

好的，你想显示一个带有表单的 html 页面，允许用户更改他们的设置。

所以我们要做的是：

1.  如果有请求（即用户发送表单），则处理它。
2.  如果没有请求，请显示表单。

Django 已经有一个[内置的表单库](https://docs.djangoproject.com/en/dev/topics/forms/)，可以帮助您 (1) 显示表单和 (2) 检查数据是否有错误。这是一个使用它的简单[教程](http://www.djangobook.com/en/2.0/chapter07.html)。

现在这是您可以用来执行此操作的伪代码。

## #views.py

```
if there is a request (request.method == "POST")
    get your form
    if the data is correct (form.is_valid())
       retreive the data from your form
       save it it your db
    else
       render your html and pass the form you retrieved (that will display errors)
else
    render and pass a blank form 
```

## #forms.py

```
class myform
    different inputs 
```

## #html 文件

```
{% if form.errors %}
    <p style="color: red;">{{ form.errors}}</p>
{% endif %}

<form action="." method="POST">{% csrf_token %}
    {{ form.as_p }}
<input type="submit" name="formname" value="Edit !">
</form> 
```

如果您想了解更多详情，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:05:40.890

您需要为 js_details 定义一个 Form o ModelForm。此表单允许用户编辑 js_details 数据。然后，定义一个处理此表单的新视图，以从以前的表单更新数据库数据。以 profile_edit.html 所需的形式从 post 操作中引用此新视图。

# c# - DateTime 模型绑定器，适用于 IE 和 Chrome，但不适用于 Firefox

> ID：15986033
> 
> 赞同：0
> 
> 时间：2013-04-13T08:53:59.477
> 
> 标签：c#, asp.net

我创建了一个 DefaultModelBinder 来使用 DateTime

格式为“dd-MM-yyyy”

这个 DefaultModelBinder 可以在 IE 和 Chrome 上正常工作，

但它在 Firefox 中不起作用？？

有关此的任何帮助。

更新：{按要求}

```
public class DateTimeBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var vpr = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);

        if (vpr == null)
        {
            return null;

        }

        var date = vpr.AttemptedValue;

        if (String.IsNullOrEmpty(date))
        {
            return null;
        }

        bindingContext.ModelState.SetModelValue(bindingContext.ModelName, bindingContext.ValueProvider.GetValue(bindingContext.ModelName));

        try
        {
            var realDate = DateTime.Parse(date, System.Globalization.CultureInfo.GetCultureInfoByIetfLanguageTag("en-GB"));

            bindingContext.ModelState.SetModelValue(bindingContext.ModelName, new ValueProviderResult(date, realDate.ToString("yyyy-MM-dd hh:mm:ss"), System.Globalization.CultureInfo.GetCultureInfoByIetfLanguageTag("en-GB")));

            return realDate;
        }
        catch (Exception e)
        {
            bindingContext.ModelState.AddModelError(bindingContext.ModelName, e);
            return null;
        }

    }
} 
```

全球.asax：

```
 ModelBinders.Binders.Add(typeof(DateTime), new DateTimeBinder());
        ModelBinders.Binders.Add(typeof(DateTime?), new DateTimeBinder()); 
```

更新 2：[图片添加]

火狐： ![火狐图片](https://i.stack.imgur.com/A7NZG.png)

这是 Firefox 中的验证问题。

IE浏览器 ： ![Internet Explorer 图像](https://i.stack.imgur.com/EAtNy.png)

注意：请求没有被发送到服务器，这是来自 MVC 的客户端验证，它在 FIREFOX 中显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:43:11.200

我得到了这个问题的答案，嗯，它只是浏览器使用不同的文化，我的 firefox 使用文化作为“英语（en）”，但我无法完全解决这个问题，因为我不知道如何禁用这个错误。

我正在考虑为日期使用隐藏字段，然后使用文本框，以便用户可以使用 Jquery UI 输入日期，并且在提交期间我可以处理日期并将其更改为 yyyy-MM-dd。

谢谢你们的帮助。

# ruby-on-rails - ROR Wicked_pdf 在 webfaction 中生成框而不是 kannada 字体

> ID：15986037
> 
> 赞同：0
> 
> 时间：2013-04-13T08:54:08.617
> 
> 标签：ruby-on-rails, fonts, wicked-pdf, webfaction

在一个应用程序中，我们使用 wicked_pdf gem 生成 PDF。PDF 的内容为“卡纳达语”语言。在本地机器上，我们总是能在 pdf 中获得正确的字体。但是，当我们从部署在 webfaction 中的应用程序生成 PDF 时，我们会在 pdf 中获得框。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:55:01.750

pdf 中的内容在嵌入式 webkit 浏览器的服务器上呈现。

在客户端，您的机器可能拥有所有正确的字体。

您的服务器可能需要安装正确的系统字体集。

# ios - 为什么我会收到键值编码合规性错误？

> ID：15986040
> 
> 赞同：0
> 
> 时间：2013-04-13T08:54:36.947
> 
> 标签：ios, xcode, cocoa-touch, key-value-coding

在运行时，我的应用程序抛出此错误：

> 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[<UIApplication 0x84231f0> setValue:forUndefinedKey:]：此类与键 count1 的键值编码不兼容。

有问题的 count1 是一个标签属性。

```
@property (strong, nonatomic) IBOutlet UILabel *count1; 
```

我在 .xib 文件中链接到它，除了声明之外，我已经注释掉了该属性的每一次使用，但错误仍然存​​在。如果我完全删除该属性，我会遇到相同的异常问题，但关键现在是“查看”而不是 count1。

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:15:21.390

正在访问该属性`UIApplication`。无论你在哪里声明`count1`，它都不在`UIApplication`。它可能是 的自定义子类`UIApplication`，但您不能更改`UIApplication`自己。

因此，`count1`当您打算在某个其他对象上访问应用程序对象上的属性时，或者您打算使用自定义应用程序对象但您实际上并没有这样做。如果您打算`UIApplication`为您的应用程序对象使用自定义子类，请务必将该类的名称传递给`UIApplicationMain()`. 否则，您可能错误地连接了插座。

# javascript - 输入类型 =“文件”.submit() 不工作 IE8

> ID：15986048
> 
> 赞同：0
> 
> 时间：2013-04-13T08:55:29.353
> 
> 标签：javascript, jquery, internet-explorer-8

这让我发疯了。适用于一切，除了... IE8 :( 出现文件选择（非图像不会被过滤掉 IE8，但这是另一个问题），但是当您选择图像时，不会触发上传脚本，不会上传任何内容。

$("body").addClass("loading"); 被触发（这是加载模式），所以我不知道什么时候 image-upload.php 没有运行。

谢谢各位:)

Javascript：

```
var wrapper = $('<div/>').css({height:0,width:0,'overflow':'hidden'});
var fileInput = $('#file').wrap(wrapper);

$('.chooseFile').click(function(){
 fileInput.click();
}).show();

$(document).ready(function() {
 fileInput.change(function () 
  { 
   $("body").addClass("loading");
   //uploadImg.submit();
   $('#uploadImg').submit();
   this.blur();
   this.focus();
  });
}); 
```

HTML

```
<form name="uploadImg" id="uploadImg" action="image-upload.php" method="post" enctype="multipart/form-data" class="btnFile">
 <div class="chooseFile">Choose File</div>
 <input type="file" id="file" name="file" value="Select File to Upload" accept="image/*">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:01:05.260

你需要使用

```
var wrapper = $('<div/>').css({height:0,width:0,'overflow':'hidden'});
var fileInput = $('#file').wrap(wrapper);
$('.chooseFile').click(function(){
 fileInput.click();
}).show(); 
```

里面

```
$(document).ready(function() { 
```

# java - 如何使用 Jena 将 .owl 文件导入 Eclipse 并创建它的实例

> ID：15986051
> 
> 赞同：3
> 
> 时间：2013-04-13T08:55:49.580
> 
> 标签：java, eclipse, jena, ontology

嗨，我已经使用 protege（.owl 文件）创建了一个本体。现在我希望将它导入一个 java 程序（在 eclipse 上使用 jena）并创建它的实例（我的意思是我的本体代表了一些通用的东西，范围状态，实例应代表特定状态。）需要导入和创建。

稍后我计划比较用户输入（包含实例的文件）并输出该实例所处的状态。

我对此很陌生，非常新。因此，感谢所有帮助。

谢谢

owl文件的内容如下：

```
<?xml version="1.0"?>

 <!DOCTYPE rdf:RDF [
 <!ENTITY owl "http://www.w3.org/2002/07/owl#" >
 <!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
 <!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >
 <!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >
 <!ENTITY Ontology1365003423152 "http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#" >
]>

<rdf:RDF xmlns="http://www.w3.org/2002/07/owl#"
     xml:base="http://www.w3.org/2002/07/owl"
  xmlns:Ontology1365003423152="http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
 xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns:owl="http://www.w3.org/2002/07/owl#">
<Ontology rdf:about="http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl"/>

<!-- 
///////////////////////////////////////////////////////////////////////////////////////
//
// Datatypes
//
///////////////////////////////////////////////////////////////////////////////////////
 -->

<!-- 
///////////////////////////////////////////////////////////////////////////////////////
//
// Data properties
//
///////////////////////////////////////////////////////////////////////////////////////
 -->

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#HasDuration -->

<DatatypeProperty rdf:about="&Ontology1365003423152;HasDuration">
    <rdf:type rdf:resource="&owl;FunctionalProperty"/>
    <rdfs:domain rdf:resource="&Ontology1365003423152;Attack"/>
    <rdfs:range rdf:resource="&xsd;positiveInteger"/>
</DatatypeProperty>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#HasFlag -->

<DatatypeProperty rdf:about="&Ontology1365003423152;HasFlag">
    <rdf:type rdf:resource="&owl;FunctionalProperty"/>
    <rdfs:domain rdf:resource="&Ontology1365003423152;Attack"/>
    <rdfs:range rdf:resource="&xsd;string"/>
</DatatypeProperty>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#HasProtocol -->

<DatatypeProperty rdf:about="&Ontology1365003423152;HasProtocol">
    <rdf:type rdf:resource="&owl;FunctionalProperty"/>
    <rdfs:domain rdf:resource="&Ontology1365003423152;Attack"/>
    <rdfs:range rdf:resource="&xsd;string"/>
</DatatypeProperty>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#HasService -->

<DatatypeProperty rdf:about="&Ontology1365003423152;HasService">
    <rdf:type rdf:resource="&owl;FunctionalProperty"/>
    <rdfs:domain rdf:resource="&Ontology1365003423152;Attack"/>
    <rdfs:range rdf:resource="&xsd;string"/>
</DatatypeProperty>

<!-- 
///////////////////////////////////////////////////////////////////////////////////////
//
// Classes
//
///////////////////////////////////////////////////////////////////////////////////////
 -->

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#0 -->

<Class rdf:about="&Ontology1365003423152;0">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackDuration"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#1 -->

<Class rdf:about="&Ontology1365003423152;1">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackDuration"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#2 -->

<Class rdf:about="&Ontology1365003423152;2">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackDuration"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#6 -->

<Class rdf:about="&Ontology1365003423152;6">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackDuration"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Attack -->

<Class rdf:about="&Ontology1365003423152;Attack"/>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#AttackDuration -->

<Class rdf:about="&Ontology1365003423152;AttackDuration"/>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#AttackFlag -->

<Class rdf:about="&Ontology1365003423152;AttackFlag"/>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#AttackProtocolType -->

<Class rdf:about="&Ontology1365003423152;AttackProtocolType"/>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#AttackService -->

<Class rdf:about="&Ontology1365003423152;AttackService"/>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Domain_u -->

<Class rdf:about="&Ontology1365003423152;Domain_u">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackService"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Eco_i -->

<Class rdf:about="&Ontology1365003423152;Eco_i">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackService"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Ecr_i -->

<Class rdf:about="&Ontology1365003423152;Ecr_i">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackService"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Finger -->

<Class rdf:about="&Ontology1365003423152;Finger">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackService"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Ftp_data -->

<Class rdf:about="&Ontology1365003423152;Ftp_data">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackService"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Http -->

<Class rdf:about="&Ontology1365003423152;Http">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackService"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Icmp -->

<Class rdf:about="&Ontology1365003423152;Icmp">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackProtocolType"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Mailbomb -->

<Class rdf:about="&Ontology1365003423152;Mailbomb">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;Attack"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#NoAttack -->

<Class rdf:about="&Ontology1365003423152;NoAttack">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;Attack"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Private -->

<Class rdf:about="&Ontology1365003423152;Private">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackService"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#SF -->

<Class rdf:about="&Ontology1365003423152;SF">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackFlag"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Smtp -->

<Class rdf:about="&Ontology1365003423152;Smtp">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackService"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Smurf -->

<Class rdf:about="&Ontology1365003423152;Smurf">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;Attack"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Tcp -->

<Class rdf:about="&Ontology1365003423152;Tcp">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackProtocolType"/>
</Class>

<!-- http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#Udp -->

<Class rdf:about="&Ontology1365003423152;Udp">
    <rdfs:subClassOf rdf:resource="&Ontology1365003423152;AttackProtocolType"/>
</Class>
</rdf:RDF>

<!-- Generated by the OWL API (version 3.2.3.1824) http://owlapi.sourceforge.net --> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T12:56:07.020

问题陈述相当不清楚，所以我刚刚创建了一个基本的框架应用程序，它将向您展示基本步骤。顺便说一句，您的输入本体存在许多问题：

*   它没有在您用作命名空间的 URL 上发布 - 不是致命的，但您应该在某个时候解决这个问题。我已经通过使用Jena 内置的*备用位置机制来解决它*

*   您有以大写字母开头的属性名称（例如`HasDuration`）。RDF 风格是对类本地名称使用前导大写字母，对属性本地名称使用前导小写字母（如`hasDuration`：）

*   但事实上，一般惯例是无论如何都不要使用像“has”和“is”这样的前缀（所以`duration`：）

*   您有一些名为`0`,`1`等`2`的类，它们是的超类，`Attack`似乎没有任何用途

无论如何，这是一个框架应用程序，您可以根据自己的需要进行调整：

```
package examples;

import com.hp.hpl.jena.ontology.*;
import com.hp.hpl.jena.rdf.model.Model;
import com.hp.hpl.jena.rdf.model.ModelFactory;
import com.hp.hpl.jena.util.FileManager;

public class SamThomasExample
{
    /***********************************/
    /* Constants                       */
    /***********************************/

    // where the ontology should be
    public static final String SOURCE_URL = "http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl";

    // where we've stashed it on disk for the time being
    protected static final String SOURCE_FILE = "./src/main/resources/Ontology1365003423152.owl";

    // the namespace of the ontology
    public static final String NS = SOURCE_URL + "#";

    /***********************************/
    /* External signature methods      */
    /***********************************/

    public static void main( String[] args ) {
        new SamThomasExample().run();
    }

    public void run() {
        OntModel m = ModelFactory.createOntologyModel( OntModelSpec.OWL_MEM );

        loadModel( m );

        // get an OntClass reference to one of the classes in the model
        // note: ideally, we would delegate this step to Jena's schemagen tool
        OntClass attack = m.getOntClass( NS + "Attack" );

        // similarly a reference to the attack duration property,
        // and again, using schemagen would be better
        OntProperty attackDuration = m.getDatatypeProperty( NS + "HasDuration" );

        // create an instance of the attack class to represent the current attack
        Individual attack01 = m.createIndividual( NS + "attack01", attack );

        // add a duration to the attack
        attack01.addProperty( attackDuration, m.createTypedLiteral( 10 ) );

        // finally, print out the model to show that we have some data
        m.write( System.out, "Turtle" );
    }

    /***********************************/
    /* Internal implementation methods */
    /***********************************/

    /** read the ontology and add it as a sub-model of the given ontmodel */
    protected void loadModel( OntModel m ) {
        FileManager.get().getLocationMapper().addAltEntry( SOURCE_URL, SOURCE_FILE );
        Model baseOntology = FileManager.get().loadModel( SOURCE_URL );
        m.addSubModel( baseOntology );

        // for compactness, add a prefix declaration st: (for Sam Thomas)
        m.setNsPrefix( "st", NS );
    }

} 
```

这是我得到的输出：

```
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:     <http://www.w3.org/2002/07/owl#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix st:      <http://www.semanticweb.org/ontologies/2013/3/Ontology1365003423152.owl#> .

st:attack01
  a       st:Attack ;
  st:HasDuration "10"^^xsd:int . 
```

# c++ - 获取和打印字符串的简单类

> ID：15986053
> 
> 赞同：0
> 
> 时间：2013-04-13T08:56:01.020
> 
> 标签：c++

我刚刚开始使用类，在这段代码中，我试图让一个类从用户那里获取一个字符串，计算它的长度然后打印它。但是我遇到了一些错误，我无法理解它们的用途。我会很感激一些帮助。

```
#include<iostream>

using namespace std;

class String
{
public:
    String();  // constructor
    void Print();   // printing the string
    void Get();     // getting the string from the user.
    int CountLng( char *);   // counting length
    ~String();  // destructor

private:
    char *str;
    int lng;
} str1;

String::String()
{
    lng=0;
    str=NULL;

}

int CountLng( char *str)
{
    char * temp;
    temp=str;
    int size=0;
    while( temp !=NULL)
    {
        size++;
        temp++;
    }

    return size;

};

void String::Get()

{
    str= new char [50];
    cout<<"Enter a string: "<<endl;
    cin>>str;

};

void String::Print()
{
    cout<<"Your string is : "<<str<<endl<<endl;
    lng= CountLng( str);
    cout<<"The length of your string is : "<<lng<<endl<<endl;
};

int main()
{

    str1.Get();
    str1.Print();

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:09:48.113

在该`CountLng()`方法中，要检查字符串的结尾，您需要检查指针指向的位置的内容，而不是指针位置本身：

```
while( *temp !='\0')//*temp gives you the value but temp gives you the memory location
{
    size++;
    temp++;
} 
```

检查字符串结尾的标准是查找字符`'\0'`或`NUL`. 指向字符串结尾的指针不必为 NULL。

此外，在该`Get()`方法中，您的字符串大小限制为 50 个字符。当将两个 String 对象相加时，这将是一个问题。您需要通过使用 std::copy 和重新分配您的 char 数组来使字符串大小动态化，并在溢出的情况下使您的字符串大小更大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:03:21.250

1.  `int CountLng(char *str)`应该是`int String::CountLng(char *str)`因为它是`String`类的方法。

2.  此外，您在类声明中定义了析构函数，但没有定义他的主体：

`String::~String() { }`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T09:03:55.613

上面的代码有多个问题

1.  您正在使用 str1 一个应该是字符串对象，但没有声明它。
2.  成员函数用 :: 语法声明
3.  析构函数没有身体

我已经调整了您的程序以消除这些问题，将其与您的原始程序进行比较以查看差异

```
#include<iostream>

using namespace std;

class String
{
public:
    String();  // constructor
    void Print();   // printing the string
    void Get();     // getting the string from the user.
    int CountLng( char *);   // counting length
    ~String(){ if (str) delete []str; };  // destructor

private:
    char *str;
    int lng;
};

String::String()
{
    lng=0;
    str=NULL;

}

int String::CountLng( char *str)
{
    char * temp;
    temp=str;
    int size=0;
    while( *temp !='\0')
    {
        size++;
        temp++;
    }

    return size;

};

void String::Get()

{
    str= new char [50];
    cout<<"Enter a string: "<<endl;
    cin>>str;

};

void String::Print()
{
    cout<<"Your string is : "<<str<<endl<<endl;
    lng= CountLng( str);
    cout<<"The length of your string is : "<<lng<<endl<<endl;
};

int main()
{

    String str1;

    str1.Get();
    str1.Print();

    system("pause");
    return 0;
} 
```

# mysql - Mysql组/排序

> ID：15986054
> 
> 赞同：0
> 
> 时间：2013-04-13T08:56:26.910
> 
> 标签：mysql, grouping

我的武术俱乐部有一个学生管理系统，不同类型的信息存储在不同的数据库表中，

出勤率和评分会为每个新事件添加一个新行。

我正在尝试从学生表中获取信息，并从出勤表中列出参加的总课程，从评分表中找到他们当前的成绩信息，并按照 Grades_list 表中设置的顺序对其进行排序。

所以我有这个：

```
SELECT * , COUNT( date ) AS `count` 
  FROM attendance a
    JOIN students s ON a.student_id = s.student_id
    JOIN gradings g ON g.student_id = s.student_id
    JOIN grades_list gl ON gl.grade = g.grade
      WHERE s.class <>'Little Monsters'
        AND date
        BETWEEN'2013-01-01'
        AND now() 
          GROUP BY a.student_id
          ORDER BY gl.ID 
```

这目前做了正确的事情，但它没有显示所有结果，如果每个人的等级有多个条目（最终会有），它会显示一个结果但不是最新的。我目前在评分表中有两个人，每个人有两个条目，其中一个人根本没有显示，另一个人显示他们最旧的记录，应该显示最新的记录。

希望一切都说得通。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:01:13.043

1.  既然你`GROUP BY a.student_id`，每个学生将不会超过一次。

2.  记录可能会因为您的加入而消失。如果学生不在`grades_list`，则没有可加入的内容，因此不会显示记录。你可能想要`LEFT JOIN`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:12:04.023

> 我正在尝试从学生表中获取信息，并从出勤表中列出参加的总课程，从评分表中找到他们当前的成绩信息，并按照 Grades_list 表中设置的顺序进行排序。
> 
> –––如果每个人的等级有多个条目（最终会有）–––</p>

后者让我认为您可能应该重新设计数据库。丢`grades`表。我相信学生在任何给定时间只能获得一个成绩，因此将其作为学生的属性。`student`现在您真正需要的是和之间的 1:n 关系`attendance`。你按 . 对学生进行排序`student.grade`。（参加某个活动的学生。）

如果要记录学生成绩的历史记录，可以`grade_when_attended`在表中添加一列`attendance`。或者制作一个专用`grade_history`表：

*   `student_id`, PK, FK 到`student_id`
*   `grade`, PK, FK 到`grade_list`
*   `date_when_earned`,`date`
*   ...（？）

我更喜欢“完整的”年级历史方法，但这会使按参加活动的年级排序学生有点复杂。

可能的查询，简化（如果可行的话，让我们考虑按等级排序等）：

```
SELECT s.* , GROUP_CONCAT(a.column1), GROUP_CONCAT(a.column1)
  FROM students s
  LEFT JOIN attendance a ON a.student_id = s.student_id
  WHERE s.class <>'Little Monsters'
    AND date
    BETWEEN'2013-01-01'
    AND now() 
      GROUP BY s.student_id 
```

上面的查询仅显示当前成绩，因此如果在指定时间段内获得新成绩，事情可能会变得一团糟。（快速而肮脏的解决方案是将`grade_when_attended`列添加到`attendance`表格中，以便您获得当前成绩和时间段内每次出勤的每个成绩。）

请记住，您需要`GROUP_CONCAT`分别对每一列：

*   [http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

# php - 以 MySQL IN() 中指定的相同顺序对行进行排序

> ID：15986064
> 
> 赞同：1
> 
> 时间：2013-04-13T08:58:16.250
> 
> 标签：php, mysql, sql

有一些ID：

```
$ids = "'55-30269','50-30261','50-30254','50-30257','50-30268','50-30253'"; 
```

有这个查询：

```
$sql = "SELECT * FROM `report` WHERE `id` IN ($ids)"; 
```

我希望行的顺序与`$ids`. 取而代之的是，我得到了这些行最初插入表中的顺序。

另外，我不确定为什么我需要将每个 id 放在引号中`'55-30269'`，但是查询没有以其他方式执行。例如`$ids = "55-30269,50-30261,50-30254,50-30257,50-30268,50-30253";`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T09:01:21.127

因为数据类型`ID`是字符串。字符串文字必须用单引号括起来。如果要根据指定的结果对结果进行排序`ID`，请使用`FIELD()`自定义重新排序。

```
SELECT  *
FROM    report
WHERE   ID IN ($ids)
ORDER   BY FIELD(ID, $ids) 
```

*   [场地（）](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field)

在没有单引号的情况下传递 ID 时没有得到准确结果的原因，

```
$ids = "55-30269,50-30261,50-30254,50-30257,50-30268,50-30253" 
```

是因为 MySQL 对这些值执行算术运算。

```
55-30269 = -30216
50-30261 = -30211
... 
```

# c - 为什么scanf不能正常工作

> ID：15986070
> 
> 赞同：1
> 
> 时间：2013-04-13T08:59:07.640
> 
> 标签：c, multidimensional-array, scanf

我想在一个数组中一个一个地输入16个字符......

```
#include<stdio.h>
void main(){
 int i,j;
 char a[4][4];
printf("Enter Values in array : ");
for ( i=0 ; i<=3 ; i++ )
{
for ( j=0 ; j<=3 ; j++ )
{
    printf("a[%d][%d] : ",i,j);
    scanf("%c",&a[i][j]);
}}
for ( i=0 ; i<=3 ; i++ )
{
for ( j=0 ; j<=3 ; j++ )
{
    printf("a[%d][%d] : %c\n",i,j,a[i][j]);
}}} 
```

输出是

```
a[0][0] : q
a[0][1] : a[0][2] : w
a[0][3] : a[1][0] : e
a[1][1] : a[1][2] : r
a[1][3] : a[2][0] : t
a[2][1] : a[2][2] : y
a[2][3] : a[3][0] : u
a[3][1] : a[3][2] : i
a[3][3] : 
```

为什么我不能输入 a[0][1],a[0][3] 等等....为什么它们被跳过...还请告诉一个更好的方法来完成这项工作...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T09:02:11.687

scanf() 将换行符留在输入缓冲区中，供后续调用使用。

告诉 scanf() 跳过空格。

```
scanf(" %c",&a[i][j]); // Notice the space in the format string 
```

格式说明符中的空格使 scanf() 在读取字符之前忽略任何空白字符（for `%c`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T09:30:56.193

这是在 C 语言中进行字符输入时的问题。当我们键入一个字符并按 ENTER 键时，ENTER 的 ASCII 值将成为下一个 scanf 的值。

您需要刷新标准输入缓冲区，为此您应该编写 fflush(stdin)。

```
 #include<stdio.h>

    void main(){

    int i,j;
    char a[4][4];
    printf("Enter Values in array : ");

    for ( i=0 ; i<=3 ; i++ )
    {
    for ( j=0 ; j<=3 ; j++ )
    {
        printf("a[%d][%d] : ",i,j);
        scanf("%c",&a[i][j]);
        fflush(stdin);// will clear the input buffer stdin

    }
    }
    for ( i=0 ; i<=3 ; i++ )
    {
    for ( j=0 ; j<=3 ; j++ )
    {
        printf("a[%d][%d] : %c\n",i,j,a[i][j]);
    }
    }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T09:13:13.753

KingsIndian 的回答解释了这个问题。

作为一种解决方案，我会使用 getchar() 或 getwchar()（参见 man 3 getchar）。通过一次阅读角色广告，您可以：

1.  检查您阅读的字符是否属于您所期望的类型（参见 ctype.h 或 wctype.h）

2.  丢弃你不想要的那些，比如空白、CR、LF 选项卡等。

# twitter - Twitter 地理标记

> ID：15986074
> 
> 赞同：1
> 
> 时间：2013-04-13T08:59:43.190
> 
> 标签：twitter

我正在尝试使用从伦敦地区下载推文

```
curl --user xx:xx -X POST -d 'locations=-0.651,51.208,0.425,51.781' https://stream.twitter.com/1.1/statuses/filter.json > twitter.london.json 
```

我收到的推文很离谱。例如在 (-6.71658144,50.48812681) 中。这是为什么？

推文：

```
{
    "created_at": "Mon Apr 08 12:26:40 +0000 2013",
    "id": 321237656321286144,
    "id_str": "321237656321286144",
    "text": "4dc9c54f70000000",
    "source": "\u003ca href=\"http:\/\/www.google.com\/\" rel=\"nofollow\"\u003eGoogle\u003c\/a\u003e",
    "truncated": false,
    "in_reply_to_status_id": null,
    "in_reply_to_status_id_str": null,
    "in_reply_to_user_id": null,
    "in_reply_to_user_id_str": null,
    "in_reply_to_screen_name": null,
    "user": {
        "id": 61043461,
        "id_str": "61043461",
        "name": "GooGuns",
        "screen_name": "googuns_prod",
        "location": "",
        "url": null,
        "description": null,
        "protected": false,
        "followers_count": 86,
        "friends_count": 0,
        "listed_count": 2,
        "created_at": "Tue Jul 28 22:49:22 +0000 2009",
        "favourites_count": 0,
        "utc_offset": -18000,
        "time_zone": "Eastern Time (US & Canada)",
        "geo_enabled": true,
        "verified": false,
        "statuses_count": 417708,
        "lang": "en",
        "contributors_enabled": false,
        "is_translator": false,
        "profile_background_color": "C0DEED",
        "profile_background_image_url": "http:\/\/a0.twimg.com\/images\/themes\/theme1\/bg.png",
        "profile_background_image_url_https": "https:\/\/si0.twimg.com\/images\/themes\/theme1\/bg.png",
        "profile_background_tile": false,
        "profile_image_url": "http:\/\/a0.twimg.com\/sticky\/default_profile_images\/default_profile_3_normal.png",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/sticky\/default_profile_images\/default_profile_3_normal.png",
        "profile_link_color": "0084B4",
        "profile_sidebar_border_color": "C0DEED",
        "profile_sidebar_fill_color": "DDEEF6",
        "profile_text_color": "333333",
        "profile_use_background_image": true,
        "default_profile": true,
        "default_profile_image": true,
        "following": null,
        "follow_request_sent": null,
        "notifications": null
    },
    "geo": {
        "type": "Point",
        "coordinates": [50.48812681, -6.71658144]
    },
    * * "coordinates": {
        "type": "Point",
        "coordinates": [-6.71658144, 50.48812681]
    },
    * * "place": {
        "id": "6416b8512febefc9",
        "url": "http:\/\/api.twitter.com\/1\/geo\/id\/6416b8512febefc9.json",
        "place_type": "country",
        "name": "United Kingdom",
        "full_name": "United Kingdom",
        "country_code": "GB",
        "country": "United Kingdom",
        "contained_within": [],
        "geometry": null,
        "polylines": [],
        "bounding_box": {
            "type": "Polygon",
            "coordinates": [
                [
                    [-8.662663, 49.1626564],
                    [-8.662663, 60.86165],
                    [1.768926, 60.86165],
                    [1.768926, 49.1626564]
                ]
            ]
        },
        "attributes": {}
    },
    "contributors": null,
    "retweet_count": 0,
    "favorite_count": 0,
    "entities": {
        "hashtags": [],
        "urls": [],
        "user_mentions": []
    },
    "favorited": false,
    "retweeted": false,
    "filter_level": "medium",
    "lang": "en"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-28T20:21:02.867

根据 Twitter 文档，location 参数接受以逗号分隔的经度、纬度对列表，指定一组边界框。

如果您只传递一个纬度和经度，那么它将返回最近的推文到该位置。您是否还指定了过滤器查询，如果是这样，这将大大减少返回的推文数量，这意味着离伦敦最近的推文实际上在数英里之外。我有一个类似的问题。

话虽如此，我只是尝试了一下，如果您使用下面的 lat 和 lon，没有其他过滤器查询，它工作得很好。

`{locations: [51.50,0.12,51.75,1.25]}`

需要注意的另一点是，实际上已不再有很多推文附有位置，而且通常附有位置的推文非常不准确，因为它们实际上可能来自其个人资料中指定的作者家庭位置。

# php - 如何记录产生错误的调用代码行

> ID：15986078
> 
> 赞同：0
> 
> 时间：2013-04-13T08:59:54.757
> 
> 标签：php

我从我的 php 脚本中收到通知：

> 未定义的偏移量：第 74 行 C:\xampp\htdocs\WWW\myfilexyz.php 中的 32

我想检测错误发生在哪里，因为产生错误的过程被多次调用。

我添加了以下代码行：

```
error_log("you made a mistake", 3, "errorfile.log"); 
```

查看errorfile.log，该消息出现3次，但该程序被调用超过100次。如何找到产生错误的 3 行？

我希望有时会看到：

> “你犯了一个错误，从 start.php 的第 234 行调用”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:05:02.273

最简单的方法是使用适当的错误处理程序，它为每个错误提供*堆栈跟踪。*您可以安装[xdebug](http://xdebug.org)，它会在激活时输出有关错误的更多详细信息。当您使用它时，请考虑使用 xdebug 来连接调试器（阅读 xdebug 的文档）。

或者编写您自己的[错误处理程序](http://php.net/set_error_handler)，用于[`debug_backtrace`](http://php.net/debug_backtrace)为您提供体面的堆栈跟踪。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-13T09:06:48.957

```
$err = error_get_last();
error_log($err['message'] . ' in ' . $err['file'] . ' on line' . $err['line'], 3, "errorfile.log"); 
```

# html - 在滑块中居中文本 div

> ID：15986093
> 
> 赞同：0
> 
> 时间：2013-04-13T09:01:48.597
> 
> 标签：html, css, css-position

我正在尝试将文本 div 居中在自定义滑块中。

由于某种原因，CSS 不起作用。该网站位于我的测试服务器[http://bit.ly/ZgawU6](http://bit.ly/ZgawU6)

我想将文本组“环境问题”放在顶部滑块的中心。类似于这个网站 www.sevenly.org

当我将 div 更改为 position:relative 而不是 position:absolute; 但是我只能用 Chrome 检查器来改变它。当我将它添加到 CSS 文件时，它不起作用。

谁能指出我为什么这段代码不起作用的正确方向？

```
.custom-slider-caption, .custom-slider-title {
line-height: 1.3;
text-align: center;
position: relative;
} 
```

有问题的div：

```
<div class="custom-slider-title" style="top: 0px; opacity: 1;"><div style="position: absolute; left:”0″px; top:140px; right:”0″px; bottom:px; font-size: 43px; color:#fff; text-shadow: 4px 4px 1px #497ca0; ">Environmental Concern</div></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:08:18.840

它不适用于绝对位置，因为绝对定位的元素不是 100% 宽度。您可以将 witdh 设置为 100%，或者更简洁的**解决方案**是将`right`值设置为零。因此，您将拥有`left`和`right`位置为零，宽度将自动为 100%。

```
div {
  positon: absolute;
  top: 140px;
  left: 0;
  right: 0;
} 
```

您甚至不需要指定`px`value 是否等于零，因为在 %、em、px 或其他任何值中设置为零的任何尺寸都将具有相同的大小。**零就是零**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:04:11.320

```
.custom-slider-caption, .custom-slider-title {
  width: 100%;
  line-height: 1.3;
  text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T09:07:49.353

如果您希望 div 居中，您的代码应如下所示

```
#div
{
 width:600px;
 margin-left:auto;
 margin-right:auto;
}

// NOTE: THE WIDTH CAN BE CHANGED //

#div p
{
 width:300px;
 margin-left:auto;
 margin-right:auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T09:36:19.777

pzin 的答案是正确的。使用这个选择器：

```
.custom-slider-title > div {
    ...
    left: 0;
    right: 0; 
```

}

# jsf - Tomcat 服务器上 Java EE 应用程序的 Maven 依赖项。javaee-api有什么问题？

> ID：15986103
> 
> 赞同：1
> 
> 时间：2013-04-13T09:02:39.300
> 
> 标签：jsf, jakarta-ee, maven, tomcat

我有一个非常简单的 hello world Java EE 应用程序。index.xhtml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">

<h:head>
    <title>JSF 2.0 Hello World</title>
</h:head>
<h:body>
    <h3>#{problemBean.helloWorld}</h3>
</h:body>
</html> 
```

当我在 pom.xml 文件中使用这些依赖项运行此应用程序时，它运行良好：

```
 <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.1.19</version>
  </dependency>

  <dependency>
      <groupId>com.sun.faces</groupId>
      <artifactId>jsf-impl</artifactId>
      <version>2.1.19</version>
  </dependency> 
```

但是，当我尝试：

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
</dependency>

<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-web-api</artifactId>
    <version>6.0</version>
</dependency> 
```

我得到：

**java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener**

据我所知，javaee-api 也有 jsf-api 提供的所有类？

那么我在这里缺少什么？

* * *

编辑：

这是我的 web.xml，如果它有帮助的话：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         version="2.5">

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>

</web-app> 
```

和问题Bean.java：

```
package com.tugay;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean
@SessionScoped
public class ProblemBean {

    private String helloWorld = "Hello world";

    public String getHelloWorld() {
        return helloWorld;
    }

    public void setHelloWorld(String helloWorld) {
        this.helloWorld = helloWorld;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:17:14.720

嗯，我猜是缺少 Mojarra 的实现库。尝试将此依赖项添加到您的 pom 中：

```
<dependency>
  <groupId>com.sun.faces</groupId>
  <artifactId>jsf-impl</artifactId>
  <version>2.1.19</version>
</dependency> 
```

此外，我认为您只需要`javaee-api`（EE 6 full）或`javaee-web-api`（EE 6 web profile）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T06:07:29.953

我发现添加此依赖项允许您在 tomcat 中部署 .xhtml 文件，而无需在 WEB-INF/lib 文件夹中添加任何 jar。

```
<dependency>
    <groupId>org.glassfish</groupId>
    <artifactId>javax.faces</artifactId>
    <version>2.2.7</version>
</dependency> 
```

# wcf - WCF - 通过 HTTPS 使用 SOAP 服务 - 请求超时

> ID：15986104
> 
> 赞同：0
> 
> 时间：2013-04-13T09:02:46.880
> 
> 标签：wcf, soap, ssl, https, wcf-security

我有一个 WPF 应用程序，我正在使用 WCF 通过 Https 使用 php webservice，我在服务器上创建了一个自签名证书来测试它，并将客户端配置为使用这个证书，但是出现了一个异常并告诉我也需要通过客户端证书。

其实我只是想保护传输的消息，我不需要对客户端进行身份验证，所以我怎么能禁用客户端身份验证。

我正在使用带有 clientCredentialType“Certificate”和 .Net 3.5 的安全模型“Transport”。

提前感谢您的意见..

**更新**

正如我所提到的，我不需要该服务来验证客户端的身份，因此我使用[了带有匿名客户端](http://msdn.microsoft.com/en-us/library/ms729789%28v=vs.90%29.aspx)的传输安全性，而不是[带有证书身份验证](http://msdn.microsoft.com/en-us/library/ms731074.aspx)的传输安全性，以下是客户端配置：

```
<system.serviceModel>
<bindings>
  <wsHttpBinding>
    <binding name="bindingName" closeTimeout="00:0:04"
       openTimeout="00:00:04" receiveTimeout="00:00:04" sendTimeout="00:00:04"
       allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
       messageEncoding="Text" textEncoding="utf-8"
       useDefaultWebProxy="true">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"> 
      <security mode="Transport">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<client>
  <endpoint address="https://myServer/myApp/myWebService"
    binding="wsHttpBinding" bindingConfiguration="bindingName"
    contract="xx.yy" name="zz">
  </endpoint>
</client> 
```

**现在的问题是**：当我调用服务时出现超时错误“对 {My Service URL} 的 HTTP 请求已超过分配的超时”。

**附加信息**：该服务在 HTTP 上运行良好，问题仅在我移至 HTTPS 时出现，如果我通过 Internet 浏览器打开它，我可以看到服务 WSDL，但浏览告诉我有不安全的资源，我应该强制它显示所有资源以便查看 WSDL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:48:27.297

可能你的问题是：

> // 创建端点地址。**请注意，机器名称**
> // 必须与用于验证服务**的 X.509 证书的主题或 DNS 字段相匹配。**

因此，请查看您的客户端配置，并检查证书部分`findValue`属性以匹配您的证书。

喜欢

```
<clientCertificate findValue="contoso.com"
   storeLocation="CurrentUser"
   storeName="My"
   x509FindType="FindBySubjectName" /> 
```

请参阅有关[使用证书身份验证的传输安全性的](http://msdn.microsoft.com/en-us/library/ms731074.aspx)更多信息。

# jquery - Thomas J Bradley 的导轨和签名板

> ID：15986105
> 
> 赞同：1
> 
> 时间：2013-04-13T09:02:51.440
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3, signature

我正在使用 rails + jquerymobile + 签名板（[http://thomasjbradley.ca/lab/signature-pad/](http://thomasjbradley.ca/lab/signature-pad/)）

我的问题是转换为图像（[http://thomasjbradley.ca/lab/signature-pad/#images](http://thomasjbradley.ca/lab/signature-pad/#images)）

当我绘制签名并提交表单时，我得到了一些奇怪的错误：

```
convert.exe: Non-conforming drawing primitive definition `line' @ error/draw.c/DrawImage/3154.
convert.exe: unable to open image `111,9': No such file or directory @ error/blob.c/OpenBlob/2641.
convert.exe: no decode delegate for this image format `111,9' @ error/constitute.c/ReadImage/550\. 
```

我的controller.rb中的代码：

```
 instructions = JSON.load(params[:output]).map { |h| "line #{h['mx']},#{h['my']} #{h['lx']},#{h['ly']}" } * ' '
  system "convert -size 198x55 xc:transparent -stroke blue -draw '#{instructions}' signature.png" 
```

[https://gist.github.com/branch14/4258871](https://gist.github.com/branch14/4258871)

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:01:37.280

尝试卸载并重新安装 imagemagick。

`brew uninstall imagemagick` 或 `brew remove imagemagick` 。

然后， `brew install imagemagick`

# c++ - 使用 OpenCV C++ 检测和跟踪视频中的液滴的步骤

> ID：15986107
> 
> 赞同：3
> 
> 时间：2013-04-13T09:02:59.303
> 
> 标签：c++, opencv, tracking, measurement

我目前正在做一个项目，我需要在视频中定位墨滴，执行诸如体积估计、速度和在它变成球形之前行进的距离等测量。

首先，我想知道我在处理这个项目时是否走在正确的轨道上。目前我有：

1.) 将原图转为灰度图

2.) 应用高斯模糊然后 Canny 边缘检测（[单击此处查看图像](http://postimg.org/image/3xwz04yrx/)）

3.）定位白色像素，`findNonZero()`然后计算行块的总和以及白色像素集中度最高的块，并将其上方的所有行都裁剪掉）。这会移除图像中的打印头，因此 ROI 只是其下方的液滴。

4.) 用于`findContours`查找轮廓。（[点击这里查看图片](http://postimg.org/image/wtzdtaz03/)）

以上4个步骤是我到目前为止所做的。以下步骤是我接下来应该做的吗？

*   在裁剪后和寻找轮廓之前先扩张二值图像以确保轮廓将关闭而不是打开？
*   也许忽略那些非常开放的？（有关如何实际执行此操作的任何提示？）
*   `floodFill()`每个封闭的圈子
*   使用以下方法找到每个轮廓的区域`contourArea()`（然后我可以在这一步之后用一些假设来估计液滴的体积，比如它的形状、像素与体积比等吗？）
*   找到每个轮廓的中心并将其保存到一个数组中，以便我可以将其与下一帧中同一滴的中心进行比较。一旦我知道液滴中心的行进距离和视频的帧速率，我应该能够估计速度。

我也不确定如何给 drop 一个 ID，以便我可以确定我正在正确跟踪它并知道新的 drop 何时进入 ROI。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T23:12:03.187

我认为你的想法很好，可以很容易地扩展到让你满意的东西。

为了澄清起见，我将从您的图像“redROI”中调用红色 ROI。

1.  查找 redROI 中的所有液滴。记住位置和 ID。
2.  对于上一步中的每个液滴位置，创建一个类似于黄色矩形的 ROI：![](https://i.stack.imgur.com/gEqO3.png) 对于每个矩形，检查其中是否有液滴。
    如果是 - 可能是前一帧中的液滴，所以是您正在寻找的液滴。
    如果不是 - 您可以尝试在更大一点的矩形中再次搜索，或者假设该 ROI 的暗点是您的液滴。如果 ROI 接近 redROI 的底部，则液滴可能已经消失 - 忘了它。

注意几件事：
矩形的大小取决于水滴移动的速度以及它们是否只能垂直或对角线移动（风也可以改变移动方向）。
- 在搜索液滴之前，检查所有矩形是否不相交（每对矩形没有任何公共区域 -> (Rect1 & Rect2).area() == 0）。
- 在 ROI 中搜索液滴之前，请确保该 ROI 在 redROI 内。所以只需使用以下代码：`roi = roi & redROI;`
找到每个旧水滴的新位置后，在整个 redROI 中搜索水滴，这样您就不会错过任何新水滴。

如果您不理解这个想法的某些部分，请告诉我 - 我会尝试更好地解释它。

> 也许忽略那些非常开放的？（有关如何实际执行此操作的任何提示？）

我不确定，所以检查一下。尝试将其`CV_RETR_LIST`用作第三个参数`findContours`并检查返回的（按`findContours`）轮廓的第一个点和最后一个点之间的距离 - 如果距离大于轮廓是打开的，如果不是 - 它是关闭的。

> floodFill() 每个封闭的圈子

您可以使用`drawContours`并将`thickness`参数设置为`-1`- 更简单和更快的解决方案。

*编辑：*
您也可以尝试使用光流 - 它已经在 openCV 中实现，在这里您可以阅读关于此的精彩教程：[http](http://robotics.stanford.edu/~dstavens/cs223b/) ://robotics.stanford.edu/~dstavens/cs223b/ （从 .pdf 文件开始）

# python - 细胞计数：选择性；只计算所有染色阳性的细胞

> ID：15986114
> 
> 赞同：0
> 
> 时间：2013-04-13T09:03:44.883
> 
> 标签：python, opencv, imaging, imagej

如果我在不同的荧光通道中拍摄多张图像（在用一些抗体/标记物染色细胞后），我如何自动定量每个标记物阳性细胞的比例？有没有人在 Python 中做过这样的事情？

我已经可以使用 Fiji (ImageJ) 来计算仅包含一种染色类型的细胞，但我不能让它对包含两种染色类型的合并图像进行选择性计数。由于 Fiji 与 python 交互良好，我正在考虑编写一个脚本，查看每个仅包含一种染色类型的图像，然后获取相应图像的 xy 坐标并检查它们之间的匹配。我不确定这是否是个好主意，我想知道是否有人做过类似的事情或有更有效的方式来完成任务？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:35:05.383

您可以使用 cont = cv2.findcontours 找到几乎圆形的单元格并使用 len(cont) 对它们进行计数。

# gwt - 成功 OAuth 登录后 GWT 获取 Google 用户名

> ID：15986131
> 
> 赞同：2
> 
> 时间：2013-04-13T09:05:42.033
> 
> 标签：gwt, oauth

在我的 GWT 应用程序中，我使用该`com.google.api.gwt.oauth2.OAuth2`模块来允许用户使用 OAuth 登录。我已经实现了一个 GoogleApi 类来提供 OAuth 登录，如下所示：

```
public final class GoogleApi {
    private EventBus eventBus;

    private final ClientOAuth2Login oAuth2Login;
    private ClientGoogleApiRequestTransport requestTransport;

    private String accessToken;

    public GoogleApi(final EventBus eventBus, String clientId) {
        this.eventBus = eventBus;
        oAuth2Login = new ClientOAuth2Login(clientId);
    }

    ...

    public void login(final Receiver<String> callback) {
        oAuth2Login.login(new Receiver<String>() {
            @Override
            public void onSuccess(String response) {
                accessToken = response;
                callback.onSuccess(response);
            }

            @Override
            public void onFailure(ServerFailure error) {
                Window.alert(error.getMessage());
            }
        });
    }
    ...
} 
```

我调用这个 login() 方法如下：

```
googleApi.login(new Receiver<String>() {
    @Override
    public void onSuccess(final String token) {
        // I want to get the logged in user's name here
    }

    @Override
    public void onFailure(ServerFailure error) {
        ...
    }
}); 
```

成功登录后，我想获取登录用户的全名。我知道我可以使用该`com.google.api.gwt.services.Plus`模块获取用户的姓名，但这需要用户注册到 Google Plus，如果不是，则会引发错误。

**如何在我的 GWT 应用程序中使用 OAuth 执行此操作？** 基本上，如果可能的话，我希望能够在 GWT 应用程序中实现[这个解决方案。](https://stackoverflow.com/a/7115414)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T18:41:58.987

你看到这个了吗？我认为它非常有用。但是，要获得一个简单的结果需要大量代码：

[http://www.sw-engineering-candies.com/blog-1/howtogetuserinformationwithoauth2inagwtandgoogleappenginejavaapplication](http://www.sw-engineering-candies.com/blog-1/howtogetuserinformationwithoauth2inagwtandgoogleappenginejavaapplication)

# python - 当我尝试重塑 numpy 数组时，为什么 memmap 需要文件名？

> ID：15986133
> 
> 赞同：2
> 
> 时间：2013-04-13T09:06:11.337
> 
> 标签：python, arrays, numpy, pickle

我得到一个我觉得难以理解的堆栈跟踪：

```
screwed_up_code.py in atleast_4d(arr)
     28 def atleast_4d(arr):
     29     stshape = arr.shape
     30     while len(stshape)<4: stshape+=(1,)
     31     print arr.shape, stshape
---> 32     return arr.reshape(stshape)

/usr/lib/python2.7/dist-packages/numpy/core/memmap.pyc in __array_finalize__(self, obj)
    255         if hasattr(obj, '_mmap'):
    256             self._mmap = obj._mmap
--> 257             self.filename = obj.filename
    258             self.offset = obj.offset
    259             self.mode = obj.mode

AttributeError: 'memmap' object has no attribute 'filename' 
```

如果你想知道`arr.shape = (192, 384, 6)`和`stshape = (192, 384, 6, 1)`

* * *

**更新**

正如 NPE 所建议的，我查看[了类似听起来 AttributeError 的错误报告](http://projects.scipy.org/numpy/ticket/1809)。那里的一张海报将其归咎于由于ndarrays的酸洗而丢失的属性。我确实在酸洗数组，当像这样重新激活加载的数组时：

```
newarr = numpy.ndarray(pickled_array)
pickled_array = newarr                  # use the recreated instead of the pickled arr 
```

我收到警告而不是异常，并且我的代码运行：

```
Exception AttributeError: AttributeError("'NoneType' object has no attribute 'tell'",) in  ignored
Exception AttributeError: AttributeError("'NoneType' object has no attribute 'tell'",) in  ignored
Exception AttributeError: AttributeError("'NoneType' object has no attribute 'tell'",) in <bound method memmap.__del__ of memmap([  85389.2734375,  125935.75     ,  173624.09375  ,  272958.78125  ,
        305687.65625  ,  433026.3125   ], dtype=float32)> ignored 
```

我很高兴我的代码可以运行，并且暂时将其保留。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T09:16:00.577

[这听起来与这个错误](http://projects.scipy.org/numpy/ticket/1809)非常相似。

[堆栈跟踪](https://gist.github.com/tfmoraes/944144)有点不同，但代码最终在完全相同的点失败，并出现完全相同的异常：

```
 File "C:\Python26\Lib\site-packages\numpy\core\memmap.py", line 257, in __array_finalize__
   self.filename = obj.filename
AttributeError: 'memmap' object has no attribute 'filename' 
```

首次报告此问题的[`numpy-discussion`线程](http://mail.scipy.org/pipermail/numpy-discussion/2011-April/056043.html)表明该问题可能与另一个与对象酸洗有关的[票证](http://projects.scipy.org/numpy/ticket/1452)`memmap`有关。无论如何，该线程值得一读。

# ios - 如何在 Xamarin iOS(Monotouch) 中添加到静态表

> ID：15986136
> 
> 赞同：1
> 
> 时间：2013-04-13T09:06:41.713
> 
> 标签：ios, uitableview, xamarin.ios, xamarin

我正在尝试将单元格添加到使用情节提要创建的静态表中。我希望能够从代码动态地将单元格添加到其中的一个部分，我实现了一个自定义 UITableViewSource 但它不断覆盖我的静态单元格。我应该如何实现 GetCell() 方法，以便它也可以与静态单元格一起使用？看起来在ObjectiveC中可以通过以下方式完成：

`return [super tableView:tableView numberOfRowsInSection:section]`

但是如何在 Xamarin iOS 中实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:23:46.080

我能够使用以下代码使其工作：

```
 public partial class StaticTableController : UITableViewController
    {
        public StaticTableController (IntPtr handle) : base (handle)
        {
        }

        [Export("tableView:cellForRowAtIndexPath:")]
        public UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
        {
            var selector = new Selector("tableView:cellForRowAtIndexPath:");

            //WTF?
            var cell = new UITableViewCell(Messaging.IntPtr_objc_msgSendSuper_IntPtr_IntPtr(SuperHandle, selector.Handle, tableView.Handle, indexPath.Handle));
            if (indexPath.Row == 2)
            {
                cell.TextLabel.Text = "Dynamic thingy";
            }
            return cell;
        }
    } 
```

看起来有点奇怪，你最好改用动态表。我尝试过但不起作用的一件事是修改一个部分中的单元格数量——这似乎直接与 Obj-C 版本的“索引超出范围”内部崩溃`UITableView`。

# java - java中哪种数据类型可以支持10e+10000个数？

> ID：15986142
> 
> 赞同：3
> 
> 时间：2013-04-13T09:07:13.563
> 
> 标签：java, types

我想在java中检查10e + 100平方的回文。请提及它的任何解决方案，因为在 java 中 double 只能携带最多 `4.9e-324 to 1.8e+308`数值，所以请提出任何可能的解决方案或提示也可能有帮助......

感谢您的真诚关注。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T09:08:25.110

您可能想查看`BigInteger`课程。[这](https://www.google.co.uk/url?sa=f&rct=j&url=http://download.oracle.com/javase/6/docs/api/java/math/BigInteger.html&q=&esrc=s&ei=ciBpUe_CHaPy0gWrsICgDA&usg=AFQjCNHZDF_dAB1Xq4M7kZFRnWRY-gXXRw)是文档。

`BigInteger`可以支持巨大的..巨大的数字！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T09:08:15.877

对于这么大的数字，当您只需要标准有效位数时，通常使用其对数来表示数字，即您将 10e+100 存储为 100*log(10) 并使用它。

# java - 代码在命令提示符下运行，但不在 eclipse 中运行

> ID：15986146
> 
> 赞同：0
> 
> 时间：2013-04-13T09:07:45.143
> 
> 标签：java, command-prompt, bufferedreader, readline, runtime.exec

下面给出的代码是我尝试在 Eclipse 中运行的代码，`stdInput.readLine()`当我尝试通过命令提示符运行命令时它返回为 null 它运行成功我做错了什么？

```
public class Recognize {
public String Recog(String name)
{   try {
    String command="java -cp .;C:\\mywork\\Speaker\\marf-0.3.0-devel-20070108-fat.jar SpeakerIdentApp --ident C:\\mywork\\Speaker\\testing-samples\\"+name+".wav";
        Process proc = Runtime.getRuntime().exec(command);
         BufferedReader stdInput = new BufferedReader(new InputStreamReader(proc.getInputStream()));
           BufferedReader stdError = new BufferedReader(new InputStreamReader(proc.getErrorStream()));
       name = "";   
       String s ;
       System.out.println(stdInput.readLine());
       // read the output from the command
      // System.out.println("Here is the standard output of the command:\n");
       while ((s=stdInput.readLine()) != null){
              // System.out.println(s);
               String recog = s;
            //   System.out.println(recog);
               String ex = stdInput.readLine();
            //   System.out.println(ex);
               String sb = stdInput.readLine();
             //  System.out.println(sb);
               if ( recog.equalsIgnoreCase(ex))
               {//System.out.println("ACCESS GRANTED");
                name = recog;
              // System.out.print(recog);
                }
               else if (ex.equalsIgnoreCase(sb))
               {//System.out.println("ACCESS GRANTED");
                name = ex;
               // System.out.println(ex);
                }
               else {//System.out.println("ACCESS DENIED");
                name = "";
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T15:57:43.977

一定是因为你没有设置eclipse默认路径所以尝试根据你的要求设置eclipse默认路径

# asp.net - 如何在每个用户的服务器端存储连接字符串

> ID：15986160
> 
> 赞同：0
> 
> 时间：2013-04-13T09:08:59.700
> 
> 标签：asp.net, asp.net-membership, connection-string

我的 asp.net Web 应用程序的每个用户都将拥有与特定于他们的数据库的连接。这是因为该网站将被所有客户使用，但将有多个数据库以保持他们的数据分开（遵守法规）。

将连接字符串存储在会话变量中（在 sql 中而不是在 proc 中）是否可以接受，或者我可以扩展 aspmembershipprovider 以保存此信息。当然，如果我扩展membershipprovider，它最终会在sql或内存中结束，具体取决于方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:14:13.520

如果您决定要为每个用户存储连接，我认为没有任何理由比将其存储为成员记录的一部分并将其缓存在会话中更复杂。

# apache - 如何将 WSGI 3.4 与 Python 3.3.1 一起使用？

> ID：15986164
> 
> 赞同：0
> 
> 时间：2013-04-13T09:09:09.533
> 
> 标签：apache, python-3.x, mod-wsgi

我在 Ubuntu 12.10 中从源代码安装了 Python 3.3.1 和 Apache 2.4.4。

当我构建 WSGI 源代码时，它告诉我：

```
/usr/bin/ld: cannot find -lpython3.3
collect2: error: ld returned 1 exit status
apxs:Error: Command failed with rc=65536
.
make: *** [mod_wsgi.la] Error 1 
```

我不知道如何处理它。感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:03:53.773

修改生成的Makefile，将'-lpython3.3'改为'-lpython3.3m'。然后重新构建。

# freeglut - 如何控制freeglut的警告

> ID：15986168
> 
> 赞同：1
> 
> 时间：2013-04-13T09:09:41.537
> 
> 标签：freeglut

当使用 freeglut 编译时，`_DEBUG`它会在事件发生时输出许多不同类型的警告，例如：'LeaveNotify'、'MotionNotify' 和 'ButtonPress'。根据具体情况，其中一些比其他更有用。具体来说，“MotionNotify”基本上会在我的调试日志中产生垃圾邮件，因为它是在鼠标运动时生成的。

我正在寻找一种通过按类型禁用警告来控制警告级别的方法。

我已经调查过了`FREEGLUT_PRINT_WARNING`，但这不起作用。使用此定义或未定义打印警告。即使它有效，我仍在寻找更细粒度的解决方案。

我还研究`glutInitWarningFunc`了为警告打印设置回调。回调函数接收用于打印的格式化字符串和相应的参数列表。警告可以完全禁用，但除了字符串比较之外，我看不到其他选项来过滤实际应该打印的内容。正如我所看到的，至少在每次鼠标移动中比较字符串都会很繁重。

# spring - 使用多个框架 | DayCQ + Spring + Hibernate

> ID：15986170
> 
> 赞同：1
> 
> 时间：2013-04-13T09:09:54.693
> 
> 标签：spring, hibernate, orm, jdbctemplate, aem

我们正在重新设计一个大型应用程序（网络门户）。我们假设使用他们用于旧应用程序的现有数据库。现在我们计划使用 CQ 来托管页面并支持在这些页面上进行创作。

因此，当我们关闭 CQ 选项时，问题来了，将 CQ 与一些外部框架集成，如 Spring（使用 JDBCTemplate）或 Hibernate 框架来访问数据库中的数据。我有以下选择：

1.  要么将 CQ 与 hibernate 框架集成以利用缓存、事务管理、数据对象映射等。但要注意的是，hibernate 只能用于访问数据，不能用于其他目的，例如进行我们需要的 RESTful 调用。

2.  或者将 CQ 与 spring 框架集成以利用 JDBCTemplate 访问数据，并且 spring 可以帮助我进行缓存、事务管理、进行 RESTful 调用，但使用 JDBCtemplate 会导致以下问题

    一个。LOC 会增加，代码将难以维护

    湾。如果表发生变化，查询字符串很难维护

3.  或者在需要时使用两者并利用这两个框架的优势。

**我是否应该期待将 CQ 与这两个框架集成。如果是，那么就会出现以下问题：它将导致什么问题：**

```
- Ease of Use 
- Productivity 
- Maintainability
- Stability
- Performance
- Ease of Troubleshooting 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:42:16.553

如果您追求的是数据集成，CQ5 基于 Apache Sling，它允许通过其 ResourceProvider 机制访问任意数据源。这最初是一种只读机制，但最近添加了读写功能。

# c# - c# xna 如何将对象数组复制为不同的数组？

> ID：15986171
> 
> 赞同：0
> 
> 时间：2013-04-13T09:10:13.633
> 
> 标签：c#, arrays, xna, copy

我正在尝试从对象数组中进行拖放。首先，它们将复制到另一个数组中。但是，当我尝试更新原始数组时，副本也有更新。这是我的代码：

```
 namespace drop_test2
{
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;
        InputManager input;

        Texture2D texure;
        DragableObject[] dragObjects, copyDragObjects;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
            this.IsMouseVisible = true;
            this.input = new InputManager(this);

            this.dragObjects = new DragableObject[6 * 6];
        }
        protected override void LoadContent()
        {
            this.spriteBatch = new SpriteBatch(this.GraphicsDevice);
            this.input.Load();
            this.texure = new Texture2D(this.GraphicsDevice, 50, 50, false, SurfaceFormat.Color);
            Color[] c = new Color[this.texure.Width * this.texure.Height];
            for (int i = 0; i < c.Length; i++) c[i] = Color.White;
            this.texure.SetData(c);

            for (int x = 0; x < 6; x++)
            {
                for (int y = 0; y < 6; y++)
                {
                    var obj = new DragableObject();
                    obj.Size = new Vector2(50);
                    obj.Position = new Vector2(35) + new Vector2(x, y) * obj.Size;
                    this.dragObjects[x + y * 6] = obj;
                }
            }
            this.copyDragObjects = this.dragObjects;
        }
        protected override void Update(GameTime gameTime)
        {
            this.input.Update(gameTime);

            for (int i = 0; i < this.dragObjects.Length; i++)
            {
                if (this.dragObjects[i].CheckHover(input.CurrentCursorPost))
                {
                    this.copyDragObjects[i].Position += new Vector2(.5f, 0);
                }
            }
        }
        Color c = Color.Blue;
        protected override void Draw(GameTime gameTime)
        {
            this.GraphicsDevice.Clear(Color.CornflowerBlue);
            this.spriteBatch.Begin();
            for (int x = 0; x < 6; x++)
            {
                for (int y = 0; y < 6; y++)
                {
                    if ((x + y) % 2 == 0)
                        c = Color.DarkGreen;
                    else
                        c = Color.LightGreen;
                    if (this.dragObjects[x + y * 6].IsHover)
                        c = Color.DarkOrchid * .5f;
                    if (this.dragObjects[x + y * 6].IsSelected)
                        c = Color.DarkRed * .75f;
                    this.spriteBatch.Draw(this.texure, this.dragObjects[x + y * 6].Position, null, c,
                        0f, new Vector2(texure.Width, texure.Height) * .5f, 1f, SpriteEffects.None, 0);
                }
            }
            this.spriteBatch.End();
        }
    }
} 
```

这是可拖动对象类

```
namespace drop_test2
{
    struct DragableObject
    {
        public Vector2 Position
        {
            get;
            set;
        }
        public Vector2 Size
        {
            get;
            set;
        }
        public bool IsSelected
        {
            get;
            set;
        }
        public bool IsHover
        {
            get;
            set;
        }

        public bool CheckHover(Vector2 vector2)
        {
            Rectangle r = new Rectangle((int)(this.Position.X - this.Size.X * .5), (int)(this.Position.Y - this.Size.Y * .5f),
                (int)this.Size.X, (int)this.Size.Y);
            if (r.Contains((int)vector2.X,(int)vector2.Y))
            {
                this.IsHover = true;
                return true;
            }
            this.IsHover = false;
            return false;
        }
    }
} 
```

有人想帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:32:46.983

如果您使用`CopyTo()`c# 内部引用原始数组。如果你想创建一个新实例，你必须使用`Clone()`.

例子：

```
object[] src = { "a", "b" };
var dest = src.Clone() as object[];

src[0] = "c";
//// dest still contains "a","b" 
```

另请参阅：[System.Array.CopyTo() 和 System.Array.Clone() 之间的区别](https://stackoverflow.com/questions/198496/difference-between-the-system-array-copyto-and-system-array-clone)

# jquery - 当按下回车键时触发 shift 键按下 - Jquery

> ID：15986172
> 
> 赞同：0
> 
> 时间：2013-04-13T09:10:18.340
> 
> 标签：jquery, keydown

我在 jquery 中得到了这段代码-：

```
$('#postBoxEditor').live("keydown",function(e){ 
if(e.which == 13 && !e.shiftKey){ e.preventDefault(); 
var triggerevent = jQuery.Event("keydown"); triggerevent.which = 16; //shift key code
$(this).trigger(triggerevent); }             }); 
```

但这不会在按下 enter 时触发 shift 键，这就是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:25:03.740

如果您收听具有此事件的对象，那么魔术就会发生，如果按下 e.shiftKey 则为真，因此您需要擦除“！”

```
top.addEventListener('keydown', function(e){
   if(e.shiftKey) {
     /* do nice stuff.. */
   }
}, false); 
```

同样适用于：e.altKey；e.ctrlKey；e.元密钥；

您的代码应如下所示：

```
$('#postBoxEditor').on("keydown",function(e){
    if((e.keyCode == 13) && e.shiftKey) {
        e.preventDefault(); 
    }
}); 
```

希望就是这样！:)

但你想要的是。

```
<script>
var enterflag=false;
var shiftenterflag=false;
$(document).ready(function() {
    $('#in').on('keydown',function(e){
        if(e.keyCode==13) enterflag=true;
        if(e.keyCode==16 && enterflag) {
            shiftenterflag=true;
            $('#report').show();
        }
    });
    $('#in').on('keyup',function(e){
        if(e.keyCode==16 && enterflag) $('#report').hide();
        if(e.keyCode==13) { 
            enterflag=false;
            shiftenterflag=false;
        }                
    });
});
</script>
<label>press enter and shift while focus in input to show the magic</label>
<input type="text" id="in" value="press enter and shift" style="with:200px" />
<div id="report" style="display:none">test</div> 
```

这会触发 enter+shift 但不会触发 shift+enter

# jquery - Jquery在ajax成功fn中解析json响应

> ID：15986174
> 
> 赞同：0
> 
> 时间：2013-04-13T09:10:58.977
> 
> 标签：jquery, json

我有一个ajax fn。我的数据变量给了我这个响应

```
[{"id":1,"name":"x"},{"id":2,"name":"y"},{"id":3,"name":"z"}] 
```

我如何获得身份证，姓名。我尝试使用

```
JSON.Parse(data[i])
    for(var i=0; i <data.length; i++){
      console.log(data[i].id);
    } 
```

我的控制台显示数据意外结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:12:23.497

```
 data = JSON.parse(data)
    for(var i=0; i <data.length; i++){
      alert(data[i].id);
      alert(data[i].name);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T09:14:27.763

使用这个。它可能会有所帮助

```
data=$.parseJSON(data)
$.each(data,function(i,e){
    alert(e.id);
}); 
```

# ruby-on-rails - 在这种情况下如何检索所有相关记录？

> ID：15986177
> 
> 赞同：0
> 
> 时间：2013-04-13T09:11:40.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用名为“mailboxer”的 gem，它在 App 中提供消息传递系统。
( [https://github.com/ging/mailboxer](https://github.com/ging/mailboxer) )

我可以通过这样的编码来检索 current_user 的消息

```
@messages = current_user.mailbox.inbox.page(params[:page]).per(10) 
```

如果我想检索管理模式的所有消息怎么办？我该如何编码？

我试过这个

```
@users = User.find(:all)
@messages = @users.mailbox.inbox.page(params[:page]).per(10) 
```

但是，它返回了这个错误:(

```
NoMethodError (undefined method `mailbox' for #<Array:0x0000001976ce38>):
  app/controllers/messages_controller.rb:55:in `admin_mode' 
```

# php - php simple_load_string 总是在格式良好的 xml 文档上返回零数据

> ID：15986179
> 
> 赞同：-1
> 
> 时间：2013-04-13T09:12:00.137
> 
> 标签：php, xml

我一直在尝试使用简单的加载字符串将许多 XML 文件加载到 PHP 页面中。听起来很奇怪，没有一个加载，并且全部返回为`empty`.

我可以使用加载它们，`$xmldoc = new DomDocument( '1.0' );`并且可以直接在浏览器中查看所有内容。我真的很沮丧，因为我不明白为什么他们应该无法加载。

我正在使用离线开发 - Win7 proff，XAMPP 版本：1.8.1，加载了 PHP 5.4。

我的简单加载代码示例：

```
$xml = simplexml_load_string('menu45.xml');
        if ( !$xml ) {
            echo "empty!!!!";
           // return 'Error';
        } 
```

我希望有人能告诉我在 Windows 机器上使用简单的加载字符串是否存在问题，或者 PHP 5.4 中是否存在错误，或者 XAMPP 存在问题或其他问题。

在 18 小时的时间里，我在谷歌上搜索并阅读了所有我能读到的东西，但并不快乐。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:14:19.780

[simplexml_load_string()](http://www.php.net/manual/en/function.simplexml-load-string.php)加载字符串，而不是文件....并且不是格式`"menu45.xml"`良好的 xml 字符串。请改用[simplexml_load_file()](http://www.php.net/manual/en/function.simplexml-load-file.php)。

# android - edittext 自动调整高度

> ID：15986185
> 
> 赞同：1
> 
> 时间：2013-04-13T09:13:09.880
> 
> 标签：android, android-edittext

我有一个编辑文本，现在是单行高度。然后我继续输入字母，直到它改变一个新行。如何根据新行变化增加edittext高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:20:46.980

edittext.getLayoutParams().height=28;

look up display metrics for using dp instead of px

also check if edittext has a setMinLines() method you can use. I have not checked.

# regex - 正则表达式中的 OR 条件

> ID：15986187
> 
> 赞同：66
> 
> 时间：2013-04-13T09:13:14.357
> 
> 标签：regex

假设我有

```
1 ABC Street
1 A ABC Street 
```

使用`\d`，它匹配***1***（我期望的），使用`\d \w`，它匹配***1 A***（预期）。当我将模式组合在一起时`\d|\d \w`，它只匹配第一个但忽略第二个。

我的问题是在这种特殊情况下如何正确使用“或”条件？

PS：条件是数字只有在后面没有单个字母的情况下才换行，否则将数字和单个字母都换行。

示例：***1 ABC Street***仅匹配编号 1，但当***1 A ABC Street***包裹***1 A***

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-04-13T09:43:57.467

尝试

```
\d \w |\d 
```

或者如果您不想在匹配中包含尾随空格，请添加正向前瞻

```
\d \w(?= )|\d 
```

当你有两种选择，其中一种是另一种的延伸时，将较长的放在第一位，否则将没有机会匹配。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-04-13T09:22:53.747

一个经典的“或”将是`|`。例如，`ab|de`将匹配表达式的任一侧。

但是，对于您的情况，您可能希望使用`?`量词，它将与前一个表达式精确匹配 0 或 1 次（首选 1 次；即它是“贪婪”匹配）。另一种（可能更可靠）的替代方法是使用自定义字符组：

```
\d+\s+[A-Z\s]+\s+[A-Z][A-Za-z]+ 
```

此模式将匹配：

*   `\d+`: 一个或多个数字。
*   `\s+`: 一个或多个空格。
*   `[A-Z\s]+`: 一个或多个大写字符或空格字符
*   `\s+`: 一个或多个空格。
*   `[A-Z][A-Za-z\s]+`: 一个大写字符后跟至少一个字符（大写或小写）或空格。

* * *

如果您想要更静态的检查，例如确实只匹配`ABC`and `A ABC`，那么您可以组合一个（不匹配的）组并在内部定义替代方案（以限制范围）：

```
\d (?:ABC|A ABC) Street 
```

或者使用量词的另一种选择：

```
\d (?:A )?ABC Street 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-04-13T09:46:10.560

我认为您需要的可能很简单：

```
\d( \w)? 
```

请注意，如果您的正则表达式写成`\d \w|\d`而不是`\d|\d \w`.

这是因为在您的情况下，一旦正则表达式匹配第一个选项，`\d`它就会停止搜索新的匹配项，可以这么说。

# java - 分配和创建新的字符串差异

> ID：15986188
> 
> 赞同：7
> 
> 时间：2013-04-13T09:13:14.477
> 
> 标签：java, string

```
 String s1 = new String("string");
        String s2 = new String("string");

        String s3 = "string";
        String s4 = "string";

        System.out.println(s1 == s2);      //FALSE
        System.out.println(s2.equals(s1)); //TRUE

        System.out.println(s3 == s4);      //TRUE
        System.out.println(s3.equals(s4)); //TRUE 
```

**`s1`和 和有什么不一样`s3`**？请告诉我

在 String 中，我们只有 String 对象，那么为什么它会以不同的方式对待这两个对象。s1 和 s2 具有不同的内存地址，而 s3 和 s4 具有相同的内存地址。为什么它基于**`new`**运营商工作。？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T09:19:59.783

`String`在您的 Java 源代码中表示字符串文字的对象在`String`加载定义它们的类时被添加到共享池中¹。这确保了字符串文字的所有“副本”实际上都是同一个对象......即使文字出现在多个类中。这就是`s3 == s4`为什么`true`。

相比之下，当您`new`使用 String 时，会创建一个不同的新 String 对象。这就是`s1 == s2`为什么`false`。（这是 . 的基本属性`new`。保证创建并返回一个新对象......如果它正常完成。）

但是，在任何一种情况下，字符串都将具有相同的字符，这就是为什么`equals`返回`true`.

* * *

虽然了解发生了什么很重要，但*真正的*教训是比较 Java 字符串的*正确*方法是使用`equals`而不是`==`.

如果您想安排您的 String 对象可以使用 进行相等性测试，您可以使用该方法`==`“实习”它们。`String.intern`但是，您必须始终如一地这样做......而且实习在各个方面都是一个昂贵的过程......所以这通常不是一个好主意。

* * *

^(1 - 实际上，它比这更复杂一些。它们的对象在类加载和第一次使用文字之间的某个时间被添加到池中。精确的时间是未指定的，并且依赖于 JVM 实现。但是，它保证只发生一次，并且在任何应用程序代码看到`String`与文字对应的对象引用之前。)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T09:19:16.187

`s1`是一个新的 String 对象，它不属于任何**池化实例**的一部分。`s3`是来自池的字符串的一个实例。查找**java 字符串池**。看一下相关的[intern()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)方法`String`。

这个概念并不是java独有的。其他语言支持[字符串实习。](http://en.wikipedia.org/wiki/String_interning)在该相关说明中，池化常用对象遵循[享](http://en.wikipedia.org/wiki/Flyweight_pattern)元模式，并且不限于字符串。看看`Integer.valueOf()`。整数也有自己的常量池。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T09:15:00.610

JVM 具有自动优化功能。除非您专门创建了一个新`String`对象，并且另一个`String`对象已经存在具有相同的值，否则会`JVM`自动假定新对象不是必需的，并将为您分配一个指向`String`已存在的相等对象的指针。

本质上，当您使用第二个选项时，会发生以下情况：

**第1步**

创建第一个对象没有问题。

**第2步**

在创建第二个对象之前，会检查字符串池的值。如果该值当前存在，则无需创建新对象。它只是返回对`String`对象的引用。

**第 3 步**

它没有被分配一个新的对象，而是简单地给出了对第 1 步中创建的对象的引用。这是为了节省内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T09:20:24.943

发生这种情况是因为`new`运算符强制创建 String 的新实例，而在第二种情况下，作为`String`不可变类，JVM 为两个变量提供相同的 String 实例以节省内存。因为其中一个对象不可能发生变化，从而导致第二个对象也发生变化（不可变，还记得吗？），这没关系。

# android - 在android中创建并写入xml文件

> ID：15986190
> 
> 赞同：1
> 
> 时间：2013-04-13T09:13:46.617
> 
> 标签：android, xml, motionevent

在我的应用程序中，我在 TextView 中显示了一些压力值，我也想将这些值写入 xml 文件中。当任何 MotionEvent 生成时，我的意思是每次值发生变化时我都在触摸屏幕，并且我想在每次更改发生后写入它们。并且该 xml 文件将保存到 sdcard（任何位置）中。这是我的代码片段 public class MainActivity extends Activity implements View.OnTouchListener {

```
 /** Called when the activity is first created. */

     private TextView tvConsole;

        @Override
        public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);
     findViewById(R.id.linearLayout1).setOnTouchListener(this);

     tvConsole = (TextView)findViewById(R.id.txtConsole2);
        }

        @Override
        public boolean onTouch(View view, MotionEvent mEvent) {
        tvConsole.setText( ""+mEvent.getPressure() );

    // System.out.println("Hardware X " + mEvent.getXPrecision()
      //* mEvent.getX());
    // System.out.println("Hardware Y " + mEvent.getYPrecision()
     // * mEvent.getY());
     System.out.println("Pressure " + mEvent.getPressure());
     System.out.println("Size " + mEvent.getSize());          
     return super.onTouchEvent(mEvent);
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:28:51.980

我认为，对您来说最好的解决方案是使用[`SharePreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html). 请仔细阅读文档。

如何去做，很简单。首先，声明您的 SharedPreference 实例。

```
SharedPreferences sharedPrefs = getApplicationContext().getSharedPreferences("pressure_values", Context.MODE_PRIVATE); 
```

`pressure_values.xml`这将在文件夹中创建一个名为 的 XML 文件`/data/data/YOUR_PACKAGE_NAME/shared_prefs/`。此文件将仅对您自己的应用程序私有。

现在将详细信息添加到上面创建的 XML 文件中：

```
Editor editor; = sharedPrefs.edit();

// ADD THE DETAILS TO THE PREFERENCES FILE
editor.putString("Hardware_X", mEvent.getXPrecision());
editor.putString("Hardware_Y", mEvent.getYPrecision());
editor.putString("Pressure", mEvent.getPressure());
editor.putString("Size", mEvent.getSize());

// COMMIT THE ABOVE DATA TO THE PREFERENCE FILE
editor.commit(); // THIS IS VERY IMPORTANT. DO NOT SKIP THIS. THE DATA WILL NOT PERSIST WITHOUT THIS STATEMENT 
```

**注意：**您需要在`onTouch()`. 这将确保将新值写入 XML 文件。

如果值（例如`mEvent.getXPrecision()`：）不是字符串，请在运行上面发布的代码之前将它们转换为字符串。

要再次检索值：

```
String strHardWareX = sharedPrefs.getString("Hardware_X", null);
String strHardWareY = sharedPrefs.getString("Hardware_Y", null);
String strPressure = sharedPrefs.getString("Pressure", null);
String strSize = sharedPrefs.getString("Size", null); 
```

现在，您可以使用`Strings`来执行您的功能，例如，在`TextView`实例中显示值。

如果您将再次访问这些值，请不要忘记`SharedPreferences`再次实例化。

```
SharedPreferences sharedPrefs = getApplicationContext().getSharedPreferences("pressure_values", Context.MODE_PRIVATE); 
```

# unix - 在unix中查找字符串并在行尾附加另一个字符串

> ID：15986192
> 
> 赞同：2
> 
> 时间：2013-04-13T09:14:01.390
> 
> 标签：unix

我有一个格式如下的文件。

```
111286,QWER ,ABCD ,AKL ,A/C ,L ,NZLC ,xyz@msn.com ,+6421365188 ,QN ,All , 
111278,TATA ,BATMAN ,AKL ,CFA ,L ,NZLC , ,00000006672 ,QN ,All , 
```

需要搜索第一个单词并将一个新单词附加到行尾，如下所示

如果搜索模式是`111286`并且新词是`MDW`那么结果将是

```
111286,HAYDEN ,FERGUSSON ,AKL ,A/C ,L ,NZLC ,Dr1fty@msn.com ,+6421365188 ,QN ,All ,MDW,

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T09:24:24.830

您可以尝试使用**sed**：

```
sed -e 's/^\(.*\)111288\(.*\)$/\1111288\2MDW,/g' /path/to/your-file 
```

如果您只想匹配行的开头，那么它看起来像

```
sed -e 's/^111288\(.*\)$/111288\1MDW,/g' /path/to/your-file 
```

如果您不想同时匹配`11128`和`111288`

```
sed -e 's/^111288,\(.*\)$/111288,\1MDW,/g' /path/to/your-file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T09:24:53.677

```
sed '/111286/s/ $/MDW,/' foo.txt 
```

结果

```
111286,QWER ,ABCD ,AKL ,A/C ,L ,NZLC ,xyz@msn.com ,+6421365188 ,QN ,All ,MDW,
111278,TATA ,BATMAN ,AKL ,CFA ,L ,NZLC , ,00000006672 ,QN ,All , 
```

*   搜索`111286`
*   将行尾替换为`MDW,`

# jsf - 复选框和单选按钮选择在 h:selectOneMenu 值更改时被清除

> ID：15986193
> 
> 赞同：1
> 
> 时间：2013-04-13T09:14:02.417
> 
> 标签：jsf, primefaces, datatable, selectonemenu, valuechangelistener

我正在处理一个有两个数据表的表单。在第一个数据表中，我显示单选按钮和复选框，而第二个数据表包含 selectOneMenu(s)。值更改侦听器已在 selectOneMenu 上实现，并且在值更改时，后续字段将根据选择进行填充。一切正常，除了当我从下拉列表中选择值时，复选框和单选按钮值被清除。f:ajax event="change" 已用于 selectOneMenu 上的更改事件。看起来整个页面都被刷新并且值被清除了。我还尝试通过更新存在 selectOneMenu 的数据表的 id 来使用 f:ajax。

```
 <p:dataTable styleClass="borderless" id="inResultTable" var="result" value="#{RequestBean.fooFields}" rendered="#{not empty RequestBean.fooFields}">
    <p:column style="width:150px;">
    <f:facet name="header">
    <h:outputText value=" " />
    </f:facet>
    <h:outputText value="#{msg[result.fldLabel]}" />
    </p:column>
    <p:column>
    <f:facet name="header">
    <h:outputText value="" />
    </f:facet>
    <ui:repeat value="#{RequestBean.fooFields}"
    var="itm">
    <h:selectOneMenu value="#{itm.indFieldValue}"
    rendered="#{result.lvlid==itm.lvlid}"
    style="width:250px;padding-right:150px;text-align: left;">
    <f:selectItems value="#{RequestBean[itm.indField]}" />
    </h:selectOneMenu>
    <h:selectOneRadio value="#{itm.indFieldValue}" rendered="#{result.lvlid==itm.lvlid and result.fldType=='radio'}"
    style="width:250px;padding-right:150px;text-align: left;">
    <f:selectItems value="#{RequestBean[itm.indField]}" />
    </h:selectOneRadio>
    <h:selectManyCheckbox value="#{itm.indFieldCheckBox}" rendered="#{result.lvlid==itm.lvlid and result.fldType=='selectbox'}">
    <f:selectItems value="#{RequestBean[itm.indField]}" />
    </h:selectManyCheckbox>
    </ui:repeat>
    </p:column>
    </p:dataTable>

    <p:dataTable styleClass="borderless"
    id="resultTable" var="result"
    value="#{RequestBean.depFields}">
    <h:selectOneMenu value="#{RequestBean.field4Value}"
    valueChangeListener="#{RequestBean.processValueChange4}"
    rendered="#{result.lvlid=='5' and result.fldType=='selectbox'}"
    style="width:250px;padding-right:150px;text-align: left;">
    <f:selectItem itemLabel="--Please Select--" itemValue="#{null}" />
    <f:selectItems value="#{RequestBean[result.field]}" />
    <f:ajax event="change" render="@form" />
    </h:selectOneMenu>
    ...
    ...

    </p:dataTable> 
```

注意：要求是带有复选框和单选按钮的数据表必须放在顶部。ID 不能用于第二个表中的 selectOneMenu，因为我根据数据库中的条目动态填充了 selectOneMenu(s)。我知道这可能是一个简单的问题，但大多数网站上发布的信息都没有运气。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T01:44:13.717

这是你的`<f:ajax>`。

```
<f:ajax event="change" render="@form" /> 
```

您没有指定`process`属性。所以默认为`@this`，表示提交时只处理当前输入组件。但是，您指定了`render`整个表单的 a。所以整个表格都会被刷新。但是，在提交期间未处理其他输入组件。因此它们的模型值不会被更新，这意味着在渲染响应期间，将重新显示初始值而不是提交的值，在您的情况下，这些值显然是空白/空。

你基本上有两个选择：

1.  在提交期间处理整个表单。

    ```
     <f:ajax process="@form" render="@form" /> 
    ```

2.  或者，只更新那些真正需要更新的组件。

    ```
     <f:ajax render="clientId1 clientId2 clientId3" /> 
    ```

在*您的特定情况下*，我认为选项 2 不可行，因此选项 1 是最好的选项。请注意，我省略了该`event`属性。它默认为`change`已经。

* * *

**与具体问题无关**，我不确定您在值更改侦听器方法中都在做什么，但我只想指出，大多数初学者滥用它来操纵模型值并且它并不总是完全按预期工作（根本没有反映更改的模型值）。如果您的情况是这样，那么您实际上应该使用它`<f:ajax listener>`。

### 也可以看看：

*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener/11883021#11883021)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T19:51:59.400

在值更改侦听器后清除复选框和单选按钮的值的主要原因可能是模型值未更新。

在更新模型之前调用值更改侦听器。

对于这类问题，了解 JSF 生命周期非常重要。

请在您的值更改侦听器中尝试以下代码并查看。

```
public void valueChange(ValueChangeEvent event){

    PhaseId phase = event.getPhaseId();
    if (phase.equals(PhaseId.ANY_PHASE))
    {
        event.setPhaseId(PhaseId.UPDATE_MODEL_VALUES);
        event.queue();
        return;
    }
    if(!phase.equals(PhaseId.UPDATE_MODEL_VALUES))
    {
        return;
    }
    // Your code
} 
```

我没有在您的示例中尝试此代码。如果它不起作用，请用完整的示例源代码告诉我。

谢谢。

# mysql - 使用左连接时sql连接不起作用

> ID：15986197
> 
> 赞同：1
> 
> 时间：2013-04-13T09:14:34.130
> 
> 标签：mysql, sql, join

我有两张桌子：

**帖子**

*   ID
*   标题
*   内容

**附件**

*   ID
*   post_id
*   文件名

**我想搜索具有文件名包含“.txt”的附件的帖子。**

我已经使用了我知道的所有类型的 JOIN，但仍然无法使其正常工作。

```
SELECT posts.*, filename FROM posts LEFT JOIN attachments ON posts.id = attachments.post_id WHERE filename LIKE '%.txt%' 
```

上面的 SQL 不返回任何行。当我使用 RIGHT JOIN 时，它返回行，但只有文件名列有值，表中的列**`posts`**都包含 NULL。

有什么帮助吗？

**更新**

很抱歉，这一定是 MySQL 的问题。我重新启动了 MySQL 服务器，查询现在可以工作了。对不起，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:24:05.303

利用`INNER JOIN`

```
SELECT 
   posts.*, 
   filename 
FROM posts 
INNER JOIN attachments 
  ON posts.id = attachments.post_id 
WHERE attachments.filename LIKE '%.txt%' 
```

[演示：](http://www.sqlfiddle.com/#!3/6e758/1)

# java - 使用 ActionRequest Actionresponse 将参数从 java 类传递给 jsp

> ID：15986199
> 
> 赞同：0
> 
> 时间：2013-04-13T09:14:46.843
> 
> 标签：java, jsp, liferay-6, request-object

我有一个功能说：

```
 public void display(ActionRequest areq, ActionResponse ares) throws Exception,PortletException,IOException {

 String name= areq.getParameter("name");
 String add= areq.getParameter("add");
 String phone= areq.getParameter("phone");
} 
```

我有一个 jsp 说 disp.jsp 它将用户输入传递给上述函数显示。现在我在 display() 函数中对上述数据进行了一些处理后，我想在一个 jsp 页面上显示结果，比如 new.jsp。我应该如何继续它？我试过类似的东西：

```
areq.setAttribute("name",name);
areq.getRequestDispatcher("new.jsp").forward(areq, aresp); but it shows an error that getRequestDispatcher is not defined for actionrequest and actionresponse. 
```

我正在使用 liferay 框架

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T07:12:01.043

在您的操作中，您可以设置属性并像这样设置重定向页面：

```
public void display(ActionRequest aReq, ActionResponse aResp){

    aReq.setAttribute("name",name);

    aResp.setRenderParameter("jspPage", "/new.jsp");
} 
```

我通常更喜欢设置属性而不是参数，因为它允许传递非 Sting 变量。然后，在jsp中你可以得到属性

```
<%
String name = (String)renderRequest.getAttribute("name");   
%> 
```

只要记住包括这个，就可以访问 renderRequest 对象

```
<portlet:defineObjects /> 
```

# go - Golang：计算数字的反对数

> ID：15986200
> 
> 赞同：0
> 
> 时间：2013-04-13T09:14:52.493
> 
> 标签：go, logarithm

我想知道你是如何计算一个数字的反对数的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:20:52.617

根据对数的底数使用[Pow10()](http://golang.org/pkg/math/#Pow10)或[Pow() 。](http://golang.org/pkg/math/#Pow)

如果 ，则以 10 为底`a = log b (base10)`的反对数为`a``b`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T09:21:14.477

例如：

```
package main

import (
        "fmt"
        "math"
)

func main() {
        for f := 1.0; f < 10; f *= 1.1 {
                fmt.Printf("10^%15f == %18f\n", f, math.Pow(10, f))
        }
} 
```

[操场](http://play.golang.org/p/oZKFx_Pk1k)

* * *

输出

```
10^       1.000000 ==          10.000000
10^       1.100000 ==          12.589254
10^       1.210000 ==          16.218101
10^       1.331000 ==          21.428906
10^       1.464100 ==          29.113874
10^       1.610510 ==          40.785895
10^       1.771561 ==          59.096397
10^       1.948717 ==          88.862208
10^       2.143589 ==         139.183839
10^       2.357948 ==         228.006743
10^       2.593742 ==         392.412163
10^       2.853117 ==         713.044618
10^       3.138428 ==        1375.397963
10^       3.452271 ==        2833.160736
10^       3.797498 ==        6273.332921
10^       4.177248 ==       15040.011538
10^       4.594973 ==       39352.559693
10^       5.054470 ==      113362.727116
10^       5.559917 ==      363008.933932
10^       6.115909 ==     1305897.362804
10^       6.727500 ==     5339492.112719
10^       7.400250 ==    25133324.832458
10^       8.140275 ==   138125842.074790
10^       8.954302 ==   900124188.827650
10^       9.849733 ==  7075101518.596476 
```

# xcode - 如何将文本发送到 xcode 中另一个视图控制器中的标签？

> ID：15986203
> 
> 赞同：0
> 
> 时间：2013-04-13T09:15:05.590
> 
> 标签：xcode, storyboard, label

我是 xcode 的新手，我不能说我对此非常了解，这是我的问题。我正在尝试将标签中的文本从 tableViewController 设置为 ViewController，但 explain.label setText:@"blabla" 似乎不起作用，我得到一个空白屏幕。标签在VC中。

我不知道它是否足够清楚让你能够提供帮助，但我被困住了。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:44:27.003

您需要分配变量`public`，以便其他 obj-c 文件可以“看到”它。确保您的观点`#import`彼此，并查看[此线程](https://stackoverflow.com/questions/7081245/global-variables-in-xcode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T08:18:25.640

首先将数据存储在 FirstTableViewController.m 中：

```
NSUserDefaults *x = [NSUSerDefaults standardUserDefaults ];
[x setObject : "putyourtext/yourselectedindexpath"] forKey : @"giveaname"]; 
```

然后你调用另一个控制器 SecondViewController.m 中的数据：

```
NSUserDefaults *x = [NSUserDefaults standardUserDefaults];
NSString *mystring = [x stringForKey:@"giveaname"];

self.nameLabel.text = mystring; 
```

# node.js - 如何在 node.js 客户端中进行身份验证

> ID：15986204
> 
> 赞同：11
> 
> 时间：2013-04-13T09:15:07.733
> 
> 标签：node.js, basic-authentication, node.js-client

我想通过身份验证来使用这个 rest api。我正在尝试包含标题但没有得到任何响应。它正在抛出一个通常在没有身份验证时抛出的输出。谁能建议我一些解决方案。下面是我的代码

```
var http = require('http');

var optionsget = {
    host : 'localhost', // here only the domain name

    port : 1234,

    path:'/api/rest/xyz',
            headers: {
     'Authorization': 'Basic ' + new Buffer('abc'+ ':' + '1234').toString('base64')
   } ,
    method : 'GET' // do GET

};

console.info('Options prepared:');
console.info(optionsget);
console.info('Do the GET call');

var reqGet = http.request(optionsget, function(res) {
    console.log("statusCode: ", res.statusCode);

    res.on('data', function(d) {
        console.info('GET result:\n');
        process.stdout.write(d);
        console.info('\n\nCall completed');
    });

});

reqGet.end();
reqGet.on('error', function(e) {
    console.error(e);
}); 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-13T14:13:46.997

[请求](https://github.com/mikeal/request)模块将使您的生活更轻松。它现在包括一个[基本身份验证](https://github.com/mikeal/request#http-authentication)作为选项，因此您不必自己构建标题。

```
var request = require('request')
var username = 'fooUsername'
var password = 'fooPassword'
var options = {
  url: 'http://localhost:1234/api/res/xyz',
  auth: {
    user: username,
    password: password
  }
}

request(options, function (err, res, body) {
  if (err) {
    console.dir(err)
    return
  }
  console.dir('headers', res.headers)
  console.dir('status code', res.statusCode)
  console.dir(body)
}) 
```

安装请求执行`npm install -S request`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-24T10:53:46.027

在您的评论中，您问：“我在命令提示符中获得的 JSOn 有什么方法可以通过 javascript 或 Jquery 或任何方式进入 UI。”

嘿，把尸体还给你的客户：

```
exports.requestExample = function(req,res){
  request(options, function (err, resp, body) {
    if (err) {
      console.dir(err)
      return;
    }
    // parse method is optional
    return res.send(200, JSON.parse(body));
  });
}; 
```

# php - php + mysql + 查询错误

> ID：15986205
> 
> 赞同：0
> 
> 时间：2013-04-13T09:15:08.063
> 
> 标签：php, mysql, insert

我有一个包含 2 个表的数据库

用户

*   用户名，
*   名，
*   姓，
*   地址，
*   区名，
*   村名，
*   出生日期，
*   电子邮件地址，
*   专业化_id，
*   密码，
*   注册日期

专业化

*   专业化编号
*   专业化名称

我编写了这两个查询，首先从用户表中相同的专业表中选择 specialization_id

在第二个查询中，
我需要在用户表中插入 specialization_id 作为专用表的外键，但出现错误**Resource id #7**

# 查询 1

```
 $query_select_spec = mysql_query("SELECT specialization_name FROM specialization, user WHERE user.specialization_id = specialization.specialization_id")or die(mysql_error());
    echo $query_select_spec; 
```

# 查询 2

```
 $query = mysql_query("INSERT INTO user(user_name, first_name, last_name, address, district_name, village_name, birth_date, email_address, specialization_name, password, registered_date)VALUES('$username', '$fname', '$lname', '$country', '$district', '$village', '$bdate', '$email', '$specialization', '$pass1',  now())")or die("could not insert data"); 
```

# 这是寄存器 .php 的代码

```
<?php require_once('for members/scripts/connect.php'); ?>

<?php
ob_start();
 function countryQuery(){

  $countryData = mysql_query("SELECT * FROM country") or die("could select database");

  while($record = mysql_fetch_array($countryData)){

     echo'<option value="' . $record['country_name'] .  '">' . $record['country_name'] . '</option>';

  }

}

function specializationQuery(){

$specData = mysql_query("SELECT * FROM specialization");

  while($recordJob = mysql_fetch_array($specData)){

     echo'<option value="' . $recordJob['specialization_name'] .  '">' . $recordJob['specialization_name'] . '</option>';

  }

}

function districtQuery(){

$distData = mysql_query("SELECT * FROM districts");

  while($recorddist = mysql_fetch_array($distData)){

     echo'<option value="' . $recorddist['district_name'] .  '">' . $recorddist['district_name'] . '</option>';

  }

}

function villageQuery(){

$villageData = mysql_query("SELECT * FROM village");

  while($recordvillage = mysql_fetch_array($villageData)){

     echo'<option value="' . $recordvillage['village_name'] .  '">' . $recordvillage['village_name'] . '</option>';

  }

}

 //default value
$message = "Fields Marcked with an [*] are Required";
  $username = "";
  $fname = "";
  $lname = "";
  $specialization = "";
  $email = "";
  $pass1 = "";
  $pass2 = "";
  $district = "";
  $village = "";

if(isset($_POST['username'])){
  $username = $_POST['username'];
  $fname = $_POST['fname'];
  $lname = $_POST['lname'];
  $email = $_POST['email'];
  $pass1 = $_POST['pass1'];
  $pass2 = $_POST['pass2'];
  $bdate = $_POST['birthdate'];
  $country = $_POST['country'];
  //$local_adress = $_POST['adress'];
  $specialization = $_POST['specialization'];
  $district = $_POST['district'];
  $village = $_POST['village'];

  //error handeling
  if((!$username)||(!$fname)||(!$lname)||(!$email)||(!$pass1)||(!$pass2)||(!$specialization)||(!$district)||(!$village)){
  $message = "**** Please insert the Required Fields below ****<br />";

  if($fname == "")
 {
     $message = $message . "Enter First name<br/>";
 }
  if($lname == "")
 {
     $message = $message . "Enter Last name<br/>";
 }

 if($specialization == 0)
 {
     $message = $message . "Select Your Job<br />";
 }
 if($district == 0)
 {
     $message = $message . "Select Your District<br />";
 }
 if($village == 0)
 {
     $message = $message . "Select Your Village<br />";
 }
 if($email == "")
 {
     $message = $message . "Enter Email Adress<br/>";
 }
  if ($username == "") {
    $message = $message . "Enter User Name<br/>";
  }

  if($pass1 == "")
 {
     $message = $message . "Enter password<br/>";
 }

  if($pass2 == "")
 {
     $message = $message . "rechek the password <br/>";
 }

 } 

     elseif(strlen($pass1) <= 8)
    {
     $message = $message . "Your Password must be at least 8 charachters<br />";
}
   else if($pass1!=$pass2){
   $message = "your password do not match!";
   }else{
   //securing the data
   $username = preg_replace("#[^0-9a-z]#i","",$username);
   $fname = preg_replace("#[^0-9a-z]#i","",$fname);
   $lname = preg_replace("#[^0-9a-z]#i","",$lname);
   //$pass1 = sha1($pass1);

   $email = mysql_real_escape_string($email);
   // checking for duplicate
   $user_query = mysql_query("SELECT user_name FROM user WHERE user_name = '$username'LIMIT 1") or die("could not check the username");
   $count_username = mysql_num_rows($user_query);

    $email_query = mysql_query("SELECT email_address FROM user WHERE email_address = '$email'LIMIT 1") or die("could not check the email");
   $count_email = mysql_num_rows($email_query);

    if($count_username > 0){
     $message = " your username is alredy in use";
    }elseif($count_email > 0){
      $message = "your email is alredy in use";
    }
   else{
    $query_select_spec = mysql_query("SELECT specialization_name FROM specialization, user WHERE user.specialization_id = specialization.specialization_id")or die(mysql_error());

    echo $query_select_spec;
    exit();
      $query = mysql_query("INSERT INTO user(user_name, first_name, last_name, address, district_name, village_name, birth_date, email_address, specialization_id, password, registered_date)VALUES('$username', '$fname', '$lname', '$country', '$district', '$village', '$bdate', '$email', '$specialization', '$pass1',  now())")or die("could not insert data");    

    $message = "you have  now been registered";
    //from the social website

    $getid = mysql_fetch_array($query);
            $_SESSION['user_id'] = $getid['user_rid'];
            $_SESSION['login'] = 'true';
            $_SESSION['login_user'] = $getid['username'];
    //header("Location: home.php");
    }
   }
 }

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Register Page</title>
<link href="style/stylesheet.css" rel="stylesheet" type="text/css" />
<link href="style/imagesGallery.css"rel="stylesheet" type="text/css"/>
<script src="js/main.js" type="text/javascript"></script>
<script src="js/jquery.js" type="text/javascript"></script>
</head>

<body>

<table width="200" border="0" align="center">
<tr>
  <tr>
    <td><img src="web_header copy.jpg" alt="visitor header" width="1080" height="128" /></td>
  </tr>
  <tr>

     <td>
       <marquee direction="left" width="99%" behavior="alternate">
        <img src="imggallery/images/akoura/akoura_small.jpg" width="119" height="91">
        <img src="imggallery/images/ballaa2/ballaa2_small.jpg" width="119" height="91">
        <img src="imggallery/images/baalbeck/baalbek_small.jpg" height="92">
        <img src="imggallery/images/barouk/cedre_barouk_small.jpg" width="119" height="91">
        <img src="imggallery/images/batroun/batroun_small.jpg" width="119" height="91">
        <img src="imggallery/images/bchareh/bchareh_small.jpg" width="119" height="91">
        <img src="imggallery/images/beiteldin/beiteldine_small.jpg" width="119" height="91">
        <img src="imggallery/images/beyrouth/beyrouth_small.jpg" width="119" height="91">
        <img src="imggallery/images/beyrouth/beyroyj frm sky/beyrouthfromSky_small.jpg" width="119" height="91">
        <img src="imggallery/images/deir el mara/deirelamar_small.jpg" width="119" height="91">
        </marquee>
        <hr />
       <h2 class="registerTitle">Registration Fields</h2>
       <h4 class="registerTitle">Sign Up Today....</h4>
 <!-- <div class="container center"> -->
       <p style="color:#FF0000" align="center"><?php print("$message")?></p>
    </td>

    <tr>
        <table width="680" border="0" align="center">
        <form action="register.php" method="post">

         <td> 
        </span><label for="firstname"><span class="Fields">First Name</span> <span class="requiredField">*</span></label></td>
        <td>
        <input type="text" name="fname" placeholder="Firstname" /></td>

      <td><span class="Fields">Last Name</span><span class="requiredField">*</span></label></td>

      <td><input type="text" name="lname" placeholder="Lastname" /></td>

    <tr>
      <td><label for="birthdate" class="Fields">Birth Date                     </label></td>
      <td><input type="date" name="birthdate" value= "YYYY_MM_DD"  onfocus="if (this.value == 'YYYY_MM_DD') {this.value = '';}" onblur="if (this.value == '') {this.value = 'YYYY_MM_DD';}" />
        <br /></td>

    </tr>

    <tr>
      <td class="Fields"><label for="country">Country</label></td>
      <td><select name="country"  class="select">
      <option value="0">-- Select Your Country --</option>
        <?php countryQuery(); ?>
      </select></td>
      <td class="Fields"><label for="specialisation">Specialisation <span class="requiredField">*</span></label></td>
      <td><select name="specialization"  class="select">
      <option value="0">-- Select Your Specialization --</option>

        <?php specializationQuery(); ?>
      </select></td>

    </tr>

    <tr>
      <td class="Fields"><label for="district">District<span class="requiredField">*</span></label></td>
      <td><select name="district"  class="select">
      <option value="0">-- Select Your District --</option>

        <?php districtQuery(); ?>
      </select></td>

      <td class="Fields"><label for="village">Village<span class="requiredField">*</span></label></td>
      <td><select name="village"  class="select">
      <option value="0">-- Select Your Village --</option>

        <?php villageQuery(); ?>
      </select></td>

    </tr>

    <tr>
      <td class="Fields"><label for="email">Email Adress<span class="requiredField">*</span></label></td>
      <td><input type="text" name="email" placeholder="Email Adress" />
        <br /></td>
      <td><label for="username"><span class="Fields">User Name</span> <span class="requiredField">*</span></label></td>
      <td><input type="text" name="username" placeholder="Username" />
        <br /></td>

    </tr>

    <tr>
      <td class="Fields"><label for="password">Password<span class="requiredField">*</span></label></td>
      <td><input type="password" name="pass1" placeholder="Password" />
        <br /></td>
      <td class="Fields"><label for="password2">Re_Password<span class="requiredField">*</span></label></td>
      <td><input type="password" name="pass2" placeholder="Validate Password" />
        <br /></td>

    </tr>

    <tr>
      <td></td>
      <td></td>
      <td><input type="submit" value="Register"/></td>
      <td></td>
    </tr>

  </form>
</table>
<!--</div>-->
  </tr>

  <tr>
    <td><?php require_once('footer.php'); ?></td>
  </tr>
  </tr>
  </tr>
</table>

</body>
</html>
<?php ob_end_flush(); ?> 
```

任何人都可以帮助我？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T09:18:17.493

这不是错误，它是 mysql_query 返回的。
要获取值，您应该遍历 mysql 结果

```
while($row = mysql_fetch_assoc($query))
    print_r($row); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:20:24.423

query1= 您在用户字段中没有 specilization_id。并且您`user`在第二个查询中尝试使用 it-user.specialization_id 而不是 user 因为它可能是关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T09:30:32.223

首先，我建议您不要使用旧的和过时的 mysql 扩展，而是升级到 mysqli 或 PDO 扩展。您认为没有错误，您只需要遍历结果即可。

我会使用 mysqli 扩展来这样做。

```
//Connect to the db using the mysql improved extension
$mysqli = new mysqli("localhost", "user", "password", "database");
if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

//Select spec
$query = "SELECT specialization_name FROM specialization, user WHERE user.specialization_id = specialization.specialization_id";
$result = $mysqli->query($query);

//Print results
while($data = $result->fetch_assoc()){
echo'<pre>'; // Format your dump as code
var_dump($data);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T09:22:33.217

```
$query_select_spec = mysql_query("SELECT specialization_name FROM specialization, user WHERE user.specialization_id = specialization.specialization_id")or die(mysql_error());
$row_select_spec = mysql_fetch_assoc ($query_select_spec);

$specialization = $row_select_spec['specialization_name'];

$query = mysql_query("INSERT INTO user(user_name, first_name, last_name, address, district_name, village_name, birth_date, email_address, specialization_name, password, registered_date)VALUES('$username', '$fname', '$lname', '$country', '$district', '$village', '$bdate', '$email', '$specialization', '$pass1',  now())") or die("could not insert data"); 
```

# java - NullPointerException 继续

> ID：15986208
> 
> 赞同：-1
> 
> 时间：2013-04-13T09:15:27.480
> 
> 标签：java, swing, nullpointerexception, jpanel

当我试图从 Panel1 类的 Next JButton 触发动作事件时调用 Panel2 类的 JPanel panel2，我得到 NullPointerException。如何解决这个问题？请帮忙。

```
public class PanelEventTest
{

/**
 * @param args
 */
JFrame frame;

void originalFrame()
{
    frame = new JFrame();
    frame.setSize(500, 300);
    frame.setVisible(true);
    frame.setLayout(new FlowLayout());
    frame.add(new TestPanel1().panel1());
    frame.add(new TestPanel2().panel2());
}

public static void main(String[] args) {
    // TODO Auto-generated method stub
    new PanelEventTest().originalFrame();
}
}

public class TestPanel1
{
JPanel panel1;
JButton next;

JPanel panel1()
{
    panel1 = new JPanel();
    next = new JButton("Next");
    next.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e) 
        {
            // TODO Auto-generated method stub
            new TestPanel2().panel2.removeAll();
        }
    });
    panel1.add(next);
    return panel1;
}
}
public class TestPanel2
{
JPanel panel2;
JList jlist;
String[] list = {"Sachin","Tarun","Vipin"};
JPanel panel2()
{
    panel2 = new JPanel();
    jlist = new JList(list);
    panel2.add(jlist);
    panel2.add(new JLabel("Test"));
    return panel2;
}
} 
```

我最后一个关于[JPanel 的 Nullpointerexception](https://stackoverflow.com/questions/15979304/nullpointerexception-with-jpanel)问题已被你们成功解决。请帮忙。这个例外正在吃我的头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:18:48.763

如果您尝试更改此行：

```
new TestPanel2().panel2.removeAll(); 
```

至：

```
new TestPanel2().panel2().removeAll(); 
```

会解决问题，但目前的逻辑是有缺陷的。

## 更好的解决方案是：

更改`TestPanel2`为：

```
public class TestPanel2 {
    JPanel panel2;
    JList jlist;
    String[] list = { "Sachin", "Tarun", "Vipin" };

    public TestPanel2() { // was: JPanel panel2() {
        panel2 = new JPanel();
        jlist = new JList(list);
        panel2.add(jlist);
        panel2.add(new JLabel("Test"));
                      // was: return panel2;
    }
} 
```

然后修改`TestPanel1`为：

```
public class TestPanel1 {
    JPanel panel1;
    JButton next;

    public TestPanel1(final JFrame frame, TestPanel2 tp2) { // was: JPanel panel1() {
        panel1 = new JPanel();
        next = new JButton("Next");
        final JPanel panel2 = tp2.panel2; // line created
        next.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                // TODO Auto-generated method stub
                panel2.removeAll(); // was: new TestPanel2().panel2.removeAll();
                frame.validate(); // line created
                frame.paint(); // line created
            }
        });
        panel1.add(next);
                         // was: return panel1;
    }
} 
```

最后，在 上`PanelEventTest.originalFrame()`，更改：

```
frame.add(new TestPanel1().panel1());
frame.add(new TestPanel2().panel2()); 
```

至：

```
TestPanel2 tp2 = new TestPanel2();
frame.add(new TestPanel1(frame, tp2).panel1);
frame.add(tp2.panel2);
frame.validate();
frame.repaint(); 
```

## 解释

当您需要构造函数时，您正在创建方法。您**必须**阅读以下内容：[了解构造函数](http://www.javaworld.com/jw-10-2000/jw-1013-constructors.html)。

此外，您需要传递`TestPanel2`和`frame`to `TestPanel1`：

*   您的代码正在创建一个新的`TestPanel2`（未连接到任何人），然后调用`removeAll()`它的面板。这根本没有效果（因为此面板未在任何地方显示）。
*   更改后的代码将调用`removeAll()`' `TestPanel1`s 面板。
*   此外，每次对组件进行更改时，您都需要重新验证/重新绘制组件。
    *   目前，您在创建`frame`（添加面板）和删除`panel2`（在“下一步”按钮的操作中）时更改它们。

# google-caja - 自动完成示例不起作用

> ID：15986214
> 
> 赞同：0
> 
> 时间：2013-04-13T09:16:41.477
> 
> 标签：google-caja

我正在尝试运行`http://caja.appspot.com/?es5=false#examples/jquery-autocomplete.html`。当我在文本框中输入内容时，我在控制台中看到错误：

```
Domado: HTMLLIElement is not tamed; its specific properties/methods will not be available on < li >. 
```

我在 Mac-Chrome 上试过

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:35:22.867

我不确定是不是这样，但你可以尝试自动检测模式

[http://caja.appspot.com/?es5=auto#examples/jquery-autocomplete.html](http://caja.appspot.com/?es5=auto#examples/jquery-autocomplete.html)

# c# - 通过方法显示所有子窗体

> ID：15986215
> 
> 赞同：0
> 
> 时间：2013-04-13T09:16:56.097
> 
> 标签：c#, mdichild, mdiparent

我有一个 mdi 表单，主菜单上有很多子表单，我使用这样的代码打开子表单：

```
 frmCustomers yeni = new frmCustomers();
        if (GenelIslemler.formAuthCheck(yeni.Name.ToString()))
        {
            if (!IsOpen(yeni.Name.ToString()))
            {
                yeni.MdiParent = this;
                yeni.WindowState = FormWindowState.Maximized;
                yeni.Show();

            }
        }
        else
        {
            MessageBox.Show("You dont have rights to access!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        } 
```

但我想编写一个方法，然后调用该方法的表单，例如

openForm(frmCustomers);

和 openForm 方法应该是这样的

openForm(Form frm) {...}

我能怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:38:47.973

这适用于每个 NET 应用程序中内置的反射系统

```
using System.Reflection;

private void openForm(string formName)
{
    // First check if this form is authorized 
    if (GenelIslemler.formAuthCheck(formName))
    {
        // Then check if is already opened
        if (!IsOpen(formName))
        {
            // And now transform that string variable in the actual form to open

            // This is the critical line. You need the fully qualified form name. 
            // namespace + classname 
            Type formType = Type.GetType ("RapunzoApps.ThisApp." + formName);
            ConstructorInfo ctorInfo = formType.GetConstructor(Type.EmptyTypes);
            Form theForm = (Form) ctorInfo.Invoke (null);
            theForm.MdiParent = this;
            theForm.WindowState = FormWindowState.Maximized;
            theForm.Show();
        }
    }
    else
    {
        MessageBox.Show("You dont have rights to access!", "uyarı", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

# html - 如何通过 css 添加大的褪色文本背景？

> ID：15986216
> 
> 赞同：8
> 
> 时间：2013-04-13T09:17:05.807
> 
> 标签：html, css, zune

我希望在 CSS 中创建一个 Zune/Microsoft 风格的超大标题，以便 div 后面有一个半透明的文本。

![例子](https://i.stack.imgur.com/NeXZc.jpg)

有任何想法吗？我希望让它尽可能不依赖插件和图像——但重要的是文本可以溢出（不可见），并且可以更改（可能通过 JS）。它必须能够稍微溢出而不出现在div之外；也就是说，注意“文本”字母的底部；这相当于`bottom: -5px;`CSS 中的设置。

这是我正在考虑的：

```
#about_big {
    font-family: "Proxima Light", sans-serif;
    font-size: 2000%;
    color: rgba(100, 100, 100, .5);
    overflow: hidden;
    padding: 0;
    margin: 0;
    position: absolute;
} 
```

...在一个`about`div 中，`overflow: hidden;`但是...唉。它没有隐藏。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-13T23:20:51.990

我知道您的问题的答案已经被接受，但我想我可以提供两分钱，只是为了完整起见。

`<div>`虽然创建一个附加元素来保存文本没有固有的问题，但我更喜欢使用`::after`伪元素来创建一个。它可能（恕我直言）在语义上更正确，但这实际上取决于您希望文本用作什么目的。

在我的示例中，我已将您希望在背景中显示的文本放置在 HTML 数据属性中，例如`data-bg-text`：

```
<div class="bg-text" data-bg-text="text">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi eu quam dolor, et aliquet lectus.
</div> 
```

对于您的 CSS，您只需创建一个伪元素，并从自定义 HTML 数据属性中分配内容：

```
.bg-text {
    background-color: #aaa;
    overflow: hidden;
    padding: 20px 20px 100px 20px;
    position: relative;
    width: 400px;
}
.bg-text::after {
    color: #fff;
    content: attr(data-bg-text);
    display: block;
    font-size: 80px;
    line-height: 1;
    position: absolute;
    bottom: -15px;
    right: 10px;
} 
```

请参阅此处的小提琴 - [http://jsfiddle.net/teddyrised/n58D9/](http://jsfiddle.net/teddyrised/n58D9/)或查看下面的概念验证示例：

```
.bg-text {
    background-color: #aaa;
    padding: 20px 20px 100px 20px;
    position: relative;
    width: 400px;
    overflow: hidden;
}
.bg-text::after {
    color: #000;
    content: attr(data-bg-text);
    display: block;
    font-size: 80px;
    line-height: 1;
    position: absolute;
    bottom: -15px;
    right: 10px;
}
```

```
<div class="bg-text" data-bg-text="text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi eu quam dolor, et aliquet lectus.</div>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T09:45:34.927

这是我的解决方案。在[jsfiddle中预览](http://jsfiddle.net/7rYnp/2/)

```
.about_box {
  z-index: 5;
  width: 728px;
  height: 400px;
  position: relative;
  background: #0099ae;
  overflow: hidden;
}

#about_small {
  z-index: 7;
  position: relative;
  top: 0;
  left: 0;
  color: #f7f7f7;
  padding: 20px;
}

#about_big {
  z-index: 6;
  font-family: Arial;
  font-size: 120px;
  color: rgba(255, 255, 255, 0.5);
  overflow: hidden;
  padding: 0;
  margin: 0;
  bottom: 0;
  right: 0;
  position: absolute;
}
```

```
<div class="about_box">

  <div id="about_small">
    "The quick brown fox jumps over the lazy dog", "The quick brown fox jumps over the lazy dog", "The quick brown fox jumps over the lazy dog", "The quick brown fox jumps over the lazy dog", "The quick brown fox jumps over the lazy dog"
  </div>
  <div id="about_big">
    text
  </div>

</div>
```

您可能想要尝试`line-height`或`bottom`否定`#about_big`以使背景文本位于底部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T09:30:07.313

这是一个完整的解决方案：

```
<!doctype html>
<html>
<head>
<title>Text Background</title>
<style>
body {
  background-color: #eee;
}
.container {
  position: relative;
  background-color: #ccc;
  z-index: -2;
  height: 25pt;
  width: 160pt;
  overflow: hidden;
}
.background-text {
  color: white;
  font-size: 20pt;
  position: absolute;
  z-index: -1;
  bottom: -8pt;
  right: 0;
}
</style>
</head>
<body>

<div class="container">
  <div class="content">
    Lorem ipsum dolor.
  </div>
  <div class="background-text">Background</div>
</div>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T09:38:34.107

You overlap on div with another DEMO [http://jsfiddle.net/FkE2V/](http://jsfiddle.net/FkE2V/)

```
#container {
    width: 100px;
    height: 100px;
    position: relative;
}
#text, #other {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
}
#other {
    z-index: 10;
    color:#f00;
} 
```

# winapi - 用于检测网络摄像头访问的内核模式驱动程序

> ID：15986219
> 
> 赞同：2
> 
> 时间：2013-04-13T09:17:46.303
> 
> 标签：winapi, kernel, driver, webcam

我正在编写一个内核级驱动程序，该驱动程序检测是否有任何进程访问网络摄像头，并向用户模式应用程序报告。目前，有多种访问和控制网络摄像头的方法，例如 Directshow，以及各种 VisualBasic 项目。

请与我分享一种检测对网络摄像头的所有访问的单一方法。是否有任何可以在内核级别监视的本机 API，这些 API 对访问网络摄像头的所有进程都是通用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T10:57:08.510

你使用什么样的操作系统？您可以检查设备的对象结构，并且应该有一个链接列表来处理打开该设备或计算打开它的进程数的计数。

# database - 让用户从数据库中的大量数据中进行选择

> ID：15986222
> 
> 赞同：0
> 
> 时间：2013-04-13T09:18:43.617
> 
> 标签：database, output

在我的数据库中，我有 301 个“条目”，用户应该能够选择其中之一。问题是，我不想显示 301 行，每个条目的名称和旁边的单选框。

那么，展示这些数据并让用户选择的最佳方式是什么？数据库结构为

```
ID, name, type, country, region, lon, lat, description. 
```

现在我需要以某种方式显示它，以便用户选择正确的查看。但正如我所说，301 行太多了。我想到了下拉菜单，但这也太过分了。有任何想法吗？

编辑：我可以做一个即时搜索，但这只是我们要在这里做的一个小任务，所以即时搜索会比实际产品更多的工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:26:53.923

最好的选择是有一个文本输入字段并让用户选择名称。

另一种方法是制作多个页面，您可以一次显示 40 个条目，或者更简单，让每个条目代表一个字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:30:22.973

我会使用自动填充进行文本条目搜索，这样当用户开始输入名称时，就会显示可能匹配的列表。

# ember.js - ember.js 控制器属性

> ID：15986223
> 
> 赞同：0
> 
> 时间：2013-04-13T09:18:44.593
> 
> 标签：ember.js

我正在尝试设置控制器的属性

试图这样做

```
{{view Ember.Select contentBinding="App.tastingsController.names"}} 
```

这没用

```
App.tastingsController = Ember.ArrayController.extend
  names: ["Velato", "Abbastanza limpido", "Limpido", "Cristallino", "Brillante"] 
```

虽然这个版本工作正常（但给出了这个警告`WARNING: The immediate parent route did not render into the main outlet and the default 'into' option may not be expected`：）

```
App.tastingsController.names = ["Velato", "Abbastanza limpido", "Limpido", "Cristallino", "Brillante"] 
```

这是我的路线：

```
App.Router.map ->
  @route "home", { path: "/" }
  @route "about"
  @resource "tastings", ->
    @route "new"
    @resource "tasting", { path: ":tasting_id"} 
```

你能解释一下为什么吗？

（在[这里](http://emberjs.com/api/classes/Ember.Select.html)找到）

谢谢你

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:58:31.847

您的代码存在一些问题：

*   `App.tastingsController`应该命名为`App.TastingsController`. 控制器类应以大写字母开头。

*   您收到警告是因为您跳过了路由层次结构中的模板。我需要更多关于路线的信息来帮助解决这个问题。

*   如果您需要在控制器上设置属性（例如`names`在您的情况下），有两种方法可以做到：

    在路线中设置它：

    ```
    App.TastingsRoute = Ember.Route.extend({
      setupController: function(controller, model) {
        controller.set('names', names: ['list', 'of', 'names']);
      }
    }); 
    ```

    或者你可以在定义控制器类的时候直接设置：

    ```
    App.TastingsController = Ember.ArrayController.extend({
      content: [],
      names: ['list', 'of', 'names']
    }); 
    ```

*   当您需要从视图/模板中引用控制器时，不要命名整个控制器类。只需使用您要绑定到的属性（假设您的视图的控制器是`App.TastingsController`）

`{{view Ember.Select contentBinding="names"}}`

希望这可以帮助。

# python - Python tkinter 按钮回调意外行为

> ID：15986226
> 
> 赞同：2
> 
> 时间：2013-04-13T09:19:04.267
> 
> 标签：python, button, callback, tkinter

我用 Python 制作了一个简单的“程序启动器”。我有一个制表符分隔的文本文件，目前只有：

记事本 c:\windows\notepad.exe
写入 c:\windows\write.exe

程序读取文本文件并创建一个对象数组。每个对象都有一个名称属性（例如记事本）和一个路由属性（例如 C:\windows\notepad.exe）。然后，对于每个对象，应在按钮上创建一个具有正确名称的按钮，单击该按钮应使用该路径执行正确的程序。

该程序几乎可以正常工作。实际上，对象数组的形成是正确的，因为 for 循环正确地打印出两个不同的程序名称和两个不同的路径。问题是两个按钮，虽然标记正确，但启动了写入程序！我相信问题出现在回调的某个地方，但我的 Python 知识还不足以解决这个问题！正如您从下面的代码中看到的那样，我尝试了一个“内联”回调，并定义了一个“runprog”函数。他们都给出了相同的结果。

您的帮助将不胜感激。

```
import Tkinter as tk
import subprocess

class MyClass:
    def __init__(self, thename,theroute):
        self.thename=thename
        self.theroute=theroute

myprogs = []

myfile = open('progs.txt', 'r')
for line in myfile:
    segmentedLine = line.split("\t")
    myprogs.append(MyClass(segmentedLine[0],segmentedLine[1]))
myfile.close()

def runprog(progroute):
    print(progroute)
    subprocess.call([progroute])

root = tk.Tk()
button_list=[]

for prog in myprogs:
    print(prog.thename)
    print(prog.theroute)

    button_list.append(tk.Button(root, text=prog.thename, bg='red', command=lambda: runprog(prog.theroute)))
#    button_list.append(tk.Button(root, text=prog.thename, bg='red', command= lambda: subprocess.call(prog.theroute)))

# show buttons
for button in button_list:
    button.pack(side='left', padx=10)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T12:34:03.673

Change your command to look like this:

```
tk.Button(..., command=lambda route=prog.theroute: runprog(route)) 
```

Notice how the lambda has a keyword argument where you set the default value to the route you want to associate with this button. By giving the keyword arg a default value, you are "binding" this value to this specific lambda.

Another option is to use [functools.partial](http://docs.python.org/2/library/functools.html#functools.partial), which many people find a little less intimidating than lambda. With this, your button would look like this:

```
import functools 
...
tk.Button(..., command=functools.partial(runprog,route) 
```

A third option is to move the "runprog" function to the class instead of in the main part of your program. In that case the problem becomes much simpler because each button is tied specifically to a unique object.

```
tk.Button(..., command=prog.runprog) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-13T10:27:15.703

只需更改此行：

```
button_list.append(tk.Button(root, text=prog.thename, bg='red', command=lambda: runprog(prog.theroute))) 
```

到：

```
button_list.append(tk.Button(root, text=prog.thename, bg='red',
          command= (lambda route:(lambda: runprog(route))) (prog.theroute))) 
```

Reasoning: when you create a lambda function (or any other function within a function), it does have access (in Python 2, read-only access) to the variables in the outer function scope. However, it does access the "live" variable in that scope - when the lambda is called, the value retrieved from "prog" will be whatever "prog" means at that time, which in this case will be the last "prog" on your list (since the user will only click a button long after the whole interface is built)

This change introduces an intermediary scope - another function body into which the current "prog" value is passed - and prog.theroute is assigned to the "route" variable in the moment the expression is run. That is done once for each program in the list. The inner lambda which is the actual callback does use the "route" variable in the intermediate scope - which holds a different value for each pass of the loop.

# java - 使用弹簧问题制作带有菜单栏的摆动框架

> ID：15986228
> 
> 赞同：1
> 
> 时间：2013-04-13T09:19:23.477
> 
> 标签：java, spring, swing, spring-ioc

我正在使用弹簧制作带有菜单栏的摆动框架，我的问题是，当我启动框架时，菜单栏根本没有出现，我将向您展示 beans.xml 和 bean 类，请告诉我为什么菜单栏没有出现，我有 4 个 bean 如下：

MenuItem bean：

```
public class MyMenuItem extends JMenuItem {
private ArrayList<String> menuItemNames;

public MyMenuItem() {   }

public ArrayList<String> getMenuItemNames() {
    return menuItemNames;
}

public void setMenuItemNames(ArrayList<String> menuItemNames) {
    this.menuItemNames = menuItemNames;
   }
} 
```

菜单豆：

```
public class MyMenu extends JMenu {

private static final long serialVersionUID = 1L;
private MyMenuItem myMenuItem;
private ArrayList<String> menuNames;
private MyMenuItem menuItem;

public MyMenu() {}

@PostConstruct
public void init() {
    for (String menuItemName : myMenuItem.getMenuItemNames()) {
        menuItem = new MyMenuItem();
        menuItem.setText(menuItemName);
        this.add(menuItem);

    }
}

public MyMenuItem getMyMenuItem() {
    return myMenuItem;
}

public void setMyMenuItem(MyMenuItem myMenuItem) {
    this.myMenuItem = myMenuItem;
}

public ArrayList<String> getMenuNames() {
    return menuNames;
}

public void setMenuNames(ArrayList<String> menuNames) {
    this.menuNames = menuNames;
     }
 } 
```

MenuBar bean：

```
public class MyMenuBar extends JMenuBar {

private static final long serialVersionUID = 1L;
private MyMenu myMenu;

public MyMenu getMyMenu() {
    return myMenu;
}

public void setMyMenu(MyMenu myMenu) {
    this.myMenu = myMenu;
}

public MyMenuBar() {

}

@PostConstruct
public void init() {
    for (String menu : myMenu.getMenuNames()) {
        MyMenu mm = new MyMenu();
        mm.setText(menu);
        this.add(mm);
        }
    }
} 
```

和框架豆：

```
public class MainFrame extends JFrame {
/**
 * 
 */
private static final long serialVersionUID = 1L;
private MyMenuBar myMenuBar;

@PostConstruct
public void init(){
    this.add(myMenuBar);        
}

public MainFrame() {
}

public MyMenuBar getMyMenuBar() {
    return myMenuBar;
}

public void setMyMenuBar(MyMenuBar myMenuBar) {
    this.myMenuBar = myMenuBar;
  }
} 
```

这是我的 bean 配置文件 beans.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xmlns:util="http://www.springframework.org/schema/util"

xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-2.5.xsd">

<bean id="menuItem" class="com.spring.frame.MyMenuItem" init-method="init">
    <property name="menuItemNames">
        <bean class="org.springframework.beans.factory.config.ListFactoryBean">
            <property name="targetListClass">
                <value>java.util.ArrayList</value>
            </property>
            <property name="sourceList">
                <list>
                    <value>Copy</value>
                    <value>Paste</value>
                    <value>Cut</value>
                </list>
            </property>
        </bean>
    </property>
</bean>
<bean id="menu" class="com.spring.frame.MyMenu" init-method="init">
    <property name="myMenuItem">
        <ref bean="menuItem"></ref>
    </property>
    <property name="menuNames">
        <bean class="org.springframework.beans.factory.config.ListFactoryBean">
            <property name="targetListClass">
                <value>java.util.ArrayList</value>
            </property>
            <property name="sourceList">
                <list>
                    <value>File</value>
                    <value>Edit</value>
                </list>
            </property>
        </bean>
    </property>
</bean>
<bean id="menuBar" class="com.spring.frame.MyMenuBar" init-method="init">
    <property name="myMenu">
        <ref bean="menu" />
    </property>
</bean>
<bean id="frame" class="com.spring.frame.MainFrame" init-method="init">
    <property name="myMenuBar">
        <ref bean="menuBar"></ref>
    </property>
</bean> 
```

如果代码很长，谢谢和抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T20:25:58.173

***setJMenuBar(myMenuBar);*** 而不是 ***this.add(myMenuBar);***

# ios - 无法在 Xcode 4.5 中为 Single ViewController 类加载两个 nib (.XIB)

> ID：15986232
> 
> 赞同：3
> 
> 时间：2013-04-13T09:19:58.060
> 
> 标签：ios, objective-c, xcode, xib

抱歉，伙计们，我知道已经有很多类似的问题可用。我尝试了所有解决方案，但没有为我工作。

我正在使用 Xcode 4.5.2 并为 iphone5/ios6 使用两个 xib **1> RootViewController5**和所有其他设备**2> RootViewController**这两个 nib 文件都有一个名为**RootViewController**的 ViewController 。在两个 nib 文件的文件所有者中，我选择了**RootViewController**类自定义类检查器。

现在在 ViewDidLoad 方法中，我试图像这样加载两个笔尖

```
 if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        CGSize result = [[UIScreen mainScreen] bounds].size;
        UIViewController *viewController3;
        if(result.height == 480)
        {
          viewController3 = [[[UIViewController alloc] initWithNibName:@"RootViewController" bundle:nil] autorelease];
        }
        if(result.height == 568)
        {
        viewController3 = [[[UIViewController alloc] initWithNibName:@"RootViewController5" bundle:nil] autorelease];

            NSLog(@"iphone 5 123");
        }
    } 
```

我也试过下面的代码

```
 if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        CGSize result = [[UIScreen mainScreen] bounds].size;
        RootViewController *viewController3;
        if(result.height == 480)
        {
          viewController3 = [[[UIViewController alloc] initWithNibName:@"RootViewController" bundle:nil] autorelease];
        }
        if(result.height == 568)
        {
        viewController3 = [[[UIViewController alloc] initWithNibName:@"RootViewController5" bundle:nil] autorelease];

            NSLog(@"iphone 5 123");
        }
    } 
```

但没有运气。请告知我在哪里弄错了。

谢谢

马尤尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:55:24.777

我建议你改为这样做：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
        if([UIScreen mainScreen].bounds.size.height == 568.0)
        {
            //Use iPhone5 VC
            self = [super initWithNibName:@"RootViewController-568h" bundle:nibBundleOrNil];
        }
        else{
            //Use Default VC
            self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
        }
    }
    return self;
} 
```

也就是说，如果您的 RootViewController 就是这样命名的。如果他们决定添加另一种尺寸的 iPhone/iPod，通过这种方式，您可以避免未来的崩溃。当您使用两个 if 语句时，如果两者都不正确，它将使应用程序崩溃并且确实不是很好的编码。

一个好的做法是始终尝试提前思考并计划未来，如果他们应该发布另一个屏幕尺寸，它看起来不会很好，但至少不会崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:26:14.700

我从您的描述中看到的明显问题是您在 nib 中将自定义类设置为“RootViewController”，但实际上您在代码中实例化了“UIViewController”。

你应该做的是：

```
viewController3 = [[[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil] autorelease]; 
```

否则，当运行时加载您的 nib，并尝试在您的 nib 中设置那些 RootViewController 特定的插座时，运行时将无法在普通 UIViewController 中找到这些插座，因此会崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T09:54:00.003

我认为您不必为 iPhone5 和 iPhone4、4S 等使用两个不同的 .xib。如果您想更改图像、标签、按钮等的大小，这就是使用 Spring 和 Structs 的原因。您还可以使用您在问题中编写的代码（在您的 .m 文件中......）以编程方式设置大小

我以前也犯过这个错误。当我以前运行程序时，我总是想出错误

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException',
 reason: '-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "View" nib but
 the view outlet was not set.' *** First throw call stack:(0x1c93012 0x10d0e7e 0x1c92deb 
0xf58c8 0xf5dc8 0xf5ff8 0xf6232 0x453d5 0x4576f 0x45905 0x4e917 0x2b7f 0x12157 0x12747 
0x1394b 0x24cb5 0x25beb 0x17698 0x1beedf9 0x1beead0 0x1c08bf5 0x1c08962 0x1c39bb6 
0x1c38f44 0x1c38e1b 0x1317a 0x14ffc 0x25fd 0x2525 0x1)libc++abi.dylib: 
terminate called throwing an exception 
```

这是因为“未设置笔尖出口”

所以，我认为你应该使用 Springs 和 structs 或者以编程方式..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:28:12.807

哇，我真是个傻瓜，我没有意识到我没有正确加载笔尖。唯一我错的是这行代码

我写了 `viewController3 = [[[UIViewController alloc] initWithNibName:@"RootViewController5"`bundle:nil] autorelease]; 代替

```
 [[NSBundle mainBundle] loadNibNamed:@"RootViewController5" owner:self options:nil]; 
```

所以我的最终代码看起来像这样并且工作得很好

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        CGSize result = [[UIScreen mainScreen] bounds].size;
        if(result.height == 480)
        {
            // iPhone Classic
            [[NSBundle mainBundle] loadNibNamed:@"RootViewController" owner:self options:nil];
        }
        if(result.height == 568)
        {
            // iPhone 5
            [[NSBundle mainBundle] loadNibNamed:@"RootViewController5" owner:self options:nil];
        }
    } 
```

感谢这个链接[链接到正确的答案](https://stackoverflow.com/questions/12678620/can-i-use-two-xibs-with-one-viewcontroller-re-porting-to-iphone-5)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T13:37:49.590

I would recommend you to :

use story board, instead of XIB files when you instantiate a VC, ex:

```
 myVC* vc = [self.storyboard instantiateViewControllerWithIdentifier:@"myVCStoryBoardID"];

[self.navigationController pushViewController:vc animated:YES]; 
```

This helps keep VC design under the same roof, and to use powerful features of storyboarding.

Then to check that Auto-layout is active on your story board controllers, and insure that the constrains on one, say, label, map to the boundary of other elements (very important), above and below. This materialises by dotted blue lines when you move it. In most case, the run-time will be able to align everything, regardless of screen height.

I understand that there might be some nasty edge cases in this regards, so you might have to adjust stuff manually. Unless you have complex graphics, it's always possible to work with Y coordinate in the [0,1] interval, and once you have to set a frame, use [[UIScreen mainScreen] bounds].size to get the appropriate value, rounded to the nearest integer.

If all the above fails, then you might have to create separate VC, but in my view, that's not really what the SDK is intended for.

good luck!

# c# - 路由具有相同架构的多个 url 中的路由表问题

> ID：15986234
> 
> 赞同：1
> 
> 时间：2013-04-13T09:20:12.703
> 
> 标签：c#, routes

编码 ：

```
public static void RegisterRoutes(System.Web.Routing.RouteCollection routes)
{
    routes.MapPageRoute("Partners Details", "Partner/{PartnerName}", "~/Partners/PartnerDetails.aspx", false, new RouteValueDictionary());
    routes.MapPageRoute("Partners Offers", "Partner/{PartnerID}", "~/Partners/Partners.aspx", false, new RouteValueDictionary());
} 
```

这些路由 URL 可以从 default.aspx 页面中的不同链接标记调用，但问题是当我尝试访问 partner.aspx 时，它会将我重定向到 PartnerDetails.aspx 我很困惑为什么会出现这种奇怪的行为？什么是解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:37:47.597

所以问题是**除了**数据类型之外，路由是相同的。但是，您尚未`constraints`为这些路线指定 。所以让我们这样做：

```
routes.MapPageRoute("Partners Details",
    "Partner/{PartnerName}",
    "~/Partners/PartnerDetails.aspx",
    false,
    new RouteValueDictionary(),
    new RouteValueDictionary() {
        "PartnerName", "[a-zA-Z\s]"
    });

routes.MapPageRoute("Partners Offers",
    "Partner/{PartnerID}",
    "~/Partners/Partners.aspx",
    false,
    new RouteValueDictionary(),
    new RouteValueDictionary() {
        "PartnerID", @"\d"
    }); 
```

但让我们分解一下。使用`constraints`Regex 确定键所在位置的字符串值（例如 PartnerID）是否匹配。如果没有，则跳过该路线，并继续前进到下一条。但我想让你想想为什么它也不起作用。假设您必须编写代码来解释路由，并且您得到了这样的链接：

```
http://.../Partner/123 
```

那不匹配`"Partner/{PartnerName}"`吗？我的意思`{PartnerName}`是不是以任何方式输入的，它只是一个占位符，对吗？

希望这是有道理的。

# php - 如何正确使用 JSON.stringify 和 json_decode()

> ID：15986235
> 
> 赞同：56
> 
> 时间：2013-04-13T09:20:15.580
> 
> 标签：php, javascript, arrays, json, stringify

我试图通过以下方式将多维 Javascript 数组传递到我网站上的另一个页面：

*   在数组上使用 JSON.stringify

*   将结果值分配给输入字段

*   将该字段发布到第二页

*   在发布的值上使用 json_decode

*   然后 var_dump 进行测试

*   （直接回显发布的变量只是为了看看它是否通过了）

**第一页的Javascript：**

```
var JSONstr = JSON.stringify(fullInfoArray);
document.getElementById('JSONfullInfoArray').value= JSONstr; 
```

**第二页的php：**

```
$data = json_decode($_POST["JSONfullInfoArray"]);
var_dump($data);

echo($_POST["JSONfullInfoArray"]); 
```

回声工作正常，但 var_dump 返回 NULL

我做错了什么？

* * *

**这让我解决了：**

```
$postedData = $_POST["JSONfullInfoArray"];
$tempData = str_replace("\\", "",$postedData);
$cleanData = json_decode($tempData);
var_dump($cleanData); 
```

我不知道为什么，但是帖子通过一堆“\”字符分隔字符串中的每个变量

`json_last_error()`用 Bart 的建议弄清楚了，它返回了`JSON_ERROR_SYNTAX`

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2018-03-07T11:54:14.607

当您使用 JSON.stringify() 保存一些数据，然后需要在 php 中读取这些数据时。以下代码对我有用。

```
json_decode( html_entity_decode( stripslashes ($jsonString ) ) ); 
```

感谢@Thisguyhastwothumbs

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-03-26T10:27:15.547

当您使用 JSON stringify 时，请先使用 html_entity_decode，然后再使用 json_decode。

```
$tempData = html_entity_decode($tempData);
$cleanData = json_decode($tempData); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-04-13T10:42:51.913

您需要检查`$_POST["JSONfullInfoArray"]`. 如果某些东西不解析`json_decode`只会返回`null`。这不是很有帮助，因此当`null`返回时，您应该检查`json_last_error()`以获取有关问题所在的更多信息。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-06-04T00:47:47.230

在我的情况下，其他答案都不起作用，很可能是因为 JSON 数组包含特殊字符。什么为我解决了它：

**Javascript（添加了 encodeURIComponent）**

```
var JSONstr = encodeURIComponent(JSON.stringify(fullInfoArray));
document.getElementById('JSONfullInfoArray').value = JSONstr; 
```

**PHP（与问题相同）**

```
$data = json_decode($_POST["JSONfullInfoArray"]);
var_dump($data);

echo($_POST["JSONfullInfoArray"]); 
```

已验证 echo 和 var_dump 在包含 URL 字段和长文本字段的 2000 多个用户输入数据集的样本上工作正常，并且在 var_dump 上为包含带有字符的 URL 的子集返回 NULL `?&#`。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-09-24T07:12:51.597

```
stripslashes(htmlspecialchars(JSON_DATA)) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-22T10:30:40.910

```
jsonText = $_REQUEST['myJSON'];

$decodedText = html_entity_decode($jsonText);

$myArray = json_decode($decodedText, true);` 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-02T07:21:13.237

我不知道这是如何工作的，但它确实有效。

```
$post_data = json_decode(json_encode($_POST['request_key'])); 
```

# sql-server - 如何在 SQL Server 的实体框架中调用存储过程

> ID：15986240
> 
> 赞同：1
> 
> 时间：2013-04-13T09:20:31.707
> 
> 标签：sql-server, entity-framework, stored-procedures

我是实体框架的新手，我想知道如何使用实体框架在业务层调用 SP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:25:59.650

首先，您必须通过选择添加/编辑 SP 向导来添加存储过程。

然后你必须为它添加一个函数导入。

在同一个向导中，您添加了新的复杂类型，它是存储过程的结果集。

假设复杂类型是`SP_ComplexType`和函数导入名称`SP_Func`，这里是你如何使用它。

```
var SP_ComplexType  = entity.SP_Func.ToList(); 
```

# javascript - 更改某些元素的类名

> ID：15986247
> 
> 赞同：1
> 
> 时间：2013-04-13T09:21:27.427
> 
> 标签：javascript, css

我想将所有带有 class 的元素更改`hidden`为 class `appeared`。这是我的代码：

```
e = document.getElementsByClassName("hidden");
for (i = 0; i < e.length; i++) {
    e[i].className = "appeared";
} 
```

类名为 hidden 的三个元素中的两个发生了变化。这是为什么？如何解决？我尝试使用`getElementById`，它有效，但我需要使其通用，以便我可以将它用于许多元素和许多类。

**编辑**

原来有一个类似问题的线程。我将代码更改为此并且它可以工作：

```
e = document.getElementsByClassName("hidden");
while (e.length) {
    e[0].className = "appeared";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:43:30.073

The problem is that `getElementsByClassName` returns a `NodeList`, which is a [live collection](https://developer.mozilla.org/en-US/docs/DOM/NodeList#Description). Thus, every time you asked for its length, the collection is recalculated. Since you have already changed the className for some elements, the loop ends earlier than you expected.

If you check the values for `i` and `length` for each loop, you will have:

*   The first time, length is 3\. (0 < 3) is **true**, so it changes its class.
*   The second time, length is 2\. (1 < 2) is **true**, so it changes its class.
*   The first time, length is 1\. (2 < 1) is **false**. It doesn't change its class.

You should convert the NodeList to an array:

```
var e = [].slice.call(document.getElementsByClassName("hidden")); 
```

Or you can use the alternative code you provided, although in that case the selection is recalculated every time you ask for its length property.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:31:16.227

为什么不使用 jQuery 并使用 show() 和 hide() 方法：

显示类名“隐藏”的所有元素：

```
$('.hidden').show(); 
```

隐藏类名“隐藏”的所有元素：

```
$('.hidden').hide(); 
```

要包含 jQuery，请在 body 标记的末尾添加此脚本：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T09:47:43.223

您的原始代码失败的原因是因为`getElementsByClassName`返回了带有 class 的元素的**实时视图**`hidden`。因此，当您在循环中更改元素的类时，此更改会反映在视图中，并且该元素将不再存在。

这是一个示例场景：

1.  `e`最初包含 3 个`hidden`元素。
2.  在第一次迭代中，`i == 0`and`e[0]`被更改为*不再* `hidden`。这意味着`e`现在只包含 2 个元素，因为删除`hidden`了“旧” 。`e[0]`
3.  在第二次迭代中，`i`is 已经在`1`但`e[0]`仍然*是*一个`hidden`元素。这意味着您将跳过`e[0]`（`e[1]`在循环之前）。在本次迭代中，您将删除`e[1]`（`e[2]`之前的）类，视图减少到 1 个元素。
4.  由于`i`(= 2) 现在超过`e.length`(= 1)，循环终止。

最终结果是您跳过了旧的`e[1]`. 有两种方法可以解决这个问题：

*   通过首先将其内容复制到另一个数组来制作`e`静态。这是大多数库（例如 jQuery）采用的方法。
*   利用*活泼*。正如您在编辑中所展示的那样，您可以利用实时集合来发挥自己的优势。通过始终对视图中的*当前*第一个元素进行操作，您将永远不会跳过任何元素。循环条件也很简单：您只需要不断迭代，直到视图不再包含任何元素。

# jquery - json jquery格式问题

> ID：15986251
> 
> 赞同：0
> 
> 时间：2013-04-13T09:22:10.027
> 
> 标签：jquery, json

这是我在服务器端的代码

```
$results = array();
while($rw = $objS->row($rs))
 {
$results[]=array('id'=>$rw["id"],
'agent_id'=>$rw["agent_id"],
'agent'=>$rw["agent"]);
}
echo json_encode($results); 
```

在客户端我有这个编码

```
success: function( data ) {
var forum = data.results;
for(i = 0, l = forum.length; i < l; i++) {
row = forum[i];
alert(row.id);
} 
```

如何在服务器端开发 json？我的 json 返回是

```
[{"id":"1","agent_id":"1","agent":"Rustomadmin"}] 
```

我需要这样

```
{"results":[{"id":1,"agent_id":"888","agent":"Emili"}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:29:41.813

你的`array()`声明完全错误..试试这个..

填充多个记录值意味着，

```
<?php
    while($rw = $objS->row($rs))
     {
       $results[] = $rw;         // It generate Array of Array
     }

   $agentResult['results']  = $results;

   $jsonResult = json_encode($agentResult);
  echo $jsonResult;
?> 
```

# css - 带有网站标题 Wordpress 的中心标志

> ID：15986257
> 
> 赞同：0
> 
> 时间：2013-04-13T09:22:48.107
> 
> 标签：css, wordpress, header, inline

我正在尝试使用 Wordpress 上的 21 内联以网站标题为中心的体育标志，但是我无法使其正常工作。你有什么建议吗？

以下是相关代码：

```
 <header id="branding" role="banner">    
     <hgroup> 
          <h1 id="site-title">
               <img src="http://aberdeenshirecc.org.uk/phpHrX1SaAM.jpg"style="width:84px;height:100px;     display:inline; vertical-align:center; img margin-top:200px; ">
               <span><a href="<?php echo esc_url( home_url( '/' ) ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' )    ); ?>" rel="home"><?php bloginfo( 'name' ); ?></a></span>
          </h1> 
```

不幸的是无法将 div 添加到子主题中，因此必须在实际的 img 标签中使用 style=。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:12:15.153

.. 或者如果你真的希望通过 img 的 CSS 使用`display: block;`和自动边距来做到这一点。在你的情况下：

```
<img src="http://aberdeenshirecc.org.uk/phpHrX1SaAM.jpg" style="width:84px; height:100px; display:block; margin: 200px auto 0;"> 
```

# eclipse - eclipse 密码字段编辑器

> ID：15986262
> 
> 赞同：3
> 
> 时间：2013-04-13T09:23:30.447
> 
> 标签：eclipse, jface

我有一个首选项页面，其中包含一些 StringFieldEditor 来保存不同的值。其中之一用于密码。我希望密码显示为星号或其他一些特殊字符。我只能使用 org.eclipse.jface.preference.FieldEditor 或其任何子类。请建议我如何实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T10:38:01.403

```
password = new StringFieldEditor("passwd", "Password", getFieldEditorParent()) {

@Override
    protected void doFillIntoGrid(Composite parent, int numColumns) {
        super.doFillIntoGrid(parent, numColumns);

        getTextControl().setEchoChar('*');
    }

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-13T10:42:01.200

```
StringFieldEditor passwordField = new StringFieldEditor("password", "Password", getFieldEditorParent());
passwordField.getTextControl(getFieldEditorParent()).setEchoChar('*');

addField(passwordField); 
```

# asp.net - 在 ASP.NET 动态数据中使用自定义编辑器

> ID：15986268
> 
> 赞同：0
> 
> 时间：2013-04-13T09:24:01.277
> 
> 标签：asp.net, asp.net-dynamic-data

我是否可以使用一些所见即所得的编辑器，如 TinyMCE 或 FCK 编辑器，而不是用于 ASP.NET 动态数据的多行文本框？

默认对象是服务器端对象，但我想使用工作 ajax 的客户端对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T10:14:27.390

您应该创建自定义字段模板 MultiLineEditor_Edit.ascx（从 MultilineText_Edit.ascx 字段模板复制），然后添加到 MultiLineEditor_Edit.ascx，例如[HTMLEditorExtender](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HtmlEditorExtender/HTMLEditorExtender.aspx)。

然后编辑您的元数据：

```
[UIHint("MultiLineEditor")]
public object ColumnName { get; set; } 
```

有关更多信息，请阅读文章[如何：自定义 ASP.NET 动态数据默认字段模板](http://msdn.microsoft.com/en-us/library/cc488533%28v=vs.100%29.aspx)。

# java - SikuliX 1.0rc3 r903 type() 使用普通数字而不是数字键盘

> ID：15986272
> 
> 赞同：0
> 
> 时间：2013-04-13T09:24:22.280
> 
> 标签：java, python, jython, keycode, sikuli

我有一个带有 SikuliX 的小自动化脚本来维护应用程序中的某个流程，我需要按一个数字键 (1,2,3...,0)。

问题是应用程序似乎不接受 Numpad 键，也不接受数字的字符串输入；

```
type(Key.NUM1) # Doesn't work
type("1") # Doesn't work
type(Key.1) # Logically gives a parse-error 
```

查看[文档](http://doc.sikuli.org/keys.html)我找不到任何关于调用特定键映射的内容。我也尝试查看 JAVA 文档`java.awt.event.InputEvent`，但不确定如何在 Sikuli 中操作它，因为它们似乎也更改了某些父方法。

我想知道我是否可以做类似的事情；

```
type(Key.Code("49")) # Key code 49 for the number "1" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:10:14.467

type("1") 绝对有效，我刚试过

编辑：运行 type("1") 时是否收到此日志消息？

[日志] 类型“1”

# excel - countif 语句什么不会计数 00:00

> ID：15986273
> 
> 赞同：-1
> 
> 时间：2013-04-13T09:24:24.233
> 
> 标签：excel, excel-formula, excel-2010, vba

任何帮助，将不胜感激。我需要该`CountIf`语句来计算所有等于 00:00 的数据点。由于其他公式，该列的格式为 24 小时。00:00 是 if 语句的产物。我已经尝试了很多选项，但除非我将列重新格式化为一般格式，否则它不会计算，但这样做会打乱我需要 24 小时格式的时间格式。谢谢。

```
Sub Sample()
Dim result As Long, firstrow As Long, lastrow As Long
Dim ws As Worksheet
Dim rng As Range

'~~> Set this to the relevant worksheet
Set ws = ThisWorkbook.Sheets("Sheet1")

With ws
    '~~> Find Lastrow in Col D
    lastrow = .Range("V" & .Rows.Count).End(xlUp).Row
    '~~> Set First row
    firstrow = 16

    '~~> Set your range
    Set rng = .Range("V" & firstrow & ":V" & lastrow)

    '~~> Put relevant values
    .Range("U" & lastrow + 3).Value = "No Slip Time"
    .Range("V" & lastrow + 3).Value = _
     Application.WorksheetFunction.CountIf(rng, "*00:00")
End With
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T11:13:49.400

**笔记：**

*   字符串**“00:00”**和时间**0**不一样。

*   **日期和时间是一个数字**，其中 0 表示午夜，1 表示一天，0.5 表示 12 小时。

    ![零比较](https://i.stack.imgur.com/9iboj.jpg "零比较")

根据您的评论，您在第 v 列中有以下公式，请`=IF((K16="NA"),"00:00",IF(K16<>"na",K16))`改用此公式。

```
=IF(Upper(K16)="NA",0,K16) 
```

如果您`#N/A`在单元格 K16 中有，则需要将上面的内容替换`"NA"`为`NA()`.

同样一旦完成，您可以使用`countif`如下。

```
Application.WorksheetFunction.CountIf(rng.value2 , "0") 
```

# blackberry-10 - 黑莓 Android 运行时 ADB 失败

> ID：15986279
> 
> 赞同：1
> 
> 时间：2013-04-13T09:25:43.090
> 
> 标签：blackberry-10, blackberry-android

我尝试使用**Android Runtime For BlackBerry**打包项目我做了所有的事情 - 模拟器，ADT- for eclipse ..**当我测试应用程序时，我收到了这个错误：**

```
[2013-04-13 13:16:04 - BlackBerryTest] Packaging project BlackBerryTest
[2013-04-13 13:16:11 - BlackBerryTest] Launching BlackBerry Android Runtime...
[2013-04-13 13:16:20 - BlackBerryTest] Connecting to ADB...
[2013-04-13 13:17:23 - BlackBerryTest] Status ERROR: net.rim.ajde code=4 Connecting 192.168.72.128 to ADB failed!   null children=[Status ERROR: net.rim.ajde code=0 Please check if the Android player was fully started when you got this error. If not, you can either increase the Android player launch timeout on the BlackBerry->BlackBerry Android Development Tools preference page or wait until the Android player is fully started and try again. null] 
```

在模拟器中有包含**黑莓 10 徽标**的初始屏幕开始大约 2 秒然后关闭和 eclipse 仍然**连接到 ADB...**大约一分钟然后我得到错误连接。

**

**更新 ：**

**

现在我收到了这条消息

```
04-25 12:01:15.539: I/navigatorshell(17789061): no app URI, just launch AP and exit 
```

**任何想法 ？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:26:11.760

这通常是由于 Android 运行时需要很长时间才能加载，并且在某些情况下，实际上从未加载过。

根本原因是模拟器运行非常缓慢。如果您还没有，**请在您的 BIOS 中启用虚拟化**，这会对模拟器性能产生巨大影响，并为我解决了这个问题。

这里有一个关于这个的视频：http: [//devblog.blackberry.com/2012/08/performance-increase-blackberry-10-simulator/](http://devblog.blackberry.com/2012/08/performance-increase-blackberry-10-simulator/)

# sql - 如何将 T-SQL 转换为 LINQ

> ID：15986282
> 
> 赞同：0
> 
> 时间：2013-04-13T09:25:57.317
> 
> 标签：sql, sql-server, linq, tsql

我在 T-SQL 查询中有以下代码，我需要将其转换（重写）为 LINQ。有人可以帮助我吗？谢谢

```
SELECT (select max(X.PocetDniPoPlatnosti) 
from
(

select 

(select top 1 datediff(day,datumplatnosti,getdate()) from planrealizace p 
where p.cinnostsopidsop = cinnostsop.idsop and datumplatnosti <= getdate() and p.provest = 1 and p.datumprovedeni is null
order by p.datumplatnosti desc) as PocetDniPoPlatnosti

from cinnostsop
where cinnostSOP.LegislativneVyznamna = 1 and (CinnostSOP.ObjektId = 131476)) X) as PoPlatnosti 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:34:09.950

这应该可以，但是我无法尝试，因为我家里没有任何编程工具，所以如果这不起作用，请随时告诉我，我们可以一起改进

```
var max = (from cp in cinnostsop.Where(c => c.LegislativneVyznamna = 1 && c.ObjektId = 131476) 
           join p in (
               planrealizace.
               Where(pz => pz.datumplatnosti <= DateTime.Now && 
                           pz.provest = 1 and pz.datumprovedeni is null).
               GroupBy(pz => pz.cinnostsopidsop, pz => pz).
               Select(g => 
                   new { 
                           id = g.Key, 
                           firstdate = (g.OrderByDescending(
                                              pz => pz.datumplatnosti).
                                          First().datumplatnosti - DateTime.Now
                                        ).Totaldays
                        })
               ) on cp.idsop equals p.id
           select p.firstdate).Max(d => d); 
```

# bash - 两个不同文件中的总和

> ID：15986284
> 
> 赞同：6
> 
> 时间：2013-04-13T09:26:19.927
> 
> 标签：bash, shell, awk

我有两个相同长度的文件，例如：

```
0.99952 0.01
0.98927 0.02
0.98242 0.03 
```

和

```
-0.758 0.01
-0.745 0.02
-0.742 0.03 
```

我想对第一列编号求和，并将其打印在一个新文件中，第二列旁边有相同的元素。输出应该是：

```
0.24152 0.01
0,24427 0.02
0,24042 0.03 
```

我试过了

```
 paste file1 file2 | awk '{print ($1 + $2), $4}' > sum 
```

但输出是：

```
 1.00952 0.01
 1.00927 0.02
 1.01242 0.03 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T09:32:52.313

您在 awk 中采用了无效的参数号（$2 而不是 $3）

```
$1      $2      $3     $4
0.99952 0.01    -0.758 0.01
0.98927 0.02    -0.745 0.02
0.98242 0.03    -0.742 0.03 
```

有一个工作示例：

```
paste data1 data2 | awk '{print ($1 + $3), $4}' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-13T10:59:04.063

单一`awk`方法：

```
$ awk 'NR==FNR{a[NR]=$1;next}{print $1+a[FNR],$2}' file1 file2
0.24152 0.01
0.24427 0.02
0.24042 0.03 
```

# mongodb - Mongodb：kern.sched 不可用

> ID：15986287
> 
> 赞同：3
> 
> 时间：2013-04-13T09:26:43.453
> 
> 标签：mongodb, homebrew

我对 mongodb 很陌生。通过安装后：`brew intall mongodb`然后`mongod`在终端输入，错误抛出：`kern.sched unavailable`。

我正在使用 mac os 版本 10.6.8。

日志：

```
Sat Apr 13 16:40:56.374 [initandlisten] MongoDB starting : pid=6387 port=27017 dbpath=/usr/local/var/mongodb 64-bit host=fatbizkit
Sat Apr 13 16:40:56.374 [initandlisten]
Sat Apr 13 16:40:56.374 [initandlisten] ** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000
Sat Apr 13 16:40:56.374 [initandlisten] db version v2.4.1
Sat Apr 13 16:40:56.374 [initandlisten] git version: 1560959e9ce11a693be8b4d0d160d633eee75110
Sat Apr 13 16:40:56.374 [initandlisten] build info: Darwin bs-osx-106-x86-64-1.local 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:$
Sat Apr 13 16:40:56.374 [initandlisten] allocator: system
Sat Apr 13 16:40:56.374 [initandlisten] options: { bind_ip: "127.0.0.1", config: "/usr/local/etc/mongod.conf", dbpath: "/usr/local/var/mong$
Sat Apr 13 16:40:56.375 [initandlisten] journal dir=/usr/local/var/mongodb/journal
Sat Apr 13 16:40:56.375 [initandlisten] recover : no journal files present, no recovery needed
Sat Apr 13 16:40:56.441 [websvr] admin web console waiting for connections on port 28017
Sat Apr 13 16:40:56.442 [initandlisten] waiting for connections on port 27017  
Sat Apr 13 16:41:29.416 got signal 2 (Interrupt), will terminate after current cmd ends
Sat Apr 13 16:41:29.416 [interruptThread] now exiting
Sat Apr 13 16:41:29.416 dbexit:
Sat Apr 13 16:41:29.416 [interruptThread] shutdown: going to close listening sockets...
Sat Apr 13 16:41:29.416 [interruptThread] closing listening socket: 9  
Sat Apr 13 16:41:29.416 [interruptThread] closing listening socket: 10
Sat Apr 13 16:41:29.416 [interruptThread] closing listening socket: 11
Sat Apr 13 16:41:29.416 [interruptThread] removing socket file: /tmp/mongodb-27017.sock
Sat Apr 13 16:41:29.417 [interruptThread] shutdown: going to flush diaglog...
Sat Apr 13 16:41:29.417 [interruptThread] shutdown: going to close sockets...
Sat Apr 13 16:41:29.417 [interruptThread] shutdown: waiting for fs preallocator...
Sat Apr 13 16:41:29.417 [interruptThread] shutdown: lock for final commit...
Sat Apr 13 16:41:29.417 [interruptThread] shutdown: final commit...
Sat Apr 13 16:41:29.432 [interruptThread] shutdown: closing all files...
Sat Apr 13 16:41:29.442 [interruptThread] closeAllFiles() finished
Sat Apr 13 16:41:29.442 [interruptThread] journalCleanup...
Sat Apr 13 16:41:29.442 [interruptThread] removeJournalFiles
Sat Apr 13 16:41:29.442 [interruptThread] shutdown: removing fs lock...
Sat Apr 13 16:41:29.442 dbexit: really exiting now 
```

我试过谷歌，但没有运气。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:11:12.943

使用 brew 安装 mongodb 并输入命令 mongod 后，我遇到了相同的错误和相同的日志。我把终端打开了。我打开了另一个终端窗口，并输入了命令 mongo，我现在在 mongodb 命令行上。我还可以看到 mongodb 在以下 url 上的浏览​​器中运行：`http://localhost:28017/` 因为它工作我现在留下了错误，我稍后会尝试找到答案。希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T14:26:04.730

使用来自 http://hunterford.me/mongodb-startup-item/ 的启动文件后，我遇到了这个问题。我不知道这是否是您描述的错误的唯一可能原因，但在我的情况下。

错误的原因似乎是在启动文件中有段：

```
<string>/usr/local/bin/mongod</string> 
```

这可能是也可能不是 mongod 实际安装的位置。我使用 macports 安装了 mongo，所以我发现 mongod 在 opt/local/bin - [YMMV](http://en.wiktionary.org/wiki/your_mileage_may_vary)

一旦我将启动项中的目录值更改为正确的值，我就不再遇到这个问题，尽管我的“软 rlimits 太低”还有其他问题，[存在解决方案，](https://superuser.com/questions/261023/how-to-change-default-ulimit-values-in-mac-os-x-10-6)但因为您使用的是 mac os x for mongo，我怀疑你正在开发/演示，所以这*可能*不会成为问题。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T22:38:07.037

您使用的是什么 mongodb 版本？

您发布的日志语句没有显示有关错误的任何信息，您可以尝试再次重现并发送详细日志吗？

您是否尝试重新安装或从其他来源安装？

问候， 莫西

# jsf - f:event 的执行顺序导致异常

> ID：15986288
> 
> 赞同：0
> 
> 时间：2013-04-13T09:26:49.293
> 
> 标签：jsf, jsf-2, jstl, facelets

我正在尝试在页面加载时运行 f:event。`f:event`与支持 bean 功能相关联`init()`。创建在函数中使用的`init()`会话对象。但是我面临的问题是函数首先执行，因此它找不到会话对象，并且它给了我一个空指针异常。该函数永远不会被调用。是会话范围的。`toIndex``getStatusList()``getStatusList()``toIndex``init()``StatusBean`

1)xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
<f:view>
    <f:event type="postAddToView" listener="#{statusBean.init}" ></f:event>
</f:view>
<h:head></h:head>
<h:body>
    <c:forEach var="p" items="#{statusBean.statusList}"
                        varStatus="loop">
     //content
    </c:forEach>

</h:body>
</html> 
```

2) 支撑豆

```
public class StatusBean  {

public List<Status> getStatusList() {
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext()
                .getSession(true);
        User user = (User) session.getAttribute("userdet");
        Query query = em.createQuery("SELECT s FROM Status s WHERE s.email='"
                + user.getEmail() + "' ORDER BY s.timeMillis desc",
                Status.class);
        List<Status> results = query.getResultList();

        Collections.sort(results);
        int toIndex = (int) session.getAttribute("toIndex");
        List<Status> subList = results.subList(0, toIndex);
        return subList;

    }
public void init(ComponentSystemEvent event) {
        System.out.println("inside init");
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
        int toIndex = 5;
        session.setAttribute("toIndex",toIndex);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:38:41.617

I think, the problem here is the `c:forEach`. It is executed when the view is built (probably before the event is triggered). Try to replace it with `ui:repeat`. Generally, `c:forEach` should be used with care (if at all) with JSF as it has side effects.

# ios - 是否有可用于计算连接延迟和下载速率的 iOS 库？

> ID：15986290
> 
> 赞同：1
> 
> 时间：2013-04-13T09:27:24.807
> 
> 标签：ios

我想从我的应用程序中了解“网络质量”以适应用户体验。

我知道可以知道连接是WIFI还是WWAN（EDGE / 3G）......但似乎无法区分3G和边缘......

我的想法是通过计算延迟和下载速率来“测试连接”。

在自己制作图书馆之前，你有可用的图书馆吗？

当然我需要使用“官方解决方案”而不使用私有API......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:30:29.957

没有库 AFAIK，因为这是一个非常复杂的问题。如果您只计算下载速度，您会如何将其与应用响应速度进行比较？后者最终对用户来说是重要的；下载速度只是更复杂等式中的一个因素。此外，您将如何应对暂时的网络中断或迟缓？（在移动网络上相当常见），它们并不一定意味着回退到较轻的图像..

在我看来，这是一个潘多拉魔盒。如果我是你，我会倾向于为最坏的情况设计一个应用程序。小图像，与良好的视图质量兼容，以及当 ISO 堆栈说出现问题时（超时、错误的 url、服务器没有响应等）时的防弹用户通知，从低图片到高分辨率的有意义的转换，取消正在进行的请求、进度条等的能力。

当用户被告知正在发生的事情时，他/她将避免/理解边缘情况，如果出现问题，他/她不会责怪应用程序。

现在，如果您想解决应用程序性能范式，我已经开始研究[https://newrelic.com/docs/site/apdex](https://newrelic.com/docs/site/apdex)（我与他们的业务无关，它是作为我的 MBaas 的一个选项提供的） . 似乎有好东西，但我还没有集成它们的任何功能。

祝你好运 ！

# python - 使用 python 脚本填写表单

> ID：15986291
> 
> 赞同：0
> 
> 时间：2013-04-13T09:27:57.793
> 
> 标签：python, forms, mechanize

我正在尝试编写一个 python 脚本来填写网站上的表格，发送它，发送后我想在结果网页上搜索关键字。

更具体地说，表格是： [https ://booking.elal.co.il/newBooking/changeOrder.jsp?LANG=EN&RESSYSTEMID=1](https://booking.elal.co.il/newBooking/changeOrder.jsp?LANG=EN&RESSYSTEMID=1)

当我在网上手动填写表格时，按下“继续”按钮后，我会得到一种“处理页面”，然后我会得到我想在其上搜索关键字的网页。

我尝试在这里使用脚本：http: [//stockrt.github.io/p/handling-html-forms-with-python-mechanize-and-BeautifulSoup/](http://stockrt.github.io/p/handling-html-forms-with-python-mechanize-and-BeautifulSoup/)，但由于某种原因，在我提交表单后：`print br.response().geturl()`我获取“处理页面”的网址，而不是我要搜索的网页的网址。

我的代码：

```
import mechanize
import cookielib
from BeautifulSoup import BeautifulSoup
import html2text

# Browser
br = mechanize.Browser()

# Cookie Jar
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

# Browser options
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)

# Follows refresh 0 but not hangs on refresh > 0
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

# User-Agent (this is cheating, ok?)
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]

# The site we will navigate into, handling it's session
br.open('https://booking.elal.co.il/newBooking/changeOrder.jsp?LANG=EN&RESSYSTEMID=1')

# Select the first (index zero) form
br.select_form(nr=0)

# User credentials
br.form['REC_LOC'] = '...'
br.form['DIRECT_RETRIEVE_LASTNAME'] = '...'

# Login
br.submit()

#Trying to print the webpage
html = br.response().read()
print html2text.html2text(html) 
```

是否可以做我想做的事，我该怎么做？

# android-ndk - 使用 Android NDK 调用本机代码构建时出现 UnsatisfiedLinkError

> ID：15986292
> 
> 赞同：0
> 
> 时间：2013-04-13T09:28:04.747
> 
> 标签：android-ndk, runtime-error, native-code, unsatisfiedlinkerror

我在一个简单的 android 应用程序中有一个按钮，用于调用本机函数。主活动中的按钮调用 HADriver.java 的一个函数。该函数依次调用 DriverAdapter.cpp 中的 JNI 函数。然后，该 JNI 函数依次调用 Driver.cpp 中的本机函数。`testCout`以下是在单击按钮时发挥作用的每个文件的部分`MainActivity`。

MainActivity 中的按钮：

```
private HADriver driver = new HADriver();
....

testCout.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            driver.testCout();

        }
    }); 
```

HADriver.java

```
package com.ihearhtpi;

public class HADriver {

    static {  
        System.loadLibrary("gnustl_shared");
        System.loadLibrary("driveradapter");  
    } 

    public native void testCout();
} 
```

驱动适配器.cpp

```
#include <jni.h>
#include <string.h>
#include <android/log.h>
#include <Driver/driver.h>
#define DEBUG_TAG "NativeCalls"

void Java_com_ihearhtpi_HADriver_testCout(JNIEnv * env, jobject thiz)
{
    Driver* driver = new Driver();
    driver->testCoutFunc();
    __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:LC: [%s]", "Testing... this best effing work!");
    delete driver;
} 
```

驱动程序.cpp

```
#include <Driver/driver.h>
#include <iostream>
...
//bunch of custom irrelevant functions and includes

Driver::Driver()
{
    CustomFuncs::initBitMasks(); // call global namespace function of CustomFuncs
}

void Driver::testCoutFunc()
{
    std::cout << "These are the droids you're looking for." << std::endl;
} 
```

但是，我不断收到以下错误，每次单击`testCout`按钮时我的应用程序都会崩溃。

```
04-13 02:22:46.130: W/dalvikvm(17228): No implementation found for native Lcom/ihearhtpi/HADriver;.testCout:()V
04-13 02:22:46.130: D/AndroidRuntime(17228): Shutting down VM
04-13 02:22:46.130: W/dalvikvm(17228): threadid=1: thread exiting with uncaught exception (group=0x40e0c300)
04-13 02:22:46.130: E/AndroidRuntime(17228): FATAL EXCEPTION: main
04-13 02:22:46.130: E/AndroidRuntime(17228): java.lang.UnsatisfiedLinkError: Native method not found: com.ihearhtpi.HADriver.testCout:()V
04-13 02:22:46.130: E/AndroidRuntime(17228):    at com.ihearhtpi.HADriver.testCout(Native Method) 
```

是什么赋予了？我不明白为什么这个本机调用不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:03:49.770

显然在我的 JNI 文件中，我需要用

```
#ifdef __cplusplus
extern "C" {
#endif

...JNI functions here...

#ifdef __cplusplus
}
#endif 
```

在此之后，一切正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:04:18.573

尽量不要通过驱动程序调用 testCout。尝试制作一个包装函数，例如 driver.testCoutHelper(); 在点击中。

然后在 testCoutHelper() （在 HADriver.java 中）你可以调用 testCout(); 让我们先试试这个并告诉我结果；

# php - 简易用户界面文件上传器

> ID：15986299
> 
> 赞同：-1
> 
> 时间：2013-04-13T09:28:54.980
> 
> 标签：php, mysql

我正在使用简单的 ui 并制作一个与 mysql 和 php 连接的文件上传器

这是我插入新数据的代码

```
<?php

$desc = $_REQUEST['resultDesc'];

//------------------ Check file for error message ----------------
if($_FILES["resultFile"]["error"] <= 0)
{   
//------------------ Check wether file exists -----------------
if (!(file_exists("results/" . $_FILES["resultFile"]["name"])))
{
   //----------- Upload File ----------------------------------
  move_uploaded_file($_FILES["resultFile"]["tmp_name"],
  "results/" . $_FILES["resultFile"]["name"]);

  include 'Connection.php';

//--------------- Todays Date ----------------------------
$today = date("Y-m-d");
$file = $_FILES["resultFile"]["name"];

$sql = "insert into results(id,date,description,filename)  
values(NULL,'$today','$desc','$file')";

$result = @mysql_query($sql);

if ($result)
{
echo json_encode(array('success'=>true));
} 
else 
{
echo json_encode(array('msg'=>'Some errors occured.'));
}

//--------------------- Close COnnection ------------------
mysql_close($connection);

}   
}

else
echo json_encode(array('msg'=>'Some errors occured.'));
?> 
```

而在用户端我有这个代码

```
<div class="fitem">
<label>Description</label>
 <textarea name="resultDesc" style="width:300px;height:100px;resize:none" class="easyui-validatebox" required="true"></textarea>
 <label>Result File</label>
 <input type="file" name="resultFile" size = "30px;" class="easyui-validatebox" required="true">
 </div> 
```

上面的代码不起作用。请帮忙。文件上传不包含在 easy ui 中，我正在制作一个自定义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:33:49.190

尝试更换

```
$sql = "insert into results(id,date,description,filename)  
values(NULL,'$today','$desc','$file')"; 
```

有了这个：

```
$sql = "insert into `results`(`id`,`date`,`description`,`filename`)  
values(NULL,'$today','$desc','$file')"; 
```

使用反引号转义字段名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:29:32.570

如果一个 javascript 正在调用这个 php 文件，请尝试。{ window.location = "你的文件名"; }。

尝试将所有变量回显为 { $_REQUEST['resultDesc'], $_FILES["resultFile"]["name"] }

# javascript - jquery将html页面加载为纯文本

> ID：15986300
> 
> 赞同：0
> 
> 时间：2013-04-13T09:28:58.873
> 
> 标签：javascript, jquery, ajax, malformed

我正在尝试使用 jquery 加载本地 html 页面并显示它的更改版本。我想我可以很好地进行更改，但我似乎无法加载页面，因为它包含格式错误的标签，例如未关闭的 IMG 或 BR 标签，或 </ 字符，这些标签通常被网络浏览器忽略

但是当我使用 $.get("mypage.html"); 命令，firefox的javascript控制台显示一个错误，告诉我格式错误的标签，最后，ajax响应只包含发送ajax请求的页面（考虑到加载失败，这是正常的）

我猜解决方案是将html页面加载为纯文本，这样firefox就不会捕获格式错误的标签错误，但我无法强制响应类型，所以我总是得到同样的错误。

到目前为止，我尝试像这样设置 ajax 插件：

```
$.ajax({
  contentType: "text/plain; charset=utf-8",
  dataType : "text",
  success: function(data) {
    alert(data);
  }
}); 
```

contentType 和 dataType 设置给了我一个 responseText 但加载仍然失败，所以它包含调用页面的源代码

这个问题真的没有解决办法吗？除了明显的“手动更正html页面中的标签”

我必须补充一点，所有这些都是本地的，不会涉及任何服务器处理。

我正在使用最新的 firefox (20) 和 jquery (1.9.1) 更新到今天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:35:43.747

XMLHttpRequest 触发一个 HTTP 请求；因此，我很确定您无法避免涉及到 HTTP 服务器。

# jquery - 如何在jquery显示隐藏切换中旋转图标箭头？

> ID：15986301
> 
> 赞同：0
> 
> 时间：2013-04-13T09:29:08.877
> 
> 标签：jquery, toggle, hide, show

那里..

* * *

我要问你？如何在 jquery show hide 切换中旋转箭头图标？我在这里尝试过：http: [//jsfiddle.net/mikonimations/EzQsG/](http://jsfiddle.net/mikonimations/EzQsG/)

```
<section id="evenmorelinks"><h1><div class="arrow before"></div><a id="show-title" onclick="false">Show More</a><div class="arrow after"></div></h1></section>

<div id="cnt" style="display: none" class="fcolcontainer2">
<div class="f2segment"><h2>Example block</h2><span><a>333</a></span></div>
<div class="f2segment"><h2>Example block</h2><span><a>333</a></span></div>
<div class="f2segment"><h2>Example block</h2><span><a>333</a></span></div>
<div class="f2segment"><h2>Example block</h2><span><a>333</a></span></div>
<div class="f2segment"><h2>Example block</h2><span><a>333</a></span></div>
<div class="f2segment"><h2>Finish block</h2><span><a>333</a></span></div> 
```

这个jquery

```
 (function ($) {
      $(document).ready(function() {
      $("#show-title").click(function () {
         if ($('#cnt').is(":visible")) {
             $(this).html($(this).html().replace(/Hide/, 'Show'));
         } else {
             $(this).html($(this).html().replace(/Show/, 'Hide'));
         }
         // Do it afterwards as the operation is async
         $("#cnt").slideToggle("fast");
      });
  }); 
```

但一直没有成功。请帮我！谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:40:40.887

There's a lot of stuff going on in there, but if I read your intention it boils down to adding expanded class to one of the parent elements. Try this:

```
$("#show-title").click(function () {
    $(this).parents('#evenmorelinks').toggleClass('expanded');
    // Do it afterwards as the operation is async
    $("#cnt").slideToggle("fast");
}); 
```

working [example](http://jsfiddle.net/cuUfK/).

# typescript - 打字稿：如何在构造函数上声明原型对象的类型

> ID：15986306
> 
> 赞同：0
> 
> 时间：2013-04-13T09:29:32.003
> 
> 标签：typescript

我得到这个编译错误：

“基础”类型的值上不存在属性“原型”

在下面的类中，我怎样才能让 typescript 将原型对象识别为构造函数函数中的原生对象类型？

```
interface IBase {
  extend: any;
  prototype : any;
}

declare var Base : IBase;

class Base implements IBase {

  constructor() {}

  public extend( mixins : any ) : void {
    _.extend( this.prototype, mixins );
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:58:36.493

`this.prototype`可能不是您的意思，因为实例`Base`没有`prototype`属性（在运行时查看自己）。`Base`，但是，确实：

```
interface IBase {
  extend: any;
}

class Base implements IBase {
  constructor() {}

  public extend( mixins : any ) : void {
    _.extend(Base.prototype, mixins );
  }
} 
```

当然，此时`extend`也可能是静态的，因为它适用于所有`Base`实例。你的意思是这个吗？

```
 public extend( mixins : any ) : void {
    _.extend(this, mixins);
  } 
```

# java - 是否可以在 pom 中允许循环引用

> ID：15986307
> 
> 赞同：0
> 
> 时间：2013-04-13T09:29:34.703
> 
> 标签：java, maven

我有两个子 Maven 模块。

是否可以在两个模块中进行循环引用？我的意思是我在模块 A 中有一个在模块 B 中需要的类，反之亦然。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:33:25.530

不，POM 依赖项不能是循环的。

如果您有相互依赖的类：

*   将它们放在相同的 Maven 模块中，或者
*   重构它们以便依赖于接口，然后将接口推送到模块 A 和/或 B 可以依赖的通用 Maven 模块中。

根据经验，具有循环依赖关系的类应该在同一个包中，一个 Maven 模块应该由一个或多个不同的包组成。跨越多个包的类依赖循环通常被认为是不可取的......并且表明有缺陷的模块化。

# jquery - 使用Jquery的json响应中的未知html标签

> ID：15986308
> 
> 赞同：0
> 
> 时间：2013-04-13T09:29:36.797
> 
> 标签：jquery, json, codeigniter

我有以下问题，我使用 Codeigniter Controller 来生成 Json 输出。我的**控制器**是：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Json extends CI_Controller {

    function __construct() {
        parent::__construct();
        $this->load->model ('functionsonproducts'); 
    }

function index(){
    $data ['rows'] = $this->functionsonproducts->getProducts ();
    echo json_encode($data ['rows']);
      }
  } 
```

我想得到以下结果

```
[{"id":"1","name":"Milk","description":"200gr","price":"10"},{"id":"3","name":"","description":"","price":"0"}] 
```

但是当我用 jquery 调用控制器的函数时，比如

**jQuery**

```
 $.get("http://localhost/tddd27/index.php/json/index",
    function(data){
     console.log(data);
    }); 
```

最后我得到一个未知的 </html> 标签，所以如果我尝试使用 jquery 的 json 解析器，它会因为这个不需要的标签而产生错误。

**控制台输出：**

```
[{"id":"1","name":"Milk","description":"200gr","price":"10"},{"id":"3","name":"","description":"","price":"0"}]</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:38:37.353

not sure where in your code that tag is coming from, but put a return; after the json_endcode() statement and you'll stop anything else from being echo'd

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:09:23.167

在您的**控制器**中：

```
class Json extends CI_Controller {

function __construct() 
{
    parent::__construct();
    $this->load->model('functionsonproducts'); 
}
function index()
{
    $functionsOnProducts = $this->functionsonproducts->getProducts();
    echo json_encode($functionsOnProducts);
}
} 
```

在您**看来**：

```
function getAllFunctionsOnProducts() {
    $.ajax({type : "GET",
        url : "http://localhost/tddd27/index.php/json/index",
        data : { },
        success : function(result){
            var functionsOnProducts= jQuery.parseJSON(result);
            console.log(funtionsOnProducts);
            /* If you want to go through every product:
               jQuery.each(functionsOnProducts,function(){
            })
            */
} 
```

# c# - Asp.Net 中的静态变量行为

> ID：15986311
> 
> 赞同：1
> 
> 时间：2013-04-13T09:29:51.563
> 
> 标签：c#, asp.net, static, static-variables

我有一个 OperationHelper 类，如下所示：

```
public class OperationHelper
    {
        /// <summary>
        /// Gets or sets the Add Operation value
        /// </summary>
        public static bool AddOperation { get; set; }

        /// <summary>
        /// Gets or sets the Edit Operation value
        /// </summary>
        public static bool EditOperation { get; set; }

        /// <summary>
        /// Gets or sets the Delete Operation value
        /// </summary>
        public static bool DeleteOperation { get; set; }

        /// <summary>
        /// Gets or sets the Select Operation value
        /// </summary>
        public static bool SelectOperation { get; set; }
    } 
```

在每次请求时，都会重新分配这些值。当我在本地运行它时，它可以正常工作。但是当我发布代码时，一些值没有被分配或无法正常工作。

所以想用 C# 了解 Asp.Net 中静态变量的行为。

静态变量是否等于所有用户都可以访问的全局变量？如果用户 A 将其设置为 true，则用户 B 可以将该值设为 True，或者它具有不同的变量实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T09:34:44.460

变量的行为`static`是，一旦到达它们所属的代码，它们就会被创建。为了解决您的问题，请考虑`static constructor`为您的班级正确初始化所有值以满足您的需求

```
public class OperationHelper
{
    /// <summary>
    /// Gets or sets the Add Operation value
    /// </summary>
    public static bool AddOperation { get; set; }

    /// <summary>
    /// Gets or sets the Edit Operation value
    /// </summary>
    public static bool EditOperation { get; set; }

    /// <summary>
    /// Gets or sets the Delete Operation value
    /// </summary>
    public static bool DeleteOperation { get; set; }

    /// <summary>
    /// Gets or sets the Select Operation value
    /// </summary>
    public static bool SelectOperation { get; set; }

    static OperationHelper() {
    //initialize your static variables here
    }
} 
```

有关构造函数的参考，请参见[此处。](http://msdn.microsoft.com/en-us/library/k9x6w0hc.aspx)`static`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T10:03:11.697

> 所以想用 C# 了解 Asp.Net 中静态变量的行为。
> 
> 静态变量是否等于所有用户都可以访问的全局变量？如果用户 A 将其设置为 true，则用户 B 可以将该值设为 True，或者它具有不同的变量实例。

只有当您在池中**的一个工作进程下运行您的站点**时，才会出现这种行为。

如果您的池有**多个工作进程，则每个进程都有其静态值**，并且您不知道每个请求和每个用户分配了哪个进程。并且一起处理它们是不通信的。

因此，假设您有一个包含 4 个工作进程的池。

UserA请求页面，进程1为replay，给A设置一个静态值
。UserB请求页面，进程1为replay，静态值为
A。UserA请求页面，进程2为replay，静态值为A。没有设置。

等等。有关该主题的更多信息： [ASP.NET 静态变量的生命周期 静态变量](https://stackoverflow.com/questions/8919095/lifetime-of-asp-net-static-variable/8919336#8919336)
[在哪里存储在 asp.net aspx 页面中](https://stackoverflow.com/questions/5559529/where-are-static-variables-stored-in-asp-net-aspx-page/5559554#5559554)
[在 ASP.NET 中使用静态变量而不是应用程序状态](https://stackoverflow.com/questions/10960695/using-static-variables-instead-of-application-state-in-asp-net/10964038#10964038)
[ASP.NET 网站上的静态方法](https://stackoverflow.com/questions/2779617/static-methods-on-asp-net-web-sites/2779646#2779646)
[Asp.net 静态对象有时会显示为非全球性](https://stackoverflow.com/questions/15721883/asp-net-static-object-appears-sometimes-as-non-global/15722751#15722751)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T09:37:34.693

静态变量只创建一次。所以`userB`会得到相同的变量实例来回答你的问题。

更多关于这方面的讨论[在这里](https://stackoverflow.com/questions/1563171/asp-net-c-sharp-static-variables-are-global)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T10:17:33.170

您需要考虑会话，该会话将为访问该站点的每个用户提供不同的价值

# iphone - Xcode Base 国际化不起作用

> ID：15986313
> 
> 赞同：33
> 
> 时间：2013-04-13T09:29:58.147
> 
> 标签：iphone, ios, xcode, internationalization

我正在尝试本地化我的应用程序。我注意到，如果我添加一种语言，每个本地化文件都会翻倍。这样就不可能维护代码或故事板，所以我知道我需要*Base internationalization*。

问题是，当我在 xcode 项目设置中选择该复选框时，它会显示一个没有**任何内容可供选择**的窗口，有谁知道如何解决这个问题？

这是一个屏幕截图

![在此处输入图像描述](https://i.stack.imgur.com/ZvN8g.png)

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-05-26T03:19:46.607

首先，您需要转到您的故事板文件，打开右侧的栏，然后转到左侧最远的选项卡 Show the File Inspector。然后，向下滚动并单击本地化。在此之后，当您选中 Use Base Localization 时，您应该会看到 storyboard 出现。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-31T10:50:11.240

如果 Base Internationalization 在禁用之前处于活动状态并且手动删除文件，则可能会发生这种情况。

1.  使用 finder 在您的项目文件夹中创建 Base.lproj 文件夹。
2.  也使用取景器将您的主故事板移动到它。
3.  从 Xcode 修复对它的引用。
4.  删除应用程序。从设备，清理和构建您的项目。

一切都会恢复正常。

# typescript - 带有用于打字稿的微风js的类型化实体或替代VS的扩展以从c＃类创建接口？

> ID：15986314
> 
> 赞同：4
> 
> 时间：2013-04-13T09:29:59.077
> 
> 标签：typescript, breeze

我正在使用打字稿中的微风/淘汰赛创建一个演示项目。

当我有我的时候，`manager.createEntity("Project")`我得到了一个类型为轻风的对象。实体返回。这有`entityAspect`和`enityType`。

我无法找到是否有可能让它返回正确的类型，在我的情况下是项目。

如果有人可以协助创建它，另一种解决方案是在 VS 中为 typescript 中的 c# 类提供设计时支持。

然后我就可以做 manager.createEntity("Project"); 我相信这将是在这种情况下获取实体类型的最佳方式。任何意见？谁能为我创建这样的扩展程序？或者告诉我怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-02T13:30:41.400

我可以为您提供“替代 VS 扩展以从 c# 类创建接口？”的解决方案。

我还没有 VS 扩展，但我制作了一个小工具，可以从您的 .NET-Domainclasses 创建 Knockout/Backbone/TypeScript-models/interfaces。

如果您使用 DataAnnotations，您将免费获得敲除/骨干的默认值和评估 :)

[http://jsmapper.codeplex.com](http://jsmapper.codeplex.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:48:09.010

要回答“我无法找到是否有可能让它返回正确的类型，在我的情况下是项目。”

您目前唯一的解决方案是类型断言（Typescript 替代类型转换），即。：

```
var myProject:Project = <Project>manager.createEntity("Project"); 
```

尽管一个新特性正在开发中，它使得定义这样的定义变得超级简单。它被称为***常量重载***：http : [//blogs.msdn.com/b/typescript/archive/2013/03/25/working-on-typescript-0-9-generics-overload-on-constants-and-compiler-性能.aspx](http://blogs.msdn.com/b/typescript/archive/2013/03/25/working-on-typescript-0-9-generics-overload-on-constants-and-compiler-performance.aspx)

# android - 使用 Fireworks 设计 Android UI 和实现

> ID：15986323
> 
> 赞同：1
> 
> 时间：2013-04-13T09:30:46.370
> 
> 标签：android, user-interface, android-ui, fireworks, stencils

我想学习设计 android UI 和实现 android 应用程序。我在网上找到了一个视频教程，但似乎只是如何设计。我不知道如何在应用程序上使用它。

[视频教程](http://www.youtube.com/watch?v=p8pN5_ynWmI)

如何在我的 android 应用上使用自定义 UI 设计？我正在使用烟花进行设计。例如，简单的设计：

![在此处输入图像描述](https://i.stack.imgur.com/76WGdl.png)

我如何在我的应用程序上使用它？（我知道这看起来很糟糕，但我只想学习如何去做。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:36:59.687

仅仅在烟花中创建一个 UI 是不够的。您需要将其拆分为多个组件，并使用 XML 或 Java 在您的应用程序中构建它。

Android 开发者网站[有一套很好](http://developer.android.com/guide/topics/ui/overview.html)的文档和指南。

在 Google 上搜索还会为您提供大量关于不同 UI 元素以及如何设置它们的样式的教程。

从我所见，您的布局将需要一个选项卡式 Activity（或一个带有选项卡的 ActionBar）、一个 TextView 和一个 Switch。

# c# - Html 输入文件控件在更新面板中使用时不上传文件

> ID：15986328
> 
> 赞同：0
> 
> 时间：2013-04-13T09:31:22.770
> 
> 标签：c#, updatepanel, htmlcontrols

伙计们，我有一个表格，我正在使用 2 `UpdatePanel`s。当我尝试使用 html 输入文件控件上传文件时遇到问题，它是上传空值。我的 html 输入类型文件控件位于第一个更新面板中。提前谢谢任何帮助....

```
<%@ Page Title="InstructorView" Language="C#" MasterPageFile="~/AdminDashboard.Master"
    AutoEventWireup="true" CodeFile="InstructorView.aspx.cs" Inherits="Admin_InstructorView" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajax" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="Server">
    <link rel="shortcut icon" href="../App_Themes/Admintheme/images/LIT_Icon.ico" />
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="Server">
    <script language="javascript" type="text/javascript">

        function ConfirmDelete() {

            return confirm("Are u sure u want to delete this records?")
        }  
    </script>
    <ajax:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </ajax:ToolkitScriptManager>
     <asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional"  ChildrenAsTriggers="true"  runat="server">
                <ContentTemplate > 
    <div class="grid_16" id="content">
        <div class="grid_9">
            <h1 class="instructorprofile">
                Instructors Status</h1>
            <div class="portlet-content">
                <asp:GridView ID="grdInst" runat="server" AutoGenerateColumns="false" CellPadding="4"
                    Width="900px" OnRowDeleting="grdInst_RowViewing" AllowPaging="true" PageSize="10"
                    CssClass="box-table-a">
                    <%-- OnPageIndexChanging="grdInst_PageIndexChanging"--%>
                    <FooterStyle />
                    <Columns>
                        <asp:BoundField DataField="InstructorID" HeaderText="Instructor Code" ReadOnly="true"
                            ItemStyle-HorizontalAlign="Center" ItemStyle-Width="90px" />
                        <asp:BoundField DataField="FirstName" HeaderText="First Name" />
                        <asp:BoundField DataField="LastName" HeaderText="Last Name" />
                        <asp:BoundField DataField="IsActive" HeaderText="Status" />
                        <asp:TemplateField ItemStyle-Width="30px" HeaderText="View" ItemStyle-HorizontalAlign="Center">
                            <ItemTemplate>
                                <asp:LinkButton ID="lkView" runat="server" CommandName="Delete" Text="" CssClass="view_icon"
                                    ToolTip="Click for View" />
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField ItemStyle-Width="30px" HeaderText="Edit" ItemStyle-HorizontalAlign="Center">
                            <ItemTemplate>
                                <asp:LinkButton ID="lnkEdit" runat="server" Text="" CssClass="edit_icon" ToolTip="Click for Edit"
                                    OnClick="Edit"></asp:LinkButton>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField ItemStyle-Width="30px" HeaderText="" ItemStyle-HorizontalAlign="Center">
                            <ItemTemplate>
                                <asp:LinkButton ID="lkDelete" runat="server" CssClass="delete_icon" ToolTip="Click for Delete"
                                    OnClientClick='return confirm ("Are you sure you want to delete this entry?");'
                                    CommandName="Delete" OnClick="Delete" Text="" Visible="false" />
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                    <RowStyle />
                    <EditRowStyle />
                    <SelectedRowStyle />
                    <PagerStyle HorizontalAlign="Center" />
                    <HeaderStyle />
                    <AlternatingRowStyle />
                </asp:GridView>

                          </div>

            <asp:Panel ID="pnlInst" runat="server" Visible="false" Height="512px">

                <div class="grid_16" id="content_popup" style="margin: 0px auto; display: block;
                    float: none;">
                    <span style="display: block; float: right; margin-right: 0; margin-top: -10px;">
                        <asp:ImageButton ID="ImageButton2" ImageUrl="../AppImages/close-popup.png" runat="server" />
                    </span>
                    <h1 class="instructorprofile">
                        Instructor Details</h1>
                    <div class="portlet-content" 
                        style="overflow: auto; height: 400px; width: 370px;">
                        <label>
                            <asp:Label ID="Label20" runat="server" Text="Course I will be Teaching"></asp:Label></label>
                        <asp:DropDownList ID="drpCourseName" runat="server" CssClass="smallInput" AutoPostBack="true">
                        </asp:DropDownList>
                        <asp:TextBox ID="txtSpecialization" runat="server" Visible="false" CssClass="smallInput"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator9" runat="server" ControlToValidate="drpCourseName"
                            ErrorMessage="" ValidationGroup="1" Display="Dynamic">
                            <div class="error"> <p  class="info">
                    <span class="info_inner">Course Name is Required!</span></p></div>
                        </asp:RequiredFieldValidator>
                        <label>
                            <asp:Label ID="Label1" runat="server" Text="First Name"></asp:Label>
                        </label>
                        <asp:TextBox ID="txtFirstName" runat="server" CssClass="smallInput"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator7" runat="server" ControlToValidate="txtFirstName"
                            ErrorMessage="" ValidationGroup="1" Display="Dynamic">
                             <div class="error"> <p  class="info">
                    <span class="info_inner">First Name is Required!</span></p></div>
                        </asp:RequiredFieldValidator>
                        <label>
                            <asp:Label ID="Label2" runat="server" Text="Last Name"></asp:Label>
                        </label>
                        <asp:TextBox ID="txtLastName" CssClass="smallInput" runat="server"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator8" runat="server" ControlToValidate="txtLastName"
                            ErrorMessage="" ValidationGroup="1" Display="Dynamic">
                             <div class="error"> <p  class="info">
                    <span class="info_inner">Last Name is Required!</span></p></div>
                        </asp:RequiredFieldValidator>
                        <label>
                            <asp:Label ID="Label10" runat="server" Text="Cell Number"></asp:Label></label>
                        <asp:TextBox ID="txtCellNumber1" CssClass="smallInput" runat="server"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator13" runat="server" ControlToValidate="txtCellNumber1"
                            ErrorMessage="" ValidationGroup="1" Display="Dynamic"> 
                     <div class="error"> <p  class="info">
                                    <span class="info_inner">Cell Number is Required! </span></p></div>
                        </asp:RequiredFieldValidator>
                        <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ControlToValidate="txtCellNumber1"
                            ErrorMessage="" ValidationExpression="^[0-9]*$" Display="Dynamic" ValidationGroup="1"> 
                     <div class="error"> <p  class="info">
                                    <span class="info_inner"> Invalid Format</span></p></div>
                        </asp:RegularExpressionValidator>
                        <label>
 <asp:Label ID="Label21" runat="server" Text="Email"></asp:Label></label>
                        <asp:TextBox ID="txtEmail" CssClass="smallInput" runat="server"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator14" runat="server" ControlToValidate="txtEmail"
                            ErrorMessage="" ValidationGroup="1" Display="Dynamic"> 
                     <div class="error"> <p  class="info">
                                    <span class="info_inner">Email is Required! </span></p></div>
                        </asp:RequiredFieldValidator>
                        <asp:RegularExpressionValidator ID="ValidateEmailAddress" ErrorMessage="Enter Valid Email ID"
                            ControlToValidate="txtEmail" runat="server" Display="Dynamic" ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*">

                     <div class="error"> <p  class="info">
                                    <span class="info_inner">Enter Valid Email Id! </span></p></div>
                        </asp:RegularExpressionValidator>
                        <label>
                            Upload Contract</label>
                        <input id="inputContract" type="file" runat="server" />
                        <asp:UpdatePanel ID="UpdatePanel2" UpdateMode="Conditional" ChildrenAsTriggers ="true"   runat="server"  >
                            <ContentTemplate>
                                <asp:Button ID="btnUpload" runat="server" CssClass="black_button" Text="Upload File"
                                    OnClick="btnUpload_Click" CausesValidation="false" />
                                 <asp:Label ID="lblContract" runat="server" Text="" Visible="true"></asp:Label>

                            </ContentTemplate>
                            <Triggers>
                                <asp:AsyncPostBackTrigger ControlID="btnUpload" EventName="Click" />
                            </Triggers>
                        </asp:UpdatePanel>

                      <asp:UpdateProgress ID="UpdateProgress1" AssociatedUpdatePanelID ="UpdatePanel1" runat="server">
                                    <ProgressTemplate>
                                        Please Wait while We Save Your Changes....<img alt="" src="../AppImages/ajax-loader-7.gif" />
                                    </ProgressTemplate>
                                </asp:UpdateProgress>  <label>
                            <asp:Label ID="Label7" runat="server" Text="Current Status"></asp:Label>
                        </label>
                        <asp:RadioButtonList ID="rbtnIsActive" runat="server" RepeatDirection="horizontal">
                            <asp:ListItem Value="True">Active&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</asp:ListItem>
                            <asp:ListItem Selected="True" Value="False">Blocked&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</asp:ListItem>
                        </asp:RadioButtonList>
                        <asp:Button ID="btnSave" runat="server" Text="Save" CssClass="black_button" 
                            ValidationGroup="1" onclick="btnSave_Click"
                            />

                        <asp:Button ID="btnCancel" runat="server" CssClass="black_button" Text="Cancel" OnClientClick="return Hidepopup()" />
                        <asp:Label ID="lblUserName" runat="server" Visible="false"></asp:Label>
                        <asp:Label ID="lblPassWord" runat="server" Visible="false"></asp:Label>
                    </div>
                </div>

            </asp:Panel>
            <asp:LinkButton ID="lnkFake" runat="server"></asp:LinkButton>
            <ajaxToolkit:ModalPopupExtender ID="popup" runat="server" DropShadow="false" PopupControlID="pnlInst"
                TargetControlID="lnkFake" >
            </ajaxToolkit:ModalPopupExtender>

        </div>
    </div>
     </ContentTemplate> 
                    <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="btnSave" EventName="Click" />
                          </Triggers>
                </asp:UpdatePanel>  
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:39:11.647

更新面板上的必需触发器。

# nhibernate - Nhibernate 多对多加在两边

> ID：15986329
> 
> 赞同：1
> 
> 时间：2013-04-13T09:31:35.077
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

我正在使用 Nhibernate 创建一个多对多的实现。目前我有以下课程。在这两个类中，我都实现了`AddObjX(Objx obj)`将项目添加到集合中的方法。

```
Obj1
{
  int id;
  Ilist<Obj2> obj2;
}

Obj2
{
  int id;
  Ilist<Obj1> obj1;
} 
```

在我的映射中

```
HasManyToMany(x => x.Obj1)
   .Table("Obj1Obj2")
   .ParentKeyColumn("Obj1Id")
   .ChildKeyColumn("Obj2Id")
   .Inverse()
   .Cascade
   .SaveUpdate();

HasManyToMany(x => x.Obj2)
   .Table("Obj1Obj2")
   .ParentKeyColumn("Obj2Id")
   .ChildKeyColumn("Obj1Id")
   .Inverse()
   .Cascade
   .SaveUpdate(); 
```

当我现在说

```
obj1.AddObj2(obj2);
Session.SaveOrUpdate(obj1); 
```

我只得到 obj1 -> obj2 之间的关联。因此，如果我检索 obj2，则没有与之耦合的 obj1。当我检索 obj1 时，有一个 obj2 与之耦合。

当我做

```
obj1.AddObj2(obj2);
obj2.AddObj1(obj1);
Session.SaveOrUpdate(obj1); 
```

我在这两种情况下都有对象。这是设计的还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:36:52.167

您是否尝试`Inverse`过从第二个 HasManyToMany 中删除？

AFAIK 你应该只有一个逆，因为这指示 NH 映射的哪一侧负责插入。

请参阅[northerdev 的这篇文章以及](http://notherdev.blogspot.co.uk/2011/11/many-to-many-mapping-inverse.html)这篇[后续文章](http://notherdev.blogspot.co.uk/2011/11/many-to-many-mapping-collection-types.html)。

# bash - Bash 标准错误重定向

> ID：15986330
> 
> 赞同：2
> 
> 时间：2013-04-13T09:31:40.087
> 
> 标签：bash, standard-error

我正在尝试验证用户输入的输入是数字类型还是非数字类型。如果是数字类型，那么它将执行必要的操作，否则它将生成我设计的错误消息（不是生成的标准错误）

我一直在使用的步骤是：

1> 对输入进行数学运算。
`echo -n "Enter a number : "; read a`

现在如果输入`a`是数字类型，则操作成功，否则将生成标准错误。

`Enter a number : ww`

`expr: non-numeric argument`

我用来重定向标准错误的代码是：

```
tmp=`expr $a / 1` >&2 
```

我还尝试使用以下代码将其重定向到空文件：

```
tmp=`expr $a / 1` > /dev/null 
```

但是仍然显示错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T09:36:14.107

您必须在内部表达式中重定向 stderr：

```
tmp=`expr $a / 1 2>/dev/null` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T09:47:16.023

您的两个示例都重定向标准输出，而不是标准错误*，*因为`>`.

要丢弃 stderr，您需要`2> /dev/null`，因为它是文件描述符 2。另外有用的是`2>&1`，将 stderr 合并到 stdout，以及`&> file`将 stderr 和 stdout 重定向到同一个文件的简写。

这个页面解释得很好：[http ://www.tldp.org/LDP/abs/html/io-redirection.html](http://www.tldp.org/LDP/abs/html/io-redirection.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T09:37:09.427

正则表达式输入怎么样？

```
read a
if [[ $a =~ ^[0-9]+$ ]]
then
  echo this is a number
else
  echo not a number
fi 
```

*   `^`表示字符串的开头
*   `$`表示字符串结束
*   `[0-9]+`表示一个数字出现 1 次或多次
*   `=~`是 [Bash 正则表达式的语法](http://mywiki.wooledge.org/BashGuide/Patterns)

# mysql - 选择顺序...找不到错误

> ID：15986331
> 
> 赞同：-3
> 
> 时间：2013-04-13T09:31:56.790
> 
> 标签：mysql, sql

我有一个问题，试图对我的 Select 请求进行排序 -

```
SELECT * FROM `table_name`  OREDER BY `score` DESC LIMIT 10 ; 
```

我收到错误 #1064：

> `#1064`- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`score`在第 1 行的“BY DESC LIMIT 10”附近使用正确的语法

但我真的不知道错了！我认为名称和引号是正确的......因为此请求正常工作：

```
INSERT INTO `table_name` (`uid`, `score`) VALUES ("'.$viewer_id.'","'.$uscore.'") ON DUPLICATE KEY UPDATE `score` = "'.$uscore.'";'; 
```

有人可以帮帮我吗？？？？

PS对不起我的英语（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:32:34.527

它`ORDER`不是`OREDER`

```
SELECT * FROM table_name ORDER BY score DESC LIMIT 10 
```

* * *

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T09:35:22.337

您的语法中有拼写错误，它是“ORDER BY”而不是“OREDER BY”，正确的语法应该是：

```
SELECT * FROM `table_name`  ORDER BY `score` DESC LIMIT 10 ; 
```

# javascript - 将 jQuery UI 工具提示附加到 openstreetmap 标记

> ID：15986332
> 
> 赞同：0
> 
> 时间：2013-04-13T09:32:02.327
> 
> 标签：javascript, jquery-ui, openstreetmap

我正在尝试放置一个 jQuery UI 标记，但它没有显示出来。为了测试，我在地图上方的 H1 中添加了一个标题属性，它工作正常。

我尝试了很多方法，例如使用 .attr() 设置标记的标题，但这似乎是最合乎逻辑的：

```
ic = "img/" + place.type + '/' + place.status + ".png";
marker = new OpenLayers.Icon(ic, size, 0);
placeMarker = new OpenLayers.Marker(new OpenLayers.LonLat(place.longitude,     
    place.latitude).transform(gg,sm), marker);
$(placeMarker).tooltip({ content: place.name });
placeLayer.addMarker(placeMarker); 
```

正如我所说，H1 工具提示有效（并显示在地图上，因此它不是 z-index 问题），但没有显示任何标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T09:15:01.600

为了解决这个问题，我创建了自己的工具提示 div，当光标移动时它会四处移动。然后，当光标位于我想要提示的内容上方时，会显示并隐藏 div：

```
$(document).mousemove(function(e){
    curX = e.pageX + 10;
    curY = e.pageY;

    tooltip = $("#tooltip");
    tooltip.css("left", curX);
    tooltip.css("top", curY);
 }); 
```

# zend-form - 为什么这个 Zend_Form NotEmpty 验证器给我一个错误信息？

> ID：15986334
> 
> 赞同：0
> 
> 时间：2013-04-13T09:32:19.500
> 
> 标签：zend-form

对于需要的 Zend 表单元素，我通常这样做：

```
$this->addElement('text', 'loginEmail');
$this->loginEmail
        ->setLabel('Email')
        ->setRequired(true); 
```

不过，我对错误消息不满意。Zend 文档说这`setRequired()`只是在链中添加了一个 NotEmpty 验证器，所以我这样做了：

```
 $validator = new Zend_Validate_NotEmpty();
    $validator->setMessage('A value is required');

    $this->addElement('text', 'loginEmail');
    $this->loginEmail
            ->setLabel('Email')                
            ->addValidator($validator); 
```

但是现在我没有收到该元素的任何错误消息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T04:56:29.397

好的，所以我并没有真正得到我的问题的答案，但是我已经意识到`setRequired()`验证器是一个复杂的小动物，可能不是 Zend 团队最自豪的时刻。因此，我没有寻找上述问题的答案，而是找到了一种非常有效的 setRequired 方法。这里是：

```
 $this->addElement('text', 'orgName');
    $this->orgName
            ->setLabel('Name')
            ->addFilter('StringTrim')                
            ->addValidator('NotEmpty', true, array(
                'messages' => 'Name is required'))                
            ->setRequired(true)
            ->addValidator('Alnum', false, array(
                'allowWhiteSpace'   => true,
                'messages'          => 'Alpha and numeric characters only'))
            ->addValidator('StringLength', false, array(
                'min'       => 3,
                'max'       => 128,
                'messages'  => 'Between 3 and 128 characters')); 
```

关键是添加 NotEmpty 验证器并**在调用 setRequired 之前对其进行配置。** 当调用 setRequired 时，它会检测到 NotEmpty 验证器已添加到链中，因此不会添加自己的实例。

# iphone - iOS 项目将 Xcode 4.2 更新到 Xcode 4.5

> ID：15986341
> 
> 赞同：8
> 
> 时间：2013-04-13T09:32:54.473
> 
> 标签：iphone, ios, xcode, ios4, iphone-5

![在此处输入图像描述](https://i.stack.imgur.com/k56pg.png)

在我的项目中，我使用 XCode 4.2 完成了 90% 的开发（只需要支持 4.x、5.x），现在我还需要为 iOS 6 构建，所以我切换到 Xcode 4.5 和 iOS 6。但我我面临很多问题，例如“Sqlite3”、“MobileCoreServices”的框架错误

我已阅读下面的 Thread 但没有成功。

[如何使 Xcode 4.5 项目在以前版本的 Xcode 上工作？](https://stackoverflow.com/questions/12556393/how-to-make-xcode-4-5-project-work-on-previous-version-of-xcode)

[Xcode 链接器目录未找到选项](https://stackoverflow.com/questions/9987292/xcode-linker-directory-not-found-for-option)

**谁能告诉我如何为 ARMV7 和 ARMV7S 编译“Sqlite3”、“MobileCoreServices”框架。我不能从项目中删除两者，因为我几乎已经完成了:(**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T20:15:56.950

这背后的确切原因存在不确定性，但您的问题可以通过下面提供的任何案例来解决。

**情况1 ：**

这可能是由于缺少任何库，例如 libsqlite3.dylib 和 libsqlite3.0.dylib 或 MobileCoreServices，因此请从任何其他计算机复​​制这些文件并将这些文件放在您的计算机中。

程序：

1：在这些文件所在的计算机上打开xcode，将libsqlite3.0.dylib从链接二进制文件添加到您的项目中。2：右键单击 libsqlite3.0.dylib 并在 finder 中显示（MobileCoreServices 相同）。3：复制两个文件 libsqlite3.0.dylib 和 libsqlite3.dylib 并放在其他计算机上缺少这些文件的相同位置。

给你，问题可以这样解决。

**案例 2：** 重新安装 XCode 可能会正常工作

**案例3：** 检查这个[答案](https://stackoverflow.com/questions/5392649/xcode-sqlite3-libsqlite-dylib)

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:39:32.697

在项目资源管理器中单击您的项目时，对于每个目标，选择该目标。然后在构建阶段，在与二进制库的链接中，检查您的框架链接。

如果您有简单的问题，您可以删除并再次添加库。

如果该库不是为 arm7s 构建的，则转到目标的架构，在有效架构中，仅将其设置为 armv7。看看这是否能解决问题。如果是，则需要为 armv7s 构建框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:34:20.150

尝试删除这个框架..从 sdk 6.0 再次添加它（目标 -> 构建阶段）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T15:10:05.647

Mangesh，由于您将项目更新到 iOS 6，因此您的框架有时会丢失是正常的。为了添加它们，请转到构建阶段，然后打开选项卡 Link with binaries 并添加两个丢失的文件，如下面的屏幕所示。

![在此处输入图像描述](https://i.stack.imgur.com/UMrc4.png)

它应该可以帮助您添加库并且您已准备好构建它。如果您仍然遇到问题，您还可以在构建设置下为项目添加框架搜索路径（这将是框架的本地路径）。并且请确保框架路径是递归的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T17:18:06.717

在您的`.pch`文件中，添加以下内容

```
#import <SystemConfiguration/SystemConfiguration.h>
#import <MobileCoreServices/MobileCoreServices.h> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-21T17:07:08.170

sqlite 3 和 MobileCoreServices 在 ios 6 中可用。

*   删除红色引用
*   进入 Targets properties -> Build Phases，Link Binary With Libraries 部分
*   单击添加按钮并添加 libsqlite3.dylib 和 MobileCoreServices.framework。

    **如果 libsqlite3.dylib 在列表中不可用**。使用文本编辑器打开您的 xcodeproj，然后搜索并销毁对 libsqlite3 的隐藏引用。然后再试一次。

*   ![Xcode 截图，Link Binary With Libraries 截图](https://i.stack.imgur.com/tC63i.png)

薇薇安

# dataset - 我将从哪里获得用于挖掘关联规则的垂直分区数据集？

> ID：15986343
> 
> 赞同：0
> 
> 时间：2013-04-13T09:33:17.723
> 
> 标签：dataset, associations, data-mining, rule, database-partitioning

我正在为关联规则进行项目隐私保护数据挖掘，为此我需要样本垂直分区的二进制数据集。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T08:11:06.530

据我所知，所有可用于网络关联规则挖掘的数据集（例如 FIMI 03 和 FIMI 04 网站）都是水平格式的。我建议编写一个简单的程序来将公共数据集从水平格式转换为垂直格式。您可以在 FIMI 网站上获取关联规则挖掘的数据集：http: [//fimi.ua.ac.be/data/](http://fimi.ua.ac.be/data/)

# c# - 在 foreach 内的图片框（控件）内绘图

> ID：15986344
> 
> 赞同：0
> 
> 时间：2013-04-13T09:33:19.613
> 
> 标签：c#, graphics, drawing, picturebox

我正在尝试通过在 foreach 中制作控件来制作动态控件（标签、图片框和按钮）。foreach 由数据行控制，这些数据行是从我调用的 SQL 函数创建的。

问题是我的图形似乎不能像现在这样在我的图片框上工作。

到目前为止，我已经将其作为代码：全局变量：

```
private int i = 0, beginningHeight = 70, addingToHeight = 55;
PictureBox picturebox = new PictureBox(); 
```

功能：

```
private void tonenAlleCategorieen()
        {
            foreach (DataRow dr in blCategorie.getAlleCategorieenMetLimieten())
            {
                //making labels dyanmic and fill them with the correct text (from database)
                string categorie = (string)dr.Field<string>("Omschrijving");
                Label label = new Label();
                label.BackColor = Color.Transparent;
                label.ForeColor = Color.FromArgb(97, 97, 97);
                label.Font = new Font("Myriam Pro", 10, FontStyle.Bold);
                label.Width = 200;
                label.Name = categorie;
                label.Text = categorie;
                label.BackColor = Color.Transparent;
                label.Location = new Point(30, beginningHeight + addingToHeight);
                this.Controls.Add(label);

                // getting the figures (max figures) from the db to show in a label
                double limiet = (double)dr.Field<double>("maximumBedrag");
                Label labeltest = new Label();
                labeltest.BackColor = Color.Transparent;
                labeltest.ForeColor = Color.FromArgb(97, 97, 97);
                labeltest.Font = new Font("Myriam Pro", 8, FontStyle.Bold);
                labeltest.Width = 200;
                labeltest.Name = Convert.ToString(limiet);
                labeltest.Text = "Limiet: " + Convert.ToString(limiet) + "€";
                labeltest.BackColor = Color.Transparent;
                labeltest.Location = new Point(30, (beginningHeight + 27) + addingToHeight);
                this.Controls.Add(labeltest);

                //making pictureboxes for every single row in the db
                PictureBox picturebox = new PictureBox();
                picturebox.Width = 400;
                picturebox.Name = "picturebox" + i;
                picturebox.Height = 15;
                picturebox.Location = new Point(30, (beginningHeight + 27) + addingToHeight);
                this.Controls.Add(picturebox);

                //calling the paint event for drawing inside the pictureboxes
                picturebox.Paint += new PaintEventHandler(picturebox_Paint);

                //adjusting height (55px extra per new row)
                beginningHeight += 55;
                i++;
            }
        }

        private void picturebox_Paint(object sender, PaintEventArgs e)
        {
            Graphics g = e.Graphics;
            //draw here
            //Graphics g = picturebox.CreateGraphics();
            int x = 30;
            int y = (beginningHeight + 27) + addingToHeight;
            int breedteGebruikt = 200;
            int breedteNietGebruikt = picturebox.Width - breedteGebruikt;
            int hoogteBalk = picturebox.Height;

            g.DrawRectangle(new Pen(Color.Red), new Rectangle(10, 5, 50, 5));
            g.FillRectangle(Brushes.Green, x, y, breedteNietGebruikt, hoogteBalk);
            g.FillRectangle(Brushes.Red, x, y, breedteGebruikt, hoogteBalk);

            picturebox.Refresh();
        } 
```

任何人都可以在这里帮助我并告诉我如何将图形添加到我的图片框中，以便我可以看到我的图片框应该填充多少百分比？这是一个图片示例，可以很好地了解它： [![](https://i.imgur.com/ROCf0tG.png "由 imgur.com 主办")](https://imgur.com/ROCf0tG)

正如您在上图中看到的那样，它当前不起作用，并且我已将名为“Boodschappen”的第一条记录的数据放入数据库中，在此示例中，现在应该由我的图形填充 30%。

请问有人知道解决办法吗？：） 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:53:08.120

> 现在问题只出现在这一部分：我不允许将 g 添加到 this.Controls.Add(g); 它给了我错误参数 1: cannot convert from 'System.Drawing.Graphics' to 'System.Windows.Forms.Control

很明显，您不能添加`Graphics`为控件。此外，如果您以这种方式绘制，则在重新绘制图片框或表单时，您的绘图将消失。所以你应该在图片框的`Paint`事件内绘制。

双最大限制 = 0; int maxleftpos = 0; 私人无效tonenAlleCategorieen（）{

```
 foreach (DataRow dr in blCategorie.getAlleCategorieenMetLimieten())
    {
        //making labels dyanmic and fill them with the correct text (from database)
        string categorie = (string)dr.Field<string>("Omschrijving");
        Label label = new Label();
        label.BackColor = Color.Transparent;
        label.ForeColor = Color.FromArgb(97, 97, 97);
        label.Font = new Font("Myriam Pro", 10, FontStyle.Bold);
        label.Width = 200;
        label.Name = categorie;
        label.Text = categorie;
        label.BackColor = Color.Transparent;
        label.Location = new Point(10, beginningHeight + addingToHeight);
        maxleftpos = Math.Max(label.Left + label.Width, maxleftpos);
        this.Controls.Add(label);

        // getting the figures (max figures) from the db to show in a label
        double limiet = (double)dr.Field<double>("maximumBedrag");
        maxLimit = Math.Max(limiet, maxLimit);
        Label labeltest = new Label();
        labeltest.BackColor = Color.Transparent;
        labeltest.ForeColor = Color.FromArgb(97, 97, 97);
        labeltest.Font = new Font("Myriam Pro", 8, FontStyle.Bold);
        labeltest.Width = 200;
        labeltest.Name = Convert.ToString(limiet);
        labeltest.Text = "Limiet: " + Convert.ToString(limiet) + "€";
        labeltest.BackColor = Color.Transparent;
        labeltest.Location = new Point(30, (beginningHeight + 27) + addingToHeight);
        this.Controls.Add(labeltest);

        //making pictureboxes for every single row in the db
        PictureBox picturebox = new PictureBox();
        picturebox.Width = 200;
        picturebox.Name = "picturebox" + i;
        picturebox.Height = 15;
        picturebox.Tag = limiet;
        picturebox.Location = new Point(100, (beginningHeight + 27) + addingToHeight);
        this.Controls.Add(picturebox);
        picturebox.BringToFront();
        //calling the paint event for drawing inside the pictureboxes
        picturebox.Paint += new PaintEventHandler(picturebox_Paint);

        //adjusting height (55px extra per new row)
        beginningHeight += 55;
        i++;

    }

    foreach (Control c in this.Controls)
    {
        if (c is PictureBox)
        {
            c.Location = new Point(maxleftpos, c.Top);
        }
    }
    if (this.Width<maxleftpos+150)
    {
        this.Width = maxleftpos + 50;
    }

    this.Refresh();

}

private void picturebox_Paint(object sender, PaintEventArgs e)
{

    PictureBox p = sender as PictureBox;
    Graphics gr = e.Graphics;
    gr.ResetTransform();
    //Graphics g = picturebox.CreateGraphics();
    int breedteGebruikt = Convert.ToInt32((double)p.Tag);
    int max = Convert.ToInt32(maxLimit);
    int grwidht = breedteGebruikt * p.Width / max;

    gr.DrawRectangle(new Pen(Color.Red), new Rectangle(10, 5, 50, 5));
    gr.FillRectangle(Brushes.Green, 0, 0, p.Width, p.Height);
    gr.FillRectangle(Brushes.Red, 0, 0, grwidht, p.Height);

} 
```

# javascript - Bootstrap 打开模态和超链接

> ID：15986347
> 
> 赞同：2
> 
> 时间：2013-04-13T09:34:03.603
> 
> 标签：javascript, html, twitter-bootstrap

我正在寻找一种打开模式以及底层超链接的方法。因此，如果我的代码如下所示：

```
<a class="btn pull-right" target="_blank" href="http://www.example.com" data-toggle="modal" data-target="#modal_div" data-remote="false">something</a> 
```

我想打开模态以及“www.example.com”的链接......有人知道如何完成这个吗？

谢谢你的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:14:43.097

您应该`.click`为您的链接定义处理程序，删除属性并使用 javascript`data-`切换。 我认为用于单击具有模式和其他插件属性的锚点的引导处理程序使用，这就是您不能使用的原因。`.modal()`
`data-``preventDefault()``href="http://www.example.com"`

[**小提琴演示**](http://jsfiddle.net/MgcDU/3314/)

# jar - 分发 .jar 文件

> ID：15986354
> 
> 赞同：2
> 
> 时间：2013-04-13T09:34:50.087
> 
> 标签：jar, distribution

我想将 .jar 文件分发给外行观众（所有 Windows 用户）。但是我不能自己运行 jar 文件，除非我从 cmd 使用`"java -jar "C:\..\file.jar"`.

当我双击该文件时，没有任何反应（默认程序是 Java Platform SE Binary）。有人建议[这个网站](http://windowstipoftheday.blogspot.com/2005/10/setting-jar-file-association.html)，但我无法在 Win8 中跟进。

所以我希望用户能够双击 jar 文件并直接启动它，而无需我告诉他们打开命令提示符并输入内容，或者给他们链接。

PS：它是一个非常简单的非 GUI 应用程序。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:41:08.907

How did you create the jar file? Jar files have a manifest file inside to, amount others, indicate the location of your main method. Check that this is correct.

You should be able to run the app by double clicking it but it can only be a program with a GUI or a program without direct user interaction.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:38:57.413

我认为你最好的选择是创建一个`file.bat`运行 jar 的脚本，其中包含以下简单的行：

```
java -jar file.jar 
```

给用户两个文件`file.jar`和`file.bat`，他们可以双击`file.bat`运行它。

理论上，如果 jar 文件中有一个清单 ( `META-INF/MANIFEST.MF`)，其中定义了主类，`Main-Class:`那么它应该可以通过双击运行。但是，您说该应用程序没有 GUI，在这种情况下它可以正常运行，但您将看不到它。

无论如何，该`bat`文件应该有所帮助，在最坏的情况下，用户可以运行它而不必担心打字`java -jar ...`等。

# python - 图形库 API

> ID：15986356
> 
> 赞同：3
> 
> 时间：2013-04-13T09:34:54.413
> 
> 标签：python, api, graph, python-3.x

我正在创建一个库来支持一些标准的图形遍历。一些图是明确定义的：即通过提供数据结构或通过重复调用相关方法来添加所有边。有些图只是隐式定义的：即，我只能提供一个函数，给定一个节点，将返回其子节点（特别是，我遍历的所有无限图当然必须隐式定义）。

遍历生成器需要高度可定制。比如我应该可以指定是否要DFS post-order/pre-order/in-order、BFS等；应该按照什么顺序访问孩子（如果我提供了`key`对他们进行分类的顺序）；是否应该维护访问节点集；是否应该与节点一起产生后向指针（指向父级的指针）；等等

我正在为这个库的 API 设计而苦苦挣扎（一旦 API 清晰，实现一点也不复杂）。我希望它优雅、合乎逻辑且简洁。是否有任何符合这些标准的图形库可以用作模板（不必在 Python 中）？

当然，如果有一个 Python 库已经完成了所有这些，我想知道，所以我可以避免自己编写代码。

（我正在使用 Python 3。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:16:26.567

如果您需要处理无限图，那么您将需要某种对图的功能接口（正如您在 q 中所说的那样）。所以我会将其作为标准表示并提供辅助函数来获取其他表示并生成功能表示。

对于结果，也许你可以产生（你暗示一个生成器，我认为这是一个好主意）一系列结果对象，每个结果对象代表一个节点。如果用户想要更多信息，比如反向链接，他们会调用一个方法，并提供额外的信息（在可能的情况下懒惰地计算，这样你就可以避免那些不需要它的人的成本）。

你没有提到图表是否有方向。显然，您可以将所有图形视为有向图并返回两个方向。但随后实施效率不高。通常（例如[jgrapht](http://jgrapht.org/javadoc/)）库对不同类型的图形具有不同的接口。

（我怀疑您将不得不对此进行大量迭代，然后才能在优雅的 api 和效率之间取得良好的平衡）

最后，你知道[函数式图形库](http://web.engr.oregonstate.edu/~erwig/fgl/)吗？我不确定它会有什么帮助，但我记得（几年前！）认为那里的 api 是一个不错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:57:23.603

遍历算法和图数据结构实现应该是分开的，并且应该只通过标准的 API 相互通信。（如果它们是耦合的，则必须为每个实现重写每个遍历算法。）

所以我的问题真的有两个部分：

1.  如何为图数据结构设计 API（由图算法（如遍历）和创建/访问图的客户端代码使用）
2.  如何设计图遍历算法的 API（供需要遍历图的客户端代码使用）

我相信[C++ Boost Graph Library](http://www.boost.org/doc/libs/1_53_0/libs/graph/doc/index.html)很好地回答了我的两个问题。我希望它可以（理论上）用 Python 重写，尽管在我尝试之前可能会有一些障碍。

顺便说一句，我找到了一个在 Python 上下文中处理问题 1 的网站：[http](http://wiki.python.org/moin/PythonGraphApi) ://wiki.python.org/moin/PythonGraphApi 。不幸的是，它自 2011 年 8 月以来一直没有更新。

# winapi - 一个 MFC 应用程序中的两个对话框

> ID：15986358
> 
> 赞同：0
> 
> 时间：2013-04-13T09:35:05.807
> 
> 标签：winapi, mfc

我正在尝试制作一个基于对话框的 MFC 应用程序，其中两个对话框需要按顺序显示。

这意味着，一旦显示并关闭第一个对话框（模式）（按确定），就需要调出第二个对话框。我的要求是第二个对话框应该是无模式的。

但我观察到的是显示了第二个对话框，但没有调用任何消息处理函数来响应用户消息。我认为消息映射本身不起作用，而正在调用覆盖的函数（如 OnInitdialog）。我尝试用模态对话框替换这个无模式对话框，唉，doModal() 本身失败了。这是小代码：

```
 CFirstDlg dlg;
    m_pMainWnd = &dlg;
    INT_PTR nResponse = dlg.DoModal();
    if (nResponse == IDOK)
    {
        // TODO: Place code here to handle when the dialog is
        //  dismissed with OK
        // TODO: Place code here to handle when the dialog is
        //  dismissed with Cancel

        CSecondDlg *dlgModeLess = new CSecondDlg();
        dlgModeLess->Create(CSecondDlg::IDD,NULL);

        m_pMainWnd = dlgModeLess;

        dlgModeLess->ShowWindow(SW_SHOW);
        dlgModeLess->UpdateWindow();
         } 
```

这是第二个对话框的消息映射：

```
BEGIN_MESSAGE_MAP(CSecondDlg, CDialog)
    ON_MESSAGE(TRAY_MESSAGE,OnTrayMessage)
    ON_BN_CLICKED(IDOK, &CSecongDlg::OnBnClickedOk)
    ON_BN_CLICKED(IDC_RADIO1, &CSecondDlg::OnBnClickedRadio1)
END_MESSAGE_MAP() 
```

我认为我在做一些概念上错误的事情。请分享您对解决这种情况需要做些什么的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:13:24.423

正如我在上一篇文章中提到的，第二个对话框没有必要是非模态的。

只需执行以下操作：

```
BOOL CMyTestApp::InitInstance()
{
  CMyTestDlg dlg;
  m_pMainWnd = &dlg;
  int nResponse = dlg.DoModal();
  if (nResponse == IDOK)
  {
      COtherDlg Dlg ;
      m_pMainWnd = &dlg;
      if (Dlg.DoModal() == IDCANCEL)
      {
      ...
      }
  }
  else if (nResponse == IDCANCEL)
  {
    ...
  }

  return FALSE;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:38:24.067

我已经解决了这个问题，结果证明这很有趣。

似乎 Cdialog::Create() 本身不足以创建一个完全可操作的无模式对话框。我们必须为其提供一个 win32 样式的消息循环。所以这有效地在程序中产生了两个消息循环，一个提供我的 MFC 框架，一个是我从 IDOK 返回后编写的。这是修改后的代码。

```
CSecondDlg *dlgModeLess = new CSecondDlg();
    dlgModeLess->Create(CSecondDlg::IDD,NULL);

    CTrayIconDlg dlg;
    m_pMainWnd = &dlg;
    INT_PTR nResponse = dlg.DoModal();
    if (nResponse == IDOK)
    {
        // TODO: Place code here to handle when the dialog is
        //  dismissed with OK
        // TODO: Place code here to handle when the dialog is
        //  dismissed with Cancel

        MSG leftmsg;
        PeekMessage(&leftmsg,m_pMainWnd->m_hWnd,0,0,PM_REMOVE);
        MSG msg;
        BOOL bRet;
        while ((bRet = GetMessage(&msg, dlgModeLess->m_hWnd, 0, 0)) != 0) 
        { 
            if (bRet == -1)
            {
                // Handle the error and possibly exit
            }
            else if (!IsWindow(hWnd) || !IsDialogMessage(hWnd, &msg)) 
            { 
                TranslateMessage(&msg); 
                DispatchMessage(&msg); 
            } 
        } 

    } 
```

这段代码按预期工作，这里要注意的有趣的事情是 PeekMessage 函数，一旦第一个对话框被解除，它就会删除插入线程的消息队列中的 WM_QUIT 消息，因为我们不想在那个时间点完全关闭。我相信这是由 MFC 框架完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T10:52:40.833

当您创建一个无模式对话框时，控制将立即返回到您的调用函数，因此您需要`dlgModeLess`在全局范围内声明变量并确保您的程序/范围仍然处于活动状态，直到对话框完成

# android - 媒体播放器中没有显示控制按钮

> ID：15986362
> 
> 赞同：4
> 
> 时间：2013-04-13T09:35:37.730
> 
> 标签：android, controller, android-mediaplayer, media-player, media

我是 Android 新手，我正在尝试制作一个非常简单的应用程序。它只是一个包含用于播放音频或视频文件的 MediaPlayer 的活动。我设法播放了一首歌曲，但它不会向我显示媒体播放器的控制元素！

这是我正在使用的代码：

```
public class Player extends Activity implements OnPreparedListener,
        MediaPlayerControl {

    private static final String TAG = "AudioPlayer";
    public static final String AUDIO_FILE_NAME = "audioFileName";

    private String audioFile;
    private MediaPlayer mediaPlayer;
    private Handler handler = new Handler();
    private MediaController mediaController;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_player);

        Uri myUri = Uri.parse("android.resource://com.example.mediaplayer/"
                + R.raw.lied); // initialize Uri here
        MediaPlayer mediaPlayer = new MediaPlayer();

        mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mediaController = new MediaController(this);
        try {
            mediaPlayer.setDataSource(getApplicationContext(), myUri);
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            mediaPlayer.prepare();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mediaPlayer.start();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.player, menu);
        return true;
    }

    public void onPrepared(MediaPlayer mediaPlayer) {
        Log.d(TAG, "onPrepared");
        mediaController.setMediaPlayer(this);
        mediaController.setAnchorView(findViewById(R.id.mediaController1));

        handler.post(new Runnable() {
            public void run() {
                mediaController.setEnabled(true);
                mediaController.show();
            }
        });
    }

    protected void onStop() {
        super.onStop();
        mediaPlayer.stop();
        mediaPlayer.release();
    }

    public boolean onTouchEvent(MotionEvent event) {
        // the MediaController will hide after 3 seconds - tap the screen to
        // make it appear again
        mediaController.show();
        return false;
    }

    public boolean canPause() {

        return true;
    }

    public boolean canSeekBackward() {

        return true;
    }

    public boolean canSeekForward() {

        return true;
    }

    public int getBufferPercentage() {

        return 0;
    }

    public int getCurrentPosition() {
        return mediaPlayer.getCurrentPosition();
    }

    public int getDuration() {
        return mediaPlayer.getDuration();

    }

    public boolean isPlaying() {
        return mediaPlayer.isPlaying();

    }

    public void pause() {
        mediaPlayer.pause();

    }

    public void seekTo(int i) {
        mediaPlayer.seekTo(i);

    }

    public void start() {
        mediaPlayer.start();

    }
} 
```

这是我的布局 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".Player" >

    <MediaController
        android:id="@+id/mediaController1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="122dp"
        android:layout_marginTop="55dp"
        android:visibility="visible" >

    </MediaController>

    <VideoView
        android:id="@+id/videoView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:51:13.573

我认为您正在寻找的是 Android 中的视频视图。它在播放媒体时具有默认控件。

在您的 XML 布局文件夹中创建一个视频视图，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content">
<VideoView
   android:id="@+id/myvideoview"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content" />
</LinearLayout> 
```

假设您将该文件称为 main.xml

现在创建一个名为 MediaViewerTest.java 的活动，如下所示：

```
public class MediaViewerTest extends Activity {

String SrcPath = http://myMediaFile.mp3"; // or however your getting your media source, im assuming web here

   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       VideoView myVideoView = (VideoView)findViewById(R.id.myvideoview);
       myVideoView.setVideoURI(Uri.parse(SrcPath));
       myVideoView.setMediaController(new MediaController(this));
       myVideoView.requestFocus();
       myVideoView.start();
   }
} 
```

# jquery - 用jquery清除文本框中的部分文本？

> ID：15986366
> 
> 赞同：1
> 
> 时间：2013-04-13T09:35:58.450
> 
> 标签：jquery

我有一个具有以下值的文本框：

```
The person 'enter name here' has finished. 
```

如果用户单击`''`文本之间的每个位置，我想要`enter name here`清除。这个怎么做？

```
<input type="text" id="txt"/> 
```

编辑：我可能在文本框中有两个或多个位置。像这样：

```
The person 'enter name here','enter family here' has finished. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:15:16.557

如果我正确理解了这个问题，我会像这样使用 jquery

```
<div>
    The Person <input type="text" value="'Enter Name Here'" /> has finished
</div>

<script type="text/javascript">
    $('input').focus(function() {
        $(this).val(""); 
    });

    $('input').blur(function() {
        if ($(this).val() == "") {
            $(this).val("'Enter Name Here'");   
        }
    });
</script> 
```

[http://jsfiddle.net/bExSy/](http://jsfiddle.net/bExSy/)

您可以以任何您希望它与文本一起显示的方式设置文本框的样式

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-13T09:45:10.183

你可以制作一个假文本框：

```
<div class="textbox">
    <div class="before">The person</div>
    <input type="text" id="txt" placeholder="enter name here" size="11" />
    <div class="after">has finished.</div>
</div> 
```

然后（粗略地）设计它看起来像一个真实的：

```
.textbox {
    display: inline-block;
    border: 1px solid #AAA;
    margin: 3px;
    padding: 2px;
}

input, div.before, div.after {
    display: inline-block;

    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
} 
```

**演示：http: [//jsfiddle.net/3HEQj/](http://jsfiddle.net/3HEQj/)**

我个人不会为此使用文本框。如果您不关心可访问性，您可以制作一个弹出式文本框，当用户单击文本时出现，然后消失。

# ios - IOS 6通过paintcode自定义UIView

> ID：15986367
> 
> 赞同：0
> 
> 时间：2013-04-13T09:36:13.263
> 
> 标签：ios, uiview, ios6, drawrect

我是IOS初学者。

我正在尝试使用paintcode生成的代码显示一个自定义按钮。我在 Storyboard 上拖动一个视图，然后将此通用视图类设置为我的自定义视图“GreenButton”。当我运行该应用程序时，该按钮不显示。我添加了 NSLogs 并且可以看到 drawRect 方法成功运行。

paintcode 生成的代码似乎包含了绘制按钮的所有内容。我只是使用 XCode 来调整我的视图。

我是否需要实现 initWithFrame 方法？

```
//
//  GreenButton.m
//  Test
//
//  Created by Tim on 13.04.2013.
//  Copyright (c) 2013 Tim. All rights reserved.
//

#import "GreenButton.h"

@implementation GreenButton

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        // setup the initial properties of the view

    }
    return self;

}

#pragma mark - Touch event overrides

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    NSLog(@"drawRect enter");
    //// General Declarations
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = UIGraphicsGetCurrentContext();

    //// Color Declarations
    UIColor* strokeColor = [UIColor colorWithRed: 0.419 green: 0.434 blue: 0.455 alpha: 1];
    UIColor* baseColor = [UIColor colorWithRed: 0.218 green: 0.24 blue: 0.268 alpha: 1];
    CGFloat baseColorRGBA[4];
    [baseColor getRed: &baseColorRGBA[0] green: &baseColorRGBA[1] blue: &baseColorRGBA[2] alpha: &baseColorRGBA[3]];

    UIColor* upperColor = [UIColor colorWithRed: (baseColorRGBA[0] * 0.8 + 0.2) green: (baseColorRGBA[1] * 0.8 + 0.2) blue: (baseColorRGBA[2] * 0.8 + 0.2) alpha: (baseColorRGBA[3] * 0.8 + 0.2)];
    UIColor* lowerColor = [UIColor colorWithRed: (baseColorRGBA[0] * 0.9) green: (baseColorRGBA[1] * 0.9) blue: (baseColorRGBA[2] * 0.9) alpha: (baseColorRGBA[3] * 0.9 + 0.1)];
    UIColor* lightUpColor = [UIColor colorWithRed: (baseColorRGBA[0] * 0.5 + 0.5) green: (baseColorRGBA[1] * 0.5 + 0.5) blue: (baseColorRGBA[2] * 0.5 + 0.5) alpha: (baseColorRGBA[3] * 0.5 + 0.5)];
    UIColor* lightDownColor = [UIColor colorWithRed: (baseColorRGBA[0] * 0.8) green: (baseColorRGBA[1] * 0.8) blue: (baseColorRGBA[2] * 0.8) alpha: (baseColorRGBA[3] * 0.8 + 0.2)];

    //// Gradient Declarations
    NSArray* buttonGradientColors = [NSArray arrayWithObjects:
                                     (id)upperColor.CGColor,
                                     (id)lowerColor.CGColor, nil];
    CGFloat buttonGradientLocations[] = {0, 1};
    CGGradientRef buttonGradient = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef)buttonGradientColors, buttonGradientLocations);
    NSArray* overlayGradientColors = [NSArray arrayWithObjects:
                                      (id)lightUpColor.CGColor,
                                      (id)[UIColor clearColor].CGColor, nil];
    CGFloat overlayGradientLocations[] = {0, 1};
    CGGradientRef overlayGradient = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef)overlayGradientColors, overlayGradientLocations);
    NSArray* gradientColors = [NSArray arrayWithObjects:
                               (id)lightUpColor.CGColor,
                               (id)lightDownColor.CGColor, nil];
    CGFloat gradientLocations[] = {0, 1};
    CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef)gradientColors, gradientLocations);

    //// Shadow Declarations
    UIColor* buttonShadow = [UIColor blackColor];
    CGSize buttonShadowOffset = CGSizeMake(0.1, 1.1);
    CGFloat buttonShadowBlurRadius = 2;
    UIColor* textShadow = [UIColor blackColor];
    CGSize textShadowOffset = CGSizeMake(0.1, -0.1);
    CGFloat textShadowBlurRadius = 5;

    //// Abstracted Attributes
    NSString* textContent = @"Update";

    //// Back Rectangle Drawing
    UIBezierPath* backRectanglePath = [UIBezierPath bezierPathWithRoundedRect: CGRectMake(48, 53, 120, 23) cornerRadius: 4];
    CGContextSaveGState(context);
    CGContextSetShadowWithColor(context, buttonShadowOffset, buttonShadowBlurRadius, buttonShadow.CGColor);
    CGContextBeginTransparencyLayer(context, NULL);
    [backRectanglePath addClip];
    CGContextDrawLinearGradient(context, gradient, CGPointMake(108, 53), CGPointMake(108, 76), 0);
    CGContextEndTransparencyLayer(context);
    CGContextRestoreGState(context);

    //// Rounded Rectangle Drawing
    UIBezierPath* roundedRectanglePath = [UIBezierPath bezierPathWithRoundedRect: CGRectMake(49, 54, 118, 21) cornerRadius: 3];
    CGContextSaveGState(context);
    [roundedRectanglePath addClip];
    CGContextDrawLinearGradient(context, buttonGradient, CGPointMake(108, 54), CGPointMake(108, 75), 0);
    CGContextRestoreGState(context);

    //// Overlay Drawing
    UIBezierPath* overlayPath = [UIBezierPath bezierPathWithRoundedRect: CGRectMake(48, 53, 120, 23) cornerRadius: 4];
    CGContextSaveGState(context);
    [overlayPath addClip];
    CGContextDrawRadialGradient(context, overlayGradient,
                                CGPointMake(54.72, 38.09), 10,
                                CGPointMake(108, 11.46), 102.2,
                                kCGGradientDrawsBeforeStartLocation | kCGGradientDrawsAfterEndLocation);
    CGContextRestoreGState(context);

    //// Text Drawing
    CGRect textRect = CGRectMake(55, 54, 104, 21);
    UIBezierPath* textPath = [UIBezierPath bezierPathWithRect: textRect];
    CGContextSaveGState(context);
    CGContextSetShadowWithColor(context, textShadowOffset, textShadowBlurRadius, textShadow.CGColor);
    CGContextBeginTransparencyLayer(context, NULL);
    [textPath addClip];
    CGContextDrawLinearGradient(context, buttonGradient, CGPointMake(107, 54), CGPointMake(107, 75), 0);
    CGContextEndTransparencyLayer(context);
    CGContextRestoreGState(context);

    [strokeColor setStroke];
    textPath.lineWidth = 1;
    [textPath stroke];
    CGContextSaveGState(context);
    CGContextSetShadowWithColor(context, textShadowOffset, textShadowBlurRadius, textShadow.CGColor);
    [[UIColor whiteColor] setFill];
    [textContent drawInRect: textRect withFont: [UIFont boldSystemFontOfSize: [UIFont systemFontSize]] lineBreakMode: NSLineBreakByWordWrapping alignment: NSTextAlignmentCenter];
    CGContextRestoreGState(context);

    //// Cleanup
    CGGradientRelease(buttonGradient);
    CGGradientRelease(overlayGradient);
    CGGradientRelease(gradient);
    CGColorSpaceRelease(colorSpace);

    NSLog(@"drawRect exit");

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:15:35.540

`initWithFrame:`使用 Storyboard 时不需要实现。事实上，故事板将使用`initWithCoder:`它甚至不会被调用。

我测试了你的代码，它工作正常，但是，你不是在左上角绘制，而是在视图中间的某个地方，所以如果你想看到你的按钮，一定要让视图足够大。

最好画在左上角。

# java - 休眠中的有效滚动：session.evict vs session.clear vs CacheMode.IGNORE

> ID：15986374
> 
> 赞同：2
> 
> 时间：2013-04-13T09:36:53.613
> 
> 标签：java, hibernate

考虑一个典型的任务，当我们必须通过滚动数据库中的适当结果来构建大文件报告时。ORM 框架是`Hibernate`. 我们知道，有 3 种方法可以避免`OutOfMemoryException`这种模式：

1.  使用`session.evict(...)`：

    ```
    ScrollableResults customers = session.createQuery("from Customers order by id").scroll(ScrollMode.FORWARD_ONLY);
    while (customers.next()) {
        Customer customer = (Customer) customers.get(0);
        addDataToReport(customer);
        session.evict(customer);
    } 
    ```

2.  使用`session.clear()`：

    ```
    ScrollableResults customers = session.createQuery("from Customers order by id").scroll(ScrollMode.FORWARD_ONLY);
    int i = 0;
    while (customers.next()) {
        Customer customer = (Customer) customers.get(0);
        addDataToReport(customer);
        if ( ++i % 1000 == 0) session.clear();
    } 
    ```

3.  使用`CacheMode.IGNORE`：

    ```
    ScrollableResults customers = session.createQuery("from Customers order by id").setCacheMode(CacheMode.IGNORE).scroll(ScrollMode.FORWARD_ONLY);
    while (customers.next()) {
        Customer customer = (Customer) customers.get(0);
        addDataToReport(customer);
    } 
    ```

**所以，问题是**：对于上述目的，这些方法中哪一种更好（在性能方面）？或者可能有更有效的其他方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T09:51:39.673

*   `CacheMode.IGNORE`与你的问题无关。这是关于二级缓存，而不是会话缓存。
*   `evict()``CascadeType.DETACH`如果关系配置为不带or ，则不会驱逐相关实体`CascadeType.ALL`。代表着：
    1.  没有级联驱逐的相关实体将在内存中累积
    2.  具有级联驱逐的相关实体将在每次迭代时重新加载，即使它们相同
*   因此，使用 with 的方法`clear()`是最好的选择：
    1.  调用时，它会从会话缓存中驱逐所有实体
    2.  它不会在每次迭代时调用，因此您可以利用相关实体的会话缓存

# robots.txt - */link in robots.txt - 这会阻止所有或仅阻止以 /link 结尾的 url？

> ID：15986377
> 
> 赞同：1
> 
> 时间：2013-04-13T09:37:05.820
> 
> 标签：robots.txt

我有一个带有产品的 Rails 应用程序，产品可以在以下位置找到：

mydomain.com/thisproduct

如果用户单击指向制造商网站的链接，则可以通过使用具有以下 url 的“链接”功能来完成：

mydomain.com/thisproduct/link

谷歌似乎通过将该页面索引为我的页面但包含制造商网站的内容来非常特别地对此进行索引。所以，我想阻止它在 robots.txt 中被索引。

```
This is my robots.txt:

# See http://www.robotstxt.org/wc/norobots.html for documentation on how to use the robots.txt file
#
# To ban all spiders from the entire site uncomment the next two lines:
# User-Agent: *
# Disallow: /
Disallow: /sokresultat/*
Disallow: */link 
```

最后一行是我的问题所涉及的：

这会阻止所有以链接结尾的网址吗？而且，更重要的是，**它会阻止其他任何东西**吗？恐怕这会通过该通配符取消我的整个网站的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:50:41.900

经过一些额外的研究，似乎搜索引擎之间支持通配符的方式不同。这适用于谷歌，可以在谷歌网站管理员工具中验证。

# image - 添加背景图像并将其推送到后面的场景

> ID：15986383
> 
> 赞同：0
> 
> 时间：2013-04-13T09:37:50.083
> 
> 标签：image, background

一个简单的问题。我已经完成了我的应用程序的全部功能，现在我需要添加背景图像以使其看起来更好。但是，如果我只是在每个视图的顶部添加一个图像视图，图像就会出现在前景中，覆盖按钮/文本字段等。我该如何解决这个问题？

此外，我的应用程序的视图之一是滚动视图。是否应该对背景图像进行不同的处理？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T22:53:47.790

好的 - 我找到了（非常简单的一键式）解决方案：编辑器>排列>发送到后面...

# orm - 在父/子应用程序中扩展 ORM 持久 CFC

> ID：15986385
> 
> 赞同：2
> 
> 时间：2013-04-13T09:37:51.097
> 
> 标签：orm, coldfusion, cfc, railo

我正在研究 CFML (Railo) 中的父/子应用程序结构，并且正在努力扩展我的持久性 (ORM) CFC。

我希望我的持久性 CFC 存在于父应用程序中。它们将包含各种属性，以及一些处理核心功能的函数。

在我的子应用程序中，我想扩展声明任何子应用程序特定属性的 ORM CFC，并且我希望能够添加特定于子应用程序需求的新功能，以及覆盖任何核心功能，如果需要，无需触及父应用程序的 CFC 中的代码。

子应用程序使用自己的数据源，因此我希望在应用程序启动时看到子应用程序数据库中生成的 ORM 表。如果我启动父应用程序（独立运行并拥有自己的数据源），我可以毫无问题地看到那里生成的表。但是，如果我启动子应用程序，则不会生成表（在任一数据库中）。

我尝试添加`mappedSuperclass='true'`到父 CFC 并在扩展父 CFC 的子应用程序中创建 CFC。我还尝试将父应用程序的 ORM 文件夹添加到 ORM 设置中的 CFCLocation 文件夹数组中。

我唯一可以用来作为 ORM 正在工作的指示，就是查看表是否是在数据库中生成的。如果有另一种方法可以查看 ORM CFC 是否正常工作，我很想听听！

这是一些要查看的代码：

**父图像.cfc**

```
<cfcomponent persistent="true" entityname="Image" table="tblImages_Base" extends="com.orm.SimpleBasePersistentObject" mappedSuperClass="true">
<!--- Identifier --->
<cfproperty name="sImageUUID" fieldtype="id" generator="assigned" setter="false" />

<!--- Properties --->
<cfproperty name="dtDateCreated" ormtype="timestamp" setter="false" />
<cfproperty name="dtLastUpdated" ormtype="timestamp" setter="false" />
<cfproperty name="sFileName" ormtype="string" />
<cfproperty name="iFileSize" ormtype="int" default="0" dbdefault="0" />
<cfproperty name="iWidth" ormtype="int" default="0" dbdefault="0" />
<cfproperty name="iHeight" ormtype="int" default="0" dbdefault="0" />
<cfproperty name="sImageFolder" ormtype="string" dbdefault="" />

<cfproperty name="Active" ormtype="boolean" default="0" dbdefault="0" notnull="true" />

<!--- Non persistant properties --->
<cfproperty name="sImagePath" type="string" persistent="false" />
<cfproperty name="sDefaultImageLocation" persistent="false" />

<!--- Many Images can have one image type --->
<cfproperty name="ImageType" 
            fieldtype="many-to-one" 
            cfc="ImageType" 
            fkcolumn="fk_sImageType" 
            fetch="join" 
            />
</cfproperty>
</cfcomponent> 
```

**子图像.cfc**

```
<cfcomponent persistent="true" entityname="Image" table="tblImages_Base" extends="core.orm.Image">
</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:45:45.797

您当然可以使用 进行继承（单个或多个）`mappedSuperClass="true"`，但父 CFC(s) 不能持久，即`mappedSuperClass="true"`互斥`persistent="true"`。

我建议您设置一个“更高”级别的模型，该模型定义了您希望能够扩展的基本实体。添加`mappedSuperClass="true"`但随后使用`persistent="false"`并且**不**指定表。

然后，在您的父应用程序和子应用程序中，您将创建扩展这些超类的持久 CFC。我知道这不是您所追求的，因为子应用程序不会从父应用程序继承，但它确实允许它们共享通用属性/方法。

请注意，您不应该在超类中定义标识符属性：这需要在每个持久 CFC 中显式完成。

“超级”cfcs 的位置并不重要 - 只要您的父应用程序和子应用程序可以访问它们。无需将该位置添加到您的 ORM 设置中。假设您将它们存储在由“library”映射的名为“library”的文件夹中：

**/图书馆/Image.cfc**

```
<cfcomponent entityname="Image" persistent="false" mappedSuperClass="true" hint="I define common properties/methods and can be extended by other ORM components">
 <!--- Common Properties--->
 <cfproperty name="dtDateCreated" ormtype="timestamp" setter="false" />
 <cfproperty name="dtLastUpdated" ormtype="timestamp" setter="false" />
 <cfproperty name="sFileName" ormtype="string" />
 ...etc
</cfcomponent> 
```

**/apps/parent/Image.cfc**

```
<cfcomponent entityname="Image" extends="library.Image" persistent="true" table="tblImages_Base">
 <!--- Identifier --->
 <cfproperty name="sImageUUID" fieldtype="id" generator="assigned" setter="false" />
 ...
</cfcomponent> 
```

**/apps/child/Image.cfc**

```
<cfcomponent entityname="Image" extends="library.Image" persistent="true" table="tblImages_Base">
 <!--- Identifier --->
 <cfproperty name="sImageUUID" fieldtype="id" generator="assigned" setter="false" />
 ...
</cfcomponent> 
```

# visual-c++ - 从视频中获取帧

> ID：15986386
> 
> 赞同：3
> 
> 时间：2013-04-13T09:37:53.287
> 
> 标签：visual-c++, opencv, image-processing

```
#include "opencv2/opencv.hpp"
#pragma comment (lib , "opencv_core244d.lib")
#pragma comment (lib ,"opencv_highgui244d.lib")
#pragma comment(lib , "opencv_imgproc244d.lib")
int main(int argc, char* argv[])
{
    CvCapture* capture = cvCaptureFromFile("try.avi");

    IplImage* frame = NULL;
    do
    {
        frame = skipNFrames(capture, 1);
        cvNamedWindow("frame", CV_WINDOW_AUTOSIZE);
        cvShowImage("frame", frame);
        cvWaitKey(0);
    } while( frame != NULL );

    cvReleaseCapture(&capture);
    cvDestroyWindow("frame");
    cvReleaseImage(&frame);

    return 0;
} 
```

这是我从视频中获取帧的程序，但是当我运行这个程序时，它可以工作，它会向我显示视频，但它不会自动保存帧（不使用任何按钮或鼠标），它应该保存在我的目录中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T13:22:28.563

要单独查看视频的每一帧，请使用`cvWaitKey(0)`. 它显示视频的当前帧并无限等待按键。因此，要查看下一帧，请按一个键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T16:35:46.793

要单独保存每一帧，

1.  `#include<stdio.h>`

2.  声明一个全局变量

    `int flag=0;`

3.  **在cvWaitKey(0)**的下方添加以下代码：

    ```
    char *str=new char[50];

    flag++;
    sprintf(str,"%d",flag);
    strcat(str," frame");
    strcat(str,".jpg");
    Mat image=frame;
    imwrite(str,image); 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T15:48:15.633

```
#include"stdafx.h"
#include<cv.h>
#include<highgui.h>
#include<cxcore.h>

int main(int argc, char* argv[]) {

int c=1;
IplImage* img=0;
char buffer[1000];
CvCapture* cv_cap = cvCaptureFromFile("try.avi");
cvNamedWindow("Video",CV_WINDOW_AUTOSIZE);
while(1) {

img=cvQueryFrame(cv_cap);
cvShowImage("Video",img);
sprintf(buffer,"D:/image%u.jpg",c);
cvSaveImage(buffer,img);
c++;
  if (cvWaitKey(100)== 27) break;
}

cvDestroyWindow("Video"); 
return 0;
} 
```

试试这个，这会奏效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T08:38:35.870

您需要使用[`cvSaveImage()`](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#imwrite)显式保存每一帧。
这应该在你的循环中完成，无论你想保存帧。
显然，如果您想用不同的名称保存每个帧，您必须为每个调用生成不同的名称。@baban 展示了一种方法。

# java - How to handle an object array of Object Arrays

> ID：15986387
> 
> 赞同：2
> 
> 时间：2013-04-13T09:37:59.327
> 
> 标签：java, arrays, multidimensional-array, jagged-arrays

I have this code:

```
Object [] array=new Object array [5];
array[0]= new Object[3];
array[1]=new Object [10];
array[2]=new Object [7];
... 
```

How can I access the 5th element of array[1]. If it was a 2D array I would say:

```
Object o=array [1][5]; 
```

but I don't want 2D array because I don't want to waste memory since the size varies from array to array.

It would be great if someone could answer me this question..

Btw I don't want to use vectors etc...

Thank you

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T09:41:15.053

You could do it like this:

```
//This creates a 5 by ? array
Object[][] array = new Object[5][];

array[0] = new Object[3];
array[1] = new Object[10];
array[2] = new Object[7];
.... 
```

edit (thanks to the commenters) :

`array` is an array of arrays. Each element in `array` refers to an array of Objects. The memory is not wasted on having more elements than needed.

It will look like this

```
[a00][a01][a02]
[a10][a11][a12][a13][a14][a15][a16][a17][a18][a19]
[a20][a21][a22][a23][a24][a25][a12] 
```

If you now would like to access the 6th element of the 2nd array you would do this:

```
Object myObj = array[1][5]; 
```

# c - some mandelbrot drawing routine from c to sse2

> ID：15986390
> 
> 赞同：2
> 
> 时间：2013-04-13T09:38:37.010
> 
> 标签：c, optimization, x86, sse, mandelbrot

I want to rewrite such simple routine to SSE2 code, (preferably in nasm) and I am not totally sure how to do it, two things not clear (how to express calculations (inner loop and those from outer loop too) and how to call c code function "SetPixelInDibInt(i ,j, palette[n]);" from under staticaly linked asm code

```
 void DrawMandelbrotD(double ox, double oy, double lx, int N_ITER)
    {
     double ly = lx * double(CLIENT_Y)/double(CLIENT_X);
     double dx = lx / CLIENT_X;
     double dy = ly / CLIENT_Y;
     double ax = ox - lx * 0.5 + dx * 0.5;
     double ay = oy - ly * 0.5 + dy * 0.5;
    static  double re, im, re_n, im_n, c_re, c_im, rere, imim, int n;

    for(int j=0; j<CLIENT_Y; j+=1)
    {
     for(int i=0; i<CLIENT_X; i+=1)
     {
      c_re = ax + i * dx;
      c_im = ay + j * dy;
      re = c_re;
      im = c_im;
      rere=re*re;
      imim=im*im;
      n=1;

      for(int k=0;k<N_ITER;k++)
      {
        im =  (re+re)*im    + c_im;
        re =   rere - imim  + c_re;
        rere=re*re;
        imim=im*im;
        if ( (rere + imim) > 4.0 ) break;
        n++;
       }
        SetPixelInDibInt(i ,j, palette[n]);
      }
     }
    } 
```

could someone help, I would like not to see other code implementations but just nasm-sse translation of those above - it would be most helpfull in my case - could someone help with that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-25T21:23:12.567

英特尔有一个完整的实现作为 AVX 示例。见下文。

使 Mandelbrot 棘手的是集合中每个点（即像素）的早期输出条件不同。您可以保持一对或四倍像素的迭代，直到两者的大小都超过 2.0（或者您达到最大迭代次数）。否则需要跟踪哪个像素的点在哪个向量元素中。

无论如何，一次对 2 个（或 4 个使用 AVX）双精度向量进行操作的简单实现将使其吞吐量受到依赖链延迟的限制。您需要并行执行多个依赖链，以保持 Haswell 的两个 FMA 单元的供给。因此，您将复制变量，并在内部循环内对外部循环的两次迭代进行交错操作。

跟踪正在计算的像素会有点棘手。我认为为一行像素使用一组寄存器，为另一行使用另一组寄存器可能需要更少的开销。（所以你总是可以向右移动 4 个像素，而不是检查其他 dep 链是否已经在处理该向量。）

我怀疑每 4 次左右迭代只检查一次循环退出条件可能是一个胜利。基于压缩向量比较使代码分支，比标量情况稍微贵一些。所需的额外 FP 添加也很昂贵。（Haswell 每个周期可以执行两个 FMA，（延迟 = 5）。唯一的 FP add 单元与 FMA 单元之一是同一端口。两个 FP mul 单元位于可以运行 FMA 的相同端口上。）

可以使用打包比较来检查循环条件以生成零和一的掩码，以及`(V)PTEST`该寄存器的一个自身以查看它是否全为零。（编辑：`movmskps`然后`test+jcc`是更少的微指令，但可能会更高的延迟。）然后显然`je`或`jne`适当，这取决于您是否进行了 FP 比较，在您应该退出时留下零，或者在您不应该退出时留下零。NAN 不应该是可能的，但是没有理由不选择您的比较操作，这样 NAN 将导致退出条件为真。

```
const __mm256d const_four = _mm256_set1_pd(4.0);  // outside the loop

__m256i cmp_result = _mm256_cmp_pd(mag_squared, const_four, _CMP_LE_OQ);  // vcmppd.  result is non-zero if at least one element < 4.0
if (_mm256_testz_si256(cmp_result, cmp_result))
    break; 
```

可能有某种方法可以`PTEST`直接在打包双精度上使用，并带有一些位黑客 AND 掩码，它将挑选出将在 FP 值 > 4.0 时设置的位。就像指数中的一些位？也许值得考虑。我找到了一个关于它的[论坛帖子](http://board.flatassembler.net/topic.php?p=95037)，但没有尝试过。

嗯，哦，废话，这不会记录循环条件失败的时间，分别针对每个向量元素，目的是为 Mandelbrot 集之外的点着色。也许测试*任何*符合条件的元素（而不是全部），记录结果，然后将该元素（以及`c`该元素）设置为 0.0，这样它就不会再次触发退出条件。或者，也许将像素安排到矢量元素中才是最终的方法。这段代码在超线程 CPU 上可能表现得相当好，因为每个元素都会单独触发提前退出条件，因此会出现很多分支错误预测。

这可能会浪费您的大量吞吐量，并且考虑到每个周期 4 uops 是可行的，但其中只有 2 个可以是 FP mul/add/FMA，因此有大量整数代码将点安排到向量元素中的空间。（在 Sandybridge/Ivybrideg 上，没有 FMA，FP 吞吐量较低。但只有 3 个端口可以处理整数操作，其中 2 个是 FP mul 和 FP add 单元的端口。）

由于您不必读取任何源数据，因此每个 dep 链只有 1 个内存访问流，它是一个写入流。（而且它的带宽很低，因为大多数点在您准备好写入单个像素值之前需要进行大量迭代。）因此硬件预取流的数量并不是并行运行的 dep 链数量的限制因素. 缓存未命中延迟应被写入缓冲区隐藏。

如果有人对此仍然感兴趣，我可以编写一些代码（只需发表评论）。不过，我在高级设计阶段停了下来，因为这是一个老问题。

## ===============

我还发现英特尔已经使用 Mandelbrot 集作为其[AVX 教程](https://software.intel.com/en-us/articles/introduction-to-intel-advanced-vector-extensions)之一的示例。他们对循环条件使用 mask-off-vector-elements 方法。（使用`vcmpps`to AND 直接生成的掩码）。他们的结果表明，AVX（单精度）比标量浮点数提高了 7 倍，因此显然相邻像素在非常不同的迭代次数下达到提前输出条件并不常见。（至少对于他们测试的缩放/平移。）

他们只是让 FP 结果不断累积，以获取未能满足早期退出条件的元素。他们只是停止增加该元素的计数器。希望大多数系统默认将控制字设置为零，如果非正规仍然需要额外的周期。

但是，他们的代码在某一方面很愚蠢：他们使用浮点向量跟踪每个向量元素的迭代计数，然后在使用前将其转换为 int。使用压缩整数会更快，并且不占用 FP 执行单元。哦，我知道他们为什么这样做：AVX（没有 AVX2）不支持 256 位整数向量操作。他们本可以使用打包的 16 位 int 循环计数器，但这可能会溢出。（而且他们必须将掩码从 256b 压缩到 128b）。

他们还测试所有 > 4.0 的元素`movmskps`，然后测试，而不是使用`ptest`. 我猜`test / jcc`can 宏融合，并在与 FP 矢量操作不同的执行单元上运行，所以它可能不会更慢。哦，当然 AVX（没有 AVX2）没有 256bit `PTEST`。此外，`PTEST`是 2 微指令，所以实际上`movmskps`+比 .`test / jcc`微指令少`ptest + jcc`。（`PTEST`在 SnB 上是 1 个融合域 uop，但对于执行端口仍有 2 个未融合的 uop。在 IvB/HSW 上，即使在融合域中也是 2 个 uops。）所以它看起来`movmskps`是最佳方式，除非您可以利用按位 AND 这是 的一部分`PTEST`，或者需要测试的不仅仅是每个元素的高位。如果一个分支是不可预测的，`ptest`可能会降低延迟，因此通过更快地捕获错误预测一个周期是值得的。

# tsql - 如何表示除一行之外不为空的值？

> ID：15986394
> 
> 赞同：0
> 
> 时间：2013-04-13T09:38:41.803
> 
> 标签：tsql, sql-server-2008-r2, constraints

我正在尝试为简历建模实体，这样做我遇到了以下问题：**除了最近担任的职位外，所有职位都有结束日期**。

有没有一种好方法可以限制最多允许为空的一行。更好的情况是单个允许的 null 也具有最新的开始日期。

另一种说法是你能指定一个“not null unless”的约束吗？

注意：这是我正在做的学习练习（而不是处理生产代码）。这是我正在使用的脚本表：

```
CREATE TABLE [dbo].[Employers](
    [Id] [uniqueidentifier] NOT NULL,
    [City] [nvarchar](max) NULL,
    [State] [nvarchar](max) NULL,
    [StartMonth] [int] NULL,
    [StartYear] [int] NOT NULL,
    [EndMonth] [int] NULL,
    [EndYear] [int] NULL,
    [Name] [nvarchar](max) NULL,
    [Label] [nvarchar](max) NULL,
    [Resume_Id] [uniqueidentifier] NULL,
    [UserProfile_UserId] [int] NULL,
PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO

ALTER TABLE [dbo].[Employers]  WITH CHECK ADD  CONSTRAINT [Resume_Employers] FOREIGN KEY([Resume_Id])
REFERENCES [dbo].[Resumes] ([Id])
GO

ALTER TABLE [dbo].[Employers] CHECK CONSTRAINT [Resume_Employers]
GO

ALTER TABLE [dbo].[Employers]  WITH CHECK ADD  CONSTRAINT [UserProfile_Employers] FOREIGN KEY([UserProfile_UserId])
REFERENCES [dbo].[UserProfile] ([UserId])
GO

ALTER TABLE [dbo].[Employers] CHECK CONSTRAINT [UserProfile_Employers]
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:47:39.787

您可以设置一个肯定是无效的日期，例如 31.12.9999，而不是`NULL`然后在应用程序端检查它。否则，您可以设置一个布尔字段来显示一个人是否已经退出了所描述的职位。

我认为保持单一`NULL`值没有多大意义。如果您确实需要它，则创建一个过程来检查它并在每次插入或更新操作之前调用它。

PS你没有考虑一个人当时没有工作的情况，所以所有职位都有结束日期。
PPS 为什么将月份和年份作为两个不同的`int`字段？只需使用`date`.

# html - 不涉及 css 的 safari 和 chrome 的字体大小差异。为什么？

> ID：15986397
> 
> 赞同：0
> 
> 时间：2013-04-13T09:39:23.137
> 
> 标签：html, css, cross-browser

我注意到在 safari 和 chrome 之间，即使没有使用 css，字体大小也是不同的。代码非常简单，不涉及任何样式，但在 safari 和 chrome 中看到时仍然显示出主要的大小差异。任何浏览器都没有缩放。

```
<html>
<head>
</head>
<body>

Hello

</body>
</html> 
```

下面的链接是我的意思的截图。

[http://s21.postimg.org/9i82cla5z/image.png](http://s21.postimg.org/9i82cla5z/image.png)

任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:42:07.923

因为所有浏览器都以不同的方式呈现字体和元素。这就是为什么您需要创建一个 reset.css 文件，以便让所有浏览器达到基线并以相同的方式处理您的字体、ul、li 等。

# jquery - JS: Unable to bind event dynamically

> ID：15986398
> 
> 赞同：0
> 
> 时间：2013-04-13T09:39:24.100
> 
> 标签：jquery

I've `voting mechanism` in my website, if user tries to `vote(up or down)` I'll check whether he logged-in or not, for that I've written following code,

```
 $(".vote").click(function(){
         if(is_logged_in)
          {
             // Doing necessary stuff for vote up/down
          }else
            {
             // Showing Login Dialog box                        
            submitForm(".lform",function(response){

             if(data.status == "1")
               {
                 //Closing the Login Dialog Box
                 is_logged_in = 1;  // Assigning the value
                 bindEvent(".vote","click");  // Binding the Event,but can't able to it
               }
              });//Form Submission Closed
            }// Else Closed
         });// Main 'click' closed

     function bindEvent(selector,eventType){
         $(selector).bind(eventType);
        } 
```

Instead of external function `bindEvent(".vote","click")` I've tried without the `bindEvent()`, but I can't able to bind the `click event` dynamically after successful login.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:41:09.217

You should use [on()](http://api.jquery.com/on/) for binding dynamically created elements.

```
 $(document).on("click", ".vote",function(){
      if(is_logged_in)
      {
         // Doing necessary stuff for vote up/down
      }
      else
      {
         // Showing Login Dialog box                        
        submitForm(".lform",function(response){

         if(data.status == "1")
           {
             //Closing the Login Dialog Box
             is_logged_in = 1;  // Assigning the value
             bindEvent(".vote","click");  // Binding the Event,but can't able to it
           }
          });//Form Submission Closed
        }// Else Closed
});// Main 'click' closed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T09:44:50.143

In order to bind something to occur on an event you need to pass a callback to be triggered when that event occurs. In your code above you aren't specifying a callback.

```
function bindEvent(selector,eventType){
  $(selector).bind(eventType);
} 
```

You need something like this:

```
function bindEvent(selector,eventType,callBack){
  $(selector).bind(eventType, callBack);
} 
```

Which you would use like:

```
bindEvent('.target', 'click', function(){
  alert('This will trigger on click!');
}) 
```

### update

After re-reading your code it looks to me like what you actually need is to *trigger* the click event, rather than bind something to it:

```
$(".vote").click(function(){
  var $vote = $(this);
  if(is_logged_in) {
    // Doing necessary stuff for vote up/down
  }
  else {
    // Showing Login Dialog box                        
    submitForm(".lform",function(response){
      if(data.status == "1"){
        //Closing the Login Dialog Box
        is_logged_in = 1;  // Assigning the value
        $vote.click();
      }
    });//Form Submission Closed
  }// Else Closed
}); 
```

Using `click()` is the simple method, or you could use jQuery's `.trigger('click')` method. You may also wish to avoid the click event bubbling up to parent elements, which in this case would make sense, so you could also use `.triggerHandler('click')` instead.

# android - 需要帮助找到回购策略（工具）

> ID：15986406
> 
> 赞同：1
> 
> 时间：2013-04-13T09:39:57.850
> 
> 标签：android, git, branch, repository

我正在为多媒体机顶盒制作 froyo 图像。原图自带定制的mplayer，对SoC有硬件支持。Android 多媒体框架（音频/视频）完全被绕过，所有的播放都是用这个 mplayer 完成的。更糟糕的是，mplayer 是用 OSS 而不是 ALSA 编译的。我的中期目标是在android平台上集成alsa和dmix支持，编译支持alsa的mplayer，让android和mplayer可以同时播放。

同时我想改变原始图像上的小东西（主要是 UI、UX）。所以我想有两个分支。一张用于原始和略微改进的图像，另一张用于更大的 alsa 更改。alsa 分支将有一些其他的 git 存储库而不是原始存储库，例如 alsa 的东西。此外，一些 git 项目可能需要有自己的 alsa 实现分支（用于 alsa 输出的 mplayer、用于共享内存的仿生等）。因此，要在原始分支和 alsa 分支之间切换，我必须切换一些 git 存储库的分支，并且会有一些存储库，它们是 alsa 分支专有的。

我可以通过回购实现这一目标吗？这只是用 repo 开始一个 alsa 主题分支的问题吗？

您能否描述一下，您将如何为此设置 android 平台？任何提示表示赞赏。

干杯，亨里克

PS 为这个场景定义两个不同的产品有意义吗？

PPS 我已经在 android-porting google 组中问过这个问题：[https ://groups.google.com/forum/?fromgroups=#!topic/android-porting/K0JmK9HFAVw](https://groups.google.com/forum/?fromgroups=#!topic/android-porting/K0JmK9HFAVw)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:28:32.363

在我看来，这听起来像是同一产品上的功能实现，而不是不同的产品。

如果所有必要的 git 都在所有分支上，您只需将受影响的 git 指向您的 ALSA 功能的正确分支。这可以通过`local_manifest.xml`在`.repo`目录中添加一个来完成，它看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest>
<remove-project name="platform/blah"/>
<project path="blah"
    name="platform/blah"
    revision="alsa-feature-branch"/>
</manifest> 
```

然后，您将重新同步您的存储库并在您需要进行更改的 git 中启动主题分支。

一旦功能完成（甚至直接在主分支上进行功能开发），还可以将更改合并回您的主分支，并在您的产品 makefile 或`system.prop`文件中有一个标志来决定是否使用该功能或不。

# jquery - jquery ui 可排序，拖放进行数据分配

> ID：15986407
> 
> 赞同：-1
> 
> 时间：2013-04-13T09:40:22.273
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-sortable

我正在搜索使用 jquery ui 排序的示例，拖放以用于以下场景

我有 2 列，其中一列包含不同的行数，另一列应作为数据分配的占位符。我的意思是说：

```
Column with items to be assigned          the desired item should be dragged here
    ------------------                     ---------------------
    - item1
    ------------------                     ---------------------
    - item2
    ------------------                     ---------------------
    - item3                                 - item4
    ------------------                     --------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:51:24.347

您可以使用 jQuery UI 的 sortable 的连接列表功能来执行此操作，

Sortable 1 表示 Column 1，Column 2 由 Sortable 2 表示。连接两个列表并将第二个列表设置为空，以便用户可以将他们的项目拖到列表中。此外，为第二个列表添加背景，以便用户知道将项目拖动到哪里。

```
<script>
  $(function() {
    $( "#sortable1, #sortable2" ).sortable({
      connectWith: ".connectedSortable"
    }).disableSelection();
  });
  </script>
</head>
<body>

<ul id="sortable1" class="connectedSortable">
  <li class="ui-state-default">Item 1</li>
  <li class="ui-state-default">Item 2</li>
  <li class="ui-state-default">Item 3</li>
  <li class="ui-state-default">Item 4</li>
  <li class="ui-state-default">Item 5</li>
</ul>

<ul id="sortable2" class="connectedSortable">
</ul> 
```

这个小提琴：http: [//jsfiddle.net/pxtLj/1/](http://jsfiddle.net/pxtLj/1/)

来源：http: [//jqueryui.com/sortable/#connect-lists](http://jqueryui.com/sortable/#connect-lists)

# android - Android audio and video doesn't play on webview from loaded HTML page

> ID：15986409
> 
> 赞同：3
> 
> 时间：2013-04-13T09:40:37.267
> 
> 标签：android, android-webview

I am developing epub reader for Android devices. Audio and video doesn't play on webview from loaded HTML page. It seems like audio and video tags are not working. I have seen some solution like this:`<video src="soundfile.mp3" onclick="this.play();"></video>`. But how I can change particular (`<audio>`) tag from loaded HTML file.

This is my webview settings:

```
final WebView webView = (WebView) findViewById(R.id.webView);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setUseWideViewPort(true);
    webView.getSettings().setLoadWithOverviewMode(true);
    webView.getSettings().setPluginsEnabled(true);
    webView.getSettings().setPluginState(PluginState.ON);
    webView.setWebViewClient(new MyCustomWebViewClient());
    webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
    webView.loadUrl("about:blank");
    webView.loadUrl("file:///mnt/sdcard/myfolder/epubfile/OPS/02-audioDemo.xhtml"); 
```

What I have do for playing audio and video on my weview. Please help me to overcome this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:13:19.360

首先：使用 Environment.getExternalStorageDirectory() 因为 /mnt/sdcard/ 在所有 android 设备上都不能一直工作。还有 getExternalStorageState() 这会检查媒体是否可用。

也可能不是这个，因为我目前没有强制执行，但尝试添加读取 SD 卡的权限：

首先检查并回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:59:28.273

请将此扩展的 HTML5 Webview 用于那些类型的 HTML5 音频和视频。[https://code.google.com/p/html5webview/](https://code.google.com/p/html5webview/)

# gruntjs - 如何通过 registerMultiTask (gruntjs) 创建文件

> ID：15986418
> 
> 赞同：0
> 
> 时间：2013-04-13T09:41:36.063
> 
> 标签：gruntjs

我希望 gruntjs 在每个构建中创建一个文件，其中包含一些 PHP 代码来定义版本号。

以下代码片段在我的 grunt.initConfig 中：

第一个元

```
meta: {
  versionfile: '<?php \n' +
    'define(\'VERSION\', \'<%= grunt.template.today("yyyymmddhhii") =%>\'); \n' +
    '?>'
} 
```

2、配置

```
versionfile: {
  'lib/define-version.php': '<%= meta.versionfile %>'
} 
```

然后是多任务定义

```
grunt.registerMultiTask('versionfile', 'create version file.', function() {
    grunt.file.write(this.target, this.data);
}); 
```

当我运行作业时出现以下错误并且文件未写入：

```
Running "versionfile:lib/define-version.php" (versionfile) task
Warning: An error occurred while processing a template (Unexpected token )). Use --force to continue. 
```

我很感谢关于这个错误究竟意味着什么的每一个提示。

也许还有另一种方法可以编写包含 php 代码的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:50:03.230

我发现了错误。正确的配置有一个=太多。

代替

```
'define(\'VERSION\', \'<%= grunt.template.today("yyyymmddhhii") =%>\'); \n' + 
```

一定是

```
'define(\'VERSION\', \'<%= grunt.template.today("yyyymmddhhMM") %>\'); \n' + 
```

（忽略 ii>MM，这只是另一个错误；）

# c# - how do i know where my exe is located in users computer in C#

> ID：15986420
> 
> 赞同：0
> 
> 时间：2013-04-13T09:42:04.417
> 
> 标签：c#, vsto, exe

i have created a small addin for excel, but for configuration purposes, i need to determine where the user has installed the add-in, the specific location of the exe. How can i do this in C#??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:44:25.857

[Application.ExecutablePath](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.executablepath.aspx) should do the trick.

# sql - 计算sql中的值总和（不同/案例语句）

> ID：15986422
> 
> 赞同：2
> 
> 时间：2013-04-13T09:42:08.657
> 
> 标签：sql, sql-server-2008, tsql, distinct

我想构建一个 SQL 查询，它将消除重复值`DISTINCT`，然后`Sum`将列值打印为标题并获得结果

样本数据 ：-

```
ID  TYPE    Values
A   FLM     00:34:09
A   FLM     16:03:19
A   SLM     00:37:48
B   FLM     00:42:47
B   SLM     01:14:56
C   SLM     01:00:52
C   SLM     00:37:48 
```

我想为每个然后根据显示做`Sum of Values`同样的事情`TYPE``ID``Type`

预期输出：

```
ID  FLM         SLM
A   16:37:28    00:37:48
B   00:42:47    01:14:56
C   NULL        01:38:40 
```

我得到了什么

```
ID  FLM         SLM
A   01:38:40    NULL
A   NULL        00:37:48
B   00:42:47    NULL
B   NULL        01:14:56
C   NULL        01:38:40 
```

在这里，我可以对每种类型进行求和，但结果显示在两个不同的行而不是单行中。

我的查询：

```
Select Distinct ID
    CASE 
        When Type='SLM' 
        Then    STR(SUM(DateDiff(s,[Start Date],[End Date]))/3600) + 
                RIGHT(CONVERT(char(8),DATEADD(s,SUM(DateDiff(s,[Start Date],[End Date])),0),108),6)
    End[FLM],
    CASE    
        When Type='SLM' 
        Then    STR(SUM(DateDiff(s,[Start Date],[End Date]))/3600) + 
                RIGHT(CONVERT(char(8),DATEADD(s,SUM(DateDiff(s,[Start Date],[End Date])),0),108),6)
    End[SLM],

From #_TicketType GROUP BY ID,Type 
```

PS 使用`[Start Date],[End Date]`数据类型的列`DateTime`我`Values`在示例数据表中得到列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T09:48:48.650

（已更新）`Type`从您的中删除`group by`，并将 CASE 移动到 SUM 中，如下所示：

```
Select ID,
    STR(SUM(CASE Type WHEN 'FLM' THEN DateDiff(s,[Start Date],[End Date]) END)/3600) +
    RIGHT(CONVERT(char(8),DATEADD(s,SUM(CASE Type WHEN 'FLM' THEN DateDiff(s,[Start Date],[End Date]) END),0),108),6) [FLM],
    STR(SUM(CASE Type WHEN 'SLM' THEN DateDiff(s,[Start Date],[End Date]) END)/3600) +
    RIGHT(CONVERT(char(8),DATEADD(s,SUM(CASE Type WHEN 'SLM' THEN DateDiff(s,[Start Date],[End Date]) END),0),108),6) [SLM]
From #_TicketType 
GROUP BY ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:10:34.640

对整个 CASE 表达式使用 SUM() 函数

```
SELECT ID,
    STR(SUM(CASE WHEN Type = 'FLM' 
                 THEN DATEDIFF(s,[Start Date],[End Date]) 
            END) /3600) +
    RIGHT(CONVERT(char(8),DATEADD(s, SUM(CASE WHEN Type = 'FLM' 
                                   THEN DATEDIFF(s,[Start Date],[End Date]) END),0)
                              ,108),6) AS [FLM],                                  
    STR(SUM(CASE WHEN Type = 'SLM' 
                 THEN DATEDIFF(s,[Start Date],[End Date])
            END)) /3600 + 
    RIGHT(CONVERT(char(8),DATEADD(s, SUM(CASE WHEN Type = 'SLM' 
                                   THEN DATEDIFF(s,[Start Date],[End Date]) END),0)
                              ,108),6) AS [SLM]
FROM #_TicketType 
GROUP BY ID 
```

# asp.net-mvc-4 - Time Input Field in ASP.NET MVC

> ID：15986425
> 
> 赞同：3
> 
> 时间：2013-04-13T09:42:40.463
> 
> 标签：asp.net-mvc-4

I'm having trouble trying to write a form with time field using ASP.NET MVC 4.

Model:

```
class Abcde {
    [DataType(DataType.Time)]
    public DateTime ATime { get; set; }
} 
```

View.cshtml

```
...
@Html.EditorFor(m => m.ATime)
@Html.ValidationMessageFor(m => m.ATime) 
```

The validation always failed when I tried to input a time (hh:nn:ss), and said it was not in the corrent format, so i have to input a date instead. My Question is should I change the type to `TimeSpan`? Or is there any other way?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-10T08:06:37.077

```
[Required]
[DataType(DataType.Time)]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:H:mm}")]
public DateTime Time { get; set; }` 
```

试试这个，你可以按照你希望它为你工作的方式格式化 DataFormatString，我现在在一个项目中使用它，它对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-22T23:40:49.400

实际上，这对我有用。

```
[DataType(DataType.Time)]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:HH:mm}")]
public DateTime Hour { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-03T11:49:21.143

```
[Required]
[DataType(DataType.Time)]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:HH:mm}")]
public DateTime Time { get; set; } 
```

这段代码是正确的。但它仅在您使用`EditorFor`而不是`TextBoxFor`.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-07-17T20:16:52.453

利用：

```
[Required]
[DataType(DataType.Time)]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:HH:mm:ss}")]
public DateTime FieldTime{ get; set; } 
```

您需要将您的日期验证与此注释在内部工作的格式相匹配。因此，添加传递字符串模式的 ApplyFormat 即可获得它。

# java - 连接到 Eclipse 源代码时出现 Egit 传输错误

> ID：15986430
> 
> 赞同：0
> 
> 时间：2013-04-13T09:43:29.050
> 
> 标签：java, eclipse, git, github, egit

我已经尝试了几天来下载 Eclipse 源代码。总是显示以下错误信息。

![在此处输入图像描述](https://i.stack.imgur.com/Nntr0.png)

我按照以下步骤操作。

1.  安装 Egit 插件

2.  配置 Git 并添加用户名和密码。

3.  SSH2 生成 RSA 密钥并提供密码，然后单击按钮保存私钥。

4.  复制了我也尝试使用 ssh 的 eclipse jface 的示例 eclipse 源代码 url。

git://dev.eclipse.org/org.eclipse.jface/org.eclipse.jface.snippets.git

3.  将存储库 url 粘贴到 Git 存储库视图。

4.  它使用值自动填充向导。协议是 git。点击下一步。显示相同的错误消息。

5 我也尝试使用 ssh 协议。它询问端口号、用户名和密码。我应该给那里什么？将用户名填写为匿名，密码留空..并尝试使用git配置的用户名和密码。仍然是相同的错误消息。

我正在使用 Windows 8 64 位。jdk7\. 日食 3.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:15:18.517

这看起来像是一个旧网址。现在，您可以在此处找到所有 Eclipse Git 存储库：

[http://git.eclipse.org/c/](http://git.eclipse.org/c/)

JFace 片段位于 eclipse.platform.ui 存储库中，请参阅下一页底部的 Git URL：

[http://git.eclipse.org/c/platform/eclipse.platform.ui.git/](http://git.eclipse.org/c/platform/eclipse.platform.ui.git/)

它们位于[Wiki 上记录的](http://wiki.eclipse.org/JFaceSnippets)示例/org.eclipse.jface.snippets 中。

# python - sys.argv : list indedx out of range

> ID：15986432
> 
> 赞同：-3
> 
> 时间：2013-04-13T09:43:32.823
> 
> 标签：python, indexing

part of script

```
if sys.argv[1]  == 'help':
    help()
elif len(sys.argv) < 5:
    use()
else:
    pass

host = sys.argv[1]
username = sys.argv[2]
password = sys.argv[3]
node = sys.argv[4]
opts = sys.argv[5] 
```

this is just part of code where problem is occuring.. when i run it , error occured :

```
host = sys.argv[1] 
```

IndexError: list index out of range

All were working well, but i just reinstalled python. But, now it is creating problem. This is well working in linux still.

" Through some search, i came to know that '.py association in the registry is incorrect. It's missing %* at the end.' but, i don't know how to fix it.

Current setup path in environment variable is C:\Python27;C:\Python27\Lib\site-packages\;C: \Python27\Scripts\

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T09:50:02.890

`sys.argv`是一个和其他列表一样的列表，除了它是从命令行创建的。

它具有与您用于运行脚本的命令行所指示的一样多的项目。

代码从来都不是正确的，问题与您的 Python 文件关联或路径无关。（如果是这样，您会从命令行收到错误，但您会收到来自 Python 的错误。）

问题是您假设会有`sys.argv[1]`, 通过`'help'`在对 的长度进行任何检查之前进行检查`sys.argv`。如果脚本在没有任何参数的情况下运行，则该`[1]`索引超出范围。

# file - Recursively move all files to one-upper directory

> ID：15986437
> 
> 赞同：0
> 
> 时间：2013-04-13T09:43:51.573
> 
> 标签：file, shell, directory, cmd, rename

So here are the questions:

1.  I have a folder, let's say `C:\myFolder`, and in this directory, I have many subfolders, and in each of this subfolders, I have exactly one folder, that contains pdf files, so my file structure looks something like this: `C:\myFolder\someFolderInMyFolder\theOnlyFolderInThisFolder\*.pdf`, now I want to move all these pdfs one level up, such that it will be like this: `C:\myFolder\someFolderInMyFolder\*.pdf`. Are there any command line commands, or scripts (that can be executed by Cygwin) that will help me with this?

    What could complicate the situation is that, I have manually move some files one level up by myself, so it will help if there is a check condition.

2.  I have some `.zip` files that the name are generated by computers, in the format of `mm/dd/yy/fileIndex.zip`, and the fileIndex is like `No.001`, for example. When I upload the extracted folders to Dropbox, and view the files on my iPad, it looks weird because the full folder name can not be displayed completely, so I want to rename each folder to `someIndex`, in the above example, from `No.001` to `001`, so same question here: any command or shell scripts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:46:33.823

[您可以使用@Endoro](https://stackoverflow.com/a/15986548/1630171)建议的稍微修改的版本将所有 PDF 上移一级：

```
@echo off

for /r "C:\myFolder" %%f in (*.pdf) do move "%%~ff" "%%~dpi.." 
```

但是，脚本没有通用的方法来区分您已经移动的文件和尚未移动的文件。最好取消手动移动。否则，您将不得不找到一些显着特征或根据名称列表检查每个名称，例如[像这样](https://stackoverflow.com/a/11237450/1630171)。

您可以像这样重命名文件：

```
@echo off

setlocal EnableDelayedExpansion

for /r "C:\myFolder" %%f in (No.*.zip) do (
  set name=%%~nxf
  set name=!name:No.=!
  ren "%%~ff" "!name!"
)

endlocal 
```

FTR，我不知何故怀疑您是否真的有名称像`mm/dd/yy/fileIndex.zip`. 正斜杠不是 Windows 中文件名的有效字符。

# javascript - 使固定 到顶部直到它到达它的容器的末端

> ID：15986443
> 
> 赞同：1
> 
> 时间：2013-04-13T09:44:29.637
> 
> 标签：javascript, jquery, html, css

我有以下代码：

```
<div class="span4" style="height:1000px;">
 <div id="iphone-frame">
  <div id="iphone">
   <div id="iframe-iphone">
    <h1><div id="titlePreview"></div></h1>
    <h2><div id="subtitlePreview"></div></h2>
    <p><div id="contentPreview"></div></p>
   </div>
  </div>
  <div id="iphone-shadow"></div>
</div> 
```

我正在尝试做的是编写一些Javascript，以便`<div id="iphone-frame">`在滚动过去时修复到窗口的顶部，直到它到达容器的末尾（`<div id="span4">`）

我试过的：

*   修改这个：http: [//jsfiddle.net/trepmal/e7GN8/](http://jsfiddle.net/trepmal/e7GN8/)
*   jquery.scrollfollow.js 插件

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:52:21.443

我在这里也创建了一个小提琴（记下您对 Vector 答案的评论）：http: [//jsfiddle.net/asifrc/XLKmH/](http://jsfiddle.net/asifrc/XLKmH/)

我将类添加`sticker`到您要粘贴的 div 中，并相应`div`地将 css 中的选择器更改为`sticker`。您代码开头的克隆业务是多余的，所以我摆脱了它。

然后我添加了以下计算`sticker`底部的行：

```
var bottom = $('.sticker').parent().offset().top + $('.sticker').parent().height(); 
```

然后将 if 语句从更改`if (dist >= fromtop)`为

```
if (dist >= fromtop && dist <=  bottom) 
```

然后我删除了 .hide() 行，因为它也是多余的（对我来说，可能对你有用）。

让我知道这是否是您正在寻找的，如果您有任何问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:41:18.840

试试这个[jsfiddle](http://jsfiddle.net/hsex3/)。[它使用来自jQuery scroll()](https://stackoverflow.com/questions/9144560/jquery-scroll-detect-when-user-stops-scrolling)的窗口滚动停止检测来检测用户何时停止滚动。并根据`$(window).scrollTop()`

# java - 如何同时设置随机颜色和圆形按钮？

> ID：15986445
> 
> 赞同：2
> 
> 时间：2013-04-13T09:44:47.953
> 
> 标签：java, android, android-activity, android-button

我正在尝试使按钮变圆，随机背景颜色？当我尝试下面的代码时，按钮没有被四舍五入。

这是代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.newtestament);
    LinearLayout layout = (LinearLayout) findViewById(R.id.linearlayoutnew);
    String[] values = { "Matthai", "Marka", "Luka", "Johan",
            "Sawltak Tangthu", "Rom Laikhak", "Korin Masa", "Korin Nihna",
            "Galati", "Efesa", "Filippi", "Kolose", "Thesalonika Masa",
            "Thesalonika Nihna", "Timoti Masa", "Timoti Nihna", "Titus",
            "Filemon", "Hebru", "James", "Peter Masa", "Peter Nihna",
            "Johan Masa", "Johan Nihna", "Johan Thumna", "Jude",
            "Maangmuhna" };
    Button[] b = new Button[values.length];
    for (int i = 0; i < b.length; i++) {
        b[i] = new Button(this);
    }
    int[] btnColor = { 0xAAe60038, 0xAA9142d6, 0xAAf07b04, 0xAA1515ff,
            0xAA23699e, 0xAA0a71ff, 0xAA3e3d39, 0xAA00b323, 0xAA754e45,
            0xAAfa061e, 0xAAe66d2d, 0xAAff00ff };
    // calling random
    Random random = new Random();
    // ramdomizing a color
    int c = btnColor[random.nextInt(btnColor.length)];
    for (int i = 0; i < values.length; i++) {

        // applying button rounded xml style
        b[i].setBackgroundDrawable(getResources().getDrawable(
                R.drawable.round));
        // setting randomized color
        b[i].setBackgroundColor(c);
        // layout
        LayoutParams params = new LinearLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
        // margin
        ((MarginLayoutParams) params).setMargins(5, 5, 5, 5);
        // padding
        b[i].setPadding(10, 10, 10, 10);
        // text color
        b[i].setTextColor(0xFFFFFFFF);
        // text
        b[i].setText(values[i]);
        // text size
        b[i].setTextSize(18);
        Typeface face = Typeface.createFromAsset(getBaseContext()
                .getAssets(), "UBUNTU-R.TTF");
        b[i].setTypeface(face);
        layout.addView(b[i], params);

    }

} 
```

这是round.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

<!-- you can use any color you want I used here gray color -->
<corners
    android:bottomLeftRadius="5dp"
    android:bottomRightRadius="5dp"
    android:topLeftRadius="5dp"
    android:topRightRadius="5dp" />
    </shape> 
```

我认为问题在于 setBackgroundDrawable、setBackgroundColor 和 romdomizing。需要哪些额外的代码？？？？
**更新**：如何编辑 round.xml 以使按钮变圆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T10:06:07.013

**您将按钮背景设置为可绘制，然后将颜色设置为**。所以**语句是按顺序执行的**。所以最后你的按钮应该有一个背景颜色集。因此，请尝试评论其中一个并再次运行代码。

```
 b[i].setBackgroundDrawable(getResources().getDrawable( R.drawable.round));
    // set background drawable
    // first your background drawable will be set
    b[i].setBackgroundColor(c);
    //set background color. 
```

可绘制文件夹中的 bkg.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" 
    android:drawable="@drawable/pressed" />
<item  android:state_focused="false" 
    android:drawable="@drawable/normal" />
</selector> 
```

正常的.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
<solid android:color="#FFFFFF"/>    
<stroke android:width="3dp"
        android:color="#0FECFF" /><!-- #330000FF #ffffffff -->

<padding android:left="5dp"
         android:top="5dp"
         android:right="5dp"
         android:bottom="5dp"/> 
<corners android:bottomRightRadius="7dp"
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp"
         android:topRightRadius="7dp"/> 
</shape> 
```

按下的.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
<solid android:color="#FF1A47"/>    
<stroke android:width="3dp"
        android:color="#0FECFF"/>
<padding android:left="5dp"
         android:top="5dp"
         android:right="5dp"
         android:bottom="5dp"/> 
<corners android:bottomRightRadius="7dp"
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp"
         android:topRightRadius="7dp"/> 
</shape>

  b[i].setBackgroundResource(R.drawable.bkg); 
```

快照

![在此处输入图像描述](https://i.stack.imgur.com/HiBjY.png)

编辑：

```
 int colors []= {Color.RED, Color.BLACK, Color.BLUE,Color.GREEN};
  Random r = new Random();
    for (int i = 0; i < colors.length; i++) {
        b[i].setBackgroundColor(colors[r.nextInt(3)]);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T09:57:05.600

看[文档](http://developer.android.com/reference/android/view/View.html#setBackgroundDrawable%28android.graphics.drawable.Drawable%29) 。`view.setBackgroundDrawable(drawable)` 而且`b[i].setBackgroundColor(c);`您不能同时使用两者。它只会生效最后一个。

# c# - 代码优先模型映射

> ID：15986449
> 
> 赞同：2
> 
> 时间：2013-04-13T09:45:03.387
> 
> 标签：c#, .net, entity-framework, ef-code-first, entity-framework-5

我有一个类似的结构，如下所示。

```
public class Price
{
   public decimal Amount {get; set;}
   public string Currency {get; set;}
}

public class Product : BaseEntity
{
   public int Id {get; set;}
   public string Name {get; set;}
   public Price Price {get; set;}
} 
```

我想要一个数据库中的产品表，它将价格与其属性分开。例如;

```
**ProductTable**
--Id
--Name
--Amount
--Currency 
```

然后，当我从数据库中获取产品时，它会自动将**Amount**和**Currency**绑定到**Product的****Price**对象。我应该如何使用 Entity Framework Code First 来制作这个结构？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T11:15:57.863

价格属性必须是虚拟的，它应该可以工作：

```
public class Product
{
   public int Id {get; set;}
   public string Name {get; set;}
   public virtual Price Price {get; set;}
} 
```

**编辑：**

您可以通过类中的覆盖`OnModelCreating`方法指定自定义列名`DbContext`：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
 {
    modelBuilder.Entity<Product>().Property(u => u.Price.Amount)
                                       .HasColumnName("Amount");
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T11:18:34.927

@Miłosz Wierzbicki 给出的答案将为`Price`

但在你的情况下，我认为你不需要一个单独的表，因此将价格定义为复杂类型将在同一个表中相同，并将“价格”附加到数据库字段名称，并且在检索或保存数据时也会自动映射名称

```
[ComplexType]
public class Price
{
   public decimal Amount {get; set;}
   public string Currency {get; set;}
} 
```

阅读更多关于[[复杂类型]](http://msdn.microsoft.com/en-us/library/ee382831.aspx)**

# java - 如何保存 JLayeredPane？

> ID：15986451
> 
> 赞同：0
> 
> 时间：2013-04-13T09:45:22.737
> 
> 标签：java, swing

嗨，我正在使用`JLayeredPane`具有许多`JTextPane`s、按钮、标签等的 a。我正在使用序列化来保存它，但给出了不可序列化的异常。我该如何真正保存它？

这是我试图序列化的代码`JLayeredPane`

```
FileOutputStream fos = null;
ObjectOutputStream os = null;
try
{
    fos = new FileOutputStream(file+".pd");
    os = new ObjectOutputStream(fos);
    os.writeObject(tempPane);
    System.out.println("Saved Successfully");
}
catch (Exception ex)
{
    ex.printStackTrace();
} 
```

`tempPane`在哪里`JLayeredPane`。

但是，我得到一个`java.io.NotSerializableException`：

```
javax.swing.plaf.metal.MetalFileChooserUI
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at javax.swing.event.EventListenerList.writeObject(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteObject(Unknown Source)
    at javax.swing.JComponent.writeObject(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor13.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteObject(Unknown Source)
    at java.awt.Window.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.awt.Window.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at com.usefulsoftwares.pagedescriptors.SaveApplication.saveToPageDescriptorFormat(SaveApplication.java:28)
    at com.usefulsoftwares.pagedescriptors.PageDescriptor$7.actionPerformed(PageDescriptor.java:325)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.AbstractButton.doClick(Unknown Source)
    at javax.swing.AbstractButton.doClick(Unknown Source)
    at javax.swing.plaf.basic.BasicMenuItemUI$Actions.actionPerformed(Unknown Source)
    at javax.swing.SwingUtilities.notifyAction(Unknown Source)
    at javax.swing.JComponent.processKeyBinding(Unknown Source)
    at javax.swing.JMenuBar.processBindingForKeyStrokeRecursive(Unknown Source)
    at javax.swing.JMenuBar.processBindingForKeyStrokeRecursive(Unknown Source)
    at javax.swing.JMenuBar.processBindingForKeyStrokeRecursive(Unknown Source)
    at javax.swing.JMenuBar.processKeyBinding(Unknown Source)
    at javax.swing.KeyboardManager.fireBinding(Unknown Source)
    at javax.swing.KeyboardManager.fireKeyboardAction(Unknown Source)
    at javax.swing.JComponent.processKeyBindingsForAllComponents(Unknown Source)
    at javax.swing.JComponent.processKeyBindings(Unknown Source)
    at javax.swing.JComponent.processKeyEvent(Unknown Source)
    at javax.swing.JComboBox.processKeyEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.KeyboardFocusManager.redispatchEvent(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)` 
```

# java - Varargs 在一个组中？

> ID：15986453
> 
> 赞同：4
> 
> 时间：2013-04-13T09:45:27.197
> 
> 标签：java, arguments, overloading, argument-passing, variadic-functions

关于[Varargs](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)，我可以重复一组中的论点吗？

例如，我想允许用户传入：

```
myFunc(1, "one");
myFunc(1, "one", 2, "two");
myFunc(1, "one", 2, "two", 3, "three"); 
```

这似乎是不可能的。但正如[文档](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)中提到的，可变参数实际上是一个数组，在旧实现中。我想知道***在***发明可变参数***之前***人们是怎么做的。这可能会启发我们如何实现上述场景。我们可以认为我的场景毕竟是重复的。*`{int, String}...`*

 *感谢您的任何输入:-)

# 编辑：

感谢您的所有投入！

那么，它的调用方式`myFunc(new wrap(1, "one"), new wrap(2, "two"), new wrap(3, "three"));`是*旧*方法吗？

# 编辑2：

嗯，不。那是我混乱的错。

为了

```
myFunc(1);
myFunc(1, 2);
myFunc(1, 2, 3); 
```

*旧*的方式应该是

```
myFunc(new int[]{1});
myFunc(new int[]{1, 2});
myFunc(new int[]{1, 2, 3}); 
```

据我所知，重复的参数形成*一个*数组。它的所有参数必须是同一类型。以简单的方式实现上述调用应该是不可能的。出于好奇，我开始考虑运算符重载的可能性......（？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T09:48:42.627

在这种情况下，在我看来，为您的“对”创建一个数据结构，然后将该类型用作您的方法的 vararg 参数是合适的。

```
public void myFunc(Pair... pairs) {} 
```

您也可以使用`Object...`，但在这种情况下我看不到任何优势，因为参数总是成对出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T09:50:18.197

创建一个将两个参数包装在一起的包装类怎么样？

```
public class TwoParameter
{
    private int intValue;
    private String stringValue;

    public TwoParameter(int intValue, String stringValue)
    {
        this.intValue = intValue;
        this.stringValue = stringValue;
    }

    // getters and setters
} 
```

然后像这样使用它：

```
myFunc(new TwoParameter(1, "one"), new TwoParameter(2, "two")); 
```

该方法的签名将是这样的：

```
public void myFunc(TwoParameter... params){...} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T09:54:50.280

引入 Var args 是为了允许您向函数发送任意数量的参数。人们在其他集合/数组出现之前就对它们进行了破解。

您可以通过自定义结构实现您想要的。结构的细节将取决于名称值对应该实现什么。这是任何 NameValue 对的通用解决方案。

# 名称值对

```
class NameValuePair<K,V>
{
    private K key;
    private V value;
    public K getKey()
    {
        return key;
    }
    public void setKey(K key)
    {
        this.key = key;
    }
    public V getValue()
    {
        return value;
    }
    public void setValue(V value)
    {
        this.value = value;
    }
} 
```

# 用法

```
private <K,V> void method(NameValuePair<K, V>... pairs )
{
    for (NameValuePair<K, V> nameValuePair : pairs)
    {
        K key = nameValuePair.getKey();
        V value = nameValuePair.getValue();
        // logic goes here 
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-29T00:41:57.690

使用其他解决方案有充分的理由，但它们都引入了一些混乱（创建所有这些对象），您可能不想让图书馆的用户受到影响。

您可以将混乱转移到您的方法内部，如下所示：

```
public void example(final Object... args) {
    if (args.length % 2 != 0)
        throw new IllegalArgumentException("int, String pairs are required, but there seems to be an odd one out");

    for (int i = 0; i < args.length; i += 2) {
        int a = (Integer) args[i];
        String b = (String) args[i + 1];

        System.out.printf("%d: %s\n", a, b);
    }
} 
```

`example(1, "Hello", 2, "Goodbye", 25, "Raptors will eat you!");`然后将产生以下输出：

```
1: Hello
2: Goodbye
25: Raptors will eat you! 
```*

# c++ - 用布尔值作为c ++中的条件吗？

> ID：15986455
> 
> 赞同：-1
> 
> 时间：2013-04-13T09:45:36.283
> 
> 标签：c++, boolean, do-while

所以我想知道布尔值如何在以下代码中的条件语句中起作用

```
bool flag = true;

do { 
    d += data[i]; 
    if (d > 15 || i == 3) { 
          flag = false; 
    } 
    i = i + 1; 
} while (flag); 
```

什么时候退出dowhile循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T09:48:00.523

如果其中一个`d > 15`或`i == 3`评估为真，*`i`则将递增*并且循环将停止。

换句话说，`flag`仅在每次迭代结束时检查，即使它可能设置为`false`在一次迭代的中间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T09:47:58.983

它会在什么时候退出，`(d > 15 || i == 3)`这意味着`(d > 15 or i == 3)`。

`i`在每次迭代时递增，因此如果`i`在程序开始时 < 3，我们确信它会在某个点到达`i == 3`并中断循环。

On`d`我们不能说太多，因为我们不知道它的初始值，也不知道它在循环中的行为，因为我们对`data`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T09:48:53.493

取决于你的值`d`and `i`...
一旦`d`大于 15 或`i`等于 3，`flag`就会变成`false`并且循环将结束。

不过，这可能不会发生在同一次迭代中。例如，如果`i`在循环中递增到 3，它将首先在以下循环中进行评估，并且`flag`可能设置为`false`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T09:52:50.590

当数组 Data[] 中的前 3 个值的 SUM 大于“15”时，它将中断 while，如果不大于 15，则中断前 3 个值的 SUM。

[这取决于“i”的初始值]

# android - 编译版本与最低要求版本 Android

> ID：15986462
> 
> 赞同：4
> 
> 时间：2013-04-13T09:46:50.407
> 
> 标签：android, android-custom-view, android-version

在我的自定义视图中，我使用的`drawTextOnPath(...)`是 4.1 之前不支持硬件加速的方法。

所以我想添加一条`if`语句，在运行时检查当前的 Android 版本，如果这个版本大于或等于 4.1，则打开硬件加速。我的问题是我使用 Android 4.0 SDK（这是我的最低版本）编译我的项目，所以我没有`Build.VERSION_CODES`适用于 Android 4.1 的。

尽管我的最低版本是 4.0 ，但我应该用 4.1 编译我的项目吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T10:05:43.053

我写过一次：[Android定位系统](http://codeisland.org/2012/android-targeting-system/)

重要部分：

> 使用 Java 7 编译器编译 Java 应用程序时，不能将其与 Java 6 解释器一起使用。解释器会告诉您，即使您没有使用任何 Java 7 语言功能，它也无法解释生成的字节码。如果您想使用最新的编译器进行编译，但让您的字节码可在较旧的 JVM 实例上运行，您需要告诉编译器这样做（使用 -target-flag）。
> 
> **`<uses-sdk>`在 Android 中，您可以使用-element 和 it's `android:minSdkVersion`和`android:targetSdkVersion`-attributes在清单文件中声明您支持的平台版本。**这些“目标机制”之间的区别在于，Android 并不关心应用程序编译的平台版本。
> 
> **如果您声明您的应用程序与 API 级别 4 兼容，Android 将很乐意安装它，即使您针对 Android 4.1（API 级别 16）编译它也是如此。**

简而言之：

> *   **如果您希望您的应用程序与最新的 Android 平台一起工作，请针对它进行构建。**
> *   使用 minSdkVersion 声明应用程序支持的最低 API 级别。
> *   作为您的 targetSdkVersion，请使用您编译应用程序时所针对的 API 级别。
> *   **使用[[Android] Lint](http://codeisland.org/2012/android-targeting-system/#android-lint)检查（可能）不受支持的 API 调用。**
> *   使用条件执行和@TargetApi-annotation 在可用时使用更新的 API。

当您使用最新的 SDK 构建应用程序时，您将拥有所有`Build.VERSION_CODES`可用的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:05:26.743

是的，如果您使用 4.1 的功能，则必须针对 4.1 进行编译，即使您有条件地这样做，否则编译器将无法构建您的应用程序，因为它会将所有 4.1 功能视为无效（不存在）。

# c# - 如何实现自动换行？

> ID：15986473
> 
> 赞同：4
> 
> 时间：2013-04-13T09:48:19.930
> 
> 标签：c#, xna, word-wrap, spritefont, measurestring

XNA 有 Spritefont 类，它有一个 MeasureString 方法，可以返回 Width 和 Height 的值`string`。我试图了解如何创建一种方法，该方法将有效地返回`Environment.Newline`插入在正确位置的字符串，以便如果适合某个宽度和高度（矩形用作该参数）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T12:03:11.113

我发现以下代码：[XNA - 基本自动换行](http://www.xnawiki.com/index.php/Basic_Word_Wrapping)

```
public string WrapText(SpriteFont spriteFont, string text, float maxLineWidth)
{
    string[] words = text.Split(' ');
    StringBuilder sb = new StringBuilder();
    float lineWidth = 0f;
    float spaceWidth = spriteFont.MeasureString(" ").X;

    foreach (string word in words)
    {
        Vector2 size = spriteFont.MeasureString(word);

        if (lineWidth + size.X < maxLineWidth)
        {
            sb.Append(word + " ");
            lineWidth += size.X + spaceWidth;
        }
        else
        {
            sb.Append("\n" + word + " ");
            lineWidth = size.X + spaceWidth;
        }
    }

    return sb.ToString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-26T18:01:41.397

为了添加到 Alina 的答案，这里是该函数的扩展版本，它也将换行比 maxLineWidth 长的单个单词

```
 public static string WrapText(SpriteFont font, string text, float maxLineWidth)
    {
        string[] words = text.Split(' ');
        StringBuilder sb = new StringBuilder();
        float lineWidth = 0f;
        float spaceWidth = font.MeasureString(" ").X;

        foreach (string word in words)
        {
            Vector2 size = font.MeasureString(word);

            if (lineWidth + size.X < maxLineWidth)
            {
                sb.Append(word + " ");
                lineWidth += size.X + spaceWidth;
            }
            else
            {
                if (size.X > maxLineWidth)
                {
                    if (sb.ToString() == "")
                    {
                        sb.Append(WrapText(font, word.Insert(word.Length / 2, " ") + " ", maxLineWidth));
                    }
                    else
                    {
                        sb.Append("\n" + WrapText(font, word.Insert(word.Length / 2, " ") + " ", maxLineWidth));
                    }
                }
                else
                {
                    sb.Append("\n" + word + " ");
                    lineWidth = size.X + spaceWidth;
                }
            }
        }

        return sb.ToString();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-06T12:38:26.230

要处理带有回车的文本块，您需要修改代码如下：

```
 public static string WrapText(SpriteFont font, string text, float maxLineWidth)
    {
        string[] words = text.Split(' ');
        StringBuilder sb = new StringBuilder();
        float lineWidth = 0f;
        float spaceWidth = font.MeasureString(" ").X;

        foreach (string word in words)
        {
            Vector2 size = font.MeasureString(word);

            if (word.Contains("\r"))
            {
                lineWidth = 0f;
                sb.Append("\r \r" );
            }

            if (lineWidth + size.X < maxLineWidth )
            {
                sb.Append(word + " ");
                lineWidth += size.X + spaceWidth;
            }

            else
            {
                if (size.X > maxLineWidth )
                {
                    if (sb.ToString() == " ")
                    {
                        sb.Append(WrapText(font, word.Insert(word.Length / 2, " ") + " ", maxLineWidth));
                    }
                    else
                    {
                        sb.Append("\n" + WrapText(font, word.Insert(word.Length / 2, " ") + " ", maxLineWidth));
                    }
                }
                else
                {
                    sb.Append("\n" + word + " ");
                    lineWidth = size.X + spaceWidth;
                }
            }
        }

        return sb.ToString();
    } 
```

# java - NullPointerException：在派生类中重写基类的构造函数调用方法

> ID：15986475
> 
> 赞同：3
> 
> 时间：2013-04-13T09:48:29.687
> 
> 标签：java, nullpointerexception

我有这个代码片段：

```
class Base {
    public Base() {
        method();
    }

    void method() {
        System.out.println("In Base");
    }
}

class Derived extends Base {
    private String bar;

    public Derived() {
        bar="bar";
    }

    public void method() {
        System.out.println(bar.length());
    }

    public static void main(String[] args) {
        Base base=new Derived();
        base.method();
    }
} 
```

在执行代码时出现异常：

```
Exception in thread "main" java.lang.NullPointerException
    at Derived.method(Main.java:22)
    at Base.<init>(Main.java:5)
    at Derived.<init>(Main.java:17)
    at Derived.main(Main.java:27) 
```

我无法理解为什么会有例外`NullPointerException`。`stackTrace`任何人都可以帮助我理解吗？

你可以在[这里](http://ideone.com/hcaBG8)查看代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T09:51:11.463

`new Derived()`创建一个`Derived`对象，这意味着首先调用它的超类构造函数，然后调用`method`- 但是你已经覆盖`method`了，所以它是被调用的那个方法的子版本。在该方法中，您调用`bar.length`尚未初始化的方法。

结论：在构造函数中调用可覆盖的方法几乎从来都不是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T10:06:03.143

您给出的代码是一个***反模式***。我们永远不应该调用处理字段的方法`constructor`，原因很简单，因为它可能会产生**意想不到的结果**。

从您的代码中，您正在尝试初始化构造函数中调用的`bar`字段`Derived`。现在，当您说时`Base b = new Derived()`，呼叫以下列方式发生

1.  基本静态初始化器——如果你有
2.  派生静态初始化器——如果你有

3.  基本块初始化器——如果你有

4.  Base Constructor --> 这是你要调用的地方`method()`

5.  派生块初始化器——如果你有

6.  派生构造函数 --> 这是你初始化 bar 的地方

现在由于**运行时多态性**，到 4 号，当`Derived`'`method()`被调用时，`bar`还没有初始化为值`"bar"`（因为初始化发生在 6 号），NPE 发生

# xcode - Mac 10.6.8 - Homebrew - 未安装 Xcode

> ID：15986479
> 
> 赞同：2
> 
> 时间：2013-04-13T09:48:51.190
> 
> 标签：xcode, osx-snow-leopard, homebrew

我刚开始使用 Homebrew，但我马上就遇到了麻烦。

问题是`brew doctor`一直告诉我“未安装 Xcode”。

我在这个主题上看到了一个类似的问题 (15891818)，但 Node.js 只是部分解决方案

我首先安装了 Xcode 3.1，当我运行 brew doctor 时，它正确地告诉我我的 Xcode 是旧版本，并告诉我升级到 3.2.6。所以我从苹果网站下载了 Xcode 3.2.1，之后我进行了软件更新并升级到 3.2.6。

在此之后，Homebrew 根本找不到 Xcode 安装。（我什至重新启动了我的电脑）

我在操作系统 10.6.8 上。

有任何想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T22:42:34.620

homebrew 需要 gcc，我从这里得到的，无需安装 xcode [https://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)

# jquery-mobile - 使用 jQuery Mobile 的表格呈现问题

> ID：15986481
> 
> 赞同：1
> 
> 时间：2013-04-13T09:48:54.790
> 
> 标签：jquery-mobile

我是 jQuery Mobile 的新手，我正在尝试呈现一个表格，其中左列中的标题和右列中的数据，如此处的 jQuery Mobile 文档中[所示](http://api.jquerymobile.com/table/#entry-examples)。

这是我的测试代码：

```
<div data-role="page" id="home">
 <div data-role="header" data-theme="b">
  <h1>Header</h1>
 </div>
 <div data-role="content">
  <ul class="subheader" data-role="listview" data-divider-theme="d" data-inset="false">
   <li data-role="list-divider" role="heading">Section</li>
  </ul>
  <table data-role="table" data-mode="reflow">
   <thead>
    <tr>
     <th>Head 1</th>
     <th>Head 2</th>
     <th>Head 3</th>
     <th>Head 4</th>
     <th>Head 5</th>
    </tr>
   </thead>
   <tbody>
    <tr>
     <td>Data 1</td>
     <td>Data 2</td>
     <td>Data 3</td>
     <td>Data 4</td>
     <td>Data 5</td>
    </tr>
   </tbody>
  </table>
 </div>
</div> 
```

这是在我的桌面（Firefox，Mac OS X）上呈现的 - 正如我想要的那样：

![http://i.imgur.com/Ov4F5Gz.png](https://i.stack.imgur.com/yCKg0.png)

这是在我的移动设备（PhoneGap、Samsung Galaxy S2）上呈现的：

![http://i.imgur.com/Vkv4chN.png](https://i.imgur.com/Vkv4chN.png)

嗯，会发生什么？它不应该`<th>`在第一列渲染 ' 而`<td>`在第二列渲染 ' 吗？为什么没有发生？我必须改变什么才能做到这一点？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:02:53.877

发现问题：我在文档上缺少 HTML5 文档类型。如果没有 doctype，表格不会在 PhoneGap 的嵌入式浏览器上获得重排样式。

# c++ - 如何在 Visual C++ 中以编程方式设置断点？

> ID：15986482
> 
> 赞同：6
> 
> 时间：2013-04-13T09:48:58.597
> 
> 标签：c++, windows, visual-c++, breakpoints

我要做的是监视某些特定地址的内存值变化，例如将回调函数绑定到“onChange”事件。

现在我能想到的一个想法是使用内存写入断点。那么如何在 Visual C++ 中以编程方式操作断点呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T10:41:39.873

如果需要中断调试器，使用[DebugBreak](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679297%28v=vs.85%29.aspx)函数，必要时下一个`#ifdef _DEBUG` `#endif`块

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T10:09:46.013

Microsoft 确实提供了可用于此目的的断点接口，请查看[http://msdn.microsoft.com/en-us/library/vstudio/envdte.breakpoint.aspx](http://msdn.microsoft.com/en-us/library/vstudio/envdte.breakpoint.aspx)和[http://msdn.microsoft。 com/en-us/library/envdte80.breakpoint2(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/envdte80.breakpoint2(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-20T23:48:49.667

您也可以在您的代码中放置：

__asm { int 3 }

如果您在 VS 调试器下运行，则会调用断点处理程序。

更新：实际上它与使用 MSVC 内在的 __debugbreak 相同（[http://msdn.microsoft.com/en-us/library/f408b4et.aspx](http://msdn.microsoft.com/en-us/library/f408b4et.aspx)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-26T15:23:28.617

我[在 hwbrk 项目](https://www.codeproject.com/Articles/28071/Toggle-hardware-data-read-execute-breakpoints-prog)上取得了巨大的成功。

# java - HibernateTemplate 更新查询

> ID：15986484
> 
> 赞同：3
> 
> 时间：2013-04-13T09:49:07.540
> 
> 标签：java, hibernate, hibernate-tools

如何使用 hibernate 模板使用 hql 更新查询是 hql 语句“更新登录集 empSmartId = 48750005”+“其中 empPassword = 6328ef1675ddb7106eba8dc2661961d7”

使用 getHibernatetemplate()

当前代码：

```
 public class LoginDaoImp extends HibernateDaoSupport implements LoginDao { 
public boolean resetAttempt(Login login) { 
try { login.setAttempt(0); 
getHibernateTemplate().update(login); 
return true; 
} catch (Exception e) { e.printStackTrace(); } 
return false; } 
i can save whole pojo class above code work but i want to use where condition to update only hibernateTemplate to update the data 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-07T06:28:42.720

我知道这个问题已经很老了，但是，这个解决方案可以帮助别人......

这是更新数据库中记录的技巧。

诀窍是**首先从数据库中获取所需的记录，使用关联 POJO 类的 setter 方法更新所需的字段，然后调用`hibernateTemplate.save(Object entity)`**方法，如下所示：-

```
public void updateUser(User user, String password) {
    @SuppressWarnings("unchecked")
    List<User> results = (List<User>) hibernateTemplate
            .find("FROM User where username = ?", new Object[] { new String(user.getUsername()) });

    User userToBeUpdate = results.get(0);
    userToBeUpdate.setPassword(password);
    hibernateTemplate.save(userToBeUpdate);
} 
```

就我而言，这是可行的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:32:27.593

你会看起来像这样

```
public class LoginDaoImp extends HibernateDaoSupport implements LoginDao 
{ 
    public boolean resetAttempt(Login login) 
    { 
        try 
        { 
            // you should create method for login to retrived based on password
            //Remember getting login  by password is not correct way, Instead you you should use primary key
            //Getting persisted object of Login
            Login persisted_login = getLoginByPassword(6328ef1675ddb7106eba8dc2661961d7);

            //Setting value in persisted object of Login
            persisted_login.setEmpSmartId (48750005); 
            getHibernateTemplate().update(persisted_login); 
            return true; 
        } catch (Exception e) { 
            e.printStackTrace(); 
        } 
        return false; 
    }
} 
```

# file - CodeIgniter - 项目是主要网站

> ID：15986485
> 
> 赞同：0
> 
> 时间：2013-04-13T09:49:11.400
> 
> 标签：file, codeigniter, url, path, uri

这可能是一个潜在的非常非常愚蠢的问题。

所以我的 CI 项目将成为我们公司的主要网站。我在这里创建了它：

`www.example.com/CodeIgniter_2.1.3`

当我的用户刚刚访问`www.example.com/`并保留`www.example.com`在 URL 中时，如何让他们重定向到该地址？

这是`.htaccess`文件的事吗？或者我是否需要将我的文件夹上移一个级别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:17:47.110

CodeIgniter 的默认行为是隐藏它的实际路径。您只需要将 .htaccess 复制到文档根目录，并修改路径以包含 CodeIgniter_2.1.3

IE：

```
RewriteRule ^(.*)$ /CodeIgniter_2.1.3/index.php?/$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:13:01.797

所以你把 CI 文件放在了一个名为 Codeigniter 的目录中？

# php - 将http post内容写入php文件

> ID：15986486
> 
> 赞同：0
> 
> 时间：2013-04-13T09:49:12.533
> 
> 标签：php, post

我将字符串 xml 数据发布到 IIS 中托管的 php 页面。我想要的只是能够读取我在 php 页面中收到的字符串数据并将其写入文件。但我无法达到同样的效果。这是我的代码：-

```
<?php
if($_SERVER['REQUEST_METHOD'] == "POST"){ 
echo "Hello\n";
$somecontent = print_r($_POST, TRUE);

$my_file = "resp.txt";
$handle = fopen($my_file, "w") or die('Cannot open file:  '.$my_file);
fwrite($handle, $somecontent);  
    }else {
echo "Error\n";
    }
 ?> 
```

但我无法创建文件或读取 POST 内容。如果有人能弄清楚如何解决这个问题，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:21:36.160

if you know the input field name then use this.

```
<?php
 if($_SERVER['REQUEST_METHOD'] == "POST")
 { 
 echo "Hello\n";

 $somecontent = array();
 $somecontent[] = $_POST['firstname'];
 $somecontent[] = $_POST['lastname'];
 //etc...    

 $my_file = "resp.txt";
 $handle = fopen($my_file, "wb") or die('Cannot open file:  '.$my_file);
 fwrite($handle, $somecontent);  
 fclose($handle);
 }
 else {
 echo "Error\n";
 }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:53:23.700

这行得通吗？

```
if(!empty($_POST){
  file_put_contents('resp.txt', serialize($_POST));
} 
```

# php - PHP MYSQL 查询按类别排序

> ID：15986489
> 
> 赞同：1
> 
> 时间：2013-04-13T09:49:48.143
> 
> 标签：php, mysql, sql, output

我有以下查询：

```
SELECT projects.project_name, files.file_name
FROM `projects` JOIN `files` ON (projects.project_id = files.project_id)
ORDER BY projects.project_name ASC, files.file_name ASC 
```

例如输出：

```
Project1 - file1
Project1 - file2
Project2 - file3
Project2 - file4 
```

在 PHP 中，我使用以下方法提取这些值：

```
while ($row = mysql_fetch_assoc($result)) {} 
```

我以某种方式想要这样的输出：

```
Project1 - file1, file2
Project2 - file3, file4 
```

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:52:15.150

您可以直接`MySQL`使用`GROUP_CONCAT()`

```
SELECT  projects.project_name, 
        GROUP_CONCAT(files.file_name) file_name
FROM    projects
        INNER JOIN files 
            ON (projects.project_id = files.project_id)
GROUP   BY projects.project_name
ORDER   BY projects.project_name ASC, 
           files.file_name ASC 
```

*   [MySQL GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:54:56.730

请停止使用任何标有 mysql* 的函数 mysql 已被弃用。PDO 更易于使用，并且正在积极开发中。

[http://www.php.net/manual/en/mysqlinfo.api.choosing.php](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

注意 mysql_fetch_assoc() 函数上的大红色警告横幅。

[http://php.net/manual/en/function.mysql-fetch-assoc.php](http://php.net/manual/en/function.mysql-fetch-assoc.php)

# oracle - 将 SQL 查询数据导出到 Excel 或 PDF 文件？

> ID：15986490
> 
> 赞同：0
> 
> 时间：2013-04-13T09:49:49.147
> 
> 标签：oracle, plsql, export-to-excel

有什么方法可以将从 PL/SQL 过程中的 SQL 查询获取的数据导出到 Excel 或 PDF 文件？

导出必须在过程本身内完成。

# java - Primefaces & Twitter Bootstrap - 引导向导的样式

> ID：15986491
> 
> 赞同：3
> 
> 时间：2013-04-13T09:49:51.840
> 
> 标签：java, html, jsf, twitter-bootstrap, primefaces

我正在努力解决一个问题。我的 jsfiddle 输出是我想要的：

[jsfiddle 输出](http://jsfiddle.net/jAhLn/)

但是，我的页面看起来不同，尤其是产品样式：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.prime.com.tr/ui">

<h:head>
    <title>Title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <!-- Le styles -->
    <link href="http://fuelcdn.com/fuelux-imh/2.2/css/fuelux.css"
        rel="stylesheet" />
    <link
        href="http://fuelcdn.com/fuelux-imh/2.2/css/fuelux-responsive.css"
        rel="stylesheet" />
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="css/bootstrap-responsive.css" rel="stylesheet"
        type="text/css" />
    <style type="text/css">
body {
    padding-bottom: 200px;
}

.pillbox {
    border: 1px solid #bbb;
    margin-bottom: 10px;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    width: 251px;
}

.container>div,.container>table {
    margin: 20px;
}

.tree {
    width: 430px;
    height: 350px;
}

.static-loader {
    margin-left: 30px;
}

.step-content {
    border: 1px solid #D4D4D4;
    border-top: 0;
    border-radius: 0 0 4px 4px;
    padding: 10px;
    margin-bottom: 10px;
}
</style>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

    <!-- Le fav and touch icons
<link rel="shortcut icon" href="../assets/ico/favicon.ico">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
-->

    <h:outputScript name="js/require.js" />
    <script>
//<![CDATA[
        requirejs.config({
            paths: {
                'jquery': 'js/jquery',
                'underscore': 'http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min',
                'bootstrap': 'js/bootstrap/js',
                'fuelux': 'src'
            }
        });

        require(['jquery', 'sample/data', 'sample/datasource', 'sample/datasourceTree', 'fuelux/all'], function ($, sampleData, StaticDataSource, DataSourceTree) {

            // WIZARD
            $('#MyWizard').on('change', function(e, data) {
                console.log('change');
                if(data.step===3 && data.direction==='next') {
                    // return e.preventDefault();
                }
            });
            $('#MyWizard').on('changed', function(e, data) {
                console.log('changed');
            });
            $('#MyWizard').on('finished', function(e, data) {
                console.log('finished');
            });
            $('#btnWizardPrev').on('click', function() {
                $('#MyWizard').wizard('previous');
            });
            $('#btnWizardNext').on('click', function() {
                $('#MyWizard').wizard('next','foo');
            });
            $('#btnWizardStep').on('click', function() {
                var item = $('#MyWizard').wizard('selectedItem');
                console.log(item.step);
            });
            $('#MyWizard').on('stepclick', function(e, data) {
                console.log('step' + data.step + ' clicked');
                if(data.step===1) {
                    // return e.preventDefault();
                }
            });

        });
        //]]>
    </script>

</h:head>
<h:body>

    <!-- Content Area -->
    <div class="well" style="margin-top: 50px;">
        <div class="fuelux">
            <div class="container">

                <!-- WIZARD -->
                <div>
                    <div id="MyWizard" class="wizard">
                        <ul class="steps">
                            <li data-target="#step1" class="active"><span
                                class="badge badge-info">1</span><span class="chevron"></span></li>
                            <li data-target="#step2"><span class="badge">2</span>Step 2<span
                                class="chevron"></span></li>
                            <li data-target="#step3"><span class="badge">3</span>Step 3<span
                                class="chevron"></span></li>
                            <li data-target="#step4"><span class="badge">4</span>Step 4<span
                                class="chevron"></span></li>
                            <li data-target="#step5"><span class="badge">5</span>Step 5<span
                                class="chevron"></span></li>
                            <li data-target="#step5"><span class="badge">5</span>Step 5<span
                                class="chevron"></span></li>
                            <li data-target="#step5"><span class="badge">5</span>Step 5<span
                                class="chevron"></span></li>

                        </ul>
                        <div class="actions">
                            <button class="btn btn-mini btn-prev">
                                <i class="icon-arrow-left"></i>Prev
                            </button>
                            <button class="btn btn-mini btn-next" data-last="Finish">
                                Next<i class="icon-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                    <div class="step-content">
                        <div class="step-pane active" id="step1">
                            <legend>
                                <h3>Product</h3>
                            </legend>
                            <!-- Product Name-->
                            <div class="control-group">
                                <label class="control-label">Product Name</label>
                                <div class="controls">
                                    <h:inputText name="Product Name" class="input-xlarge"
                                        type="text" />
                                </div>
                            </div>
                            <!-- Categorie-->
                            <div class="control-group">
                                <label class="control-label">Categorie</label>
                                <div class="controls">
                                    <h:inputText name="Product Name" class="input-xlarge"
                                        placeholder="Insert Categorie" type="text" />
                                </div>
                            </div>
                            <!-- Textarea -->
                            <div class="control-group">
                                <label class="control-label">Description</label>
                                <div class="controls">
                                    <div class="textarea">
                                        <textarea rows="3"></textarea>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="step-pane" id="step2">This is step 2</div>
                        <div class="step-pane" id="step3">This is step 3</div>
                        <div class="step-pane" id="step4">This is step 4</div>
                        <div class="step-pane" id="step5">This is step 5</div>
                    </div>

                    <!-- <h:button type="button" class="btn btn-mini" id="btnWizardPrev"
                    value="prev" />
                <h:button type="button" class="btn btn-mini" id="btnWizardNext"
                    value="next" />
                <h:button type="button" class="btn btn-mini" id="btnWizardStep"
                    value="current step" /> -->
                </div>

            </div>
        </div>
    </div>

    <!-- Le javascript
================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <h:outputScript name="js/jquery-1.7.2.min.js" />
    <h:outputScript name="js/bootstrap.min.js" />
    <h:outputScript name="js/jquery.dataTables.min.js" />
    <h:outputScript name="js/bootstrap.js" />
    <script
        src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"
        type="text/javascript"></script>
    <script src="http://fuelcdn.com/fuelux-imh/2.2/loader.min.js"
        type="text/javascript"></script>

</h:body>
</html> 
```

它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/KcHz9.png)

因此，产品领域没有真正的引导风格。你会如何解决这个问题？

真的很感谢你的回答！！！

**更新**

我猜是因为我使用 primefaces 和 jsf。但是，目前我无法找到真正的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:46:55.700

它可能是您调用样式表的操作。价值观正在被取代。将此样式表设为您添加的最后一个样式表

```
<link href="css/bootstrap.css" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T14:27:48.333

这个对我有用！

您必须下载 bootstrap 文件夹并将 js 文件夹放在 %projectRoot% 中，css 和 img 文件夹也是如此。在你必须删除 h:outputScript name="js/jquery-1.7.2.min.js" 和 h:outputScript name="js/jquery.dataTables.min.js" 之后。

# c++ - QDomElement.setAttribute 使程序崩溃

> ID：15986495
> 
> 赞同：0
> 
> 时间：2013-04-13T09:50:20.367
> 
> 标签：c++, qt, dom, qt5

这很令人困惑。我的程序运行可靠。然后，我匆忙做了一些更改，它们不起作用，重新缠绕它们，去展示我的程序，它不再起作用了。我没有每 10 分钟制作一次新副本是我的错。然而，问题是，程序在一个毫无意义的地方崩溃。

```
QDomElement Expense::toNode()
{
    QDomElement e=Entry::toNode(); //Entry is parent of Expense
    QString temp;
    //std::string getThis=e.nodeName().toStdString();
    temp=QString::fromStdString(Category); //Category is string field

    //e.hasAttribute("category"); //this works
    //e.setAttribute("ha","hi"); //this crashes program
    //e.setAttribute("category",temp); //this also crashes program
    return e;
} 
```

我想也许我匆忙修改了一些库，但是如果我创建一个新的`QDomElement`，并编辑它的属性，就没有问题了。然后我想也许我的节点根本不是节点，但我可以使用许多其他功能（例如`e.hasAttribute`）。我们可以设置的属性数量是否有限制？可能是什么错误？

如果有帮助：

```
QDomElement Entry::toNode()
{
    QDomDocument d("EzXpns");
    QDomElement e=d.createElement("entry");
    QString temp;
    temp=QString::fromStdString(Name);
    e.setAttribute("name",temp);
    temp=QString::fromStdString(to_string(static_cast<long double>(Amount)));
    e.setAttribute("amount",temp);
    temp=QString::fromStdString(to_string(static_cast<long long>(Date[0])));
    e.setAttribute("dateyear",temp);
    temp=QString::fromStdString(to_string(static_cast<long long>(Date[1])));
    e.setAttribute("datemonth",temp);
    temp=QString::fromStdString(to_string(static_cast<long long>(Date[2])));
    e.setAttribute("dateday",temp);
    temp=QString::fromStdString(Comment);
    e.setAttribute("comment",temp);
    return e;
} 
```

编辑：我应该指定，如果我尝试调试，这是我得到的消息：

> TestBuild.exe 已触发断点

然后

> TestBuild.exe 中 0x77d415de 处的未处理异常：0xC0000005：访问冲突读取位置 0x13fb8ff8。

然后

> TestBuild.exe 中的 0x77d3016e：0x00000000：操作成功完成。

Edit2：示例 xml

```
<!DOCTYPE data>
<EzXpns>
  <account>
    <login name="b" password="1"/>
    <expHis>
      <entry comment="9" dateday="1" name="k" dateyear="0" amount="9" datemonth="1"/>
      <entry comment="9" dateday="1" name="b" dateyear="0" amount="9" datemonth="1"/>
      <entry comment="9" dateday="1" name="b" dateyear="0" amount="9" datemonth="1"/>
      <entry comment="9" dateday="1" name="b" dateyear="0" amount="9" datemonth="1"/>
      <entry comment="9" dateday="1" name="b" dateyear="0" amount="9" datemonth="1"/>
    </expHis>
    <incomeHis/>
  </account>
</EzXpns> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:34:11.173

解决方案在 Qt 文档中。

看看我是如何创建新元素的，我是通过调用来实现的`QDomDocument d("EzXpns");`，这是一个错误。在 Qt 中，在`QDomDocument`被销毁后，所有子节点都是如此。它以前只是因为纯粹的运气而起作用。创建一个`QDomDocument`，然后传递它，解决了我的问题。

# c++ - windows C++ 使用 documentproperties 打开打印机得到 C6836 “Write Overrun” 代码分析警告

> ID：15986496
> 
> 赞同：3
> 
> 时间：2013-04-13T09:50:20.393
> 
> 标签：c++, windows, winapi

在以下代码中：

```
// If GetPrinter didn't fill in the DEVMODE, try to get it by calling
// DocumentProperties...
if (pi2->pDevMode == NULL)
{
    dwNeeded = DocumentProperties(NULL, hPrinter,
        printerName,
        NULL, NULL, 0);

    if (dwNeeded <= 0)
    {
        GlobalFree(pi2);
        ClosePrinter(hPrinter);
        return FALSE;
    }

    pDevMode = (DEVMODE *)GlobalAlloc(GPTR, dwNeeded);
    if (pDevMode == NULL)
    {
        GlobalFree(pi2);
        ClosePrinter(hPrinter);
        return FALSE;
    }

    lFlag = DocumentProperties(NULL, hPrinter,
        printerName,
        pDevMode, NULL,
        DM_OUT_BUFFER);

    if (lFlag != IDOK || pDevMode == NULL)
    {
        GlobalFree(pDevMode);
        GlobalFree(pi2);
        ClosePrinter(hPrinter);
        return FALSE;
    }

    pi2->pDevMode = pDevMode;
} 
```

在线上

```
lFlag = DocumentProperties(NULL, hPrinter,
printerName,
pDevMode, NULL,
DM_OUT_BUFFER); 
```

当我运行 Visual Studio 2012“代码分析”功能时，它会引发警告：

C6386 写入溢出 写入“pDevMode”时缓冲区溢出：可写大小为“dwNeeded”字节，但可能写入“220”字节。对“pDevMode”的无效写入，（超出其可写范围）

代码运行良好，但想知道如何解决此警告的发生（最好不禁用警告）

这个错误的帮助页面似乎不适用（或者我不知道它是怎么做的）[http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k(C6386) &rd=真](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k(C6386)&rd=true)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:56:19.163

DocumentProperties 的 SAL 注释不能表示 DEVMODE 是一个可能大于其声明大小的结构。该函数也不接受说明 DEVMODE 传递大小的参数。该结构也没有说明大小的单个字段。`__out_bcount_opt`因此，无法使用或`__out_bcount_part`无法使用注释。

这是所有采用 DEVMODE 的 winapi 函数的问题。这是一个可以追溯到石器时代的结构，早在 SAL 出现之前。如果微软可以重新做一遍，那么他们会以不同的方式做这件事。现在太晚了。

除了知道自己做对了而工具弄错了，您无能为力。这只是一个警告。

# installation - 函数 StrStr 需要多少个参数

> ID：15986497
> 
> 赞同：0
> 
> 时间：2013-04-13T09:50:22.223
> 
> 标签：installation, nsis

我正在尝试使用 NSIS 功能`StrStr`，但出现以下错误：

`!insertmacro: macro "FUNCTION_STRING_StrStr" requires 0 parameter(s), passed 3!`

[文档](http://nsis.sourceforge.net/StrStr)指定您应该为此函数传递 3 个参数，这与上面的编译错误相反。

那么我为 NSIS 函数使用多少个参数`StrStr`呢？

我的代码：

```
!include "StrFunc.nsh"
!include "LogicLib.nsh"

InstallDir  "abc"
Name        "def"        
OutFile     "def.exe"

Section
    ${StrStr} $R9 "How to find it" "find it"
SectionEnd 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T10:01:51.527

文档和编译器错误都是正确的。`StrStr`根据上下文，同时接受零参数和三个参数。第一次看到它，没有参数，就可以使用它。鉴于[StrFunc](http://nsis.sourceforge.net/StrFunc)文档中的示例，我会尝试：

```
!include "StrFunc.nsh"
!include "LogicLib.nsh"

${StrStr} # Supportable for Install Sections and Functions

InstallDir  "abc"
Name        "def"        
OutFile     "def.exe"

Section
    ${StrStr} $R9 "How to find it" "find it"
SectionEnd 
```

# java - 字符串对象创建及其构造函数

> ID：15986501
> 
> 赞同：1
> 
> 时间：2013-04-13T09:50:35.080
> 
> 标签：java

有两种方法可以创建 String 对象。

```
String str = new String("Java");
String str2 = "Java"; 
```

我知道在第一种情况下肯定会调用构造函数。但不知道第二个。会调用构造函数吗？

```
String substr = new String(str.substring(2,str.length));  // str is new object
String substr2 = new String(str2.substring(2,str2.length)); //str2 is not with new keyword 
```

要确保在堆内存`substr`中`substr2`是相同类型的操作和相同的行为。

我知道一件事`String.substring()`根本不会创建新对象，而是使用具有不同偏移量的先前 char[] 对象。

那么`substr`and会发生什么`substr2`？我们可以将这些东西与构造函数联系起来，因为偏移量是在构造函数内部生成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T09:55:28.197

来自 JLS [§3.10.5。字符串文字](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)：

> 字符串文字是对类实例的引用`String`（第 4.3.1 节、第 4.3.3 节）。
> 
> 此外，字符串字面量始终指代同一个 class 实例`String`。这是因为字符串文字 - 或者更一般地说，作为常量表达式值的字符串（第 15.28 节） - 是“内部的”，以便使用方法共享唯一实例`String.intern`。

因此，`"Java"`指的是一个`String`对象。此外，任何由相同字符组成的字符串文字都将引用相同的`String`对象。但是，未指定构造此对象的方式和时间。

> 要确保在堆内存`substr`中`substr2`是相同类型的操作和相同的行为。

是的，它们是完全一样的操作。

> 我知道一件事`String.substring()`根本不会创建新对象，而是使用具有不同偏移量的先前 char[] 对象。

这是未指定的。您所描述的是旧版本的 Oracle JDK 是如何工作的。当前版本[不再这样做了](https://stackoverflow.com/a/14193606/367273)：`substring()`现在复制字符。此更改是在 Java 7u6 中进行的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T09:54:01.623

创建任何对象时都会调用构造函数。

的情况下`String str2 = "World";`，jvm会先在字符串池中搜索`"world"`字符串。仅当池中不存在此文字时才会调用构造函数，否则它将返回现有对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T09:58:20.807

应始终调用构造函数。要亲自调试此应用程序：

```
public static void main(String[] args) {
  String str = new String("Java"); // <-- breakpoint here
  String str2 = "World";
  String str3 = "Java"; // (1)
  String str4 = new String("Java"); // (2)

  System.out.println(str + " " + str2 + " " + str3 + " " + str4);
} 
```

在第一行 ( `String str = new...`) 设置断点并“Step into”进入`String()`构造函数。然后“Step out”构造函数，“Step over”到下一行并再次“Step into”。您应该`String()`再次在构造函数中。

1：至于`str3`它应该来自池，`if (str3 == str)`即将是`true`。

2：但`str4`将是一个新的实例，`if (str4 == str || str4 == str3)`即将是`false`。请参阅[字符串 API](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#String%28java.lang.String%29)。

让我们知道你发现了什么:-)

# ios - AVFoundation.AVAudioPlayer 随机停止

> ID：15986505
> 
> 赞同：1
> 
> 时间：2013-04-13T09:51:12.413
> 
> 标签：ios, xamarin.ios, xamarin

我正在尝试同时播放多个声音。然而，有时声音只是停止播放或根本不播放。

我有一个事件处理程序，它在应该播放声音效果时接收事件：

```
void HandlePlaySound (object sender, EventArgs e)
    {
        this.InvokeOnMainThread (()=>{
            ...
             [set url to path]  
            ...
            MonoTouch.AVFoundation.AVAudioPlayer player = MonoTouch.AVFoundation.AVAudioPlayer.FromUrl(url);
            player.Play();
        });
    } 
```

这在大多数情况下都可以正常工作，但是当同时触发两个声音时，似乎其中一个会被杀死或两者都被杀死。我一定在这里做错了什么。

有没有更正确的方式在 iPhone 应用程序中播放声音。每个声音都应该播放到最后，并且可能同时播放多个声音。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:35:37.953

如果我猜的话，我会说有时，GC 会进入并处理超出范围的玩家，从而导致您的随机停止行为。我找到了一个稳定的解决方案，首先确定您希望能够同时播放多少个音频流*，*然后执行这些规则：

```
 // I'd like a maximum of 5 simultaneous audio streams
    Queue<AVAudioPlayer> players = new Queue<AVAudioPlayer>(5);

    void PlayAudio (string fileName)
    {
        NSUrl url = NSUrl.FromFilename(fileName);
        AVAudioPlayer player = AVAudioPlayer.FromUrl(url);

        if (players.Count == 5) {
            players.Dequeue().Dispose();
        }
        players.Enqueue(player);
        player.Play();
    }

    // In my example, I'll select files from my Sounds folder (containing a couple of .wav, a couple of .mp3 and an .aif)
    string[] files;
    int fileIndex = 0;

    string GetNextFileName ()
    {
        if (files == null)
            files = Directory.GetFiles("Sounds");

        if (fileIndex == files.Length)
            fileIndex = 0;
        return files[fileIndex++];
    }

    partial void OnPlayButtonTapped (NSObject sender)
    {
        string fileName = GetNextFileName();
        PlayAudio(fileName);
    } 
```

# c# - VS 2012 中的 WPF 设计器问题

> ID：15986510
> 
> 赞同：0
> 
> 时间：2013-04-13T09:51:35.667
> 
> 标签：c#, wpf

我是 WPF 新手，在构建简单 UI 时遇到问题。当我将一个按钮放置在窗口中的随机位置时，它不会完全出现在设计器中的位置。为什么，Windows 窗体设计器没有这样的问题，比方说。

这是我的意思的截图： http: [//s14.postimg.org/kjs0vvpqn/wpf.png](http://s14.postimg.org/kjs0vvpqn/wpf.png)

有没有办法让按钮完全按照它在设计器中的显示方式显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:10:43.440

如果您想放置一个按钮以具有所见即所得的位置，请将其包装到[Canvas](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.aspx)中，而不是网格或 StackPanel。对于grid或stackpanel，位置由Horizo​​ntalLayout、Margin、Padding等控制，而对于Canvas，可以直接设置top和left属性。

# java - 套接字上的 java.io.StreamCorruptedException

> ID：15986511
> 
> 赞同：0
> 
> 时间：2013-04-13T09:51:36.960
> 
> 标签：java, exception, serialization, java-io, objectinputstream

我正在开发一个多人蛇游戏。游戏似乎运行良好，但它经常（不是每次）随机抛出 java.io.StreamCorrupted Exception 类型代码：AC 下面给出了相同的完整 StackTrace。

```
java.io.StreamCorruptedException: invalid type code: AC
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readArray(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at mycode.ConnectionManager.otherRunMethod(ConnectionManager.java:231)
at mycode.ConnectionManager$1.run(ConnectionManager.java:289)
at java.lang.Thread.run(Unknown Source) 
```

生成错误的客户端代码如下：

```
void otherRunMethod() {
    try {
        while (true) {
            boolean gameup = false;
            objin = new ObjectInputStream(socket.getInputStream());
            Object insnake = objin.readObject();
            if (((Snake) insnake).player.length() >= 9) {
                if (((Snake) insnake).player.substring(0, 8).equals(
                        "Resigned")) {
                    String[] s = ((Snake) insnake).player.split(",");
                    map.remove(s[1]);
                    continue;
                } else if (((Snake)insnake).player.substring(0, 10)
                        .equals("food_eaten")) {
                    String[] s = ((Snake) insnake).player.split(",");
                    Game.foodx = Integer.parseInt(s[1]);
                    Game.foody = Integer.parseInt(s[2]) + 35;
                    objin = new ObjectInputStream(socket.getInputStream());
                    insnake = objin.readObject();
                    if(((Snake)insnake).score>highestscore){
                        highestscore=((Snake)insnake).score;
                        if(highestscore>=100 && highestscore<200)
                            levelUp(2);
                        else if(highestscore>=200){
                            levelUp(4);
                        }
                    }
                    if (s.length == 4) {
                        System.out.println(s[3]);
                        if (s[3].equals("game_up")) {
                            gameup=true;
                        }
                    }
                }
            }
            Snake temp = new Snake((Snake) insnake);
            map.remove(temp.player);
            map.put(temp.player, temp);
            if(temp.gameover){
                allPlayersEliminated();
            }
            findPos();
            game_UpCheck(gameup);
            Thread.sleep(10);
        }
    } catch (java.net.SocketException s) {
        JOptionPane.showMessageDialog(null, "Server Closed", "ERROR",
                JOptionPane.ERROR_MESSAGE);
        System.exit(0);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

对应的服务器端代码如下：

```
 void relay(Snake move) {
    boolean foodeaten = false;
    Snake snake = move;
    try {
        if (move != null && move.player.length() > 9) {
            if (move.player.equals("food_eaten")) {
                move.player = move.player + ","
                        + (Snakeserver.randomGenerator.nextInt(100) * 6)
                        + ","
                        + (Snakeserver.randomGenerator.nextInt(100) * 6);
                foodeaten = true;
                snake = (Snake) objin.readObject();
                int rows = Snakeserver.score.getModel().getRowCount();
                int row = 1;
                for (int i = 0; i < rows; i++) {
                    if (((Snake) snake).player
                            .equals((String) Snakeserver.score.getModel()
                                    .getValueAt(i, 0))) {
                        row = i;
                        break;
                    }
                }
                if (snake.score >= 300)
                    move.player += "," + "game_up";
                Snakeserver.score.getModel()
                        .setValueAt(snake.score, row, 1);
            } 
        }

        if (move.gameover) {
            int rows = Snakeserver.score.getModel().getRowCount();
            int row = 1;
            for (int i = 0; i < rows; i++) {
                if (snake.player.equals((String) Snakeserver.score
                        .getModel().getValueAt(i, 0))) {
                    row = i;
                    break;
                }
            }
            Object temp = Snakeserver.score.getModel().getValueAt(row,
                    1);
            temp += "  GAME OVER";
            Snakeserver.score.getModel().setValueAt(temp, row, 1);
        }

        for (Snake name : map.keySet()) {
            if (name != null) {
                if (name.player.equals(snake.player)) {
                    name.copyValues(snake);
                }
                objout = new ObjectOutputStream(map.get(name)
                        .getOutputStream());
                objout.writeObject(move);
                objout.flush();
                if (foodeaten) {
                    objout = new ObjectOutputStream(map.get(name)
                            .getOutputStream());
                    objout.writeObject(snake);
                    objout.flush();
                }
            }
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

实际上我不知道问题出在哪里，所以我可能倾倒了比必要更多的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:58:12.150

经过几个小时的挖掘，我终于找到了解决问题的方法。在服务器端代码中，请参见以下代码：

```
for (Snake name : map.keySet()) {
        if (name != null) {
            if (name.player.equals(snake.player)) {
                name.copyValues(snake);
            }
            objout = new ObjectOutputStream(map.get(name)
                    .getOutputStream());
            objout.writeObject(move);
            objout.flush();
//rest of code goes here. Closing brackets as above. 
```

如果我写这行

```
 objout = new ObjectOutputStream(map.get(name).getOutputStream()); 
```

在复合语句之前

```
if (name.player.equals(snake.player)) {
            name.copyValues(snake);
} 
```

我似乎摆脱了 StreamCorrupted Exception。任何关于为什么会发生这种情况的建议都将受到欢迎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T23:09:46.640

我也遇到了与上面解释的相同的异常和问题，在写入（发送）msg（对象）时，我正在创建新的 OutputObjectStream，如下所示

```
//client or server side
while(true)
{
    ObjectOutputStream out = new ObjectOutputStream(s.getOutputStream());
    out.writeObject(some_msg_object);
}

/* but while reading(receiving), I was not creating new inputObjectReader
ie */
//on other side
while(true)
Message msgReceived = (Message)inputObjectReader.readObject(); 
```

这导致了完全相同的教育，

因此，如果发送 msg，通过创建新的 OutputStream，通过创建新的 InputStream 接收它，反之亦然，使用相同的已创建的 OutputStream 发送，通过已创建的 InputStream 接收.....

# sql - [VB.Net]SQL 参数发送名称而不是值

> ID：15986512
> 
> 赞同：0
> 
> 时间：2013-04-13T09:51:39.250
> 
> 标签：sql, vb.net, parameters, oledb, ms-access-2010

我试图弄清楚如何使用命令参数通过 SQL 语句传递值，因为连接根本不起作用，但我遇到了一个奇怪的问题，我找不到任何信息。

每当调用 SQL 语句时，参数的名称（例如 @Address1）就会被放入我的数据库中，而不是参数的值。

这是我的 SQL 语句、命令和连接代码：

```
Private Function qDBase()
    con.ConnectionString = " Provider=Microsoft.ACE.OLEDB.12.0;Data Source=.\pos408_w4_Team_B_Database.accdb;Persist Security Info=False" ' database should be located with the .exe file so that it can be detected and connected to
    Try 'Make sure we also wrap connection statement in try in case something fails there
        con.Open()

        Try ' Wrap each query in a try/catch so that if it fails it will not fail silently due to code in Button1_Click
            ' Always do Customer_Index first, the primary key here is a secondary key in Account_Index, via one-to-many relationship, and unless the corresponding value can be loaced in Customer_Index it will fail to insert the data
            qStr = "Insert Into `Customer_Index` Values('@Soc2','@FName','@MInitial','@LName','@DriverL','@Address1','@Address2','@City','@State','@Zip2','@Phone2','@Email');"

            ' Create and append parameters list
            com.Parameters.AddWithValue("Soc2", Soc2)
            com.Parameters.AddWithValue("FName", FName)
            com.Parameters.AddWithValue("MInitial", MInitial)
            com.Parameters.AddWithValue("LName", LName)
            com.Parameters.AddWithValue("DriverL", DriverL)
            com.Parameters.AddWithValue("Address1", Address1)
            com.Parameters.AddWithValue("Address2", Address2)
            com.Parameters.AddWithValue("City", City)
            com.Parameters.AddWithValue("State", State)
            com.Parameters.AddWithValue("Zip2", Zip2)
            com.Parameters.AddWithValue("Phone2", Phone2)
            com.Parameters.AddWithValue("Email", Email)

            com.CommandText = qStr ' Set command value to qStr
            com.Connection = con ' Set command connection
            com.ExecuteNonQuery() ' Execute the command

            qSuccesses += 1
        Catch ex As Exception
            MsgBox(ex) ' Show thrown exception to user
        End Try

        'Try
        'qStr = "Insert Into `Account_Index` Values('" & Account & "','" & Soc & "','" & AccountType & "');"

        'com.CommandText = qStr ' Set command value to qStr
        'com.ExecuteNonQuery() ' Execute the command

        '            qSuccesses += 1
        '       Catch ex As Exception
        '          MsgBox(ex) ' Show thrown exception to user
        '     End Try

    Catch ex As Exception
        MsgBox(ex) ' Show thrown exception to user
        Return False ' REturn prematurely because connection could not be made, no point going any further
    End Try

    If (qSuccesses = 1) Then ' If both try's work
        qSuccesses = 0 ' reset to zero
        Return True ' return true
    Else ' If one or both try's fail
        qSuccesses = 0 'reset to zero
        Return False ' return false
    End If
End Function 
```

以及在表单加载时初始化的应该发送的值：

```
 Soc2 = "123-45-6789"
    FName = "Test"
    MInitial = "D"
    LName = "Test"
    DriverL = "Test"
    Address1 = "123 Test Rd"
    Address2 = " "
    City = "Denver"
    State = "CO"
    Zip2 = "12345-6789"
    Phone2 = "(123)456-7890"
    Email = "Test@Test.com" 
```

然后是我的 Access 2010 数据库中的输出：

> @Soc2 @FName @MInitial @LName @DriverL @Address1 @Address2 @City @State @Zip2 @Phone2 @Email

AddWithValue 是否不再正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:53:38.477

我讨厌这种情况发生，在发布问题后几分钟就解决问题。我不应该在 SQL 语句中使用撇号。只是决定尝试一下，而不用那些地狱般的东西，这次它工作得很好。

# node.js - 如何... 使用 Google/Facebook OAuth 登录和 Google Checkout 的 Node js

> ID：15986513
> 
> 赞同：2
> 
> 时间：2013-04-13T09:51:39.580
> 
> 标签：node.js, single-sign-on, google-checkout

嗨，我对 Nodejs 完全陌生，但有人能指出我如何快速让 Nodejs 与 Google/facebook/openid 单点登录和 google checkout 集成一起运行的正确方向吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:07:12.500

[护照包](http://passportjs.org/)似乎是最好的。你可以在 GitHub 的 node wiki 页面上找到很多有用的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T21:35:50.390

对于单点登录，请查看 Passport-SAML 模块 [https://github.com/bergie/passport-saml](https://github.com/bergie/passport-saml)

# office365 - 调试 Napa Excel 内容示例应用程序时出错

> ID：15986516
> 
> 赞同：0
> 
> 时间：2013-04-13T09:52:14.177
> 
> 标签：office365

我刚刚开始使用 Office 365 Napa 开发工具，并且正在编写用于构建 Excel 内容应用程序的教程 - [http://msdn.microsoft.com/en-us/library/jj220065.aspx](http://msdn.microsoft.com/en-us/library/jj220065.aspx)。问题是，当我运行项目时，它会在显示 excel 页面时给我一个“应用程序错误”。现在，我查看是否已加载所有文件，并且似乎在 appsformicrosoft.com 站点上找不到 office.js 文件。这对我来说似乎很奇怪，因为我知道其他人正在以这种方式开发应用程序，如果该网站出现故障，就会引发一场风暴。现在我将假设某些东西对我来说没有正确设置。所以我想看看是否有其他人遇到过这个问题并能够解决它。任何帮助表示赞赏。

韦德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T03:38:34.037

我遇到了同样的问题，这个问题只发生在你在 Napa 中调试你的应用程序，同时你登录到 MSDN 站点时。

如果您从 MSDN 注销，问题就解决了。

# c# - 打开串行端口后，终端在 OSX 中死机

> ID：15986518
> 
> 赞同：1
> 
> 时间：2013-04-13T09:52:15.900
> 
> 标签：c#, macos, mono, serial-port, xamarin

执行此代码可以按您的预期工作，*但是*随着方法返回，终端会话会变得不稳定。
它确实可以从 MonoDevelop 工作（我在 Windows 中有类似的东西没有问题），但是当从 bash“mono program.exe”调用时它没有。它一直有效，直到我再次收到提示，提示看起来正确，但我无能为力，它完全冻结了。

我在 Lion 中运行 Xamarin Studio 4.0.1。.Net 目标似乎并不重要。

```
using System;
using System.Text;
using System.IO.Ports;

namespace relay
{
    class Program
    {
        static void Main (string[] args)
        {
            string[] ports = SerialPort.GetPortNames ();

            foreach (string name in ports) {
                try {
                    SerialPort port = new SerialPort (name, 9600, Parity.None, 8, StopBits.One);
                    port.Open ();
                    port.Close ();
                }
                catch (SystemException ex)
                {
                    System.Console.WriteLine(ex.Message);
                }
            }
        }
    }
} 
```

# d3.js - SlickGrid：2 个问题：1）更改列标签的方向和 2）在单元格内显示 d3.js 元素

> ID：15986521
> 
> 赞同：1
> 
> 时间：2013-04-13T09:52:34.523
> 
> 标签：d3.js, slickgrid, dashboard

这里是 SlickGrid 的新手，有几个问题：

1）是否可以更改列标签的方向？我想显示一个没有水平滚动的网格，如果我限制每列的宽度，数据可以很容易地适应。但是，如果我这样做，我的列标签没有足够的空间。所以我想知道 - 就像在 excel 中一样 - 我可以改变列标签的方向（比如 45 度与水平）？如果没有，还有其他建议吗？

2) 是否可以在单元格内显示 D3.js 类型的元素（形状等）？如果没有，是否有选项可以显示诸如颜色编码的停车灯类型的东西？

正如您可能已经猜到的那样，我正在构建一个仪表板，它从数据库中的汇总表中提取数据，并且需要视觉效果。这可能在 D3.js 中都是可行的，但我正在寻找一种更快的实现方式，并且数据网格似乎很合适。

# nginx - Nginx 设置全局error_pages

> ID：15986523
> 
> 赞同：1
> 
> 时间：2013-04-13T09:52:38.950
> 
> 标签：nginx

我有一个处于平衡模式的 web nginx 服务器 (server1) - 参与平衡对其他 web 服务器的请求 - server2、server3 等。有时它们之间的连接被切断并且用户收到 504 错误。挑战是在 server1 上显示您的 504 错误页面，并立即将其应用于所有虚拟主机。试图做到这一点：

在 http {

```
error_page 504 = static/504.html; 
```

或者

```
error_page 504 = /tmp/static/504.html; 
```

但它不起作用，我的自定义页面没有显示。

如何自定义所有虚拟主机的本地错误输出而无需编辑每个配置？

附言。我把 http { proxy_intercept_errors 关掉了，但没有结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T07:20:03.927

我的nginx是这样设置的，我认为你的格式可能不正确：

```
# Rails error pages
error_page 500 502 503 504 /500.html;
location = /500.html {
    root /srv/www/public;
} 
```

# asp.net - ASP.NET 生命周期，PreRequestHandlerExecute 事件

> ID：15986525
> 
> 赞同：1
> 
> 时间：2013-04-13T09:52:48.430
> 
> 标签：asp.net, iis-7, event-handling, httphandler, application-lifecycle

我正在研究识别将处理我的请求的处理程序。我想知道请求是否要求静态资源（即 css、js 或图像文件）。在检查 PreRequestHandlerExecute 事件上的 HttpContext.Request 后，我​​发现对于静态资源和任何其他自定义处理程序或 aspx 页面，处理程序和 currentHandler 变量为空，我有处理程序和 currentHandler 变量。

我的问题是：是否是处理请求的不同处理程序的好地方？我不想通过从 system.web/httpHandlers 获取处理程序文件扩展名来识别它，因为我不想只使用 system.web/httpHandlers system.webServer/handlers。而且我不想使用 Microsoft.Web.Administration 命名空间，因为这将使我修改所有服务器上的配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:16:21.437

忘了更新我是如何解决的。实际上，我确实在 PostMapRequestHandler 事件中将原生处理程序与自定义处理程序不同。如果您的请求将由本机处理程序处理，则 HttpContext.Request 的处理程序和 currentHandler 变量将为空。此外，通过将 runAllManagedModulesForAllRequests 设置为将由本机处理程序处理的错误请求，甚至希望引发 PostMapRequestHandler 事件。希望这可以帮助某人。

# listview - 将视图模型绑定到列表视图

> ID：15986527
> 
> 赞同：1
> 
> 时间：2013-04-13T09:52:50.890
> 
> 标签：listview, mvvm, kendo-ui, single-page-application

我正在测试 Kendo UI 的单页应用程序 (SPA) 和 MVVM 功能，但是在将 Viewmodel 绑定到作为页面内容的列表视图时遇到了一些问题......

到目前为止，我所拥有的是：

```
<div id="app">
    <button data-bind="click: gotopage1">Page 1</button>
    <button data-bind="click: gotopage2">Page 2</button>
    <button data-bind="click: gotopage3">Page 3</button>
</div>

<script id="page1" type="text/x-kendo-template">
    <ul id="listView1" data-bind="source: photossource"></ul>
</script>

<script id="page2" type="text/x-kendo-template">
    //content of page 2
</script>

<script id="page3" type="text/x-kendo-template">
    //content of page 3
</script>

<script id="layout" type="text/x-kendo-template">
    <header></header><section id=content></section><footer></footer>
</script>

<script type="text/x-kendo-template" id="templatelistitem">
    <div class="item">
        <img data-bind="attr: { src: this }" />
    </div>
</script>
<script>
    var set1 = new Array();
    var set2 = new Array();
    var set3 = new Array();

    //fill the arrays... they are just strings to put on the `src` attribute of the `img`

    var appViewModel = new kendo.observable({
        gotopage1: function () {
            router.navigate("/");
    },
        gotopage2: function () {
            router.navigate("/page2");
    },
        gotopage3: function () {
            router.navigate("/page3");
    }
    });
    kendo.bind($("#app"), appViewModel);

    var pageViewModel = new kendo.observable({
        photossource: set1
    });

    var page1 = new kendo.View("#page1");
    var page2 = new kendo.View("#page2");
    var page3 = new kendo.View("#page3");

    var layout = new kendo.Layout("#layout");

    var router = new kendo.Router();

    router.route("/", function () {
        pageViewModel.photossource = set1;
        layout.showIn("#content", page1);
    });

    router.route("/page2", function () {
        pageViewModel.photossource = set2;
        layout.showIn("#content", page2);
    });

    router.route("/page3", function () {
        pageViewModel.photossource = set3;
        layout.showIn("#content", page3);
    });

    $(function () {
        router.start();
        layout.render($("#app"));
        layout.showIn("#content", page1);
    });

    $(document).ready(function () {
        $("#listView1").kendoListView({
            template: kendo.template($("#templatelistitem").html())
        });
        kendo.bind($("#listView1"), pageViewModel);
    });
</script> 
```

我需要绑定`pageViewModel`到`listview1`page1。这`pageViewModel`将在 3 个页面上共享。

这给了我以下错误：

> 未捕获的类型错误：无法读取
> kendo.web.min.js:12中未定义的属性“父级”

我的主要问题是：

*   我应该如何将视图模型绑定到列表视图？

*   我需要设置列表视图的数据源吗？

*   我如何`photossource`在列表项的模板中引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-17T18:18:45.930

这是一个毫无例外的[JSFiddle](http://jsfiddle.net/vojtiik/bXXPV/15/)解决方案，我相信功能如您所料。

我改变了很多东西，我并不是说所有的改变都是必要的，但希望这个例子能引导你找到最终的解决方案。

1）[来自模板的视图以](http://docs.kendoui.com/getting-started/framework/spa/view#creating-a-view-from-script-template)不同的方式完成。（我做了硬编码。）

```
 var index = new kendo.View('index'); 
```

2) MVVM 使用的列表视图应按以下[方式创建](http://demos.kendoui.com/web/listview/mvvm.html)

3) 如前所述，您应该将 model.set(key,value) 与您的 observables 一起使用

```
pageViewModel.set("photossource", set1) 
```

4）留意你初始化控件的顺序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-16T13:34:18.657

使用 Kendo UI 视图基本上消除了调用 kendo.bind 的需要。推荐的方法是将[ViewModel 分配给视图](http://docs.kendoui.com/getting-started/framework/spa/view#mvvm-integration)。之后，您可以在必要时填充其照片源字段。顺便说一句，在视图模型上执行的任何操作都应该通过 set 和 get 方法完成。

# javascript - 使用javascript单击按钮上的删除和图像？

> ID：15986528
> 
> 赞同：1
> 
> 时间：2013-04-13T09:52:51.630
> 
> 标签：javascript, html, web

当按下删除按钮时，我想从简单的 HTML 页面中删除图像。我尝试了以下代码，但它不起作用，请帮助。

```
<script>
 function del()
 {
 var Node1 = document.getElementById(“i”);
 Node1.removeChild(Node1.childNodes[0]);
 alert("Image deleted");
 }
 </script>

<img src="file:///C|/Users/momo/Desktop/uf.PNG" id="i"/>
<button onclick="del()">Delete Image</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:16:52.937

在您的代码中：

```
 var Node1 = document.getElementById(“i”);
 Node1.removeChild(Node1.childNodes[0]); 
```

你的`Node1`变量没有子节点，所以它永远不会工作，你需要在`parent`节点上使用它......但我想知道，**隐藏它不适合你的问题吗？**

```
document.getElementById('i').style.display = 'none'; 
```

如果没有，您需要知道该图像的父节点是什么，然后`removeChild`正确使用。

# directx - DirectX11绘制简单三角形

> ID：15986531
> 
> 赞同：0
> 
> 时间：2013-04-13T09:53:03.303
> 
> 标签：directx, directx-11

我尝试使用 DXUT11 绘制一个简单的三角形，但在我的窗口中看不到三角形。
我努力了，但还是找不到问题出在哪里-_-

我检查了 D3D 函数的每个返回值，它们都返回了 S_OK。
我可以看到我的窗口出现了，背景颜色是我设置为清除窗口的颜色，所以看起来 d3d 设备是正确创建的，后台缓冲区被渲染到窗口，但是黄色三角形在哪里？
T_T.......

我的代码如下：（为了简化问题，我删除了所有检查 S_OK 语句）

```
#define WIN32_LEAN_AND_MEAN
#include <Windows.h>
#include <d3d11.h>
#define DXUT_AUTOLIB
#include <DXUT.h>
#include <DXUTres.h>
#include <D3DX11.h>
#include <xnamath.h>
using namespace std;

#pragma comment(lib,"d3d11.lib")
#pragma comment(lib,"dxut.lib")

ID3D10Blob * g_pVertexShaderBuffer = 0;
ID3D10Blob * g_pPixelShaderBuffer = 0;
ID3D11VertexShader * g_pVertexShader = 0;
ID3D11PixelShader * g_pPixelShader = 0;
ID3D11InputLayout * g_pInputLayout = 0;

ID3D11Buffer * g_pVertexBuffer = 0;
ID3D11Buffer * g_pIndexBuffer = 0;

struct Vertex
{
XMFLOAT3 pos;
};

bool CALLBACK IsD3D11DeviceAcceptable( const CD3D11EnumAdapterInfo *AdapterInfo, UINT Output, const CD3D11EnumDeviceInfo *DeviceInfo,
                       DXGI_FORMAT BackBufferFormat, bool bWindowed, void* pUserContext )
{
    return true;
}

HRESULT CALLBACK onDeviceCreated( ID3D11Device* pd3dDevice, const DXGI_SURFACE_DESC* pBackBufferSurfaceDesc, void* pUserContext )
{
    ID3D11DeviceContext * pd3dImmediateContext = DXUTGetD3D11DeviceContext();
    ID3D10Blob * err = NULL;
    D3DX11CompileFromFile(L"Tutorial03.fx",0,0,"VS","vs_4_0",D3DCOMPILE_DEBUG|D3DCOMPILE_SKIP_OPTIMIZATION,0,0,&g_pVertexShaderBuffer,&err,0);
    D3DX11CompileFromFile(L"Tutorial03.fx",0,0,"PS","ps_4_0",D3DCOMPILE_DEBUG|D3DCOMPILE_SKIP_OPTIMIZATION,0,0,&g_pPixelShaderBuffer,&err,0);

    HRESULT res = 0;
    res = pd3dDevice->CreateVertexShader(g_pVertexShaderBuffer->GetBufferPointer(),g_pVertexShaderBuffer->GetBufferSize(),NULL,&g_pVertexShader);
    res = pd3dDevice->CreatePixelShader(g_pPixelShaderBuffer->GetBufferPointer(),g_pPixelShaderBuffer->GetBufferSize(),NULL,&g_pPixelShader);

    pd3dImmediateContext->VSSetShader(g_pVertexShader,0,0);
    pd3dImmediateContext->PSSetShader(g_pPixelShader,0,0);

    D3D11_INPUT_ELEMENT_DESC inputElement[]=
    {
    {"POSITION",0,DXGI_FORMAT_R32G32B32_FLOAT,0,0, D3D11_INPUT_PER_VERTEX_DATA,0}
    };

    int numElements = sizeof(inputElement)/sizeof(inputElement[0]);
    pd3dDevice->CreateInputLayout(inputElement ,numElements,g_pVertexShaderBuffer->GetBufferPointer(),g_pVertexShaderBuffer->GetBufferSize(),&g_pInputLayout);
    SAFE_RELEASE(g_pVertexShaderBuffer);
    SAFE_RELEASE(g_pPixelShaderBuffer);

    Vertex vertexData[3];
    vertexData[0].pos=XMFLOAT3(0.0f, 0.5f, 0.5f);
    vertexData[1].pos=XMFLOAT3(0.5f, -0.5f, 0.5f);
    vertexData[2].pos=XMFLOAT3( -0.5f, -0.5f, 0.5f );

    D3D11_BUFFER_DESC desc;
    ZeroMemory(&desc,sizeof(desc));
    desc.BindFlags = D3D11_BIND_VERTEX_BUFFER;
    desc.ByteWidth = sizeof(Vertex) * 3;
    desc.CPUAccessFlags = 0;
    desc.MiscFlags = 0;
    desc.Usage = D3D11_USAGE_DEFAULT;

    D3D11_SUBRESOURCE_DATA dataPointer;
    ZeroMemory(&dataPointer,sizeof(dataPointer));
    dataPointer.pSysMem = vertexData;
    pd3dDevice->CreateBuffer(&desc,&dataPointer,&g_pVertexBuffer);
    UINT stride = sizeof(Vertex);
    UINT offset = 0;
    pd3dImmediateContext->IASetVertexBuffers(0,1,&g_pVertexBuffer,&stride,&offset);
    pd3dImmediateContext->IASetInputLayout(g_pInputLayout);
    pd3dImmediateContext->IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST);
    return 0;
}

void CALLBACK onRender( ID3D11Device* pd3dDevice, ID3D11DeviceContext* pd3dImmediateContext, double fTime, float fElapsedTime, void* pUserContext )
{
    float ClearColor[4] = { 0.0f, 0.25f, 0.25f, 0.55f };
    ID3D11RenderTargetView* pRTV = DXUTGetD3D11RenderTargetView();
    pd3dImmediateContext->ClearRenderTargetView( pRTV, ClearColor );
    pd3dImmediateContext->Draw(3,0);
}

void CALLBACK onDestroyed( void* pUserContext )
{
    SAFE_RELEASE(g_pIndexBuffer);
    SAFE_RELEASE(g_pVertexBuffer);
    SAFE_RELEASE(g_pInputLayout);
    SAFE_RELEASE(g_pPixelShader);
    SAFE_RELEASE(g_pVertexShader);
}

int WINAPI WinMain(HINSTANCE hInstance,HINSTANCE hPrevInstance,LPSTR lpCmdLine,int nShowCmd)
{

    DXUTSetCallbackD3D11DeviceAcceptable( IsD3D11DeviceAcceptable );
    DXUTSetCallbackD3D11DeviceCreated(onDeviceCreated);
    DXUTSetCallbackD3D11FrameRender(onRender);
    DXUTSetCallbackD3D11DeviceDestroyed(onDestroyed);

    DXUTInit();
    DXUTCreateWindow(L"SMD",hInstance);
    DXUTCreateDevice(D3D_FEATURE_LEVEL_11_0,true,300,300);
    DXUTMainLoop();
    return 0;
} 
```

希望有人有耐心阅读所有这些长代码 -_-
和我的着色器代码：

```
float4 VS( float4 Pos : POSITION ) : SV_POSITION
{
    return Pos;
}
float4 PS( float4 Pos : SV_POSITION ) : SV_Target
{
    return float4( 1.0f, 1.0f, 0.0f, 1.0f );    // Yellow, with Alpha = 1
} 
```

该程序单独运行良好，但是当我尝试使用 PIX 跟踪它时，它崩溃并返回以下信息：

```
.PRE: <this=0x06736580>ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 24, 0x008DE4FC)
Frame 000001 ........POST: <S_OK><this=0x06736580> ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 24, 0x008DE4FC)
Frame 000001 ........PRE: <this=0x06736580>ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 25, 0x008DE4FC)
Frame 000001 ........POST: <S_OK><this=0x06736580> ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 25, 0x008DE4FC)
Frame 000001 ........PRE: <this=0x06736580>ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 26, 0x008DE4FC)
Frame 000001 ........POST: <S_OK><this=0x06736580> ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 26, 0x008DE4FC)
Frame 000001 ........PRE: <this=0x06736580>ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 27, 0x008DE4FC)
Frame 000001 ........POST: <S_OK><this=0x06736580> ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 27, 0x008DE4FC)
Frame 000001 ........PRE: <this=0x06736580>ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 28, 0x008DE4FC)
Frame 000001 ........POST: <S_OK><this=0x06736580> ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 28, 0x008DE4FC)
Frame 000001 ........PRE: <this=0x06736580>ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 29, 0x008DE4FC)
Frame 000001 ........POST: <S_OK><this=0x06736580> ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 29, 0x008DE4FC)
Frame 000001 ........PRE: <this=0x06736580>ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 30, 0x008DE4FC)
Frame 000001 ........POST: <S_OK><this=0x06736580> ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 30, 0x008DE4FC)
Frame 000001 ........PRE: <this=0x06736580>ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 31, 0x008DE4FC)
Frame 000001 ........POST: <S_OK><this=0x06736580> ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 31, 0x008DE4FC)
Frame 000001 ........PRE: <this=0x06736580>ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 32, 0x008DE4FC)
Frame 000001 ........POST: <S_OK><this=0x06736580> ID3D11Device::CheckMultisampleQualityLevels(DXGI_FORMAT_R8G8B8A8_UNORM_SRGB, 32, 0x008DE4FC)
Frame 000001 ........PRE: <this=0x06736580>ID3D11Device::Release()
Frame 000001 ........POST: <1><this=0x06736580> ID3D11Device::Release()
Frame 000001 ........PRE: <this=0x067ffa30>ID3D11DeviceContext::Release()
Frame 000001 ............PRE: RemoveObject(D3D11 Device Context, 0x067FFA30, 0x00C5F11C)
Frame 000001 ............POST: <> RemoveObject(D3D11 Device Context, 0x067FFA30, 0x00C5F11C)
Frame 000001 ............PRE: RemoveObject(D3D11 Device, 0x06736580, 0x00C3F384)
Frame 000001 ............POST: <> RemoveObject(D3D11 Device, 0x06736580, 0x00C3F384)
Frame 000001 ............PRE: RemoveObject(DXGI Device, 0x0672AC80, 0x00C3F07C)
Frame 000001 ............POST: <> RemoveObject(DXGI Device, 0x0672AC80, 0x00C3F07C)
Frame 000001 ............PRE: RemoveObject(DXGI Adapter, 0x06736B40, 0x07651C68)
Frame 000001 ............POST: <> RemoveObject(DXGI Adapter, 0x06736B40, 0x07651C68)
Frame 000001 ............PRE: RemoveObject(DXGI Factory, 0x06729D08, 0x00C31828)
Frame 000001 ............POST: <> RemoveObject(DXGI Factory, 0x06729D08, 0x00C31828)
Frame 000001 ........POST: <0><this=0x067ffa30> ID3D11DeviceContext::Release()
Frame 000001 ........PRE: <this=0x06775320>IDXGIFactory::EnumAdapters(2, 0x008DEA44)
Frame 000001 ........POST: <DXGI_ERROR_NOT_FOUND><this=0x06775320> IDXGIFactory::EnumAdapters(2, 0x008DEA44)
Frame 000001 ........PRE: D3DPERF_EndEvent()
Frame 000001 ........POST: <-1> D3DPERF_EndEvent()
Frame 000001 ........PRE: <this=0x0678df30>IDXGIOutput::GetDesc(0x008DEB20)
Frame 000001 ........POST: <S_OK><this=0x0678df30> IDXGIOutput::GetDesc(0x008DEB20)
Frame 000001 ........PRE: <this=0x0678df30>IDXGIOutput::GetDesc(0x008DEB20)
Frame 000001 ........POST: <S_OK><this=0x0678df30> IDXGIOutput::GetDesc(0x008DEB20)
Frame 000001 ........PRE: <this=0x0678df30>IDXGIOutput::GetDesc(0x008DEB20)
Frame 000001 ........POST: <S_OK><this=0x0678df30> IDXGIOutput::GetDesc(0x008DEB20)
Frame 000001 ........PRE: <this=0x0678df30>IDXGIOutput::GetDesc(0x008DEB20)
Frame 000001 ........POST: <S_OK><this=0x0678df30> IDXGIOutput::GetDesc(0x008DEB20)
Frame 000001 ........PRE: <this=0x0678df30>IDXGIOutput::GetDesc(0x008DEB20)
Frame 000001 ........POST: <S_OK><this=0x0678df30> IDXGIOutput::GetDesc(0x008DEB20)
Frame 000001 ........PRE: <this=0x0678df30>IDXGIOutput::GetDesc(0x008DEB20)
Frame 000001 ........POST: <S_OK><this=0x0678df30> IDXGIOutput::GetDesc(0x008DEB20)
Frame 000001 ........PRE: <this=0x06775320>IDXGIFactory::MakeWindowAssociation(0x005305E0, 0)
Frame 000001 ........POST: <S_OK><this=0x06775320> IDXGIFactory::MakeWindowAssociation(0x005305E0, 0)
Frame 000001 ........PRE: <this=0x06775320>IDXGIFactory::EnumAdapters1(0, 0x008DEE18)
Frame 000001 ............PRE: AddObject(DXGI Adapter, 0x067368D8, 0x07651C68)
Frame 000001 ............POST: <TRUE> AddObject(DXGI Adapter, 0x067368D8, 0x07651C68)
Frame 000001 ........POST: <S_OK><this=0x06775320> IDXGIFactory::EnumAdapters1(0, 0x008DEE18)
Frame 000001 ........PRE: D3D11CreateDevice(0x067368D8, D3D_DRIVER_TYPE_UNKNOWN, NULL, 2, 0x00A21AA4, 1, 7, 0x008DEE60, 0x008DEE48, 0x008DEE54)
Frame 000001 ............PRE: AddObject(D3D11 Device, 0x0672AB00, 0x00C3D4D4)
Frame 000001 ............POST: <TRUE> AddObject(D3D11 Device, 0x0672AB00, 0x00C3D4D4)
Frame 000001 ............PRE: AddObject(DXGI Device, 0x0672A6E0, 0x00C3D4D0)
Frame 000001 ............POST: <TRUE> AddObject(DXGI Device, 0x0672A6E0, 0x00C3D4D0)
Frame 000001 ............PRE: AddObject(D3D11 Device Context, 0x06807880, 0x075C6800)
Frame 000001 ............POST: <TRUE> AddObject(D3D11 Device Context, 0x06807880, 0x075C6800)
Frame 000001 ........POST: <S_OK> D3D11CreateDevice(0x067368D8, D3D_DRIVER_TYPE_UNKNOWN, NULL, 2, 0x00A21AA4, 1, 7, 0x008DEE60, 0x008DEE48, 0x008DEE54)
Frame 000001 ........PRE: <this=0x0672ab00>ID3D11Device::QueryInterface(IID_IDXGIDevice1, 0x008DEE00)
Frame 000001 ........POST: <S_OK><this=0x0672ab00> ID3D11Device::QueryInterface(IID_IDXGIDevice1, 0x008DEE00)
Frame 000001 ........PRE: <this=0x0672a6e0>IDXGIDevice::Release()
Frame 000001 ........POST: <2><this=0x0672a6e0> IDXGIDevice::Release()
Frame 000001 ........PRE: <this=0x0672ab00>ID3D11Device::CreateRasterizerState(0x008DEDC4, 0x008DEDB8)
Frame 000001 ............PRE: AddObject(D3D11 Rasterizer State, 0x0672B350, 0x00C14DD4)
Frame 000001 ............POST: <TRUE> AddObject(D3D11 Rasterizer State, 0x0672B350, 0x00C14DD4)
Frame 000001 ........POST: <S_OK><this=0x0672ab00> ID3D11Device::CreateRasterizerState(0x008DEDC4, 0x008DEDB8)
Frame 000001 ........PRE: <this=0x0672b350>ID3D11RasterizerState::SetPrivateData({0x429b8c22, 0x9188, 0x4b0c, 0x87, 0x42, 0xac, 0xb0, 0xbf, 0x85, 0xc2, 0x00}, 12, 0x01114E74)
Frame 000001 ........POST: <S_OK><this=0x0672b350> ID3D11RasterizerState::SetPrivateData({0x429b8c22, 0x9188, 0x4b0c, 0x87, 0x42, 0xac, 0xb0, 0xbf, 0x85, 0xc2, 0x00}, 12, 0x01114E74)
Frame 000001 ........PRE: <this=0x06807880>ID3D11DeviceContext::RSSetState(0x0672B350)
Frame 000001 ........POST: <><this=0x06807880> ID3D11DeviceContext::RSSetState(0x0672B350)
Frame 000001 ........PRE: <this=0x067368d8>IDXGIAdapter::EnumOutputs(0, 0x008DED94)
Frame 000001 ............PRE: AddObject(DXGI Output, 0x06736A90, 0x0764B090)
Frame 000001 ............POST: <TRUE> AddObject(DXGI Output, 0x06736A90, 0x0764B090)
Frame 000001 ........POST: <S_OK><this=0x067368d8> IDXGIAdapter::EnumOutputs(0, 0x008DED94)
Frame 000001 ........PRE: <this=0x06736a90>IDXGIOutput::Release()
Frame 000001 ............PRE: RemoveObject(DXGI Output, 0x06736A90, 0x0764B090)
Frame 000001 ............POST: <> RemoveObject(DXGI Output, 0x06736A90, 0x0764B090)
Frame 000001 ........POST: <0><this=0x06736a90> IDXGIOutput::Release()
Frame 000001 ........PRE: <this=0x067368d8>IDXGIAdapter::EnumOutputs(1, 0x008DED94)
Frame 000001 ........POST: <DXGI_ERROR_NOT_FOUND><this=0x067368d8> IDXGIAdapter::EnumOutputs(1, 0x008DED94)
Frame 000001 ........PRE: <this=0x067368d8>IDXGIAdapter::EnumOutputs(0, 0x00A21BD0)
Frame 000001 ............PRE: AddObject(DXGI Output, 0x06736E00, 0x0764B090)
Frame 000001 ............POST: <TRUE> AddObject(DXGI Output, 0x06736E00, 0x0764B090)
Frame 000001 ........POST: <S_OK><this=0x067368d8> IDXGIAdapter::EnumOutputs(0, 0x00A21BD0)
Frame 000001 ........PRE: <this=0x06775320>IDXGIFactory::CreateSwapChain(0x0672AB00, 0x00A21A54, 0x008DEE3C)
Frame 000001 ............PRE: AddObject(DXGI Swap Chain, 0x0672B3C8, 0x00C3F048)
Frame 000001 ............POST: <TRUE> AddObject(DXGI Swap Chain, 0x0672B3C8, 0x00C3F048)
Frame 000001 ............PRE: AddObject(DXGI Surface, 0x0672ACE0, 0x074C4D80)
Frame 000001 ............POST: <TRUE> AddObject(DXGI Surface, 0x0672ACE0, 0x074C4D80)
Frame 000001 ............PRE: AddObject(D3D10 Texture2D, 0x067755C0, 0x074C4D28)
Frame 000001 ............POST: <TRUE> AddObject(D3D10 Texture2D, 0x067755C0, 0x074C4D28)
Frame 000001 ........POST: <S_OK><this=0x06775320> IDXGIFactory::CreateSwapChain(0x0672AB00, 0x00A21A54, 0x008DEE3C)
Frame 000001 ........PRE: <this=0x0672b3c8>IDXGISwapChain::GetBuffer(0, IID_ID3D11Texture2D, 0x008DEC2C)
Frame 000001 ........POST: <S_OK><this=0x0672b3c8> IDXGISwapChain::GetBuffer(0, IID_ID3D11Texture2D, 0x008DEC2C)
Frame 000001 ........PRE: <this=0x067755c0>ID3D10Texture2D::Map(9300960, Unknown D3D10_MAP, 9301104, NULL)
D3D11 CORRUPTION: ID3D10Texture2D::Map: Fourth parameter is corrupt or NULL. [ MISCELLANEOUS CORRUPTION #16: CORRUPTED_PARAMETER4]
An unhandled exception occurred. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:07:48.617

问题解决了，谢谢大家~

我在“onRender”函数中清除了Z缓冲区和模板缓冲区，三角形终于出现了！！！DX SDK 2010 年 6 月使用 DirectX11 的教程 03 没有清除“onFrameRender”中的 Z 缓冲区，但显示三角形没有问题。也许我错过了一些细节

# c++ - 具有成员变量向量的 C++ 类

> ID：15986538
> 
> 赞同：3
> 
> 时间：2013-04-13T09:53:23.733
> 
> 标签：c++, class, vector

我有一个任务是建立一个国家度假村的信息系统，能够从/到文件中读取/写入度假村的数据并对其进行修改。

```
class CTоurist{
    string m_StrName;
    string m_StrCountry;
    int m_iAge;
public:
    //constructors, mutators, accessors overloading operator <<,>>

}; 
```

我写这门课没有问题。在这里我有一个类，它包含第一类对象的成员变量向量

```
class CHotel
{
    string m_strHotelName;
    int m_iNumberOfBets;
    double m_dAveragePrice; //average price per bet in the hotel
    vector <CTourist> m_vecTourists; //vector of tourists rested in the hotel
public:
.....
}; 
```

还有一个类 Resort 包含作为第二类对象的成员变量向量

```
class CResort
{
    string m_ResortName;
    unsigned m_Height;
    vector<CHotel*> m_Hotels;
public:
.....
}; 
```

所以这就是问题所在。我不确定如何为该向量变量编写访问器、修改器和构造器，以便我可以使用它们的属性。感谢您的检查，如果有人能帮我弄清楚这些功能，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:18:41.617

如果我理解正确，您想知道从 cResort 获得酒店的最佳方式。

我会推荐

```
cHotel* GetHotelByName(std::string& a_sName)
{
    for(int i = 0; i < m_Hotels.size(); ++i)
    {
        if(m_Hotel[i].GetName() == a_sName)
            return m_Hotel[i]
    }
return nullptr; // if non found return return null
} 
```

并向您的酒店类添加一个 GetName 函数，该函数返回其名称的字符串。这也允许您设置名称等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:19:27.523

1) Accessor, mutator：有很多选择。

您可以创建另一个像`CTouristList`（和`CHotelList`分别）这样的类，它包装`vector`，从`CHotel`类中引用它（访问器方法像`CTouristList& CHotel::GetTouristList()`and `const CTouristList& CHotel::GetTouristList() const`）并实现像`CTouristList::Add`, `CTouristList::Remove`,`CTouristList::Get`等方法。

或者您可以`CHotel::AddTourist()`直接在`CHotel`类上添加方法。

2) 构造函数。构造函数中不需要任何东西。但是因为`vector<CHotel*>`您可能需要析构函数`CResort`来显式释放`CHotel`实例。虽然不确定为什么要使用指向`CHotel`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T10:24:19.980

您可以将访问器和修改器函数放在 CTourist 中，就像它们没有存储在 Vector 中一样。

要在 CHotel 中使用它们，您可以在 CHotel 中添加一个函数，该函数返回指向 CTourist 的指针。

```
// Access a CTourist
Hotel.getTourist(1)->setName("Tourist name"); 
```

添加一个返回访问过酒店的游客数量的方法将更容易循环访问它们。

```
for(int i = o; i < Hotel.touristCount(); ++i)
{
  // Do something useful
  std:: cout << "Hello " << Hotel.getTourist(i)->getName();
} 
```

在这种情况下，您的 CHotel::touristCount() 将是 vector<>.size(); 的包装器；

如果您不希望 CHotel 外部的代码直接访问 CTourist 对象，则在 CHotel 中创建包装函数来执行您希望在外部执行的操作。

即 std::cout << Hotel.getTouristName(1);

代替

std::cout << Hotel.getTourist(1)->getName();

# php - 使用标头重定向后会话变量丢失

> ID：15986539
> 
> 赞同：0
> 
> 时间：2013-04-13T09:53:30.770
> 
> 标签：php, session, header

我想在登录过程后将一些信息存储在会话变量中。我可以成功地在登录发布方法中打印会话变量。即，我可以填写会话变量。如果用户成功登录，我将重定向到索引，但我的会话变量变为空。

我的登录帖子页面：

```
 if($totalRows_Recordset1>0)
    {
        session_start();
        $_Session['Mail']=$un;
        $_Session['Password']=$p;

        header("location: Index.php"); 
        die();

    } 
```

我的索引页面：

```
<?php session_start(); echo $_Session['Mail']; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:57:45.550

`$_SESSION`需要大写，区分大小写。打印 $_Session 是因为您声明了一个名为 $_Session 的局部变量。让我知道它是否有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:33:19.897

是的....大写 $_SESSION 试试这个 $_SESSION['mail']=$un;

然后在索引页... echo $_SESSION['mail'];

# windows - 无法在 Visual Studio 2012 'ReferenceManagerPackage' 中添加引用

> ID：15986541
> 
> 赞同：5
> 
> 时间：2013-04-13T09:53:35.353
> 
> 标签：windows, visual-studio, visual-studio-2012, reference

最近我遇到了这个问题，每当我右键单击“添加引用...”时，它都会给我一个错误，如下所述。

包 'ReferenceManagerPackage' 未能加载。

尝试重新安装 Visual Studio 2012，但它仍然无法正常工作。

之前没遇到过这个问题。

编辑：512 2013/04/14 00:49:11.860 错误 VisualStudio CreateInstance 包 [ReferenceManagerPackage] {48D4A2C1-02AD-4F18-9153-620511BACB7B} 失败

* * *

80131522 无法从程序集“Microsoft.VisualStudio.Shell.Interop.11.0，版本=11.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a”加载类型“Microsoft.VisualStudio.Shell.Interop.IVsReferenceManager2”。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-03-14T19:03:46.903

安装 Visual Studio 2017 后，我刚刚收到此错误。

解决方法如下。

1.  发射`Developer Command Prompt for VS 2017`
2.  `CD C:\Program Files\Microsoft Visual Studio\2017\Community\Common7\IDE\PublicAssemblies` - 或 - C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\IDE\PublicAssemblies
3.  跑`gacutil -i Microsoft.VisualStudio.Shell.Interop.11.0.dll`

你现在应该看到

```
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.0
Copyright (c) Microsoft Corporation.  All rights reserved.

Assembly successfully added to the cache 
```

重新启动 Visual Studio，希望一切都会好起来，您可以添加引用。

该文件`C:\Users\USER\AppData\Roaming\Microsoft\VisualStudio\15.0_cc9cc69a\ActivityLog.xml`对于调试可能导致问题的任何其他程序集很有用。令人讨厌的是，当被要求不再看到错误消息时，点击它是非常诱人`No`的，这将抑制错误和这条路径，所以我想我会把它贴在这里以供参考。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-15T22:47:17.680

我刚刚遇到了同样的错误（我得到它的方式不同）并将程序集添加回 GAC 对我来说是成功的。从 VS 2012 命令提示符（以管理员身份）我输入...

gacutil -i Microsoft.VisualStudio.Shell.Interop.11.0.dll

现在，我的情况有所不同，我必须卸载 VS 2012 Update 2（因为它弄乱了我的源代码控制，我无法签入任何内容）。在将系统还原到较早的日期后，我无法在 VS 2012 中打开添加引用对话框。我在磁盘上寻找这个 DLL 但它已经消失了，所以我从另一台机器上复制了它，将它添加到 GAC 和瞧，我又恢复了运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-14T08:35:54.133

我以前有这个问题。如果我记得这样做的原因，基本上你的 gac 中有那个特定的二进制文件。我猜你最近更新了 Visual Studio。尽管它修补了磁盘上的 dll，但它很可能是从尚未更新的 gac 加载 dll。只需 regac dll 就可以了。

**编辑**

对不起，那是我的错。regac 不是一个实际的命令，我只是意味着你必须再次将项目添加到 gac。

启动 Visual Studio 命令提示符并运行此命令`gacutil /i <path_to_assembly>`，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-14T15:09:24.583

在我的工作站上，我没有 VS Shell Interop DLL，因为我没有安装 Visual Studio SDK。要执行此壮举，您需要从[Download Center -> Microsoft Visual Studio 2012 SDK 获取 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=30668)。我敢打赌，一旦安装，问题就会消失。

为了真正解决这个问题，我会附加另一个 Visual Studio 或其他一些调试器，并将其设置为在第一次出现类型加载异常时中断。然后检查您的调用堆栈并在此处报告。

# php - 将多个 MySQL 查询合并为 1

> ID：15986543
> 
> 赞同：1
> 
> 时间：2013-04-13T09:53:42.680
> 
> 标签：php, mysql

我正在尝试显示一个当前使用多个 MySQL 查询的汇总表，我想知道是否可以将它们组合成一个。

我有一个名为“付款”的表格，其中包含字段金额和货币，我正在尝试显示每种货币的汇总表。举个例子：

```
<table>
  <tr>
    <td>USD</td>
    <td>EUR</td>
    <td>GBP</td>
  </tr>
  <tr>
  <? $q1 = mysqli_query("SELECT sum(amount) as total_USD from payments WHERE currency='USD'");
  while($row1 = mysqli_fetch_assoc($q1)){ ?>                
    <td><? echo number_format($row1['total_USD'],0); ?></td>
  <? } ?>

  <? $q2 = mysqli_query("SELECT sum(amount) as total_EUR from payments WHERE currency='EUR'");
  while($row2 = mysqli_fetch_assoc($q2)){ ?>                
    <td><? echo number_format($row2['total_EUR'],0); ?></td>
  <? } ?>

  <? $q3 = mysqli_query("SELECT sum(amount) as total_GBP from payments WHERE currency='GBP'");
  while($row3 = mysqli_fetch_assoc($q3)){ ?>                
    <td><? echo number_format($row3['total_GBP'],0); ?></td>
  <? } ?>
  </tr>
</table> 
```

实际上，我使用 12 种货币，所以我有 12 个单独的查询，但感觉效率低下，所以我想知道是否有更简单的方法来实现相同的结果？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T09:54:35.983

```
SELECT currency,
       SUM(amount) as total
  FROM payments
 GROUP BY currency 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T10:07:00.647

```
 Solution 1:
       SELECT currency, SUM(amount) as total FROM payments GROUP BY currency
     Solution 2 :

   $currencies=array(USD,EUR,GBP,...);
    foreach($currencies as $currency){
      $q1= mysqli_query("SELECT sum(amount) as total from payments WHERE currency='".$currency."'");  
     while($row1 = mysqli_fetch_assoc($q1)){                
        echo number_format($row1['total'],0); 
       } 
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T09:55:20.290

您可以在此处使用 GROUP BY。

```
SELECT currency, SUM(amount) as total FROM payments GROUP BY currency 
```

[http://dev.mysql.com/doc/refman/5.1/en/group-by-modifiers.html](http://dev.mysql.com/doc/refman/5.1/en/group-by-modifiers.html)

# scala - Akka、Scalatra 和 Web 状态问题

> ID：15986544
> 
> 赞同：5
> 
> 时间：2013-04-13T09:53:47.570
> 
> 标签：scala, akka, scalatra

这是一个由两部分组成的问题，首先是设计问题而不是如何实现它，其次是 Akka 的一些实现问题。

我正在使用 Scalatra 构建一个 REST 服务端点，调用该端点时将从多个源中提取图像，对其进行操作并返回它们。这可能是一个相当长的运行过程，并且可能比单个 http 请求/响应周期可以接受的时间更长。

我对此的想法是，当进行调用时，我将启动一堆 akka Actor 来提取图像资源，并让他们将结果交给图像处理 Actor 以进行缩放等。初始请求本身会立即返回某种处理 ID，可用于对另一个端点进行后续轮询调用，该端点将在处理结果时返回结果，并带有一个标志以确定是否有更多结果可让客户端知道停止轮询。

我的问题如下：

1.  从设计的角度来看，这有意义吗？
2.  如果我使用这种方法，那么每个后续请求以检索已处理的图像都必须具有某种状态意识才能知道客户端已经收到了哪些图像。你将如何管理这种状态？
3.  我从来没有看过这个，但是在这种情况下，长时间运行的彗星式 HTTP 请求会比轮询更有意义吗？

**实施部分**

假设我最终得到了类似于上面的设计，我对 Scalatra 和 Akka（或任何 Actor 范例）非常陌生，我有几个问题。

好的，第一个是我*认为*的 Scala/Scalatra 特定问题。好的，我查看了 akka [http://www.scalatra.org/guides/async/akka.html](http://www.scalatra.org/guides/async/akka.html)上的 Scalatra 文档，在此示例中，他们设置应用程序引导程序如下：

```
 // Get a handle to an ActorSystem and a reference to one of your actors
  val system = ActorSystem()
  val myActor = system.actorOf(Props[MyActor])

  // In the init method, mount your servlets with references to the system
  // and/or ActorRefs, as necessary.
  override def init(context: ServletContext) {
    context.mount(new PageRetriever(system), "/*")
    context.mount(new MyActorApp(system, myActor), "/actors/*")
  } 
```

我假设 scalatra 的引导在应用程序启动时发生一次，那么 system.actorOf(Props[MyActor]) 是创建一个实例还是每个请求一个实例？

其次，假设我的 MyActor 类（或更合理的名称）做了以下事情：

```
class MyActor extends Actor {
  def receive = {
    //Find the [ImageSearchingActor] actor in akka registry and send search message
    case initiateSearchRequest: InitiateSearchRequestMessage => TODO

    //Find free [ImageProcessingActors] in akka registry and send each Image url to process  
    case imageInformationFound : ImageInformationFoundMessage => TODO

    //Persist the result to a cache, or data store with the ProcessingId that all message will pass  
    case imageProcessed : ImageProcessedMessage =>  TODO
  }
} 
```

现在，在这种情况下，我将在多个地方检索图像，因此多个 Actor 将获取这些数据。当他们找到合适的图像时，将使用几个 Actor 来处理图像。如果我采用我的设计，那么我需要在某个地方标记对于给定的 ProcessingId 没有更多可用的处理图像。这意味着我需要知道给定 ProcessingId 的所有图像搜索和图像处理参与者何时完成。我该怎么做呢？

所以这是一个很多问题，我希望它是有道理的消费信息。

干杯。克里斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T10:45:41.803

这里有很多问题。快速回答：

1.  是的，我想是这样。

2.  您可能希望将一个 Actor 类用作聚合器、主控器或协调器，从而启动图像检索和图像处理 Actor 类。然后，聚合器包含您的整体计算何时可以被视为完成的逻辑。互联网上有很多此类事情的示例，如果您想要具体示例与您正在做的事情相匹配，请确保查看 Akka 2.1.x 示例，因为这可能是您需要的重新使用当前的 Scalatra 代码库。

3.  这可能是个好主意。Scalatra 与 Atmosphere 框架集成，这使得进行 websocket/comet 长轮询非常容易。[您可以在 docs](http://www.scalatra.org/2.2/guides/async/atmosphere.html)中阅读。它是否对您的应用程序有意义取决于很多因素，但值得一看。以我的经验，套接字编程有时会令人惊叹，有时比它的价值更麻烦 - 例如，如果您要通过大量代理，除非使用 SSL，否则 websockets 会出现问题。不过，看到信息一旦可用就被推送到客户端是一件很美好的事情。

对于另一个问题，关于 ActorSystem 创建：

在 Scalatra 中，您的控制器是根据每个请求实例化的；您的示例代码中的 ActorSystem 只会被初始化一次。每当有请求进来时，就会创建一个新的控制器实例，并引用 ActorSystem。

ActorSystem 创建是[一个重量级操作](https://stackoverflow.com/questions/10396552/do-i-need-to-re-use-the-same-akka-actorsystem-or-can-i-just-create-one-every-tim)，应该尽可能少地发生。

# php - PHP 正则表达式百分比或货币

> ID：15986557
> 
> 赞同：0
> 
> 时间：2013-04-13T09:55:44.267
> 
> 标签：php, regex

我需要能够在 PHP 中提取以下内容，这让我发疯。

以下面的字符串为例：

`$text = "Nalgene Narrow-Mouth Loop-Top 16-oz. Water Bottle for $4 + pickup and %40 off at REI";`

一方面，我需要能够提取：

`$4 as extracted currency`

和

`%40 as extracted percentage`

并区分哪个是货币，哪个是百分比。

为了让它更复杂一点，如果货币是，我也应该抓住它：

`$4.11 or $ 4.10 (not the spacing and the comma)`

或者如果百分比是：

`% 40 (note the spacing)`

我真的卡住了，谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:03:21.357

```
$text = "Nalgene Narrow-Mouth Loop-Top 16-oz. Water Bottle for $4.3 + pickup and % 40 off at REI";
preg_match('/%([ 0-9]+?) /', $text, $matches);
print_r($matches);
preg_match('/\$([ .0-9]+?) /', $text, $matches);
print_r($matches); 
```

# c - PyObject_New 的分段错误

> ID：15986558
> 
> 赞同：2
> 
> 时间：2013-04-13T09:56:00.137
> 
> 标签：c, data-structures, python-2.7, segmentation-fault, cython

我正在尝试为 python 编写一个 C 扩展。这个扩展基本上只是一个双链表。

以下是我编写的代码中的部分内容：-

```
staticforward PyTypeObject linked_list_type;

typedef struct _linked_list_object{
    PyObject_HEAD
    int val;
    struct _linked_list_object *prev;
    struct _linked_list_object *next;
} linked_list_object;

//this method adds a new node to the linked list
static linked_list_object* add_node(linked_list_object * obj, int val)
{
    linked_list_object* new;

    new = PyObject_New(linked_list_object, &linked_list_type);
    if (new){
        new->val = val;
        if (obj)
        {
            new->prev = obj;
            new->next = obj->next;
            obj->next = new;
            new->next->prev = new;
        }
        else{
            new->next = new;
            new->prev = new;
        }
        return new;
        }
        else
        {
        return NULL;
        } 
```

在我编译这个模块并将其导入 python 之后。

该代码引发分段错误。

```
>>> import linked_list
Segmentation fault: 11 (core dumped) 
```

我注意到如果我注释掉，则不会生成此分段错误

```
new = PyObject_New(linked_list_object, &linked_list_type); 
```

以及它下面的代码。

有人可以帮我解释为什么会发生这种分段错误。？

我知道我错过了一些东西，但我无法弄清楚它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:59:33.223

根据Python 文档中的[这个示例](http://docs.python.org/release/2.2.3/ext/dnt-basics.html)，我认为问题在于您没有提供完全初始化的linked_list_type。

在该示例中 noddy_NoddyType 等同于您的代码中的linked_list_type，您将在顶部看到它们：

```
staticforward PyTypeObject noddy_NoddyType; 
```

像你所做地。

然而，他们有：

```
static PyTypeObject noddy_NoddyType = {
    PyObject_HEAD_INIT(NULL)
    0,
    "Noddy",
    sizeof(noddy_NoddyObject),
    0,
    noddy_noddy_dealloc, /*tp_dealloc*/
    0,          /*tp_print*/
    0,          /*tp_getattr*/
    0,          /*tp_setattr*/
    0,          /*tp_compare*/
    0,          /*tp_repr*/
    0,          /*tp_as_number*/
    0,          /*tp_as_sequence*/
    0,          /*tp_as_mapping*/
    0,          /*tp_hash */
}; 
```

正如示例所解释的那样，PyObject_New 使用设置为 sizeof(noddy_NoddyObject) 的成员来了解要为新对象分配多少内存。我相信 staticforward 是一个变成静态的宏，这意味着

```
staticforward PyTypeObject linked_list_type; 
```

将创建所有字段初始化为零，因此 PyObject_New 将尝试为您的新对象分配 0 个字节。因此，访问该对象的任何字段都涉及访问您不拥有的内存，结果是分段错误。

# jquery - 使用 jQuery 实现平滑垂直滚动时遇到问题

> ID：15986560
> 
> 赞同：0
> 
> 时间：2013-04-13T09:56:30.153
> 
> 标签：jquery, scroll, effects

我正在构建一个连续滚动的网页，其导航应该跳转到页面上的不同位置。我正在尝试遵循[这个示例](http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery/)，并实现 jQuery 平滑滚动效果。HTML 工作正常——单击链接时，链接会将您带到页面上的不同位置，但 jQuery 滚动效果不起作用。

这是html的重要部分：

```
<ul>
  <li><a href="#"><h1>work</h1></a></li>
  <ul class="nav">
    <li><a href="#section1"><p class="nav_p">project1</p></a></li>
    <li><a href="#section2"><p>project2</p></a></li>
    <li><a href="#section3"><p>project3</p></a></li>
    <li><a href="#section4"><p>project4</p></a></li>
    <li><a href="#section5"><p>project5</p></a></li>
    <li><a href="#section6"><p>project6</p></a></li>
    <li><a href="#section7"><p>project7</p></a></li>
    <li><a href="#section8"><p>project8</p></a></li>
  </ul>

<li><a href="#"><h1>about</h1></a></li>

<li><a href="#"><h1>contact</h1></a></li>
</ul> 
```

这是迄今为止的javascript：（它与顶部链接的教程网页上的内容完全相同）

```
$(function() {
    $('ul.nav a').bind('click',function(event){
        var $anchor = $(this);

        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top
        }, 1500,'easeInOutExpo');
        event.preventDefault();
    });
}); 
```

有人对为什么这对我不起作用有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:11:14.267

我刚刚删除了“easeInOutExpo”：

```
$(function() {
    $('ul.nav a').bind('click',function(event){
        var $anchor = $(this);

        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top
        }, 1500);
        event.preventDefault();
    });
}); 
```

# php - PHP.INI 不工作？

> ID：15986561
> 
> 赞同：2
> 
> 时间：2013-04-13T09:56:45.050
> 
> 标签：php, cpanel

好的，我的问题有点令人困惑，但几天来，我注意到我的 cPanel 帐户发生了一些不寻常的变化。

我尝试安装 Joomla3。它给了我一个预检查错误，我通过创建一个 php.ini 文件来修复它来修复错误。有效。

但是当谈到将 php.ini 文件放在根目录中时，我可以将最大帖子大小固定为 32mb。它永远不允许超过 2mb，这是我共享主机的默认值。

我不知道为什么，但这已经发生了很长一段时间了。关于他为什么会发生的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T15:54:36.183

虽然这是我的一个老问题，但我现在知道你不能仅仅通过放入自定义 php.ini 来更改 max_upload 或 max_post

您需要做的是重新启动 apache 以使这项工作:)

希望这可以帮助遇到此问题的任何人:)

# embed - 在堆栈中嵌入 TrueType 字体？

> ID：15986563
> 
> 赞同：0
> 
> 时间：2013-04-13T09:56:53.900
> 
> 标签：embed, truetype, livecode

是否可以在堆栈中嵌入 TrueType 字体并使其以独立于平台的方式可用？或者至少在 Windows 和 Android 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:47:20.287

在 Android 中添加自定义字体的方式应该与在 iOS 中完全相同 - 您只需在独立构建器的复制文件窗格中引用您的 .ttf 或 .ttc 字体。然后它们将在运行时自动加载并可供使用（它们也显示在 fontNames() 中）。

在桌面平台上，您可以加载自定义字体以与 revFontLoad 命令一起使用。语法是：

```
revFontLoad "/path/to/my/font.fontformat" 
```

因此，您通常会将字体文件包含在独立构建器的复制文件部分并在启动时加载它。

如果出于某种原因，您希望将字体实际*嵌入*到堆栈文件中，理论上，您可以在构建之前将字体文件的二进制数据存储为堆栈的自定义属性，在运行时将自定义属性输出到文件中，使用 revFontLoad 加载。如果目标是隐藏字体文件，您甚至可以在加载文件后删除该文件 - 请注意，我仅在 IDE 中尝试过此操作，而不是独立环境。

另请注意，该`revFontLoad`命令仅适用于桌面平台，您必须拥有使用相关字体的合法权利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:17:07.150

在 Windows 上，通常使用安装程序。例如 InnoSetup 或 Installer Maker。InnoSetup 是免费的，可以在这里找到[http://www.jrsoftware.org/isinfo.php](http://www.jrsoftware.org/isinfo.php)。Installer Maker 专为与 LiveCode 一起使用而设计，包括在 Windows 上安装字体的特殊功能。你可以在这里找到它[http://www3.economy-x-talk.com/file.php?node=installer-maker](http://www3.economy-x-talk.com/file.php?node=installer-maker)。

LC 6.0 的发行说明包含以下有关嵌入字体的文本：

> **添加自定义字体**在 LiveCode 5.5 中，引入了允许应用程序捆绑自定义字体的功能，然后在应用程序运行时（并且只有该应用程序）可以使用这些字体。要利用此功能，您需要做的就是引用您希望包含在“复制文件”窗格中的任何字体的文件。这些文件可以是直接文件引用，也可以包含在其中一个文件夹引用中。Standalone Builder 会将任何以扩展名 ttf 或 ttc 结尾的文件视为要以这种方式使用的字体文件。以这种方式包含的任何字体都将出现在 fontNames 中，并且可以像系统上的任何其他字体一样使用。

# c# - OleDbCommand 在有效的命令文本上抛出异常

> ID：15986566
> 
> 赞同：1
> 
> 时间：2013-04-13T09:57:35.483
> 
> 标签：c#, sql, ms-access, oledb

我有 OleDbConnection 连接到访问数据库。但是当我执行查询时，OleDbCommand 抛出异常，说该命令无效。我完全确定该命令是有效的。

```
 string ret = "";

string command = "UPDATE tblUser set username = ?, password = ? where ID = 1";
dbConn.Open();

using (var dbCommand = dbConn.CreateCommand())
{
    dbCommand.Connection = dbConn;
    dbCommand.CommandText = command;
    dbCommand.Parameters.AddWithValue("?", username);
    dbCommand.Parameters.AddWithValue("?", password);

    int temp = dbCommand.ExecuteNonQuery();
    if (temp > 0)
        ret = "sukses";
    dbConn.Close();                
}
return ret; 
```

但是，当执行上面的代码时，它会抛出异常`Syntax error in UPDATE statement.`at `dbCommand.ExecuteNonQuery()`。如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:58:34.787

您需要`PASSWORD`用括号转义，因为它是保留关键字，

```
UPDATE tblUser set username = ?, [password] = ? where ID = 1 
```

*   [MS Access 保留关键字](http://office.microsoft.com/en-001/access-help/access-2007-reserved-words-and-symbols-HA010030643.aspx)

# perl - Perl CSV 删除只出现一次的行

> ID：15986576
> 
> 赞同：1
> 
> 时间：2013-04-13T09:58:58.853
> 
> 标签：perl, csv

嗨专家和好心的助手，

我是 Perl 的新手，我可以在这里使用一些帮助。我正在处理一个超过 1000 行的 CSV 文件，但我在这里的示例中复制并简化了我的问题。

基本上，我想删除一些行，根据天气或行的第二列是否重复。我知道这听起来可能令人困惑，请允许我用一个例子来演示。

输入数据：

```
M,100,John,10
M,98,Mike,9
F,99,Amelia,9
F,100,Rosana,10
F,100,Susan,11
M,99,James,8 
```

预期输出：

```
M,100,John,10
F,100,Rosana,10
F,100,Susan,11
F,99,Amelia,9
M,99,James,8 
```

在上面的示例中，Mike 是唯一一个不与其他学生分享他的分数（第二列，98）的人，因此不应打印他的名字。换句话说，如果特定条目的第二列中的值是唯一的/在任何其他条目中不重复，则应将其省略。排序是可选的。

这就是我到目前为止所拥有的。

```
use Text::CSV;
use strict;

my $csv = Text::CSV->new();
my $sheet;

while( <DATA> ) {
  chomp;
  my $row;
  @$row = split( /,/, $_ );
  push @$sheet, $row;
}

@$sheet = sort { $b->[1] <=> $a->[1] } @$sheet;

 foreach my $row ( @$sheet ) {
    print join( ',', @$row), "\n";
}

__DATA__
M,100,John,10
M,98,Mike,9
F,99,Amelia,9
F,100,Rosana,10
F,100,Susan,11
M,99,James,8 
```

我什至不知道从哪里开始。非常感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:20:32.450

I would use a hash to associate the rows with the value of their second column. In the second step, I would filter out all keys who have only one associated row:

```
my %rows;

while (...) {
  ...;
  push @{ $rows{$row->[1]} }, $row;
}

# After the loop, we filter the keys (and sort them):

my @keys = sort {$b <=> $a} grep { @{$rows{$_}} > 1 }  keys %rows;

# Then print them:

for my $key (@keys) {
  for my $row (@{ $rows{$key} }) {
    # print the @$row
  }
} 
```

However, you should actually use `Text::CSV` instead of `split`:

```
my $fh = \*DATA; # or open $fh to a file
while(my $row = $csv->getline($fh)) {
  push ...;
} 
```

and

```
for my $key (@keys) {
  for my $row (@{ $rows{$key} }) {
    $csv->print(\*STDOUT, $row);
  }
} 
```

# android - 安卓 NDK。如何在 __FILE__/__BASE_FILE__ 中省略路径

> ID：15986577
> 
> 赞同：1
> 
> 时间：2013-04-13T09:59:07.603
> 
> 标签：android, c++, android-ndk, c-preprocessor

我搜索了 SO，发现我可以使用 __BASE_FILE__。我认为的问题是 ndk-build 使用文件的完整路径调用 gcc，我得到了该路径 __BASE_FILE__。那么，问题是如何使 ndk-build 调用 gcc 至少具有相对路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:08:49.170

Android NDK 构建过程基于 Makefile/s，下载 NDK 并查看`docs`文件夹，特别是`ANDROID-MK.HTML`，您可以在[此处](http://developer.android.com/tools/sdk/ndk/index.html#Docs)快速浏览 NDK docs 文件夹。

# c# - 如何接收文件夹中的所有文件？

> ID：15986580
> 
> 赞同：0
> 
> 时间：2013-04-13T09:59:48.180
> 
> 标签：c#, file, sorting, filtering

我想了解如何接收文件夹中的所有文件名并将其存储到列表中。

我一直在寻找帖子，这是我到目前为止所拥有的：

```
private void btnSort_Click(object sender, EventArgs e)
{
        //if (Directory.Exists(Path)) 
        foreach (string file in Directory.EnumerateFiles(FilePath))
        {
            NoOfFiles++;
            FileNames.Add(file);
            //Should implement adding something that converts lower case letters to upper.
            Directory.CreateDirectory(FilePath + "\\" + file[0]);
        }
} 
```

它在一定程度上有效，但我想创建一个以文件的第一个字母（Eg `RndFile.txt`）命名的目录，而不是文件路径（Eg `C:\\something\\something\\RndFile.txt`）。

因此，我想将该信息存储在列表中。

但是，我不知道如何仅接收此信息或删除不必要的部分。

谢谢！希瓦姆

PS 对于有兴趣的人，这是一个 A-Level 计算项目。我正在创建一个简单的、编码错误的程序来根据文件的第一个字母对文件进行排序。我很难问我的老师这是否是一个好主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:03:42.217

使用`DirectoryInfo`代替`Directory`：

```
DirectoryInfo dir = new DirectoryInfo("c:");
FileInfo[] files = dir.GetFiles(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:04:21.497

不确定我是否正确理解了您的问题。

Path 命名空间包含一些有用的功能。我想你想要

`Path.GetFileNameWithoutExtension()`- 这给你的只是文件名。然后你可以把它当作一个字符串和

`Substring(0,1)`得到第一个字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T10:11:03.507

```
private static string[] GetFileNames(string path, string filter)
    {
        string[] files = Directory.GetFiles(path, filter);
        for (int i = 0; i < files.Length; i++)
        {
            files[i] = Path.GetFileName(files[i]);

        }
        return files;
    } 
```

在页面加载中调用此函数

```
string[] myFiles = GetFileNames("D:\\folderName", "*.txt"); 
```

`myFiles`数组现在包含文件夹内所有文件的名称。
要对文件名进行排序，只需对数组文件进行排序

```
Array.Sort(myFiles); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T10:11:31.383

您的工作非常正确，您只需将[类 Path](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)提供的功能添加到循环中

```
private void btnSort_Click(object sender, EventArgs e)
{
    foreach (string file in Directory.EnumerateFiles(FilePath))
    {
        string fileName = Path.GetFileName(file);
        string newDir = Path.Combine(FilePath, fileName[0]);
        if(!Directory.Exists(newDir))
             Directory.CreateDirectory(newDir);

        // If you still need to store the filenames in a list you could add
        FileNames.Add(fileName);
        // but no need to keep a counter variable, you could Always get that value
        // using FileNames.Count after the loop ends...

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T10:05:28.897

System.IO 中的 FileInfo 对象通过 Name 属性给出文件名：

```
 private void btnSort_Click(object sender, EventArgs e)
    {
            DirectoryInfo di = new DirectoryInfo("path");
            FileInfo[] fi = di.GetFiles();
            foreach (FileInfo item in fi)
            {
                string filename = item.Name;
                string fullname = item.FullName;
            }
     } 
```

# javascript - 放大/缩小具有相同类名的多个 div 的图像

> ID：15986584
> 
> 赞同：0
> 
> 时间：2013-04-13T10:00:38.860
> 
> 标签：javascript, jquery, image, class, html

我有这个代码来缩小/扩大图像，使它们适合父 div：

```
<script src="js/imgscale.jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('img.profilepicture').imgscale({ 
    parent : '.ppparent', 
    fade : 1000 
  }); 
});
</script> 
```

它适用于具有一个类名的一个 div，但是当我尝试将它与许多具有相同类名的 div 一起使用时，它会停止对所有这些（即没有更改图像）工作。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:03:46.040

如果您的所有图像都带有类`.profilepicture`

```
 $("img.profilepicture").each(function(){
       $(this).imgscale({ 
             parent : '.ppparent', 
             fade : 1000 
       });
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:03:56.360

您必须为每个图像调用该函数。

```
$(document).ready(function(){ 
    $('img.profilepicture').each(function() {
        $(this).imgscale({ 
            parent : '.ppparent', 
            fade : 1000 
          }); 
    });
}); 
```

# c++ - FlowMonitor 不显示统计信息，但 PyViz 和跟踪文件显示它

> ID：15986586
> 
> 赞同：1
> 
> 时间：2013-04-13T10:01:31.600
> 
> 标签：c++, network-programming, ns-3

有一个简单的数据传输模型。

```
/* -*- Mode:C++; c-file-style:"gnu"; indent-tabs-mode:nil; -*- */

#include <iostream>
#include <fstream> 
#include <string>  
#include <cassert> 

#include "ns3/core-module.h"
#include "ns3/network-module.h"
#include "ns3/csma-module.h"   
#include "ns3/internet-module.h"
#include "ns3/point-to-point-module.h"
#include "ns3/applications-module.h"  
#include "ns3/ipv4-global-routing-helper.h"
#include "ns3/flow-monitor-module.h"       

//
// Network Topology
//                         
//    n0 (source)           
//    |
//    |
//    |
//    |   
//    |
//    -------------------n1      n2        n3--------n4  n5   n6 (sink)
//    point-to-point      |      |         |         |   |    |
//     10.1.1.0           ==================         ==========
//                        LAN 10.1.2.0              LAN 10.1.3.0  
//                      (CSMA subnet 1)           (CSMA subnet 2)    

using namespace ns3;

int main (int argc, char *argv[])
{                       
        Config::SetDefault ( "ns3::OnOffApplication::PacketSize", UintegerValue ( 700 ) );
        Config::SetDefault ( "ns3::OnOffApplication::DataRate", StringValue ( "1000000" ) );

        CommandLine cmd;
        cmd.Parse(argc,argv);

        NodeContainer p2pNodes;
        p2pNodes.Create(2);   

        NodeContainer csmaNodesSubNetOne;
        csmaNodesSubNetOne.Add(p2pNodes.Get(1));
        csmaNodesSubNetOne.Create(2);        

        NodeContainer csmaNodesSubNetTwo;
        csmaNodesSubNetTwo.Add(csmaNodesSubNetOne.Get(2));
        csmaNodesSubNetTwo.Create(2);

        PointToPointHelper pointToPoint;
        pointToPoint.SetDeviceAttribute("DataRate", StringValue ("100Mbps"));
        pointToPoint.SetDeviceAttribute("Mtu", UintegerValue(1000));        
        pointToPoint.SetChannelAttribute("Delay", TimeValue (NanoSeconds (6560)));    

        NetDeviceContainer p2pDevices;
        p2pDevices = pointToPoint.Install(p2pNodes);

        CsmaHelper csmaHelperSubNetOne;
        csmaHelperSubNetOne.SetChannelAttribute("DataRate", StringValue ("100Mbps"));
        csmaHelperSubNetOne.SetChannelAttribute("Delay", TimeValue (NanoSeconds (6560)));
        csmaHelperSubNetOne.SetDeviceAttribute("Mtu", UintegerValue(1000));               

        NetDeviceContainer csmaDevicesSubNetOne;
        csmaDevicesSubNetOne = csmaHelperSubNetOne.Install(csmaNodesSubNetOne);

        CsmaHelper csmaHelperSubNetTwo;
        csmaHelperSubNetTwo.SetChannelAttribute("DataRate", StringValue ("100Mbps"));
        csmaHelperSubNetTwo.SetChannelAttribute("Delay", TimeValue (NanoSeconds (6560)));
        csmaHelperSubNetTwo.SetDeviceAttribute("Mtu", UintegerValue(1000));               

        NetDeviceContainer csmaDevicesSubNetTwo;
        csmaDevicesSubNetTwo = csmaHelperSubNetTwo.Install(csmaNodesSubNetTwo);

        InternetStackHelper internetStackHelper;
        internetStackHelper.Install(p2pNodes.Get(0));

        internetStackHelper.Install(csmaNodesSubNetOne.Get(0));
        internetStackHelper.Install(csmaNodesSubNetOne.Get(1));

        internetStackHelper.Install(csmaNodesSubNetTwo.Get(0));
        internetStackHelper.Install(csmaNodesSubNetTwo.Get(1));
        internetStackHelper.Install(csmaNodesSubNetTwo.Get(2));

        Ipv4AddressHelper address;
        address.SetBase ("10.1.1.0", "255.255.255.0");
        Ipv4InterfaceContainer p2pInterfaces;
        p2pInterfaces = address.Assign (p2pDevices);

        address.SetBase ("10.1.2.0", "255.255.255.0");
        Ipv4InterfaceContainer csmaInterfacesSubNetOne;
        csmaInterfacesSubNetOne = address.Assign (csmaDevicesSubNetOne);

        address.SetBase ("10.1.3.0", "255.255.255.0");
        Ipv4InterfaceContainer csmaInterfacesSubNetTwo;
        csmaInterfacesSubNetTwo = address.Assign (csmaDevicesSubNetTwo);

        InetSocketAddress dst = InetSocketAddress ( csmaInterfacesSubNetTwo.GetAddress ( 2 ) );
        OnOffHelper onoff = OnOffHelper ( "ns3::Ipv4RawSocketFactory", dst );

        ApplicationContainer apps = onoff.Install( p2pNodes.Get(0) );
        apps.Start ( Seconds (2.0) );
        apps.Stop ( Seconds (10.0) );

        PacketSinkHelper sink = PacketSinkHelper ("ns3::Ipv4RawSocketFactory", dst);
        apps = sink.Install (csmaNodesSubNetTwo.Get( 2 ));
        apps.Start (Seconds (1.0));
        apps.Stop (Seconds (10.0));

        Ipv4GlobalRoutingHelper::PopulateRoutingTables( );  

        csmaHelperSubNetTwo.EnablePcap ("sniffer", csmaDevicesSubNetTwo.Get (1), true);

        AsciiTraceHelper ascii;
        csmaHelperSubNetTwo.EnableAsciiAll( ascii.CreateFileStream( "receiver-trace.tr" ) );

        Simulator::Stop (Seconds (11));

        FlowMonitorHelper flowmon;
        Ptr<FlowMonitor> monitor = flowmon.InstallAll();
        monitor = flowmon.GetMonitor();

        Simulator::Run ();

        monitor->CheckForLostPackets ();
        Ptr<Ipv4FlowClassifier> classifier = DynamicCast<Ipv4FlowClassifier> (flowmon.GetClassifier ());
        std::map<FlowId, FlowMonitor::FlowStats> stats = monitor->GetFlowStats ();
        for(std::map<FlowId, FlowMonitor::FlowStats>::const_iterator i = stats.begin (); i != stats.end (); ++i)
        {
                Ipv4FlowClassifier::FiveTuple t = classifier->FindFlow (i->first);

                std::cout << "  Flow " << i->first << " (" << t.sourceAddress << " -> " << t.destinationAddress << ")\n";
                std::cout << "  Tx Bytes:   " << i->second.txBytes << "\n";
                std::cout << "  Rx Bytes:   " << i->second.rxBytes << "\n";
                std::cout << "  Throughput: " << i->second.rxBytes * 8.0 / 10.0 / 1024 / 1024  << " Mbps\n";
        }

        monitor->SerializeToXmlFile("serialize-stat.flowmon", true, true);

        Simulator::Destroy();
        return 0;
} 
```

我可以构建并运行这个模型并在[PyViz](https://www.nsnam.org/wiki/PyViz)中查看结果。

![在此处输入图像描述](https://i.stack.imgur.com/Nnh3W.png)

同样在 PyViz 中，我看到了节点接收器的统计信息。

![在此处输入图像描述](https://i.stack.imgur.com/7bzHk.png)

跟踪文件包含数据。这是大跟踪文件中的一行。

```
...
r 3.00585 /NodeList/5/DeviceList/0/$ns3::CsmaNetDevice/MacRx ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:06, destination=00:00:00:00:00:08) ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 62 id 0 protocol 0 offset (bytes) 0 flags [none] length: 720 10.1.1.1 > 10.1.3.3) Payload (size=700) ns3::EthernetTrailer (fcs=0)
... 
```

我可以使用[AWK](http://en.wikipedia.org/wiki/AWK)解析这个跟踪文件。

```
[root@localhost ns-3.16]# awk '{print $2 ", " $28}' receiver-trace.tr >grab.dat
[root@localhost ns-3.16]# cat grab.dat
...
3.00578, 720
3.00578, 720
3.00585, 720
3.01126, 720
3.01126, 720
3.01133, 720
3.01133, 720
3.01133, 720
3.0114, 720
3.01686, 720
3.01686, 720
3.01693, 720
3.01693, 720
3.01693, 720
3.017, 720
3.02246, 720
... 
```

但是[FlowMonitor](https://www.nsnam.org/doxygen/classns3_1_1_flow_monitor.html)没有任何显示，并且 xml 文件没有有用的信息。

```
<?xml version="1.0" ?>
<FlowMonitor>
  <FlowStats>
  </FlowStats>
  <Ipv4FlowClassifier>
  </Ipv4FlowClassifier>
  <FlowProbes>
    <FlowProbe index="0">
    </FlowProbe>
    <FlowProbe index="1">
    </FlowProbe>
    <FlowProbe index="2">
    </FlowProbe>
    <FlowProbe index="3">
    </FlowProbe>
    <FlowProbe index="4">
    </FlowProbe>
    <FlowProbe index="5">
    </FlowProbe>
  </FlowProbes>
</FlowMonitor> 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:44:33.283

作为替代方案，可以使用回调。

```
...
static void PrintRx ( Ptr< const Packet > p, const Address &ad )
{
   std::string traceLine = boost::lexical_cast< string >( *p );
   std::cout << Simulator::Now().GetSeconds () << " " << traceLine << std::endl; 
}

int main (int argc, char *argv[])
{                       
...
Config::ConnectWithoutContext ("/NodeList/*/ApplicationList/0/$ns3::PacketSink/Rx", MakeCallback (&PrintRx));
Packet::EnablePrinting ();
... 
```

如下图可以看到接收到的数据包的内容，然后创建自己的统计分析工具。

```
...                                                               
19.881 ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 62 id 3192 protocol 2 offset (bytes) 0 flags [none] length: 720 10.1.1.1 > 10.1.3.3) Payload (size=700)
19.8866 ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 62 id 3193 protocol 2 offset (bytes) 0 flags [none] length: 720 10.1.1.1 > 10.1.3.3) Payload (size=700)
19.8922 ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 62 id 3194 protocol 2 offset (bytes) 0 flags [none] length: 720 10.1.1.1 > 10.1.3.3) Payload (size=700)
19.8978 ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 62 id 3195 protocol 2 offset (bytes) 0 flags [none] length: 720 10.1.1.1 > 10.1.3.3) Payload (size=700)
19.9034 ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 62 id 3196 protocol 2 offset (bytes) 0 flags [none] length: 720 10.1.1.1 > 10.1.3.3) Payload (size=700)
... 
```

# java - 套接字连接 - Java 添加字节

> ID：15986592
> 
> 赞同：4
> 
> 时间：2013-04-13T10:02:21.627
> 
> 标签：java, android, node.js, sockets

我想通过套接字将字符串从我的 Android 设备发送到我的 node.js 服务器。连接已经有效，但是每当我发送字符串时，服务器都会收到其他字符。

这是我将字符串“hans”发送到 node.js 服务器时收到的内容：

```
Buffer ac ed
Buffer 00 05 77 04 68 61 6e 73 
```

作为 utf8 字符串：

```
??
♣w♦hans 
```

这是发送字符串的 Java 部分：

```
clientSocket = new Socket("xxx.xxx.xxx.xxx",9988);
ObjectOutputStream clientOut = new ObjectOutputStream(clientSocket.getOutputStream());              

String sendString = "hans";             
clientOut.write(sendString.getBytes());
clientOut.flush(); 
```

那么为什么会这样呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T10:06:18.833

您正在使用[`ObjectOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)用于发送序列化对象的 an，并且必须由`ObjectInputStream`另一端的 an 解码。如果您只是在另一端发送字节并读取字节，那么您应该只使用 an`OutputStream`和 an `InputStream`。

# c - While 循环始终为真 CCS

> ID：15986593
> 
> 赞同：0
> 
> 时间：2013-04-13T10:02:21.613
> 
> 标签：c, pic

我正在使用 CCS 编译器，对于这段代码，我得到了一个警告，即条件始终为真。这是 PIC16F877 的代码，所以当输入为 1 时，它应该跳出循环。我在这里错过了什么吗？

```
int read_keypad()
{
   int value=0;
   while(1)
   {
     UpButton=0;                  // In case of bad Input
     DownButton=0;
     RightButton=0;
     LeftButton=0;
     EnterButton=0;

     output_high(sat1); 
     if (input(sut1)) 
     {    
       value=1;
       while(input(sut1));
       break;
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:06:10.063

循环条件始终为真。该警告并不意味着您的循环不可能退出，只是不能通过其测试条件。

当 input(sut1) 返回 true 时，您将进入一个在 input 返回 false 之前什么都不做的循环，然后您将跳出外部循环并退出 read_keypad()

# php - 在新标签 PHP 中打开随机图片

> ID：15986595
> 
> 赞同：0
> 
> 时间：2013-04-13T10:02:56.140
> 
> 标签：php, javascript, html, css, image

我做了一个 php 行，从某个目录中随机拍摄一张图片：

```
<?php

  function random_pic($dir = 'pics')
  {
    $files = glob($dir . '/*.*');
    $file = array_rand($files);
    return $files[$file];
  }

?> 
```

现在我不知道如何在新选项卡中打开随机文件。我尝试使用的代码如下：

```
<a href="" title="Click to open in new page!!">
  <img src=""<?php echo random_pic(); ?>" alt="" height="400" width="450" border="0"/>
</a> 
```

我想这样做，当您单击图片时，它会在新选项卡中打开（或在同一页面上但不重新加载），

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:04:46.357

根据用户的配置，将 target="_blank" 添加到锚元素以强制浏览器打开新选项卡或窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:05:45.573

```
<?php $random_pic = random_pic(); ?>
<a href="<?php echo $random_pic; ?>" target="_blank" title="Click to open in new page!!"><img src="<?php echo $random_pic; ?>" alt="" height="400" width="450" border="0"/></a> 
```

# asp.net - 从 ASP.NET 中的子页面更改母版页的菜单内容

> ID：15986601
> 
> 赞同：1
> 
> 时间：2013-04-13T10:03:41.577
> 
> 标签：asp.net, html

这是我在 ASP.NET 中的母版页文件的部分。

```
<body>
      <ul>
    <li class="active"><a href="inbox.aspx">Inbox</a></li>
        <li><a href="comp.aspx">Compose</a></li>
        <li><a href="Sent.aspx">Sent</a></li>
      </ul>

    .......
    <form id="form1" runat="server">
        <div>
            <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

            </asp:ContentPlaceHolder>
        </div>
        </form>
</body> 
```

现在，当我创建一个子页面时，只有 contentplaceholder 可用于进行更改，但我想将收件箱的第一个 li 标签更改为 compose li 标签的 class="active"。也就是说，我想访问这个 Master Page li在子页面中标记并为每个子页面分配不同的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:13:42.217

`runat='server'`您可以通过添加属性并为其赋予一个 id 值，使该标记成为母版页中的服务器端标记 `id='someID'`。

在后面的代码中，您可以通过以下方式获取它：

```
Master.FindControl("someID") 
```

[http://msdn.microsoft.com/en-us/library/xxwa0ff0(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/xxwa0ff0(v=vs.100).aspx)

# ruby-on-rails - 我必须定义什么类型的列来生成文本区域 Ruby on rails

> ID：15986617
> 
> 赞同：2
> 
> 时间：2013-04-13T10:05:33.023
> 
> 标签：ruby-on-rails, ruby, migration

我有一个带有以下迁移的表“通知”：

```
class CreateNotifications < ActiveRecord::Migration
  def change
    create_table :notifications do |t|
      t.integer :id
      t.string :from
      t.string :to
      t.string :subject
      t.text :content
      t.string :interval_type
      t.integer :interval
      t.datetime :begin
      t.datetime :end
      t.timestamps
    end
  end
end 
```

问题是，当我转到 myapplication/notifications/new 时，我在“内容”字段中看到输入类型 =“文本”而不​​是文本区域。

解决了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T10:17:22.073

在您的视图文件中，将该`content`字段定义为 a`text_area`而不是 a `text_field`。

```
# app/views/notifications/new.html.erb
# Change <%= f.text_field :content %> to <%= f.text_area :content %> 
```

# android - Android中的手势分割

> ID：15986618
> 
> 赞同：5
> 
> 时间：2013-04-13T10:05:37.690
> 
> 标签：android, gesture-recognition, handwriting

我正在通过Android的手势进行**手写字母检测的示例工作。当我一次输入****1个字符**时效果很好。这意味着当我通过手势在屏幕上写**A**时，程序可以很好地识别它（就像我之前将它放在手势库中一样）。到目前为止，我的代码是这样的。

```
public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture) {
    ArrayList<Prediction> predictions = gLib.recognize(gesture);

if (predictions.size() > 0 && predictions.get(0).score > 1.0) {

    String letter = predictions.get(0).name;  

    Toast.makeText(this, letter, Toast.LENGTH_SHORT).show();

    if(letter.contains("A"))  //when matches i print it to edittext
    edittext.setText("A");
    .
    .      //rest of stuff here like previous way
    .

    }
} 
```

但我的标准不是这样。我想认识一个词。我想像as一样一次写一个字。 ![例子](https://i.stack.imgur.com/Gfitv.png)

并且在为每个成功匹配写一个单词的过程中，相应的字母应该像 as 一样打印在 edittext 上。

```
A,N,D,R,O,I,D 
```

所以我的问题是如何获得它？是否可以分割手势（在写作时分割单词）？任何工作代码示例或链接将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:00:27.693

如果您将单词写为单独的字母（即不是草书），如问题中给出的图像所示。然后简单地这样做 -

```
public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture) {
    ArrayList<Prediction> predictions = gLib.recognize(gesture);

    if (predictions.size() > 0) {
        Prediction prediction = predictions.get(0);
        String letter = prediction.name;

        if (prediction.score > 1.0) {
            edittext.setText(edittext.getText().toString() + letter);
        }
    }
} 
```

这实质上是将新字母附加到现有的 edittext 字符串中。

但是，如果您在谈论草书，那就很复杂了。这是一些可以跟踪草书书写的代码。

```
public class MainActivity extends Activity {
    private Handler mHandler;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    protected void onResume() {
        super.onResume();
        Tracker t = new Tracker();
        t.start();
    }

    @Override
    protected void onPause() {
        if (mHandler != null) 
            mHandler.getLooper().quit();
        super.onPause();
    }   

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        switch (event.getAction()) {
        case MotionEvent.ACTION_MOVE:
            if (mHandler != null) {
                Message msg = Message.obtain();
                msg.obj = event.getX() + "," + event.getY();
                mHandler.sendMessage(msg);
            }
            break;
        }
        return true;
    }

    private class Tracker extends Thread {
        private static final int LETTER_SIZE = 30;

        private GestureLibrary gLib;
        private ArrayList<GesturePoint> points;

        public Tracker() {
            points = new ArrayList<GesturePoint>();
            gLib = GestureLibraries.fromRawResource(MainActivity.this, R.raw.gestures);
            gLib.load();
        }

        @Override
        public void run() {
            Looper.prepare();
            mHandler = new Handler() {

                public void handleMessage(Message msg) {
                    String[] pos = String.valueOf(msg.obj).split(",");
                    points.add(new GesturePoint(Float.parseFloat(pos[0]), Float.parseFloat(pos[1]), System.currentTimeMillis()));

                    if (points.size() < LETTER_SIZE) return;

                    GestureStroke stroke = new GestureStroke(points);
                    Gesture gesture = new Gesture();
                    gesture.addStroke(stroke);

                    ArrayList<Prediction> predictions = gLib.recognize(gesture);
                    if (predictions.size() > 0) {
                        Prediction prediction = predictions.get(0);
                        String letter = prediction.name;

                        if (prediction.score > 1.0) {
                            Log.e("Found", letter);
                            points.clear();
                        }
                    }
                }
            };          
            Looper.loop();
        }
    }   
} 
```

所以基本上我们捕获触摸位置并从中创建一个手势，传递给 GestureLibrary 的识别（）方法。如果一个手势被识别，那么我们打印它并清除触摸位置，以便可以识别一个新字母。

*示例项目*：[Cursive_eclipse_project.zip](http://www.appsrox.com/shared/Cursive_eclipse_project.zip)

# java - 多态性和抽象父类

> ID：15986621
> 
> 赞同：0
> 
> 时间：2013-04-13T10:05:46.503
> 
> 标签：java, polymorphism, abstract

在我现在正在做的实践中，我在层次结构中有 3 个类： **Employee**（抽象类） **Worker** extends Employee **Manager** extends Employee

我还有一个使用这 3 个类的附加类：**Factory**。

我现在必须构建一个将 Employee e 添加到员工数组的方法。属性：

**_emps - Employee**类型的数组。_numOfEmpes - 表示数组中的雇员数。

这是我写的代码：

```
public boolean addEmployee(Employee e){
    if (this._numOfEmps<MAX_EMPS)
    {
        this._emps[this._numOfEmps]=e;
        return true;
    }
    return false;
} 
```

问题是我认为这一行：

```
this._emps[this._numOfEmps]=e; 
```

我创建了一个别名对象数组，我不确定这是我必须做的。我通常做的是：

```
this._emps[this._numOfEmps)=new Employee(e); 
```

但由于 Employee 类是抽象的，我不能这样做。

这是一种多态实践，所以我猜教授是想让我们把Workers和Managers放在数组中，但是我不能在方法中将Workers和Managers添加到数组中。

任何帮助都会很棒，

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:10:10.547

我认为创建一个引用对象数组是完全可以的。应该没有问题。

但是，如果要创建副本，请检查`clone`方法，实现它并在`addEmployee`.

这是如何实现 Cloneable 的示例 - [http://www.jusfortechies.com/java/core-java/cloning.php](http://www.jusfortechies.com/java/core-java/cloning.php)

然后

```
this._emps[this._numOfEmps]=e.clone();
++this._numOfEmps; 
```

# java - 更新 Joda DateTime 对象

> ID：15986622
> 
> 赞同：1
> 
> 时间：2013-04-13T10:05:55.130
> 
> 标签：java, datetime, jodatime

假设我有一个 Joda DateTime 对象，由以下模式表示“MMM d, yyyy / HHmm”

有没有办法独立于两个字符串更新 DateTime“日部分”或“时间部分”？

例如 ：

```
DateTime aDateTime initial : JAN 1, 1970 / 2230 
```

如果我有一个 String`aDayString="FEB 3, 1980"`和一个 String `aTimeString="1520"`，

*   如何仅更新 aDateTime**日**（以获得 1980 年 2 月 3 日 / 2230 年）？
*   如何仅更新 aDateTime**时间**（以获得 1970 年 1 月 1 日/1520 年）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T10:45:46.087

Joda 的[`DateTime`](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)对象是不可变的，所以就像`String`，当你改变一个值时，你会得到一个新的实例。所以：

```
DateTime initial = new DateTime( 1970, 1, 1, 22, 30, 0 );
DateTime dayUpdated = initial.withDate( 1980, 2, 3 );
DateTime timeUpdated = initial.withTime( 15, 20, 0, 0 );
// At this point, initial still contains 1970-1-1, 22:30
//                dayUpdated is 1980-2-3 22:30
//                timeUpdated is 1970-1-1 15:20 
```

如果您要处理大量此类更改并希望减少垃圾收集器的负载，则可以使用[`MutableDateTime`](http://joda-time.sourceforge.net/apidocs/org/joda/time/MutableDateTime.html)可以直接修改的初始实例。

```
MutableDateTime mutable = new MutableDateTime( 1970, 1, 1, 22, 30, 0 );
mutable.setDate( 1980, 2, 3 );
mutable.setTime( 15, 20, 0, 0 );
// at this point, mutable contains 1980-2-3 15:20 
```

在大多数常见情况下，拥有不可变对象的可预测性胜过拥有可变实例的好处，因此我建议采用第一种方法。

# javascript - 使用与移动设备相同的 API 开发网站

> ID：15986626
> 
> 赞同：10
> 
> 时间：2013-04-13T10:06:15.527
> 
> 标签：javascript, android, ios, json, api

我只熟悉原生移动开发，不熟悉 Web 开发，所以请原谅我的幼稚。

移动应用程序的 API 通常涉及通过 API 的 POST 或 GET 数据请求。数据将作为 JSON 返回。为了这个例子，假设 API 是一个由 Sinatra / Ruby 提供支持的简单 API，它会被移动设备和网站使用。

使用相同范例的网站开发有哪些选择 - Web 前端从与移动应用程序相同的 JSON 端点获取数据？

我听说过 AngularJS 和 Backbone.js 的名字，但也许 Sinatra 就足够了？我宁愿不使用 PHP。

我更喜欢轻量级的解决方案。如果可能的话，我希望它能够在模型更改时更新页面，尽管我猜这将取决于后端 API 的更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T09:10:32.790

如果您的服务和 UI 层*完全*分开，您将获得最大的收益。我的意思是，在设计服务时不要考虑特定的 UI，因为这样做可以最大限度地重用它们。我会推荐一个基于 Web 的 RESTful 服务实现，因为它们为 UI 集成提供了很大的灵活性。现在确实有大量图书馆能够使用来自此类服务的数据。

我不是 Ruby 开发人员，但这是 Sinatra 中的一个简单的 Web 服务实现：

```
require 'rubygems'
require 'sinatra'
require 'lib/posts'

post '/posts'
    post = Post.create! params
    redirect "/posts/#{post.id}"
do

get 'posts/:id' do
    @post = Post.find(params[:id])
    erb :post
end 
```

*归因：[使用 Sinatra 和 RESTClient 的轻量级 Web 服务](http://www.slideshare.net/adamwiggins/lightweight-webservices-with-sinatra-and-restclient-presentation)*。

请注意，用于服务实现的实际语言/平台是无关紧要的，只要它是 RESTful 的，并且返回客户端可以轻松使用的数据。一旦你有了这个设置，那么设计一个 web 应用程序和一个移动应用程序就变成了选择一个合适的集成库的问题：

*   **HTML(5)/CSS/Javascript**。更强大的选项之一，因为它可用于实现移动和 Web 应用程序。上述三项技术构成了新 Web 2.0 架构的核心，并且存在各种框架：[Angular.js](http://angularjs.org/)、[Ext.js](http://www.sencha.com/products/extjs)、[Backbone.js](http://backbonejs.org/)、[Knockout.js](http://knockoutjs.com/)，甚至[jQuery Mobile](http://jquerymobile.com/)或[Bootstrap](http://twitter.github.io/bootstrap/)。这是目前最常用的将 Web 服务 API 与 Web 应用程序集成的方式。请注意，在某些情况下，您甚至可以只设计一个网站，然后将其用作您的移动应用程序的基础（例如，通过 iOS UIWebView/Android WebView）。
*   **中间层代理**：如果您想在浏览器中取消 Ajax（出于安全目的，或避免 XSS 问题），您将采用这条路线。代理可以用任何语言（Java、PHP、Ruby、Perl）编写，并负责使用您的 Web 服务并为您的 UI 生成动态 HTML。

作为一个真实的例子，我当前的项目有大量使用 Java EE/JAX-RS 构建的 RESTFul Web 服务，这些服务在集群 JBoss 服务器上运行。这些服务默认返回 JSON，但也可以生成 XML，并且可以从以下位置访问：

*   使用 Ext.js 构建的各种内部和外部 Web 应用程序
*   使用 AFNetworking/RestKit/NSURLConnection 组合的 iOS 应用程序
*   [使用Jersey REST 客户端](https://jersey.java.net/nonav/documentation/latest/client-api.html)的 Android 应用程序

完全相同的服务被多个不同的平台/用户界面使用，服务端不需要更改。这就是我相信你正在努力实现的目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T10:39:17.557

一种选择，因为您熟悉本机开发，我假设您对 java 很好，那么我建议您使用[DropWizard](http://dropwizard.codahale.com/)进行 API 开发，它将通过 RESTful 端点提供 JSON。

该网站与您在移动应用程序中执行的过程完全相同，只是您使用 Web 开发语言进行编码。

向 API 发送请求。获取 JSON 响应。将 JSON 解析为对象。使用 HTML、CSS 等创建对象的 UI 表示。显示 UI 表示。

您需要做的就是决定使用哪种语言来进行 POST/GET - PHP、Ajax 或您选择的其他语言。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T10:28:32.470

根据我的经验，当我开发一个多平台应用程序时，我会尽量使我的代码和算法可重用。因此，当我准备一个 API（例如 PHP 和 MySQL）时，我对所有平台使用相同的数据检索格式。移动项目和 Web 项目都可以通过 JSON 或 XML 读取和发送数据，所以我认为这无关紧要。

尽管如果您将所有数据库连接集中在 API 上，您将在很大程度上减少连接（和错误）的数量。

您可以在 Foursquare 上看到一个正在运行的示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T13:01:00.647

AngularJS 确实适用于单页类型的应用程序，以 Web 服务为食。与 jQuery ajax 调用 (imo) 相比，它的学习曲线要​​陡峭一些，因此根据您的需要，使用 jQuery 创建应用程序可能更有意义。

其他 JS MVC 框架（knockout、ember.js）在从 JSON 源获取数据方面可能具有类似的功能，但我对它们不是很熟悉，所以你可以看看并决定。

否则，您只需创建一个起始 html 页面，并在加载后启动对服务的 ajax 调用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-16T18:31:42.910

在我的“前世”中，我曾经是一名 Web 开发人员（10 年），现在我是一名全职的移动开发人员（从 2.5 年前开始）并且我使用 SOAP 或 REST API 创建了 Android 和 iOS 应用程序.

在 Web 上，我喜欢使用 JQuery 和 JQuery-UI。JQuery 有非常简洁的方法从 SOAP 或 REST Web 服务获取 JSON 数据，以填充网格、表单、在等待响应时显示进度的控件等。查看：[http://api.jquery.com/jQuery。获取JSON/](http://api.jquery.com/jQuery.getJSON/)

我目前正在开发一个带有 REST 操作和 JSON 数据的 iOS 应用程序，Web 开发团队正在构建一个后端网站，使用主干.js 和 JSON-REST 操作将前端与我通过 iOS 交谈的同一后端连接起来JSON-REST。我知道他们经常使用backbone.js 的解析（读取JSON）、collection.toJSON()（转换为JSON）和模型同步方法（更多信息请[参见http://backbonejs.org/](http://backbonejs.org/)）。

所以...我同意其他人的观点，只要您可以从 REST 获取 JSON，您就可以在您的 Web 和移动应用程序上使用相同的方法。

这是一篇关于以正确方式构建 RESTful API 服务器的精彩博客文章：http: [//blog.mugunthkumar.com/articles/restful-api-server-doing-it-the-right-way-part-1/](http://blog.mugunthkumar.com/articles/restful-api-server-doing-it-the-right-way-part-1/)。

祝你好运！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-15T19:49:40.720

据我了解，您正在寻找一个易于学习和构建动态网站的轻量级 Web 开发框架。

根据您的要求，Web 前端应该能够发出 HTTP GET/POST 请求以从 API 获取 JSON 数据。以下选项最适合您：

1.  HTML + AJAX（用于非常简单的动态网站）
2.  PHP + AJAX（用于更复杂的网站）

GET/POST 请求是使用 JS 库（例如 jQuery）作为 AJAX 调用进行的。此外，jQuery 提供了解析 JSON 响应的函数。

所以本质上你需要学习 PHP 和 jQuery，它们都非常流行且易于使用，并且背后有巨大的社区支持。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T08:37:58.717

通过使用 Web 服务（JSON 内容）来开发 Web 应用程序有两种主要方法

*   **纯基于 HTML 的方法**：在此模型中，您不需要任何服务器端脚本，例如 PHP、JSP 和 ASP.Net 等。基于 JSON 的 REST 服务将由 JavaScript 使用并将数据呈现为 HTML 组件。编程模型现在更流行，应用程序将变得流畅并且表现得像桌面应用程序一样。有很多框架可以帮助您实现这一目标。它们在之前的答案中已经提到过，例如 Angular.js、Ext.js、Backbone.js、Knockout.js、DoJo、Bootstrap。甚至该框架中的一些支持与 UI 组件和基于服务器端 JSON 的休息服务的数据绑定。不需要任何编码来使用 REST 服务和呈现 UI 组件。它将通过此​​客户端框架自动完成。示例 DoJo

*   **HTML 和服务器端脚本**：在这种方法中，您需要使用任何服务器端脚本语言，如 PHP、JSP、JSF 和 RoR、Django 等框架来实现这一目标。由于它涉及其他脚本语言和框架，因此与基于 HTML 和 JS 的方法相比，它具有学习曲线。

总之，我建议从第一种方法开始。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-22T10:56:34.200

由于您已经在 Ruby 之上构建了 api，因此请考虑使用 Ruby on Rails。我是一名 C#/iOS 开发人员，直到最近才研究过 Ruby on Rails。这是一门很棒的语言，非常容易和灵活。有关更多信息，请查看此链接[http://railsinstaller.org/](http://railsinstaller.org/)。

它还为您提供了更大的灵活性来实现 jQuery 和其他基于 javascript 的库。

您可以使用 Sqlite、MySql 和 PostgreSQl 数据库。

# opengl-3 - OpenGL枚举显卡

> ID：15986630
> 
> 赞同：1
> 
> 时间：2013-04-13T10:06:19.317
> 
> 标签：opengl-3

并非所有图形视频卡都支持 OpenGL 3.3。在我的电脑上，我有 2 个图形卡、一个基本的 Intel 视频卡和一个 ATI Radeon。只有 Radeon 支持 OGL 3 或更高版本，但我的默认卡是 Intel 卡，所以当应用程序启动时，默认它是在 Intel 适配器上启动的。

我正在尝试使用 OpenGL 3.3 编写软件，如何在我的软件中选择运行时，在哪张卡上获取 OpenGL 上下文？

# python - 多行正则表达式匹配

> ID：15986631
> 
> 赞同：2
> 
> 时间：2013-04-13T10:06:23.573
> 
> 标签：python, regex

我有一个看起来像这样的文件：

```
useless stuff

fruit: apple
fruit: banana

useless stuff

fruit: kiwi
fruit: orange
fruit: pear

useless stuff 
```

这个想法是按照它们出现的顺序和分组来捕获所有水果名称。对于上面的示例，输出必须类似于：

```
[['apple', 'banana'], ['kiwi', 'orange', 'pear']] 
```

我通过遍历多行 regexp 的所有匹配项来成功地做到这一点，`'^fruit: (.+)$'`如果发现它们的行彼此跟随，则将水果名称添加到相同的给定列表中。

但是，这对于对水果名称进行替换是不切实际的（跟踪匹配开始和结束索引成为强制性的），所以我更愿意在单个正则表达式中执行此操作。

我试过这个：

```
re.findall(r'(?:^fruit: (.+)$\n)+', thetext, re.M) 
```

但它只返回一行。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:26:09.333

这允许您保留您的正则表达式，正如您所说，您以后可能需要更复杂的表达式：

```
>>> import re
>>> from itertools import groupby
>>> with open('test.txt') as fin:
        groups = groupby((re.match(r'(?:fruit: )(.+)', line) for line in fin),
                         key=bool) # groups based on whether each line matched
        print [[m.group(1) for m in g] for k, g in groups if k]
        # prints each matching group

[['apple', 'banana'], ['kiwi', 'orange', 'pear']] 
```

没有正则表达式：

```
>>> with open('test.txt') as f:
        print [[x.split()[1] for x in g]
               for k, g in groupby(f, key=lambda s: s.startswith('fruit'))
               if k]

[['apple', 'banana'], ['kiwi', 'orange', 'pear']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:38:34.173

我认为如果您像这样使内部组不捕获，您会看到问题：

```
re.findall(r'(?:^fruit: (?:.+)$\n)+', thetext, re.M)
# result:
['fruit: apple\nfruit: banana\n', 'fruit: kiwi\nfruit: orange\nfruit: pear\n'] 
```

问题是每个匹配都匹配一整行行`fruit:`，但捕获组（在您的原始解决方案中）捕获多次。由于捕获组只能有一个与之关联的值，因此它以最后一个捕获的子字符串结束（我认为 last 的选择是任意的；我不会指望这种行为）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T10:55:35.520

另一种方式：

```
import re
with open('input') as file:
    lines = "".join(file.readlines())
    fruits = [[]]
    for fruit in re.findall(r'(?:fruit: ([^\n]*))|(?:\n\n)', lines, re.S):
        if fruit == '': 
            if len(fruits[-1]) > 0:
                fruits.append([])
        else:
            fruits[-1].append(fruit)
    del fruits[-1]
    print fruits 
```

**输出**

```
[['apple', 'banana'], ['kiwi', 'orange', 'pear']] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T11:01:51.180

您不能在正则表达式中以这种方式进行“分组”，因为通常一个组只捕获其最新匹配项。一种解决方法是从字面上重复一个组：

```
matches = re.findall(r'(?m)(?:^fruit: (.+)\n)(?:^fruit: (.+)\n)?(?:^fruit: (.+)\n)?', text)
# [('apple', 'banana', ''), ('kiwi', 'orange', 'pear')] 
```

如果这适合您的任务（例如，不超过 5-6 组），您可以轻松地即时生成此类表达式。如果没有，唯一的选择是两次匹配（我想这与您已经拥有的类似）：

```
matches = [re.findall(': (.+)', x) 
    for x in re.findall(r'(?m)((?:^fruit: .+\n)+)', text)]
# [['apple', 'banana'], ['kiwi', 'orange', 'pear']] 
```

一个非标准（尚未）的[正则表达式](https://pypi.python.org/pypi/regex/)模块提供了一种有趣的方法，称为“捕获”。`m.captures(n)`返回组的所有匹配项，而不仅仅是最新的匹配项，如下所示`m.group(n)`：

```
import regex
matches = [x.captures(2) for x in regex.finditer(r'(?m)((?:^fruit: (.+)\n)+)', text)]
# [['apple', 'banana'], ['kiwi', 'orange', 'pear']] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T10:33:36.050

除非您绝对必须这样做，否则我不是使用正则表达式的忠实粉丝。退后一步，看看你的情况，我的第一个倾向是考虑你是否实际上不应该在将输入文件输入 python 之前使用 awk 等专用工具将输入文件按摩成 csv 之类的东西。

话虽如此，您当然仍然可以使用清晰的无正则表达式 python 完成您想要做的事情。一个例子（我确信可以在不牺牲透明度的情况下减少它）：

```
# newlst keeps track of whether you should start a new sublist
newlst=False
# result is the end result list of lists
result = []
# lst is the sublist which gets reset every time a grouping concludes
lst = []

with open('input.txt') as f:
    for line in f.readlines():
        # is the first token NOT a fruit?
        if line.split(':')[0] != 'fruit':
            # if so, start a new sublist
            newlst=True
            # just so we don't append needless empty sublists
            if len(lst) > 0: result.append(lst)
            # initialise a new sublist, since last line wasn't a fruit and
            # this implies a new group is starting
            lst = []
        else:
            # first token IS a fruit. So append it to the sublist
            lst.append(line.split()[1])

print result 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-13T10:49:33.057

怎么样：

```
re.findall(r'fruit: ([\w]+)\n|[^\n]*\n', str, re.M); 
```

结果：

```
['', '', 'apple', 'banana', '', '', '', 'kiwi', 'orange', 'pear', ''] 
```

这可以很容易地转换为 [['apple', 'banana'], ['kiwi', 'orange', 'pear']]

[ideone 中的示例](http://ideone.com/Vo5BsD)

# ruby-on-rails - RoR：Instagram API：分页没有出现在 JSON 中？还缺少媒体？

> ID：15986634
> 
> 赞同：0
> 
> 时间：2013-04-13T10:07:02.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, instagram

我已经输出了一些 JSON，但我缺少分页信息？

我正在寻找分页，因为我有我想要显示的照片数量，但它没有显示我想要的数量。

这是在我的控制器中：

```
client = Instagram.client(:access_token => session[:access_token])
@user = client.user
@recent_media_items = client.user_recent_media

@tag_media_items = client.tag_recent_media('cat', options = {:count => 60})

@location_media_items = client.location_recent_media('12345', options = {:count => 60}) 
```

在我看来，我有这个：

```
<% (@tag_media_items+@location_media_items).sort{|a,b| -(a.created_time <=> b.created_time)}.each do |media| %>
    <span>
    <img src="<%= media.images.thumbnail.url %>">
    </span>
<% end %> 
```

这几乎将这两种媒体放入一个数组中，并按 created_time 对其进行排序。但是当它输出时，我总共只得到了 42 张图片，而不是 120 张。我查看了 instagram，图片与我测试的搜索匹配，但它还有更多图片！

分页中的附加图像是我看不到的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:34:44.550

我认为 Instagram API 仍然没有为媒体搜索（地理）查询提供分页。

[https://groups.google.com/forum/?fromgroups=#!topic/instagram-api-developers/aLanTqk3LnY](https://groups.google.com/forum/?fromgroups=#!topic/instagram-api-developers/aLanTqk3LnY)

和

[https://groups.google.com/forum/?fromgroups=#!searchin/instagram-api-developers/pagination/instagram-api-developers/qY_dqCPj-k8/y4u7y4sF1GQJ](https://groups.google.com/forum/?fromgroups=#!searchin/instagram-api-developers/pagination/instagram-api-developers/qY_dqCPj-k8/y4u7y4sF1GQJ)

:(

# wpf - 如何以编程方式设置绑定路径值

> ID：15986636
> 
> 赞同：2
> 
> 时间：2013-04-13T10:07:24.423
> 
> 标签：wpf, binding

`Style`我的 XAML 文件中有配置：

```
<Style x:Key="CostEstimatesDataGridRowStyle" TargetType="controls:DataGridRow" BasedOn="{StaticResource ReportDataGridRowStyle}">
        <Style.Triggers>
            <DataTrigger Value="True" >
                <DataTrigger.Binding>
                    <MultiBinding Converter="{x:Static controls:Converters.AndValueConverter}">
                        <Binding Path="IsEmpty"/>
                        <Binding Path="IsPrinting">
                            <Binding.RelativeSource>
                                <RelativeSource
                                      Mode="FindAncestor"
                                      AncestorType="{x:Type controls:SinglePageReport}"
                                    />
                            </Binding.RelativeSource>
                        </Binding>
                    </MultiBinding>
                </DataTrigger.Binding>
                <Setter Property="Visibility" Value="Collapsed"/>
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

这种风格适用于`DataTemplate`：

```
<DataTemplate x:Key="EstimateGridTemplate">
        <GroupBox Header="{Binding Path=Category.Category}">
            <GroupBox.Content>
                <Grid>                      
                    <controls:DataGrid

                        ItemsSource="{Binding Path=Estimates}"

                        ItemContainerStyle="{StaticResource CostEstimatesDataGridRowStyle}">                            
                </Grid>
            </GroupBox.Content>
        </GroupBox>
    </DataTemplate> 
```

我的问题是如何以`IsPrinting`编程方式设置值？

# android - 在 Android 应用程序中实现二维图（条形图、饼图等）时的问题

> ID：15986637
> 
> 赞同：1
> 
> 时间：2013-04-13T10:07:31.463
> 
> 标签：android, graph, offline, offline-mode

在 Android 应用程序中实现二维图时，我遇到了一些问题。应用程序应该在离线模式下工作，并且应用程序不应该与任何服务器通信。所以我们不能使用任何api来实现图。

我们正在使用 sql lite 数据库来保存数据。该应用程序有一个接口来接受数据并将其保存在数据库中。在报告部分，我们根据数据库中的数据生成图表。

现在为此目的使用一个名为“achartengine”的库。但是我们在根据客户的设计定制它时遇到了一些问题。我们需要实现三个图。两个条形图和一个饼图。我们几乎已经实现了图形的 2d 版本，但我们无法在图形内写入数字。哪个是实现图表的更好方法？请指教

期待你的回复。

# sharepoint - Sharepoint 2010：以编程方式将文档添加到大型库

> ID：15986642
> 
> 赞同：0
> 
> 时间：2013-04-13T10:08:39.810
> 
> 标签：sharepoint, sharepoint-2010

我们有一个系统，其中使用 Web 界面将文档上传到 SharePoint 库。我正在使用客户端 API 完成此操作。具体来说，我使用 SaveBinaryDirect 上传文档，之后使用 CAML 查询检索文档，以便可以设置元数据列。CAML 查询基于 FileLeafRef 字段检索文档，该字段填充了已上传文档的文件名。

问题在于，SharePoint 对从任何查询返回的最大限制为 5000 个项目，因此一旦文档库增长到 5000 个项目，CAML 查询将不再起作用。（尽管它只返回单个文档，但显然需要扫描整个库）

我已经调查过索引列，但显然你不能索引 FileLeafRef，而且它似乎是唯一在上传时立即填充文档名称的字段。我已经通过将项目限制从 5000 增加到 10000 来推迟这个问题，但是我们即将遇到这个新限制，人们开始报告间歇性的性能问题。

有没有办法通过客户端 API 上传文档并设置它们的元数据而不会超出最大项目限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:59:42.990

也许您可以创建另一个字段（文本字段）作为 FileLeafRef 的简单副本，然后为这个新字段编制索引？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:48:42.323

通过不依赖 CAML 来定位文件解决了该问题。相反，我使用的是不受项目限制的 GetFileByServerRelativeUrl。文件对象有一个名为 ListItemAllFields 的方法，它允许您查询和设置元数据。

如果需要返回具有文件名以外的条件的项目，上述方法将允许最初设置元数据，从而可以存储和索引满足查询所需的任何条件。

如果需要根据未编入索引或无法编入索引的条件来查询大型列表，那么该解决方案似乎涉及使用 ContentIterator 对象以小批量方式吐出列表。但这似乎不适用于客户端 API，所以我不知道您应该如何以编程方式处理大型列表。

# css - 将背景添加到 h1，仅在 apty 空间上

> ID：15986644
> 
> 赞同：0
> 
> 时间：2013-04-13T10:08:42.930
> 
> 标签：css, html-heading

我正在努力达到这种效果

![基本示例](https://i.stack.imgur.com/Oiu8j.gif)

基本上，我希望标题的背景跨越可用空间，而不是在文本下方。问题是这需要是动态的，因为文本可以是多种语言。我不能简单地将另一个背景放在文本的单独跨度中，因为整个背景使用了图案图像，并且它不能只是根据文本的长度随机开始和停止。

我希望我说得够清楚！

编辑：由于这个例子不够清楚，这里是另一个： ![在此处输入图像描述](https://i.stack.imgur.com/GwHUt.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:11:21.327

把它`<h1>`放在一个包装纸里。

```
<div class="wrapper">
    <h1>This is some text</h1>
    <div class="background"></div>
</div> 
```

然后将背景设置为`table-cell`100% 宽度。

```
div.wrapper {
    display: table;
    width: 100%;
}

div.wrapper h1 {
    font-family: sans-serif;
    font-size: 20px;
    color: #056;
    white-space: nowrap;
    margin: 0 1em;
}

.background {
    background-color: #000;
    display: table-cell;
    width:100%;
} 
```

见[演示](http://jsfiddle.net/laucheukhim/K6mfW/3/embedded/result/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:11:12.143

只需将 h1 放入 div

```
<div class="header">
    <h1>Title</h1>
</div> 
```

然后将其风格化[http://jsfiddle.net/yh6Nn/](http://jsfiddle.net/yh6Nn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T10:30:34.400

如果你想要一个纯 CSS hack，你可能想要探索`:after`伪元素和`content`属性。

[http://jsfiddle.net/FYDXr/2/](http://jsfiddle.net/FYDXr/2/)

不过，我不知道如何让它填满剩余的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T13:30:24.497

如果您想支持最大数量的浏览器，那么您需要添加一些额外的标记才能使其工作：

[http://tinker.io/b6848](http://tinker.io/b6848)

```
<h1><span>Header Text</span><span/></h1>

body {
    background: url(http://placekitten.com/600/400);
}

h1 {
    display: table;
    width: 100%;
}

h1 span {
    display: table-cell;
    white-space: pre;
}

h1 span:last-child {
    background: black;
    width: 100%;
} 
```

有一种方法可以在不使用 Flexbox 的额外标记的情况下做到这一点，但它目前仅适用于 Chrome、Opera、IE10、启用了实验性 Flexbox 支持的 Firefox 版本，也许还有 Safari。

# css - 没有在周围 div 上填充的情况下，margin-top 无法按预期工作

> ID：15986648
> 
> 赞同：1
> 
> 时间：2013-04-13T10:09:44.313
> 
> 标签：css, padding, margins

我在容器 div 内的 div 中有一个图像。当我对图像应用边距顶部时，边距会相对于主体向下应用到容器 div 之外（将容器推向下方）。

我可以通过在另一个 div 上应用填充来“解决”这个问题......但我宁愿在我的图像上有一个边距。如果我在另一个（不是容器）div 上应用 1px 填充，那么 margin-top 在将图像向下推时会按预期工作。

**CSS：**

```
body {
    background: #bada44
}
.container {
    background: #776;
}
.other {
    background: #ccc;
    /*padding: 1px;*/
}
img {
    width: 33%;
    display: block;
    margin: 0 auto;
    margin-top: 30px;
} 
```

**HTML**

```
<div class="container">
    <div class="other">
        <img src="something.jpg" />
    </div>
</div> 
```

jsFiddle：http: [//jsfiddle.net/mguQY/1/](http://jsfiddle.net/mguQY/1/)

我正在使用 Chrome

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:17:22.810

似曾相识 :D 添加`overflow: hidden;`到`.other`:

```
.other {
    background: #ccc;
    /*padding: 1px;*/
    overflow: hidden;
} 
```

[http://jsfiddle.net/mguQY/2/](http://jsfiddle.net/mguQY/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:15:33.007

使用 padding-top 而不是 margin-top

# android - android中的java堆空间问题？

> ID：15986650
> 
> 赞同：3
> 
> 时间：2013-04-13T10:09:56.910
> 
> 标签：android, eclipse

我在我的项目中附加了四个库，但是当我尝试运行这个项目时，那个时候 Eclipse 显示错误对话框，错误为“堆空间出现问题”。那我该怎么办？任何与此相关的想法都会有所帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T10:15:56.397

在你的eclipse中，安装文件夹找到`eclipse.ini`

![在此处输入图像描述](https://i.stack.imgur.com/9UpEV.png)

并编辑此文件以增加堆大小，如下所示

```
-Xms40m
-Xmx512m 
```

更像是

```
-Xms256m
-Xmx1024m 
```

编辑 ：

您的 eclipse.ini 设置更改只有在您更改以下内容时才会生效：

运行 -> 外部工具 -> 外部工具配置。

转到您使用的配置，在 jre 选项卡 -select 选项下

在工作区中的相同 JRE 中运行。

有关该主题的更多信息，请查看此链接。

[Eclipse 的最佳 JVM 设置是什么？](https://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse)

# android - socialauth-android 授权成功，但验证码为空

> ID：15986651
> 
> 赞同：3
> 
> 时间：2013-04-13T10:09:57.513
> 
> 标签：android, facebook, socialauth

我正在使用 socialauth-android 让我的 Android 用户在 Facebook 上进行身份验证。

我的问题如下：

我可以成功显示 Facebook 登录页面，用户可以在其中输入凭据并授权我的应用程序。授权完成后，应调用与SocialAuthAdapter关联的ReponseListener的回调方法onComplete。

**这永远不会发生，因为我收到一个异常说验证码为空，但我可以在 facebook 用户页面上看到我的应用程序已获得授权。**

似乎在成功授权后，提供者还需要一个验证码，以便客户端可以将其包含在下一个请求中。

我也不明白这个空代码是用户会话令牌还是其他东西。

有没有人遇到过类似的问题？如何解决？

如图所示，我已将我的 Facebook 应用程序配置为原生 Android 应用程序 ![**Facebook 应用配置**](https://i.stack.imgur.com/lAXhM.png)

显示了代码的简化版本。

```
public class LoginActivity extends Activity {

private static final String LOG_TAG = "LoginActivity";

SocialAuthAdapter adapter;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);

    adapter = new SocialAuthAdapter(new ResponseListener());

            //  [.....]
}
/**
* This method is invoked when the user click on my Facebook button to initiate the
* the authentication process with Facebook
*/
protected void doLogin(){
    adapter.authorize(this, Provider.FACEBOOK);
}

private final class ResponseListener implements DialogListener {

   @Override
   public void onComplete(Bundle values) {

     // Variable to receive message status
     if (Log.isLoggable(LOG_TAG, Log.DEBUG)) {
       Log.d(LOG_TAG, "Authentication Successful"); 
     }

     adapter.getUserProfileAsync(new SocialAuthListener<Profile>() {

        @Override
        public void onError(SocialAuthError arg0) {

           Log.e(LOG_TAG, "Cannot retrieve user profile");

        }

        @Override
        public void onExecute(Profile profile) {

           Log.d(LOG_TAG, "ValidatedId = " + profile.getValidatedId()); 

     });

  } 
```

堆栈跟踪是

```
Retrieving Access Token in verify response function
Verifying the authentication response from provider
org.brickred.socialauth.exception.SocialAuthException: Verification code is null
at org.brickred.socialauth.oauthstrategy.OAuth2.verifyResponse(OAuth2.java:114)
at org.brickred.socialauth.oauthstrategy.OAuth2.verifyResponse(OAuth2.java:102)
at  org.brickred.socialauth.provider.FacebookImpl.doVerifyResponse(FacebookImpl.java:164)
at org.brickred.socialauth.provider.FacebookImpl.verifyResponse(FacebookImpl.java:154)
at org.brickred.socialauth.SocialAuthManager.connect(SocialAuthManager.java:183)
at  org.brickred.socialauth.android.SocialAuthDialog$SocialAuthWebViewClient$1.run(SocialAuthDialog.java:243)
at java.lang.Thread.run(Thread.java:856)
org.brickred.socialauth.exception.SocialAuthException: Verification code is null
org.brickred.socialauth.android.SocialAuthError: Unknown Error 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:48:08.180

**[http://code.google.com/p/socialauth-android/issues/detail?id=52](http://code.google.com/p/socialauth-android/issues/detail?id=52)**

**[您已经授权您的应用](https://stackoverflow.com/questions/16059447/you-have-already-authorized-yourapp/16145002#16145002)**

这已修复并回答了类似的问题。只需更新罐子并删除以前的罐子。请记住，它（罐子）仍处于测试阶段。

# php - 是否可以使用 php 和 javascript 访问相同的 sqlite 数据库？

> ID：15986652
> 
> 赞同：0
> 
> 时间：2013-04-13T10:10:00.450
> 
> 标签：php, javascript, database, sqlite

PHP 能够找到我用 javascript 创建的数据库，但是 php 无法找到我用 javascript 创建的表和（因此数据）。

在php中打开数据库

```
$dbhandle = sqlite_open('db.sqlite', 0666, $error); 
```

在javascript中打开数据库

```
db = openDatabase('db.sqlite', '1.0', 'db.sqlite', 65536); 
```

我希望我提供了足够的信息，如果需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:14:56.723

Javascript是客户端，而PHP是服务器端。

您将需要保持单独的数据库并同步它们

# php - 以 pdf 格式下载 div 中的数据库结果。单击按钮另存为 pdf 或下载 pdf

> ID：15986653
> 
> 赞同：0
> 
> 时间：2013-04-13T10:10:03.457
> 
> 标签：php, jquery, html, pdf, download

我正在根据下拉列表选择从数据库中加载两个图像和两个表。
我正在使用 PHP 和 MySQL。

```
<select name="month" id="month">
<option>Select Month</option>
<option value="Jan">Jan</option>
<option value="Feb">Feb</option>
</select>

<div id="contentDiv">two images and two tables</div>

<input name="submit" type="submit" value="Download" /> 
```

我想允许用户下载一个 PDF 文件，该文件仅包含生成的**DIV** ( ) 中的内容（动态生成`contentDiv`）。我怎样才能做到这一点？我尝试了很多插件，但没有找到合适的。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:13:18.087

Sol 1 [***.TCPD***](http://www.tcpdf.org/)：用于生成 PDF 文档的开源 PHP 类。

溶胶 2。***[王子XML](http://princexml.com/)*** .

它绝对是最好的 HTML/CSS 到 PDF 转换器，虽然它不是免费的（但是，您的编程也不是免费的，所以如果它可以为您节省 10 个小时的工作时间，那么您就可以免费回家了。）

溶胶 3\. ***[DOMPDF](https://github.com/dompdf/dompdf)***

溶胶 4\. ***[HTML2PDF 和 HTML2PS](http://www.tufat.com/s_html2ps_html2pdf.htm)***：

溶胶 5\. ***[Htmldoc](http://www.easysw.com/htmldoc/)***：

# android - 夏洛克 SearchView 总是折叠

> ID：15986658
> 
> 赞同：0
> 
> 时间：2013-04-13T10:10:14.927
> 
> 标签：android, actionbarsherlock

我想查看带有 Sherlock 库的 searchView。这是我的活动：

```
public class PointActivity extends SherlockFragmentActivity{
.
.
.

@Override
  public boolean onCreateOptionsMenu(Menu menu) {
  // Inflate the menu; this adds items to the action bar if it is present.
  getSupportMenuInflater().inflate(R.menu.point, menu);
  return true;
} 
```

这是我的菜单：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/menu_search"
    android:actionViewClass="com.actionbarsherlock.widget.SearchView"
    android:showAsAction="ifRoom|collapseActionView"
    android:title="Search"/>
</menu> 
```

为什么我的搜索视图总是折叠？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:33:46.357

如果要扩展`SearchView`on 活动开始，请将这些行添加到`onCreateOptionsMenu`：

```
MenuItem searchItem = menu.findItem(R.id.menu_search);
searchItem.expandActionView(); 
```

# java - 从外部类访问内部类私有变量

> ID：15986659
> 
> 赞同：2
> 
> 时间：2013-04-13T10:10:29.127
> 
> 标签：java, inner-classes, outer-classes

我正在尝试从外部类访问内部类内部的私有 val，而不创建内部类的实例。

这甚至可以从 访问`private inner class`值`the outer class`吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T10:15:24.727

如果该字段是`static`，您已经可以从外部类访问它，即使它是`private`. 您不需要内部或外部类的实例：

```
public class Clazz {
    class Inner {
        private static final int N = 10;
    }
    public static void main(String[] args) {
        System.out.println(Inner.N);
    }
} 
```

如果内部类字段 not ，则如果没有内部类的实例`static`，它就不*存在。*您无法访问不存在的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T10:15:52.587

最简洁的答案是不。

较长的答案如下。内部类只是一个常规类，它具有对其外部类*实例*的“魔术”引用，可以通过`OuterClass.this`. 创建外部类的实例不会自动创建内部类的实例。这意味着您不能根据定义从外部类访问内部类的成员而不创建内部类的实例，除非内部类本身及其成员是`static`.

实际上，您可以创建一个外部类实例和 10 个相应内部类实例。如何在不创建实例的情况下访问内部类的成员？

顺便说一句，一般建议：除非你真的需要它们，否则避免创建内部类。

# php - PHP/Apache - 会话不粘连

> ID：15986662
> 
> 赞同：1
> 
> 时间：2013-04-13T10:10:40.660
> 
> 标签：php, apache, session, mod-rewrite

我在 Windows 7 (x64) 上使用 Apache 2.4.4 和 PHP 5.4.14。我遇到的问题是 php 会话不坚持。这也发生在 Apache 2.2 和 PHP 5.4.4 上，昨天更新，希望它只是一个糟糕的设置`php.ini`，但没有任何改变。

在 chrome 中，只有当我使用重写规则时，每个页面的会话 id 都会发生变化。当使用重写规则时，cookie`path`会奇怪地更改为`/pages_name/`而不是保留`/`。

在歌剧中，即使我刷新页面，会话 ID 也会发生变化。在 IE 中也是如此。

在这两种情况下，浏览器都接受 cookie。

```
RewriteEngine on

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^([a-zA-Z]+)/([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/?$ index.php?page=$1&info1=$2&info2=$3 [L]
RewriteRule ^([a-zA-Z]+)/([a-zA-Z0-9]+)/?$ index.php?page=$1&info1=$2 [L]
RewriteRule ^([a-zA-Z]+)/?$ index.php?page=$1 [L] 
```

搜索后，我遇到了一些“解决方案”，但都没有奏效

会话保存路径正在工作，正在写入文件。使用默认会话处理程序。

环境`session.cookie_path`为`/`

环境`session.cookie_lifetime`为其他`0`

我没有使用`session_regenerate_id`

`session_start( );`是所有页面的第一行代码

如果需要更多信息，我会更新这篇文章，谢谢。

* * *

在进一步研究中，它被证明是一个问题`RewriteRule`s 的一个问题，不知道如何解决它。

来自的 cookie`session_start( )`也设置`localhost/home/`为好像，它是一个文件夹，但它是一个变量`localhost/index.php?page=home`。正因为如此，每一页都有自己的`session id`，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:32:26.410

`session_start();`首先检查浏览器是否已发送当前 session_id，而不是通过 开始新会话。

```
if (isset($_POST['session_id'])) {
    $_COOKIE['PHPSESSID'] = $_POST['session_id'];
    session_start();
} else {
    session_start();
} 
```

如果这不起作用，那么您的 PHP 和/或 Apache 配置似乎已损坏。你为什么不尝试默认配置？

# image - 从中创建 tiff 16 位图像和 jpg 缩略图

> ID：15986670
> 
> 赞同：0
> 
> 时间：2013-04-13T10:11:19.887
> 
> 标签：image, image-processing, imagemagick, tiff, magick++

我正在使用 magick++ 创建 16 位 tiff 图像。它们是单色的，因此所有三个通道都具有相同的值。图像完成后，我会从中创建 png 或 jpg 缩略图。

我可以完美地可视化 Imagej 中的 tiff 和 png 图像。jpg 图像可以在 Imagej 中可视化，但它们会丢失很多颜色级别。

但是，在 Gnome、Firefox、Imagemagick 查看器或 Shotwell 等其他查看器中，所有图像（tiff、png 和 jpg）都是黑色的。

为什么？如何在每个查看器中正确查看图像？

# html - Paypal showing invalid quantity error when uploading shopping cart

> ID：15986674
> 
> 赞同：1
> 
> 时间：2013-04-13T10:11:32.680
> 
> 标签：html, paypal, e-commerce

I have made a paypal form to upload my custom shopping cart to paypal so customers can pay using payapal, however everytime I try to use it I am getting the following error on the paypal website:

"You have entered an invalid quantity value. A quantity value must be an integer greater than or equal to one."

Here is my code:

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
    <input type="hidden" name="cmd" value="_cart">
    <input type="hidden" name="upload" value="1">
    <input type="hidden"name="business" value="websales@myemail.co.uk">
    <input type="hidden" name="item_name_1" value="Multi-Purpose Grease - Renolit" >
    <input type="hidden" name="amount_1" value="4.13" >
    <input type="hidden" name="shipping_1" value="1.00" >
    <input type="hidden" name="quantity_1" value="1" >
    <input type="hidden" name="item_name_2" value="Blue Roll six pack, seconds" >
    <input type="hidden" name="amount_2" value="8.00" >
    <input type="hidden" name="shipping_2" value="1.00" >
    <input type="hidden" name="quantity_2" value="1" >
    <input type="hidden" name=" currency_code " value="GBP">
    <img alt="" border="0" src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" width="1" height="1">
    <img alt="" border="0" src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" width="1" height="1">
    <input type="hidden" name="hosted_button_id" value="KJXKVWA5MPEBY">
    <input type= "image"src="https://www.paypalobjects.com/en_US/GB/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal – The safer, easier way to pay online.">
</form> 
```

If anyone has any ideas it would be much appreciated, this has been driving me mad!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:11:53.700

You are mixing cart upload buttons with the cart upload command. The cart upload command should not have a hosted button id variable in it. It would need to look like the following.

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="upload" value="1">
<input type="hidden" name="business" value="my_email@my_site.com">

<input type="hidden" name="item_name_1" value="Football T-Shirt">
<input type="hidden" name="quantity_1" value="4">
<input type="hidden" name="amount_1" value="1.00">
<input type="hidden" name="on0_1" value="Color">
<input type="hidden" name="os0_1" value="Red">
<input type="hidden" name="on1_1" value="Size">
<input type="hidden" name="os1_1" value="Small">

<input type="hidden" name="item_name_2" value="Notebook">
<input type="hidden" name="quantity_2" value="2">
<input type="hidden" name="amount_2" value="2.00">
<input type="hidden" name="on0_2" value="Number of Pages">
<input type="hidden" name="os0_2" value="200">
<input type="hidden" name="on1_2" value="Type">
<input type="hidden" name="os1_2" value="3 Ring">

<input type="submit" value="PayPal">
</form> 
```

# android - 尝试编译本机代码时的权限问题

> ID：15986676
> 
> 赞同：0
> 
> 时间：2013-04-13T10:11:48.277
> 
> 标签：android, c, android-ndk, cygwin

在尝试使用 android-ndk-r8d 构建应用程序时，我收到以下错误消息：

```
$ /cygdrive/d/Android_NDK/android-ndk-r8-windows/android-ndk-r8/ndk-build
Prebuilt : libffmpeg.so libs/armeabi-v7a/libffmpeg.so
install: cannot open `./obj/local/armeabi-v7a/libffmpeg.so’ for reading: Permission denied
/cygdrive/d/Android_NDK/android-ndk-r8-windows/android-ndk-r8/build/core/build-binary.mk:409: recipe for target `libs/armeabi-v7a/libffmpeg.so’ failed
make: *** [libs/armeabi-v7a/libffmpeg.so] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T09:38:35.140

有同样的问题。解决方法是`chmod 777`（通过 cygwin）目录中有问题的 .so 文件`/obj/.../`。

# java - 使用 getGraphics() 绘制对象而不扩展 JFrame

> ID：15986677
> 
> 赞同：12
> 
> 时间：2013-04-13T10:11:50.383
> 
> 标签：java, swing, graphics2d, paintcomponent

如何绘制没有类（扩展`JFrame`）的对象？我找到`getGraphics`了方法，但它没有绘制对象。

```
import javax.swing.*;
import java.awt.*;
public class Main {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        frame.setSize(600, 400);

        JPanel panel = new JPanel();
        frame.add(panel);

        Graphics g = panel.getGraphics();
        g.setColor(Color.BLUE);
        g.fillRect(0, 0, 100, 100);
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-13T18:11:53.117

如果要更改组件的绘制方式（添加矩形），则需要`paintComponent()`在该组件中重新定义。在您的代码中，您使用的是 `getGraphics()`.

您不应该调用`getGraphics()`组件。您（对`Graphics`返回的）所做的任何绘制都将是临时的，并且在下次 Swing 确定需要重新绘制组件时将丢失。

相反，您应该覆盖`paintComponent(Graphics)`（`JComponent`或`JPanel`）方法，并使用`Graphics`作为参数接收的对象在此方法中进行绘制。

检查[此链接](http://docs.oracle.com/javase/tutorial/uiswing/painting/)以进一步阅读。

以下是您的代码，已更正。

```
import javax.swing.*;
import java.awt.*;

public class Main {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        frame.setSize(600, 400);

        JPanel panel = new JPanel() {
            @Override
            public void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.setColor(Color.BLUE);
                g.fillRect(0, 0, 100, 100);
            }
        };
        frame.add(panel);

        // Graphics g = panel.getGraphics();
        // g.setColor(Color.BLUE);
        // g.fillRect(0, 0, 100, 100);

        frame.validate(); // because you added panel after setVisible was called
        frame.repaint(); // because you added panel after setVisible was called
    }
} 
```

另一个版本，做**同样的事情**，但你可能更清楚：

```
import javax.swing.*;
import java.awt.*;

public class Main {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        frame.setSize(600, 400);

        JPanel panel = new MyRectangleJPanel(); // changed this line
        frame.add(panel);

        // Graphics g = panel.getGraphics();
        // g.setColor(Color.BLUE);
        // g.fillRect(0, 0, 100, 100);

        frame.validate(); // because you added panel after setVisible was called
        frame.repaint(); // because you added panel after setVisible was called
    }
}

/* A JPanel that overrides the paintComponent() method and draws a rectangle */
class MyRectangleJPanel extends JPanel {
    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.BLUE);
        g.fillRect(0, 0, 100, 100);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T10:14:27.313

您必须覆盖 JPanel 类中的paintComponent 方法。因此，您应该创建一个扩展 JPanel 并覆盖子类中的paintComponent 方法的类

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-01T09:36:58.260

### java.awt.image.BufferedImage

* * *

为什么不只使用 的实例`java.awt.image.BufferedImage`？例如

```
BufferedImage output = new BufferedImage(600, 400, BufferedImage.TYPE_INT_RGB);

Graphics2D g2 = output.createGraphics();
g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, 
    RenderingHints.VALUE_ANTIALIAS_ON);
g2.setColor(Color.WHITE);
g2.fillRect(0, 0, output.getWidth(), output.getHeight());
g2.setColor(Color.BLUE);
g2.fillRect(0, 0, 100, 100);

JOptionPane.showMessageDialog(null, new ImageIcon(output)); 
```

# ruby-on-rails - OpenShift 部署本地应用程序

> ID：15986680
> 
> 赞同：1
> 
> 时间：2013-04-13T10:12:29.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, openshift

我遵循了他们的两个指南：

1.  [**在这里**](https://www.openshift.com/get-started#cli)设置 RHC gem[](https://www.openshift.com/get-started#cli)
***   [**在此处**](https://www.openshift.com/developers/remote-access#keys)设置私钥/公钥和 Putty[](https://www.openshift.com/developers/remote-access#keys)**

 ****但是我无法将我的 rails 应用程序部署到服务器。按照他们的教程，我必须使用 Git 部署它。这里没问题，所以我添加了我的项目目录`git add .`并提交了`git commit -a -m "OS Deploy"`，`Git push`但是这不会起作用，因为我不知道在哪里可以找到我的 OpenShift 应用程序的地址。

所以我不知道如何将代码从本地机器传输到 OpenShift 应用程序。

我该如何部署我的应用程序。也可以简单地从我的 git repo 中提取代码吗？

我找到了我的应用地址：`ssh://***094@corporation -eveonline.rhcloud.com/~/git/corporation.git/`

但是，当我尝试将本地应用程序推送到 OpenShift 时，我得到：

```
warning: no common commits
remote: Counting objects: 420, done.
remote: Compressing objects: 100% (202/202), done.
remote: Total 420 (delta 186), reused 420 (delta 186)
Receiving objects: 100% (420/420), 140.16 KiB | 138 KiB/s, done.
Resolving deltas: 100% (186/186), done.
From ssh://corporation-eveonline.rhcloud.com/~/git/corporation
 * branch            HEAD       -> FETCH_HEAD
Auto-merging script/rails
CONFLICT (add/add): Merge conflict in script/rails
Auto-merging config/routes.rb
CONFLICT (add/add): Merge conflict in config/routes.rb
Auto-merging config/initializers/session_store.rb
CONFLICT (add/add): Merge conflict in config/initializers/session_store.rb
Auto-merging config/initializers/secret_token.rb
CONFLICT (add/add): Merge conflict in config/initializers/secret_token.rb
Auto-merging config/environments/test.rb
CONFLICT (add/add): Merge conflict in config/environments/test.rb
Auto-merging config/environments/production.rb
CONFLICT (add/add): Merge conflict in config/environments/production.rb
Auto-merging config/environments/development.rb
CONFLICT (add/add): Merge conflict in config/environments/development.rb
Auto-merging config/environment.rb
CONFLICT (add/add): Merge conflict in config/environment.rb
Auto-merging config/database.yml
CONFLICT (add/add): Merge conflict in config/database.yml
Auto-merging config/application.rb
CONFLICT (add/add): Merge conflict in config/application.rb
Auto-merging config.ru
CONFLICT (add/add): Merge conflict in config.ru
Auto-merging app/views/layouts/application.html.erb
CONFLICT (add/add): Merge conflict in app/views/layouts/application.html.erb
Auto-merging app/controllers/application_controller.rb
CONFLICT (add/add): Merge conflict in app/controllers/application_controller.rb
Auto-merging app/assets/stylesheets/application.css
CONFLICT (add/add): Merge conflict in app/assets/stylesheets/application.css
Auto-merging Rakefile
CONFLICT (add/add): Merge conflict in Rakefile
Auto-merging README.md
CONFLICT (add/add): Merge conflict in README.md
Auto-merging Gemfile.lock
CONFLICT (add/add): Merge conflict in Gemfile.lock
Auto-merging Gemfile
CONFLICT (add/add): Merge conflict in Gemfile
Auto-merging .gitignore
CONFLICT (add/add): Merge conflict in .gitignore
Automatic merge failed; fix conflicts and then commit the result. 
```

所以我再次尝试推送到我的应用程序地址并没有收到该错误但是我确实收到了： [https](https://gist.github.com/nered/82d7ca1fa334617210c1) ://gist.github.com/nered/82d7ca1fa334617210c1错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:17:51.023

您是否查看过在 Ruby 开发者中心找到的资源？[https://www.openshift.com/developers/ruby](https://www.openshift.com/developers/ruby)

有一个快速入门 ( [https://github.com/openshift/rails-example](https://github.com/openshift/rails-example) )，您可以在部署自己的代码之前尝试它，只是为了熟悉部署 Rails 应用程序。在快速入门之后，您可以查看博客，看看它们是否也有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T16:20:42.227

您要做的是将[新的 git repo 与您自己现有的 git repo 同步](https://www.openshift.com/kb/kb-e1006-sync-new-git-repo-with-your-own-existing-git-repo)。****

# python - pygame中的碰撞

> ID：15986681
> 
> 赞同：1
> 
> 时间：2013-04-13T10:12:30.167
> 
> 标签：python, python-2.7, pygame, collision-detection, collision

我正在尝试将碰撞添加到我的游戏中，但遇到了问题。

碰撞在没有重力的情况下水平工作正常，它会停在它应该停在的地方以及所有这些，但是当我添加重力时它会吓坏。播放器开始“抖动”，当我按下任何移动键时，无论是向左还是向右，播放器都会向左飞行。任何人都可以帮忙吗？

**代码：**

```
import pygame, sys, time, random, math
from pygame.locals import *

BACKGROUNDCOLOR = (255, 255, 255)

WINDOWW = 800 
WINDOWH = 600
PLAYERW = 66
PLAYERH = 22
FPS = 60
MOVESPEED = 3
YACCEL = 0.13
ACCEL = 0.008
DECEL = 0.003
GRAVITY = 2
BLOCKSIZE = 30

pygame.init()
screen = pygame.display.set_mode((WINDOWW, WINDOWH), 0, 32)
mainClock = pygame.time.Clock()

testLevel = [
            (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,)]

def createblock(length, height, color):
    tmpblock = pygame.Surface((length, height))
    tmpblock.fill(color)
    tmpblock.convert()
    return tmpblock

def terminate(): # Used to shut down the software
    pygame.quit()
    sys.exit()

def add_level(lvl, bSize): # Creates the level based on a map (lvl) and the size of blocks
    bList = [] # List of every block
    bListDisp = [] # List of every block to display    
    bTypeList = [] # List with corresponding type of block(wall, air, etc.)

    for y in range(len(lvl)): 
        for x in range(len(lvl[0])):

            if lvl[y][x] == 0: # If the block type on lvl[y][x] is '0', write "air" down in the type list
                bTypeList.append("air")
            elif lvl[y][x] == 1: # If the block type on lvl[y][x] is '1', write "wall" down in the type list
                bTypeList.append("solid")

            bList.append(pygame.Rect((bSize * x), (bSize * y), bSize, bSize)) #Append every block that is registered
            bListDisp.append(pygame.Rect((bSize * x), (bSize * y), bSize, bSize)) #Append every block to display that is registered

    return bList, bListDisp, bTypeList

player = pygame.Rect(WINDOWW/2, (WINDOWH - BLOCKSIZE*2), PLAYERW, PLAYERH)

wallblock = createblock(BLOCKSIZE, BLOCKSIZE,(20,0,50))

lastTime = pygame.time.get_ticks()
isGrounded = False

vx = 0
vy = 0

allLevels = [testLevel] # A list containing all lvls(only one for now)
maxLevel = len(allLevels) # Checks which level is the last
currLevel = allLevels[0] # Current level(start with the first lvl)
blockList, blockListDisp, blockTypeList = add_level(currLevel, BLOCKSIZE) # A list with every block and another list with the blocks types

while True:
    # Input
    pressedKeys = pygame.key.get_pressed() # Checks which keys are being pressed
    timeDiff = pygame.time.get_ticks() - lastTime # Calculates time difference 
    lastTime +=  timeDiff # Last time checked reset to current time

    # Shut-down if the ESC-key is pressed or the window is "crossed down"
    for event in pygame.event.get():
        if event.type == QUIT or event.type == KEYDOWN and event.key == K_ESCAPE:
            terminate()    

    """X-axis control"""
    if pressedKeys[ord('a')]:
        vx = -MOVESPEED
    if pressedKeys[ord('d')]:
        vx = MOVESPEED
    if not pressedKeys[ord('d')] and not pressedKeys[ord('a')]:
        vx = 0

    player.x += vx
    player.y += vy

    # Gravity
    if not isGrounded:
        vy += 0.3
        if vy > 80:
            vy = 80

    """COLLISION"""
    for i in range(len(blockTypeList)): # Go through every block...
        if blockTypeList[i] == "solid": # ...and check what kind of block it is
            if player.colliderect(blockList[i]): #Apply necessary influences from the block(e.g. a solid block prevents the player from moving into it)
                if vx > 0:
                    player.right = blockListDisp[i].left
                    print 'Collide Right'
                if vx < 0:
                    player.left = blockListDisp[i].right
                    print 'Collide Left'
                if vy > 0:
                    player.bottom = blockListDisp[i].top
                    isGrounded = True
                    vy = 0
                    print 'Collide Bottom'
                if vy < 0:
                    player.top = blockListDisp[i].bottom
                    print 'Collide Top'

        elif blockTypeList[i] == "air":
            isGrounded = False

    screen.fill(BACKGROUNDCOLOR)

    for i in range(len(blockTypeList)):
        if blockTypeList[i] == "solid":
            screen.blit(wallblock, (blockListDisp[i].x, blockListDisp[i].y)) #blit the wall-block graphics

    pygame.draw.rect(screen, (0, 0, 0), player)

    pygame.display.update()
    mainClock.tick(FPS) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:17:32.497

## 以下对我有用：

尝试切换：

```
if pressedKeys[ord('a')]:
        vx = -MOVESPEED
    if pressedKeys[ord('d')]:
        vx = MOVESPEED 
```

进入

```
if pressedKeys[ord('a')]:
        vx = -1*MOVESPEED*timeDiff/3.0
    if pressedKeys[ord('d')]:
        vx = MOVESPEED*timeDiff/3.0
    if not pressedKeys[ord('d')] and not pressedKeys[ord('a')]:
        vx = 0

    player.x += vx
    player.y += vy 
```

这`3.0`只是一个限制因素。

请阅读速度和位移之间的区别，它们是不同的物理属性。

# node.js - 如何将 node.js REST 客户端与 UI 连接

> ID：15986683
> 
> 赞同：0
> 
> 时间：2013-04-13T10:12:46.277
> 
> 标签：node.js, node.js-client

我是 node.js 的新手。我有一个关于将我的 node.js 与 UI 连接的问题。我有一个 node.js 服务器，它生成带有基本身份验证的 rest API。我已经编写了一个 node.js REST 客户端，它将使用这个 APi 并在命令提示符下打印 Json。我需要有关如何将此 node.js 客户端与我的 UI 连接的解决方案。例如，我有 index.html 文件，我怎样才能让这个客户端连接到我 index.html。或者有没有其他方法可以让我的客户在 UI 中生成 JSon。我需要很少的建议我会非常感谢每一个建议提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:59:43.107

如果你有一个 Rest API，你可以使用 jquery 来调用这个 API 并修改页面。请参阅[文档页面](http://api.jquery.com/jQuery.getJSON/)和[示例](http://www.pureexample.com/jquery-get-json.html)。基本上，您的代码应该调用其余服务，并使用返回的数据来修改页面。

# unity3d - 应用发光效果时不能使用图像过滤器（不支持 npot-RT 或完全禁用 RT）

> ID：15986689
> 
> 赞同：0
> 
> 时间：2013-04-13T10:13:27.170
> 
> 标签：unity3d

我正在尝试将 GlowEffect 用于基本目的。但是收到以下消息并且不应用发光效果。

> 不能使用图像过滤器（不支持 npot-RT 或 RT 完全禁用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:08:04.833

图像过滤器仅在 Unity Pro中[受支持。](http://docs.unity3d.com/Documentation/Components/comp-ImageEffects.html)

# google-sheets - 谷歌电子表格 ImportXML

> ID：15986691
> 
> 赞同：4
> 
> 时间：2013-04-13T10:13:45.873
> 
> 标签：google-sheets, xml-parsing, google-sheets-formula

我正在尝试弄清楚如何在 Google 电子表格中正确使用 ImportXML。我正在尝试从此 URL 中获取键“last”的值：

[https://www.bitstamp.net/api/ticker/](https://www.bitstamp.net/api/ticker/)

我现在所拥有的是，但这会报告一个错误，说“请确保 URL 指向有效的 XML 或 HTML”：

```
=ImportXML("https://www.bitstamp.net/api/ticker/","//@last") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T11:47:09.243

好吧，看看这个你不能`=ImportXML`用来导入 JSON 数据，这纯粹是为 XML 和 HTTP 设计的，这对于它抛出的错误是有道理的。

据我所知，谷歌还没有提供`=ImportJSON`方法，但我在[这里找到了一个脚本，](http://blog.fastfedora.com/projects/import-json)它确实包含了这个确切的功能。

我在[此电子表格](https://docs.google.com/a/srwa.co.uk/spreadsheet/ccc?key=0An1-zUNFyMVLdDNQUDUybFcyLW94UlE2c1Z4ZUdYYXc#gid=0)上为您创建了一个示例。

所以它基本上只是使用了这个功能......

`=ImportJSON("https://www.bitstamp.net/api/ticker/", "/")`

然后，您可能可以使用路径来找到您所追求的确切位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-16T22:18:09.993

您实际上可以只使用 importdata - 它会自动为您解析字段。

```
=IMPORTDATA("https://www.bitstamp.net/api/ticker/") 
```

# iphone - 将文件上传到 Google Drive 时出错

> ID：15986695
> 
> 赞同：5
> 
> 时间：2013-04-13T10:13:59.860
> 
> 标签：iphone, ios, objective-c, google-drive-api

我已经在我的应用项目中实现了 Google Drive SDK。并尝试在 Google Drive 中上传图片，但出现错误。

我从[这里做代码](https://developers.google.com/drive/quickstart-ios#step_1_enable_the_drive_api)

当我运行此代码时，我得到了以下错误

```
Error Domain=com.google.GTLJSONRPCErrorDomain Code=400 "The operation couldn‚Äôt be completed. (Invalid Value)" UserInfo=0x276940 {NSLocalizedFailureReason=(Invalid Value), GTLStructuredError=GTLErrorObject 0x2fade0: {message:"Invalid Value" code:400 data:[1]}, error=Invalid Value} 
```

请给我建议。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:25:36.813

嗨，pratik，我只是用谷歌搜索它并得到了一些解决方案，它可能对你有帮助。发生此错误是因为您未正确设置图像 mimeType 或名称。

Google Drive 服务的最新更改要求您在上传文件时指定不同于“application/json-rpc”的 mime 类型。使用 ObjectiveC SDK 时默认使用这种 mime 类型，因此需要指定一个。

```
GTLDriveFile *newFile = [GTLDriveFile object];
newFile.title = filename;
newFile.mimeType = @"image/png"; 
```

编辑：谷歌服务器似乎也存在临时问题

来源：- [iOS 中的 Google 驱动器集成在调用插入时出错](https://stackoverflow.com/questions/14980536/google-drive-integration-in-ios-giving-error-while-calling-insert)

同样，这似乎只是 Google Drive 后端的一个临时问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:23:04.083

我之前遇到过同样的错误。我想你没有先用谷歌驱动器授权，你应该用你的谷歌帐户登录再次检查它。您在上传文件之前是否使用 google drive 帐户登录过？如果不是，则可能会导致错误。也请使用新的重新生成的客户端 ID 和密钥重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-03T16:10:08.843

以防万一它帮助其他找到这个答案的人（就像我一样）......

当我未能在查询的参数值之一中转义单引号时，我得到了相同的错误代码：

```
 https://developers.google.com/drive/v2/web/search-parameters 
```

我需要在 ' 之前使用 \ 所以我的 'value\' 是\'valid' ...

# c# - 动态文本框间距问题

> ID：15986697
> 
> 赞同：0
> 
> 时间：2013-04-13T10:14:11.297
> 
> 标签：c#, winforms

我正在尝试在 winforms 应用程序中创建动态文本框。它通过不正确地创建正确的空间。我在这里做错了什么。

```
private void createTextBoxes()
{

  int width = 69;
  int height = 20;
  int spacing = 32;
  TextBox[] subAmt = new TextBox[12];
  for (int i = 0; i <= 11; ++i)
  {
      subAmt[i] = new TextBox();
      subAmt[i].Size = new Size(width, height);
      subAmt[i].Margin = new Padding(3);
      subAmt[i].Location = new Point(279, (i * height) + spacing); // <-- this is should space it out but does not
      subAmt[i].KeyPress += new KeyPressEventHandler(txtAmt_KeyPress);

       plSubscription.Controls.Add(subAmt[i]);

   }
} 
```

我有类似的组合框代码，它似乎正确地间隔

```
private void createCombo()
{

  int width = 79;
  int height = 24;
  int spacing = 28;
  for (int i = 0; i <= 11; ++i)
  {
      ComboBox newBox = new ComboBox();
      newBox.Name = "SubYears";
      newBox.DropDownStyle = ComboBoxStyle.DropDownList;
      newBox.Size = new Size(width, height);
      newBox.Location = new Point(145, (i * height) + spacing);

      plSubscription.Controls.Add(newBox);
      fillComboData(newBox);
   }
} 
```

这是组合框和文本框的屏幕截图

![在此处输入图像描述](https://i.stack.imgur.com/jqkBW.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:37:01.517

我刚刚替换了您的`createTextBoxes()`这些值：

```
int width = 69;
int height = 20;
int spacing = 32; 
```

用你的`createCombo()`价值观：

```
int width = 79;
int height = 24;
int spacing = 28; 
```

我得到了以下结果。

![在此处输入图像描述](https://i.stack.imgur.com/nPhXn.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:23:14.493

I test your code and it works. what's the problem?

* * *

You cant change textbox height in singleline mode, and in your code, you set it lower than actual height.

* * *

Use this:

```
 int width = 69;
        int height = 10;
        int spacing = 0;
        TextBox[] subAmt = new TextBox[12];
        for (int i = 0; i <= 11; ++i)
        {
            subAmt[i] = new TextBox();
            subAmt[i].Size = new Size(width, height);
        // mycode
            height = subAmt[i].Height;
        // ***
            subAmt[i].Margin = new Padding(3);
            subAmt[i].Location = new Point(279, (i * height) + spacing); // <-- this is should space it out but does not

            this.Controls.Add(subAmt[i]);
        } 
```

# c - 了解 gdb 生成的程序集

> ID：15986698
> 
> 赞同：2
> 
> 时间：2013-04-13T10:14:18.093
> 
> 标签：c, assembly, gdb

我正在尝试理解我从 gdb disassemble 获得的 c 程序的汇编代码，你能帮帮我吗？

我的 C 代码：

```
#include <unistd.h>

int main(int argc, char *argv[])

{

char buff[100];

/*if no argument…*/

if(argc <2)

{

   printf("Syntax: %s <input string>\n", argv[0]);

   exit (0);

     }

  strcpy(buff, argv[1]);

  return 0;

} 
```

我的主要功能的汇编代码是：

函数 main 的汇编代码转储：

```
 0x08048424 <+0>:    push   %ebp
    0x08048425 <+1>:    mov    %esp,%ebp
    0x08048427 <+3>:    and    $0xfffffff0,%esp
    0x0804842a <+6>:    add    $0xffffff80,%esp
    0x0804842d <+9>:    cmpl   $0x1,0x8(%ebp)
    0x08048431 <+13>:    jg     0x8048454 <main+48>
    0x08048433 <+15>:    mov    0xc(%ebp),%eax
    0x08048436 <+18>:    mov    (%eax),%eax
    0x08048438 <+20>:    mov    %eax,0x4(%esp)
    0x0804843c <+24>:    movl   $0x8048544,(%esp)
    0x08048443 <+31>:    call   0x8048344 <printf@plt>
    0x08048448 <+36>:    movl   $0x0,(%esp)
    0x0804844f <+43>:    call   0x8048354 <exit@plt>
    0x08048454 <+48>:    mov    0xc(%ebp),%eax
    0x08048457 <+51>:    add    $0x4,%eax
    0x0804845a <+54>:    mov    (%eax),%eax
    0x0804845c <+56>:    mov    %eax,0x4(%esp)
    0x08048460 <+60>:    lea    0x1c(%esp),%eax 
```

分配 buff[100] 大小的部分在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T10:17:12.880

这里：

```
add    $0xffffff80,%esp 
```

这将 128 个字节（加 -128）减去 ESP（堆栈指针寄存器）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T10:32:04.110

以下代码

```
int main(int argc, char *argv[])
{

char buff[100]; 
```

请求在堆栈上创建一个 char[100] 缓冲区。这是实际发生的事情：

```
;// 1\. pushing the base pointer register on the stack
0x08048424 <+0>:    push   %ebp

;// 2\. Creating the stack frame. Copying the stack pointer register to the base pointer 
;// register creates a stack frame: an area on the stack where a subroutine
;// can store local data.  
0x08048425 <+1>:    mov    %esp,%ebp

;// 3\. Making sure that the stack is aligned to 16 bytes.
0x08048427 <+3>:    and    $0xfffffff0,%esp

;// 4\. Making room for 128 bytes (100 as requested would throw off the alignment).
;// 128 is compatible with your requests and is optimized.
0x0804842a <+6>:    add    $0xffffff80,%esp 
```

因此，这是您正在创建的缓冲区，位于 16 字节对齐的堆栈上。你要求 100，编译器至少给你 100，同时优化速度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-13T10:17:56.753

I guess it's this one `add $0xffffff80,%esp`. Moving the stack pointer to make space available inside the function.

# spring - 使用 RedisTemplate (Spring) 存储不同的数据

> ID：15986703
> 
> 赞同：5
> 
> 时间：2013-04-13T10:14:44.290
> 
> 标签：spring, redis

我正在使用 Spring 的 RedisTemplate 与 Redis 交互。

目前，我存储在 Redis 中的数据使用 OpsForHash 操作，因为这最适合我存储的数据。

但现在我想添加不同结构的数据，即 Key -> List

因此，我是否应该在每个 daos 中有不同的 RedisTemplate 实例（根据需要进行参数化）但连接到同一个 Redis 实例？那是对的吗？或者我应该有一个共享的 RedisTemplate 实例，我可以使用它来存储散列结构数据和列表结构数据？如果是后者，当我受到实例参数化的限制时，我该怎么做？即目前我有

键（字符串）-> 映射

现在我想添加

键（字符串）--> 列表

这可能使用单个 RedisTemplate 吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T16:54:57.563

Since your key type is String in both cases, you should be able to use the same instance of RedisTemplate, assuming you've parameterized RedisTemplate with the value type of your List. For example:

```
RedisTemplate<String, String> template;
// Hash Key/Value types can be anything as long as the proper serializers are set
HashOperations<String,String,Integer> hashOps = template.opsForHash();
hashOps.put("foo", "bar", 3);
// List value types are taken from RedisTemplate parameterization
ListOperations<String,String> listOps = template.opsForList();
listOps.leftPush("foolist", "bar"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T14:23:27.353

提供的第一个解决方案对我不起作用。但我确实找到了解决方案并将其发布为另一个问题的解决方案

查看此答案[https://stackoverflow.com/a/30484834/4671737](https://stackoverflow.com/a/30484834/4671737)

# javascript - 将可折叠的 div 扩展到表格的行

> ID：15986705
> 
> 赞同：2
> 
> 时间：2013-04-13T10:14:48.863
> 
> 标签：javascript, jquery, html-table

我能够折叠/展开 div。 [jsfiddle](http://jsfiddle.net/soumyazyx/8Xyjy/10/)

查询：

```
$(document).ready(function () {
    $(".data").hide();
    $(".header").click(function () {
        $(this).next(".data").slideToggle(200);
    });
}); 
```

示例 html：

```
<div class="outermost">
<p class="header">Category - 1</p>
<div class="data">
    Sub Cateogry 1.1<br/>
    Sub Cateogry 1.2
</div>
<p class="header">Category - 2</p>
<div class="data">
    Sub Cateogry 2.1<br/>
    Sub Cateogry 2.2 
```

我想修改这个示例，以便它能够折叠/展开给定表的行。（描述 - 我有很多类别和子类别。我正在计划一个表格，它将所有类别显示为单独的行。当我们单击类别时，它应该显示子类别）。

div 不能放在表格内。所以，这种方法行不通。

请提出一些替代方案或任何指针，我可以在其中获得一些文档。

表（一种反馈表）：

```
<table><tbody>
<tr><th>Item</th><th>Feedback</th></tr>
<tr><td colspan=2>Category1</td></tr>
<tr><td>Sub Category 1.1</td><td><input type="text" ></td></tr>
<tr><td>Sub Category 1.2</td><td><input type="text" ></td></tr>
<tr><td colspan=2>Category2</td></tr>
<tr><td>Sub Category 2.1</td><td><input type="text" ></td></tr>
</tbody></table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T10:37:24.040

如前所述，这种结构的最佳标记是嵌套的`ul/ol`，但如果您*必须*使用表格，则可以使用`<tbody>`元素。看到这个[jsfiddle](http://jsfiddle.net/8Xyjy/11/)

## CSS

```
 .outermost td{padding: 10px;}
 .outermost .header{background:#eee}
 .data{display: none;}
 .data td{padding-left :20px;} 
```

## 标记

```
 <div class="outermost">
     <table>
        <tbody class="header">
           <tr>
              <td>Category - 1</td>
           </tr>
        </tbody>
        <tbody class="data">
           <tr>
              <td>Sub Cateogry 1.1</td>
           </tr>
           <tr>
              <td>Sub Cateogry 1.2</td>
           </tr>
        </tbody>
        <tbody class="header">
           <tr>
              <td>Category - 2</td>
           </tr>
        </tbody>
        <tbody class="data">
           <tr>
              <td>Sub Cateogry 2.1</td>
           </tr>
           <tr>
              <td>Sub Cateogry 2.2</td>
           </tr>
        </tbody>
     </table>
  </div> 
```

## JavaScript

```
 $(document).ready(function () {
        $(".header").click(function () {
           $(this).next("tbody.data").slideToggle(200);
        });
     }); 
```

通过使用这种技术，您将能够将`group`多个表行和`show/hide`它们作为一个单元。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:20:39.480

我建议在这种情况下使用 ul 因为它适用于树结构例如：

```
<ul class="outermost">
    <li>Category - 1</li>
    <li>
      <ul>
          <li>Sub Cateogry 1.1</li>
          <li>Sub Cateogry 1.2</li>
      </ul>
    </li>
</ul> 
```

或者如果你想使用表格，你必须在单元格中嵌入子表格

```
<table class="outermost">
    <tr><td>Category - 1</td></tr>
    <tr>
        <td>
            <table>
                <tr><td>Sub Cateogry 1.1</td></tr>
                <tr><td>Sub Cateogry 1.2</td></tr>
            </table>
        </td>
    </tr>
    </table> 
```

为了一致性，我认为我们应该使用 ul、table 或 block (div)。不应将它们混合在一起。如果您需要在 table 和 div 之间混合，请尝试以下操作：

```
<table class="outermost">
    <tr><td>Category - 1</td></tr>
    <tr>
        <td>
            <div>
                <div>Sub Cateogry 1.1</div>
                <div>Sub Cateogry 1.2</div>
            </div>
        </td>
    </tr>
    </table> 
```

# java - 为什么在同一个类中有构造函数和main方法

> ID：15986707
> 
> 赞同：11
> 
> 时间：2013-04-13T10:15:07.740
> 
> 标签：java

为什么你需要在你的类中有一个包含`public static void main (String[] args){}`？

为什么不使用构造函数创建一个单独的类并实例化它呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-13T10:20:41.717

**`main()` method is the entry point for any program** in java. This is the method which is invoked by the JVM to execute the program.

**Every class including abstract classes has a constructor**. Even if you don't declare one explicitly, compiler will add a default constructor. The `main()` method has to belong to some public class (which will always have a constructor). Yes generally it is preferable to design another class which has all the programming logic and just instantiate this class in the main class i.e. the one with `main()` method in it.

But you can also have a class with `main` method which creates object of its own class (because **you cannot access instance members from static methods**).

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-13T10:20:57.700

Method `public static void main(String[] args)` does not create instance of your class. But constructor does.

Having `main(String[])` method in several classes help to test functionality of a particular class in a big application.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-13T10:26:32.793

构造函数和`main`方法有两个不同的目的。

构造函数允许**创建**给定类的实例，而`main`方法仅允许启动程序的**潜在入口点**。

此外，对于给定的类，您可以有多个构造函数（接受零个或多个参数），但只有一个主要方法（在​​给定的类中）。

主要区别是我的第一点——它们有不同的目的。一个是启动程序的入口点，另一个是显式地允许创建类的实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T10:22:28.923

While I don't think this will be constructive...

Some programmers like to place a `main` "test" program inside of the class itself to construct and use it. Some professors like to be faux-OOP by constructing an object and having it do the work.

...neither are strong patterns worthy of emulating in my personal opinion.

# javascript - 页面加载时导航不透明度从 0 开始

> ID：15986709
> 
> 赞同：1
> 
> 时间：2013-04-13T10:15:20.740
> 
> 标签：javascript, jquery, css

我试图通过css中的不透明度隐藏我的导航，然后让导航淡入页面下方约600px。

我的一切正常，除了....当我加载页面时，导航栏以完全不透明 (1) 开始。

一旦我向下滚动一个像素，它就可以正常工作。即导航不透明度返回到 (0)，然后在 600 像素时导航不透明度返回到 (1)。

如果有人可以帮助我解决这个问题，我将不胜感激。

这是一个小提琴[http://jsfiddle.net/daugaard47/FpPTm/](http://jsfiddle.net/daugaard47/FpPTm/)。

按运行然后向下滚动页面以查看效果。

如果您想快速检查一下，这是我的脚本。

```
 $(window).bind('scroll', 'load', function(){
        var                 
            navwrap = $('.navwrap'),
            scrollTop = $(document).scrollTop(),
            limit = 635;
       if (scrollTop >= limit) {
           navwrap.addClass('sticky');

       } else if (scrollTop <= limit) {
           navwrap.removeClass('sticky');              
       }
    }); 
```

如果有人可以帮助我，请提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:20:24.133

It looks like as the nav has already got the class `sticky` added when the page first loads it is already applying `opacity:1`. And then when scrolling down 1px it then removes this.

Updated [JSFIDDLE](http://jsfiddle.net/FpPTm/1/) without the sticky class at loadup

```
<div class="navwrap">
    <div id="nav">NAVIGATION</div>
</div> 
```

I'm not sure if you need the sticky class at loadup but removing it looks to do the job.

# jquery-isotope - 同位素过滤问题

> ID：15986711
> 
> 赞同：1
> 
> 时间：2013-04-13T10:15:30.193
> 
> 标签：jquery-isotope

我正在使用此处的示例测试同位素过滤：http: [//jsfiddle.net/huxnL/](http://jsfiddle.net/huxnL/)

但是，我的同位素过滤不起作用。我复制并粘贴了示例中的代码。这是我的例子：http: [//jsfiddle.net/74nYh/](http://jsfiddle.net/74nYh/)

谁能帮帮我吗？谢谢！

我的代码如下：

脚本 -->

```
$(function () {

var $container = $('#container'),
    $select = $('#filters select');

$container.isotope({
    itemSelector: '.item'
});

$select.change(function () {
    var filters = $(this).val();;
    $container.isotope({
        filter: filters
    });
}); }); 
```

CSS -->

```
body {
font-family:'Helvetica Neue', Arial, sans-serif;}

#container {
border: 1px solid;
padding: 3px;
height:250px;}

.item {
width: 70px;
height: 70px;
margin: 3px;
float: left;}

.red {
background: red;}

.blue {
background: blue;}

.green {
background: green;}

.yellow {
background: yellow;}

/* Start: Recommended Isotope styles */

/**** Isotope Filtering ****/
.isotope-item {
z-index: 2;}

.isotope-hidden.isotope-item {
pointer-events: none;
z-index: 1;}

/**** Isotope CSS3 transitions ****/
.isotope, .isotope .isotope-item {
-webkit-transition-duration: 0.8s;
-moz-transition-duration: 0.8s;
transition-duration: 0.8s;}

 .isotope {
-webkit-transition-property: height, width;
-moz-transition-property: height, width;
transition-property: height, width;}

 .isotope .isotope-item {
-webkit-transition-property: -webkit-transform, opacity;
-moz-transition-property: -moz-transform, opacity;
transition-property: transform, opacity;}

 /**** disabling Isotope CSS3 transitions ****/
 .isotope.no-transition, .isotope.no-transition .isotope-item, .isotope .isotope-      item.no-transition {
-webkit-transition-duration: 0s;
-moz-transition-duration: 0s;
transition-duration: 0s;}

/* End: Recommended Isotope styles */ 
```

内容 -->

```
<div id="filters">
<select>
    <option value="*">All</option>
    <option value=".red">Red</option>
    <option value=".green">Green</option>
    <option value=".blue">Blue</option>
    <option value=".yellow">Yellow</option>
</select>
</div>
<div id="container">
<div class="item red"></div>
<div class="item blue"></div>
<div class="item green"></div>
<div class="item yellow"></div>
<div class="item red"></div>
<div class="item blue"></div>
<div class="item green"></div>
<div class="item yellow"></div>
<div class="item red"></div>
<div class="item blue"></div>
<div class="item green"></div>
<div class="item yellow"></div>
<div class="item red"></div>
<div class="item blue"></div>
<div class="item green"></div>
<div class="item yellow"></div>
<div class="item red"></div>
<div class="item blue"></div>
<div class="item green"></div>
<div class="item yellow"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T05:44:20.533

我也是新手，但我相信您忘记附加您的 Jquery 库资源。您需要授予 fiddle 访问 Jquery、Jquery UI 和 Isotope 的权限。

# c++ - 如何在 Linux 上调用 MinGW 交叉编译器？

> ID：15986715
> 
> 赞同：30
> 
> 时间：2013-04-13T10:15:54.130
> 
> 标签：c++, compilation, cross-compiling, mingw-w64

我有一个要为 Windows 交叉编译的项目。我有适当的 Makefile 并且一切都适用于`g++`. 我跑了

```
$ apt install mingw-w64 
```

并下载了 500 MB 的软件包，但我不知道如何实际运行它。没有`mingw`可执行文件，那么我该如何实际编译呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-13T10:20:49.983

如果您查看 Ubuntu 包网络服务器上的文件列表以了解`mingw-w64`的组成包：

*   [`gcc-mingw-w64-x86-64`](https://packages.ubuntu.com/focal/amd64/gcc-mingw-w64-x86-64/filelist)
*   [`g++-mingw-w64-x86-64`](https://packages.ubuntu.com/focal/amd64/g++-mingw-w64-x86-64/filelist)
*   [`binutils-mingw-w64-x86-64`](https://packages.ubuntu.com/focal/amd64/binutils-mingw-w64-x86-64/filelist)
*   [`mingw-w64-x86-64-dev`](https://packages.ubuntu.com/focal/all/mingw-w64-x86-64-dev/filelist)
*   [`gcc-mingw-w64-i686`](https://packages.ubuntu.com/focal/amd64/gcc-mingw-w64-i686/filelist)
*   [`g++-mingw-w64-i686`](https://packages.ubuntu.com/focal/amd64/g++-mingw-w64-i686/filelist)
*   [`binutils-mingw-w64-i686`](https://packages.ubuntu.com/focal/amd64/binutils-mingw-w64-i686/filelist)
*   [`mingw-w64-i686-dev`](https://packages.ubuntu.com/focal/all/mingw-w64-i686-dev/filelist)

您可以看到它`mingw-w64`提供了一个*工具链*，即一组替代工具（编译器、链接器、头文件等），用于为另一个系统编译您的代码。

假设您要为 64 位系统编译 C++ 代码，则需要使用`/usr/bin/x86_64-w64-mingw32-g++-win32`. 您可以使用`CXX`环境变量来告诉大多数 Makefile 使用该编译器来编译代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-13T11:19:46.973

另一种选择是查看 Mingw Cross Environment ( [MXE](http://mxe.cc) )，它专门针对从 Linux 到 Windows（以及最近到 Mac）的交叉编译。该软件包具有对大量库的内置 xsupport，并且正在积极开发中。只需查看该网站，了解它是否适​​合您的需求。

顺便说一句，建议您使用开发版本而不是发布版本。这是因为发布版本通常很快就会过时，因为（库的）包维护者更改 URL 导致 MXE 发布版本损坏。开发版本通常更新。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-09T15:06:27.430

我用它来交叉编译postgres：

```
$ sudo apt-get install mingw-w64
$ ./configure --host=i686-w64-mingw32 --without-zlib #  32 bit
# or --host=x86_64-w64-mingw32  64 bit 
```

参考[这里](https://wiki.postgresql.org/wiki/Building_With_MinGW)

其他项目的做法不同，例如 ffmpeg：

```
 ./configure --target-os=mingw32 --cross-prefix=i686-w64-mingw32- 
```

或一些

```
 ./configure CC=i686-w64-mingw32-gcc ... 
```

等等。 GL！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-12T20:57:32.950

这是我针对`mingw g++`交叉编译器的方式：

```
$ ./configure --with-mingw-cross-compiler=g++-mingw-w64-i686 
```

# playframework - Play Framework with PostgreSQL backend：不兼容的生成进化模式

> ID：15986716
> 
> 赞同：1
> 
> 时间：2013-04-13T10:15:55.350
> 
> 标签：playframework, playframework-evolutions

我目前正在与其他几个人一起开发 Play 框架项目。我们目前处于开发阶段，但我们也希望在服务器上提供自动开发构建。为了在生产机器上进行测试，我们正在使用运行良好的内存数据库。但是对于服务器上的开发构建，我们希望使用 PostgreSQL 作为数据库后端。

到目前为止，一切都很好。EBeans 生成了 1.sql 文件，`SET REFERENTIAL_INTEGRITY FALSE;`它与 PostgreSQL*不*兼容。所以我的问题是：如何自动让 Play 在内存 DB 和 Postgres 中生成有效 SQL？

我不需要同时运行两者。我想运行一个用于本地开发的数据库和一个用于生产的数据库。

提前致谢。

# http - 消费http请求懒惰

> ID：15986717
> 
> 赞同：3
> 
> 时间：2013-04-13T10:15:55.430
> 
> 标签：http, clojure, lazy-evaluation, side-effects

我正在尝试丰富数据，我为此提供的界面是一个网络表单。由于远程端的数据质量很差，我运行了一系列不同的搜索，直到找到匹配项。有时我会在第一个请求上获得成功，有时即使我尝试了 5 次不同的搜索，我也找不到任何东西。

我以为我可以使用 Clojures 惰性来缩短第一场比赛的搜索，但显然由于副作用，每次都要求所有 5 次不同的搜索。

这是我的问题的一个非常简单的再现：

```
(ns lazy-web-lookup.core
  (:require [clj-http.client :as http]))

(defn found?
  "Determines if the search was successful"
  [result]
  (= (:found result) "yes"))

(first (filter #(found? %) (map #(hash-map :no %
                                           :found (:body (http/get "http://localhost/random"))) [1 2 3 4 5]))) 
```

`http://localhost/random`随机返回字符串“yes”或“no”。

无论如何我可以调整上面的内容来做我想做的事，还是我叫错了树？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T02:20:00.603

实际上，**只有*分块*的 seq 是分批**（通常是^(1 个)）32 个元素实现的。非分块序列一次实现一个。函数喜欢`map`并`filter`保留其 seq 参数的分块/未分块“模式”。

因此，如果您确保将非分块序列传递给它们，则您可以使用常规的 Clojure 序列函数而不会影响任何数量的惰性。这里有两种可能的方法，其中第二种可能更适用于您的情况：

1.  生成你的序列，不管它是否会被分块；然后，如果它恰好被分块，则将其包装在“unchunking seq”中：

    ```
    (defn unchunk [xs]
      (lazy-seq
        (if-let [xs (seq xs)]
          (cons (first xs) (unchunk (rest xs))))))

    user=> (->> (range 40) (unchunk) (map #(println "THIS IS" %)) first)
    THIS IS 0

    user=> (->> (range 40) (map #(println "THIS IS" %)) first)
    THIS IS 0
    THIS IS 1
    THIS IS 2
    ... 
    ```

    **要将这种方法与问题文本中的示例一起使用，您必须将 seq 拆分为 vector `[1 2 3 4 5]`。**

2.  以某种不会对输出进行分块的方式生成初始序列（转换管道中最里面的序列）。这可能涉及明确编写您自己的生产者：

    ```
    (defn my-seq-producer [& args]
      (lazy-seq
        (if ...
          (cons (foo) (my-seq-producer ...)))) 
    ```

    这里要注意的关键是您将`cons`调用包装在条件 inside 中`lazy-seq`。如果条件中的测试不满足，则条件会产生`nil`，而惰性seq在实现时会变为空；否则`(foo)`将作为输出的第一个元素产生，然后是序列的“其余”部分，没有任何分块。

    **特别是，如果您编写自己的生产者来生成通过 HTTP 获取的项目的惰性序列，您将能够使用核心序列函数对其进行转换，同时保持完全惰性。**

判断哪个 seq 是分块的，哪个不是分块的最简单方法是使用该`chunked-seq?`函数，尽管有两个警告：

1.  您可能应该使用`chunked-seq?`调用`seq`您感兴趣的任何 seq 的结果，而不是原始 seq 本身。这是因为您的 seq 可能是包装在`LazySeq`对象中的产生分块序列的 thunk。事实上，情况就是如此`range`。

    ```
    (chunked-seq? (range 40))
    ;= false

    (chunked-seq? (seq (range 40)))
    ;= true 
    ```

2.  一个 seq 可能是部分分块的；例如，您可能会`cons`在分块序列的前面放置一些东西，从而产生一个没有分块的序列，但它仍然有一个分块的“休息”。Explicit unchunking 很高兴地处理了这个问题，因为它并没有真正检查底层 seq 是否被分块。

* * *

¹考虑对尾部长度小于 32 个元素的向量的 seq。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T16:24:55.333

正如其他答案中提到的，惰性序列是在批处理大小为 32 的批处理模式下实现的，对于您的特定问题，您可以使用普通的旧递归：

```
(loop [i [1 2 3 4 5]]
  (when (seq i)
    (let [body (-> (http/get "http://localhost/random")
                   :body)]
      (if (= body "yes")
        body
        (recur (rest i)))))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T13:27:46.120

出于效率原因，惰性序列一次评估 32 个元素。尝试这个：

```
> (defn f [i] (= i 2))
#'sandbox10079/f
> (defn g [i] (println "THIS IS" i) i))
#'sandbox10079/g
> (defn h [x] (first (filter f (map g x))))
#'sandbox10079/h
> (h (range 40))
THIS IS 0
THIS IS 1
THIS IS 2
THIS IS 3
THIS IS 4
THIS IS 5
  ...
THIS IS 28
THIS IS 29
THIS IS 30
THIS IS 31
2
> 
```

# java - Hibernate 模板更新查询

> ID：15986722
> 
> 赞同：1
> 
> 时间：2013-04-13T10:16:52.197
> 
> 标签：java, hibernate

如何使用 hibernate 模板使用 hql 更新查询是 hql 语句“更新登录集 empSmartId = 48750005”+“其中 empPassword = 6328ef1675ddb7106eba8dc2661961d7”

使用 getHibernatetemplate()

当前代码：

```
public class LoginDaoImp extends HibernateDaoSupport implements LoginDao { 
    public boolean resetAttempt(Login login) { 
        try {
            login.setAttempt(0); 
            getHibernateTemplate().update(login); 
            return true; 
        } catch (Exception e) {
            e.printStackTrace();
        } 
        return false;
    }

} 
```

我可以将整个 pojo 类保存在代码工作之上，但我想使用 where 条件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:29:44.703

`HibernateDaoSupport`将有一个方法，该方法将返回配置的**DataSource**`getSession()`的休眠会话对象。使用这个，你可以说**`session`**

 **```
Query updateQuery = getSession().createQuery("update Login l set l.empSmartId = :smartId where password = :password")
                   .setParameter("smartId", 48750005)
                   .setParameter("password", "6328ef1675ddb7106eba8dc2661961d7");
int noOfUpdatedRows = updateQuery.executeUpdate(); 
```**

# vb.net - Visual Basic 替换密码

> ID：15986728
> 
> 赞同：1
> 
> 时间：2013-04-13T10:17:25.780
> 
> 标签：vb.net, substitution, encryption

我正在尝试使用 Visual Basic 创建替换密码。我是编程和挣扎的新手，所以请多多支持。

密码应该执行以下操作：

1.  询问用户要加密的消息。
2.  要求用户提供密钥（或要求系统生成密钥，以更容易编码为准）。
3.  使用密钥加密消息。
4.  返回加密消息。

例子：

*   消息=你好
*   字母：“abcdefghijklmnopqrstuvwxyz”
*   关键字：“kxgtlmpqbwcunderfahjusviyoz”
*   返回加密消息。

我需要帮助的主要部分是 2 和 3。我需要知道的是解决这个问题的步骤（英语或语法），然后我可以尝试自己编写代码。如果你有一个很好的例子。

请注意，我不是在寻求有关如何创建凯撒密码的帮助。这里的替换密码将用另一个字符（这是密钥）替换每个字母。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:46:24.900

尝试以下链接：

[http://msdn.microsoft.com/en-us/library/ms172831.aspx](http://msdn.microsoft.com/en-us/library/ms172831.aspx)

[http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/17bafd2b-e187-427d-9c39-4865b15b6f9a/](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/17bafd2b-e187-427d-9c39-4865b15b6f9a/)

[vb.net 中使用字符串作为密钥的安全（ish）加密/解密算法](https://stackoverflow.com/questions/1330223/secureish-encryption-decryption-algorithms-in-vb-net-using-a-string-as-a-key)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:56:39.090

我不知道任何 Visual Basic，所以我不能给你代码，但既然你说英文解释是可以接受的，让我试着把你的步骤分解成更小的步骤，你可能会发现它们更容易实现：

1.  首先，您需要从用户那里获取消息，例如要求他们输入（或复制和粘贴）字符串。我假设你知道如何在 VB 中做到这一点，因为我不知道。

2.  接下来，对密钥执行相同的操作。（您可能应该构建您的程序，以便如果密钥无效（可以在下一步中方便地检查），您可以循环回到这一步并要求一个新密钥。）您可能希望立即转换所有小写​​（或全部大写）的键，并检查它是否正好有 26 个字符。

3.  接下来，您应该将键字符串转换为要替换哪些字母的映射。（这*可能*没有必要：一些语言提供了现成的字符串音译函数，比如 PHP 的[`strtr`](http://php.net/strtr)，它可以直接使用这样的关键字符串，但我假设你想“从头开始”这样做。）这可能有点涉及，所以我将把它分解成更小的步骤：

    *   首先，您需要创建地图对象。VB 希望提供某种方式来表示从字符到字符（或从单字母字符串到单字母字符串）的映射，可能是所谓的“字典”或“哈希表”。

    *   接下来，您需要遍历键字符串的字符。通常有两种方法可以做到这一点：将键字符串拆分为字符列表（或单字母子字符串）并循环遍历，或者仅使用从 1 到字符串长度的索引*i循环并提取每次迭代中字符串中的第**i*个字符。在任何一种情况下，您还需要跟踪（或计算）字母表中的第*i*个字母。

    *   现在，假设您现在有两个变量：*k*包含密钥字符串中的第*i个字母，* *a*包含字母表中的第*i*个字母。现在，只需将条目映射*k插入**a*到您的字典/哈希表/在 VB 中调用的任何内容。如果您的输入消息可以同时包含大写和小写字母，您应该为*k*和*a*的大写和小写版本插入一个映射条目。此外，对于解密，只需交换*k*和*a*以便字典从*a*映射到*k*。

        *   这也是检查密钥有效性的好时机：在插入从*k*到*a*的映射条目之前，请检查是否还没有从*k*到某个其他字母的映射条目。如果存在，中止，让用户知道密钥无效并要求新密钥。这将确保密钥没有重复的字母，这（连同它的 26 个字母长）确保它是字母表的有效排列。哦，你显然还应该检查*k*实际上是一个字母，而不是一个标点符号。

        *   （对于解码，这有点棘手；您可能想要构建两个映射，每个方向一个，这样您就可以使用*k* *-to-*映射进行有效性检查。）

**   最后，您可以使用您构建的映射对消息进行编码：只需遍历消息中的每个字符，检查它是否在映射中找到，如果是，则将其替换为映射到的字符。（如果您无法修改原始消息字符串，您可以将每个输出字符附加到一个字符列表中，然后最后将它们全部连接成一个字符串。或者只是从一个空的输出字符串开始，然后直接将每个输出字符附加到它上面，尽管这*可能*比首先构建列表效率低，具体取决于在 VB 中如何实现字符串操作。）* 

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T07:50:23.337

假设您的字母表的键长度相同，您可以执行一个 FOR 循环来检查字符串的每个字符（该字符如何与您的键相关）。

例如，您的消息“你好”。

这不是实际代码，只是为了演示您所要求的概念：

```
for each letter in message
    position_in_alphabet = current_letter
    cipher_letter = key(position_in_alphabet)
    append cipher_letter to cipher_message 
```

例如，“你好”是 5 个字符。所以这个循环会循环5次。字母表中的位置是（8th, 5th, 12th, 12th, 15th）。您插入与密钥相关的那些，您会得到“qlnnr”（或者密钥指示）。

把它们放在一起，它看起来像：

```
Dim _message As String = "hello"
Const _plain As String = "abcdefghijklmnopqrstuvwxyz"
Const _key As String = "kxgtlmpqbwcnderfahjusviyoz"
Dim charPos As Integer = 0
Dim Cipher As String = ""

For i = 0 To _message.Length - 1
    charPos = _plain.IndexOf(_message(i))
    Cipher = Cipher & _key(charPos)
Next i 
```

反过来，查找密码相对于密钥的位置，然后将其放入明文字典中，如下所示：

```
Dim _cipher As String = "qlnnr"
Const _plain As String = "abcdefghijklmnopqrstuvwxyz"
Const _key As String = "kxgtlmpqbwcnderfahjusviyoz"
Dim charPos As Integer = 0
Dim Message As String = ""

For i = 0 To _message.Length - 1
    charPos = _key.IndexOf(_cipher(i))
    Message = Message & _plain(charPos)
Next i 
```*

# delphi - 导入 Office 2013 类型库，Delphi XE3

> ID：15986730
> 
> 赞同：1
> 
> 时间：2013-04-13T10:17:28.687
> 
> 标签：delphi, ms-office, delphi-xe3

我安装了 Office 2013 和 RAD Studio XE3。尝试使用 Delphi 向导导入 Excel、Word 和 Outlook 类型库时，不再列出类型库。如何创建类型库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:40:38.720

您可以使用 Delphi 附带的导入单元。它们与 Office 2013 完美配合。显然，如果您使用 Office 2013 中引入的界面，那么它们将丢失。但没有迹象表明情况如此。

这些导入单元安装在`OCX\Servers`.

由于 Office COM 服务器在进程外运行，因此混合 32 位和 64 位代码没有问题。

# opera - Is there any way to make onbeforeunload work in Opera?

> ID：15986731
> 
> 赞同：0
> 
> 时间：2013-04-13T10:17:30.517
> 
> 标签：opera, onbeforeunload

I know, that Opera doesnt support JS onbeforeunload message and will not support it. But is there any way to make it work somehow? Or maybe some jQuery plugins can make it work and let script know if window is going to close? I found only way to make onclick for every a tag, but this is not the complete solution.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T16:00:46.553

`onbeforeunload`该版本现在支持升级到 Opera 15 ，因为它们已迁移到 WebKit 引擎。12.x 仍然不支持它，因为该版本和所有以前的版本都基于 Presto。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T18:45:22.970

不能在 Opera 中使用 onbeforeunload。有一个跨浏览器解决方案，但该解决方案几乎涵盖了除 Opera 之外的所有大型浏览器（IE、FireFox、Safari、Chrome）。

这更好地解释了 unbeforeunload 和 beforeunload：http: [//help.dottoro.com/ljhtbtum.php](http://help.dottoro.com/ljhtbtum.php)

另外，这篇文章用一个更好的例子来解释它：[Crossbrowser onbeforeunload?](https://stackoverflow.com/questions/7389554/crossbrowser-onbeforeunload)

# r - 按事件拆分 xts 对象

> ID：15986735
> 
> 赞同：6
> 
> 时间：2013-04-13T10:18:22.800
> 
> 标签：r, split, xts

我有一个带有少量事件指示器的 xts 对象。我需要将它按某些事件拆分，以便从给定事件到下一个事件的所有条目都将保存在同一个事件中`xts`，最终创建一个`xts`对象列表，每个对象都包含该事件作为最后一个条目，没有其他事件同一类型。

一个例子：

```
ts = as.Date(Sys.Date()-99:0)
e1 = numeric(100);e1[10*1:10]=1
e2 = numeric(100);e2[15*1:6]=1
y  = 1:100  # just a sample content
xs = as.xts(cbind(e1,e2,y),order.by=ts)

ee = e1*e2==1  # the event in which both e1 and e2 are 1, should happen at 30,60,90

# here should be splitting function that gets xs and ee as parameters
# and should return a list of 4 xts: the first with the entries 1 through 30, 
# the second with entries 31 to 60, the third with entries 61 to 90, and the last
# with entries 91 to 100 
```

您的建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T10:32:39.387

用于`cumsum(ee)`创建分组变量，然后只需调用`split`. 您必须对 的输出进行小幅更改`cumsum`，因为您希望这些`TRUE`值成为组中的最后一个观察值（而不是第一个观察值）。

```
split(xs, c(0,head(cumsum(ee),-1)))
split(xs,rev(cumsum(rev(ee))))  # grouping factors reversed 
```

# ruby-on-rails - Combine polymorphic include conditions

> ID：15986738
> 
> 赞同：2
> 
> 时间：2013-04-13T10:18:39.987
> 
> 标签：ruby-on-rails, polymorphic-associations

Using Rails 3\. I have the following code:

```
@reviews = @user.reviews.includes(:user, :reviewable => :photos).where(:reviewable_type => "Shop")
@reviews = @user.reviews.includes(:user, :reviewable => :country_days => [:shops => :photos]).where(:reviewable_type => "Country") 
```

I can't run this query in a single `@reviews` because `Country` has `country_days`, but `Shop` doesn't have `country_days`. If I do this:

```
@reviews = @user.reviews.includes(:user, :reviewable => [:photos, :country_days => [:shops => :photos]]) 
```

This code won't work because for `reviewable_type == "Shop"`, it doesn't have `country_days`.

How can I combine the first 2 queries together?

# ruby-on-rails - 十进制值显示不正确

> ID：15986740
> 
> 赞同：1
> 
> 时间：2013-04-13T10:18:51.003
> 
> 标签：ruby-on-rails, activerecord, floating-point, decimal, ruby-on-rails-4

我对rails完全陌生，并且对我的数据库中的一些十进制值在浏览器中的默认脚手架索引/显示输出中显示为略微偏离了非常小的数量有一些疑问。我有一个属性的特定值为 9.12 的项目，我可以确认它以小数形式正确存储在我的 sqlite3 数据库中。但是在索引页面或项目的显示页面上，它给了我 9.119999999999999

更令人困惑的是，如果我尝试编辑该项目，表单将在相关字段中显示 9.12 的精确值。

通过玩一点，我可以看到其他值（例如 9.11、9.13、9.14、9.123）会在 html 输出中给我类似的精度错误，而许多其他值（例如 9.1、9.09、9.15、9.121）会显示为应该。

现在我意识到使用浮点值时会出现这种行为，因为它们以二进制形式存储，但我的理解是小数不应该有任何与精度有关的怪癖。如果这是真的，那么我只能假设问题出在 Rails 上。那么任何人都可以告诉我导致这种行为的原因吗？

显然，我可以更新我的视图以使其正确显示，如下所示：

```
<%= number_with_precision(item.value, precision: 2) %> 
```

但考虑到我在数据库中播种的每个项目都有大量显示都很好的十进制值，当问题似乎是例外而不是规则时，我不想对每个十进制值都执行此操作。

顺便说一下，我正在使用 Rails 4.0.0beta1 和 Ruby 2.0.0（为了跟上最新版本的 Agile Web Development with Rails 书）。我很想知道 Rails 3.2 中是否发生同样的事情

**编辑：**具有讽刺意味的是，如果我将数据库更新为使用浮点类型，一切都会正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:31:36.147

在大多数情况下，我认为小数的处理方式与浮点数没有任何不同——我怀疑你会发现它们的行为有显着差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T02:27:39.673

我很久以前就问过这个问题，但如果我没记错的话，这只是 Rails 测试版中的一个错误，并且在 Rails 4 的最终版本中表现得如预期。

# javascript - google maps api in Wordpress - Load Javascript file

> ID：15986742
> 
> 赞同：2
> 
> 时间：2013-04-13T10:19:02.127
> 
> 标签：javascript, wordpress, google-maps

I just can't seem to get Google Maps API to work on Wordpress site. I've written the code for a map with polylines, markers and infowindows. I've decided to write my code rather than use a plugin as I also want to include a seperate streetview div and elevation chart div.

All works without a hitch when I load the HTML/Javascript file from my computers hard drive to Safari.

However, I can't seem to load the file into Wordpress. I loaded the .js file via an FTP client into a new folder I created called 'scripts' within the public_html folder. I then referenced the file via header.php file but no luck. I've also tried referencing the file into the actual post and footer.php file - still no luck.

I wonder whether it is down to anyone of the following problems: 1\. Not calling the right functions within the Wordpress page or post. 2\. As I am using a multisite install perhaps I am not using the right url to call the .js file. 3\. The Google Maps API javascript libraries not being called correctly.

I have tried putting all the Javascript code in the actual page. It works but the infowindows and streetview has formatting issues that effects the functionality of the map. And besides, it makes for a very bloated post!

If anyone has any ideas it would be truly appreciated. I've been trying to troubleshoot for a while now and I think I have reached the level at which my knowledge can't help anymore!

Many thanks

# iphone - 拍摄方向不当 cocos2D-iPhone

> ID：15986750
> 
> 赞同：1
> 
> 时间：2013-04-13T10:20:17.743
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

```
Bows rotates 360 Degree using touch and it fires arrow while touch ended.

Moving portion works perfectly but their need some correction while touch endes..
The problem is while i touch the bow,moving direction of arrow is opposite to bow such as 
```

![在此处输入图像描述](https://i.stack.imgur.com/8tdwI.png)

当我以相反的方向旋转弓时，它工作正常，但只有当弓旋转时.. 箭应该从右向左发射，弓的位置应该是正确的。

我应该做些什么更正才能使它们一起成为可能。？！对不起我的英语不好..

我的代码如下..

```
-(void) ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    [self setArrowFromPt:location centerPt:windowCenter];
}

-(void) setArrowFromPt:(CGPoint)touchPt centerPt:(CGPoint)centerPt
{
    diff = ccpSub(touchPt, centerPt);
    NSLog(@"%@", NSStringFromCGPoint(diff));

    angle = ccpToAngle(diff);
    normalized = ccpNormalize(diff);

    float START_ANGLE = 0;
    float RADIUS = 100.0;

    imgArrow.position = ccpAdd(centerPt, ccpMult(normalized, RADIUS));
    cocosAngle = -CC_RADIANS_TO_DEGREES(angle);
    imgArrow.rotation = START_ANGLE + cocosAngle;
}

-(void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    cocosAngle =  -CC_RADIANS_TO_DEGREES(angle);
    curangle = imgArrow.rotation;
    CGFloat rotateDiff = cocosAngle - curangle;  
    CGFloat rotateSpeed = 180; 
    rotateDuration = fabs(rotateDiff / rotateSpeed);

    if (_nextProjectile != nil) return;
    _nextProjectile = [[CCSprite spriteWithFile:@"newarrow.png"] retain];
    _nextProjectile.anchorPoint = ccp(0,0);
    _nextProjectile.position = ccp(380,150);

    [imgArrow runAction:[CCSequence actions:
                       [CCRotateTo actionWithDuration:rotateDuration angle:cocosAngle],
                       [CCCallFunc actionWithTarget:self selector:@selector(finishShoot)],
                       nil]]; 

    ccTime delta = 1.0;
    CGPoint normalizedShootVector = ccpNormalize(diff);
    CGPoint overshotVector = ccpMult(normalizedShootVector, 420);
    CGPoint offscreenPoint = ccpAdd(_nextProjectile.position, overshotVector);

    [_nextProjectile runAction:[CCSequence actions:
                                [CCMoveTo actionWithDuration:delta position:offscreenPoint],
                                [CCCallFuncN actionWithTarget:self selector:@selector(spriteMoveFinished:)],
                                nil]];
    _nextProjectile.tag = 2;

} 
```

任何帮助表示赞赏。提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:22:14.753

因为我可以回答我的问题，

我通过纠正解决了我的问题

**CGPoint overshotVector = ccpMult(normalizedShootVector, -420);**

放置 - 标志，导致我的箭头从右到左方向投掷。

# asp.net-mvc-3 - ASP.NET MVC3 WebGrid sorting with custom objects

> ID：15986753
> 
> 赞同：2
> 
> 时间：2013-04-13T10:20:33.167
> 
> 标签：asp.net-mvc-3, sorting, webgrid

I want to sort by column containing objects of my own type. Witch method should I override in my custom object (i.e. CompareTo, operator <) so the WebGrid can sort them automatically,

Much like WebGrid sorts DateTime correctly.

(I am using ASP.NET MVC 3, with .NET 4)

# asp.net-mvc - 使用多个 LINQ“包含”获取第二深度数据

> ID：15986760
> 
> 赞同：1
> 
> 时间：2013-04-13T10:21:01.127
> 
> 标签：asp.net-mvc, entity-framework, linq-to-entities

我有以下模型（简化）

```
public partial class Fault
{
    public int FaultID { get; set; }
    ...
    public virtual ICollection<FaultComment> FaultComments { get; set; }
    public virtual User FaultCreatorUser { get; set; }
}

public partial class FaultComment
{
    public int CommentID { get; set; }
    public int FaultID { get; set; }
    public string CommentContent { get; set; }
    public Nullable<System.DateTime> CommentCreationDate { get; set; }
    public int CommentCreatorUserID { get; set; }
    public bool IsDeleted { get; set; }

    public virtual User User { get; set; }
    public virtual Fault Fault { get; set; }
} 
```

所以有一个错误..它有一个导航属性来获取错误的评论集合，每个推荐都有一个导航属性，供创建评论的用户使用。

是否可以创建一个 LINQ 语句来检索故障的所有评论和评论的用户信息？

就像是

```
var faultsWithComments = _context.Fault.Include("FaultComments").include("???FaultComments>>User???") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T11:49:07.457

```
var faultsWithComments = _context.Fault.Include("FaultComments.User"); 
```

或者使用 EF >= 4.1，您可以使用强类型版本：

```
var faultsWithComments = _context.Fault
    .Include(f => f.FaultComments.Select(fc => fc.User)); 
```

（您需要`using System.Data.Entity;`在您的代码文件中`Include`提供可以接受 lambda 表达式作为参数的扩展方法。）

EF 将包含指定导航路径上的所有相关实体，因此您不需要在包含`FaultComments`时显式包含`FaultComments.User`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T21:25:46.907

Slauma 答案的功能性 VB.NET 版本：

```
var faultsWithComments = _context.Fault.Include(
   function (f) f.FaultComments.Select(
      function (fc) fc.User
   )
) 
```

# php - CodeIgniter ion_auth 与多个网站

> ID：15986763
> 
> 赞同：1
> 
> 时间：2013-04-13T10:21:11.213
> 
> 标签：php, codeigniter, authentication, ion-auth

我有两个网站并使用 ion auth 作为登录系统

CI结构如下：

```
CI_BASE
    - system
    - application
        - site1
            - application
                - config
                - controllers
                - view
                - ...
        - site2
            - application
                - config
                - controllers
                - view
                - ... 
```

现在我想使用 site1 作为主要会员页面

但site2也可以读取site1会话并将数据更新到服务器

`site1 domain are:` [http://1.mysite.com/](http://1.mysite.com/)

`site2 domain are:` [http://2.mysite.com/](http://2.mysite.com/)

如何使用相同的身份验证连接两个网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:04:27.943

虽然不是一个好的做法，但数据库（如果您使用它）和会话配置必须相同。

文件：site1/application/config.php、site2/application/config.php

```
$config['sess_cookie_name'] = 'site_cookie'; // Important! Must be the same name in both sites
$config['sess_expiration'] = 7200;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie'] = TRUE;
$config['sess_use_database'] = TRUE; // If you work with database
$config['sess_table_name'] = 'sessions'; // Important! Must be the same table
$config['sess_match_ip'] = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update'] = 300; 
```

剩下的就是使用您的界面和前端。

# c++ - loading 3d model in directx 11 assimp

> ID：15986764
> 
> 赞同：3
> 
> 时间：2013-04-13T10:21:29.767
> 
> 标签：c++, directx, assimp

I'm newcomer in this forum. I'm trying load 3d model im my programm using assimp, but there is some errors occured. There is my code:

```
bool Model::LoadModel(const char* fileName)
{
Assimp::Importer imp;
const aiScene* pScene = NULL;
const aiMesh* pMesh = NULL;

pScene = imp.ReadFile(fileName, aiProcess_Triangulate);
if(!pScene)
{
    MessageBox(NULL, "Error read file", "Error", MB_OK);
    return false;
}
else
    MessageBox(NULL, "read file OK", "Error", MB_OK);

pMesh = pScene->mMeshes[0];
if(!pMesh)
{
    MessageBox(NULL, "Failed to find meshes", "Error", MB_OK);
    return false;
}

for(unsigned int i = 0; i < pMesh->mNumFaces; i++)
{
    if(pMesh->mFaces[i].mNumIndices == 3)
        numIndices_ = numIndices_ + 3;
    else
    {
        MessageBox(NULL, "Failed to parsing faces", "Error", MB_OK);
        return false;
    }
}

return true;
} 
```

When programm starts execute line pMesh->mFaces[i].mNumIndices == 3, runtime error occurs. Debug log file tell me that is can't calculate mNumIndices. Maybe anyone can help me? I have no idea why this happens.

# php - MySQL：使用多个字段检查多个表中的出现

> ID：15986776
> 
> 赞同：0
> 
> 时间：2013-04-13T10:23:39.023
> 
> 标签：php, mysql

我在所有三个表上都有三个表 t1、t2 和 t2，它们的字段名称相同，例如

1.  ID
2.  家庭电话
3.  工作电话
4.  移动电话

我想使用 t1 检查 t2 和 t3 中出现的情况。我想出了 MySQL 查询（如下），但是当我运行它时我得到一个空集，因为我知道我实际上在所有三个表中都有重复的电话号码：

```
SELECT t1.id, t1.HomePhone, t1.WorkPhone, t1.MobilePhone, 
(
SELECT COUNT(*) 
FROM t2 
WHERE t1.HomePhone = t2.HomePhone 
    AND 
        (t2.HomePhone IS NOT NULL OR t2.HomePhone != '')
    UNION 
    SELECT COUNT(*) 
    FROM t2 
    WHERE t1.WorkPhone = t2.WorkPhone 
        AND 
            (t2.WorkPhone IS NOT NULL OR t2.WorkPhone != '')
        UNION 
    SELECT COUNT(*)  
    FROM t2 
    WHERE t1.MobilePhone = t2.MobilePhone 
        AND 
            (t2.MobilePhone IS NOT NULL OR MobilePhone != '')
) AS Countt2,
(
SELECT COUNT(*) 
FROM t3 
WHERE t1.HomePhone = t3.HomePhone 
    AND 
        (t3.HomePhone IS NOT NULL OR t3.HomePhone != '')
    UNION 
    SELECT COUNT(*) 
    FROM t3 
    WHERE t1.WorkPhone = t3.WorkPhone 
        AND 
            (t3.WorkPhone IS NOT NULL OR t3.WorkPhone != '')
        UNION 
    SELECT COUNT(*)  
    FROM t3 
    WHERE t1.MobilePhone = t3.MobilePhone 
        AND 
        (t3.MobilePhone IS NOT NULL  OR MobilePhone != '')
) AS Countt3 
FROM t1 
WHERE 
(t1.HomePhone IS NOT NULL OR t1.HomePhone != '') 
AND (t1.WorkPhone IS NOT NULL OR t1.WorkPhone != '')
AND (t1.MobilePhone IS NOT NULL OR t1.MobilePhone != '') 
```

我在这里可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:36:45.120

前提：重复定义为所有4个字段MATCH。因此，通过合并所有表并“将它们计数>1，然后您将识别重复项。groupConcat 列出带有重复项的表。

```
SELECT count(B.src), B.ID, B.HomePhone, B.WorkPHone, B.MobilePHone, 
    group_Concat(B.SRC) as TablesDupIN 
FROM (
(SELECT 't1'  as SRC, id, HomePhone, WorkPhone, MobilePhone FROM T1)
UNION ALL 
(SELECT 'T2', id, HomePhone, WorkPhone, MobilePhone FROM T2)
UNION ALL 
(SELECT 'T3', id, HomePhone, WorkPhone, MobilePhone FROM T3)) B
GROUP BY ID, HomePhone, WorkPhone, MobilePhone
HAVING count(*) > 1 
```

* * *

union all 返回每个表中的所有记录，并且不会消除重复项。只是 Union 会删除重复项。t1, t2, t3 合并到一个临时表中。因此，我们可以从按 ID、HomePHone、WorkPhone 和 MobilePhone 分组的临时表中进行选择。假设需要所有 4 个字段来确定重复项。如果不是这种情况，如果只是所有电话必须相同，则可以消除字段 ID。通过对结果进行分组，我们将 ID、家庭电话、工作电话和手机的行组合在一起。我使用“T1”、“T2”来识别有重复的表格并且重复在 ID 上，以及 TalesDupIn 中列出的表格中的 3 个电话号码。

## 结果会是这样的

```
2 4 555-5555 555-5555 555-5555 (t1,t2)
2 5 666-6666 666-6666 666-6666 (t1,t3)
3 7 777-7777 777-7777 777-7777 (t1,t2,t3)
2 8 888-8888 888-8888 888-8888 (t2,t3) 
```

这意味着 ID 4 在表 1 和表 2 中都可以找到 ID 5 在表 1 和表 3 中都可以找到。
但重复项是根据所有 4 个字段 MATCHING ID + 3 个电话确定的。如果 ID 不是重复项的一部分，它可以从 select 和 group by 中删除，作为 group_Concat(ID) 添加，并且与 tablesDupIn 结合会告诉您所涉及的 ID 和表。根据您打算如何处理结果，这可能是有益的，也可能不是......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:28:30.003

您可以在这些之间使用`OR`而不是`AND`

```
 AND t3.HomePhone IS NOT NULL 
   AND t3.HomePhone != '' 
```

像那样

```
 AND (t3.HomePhone IS NOT NULL 
         OR t3.HomePhone != '') 
```

在您的所有查询中使用 OR 更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T10:31:00.103

```
SELECT 
  COUNT(DISTINCT t1.id)
  COUNT(DISTINCT t2.id)
  COUNT(DISTINCT t3.id)
FROM t1
LEFT JOIN t2 ON
  (t1.HomePhone=t2.HomePhone AND t1.HomePhone IS nOT NULL)
  OR (t1.WorkPhone=t2.WorkPhone AND t1.WorkPhone IS nOT NULL)
  OR (t1.MobilePhone=t2.MobilePhone AND t1.MobilePhone IS nOT NULL)
LEFT JOIN t3 ON
  (t1.HomePhone=t3.HomePhone AND t1.HomePhone IS nOT NULL)
  OR (t1.WorkPhone=t3.WorkPhone AND t1.WorkPhone IS nOT NULL)
  OR (t1.MobilePhone=t3.MobilePhone AND t1.MobilePhone IS nOT NULL) 
```

# javascript - winjs appbar.wincontrol 为空

> ID：15986779
> 
> 赞同：2
> 
> 时间：2013-04-13T10:23:57.870
> 
> 标签：javascript, html, windows-8, windows-runtime, appbar

我正在创建一个 Windows 8 HTML5 应用程序，并实现一个应用程序栏。当我访问 appbar.winControl 时，它始终为空。因此，例如，如果我编写 appbar.winControl.show() 我会收到一个异常，声称 winControl 为空。

我所做的是创建一个固定布局的应用程序。没有做任何其他事情，我在文档正文中添加了以下标记：

```
<body>
<div id="appbar" data-win-control="WinJS.UI.AppBar" aria-label="Command Bar">
    <button id="btnBoardSizeUp" data-win-control="WinJS.UI.AppBarCommand" data-win-options="{label:'Larger', icon:'zoomout', section:'global', tooltip:'Increase the board size'}" />
    <button id="btnBoardSizeDown" data-win-control="WinJS.UI.AppBarCommand" data-win-options="{label:'Smaller', icon:'zoomin', section:'global', tooltip:'Decrease the board size'}" />
    <button id="btnAbortGame" data-win-control="WinJS.UI.AppBarCommand" data-win-options="{label:'Abort', icon:'cancel', section:'selection', tooltip:'Abort the current game'}" />
</div>

<script type="text/javascript">
    var appbar = document.getElementById("appbar");
    var winControl = appbar.winControl;
    winControl.show();
</script> 
```

winControl.show() 行产生以下错误：

0x800a138f - JavaScript 运行时错误：无法获取未定义或空引用的属性“显示”

据我所见，我已经在页面上正确实现了 appbar，所以它应该可以工作。知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T11:36:18.613

页面控件尚未初始化，脚本在此之前执行。

有两个地方可以放置此代码。无论是在

```
// if the app bar is part of default.html, appbar show can be put in default.js
// default.js already have a call to WinJS.UI.processAll under activated event handler
WinJS.UI.processAll().then(function ()
{
    appbar.winControl.show();
}); 
```

或者

```
// if the appbar is part of mypage.html, need to have code like this in mypage.js
WinJS.UI.Pages.define('/pages/mypage/mypage.html',
    {
         ready: function onready(element, options)
         {
             appbar.winControl.show();
         }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T06:19:30.300

每当您使用 winjs 控件（具有 data-win-control 属性的 div）来指定您想要的控件时。您还必须在 JavaScript 代码中调用 WinJS.UI.processAll 函数。WinJS.UI.processAll 解析您的标记并实例化它找到的任何用于 JavaScript 控件的 Windows 库。

1.  如果您没有使用空白应用程序模板，或者如果您
    将控件添加到您自己创建的页面，您可能
    需要添加对 WinJS.UI.processAll 的调用。
2.  如果您将控件添加到应用的主页（通常是 default.html 文件），请在 onactivated 事件处理程序中添加对 WinJS.UI.processAll 的调用，如前面的示例所示
3.  如果您将控件添加到 Page 控件，则无需添加对 WinJS.UI.processAll 的调用，因为 Page 控件会自动为您执行此操作。
4.  如果您将控件添加到不是您的应用主页的另一个页面，请处理 DOMContentLoaded 事件并使用处理程序调用 WinJS.UI.processAll。

函数初始化（）{

```
WinJS.UI.processAll(); 
```

}

document.addEventListener("DOMContentLoaded", initialize(), false);

# java - 重新加载 jsp 页面后，如何防止嵌入式小程序重新加载？

> ID：15986788
> 
> 赞同：0
> 
> 时间：2013-04-13T10:24:36.950
> 
> 标签：java, jsp, applet

我有嵌入 jsp 页面的小程序。我的问题是每次刷新 jsp 页面时，小程序也会重新加载，所以有什么办法可以防止在我重新加载 jsp 页面后重新加载小程序。我知道在执行此操作时存在客户端-服务器端问题。但是有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:52:50.030

嗯...我想有一种方法可以缓存小程序（不是在每次网页刷新时重新下载它）；我不确定您使用什么小程序启动方式：S 它是 JNLP 还是...？

无论如何，我认为您应该更接近[cache_option 和 cache_archive](http://docs.oracle.com/javase/6/docs/technotes/guides/deployment/deployment-guide/applet-caching.html)属性

* * *

报告是否有帮助

# android - showDatePickerDialog 无法加载 DatePicker 对话框

> ID：15986793
> 
> 赞同：0
> 
> 时间：2013-04-13T10:26:03.223
> 
> 标签：android

我用这种方法加载对话框`showDatePickerDialog(this.getCurrentFocus());`。以前这样就好了。但是当我`setOnClickListener`在按钮单击时显示对话框时，出现编译器错误。错误是`The method getCurrentFocus() is undefined for the type new View.OnClickListener(){}`。我的代码如下

```
 frombutton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            showDatePickerDialog(this.getCurrentFocus());

        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:31:05.763

问题是，它`new OnClickListener()`创建了一个内部类，它不是 type `Activity`，就像外部类一样。

因此，`this`指的是`OnClickListener`，而不是您的活动。-`getCurrentFocus()`方法在侦听器类中不存在，因此无法找到。

解决这个问题的方法是明确地说你想要`this`来自周围（外部）类。您可以通过在之前添加外部类名称来做到这一点`this`：

```
showDatePickerDialog(YOURACTIVITYCLASSNAMEHERE.this.getCurrentFocus()); 
```

# android - 与另一个物体碰撞时如何停止一个物体[Box2d]

> ID：15986795
> 
> 赞同：1
> 
> 时间：2013-04-13T10:26:18.783
> 
> 标签：android, box2d, libgdx

我正在使用 LibGDX 平台和 box2D 开发一个游戏，在其中我正在使用 LibGDX 的运动来移动一个身体（动态`tocuhPad`）

`testBody1.setTransform(new Vector2(x,y), 0);`

方法并且在动态体碰撞的路上还有另一个物体（静态）。我想要的是当我的动态体与静态体碰撞时，它们都不会相互重叠，这还没有发生。现在它们通过施加力和移动静态物体相互重叠。那么，我怎样才能防止两个物体的碰撞呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:10:44.783

```
testBody1->SetLinearVelocity(b2Vec2(0, 0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T05:51:44.360

当您的动态体与 BeginContact 方法中的静态体发生碰撞时，您可以做一件事来检查。当它们发生碰撞时，您将动态车身速度设置为零。

# javascript - 获取数组组合的最接近值 (JS)

> ID：15986800
> 
> 赞同：11
> 
> 时间：2013-04-13T10:26:52.790
> 
> 标签：javascript, jquery, arrays, algorithm

我正在寻找一种可用于组合数组中的值的算法，以尽可能接近“另一个值”。

例如，我想找出给出关闭结果的组合的数字是 2.5。我的数组是`[0.5, 1.0, 1.5, 2.0, 3.0]`. 这种情况下的组合是`2.0+0.5`.

2.7 会产生相同的组合（2.5 是最接近的），而 3.7 会产生`3.0+0.5`，7.0 会是`3.0+3.0+1.0`.

我一直在阅读不同的算法来创建可用的组合等等——例如这个：[https](https://codereview.stackexchange.com/questions/7001/better-way-to-generate-all-combinations) ://codereview.stackexchange.com/questions/7001/better-way-to-generate-all-combinations但是，我我很难编写一个允许多次使用相同值的函数（比如我的 7.0 示例）。这使得组合的数量非常大。

任何人有一个很好的例子藏起来？或者有什么指点吗？

**编辑** @zkar 告诉我“背包问题”。对于我的示例，我可以补充一点，追求的值在指定范围内（1.0 和 10.0）——这在一定程度上限制了组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:06:50.037

你的问题是[硬币问题](http://en.wikipedia.org/wiki/Coin_problem)和[背包问题的混合体](http://en.wikipedia.org/wiki/Knapsack_problem)

**如果硬币只使用一次：**

给定一组值 S，n = |S|，m：要近似的值

```
DEFINE BEST = { }
DEFINE SUM = 0
DEFINE K = 0

WHILE S IS NOT EMPTY DO
    K = K + 1
    FIND MIN { Si : |(SUM+Si) - m| is minimal }
    ADD TUPLE < Si, |(SUM+Si) - m|, K > to BEST
    SUM = SUM + Si
    REMOVE Si from S
END-FOR

RETURN BEST 
```

该算法运行时间：O(|S| ² ) ~ O(n ² )

Set BEST 将有 n 个解，对于每个 K：1..n

for K：你在那个阶段有最优选择

找到完整的解决方案：

```
GIVEN BEST = { < COIN:X, DISTANCE:Y, DEGREE:K > }
DEFINE SOLUTION = { }
Y" = MINIMUM Y IN BESTi.Y for i: 1..n
KEEP ADDING BESTj.X to SOLUTION UNTILL BESTj.Y = Y" FOR j: 1..n 
```

**如果硬币可以重复使用：**

```
DEFINE SOLUTION = { }
DEFINE SUM = 0
LESS = { Si : Si < m }
SORT LESS IN DESCENDING ORDER
FOR Li in LESS DO
    WHILE (SUM+Li) <= m DO
        SUM = SUM + Li
        ADD Li TO SOLUTION
    END-WHILE

    IF SUM = m THEN BREAK-FOR
END-FOR
RETURN SOLUTION 
```

在 JavaScript 中：

```
function coinProblem (var coins, var value)
{
    var solution = new Array();
    var sum = 0;
    var less = new Array();

    for (var i in coins)
        if (i <= value)
            less.push(i);

    // sort in descending order
    less.sort();
    less.reverse();

    for (var i in less)
    {
        while ((sum+i) <= value)
        {
            solution.push(i);
            sum = sum + i;
        }

        if (sum == value) break;
    }

    return solution;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:24:17.343

您可以尝试这个简单的算法（[JSFiddle 演示](http://jsfiddle.net/fedosov/p8xZM/15/)）：

```
/**
 * @param src {Array} List of available values
 * @param val {Number} Target value
 * @returns {Array}
 */
function get_combinations(src, val)
{
    var result = [];
    var source = src.slice();
    source.sort();

    while (val > 0)
    {
        for (var i = source.length - 1; i >= 0; i--)
        {
            if (source[i] <= val || i == 0)
            {
                val = val - source[i];
                result.push(source[i]);
                break;
            }
        }
    }

    return result;
} 
```

# php - 使用 JQuery ajax 和 php 登录表单

> ID：15986808
> 
> 赞同：6
> 
> 时间：2013-04-13T10:27:48.203
> 
> 标签：php, ajax, jquery, modal-dialog

**目标：**
**第 1 步：**在 JQuery 对话框中打开一个表单。用户输入用户名和密码，点击登录。 **第 2 步：** Ajax 将数据发送到服务器端脚本，在我的例子中是 loginproc.php。
**第 3 步：**使用 loginproc 验证登录。如果登录成功，用户将被重定向到一个页面。
**第 4 步：**否则，将向对话框发送一条消息，并将其附加到对话框本身以及抖动效果。

**到目前为止，如果我使用 '$("#admin-form").sumbit();'，第一步和第三步工作正常 就在关闭对话框之前。我不确定如何在对话框中设置无效的登录文本。**

代码：

```
$(function() {
    var name = $("#name"),
            password = $("#password"),
            allFields = $([]).add(name).add(password),
            tips = $(".validateTips");

    function updateTips(t) {
        tips
                .text(t)
                .addClass("ui-state-highlight");
        setTimeout(function() {
            tips.removeClass("ui-state-highlight", 1500);
        }, 500);
    }

    function checkLength(o, n, min, max) {
        if (o.val().length > max || o.val().length < min) {
            o.addClass("ui-state-error");
            updateTips("Length of " + n + " must be between " +
                    min + " and " + max + ".");
            return false;
        } else {
            return true;
        }
    }

    function checkRegexp(o, regexp, n) {
        if (!(regexp.test(o.val()))) {
            o.addClass("ui-state-error");
            updateTips(n);
            return false;
        } else {
            return true;
        }
    }

    $("#login-form").dialog({
        autoOpen: false,
        /*      height: 300, */
        width: 450,
        show: {
            effect: "explode",
            duration: 1000
        },
        hide: {
            effect: "explode",
            duration: 1000
        },
        modal: true,
        buttons: {
            "Login": function() {
                var bValid = true;
                allFields.removeClass("ui-state-error");

                bValid = bValid && checkLength(name, "username", 3, 16);
                bValid = bValid && checkLength(password, "password", 5, 32);
                bValid = bValid && checkRegexp(name, /^[a-z]([0-9a-z_])+$/i, "Username may consist of a-z, 0-9, underscores, begin with a letter.");
                bValid = bValid && checkRegexp(password, /^([0-9a-zA-Z_])+$/, "Password field only allow : a-z 0-9");
                if (bValid) {
                    $("#admin_login").submit();
                    $(this).dialog("close");
                }
            },
            Cancel: function() {
                $(this).dialog("close");
            }
        },
        close: function() {
            allFields.val("").removeClass("ui-state-error");
        }
    });

    // Link to open the dialog
    $("#admin-link").click(function(event) {
        $("#login-form").dialog("open");
        event.preventDefault();
    });

}); 
```

这是我需要进行一些更改的代码部分。

```
if (bValid) {
     $("#admin_login").submit();
     $(this).dialog("close");
} 
```

请帮我解决这个问题

**更新：** 表格：

```
<form method="post" action="class/loginproc.php" id="admin_login">
<fieldset>
 <label for="name">Username</label>
<input type="text" name="user" id="name" class="text ui-widget-content ui-corner-all" />
 <label for="password">Password</label>
<input type="password" name="pass" id="password" value="" class="text ui-widget-content ui-corner-all" />
</fieldset>
</form> 
```

**登录过程.php**

```
<?php

require_once 'utils.php';
if (is_null($_POST['user']) || is_null($_POST['pass'])) {
    utils::redirect_url("../index.php");
} else {
    $utils = new utils();
    $username = $_POST['user'];
    $password = $_POST['pass'];
    $type = 'admin';
    $response = $utils->validate_user($username, $password, $type);
    if ($response == true) {
        return true;
        /*
          $utils->login_redirect($type); */
    } else {
        return false;
        /* $_SESSION['valid'] = false;
          utils::redirect_url("../index.php"); */
    }
}
?> 
```

**jQuery：**

```
 if (bValid) {
 var data = $('#admin_login').serialize();
 $.ajax({
 url: "class/loginproc.php",
 type: "post",
 data: data,
 dataType: "json",
 success: function(data) {
 if (data.success) {
   window.location = "../admin.php";
 }
 else {
   alert('Invalid Login');
  }
 }
                });
                $(this).dialog("close");
            } 
```

**解决方案：** 感谢 'Mohammad Adil' ，我能够解决这个问题。我不得不稍微改变他提供的解决方案以获得适当的结果。因此，我将其发布在这里以供将来参考。
**查询**

```
 if (bValid) {
     var data = $('#admin_login').serialize();
     $.ajax({
     url: "class/loginproc.php",
     type: "post",
     data: data,
     dataType: "json",
     success: function(data) {
      window.location = "admin.php";
     },
     error: function(data) {
       alert('invalid');
     }
   });
   $(this).dialog("close");
  } 
```

**登录过程：**

```
 $response = $utils->validate_user($username, $password, $type);
    if ($response == true) {
        echo true;
    } else {
        echo false;
    } 
```

问候
**Genocide_Hoax**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:32:03.930

```
 if (bValid) {
    var data = $('#admin_login').serialize();                  
          $.ajax({
              url:"loginproc.php",
              type: "post",
              data : data,
              dataType:"text",
              success:function(data){
                  if(data == "true"){ 
                    window.location = "some location";
                  }
                 else{
                       // LOGIN FAILED
                 }
              }
           });
         $(this).dialog("close");
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T13:02:12.367

您将方法和动作放在表单中，我认为如果使用 Ajax 应该省略，因为如果不省略，数据将不会异步发送。

# android - 在按钮android中选择一个图标

> ID：15986809
> 
> 赞同：0
> 
> 时间：2013-04-13T10:28:06.283
> 
> 标签：android, button

all... 请问如何在 OnClickListener() 中选择图标？

1.  当我按下一个按钮时，会出现一个带有许多图标的对话框/界面。

2.  选择我想要的图标后，对话框将关闭，我选择的图标将显示在按钮上。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:37:46.467

try this code. it work as per your requirement.

```
package com.example.demotext;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;

public class HomePage extends Activity {

    int drawables[] = { R.drawable.ic_launcher, R.drawable.ic_launcher_ };
    String drawables_[] = { "R.drawable.ic_launcher", "R.drawable.ic_launcher_" };
    private Button btn1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        btn1 = (Button) findViewById(R.id.button1);

        btn1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                AlertDialog.Builder builder = new AlertDialog.Builder(
                        HomePage.this);
                builder.setTitle("Select Your Account");

                builder.setAdapter(new ArrayAdapter<String>(HomePage.this,
                        android.R.layout.simple_list_item_1, drawables_),
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                // TODO Auto-generated method stub
                                btn1.setBackgroundDrawable(getResources()
                                    .getDrawable(drawables[which]));

                            }
                        });

                builder.show();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:45:43.927

当您从对话框中选择一个图像时，每次单击启用一个标志，无论其是否为真，然后在关闭对话框后简单检查标志是否为真，然后根据标志简单地从对话框中设置所选图像并设置在您的按钮上。

如果您有任何澄清，请告诉我..或在此处添加一些代码..以便我修改一次..

# c++ - C++：wstring 是跨平台的吗？

> ID：15986810
> 
> 赞同：5
> 
> 时间：2013-04-13T10:28:12.857
> 
> 标签：c++, cross-platform, wstring

我目前正在 Windows 上开发，但我想稍后让我的应用程序跨平台。它没有/不需要 GUI。

我一直在使用 wstrings，希望这是最好的解决方案。我在项目设置中使用“多字节字符集”。

所有其他平台也支持 wstring 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T10:56:38.727

即使`std::wstring`其他平台支持，它的定义和含义似乎也因平台而异：例如`wchar_t`（这是 a 的基本“构建块” `std::wstring`）[在 Windows 上是 2 字节，而在 Linux 上是 4 字节](https://stackoverflow.com/a/402918/1629821)。

因此，您可以在 Windows 上使用**UTF-16**`std::wstring`格式存储 Unicode 字符串（这也是 Win32 API 使用的 Unicode 格式），但在 Linux 上，您应该用于存储 Unicode **UTF-32**字符串。因此，如果同一个类 ( ) 在不同平台上具有不同的含义，我不会将*其*定义为可移植的。**`std::wstring`**`std::wstring`****

 *****可能，如果您想编写可移植的代码，您可以考虑在其中使用`std::string`和存储 Unicode **UTF-8**文本（实际上，`std::string`它基于`char`，在 Windows 和 Linux 上都是 1 个字节）。

或者，如果您可以使用新的 C++11 标准，您可能需要考虑**`std::u16string`**真正可移植的 ，因为它被定义为`basic_string<char16_t>`，因此它可以用于在每个平台上存储 Unicode UTF-16 文本，没有歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:30:49.997

> 所有其他平台也支持 wstring 吗？

它应该是。`std::wstring`是 C++ 输入/输出标准库的一部分，因此标准库的任何符合要求的实现都必须提供它。

由于它是标准 C++，`std::wstring`因此可以保证使用的程序是可移植的——至少对于`std::wstring`.*****

# javascript - Node.js：mocha 遇到问题并期望 to.throwError

> ID：15986813
> 
> 赞同：1
> 
> 时间：2013-04-13T10:28:28.270
> 
> 标签：javascript, node.js, tdd, mocha.js

我正在尝试为 Node.js 构建一个简单的登录模块。我试图以 TDD 的方式来做，但我还是新手，所以任何可以帮助我更好地理解它的提示或资源都会很棒。

当我用无效数据查询数据库时，我的问题就出现了，我期待一个错误。如果我手动测试应用程序，则会引发错误 - 这很好。但是，当我尝试使用 Mocha 和 Expect.js 对其进行测试时，我得到了`Error: expected fn to throw an exception`. 如果我将代码从切换`to.throwError()`到`to.not.throwError()`错误，则会正确抛出。我认为问题出在我尝试异步测试和错误处理的地方。第一次测试顺利通过。

谢谢参观。

**基于 SebastianG 指令的新代码**

**登录.js**

```
var MongoClient = require('mongodb').MongoClient;

exports.login = function(callback, email, password) {

    MongoClient.connect("mongodb://localhost:27017/stockalertDev", function(err, db) {
        if (err) {

            return err;
        }

        var collection = db.collection('users');
        if (email) {
            collection.findOne({email:email}, function(err, item) {
            try {   
                if (err) {
                    console.log('error');
                    throw new Error('error finding email');

                } else {

                        if (item) {
                            if (item.password == password) {
                            console.log('logged in');
                            //callback(null, item);
                            //return item;
                            } else {
                                console.log('here');
                                throw new Error('Email and password not matching');
                            }
                        } else {
                            throw new Error('Email not found');
                        }
                    } 
            } catch (err) {
                console.log('catch error here');
                callback(err, null);
            } finally {
                console.log('finally here');
                callback(null, item);
            }

            });
        }

    });
} 
```

**测试/登录-test.js**

```
var expect = require('expect.js'),
    assert = require('assert'),
    mocha = require('mocha'),
    mongo = require('mongodb');

var login = require('../login');

describe('login', function() {
    it('should login a real user', function(done) {
        expect(function() {
            login.login(function(err, item) {
                //console.log(item);
                if (err) throw err;

                done();
            }, 'email', 'password')
        }).to.not.throwError();
    });
    it('should error on unfound email', function(done) {
        expect(function() {
            login.login(function(err, item) {
                console.log(err);
                if (err) throw err;
                done();
            }, 'ert','wqew')
        }).to.throwError();

    }); 
    it('should error on incorrect match', function(done) {
        expect(function() {
            login.login(function(err, item) {
                console.log(err);
                throw err;
                done();
            }, 'email','wqew')
        }).to.throwError();
    });
}); 
```

**旧代码**

**登录.js**

```
var MongoClient = require('mongodb').MongoClient;

exports.login = function(email, password, callback, errCallback) {

    MongoClient.connect("mongodb://localhost:27017/stockalertDev", function(err, db) {
        if (err) {

            return err;
        }

        var collection = db.collection('users');
        if (email) {
            collection.findOne({email:email}, function(err, item) {
            try {   
                if (err) {
                    console.log('error');
                    throw new Error('error finding email');
                    errCallback(err);
                } else {

                        if (item) {
                            if (item.password == password) {
                            console.log('logged in');
                            callback(item);
                            //return item;
                            } else {
                                console.log('here');
                                throw new Error('Email and password not matching');
                            }
                        } else {
                            throw new Error('Email not found');
                        }
                    } 
            } catch (err) {
                errCallback(err);
            }
            });
        }

    });
} 
```

**测试/登录-test.js**

```
var expect = require('expect.js'),
    assert = require('assert'),
    mocha = require('mocha'),
    mongo = require('mongodb');

var login = require('../login');

describe('login', function() {
    it('should login a real user', function(done) {
        assert.doesNotThrow(function() {
            login.login('email','password',function() {
                done();
            }, function(err) {
                if (err) throw err;
                done();
            });
        });
    });
    it('should error on unfound email', function(done) {
        expect( function() { 
            login.login('atreq','a', function() {
                console.log('true');        
            }, function(err) {
                console.log(err);
                throw err;
        })}).to.throwError();

    }); 
    it('should error on incorrect match', function(done) {
        expect(function() {
            login.login('email','apassword', function() {
                console.log('true');
                done();
            }, function(err) {
                console.log(err);
                throw err;
            })
        }).to.throwError();
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T16:07:00.577

在异步节点代码中使用异常是一个坏主意（至少目前是这样）。有一个称为[域](http://nodejs.org/api/domain.html)的概念可以帮助您，但还非常具有实验性。

我建议使用 Node 方式：为错误保留回调的第一个参数。小例子：

```
function getUserData(cb) {
    var userData = // ...
    if (userData === null) {
        cb(new Error('Something bad happend.'));
    } else {
        cb(null, userData)
    }
} 
```

如果您想使用已经使用的 errorCallback：

```
errCallback(new Error('Email not found')); 
```

你可以做这样的事情（大多数测试框架为此提供了帮助方法，但是我对 Mocha 及其模块并不熟悉）：

```
it('should login a real user', function(done) {
    login.login(function(err, item) {
        expect(err).to.be(null);
        expect(item).not.to.be(null);
        done();
    }, 'email', 'password');
});

it('should error on unfound email', function(done) {
    login.login(function(err, item) {
        expect(err).not.to.be(null);
        expect(item).to.be(null);
        done();
    }, 'ert','wqew');
}); 
```

# android - 有什么方法可以通过wifi从Android手机连接打印机进行打印？

> ID：15986817
> 
> 赞同：1
> 
> 时间：2013-04-13T10:28:33.080
> 
> 标签：android, printing, android-wifi

我想通过wifi从Android手机打印到打印机。有没有机会这样做。因为我尝试四处搜索，结果只有应用程序可用。任何可用的示例代码都可以使用，请分享或提供您的这方面的专业知识。谢谢。

# java - 我必须进行类型转换，但他们的示例没有（Jsoup 文档类型）

> ID：15986818
> 
> 赞同：0
> 
> 时间：2013-04-13T10:28:39.583
> 
> 标签：java, jsoup

简单的问题，这是来自[Jsoup 介绍页面](http://jsoup.org/cookbook/introduction/parsing-a-document)的示例：

```
String html = "<html><head><title>First parse</title></head>"
  + "<body><p>Parsed HTML into a doc.</p></body></html>";
Document doc = Jsoup.parse(html); 
```

现在这对我不起作用，Netbeans 说您不能只从节点文档转到文档类型。很公平，所以我进行了类型转换并且错误消失了。像这样：

编辑：这不起作用！

```
String html = "<html><head><title>First parse</title></head>"
  + "<body><p>Parsed HTML into a doc.</p></body></html>";
Document doc = (Document) Jsoup.parse(html); 
```

类型转换不起作用：

```
Exception in thread "main" java.lang.ClassCastException: org.jsoup.nodes.Document cannot be cast to org.w3c.dom.Document
    at scraping.Scraping.main(Scraping.java:24) 
```

（在学习新东西时有点令人沮丧，然后你会从格式完全按照文档显示的示例中得到所有这些错误）

编辑：这是错误：

```
required: org.w3c.dom.Document
found:    ord.jsoup.nodes.Document 
```

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T11:05:28.207

如果有人感兴趣，文档类型是 Jsoup 库的一部分，通过导入访问：

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document; 
```

这使得代码可以正常工作（参见 Jsoup 网页上的示例）

# android - Android JSON 读取用户名错误

> ID：15986821
> 
> 赞同：0
> 
> 时间：2013-04-13T10:28:54.613
> 
> 标签：android, json, login

**这是我的 php 脚本，它工作正常**

```
if (isset($_GET['username']) && isset($_GET['password'])) {
  $con = mysql_connect("localhost", "aaaa", "bbbb");
  if (!$con) {
    die('Could not connect: '.mysql_error());
  }
  mysql_select_db("login", $con);
  $u = $_GET['username'];
  $p = $_GET['password'];
  $result = mysql_query("SELECT username FROM users WHERE password = '$p' AND username = '$u' ") or die('Errant query:');
  while ($row = mysql_fetch_assoc($result)) {
    $output = $row;
  }
  print(json_encode($output));
  mysql_close($con);
} else {
  $output = "not found";
  print(json_encode($output));
} 
```

**这是我的 php 脚本返回的**

```
{"username":"mohamed"} 
```

**这是登录活动**

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    HttpResponse response = null;
    InputStream webs = null;
    BufferedReader br = null;
    String line = "";
    String result = "";
    String url = "http://localhost/login.php?username=";
    EditText user = (EditText) findViewById(R.id.editText1);
    EditText pass = (EditText) findViewById(R.id.editText2);
    url = url + user.getText().toString() + "&password=" + pass.getText().toString();
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(url);
    try {
      response = httpClient.execute(httpPost);
      HttpEntity entity = response.getEntity();
      webs = entity.getContent();
      br = new BufferedReader(new InputStreamReader(webs, "iso-8859-1"), 8);
      StringBuilder sb = new StringBuilder();
      while ((line = br.readLine()) != null) {
        sb.append(line + "\n");
      }
      webs.close();
      result = sb.toString();
    } catch (ClientProtocolException e1) {
      e1.printStackTrace();
    } catch (IllegalStateException e1) {
      e1.printStackTrace();
    } catch (UnsupportedEncodingException e1) {
      e1.printStackTrace();
    } catch (IOException e1) {
      e1.printStackTrace();
    }
    final String res = result;
    Button lgn = (Button) findViewById(R.id.button1);
    lgn.setOnClickListener(new View.OnClickListener() {
      public void onClick(View arg0) {
        try {
          JSONObject json = new JSONObject(res);
          if (json.getString("username").equals("mohamed")) {
            Toast t = Toast.makeText(getApplicationContext(), "logged in", Toast.LENGTH_LONG);
            t.show();
          } else {
            Toast t = Toast.makeText(getApplicationContext(), "Invalid User", Toast.LENGTH_LONG);
            t.show();
          }
        } catch (JSONException e) {
          Toast t = Toast.makeText(getApplicationContext(), "Error Reading username", Toast.LENGTH_LONG);
          t.show();
          e.printStackTrace();
        }
      }
    });
  }
} 
```

**Toast 出现“读取用户名错误”**

有明确的互联网许可

安卓 4.2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:38:15.970

只需删除`\n`from while 循环，无需将其编辑为中断行，只需按原样读取即可。

```
StringBuilder sb=new StringBuilder();
while ((line=br.readLine())!=null) {
      sb.append(line);
} 
```

这将更改您的 json，`\n`并且当您解析它时，这将引发异常，因为它不是有效的形式。根据您在编辑后的回复`\n`将得到

```
{"username":"mohamed"}\n // so here this will invalid json format 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:34:38.710

这是我如何处理 php 和 json 的示例，希望对您有所帮助：

php:

```
 $result=mysql_query("SELECT * FROM MyTable ");

 $info=array();

 while($row = mysql_fetch_array($result,MYSQL_ASSOC))
    {

      array_push($info,$row);
    }

 echo json_encode($info); 
```

安卓：

网络服务部分：

```
 JSONArray jsonArray;
 HttpClient httpclient = new DefaultHttpClient();
 String url = "http://myurl.com/myphpfile.php";
 HttpGet getRequest = new HttpGet(url);

 try {
    HttpResponse response = httpclient.execute(getRequest);
    final String str = EntityUtils.toString(response.getEntity());

    jsonArray = new JSONArray(str);

} catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
} catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
} 
```

解码json部分：

```
 JSONObject jsonObject;
 String id,user,pswd;
 try{
for (int i = 0; i < jsonArray.length(); i++) {
    jsonObject = jsonArray.getJSONObject(i);

     id = jsonObject.getString("ID");
     user = jsonObject.getString("username");
    pswd = jsonObject.getString("password");

}

 }catch(Exception e){

        } 
```

# 笔记：

== 直接使用 webservices 会导致 4.0 手机出错，你必须使用异步任务，将 web services 部分放在 doinbackground 部分。==您可以更改代码以匹配您的表格字段，您需要的网络服务方法（发布或获取）......

# https - Facebook like 和 Fancybox2 不显示或协议不匹配

> ID：15986824
> 
> 赞同：0
> 
> 时间：2013-04-13T10:29:28.500
> 
> 标签：https, facebook-like, fancybox-2

我对 Fancybox2 和 Facebook 的类似按钮代码有一个奇怪的问题。我已经尝试了各种方法来使用 facebook 生成的代码来集成 like 按钮，但它只是不起作用。这是我所做的以及我得到的错误（问题将在最后出现）

**一个。**我尝试使用 iframe 代码，如 Fancybox 页面的提示和技巧部分所示。按钮出现，我可以单击它，但出现以下错误：

> 不安全的 JavaScript 尝试 从具有 URL [https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=21#channel=的框架访问具有 URL](https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=21#channel=) [http://jsfiddle.net/TheEternalAbyss/67Fxp/](http://jsfiddle.net/TheEternalAbyss/67Fxp/)的框架…l.net&channel_path=%2F_display%2F%3Ffb_xd_fragment%23xd_sig%3Df2ddbc4ff%26。请求访问的帧具有“https”协议，被访问的帧具有“http”协议。协议必须匹配。

因此，如果单击“赞”按钮，它就不会向 facebook 发送任何内容，并且在功能上已经失效。

**湾。**我决定尝试使用 Facebook 的类似代码生成器的 HTML5 方法，一切似乎都很好，但我没有在点击的图像中显示任何按钮。当我检查元素时，我看到了 div 和其中的所有 html，只是我在呈现的页面上什么都看不到。

这可以在这里特别看到...... [http://jsfiddle.net/TheEternalAbyss/67Fxp/](http://jsfiddle.net/TheEternalAbyss/67Fxp/)

需要注意的三件事： 1) 我有 iram 代码，所以如果您单击图像，您会看到按钮，但您也会收到协议不匹配错误。2）灰色边框区域（在页面中，当您单击图像时是 HTML5 方法，但只有当我有 html 代码时它才有效

`<div class="fb-like" data-href='' data-send="false" data-width="400" data-height="25" data-show-faces="true" data-font="lucida grande"></div>`

在 jsfiddle 的 html 区域。3）当您单击图像时，该灰色框中应该出现的是“赞”按钮，但我什么也没有。

所以最后我的问题：

**我怎样才能让这两种方法起作用..解决协议不匹配问题，或者使 html5 方法起作用？**

预先感谢您的协助。我真的需要弄清楚这个谢谢！

**编辑** 解析函数确实有助于让 facebook 出现，但是我仍然遇到协议不匹配问题。我会再玩一些，欢迎更多帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:29:12.427

如果您使用的是 HTML5 版本，则需要触发 JavaScript 调用来呈现按钮（如果它没有在页面加载时呈现）。由于您需要在页面加载时显示 Like 按钮，因此调用该`FB.XFBML.parse()`函数，您将看到该按钮将出现。

您需要做的是编辑 fancybox 的 onclick 事件，以便`FB.XFBML.parse()`在用户单击图像时调用它。

# azure - 从 SQL Azure 到本地 SQL Server 的 Azure SQL 数据同步

> ID：15986826
> 
> 赞同：0
> 
> 时间：2013-04-13T10:29:37.883
> 
> 标签：azure, synchronization, azure-sql-database

我有一个表，其中有 10000 条记录。我正在尝试使用 Azure 数据同步工具在 SQL Azure 与本地 SQL Server 之间进行同步。同步工具需要 35 分钟来同步所有记录。当我更新表中的一些记录并再次同步时，再次需要 35 分钟才能同步。据我所知，同步工具应该只同步更新的记录，而不是全部。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:17:03.333

Yes, it is for backup and also we are doing synchronization with on premises SQL to on premises Oracle and vice versa ie. Sync between

SQL Azure <=> on premises SQL Server <=> on premises Oracle

# php - 从主脚本连续调用和运行 php 脚本

> ID：15986832
> 
> 赞同：0
> 
> 时间：2013-04-13T10:30:11.080
> 
> 标签：php, include, sequence

我需要以正确的顺序运行几个 PHP 脚本（它们通过 OAuth 解析和检索一些数据），一个后一个，等待前一个完成（ **script2**需要在 script1 之后解析数据等等......）。

例如：

```
script1.php -> COMPLETED -> script2-php -> COMPLETED -> script3.php -> .... 
```

我`mainscript.php`使用以下代码调用脚本：

```
<?php 

echo '<br /><br />SCRIPT 1<br /><br /> ';
include ("script1.php");

set_time_limit(0);
$seconds = 5; // HERE I PUT 5 SECONDS BECAUSE I THINK ITS THE RIGHT TIME TO RUN PARSING
sleep($seconds);

echo '<br /><br />SCRIPT 2<br /><br />';
include ("script2.php");

set_time_limit(0);
$seconds = 5; // HERE I PUT 5 SECONDS BECAUSE I THINK ITS THE RIGHT TIME TO RUN PARSING
sleep($seconds);

echo '<br /><br />SCRIPT 3<br /><br /> ';
include ("script3.php");

set_time_limit(0);
$seconds = 5; // HERE I PUT 5 SECONDS BECAUSE I THINK ITS THE RIGHT TIME TO RUN PARSING
sleep($seconds);

echo '<br /><br />SCRIPT 4<br /><br /> ';
include ("script4.php");

?> 
```

`set_time_limit`所以我的问题是：将and sleep 放入`mainscript.php`，或者`INCLUDE`函数以正确的顺序依次调用每个脚本是否有意义？你能提供一个解决方案，一个建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:39:58.200

不需要 sleep 命令，php 按照定义按顺序运行它。

include 命令的行为就像您在主 php 文件中按顺序手动添加了包含的 php 文件的行！

# android - 使用 twitter4j 登录

> ID：15986835
> 
> 赞同：2
> 
> 时间：2013-04-13T10:30:27.870
> 
> 标签：android, twitter, twitter-oauth, twitter4j

我尝试实现一个登录 Twitter 的应用程序。我使用 twitter4j 之类的 API。我按照这个例子：

[http://consultingblogs.emc.com/nileeshabojjawar/archive/2010/03/18/twitter4j-oauth-generating-the-access-token.aspx](http://consultingblogs.emc.com/nileeshabojjawar/archive/2010/03/18/twitter4j-oauth-generating-the-access-token.aspx)

如果您阅读示例，应用程序会进入一个有 PIN 的页面，但在用户必须写入 PIN 之后。我希望这一步是自动的。任何人都可以建议我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T18:49:05.537

看来您使用的是过时的教程。您参考的教程是 2010 年发布的，从那时起很多事情都发生了变化。现在可以通过更自动化的过程对应用程序进行身份验证。

查看 twitter4j 对[仅应用程序身份验证](http://blog.twitter4j.org/2013/06/13/59)的建议。我不确定您的应用程序会做什么，但这似乎是大多数人的最佳选择。有关仅应用程序身份验证本身的更多信息，请查看 Twitter 的[官方文档](https://dev.twitter.com/docs/auth/application-only-auth)。

或者，您可以执行传统的 OAuth 身份验证。在这种情况下，对用户进行身份验证的方式有很多选择。[这](https://dev.twitter.com/docs/auth/obtaining-access-tokens)是这些选项的列表。

# java - 在 servlet 中显示结果的问题（对于数组，java）

> ID：15986842
> 
> 赞同：-1
> 
> 时间：2013-04-13T10:30:40.790
> 
> 标签：java, servlets

我在 servlet 中遇到了一些麻烦。我从 Apache Tomcat 运行它。所以我在启动时运行它，我有一个控制台，一般来说一切都是标准的，但这里是代码：

```
import java.io.*;
import java.util.ArrayList;
import java.util.List;
import javax.servlet.*;
import javax.servlet.http.*;

public class servletss extends HttpServlet {

    @Override
     protected void doGet(HttpServletRequest req, HttpServletResponse res)
            throws ServletException, IOException {
        res.setContentType("text/html");
        PrintWriter out = res.getWriter();

        File file = new File("C:\\prov");
        String list[] = file.list();

        out.println("<html>");
        out.println("<head>");
        out.println("<title>testservlets</title>");
        out.println("</head>");
        out.println("<body>");
        /*
        * начало вывода
        */

        ArrayList<String> sizel = new ArrayList<String>();
    sizel = pagef();
    int sizelist;
    sizelist = sizel.size();

        int pageint = 1;// номер страницы

    ArrayList<String> sizetris = new ArrayList<String>();

    int startlist = (pageint - 1) * 30;
        int endlist = (sizel.size() >= (startlist + 30)) ? (startlist + 30): sizel.size();

    sizetris.addAll(sizel.subList(startlist, endlist));

    double startdouble = 10.0;// конец показа страниц
        int endint = (int) (pageint * 10);// конечное число пользователя
    double allpage = sizelist / 3;// число страниц всего
        double page = allpage / startdouble;// деление страниц
    double lsc = Math.ceil(page);
        String separator = System.getProperty("line.separator");
        if (endint > lsc * 10) {
            out.println("страниц не найдено");
        } else {
            out.println("<div class=\"pagen\">" + pageint + "</div>");

                        String str = paginate(sizetris, endint * 3);
            out.println("<div class=\"bloctext\">" + str + separator + "</div>");

            out.println("<div class=\"pagen\">" + pageint + "</div>");
        }

        for (int i = 0; i < list.length; i++) {
            out.println("<a href=\"http://localhost:8080/test/servletss?i=" + i + "\" str=\"" + i + "\">" + i + "</a>");

        }
        out.println("</body>");

        out.println("</html>");
    }

    static <T> String paginate(List<T> pages, int pagesPerOut) {
        for (int i = 0; i < pages.size(); i += pagesPerOut) {
            System.out.println(paginate(pages, i, pagesPerOut));
        }
        return "";

    }

    static <T> List<T> paginate(List<T> pages, int start, int count) {
        int end = start + count > pages.size() ? pages.size() : start + count;
        return pages.subList(start, end);

    }
        /*
         * метод для возвращения массива страниц
         */

    static ArrayList<String> pagef() {
        ArrayList<String> page = new ArrayList<String>();
        BufferedReader br = null;
        String s = null;
        File file = new File("C:\\prov");
        String list[] = file.list();

        try {
            for (int i = 0; i < list.length; i++) {
                File fileread = new File("C:\\prov\\" + list[i]);
                br = new BufferedReader(new InputStreamReader(
                        new FileInputStream(fileread), "UTF-8"));
                while ((s = br.readLine()) != null) {
                    page.add(s + "\n");
                }
                br.close();
            }
        } catch (Exception e) {
                    System.out.println(e);
        }

        return page;

    }
} 
```

我开始了它，现在这部分代码：

```
out.println("<div class=\"bloctext\">" + str + separator + "</div>"); 
```

她必须缝 30 针，但是当我运行代码时，我什么都看不到，但是看着控制台我看到了我的 30 针））在控制台 Tomcat））为什么那里的工作结果，而不是页面变成一个servlet？您的代码中还有其他问题，不要看，请告诉我如何解决这个问题？一切都正确，servlet在正确的文件夹中，这里是web.xml代码文件，以防万一：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <servlet>
        <servlet-name>servletss</servlet-name>
        <servlet-class>servletss</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>servletss</servlet-name>
        <url-pattern>/servletss</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

提前感谢您的回答））

**UPD**

```
import java.io.*;
import java.util.ArrayList;
import java.util.List;
import javax.servlet.*;
import javax.servlet.http.*;

public class servletss extends HttpServlet {

    @Override
     protected void doGet(HttpServletRequest req, HttpServletResponse res)
            throws ServletException, IOException {
        res.setContentType("text/html");
        PrintWriter out;

            out = res.getWriter();

        File file = new File("C:\\prov");
        String list[] = file.list();

        out.println("<html>");
        out.println("<head>");
        out.println("<title>testservlets</title>");
        out.println("</head>");
        out.println("<body>");
        /*
        * начало вывода
        */

        ArrayList<String> sizel = new ArrayList<String>();
    sizel = pagef();
    int sizelist;
    sizelist = sizel.size();

        int pageint = 1;// номер страницы

    ArrayList<String> sizetris = new ArrayList<String>();

    int startlist = (pageint - 1) * 30;
        int endlist = (sizel.size() >= (startlist + 30)) ? (startlist + 30): sizel.size();

    sizetris.addAll(sizel.subList(startlist, endlist));

    double startdouble = 10.0;// конец показа страниц
        int endint = (int) (pageint * 10);// конечное число пользователя
    double allpage = sizelist / 3;// число страниц всего
        double page = allpage / startdouble;// деление страниц
    double lsc = Math.ceil(page);
        String separator = System.getProperty("line.separator");
        if (endint > lsc * 10) {
            out.println("страниц не найдено");
        } else {
            out.println("<div class=\"pagen\">" + pageint + "</div>");

                        String str = paginate(sizetris, endint * 3);
            out.println("<div class=\"bloctext\">" + str + separator + "</div>");

            out.println("<div class=\"pagen\">" + pageint + "</div>");
        }

        for (int i = 0; i < list.length; i++) {
            out.println("<a href=\"http://localhost:8080/test/servletss?i=" + i + "\" str=\"" + i + "\">" + i + "</a>");

        }
        out.println("</body>");

        out.println("</html>");
        out.flush();
        out.close();
    }

    static <T> String paginate(List<T> pages, int pagesPerOut) {
        for (int i = 0; i < pages.size(); i += pagesPerOut) {
            System.out.println(paginate(pages, i, pagesPerOut));
        }
        return "";

    }

    static <T> List<T> paginate(List<T> pages, int start, int count) {
        int end = start + count > pages.size() ? pages.size() : start + count;
        return pages.subList(start, end);

    }
        /*
         * метод для возвращения массива страниц
         */

    static ArrayList<String> pagef() {
        ArrayList<String> page = new ArrayList<String>();
        BufferedReader br = null;
        String s = null;
        File file = new File("C:\\prov");
        String list[] = file.list();

        try {
            for (int i = 0; i < list.length; i++) {
                File fileread = new File("C:\\prov\\" + list[i]);
                br = new BufferedReader(new InputStreamReader(
                        new FileInputStream(fileread), "UTF-8"));
                while ((s = br.readLine()) != null) {
                    page.add(s + "\n");
                }
                br.close();
            }
        } catch (Exception e) {
                    System.out.println(e);
        }

        return page;

    }
} 
```

**更新 2**

```
<html>
<head>
<title>testservlets</title>
</head>
<body>
<div class="pagen">1</div>
<div class="bloctext">
 //There must be a conclusion, but it in a servlet
</div>
<div class="pagen">1</div>
<a href="http://localhost:8080/test/servletss?i=0" str="0">0</a>
<a href="http://localhost:8080/test/servletss?i=1" str="1">1</a>
<a href="http://localhost:8080/test/servletss?i=2" str="2">2</a>
<a href="http://localhost:8080/test/servletss?i=3" str="3">3</a>
<a href="http://localhost:8080/test/servletss?i=4" str="4">4</a>
<a href="http://localhost:8080/test/servletss?i=5" str="5">5</a>
<a href="http://localhost:8080/test/servletss?i=6" str="6">6</a>
<a href="http://localhost:8080/test/servletss?i=7" str="7">7</a>
<a href="http://localhost:8080/test/servletss?i=8" str="8">8</a>
<a href="http://localhost:8080/test/servletss?i=9" str="9">9</a>
<a href="http://localhost:8080/test/servletss?i=10" str="10">10</a>
<a href="http://localhost:8080/test/servletss?i=11" str="11">11</a>
<a href="http://localhost:8080/test/servletss?i=12" str="12">12</a>
<a href="http://localhost:8080/test/servletss?i=13" str="13">13</a>
<a href="http://localhost:8080/test/servletss?i=14" str="14">14</a>
<a href="http://localhost:8080/test/servletss?i=15" str="15">15</a>
<a href="http://localhost:8080/test/servletss?i=16" str="16">16</a>
<a href="http://localhost:8080/test/servletss?i=17" str="17">17</a>
<a href="http://localhost:8080/test/servletss?i=18" str="18">18</a>
<a href="http://localhost:8080/test/servletss?i=19" str="19">19</a>
<a href="http://localhost:8080/test/servletss?i=20" str="20">20</a>
<a href="http://localhost:8080/test/servletss?i=21" str="21">21</a>
<a href="http://localhost:8080/test/servletss?i=22" str="22">22</a>
<a href="http://localhost:8080/test/servletss?i=23" str="23">23</a>
<a href="http://localhost:8080/test/servletss?i=24" str="24">24</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:44:00.100

看起来`doGet()`你没有做`out.flush()`和`out.close()`。

`PrintWriter`是**Buffered writer**的类型，当您说它`out.print()`写入**buffer**而不是实际的**stream**时。要使**缓冲区**的内容流向**流**（在您的情况下是您的流`HttpServletResponse`），您需要调用`out.flush()`

编辑：您可以像这样`out.println("</html>");`（在方法结束时）调用这些方法，`doGet()`

```
out.println("</html>");
out.flush();
out.close(); 
```

# java - 如何在 JFrame 中实现对象并使其在墙壁上反弹

> ID：15986849
> 
> 赞同：0
> 
> 时间：2013-04-13T10:31:10.810
> 
> 标签：java, user-interface

我刚开始学习java，除了`JFrame`和`JLayout`.

如何在 JFrame 中实现一个对象（球），并使其无限次反弹墙壁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:40:58.497

您可以通过`swing`with `Thread`concept创建它

*   `swing`您可以在概念中通过摇摆 drawImage 来创建球

*   要执行移动和延迟概念，您可以使用`Thread`pakage

为此，请参阅参考[Java 完整版 7](http://www.sahyadri.edu.in/SMCA/students_guide/3semnotes/java/Java%20The%20Complete%20Reference,%207th%20Edition.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:29:50.240

一种方法是在 JFrame 中添加一个 JPanel 的子类，该子类具有重写的paintComponent 方法。此类可以具有用于球位置的字段和用于重新绘制面板的 javax.swing.Timer。它可能是这样的（未经测试）：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class BouncingBall extends JPanel{
    //Ball position
    private int x = 0;
    private int y = 0;
    //Position change after every repaint
    private int xIncrement = 5;
    private int yIncrement = 5;
    //Ball radius
    private final int R = 10;

    private Timer timer;

    public BouncingBall(){
        timer = new Timer(25, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
               BouncingBall.this.repaint();
        }
         });

    timer.start();
   }

   @Override
   protected void paintComponent(Graphics g) {
       super.paintComponent(g);
       //If the ball hits one of the panel boundaries
       //change to the opposite direction
       if (x < 0 || x > getWidth()) {
           xIncrement *= -1;
       }
       if (y < 0 || y > getHeight()) {
           yIncrement *= -1;
       }
       //increment position
       x += xIncrement;
       y += yIncrement;
       //draw the ball
       g.fillOval(x - R, y - R, R * 2, R * 2);
   }
} 
```

# javascript - 无法删除动态添加的脚本

> ID：15986850
> 
> 赞同：2
> 
> 时间：2013-04-13T10:31:34.887
> 
> 标签：javascript, append, removechild

我正在附加一个引用 at javascript 和样式表的子元素，但是当不再使用它时，我想再次删除它。

```
 var head = document.getElementsByTagName('head')[0];

        // We create the style
        var style = document.createElement('link');
        style.setAttribute("rel", "stylesheet");
        style.setAttribute("type", "text/css");
        style.setAttribute("href", '_css/style.'+app+'.css');

        var script = document.createElement('script');
        script.setAttribute("type", "text/javascript");
        script.setAttribute("src", '_scripts/_js/script.'+app+'.js');

        // And the append the style
        head.appendChild(style);
        head.appendChild(script); 
```

这就是我附加脚本的方式，它工作得很好。但我不知道如何从 HTML 的 head 标签中再次删除标签。

有谁知道如何再次从标题标签中删除标签.. 我一直在 Stackoverflow 周围搜索，但实际上似乎没有人遇到这种问题，但如果有人知道还有另一个问题在回答这个问题，请告诉我..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T10:42:29.787

简而言之，**您**不能，即使您删除了`scripts`标签，那些脚本也在内存中并且没有删除它们。

一种技巧是编写一个脚本来识别其他脚本正在做什么（添加事件、创建变量、函数等），然后中和它们

但是解决这个问题的真正方法是在一个[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)中编写你的脚本，这样一旦程序控制超出了它们的范围，它们就会从内存中删除。

您可能还想深入研究 Require.js

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T10:34:53.213

您可以使用以下方法删除元素[`removeChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)：

```
var head = document.getElementsByTagName('head')[0];

//removing them from the head, where you added them
head.removeChild(script);
head.removeChild(style); 
```

然而：

*   移除的样式/链接元素将移除其中定义的样式。
*   但是JS不能这样卸载。它们将留在记忆中。如果你有一些逻辑来管理你的脚本会更好，比如一些依赖管理器。

因此[删除样式/链接元素可能有一些用处](https://github.com/fskreuz/spray)，但删除脚本元素没有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T10:36:25.337

```
document.getElementsByTagName('head')[0].removeChild(document.getElementsByTagName('head')[0].getElementsByTagName('script')[0]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T10:39:00.307

恐怕我们无法删除脚本标签。即使您删除它，该脚本已经执行并且无法撤消。

例如：在 test.js 文件中

```
window.Test = "aaa"; 
```

当我们引用这个脚本时，浏览器会下载并自动执行文件中的所有语句。当我们删除脚本标签时，语句已经执行（窗口变量已经具有属性测试）

# java - EJB3 中的 IOException

> ID：15986857
> 
> 赞同：0
> 
> 时间：2013-04-13T10:32:25.393
> 
> 标签：java, ejb-3.0, ioexception

所以我以前问过这个问题，但我没有得到我需要的安静。我是 JAVA 企业版和 EJB3 的新手，我正在使用它在 JBOSS 服务器 v4.0 上创建会话 bean。所以这是我的确切问题，我在 bean 上的业务方法必须创建一个文件，保存客户端发送的一些字符串，所以我不得不抛出一个 IOExcpetion。我用 EJB3 尝试了一个 Hello world，它工作了，但是当我开始在我的 bean 上使用异常时，我的客户端不再连接服务器 bean。我会给你我的 bean 和我的客户的代码以及我得到的错误，有人可以帮助我吗，因为我已经尽我所能尝试了，但仍然是同样的错误，这是一个工程项目，我真的没时间了，还有两周的时间 :( 我的会话 Bean 代码包 com.et;

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import javax.ejb.Stateless;
import com.gestionfichier.gestion.GestionFichier;

@Stateless
public class EnvoiCodeExceptionBean implements EnvoiCodeException {

public String EnvoiCode(String Code) throws IOException 
{
    PrintWriter ecrivain = null;
    File f=GestionFichier.CreerFichier("temp");
    ecrivain =  new PrintWriter(new BufferedWriter(new FileWriter(f)));
    ecrivain.println(Code);
    ecrivain.close();
    throw new IOException("error");

}
    } 
```

我的客户代码

```
 import java.io.IOException;
 import javax.naming.Context;
 import javax.naming.InitialContext;
 import javax.naming.NamingException;

 import com.et.EnvoiCodeException;
 public class AppelClient {
  public static void main(String[] args) throws IOException {
    try {
 Context context = new InitialContext();
 EnvoiCodeException beanRemote = (EnvoiCodeException)
 context.lookup("EnvoiCodeExceptionBean/remote");
 beanRemote.EnvoiCode("some Sring to send");

 } catch (NamingException e) {
 e.printStackTrace();
  }
  }
  } 
```

以及我在 Eclipse 控制台上得到的信息

```
 Exception in thread "main" java.lang.reflect.UndeclaredThrowableException
at $Proxy0.EnvoiCode(Unknown Source)
at AppelClient.main(AppelClient.java:14)
 Caused by: java.lang.ClassNotFoundException: [Ljava.lang.StackTraceElement;
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at    org.jboss.remoting.loading.RemotingClassLoader.loadClass(RemotingClassLoader.java:50)
at org.jboss.remoting.loading.ObjectInputStreamWithClassLoader.resolveClass(ObjectInputStreamWithClassLoader.java:139)
at java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)
at java.io.ObjectInputStream.readClassDesc(Unknown Source)
at java.io.ObjectInputStream.readArray(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.defaultReadObject(Unknown Source)
at java.lang.Throwable.readObject(Throwable.java:913)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.defaultReadObject(Unknown Source)
at java.lang.Throwable.readObject(Throwable.java:913)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.defaultReadObject(Unknown Source)
at java.lang.Throwable.readObject(Throwable.java:913)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.defaultReadObject(Unknown Source)
at java.lang.Throwable.readObject(Throwable.java:913)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at org.jboss.remoting.serialization.impl.java.JavaSerializationManager.receiveObject(JavaSerializationManager.java:128)
at org.jboss.remoting.marshal.serializable.SerializableUnMarshaller.read(SerializableUnMarshaller.java:66)
at org.jboss.remoting.transport.socket.SocketClientInvoker.transport(SocketClientInvoker.java:279)
at org.jboss.remoting.RemoteClientInvoker.invoke(RemoteClientInvoker.java:143)
at org.jboss.remoting.Client.invoke(Client.java:525)
at org.jboss.remoting.Client.invoke(Client.java:488)
at org.jboss.aspects.remoting.InvokeRemoteInterceptor.invoke(InvokeRemoteInterceptor.java:55)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at org.jboss.aspects.tx.ClientTxPropagationInterceptor.invoke(ClientTxPropagationInterceptor.java:61)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at org.jboss.aspects.security.SecurityClientInterceptor.invoke(SecurityClientInterceptor.java:53)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at org.jboss.ejb3.remoting.IsLocalInterceptor.invoke(IsLocalInterceptor.java:77)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at    org.jboss.ejb3.stateless.StatelessRemoteProxy.invoke(StatelessRemoteProxy.java:102)
... 2 more 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-16T09:53:28.620

您使用的 API (GestionFichier) 可能会引发此异常。似乎是一些用户修改的异常抛出。所以没有妥善处理。请检查并 Catch Throwable 并重试。它可以帮助您更好地了解此处生成的异常。

# php - 在 php 中用 2 个变量求解 1 个方程

> ID：15986860
> 
> 赞同：0
> 
> 时间：2013-04-13T10:32:39.083
> 
> 标签：php, variables, math, equation

我正在尝试找到解决方案`a^10-b^15 = 10510100501`

有没有办法找到它？

我用 PHP 编写了以下代码，但没有结果：

```
<?php
    $total = 0;
    $a=0;
    $b=0;
    for($b=0;$b<10000;$b++){
        for($a=0;$a<10000;$a++){
            $total = pow($a,10) - pow($b,15);

            if($total == 10510100501){ echo $a." ".$b; }
            if($total > 10510100501){ continue;}
        }
    }
    echo "none";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:14:45.310

如果您尝试运行此代码，循环将迭代多达 1000 万次。它超过了 PHP 的最大执行时间......所以，结果将是未知的（超时）..

由于您仅循环整数值，因此可能无法实现特定输出。

要获得该特定值，您应该尝试使用浮点值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-13T10:44:04.670

如果你应该只使用 else 而不是第二个。

```
 <?php
    $total = 0;
    $a=0;
    $b=0;
    for($b=0;$b<10000;$b++){
        for($a=0;$a<10000;$a++){
            $total = pow($a,10) - pow($b,15);

            if($total == 10510100501){ echo $a." ".$b; }
            else { continue;}
        }
    }
    echo "none";
?> 
```

# objective-c - 在界面生成器中将列添加到 nstableview

> ID：15986862
> 
> 赞同：5
> 
> 时间：2013-04-13T10:32:46.410
> 
> 标签：objective-c, xcode, macos, interface-builder, nstableview

如何`NSTableView`从界面构建器中添加新列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T10:34:26.327

如果您在 Interface Builder 中签入，则会有**Columns**的数量。

默认值为 2，使用微调器添加/删除。只需单击向上，您将获得更多。

然后，您可以根据您的要求设置它调整大小选项。

![在此处输入图像描述](https://i.stack.imgur.com/2AUaw.jpg)

# cmd - 如何从命令行调用 thg（Tortoise HG 命令行）并等待它退出？

> ID：15986868
> 
> 赞同：0
> 
> 时间：2013-04-13T10:33:20.930
> 
> 标签：cmd, command

我想从命令行执行如下命令：

> 提交

我还希望命令行等到 thg 关闭后再继续。

目前，这不起作用，即使我使用以下命令：

> 开始 /WAIT 提交

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:58:54.250

我想通了！

这是答案：

> thg 提交 --nofork

# jquery - jQuery + XML 和 for()

> ID：15986869
> 
> 赞同：0
> 
> 时间：2013-04-13T10:33:21.637
> 
> 标签：jquery, for-loop, html-entities

我正在制作一个网站，其中部分页面使用 XML 更新。大多数 DOM 脚本是用 jQuery 完成的，但是为了解析 XML，我使用了 for() 循环。

1.  在 jQuery 中是否有更多的本地方式来实现这一点？
2.  我似乎无法将 XML 存储为数组。这里有什么问题吗？
3.  如何处理 HTML 实体/特殊字符？

    ```
    function getPortfolioText(path)
    {
    var linkArray= new Array();
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
    }else{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET",'images/'+path+"/note1.xml",false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML;
    document.getElementById("message").innerHTML="<p class='attributes'>project  description</p>"+xmlDoc.getElementsByTagName("body")[0].childNodes[0].nodeValue;    
    for (var i = 0; i < xmlDoc.getElementsByTagName("links")[0].childNodes.length; i++)     {
    linkArray[i]=xmlDoc.getElementsByTagName("p")[i].childNodes[0].nodeValue;
    };
    }; 
    ```

这是我的 XML

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
    <note>
    <links>
    <p>http://url.com/two/images/0.jpg</p>
    <p>http://url.com/two/images/1.jpg</p>
    <p>http://url.com/two/images/2.jpg</p>
    <p>http://url.com/two/images/3.jpg</p>
    </links>
    <body>text description &amp; please include html entities.</body>
    </note> 
```

# php - 每当我更改文件夹路径时，PHP PEAR BBCodeParser2 都会引发错误

> ID：15986875
> 
> 赞同：0
> 
> 时间：2013-04-13T10:34:04.450
> 
> 标签：php, pear

我下载了 PEAR 包 HTML_BBCodeParser2 并在 easyPHP (LAMP) 根文件夹中进行了令人满意的尝试。

我在用：

```
require_once('HTML/BBCodeParser2.php');

/* get options from the ini file */
$config = parse_ini_file('BBCodeParser2.ini', true);
$options = $config['HTML_BBCodeParser2'];
$parser = new HTML_BBCodeParser2($options); 
```

一切正常，BBCode 得到很好的解析。但是，如果我将包含 BBCodeParser2.php 的“HTML”文件夹转移到任何其他文件夹并更改所需的路径，则会引发以下错误：

```
Uncaught exception 'InvalidArgumentException' with message 'Failed to load filter Basic' in ........ ...... HTML_BBCodeParser2-0.1.0\B\HTML\BBCodeParser2.php on line 190 
```

我明白`188 to 190`BBCodeParser2.php 中的那一行是：

```
@include_once 'HTML/BBCodeParser2/Filter/'.$filter.'.php';
  if (!class_exists($class)) {
   throw new InvalidArgumentException("Failed to load filter $filter"); 
```

我尝试了每条相对+绝对路径，但是页面要么抛出上述错误，要么不显示任何内容。

我的问题是，如果我必须让新文件夹说`B`并移动其中的文件，我应该改变什么，`line 188`因为我知道这是引发错误的那一行。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:40:12.370

不要弄乱文件中的路径 - 它会阻止您将 lib 升级到新版本。

如果要将整个库移动到另一个目录，则还需要调整包含路径。

# c# - 删除实体框架中的子项

> ID：15986878
> 
> 赞同：1
> 
> 时间：2013-04-13T10:34:41.907
> 
> 标签：c#, entity-framework

在我的数据库模型中，我有 4 个实体：订单、服务、客户、员工。他们的关系：

客户 0..1 - * 订单

订单 1 - * 服务

员工 1 - * 服务。

我尝试按特定顺序删除所有服务，但收到 InvalidOperationException： *操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。*

这是我的代码：

```
 public static void ClearSevicesInOrder(int orderId)
        {
            using (DbEntities context = new DbEntities())
            {
                var o = context.Orders.Find(orderId);
                o.Services.Clear();
                context.SaveChanges();
            }
        } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:43:15.180

我写了一篇关于这个的博客文章，并提供了一个可能的解决方案。 [http://wimpool.nl/blog/DotNet/extending-entity-framework-4-with-parentvalidator](http://wimpool.nl/blog/DotNet/extending-entity-framework-4-with-parentvalidator)

简而言之：要使其正常工作，您必须删除服务列表中的所有服务

# c# - c#异步和等待有多贵

> ID：15986881
> 
> 赞同：6
> 
> 时间：2013-04-13T10:34:52.573
> 
> 标签：c#, webclient, async-await

最近正在尝试使用 c# 进行异步和等待。这是我的代码

```
private async void button1_Click( object sender, EventArgs e )
  {
    textBox1.Text = string.Empty;

    var client = new WebClient();

    var sw =  Stopwatch.StartNew();

    var downloadStringTask = client.DownloadStringTaskAsync("http://www.google.com");

    textBox1.Text += "Downloading string async "+sw.ElapsedMilliseconds;
    sw.Restart();

    await downloadStringTask;

    textBox1.Text += Environment.NewLine + "Downloaded "+sw.ElapsedMilliseconds;
    sw.Stop();
} 
```

这是我在 textbox1.text 中得到的输出

```
Downloading string async 5698
Downloaded 666 
```

这意味着只调用`DownloadStringTaskAsync()`正在`5.6 Seconds`执行的实际下载正在执行的地方`<1 second`。当使用此方法的原因是为了节省线程资源时。

如果这是真的，是否有任何实际情况应该使用 WebClient 类的这种方法？或者我只是在用完全不正确的术语思考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T12:05:13.817

我第一次得到大约 300 毫秒，之后每次都得到 0 毫秒。关于我的期望。当您第一次使用代码时，总会有大量开销。您至少要衡量将 System.Net 代码加载到程序中并进行初始化的成本。WebClient 似乎也有一些开销，例如，当它通过注册表查找 Web 代理时，我看到一个异常被捕获和处理。在异步完成某事之前需要完成的基本工作。

尽管如此，5.7 秒还是很长的时间。你应该看看环境的东西，你机器的其他部分，当你做一些互联网的事情时，你想参与其中。就像那个网络代理一样，它可能被设置为自动配置，这需要时间。或者就像您的反恶意软件或防火墙对您开始使用出站 IP 地址感到兴奋。等等，许多与网络相关的活动部件，它永远不会相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T12:06:22.427

您正在测量设置时间。在我的机器（和 Internet 连接）上，第一个调用产生：

```
Downloading string async 2636 // Varies wildly, can be up to 15s on some runs.
Downloaded 385 
```

虽然随后的调用始终如一地产生：

```
Downloading string async 0
Downloaded 289 // With small variations. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T17:10:43.573

正如其他人所说，您正在衡量一次性设置成本，但作为“多次运行”的替代方法，您可以“预热”特定的 Web 客户端。

例如，在这两行之间，添加一个（同步）下载*调用

```
var client = new WebClient();

var sw =  Stopwatch.StartNew(); 
```

也许是这样的：

```
var client = new WebClient();

// different site, to help avoid pre-filling any caches involved
client.DownloadData("http://www.microsoft.com/");

var sw =  Stopwatch.StartNew(); 
```

那么您的初始测量将不包括初始 Web 客户端设置，即使您的第一次运行也应该有准确的时间（并且应该更好地匹配多次执行相同的调用，假设每次 HTTP 200 结果，而不是从本地缓存或304)

# sql-server - NHibernate下的SQL Server死锁

> ID：15986889
> 
> 赞同：4
> 
> 时间：2013-04-13T10:35:58.560
> 
> 标签：sql-server, nhibernate, transactions, locking, isolation-level

我有一个多线程应用程序，它适用于大型数据库（文件大小 > 1 Gb，数据库有 38 个表，每个表超过 500 K 的实体）。它使用**Castle 3.1.0.0**、**NHibernate 3.3.1.4000**、**FluentNibernate 1.3.0.733**、**SQL Server 2012**。

NHibernate 配置如下：

```
config.SetProperty(Environment.CommandTimeout, "300");
config.SetProperty(Environment.BatchSize, "0"); 
config.SetProperty(Environment.GenerateStatistics, "true");
config.SetProperty(Environment.ReleaseConnections, "auto");
config.SetProperty(Environment.UseQueryCache, "true");
config.SetProperty(Environment.SqlExceptionConverter, typeof(MsSqlExceptionConverter).AssemblyQualifiedName);
//...
.MaxFetchDepth(1) 
```

我**每个线程使用一个会话**（Castle.Windsor）和**短事务**。每个数据库更新、保存、删除过程都被代码锁定：

```
public abstract class BaseEntityRepository<T, TId> : IBaseEntityRepository<T, TId> where T : BaseEntity<TId> {
    protected static readonly object Locker = new object();

    public bool Save(T item) {
        bool result = false;

        if ((item != null) && (item.IsTransient())) {
            lock (Locker) {
                using (ITransaction tr = Session.BeginTransaction()) {
                    try {                       
                        Session.Save(item);
                        if ((tr.IsActive) && (!tr.WasCommitted) && (!tr.WasRolledBack))
                            tr.Commit();  
                        result = true;
                    } catch {
                        if ((tr.IsActive) && (!tr.WasCommitted) && (!tr.WasRolledBack))
                            tr.Rollback();
                        Session.Clear();
                        throw;
                    }
                }
            }
        }
        return result;
    }

    //same for delete and update 

    public T Get(TId itemId) {
        T result = default(T);

        try {
            result = Session.Get<T>(itemId);
        } catch {
            throw;
        }
        return result;
    }

    public IList<T> Find(Expression<Func<T, bool>> predicate) {
        IList<T> result = new List<T>();
        try {
            result = Session.Query<T>().Where(predicate).ToList();
        } catch {
            throw;
        }
        return result;
    }
} 
```

在我将 3 个数据库（每个 300-400 Mb）合并到一个大数据库（如上图）之前，一切正常。我通过 Microsoft SQL Server Management Studio 导出/导入数据向导合并了数据库。合并后，我设置了主键，并为**Id**列设置了标识规范。在此之后，我收到了许多**SQL Server**错误（此错误未重现，它们不时出现）：

> 事务（进程 ID X）与另一个进程在锁资源上死锁，并已被选为死锁牺牲品。重新运行事务。

于是我看了[这篇文章](http://blogs.msdn.com/b/bartd/archive/2006/09/09/deadlock-troubleshooting_2c00_-part-1.aspx)，[这个](http://msdn.microsoft.com/en-us/library/ms178104.aspx)。我完成了所有步骤，发现两个线程在同一个关联对象 ID 上执行相同的页面锁定。我什至不明白它是怎么回事，因为我以编程方式锁定了每个实体更新，所以它甚至不可能是这样的问题。这就是我将数据库更改为快照隔离的原因：

> ALTER DATABASE MY_DB SET ALLOW_SNAPSHOT_ISOLATION ON
> 
> ALTER DATABASE MY_DB SET READ_COMMITTED_SNAPSHOT ON

我还将 NHibernate **IsolationLevel**从**ReadCommitted**更改为**Snapshot**以解决此问题。在此之后我得到了这个错误：

> 无法执行命令：UPDATE [ **Foo** ] SET Field1 = @p0, Field2= @p1 WHERE Id = @p2
> System.Data.SqlClient.SqlException (0x80131904)：快照隔离事务由于更新冲突而中止。您不能使用快照隔离来访问表 'dbo. **Bar** ' 直接或间接在数据库 'My_DB' 中更新、删除或插入已被另一个事务修改或删除的行。重试事务或更改更新/删除语句的隔离级别。

```
in System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
in System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
in System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
in System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
in System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
in System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
in System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe)
in System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
in NHibernate.AdoNet.AbstractBatcher.ExecuteNonQuery(IDbCommand cmd) 
```

> 无法将数据库状态与会话 NHibernate.StaleObjectStateException 同步：行已被另一个事务更新或删除（或未保存的值映射不正确）：[ **Foo#544353** ]

```
in NHibernate.Persister.Entity.AbstractEntityPersister.Update(Object id, Object[] fields, Object[] oldFields, Object rowId, Boolean[] includeProperty, Int32 j, Object oldVersion, Object obj, SqlCommandInfo sql, ISessionImplementor session)
in NHibernate.Persister.Entity.AbstractEntityPersister.UpdateOrInsert(Object id, Object[] fields, Object[] oldFields, Object rowId, Boolean[] includeProperty, Int32 j, Object oldVersion, Object obj, SqlCommandInfo sql, ISessionImplementor session)
in NHibernate.Persister.Entity.AbstractEntityPersister.Update(Object id, Object[] fields, Int32[] dirtyFields, Boolean hasDirtyCollection, Object[] oldFields, Object oldVersion, Object obj, Object rowId, ISessionImplementor session)
in NHibernate.Action.EntityUpdateAction.Execute()
in NHibernate.Engine.ActionQueue.Execute(IExecutable executable)
in NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
in NHibernate.Engine.ActionQueue.ExecuteActions()
in NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session) 
```

> NHibernate.TransactionException：事务未连接，或已断开连接

```
in NHibernate.Transaction.AdoTransaction.CheckNotZombied()
in NHibernate.Transaction.AdoTransaction.Rollback()
in My.DBLayer.Data.Repositories.BaseEntityRepository`2.Update(T item) 
```

我没有DB 实体的**Version**属性，并且我的代码中没有 OptimisticLock.Version() 行，所以我隐式使用 PessimisticLock。我可以添加**Version**和**OptimisticLock**，但不要认为这会解决问题。

我试着做简单的测试：

```
Thread t1 = new Thread(m1);
Thread t2 = new Thread(m2);
t1.Start();
t2.Start();

private static void m1() {
    FooRepository rep1 = BootstrapContainer.Instance.Resolve<FooRepository>();
    Foo foo1 = rep1.Get(1);
    foo1.Field1 = "bbbb";
    Thread.Sleep(60*1000);
    rep1.Update(foo1);
}

private static void m2() {
    FooRepository rep2 = BootstrapContainer.Instance.Resolve<FooRepository>();
    Thread.Sleep(5*1000);
    Foo foo2 = rep2.Get(1);
    foo2.Field2 = "aaaaa";
    Thread.Sleep(5*1000);
    rep2.Update(foo2);
} 
```

一切正常，没有任何错误。

为什么我有所有这些错误（我没有更改代码，只是将数据库合并为一个，并且在合并之前一切正常）？为什么即使我使用锁定来防止同时更新不同线程中的实体也会出现此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-08T16:19:27.473

您可以从查询并行化中获得死锁......也就是说，当单个查询将工作拆分为多个并行操作时，它可能会因自身而死锁。我曾多次遇到过这种情况。如果您使用的是 hql，您可以将 OPTION(MAXDOP 1) 添加到您的查询/语句中，以查看是否可以解决问题。

或者，您可以将整个服务器设置为 MAXDOP 1... 这意味着您永远不会获得并行性 ( [https://msdn.microsoft.com/en-us/library/ms189094.aspx](https://msdn.microsoft.com/en-us/library/ms189094.aspx) )。如果不对工作负载进行深入分析，我不建议这样做，但它可以帮助您了解并行性是否是死锁的根源。

# firefox - 水晶报告显示空白，除非单击缩放或页面或刷新仅 firefox

> ID：15986893
> 
> 赞同：1
> 
> 时间：2013-04-13T10:36:46.250
> 
> 标签：firefox, crystal-reports

我有一个运行良好的水晶报告，直到我在 Firefox 中对其进行了测试。它在第一次加载时显示数据/报告，但是当我单击报告过滤器的“开始”按钮时，它会显示空白报告，除非我单击这些按钮中的任何一个 - 放大、缩小、页面/浏览器刷新并输入页码。这只发生在 Firefox 中。Chrome 和 IE 加载它就好了。顺便说一句，我正在使用 site.master 页面。

我尝试了什么：

*   隐藏的报告标题
*   取消选中报告中的“新页面”复选框
*   确保在调试中报告源中有项目。它有特别的。单击刷新时，它会再次显示报告。另外，我将空白报告导出到excel，它确实有数据

可能是什么原因造成的？有什么建议吗？

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="ContentPlaceHolder1">
<asp:Panel ScrollBars="Auto" runat="server">
<asp:UpdatePanel ID="updatePnl" runat="server" UpdateMode="Always" ChildrenAsTriggers="true" >
    <ContentTemplate>
          <asp:ValidationSummary ID="ValidationSummary1" runat="server" ValidationGroup="all" />
          <table border="0" cellspacing="0" cellpadding="0">
                <tr align="left" valign="middle">
                    <td class="font_01">
                        From Date:&nbsp;
                    </td>
                    <td>
                        <asp:CustomValidator ID="cvCalFrom" runat="server" ValidationGroup="all" >*</asp:CustomValidator>
                        <uc3:Calendar ID="calFrom" DateString="" runat="server" />

                    </td>
                    <td>
                        &nbsp;&nbsp;
                    </td>
                    <td class="font_01">
                        ToDate:&nbsp;
                    </td>
                    <td>
                        <asp:CustomValidator ID="cvCalTo" runat="server" ValidationGroup="all">*</asp:CustomValidator>
                        <uc3:Calendar ID="calTo" DateString="" runat="server" />

                    </td>
                    <td>

                    </td>
                    <td>

                    </td>
                </tr>
                <tr align="left" valign="middle">
                    <td class="font_01">
                        Unique Code:&nbsp;
                    </td>
                    <td>
                        <asp:TextBox runat="server" ID="txtCode"/>
                    </td>
                    <td>
                        &nbsp;&nbsp;
                    </td>
                    <td class="font_01">
                        File Name:&nbsp;
                    </td>
                    <td >
                       <asp:TextBox runat="server" ID="txtFileName"/>
                    </td>
                    <td>
                        <asp:Button ID="Button1" runat="server" CssClass="font_01" Text="Go" Width="50px"
                            Height="20px" onclick="btnSearch_Click" />
                    </td>
                    <td>
                       <!-- <asp:Button ID="Button2" runat="server" CssClass="font_01" Text="List All" Width="50px"
                            Height="20px" onclick="btnListAll_Click"  />-->
                    </td>
                </tr>
                <tr valign="middle">
                    <td></td>
                    <td colspan="5" >

                  </td>
                    <td></td>
                </tr>
            </table>
            <table>
                <tr>
                <td>
                     <CR:CrystalReportViewer  Width="500px" Height="400px" ID="CrystalReportViewer1" runat="server" AutoDataBind="true" />
                </td>
                </tr>
            </table>
    </ContentTemplate>
</asp:UpdatePanel>
</asp:Panel> 
```

```
 public void loadReport()//(bool loadAll)
    {

         from = calFrom.DatePicked;
         to = calTo.DatePicked;
         uniqueCode = txtCode.Text;//Convert.ToString(Session["uniqueCode"]);
         fileName = txtFileName.Text;//Convert.ToString(Session["fileName"]);

      AirDataAccess ada = new AirDataAccess();
      List<AirData> alist=null;

      alist = ada.GetAllRawLogByFields(from, to, uniqueCode, fileName);

            ReportUrl = @"~\Reports\RawLogData.rpt";
            reportDocument.Load(Server.MapPath(ReportUrl));

           // reportDocument.SetDatabaseLogon(ConfigurationManager.ConnectionStrings.["MACCUserID"], ConfigurationManager.AppSettings["MACCPwd"]);
            reportDocument.SetDataSource(alist);

            CrystalReportViewer1.DataBind();
            CrystalReportViewer1.Visible = true;
            CrystalReportViewer1.ReportSource = reportDocument;

            CrystalReportViewer1.RefreshReport();

    }

    protected void Page_UnLoad(object sender, EventArgs e)
    {
        try
        {
            if (reportDocument != null)
            {
                reportDocument.Close();
                reportDocument.Dispose();
                reportDocument = null;
                //Session["reportUrl"] = null;
            }
        }
        catch (Exception ex)
        {//handle error here
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:18:52.623

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="ContentPlaceHolder1">
<asp:Panel ScrollBars="Auto" runat="server">

          <asp:ValidationSummary ID="ValidationSummary1" runat="server" ValidationGroup="all" />
          <table border="0" cellspacing="0" cellpadding="0">
                <tr align="left" valign="middle">
                    <td class="font_01">
                        From Date:&nbsp;
                    </td>
                    <td>
                        <asp:CustomValidator ID="cvCalFrom" runat="server" ValidationGroup="all" >*</asp:CustomValidator>
                        <uc3:Calendar ID="calFrom" DateString="" runat="server" />

                    </td>
                    <td>
                        &nbsp;&nbsp;
                    </td>
                    <td class="font_01">
                        ToDate:&nbsp;
                    </td>
                    <td>
                        <asp:CustomValidator ID="cvCalTo" runat="server" ValidationGroup="all">*</asp:CustomValidator>
                        <uc3:Calendar ID="calTo" DateString="" runat="server" />

                    </td>
                    <td>

                    </td>
                    <td>

                    </td>
                </tr>
                <tr align="left" valign="middle">
                    <td class="font_01">
                        Unique Code:&nbsp;
                    </td>
                    <td>
                        <asp:TextBox runat="server" ID="txtCode"/>
                    </td>
                    <td>
                        &nbsp;&nbsp;
                    </td>
                    <td class="font_01">
                        File Name:&nbsp;
                    </td>
                    <td >
                       <asp:TextBox runat="server" ID="txtFileName"/>
                    </td>
                    <td>
                        <asp:Button ID="Button1" runat="server" CssClass="font_01" Text="Go" Width="50px"
                            Height="20px" onclick="btnSearch_Click" />
                    </td>
                    <td>
                       <!-- <asp:Button ID="Button2" runat="server" CssClass="font_01" Text="List All" Width="50px"
                            Height="20px" onclick="btnListAll_Click"  />-->
                    </td>
                </tr>
                <tr valign="middle">
                    <td></td>
                    <td colspan="5" >

                  </td>
                    <td></td>
                </tr>
            </table>
</asp:Panel>

<asp:UpdatePanel ID="updatePnl" runat="server"  >
    <ContentTemplate>
                     <CR:CrystalReportViewer  Width="500px" Height="400px" ID="CrystalReportViewer1" runat="server" AutoDataBind="true" />

    </ContentTemplate>
</asp:UpdatePanel> 
```

像这样进行更改并删除卸载代码........

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:58:19.063

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="InventoryDocumentReportParameterCry.aspx.cs" Inherits="TexERP.ReportCrystal.InventoryDocumentReportParameterCry" %>
<%@ Register Assembly="CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"
    Namespace="CrystalDecisions.Web" TagPrefix="CR" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <telerik:RadScriptManager ID="RadScriptManager1" runat="server" />
    <telerik:RadFormDecorator ID="RadFormDecorator1" runat="server" />

            <asp:Panel ID="pnlAddRecord" runat="server" BackColor="White" Height="200px" Width="700px"
                Visible="true">
                <table width="100%" style="border: Solid 3px #005f9c; width: 100%; height: 100%;"
                    cellpadding="0" cellspacing="1">
                    <tr style="background-color: #005f9c">
                        <td colspan="4" style="height: 8%; color: White; font-weight: bold; font-size: larger"
                            align="center">
                            <asp:Label ID="lblReportHeading" runat="server" Text=""></asp:Label>
                        </td>
                    </tr>

                    <tr>
                        <td align="left" style="text-align: right">
                            <asp:Label ID="lblFrmDoc" runat="server" Text="From Document No:"></asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="txtFromDocumentNo" runat="server"></asp:TextBox>
                            <asp:RequiredFieldValidator runat="server" ID="rfvFromDocumentNo" Display="None"
                                ControlToValidate="txtFromDocumentNo" InitialValue="" ValidationGroup="FinalSave"
                                ErrorMessage="From Document No is Mandatory" ForeColor="Red"></asp:RequiredFieldValidator>
                            <ajaxToolkit:ValidatorCalloutExtender ID="vceFromDocumentNo" TargetControlID="rfvFromDocumentNo"
                                runat="server">
                            </ajaxToolkit:ValidatorCalloutExtender>
                        </td>
                        <td align="left">
                            <asp:Label ID="lblToDoc" runat="server" Text="To Document No:"></asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="txtToDocumentNo" runat="server"></asp:TextBox>
                            <asp:RequiredFieldValidator runat="server" ID="rfvToDocumentNo" Display="None" ControlToValidate="txtToDocumentNo"
                                InitialValue="" ValidationGroup="FinalSave" ErrorMessage="To Document No is Mandatory"
                                ForeColor="Red"></asp:RequiredFieldValidator>
                            <ajaxToolkit:ValidatorCalloutExtender ID="vceToDocumentNo" TargetControlID="rfvToDocumentNo"
                                runat="server">
                            </ajaxToolkit:ValidatorCalloutExtender>
                        </td>
                    </tr>
                    <tr>
                        <td align="right" colspan="4">
                            <asp:Button ID="btnSubmit" runat="server" Text="Show Report" OnClick="btnSubmit_Click"
                                ValidationGroup="FinalSave" />
                            <asp:Button ID="btnCancel" runat="server" Text="Reset" UseSubmitBehavior="false"
                                OnClick="btnCancel_Click" />
                        </td>
                    </tr>
                </table>
            </asp:Panel>
    <asp:UpdatePanel ID="updpnlReport" runat="server">
        <ContentTemplate>
             <CR:CrystalReportViewer ID="crvInventoryDocumentParameter" runat="server" 
                AutoDataBind="true" EnableParameterPrompt="false"
                EnableDatabaseLogonPrompt="False" ReuseParameterValuesOnRefresh="true"   HasToggleParameterPanelButton = "false" HasCrystalLogo ="False"
                 />
        </ContentTemplate>
    </asp:UpdatePanel>
</asp:Content> 
```

使用此代码作为参考这是我的代码

# python - 为什么我的 python 读取会产生这么多新行？

> ID：15986897
> 
> 赞同：1
> 
> 时间：2013-04-13T10:37:12.640
> 
> 标签：python

我想做以下事情，我想逐行读取一个txt文件，然后将输入打印到控制台，所以我有以下内容`input.txt`：

```
1
2
3 
```

python代码如下所示：

```
file = open("input.txt")

for line in file:
    print line 
```

为什么我得到如下输出：

```
1

2

3 
```

并不是：

```
1
2
3 
```

如何避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T10:38:08.327

```
for line in file:
    print line 
```

`print`打印一些文本，然后在其后打印一个`'\n'`新行。您可以使用尾随逗号来停止此操作：

```
for line in file:
    print line, 
```

或者只是`.rstrip()`它：

```
for line in file:
    print line.rstrip('\n') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T11:36:09.957

`print`Python3 中的函数可让您抑制行尾。`__future__`在 Python2.6+ 中，您可以从模块中导入打印功能

```
from __future__ import print_function # required for Python2
file = open("input.txt")

for line in file:
    print(line, end="") 
```

# ios - 分组uitableview单元格下的阴影

> ID：15986901
> 
> 赞同：2
> 
> 时间：2013-04-13T10:37:26.393
> 
> 标签：ios, objective-c, uitableview

我`UITableView`有

*   样式 -> 分组
*   分隔符 -> 信号线蚀刻清晰的颜色

截屏

![在此处输入图像描述](https://i.stack.imgur.com/I1z9r.png)

没关系，但我想改变单元格下“阴影”的颜色。我想我已经尝试了所有的背景颜色、色调、阴影颜色等，但什么都没有……有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:05:04.880

好的，我找到了解决方案。我已将分隔符样式更改为无并为每个单元格的图层添加阴影

```
cell.layer.shadowColor = [[UIColor redColor] CGColor];
cell.layer.shadowOpacity = 1.0;
cell.layer.shadowRadius = 0;
cell.layer.shadowOffset = CGSizeMake(0.0, 1.0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:10:25.150

您可以将`UITableViewCell`您正在使用的子类化并以任何您想要的方式对其进行自定义。然后，当您实现您的`tableView:cellForRowAtIndexPath:`方法时，您只需将单元格设置为您的自定义单元格之一，如下所示：

```
static NSString *CellIdentifier = @"ExampleCell";
MyCustomTableViewCell *cell = (MyCustomTableViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
  cell = [[MyCustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
 }
return cell; 
```

然后是自定义文件中单元格的示例`MyCustomTableViewCell.m`：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    if ((self = [super initWithStyle:style reuseIdentifier:reuseIdentifier])) {

    self.clipsToBounds = YES;

    UIView* bgView = [[UIView alloc] init];
    bgView.backgroundColor = [UIColor colorWithWhite:0.f alpha:0.25f];
    self.selectedBackgroundView = bgView;

    self.textLabel.font = [UIFont boldSystemFontOfSize:[UIFont systemFontSize]];
    self.textLabel.shadowOffset = CGSizeMake(0, 2);
    self.textLabel.shadowColor = [UIColor colorWithWhite:0 alpha:0.25];

    UIView *topLine = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 1)];
    topLine.backgroundColor = [UIColor colorWithWhite:0.5 alpha:0.25];
    [self.textLabel.superview addSubview:topLine];

    UIView *bottomLine = [[UIView alloc] initWithFrame:CGRectMake(0, 43, 200, 1)];
    bottomLine.backgroundColor = [UIColor colorWithWhite:0 alpha:0.25];
    [self.textLabel.superview addSubview:bottomLine];

  }
  return self;
} 
```

这使您看起来像：![这个](https://i.stack.imgur.com/v7Xl3.png). 抱歉图片太窄了，但我没有时间重做整个事情来获得一个宽单元格。

# javascript - 获取所有属性属性

> ID：15986902
> 
> 赞同：1
> 
> 时间：2013-04-13T10:37:43.567
> 
> 标签：javascript, jquery, properties, attributes

我想通过 Jquery 事件获取所有属性属性。我知道我可以通过执行以下操作来检索元素的信息：

```
$(this).attr('id'); 
```

所以如果我想包括这个类，我会做这样的事情：

```
$(this).attr('id');
$(this).attr('class'); 
```

但是我想尽可能地缩短/简化代码，所以我想知道是否可以在不先指定它们的情况下一次获取所有属性属性。有没有办法做到这一点？也许是插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:02:47.333

这是一个例子：

```
<div id="test" class="test" type="test"/>

// select the test element and bind the handler
$('#test').click(function(){
    // loop over it's attributes on click
    for(var i = 0;i < this.attributes.length;i++){
        console.log(this.attributes[i]);
    }
}); 
```

演示：http: [//jsfiddle.net/louisbros/75w7y/](http://jsfiddle.net/louisbros/75w7y/)

# java - 如何将适用于 Java 的 Google Drive 客户端库与我自己开发的用于 Web 应用程序的 OAUTH 2 框架一起使用？

> ID：15986911
> 
> 赞同：2
> 
> 时间：2013-04-13T10:38:39.970
> 
> 标签：java, oauth-2.0, google-drive-api, google-oauth

我的 Web 应用程序已经使用 REST 和/或 signpost-oauth 库成功地通过 Facebook、LinkedIn、Google 等进行了 OAUTh 身份验证。

因此，一旦我已经使用我的网络应用程序从 GoogleAPIs 服务器获得了 ACCES_TOKEN，我想使用 Google Drive Client 来访问文件等。

这是 google Drive 示例，但它依赖于使用 Google 授权代码流（我不能很好地理解它与我的 Java EE Web 应用程序一起使用）

```
 // authorization
 Credential credential = authorize();
 // set up the global Drive instance
 drive = new Drive.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
     .setApplicationName(APPLICATION_NAME).build(); 
```

如何更改它以使用 ACCESS_TOKEN 和我已经通过我的 Web 应用程序的 OAUTH 框架获得的其他凭据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T13:08:04.483

如果您已经拥有访问令牌，则可以简单地执行以下操作：

```
Credential credential = new GoogleCredential().setAccessToken(yourAccessToken); 
```

如果您有一个访问令牌和一个刷新令牌，这会**更好**，因为您可以从客户端库获得自动令牌刷新，您应该这样做：

```
Credential credential = new GoogleCredential.Builder()
    .setClientSecrets(CLIENT_ID, CLIENT_SECRET)
    .setJsonFactory(JSON_FACTORY)
    .setTransport(HTTP_TRANSPORT)
    .build()
    .setAccessToken(yourAccessToken)
    .setRefreshToken(yourRefreshToken); 
```

另请查看[GoogleCredential Javadoc](http://javadoc.google-api-java-client.googlecode.com/hg/1.8.0-beta/com/google/api/client/googleapis/auth/oauth2/GoogleCredential.html)以获取更多示例。

# three.js - Three.js中动态文本几何的ttf转换器解决方案

> ID：15986914
> 
> 赞同：4
> 
> 时间：2013-04-13T10:38:58.117
> 
> 标签：three.js, typeface.js

我想在给定 ttf 字体文件的情况下生成动态文本几何图形，并从 Three.js [wiki](https://github.com/mrdoob/three.js/wiki/Text-in-Three.js)中读到，这样做的唯一程序方法是嵌入 Typeface.js 转换的字体文件。

不幸的是，我在任何地方都找不到在线 ttf-> 字体转换器。确实，字体库网站已经宕机很久了，恐怕再也不会上线了。

wiki 上公开的搅拌机导出器解决方案似乎也不符合我的需求，首先因为我是搅拌机新手，但主要是因为它似乎只适用于静态文本。我需要一个动态的解决方案，我需要文本几何而不是纹理，因为我想在沿着曲线绘制文本时使文本变形，带有挤压和斜面。

有没有其他方法可以做我想做的事情，或者我是否坚持使用threejs lib提供的基本字体文件（并且只有我的眼睛哭泣）？

非常感谢

# objective-c - 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序 - 无法识别的选择器

> ID：15986921
> 
> 赞同：0
> 
> 时间：2013-04-13T10:39:21.400
> 
> 标签：objective-c, unrecognized-selector

***我正在尝试制作一个简单的笔记应用程序。当我运行项目时，在调试区域中，它说***；

```
[1752:19d03] -[TableViewController createEditableCopyOfDatabasteIfNeeded]: unrecognized selector sent to instance 0xa147d20

[1752:19d03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[TableViewController createEditableCopyOfDatabasteIfNeeded]: unrecognized selector sent to instance 0xa147d20' 
```

**而我的代码，包括*createEditableCopyOfDatabasteIfNeeded*，是**；

```
- (void)createEditableCopyOfDatabaseIfNeeded {

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *documentDirectory = [self applicationDocumentsDirectory];
    NSString *writableDBPath = [documentDirectory stringByAppendingPathComponent:@"NotesList.plist"];

    BOOL dbexits = [fileManager fileExistsAtPath:writableDBPath];
    if (!dbexits) {

        NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"NotesList.plist"];

        NSError *error;
        BOOL success = [fileManager copyItemAtPath:defaultDBPath toPath:writableDBPath error:&error];
        if (!success) {
            NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
        }
    }
} 
```

**这里的问题在哪里？** ***这可能很容易，但我是 Xcode 的新手。*** *感谢帮助*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T11:57:57.473

我建议你在 Xcode 中也为所有异常添加一个断点。

![在此处输入图像描述](https://i.stack.imgur.com/QWaw7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:41:34.703

Since you've defined the function as -(void) you should call it through an instance of `TableViewController` and not in the "static" way `[TableViewController createEditableCopyOfDatabasteIfNeeded]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T10:49:09.010

听起来您正在调用`createEditableCopyOfDatabaseIfNeeded`未在 class 中定义的方法`TableViewController`。您可以进入断点选项卡并添加新断点（加号按钮），然后选择一个 checkamrk 以保留所有异常或类似的东西。这应该可以帮助您跟踪应用程序崩溃的位置。

什么类在实现`createEditableCopyOfDatabaseIfNeeded`方法？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T10:56:33.093

该错误确实为您提供了在这种情况下所需的所有信息。您已经定义了函数，但它不在 TableViewController 类中。您应该编辑您的代码以在它确实存在的类中调用它。

# delphi - delphi应用程序中的未知异常

> ID：15986925
> 
> 赞同：0
> 
> 时间：2013-04-13T10:40:03.633
> 
> 标签：delphi, firemonkey, delphi-xe3

我编写了一个在我的系统上运行良好的应用程序，但从昨天开始我意识到它不适用于其他计算机。

这是用户系统中发生的错误：

```
EReadError error 
Error reading
bmpAnimation.AnimationBitmap.PNG: Access violation at address 009BBCAC in
module 'Autorun.exe'. Read of address 000000000 
```

我使用 madExcept，这是它的错误报告：

```
date/time         : 2013-04-13, 13:54:14, 962ms
computer name     : ----
user name         : ---
registered owner  : ----
operating system  : Windows 8 x64 build 9200
system language   : Persian
system up time    : 5 days 5 hours
program up time   : 291 milliseconds
processors        : 8x Intel(R) Core(TM) CPU Q 720 @ 1.60GHz
physical memory   : 2182/4025 MB (free/total)
free disk space   : (C:) 3/94 GB
display mode      : 1600x900, 32 bit
process id        : $1570
allocated memory  : 36/76 MB
executable        : Autorun.exe
exec. date/time   : 2013-04-13 13:50
version           : 1.0.0.0
compiled with     : Delphi XE3
madExcept version : 4.0.6
contact name      : 123
contact email     : m@gmail.com
callstack crc     : $8d28e808, $2a067771, $1d4b8f98
exception number  : 1
exception class   : EReadError
exception message : Error reading bmpAnimation.AnimationBitmap.PNG: Access violation at address 009BBCAC in module 'Autorun.exe'. Read of address 00000000.

main thread ($914):
004e0eef +0a7 Autorun.exe  System.Classes   10436  +5 HandleException
004e1129 +1f5 Autorun.exe  System.Classes   10493 +48 TReader.ReadProperty
004e09a5 +015 Autorun.exe  System.Classes   10239  +1 TReader.ReadDataInner
004e0987 +067 Autorun.exe  System.Classes   10232 +11 TReader.ReadData
004ec489 +001 Autorun.exe  System.Classes   15824  +0 TComponent.ReadState
004e07ff +11f Autorun.exe  System.Classes   10193 +23 TReader.ReadComponent
004e0a19 +089 Autorun.exe  System.Classes   10247  +9 TReader.ReadDataInner
004e0958 +038 Autorun.exe  System.Classes   10226  +5 TReader.ReadData
004ec489 +001 Autorun.exe  System.Classes   15824  +0 TComponent.ReadState
004e18ab +1d7 Autorun.exe  System.Classes   10673 +37 TReader.ReadRootComponent
004dba0a +032 Autorun.exe  System.Classes    8267  +3 TStream.ReadComponent
004d1507 +057 Autorun.exe  System.Classes    3820  +7 InternalReadComponentRes
004d2ce7 +05f Autorun.exe  System.Classes    3877  +4 InitComponent
004d2d75 +061 Autorun.exe  System.Classes    3889  +6 InitInheritedComponent
00a6351f +0bb Autorun.exe  FMX.Forms         2110  +9 TCommonCustomForm.Create
00a68e8e +016 Autorun.exe  FMX.Forms         3882  +1 TCustomForm.Create
00a5db47 +057 Autorun.exe  FMX.Forms          939  +6 TApplication.CreateForm
00a5dd0b +05f Autorun.exe  FMX.Forms          984  +9 TApplication.RealCreateForms
009d3d7d +011 Autorun.exe  FMX.Platform.Win   461  +1 TPlatformWin.Run
00a62035 +0d1 Autorun.exe  FMX.Forms         1473 +12 TApplication.Run
00b71d6b +03b Autorun.exe  Autorun             19  +3 initialization
77518541 +00c KERNEL32.DLL                            BaseThreadInitThunk

main thread ($914), inner exception level 1:
>> EAccessViolation, Access violation at address 009BBCAC in module 'Autorun.exe'. Read of address 00000000
009bbcac +114 Autorun.exe  FMX.Canvas.D2D    1589 +33 TCanvasD2D.DoMapBitmap
00a317f9 +025 Autorun.exe  FMX.Types         8576  +2 TCanvas.MapBitmap
00a2c1f2 +016 Autorun.exe  FMX.Types         6735  +1 TBitmap.Map
009b81a3 +157 Autorun.exe  FMX.Canvas.D2D     386 +20 TBitmapCodecWIC.LoadFromStream
00408629 +01d Autorun.exe  System           16279  +2 @AfterConstruction
00a2a808 +094 Autorun.exe  FMX.Types         6163  +8 TBitmapCodecManager.LoadFromStream
00a2c310 +0bc Autorun.exe  FMX.Types         6779 +17 TBitmap.LoadFromStream
00a2b64c +000 Autorun.exe  FMX.Types         6524  +0 TBitmap.ReadBitmap
004df412 +0fe Autorun.exe  System.Classes    9487 +16 TReader.DefineBinaryProperty
00a2b62f +02f Autorun.exe  FMX.Types         6519  +2 TBitmap.DefineProperties
004e10e3 +1af Autorun.exe  System.Classes   10487 +42 TReader.ReadProperty
004e09a5 +015 Autorun.exe  System.Classes   10239  +1 TReader.ReadDataInner
004e0987 +067 Autorun.exe  System.Classes   10232 +11 TReader.ReadData
004ec489 +001 Autorun.exe  System.Classes   15824  +0 TComponent.ReadState
004e07ff +11f Autorun.exe  System.Classes   10193 +23 TReader.ReadComponent
004e0a19 +089 Autorun.exe  System.Classes   10247  +9 TReader.ReadDataInner
004e0958 +038 Autorun.exe  System.Classes   10226  +5 TReader.ReadData
004ec489 +001 Autorun.exe  System.Classes   15824  +0 TComponent.ReadState
004e18ab +1d7 Autorun.exe  System.Classes   10673 +37 TReader.ReadRootComponent
004dba0a +032 Autorun.exe  System.Classes    8267  +3 TStream.ReadComponent
004d1507 +057 Autorun.exe  System.Classes    3820  +7 InternalReadComponentRes
004d2ce7 +05f Autorun.exe  System.Classes    3877  +4 InitComponent
004d2d75 +061 Autorun.exe  System.Classes    3889  +6 InitInheritedComponent
00a6351f +0bb Autorun.exe  FMX.Forms         2110  +9 TCommonCustomForm.Create
00a68e8e +016 Autorun.exe  FMX.Forms         3882  +1 TCustomForm.Create
00a5db47 +057 Autorun.exe  FMX.Forms          939  +6 TApplication.CreateForm
00a5dd0b +05f Autorun.exe  FMX.Forms          984  +9 TApplication.RealCreateForms
009d3d7d +011 Autorun.exe  FMX.Platform.Win   461  +1 TPlatformWin.Run
00a62035 +0d1 Autorun.exe  FMX.Forms         1473 +12 TApplication.Run
00b71d6b +03b Autorun.exe  Autorun             19  +3 initialization
77518541 +00c KERNEL32.DLL                            BaseThreadInitThunk

thread $9e4:
7683c74c +00 KERNELBASE.dll  WaitForMultipleObjectsEx
76da9773 +34 USER32.dll      MsgWaitForMultipleObjectsEx
76da992b +1a USER32.dll      MsgWaitForMultipleObjects
77518541 +0c KERNEL32.DLL    BaseThreadInitThunk

thread $1804:
77518541 +c KERNEL32.DLL  BaseThreadInitThunk

thread $1d2c: <priority:1>
76831123 +66 KERNELBASE.dll  WaitForSingleObjectEx
768310af +0d KERNELBASE.dll  WaitForSingleObject
77518541 +0c KERNEL32.DLL    BaseThreadInitThunk

thread $eec:
77518541 +c KERNEL32.DLL  BaseThreadInitThunk

thread $1c18:
77518541 +c KERNEL32.DLL  BaseThreadInitThunk

modules:
00400000 Autorun.exe          1.0.0.0             C:\Temp\Debug
67200000 nvwgf2um.dll         9.18.13.1106        C:\Windows\SYSTEM32
69740000 d2d1.dll             6.2.9200.16420      C:\Windows\SYSTEM32
6b7e0000 DWRITE.DLL           6.2.9200.16433      C:\Windows\SYSTEM32
6be00000 d3d11.dll            6.2.9200.16420      C:\Windows\SYSTEM32
6bfb0000 dxgi.dll             6.2.9200.16420      C:\Windows\SYSTEM32
6c010000 d3d10_1core.dll      6.2.9200.16384      C:\Windows\SYSTEM32
6c050000 d3d10_1.dll          6.2.9200.16384      C:\Windows\SYSTEM32
6c080000 FaultRep.dll         6.2.9200.16384      C:\Windows\SYSTEM32
6cd60000 AcLayers.DLL         6.2.9200.16420      C:\Windows\AppPatch
6d020000 gdiplus.dll          6.2.9200.16518      C:\Windows\WinSxS\x86_microsoft.windows.gdiplus_6595b64144ccf1df_1.1.9200.16518_none_ba1cf6b7e09f1918
6d3a0000 windowscodecs.dll    6.2.9200.16420      C:\Windows\system32
71a50000 SHCORE.DLL           6.2.9200.16433      C:\Windows\SYSTEM32
71b00000 WINMMBASE.dll        6.2.9200.16384      C:\Windows\SYSTEM32
71d80000 dwmapi.dll           6.2.9200.16384      C:\Windows\SYSTEM32
71da0000 MPR.dll              6.2.9200.16384      C:\Windows\SYSTEM32
71ec0000 winmm.dll            6.2.9200.16384      C:\Windows\SYSTEM32
71ff0000 apphelp.dll          6.2.9200.16420      C:\Windows\system32
724a0000 d3d9.dll             6.2.9200.16384      C:\Windows\SYSTEM32
73480000 sfc_os.DLL           6.2.9200.16384      C:\Windows\SYSTEM32
73490000 sfc.dll              6.2.9200.16384      C:\Windows\SYSTEM32
73f70000 wsock32.dll          6.2.9200.16384      C:\Windows\SYSTEM32
741e0000 WINSTA.dll           6.2.9200.16384      C:\Windows\SYSTEM32
74220000 propsys.dll          7.0.9200.16420      C:\Windows\system32
74840000 uxtheme.dll          6.2.9200.16519      C:\Windows\system32
74910000 comctl32.dll         6.10.9200.16384     C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.9200.16384_none_893961408605e985
74b10000 wtsapi32.dll         6.2.9200.16384      C:\Windows\SYSTEM32
74cc0000 WINSPOOL.DRV         6.2.9200.16384      C:\Windows\SYSTEM32
74d20000 version.dll          6.2.9200.16384      C:\Windows\SYSTEM32
74d30000 bcryptPrimitives.dll 6.2.9200.16384      C:\Windows\SYSTEM32
74d90000 CRYPTBASE.dll        6.2.9200.16384      C:\Windows\SYSTEM32
74da0000 SspiCli.dll          6.2.9200.16420      C:\Windows\SYSTEM32
74dc0000 SHELL32.dll          6.2.9200.16496      C:\Windows\SYSTEM32
75e90000 OLEAUT32.dll         6.2.9200.16384      C:\Windows\SYSTEM32
75f20000 combase.dll          6.2.9200.16420      C:\Windows\SYSTEM32
76060000 MSCTF.dll            6.2.9200.16496      C:\Windows\SYSTEM32
76150000 CFGMGR32.dll         6.2.9200.16384      C:\Windows\SYSTEM32
761a0000 GDI32.dll            6.2.9200.16433      C:\Windows\SYSTEM32
762c0000 ole32.dll            6.2.9200.16451      C:\Windows\SYSTEM32
765f0000 DEVOBJ.dll           6.2.9200.16384      C:\Windows\SYSTEM32
767b0000 clbcatq.dll          2001.12.10130.16384 C:\Windows\SYSTEM32
76830000 KERNELBASE.dll       6.2.9200.16451      C:\Windows\SYSTEM32
768e0000 SETUPAPI.dll         6.2.9200.16496      C:\Windows\SYSTEM32
76a90000 msvcrt.dll           7.0.9200.16384      C:\Windows\SYSTEM32
76cf0000 advapi32.dll         6.2.9200.16384      C:\Windows\SYSTEM32
76da0000 USER32.dll           6.2.9200.16420      C:\Windows\SYSTEM32
76ec0000 sechost.dll          6.2.9200.16384      C:\Windows\SYSTEM32
76f00000 RPCRT4.dll           6.2.9200.16384      C:\Windows\SYSTEM32
76fb0000 IMM32.DLL            6.2.9200.16384      C:\Windows\system32
77050000 NSI.dll              6.2.9200.16384      C:\Windows\SYSTEM32
774b0000 SHLWAPI.dll          6.2.9200.16384      C:\Windows\SYSTEM32
774f0000 KERNEL32.DLL         6.2.9200.16384      C:\Windows\SYSTEM32
77620000 WS2_32.dll           6.2.9200.16384      C:\Windows\SYSTEM32
77670000 comdlg32.dll         6.2.9200.16384      C:\Windows\SYSTEM32
77700000 ntdll.dll            6.2.9200.16420      C:\Windows\SYSTEM32

processes:
0000 Idle                   0 0    0
0004 System                 0 0    0
015c smss.exe               0 0    0
0224 csrss.exe              0 0    0
0284 wininit.exe            0 0    0
02ec services.exe           0 0    0
02f4 lsass.exe              0 0    0
0360 svchost.exe            0 0    0
0384 nvvsvc.exe             0 0    0
03a0 nvSCPAPISvr.exe        0 0    0
03cc svchost.exe            0 0    0
03fc svchost.exe            0 0    0
0174 svchost.exe            0 0    0
01e0 svchost.exe            0 0    0
0298 svchost.exe            0 0    0
0428 stacsv64.exe           0 0    0
0590 hpservice.exe          0 0    0
05dc svchost.exe            0 0    0
0678 spoolsv.exe            0 0    0
06b4 svchost.exe            0 0    0
06d0 svchost.exe            0 0    0
07b0 armsvc.exe             0 0    0
07c8 AESTSr64.exe           0 0    0
05cc BtwRSupportService.exe 0 0    0
0668 dasHost.exe            0 0    0
0788 nlssrv32.exe           0 0    0
0820 svchost.exe            0 0    0
0844 MsMpEng.exe            0 0    0
08c0 svchost.exe            0 0    0
04a8 svchost.exe            0 0    0
0de0 dllhost.exe            0 0    0
0c20 SearchIndexer.exe      0 0    0
1100 csrss.exe              3 0    0
0d64 winlogon.exe           3 0    0
1388 dwm.exe                3 0    0
14f8 taskhostex.exe         3 13   17  normal
17a4 taskhost.exe           3 9    11  normal
0b38 jusched.exe            3 9    2   normal       C:\Program Files (x86)\Common Files\Java\Java Update
0448 WUDFHost.exe           0 0    0
0f70 WINWORD.EXE            3 549  96  normal
1a70 sppsvc.exe             0 0    0
14d4 SppExtComObj.Exe       0 0    0
0b44 explorer.exe           3 1761 820 normal
10fc chrome.exe             3 157  72  normal       C:\Program Files (x86)\Google\Chrome\Application
0fd4 chrome.exe             3 13   4   normal       C:\Program Files (x86)\Google\Chrome\Application
15ac chrome.exe             3 12   2   normal       C:\Program Files (x86)\Google\Chrome\Application
092c chrome.exe             3 13   2   normal       C:\Program Files (x86)\Google\Chrome\Application
0930 chrome.exe             3 12   2   normal       C:\Program Files (x86)\Google\Chrome\Application
1838 chrome.exe             3 31   19  normal       C:\Program Files (x86)\Google\Chrome\Application
1118 chrome.exe             3 161  2   below normal C:\Program Files (x86)\Google\Chrome\Application
1f5c chrome.exe             3 190  2   below normal C:\Program Files (x86)\Google\Chrome\Application
0ea0 IDMan.exe              3 96   70  normal       C:\Program Files (x86)\Internet Download Manager
1704 IEMonitor.exe          3 17   17  normal       C:\Program Files (x86)\Internet Download Manager
0e18 CamtasiaStudio.exe     3 1215 667 normal       C:\Program Files (x86)\TechSmith\Camtasia Studio 7
1fec TSCHelp.exe            3 9    4   normal       C:\Program Files (x86)\TechSmith\Camtasia Studio 7
148c chrome.exe             3 80   2   below normal C:\Program Files (x86)\Google\Chrome\Application
0c5c audiodg.exe            0 0    0
17a8 SearchProtocolHost.exe 0 0    0
154c SearchFilterHost.exe   0 0    0   idle
14d0 dllhost.exe            3 0    0
1578 dllhost.exe            0 0    0
1570 Autorun.exe            3 61   47  normal       C:\Temp\Debug

hardware:
+ {1ed2bbf9-11f0-4084-b21f-ad83a8e6dcdc}
  - Fax
  - Microsoft XPS Document Writer
  - Root Print Queue
+ {36fc9e60-c465-11cf-8056-444553540000}
  - Generic USB Hub
  - Generic USB Hub
  - Intel(R) 5 Series/3400 Series Chipset Family USB Enhanced Host Controller - 3B34
  - Intel(R) 5 Series/3400 Series Chipset Family USB Enhanced Host Controller - 3B3C
  - Renesas USB 3.0 eXtensible Host Controller - 0096 (Microsoft)
.
  - USB Composite Device
  - USB Mass Storage Device
  - USB Root Hub
  - USB Root Hub
  - USB Root Hub (xHCI)
+ {4d36e965-e325-11ce-bfc1-08002be10318}
  - DTSOFT Virtual CdRom Device
  - Microsoft Virtual DVD-ROM
  - Optiarc DVD RW AD-7700S ATA Device
  - TWXSJC 1UB8XEJOXYJ8 SCSI CdRom Device
+ {4d36e966-e325-11ce-bfc1-08002be10318}
  - ACPI x64-based PC
+ {4d36e967-e325-11ce-bfc1-08002be10318}
  - Hitachi HTS725032A9A364 ATA Device
  - PHD 3.0 Silicon-Power USB Device
+ {4d36e968-e325-11ce-bfc1-08002be10318}
  - NVIDIA Quadro FX 880M (driver 9.18.13.1106)
+ {4d36e96a-e325-11ce-bfc1-08002be10318}
  - ATA Channel 0
  - ATA Channel 0
  - ATA Channel 1
  - ATA Channel 1
  - Ricoh Memory Stick Controller (driver 6.10.1.3)
  - Ricoh SD/MMC Host Controller (driver 6.10.1.3)
  - Ricoh xD-Picture Card Controller (driver 6.0.1.7)
  - Standard Dual Channel PCI IDE Controller
  - Standard Dual Channel PCI IDE Controller
+ {4d36e96b-e325-11ce-bfc1-08002be10318}
  - Standard PS/2 Keyboard
+ {4d36e96c-e325-11ce-bfc1-08002be10318}
  - IDT High Definition Audio CODEC (driver 6.10.6300.0)
  - NVIDIA High Definition Audio (driver 1.3.18.0)
  - NVIDIA High Definition Audio (driver 1.3.18.0)
  - NVIDIA High Definition Audio (driver 1.3.18.0)
  - NVIDIA High Definition Audio (driver 1.3.18.0)
+ {4d36e96d-e325-11ce-bfc1-08002be10318}
  - Agere Systems HDA Modem
+ {4d36e96e-e325-11ce-bfc1-08002be10318}
  - Generic PnP Monitor
+ {4d36e96f-e325-11ce-bfc1-08002be10318}
  - HID-compliant mouse
  - Synaptics PS/2 Port TouchPad (driver 15.0.24.0)
+ {4d36e972-e325-11ce-bfc1-08002be10318}
  - Bluetooth Device (Personal Area Network)
  - Bluetooth Device (RFCOMM Protocol TDI)
  - Intel(R) 82577LM Gigabit Network Connection
  - Microsoft ISATAP Adapter
  - Microsoft ISATAP Adapter #2
  - Microsoft Kernel Debug Network Adapter
  - Teredo Tunneling Pseudo-Interface
  - WAN Miniport (IKEv2)
  - WAN Miniport (IP)
  - WAN Miniport (IPv6)
  - WAN Miniport (L2TP)
  - WAN Miniport (Network Monitor)
  - WAN Miniport (PPPOE)
  - WAN Miniport (PPTP)
  - WAN Miniport (SSTP)
+ {4d36e977-e325-11ce-bfc1-08002be10318}
  - Ricoh R/RL/5C476(II) or Compatible CardBus Controller
+ {4d36e978-e325-11ce-bfc1-08002be10318}
  - ECP Printer Port (LPT1)
+ {4d36e97b-e325-11ce-bfc1-08002be10318}
  - ACEKJZHW IDE Controller
  - Microsoft Storage Spaces Controller
  - Microsoft VHD Loopback Controller
+ {4d36e97d-e325-11ce-bfc1-08002be10318}
  - ACPI Fixed Feature Button
  - ACPI Lid
  - ACPI Sleep Button
  - ACPI Thermal Zone
  - ACPI Thermal Zone
  - ACPI Thermal Zone
  - ACPI Thermal Zone
  - ACPI Thermal Zone
  - ACPI Thermal Zone
  - ACPI Thermal Zone
  - ACPI Thermal Zone
  - ACPI Thermal Zone
  - ACPI Thermal Zone
  - Composite Bus Enumerator
  - DAEMON Tools Virtual Bus (driver 5.0.1.282)
  - Direct Application Launch Button
  - Direct memory access controller
  - Extended IO Bus
  - Extended IO Bus
  - High Definition Audio Controller
  - High Definition Audio Controller
  - High precision event timer
  - HP Mobile Data Protection Sensor (driver 4.2.2.1)
  - Intel(R) 5 Series/3400 Series Chipset Family PCI Express Root Port 1 - 3B42
  - Intel(R) 5 Series/3400 Series Chipset Family PCI Express Root Port 2 - 3B44
  - Intel(R) 5 Series/3400 Series Chipset Family PCI Express Root Port 8 - 3B50
  - Intel(R) 82801 PCI Bridge - 2448
  - Intel(R) 82802 Firmware Hub Device
  - Intel(R) Management Engine Interface (driver 6.0.0.1179)
  - Intel(R) processor DMI - D132
  - Intel(R) processor Integrated Memory Controller - 2C98
  - Intel(R) processor Integrated Memory Controller Channel 0 Address Registers - 2CA1
  - Intel(R) processor Integrated Memory Controller Channel 0 Control Registers - 2CA0
  - Intel(R) processor Integrated Memory Controller Channel 0 Rank Registers - 2CA2
  - Intel(R) processor Integrated Memory Controller Channel 0 Thermal Control Registers - 2CA3
  - Intel(R) processor Integrated Memory Controller Channel 1 Address Registers - 2CA9
  - Intel(R) processor Integrated Memory Controller Channel 1 Control Registers - 2CA8
  - Intel(R) processor Integrated Memory Controller Channel 1 Rank Registers - 2CAA
  - Intel(R) processor Integrated Memory Controller Channel 1 Thermal Control Registers - 2CAB
  - Intel(R) processor Integrated Memory Controller Target Address Decoder - 2C99
  - Intel(R) processor Integrated Memory Controller Test Registers - 2C9C
  - Intel(R) processor Miscellaneous Registers - D158
  - Intel(R) processor PCI Express Root Port 1 - D138
  - Intel(R) processor Semaphore and Scratchpad Registers - D156
  - Intel(R) processor System Control and Status Registers - D157
  - Intel(R) processor System Management Registers - D155
  - Intel(R) QM57 Express Chipset LPC Interface Controller - 3B07
  - Intel(R) QPI Link - 2C90
  - Intel(R) QPI Physical 0 - 2C91
  - Intel(R) QuickPath Architecture Generic Non-Core Registers - 2C52
  - Intel(R) QuickPath Architecture System Address Decoder - 2C81
  - Intel(R) QuickPath Interconnect - D150
  - Intel(R) QuickPath Interconnect - D151
  - Microsoft ACPI-Compliant Embedded Controller
  - Microsoft ACPI-Compliant System
  - Microsoft Basic Display Driver
  - Microsoft Basic Render Driver
  - Microsoft System Management BIOS Driver
  - Microsoft Virtual Drive Enumerator
  - Microsoft Windows Management Interface for ACPI
  - Microsoft Windows Management Interface for ACPI
  - Microsoft Windows Management Interface for ACPI
  - Motherboard resources
  - Motherboard resources
  - Motherboard resources
  - Numeric data processor
  - PCI bus
  - PCI Express Root Complex
  - Plug and Play Software Device Enumerator
  - Printer Port Logical Interface
  - Programmable interrupt controller
  - Remote Desktop Device Redirector Bus
  - System CMOS/real time clock
  - System timer
  - UMBus Enumerator
  - UMBus Root Bus Enumerator
  - Volume Manager
+ {50127dc3-0f36-415e-a6cc-4cb3be910b65}
  - Intel(R) Core(TM) CPU          Q 720  @ 1.60GHz
  - Intel(R) Core(TM) CPU          Q 720  @ 1.60GHz
  - Intel(R) Core(TM) CPU          Q 720  @ 1.60GHz
  - Intel(R) Core(TM) CPU          Q 720  @ 1.60GHz
  - Intel(R) Core(TM) CPU          Q 720  @ 1.60GHz
  - Intel(R) Core(TM) CPU          Q 720  @ 1.60GHz
  - Intel(R) Core(TM) CPU          Q 720  @ 1.60GHz
  - Intel(R) Core(TM) CPU          Q 720  @ 1.60GHz
+ {50dd5230-ba8a-11d1-bf5d-0000f805f530}
  - RICOH SmartCard Reader (driver 1.7.0.1)
+ {533c5b84-ec70-11d2-9505-00c04f79deaf}
  - Generic volume shadow copy
+ {62f9c741-b25a-46ce-b54c-9bccce08b6f2}
  - Microsoft Device Association Root Enumerator
+ {6bdd1fc1-810f-11d0-bec7-08002be2092f}
  - Ricoh 1394 OHCI Compliant Host Controller
+ {6bdd1fc6-810f-11d0-bec7-08002be2092f}
  - HP Webcam [2 MP Macro]
+ {72631e54-78a4-11d0-bcf7-00aa00b7b32a}
  - Microsoft AC Adapter
  - Microsoft ACPI-Compliant Control Method Battery
  - Microsoft ACPI-Compliant Control Method Battery
+ {745a17a0-74d3-11d0-b6fe-00a0c90f57da}
  - USB Input Device
+ {a0a588a4-c46f-4b37-b7ea-c82fe89870c6}
  - SDA Standard Compliant SD Host Controller
+ {c166523c-fe0c-4a94-a586-f1a80cfbbf3e}
  - Headphones (RTC) (IDT High Definition Audio CODEC)
  - Integrated Microphone Array (IDT High Definition Audio CODEC)
  - Line In (IDT High Definition Audio CODEC)
  - Microphone (IDT High Definition Audio CODEC)
  - Speakers / HP (IDT High Definition Audio CODEC)
+ {d94ee5d8-d189-4994-83d2-f68d7d41b0e6}
  - Trusted Platform Module 1.2
+ {e0cbf06c-cd8b-4647-bb8a-263b43f0f974}
  - Broadcom 2070 Bluetooth (driver 12.0.0.10)
  - Microsoft Bluetooth Enumerator
+ {eec5ad98-8080-425f-922a-dabf3de3f69a}
  - SP PHD U3

cpu registers:
eax = 00000000
ebx = 038fb190
ecx = ec001889
edx = 00000000
esi = 00000002
edi = 00000000
eip = 009bbcac
esp = 0018f930
ebp = 0018f9a0

stack dump:
0018f930  00 00 00 00 00 00 00 00 - 02 00 00 00 00 00 00 00  ................
0018f940  94 f9 18 00 d8 f9 18 00 - 98 92 40 00 a0 f9 18 00  ..........@.....
0018f950  01 00 00 00 9c 6f 9b 00 - 30 dd 91 03 00 00 00 00  .....o..0.......
0018f960  00 00 00 00 00 00 00 00 - 80 25 00 00 80 00 00 00  .........%......
0018f970  01 00 00 00 01 00 00 00 - 57 00 00 00 01 00 00 00  ........W.......
0018f980  00 00 00 00 03 00 00 00 - 00 00 00 00 00 00 03 00  ................
0018f990  00 00 00 00 32 12 a3 00 - 3a 12 a3 00 30 dd 91 00  ....2...:...0...
0018f9a0  b8 f9 18 00 fc 17 a3 00 - 00 fa 18 00 00 fa 18 00  ................
0018f9b0  01 00 00 00 30 dd 91 03 - 01 00 00 00 f7 c1 a2 00  ....0...........
0018f9c0  00 fa 18 00 30 fa 18 00 - 00 00 00 00 98 6a 9b 00  ....0........j..
0018f9d0  b0 b1 8f 03 a8 81 9b 00 - e4 f9 18 00 98 92 40 00  ..............@.
0018f9e0  30 fa 18 00 38 fa 18 00 - 98 92 40 00 30 fa 18 00  0...8.....@.0...
0018f9f0  98 6a 9b 00 00 00 00 00 - 00 00 00 00 00 00 00 00  .j..............
0018fa00  38 fa 18 00 08 00 00 00 - 2c 86 40 00 80 00 00 00  8.......,.@.....
0018fa10  80 25 00 00 70 b1 8f 03 - 00 00 00 00 30 dd 91 03  .%..p.......0...
0018fa20  00 00 00 00 00 00 00 00 - 00 00 00 00 00 00 00 00  ................
0018fa30  84 fa 18 00 0b a8 a2 00 - 44 fa 18 00 98 92 40 00  ........D.....@.
0018fa40  84 fa 18 00 50 fa 18 00 - 98 92 40 00 84 fa 18 00  ....P.....@.....
0018fa50  a4 fa 18 00 98 92 40 00 - 84 fa 18 00 30 dd 91 03  ......@.....0...
0018fa60  b0 b1 8f 03 d0 32 8f 03 - 10 15 90 03 00 00 00 00  .....2..........

disassembling:
[...]
009bbca3        push    0
009bbca5        push    esi
009bbca6        push    0
009bbca8        mov     eax, [ebx+$14]
009bbcab        push    eax
009bbcac      > mov     eax, [eax]
009bbcae        call    dword ptr [eax+$28]
009bbcb1        test    eax, $80000000
009bbcb6        setz    al
009bbcb9        test    al, al
009bbcbb        jz      loc_9bbcd3
[...] 
```

但我不知道我的代码有什么问题！

请帮帮我

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T11:33:18.827

我对madExcept trace的分析如下：

1.  代码在第 1589 行失败`FMX.Canvas.D2D`。
2.  那条线是这样做的：`H.MapBuffer.Map(0, Flags, 0, Mapped)`.
3.  反汇编代码表明`MapBuffer`是`nil`.
4.  唯一`MapBuffer`分配给非零值的地方是在第 1573 行的例程中调用`CreateTexture2D`.
5.  调用的代码`CreateTexture2D`不会检查该调用的返回值。
6.  从那时起`MapBuffer`，`nil`似乎调用`CreateTexture2D`失败了。

至于为什么它失败了，我不能用目前的信息说。然而，这似乎是 FMX 代码中的一个错误，因为 FMX 代码必须检查错误并且没有这样做。我建议你提交一份质量控制报告。

# vba - VBA WORD: Remove SHIFT-ENTER lines

> ID：15986938
> 
> 赞同：2
> 
> 时间：2013-04-13T10:42:03.473
> 
> 标签：vba, ms-word, powerpoint

After copying from ppt, you often get lines that look like this:

```
This is a line
and then another line
and then another
and so forth. New lines created 
via SHIFT-ENTER. 
```

Where I need it to say:

> This is a line and then another line and then another and so forth. New lines created via SHIFT-ENTER.

New lines created by just pressing ENTER should remain as new lines.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:47:24.420

`Shift` + `Enter` is nothing but `^l`

This is how `Shift` + `Enter` looks like

![enter image description here](https://i.stack.imgur.com/F3stj.png)

So you can either replace it manually or use the below VBA Code.

**Non VBA Way**

1.  Press Ctrl+H to open the Replace dialog.
2.  In the "Find what" box, type `^l`.
3.  In the "Replace with" box, type `" "` (Space without the quotes).
4.  Click Replace All.

**VBA Way**

Paste this in a module

```
Sub Sample()
    Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting
    With Selection.Find
        .Text = "^l"
        .Replacement.Text = " "
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchKashida = False
        .MatchDiacritics = False
        .MatchAlefHamza = False
        .MatchControl = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    End With
    Selection.Find.Execute Replace:=wdReplaceAll
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:06:08.783

This page on the PPT FAQ I maintain explains the characters that PPT uses for linebreaks vs paragraph endings. It varies somewhat across versions and shape types.

Paragraph endings and line breaks [http://www.pptfaq.com/FAQ00992_Paragraph_endings_and_line_breaks.htm](http://www.pptfaq.com/FAQ00992_Paragraph_endings_and_line_breaks.htm)

# c# - 覆盖属性类型

> ID：15986939
> 
> 赞同：0
> 
> 时间：2013-04-13T10:42:13.283
> 
> 标签：c#, properties, overriding, derived-class

参考在[dba.stackexchange](https://dba.stackexchange.com/questions/39880/modeling-issue-with-derived-types/39881?noredirect=1#39881)上对我的问题提供的答案，我无法获得如何覆盖 Agents 属性以获取 OrigineAgents。
在我的情况下，我怎样才能覆盖属性代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:47:15.633

> 我最终得到的 Origine 类型有两个列表：Agents 和 OrigineAgents。

由于 Origine 类继承 Region 类，您可以删除 OrigineAgents 列表。

# php - 本地主机中用户'testweb'@'localhost'drupal站点配置的访问被拒绝

> ID：15986943
> 
> 赞同：3
> 
> 时间：2013-04-13T10:42:54.863
> 
> 标签：php, drupal

我已经在互联网上设置了一个网站，我尝试在本地托管它并对其进行测试。通常，在 Drupal 中，数据库连接可以从`settings.php`位于以下位置的文件中配置：`\sites\default`.

这是设置访问权限的代码：

```
$databases = array (
  'default' => 
  array (
    'default' => 
    array (
      'database' => 'testweb',
      'username' => 'testweb',
      'password' => 'root',
      'host' => 'localhost',
      'port' => '',
      'driver' => 'mysql',
      'prefix' => '',
    ),
  ),
); 
```

MySQL web 用户名和数据库名相同，即 testweb。

这是我得到的错误。

> PDOException: SQLSTATE[28000] [1045] 在 lock_may_be_available()（C:\wamp\www\testweb\includes\lock.inc 的第 167 行）中用户 'testweb'@'localhost'（使用密码：YES）的访问被拒绝。

我想知道的另一件事是 Drupal 是否在数据库中存储数据库连接字符串。

我在stackoverflow中看到了这个问题，但它并没有继续正确的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T06:14:16.610

我为此使用了另一种解决方案，即我使用默认 mysql 用户连接数据库

```
$databases = array (
  'default' => 
  array (
    'default' => 
    array (
      'database' => 'testweb',
      'username' => 'root',
      'password' => '',
      'host' => 'localhost',
      'port' => '',
      'driver' => 'mysql',
      'prefix' => '',
    ),
  ),
); 
```

这帮助我解决了我的问题。如果您使用的是 wamp 服务器，您可以在以下位置找到默认用户。

```
C:\wamp\apps\phpmyadmin3.5.1 
```

文件是`config.inc.`

我假设我为 testweb 数据库创建的用户没有反映它是正确的，或者它没有被正确创建，因为我非常确定我提供的用户名和密码，并且默认用户名和密码有效。这可能不是一个 Drupal 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:46:29.263

您的用户名或密码或数据库名称可能不正确。

您可以尝试使用一些 mysql 客户端或 phpmyadmin 连接到您的数据库并检查它们是否正确，我确定其中一个不是:)

您可以在 phpmyadmin [http://wiki.phpmyadmin.net/pma/user_management中轻松创建新用户](http://wiki.phpmyadmin.net/pma/user_management)

# xaml - 在 windows phone 8 的滚动查看器中混合 ZoomMode

> ID：15986945
> 
> 赞同：0
> 
> 时间：2013-04-13T10:42:57.493
> 
> 标签：xaml, zooming, scrollview, expression-blend

我有一个滚动查看器，我想在其中集成缩放功能。通过在互联网上搜索，我发现存在一个名为：

“ScrollViewer.ZoomMode”

据我了解，应该为您的列表和其中的所有内容启用缩放属性。但是我的代码中没有这个属性。有人知道您是否需要添加一些不存在的参考吗？

**编辑** 好的，谢谢。但是我已经看过了，但无法按照我的意愿让它工作:) 我想要一个可以通过滚动和缩放来操作的元素列表（文本、按钮和图像）。有没有聪明的方法来做到这一点？喜欢将列表与视图框集成？

**第二次编辑** 我只能上传很多 xaml，因为它是通过混合完成的。在我有的地方，可以说一张带有不同按钮的地图。我已经使用scrollviewer实现了所有方向的滚动。但我也希望能够缩放。我尝试了不同的方法，比如 viewbox 和一些 c#。但收效甚微。所以我可以分享代码，但它只是由混合创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:58:39.660

ZoomMode 在 Windows Phone 平台上不可用。

ZoomMode 是开发 Windows 应用商店应用程序时 ScrollViewer 上的属性，不适用于手机。

然而，缩放仍然可以实现，只是不是作为 ScrollViewer 的一部分。这里有一篇关于在图像上创建捏缩放的帖子： [Windows phone 8 中的捏缩放功能](https://stackoverflow.com/questions/13969400/pinch-to-zoom-functionality-in-windows-phone-8)

# flot - 浮动“点”图表功能

> ID：15986946
> 
> 赞同：0
> 
> 时间：2013-04-13T10:43:11.113
> 
> 标签：flot

有人可以告诉我以下哪一项是可能的吗？

-1- 我想在 Flot 中创建一个散点图，并相信这样做的方法是通过“点”。我们图表中的每个点都需要在图表中始终出现自己的标签——即，不仅仅是在悬停/鼠标悬停期间。我认为这很容易做到吗？

-2- 有没有办法让每个数据点都有“两个”标签？换句话说，假设我想绘制美国的城市以及犯罪率的逐年变化。我能否将分数标记为“波士顿 +5.3%”和“圣地亚哥 -7.1%”？（请记住，第二个值（犯罪率的变化）不会成为任一轴的一部分。）

-3- 如果上述是可能的，标签的第二部分（犯罪率的变化）是否可以根据值进行颜色编码？例如，正犯罪率显示为红色，负犯罪率显示为绿色？

-4- 点的标签可以用作超链接吗？

-5- 对于鼠标悬停在这些点上时出现的悬停弹出窗口，您是否能够包含比轴中包含的数据更多的数据？例如，如果我们想在工具提示中包含几个数据点以便为用户提供更多信息，这可能吗？

如果您觉得上述问题有比 flot 更好的解决方案，也兼容 IE8，请告诉我。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:10:06.273

Flot 的默认选项不支持您要查找的内容。但是，该库确实提供了可用于扩展其基本功能的[挂钩。](https://github.com/flot/flot/blob/master/API.md#hooks)

您可以在 draw 或（更好的）drawSeries 挂钩上注册一个函数，该挂钩遍历您的数据并创建绝对定位的 div 元素以充当每个点的标签。其他一切——多个标签、颜色编码、超链接等，都只是你在这些 div 中放入的内容的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:25:03.133

基于@DNS 的想法，我整理了一个简单的例子。在示例中，您将看到我将“标签”信息直接包含到我的数据数组中。如果存在此信息，则代码会在带有标签的点旁边添加一个 div（它是一个超链接）。我还没有对你的愿望清单上的所有内容进行编码，但希望这会让你继续前进。

[在这里](http://jsfiddle.net/Bjzm9/2/)拉小提琴。

```
$(function () {

     function divByPointHook(plot, canvascontext, series){
         $.each(series.data, function(){
             if (this.length == 3){
                 var divStr = '<div style="border:1px solid black; position:absolute; ';
                 var pos = plot.p2c({'x':this[0],'y':this[1]});
                 divStr += 'left:' + pos.left + 'px;';
                 divStr += 'top:' + pos.top + 'px; ">'
                 divStr += '<a href="#">'+this[2]+'</a>' + '</div>';
                $('#placeholder').append(divStr);   
             }
         });

     };

    var d1 = [[0,1,"one"],[3,8,"two"],[5,4,],[2,10],[1.2,9],[9,2],[46,41],
[22,14],[20,12,"three"],[20,25],[7,5],[18,11],[31,20],[50,40,"four"],[24,36],
[20,42],[33,41],[51,39],[11,28,"five"],[32,16],[38,40],[35,22],[41,30],
[21,18]];

    $.plot($("#placeholder"), [{
            data: d1,
            points: {
                radius: 3,
                show: true,
                fill: true
            }}],
           { hooks: { drawSeries: [divByPointHook] } }
    );

}); 
```

# html - 如何在同一行对齐两个提交按钮

> ID：15986948
> 
> 赞同：3
> 
> 时间：2013-04-13T10:43:19.723
> 
> 标签：html, css

我有一个带有两个用于不同目的的提交按钮的页面，我在表格内分配，我试图将它对齐在同一行。

html是

```
<td>
<div>
Involved: 
<form>
<input type="submit" value="Add from list">
</form>
 <p>or</p>    
<form>
<input type="submit" value="Type a name">
</form>
</div>
</td> 
```

以上将在同一行中生成按钮和单词，我希望它发生在同一行中。

似乎就像“参与（输入名称）或（从列表中添加）”，

我可以知道怎么做吗？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T10:50:03.543

您可以使用`<div>`而不是表格。给按钮一个 CSS 值`display:inline-block;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T10:47:14.433

你的 html 乱七八糟，不需要那么多元素

```
<td>
  <form>Involved: <input type="submit" value="Add from list"> or <input type="submit" value="Type a name"></form>
</td> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T10:58:51.040

试试这个 CSS

```
div#frm *{display:inline} 
```

和 html

```
<div id="frm">
Involved: 
<form>
<input type="submit" value="Add from list">
</form>
 <p>or</p>    
<form>
<input type="submit" value="Type a name">
</form>
</div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-23T10:14:42.613

```
<div style="display: inline;" align="center">
      <div style="float: left;">
            <button style="color: white; padding: 15px 32px; text-align: center; text-decoration: none; border-radius: 4px; display: inline-block; font-size: 100%;">Hello</button>
      </div>
      <div style="float: right;">
            <button style="color: white; background-color: #4caf50; padding: 15px 32px; text-align: center; text-decoration: none; border-radius: 4px; display: inline-block; font-size: 100%;">Hello</button>
     </div>
</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-13T10:50:14.137

首先，您的代码无效，因为中间有一个结束 div 块。

然后，**表单是一个块元素**，这就是为什么您的浏览器只会在新行上显示它（至少，没有应用任何样式）。

因此，您可以做的是使其成为具有适当性的内联元素*"display: inline-block"*。你的段落也一样，它不是必需的，如果你想添加它，因为它也是一个块元素，请确保应用此样式并使其内联。

```
<div>
Involved: 
    <form style="display:inline-block">
    <input type="submit" value="Add from list">
    </form> or      
    <form style="display:inline-block">
    <input type="submit" value="Type a name">
    </form>
</div> 
```

更多关于[内联元素和块元素的信息在这里](http://www.webdesignfromscratch.com/html-css/css-block-and-inline/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-13T10:54:58.060

```
<!DOCTYPE html>
<html>
<head>
<style>
form {display: inline-block;}
</style>
</head>
<body>

<table>
<tr>
<td>
<form>
   <label>Involved:</label>
   <input type="submit" value="Add from list">
</form>  
<form>
   <label>or</label>   
   <input type="submit" value="Type a name">
</form>
</td>
</tr>
</table>

</body>
</html> 
```

# php - 无法安装 xdebug 的 apache 窗口 7

> ID：15986949
> 
> 赞同：0
> 
> 时间：2013-04-13T10:43:32.770
> 
> 标签：php, apache, installation, xdebug

我正在重建我的开发环境——不是取消 wamp 或 xampp 等，而是尝试一次安装每一位。到目前为止，这正在变成一个令人头疼的问题。我现在安装了 Php、apache 和 mysql，现在想安装 xdebug。

我已经去了 xdebug 站点上的向导，并在那里复制并粘贴了我的 phpinfo。它有效，但没有建议我安装哪个版本，所以我一直在尝试不同的版本，看看哪个可以工作 - 还没有快乐。

在 apache 错误日志中它指出

```
Failed loading c:\wamp\php\ext\php_xdebug-2.2.0-5.4-vc9.dll 
```

在我的 php.ini 中，我有以下 xdebug 条目：

```
zend_extension = "c:\wamp\php\ext\php_xdebug-2.2.0-5.4-vc9.dll"

[xdebug]
xdebug.remote_enable = true
xdebug.profiler_enable = true
xdebug.profiler_enable_trigger = true
xdebug.profiler_output_name = cachegrind.out.%t.%p
xdebug.profiler_output_dir = "c:/wamp/tmp"
xdebug.auto_trace=1
xdebug.trace_format=1
xdebug.profiler_append=1
xdebug.collect_params=4
xdebug.collect_return=1
xdebug.trace_output_dir="c:/wamp/tmp"
xdebug.trace_output_name= %t.trace 
```

我的 php 是 5.4.3 x64 我的 apache 是 2.4.4 x64 操作系统：Win 7 64bit

我试过 xdebug 版本：

```
php_xdebug-2.2.0-5.4-vc9.dll 
php_xdebug-2.2.2-5.4-vc9-nts.dll
php_xdebug-2.2.2-5.5-vc11-x86_64.dll 
```

我假设它是一个兼容性选项，但由于向导有点失败，我不确定要拥有哪个版本。

我怎样才能让它工作，并确定哪个是正确的版本

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T11:08:21.427

成功！！！

部分问题是路径：

代替：

```
zend_extension = "c:\wamp\php\ext\php_xdebug-2.2.0-5.4-vc9.dll" 
```

我应该：

```
zend_extension = "c:/wamp/php/ext/php_xdebug-2.2.0-5.4-vc9.dll" 
```

我更改为版本：

```
php_xdebug-2.2.1-5.4-vc9-x86_64.dll 
```

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-29T17:52:22.260

使用[http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)并将其放在 php -i 的表单输出中

（在 cmd windows php -i >output 使用记事本打开输出文件并将其放在表单上）

然后按分析...并按照 Xdebug 向导说明进行操作

希望这些帮助！

# symfony - 在 Symfony2 中运行 PHPUnit 测试时，JMS Serializer 未读取配置

> ID：15986953
> 
> 赞同：4
> 
> 时间：2013-04-13T10:43:56.023
> 
> 标签：symfony, phpunit, jmsserializerbundle, serialization

我正在使用 JMSSerializer 为我正在处理的 Symfony2 项目创建 JSON 响应，并尝试为每个响应构建单元测试，但我遇到了以下变体：

```
JMS\Serializer\Exception\RuntimeException: You must define a type for FooBundle\Entity\Bar::$name. 
```

我正在为序列化程序使用 YML 配置，它在生成响应时工作得很好。

```
#src/FooBundle/Resources/config/serializer/Entity.Bar.yml
FooBundle\Entity\Bar:
  exclusion_policy: none
    properties:
        id:
            exclude: true
            type: integer
        name:
            type: string 
```

我想知道是否需要以某种方式预加载配置并找到此链接：http: [//jmsyst.com/libs/serializer/master/configuration](http://jmsyst.com/libs/serializer/master/configuration)说要配置元数据路径但还要包含文件后缀：

```
$serializer =
JMS\Serializer\SerializerBuilder::create()
    ->addMetadataDir($someDir)
    ->build(); 
```

在单元测试中生成序列化程序时，我尝试设置配置目录：

```
$serializer = SerializerBuilder::create()->addMetadataDir('path-to-dir')->build(); 
```

但这并没有解决问题，我再次检查了文档页面，它告诉您列出文件的完整路径

“所以，如果你的类被命名为 Vendor\Package\Foo，则元数据文件需要位于 $someDir/Vendor.Package.Foo.(xml|yml)。”

但尝试 get 生成：

```
JMS\Serializer\Exception\InvalidArgumentException: The directory "path-to-file" does not exist. 
```

我错过了一些明显的东西吗？

谢谢

本

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T08:24:45.520

JMSSerializer 在第一次读取配置文件时会对其进行缓存，您必须使用以下命令清除测试环境的缓存：

```
php app/console cache:clear -e test 
```

# twitter-bootstrap - Bootstrap 输入框高度缩小了

> ID：15986963
> 
> 赞同：4
> 
> 时间：2013-04-13T10:45:07.077
> 
> 标签：twitter-bootstrap

在我的网站上，我使用的是引导框，但是行高似乎缩小了，我终生无法弄清楚原因。

我没有修改任何引导 CSS，只有我自己的，但我不相信这是干扰。

我正在使用的代码是：

```
<div class="pull-left">
<h3>Search for devices</h3>
<p>Use the search form below to search for your device.</p>
<div class="input-append">
  <input class="span2" id="appendedInputButtons" type="text">
  <button class="btn" type="button">Search</button>
</div>
</div> 
```

现场示例：http: [//dev.romwars.com/#](http://dev.romwars.com/#)

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T10:52:52.933

我的浏览器 (Chrome)`box-sizing: border-box`在您的输入中应用规则。要解决您的问题，您应该在 CSS 中添加以下内容：

```
input[type="text"] {
  box-sizing: content-box;
} 
```

此外，您的问题似乎是它在这个问题中所描述的：[是什么导致“用户代理样式表”使用“边框框”而不是“内容框”来调整框大小？](https://stackoverflow.com/q/7534222/1004046). 您可以解决将其放在`<!DOCTYPE html>`文档上方的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T11:19:08.310

浏览器处于怪癖模式，因为您没有指定页面的文档类型。

# firefox - Firefox 22 监控扩展中的 HTTP 流量

> ID：15986967
> 
> 赞同：0
> 
> 时间：2013-04-13T10:45:30.140
> 
> 标签：firefox, firefox-addon, monitor, traffic, gecko

我目前正在尝试编写一个简单的 Firefox 插件来监控 http 流量。

我搜索了很多，也发现了一些东西，但一切都与 Firefox 3.6 有关，我不知道它在以后的版本中是如何工作的，我认为在 Firefox 4 中发生了一些变化。

[https://developer.mozilla.org/en-US/docs/Monitoring_HTTP_activity](https://developer.mozilla.org/en-US/docs/Monitoring_HTTP_activity)

看起来不错，但我总是明白，没有定义 Components.classes[] 并且 Mozilla Addon Builder 甚至不会使用该行构建插件。

有人知道这在较新的 Firefox 版本中是如何工作的吗？

谢谢，西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:15:06.853

您应该首先学习扩展的基础知识。但是为什么不使用httpfox呢？

# php - php mysql + 警告

> ID：15986968
> 
> 赞同：1
> 
> 时间：2013-04-13T10:45:31.390
> 
> 标签：php, mysql, warnings

我正在创建一个注册页面，`php and mysql` 但是当我提交信息时，它会插入所有数据，但它会给我一个警告说：

错误：

```
 Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in C:\wamp\www\Unnamed Site 2\resources\register.php on line 164 
```

# 注册.php

```
<?php require_once('for members/scripts/connect.php'); ?>

<?php
ob_start();
 function countryQuery(){

  $countryData = mysql_query("SELECT * FROM country") or die("could select database");

  while($record = mysql_fetch_array($countryData)){

     echo'<option value="' . $record['country_name'] .  '">' . $record['country_name'] . '</option>';

  }

}

function specializationQuery(){

$specData = mysql_query("SELECT * FROM specialization");

  while($recordJob = mysql_fetch_array($specData)){

     echo'<option value="' . $recordJob['specialization_name'] .  '">' . $recordJob['specialization_name'] . '</option>';

  }

}

function districtQuery(){

$distData = mysql_query("SELECT * FROM districts");

  while($recorddist = mysql_fetch_array($distData)){

     echo'<option value="' . $recorddist['district_name'] .  '">' . $recorddist['district_name'] . '</option>';

  }

}

function villageQuery(){

$villageData = mysql_query("SELECT * FROM village");

  while($recordvillage = mysql_fetch_array($villageData)){

     echo'<option value="' . $recordvillage['village_name'] .  '">' . $recordvillage['village_name'] . '</option>';

  }

}

 //default value
$message = "Fields Marcked with an [*] are Required";
  $username = "";
  $fname = "";
  $lname = "";
  $specialization = "";
  $email = "";
  $pass1 = "";
  $pass2 = "";
  $district = "";
  $village = "";

if(isset($_POST['username'])){
  $username = $_POST['username'];
  $fname = $_POST['fname'];
  $lname = $_POST['lname'];
  $email = $_POST['email'];
  $pass1 = $_POST['pass1'];
  $pass2 = $_POST['pass2'];
  $bdate = $_POST['birthdate'];
  $country = $_POST['country'];
  //$local_adress = $_POST['adress'];
  $specialization = $_POST['specialization'];
  $district = $_POST['district'];
  $village = $_POST['village'];

  //error handeling
  if((!$username)||(!$fname)||(!$lname)||(!$email)||(!$pass1)||(!$pass2)||(!$specialization)||(!$district)||(!$village)){
  $message = "**** Please insert the Required Fields below ****<br />";

  if($fname == "")
 {
     $message = $message . "Enter First name<br/>";
 }
  if($lname == "")
 {
     $message = $message . "Enter Last name<br/>";
 }

 if($specialization == 0)
 {
     $message = $message . "Select Your Job<br />";
 }
 if($district == 0)
 {
     $message = $message . "Select Your District<br />";
 }
 if($village == 0)
 {
     $message = $message . "Select Your Village<br />";
 }
 if($email == "")
 {
     $message = $message . "Enter Email Adress<br/>";
 }
  if ($username == "") {
    $message = $message . "Enter User Name<br/>";
  }

  if($pass1 == "")
 {
     $message = $message . "Enter password<br/>";
 }

  if($pass2 == "")
 {
     $message = $message . "rechek the password <br/>";
 }

 } 

     elseif(strlen($pass1) <= 8)
    {
     $message = $message . "Your Password must be at least 9 charachters<br />";
}
   else if($pass1!=$pass2){
   $message = "your password do not match!";
   }else{
   //securing the data
   $username = preg_replace("#[^0-9a-z]#i","",$username);
   $fname = preg_replace("#[^0-9a-z]#i","",$fname);
   $lname = preg_replace("#[^0-9a-z]#i","",$lname);
   //$pass1 = sha1($pass1);

   $email = mysql_real_escape_string($email);
   // checking for duplicate
   $user_query = mysql_query("SELECT user_name FROM user WHERE user_name = '$username'LIMIT 1") or die("could not check the username");
   $count_username = mysql_num_rows($user_query);

    $email_query = mysql_query("SELECT email_address FROM user WHERE email_address = '$email'LIMIT 1") or die("could not check the email");
   $count_email = mysql_num_rows($email_query);

    if($count_username > 0){
     $message = " your username is alredy in use";
    }elseif($count_email > 0){
      $message = "your email is alredy in use";
    }
   else{

      $query = mysql_query("INSERT INTO user(user_name, first_name, last_name, address, district_name, village_name, birth_date, email_address, specialization_id, password, registered_date)VALUES('$username', '$fname', '$lname', '$country', '$district', '$village', '$bdate', '$email', '$specialization', '$pass1',  now())")or die("could not insert data");    

    $message = "you have  now been registered";
    //from the social website 
```

**这行 164 $getid**

```
$getid = mysql_fetch_array($query);
        $_SESSION['user_id'] = $getid['user_rid'];
        $_SESSION['login'] = 'true';
        $_SESSION['login_user'] = $getid['username'];
//header("Location: home.php");
    }
   }
 }

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Register Page</title>
<link href="style/stylesheet.css" rel="stylesheet" type="text/css" />
<link href="style/imagesGallery.css"rel="stylesheet" type="text/css"/>
<script src="js/main.js" type="text/javascript"></script>
<script src="js/jquery.js" type="text/javascript"></script>
</head>

<body>

<table width="200" border="0" align="center">
<tr>
  <tr>
    <td><img src="web_header copy.jpg" alt="visitor header" width="1080" height="128" /></td>
  </tr>
  <tr>

     <td>
       <marquee direction="left" width="99%" behavior="alternate">
        <img src="imggallery/images/akoura/akoura_small.jpg" width="119" height="91">
        <img src="imggallery/images/ballaa2/ballaa2_small.jpg" width="119" height="91">
        <img src="imggallery/images/baalbeck/baalbek_small.jpg" height="92">
        <img src="imggallery/images/barouk/cedre_barouk_small.jpg" width="119" height="91">
        <img src="imggallery/images/batroun/batroun_small.jpg" width="119" height="91">
        <img src="imggallery/images/bchareh/bchareh_small.jpg" width="119" height="91">
        <img src="imggallery/images/beiteldin/beiteldine_small.jpg" width="119" height="91">
        <img src="imggallery/images/beyrouth/beyrouth_small.jpg" width="119" height="91">
        <img src="imggallery/images/beyrouth/beyroyj frm sky/beyrouthfromSky_small.jpg" width="119" height="91">
        <img src="imggallery/images/deir el mara/deirelamar_small.jpg" width="119" height="91">
        </marquee>
        <hr />
       <h2 class="registerTitle">Registration Fields</h2>
       <h4 class="registerTitle">Sign Up Today....</h4>
 <!-- <div class="container center"> -->
       <p style="color:#FF0000" align="center"><?php print("$message")?></p>
    </td>

    <tr>
        <table width="680" border="0" align="center">
        <form action="register.php" method="post">

         <td> 
        </span><label for="firstname"><span class="Fields">First Name</span> <span class="requiredField">*</span></label></td>
        <td>
        <input type="text" name="fname" placeholder="Firstname" /></td>

      <td><span class="Fields">Last Name</span><span class="requiredField">*</span></label></td>

      <td><input type="text" name="lname" placeholder="Lastname" /></td>

    <tr>
      <td><label for="birthdate" class="Fields">Birth Date                     </label></td>
      <td><input type="date" name="birthdate" value= "YYYY_MM_DD"  onfocus="if (this.value == 'YYYY_MM_DD') {this.value = '';}" onblur="if (this.value == '') {this.value = 'YYYY_MM_DD';}" />
        <br /></td>

    </tr>

    <tr>
      <td class="Fields"><label for="country">Country</label></td>
      <td><select name="country"  class="select">
      <option value="0">-- Select Your Country --</option>
        <?php countryQuery(); ?>
      </select></td>
      <td class="Fields"><label for="specialisation">Specialisation <span class="requiredField">*</span></label></td>
      <td><select name="specialization"  class="select">
      <option value="0">-- Select Your Specialization --</option>

        <?php specializationQuery(); ?>
      </select></td>

    </tr>

    <tr>
      <td class="Fields"><label for="district">District<span class="requiredField">*</span></label></td>
      <td><select name="district"  class="select">
      <option value="0">-- Select Your District --</option>

        <?php districtQuery(); ?>
      </select></td>

      <td class="Fields"><label for="village">Village<span class="requiredField">*</span></label></td>
      <td><select name="village"  class="select">
      <option value="0">-- Select Your Village --</option>

        <?php villageQuery(); ?>
      </select></td>

    </tr>

    <tr>
      <td class="Fields"><label for="email">Email Adress<span class="requiredField">*</span></label></td>
      <td><input type="text" name="email" placeholder="Email Adress" />
        <br /></td>
      <td><label for="username"><span class="Fields">User Name</span> <span class="requiredField">*</span></label></td>
      <td><input type="text" name="username" placeholder="Username" />
        <br /></td>

    </tr>

    <tr>
      <td class="Fields"><label for="password">Password<span class="requiredField">*</span></label></td>
      <td><input type="password" name="pass1" placeholder="Password" />
        <br /></td>
      <td class="Fields"><label for="password2">Re_Password<span class="requiredField">*</span></label></td>
      <td><input type="password" name="pass2" placeholder="Validate Password" />
        <br /></td>

    </tr>

    <tr>
      <td></td>
      <td></td>
      <td><input type="submit" value="Register"/></td>
      <td></td>
    </tr>

  </form>
</table>
<!--</div>-->
  </tr>

  <tr>
    <td><?php require_once('footer.php'); ?></td>
  </tr>
  </tr>
  </tr>
</table>

</body>
</html>
<?php ob_end_flush(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:01:45.680

嘿伙计，您已将 $query 传递给 mysql_fetch_array($query)，但 $query 是插入查询

```
$query = mysql_query("SELECT * FROM <your table name>"); 

$mysql_fetch_array($query); 
```

现在它可以工作了，$mysql_fetch_array(); 在选择要获取记录的位置工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:49:37.983

以这种方式运行所有查询，您将始终知道出了什么问题以及应该归咎于什么代码

```
$res = mysql_query("SELECT * FROM specialization");
if (!$res) {
    throw new Exception(mysql_error());
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T10:48:57.460

根据[PHP 文档](http://php.net/manual/en/function.mysql-fetch-array.php)示例，我认为您在检索结果时遗漏了一些东西，因此请尝试使用您的查询并检查它；）：

```
<?php
//= Query ========================//
$sql=mysql_query("select * from table1");

//= Closed while ====================//
/*everytime it fetches the row, adds it to array...*/
while($r[]=mysql_fetch_array($sql));

echo "<pre>";
//= Prints $r as array =================//
print_r ($r);
//=============================//
echo "</pre>";
?> 
```

# macos - 如何为 VIM 正确安装 pyclewn？

> ID：15986970
> 
> 赞同：0
> 
> 时间：2013-04-13T10:45:39.473
> 
> 标签：macos, debugging, vim

我有兴趣改进我的工作流程，并希望添加 clewn 或 pyclewn 以便我可以在 vim 中进行调试。我正在使用 Mac OS X 10.8。不幸的是，我似乎无法按照基本说明安装它。我在此页面上运行指令：http: [//pyclewn.sourceforge.net/install.html](http://pyclewn.sourceforge.net/install.html) [https://sourceforge.net/projects/pyclewn/](https://sourceforge.net/projects/pyclewn/)

```
mbp:pyclewn-1.10.py2 nate$ python setup.py install --force
Failed to run 'gvim' as Vim.
Please set the EDITOR environment variable or run 'pyclewn --editor=/path/to/(g)vim'.

Traceback (most recent call last):
  File "setup.py", line 48, in <module>
    vimdir = pyclewn_install.vimdir()
  File "/Users/nate/Downloads/pyclewn-1.10.py2/clewn/misc.py", line 85, in _dec
ret = f(*args)
  File "/Users/nate/Downloads/pyclewn-1.10.py2/pyclewn_install.py", line 49, in vimdir
    path = vim.exec_vimcmd(['echon $VIM'])
  File "/Users/nate/Downloads/pyclewn-1.10.py2/clewn/vim.py", line 96, in exec_vimcmd
subprocess.Popen(args).wait()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 679, in __init__
errread, errwrite)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 1249, in _execute_child
raise child_exception
OSError: [Errno 2] No such file or directory 
```

我尝试通过设置 EDITOR 变量来按照它的建议进行操作：

```
mbp:pyclewn-1.10.py2 nate$ EDITOR=/usr/bin/vim
mbp:pyclewn-1.10.py2 nate$ echo $EDITOR
/usr/bin/vim 
```

...但是我再次遇到同样的错误。如果我也尝试使用 Python 3 版本的 pyclewn，我也会遇到同样的错误。

尝试运行其他建议的命令会产生另一个错误：

```
mbp:pyclewn-1.10.py2 nate$ ./pyclewn --editor=/usr/bin/vim
vim  CRITICAL 
Exception in pyclewn:

<class 'clewn.ClewnError'>
"pyclewn.vim version does not match pyclewn's:
    pyclewn version: "pyclewn-1.10.py2"
    pyclewn.vim version: """
source line: "% (pyclewn_version, version))"
at /Users/nate/Downloads/pyclewn-1.10.py2/clewn/vim.py:383
pyclewn aborting... 
```

有任何想法吗？不幸的是，我对这类东西知之甚少，无法帮助解决它。该项目托管在 sourceforge 上，我不知道如何在那里报告错误，所以我在这里发布。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T11:58:17.260

像往常一样，我是个白痴。没有导出 EDITOR 变量，它对 python 脚本是不可见的。因此，对于那些有此错误的人，您需要执行以下操作：

```
$ EDITOR=/usr/bin/vim
$ echo $EDITOR
/usr/bin/vim
$ export EDITOR 
```

对我来说，我的 vim 版本似乎确实有`netbeans_intg`并`autocmd`支持（pyclewn 需要）。它没有`python3`支持。你可以通过键入来解决这个问题`vim --version`。我不确定是否在过去的某个时候我替换了 OS X 附带的 vim 版本，或者现在是否是这样。我不知道为什么我会修改/替换`/usr/bin/`版本，所以我认为它现在是标准的。希望这对其他人有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T11:14:38.680

我对 pyclewn 没有实际经验，但从你的问题中可以看出一些事情：

*   您使用的是 Mac OS X 附带的默认 Vim。AFAIK，它既没有 Python 支持，也没有 netbeans 接口。基本上，没有办法以这种方式获得有效的 pyclewn 安装（更不用说令人信服的编辑环境了）。我建议你得到一个像 MacVim 这样的适当的 Vim 构建，AFAIK 提供了你需要的一切。假设您已将捆绑`mvim`脚本移动`$PATH`到`pyclewn --editor=/path/to/mvim`.

*   虽然您*可以*在 X11 下的 Mac 上安装基于 GTK 的 GVim，但我认为您不应该走这条路。这会给你一个正确的`gvim`命令，但你可能会在其他方面松懈。

# javascript - 为什么我的复选框更改事件没有触发？

> ID：15986976
> 
> 赞同：2
> 
> 时间：2013-04-13T10:46:08.650
> 
> 标签：javascript, jquery

第一个函数将 div 单击转换为自定义的选中/未选中切换。第二个函数将复选框更改转换为选中/取消选中事件（这很好）。

问题是当我使用第一个函数来选中/取消选中该框时，没有调用第三个函数。我是javascript新手，谢谢。

```
 $(document).ready(function() {
/*
  Progressive enhancement.  If javascript is enabled we change the body class.  Which in turn hides the checkboxes with css.
*/
$('body').attr("class","js");

/*
  Add toggle switch after each checkbox.  If checked, then toggle the switch.
*/
 $('.checkbox').after(function(){
   if ($(this).is(":checked")) { 
     return "<a href='#' class='toggle checked' ref='"+$(this).attr("id")+"'></a>";

   }else{
     return "<a href='#' class='toggle' ref='"+$(this).attr("id")+"'></a>";

   }

 });

 /*
  When the toggle switch is clicked, check off / de-select the associated checkbox
 */
$('.toggle').click(function(e) {
   var checkboxID = $(this).attr("ref");
   var checkbox = $('#'+checkboxID);

   if (checkbox.is(":checked")) { 
     checkbox.removeAttr("checked");

   }else{
     checkbox.attr("checked","true");
   }
   $(this).toggleClass("checked");

   e.preventDefault();
});

});

$(document).ready(function(){

$(":checkbox").change(function(){

if ($(this).is(":checked")) {  $(el).layerSlider('start');
}else{ $(el).layerSlider('stop');}
});

 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:40:57.210

要将事件添加到动态内容（在本例中为动态锚元素），您必须使用 live 或 on 功能。

对于 1.7 之前的 jquery 版本，您必须使用 Live 功能。

```
$('.toggle').live("click", function (e) {   
        var checkboxID = $(this).attr("ref");
        var checkbox = $('#' + checkboxID);

        if (checkbox.is(":checked")) {
            checkbox.prop('checked', false);

        } else {
            checkbox.prop('checked', true);  //jQuery 1.6+
        }
        e.preventDefault();
    }); 
```

从 jQuery 1.7+ 开始，Live 被弃用，从 1.9+ 开始，Live 被移除。所以，如果你使用 jQuery 1.9+，请使用 On。

```
$('.toggle').on("click",function (e) {   
        var checkboxID = $(this).attr("ref");
        var checkbox = $('#' + checkboxID);

        if (checkbox.is(":checked")) {
            checkbox.prop('checked',false);

        } else {
            checkbox.prop('checked', true);  //jQuery 1.6+
        }
        e.preventDefault();
    }); 
```

并且还使用道具功能来检查/取消选中复选框。（道具是从 jQuery 1.6 添加的）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-13T10:50:28.293

您需要在复选框上触发更改事件，而不是单击

# asp.net-mvc - 如何在 asp.net MVC 4 和 Razor 视图中显示路径中的图像？

> ID：15986980
> 
> 赞同：67
> 
> 时间：2013-04-13T10:46:30.447
> 
> 标签：asp.net-mvc, image, razor

我有以下模型：

```
public class Player
{

    public String ImagePath
    {
        get
        {
            return "~/Content/img/sql_error.JPG";
        }

    } 
```

而且，这是我的`.cshtml`文件：

```
@model SoulMasters.Models.Game.Player

@{
ViewBag.Title = "Game";
Layout = "~/Views/Shared/_GameLayout.cshtml";
var imagePath = @Model.ImagePath;
}

<fieldset>
<legend>Player</legend>

   <div class="display-field">
    @Html.DisplayFor(model => model.ImagePath)
</div>
@imagePath
<div style="padding:10px;">

    <img src=@imagePath alt="Sample Image" width="300px" />

    <img  alt="asd" >
        model.ImagePath;
    </img>
</div>
</fieldset> 
```

结果是简单的文本：

```
~/Content/img/sql_error.JPG
~/Content/img/sql_error.JPG
Sample Image asd model.ImagePath; 
```

另外，我尝试了以下行，它可以工作：

```
<img src="~/Content/img/sql_error.JPG" alt="Sample Image" width="300px" /> 
```

如何从路径显示该图像？图像路径会根据设置而有所不同吗？还有其他想法吗？

我现在不太了解剃刀语法的工作原理。

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-04-13T11:27:51.560

在您的视图中尝试这样

```
 <img src= "@Url.Content(Model.ImagePath)" alt="Image" /> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-10-02T11:45:56.020

你也可以试试这个答案：

```
 <img src="~/Content/img/@Html.DisplayFor(model =>model.ImagePath)" style="height:200px;width:200px;"/> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-02T09:18:02.550

尝试这个 ，

```
<img src= "@Url.Content(Model.ImagePath)" alt="Sample Image" style="height:50px;width:100px;"/>

(or)

<img src="~/Content/img/@Url.Content(model =>model.ImagePath)" style="height:50px;width:100px;"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-26T06:22:26.227

```
 @foreach (var m in Model)
    {
      <img src="~/Images/@m.Url" style="overflow: hidden; position: relative; width:200px; height:200px;" />
    } 
```

# database - 管道将命令插入 psql 工具

> ID：15986981
> 
> 赞同：0
> 
> 时间：2013-04-13T10:46:32.297
> 
> 标签：database, perl, postgresql, psql

我需要创建一个 perl 脚本，它接受 2 个参数（int runid 和 int iters），然后通过在 iters 次重复插入一个具有关联 runid 的随机数来填充 postgresql 数据库中的一个表。我有这个简单的脚本可以与 DBI 一起使用，DBI 是 perl 最常用的数据库接口，但是，我认为这应该可以通过管道插入命令到 postgresql 的 psql 工具中来实现。但是，我对如何开始感到困惑。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:20:31.527

您也可以只使用一个简单的 SQL 命令[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html)：

```
INSERT INTO tbl (runid, rnd_col)
SELECT <runid>, (random()*1000)::int
FROM   generate_series(1, <iters>) 
```

这将插入`iters`具有 0 到 1000 之间随机`integer`数的行。适应您的需要。将比您可能想出的任何脚本都快。

来自 psql：

```
psql $connection_parameters -c $SQL_from_above 
```

# android - Viewpager 不要破坏/保存被破坏的页面

> ID：15986983
> 
> 赞同：2
> 
> 时间：2013-04-13T10:46:37.573
> 
> 标签：android, android-asynctask, android-viewpager

我有 viewpager 和 asynctask 在一起。我正在毫无问题地显示内容。

但; 当我向页面添加单选按钮（用于多项选择题）时，在我在内容之间滑动后，之前选中的选项未选中。我想保存这个选中的选项

寻呼机适配器：

```
public class QuestionPagerAdapter extends PagerAdapter{

    public QuestionPagerAdapter(){
        super();

    }
    @Override
    public int getCount() {
        int qcount = QuestionPagerAdapter.q.getQuestionCount();
        return qcount;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == ((View) object);
    }

    @Override
    public Object instantiateItem(View collection, int pos) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        //View v = null;
        Context mycontext = collection.getContext();
        View page = inflater.inflate(R.layout.page_quiz, null);
        TextView tv = (TextView)page.findViewById(R.id.questionText);

            FetchTask fft = new FetchTask(tv);
        fft.execute(pos);

        ((ViewPager) collection).addView(page, 0);
        return page;
    }

    @Override
    public void destroyItem(View collection, int position, Object view) {
        //Util.Log("destroying" + position);
        ((ViewPager) collection).removeView((View) view);
    }

} 
```

异步任务：

```
public  class FetchTask extends AsyncTask<Integer, Void, ArrayList<String>>  {

        TextView outTxt;

        public FetchTask(TextView outputTxt, LinearLayout linlay, RadioGroup mrg, Context dcontext) {

                outTxt = outputTxt;             

                } 

        @Override
        protected ArrayList<String> doInBackground(Integer... uri) {

            ArrayList<String> result = new ArrayList<String>();

                result.add(uri[0] + " " );

            return result;
        }

        @Override
        protected void onPostExecute(ArrayList<String> result) {
            super.onPostExecute(result);

            outTxt.setText(result.get(0));

        }

    } 
```

# php - XAMPP PHP 端口？file_get_contents_curl 退出工作

> ID：15986991
> 
> 赞同：0
> 
> 时间：2013-04-13T10:47:44.900
> 
> 标签：php, curl, xampp, port

我一直在为搜索引擎编写程序，但现在我已经完成了我的索引器（大约 50 个），我想运行至少 20 个，但每次我使用超过 10 个时，似乎 file_gets_contents_curl

```
function file_get_contents_curl($url) {
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $url);

    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
} 
```

退出工作。我希望你知道我在说什么，因为我不知道很多东西

我可以在任何地方更改 php.ini 以避免此错误吗？

感谢您的帮助

编辑错误日志

```
[Sat Apr 13 00:27:09.571840 2013] [core:warn] [pid 720:tid 336] AH00098: pid file C:/xampp/apache/logs/httpd.pid overwritten -- Unclean shutdown of previous Apache run?

[Sat Apr 13 00:27:09.644889 2013] [ssl:warn] [pid 720:tid 336] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]

[Sat Apr 13 00:27:09.690919 2013] [mpm_winnt:notice] [pid 720:tid 336] AH00455: Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7 configured -- resuming normal operations

[Sat Apr 13 00:27:09.690919 2013] [mpm_winnt:notice] [pid 720:tid 336] AH00456: Server built: Aug 18 2012 12:41:37

[Sat Apr 13 00:27:09.690919 2013] [core:notice] [pid 720:tid 336] AH00094: Command line: 'c:\\xampp\\apache\\bin\\httpd.exe -d C:/xampp/apache'

[Sat Apr 13 00:27:09.691920 2013] [mpm_winnt:notice] [pid 720:tid 336] AH00418: Parent: Created child process 6876

[Sat Apr 13 00:27:10.196255 2013] [ssl:warn] [pid 6876:tid 360] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]

[Sat Apr 13 00:27:10.241286 2013] [mpm_winnt:notice] [pid 6876:tid 360] AH00354: Child: Starting 150 worker threads. 
```

# javacard - 我如何获取java卡中的AID列表？

> ID：15986992
> 
> 赞同：0
> 
> 时间：2013-04-13T10:47:54.667
> 
> 标签：javacard

我想在一个 java 卡中获得所有的 AID。我不知道我在做什么？有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T18:54:39.850

在全球平台兼容卡中并使用 gpshell，您可以使用带有“-element e0”参数的 get_status 命令。

从手册页：get_status -element e0 列出小程序和包以及安全域

您可能需要事先选择卡管理器并创建一个安全通道（使用 select 和 open_sc 命令）

您可以在 gpshell 源代码（list*.txt 文件）上查看不同开发智能卡的小程序列表示例

# android - 放大地图滞后

> ID：15986993
> 
> 赞同：1
> 
> 时间：2013-04-13T10:48:20.577
> 
> 标签：android, canvas, android-mapview

当我有大变焦时，我遇到了应用程序滞后的问题。我有带有标记和区域的地图，当我放大地图时，地图会滞后。我一直在寻找解决方案，但我没有找到。

请帮我处理这段代码。

我不知道如何解决它。

这是我的代码：

```
public class LiniaOverlay extends Overlay {

    private List<GeoPoint> m_areas;
    private Paint m_paintFill;
    private Paint m_paintStroke;
    private static final int ALPHA = 0x30ffffff;
    private static int COLORS = Color.YELLOW;
    Path areaPaths;
    static {LiniaOverlay.COLORS &= LiniaOverlay.ALPHA;}

    public LiniaOverlay(final List<GeoPoint> points) {
        m_areas = points;
        m_paintFill = new Paint();
        m_paintFill.setStyle(Paint.Style.FILL);
        m_paintStroke = new Paint(Paint.ANTI_ALIAS_FLAG);
        m_paintStroke.setStyle(Style.STROKE);
        m_paintStroke.setAntiAlias(true);
        m_paintStroke.setStrokeWidth(3);
    }

    @Override
    public void draw(final Canvas canvas, final MapView mapView, final boolean shadow) {
        super.draw(canvas, mapView, shadow);
        if (shadow) {
            return;
        }
        Projection projection = mapView.getProjection();
        areaPaths = getPath(projection, m_areas);
        drawPaths(canvas, areaPaths);
    }

    private Path getPath(final Projection projection, final List<GeoPoint> areas) {     
        Path path = new Path();
        path.setFillType(Path.FillType.EVEN_ODD);
        Iterator<GeoPoint> it = areas.iterator();
        Point point = nextDrawPoint(projection, it);
        path.moveTo(point.x, point.y);
        while (it.hasNext()) 
        {
                point = nextDrawPoint(projection, it);
                path.lineTo(point.x, point.y);
        }
        path.close();
        return path;
    }
    private void drawPaths(final Canvas canvas, final Path path) {
       int currentColor = LiniaOverlay.COLORS;
       m_paintStroke.setColor(currentColor & 0xff7f7f7f);
       canvas.drawPath(path, m_paintStroke);
       int currentColor2 = LiniaOverlay.COLORS;
       m_paintFill.setColor(currentColor2);
       canvas.drawPath(path, m_paintFill);    
    }

    private Point nextDrawPoint(final Projection projection, final Iterator<GeoPoint> it) {
        GeoPoint geo = it.next();
        Point p = new Point();
        projection.toPixels(geo, p);
        return p;
    }
} 
```

请帮我。

# android - 使用 andEngine 的级别选择器。一切都是黑色的？

> ID：15986998
> 
> 赞同：1
> 
> 时间：2013-04-13T10:49:03.407
> 
> 标签：android, andengine, game-engine

我开始在 AndEngine 上工作，我学到了很多东西，但我一直在为我的游戏创建关卡选择器。我知道这与 getTextureManager() 有关，因为我在尝试将 ITextureRegion 附加到我的精灵对象时经历了这个，我解决了，但这次我在最后一天无处可去。

mainActivity.java

```
import org.andengine.engine.camera.Camera;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.WakeLockOptions;
import org.andengine.engine.options.resolutionpolicy.FillResolutionPolicy;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.scene.background.Background;
import org.andengine.opengl.font.FontFactory;
import org.andengine.opengl.texture.ITexture;
import org.andengine.opengl.texture.TextureManager;
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas;
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory;
import org.andengine.opengl.texture.atlas.bitmap.BuildableBitmapTextureAtlas;
import org.andengine.opengl.texture.atlas.bitmap.source.IBitmapTextureAtlasSource;
import org.andengine.opengl.texture.atlas.buildable.builder.BlackPawnTextureAtlasBuilder;
import org.andengine.opengl.texture.atlas.buildable.builder.ITextureAtlasBuilder.TextureAtlasBuilderException;
import org.andengine.opengl.texture.region.ITextureRegion;
import org.andengine.opengl.texture.region.TextureRegion;
import org.andengine.ui.activity.SimpleBaseGameActivity;
import org.andengine.util.color.Color;

import android.graphics.Typeface;
import android.util.Log;

public class Main_Activity extends SimpleBaseGameActivity {
    EngineOptions engine;
    Camera mCamera;
    private static final int WIDTH = 800;
    private static final int HEIGHT = 480;
    LevelSelector ls;
    Scene mScene;
    public org.andengine.opengl.font.Font   mFont;
    ITextureRegion mTextureRegion;

    @Override
    public EngineOptions onCreateEngineOptions() {  
        mCamera = new Camera(0, 0, WIDTH, HEIGHT);
        engine = new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new FillResolutionPolicy(), mCamera);
        engine.setWakeLockOptions(WakeLockOptions.SCREEN_ON);

        return engine;
    }

    @Override
    protected void onCreateResources() {
    BuildableBitmapTextureAtlas mBitmapTextureAtlas = new BuildableBitmapTextureAtlas(this.getTextureManager() ,32 , 32);

        mTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(mBitmapTextureAtlas, this, "marble.png");

        try {
            mBitmapTextureAtlas.build(new BlackPawnTextureAtlasBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(0, 1, 1));
            mBitmapTextureAtlas.load();
        } catch (TextureAtlasBuilderException e) {
            Log.e("", ""+e);
        }

        this.mFont = FontFactory.create(this.getFontManager(), this.getTextureManager(), 256, 256, Typeface.create(Typeface.DEFAULT, Typeface.BOLD), 32);
        this.mFont.load();
    }

    @Override
    protected Scene onCreateScene() {
        mScene = new Scene();
        mScene.setBackground(new Background(0.09804f, 0.6274f, 0.8784f));
        ls = new LevelSelector(5, 2, WIDTH, HEIGHT, mScene, mEngine);
        ls.createTiles(mTextureRegion, mFont);
        ls.show();
        return mScene;
    }

} 
```

层选择器.java

```
import org.andengine.engine.options.EngineOptions;
import org.andengine.entity.Entity;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.sprite.Sprite;
import org.andengine.entity.text.Text;
import org.andengine.input.touch.TouchEvent;
import org.andengine.opengl.font.Font;
import org.andengine.opengl.texture.region.ITextureRegion;
import org.andengine.opengl.texture.region.TextureRegion;

import android.service.wallpaper.WallpaperService.Engine;

public class LevelSelector extends Entity {
    /* Level selector layer properties */
    private final int COLUMNS = 6;
    private final int ROWS = 6;

    /* Level selector tile properties */
    private final int TILE_DIMENSION = 50;
    private final int TILE_PADDING = 15;

    private final Scene mScene;
    private final org.andengine.engine.Engine mEngine;

    /*
     * The mChapter variable can allow each LevelSelector object to contain
     * level tiles which begin levels in different chapters.
     */
    private final int mChapter;

    /* Variable containing the current max level unlocked */
    private final int mMaxLevel;

    /* Camera width and height are needed for the layout */
    private final int mCameraWidth;
    private final int mCameraHeight;

    /* Initial x/y coordinates used for tile positioning */
    private final float mInitialX;
    private final float mInitialY;

    /*
     * Variable which defines whether the LevelSelector is hidden or visible
     */
    private boolean mHidden = true;

    /**
     * The LevelSelector object can be used to display a grid of level tiles for
     * user selection.
     * 
     * @param pMaxLevel
     *            Current max unlocked level.
     * @param pChapter
     *            Chapter/world number of this particular LevelSelector.
     * @param pCameraWidth
     *            Camera object's width value.
     * @param pCameraHeight
     *            Camera object's height value.
     * @param pScene
     *            The Scene in which the LevelSelector will be displayed on.
     * @param pEngine
     *            AndEngine's mEngine object.
     */
    public LevelSelector(final int pMaxLevel, final int pChapter,
            final int pCameraWidth, final int pCameraHeight,
            final Scene pScene, final org.andengine.engine.Engine pEngine) {
        /* Initialize member variables */
        this.mScene = pScene;
        this.mEngine = pEngine;
        this.mChapter = pChapter;
        this.mMaxLevel = pMaxLevel;
        this.mCameraWidth = pCameraWidth;
        this.mCameraHeight = pCameraHeight;

        /*
         * Obtain the initial tile's X coordinate by subtracting half of the
         * entire level selector width including all tiles and padding from the
         * center of the Scene
         */
        final float halfLevelSelectorWidth = ((TILE_DIMENSION * COLUMNS) + TILE_PADDING
                * (COLUMNS - 1)) * 0.5f;
        this.mInitialX = (this.mCameraWidth * 0.5f) - halfLevelSelectorWidth;

        /* Same math as above applies to the Y coordinate */
        final float halfLevelSelectorHeight = ((TILE_DIMENSION * ROWS) + TILE_PADDING
                * (ROWS - 1)) * 0.5f;
        this.mInitialY = (this.mCameraHeight * 0.5f) + halfLevelSelectorHeight;
        mEngine.getTextureManager();
    }

    /**
     * Create the level tiles with a customized ITextureRegion representation as
     * well as a customized Font.
     * 
     * @param pTextureRegion
     *            The ITextureRegion to supply each of the level tiles.
     * @param pFont
     *            The Font to be displayed by Text written on the tiles,
     *            specifying tile level number for example.
     */
    public void createTiles(final ITextureRegion pTextureRegion,
            final org.andengine.opengl.font.Font pFont) {

        /* Temp coordinates for placing level tiles */
        float tempX = this.mInitialX + TILE_DIMENSION * 0.5f;
        float tempY = this.mInitialY - TILE_DIMENSION * 0.5f;

        /* Current level of the tile to be placed */
        int currentTileLevel = 1;

        /*
         * Loop through the Rows, adjusting tempY coordinate after each
         * iteration
         */
        for (int i = 0; i < ROWS; i++) {

            /*
             * Loop through the column positions, placing a LevelTile in each
             * column
             */
            for (int o = 0; o < COLUMNS; o++) {

                final boolean locked;

                /* Determine whether the current tile is locked or not */
                if (currentTileLevel <= mMaxLevel) {
                    locked = false;
                } else {
                    locked = true;
                }

                /* Create a level tile */
                LevelTile levelTile = new LevelTile(tempX, tempY, locked,
                        currentTileLevel, pTextureRegion, pFont);

                /*
                 * Attach the level tile's text based on the locked and
                 * currentTileLevel variables pass to its constructor
                 */
                levelTile.attachText();

                /* Register & Attach the levelTile object to the LevelSelector */
                mScene.registerTouchArea(levelTile);
                this.attachChild(levelTile);

                /* Increment the tempX coordinate to the next column */
                tempX = tempX + TILE_DIMENSION + TILE_PADDING;

                /* Increment the level tile count */
                currentTileLevel++;
            }

            /* Reposition the tempX coordinate back to the first row (far left) */
            tempX = mInitialX + TILE_DIMENSION * 0.5f;

            /* Reposition the tempY coordinate for the next row to apply tiles */
            tempY = tempY - TILE_DIMENSION - TILE_PADDING;
        }
    }

    /**
     * Display the LevelSelector on the Scene.
     */
    public void show() {

        /* Register as non-hidden, allowing touch events */
        mHidden = false;

        /* Attach the LevelSelector the the Scene if it currently has no parent */
        if (!this.hasParent()) {
            mScene.attachChild(this);
        }

        /* Set the LevelSelector to visible */
        this.setVisible(true);
    }

    /**
     * Hide the LevelSelector on the Scene.
     */
    public void hide() {

        /* Register as hidden, disallowing touch events */
        mHidden = true;

        /* Remove the LevelSelector from view */
        this.setVisible(false);
    }

    public class LevelTile extends Sprite {

        /*
         * The LevelTile should keep track of level number and lock status. Feel
         * free to add additional data within level tiles
         */
        private final boolean mIsLocked;
        private final int mLevelNumber;
        private final org.andengine.opengl.font.Font mFont;
        private Text mTileText;

        /*
         * Each level tile will be sized according to the constant
         * TILE_DIMENSION within the LevelSelector class
         */
        public LevelTile(float pX, float pY, boolean pIsLocked,
                int pLevelNumber, ITextureRegion pTextureRegion, org.andengine.opengl.font.Font pFont) {
            super(pX, pY, LevelSelector.this.TILE_DIMENSION,
                    LevelSelector.this.TILE_DIMENSION, pTextureRegion,
                    LevelSelector.this.mEngine.getVertexBufferObjectManager());

            /* Initialize the necessary variables for the LevelTile */
            this.mFont = pFont;
            this.mIsLocked = pIsLocked;
            this.mLevelNumber = pLevelNumber;
        }

        /* Method used to obtain whether or not this level tile represents a
         * level which is currently locked */
        public boolean isLocked() {
            return this.mIsLocked;
        }

        /* Method used to obtain this specific level tiles level number */
        public int getLevelNumber() {
            return this.mLevelNumber;
        }

        /*
         * Attach the LevelTile's text to itself based on whether it's locked or
         * not. If not, then the level number will be displayed on the level
         * tile.
         */
        public void attachText() {

            String tileTextString = null;

            /* If the tile's text is currently null... */
            if (this.mTileText == null) {

                /*
                 * Determine the tile's string based on whether it's locked or
                 * not
                 */
                if (this.mIsLocked) {
                    tileTextString = "Locked";
                } else {
                    tileTextString = String.valueOf(this.mLevelNumber);
                }

                /* Setup the text position to be placed in the center of the tile */
                final float textPositionX = LevelSelector.this.TILE_DIMENSION * 0.5f;
                final float textPositionY = textPositionX;

                /* Create the tile's text in the center of the tile */
                this.mTileText = new Text( textPositionX,
                        textPositionY, this.mFont,
                        tileTextString, tileTextString.length(),
                        LevelSelector.this.mEngine
                                .getVertexBufferObjectManager());

                /* Attach the Text to the LevelTile */
                this.attachChild(mTileText);
            }
        }

        @Override
        public boolean onAreaTouched(TouchEvent pSceneTouchEvent,
                float pTouchAreaLocalX, float pTouchAreaLocalY) {

            /* If the LevelSelector is not hidden, proceed to execute the touch
             * event */
            if (!LevelSelector.this.mHidden) {

                /* If a level tile is initially pressed down on */
                if (pSceneTouchEvent.isActionDown()) {
                    /* If this level tile is locked... */
                    if (this.mIsLocked) {
                        /* Tile Locked event... */
                        LevelSelector.this.mScene.getBackground().setColor(
                                org.andengine.util.color.Color.RED);
                    } else {
                        /* Tile unlocked event... This event would likely prompt
                         * level loading but without getting too complicated we
                         * will simply set the Scene's background color to green */
                        LevelSelector.this.mScene.getBackground().setColor(
                                org.andengine.util.color.Color.GREEN);

                        /**
                         * Example level loading:
                         *      LevelSelector.this.hide();
                         *      SceneManager.loadLevel(this.mLevelNumber);
                         */
                    }
                    return true;
                }
            }
            return super.onAreaTouched(pSceneTouchEvent, pTouchAreaLocalX,
                    pTouchAreaLocalY);
        }
    }
} 
```

仅供参考，此代码属于使用 AndEngine 手册进行 Android 游戏开发的代码包。我编辑了一些变量，如 font 和 engine ，但我没有改变程序的逻辑或流程。

现在当我运行它时，我得到下面的屏幕![在此处输入图像描述](https://i.stack.imgur.com/QUX9L.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:05:56.723

好吧，我解决了我的问题，它是我使用的填充，它不应该存在。

```
 try {
            mBitmapTextureAtlas.build(new BlackPawnTextureAtlasBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(0, 1, 1));
            mBitmapTextureAtlas.load();
        } catch (TextureAtlasBuilderException e) {
            Log.e("", ""+e);
        } 
```

它应该是

尝试 {

```
 mBitmapTextureAtlas.build(new BlackPawnTextureAtlasBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(0, 0, 0));
    mBitmapTextureAtlas.load();
} catch (TextureAtlasBuilderException e) {
    Log.e("", ""+e);
} 
```