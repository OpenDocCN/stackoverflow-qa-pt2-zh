# StackOverflow 问答 14377000-14377999

# javascript - 父级刷新 - JavaScript

> ID：14377001
> 
> 赞同：1
> 
> 时间：2013-01-17T10:30:32.617
> 
> 标签：javascript, html

我使用下面的 JS 刷新父页面，但我收到以下消息

代码：

```
 window.opener.document.location.reload(); 
 window.close(); 
```

请帮助我如何避免这种情况

![在此处输入图像描述](../Images/9bde162b1368336b0e5321864b5522d8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:33:15.447

您可以避免`POST`在需要刷新之前使用或设置 location 属性而不是使用`reload`：

```
window.opener.document.location = window.opener.document.location; 
```

`post`另一种选择是在请求完成后直接重定向父页面。之后，孩子可以在没有弹出窗口的情况下刷新页面。

# python - Jinja2 子串整数

> ID：14377002
> 
> 赞同：0
> 
> 时间：2013-01-17T10:30:33.380
> 
> 标签：python, substring, jinja2

我有一个问题，我试图用 Jinja2 解决差异方式。我有一个保存在数据库中的号码。当我打印原始号码时，例如：**907333-5000**。我希望以这种格式打印该号码：**(907) 333-5000**，但我不知道该如何处理 Jinja2。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:04:06.413

或者您可以为电话号码创建一个过滤器，例如 {{ phone_number|phone }}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T11:42:56.080

我猜这个数字作为字符串存储在你的数据库中。

你能做的——

```
{% print "("+num[:3]+") "+num[3:] %} 
```

您要打印电话号码的位置。

# c# - 如何在c#中用冒号进行索引

> ID：14377008
> 
> 赞同：0
> 
> 时间：2013-01-17T10:30:53.427
> 
> 标签：c#, indexing

我想使用`A[:,2]`在编程语言中非常普遍的语法访问该类的实例。

假设，我有一些类`ClassA`，其属性中有一个二维双精度数组，`Content`并创建了它的一个实例 A。

如果我想通过 访问`A.Content[2,3]`，`A[2,3]`我需要在 ClassA 内部构建这个方法：

```
public double this[int i, int j]
{
    get
    {
        return this.Content[i,j];
    }
    set
    {
        this.Content[i,j]=value;
    }
} 
```

现在，我可以做到`"A[2,3]"`。
作为下一步，我也想做`"A[2,:]"`（输出将是一维数组），我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:36:03.287

我不相信这是可能的，因为 C# 语言中没有这样的语法（据我所知）。

也许您可以使用某种方法`GetRow(2)`或类似的方法。

```
public double[] GetRow(int rowNumber)
{
    var result = new double[this.Content.GetLength(0)];
    for(var i=0; i<result.Length; i++)
    {
        result[i] = this.Content[rowNumber, i];
    }
    return result;
} 
```

a 的相同逻辑`GetColumn`应该很简单。

# perl - 什么决定了 Devel::Peek 的 LEN 值

> ID：14377009
> 
> 赞同：2
> 
> 时间：2013-01-17T10:30:55.207
> 
> 标签：perl

为什么`LEN`从过去的`Dump`80 年来到这里？

```
#!/usr/bin/env perl
use warnings;
use strict;
use 5.10.1;
use Devel::Peek;

my $a = 'a';
Dump $a;

print 'Enter an "a": ';
$a = <>;
chomp $a;
Dump $a;

my $b = 'a';
Dump $b;

print 'Enter an "a": ';
my $c = <>;
chomp $c;
Dump $c; 
```

输出：

```
SV = PV(0x125b090) at 0x127e018
REFCNT = 1
FLAGS = (PADMY,POK,pPOK)
PV = 0x126df80 "a"\0
CUR = 1
LEN = 16
Enter an "a": a
SV = PV(0x125b090) at 0x127e018
REFCNT = 1
FLAGS = (PADMY,POK,pPOK)
PV = 0x126df80 "a"\0
CUR = 1
LEN = 16
SV = PV(0x125b190) at 0x127e0d8
REFCNT = 1
FLAGS = (PADMY,POK,pPOK)
PV = 0x1290da0 "a"\0
CUR = 1
LEN = 16
Enter an "a": a
SV = PV(0x125b1a0) at 0x128f260
REFCNT = 1
FLAGS = (PADMY,POK,pPOK)
PV = 0x1285c70 "a"\0
CUR = 1
LEN = 80 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:02:15.863

因为在您的定义中`$c`，您从 STDIN 设置了它，解释器可能为该操作预先分配了一些空间，以减少以后必须分配更多空间的可能性。

一般来说，Perl 像喝醉的水手一样消耗内存，而不是潜在地损害性能。一旦分配了一些内存，除非您的操作系统内存不足，否则它永远不会被释放。

# visual-studio-2010 - 配置 Nuget 以下载不属于任何项目但在存储库中需要的包

> ID：14377010
> 
> 赞同：0
> 
> 时间：2013-01-17T10:30:57.670
> 
> 标签：visual-studio-2010, c#-4.0, nuget, nuget-package

我已将 nuget 配置为下载所有包，这些包用于解决方案的所有项目，但我还有几个 nuget 包，它们不属于任何项目/proejct 的包文件，但我们需要它来下载其他功能。

您能帮我配置 nuget/pre-build，以便它还可以自动下载一些不属于任何项目的 package.config 文件的其他包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:04:32.447

您可以在解决方案目录的根目录或标准位置拥有一个独立的 packages.config 文件，并在预构建事件中使用“Nuget.exe install packages.config”命令来安装包。

# html - 给列表编号的正确方法是什么？

> ID：14377019
> 
> 赞同：3
> 
> 时间：2013-01-17T10:31:20.243
> 
> 标签：html, css, html-lists

> **可能重复：**
> [在 HTML 中编号嵌套的有序列表](https://stackoverflow.com/questions/2729927/number-nested-ordered-lists-in-html)

道歉，因为我有点 CSS 菜鸟。

我有一份条款和条件清单。

每个部分的编号如下：

```
1.0 This Website
1.1 This website...
1.2 etc etc

2.0 ...
2.1 ...
2.2 ... 
```

我知道我可以使用有序列表，但据我了解，“开始”属性已贬值。

我有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:20:38.303

[从Mozilla](https://developer.mozilla.org/en-US/docs/CSS/Counters)窃取- 使用 CSS 计数器

[JSFiddle](http://jsfiddle.net/yV43N/1/)

HTML：

```
<ol class="level0">
  <li>This Website
    <ol>
      <li>This website</li>
      <li>etc etc</li>
    </ol>
  </li>
  <li>...
    <ol>
      <li>...</li>
      <li>...</li>
    </ol>
  </li>
</ol> 
```

CSS：

```
ol {
  counter-reset: section;
  list-style-type: none;
}

ol.level0 > li:before {
  counter-increment: section;
  content: counters(section, ".") ".0 ";
}

li:before {
  counter-increment: section;
  content: counters(section, ".") " ";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:35:22.723

您还可以使用[list-style-type](https://developer.mozilla.org/en-US/docs/CSS/list-style-type) css 属性。

```
ol { list-style-type: decimal; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T11:21:10.620

您可以为此使用**反增量**。像这样写： **HTML**

```
<ol>
  <li>item 1
    <ol>
      <li>sub item 1</li>
      <li>Sub item 2</li>
   </ol>
  </li>
  <li>item 2
    <ol>
      <li>sub item 1</li>
      <li>Sub item 2</li>
   </ol>
  </li>
</ol> 
```

**CSS**

```
ol {
  counter-reset: section;
  list-style-type: none;
}     
ol li { counter-increment: section; }

ol li:before  { content: counters(section, ".") ". "; } 
```

检查这个[http://jsfiddle.net/xC8ne/10/](http://jsfiddle.net/xC8ne/10/)

检查此以获取更多[HTML 中的 Number 嵌套有序列表](https://stackoverflow.com/questions/2729927/number-nested-ordered-lists-in-html)

# scala - 使用 Scala Slick 进行外部连接

> ID：14377023
> 
> 赞同：2
> 
> 时间：2013-01-17T10:31:31.040
> 
> 标签：scala, slick

我有两张桌子，`User`并且`UserBusinessPartnerIds`

`User(id, name, email, whatever)`

`UserBusinessPartnerIds(userId, bpId)`

我正在尝试检索用户和业务合作伙伴 ID 列表。

以下查询工作正常！

```
database withSession { implicit session: Session =>
      val query = (for {
        (user, userBpid) <- Users leftJoin UserBusinessPartners on (_.id is _.userId)
          if user.email === email &&
             user.password === password &&
             user.active === true &&
             userBpid.dateFrom < today &&
             userBpid.dateTo > today
      } yield (user.id, userBpid.bpId.?))

      val results = query.list

      results.headOption.map( row  => User(row._1, email, password, results.map(_._2).flatten.toSet))
    } 
```

诚然，代码的结尾令人发指。但是无所谓。

问题是，我希望做一个 OUTER join。因此，如果用户在另一个表中没有与业务伙伴 ID 对应的行，我仍然想获取该用户。

有任何想法吗？

编辑 - 将问题编辑为实际上是正确的。我仍然想返回一个用户，即使他们没有与之关联的业务合作伙伴 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:37:02.220

emmmm，生成的sql是什么样子的？应该是左外连接。

我怀疑问题出在：

```
userBpid.dateFrom < today && userBpid.dateTo > today 
```

由于将条件应用于潜在的空值，因此无法返回用户 + 空用户合作伙伴行；即，当关联的业务伙伴 ID 行不存在时，它们将永远不会返回 true。

作为测试，请`println(q.sqlStatement)`在查询日志中执行或查看，并在有或没有上述查询条件的情况下手动运行查询。

**编辑** 未测试，但试试这个，别名用户业务表，一个内部，一个外部。你可能会得到一个非唯一表别名编译器错误，在我之前尝试使用一些外连接魔术时发生在我身上

```
val q = 
  for{
    (u,upo) <- Users leftJoin UserBusinessPartners on (_.id is _.userId)
      if(u.email is email) && (u.password is password) && (u.active is true)
    up <- UserBusinessPartners
      if(u.id is up.userId) && (up.dateFrom < today) && (up.dateTo > today)
    _ <- Query groupBy(u.id)
  } yield (u.id, upo.bpId.?) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-08T11:50:49.537

您需要在加入之前过滤 UserBusinessPartners 表，这将为您提供没有业务合作伙伴的用户。就像是 ：

```
database withSession { implicit session: Session =>
  userBP = UserBusinessPartners.filter(ubp => ubp.dateFrom < today && ubp.dateTo > today)
  val query = (for {
    (user, userbp) <- Users leftJoin userBP on (_.id is _.userId)
      if user.email === email &&
         user.password === password &&
         user.active === true 
  } yield (user.id, userbp.bpId.?))

  val results = query.list

  results.headOption.map( row  => User(row._1, email, password, results.map(_._2).flatten.toSet))
} 
```

过滤器将向您显示仅包含所需业务合作伙伴的表视图，左连接将列出所有用户。

您的查询失败，因为：

> userBpid.dateFrom < 今天 && userBpid.dateTo > 今天

因为由于上述条件，使用 null userBpid 选择的行将被过滤掉。

# javascript - 在 tddium 上访问运行 时编译的 application.js

> ID：14377024
> 
> 赞同：0
> 
> 时间：2013-01-17T10:31:38.887
> 
> 标签：javascript, ruby-on-rails, ruby, assets

在本地我的 application.js 很好。但是在 tddium 上运行我的测试时，javascript 不起作用。在失败的规范中转储 page.error_messages（来自 capybara-webkit）后，我看到：

```
{:line_number=>26654, :message=>"SyntaxError: Parse error", :source=>"http://127.0.0.1:35634/assets/application.js"} 
```

因此，因为该文件是在 tddium 上运行时编译（但未压缩）的。我必须得到它，看看那里出了什么问题。

当它在运行时编译时，我认为它不在公共/资产中而是在缓存中，对吧？我怎样才能访问这个文件？

感谢您的帮助 - 干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:25:19.870

（Tddium 联合创始人，请点击此处。）

可以（但尚未记录）将任意构建工件附加到 Tddium 构建，以便它们包含在构建报告页面末尾的文件列表中。

看一眼：

[https://github.com/solanolabs/tddium/blob/master/lib/tddium/agent/tddium.rb#L66](https://github.com/solanolabs/tddium/blob/master/lib/tddium/agent/tddium.rb#L66)

您可以将它与构建后任务一起使用来保存您需要的任何内容。

[http://docs.tddium.com/getting-started/post-build-tasks](http://docs.tddium.com/getting-started/post-build-tasks)

如果您需要具体帮助，请通过 support@tddium.com 联系我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:48:26.500

跑

```
bundle exec rake assets:precompile 
```

看看你是否有任何错误。

通常您会收到一条错误消息，告诉您错误所在的文件和行号。

错误消息表明您在 application.js 文件的第 26654 行有错误。如果在预编译过程中没有收到任何错误消息，可以在预编译完成后查看 public/assets 目录中的 application.js，第 26654 行。

# javascript - 如何在自定义函数中使用 jQuery 承诺/延迟？

> ID：14377038
> 
> 赞同：37
> 
> 时间：2013-01-17T10:32:22.863
> 
> 标签：javascript, jquery, jquery-deferred

我有一个通过以下方式获取位置的功能`navigator.geolocation`：

```
var getLocation = function( callback ){

    navigator.geolocation.getCurrentPosition( callback || function( position ){

        // Stuff with geolocation

    });

}; 
```

我想这样做，以便我可以使用 jQuerys 的 Defered 对象链接这个函数，[但](http://api.jquery.com/category/deferred-object/)我仍然没有设法掌握 Defered 的概念和用法。

我正在寻找类似于此**伪代码**的内容：

```
getLocation().then(function(){
    drawMarkerOnMap();
}); 
```

这种语法甚至可以在不向后翻转和淹没在代码中的情况下实现吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-01-17T10:50:52.830

您必须实例化一个新的延迟对象并从函数中返回它（或其承诺）。`.resolve`得到响应后调用它的方法：

```
var getLocation = function() {
    var deferred = new $.Deferred();

    navigator.geolocation.getCurrentPosition(function( position ){
        // Stuff with geolocation
        deferred.resolve(position);
    });

    // return promise so that outside code cannot reject/resolve the deferred
    return deferred.promise();
}; 
```

用法：

```
getLocation().then(drawMarkerOnMap); 
```

* * *

**参考**：[`jQuery.Deferred`](http://api.jquery.com/jQuery.Deferred/)

* * *

**附录**：

我建议不要使用这两种方法，延迟对象和将回调传递给函数，以保持界面简单。但是如果你必须保持向后兼容，你可以简单地在延迟对象上注册传递的回调：

```
var getLocation = function(callback) {
    var deferred = new $.Deferred();

    if ($.isFunction(callback)) {
        deferred.then(callback);
    }

    navigator.geolocation.getCurrentPosition(function( position ){
        // Stuff with geolocation
        deferred.resolve(position);
    });

    // return promise so that outside code cannot reject/resolve the deferred
    return deferred.promise();
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-19T16:59:38.520

尽管上面的示例确实对我有所帮助，但我还是需要多阅读一些内容才能理解这个概念。

下面是基于我的代码的示例，其中包含注释以在我回到它时为我提供帮助，并希望任何阅读此 Stackoverflow 问题的人：

```
/* promise based getFilter to accommodate getting surrounding suburbs */
oSearchResult.fPromiseOfFilterSetting = function fPromiseOfFilterSetting(sId) {
    var self = this;
    self.oPromiseCache = self.oPromiseCache || {}; // creates a persistent cache 
                                                   // across function calls
    var oDeferred = $.Deferred(); // `new` keyword is optional
    var oPromise = oDeferred.promise();

    // leverage the cache (it's ok if promise is still pending), you can key
    if (self.oPromiseCache[sId] !== undefined) {
        return self.oPromiseCache[sId];
    }
    else {
        self.oPromiseCache[sId] = oPromise;
    }

    // do our asynchronous action below which at some point calls
    // defered.resolve(...) and hence complete our promise
    $.cmsRestProxy.doAjaxServiceRequest('ocms_searchProperties_Extension', {
        action : 'getSurroundingSuburbs',
        sSuburbIds : 'a0RO0000003BwWeMAK'
    }, function(result, json) {
        console.log("doAjaxServiceRequest(
                       'ocms_searchProperties_Extension')", json);
        oDeferred.resolve(json); // `json` is our result and `.resolve(json)` 
                                 // passes the value as first argument to 
                                 // the `oPromise.done`, `oPromise.fail` 
                                 // and `oPromise.always` callback functions
    })

    // We can now return the promise or attach optional `oPromise.done`,
    // `oPromise.fail`, and `oPromise.always` callbacks which will execute first
    // in the chain.
    //
    // Note that `oPromise.then(doneCallback, failCallback, alwaysCallback)`
    // is short form for the below
    oPromise.done(function(value) { // returned by promise.resolve(...); call
        console.log('will run if this Promise is resolved.', value);
    })
    oPromise.fail(function(value) {
        console.log("will run if this Promise is rejected.", value);
    });
    oPromise.always(function(value) {
        console.log("this will run either way.", value);
    });

    // return a promise instead of deferred object so that
    // outside code cannot reject/resolve it
    return oPromise;
}

// then to use one would do
oSearchResult.fPromiseOfFilterSetting().done(function(value) {alert(value)});

// or using $.when chaining
$.when(
    oSearchResult.fPromiseOfFilterSetting()
)
.done(
      function fDoneCallback(arg1, arg2, argN) {
          console.debug(arguments) // `arguments` is an array of all args collected
      }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-14T07:25:45.170

我知道它在标题中说 jQuery，但是当我问这个问题时，承诺对网络来说是新的，而 jQuery 是事实上的库。这是一个没有 jQuery 的更现代的答案。

# 使用本机[`Promise`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)

所有[现代浏览器](https://caniuse.com/#feat=promises)（IE11 及以下版本除外；[如果需要，请使用 polyfill](https://github.com/stefanpenner/es6-promise)）使您能够使用本机构`Promise`造。

```
let getLocation = () => {

  return new Promise( ( resolve, reject ) => {

    try {
      navigator.geolocation.getCurrentPosition( position => {
        resolve( position )
      })
    } catch ( err ) {
      reject( err )
    }

  })

}; 
```

用法：

```
let runGetLocation = () => { getLocation().then( position => console.log( position ) ) } 
```

你也可以使用 ES2016 async/await 代替`.then()`：

```
let runGetLocation = async () => {

  try {
    let position = await getLocation()
    console.log( position )
  } catch ( err ) { console.log( err ) }

} 
```

# iphone - 如何在xcode中单击按钮时调用返回布尔值的函数？

> ID：14377042
> 
> 赞同：0
> 
> 时间：2013-01-17T10:32:45.377
> 
> 标签：iphone, objective-c, xcode

我是 ios 开发的新手，我只是想创建一个简单的计算应用程序，所以我已经习惯了文本框，我只想允许这些数字值。我已经将**键盘**属性设置为**数字键盘**。现在我想以编程方式执行此操作，因为我从[检查字符串中发现以下函数仅包含数字值](https://stackoverflow.com/questions/10734959/uitextfield-should-accept-number-only-values)

```
+(BOOL) checkforNumeric:(NSString*) str 
{ 
NSString *strMatchstring=@"\\b([0-9%_.+\\-]+)\\b"; 
NSPredicate *textpredicate=[NSPredicate predicateWithFormat:@"SELF MATCHES %@", strMatchstring]; 
if(![textpredicate evaluateWithObject:str]) 
{ 
//////NSLog(@"Invalid email address found"); 
UIAlertView *objAlert = [[UIAlertView alloc] initWithTitle:APP_NAME message:@"please enter valid text." delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Close",nil]; 
[objAlert show]; 
[objAlert release]; 
return FALSE; 
} 
return TRUE; 
} 
```

现在我想在单击按钮时调用它，我尝试了一些方法，但它总是显示错误。请帮助我如何在按钮的点击中使用此功能。

我的实际按钮代码是：

```
-(IBAction)button{
if (firstValue.text.length>0 && secondvalue.text.length>0) {

    label.text=  [ [NSString alloc] initWithFormat:@"Result is:  %.2f", ([firstValue.text floatValue]) * ([secondvalue.text floatValue])];

}
else if (firstValue.text.length==0 && secondvalue.text.length==0){
    //label.text=    @"please enter the values.";
    UIAlertView  *alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Please Enetr First Value and second value." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
    [alert release];
}else if (firstValue.text.length==0) {
    //label.text=    @"please enter the first values.";
    UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Alert" message:@"Please Enter First Value" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
    [alert release];
}else if (secondvalue.text.length==0) {
    //label.text=    @"please enter the second values.";
    UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Alert" message:@"Please Eneter Second Value" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
    [alert release];
}
} 
```

请帮我。

为此，我尝试了以下方法：

```
BOOL *test= checkforNumeric(firstValue.text); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:36:27.200

像这样调用你的方法

```
BOOL isValidString_withNoNumbers = [self checkforNumeric: firstValue.text];
if(isValidString_withNoNumbers)
{
     //your code
} 
```

而且您应该将方法更改为实例方法

所以应该是

```
-(BOOL) checkforNumeric:(NSString*) str // - for instance method //+ for class methods 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:37:13.003

以这种方式制作以下行：-

```
-(BOOL) checkforNumeric:(NSString*) str 
```

并在您的 .h 文件中声明它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:43:25.143

如果您的方法在同一个类中，则必须重新定义您的方法，使用`-`

```
-(BOOL) checkforNumeric:(NSString*) str 
```

并调用它：

```
[self checkforNumeric: firstValue.text]; 
```

如果您`+(BOOL) checkforNumeric:(NSString*) str`在另一个类（如 MyCheckClass）中定义，则必须导入 MycheckClass 并调用它：

```
BOOL isOk = [MyCheckClass checkforNumeric:firstValue.text]; 
```

# mapreduce - MapReduce 上的数据丢失？

> ID：14377046
> 
> 赞同：0
> 
> 时间：2013-01-17T10:33:04.230
> 
> 标签：mapreduce

我的代码执行 10000 行。

**映射器伪代码：**

```
int rows=0;
map()
   {rows++}  
cleanup(Context c)
   {print(rows)} 
```

此代码打印：

```
2669
3354
3353
621
(sum=9997) 
```

为什么总和是 9997？

**减速器伪代码：**

```
int rows=0;
reduce()
   {rows++}  
cleanup(Context c)
   {print(rows)} 
```

减速机打印：3354

所有其他数据在哪里？

**编辑 1**

我找到了主要问题。

我的错是发送的密钥是行号。当映射器调用该`cleanup()`函数时，它会重置行计数器（保存在应用程序的驱动程序中）。因此密钥不是唯一的。我可以通过从地图函数的参数发送密钥来解决这个问题吗？我不认为`cleanup()`重置此参数。

相反，如果我在应用程序的驱动程序中使用全局变量，是否存在同步问题？

**编辑 2**

我的代码执行 10000 行（和 1 个标题行）

**驱动伪代码：**

```
public static enum COUNTER {ROW}; 
```

**映射器伪代码：**

```
map()
   {row=context.getCounter(RWDriver.COUNTER.ROW).increment(1);
    context.write(row,new Text(...))
   }     
cleanup(Context c)
   {print(c.getCounter(RWDriver.COUNTER.ROW).getValue());} 
```

此代码打印：

```
2670
3355
3354
622
(sum=10001 correct) 
```

2670,3355之后，缓冲区已满，MapReduce自动将计数器ROW重置为0。我需要实际的行数，但是这种方法不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:44:01.327

数据的解释可能是错误的。

您应该使用 Map-Reduce 框架计数器或用户定义的计数器：

* * *

## Map-Reduce 框架计数器

```
Map input records
Map output records
Map output bytes
Reduce input groups
Reduce input records
Reduce output records 
```

* * *

## 用户定义的计数器

```
class mapper()
{
static enum Counters { INPUT_LINES }
map()
{
  context.getCounter(Counters.INPUT_LINES).increment(1);
} 
```

在 Reducer 中也是如此。

## 获取计数器的价值

```
Configuration conf = new Configuration();
Cluster cluster = new Cluster(conf);
Job job = Job.getInstance(cluster,conf);
result = job.waitForCompletion(true);
...
Counters counters = job.getCounters();
for (CounterGroup group : counters) {
  System.out.println("* Counter Group: " + group.getDisplayName() + " (" + group.getName() + ")");
  System.out.println("  number of counters in this group: " + group.size());
  for (Counter counter : group) {
    System.out.println("  - " + counter.getDisplayName() + ": " + counter.getName() + ": "+counter.getValue());
  }
} 
```

# ios - RestKit 0.20 JSON 对象在 POST 正文中被序列化为 GET 样式请求

> ID：14377048
> 
> 赞同：8
> 
> 时间：2013-01-17T10:33:16.487
> 
> 标签：ios, json, restkit

我刚从 RestKit 0.20.0 开始，在创建格式良好的 JSON 请求时遇到了麻烦。

我得到了这个（来自休息套件日志）：

```
request.body=title=A%20glorious%20walk%20in%20the%20woods&startDateTime=2013-01-13%2016%3A09%3A33%20%2B0000&endDateTime=2013-01-13%2016%3A09%3A43%20%2B0000&points[][longitude]=-122.0307725&points[][latitude]=37.3310798&points[][longitude]=-122.0307334&points[][latitude]=37.33154242&points[][longitude]=-122.03075743&points[][latitude]=37.33138305&points[][longitude]=-122.03075659&points[][latitude]=37.33131185&points[][longitude]=-122.03057969&points[][latitude]=37.33156519&points[][longitude]=-122.03075535&points[][latitude]=37.33144466&points[][longitude]=-122.03076342&points[][latitude]=37.33123666&points[][longitude]=-122.03074488&points[][latitude]=37.33149482&points[][longitude]=-122.03068145&points[][latitude]=37.33155419&points[][longitude]=-122.03062909&points[][latitude]=37.33156564&points[][longitude]=-122.03076853&points[][latitude]=37.33115792 
```

当我想要这个时（带有大括号的普通 json 对象和 points 属性的数组）：

```
{
    title: "Something",
    startDateTime: "dateinfo",
    endDateTime: "moredateinfo",
    points: [
        {
            latitude: "37.33131313",
            longitude: "122.4325454"
        },
        {
            latitude: "37.33131313",
            longitude: "122.4325454"
        }
    ]
} 
```

我有两个主要对象： DLWalk 包含 DLPoint 对象的 NSSet（它们是 CoreData 对象，但目前我忽略了这一点，只专注于创建 HTTP 请求）

这是我用来创建请求的代码：

```
// Point mapping
RKObjectMapping *mappingPoint = [RKObjectMapping requestMapping];
[mappingPoint addAttributeMappingsFromArray:@[@"latitude", @"longitude"]];
RKRequestDescriptor *reqDescPoint = [RKRequestDescriptor requestDescriptorWithMapping:mappingPoint objectClass:[DLPoint class] rootKeyPath:nil];

// Walk mapping
RKObjectMapping *mappingWalk = [RKObjectMapping requestMapping];
[mappingWalk addAttributeMappingsFromArray:@[@"endDateTime", @"startDateTime", @"title"]];
RKRequestDescriptor *reqDescWalk = [RKRequestDescriptor requestDescriptorWithMapping:mappingWalk objectClass:[DLWalk class] rootKeyPath:nil];

// Define the relationship mapping
[mappingWalk addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"points" toKeyPath:@"points" withMapping:mappingPoint]];

RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://192.168.1.10:8080"]];
                            [manager addRequestDescriptor:reqDescWalk];
                            [manager addRequestDescriptor:reqDescPoint];
                            [manager addResponseDescriptor:responseDescriptor];

// POST to create
[manager postObject:walk path:@"/walk/save" parameters:nil success:nil failure:nil]; 
```

所以问题是：为什么我的 POST 正文中没有一个看起来很正常的 JSON 对象？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-20T05:21:55.230

你得到的 request.body 是 URL 编码的，这是 RESTKit 的默认行为，通常可以正常工作。

如果您希望它是 JSON 编码的，只需在发布查询之前插入此行

```
manager.requestSerializationMIMEType=RKMIMETypeJSON; 
```

有关这方面的更多信息，请查看 RKObjectManager 类的 API 文档： [requestSerializationMIMEType](http://restkit.org/api/0.20.0/Classes/RKObjectManager.html#//api/name/requestSerializationMIMEType)

# c# - 获取会话值 - ASP.NET Web 处理程序文件

> ID：14377049
> 
> 赞同：2
> 
> 时间：2013-01-17T10:33:16.933
> 
> 标签：c#, asp.net, session

我无法在 ASHX 文件中获取会话值。
我在[这里](https://stackoverflow.com/questions/2156524/asp-net-session-is-null-in-ashx-file/2156528#2156528)搜索过，所以我可以解决我的问题。

但我仍然无法获得会话价值。请让我得到你的建议。

[ASPX 设计文件]

```
...
<form id="form1" runat="server">
<div>
    <iframe runat="server" id="iframepdf" height="600" width="800" src="./PDFViewer.ashx"></iframe>
</div>
</form>
... 
```

[ASPX 代码背后]

```
...
namespace WebApplication1
{
public partial class NameCard : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {   
        Session["PDFFileName"] = @"D:\Test.pdf";
    }
}
} 
```

正如您在文件后面看到的代码，
我为会话对象设置了一些值。
然后，我写在 ashx 文件下面。

[ASHX代码背后]

```
...
namespace WebApplication1
{
public class PDFViewer : IHttpHandler, System.Web.SessionState.IRequiresSessionState
{
    public void ProcessRequest(HttpContext context)
    {   
        context.Session["StackOverflow"] = "overflowing";  // This one give me output value as "overflowing"
        if (context.Session["PDFFileName"] != null) {  // My problem is this line, It always say null value ...
            context.Response.ContentType = "Application/pdf";
            var PDFFileName = context.Session["PDFFileName"].ToString();                
            context.Response.WriteFile(PDFFileName);
            context.Response.End();
            context.Session["PDFFileName"] = string.Empty;
        }

    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:18:57.513

通过阅读您代码中的注释，我认为您获得了价值，`context.Session["StackOverflow"]`但没有获得`["PDFFileName"]`价值？那是对的吗？在分配会话值的页面和使用它们并运行调试器的处理程序中放置断点。

也许你拼错了钥匙？请记住，键是区分大小写的。

# django - Django 中的自定义 HTTP 标头

> ID：14377050
> 
> 赞同：41
> 
> 时间：2013-01-17T10:33:19.573
> 
> 标签：django

我为 URL 签名使用了一个自定义的 http 标头，称为“sign”，如何在 Django 中获取这样的自定义 HTTP 标头值？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2014-06-22T21:03:40.027

继续使用：

```
request.META.get('HTTP_{your uppercased header name}') 
```

请注意，在 Django 中，您使用大写字母而不是短划线来编写标头名称，但是在客户端的请求中，您必须使用短划线而不是下划线来编写它（出于安全原因，生产 Web 服务器将删除带有下划线的自定义标头）。

因此，`My-Custom-Header`访问自定义标头`request.META['HTTP_MY_CUSTOM_HEADER']`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-17T10:47:00.673

最后我发现只是通过

```
request.META('HTTP_{your uppercased header name}') 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-01-17T10:39:08.767

您可以将自己的自定义标头添加到响应中，如下所示： [https ://docs.djangoproject.com/en/dev/ref/request-response/#setting-headers](https://docs.djangoproject.com/en/dev/ref/request-response/#setting-headers)

```
>>> response = HttpResponse()
>>> response['Cache-Control'] = 'no-cache'
>>> del response['Cache-Control'] 
```

或者使用装饰器将它们添加到视图中： http: [//djangosnippets.org/snippets/275/](http://djangosnippets.org/snippets/275/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-09-24T10:06:00.240

我试图使用以下代码访问具有上述答案的标题：

```
request.META.get('HTTP_{your uppercased header name}') 
```

但它对我不起作用，然后我意识到自定义标题不应该包含`underscore`所以我改变了`underscore`with`dash`和 boom，一切都开始工作了。希望这会帮助像我这样的人。:-)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-08-15T09:07:44.040

从 Django 2.2 开始，您可以使用`HttpRequest.headers`提供不区分大小写的请求标头字典的字典，如下所示：

```
my_header = request.headers.get('x-my-custom-header') 
```

见[django.http.HttpRequest.headers](https://docs.djangoproject.com/en/2.2/ref/request-response/#django.http.HttpRequest.headers)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-17T17:52:04.903

从 Django 文档中：

[https://docs.djangoproject.com/en/2.1/ref/request-response/#django.http.HttpRequest.META](https://docs.djangoproject.com/en/2.1/ref/request-response/#django.http.HttpRequest.META)

> 除了上面给出的 CONTENT_LENGTH 和 CONTENT_TYPE 之外，请求中的任何 HTTP 标头都通过将所有字符转换为大写、用下划线替换任何连字符并在名称中添加 HTTP_ 前缀来转换为 META 键。因此，例如，名为 X-Bender 的标头将映射到 META 键 HTTP_X_BENDER。

# eclipse - 将 XSD 转换为 ECore

> ID：14377054
> 
> 赞同：1
> 
> 时间：2013-01-17T10:33:26.557
> 
> 标签：eclipse, eclipse-plugin, eclipse-emf, eclipse-emf-ecore

我目前正在尝试使用 Eclipse 建模框架将 XML 模式转换为 ECore。EMF 提供了属性ecore:reference 来指示一个属性应该被翻译成一个EReference。但是，这仅适用于属性类型为 IDREF 或 anyURI 的情况。我的问题是通过 IDREF 引用的任何 ID 在整个 XML 文档中都必须是唯一的。但是，我的 XML 具有以下结构：

```
<A id="a1">
<B id="b1">
<ref idref="b2" />
</B>
<B id="b2">
<ref idref="b1" />
</B>
</A>

<A id="a2">
<B id="b1">
<ref idref="b2" />
</B>    
<B id="b2">
<ref idref="b1" />
</B>
</A> 
```

B 元素的 id 仅在周围的 A 元素内是唯一的。因此，如果我将 B 元素的 ID 声明为类型 ID，解析器将抛出错误。

如何告诉 EMF idref 是对属于同一个 A 元素的 B 元素的属性 id 的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:09:34.873

如果 XML 模式确实使用 ID 和 IDREF，那么您显示的实例对于该模式无效。这不是问题吗？它更像是一个 key/keyref，Ecore 也不支持。

如果归根结底是想要一个可以读取和写入此类实例的 Ecore 模型，我将定义一个`idref`只是字符串的属性并定义`resolvedRef`A 类型的瞬态引用，然后我会修改 getter 和 setter，以便每个都从其他。即，当您调用 时`getResolvedRef`，它会检查该字段是否为空，如果该字段`idref`有值，它将遍历模型进行解析（在适当的范围内查找该名称）并将其存储在该字段中.

以合理的方式为 getter 和 setter 定义相互推导有点棘手，但它应该是可能的。

# java - 奇怪的会话行为..!! 在运行时更改用户对象属性

> ID：14377055
> 
> 赞同：0
> 
> 时间：2013-01-17T10:33:27.083
> 
> 标签：java, jakarta-ee, jboss7.x, session-state, httpsession

在我们的 Web 应用程序中测试并发访问时，我们在跟踪会话行为时遇到了一些困难。

假设我们有三个不同的用户，A、B 和 C。

我们正在使用这三个用户使用三个不同的浏览器登录应用程序，然后在运行时我的用户对象从 B 更改为 A 或 B 更改为 C 或 C 更改为 A，但这是随机发生的。

我的 UserContextHolder 类是：

```
public final class UserObjContextHolder {
    private static final ThreadLocal<UserObj> CONTEXT_HOLDER = new ThreadLocal<UserObj>();

    private UserObjContextHolder() {
    }

    public static void setUserObj(UserObj userObj) {
        CONTEXT_HOLDER.set(userObj);
    }

    public static UserObj getUserObj() {
        return CONTEXT_HOLDER.get();
    }

} 
```

我正在为 ORM 和 Spring MVC 使用 Hibernate

谁能告诉我此会话行为的原因或如何同步它？

我注意到一件事：如果用户 A 已登录并执行一些搜索操作，并且如果用户 B 同时登录，则 userObj A 将更改为 userObj B。

它与应用程序服务器设置有关吗？这仅在进行身份验证时发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:55:24.177

我想更多地了解您是如何执行搜索操作的，以及您在什么时候在 ThreadLocal 对象 (CONTEXT_HOLDER) 中设置了 UserObj。

我们必须记住 ThreadLocal 是*线程*范围的，而**不是**会话范围的。这意味着*当且仅当*设置对象的线程与请求它的线程相同时，ThreadLocal 中的设置对象是相同的。

我最初的理论是搜索操作在**同一个会话**中执行，但不在同一个线程上。一个简单的场景如下：

*   UserA 使用线程 A 登录。UserA 使用线程 A 存储在 CONTEXT_HOLDER 中。
*   UserB 使用线程 B 登录。UserB 使用线程 B 存储在 CONTEXT_HOLDER 中。
*   UserC 使用线程 C 登录。UserC 使用线程 C 存储在 CONTEXT_HOLDER 中。
*   一段时间后，UserA 执行搜索操作。服务器使用线程 A 执行操作（幸运的是）。 ThreadLocal 返回正确且预期的 UserA obj！
*   又过了一会儿，用户 A 执行搜索操作。这一次，（不幸的是）服务器使用线程 C 执行操作（呃-哦！）。**ThreadLocal 将返回 UserC，因为 Thread C 用于执行搜索操作。**（另一方面，如果在搜索操作中使用了 Thread B，则 ThreadLocal 将返回 UserB）

上面的场景被过度简化了，假设服务器只使用了三个线程。但我确实希望它能解释您如何获得不同的 UserObj 对象。如果我上面描述的是您所遇到的情况，我认为您也会不时收到 NULL 值（遇到这种情况的频率取决于服务器使用的总线程数）。原因是 ThreadLocal 如果当前未设置，则返回初始值（根据您上面的代码为 null）。

因此，解决您的问题的方法是确保您在**同一个线程**中执行以下操作：

*   在你的 ThreadLocal 中设置 UserObj
*   执行搜索操作并在您的 ThreadLocal 中获取 UserObj

如果你希望我能给你一个示例代码，请告诉我。

# php - 如何让这段代码更有效率，而不是有那么多 elseif 语句？

> ID：14377056
> 
> 赞同：0
> 
> 时间：2013-01-17T10:33:32.263
> 
> 标签：php

而不是这个：

```
if($today >= $dateOne && $dateOne != '0000-00-00')
    {
    run some code
    }
elseif($today >= $dateTwo && $dateTwo != '0000-00-00')
    {
    run some code
    }
elseif($today >= $dateThree && $dateThree != '0000-00-00')
    {
    run some code
    }
elseif($today >= $dateFour && $dateFour != '0000-00-00')
    {
    run some code
    }
else
    {
    run this code
    } 
```

...最多`$dateEleven`，有没有更好的为什么要这样做？我认为必须有比拥有所有这些`elseif`陈述更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:37:08.590

```
$dates = Array( 1 => $dateOne, 2 => $dateTwo, ... );
foreach($dates as $key => $date) {
  if($today > $date && $date != '0000-00-00') {
      $date_key = $key;
      break ; // exit loop
  }
}
switch($date_key) {
   case 1:
      // code 1
      break;
   case 2:
      // code 2
      break;
   case 3:
      // code 3
      break;
   case 4:
   case 5:
      // etc.
      break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:37:46.530

你只有一个变量实际上在变化。我不知道这是从哪里来的，但是您可以将它们全部放入某种数据结构中，例如数组，然后编写一个完全按照您希望它执行的操作的循环。

每当你遇到这样的情况时，看看你拥有什么以及实际发生了什么变化。如果您试图解决这样的问题，循环通常是您想要开始寻找的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:47:25.167

好吧，如果所有日期都可以是“0000-00-00”，那么循环是不可避免的。

```
$dates = array($dateOne, $dateTwo ...);
foreach ($dates as $date) {
    if($today >= $date && $dateOne != '0000-00-00') {
        // run some code
        break;
    }
} 
```

但是，如果这些日期来自 mysql 数据库，**则必须**使用查询来确定是否必须运行某些代码。

因此，您最好描述您正在尝试实现的现实生活中的任务，然后直接从 SQL 查询中获得答案。

说，应该是这样的

```
SELECT min(date) FROM table WHERE date <> '0000-00-00' AND [other conditions] 
```

然后只是比较返回的值，像这样

```
if ($row && $today >= $row['date']) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:39:40.517

```
function validate($date) {
    return $today >= $date && $date != '0000-00-00';
}

$dates = [$dateOne, $dateTwo, $dateThree, $dateFour];

if(count($filtered = array_filter($dates, 'validate'))) {
    $date = $filtered[0]; // This is the date that triggered the first IF in your code
    // run some code
}
else {
    // run this code
} 
```

# lua - 检查是否所有陈述都是错误的？

> ID：14377058
> 
> 赞同：2
> 
> 时间：2013-01-17T10:33:35.027
> 
> 标签：lua, coronasdk

只有当多个语句为假时，有没有办法执行一行代码？

我有一个库存：

```
inventory = {
    {"Images/Category 1/pistol1.png", false},
    {"Images/Category 1/machinePistol1.png", false},
    {"Images/Category 2/shotgun1.png", false},
    {"Images/Category 2/assaultRifle1.png", false},
    {"Images/Category 3/sniperRifle1.png", false},
    {"Images/Category 3/rocketLauncher1.png", false}
} 
```

而且我想编写一个函数，如果所有这些语句都是错误的，则执行一行代码，但如果其中一个语句为真，显然会执行其他内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T10:38:39.953

你可以使用一个变量，并假设它是真的

```
local IsEverythingTrue = true

-- the **for** statement is a loop. It will allow us to operate
-- the same way on any number elements in inventory.
-- _,v stands for variables that we are going to read from inventory table
-- we can't do it directly, however; **ipairs** function will prepare it so
-- _ will hold numerical index of each element (1, 2, 3 and so on);
-- we don't use it, though, so I put in a placeholder name
-- v will hold every value, so your two-element table

for _,v in ipairs(inventory) do

    -- if any value of v[2] is false, break
    -- v[2] is equal to inventory[_][2]
    -- if not v[2] can be written as 
    -- *if value of v[2] isn't true*

    if not v[2] then
        -- in this case, after first non-true element has been found
        -- we know that not every one is true, or there is at least one false
        IsEverythingTrue = false
        break -- we don't have to check anything else
    end
end 
```

然后在表达式中使用该变量

```
if IsEverythingTrue then
    -- do something
else
    -- do something else
end 
```

如果您希望它以*多个*错误执行，只需计算它们。`local falseCount = 0`在开头添加，并更改`break`为`falseCount = falseCount + 1`.

# c# - ListBox 按字母顺序排序时不显示值？

> ID：14377067
> 
> 赞同：1
> 
> 时间：2013-01-17T10:33:53.527
> 
> 标签：c#, asp.net, listbox

这是我按字母顺序排序的逻辑

```
 string selectedVal = lstSelectionTags.SelectedValue;
        SortedList sortedItems = new SortedList();
        for (int i = 0; i < lstSelectionTags.Items.Count; i++)
        {
            sortedItems.Add(lstSelectionTags.Items[i].Text, lstSelectionTags.Items[i].Value);
        }
        lstSelectionTags.Items.Clear();
        lstSelectionTags.DataSource = sortedItems;
        lstSelectionTags.DataTextField = "key";
        lstSelectionTags.DataValueField = "value";
        lstSelectionTags.DataBind(); 
```

当我使用下面的代码第一次在我的列表框中显示项目时

```
 string valueField = Convert.ToString(lstSelectionSub.SelectedItem);
            int catID = Convert.ToInt32(lstSelectionSub.SelectedValue);
            util = new Utilities();
            dt1 = util.GetSubTags_PD(catID, false);
            string[] lines = new string[100];
            List<string> lines1 = new List<string>();

            for (int i = 0; i < dt1.Rows.Count; i++)
            {
                string s1 = dt1.Rows[i][0].ToString();

                if (s1 != "")
                {
                    lines = Regex.Split(s1, ",");

                    if (!lines1.Contains(lines.ToString()))
                    {
                        lines1.AddRange(lines);
                    }
                }
            }

            lstSelectionTags.DataSource = lines1.Distinct();

            lstSelectionTags.DataBind(); 
```

它最初工作正常并显示数据，但是当我进行排序然后尝试访问值时，我在`ListBox`

**编辑：**排序后的排序似乎有一些问题，列表框有一个键和值作为 DataValue 和 DataText 字段，而当我重新绑定它时，没有 DataValue 和 DataText 字段。请帮忙。

**问题已解决：**刚刚使用

```
 if (lines1.Count > 0)
                {
                    lstSelectionTags.DataSource = null;
                    lstSelectionTags.Items.Clear();

                    lstSelectionTags.DataSource = lines1.Distinct();

                    lstSelectionTags.DataTextField = null;
                    lstSelectionTags.DataValueField = null;
                    lstSelectionTags.DataBind();
                } 
```

# mysql - 基于动态值加入

> ID：14377068
> 
> 赞同：0
> 
> 时间：2013-01-17T10:34:03.363
> 
> 标签：mysql, sql, join

我有下表。

```
[Table] coupon_sells

id,dealer_id,parent_id,modified,price 

[Table] users

id,username,password

[Table] user_profiles

id,user_id,first_name,last_name 
```

外键：

```
coupon_sells[Foreign Key dealer_id,parent_id] To users
user_profiles[Foreign Key user_id ] to users 
```

我想从 coupon_sells 获得总价格。基于 parent_id 的条件总和，例如如果 parent_id 不等于零，则对价格字段求和，如果不为零，则将相对于 parent_id 字段的价格求和。

到目前为止，我已经对解决方案进行了排序......

```
select case 
           when parent_id =0 
                then dealer_id 
                else parent_id 
           end 
           as test_id,sum(price),modified from coupon_sells group by test_id 
```

我在上面的查询中得到了正确的总和。当我想与用户和用户个人资料一起获取个人资料信息时，就会出现问题。

就像当我使用 join 运行查询时一样，它会给出错误：

```
select case when parent_id =0 then dealer_id else parent_id end as
test_id,sum(price),modified from coupon_sells group by test_id inner
join users  u on u.id=test_id 
```

请任何朋友可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:46:08.143

用这个

```
select case when u.parent_id =0 then dealer_id else u.parent_id end as test_id,
sum(price),modified from coupon_sells as cs inner join users u on u.id=test_id 
group by test_id 
```

# linux-kernel - 在 Uni 处理器（基于 ARM Cortex A8 的 SOC）上运行支持 SMP 的 Linux 内核是否有任何性能损失？

> ID：14377074
> 
> 赞同：2
> 
> 时间：2013-01-17T10:34:28.433
> 
> 标签：linux-kernel, synchronization, arm, spinlock, cortex-a8

这是从我的微不足道的观察中提出的一个双重问题，即我在基于 ARM-Cortex 8 的 SoC 上运行支持 SMP 的 Linux。第一部分是关于 Uni 处理器系统上 SMP 和 NON-SMP Linux 内核之间的性能（内存空间/CPU 时间）差异。有什么区别吗？

第二部分是关于自旋锁的使用。在单处理器的情况下，AFAIK spinklock 是 noop。由于只有一个 CPU，并且（一次）只有一个进程在其上运行，因此没有其他进程用于忙循环。所以为了同步，我只需要禁用中断来保护我的关键部分。我的这种理解正确吗？

在此讨论中忽略驱动程序的可移植性因素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T05:48:38.287

正如您所说，您正在运行在单处理器系统上以 SMP 模式编译的 linux 内核，因此很明显，您不会在速度和内存方面获得任何好处。

由于 linux-kernel 使用**广泛的锁定**进行同步。但是在单处理器模式下，理论上可能不需要锁定，但在很多情况下需要锁定，因此请尝试在需要的地方使用锁定，但不如在 SMP 中那么多。

**但是你应该很清楚，自旋锁是由一组宏实现的，其中一些会阻止与 IRQ 处理程序的并发，而另一些则不会。自旋锁适用于保护旨在运行很短时间的小段代码。**

在您的第二个问题中，您正试图通过禁用单处理器模式的中断来删除自旋锁，但自旋**锁宏位于不可抢占的 UP（单处理器）内核中，评估为空宏（或其中一些宏只是禁用/启用中断）。启用抢占的 UP 内核使用自旋锁来禁用抢占。对于大多数目的，抢占可以等同于 SMP。**因此，在 UP 内核中，如果您使用 Spinlocks，那么它们将只是空宏，我认为使用它会更好。

基本上有四种同步技术：1->不可抢占性，2->原子操作，3->中断禁用，4->锁。

但是正如您所说的禁用中断以进行同步，请记住由于其简单性，**内核函数使用中断禁用来实现关键区域。这种技术并不总是能防止内核控制路径交错。** 关键部分应该很短，因为当内核控制路径在此部分运行时，CPU 和 I/O 之间的任何通信都会被阻塞。

因此，如果您需要在 Uni-Processor 中进行同步，请使用信号量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:01:45.157

内核中的大量同步代码在描述您描述的行为的单处理器内核中几乎没有编译方式。n 路系统的性能绝对不是 2n - 并且随着 CPU 的数量而变差。

您应该继续使用 SMP 系统的同步机制来编写驱动程序 - 知道当内核配置为单处理器时您将获得正确的单处理器情况，这是安全的。

全局禁用中断就像把大锤敲到坚果上一样——也许只是在当前 CPU 上禁用抢占就足够了——即使在单处理器系统上，自旋锁也会这样做。

如果您还没有这样做，请查看[Linux Device Drivers 3rd Edition](http://lwn.net/images/pdf/LDD3/ch05.pdf)的第 5 章- 根据具体情况，有多种自旋锁选项。

# c - File IO 中的两个语句有什么区别

> ID：14377075
> 
> 赞同：1
> 
> 时间：2013-01-17T10:34:32.080
> 
> 标签：c, file-io

这两种陈述之间有什么区别，哪个是正确的，应该使用什么？

fp 是使用的文件指针。

```
if(fp!= '\n') 
```

收到警告

```
C4047: '!=' : 'FILE *' differs in levels of indirection from 'int' 
```

和

```
if(fp!= NULL) 
```

没有收到任何警告。

完整代码片段如下

```
if(fp!= NULL)
    {
        fgets(mystring,BUFSIZ,fp);
        puts(mystring);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:46:52.690

> 这两种陈述之间有什么区别，哪个是正确的，应该使用什么？

关于区别：
`fp != '\n'`尝试将指针与整数进行比较。这是没有意义的。
`fp != NULL`检查是否`fp`为空指针。这是明智的做法。

关于哪个是正确的：
这个问题假设其中一个实际上是正确的。（但`fp != '\n'`绝对是不正确的。）

关于应该使用什么：
这取决于你想要做什么。

这段代码：

```
fgets(mystring,BUFSIZ,fp);
puts(mystring); 
```

也是错误的，因为您忽略了 的返回值`fgets`，这将告诉您是否`fgets`成功，因此是否`mystring`设置为有效字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:43:49.613

`'\n'`是`int`输入，并且您正在将其与必须在代码中声明`C`的 FILE 指针进行比较 。所以这条线是 错误的，意义不大。比较。 _`fp``FILE* fp``if(fp!= '\n')``FILE*``int`

正确的是这样：

`if(fp!= NULL)`检查是否`fp`指向一个有效的文件。

```
fp = fopen("filename","r");  
:
:
if(fp!= NULL)
{   // if file open successfully  
    fgets(mystring,BUFSIZ,fp);
    puts(mystring);
} 
```

如果`fp = fopen("filename","r");`函数[`fopen()`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fopen.html)无法打开文件，则返回 NULL。

因为在代码`fgets`中使用了为什么我是用户`"r"`模式..

# ruby-on-rails - 如何在 Heroku 上分析不一致的 H12 超时

> ID：14377082
> 
> 赞同：11
> 
> 时间：2013-01-17T10:34:49.690
> 
> 标签：ruby-on-rails, performance, heroku, newrelic

我的用户在 Heroku 上看到偶尔的请求超时。不幸的是，我无法始终如一地重现它们，这使得它们很难调试。有很多机会可以提高性能——例如，通过减少每个请求的大量数据库查询和添加更多缓存——但如果不进行分析，那是在黑暗中的一击。

根据我们的 New Relic 分析，服务器上的许多请求需要 1 到 5 秒。我知道这太慢了，但它远不及超时所需的 30 秒。

New Relic 上的错误选项卡向我显示了发生超时的几个不同的数据库查询，但这些查询并不是特别慢的查询，并且每次崩溃可能是不同的查询。同样对于相同的 URL，它有时会显示，有时不会显示数据库查询。

我如何找出在这些特殊情况下发生了什么？例如，我如何查看发生超时时它在数据库中花费了多少时间，而不是在没有错误时它在数据库中花费的时间？

我的一个假设是数据库在某些情况下被锁定。也许是阅读和写作的结合。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T05:43:44.230

你可能已经看过了，但是 Heroku 有一个[文档](https://devcenter.heroku.com/articles/request-timeout)，它有一些关于请求超时的良好背景。

如果您的请求花费了很长时间，并且在请求完成之前为它们服务的进程没有被终止，那么它们应该生成事务跟踪，以提供有关耗时过长的单个事务的详细信息。

如果您使用的是 Unicorn，则可能不会发生这种情况，因为请求花费的时间足够长，以至于它们遇到了 Unicorn 的[超时](http://unicorn.bogomips.org/Unicorn/Configurator.html#method-i-timeout)（在此之后，为这些请求提供服务的工作人员将被强行杀死，没有给 New Relic 代理足够的时间是时候回来报告了）。

我建议采用两步法：

1.  [将rack-timeout](https://github.com/kch/rack-timeout)中间件配置为低于 Heroku 的 30 秒超时。如果这可行，它将通过引发 a 来终止花费超过超时时间的`Timeout::Error`请求，并且此类请求应在 New Relic 中生成事务跟踪。
2.  如果这没有产生任何结果（它可能，因为 rack-timeout 依赖于 Ruby 的 stdlib`Timeout`类，它有[一些限制](http://unicorn.bogomips.org/Application_Timeouts.html)），您可以尝试将 Unicorn 请求处理超时从其默认值 60 秒（假设您使用的是 Unicorn）。请注意，在这种情况下，长时间运行的请求会使 Unicorn 工作人员占用更长的时间，这可能会进一步降低您的站点速度，因此请将此作为最后的手段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-10T22:29:04.980

在这里晚了两年。我对 Ruby 的经验很少，但对于 Django，Gunicorn 的问题是它不能正确处理 Heroku 上的慢速客户端，因为请求没有预先缓冲，这意味着服务器连接可能会等待（阻塞）。[这可能对您很有帮助](http://blog.etianen.com/blog/2014/01/19/gunicorn-heroku-django/)，尽管它主要适用于 Gunicorn 和 Python。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:21:25.523

您很清楚地通过长时间运行的请求解决了这个问题。查看[http://artsy.github.com/blog/2013/02/17/impact-of-heroku-routing-mesh-and-random-routing/](http://artsy.github.com/blog/2013/02/17/impact-of-heroku-routing-mesh-and-random-routing/)并升级到 NewRelic RPM 3.5.7.59 - 等待时间测量将被准确报告。

# php - php 逗号分隔值的唯一/不同值

> ID：14377083
> 
> 赞同：1
> 
> 时间：2013-01-17T10:34:51.003
> 
> 标签：php, mysql

我有一个带有 tag_filter 字段的 wallposts MySql 表，该字段将有一个逗号分隔值。

我想从此 tag_filter 字段中获取用户的所有唯一/不同标签并填充 ul 元素。

每个用户可能有很多帖子。

例如

post1: tag_filter = a, b, c post2: tag_filter = a, d, e post3: tag_filter = c, d, e

所需的输出将是

```
<ul>
<li>a</li>
<li>b</li>
<li>c</li>
<li>d</li>
</ul> 
```

到目前为止，这是我的代码：

```
$tag_filter_list = mysql_query('SELECT tag_filter from wallposts where userid = '.$USER->id);

$list = "<ul>";

while ($tag_filter = mysql_fetch_array($tag_filter_list)) {
$value = $tag_filter["tag_filter"];
$info = explode(",", $value);
foreach( $info as $item ) {
$list.="<li>$item</li>\n";
}
}

$list .= "</ul>";
echo $list; 
```

我还想用从上面获得的不同/唯一列表填充一个 js var。

```
 var sampleTags = [
         <?php
                    $tag_filter_list = mysql_query('SELECT tag_filter from wallposts where userid = '.$USER->id);

                        $all_tags = array();
                        while ($tag_filter = mysql_fetch_array($tag_filter_list)) {
                          $value = $tag_filter["tag_filter"];
                          $info = explode(",", $value);
                          $all_tags = array_merge($all_tags, $info);
                        }
                        $tags = array_unique($all_tags); // values will be sorted by the function
                        foreach( $tags as $item ) {
                          $list = "$item";
                        }
                    echo join(',', $list);  
         ?>
        ]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:42:48.243

这可能会有所帮助。

```
$tag_filter_list = mysql_query('SELECT tag_filter from wallposts where userid = '.$USER->id);

$tags = array();
while ($tag_filter = mysql_fetch_array($tag_filter_list)) {
    $value = $tag_filter["tag_filter"];
    $tags[] = explode(",", $value); // put all in an array
}

// now, join and remove duplicates and sort in ascending order
$tags = implode( ',', $tags );
$tags = explode( ',', $tags );
$tags = array_values( array_unique( $tags ) );
sort($tags);

$list = "<ul>";

foreach( $tags as $item ) {
    $list .= "<li>$item</li>\n";
}

$list .= "</ul>";
echo $list; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:42:55.643

MySQL 字段中的逗号分隔值是不良数据库设计的标志，应尽可能使用链接表。

但是，在您的情况下，以下代码可能有效：

```
$all_tags = array();
while ($tag_filter = mysql_fetch_array($tag_filter_list)) {
  $value = $tag_filter["tag_filter"];
  $info = explode(",", $value);
  $all_tags = array_merge($all_tags, $info);
}
$tags = array_unique($all_tags); // values will be sorted by the function
foreach( $tags as $item ) {
  $list .= "<li>$item</li>\n";
} 
```

要将所有标签放入 javascript 变量中：

```
<script type="text/javascript">
var sampleTags = [<?php echo explode(', ', $tags); ?>];
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:41:42.427

尝试使用 array_merge() 合并所有 tag_filter 数组，然后使用 array_unique() 删除重复项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T11:42:11.303

***只需尝试以下示例：***

```
<?php
$post_array = array('a,b,c','a,d,e','c,d,e');
$tag_list   = '<ul>';
$i=0;
while($i < count($post_array)){
$filter_explode = explode(',',$post_array[$i]);
$filter_count   = count($filter_explode);
for($j=0;$j<$filter_count;$j++)
{
if(!in_array($filter_explode[$j],$tag_list_build)){
$tag_list_build[] = $filter_explode[$j];
}
}
$i++;
}
$tag_list_build_count = count($tag_list_build);
for($k=0;$k<$tag_list_build_count;$k++)
{
$tag_list.= '<li>'.$tag_list_build[$k].'</li>';
}
$tag_list.= '</ul>';
echo $tag_list;
?> 
```

我认为这可以帮助您解决问题。

# android - Android中的动态视图寻呼机

> ID：14377085
> 
> 赞同：1
> 
> 时间：2013-01-17T10:35:00.600
> 
> 标签：android, android-viewpager

我想在android中使用视图寻呼机动态创建页面。每个页面都有四个按钮。当我单击 Page1 中的 button1 时，它给出的日志为 One，当我在 page2 处按下 button1 时，它也给出 One 作为输出。但是当我在第 2 页按下按钮 1 时，我需要将日志记录为 5。

因为按钮可能会动态增加，每个按钮都有不同的功能。根据按钮的数量，页面需要自己创建。

请提供任何解决方案。在此先感谢。

# ant - Selenium Grid /Sauce Labs 插件 / Ant 设置

> ID：14377087
> 
> 赞同：0
> 
> 时间：2013-01-17T10:35:08.307
> 
> 标签：ant, selenium, saucelabs

我正在尝试使用 ANT 来启动 Selenium Grid 实例。使用此处找到的响应，[如何从 Ant 构建中运行 Selenium 2 Grid？](https://stackoverflow.com/questions/7264448/how-can-i-run-selenium-2-grid-from-an-ant-build)，我能够使用以下 build.xml 成功启动 Grid

```
<project name="selenium-grid" default="launch-hub" basedir=".">
  <property name="selenium.version" value="2.28.0"/>
  <property name="sauce.version" value="1.0.8"/>
  <path id="selenium.classpath">
    <pathelement path="${basedir}/"/>
    <fileset dir="${basedir}/">
      <include name="selenium-server-standalone-${selenium.version}.jar"/>      
      <include name="sauce-grid-plugin-${sauce.version}.jar"/>  
    </fileset>
    <pathelement path="${java.class.path}/"/>
  </path>
  <target name="launch-hub"
          description="Launch Selenium Hub">
    <java classname="org.openqa.grid.selenium.GridLauncher"
          classpathref="selenium.classpath"
          fork="true"
          failonerror="true">       
      <arg value="-role"/>
      <arg value="hub"/>      
    </java>    
  </target>
</project> 
```

```
蚂蚁发射中心
```

继续前进，我想将 Sauce Labs Grid 插件与 Selenium Grid 一起使用，可以在此处找到： [https](https://github.com/rossrowe/sauce-grid-plugin/wiki) ://github.com/rossrowe/sauce-grid-plugin/wiki 在 wiki 之后，我可以启动这两个在我的 Windows 机器上使用 DOS 中的以下内容

```
java -cp selenium-server-standalone-2.25.0.jar;sauce-grid-plugin-1.0.7.jar org.openqa.grid.selenium.GridLauncher -role hub -servlets com.saucelabs.grid.SauceOnDemandAdminServlet,com. saucelabs.grid.SauceOnDemandConsoleServlet
```

现在我想通过将目标“launch-hub”添加到 Sauce labs“servlet”的参数来合并 Sauce lab Servlet（抱歉在发布真实代码时遇到问题）

```
arg 值 =“-servlets”
arg value="com.saucelabs.grid.SauceOnDemandAdminServlet,com.saucelabs.grid.SauceOnDemandConsoleServlet"
```

我重新启动使用

```
蚂蚁发射
```

这是Windows返回的错误：

```
发射中心：
     [java] 1 月 17 日。2013 10:58:40 org.openqa.grid.selenium.GridLauncher 主
     [java] INFO：启动 selenium 网格服务器
     [java] 1 月 17 日。2013 10:58:50 org.openqa.grid.web.utils.ExtraServletUtil createServlet
     [java] 注意：指定的类：com.saucelabs.grid.SauceOnDemandAdminServlet 无法实例化 com.sau
celabs.grid.SauceOnDemandAdminServlet
     [java] 1 月 17 日。2013 10:58:50 org.openqa.grid.web.utils.ExtraServletUtil createServlet
     [java] 注意：指定的类：com.saucelabs.grid.SauceOnDemandConsoleServlet 无法实例化 com.s
aucelabs.grid.SauceOnDemandConsoleServlet
     [java] 2013-01-17 10:58:50.806:INFO:osjs.Server:jetty-7.xy-SNAPSHOT
     [java] 2013-01-17 10:58:50.866:INFO:osjsh.ContextHandler:started osjsServletContextHandler{/,null}
     [java] 2013-01-17 10:58:50.876:INFO:osjs.AbstractConnector:Started SocketConnector@0.0.0.0:4444`在此处输入代码

```

Selenium Grid 启动但没有 servlet，因此没有 Saucelabs 访问

有任何想法吗？

**更新**使用 1.0.7 的酱汁插件让它工作。不支持 1.0.8 版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:41:50.540

通过使用带有额外参数的 build.xml，我能够使用 Sauce Grid 插件成功运行网格服务器，例如

```
<project name="selenium-grid" default="launch-hub" basedir=".">
    <property name="selenium.version" value="2.25.0"/>
    <property name="sauce.version" value="1.0.8"/>
    <path id="selenium.classpath">
        <pathelement path="${basedir}/"/>
        <fileset dir="${basedir}">
            <include name="selenium-server-standalone-${selenium.version}.jar"/>
            <include name="sauce-grid-plugin-${sauce.version}.jar"/>
        </fileset>
        <pathelement path="${java.class.path}/"/>
    </path>
    <target name="launch-hub"
            description="Launch Selenium Hub">
        <java classname="org.openqa.grid.selenium.GridLauncher"
              classpathref="selenium.classpath"
              fork="true"
              failonerror="true">
            <arg value="-servlets"/>
            <arg value="com.saucelabs.grid.SauceOnDemandAdminServlet,com.saucelabs.grid.SauceOnDemandConsoleServlet"/>
            <arg value="-role"/>
            <arg value="hub"/>
        </java>
    </target>
 </project> 
```

通过查看 Selenium Grid 代码，生成输出中出现的错误是在抛出 ClassNotFoundException 时生成的……你能检查一下 sauce-grid-plugin jar 文件是否位于 ${basedir} 中吗？

# ios - 使用 TouchXML 解析 XML，生成带有子级的文档

> ID：14377088
> 
> 赞同：0
> 
> 时间：2013-01-17T10:35:09.183
> 
> 标签：ios, objective-c, xml, xml-parsing, touchxml

我得到一个这样的 XML 文档：

```
<node label = "NAME1" description = "DESCRIPTION1" id = "1">
    <node label = "SON1" description = "SONDESCRIPTION1" id = "S1">
       <node label = "SON1-1" description = "SONDESCRIPTION1-1" id = "S1-1">
         <node label = "SERVICE1" description = "SERVICEDESCRIPTION1" id = "Se1" />
       <node label = "SON1-2" description = "SONDESCRIPTION1-2" id = "S1-2">
    <node label = "SON2" description = "SONDESCRIPTION2" id = "S2">
    .... 
```

这个想法是我收到一个带有服务的文件夹树。我正在考虑获取 XML，并将所有儿子放在一个 NSArray 中，创建一个新的 CXMLDocument 与儿子和没有根。然后创建一个包含所有儿子的 NSArray，并根据我的需要创建尽可能多的 CXMLDocuments，然后再一次..

我的想法是在 TableView 中显示所有儿子（SON1，SON2 ..），当您触摸时，您会转到其他 TableView，例如 SON1：SON1-1，Service1...

起初我不知道这是否是最好的方法，但万一是我不知道如何使用节点的儿子创建文档。

像这样的东西：

```
while whatever {
    NSArray *root = [doc children];
    for(CXMLElement *son in root){
       doc = new XML Starting in SON1.
    } 
```

任何人都知道如何实现？谢谢。

# facebook - Graph Api好友数据不一致

> ID：14377090
> 
> 赞同：1
> 
> 时间：2013-01-17T10:35:16.633
> 
> 标签：facebook, facebook-graph-api, facebook-fql

当我使用图形 api 请求用户朋友数据 [Friends Data]:(http://graph.facebook.com/me/friends?fields=work,name) 时，直到 3-4 天前我曾经获得更多数据（我朋友的工作地点信息）比我现在得到的？Graph API 最近是否发生了任何更新/更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:01:47.423

您今天可能忘记设置权限：`friends_work_history`.

# android - 如何将 facebook SDK 添加到 android 项目？

> ID：14377093
> 
> 赞同：10
> 
> 时间：2013-01-17T10:35:35.720
> 
> 标签：android, facebook-android-sdk, android-facebook

我正在尝试将 facebook SDK 添加到 android 项目，但我无法添加它，我做不到。我的项目有一个包，里面有 8-10 个包，那么我在哪里可以添加 facebook SDK？

我在网上搜索了很多，但找不到好的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-25T09:35:46.513

以下是将 Facebook SDK 包含到 android 项目中的步骤：

1) 从[https://github.com/facebook/facebook-android-sdk/](https://github.com/facebook/facebook-android-sdk/)下载 Facebook SDK 并将其解压到本地驱动器。

2）将“facebook”作为一个android项目导入你的Eclipse，这是你的Facebook SDK，你必须将它引用到你的android项目中。

3) 现在创建你的安卓项目。

4) 右键单击​​它，转到 Properties-->android 并添加“facebook”库作为对您项目的引用。单击应用。

查看视频链接：[http ://www.youtube.com/watch?v=w-vNi1W4fco](http://www.youtube.com/watch?v=w-vNi1W4fco)

欲了解更多详情，请访问：[https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-26T07:16:38.970

我成功地将 Facebook SDK 添加到我的应用程序中，如下所示：

*   从他们的开发者页面下载[Facebook SDK 。](https://origincache.facebook.com/developers/resources/?id=facebook-android-sdk-current.zip)将其提取到本地文件系统中。它包含名为**facebook**的文件夹，该文件夹又包含此 .aar 包。`(facebook-android-sdk-4.23.0.aar)`

*   右键单击*项目 -> 新建 -> 模块*

*   选择**导入 .JAR/.AAR 包**选项。

*   选择上面提到的 .aar 文件。

*   在`build.gradle`您的应用程序文件中，将以下内容添加到该`dependencies`部分。

    ```
    dependencies {
    ...<Your custom dependencies>
    compile 'com.android.support:appcompat-v7:26.+'
    ...<Your custom dependencies>
    compile project(':facebook-android-sdk-4.23.0')
    testCompile 'junit:junit:4.12' 
    ```

    }

*   构建您的项目，一切顺利！

**注意**：如果您想检查它是否正常工作，请尝试添加`import com.facebook.FacebookSDK`到您的`MainActivity.java`文件中。如果它没有显示任何错误，则您已成功添加 Facebook SDK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:42:10.200

尝试打开 FB-SDK 中包含的示例项目，它可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:50:59.273

查看此链接并下载 Facebook SDK 的演示 ..您可以在此 SDK 中获得共享功能...

[https://github.com/facebook/facebook-android-sdk/](https://github.com/facebook/facebook-android-sdk/)

# linux - OS X/Linux 上的 bash 脚本练习

> ID：14377097
> 
> 赞同：-1
> 
> 时间：2013-01-17T10:35:40.027
> 
> 标签：linux, macos, bash

我必须做一个练习：有一个包含此文本的文件

目录 目录

dirX 目录

目录

每行有两个目录，如果第一个目录的任何文件包含在第二个目录中，脚本必须检查每一行。这是脚本：

```
if [ $# -ne 2 ];then
echo "Error! Insufficient parameters"
exit 1
fi
if [ ! -f $1 ];then
echo "$1 is not a file"
exit 2
fi
if [ -f $2 ];then
echo "$2 already exists"
exit 3
fi

file=$(cat $1)
file_output=$(touch $2)
count=0
dir_a=''
dir_b=''

for i in $file ; do
    if [ $count -eq 0 ];then
        dir_a=$i
        let count=$count+1
        continue
    fi
    if [ $count -eq 1 ];then
        dir_b=$i
        let count=0
        for f in $(ls $dir_a) ; do
            if [ -f $dir_b/$f ];then
                echo "found"
            fi
        done
    fi
done 
```

问题是它不检查最后一对，在上面的例子中它不会检查这对“dirA dirD”。对于这种奇怪的行为有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:42:59.197

..... 什么？

```
while read src dest
do
  for file in "$src"/*
  do
    if [ -e "$dest"/"${file##*/}" ]
    then
      echo "Found: $src $dest"
      break
    fi
  done
done 
```

# javascript - 如何从文件中获取纯xml

> ID：14377101
> 
> 赞同：0
> 
> 时间：2013-01-17T10:35:42.227
> 
> 标签：javascript, jquery

我搜索一种从文件中获取普通 xml（带有标签等）并将其保存到 localStorage 的方法。

我发现了一些机会，但每个机会都返回没有标签的 xml。我更喜欢 jQuery 来做到这一点......

我试过`$.get`，`$("").load()`和 AJAX，但我不明白。我只想将整个 xml 作为字符串保存到 localStorage 中，稍后再读出（并使用它）。

有人有想法吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:36:58.260

您可以使用：

```
$.ajax({
   url: 'http://example.com',
   dataType: 'text',
   success: function (data) {
      localStorage.setItem('xml-content', data);
   }
}); 
```

这将为您提供纯文本形式的 XML 文档并将其保存到`localStorage`.

这是一个完整的解决方案：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<pre id="output">
</pre>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
    function setXML() {
        $.ajax({
           url: 'test.xml',
           dataType: 'text',
           success: function (data) {
              localStorage.setItem('xml-content', data);
              getXML();
           }
        });
    }
    function getXML() {
        var xml = localStorage.getItem('xml-content');
        $('#output').text(xml);
    }
    setXML();
</script>

</body>
</html> 
```

# sparql - SPARQL 中的减号或不存在

> ID：14377104
> 
> 赞同：1
> 
> 时间：2013-01-17T10:35:46.960
> 
> 标签：sparql, rdf

我有一个查询，不想显示一些信息

```
SELECT ?Recipe
 WHERE {
   ?Ingredient <http://linkedrecipes.org/schema/ingredientOf> ?Recipe .
   MINUS {
       <http://linkedrecipes.org/schema#Milk> <http://linkedrecipes.org/schema/ingredientOf> ?Recipe .
     }
} 
```

我想选择牛奶不是成分的所有食谱

运行此查询后，我只是有一个错误

我的数据是：

```
<?xml version="1.0"?>
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:rcp="http://linkedrecipes.org/schema/">

<rdf:Description rdf:about="http://linkedrecipes.org/schema#Milk">
  <rcp:ingredientOf rdf:resource="http://linkedrecipes.org/schema#SaladUniqueID"/>
  <rcp:ingredientOf rdf:resource="http://linkedrecipes.org/schema#CoffeeUniqueID"/>
</rdf:Description>

<rdf:Description rdf:about="http://linkedrecipes.org/schema#Salt">
  <rcp:ingredientOf rdf:resource="http://linkedrecipes.org/schema#SoupUniqueID"/> 
</rdf:Description>

</rdf:RDF> 
```

结果我想要“SoupUniqueID”。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-12-12T08:55:41.067

使用 NOT FILTER 会更容易。

# xml - 从包的 src 文件夹中获取 xml 文件

> ID：14377105
> 
> 赞同：1
> 
> 时间：2013-01-17T10:35:51.617
> 
> 标签：xml, swing

我之前曾问过一个关于如何在 stackoverflow 上从 xml 导入文件的问题（[阅读此处](https://stackoverflow.com/questions/14331940/import-a-xml-file-from-package-swing)）。提供给我的解决方案是使用

```
documentbuilder.parse( xmlhandler.class.getResourceAsStream("shutdownscheduler.xml")); 
```

`"C:\Users\Rohan Kandwal\Documents\NetBeansProjects\Shutdown Scheduler\build\classes\shutdown\scheduler\shutdownscheduler.xml"`此解决方案正在选择适合只读目的的 xml 文件 。

但我需要 documentbuilder 从位置访问文件， `"C:\Users\Rohan Kandwal\Documents\NetBeansProjects\Shutdown Scheduler\src\shutdown\scheduler`以便我可以永久保存对 xml 所做的更新。有没有办法从`src`文件夹而不是`build`文件夹访问文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:26:25.993

通常，当您的应用程序应该写入文件时，它必须在具有写入权限的地方执行此操作。您可以确定（在大多数情况下）您的应用程序将被允许具有此类访问权限的唯一地方是用户主目录。您可能已经注意到，其他基于 java 的应用程序通常会`".some-application"`在您的主文件夹中创建一个名为的目录（在您的情况下`"C:\Users\Rohan Kandwal"`）。他们这样做的原因（其中之一）是写访问。

您应该做同样的事情并且忘记使用`Class.getResourceAsStream(...)`可写文件。您可以通过`System.getProperty("user.home")`.

请注意，您的示例中使用的原因`Class.getResourceAsStream(...)`是从您的`build`目录中获取文件是因为您在 IDE 中运行它。如果您在 IDE 之外运行它，则此路径将更改。这是因为类文件 ( `xmlhandler.class`) 的路径很可能会改变并`Class.getResourceAsStream(...)`依赖它来查找资源。

另请注意，`src`部署应用程序时，您的目录很可能甚至不存在。即使这样做了，也无法知道您的用户是否会将其部署在具有写入权限的位置。因此，您尝试做的事情没有多大意义。

**编辑01**

这是一个如何做你想做的事的例子。这将为您的应用程序创建一个主目录，您可以在其中以任何您希望的方式编写文件。如果您要在应用程序运行之间保留的文件不存在，它将被创建并填充您的资源文件的内容。请注意，这只是一个示例。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

public class ConfigDir {

    private static final String APP_DIR = ".myappdir";
    private static final String FILE_NAME = "shutdownscheduler.xml";

    private File fillFileFromTemplate(InputStream template, File file) throws FileNotFoundException, IOException {
            OutputStream out = null;
            try {
                out = new FileOutputStream(file);
                int read = 0;
                byte[] bytes = new byte[1024];
                while ((read = template.read(bytes)) != -1) {
                    out.write(bytes, 0, read);
                }
                out.flush();
                return file;
            } catch (FileNotFoundException ex) {
                throw ex;
            } finally {
                if (out != null) {
                    out.close();
                }
            }
        }

    public static void main(String[] argv) throws IOException {        
        String userdir = System.getProperty("user.home"); // user home directory
        // OR if you know that your program will run from a directory that has write access
        // String userdir = System.getProperty("user.dir"); // working directory
        if (!userdir.endsWith(System.getProperty("file.separator"))) {
            userdir += System.getProperty("file.separator");
        }
        String myAppDir = userdir + APP_DIR;
        File myAppDirFile = new File(myAppDir);
        myAppDirFile.mkdirs(); // create all dirs if they do not exist
        String myXML = myAppDir + System.getProperty("file.separator") + FILE_NAME;
        File myXMLFile = new File(myXML); // this is just a descriptor        
        ConfigDir cd = new ConfigDir();        
        if (!myXMLFile.exists()) {
            // if the file does not exist, create one based on your template
            // replace "ConfigDir" with a class that has your xml next to it in src dir
            InputStream template = ConfigDir.class.getResourceAsStream(FILE_NAME);  
            cd.fillFileFromTemplate(template, myXMLFile);
        }

        // use myXMLFile java.io.File instance for read/write from now on
        /*
        DocumentBuilderFactory documentbuilderfactory=DocumentBuilderFactory.newInstance();
        DocumentBuilder documentbuilder=documentbuilderfactory.newDocumentBuilder();
        Document document=(Document)documentbuilder.parse(myXMLFile);
        document.getDocumentElement(); 
        ...
        */        
    }    
} 
```

# linux - ALSA：如何停止和恢复音频？

> ID：14377106
> 
> 赞同：1
> 
> 时间：2013-01-17T10:35:52.047
> 
> 标签：linux, audio, alsa

我需要的是多次播放波形文件。我不想每次再次播放wave文件时都调用硬件/软件参数设置API。

```
{start...play wave partially...stop}, {start...play wave partially...stop},  {start...play wave partially...stop}, ... 
```

这里要使用什么api？丢弃未播放的帧是可以的。当我检查 alsa API 时，我可以看到很多类似的 api 暂停/恢复/停止 ...。对于上述用例，启动和停止音频的正确组合是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:08:07.933

使用 停止 PCM 设备后`snd_pcm_drop`，您可以通过调用`snd_pcm_prepare`将新数据写入缓冲区，然后调用`snd_pcm_start`或使用自动启动（默认启用）来重新启动它。

# c# - 是.选择 (...) 优先于 .Where （……）？

> ID：14377107
> 
> 赞同：0
> 
> 时间：2013-01-17T10:35:55.733
> 
> 标签：c#, linq, iterator

我与两位同事讨论了*IEnumerable*上的迭代设置（其内容在操作期间不会以任何方式更改）。存在三种相互矛盾的理论，哪一种是最佳方法。其他人（以及我）都非常确定，这让我不确定，所以为了清楚起见，我想与外部来源核实。

场景如下。我们以下面的代码为起点，发现不需要对某些*​​hazaas采取行动。*所以，从下面的代码开始，我们开始为动作添加一个拦截器。

```
foreach(Hazaa hazaa in hazaas) ; 
```

我的建议如下。

```
foreach(Hazaa hazaa in hazaas.Where(element => condition)) ; 
```

其中一个人想通过更明确的形式解决它，声称 LINQ 在这种情况下不合适（不知道为什么会这样，但他似乎非常确信）。他的解决方案是这样的。

```
foreach(Hazaa hazaa in hazaas) ;
  if(condition) ; 
```

另一个相反的建议得到了支持，即*Where*有不必要地重复过滤过程的风险，并且通过*Select*一次性选择适当的元素可以更确定地最小化计算工作量。

```
foreach(Hazaa hazaa in hazaas.Select(element => condition)) ; 
```

我认为第一个已经过时了，因为 LINQ 可以很好地处理数据对象。

我也相信*Select* -ing 在这种情况下与*Where* -ing 相当快，并且不会采取不必要的步骤（例如，对元素条件的评估只会执行一次）。*如果有的话，使用Where*应该会更快，因为我们不会创建任何东西的额外实例。

谁是对的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T10:40:27.933

`Select`是不合适的。它不过滤任何东西。
`if`是一个可能的解决方案，但`Where`同样明确。 `Where`每个项目只执行一次条件，就像`if`. 此外，重要的是要注意调用`Where`不会迭代列表。因此，使用`Where`您只迭代一次列表，就像使用`if`.

我认为您正在与一个不了解 LINQ 的人讨论 - 那个想要使用的人`Select`- 以及一个不喜欢 LINQ 功能方面的人。

我会去`Where`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:45:41.597

`.Where()`和方法将`if(condition)`是相同的。
但由于 LinQ 可读性很好，我更喜欢这样。

with 的方法`.Select()`是无稽之谈，因为它不会返回 Hazaa-Object，而是`IEnumerable<Boolean>`

要明确功能：

```
myEnumerable.Where(a => isTrueFor(a)) //This is filtering
myEnumerable.Select(a => a.b) //This is projection 
```

`Where()`将运行一个函数，*该函数返回*一个布尔 foreach 可枚举项，并根据布尔函数的结果返回该项目
`Select()`将为列表中的每个项目运行一个函数，并*返回*函数的结果而不进行任何过滤。

# shell - 焦油：目录校验和错误

> ID：14377108
> 
> 赞同：0
> 
> 时间：2013-01-17T10:35:56.557
> 
> 标签：shell, unix, backup, tar

我正在写入 HP LTO4 磁带机。但是在写了一个大文件（大约 30GB）之后，我就不能再写任何东西了。我明白了

```
 tar: directory checksum error 
```

有人知道可能出了什么问题吗？

我正在使用命令

```
tar -rvfE /dev/rmt/0 <file.gz> 
```

需要帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:47:44.203

使用 -i 标志解决了问题。所以现在我正在使用命令

```
tar -rvfEi /dev/rmt/0 <file> 
```

:)

# perl - 在 XMLout() 上强制使用单引号

> ID：14377112
> 
> 赞同：1
> 
> 时间：2013-01-17T10:36:01.360
> 
> 标签：perl, xml-simple

有没有一种简单的方法可以强制`XMLout()`对`XML::Simple`属性使用单引号而不是双引号？我没有找到相应的选项（或者我错过了......）。

```
<Object Alias="12345" Inherit="1" Position="0"> 
```

应该

```
<Object Alias='12345' Inherit='1' Position='0'> 
```

这只是惯例问题，没有特殊原因。也不会与内部引号发生任何冲突，因为它们都被转义了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:12:14.540

你为什么要这样做？我不知道它有什么好用的理由？！你可以用 xml 打印你的 xml 文件并再次打开它`while(<>){s/\"/\'/g;}`

# android - 无法上传草稿 APK 以测试应用内计费 - 我们收到一条错误消息，表明它假定我们要发布

> ID：14377113
> 
> 赞同：3
> 
> 时间：2013-01-17T10:36:02.583
> 
> 标签：android, apk

我们已按照[http://developer.android.com/google/play/billing/billing_testing.html#billing-testing-real](http://developer.android.com/google/play/billing/billing_testing.html#billing-testing-real)中的说明将应用内计费引入我们的应用程序，现在想要添加我们的实时产品 ID .

按照说明，我们使用必要的权限构建我们的 APK 并签署 APK。上传完成后，我们收到以下错误：

“由于以下原因，无法发布此配置：所有可能收到版本 3001 的设备都将收到版本 3002。”

我们不想发布此 APK，而只是将其作为草稿 APK 上传，以完成 IAP 测试。

有没有人有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:04:55.977

我可以通过切换回开发者控制台的旧版本然后停用我的一个旧版本来解决这个问题，之后我删除了那个旧版本并保存了应用程序。返回新版本的控制台后，问题已解决。

但是，我相信旧版本的控制台很快就会变得不可用，因此这种方法可能不会再可用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T12:50:37.773

首先停用旧版本，然后您应该能够发布应用程序的新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:29:13.287

切换到旧版本并更新新的apk...

这个对我有用。

谢谢卡尔

# javascript - window.location-string 的 Javascript 开关问题

> ID：14377115
> 
> 赞同：3
> 
> 时间：2013-01-17T10:36:02.773
> 
> 标签：javascript, switch-statement, window.location

我目前正在研究一个简单的 ipad webapp 测试件，并陷入了一个无法以某种方式工作的简单 switch 语句；我想根据 javascripts window.location 字符串格式化元素。解决起来可能很尴尬；但我不知何故不明白：或者window.location有什么特别之处吗？

```
$(document).ready(function() {
path_c = window.location;
switch (path_c){
    case "http://192.168.1.37/ryba_testground/":
    $('#menu-item-22').addClass('current_page_item');
    alert(path_c);
    break;
    case "http://192.168.1.37/ryba_testground/?page_id=7":
    $('#menu-item-21').addClass('current_page_item');
    break; 
    case "http://192.168.1.37/ryba_testground/?page_id=9":
    $('#menu-item-20').addClass('current_page_item');
    break;
    case "http://192.168.1.37/ryba_testground/?page_id=11":
    $('#menu-item-19').addClass('current_page_item');
    break;
}
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:43:38.920

> 或者window.location有什么特别之处吗？

它是一个宿主对象，有时表现得不可预测。至少，它是一个在转换为字符串时评估为的*对象*- 但是在与-cases`href`比较时不会发生这种情况。`switch`利用

```
var path_c = window.location.href; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:42:13.423

window.location 返回一个 Location 对象，该对象包含有关文档 URL 的信息并提供更改该 URL 的方法。所以改成：

```
var path_c = window.location.href; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:42:08.487

我认为您想要对象的`href`属性`window.location`。

```
path_c = window.location.href; 
```

**完整脚本**

```
$(document).ready(function() {
    path_c = window.location.href;

    switch (path_c){
        case "http://192.168.1.37/ryba_testground/":
        $('#menu-item-22').addClass('current_page_item');
        alert(path_c);
        break;
        case "http://192.168.1.37/ryba_testground/?page_id=7":
        $('#menu-item-21').addClass('current_page_item');
        break; 
        case "http://192.168.1.37/ryba_testground/?page_id=9":
        $('#menu-item-20').addClass('current_page_item');
        break;
        case "http://192.168.1.37/ryba_testground/?page_id=11":
        $('#menu-item-19').addClass('current_page_item');
        break;
    }
}); 
```

示例：http: [//jsfiddle.net/9vjY9/](http://jsfiddle.net/9vjY9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:42:53.123

代码似乎没问题。尝试`alert (window.location.href)`or `console.log(window.location.href)`，然后您可以准确检查 window.location.href 为您测试的每个页面获取的内容。这可能会揭示问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T10:43:14.467

您可以使用`window.location.toString()`or `window.location.href`，您甚至可以避免使用 switch，使用对象映射和正则表达式来过滤 url 中的目标：

```
var page_idMap = {
    '7': '#menu-item-21',
    '9': '#menu-item-20',
    '11': '#menu-item-19'
}
var id = window.location.href.match(/page_id[=]([0-9]+)/i);
if (!id || !page_idMap(id[1])) {
    $('#menu-item-22').addClass('current_page_item');
} else {
    $(page_idMap[id[1]]).addClass('current_page_item');
} 
```

# css - 在 Netbeans 中对 CSS 元素进行排序

> ID：14377116
> 
> 赞同：1
> 
> 时间：2013-01-17T10:36:03.830
> 
> 标签：css, netbeans

有没有办法在格式化时对 CSS 文件中的元素进行排序，在 Netbeans 中？

# c# - 如何使用 JQuery DataTables 从 Web 方法正确重新加载数据？

> ID：14377117
> 
> 赞同：0
> 
> 时间：2013-01-17T10:36:10.473
> 
> 标签：c#, jquery, asp.net, ajax, jquery-datatables

我正在使用 JQuery [DataTables](http://datatables.net/index)插件来处理我的表，最近我切换到服务器端分页和过滤。特别是，我有一个返回数据以填充客户表的 Web 方法：

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string GetCustomers(string jsonAOData, int mode)
    {
        // ...
    } 
```

在我的页面中，我使用此代码通过 AJAX 调用检索数据。

```
var grid = $('#grid').dataTable({
        bJQueryUI: true,
        bLengthChange: false,
        iDisplayLength: listItemsPerPage,
        bDestroy: true,
        "bProcessing": true,
        "bSort": true,
        "sPaginationType": "full_numbers",
        "bServerSide": true,
        "sAjaxSource": "/wsData/GetData.asmx/GetCustomers",
        "fnServerData": function (sSource, aoData, fnCallback) {

            var jsonAOData = JSON.stringify(aoData);

            $.ajax({
                //dataType: 'json', 
                contentType: "application/json; charset=utf-8",
                type: "POST",
                url: sSource,
                data: "{jsonAOData : '" + jsonAOData + "', mode:'0'}",
                success: function (msg) {
                    fnCallback(JSON.parse(msg.d));
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(XMLHttpRequest.status);
                    alert(XMLHttpRequest.responseText);
                }
            });
        },
        "aoColumnDefs": [
            // my columns structure
        ]
    }); 
```

如您所见，我向 web 方法传递了两个参数：`jsonAOData`，包含用于分页和过滤的所有信息，以及`mode`，它定义了如何从 DB 中获取数据。它工作得很好，但现在我需要重新加载表中的数据，将不同的值传递给我的 web 方法`mode`。

阅读我发现函数的文档[`fnReloadAjax()`](http://datatables.net/plug-ins/api#fnReloadAjax)可以帮助我，但我找不到将它应用于我的问题的正确方法。

我试过这样：

```
grid.fnReloadAjax("/wsData/GetData.asmx/GetCustomers?mode=1"); 
```

但它不起作用。你能帮助我吗？我在哪里做错了？

**如何将新参数传递给我的网络方法？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:42:53.530

无法立即发现丢失/错误的内容 - 但这是我的有效版本。

```
$(document).ready(function () {
        jQuery.support.cors = true;

        var sAjaxSourceUrl = '@ViewBag.sAjaxSourceUrl' //passing mine from MVC3 viewbag, but you can hard-code it
        var dt = $('#dataTable').dataTable({
            "bProcessing": true,
            "bSort": true,
            "bServerSide": true,
            "sServerMethod": "POST",
            "sAjaxSource": sAjaxSourceUrl,
            "fnServerData": function (sSource, aoData, fnCallback) {
                var jsonAOData = JSON.stringify(aoData);
                $.ajax({
                    crossDomain: true,
                    type: "POST",
                    url: sSource,
                    data: jsonAOData,
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        fnCallback($.parseJSON(data));
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert("Status: " + XMLHttpRequest.status + "\r\n" + textStatus + "\r\n" + errorThrown);
                    }
                });
            },
            "aoColumnDefs": [
// my columns structure
],
            "sScrollY": "500",
            "bScrollCollapse": true
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:48:16.977

我发现`fnReloadAjax()`对我来说不是那么好。所以在一些论坛之后我决定使用`fnDraw()`.

`mode`我根据要检索的数据定义了一个全局变量。然后我调用`fnDraw()`. 该表是从 web 方法加载数据重新绘制的。

在 AJAX 调用中我设置：

```
data: "{jsonAOData : '" + jsonAOData + "', mode:'" + mode +"'}", 
```

# android - Intellij 中的 Android 开发人员，如何仅清理 PNG 缓存？

> ID：14377121
> 
> 赞同：0
> 
> 时间：2013-01-17T10:36:25.153
> 
> 标签：android, intellij-idea

是否有清理缓存（如 png），就像我们在 eclipse --> clean 项目中所做的那样。我知道它可以做文件-->无效缓存，但是这样，本地历史也会被清除。我只是清理PNG缓存，因为有时我们修改了一些png，然后保存为相同的名称，当我们再次运行程序时，png仍然会使用缓存文件。困扰了我很长时间。有人可以帮助我吗？多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:14:10.237

试试`Build -> Rebuild Project`。

# javascript - 在d3强制定向布局中拖动多个节点

> ID：14377124
> 
> 赞同：2
> 
> 时间：2013-01-17T10:36:33.660
> 
> 标签：javascript, d3.js

**前提**：d3强制定向布局；一些节点是通过依次单击来选择的（视觉上它们会变大并在代码中推送到数组）

有没有办法像 Windows 资源管理器中的文件一样用鼠标选择一个来**拖动它们？**

PS我在stackoverflow上得到了很多答案，而没有问很长时间。这是我的第一个问题。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-26T06:21:30.210

我实施拖动多个节点（基于子节点）的方式是通过使用变量记录被拖动节点在我的刻度函数内的位移，该变量的范围允许该值在下次刻度运行时仍然存在。

您将需要一个对象，其中键是被拖动节点的唯一标识符，值是您希望在拖动键节点时翻译/拖动的节点的 d3 选择。

`dragObject`是上述对象。

`nodeData`是您拖动的主节点的 d3 数据 - ( d3.select(node uid).datum() )。

`offset.x`并`offset.y`组成上次运行滴答时定义的上述变量。

```
var translateAllChildren = function (nodeData) {
    if (dragObject[nodeData.uid]) {
        dragObject[nodeData.uid]
            .attr("transform", function(d) {

                d.x = (d.x + offset.x);;
                d.y = (d.y + offset.y);

                return "translate(" + d.x + "," + d.y + ")";
            });
    }
} 
```

# java - 合成器覆盖按钮上的文本绘制

> ID：14377127
> 
> 赞同：1
> 
> 时间：2013-01-17T10:36:43.607
> 
> 标签：java, synth

是否可以使用painter或其他一些技术来自定义带有合成器的控件上的文本绘制？

我知道你可以在 SynthPainter 中实现`paintButtonBorder`和`paintButtonBacground`，但我想知道有没有办法用文本做到这一点？也许一些解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T05:03:01.063

通常你会创建一个`SynthGraphicsUtils`子类，覆盖`paintText(SynthContext ss, Graphics g, String text, Icon icon, int hAlign, int vAlign, int hTextPosition, int vTextPosition, int iconTextGap, int mnemonicIndex, int textOffset)`并从你的 button 方法返回一个子类的`SynthStyle`实例`getGraphicsUtils(SynthContext context)`。

无论如何，如果你要将绘画委托给超级实现，如果`text`是在 HTML 中（以`<html>`标签开头），请注意某些细节：

1.  超级实现将绘制`ss.getComponent().getText()`而不是`text`.
2.  超级实现会在绘制之前手动设置文本颜色。对于无样式文本，这将是`ss.getComponent().getForeground()`. 对于样式文本，这将匹配 HTML/CSS 中指定的颜色。

# c# - 是否可以以编程方式运行 specflow 测试？

> ID：14377129
> 
> 赞同：3
> 
> 时间：2013-01-17T10:36:52.653
> 
> 标签：c#, .net, tfs, bdd, specflow

在我的项目中，我们使用 specflow、nUnit 和 Watin 编写了 BDD 测试。我使用 resharper 从 Visual Studio 运行这些测试。现在我想向非技术人员公开这些功能和场景，并希望他们运行这些测试。

像我想在浏览器中列出所有测试，用户应该能够通过单击它们来运行这些测试。这可以实现吗？有没有插件？

目前我们使用 Team Foundation Server 作为我们的构建服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:40:38.150

JetBrains的[持续集成服务器](http://en.wikipedia.org/wiki/Continuous_integration)[TeamCity](http://www.jetbrains.com/teamcity/)将其作为基于 Web 的功能提供。它甚至提供统计数据和测试输出结果。

它支持开箱即用的 nUnit。 某些配置支持[SpecFlow](http://www.hamishgraham.net/post/TeamCity-SpecFlow-Integration.aspx)和[Watin 。](https://stackoverflow.com/q/488443/296526)

![在此处输入图像描述](../Images/4b92078dcdcf506d9160aa7b15990a55.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T16:48:29.843

您将遇到的最大问题是纯文本功能文件会被 SpecFlow Visual Studio 插件自动转换为 xxx.feature.cs 文件。所以你的过程是这样的，

*   修改 xxxx.feature 文件
*   想办法让 SpecFlow 插件生成 xxx.feature.cs
*   编译
*   使用 NUnit/Xunit 运行测试（按照配置）
*   收集并提交测试成功报告

对我来说，这是一个有名字的过程，我称之为开发。

然而，BDD 是一个不同的过程，它完全是为了设计规范而与业务部门进行协作和沟通。一开始没有工具，但这个过程仍然有效。

> 我的一些同事已经在各种实际项目中使用 BDD 技术，并且发现这些技术非常成功。JBehave 故事运行器——验证验收标准的部分——正在积极开发中。

[Dan North - 介绍 BDD 2006](http://dannorth.net/introducing-bdd/)

不要只关注工具，否则您将错过该过程的重要部分。通过与您的 BA 共同定义新规范，您将获得很多好处。

PS 另一种考虑这一点的方法是规范和代码应该始终保持一致。仅仅通过定义一个新示例，我们不会神奇地向前移动代码以满足该示例。相反，最常见的做法是开发代码以满足新示例，然后将新规范和代码作为单个更改集签入。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T12:31:09.973

您可以使用 Pickles 项目从源代码控制中的 Gherkin 规范生成对利益相关者友好的文档（包括 HTML）。

*   [https://github.com/picklesdoc/pickles](https://github.com/picklesdoc/pickles)

没有从 HTML 运行测试的工具。它是开源的，因此也许您可以通过这种方式对其进行扩展……但是，我个人认为让非技术用户实际执行规范没有价值。我会让您的持续集成服务器运行 SpecFlow 测试并定期生成[步骤定义报告。](https://github.com/techtalk/SpecFlow/wiki/Reporting)然后，非技术用户可以浏览这些报告以查看当前项目状态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T13:08:35.280

要让非技术人员访问您的功能文件，您可以使用[http://www.speclog.net/](http://www.speclog.net/)

规范日志将允许非技术人员编辑和创建新功能，并将自动将它们与 TFS 同步。

不幸的是，它不是免费的，您无法从该工具运行规范。

# php - 加载 Magento 页面时出现奇怪的错误

> ID：14377140
> 
> 赞同：2
> 
> 时间：2013-01-17T10:37:21.870
> 
> 标签：php, apache, magento

当我加载我的前端时，我的浏览器会返回那些奇怪的错误：

```
Uncaught ReferenceError: Mage is not defined
Uncaught ReferenceError: Varien is not defined
Uncaught ReferenceError: decorateGeneric is not defined
Uncaught ReferenceError: VarienForm is not defined
Uncaught ReferenceError: VarienForm is not defined 
```

当我尝试通过 /admin 访问我的后端时，我被重定向到前端（家庭）。

尝试了一百万件事来检测发生了什么，但似乎没有任何效果。

我的 Apache error.log 充满了以下条目：

```
File does not exist: /var/www/skin
script '/var/www/index.php' not found or unable to stat
script '/var/www/cron.php' not found or unable to stat 
```

**顺便说一句，我的 magento 安装不在 /var/www 上，它放在 /var/www/magento**

我究竟做错了什么？我可以得到一些非常漂亮的帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-08T04:01:05.983

在您的主题中打开“CATALOG.XML”文件

添加此代码

```
<default>

    <reference name="head">
        <action method="addJs"><script>varien/product.js</script></action>
        <action method="addJs"><script>varien/configurable.js</script></action>

        <action method="addItem"><type>js_css</type><name>calendar/calendar-win2k-1.css</name><params/><!--<if/><condition>can_load_calendar_js</condition>--></action>
        <action method="addItem"><type>js</type><name>calendar/calendar.js</name><!--<params/><if/><condition>can_load_calendar_js</condition>--></action>
        <action method="addItem"><type>js</type><name>calendar/calendar-setup.js</name><!--<params/><if/><condition>can_load_calendar_js</condition>--></action>
    </reference>

</default> 
```

在“默认”标签下

我希望它有效...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:10:29.010

您必须在数据库的 core_config_data 表中设置两个条目：

具有值为 web/unsecure/base_url 的路径列的条目应将值列设置为类似

```
http://127.0.0.1/magento/ 
```

（假设您在本地开发服务器上工作）同样适用于值为 web/secure/base_url 的路径列。

这两个表条目定义了您的 magento 安装的根目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:55:13.073

查看 .htaccess 并将 RewriteBase 正确设置为 /magento

下一次尝试：我不知道“未捕获的引用错误”（http://stackoverflow.com/questions/2075337/uncaught-referenceerror-is-not-defined）

但显然它与 JavaScript 有关。您确定您的 PHP 代码已执行吗？“HTML”源代码是什么样的？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-23T05:45:18.153

我 `update core_config_data set value = 'http://yourdomain:8019/' where value = 'http://yourdomain';` 在 Magento 1.9.1.1 中解决了

# qt - 在 Qt 中，QEvent 意味着失去窗口焦点，重新获得窗口焦点？（设置透明度）

> ID：14377141
> 
> 赞同：6
> 
> 时间：2013-01-17T10:37:26.607
> 
> 标签：qt

当我的应用程序失去焦点时，我需要设置透明度。我还需要在重新获得焦点时重置透明度（通过鼠标单击或 alt-tab 或其他方式）

我知道如何设置透明度，所以这不是问题：setWindowOpacity(0.75);

问题是什么时候？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-15T10:00:35.377

我同意 Kévin Renella 的观点，有时`QWidget::focusInEvent`和存在问题`QWidget::focusOutEvent`。相反，更好的方法是实施`QWidget::changeEvent()`：

```
void MyQWidget::changeEvent(QEvent *event)
{   
    QWidget::changeEvent(event);
    if (event->type() == QEvent::ActivationChange)
    {
        if(this->isActiveWindow())
        {
            // widget is now active
        }
        else
        {
            // widget is now inactive
        }
    }
} 
```

您也可以通过安装`event-filter`. 有关更多信息，请参阅Qt 文档中[的事件系统](http://doc.qt.io/qt-5/eventsandfilters.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:58:25.737

有时会出现以下问题`QWidget::focusInEvent`和`QWidget::focusOutEvent`事件`QWidget`

还有一种使用`QWidget::windowActivationChange(bool state)`. 真的，您的小部件处于活动状态，否则为假。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:43:23.950

当[QFocusEvent](http://doc.qt.digia.com/qt/qfocusevent.html)事件发生时。只需重新实现

```
void QWidget::focusInEvent ( QFocusEvent * event );
void QWidget::focusOutEvent ( QFocusEvent * event ); 
```

来自[QWidget](http://doc.qt.digia.com/qt/qwidget.html#focusOutEvent)。确保始终在工作之前或之后调用超类方法。即，（在大小写之前）

```
void Mywidget::focusInEvent (QFocusEvent * event ){
   QWidget::focusInEvent(event);
   // your code
} 
```

但是，有时`QWidget::focusInEvent`和存在问题`QWidget::focusOutEvent`。请参阅此[答案](https://stackoverflow.com/a/29059371/1724702)以获得更可靠的方法。

# jquery - removeClass 和 addClass 同时？

> ID：14377148
> 
> 赞同：-3
> 
> 时间：2013-01-17T10:37:48.313
> 
> 标签：jquery, class

```
return $('.card-number').removeClass('valid').addClass('invalid'); 
```

我正在返回一个函数值，我需要同时返回一个函数值，`removeClass`而`addClass`无需编写两个语句，想知道这是否可能？

我试过这个，但它不工作：

```
return $('.card-number').removeClass('valid').end().addClass('invalid'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T10:53:44.167

您之前的代码是正确的：

```
return $('.card-number').removeClass('valid').addClass('invalid'); 
```

如果这不起作用，则您的代码可能存在其他问题。发布您的完整代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T10:40:03.160

您可以使用`toggleClass`：[http ://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

```
return $('.card-number').toggleClass('valid invalid'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:41:35.297

您可以尝试通过属性：

```
return $('.card-number').attr('class', 'invalid'); 
```

它替换了整个类属性，只添加了“无效”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:56:26.960

这将起作用

```
 return $('.card-number').removeClass('valid').addClass('invalid'); 
```

# c# - 从重新加载的 DLL 调用函数会挂起应用程序

> ID：14377149
> 
> 赞同：0
> 
> 时间：2013-01-17T10:37:49.587
> 
> 标签：c#, asp.net, iis, dll

在我的 C# 应用程序中，我使用了一个开源库，该库加载一个非托管 DLL 并从中调用一些函数。

1.  首先我调用`var instance = lib.CreateInstance("R.dll")`which 加载 DLL 使用`LoadLibrary`from`kernel32.dll`
2.  然后我调用`instance.init()`which 从加载的 DLL 中调用一些函数

如果我将代码作为**控制台应用程序**运行，它可以正常工作，但是当我将代码集成到**ASP.NET** Web 应用程序中时，它会在第二次运行期间挂起。据我了解，Web 服务器 (IIS) 使用一个进程来处理许多请求，因此在`var instance = lib.CreateInstance("R.dll")`第二次调用 DLL 时已经加载了该 DLL。

**我怎样才能让它在服务器上工作？有没有办法在每次向服务器发出请求后卸载 DLL？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:14:46.127

为每个请求加载和卸载 dll 并不是一个好主意。你会大大减慢你的反应速度。如果每个请求都需要它，只需加载一次。

由于您不控制做什么`lib.CreateInstance("R.dll")`，您可以将实例保留在单例类中，并且仅在尚未加载时才使用 CreateInstance。

Jon Skeet 有[一篇关于线程安全单例的好文章](http://www.yoda.arachsys.com/csharp/singleton.html)。

# python - 如何获得实时 RSS 通知

> ID：14377152
> 
> 赞同：-1
> 
> 时间：2013-01-17T10:37:58.190
> 
> 标签：python, rss

我正在尝试构建一个 python 脚本来处理 RSS 提要，并在每次上传新帖子时运行。有没有比轮询提要更新更好的方法呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:44:19.440

RSS 提要发布者是否实现了您可以订阅的任何发布协议？

您可以阅读[PubSubHubbub](https://code.google.com/p/pubsubhubbub/)

```
Parties (servers) speaking the PubSubHubbub protocol can get near-instant notifications (via webhook callbacks) when a topic (feed URL) they're interested in is updated. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:47:11.540

我认为这里最好的答案是视情况而定。

看看[这篇](https://stackoverflow.com/a/3949755/1199721)文章以获得正确的解释。我还建议查看我的第一个链接中提到的[PubSubHubbub ：](https://code.google.com/p/pubsubhubbub/)

> 一个简单的、开放的、服务器到服务器的基于 web-hook 的 pubsub（发布/订阅）协议，作为 Atom 和 RSS 的扩展。
> 
> 当他们感兴趣的主题（提要 URL）更新时，使用 PubSubHubub 协议的各方（服务器）可以获得近乎即时的通知（通过 webhook 回调）。

# android - 将图像添加到具有形状的图层列表项

> ID：14377156
> 
> 赞同：9
> 
> 时间：2013-01-17T10:38:22.847
> 
> 标签：android, layer, shape

我有一个 xml，如下所示，我试图从可绘制文件夹中添加图像，但它不起作用。

`<solid android:color="#FFF"/>`这是我需要从可绘制文件夹添加图像的地方

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
        <solid android:color="#FFF"/>
        <stroke android:width="1dip" android:color="#225786" />
        <corners android:radius="10dip"/>
        <padding android:left="0dip" android:top="0dip" android:right="0dip" android:bottom="0dip" />
    </shape> 
```

有没有其他方法可以添加我尝试使用带有项目的图层列表这就是我尝试过的方式

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">  
    <item android:drawable="@drawable/background">
        <shape>
            <solid/>
            <stroke android:width="1dip" android:color="#225786" />
            <corners android:radius="10dip"/>
            <padding android:left="0dip" android:top="0dip" android:right="0dip" android:bottom="0dip" />
        </shape>
    </item> 
  </layer-list> 
```

现在它不显示我正在使用形状做的边框，它只会为其添加背景。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T10:52:00.807

如果您想要带边框的背景，请尝试以下操作：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">  
    <item android:drawable="@drawable/background" />
    <item 
        <shape>
            <solid/>
            <stroke android:width="1dip" android:color="#225786" />
            <corners android:radius="10dip"/>
            <padding android:left="0dip" android:top="0dip" android:right="0dip" android:bottom="0dip" />
        </shape>
    </item> 
  </layer-list> 
```

如果你只是想要一个背景，试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/background"
    android:tileMode="repeat" >

</bitmap> 
```

# android - Android上的UDP接收器

> ID：14377163
> 
> 赞同：0
> 
> 时间：2013-01-17T10:38:46.743
> 
> 标签：android, eclipse, udp

我想在 Eclipse 上执行一个 udp 接收器。但它不起作用。udp 发送方工作正常，数据包通过特定端口发送。但是模拟器无法通过 udp 发送方接收任何数据包。需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:02:10.443

我不知道你的场景是什么，但根据我的场景，我只是使用 php 脚本在我的系统（Windows 7）上设置了一个 UDP 服务器，并使用以下代码成功地从 android 模拟器发送和接收了 UDP 数据包。

```
String receivedString="";

        byte[] sendData = new byte[1024];
        byte[] receiveData = new byte[1024];

        sendData = stringToBeSended.getBytes();

        DatagramPacket sendPacket = new DatagramPacket(sendData,
                sendData.length, IPAddress, port);

        DatagramSocket clientSocket;
        try {
            clientSocket = new DatagramSocket();

            clientSocket.send(sendPacket);

            DatagramPacket receivePacket = new DatagramPacket(receiveData,
                    receiveData.length);
            clientSocket.receive(receivePacket);
            receivedString = new String(receivePacket.getData());
            clientSocket.close();
        } catch (SocketException e) {
            Log.v("SocketExceptionOccured", e.toString())
            e.printStackTrace();
        } catch (IOException e) {
            Log.v("IOExceptionOccured", e.toString())
            e.printStackTrace();
        }

        Toast.makeText(getBaseContext(), receivedString, Toast.LENGTH_LONG).show(); 
```

# ios - Google 搜索地点 api，未找到地点

> ID：14377166
> 
> 赞同：0
> 
> 时间：2013-01-17T10:38:53.047
> 
> 标签：ios, google-maps, google-places-api

从google api找不到某些地方，它曾经在上次更新之前返回结果，但现在不再返回。

例子 ：

必胜客 - 法国

达美乐披萨——法国

进出汉堡 - 洛杉矶

ETC..

[https://maps.googleapis.com/maps/api/place/search/json?sensor=false&location=34.029900,-118.255463&radius=5000&key=API_KEY&name=In-N-Out%20Burger](https://maps.googleapis.com/maps/api/place/search/json?sensor=false&location=34.029900,-118.255463&radius=5000&key=API_KEY&name=In-N-Out%20Burger)

[https://maps.googleapis.com/maps/api/place/search/json?sensor=false&location=48.847194,2.408152&radius=5000&key=API_KEY&name=Pizza%20Hut](https://maps.googleapis.com/maps/api/place/search/json?sensor=false&location=48.847194,2.408152&radius=5000&key=API_KEY&name=Pizza%20Hut)

[https://maps.googleapis.com/maps/api/place/search/json?sensor=false&location=48.847194,2.408152&radius=5000&key=API_KEY&name=Domino](https://maps.googleapis.com/maps/api/place/search/json?sensor=false&location=48.847194,2.408152&radius=5000&key=API_KEY&name=Domino) 's%20Pizza

你知道为什么吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:45:52.970

有同样的问题，但通过这种方式解决了：

对于空格：必须将整个名称括在双引号中：%22name%20with%20spaces%22 对于引号：必须将它们编码为空格：Domino%20s

我用你的必胜客例子试了一下，用我的钥匙得到了结果

# wix - 在构建事件中使用带有 WiX 的 Visual Studio 命令提示符

> ID：14377176
> 
> 赞同：1
> 
> 时间：2013-01-17T10:39:33.873
> 
> 标签：wix

我一直在尝试使用以下代码在构建后事件中签署[MSI文件](http://en.wikipedia.org/wiki/Windows_Installer)

```
signtool sign /t http://timestamp.verisign.com/scripts/timestamp.dll /f "E:\Products\Tools\DigitalId\Certificate.pfx" /p 1501ocbc /d "Server" "E:\Products\Setup\Server_Setup\ServerSetup\bin\Release\en-US\ServerSetup.msi" 
```

这将使用 Visual Studio 命令提示符签署 OK，类似的代码适用于 C++ 项目。但是，在构建设置并使用构建后事件对代码进行签名时，我收到代码错误 9009。经过多次调试，我得出结论，WiX 使用的是普通命令提示符。如何`cmd.exe`进入 WiX 以使用 Visual Studio 工具打开？

或者还有其他方式可以在我的包裹上签名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:44:29.790

看起来有一种内置的 MSI 文件签名方式，似乎可以与 SignTool: [Insignia](http://wix.sourceforge.net/manual-wix3/insignia.htm)一起正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:31:12.090

您可以像这样定义事件：

```
"%programw6432%\microsoft sdks\windows\v7.1\bin\signtool.exe" sign /t etc.. 
```

注意：您需要调整安装路径（程序文件、Windows SDK 版本等），或者您也可以定义自己的环境变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:07:44.767

*   注册证书并使用`/sha1`hashkey - 只是为了确保证书是好的（检查 browser-internetoptions/content/certificate）
*   SignTool 路径 - 按照 Simon Mourier 的建议使其明确或放入`signtool.exe`可访问的路径
*   选择构建后操作 - 在完成对 MSI 文件的所有操作后，您应该对 MSI 文件进行签名。对 MSI（INSERT/UPDATE 属性）的任何操作都将撤消签名。

# c# - 如何在 Web 应用程序中为特定用户验证文件夹和文件

> ID：14377177
> 
> 赞同：2
> 
> 时间：2013-01-17T10:39:37.680
> 
> 标签：c#, asp.net

换句话说，

我的朋友将文件存储在服务器中每个用户的单独文件夹中，以及如何仅为特定用户访问这些文件。

例如：

user1, user2, user3 是文件夹，user1 应该只访问 user1 文件夹而不是其他文件夹。我正在使用 ASP.NET & C#

我有点菜鸟，所以如果已经回答，请忽略（并且很友好地发布链接。）

如果这不是最好的方法，请说明哪种方法最适合这种类型的身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:50:57.537

为每个文件夹创建一个 web.config 文件并授权用户：

所以对于文件夹 user1：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <authorization>
            <allow users="user1"/>
            <deny users="*"/>

        </authorization>
    </system.web>
</configuration> 
```

我假设您正在使用表单身份验证

# sql - SQL：将列的数据类型从字符串更改为数字

> ID：14377180
> 
> 赞同：2
> 
> 时间：2013-01-17T10:39:48.130
> 
> 标签：sql, postgresql

我将在 postgre 中将列的数据类型从“字符变化”更改为“bigint”。

旧列包含字符串“男性”和“女性”，现在我想将其更改为 0 或 1，每个代表男性或女性。

我认为一个简单的 Alter table ... Alter Column 不能解决这个问题，因为它不会进行男性 -> 0，女性 -> 1 的转换。

谁能让我知道最安全的方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:43:11.223

需要考虑的点

1.  当您要使用 1 表示男性和 0 表示女性时，为什么要使用 bigint 数据类型？BIT/TINYINT 数据类型将起作用
2.  在更改列的数据类型之前，您需要将 Male 更新为 1，将 Female 更新为 0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T07:52:34.250

你们都在这方面走了很长一段路。这是一个简短的测试用例：

```
 create table test (username text, sex text); 
 insert into test values ('bob','male'),('sandra','female'),('stan','male'),('sue','male');
 select * from test;
 username |  sex   
 ----------+--------  
 bob      | male  
 sandra   | female  
 stan     | male  
 sue      | male 
 (4 rows)

 alter table test alter column sex type int using case when sex='male' then 0 when sex='female' then 1 end;

 select * from test;  
 username | sex 
 ----------+-----  
 bob      |   0  
 sandra   |   1  
 stan     |   0  
 sue      |   0 (4 rows) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:50:03.890

*请注意，Postgres 能够`ALTER COLUMN`根据@ScottMarlowe 提供更简单的映射。*

在大多数 RDBMS 中，这也可以按如下方式完成：

1.  创建一个新的临时列，其中包含 Gender 的整数分类
2.  更新表，使用 CASE / WHEN 将旧的 varchar 映射到新的 INT
3.  删除旧的 varchar 列
4.  将旧列添加回表中，这次使用新的数据类型
5.  将临时 BIGINT 列中的数据复制回新列
6.  删除临时 BIGINT 列

您可能还需要处理无效的映射 - 我已经使用案例 ELSE 完成了此操作。正如@Madhivanan 所建议的那样，使用 a`BIGINT`进行性别分类听起来太过分了。

[SQL小提琴在这里](http://www.sqlfiddle.com/#!10/9ff17/1)：

```
-- Add new Column
ALTER TABLE SomeTable ADD GenderTypeId BIGINT;

-- Map old to new
UPDATE SomeTable SET GenderTypeId = 
CASE
   WHEN GenderVarchar = 'male' 
      THEN 0 
   WHEN  GenderVarchar = 'female' 
       THEN 1
   ELSE
      -1 -- Invalid source data
END;

-- Drop old
ALTER TABLE SomeTable DROP COLUMN GenderVarchar; 
```

**更新**

如果您需要使用与原始列相同的名称，那么您还需要重新添加旧列，这次使用新的数据类型，然后再次复制数据。（我给它起了一个新名字）

```
ALTER TABLE SomeTable ADD Gender BIGINT;

-- Copy the data across
UPDATE SomeTable SET Gender = GenderTypeId;

-- Drop the temporary column
ALTER TABLE SomeTable DROP COLUMN GenderTypeId; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:46:13.767

您必须首先更新表并将男性更改为 0，将女性更改为 1

然后你可以改变表...改变列

# java-me - 在 j2me 中拨打电话并获取该通话的状态

> ID：14377186
> 
> 赞同：0
> 
> 时间：2013-01-17T10:39:57.950
> 
> 标签：java-me, lwuit

我正在开发一个项目，我需要拨打给定号码的电话。如果联系人没有接到电话，我需要为另一个用户发起另一个呼叫。那么，我怎样才能在 J2me 中实现这一点。这里我使用 Lwiit 的 Display.getInstance().execute("tel:"+) 方法来发起呼叫。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:40:51.890

除了向应用程序失去对电话控制权的号码发起呼叫外，您无法做任何事情。例如，在 LWUIT 中的[Codename One](http://www.codenameone.com/)中`Display.getInstance().dial(phone)`，您将需要使用`Display.getInstance().execute("tel://" + phone);`.

# php - 上传文件并设置权限

> ID：14377190
> 
> 赞同：0
> 
> 时间：2013-01-17T10:40:19.757
> 
> 标签：php, mysql

我必须上传文件 - 为此我需要将权限设置为 777 ......但是只有登录用户才能访问这些文件 - 最好的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:05:43.023

您应该检查 PHP 函数`chmod`。

[http://php.net/manual/en/function.chmod.php](http://php.net/manual/en/function.chmod.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T19:08:39.770

假设这是一个网站，请尽量避免使用 777 权限，这会增加您的网站被黑客入侵的可能性。

您应该改为使用其他 PHP 处理程序（例如 FastCGI 或 SUPHP）进行调查，这些将允许您的网站以它自己的 FTP 用户的权限而不是 Apache 默认的权限运行，这将允许您写入目录而不必放松来自通常 755 用于目录，644 用于文件。

在最坏的情况下，即使使用 setfacl 命令为 apache/nobody/www-data 用户分配额外的权限，也比使用 chmod 向整个世界打开一个或多个目录要好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T19:12:12.637

就个人而言，我认为您不需要那么重的权限。我要做的是通过 PHP 上传文件，但将文件保存在网络无法访问的文件夹中，然后当一个人想要访问他自己的文件时，而不是直接将他链接到文件，你将他发送到将文件流式传输给他的 PHP 脚本（在检查他的凭据和文件所有权之后，您将其保存在数据库或其他地方）。

# android - 从活动组中的linkedin身份验证重定向回来后，选项卡主机消失

> ID：14377192
> 
> 赞同：1
> 
> 时间：2013-01-17T10:40:30.703
> 
> 标签：android, tabs, android-activity

我遇到了奇怪的问题。我在我的应用程序中集成了 LinkedIn，它包含四个具有自己的活动组的选项卡，通过第四个选项卡，我有一个按钮来处理事件以在墙上显示帖子这是我的代码：

```
liToken =oAuthService.getOAuthRequestToken(OAUTH_CALLBACK_URL);

Intent findnprofitintent = new Intent(Intent.ACTION_VIEW,
                                      Uri.parse(liToken.getAuthorizationUrl()));
startActivity(findnprofitintent); 
```

像这样，当按钮单击此方法调用并将意图传递到 LinkedIn 身份验证页面时。这里一切正常，我能够登录到linkedin并发布消息。但问题是当我重定向回我的应用程序时，底部选项卡消失了（发生登录后）。任何人都可以帮助解决这个问题吗？

谢谢

# ruby - 将访问器映射到包装对象

> ID：14377193
> 
> 赞同：1
> 
> 时间：2013-01-17T10:40:31.350
> 
> 标签：ruby, hash, proxy, accessor

我有一个平面哈希：

```
hash = Hash["prop_one" => 100, "prop_two" => 200, "prop_three" => 300] 
```

我将它包装在一个类中，该类公开这些值*以通过访问器读取*：

```
class WrappedHash

  def prop_one
    config['prop_one']
  end

  def prop_two
    config['prop_two']
  end  

  def prop_three
    config['prop_three']
  end

  def initialize(config)
    self.config = config
  end

end 
```

有没有办法将这些属性的请求代理到哈希，而无需手动添加访问器？（这是一个大哈希）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:47:23.153

如果您有动态哈希键，请使用[OpenStruct；](http://ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html)如果键是静态的并且性能很重要，请使用[Struct 。](http://www.ruby-doc.org/core-1.9.3/Struct.html)

`marshal_dump`OpenStruct 可以通过它的方法转换回 Hash

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T10:51:51.533

您还可以实现 method_missing 方法。当 obj 收到无法处理的消息时，Ruby 会调用它。

```
class WrappedHash
  def method_missing(methId)
    config[methId.to_s]
  end
end 
```

# ios - 在没有 NSURLConnection 的情况下解析和使用数据

> ID：14377197
> 
> 赞同：0
> 
> 时间：2013-01-17T10:40:52.137
> 
> 标签：ios, objective-c, nsurlconnection, nsxmlparser

在我的应用程序中，我需要从服务器获取数据并对其进行解析。`NSXMLParser`通过谷歌搜索，我找到了一个关于并在我的项目中使用它的教程。我刚刚解析了数据并使用下面的方法`viewDidLoad`来阻止我的 UI 阻塞。我没有`NSURLConnection`在我的项目中使用任何地方。但它仍然可以完美运行。

```
[NSThread detachNewThreadSelector:@selector(methodName:) toTarget:self withObject:nil]; 
```

1.必须使用`NSURLConnection`吗？

2.如果我使用`NSURLConnection`Can I write `NSXMLParser`and `NSURLConnection`delegate methods in同一个类（我在一篇文章中读到这不是一个好习惯）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:48:20.507

> 1.  是否必须使用 NSURLConnection？

不，为什么会这样？

> 2.如果我使用 NSURLConnection 我可以在同一个类中编写 NSXMLParser 和 NSURLConnection 委托方法吗？

当然可以。我看不出有任何理由这是不好的做法。

# asp.net-mvc - 创建下拉列表时出错 - 使用 EF 数据库优先方法的 ASP.NET MVC 4 - 为 DI 实现 Ninject

> ID：14377198
> 
> 赞同：1
> 
> 时间：2013-01-17T10:40:53.987
> 
> 标签：asp.net-mvc, entity-framework, dependency-injection, ninject

请看下面的代码。我正在尝试通过使用 EF 数据库优先方法创建一个下拉列表，并为 DI 实现 Ninject。我对这些概念很陌生，我不知道我做错了什么。任何帮助将不胜感激 - 谢谢。

**以下是我的错误：**

无法将类型“System.Collections.Generic.List”隐式转换为“System.Collections.Generic.IEnumerable”。

**下面是我的控制器**

```
public class CitiesController: Controller
{
    private readonly ICitiesRepository repository;
    public CitiesController(ICitiesRepository repository)
    {
        this.repository = repository;
    }

    public ActionResult Index()
    {
        var model = new Models.MyViewModel();
        model.Cities = this
            .repository
            .GetAll()
            .ToList()
            .Select(x => new SelectListItem
            {
                Value = x.Id.ToString(),
                Text = x.Name
            });
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return Content("Thanks for selecting city: " + model.SelectedCityId);
    }
} 
```

**我在模型文件夹下有以下三个类（CityDTO、MyViewModel、MyModel）。**

**CityDTO.cs**

```
 public class CityDTO
    {
        public string CityId { get; set; }
        public string CityName { get; set; }

    } 
```

**MyViewModel.cs**

```
public class MyViewModel
{
    public string SelectedCityId { get; set; }
    public IEnumerable<SelectListItem> Cities { get; set; }
} 
```

**我的模型.cs**

```
public interface ICitiesRepository
{
    IEnumerable<City> GetAll();
}

public class CitiesRepositoryEF: ICitiesRepository
    {
        public IEnumerable<City> GetAll()
        {
            using (var ctx = new LocationEntities())
            {
                return ctx.usp_GetAllCities().ToList();
            }
        }
    } 
```

**GlobalAsax.cs**

```
 protected void Application_Start()
        {
            App_Start.NinjectWebCommon.Start();
            AreaRegistration.RegisterAllAreas();
            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
        } 
```

**App_Start/NinjectWebCommon.cs**

```
private static void RegisterServices(IKernel kernel)
        {
            kernel.Bind<Models.ICitiesRepository>().To<Models.CitiesRepositoryEF>();
        } 
```

**以下是我的观点：**

```
@model TestApp.Models.MyViewModel

@using (Html.BeginForm())
{ 
@Html.DropDownListFor(x=>x.SelectedCityID, Model.Cities, "Select City")
<button type = "submit">OK</button>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:07:13.810

```
public class CitiesRepositoryEF: ICitiesRepository
{
    public IEnumerable<City> GetAll() // <-- Generic of type City
    {
        using (var ctx = new LocationEntities())
        {
            return ctx.usp_GetAllCities().ToList(); // <-- Generic of type (result of usp_GetAllCities)
        }
    }
} 
```

我认为 usp_GetAllCities() 的结果不是返回相同类型（城市）的通用列表（IEnumerable 或其他）。您应该查看 usp 返回的内容，并确保它与您的 GetAll() 方法想要返回的内容相同。

但我不确定 EF 如何处理存储过程以及 edmx 中定义的内容以及所有内容，但这与这种不匹配有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:53:23.690

您的方法签名说它想要返回 IEnumerable，但您正在返回 List。只需像这样调整您的方法：

```
 public List<City> GetAll()
    {
        using (var ctx = new LocationEntities())
        {
            return ctx.usp_GetAllCities().ToList();  
        }
    } 
```

然后您不必再在您的操作中调用 ToList() 了。

```
model.Cities = this
        .repository
        .GetAll()
        //.ToList()  <-- delete this
        .Select(x => new SelectListItem
        {
            Value = x.Id.ToString(),
            Text = x.Name
        }); 
```

希望有帮助

# spring-mvc - Spring mvc 从枚举中选择 - 选择值问题

> ID：14377200
> 
> 赞同：1
> 
> 时间：2013-01-17T10:41:01.753
> 
> 标签：spring-mvc

我正在尝试使用带有 ENum 值的 spring mvc 表单选择。我不能输入选定的值。

这是枚举：

```
public enum MessagesType {

SL(4, 0, 9000000, 9999999), 
BL(1,2, 1000000, 1999999);

private Integer moduleCode;

private Integer subModuleCode;

private Integer rangeMin;

private Integer rangeMax;

    MessagesType(Integer moduleCode, Integer subModuleCode, Integer rangeMin, Integer rangeMax) {
        this.moduleCode = moduleCode;
        this.subModuleCode = subModuleCode;
        this.rangeMax = rangeMax;
        this.rangeMin = rangeMin;
    }

... (getters ans setters) 
```

这是表单调用：

```
<td><form:label path="type">message type:</form:label></td>
                <td>
                    <form:select path="type"  items="${messagesTypes}" itemValue="${messageEditContextDto.type}" />
                </td> 
```

messageEditContextDto 是一个模型 bean，它包含我需要的类型和一堆其他字段：

```
public class MessageEditContextDto implements Serializable {

    private MessagesType type;

    ... 
} 
```

我得到这个异常： *org.springframework.beans.NotReadablePropertyException：bean 类 [com.sapiens.alis.updater.domain.enums.MessagesType] 的无效属性“SL”：Bean 属性“SL”不可读或有无效的 getter方法：getter 的返回类型是否与 setter 的参数类型匹配？*

请帮忙...

谢谢伊多布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:05:57.583

这就是您通常获取枚举值的方式。为简单起见，我正在稍微更改您的代码。

```
public enum MessagesType {
    SL("4"), 
    BL("2");

    private String value;

    private MessagesType(String theValue) {
        this.value = theValue;
    }

    public String getValue() {
        return this.value 
    }
} 
```

表单调用：

```
 <td><form:label>message type:</form:label></td>
    <td>
          <form:select path="type">
              <!-- Characters edition-->
              <c:forEach var="item" items="${MessagesType.values}">
                  <form:option value="{item.value}"><spring:eval expression="item"/></form:option>
              </c:forEach>
          </form:select>
    </td> 
```

这将使您对如何实现目标有所了解。

# java - Swing 应用程序启动时运行函数（私有）

> ID：14377206
> 
> 赞同：0
> 
> 时间：2013-01-17T10:41:30.717
> 
> 标签：java, swing, oop, netbeans

我目前正在制作一个程序，使用 RFID 来获取输入并使用 Java Swing 接口显示其信息。

我的问题是我创建了一个函数，它不断检查 RFID 中是否有输入并使用 Swing 显示它，但是我需要在应用程序启动时运行该函数。

*我尝试使用公共功能，但它不能使用`jlabel.setText`和其他功能，因为它是在静态上运行的。

我考虑添加一个启动按钮只是为了让轮子转动，但我不喜欢使用任何按钮，以便界面干净。

```
package com.domain.test;

import java.io.IOException;
import java.io.InputStream;

public class SerialReader implements Runnable {

    InputStream in;

    public SerialReader(InputStream in) {
        this.in = in;
    }

    public void run() {
        byte[] buffer = new byte[1024];
        String dataHolder;
        String IDnumber = new String();
        int incomingData = -1;
        int ctr = 0;
        try {

            while ((incomingData = this.in.read(buffer)) > -1) {
                dataHolder = new String(buffer, 0, incomingData);

                if (incomingData >= 1) {

                    ctr++;

                    IDnumber = IDnumber + dataHolder;
                    if (IDnumber.length()==14) {

                        System.out.println(IDnumber);
                        log display = new log();
                        display.setLabel(IDnumber.substring(1, IDnumber.length() - 1));
                        IDnumber = new String();
                        ctr = 0;

                    }

                } 

            }

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

我需要做的是将提交给这个函数的数据传递给这个 Swing 函数（setText）。

```
 public void setLabel(String studNum){
   sNum = studNum;
   jName.setText(sNum);
} 
```

问题是我可以传递数据，但我不能用它来显示在我的界面上。这就是为什么我要问如何创建一个将在应用程序启动时运行的函数（可以与 Swing 通信）。

另外，如果您可以给我另一种方式来了解如何将数据传递给我的 Swing。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:44:15.453

您可以实施轮询以查找输入

来自[http://download.oracle.com/javase/tutorial/uiswing/misc/timer.html](http://download.oracle.com/javase/tutorial/uiswing/misc/timer.html)

> Swing 计时器（的一个实例 `javax.swing.Timer`）在指定的延迟后触发一个或多个动作事件。不要将 Swing 计时器与 1.3 版中添加到 java.util 包中的通用计时器工具混淆。本页仅描述 Swing 计时器。
> 
> 一般来说，我们建议使用 Swing 计时器而不是通用计时器来处理与 GUI 相关的任务，因为 Swing 计时器都共享相同的、预先存在的计时器线程，并且与 GUI 相关的任务会自动在事件调度线程上执行。但是，如果您不打算从计时器触摸 GUI，或者需要执行冗长的处理，则可以使用通用计时器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:44:30.153

您需要一个线程、计时器或执行程序服务来启动并检查该 RFID 馈送。

为什么不能在创建应用程序时实例化并启动线程？我认为不需要按钮。

我不会在 Swing 线程上执行此操作。结果将呈现在 UI 中，但操作并不是真正的 Swing 问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T20:36:58.183

> 首先，您需要一个单独的线程来渲染 GUI 以显示 IDNumber，以便在 GUI 渲染 IDNumber 时不会阻塞您的 Reader 线程。

> 其次，您需要同时显示 IDNumber 并从输入流中读取消息。

`SwingWorker`您可以通过使用提供的 API来实现上述两个要求`Swing.`

> 最后，为了确保 Reader 仅在 GUI（显示）启动后才开始运行，您需要`volatile`关键字，以便 JVM 在执行时不会以优化代码为借口更改代码顺序。

在这里，我发布了一个代码片段来实现所有这些。我希望它可能对你有所帮助。

```
import javax.swing.*;
import java.awt.*;
import java.util.List;
class SerialReader extends SwingWorker<Void,String>
{
    Log display ;
    String messages[] =     {
                    "Java supports OOPS!!",
                    "JRE is the bundle of JVM and java Class liberary",
                    "JVM executes the java bytecode.",
                    "JIT converts code at runtime prior to executing it natively",
                    "Stay here I'll be back after reading more about java!!!! :)"
                };
    private SerialReader(){}//To avoid construction of object without parameter
    public SerialReader(Log display)
    {   
        this.display = display;
    }
    @Override
    protected Void doInBackground()
    {
        try
        {
            //Reading Messages one by one till the end
            for(int i=0;i<messages.length;i++)
            {
                String message = messages[i];
                publish(message);
                Thread.sleep(600);//I have added this much delay in compensation to the time 
                        //that would be taken when u are formating data from inputstream.
            }           //You must sleep the Thread for at least 1 ms so that change in 
                        //display could be visualized.
        }catch(Exception ex){ex.printStackTrace();}
        finally
        {
            return null;
        }
    }

    @Override
    protected void process(List<String> chunks)
    {
        for(String msg: chunks)
        {
            display.setLabel(msg);
        }
    }

    @Override
    protected void done()
    {}
}
class Log extends JFrame
{
    private JLabel label = new JLabel("");
    public Log()
    {
        super("Display");
    }
    public void prepareAndDisplay()
    {
        getContentPane().setLayout(new FlowLayout());
        getContentPane().add(label);    
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(400,100);
        setVisible(true);
    }
    public void setLabel(final String value)
    {
        label.setText(value);
    }
}
public class MainClass 
{
    private static volatile Log log;
    private static volatile SerialReader reader;
    public static void main(String st[])
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                log = new Log();
                log.prepareAndDisplay();
                log.setLabel("Display is ready Please Wait for incoming message...");
                try
                {
                    Thread.sleep(100);//Delayed the start of Reader by 100 ms
                }catch(Exception ex){}
                reader = new SerialReader(log);
                reader.execute();
            }       
        });                                 
    }
} 
```

要了解有关`SwingWorker`API 的更多信息，请单击[此处](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)。要了解如何使用，`SwingWorker`请单击[此处](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。

# android - android adb插入联系人，需要点击“完成”才能完成

> ID：14377208
> 
> 赞同：2
> 
> 时间：2013-01-17T10:41:38.993
> 
> 标签：android, android-activity, adb

我正在使用模拟器（android 2.3.3）

```
adb shell "am start -a android.intent.action.INSERT -t vnd.android.cursor.dir/contact -e name 'Android Auto' -e phone 51115111" 
```

这个命令只是帮助我启动“新联系人”并填写姓名和电话。我需要在屏幕上点击完成才能完成插入。

有没有办法在没有人工干预的情况下完成程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-16T15:43:48.890

@Shimon Elbaz 是对的。

“返回键”有助于保存更改。
对我来说（在 Android 4.4.2 上）下一个脚本有效：

```
adb shell am start -a android.intent.action.INSERT -t vnd.android.cursor.dir/contact -e name 'Android Auto22232342' -e phone 51115111
adb shell input keyevent 4
adb shell input keyevent 4
adb shell input keyevent 4 
```

我们需要按 HW Back 按钮 3 次：
- 第一次隐藏键盘
- 第二次关闭 ContactEditorActivity（保存联系人） - 第三次关闭联系信息活动

我的任务是在设备上添加 50 个联系人，为此我编写了一个简单的 bash 脚本：

```
contactCount=50
if (( $# != 0 ))
    then
        let contactCount=$1
fi
for (( c=0; c<contactCount; c++))
do
    adb shell am start -a android.intent.action.INSERT -t vnd.android.cursor.dir/contact -e name 'Test'$c -e phone 511151$c
    adb shell input keyevent 4
    adb shell input keyevent 4
    adb shell input keyevent 4
    wait $pid
done
adb shell input keyevent 4 
```

1.  要添加 50 个联系人，请运行不带参数的脚本：

    ./script.sh

2.  要添加其他联系人计数，请添加一个参数：

    ./script.sh

    前任。添加 3 个联系人：

    ./script.sh 3

另外，我认为有一些更简单的方法可以执行此操作，我会很高兴看到它 =)

感谢关注。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:25:17.413

您可以使用关键事件。基本上 keyevents 也可以通过 adb shell 发送 - adb.exe shell input keyevent #

供应商之间的关键事件大多相似，您可以使用[此图表](http://thecodeartist.blogspot.co.il/2011/03/simulating-keyevents-on-android-device.html)找到正确的事件：

如果它与列表不匹配 - 尝试使用它。

另请注意，在许多设备中，一旦您打开带有信息的意图，按“Home”或“Return”键将自动保存更改。

# php - 如果 $_POST 不为空，则无法提交到页面

> ID：14377216
> 
> 赞同：0
> 
> 时间：2013-01-17T10:42:12.807
> 
> 标签：php, forms, wordpress, http-post

我有一个自定义 wordpress 模板页面，用作支持区域的登录。我希望表单提交到同一页面，该页面是 http:///supportarea。如果我提交没有任何值的表单，我会从页面（或者更确切地说从我的 PHP 函数）得到适当的响应，但奇怪的是，如果我**用**post 值提交相同的页面，我会收到 404 错误。

任何人都可以对此有所了解吗？

**更新：**如果表单操作指向文件的真实位置，它可以工作，但 url 看起来很糟糕，但似乎无法在它的 wordpress 漂亮的 URL 上使用 post 值

```
action="/wp-content/themes/perceptive/supportarea/index.php" 
```

没有表单值： ![在此处输入图像描述](../Images/6661faaf1d106e9d8bb7e44b60673e44.png)

使用表单值： ![在此处输入图像描述](../Images/154d3195c65dc71c9ea945688fde0cb0.png)

FF中的响应： ![在此处输入图像描述](../Images/738119832e32b980a5fe7b686f0b9111.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:10:01.080

您的任何 POST 变量是否命名为“name”？Wordpress 有一个奇怪的错误，当 POST 中有变量“名称”时，它会给出 404。

# javascript - 在 Firefox 的 iframe 中聚焦

> ID：14377219
> 
> 赞同：7
> 
> 时间：2013-01-17T10:42:17.707
> 
> 标签：javascript, firefox, iframe, focus, onload

我将打开一个包含 iframe 的对话框，然后在打开对话框后将焦点设置在 iframe 内。

目前，我尝试在加载内容时将焦点放在 iframe 上：

```
<iframe src="../credits.html" onload="this.contentWindow.focus()"></iframe> 
```

它适用于除 Firefox 之外的所有浏览器，我不明白为什么。

有人能告诉我为什么吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-04T16:01:14.617

Firefox 似乎没有 contentWindow 属性，你应该使用 contentDocument

**更新**：

经过一番小小的辩论，我想出了一个更好的解决方案：

```
<html>
<head>
  <title></title>
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script type="text/javascript">
$(function() {
    $("#xframe").bind("load", function(){
        $(this).contents().find("#xa").focus();
    });
});

  </script>
</head>
<body>
<iframe id="xframe" src="./y.html"></iframe>
</body>
</html> 
```

在这个例子中，我假设 y.html 中有一个输入字段，它有一个“xa”id。它适用于 Chrome 和 Firefox。

**旧答案**

更好的是，您应该使用 jquery，例如：

```
<html>
<head>
  <title></title>
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script type="text/javascript">
   $(document).ready(function() {
    $("#xframe").focus();
   });
  </script>
</head>
<body>
<iframe id="xframe" src="./y.html"></iframe>
</body>
</html> 
```

当然你可以做一些额外的检查来看看 iframe 是否准备好了。

更多信息可以在这里找到[http://www.w3schools.com/jsref/prop_frame_contentwindow.asp](http://www.w3schools.com/jsref/prop_frame_contentwindow.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-05T19:45:26.867

尝试使用 jquery 执行此操作

```
 // focus an input in iframe
 $('#xframe').contents().find('input').get(0).focus()

 // or simply iframe window
var iframe= $('#xframe')[0];
var iframewindow= iframe.contentWindow?     iframe.contentWindow :     iframe.contentDocument.defaultView;
iframewindow.focus() 
```

# java - 使用单个项目字体滚动列表视图时字体更改

> ID：14377220
> 
> 赞同：0
> 
> 时间：2013-01-17T10:42:18.260
> 
> 标签：java, android, listview, fonts

我有一个带有自定义数组适配器的 ListView 设置我想更改每个单独列表项的`getVIew()`字体下面的方法代码确实会更改字体，但是当我向上和向下滚动时字体会发生变化

```
public View getView(int position, View convertView, ViewGroup parent){
    View v = convertView;

    //View row = null;

    if (v == null) {
        LayoutInflater inflater = Main.this.getLayoutInflater();
        v = inflater.inflate(R.layout.genre_list, parent, false);
        TextView item = (TextView)v.findViewById(R.id.txtListText);
        switch(position) {
        case 0:
            tf = Typeface.createFromAsset(getAssets(),"fonts/font (1).ttf");item.setTypeface(tf);
            break;
        case 1:
            tf = Typeface.createFromAsset(getAssets(),"fonts/font (2).ttf"); item.setTypeface(tf);
            break;
        case 2:
            tf = Typeface.createFromAsset(getAssets(),"fonts/font (3).ttf"); item.setTypeface(tf);
            break;
        case 3:
            tf = Typeface.createFromAsset(getAssets(),"fonts/font (4).ttf"); item.setTypeface(tf);
            break;
        case 4:
            tf = Typeface.createFromAsset(getAssets(),"fonts/font (5).ttf"); item.setTypeface(tf);
            break;
        case 5:
            tf = Typeface.createFromAsset(getAssets(),"fonts/font (6).ttf"); item.setTypeface(tf);
            break;
        case 6:
            tf = Typeface.createFromAsset(getAssets(),"fonts/font (7).ttf"); item.setTypeface(tf);
            break;
        case 7:
            tf = Typeface.createFromAsset(getAssets(),"fonts/font (8).ttf"); item.setTypeface(tf);
            break;
        case 8:
            tf = Typeface.createFromAsset(getAssets(),"fonts/font (9).ttf"); item.setTypeface(tf);
            break;
        case 9:
            tf = Typeface.createFromAsset(getAssets(),"fonts/font (10).ttf"); item.setTypeface(tf);
            break;
        default:
            tf = Typeface.createFromAsset(getAssets(),"fonts/font (10).ttf"); item.setTypeface(tf);
        }
    }

    TextView item = (TextView)v.findViewById(R.id.txtListText);
    item.setText(Genres[position]);     

    // Declare and define the TextView, "icon." This is where
    // the icon in each row will appear.

    return v;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:51:41.037

```
String[] typefaceArr = new String[] {"fonts/font (1).ttf", "fonts/font (2).ttf",     
"fonts/font (3).ttf", "fonts/font (4).ttf", "fonts/font (5).ttf", "fonts/font (6).ttf",    
"fonts/font (7).ttf", "fonts/font (8).ttf", "fonts/font (9).ttf", "fonts/font (10).ttf",     
"fonts/font (10).ttf"};

    public View getView(int position, View convertView, ViewGroup parent)
    {
        View v = convertView;

        //View row = null;

        if (v == null) {
            LayoutInflater inflater = Main.this.getLayoutInflater();
             v = inflater.inflate(R.layout.genre_list, parent, false);
             TextView item = (TextView)v.findViewById(R.id.txtListText);
             /*switch(position) {
             case 0:
                  tf = Typeface.createFromAsset(getAssets(),"fonts/font (1).ttf");item.setTypeface(tf);
                  break;
             case 1:
                  tf = Typeface.createFromAsset(getAssets(),"fonts/font (2).ttf"); item.setTypeface(tf);
                 break;
             case 2:
                  tf = Typeface.createFromAsset(getAssets(),"fonts/font (3).ttf"); item.setTypeface(tf);
                 break;
             case 3:
                  tf = Typeface.createFromAsset(getAssets(),"fonts/font (4).ttf"); item.setTypeface(tf);
                 break;
             case 4:
                  tf = Typeface.createFromAsset(getAssets(),"fonts/font (5).ttf"); item.setTypeface(tf);
                 break;
             case 5:
                  tf = Typeface.createFromAsset(getAssets(),"fonts/font (6).ttf"); item.setTypeface(tf);
                 break;
             case 6:
                  tf = Typeface.createFromAsset(getAssets(),"fonts/font (7).ttf"); item.setTypeface(tf);
                 break;
             case 7:
                  tf = Typeface.createFromAsset(getAssets(),"fonts/font (8).ttf"); item.setTypeface(tf);
                 break;
             case 8:
                  tf = Typeface.createFromAsset(getAssets(),"fonts/font (9).ttf"); item.setTypeface(tf);
                 break;
             case 9:
                  tf = Typeface.createFromAsset(getAssets(),"fonts/font (10).ttf"); item.setTypeface(tf);
                 break;
             default:
                 tf = Typeface.createFromAsset(getAssets(),"fonts/font (10).ttf"); item.setTypeface(tf);
         }*/
        }

        TextView item = (TextView)v.findViewById(R.id.txtListText);
        item.setText(Genres[position]);
        tf = Typeface.createFromAsset(getAssets(),typefaceArr[position]);
        item.setTypeface(tf);
        // Declare and define the TextView, "icon." This is where
        // the icon in each row will appear.

        return v;
    } 
```

# c++ - 从 VS2010 C++ 编译器中排除特定的标准库函数

> ID：14377222
> 
> 赞同：-1
> 
> 时间：2013-01-17T10:42:24.017
> 
> 标签：c++

有没有办法为 VS2010 编译器停用 C++ 中标准库的某些功能？例如，如果我希望一个团队不能使用 std::max 或 std::min 并且如果他们仍然这样做，编译器应该给出一个错误。那可能吗？我怎么能这样做？

谢谢和最好的问候，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:07:29.653

不。没有充分的理由，您的示例 ( `std::max`) 肯定不是。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T11:32:39.843

您可以重新定义您不想使用的函数，只要它们在 std 库之前被拉入，编译器就会使用您的。然后，您可以在编译期间使用#error 标记对其进行标记。

```
namespace std {
    template <class T> const T& min ( const T& a, const T& b )
    {
        #error("Don't use this")
    }
    template <class T, class Compare>
    const T& min ( const T& a, const T& b, Compare comp )
    {
        #error("Don't use this")
    }
}

#include <algorithm>

int main()
{
    return std::min(5, 4);
} 
```

# javascript - javascript 因错误而停止

> ID：14377225
> 
> 赞同：0
> 
> 时间：2013-01-17T10:42:34.320
> 
> 标签：javascript, debugging

我有一个影响 JS 代码库的难以定位的错误；周期性地，数组被越界访问，这会导致`TypeError: initial[data[(i + offset)]] is undefined`错误（注意：在许多地方都可以找到类似的索引）。有什么方法可以使错误致命并在该点停止执行，以便可以检查堆栈跟踪？

如何在不在代码库周围添加 throws() 或 if 语句的情况下强制这些警告变为错误？有没有办法强制执行“严格”操作，比如`-Wall -Wfatal-errors`gcc 中的标志？

我正在使用最新的稳定版 FireBug+Firefox，但如果那里有任何机制，可以转换到 Chrome 控制台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:56:02.280

只需启用[break on…</a>](http://getfirebug.com/wiki/index.php/Script_Panel#Breakpoints) [all errors](http://getfirebug.com/wiki/index.php/Console_Panel#Break_On_All_Errors)。

Chrome Devtools 和 Opera Dragonfly 提供了类似的选项。

# php - 将 UPDATE 与不同数量的字段和 Prepared Statement 一起使用

> ID：14377228
> 
> 赞同：0
> 
> 时间：2013-01-17T10:42:51.020
> 
> 标签：php, mysqli, prepared-statement

我试图理解准备好的陈述，并为此做出准备好的陈述：

```
// UPDATE GAME PLAYERS DATA IN DB // 
mysql_query("UPDATE ".$prefix."_gameplayer SET player_tiles='$playertiles'
                                             , player_draws='$udraws'
                                             , player_turn=0
                                             , last_draw_type=1 
                                WHERE fk_player_id=$playerid AND fk_game_id=$currgame");

// UPDATE GAME OPPONENTS DATA IN DB //  
mysql_query("UPDATE ".$prefix."_gameplayer SET player_turn=1
                                             , last_draw_type=2 
                                WHERE fk_player_id=$opponent AND fk_game_id=$currgame"); 
```

我正在考虑这样做，但正在徘徊如何确保不更新第二条语句中的某些字段：

```
$stmt->prepare("UPDATE ".$prefix."_gameplayer SET player_tiles='?'
                                             , player_draws=?
                                             , player_turn=?
                                             , last_draw_type=? 
                                WHERE fk_player_id=? AND fk_game_id=?");

$stmt->bind_param('siiiii', $playertiles,$udraws,0,1,$playerid,$currgame);
$stmt->execute();

$stmt->bind_param('siiiii', ?,?,1,2,$playerid,$currgame);
$stmt->execute(); 
```

在第二个语句中，我不想更新前两个字段？？？这可以做到吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:55:57.170

简短的回答：准备好的语句具有固定的参数。如果要执行两个具有不同参数计数的查询，则需要准备两个语句 - 每个更新类型一个。

长答案：您可能会使用肮脏的技巧，例如在可选参数上创建 CASE 语句，例如

```
SET x=CASE WHEN something THEN ? ELSE x END 
```

但这真的值得吗？它使查询变得更加复杂，并且更难维护。当您只需要修改其中一个查询时会发生什么？

# flash - Flash getURL() 在影片剪辑内部不起作用

> ID：14377229
> 
> 赞同：1
> 
> 时间：2013-01-17T10:42:52.887
> 
> 标签：flash, actionscript-2

我最近遇到一个问题，我的代码从根目录工作，但是当我把这个影片剪辑放在影片剪辑中时它不起作用

```
on(release){
getURL("fast_facts.html")
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:47:15.707

试试 this.getURL("fast_facts.html", "_blank", "GET");

# iphone - 更改包显示名称会破坏 CoreData 持久存储协调器

> ID：14377233
> 
> 赞同：0
> 
> 时间：2013-01-17T10:42:56.280
> 
> 标签：iphone, ios, core-data

有谁知道为什么将捆绑显示名称从更改`${PRODUCT_NAME}`为`Application`引发以下 CoreData 错误？

```
Failed to create file; code = 2 
```

我的`xcdatamodeld`名称完全相同（此外，商店 URL 具有此名称。`Application``${PRODUCT_NAME}``@"Application.sqlite"`

我正在 Info.plist 文件下更改这些值。

**编辑**

错误在以下行

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil) {
        return __persistentStoreCoordinator;
    }

    // This line produces the error
    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Beezer.sqlite"];
...
} 
```

# html - HTML 用于获取滚动条的标签

> ID：14377236
> 
> 赞同：1
> 
> 时间：2013-01-17T10:43:00.293
> 
> 标签：html, css

我有一个用于滚动条的 div 部分，但我坚持更改 div 部分的宽度和高度，无论我改变什么都没有结果。

```
<DIV class=scroll style=overflow-y:hidden;overflow-y:hidden> description</DIV> 
```

在 css
.scroll { }

即使“滚动”内没有任何东西，当我在 DIV 标记中使用溢出时，滚动条也会出现，但是如果我在 DIV 滚动条中删除 class=scroll 不会出现。我已经使用了高度宽度所有更改，但没有发生任何事情，请以正确的方式指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-12T06:37:09.083

你可以用这个

```
<div style="overflow: scroll ;max-height: 250px; width: 50%;"> 
```

根据您的要求更改属性值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:49:36.447

您使用的是什么文档类型？您应该将 html5 与您的标记一起使用：

```
<!DOCTYPE html>
<html>
  ...
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:48:32.637

移除内联样式并`overflow: scroll`在 CSS 中使用：

[http://jsfiddle.net/vqEkp/](http://jsfiddle.net/vqEkp/)

`hidden` `overflow-x/-y`标签明确地告诉浏览器总是删除（隐藏）滚动条。

如果您希望滚动条仅在需要时出现，只需`overflow`完全保留标签，或将它们设置为`auto`.

或者，将`overflow: scroll`位置于内联样式中。尽管通常您应该尽可能使用样式表而不是内联 CSS 样式。

```
<DIV class="scroll" style="overflow:scroll"> description</DIV> 
```

ps 您应该在属性值周围使用引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:50:51.540

用这个

```
<div style="overflow: scroll;">your content</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T10:51:17.803

如果是特定元素，您可以创建一个 ID。转到您的 css 并执行以下操作。

```
#element {
    width: ??px;
    height: ??px;
} 
```

转到您的 HTML 并添加“id="element"。

```
 <DIV id="element" class=scroll style=overflow-y:hidden;overflow-y:hidden> description</DIV> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-11T20:29:52.747

## 永久滚动条

这将为始终可见的元素提供滚动条。如果内容较少且不需要滚动，滚动条仍然存在，只是样式为禁用。

```
.scroll{
    overflow: scroll;
    height: 100px;
} 
```

## 滚动条，仅在需要时

这将在**需要时**产生滚动条，如果内容较少且不需要滚动，则不会有滚动条。这可能看起来更好，并且不占用任何宽度。

```
.scroll{
    overflow: auto;
    height: 100px;
} 
```

## 文档类型

您的内联编码做奇怪事情的原因也可能是因为错误的文档类型，这应该被定义。这些天的常见做法是`<!DOCTYPE HTML>`。您只需将其放在 html 文件的开头，然后`<html>`

* * *

# 例子

```
.example_auto{
    height: 75px;
    overflow: auto;
    width: 24%; /*  just for demo */
    display: inline-block; /*  just for demo */
    vertical-align: top; /*  just for demo */
    background: #FFC; /*  just for demo */
}
.example_scroll{
    height: 75px;
    overflow: scroll;
    width: 24%; /*  just for demo */
    display: inline-block; /*  just for demo */
    background: #FCF; /*  just for demo */
}
```

```
<div class="example_auto">This is too little content to scroll.</div>
<div class="example_scroll">This is too little content to scroll.</div>

<div class="example_auto">This div has waaaaay more content en will need a scrollbar. This will look almost the same in both cases.</div>
<div class="example_scroll">This div has waaaaay more content en will need a scrollbar. This will look almost the same in both cases.</div>
```

# asp.net-mvc-4 - .Net 4.5 与 MVC4 的错误

> ID：14377238
> 
> 赞同：1
> 
> 时间：2013-01-17T10:43:01.823
> 
> 标签：asp.net-mvc-4, .net-4.5, asp.net-4.5

我正在努力解决框架 4.5 的问题。我们的 asp.net mvc4 Web 应用程序在安装了 .net 4.0 的 2008R2 服务器上运行良好，但是当我们将框架升级到 .net 4.5 时，我们似乎遇到了某种令人讨厌的错误：

> 无法从程序集“...”加载类型“...”，因为方法“...”没有实现（无 RVA）

当从 asp.net 生成的 .aspx 视图的 .cs 代码中使用反射获取类型时，框架会引发此异常异常。我们得到一个 YSOD：

> “/”应用程序中的服务器错误。 **无法从程序集 'App_Web_index.aspx.aeda16c.y-wvrppj，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null' 加载类型 'ASP.views_beherenecli_actielijstecli_index_aspx'，因为方法 '__RenderContent3' 没有实现（无 RVA）。** 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.TypeLoadException：无法从程序集“App_Web_index.aspx.aeda16c.y-wvrppj”加载类型“ASP.views_beherenecli_actielijstecli_index_aspx”，版本=0.0.0.0，文化=中性，PublicKeyToken=null，因为方法“__RenderContent3”具有没有实施（没有 RVA）。
> 
> 源错误：在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：[TypeLoadException：无法从程序集“App_Web_index.aspx.aeda16c.y-wvrppj，版本=0.0.0.0，文化=中性，PublicKeyToken=null”加载类型“ASP.views_beherenecli_actielijstecli_index_aspx”，因为方法“_*RenderContent3' 没有实现（无 RVA）。] System.Reflection.RuntimeAssembly.GetType（RuntimeAssembly 程序集，字符串名称，布尔 throwOnError，布尔 ignoreCase，ObjectHandleOnStack 类型）+0 System.Reflection.RuntimeAssembly.GetType（字符串名称，布尔 throwOnError， Boolean ignoreCase) +73 System.Web.Compilation.BaseTemplateBuildProvider.GetGeneratedType(CompilerResults 结果, Boolean useDelayLoadTypeIfEnabled) +128 System.Web.Compilation.BuildProvider.CreateBuildResult(CompilerResults 结果) +103 System.Web.Compilation.BuildProvider.GetBuildResult(CompilerResults 结果) +23 System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath) +599 System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild,布尔allowCrossApp，布尔allowBuildInPrecompile，布尔throwIfNotFound，布尔ensureIsUpToDate）+571 System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert（HttpContext上下文，VirtualPath virtualPath，布尔noBuild，布尔allowCrossApp，布尔allowBuildInPrecompile，布尔throwIfNotFound，布尔ensureIsUpToDate）+203 System.Web .Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound) +249 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath) +36 System.Web.WebPages。 DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, FuncBoolean ensureIsUpToDate) +571 System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +203 System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath , HttpContext 上下文, Boolean allowCrossApp, Boolean throwIfNotFound) +249 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath) +36 System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath , 功能Boolean ensureIsUpToDate) +571 System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +203 System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath , HttpContext 上下文, Boolean allowCrossApp, Boolean throwIfNotFound) +249 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath) +36 System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath , 功能Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +203 System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound) +249 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager .FileExists(String virtualPath) +36 System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, FuncBoolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +203 System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound) +249 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager .FileExists(String virtualPath) +36 System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, FuncWebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, FuncWebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, Func`2 virtualPathExists) +55 System.Linq.WhereSelectListIterator`2.MoveNext() +245 System.Linq.Enumerable.FirstOrDefault(IEnumerable `1 source, Func`2 谓词) +215 System.Web.WebPages.DisplayModeProvider.GetDisplayInfoForVirtualPath(String virtualPath, HttpContextBase httpContext, Func `2 virtualPathExists, IDisplayMode currentDisplayMode) +27 System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 位置, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations) +402 System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String []& searchedLocations) +942 System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache) +206 System.Web.Mvc.<>c*_DisplayClassc.b_ *b(IViewEngine e) +47 System.Web.Mvc.ViewEngineCollection.Find(Func `2 lookup, Boolean trackSearchedPaths) +176 System.Web.Mvc.ViewResult.FindView(ControllerContext context) +110 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +147 System.Web.Mvc.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17() +33 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 继续) +613 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +263 System .Web.Mvc.Async.<>c* _DisplayClass25.b_ *22(IAsyncResult asyncResult) +240 System.Web.Mvc.<>c* _DisplayClass1d.b_ *18(IAsyncResult asyncResult) +28 System.Web.Mvc.Async.<>c* _DisplayClass4.b_ *3(IAsyncResult ar) +15 System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +53 System.Web.Mvc.Async.<>c* _DisplayClass4.b_ *3(IAsyncResult ar) +15 System.Web。 mvc.<>c*_DisplayClass8.b_ *3(IAsyncResult asyncResult) +42 System.Web.Mvc.Async.<>c* _DisplayClass4.b__3(IAsyncResult ar) +15 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +606 System .Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288

**问题：我是唯一有这个问题的人吗？有谁知道如何解决这个问题或知道修复？**

注意：代码是在带有框架 4.0 的构建服务器上编译的。这个问题似乎真的与 .Net 4.5 有关，因为当我们降级到 4.0 时，问题就消失了。

我们尝试过的事情：

*   删除临时 ASP.NET 文件夹
*   在 web.config 中使用编译元素和 targetFramework="4.5" 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:20:33.373

在 HTML 帮助方法中使用 C#“动态”关键字似乎是问题的根源。主渲染方法的 RVA 值为 0，这导致“方法没有实现（无 RVA）异常”。当 asp.net 尝试解析包含该方法的类型时出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:44:15.520

看看这个：

[将 ASP.NET MVC 应用程序的目标框架从 4.0 升级到 4.5](http://blogs.msdn.com/b/prashant_upadhyay/archive/2012/10/19/upgrading-target-framework-from-4-0-to-4-5-for-asp-net-mvc-applications.aspx)

将 ASP.NET MVC 4 应用程序从 .NET 4.0 升级到 .NET 4.5 框架并非易事。

# php - 在ajax中返回php异常消息是否安全

> ID：14377244
> 
> 赞同：0
> 
> 时间：2013-01-17T10:43:27.193
> 
> 标签：php, ajax, security, exception

我们在项目中抛出的异常包含存储过程和类的名称。有时它们包含表的名称，但我们应该捕获任何其他关键信息。在 ajax 中处理异常的防弹方法是仅使用 ajax 发送错误代码，但是作为程序员，如果您在 ajax 中传递消息（它们可能通过网络面板可见），则调试和维护代码要容易得多）。

在大型项目中，这方面的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:02:40.240

不幸的是，没有 DEBUG 语句。看[这里](https://stackoverflow.com/questions/193044/does-php-have-a-debug-symbol-that-can-be-used-in-code) 尽管讨论了如何实现项目范围的解决方案来区分代码中的 DEBUG 和 PRODUCTION，事实是你应该兼顾性能（看[这里](http://www.litfuel.net/plush/?postid=143)）和安全性。

攻击者当然希望获得有关您的数据库和实施实践的一些信息。表名和字段将为他提供例如他需要在 UNION sql 注入查询中使用的字段数。

# c# - 在 VS2010 中无法获得使用 IISOle 对象的参考

> ID：14377249
> 
> 赞同：3
> 
> 时间：2013-01-17T10:43:39.297
> 
> 标签：c#, visual-studio-2010, windows-7, iis-7

我试图在 Visual Studio .NET 中获取对 Active DS IIS 命名空间提供程序的引用。这个参考将使我能够使用 IISOle 命名空间......

我尝试通过在 Visual Studio 2010 中执行以下步骤来添加引用：

1.  添加参考
2.  通讯

在我的参考列表中，我只能看到“Active DS 类型库”，这并没有为我提供使用 IISOle 所需的参考。我已经读到您需要**“Active DS IIS 命名空间提供程序”**，但它没有出现在我的列表中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-06T09:23:34.760

在 Windows 7 中，您必须添加 IIS6 扩展：

1.  在“控制面板”中，转到“程序和功能”，“打开或关闭 Windows 功能”并检查 IIS 下的所有内容，包括 IIS 6 的内容。

2.  确保选中“IIS 元数据库和 IIS 6 配置兼容性”功能，该功能位于“Internet 信息服务”>“Web 管理工具”>“IIS 6 管理兼容性”下。

[![Windows 功能 Windows 10 中的 IIS 6 管理兼容性选项](../Images/ac5d32e1f66f493de9a15c2f576b6097.png)](https://i.stack.imgur.com/m7g56.png)

3.  然后你可以将这些 COM 引用添加到你的 VS2010 项目中：
    *   活动 DS IIS 扩展 Dll
    *   活动 DS IIS 命名空间提供程序

你完成了！:-)

# python - Python 3 - SQL 结果 - 存储位置

> ID：14377250
> 
> 赞同：1
> 
> 时间：2013-01-17T10:43:41.287
> 
> 标签：python, database, multithreading

我正在用瓶子写一个 webapp。
我有一个小界面，可以让用户运行 sql 语句。
有时用户需要大约 5 秒钟才能得到结果，因为数据库很大而且很旧。

我想要做的是以下内容：
1.在线程中启动查询 2.立即
给用户一个响应并让 ajax 轮询结果

有一件事我不确定....我在哪里存储查询结果？
我应该将它存储在数据库中吗？
我应该将它存储在我的 webapp 内的变量中吗？

你们认为最好的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:18:18.850

这对于诸如 memcached 之类的东西将是一个很好的用途。

# c# - 使用 Html 内容解析 Json 字符串

> ID：14377251
> 
> 赞同：3
> 
> 时间：2013-01-17T10:43:41.497
> 
> 标签：c#, html, json, json.net

我使用 Json.net 解析来自网络的 json 响应，但如果 json 响应包含 html 代码，我会遇到问题。

例如：

```
string hj = @"{""data"": ""<a href=""www.google.com"">Google</a>""}";
JObject o1 = JObject.Parse(hj); 
```

它引发了一个例外。

如何解析 JSON 响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:46:49.563

JSON 无效，因此无法解析。您必须转义字符串中的引号：

```
string hj = @"{""data"": ""<a href=\""www.google.com\"">Google</a>""}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:47:07.937

尝试使用 System.Web.HttpUtility.HtmlEncode() 方法对 HTML 代码进行编码

# html - 如何强制图像在提到的宽度和高度内？

> ID：14377253
> 
> 赞同：0
> 
> 时间：2013-01-17T10:43:44.170
> 
> 标签：html, css

我想要一些 css 在不裁剪的情况下获得上述宽度和高度内的图像。

我已经这样做了：

```
.btnEdit{ background-image: url(/images/btn_Edit_PICO.gif); 
    cursor:pointer;
    margin: 0;
    padding: 0;
    border: 0;
    background-repeat: no-repeat;
    background-color: transparent;
    height: 22px ; 
    width: 54px;} 
```

但是，这并没有发生。另一个按钮在那里，但大小不同。

```
.btnDelete{background-image: url(/images/btn_Delete_PICO.gif); 
cursor:pointer; 
margin: 0;
padding: 0;
border: 0;
background-repeat: no-repeat;
background-color: transparent; 
height: 22px ;
width: 54px;} 
```

我希望那些尺寸相同，尽管实际图像尺寸可能不同。

图片： ![编辑删除演示](../Images/4b0a7e30163e8e763249b3deccd26b1b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:56:37.500

为什么ru使用两个类？如果您的两个按钮相同，则仅使用一个类

CSS

```
 .btn
    { 
    background:blue; 
    cursor:pointer; 
    margin: 0; 
    padding: 0;
    border: 0;
    background-repeat: no-repeat;
height: 22px ; 
width: 54px;
    } 
```

HTML

```
<div class="btn">
<input type="Button" value="EDIT"/>
</div>

<div class="btn">
<input type="Button" value="Delete"/>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:57:58.390

您是否尝试过使用 CSS3 属性`background-size`？

```
background-size: cover; 
```

或者

```
background-size: 100% auto; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:49:53.193

如果您必须调整背景大小，我认为无法做到。如果您的图像具有正确的宽度和高度，请使用背景位置来“裁剪”。

# jakarta-ee - Java EE Timer Service、程序化计时器和应用程序部署

> ID：14377255
> 
> 赞同：3
> 
> 时间：2013-01-17T10:43:51.940
> 
> 标签：jakarta-ee, deployment, timer

我正在以编程方式使用 Java EE 定时器服务来创建持久定时器

```
@Resource
TimerService timerService;

...
timerService.createCalendarTimer( scheduleExpression, new TimerConfig( ..., true ) ); 
```

计时器按预期工作并保持不变：我可以停止和启动服务器，计时器仍然存在。

现在，当我部署新版本的应用程序时，计时器会丢失。有没有办法：

*   在同一台服务器上重新部署应用程序时保留计时器

*   部署后我的 Java EE 应用程序的第一次启动调用了一个方法，以便我可以重新创建所有计时器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:41:11.163

看到[这个答案](https://stackoverflow.com/a/8134629/2935)。简而言之; 没有自动方法可以让计时器保持重新部署，您需要自己处理。也许在应用程序启动时使用重新创建它们`@Startup`？

# php - 获取 MySQL 查询和 SUMS 中变量的平均值

> ID：14377258
> 
> 赞同：0
> 
> 时间：2013-01-17T10:44:06.863
> 
> 标签：php, mysql, sql

（这是对我之前的问题的重写，可能还不够清楚）

我有一个 MYSQL 数据库的查询，如下所示：

```
SELECT name,
SUM(IF(date_format (date, '%b, %Y')= 'Dec, 2011', 1,0)) AS `month1`, 
SUM(IF(date_format (date, '%b, %Y')= 'Jan, 2012', 1,0)) AS `month2`, 
SUM(IF(date_format (date, '%b, %Y')= 'Feb, 2012', 1,0)) AS `month3`, 
etc... 
```

这让我得到了一系列结果，例如 - month1=55、month2=70、month3=89 等

在查询中有一行 -

```
COUNT(*) AS total FROM table order by total 
```

这实际上给了我一个月 1+month2+month3+ 等

但是，我还需要获得这些相同每月总数的平均值

所以我需要一个 MySQL 函数，它实际上类似于

```
AVG (month1, month2, month3 etc) 
```

这将给出 55,70,89 的平均值

任何人都可以帮忙吗？

非常感谢

根据要求，完整的查询是 -

```
SELECT name, 
    SUM(IF(date_format (date, '%b, %Y')= 'Nov, 2011', 1,0))/list*1000 AS `month1`, 
    SUM(IF(date_format (date, '%b, %Y')= 'Dec, 2011', 1,0))/list*1000 AS `month2`, 
    SUM(IF(date_format (date, '%b, %Y')= 'Jan, 2012', 1,0))/list*1000 AS `month3`, 
    SUM(IF(date_format (date, '%b, %Y')= 'Feb, 2012', 1,0))/list*1000 AS `month4`, 
    SUM(IF(date_format (date, '%b, %Y')= 'Mar, 2012', 1,0))/list*1000 AS `month5`, 
    SUM(IF(date_format (date, '%b, %Y')= 'Apr, 2012', 1,0))/list*1000 AS `month6`, 
    SUM(IF(date_format (date, '%b, %Y')= 'May, 2012', 1,0))/list*1000 AS `month7`, 
    SUM(IF(date_format (date, '%b, %Y')= 'Jun, 2012', 1,0))/list*1000 AS `month8`, 
    SUM(IF(date_format (date, '%b, %Y')= 'Jul, 2012', 1,0))/list*1000 AS `month9`, 
    SUM(IF(date_format (date, '%b, %Y')= 'Aug, 2012', 1,0))/list*1000 AS `month10`, 
    SUM(IF(date_format (date, '%b, %Y')= 'Sep, 2012', 1,0))/list*1000 AS `month11`, 
    SUM(IF(date_format (date, '%b, %Y')= 'Oct, 2012', 1,0))/list*1000 AS `month12`, 
    COUNT(*) AS total 
FROM table 
group by name 
order by total 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:52:11.773

在您的情况下，您可以使用子查询 -

```
SELECT name,
  `month1`, `month2`, `month3`
  total,
  (`month1` + `month2` + `month3`) / 3 AS `avg`
FROM
  (SELECT name, 
    SUM(IF(date_format (date, '%b, %Y')= 'Nov, 2011', 1,0))/list*1000 AS `month1`, 
    SUM(IF(date_format (date, '%b, %Y')= 'Dec, 2011', 1,0))/list*1000 AS `month2`, 
    SUM(IF(date_format (date, '%b, %Y')= 'Jan, 2012', 1,0))/list*1000 AS `month3`, 
    COUNT(*) AS total 
  FROM table 
  GROUP BY name 
  ORDER BY total
  ) t 
```

* * *

但我建议你使用这样的东西 -

```
SELECT month, AVG(cnt) cnt FROM
  (SELECT MONTH(DATE) month, COUNT(*) cnt FROM table1 GROUP BY month) t
GROUP BY month WITH ROLLUP 
```

...您只应该添加年份支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:50:39.320

你可以简单地使用

```
SELECT name, month1,month2,...., AVG(month1,month2,...,month12) as Average FROM
(
SELECT name,
SUM(IF(date_format (date, '%b, %Y')= 'Dec, 2011', 1,0)) AS `month1`, 
SUM(IF(date_format (date, '%b, %Y')= 'Jan, 2012', 1,0)) AS `month2`, 
SUM(IF(date_format (date, '%b, %Y')= 'Feb, 2012', 1,0)) AS `month3`, 
etc...
) as t 
```

# php - touch() 期望参数 1 是字符串，资源给定

> ID：14377259
> 
> 赞同：0
> 
> 时间：2013-01-17T10:44:14.643
> 
> 标签：php, filesystems

此问题仅在第一次调用时发生。第二次，没有错误，没有问题。每天调用一次以更新货币汇率。

```
private function updateRates()
    {
        $szContent = file_get_contents(self::OPT_URL);

        if(!$szContent)
        {
            throw new Exception('XML resource unavailable.');
        }

        $pXML = new SimpleXMLElement($szContent);
        $aRates = array();

        foreach($pXML->Cube->Cube->Cube as $pChildren)
        {
            $aRates[(string) $pChildren['currency']] = (float) $pChildren['rate'];
        }

        $pFile = fopen(self::OPT_FILE, 'w+');
        fwrite($pFile, json_encode($aRates));
        fclose($pFile);
        touch($pFile);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:48:27.133

你根本不需要`touch()`。`touch()`如果文件不存在（但它存在，因为您刚刚创建它）将创建该文件，或者它将时间设置为当前日期和时间（这已经由 完成`fclose()`）。

无论哪种方式，你都会做一些已经做过的事情。

也就是说，正确的答案是 Mark Ba​​ker 的答案：您需要提供`touch()`文件名，而不是文件句柄。

**更新**：您问，“第二次，没有错误，没有问题 - 为什么？”。我看不出您如何调用该调用而*不会*收到错误。即使`fopen`失败并返回`false`，你也会从`touch()`. 所以我担心这个“第二次”要么函数**根本没有被调用**，要么有**一些微妙的错误阻止它的执行到达 touch()**。也有可能引发错误*，*但它会以某种方式被捕获或隐藏。

但我肯定知道：每次`touch(<resource>)` **都会失败。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:47:57.897

`touch`需要一个文件名，imo。你给它文件句柄`$pFile`。

更改`touch($pFile);`并`touch(self::OPT_FILE);`查看它是否有效。

# java - 在 JFrame 中传递组件列表的 ActionListener

> ID：14377262
> 
> 赞同：1
> 
> 时间：2013-01-17T10:44:19.220
> 
> 标签：java, swing, user-interface, jbutton, actionlistener

我很困惑，我见过的许多例子只处理一个按钮监听器被传递。我希望能够将视图类（JFrame）的*所有*组件传递给控制器​​类，控制器类可以轻松访问这些组件的侦听器。我怎样才能轻松做到这一点。这是我到目前为止所做的`JMenuItem`，但是在 JFrame 中我有更多按钮，不想每次都在构造函数中重复。

```
 public class EventController implements ActionListener {
    private EventModel model;
    private EventView view;

    public EventController(){
        model = new EventModel(); 

    }

    @Override
   public void actionPerformed(ActionEvent e) {
       if (e.getActionCommand().equals("add")) {
       JOptionPane.showMessageDialog(null, "add button clicked");
   }   else if (e.getActionCommand().equals("edit")) {
       JOptionPane.showMessageDialog(null, "edit button clicked");
   }   else if (e.getActionCommand().equals("delete")) {
       JOptionPane.showMessageDialog(null, "delete button clicked");
  }

    } 
```

//类视图

```
 public class EventView extends javax.swing.JFrame {
Connection conn = JavaConnect.ConnectDB();
PreparedStatement pst = null; 
ResultSet rs = null; 

    public EventView() {
        initComponents();
        updateEventTable();
        addEvent.addActionListener(new EventController());
        addEvent.setActionCommand("add");
        editEvent.addActionListener(new EventController());
        editEvent.setActionCommand("edit");
        deleteEvent.addActionListener(new EventController());
        deleteEvent.setActionCommand("delete");
    }
    public void updateEventTable() {
        try {
            String sql = "SELECT date as 'Date',eventName as 'Name', time as 'Start Time' FROM Event";
             pst = conn.prepareStatement(sql); 
             rs = pst.executeQuery();
             tableEvent.setModel(DbUtils.resultSetToTableModel(rs));
             tableEvent.getColumnModel().getColumn(0).setPreferredWidth(80);
             tableEvent.getColumnModel().getColumn(1).setPreferredWidth(170);
             tableEvent.getColumnModel().getColumn(2).setPreferredWidth(110);  
    }
        catch (Exception e ) {
                     JOptionPane.showMessageDialog(null, e);
        } finally {
            try {
                rs.close(); pst.close();conn.close();;
            } catch(SQLException e){}
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:47:56.897

只需创建一次侦听器实例并重用它。像这样

```
 EventController lst=new EventController();
    addEvent.addActionListener(lst);
    addEvent.setActionCommand("add");
    editEvent.addActionListener(lst);
    editEvent.setActionCommand("edit");
    deleteEvent.addActionListener(lst);
    deleteEvent.setActionCommand("delete"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:49:51.697

添加这样的方法：

```
private void setListener(AbstractButton button, ActionListener listener, String command) {
  button.addActionListener(listener);
  button.setActionCommand(command);
} 
```

构建单个`EventController`实例。

```
EventController controller = new EventController(); 
```

然后，为每个按钮调用它：

```
setListener(addEvent, controller, "add");
... 
```

# java - JSF 将动态 UI 数据传递给服务器

> ID：14377268
> 
> 赞同：0
> 
> 时间：2013-01-17T10:44:40.343
> 
> 标签：java, jsf, jsf-2, request

我在下面有这段代码：

```
<h:inputText id="userName" />
...
<h:commandButton actionListener="..." action="...">
<f:param name="userInput" value="user" />
</h:commandButton> 
```

基本上我想获取 inputText 的值（由客户端提交）并将其存储到`<f:param>`标签的属性中，`value`. 我想这样做，所以我可以从请求参数中访问用户名。有没有办法做到这一点？我知道我可以使用 bean 来存储输入值，但我只是想知道是否可以将请求值存储到请求参数对象中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:56:59.890

有一些方法：

1.  自己从请求参数映射中获取。根据标准 HTML 规范，HTML 输入元素的 name 属性表示 HTTP 请求参数名称。在 JSF 中，HTML 输入元素的名称与组件的客户端 ID 相同。

    所以，给定一个

    ```
    <h:form id="form">
        <h:inputText id="userName" ... /> 
    ```

    其中生成一个`<input name="form:userName">`，可以获取提交的值如下

    ```
    String userName = context.getExternalContext().getRequestParameterMap().get("form:userName"); 
    ```

    * * *

2.  自己从组件中获取它[`UIInput#getValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIOutput.html#getValue%28%29)。JSF 已经执行了应用请求值、转换/验证它们和更新模型值的步骤。如果您不将`value`输入组件的属性绑定到 bean 属性，那么它会粘在组件本身中。你只需要访问它。组件通过其客户端 ID 在组件树中可用。

    ```
    UIInput userNameComponent = context.getViewRoot().findComponent("form:userName");
    String userName = (String) userNameComponent.getValue(); 
    ```

    * * *

3.  将输入组件绑定到视图并`UIInput#getValue()`作为操作方法参数传递。

    ```
    <h:inputText binding="#{userName}" ... />
    <h:commandButton ... action="#{bean.submit(userName.value)}" /> 
    ```

    和

    ```
    public void submit(String userName) {
        // ...
    } 
    ```

    * * *

不用说，仅仅将输入值绑定到 bean 上就干净多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:04:42.370

你不需要`f:param`。您可以像这样访问提交的文本：

```
FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("generatedParameter"); 
```

生成的参数名称并不像`userName`您的情况那么简单，因为 JSF 准备了组件命名容器的 id。最简单的方法是检查生成的 HTML 代码并查看输入组件的名称。

# android - 增加scrollview的滚动高度

> ID：14377270
> 
> 赞同：0
> 
> 时间：2013-01-17T10:44:52.997
> 
> 标签：android, android-widget

一旦滚动视图滚动到小部件的末尾，这可能吗？

如果可能的话，你可以分享片段来做到这一点。

感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:47:20.470

使用此属性：`android:fillViewport="true"`

看一看：[ScrollView 的得心应手的把戏](http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:19:07.920

您可以查看`setOverScrollMode`ScrollView (api 9+) [http://developer.android.com/reference/android/widget/ScrollView.html#setOverScrollMode(int](http://developer.android.com/reference/android/widget/ScrollView.html#setOverScrollMode(int) )

否则，请在此处查看 pullToRefresh lib 的实现[https://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)

希望这会帮助你。

# javascript - 计算两点之间的距离显示错误的距离

> ID：14377273
> 
> 赞同：1
> 
> 时间：2013-01-17T10:45:09.750
> 
> 标签：javascript, html, google-maps, google-maps-api-3

我使用以下两种方法使用纬度和经度计算谷歌地图中两点之间的距离。

```
 TYPE I:
         function CalcDistanceBetween(lat1, lon1, lat2, lon2) {
//Radius of the earth in:  1.609344 miles,  6371 km  | var R = (6371 / 1.609344);
var R = 6371; // Radius of earth in Miles 
var dLat = toRad(lat2-lat1);
var dLon = toRad(lon2-lon1); 
var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * 
        Math.sin(dLon/2) * Math.sin(dLon/2); 
var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
var d = R * c;
   alert("d==" + d);
return d;
}
  alert(CalcDistanceBetween(13.125511084202,80.029651635576,12.9898593006481,80.2497744326417));
                 function toRad(Value) {
            /** Converts numeric degrees to radians */
         return Value * Math.PI / 180;
         }  

    TYPE II:

            var p1 = new google.maps.LatLng(13.125511084202,80.029651635576);
            var p2 = new google.maps.LatLng(12.9898593006481,80.2497744326417);

            alert(calcDistance(p1, p2));

           //calculates distance between two points in km's
                       function calcDistance(p1, p2){
                return (google.maps.geometry.spherical.computeDistanceBetween(p1, p2) /                              
                  1000).toFixed(2);
                } 
```

以上两种类型的距离均为**28 公里**。但是当我检查具有相同经度和经度的谷歌地图时，它返回 36.8 公里。示例检查我的代码和谷歌地图如下所示..：![在此处输入图像描述](../Images/762d589dd2723fd71a10d6ef00a1d13f.png) ![在此处输入图像描述](../Images/9bd47d38044358fdb97e36ee036f65f8.png)

![在此处输入图像描述](../Images/9bd47d38044358fdb97e36ee036f65f8.png)

你建议我得到准确的结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:47:50.340

谷歌给出的距离是从建议的路线。这不是从 A 点到 B 点的直接路径。您计算的距离是直接路径，只有当您从 A 点直接飞到 B 点时才会出现这种情况。
如果您想获得 Google 输出的结果，请看这里：[在 Google Maps API v3 中找到最短和最快路线的优雅方法？](https://stackoverflow.com/questions/12405132/an-elegant-way-to-find-shortest-and-fastest-route-in-google-maps-api-v3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:49:28.890

可能是我完全弄错了:) 但似乎你的方法计算了这两个点之间的实际距离，当你用谷歌路由时，它是你所走路线的距离。

# authentication - grails-maven-plugin 未读取 settings.groovy

> ID：14377274
> 
> 赞同：2
> 
> 时间：2013-01-17T10:45:18.317
> 
> 标签：authentication, maven, grails, settings, grails-maven

我有一个 Grails 应用程序，它在需要身份验证的 MavenRepos 中具有依赖关系。因此，我在**settings.groovy**中设置了以下属性。

```
grails.project.ivy.authentication = {
    credentials {
        realm = "Sonatype Nexus Repository Manager"
        host = "testnexus.testserver.com"
        username = "testuser123"
        password = "password123"
    }
} 
```

使用 Grails 构建时，这很好用。读取凭据，对 Nexus 查询进行身份验证，下载依赖项。

由于我的应用程序是使用 Maven 进行依赖管理的较大项目的一部分，因此我使用 grails-maven-plugin 将我的应用程序集成到较大的项目中，以便在较大的项目维护它的同时保留我的 BuildConfig.groovy用于构建的 pom.xml 文件。

当使用调用**mvn package**时，我看到它是如何触发 grails 插件的，它启动了我的构建。但是 settings.groovy 没有被读取，因此我将无法解决所有依赖项。

```
try to get credentials for: Sonatype Nexus Repository Manager@testnexus.testserver.com
authentication: k='Sonatype Nexus Repository Manager@testnexus.testserver.com' c='null'
HTTP response status: 401 url=https://testnexus.testserver.com/nexus/content/groups/public/...
CLIENT ERROR: Unauthorized url=https://testnexus.testserver.com/nexus/content/groups/public/... 
```

在**BuildConfig.groovy**添加凭据时，它可以正常工作，但这不是解决方案。

**如何配置 grails-maven-plugin 以读取 settings.groovy 或者我在哪里可以将这些凭据声明为 grails-maven-plugin 读取它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:31:30.193

需要创建maven设置，认证模型不一样。

[http://maven.apache.org/settings.html](http://maven.apache.org/settings.html)

# java - 等待和通知不是静态的

> ID：14377277
> 
> 赞同：0
> 
> 时间：2013-01-17T10:45:24.080
> 
> 标签：java, wait, notify

wait() 和 notify() 不是静态的，因此编译器应该给出必须从静态上下文调用 wait 的错误。

```
public class Rolls {
  public static void main(String args[]) {
    synchronized(args) {
        try {
            wait();
        } catch(InterruptedException e)
        { System.out.println(e); }
    }
  }
} 
```

但是以下代码可以正常编译并运行。为什么编译器不在这里给出错误？或者，为什么编译器会在前面的代码中给出等待必须从静态上下文调用的错误？

```
public class World implements Runnable {
  public synchronized void run() {
    if(Thread.currentThread().getName().equals("F")) {
        try {
            System.out.println("waiting");
            wait();
            System.out.println("done");
        } catch(InterruptedException e) 
        { System.out.println(e); }
    }
    else {
        System.out.println("other");
        notify();
        System.out.println("notified");
    }
  }
  public static void main(String []args){
    System.out.println("Hello World");
    World w = new World();
    Thread t1 = new Thread(w, "F");
    Thread t2 = new Thread(w);
    t1.start();
    t2.start();
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:46:38.407

您正在从一个实例方法 ( `public synchronized void run()`) 调用 wait 和 notify，根据定义，它不是静态的。

*   如果您在`main`静态方法中调用 wait ，您将得到您期望的错误。
*   或者，您可以将方法签名更改为，`public static synchronized void run()`但您也会收到另一个编译错误，即您不再实现 Runnable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:53:16.370

> 编译器何时给出必须从静态上下文调用等待的错误

错误消息是不能从静态上下文中调用该方法。如果您尝试在`static`没有实例的方法中使用它，您将收到此错误。

# ruby-on-rails-3.2 - 如何从 Facebook 获取当前用户 ID？

> ID：14377279
> 
> 赞同：0
> 
> 时间：2013-01-17T10:45:31.043
> 
> 标签：ruby-on-rails-3.2, koala

如何使用考拉宝石从 facebook 获取当前用户 ID？

```
 def UserDetailsfb

    @user_id = current_user.id.to_s
        utility = Utility.new
        par = Hash.new
        utility.request = par
        @fb_uid = Account.find_by_id(6)
        @fb_code = @fb_uid.auth_token    
        @fbuid = @fb_uid.uid       
        @graph = Koala::Facebook::GraphAPI.new(@fb_code)
        @graph = Koala::Facebook::API.new(@fb_code)      
        tweet_array = []
        @response = @graph.get_object(id);
        render :json => { :tweetArray => @response }     
  end 
```

我需要获取当前的用户 ID。显示错误“未定义的局部变量或方法 `id' for #”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T20:44:21.140

这行看起来像一个语法错误（分号）：

```
 @response = @graph.get_object(id); 
```

此外，该行有一个（大概）未定义的变量`id`。也许你复制/粘贴它？

您可能会传入`@fb_uid`，例如：

```
 @response = @graph.get_object(@fb_uid) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T08:29:06.100

如果您只需要获取`id`已通过 facebook 验证的用户，只需请求：

```
@profile = @graph.get_object 'me'
render :json => { :tweetArray => @profile } 
```

这将获取获取指定 oauth 令牌的用户的配置文件信息。

但我想，你使用了错误的变量名，我想真实的 id 保存在`uid`Account 记录的字段中。所以试试这个：

```
@profile = @graph.get_object @fb_uid.uid
render :json => { :tweetArray => @profile } 
```

# java - 从 java 连接到 MySql 时出现异常

> ID：14377280
> 
> 赞同：-1
> 
> 时间：2013-01-17T10:45:32.280
> 
> 标签：java, mysql, jdbc

我正在尝试使用 Java 代码连接到 WAMP 服务器中的 MySql db。服务器位于本地网络内的机器中。以下是我使用的代码：

```
public class MySQLAccess {

public static void main(String args[]) {

      String url = "jdbc:mysql://192.168.0.21:3306/";
      String dbName = "mydb";
      String driver = "com.mysql.jdbc.Driver";
      String userName = "root"; 
      String password = "";
      try {
      Class.forName(driver).newInstance();
      Connection conn = DriverManager.getConnection(url+dbName,userName,password);
      System.out.println("Connected to the database");
      conn.close();
      System.out.println("Disconnected from database");
      } catch (Exception e) {
      e.printStackTrace();
      } 
```

我得到以下异常：

```
com.mysql.jdbc.CommunicationsException: Communications link failure due to underlying exception: 

** BEGIN NESTED EXCEPTION ** 

java.net.ConnectException
MESSAGE: Connection timed out

STACKTRACE:

java.net.ConnectException: Connection timed out
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
at java.net.Socket.connect(Socket.java:519)
at java.net.Socket.connect(Socket.java:469)
at java.net.Socket.<init>(Socket.java:366)
at java.net.Socket.<init>(Socket.java:209)
at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:256)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:271)
at com.mysql.jdbc.Connection.createNewIO(Connection.java:2771)
at com.mysql.jdbc.Connection.<init>(Connection.java:1555)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)
at java.sql.DriverManager.getConnection(DriverManager.java:582)
at java.sql.DriverManager.getConnection(DriverManager.java:185)
at MySQLAccess.main(MySQLAccess.java:24)

** END NESTED EXCEPTION **

    Last packet sent to the server was 1 ms ago.
at com.mysql.jdbc.Connection.createNewIO(Connection.java:2847)
at com.mysql.jdbc.Connection.<init>(Connection.java:1555)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)
at java.sql.DriverManager.getConnection(DriverManager.java:582)
at java.sql.DriverManager.getConnection(DriverManager.java:185)
at MySQLAccess.main(MySQLAccess.java:24) 
```

在这段代码中我看不到任何明显的东西会导致这个异常。此外，我再次确认端口号正确且主机没有任何防火墙。

什么可能是此问题的原因以及可能的解决方案。任何 melp 都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:50:04.617

1.检查你的mysql是否在特定的主机和端口上运行

2.尝试从您的代码正在运行的机器上ping该主机以确保连接（防火墙？？）

3.如果你有 db ui[工具](http://www.siteground.com/tutorials/php-mysql/mysql_gui_tools.htm)或其他工具，请尝试使用该工具进行连接

# android - 安卓应用测试

> ID：14377291
> 
> 赞同：5
> 
> 时间：2013-01-17T10:46:05.927
> 
> 标签：android

我是 android 应用程序测试的新手。我已经下载了一个免费的 android 应用程序（.apk 文件）并且想测试那个 android 应用程序。

我所做的，我已经使用这个 cmd **“adb install .apk”文件在命令提示符下安装了那个****.apk**文件，然后我在模拟器中测试了这个应用程序。

 **但是我想知道如何对一个 android 应用程序进行各种测试，或者当我们要测试一个 android 应用程序时，我们需要知道什么以及所有基本测试。

建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:53:10.367

[请在此处](http://developer.android.com/intl/ja/tools/testing/testing_android.html)查看 Android 开发者网站以了解“如何测试`android`应用程序”。首先，您必须了解测试结构的[工具](http://www.vogella.com/articles/AndroidTesting/article.html)和`testing`方式......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-15T17:55:55.280

另一种选择是使用 AWS Device Farm、Firebase 或 Nativetap 等服务。全面披露 - 我与[Nativetap 合作](http://nativetap.io)。

上面提到的所有服务都允许您在 Android 设备上远程执行测试，而只有 Nativetap 允许您通过多点触控支持、屏幕截图、屏幕录制、性能跟踪等执行测试。

我鼓励您注册一个免费帐户，并探索 Nativetap 如何帮助您进行应用测试。**

# web-scraping - 防止网页抓取

> ID：14377295
> 
> 赞同：7
> 
> 时间：2013-01-17T10:46:13.620
> 
> 标签：web-scraping, data-collection

我目前是开发包含前端客户端的应用程序的团队的一员。

通过这个客户端，我们发送用户数据，每个用户都有一个用户 ID，客户端通过 RESTful API 与我们的服务器对话，向服务器询问数据。

例如，假设我们有一个书籍数据库，用户可以获得作者最近写的 3 本书。我们重视用户的时间，我们希望用户无需明确注册即可开始使用该产品。

我们重视我们的数据库，我们使用我们自己的专有软件来填充它，并希望尽可能地保护它。

**所以基本上问题是：**

我们可以做些什么来保护自己免受网络抓取？

我非常想了解一些保护我们数据的技术，我们希望防止用户在作者搜索面板中输入每个作者的姓名，并获取每个作者写的前三本书。

任何建议的阅读将不胜感激。

我只想提一下我们知道验证码，并希望尽可能避免它们

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:43:31.467

防止这种情况的主要策略是：

*   需要注册，因此您可以限制每个用户的请求
*   注册和非注册用户的验证码
*   IP的速率限制
*   需要 JavaScript - 编写一个可以读取 JS 的爬虫更难
*   机器人拦截和机器人检测（例如请求率、隐藏链接陷阱）
*   数据中毒。放入没人愿意拥有的书籍和链接，这会阻碍盲目收集所有内容的机器人的下载。
*   突变。经常更改您的模板，这样爬虫可能无法找到所需的内容。

请注意，您可以非常灵活地使用验证码。

例如：每天每个 IP 的第一本书不受验证码保护。但是为了访问第二本书，需要解决验证码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T20:31:08.437

由于您发现 Anony-Mousse 列出的许多项目都不能解决您的问题，所以我想进来并提出替代方案。您是否探索过将网页抓取保护作为服务提供的第三方平台？我将列出市场上可用的一些解决方案，并尝试将它们放在一起。为了充分披露，我是[Distil Networks](http://www.distilnetworks.com)的联合创始人之一，这是我要上市的公司之一。

**网页抓取保护作为核心竞争力：**

*   蒸馏网络
*   森特刺客

**Web Scraping 保护作为更大产品套件中的一项功能：**

*我的观点是，试图将机器人问题作为一项功能来解决的公司并没有有效地做好。只是不是他们的核心竞争力，存在很多漏洞*

*   Akamai Kona
*   F5 ASM 模块到 BigIP 负载均衡器
*   Imperva Web 应用程序防火墙设备
*   Incapsula，Imperva 的云 Web 应用防火墙

谈谈上述几点的一些陷阱也可能会有所帮助：

*   ***由于 OCR 软件和验证码农场，***用于注册和非注册用户的验证码已被证明是无效的****
****   **IP 的速率限制** *这可能具有非常高的误报率，因为它将用户集中在共享 IP 后面。如果他们只是轮换或匿名他们使用的 IP，也可能会错过很多机器人**   **需要 JavaScript** *Selenium、Phantom 和许多其他抓取工具渲染 javascript****

# iphone - 带水效果的 UIView

> ID：14377301
> 
> 赞同：2
> 
> 时间：2013-01-17T10:46:31.543
> 
> 标签：iphone, ios5, quartz-core

我正在制作一个基于视图的应用程序，我希望在其中为视图赋予水效果。请帮我。

我正在使用以下代码

```
[UIView beginAnimations:@"rippleEffect" context:NULL]; 
[UIView setAnimationDuration:1.0]; 
[UIView setAnimationTransition:(UIViewAnimationTransition)110 forView:view cache:NO]; 
[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T10:54:23.063

你可以通过点击按钮设置查看`WaterEffect`我只是谷歌它，我得到了[答案](https://stackoverflow.com/questions/9377427/water-effect-in-a-view-based-application)

*   首先，您需要`QuartzCore.framework`从 Target->Build Phases-> link Binary with library 点击 + 按钮添加您的项目。

*   `#import <QuartzCore/QuartzCore.h>`在 .m 文件中

现在实现 BUTTON 的这个 IBAction

```
-(IBAction)btnActionTapped:(id)sender{
    CATransition *animation=[CATransition animation];
    [animation setDelegate:self];
    [animation setDuration:1.75];
    [animation setTimingFunction:UIViewAnimationCurveEaseInOut];
[animation setType:@"rippleEffect"];

    [animation setFillMode:kCAFillModeRemoved];
    animation.endProgress=0.99;
    [animation setRemovedOnCompletion:NO];
    [self.view.layer addAnimation:animation forKey:nil];
} 
```

# git - 为什么 CakePHP 默认将 app/Config 放在 .gitignore 中？

> ID：14377302
> 
> 赞同：2
> 
> 时间：2013-01-17T10:46:31.393
> 
> 标签：git, cakephp, cakephp-2.0, cakephp-2.1

为什么 CakePHP 默认将 app/Config 放在 .gitignore 中？

我理解将 app/tmp 放在 .gitignore 中，并且也理解他们为什么将根 /plugins 和 /vendors 目录，因为它们是为跨多个项目共享的插件和供应商而设计的。但为什么是应用程序/配置？我会认为它包含您在版本控制中想要的那种东西，例如 database.php 和 bootstrap.php。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:10:16.423

我想这与数据库配置有关，实际上是您在**版本**控制中不想要的。

想象一下，如果您的 git repo 中有数据库配置文件，并且有人拉取，他们将拥有您的数据库设置，然后他们将编辑数据库配置文件以满足他们的需求，现在它就变成了一个有数据库的乒乓球游戏。 .php 文件。坦率地说，这会非常非常烦人。

我的意思是，如果每个人都有相同的配置设置，它会起作用并且可能有点方便，但是谁拥有跨机器的所有数据库配置？

另一方面，bootstrap.php 我有点同意，因为引导通常是针对一个项目的，而该项目依赖于这些依赖项。尽管如此，如果您想为不同的环境使用不同的插件怎么办？例如使用 sendgrid.com 在您的开发副本上发送电子邮件，并在实时服务器上使用 SMTP？

在我看来，忽略配置目录更简单。它将配置留给开发人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-21T17:56:22.973

接受的答案是正确的，因为您不希望存储库中的数据库配置，但稍微错过了一个重要点。

您不想将数据库配置包含在存储库中；如果有人可以访问这个，他们将可以访问敏感的详细信息，例如您的数据库的登录名/密码，因此可以直接访问它！

在 CakePHP 3.x`app.php`中，默认情况下仅忽略包含数据库设置的配置文件。包含一个`app.default.php`文件，该文件应用作人们在本地计算机或服务器上设置应用程序的模板，而无需在存储库中存储敏感数据。

If you're deploying an app with something like [Capistrano](http://capistranorb.com/) or [Rocketeer](http://rocketeer.autopergamene.eu/) then a good practice is to keep the file containing the database configuration in a shared directory and symbolically link to this when deploying. That way, apart from initial setup, you do not need to worry about losing the config when deploying from a repository.

# date - ColdFusion 电子表格错误、无效的日期或时间字符串

> ID：14377309
> 
> 赞同：3
> 
> 时间：2013-01-17T10:46:41.820
> 
> 标签：date, coldfusion, spreadsheet, export-to-excel, coldfusion-10

我正在尝试将查询导出到 Excel 文档。

这是我正在使用的代码：

```
<cfscript> 
    //Use an absolute path for the files. ---> 
    theDir=GetDirectoryFromPath(GetCurrentTemplatePath()); 
    theFile=theDir & "invoicesDue.xls"; 
    //Create an empty ColdFusion spreadsheet object. ---> 
    theSheet = SpreadsheetNew("invoicesData"); 
    //Populate the object with a query. ---> 
    SpreadsheetAddRows(theSheet,invoicesDue);  
</cfscript>

<!--- Write the sheet to a file ---> 
<cfspreadsheet action="write" filename="#theFile#" name="theSheet" sheetname="invoicesDue" overwrite=true> 
```

我得到的错误是：

```
'' is an invalid date or time string. 

121: SpreadsheetAddRows(theSheet,invoicesDue); 
```

问题是，我已经放弃了我的查询，并且在任何地方都看不到引号，并且所有日期/时间单元格都填充了日期时间，例如“2011-03-31 00:00:00.0”或空的细绳。

我想知道是否有其他人以前遇到过这个错误，因为我看不到它的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:12:44.550

cfspreadsheet 不喜欢日期字段的空值。最后我使用了：

```
CAST(emptyDate as varchar) 
```

这似乎是一个修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:28:16.017

作为替代方案，我使用 Ben Nadel 的[queryToCSV() 函数](http://www.bennadel.com/blog/1239-Updated-Converting-A-ColdFusion-Query-To-CSV-Using-QueryToCSV-.htm)并绕过`cfspreadsheet`. 当我只需要一个单页 csv / xls 文件时，它就像一个魅力。

# ios - 无法使用 Objective-C 拨打电话号码

> ID：14377311
> 
> 赞同：0
> 
> 时间：2013-01-17T10:46:42.040
> 
> 标签：ios, objective-c, ios6

我正在使用**iOS6**，我无法拨打此号​​码：***222*20#**

这是我的代码：

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:*222*20#"]]]; 
```

当我运行上面的脚本时没有任何反应？
或者，拨打号码有一些限制？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T10:53:45.910

这是因为您的号码包含`*`和`#`。

> **为了防止用户恶意重定向电话或更改电话或帐户的行为，电话应用程序支持 tel 方案中的大部分（但不是全部）特殊字符。具体来说，如果 URL 包含 * 或 # 字符，电话应用程序不会尝试拨打相应的电话号码。** 如果您的应用程序从用户或未知来源接收 URL 字符串，您还应确保正确转义任何可能不适合 URL 的特殊字符。对于本机应用程序，使用 NSString 的 stringByAddingPercentEscapesUsingEncoding: 方法来转义字符，这将返回原始字符串的正确转义版本。

请查看[**iPhoneURLScheme**](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/PhoneLinks.html)了解更多详情。

# jquery - Google 地图目前仅加载基于静态地址的地点

> ID：14377326
> 
> 赞同：0
> 
> 时间：2013-01-17T10:47:20.557
> 
> 标签：jquery, google-maps, google-maps-api-3

以下代码可以正常工作，但是“开始”值来自分配给包含地图的 div 的 data-start 属性。

我需要以下内容来接受当前位置的当前坐标（来自地理位置代码）：

```
 var geocoder = new google.maps.Geocoder();
        geocoder.geocode({ address: **start** }, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                opts.center = results[0].geometry.location;
                self.map = new google.maps.Map($('#map')[0], opts);
                $.post($('#stockists form').attr('action'), { query: start }, function(data) {
                    self.addMarkers(data.results);
                });
                self.locateUser();
            } else {
                alert("Geocoder failed due to: " + status);
            }
        }); 
```

起始值假设采用当前位置而不是来自数据属性的静态值。[你可以在这里](http://jsfiddle.net/xCUrh/1/)看到完整的代码

这个想法是根据您当前的位置加载 data.results .....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:12:12.267

可以使用[geolocation](https://developer.mozilla.org/en-US/docs/Using_geolocation)来检测（用户的）当前位置。

所以步骤：

1.  检测用户位置
2.  使用[反向地理编码请求 formatted_address](https://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding)
3.  设置`$('#map').data('start')`为反向地理编码的结果
4.  创建一个新的 Map 对象并调用 init 方法：`new Map().init();`

例子：

```
 var geocoder=new google.maps.Geocoder();
  navigator.geolocation.getCurrentPosition(function(position) {
    geocoder.geocode({latLng:new google.maps.LatLng(position.coords.latitude, 
                                                    position.coords.longitude)},
          function(results,status){
            if (status == google.maps.GeocoderStatus.OK) {
              $('#map').data('start',results[0].formatted_address);
              new Map().init();
          }
        })
  }); 
```

# encryption - 如何创建数字签名并保护 PDF 文件免受更改

> ID：14377327
> 
> 赞同：1
> 
> 时间：2013-01-17T10:47:21.900
> 
> 标签：encryption, pdf-generation, digital-signature, x509

我正在尝试创建一种加密和阻止 PDF 文件形成任何更改的方法。

我找到了这个小片段，但有些东西对我来说不是很清楚。这适用于名为“SPIRE”的库：

```
String pfxPath = @"..\Demo.pfx";
            PdfCertificate digi = new PdfCertificate(pfxPath, "e-iceblue");
            PdfSignature signature = new PdfSignature(doc, page, digi, "demo");
            signature.ContactInfo = "Harry";
            signature.Certificated = true;
            signature.DocumentPermissions = PdfCertificationFlags.AllowFormFill; 
```

但我不明白它们对参数页面的含义：

> PdfSignature 签名 = new PdfSignature(Spire.Pdf.PdfDocumentBase 文档, Spire.Pdf.PdfPageBase 页面, );

另一种方式。我在 MSDN 上找到了这个教程。但这适用于 XML 文件。 [如何：使用数字签名对 XML 文档进行签名](http://msdn.microsoft.com/en-us/library/ms229745.aspx)

这也适用于 PDF，看看是基于 XML 的 PDF 吗？

# eclipse - 了解 Eclipse 生成的文件夹和文件

> ID：14377331
> 
> 赞同：6
> 
> 时间：2013-01-17T10:47:27.107
> 
> 标签：eclipse

问题的简短版本：Eclipse 生成的、 、 、 和`objects.mk`文件`sources.mk`是`makefile`什么`subdir.mk`？`*.o``*.d`

* * *

问题的长版本：

1.  在我的主目录中，我有`workspace`目录。每当我创建一个项目并调用它时，Eclipse 都会在该文件夹中创建`ProjectName`一个新目录（也称为）。`ProjectName``workspace`
2.  在我的项目中，我创建了不同的类，每个类都与 2 个文件（源文件`ClassName.cpp`和头文件`ClassName.h`）相关联。这些文件被放入`workspace/ProjectName/src`文件夹中。
3.  现在我`Build`在 Eclipse 中的项目中`workspace/ProjectName`出现了一个新文件夹。它被称为`Debug`。
4.  在此文件夹中，只有一个文件的功能我理解：`ProjectName`. 它是可执行文件。如果我在命令行中输入它的名字，我的程序就会被执行。
5.  另外 3 个文件我不知道：`objects.mk`, `sources.mk`, `makefile`.
6.  此外，在`Debug`文件夹中有`src`目录。它包含`subdir.mk`我不知道含义的文件以及`ClassName.o`和`ClassName.d`文件（如果我有 N 个类，则将有 N 对`*.o`和`*.d`文件。）

请任何人解释这些文件的含义和目的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T11:00:26.690

`objects.mk`、`sources.mk`和是 Eclipse 根据您的项目类型（可执行文件、库、共享库）生成的 makefile `makefile`。`subdir.mk`有关它们的内容以及它们的工作方式，请参阅`make`工具链的命令文档。总之这些负责调用编译器和链接器。

`ClassName.o`是编译器生成的目标文件，所有这些都将链接到一个可执行文件或存储在一个库中（取决于项目类型）。

`ClassName.d`是一个所谓的依赖引用文件，由编译器（按需）生成并包含在 makefile 中，可以跟踪头文件中的更改，并在必要时重新编译相关的源文件。

# oracle - 'OraOLEDB'.oracle 提供程序未在本地计算机上注册

> ID：14377334
> 
> 赞同：0
> 
> 时间：2013-01-17T10:47:32.083
> 
> 标签：oracle, iis-7

我有一个 ISS7 的 64 位服务器。
我使用 OraOLEDB.oracle 作为提供者在其上运行了一项服务。

当我尝试`shoot`用 SoapUi 反对它时，我得到了结果：

```
- System.Data The 'OraOLEDB'.oracle provider is not registered on the local machine. 
```

我已经尝试过这些想法 - [OraOLEDB.Oracle 提供程序未在本地机器上注册](https://stackoverflow.com/questions/12903366/oraoledb-oracle-provider-is-not-registered-on-the-local-machine)，但它没有帮助。

我已经阅读了有关 Oracle_home 的信息，并且我应该为其设置正确的安全性，但我没有 Oracle_home。

我已将 IIS_WPG 组添加到 Oracle 文件夹并将其权限设置为，`full control`但它没有工作。

我以前工作过，但当我添加新版本的应用程序时停止工作。暂时运行旧版本。

有人有好主意吗？

# java - 用java发送电子邮件没有收到电子邮件

> ID：14377337
> 
> 赞同：0
> 
> 时间：2013-01-17T10:47:44.323
> 
> 标签：java, jakarta-mail

```
 @Override
public void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    PrintWriter out = null;
    String user = request.getParameter("username");
    Users p = usb.getMemberInfo(user);
    HttpSession session1 = request.getSession(true);
    request.getSession().setAttribute("passenger", p);

    String host = "smtp.gmail.com";
String username =     // to write sender email here 
String password =   // To Write Password here
Properties properties = System.getProperties();
properties.put("mail.smtp.starttls.enable", "true");
properties.put("mail.smtp.host", host);
properties.put("mail.smtp.username", username);
properties.put("mail.smtp.password", password);
properties.put("mail.smtp.port", "587");
properties.put("mail.smtp.auth", "true");

String to = (String)session1.getAttribute(p.getEmail());
try {
    Session session = Session.getDefaultInstance(properties, null);
    MimeMessage message = new MimeMessage(session);
    message.setFrom(new InternetAddress(username));

    InternetAddress toAddress = new InternetAddress(to);

    System.out.println(Message.RecipientType.TO);

    //for (int i = 0; i < toAddress.length; i++) { // changed from a while loop
        message.addRecipient(Message.RecipientType.TO, toAddress);
    //}
    message.setSubject("Forgot password");
    message.setText(p.getPassword());
    Transport transport = session.getTransport("smtp");
    transport.connect(host, username, password);
    transport.sendMessage(message, message.getAllRecipients());
    transport.close();
} catch (Exception e) {
    e.printStackTrace();
}

    response.sendRedirect("welcome.jsp");

} 
```

}

方法getMemberInfo：

```
@Override
public Users getMemberInfo(String username) {
   String query = "SELECT M from Users M where M.username=:username";
   Query q = em.createQuery(query);
   q.setParameter("username", username);
   List results = q.getResultList();

   for (Object o:results) {
       Users m = (Users) o;
       return m;
   }

   return null; 
```

}

问题是我没有收到任何电子邮件。我不知道问题是什么。用户需要写入用户名，然后从数据库中获取电子邮件，并将密码发送到从数据库获取的用户电子邮件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:52:08.110

实际上代码很好问题是我必须写：

```
String to = p.getEmail(); 
```

代替 ：

```
String to = (String)session1.getAttribute(p.getEmail()); 
```

谢谢你的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:56:51.273

对于您关于未收到邮件的问题，这不是一个好的答案。但是您的第一个问题似乎是您不知道阻止邮件发送的确切问题是什么...

您应该将 TransportListener 添加到您的 Transport 实例中，看看会发生什么：

```
transport.addTransportListener(new TransportListener {
    public void messageDelivered(TransportEvent e) {
      //Invoked when a Message is succesfully delivered. 
    }
    public void messageNotDelivered(TransportEvent e)  {
      //Invoked when a Message is not delivered. 
      System.out.println("Message not delivered: " + e.getMessage())
      //should be a proper log message anyway...
    } 
    public void messagePartiallyDelivered(TransportEvent e)  {
      //Invoked when a Message is partially delivered. 
    }
}) ; 
```

推荐链接：

*   [运输](http://docs.oracle.com/javaee/5/api/javax/mail/Transport.html)
*   [传输监听器](http://docs.oracle.com/javaee/5/api/javax/mail/event/TransportListener.html)
*   [运输事件](http://docs.oracle.com/javaee/5/api/javax/mail/event/TransportEvent.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T11:00:04.337

我猜你必须配置附加属性

```
 props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.fallback", "false"); 
```

# objective-c - 键、值和索引

> ID：14377338
> 
> 赞同：0
> 
> 时间：2013-01-17T10:47:45.333
> 
> 标签：objective-c, dictionary, nsdictionary

我的问题很简单。我有一些与密钥关联的数据。密钥和数据都是`NSString`. 所以我想到的第一件事就是使用`NSDictionary`. 我通常像这样访问值：`[myDict objectForKey:@"myKey"];` 但是，有时我需要通过索引访问值。

样本： `[myDict objectAtIndex: indexPath.row]`

但当然，字典中没有索引。

有很多解决方案可以解决这个问题，但我想知道哪个是最好的。

**由于 key 或 index 访问值的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:11:48.897

创建您的自定义类，例如`DictionArray`具有数组和字典的属性。

添加属性`NSInteger index`等`NSString *value`以及一些基于索引和键检索的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:05:24.420

这没有多大意义，因为字典是无序的，但如果你仍然需要这个：

```
id nthKey = [[dict allKeys] objectAtIndex:idx];
id nthObj = [dict objectForKey:nthKey]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:05:06.870

为了通过索引从字典中获取对象，您必须拥有一个键数组。然后你得到钥匙：

```
NSString *key = [keys objectAtIndex: indexPath.row]; 
```

并获取对象：

```
NSString *value = [myDict objectForKey:key]; 
```

# php - 我可以在 Symfony2 中的哪里存储 tmp 文件？

> ID：14377341
> 
> 赞同：2
> 
> 时间：2013-01-17T10:47:54.533
> 
> 标签：php, symfony

我读到我可以将 app/cache 或 app/logs 用于 tmp 文件，但感觉不对，因为除非我自己这样做，否则它们不会被删除。

例如，我需要在一个文件中存储一个日期（我不想为此使用数据库），我只需要它在那里 2 或 3 天。

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:04:14.580

让 Web 服务器在包中编写并不是一个好习惯。你可以这样做，但你必须处理权限，它会带来安全风险......

为什么不使用定期清理的 /tmp（在 UNIX 服务器上）或您自己的 tmp 目录，如 /home/ChocoDeveloper/tmp 和 cron 任务来清理它？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T13:36:03.770

抱歉，这不是对所提出的确切问题的答案，但我建议有更好的方法来实现这一点，而无需将日期存储在临时文件中，即使您不想使用数据库。

您是否考虑过使用 Redis 或 Memcache？这两个都有 Symfony2 捆绑包，应该让生活更轻松一些，尽管您需要确保两者都已安装并在您的服务器上运行。

例如，如果您要使用 Redis 执行此操作，您可以使用[EXPIRE](http://redis.io/commands/expire)命令来指定您希望该值（在本例中为您的日期）存在多长时间。这是粗略的想法：

```
public function yourMethod()
{
    $date = $this->getDate();

    /* ... */
}

protected function getDate()
{
    /** @var $redis \Predis\Client */
    $redis = $this->container->get('snc_redis.default'); // TODO inject as a dependency

    $date = $redis->get('your_key');

    // Will be empty if requested after the key has expired.
    // Set a new date value in the key
    if (empty($date)) {
        $date = '2013-01-17 13:30:00'; // Not sure where you want to get this from
        $redis->set('your_key', $date);

        $secondsToLive = 259200; // 3 days
        $redis->expire('your_key', $secondsToLive);
    }

    return $date;
} 
```

# iphone - 如何将此凭据传递给 WebView

> ID：14377345
> 
> 赞同：0
> 
> 时间：2013-01-17T10:48:03.667
> 
> 标签：iphone

我正在使用 UIWebView，我必须向它加载一些 URL。但是该站点需要userCredentials，我在其他ViewController 中登录了该站点。现在我必须将此凭据传递给 WebView。怎么可能？？？URL 是[http://test.docphin.com/connect/download.aspx?ID=%d](http://test.docphin.com/connect/download.aspx?ID=%d)

如果我直接将此链接加载到 webView 它什么也不显示,,,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:31:27.423

您是此页面的所有者吗？然后你可能可以使用 javascript：使用 UIWebView 的 stringByEvaluatingJavaScript 方法。使用这种方法，您可以与 webview 交互而无需重新加载 url。我认为您可以通过这样的凭据。

如果没有，那么您需要点击“登录”时按下的确切链接，并查看是否使用标题或获取参数传递了凭据。

# asp.net-mvc - 一对一关系在 Nop Commerce Entity 框架中不起作用

> ID：14377346
> 
> 赞同：0
> 
> 时间：2013-01-17T10:48:04.807
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq, entity-framework, nopcommerce

我正在使用 nop Commerce 2.30。我在 nopCommerce 数据库中创建一个表并设置

另一个表中的 1:1 关系。

我的桌子是议程。请看我的表结构。

![在此处输入图像描述](../Images/b80081a65eeee78154f68cea9c5921d4.png)

请看数据库图。

![在此处输入图像描述](../Images/78907844d30e82f5cb0afab00a97467f.png)

BaseEntity 类

```
 /// <summary>
/// Base class for entities
/// </summary>
public abstract partial class BaseEntity
{
    /// <summary>
    /// Gets or sets the entity identifier
    /// </summary>
    public virtual int Id { get; set; } 
```

请看我的模型。我在我的议程类中添加了一个新的属性 ID。但它是

显示警告消息此属性已经存在它的基类。

命名空间 Nop.Core.Domain.Agendas

{

```
public partial class Agenda : BaseEntity

{
    public virtual int Id { get; set; }

    public virtual string Name { get; set; }

    public virtual List<Days> Days { get; set; }
} 
```

}

映射

> `公共部分类AgendaMap：EntityTypeConfiguration

```
{

    public AgendaMap()
    {

        this.ToTable("Agenda");

        this.HasKey(a => a.Id);
    }
}` 
```

然后我尝试插入议程表。

![在此处输入图像描述](../Images/725569b6e112b812cc420749fdbf9443.png)

我收到此错误消息

![在此处输入图像描述](../Images/16a4b3552f90a5b1d57c116d981fe1e5.png)

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:13:26.443

从您的图表来看，您的议程表设计中似乎没有键，而您在代码中将其设置为键。尝试以下操作：

1.  在您的数据库表设计中，将 Id 设置为主键，确保将其设置为自动增量。
2.  添加一个名为“ProductId”的新字段，这是应该链接到 Product 表的 Id 字段的键。
3.  相应地更新您的代码。:)

# php - 如何在 php 文件中使用 javascript 来更改父 html 文件中的图像 src？

> ID：14377347
> 
> 赞同：0
> 
> 时间：2013-01-17T10:48:05.103
> 
> 标签：php, javascript, html, src

我有一个 php 文件中的联系我框。php 在 contact.html 文件中的 a 中运行。我的目标是，当有人将鼠标放在“提交”按钮上时，contact.html 文件中的图像会发生变化。提交按钮位于 php 文件中。如何进行鼠标悬停事件来更改contact.html文件中图像的src？

在contact.html文件中我有：

```
<img id = "me" src="Pictures/Image1.jpg" name="mypic">
<iframe src="contactform/contactform.php" frameborder='0' width='100%' height='600' ></iframe> 
```

我一直在使用的javascript是：

```
var image1=new Image()
image1.src="Pictures/Image1.jpg"
var image2=new Image()
image2.src="Pictures/Image2.jpg"
var image3=new Image()
image3.src="Pictures/Image4.jpg"

changepic1 = function() {
    document.images.me.src=image1.src
        }

changepic2 = function() {
    document.images.me.src=image2.src
        }

changepic3 = function() {
    document.images.me.src=image3.src
        } 
```

在 php 文件中我有：

```
<div class='container'>
    <input type='submit' name='Submit' value='Submit' />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:38:38.043

使用 jQuery 处理鼠标悬停事件。在您的 html 中包含 jQuery，如下所示：

```
 <head> 
     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>  
 </head> 
```

向您的 iframe 添加一个 id：

```
 <img id = "me" src="Pictures/Image1.jpg" name="mypic">
 <iframe id = "myframe" src="contactform/contactform.php" frameborder='0' width='100%' height='600' ></iframe> 
```

这是鼠标悬停切换图像：

```
<script type="text/javascript">
window.onload = function(){

    var image1=new Image()
    image1.src="Pictures/Image1.jpg"
    var image2=new Image()
    image2.src="Pictures/Image2.jpg"
    var image3=new Image()
    image3.src="Pictures/Image4.jpg"

    $('#myframe').contents().find('container').mouseover(function() {
        var thisSrc = $('#me').attr('src');
        var newSrc;

        if(thisSrc == image1.src)
           newSrc = image2.src;
        else if(thisSrc == image2.src)
           newSrc = image3.src;
        else
           newSrc = image1.src;

        $('#me').attr("src", newSrc);
    });
};
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:53:48.500

你可以做简单的鼠标悬停事件。单击此[链接](http://www.w3schools.com/dhtml/tryit.asp?filename=trydhtml_event_onmouse)以获取示例。

你也可以使用 jquery 来做到这一点。单击此[链接](http://api.jquery.com/mouseover/)以获取示例。

# graphics - 在 JPanel 上绘制图形，因为在 JTextArea 上进行了插入操作

> ID：14377350
> 
> 赞同：0
> 
> 时间：2013-01-17T10:48:13.450
> 
> 标签：graphics, jpanel, graphics2d, documentlistener

大家好，提前谢谢。所以我的问题是我想根据 JtextArea 中插入的内容在 JPanel 上绘制一些内容，这是正确的吗？：DocumentListener 检查插入操作：

```
protected class MyDocumentListener  extends JPanel implements   javax.swing.event.DocumentListener {
    @Override
public void changedUpdate(javax.swing.event.DocumentEvent e) {
        // text has been altered in the textarea

        }
    @Override
public void insertUpdate(javax.swing.event.DocumentEvent e) 
    {
            // text has been added to the textarea 

        try { 
           //if not prompt Line
            if (!Traffic.getText(Traffic.getLineStartOffset(Traffic.getLineCount()-1),
              Traffic.getLineEndOffset(Traffic.getLineCount()-1)-              Traffic.getLineStartOffset(Traffic.getLineCount()-1)).contains(">>"))
      {//if a line after a replace has been inserted

          if (Traffic.getLineCount()  == (lastreplace + 2) ) 
          {
        System.err.println(Traffic.getText(Traffic.getLineStartOffset(lastreplace),
                            Traffic.getLineEndOffset(lastreplace) - 
                                    Traffic.getLineStartOffset(lastreplace)));
               PortArchitecture (Traffic.getText(Traffic.getLineStartOffset(lastreplace),
                            Traffic.getLineEndOffset(lastreplace) - 
                                    Traffic.getLineStartOffset(lastreplace)));

               lastreplace +=1;

          }

            else//last line when it's not detected by the previous condition it'll be consumed here
          {
               System.err.println(Traffic.getText(Traffic.getLineStartOffset(lastreplace),
                            Traffic.getLineEndOffset(lastreplace) - 
                                    Traffic.getLineStartOffset(lastreplace)));
             PortArchitecture (Traffic.getText(Traffic.getLineStartOffset(lastreplace),
                            Traffic.getLineEndOffset(lastreplace) - 
                                    Traffic.getLineStartOffset(lastreplace))); 
          }
      }
        Traffic.setCaretPosition(Traffic.getDocument().getLength());

        } catch (BadLocationException ex) {
            Logger.getLogger(TrafficSerialPort.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    @Override
  public void removeUpdate(javax.swing.event.DocumentEvent e) {
  // text has been removed from the textarea

}
 } 
```

Methode 检查条件并在 JPanel 上绘图：

```
public void PortArchitecture (String line) throws BadLocationException 
{

 Graphics2D gfx = (Graphics2D)graphicPanel.getGraphics();
    String [] valuesId = new String [2];
    valuesId = line.split(":");
    /**switch (valuesId[0])
    {
        case "Port Number" : draw();
    }*/
    if(valuesId[0].contains("Port number"))
    {

     gfx.drawString("(PN)", 30, 10);
     gfx.drawString(valuesId[1],30, 140);
}
    if(valuesId[0].contains("Port Extension"))
    {
        gfx.drawString("(EXT)", 100, 10);
        gfx.drawString(valuesId[1], 100, 140);
      //  draw(g);
}
    if(valuesId[0].contains("Forward Extension"))
    {
        gfx.drawLine(140,80,140,110);
      //  draw(g);
}
    if(valuesId[0].contains("ON-HOOK"))
    {
      //  draw(g);
}
    if(valuesId[0].contains("OFF-HOOK"))
    {
       // draw(g);
}
    if(valuesId[0].contains("Forward status"))
    {
        if(valuesId[1].contains("FORWARDED"))
        {
           // draw(g);
        }
        else
        {
           // draw(g);
        }
}
    if(valuesId[0].contains("Dialing"))
    {
        //get dialed number
        //draw(g);
}

} 
```

还有一件事：我有一些关于显示一些图纸的结果，但是当我最小化应用程序时，所有的图形都消失了。我知道我需要调用 repaint()，但我不知道何时以及如何调用。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:53:20.540

所以我学得很辛苦，但所有绘图都必须在 paintComponent() 方法中。所以在我的情况下，我需要 3 个类（这适用于任何有兴趣的人）： - 第一个初始化 JTextArea 并将 documentListener 添加到它. - 第二个是 DocumentListener 类。- 第三个将是从 JPanel（或 JComponent）扩展并包含方法 paintComponent() 的类。

希望它会有所帮助！

# tinymce - TinyMCE 彻底摧毁 html

> ID：14377352
> 
> 赞同：0
> 
> 时间：2013-01-17T10:48:19.337
> 
> 标签：tinymce

尝试将一些 html 粘贴到 TinyMCE 编辑器上的选项中，内容如下：

```
<textarea onclick="this.focus(); this.select(); _gaq.push(['_trackEvent', 'Infographic', 'Click', 'marketing-infographic']);" rows="2">
  <img src="my_image.jpg" width="120" height="136" / >
  View full image
  <a href="https://site.com/my_image.jpg" />
</textarea> 
```

...更新后，Tiny 将其完全重写为完全不同的东西。

```
<p>
  <img src="my_image.jpg" height="136" width="120" />
  <textarea style="height: 44px; width: 300px; margin: 2px;" onclick="this.focus(); this.select(); _gaq.push(['_trackEvent', 'Infographic', 'Click', 'marketing-infographic']);" rows="2">
    View full image
  </textarea>
  <a href="https://site.com/my_image.jpg" title="”Infographic”"> </a>
</p> 
```

我环顾了论坛并在这里寻求帮助，例如...

```
cleanup_on_startup: false,
trim_span_elements: false,
verify_html: false,
cleanup: false,
convert_urls: false 
```

......似乎根本没有帮助。是否允许通过编辑器输入这种 html 而不会被完全混蛋？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:39:42.363

查看 tinymce 配置参数[valid_elements](http://www.tinymce.com/wiki.php/Configuration%3avalid_elements)和[valid_children](http://www.tinymce.com/wiki.php/Configuration%3avalid_children)并将所有相关的 html 元素和属性设置为有效。

# regex - 正则表达式查找第一个标签

> ID：14377354
> 
> 赞同：0
> 
> 时间：2013-01-17T10:48:22.653
> 
> 标签：regex, search, notepad++

我使用记事本++，我需要找到标签

```
<font face="arial" size="4"> 
```

直到

```
</font></td> 
```

我试过这个：

```
<font face="arial" size="4">(.*)</font>(.*)</td> 
```

但它会找到从第一行到最后一行的所有内容。但我需要它找到第一个“字体”与其相邻或最接近的 /font/td 标记的第一个匹配项，然后在相同的文本中找到下一个……等等。

示例文本：

```
<font face="arial" size="4">text text text...sdfklj@skdjhgls:d</font></td>

<font face="arial" size="4">some text<br />
any more text
    </font> </td>

morel;owkjdgkd dhfksg h

<font face="arial" size="4">some text</font><p>
more text</font> </td> 
```

* * *

然后我需要将这两个标签替换为：第一个标签为

```
<span style="font-size: 14pt; font-family: Times; lang=en-us"> 
```

第二个是：

```
</span></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:53:37.900

试试偷懒：

```
<font face="arial" size="4">[\s\S]*?</font>[\s\S]*?</td> 
```

用于匹配任何字符，包括换行符，并在出现之前`[\s\S]`添加惰性量词`?`以尽可能少地匹配。`</font>``</td>`

如果`</font>`and`</td>`标记之间只有空格，您显然可以使用`\s*`而不是`[\s\S]*?`. （我注意到您的示例 html 格式错误，因为它在`</font>`标签后面包含一个`</font>`标签。）

您可以使用以下内容进行替换：

```
<font face="arial" size="4">([\s\S]*?)</font>([\s\S]*?)</td>

<span style="font-size: 14pt; font-family: Times; lang=en-us">\1</span>\2</td> 
```

# linux - 如何检查linux二进制文件是否有新添加的代码

> ID：14377363
> 
> 赞同：0
> 
> 时间：2013-01-17T10:48:45.087
> 
> 标签：linux, binary, g++, symbols

我有一个由多个`*.cpp`文件组成的项目，我使用 g++ 编译这些文件。我更改了一个源文件以添加一些代码。再次构建项目。只是为了检查我做了

```
diff -s origbinaryfile changedbinaryfile 
```

它向我展示了文件是相同的，这很奇怪，因为我添加了一个额外的代码，并希望看到生成的 linux 二进制文件有所不同。

我在现有代码中添加了一个代码，它是一个额外的 case 语句。例如，`switch case`早些时候我有

```
switch(x) {
case DEV1:
 ...
case DEV2:
 ... 
```

改变的一个是

```
switch(x) {
    case DEV1:
     ...
    case DEV2:
     ...
    case DEV3: 
```

`DEV1`, `DEV2`,`DEV3`是枚举声明的枚举数。

如何使用`nm`命令或任何其他命令验证添加的代码是否真的存在于二进制文件中？

还有什么办法吗？

[这可能听起来很傻，但我仔细地做了以确保我在编译时没有犯任何错误]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:57:22.650

你不能。
当然，你可以反汇编你的文件并比较 asm 代码，但是它被编译器优化得如此之多，以至于你很难通过这种方法得到任何有意义的结果。

或者，您可以使用`cmp`命令比较文件，它适用于二进制文件，可能比`diff`.

然而，二进制差异并不是 100% 保证任何代码都被实际更改过。编译器通常会添加调试信息并编译时间戳，因此连续编译两次的相同代码将导致两个具有不同字节的二进制文件。

# c# - 可以安全地在同一个对象上使用锁定和监视吗？

> ID：14377366
> 
> 赞同：8
> 
> 时间：2013-01-17T10:48:54.263
> 
> 标签：c#, thread-safety

我有以下情况：我想相互排除对对象的访问。

到目前为止，我通常会使用锁定对象

```
object lockObject = new object();
...

method1: lock(lockObject) { CODE1 } 
```

现在我还有一个可以从另一个线程调用的方法。它不应该被阻止未知时间，而是应该在定义的时间内给出答案。

在这种情况下，我会使用监视器，例如

```
method2:
try{
   Monitor.TryEnter(lockObject , 20000, ref lockTaken);
   if (lockTaken) {CODE2}
}
catch(...){...}
finally
{
   if (lockTaken) Monitor.Exit(timerLock);
} 
```

现在我的问题是：如果lockobject相同并且相互排斥，是否可以以这种方式混合lock和monitor，或者是否需要将每个锁都更改为monitor。

那么同一个令牌是否会被“锁定”，或者监视器会为对象创建另一个令牌然后锁定？

乍一看，我看不到该应用程序同时在两者的代码中运行。但我不知道是否存在任何时序问题，其中 CODE1 和 CODE2 是并行执行的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T10:50:23.080

> 如果lockobject相同且相互排斥，可以这样混用lock和monitor

是的，这是完全安全的，它会起作用。

该`lock { }`语句被重写为调用 Monitor.Enter() 和 Monitor.Exit()。`using() {}`这只是简写，与陈述非常相似。

来自[MSDN](http://msdn.microsoft.com/en-us/library/aa664735%28v=vs.71%29.aspx)：

```
 lock (x) ... 
```

变成

```
System.Threading.Monitor.Enter(x);
try {
   ...
}
finally {
   System.Threading.Monitor.Exit(x);
} 
```

根据评论，在 Fx4 及更高版本中，它可以使用`Monitor.TryEnter()`. 但是上面的简单版本回答了你的问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T10:53:16.333

```
lock (sync)
{
   return World();
} 
```

会在中级语言中沿着这条线看。

```
L_0007: call void [mscorlib]System.Threading.Monitor::Enter(object)
L_000c: call int32 Hello::World()
L_0011: stloc.0 
L_0012: leave.s L_001b
L_0014: ldloc.1 
L_0015: call void [mscorlib]System.Threading.Monitor::Exit(object) 
```

所以应该没问题。它们在技术上是等效的。

# excel - Excel列重复值可以用两种颜色突出显示吗？

> ID：14377367
> 
> 赞同：2
> 
> 时间：2013-01-17T10:48:59.990
> 
> 标签：excel, excel-2010

我有一个 excel 表 - 其中有一列说名称：

```
Name
====
X
Y
T
Y
B
Z
X
X 
```

现在是否有任何 Excel 函数可以用颜色标记重复值，比如`"Yellow"`和`"Blue"`。作为列中的示例，`Name`我有一个重复的值说 - `X`。现在我希望将一个`X`设置为背景色，`"Blue"`而其他两个设置为`"Yellow"`.

**注意**所有不重复的值都说-`T,B,Z` 也需要标记为`Blue`。

`I am using Excel-2010.`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:35:47.780

您可以使用条件格式中的公式来实现这一点。

假设 A 列中的数据然后选择该列并首先使用“使用公式确定要格式化的单元格”选项设置此条件

`=A1<>""`

应用蓝色格式

现在设置这个条件

`=COUNTIF(A$1:A1,A1)`

应用黄色格式

现在第一个“X”应该是蓝色的——另外两个是黄色的——所有其他的值都是蓝色的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:03:35.190

当然，看看这是否为您指明了正确的方向：[Excel 2010 Duplicate values][1]

[http://www.addictivetips.com/windows-tips/excel-2010-duplicate-unique-values/](http://www.addictivetips.com/windows-tips/excel-2010-duplicate-unique-values/)

# iphone - Iphone SDK 中弹出窗口中 Tableview 的详细文本

> ID：14377368
> 
> 赞同：0
> 
> 时间：2013-01-17T10:49:01.877
> 
> 标签：iphone, ios, xcode, uitableview, popup

我打开一个包含表格视图的 PopOverview。它工作正常但是我的单元格还包含当我在 popOver 中打开表格视图时在表格视图单元格中看不到的详细文本。

我的代码如下：

```
-(IBAction)btnTableMenu_TouchUpInside:(id)sender{

   ListView *popUp=[[ListView alloc] initWithNibName:@"ListView" bundle:nil];

popoverController = [[UIPopoverController alloc]initWithContentViewController:popUp];
popoverController.delegate =self;

[popoverController setPopoverContentSize:CGSizeMake(300, 700)];
[popoverController presentPopoverFromRect:CGRectMake(150,25,20,50) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

} 
```

**我该如何解决这个？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:40:31.390

要查看详细的文本标签，您需要使用 UITableViewCellStyleSubtitle 样式创建单元格；

例如 ：

```
 - (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell * cell = nil; 
```

```
cell = [_tableView dequeueReusableCellWithIdentifier:kTableCellIdentifier];
    if(cell==nil)
{
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:kTableCellIdentifier] autorelease];
    } 
```

```
// configure cell
    cell.textLabel.text = "text label text";
    cell.detailTextLabel.text = "detailed text label text"; 
```

```
return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:56:35.193

试试这个：

`popOverController`在您的视图所在的类中添加观察者

你的`popOverController`课

**你的PopOverControlle.m**

```
-(void)viewdidLoad{

    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(removePopover:) name:@"hidePopOver" object:nil];

}
-(void)removePopover:(NSNotification *)notification{
   [yourPopOver  dismissPopoverAnimated:YES];
} 
```

**你的TableViewController.m**

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [[NSNotificationCenter defaultCenter]postNotificationName:@"hidePopOver" object:nil]; 

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T11:28:33.853

见user167 ..你只需要创建新的，`UITableViewcontroller`例如`DropDwnLevel1TableViewController.h`，正确的。`DropDwnLevel1TableViewController.m``xib`

现在在`DropDwnLevel1TableViewController`Create IBOutlate 中设置`UITableVIew`一个 UITableView 来`nib`连接`IBOUTLATE`和设置`Delegate``dataSource`

现在您可以将创建`TableViewController`的添加设置到您`UIPopoverViewcontroller`喜欢的以下方法中：-

```
-(IBAction)btnTableMenu_TouchUpInside:(id)sender{

  DropDwnLevel1TableViewController *firstViewCtrl = [[DropDwnLevel1TableViewController alloc] init];
        firstViewCtrl.title=@"My tableView";

        UINavigationController *navbar = [[UINavigationController alloc] initWithRootViewController:firstViewCtrl];

        [firstViewCtrl contentSizeForViewInPopover];

        myPopOVer = [[UIPopoverController alloc] initWithContentViewController:navbar];
        [navbar release];

        myPopOVer.delegate = self;
        myPopOVer.popoverContentSize =CGSizeMake(250,200);

        [myPopOVer presentPopoverFromRect:sender.frame inView:sender.superview permittedArrowDirections:UIPopoverArrowDirectionRight animated:YES];

} 
```

**FOR 关闭 popOver**

在你声明`popOverViewcontroller` `.m`文件`ViewDidLoad`方法的类中

```
- (void)viewDidLoad
{
     // Hear creating NSNotificationCenter for dismiss popover

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(DismissPopOver:)
                                                 name:@"Dismiss"
                                               object:nil];

  [super viewDidLoad];

}

-(void)DismissPopOver:(NSNotification *)notification {

    [yourPopOVer dismissPopoverAnimated:YES];

} 
```

现在在`DropDwnLevel1TableViewController.m` `didSelectRowAtIndexPath`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
          // hear call NSNotificationCenter who creating in main class
         [[NSNotificationCenter defaultCenter] postNotificationName:@"Dismiss" object:self];

} 
```

# android - 在 Android 4.2 中从资产中复制 sqlite 数据库时出现“无法打开数据库”错误

> ID：14377370
> 
> 赞同：7
> 
> 时间：2013-01-17T10:49:08.353
> 
> 标签：android, sqlite

我的代码适用于 Android 2.3，但我不知道为什么它不适用于 Android 4.2

我的**异常**日志在这里

```
01-17 09:54:04.411: E/SQLiteLog(24202): (14) cannot open file at line 30176 of [00bb9c9ce4]
01-17 09:54:04.411: E/SQLiteLog(24202): (14) os_unix.c:30176: (2) open(/data/data/com.example.myapp/databases/myapp.db) - 
Failed to open database '/data/data/com.example.mypapp/databases/myapp.db'.
android.database.sqlite.SQLiteCantOpenDatabaseException: unknown error (code 14): Could not open database
at android.database.sqlite.SQLiteConnection.nativeOpen(Native Method)
at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:209)
at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)
at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)
at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)
at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)
at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:804)
at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:789)
at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)
at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:669)
at com.example.myapp.DataBaseHelper.checkDataBase(DataBaseHelper.java:80)
at com.example.myapp.DataBaseHelper.createDataBase(DataBaseHelper.java:47)
at com.example.myapp.MainActivity.onCreate(MainActivity.java:61)
at android.app.Activity.performCreate(Activity.java:5104)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
at android.app.ActivityThread.access$600(ActivityThread.java:141)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5039)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method) 
```

我的**MainActivity.java**

```
public class MainActivity extends Activity {

    public void onCreate(Bundle icicle) {

        super.onCreate(icicle);

        setContentView(R.layout.activity_main);

        DataBaseHelper myDbHelper;
        myDbHelper = new DataBaseHelper(this);

        try {

            myDbHelper.createDataBase();

        } catch (IOException ioe) {         

            throw new Error("Unable to create database");
        }

        try {
            myDbHelper.openDataBase();

        } catch (SQLException sqle) {

            throw sqle;

        } finally {

            myDbHelper.close();
        }
}} 
```

我的**DatabaseHelper.java**

```
public class DataBaseHelper extends SQLiteOpenHelper{

    //The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/com.example.myapp/databases/";

    private static String DB_NAME = "myapp.db";

    private SQLiteDatabase myDataBase; 

    private final Context myContext;

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     */
    public DataBaseHelper(Context context) {

        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }   

  /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }else{

            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();

            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){  
            Log.i("Hellloooo", e.getMessage());
            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

        // Add your public helper methods to access and get content from the database.
       // You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
       // to you to create adapters for your views.

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-17T11:27:55.403

我不得不将**checkDataBase()**修改为

```
 private boolean checkDataBase() {
    File databasePath = mContext.getDatabasePath(DB_NAME);
    return databasePath.exists();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T10:58:28.167

我遇到了这个问题，这是因为在 中`4.2`，有多用户支持，如果您使用非管理员用户进行测试，则无法访问`/data/data`路径..

就我而言，我正在使用路径：

```
context.getFilesDir().getAbsolutePath().replace("files", "databases") + File.separator 
```

希望有帮助..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T11:00:04.443

某些设备无法处理大型资产。我所做的是将数据库拆分为 1 MiB 块并将它们复制到文件中

我创建了一个脚本（用于 Linux）来轻松拆分文件

```
#!/bin/bash

#split database file into chunks not larger than 1 MiB
split -b 1048576 databasename db -d -a1 
```

这些块将被命名为 db0, db1, db2, ..., dbN

```
/**
 * Copies database from assets to a file if not exists.
 * 
 * @param context Application's Context
 */
public static void copyDatabase(Context context)
{

    File target = context.getDatabasePath(databasename");
    if (target.exists()) {
        return;
    }

    target.getParentFile().mkdirs();

    InputStream is = null;
    OutputStream os = null;
    try {
        List<String> filesl = new ArrayList<String>();
        String[] files = context.getAssets().list("");
        if (files != null) {
            for (int i = 0; i < files.length; i++) {
                if (Pattern.matches("^db\\d.db$", files[i])) {
                    filesl.add(files[i]);
                }
            }
        }
        files = null;
        Collections.sort(filesl);

        if (filesl.isEmpty()) {
            return;
        }

        os = new FileOutputStream(target);

        for (int i = 0; i < filesl.size(); i++) {
            is = context.getAssets().open(filesl.get(i),
                    AssetManager.ACCESS_BUFFER);

            byte[] buffer = new byte[5096];
            int read;

            while (true) {
                read = is.read(buffer, 0, buffer.length);
                if (read < 0)
                    break;
                os.write(buffer, 0, read);
            }
            is.close();
        }

    } catch (Exception e) {
        if (target.exists()) {
            target.delete();
        }
        e.printStackTrace();
    } finally {
        if (is != null)
            try {
                is.close();
            } catch (Exception e) {
            }
        if (os != null)
            try {
                os.close();
            } catch (Exception e) {
            }
    }
} 
```

请注意，**如果不超过 10 个文件，Collections.sort 将按正确的顺序对名称进行排序**，以防 db0 ...db9 - 在 db10 之后，您将不得不编写自己的排序或比较器。

# actionscript-3 - 错误 #2044：未处理的状态事件：。级别=错误，代码=同时将值从子 swf 发送到父 swf

> ID：14377371
> 
> 赞同：1
> 
> 时间：2013-01-17T10:49:17.173
> 
> 标签：actionscript-3, flash

我正在尝试将 game.swf 加载到 main.swf 中，当 game.swf 中的游戏完成时，它将通过玩游戏获得的分数和星星发送到 main.swf ，但问题是 main.swf 是没有收到值并给出上述错误。请帮忙..

main.swf 中接收分数和星星的代码是，

```
var receiving_lc:LocalConnection;
receiving_lc = new LocalConnection();
receiving_lc.connect("gameToEngine");
receiving_lc.client = this;

public function saveScore(score:int, stars:int):void
{
      trace("score="+score.toString()+ " stars="+ stars.toString());
} 
```

game.swf 中发送分数和星星的代码是，

```
var sending_lc:LocalConnection;
sending_lc = new LocalConnection();

function send_it(evt:MouseEvent):void
{
    sending_lc.send("gameToEngine", "saveScore", score, 2); 
}

my_btn.addEventListener(MouseEvent.MOUSE_UP, send_it); 
```

请帮助解决这个问题......

解决了....

在 fsbmain 的帮助下...

只需要将接收_lc 设为全局变量...希望对您有所帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:07:42.670

首先，尝试使用与域无关的本地连接名称，即以 开头`_`，`_gameToEngine`在您的情况下，第二个添加状态事件侦听器处理`StatusEvent`错误：

```
sending_lc.addEventListener(StatusEvent.STATUS, onLCStatus);
protected function onLCStatus(event:StatusEvent):void
{
    trace("onLCStatus:", event.code);
} 
```

UPD：为了防止垃圾收集接收_lc将指向它的链接存储在私有属性中：

```
private var receiving_lc:LocalConnection; 
```

# java - 对每个第一个 HttpRequest 使用 HTMLUnit 是一个坏主意吗？

> ID：14377372
> 
> 赞同：0
> 
> 时间：2013-01-17T10:49:18.347
> 
> 标签：java, javascript, ajax, htmlunit, web-crawler

我有一个用于我的 java 后端的 ajax 前端，并且为了使事情与爬虫和`HTML5`pushState 一起工作，我将使用它`HtmlUnit`来处理每个第一个请求中的 javascript。

我可以使用过滤器进行变通以不`HtmlUnit`尝试减少服务器负载。

无论浏览器兼容性如何，哪个最适合服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:55:29.687

经过大量研究和测试，我可以告诉我在服务器端处理繁重的 javascript 应用程序不是我的好主意，HtmlUnit 是最好的工具，它不能很好地完成工作，所以如果你的要求是支持客户端不支持 javascript，所以选择 PHP 或其他一些服务器端脚本语言，或者可能是 JSF。

我的情况是，我在 JAX-RS 中有一个后端，并且我设法支持 HTML5 pushState，而无需在服务器端处理 javascript，并假设客户端处理 javascript，HtmlUnit 仍在使用以启用可抓取性。

# php - 将除白名单外的所有 URL 重写为 index.php

> ID：14377374
> 
> 赞同：1
> 
> 时间：2013-01-17T10:49:23.140
> 
> 标签：php, apache, .htaccess

在`.htaccess`我写过这个：

```
AddDefaultCharset UTF-8
RewriteEngine on

RewriteCond $1 !^(index\.php|images|test|css|js|files|wiki|sitemap\.xml|robots\.txt|favicon\.ico)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

但是我有两个问题：

1.  [http://example.com/ajax/index.php](http://example.com/ajax/index.php)不要转换为[http://example.com/index.php/ajax/index.php](http://example.com/index.php/ajax/index.php)
2.  我可以看到任何白名单目录的列表，如何防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:34:30.033

尝试这个：

```
AddDefaultCharset UTF-8
RewriteEngine on

RewriteCond %{REQUEST_URI} !^(index\.php|images|test|css|js|files|wiki|sitemap\.xml|robots\.txt|favicon\.ico)
RewriteRule ^(.*)$ index.php/$1 [L]

Options All -Indexes 
```

*   最后一行应该修复列表，在条件下使用请求 uri 应该修复重写。

# java - Java Swing：将 JScrollpane 动态添加到 JPanel 时出错

> ID：14377392
> 
> 赞同：0
> 
> 时间：2013-01-17T10:50:13.253
> 
> 标签：java, swing, jpanel, jscrollpane

更新：如果我将代码移动到 mouseclick 事件中（即，我没有调用 initMarksScreen()，而是直接将代码放入其中），它会按预期工作。所以我的问题是以自己的方法调用代码。这是否意味着如果我想在另一个点或另一个按钮上执行相同的步骤，我必须将代码直接放在那里而不是我可以调用的方法中？

* * *

我对 Java 相当陌生，并试图创建一个按钮来添加一个包含 JTable 的 JScrollPane。

它由以下方式调用：

```
 public void mouseClicked(java.awt.event.MouseEvent evt) {
            initMarksScreen();
        } 
```

代码是：

```
public final void initMarksScreen() {
    String[] columnNames = {"Student ID",
                            "Last Name",
                            "Firstname",
                            "Status",
                            "Degree",
                            "Candidate No.",
                            "Stage",
                            "Year",
                            "Code",
                            "Title",
                            "Grade Mode",
                            "Mark",
                            "Result"};
    Object[][] data = {
            {"100123456", "Cooper","Sheldon", "Signed Up", "BSc Physics","1201234","1","12","PH1001","Blackholes and Revelations","D",new Integer(99),"P"},
            {"100123456", "Cooper","Sheldon", "Signed Up", "BSc Physics","1201234","1","12","PH1025","Astrophysics","D",new Integer(95),"P"}
        };
    JTable tMarks = new JTable(data, columnNames);
    JScrollPane scrollPane = new JScrollPane(tMarks);
    tMarks.setFillsViewportHeight(true);
    panelCentral.add(scrollPane); --!!ERROR AT THIS LINE!!
    panelCentral.revalidate();
} 
```

面板声明为：

```
private static final Container panelCentral = null; 
```

由于我对 Java 很陌生，我想有一个简单的修复方法，但如果我需要添加一个 SSCCE。

一切都显示正常，直到我单击按钮然后我得到的错误是：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at GUI.mainScreen.initMarksScreen(mainScreen.java:312)
at GUI.mainScreen$2.mouseClicked(mainScreen.java:183)
at java.awt.AWTEventMulticaster.mouseClicked(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:54:40.723

如果`panelCentral`是 JPanel 并且它没有初始化，在添加之前初始化

```
 panelCentral = new JPanel();
 panelCentral.add(scrollPane); 
```

# superfish - Superfish 菜单 - 将 hoverClass onclick 应用于非子菜单项？

> ID：14377394
> 
> 赞同：2
> 
> 时间：2013-01-17T10:50:25.843
> 
> 标签：superfish

有点奇怪的问题，我觉得莫名其妙 - 将不胜感激任何帮助！不幸的是，我无法提供相关开发站点的链接，因为我无权释放密码，因此我将尝试尽可能详细地描述该问题。

基本上，我有一个使用标准结构设置的 Superfish 菜单，精简代码如下：

```
<ul class="sf-menu top-level">
    <li class="level-1"><a class="level-1" href="/menu/">Menu Title</a>
        <ul>
            <li class="level-2"><a class="level-2" href="/sub-menu/">Sub-Menu Link</a></li>
            <li class="level-2"><a class="level-2" href="/sub-menu/">Sub-Menu Link</a></li>
        </ul>
    </li>
    <li class="level-1"><a class="level-1" href="/link/">Link Title</a></li>
    <li class="level-1"><a class="level-1" href="/link/">Link Title</a></li>
</ul> 
```

菜单一切正常。然而，sfHover 类——除了被应用于带有子 ul 元素的 li 之外——也被应用于 li 在点击时没有子 ul，这导致样式被应用于这些项目而没有我不想要的子菜单. 我检查了 Superfish 的演示版本，这个异常也适用，所以它似乎是默认代码的一个“错误”，但我不知道如何修复它。

[http://users.tpg.com.au/j_birch/plugins/superfish/#examples](http://users.tpg.com.au/j_birch/plugins/superfish/#examples)

基本上，我希望 sfHover（即在 sfDefaults 中定义为 hoverClass 的类）仅应用于实际具有子菜单的项目。这在悬停时可以正常工作，但是在单击时会全面应用该类，在我的情况下，在新页面加载之前的一瞬间看起来真的很奇怪，因为应用于 sfHover 的样式显然仅适用于具有一些子菜单内容。

我真的希望这是有道理的，并且非常感谢任何可以对此有所了解或提出解决方法的人，因为我正在撕扯我的头发！

# android - Android 应用程序连接到 wifi 打印机进行打印

> ID：14377401
> 
> 赞同：3
> 
> 时间：2013-01-17T10:50:42.550
> 
> 标签：android

我是 android 编程新手，我有机会使用（wifi 打印机）。在我的应用程序中，我有一个 pdf 文件，需要使用 wifi 打印机打印输出

我对此没有太多想法，但在做了研究之后我明白了，要做到这一点有 3 件事要做

1）获取连接到我的手机正在使用的wifi网络的设备列表。

2) 然后，选择一个设备并与该设备建立连接。

3) 将数据传输到打印机

```
 I hope these are the steps which I need to use. 
```

我在第一点工作，但我得到了（Wifi 网络，如 Tata 通信、vonline 等），但没有连接到该网络的设备。

这是我使用的代码......

```
public class WiFiDemo extends Activity implements OnClickListener
 {      
    WifiManager wifi;       
    ListView lv;
    TextView textStatus;
    Button buttonScan;
    int size = 0;
    List<ScanResult> results;

    String ITEM_KEY = "key";
    ArrayList<HashMap<String, String>> arraylist = new ArrayList<HashMap<String, String>>();
    SimpleAdapter adapter;

    /* Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

//        textStatus = (TextView) findViewById(R.id.textStatus);
        buttonScan = (Button) findViewById(R.id.buttonScan);
        buttonScan.setOnClickListener(this);
        lv = (ListView)findViewById(R.id.list);

        wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        if (wifi.isWifiEnabled() == false)
        {
            Toast.makeText(getApplicationContext(), "wifi is disabled..making it enabled", Toast.LENGTH_LONG).show();
            wifi.setWifiEnabled(true);
        }   
        this.adapter = new SimpleAdapter(WiFiDemo.this, arraylist, R.layout.row, new String[] { ITEM_KEY }, new int[] { R.id.list_value });
        lv.setAdapter(this.adapter);

        registerReceiver(new BroadcastReceiver()
        {
            @Override
            public void onReceive(Context c, Intent intent) 
            {
               results = wifi.getScanResults();
               size = results.size();
            }
        }, new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));                    
    }

    public void onClick(View view) 
    {
        arraylist.clear();          
        wifi.startScan();
        checkWifi();
        Toast.makeText(this, "Scanning...." + size, Toast.LENGTH_SHORT).show();
        try 
        {
            size = size - 1;
            while (size >= 0) 
            {   
                HashMap<String, String> item = new HashMap<String, String>();                       
                item.put(ITEM_KEY, results.get(size).SSID + "  " + results.get(size).capabilities);

                arraylist.add(item);
                size--;
                adapter.notifyDataSetChanged();                 
            } 
        }
        catch (Exception e)
        { }         
    } 
    private void checkWifi(){      
        IntentFilter filter = new IntentFilter();
        filter.addAction(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);
        final WifiManager wifiManager = 
                            (WifiManager)this.getSystemService(Context.WIFI_SERVICE);;
                             registerReceiver(new BroadcastReceiver(){
           @Override
           public void onReceive(Context arg0, Intent arg1) {
               // TODO Auto-generated method stub
               Log.d("wifi","Open Wifimanager");

               String scanList = wifiManager.getScanResults().toString();
               Log.d("wifi","Scan:"+scanList);
           }           
         },filter);        
           wifiManager.startScan();
         }
} 
```

请提出解决方案

提前谢谢朋友

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-14T10:35:20.550

请参阅此[Android-wifi-print - Github](https://github.com/SureshCS-50/Android-wifi-print)，其中包含我为此创建的演示应用程序。

**编辑 ：**

正如@NileshThakkar 所说。我们将来可能会失去与该链接的连接，所以，我在这里发布代码......流。

1.  检查连接性。
2.  如果在 WiFi 中连接.. 正在存储该 WiFi 配置。
3.  现在检查我是否已经有打印机的信息（WiFi 打印机的 WiFi 配置）是否可用。如果可用，我将扫描并获取 WiFi 扫描结果列表并连接到其他列表。它将显示 WiFi 列表并单击该列表，用户将连接到打印机并存储该 WiFi 配置以供将来的打印作业使用。
4.  打印作业完成后，我将连接到之前的 WiFi 或移动数据连接。
5.  现在回到第二步。
6.  如果用户在移动数据中连接，我只是启用 WiFi 并执行第 3 步。
7.  打印作业完成后，我只是禁用了 WiFi。这样，我们将连接回移动数据连接。（这是android默认的）。

库：gson-2.2.4、itextpdf-5.4.3

**我的活动.java**

```
public class MyActivity extends Activity implements PrintCompleteService {

    private Button mBtnPrint;

    private WifiConfiguration mPrinterConfiguration, mOldWifiConfiguration;
    private WifiManager mWifiManager;
    private List<ScanResult> mScanResults = new ArrayList<ScanResult>();
    private WifiScanner mWifiScanner;

    private PrintManager mPrintManager;
    private List<PrintJob> mPrintJobs;
    private PrintJob mCurrentPrintJob;

    private File pdfFile;
    private String externalStorageDirectory;

    private Handler mPrintStartHandler = new Handler();
    private Handler mPrintCompleteHandler = new Handler();
    private String connectionInfo;

    private boolean isMobileDataConnection = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        try {
            externalStorageDirectory = Environment.getExternalStorageDirectory().toString();
            File folder = new File(externalStorageDirectory, Constants.CONTROLLER_RX_PDF_FOLDER);
            pdfFile = new File(folder, "Print_testing.pdf");
        } catch (Exception e) {
            e.printStackTrace();
        }

        mWifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);

        mWifiScanner = new WifiScanner();

        mBtnPrint = (Button) findViewById(R.id.btnPrint);

        mBtnPrint.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

                connectionInfo = Util.connectionInfo(MyActivity.this);

                if (connectionInfo.equalsIgnoreCase(Constants.CONTROLLER_MOBILE)) {
                    isMobileDataConnection = true;

                    if (mWifiManager.isWifiEnabled() == false) {
                        Toast.makeText(getApplicationContext(), "Enabling WiFi..", Toast.LENGTH_LONG).show();
                        mWifiManager.setWifiEnabled(true);
                    }

                    mWifiManager.startScan();

                    printerConfiguration();

                } else if (connectionInfo.equalsIgnoreCase(Constants.CONTROLLER_WIFI)) {
                    Util.storeCurrentWiFiConfiguration(MyActivity.this);

                    printerConfiguration();

                } else {
                    Toast.makeText(MyActivity.this, "Please connect to Internet", Toast.LENGTH_SHORT).show();
                }

            }
        });

    }

    @Override
    protected void onResume() {
        super.onResume();
        try {
            registerReceiver(mWifiScanner, new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));
            mWifiManager.startScan();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        try {
            unregisterReceiver(mWifiScanner);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void printerConfiguration() {

        mPrinterConfiguration = Util.getWifiConfiguration(MyActivity.this, Constants.CONTROLLER_PRINTER);

        if (mPrinterConfiguration == null) {
            showWifiListActivity(Constants.REQUEST_CODE_PRINTER);

        } else {

            boolean isPrinterAvailable = false;

            mWifiManager.startScan();

            for (int i = 0; i < mScanResults.size(); i++) {
                if (mPrinterConfiguration.SSID.equals("\"" + mScanResults.get(i).SSID + "\"")) {
                    isPrinterAvailable = true;
                    break;
                }
            }

            if (isPrinterAvailable) {

                connectToWifi(mPrinterConfiguration);

                doPrint();

            } else {
                showWifiListActivity(Constants.REQUEST_CODE_PRINTER);
            }

        }
    }

    private void connectToWifi(WifiConfiguration mWifiConfiguration) {
        mWifiManager.enableNetwork(mWifiConfiguration.networkId, true);
    }

    private void showWifiListActivity(int requestCode) {
        Intent iWifi = new Intent(this, WifiListActivity.class);
        startActivityForResult(iWifi, requestCode);
    }

    @Override
    public void onMessage(int status) {

        mPrintJobs = mPrintManager.getPrintJobs();

        mPrintCompleteHandler.postDelayed(new Runnable() {
            @Override
            public void run() {

                mPrintCompleteHandler.postDelayed(this, 2000);

                if (mCurrentPrintJob.getInfo().getState() == PrintJobInfo.STATE_COMPLETED) {

                    for (int i = 0; i < mPrintJobs.size(); i++) {
                        if (mPrintJobs.get(i).getId() == mCurrentPrintJob.getId()) {
                            mPrintJobs.remove(i);
                        }
                    }

                    switchConnection();

                    mPrintCompleteHandler.removeCallbacksAndMessages(null);
                } else if (mCurrentPrintJob.getInfo().getState() == PrintJobInfo.STATE_FAILED) {
                    switchConnection();
                    Toast.makeText(MyActivity.this, "Print Failed!", Toast.LENGTH_LONG).show();
                    mPrintCompleteHandler.removeCallbacksAndMessages(null);
                } else if (mCurrentPrintJob.getInfo().getState() == PrintJobInfo.STATE_CANCELED) {
                    switchConnection();
                    Toast.makeText(MyActivity.this, "Print Cancelled!", Toast.LENGTH_LONG).show();
                    mPrintCompleteHandler.removeCallbacksAndMessages(null);
                }

            }
        }, 2000);

    }

    public void switchConnection() {
        if (!isMobileDataConnection) {
            mOldWifiConfiguration = Util.getWifiConfiguration(MyActivity.this, Constants.CONTROLLER_WIFI);

            boolean isWifiAvailable = false;

            mWifiManager.startScan();

            for (int i = 0; i < mScanResults.size(); i++) {
                if (mOldWifiConfiguration.SSID.equals("\"" + mScanResults.get(i).SSID + "\"")) {
                    isWifiAvailable = true;
                    break;
                }
            }

            if (isWifiAvailable) {
                connectToWifi(mOldWifiConfiguration);
            } else {
                showWifiListActivity(Constants.REQUEST_CODE_WIFI);
            }
        } else {
            mWifiManager.setWifiEnabled(false);
        }
    }

    public void printDocument(File pdfFile) {
        mPrintManager = (PrintManager) getSystemService(Context.PRINT_SERVICE);

        String jobName = getString(R.string.app_name) + " Document";

        mCurrentPrintJob = mPrintManager.print(jobName, new PrintServicesAdapter(MyActivity.this, pdfFile), null);
    }

    public void doPrint() {
        mPrintStartHandler.postDelayed(new Runnable() {
            @Override
            public void run() {

                Log.d("PrinterConnection Status", "" + mPrinterConfiguration.status);

                mPrintStartHandler.postDelayed(this, 3000);

                if (mPrinterConfiguration.status == WifiConfiguration.Status.CURRENT) {
                    if (Util.computePDFPageCount(pdfFile) > 0) {
                        printDocument(pdfFile);
                    } else {
                        Toast.makeText(MyActivity.this, "Can't print, Page count is zero.", Toast.LENGTH_LONG).show();
                    }
                    mPrintStartHandler.removeCallbacksAndMessages(null);
                } else if (mPrinterConfiguration.status == WifiConfiguration.Status.DISABLED) {
                    Toast.makeText(MyActivity.this, "Failed to connect to printer!.", Toast.LENGTH_LONG).show();
                    mPrintStartHandler.removeCallbacksAndMessages(null);
                }
            }
        }, 3000);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == Constants.REQUEST_CODE_PRINTER && resultCode == Constants.RESULT_CODE_PRINTER) {
            mPrinterConfiguration = Util.getWifiConfiguration(MyActivity.this, Constants.CONTROLLER_PRINTER);
            doPrint();
        }
    }

    public class WifiScanner extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            mScanResults = mWifiManager.getScanResults();
            Log.e("scan result size", "" + mScanResults.size());
        }
    }

} 
```

**WiFiListActivity.java**

```
public class WifiListActivity extends Activity implements View.OnClickListener {

    private ListView mListWifi;
    private Button mBtnScan;

    private WifiManager mWifiManager;
    private WifiAdapter adapter;
    private WifiListener mWifiListener;

    private List<ScanResult> mScanResults = new ArrayList<ScanResult>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_wifi_list);

        mBtnScan = (Button) findViewById(R.id.btnNext);
        mBtnScan.setOnClickListener(this);

        mListWifi = (ListView) findViewById(R.id.wifiList);

        mWifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);

        if (mWifiManager.isWifiEnabled() == false) {
            Toast.makeText(getApplicationContext(), "wifi is disabled.. making it enabled", Toast.LENGTH_LONG).show();
            mWifiManager.setWifiEnabled(true);
        }

        mWifiListener = new WifiListener();

        adapter = new WifiAdapter(WifiListActivity.this, mScanResults);
        mListWifi.setAdapter(adapter);

        mListWifi.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                connectToWifi(i);
            }
        });

    }

    @Override
    public void onClick(View view) {
        mWifiManager.startScan();
        Toast.makeText(this, "Scanning....", Toast.LENGTH_SHORT).show();
    }

    @Override
    protected void onResume() {
        super.onResume();
        try {
            registerReceiver(mWifiListener, new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));
            mWifiManager.startScan();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        try {
            unregisterReceiver(mWifiListener);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void connectToWifi(int position) {

        final ScanResult item = mScanResults.get(position);

        String Capabilities = item.capabilities;

        if (Capabilities.contains("WPA")) {
            AlertDialog.Builder builder = new AlertDialog.Builder(WifiListActivity.this);
            builder.setTitle("Password:");

            final EditText input = new EditText(WifiListActivity.this);
            input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD);
            builder.setView(input);

            builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    String m_Text = input.getText().toString();
                    WifiConfiguration wifiConfiguration = new WifiConfiguration();
                    wifiConfiguration.SSID = "\"" + item.SSID + "\"";
                    wifiConfiguration.preSharedKey = "\"" + m_Text + "\"";
                    wifiConfiguration.hiddenSSID = true;
                    wifiConfiguration.status = WifiConfiguration.Status.ENABLED;
                    wifiConfiguration.allowedProtocols.set(WifiConfiguration.Protocol.WPA); // For WPA
                    wifiConfiguration.allowedProtocols.set(WifiConfiguration.Protocol.RSN); // For WPA2
                    wifiConfiguration.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);
                    wifiConfiguration.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_EAP);
                    wifiConfiguration.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
                    wifiConfiguration.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
                    wifiConfiguration.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
                    wifiConfiguration.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);
                    wifiConfiguration.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40);
                    wifiConfiguration.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP104);
                    int res = mWifiManager.addNetwork(wifiConfiguration);
                    boolean b = mWifiManager.enableNetwork(res, true);

                    finishActivity(wifiConfiguration, res);

                }
            });
            builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });

            builder.show();

        } else if (Capabilities.contains("WEP")) {
            AlertDialog.Builder builder = new AlertDialog.Builder(WifiListActivity.this);
            builder.setTitle("Title");

            final EditText input = new EditText(WifiListActivity.this);
            input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD);
            builder.setView(input);

            builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    String m_Text = input.getText().toString();
                    WifiConfiguration wifiConfiguration = new WifiConfiguration();
                    wifiConfiguration.SSID = "\"" + item.SSID + "\"";
                    wifiConfiguration.wepKeys[0] = "\"" + m_Text + "\"";
                    wifiConfiguration.wepTxKeyIndex = 0;
                    wifiConfiguration.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
                    wifiConfiguration.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40);
                    int res = mWifiManager.addNetwork(wifiConfiguration);
                    Log.d("WifiPreference", "add Network returned " + res);
                    boolean b = mWifiManager.enableNetwork(res, true);
                    Log.d("WifiPreference", "enableNetwork returned " + b);

                    finishActivity(wifiConfiguration, res);
                }
            });
            builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });

            builder.show();

        } else {

            WifiConfiguration wifiConfiguration = new WifiConfiguration();
            wifiConfiguration.SSID = "\"" + item.SSID + "\"";
            wifiConfiguration.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
            int res = mWifiManager.addNetwork(wifiConfiguration);
            Log.d("WifiPreference", "add Network returned " + res);
            boolean b = mWifiManager.enableNetwork(res, true);
            Log.d("WifiPreference", "enableNetwork returned " + b);

            finishActivity(wifiConfiguration, res);
        }

    }

    private void finishActivity(WifiConfiguration mWifiConfiguration, int networkId) {

        mWifiConfiguration.networkId = networkId;

        Util.savePrinterConfiguration(WifiListActivity.this, mWifiConfiguration);
        Intent intent = new Intent();
        setResult(Constants.RESULT_CODE_PRINTER, intent);
        finish();
    }

    public class WifiListener extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            mScanResults = mWifiManager.getScanResults();
            Log.e("scan result size ", "" + mScanResults.size());
            adapter.setElements(mScanResults);
        }
    }
} 
```

**WifiAdapter.java**

```
public class WifiAdapter extends BaseAdapter {

    private Activity mActivity;
    private List<ScanResult> mWifiList = new ArrayList<ScanResult>();

    public WifiAdapter(Activity mActivity, List<ScanResult> mWifiList) {
        this.mActivity = mActivity;
        this.mWifiList = mWifiList;
    }

    @Override
    public int getCount() {
        return mWifiList.size();
    }

    @Override
    public Object getItem(int i) {
        return mWifiList.get(i);
    }

    @Override
    public long getItemId(int i) {
        return i;
    }

    @Override
    public View getView(int i, View view, ViewGroup viewGroup) {

        LayoutInflater inflater = (LayoutInflater) mActivity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = inflater.inflate(R.layout.custom_wifi_list_item, null);

        TextView txtWifiName = (TextView) view.findViewById(R.id.txtWifiName);
        txtWifiName.setText(mWifiList.get(i).SSID);

        return view;
    }

    public void setElements(List<ScanResult> mWifis) {
        this.mWifiList = mWifis;
        notifyDataSetChanged();
    }
} 
```

**PrintCompleteService.java**

```
public interface PrintCompleteService {
    public void onMessage(int status);
} 
```

**PrintServiceAdapter.java**

```
public class PrintServicesAdapter extends PrintDocumentAdapter {
    private Activity mActivity;
    private int pageHeight;
    private int pageWidth;
    private PdfDocument myPdfDocument;
    private int totalpages = 1;
    private File pdfFile;
    private PrintCompleteService mPrintCompleteService;

    public PrintServicesAdapter(Activity mActivity, File pdfFile) {
        this.mActivity = mActivity;
        this.pdfFile = pdfFile;
        this.totalpages = Util.computePDFPageCount(pdfFile);
        this.mPrintCompleteService = (PrintCompleteService) mActivity;
    }

    @Override
    public void onLayout(PrintAttributes oldAttributes,
                         PrintAttributes newAttributes,
                         CancellationSignal cancellationSignal,
                         LayoutResultCallback callback,
                         Bundle metadata) {
        myPdfDocument = new PrintedPdfDocument(mActivity, newAttributes);

        pageHeight =
                newAttributes.getMediaSize().getHeightMils() / 1000 * 72;
        pageWidth =
                newAttributes.getMediaSize().getWidthMils() / 1000 * 72;

        if (cancellationSignal.isCanceled()) {
            callback.onLayoutCancelled();
            return;
        }

        if (totalpages > 0) {
            PrintDocumentInfo.Builder builder = new PrintDocumentInfo
                    .Builder(pdfFile.getName())
                    .setContentType(PrintDocumentInfo.CONTENT_TYPE_DOCUMENT)
                    .setPageCount(totalpages);

            PrintDocumentInfo info = builder.build();
            callback.onLayoutFinished(info, true);
        } else {
            callback.onLayoutFailed("Page count is zero.");
        }
    }

    @Override
    public void onWrite(final PageRange[] pageRanges,
                        final ParcelFileDescriptor destination,
                        final CancellationSignal cancellationSignal,
                        final WriteResultCallback callback) {
        InputStream input = null;
        OutputStream output = null;

        try {
            input = new FileInputStream(pdfFile);
            output = new FileOutputStream(destination.getFileDescriptor());
            byte[] buf = new byte[1024];
            int bytesRead;

            while ((bytesRead = input.read(buf)) > 0) {
                output.write(buf, 0, bytesRead);
            }

            callback.onWriteFinished(new PageRange[]{PageRange.ALL_PAGES});

        } catch (FileNotFoundException ee) {
            //Catch exception
        } catch (Exception e) {
            //Catch exception
        } finally {
            try {
                input.close();
                output.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        cancellationSignal.setOnCancelListener(new CancellationSignal.OnCancelListener() {
            @Override
            public void onCancel() {
                mPrintCompleteService.onMessage(Constants.PRINTER_STATUS_CANCELLED);
            }
        });
    }

    @Override
    public void onFinish() {
        mPrintCompleteService.onMessage(Constants.PRINTER_STATUS_COMPLETED);
    }
} 
```

**实用程序.java**

```
public class Util {

    public static String connectionInfo(Activity mActivity) {
        String result = "not connected";

        ConnectivityManager cm = (ConnectivityManager) mActivity.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo[] netInfo = cm.getAllNetworkInfo();

        for (NetworkInfo ni : netInfo) {
            if (ni.getTypeName().equalsIgnoreCase(Constants.CONTROLLER_WIFI)) {
                if (ni.isConnected()) {
                    result = Constants.CONTROLLER_WIFI;
                    break;
                }
            } else if (ni.getTypeName().equalsIgnoreCase(Constants.CONTROLLER_MOBILE)) {
                if (ni.isConnected()) {
                    result = Constants.CONTROLLER_MOBILE;
                    break;
                }
            }
        }

        return result;
    }

    public static void saveWifiConfiguration(Activity mActivity, WifiConfiguration mWifiConfiguration) {
        Gson mGson = new Gson();
        Type mType = new TypeToken<WifiConfiguration>() {
        }.getType();
        String sJson = mGson.toJson(mWifiConfiguration, mType);
        SharedPreferences mSharedPrefs = mActivity.getSharedPreferences(Constants.DEMO_PREFERENCES, Context.MODE_PRIVATE);
        mSharedPrefs.edit().putString(Constants.CONTROLLER_WIFI_CONFIGURATION, sJson).commit();
    }

    public static void savePrinterConfiguration(Activity mActivity, WifiConfiguration mPrinterConfiguration) {
        Gson mGson = new Gson();
        Type mType = new TypeToken<WifiConfiguration>() {
        }.getType();
        String sJson = mGson.toJson(mPrinterConfiguration, mType);
        SharedPreferences mSharedPrefs = mActivity.getSharedPreferences(Constants.DEMO_PREFERENCES, Context.MODE_PRIVATE);
        mSharedPrefs.edit().putString(Constants.CONTROLLER_PRINTER_CONFIGURATION, sJson).commit();
    }

    public static WifiConfiguration getWifiConfiguration(Activity mActivity, String configurationType) {
        WifiConfiguration mWifiConfiguration = new WifiConfiguration();
        Gson mGson = new Gson();
        SharedPreferences mSharedPrefs = mActivity.getSharedPreferences(Constants.DEMO_PREFERENCES, Context.MODE_PRIVATE);
        Type mWifiConfigurationType = new TypeToken<WifiConfiguration>() {
        }.getType();
        String mWifiJson = "";
        if (configurationType.equalsIgnoreCase(Constants.CONTROLLER_WIFI)) {
            mWifiJson = mSharedPrefs.getString(Constants.CONTROLLER_WIFI_CONFIGURATION, "");
        } else if (configurationType.equalsIgnoreCase(Constants.CONTROLLER_PRINTER)) {
            mWifiJson = mSharedPrefs.getString(Constants.CONTROLLER_PRINTER_CONFIGURATION, "");
        }
        if (!mWifiJson.isEmpty()) {
            mWifiConfiguration = mGson.fromJson(mWifiJson, mWifiConfigurationType);
        } else {
            mWifiConfiguration = null;
        }
        return mWifiConfiguration;
    }

    public static void storeCurrentWiFiConfiguration(Activity mActivity) {
        try {
            WifiManager wifiManager = (WifiManager) mActivity.getSystemService(Context.WIFI_SERVICE);
            final WifiInfo connectionInfo = wifiManager.getConnectionInfo();
            if (connectionInfo != null && !TextUtils.isEmpty(connectionInfo.getSSID())) {
                WifiConfiguration mWifiConfiguration = new WifiConfiguration();
                mWifiConfiguration.networkId = connectionInfo.getNetworkId();
                mWifiConfiguration.BSSID = connectionInfo.getBSSID();
                mWifiConfiguration.hiddenSSID = connectionInfo.getHiddenSSID();
                mWifiConfiguration.SSID = connectionInfo.getSSID();

                // store it for future use -> after print is complete you need to reconnect wifi to this network.
                saveWifiConfiguration(mActivity, mWifiConfiguration);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static int computePDFPageCount(File file) {
        RandomAccessFile raf = null;
        int pages = 0;
        try {
            raf = new RandomAccessFile(file, "r");

            RandomAccessFileOrArray pdfFile = new RandomAccessFileOrArray(
                    new RandomAccessSourceFactory().createSource(raf));
            PdfReader reader = new PdfReader(pdfFile, new byte[0]);
            pages = reader.getNumberOfPages();
            reader.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return pages;
    }
} 
```

# android - android：如何在本机代码中获得显示分辨率

> ID：14377407
> 
> 赞同：1
> 
> 时间：2013-01-17T10:50:52.890
> 
> 标签：android, screen

在android中是否可以在本机代码中获取显示尺寸？

我看到有EGL相关的功能：

`EGLDisplay display = eglGetDisplay(EGL_DEFAULT_DISPLAY);`

`surface = eglCreateWindowSurface(display, config, engine->app->window, NULL);`

`eglQuerySurface(display, surface, EGL_WIDTH, &w);`

`eglQuerySurface(display, surface, EGL_HEIGHT, &h);`

但我需要维度而不创建任何表面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-05T17:56:07.760

`APP_CMD_INIT_WINDOW`您可以在本机活动中像这样处理“应用程序命令”时获取窗口大小：

```
static void engine_handle_cmd(struct android_app* app, int32_t cmd) {
    struct engine* engine = (struct engine*)app->userData;
    switch (cmd) {
    case APP_CMD_INIT_WINDOW:
        if (engine->app->window != NULL) {
            int width = ANativeWindow_getWidth(engine->app->window);
            int height = ANativeWindow_getHeight(engine->app->window);
        } 
```

如果您想知道如何设置结构和回调`main.c`，请查看示例 NDK 项目。`native-activity``engine``engine_handle_cmd`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T05:48:44.460

下面是从谷歌来源截屏的相关代码[http://code.google.com/p/androidscreenshot/source/browse/trunk/Binary/screenshot.c?r=3](http://code.google.com/p/androidscreenshot/source/browse/trunk/Binary/screenshot.c?r=3)

vinfo 结构包含字段 xres 和 yres。

`int framebufferHandle = -1;`

```
struct fb_var_screeninfo vinfo;
framebufferHandle = open("/dev/graphics/fb0", O_RDONLY);
if(framebufferHandle < 0) 
{
    printf("failed to open /dev/graphics/fb0\n");
    // handle error
}

if(ioctl(framebufferHandle, FBIOGET_VSCREENINFO, &vinfo) < 0) 
{
    printf("failed to open ioctl\n");
    // handle error
}
fcntl(framebufferHandle, F_SETFD, FD_CLOEXEC); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T10:59:50.910

如果您正在寻找像素值 height_pixels 和 width_pixels 是您正在寻找的问题。有关更多信息，请参阅开发者文档：

[http://developer.android.com/reference/android/util/DisplayMetrics.html](http://developer.android.com/reference/android/util/DisplayMetrics.html)

# php - 嵌套导航

> ID：14377412
> 
> 赞同：0
> 
> 时间：2013-01-17T10:51:11.220
> 
> 标签：php, mysql, navigation

我想制作一个有 2 个级别的导航。

**到目前为止我的代码**

```
 <?php
        $sql = ("SELECT name, id, pid FROM tl_table WHERE pid='' ORDER BY name");
        $result = mysql_query($sql);

        $list = array();
        while ($row = mysql_fetch_assoc($result)) {
           $list[] = $row;
        }  

        foreach ($list as $kat) {
          echo '<li><a href="#">' . $kat['name'] . '</a></li>';
        }  
        ?> 
```

嵌套集目前对我来说太棘手了。

最后我想要这个。

```
<li>$kat['name']
   <li>$kat['name'] from PID</li>
</li> 
```

MySQL： http: [//i46.tinypic.com/35052m0.png](http://i46.tinypic.com/35052m0.png) - IMG

不，我想获取 MySQL DB 的内容，请参见图片链接。

MySQL：

```
id—–pid——name
1——0——–name1
2——0——–name2
3——0——–name3
4——3——–name3.1
5——3——–name3.2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:27:28.170

```
<?php
    $sql = ("SELECT name, id, pid FROM tl_table WHERE pid='' ORDER BY name");
    $result = mysql_query($sql);

    $list        = array();
    while ($row  = mysql_fetch_assoc($result)) {
       $list[$row['id']]   = $row;
       $sql      = ("SELECT name, id, pid FROM tl_table WHERE pid='".$row['id']."' ORDER BY name");
       $res      = mysql_query($sql);
       while($rw = mysql_fetch_assoc($res)){
          $list[$row['id']]['sub'][] = $rw; 
       }
    } 
echo "<pre>";
print_r($list); 

?> 
```

# java-me - 如何在 lwit 中设置特定列表项的样式？

> ID：14377413
> 
> 赞同：0
> 
> 时间：2013-01-17T10:51:12.023
> 
> 标签：java-me, lwuit, lwuit-form, lwuit-list

我需要一个要求，即在列表中，某些列表项应该表现出与其他项不同的样式。如何在 lwuit 中实现这一点？

例如，

```
 List menu = new List();
        menu.addItem("1\. Green");
        menu.addItem("2\. Red");
        menu.addItem("3\. Blue"); 
```

在此列表中，每个项目都应具有表示其颜色的样式（即）绿色应具有绿色背景，红色应具有红色背景。在 LWUIT 中可以吗？我们怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:44:22.943

您必须为此用例创建一个单元格渲染器。只需派生“DefaultListCellRenderer”，例如：

```
DefaultListCellRenderer rend = new DefaultListCellRenderer() {
     public Component getCellRendererComponent(Component list, Object model, Object value, int index, boolean isSelected) {
           Component c = super.getCellRendererComponent(...);
           c.getStyle().setBgTransparency(255);
           c.getStyle().setBgColor(theColorYouWant);
           return c;
     }
}; 
```

然后将此渲染器设置为列表。您可能需要在此处进行一些额外的改进，因为这是一个过度简化的渲染器示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:44:59.363

这是一种方法。1\. 为列表中的每个项目创建一个组件 2\. 为其添加背景颜色和文本。3\. 完成后，将其添加到您创建的表单或任何其他自定义组件中。

其他方式：您可以创建自己的列表渲染器。[以下](http://lwuit.blogspot.in/2011/03/list-rendering-easy-way-generic-list.html)是有关如何执行此操作的一些信息

# python - 变色龙中的“while”循环？

> ID：14377421
> 
> 赞同：1
> 
> 时间：2013-01-17T10:51:35.200
> 
> 标签：python, pyramid, chameleon, template-tal

我正在做一个 Pyramid 项目，并且正在考虑稍后会出现的东西。我的特定用例是提升资源树以构建面包屑，但我也对一般实现感到好奇。

在 Python 代码中，我想要这个：

```
while resource is not None:
    pass  # do something with resource
    resource = resource.__parent__ 
```

但是在 Chameleon 中，你只会得到`tal:repeat`，这是一个`for`循环。我可以感觉到您可以编写一个将提供给模板的函数：

```
def ascend(resource):
    while resource is not None:
        yield resource
        resource = resource.__parent__ 
```

然后可以将其用作`tal:repeat="item ascend(resource)"`.

因此，这可以推广到一个while循环：

```
def while_(value, condition, suite):
    while condition(value):
        yield value
        value = suite(value) 
```

用法：`tal:repeat="item while_(resource, lambda resource: resource is not None, lambda resource: resource.__parent__)"`。丑陋。我认为你会很快进入专精领域！

类似地，如果`break`支持，则可以进行无限`for`循环。但事实并非如此。（我认为，支持它也不明智。

有没有更好或更简单的方法来实现这一点？（一般情况或我的具体情况。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:52:54.967

不，没有。

Chameleon 模板并不意味着实现复杂的逻辑。最初的 Zope Page Template 理念是将所有业务逻辑留给 Python 代码，而模板的功能刚好足以将生成的信息转化为演示文稿，仅此而已。

这就是为什么 Chameleon 只给你一个 for 循环。遍历复杂结构不是模板的职责，它的职责仅限于创建已处理数据的表示。

# java - 过滤文件

> ID：14377422
> 
> 赞同：2
> 
> 时间：2013-01-17T10:51:37.853
> 
> 标签：java

我想检查文件的文件类型。我想到了幻数，但是如何在 Java 中使用它。

我只想在我的程序中允许文本文件和过滤文件，如 jpg 等。一些想法，我能做什么。

```
private String path;
private String fileText;
private String textLine;
public LoadModel(String path) {

    this.path = path;
    this.fileText = "";

    FileReader read = null;
    BufferedReader bufRead = null;

    if (path != null && new File(path).exists()
            && !(new File(path).isDirectory())) {

        try {

            read = new FileReader(path);

            bufRead = new BufferedReader(read);
            do {
                try {
                    this.textLine = bufRead.readLine();
                } catch (IOException ex) {
                    Logger.getLogger(LoadModel.class.getName()).log(Level.SEVERE, null, ex);
                }
                if (this.textLine != null) {
                    this.fileText = this.fileText + this.textLine + "\n";
                }
            } while (this.textLine != null);
        } catch (FileNotFoundException ex) {
            Logger.getLogger(LoadModel.class.getName()).log(Level.SEVERE, null, ex);
        }
    } else {
        HinweisDialogController.hinweisDialogOK("Die angegebene Datei existiert nicht");

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T10:53:39.640

[在这里](http://www.rgagnon.com/javadetails/java-0487.html)，您可以找到可用于通过代码示例识别 java 中的 mime 类型的 API 列表。

在 java 7 中也有一个选项

```
Files.probeContentType(path) 
```

.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T10:59:52.663

你可以试试`java.nio.file.Files.probeContentType`哪个是专为确定文件内容类型而设计的。例如这个测试

```
 System.out.println(Files.probeContentType(Paths.get("1.xml")));
    System.out.println(Files.probeContentType(Paths.get("1.txt"))); 
```

印刷

```
text/xml
text/plain 
```

有关详细信息，请参阅 API

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T11:22:10.973

如果您需要您的代码在早期版本的 JDK（不是 JDK7）上工作，您可以使用`Apache Tika's` `MimeType`检测器，它有`MimeType#detect()`方法

更多信息[在这里](http://tika.apache.org/1.2/detection.html#The_default_Mime_Types_Detector)

# assembly - 使用 ARM Dissembler 的多个标头处理 .ELF

> ID：14377428
> 
> 赞同：1
> 
> 时间：2013-01-17T10:51:59.287
> 
> 标签：assembly, arm, elf, disassembly

我正在编写一个简单的 ARM 反汇编程序，它采用 ELF 文件并将其恢复为 ARM 指令。

我在处理包含多个程序头的 ELF 文件时遇到问题我有一个示例 .elf 文件来演示这一点，但我不确定在哪里上传它。

我认为问题在于我将错误的起始地址传递给 Dissemble() 函数。

有人对此有任何想法吗？

**主要的.c**

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <ctype.h>

#include "elf.h"

void Disassemble(unsigned int *armI, int count, unsigned int startAddress);
void DecodeInstruction(unsigned int instr, unsigned int Address);
void HexToBinary(int *bits, unsigned int hex);
int SignExtend(unsigned int x, int bits);
int Rotate(unsigned int rotatee, int amount);
void PrintASCII(unsigned int instr);
void ProcessSWI(int *bits, unsigned int instr, char *instructionPtr);
void ProcessBranch(int *bits, unsigned int instr, unsigned int currentAddress, char *instructionPtr);
void ProcessDP(int *bits, unsigned int instr, char *instructionPtr);
void ProcessLDR(int *bits, unsigned int instr, char *instructionPtr);
void ProcessMUL (int *bits, unsigned int instr, char *instructionPtr);
void ProcessLDM(int *bits, unsigned int instr, char *instructionPtr);

int main(int argc, const char * argv[])
{
    FILE *fp;
    ELFHEADER elfhead;
    int i;
    unsigned int *armInstructions = NULL;

    if(argc < 2)
    {
        fprintf(stderr, "Usage: DisARM <filename>\n");
        return 1;
    }

    /* Open ELF file for binary reading */
   if((fp = fopen(argv[1], "rb")) == NULL)
    {
      fprintf(stderr, "%s\n", argv[1]);
      exit(EXIT_FAILURE);
    }
    /* Read in the header */
    fread(&elfhead, 1, sizeof(ELFHEADER), fp);
    if(!(elfhead.magic[0] == 0177 && elfhead.magic[1] == 'E' && elfhead.magic[2] == 'L' && elfhead.magic[3] == 'F'))
    {
        fprintf(stderr, "%s is not an ELF file\n", argv[1]);
        return 2;
    }
    printf("\nFile-type: %d\n",elfhead.filetype);
    printf("Arch-type: %d\n",elfhead.archtype);
    printf("Entry: %x\n", elfhead.entry);
    printf("Prog-Header: %x\n", elfhead.phdrpos);
    printf("Prog-Header-count: %d\n", elfhead.phdrcnt);
    printf("Section-Header: %x\n", elfhead.shdrpos);

    /* Find and read program headers */
    ELFPROGHDR *prgHdr[elfhead.phdrcnt];
    for(i = 0; i < elfhead.phdrcnt; i++)
      {
    fseek(fp, elfhead.phdrpos*(i+1), SEEK_SET);
    prgHdr[i] = (ELFPROGHDR*)malloc(sizeof(ELFPROGHDR));
    if(!prgHdr)
      {
        fprintf(fp, "Out of Memory\n");
        fclose(fp);
        return 3;
      }

    fread(prgHdr[i], 1, sizeof(ELFPROGHDR), fp);
    printf("Segment-Offset: %x\n", prgHdr[i]->offset);
    printf("File-size: %d\n", prgHdr[i]->filesize);
    printf("Align: %d\n", prgHdr[i]->align);

        /* allocate memory and read in ARM instructions */
        armInstructions = (unsigned int *)malloc(prgHdr[i]->filesize + 3 & ~3);
        if(armInstructions == NULL)
        {
            fclose(fp);
            free(prgHdr[elfhead.phdrcnt]);
            fprintf(stderr, "Out of Memory\n");
            return 3;
        }
        fseek(fp, prgHdr[i]->offset, SEEK_SET);
        fread(armInstructions, 1, prgHdr[i]->filesize, fp);

        /* Disassemble */
        printf("\nInstructions\n\n");

        Disassemble(armInstructions, (prgHdr[i]->filesize + 3 & ~3) /4, prgHdr[i]->virtaddr);
        printf("\n"); 
        free(armInstructions);
    free(prgHdr[i]);
      }
    fclose(fp);

    return 0;
}

void Disassemble(unsigned int *armI, int count, unsigned int startAddress)
{
    int i;
    printf("Address   Hex       ASCII\tDisassembly\n");
    printf("=============================================\n");
    for(i = 0; i < count; i++)
    {
        printf("%08X  %08X", startAddress + i*4, armI[i]);
        DecodeInstruction(armI[i], startAddress + i*4);
        printf("\n");
    }

}

void DecodeInstruction(unsigned int instr, unsigned int Address)
{
  int bits[32];
  char instruction[100];

  sprintf(instruction, "\0");

  HexToBinary(bits, instr);
  printf("  ");
  PrintASCII(instr);
  printf("\t");

  if (bits[27] && bits[26] && bits[25] && bits[24])
    ProcessSWI(bits, instr, instruction);
  else if (bits[27] && !bits[26] && bits[25])
    ProcessBranch(bits, instr, Address, instruction);
  else if (!bits[27] && bits[26])
    {
    if (!bits[25]) 
      ProcessLDR(bits, instr, instruction);
    else if (bits[4])
      strcat(instruction, "Undefined Instruction.");
    else if (!bits[4])
      ProcessLDR(bits, instr, instruction);
    }
  else if (bits[27] && !bits[26] && !bits[25])
    ProcessLDM(bits, instr, instruction);
  else if (!(bits[27] || bits[26] || bits[25] || bits[24] || bits[23] || bits[22]) && (bits[7] && !bits[6] && !bits[5] && bits[4]))
    ProcessMUL(bits, instr, instruction);
  else if (!bits[27] && !bits[26])
    ProcessDP(bits, instr, instruction);
  else
    strcat(instruction, "Undefined Instruction.");

  printf("%s", instruction);

  /* DEBUG PRINT BINARY */
  /*printf("\t\t");
    for(int i=31;i>=0;i--)
    {
    printf("%d", bits[i]);
    }*/
}

int SignExtend(unsigned int x, int bits)
{
    int r;
    int m = 1U << (bits - 1);
    x = x & ((1U << bits) - 1); 
    r = (x ^ m) - m;
    return r;
}

int Rotate(unsigned int rotatee, int amount)
{
    unsigned int mask, lo, hi;

    mask = (1 << amount) - 1;
    lo = rotatee & mask;
    hi = rotatee >> amount;

    rotatee = (lo << (32 - amount)) | hi;

    return rotatee;
}

void HexToBinary(int *bits, unsigned int hex)
{
  int i;
  for (i = 0; i < 32; i++) 
    {
      bits[i] = (hex >> i) & 1;
    }
}

void PrintCCode(unsigned int instr, char *instructionPtr)
{
  switch((instr & 0xF0000000) >> 28)
    {
    case(13): strcat(instructionPtr, "LE"); break;
    case(12): strcat(instructionPtr, "GT"); break;
    case(11): strcat(instructionPtr, "LT"); break;
    case(10): strcat(instructionPtr, "GE"); break;
    case(9): strcat(instructionPtr, "LS"); break;
    case(8): strcat(instructionPtr, "HI"); break;
    case(7): strcat(instructionPtr, "VC"); break;
    case(6): strcat(instructionPtr, "VS"); break;
    case(5): strcat(instructionPtr, "PL"); break;
    case(4): strcat(instructionPtr, "MI"); break;
    case(3): strcat(instructionPtr, "CC/LO"); break;
    case(2): strcat(instructionPtr, "CS/HS"); break;
    case(1): strcat(instructionPtr, "NE"); break;
    case(0): strcat(instructionPtr, "EQ"); break;
    }
}

void PrintASCII(unsigned int instr)
{
  char c[5];
  int i;

  c[0] = (instr & 0x000000FF);
  c[1] = (instr & 0x0000FF00) >> 8;
  c[2] = (instr & 0x00FF0000) >> 16;
  c[3] = (instr & 0xFF000000) >> 24;

  for(i = 0; i < 4; i++)
    {
      if(isalpha(c[i]) || ispunct(c[i]))
    printf("%c", c[i]);
      else
    printf("*");
    }
}

void ProcessSWI(int *bits, unsigned int instr, char *instructionPtr)
{
  strcat(instructionPtr, "SWI");
  PrintCCode(instr, instructionPtr);
  sprintf(instructionPtr + strlen(instructionPtr), "\t%X", instr & 0x00FFFFFF);
}

void ProcessBranch(int *bits, unsigned int instr, unsigned int currentAddress, char *instructionPtr)
{
  if ( bits[24] )
    strcat(instructionPtr, "BL");
  else
    strcat(instructionPtr, "B");
  PrintCCode(instr, instructionPtr);
  sprintf(instructionPtr + strlen(instructionPtr), "\t&%X", (SignExtend((instr & 0x00FFFFFF) << 2, 26)) + currentAddress + 8);
}

void ProcessDP(int *bits, unsigned int instr, char *instructionPtr)
{
  int DP = (instr & 0x01E00000) >> 21;
  int Rd = (instr & 0x0000F000) >> 12;
  int Rn = (instr & 0x000F0000) >> 16;
  int Rot = (instr & 0x00000F00) >> 8;
  int Op = (instr & 0x000000FF);
  int Rm = (instr & 0x0000000F);
  int Sh = (instr & 0x00000060) >> 5;
  int Shift;

  switch(DP)
    {
    case(15): strcat(instructionPtr, "MVN"); break;
    case(14): strcat(instructionPtr, "BIC"); break;
    case(13): strcat(instructionPtr, "MOV"); break;
    case(12): strcat(instructionPtr, "ORR"); break;
    case(11): strcat(instructionPtr, "CMN"); break;
    case(10): strcat(instructionPtr, "CMP"); break;
    case(9): strcat(instructionPtr, "TEQ"); break;
    case(8): strcat(instructionPtr, "TST"); break;
    case(7): strcat(instructionPtr, "RSC"); break;
    case(6): strcat(instructionPtr, "SBC"); break;
    case(5): strcat(instructionPtr, "ADC"); break;
    case(4): strcat(instructionPtr, "ADD"); break;
    case(3): strcat(instructionPtr, "RSB"); break;
    case(2): strcat(instructionPtr, "SUB"); break;
    case(1): strcat(instructionPtr, "EOR"); break;
    case(0): strcat(instructionPtr, "AND"); break;
    }

  PrintCCode(instr, instructionPtr);
  if (bits[20] && DP != 10 && DP != 11)
    strcat(instructionPtr, "S");

  if (DP != 11 && DP != 10)
    sprintf(instructionPtr + strlen(instructionPtr), "\tR%d, ", Rd);
  else
    strcat(instructionPtr, "\t");

  if (DP != 13 && DP != 15)
    sprintf(instructionPtr + strlen(instructionPtr), "R%d, ", Rn);

  if (bits[25])
    {
      if (!(bits[11] || bits[10] || bits[9] || bits[8]))
    sprintf(instructionPtr + strlen(instructionPtr), "#&%X", Op);
      else
    sprintf(instructionPtr + strlen(instructionPtr), "#&%X", Rotate(Op, Rot*2));
    }
  else
    {
      if (bits[4])
    Shift = (instr & 0x00000F00) >> 8;
      else
    Shift = (instr & 0x00000F80) >> 7;
      sprintf(instructionPtr + strlen(instructionPtr), "R%d", Rm);
      if (Shift > 0)
    {
      switch(Sh)
        {
        case(3): if(Shift == 0) strcat(instructionPtr, ", RRX"); else strcat(instructionPtr, ", ROR "); break;
        case(2): strcat(instructionPtr, ", ASR "); break;
        case(1): strcat(instructionPtr, ", LSR "); break;
        case(0): strcat(instructionPtr, ", LSL "); break;
        }
      sprintf(instructionPtr + strlen(instructionPtr), "#&%X", Shift);
    }
    }
}

void ProcessLDR(int *bits, unsigned int instr, char *instructionPtr)
{
    int sourceReg = (instr & 0x0000F000) >> 12;
    int baseReg = (instr & 0x000F0000) >> 16;
    int Rm = (instr & 0x0000000F);
    int immediate = (instr & 0x00000FFF);
    int Shift = (instr & 0x00000F80) >> 7;
    int Sh = (instr & 0x00000060) >> 5;

    if (bits[20])
      strcat(instructionPtr, "LDR");
    else
      strcat(instructionPtr, "STR");

    PrintCCode(instr, instructionPtr);
    if (bits[22])
      strcat(instructionPtr, "B");

    sprintf(instructionPtr + strlen(instructionPtr), "\tR%d", sourceReg);

    if (bits[24]) // Pre incremented
      {
        sprintf(instructionPtr + strlen(instructionPtr), ", [R%d", baseReg);
    if (bits[25])
      sprintf(instructionPtr + strlen(instructionPtr), ", R%d]", Rm);
    else
      {
        if (immediate > 0)
          sprintf(instructionPtr + strlen(instructionPtr), ", #%d]", immediate);
        else
          strcat(instructionPtr, "]");
      }
    if (bits[21])
      strcat(instructionPtr, "!");
      }
    else // Post incremented
      {
    if (bits[21])
      strcat(instructionPtr, "!");
        sprintf(instructionPtr + strlen(instructionPtr), ", [R%d]", baseReg);
    if (bits[25])
      {
        if(bits[23])
          sprintf(instructionPtr + strlen(instructionPtr), ", R%d", Rm);
        else
          sprintf(instructionPtr + strlen(instructionPtr), ", -R%x", Rm); 

        if (Shift > 0)
          {
        switch(Sh)
          {
          case(3): if(Shift == 0) strcat(instructionPtr, ", RRX"); else strcat(instructionPtr, ", ROR "); break;
          case(2): strcat(instructionPtr, ", ASR "); break;
          case(1): strcat(instructionPtr, ", LSR "); break;
          case(0): strcat(instructionPtr, ", LSL "); break;
          }
            sprintf(instructionPtr + strlen(instructionPtr), "#&%X", Shift*2); //DOUBLED..
          }
      }
    else
      {
        if (bits[23])
          sprintf(instructionPtr + strlen(instructionPtr), ", #&%x", immediate);
        else
          sprintf(instructionPtr + strlen(instructionPtr), ", #-&%x", immediate); 
      }
      }
}

void ProcessMUL (int *bits, unsigned int instr, char *instructionPtr)
{
  int Rd = (instr & 0x000F0000) >> 16;
  int Rm = instr & 0x0000000F;
  int Rs = (instr & 0x00000F00) >> 8;
  int Rn = (instr & 0x0000F000) >> 12;

  if (bits[21])
    strcat(instructionPtr, "MLA");
  else
    strcat(instructionPtr, "MUL");
  PrintCCode(instr, instructionPtr);
  if(bits[20])
    strcat(instructionPtr, "S");
  sprintf(instructionPtr + strlen(instructionPtr), "\tR%d, R%d, R%d", Rd, Rm, Rs);
  if(bits[21])
    printf(", R%d", Rn);
}

void ProcessLDM(int *bits, unsigned int instr, char *instructionPtr)
{
  char regList[256] = { 0 };
  int listState = 0;
  int Rn = (instr & 0x000F0000) >> 16;
  int i;

    if (bits[20])
      strcat(instructionPtr, "LDM");
    else
      strcat(instructionPtr, "STM");

    PrintCCode(instr, instructionPtr);

    sprintf(instructionPtr + strlen(instructionPtr), "\tR%d", Rn);
    if (bits[21])
      strcat(instructionPtr, "!");
    strcat(instructionPtr, ", ");
    strcat(regList, "{");
    for (i = 0; i<16; i++)
      {
    if (bits[i] && !bits[i+1])
      {
        sprintf(regList + strlen(regList), "R%d, ", i);
        listState = 0;
      }
    else if (bits[i] && bits[i+1] && !listState)
      {
        sprintf(regList + strlen(regList), "R%d-", i);
        listState = 1;
      }
      }
    strcat(regList, "\b\b}");
    strcat(instructionPtr, regList);
    if(bits[22])
      strcat(instructionPtr, "^");
} 
```

**精灵.h**

```
#ifndef DisARM_elf_h
#define DisARM_elf_h

typedef struct _elfHeader
{
    char magic[4];
    char class;
    char byteorder;
    char hversion;
    char pad[9];

    short filetype;
    short archtype;

    int fversion;
    int entry;
    int phdrpos;
    int shdrpos;
    int flags;

    short hdrsize;
    short phdrent;
    short phdrcnt;
    short shdrent;
    short shdrcnt;
    short strsec;

} ELFHEADER;

typedef struct _elfProgHeader
{
    int type;
    int offset;
    int virtaddr;
    int physaddr;
    int filesize;
    int memsize;
    int flags;
    int align;

} ELFPROGHDR;

#endif 
```

任何其他一般性的建设性批评和提示也非常受欢迎。

如果我需要添加其他信息来帮助确定问题，请告诉我。

# git - 如何在分支/标签上查找 git 提交编号以及如何按编号查找提交 ID？

> ID：14377430
> 
> 赞同：0
> 
> 时间：2013-01-17T10:52:01.330
> 
> 标签：git

如何找到分支上的提交总数？

（这在应用程序等上设置版本号时很有用）

* * *

如何反转该数字以找到提交 ID？

（当您需要调试版本号与提交号相同的应用程序时，这很有用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:52:01.330

查找分支或标签上的提交数（如果需要当前分支，请留空）：

```
$ git log <branch/tag/blank> --pretty=oneline | wc -l 
```

将输出例如

```
5164 
```

* * *

通过提交编号查找提交 ID（将 5614 替换为您的提交编号）

```
$ git log <branch/tag/blank> --pretty=oneline --reverse | sed -n 5614p 
```

将输出例如

```
e5c303d47afb7c3a98bc138049024d24924e6a9b Minor code fixes 
```

# javascript - 如何在 Selenium IDE 中创建自定义函数？

> ID：14377433
> 
> 赞同：6
> 
> 时间：2013-01-17T10:52:06.757
> 
> 标签：javascript, selenium-ide

[根据Selenium IDE HTML 测试中的 JavaScript 函数，](http://msquaredwebsvc.blogspot.ch/2007/10/javascript-functions-in-selenium-ide.html)这应该是可能的：

```
<tr>
    <td>storeEval</td>
    <td>function(input) {return input.replace('foo', 'bar');}</td>
    <td>replaceText</td>
</tr>
<tr>
    <td>storeEval</td>
    <td>replaceText('foo')</td>
    <td>var</td>
</tr> 
```

相反，我得到以下异常：

```
function statement requires a name 
```

给它一个名字后，语句运行：

```
<tr>
    <td>storeEval</td>
    <td>function replaceText(input) {return input.replace('foo', 'bar');}</td>
    <td>replaceText</td>
</tr> 
```

但是下一行找不到定义：

```
replaceText is not defined 
```

我也尝试过引用变量而不是函数：

```
<tr>
    <td>storeEval</td>
    <td>${replaceText}('foo')</td>
    <td>var</td>
</tr> 
```

但显然它仍然未定义：

```
null is not a function 
```

我还尝试制作一个[匿名函数](https://stackoverflow.com/questions/1140089/how-does-an-anonymous-function-in-javascript-work)：

```
<tr>
    <td>storeEval</td>
    <td>(function (input) {return input.replace('foo', 'bar')})</td>
    <td>replaceText</td>
</tr> 
```

并用括号运行它：

```
<tr>
    <td>storeEval</td>
    <td>(${replaceText})('foo')</td>
    <td>var</td>
</tr> 
```

错误：

```
missing ) in parenthetical 
```

并且没有：

```
<tr>
    <td>storeEval</td>
    <td>${replaceText}('foo')</td>
    <td>var</td>
</tr> 
```

错误：

```
missing ; before statement 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-04T08:12:41.310

你需要的是一个[自我执行的匿名函数](https://www.google.co.uk/search?q=self-executing+anonymous+function)：

```
<tr>
    <td>storeEval</td>
    <td>(function(input) {return input.replace(input, 'bar');})('foo')</td>
    <td>replaceText</td>
</tr> 
```

请注意，您也可以将变量用作参数：

```
<tr>
    <td>store</td>
    <td>'foo'</td>
    <td>searchText</td>
</tr>
<tr>
    <td>storeEval</td>
    <td>(function(input) {return input.replace(input, 'bar');})(${searchText})</td>
    <td>replaceText</td>
</tr> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-24T09:08:09.920

我在上面进行了测试，但出现错误“[error] Thew an exception: missing ) after argument list”所以，我将“${searchText}”更改为“storedVars['searchText']”，没关系:)

ps：JavaScript 可以与两种类型的 Selenese 参数一起使用：脚本和非脚本（通常是表达式）。在大多数情况下，您需要访问和/或操作 JavaScript 片段中用作 Selenese 参数的测试用例变量。在测试用例中创建的所有变量都存储在 JavaScript 关联数组中。关联数组具有字符串索引而不是顺序数字索引。包含测试用例变量的关联数组被命名为 storedVars。每当您希望访问或操作 JavaScript 片段中的变量时，您必须将其称为 storedVars['yourVariableName']。

[http://www.seleniumhq.org/docs/02_selenium_ide.jsp#store-commands-and-selenium-variables](http://www.seleniumhq.org/docs/02_selenium_ide.jsp#store-commands-and-selenium-variables)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-17T18:47:13.753

Katranci 的答案非常有用，但是一旦我添加了 for 循环，变量就会失去作用域。我最终在 window.eval() 中使用了 Katranci 的解决方案。

```
window.eval('(function() { var trs = document.querySelectorAll(".my-list table tbody tr"); for (var x in trs) { var trc = trs[x].childNodes; for (var y in trc) { var html = trc[y].innerHTML; if (typeof html != "undefined" && html.match(/Selenium Testing/)) { return trs[x].className.replace(" lastrow", "");     }   } } } )();'); 
```

在这种情况下，我创建了以“Selenium 测试”为前缀的测试条目，并使用此代码来识别后续测试用例的条目。这恰好是一个没有 jquery 的页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-29T12:47:09.867

可以定义一个函数并在其他地方重用它：

```
<tr>
    <td>storeEval</td>
    <td>(function(){return function(min,max){return Math.floor(Math.random()*(max-min)) + min;} })()</td>
    <td>randomIntInRange</td>
</tr>
<tr>
    <td>storeEval</td>
    <td>(function(){return storedVars['randomIntInRange'](10000,99999) +'-'+ storedVars['randomIntInRange'](1000,9999) })()</td>
    <td>randomZip</td>
</tr>
<tr>
    <td>echo</td>
    <td>${randomZip}</td>
    <td></td>
</tr>
...
[info] echo: 92105-3139 
```

这适用于 Selenium IDE 2.9.0

# opengl - OpenGL 渲染模式

> ID：14377434
> 
> 赞同：5
> 
> 时间：2013-01-17T10:52:09.907
> 
> 标签：opengl

到目前为止，我了解即时、显示列表、顶点缓冲区和顶点缓冲区对象渲染。哪个最快？每个都需要哪个 OpenGL 版本？我应该使用什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T11:05:18.527

现在最好的（也是几乎唯一的）渲染方法是使用通用缓冲区，AKA Vertex Buffer Objects。如果我是正确的，它们是 2.1 的核心，但通常作为**1.5**的扩展出现（如`ARB_vertex_buffer_object`）。它们有硬件支持，这意味着它们可以并且可能会直接存储在 GPU 内存中。

当您向它们加载数据时，您指定了建议的用法。您可以在[glBufferData](http://www.opengl.org/sdk/docs/man/xhtml/glBufferData.xml)手册中了解更多信息。例如，`GL_STATIC_DRAW`是非常类似于静态显示列表的东西。这使您的显卡可以优化对它们的访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T11:03:25.290

现代（阅读：非古代）硬件真的不喜欢立即模式。通过用顶点数组替换立即模式，我已经看到了将近 2 个数量级的性能改进。

OpenGL 3 及更高版本仅支持缓冲区对象，所有其他渲染模式均已弃用。

正确使用显示列表是一件很痛苦的事情，在非古代硬件上不值得。

总结一下：如果你使用 OpenGL 3+，你必须使用 (V)BOs。如果您以 OpenGL 2 为目标，请酌情使用顶点数组或 VBO。

# jquery - jQuery-UI 项目的自定义选择：可选

> ID：14377436
> 
> 赞同：0
> 
> 时间：2013-01-17T10:52:12.207
> 
> 标签：jquery, jquery-ui

我有一个主 div，里面有子 div：

```
<div id="selectable">
  <div class="item text"></div>
  <div class="item image"></div>
  <div class="item text"></div>
</div> 
```

当我添加 jQuery 时：

```
$('#selectable').selectable(); 
```

因此，里面的所有 div 都是可选的。

有没有办法删除具有“图像”类的 div 上的可选类？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:54:04.883

试试这个：

```
$( '#selectable > div:not(.image)' ).selectable (); 
```

此选择器将选择所有没有[该类](http://api.jquery.com/not-selector/)的子`div`项。`#selectable``image`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:58:11.057

如果您想要自定义选择，即来自 UI api 的语法

```
$( "#selectable" ).selectable({ filter: 'div:not(.image)' }); 
```

看看：http: [//jsfiddle.net/bBBER/8/](http://jsfiddle.net/bBBER/8/)

你可以更特别

```
$( "#selectable" ).selectable({ filter: 'div.item:not(.image)' }); 
```

[http://jsfiddle.net/bBBER/9/](http://jsfiddle.net/bBBER/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:56:19.103

使用`:not`选择器排除具有`image`类的元素

```
$('#selectable').children("div:not(.image)").selectable(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:56:58.477

您可以迭代每个元素，然后避免使用类图像。像 ：

```
$('#selectable').each(function(div) {
 if (!$(this).hasClass('image'))
   {
     $(this).selectable();
   }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T10:57:03.233

尝试以下

```
 $('div.image').removeClass('selectable'); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-17T10:56:20.287

我想不是因为父 div 是可选择的，因此包含的所有内容都会被固有地选择，因为它们是该 div 的子级。您可以简单地从可选择的 div 中取出一些元素？

# c# - 溢出检查不起作用

> ID：14377437
> 
> 赞同：2
> 
> 时间：2013-01-17T10:52:14.657
> 
> 标签：c#, .net

我有以下代码，将数字与 60000 相乘以将分钟转换为毫秒。我已经实现了溢出检查，如下所示。我仍然收到以下代码分析的警告。如何在不压制它的情况下克服这个警告？

> 警告：CA2233：更正“ApplicationSessionDAL.IsSessionExpired(short)”中操作“sessionExpiryValueInMinutes*60”中的潜在溢出

注意：[TimeSpan.TotalMilliseconds 属性](http://msdn.microsoft.com/en-us/library/system.timespan.totalmilliseconds.aspx)是`double`数据类型

**代码**

```
 public void IsSessionExpired(Int16 sessionExpiryValueInMinutes)
    {

        if (sessionExpiryValueInMinutes > (double.MaxValue) / 60000)
        {
            //Overflow check
            throw new ArgumentOutOfRangeException("sessionExpiryValueInMinutes");
        }
        else
        {
            //int milliSecondsValue  = sessionExpiryValueInMinutes * 60 * 1000;

            DateTime lastAccessTime = new DateTime(2013, 1, 1);
            TimeSpan elapsedTime = (DateTime.Now - lastAccessTime);
            if (elapsedTime.TotalMilliseconds > (sessionExpiryValueInMinutes * 60 * 1000))
            {
                bool isTimeExpired = true;
            }

        }

    } 
```

**参考**

1.  [为什么 FxCop 会在此 C# 代码中发出有关溢出 (CA2233) 的警告？](https://stackoverflow.com/questions/2642193/why-is-fxcop-warning-about-an-overflow-ca2233-in-this-c-sharp-code)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T11:00:17.240

您可以将计算包装在一个[`checked`](http://msdn.microsoft.com/en-us/library/ms182354.aspx)块中。这样，程序将显式抛出一个`System.OverflowException`你可以在这里捕获的东西来做你想做的事。而且由于您无论如何都想抛出异常，在您的特定情况下，您不需要做任何其他事情。

例子：

```
checked 
{
    if (elapsedTime.TotalMilliseconds > (sessionExpiryValueInMinutes * 60 * 1000))
    {
        bool isTimeExpired = true;
    }
} 
```

@Oded 是对的，FxCop 不可能总是那么聪明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:07:27.010

我不确定，但我怀疑这意味着 (sessionExpiryValueInMinutes * 60 * 1000) 的结果永远不会保留在 Int16 中。

我发现您的代码存在另一个问题：我几乎可以肯定 sessionExpiryValueInMinutes 作为 Int16，永远不会大于 (double.MaxValue)/60000。

# jasper-reports - 如何设置表 colspan？

> ID：14377442
> 
> 赞同：2
> 
> 时间：2013-01-17T10:52:30.547
> 
> 标签：jasper-reports, ireport

我的问题是，如何在*jrxml*文件中为*iReport*中的表页脚列设置***colspan值。***

 **我必须使用*iReport*轻松创建我的*PDF*设计。我通过*Tomcat从**PHP*发送字段和参数值。我不使用 Java 创建动态碧玉报告。

 *这意味着我必须从*jrxml*解决我的问题。

有可能做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-26T06:34:46.153

您不能这样做`colspan`，但您可以在 iReport 中对表格列进行分组（在表格页脚中选择多于 1 列）。然后删除页脚中各个列的单元格，并在页脚中为“组页眉”添加一个单元格。所有纯 iReport/JRXML。

![用于分组表页脚的 iReport 检查器](../Images/7dc4e02f9c0ce4c00709cd7ed1ab9328.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:21:55.360

xml的细节部分：

```
 <detail>
    <band height="43" splitType="Stretch">
        <textField>
            <reportElement x="0" y="0" width="344" height="20"/>
            <box>
                <bottomPen lineWidth="0.5"/>
            </box>
            <textElement verticalAlignment="Middle">
                <font isBold="true"/>
            </textElement>
            <textFieldExpression class="java.lang.String"><![CDATA[$F{data_title}]]></textFieldExpression>
        </textField>
        <componentElement>
            <reportElement key="table" x="0" y="20" width="802" height="20"/>
            <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                <datasetRun subDataset="details">
                    <datasetParameter name="credit">
                        <datasetParameterExpression><![CDATA[$F{credit}]]></datasetParameterExpression>
                    </datasetParameter>
                    <datasetParameter name="debit_gross_sum">
                        <datasetParameterExpression><![CDATA[$F{debit_gross_sum}]]></datasetParameterExpression>
                    </datasetParameter>
                    <datasetParameter name="debit_net_sum">
                        <datasetParameterExpression><![CDATA[$F{debit_net_sum}]]></datasetParameterExpression>
                    </datasetParameter>
                    <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRMapCollectionDataSource($F{details})]]></dataSourceExpression>
                </datasetRun>
                <jr:column width="12">
                    <jr:tableFooter height="15" rowSpan="1"/>
                    <jr:detailCell height="20" rowSpan="1"/>
                </jr:column>
                <jr:column width="48">
                    <jr:tableFooter height="15" rowSpan="1"/>
                    <jr:detailCell height="20" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="48" height="20"/>
                            <textElement>
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[$F{time}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
                <jr:column width="106">
                    <jr:tableFooter height="15" rowSpan="1"/>
                    <jr:detailCell height="20" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="106" height="20"/>
                            <textElement>
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[$F{description}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
                <jr:column width="130">
                    <jr:tableFooter height="15" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="130" height="15"/>
                            <box>
                                <bottomPen lineWidth="0.5"/>
                            </box>
                            <textElement>
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[""]]></textFieldExpression>
                        </textField>
                    </jr:tableFooter>
                    <jr:detailCell height="20" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="130" height="20"/>
                            <textElement>
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[$F{guest_name}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
                <jr:column width="48">
                    <jr:tableFooter height="15" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="48" height="15"/>
                            <box>
                                <bottomPen lineWidth="0.5"/>
                            </box>
                            <textElement>
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[""]]></textFieldExpression>
                        </textField>
                    </jr:tableFooter>
                    <jr:detailCell height="20" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="48" height="20"/>
                            <textElement>
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[$F{room}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
                <jr:column width="79">
                    <jr:tableFooter height="15" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="79" height="15"/>
                            <box>
                                <bottomPen lineWidth="0.5"/>
                            </box>
                            <textElement>
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[""]]></textFieldExpression>
                        </textField>
                    </jr:tableFooter>
                    <jr:detailCell height="20" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="79" height="20"/>
                            <textElement>
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[$F{cachier_user}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
                <jr:column width="77">
                    <jr:tableFooter height="15" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="77" height="15"/>
                            <box>
                                <bottomPen lineWidth="0.5"/>
                            </box>
                            <textElement>
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[""]]></textFieldExpression>
                        </textField>
                    </jr:tableFooter>
                    <jr:detailCell height="20" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="77" height="20"/>
                            <textElement>
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[$F{source_room}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
                <jr:column width="126">
                    <jr:tableFooter height="15" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="126" height="15"/>
                            <box>
                                <bottomPen lineWidth="0.5"/>
                            </box>
                            <textElement>
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[""]]></textFieldExpression>
                        </textField>
                    </jr:tableFooter>
                    <jr:detailCell height="20" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="126" height="20"/>
                            <textElement>
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[$F{source_guest_name}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
                <jr:column width="70">
                    <jr:tableFooter height="15" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="70" height="15"/>
                            <box rightPadding="0">
                                <topPen lineWidth="0.5"/>
                                <bottomPen lineWidth="0.5"/>
                            </box>
                            <textElement textAlignment="Right">
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[$P{debit_gross_sum}]]></textFieldExpression>
                        </textField>
                    </jr:tableFooter>
                    <jr:detailCell height="20" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="70" height="20"/>
                            <textElement textAlignment="Right">
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[$F{debit_gross}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
                <jr:column width="70">
                    <jr:tableFooter height="15" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="70" height="15"/>
                            <box rightPadding="0">
                                <topPen lineWidth="0.5"/>
                                <bottomPen lineWidth="0.5"/>
                            </box>
                            <textElement textAlignment="Right">
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[$P{debit_net_sum}]]></textFieldExpression>
                        </textField>
                    </jr:tableFooter>
                    <jr:detailCell height="20" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="70" height="20"/>
                            <textElement textAlignment="Right">
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[$F{debit_net}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
                <jr:column width="37">
                    <jr:tableFooter height="15" rowSpan="1">
                        <textField isBlankWhenNull="true">
                            <reportElement x="0" y="0" width="37" height="15"/>
                            <box>
                                <topPen lineWidth="0.5"/>
                                <bottomPen lineWidth="0.5"/>
                            </box>
                            <textElement textAlignment="Right" verticalAlignment="Top">
                                <font pdfEncoding="Cp1250"/>
                            </textElement>
                            <textFieldExpression class="java.lang.String"><![CDATA[$P{credit}]]></textFieldExpression>
                        </textField>
                    </jr:tableFooter>
                    <jr:detailCell height="20" rowSpan="1"/>
                </jr:column>
            </jr:table>
        </componentElement>
    </band>
</detail> 
```

我想从 tableFotter 3 关闭。单元格 4 单元格。

谢谢亚历克斯 K！***

# c# - 如何保存实体的更改历史记录

> ID：14377444
> 
> 赞同：1
> 
> 时间：2013-01-17T10:53:03.120
> 
> 标签：c#, database, entity-framework, database-design, entity-framework-5

我有一个`Task`具有各种导航属性的实体，包括一个`Comment`实体：

```
public Comment { 
  public int ID { get; set; }
  public string Title { get; set; }
  public string Description { get; set; }
  public DateTime CreateDate { get; set; }
  public DateTime LastEditedDate { get; set; }
  public virtual User User { get; set; }
} 
```

可以编辑评论，我想保留所有此类更改的历史记录。想想 Stackoverflow 允许您编辑问题/评论的方式，但保留更改历史记录。

保留历史意味着更多的复杂性，并且变得更难维护。我的选择：

*   为, ,等添加`public virtual ICollection<string> DescriptionHistory { get; set; }`, 和类似的属性。它很快就会失控。`Title``User``EditDate`

*   将 Title、Description 等属性保留为字符串，但将它们设为 CSV 字符串并将所有这些更改填充到更少的属性集中。这意味着更多的处理，但实体更简单。问题在于，将一个 CSV 片段与来自不同属性的相应片段相关联变得很棘手，例如，历史标题必须与其历史描述和日期相匹配。

*   两者都做，拥有当前的一组属性，以及另一组可空值，如`TitleHistory`,`DescriptionHistory`等，它们是旧版本的 CSV 字符串，因此只有在处理历史数据时才会变得复杂。

用户的存储也存在问题，除非我使用 CSV 的 ID 而不是实体。

解决这个问题的最佳方法是什么？有各种技术，例如 sprocs 和[“仅插入”表](https://stackoverflow.com/a/1324794/1711500)- 但我使用的是 Entity Framework 5，因此更喜欢利用我已经在使用的技术的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:15:49.917

我已经决定使用“仅插入”表。可惜用EF5不容易。

# php - Codeigniter 和 Google App Engine

> ID：14377445
> 
> 赞同：3
> 
> 时间：2013-01-17T10:53:06.937
> 
> 标签：php, google-app-engine, codeigniter

我已经使用[Codeigniter](http://ellislab.com/codeigniter)框架制作了我的整个网站，并且它运行良好，没有任何麻烦（注意我在网站中使用 MySQL）。

我现在被告知尝试将它放到 Google 服务器上，因为它们具有出色的可扩展性。我只有一个大问题，有什么方法或分步教程可以帮助我做到这一点，因为我已经阅读了 Quercus，它允许 php 运行，但我还没有找到解释如何使用 Codeigniter 框架的东西与栎属。
请任何帮助或朝着正确的方向推动将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-17T14:32:23.287

我们在 I/O 上宣布了对 Google App Engine 的原生 PHP 支持。

[https://developers.google.com/appengine/docs/php/](https://developers.google.com/appengine/docs/php/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-02T18:12:19.937

在 Google 宣布原生 PHP 支持后，我决定在 Google App Engine 上部署 CodeIgniter。它可以原生工作，必须对核心进行严格的某些扩展才能使用 PHP Runtime API。我已经开始写一系列文章，您可能想查看哪个文档并阐明本地部署 CodeIgniter 的过程。

[http://blog.programming4design.com/codeigniter-on-google-appengine-for-php/](http://blog.programming4design.com/codeigniter-on-google-appengine-for-php/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T16:37:34.243

PHP 正在原生添加到 App Engine，也许是今年，但我不确定什么时候。App Engine 团队上周在巴黎的合作伙伴活动中宣布了这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-20T19:53:01.877

CodeIgniter 在 Google App Engine 的 PHP 上运行良好。

工作演示：[http ://ci-on-gae.sasidhar.com/](http://ci-on-gae.sasidhar.com/)

整个上述演示站点的源文件位于 Github 中：[https ://github.com/sasidhar/codeigniter-gae-app](https://github.com/sasidhar/codeigniter-gae-app)

# c++ - 如何异步关闭套接字

> ID：14377447
> 
> 赞同：3
> 
> 时间：2013-01-17T10:53:11.170
> 
> 标签：c++, boost-asio

这是我的场景。单个线程在套接字上请求多个异步写入。同一个线程调用`io_service::run`. 所以我假设所有完成处理程序的执行顺序与启动相应的异步写入的顺序相同。在最后一个完成处理程序中关闭并关闭套接字是否可以？

编辑：我正在使用 TCP 协议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:59:23.717

您将希望`async_write()`从 first 的完成处理程序中调用`async_write()`。伪代码如下

```
boost::asio::io_service ios;
boost::asio::ip::tcp::socket socket( ios );

void
handler2()
{
    socket.shutdown( boost::asio::ip::tcp::socket::shutdown_both );
    socket.close();
}

void
handler1()
{
    async_write( socket, boost::bind(&handler2) );
}

int
main()
{
    async_write( socket, boost::bind(&handler1) );
} 
```

请注意，[文档](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/async_write/overload1.html)明确指出单个未完成的操作可以在进行中：

> 该操作是根据对流`async_write_some`函数的零次或多次调用来实现的，称为组合操作。程序必须确保流不执行其他写入操作（例如`async_write`，流的`async_write_some` 函数，或执行写入的任何其他组合操作），直到此操作完成。

`async_write()`这就是为什么在单个套接字上调用多个操作是一个坏主意的原因。或者，使用[分散操作](http://www.boost.org/doc/libs/release/doc/html/boost_asio/overview/core/buffers.html)将两个缓冲区发送到一个`async_write()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:12:22.000

我假设你有一个 TCP 套接字（因为 UDP 协议是无连接的）。

如果你做这样的事情：

```
start_async_write(first)
start_async_write(second) -> close socket on complete
io_service.run() 
```

一切都会好的，您的写入将被序列化，`run()`方法将`close`在完成处理程序调用套接字的方法后返回。

# c# - 如何在 ZedGraph 的 Y 轴和 X 轴上隐藏“0”标签？

> ID：14377448
> 
> 赞同：3
> 
> 时间：2013-01-17T10:53:12.573
> 
> 标签：c#, charts, drawing, zedgraph

这就是我所说的：

![图片](../Images/a0bf0f71c46b782127b3217bbfe38cfd.png)

有没有办法隐藏 Y 和 X 轴上的“0”标签？

我正在使用 ZedGraph。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T07:56:56.707

尝试在您的 zedGraphControl 中设置此选项：

```
zgcGraph.GraphPane.XAxis.Scale.IsSkipCrossLabel = true;
zgcGraph.GraphPane.YAxis.Scale.IsSkipCrossLabel = true; 
```

这应该负责您是否在“十字”处看到标签，在您的情况下 - “0”标签。确保在设置后刷新控件，有时 ZedGraph 对实际显示您设置的内容很挑剔。

（可选）要删除所有标签，请尝试

```
zgcGraph.GraphPane.XAxis.Scale.IsVisible = false;
zgcGraph.GraphPane.YAxis.Scale.IsVisible = false; 
```

# eclipse - eclipse 的 ATG 插件

> ID：14377456
> 
> 赞同：1
> 
> 时间：2013-01-17T10:53:29.710
> 
> 标签：eclipse, eclipse-plugin, atg

我在哪里可以找到 Eclipse 的 ATG 插件？

即使我试过这个[网址](http://atgeclipse.sourceforge.net/)

但是我无法在eclipse中安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T13:50:17.470

从 ATG 10 开始，该插件包含在 ATG 中，位于 Eclipse 文件夹 (./ATG10.1.2/Eclipse/ATGUpdateSite.jar) 中。将它加载到 Eclipse 中，你应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:15:58.010

[您可以在 ATG文档](http://docs.oracle.com/cd/E23095_01/Platform.93/ATGInstallGuide/html/s0108installingatgdevelopmenttoolsfor01.html)中找到有关 Eclipse 的 ATG 插件的信息。

您尝试安装的似乎是用于 ATG Dynamo，这是相当旧的服务器。

**编辑**

看来这个关于 Eclipse 插件的文档不再有效。

Oracle 提供了另一个 ATG 插件，它作为与 ATG **10.1.1的软件包一起提供，如此**[处](https://forums.oracle.com/forums/thread.jspa?messageID=10543653)所述（不可单独下载）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T16:08:50.750

它通常在安装本身中可用。我试过了，但使用起来不太舒服。不确定是否正在积极开发 eclipse 插件以支持最新版本的 eclipse。

# c# - 在代码中触发 WPF 设置器

> ID：14377459
> 
> 赞同：0
> 
> 时间：2013-01-17T10:53:38.883
> 
> 标签：c#, wpf

我正在尝试手动触发 c# 代码中的 setter 属性，但是我不确定这是否可能？

C＃;

```
// apply this setter to the control    
myControl.FindResource("StandardTextBoxStyle") as Style;
// how can I trigger ErrorTemplateSetter from here!? 
```

我的风格;

```
<Style TargetType="{x:Type TextBox}" x:Key="StandardTextBoxStyle">
    <Setter Property="VerticalAlignment" Value="Center" />
    <Setter Property="Validation.ErrorTemplate" x:Name="ErrorTemplateSetter">
        <Setter.Value>
            <ControlTemplate>
                <DockPanel LastChildFill="true">
                    <Border Background="OrangeRed" DockPanel.Dock="right" Margin="5,0,0,0" 
                            Width="20" Height="20" CornerRadius="5"
                            ToolTip="{Binding ElementName=customAdorner, 
                                      Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                        <TextBlock Text="!" VerticalAlignment="center" HorizontalAlignment="center" 
                               FontWeight="Bold" Foreground="white" />
                    </Border>
                    <AdornedElementPlaceholder Name="customAdorner" VerticalAlignment="Center" >
                        <Border BorderBrush="red" BorderThickness="1" />
                    </AdornedElementPlaceholder>
                </DockPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# image - 使用 ImageMagick 进行连接组件标记

> ID：14377463
> 
> 赞同：3
> 
> 时间：2013-01-17T10:53:44.167
> 
> 标签：image, image-processing, imagemagick, imagemagick-convert

是否可以使用 ImageMagick 对图像执行连接组件标记？

[维基百科中的连接组件标签](http://en.wikipedia.org/wiki/Connected-component_labeling)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-10T10:15:19.530

是的，现在可以使用 ImageMagick 6.8.9-10 及更高版本，请参阅[此处](http://www.imagemagick.org/script/connected-components.php)。

所以，如果我们从这张图片开始：

![在此处输入图像描述](../Images/c406f05badf95973252af49c137cb679.png)

我们可以得到标记的组件以及每个的边界框、质心和其他统计信息，`blob`或者`component`像这样：

```
convert input.png                                    \
    -colorspace gray -negate -threshold 10%          \
    -define connected-components:verbose=true        \
    -define connected-components:area-threshold=100  \
    -connected-components 8 -auto-level output.png

Objects (id: bounding-box centroid area mean-color):
  0: 600x600+0+0 296.9,299.6 260033 srgb(0,0,0)
  2: 467x345+70+211 350.1,398.1 53563 srgb(255,255,255)
  1: 422x105+56+81 266.5,133.0 34814 srgb(255,255,255)
  4: 105x90+112+310 164.0,354.5 9450 srgb(255,255,255)
  3: 178x73+393+246 481.5,282.0 2140 srgb(255,255,255) 
```

![在此处输入图像描述](../Images/d5d021ea0d9966ee415e6a0019a64fe2.png)

然后，您可以像这样在边界框中绘制：

```
convert output.png -fill none -stroke red \
  -draw "rectangle 70,211 537,556"        \
  -draw "rectangle 56,81 478,186"         \
  -draw "rectangle 112,310 217,400"       \
  -draw "rectangle 393,246 571,319"       \
  x.png 
```

![在此处输入图像描述](../Images/d7920a2400096846485e8dd7fd1f2d1a.png)

# java - 同时在android上使用两个音频设备

> ID：14377470
> 
> 赞同：0
> 
> 时间：2013-01-17T10:53:51.557
> 
> 标签：java, android, audio-streaming

是否可以同时使用内部音频设备（内部麦克风和扬声器）和外部音频设备（耳机）？我需要在这两个设备之间传输音频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:21:10.023

您需要更详细地准确指定您想要实现的目标。麦克风怎么进来在这里播放？

至于在内置扬声器和有线耳机（即普通的 3.5 毫米立体声插头）中同时播放流，这在大多数手机上应该是可以实现的。当您连接有线耳机时，这恰好是铃声播放的典型行为，因此使用`STREAM_RING` *应该*为您提供路由。

将一种声音发送到扬声器，将另一种声音发送到有线耳机则是另一回事。可以在某些平台上执行此操作（请参阅我对[同时使用耳机和扬声器的](https://stackoverflow.com/questions/14210696/simultaneously-using-a-headphone-and-speaker/14211450#14211450)回答），但就我而言，没有办法以保证在所有（甚至大多数）平台上工作的方式做到这一点意识到的。

# javascript - 条件语句。如何从数据工具中删除值？

> ID：14377472
> 
> 赞同：0
> 
> 时间：2013-01-17T10:54:00.307
> 
> 标签：javascript

HTML：

```
<a type="submit" onclick="javascript:yourFunctionName();" name"save-continue-to-review" data-toggle="modal" data-target="#dialog" href="" class="btn primary btn-primary" title="Go">Go 
```

JS：

```
function yourFunctionName(){
    var account_owner = document.getElementById(id_account_owner).value;
    var account_no    = document.getElementById(id_account_number).value;
    if(account_no == '' || account_owner == ''){

        alert('Alert!');

    }
} 
```

如果出现这种情况如何创建：

```
 if(account_no == '' || account_owner == ''){
       alert('Alert!');

 } 
```

`data-toggle="modal"`然后从我的删除`a type="submit"`或更改为不同的值（例如： data-toggle="x" ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:56:43.803

您可以使用`jquery`.

尝试这样的事情：

```
$(this).attr("data-toggle");//returns the value of data-toggle
$(this).attr("data-toggle","");//modifies the value of data-toggle to "" 
```

# regex - 带有否定的 Visual Studio 正则表达式不起作用

> ID：14377475
> 
> 赞同：0
> 
> 时间：2013-01-17T10:54:10.460
> 
> 标签：regex, visual-studio-2010, visual-studio, regex-negation

我正在尝试为 Visual Studio 搜索做一个正则表达式，它可以找到对某个不使用回调的某个类的方法的所有调用（该类是一个代理，我想找到同步调用）。

我想找到这种电话：

```
jc.GetStuff (data1, data2, data3); 
```

但不是这个：

```
jc.GetStuff (data1, data2, data3, GetStuffCallback); 
```

所以我正在尝试这个：

```
~(<jc>..*<(>.*<Callback>.*<)>)<jc>..*<(>.*<)> 
```

而且，不知道我是否应该逃避那些括号：

```
~(<jc>..*<\(>.*<Callback>.*<\)>)<jc>..*<\(>.*<\)> 
```

我不知道为什么这不起作用......我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:50:43.497

我不确定你的表达中所有的尖括号都是什么，但是像这样的东西怎么样？

```
jc\..+\((?!.*Callback.*).*\); 
```

```
jc                   literal string jc
\.                   full stop (escaped)
.*                   any character 1 or more times
\(                   opening bracket (escaped)
(?!.*Callback.*)     negative lookahead for callback
.*                   any character 0 or more times
\(                   closing bracket (escaped)
;                    literal string ; 
```

# recursion - Applescript - 递归函数中的堆栈溢出

> ID：14377477
> 
> 赞同：1
> 
> 时间：2013-01-17T10:54:21.867
> 
> 标签：recursion, applescript

我有一个 AppleScript 脚本，它运行一个计算插入插件实例的递归函数。在插入每个插件后，该函数会检查 CPU 并确定是否存在 CPU 过载。

如果发现 CPU 过载，它会开始删除插件，直到达到令人满意的程度。然后它返回计算机上加载的实例数。

问题是在一定数量的运行后我得到了堆栈溢出。AppleScript 是否有内部递归线程的限制？

```
on plugin_recurse(mode, plugin_name, component, track_count, instance_count, has_ref, min_instances, last_max)
    try
        log "mode - " & mode
        if mode is "ret" then return {track_count, instance_count, last_max}

        if mode is "add" then
            if (instance_count - (10 * track_count) = 0) then
                create_track(component)
                set track_count to track_count + 1
            end if
            set instance_count to instance_count + 1
            insert_plugin(plugin_name, component, track_count, instance_count)
            if has_ref then
                set CPUover to false
                if min_instances = 1 then
                    set mode to "ret"
                else
                    set min_instances to min_instances - 1
                end if
            else
                set {CPUover, last_max} to check_cpu(last_max)
            end if
            if CPUover then
                set mode to "sub"
            end if
        end if

        if mode is "sub" then
            if instance_count > 1 then
                remove_plugin(plugin_name, component, track_count, instance_count)
                set instance_count to instance_count - 1
                if ((10 * track_count) - instance_count = 10) then
                    remove_track(track_count)
                    set track_count to track_count - 1
                end if
                set {CPUover, last_max} to check_cpu(last_max)
                if not CPUover then
                    set mode to "ret"
                end if
            else
                set mode to "ret"
            end if
        end if
        plugin_recurse(mode, plugin_name, component, track_count, instance_count, has_ref, min_instances, last_max)
    on error err
        error err
    end try
end plugin_recurse 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:09:42.360

> 问题是在一定数量的运行后我得到了堆栈溢出。AppleScript 是否有内部递归线程的限制？

是的，AppleScript 仅限于许多边界。您的错误是由处理程序（函数）调用的深度限制引起的。在我的机器上，级别限制设置为 577。这种限制对于 OOP 语言来说很常见，因为运行代码的“虚拟机”需要它的限制。例如，Objective-C 在递归方面也有限制。如果你需要更多，你的代码被认为是糟糕的编码，你应该尝试使用正常的循环。但是，我不得不承认，与其他 OOP 的限制相比，577 并不是一个很高的数字。

对于这样的代码，不确定会有多少递归，通常使用循环比使用递归更好。

# graphviz - GraphViz 强制列

> ID：14377479
> 
> 赞同：4
> 
> 时间：2013-01-17T10:54:28.343
> 
> 标签：graphviz, subgraph

我有以下点：

```
digraph G
{
    rank="same";
    subgraph sys
    {
        1 [shape=record, label="| | Système"];
    }

    subgraph obj
    {
        2 [shape=box, label="Sites"];
        3 [shape=box, label="Sociétés de\nmaintenance"];
        1 -> 2 [arrowhead=none] [label="a"];
        1 -> 3 [arrowhead=none] [label="b"];
    }

    subgraph constraints
    {
        4 [style=dotted, label="Surveiller"];
        5 [style=dotted, label="Effectuer des\ninterventions"];
        4 -> 2 [style=dotted];
        4 -> 3 [style=dotted];
        5 -> 2 [style=dotted];
        5 -> 3 [style=dotted];
    }

} 
```

这给了我这张图片：

![在此处输入图像描述](../Images/af56fef7cffb106cf230c7466425a835.png)

但我想按列有一个子图（第一列是 1，第二列是 2-3，最后一列是 4-5）。

有没有办法做到这一点？

为了您的帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T14:27:22.303

```
digraph G
{
    rank=same
    rankdir=LR

    subgraph sys
    {
        1 [shape=record, label="| | Système"]
    }
    subgraph obj
    {
        node [shape=box]
        2 [label="Sites"]
        3 [label="Sociétés de\nmaintenance"]
    }
    subgraph constraints
    {
        node [style=dotted]
        4 [label="Surveiller"]
        5 [label="Effectuer des\ninterventions"]
    }

    edge [style=invis, weight=2]
    2->4
    3->5

    edge [style=dotted]
    4 -> 2
    4 -> 3
    5 -> 2
    5 -> 3

    edge [style="" arrowhead=none]
    1 -> 2 [label="a"]
    1 -> 3 [label="b"]
} 
```

这个解决方案与@alexandr_anturis (+1) 建议的相同，但我已经删除了一些不相关的“语法噪音”，因为我觉得像`dot`语言这样复杂而强大的规范可以从任何可用的简化中受益。

使用`rankdir`和隐藏适当的边缘`weight`。

结果图片：

[![在此处输入图像描述](../Images/84055a9ebe19de5676c1ce48d031dd46.png)](https://i.stack.imgur.com/6KI0A.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T13:29:43.293

```
digraph G
{
rank="same";
layout="dot";
rankdir=LR;
subgraph sys
{
    style=filled;
    1 [rank=1, shape=record, label="| | Système"];
}

subgraph obj
{
    2 [rank=2,shape=box, label="Sites"];
    3 [rank=3,shape=box, label="Sociétés de\nmaintenance"];
}
subgraph constraints
{
    4 [rank=4,style=dotted, label="Surveiller"];
    5 [rank=5,style=dotted, label="Effectuer des\ninterventions"];
}
    2->3->4->5 [color=white, weight=100];
    rankdir=LR;
    4 ->2 [style=dotted, w=0];
    4 -> 3 [style=dotted, w=0];
    5 -> 2 [style=dotted, w=0];
    5 -> 3 [style=dotted, w=0];

    1 -> 2 [arrowhead=none] [label="a"];
    1 -> 3 [arrowhead=none] [label="b"];
} 
```

你可以使用这样的东西。制作你想要的东西的方法是使用 rankdir 并添加不可见的边缘以进行正确的排名。

# javascript - 使用函数在 Orientdb 中返回 JSON

> ID：14377480
> 
> 赞同：1
> 
> 时间：2013-01-17T10:54:30.307
> 
> 标签：javascript, json, api, orientdb

我尝试使用 OrientDB Studio 中的函数执行此代码。

```
commandResult = db.executeCommand('insert into user (facebookId,instagramId) values ("' + facebookId +'","'+ instagramId +'");

if( commandResult.length == 0){
 response.send(200, "ok", "application/json","{\"success\":\"false\"}");
} else {
  response.send(200, "ok", "application/json","{\"success\":\"true\", \"@rid\" : \"" +  commandResult  + "\"}"); 
```

}

然后它像这样返回 `{"success":"true", "@rid" : "user#11:15{facebookId:df,instagramId:sdf} v1"}`

我现在的问题是我只想返回 rid 值。但问题出在我的第二把钥匙`"user#11:15{facebookId:df,instagramId:sdf} v1"`上。我不知道我将如何解析它，因为它`@rid`位于花括号的外面。

希望您的积极回应。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:33:15.127

你正在连接字符串。使用 .toJSON() 代替：

```
response.send(200, "ok", "application/json",
"{ \"success\":\"true\", \"@rid\" : \"" + 
 commandResult.toJSON()  + "\"}"); 
```

# android - 如何避免使用 AudioRecord 进行自动增益控制？

> ID：14377481
> 
> 赞同：16
> 
> 时间：2013-01-17T10:54:32.573
> 
> 标签：android, api, audio-recording

如何在`android.media.AudioRecord`没有任何依赖智能手机制造商的花哨信号处理（如自动增益控制 (AGC) 和/或均衡、噪声抑制、回声消除等）的情况下进行音频录制……仅使用纯麦克风信号？

### 背景

`MediaRecorder.AudioSource`提供九个常数，

*   `DEFAULT``MIC`最初在那里，
*   `VOICE_UPLINK`, `VOICE_DOWNLINK`, 并`VOICE_CALL`在 API 级别 4 中添加，
*   `CAMCORDER`并`VOICE_RECOGNITION`在 API 7 中添加，
*   `VOICE_COMMUNICATION`在 API 11 中添加，
*   `REMOTE_SUBMIX`在 API 19 中添加，但不适用于第三方应用程序。

但是它们中没有一个在所有智能手机上都做得很干净。相反，我必须自己找出似乎，哪个设备使用哪个信号处理块的组合用于哪个`MediaRecorder.AudioSource`常数。

`PURE_MIC`如果在 API 级别 20 中添加第十个常量，那就太好了。

但只要这不可用，我能做什么呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T14:11:50.783

简短的回答是“无”。

AudioSources 对应于各种逻辑音频输入设备，具体取决于您连接到手机的配件和当前用例，后者又对应于物理设备（主内置麦克风、辅助麦克风、有线耳机麦克风等）用不同的调音。

OEM 对物理设备和调谐的每个此类组合进行调整，以满足外部要求（例如 CTS、操作员要求等）和 OEM 自己设定的内部声学要求。此过程可能会导致在硬件编解码器或多媒体 DSP 级别的音频输入路径中引入各种滤波器（例如 AGC、噪声抑制、均衡等）。

虽然`PURE_MIC`源可能对某些应用程序有用，但它不是今天可用的东西。在许多设备上，您可以通过写入硬件编解码器的 ALSA 控件
来控制麦克风增益，甚至可能是滤波器链。`amixer`但是，这显然是一种非常特定于平台的方法，而且我还怀疑您必须以 root 或音频用户身份运行才能被允许执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-18T12:55:49.377

某些设备默认为声音输入通道添加 AGC 效果。因此，您需要获取对相应 AudioEffect 对象的引用并强制将其禁用。

首先，获取与 AudioRecord 音频会话关联的[AutomaticGainControl](http://developer.android.com/reference/android/media/audiofx/AutomaticGainControl.html)对象，然后将其设置为禁用：

```
if (AutomaticGainControl.isAvailable()) {
    AutomaticGainControl agc = AutomaticGainControl.create(
            myAudioRecord.getAudioSessionId()
        );
    agc.setEnabled(false);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-15T01:47:16.077

注意：大多数音频源（包括 DEFAULT）都对音频信号进行处理。要录制原始音频，请选择未处理。某些设备不支持未处理的输入。首先调用 AudioManager.getProperty("PROPERTY_SUPPORT_AUDIO_SOURCE_UNPROCESSED") 以验证它是否可用。如果不是，请尝试改用 VOICE_RECOGNITION，它不使用 AGC 或噪声抑制。即使该属性不受支持，您也可以将 UNPROCESSED 用作音频源，但不能保证在这种情况下信号是否会未被处理。

Android 文档链接[https://developer.android.com/guide/topics/media/mediarecorder.html#example](https://developer.android.com/guide/topics/media/mediarecorder.html#example)

```
 AudioManager audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    if(audioManager.getProperty(AudioManager.PROPERTY_SUPPORT_AUDIO_SOURCE_UNPROCESSED) !=null)
        mRecorder.setAudioSource(MediaRecorder.AudioSource.UNPROCESSED);
    else
        mRecorder.setAudioSource(MediaRecorder.AudioSource.VOICE_RECOGNITION); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-28T14:10:41.363

`MIC`应该没问题，其余的你需要知道它们是否受支持。

我为此开设了一个课程：

```
enum class AudioSource(val audioSourceValue: Int, val minApi: Int) {
    VOICE_CALL(MediaRecorder.AudioSource.VOICE_CALL, 4), DEFAULT(MediaRecorder.AudioSource.DEFAULT, 1), MIC(MediaRecorder.AudioSource.MIC, 1),
    VOICE_COMMUNICATION(MediaRecorder.AudioSource.VOICE_COMMUNICATION, 11), CAMCORDER(MediaRecorder.AudioSource.CAMCORDER, 7),
    VOICE_RECOGNITION(MediaRecorder.AudioSource.VOICE_RECOGNITION, 7),
    VOICE_UPLINK(MediaRecorder.AudioSource.VOICE_UPLINK, 4), VOICE_DOWNLINK(MediaRecorder.AudioSource.VOICE_DOWNLINK, 4),
    @TargetApi(Build.VERSION_CODES.KITKAT)
    REMOTE_SUBMIX(MediaRecorder.AudioSource.REMOTE_SUBMIX, 19),
    @TargetApi(Build.VERSION_CODES.N)
    UNPROCESSED(MediaRecorder.AudioSource.UNPROCESSED, 24);

    fun isSupported(context: Context): Boolean =
            when {
                Build.VERSION.SDK_INT < minApi -> false
                this != UNPROCESSED -> true
                else -> {
                    val audioManager: AudioManager = context.getSystemService(Context.AUDIO_SERVICE) as AudioManager
                    Build.VERSION.SDK_INT >= Build.VERSION_CODES.N && "true" == audioManager.getProperty(AudioManager.PROPERTY_SUPPORT_AUDIO_SOURCE_UNPROCESSED)
                }
            }

    companion object {
        fun getAllSupportedValues(context: Context): ArrayList<AudioSource> {
            val values = AudioSource.values()
            val result = ArrayList<AudioSource>(values.size)
            for (value in values)
                if (value.isSupported(context))
                    result.add(value)
            return result
        }
    }

} 
```

# apache - htaccess 允许域仅提供图像

> ID：14377483
> 
> 赞同：0
> 
> 时间：2013-01-17T10:54:35.217
> 
> 标签：apache, .htaccess, redirect, seo

对于我的生活，我无法解决这个问题。

我有一个主域，托管一个繁忙的网站。(domain1.com)

我有第二个域，它使用来自域#1 的内容。要链接第二个站点上的图像，我想使用 images.domain2.com。

images.domain2.com 已设置为 domain1.com 上的别名。

所以现在如果有人去 images.domain2.com 他们看到 domain1.com 内容，我不希望人们看到这个。（重复内容）。

不过，如果有人请求 images.domain2.com/images/image1.jpg，我希望它能够工作。

这有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:00:46.770

试试这个

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^images\.domain2\.com [NC] 

    RewriteCond %{REQUEST_FILENAME} !\.(gif|jpe?g|png|js|css|swf|php|ico|txt|pdf|xml)$
    RewriteRule ^(.*)$ domain2.com/$1 [L]
</IfModule> 
```

# android - 使用 Android 地图进行车辆跟踪

> ID：14377487
> 
> 赞同：2
> 
> 时间：2013-01-17T10:54:47.430
> 
> 标签：android, google-api, android-mapview, android-maps

我正在使用 Android 地图制作我的学期项目车辆跟踪。我正在寻求帮助。我通过短信从车辆接收位置，我想要的是在收到新短信时显示位置或更新地图。

我想问一下如何在一段时间后或收到新短信时更新地图。

例如 12.3245678 , 52.3333333 12.3245689 , 52.3333334 12.3245680 , 52.3333335 12.3245682 , 52.3333336

我知道`location.getlangitude()`和位置列表器，我认为它只使用 getlanitude() 和 getlantitude() 更新地图，用于 GPS 跟踪器和网络提供商。

但是如何手动设置 GeoPoint 并更新位置监听器。或将其视为如何在地图上更新我们在数据库中有位置数据，这也可能对我有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:33:27.263

```
public class SMSNotificationListener extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
    // Here you can extract the intent extra ( lat , longs )
    // Even you can check some message code to identify valid message
    // Can call some different MapDisplayActivity with lat , longs 
    // in Intent.putExtra(...)
    }

} 
```

在 AndroidManifest 中添加接收器 -

```
 <receiver android:name=".SMSNotificationListener">
   <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
 </receiver> 
```

现在在 MapDisplayActivity ---

```
@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_map);
  mapView = (MapView) findViewById(R.id.mapview);
  setMaptoProvidedLocation();
}

/**
 * Setting Google Map to provided location 
 */
 private void setMaptoProvidedLocation() {
  Intent intent = getIntent();
  LAT = intent.getIntExtra(DisplayActivity.LAT, DisplayActivity.DEF_LAT);
  LNG = intent.getIntExtra(DisplayActivity.LNG, DisplayActivity.DEF_LNG);

  mapView.setBuiltInZoomControls(true);
  mapView.setSatellite(true);
  mapController = mapView.getController();

  mapController.setZoom(ZOOM_LEVEL - ZOOM_LEVEL / 2);
  GeoPoint vehicleLocation = new GeoPoint(LAT, LNG);
  mapController.animateTo(vehicleLocation);
  // You can also add map overlays ...

}

 //If MapDisplayActivity is in forground and we want to update the new location

  @Override
  public void onNewIntent(Intent intent) {
  super.onNewIntent(intent);
  setIntent(intent);
  Log.d("MapActivity","Got new Data again");
  setMaptoProvidedLocation(false);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:14:18.817

好的，所以你在这里做了很多事情。

1.  要拦截 SMS 消息，您需要监听这些消息。请参阅：[Android – 监听传入的 SMS 消息](https://stackoverflow.com/questions/7089313/android-listen-for-incoming-sms-messages)

2.  要根据位置数据制作带有标记的地图，请使用 google maps api V.2。请参阅：[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/)这将告诉您有关使用位置数据标记制作地图的所有知识。

3.  如果您想以固定的时间间隔从数据库更新地图，我建议制作一个异步任务或计时器，以在所需的固定时间间隔检查数据库中的更新。

# c# - 搜索等于宽度 LINQ

> ID：14377490
> 
> 赞同：3
> 
> 时间：2013-01-17T10:55:01.003
> 
> 标签：c#, linq

我有一个通用的列表列表，试图确定每个列表中是否已经有五个相等的数字。如果在列表中找不到等于，则将列表添加到列表中此代码有效，但我喜欢了解有关 linq 的更多信息。

如何使用 LINQ 做到这一点。谢谢你

```
private void button2_Click(object sender, EventArgs e)
    {
        int n1 = (int)numericUpDown1.Value;
        int n2 = (int)numericUpDown2.Value;
        int n3 = (int)numericUpDown3.Value;
        int n4 = (int)numericUpDown4.Value;
        int n5 = (int)numericUpDown5.Value;
        int n6 = (int)numericUpDown6.Value;
        int n7 = (int)numericUpDown7.Value;
        int n8 = (int)numericUpDown8.Value;
        int n9 = (int)numericUpDown9.Value;
        int n10 = (int)numericUpDown10.Value;
        int n11 = (int)numericUpDown11.Value;
        int n12 = (int)numericUpDown12.Value;
            list = new List<int>();
            list.Add(n1);
            list.Add(n2);
            list.Add(n3);
            list.Add(n4);
            list.Add(n5);
            list.Add(n6);
            list.Add(n7);
            list.Add(n8);
            list.Add(n9);
            list.Add(n10);
            list.Add(n11);
            list.Add(n12);
            if (data.Count == 0)
                data.Add(list);
            else
            {
                int l = data.Count;
                bool eq =false;
                for (int i = 0; i < l; i++)
                {
                    int count = 0;
                    foreach (int n in list)
                    {
                        if (data[i].IndexOf(n) != -1)
                            ++count;
                        if (count == 5)
                        {
                            eq = true;
                            break;
                        }
                    }
                    if (eq == true)
                        break;
                }
                if (eq == false)
                    data.Add(list);
                else
                {
                    // do nothing
                }
            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:04:05.567

> 试图确定每个列表中是否已经有五个相等的数字。如果没有，则将它们添加到列表中

您可以组合[`Enumerable.Count`](http://msdn.microsoft.com/en-us/library/bb535181.aspx)和循环，例如：

```
int n1 = (int)numericUpDown1.Value;
foreach(List<int> list in data)
{
    int count = list.Count(i => i == n1);
    while(count++ < 5)
        list.Add(n1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:15:46.520

**[编辑] - 请参阅下面的 [更新]**

我相信您当前的代码应该如下所示：

```
...
int count = 0;
for (int i = 0; i < l; i++)
{
    //int count = 0;
    foreach (int n in list)
    {
... 
```

无论如何，要回答您的问题（如果我正确理解您想要实现的目标），您可以使用以下命令：

```
class Program
{
    static List<List<int>> data;
    static List<int> list;
    static void Main(string[] args)
    {
        data = new List<List<int>>();

        for (int i = 0; i < 6; i++)
        {
            list = new List<int>();
            list.Add(1);
            list.Add(2);
            list.Add(1);

            var result = data
                .Union(new[]{list})
                .SelectMany(j => j)
                .GroupBy(j => j)
                .Select(j => new { j.Key, j })
                .Where(j => j.j.Count() > 4);

            if (result.Count() == 0)
                data.Add(list);

        }
    }
} 
```

**[更新]**

好的，我想我理解了你想要实现的目标：如果其中没有其他列表与`data`至少有 5 个元素相同`list`，则`list`应该将 添加到 中`data`，即`List<List<int>>`.

```
var result = data.Any(i => i.Intersect(list).Count() > 4);
if(!result)
    data.Add(list); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:17:22.740

鉴于您发布的代码，我认为解决方案是：

```
List<int> list = new List<int>();
List<List<int>> data = new List<List<int>>();

if (data.All(l => l.Intersect(list).Count() < 5))
    data.Add(list); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T11:05:08.110

您可以使用`Intersect`和`Count`扩展方法。

就像是

```
var exist = false;
foreach (var existingList in data) {
  if (existingList.Intersect(list).Count() >=5) {
    exist = true;
    break;
}

if (!exist) data.Add(list); 
```

但是根据列表的大小，这将大大降低性能，因为“检查相交> = 5”将与列表的所有数据相交。

# android - 图像放大

> ID：14377492
> 
> 赞同：1
> 
> 时间：2013-01-17T10:55:09.943
> 
> 标签：android, wallpaper

我尝试使用此功能在我的设备中设置墙纸。

```
void setWallpaper() {
    DisplayMetrics metrics = new DisplayMetrics();
    ((Activity) context).getWindowManager().getDefaultDisplay()
            .getMetrics(metrics);

    int width = metrics.widthPixels;
    int height = metrics.heightPixels;
    String imagepath = Environment.getExternalStorageDirectory() + "/"
            + getImageName();
    FileInputStream is = null;
    try {
        is = new FileInputStream(new File(imagepath));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    BufferedInputStream bis = new BufferedInputStream(is);
    Bitmap bitmap = BitmapFactory.decodeStream(bis);
    Bitmap useThisBitmap = Bitmap.createScaledBitmap(bitmap, width, height,
            true);
    bitmap.recycle();
    if (imagepath != null) {
        System.out.println("Hi I am trying to set wallpaper");
        WallpaperManager wallpaperManager = WallpaperManager
                .getInstance(context);
        Drawable wallpaperDrawable = wallpaperManager.getDrawable();
        try {
            wallpaperManager.setBitmap(useThisBitmap);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

但我得到了更大的图像。即图像的某些部分超出了屏幕。如何更改此代码以使其正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T00:53:16.843

希望以下内容对您有所帮助：

```
public static Bitmap getZoomBitmap(int mMaxWidth, int mMaxHeight,
        InputStream in) {
    Bitmap bitmap = null;
    BitmapFactory.Options decodeOptions = new BitmapFactory.Options();
    // If we have to resize this image, first get the natural bounds.
    decodeOptions.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(in, null, decodeOptions);
    int actualWidth = decodeOptions.outWidth;
    int actualHeight = decodeOptions.outHeight;

    // Then compute the dimensions we would ideally like to decode to.
    int desiredWidth = getResizedDimension(mMaxWidth, mMaxHeight,
            actualWidth, actualHeight);

    int desiredHeight = getResizedDimension(mMaxHeight, mMaxWidth,
            actualHeight, actualWidth);

    // Decode to the nearest power of two scaling factor.
    decodeOptions.inJustDecodeBounds = false;
    // TODO(ficus): Do we need this or is it okay since API 8 doesn't
    // support it?
    // decodeOptions.inPreferQualityOverSpeed =
    // PREFER_QUALITY_OVER_SPEED;
    int sampleSize = findBestSampleSize(actualWidth, actualHeight,
            desiredWidth, desiredHeight);
    decodeOptions.inSampleSize = sampleSize;
    Bitmap tempBitmap = BitmapFactory.decodeStream(in, null, decodeOptions);
    // If necessary, scale down to the maximal acceptable size.
    if (tempBitmap != null
            && (tempBitmap.getWidth() > desiredWidth || tempBitmap
                    .getHeight() > desiredHeight)) {
        bitmap = Bitmap.createScaledBitmap(tempBitmap, desiredWidth,
                desiredHeight, true);
        tempBitmap.recycle();
    } else {
        bitmap = tempBitmap;
    }
    return bitmap;
}
    /**
 * Scales one side of a rectangle to fit aspect ratio.
 * 
 * @param maxPrimary
 *            Maximum size of the primary dimension (i.e. width for max
 *            width), or zero to maintain aspect ratio with secondary
 *            dimension
 * @param maxSecondary
 *            Maximum size of the secondary dimension, or zero to maintain
 *            aspect ratio with primary dimension
 * @param actualPrimary
 *            Actual size of the primary dimension
 * @param actualSecondary
 *            Actual size of the secondary dimension
 */
public static int getResizedDimension(int maxPrimary, int maxSecondary,
        int actualPrimary, int actualSecondary) {
    // If no dominant value at all, just return the actual.
    if (maxPrimary == 0 && maxSecondary == 0) {
        return actualPrimary;
    }

    // If primary is unspecified, scale primary to match secondary's scaling
    // ratio.
    if (maxPrimary == 0) {
        double ratio = (double) maxSecondary / (double) actualSecondary;
        return (int) (actualPrimary * ratio);
    }

    if (maxSecondary == 0) {
        return maxPrimary;
    }

    double ratio = (double) actualSecondary / (double) actualPrimary;
    int resized = maxPrimary;
    if (resized * ratio > maxSecondary) {
        resized = (int) (maxSecondary / ratio);
    }
    return resized;
}

/**
 * Returns the largest power-of-two divisor for use in downscaling a bitmap
 * that will not result in the scaling past the desired dimensions.
 * 
 * @param actualWidth
 *            Actual width of the bitmap
 * @param actualHeight
 *            Actual height of the bitmap
 * @param desiredWidth
 *            Desired width of the bitmap
 * @param desiredHeight
 *            Desired height of the bitmap
 */
public static int findBestSampleSize(int actualWidth, int actualHeight,
        int desiredWidth, int desiredHeight) {
    double wr = (double) actualWidth / desiredWidth;
    double hr = (double) actualHeight / desiredHeight;
    double ratio = Math.min(wr, hr);
    float n = 1.0f;
    while ((n * 2) <= ratio) {
        n *= 2;
    }

    return (int) n;
} 
```

# c# - WCF 服务可以返回 Zip 流吗？

> ID：14377495
> 
> 赞同：2
> 
> 时间：2013-01-17T10:55:15.690
> 
> 标签：c#, wcf, dotnetzip

我不得不在 XML 文件中存储一些非常大的字符串。现在我想使用 a 压缩字符串`GZipStream`，然后在客户端解压缩它们。 **WCF 服务方法可以返回 zip 流作为返回类型吗？**

有我的服务方法：

```
public Stream ZipResponse()
{
    byte[] byteArray = null;
    GZipStream compressionStream = null;
    try
    {
        var var_details = "XML String Here";
        byteArray = Encoding.UTF8.GetBytes(var_details);
        MemoryStream stream = new MemoryStream(byteArray);
        compressionStream = new GZipStream(stream, CompressionMode.Compress, true);
    }
    catch (Exception e)
    { }
    return compressionStream;
} 
```

现在，当我`ZipResponse()`从客户端调用方法时，它会抛出：
**mscorlib.dll 中发生“System.ServiceModel.CommunicationException”类型的未处理异常附加信息：接收对 XXX.XXX.XXX.XXX 的 HTTP 响应时发生错误。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:01:04.943

是的，WCF 服务方法可以将 Stream 返回给客户端。您应该确保您的传输模式设置为“流式传输”；除此之外，它应该是直截了当的。

您可以在此处获得更多信息：[WCF 流式处理教程](http://wcftutorial.net/Streaming.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:05:47.200

是的，看看这篇关于 7Zip(LZMA) WCF 消息压缩的文章[http://geekswithblogs.net/argot/archive/2009/10/27/wcf-message-compression---gzip-7zip.aspx](http://geekswithblogs.net/argot/archive/2009/10/27/wcf-message-compression---gzip-7zip.aspx)

# c++ - 对话框窗口中的 MFC 消息循环

> ID：14377497
> 
> 赞同：0
> 
> 时间：2013-01-17T10:55:28.653
> 
> 标签：c++, mfc, tray, message-loop

我创建了一个 MFC 对话框应用程序。

现在我想使用一个消息循环，但我找不到它。我读到 mfc 会为我创建它，但它会被隐藏。那么我该如何操作消息循环呢？

我需要消息循环从我为该应用程序创建的托盘图标中接收事件。

这样我就可以使用类似的东西：

```
long CALLBACK WndProc(HWND hWnd, UINT nMsg, UINT wParam, LONG lParam) 
{ 
   switch(nMsg) 
   { 
   case (WM_USER + 1): 
      { 
         switch(lParam) 
         { 
         case WM_RBUTTONUP: 
            { 
               /**/
            } 
         } 
         return 0; 
      } 

   default: 
      return DefWindowProc(hWnd, nMsg, wParam, lParam); 
   } 
} 
```

我仍然是 mfc 的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:30:32.237

通过 Shell_NotifyIcon 将图标安装到系统托盘后，该图标成为您对话 UI 的扩展。当用户与此图标交互时，UI 消息将由操作系统自动重定向到您的对话框。

要提供这些用户消息，您需要执行几个步骤：

(1) 在（.cpp）文件中添加消息处理程序定义（ON_MESSAGE(WM_TRAY_NOTIFY, OnTrayNotify)）。必须在 BEGIN_MESSAGE_MAP/END_MESSAGE_MAP 块内：

```
BEGIN_MESSAGE_MAP(CTestDlg, CDialog)
   //{{AFX_MSG_MAP(CTestDlg)
   ON_WM_PAINT()
   ON_WM_QUERYDRAGICON()
   ...
   //}}AFX_MSG_MAP
   ON_MESSAGE(WM_TRAY_NOTIFY, OnTrayNotify)
END_MESSAGE_MAP() 
```

(2) 在（.cpp）文件中添加消息处理程序实现，执行实际工作

```
void CTestDlg::OnTrayNotify(UINT nID, LPARAM lEvent)
{
    if (nID==TRAYICON_ID1)
    {   
        // handle messages here
        if (lEvent==WM_LBUTTONDBLCLK)
        {  // do left button double click, usually restore application
        }
        if (lEvent==WM_RBUTTONUP)
        {  // do right button up, usually popup a menu at clicked location
        }
    }
} 
```

(3) 在 (.h) 文件中添加此消息处理程序的原型定义 (afx_msg void OnTrayNotify(UINT nID, LPARAM lEvent);)。必须在 BEGIN_MESSAGE_MAP/END_MESSAGE_MAP 块内：

```
// Generated message map functions
//{{AFX_MSG(CTestDlg)
virtual BOOL OnInitDialog();
afx_msg void OnPaint();
afx_msg HCURSOR OnQueryDragIcon();
...
//}}AFX_MSG
afx_msg void OnTrayNotify(UINT nID, LPARAM lEvent);
DECLARE_MESSAGE_MAP() 
```

(4) 在 (.h) 文件中添加定义

```
#define WM_TRAY_NOTIFY WM_USER+567
#define TRAYICON_ID1 0x1234 
```

上面的代码假设：

*   对话框名称是 CTestDlg，将其更改为您的对话框名称
*   用于设置 Shell_NotifyIcon 的用户回调消息标识符 (uCallbackMessage) 是 WM_TRAY_NOTIFY
*   用于设置 Shell_NotifyIcon 的托盘图标 (uID) 的标识符是 TRAYICON_ID1

# android - TextView的android拖放导致异常

> ID：14377498
> 
> 赞同：5
> 
> 时间：2013-01-17T10:55:28.327
> 
> 标签：android

我正在尝试在 android 4+ 中使用内置的拖放功能。为此，我创建了我的自定义 TextView

```
public class DragSpotTextView extends TextView 
```

textview 拖动工作正常，但是当我在某个拖动点（这也是 textview）上拖动视图时，它给出的异常为；

```
01-17 16:16:29.178: E/AndroidRuntime(1193): FATAL EXCEPTION: main
01-17 16:16:29.178: E/AndroidRuntime(1193): java.lang.ClassCastException: java.lang.String cannot be cast to android.text.Spannable
01-17 16:16:29.178: E/AndroidRuntime(1193):     at android.widget.TextView.onDragEvent(TextView.java:11223)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at android.view.View.dispatchDragEvent(View.java:13465)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1104)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1104)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1104)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1104)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1104)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1104)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at android.view.ViewRootImpl.handleDragEvent(ViewRootImpl.java:3471)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2620)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at android.os.Looper.loop(Looper.java:137)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at java.lang.reflect.Method.invokeNative(Native Method)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at java.lang.reflect.Method.invoke(Method.java:511)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-17 16:16:29.178: E/AndroidRuntime(1193):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-18T23:04:05.740

对于需要它的人来说，这是另一种解决方案。当我将项目拖动到`TextView`处理拖动事件的地方时，我遇到了同样的问题。显然，导致问题的源代码行位于`TextView.onDragEvent()`（以下代码中的第三行）：

```
 case DragEvent.ACTION_DRAG_LOCATION:
     final int offset = getOffsetForPosition(event.getX(), event.getY());
     Selection.setSelection((Spannable)mText, offset);
     return true; 
```

对我来说，解决方法是为此消耗我的这种类型的`OnDragListener`事件`TextView`：

```
 if (dragEvent.getAction() == DragEvent.ACTION_DRAG_LOCATION) return true; 
```

这是 Android 中的一个错误，当然，这通常不应该发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T13:11:47.817

我有同样的问题。我通过创建自定义`TextView`并确保自己使用`DragEvent.ACTION_DRAG_LOCATION`事件并让父类处理其他 Drag 事件来修复它，如下所示：

```
public class CustomTextView extends TextView {

  @Override
  public boolean onDragEvent(DragEvent event) {
    if(event.getAction() == DragEvent.ACTION_DRAG_LOCATION) {
      return true;
    } else {
      return super.onDragEvent(event);
    }
  }

} 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T05:34:09.547

早些时候，我为 dragListener 使用匿名内联类。现在我改变了它并在类级别实现 OnDragListener。这样我就解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-18T01:59:25.923

我有同样的问题。我阅读[了这篇](https://code.google.com/p/android/issues/detail?id=27425)文章，然后尝试替换以下代码行：

```
ClipData data = ClipData.newPlainText("myLabel", "myString"); 
```

和：

```
ClipData data = ClipData.newPlainText("myLabel", ((TextView) v).getText()); 
```

显然在 onDragEvent 方法中，第二个参数被强制转换为 Spannable，在使用 String 时会抛出异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-21T04:27:42.460

对我来说，当我的拖动阴影（**不是**TextView）进入一个作为 TextView 的放置区**时**，应用程序崩溃了。

在这种情况下，我的解决方案是用 FrameLayout 包装 drop TextView （我愿意打赌任何 *Layout 都可以工作） - 在性能方面不是最优雅的解决方案，但也不是最差的:)

# java - 新的 java.io.IOException ：调用需要 API 级别 9

> ID：14377499
> 
> 赞同：0
> 
> 时间：2013-01-17T10:55:32.630
> 
> 标签：java, android, api, exception, android-2.2-froyo

首先，这是我的代码：

```
public static boolean loginValide(final String username, final String password) throws IOException {
    final boolean valide = false;
    final String postData = "somePostParameters";
    URL url;
    HttpsURLConnection connexion;

    url = new URL("someUrl");
    connexion = (HttpsURLConnection) url.openConnection();
    try {
        connexion.setDoOutput(true);

        final DataOutputStream dos = new DataOutputStream(connexion.getOutputStream());
        dos.writeBytes(postData);
        dos.flush();
        dos.close();

        final int responseCode = connexion.getResponseCode();
        if (responseCode == HttpURLConnection.HTTP_ACCEPTED) {
            // ...
        }
        else {
            // ...
        }
    } catch (final IOException e) {
        throw new IOException(e); /* I am retrowing an exception so the
        finally block is still called */
    }
    finally {
        connexion.disconnect(); // Close the connection
    }

    return valide;
} 
```

我的问题是我首先只是声明我的方法抛出一个**IOException**。但如果发生这种情况，我想**HttpsUrlConnection**不会断开连接。所以我想捕获**Exception**，重新抛出它，这样当我的方法被另一个类调用时，我可以处理网络/连接错误并告诉用户它，所以代码仍然会运行 finally 块来关闭连接。

首先，我说的对吗？还是有其他方法可以做到这一点？我不关心`try{} catch{}`方法内部，我只想确保连接和流将始终关闭，无论是否抛出异常。

另一个问题是`catch{}`我抛出异常的块。日食告诉我：

```
Call requires API level 9 (current min is 8): new java.io.IOException 
```

说真的，我不能使用低于 9 的 API 级别引发异常？我希望这是个玩笑...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T11:01:20.410

要`IOEXception`与 throwable 一起使用，您需要`min API 9`.. 检查

[http://developer.android.com/reference/java/io/IOException.html#IOException(java.lang.Throwable](http://developer.android.com/reference/java/io/IOException.html#IOException(java.lang.Throwable) )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:59:00.713

您可以在 Eclipse 中更改 MIN api 级别

如果你进入你的清单文件并设置

```
 <uses-sdk android:minSdkVersion="8" /> <!--in your case --> 
```

然后，您将整个项目从至少运行 2.2.X 更改为 2.3.X

在您仍在构建应用程序时，您可以随时更改最低 API 级别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T11:00:24.577

finally 块中的代码将始终被调用，即使 try 块中的代码抛出异常也是如此。至于 API 级别限制 - 这`IOException(Throwable)`是 API 级别 9 中添加的特定构造函数。

# vim - 使用 vimdiff 导航到下一个冲突

> ID：14377505
> 
> 赞同：47
> 
> 时间：2013-01-17T10:55:57.047
> 
> 标签：vim, vi, merge-conflict-resolution, vimdiff

在 vimdiff 中，您可以使用`[c`and`]c`转到上一个或下一个更改，但是在进行三向合并时，其中许多更改不会发生冲突。是否有进入下一个*冲突*的命令，而不是像万花筒那样的下一个变化？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-17T11:09:10.650

您的意思是诸如 , 和 on 合并之类的冲突标记`<<<<<<<`表示`=======`自动`>>>>>>>`解决失败？！

你可以使用我的[ConflictMotions 插件](http://www.vim.org/scripts/script.php?script_id=3991)；它提供`]x`和`[x`映射，`]=`用于在冲突中导航，甚至对应的文本对象`ax`和`a=`.

# php - Base64 编码来自电子邮件的名称

> ID：14377509
> 
> 赞同：1
> 
> 时间：2013-01-17T10:56:03.597
> 
> 标签：php

为什么 opencart[邮件类](https://github.com/opencart/opencart/blob/master/upload/system/library/mail.php)对发件人姓名进行编码？

```
$header .= 'From: ' . '=?UTF-8?B?' . base64_encode($this->sender) . '?=' . '<' . $this->from . '>' . $this->newline; 
```

这是一项古老的技术吗？我以前没见过这样的。

编码它有什么缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:36:50.997

引用自维基百科：

> 这是为了确保数据在传输过程中保持完整而不被修改。Base64 通常用于许多应用程序，包括通过 MIME 发送的电子邮件。 [Base64](http://en.wikipedia.org/wiki/Base64)
> 
> MIME 标准引入了字符集说明符和两种内容传输编码来实现非 ASCII 数据的传输：引用可打印用于大多数 7 位内容，其中有几个字符超出该范围，base64 用于任意二进制数据。 [内容编码](http://en.wikipedia.org/wiki/Email#Content_encoding)

# ios - UICollectionView 委托方法 cellForItemAtIndexPath:indexPath 未从 sizeForItemAtIndexPath 调用

> ID：14377516
> 
> 赞同：4
> 
> 时间：2013-01-17T10:56:24.053
> 
> 标签：ios, objective-c, cocoa-touch, ios6, uicollectionview

当我打电话

```
[collectionView cellForItemAtIndexPath:indexPath:] 
```

从内部

```
[collectionView:layout:sizeForItemAtIndexPath:] 
```

那么委托方法不会被触发。知道为什么不？

你可以[在这里](http://www.youtube.com/watch?v=6YtCp-d8ERQ&feature=youtu.be)看到它。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    CustomCell *cell = [self.collectionView dequeueReusableCellWithReuseIdentifier:@"CustomCell" forIndexPath:indexPath];

    [cell configureWithData:self.data[indexPath.row]];

    return cell;
}

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {

    CustomCell * cell = (CustomCell *)[collectionView cellForItemAtIndexPath:indexPath];

    return [cell preferredSize];
} 
```

我想要做的是询问单元格的首选大小。

我可以做

```
CustomCell * cell = (CustomCell *)[self collectionView:collectionView cellForItemAtIndexPath:indexPath]; 
```

但随后触发了一个永无止境的循环循环

为什么它的委托方法没有按应有的方式调用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T10:38:41.067

我最终得到了一个类方法而不是实例方法：

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {

    return [CustomCell preferredSizeWithData:self.data[indexPath.row]; 

} 
```

我为单元格创建了一个 Class 方法......对于这个方法，我提供了指定的实际实例`indexPath`将持有的数据并计算首选大小

我觉得

```
CustomCell * cell = (CustomCell *)[collectionView cellForItemAtIndexPath:indexPath]; 
```

内部触发

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath 
```

我们看到的是Apple的一些机制来防止循环循环......因为直接调用

```
CustomCell * cell = (CustomCell *)[self collectionView:collectionView cellForItemAtIndexPath:indexPath]; 
```

导致循环循环。

# php - 查找单词包含不重复的特定字母？

> ID：14377517
> 
> 赞同：3
> 
> 时间：2013-01-17T10:56:26.397
> 
> 标签：php, string

我有一个英语单词列表，我想找出哪些单词有特定的字母，并且这些字母只能使用一次。我正在使用 PHP。

因此，如果字母是“abcde”，那么单词应该是“cab”、“bed”……但不是“dad”。我目前的尝试是

```
if (preg_match("/([abcde]+)/i", $w))
    echo $w, "\r\n"; 
```

但这只是列出了所有包含这些字母“abcde”之一的单词。那么有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:03:49.823

识别每个 $word 是否仅包含 $letters 字符串中的字母，而不包含重复

```
$letters = 'abcde';

$words = array(
    'cab',
    'bed',
    'dad'
);

foreach($words as $word) {
    $valid = testWord($word, $letters);
    echo $word, ' => ', (($valid) ? 'Yes' : 'No'), PHP_EOL;
}

function testWord($word, $letters)
{
    $kChars = array_intersect(
        str_split($letters),
        str_split($word)
    );

    return count($kChars) == strlen($word);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:06:07.117

您可以尝试：

```
$letters     = str_split('abcde');
$wordLetters = str_split($w);

if ( count(array_intersect($letters, $wordLetters)) == count($wordLetters) ) {
  echo $w, "\r\n";
} 
```

# python - web.py 下载图片

> ID：14377521
> 
> 赞同：0
> 
> 时间：2013-01-17T10:56:30.780
> 
> 标签：python, http, web.py

我对 Web 应用程序相当陌生，我正在尝试编写一个 web.py 服务器来允许我下载图像。截至目前，我将其保持在最低限度，直到我能看到它是如何工作的。当我转到正确的 URL 时，我有这段代码会返回一个图像：

```
class download:

   def GET(self, args):
       path = 'path/to/image' 
       web.header('Content-type','images/jpeg')
       web.header('Content-transfer-encoding','binary') 
       return open(path, 'rb').read() 
```

因此，当我转到 URL 时，它会自动下载图像，但将其命名为“下载”并且没有扩展名。有没有办法指定下载时的文件名？这是否必须在某处的标题中指定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:17:16.980

你想要`content-disposition`标题：

```
'Content-Disposition: attachment; filename=my_filename.jpg' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:17:17.230

您需要设置`Content-Disposition`标题，例如：

```
web.header('Content-Disposition', 'attachment; filename="fname.ext"') 
```

参考：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1)

# installshield - InstallShield 安装到 SysWOW64 而不是 System32

> ID：14377522
> 
> 赞同：1
> 
> 时间：2013-01-17T10:56:34.207
> 
> 标签：installshield, windows-7-x64, installshield-2012

我正在创建一个 InstallShield 2012 Spring 项目，我需要将一些 jpg 复制到 System32 子文件夹中。
在应用程序数据/文件和文件夹中，我将其放入 [WindowsFolder]/System32/akrmf 并在安装时复制到 Windows 7 上
的 SysWOW64/akrmf 安装项目不包含任何 exe 或 dll，仅包含文本文件和图像。
我也尝试使用 [SystemFolder] 并复制到 SysWOW64 中。

有没有办法强制安装到 System32/akrmf 文件夹中？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:29:28.170

[要使用Windows Installer](http://helpnet.flexerasoftware.com/installshield19helplib/helplibrary/Targeting64Bit-MSI.htm)定位真正的（64 位）系统文件夹，您的 MSI 需要是 64 位包（请参阅[定位 64 位操作系统](http://helpnet.flexerasoftware.com/installshield19helplib/helplibrary/IHelp64BitSupport.htm)）。不幸的是，这会阻止它安装在 32 位系统上。

要使用[InstallScript](http://helpnet.flexerasoftware.com/installshield19helplib/helplibrary/Targeting64Bit-IS.htm)执行此操作，有一些相关方法不需要创建两个单独的包，但您可能会发现创建两个不同的组件最简单，其中只选择一个进行安装。

# jquery - WEB API MVC4 Jquery中的Post方法的一些问题

> ID：14377526
> 
> 赞同：1
> 
> 时间：2013-01-17T10:56:42.963
> 
> 标签：jquery, asp.net-mvc-3

我正在尝试在 web api mvc4 中发布数据，但它没有从我在 HTML 中的所有字段中获取值。它获取的唯一值是来自 ID。请参阅下面的代码并为我提供一些解决方案。

```
$("#pst").click(function AddProduct() {
    //jQuery.support.cors = true;
    var item = {
        ID: $("#prodId").val(),
        Name: $("#name").val(),
        Price: $("#price").val,
        Category: $("#category").val()

    };

    $.ajax({
        url: 'http://localhost:49503/api/Products',
        type: 'POST',
        data: JSON.stringify(item),
        ContentType: "application/json;charset=utf-8",
        success: function (data) {
            alert('added Successfully');
        },
        error: function (x, y, z) {

            alert('not added');
        }

    });

}); 
```

# gwt - uibinder gwt 方法调用

> ID：14377534
> 
> 赞同：1
> 
> 时间：2013-01-17T10:57:02.707
> 
> 标签：gwt, methods, widget, call, uibinder

我现在正在尝试习惯 GWT 和 UiBinder。但我无法解决这个问题。一个例子向你展示我的意思：

主菜单.ui.xml

```
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
xmlns:gwt="urn:import:com.google.gwt.user.client.ui" xmlns:my="urn:import:com.wn.webapp.client.UiBinder">

   <gwt:VerticalPanel>
     <my:TopMenu/>
     <gwt:VerticalPanel>
         <gwt:HTMLPanel>
             <gwt:TextBox/>
         </gwt:HTMLPanel>
         <my:ItemList/>
         <my:PageMenu/>
     </gwt:VerticalPanel>
   </gwt:VerticalPanel>
</ui:UiBinder 
```

我创建了一个 MainMenu 并将一些 ui.xml 文件嵌入其中。这工作正常。该网站看起来不错。

但是我该怎么做呢？这是我嵌入到 MainMenu.ui.xml 中的 PageMenu.ui.xml 文件的代码。

```
public class PageMenu extends Composite{

  private static PageMenuUiBinder uiBinder = GWT.create(PageMenuUiBinder.class);

  interface PageMenuUiBinder extends UiBinderWidget, PageMenu{}

  public PageMenu(){
      initWidget(uiBinder.createAndBindUi(this));
  }

  public void setButtonText(ArrayListString textIds){
       //doessomething
  }
} 
```

现在我想打电话给前任。onModuleLoad() 中的 setButtonText() 方法。

```
public void onModuleLoad()
{
    MainMenu mainmenu = new MainMenu();
    RootPanel.get().add(this.mainmenu);
    // call it here (setButtonText())
} 
```

我怎样才能做到这一点？

问候劳拉（我还不是一个经验丰富的程序员。所以当你尝试回答时请注意这一点：D）THX

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:23:30.800

要访问，`button.setText()`您必须有权访问第`button`一个。所以，你`PageMenu.ui.xml`必须有类似的东西：

```
<gwt:Button ui:field="button" /> 
```

并且您的 PageMenu.java 必须具有字段声明：

```
@UiField
Button button; 
```

为 PageMenu（在 MainMenu）和按钮（在 PageMenu）实现 getter，然后你可以这样做：

```
public void onModuleLoad()
{
    MainMenu mainmenu = new MainMenu();
    RootPanel.get().add(this.mainmenu);
    mainmenu.getPageMenu().getButton().setText("What you want.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:51:56.190

您必须创建 2 个访问器：

*   PageMenu.java 中的 getButton()

*   MainMenu.java 中的 getPageMenu()

你现在可以用

```
mainMenu.getPageMenu().getButton().setText("your text"); 
```

# spring - 从不同的服务器调用 RESTful 服务

> ID：14377537
> 
> 赞同：0
> 
> 时间：2013-01-17T10:57:16.677
> 
> 标签：spring, restful-url

大家好，我正在研究spring3.0 restful webservice。当我从同一服务器（即我的weblogic服务器）调用方法时，我能够调用我的方法。但是如果我想从另一台服务器使用\点击相同的方法（即我的 jboss 服务器）然后它没有达到我在 weblogic 服务器上的休息方法。

在下面的代码中，如果我在 weblogic jsp 页面中编写此代码并调用它，则返回正确的值，我可以在我的网页上显示相同的值。但是如果我将相同的代码复制到 JBOSS 服务器中的 jsp（我的不同项目访问我的休息服务）然后它没有达到我的方法。--------------------------------------

```
$.ajax({
    url: "http://test.abc.org:7001/SpringRestService/restful/products/ALL/ALL/ALL/ALL.json",
    type: "GET",
    processdata: true,
    dataType: "json",
    contentType: "application/json;",
    beforeSend: function () { },
    headers : 
    {
        "Content-Type"  : "application/json",
        "Accept" : "application/json",
        "Access-Control-Allow-Origin":"http://its-ims002.neahq.nearoot.org:7001/"
    },
    success: function (data) 
    {             
            bindEvent.loadGridData(data);
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) 
    {
        try 
        {
            alert(JSON.stringify(XMLHttpRequest) + "\n" + textStatus + "\n" + errorThrown);
        }
        catch (ex) { alert("Exception occured.. "); }
        finally { }
    }
}); 
```

下面是我保存在我的 weblogic 服务器中的 java 代码，我必须使用我的 ajax 调用从 jboss 服务器中访问它。

```
---------------------------------

@Controller
public class HelloWorldController1 {

@RequestMapping(value = "/products/{userName}/{year}/{status}/{stateId}", method = RequestMethod.GET,consumes="application/text")
    public ModelAndView getTextFromURL(@PathVariable("userName") String userName, @PathVariable("year") String year,
            @PathVariable("status") String status, @PathVariable("stateId") String stateId) {
        List<Abc> list= new ArrayList<Abc>();

        list= service.products(userName, year, status, stateId);

        ProductList productList = new ProductList (list);   

        ModelAndView mav = new ModelAndView();
        mav.setViewName("index1");
        mav.addObject("list", productList );

        return mav; 

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:35:18.747

即使您为其他（jboss）服务器指定了“Access-Control-Allow-Origin”，浏览器也可能不允许这样做，因为这违反了“同源策略”

如果您的服务返回 json，您可以通过使用诸如“dojo.io.script”之类的脚本实用程序轻松地做到这一点，因为 json 或 javascript 不受“同源策略”的影响。

如果它不是 json，那么如果适合您，除了“dojo.io.iframe”之外可能没有任何其他选项。希望这可以帮助 ...

编辑：我看到您的服务返回 JSON，您是否尝试过使用 dojo.io.script ？或您的 JS 框架具有的任何其他类似实用程序。

# php - 插入时出现 PHP MySQL 错误

> ID：14377541
> 
> 赞同：-1
> 
> 时间：2013-01-17T10:57:25.023
> 
> 标签：php, mysql, insert

我真的把头发拉出来了。我在我的自建 php 应用程序上有一个简单的评论部分，如果我捕获 $_GET 参数，我只想添加一个新行。但无论我如何构建 MySQL 插入请求，我都会收到错误消息。

这是我到目前为止所拥有的：

```
if(isset($_GET['r'])){
    $replyid = mysql_real_escape_string($_GET['r']);
    $sentnow = date("Y-m-d H:i:s");
    mysql_query("INSERT INTO eis_inbox (messageid, toid, from, contact, seen, message, date) VALUES (NULL, '".$replyid."', 'TESTUSER', 'CONTACTINFO', '0', 'MESSAGE', '".$sentnow."'") or die(mysql_error());
    echo '<meta http-equiv="refresh" content="0;/messages">';
} 
```

我的 MySQL 数据库字段的名称完全相同：messageid (auto_increment)、tid(int11)、from(varchar255)、contact(varchar255)、seen(int3)、message(text) 和 date(timestamp/CURRENT_TIMESTAMP)。

如我所见，使用“index.php?r=777”执行上述页面应该用新行填充我的 MySQL：

```
messageid = (AUTO_INCREMENT)
toid = 777
from = TESTUSER
contact = CONTACTINFO
seen = 0
message = MESSAGE
date = 2013-01-17 11:50:01 
```

相反，我收到以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'from, contact, seen, message, date) VALUES (NULL, '1', 'TESTUSER', 'CONTACTINFO'' at line 1 
```

与“error_reporting(E_ALL)”显示相同的错误。

我已经研究了好几天了，我就是找不到错误……也许我是盲人，错过了逗号或结束标签之类的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:59:47.583

它是因为您使用保留字（从和日期）作为列名。

用`包裹它们

IE：

```
INSERT INTO eis_inbox (`messageid`, `toid`, `from`, `contact`, `seen`, `message`, `date`) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T11:00:28.190

日期是 mysql 的关键字，您必须将其括在 ` 符号内。[这](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)是官方文档中 MySQL 保留字的完整列表，以供将来使用。

除此之外，值的括号没有关闭。

用这个。我希望这会正常工作。

```
INSERT INTO eis_inbox (`messageid`, `toid`, `from`, `contact`, `seen`, `message`, `date`) VALUES (NULL, '".$replyid."', 'TESTUSER', 'CONTACTINFO', '0', 'MESSAGE', '".$sentnow."')" 
```

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T11:01:13.970

你不能直接在mysql中使用保留字

from 是保留字

简短的例子

```
INSERT INTO eis_inbox (messageid, from) VALUES (1,2); 
```

-- 是错误的查询

```
INSERT INTO eis_inbox (messageid, `from`) VALUES (1,2); 
```

-- 是正确的查询

但更好的是避免这种情况。[这](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)是官方文档中 MySQL 保留字的完整列表，以供将来使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T11:01:26.557

这里有一些语法错误：

*   生成的查询末尾缺少括号。
*   `from`和`date`是保留关键字，将它们括在`.
*   `seen`and`toid`不是`varchar`字段，因此它们的值不应包含在`'`.

尝试 ：

```
mysql_query("INSERT INTO eis_inbox (messageid, toid, `from`, contact, seen, message, `date`)
VALUES (NULL, ".$replyid.", 'TESTUSER', 'CONTACTINFO', 0, 'MESSAGE', '".$sentnow."')"); 
```

警告：这很容易受到 SQL 注入的攻击。不要使用`mysql_*`命令，而是尝试[`PDO`](http://php.net/manual/fr/book.pdo.php)ou [`mysqli`](http://php.net/manual/fr/book.mysqli.php)。准备好的陈述将有助于避免它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T11:00:12.943

您缺少值的结束标记，并且 from 被保留，因此您应该对其进行转义...（在它周围使用引号应该可以解决问题，...：

```
mysql_query("INSERT INTO eis_inbox (messageid, toid, from, contact, seen, message, date) VALUES (NULL, '".$replyid."', 'TESTUSER', 'CONTACTINFO', '0', 'MESSAGE', '".$sentnow."'") or die(mysql_error()); 
```

应该

```
mysql_query("INSERT INTO eis_inbox (messageid, toid, 'from', contact, seen, message, date) VALUES (NULL, '".$replyid."', 'TESTUSER', 'CONTACTINFO', '0', 'MESSAGE', '".$sentnow."')") or die(mysql_error()); 
```

也正如 zan 提到的，不要使用 mysql_* 函数，但 mysqli_* 或 PDO ......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T11:02:43.007

你少了一个括号

```
mysql_query("INSERT INTO eis_inbox (messageid, toid, from, contact, seen, message, date) VALUES (NULL, '".$replyid."', 'TESTUSER', 'CONTACTINFO', '0', 'MESSAGE', '".$sentnow."')") or die(mysql_error()); 
```

# javascript - Js jQuery 错误？隐藏（）+滑动时无法检测元素

> ID：14377542
> 
> 赞同：0
> 
> 时间：2013-01-17T10:57:29.103
> 
> 标签：javascript, jquery, hover, hide

我有一个罕见的问题。可能是jQuery的一个错误，我不知道如何解决它。

当我使用下面的方法来悬停一个元素时，我正在监视元素的长度。

**问题**是使用**hide() + slide**时添加元素 'el' 的长度将返回**0**

 **```
hover(
  function() {
    if (!trigger.next('#id').length)    // if #id not exsist, add html
      el = trigger.after(html).next('#id') // el = new added html
    else
      el = trigger.next('#id')
    el.stop(true, true).show('slide', { direction, 'left' })  
  }, 
  function() { 
    el.hide('slide', { direction, 'left' }) 
}); 
```

如果我切换到另一种方法**hide()** <-just hide, **animate(), fadeOut()**，所有将返回**1**。

添加的 html 已存在。**但是，当 hide() + slide 时**，长度不会返回 ，

 **但**完成 hide() + slide 后**，将返回**1**；

请帮助解决这个问题。

**问题** *是**el.length**将返回 0 而 hide() + slide 即使 el 存在*

非常感谢您的建议。

我创建了一个示例，**请检查**。

> > [http://jsfiddle.net/fantill/DFd7e/6/](http://jsfiddle.net/fantill/DFd7e/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:21:48.323

您使用**jQuery beta 2.0**有什么原因吗？这本来是值得一提的。

您还使用了 jQuery UI，我怀疑它是否与 jQuery 2.0.0b1 兼容。

我刚刚将 jQuery 更改为 v1.9，它似乎可以正常工作，我还添加了括号和逗号。

这是更整洁的：

```
if( !$('#B').length ) 
{
   el = $(this).after('<div id="B" style="display:none; width:50px; height:50px; background-color:#09F; ">YYYYYYYYY</div>').next('#B');
} 
else 
{
    el = $('#B');
} 
```

这是更新的小提琴：http: [//jsfiddle.net/DFd7e/9/](http://jsfiddle.net/DFd7e/9/)

编辑：我启用了 jQuery UI，并将其替换`$(this).next('#B').first().length` 为 : `$('#B').length`。

`next()`在您的情况下不起作用，因为 jQuery UI 在您正在制作动画的 div 周围添加了一个包装器，如果您打开开发工具，您可以看到它。

更新小提琴：http: [//jsfiddle.net/DFd7e/11/](http://jsfiddle.net/DFd7e/11/)****

# javascript - chrome DateTime 控件的 AngularJS 数据绑定在更新 24.0.1312.52 后不起作用

> ID：14377546
> 
> 赞同：6
> 
> 时间：2013-01-17T10:57:57.720
> 
> 标签：javascript, google-chrome, angularjs

希望其他人也观察到这一点：-

我们使用 AngularJS 1.0 并使用 type="date" 和元素来获得 Chrome 的默认日期时间选择器。一切正常，直到 chrome 最近更新到 [24.0.1312.52]。现在，如果我使用日期时间选择器更改日期，AngularJS 数据绑定不会将其保存到 $scope 的绑定 json 属性。

如果我通过任何键盘键更改日期，数据绑定会将日期保存到属性绑定。

导致此问题的原因可能是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-30T08:25:43.660

我注意到了同样的行为，并注意到 Sutikshan 走在了正确的道路上。

HTML 5[输入日期](http://www.w3.org/TR/html-markup/input.date.html)要求值采用[RF 3339](http://www.w3.org/TR/html-markup/references.html#refsRFC3339)格式，因此，我们可以调整 AngularJS[输入指令](http://docs.angularjs.org/api/ng.directive%3ainput)以相应地格式化和解析值。

```
angular.module('myApp', []).directive('input', ['$filter',
function($filter) {
    return {
        require: '?ngModel',
        restrict: 'E',
        link: function(scope, element, attrs, ngModel) {
            if (!ngModel || attrs.type != "date") return;

            // Using AngularJS built in date filter, convert our date to RFC 3339
            ngModel.$formatters = [function(value) {
                return value && angular.isDate(value)
                    ? $filter('date')(value, 'yyyy-MM-dd')
                    : '';
            }];

            // Convert the string value to Date object.
            ngModel.$parsers = [function(value) {
                return value && angular.isString(value)
                    ? new Date(value)
                    : null;
            }];
        }
    };
}]); 
```

基础是我们确保[NgModelController](http://docs.angularjs.org/api/ng.directive%3angModel.NgModelController)在更新视图值和模型值时分别使用我们的 $formatters 和 $parsers。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T05:40:40.857

我们在 angularJS 谷歌组中得到了帮助：-

[https://groups.google.com/forum/?fromgroups=#!topic/angular/ycYzD3xRKS8](https://groups.google.com/forum/?fromgroups=#!topic/angular/ycYzD3xRKS8)

Peter Bacon Darwin 的 JSFeedle

[http://jsfiddle.net/ZsRxj/](http://jsfiddle.net/ZsRxj/)

```
var module = angular.module('demoApp',[]);

module.directive('input', function () {
  return {
    require: '?ngModel',
    restrict: 'E',
    link: function (scope, element, attrs, ngModel) {
      if ( attrs.type="date" && ngModel ) {
        element.bind('change', function () {
          scope.$apply(function() {
            ngModel.$setViewValue(element.val());
          });
        });
      }
    }
  };
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T01:29:58.370

`input`当您通过选择器选择日期时，Chrome 似乎不会触发。一个短期的hack是将`change`事件（Chrome*确实*触发）转发到`input`；幸运的是 AngularJS 不会在监听器中使用事件本身，因此您无需担心映射事件值或任何事情：

```
$('body').on('change', 'input[type="date"]', null, function(){
  $(this).trigger('input');
}); 
```

更好的解决方案是找出 Chrome 不触发的原因`input`。

*警告：虽然 AngularJS 代码中似乎没有任何地方会导致`change`触发（从而启动无限循环），并且粗略的测试暗示了上述工作，但“更好的解决方案”将是一个更好的解决方案。*

# java - 将文本区域保存到文件

> ID：14377549
> 
> 赞同：4
> 
> 时间：2013-01-17T10:58:13.703
> 
> 标签：java, file-io, textarea, save

是否可以将文本区域保存到文件中？

```
FileWriter fw = new FileWriter(file1.getAbsoluteFile(), true);
BufferedWriter bw = new BufferedWriter(fw);
bw.write(txtArea1); 
```

我得到：

> txtArea1 无法解析为变量。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T11:20:00.530

见[`JTextComponent.write(Writer)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#write%28java.io.Writer%29)。

> 将模型的内容存储到给定的流中。默认情况下，这会将模型存储为纯文本。

因此，您的示例可能类似于：

```
FileWriter fw = new FileWriter(file1.getAbsoluteFile(), true);
txtArea1.write(fw); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:59:39.570

你必须声明它：

```
JTextArea txtArea1 = new JTextArea(); 
```

然后，当你保存它时，保存`txtArea1.getText();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:19:38.720

我只看到很少的理由将纯文本 GUI 组件保存到文件中。如果只需要保存内容，最好保存可以通过`getText()`.

但是，您可能需要存储一些可以完成的设置`JTextArea`（标签大小等）。为此，我建议使用[XMLEncoder](http://docs.oracle.com/javase/1.4.2/docs/api/index.html)：

```
 XMLEncoder e = new XMLEncoder(
                      new BufferedOutputStream(
                          new FileOutputStream("save.xml")));
   e.writeObject(txtArea1));
   e.close(); 
```

这将保存所有非默认设置以及内容字符串。序列化也是可能的，但这种格式在不同虚拟机之间的可移植性较差。

# java - 测试 Web 服务时在 SOAP UI 中进行身份验证

> ID：14377550
> 
> 赞同：3
> 
> 时间：2013-01-17T10:58:16.900
> 
> 标签：java, web-services, soap, soapui

我正在使用 SOAP UI 来测试 Web 服务。在身份验证选项卡中，我输入了用户名和密码以及域名。

```
Sample:
WSDL URL: http://localhost:8080/soap/helloTest?wsdl

Username:hello
pass:helloworld
domain: http://mysysfullname:8080 
```

我已经给出了正确的凭据。我还将域替换为`http://localhost:8080`.

即使那样，我也只会获得无效的凭据。用户名和密码是正确的，它们不是我的 Windows 凭据。

有人可以帮助如何提供凭据。

```
Adding Raw Request
POST http://localhost:8080/soap/helloTest HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: text/xml;charset=UTF-8
SOAPAction: ""
User-Agent: Jakarta Commons-HttpClient/3.1
Host: localhost:8080
Content-Length: 1004 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:01:09.383

它还取决于**WSS-PasswordType**

也验证一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:56:58.553

尝试将 SOAP-UI 设置为使用**抢先**授权类型。

根据 SOAP-ui 文档：

*在不首先收到身份验证质询的情况下，随每个请求发送身份验证标头。这是一个潜在的安全隐患，但会提高性能，因为经过身份验证的端点只需要一个请求，而不是两个。*

# sql - 如何动态构建查询

> ID：14377556
> 
> 赞同：1
> 
> 时间：2013-01-17T10:58:44.990
> 
> 标签：sql, oracle, dynamic, plsql, plsqldeveloper

我正在创建这样的查询：

```
v_sql:=' SELECT abc FROM '||v_table||' 
         WHERE area IN ('''||v_area||''') 
           AND (
                ('''||p_supp_nbr||''' IS NULL) 
                OR 
                supplr_vn IN ('''||p_supp_nbr||''')
               ) 
```

现在，当`p_supp_nbr`它`NULL`不接受时。

我得到这样的：

`((''IS NULL) OR (supplr_vn =''))`

它在表中的检查空间

但我想让`((NULL IS NULL) OR (supplr_vn =NULL))`条件变得无效

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T11:11:50.330

不要那样做！您冒着 SQL 注入问题的风险。使用绑定变量：

```
v_sql:= 'SELECT abc FROM '||v_table||
        ' WHERE area = :v_area
           AND (
                :p_supp_nbr IS NULL
                OR 
                supplr_vn = :p_supp_nbr
               ) 
```

当然，既然您在生成动态 SQL 时就知道该值是否为 null，您可以改为执行以下操作：

```
v_sql:= 'SELECT abc FROM '||v_table||' 
         WHERE area = :v_area';
IF p_supp_nbr IS NULL THEN
    v_sql := v_sql || ' AND :p_supp_nbr IS NULL';
ELSE
    v_sql := v_sql || ' AND supplr_vn = :p_supp_nbr';
END IF; 
```

无论哪种方式，您都可以在运行时绑定值，如下所示：

```
OPEN my_refcursor FOR v_sql USING v_area, p_supp_nbr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:05:56.643

尝试这个：

```
v_sql:=' SELECT abc FROM '||v_table||'
WHERE area IN ('''||v_area||''') 
  AND (('''||p_supp_nbr||''' IS NULL) 
  OR supplr_vn IN ('''||NVL(p_supp_nbr, 'NULL')||''')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:26:40.097

通用 Oracle 示例：

```
DECLARE
  v_sql1        VARCHAR2(200);
  v_sql2        VARCHAR2(200);
  v_tab_name    VARCHAR2(200):= 'scott.emp';
  v_listCol     VARCHAR2(200):= 'job';
  v_list        VARCHAR2(200):= '''MANAGER'', ''CLERK''';
 --
  v_colName     VARCHAR2(200):= 'comm';
  v_comm        NUMBER:= 1400;
BEGIN
  v_sql1:= 'SELECT * FROM '|| v_tab_name ||' WHERE '||v_listCol ||' IN (:v)';
  v_sql2:= 'SELECT * FROM '|| v_tab_name ||' WHERE ('||v_colName ||' = :v OR '||v_colName ||' IS NULL)';
 --
  EXECUTE IMMEDIATE v_sql1 USING v_list;
    dbms_output.put_line(v_sql1);
 --
  EXECUTE IMMEDIATE v_sql2 USING v_comm;
  dbms_output.put_line(v_sql2);
END;
/ 
```

# java - 寻找在 Java / Maven 中应用 XML 补丁的工具

> ID：14377559
> 
> 赞同：2
> 
> 时间：2013-01-17T10:59:09.537
> 
> 标签：java, xml, maven-2

给定一组三个 XML 文件：

第一个.xml

```
<root>
    <item1>A</item1>
    <complexItem>
        <item2>B</item2>
        <item3>C</item2>
    </complexItem>
</root> 
```

补丁1.xml

```
<root>
     <item1>X</item1>
</root> 
```

补丁2.xml

```
<root>
     <complexItem>
         <item3>Y</item>
     </complexItem>
     <differentItem>Z</differentItem>
<root> 
```

我想以 XML 结尾：

补丁.xml

```
<root>
    <item1>X</item1>
    <complexItem>
        <item2>B</item2>
        <item3>Y</item2>
    </complexItem>
    <differentItem>Z</differentItem>
</root> 
```

所以补丁中的新元素是附加的，而补丁中的现有元素是破坏性的。这些添加和更新可以在文档树的任何级别进行。理想情况下，这将是一个 maven 插件，它可以将文件列表作为参数，尽管 Java 中的解决方案（即可用库 - 我试图避免重新发明似乎应该已经完成​​的东西！）很好因为我可以自己编写插件。每个文件（基础和补丁）将始终具有相同的根元素。

* * *

我应该补充一点，没有从树中删除元素的用例（我们的文件替换的分层性质导致这对于使用修补文件的应用程序来说是一个错误情况）。我做了更多的搜索来寻找一个预先构建的工具或库，但找不到任何合适的东西，所以接受了 Andrew 的建议，即使用 dom4j 从头开始​​构建一些东西。对 dom4j 很不熟悉，但这大致是我想出的（没有审查/错误处理/正确评论等）：

```
public void execute(){

    // Environment specific file loading removed

    SAXReader reader = new SAXReader();
Document patchedDocument = null;
for (InputStream is : loadedFiles) {
    Document d = null;
    try {
        d = reader.read(is);
    } catch (DocumentException e) {
        e.printStackTrace();
    }
    if (patchedDocument == null) {
        patchedDocument = d;
    } else {
        Element root = d.getRootElement();
        patch(patchedDocument, root);
    }
}

    // Environment specific file writing

}

private void patch(Document patchedDocument, Element element) {

    for (Iterator i = element.elementIterator(); i.hasNext();) {
        Element nextElement = (Element) i.next();
        if (nextElement.isTextOnly()) {
            String path = nextElement.getUniquePath();
            Node n = patchedDocument.selectSingleNode(path);
            if (n != null)
            {
                                // This already exists and needs content replacing    
                n.setText(nextElement.getText());
            }else{
                                // This doesn't exist and needs to be added to the tree
                addElement(patchedDocument, nextElement);
            }
        } else {
            patch(patchedDocument, nextElement);
        }
    }
}

private Node addElement(Document patchedDocument, Element element)
{
    Element parent = element.getParent();
    String parentPath = parent.getPath();
    Node n = patchedDocument.selectSingleNode(parentPath);
    if (n == null){
        return addElement(patchedDocument, parent);
    } else {
        ((Branch)n).add(element.detach());
        return n;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:09:44.170

如果文件足够小以适合内存，我会编写一些 Java 代码将它们全部放入单独的 DOM 中，然后根据您描述的附加/破坏性逻辑将它们合并到一个 DOM 中，然后将合并的 DOM 吐回输出到目标文件中。有几个 Java 库可用于读取和写入 XML 文件，例如 dom4j。您不希望自己尝试解析或构造 XML 时弄得一团糟。

# c# - 防止在没有 jQuery 的情况下在 ASP.NET 中单击多个提交按钮

> ID：14377560
> 
> 赞同：1
> 
> 时间：2013-01-17T10:59:22.657
> 
> 标签：c#, asp.net

当用户多次单击链接按钮但不想使用 jQuery 时，我试图防止多次提交。理想情况下，我想在后面的代码中做到这一点。

我当前的解决方案基于[此代码项目文章](http://www.codeproject.com/Tips/107373/Stopping-the-multiple-postbacks-of-ASP-NET-linkbut)

目前我有这个：

```
 private const string _disableButtonScript = "return disableButton(this.id);";

    /// <summary>
    /// Prevents a button being clicked multiple times on the client
    /// </summary>
    /// <param name="currentPage">The page the button resides on</param>
    /// <param name="button">The button to prevent the multiple clicks on</param>
    public void PreventMultipleClientClickPostbacks(Page currentPage, LinkButton button)
    {
        if (currentPage.IsPostBack || currentPage.IsCallback)
        {
            // Already added script
            return;
        }

        AddDisableScriptToPageHeader(currentPage, button);

        string currentOnClick = string.Empty;

        // If onclick already exist we need to append to it
        if (button.Attributes["onclick"] != null)
        {
            currentOnClick = button.Attributes["onclick"];

            // Remove current onclick
            button.Attributes.Remove("onclick");

            if (!currentOnClick.EndsWith(";"))
            {
                // add semi colon suffix
                currentOnClick = currentOnClick + ";";
            }
        }

        // add client onclick handler
        button.Attributes.Add("onclick", string.Format("{0}{1}", currentOnClick, _disableButtonScript));
    }

    /// <summary>
    /// Adds the javascript disable function to the page header
    /// </summary>
    /// <param name="currentPage">The page to add the header script to</param>
    /// <param name="button">The button to add the script to</param>
    private static void AddDisableScriptToPageHeader(Page currentPage, Control button)
    {
        // Generate disable script
        StringBuilder scriptLinkHtml = new StringBuilder();
        scriptLinkHtml.AppendLine("<script type=\"text/javascript\">");
        scriptLinkHtml.AppendLine("//<![CDATA[");
        scriptLinkHtml.AppendLine("var callCount = 0;");
        scriptLinkHtml.AppendLine("function disableButton(btnId) {");
        scriptLinkHtml.AppendLine("var ret = true;");
        scriptLinkHtml.AppendLine("var ele = document.getElementById(btnId);");
        scriptLinkHtml.AppendLine("if (ele != null && !ele.disabled)");
        scriptLinkHtml.AppendLine("ret = true;");
        scriptLinkHtml.AppendLine("else");
        scriptLinkHtml.AppendLine("ret = false;");
        scriptLinkHtml.AppendLine("if (ele != null)");
        scriptLinkHtml.AppendLine("ele.disabled = true;");
        scriptLinkHtml.AppendLine("return ret;");
        scriptLinkHtml.AppendLine("}");
        scriptLinkHtml.AppendLine("//]]>");
        scriptLinkHtml.AppendLine("</script>");

        // Add script link to page header
        LiteralControl scriptLink = new LiteralControl(scriptLinkHtml.ToString());
        scriptLink.ID = "disableButtonScript";
        currentPage.Header.Controls.Add(scriptLink);
    } 
```

这在客户端上呈现如下：

```
 <script type="text/javascript"> 
function disableButton(btnId) {
var ret = true;
var ele = document.getElementById(btnId);
if (ele != null && !ele.disabled)
ret = true;
else
ret = false;
if (ele != null)
ele.disabled = true;
return ret;
}
</script>

<a onclick="javascript:return disableButton(this.id);" id="cntMain_btnSubmit" class="but-yellow frcr" href="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$cntMain$btnSubmit&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, true))">Add Note</a> 
```

这在 FireFox 和 Chrome 中运行良好。但是它只禁用了 IE 中的按钮，根本没有提交。

为了让提交在 IE 中工作，我必须添加

```
currentPage.ClientScript.GetPostBackEventReference(new PostBackOptions(button)) 
```

进入 javascript，使其在 IE 中按需要工作，但现在在 Firefox 和 Chrome 中每次点击时都会提交。

任何人都可以提出解决方案或替代方案吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-17T11:44:44.203

我会尝试使用应该像这样工作的布尔标志：

```
private bool _clicked;

protected void Page_Load(object sender, EventArgs e) {

      _clicked = false;
}

protected void Button_Click(object sender, EventArgs e) {
if(!_clicked){
_clicked = true;
} 
```

# debugging - 如何将 NetBeans 调试器与 JRebel 一起使用

> ID：14377561
> 
> 赞同：1
> 
> 时间：2013-01-17T10:59:22.133
> 
> 标签：debugging, netbeans, jrebel

我最近为 NetBeans 安装了 JRebel 插件，并在 IDE 中调试时注意到以下问题：

如果我在一个类中设置断点并在之后更改代码，那么我的调试器并不总是命中断点。我找到了一种解决方法：重新加载类后重置断点（或将调试器重新附加到项目）。

但是这个解决方案并不完美，因为当应用程序第一次需要它时会重新加载类（调试器还不能工作）所以我必须做一些我想调试两次的操作，这可能会导致很多问题。另一件事是我根本无法解释..即使我成功击中断点，我也无法在另一个班级中击中另一个。

也许有人已经解决了这个问题 - ？有没有办法在保存时重新加载更改的类？

带有 JRebel 插件的 NetBeans 7.2.1，Glassfish 3.1.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:38:01.520

这是一个已知的问题。解决方案存在但尚未发布。

另外，请检查选项->Java->Java 调试器。是否启用了“保存后应用代码更改”复选框？如果没有，您能否启用它并尝试使用此配置 - 会有什么不同吗？

# openerp - 在新选项卡中打开 OpenERP 中的给定 url

> ID：14377568
> 
> 赞同：3
> 
> 时间：2013-01-17T10:59:36.487
> 
> 标签：openerp

如何在新选项卡上打开**url**链接，而不是在单击按钮时在 OpenERP 中弹出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:15:41.680

在 V7 中，按住 ctrl 单击大多数链接可以正常工作（即在新选项卡中打开链接）。

在 6.1 中，您必须通过按住 Ctrl 键单击 OpenERP 徽标（在左上角）来创建一个新选项卡，这会打开一个带有默认屏幕的新选项卡，然后从那里导航到您需要的页面（我知道这很乏味。 ..)。你也可以试试这个插件：[https](https://code.launchpad.net/~h-jaroslav/+junk/web_tabs) ://code.launchpad.net/~h-jaroslav/+junk/web_tabs ，它会在 Web 客户端选项卡内的选项卡中打开链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:10:07.417

首先，您从浏览器首选项中标记了以下选项

*   “在新选项卡中打开新窗口”和
*   “当我在新选项卡中打开链接时，立即切换到”

其次，您只需将鼠标悬停在 openerp 中的链接上，然后按滚动键。该页面将在新选项卡中打开/显示

# google-maps - Google Maps Api：将地图中心设置为像素偏移量？

> ID：14377572
> 
> 赞同：13
> 
> 时间：2013-01-17T10:59:43.160
> 
> 标签：google-maps, google-maps-api-3

这可能是个奇怪的问题……</p>

我正在使用 google maps api 在我的网页上嵌入自定义地图。我将`lon/lat`坐标传递给一个函数，并绘制了一张地图，该点在中间“居中”。（我的地图框高 300 像素，所以标记大约为 150 像素）

由于我也在使用自定义`infoWindows/Boxes`，我想将地图的中心向下移动一点。

我知道我可以在坐标中设置一个单独的中心，`lon/lat`但这不是我想要的。这将要求每张地图都传递标记的坐标和我想要的中心坐标。

我希望它更简单。

是否可以将地图的中心向下移动几个像素？

喜欢`center: +30px,`:)

```
var latlng = new google.maps.LatLng(ll[0], ll[1]); // latitude and longitude
    var options = {
    zoom: zoom,
    //center: c,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: false,
    disableDefaultUI: true,
    scrollwheel: scroll,
    streetViewControl: false,
    navigationControlOptions: {  
        style: google.maps.NavigationControlStyle.SMALL 
    }
} 
```

知道我该怎么做吗？任何其他技巧或想法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-17T12:00:53.047

调用地图的 panBy 方法

```
mapObject.panBy(0,30) 
```

# mysql - 创建跨不同数据库的视图？

> ID：14377580
> 
> 赞同：0
> 
> 时间：2013-01-17T11:00:05.867
> 
> 标签：mysql

如果我有数据库test1和数据库test2，数据库test1下的表employee1和数据库test2下的表employee2，是否可以在MySQL中创建数据库test1下的employee2视图。如果是这样，你能告诉我语法吗？

两个数据库都在同一台机器上。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:11:15.183

我认为你可以这样做：

```
CREATE VIEW `test1`.`new_employee` AS SELECT * FROM `test2`.`employee2 `; 
```

认为它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:04:51.550

数据库是指数据库服务器（因此它们是 mysql 的不同实例），或者只是同一服务器上的两个数据库？

对于后者，只需在查询中使用表名：

```
CREATE VIEW db1.x AS SELECT * FROM db2.y  ... 
```

# tsql - 当 NULL 锚在 NOT NULL 字段上重复出现时，如何解决 CTE 中的类型不匹配

> ID：14377585
> 
> 赞同：3
> 
> 时间：2013-01-17T11:00:11.137
> 
> 标签：tsql, common-table-expression

在最终将提供 SSRS RDL 文档的 SQL 脚本中，我试图利用 CTE 递归地获取我的数据。

实际的 SQL 代码太大，无法在此处复制粘贴，但我做了这个简短的复制：

```
declare @temp table
(
id uniqueidentifier not null default(newid()),
name varchar(100) not null default('new'),
value varchar(100) not null default('newValue'),
parentid uniqueidentifier null
)

insert into @temp (id, name, value, parentid) values ('12312312-1234-1234-1234-123412341234', 'o1', 'val1', null)
insert into @temp (id, name, value, parentid) values ('12312312-1234-1234-1234-123412341235', 'o2', 'val2', '12312312-1234-1234-1234-123412341234')
insert into @temp (id, name, value, parentid) values ('12312312-1234-1234-1234-123412341236', 'o3', 'val3', '12312312-1234-1234-1234-123412341234')

;with
    cte(id,name, value, pid, pname, pvalue) as (
        select id, name, value, null, null, null from @temp where parentid is null
        union all
        select r.id, r.name, r.value, a.id, a.name, a.value 
        from @temp r inner join cte a
        on a.id = r.parentid
    )
    select * from cte 
```

像这样的 CTE 错误（在 SSMS 2012 中测试）：

```
Msg 240, Level 16, State 1, Line 13
Types don't match between the anchor and the recursive part in column "pid" of recursive query "cte".
Msg 240, Level 16, State 1, Line 13
Types don't match between the anchor and the recursive part in column "pname" of recursive query "cte".
Msg 240, Level 16, State 1, Line 13
Types don't match between the anchor and the recursive part in column "pvalue" of recursive query "cte". 
```

我很确定这是由于在锚部分中选择了 NULL 值，而不是在递归部分中获取的 NOT NULL 字段......这个问题可以解决吗？

（我对完成这项任务的替代方法持开放态度。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:02:44.263

转换文字`null`值以匹配。

```
;with
cte(id,name, value, pid, pname, pvalue) as (
    select id, name, value, cast(null as uniqueidentifier),
        cast(null as varchar(100)), cast(null as varchar(100))
    from @temp where parentid is null
    union all
    select r.id, r.name, r.value, a.id, a.name, a.value 
    from @temp r inner join cte a
    on a.id = r.parentid
) 
```

否则 SQL 将假定`int`每个`null`与联合的第二部分不匹配的默认类型。

# javascript - JavaScript 中的 querySelector 和 querySelectorAll 与 getElementsByClassName 和 getElementById

> ID：14377590
> 
> 赞同：223
> 
> 时间：2013-01-17T11:00:20.310
> 
> 标签：javascript

我想知道`querySelector`和`querySelectorAll`反对 `getElementsByClassName`和之间到底有什么区别`getElementById`？

从[这个链接](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)我可以收集到，`querySelector`我可以写`document.querySelector(".myclass")`来获取带有 class 的元素`myclass`并`document.querySelector("#myid")`获取带有 ID 的元素`myid`。但我已经可以做到这一点`getElementsByClassName`并且`getElementById`. 应该首选哪一个？

我也在[XPages](https://stackoverflow.com/tags/xpages/info)中工作，其中 ID 是用冒号动态生成的，看起来像这样`view:_id1:inputText1`。所以当我写`document.querySelector("#view:_id1:inputText1")`它不起作用。但写作`document.getElementById("view:_id1:inputText1")`有效。任何想法为什么？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2019-02-22T03:26:39.963

对于这个答案，我将`querySelector`and`querySelectorAll`称为 querySelector* 和 to `getElementById`、`getElementsByClassName`、`getElementsByTagName`和`getElementsByName`getElement*。

很多这些信息都可以在规范中得到验证，其中很多来自我编写它时运行的各种基准测试。规范：[https ://dom.spec.whatwg.org/](https://dom.spec.whatwg.org/)

## 主要区别

1.  querySelector* 更加灵活，因为您可以将任何 CSS3 选择器传递给它，而不仅仅是用于 id、标签或类的简单选择器。
2.  **querySelector* 的性能随调用它的 DOM 的大小而变化。**准确地说，querySelector* 调用在 O(n) 时间内运行，而 getElement* 调用在 O(1) 时间内运行，其中 n 是调用它的元素或文档的所有子元素的总数。这个事实似乎是最不为人所知的，所以我将其加粗。
3.  这些调用的返回类型各不相同。`querySelector`并且`getElementById`都返回一个元素。`querySelectorAll`并且`getElementsByName`都返回 NodeLists。较旧的`getElementsByClassName`和`getElementsByTagName`两者都返回 HTMLCollections。NodeLists 和 HTMLCollections 都被称为元素的集合。
4.  集合可以包含对 DOM 中元素的引用或元素的副本。getElement* 调用返回引用集合，而 querySelectorAll 结果包含元素的副本。这些分别称为“实时”和“静态”集合。这与它们返回的类型无关。

下表总结了这些概念。

```
Function               | Live? | Type           | Time Complexity
querySelector          |       | Element        |  O(n)
querySelectorAll       |   N   | NodeList       |  O(n)
getElementById         |       | Element        |  O(1)
getElementsByClassName |   Y   | HTMLCollection |  O(1)
getElementsByTagName   |   Y   | HTMLCollection |  O(1)
getElementsByName      |   Y   | NodeList       |  O(1) 
```

## 详细信息、提示和示例

*   HTMLCollections 不像 NodeLists 那样像数组，并且不支持 .forEach()。我发现扩展运算符对解决此问题很有用：

    `[...document.getElementsByClassName("someClass")].forEach()`

*   每个元素和全局`document`都可以访问除`getElementById`和之外的所有这些功能`getElementsByName`，它们仅在 上实现`document`。

*   链接 getElement* 调用而不是使用 querySelector* 将提高性能，尤其是在非常大的 DOM 上。即使在小型 DOM 和/或非常长的链上，它通常也更快。但是，除非您知道自己需要性能，否则应该首选 querySelector* 的可读性。`querySelectorAll`通常更难重写，因为您必须在每一步都从 NodeList 或 HTMLCollection 中选择元素。例如，以下代码**不起作用**：

    `document.getElementsByClassName("someClass").getElementsByTagName("div")`

    因为您只能在单个元素上使用 getElements*，而不能在集合上使用。例如：

    `document.querySelector("#someId .someClass div")`

    可以写成：

    `document.getElementById("someId").getElementsByClassName("someClass")[0].getElementsByTagName("div")[0]`

    请注意，`[0]`在返回集合的每个步骤中，使用 仅获取集合的第一个元素，从而在末尾产生一个元素，就像 with 一样`querySelector`。

*   由于所有元素都可以访问 querySelector* 和 getElement* 调用，因此您可以使用这两个调用创建链，如果您想要一些性能提升，这可能很有用，但不能避免无法根据 getElement* 调用编写的 querySelector .

*   虽然通常很容易判断是否可以仅使用 getElement* 调用来编写选择器，但有一种情况可能并不明显：

    `document.querySelectorAll(".class1.class2")`

    可以改写为

    `document.getElementsByClassName("class1 class2")`

*   在使用 querySelector* 获取的静态元素上使用 getElement* 将产生一个元素，该元素相对于 querySelector 复制的 DOM 的静态子集而言是有效的，但相对于整个文档 DOM 而言是无效的......这就是简单的地方元素的实时/静态解释开始分崩离析。您可能应该避免必须担心这一点的情况，但如果您这样做，请记住 querySelector* 在返回对它们的引用之前调用它们找到的复制元素，但 getElement* 调用获取直接引用而不复制。

*   querySelector* 并按`getElementById`前序、深度优先遍历元素，在规范中称为“树序”。对于其他 getElement* 调用，我从规范中不清楚 - 它们可能与树顺序相同，但`getElementsByClassName(".someClass")[0]`可能无法在每个浏览器中可靠地给出相同的结果。`getElementById("#someId")`但是，即使您的页面上有相同 id 的多个副本，也应该这样做。

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2013-01-17T11:01:43.593

> 我想知道 querySelector 和 querySelectorAll 与 getElementsByClassName 和 getElementById 之间到底有什么区别？

语法和浏览器支持。

`querySelector`当您想使用更复杂的选择器时更有用。

例如，所有列表项都来自作为 foo 类成员的元素：`.foo li`

> document.querySelector("#view:_id1:inputText1") 它不起作用。但是写 document.getElementById("view:_id1:inputText1") 有效。任何想法为什么？

该`:`字符在选择器中具有特殊含义。你必须逃避它。（选择器转义字符在 JS 字符串中也具有特殊含义，因此您也必须对其进行转义*）*。

```
document.querySelector("#view\\:_id1\\:inputText1") 
```

* * *

## 回答 #3

> 赞同：119
> 
> 时间：2014-11-05T12:49:49.523

[从Mozilla 文档](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Locating_DOM_elements_using_selectors)收集：

NodeSelector 接口 本规范为实现 Document、DocumentFragment 或 Element 接口的任何对象添加了两个新方法：

**查询选择器**

> 返回节点子树中的**第一个匹配元素节点。**如果没有找到匹配的节点，则返回 null。

**查询选择器全部**

> 返回**包含节点子树中所有匹配元素**节点的 NodeList，如果未找到匹配项，则返回空 NodeList。

和

> 注意：返回的 NodeList`querySelectorAll()`不是 live 的，这意味着 DOM 中的更改不会反映在集合中。这与其他返回活动节点列表的 DOM 查询方法不同。

* * *

## 回答 #4

> 赞同：96
> 
> 时间：2016-08-29T18:58:57.487

`querySelectorAll`关于差异，在and之间的结果中有一个重要的地方`getElementsByClassName`：返回值不同。`querySelectorAll`将返回一个静态集合，同时`getElementsByClassName`返回一个实时集合。如果将结果存储在变量中以备后用，这可能会导致混淆：

*   生成的变量将包含**在调用方法时**`querySelectorAll`满足选择器的元素。
***   生成的变量将包含在**使用时**`getElementsByClassName`满足选择器的元素（可能与调用方法时不同）。**

 ****例如，请注意即使您没有重新分配变量`aux1`和`aux2`，它们在更新类后包含不同的值：

```
// storing all the elements with class "blue" using the two methods
var aux1 = document.querySelectorAll(".blue");
var aux2 = document.getElementsByClassName("blue");

// write the number of elements in each array (values match)
console.log("Number of elements with querySelectorAll = " + aux1.length);
console.log("Number of elements with getElementsByClassName = " + aux2.length);

// change one element's class to "blue"
document.getElementById("div1").className = "blue";

// write the number of elements in each array (values differ)
console.log("Number of elements with querySelectorAll = " + aux1.length);
console.log("Number of elements with getElementsByClassName = " + aux2.length);
```

```
.red { color:red; }
.green { color:green; }
.blue { color:blue; }
```

```
<div id="div0" class="blue">Blue</div>
<div id="div1" class="red">Red</div>
<div id="div2" class="green">Green</div>
```

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2017-05-14T19:23:03.280

我来到这个页面纯粹是为了找出在性能方面使用更好的方法 - 即更快：

```
querySelector / querySelectorAll or getElementsByClassName 
```

我发现了这个： [https ://jsperf.com/getelementsbyclassname-vs-queryselectorall/18](https://jsperf.com/getelementsbyclassname-vs-queryselectorall/18)

它在上面的 2 x 示例上运行测试，此外它还对 jQuery 的等效选择器进行了测试。我的测试结果如下：

```
getElementsByClassName = 1,138,018 operations / sec - <<< clear winner
querySelectorAll = 39,033 operations / sec
jquery select = 381,648 operations / sec 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2013-01-17T11:03:34.297

`querySelector`可以是一个完整的 CSS(3)-Selector，其中包含 ID、类和伪类，如下所示：

```
'#id.class:pseudo'

// or

'tag #id .class .class.class' 
```

`getElementsByClassName`你可以定义一个类

```
'class' 
```

`getElementById`你可以定义一个id

```
'id' 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-01-17T11:03:06.563

`querySelector`和`querySelectorAll`是一个相对较新的 API，而`getElementById`和 `getElementsByClassName`已经存在了很长时间。这意味着您使用的内容主要取决于您需要支持的浏览器。

至于`:`，它具有特殊含义，因此如果您必须将其用作 ID/类名的一部分，则必须将其转义。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-12-21T06:19:11.237

`querySelector`属于 w3c[选择器 API](https://www.w3.org/TR/selectors-api2/)

`getElementBy`属于 w3c [DOM API](https://www.w3.org/TR/DOM-Level-3-Core/core.html)

IMO 最显着的区别是返回类型`querySelectorAll`是静态节点列表，因为`getElementsBy`它是活动节点列表。因此，演示 2 中的循环永远不会结束，因为`lis`它是实时的，并且在每次迭代期间都会自我更新。

```
// Demo 1 correct
var ul = document.querySelectorAll('ul')[0],
    lis = ul.querySelectorAll("li");
for(var i = 0; i < lis.length ; i++){
    ul.appendChild(document.createElement("li"));
}

// Demo 2 wrong
var ul = document.getElementsByTagName('ul')[0], 
    lis = ul.getElementsByTagName("li"); 
for(var i = 0; i < lis.length ; i++){
    ul.appendChild(document.createElement("li")); 
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-12-01T02:34:23.063

“querySelector”和“querySelectorAll”之间的区别

```
//querySelector returns single element
let listsingle = document.querySelector('li');
console.log(listsingle);

//querySelectorAll returns lit/array of elements
let list = document.querySelectorAll('li');
console.log(list);

//Note : output will be visible in Console
```

```
<ul>
<li class="test">ffff</li>
<li class="test">vvvv</li>
<li>dddd</li>
<li class="test">ddff</li>
</ul>
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-01-24T06:32:21.627

看这个

```
https://codepen.io/bagdaulet/pen/bzdKjL 
```

getElementById 比 querySelector 快 25%

jquery 最慢

```
var q = time_my_script(function() {

    for (i = 0; i < 1000000; i++) {
         var w = document.querySelector('#ll');
    }

});

console.log('querySelector: '+q+'ms'); 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2019-06-03T18:57:04.523

querySelector 和 getlementbyID(Claassname,Tagname etc) 之间的主要区别在于，如果有多个元素满足条件 querySelector 将仅返回一个输出，而 getElementBy* 将返回所有元素。

让我们考虑一个例子以使其更清楚。

```
 <nav id="primary" class="menu">
                            <a class="link" href="#">For Business</a>
                            <a class="link" href="#">Become an Instructor</a>
                            <a class="link" href="#">Mobile Applications</a>
                            <a class="link" href="#">Support</a>
                            <a class="link" href="#">Help</a>
   </nav> 
```

下面的代码将解释差异

```
**QUERY SELECTOR**
document.querySelector('.link'); // Output : For Business (element)

document.querySelectorAll('.link'); //Out All the element with class link

**GET ELEMENT**
document.getElementsByClassName('link') // Output : will return all the element with a class "link" but whereas in query selector it will return only one element which encounters first. 
```

简而言之，如果我们想为查询选择器选择单个元素，或者如果我们想为 getElement 选择多个元素****

# asp.net-mvc - 将复选框传递给控制器 asp.net mvc

> ID：14377595
> 
> 赞同：2
> 
> 时间：2013-01-17T11:00:32.767
> 
> 标签：asp.net-mvc, checkbox

我有一些图像，每个图像旁边都有一个复选框，如下所示：

```
<input type="checkbox" name="select" value="<%=item.Id%>" /> 
```

现在我想通过单击超链接将选定的复选框发送到控制器。我有 ：

```
<a href='<%: Url.Action("DeleteSelected", "Product", new { @ShopID = ViewBag.shopIDempty } ) %>'>Delete</a> 
```

在控制器中：

```
public ActionResult DeleteSelected(int[] select, int ShopID)
    {

        foreach (int checkBoxSelected in select)
        {
            //Do something...               
        }
        return RedirectToAction("Index");
    } 
```

但是没有任何东西传递给 int[] select 并且它始终为空。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:54:03.520

尝试这个：

```
[HttpPost]
public ActionResult DeleteSelected(FormCollection collection)
{
    try
    {
        string[] test = collection.GetValues("select");
    }
    catch (Exception ex)
    {
        return null;
    }
} 
```

我确实想指出，您采用的方法需要一个表格来包装所有复选框，或者您需要专门构建一个对象以发送到 Syed 所示的控制器。如果您采用表单方法，您将需要使用链接来触发表单提交或将链接转换为提交按钮并为 ShopID 设置一个隐藏字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:46:59.953

做这些==> 1）制作一个包含所选复选框值的数组

```
var delete= new Array();

     $('.checkboxed').live('click', function () {
                if ($(this)[0].checked == true) {
                    var itemdel= $(this).val();
                    delete.push(itemdel);
                } else {
                    var remve =  $(this).val();
                    for (var i = 0; i < delete.length; i++) {
                        if (delete[i] == remve) {
                            delete.splice(i, 1);
                            break;
                        }
                    }

                }
            }); 
```

2）点击超链接进行ajax调用

```
$.ajax({
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                url: '/Product/DeleteSelected'
+ '?ShopID =' + ShopIdValue,
                dataType: 'json',
                data: $.toJSON(delete),

                success: function (result) {
                  window.location.href=result;
                },

                async: false,
                cache: false
            }); 
```

3）让你的行动像这样

```
public ActionResult DeleteSelected(int[] select)
{
var shopid= Request["ShopID "];
} 
```

# c# - DataBinding 错误：下拉列表和数据库

> ID：14377599
> 
> 赞同：0
> 
> 时间：2013-01-17T11:00:45.503
> 
> 标签：c#, asp.net, data-binding, drop-down-menu

我收到错误：

> DataBinding：“System.Data.DataRowView”不包含名为“system_name”的属性。

**我有一个从SYSTEMS**表中获取数据的下拉列表。代码：

```
string queryStringForSystem = "SELECT system_name FROM ptdd.systems where system_id=(select system_id from ptdd.parameters where parameter_id='" + txtParameterId.Text + "')";
string odbccon = "Driver={IBM DB2 ODBC DRIVER};database=dd_unify;hostname=x.x.x.x;protocol=TCPIP;port=50000;uid=xxxx;pwd=xxxx";            
using (System.Data.Odbc.OdbcConnection odbcConnection = new System.Data.Odbc.OdbcConnection(odbccon))
                {
                    System.Data.Odbc.OdbcDataAdapter adapter = new System.Data.Odbc.OdbcDataAdapter(queryStringForSrdRefId, odbccon);
                    System.Data.DataSet dataSet = new System.Data.DataSet();
                    try
                    {
                        odbcConnection.Open();
                        adapter.Fill(dataSet);
                        ddrSystem.DataSource = dataSet.Tables[0];
                        ddrSystem.DataTextField = "system_name";
                        ddrSystem.DataValueField = "system_id";
                        ddrSystem.DataBind();

                    }

                catch (Exception e1)
                {
                    Console.WriteLine(e1.Message);
                } 
```

此外，我还提到了 datatextfield 和 datavalue 字段。

```
<asp:DropDownList ID="ddrSystem" runat="server" DataTextField="system_name" DataValueField="system_id">
                </asp:DropDownList> 
```

虽然，这是一个小问题。没办法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-20T18:15:18.890

尝试将查询从

> 从...中选择系统名称

至

> 选择系统 ID、系统名称从...

原因：您的代码正在查找 system_id 但该字段不在查询中。

> ddrSystem.DataTextField = "系统名称";
> 
> ddrSystem.DataValueField = " **system_id** ";

# joomla2.5 - 在joomla的数据库中提取数据

> ID：14377601
> 
> 赞同：1
> 
> 时间：2013-01-17T11:00:46.793
> 
> 标签：joomla2.5

我试图在表中提取特定数据，但我的代码确实有效：

```
$db =& JFactory::getDBO(); 
$query = "SELECT * FROM #_contact_details WHERE user_id = 43;";
$db->setQuery($query);
$results = $db->loadObjectList();
$results = $results["name"]; 
```

结果没有给出任何东西。

有人有想法吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:01:21.653

$results 没有给出任何东西，因为`loadObjectList()`返回对象数组，因此结果（结构）将是类似于此的一行 -

print_r($结果)

```
Array
(
    [0] => stdClass Object
        (
            [name] => "test"
        )
) 
```

所以你可以像这样读取数据`$results = $results[0]->name;`

你可以[在这里阅读](http://docs.joomla.org/Accessing_the_database_using_JDatabase/1.5)

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T06:01:58.770

是`$result`一个数组`stdClass Object`。如果您想访问您必须使用的值：

```
$results = $results[0]->name; 
```

希望这可以帮助！

# cakephp - 视图中的 CakePHP 处理复选框

> ID：14377608
> 
> 赞同：0
> 
> 时间：2013-01-17T11:01:16.847
> 
> 标签：cakephp

我有一个名为的表列`active`，其值可能为 1 或 0

在我`add.ctp`创建一个复选框使用

```
<?php echo $this->Form->checkbox('active'); ?> 
```

同样在我的`edit.ctp`模板中

但无论复选框是选中还是未选中，数据库中保存的值始终为 1，我也不知道`active=1`如何将其设置为`checked`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:02:54.070

假设数据库列是 BOOLEAN 类型。您应该像这样创建复选框：

```
<?php echo $this->Form->input('active'); ?> 
```

它应该自动将其输出为复选框..

如果没有，请尝试清除模型缓存并重`tmp/cache/models`试

# entity-framework - 如何正确从实体框架中的数据库重新加载对象？

> ID：14377610
> 
> 赞同：1
> 
> 时间：2013-01-17T11:01:25.590
> 
> 标签：entity-framework, entity-framework-4

我在其行项目集合中有一个`Invoice`实体，`LineItem`然后将另一个添加`LineItem`到它。我现在想放弃这个添加并`Invoice`从数据库中刷新，因此使用`dbContext.Entry(invoice).Reload()`.

但是，在此调用之后，发票仍然有两个行项目，其中第二个似乎是第一个的副本。这是什么原因，我该如何解决？

# jquery - 嵌套的 jQuery ajax 调用在 Firefox 中不起作用

> ID：14377612
> 
> 赞同：3
> 
> 时间：2013-01-17T11:01:28.217
> 
> 标签：jquery, ajax, firefox

我有一个脚本，它调用彼此嵌套的 jQuery ajax 函数 - 该脚本适用于 Chrome 和 IE9，是否有它不想在 Firefox 中运行的原因？

代码贴在下面：

```
$.ajax({ 
                type: "POST", 
                cache: false, 
                url: "addwelder.php", 
                data: "mywelderid="+$welderid,
                success: function()
                {
                    $.ajax({ 
                        type: "GET", 
                        cache: false, 
                        url: "loadwelder.php", 
                        dataType: "json",
                        success: function(data)
                        {
                            $("#mywelders:last-child").append("<option value=" + data[0].toString() + ">" + data[1].toString() + "</option>");
                            $("#mywelders option:last").attr("selected","selected");
                        },
                        error: function(xhr, exc)
                        {
                            alert(xhr.status);
                            alert(exc);
                        }

                    });
                },
                error: function(xhr, exc)
                {
                    alert(xhr.status);
                    alert(exc);
                }

            }); 
```

# java - 在 Android v.4 中使用已弃用的 TabBar 和 SherlockActionBar

> ID：14377617
> 
> 赞同：1
> 
> 时间：2013-01-17T11:02:05.270
> 
> 标签：java, android, actionbarsherlock

我正在使用我的应用程序底部已弃用的标签栏。[我的标签栏的一个例子](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)。

然后我`ActionBarSherlock`在我的应用程序顶部使用了。它适用于 Android v2.3.5 和 version3.2，

但是当我在 Android v4 上运行它时，`ActionBar`消失和项目`ActionBar`显示为选项菜单，子菜单显示为上下文菜单。

我无法更改架构并使用片段而不是已弃用的标签栏。

你知道我怎样才能让它`ActionBar`出现在 Android v4 中吗？

或者你认为这是不可能的，因为在这种情况下我不能使用片段。

```
public class MainActivity extends SherlockActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        setTheme(R.style.Theme_Styled);
        super.onCreate(savedInstanceState);
    }

    @Override
    protected void onResume() {
        super.onResume();
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getSupportMenuInflater().inflate(R.menu.activity_main, menu);
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {

        case R.id.menu_settings:
            System.out.println("Hello");
            return true;

        default:
            return super.onOptionsItemSelected(item);
        }
    }

} 
```

和style.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="Theme.Styled" parent="Theme.Sherlock.Light.DarkActionBar">
        <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
        <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>
    </style>

    <style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
        <item name="titleTextStyle">@style/TitleText</item>
        <item name="android:titleTextStyle">@style/TitleText</item>
    </style>

    <!-- Title on action bar -->
     <style name="TitleText" >
        <item name="android:textColor">@android:color/white</item>
        <item name="android:textSize">12.5dip</item>
    </style>

</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:49:28.563

首先，在您的应用程序中使用它会更好`SherlockFragmentActivity`，`SherlockFragment`因为它是内容。至少在我看来。其次，在 Android 的早期版本中，仅当您为它们设置此值时才会显示操作栏项目：`android:showAsAction="always"`。

例如 ：

```
 <item
    android:id="@+id/sync"
    android:orderInCategory="1"
    android:title="Sync"
    android:icon="@drawable/ic_action_refresh"
    android:showAsAction="always"   /> 
```

在具有硬件菜单按钮的设备中，即使您运行应用程序的 android 是 3+，其余元素也将作为子菜单放置。

使用已弃用的 TabBar 对您来说不是问题，但是有一个很好的例子说明如何使用标签`ActionBarSherlock`，`Fragments`您可以在这里找到：[FragmentTabManager](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabs.java)

# c# - 使用 Microsoft Sync Framework 时需要考虑哪些因素

> ID：14377618
> 
> 赞同：0
> 
> 时间：2013-01-17T11:02:07.040
> 
> 标签：c#, sql-server-2008, sql-server-ce, microsoft-sync-framework

现在我们已经开发了一个用于维护的应用程序，其中一个主要问题是同步时间。

本地 CE 数据库和远程 SQL Server 之间的同步几乎需要 50 到 60 秒。

将同一个本地 CE 数据库与本地 SQL Server 同步只需不到 12 秒。

[这表明服务器的位置绝对是决定性的，但是在使用Microsoft Sync Framework](http://msdn.microsoft.com/en-us/sync/bb736753.aspx)时需要评估的其他因素是什么。

是否有任何标准规定了多少范围以及如何有效地使用配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:14:32.257

在这里发布太长，所以发布一个链接：[同步框架范围和 SQL Azure 数据同步数据集注意事项](http://jtabadero.wordpress.com/2012/03/01/sync-framework-scope-and-sql-azure-data-sync-dataset-considerations/)

您可以查看的其他内容是批处理和元数​​据清理。

请注意，Sync Framework 就像任何其他数据库应用程序一样，因此适当的索引之类的东西也是一个加号。

# linux - 安装 OpenCV 时出错

> ID：14377619
> 
> 赞同：0
> 
> 时间：2013-01-17T11:02:07.143
> 
> 标签：linux, opencv

我使用以下命令在我的 Linux Ubunbtu 12.04 上安装 OpenCV 2.4.3

```
cmake -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=OFF -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D OPENCV_BUILD_3RDPARTY_LIBS=ON -D WITH_FFMPEG=ON -D WITH_GTK=ON -D WITH_OPENEXR=ON -D WITH_OPENNI=ON -D WITH_PNG=ON -D WITH_TBB=ON -D WITH_XINE=ON -D WITH_GSTREAMER=ON . 
```

然后是 make 命令。在制作过程中，我收到以下错误。

```
Linking CXX shared library ../../lib/libopencv_highgui.so
/usr/bin/ld: /usr/local/lib/libavcodec.a(avpacket.o): relocation R_X86_64_32S against     
`av_destruct_packet' can not be used when making a shared object; recompile with -fPIC
/usr/local/lib/libavcodec.a: could not read symbols: Bad value
collect2: ld returned 1 exit status
make[2]: *** [lib/libopencv_highgui.so.2.4.0] Error 1
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
make: *** [all] Error 2 
```

我已经更新了linux。我无法弄清楚错误。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:04:58.273

这似乎是 libav 构建系统中的一个错误，而不是 OpenCV。因此，要丢弃它，您可以尝试重新编译`-D WITH_FFMPEG=OFF`

无论如何，这篇文章是重复的：[在 Ubuntu 11.10 上编译 OpenCV2.3.1 时出现奇怪的链接器错误](https://stackoverflow.com/questions/8370028/strange-linker-error-while-compiling-opencv2-3-1-on-ubuntu-11-10)

# android - 我的应用使用 AccessibilityManager 未处理事件随机使设备（Galaxy Nexus 和 Nexus 4）崩溃

> ID：14377625
> 
> 赞同：6
> 
> 时间：2013-01-17T11:02:24.827
> 
> 标签：android

当我在我的 Galaxy Nexus 上切换到 4.2 并继续使用我的 Nexus 4 时，这种情况开始发生。我的应用程序随机崩溃（软重置）设备，即使没有用户输入。

这是崩溃前的 Logcat：

```
01-17 12:54:24.960: E/AccessibilityManager(10497): Error during sending EventType: TYPE_WINDOW_CONTENT_CHANGED; EventTime: 151405384; PackageName: com.ntasher.homeconII; MovementGranularity: 0; Action: 0 [ ClassName: android.widget.FrameLayout; Text: []; ContentDescription: null; ItemCount: -1; CurrentItemIndex: -1; IsEnabled: true; IsPassword: false; IsChecked: false; IsFullScreen: false; Scrollable: false; BeforeText: null; FromIndex: -1; ToIndex: -1; ScrollX: -1; ScrollY: -1; MaxScrollX: -1; MaxScrollY: -1; AddedCount: -1; RemovedCount: -1; ParcelableData: null ]; recordCount: 0 
01-17 12:54:24.960: E/AccessibilityManager(10497): android.os.DeadObjectException
01-17 12:54:24.960: E/AccessibilityManager(10497):  at android.os.BinderProxy.transact(Native Method)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at android.view.accessibility.IAccessibilityManager$Stub$Proxy.sendAccessibilityEvent(IAccessibilityManager.java:227)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at android.view.accessibility.AccessibilityManager.sendAccessibilityEvent(AccessibilityManager.java:265)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at android.view.ViewRootImpl.requestSendAccessibilityEvent(ViewRootImpl.java:4700)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at android.view.View.sendAccessibilityEventUncheckedInternal(View.java:4699)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at android.view.View.sendAccessibilityEventUnchecked(View.java:4680)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at android.view.View.sendAccessibilityEventInternal(View.java:4657)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at android.view.View.sendAccessibilityEvent(View.java:4626)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at com.android.internal.policy.impl.PhoneWindow$DecorView.sendAccessibilityEvent(PhoneWindow.java:2067)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at android.view.ViewRootImpl$SendWindowContentChangedAccessibilityEvent.run(ViewRootImpl.java:5462)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at android.os.Handler.handleCallback(Handler.java:725)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at android.os.Looper.loop(Looper.java:137)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at java.lang.reflect.Method.invokeNative(Native Method)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at java.lang.reflect.Method.invoke(Method.java:511)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-17 12:54:24.960: E/AccessibilityManager(10497):  at dalvik.system.NativeStart.main(Native Method)
01-17 12:54:25.931: E/InputEventReceiver(10497): channel '42466698 com.ntasher.homeconII/com.ntasher.homeconII.HomeConII (client)' ~ Publisher closed input channel or an error occurred.  events=0x9 
```

之后，设备软重置（直接到发光的“X”）。

这里发生了什么事？这是一些未处理的异常吗？我怎么能抓住它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:25:54.717

您没有提供任何代码，但我怀疑这是这里的问题。

`Activity`在创建一些绑定到系统的对象时，您正在传递一个上下文。因此，当您关闭应用程序并且对象保留时，它会变成死引用。对不再存在且不可见的 Activity 的引用。

在某些地方，您将有如下行：

```
SomeClass object = new SomeClass(this); //Or getActivity() or something. 
```

在这里，将`Context`参数更改为`getApplicationContext()`（除非该代码正在创建并显示一个对话框，在这种情况下让 Activity 上下文为）。

# html - 在一行上对齐输入和按钮

> ID：14377626
> 
> 赞同：0
> 
> 时间：2013-01-17T11:02:28.477
> 
> 标签：html, css, haml, sass

我有这样的表格部分：

```
<td>
  <form accept-charset="UTF-8" action="/line_items" method="post">
    <input class="qnt_to_cart2" id="110040Q" name="cart_quantity" pattern="0|[1-9]\d{0,2}" required="required" type="text" value="1">
    <input class="orange-button to-cart_no" id="110040Q" name="commit" type="submit" value="В корзину">
  </form>
</td> 
```

和CSS（萨斯）：

```
.qnt_to_cart, .qnt_to_cart2{
  width: 30px;
  height: 20px;
}

.orange-button{
  display: inline-block;
  padding: 6px;
  @include gradient-background(bottom, $or1, #fbb752); 
  //background: url('button-carbon-bg.png') no-repeat, -webkit-linear-gradient(bottom, $or1, #fbb752);
  @include border-radius(5px, 5px, 5px, 5px);
  //background: transparent url('button-carbon-bg.png') no-repeat;
  border: 1px solid #d27d00;
  font-family: “Myriad Pro”, Arial, Helvetica, Tahoma, sans-serif;
  font-weight: bold;
  font-size: 16px;
  color: $or3;
  text-align: center;
  text-shadow: 0 1px 0 rgba(255, 255, 255, .70);
  font-style: normal;
  @include box-shadow(inset 0 1px 0 rgba(255,255,255,0.5));
  border-bottom:2px solid #B16900;
} 
```

[所有的css文件都在这里](http://pastebin.com/9tTjUYmh)

现在我看到了：

![在此处输入图像描述](../Images/ddf204c6043784eacdfe17db505e56d8.png)

那么如何以最少的代码转换将两个元素布局在一行上呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:09:58.247

添加`float: left;`到您的 CSS 类。

这应该可以解决问题，因为您`td`当然足够宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:10:38.090

在我看来，这两个元素没有足够的空间并排，这导致按钮传递到下一行。

尝试使父元素更宽一些。

**编辑**

尝试添加这样的 div。

```
<td>
  <form accept-charset="UTF-8" action="/line_items" method="post">
    <div class="wrapper_test">
      <input class="qnt_to_cart2" id="110040Q" name="cart_quantity" pattern="0|[1-9]\d{0,2}" required="required" type="text" value="1">
      <input class="orange-button to-cart_no" id="110040Q" name="commit" type="submit" value="В корзину">
    </div>
  </form>
</td> 
```

并将其添加到*css*

```
.wrapper_test { width: 150px } /* or a little more if needed */ 
```

* * *

或者，这个。

```
<td>
  <form accept-charset="UTF-8" action="/line_items" method="post">
    <table><tr><td>
      <input class="qnt_to_cart2" id="110040Q" name="cart_quantity" pattern="0|[1-9]\d{0,2}" required="required" type="text" value="1">
    </td><td>
      <input class="orange-button to-cart_no" id="110040Q" name="commit" type="submit" value="В корзину">
    </td></td></table>
  </form>
</td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:16:49.583

试试这个：

```
<tr>
  <td colspan="2">
    <form accept-charset="UTF-8" action="/line_items" method="post">
      <input class="qnt_to_cart2" id="110040Q" name="cart_quantity" pattern="0|[1-9]\d{0,2}" required="required" type="text" value="1">
    </form>
  </td>

  <td align="right">
    <form accept-charset="UTF-8" action="/line_items" method="post">
      <input class="orange-button to-cart_no" id="110040Q" name="commit" type="submit" value="В корзину">
    </form>
  </td>
</tr> 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:37:15.707

```
display:inline-block; 
```

你需要在这两个元素上

```
display:block; 
```

在父元素上

# java-me - 在 J2me 中发送短信和接收发送报告

> ID：14377632
> 
> 赞同：1
> 
> 时间：2013-01-17T11:02:52.180
> 
> 标签：java-me, lwuit

我正在开发一个项目，我需要向联系人发送短信，如果联系人没有收到短信，我必须向他发送另一个或选择另一个联系人。因此，为了通知我的 midlet 成功发送短信，我需要接收并阅读短信发送报告。

**如何使用 j2me 读取交付报告？或者有没有其他方法可以实现这一目标？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T19:02:24.383

如果您将应用程序放在诺基亚商店，它将由诺基亚自动签名到第三方信任域，因此提示会更少。另外我认为，如果您实施 SATSA JSR [http://en.wikipedia.org/wiki/Security_and_Trust_Services_API_for_J2ME](http://en.wikipedia.org/wiki/Security_and_Trust_Services_API_for_J2ME)，您可以与 SIM 卡交谈并获取相关信息，也可能在发送 SMS 时获得相关信息，但您需要将应用程序签署给运营商域的权限。另一方面，如果您有与服务器的 SMPP 连接，您可以通过端口号向用户发送 SMS，并在那里查看消息状态。

# ios - Facebook打开图形对象，，，无法设置其属性

> ID：14377640
> 
> 赞同：1
> 
> 时间：2013-01-17T11:03:15.840
> 
> 标签：ios, objective-c, facebook-graph-api, facebook-opengraph

我已经成功地将对象及其属性的默认值发布在我的墙上。

我现在需要做的是通过我的代码手动为该对象设置这些属性。

这是我所做的：

```
@protocol OGApple<FBOpenGraphAction>

@property (nonatomic, retain) NSString *url;
@property (nonatomic, retain) NSString *title;
@property (nonatomic, retain) NSString *image;
@property (nonatomic, retain) NSString *description;

@end

@protocol OGEatAction<FBOpenGraphAction>

@property (retain, nonatomic) id<OGApple> apple;

@end 
```

这里的对象“apple”有四个必需的属性（url、title、image、description），，这是我设置它们的方法：

定义对象：

```
id<OGApple> graphObject = (id<OGApple>)[FBGraphObject graphObject]; 
```

定义动作：

```
id<OGEatAction> action = (id<OGEatAction>)[FBGraphObject graphObject]; 
```

设置属性（我尝试了方法1和方法二）他们都没有设置对象属性：

方法一：

```
[graphObject setObject:@"The Game" forKey:@"title"];
[graphObject setObject:@"https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png" forKey:@"image"];
[graphObject setObject:@"http://samples.ogp.me/267255650070428" forKey:@"url"]; 
```

方法二：

```
graphObject.url = @"http://samples.ogp.me/267255650070428";
graphObject.title = @"Mohammad";
graphObject.image = @"https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png"; 
```

然后将对象分配给动作：

```
action.apple = graphObject; 
```

然后发布请求

```
[FBRequestConnection startForPostWithGraphPath:@"me/theapp:eat"
                                       graphObject:action
                                 completionHandler:^(FBRequestConnection *connection,
                                                     id result,
                                                     NSError *error) {
                                     // handle the result
                                     if(error)
                                         NSLog(@"%@", error);
                                     else
                                         NSLog(@"%@", result);
                                 }]; 
```

请求成功发布并返回 id = xxxxxxxxxx

但是在我的时间轴上，该对象没有采用我传递给它的参数！

我错过了什么或需要在服务器上进行任何额外的配置吗？

提前致谢 ：）

# ios - 放大时 UIView 上的自定义绘图会像素化

> ID：14377641
> 
> 赞同：0
> 
> 时间：2013-01-17T11:03:16.857
> 
> 标签：ios, core-graphics

我在尝试在`UIView`放大时移动的触摸上平滑地绘制线条时遇到了一些问题。问题是线条在某些缩放级别上开始看起来非常像素化。到目前为止，我的视图层次结构非常简单，因为这更像是概念证明。我有一个`UIScrollView`，我`UIView`小时候，它也被设置为缩放视图。

我的`drawRect:`实现如下所示：

```
CGContextRef context = UIGraphicsGetCurrentContext();

[self.layer renderInContext:context];

CGPoint mid1 = midPoint(_previousPoint1, _previousPoint2);
CGPoint mid2 = midPoint(_currentPoint, _previousPoint1);

CGContextSetBlendMode(context, kCGBlendModeNormal);
CGContextMoveToPoint(context, mid1.x, mid1.y);
CGContextAddQuadCurveToPoint(context, _previousPoint1.x, _previousPoint1.y, mid2.x, mid2.y);
CGContextSetLineCap(context, kCGLineCapRound);
CGContextSetLineJoin(context, kCGLineJoinRound);
CGContextSetLineWidth(context, self.lineWidth);
CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);
CGContextStrokePath(context); 
```

将图层的内容转储到上下文中是一个重要部分，因为我只刷新包围由最后三个触摸点（ 和 ）形成的路径的`_previousPoint1`边界`_previousPoint2`框`_currentPoint`。该操作实际上是在`touchesMoved`方法上完成的，处理它的函数如下：

```
- (void)calculateMinImageArea:(CGPoint)pp1 :(CGPoint)pp2 :(CGPoint)cp
{
    // calculate mid point
    CGPoint mid1    = midPoint(pp1, pp2);
    CGPoint mid2    = midPoint(cp, pp1);

    CGMutablePathRef path = CGPathCreateMutable();
    CGPathMoveToPoint(path, NULL, mid1.x, mid1.y);
    CGPathAddQuadCurveToPoint(path, NULL, pp1.x, pp1.y, mid2.x, mid2.y);
    CGRect bounds = CGPathGetBoundingBox(path);
    CGPathRelease(path);

    CGRect drawBox = [self extendedRect:bounds];

    UIGraphicsBeginImageContext(drawBox.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIGraphicsEndImageContext();

    [self setNeedsDisplayInRect:drawBox];
} 
```

我能够找到一种`CAShapeLayers`用于绘制路径的解决方法。然而，低性能是不可接受的。

如果有人能指出正确的方法，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:16:00.590

```
[self setContentScaleFactor:scale]; 
```

在`scrollViewDidEndZooming:`委托方法中使用它

希望这对你有帮助

# php - 在通过 'time1'=>urlencode($time1) 传输的时间上添加一个小时

> ID：14377646
> 
> 赞同：0
> 
> 时间：2013-01-17T11:03:26.467
> 
> 标签：php, html, mysql, wordpress

我对这种东西完全是新手，但如果有人能帮助我，我将永远感激不尽。

我有一个 Wordpress 预订日历插件，可以将预订详细信息发送到 Google 日历 - 除了发送的时间比实际预订的时间少 1 小时之外，这很好用。即，如果在上午 9 点预订，它将在上午 8 点出现在 Google 日历上。

我已经指出它是这段代码：

```
'time1'=>urlencode($time1) 
```

我尝试了许多不同的解决方案，并且在任何地方都更改了预订时间，但在我真正想要的地方。

Wordpress 和 Google 日历匹配上的时区（即使我在 Wordpress 上将它们更改为 +1 - Google 仍然需要 1 小时 - 唯一有效的方法是制作 Google Cal GMT-1，但这会搞砸一切）并且 $time1 的值正确显示在 Wordpress 插件详细信息中的预订详细信息中。

只是不确定如何在这种情况下将 1 小时、3600 秒或其他任何时间添加到 $time1 （正如我所说，我是一个完整的新手）。

$time1 代表 H:i 细节

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:09:15.820

这将增加一个小时`$time1`，据说这可以通过跟踪该变量并找出它为什么不正确来解决。如果它是一个众所周知的插件，仍然很容易相信您的站点上存在配置错误。但是你在问这个问题之前已经完成了自己的调试，这非常好。

```
'time1' => urlencode( date( 'H:i', strtotime( $time1 . ' +1 hour' ) ) ) 
```

# encryption - 获取存档文件的密码知道其内容

> ID：14377647
> 
> 赞同：3
> 
> 时间：2013-01-17T11:03:27.747
> 
> 标签：encryption, archive, 7zip

当您拥有受密码保护的存档文件和该存档文件的解密内容时，是否可以获得 .7z 存档密码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:06:45.380

如果密码简单而简短，最好的方法是尝试暴力破解。看[http://telecharger.tomsguide.fr/ZIP-Ultimate-Cracker,0301-1445.html](http://telecharger.tomsguide.fr/ZIP-Ultimate-Cracker,0301-1445.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T11:22:32.640

如果您使用的是 Ubuntu，请查看下面的链接。

[https://askubuntu.com/questions/13474/how-do-i-extract-a-password-protected-7z-file](https://askubuntu.com/questions/13474/how-do-i-extract-a-password-protected-7z-file)

# vb.net - 网页按钮错误

> ID：14377650
> 
> 赞同：0
> 
> 时间：2013-01-17T11:03:43.233
> 
> 标签：vb.net, webforms

我使用创建了一个网页`VB 2010`，我使用了母版页，并且我没有放置任何会话、cookie 或任何可能影响网站的东西。但是当我在任何子页面上创建一个“提交按钮”时，我会出现一个错误，说明下划线 -

```
Server Error in '/EP-CMS' Application. 
```

此页面的状态信息无效，可能已损坏。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

```
Exception Details: System.Web.HttpException: The state information is invalid for this page and might be corrupted. 
```

源错误：

[没有相关的源代码行]

```
Source File: c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\ep-cms\ae3f1090\4636a7bf\App_Web_2wkxnfol.4.cs    Line: 0 
```

堆栈跟踪：

```
 [FormatException: The input is not a valid Base-64 string as it contains a     
   non-base 64 character, more than two padding characters, or a 
   non-white space character  among the padding characters. ]   
     .............................etc, etc., 
```

我不知道为什么，我已将提交按钮更改为图像按钮等。但点击按钮后它总是指向这个错误。链接页面很好，但即使我没有在按钮事件上写任何东西（只是把按钮）它会导致这个错误.. 为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:24:37.540

看起来您没有在临时文件夹中写入的权限，或者您的参考文件不在本地计算机中。

尝试以下解决方案。

1.  检查您是否可以打开该位置

c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\ep-cms

还要检查 %temp% 是否可访问，并且您对该文件夹具有写入权限，并且还可以从您正在运行应用程序的用户那里获得写入权限。

1.  如果仍然无法正常工作，请清理您的解决方案并从 c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\ep-cms\ae3f1090\4636a7bf\ 文件夹中删除所有内容，然后重新构建解决方案。

2.  还可以通过从具有管理权限的命令提示符运行以下命令来重新注册您的 ASP.Net 框架来检查

aspnet_regiis -i

并重新执行步骤 2。

如果您能够使用这些方法解决，请反馈相同。首先尝试第 1 步和第 2 步。

# php - PHP 中的 MCrypt 库是否存在任何已知的错误/问题

> ID：14377653
> 
> 赞同：0
> 
> 时间：2013-01-17T11:03:54.047
> 
> 标签：php, ubuntu, centos, mcrypt

我想知道 PHP 中的 MCrypt 库是否有任何问题，因为我正在进行加密/解密测试。在同一个文件中，我有一个加密和解密，没有任何功能。当我加密时，一切都很完美，但是当我在那之后立即开始解密时，输出就变成了垃圾。我确信我传递了相同的密钥和 IV，我什至更改了 OFB 和 ECB 中的算法（3DES 和 RIJNDEAL-128）。一切都是一样的。

我关心的 MCrypt 版本是：

> 版本 2.5.8 API 20021217 PHP 版本 5.4.6-1ubuntu1.1 Apache 2.2.22 操作系统：Ubuntu 12.10 x64
> 
> 版本：2.5.8 API：20021217 PHP 版本 5.3.15 Apache 2.2.22 操作系统：CentOS x64（HostGator 共享）
> 
> > 另外问题不在x64上，因为我之前在x86机器上使用过ubuntu 12.04

**编辑**

```
$time = microtime();
$key_size = mcrypt_get_key_size(MCRYPT_RIJNDAEL_128);
$key = substr(md5($time),0,$key_size);
$iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
$iv = substr(sha1($time),0,$iv_size);
$secret = "14 SPROWSTON ROAD";
$crypt =  mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $secret, MCRYPT_MODE_CBC);
print $crypt;
print "<br />";
echo mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $crypt, MCRYPT_MODE_CBC); 
```

**输出**

> 14�'�V�>�CN 路

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:59:51.617

原来问题出在电脑后面。这是我自己的编码错误。

# android - 下载的图像在 imageview 中显示为空白

> ID：14377655
> 
> 赞同：0
> 
> 时间：2013-01-17T11:04:02.883
> 
> 标签：android, android-asynctask, android-imageview, android-image

我使用了几种不同的方法从 Web 服务器下载图像，将其显示在图像视图中。我面临同样的问题，下载后图像在图像视图中显示为空白。我没有得到我错的地方。我正在使用模拟器。

这是我下载图片的代码

```
 private static InputStream OpenHttpConnection(String urlString) 
        throws IOException
        {
            InputStream in = null;
            int response = -1;

            URL url = new URL(urlString); 
            URLConnection conn = url.openConnection();

            if (!(conn instanceof HttpURLConnection))                     
                throw new IOException("Not an HTTP connection");

            try{
                HttpURLConnection httpConn = (HttpURLConnection) conn;
                httpConn.setAllowUserInteraction(false);
                httpConn.setInstanceFollowRedirects(true);
                httpConn.setRequestMethod("GET");
                httpConn.connect(); 

                response = httpConn.getResponseCode();                 
                if (response == HttpURLConnection.HTTP_OK) {
                    in = httpConn.getInputStream();                                 
                }                     
            }
            catch (Exception ex)
            {
                throw new IOException("Error connecting");            
            }
            return in;     
        }
        static Bitmap DownloadImage(String URL)
        {        
            Bitmap bitmap = null;
            InputStream in = null;        
            try {
                in = OpenHttpConnection(URL);
                bitmap = BitmapFactory.decodeStream(in);
                in.close();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            return bitmap;                
        } 
```

这是我显示图像的代码

```
 private class LongOperation extends AsyncTask<String, Void, String> {

      @Override

      protected String doInBackground(String... params) {

        // perform long running operation operation

                Bitmap message_bitmap = null; 
                // Should we download the image?
                if ((image_url != null) && (!image_url.equals("")))            
                            {
                    message_bitmap = 
                         ImageDownloader.DownloadImage(image_url);

                }
                // If we didn't get the image, we're out of here
                if (message_bitmap == null) {

                    Log.d("Image", "Null hai");
                }

        return null;

      }

      @Override

      protected void onPostExecute(String result) {

        // execution of result of Long time consuming operation
          pDialog.dismiss();
          iv.setImageDrawable(message_bitmap);
          Log.d("Image", "Displayed");
      }

      /* (non-Javadoc)
               * @see android.os.AsyncTask#onPreExecute()

       */

      @Override

      protected void onPreExecute() {

      // Things to be done before execution of long running operation.
            pDialog = new ProgressDialog(CommonUtilities.this);
            pDialog.setMessage(Html.fromHtml("Please Wait..."));
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
      }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:08:13.940

我使用此代码加载 img 表单 url

```
ImageView v_thumburl = (ImageView) rowView
                .findViewById(R.id.v_thumb_url);
        thumburl = temp.getString(temp.getColumnIndex("thumburl"));
        Drawable drawable = LoadImageFromWebOperations(thumburl);
        v_thumburl.setImageDrawable(drawable);

private Drawable LoadImageFromWebOperations(String url) {
    try {
        InputStream is = (InputStream) new URL(url).getContent();
        Drawable d = Drawable.createFromStream(is, "src name");
        return d;
    } catch (Exception e) {
        System.out.println("Exc=" + e);
        return null;
    }
} 
```

# hadoop - Hadoop HDFS：读取正在写入的序列文件

> ID：14377657
> 
> 赞同：1
> 
> 时间：2013-01-17T11:04:10.213
> 
> 标签：hadoop, hdfs, sequencefile

我正在使用 Hadoop 1.0.3。

我将日志写入到 HDFS 的 Hadoop 序列文件中，在每组日志之后调用 syncFS() 但我从不关闭文件（除非我执行每日滚动）。

我要保证的是，在文件仍在写入时，该文件可供读者使用。

我可以通过 FSDataInputStream 读取序列文件的字节，但是如果我尝试使用 SequenceFile.Reader.next(key,val)，它会在第一次调用时返回 false。

我知道数据在文件中，因为我可以使用 FSDataInputStream 或 cat 命令读取它，并且我 100% 确定调用了 syncFS()。

我检查了 namenode 和 datanode 日志，没有错误或警告。

为什么 SequenceFile.Reader 无法读取我当前正在写入的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:30:29.893

您无法确保读取完全写入数据节点端的磁盘。您可以在以下状态的文档中看到这一点`DFSClient#DFSOutputStream.sync()`：

```
 All data is written out to datanodes. It is not guaranteed that data has
  been flushed to persistent store on the datanode. Block allocations are
  persisted on namenode. 
```

所以它基本上用当前信息更新namenode的块映射并将数据发送到datanode。由于您无法将数据刷新到数据节点上的磁盘，但您直接从数据节点读取数据，因此您遇到了数据在某处缓冲且无法访问的时间范围。因此，您的序列文件阅读器会认为数据流已完成（或为空）并且无法读取向反序列化过程返回 false 的其他字节。

如果完全接收到块，数据节点会将数据写入磁盘（它是预先写入的，但不能从外部读取）。因此，一旦达到您的块大小或您的文件已预先关闭并最终确定一个块，您就可以从文件中读取。这在分布式环境中完全有意义，因为您的编写器可能会死掉并且无法正确完成一个块——这是一个一致性问题。

所以解决方法是使块大小非常小，以便更频繁地完成块。但这不是那么有效，我希望清楚您的要求不适合 HDFS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:57:34.737

SequenceFile.Reader 无法读取正在写入的文件的原因是它使用文件长度来执行它的魔法。

写入第一个块时文件长度保持为 0，并且仅在块已满时更新（默认为 64MB）。然后文件大小停留在 64MB，直到第二个块被完全写入，依此类推......

这意味着您无法使用 SequenceFile.Reader 读取序列文件中最后一个不完整的块，即使可以直接使用 FSInputStream 读取原始数据。

关闭文件也修复了文件长度，但在我的情况下，我需要在文件关闭之前读取文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-23T22:13:17.660

所以我遇到了同样的问题，经过一些调查和时间，我想出了以下可行的解决方法。

So the problem is due to internal implementation of sequence file creation and the fact that it is using the file length which is updated per block of 64 MBs.

So I created the following class to create the reader and I wrapped the hadoop FS with my own while I overriding the get length method to return the file length instead:

```
public class SequenceFileUtil {

    public SequenceFile.Reader createReader(Configuration conf, Path path) throws IOException {

        WrappedFileSystem fileSystem = new WrappedFileSystem(FileSystem.get(conf));

        return new SequenceFile.Reader(fileSystem, path, conf);
    }

    private class WrappedFileSystem extends FileSystem
    {
        private final FileSystem nestedFs;

        public WrappedFileSystem(FileSystem fs){
            this.nestedFs = fs;
        }

        @Override
        public URI getUri() {
            return nestedFs.getUri();
        }

        @Override
        public FSDataInputStream open(Path f, int bufferSize) throws IOException {
            return nestedFs.open(f,bufferSize);
        }

        @Override
        public FSDataOutputStream create(Path f, FsPermission permission, boolean overwrite, int bufferSize, short replication, long blockSize, Progressable progress) throws IOException {
            return nestedFs.create(f, permission,overwrite,bufferSize, replication, blockSize, progress);
        }

        @Override
        public FSDataOutputStream append(Path f, int bufferSize, Progressable progress) throws IOException {
            return nestedFs.append(f, bufferSize, progress);
        }

        @Override
        public boolean rename(Path src, Path dst) throws IOException {
            return nestedFs.rename(src, dst);
        }

        @Override
        public boolean delete(Path path) throws IOException {
            return nestedFs.delete(path);
        }

        @Override
        public boolean delete(Path f, boolean recursive) throws IOException {
            return nestedFs.delete(f, recursive);
        }

        @Override
        public FileStatus[] listStatus(Path f) throws FileNotFoundException, IOException {
            return nestedFs.listStatus(f);
        }

        @Override
        public void setWorkingDirectory(Path new_dir) {
            nestedFs.setWorkingDirectory(new_dir);
        }

        @Override
        public Path getWorkingDirectory() {
            return nestedFs.getWorkingDirectory();
        }

        @Override
        public boolean mkdirs(Path f, FsPermission permission) throws IOException {
            return nestedFs.mkdirs(f, permission);
        }

        @Override
        public FileStatus getFileStatus(Path f) throws IOException {
            return nestedFs.getFileStatus(f);
        }

        @Override
        public long getLength(Path f) throws IOException {

            DFSClient.DFSInputStream open =  new DFSClient(nestedFs.getConf()).open(f.toUri().getPath());
            long fileLength = open.getFileLength();
            long length = nestedFs.getLength(f);

            if (length < fileLength){
                //We might have uncompleted blocks
                return fileLength;
            }

            return length;
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-05T19:19:54.217

我遇到了类似的问题，这是我修复它的方法：http: [//mail-archives.apache.org/mod_mbox/hadoop-common-user/201303.mbox/%3CCALtSBbY+LX6fiKutGsybS5oLXxZbVuN0WvW_a5JbExY98hJfig@mail.gmail.com%3E](http://mail-archives.apache.org/mod_mbox/hadoop-common-user/201303.mbox/%3CCALtSBbY+LX6fiKutGsybS5oLXxZbVuN0WvW_a5JbExY98hJfig@mail.gmail.com%3E)

# android - 在 Android 应用程序中读取日历数据

> ID：14377659
> 
> 赞同：0
> 
> 时间：2013-01-17T11:04:20.963
> 
> 标签：android, android-calendar

我需要显示一个列表视图，它将显示已通过 android 应用程序创建的日历的详细信息。即它将显示从日历中读取的标题、时间、活动地点等。提前致谢 ：）

# java - java中的cmd控制命令识别

> ID：14377663
> 
> 赞同：1
> 
> 时间：2013-01-17T11:04:31.697
> 
> 标签：java, testing, cmd

我只是想知道是否有一种方法，在从我的 java 脚本启动“控制 wuaucpl.cpl”后，可以识别它是否已经运行，或者它是否通过活动目录或安全设置被阻止。我曾尝试使用错误流启动它，但到目前为止，我还没有看到任何方法来实际判断它是否已打开并运行。通过类似的测试，我只需运行一个任务列表并在那里检查该进程是否正在运行，但它当然出现在 explorer.exe 下，因此无法分辨。

编辑：这也适用于任何 cmd 控制命令。EG：“控制台.cpl”或“控制 appwiz.cpl”

任何帮助将不胜感激 ！

谢谢。

# grails - 打印 Grails 生成的 Mysql 查询

> ID：14377664
> 
> 赞同：1
> 
> 时间：2013-01-17T11:04:32.443
> 
> 标签：grails, grails-orm

我想在执行之前或之后获取由 grails 生成的 Mysql 查询。

```
 trainingList = PrivateTraining.findAll(query,parameter) 
```

我想打印由上述语句执行的完整 mysql 查询。有什么要打印的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T11:10:13.160

将此属性设置在您的`DataSource.groovy`：

```
hibernate.show_sql=true 
```

例子：

```
environments {
    development {
        dataSource {
            /* ---------------------- */
            hibernate.show_sql = true
            /* ---------------------- */
            dbCreate = "update" // one of 'create', 'create-drop', 'update', 'validate', ''
            url = "jdbc:mysql://localhost:3306/my-db"
            // ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:18:40.143

将以下内容添加到您的日志记录配置中：

```
debug 'org.hibernate' 
```

# c# - 使用文本框输入更新 DataList

> ID：14377667
> 
> 赞同：1
> 
> 时间：2013-01-17T11:04:48.227
> 
> 标签：c#, asp.net, web-services, datalist

我有以下文本框 -

```
 <asp:TextBox ID="TextBox1" runat="server" AutoPostBack="true"></asp:TextBox>

 <asp:AutoCompleteExtender ID="AutoCompleteExtender1" runat="server"
 MinimumPrefixLength="1" ServiceMethod="PRETURN" ServicePath="WebService1.asmx"     
 TargetControlID="TextBox1"> </asp:AutoCompleteExtender> 
```

当用户键入`TextBox1`此内容时，会向服务方法发送请求`WebService1.asmx`并调用该`PRETURN`服务方法。因此，当用户键入时，textBox 会带来一个以用户键入的字母开头的字符串下拉列表。

我现在有以下 DataList -

```
<asp:DataList runat="server" ID="pTextBox" >

<ItemTemplate>

<asp:CheckBox ID="CheckBoxPN" runat="server"  Checked='false' OnCheckedChanged="CheckBoxPN_CheckedChanged" AutoPostBack="true" />
<asp:TextBox ID="profileTextBox" runat="server" Text='<%# Container.DataItem.ToString() %>'></asp:TextBox>

</ItemTemplate>
</asp:DataList> 
```

在哪里`Page_Load`——

```
WebService1 ws = new WebService1();
pTextBox.DataSource = ws.Method();
pTextBox.DataBind(); 
```

我的问题是我想将 textBox 的功能与 DataList 结合起来。这样，当用户在文本框中键入内容时，DataList 中的行将被更新，而不是文本框具有下拉列表。因此，例如，如果在`profileTextBox`用户键入时 Text 中的 Text 不包含 TextBox1 中的前缀文本，它就会消失。为用户留下与其搜索相关的行列表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:51:41.220

其他人已经完成了类似于 GridView 控件的操作，使用 JQuery 根据过滤条件显示/隐藏行。[此处](http://net.tutsplus.com/tutorials/javascript-ajax/using-jquery-to-manipulate-and-filter-data/)提供了一种应该很容易适应 DataList 的解决方案。

# android - Android-如何在简历中检测到我的应用被 VM 杀死？

> ID：14377668
> 
> 赞同：6
> 
> 时间：2013-01-17T11:04:51.683
> 
> 标签：android, nullpointerexception, kill-process

在我的应用程序中，当用户按下 HOME 键并在一段时间后返回应用程序时，我的应用程序会在各个位置和活动上给出 NullPointerExceptions。我知道我的应用程序正在被操作系统杀死以释放一些资源。现在我希望当用户再次回到应用程序并且应用程序之前被杀死时，我怎样才能检测到我的应用程序被杀死以便我可以重新加载不同的资源？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T13:15:17.650

当`onCreate (Bundle savedInstanceState)`被调用时，检查它`savedInstanceState`不为空。如[onCreate](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)所述：

> *savedInstanceState* 如果 Activity 在之前被关闭后被重新初始化，那么这个 Bundle 包含它最近在 onSaveInstanceState(Bundle) 中提供的数据。注意：否则为空。

另请参阅[onSaveInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)，它不是正常生命周期的一部分，但在活动被杀死之前被调用。

注意：如果用户执行 A ----> B ----> C --back--> B ----> C，第二次创建 C 时传递的包将是`null`，因为它是新的例如，被杀死后重新创建的不一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T11:10:23.867

基本上：看这个页面上的图片：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

![在此处输入图像描述](../Images/ea4ab5de7aeeee9e27095fdafda432f6.png)

`onCreate`在不同情况下调用的各种函数是`onStart`和`onResume`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-04T10:04:19.007

我的建议是：实现你自己的`Application`，如果`onCreate()`被调用，应用程序在后台被杀死

# objective-c - 编辑 UITableView 时如何防止弹出删除按钮？

> ID：14377671
> 
> 赞同：3
> 
> 时间：2013-01-17T11:04:54.487
> 
> 标签：objective-c, uitableview

通常当用户在 UITableView 的编辑模式下单击删除按钮时，会弹出一个删除按钮要求确认。

我不想要那个。

我如何摆脱那种确认仪式？

![在此处输入图像描述](../Images/230b181c5344ce90edc8c5c266193de2.png)

我希望我的删除按钮像加号按钮一样工作。只需添加。只需删除。无需确认。至少在风险较低的情况下不会，例如在我的程序的一个问题中，删除只会将表标记为在退出编辑模式时不可见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T11:08:46.270

删除确认弹出窗口未内置在 UITableView 或 UITableViewCell 中（滑动删除功能）。这样的东西必须手动添加，因此很容易摆脱它：不要添加弹出窗口:)

如果你在维护别人的代码，搜索这个方法：

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return isEditable ? YES : NO;
} 
```

方法文档说：

> 该方法允许委托排除个别行被视为可编辑。可编辑行在其单元格中显示插入或删除控件。如果未实施此方法，则假定所有行都是可编辑的。不可编辑的行会​​忽略 UITableViewCell 对象的 editingStyle 属性，并且不会对删除或插入控件进行缩进。可编辑但不想显示插入或删除控件的行可以从 tableView:editingStyleForRowAtIndexPath: 委托方法返回 UITableViewCellEditingStyleNone。

这是 Apple 文档[Inserting and Deleting Rows and Sections](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/TableView_iPhone/ManageInsertDeleteRow/ManageInsertDeleteRow.html)的链接，用于更复杂的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T05:27:14.547

你的数据源是什么？如果它是一个数组，为什么不从数组中删除选定的项目，然后刷新uitableview？

# nginx - nginx proxy_pass 配置

> ID：14377677
> 
> 赞同：2
> 
> 时间：2013-01-17T11:05:12.407
> 
> 标签：nginx, virtualhost, proxypass

我需要将几个 url 代理到不同的主机。实际上，我使用具有不同端口的同一主机来测试我的 nginx 配置。这是我的虚拟主机定义：

```
server {
    listen       8081;
    server_name  domain.com;

    location /Plasmid/ {
        proxy_pass   http://localhost:8000/Plasmid/;
    }

    location /_community/ {
         proxy_pass   http://localhost:8082/comments_api/ ;
    }

    location / {
        # rewrite cq_user_authenticated===(.*)/(.*)/iuuid=(.*)/commenti.html$  /Plasmid/comments/legacy/$3/$1 ;
        # rewrite querystring===(.*)$  /Plasmid/comments/legacy/$1 ;
        # rewrite cq_user_authenticated===([^&]*)&/.*uuid=([^/]*) /comments_api/legacy/$2 ;
        # rewrite userdetails(.*)  /Plasmid/comments/user_details ;
        root   html;
        index  index.html index.htm;
    }

} 
```

当然，我的主机文件有 domain.com 的映射

当我调用 url: [http://domain.com:8081/Plasmid/default/page/12](http://domain.com:8081/Plasmid/default/page/12)我得到一个 http 404

如果我从配置中删除第二个位置：

```
location /_community/ {
    proxy_pass   http://localhost:8082/comments_api/ ;
} 
```

我得到了我想要的资源，但是由于托管在不同的平台上，因此遗漏了某些部分：

```
[error] 1033#0: *1 open() "/usr/local/Cellar/nginx/1.2.6/html/_community/content 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:49:06.123

做一点改变：

```
location ^~ /Plasmid/ {
   proxy_pass    http://localhost:8000/Plasmid/;
}

location ^~ /_comunity/ {
   proxy_pass    http://localhost:8082/comments_api/; 
```

这是为什么？因为`^~`意味着从您请求页面*开始*并且在您请求页面时开始：

[http://domain.com:8081/Plasmid/default/page/12](http://domain.com:8081/Plasmid/default/page/12)

它符合该规则。在您的配置中，您没有使用任何标记，如下所示：

```
location /anylocation 
```

看起来你的 nginx 更喜欢规则

```
location / { 
```

比

```
location /Plasmid 
```

和

```
location /_comunity 
```

因为它使用 root 指令并在文件夹中搜索 _community/content `html`（当您收到错误消息时）。

换句话说`^~`，具有比 更高的优先级`no mark`。也可以帮助的一件事是`break`在每个指令之后添加`proxy_pass`指令；

# jsf - 刷新页面后如何显示模型弹出窗口？

> ID：14377682
> 
> 赞同：0
> 
> 时间：2013-01-17T11:05:19.303
> 
> 标签：jsf, user-interface, jsf-2, primefaces, popup

刷新时模型弹出窗口正在关闭（按 F5 后）页面请告诉我刷新后如何显示它。我正在使用素面

```
<p:confirmDialog  closable="false" id="sessionExpiredDlg" message="Your session expired."  
                 header="#{msgs['confirmDialog.initiatingDestroyProcess.label']}" 
                 severity="alert" widgetVar="sessionExpiredConfirmation" style="z-index: 25000">
    <p:commandButton id="confirmRouteDel" value="Ok"
                                   oncomplete="sessionExpiredConfirmation.hide()" 
                                   actionListener="#{login.logoutAction}"/>

</p:confirmDialog> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:20:16.713

当会话过期时，您必须向响应添加一些信息，例如 cookie “sessionExpired=true”，并将其与响应一起发送给您的客户端。 然后，当您在对象中 找到该 cookie 时，您必须每次
都渲染。我了解您希望用户按下确认按钮，这是通过弹出窗口的唯一方法，是吗？因此，当用户按下按钮时，只需从请求中替换 cookie（例如，通过将其到期日期更改为某个过去的值），并且下一个用户请求 cookie 不会出现，您的应用程序也不会显示该弹出窗口。 通过从请求中替换，我的意思是这样的：`confirmDialog``HttpServletRequest`

`Cookie`

```
Map<String, Object> requestCookieMap =
    FacesContext.getCurrentInstance().getExternalContext().getRequestCookieMap();
Cookie sessionExpiredCookie = (Cookie) requestCookieMap.get("sessionExpired");
sessionExpiredCookie.setMaxAge(0); 
```

# entity-framework - 在所选文件中找不到派生自 DbContext 的可构造类型（EF Power Tools Beta 2 + VS 2012））

> ID：14377687
> 
> 赞同：3
> 
> 时间：2013-01-17T11:05:44.763
> 
> 标签：entity-framework

我将 VS 2012 (Ultimate) 与 Entity Framework Power Tools Beta 2 和实体框架 5.0 (使用 nuget) 一起使用。

我创建了一个 DbContext 类。当我在解决方案资源管理器中右键单击相应文件并选择“实体框架/查看实体数据模型（只读）”时，出现错误“在所选文件中找不到源自 DbContext 的可构造类型。 " VS 2012 中的错误。

我尝试了[http://blogs.msdn.com/b/adonet/archive/2012/04/09/ef-power-tools-beta-2-available.aspx](http://blogs.msdn.com/b/adonet/archive/2012/04/09/ef-power-tools-beta-2-available.aspx)中描述的解决方法，但我的注册表不包含密钥“HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0_Config\BindingPaths\”中的“{BFC24BF4-B994-4757-BCDC-1D5D2768BF29}”。

重新启动 Visual Studio 并执行相同步骤后，会弹出一个对话框，指示“调用目标已引发异常”。

顺便提一句。我能够执行从我的 DbContext 创建数据库的测试应用程序，并且 O 可以在该数据库中插入/删除/等数据。

任何帮助/提示将不胜感激。

亲切的问候，梅林

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T23:39:24.503

卸载*Visual Studio 2012 的 VSCommands*应该可以让一切恢复正常。不幸的是，这个扩展不能很好地与 EF Power Tools 配合使用。它将自己的 EntityFramework.dll 版本加载到主 VS 进程中，这会阻止 DbContext 发现逻辑正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T07:28:56.983

正如 Brice 所提到的，这可能是由与 Visual Studio Extensions 的兼容性问题引起的。最新版本的 VSCommands 修复了这个问题。您可以从[Visual Studio Gallery](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)获得 if 。

非常感谢 Brice 和 EF 团队帮助诊断问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-15T16:10:01.310

即使没有其他答案中列出的扩展名，我也会间歇性地看到这个错误，我发现删除解决方案的本地 .suo 文件是有效的——尽管这在很大程度上是一个 when-all-else-fails 的答案！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-01T21:16:36.930

我在使用不同的 Visual Studio 扩展时遇到了类似的问题。就我而言，它是 Visual Studio Tools for Git（版本 1.0.0.0）。

我刚刚禁用了扩展，重新启动了 VS2012，然后我就可以使用代码优先 EF 项目生成模型了。

# ruby-on-rails - 查询 Mongo DB - 在嵌入式类中使用 IN 过滤器

> ID：14377699
> 
> 赞同：0
> 
> 时间：2013-01-17T11:06:44.433
> 
> 标签：ruby-on-rails, mongodb, mongoid

考虑以下文档结构（**用户**）

```
id user_id phone

1  Balan   {0   - id = adsfasf232332  - number = 908767778}, 
                       ...........{1   - id = adsf343fadfasd - number = 22232323}
2  Kumar   {0   - id = adsfasf24442  - number = 2727272} 
```

什么是 Mongo 模型查询等价于以下查询

```
select * from  users where user_id = "Balan" and phone_number in (22232323) 
```

我尝试了以下查询，但没有帮助

```
temp = User.where(user_id: => "Balan").where('phone.number' => "22232323") 
```

我究竟做错了什么？

**注意：Phone 类嵌入在 User 类中。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:03:16.737

这是解决方案：

```
temp = User.where(user_id: => "Balan",:'phone.number'.in => ["22232323"]) 
```

或者如果你想以不同的方式运行

```
temp = User.where(user_id: => "Balan").where(:'phone.number'.in => ["22232323"]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T01:55:13.667

如果您使用的是 Mongoid 3，您可以说

```
temp = User.where(user_id: 'Balan').in('phone.number' => ['22232323']) 
```

此查询语法由 Origin 提供（现在是 Mongoid 的依赖项）。[[1]](http://mongoid.org/en/origin/docs/selection.html)

# c# - 表单打开时如何绘制？

> ID：14377702
> 
> 赞同：0
> 
> 时间：2013-01-17T11:06:50.143
> 
> 标签：c#, windows, forms, background

您好，这可能是一个愚蠢的问题，但我无法在这里找出问题..这是我用单个块填写表格的代码：

```
 private void drawBackground()
{
    Graphics g = genPan.CreateGraphics();
    Image Block = Image.FromFile(@"C:\Users\Administrator\Desktop\movment V1\movment V1\images\BrownBlock.png");
    float recWidth = Block.Width; 
    // rectangle width didnt change the name from previous code, it's picture width.

    float recHeight = Block.Height;
    // rectangle Heightdidnt change the name from previous code, it's picture Height.

    float WinWidth = genPan.Width; // genPan is a panel that docked to the form

    float WinHeight = genPan.Height;

    float curWidth = 0; //indicates where the next block will be placed int the X axis
    float curHeight = 0;//indicates where the next block will be placed int the Y axis

    while ((curHeight + recHeight) <= WinHeight)
    {
        if (curWidth >= WinWidth / 3 || curWidth <= WinWidth / 1.5 ||
            curHeight >= WinHeight / 3 || curHeight <= WinHeight / 1.5)
        {
            g.DrawImage(Block, curWidth, curHeight, recWidth , recHeight );
        }
        curWidth += recWidth;
        if ((WinWidth - curWidth) < recWidth)
        {
            curWidth = 0;
            curHeight += 50;
        }
    }
} 
```

如果我通过一个按钮启动这个函数，它会工作得很好。但是如果我在 InitializeComponent(); 之后启动函数 构造函数或 FORM 显示事件中的方法，当按钮仍在表单上时，它将执行 func 但是块背景将不可见，但灰色将是。但如果我删除按钮，背景将可见。=\

我不明白为什么会发生这种情况，如何解决它以及我做错了什么..谁能解释一下..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:12:58.070

如果您只需要根据某些条件/动作/用户交互来绘制背景......

将此函数的*调用*放入表单 OnPaint 方法中，并*仅*在某些布尔变量等于时 启用它`true`。只有在单击按钮时，该布尔值才会变为真。

一些假设的例子：

```
protected override OnPaint(...) //FORMS ONPAINT OVERRIDE
{
    if(needBackGround) //INITIAL VALUE AT STARTUP IS FALSE
       drawBackground(); 
} 

public void ButtonClickHandler(...)
{
    needBackGround= !needBackGround;  //INVERSE THE VALUE OF BOOLEAN
} 
```

这显然只是一个给你提示的片段，而不是真正的代码。您可能还需要面对其他问题，例如：闪烁、处理大小调整、性能……但这只是一个开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:30:57.427

使用当前的逻辑，您无法真正做到这一点。问题是控件（`genPan`在您的情况下为面板）具有自己的 Paint 事件，当调用该事件时，会覆盖您在其上使用的任何图形。

即使您在按钮中单击它，它也仅在重新绘制表单之前起作用，例如尝试聚焦其他窗口并再次聚焦您的表单：您将丢失您绘制的内容。

做这些事情的正确方法是编写自己的类，该类继承自一些基本控件（在您的情况下为 Panel），然后覆盖其 OnPaint 事件并在那里绘制任何您想要的东西。

所以首先，有这样的课程：

```
public class BlockBackgroundPanel : Panel
{
    protected override void OnPaint(PaintEventArgs e)
    {
        Graphics g = e.Graphics;
        Image Block = Image.FromFile(@"C:\Users\Administrator\Desktop\movment V1\movment V1\images\BrownBlock.png");
        float recWidth = Block.Width; 
        //rest of your code, replace "genPan" with "this" as you are inside the Panel
    }
} 
```

然后在您的*.Designer.cs*文件中（您可以在 Studio 中打开它）更改代码，使其`genPan`成为您的新类实例：

```
private BlockBackgroundPanel genPan;
//...
this.genPan = new BlockBackgroundPanel (); 
```

# ruby-on-rails - rails - 数据库分片

> ID：14377703
> 
> 赞同：0
> 
> 时间：2013-01-17T11:06:59.747
> 
> 标签：ruby-on-rails, octopus

我有以下代码将数据从数据库 A (shard_A) 中的图像表复制到数据库 B (shard_B) 中的另一个表

这是两个数据库中图像表的结构

```
Image table (shard_A)   -   Image table (shard_B)
- image_id              -   image_id 
- submission_fk         -   sub_fk 
- image_desc            -   img_desc 
```

2张表的列名略有不同

```
 @test_shard_A = Image.using(:shard_A).find(:first, :conditions => ["submission_fk =?", @sub.id ])

  Octopus.using(:shard_B) do

    Image.create(
    :image_id => @test_shard_A.image_id,
    :sub_fk => @test_shard_A.submission_fk,
    :img_desc => @test_shard_A.image_desc
    ) do |primary|
    primary.img_id = @test_shard_A.image_id
    end

  end 
```

以上是给我以下错误信息：

```
unknown attribute: sub_fk 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:15:18.627

ActiveRecord 在对表执行第一个查询时加载元数据（表信息）。当您使用对 shard_A 的查询启动应用程序时，它会检查表结构，并根据它使用 submit_fk 构造您的 Image 类。

当您更改分片时，它不会再次检查表结构，因此它假设有一个sub_fk，并且假设没有sub_fk，因为它不知道这一点。

我建议您对所有分片使用相同的结构，但如果您不能这样做，您可能会强制 ActiveRecord[重新加载表信息](http://apidock.com/rails/ActiveRecord/ModelSchema/ClassMethods/reset_column_information)- 我从未使用过 Octopus，但我认为它会起作用：

```
Image.reset_column_information 
```

请注意，它会降低应用程序的性能，因为重新加载元数据是一个缓慢的操作。

# jsf - 在页面更改后保持丰富：popupPanel 打开

> ID：14377706
> 
> 赞同：0
> 
> 时间：2013-01-17T11:07:07.310
> 
> 标签：jsf, jsf-2, richfaces

提交表单并加载另一个页面后，是否可以保持 rich:popupPanel 的打开状态？例如，转到[richfaces 展示](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=popup&sample=simplePopup&skin=blueSky)并单击“调用弹出窗口”，然后浏览其他地方（使用“模态面板示例”或菜单之类的选项卡）。提交表单后，弹出窗口将立即消失。我想让它“生存”页面更改（并可能保持在同一位置）。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:03:55.020

是的。您只需将属性设置`show`为在下一个请求中评估为 true 的值：

```
<rich:popupPanel id="popup" show="#{someBean.showPopup}" ...> 
```

然后，您只需要确保 getShowPopup 方法`true`在需要显示弹出窗口时返回的属性。

从[文档](http://docs.jboss.org/richfaces/latest_4_X/vdldoc/rich/popupPanel.html)：

> 显示 | 布尔值 | 如果此属性的“true”值使模式面板默认打开。默认值为“假”

另请参阅[有关 rich:popupPanel 的本节](http://docs.jboss.org/richfaces/latest_4_2_X/Component_Reference/en-US/html/chap-Component_Reference-Panels.html#sect-Component_Reference-richpopupPanel-Showing_and_hiding_the_pop-up)。

# drupal-modules - 如何在 drupal 8 中使用 RESTful Web 服务？

> ID：14377711
> 
> 赞同：0
> 
> 时间：2013-01-17T11:07:26.940
> 
> 标签：drupal-modules, drupal-8

我正在构建一个平台，该平台使用 Drupal 的 Web 服务功能在任何平台上提供内容。在 Drupal 6 和 7 中，传统的 HTTP Web 服务都很好。但在新版本中，它决定通过使用 RESTfull web-service 将其带入下一个级别的 web-service。我的问题是如何自定义此 RESTfull Web 服务以使其响应来自任何其他平台的请求？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-17T11:13:54.147

转到站点配置并在那里单击它。然后选择所有您想要的列表。然后在上面抛出指令..

# apache - 如何从不同的文件中读取 url 并设置不同的爬取深度？

> ID：14377712
> 
> 赞同：2
> 
> 时间：2013-01-17T11:07:41.203
> 
> 标签：apache, lucene, nutch, web-crawler

我想有两个文件 seed.txt 和 seed2.txt 并且在每个文件中都有不同的 url。在seed.txt 中，我想成为前任的爬行深度。2和seed2.txt中的深度为3。
有什么解决方案或解决方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:01:58.767

> ***我想有两个文件 seed.txt 和 seed2.txt 并且在每个文件中都有不同的 url***

您需要按原样维护种子文件名；不要将其重命名为 seed2 等。相反，您可以创建两个单独的 urls 目录，其中每个包含不同的 url 集的种子文件。前任。文件夹“urls1”将有一个seed.txt，另一个文件夹“urls2”将有另一个带有一组不同url 的seed.txt。但也要确保创建单独的爬取目录，爬取数据将进入（例如，在“urls1”文件夹中为seed.txt创建一个“crawl1”目录，为“urls2”中的“seeds.txt”创建一个“crawl2”目录.

> ***在seed.txt 中，我想成为前任的爬行深度。2 并且在 seed2.txt 中深度为 3。***

您应该在抓取命令中指定深度值，而不是在seed.txt 中。在您的情况下，如果在同一台机器上运行，请在单独的终端中运行以下命令（前提是您的 nutch/hadoop 配置支持并行运行多个爬网作业。

*   bin/nutch 抓取 urls1 -dir crawl1 -depth 2

*   bin/nutch 抓取 urls2 -dir crawl2 -depth 3

希望这有帮助！

# sql - 访问枢轴百分比

> ID：14377714
> 
> 赞同：0
> 
> 时间：2013-01-17T11:07:45.470
> 
> 标签：sql, ms-access

我只是想知道 Access 是否可以按人计算每天的销售额百分比。我的表如下所示：

```
Salesman    Sales   Date1
Michael     25      Jan 12
Fred        16      Jan 12
Michael     17      Jan 13
..... 
```

我想得到这样的东西：

```
Salesman     Jan 12    Jan 13
Michael      60.96%    50%
Fred         39.04%    50% 
```

我只能通过以下方式获得销售数量：

```
TRANSFORM Sum(Sales)
SELECT Trouble
FROM Table1
GROUP BY Trouble
PIVOT Date1 
```

为了获得百分比，我尝试使用子查询获取总数，但我收到一个错误，即不能在子查询中使用组函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:29:42.320

不能在子查询中引用交叉表查询，但可以引用已保存的交叉表：

```
SELECT xtab.Salesman, 
       Format([jan 16]/DSum("sales","aa","date1='jan 16'"),"Percent") AS Jan16, 
       Format([Jan 17]/DSum("sales","aa","date1='Jan 17'"),"Percent") AS Jan17
FROM xtab 
```

如果这些查询定期更改，则使用 VBA 构建这些查询要容易得多。

# eclipse - Eclipse IDE 不会自动解析类名

> ID：14377716
> 
> 赞同：2
> 
> 时间：2013-01-17T11:08:01.480
> 
> 标签：eclipse, import, jar

我有一个 Jar，我已将其包含在我的项目中。

当我通过专门化全名从该项目中导入一个类时，因为`org.eclipse.nebula.widgets.nattable.edit.editor.ICellEditor`该类被很好地导入。

编写`ICellEditor`和执行“组织导入”不起作用。执行“Open Type”并键入`ICellEditor`找到正确的类，因此 Eclipse 知道这个 JAR amd 类；但没有显示“组织导入”类。

有人知道可能是什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:21:00.970

确保您的 jar 路径包含在**CLASSPATH**中。当您给出如下所示的完全限定名称时，不需要**CLASSPATH 。**（当您明确给出完整路径时）。

```
org.eclipse.nebula.widgets.nattable.edit.editor.ICellEditor 
```

因此，如果您希望在 eclipse 中的导入正常工作：

因此，要么将此 jar 放在现有的 jar 目录中，要么确保将 jar 路径添加到**CLASSPATH**中。

# apache - Apache mod_rewrite 接受语言子域重定向

> ID：14377717
> 
> 赞同：2
> 
> 时间：2013-01-17T11:08:04.757
> 
> 标签：apache, mod-rewrite

我有一个包含 3 种语言的多语言网站，我正在使用以下规则将请求重定向到基于浏览器接受语言的正确版本的网站。

```
#swedish
RewriteCond %{HTTP:Accept-Language} ^sv.*$ [NC]
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /sv [L,R=301]

#norwegian bokmal
RewriteCond %{HTTP:Accept-Language} ^nb.*$ [NC]
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /nb [L,R=301]

#norwegian
RewriteCond %{HTTP:Accept-Language} ^no.*$ [NC]
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /nb [L,R=301]

#all others go to english
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /en [L,R=301] 
```

我需要升级此规则以执行相同的重定向保留子域

```
Example for a norwegian request:
www.domain.com/subdomain -> www.domain.com/nb/subdomain 
```

我怎样才能做到这一点？

我感谢@faa 帮助我解决当前的规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T00:18:14.097

## 更新

### 问题描述

关于您评论中的*页面与子域*问题，在这种特定情况下是无关紧要的。事实是您问题中的传入 URL 是**:** `www.domain.com/subdomain`并且，除了名称之外，`/subdomain`显然是一个页面。

一个真正的**子域**确实是一个域，它是另一个域的一部分，并且包含它的 URL 格式类似于`subdomain.domain.com`，所以我没有混淆。

还不够清楚的是如何处理重定向。根据您的问题，但用整个路径替换“子域”，这里有一些例子：

1.  `www.domain.com/`应该去 `www.domain.com/LangCode/`，（以前的工作重定向）

2.  `www.domain.com/page`应该去 `www.domain.com/LangCode/page`

3.  `www.domain.com/page1/page2/page3/etc/`应该去 `www.domain.com/LangCode/page1/page2/page3/etc`。这种可能性不存在问题，但最终可能需要。

在这些情况下，传入和重定向 URL 中的页面应该具有相同的名称，但是，尽管在传入 URL 中不必存在，但在重定向 URL 中，页面必须存在，因此加载默认脚本（index.php 或index.html，例如）来处理请求。

这意味着，每个页面中都必须有一个脚本进行重定向。我会说每种语言至少有 2 个。

据我了解，这就是问题和补充评论所表明的，但这似乎不是一种实用的方法。

### 建议的解决方案

更好的方法可能是在根文件夹中处理所有请求的单个脚本。这是一个可以通过示例更好地描述的想法：

1.  `www.domain.com/`始终显示在浏览器的地址栏中，但在内部转到 `www.domain.com/lang_handler.php?lang=sv`或

2.  `www.domain.com/page1/`始终显示在浏览器的地址栏中，但在内部进入`www.domain.com/lang_handler.php?lang=sv&target_page1=page1`

这可以在 .htaccess 中使用 mod_rewrite 指令来实现。这是一个例子：

```
RewriteEngine On
RewriteBase  /

# Set managed languages here, except default (en)
RewriteCond %{HTTP:Accept-Language} ^(sv|ne|no).*$ [NC]

# Replace the names of the script and the parameters in the next 2 lines
RewriteCond %{REQUEST_URI} !lang_handler\.php              [NC]
RewriteRule ^([^/]+)?/?$  lang_handler.php?lang=%1&target_page1=$1  [L,QSA]

# If no match, set English
# Replace the names of the script and the parameters in the next 2 lines
RewriteCond %{REQUEST_URI}  !lang_handler\.php             [NC]
RewriteRule ^([^/]+)?/?$  lang_handler.php?lang=en&target_page1=$1  [L,QSA] 
```

上述规则集静默映射

`http://www.domain.com/`或者`http://www.domain.com/page1`

至

`http://www.domain.com/lang_handler.php?lang=LangCode&target_page1=page1`

在哪里或默认情况下`LangCode`。`sv` `ne` `no``en`

此示例仅适用于 1 页或无页。虽然可以处理任意数量的页面，但必须相应地修改规则。必须将更多参数和正则表达式组添加到 RewriteRules。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:10:55.233

1美元应该可以解决问题。

```
RewriteCond %{HTTP:Accept-Language} ^no.*$ [NC]
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /nb/$1 [L,R=301] 
```

# java - 将 2 个值从一个活动传递到另一个活动

> ID：14377718
> 
> 赞同：3
> 
> 时间：2013-01-17T11:08:09.590
> 
> 标签：java, android, android-intent

我对安卓很陌生。我正在尝试开发一个用于练习的登录表单，但我无法将 2 个值传递和显示给另一个活动

```
Intent intent = new Intent(this, Success.class);
        EditText edituser = (EditText) findViewById(R.id.userinput);
        EditText editpass= (EditText) findViewById(R.id.passinput);
        String username = edituser.getText().toString();
        String password = editpass.getText().toString();

        intent.putExtra(EXTRA_USER, username);
        intent.putExtra(EXTRA_PASSWORD, password);
        startActivity(intent); 
```

目标活动是

```
 Intent intent = getIntent();
    String username = intent.getStringExtra(MainActivity.EXTRA_USER);
    String password = intent.getStringExtra(MainActivity.EXTRA_PASSWORD);

    // Create the text view
    TextView userView = new TextView(this);
    TextView passView = new TextView(this);
    userView.setTextSize(40);
    userView.setText(username);

    passView.setTextSize(40);
    passView.setText(password);

    // Set the text view as the activity layout
    setContentView(userView);
    setContentView(passView); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T11:11:12.310

您的问题是，当您`setContentView()`第二次调用时，您会从屏幕上删除旧视图。

尝试将您的视图添加到像线性布局这样的视图组，然后将其添加到屏幕而不是单个视图。

就像是：

```
LinearLayout ll = new LinearLayout(this);
ll.addView(userView);
ll.addView(passView);
setContentView(ll); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T11:11:10.690

您仅获得第二个值，因为您设置了两次视图..第二个覆盖了用户名..

您可以`addContentView`改用，或者创建一个包含 2 个文本视图的 xml 并使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T11:14:35.690

使用另一个布局并在第二个布局中设置意图值....

```
setContentView(R.layout.anotherlayout);

TextView user = (TextView) findViewById(R.id.usertext);
TextView pass= (TextView) findViewById(R.id.passtext);

Intent intent = getIntent();
String username = intent.getStringExtra(MainActivity.EXTRA_USER);
String password = intent.getStringExtra(MainActivity.EXTRA_PASSWORD);

user.setText(username);
pass.setText(password); 
```

# licensing - 我可以在 GPL v2+ 下发布 GPL v1 程序的修改版本吗？

> ID：14377725
> 
> 赞同：0
> 
> 时间：2013-01-17T11:08:57.667
> 
> 标签：licensing, gpl

无论出于何种原因，我想修改由其他人编写的在 GPL 版本 1 下发布的开源程序。我熟悉 GPL v2+，我更愿意在 GPL v2+ 下发布我的这个程序的修改版本。这是允许的还是有什么需要考虑的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:16:33.440

GPL v1 明确指出：

> 每一个版本都有不同的版本号。如果本程序指定了适用于它的许可证的版本号和“任何更高版本”，您可以选择遵循该版本或自由软件基金会发布的任何更高版本的条款和条件。如果本程序未指定许可证的版本号，您可以选择自由软件基金会曾经发布的任何版本。

因此，如果程序说“在 GPL 下发布”或“在 GPL v1 或任何更高版本下发布”，您可以使用任何版本的 GPL 重新分发它。

否则，程序会被 GPL v1 卡住。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:16:54.403

GPLv1[说](http://www.gnu.org/licenses/old-licenses/gpl-1.0.html)：

> *2\. 您可以修改您的一个或多个程序副本或其任何部分，并根据上述第 1 段的条款复制和分发此类修改，前提是您还执行以下操作：*
> 
>  *[...]
> 
> b)**使**您分发或发布的全部或部分包含本程序或其任何部分的所有作品，无论是否经过修改，都**根据本通则的条款免费****许可**给所有第三方**公共许可**（您可以选择向部分或所有第三方授予保修保护，但您可以自行选择）。*

 *因此，如果您在 GPLv1 下获得原始源代码，则必须在“此许可证”下发布您的修改（如果您完全发布它们），即相同的 GPLv1。至少这是我的阅读。*

# c# - System.EntryPointNotFoundException CreateActCtx 错误

> ID：14377727
> 
> 赞同：0
> 
> 时间：2013-01-17T11:09:02.440
> 
> 标签：c#, mono, entrypointnotfoundexcept

我正在尝试用单声道制作 C# 程序，所以我可以很容易地将它移植到 Windows、Linux 和 Mac。

但我有这个错误：

```
System.EntryPointNotFoundException has been thrown
CreateActCtx

System.EntryPointNotFoundException: CreateActCtx
  at (wrapper managed-to-native) WebKit.NativeMethods:CreateActCtx (WebKit.NativeMethods/ACTCTX&)
  at WebKit.ActivationContext.Initialize () [0x00000] in <filename unknown>:0
  at WebKit.WebKitBrowser..ctor () [0x00000] in <filename unknown>:0
  at (wrapper remoting-invoke-with-check) WebKit.WebKitBrowser:.ctor ()
  at TW_Overview.globalVars..cctor () [0x00000] in <filename unknown>:0 
```

这是一些代码：

```
public static void Main (string[] args)
        {
            Application.Init ();
            MainWindow win = new MainWindow ();
            startUp();
            win.Show ();
            Application.Run ();
        }

        public static globalFunc globalfunctions = new globalFunc();

        public static void startUp ()
        {
            while (!globalfunctions.isLoggedIn()) {
                globalfunctions.showLogin();
            }
        } 
```

这是 globalfunc （它的一部分）

```
public Boolean isLoggedIn()
        {
            if (globalVars.isLoggedIn == true)
            {
                return true;
            }
            return false;
        } 
```

给出错误的行是：

```
while (!globalfunctions.isLoggedIn()) { 
```

我在 C# Windows Visual Studio 中得到了这种方法，并且它在那里工作。所以我不明白为什么它不起作用。

希望各位大侠知道问题出在哪里...

**编辑 1**

我已经下载了最新版本的 webkit.net[链接](http://webkitdotnet.sourceforge.net/)，解压并将所有的 dllś 和文件夹放在我程序的调试文件夹中。我还在调试文件夹中添加了对 dll 的引用。

我在任何地方都添加了这一行：

```
using WebKit; 
```

所以我不知道问题是什么。也许是静态而不是静态的东西？？？这部分我不是很擅长……

**编辑 2**

问题是这不支持 bij Mono。经过一番搜索并查看是否可以将 webkit 移植到单声道后，我遇到了一个已经为我们做到这一点的网站。

[https://live.gnome.org/WebKitGtk](https://live.gnome.org/WebKitGtk)

我现在无法测试它，但我认为它应该可以工作。如果没有，那么如果我找到解决方案，我会在这里搜索和更新。

# android - 尝试从服务器获取 xml 响应时 Android 中的 nullPointerException

> ID：14377728
> 
> 赞同：-2
> 
> 时间：2013-01-17T11:09:04.697
> 
> 标签：android

我正在开发一个星座应用程序，当点击图像时应该向服务器发送请求并获得 xml 响应。但我没有得到任何 xml 响应。我正在使用 GET 方法。请帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:11:08.197

不得在主 UI 线程上执行网络操作。您可以使用`AsyncTask`在另一个线程中执行网络操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:15:20.473

选项1：

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
 StrictMode.setThreadPolicy(policy); 
```

但老实说，最好不要使用第一个选项，而是使用第二个选项。

//================================================= ============================
选项2：

使用本教程制作正确的 ASyncTask：[http ://www.elvenware.com/charlie/development/android/SimpleHttpGetThread.html](http://www.elvenware.com/charlie/development/android/SimpleHttpGetThread.html)

//================================================= ============================ 使用 ASyncTask 作为最终任务（选项 2）。

# css - 使用 transform 属性在所有浏览器中旋转 div 的内容不会顺利

> ID：14377738
> 
> 赞同：0
> 
> 时间：2013-01-17T11:09:36.553
> 
> 标签：css, transform

我正在使用`transform`CSS 属性来旋转文本，但在不同的浏览器中似乎有所不同，我用不同的字体尝试过它并不流畅。

是他们的一种方式，我可以使它顺利。[图片](https://i.stack.imgur.com/92f8M.jpg)链接

jsFiddle[示例](http://jsfiddle.net/RmYyR/1/)

![在此处输入图像描述](../Images/18a160045ffda54c8e70fce7c133c27c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:20:30.740

在 Chrome 中消除 CSS 转换中锯齿状边缘的一个好技巧是添加 CSS 属性 -webkit-backface-visibility，其值为 hidden。这就是我为你准备的一切。使它更平滑一些。

# android - Android虚拟设备基本设置列表？

> ID：14377746
> 
> 赞同：-1
> 
> 时间：2013-01-17T11:10:08.030
> 
> 标签：android, avd

有谁知道我有任何网站有完整的设备列表（三星、Kindle、Nexus，...）及其配置 AVD 的设置？

谢谢！

胡安卡洛斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:30:22.527

如果您使用最新版本的 Android SDK，则有设备定义部分。在那里，您可以找到设备列表 android 及其设置

# java - 将java web maven项目导入eclipse的正确方法是什么？

> ID：14377750
> 
> 赞同：0
> 
> 时间：2013-01-17T11:10:18.047
> 
> 标签：java, eclipse, servlets, maven-2, web.xml

抱歉，我真的是 eclipse 和 java servlet 的新手。我读过这个问题 [Can Eclipse import a Maven Web project as a "Dynamic Web Application"?](https://stackoverflow.com/questions/6950103/can-eclipse-import-a-maven-web-project-as-a-dynamic-web-application) ，对我真的很有帮助。

我确实将项目导入为现有的 Maven 项目。 ![在此处输入图像描述](../Images/073c31d5b7363d951ee84c5df325813a.png)

我已经更改了项目方面（但动态 Web 模块版本存在一些问题，我已将其更改为 2.5），现在我可以使用“在服务器上运行”选项。我使用tomcat 6。

但是我的 web.xml 位置存在一些问题，在我导入的项目 `web.xml`文件中，并且 eclipse 在检测到 一些更改文件后`root/src/main/webapp/WEB-INF` 找不到它，并且出现了一些 servlet`root/WebContent/WEB-INF``web.xml`

![在此处输入图像描述](../Images/a6bd9029e9c2a805f33063e2a2664adf.png)

但是当我尝试运行任何 servlet 时，会出现类似的错误

```
javax.servlet.ServletException: Wrapper cannot find servlet class com.games.GulliverTravel.servlets.InitializeGameServlet or a class it depends on
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Thread.java:680)
root cause

java.lang.ClassNotFoundException: com.games.GulliverTravel.servlets.InitializeGameServlet
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Thread.java:680) 
```

有我的pom文件

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>ProjectName</groupId>
  <artifactId>ProjectName</artifactId>
  <packaging>war</packaging>
  <version>1.0</version>
  <name>ProjectName Backend</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.8.2</version>
      <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>com.thoughtworks.xstream</groupId>
        <artifactId>xstream</artifactId>
        <version>1.3.1</version>
        <scope>compile</scope>
    </dependency>
  </dependencies>
  <build>
    <finalName>ProjectName</finalName>
  </build>
</project> 
```

我不明白为什么会发生这种情况，因为当我之前在另一台计算机上执行此操作时一切都很好，并且正确导入，没有任何问题。请帮我。它可以与更改 web.xml 文件的位置有关吗？你知道如何解决这些问题吗？谢谢你。

**更新：** 我克隆项目的存储库也没有 .project 文件，只有类、web.xml 和 pom 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:12:43.807

导入现有的 Maven 项目是正确的选择 IMO

这只会确保您不会丢失源/测试文件夹结构并继续使用 Maven 构建。

或者您可以 `mvn eclipse:eclipse`在命令行中使用命令，这将为您生成 Eclipse 特定文件。

# php - php在windows上发送邮件脚本编码问题

> ID：14377753
> 
> 赞同：1
> 
> 时间：2013-01-17T11:10:35.800
> 
> 标签：php, encoding, sendmail

我对这个电子邮件脚本的非英文字符有疑问。如果我将脚本设置为向我的 gmail 帐户发送电子邮件，我没有问题。但是，如果我将脚本设置为向我的域帐户发送电子邮件，并且如果我使用 Windows Live Mail 或 Microsoft Outlook 打开电子邮件，则该电子邮件将无法读取。我必须进入编码菜单，然后选择 utf-8，然后我才能阅读电子邮件。

如果我在 iMac 邮件客户端上打开邮件，我没有问题。

我的客户认为这是一个大问题，并希望我解决它。任何人都可以帮忙吗？

这是代码：

```
<?php
// send the form to the specify email

// CONFIG VARS
$subject = "mysite.com | contact form";
$to = "myaccount@somemail.com";
$from = 'another@somemail.com';

//data
$msg = "Name: "  .$_POST['namesup']    ."<br>\n";
$msg .= "Email: "  .$_POST['emailsup']    ."<br>\n";
$msg .= "Phone: "  .$_POST['phonesup']    ."<br>\n";
$msg .= "Message: "  .$_POST['yourtextsup']    ."<br>\n";

//Headers
$headers  = "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=UTF-8\r\n";
$headers .= "From: <".$from. ">" ;

//send
mail($to, $subject, $msg, $headers);
?> 
```

任何帮助将不胜感激。卓然

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:25:44.280

签出此代码，它将对我有用，

```
<?php

$subject = "mysite.com | contact form";
$to = "myaccount@somemail.com";
$from = 'another@somemail.com';

 $msg = '<html>
            <head>
            </head>
                <body>
                <p>
                               Name: ".$_POST['namesup']."<br>
                               Email: ".$_POST['emailsup']."<br>
                               Phone: ".$_POST['phonesup']."<br>
                               Message: ".$_POST['yourtextsup']."<br>
                    </p>
                </body>
        </html>';

    $headers = 'MIME-Version: 1.0' . "\r\n" . 'Content-type: text/html; charset=UTF-8' . "\r\n";
    $headers .= "X-Mailer: PHP \r\n";
    $headers .= "From: <".$from. ">" ;

    mail($to,$subject,$msg,$headers);
?> 
```

这条线 `$headers = 'MIME-Version: 1.0' . "\r\n" . 'Content-type: text/html; charset=UTF-8' . "\r\n";`解决了你喜欢阿拉伯语或其他语言的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:14:46.163

我建议确保您的消息是有效的 HTML，包括`<html>`and`<head>`标签，并确保您包含`<meta http-equiv="Content-Type" content="text/html charset=UTF-8" />`标签。所以：

```
//data
$msg = '<html><head><meta http-equiv="Content-Type" content="text/html charset=UTF-8" /></head><body>';
$msg .= "Name: "  .$_POST['namesup']    ."<br>\n";
$msg .= "Email: "  .$_POST['emailsup']    ."<br>\n";
$msg .= "Phone: "  .$_POST['phonesup']    ."<br>\n";
$msg .= "Message: "  .$_POST['yourtextsup']    ."<br>\n";
$msg .= '</body></html>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:20:29.707

尝试将您的脚本字符集更改为：

```
<?php
// send the form to the specify email

// CONFIG VARS
$subject = "mysite.com | contact form";
$to = "myaccount@somemail.com";
$from = 'another@somemail.com';

//data
$msg = "Name: "  .$_POST['namesup']    ."<br>\n";
$msg .= "Email: "  .$_POST['emailsup']    ."<br>\n";
$msg .= "Phone: "  .$_POST['phonesup']    ."<br>\n";
$msg .= "Message: "  .$_POST['yourtextsup']    ."<br>\n";

//Headers
$headers  = "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=iso-8859-1";
$headers .= "From: <".$from. ">" ;

//send
mail($to, $subject, $msg, $headers);
?> 
```

# zend-framework2 - Zend Framework 2 - 分页

> ID：14377758
> 
> 赞同：2
> 
> 时间：2013-01-17T11:10:46.493
> 
> 标签：zend-framework2

如何在控制器的操作中获取页面详细信息？我使用了专辑的分页。

```
$iteratorAdapter    = new \Zend\Paginator\Adapter\Iterator($this->getAlbumTable()->fetchAll());
$paginator          = new \Zend\Paginator\Paginator($iteratorAdapter);
$paginator->setCurrentPageNumber($page);
$paginator->setItemCountPerPage(2);

return new ViewModel(array(
   'paginator' => $paginator
)); 
```

我曾尝试使用getPages() 方法来获取。

```
$iteratorAdapter    = new \Zend\Paginator\Adapter\Iterator($this->getAlbumTable()->fetchAll());
$paginator          = new \Zend\Paginator\Paginator($iteratorAdapter);
$paginator->setCurrentPageNumber($page);
$paginator->setItemCountPerPage(2);
$pagingInfo = $paginator->getPages();
return new ViewModel(array(
   'paginator' => $paginator,
   'pagingInfo' => $pagingInfo,
)); 
```

在这种情况下，我在表中有 8 条记录。每页是 2。所以，我有 4 页。使用 getPages() 方法后，第 3 和第 4 页没有记录。但是分页是存在的。

怎么了？有没有其他方法可以获取控制器中的记录总数、当前页码和当前页记录数？请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:09:51.127

这是预期的行为。

您已将每页的项目设置为 2，将当前页面设置为 1。

这意味着您将取回第一页上的所有项目，即。第 1 项和第 2 项。

如果您想要集合中的总页数，请使用以下命令：

```
$paginator->count(); 
```

当前页码：

```
$paginator->getCurrentPageNumber() 
```

您要求在控制器中获取当前页数，但为什么呢？您正在控制器中设置此值，因此您必须已经拥有它 (setCurrentPageNumber(..))..

如果您让我知道您要做什么，也许我可以向您展示如何做的更好示例。

# ios - 在 c/cpp 中开发的 Opencv 可以在 IOS 中运行吗？

> ID：14377761
> 
> 赞同：0
> 
> 时间：2013-01-17T11:11:01.670
> 
> 标签：ios, macos, ios5, image-processing, opencv

我正在使用 C/C++ 编码在 Centos 中使用 OpenCV 开发图像处理应用程序。我的意图是为 Linux 和 IOS (IPAD) 提供一个单一的开发平台。因此，如果我在安装了 OpenCV（在 C/CPP 中）的 Linux 环境中开始开发，我可以在 IOS 中使用相同的代码而不使用 Objective-C 吗？我不想为IOS和Linux付出双重努力，那么如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:44:34.023

请参阅我对这个问题的详细回答：
[iOS：从背景图像中检索矩形图像](https://stackoverflow.com/questions/13958321/iosretrieve-rectangle-shaped-image-from-the-background-image/14123682#comment19597798_14123682)

基本上，如果您将用户界面代码分开，您可以使大部分 CPP 代码在平台之间移植。在 iOS 上，所有 UI 都应该是纯 Objective-C，而您的 openCV 图像处理可以是纯 C++（在 linux 上完全一样）。在 iOS 上，您将创建一个在 Objective-C 端和 C++ 端之间进行调解的瘦 ObjC++ 包装类。它真正做的只是在它们之间转换图像格式，并将数据送入和送出 C++ 进行处理。

我在 github 上有几个简单的例子，你可能想看看：[OpenCVSquares](https://github.com/foundry/OpenCVSquares)和[OpenCVStitch](https://github.com/foundry/OpenCVStitch)。这些基于与 openCV 一起分发的 C++ 示例 - 您应该将这些项目中的 C++ 与原始示例进行比较，以了解需要多少更改（提示：不多）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:35:43.050

[看起来](http://docs.opencv.org/trunk/doc/tutorials/introduction/ios_install/ios_install.html)有可能。在 iOS 上编译和运行 C/C++ 没有问题，但你需要一些用于 UI 的 Objective-C。当您关注模块的分层/抽象时，您应该能够在平台之间共享大部分/所有核心代码。

# android - 无法从项目单击的列表视图进入 web 视图

> ID：14377762
> 
> 赞同：1
> 
> 时间：2013-01-17T11:11:02.567
> 
> 标签：android, listview, webview, android-listview, android-webview

我的代码有问题，我无法进入在我的列表视图项单击中定义的 url，我得到空指针异常。我已经创建了互联网许可。

这是我的代码

爪哇

```
 public class UGSimpliyBeta extends Activity {
    ListView list_utama;
    Intent intent;
    WebView web;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        getWindow().requestFeature(Window.FEATURE_PROGRESS);
        getWindow().setFeatureInt(Window.FEATURE_PROGRESS, Window.PROGRESS_VISIBILITY_ON);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ugsimpliy_beta);
        list_utama = (ListView)findViewById(R.id.list_utama);
        web = (WebView)findViewById(R.id.webview);

        String list_content[] = new String[]{"UG Web Service", "Schedule Service", "Exam Service", "Studentsite News", "About"};
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, list_content)
                {
                    @Override
                    public View getView(int position, View convertView, ViewGroup parent) 
                    {
                        View view = super.getView(position, convertView, parent);
                        TextView textView=(TextView) view.findViewById(android.R.id.text1);
                        /*YOUR CHOICE OF COLOR*/
                        textView.setTextColor(Color.WHITE);
                        return view;
                    }
                };

        list_utama.setAdapter(adapter);

        list_utama.setOnItemClickListener(new OnItemClickListener()
        {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int pos, long id)
            {
                Object item = parent.getItemAtPosition(pos);
                String content = item.toString();
                if(content.equals("UG Web Service"))
                {
                    Toast.makeText(getApplicationContext(), content, Toast.LENGTH_SHORT).show();
                }
                else if(content.equals("Schedule Service"))
                {
                    Toast.makeText(getApplicationContext(), content, Toast.LENGTH_SHORT).show();
                }
                else if(content.equals("Exam Schedule"))
                {
                    Toast.makeText(getApplicationContext(), content, Toast.LENGTH_SHORT).show();
                }
                else if(content.equals("Studentsite News"))
                {
                    Toast.makeText(getApplicationContext(), content, Toast.LENGTH_SHORT).show();
                    setContentView(R.layout.webview);
                    final Activity activity = UGSimpliyBeta.this;
                    final ProgressDialog progressdialog = new ProgressDialog(activity);
                    progressdialog.setCancelable(true);
                    web.setWebViewClient(new WebViewClient());
web.setWebChromeClient(new WebChromeClient()
                    {
                        public void onProgressChanged(WebView view, int progress)
                        {
                            progressdialog.show();
                            progressdialog.setProgress(0);
                            activity.setProgress(progress * 1000);
                            if(progress == 100 && progressdialog.isShowing())
                            {
                                progressdialog.dismiss();
                            }
                        }
                    });
                    web.loadUrl("https://www.studentsite.gunadarma.ac.id/news/news.php");

                }
                else
                {
                    Toast.makeText(getApplicationContext(), content, Toast.LENGTH_SHORT).show();
                    intent = new Intent(UGSimpliyBeta.this, About.class);
                    startActivity(intent);
                }
            }
        });
    } 
```

webview.xml

```
<?xml version="1.0" encoding="utf-8"?>
<WebView xmlns:android="http://schemas.android.com/apk/res/android"
  android:id = "@+id/view"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" 
  android:scrollbars = "none">
</WebView> 
```

activity_ugsimply_beta.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent" 
  android:background = "@drawable/tile">
<ImageView
    android:layout_width = "200px"
    android:layout_height = "200px"
    android:layout_above = "@+id/title"
    android:layout_centerHorizontal = "true"
    android:layout_centerVertical = "true"      
    android:src = "@drawable/app"/>
<TextView
    android:id = "@+id/title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:gravity = "center"
    android:textColor="#ffffff"
    android:text="@string/hello_world"
    tools:context=".UGSimpliyBeta" />
<ListView 
    android:id = "@+id/list_utama"
    android:layout_width="fill_parent"
    android:layout_height = "wrap_content"
    android:layout_below="@+id/title"
    android:layout_centerHorizontal = "true"
    android:layout_centerVertical = "true"
    android:cacheColorHint="#00000000"/>
</RelativeLayout> 
```

这是给 logcat 的

```
 12-06 20:59:27.277: E/AndroidRuntime(3760): FATAL EXCEPTION: main
  12-06 20:59:27.277: E/AndroidRuntime(3760): java.lang.NullPointerException
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at com.rk.ug_simplify.UGSimpliyBeta$2.onItemClick(UGSimpliyBeta.java:69)
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at android.widget.AdapterView.performItemClick(AdapterView.java:292)
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at android.widget.AbsListView$1.run(AbsListView.java:3168)
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at android.os.Handler.handleCallback(Handler.java:605)
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at android.os.Handler.dispatchMessage(Handler.java:92)
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at android.os.Looper.loop(Looper.java:137)
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at android.app.ActivityThread.main(ActivityThread.java:4340)
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at java.lang.reflect.Method.invokeNative(Native Method)
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at java.lang.reflect.Method.invoke(Method.java:511)
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
  12-06 20:59:27.277: E/AndroidRuntime(3760):   at dalvik.system.NativeStart.main(Native Method) 
```

是什么导致错误以及如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:37:41.857

试试这个：之后`setContentView(R.layout.webview)`; 把这段代码`web = (WebView)findViewById(R.id.view);`

但在一个 Activity 中多次调用 setContentView() 是一种习惯做法。将您的 webView 放在另一个 Activity 或 Dialog 中可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:14:41.753

web 位于“activity_ugsimpliy_beta 布局”中。您通过说不包含 web 的 setContentView(R.layout.webview) 将内容视图更改为新的 LAYOUT，因此错误即将到来。删除 setContentView(R.layout.webview); 从您的代码中，并使列表视图不可见，它会运行良好。

# arrays - 将整数数组传递给 plpgsql 函数时出错（postgres 8.3.7）

> ID：14377771
> 
> 赞同：2
> 
> 时间：2013-01-17T11:11:17.907
> 
> 标签：arrays, postgresql, postgresql-8.3

我有以下函数，它接收一个整数数组，迭代它调用其他函数：

```
CREATE FUNCTION calculateAbsencesForIDs(INT[]) RETURNS TEXT AS 
'
DECLARE
  index integer := 0;
  resultArray decimal[];
  id int;
  result text;
BEGIN
  FOR id IN SELECT $1 LOOP

        resultArray[index] = calculateAbsenceForID(id); 
        index := index + 1;

END LOOP;
RETURN array_to_string(resultArray, result);
END;
'
LANGUAGE plpgsql; 
```

我尝试使用以下方法调用它：

```
SELECT calculateAbsencesForIDs(ARRAY[85,74,75,76,77,78,79,80]); 
```

或者

```
SELECT calculateAbsencesForIDs('{85,74,75,76,77,78,79,80}'); 
```

或者

```
SELECT calculateAbsencesForIDs('{85,74,75,76,77,78,79,80}'::int[]);
... 
```

但我总是犯同样的错误：

```
[Error Code: 0, SQL State: 22P02]  ERROR: invalid input syntax for integer: "{85,74,75,76,77,78,79,80}" 
```

我不知道如何调用这个函数。我查看了 postgres 文档，我认为这是正确的，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:33:07.620

您需要像这样遍历数组的元素：

```
BEGIN
  FOR i in 1 .. array_length($1, 1) LOOP

        resultArray[i] = calculateAbsenceForID($1[i]); 

  END LOOP;
  RETURN array_to_string(resultArray, result);

END; 
```

请注意，如果 $1 是，这将引发错误`NULL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:22:45.727

这一行：

```
FOR id IN SELECT $1 LOOP 
```

意味着您分配`id`给每个值，从`SELECT $1`该值返回具有类型的单个字段的单个记录`INT[]`。

正如`id`声明为`INT`，您会看到正在观察的转换错误。

在`8.4`及以上您可以使用`UNNEST`,`8.3`替换它

```
FOR id IN
SELECT  $1[i]
FROM    generate_series(1, ARRAY_UPPER($1, 1)) i
LOOP 
```

或者，您可以这样做：

```
SELECT  ARRAY_TO_STRING
                (
                ARRAY
                (
                SELECT  calculateAbsenceForID($1[i])
                FROM    generate_series(1, ARRAY_UPPER($1, 1)) i
                )
                ) 
```

# visual-studio-2010 - CacheInstaller.exe 已停止工作

> ID：14377774
> 
> 赞同：0
> 
> 时间：2013-01-17T11:11:35.033
> 
> 标签：visual-studio-2010, asp.net-mvc-2, azure, azure-web-roles, azure-caching

当我在 Windows Azure 模拟器（开发环境）上运行 Asp.Net MVC 2 项目时，我遇到了下面提到的问题

我已经安装了**适用于 .NET 的 Windows Azure SDK - 2012 年 10 月**版，并且我正在我的系统上使用**缓存功能**。

![在此处输入图像描述](../Images/908489dd09849667cedb131187a06536.png)

出现上述错误 下面一个也即将到来。

![在此处输入图像描述](../Images/ec569c49a1d17f1d8b29c6ad308202cb.png)

如何摆脱这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-26T14:44:48.750

也许我有一个愚蠢的解决方案，但这对我有用。

当我开始收到消息“CacheInstaller.exe 已停止工作”时，我执行以下操作： 1) 停止执行。2) 转到我在 Azure 项目中使用的角色并打开相应的属性页面。3）转到“缓存”部分，然后取消选中“启用缓存”复选框。之后我再次检查。4）保存*，运行de应用程序，不再出现警告。

*   很奇怪，因为如果您取消选中并再次检查它而不在中间保存一个选项，则什么都不会改变，但是在这种情况下，当您这样做时，文件会更改（我可以在红色图标中看到它表示那里发生了一些变化，:P）

我希望这有帮助。干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:12:11.987

我也把头撞在墙上。在深入挖掘位于以下位置的故障转储日志后，我终于找到了问题所在：`C:\Users\{YOU}\AppData\Local\dftmp\Resources\{GUID}\directory\DiagnosticStore\AzureCaching\`

*   `AzureCaching`不允许 UNC 路径。

由于我的主要 .net 开发人员来自 vm，因此我的文档/项目驱动器被映射到位于以下位置的本机驱动器：`\\psf\Home\Documents\...` 一旦我将项目移动到`c:/ drive, CacheInstaller`按预期工作的 vm。

不妨发布我的经验，因为我无法找到有关此特定问题的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T10:32:55.923

我今天发现，如果我的系统时间错误超过 10 分钟，那么 CacheInstaller.exe 在启动模拟器时就会退出。

这包括系统时间和时区的组合错误，大概是因为它导致无法计算 Azure 运行的正确 UTC 时间。修复系统时钟解决了我的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T21:49:18.730

事件日志中是否有任何可能提供更多提示的错误消息。这可能是缺少 dll 的问题，您是否在这台机器上也安装了 windows server appFabric，这可能导致与 dll 冲突？procmon 日志可能会帮助您查看它正在寻找的文件路径。“ [http://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645) ”

# c# - 在网格视图中显示 YouTube 视频？

> ID：14377776
> 
> 赞同：0
> 
> 时间：2013-01-17T11:11:41.760
> 
> 标签：c#, asp.net

我在网格视图中显示了图像。但我不明白如何在网格视图中显示 YouTube 视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:15:13.030

1.  添加一个带有文字控制的模板列。
2.  在 itemdatabound 上用 YouTube 视频的嵌入代码填充文字

例子：

```
((Literal)e.Item.FindControl("litvideo")).Text = "<iframe width=\"560\" height=\"315\" src=\"http://www.youtube.com/embed/r6BHyv6nkAs\" frameborder=\"0\" allowfullscreen></iframe>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:20:15.193

```
<asp:TemplateField ControlStyle-CssClass="Row" HeaderText="YouTube Video">
    <ItemTemplate>
        <asp:Label ID="lblYTVideoURL" runat="server" Text=<%# Eval("YTVideoUrl")  %>></asp:Label>
    </ItemTemplate>
    <ControlStyle CssClass="Row"></ControlStyle>
</asp:TemplateField> 
```

然后从后面的代码：

```
protected void grvYoutubeVideo_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Label lbl = (Label)e.Row.Cells[0].Controls[1];

        if (lbl.Text != "")
        {
                //string YTVideoURL = lbl.Text;    //"http://www.youtube.com/v/AyPzM5WK8ys";

                //string OBJYTVideo = "<object width=\"150\" height=\"150\">";
                //OBJYTVideo += "<param name=\"movie\" value=\"" + YTVideoURL + "\"></param>";
                //OBJYTVideo += "<param name=\"allowscriptaccess\" value=\"always\"></param>";
                //OBJYTVideo += "<embed src=\"" + YTVideoURL + "\" type=\"application/x-shockwave-flash\"";
                //OBJYTVideo += "allowscriptaccess=\"always\" width=\"100%\" height=\"100%\"></embed></object>";

                //lbl.Text = OBJYTVideo;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:21:55.010

尝试这样的事情，你可以把所有这些都放在 .html 中并打开。之后，您将轻松将此添加到 asp.xml 中。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script runat="server">

</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <object width="425" height="355">
            <param name="movie" value="http://www.youtube.com/v/sSe_RmPlOLM" />            
            <param name="wmode" value="transparent" />
            <embed src="http://www.youtube.com/v/sSe_RmPlOLM" type="application/x-    shockwave-flash"
                wmode="transparent" width="425" height="355" />
        </object>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-12T12:23:25.650

```
 <asp:TemplateField HeaderText="Video">
                                <ItemTemplate>
                                  <iframe id="video" width="420" height="250" frameborder="0" allowfullscreen src='<%# "http://www.youtube.com/embed/" + Eval("VideoURL").ToString().Split(new string[] { "v=" }, StringSplitOptions.None)[1] %>' frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
                                  </iframe>
                                </ItemTemplate>
                                <HeaderStyle HorizontalAlign="Center" />
                                <ItemStyle HorizontalAlign="Center" />
                            </asp:TemplateField> 
```

# android - 我需要只有在我按下对话框中的任何按钮后才能运行其他方法

> ID：14377782
> 
> 赞同：1
> 
> 时间：2013-01-17T11:11:52.393
> 
> 标签：android, dialog

在他其他方法之后，我有对话方法。我需要只有在我按下对话框中的任何按钮后才能运行其他方法。

现在，当我立即运行对话框时，其他方法也会运行（（

不是方法

```
 ... 
    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            method1();
            method2();
        }
    });
    ... 
```

我不想在 builder.setPositiveButton onClick 中放入其他方法。因为那时我有很多程序。

```
 dialog();

        DataBase playersDataBase = new DataBase(this);
        playersDataBase.open();
        playersDataBase.ReadDB();

        playersDataBase.checkPlayer(playerName, playerScore);
        playersDataBase.justReadDB();
        playersDataBase.close(); 
```

我所有的程序都在对话框之后运行，并且在我按下按钮时不要等待（（就像 myTimer 和许多其他方法一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:14:33.267

然后你可以这样做：

```
public void showDialogMethod(){

    dialog.show();
    method1();
    method2();

} 
```

当您需要显示对话框时调用此方法。

# android - Android SQLite 复杂的 INSERT 无法按预期工作

> ID：14377788
> 
> 赞同：0
> 
> 时间：2013-01-17T11:12:22.527
> 
> 标签：android, sqlite, insert, nested

我目前正在开发一个 android 应用程序，我必须将相当大的 XML 文件导入 SQL。以前，我对 XML 中的每个元素都有一个 INSERT。现在我尝试创建一个临时的 SQL 文件，它会被导入，因为这要快得多。由于数据是动态的，我有一些这样的陈述：

```
INSERT INTO About VALUES ('System Karteikasten', '', '[todo]', '[todo]', '[todo]', '[todo]', 'null');
INSERT INTO Collection (Collection_id, About_id, MediaFile_Id, type, isbn, releasedate, publisher, edition, description, priv_sortChilds, priv_createChild, priv_deleteChild, priv_insertChild) VALUES ('system_kalepro_main', (SELECT ROWID FROM About ORDER BY ROWID DESC LIMIT 1), 'null', 'CARDBOX', 'null', '0', 'null', 'null', 'Some Text', 'false', 'false', 'false', 'false'); 
```

有时我喜欢 1000 个这样的组。正如您可能已经从 SQL 中猜到的那样，Collection 中已经有一个外键：About_id 指向来自 About 的 ROWID。我已经测试了整个代码，并且在 linux 机器上一切正常。但是它不适用于我的 Android 手机，只有 About 插入工作。也没有错误，这可以为我指明正确的方向。Collection 条目被简单地忽略了，我猜它与嵌套查询有关，但我不知道如何解决这个问题。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:42:06.187

An`INSERT`不会默默地失败；您执行 SQL 命令的代码忽略了某处的错误。

无论如何，只要您的子记录不超过一个，您就可以将子查询替换为[`last_insert_rowid()`](http://www.sqlite.org/lang_corefunc.html#last_insert_rowid).

或者，尝试`(SELECT max(rowid) FROM About)`.

# linux - 在 SED Linux 中查找和替换 Define(Key,Value)

> ID：14377789
> 
> 赞同：1
> 
> 时间：2013-01-17T11:12:28.553
> 
> 标签：linux, bash, sed

目前我正在尝试创建一个 bash 脚本来替换我生成的新值。

这些值存储在`constants.php`：

```
-----------constant.php : start-------------------
                      :
        define('PASS1', 'ABCD');
        define('PASS2', '1234');
                      :
-----------constant.php : end--------------------- 
```

运行脚本后，*（使用`sed`）*`PASS1`它应该分别更新和的值`PASS 2`：

```
-----------constant.php : start-------------------
                      :
        define('PASS1', 'WXYZ');
        define('PASS2', '0987');
                      :
-----------constant.php : end--------------------- 
```

有没有办法可以找到 KEY 例如`'PASS1'`并替换逗号后的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:49:42.570

您可以使用`sed`so 指定`sed "/PASS1/s/'[^']*'/'WXYZ'/2"`匹配任何包含的行`PASS1`并执行以下替换`s/'[^']*'/'WXYZ'/2`：

```
s/     # Substitute  
'      # Match a single quote
[^']*  # Match anything not a single quote 
'      # Match the closing single quote 
/      # Replace with 
'WXYZ' # The literal value
/2     # The 2 here matches the second quoted string, not the first. 
```

* * *

```
# First key 
$ sed "/PASS1/s/'[^']*'/'WXYZ'/2" file

        define('PASS1', 'WXYZ');
        define('PASS2', '1234');

# Second key
$ sed "/PASS2/s/'[^']*'/'0978'/2" file

        define('PASS1', 'ABCD');
        define('PASS2', '0978');

# In one go
$ sed "/PASS1/s/'[^']*'/'WXYZ'/2;/PASS2/s/'[^']*'/'0978'/2" file

        define('PASS1', 'WXYZ');
        define('PASS2', '0978'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:25:41.837

您需要与此类似的替换规则：

```
/'PASS1'/ s/, *'[^']*'/, 'WXYZ'/ 
```

它找到包含引用的 PASS1 的行，并用正确的密码替换下一个参数。编写这样的规则既乏味又容易出错，所以我更喜欢让 sed 为我编写它们。因此，如果文件`key-value.txt`包含：

```
PASS1 WXYZ
PASS2 0987 
```

您可以使用以下命令生成替换规则：

```
<key-value.txt sed "s:\(.*\) \(.*\):/\1/ s/, *'[^']*'/, '\2'/:" 
```

输出：

```
/'PASS1'/ s/, *'[^']*'/, 'WXYZ'/
/'PASS2'/ s/, *'[^']*'/, '0987'/ 
```

将其传送到第二个 sed 以进行实际替换：

```
<key-value.txt sed "s:\(.*\) \(.*\):/\1/ s/, *'[^']*'/, '\2'/:" | sed -f - constants.php 
```

使用`-i`带有第二个 sed 的开关来“就地”更改 constants.php。

# c - 读取用户命令继续不起作用

> ID：14377793
> 
> 赞同：0
> 
> 时间：2013-01-17T11:12:45.380
> 
> 标签：c, do-while, getchar

我正在为计费系统编写程序。我在我的程序中使用 do-while 循环。并根据用户输入执行程序。如果用户想继续执行，程序将继续执行。但我在执行方面遇到了问题。我在简单的 do-while 循环中尝试我的逻辑。简单的 do-while 循环也会出现同样的问题。

```
Problem is: If the input is yes, the program does not get the further input from user. 
```

那个简单的 do-while 循环是：

```
#include <stdio.h>

main()
{
    int c;
    char ch;
    do
    {
            printf("enter the no less then 4:");
            scanf("%d",&c); 
        switch(c)
        {
            case 1:
                printf("In 1\n");
                break;
            case 2:
                printf("In 2\n");
                break;
            case 3:
                printf("In 3\n");
                break;
        }
        printf("do u want to continue?:");
        ch=getchar();
    }while(ch=='y');
} 
```

如果我把`while(ch != 'n')`而不是`while(ch=='y')`程序工作正常。我无法理解这背后的问题。请帮我纠正这个问题。并解释一下这个问题。提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:21:30.720

第一次运行，打印 3，用户键入“y”并按回车键

getchar() 读取 'y' 和程序循环

第二次，getchar() 从上一次按键读取换行符

换行符不是 'y' 所以程序不会循环

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:06:09.233

几个问题：

1.  getchar 返回一个 int，而不是 char，所以`ch`必须是一个`int`就像 c 一样。
2.  scanf 需要一个与 %d 一起使用的指针，所以它应该是`scanf("%d", &c);`
3.  `while`应该对 EOF 进行测试，如`while ((ch = getchar()) != EOF)`
4.  请注意，输入将包含您应该处理的换行符（例如忽略）。

这应该是相当健壮的：

```
#include <stdio.h>

int main(void)
{
  int c, ch;

  for (;;) {
    printf ("Enter a number (1, 2 or 3):");
    fflush (stdout);
    if (scanf ("%d", &c) == 1) {
      switch (c) {
      case 1:
        printf ("In 1\n");
        break;
      case 2:
        printf ("In 2\n");
        break;
      case 3:
        printf ("In 3\n");
        break;
      }
      printf ("Do you want to continue? [y/n]:");
      fflush (stdout);
      while ((ch = getchar ())) {
        if (ch == 'y')
          break;
        else if (ch == 'n' || ch == EOF)
          return 0;
      }
    } else {
      printf ("That was not a number. Exiting.\n");
      return 0;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:19:22.887

While(ch=='y') 或 while() 中的任何字符，它将根据您的编码发送到案例 3....y 按下，它将发送到案例 3，否则它将无法工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T12:36:17.090

不要使用 阅读答案`getchar`，而是使用`fgets`。

正如其他人解释的那样，第二个`getchar`调用为您提供了换行符，该换行符是在第一个`y`.
使用`fgets`，您将获得用户键入的所有内容。然后您可以检查它是否是`y`（只需检查第一个字符，或使用`strcmp`）。

# date - 使用 std.datetime 将日期添加到日期

> ID：14377794
> 
> 赞同：1
> 
> 时间：2013-01-17T11:12:56.787
> 
> 标签：date, d

为什么不允许在 std.datetime 中为日期添加*天数？*您可以添加月份和年份，但不能添加天数。

最近我必须计算复活节星期日的日期，然后我必须通过在最后一个日期上加上一定天数（39、10、7、4）来计算相关的假期（升天、五旬节、三位一体、语料库）。

我最终使用了 dayOfYear：

```
date.dayOfYear(date.dayOfYear + offset); 
```

这很有效，但这只是因为我留在了同一年。如果我必须在 12 月 28 日加上 50 天怎么办？

有没有一种我忽略的简单方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:41:28.463

您可以使用`Duration`来自`core.time`. 导入`std.datetime`会导入`core.time`，所以可以直接使用如下。

```
import std.stdio, std.datetime;

void main() {
  auto date = Date(2013, 12, 28);
  writefln("%s + %s = %s", date, 10.days(), date + 10.days());
} 
```

顺便说一句，是构造结构`days()`的别名。查看[http://dlang.org/phobos/core_time.html](http://dlang.org/phobos/core_time.html)的文档以获取更多信息。`dur!"days"()``Duration``core.time`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T17:58:16.280

如果您尚未阅读有关 std.datetime 的[这篇文章](http://dlang.org/intro-to-datetime.html)，那么您可能应该阅读，因为它可能会回答您对如何使用它的最基本问题。

但总的来说，[`core.time.Duration`](http://dlang.org/phobos/core_time.html#Duration)您应该使用 std.datetime ( `SysTime`、`DateTime`、`Date`或`TimeOfDay`) 中的任何时间点类型来添加和减去单位。所以，你会得到类似的代码

```
auto date = Date(2012, 12, 21);
date += dur!"days"(50); 
```

或者

```
auto date = Date(2012, 12, 21);
date += days(50); 
```

（模板化`dur`函数是生成 a 的通用方法`Duration`，但它为它支持的每个单元都有别名，所以类似`seconds(5)`or的东西也`22.minutes()`可以工作）。

该`add`函数存在于`"months"`and `"years"`，因为 a`Duration`不能保存月或年（因为您无法在没有特定日期的情况下在它们和较小的单位之间进行转换），并且需要有一种方法可以将月或年添加到时间点。此外，还有一个问题是，当您从某个日期添加或减去一个月或一年时该怎么做，并且它移动到的月份不包括那一天，因此`add`接受`AllowDayOverflow`以控制它（这不会对于较小的单位是必要的）。

```
auto d3 = Date(2000, 2, 29);
d3.add!"years"(1);
assert(d3 == Date(2001, 3, 1));

auto d4 = Date(2000, 2, 29);
d4.add!"years"(1, AllowDayOverflow.no);
assert(d4 == Date(2001, 2, 28)); 
```

但`add`不接受任何其他单位，因为您可以简单地将普通算术运算与`Duration`. 此外，减去两个时间点将导致`Duration`.

```
assert(Date(2012, 12, 5) - Date(2002, 11, 17) == dur!"days"(3671));
assert(Date(2012, 12, 5) - dur!"days"(3671) == Date(2002, 11, 17)); 
```

与`add`, 不同的是，`roll`接受类型中的所有单位，而不仅仅是`"months"`and `"years"`，但那是因为它执行与 不同的操作`+`，因此添加或减去 a`Duration`将不起作用（因为它已经添加或减去）。而是`roll`添加到特定单元而不添加到其他单元。

```
auto d = Date(2010, 1, 1);
d.roll!"days"(33);
assert(d == Date(2010, 1, 3)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:30:01.407

您可以使用`roll`方法：

```
date.roll!"days"(50); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T12:41:06.653

我确实忽略了它：您可以使用 dayOfGregorianCal：

```
import std.stdio, std.datetime;

void main() {
    auto d = Date(2012, 12, 28); 
    writeln(d);    // 2012-Dec-28
    d.dayOfGregorianCal(d.dayOfGregorianCal + 50); 
    writeln(d);    // 2013-Feb-16
} 
```

# java - 如何逐像素比较两个图像并从图像的脏部分帧新图像

> ID：14377804
> 
> 赞同：1
> 
> 时间：2013-01-17T11:13:31.783
> 
> 标签：java, image, image-comparison, dirtyread, dirtyrectangle

我正在使用`robot.screenCapture()`和 frame捕获屏幕`bufferedImage1`。我再次捕获桌面屏幕和框架`bufferedImage2`。

请告诉我如何逐个像素地比较这两个图像（`bufferedImage1`和）。`bufferedImage2`如果有任何差异，那么如何框出不同的部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:08:26.880

这是一种方法：

1.  比较整个图像，获取差异超过阈值的像素百分比。
2.  递归地分成四等份，缩小到一定的大小，并为每个象限获得相同的百分比。
3.  在高于平均差一定数量的象限周围画出框架。如果您需要方形截面，请根据大小和百分比差异使用单个象限。否则，您可以组合多个具有较大差异的象限。

# android - 在 android 中使用 Map API V2 在地图上添加搜索栏

> ID：14377805
> 
> 赞同：2
> 
> 时间：2013-01-17T11:13:33.447
> 
> 标签：android, google-maps-api-2, google-maps-android-api-2

我正在开发一个使用 Google Map Api V2 的应用程序，该地图已成功加载，我也在其上放置了标记，但现在当我尝试在我的地图上添加一个搜索栏时，它没有在地图的表面上显示它，实际上我想提供一个功能，用户可以使用搜索栏增加和减少圆的半径，但是当我通过 XML 添加搜索栏时，它没有显示搜索栏，

我的 XML 是这样的：-

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <RadioGroup
        android:id="@+id/rg_views"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/rb_normal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="StreetView" />

        <RadioButton
            android:id="@+id/rb_satellite"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Satellite" />

        <RadioButton
            android:id="@+id/rb_terrain"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Terrian" />
    </RadioGroup>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/rg_views" >

        <fragment
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/map"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            class="com.google.android.gms.maps.SupportMapFragment" />

        <SeekBar
            android:id="@+id/bar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:layout_marginRight="-30dp"
            android:max="400"
            android:minWidth="100dp"
            android:progress="100"
            android:rotation="270" />
    </RelativeLayout>

</RelativeLayout> 
```

如果有人知道如何放置按钮，请在地图表面寻找栏然后请帮助我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:53:03.397

SeekBar 是为水平而设计的。旋转它会使它在不修改代码的情况下正确显示。您可以尝试垂直 SeekBar 实现的示例，但没有一个对我有用。

[如何在 Android 中获得工作的垂直 SeekBar？](https://stackoverflow.com/questions/4892179/how-can-i-get-a-working-vertical-seekbar-in-android)

[http://hackskrieg.wordpress.com/2012/04/20/working-vertical-seekbar-for-android/](http://hackskrieg.wordpress.com/2012/04/20/working-vertical-seekbar-for-android/)

# c# - NHibernate 加载实体与子集合的一部分

> ID：14377808
> 
> 赞同：2
> 
> 时间：2013-01-17T11:13:44.383
> 
> 标签：c#, nhibernate

有没有办法加载 NHibernate 实体，在子集合上有一个子句？我有一个场景，我在“操作”中记录更改，即一个操作可以包含对多个实体的更改。当我想加载特定实体的日志时，我会加载对该实体所做的任何更改的所有操作。加载这些操作会导致加载所有更改 - 我只希望加载相关更改。

课程：

```
public class Operation{
   public virtual DateTime TimeStamp { get; set; }
   public virtual IList<Change> Changes { get; private set; }
}

public class Change{
    public virtual string ChangeText { get; set; }
    public virtual int EntityId { get; set; }
} 
```

获取给定实体的操作

```
 Session.QueryOver<Operation>().Where(o => o.Changes.Any(c => c.EntityId == entityId)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:39:24.400

I. 正如 Oskar Berggren 的回答所述：[https](https://stackoverflow.com/a/13864061/1679310) ://stackoverflow.com/a/13864061/1679310 您可以应用过滤器[18.1。NHibernate 过滤器](http://nhforge.org/doc/nh/en/index.html#filters)

概括：

调整映射

```
<set ...>
    <filter name="myFilter" condition=":myFilterParam = MY_FILTERED_COLUMN"/>
</set> 
```

然后这样称呼它：

```
ISession session = ...;
session.EnableFilter("myFilter").SetParameter("myFilterParam", "some-value");
IList results = Session.QueryOver<Operation>()
  .Where(...
  .List(); 
```

二、`Changes`其他选项是在查询时过滤`Operation`：[16.4。协会](http://nhforge.org/doc/nh/en/index.html#queryqueryover-associations)

```
IQueryOver<Operation,Change> query =
 session.QueryOver<Operation>()
   .JoinQueryOver<Change>(o => o.Changes) // added explicit <Change>
     .Where(c => c.EntityId == entityId); 
```

# c - 了解程序中变量的多重声明和 GCC 编译器行为

> ID：14377816
> 
> 赞同：4
> 
> 时间：2013-01-17T11:14:13.140
> 
> 标签：c, gcc, static, static-members, gnu-arm

我尝试了这三个版本的小程序，得到了一些有趣的结果。谁能帮我理解每种情况下的编译器行为。

```
version 1.0

int A;
int A; 
int A;

int main ()
{
   return 0;
}

Result: Got compiled with one copy of A in BSS.

Version 2.0

int main ()
{
   int A;
   int A;
   int A;

   return 0;
}

Result: Failed to compile with complaining for re-declaration.

Version 3.0

int A;

int  main()
{
   static int A;
   return0;
}

result: Compiled with two copy of A in BSS. one is A and another a.<some numeric tag>. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T11:26:11.007

在您的第一个示例中，`int A;`是一个暂定定义：在文件范围内声明标识符，没有初始化程序，也没有存储类或`static`存储类。你可以有多个，它们都将引用同一个变量：

标准说：（ISO/IEC 9899:1999 6.9.2）

> 具有文件范围的对象的标识符声明没有初始化程序，并且没有存储类说明符或具有存储类说明符 static，构成暂定定义。如果翻译单元包含一个或多个标识符的暂定定义，并且翻译单元不包含该标识符的外部定义，则行为与翻译单元包含该标识符的文件范围声明完全相同，复合类型为翻译单元的末尾，初始化器等于 0。

在您的第二个示例中，`A`不是文件范围。它是一个局部变量，它不是一个暂定的定义，所以你只能有一个。

在您的第三个示例中，`A`at 文件范围是与`A`内部 main() 不同的变量，因为它们具有不同的范围。仅仅因为第二个`A`是静态的并不会改变它的范围；标识符仍然只能从 main() 内部看到。这是变量遮蔽的情况，其中一个范围内的变量与封闭范围内的变量具有相同的标识符（在这种情况下是 main() 范围与文件范围。）文件范围的事实`A`恰好是暂定定义不影响`A`内部 main()。

# php - 使字符串“URL安全”

> ID：14377818
> 
> 赞同：2
> 
> 时间：2013-01-17T11:14:21.013
> 
> 标签：php, string

> **可能重复：**
> [PHP 中的 URL 友好用户名？](https://stackoverflow.com/questions/2103797/url-friendly-username-in-php)

有没有办法使字符串“URL安全”，这意味着用连字符替换空格，删除任何标点符号并将所有大写字母更改为小写？

例如：

```
"This is a STRING" -› "this-is-a-string" 
```

或者

```
"Hello World!" –› "hello-world" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T11:31:45.943

您可以使用`preg_replace`来替换更改这些字符。

```
$safe = preg_replace('/^-+|-+$/', '', strtolower(preg_replace('/[^a-zA-Z0-9]+/', '-', $string))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T11:29:44.733

我经常使用这个函数来生成我的干净的 url 并且似乎工作正常，你可以根据你的需要改变它，但试一试。

```
function sanitize($string, $force_lowercase = true, $anal = false) {
    $strip = array("~", "`", "!", "@", "#", "$", "%", "^", "&", "*", "(", ")", "_", "=", "+", "[", "{", "]",
                   "}", "\\", "|", ";", ":", "\"", "'", "&#8216;", "&#8217;", "&#8220;", "&#8221;", "&#8211;", "&#8212;",
                   "â€”", "â€“", ",", "<", ".", ">", "/", "?");
    $clean = trim(str_replace($strip, "", strip_tags($string)));
    $clean = preg_replace('/\s+/', "-", $clean);
    $clean = ($anal) ? preg_replace("/[^a-zA-Z0-9]/", "", $clean) : $clean ;
    return ($force_lowercase) ?
        (function_exists('mb_strtolower')) ?
            mb_strtolower($clean, 'UTF-8') :
            strtolower($clean) :
        $clean;
} 
```

# php - ajax表单数据序列化失败

> ID：14377819
> 
> 赞同：0
> 
> 时间：2013-01-17T11:14:21.030
> 
> 标签：php, ajax

我有一个带有这样的表单的 HTML：

```
<html>

<head>
  <script type="text/javascript" src="js/jquery-1.8.3.js"></script>
</head>

<body>
  <form action="accept-file.php" method="post" enctype="multipart/form-data" id="theform">
    Your Photo: <input id="thefile" type="file" name="photo" size="25" />
    <input type="button" name="submit" value="Submit" onclick="submitform();"/>
  </form>
</body>

<script>

  function submitform()
  {
    data = $('*').serialize();

    $.post(
      'http://localhost/banksoal/1.0.0/accept-file.php',
      data
    );
  }

</script>

</html> 
```

和这样的 .php 脚本：

```
 <?php
  //if they DID upload a file...
  if($_FILES['photo']['name'])
  {
    print_r($_FILES['photo']);
    $message = 'default message';

    //if no errors...
    if(!$_FILES['photo']['error'])
    {
      //now is the time to modify the future file name and validate the file
      $new_file_name = 'd:\\' . '--test-- '.basename($_FILES['photo']['name']); //rename file
      if($_FILES['photo']['size'] > (1024000)) //can't be larger than 1 MB
      {
        $valid_file = false;
        $message = 'Oops!  Your file\'s size is to large.';
      }
      else
      {
        $valid_file = true;
      }

      //if the file has passed the test
      if($valid_file)
      {
        //move it to where we want it to be
        move_uploaded_file($_FILES['photo']['tmp_name'], $new_file_name);
        $message = 'Congratulations!  Your file was accepted.';
      }
    }
    //if there is an error...
    else
    {
      //set that to be the returned message
      $message = 'Ooops!  Your upload triggered the following error:  '.$_FILES['photo']['error'];
    }
  }

  var_dump($message);
?> 
```

问题：在 submitform() 函数中，在该行的脚本标记中：

```
data = $('*').serialize(); 
```

为什么我得到空结果？代码有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:27:41.807

改变这个

```
 data = $('*').serialize(); 
```

到

```
 data = $('theform').serialize(); 
```

并改变这个

```
 <form action="accept-file.php" method="post" enctype="multipart/form-data" id="theform"> 
```

到

```
 <form action="accept-file.php" method="post" enctype="multipart/form-data" id="theform" name ="theform"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:17:44.920

[试一试这里提到的： http](http://api.jquery.com/serialize/) ://api.jquery.com/serialize/

```
$('form').submit(function() {
  console.log($(this).serialize());
  return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:17:52.947

你也可以使用

```
echo json_encode($data); 
```

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T11:22:30.247

您不能使用 Ajax 上传文件，如果您必须以类似 AJAX 的方式上传文件，您可以使用隐藏的 iframe，将 target 属性设置为 iframe 并获取 iframe 的内容以了解请求是否失败

这是我通常为此目的所做的，创建一个隐藏的 iframe，它将成为表单的目标，如下所示：

```
<iframe name='formTarget' src='#' style='display:none;' onload='processResult(this);'></iframe> 
```

在 processResult 中，您可以通过以下方式获取 iframe 的内容：

```
$(results).html(); 
```

这样当 iframe 加载完成时会自动触发通知请求完成的功能

# c# - 使用具有 3 层架构的 MVC 模式

> ID：14377821
> 
> 赞同：0
> 
> 时间：2013-01-17T11:14:29.350
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework

我在我的应用程序中使用 ASP.NET MVC。我已将我的应用程序分为三层架构。1）数据访问层（使用实体框架），2）应用程序/业务层，3）表示层（ASP.NET MVC）。

因为我在表示层上使用 MVC 框架，所以我对业务逻辑感到困惑。我需要知道在 MVC 模式中我的业务逻辑应该放在哪里。换句话说，我们可以说我需要从哪里调用我的中间层。来自模型还是来自控制器？

如果我从 Controller 调用我的业务逻辑，那么模型似乎没用。否则，如果我从模型中调用业务逻辑，那么在系统上似乎是不必要的，因为业务对象与模型进行映射，然后将模型传递给控制器​​。模型正是 DTO 正在做的事情。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T11:24:02.003

`ASP.NET MVC`层或层既不包含业务逻辑也不包含业务模型。`M`in`MVC`代表 UI 模型，而不是应用程序核心的模型，并且`MVC`（以及其他`MV*`模式）通常是用于分离 UI 关注点的模式。您应该从控制器发送消息（调用）您的业务层 (BL)、聚合数据、创建或将结果映射到 UI 模型并将其传递给视图。您的 UI 模型应该对 BL 模型一无所知 - 这种区别使您的应用程序的层松散耦合。

> 换句话说，我们可以说我需要从哪里调用我的中间层。来自模型还是来自控制器？

绝对来自控制器。您将依赖项注入它并从您的 Action 方法中调用它们。ASP.NET MVC 为控制器提供了许多注入依赖项的机制，并与 NInject、StructureMap 和一些其他 IoC 容器很好地集成。

MVC 中组件之间的依赖关系如下所示

![在此处输入图像描述](../Images/693fb6bfae21f6a5b3387ba51f5a56b2.png)

图片取自 Martin 的 Fowler 关于[GUI 架构](http://martinfowler.com/eaaDev/uiArchs.html)的文章，顺便说一下，关于 MVC 和 MVP 的阅读非常好。

此外，[Pluralsight](http://www.pluralsight.com/training/Courses/TableOfContents/patterns-library)还提供了一组关于软件实践的视频，其中涵盖了设计模式。我从他们对 MVVM 和 MVP 的定义中学到了很多东西。

阅读这些材料不仅可以增加您对模式本身的理解，还可以了解它们如何适应应用程序环境并与之交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:33:20.977

这纯粹是您必须根据您的要求做出的设计/架构决定。

如果您想扩展您的应用程序以支持其他服务/应用程序，建议不要在 Controller/Model 中编写任何业务逻辑。您可以在业务/应用程序层中编写它。这将帮助您在未来扩展您的架构。假设您想为您的移动应用程序创建安静的服务，您可以将服务编写为包装器以重用现有的业务/应用程序层。

也只是看看领域驱动设计，埃里克埃文斯的书值得一​​读。

[http://dddsample.sourceforge.net/architecture.html](http://dddsample.sourceforge.net/architecture.html)

# javascript - 检查 AJAX 生成的内容是否可见

> ID：14377830
> 
> 赞同：0
> 
> 时间：2013-01-17T11:15:00.590
> 
> 标签：javascript, ajax, visible, thickbox

我试图阻止用户使用“F5”刷新页面，但只有在显示厚框时。

麻烦的是，在我在Thickbox 中的页面之间切换后，我在下面查看Thickbox 是否可见的检查总是返回false -

```
var bol_thickbox_shown = ($('#TB_window').is(':visible')) ? true : false; 
```

我认为这与加载页面的方式有关（可能是 AJAX 调用），但我不知道在检查Thickbox 是否可见时如何处理。有人可以帮忙吗？谢谢。

这是我的完整代码-

```
/**
 * Prevent F5 from refreshing the page if the Thickbox is shown
 */
document.onkeydown = function(e){

    /** Check to see if the Thickbox is being shown */
    var bol_thickbox_shown = ($('#TB_window').is(':visible')) ? true : false;
    console.log('bol_thickbox_shown: '+bol_thickbox_shown);

    if(bol_thickbox_shown && e.keyCode === 116){ // F5 keycode is 116

        e.preventDefault();
        e.returnValue = false; // for IE

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:55:00.323

您可以触发`var bol_thickbox_shown`此函数的外部，并在厚盒打开时将其设置为 true，如果它们关闭，则将其设置为 false。

例如：

```
var bol_thickbox_shown = false;

/* hook this bol_thickbox_shown true/false 
   to wherever you fire the Thickbox */

document.onkeydown = function(e){

    console.log('bol_thickbox_shown: '+bol_thickbox_shown);

    if(bol_thickbox_shown && e.keyCode === 116){ // F5 keycode is 116

        e.preventDefault();
        e.returnValue = false; // for IE

    }

} 
```

即使您不喜欢此解决方案，您也可以优化以下行：

```
var bol_thickbox_shown = ($('#TB_window').is(':visible')) ? true : false; 
```

至

```
var bol_thickbox_shown = $('#TB_window').is(':visible'); 
```

# java - 发出 http 请求时权限被拒绝

> ID：14377832
> 
> 赞同：2
> 
> 时间：2013-01-17T11:15:02.010
> 
> 标签：java, android, android-intent

我正在请求以下请求，并且我在 android 应用程序中遇到异常。

```
URL url = new URL(strURL);
URLConnection urlConnection = url.openConnection();

try {
    HttpURLConnection httpConn = (HttpURLConnection) urlConnection;
    httpConn.setRequestMethod("GET");
    httpConn.connect();

    if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
        is = httpConn.getInputStream();

    }
} catch (Exception ex) {

    System.out.println(ex);
} 
```

得到以下异常

```
java.net.SocketException: Permission denied 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:18:40.003

首先，将其放入清单中：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

如果您的应用要在高于 3.0 的 Android 版本上发布，您必须记住您需要在另一个线程中发出 http 请求（选项 1 和 2）。

选项 1（不推荐，但它有效：添加此行：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

但老实说，我不推荐第一个选项，但它确实有效。//================================================= ============================
选项2：

使用本教程制作正确的 ASyncTask：[http ://www.elvenware.com/charlie/development/android/SimpleHttpGetThread.html](http://www.elvenware.com/charlie/development/android/SimpleHttpGetThread.html)

//================================================= ============================ 使用 ASyncTask 作为最终任务（选项 2）。

他们在 Android 3.0+ 中更改了网络权限

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T11:16:50.910

添加`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>`到清单

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T11:21:18.367

将此添加到您的 manifest.xml

```
<!-- For Getting Network permission -->
<uses-permission android:name="android.permission.INTERNET"/> 
```

# android - 如何在布局消失时隐藏自动显示键盘

> ID：14377837
> 
> 赞同：1
> 
> 时间：2013-01-17T11:15:09.157
> 
> 标签：android, layout, keyboard, android-edittext

我的布局如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@android:color/background_dark"
    android:weightSum="1" >

    <LinearLayout
        android:id="@+id/layout_splash"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="0.3" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:src="@drawable/logo" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_marginTop="20dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/testoCaricamento"
            android:layout_gravity="center"
            android:textSize="20dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <LinearLayout
            android:id="@+id/layoutNomeTablet"
            android:visibility="gone"
            android:layout_width="match_parent"
            android:layout_marginTop="40dp"
            android:layout_height="wrap_content"
            android:weightSum="1" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:textSize="20dp"
                android:layout_marginRight="15dp"
                android:layout_weight="0.2"
                android:text="Nome tablet" />

            <EditText
                android:id="@+id/editText1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0.5" >

                <requestFocus />
            </EditText>

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="30dp"
                android:layout_weight="0.1"
                android:text="Salva" />

        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

当我的启动画面显示时，即使包含`EditText` 可见性的布局消失，键盘也会出现。仅当edittext可见且聚焦时如何显示键盘？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:24:26.003

尝试在您的 EditText 中进行此更改。

```
<EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight=""
</EditText> 
```

# pdf - Adobe Acrobat 压缩内部对象？

> ID：14377844
> 
> 赞同：0
> 
> 时间：2013-01-17T11:15:24.960
> 
> 标签：pdf, adobe, pdf-generation

我有一个简单的一页 PDF 文档。

使用 Adob​​e Acrobat X (10.1.4)，我添加了 2 个图形注释 (Ink)。到现在为止还挺好。

现在我在 Notepad++ 中打开文档进行检查。一切似乎都很好。有注释数组和两个注释。都好。

然后我在外部参照表中随机输入了一个空格字符“”，使文档“无效”。当我在 Adob​​e Acrobat X（版本 10.1.4）中打开它时，它能够显示所有内容（显然是在自动修复文档之后），然后问我，是否要将新版本保存到磁盘。我做到了。

现在我再次在 Notepad++ 中打开了该文档，只是发现它看起来与我进行修改之前的样子完全不同。

最奇怪的是，大部分对象都从文件中消失了！仍然有对它们的引用，但实际对象并不存在。此外，还有一堆平面解码的东西。

Adobe Acrobat 阅读器是否有可能不仅压缩流，还压缩包括“xy obj”和“endobj”标签在内的整个对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:25:55.227

自 PDF 1.5起，**对象流**已被引入 PDF 格式，参见。当前[PDF 规范 ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)的第 7.5.7 节：

> *对象流*是一个流对象，其中可以存储一系列间接对象，作为将它们存储在最外层文件级别的替代方案。
> 
> 注 1 对象流首先在 PDF 1.5 中引入。对象流的目的是通过使用流压缩过滤器提供的设施，允许更紧凑地存储流以外的间接对象。

通过允许 Adob​​e Acrobat 保存文档的修复版本，您隐含地允许它以其首选格式执行此操作，由于紧凑性使用对象流

# c# - 快速密码保护

> ID：14377845
> 
> 赞同：0
> 
> 时间：2013-01-17T11:15:25.147
> 
> 标签：c#, asp.net, webforms

我正在使用 c# .NET Web Forms 4.0

我有一个像下面这样的文件夹，我需要密码保护，所以任何想要查看页面的人都需要先输入用户名密码（我们告诉他们）才能查看页面。

例子：

www.abc.com/srlv/

所以在 srlv 下我有需要密码保护的网页。

有没有快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:21:40.273

您可以在 web.config 中使用[授权](http://msdn.microsoft.com/en-us/library/aa719554%28VS.71%29.aspx)和[位置设置。](http://msdn.microsoft.com/en-us/library/aa719746%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T11:16:27.887

最快的方法是为该文件夹启用 Windows 身份验证，然后关闭匿名访问。

这确实意味着您需要一个 Windows 帐户才能让他们登录（共享或个人）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:23:20.493

**最快**（不是最好）的方法是：

示例页面代码。（显然包括您常用的 Web 表单代码...母版页等。

```
<html>
<body>
<div id="login_form" runat="server">
 <asp:TextBox ID="username" runat="server"></asp:TextBox>
 <asp:TextBox ID="password"  TextMode="Password" runat="server"></asp:TextBox>
 <asp:Button ID="Login" OnClick="Login_Click" runat="server" Text="Login" />
</div>

<div id="rest_of_site" runat="server" visible="false">
//rest of site...
</div> 
```

然后在 Login_Click 事件上：

```
 protected void Login_Click(object sender, EventArgs e)
        {
            if ((username.Text == "Username") & (password.text == "Password"))
              {
                     login_form.visible = false;
                      rest_of_site.visible = true;
               }
            else { //show some error }
        } 
```

# javascript - 无法正确使用 facebook JS SDK

> ID：14377846
> 
> 赞同：0
> 
> 时间：2013-01-17T11:15:25.807
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我正在使用 facebook JS SDK 进行用户登录。我对它是如何工作的感到困惑。当我使用此代码时：

```
FB.init({
        appId     : '*********************************',
        channelURL: '*********************************',
        cookie    : true, 
        xfbml     : true,
        oauth     : true
    });
    FB.getLoginStatus(function(response){
        if(response.status == 'connected') {

    }
        else if(response.status == 'not_authorized') {
            /* Not Authorized */
            login();
        }
        else {
            /* Not Logged In*/
            /*login();*/
        }
    });
    FB.Event.subscribe('auth.login', function(response) {
        window.location.reload();
    });
    FB.Event.subscribe('auth.logout', function(response) {
        window.location.reload();
    });
}; /* method window.fbAsyncInit ends here*/
/* Checks user login status on facebook*/
function login(){
    FB.login(function(response) {
        if (response.authResponse) {
            //connected

        }
        else {
            //cancelled
        }
    }, {scope: 'email'});
} /*function login ends here*/ 
```

我无法获取用户电子邮件 ID。

如果我使用这个，它会给我用户电子邮件 ID。

```
FB.init({
        appId     : '********************',
        channelURL: '********************',
        cookie    : true, 
        xfbml     : true,
        oauth     : true
    });
    FB.getLoginStatus(function(response){
        if(response.status == 'connected') {
            /* Connected Successfully */
            FB.login(function(response) {
                // handle the response
                if (response.authResponse) {

        }
        else {
            //cancelled
        }
            }, {scope: 'email,user_likes'});              
}
        else if(response.status == 'not_authorized') {
            /* Not Authorized */
            login();
        }
        else {
            /* Not Logged In*/
            /*login();*/
        }
    });
    FB.Event.subscribe('auth.login', function(response) {
        window.location.reload();
    });
    FB.Event.subscribe('auth.logout', function(response) {
        window.location.reload();
    });
}; /* method window.fbAsyncInit ends here*/
/* Checks user login status on facebook*/
function login(){
    FB.login(function(response) {
        if (response.authResponse) {
            //connected

        }
        else {
            //cancelled
        }
    }, {scope: 'email,user_likes'});
} /*function login ends here*/ 
```

我正在获取电子邮件 ID。

请指出我在第一个代码中做错了什么？

编辑：根据建议，我在登录功能中添加了 {scope: 'email,user_likes'} 但仍然无法正常工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:58:48.963

> 案例 1：我无法获取用户电子邮件 ID。

唯一的原因可能是在您进行这些更改之前用户**已经获得授权。**尝试再次对新用户使用相同的代码，或者从您的[应用设置](https://www.facebook.com/settings?tab=applications)中删除该应用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T11:22:30.337

诀窍是添加 {scope: 'email,user_likes'}... 在第一个代码中，您缺少第二个代码中的这部分。它将允许您获取用户的电子邮件 ID 以及他的喜好...

# java - 带有客户端过滤器的 Jersey 客户端

> ID：14377847
> 
> 赞同：1
> 
> 时间：2013-01-17T11:15:26.273
> 
> 标签：java, web-services, rest, jersey

我正在使用泽西客户端。

```
Client client = Client.create();
client.addFilter(new Myfilter());
// do some other things 
```

和 Myfilter 类

```
public class Myfilter extends ClientFilter {

    public ClientResponse handle(ClientRequest cr) {
         System.out.println("called");
         ClientResponse resp = getNext().handle(cr);
         return resp;
    }
} 
```

我无法调用 Myfilter 的句柄方法。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-06T06:53:19.603

这是一个简单的示例（使用 jersey-client 版本 1.x），它导致将“调用”打印到控制台：

```
import com.sun.jersey.api.client.*;
import com.sun.jersey.api.client.filter.ClientFilter;

public class JerseyClientFilterExample {
    public static void main(String[] args) {
        Client client = Client.create();
        client.addFilter(new MyClientFilter());
        client.resource("http://google.com").get(ClientResponse.class);
    }
}

class MyClientFilter extends ClientFilter {
    @Override
    public ClientResponse handle(ClientRequest cr) throws ClientHandlerException {
        System.out.println("called");
        return getNext().handle(cr);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T11:18:03.233

本文介绍了如何为 jersey 客户端添加过滤器[。](http://docs.oracle.com/cd/E19182-01/821-0540/ug_restbc-filters_p/index.html)

希望能帮助到你

PS：如果您忘记将其添加到您的 web.xml

```
<init-param>
  <param-name>your.package.ClientFilter</param-name >
</init-param> 
```

例子

```
@Override
    public ClientResponse handle(ClientRequest request) throws ClientHandlerException {
        request.getHeaders().putSingle(HttpHeaders.CONTENT_TYPE, "application/json");
        return getNext().handle(request);
    } 
```

# r - 列表元素的表函数

> ID：14377848
> 
> 赞同：0
> 
> 时间：2013-01-17T11:15:43.493
> 
> 标签：r

我有一个看起来像这样的列表：

> 列表[[1]]
> 
> ```
>  GN  SN1  SN2      
>   a   0    0      
>   b   1    1     
>   c   0    0    
>   e   2    2     
>   f   0    1    
>   d   0    0 
> ```
> 
> 列表[[2]]
> 
> ```
>  GN  SN1  SN2      
>   e   0    1      
>   f   2    0     
>   g   1    1    
>   h   2    0     
>   i   1    0    
>   l   3    0 
> ```

我想：首先按列将“表”函数应用于列表的每个元素（因此对于每个列表[[1]]，列表[[2]]，...），然后使用例如这样的行一个结构：apply(list, 1, table) (lapply for lists) 或 apply(list, 2, table) 并以相同的方式按行求和，然后按列求和。

谁能帮我？

提前致谢，

B.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T11:59:27.560

可能是这样的...

```
lapply(List, apply, 1, table) # table by row
lapply(List, apply, 2, table) # table by cols 
```

输出不是很好。

更好的输出可能是：

```
list1 <- lapply(List, apply, 1, table) # table by row
list2 <- lapply(List, apply, 2, table) # table by cols

> # for list1
> lapply(list1, unlist) # output is a list
[[1]]
0 a 1 b 0 c 2 e 0 1 f 0 d 
2 1 2 1 2 1 2 1 1 1 1 2 1 

[[2]]
0 1 e 0 2 f 1 g 0 2 h 0 1 i 0 3 l 
1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 

> # for list2
> library(abind)
> # using abind function from abind package
> abind(lapply(list2, unlist), along=0)  # output is an array
     GN.e GN.f GN.g GN.h GN.i GN.l SN1.0 SN1.1 SN1.2 SN1.3 SN2.0 SN2.1
[1,]    1    1    1    1    1    1     4     1     1     3     2     1
[2,]    1    1    1    1    1    1     1     2     2     1     4     2

> # R base solution
> do.call(rbind, lapply(list2, unlist)) # output is an array
     GN.a GN.b GN.c GN.d GN.e GN.f SN1.0 SN1.1 SN1.2 SN2.0 SN2.1 SN2.2
[1,]    1    1    1    1    1    1     4     1     1     3     2     1
[2,]    1    1    1    1    1    1     1     2     2     1     4     2 
```

# linux - 如何在交叉编译 Windows 的 vlc 时包含 QtNetwork

> ID：14377851
> 
> 赞同：0
> 
> 时间：2013-01-17T11:15:48.223
> 
> 标签：linux, qt4, vlc, qnetworkaccessmanager, cross-compiling

我正在修改 vlc 源代码并添加了一些 UI 屏幕。我需要使用 QtNetwork 包，默认情况下 vlc 只有 QtCore 和 QtGui 包。

在为 Linux 编译时，我修改了主要的 vlc configure.ac 以包含 QtNetwork，它运行良好。但是当我尝试按照标准流程进行交叉编译时，配置步骤失败，即

../extras/package/win32/configure.sh --host=i686-w64-mingw32

表示无法定位 QtNetwork

**更新：** 后来启用 QtNetwork 时，我仍然获得对 QtNetwork 相关类及其功能的未定义引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:49:10.033

我终于在 VLC 论坛的 Olivier 的帮助下完成了这项工作。它假定您已经熟悉在 Linux 上为 windows 交叉编译 vlc。

首先，正如使用 QtNetwork 为 Linux 编译的那样，我假设 vlc 父级下的 configure.ac 直接还包含在 QtGui 或 QtCore 所在的每个位置提到的 QtNetwork。

其次，QtNetwork 库已经构建好了，我们需要在 contrib/src/qt4/rules.mak 的“INSTALLING PKGCONFIG FILES”部分下的“Core”和“Gui”之后添加“Network”。当然，你还需要一个 QtNetwork.pc.in 文件（复制并改编 QtGui.pc.in）。要添加的其他密钥库是 -llws2_32 以及 -lQtNetwork 本身。

您还需要显式禁用 OpenSSL 支持，否则与 libQtNetwork.a 的链接将失败并出现未解析的符号。一种方法是将 QT_NO_OPENSSL 添加到 src/network/network.pro。由于此文件是在 make .qt4 期间生成的，因此应为 network.pro 文件创建和应用补丁，类似于在 rules.mak 文件开头附近使用的其他补丁。

详细信息在[以下](http://comments.gmane.org/gmane.comp.video.videolan.vlc.devel/89654)vlc 开发线程中

# vb.net - 如何设置富文本框的背景色？

> ID：14377853
> 
> 赞同：1
> 
> 时间：2013-01-17T11:15:53.430
> 
> 标签：vb.net, richtextbox, backcolor

谁能知道如何将richtextbox的背景色设置为与表单的默认背景色相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:19:15.063

如果您在表单类代码中设置背景颜色，那么您可以简单地编写

```
rtb.BackColor = Me.BackColor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:18:17.187

```
RichTextBox1.BackColor = Form1.BackColor 
```

或者

```
RichTextBox1.BackColor = System.Drawing.SystemColors.Control 
```

# image - 块均值散列法

> ID：14377854
> 
> 赞同：5
> 
> 时间：2013-01-17T11:15:53.377
> 
> 标签：image, image-processing, hash

在[Block Mean Value Based Image Perceptual Hashing 中](http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=4041692)，Bian Yang 提出了一种散列方法，它说：

第一个感知散列函数基于均值

```
a) Normalize the original image into a preset sizes;

b) Divide the size-normalized image I into non overlapped blocks I1, I2, …, IN, 
in which N is the block number equal to length of the final hash bit string;

c) Calculate the mean value sequence {M1, M2, …, MN} from corresponding 
block sequence {I’1, I’2, …, I’N } and obtain the median value Md of 
this sequence as: Md = median (Mi) (i=1,2,…, N) 

d) Normalize the mean value sequence into a binaryform and obtain the hash 
values h as:
h(i)=0 if Mi<Md
h(i)=1 if Mi>= Md 
```

我的问题在“b”部分，有人知道图像是如何分成块的吗？是这样的吗？ ![在此处输入图像描述](../Images/89dccdfb322d360529024be1c982aba5.png)

# backbone.js - Backbone：仅在尚不存在时添加事件侦听器

> ID：14377856
> 
> 赞同：5
> 
> 时间：2013-01-17T11:15:59.390
> 
> 标签：backbone.js, backbone-events

换句话说：我如何找到已经被收听的事件列表？

我正在使用 Backbone.on(... 和 Backbone.trigger(... 在两个彼此不了解的视图之间进行通信。但是，添加侦听器的视图实际上是一个集合，因此我添加了许多侦听器，因此我想首先检查该事件是否已被侦听。10x。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T11:57:30.433

该`Backbone.Events`对象有一个事件字典，称为`_events`

因此，要检查是否已经在监听某个事件，您可以例如在相关视图中实现一个函数：

```
isEventListenedTo: function(eventName) {
  return (view._events) ? !!view._events[eventName] : false;
} 
```

`_events`-dictionary 包含每个事件名称的数组，因此您还可以检查事件被监听的次数等。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:00:09.023

的属性

Object._callbacks

匹配您的活动名称

# c++ - ODBC：参数数组 - 忽略参数

> ID：14377859
> 
> 赞同：1
> 
> 时间：2013-01-17T11:16:24.010
> 
> 标签：c++, c, sql-server, sql-server-2008, odbc

在使用参数数组进行插入/更新期间，可以忽略一个/一些特定行的一个/一些参数。

我提供一个简单的例子。想象一下，我们有一个包含 3 列的表：X、Y 和 Z。我们希望在块中执行更新（如果缺少某些参数请忽略，与讨论无关）：

```
#define N_ROWS_PER_BLOCK 100
int h_x[N_ROWS_PER_BLOCK];
int h_y[N_ROWS_PER_BLOCK];
int h_z[N_ROWS_PER_BLOCK];

// Fill h_x, h_y and h_z with the values that we want - doesn't matter to this question
// (...)
strexec = "UPDATE table SET X = ?, Y = ?, Z = ?"

SQLBindParameter(stmt_handle, 1, SQL_PARAM_INPUT, SQL_C_SLONG, SQL_INTEGER, 0, h_x, 0, NULL);
SQLBindParameter(stmt_handle, 2, SQL_PARAM_INPUT, SQL_C_SLONG, SQL_INTEGER, 0, h_y, 0, NULL);
SQLBindParameter(stmt_handle, 1, SQL_PARAM_INPUT, SQL_C_SLONG, SQL_INTEGER, 0, h_z, 0, NULL);

SQLSetStmtAttr(stmt_handle, SQL_ATTR_PARAMSET_SIZE, (SQLPOINTER)N_ROWS_PER_BLOCK, 0);
SQLExecDirectA ( stmt_handle, (SQLCHAR*)strexec , SQL_NTS ); 
```

**问题**：现在想象一下，出于某种原因，我们希望在语句执行中***忽略第 60 行中的参数 X。***这样做的好处是我们可以准备一个包含“所有列/属性”的语句，并且只更新每一行中我们想要的属性/列。

如果可能的话，我该怎么做？我可以指出一些（虚拟）示例吗？

我阅读了 ODBC 文档并知道可以使用**SQL_ATTR_PARAM_OPERATION_PTR**属性并设置 SQL_PARAM_PROCEED 或 SQL_PARAM_IGNORED 来忽略（完整）行（一组参数），但我**不想忽略行的所有属性**，**只是一个参数行**。

**编辑：**

我在 IBM ODBC 文档（扩展指标）中找到了这个：

*   [http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z10.doc.odbc%2Fsrc%2Ftpc%2Fdb2z_afarinp.htm](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z10.doc.odbc%2Fsrc%2Ftpc%2Fdb2z_afarinp.htm)
*   [http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z10.doc.odbc%2Fsrc%2Ftpc%2Fdb2z_fnbindparameter.htm](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z10.doc.odbc%2Fsrc%2Ftpc%2Fdb2z_fnbindparameter.htm)

“ODBC 应用程序可以使用扩展指示器来更新 UPDATE、INSERT 和 MERGE 语句中的所有列，而无需指定不需要更改的列的当前值。

如果您使用扩展指标，则无需为要插入的每个列组合编写单独的 INSERT 语句”

SQL_UNASSIGNED：“对于 UPDATE 和 MERGE UPDATE 操作，将忽略绑定参数的目标列。该参数的处理方式与 INSERT 和 MERGE INSERT 操作的 DEFAULT 关键字相同。”

本机客户端可以做到这一点吗？在 Microsoft 文档中没有出现对 SQL_UNASSIGNED 的任何引用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:20:48.770

您可以创建和准备 2 个语句：

```
strexec1 = "UPDATE table SET X = ?, Y = ?, Z = ?";
strexec2 = "UPDATE table SET Y = ?, Z = ?" 
```

然后只需选择应该批量执行的语句

# regex - 通过正则表达式过滤特定的词形句子

> ID：14377864
> 
> 赞同：-1
> 
> 时间：2013-01-17T11:16:31.560
> 
> 标签：regex

我正在尝试制作一个正则表达式，当用户给出特定输入（如feat，ft）时会出错。我确实希望在句子中允许这种输入。我该如何解决这个问题。

例如：

不正确的壮举

rahin（壮举）-不正确

不正确

我创建了一个正则表达式：/^(?!. *(feat|artists|Diverse Artister|Feat|Feat.Featuring))。*$/

在这个正则表达式中

featable- 不正确。但我需要这个正确的

有没有人解决过这种问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:20:14.277

如果您的问题是如何创建一个选择整个单词而不是单词一部分的正则表达式，请尝试以下操作：

```
\bfeat\b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:28:29.247

如果您希望唯一正确的单词是可行的，那么使用`\bfeatable\b`

看看这个[Regex Expression](http://gskinner.com/RegExr/) builder，它很有用。构建器会突出显示您输入的表达式的正确单词。

# ios - 同一标签中的不同字体大小？

> ID：14377866
> 
> 赞同：7
> 
> 时间：2013-01-17T11:16:38.197
> 
> 标签：ios, uilabel, nsattributedstring, uifont

在同一个 UILabel 中是否可以有不同的字体大小或粗细？我可以在情节提要中将其作为属性标签进行，但我需要以编程方式进行。

```
cell.lblOne.text = [NSString stringWithFormat:
                       @"FontSize15:: %@, FontSize20:: %@",monkey, goat]; 
```

编辑：我看到了一些关于 NSAttributedString 的东西，但我无法让它工作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T15:28:20.667

看看我在这里的回答：

[UITextView 替代方案](https://stackoverflow.com/questions/13932550/uitextview-alternative/13933012#13933012)

*   制作一个 NSMutableAttributedString
*   给它一些属性（应用于字符范围）
*   设置标签的属性文本属性

.

```
 NSMutableAttributedString *attString = 
                              [[NSMutableAttributedString alloc]
                                        initWithString: @"monkey goat"];

[attString addAttribute: NSForegroundColorAttributeName
                  value: [UIColor redColor]
                  range: NSMakeRange(0,6)];

[attString addAttribute: NSFontAttributeName
                  value:  [UIFont fontWithName:@"Helvetica" size:15]
                  range: NSMakeRange(0,6)];

[attString addAttribute: NSFontAttributeName
                  value:  [UIFont fontWithName:@"Didot" size:24]
                  range: NSMakeRange(7,4)];

self.label.attributedText  = attString; 
```

# javascript - 如何移动/更改 JavaScript 对象数组（JSON）的位置/顺序？

> ID：14377867
> 
> 赞同：2
> 
> 时间：2013-01-17T11:16:40.107
> 
> 标签：javascript, jquery

假设我有这个 javascript 对象数组，

```
[{a:'a', b:2, c:true}, {a:'b', b:3, c:true}, {a:'a1', b:3, false}] 
```

假设我需要将索引 0 处的对象移动到 2。我尝试过这个函数但没有运气。

```
 Array.prototype.move = function (old_index, new_index) {
    if (new_index >= this.length) {
        var k = new_index - this.length;
        while ((k--) + 1) {
            this.push(undefined);
        }
    }
    this.splice(new_index, 0, this.splice(old_index, 1)[0]);
  }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:36:23.277

对象数组不正确，它需要最后一项中的“c”变量：

```
[{a:'a', b:2, c:true}, {a:'b', b:3, c:true}, {a:'a1', b:3, c:false}]; 
```

工作示例：http: [//jsfiddle.net/WgLKc/1/](http://jsfiddle.net/WgLKc/1/)

# ios - 如何生成“AWS 身份验证字符串”以从 iOS 向 CloudFront 发送 POST？

> ID：14377876
> 
> 赞同：3
> 
> 时间：2013-01-17T11:17:12.697
> 
> 标签：ios, amazon-web-services, amazon-cloudfront

我想使用 CloudFront API 来发布一个失效请求 (http://docs.aws.amazon.com/AmazonCloudFront/latest/APIReference/CreateInvalidation.html)。

请求应如下所示：

```
POST /2012-07-01/distribution/distribution ID/invalidation HTTP/1.0
Host: cloudfront.amazonaws.com
Authorization: AWS authentication string
Content-Type: text/xml
Other required headers

<?xml version="1.0" encoding="UTF-8"?>
<InvalidationBatch xmlns="http://cloudfront.amazonaws.com/doc/2012-07-01/">
  <Paths>
    <Quantity>number of objects to invalidate</Quantity>
    <Items>
     <Path>/path to object to invalidate</Path>
    </Items>
  </Paths>
  <CallerReference>unique identifier for this invalidation batch</CallerReference>
</InvalidationBatch> 
```

**从我的 iPhone 应用程序生成“AWS 身份验证字符串”的最佳方法是什么？**

此链接描述了如何创建字符串，但似乎过于复杂：[http ://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/RESTAuthentication.html](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/RESTAuthentication.html)

如果有帮助的话，我可以访问我的 PEM 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-25T19:33:28.337

[我在AWS iOS SDK](http://docs.aws.amazon.com/AWSiOSSDK/latest/)中没有看到它。听起来它可能[还没有](https://stackoverflow.com/a/20291275/462002)。这很奇怪，因为其他库，如 Ruby 的[雾](https://stackoverflow.com/a/16598533/462002)和[aws-cloudfront](https://github.com/iltempo/aws-cloudfront)，似乎有办法。

# javascript - Phonegap 替换 phonegap 一的 javascript 通知

> ID：14377877
> 
> 赞同：0
> 
> 时间：2013-01-17T11:17:16.287
> 
> 标签：javascript, html, xcode, cordova, alert

嗨，我的 phonegap 应用程序有问题

所以这是我的html代码

```
<body>
<script>
window.onload = function() {

    document.getElementById("a_next").onclick = function(e) {
        e = e || window.event;
        var els = document.getElementsByTagName("input"),
            i;
        for (i=0; i < els.length; i++) {
            if (!els[i].checked) {
                alert("Not all points on your checklist, are checked!");
                return false;
            }
        }
    };
};
</script>

<div id="topbar">
<div id="title">
        Walk Around Check</div>
    <div id="leftnav">
    <a href="index_aerosoft.html">Home</a><a href="katana_checklist_all.html">Overview</a></div>
    <div id="rightnav">
        <a href="katan_checklist_beforeenginestarting.html"id="a_next">Next</a></div>
</div>
<div id="content">
        <ul class="pageitem">
            <li class="radiobutton"><span class="name">Electronic List - check all items</span>
            <input name="1" type="radio" value="other" /></li>
        </ul>

</div>
<div id="footer">
        <!-- Support iWebKit by sending us traffic; please keep this footer on your page, consider it a thank you for my work :-) -->
    <a class="noeffect" href="katana_checklist_walaroundcheck.html">Reset Checklist</a><br /><br />
    <a class="noeffect" href="http://www.aerosoft.com">Aerosoft</a></div>

</body> 
```

所以我想用 phonegap 警报添加或替换 javascript 警报

```
document.getElementById("a_next").onclick = function(e) {
            e = e || window.event;
            var els = document.getElementsByTagName("input"),
                i;
            for (i=0; i < els.length; i++) {
                if (!els[i].checked) {
                    alert("Not all points on your checklist, are checked!");
                    return false;
                }
            }
        }; 
```

所以我会在

```
<head>
 function showAlert() {
        navigator.notification.alert(
            'You are the winner!',  // message
            alertDismissed,         // callback
            'Game Over',            // title
            'Done'                  // buttonName
        );
    }
</head> 
```

并让 javascript 警报旁边的警报上诉

```
<body>
<script>
window.onload = function() {

    document.getElementById("a_next").onclick = function(e) {
        e = e || window.event;
        var els = document.getElementsByTagName("input"),
            i;
        for (i=0; i < els.length; i++) {
            if (!els[i].checked) {
                alert("Not all points on your checklist, are checked!");
                showAlert();
                return false;
            }
        }
    };
};
</script> 
```

这不起作用并使我的孔检查崩溃“所有都已检查”任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:34:03.100

它在这里工作：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Notification Example</title>

        <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
        <script type="text/javascript" charset="utf-8">

            // Wait for Cordova to load
            //
            document.addEventListener("deviceready", onDeviceReady, false);

            // Cordova is ready
            //
            function onDeviceReady() {
                // Empty
            }

            // alert dialog dismissed
            function alertDismissed() {
                // do something
            }

            // Show a custom alertDismissed
            //
            function showAlert() {
                navigator.notification.alert(
                                             'You are the winner!',  // message
                                             alertDismissed,         // callback
                                             'Game Over',            // title
                                             'Done'                  // buttonName
                                             );
            }

            </script>
    </head>
    <body>
        <p><a href="#" onclick="showAlert(); return false;">Show Alert</a></p>
    </body>
</html> 
```

在这里它不起作用：

```
 <!DOCTYPE html>
    <html>
        <head>
            <title>Notification Example</title>

            <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
            <script type="text/javascript" charset="utf-8">

                // Wait for Cordova to load
                //
                document.addEventListener("deviceready", onDeviceReady, false);

                // Cordova is ready
                //
                function onDeviceReady() {
                    // Empty
                }

                // alert dialog dismissed
                function alertDismissed() {
                    // do something
                }

                // Show a custom alertDismissed
                //
                function showAlert() {
                    navigator.notification.alert(
                                                 'You are the winner!',  // message
                                                 alertDismissed,         // callback
                                                 'Game Over',            // title
                                                 'Done'                  // buttonName
                                                 );
                }

                </script>
            <meta content="yes" name="apple-mobile-web-app-capable" />
            <meta content="index,follow" name="robots" />
            <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
            <link href="pics/iosIcon.png" rel="apple-touch-icon" />
            <meta content="minimum-scale=1.0, width=device-width, maximum-scale=0.6667, user-scalable=no" name="viewport" />
            <link href="css/style.css" rel="stylesheet" media="screen" type="text/css" />
            <script src="javascript/functions.js" type="text/javascript"></script>
        </head>
        <body>
            <p><a href="#" onclick="showAlert(); return false;">Show Alert</a></p>
        </body>
    </html> 
```

我的任何其他包含可能会阻止警报？^^

更新

好吧，我看看我是否排除了它工作的function.js

```
var iWebkit;if(!iWebkit){iWebkit=window.onload=function(){function fullscreen(){var a=document.getElementsByTagName("a");for(var i=0;i<a.length;i++){if(a[i].className.match("noeffect")){}else{a[i].onclick=function(){window.location=this.getAttribute("href");return false}}}}function hideURLbar(){window.scrollTo(0,0.9)}iWebkit.init=function(){fullscreen();hideURLbar()};iWebkit.init()}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:37:34.543

```
window.onload = function() {
    document.getElementById("a_next").onclick = function() {
        document.getElementsByTagName("input").each(function () {
            if (!jQuery(this).checked) {
                alert("Not all points on your checklist, are checked!");
                showAlert();
                return false;
            }
        });
    };
}; 
```

Versuchs mal damit Nein der andere Code sollte da nichts blocken。

# django - Django i18n 用 html 翻译文本

> ID：14377884
> 
> 赞同：4
> 
> 时间：2013-01-17T11:17:46.480
> 
> 标签：django, django-templates

在翻译中如何处理 HTML？我想翻译带有 HTML 的句子。例如这样的字符串（`[login]`是一个链接）：

```
Please [login] to view your profile. 
```

我不想打扰我的翻译人员翻译与 html 交织在一起的文本。另一方面，我不想费心在我的视图中创建所有链接，就像在[这个问题](https://stackoverflow.com/questions/3397218/translating-text-blocks-with-django-what-to-do-with-the-html)中建议的那样。因此，理想情况下，我想要一个仅模板的解决方案，以具有制作 HTML 的灵活性，同时允许翻译人员仅使用文本字符串。

例如，这个伪代码实现了这些要求：

```
{% render as login_html %}
    <a href="{{ url 'login' }}?next={{ request.path|urlencode }}">
        {% trans "Login" %}
    </a>
{% endrender %}

{% blocktrans with login=login_html %}
    Please {{ login }} to view your profile.
{% endblocktrans %} 
```

首先，登录 HTML 被呈现并存储为`login_url`. 然后在我的 blocktrans 中，我可以简单地使用`{{ login }}`来提供呈现的登录 HTML。这个问题有（类似的）解决方案，还是需要自定义模板标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:20:22.813

我创建了一个通用`render`标签来做到这一点：

```
from classytags.arguments import Argument, Flag
from classytags.core import Options
from classytags.helpers import AsTag
from django import template
from django.utils.safestring import mark_safe

register = template.Library()

class Render(AsTag):
    """
    Renders the block contents to be used elsewhere in the template.

    Example usage:

        {% render as login_url %}
            <a href="{% url 'login' %}">{% trans "Login" %}</a>
        {% endrender %}

        {% blocktrans %}
            Please {{ login_url }} for more information.
        {% endblocktrans %}

    It will automatically strip leading and trailing whitespace, use `nowrap`
    to disable this behaviour:

        {% render nostrip as varname %} . . . {% endrender %}
    """
    options = Options(
        Flag('strip', default=True, false_values=['nostrip']),
        'as',
        Argument('varname', resolve=False, required=True),
        blocks=[('endrender', 'nodelist')],
    )

    def get_value(self, context, nodelist, strip, **kwargs):
        value = nodelist.render(context)
        if strip:
            value = value.strip()
        return mark_safe(value)
register.tag(Render) 
```

当与翻译上下文（例如`{% trans "Login" context "login_url" %}`）一起使用时，翻译人员将对翻译有很好的控制，同时仍然不会被 HTML 所困扰。

```
msgctxt "login_url"
msgid "Login"
msgstr ""

#, python-format
msgid "Please %(login_url)s for more information."
msgstr "" 
```

# python - 为什么线程内的语句不起作用？

> ID：14377888
> 
> 赞同：0
> 
> 时间：2013-01-17T11:18:02.103
> 
> 标签：python, linux, ubuntu, python-2.7, archlinux

该按钮正在工作，但线程根本不起作用。是什么导致它失败？ `thread.start_new_thread(task1)`语句不执行。

/var/tmp/p.py：

```
import sys,os
import pygtk, gtk, gobject
import socket, datetime, threading
import ConfigParser
import urllib2
import subprocess
import threading
import thread

# Singleton run once
import fcntl, sys
pid_file = '/var/tmp/program.pid'
fp = open(pid_file, 'w')
try:
  fcntl.lockf(fp, fcntl.LOCK_EX | fcntl.LOCK_NB)
except IOError:
  # another instance is running
  sys.exit(0)

# Read config file
server="http://blabla"
username="stackoverflow"
password="freak"
language="EN"    
# Disconnect
get_disconnect="/a/disconnectusername?username=%s&password=%s&language=%s" % (username,password,language)
disconnect_url="%s%s" % (server,get_disconnect)

# Do multi-thread without blocking the main front-end
def task1():
  urllib2.urlopen(disconnect_url)

class GTK_Main:

  def __init__(self):
    # main GTK
    self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
    self.window.set_size_request(1280, 720)
    self.window.set_border_width(10)
    self.window.set_decorated(False)
    self.window.set_title("Test")
    self.window.move(0,0)
    self.window.connect("destroy", gtk.main_quit, "WM destroy")

    hbox = gtk.HBox(False, 0)
    self.vbox.pack_start(hbox, False)    
    hbox.set_border_width(10)
    hbox.pack_start(gtk.Label(), True, True, 0)

    # Disconnect
    self.button_disconnect = gtk.Button()
    self.button_disconnect.set_name("disconnectButton")
    self.button_disconnect.connect("clicked", self.disconnectButton)    
    hbox.pack_start(self.button_disconnect, False)   

    hbox.add(gtk.Label())    
    self.window.show_all()
    self.window.set_keep_above(True)

    if(self.window.get_window().get_state() == gtk.gdk.WINDOW_STATE_MAXIMIZED):
      print "unmaximize"
      self.window.unmaximize()

  def disconnectButton(self, w):
    print "Window Resize"
    #subprocess.call("java -cp /var/tmp/dist/Audio.jar ui.Connecting1 wait..", shell=True)
    #urllib2.urlopen(disconnect_url)
    try:
      #t1 = threading.Thread(target=task1)
      #t1.start()
      thread.start_new_thread(task1)
    except:
      print "Error: threading.."

    subprocess.call("/var/tmp/runme.sh", shell=True)

try:
  GTK_Main()
  gtk.gdk.threads_init()
  gtk.main()
except (SystemExit, KeyboardInterrupt):
  sock.close()
  gtk.main_quit() 
```

/var/tmp/runme.sh：

```
#!/bin/bash
export DISPLAY=:0.0
# kill please
ps aux | grep p.py | awk '{print $2}' | xargs kill -9;
sleep 2
# kill please
ps aux | grep p.py | awk '{print $2}' | xargs kill -9;
sleep 2
# kill for sure please
ps aux | grep p.py | awk '{print $2}' | xargs kill -9;
# cross finger and run now
python /var/tmp/p.py & 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:45:29.370

发生这种情况是因为

1）您正在运行多线程抓取网页链接，但我们的链接将需要一些时间来回包，需要等待一段时间...

2）立即杀死python并重新启动它，结果它杀死了线程，这表示它没有工作

3）解决此类问题使用

```
 t1 = threading.Thread(target=task1)
  t1.start()
  t1.join() # this tells to wait until job is done (url crawl)

  #thread.start_new_thread(task1) 
```

# vb.net - 如何为共享点访问设置网络目录的权限？

> ID：14377890
> 
> 赞同：1
> 
> 时间：2013-01-17T11:18:08.897
> 
> 标签：vb.net, sharepoint, web-parts, user-accounts, folder-permissions

我创建了一个可视化 Web 部件并将其放置在我的 sharepoint 站点中。

此 Web 部件访问并显示来自我网络上的 excel 文件的数据，示例目录是`\\server1\files\file.xls`

我可以通过对域中的“每个人”应用读取访问权限来使其工作。

我想锁定此文件，以便只有共享点站点可以访问此数据，而其他所有人都无法在共享点站点之外访问它。

我的问题基本上是：sharepoint 使用我域上的默认用户帐户是什么？

如果我能找到这一点，我可以将读取权限应用于此帐户，而无需将其应用于所有用户。

谢谢凯尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:46:00.940

You should try to apply read permissions to the account that is used as application pool identity for your SharePoint web application. You can find this account in IIS Manager.

# html - CSS 定位 - 固定中心 - 固定左侧和固定右侧元素

> ID：14377894
> 
> 赞同：0
> 
> 时间：2013-01-17T11:18:20.997
> 
> 标签：html, css

我在为 iPad 创建的网站中的幻灯片具有以下结构

```
<div id="slide4">
    <div class="slide4A1"></div>
    <div class="slide4A2"></div>
    <div class="slide4A3"></div>
</div> 
```

每个块都包含通过媒体查询控制的背景图像，以允许它们填满屏幕，无论 Ipad 是纵向还是横向。

我需要为块设置动画，但希望位置如下 -

.slide4A1 - 固定左侧 .slide4A2 - 固定中心 .slide4A3 - 固定右侧

我试过左右浮动幻灯片 1 和 3 并以自动边距居中 - 但布局误入歧途 - 有什么想法吗？

js 小提琴在这里 - [http://jsfiddle.net/chunk_pd/PAqSb/6/](http://jsfiddle.net/chunk_pd/PAqSb/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:55:38.657

我相信这是您期望看到的：

**CSS：**

```
#slide4 {position: relative; }
.slide4A1, .slide4A3{ position:absolute; top: 0; }
.slide4A1{background:#000;  width:120px; height:1024px; left:-120px;}
.slide4A2{background:#367ab2; width:531px; height:1024px; margin-left:auto; margin-right:auto; position:relative!important; display: none;}
.slide4A3{background:#ff7e00; width:120px; height:1024px; right:-120px;} 
```

**JS：**

```
function goDown3bPt2(){
                $('.slide4A1').animate({left:'0',}, 1600);
                $('.slide4A2').fadeIn('slow');
                $('.slide4A3').animate({right:'0',}, 2100);

        } 
```

更新[了 jsfiddle](http://jsfiddle.net/PAqSb/7/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:14:43.890

首先你必须清理你的 CSS - 组合`position: absolute;`并且`float`不会工作。使用您的包装器`<div id="slide4">`并将其定位设置为相对和`width: 100%`. 两个动画 div 都必须有`position: absolute; top: 0px;`才能到达包装器的顶部。

更重要的是 - 你的 JS 中有一个错字：

`$('.slide4A1').animate({left:'0px;',}, 1600);`只需删除；之后`0px`，瞧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:21:59.340

应用宽度：100%，边距：0 自动到 slide4 宽度：33 % 到 slide4A1，slide4A2，slide4A3

向左浮动到 slide4A1 和向右浮动到 slide4A3 类....！

# jquery - 通过 Jquery 使用 Image 打印动态生成的 DIV

> ID：14377895
> 
> 赞同：1
> 
> 时间：2013-01-17T11:18:27.093
> 
> 标签：jquery, google-chrome

我动态生成图像，然后将该图像嵌入到带有一些文本的 div 中。我尝试通过名为**jquery.printElement.min.js**的 jquery 插件打印带有图像的动态 div，这个插件在 firefox 和 IE 中工作正常，但在 Chrome 中不起作用。所以这是我用来打印 DIV 的代码。

```
 $("#Print").click(function () {
        if (ImgPath != '') {
            var ImagePath = location.protocol + "//" + location.host + ImgPath;
            alert("Your track number " + _TrackNumber);
            sHtml = "<div id=dvPrint><table>";
            sHtml += "<tr><td><img src=" + ImagePath + " height=600 width=400 border=0/></td></tr>";
            sHtml += "<tr><td>" + $('#lblTxt').html() + "</td></tr>";
            sHtml += "</table></div>";
            var $dvPrint = $(sHtml);
            $dvPrint.printElement();

        }
        else {
            alert("Image not found for print");
        }
        return false;
    }); 
```

我只是无法弄清楚我的代码中有什么问题，Chrome 无法打印，而是打开了一个打印预览对话框，但没有 chrome 的图像。如何排序。我需要为 chrome 使用任何其他插件吗？请指导。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:11:58.663

> Chrome 支持有很长很长的两年历史，很多用户抱怨 Chrome 缺少后台打印等基本功能是多么可笑。

换句话说：Chrome 不会打印 div 的背景。

查看此答案以获取更多详细信息：

[https://superuser.com/questions/117162/printing-background-colours-in-chrome](https://superuser.com/questions/117162/printing-background-colours-in-chrome)

# perforce - 用于在客户端视图的更改列表中获取文件的 Perforce 命令

> ID：14377899
> 
> 赞同：2
> 
> 时间：2013-01-17T11:18:31.120
> 
> 标签：perforce

我正在使用该命令`p4 describe <changelist>`，但它根据 perforce 服务器视图提供了更改列表下的文件列表。我想要客户端视图中的文件列表。怎么做 ？可以以某种方式`where`结合命令`describe`以获得所需的结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:56:25.217

你不能这样做：

```
p4 -c yourclient files //yourclient/...@=changelistnumber 
```

?

# jquery - 从 .find 返回一个 div 并将其包装在 html 中

> ID：14377900
> 
> 赞同：0
> 
> 时间：2013-01-17T11:18:39.860
> 
> 标签：jquery, find

我已经尝试了这个（.load）（.find）（.get）的一些变体，所有这些都在同一点下降。我正在尝试从另一个页面的一组特定 DIV 中提取信息（这很好用）。现在我遇到的问题是它所提取的信息被（正确地）包装在 < li > 标签中。

我需要某种方法将此信息放入 div 中，然后确保将其包装在 <ul> 标记中以形成正确的列表。

我的JS代码如下：

```
$.get('pagetopulldatafrom.asp ', function (data) {
var posts = ' < ul id = "datalist" > ' + $(data).find('#testpull ') + ' < /ul>';
$('#result').append(posts)}); 
```

我的 HTML：

```
 <div class="more" id="readmore">
    <br />
    <div id="result">
    </div> 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:25:58.607

`posts`您的HTML 字符串中有很多错误。太多使代码无效的无用空格。另一个错误是在`posts`字符串中你这样做：

```
'<ul id="datalist">' + $(data).find('#testpull') + '</ul>' 
```

这是错误的，因为您将`$(data).find('#testpull')`（不是 HTML 字符串，而是`<li>`元素的 jQuery 表示）的结果添加到您的字符串中。你可以用这种方式重写你的代码：

```
'<ul id="datalist">' + $(data).find('#testpull').html() + '</ul>' 
```

它应该可以工作。

通常，对于简单的 HTML 代码，我使用字符串，但是当使用字符串处理变得更加困难时，我更喜欢（因为这里使用了 jQuery）来使用它的所有功能，所以试试这个：

```
var posts = $('<ul>').attr('id','datalist').append($(data).find('#testpull')); 
```

它与您的字符串相同，但具有功能性。

# ios - 如何将 orge 3d 作为视图控制器添加到我的项目中

> ID：14377904
> 
> 赞同：0
> 
> 时间：2013-01-17T11:18:52.540
> 
> 标签：ios, ogre

我正在使用 3D 应用程序，我需要加载一个大的 3D 模型。cocos3D 无法渲染它，但 Ogre3d ( [www.ogre3d.org](http://www.ogre3d.org) ) 可以。

我尝试将 orge3d 添加为视图控制器，但幸运的是，我不能。Orge3d创建一个可以通过的uiwindow对象

```
UIWindow* uiWindow;
RenderWindow* mWindow = Ogre::Root::getSingleton().getAutoCreatedWindow();
mWindow->getCustomAttribute("WINDOW", &uiWindow); 
```

我的应用程序是一个导航应用程序，我需要在添加 3D 模型之前推送一些视图控制器，所以我不知道该怎么做。任何人都可以提供帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:38:43.987

Ogre3d 提供[`OgreView`](http://www.ogre3d.org/docs/api/html/interfaceOgreView.html)和[`EAGLViewController`](http://www.ogre3d.org/docs/api/html/interfaceEAGLViewController.html).

所以，我相信你可以直接实例化视图或控制器，然后通过以下方式初始化 ogre：

```
[self initOgreWithWnd:nil andView:glview]; 
```

或者

```
[self initOgreWithWnd:nil andView:glController.view]; 
```

我会尝试直接实例化控制器，但似乎使一切正常工作可能比这更复杂，如[本讨论](http://www.ogre3d.org/forums/viewtopic.php?f=2&t=71508)所示。

# python - 遍历一系列生成器

> ID：14377907
> 
> 赞同：5
> 
> 时间：2013-01-17T11:19:06.337
> 
> 标签：python, algorithm

我有一系列生成器： (gen_0, gen_1, ... gen_n)

这些生成器将懒惰地创建它们的值，但它们是有限的，并且可能具有不同的长度。

我需要能够构造另一个生成器，该生成器按顺序生成每个生成器的第一个元素，然后是第二个元素，依此类推，跳过已用尽的生成器中的值。

我认为这个问题类似于取元组

```
((1, 4, 7, 10, 13, 16), (2, 5, 8, 11, 14), (3, 6, 9, 12, 15, 17, 18)) 
```

并遍历它，使其按顺序产生从 1 到 18 的数字。

我正在使用 (genA, genB, genC) 解决这个简单的示例，其中 genA 产生的值来自 (1, 4, 7, 10, 13, 16)，genB 产生 (2, 5, 8, 11, 14) 和genC 产生 (3, 6, 9, 12, 15, 17, 18)。

为了解决元组元组的更简单问题，如果元组的元素长度相同，则答案相当简单。如果变量“a”引用元组，您可以使用

```
[i for t in zip(*a) for i in t] 
```

不幸的是，这些项目的长度不一定相同，而且 zip 技巧似乎对生成器不起作用。

到目前为止，我的代码非常丑陋，我找不到任何接近干净解决方案的东西。帮助？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T11:21:34.917

我认为你需要[itertools.izip_longest](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)

```
>>> list([e for e in t if  e is not None] for t in itertools.izip_longest(*some_gen,
                                                               fillvalue=None))
[[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 11, 12], [13, 14, 15], [16, 17], [18]]
>>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T12:02:02.303

如果您查看 的文档[`itertools.izip_longest`](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)，您会发现它提供了纯 Python 实现。修改此实现很容易，以便它产生您需要的结果（即，就像`izip_longest`，但没有任何`fillvalue`）：

```
class ZipExhausted(Exception):
    pass

def izip_longest_nofill(*args):
    """
    Return a generator whose .next() method returns a tuple where the
    i-th element comes from the i-th iterable argument that has not
    yet been exhausted. The .next() method continues until all
    iterables in the argument sequence have been exhausted and then it
    raises StopIteration.

    >>> list(izip_longest_nofill(*[xrange(i,2*i) for i in 2,3,5]))
    [(2, 3, 5), (3, 4, 6), (5, 7), (8,), (9,)]
    """
    iterators = map(iter, args)
    def zip_next():
        i = 0
        while i < len(iterators):
            try:
                yield next(iterators[i])
                i += 1
            except StopIteration:
                del iterators[i]
        if i == 0:
            raise ZipExhausted
    try:
        while iterators:
            yield tuple(zip_next())
    except ZipExhausted:
        pass 
```

这避免了重新过滤输出`izip_longest`以丢弃填充值的需要。或者，如果您想要“扁平化”输出：

```
def iter_round_robin(*args):
    """
    Return a generator whose .next() method cycles round the iterable
    arguments in turn (ignoring ones that have been exhausted). The
    .next() method continues until all iterables in the argument
    sequence have been exhausted and then it raises StopIteration.

    >>> list(iter_round_robin(*[xrange(i) for i in 2,3,5]))
    [0, 0, 0, 1, 1, 1, 2, 2, 3, 4]
    """
    iterators = map(iter, args)
    while iterators:
        i = 0
        while i < len(iterators):
            try:
                yield next(iterators[i])
                i += 1
            except StopIteration:
                del iterators[i] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T11:54:36.300

如果您希望它们全部折叠在一个列表中，则可以使用另一个 itertools 选项；这（正如@gg.kaspersky 已经在另一个线程中指出的那样）不处理生成的`None`值。

```
g = (generator1, generator2, generator3)

res = [e for e in itertools.chain(*itertools.izip_longest(*g)) if e is not None]
print res

[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T11:46:05.207

您可能会考虑`itertools.izip_longest`，但如果 None 是有效值，则该解决方案将失败。这是一个示例“另一个生成器”，它完全符合您的要求，并且非常干净：

```
def my_gen(generators):
    while True:
        rez = () 
        for gen in generators:
            try:
                rez = rez + (gen.next(),)
            except StopIteration:
                pass
        if rez:
            yield rez
        else:
            break

print [x for x in my_gen((iter(xrange(2)), iter(xrange(3)), iter(xrange(1))))]

[(0, 0, 0), (1, 1), (2,)] #output 
```

# jquery - jQuery 选项卡链接到另一个选项卡

> ID：14377908
> 
> 赞同：1
> 
> 时间：2013-01-17T11:19:08.337
> 
> 标签：jquery, select, tabs

如何链接到选项卡中的另一个选项卡？

```
<a href="#tab2">Link to tab</a> 
```

不起作用，即使选项卡内容的 id 是`tab2`. 我需要它是动态的，所以我不能简单地使用`jQuery`选项卡选择功能，因为我不知道选项卡的索引号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:04:37.613

Jquery UI 选择功能是唯一的出路。无论如何，您需要找到另一个选项卡的动态 id。正如您所说，您的标签 ID 将是动态的，但是由于 ui 标签的所有内容都在同一页面下，因此 id 应该是可访问的。您应该以,等模式向 jquery ui 选项卡链接提供 ID `#tabs-1`，因此，您可以轻松访问下一个选项卡或上一个选项卡。`#tabs-2``#tabs-3`

```
$("#tabs").tabs("select", "#tabs-" + dynamicID); 
```

# javascript - Javascript 功能只提醒我

> ID：14377909
> 
> 赞同：-6
> 
> 时间：2013-01-17T11:19:09.257
> 
> 标签：javascript

这是我检查 2 个密码的 Javascript 函数：

```
function isPassEquels(){
        var pass1 = document.getElementById("passReg");
        var pass2 = document.getElementById("passConfReg");
        if(pass1!=pass2)
        {
            alert("don't match");

        } 
```

但这只会给我警报消息，并且不会停止 servlet 执行。当我收到警报消息时如何停止 servlet？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:20:58.553

`return false;`从 if 语句中尝试。

```
 if(pass1.value != pass2.value)
    {
        alert("don't match");
        return false; // Abort
    } 
```

正如@Lloyd 所说，检查值，而不是元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:21:09.857

您的代码是错误的，您正在比较页面元素而不是值，这总是错误的。尝试这个：

```
function isPassEquels(){
        var pass1 = document.getElementById("passReg").value;
        var pass2 = document.getElementById("passConfReg").value;

        if(pass1 != pass2) {
            alert("don't match");

        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:26:32.170

您应该使用元素值以及`return false`条件满足时

```
function isPassEquels(){
    var pass1 = document.getElementById("passReg").value;
    var pass2 = document.getElementById("passConfReg").value;

    if(pass1 != pass2) {
        alert("don't match");
        return false;
    } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T11:29:43.467

首先，您必须比较元素值而不是比较页面元素（就像在您的代码中一样）。另一点是在您调用**isPassEquels的代码中使用****return false**。基本上，函数的默认返回类型是 true。

 **因此，请尝试将函数调用用作“return isPassEquels()”并像上面的示例一样比较元素值。

```
function isPassEquels(){
        var pass1 = document.getElementById("passReg");
        var pass2 = document.getElementById("passConfReg");
        if(pass1!=pass2)
        {
            alert("don't match");

        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T11:30:22.440

您必须将此函数附加到表单的 onSubmit 事件，如果此函数返回 false，则不会提交表单。

```
<form name="myForm" action="demo_form.asp" onsubmit="return isPassEquels()" method="post"> 
```**

# android - C# Web 应用程序将使用 Mono for Android 进行转换

> ID：14377911
> 
> 赞同：0
> 
> 时间：2013-01-17T11:19:15.803
> 
> 标签：android, c#-4.0, xamarin.android

我有 ac# web 应用程序，我想使用 Mono for Android 构建一个 android 应用程序。

是否有任何自动方式来使用我的 Web 应用程序的现有代码，或者我必须使用 Mono 和 android 应用程序逻辑从头开始编写所有内容？

感谢

斯塔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:47:50.293

很难回答的问题，因为它非常模糊。但是，您应该能够轻松地将大部分业务逻辑放入 Mono for Android 中。不知道您的 Web 应用程序是如何构建的，很难说您可以重用多少。

但是我已经在工作中制作了一个应用程序，它最初是一个 Silverlight Web 应用程序，实际上所有模型代码都可以重用，只需进行一个小的更正，即使用`HttpWebRequest`而不是对`HttpClient`代码进行一些小的更正以制作 UI正确更新并使更新在 UI 线程上运行。

我将模型代码放入我的应用程序的方式是将所有必要的文件链接到我的项目中，并且它们大部分都有效。有没有自动的方法来做到这一点？我还没有看到一个。Visual Studio 有一些扩展可以帮助您将文件链接到项目中，例如[Project Linker](http://msdn.microsoft.com/en-us/library/ff921108%28v=pandp.20%29.aspx)。

# sql - 这两个查询有什么区别？

> ID：14377912
> 
> 赞同：-1
> 
> 时间：2013-01-17T11:19:16.097
> 
> 标签：sql, oracle

你能解释一下我为什么在 Oracle 中，这个查询返回一些东西：

```
SELECT discounts.DiscountId,
       discounts.ShortDisplay,
       discounts.Display,
       discounts.Description,
       BillDetails.BillId,
       BillDetails.BillRow,
       BillDetails.BillId  AS BillIdTax,
       BillDetails.BillRow AS BillRowTax,
       BillDetails.FEDERAL_TAX_POSTPAID,
       BillDetails.TOTAL_RATE
FROM   discounts
       INNER JOIN BillDetails
         ON discounts.DiscountId = BillDetails.DiscountId
       RIGHT OUTER JOIN BillDetailsTax
         ON BillDetails.BillId = BillDetailsTax.BillId
            AND BillDetails.BillRow = BillDetailsTax.BillRow
WHERE  BillDetails.BillId = 602237 
```

而这一个什么都没有：

```
SELECT discounts.DiscountId,
       discounts.ShortDisplay,
       discounts.Display,
       discounts.Description,
       BillDetails.BillId,
       BillDetails.BillRow,
       BillDetails.BillId  AS BillIdTax,
       BillDetails.BillRow AS BillRowTax,
       BillDetails.FEDERAL_TAX_POSTPAID,
       BillDetails.TOTAL_RATE
FROM   BillDetails,
       BillDetailsTax BillDetails,
       discounts
WHERE  BillDetails.BillRow = BillDetailsTax.BillRow(+)
       AND BillDetails.BillId = BillDetailsTax.BillId(+)
       AND BillDetails.DiscountId = discounts.DiscountId
       AND BillDetails.BillId = 602237 
```

这两个查询不相似吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:56:04.313

添加加号的列是“外”侧。在您的第二个查询中，将 (+) 添加到 BillDetailsTax.BillRow。这意味着`BillDetailsTax`允许缺少来自的值。

所以，本质上，第二个查询是 a `LEFT OUTER JOIN`on `BillDetailsTax`，第一个查询是 a `RIGHT OUTER JOIN`on `BillDetailsTax`。

我认为实际上第二个查询更有意义。它不返回任何内容，因为不存在 ID 为 602237 和折扣的账单。

# android - Android UI 更新线程 - 保存和恢复它

> ID：14377915
> 
> 赞同：6
> 
> 时间：2013-01-17T11:19:24.770
> 
> 标签：android, save, state, restore

我该如何正确地做到这一点？

我有一个秒表，我正在保存它的状态`onSaveInstance`并恢复它的状态`onRestoreInstance`......

现在我遇到了以下问题：如果我停止线程`onSaveInstance`并且屏幕被锁定或关闭，`onRestoreInstance`则不会调用并且秒表没有继续......
如果我不停止它，秒表正在后台运行并且即使屏幕关闭或活动不再处于活动状态...

那么处理这种事情的通常方法是什么？

PS：
我什至有一个可行的解决方案，一个局部变量来保存事件中的运行状态并在`onStop`事件中重新启动线程`onStart`......但我仍然想知道是否有使用android系统本身的“默认”解决方案.. ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:55:26.637

好的。我现在更好地理解你在做什么。我以为你在用线程来计数。现在听起来你正在使用它来更新 UI。

相反，您可能应该做的是使用 self-calling `Handler`。 `Handler`s 是可以异步运行的漂亮的小类。由于它们的多样性，它们在 Android 中被广泛使用。

```
static final int UPDATE_INTERVAL = 1000; // in milliseconds. Will update every 1 second

Handler clockHander = new Handler();

Runnable UpdateClock extends Runnable {
   View clock;

   public UpdateClock(View clock) {
      // Do what you need to update the clock
      clock.invalidate(); // tell the clock to redraw.
      clockHandler.postDelayed(this, UPDATE_INTERVAL); // call the handler again
   }
}

UpdateClock runnableInstance;

public void start() {
   // start the countdown
   clockHandler.post(this); // tell the handler to update
}

@Override
public void onCreate(Bundle icicle) {
   // create your UI including the clock view
   View myClockView = getClockView(); // custom method. Just need to get the view and pass it to the runnable.
   runnableInstance = new UpdateClock(myClockView);
}

@Override
public void onPause() {
   clockHandler.removeCallbacksAndMessages(null); // removes all messages from the handler. I.E. stops it
} 
```

这将做的是将消息发布到`Handler`将运行的。在这种情况下，它每 1 秒发布一次。有*一点*延迟，因为`Handlers`消息队列在可用时运行。它们也在创建它们的线程上运行，因此如果您在 UI 线程上创建它，您将能够更新 UI，而无需任何花哨的技巧。您删除 中的消息`onPause()`以停止更新 UI。时钟可以继续在后台运行，但您不会再向用户显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:37:07.540

我刚刚进入 Android 编程，但我认为`onRestoreInstance`不会在那种情况下被调用，因为你没有从一个活动切换到另一个活动。我认为你最好的选择是 call `onPause`which 会`onSaveInstance`在你需要的时候跟注，但是使用`onResume`which may or might not call `onRestoreInstance`。

# android - 我想在每个 EditText 内放一条小线

> ID：14377921
> 
> 赞同：1
> 
> 时间：2013-01-17T11:19:40.103
> 
> 标签：android

我想在编辑文本下添加小行，如下所示，我该怎么做？

![在此处输入图像描述](../Images/213fea18167e0fa9aeea61b7c4bad0a2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:23:16.663

这是 Holo 主题中 Edittext 的默认外观。所以只需应用 Holo 主题。

如果你想应用 Holo 主题。放

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="17" /> 
```

和**values-v11**文件夹中的**styles.XML**

 **```
<resources>

<!--
    Base application theme for API 11+. This theme completely replaces
    AppBaseTheme from res/values/styles.xml on API 11+ devices.
-->
<style name="AppBaseTheme" parent="android:Theme.Holo.Light">
    <!-- API 11 theme customizations can go here. -->
</style> 
```

和**values**文件夹中的**styles.XML**

 **```
<resources>

<!--
    Base application theme, dependent on API level. This theme is replaced
    by AppBaseTheme from res/values-vXX/styles.xml on newer devices.
-->
<style name="AppBaseTheme" parent="android:Theme.Light.NoTitleBar">
    <!--
        Theme customizations available in newer API levels can go in
        res/values-vXX/styles.xml, while customizations related to
        backward-compatibility can go here.
    -->
</style>

<!-- Application theme. -->
<style name="AppTheme" parent="AppBaseTheme">
    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
</style>

 <style name="progressbar_holo" parent="@android:style/Theme.Light">
</style> 
```

在**AndroidMeanifeast.xml**

```
android:theme="@style/AppTheme" 
```

在**应用程序**标签中。****

# php - Smarty 杀死了我的会话

> ID：14377923
> 
> 赞同：2
> 
> 时间：2013-01-17T11:19:44.107
> 
> 标签：php, session, smarty, session-variables, smarty3

我对 Smarty 3.1.13 有疑问。

Smarty 终止了我的会话。每次我刷新页面时，$_SESSION 数组都是空的。当我评论 line`$smarty->display('index.tpl')`时，一切正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:29:14.260

You have to start your session before `$smarty->display('index.tpl')`

This is beacause the session cookie needs to be send in the HTTP header and therefore [session_start](http://php.net/manual/en/function.session-start.php) will need to be called before the first line of output.

So make sure `session_start()` is placed before `$smarty->display('index.tpl')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:08:52.257

我不能发布这个时间代码，因为它分为很多部分（框架），我没有发布它们的权限。感谢您的宝贵时间，但我发现 Smarty 的另一个问题和解决我的问题的方法：

1.  当您以扩展方式编写模板时（一个模板扩展另一个模板），您看不到 Smarty 调试窗口，即使`$smaty->debug=true`

2.  当您正在运行的模板扩展另一个时`$smarty->debug = true`，它会终止您的会话。不要问我为什么，我没有时间检查它。我认为这是一个错误。

# ms-access - 连接两个表以比较一对多关系

> ID：14377924
> 
> 赞同：0
> 
> 时间：2013-01-17T11:19:50.117
> 
> 标签：ms-access, compare

我有一个最初看起来的采购订单和付款项目表。当他们查看最终奖励时，我还有一张采购订单和付款项目表。

```
Initially
PO        Pay Item      Desc            Amt
A            1       Desc Line 1        100
A            1       Desc Line 2         50
A            2       Desc Line 1        200

Award
PO        Pay Item      Desc            Amt
A            1       Desc Line 1        100
A            2       Desc Line 1         80
A            2       Desc Line 2        100 
```

是否可以有一个产生比较的查询

```
 INITIAL                   AWARD
PO        Pay Item      Desc            Amt           Desc            Amt
A            1       Desc Line 1        100        Desc Line 1        100
A            1       Desc Line 2         50
A            2       Desc Line 1        200        Desc Line 1         80
                                                   Desc Line 2        100 
```

对于初始阶段，Pay Item 1 有两行，但在奖励阶段，它只以一行结束。

所以他们在 PO 和 Pay Item 上排成一行，但我的行数可能与另一个不同（可变）。

我认为我的问题中的格式不会很好。基本上我有一个 PO 和 Pay Item 的键，但是一个表在 Pay Item 下的行比另一个表多。

# google-maps-api-3 - 悬停链接时如何在 Google Maps API 中移动标记

> ID：14377925
> 
> 赞同：0
> 
> 时间：2013-01-17T11:19:53.227
> 
> 标签：google-maps-api-3

**问题**

我正在尝试显示带有标记的谷歌地图和引用旁边这些标记的列表，并将每个列表项与地图上的标记链接起来。

因此，当我将鼠标悬停在链接 1 上时，地图应移动到同一地图上的标记 1。当我将鼠标悬停在链接 2 上时，地图应移动到地图上的标记 2。

**发现**

我找到了一个与我想要的非常相似的解决方案，但我似乎无法弄清楚我们如何`moveMarker( map, marker )`在悬停链接时调用函数。

您可以在这里看到一个有效的 JS fidde：[API Fiddle 链接](http://jsfiddle.net/Rsp22/193/)

大家能给我一些想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:44:14.520

我之前的做法是，拥有一个全局标记数组。将您的链接编号为 1..x。将该数字传递给 moveMarker 函数以指示悬停的标记（或从链接的 ID 中找出）。使用它来确定要移动到数组中哪个标记的位置。

同样从您的代码片段来看，它似乎`map`是一个全局变量（您不会`var map`在初始化函数中这样做），因此您不必将其作为参数传递给 moveMarker。

# php - 在 Windows 上使用 PHP Wrapper 类将 HTML 转换为 PDF，打印错误问题

> ID：14377926
> 
> 赞同：1
> 
> 时间：2013-01-17T11:19:56.493
> 
> 标签：php, pdf, pdf-generation, html-to-pdf, princexml

我无法让 PrinceXML 在我的 Windows Server 上工作。我正在使用 PHP 包装类，虽然我找不到任何有用的文档！

[此处](http://princexml.com/doc/8.1/php/)的 README 文件（在下载中）中提供的信息没有解释正在做什么，也没有提供任何示例代码。

到目前为止，这是我汇总的内容（非常基本），但没有打印任何内容，也没有显示任何错误。

**我知道我没有包括在内`header('PDF HEADERS HERE')`，这仅仅是因为我想在打印 PDF 之前查看 PHP 错误是什么。**

```
$prince = new Prince('C:\Program Files (x86)\Prince\Engine\bin\prince.exe');

try{
    $prince->convert_string_to_file('<span>Hello World</span>','test.pdf');
} catch (Exception $e) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
} 
```

我用上面的代码玩了很多，但我尝试过的绝对没有任何工作。即使我将路径更改为`prince.exe`，也不会返回错误！为什么？？

我的问题是：

1.  如何打印遇到的错误？
2.  是否有任何网站为此类提供了良好的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T09:41:49.417

just give full path here

$prince->convert_string_to_file('Hello World','D:\testfolder\test.pdf');

thats all you can get your test.pdf in d drive test folder

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:51:10.310

调用`$prince->setLog(path_to_log_file)`并确保指定的日志文件路径可从您的 PHP 代码中写入。

# c# - 在 .NET 中使用 StreamWriter

> ID：14377930
> 
> 赞同：-1
> 
> 时间：2013-01-17T11:20:08.710
> 
> 标签：c#, .net, io

我有一个控制台应用程序，它将已处理作业的详细信息写入 .txt 文件。我使用这段代码来做到这一点：

```
StreamWriter jp = new StreamWriter(jobsProcessed);
jp.WriteLine(DateTime.Now.ToString());
jp.WriteLine(info);
jp.WriteLine("------");
jp.Close(); 
```

不幸的是，每次处理作业时，新的“信息”字符串都会替换前一个。有什么方法可以将新文本添加到文本文件的末尾或开头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:22:14.030

```
StreamWriter jp = new StreamWriter(jobsProcessed,true); 
```

**第二个参数**

```
//Determines whether data is to be appended to the file. If the file exists
//and append is false, the file is overwritten. If the file exists and append
// is true, the data is appended to the file. Otherwise, a new file is created. 
```

[http://www.dotnetperls.com/streamwriter](http://www.dotnetperls.com/streamwriter) http://social.msdn.microsoft.com/Forums/zh/clr/thread/17cd8ccf-7e53-41de-b4cc-221da70405a4

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T11:23:00.843

您可以使用[StreamWriter Constructor (String, Boolean)](http://msdn.microsoft.com/en-us/library/36b035cb%28v=vs.100%29.aspx)，其中第二个布尔参数表示数据是否必须附加到已经可用的数据。

并且还要避免调用`Close`和使用`using`语句

```
using(StreamWriter jp = new StreamWriter(jobsProcessed))
{
    jp.WriteLine(DateTime.Now.ToString());
    jp.WriteLine(info);
    jp.WriteLine("------");
   //jp.Close(); //NO NEED MORE
} 
```

这样做的好处是，即使发生异常（*可能*发生），顺便说一下，流也会是`Disposed`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T11:24:06.020

StreamWriter 构造函数有一个重载，它接受第二个参数`append`;

```
using (StreamWriter jp = new StreamWriter(jobsProcessed, true))
{
    jp.WriteLine(DateTime.Now.ToString());
    jp.WriteLine(info);
    jp.WriteLine("------");
} 
```

将您的 StreamWriter 包装在`using`上面的块中也是更好的做法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T11:23:12.677

只需修改这个：

```
StreamWriter jp = new StreamWriter(jobsProcessed); 
```

对此：

```
StreamWriter jp = new StreamWriter(jobsProcessed, true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T11:26:34.750

```
// using (StreamWriter jp = new StreamWriter(jobsProcessed)) Overwrites, not good for you!
using (StreamWriter jp = new StreamWriter(jobsProcessed, true)) // Appends, good for you!
{
    jp.WriteLine(DateTime.Now.ToString());
    jp.WriteLine(info);
    jp.WriteLine("------");
} 
```

但是你可以像这样简化你的代码：

```
String[] content = File.ReadAllLines(jobsProcessed);

String[] newContent = new String[3];
newContent[0] = DateTime.Now.ToString();
newContent[1] = info;  
newContent[2] = "------";

File.AppendAllLines(jobsProcessed, newContent); 
```

# delphi - FindFirst、FindNext（Delphi Xe、Win7）排名不正确

> ID：14377934
> 
> 赞同：2
> 
> 时间：2013-01-17T11:20:14.643
> 
> 标签：delphi, delphi-xe, rank, findfirst

我在一个目录中有一些文件。我尝试使用 FindFirst 和 FindNext 获取这些文件，但在 Windows 7 上无法获得相同的订单。

```
C:\Test
SampleFile.0.png
SampleFile.1.png
SampleFile.2.png
SampleFile.3.png
SampleFile.4.png
SampleFile.5.png
SampleFile.6.png
SampleFile.7.png
SampleFile.8.png
SampleFile.9.png
SampleFile.10.png
SampleFile.11.png
SampleFile.12.png
SampleFile.13.png
SampleFile.14.png
SampleFile.15.png
SampleFile.16.png
SampleFile.17.png
SampleFile.18.png
SampleFile.19.png
SampleFile.20.png
SampleFile.21.png
SampleFile.22.png 
```

当我尝试使用我的代码时，我得到了

```
SampleFile.0.png
SampleFile.1.png
SampleFile.10.png
SampleFile.11.png
SampleFile.12.png
SampleFile.13.png
SampleFile.14.png
SampleFile.15.png
SampleFile.16.png
SampleFile.17.png
SampleFile.18.png
SampleFile.19.png
SampleFile.2.png
SampleFile.20.png
SampleFile.21.png
.
.
. 
```

如何获得正确排名的文件列表？

```
Procedure Test;
var
sr : TSearchRec;
i : integer;
ListFiles : TStringList;  
begin
ListFiles := TStringList.Create;
i := FindFirst('c:\test\*.png', faDirectory, sr);
while i = 0 do begin  
ListFiles.Add(ExtractFileName(sr.FindData.cFileName));
i := FindNext(sr); 
end;
FindClose(sr);
end; 
```

注意：结果仍然是错误的，如果我可以使用 ListFiles.Sorted = True

* * *

我想我有一个解决方案，创建了一个功能。

```
function SortFilesByName(List: TStringList; Index1, Index2: Integer): integer;
var
FileName1, FileName2: String;
i, FileNumber1, FileNumber2: Integer;
begin
  FileName1 := ChangeFileExt(ExtractFileName(List[Index1]), '');
  FileName2 := ChangeFileExt(ExtractFileName(List[Index2]), '');
  i := POS('.', FileName1)+1;
  FileNumber1 := StrToInt(Copy(FileName1, i, MaxInt));
  i := POS('.', FileName2)+1;
  FileNumber2 := StrToInt(Copy(FileName2, i, MaxInt));
  Result := (FileNumber1 - FileNumber2);
end; 
```

我添加了另一行 ListFiles.CustomSort(SortFilesByName); //(ListFiles,1,2):integer); 在 FindClose(sr) 之前；

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T18:26:50.390

正如 jachguate 所说，排序是由 Explorer.exe 完成的，而不是文件系统。FindFirst/FindNext 不保证任何特定的排序，包括基于纯 ASCII 的排序，因此您不应依赖它。但是，您不需要在 Delphi 中重新实现数字排序。Windows 将它使用的那个公开为[StrCmpLogicalW](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759947%28v=vs.85%29.aspx)，它位于`shlwapi.dll`. 导入看起来像这样：

```
function StrCmpLogicalW(psz1, psz2: PWideChar): Integer; stdcall;
  external 'shlwapi.dll' 
```

可以在 Windows 中禁用该行为。如果要遵循 Windows 使用的顺序，则需要使用值调用[SHRestricted](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762245%28v=vs.85%29.aspx)`REST_NOSTRCMPLOGICAL`。如果它返回 true，您应该改用 AnsiCompareStr。

```
const
  // Use default CompareString instead of StrCmpLogical
  REST_NOSTRCMPLOGICAL = $4000007E;

function SHRestricted(rest: DWORD): LongBool; stdcall; external 'shell32.dll'; 
```

所以你的最终排序函数应该是这样的：

```
function CompareFilenames(const AFilename1, AFilename2: string): Integer;
begin
  if SHRestricted(REST_NOSTRCMPLOGICAL) then
    Result := AnsiCompareStr(AFilename1, AFilename2)
  else
    Result := StrCmpLogicalW(PWideChar(AFilename1), PWideChar(AFilename2));
end; 
```

您可以缓存 SHRestricted 调用的结果，但如果这样做，您需要注意`WM_SETTINGSCHANGE`广播消息并在收到消息时重新读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:04:11.227

您在 Windows 资源管理器中看到的不同命令是在 explorer.exe 中实现的，而不是在文件系统中实现的。

数字排序顺序是 Windows 7 中的一项新功能，因此，如果您*按名称*排序并且您有一堆带有前缀后跟数字的文件，则资源管理器会“识别”该模式并且不会显示按名称排序的列表传统方式，但先按前缀排序，然后按数字排序（就好像字符串是整数一样）。

如果你想在 Delphi 中做同样的事情，你可以通过将 FindFirst/FindNext 返回的所有文件名添加到 TSlist 中，然后使用此比较函数对字符串列表进行排序：

```
var
  FileNames: TList<string>;
begin
  FileNames := TList<string>.Create;
  try
    SearchForFiles(FileNames); //here you add all the file names
    //sort file names a la windows 7 explorer
    FileNames.Sort(System.Generics.Defaults.TComparer<string>.Construct(
      function (const s1, s2: string): Integer
        procedure ProcessPrefix(const fn: string; var prefix, number: string);
        var
          I: Integer;
        begin
          for I := length(fn) downto 1 do
            if not TCharacter.IsDigit(fn[I]) then
            begin
              Prefix := Copy(fn, 1, I);
              number := Copy(fn, I+1, MaxInt);
              Break;
            end;
        end;
      var
        prefix1, prefix2: string;
        number1, number2: string;
        fn1, fn2: string;
      begin
        //compare filenames a la windows 7 explorer
        fn1 := TPath.GetFileNameWithoutExtension(s1);
        fn2 := TPath.GetFileNameWithoutExtension(s2);
        ProcessPrefix(fn1, prefix1, number1);
        ProcessPrefix(fn2, prefix2, number2);
        if (Number1 <> '') and (Number2 <> '') then
        begin
          Result := CompareText(prefix1, prefix2);
          if Result = 0 then
            Result := CompareValue(StrToInt(number1), StrToInt(Number2));
        end
        else
          Result := CompareText(s1, s2);
      end
      ));
    UseYourSortedFileNames(FileNames);
  finally
    FileNames.Free;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:20:40.483

通过“排名”，您的意思是排序顺序。

文件以正确的顺序排序（基于字符的 ASCII 值）。`2`出现在后面`19`是因为比较仅由两个名称中相同数量的字符组成，并且 '2' 出现在`1`.

如果您希望它们正确排序为数字，则需要用零填充数字，以便它们的宽度相同（例如`SampleFile.2.png`，使用代替`SampleFile.02.png`）。这将导致 '02' 出现在前面，`19`因此它们按数字正确排序。

您可以使用以下方法解决编号问题：

```
PngFileName := Format('SampleFile.%.2d.png', [Counter]); 
```

# autohotkey - 如何使两个 Alt 键以相同的方式工作

> ID：14377941
> 
> 赞同：0
> 
> 时间：2013-01-17T11:20:33.617
> 
> 标签：autohotkey

我有一些在 Windows XP 上使用 Alt 键的映射。虽然它们可以很好地使用左 Alt 键，但它们不能使用右 Alt 键。

例如，当我按下 right_Alt+b 时，下面的映射什么也不做，而当按下 left_Alt+b 时它显示一个消息框。

```
 !b::MsgBox You pressed Alt+b. 
```

我想让两个 Alt 键以相同的方式工作并触发上面的映射。

下面的映射确实适用于右 Alt 键，但不适用于左 Alt 键：

```
 <^>!b::MsgBox You pressed right Alt+b. 
```

一种解决方法是复制所有包含 alt 键的映射，但这会显着增加某些脚本的大小。此外，我发现在某些情况下它不起作用。进一步调查表明，正确的 alt 键有一个奇怪的行为。在仅包含以下映射的脚本中，

```
 ^!b::MsgBox You pressed Ctrl+Alt+b. 
```

, 按 right_Alt+b 时显示消息框。

我试图将右 Alt 映射到左 Alt，

```
<^>!::! 
```

或者

```
<^>!::Send {ALT} 
```

，但并没有解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:22:29.463

您提到您尝试将 Right-Alt 映射到 Left-Alt，但没有提到您是如何做到的。无论如何，当我使用这个时：

```
RAlt::LAlt 
```

MsgBox 你按下了 Alt+b。当我按 Right-Alt+b AND Left-Alt+b 时执行。您能说出您是如何尝试映射两个 Alt 键的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:57:23.487

*由于更好的格式选项，我写此评论作为答案。*

这是我在 AutoHotKey_L (1.1.09.01) 中使用的脚本，在常规 AutoHotKey 中应该可以正常工作：

```
RAlt::LAlt
<^>!b::MsgBox, A You pressed right Alt+b.
^!b::MsgBox, B You pressed Ctrl+Alt+b. 
```

测试 1：按下`Ctrl`+ `LAlt`+ `b`。结果：MsgBox B，正常行为测试2
：按下`Ctrl`++ 。结果：MsgBox B，由于重新映射而预期 `RAlt``b`

注释掉`;^!b::MsgBox, B...`并再次测试。测试 3 ：
按下`Ctrl`++ 。结果：没有，正如预期的那样 `RAlt``b`

注释掉`;RAlt::LAlt`并再次测试：测试
4：按下`Ctrl`++ 。结果：MsgBox A，预期因为不再重新映射。`RAlt``b`

最后但并非最不重要的。`Ctrl`如果我按+ `RAlt`+`b`或`RAlt`+ `Ctrl`+ ，行为没有区别`b`。还有一点需要注意的是：我总是使用 LEFT`Ctrl`键，而不是 RIGHT`Ctrl`键。

你没有得到这些结果吗？
或者，当您`RAlt`等于时，您是否期待不同的结果`LAlt`？

# java - 如何使用 JDBC 将 html 文件保存在 MySQL DB 中？

> ID：14377945
> 
> 赞同：2
> 
> 时间：2013-01-17T11:20:48.663
> 
> 标签：java, mysql, sql, jdbc

我有 html 文件`String`，我想使用更新查询将其插入 MySQL DB。我试过这个：

```
Statement st = connection.createStatement();
String query = "UPDATE orders SET status='ready', html='"+html+"' WHERE id='123'";
int num = st.executeUpdate(query); 
```

但我得到以下异常：

```
MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'zglosBladWindow').ck_window.showCenter('this');" href="#">zg?o? b??d na stronie<' at line 1 
```

这是 HTML 内部的某个地方 - 可能我不能只引用 html`""`并插入它，因为它还包含许多特殊字符和引号 - 那么我如何插入它呢？我应该以某种方式对其进行编码吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T11:24:29.513

我建议您使用[PreparedStatement](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)而不是 Statement。

```
String query = "UPDATE orders SET status=?, html=? WHERE id=?";
PreparedStatement stmnt = conn.PreparedStatement(query);
stmnt.setString(1, yourtext);
....
int num = st.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:24:28.157

您应该使用`PreparedStatement`构造，因为您的 HTML 字符串可能包含引号或双引号。[在这里](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)阅读更多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:28:24.940

您应该使用 PreparedStatement，但我宁愿将路径保存在 MySQL 中，而不是保存文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T11:29:20.980

你可能应该使用这样的东西，

```
StringBuilder contentBuilder = new StringBuilder();
try {
BufferedReader in = new BufferedReader(new FileReader("mypage.html"));
String str;
while ((str = in.readLine()) != null) {
    contentBuilder.append(str);
}
in.close();
} catch (IOException e) {
}
String content = contentBuilder.toString(); 
```

# c# - 来自linq中多个对象的哈希表键

> ID：14377946
> 
> 赞同：1
> 
> 时间：2013-01-17T11:20:53.823
> 
> 标签：c#, linq

哈希表 mainhash = new Hashtable();

```
 testdata td = new testdata() { value = "td" };
        td.hash.Add("1", "tdvalue1");
        td.hash.Add("2", "tdvalue2");
        td.hash.Add("3", "tdvalue3");
        td.hash.Add("4", "tdvalue4");
        td.hash.Add("5", "tdvalue5");

        testdata td1 = new testdata() { value = "td1" };
        td1.hash.Add("1", "td1value1");
        td1.hash.Add("2", "td1value2");
        td1.hash.Add("3", "td1value3");
        td1.hash.Add("4", "td1value4");
        td1.hash.Add("5", "td1value5");

        testdata td2 = new testdata() { value = "td2" };
        td2.hash.Add("1", "td2value1");
        td2.hash.Add("2", "td2value2");
        td2.hash.Add("3", "td2value3");
        td2.hash.Add("4", "td2value4");
        td2.hash.Add("5", "td2value5");

        testdata td3 = new testdata() { value = "td3" };
        td3.hash.Add("1", "td3value1");
        td3.hash.Add("2", "td3value2");
        td3.hash.Add("3", "td3value3");
        td3.hash.Add("4", "td3value4");
        td3.hash.Add("5", "td3value5");

        testdata td4 = new testdata() { value = "td4" };
        td4.hash.Add("1", "td4value1");
        td4.hash.Add("2", "td4value2");
        td4.hash.Add("3", "td4value3");
        td4.hash.Add("4", "td4value4");
        td4.hash.Add("5", "td4value5");

        mainhash.Add(1, td);
        mainhash.Add(2, td1);
        mainhash.Add(3, td2);
        mainhash.Add(4, td3);
        mainhash.Add(5, td4); 
```

如何使用 Linq 的 SelectMany 将所有键选择到一个列表中？我需要做什么？

```
var values = mainhash.Values.Cast<testdata>().Select(x => x.hash)
                                             .SelectMany(x=> x.Keys); 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:27:01.623

它不知道要使用的类型 from `Hashtable.Keys`。

尝试：

```
var values = mainhash.Values.Cast<testdata>().Select(x => x.hash)
                           .SelectMany(x => x.Keys.Cast<string>()); 
```

但更好的是：使用`Dictionary<TKey,TValue>`而不是`Hashtable`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:01:18.990

试试下面的查询 -

```
var values = mainhash.Values.Cast<testdata>().SelectMany(x => x.hash.Keys.Cast<string>()); 
```

但是，使用字典而不是哈希表。它实际上减少了投射对象的开销。

希望上面的代码对你有帮助！！

# git - 不能再 git push 到 Azure

> ID：14377952
> 
> 赞同：2
> 
> 时间：2013-01-17T11:21:05.557
> 
> 标签：git, azure

昨天运行良好，但今天当我`git push azure master`在 Azure 中访问网站时，输入密码后我得到了这个

```
error: Failed connect to yy.scm.azurewebsites.net:443;
Operation timed out while accessing
https://xx@yy.scm.azurewebsites.net/yy.git/info/refs?service=git-receive-pack
fatal: HTTP request failed 
```

还有其他人有这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:16:19.077

您可以尝试并遵循[这些建议](https://github.com/projectkudu/kudu/wiki/Investigating-issues)，包括：

### 确保网站本身有效

> 当您遇到 git 问题时，首先要尝试的是访问站点本身（例如[http://somesite.azurewebsites.net/](http://somesite.azurewebsites.net/)）。
> 如果您收到某种错误而不是默认的“网站正在建设中”页面，则 Azure 网站可能已关闭，并且与 git 相关的任何内容都不起作用。

### 尝试访问 git 服务的根目录

> 如果主站点已启动但 git 以某种方式损坏，请尝试直接从浏览器访问 Kudu 服务的根目录。无论您未能启用 Git、在“部署”选项卡上失败或 git push 失败，这都很有用。
> 
> 例如，如果您的站点 URL 是[http://somesite.azurewebsites.net/](http://somesite.azurewebsites.net/)，则 kudu 服务根 URL 将是[https://somesite.scm.azurewebsites.net/](https://somesite.scm.azurewebsites.net/)。
> 所以使用 https，并添加 scm 令牌。系统将提示您输入凭据，这与您用于“git push”的凭据相同。

### 如果在提示输入凭据之前出现错误

> 这通常意味着一些非常糟糕的事情是错误的，导致事情在到达 git 引擎之前就失败了。

### 如果在提示输入凭据后出现错误

> 这可能意味着两件不同的事情：
> 
> *   Azure 网站的问题
> *   git 支持本身的问题
> 
> 记录下错误是什么并报告给论坛

# variables - 如何在 forfiles 命令中获取 @FNAME 的子字符串

> ID：14377959
> 
> 赞同：0
> 
> 时间：2013-01-17T11:21:22.977
> 
> 标签：variables, batch-file, substring

我想通过将文件名剥离到前 16 个字符来重命名目录中的一堆文件，但是在批处理文件中使用 forfiles 命令时，我无法弄清楚如何获取 @FNAME 的子字符串。

帮助将不胜感激。

谢谢

罗兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:54:35.033

`forfiles`这样做很可能会非常棘手，因为我认为您不能在同一批次中设置和使用变量，因为您为每个文件 () 生成了一个新的cmd `"cmd /c command"`。

`for`但是，使用简单的循环可以轻松实现相同的功能。

```
setlocal enabledelayedexpansion
for /f "tokens=*" %%a in ('dir C:\yourdir /s /b') do (
set file=%%~na
set ext=%%~xa
set new=!file:~0,16!
ren %%a !new!!ext!
) 
```

这也将通过所有子目录递归。如果您只想要您选择的文件夹，请`/s`从`dir`命令中删除 。

另外，因为您只删除了文件名，所以我已经这样做了，所以它会在之后重新附加文件扩展名，否则扩展名中的字符将计入 16 个字符的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-01T20:53:15.933

您可以使用第二个 bat 文件并传递`@fname`like`%1`并在此处创建子字符串。

```
Forfiles /m *.* /c "cmd /c call second.bat @fname"

In second.bat

Set v=%1

Set substring=%v:~1,5%

Echo %substring% 
```

# vb.net - 数据访问层和封装

> ID：14377966
> 
> 赞同：0
> 
> 时间：2013-01-17T11:21:44.230
> 
> 标签：vb.net, design-patterns

请看下面的代码：

```
'Form1.vb
Imports WindowsApplication1.BusinessLogicLayerShared

Public Class Form1

    Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim IPerson As IPerson
        IPerson = New BusinessLogicLayer.Person()
        Dim name As String = IPerson.getName()
    End Sub
End Class

'Person.vb
Imports WindowsApplication1.BusinessLogicLayerShared

Namespace BusinessLogicLayer
    Public Class Person
        Implements IPerson

        Private IPerson As DataLogicLayerShared.IPerson

        Public Function getName() As String Implements IPerson.getName
            IPerson = New DataLogicLayer.Person
            getName = IPerson.getName
        End Function
    End Class
End Namespace

Namespace BusinessLogicLayerShared
    Public Interface IPerson
        Function getName() As String
    End Interface
End Namespace

'Person.vb
Imports WindowsApplication1.DataLogicLayerShared
Namespace DataLogicLayer

    Public Class Person
        Implements IPerson

        Public Function getName() As String Implements IPerson.getName
            'Connect to database and get name
            Return "Ian"
        End Function

        Public Function getAge() Implements IPerson.getAge

        End Function
    End Class
End Namespace

Namespace DataLogicLayerShared
    Public Interface IPerson
        Function getName() As String
        Function getAge()
    End Interface
End Namespace 
```

DataLogicLayer.Person 中的所有函数都是公共的。这不违反封装规则吗？有没有解决的办法？代码重用和封装之间似乎存在折衷。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:23:33.830

否 - 如果这些方法正在实现您的接口，则它们必须是公开的。如果您有一些内部运作`GetAge`或`GetName`您不必要地允许公开，那将违反规则。

# android - 通过 wifi 查看 logcat 结果？

> ID：14377967
> 
> 赞同：12
> 
> 时间：2013-01-17T11:21:47.777
> 
> 标签：android

我想知道是否可以在我的系统/笔记本电脑上看到 logcat 结果；当我运行我的应用程序时，以防我没有数据线来连接我的设备。可能通过 Wifi。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T11:26:24.283

您可以[按照本教程](http://stuffandtech.blogspot.co.at/2012/03/android-quick-tip-adb-over-wifi.html)中的说明启用此功能。

还有一堆应用程序应该能够做到这一点，例如[ADB WiFi](https://play.google.com/store/apps/details?id=com.ryosoftware.adbw)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-18T22:45:51.397

Android 11+ 通过 Wi-Fi 原生支持 adb：[https ://developer.android.com/studio/command-line/adb#connect-to-a-device-over-wi-fi-android-11+](https://developer.android.com/studio/command-line/adb#connect-to-a-device-over-wi-fi-android-11+)

# facebook - 无法在移动网站中使用 facebook sharer.php 自定义参数

> ID：14377968
> 
> 赞同：17
> 
> 时间：2013-01-17T11:21:50.900
> 
> 标签：facebook, facebook-sharer

我拥有一个 jQuery 移动网站。我使用带有自定义参数的 facebook 共享选项来添加标题、描述、带有链接的图像

如下所示， [https://www.facebook.com/sharer/sharer.php?s=100&p %5Burl%5D=http%3A%2F%2Fgoogle%2F&p%5Bimages%5D%5B0%5D=https://www .google.com/images/srpr/logo3w.png&p%5Btitle%5D=My%20own%20title&p%5Bsummary%5D=My%20own%20description](https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=http%3A%2F%2Fgoogle%2F&p%5Bimages%5D%5B0%5D=https://www.google.com/images/srpr/logo3w.png&p%5Btitle%5D=My%20own%20title&p%5Bsummary%5D=My%20own%20description)

但是当我尝试使用相同的移动链接时，它会重定向到 [http://m.facebook.com/sharer.php?s=100&p%5Burl%5D=http%3A%2F%2Fgoogle%2F&p%5Bimages%5D% 5B0%5D=https%3A%2F%2Fwww.google.com%2Fimages%2Fsrpr%2Flogo3w.png&p%5Btitle%5D=我的+自己的+标题&p%5Bsummary%5D=我的+自己的+描述&_rdr](http://m.facebook.com/sharer.php?s=100&p%5Burl%5D=http%3A%2F%2Fgoogle%2F&p%5Bimages%5D%5B0%5D=https%3A%2F%2Fwww.google.com%2Fimages%2Fsrpr%2Flogo3w.png&p%5Btitle%5D=My+own+title&p%5Bsummary%5D=My+own+description&_rdr)

这意味着，它将在分享网址的开头添加 m.facebook。所以它不适用于自定义标题、描述、图像和链接。

有任何解决这个问题的方法吗？或者如何强制移动网络不与 m.facebook.com 一起使用？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-08T16:29:55.543

您可以通过将 ?m2w 参数添加到 URL 来阻止 Facebook 访问移动站点。然后，sharer.php 像往常一样工作。

例如

```
 https://www.facebook.com/sharer/sharer.php?m2w&s=100.... (etc) 
```

看起来有点糟糕，寻找更好的答案。

编辑：Sharer.php 已被弃用，请参阅下面 Felix 的回答。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-27T23:36:56.407

sharer.php 现在已被弃用。 [https://developers.facebook.com/bugs/252983554810810/](https://developers.facebook.com/bugs/252983554810810/)

新方法是使用共享对话框： [https ://developers.facebook.com/docs/sharing/reference/share-dialog](https://developers.facebook.com/docs/sharing/reference/share-dialog)

例如

```
https://www.facebook.com/dialog/share?
  app_id=145634995501895
  &display=popup
  &href=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2F
  &redirect_uri=https://developers.facebook.com/tools/explorer 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-24T16:43:17.283

移动的 url 支持为 u，标题支持为 t

```
http://m.facebook.com/sharer.php?u=<urlencoded url>&t=<urlencoded title> 
```

[资源](https://stackoverflow.com/questions/7187016/facebook-and-twitter-share-for-mobile-web)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-27T01:14:17.183

使用移动 url 修复移动设备中的问题，Facebook 将重定向到桌面中的共享对话框。

`http://m.facebook.com/sharer.php?u=<urlencoded url>`

这是一个示例： [https ://careers-hangarcr.herokuapp.com/job/apply/55c277c0fb8b040300622602](https://careers-hangarcr.herokuapp.com/job/apply/55c277c0fb8b040300622602)

# database - 基本数据库多态性链接

> ID：14377977
> 
> 赞同：0
> 
> 时间：2013-01-17T11:22:28.497
> 
> 标签：database, polymorphism

我有一种图，由 5 种对象组成，其中一种是链接类型的对象，其他是链接之间的 4 种不同类型的“节点”。

5 个中的每一个都非常不同，因此会有不同的表。

每个“节点”将有 0..N 个“下方”链接，而每个链接将在下方恰好有 1 个“节点”（但属于 4 种中的任何一种）。仅需要存储以下内容。

所以我的问题是，在链接表中创建 4 个列（node1、node2、node3、node4）是否更好，并将其中 3 个保留为 NULL，另一个包含节点的 id，或者最好有 2 个列 (nodetype, nodeId)，其中 1 告诉要搜索的表，另一个告诉 Id。

对于 0..N 关系，我假设我必须创建一个新表，但可能只有一个由 4 种类型的节点共享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:28:46.560

阅读以下内容，了解如何处理 DB 中的多态性 [http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/inheritance.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/inheritance.html)

# asp.net - 获取网格总数并在 DataList 中的标签上显示网格和标签都在 DataList 内

> ID：14377980
> 
> 赞同：0
> 
> 时间：2013-01-17T11:22:30.277
> 
> 标签：asp.net, grid, datalist

我有一个数据列表。Label 和 Grid 在 DataList 的 ItemTemplate 内，我已经绑定了 Grid noe 我想在 Label 中显示 Total Of Grid Column。放置在 Grid 的父控件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:27:46.153

您可以使用以下代码计算 giridview 列：

```
int colCount = GridView1.Items[0].Cells.Count; 
```

# java - lockCanvas() 返回不同的画布

> ID：14377983
> 
> 赞同：11
> 
> 时间：2013-01-17T11:22:37.363
> 
> 标签：java, android, android-canvas

试图在单个画布上每毫秒绘制一些东西。我的意思是只向画布添加细节，而不是每帧都重绘它。所以这段代码给了我三种不同的画布。第三，然后再第一。为什么？

```
public void run() {
    this.run = true;
    Canvas canvas = null;
    while (run) {
        try {
            canvas = this.surfaceHolder.lockCanvas();
            synchronized (this.surfaceHolder) {
                Thread.sleep(delay);
                draw(new Img(canvas, size));
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        } finally {
            if (canvas != null) {
            this.surfaceHolder.unlockCanvasAndPost(canvas);
            }
        }
        synchronized (this) {
            if (wait) {
                try {
                    wait();
                } catch (Exception e) {}
            }
        }
    }
} 
```

如果它是 android 三重缓冲 - 如何关闭它，或者用它做些什么？安卓 4.2.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T12:37:28.207

**如果您想保留以前的绘制，您应该在屏幕外画布中绘制它们并将它们绘制到您从锁定画布获得的画布上。**

puesd 代码来说明这个想法：

```
Bitmap offScreenBitmap = Bitmap.createBitmap(100,200,Bitmap.ARGB_8888);
Canvas offScreenCanvas = new Canvas(offScreenBitmap);

onScreenCanvas = this.surfaceHolder.lockCanvas();

//always draw to te offScreenCanvas
offScreenCanvas.drawXxxx

//copy the data to on-screen canvas you got from the lock
onScreenCanvas.drawBitmap(offScreenBitmap);

unlockAndPost(onScreenCanvas) 
```

那应该可以完成您的任务。正确的？

**然后，在引擎盖下的一些东西：**

是的，android 视图（surface IS A 视图）有多个缓冲区：一个由应用程序用于绘制，一个由系统用于渲染，有时当应用程序无法及时完成绘制时还有第三个缓冲区。没有办法关闭它，你也不想。这就是您已经观察到的锁定时获得不同画布的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T03:29:22.917

1.  我建议不要在 Runnable 实现（其中方法返回 void）中命名布尔字段“run”。即使问题没有从冲突中浮现出来，它也是令人困惑的。也许“运行”或其他东西（任何东西）会更有意义 - 更容易调试。

2.  多线程时不要使用 Object.wait。它不会总是（通常不会）按照您的预期行事。

3.  您很可能会获得 Canvas 成员的多个实例，因为某处（可能在 Android 框架中，或者可能在您的代码中......很难说），“new Canvas(args)”被调用，而您认为是您的只有 Canvas 实例在另一个线程上。虽然您只有一个引用，但可以创建多个实例。

4.  除非您确定需要这样做，否则我不建议使用 synchronized(whatever)。

5.  挂在那里。这个问题非常令人困惑——我在去年春天解决了这个问题，这并不容易或有趣。

希望以上任何内容在某种程度上有所帮助。

-布兰登

# c# - 在 WCF 中开始使用用户定义的 SOAP 消息？

> ID：14377989
> 
> 赞同：1
> 
> 时间：2013-01-17T11:22:55.533
> 
> 标签：c#, wcf

> **可能重复：**
> [从 WCF 返回自定义格式的 SOAP 消息](https://stackoverflow.com/questions/14372957/returning-a-custom-formatted-soap-message-from-wcf)

在我发布我的问题之前，这是我练习和知道的：

1.  创建 WCF 服务库
2.  将其托管在 Windows 服务中
3.  从客户端访问服务

现在来看一个真实世界的情况。我有一个要求，客户端将像这样发送 SOAP 消息：

```
<soap:Body>
 <m:CreateFolder xmlns:m=" ">
  <m:UID>0124567890</m:UID>
  <m:Owner>10.25</m:Owner>
  <m:User>7.375</m:User>
  <m:Developer>15.125</m:Developer>
  <m:SupName>MySup.sup</m:SupName>
 </m: CreateFolder> 
```

我认为 WCF 处理 SOAP 部分，我可以立即实现一个名为 CreateFolder 并具有参数 UID、所有者、用户、开发人员和 SupName 的方法。

我不知道客户端的含义是什么，我只知道该服务将由基于 Web 的界面使用。哦，顺便说一句，服务还必须以上述格式返回消息。

如何编写一个 WCF 服务来接受这个“SOAP”并处理它？

# c++ - 如何获取为给定字符手动设置的字形？

> ID：14377993
> 
> 赞同：7
> 
> 时间：2013-01-17T11:23:07.357
> 
> 标签：c++, unicode, adobe-indesign

我可以使用[字形面板](http://help.adobe.com/en_US/indesign/cs/using/WS937002FB-8AC0-4520-AC7D-49C64A58EDB2a.html)来使用带有手动选择的替代字形的字符。但是我怎样才能以编程方式检索该字形 ID？

![选择替代字形的示例](../Images/cf9dc85d02c2a810e8b37afb575d048e.png)

我目前正在使用`IDrawingStyle::GetSpecialGlyph`，但它仅在底层字符没有 Unicode 表示时才有效。但是，比如说，如果我在使用“字形”面板的文档中为字符 U+0041 ʟᴀᴛɪɴ ᴄᴀᴘɪᴛᴀʟ ʟᴇᴛᴛᴇʀ ᴀ 删除一些替代字形，则基础字符将是 U+0041，因此`IDrawingStyle::GetSpecialGlyph`将不起作用。如何以编程方式检索该字形 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:36:24.097

您可以通过导航蜡来获得此信息。使用 迭代蜡线`CallbackWaxIterator`，然后，对于蜡线上的每个蜡运行凸台，获取`IWaxGlyphs`接口并使用`PeekGlyphArray`或`MapCharsToGlyphs`与 结合使用`GetGlyphAt`。

# .net - vb.net 应用程序可以反编译成源代码吗？

> ID：14377995
> 
> 赞同：0
> 
> 时间：2013-01-17T11:23:15.127
> 
> 标签：.net, vb.net, decompiling

> **可能重复：**
> [如何保护我的 .NET 程序集不被反编译？](https://stackoverflow.com/questions/2478230/how-can-i-protect-my-net-assemblies-from-decompilation)

我正在开发 VB.NET 应用程序，我的问题是：这个应用程序可以反编译成源代码吗？如果是，我怎样才能保护我的源代码不被“窃取”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:27:09.627

一般来说，是的，它可以。您可以轻松地使用许多流行的 .NET 反编译器中的任何一个（Reflector、ILSpy 等）。

为了保护您的代码，您将需要使用混淆器 - dotFuscator 是一种流行的混淆器，尽管商业代码往往更健壮并提供更好的保护。

但是请注意，并不能 100% 保证这些会起作用 - 足够坚定的攻击者将能够反编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:26:54.173

有些产品声称能够将 .NET 程序集“反编译”回源代码（如[http://www.reflector.net/](http://www.reflector.net/)）。还有一些方法可以尝试使用混淆器来解决这个问题。这里有一个很好的概述：http: [//blogs.msdn.com/b/clrsecurity/archive/2005/05/26/422440.aspx](http://blogs.msdn.com/b/clrsecurity/archive/2005/05/26/422440.aspx)