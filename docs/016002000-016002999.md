# StackOverflow 问答 16002000-16002999

# ios - 如何在整个应用程序中禁用 NSLog？

> ID：16002001
> 
> 赞同：12
> 
> 时间：2013-04-14T17:26:28.203
> 
> 标签：ios, objective-c, xcode, c-preprocessor, nslog

我想禁用`NSLog()`应用程序中的所有实例。我发现了一些这样做的代码：

```
#ifndef DEBUG
#define NSLog //
#endif 
```

但是将此代码添加到每个文件中并不是一个好主意。我怎样才能让它更容易？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T17:31:04.500

Xcode 有一个预编译的头文件（`{project-name}-Prefix.pch`默认在 Supporting Files 组中），这是放置将在项目中的每个文件中使用的代码的好地方。要更进一步并改进日志消息本身，请参阅[是否真的不应该在生产代码上使用 NSLog()？](https://stackoverflow.com/questions/300673/is-it-true-that-one-should-not-use-nslog-on-production-code?rq=1).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-26T11:17:05.613

将以下行添加到常量文件中：

```
#define DEBUGGING NO    //or YES
#define NSLog if(DEBUGGING)NSLog 
```

以下两个句子给出相同的结果

```
#define NSLog 
```

和

```
#define NSLog // 
```

因为所有以 // 开头的文本都在预编译阶段被删除（包括“//”）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T17:40:27.190

我所做的是将它放在预编译的头文件（*YourAppName.pch*）中：

```
#define MyLog if(0); else NSLog 
```

然后我在应用程序的其他地方将所有 NSLog 更改为 MyLog。它就像 NSLog 一样工作。但是当你想禁用 NSLog 时，回到*.pch*文件并更改`0`to`1`和 presto，所有日志记录都会停止。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-25T18:57:05.547

这也将处理使用时出现的警告

```
#define NSLog // 
```

**编码：**

```
#ifndef DEBUG
  #define NSLog(...)
#endif 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-25T18:50:55.467

当您不需要 NSLOG 到您的常量文件时，只需添加以下行

```
#define NSLog                       // 
```

并在需要时发表评论。

# iframe - 记录加载 iframe 的页面的 URL

> ID：16002002
> 
> 赞同：1
> 
> 时间：2013-04-14T17:26:32.583
> 
> 标签：iframe

我有一个页面将在 iframe 中用于其他人的网站。我想向将在 iframe 中加载的页面添加一段代码，该代码将获取 iframe 正在加载的页面的 URL，并将其存储在文本文件或日志文件中。每次加载 iframe 时，我都希望它为我获取 URL，并将其存储在文件中。

我怎样才能做到这一点？

# ios - 无法通过 GPUImage 播放录像机

> ID：16002003
> 
> 赞同：6
> 
> 时间：2013-04-14T17:26:35.360
> 
> 标签：ios, objective-c, gpuimage, m4v

我正在使用`GPUImage`库将视频录制到文件系统上的文件中。我将其保存为 m4v 文件。这是我正在使用的代码：

```
 NSString *pathToMovie = [NSHomeDirectory() stringByAppendingPathComponent:recordingDestination];
    unlink([pathToMovie UTF8String]);
    NSURL *movieURL = [NSURL fileURLWithPath:pathToMovie];

    movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(1280.0, 720.0)];
    [videoCameraFilter addTarget:movieWriter];

    movieWriter.shouldPassthroughAudio = YES;
    movieFile.audioEncodingTarget = movieWriter;
    [movieFile enableSynchronizedEncodingUsingMovieWriter:movieWriter];

    [movieWriter startRecording];
    [movieFile startProcessing];

    [movieWriter setCompletionBlock:^{
        [videoCameraFilter removeTarget:movieWriter];
        [movieWriter finishRecording];
    }]; 
```

这会录制一个 m4v 视频。然后我尝试玩它`MPMoviePlayerController`：

```
 NSString *videoPath = [NSString stringWithFormat:@"%@/%@", [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"], [libraryFiles objectAtIndex:selectedCell]];
    NSLog(videoPath);
    NSURL *url=[[NSURL alloc] initWithString:videoPath];
    MPMoviePlayerController *moviePlayer=[[MPMoviePlayerController alloc] initWithContentURL:url];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidFinish) name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDonePressed) name:MPMoviePlayerDidExitFullscreenNotification object:moviePlayer];

    moviePlayer.controlStyle=MPMovieControlStyleDefault;
    [moviePlayer play];
    [self.view addSubview:moviePlayer.view];
    [moviePlayer setFullscreen:YES animated:YES]; 
```

但是，播放器只是开始缓冲，没有任何反应。视频没有开始播放。玩家只是永远在缓冲。该应用程序没有崩溃，控制台中也没有警告，所以我不知道是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:35:22.873

试试这个 ：

首先检查 videoPath 是否显示正确的路径？

.h 文件

```
 MPMoviePlayerController*     player 
```

.m @synthesize 播放器；

```
 -(void) viewWillAppear:(BOOL)animated {
            [super viewWillAppear:animated];

           player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:videoPath]];
           player.scalingMode = MPMovieScalingModeFill;
           player.movieSourceType = MPMovieSourceTypeFile;
           player.view.frame = CGRectMake(0, 45, 320, 400);
           player.shouldAutoplay = YES;
           [player prepareToPlay];
           [self.view addSubview:player.view];
           [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:player];

           [player play];
    }

    #pragma mark MoviPlayer Method

    - (void) movieFinishedCallback:(NSNotification*) aNotification {
            MPMoviePlayerController *player1 = [aNotification object];
            [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:player1];
            [player stop];
            [player1.view removeFromSuperview];

            player1 = nil;
            [self.navigationController popViewControllerAnimated:YES];
    }

    -(void) dealloc {
            [player release];
            [super dealloc];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:46:19.543

我看到一些看起来不正确的事情。

首先，您将直接写入`NSHomeDirectory`返回的应用程序目录，但该目录是不可写的（请参阅[参考资料](https://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html#//apple_ref/c/func/NSHomeDirectory)）。请改为写入`Documents`文件夹或`Library/Caches`文件夹。

其次，我看不出`videoCameraFilter`是如何定义的。您需要确保将其添加为`movieFile`

```
GPUImageMovie *movieFile = [[GPUImageMovie alloc] initWithURL:sampleURL];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pathToMovie = [documentsDirectory stringByAppendingPathComponent:@"filtered-movie.m4v"];
unlink([pathToMovie UTF8String]);
NSURL *movieURL = [NSURL fileURLWithPath:pathToMovie];

GPUImageMovieWriter *movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(1920.0, 1080.0)];
GPUImageBoxBlurFilter * videoCameraFilter = [[GPUImageBoxBlurFilter alloc] init]; // just a random filter...
videoCameraFilter.blurSize = 2.0;
[movieFile addTarget:videoCameraFilter];
[videoCameraFilter addTarget:movieWriter];

movieWriter.shouldPassthroughAudio = YES;
movieFile.audioEncodingTarget = movieWriter;
[movieFile enableSynchronizedEncodingUsingMovieWriter:movieWriter];

[movieWriter startRecording];
[movieFile startProcessing];

__weak GPUImageMovieWriter *weakMoviewWriter = movieWriter;
[movieWriter setCompletionBlock:^{
    [movieFile removeTarget:weakMoviewWriter];
    [weakMoviewWriter finishRecording];
}]; 
```

***** 编辑：****

 **您是否尝试`moviePlayer`过按照@SAMIR RATHOD 的建议制作属性/ivar？moviePlayer 无休止地留在那里缓冲的事实很可能是因为它没有被保留。

在 viewController 的界面中添加一个属性：

```
@property (nonatomic, strong) MPMoviePlayerController *moviePlayer; 
```

并实例化你的`MPMoviewPlayerController`：

```
self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url]; 
```**

# python - 为什么 res.users 在更多模块中？

> ID：16002004
> 
> 赞同：2
> 
> 时间：2013-04-14T17:26:38.807
> 
> 标签：python, xml, openerp

在 openerp 7 中，我检查了一些模块，发现 res_users 类存在于更多模块中

```
class res_users(osv.osv):
    _inherit = "res.users"
    _name = "res.users"
    _columns = {
        'survey_id': fields.many2many('survey', 'survey_users_rel', 'uid', 'sid', 'Groups'),
    }

res_users() 
```

我需要创建自己的用户模块。然后我可以像上面那样使用吗？我需要将记录保存在 res_users 表中，因为 openerp 似乎与该表中的用户名和密码匹配。请建议我实现此要求。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:54:50.840

在survey.py中，他们只是通过继承用户表添加了一个新字段。如果您将通过继承像上面一样使用它，它将在同一个 OpenERP 用户表中添加字段，无论您将创建什么。我只能建议您可以为此创建一个新表并根据您的要求更改代码，因为我对此知之甚少。

# ember.js - commit() 用于单个对象

> ID：16002016
> 
> 赞同：2
> 
> 时间：2013-04-14T17:27:23.720
> 
> 标签：ember.js, ember-data

以下`save`函数提交整个商店。我怎么能只承诺`this`？`this.commit();`不起作用。

*应用程序.js*

```
App.UserController = Ember.ObjectController.extend({
  save: function() {
    this.get('store').commit();
  }  
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:27:04.147

您可以创建一个事务，向其中添加一条记录，然后提交（或回滚）该事务：

```
startEditing: function() {
  this.transaction = this.get('store').transaction();
  this.transaction.add(this.get('content');
},

save: function() {
  this.transaction.commit();
} 
```

# php - 如何从 SQL 数据库中检索 UTF-8 数据？

> ID：16002018
> 
> 赞同：0
> 
> 时间：2013-04-14T17:27:25.027
> 
> 标签：php, sql

经过多次尝试，我无法以正确的编码 (UTF-8) 格式从我的数据库中获取数据。

这是我的连接（config.php）文件：

```
<?php
define("DB_HOST", "localhost");
define("DB_USER", "user");
define("DB_PASSWORD", "");
define("DB_DATABASE", "db");
$dbcon = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_DATABASE);
?> 
```

我用于检索数据的 php 表单：

```
<?php 

include('config.php');
$sqlget="SELECT * FROM table";
$sqldata= mysqli_query($dbcon, $sqlget) or die ('error');
mysqli_set_charset('utf8');
echo"<table>";
echo"</table";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:33:43.710

您没有发送链接标识符 `mysqli_set_charset($dbcon , "utf8");`

来自php手册：

> bool mysqli_set_charset ( mysqli $link , string $charset )

并在执行查询之前设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:30:14.443

*在 SELECT之后*设置编码有点晚
了 在运行任何查询之前设置它

```
<?php
define("DB_HOST", "localhost");
define("DB_USER", "user");
define("DB_PASSWORD", "");
define("DB_DATABASE", "db");
$dbcon = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_DATABASE);
mysqli_set_charset('utf8'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T17:38:42.347

实现这一目标的最简单方法是运行以下任何一种：

```
// for procedural MySQL (obsolete in PHP 5.4/5.5!)
mysql_query("SET NAMES 'utf8';", $link);

// for procedural MySQLi
mysqli_query("SET NAMES 'utf8';", $link);

// for MySQLi, function notation
mysqli_set_charset($link, "utf8");

// for MySQLi, method notation
$mysqli->set_charset("utf8");

// for PDO
$pdo = new \PDO("mysql:host={$host};dbname={$database};charset=utf8", $user, $password); 
```

这将保证检索到的数据将以 UTF-8 编码返回。

希望有帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:31:10.060

尝试在查询之前设置字符集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T17:31:32.007

秩序很重要。您需要在开始执行查询之前设置连接编码，否则为时已​​晚：

```
mysqli_set_charset('utf8'); 
```

应在您连接后立即执行：

```
<?php
define("DB_HOST", "localhost");
define("DB_USER", "user");
define("DB_PASSWORD", "");
define("DB_DATABASE", "db");
$dbcon = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_DATABASE);    
mysqli_set_charset('utf8'); 
```

# c# - 使用 DatagridView 制作搜索列表

> ID：16002025
> 
> 赞同：0
> 
> 时间：2013-04-14T17:27:41.030
> 
> 标签：c#, datagridview

我想在 c# 中使用 datagridview 创建一个搜索列表。我有一个文本框，可以在其中输入客户姓名。单击“搜索”按钮时，我将隐藏 CustomerName 不等于 searchValue 的所有行。问题是，当用户要第二次搜索时，如何通过 dgv 的隐藏行进行搜索。我是否需要使隐藏的行可见。谢谢。

这是代码。

```
 private void search_Click(object sender, EventArgs e)
    {
         arrayList= new ArrayList();
        String searchValue = searchBox.Text;
        for (int i = 0; i < dataGridView1.RowCount-1; i++)
        {
            if ( (dataGridView1.Rows[i].Cells[1].Value.ToString().Trim() ).Equals (searchValue.Trim()) )
            {
                //dataGridView1.Visible = true;
                arrayList.Add(i);
            }
            else
            {
                dataGridView1.Visible = false;
            }
        }
        dataGridView1.Refresh();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:40:14.067

您是否使用数据表来绑定数据网格视图？如果是，则在搜索时可以迭代数据表并删除与搜索条件不匹配的行。当您搜索时，您可以拒绝对数据表的更改以再次获得原始数据。之后，您可以使用最初使用的相同过程（将与搜索条件不匹配的数据行标记为已删除）。

另一种选择是使用 DataRowView 并使用您的搜索条件进行过滤，并使用该 datarowview 来绑定 datagridview。我更喜欢最后一个。

# c# - 我如何破坏 PLINQ？（并行化简单/快速计算）

> ID：16002028
> 
> 赞同：2
> 
> 时间：2013-04-14T17:28:03.960
> 
> 标签：c#, simulation, plinq

我正在尝试使用 PLINQ 来加速一个简单的模拟，但我正在设法减慢它的速度（未注释的 AsParallel 运行速度较慢）：

```
class Program
{
    private static readonly Random Random = new Random();

    private static IEnumerable<Tuple<double, double>> GetNextPair(int pairs)
    {
        for (int i = 0; i < pairs; i++)
            yield return new Tuple<double, double>(Random.NextDouble(), Random.NextDouble());
    }

    private static double RunSimPlinq(int count)
    {
        return
            GetNextPair(count)
                //.ToArray()
                //.AsParallel()
                .Count(tuple =>
                    {
                        //Thread.Sleep(10);
                        return tuple.Item1*tuple.Item1 + tuple.Item2*tuple.Item2 <= 1d;
                    })*4d/count;
    }

    static void Main()
    {
        Stopwatch sw = new Stopwatch();
        sw.Start();
        Console.WriteLine(RunSimPlinq(100));
        sw.Stop();
        Console.WriteLine(sw.ElapsedMilliseconds);
        Console.Read();
    }
} 
```

我对原因的唯一猜测是对可枚举的兰特的争论（或者相反，复制它）。

PS。输出应该是 PI 的估计值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:27:00.827

问题是 Plinq 有相当大的开销。它对于计算密集型投影非常有用，您所拥有的不是计算密集型。

~~首先。PLinq 不会并行化 linq 查询的 GetNextPair 部分。您可以尝试在该函数中放置一个断点并打开“线程”窗口以检查每次运行它的线程。~~

其次，实际上并行化的部分是

```
.Count(tuple => tuple.Item1*tuple.Item1 + tuple.Item2*tuple.Item2 <= 1d) 
```

部分，基本上是

```
.Where(tuple => tuple.Item1*tuple.Item1 + tuple.Item2*tuple.Item2 <= 1d)
.Count() 
```

where 部分很容易工作。但是，分派给每个线程来运行谓词将产生相当大的开销。

然后，计数部分将需要 map reduce，同样，可能会产生相当大的开销。

因此，您可以加快速度的唯一方法是，如果谓词在计算上比调度谓词的开销更大，然后映射减少结果。

尝试在 Thread.Sleep 中敲击谓词...

# php - 如何检查 Tor 是否在 PHP 中运行？

> ID：16002029
> 
> 赞同：2
> 
> 时间：2013-04-14T17:28:12.523
> 
> 标签：php, socks, tor

我正在将 Tor 与 PHP 一起使用，目前一切正常。但是，当我尝试从 php 启动 Tor 时，它有时会抛出错误，因为 Tor 当前正在运行，所以我一直想知道是否有任何方法可以检查 Tor 的状态（运行与否）

我只能使用 SOCKS5 协议或 Linux CLI；这些是我唯一的选择。

**注意**：此函数连接到 Tor（它可以工作）。

```
function init()
    {
        //Connect to Tor

        $socket = fsockopen($this->proxyIp, $this->proxyPort);      
        fwrite($socket, 'AUTHENTICATE' . PHP_EOL);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T22:01:10.777

通常，Unix/Linux 守护程序通常使用锁定文件（通常位于`/var/run`）来实现“已运行”检查。您可以使用它[`file_exists()`](http://www.php.net/manual/en/function.file-exists.php)来检查锁定文件的存在。当然，这不能用于检测进程是否崩溃（以及进程是否在任何给定时刻实际运行）；[检查过程表](https://stackoverflow.com/questions/3111406/checking-if-process-still-running)可能是必要的。

具体到 Tor，快速的网络搜索似乎表明您不必这样做。Tor 将[Unix 域套接字](//en.wikipedia.org/wiki/Unix_domain_socket)定位在`/var/run/tor/control`（并且也侦听 TCP 端口 9051，具体取决于配置）以允许其他程序控制它。尝试通过该套接字（使用 PHP 的[套接字函数](http://www.php.net/manual/en/book.sockets.php)和[Tor 控制协议](https://gitweb.torproject.org/torspec.git?a=blob;hb=HEAD;f=control-spec.txt)）连接到 Tor 可能会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:03:22.827

我找到了解决这个问题的方法，它基本上是获取所有正在运行的进程并在其中搜索“tor”（基于[Bass Jobsen 的评论](https://stackoverflow.com/questions/16002029/how-to-check-if-tor-is-running-within-php?noredirect=1#comment22823241_16002029)）。

**那是代码：**

*注意：此代码仅在 Ubuntu 中进行了测试，但它应该适用于大多数 Linux 操作系统。*

```
function isRunning()
{
    //Get all running processes and search for "tor" within them
    //The "[" and "]" are used to execlude ps and grep from the returned result.
    $CLIResult = exec('ps aux | grep -w [t]or');

    //If no processes was found(= Tor is not running..)
    return empty($CLIResult);

} 
```

# service - Worklight：服务连接失败对话框

> ID：16002030
> 
> 赞同：0
> 
> 时间：2013-04-14T17:28:12.617
> 
> 标签：service, connection, ibm-mobilefirst

我遇到了一个意想不到的问题，即当我
大多数时候运行应用程序时，会打开一个对话框并说“应用程序 **连接到服务****失败** ”参见快照：

![在此处输入图像描述](https://i.stack.imgur.com/Ct9gD.png)

**虽然在此对话框上按“重新加载**”按钮两到三次后，应用程序与 WL 服务器连接，然后应用程序工作正常。但是，如果我杀死 App 然后重新运行它，则会再次出现相同的对话框。

当您在设备上安装后第一次运行应用程序时，它也会出现。

从两个月前开始，我的应用程序运行良好。

我所做的唯一新事情是推送通知。这是
我在应用程序中添加的唯一新功能。

对此有何建议？

1.  这个问题的根本原因可能是什么？我怎样才能追踪它？
2.  如果我想禁用此对话框，而是
    在屏幕上显示自定义消息（警报）。因为此对话框显示
    正在运行的服务/WL 服务器 URL。

在控制台中它只显示**“应用程序连接到服务失败**”

在单击对话框上的详细信息选项时。它显示了 WL 服务器的正确地址。在重新加载三/四次后，它将 App 与服务器连接，然后工作正常，然后一切正常，不显示任何内容。

日志如下：

```
Apr 15 14:24:51 iPhone myApp[2746] <Warning>: [LOG] ondeviceready event dispatched
Apr 15 14:24:51 iPhone myApp [2746] <Warning>: {
        appVersionPref = "1.0";
        freeSpace = 13572620288;
        wlSkinLoaderChecksum = "(null)";
        wlSkinName = default;
    }
Apr 15 14:24:51 iPhone myApp [2746] <Warning>: [LOG] Application did not define an i18n messages object, skipping translation.
Apr 15 14:24:51 iPhone myApp [2746] <Warning>: [LOG] wlclient init started
Apr 15 14:24:51 iPhone myApp [2746] <Warning>: [LOG] Read cookies: null
Apr 15 14:24:51 iPhone myApp [2746] <Warning>: [LOG] CookieMgr read cookies: {}
Apr 15 14:24:57 iPhone myApp [2746] <Warning>: [LOG] Connection went Down: Mon Apr 15 2013 14:24:57 GMT+0300 (AST)
Apr 15 14:24:57 iPhone myApp [2746] <Warning>: [ERROR] Client init failed. Connection to the service is not available.
Apr 15 14:25:07 iPhone myApp [2746] <Warning>: [LOG] ondeviceready event dispatched
Apr 15 14:25:07 iPhone myApp [2746] <Warning>: {
        appVersionPref = "1.0";
        freeSpace = 13572620288;
        wlSkinLoaderChecksum = "(null)";
        wlSkinName = default;
} 
```

**通过单击详细信息：**

```
Apr 15 2013 23:55:17 GMT+0300 (AST)
Apr 15 23:55:17 iPhone myApp[3116] <Warning>: [ERROR] Client init failed. Connection to the service is not available.
Apr 15 23:55:19 iPhone myApp[3116] <Warning>: WLReachability Flag Status: -R -----l- networkStatusForFlags
Apr 15 23:55:59 iPhone kernel[0] <Debug>: launchd[3120] Builtin profile: MobileSafari (sandbox)
Apr 15 23:56:02 iPhone kernel[0] <Debug>: launchd[3121] Builtin profile: syncdefaultsd (sandbox)
Apr 15 23:56:21 iPhone myApp[3116] <Warning>: Copied text: 'App Diagnostics

    Time : Mon Apr 15 2013 23:55:19 GMT+0300 (AST)
    Application Name : myApp
    Application Version : 1.0
    Service URL : https://www.mydomain.com.bh:443/AppProject/apps/services/api/myApp/iphone/
    Device Platform : iPhone
    Device Version : 6.1
    Screen Resolution : 320x480
    Airplane Mode : Not available
    Using Network : WIFI
    Wifi Name : Not available
    Mobile Network Type : Not available
    Carrier Name : Not available
    IP Address : 192.168.109.101
    Error Code : UNRESPONSIVE_HOST
    Error Message : Connection to the service is not available.
    HTTP Status : 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:54:53.740

听起来网络问题阻止您连接到 Worklight 服务器。

这可能是由于许多不同的原因，列出一些：

*   较差的 WiFi/3G
*   设备故障
*   托管网络服务器的网络上的防火墙问题
*   Worklight 服务器问题

为了确保您确实可以到达服务器，我建议您使用网络嗅探器。在 Windows 上运行的一种工具是[Fiddler](http://fiddler2.com/get-fiddler)。

Fiddler 可以设置为反向代理，您的设备将在其中调用代理。然后，代理会将您的请求路由到 Web 服务器，但它也会记录信息，以便您查看。

如果您使用的是 Windows，我建议您安装 Fiddler 并遵循[此答案](https://stackoverflow.com/questions/4428680/how-do-i-monitor-all-incoming-http-requests)的选项 #2 。

然后，您应该能够查看您的请求是否到达服务器并从那里继续调查。

# jquery - MultiSelect Widget 不会使用此“打开”功能删除预先选择的选项

> ID：16002034
> 
> 赞同：0
> 
> 时间：2013-04-14T17:28:27.800
> 
> 标签：jquery, jquery-ui, jquery-plugins, multi-select

当我添加此功能时，[jQuery UI MultiSelect Widget](http://www.erichynds.com/blog/jquery-ui-multiselect-widget)在未选中时不再删除预选选项。如何在不失去取消选择选项的能力的情况下使此功能正常工作？

在这里可以找到演示问题的小提琴：http: [//jsfiddle.net/chayacooper/Mp2bK/10/](http://jsfiddle.net/chayacooper/Mp2bK/10/)

JS

```
$(function () {   
    $(".example").multiselect({
        open: function (event, ui) {
            var option = $(this).find("option[value*=default]");
            option.attr('value', option.attr('value').replace(/_default/g, ''));
        }
    });
}); 
```

HTML

```
<select name="example" class="example" multiple="multiple">  
    <option value="0">$0</option>
    <option value="50_default" selected="selected">$50</option>
    <option value="100">$100</option>
</select> 
```

我正在为 apx 预先选择最常用的选项。300 选择元素，并使用此功能来区分这些值何时仍处于初始预选/默认状态与用户通过单击表单元素主动选择该值（表明他们做了一个主动决定将其设置为该值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:20:00.427

查看文档，您可以使用刷新方法来确保它是更新的。

我添加了

```
$(".example").multiselect("refesh") 
```

到表单提交

[新小提琴](http://jsfiddle.net/oumichaelm/Mp2bK/11/)

# css - 在 Bootstrap 中直接连接或触摸导航栏

> ID：16002035
> 
> 赞同：0
> 
> 时间：2013-04-14T17:28:28.363
> 
> 标签：css, twitter-bootstrap, navbar

[代码笔](http://codepen.io/snapapps/pen/aepGs)

我试图让井直接“连接”，或触摸导航栏。我尝试将填充重置为 0px，但无济于事。我怎么能这样做？*见 CodePen*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:32:21.237

`.navbar`有一个`margin-bottom: 20px`你需要删除的。这是[小提琴](http://jsfiddle.net/HDRap/)

# java - Java 强制转换 ArrayIterator The queryMe method returns an ArrayIterator<Me>. The queryYou method returns an ArrayIterator<You>. public ArrayIterator<Object> query(String table, String field, String c 问问题 问问题 2013-04-14T17:28:47.283 200 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. The queryMe method returns an ArrayIterator<Me>. The queryYou method returns an ArrayIterator<You>. public ArrayIterator<Object> query(String table, String field, String criterion) { ArrayIterator<Object> result = null; if (table.equals("MyTable") { result = MyTable.queryMe(field, criterion); } else if (table.equals("YourTable") { result = YourTable.queryYou(field, criterion); } return result; } I'm getting an error that says ArrayIterator<Me> and ArrayIterator<Java.lang.object> are incompatible types. Any suggestions? Bootstrap Inline Elements So at the top of my page I have a title and a facebook logo. Here's a working example: fiddle So everything is in a neat row at the top of the page. However, I want the logo and the text Join us on... to be on the right side, and the heading stays where it is. I've tried adding class="pull-right" to the 2nd and 3rd <li> elements, like this. But you can see how that really screws up the vertical alignment. Other than the alignment that's how I want it to look. Any ideas on how to fix the alignment? javacasting 4 3 回答 3 This answer is useful 2 你不能转换它，因为它实际上ArrayIterator<Me>不是子类型ArrayIterator<Java.lang.object>，这两种类型是不相关的。 查找更多解释。 于 2013-04-14T17:33:00.887 回答 This answer is useful 0 你不能转换ArrayIterator<Me>为ArrayIterator<Object>，你应该改变queryMe函数的返回类型，但如果你的迭代器总是有类型Me，最好ArrayIterator<Me>在整个程序中使用 于 2013-04-14T17:35:06.067 回答 This answer is useful 0 这是你所追求的黑客。首先将其转换为原始 ArrayIterator，然后再转换为 ArrayIterator<Me>。 ArrayIterator<Me> meIter = (ArrayIterator) 结果。 更好的方法是更改 您的方法以返回 ArrayIterator<Me> 并将结果更改为相同。 ***刚刚看到你的更新。该方法似乎试图返回不同类型的 ArrayIterators，因此返回类型为 <Object>。 // Would be nice if the 2 types shared a common super type. public ArrayIterator<Object> query(String table, String field, String criterion) { // WARNING, this is a raw generic type, and provides no type safety ArrayIterator result = null; if (table.equals("MyTable") { result = MyTable.queryMe(field, criterion); } else if (table.equals("YourTable") { result = YourTable.queryYou(field, criterion); } return (ArrayIterator<Object>) result. } 于 2013-04-14T17:41:32.070 回答 Related 5 performance - 在 R 中创建循环矩阵的有效方法 1 mongodb - 流星错误未发送到客户端 3 mysql - 如何选择两个带有求和函数的语句 1 android - IndexOutOfBoundException 通过单击列表视图中的任意点 2 ios - 检查运行时是否正在执行方法 2 php - 检查 cookie 是否存在于另一个域中 1 wpf - WPF 中的 VB.NET ListView/ListBox 检查项目 2 python - Bash/python/perl 魔法获取跨多个日志文件的聚合日期时间 1 visual-studio - 工作项定制 - 转换和状态中的规则行为 1 android - 覆盖不同值文件中的样式 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16002037
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, casting

The queryMe method returns an ArrayIterator<Me>. The queryYou method returns an ArrayIterator<You>.

```
public ArrayIterator<Object> query(String table, String field, String criterion)
{
    ArrayIterator<Object> result = null;

    if (table.equals("MyTable")
    {
        result = MyTable.queryMe(field, criterion);
    }
    else if (table.equals("YourTable")
    {
        result = YourTable.queryYou(field, criterion);
    }

    return result;
} 
```

I'm getting an error that says

```
ArrayIterator<Me> and ArrayIterator<Java.lang.object> are incompatible types. 
```

Any suggestions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:33:00.887

你不能转换它，因为它实际上`ArrayIterator<Me>`不是子类型`ArrayIterator<Java.lang.object>`，这两种类型是不相关的。

[查找更多解释](http://docs.oracle.com/javase/tutorial/java/generics/subtyping.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:35:06.067

你不能转换`ArrayIterator<Me>`为`ArrayIterator<Object>`，你应该改变`queryMe`函数的返回类型，但如果你的迭代器总是有类型`Me`，最好`ArrayIterator<Me>`在整个程序中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:41:32.070

这是你所追求的黑客。首先将其转换为原始 ArrayIterator，然后再转换为 ArrayIterator<Me>。

ArrayIterator<Me> meIter = (ArrayIterator) 结果。

更好的方法是更改​​您的方法以返回 ArrayIterator<Me> 并将结果更改为相同。

***刚刚看到你的更新。该方法似乎试图返回不同类型的 ArrayIterators，因此返回类型为 <Object>。

```
// Would be nice if the 2 types shared a common super type.   
public ArrayIterator<Object> query(String table, String field, String criterion)
{
    // WARNING, this is a raw generic type, and provides no type safety
    ArrayIterator result = null;

    if (table.equals("MyTable")
    {
        result = MyTable.queryMe(field, criterion);
    }
    else if (table.equals("YourTable")
    {
        result = YourTable.queryYou(field, criterion);
    }
    return (ArrayIterator<Object>) result.
} 
```

# php - 整个管道电子邮件未通过

> ID：16002038
> 
> 赞同：0
> 
> 时间：2013-04-14T17:29:05.480
> 
> 标签：php, email, cpanel

我在将电子邮件传送到 PHP 脚本时遇到问题。似乎整个电子邮件都没有通过。这是我得到的那种回应：

```
From brian@myemailaddress.com Sun Apr 14 13:12:53 2013
Received: from mailserver.google.com ([GOOGLE.IP.ADDRESS]:41509)
        by myhost.server.com with esmtps (TLSv1:RC4-SHA:128)
        (Exim 4.80)
        (envelope-from <brian@myemailaddress.com>)
        id THE-EMAIL-ID
        for brian@mysub.domain.com; Sun, 14 Apr 2013 13:12:53 -0400
Received: by mailserver.google.com with SMTP id somesmtp.id
        for <brian@mysub.domain.com>; Sun, 14 Apr 2013 10:12:51 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:x-originating-ip:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=rPONCz8eaLlxJpumTQNPIEKBlWcbg53KdugbKjulvj4=;
        b=Kr7ZpXKTpXDCoQHmI93Ep+CSv8BY4xT2Pgh3eJeRsz5Y0iAjomGdBQDwKMQ/myk4hz
         dkReoFPGAqE3KsRo601JXzgDrvmu9oRDC3UpbwHvMUvbI+U1qjC2rUsp1fmaeohpc99T
         tPVMhO9WBBqthUP4TCv/T50/popu771Mydj0YXWbEuRtViyllzTa1M1kO3DhqLC+/bA2
         ED2J3wBXp47xRVjkoUNUOzyi5pUIsryDRUh9gxdSQtAGjqAdTpTwQXSX0MAdSK+PYc8Y
         oB/5Sm09um8/id4d4YHUBZMbIZv0+L0GR0ZbIfa42l7+WzvKMjijNw7QsA/KDXMaYL5W
         CwBQ==
X-Received: by IP.ADDR.ESS with SMTP id some.long.id; Sun,
 14 Apr 2013 10:12:51 -0700 (PDT)
MIME-Version: 1.0
Received: by IP.ADDR.ESS with HTTP; Sun, 14 Apr 2013 10:12:31 -0700 (PDT)
X-Originating-IP: [MY.IP.ADDRESS]
From: Brian D. <brian@myemailaddress.com>
Date: Sun, 14 Apr 2013 12:12:31 -0500
Message-ID: <CAOb+JoxnfiaHFSG6RyQPtnmeS526JPMO4krsS96wc3FGMKWOiA@mail.gmail.com>
Subject: New Task.
To: brian@wmysub.domain.com
Content-Type: multipart/alternative; boundary=001a11c30f960b290d04ea583f19
X-Gm-Message-State: AKoCoQnquQFvVi0CYGF4sdhK0Cn2swVezCK1Yg5uXKhxBmnppYCfVX/2+EK37dX1iyV4pxBOM1cJ 
```

管道传输的方式是使用 cPanel 的默认地址功能作为特定域的包罗万象。这是命令：

```
|/usr/local/bin/php /home/account/path/to/my/script.php 
```

实际上，我必须在域的 /etc/valiases 文件中手动修改此脚本，因为它需要我在脚本顶部使用 hashbang/shebang，这会导致错误，但这（大部分）有效，但是没有显示整个消息。这是我用来阅读消息的代码：

```
$email = '';
$stream = fopen('php://stdin', 'r');
$i = 0;
while($line = stream_get_line($stream, 65535, PHP_EOL)) {
$email .= $line;
    $i++;
}
fclose($stream); 
```

任何想法为什么我没有收到电子邮件的正文？

# jquery - ASP.net JQUERY 如何对 label.val() 求和

> ID：16002039
> 
> 赞同：0
> 
> 时间：2013-04-14T17:29:07.870
> 
> 标签：jquery, asp.net

**标记**：

```
<asp:Label ID="LabelProfit" runat="server"></asp:Label><p>
<asp:Label ID="LabelCost" runat="server"></asp:Label><p>
<asp:Label ID="LabelFinalBalance" runat="server" Text="Label"></asp:Label> 
```

我有 3 个标签 LabelProfit 和 LabelCost 使用这种方法从后面的代码中获取它们的值：

**服务器端**：

```
 public void getProfitSum()
 {
     string connectionString = cs.getConnection();
     using (SqlConnection myConnection = new SqlConnection(connectionString))
     {
           myConnection.Open();
           SqlCommand command = new SqlCommand("spSumProfit", myConnection);
           command.CommandType = System.Data.CommandType.StoredProcedure;
           command.Parameters.AddWithValue("@userId", cui.getCurrentId());
           LabelProfit.Text = command.ExecuteScalar().ToString();
       }
  } 
```

我想用 Jquery 做 labelFinalBalance = LabelProfit-LabelCost 可以用 Jquery 做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:37:38.537

尝试这个：

```
var P = $('#<%=LabelProfit.ClientID%>').html();
var C = $('#<%=LabelCost.ClientID%>').html();

$('#<%=LabelFinalBalance.ClientID%>').html(parseInt(P) - parseInt(C)); 
```

# html - 引导内联元素

> ID：16002042
> 
> 赞同：4
> 
> 时间：2013-04-14T17:29:25.183
> 
> 标签：html, graphics, twitter-bootstrap, vertical-alignment

所以在我的页面顶部我有一个标题和一个 Facebook 标志。这是一个工作示例：[小提琴](http://jsfiddle.net/DGbgz/)

因此，所有内容都在页面顶部整齐排列。但是，我希望徽标和文本`Join us on...`位于右侧，并且标题保持在原位。我试过添加`class="pull-right"`到第二个和第三个`<li>`元素，[就像这样](http://jsfiddle.net/DGbgz/1/)。但是你可以看到它是如何真正搞砸垂直对齐的。除了对齐之外，这就是我希望它的外观。

关于如何修复对齐的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T21:40:29.147

您可以**在**. `li`此外，H4 会导致中断，所以您应该将 img 和“加入我们...”放在 H4 中。

尝试这个：

```
<ul class="inline">
  <li><h3 class="muted">Heading</h3></li>
  <li class="pull-right">
    <div class="media">
      <h4 class="media-heading">
        <a href="#">
          <img src="http://cache.boston.com/universal/site_graphics/facebook/facebook_logo_36x36.png" style="max-width:100%;" alt="Join us on Facebook" />
        </a>    
        Join Us on Facebook
      </h4>
    </div>
  </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T17:52:43.910

你应该添加另一个元素并给它“pull-right”类。您的加入我们的代码应该在其中。

所以你应该有这样的;

```
<ul>
   logo
</ul>
<ul class="pull-right">
   join us
</ul> 
```

# css - 通过 CSS 仅定位我的图像精灵

> ID：16002043
> 
> 赞同：0
> 
> 时间：2013-04-14T17:29:38.030
> 
> 标签：css, css-sprites

好的，抱歉……这是一个基本的 CSS 问题，但它让我发疯。我是自学成才的，所以我确定我只是缺少一些简单的东西。

网站： http: [//notes.benadelt.com](http://notes.benadelt.com)

徽标图像精灵只是一个主页链接...我正在尝试删除您可以看到破坏图像透明度的背景颜色：

```
<a class="ben-logo" href="/"></a> 
```

您可以看到 CSS 为该部分中的任何链接提供了浅色背景色，这也将应用于图像精灵。我试图从我的图像中删除该背景颜色，但不是从正文链接中删除，并且无法弄清楚。使用开发工具，我只能使用以下方式影响样式：

```
header .words a { background: none; } 
```

但这显然会从所有链接中删除背景，因此它也会删除我在精灵中的图像背景。

认为我可以在后台 URL 之后添加一些内容来执行此操作，例如：

```
background: url(http://www.benadelt.com/notes/wp-content/uploads/2013/04/Ben-Logo-Sprite.svg) none; 
```

当您悬停时，看起来我希望它看起来正常而没有那种该死的背景颜色。

任何帮助，将不胜感激！

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:33:12.620

`header .words a.ben-logo { background-color: transparent; }`

上面的代码将仅针对徽标链接。通过将背景颜色设置为透明，您可以保持图像本身（以及所有其他背景属性！）完好无损。

编辑：一件事-我相信您已经在该背景图像上设置了透明，因为没有指定颜色（透明是默认设置）。在您的情况下可能发生的情况是声明出现在样式表中的`a.ben-logo`声明之前，因此它被覆盖了。`.words a`上面的代码应该修复它的原因是因为额外的类名增加了更多的特异性。这是安迪克拉克的特异性备忘单供您细读： http: [//www.stuffandnonsense.co.uk/archives/images/specificitywars-05v2.jpg](http://www.stuffandnonsense.co.uk/archives/images/specificitywars-05v2.jpg)

# php - Rewrite .htaccess 2 GET variables not splitting?

> ID：16002044
> 
> 赞同：0
> 
> 时间：2013-04-14T17:29:42.310
> 
> 标签：php, .htaccess, rewrite

Trying to write a rewrite rule to capture two GET variables

```
http://stackoverflow.com/blogs/category/general/1

RewriteRule ^blogs/category/(.+)/?$ blogs.php?category=$1 [PT,L,QSA]
RewriteRule ^blogs/category/(.+)/([0-9]+)/?$ blogs.php?category=$1&page=$2 [PT,L,QSA] 
```

However when I grab these from the headers it looks like this?

```
$_GET['category'] = "general/1";
$_GET['page'] = ""; 
```

As you can see I have two rules, one for just when they provide category and one for when they also provide page number. Might be wrong about that approach I'm not sure.

What am I doing wrong here? How can I separate these variables properly using the rewrite rules (I know I could hack it in php but that's ugly)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:39:52.990

我认为您只需要切换它们，以便首先处理更具体的：

```
RewriteRule ^blogs/category/(.+)/([0-9]+)/?$ blogs.php?category=$1&page=$2 [PT,L,QSA]
RewriteRule ^blogs/category/(.+)/?$ blogs.php?category=$1 [PT,L,QSA] 
```

进一步解释一下：如果没有另外指定，所有正则表达式都是贪婪的。这意味着，正则表达式试图获得尽可能多的东西。(.+) 匹配“general/1”。

# javascript - 一个简单的 Chrome 扩展的问题

> ID：16002045
> 
> 赞同：0
> 
> 时间：2013-04-14T17:29:43.727
> 
> 标签：javascript, google-chrome

我正在制作一个非常简单的扩展，当您单击它时，它应该会打开一个新选项卡，并将用户发送到 www.simplewebstats.com，如下所示：

```
http://simplewebstats.com/process.php?domain="Domain the user is browsing" 
```

因此，如果他正在浏览 google.com，他应该被发送为

```
http://simplewebstats.com/process.php?domain=google.com 
```

这是我所拥有的

清单.json

```
{
   "background_page": "background.html",
   "browser_action": {
   "default_icon": "icon.png"
   },
   "description": "A free SEO tool for webmasters to track and display web data from most websites. ",
   "name": "SimpleWebStats Site Report",
   "permissions": [ "tabs", "http://www.simplewebstats.com/" ],
   "version": "1.2",
   "manifest_version": 2
} 
```

背景.html

```
<script src="js.js"></script> 
```

js.js

```
chrome.browserAction.onClicked.addListener(function(tab){
    chrome.tabs.getSelected(null,function(tab){
        chrome.tabs.create({url:"http://www.simplewebstats.com/process.php?ref=plugins&processType=add&domain="+tab.url.match(/:\/\/(.[^/]+)/)[1]});
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:29:48.887

您在较旧版本的 manifest.json 中定义 background.html 页面（低于 1）

较新的版本是：

```
 "background": {
    "page": "background.html"
  }, 
```

再说一遍 - 你只能定义一个后台脚本（不需要 html）：

```
"background": {
    "scripts": ["background.js"]
  }, 
```

# jquery - 避免事件通过 DOM 冒泡（父母对孩子）

> ID：16002055
> 
> 赞同：-2
> 
> 时间：2013-04-14T17:30:54.143
> 
> 标签：jquery

```
<div class="dark">
    <div class="window">
    </div>
<div>

$("div.dark").click(function(e){

       e.stopPropagation();
       $('.dark').fadeOut('fast');
}); 
```

问题是当我点击窗口本身时，一切都在淡出，所以我只想在点击 div.dark 时让它淡出。无法弄清楚如何做到这一点， stopPropagation() 不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:33:31.987

绑定到内部`div`

```
$("div.dark").click(function(e)
{
       if(e.target === this) $('.dark').fadeOut('fast');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:33:57.807

调用`.stopPropagation()`可防止事件通过 DOM 树冒泡。在您的情况下，您希望防止对子项的单击触发父项上的单击事件。为此，您需要将点击事件侦听器附加到子级，并阻止事件传播。你这样做的方式已经太晚了，因为事件已经到达元素并且点击回调已经触发。您唯一要做的就是防止点击在 DOM 中进一步冒泡。

为了防止对具有类的元素`window`的单击触发对父元素的单击，您可以将单击事件侦听器附加到该元素，并在回调中停止传播。如果您也添加它，我相信您的代码应该可以按预期工作：

```
$(".window").click(function(e) { e.stopPropagation(); }); 
```

这样点击`window`不会到达父级，因此不会触发您附加到父级的点击事件回调。

# php - 只看到 TEXT 而忽略 HTML 的 jQuery 函数？

> ID：16002062
> 
> 赞同：0
> 
> 时间：2013-04-14T17:31:28.907
> 
> 标签：php, jquery

**问题**

我有一个将数据发送到 PHP 和 PHP 回复的 jquery POST 代码。

*PHP 回复如下：*

```
echo '<div class="blabla">hello world!</div>'; 
```

我想做这样的事情：

```
if (data == 'hello world') { 
do something
} 
```

这是我的 jQuery：

```
 $.post("events.php?action=send", { data :  $(this).serialize() }, function(data) 
            {
                $("#processing").html('');              
                if (data == 'hello world')                  
                {
                    $(".error").html(data);
                }
                else
                {
                    $("#comments").html(data);
                }
                submit.fadeIn("slow");  
            }); 
```

**问题**

如果我只使用 if data == 'something'，没有 HTML，它将失败。

是否有忽略 HTML 并且只看到 HTML 标签内的 TEXT 的函数？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T17:36:04.593

如果您将字符串传递给 jQuery 构造函数，它将返回一个 DOM 对象，然后您可以在其上使用您的标准 jQuery 方法。

例如：

```
var data = '<div class="blabla">hello world!</div>';

if($(data).text() == 'hello world!'){
    console.log('hello world is the content');
} 
```

`data`将保持为字符串并将充当字符串，但您正在比较`.text()`DOM 元素的。

*注意*：在较大的 HTML 字符串中，这可能需要一些时间才能被处理成 DOM 元素。明智地使用。理想情况下，您应该在 AJAX 请求等中使用 JSON。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-14T17:35:47.360

这是你要找的吗？

。文本（）

[http://api.jquery.com/text/](http://api.jquery.com/text/)

您可以将字符串放入 jQuery (" $() ") 中，这样您将获得 $(data).text() 并将字符串作为文本返回；

# php - 将数组存储在变量中

> ID：16002063
> 
> 赞同：0
> 
> 时间：2013-04-14T17:31:29.823
> 
> 标签：php, arrays, variables

我正在尝试替换下面的代码

```
$Palette = array(
                 "0"=>array("R"=>188,"G"=>224,"B"=>46,"Alpha"=>100),
                 "1"=>array("R"=>188,"G"=>224,"B"=>46,"Alpha"=>100),
                 "2"=>array("R"=>188,"G"=>224,"B"=>46,"Alpha"=>100),
                 "3"=>array("R"=>188,"G"=>224,"B"=>46,"Alpha"=>100),
                 "4"=>array("R"=>176,"G"=>46,"B"=>224,"Alpha"=>100),
                 ); 
```

和`R`的值相似但不同。到目前为止，我已经编写了以下代码作为替代：`G``B`

```
$x = '0';
$incrementarray = array("0"=>"A","1"=>"B","2"=>"C","3"=>"D","4"=>"E");

do
{
    if ($correct == $incrementarray[$x])
    {
        $colour[$x] = '"'.$x.'"=>array("R"=>188,"G"=>224,"B"=>46,"Alpha"=>100),';
    }
    else 
    {
    $colour[$x] =  '"'.$x.'"=>array("R"=>255,"G"=>51,"B"=>51,"Alpha"=>100),';
    }
    $x++;
}
while ($x <= '4');

$allcolours = $colour[0].$colour[1].$colour[2].$colour[3].$colour[4]; 
```

但是，当我使用下面的行将它实现到我的脚本中时，它不起作用。

```
$Palette = array($allcolours); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:35:23.927

```
$x = '0';
$incrementarray = array("0"=>"A","1"=>"B","2"=>"C","3"=>"D","4"=>"E");

do
{
    if ($correct == $incrementarray[$x])
    {
        $Pallete[$x] = array("R"=>188,"G"=>224,"B"=>46,"Alpha"=>100);
    }
    else 
    {
    $Pallete[$x] =  array("R"=>255,"G"=>51,"B"=>51,"Alpha"=>100);
    }
    $x++;
}
while ($x <= '4'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:36:24.297

$x 有一点过度使用。
事实上，你根本不需要那个变量

```
$Palette = array();
$incrementarray = array("0"=>"A","1"=>"B","2"=>"C","3"=>"D","4"=>"E");
foreach ($incrementarray as $value)
{
    if ($correct == $value)
    {
        $Palette[] = array("R"=>188,"G"=>224,"B"=>46,"Alpha"=>100);
    }
    else 
    {
        $Palette[] = array("R"=>255,"G"=>51,"B"=>51,"Alpha"=>100);
    }
} 
```

您需要创建数组，**而不是创建数组的 PHP 代码。**

# yii - 更改 Yii 自定义表单验证器错误消息 {attribute}

> ID：16002066
> 
> 赞同：1
> 
> 时间：2013-04-14T17:31:52.727
> 
> 标签：yii

我可以通过模型中的这些代码更改表单验证器错误消息：

```
array('name, email, subject, body', 'required'
                        'message'=>'Please enter a value for {attribute}.'), 
```

但我不知道 {attribute} 来自哪里以及如何为每个字段更改它，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T19:36:32.447

我不确定我是否理解你的问题，但你问从哪里来`{attribute}`：

一些验证器`{attribute}`在您的示例中引入了占位符。如果验证失败，它们将被替换为属性名称。因此，如果没有`name`输入并且您`message`的`'Please enter a valid {attribute}.'`错误消息将是“*请输入有效名称*”。

虽然`{attribute}`占位符可以与每个验证器一起使用，但其中一些会引入更多的占位符。例如，[`CStringValidator`](http://www.yiiframework.com/doc/api/1.1/CStringValidator)您可以使用`{min}`,`{max}`或`{length}`. 它们将分别替换为*最小*、*最大*或*精确*字符的数量。

这是一个例子：

```
array('firstname,lastname', 'string', 'min'=>3, 
    'tooShort'=>'Your {attribute} must contain at least {min} letters.'
), 
```

如果用户输入的字母少于 3 个，这将给出“*您的名字必须包含至少 3 个字母。 ”。*这样做的好处是，如果您更改`min`参数，您的消息将自动更新。所以它不太容易出错。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T17:36:10.513

使用这些：

```
return array(
    // name, email, subject and body are required
    array('name', 'required',
                'message'=>'Please enter a value for name.'),
    array('email', 'required',
                'message'=>'Please enter a value for email.'),
    array('subject', 'required',
                'message'=>'Please enter a value for subject.'),
    array('body', 'required',
                'message'=>'Please enter a value for body.'), 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-12T01:22:50.043

`{attribute}`取自您的函数：

```
 public function attributeLabels() {
    return array(
        'id' => 'ID',
        'name' => 'Name',
        'password' => 'Password',
        'email' => 'Email',

    );
} 
```

在你的模型上。

# html - 如何垂直对齐这个选择元素

> ID：16002067
> 
> 赞同：0
> 
> 时间：2013-04-14T17:31:53.750
> 
> 标签：html, css

我有一个基本的 CSS 问题。我正在尝试将 css 添加到我的表单中，代码如下：

```
<div id="content">
<form id="form1" method="post" action="">
  <p>
    <label for="name" class="title">Your name:</label>
    <input name="name" type="text" class="widebox" id="name">
  </p>
  <p>
    Colour: <select name="colour_pref" size "1">
    <option value="1">Pink</option>
    <option value="2">Blue</option>
    <option value="3">White</option></select>
  </p>
  <p class="submit">
    <input type="submit" name="add" value="add_colour" id="add">
  </p>
</form>
</div> 
```

这是CSS：

```
#content p {
    border-bottom: 1px solid #efefef;
    margin: 10px;
    padding-bottom: 10px;
    width: 260px;}
.title {
    float: left;
    width: 100px;
    text-align: right;
    padding-right: 10px;}
.submit {
    text-align: right;} 
```

问题是 select 元素与 name 字段不对齐，我尝试将 class="title" 添加到它，但它使它变得更加混乱。如果您能帮助我将此选择元素与文本字段垂直对齐，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:43:43.820

像这样的DEMO [http://jsfiddle.net/kevinPHPkevin/XzHG2/1/](http://jsfiddle.net/kevinPHPkevin/XzHG2/1/)

```
.submit input {
    margin-left:110px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:36:34.787

只需添加`display inline`到您的段落中：

```
p {
    display: inline;
} 
```

[**演示**](http://jsfiddle.net/rp6aR/)

# sql - 使用从 vb6 到 msaccess 的查询计算总工作天数

> ID：16002071
> 
> 赞同：0
> 
> 时间：2013-04-14T17:32:02.453
> 
> 标签：sql, database, vb6, ms-access-2007

我正在使用带有 ms 访问权限的 vb6 作为数据库制作工资单系统。我在 ms 访问中有 3 个表，即：

```
tblemployee,   tblattendance,   tblpayroll 
```

我想获得 2013 年 4 月前所有员工的工资单。所有这些数据都来自 tblattendance。

前任。（有些字段是隐藏的）tblattendance：

```
 Empid  Day  Month  Year  totalhourworkfor1day  
        1      1    april  2013  8
        2      1    april  2013  5
        1      2    april  2013  8
        2      2    april  2013  5 
```

tbl工资单：

```
 empid  month  year  Totalhoursworkfor1month
        1      april  2013  16
        2      april  2013  10 
```

查询 2013 年 4 月后，将添加 1 名员工的所有 totalhoursworkfor1day，结果将保存到 Totalhoursworkfor1month。

这个怎么做？考虑到从我的 vb6 中，我只需要选择月份和年份来生成工资单，然后它将显示到列表视图中

试过的代码：

```
insert into tblpayroll(empid,month,year,hourswork)
select id,month, year, sum(hourswork) from tblattendance where empid=id group by empid; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:50:25.040

这有帮助吗？日期只是一个字段。我使用了 MinOfWorkDay 以避免在 28、29、30、31 结束的月份出现并发症。但是，如果您想要“月末”，这可以解决。在任何情况下，您都可以将结果格式化为简单地显示月/年。

它可以通过默认为刚刚结束的月份的 HAVING 子句或使用在表单上输入的“从”和“到”日期来进一步增强。

```
INSERT INTO tblPayroll ( Empid, HoursWorked, MonthEnd )
SELECT tblWork.Empid, Sum(tblWork.WorkHours) AS SumOfWorkHours, Min(tblWork.Workday) AS MinOfWorkday
FROM tblWork
GROUP BY tblWork.Empid
HAVING (((Min(tblWork.Workday)) Between #4/1/2013# And #4/30/2013#)); 
```

如果您有更多问题回来，我很乐意提供更多帮助。

4 月 15 日：我嘘！我假设您将在 MS Access 中处理您的数据。我不知道vb6，所以不能再帮忙了。您的整个项目可以在访问中完成吗？

# ios - MapKit 自定义引脚注释

> ID：16002072
> 
> 赞同：2
> 
> 时间：2013-04-14T17:32:07.320
> 
> 标签：ios, objective-c, mapkit, mkpinannotationview

我有以下文件：

注释.h：

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface annotation : NSObject <MKAnnotation>

@property(nonatomic, assign) CLLocationCoordinate2D coordinate;
@property(nonatomic, copy) NSString *title;
@property(nonatomic, copy) NSString *subtitle;

@end 
```

注释.m：

```
#import "annotation.h"

@implementation annotation

@synthesize coordinate, title, subtitle;

@end 
```

在主代码中，它包含`NSURL`在其他地方找到的：

```
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
[spinner stopAnimating];

// json parsing
results = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];

NSMutableArray * locations = [[NSMutableArray alloc] init];
CLLocationCoordinate2D location;
annotation * myAnn;

NSArray *pins = mapView.annotations;

if ([pins count])
{
    [mapView removeAnnotations:pins];
}

/* loop through the array, each key in the array has a JSON String with format:
 * title <- string
 * strap <- string
 * id <- int
 * date <- date
 * lat <- floating point double
 * long <- floating point double
 * link <- string

 */
int i;

for (i = 0; i < [results count]; i++) {
    //NSLog(@"Result: %i = %@", i, results[i]);
    //NSLog(@"%@",[[results objectAtIndex:i] objectForKey:@"long"]);

    myAnn = [[annotation alloc] init];
    location.latitude = (double)[[[results objectAtIndex:i] objectForKey:@"lat"] doubleValue];
    location.longitude = (double)[[[results objectAtIndex:i] objectForKey:@"long"] doubleValue];
    myAnn.coordinate = location;
    myAnn.title = [[results objectAtIndex:i] objectForKey:@"title"];
    myAnn.subtitle = [[results objectAtIndex:i] objectForKey:@"strap"];

    [locations addObject:myAnn];

    //NSLog(@"%i", [[results objectAtIndex:i] objectForKey:@"lat"]);
}

[self.mapView addAnnotations:locations]; 
```

我之前看过的东西说我需要使用`MKAnnotationView`而不是`MKPinAnnotationView`但你可以看到我不使用任何一个，我是否可以为放置在屏幕上的图钉使用自定义图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T18:09:46.897

您 (a) 确保将您的视图控制器定义为`delegate`适合您的`MKMapView`; (b) 实施`viewForAnnotation`，例如：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {
    if ([annotation isKindOfClass:[MKUserLocation class]]) {
        return nil;
    }

    if ([annotation isKindOfClass:[CustomAnnotation class]]) {
        static NSString * const identifier = @"MyCustomAnnotation";

        MKAnnotationView* annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:identifier];

        if (annotationView) {
            annotationView.annotation = annotation;
        } else {
            annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation
                                                          reuseIdentifier:identifier];
        }

        // set your annotationView properties

        annotationView.image = [UIImage imageNamed:@"Your image here"];
        annotationView.canShowCallout = YES;

        // if you add QuartzCore to your project, you can set shadows for your image, too
        //
        // [annotationView.layer setShadowColor:[UIColor blackColor].CGColor];
        // [annotationView.layer setShadowOpacity:1.0f];
        // [annotationView.layer setShadowRadius:5.0f];
        // [annotationView.layer setShadowOffset:CGSizeMake(0, 0)];
        // [annotationView setBackgroundColor:[UIColor whiteColor]];

        return annotationView;
    }

    return nil;
} 
```

顺便说一句，在上面的示例中，我将您的`annotation`班级名称更改为`CustomAnnotation`. `annotation`对一个类来说是一个可怕的名字，因为 (a) 它不遵循大写首字母的类命名约定；(b) 它与变量名 相同`annotation`，许多`MKMapViewDelegate`方法默认使用。

### 参考

*   [位置感知编程指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009497-CH1-SW1)

*   [地图工具包框架参考](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:35:09.503

您当然可以使用自定义图像`MKAnnotationView`，请参阅[iOS MapKit 自定义图钉](https://stackoverflow.com/questions/7145797/ios-mapkit-custom-pins)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:36:30.950

两者都是 UIView 的子类，因此将允许自定义视图`MKAnnotationPinView`。`MKAnnotationView`

# django - Django 模型字段具有 null=True 但即使在数据库重置后也会产生 IntegrityError

> ID：16002090
> 
> 赞同：1
> 
> 时间：2013-04-14T17:33:13.307
> 
> 标签：django, django-models

我已经看到用户提出了许多问题，这些问题与表单的 django 错误作斗争：

> IntegrityError at... X 列中的空值违反非空约束

通常这是因为他们只在原始操作之后才更新了它们`models.py`，并且他们需要手动更新有问题的 SQL 表，或者使用南迁移。但是，尽管完全删除了数据库架构并使用. 有人可以解释一下吗？显然，我可以只更新 Postgre 中的列以删除 NOT NULL，但我担心这种情况正在发生。`null=True, blank=True``syncdb``syncdb``models.py`

`models.py`：

```
class TopTen(models.Model):
    toptenuser = models.ForeignKey(TopTenUser)
    date_in = models.DateTimeField()
    date_out = models.DateTimeField(null=True, blank=True)
    active = models.BooleanField() 
```

`syncdb`：

```
> (venv)richard@ubuntu:~/DjangoProjects/Heroku/mytopten$ heroku run python manage.py syncdb
> Running `python manage.py syncdb` attached to terminal... up, run.5406
> Creating tables ...
> Creating table auth_permission
> Creating table auth_group_permissions
> Creating table auth_group
> Creating table auth_user_groups
> Creating table auth_user_user_permissions
> Creating table auth_user
> Creating table django_content_type
> Creating table django_session
> Creating table django_site
> Creating table django_admin_log
> Creating table mytopten_toptenuser
> Creating table mytopten_topten
> Creating table mytopten_song_toptens
> Creating table mytopten_song 
```

然而，我第一次`runserver`尝试进入 TopTen 实例时：

> IntegrityError：“date_out”列中的空值违反非空约束

我在这里做错了吗？谢谢。

# java - 有没有办法优化这段代码以避免 outOfMemory 错误？

> ID：16002094
> 
> 赞同：0
> 
> 时间：2013-04-14T17:33:26.663
> 
> 标签：java, arrays, recursion, arraylist, tree

我的总体项目是创建一棵树并使用 Huffman 编码对给定文件进行编码和解码。我正需要解码我的文件。为此，我必须遍历我的霍夫曼树，直到到达最底部的叶子，然后返回由该叶子表示的字节。我根据给方法的位串遍历树。AKA 如果当前位为 1，我会转到树中的 childOne，依此类推。问题是我不断收到`outOfMemory`错误。有什么办法可以优化这段代码，使其不会使用太多的内存？

```
 public static int decode(List<Integer> bitArray, HuffmanNode root, int startingPosition,
                          ArrayList<Byte> finalArray)
    {
    HuffmanNode childOne;
    HuffmanNode childZero;
    int currentBit = bitArray.get(startPosition);
    byte newByte;

            childOne = root.getChildOne();
            childZero = root.getChildZero();
            if(childOne == null && childZero == null)
            {
               finalArray.add(root.getByteRepresented()); 
               return startPosition;
            } 
            else if(currentBit == 1)
            {
                startPosition++;
                startPosition = decode(bitArray,childOne,startPosition,finalArray);
            }
            else
            {
                startPosition++;
                startPosition = decode(bitArray,childZero,startPosition,finalArray);
            }

         return startPosition;

} 
```

我需要知道它结束的位数组中的位置以及将指定的字节放入数组中，这就是为什么我将字节放入方法内的数组中并返回和 int。基本上，有没有更好的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:37:45.087

就在这里。将递归更改为迭代..

```
temp = root;
childOne = temp.getChildOne();
childZero = temp.getChildZero();
while(childOne != null && childZero != null) {
  currentBit = bitArray.get(startPosition++);
  if (currentBit == 1) {
    temp = childOne;
  } else {
    temp = childZero;
  }
  childOne = temp.getChildOne();
  childZero = temp.getChildZero();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:46:53.367

我不知道事情有多大，但我认为你不需要递归。你不能用这样的循环做你需要的事情：

```
while (curNode.isNotLeaf())
{
  if (currentBit == 1) curNode = curNode.getChildOne();
  else curNode = curNode.getChildZero();
  currentBit = nextBit;
}

addByte(curNode, bigArray) 
```

所以你在这个循环中遍历你的位，当你离开时添加表示的字节，然后继续 - 不需要所有的堆栈帧递归。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:50:49.993

此外，请考虑使用较低级别的数据结构，例如`java.util.BitSet`代替`List<Integer>`和`java.io.ByteArrayOutputStream`代替`ArrayList<Byte>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:55:51.363

如果递归是您的问题，您很可能会遇到堆栈溢出错误。由于您的内存不足，我建议您查看：

*   确保在每次通话后丢弃`bitArray`和。`finalArray`
*   使用流输出到。
*   使用 a`BitSet`作为位数组。
*   确保您没有意外在树中制作循环。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-25T19:56:25.000

看看像 OpenBitSet (Lucene) 这样的压缩位集实现 [http://code.google.com/p/javaewah/](http://code.google.com/p/javaewah/) [http://www.censhare.com/en/aktuelles/censhare-labs/yet-another-compressed -bitset](http://www.censhare.com/en/aktuelles/censhare-labs/yet-another-compressed-bitset)

# php - 从父文档获取输入值

> ID：16002097
> 
> 赞同：0
> 
> 时间：2013-04-14T17:33:34.873
> 
> 标签：php, variables, curl

我`CURL`用来抓取这样的网站：

```
<?php

$url = "http://www.bbc.com/news/";

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$curl_scraped_page = curl_exec($ch);
curl_close($ch);

$curl_scraped_page = preg_replace("#(<\s*a\s+[^>]*href\s*=\s*[\"'])(?!http)([^\"'>]+)([\"'>]+)#",'$1http://www.bbc.com/news/$2$3', $curl_scraped_page);

echo $curl_scraped_page;
?> 
```

如您所见，这`URL`是为 BBC 新闻设置的。但是，我希望`URL`成为一个变量。变量必须是 的值`parent.document`。例如`JQuery`，我会这样做：

```
var value = $("input", parent.document.body).val(); 
```

我该如何设置这样的东西`PHP`？`parent.document`我用 Google 搜索过，但在 PHP 中找不到任何相关信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:51:45.390

`PHP`是一种服务器端脚本语言，因此无法访问当前`HTML`页面。它在`HTML`发送到客户端浏览器之前被处理，因此`parent.document`在处理脚本时甚至不存在。

如果您想将数据从`HTML`页面传递到`PHP`脚本，您可以使用`HTML` `<form>`或通过`JavaScript`/`JQuery` `AJAX`请求来实现。

例如，以下代码会将 的值传递`input`给`PHP`脚本：

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
function pass(){
    var value = $("input", parent.document.body).val(); 
    $.ajax({
        type: "POST",
        url: "myscript.php",
        data: { mydata: value }
    }).done(function( msg ) {
        alert( "Data Saved: " + msg );
    });
}
</script>
</head>
<body>
<input type="text" />
<button onclick="pass();return false;">Pass Value</button>
</body>
</html> 
```

以及修改后的脚本（myscript.php）：

```
<?php
$url = isset($_POST['mydata']) ? $_POST['mydata'] : '';
$curl_scraped_page = '';

if(!empty($url)){
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $curl_scraped_page = curl_exec($ch);
    curl_close($ch);

    $curl_scraped_page = preg_replace("#(<\s*a\s+[^>]*href\s*=\s*[\"'])(?!http)([^\"'>]+)([\"'>]+)#",'$1'.$url.'$2$3', $curl_scraped_page);
}

echo $curl_scraped_page;
?> 
```

我建议使用 $(id) 来检索 an`<input>`而不是`$("input",context)`.

例如

```
var value = $('#txt').val(); 
```

并且在`HTML`：

```
<input type="text" id="txt" /> 
```

有关更多信息，`JQuery.ajax`请参见[此处](http://api.jquery.com/jQuery.ajax/)。

# javascript - 在可编辑网格中，如何使 Ext 组合框在选择项目时立即完成编辑模式？

> ID：16002100
> 
> 赞同：5
> 
> 时间：2013-04-14T17:33:51.473
> 
> 标签：javascript, extjs, combobox, extjs4, extjs4.1

我已经使用 CellEditing 插件配置了一个可编辑的 Ext JS 4 网格。网格中的一些单元格有一个文本字段编辑器，还有一些使用组合框编辑器。这一切都很好，但我对组合框编辑器的默认行为有一个小问题。

基本上，在编辑具有组合框编辑器的单元格时，如果您用鼠标从下拉列表中选择一个项目，则该单元格的“编辑”模式不会完成。换句话说，单元格不会立即退出编辑模式并被标记为脏。相反，它会一直处于编辑模式，直到您点击页面上的其他位置。

我认为 Sencha 将此作为组合框编辑器的默认行为是不寻常的，但我不会抱怨。我只想知道如何能够选择一个组合框项目并立即使单元格退出编辑模式，但我不知道在哪里定义这个自定义行为。

这是一个可以玩的小例子 JS fiddle：

[http://jsfiddle.net/FFwkM/](http://jsfiddle.net/FFwkM/)

代码复制如下：

```
var stateStore = Ext.create('Ext.data.Store', {
    fields: ['name'],
    data : [
        {"name":"Alabama"},
        {"name":"Alaska"},
        {"name":"Arizona"}
    ]
});

var gridStore = Ext.create('Ext.data.Store', {
    fields:['firstName', 'state'],
    data:{'items':[
        {"firstName":"Lisa", "state":"Alabama"},
        {"firstName":"Bart", "state":"Alabama"},
        {"firstName":"Homer", "state":"Alabama"},
        {"firstName":"Marge", "state":"Arizona"}
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    store: gridStore,
    columns: [{
        header: 'First Name',  dataIndex: 'firstName', flex: 1, editor: 'textfield'
    }, {
        header: 'State', dataIndex: 'state', flex: 1, editor: {
            xtype: 'combobox', store: stateStore, queryMode: 'local', displayField: 'name', valueField: 'name'
        }
    }],
    selType: 'cellmodel',
    plugins: [{
        ptype: 'cellediting',
        clicksToEdit: 2
    }],
    height: 150,
    width: 200,
    renderTo: Ext.getBody()
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T19:40:09.480

实现所需行为的一种方法是`select`在组合框上添加事件侦听器，然后在处理程序中触发`blur`事件。例子：

```
Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    store: gridStore,
    columns: [{
        header: 'First Name',  dataIndex: 'firstName', flex: 1, editor: 'textfield'
    }, {
        header: 'State', dataIndex: 'state', flex: 1, editor: {
            xtype: 'combobox', store: stateStore, queryMode: 'local', displayField: 'name', valueField: 'name',
            listeners: {
                select: function(combo, recs, opts){
                    combo.fireEvent('blur'); //<------
                }
            }
        }
    }],
    selType: 'cellmodel',
    plugins: [{
        ptype: 'cellediting',
        clicksToEdit: 2
    }],
    height: 150,
    width: 200,
    renderTo: Ext.getBody()
}); 
```

工作叉在这里：http: [//jsfiddle.net/Zd5QM/](http://jsfiddle.net/Zd5QM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T21:58:03.057

监听 select 事件，然后：

```
 listeners: {
                select: {
                    fn: function(c, r, eopts) {
                        c.ownerCt.completeEdit();
                    }
                }
            } 
```

[http://www.sencha.com/forum/showthread.php?261264-How-to-make-a-grid-cell-immediately-exit-edit-mode-when-a-combo-box-item-is-选择](http://www.sencha.com/forum/showthread.php?261264-How-to-make-a-grid-cell-immediately-exit-edit-mode-when-a-combo-box-item-is-selected)

# c++ - 将字符串流式传输到 boost::fusion::vector 不起作用？

> ID：16002103
> 
> 赞同：1
> 
> 时间：2013-04-14T17:33:57.890
> 
> 标签：c++, boost, tuples, boost-fusion, boost-tuples

我想通过从 std::cin 流式传输来初始化 fusion::vector。[正如文档](http://www.boost.org/doc/libs/1_53_0/libs/fusion/doc/html/fusion/sequence/operator/i_o.html "文档")所说，这似乎是不可能的：

*...使用 std::string 或 C 风格的字符串元素提取序列通常不起作用，因为流式序列表示可能无法明确解析*

之前可能已经问过这个问题，但我想深入了解“可解析字符串”的外观。

她就是一个例子：

```
#include <iostream>
#include <sstream>
#include <boost/fusion/sequence/io.hpp>
#include <boost/fusion/include/io.hpp>
#include <boost/fusion/tuple/tuple.hpp>
#include <boost/assert.hpp>

#include <string>
#include <assert.h>

using namespace boost::fusion;
using std::cout;
using std::endl;
void main()
{
    std::istringstream iss("42,aaa,bbb");
    vector<int, std::string, std::string> v;
    iss >> tuple_open("") >> tuple_close("") >>tuple_delimiter(",");
    iss>>v;
    assert(get<1>(v) == std::string("aaa,bbb"));
    cout << v << endl;
    cout << "element 0: " << get<0>(v) << endl;
    cout << "element 1: " << get<1>(v) << endl;
    cout << "element 2: " << get<2>(v) << endl;
} 
```

输出：

```
(42 aaa,bbb )
element 0: 42
element 1: aaa,bbb
element 2: 
```

如何让 fusion io 运算符“>>”与 std::string 很好地配合使用？

# c# - 如何从 EF LINQ 查询中调用 DB 函数？

> ID：16002106
> 
> 赞同：7
> 
> 时间：2013-04-14T17:34:18.933
> 
> 标签：c#, sql-server, entity-framework

在我的数据库中，我定义了一些函数，假设它被称为`fnTest`. 是否可以从我的 LINQ/EF 查询中调用该函数？像这样的东西：

```
var param3, param4;
var res = (from x in db.Something
           where x.field1 > 0
           orderby fnTest(x.f1, x.f2, param3, param4)
           select x).Take(20); 
```

如您所见，我需要该函数在 DB 端执行，因为我需要使用它返回的值对数据进行排序。前两个参数是表中的字段，后两个参数是一些在程序中会改变的数字，但对于每个查询都是不变的。

是否可以以某种方式调用已经在数据库中创建的函数？还是我需要使用这样的东西：

```
((IObjectContextAdapter) context).ObjectContext.CreateQuery 
```

并手动编写查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T17:47:37.270

首先，`fnTest`必须首先在数据库中创建为用户定义的函数：

```
CREATE FUNCTION [fnTest] (@fi int, @f2 int, @param3 int, @param4 int)
RETURNS int
AS ... 
```

然后在您的 .edmx 文件中，像这样声明函数：

```
<Function Name="fnTest" ReturnType="int" Schema="dbo" >
    <Parameter Name="f1" Mode="In" Type="int" />
    <Parameter Name="f2" Mode="In" Type="int" />
    <Parameter Name="param3" Mode="In" Type="int" />
    <Parameter Name="param4" Mode="In" Type="int" />
</Function> 
```

现在您可以将此函数绑定到模型中的方法，如下所示：

```
[EdmFunction("MyNamespace", "fnTest")]
public static int fnTest(int f1, int f2, int param3, int param4)
{
    throw new NotSupportedException("Direct calls are not supported.");
} 
```

您现在可以在标准 LINQ 查询中使用此方法。

**延伸阅读**

*   [如何：调用自定义数据库函数](http://msdn.microsoft.com/en-us/library/dd456847%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:40:59.910

对实体使用 sql 查询。例如查看 msdn：http: [//msdn.microsoft.com/en-us/data/jj592907.aspx](http://msdn.microsoft.com/en-us/data/jj592907.aspx)

# javascript - 如何从字符串中提取未知 URL

> ID：16002107
> 
> 赞同：0
> 
> 时间：2013-04-14T17:34:21.687
> 
> 标签：javascript, node.js, express

我正在编写一个 Node/Express 应用程序，我在 JSON 对象中有一个文本字符串，我需要从中提取一个 URL。URL每次都不一样，字符串本身有两个非常相似的URL，我只想抽出一个。

我唯一知道的是，在字符串中，url 总是以相同的文本开头。

细绳：

```
The following new or updated things match your search criteria.

Link I Need
<http://randomurl.com/Junk/Yay/ThisView.aspx?r=164241242186&s=J
WD&t=JWD> 

Link I don't Need
<http://randomurl.com/Junk/Yay/ThisView.aspx?r=164241242186&s=J
WD&t=JWD&m=true> 

Search was last updated on April 12th, 2013 @ 14:43 

If you wish to unsubscribe from this update... 
```

在这个字符串中，我只需要提取 下的 URL `Link I Need`，仅此`http://randomurl.com/Junk/Yay/ThisView.aspx?r=164241242186&s=J WD&t=JWD`而已。我不太确定该怎么做，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:40:54.710

像这样的东西应该工作：

```
var s = "The following new or updated ...";
var regex = /Link I Need\s*<([^>]*)>/;
var match = s.match(regex);
var theUrl = match && match[1]; 
```

这假定 URL 没有跨换行符拆分。如果是，那么在找到匹配项后，您需要

```
theUrl = theUrl.replace(/\s+/, '') 
```

# ios - Preference Bundle PSLinkListCell 更改图像

> ID：16002111
> 
> 赞同：2
> 
> 时间：2013-04-14T17:34:38.093
> 
> 标签：ios, xcode, jailbreak, tweak

我试图为我的偏好包编写代码，我在 Xcode (iOSOpenDev) 上创建通知中心小部件时勾选了“偏好包”框。我有一个`PSLinkListCell`里面有三件物品。我希望这三个项目也`UIimage`根据所选选项更改视图中的图像。

任何帮助将非常感激。

PLIST（仅限 PSLinkListCell）

```
 <dict>
        <key>cell</key>
        <string>PSLinkListCell</string>
        <key>defaults</key>
        <string>dylankelly.MyStat</string>
        <key>key</key>
        <string>color_pref</string>
        <key>label</key>
        <string>Background Colour</string>
        <key>detail</key>
        <string>PSListItemsController</string>
        <key>validTitles</key>
        <array>
            <string>Blue</string>
            <string>Green</string>
            <string>Red</string>
        </array>
        <key>validValues</key>
        <array>
            <integer>1</integer>
            <integer>2</integer>
            <integer>3</integer>
        </array>
        <key>default</key>
        <integer>1</integer>
        <key>PostNotification</key>
        <string>dylankelly.MyStat-preferencesChanged</string>
    </dict> 
```

UIImage 视图

```
UIImage *bg = [[UIImage imageWithContentsOfFile:@"/System/Library/WeeAppPlugins/MyStat.bundle/WeeAppBackground.png"] stretchableImageWithLeftCapWidth:5 topCapHeight:71];
UIImageView *bgView = [[UIImageView alloc] initWithImage:bg];
bgView.frame = CGRectMake(0, 0, 312, 71); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:54:19.760

因此，您需要让您的小部件**代码在用户使用****设置**（Preferences.app）更改设置时得到通知。根据您的 plist 设置方式，它看起来像一个名为[Darwin 的通知](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFNotificationCenterRef/Reference/reference.html)

```
dylankelly.MyStat-preferencesChanged 
```

当用户更改设置时，将通过 Darwin 通知中心发送。因此，您需要注册一个回调，以便在发生此通知时调用。加载代码后，您应该执行以下操作（例如，在 MyWidgetViewController.m 中，如果这是管理图像视图的位置）：

```
#include <notify.h>

...

CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
                                (void*)self, // observer
                                onPreferencesChanged, // callback
                                CFSTR("dylankelly.MyStat-preferencesChanged"), // event name
                                NULL, // object
                                CFNotificationSuspensionBehaviorDeliverImmediately); 
```

您的回调方法（将其放在同一个 MyWidgetViewController.m 文件中）将是：

```
static void onPreferencesChanged(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo) {

    // since this is a static method, we pass the instance in the observer parameter
    MyWidgetViewController* vc = (MyWidgetViewController*)observer;
    [vc updateImage];
} 
```

最后，读取首选项 plist 并更新图像视图的代码：

```
-(void) updateImage {
    // load the preferences plist file, and read the new color_pref value
    NSDictionary* sharedPrefs = [[NSDictionary alloc] initWithContentsOfFile: PLIST_FILENAME];
    NSNumber* color = (NSNumber*)[sharedPrefs valueForKey: @"color_pref"];
    int colorValue = [color intValue];
    // the integer values correspond to the validValues defined in the 
    //  preference bundle's plist file
    switch (colorValue) {
        case 1:
           bgView.image = [UIImage imageNamed: @"blueBackground"];  // for blueBackground.png / blueBackground@2x.png
           break;
        case 2:
           bgView.image = [UIImage imageNamed: @"greenBackground"];
           break;
        case 3:
           bgView.image = [UIImage imageNamed: @"redBackground"];
           break;
        default:
           break;
    }
} 
```

# php - 无法使用图形 api 显示来自组的评论

> ID：16002112
> 
> 赞同：1
> 
> 时间：2013-04-14T17:34:44.300
> 
> 标签：php, facebook, api, facebook-graph-api

我一直在尝试使用图形 api 从 facebook 组中获取每篇帖子，然后在不同的网页上显示帖子和评论，我唯一的问题是我无法正确获得评论，到目前为止我有这个：

```
<div class="post">
    <?foreach($data2->data as $d2) {?> 
    <div class="single">
        <div class="text">
            <span class="span_post" style="color: #999999; clear:both; display:block;"><?=$d2->message?></span>
            <?foreach($d2->comments->comment_list as $c2)?>
                <span class="span_comment" style="color: #999999; clear:both; display:block;"><?=print_r($c2->text) ?></span>
    </div>
</div>
<?}?>
</div> 
```

data2 定义为

```
$comment2 = "https://graph.facebook.com/me/fql?q=select%20message,%20comments%20from%20stream%20where%20source_id%20=%20{$group_id}&access_token={acces_token}";
$data2 = json_decode(file_get_contents($comment2)); 
```

现在的问题是它只显示评论，即使有多个评论（所以如果有 10 条评论，它会显示最新的评论，而不显示其他 10 条，即使它们存在于请求的 json 中）。我对 PHP 很陌生，所以也许我做错了什么，这就是为什么我不能让它工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:40:09.340

我建议您为此使用图形请求而不是 FQL 请求。

尝试请求这个

```
https://graph.facebook.com/{GROUP_ID}?fields=feed&method=GET&format=json&access_token={ACESS_TOKEN} 
```

自定义请求数据。使用 Facebook 资源管理器工具[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

# python - 获取字典中的最大键但低于变量

> ID：16002115
> 
> 赞同：4
> 
> 时间：2013-04-14T17:34:55.950
> 
> 标签：python

给定一个字典和一个像这样的变量：

```
dic = {0 : 'some', 10 : 'values', 20 : 'whatever'}
var = 14 
```

我想从键最大但小于或等于变量的字典中获取值。我不知道这是否清楚，但在这种情况下，我正在寻找`10`.

我想出了这个功能，但我想知道是否有更简单的方法来做到这一点，因为我对 python 还很陌生。

```
def get_greatest_key(dic, var):
    # if the key exists no need to search
    if var in dic:
        return dic[var]
    else:
        # create a list with all the keys sorted in reverse 
        l = sorted(dic, key=dic.get)
        i = 0
        while i < len(l):
            # parse the list
            if l[i] <= var:
                return dic[l[i]]
            i += 1
        # by default we return the last element in the dictionary
        return dic[l[len(l) - 1]] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T17:37:39.393

如果您想要小于或等于 的最大键`var`，则可以将生成器表达式传递给`max`函数：

```
>>> dic = {0 : 'some', 10 : 'values', 20 : 'whatever'}
>>> var = 14
>>> max(k for k in dic if k <= var)
10 
```

有对应的值

```
>>> dic[max(k for k in dic if k <= var)]
'values' 
```

`ValueError`如果您认为合适的参数`max`为空，您可以决定如何处理throw 。

# python - 半关闭套接字打印坏字符

> ID：16002127
> 
> 赞同：1
> 
> 时间：2013-04-14T17:36:26.227
> 
> 标签：python, networking

我的客户端发送一个字符串“abcd”并关闭套接字（写入部分）。我的服务器读取数据并将其附加到列表（集合）中，直到收到文件末尾（检测到半关闭套接字）。然后它遍历列表并发送数据。

我的服务器代码：

```
while True:
    try:
        sock,address = self.__mySocket.accept()

    except:
        print "Client is dead"
        break
    print "Client connect: " + str(address) 

    collection = []
    while True:
        data = sock.recv()  
        if len(data) == 0:
            break                  
        data = str(data[::-1])
        collection.append(data)

    for val in collection:
        sock.send(val)

sock.close() 
```

客户端：

```
sslsock.sendall('abcd\n')
time.sleep(1)                                
sslsock.shutdown(socket.SHUT_WR)

data = ""
while True:
    data = sslsock.recv()
    if len(data) == 0:
        sslsock.close()
        sys.exit(1)

    print data 
```

现在，当我在客户端上打印数据时，它只会打印垃圾。我试过使用`pickle`，但也没有用。现在，当我在客户端上注释掉关闭并围绕它工作我的服务器时，它工作正常。它打印发送数据的反面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:33:47.410

在服务器代码中。我将 for 循环放在 if len(data) ==0 中。而且，它有效。我猜这个 break 语句甚至超出了外部 While True。所以，它从来没有达到发送的地步。

# hadoop - Hadoop 连接被拒绝

> ID：16002134
> 
> 赞同：0
> 
> 时间：2013-04-14T17:37:25.067
> 
> 标签：hadoop

我已经在我的 mac 中以伪分布式模式安装了 hadoop。它正在工作。但是，每次我启动计算机并尝试启动所有服务时，我都能启动除名称节点之外的所有服务。因此，为了解决这个问题，我再次格式化 namenode，然后通过调用 start-all.sh 启动所有服务，一切正常。问题是我以前在 hdfs 中的所有文件和目录都因格式而被删除。那么如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:22:27.640

在您的 core-site.xml 文件中添加“hadoop.tmp.dir”属性，并提供一些适当的位置作为值。同样在 hdfs-site.xml 文件中添加“dfs.name.dir”和“dfs.name.dir”。这些属性的默认位置是 /tmp 目录，每次重新启动时都会清空。

# javascript - 用于 Chrome 阻止不安全内容的 Javascript/JQuery 事件

> ID：16002137
> 
> 赞同：1
> 
> 时间：2013-04-14T17:37:35.797
> 
> 标签：javascript, jquery, google-chrome

如果页面是通过 https 提供的，但相关文件是从不安全的 http 网站提供的，则 Chrome 将抛出“不安全内容”警告。是否有我可以用来知道 Chrome 何时阻止不安全内容以及用户是否允许不安全内容的事件/属性。当 Chrome 加载“不安全的内容”时，地址栏的右侧会出现一个盾牌，并且用户可以单击此盾牌并仍然运行脚本。有什么活动吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:41:41.607

我能想到的唯一方法是通过非 https 提供文件，如果它们允许非安全内容，它将包含一个运行功能。

显然，只有当他们允许加载非安全内容时才会包含此脚本，因此可以作为您的事件检查。因此，您还可以通过将全局变量存储在非安全文件中并在安全的 JS 文件（或文档内）中检查它来检查这些*是否被允许。*

显然，如果您通过 SSL 提供内容，您应该确保您包含的所有内容也都通过 SSL。

# mysql - 如何在 Coldfusion 中创建一个带有 UUID 名称的临时 MySQL 表？

> ID：16002140
> 
> 赞同：0
> 
> 时间：2013-04-14T17:37:45.077
> 
> 标签：mysql, coldfusion, temp-tables

我正在使用`Coldfusion8`并且`MySQL 5.0.91`正在尝试创建一个临时表，从 CSV 导入一些数据，验证，存储在数据库中并删除临时表。

我可以直接在 MySQL 中执行所有步骤，它可以毫无问题地工作。但是，当我尝试在 Coldfusion 中创建临时表时，我不断收到 MySQL 错误。

这就是我所拥有的：

```
<cfset variables.tt = CreateUUID()>
<cfquery datasource="#session.datasource#">
    DROP TEMPORARY TABLE IF EXISTS ##variables.tt;
    CREATE TEMPORARY TABLE ##variables.tt (
      tmp_kto VARCHAR(7) DEFAULT ''
    , tmp_kz VARCHAR(3) DEFAULT ''
    , tmp_preisliste VARCHAR(1) DEFAULT ''
    , tmp_eg VARCHAR(3) DEFAULT ''
    ) ENGINE=MEMORY;
 </cfquery> 
```

这是行不通的。我也试过了`#variables.tt#`，`variables.tt`但我一直收到同样的错误，而当我直接在 MySQL 中运行代码时它工作正常（表名“test”）

**问题**：
我不知道我做错了什么。表名是否有最大长度？

感谢您的一些见解。

**编辑：**
我得到通常的错误：

```
 you have an error in your SQL syntax;
 check the manual that corresponds to your MySQL server version for the right syntax to use near 
 'CREATE TEMPORARY TABLE #variables.tt (tmp_sa VARCHAR(3) DEFAULT '' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:05:19.693

您的问题最可能的根源是 uuid 不适合作为表名。一方面，它包含连字符。我不知道 MySQL 是否允许这样做，但我不记得曾经在表名中看到过连字符。

我们也有类似的情况，但使用的是 redbrick。我们想为临时表创建唯一的名称。我们使用自定义标签编写的方法是使用字符串“temp”，后跟一个随机数。我们也有一些尝试/捕捉的东西，以防我们对随机数真的很不走运。

几年前我写了那个标签。如果我再做一次，我可能会用 cftoken、cfid 和 tickcount 替换随机数。

此外，您不能在创建表之前删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T15:57:02.337

在我看来，您缺少要输出的变量周围的哈希标记。

```
CREATE TEMPORARY TABLE ##variables.tt ( 
```

应该

```
CREATE TEMPORARY TABLE #variables.tt# ( 
```

`#variables.tt`按照您的方式，当您想要创建一个名称为variables.tt*值*的临时表时，MySQL 正在尝试使用字符串（加倍的哈希转义 ColdFusion 中的字符）。

# android - Android：创建 AdView 时出现 ANR

> ID：16002145
> 
> 赞同：0
> 
> 时间：2013-04-14T17:38:01.823
> 
> 标签：android, admob, adview

在过去的一周里，我开始收到很多与 AdMob、AdView 创建相关的 ANR 报告。不过，我没有更改代码中的任何内容。

我在我的 Activity onCreate() 方法中创建它，如下所示：

```
this.adView = new AdView(this, AdSize.SMART_BANNER, "axxxxxxxxxxxxxx"); 
```

这是我得到的 ANR 堆栈

```
at dalvik.system.DexFile.openDexFile(Native Method)
at dalvik.system.DexFile.<init>(DexFile.java:93)
at dalvik.system.DexFile.loadDex(DexFile.java:133)
at dalvik.system.DexPathList.loadDexFile(DexPathList.java:261)
at dalvik.system.DexPathList.makeDexElements(DexPathList.java:229)
at dalvik.system.DexPathList.<init>(DexPathList.java:96)
at dalvik.system.BaseDexClassLoader.<init>(BaseDexClassLoader.java:52)
at dalvik.system.DexClassLoader.<init>(DexClassLoader.java:57)
at com.google.ads.ag.b(SourceFile:95)
at com.google.ads.ag.a(SourceFile:69)
at com.google.ads.bp.<init>(SourceFile:158)
at com.google.ads.a.w.<init>(SourceFile:266)
at com.google.ads.AdView.a(SourceFile:508)
at com.google.ads.AdView.<init>(SourceFile:94) 
```

我试图在后台线程中创建 AdView，但它似乎只有在 UI 线程中创建时才有效......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:24:44.543

AdMob 刚刚[发布](http://googleadsdeveloper.blogspot.com/2013/04/google-admob-sdk-v641-released-for.html)了应解决 ANR 问题的 Android SDK v6.4.1。

# asp.net-mvc - 单页应用程序和 MVC - 是/还是？

> ID：16002148
> 
> 赞同：2
> 
> 时间：2013-04-14T17:38:18.733
> 
> 标签：asp.net-mvc, model-view-controller, single-page-application

在过去的几个月里，我使用 MVC 4 学习和开发了几个应用程序。我真的很喜欢 MVC 模型和 Razor View 引擎的简单性。然而，现在我开始听到越来越多的关于单页应用程序的消息。这是 SPA 对 MVC 的改进，并逐渐取代 MVC 的情况吗？或者这更像是 SPA 服务于特定类型的应用程序而 MVC 服务于另一种应用程序的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:59:00.347

SPA 更适合诸如 Gmail 之类的 Web 应用程序，而不是典型的网站（通常，我指的是具有普通文本页面、某些表单，甚至可能是购物车类型的网站）。

我不会说 SPA 将取代 MVC，但我相信它们各自拥有自己的，但更重要的是 AngularJS 等 SPA 类型的框架也可以与 MVC 一起创建一个更强大的网站。

# html - 使用 100% 宽度时是否必须删除 px 进行填充？

> ID：16002150
> 
> 赞同：2
> 
> 时间：2013-04-14T17:38:29.527
> 
> 标签：html, css, responsive-design

我正在构建一个响应式网页，并将所有外包装（包括正文）设置为`100%`宽度。问题是某些 100% 宽度的元素超出了包装器？

请看一下这个页面：[http ://test.ufeed.se/](http://test.ufeed.se/)

将浏览器的大小调整到 1000 像素以下。向下滚动一点，然后使用水平滚动。你会看到有些元素在包装之外，为什么？

我是否可能必须像这样`px`从`100%`宽度中删除：

```
width: calc(100% - 16px); 
```

删除填充（需要额外空间）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:43:09.263

如果您不使用 box-sizing:border-box，则填充会使元素更大

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T17:45:37.653

这是因为盒子模型。基本上宽度设置为 100%，然后将边距、边框和填充添加到将内容推送到您想要的位置之外。

是的，您可以删除填充，这应该可以解决问题，但是由于块级元素会自动占用可用的全部宽度，您应该能够删除宽度并且它会按预期工作。

您还可以使用`box-sizing: border-box;`which 告诉浏览器在宽度计算中包含填充。

在没有实际查看您的代码的情况下，我认为这些是您问题的最佳解决方案。如果您需要更具体的帮助，请在[jsFiddle](http://jsfiddle.net/)中复制问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T17:54:13.287

了解width:auto 和 width:100%`width: auto`及其**[区别](http://www.456bereastreet.com/archive/201112/the_difference_between_widthauto_and_width100/)**

如果容器已经有宽度并且您正在考虑在后代上设置 100% 的宽度，那么您真正需要的是**自动**；) 无论填充、边框和框模型如何，结果都将是相同的故意的。

`* { box-sizing: border-box }`它的前缀（`boxsizing.htc`如果需要，还有 IE6-7 的 polyfill）也很简洁，但它会对您的布局产生巨大影响。我的意思是，这是您必须为整个项目做出的选择。`width: auto`在更特殊的情况下很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:43:44.553

我认为这个宽度元素应该是 %px 元素

```
.postContainer .createdDateCon {
 width: 150px;
} 
```

# javascript - 在JS中获取DOM外部元素的宽度和高度

> ID：16002151
> 
> 赞同：1
> 
> 时间：2013-04-14T17:38:37.970
> 
> 标签：javascript, dom

```
function createCloudEntry(termName, fontSize) {
  var div = document.createElement("div");
  div.innerText = termName;
  div.style.fontSize = fontSize + "px";
  div.style.position = "absolute";
  div.style.display = "inline-block";
  div.style.top = getRandomPosition(0, cloudHeight - 40) + 'px';
  div.style.left = getRandomPosition(0, cloudWidth - 150) + 'px';

//document.write("Left: " + getRandomPosition(0, parseInt(cloudHeight)) + ", Top: " +   getRandomPosition(0, parseInt(cloudWidth)) + "<br/>");
//document.write(div.style.width + " | " + div.style.height + "<br/>");

  return div; 
```

}

所以这是我的功能，我只是创建一个带有一些 css 属性的新 div。我的问题是，在将元素添加到 DOM 之前，我能否获得 SO FAR 元素的宽度和高度（在添加具有特定字体大小的文本之后）？我尝试了 window.getComputedStyle() 但它不起作用， div.style.width/height 也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T16:12:52.303

我使用类似的东西将其临时添加到 DOM 中，然后在提取值后立即将其删除。

```
function getElementSizing(e)
{
    document.body.appendChild(e);
    var s = {client:{w:e.clientWidth, h:e.clientHeight}, offset:{w:e.offsetWidth, h:e.offsetHeight}, scroll:{w:e.scrollWidth, h:e.scrollHeight}};
    document.body.removeChild(e);
    return s;
} 
```

这些值将根据元素的类型、它的定位（绝对、相对）样式和内容而有所不同，因此您需要对其进行扩展以满足您的需求。

```
var div = document.createElement("div");
div.innerText = 'some text';
div.style.fontSize = 12 + "px";
div.style.position = "absolute";
div.style.display = "inline-block";

var myDivSize = getElementSizing(div);

console.log('DIV Client Width: '+myDivSize.client.w);//returns 46 in chrome.
console.log('DIV Client Height: '+myDivSize.client.h);//returns 16 in chrome.
console.log('DIV Offset Width: '+myDivSize.offset.w);//returns 46 in chrome.
console.log('DIV Offset Height: '+myDivSize.offset.h);//returns 16 in chrome.
console.log('DIV Scroll Width: '+myDivSize.scroll.w);//returns 46 in chrome.
console.log('DIV Scroll Height: '+myDivSize.scroll.h);//returns 16 in chrome. 
```

希望有帮助！

# php - 查询中查询

> ID：16002153
> 
> 赞同：0
> 
> 时间：2013-04-14T17:38:48.000
> 
> 标签：php, mysql

我有问题让这个工作。我也尝试过彼此内部的查询，但它不起作用。有人知道为什么吗？

```
$ligan  = mysql_query("SELECT leagueId FROM league WHERE leagueName='$leagueName'");
$laget  = mysql_query("SELECT teamid FROM team WHERE leagueId='$ligan'");
$result = mysql_query("SELECT * FROM player WHERE teamId='laget'"); 
```

这是打印的地方...

```
 <?php
            if(mysql_num_rows($result) == 0){
            echo $result;
            }
            else{
                while($row = mysql_fetch_array($result)){
                  echo "<tr>";
                  echo "<td>" . $row['playerName'] . "</td>";
                  echo "<td>" . $row['birthday'] . "</td>";
                  echo "<td>" . $row['weight'] . "</td>";
                  echo "<td>" . $row['height'] . "</td>";
                  echo "<td>" . $row['madeGoals'] . "</td>";

                  echo "</tr>";

                  }
            }
                mysql_close($db); ?> 
```

我遇到了这个问题：mysql_num_rows() 期望参数 1 是资源，布尔值在

我相信 ligan 提供一个价值，而 laget 提供很多。

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:03:48.683

我不知道为什么这些答案不建议您使用[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)，我认为它更容易工作，并且创建它的原因是为了解决像您这样的问题。

`mysql_query`是的，正如所有答案所指出的那样，您有一个 PHP 错误。

我的建议是，了解[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)

我认为您的代码将是这样的：

```
SELECT * FROM player
INNER JOIN team on team.leagueId = league.id
INNER JOIN league on league.name = '$leagueName' 
```

[试试JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)，我保证你的代码看起来会更好，你的生活会更轻松 = )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:42:58.063

mysql_query() 返回结果集，而不是结果本身。您必须从结果集中获取结果。

在此示例中，我检查结果集以确保在访问其中的第一个结果之前有结果。

```
$resultset = mysql_query("SELECT leagueId from league WHERE leagueName='$leagueName'");

if( mysql_num_rows( $resultset ) > 0 ){
  $row = mysql_fetch_assoc( $resultset );
  // access the ID via $row['leagueId']
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:41:59.903

```
$result = mysql_query(
  "SELECT * FROM player WHERE teamId IN (
    SELECT teamid from team WHERE leagueId IN (
      SELECT leagueId from league WHERE leagueName='$leagueName'
    )
  )"
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:42:21.473

你不获取变量的变量，你只是执行查询。

```
$result = mysql_query("SELECT leagueId from league WHERE leagueName='$leagueName'");    
$row = mysql_fetch_row($result);    
$result = mysql_query("SELECT teamid from team WHERE leagueId='$row[0]'");    
$row = mysql_fetch_row($result);    
$result = mysql_query("SELECT * FROM player WHERE teamId='$row[0]'");

while ($row = mysql_fetch_assoc($result)) {
    echo $row["name"];
    echo $row["surname"];        
} 
```

# xml - 在 VBA 中读取 XML 网站

> ID：16002155
> 
> 赞同：0
> 
> 时间：2013-04-14T17:38:49.483
> 
> 标签：xml, vba

我有一个 xml 格式的网页，我想将此信息读入我正在制作的 excel 宏中。但是，我不太确定如何在 Visual Basic 中进行操作。我是这样过来的...

```
Set wb = Workbooks.OpenXML(Filename:=requestURL, LoadOption:=xlXmlLoadImportToList) 
```

从某种意义上说，我可以将数据放入工作簿中，然后我可以对其进行操作。但是，我更希望不要将数据放入工作簿中，即直接读入。我已经看到有些人通过阅读网页并将其存储为字符串来解决此问题，但我想知道是否有更直接的方法内置于 VBA？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:28:10.133

我不确定您看到了什么方法，但在 VBA 中处理此问题的最直接方法是通过 MSMXL2.XMLHTTP 对象发送 GET 请求并取回 XML 文件。然后创建一个 MSXML2.DOMDocument 并从 XMLHTTP 的 ResponseXML 属性中填充它。

# python - 打印字符串的一部分

> ID：16002160
> 
> 赞同：0
> 
> 时间：2013-04-14T17:39:18.877
> 
> 标签：python

我有一个字符串：

```
"apples = green" 
```

如何打印：

1.  打印'='之前的所有内容（苹果）

2.  打印'='之后的所有内容（绿色）

3.  在文本文件中指定字符串的编号。我有 .txt 文件，其中包含：

    ```
    apples = green
    lemons = yellow
    ... = ...
    ... = ... 
    ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T17:40:31.273

1.  使用分割字符串[`.split()`](http://docs.python.org/2/library/stdtypes.html#str.split)：

    ```
    print astring.split(' = ', 1)[0] 
    ```

2.  仍然使用以下方法拆分字符串`.split()`：

    ```
    print astring.split(' = ', 1)[1] 
    ```

    或者，您可以使用以下[`.partition()`方法](http://docs.python.org/2/library/stdtypes.html#str.partition)：

    ```
    >>> astring = "apples = green"
    >>> print astring.split(' = ', 1)
    ['apples', 'green']
    >>> print astring.partition(' = ')
    ('apples', ' = ', 'green') 
    ```

    分区总是只拆分*一次*，但也会返回您拆分的字符。

3.  如果您需要读取文件中的*特定*行，请先通过遍历文件对象来跳过行。该[`itertools.islice()`函数](http://docs.python.org/2/library/itertools.html#itertools.islice)是返回该行的最紧凑的方式；如果您不了解这一切是如何运作的，请不要太担心。如果文件没有那么多行，则返回一个空字符串：

    ```
    from itertools import islice

    def read_specific_line(filename, lineno):
        with open(filename) as f:
            return next(islice(f, lineno, lineno + 1), '') 
    ```

    从文件中读取第三行：

    ```
    line = read_specific_line('/path/to/some/file.txt', 3) 
    ```

    相反，如果您需要知道给定文本的行号，则需要使用[`enumerate()`](http://docs.python.org/2/library/functions.html#enumerate)来跟踪到目前为止的行数：

    ```
    def what_line(filename, text):
        with open(filename) as f:
            for lineno, line in enumerate(f):
                if line.strip() == text:
                    return lineno
        return -1 
    ```

    这将返回行号（从 0 开始计数），如果在文件中找不到该行，则返回 -1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:47:07.690

python 中的每个字符串都有一个名为“split”的函数。如果您调用 string.split("substring") 它会创建一个列表，该列表完全符合您的要求。

```
>>> string = "apples = green"
>>> string.split("=")
['apples ', ' green']
>>> string = "apples = green = leaves = chloroplasts"
>>> string.split("=")
['apples ', ' green ', ' leaves ', ' chloroplasts'] 
```

所以，如果你使用 string.split()，你可以调用结果列表中的索引来获取你想要的子字符串：

```
>>> string.split(" = ")[0]
'apples'
>>> string.split(" = ")[1]
'green'
>>> string.split(" = ")[2]
'leaves' 
```

等等...只要确保你有一个实际包含子字符串的字符串，否则对于任何大于 0 的索引都会引发 IndexError。

# c# - C# 读取文本字符串并做出反应

> ID：16002161
> 
> 赞同：-2
> 
> 时间：2013-04-14T17:39:19.607
> 
> 标签：c#

假设有一个名为“message”的字符串，并假设在控制台中有一个用户类型，

“！My FB List”，但单词“FB”和“List”可能会改变。但是“！我的”不会改变。所以，我想保存用户输入的文本。仅当用户在其他词之前使用“！我的”。

所以，我不知道如何将其用于“if”命令。请帮助我。

> 如果（消息==“！我的”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T17:41:14.253

你的意思是这样的吗？

```
if (message.StartsWith("!My "))
{
   // do something
} 
```

此代码适用于大多数情况。但是，如果您需要解决`Kshitij Mehta`评论中提到的情况，您最好使用`Split`解析字符串并将数组的第一个对象与所需字符串进行比较的方法。当您将输入字符串拆分为一个数组时，您只需以典型的方式 (==) 比较字符串，在这种情况下可能不需要花哨的方法。

还要考虑一个“但是” - 如果您的输入字符串很长，那么拆分可能不是最好的主意。在那种情况下，我可能会使用正则表达式来比较输入字符串的开头。

实施取决于您的需求。只选择最适合您的:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T17:43:57.007

听起来您想接受命令，然后根据这些命令做特定的事情。显然，“命令”是用户输入的文本中的第一个单词。

因此，我将消息[拆分](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)为空格，然后拆分`switch`为第一个单词：

```
var words = message.Split();
var command = words[0];

switch (command) {
    case "!My":
        // Do something
        ...
        break;

    case "!SomethingElse":
        // Do something else
        ...
        break;
    ...
} 
```

之后，您可以使用`words[1]`获取“FB”和`words[2]`获取“列表”。在尝试访问它们之前，请务必使用`words.Length`来验证是否已指定所需的参数数量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T17:46:14.240

String 类包含许多静态方法，其中`StartsWith()`.

所以你的 if 语句可以简单地是

```
 if(UserString.StartsWith("!My"))
 {
      // other conditional code here
 } 
```

从您的问题中不清楚您是否要包括用户`"!My"`在输入任何其他内容之前输入的情况，但他/她在输入后没有立即输入空格`!My`。如果您只想在三个字符`"!My"`后跟一个空格的情况下处理代码，那么（如@Walther 建议的那样），在`StartsWith()`方法中的测试字符串中添加一个空格

```
 if(UserString.StartsWith("!My "))
 {
      // other conditional code here
 } 
```

# assembly - Dword 还是一个词还是两个词

> ID：16002162
> 
> 赞同：0
> 
> 时间：2013-04-14T17:39:26.740
> 
> 标签：assembly, integer

我是汇编语言的新手

数字-123,456可以存储在一个单词中吗？

-123, 456 在 Dword 的范围内，但我很困惑，如果 Dword 仍然是一个字还是两个字，因为 Dword 用于 32 位字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:36:20.000

“词”这个词的问题在于它非常模棱两可。它曾经表示计算机的“本机字大小”。这在早年到处都是。尺寸也很奇怪，6 的倍数很流行，比如 18 位和 36 位。那时候大家都明白，“字”没有说比特数。直到很久以后，术语“字节”才有意义。

当微处理器出现时，情况发生了变化，首先是 8 位和 16 位版本。其中“word”必须与“16-bits”同义。这持续了很长时间，直到 32 位处理器变得普遍。像 386 这样的处理器，其原始字长为 32 位，但仍可以处理 16 位数量。因此，为了避免打破大量假设，并至少保持一些现有的汇编代码兼容，他们不得不想出一个新词来表示 32 位的数量。这变成了“dword”、双字或 2 x 16 位。并且“word”保持 16 位，即使它现在与本机字大小无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:45:56.593

单词的大小是特定于架构的。它们通常指的是 ISA 本地处理的单元。在双字或双字的情况下，它只是一个单位，其大小是单词大小的两倍。

因此，如果您正在谈论一个字的大小为 16 位的架构（例如 Intel 8086），那么 DWORD 可以保存 32 位的信息。由于 -123456 是 FFFE1DC0（带符号扩展至 32 位），它确实可以存储在一个 DWORD 中。

# arrays - 你如何将数组附加到另 一个？

> ID：16002165
> 
> 赞同：0
> 
> 时间：2013-04-14T17:39:34.047
> 
> 标签：arrays, vb.net, append

我正在编写一个函数来检查文件夹中的多个文件扩展名，然后返回匹配的文件名，但是我在返回结果时遇到了问题。

该函数“有效”，但显然每次循环时，它都会重新分配`Directory.GetFiles()`to的结果`Files`，而不是附加它们。谁能告诉我该怎么做？

如果有人想知道，我这样做是因为，据我所知，没有内置的方法可以使用`Directory.GetFiles()`. 如果这是错误的，请纠正我。谢谢。

```
Private Function GetFiles(Path As String, SearchPattern As String)

    Dim SearchPatterns() As String = SearchPattern.Split("|") ' The patterns to search
    Dim Files() As String = Nothing ' The files to return to the user

    For Each Pattern In SearchPatterns

        Files = Directory.GetFiles(Path, Pattern)
        Array.Sort(Files)

    Next

    Return Files

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:41:59.717

改用[`List(Of T)`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)类和[`List(Of T).AddRange`](http://msdn.microsoft.com/en-us/library/z883w3dc%28v=vs.110%29.aspx)方法：

```
Private Function GetFiles(Path As String, SearchPattern As String)

    Dim SearchPatterns() As String = SearchPattern.Split("|") ' The patterns to search
    Dim Files As New List(Of String)

    For Each Pattern In SearchPatterns
        Files.AddRange(Directory.GetFiles(Path, Pattern))
    Next

    Return Files.OrderBy((Function(f) f)).ToArray()
End Function 
```

# java - 使用 ImageIO.write() 创建 JPEG 创建一个 0 字节文件

> ID：16002167
> 
> 赞同：8
> 
> 时间：2013-04-14T17:39:42.647
> 
> 标签：java, byte, jpeg, javax.imageio, zero

我正在尝试编写一种获取图像并保存该图像的 100 x 100 缩略图的方法。但是，当我保存文件时，它在 Ubuntu 的 ImageViewer 中显示为不可读的 0 字节图像（错误“解释 JPEG 图像文件时出错（在状态 200 中对 JPEG 库的调用不正确）”）。我的代码如下：

```
public boolean scale(){

    String file = filename.substring(filename.lastIndexOf(File.separator)+1);
    File out = new File("data"+File.separator+"thumbnails"+File.separator+file);

    if( out.exists() ) return false;

    BufferedImage bi;
    try{
        bi = ImageIO.read(new File(filename));
    }
    catch(IOException e){
        return false;
    }

    Dimension imgSize = new Dimension(bi.getWidth(), bi.getHeight());
    Dimension bounds = new Dimension(100, 100);
    int newHeight = imgSize.height;
    int newWidth = imgSize.width;

    if( imgSize.width > bounds.width ){
        newWidth = bounds.width;
        newHeight = (newWidth*imgSize.height)/imgSize.width;
    }

    if( imgSize.height > bounds.width ){
        newHeight = bounds.height;
        newWidth = (newHeight*imgSize.width)/imgSize.height;
    }

    Image img = bi.getScaledInstance(newWidth, newHeight, BufferedImage.SCALE_SMOOTH);
    BufferedImage thumb = new BufferedImage(newWidth, newHeight, BufferedImage.TYPE_4BYTE_ABGR);
    Graphics2D g2d = thumb.createGraphics();
    g2d.drawImage(img, 0, 0, null);
    g2d.dispose();

    try{
        ImageIO.write(thumb, "jpg", out);
    }
    catch(IOException e){
        return false;
    }

    return true;
} 
```

其中“文件名”是包含此方法的类的全局变量，表示原始图像的路径。我的主要问题是我不明白为什么要创建 0 字节图像。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T23:22:18.950

所以，问题是这样的。我在 OpenJDK 工作。显然，OpenJDK 没有 JPEG 编码器，因此在创建文件时

```
ImageIO.write(thumb, "jpg", out); 
```

它实际上并没有为要保存的文件创建任何东西；因此空的 0 字节不可读文件。将 ImageIO 参数更改为“png”（并适当调整新的 File() 扩展名）使用上述代码成功创建了所需的图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-23T09:25:48.813

即使 JVM 有一个 JPG 编码器，我也遇到了同样的问题，这是由于在下面使用了不受支持的 BufferImage 类型引起的。我使用过`BufferedImage.TYPE_USHORT_GRAY`显然不受支持并且没有给出错误消息但产生了一个 0 字节的文件。当我切换到`BufferedImage.TYPE_BYTE_GRAY`它时，它工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-05T13:48:30.770

JPG 没有 alpha 通道，ImageIO.write() 将静默失败（只是返回 false）一种方法是将您的图像复制到另一个

```
BufferedImage newBufferedImage = new BufferedImage(bufferedImage.getWidth(),
  bufferedImage.getHeight(), BufferedImage.TYPE_INT_RGB);
newBufferedImage.getGraphics().drawImage(bufferedImage, 0, 0, null);

boolean write = ImageIO.write(newBufferedImage, extension, outputfile);
if (!write) {
  // do something
} 
```

# c++ - 多重继承指针和强制转换

> ID：16002173
> 
> 赞同：1
> 
> 时间：2013-04-14T17:40:10.537
> 
> 标签：c++

给定以下代码：

```
namespace Try {

class Point2d {
    float _x, _y;
public:
    Point2d(float x, float y) : _x(x), _y(y) {}
};

class Vertex {
    Vertex* next;
public:
    Vertex(Vertex* n) : next(n) {}
    Vertex() {}
};

class Vertex2d : public Point2d, public Vertex {
    float mumble;
public:
    Vertex2d(float x, float y, float mum) : Point2d(x,y), mumble(mum) {}
};
}

int main (void)
{
using Try::Point2d;
using Try::Vertex;
using Try::Vertex2d;

Vertex2d v3d(2.5,3,4);
Vertex*  pv;
Point2d* pp;

pv = &v3d;      
pv = (Vertex*)(((char*)&v3d) + sizeof(Point2d));
} 
```

有人介意解释一下为什么最后两个命令：

```
pv = &v3d;
pv = (Vertex*)(((char*)&v3d) + sizeof(Point2d)); 
```

（我猜这就是编译器将 pv = &v3d 翻译成..）

是完全一样的吗？我可以理解 (+sizeof(Point2d)) 在那里，因为 Vertex2d 首先是 Point2d，所以我们必须添加大小才能到达“顶点”部分。但为什么它首先将 v3d 转换为 char* ..？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:46:28.570

> 为什么它首先将 v3d 转换为 char* ..？

`sizeof`产生以字节为单位的测量*值*，并且`sizeof(char)`是`1`字节，因此执行的指针数学运算`(some_char_pointer) + sizeof(Point2d)`将是正确的。

*（相关的指针数学评论：）*

为了说明起见，假设`sizeof(Point2d)`是`16`。这个表情...

```
&v3d + sizeof(Point2d) 
```

...不会**在**.之后指向 16*个字节*`&v3d`。它会在**16`Vertex2d`秒**后指向`&v3d`。或`16 * sizeof(Vertex2d)`字节。

# c# - 读取 xml 什么也不返回

> ID：16002177
> 
> 赞同：2
> 
> 时间：2013-04-14T17:40:17.397
> 
> 标签：c#, asp.net, xml, document

我有一个 xml 文件，我想读取并输出它的数据，我的 xml 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<serverfiles>
    <file name="picture1.jpg"/>
    <file name="file1.txt"/>
    <folder name="subfolder">
        <file name="picture2.jpg"/>
        <file name="file2.txt"/>
        <folder name="anotherfolder">
            <file name="file3.txt"/>
        </folder>
    </folder>
    <folder name="anotherfolder"/>      
</serverfiles> 
```

并希望这样输出：

```
picture1.jpg
file1.txt
subfolder\picture2.jpg
subfolder\file2.txt
subfolder\anotherfolder\file3.txt 
```

我试过这个：

```
 string xml = new WebClient().DownloadString("");
 XmlDocument xdoc = new XmlDocument();
 xdoc.LoadXml(xml);

 XmlElement element = xdoc.DocumentElement;

 XmlAttributeCollection attr_coll = element.Attributes;

 for(int i = 0; i < attr_coll.Count; i++)
 {
     string attr_name = attr_coll[i].Name;
 } 
```

但是在 for 循环计数中，我什么也得不到，有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:47:29.140

你也可以使用 X-path：

```
 foreach (XmlNode file in xdoc.SelectNodes("//file"))
        {
            string filename = file.Attributes["name"].Value;

            foreach (XmlNode folder in file.SelectNodes("./ancestor::folder"))
            {
                string foldername = folder.Attributes["name"].Value;
                filename = foldername + "\\" + filename;
            }
            System.Diagnostics.Debug.WriteLine(filename);
        } 
```

此代码示例适用于您的 xml。

祝你的任务好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:56:00.620

您必须使用递归来获得所需的结果。我认为使用 LINQ to XML 会更容易：

**递归函数**

```
public static IEnumerable<string> GetFiles(XElement source, string currentPath = "")
{
    foreach (var file in source.Elements("file"))
    {
        yield return currentPath + (string)file.Attribute("name");
    }
    foreach (var folder in source.Elements("folder"))
    {
        foreach (var file in GetFiles(folder, currentPath + (string)folder.Attribute("name") + "/"))
            yield return file;
    }
} 
```

**用法**

```
using System.Xml.Linq;

(...)

var doc = XDocument.Load("Input.txt");
var files = GetFiles(doc.Root).ToList(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-14T18:58:37.857

这个 LINQ to XML 应该可以做到，没有循环，所以效率可能更高一些

```
 XDocument document = XDocument.Load("c:\\tmp\\test.xml");
    var files = from i in document.Descendants("file")
                where i.Attribute("name") != null
                select new
                    {
                        Filename = (i.Parent != null && i.Parent.Name == "folder" ?
                                        (i.Parent.Parent != null && i.Parent.Parent.Name== "folder" ?
                                        i.Parent.Parent.Attribute("name").Value + @"\" + i.Parent.Attribute("name").Value + @"\" + i.Attribute("name").Value :
                                        i.Parent.Attribute("name").Value + @"\" + i.Attribute("name").Value):
                                        i.Attribute("name").Value)

                    }; 
```

# database - 这是数据库中多语言数据的正确方法吗？

> ID：16002180
> 
> 赞同：2
> 
> 时间：2013-04-14T17:40:31.433
> 
> 标签：database, database-design, translation, multilingual

我目前正在开发一个网站，其中某些动态数据必须以各种语言提供。目前的语言是三种，但我们的想法是在未来添加更多。

想象一下第一个场景，您有一个页面并希望以三种不同的语言提供内容。我的数据库中的页面是这样存储的：

![页面 UML](https://i.stack.imgur.com/vfkZE.png)

这很有效，因为对于我拥有的每种语言，我都会为页面创建一个新的翻译内容。

但是，随着项目的进展，我发现了更多需要翻译数据的情况。下图是具有类型、子类型和状态的产品示例。所有这些数据必须以所有不同的语言提供。

![产品 UML](https://i.stack.imgur.com/KM5n9.png)

这是不是有点矫枉过正，因为我最终会得到只包含 ID 的表？对于需要保存翻译内容的每个表，我都需要一个新表。

有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:23:19.503

如果您愿意牺牲一些外键和“数据库纯度”，您可以这样做：

```
CREATE TABLE LocalizedTexts(OwnerType byte PK, OwnerID int PK, LanguageID int PK, Text string) 
```

对于每个“所有者”（Products、StatusNames、Types，...），您分配一个整数常量`OwnerType`。您有一个主键，`LocalizedTexts`由所有者类型、所有者 ID（例如`ProductID`or `StatusNameID`or `TypeID`、...）和语言 ID 组成。

`OwnerType`消除歧义以防万一`OwnerID`不是唯一的（因为它来自多个表）。

这是一个很好的可扩展和规范化的模式。唯一的缺点是你不能在这里有 FK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T06:34:31.317

我认为这取决于您是否需要对新语言采用“动态”方法，或者您是否基本上知道您的应用程序需要支持多少种语言。

我们对每种语言都有一个专栏：

```
Create table Product (int id, text name_de, text name_en, etc... ) 
```

但这意味着，如果您添加一种新语言，您必须稍微更改您的数据库架构。但是使编程变得简单并且查找速度很快。

此解决方案与@usr 的解决方案之间的区别在于，在他的解决方案中，您可以在不更改数据库的情况下添加语言。每次添加新语言时，我的解决方案都需要更新架构。例如，瑞士的大多数公司都有 3 种语言的网站，也许是 4 种语言，而且他们一直保持这种状态。所以，这个解决方案有效。但是如果你不断地添加语言，那么这就有点复杂了。

# sql - 无法打开登录请求的数据库“ABC”。登录失败

> ID：16002181
> 
> 赞同：1
> 
> 时间：2013-04-14T17:40:33.523
> 
> 标签：sql, sql-server, vba

我正在使用以下代码通过 VBA 连接到 SQL 并在标题处出现错误

```
 ' Create a connection object.
    Dim cnPubs As ADODB.Connection
    Set cnPubs = New ADODB.Connection

    ' Provide the connection string.
    Dim dbms As String
    Dim strConn As String

   ' Specify the OLE DB provider.
    cnPubs.Provider = "SQLNCLI"

    'Set SQLOLEDB connection properties.
    cnPubs.Properties("Data Source").Value = Worksheets(1).Range("B3")
    cnPubs.Properties("Initial Catalog").Value = Worksheets(1).Range("B4")

    ' Windows NT authentication.
    cnPubs.Properties("Integrated Security").Value = "SSPI"

    'Now open the connection.
    cnPubs.Open 
```

在使用 SQL 身份验证之前，我没有遇到任何问题，因为我可以指定用户名和密码。现在我需要使用 Windows 身份验证，但出现错误。

当我在 SQL 登录时选择 Windows 身份验证时，我认为问题出在用户名的自动填充上。与 SQL 登录页面交叉引用服务器类型：数据库引擎服务器名称：服务器\数据库身份验证：Windows 身份验证锁定选择：用户名：NT.COMPANY.COM\用户名密码：

有人知道我如何登录到 Server\Database 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:23:50.980

您遇到的错误可能是由以下两种情况之一引起的：

1.  您尝试打开的数据库不存在
2.  您正在使用的帐户尚未被授予访问数据库的权限

因为您说连接到数据库可以使用 SQL 身份验证，所以您很可能会遇到 2。要解决此问题，您需要向您的 Windows 登录授予对该数据库的访问权限。

# jquery - div显示图像的正面/背面翻转效果

> ID：16002185
> 
> 赞同：2
> 
> 时间：2013-04-14T17:40:43.430
> 
> 标签：jquery

我正在尝试像 www.eharmony.com 上使用的那样产生图像翻转效果。当您将鼠标悬停在照片上时，它会旋转并显示更多信息。

![鼠标悬停后显示的新 div](https://i.stack.imgur.com/Ui3yP.jpg) 我找到了一个名为 Flip ( [http://lab.smashup.it/flip](http://lab.smashup.it/flip) ) 的 JQuery 组件，但我无法让它在 mouseover 事件上工作。它也不会显示一个全新的 div。我想知道那里有没有更好的。

也许如果有人可以通过告诉我可以使用什么来对 eHarmony 页面进行逆向工程来教我如何钓鱼，那将非常有用。我检查了 HTML 并看到它们有标记为“翻转容器”、“背面”和“正面”的 div，但我无法弄清楚哪些 Javascript 调用正在执行实际的翻转功能。（我不太擅长调试 Javascript。）

提前致谢！

# php - PRO Prepaid Statement 中的重复密钥更新

> ID：16002186
> 
> 赞同：-1
> 
> 时间：2013-04-14T17:40:53.847
> 
> 标签：php, mysql, sql, pdo

我正在使用 PDO 来处理（MYSQL）数据库。当我保存结果时，这个 SQL 没有更新列值，它会用新的保存值创建一个新行。我犯了什么错误。有没有人可以帮助我用 PDO 理解这种行为

```
$SQL =<<<'EOD'
CREATE TABLE IF NOT EXISTS pard_admin_config(
title varchar(255) NOT NULL,
online varchar(100),
offline varchar(100),
email varchar(100),
metades varchar(200),
metakey varchar(200),
copyright varchar(200),
pard_host varchar(100),
pard_database varchar(100),
username varchar(100),
password varchar(100)
)
EOD;

$pardConfig->query($SQL);

$stmt = $pardConfig->prepare("INSERT INTO pard_admin_config (title, online, offline, email, metades, metakey, copyright, pard_host, pard_database, username, password) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
ON DUPLICATE KEY UPDATE 
title='?', online='?', offline='?', email='?', metades='?', metakey='?', copyright='?', pard_host='?', pard_database='?', username='?', password='?'");

$ConfigData = array($adminConfig->TITLE,
 $adminConfig->ONLINE,
 $adminConfig->OFFLINE,
 $adminConfig->EMAIL,
 $adminConfig->METADESCRIPTION,
 $adminConfig->METAKEYWORDS,
 $adminConfig->COPYRIGHT,
 $adminConfig->HOST,
 $adminConfig->DATABASE,
 $adminConfig->USERNAME,
 $adminConfig->PASSWORD);
$stmt->execute($ConfigData); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:45:11.407

这不是 PDO 行为，而是 mysql

您需要两次指定相同的值，或使用 values() 函数

```
ON DUPLICATE KEY UPDATE 
title= values(title), online=values(online), and so on 
```

另请注意，将占位符放在引号中是没有意义的。

# java - 如何使用不同的 Activity 并将 String("text") 发送到 EditText？

> ID：16002190
> 
> 赞同：0
> 
> 时间：2013-04-14T17:41:10.120
> 
> 标签：java, android, eclipse, android-intent, sdk

我设法找到我的程序使用“共享首选项”记录字符串的方式，然后我设法找到我的程序在后台运行的方式，所以我想问是否有办法：伪代码：

```
Activity see = (Activity) find ();
if (There's ==>  see.EditText)
{
    see.EditText.append("hello");
} 
```

所以当我的程序检测到你正在使用的应用程序中有一个 EditText 时（比如 messanger）写“hello”（精确地添加 Text ==> append）

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:00:04.077

幸运的是，无法访问其他应用程序中的组件。这样做的影响将破坏平台实施的大部分保障措施。

根据您的意图，您可能希望专注于实现可访问性工具（您的应用在获得焦点时可能会收到[相关`AccessibilityEvent`](http://developer.android.com/reference/android/view/accessibility/AccessibilityEvent.html)控件）或您自己的键盘。

# python - 在 python 中创建类似 aptitude 的用户界面

> ID：16002192
> 
> 赞同：-6
> 
> 时间：2013-04-14T17:41:31.307
> 
> 标签：python, user-interface

我想在 python 中创建一个用户界面，例如 ubuntu 的 aptitude，我该如何创建它？！它在命令行中工作，而不是 GUI 。它有菜单栏、快捷键和彩色。提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T21:10:15.360

如前所述，这个问题真的很模糊。有一个比可用的 curses 模块更高级别的库[urwid](http://excess.org/urwid/)。[教程](http://excess.org/urwid/docs/tutorial/)甚至涉及设置菜单。

如果您遇到困难，请使用您拥有的任何代码发布问题，这样可以更轻松地为您提供帮助。

# jquery - 带有查询移动设备的随机图像和文本

> ID：16002197
> 
> 赞同：0
> 
> 时间：2013-04-14T17:41:41.657
> 
> 标签：jquery, arrays, mobile, random

我有一些代码用于在单击初始屏幕图像时生成随机图像（在 JavascriptSource 上找到）：

```
<script type="text/javascript">
<!-- Original: Nicholas Lupien-->
<!-- Begin
var rand1 = 0;
var useRand = 0;

images = new Array;
images[1] = new Image();`
images[1].src = "../../Myimages/images/01.png";
images[2] = new Image();
images[2].src = "../../Myimages/images/02.png";
images[3] = new Image();
images[3].src = "../../Myimages/images/03.png";
images[4] = new Image();
images[4].src = "../../Myimages/images/04.png";
images[5] = new Image();
images[5].src = "../../Myimages/images/05.png";
images[6] = new Image();
images[6].src = "../../Myimages/images/06.png";

   function swapPic() {
   var imgnum = images.length - 1;
    do {
      var randnum = Math.random();
      rand1 = Math.round((imgnum - 1) * randnum) + 1;
        } while (rand1 == useRand);
          useRand = rand1;
          document.randimg.src = images[useRand].src;
          }
// End -->
</script> 
```

*这部分代码工作正常：*用户点击图像，图像变为数组中的另一个随机图像。

**但是，我想添加一个描述性文本，以便使用文本生成图像。**我不知道如何将文本与正确的图像匹配并让它与图像一起随机生成。我正在使用 Jquery Mobile。

**脚步：**

*1.用户在设备上点击初始随机图像（来自单独数组的文本描述？？）。*

*2\. 用户看到带有描述性文字的随机图像。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:48:27.013

您将需要一个元素来放入描述，并存储描述。出于示例目的，我已经稍微减少了您的代码，但逻辑是相同的：

```
var rand1 = 0;
var useRand = 0;

var descriptions = [];
images = new Array;
images[1] = new Image();
images[1].src = "../../Myimages/images/01.png";
descriptions[1] = 'This is a description';
images[2] = new Image();
images[2].src = "../../Myimages/images/02.png";
descriptions[2] = 'This is another description';

var descriptionHolder = document.getElementById('description_holder');

function swapPic() {
    var imgnum = images.length - 1;
    do {
        var randnum = Math.random();
        rand1 = Math.round((imgnum - 1) * randnum) + 1;
    }while (rand1 == useRand);
    useRand = rand1;
    document.randimg.src = images[useRand].src;
    descriptionHolder.innerHTML = descriptions[useRand];
} 
```

为此，已将一个新元素添加到具有 id 的页面中`description_holder`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:46:14.740

您可以简单地使用 alt（或 title）属性：

```
images[1].alt = "text of image"; 
```

# c# - “另存为...”菜单项

> ID：16002198
> 
> 赞同：-1
> 
> 时间：2013-04-14T17:41:52.590
> 
> 标签：c#, visual-studio-2010

我正在尝试为“另存为...”菜单项编写代码。我的代码如下所示：

```
private void menuItem9_Click(object sender, EventArgs e)
{
    saveFileDialog1.Filter = ".XML file (*.xml)|*.xml";
    saveFileDialog1.FilterIndex = 1;
    saveFileDialog1.RestoreDirectory = true;
    saveFileDialog1.ShowDialog();
    XmlDocument document = new XmlDocument();

    string fileName = saveFileDialog1.FileName.ToString();
    document.Save(fileName+ ".xml");
    if (!File.Exists(fileName))
    {
        File.Create(fileName);
    }
} 
```

所以基本上我想做的是使用“另存为”选项。单击它后，我希望能够将我的 .xml 文件以不同的名称保存在我想要的任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:55:39.847

您当前的代码将引发异常，因为您`XmlDocument`不包含根节点。另请记住，该`SaveFileDialog's` `Filename`属性还包含扩展名。

您可以使用创建没有根节点的新文件

```
SaveFileDialog saveFileDialog1 = new SaveFileDialog();

saveFileDialog1.Filter = ".XML file (*.xml)|*.xml";
saveFileDialog1.FilterIndex = 1;
saveFileDialog1.RestoreDirectory = true;

if (saveFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{  
    File.Create(saveFileDialog1.FileName);
} 
```

或者在保存之前确保您的 XmlDocument 有一个根节点：

```
SaveFileDialog saveFileDialog1 = new SaveFileDialog();

saveFileDialog1.Filter = ".XML file (*.xml)|*.xml";
saveFileDialog1.FilterIndex = 1;
saveFileDialog1.RestoreDirectory = true;

if (saveFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    XmlDocument document = new XmlDocument();
    document.AppendChild(document.CreateElement("Root"));
    document.Save(saveFileDialog1.FileName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:57:01.687

您新创建的文档实例`XmlDocument`没有任何根元素，因此`XmlException`

您可以避免使用`saveFileDialog1.FileName.ToString()`as`saveFileDialog1.FileName`已经是一个字符串值。

这段代码

```
document.Save(fileName+ ".xml"); 
```

应该

```
document.Save(saveFileDialog1.FileName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T18:06:10.667

```
private void menuItem9_Click(object sender, EventArgs e)
{
    saveFileDialog1.Filter = ".XML file (*.xml)|*.xml";
    saveFileDialog1.FilterIndex = 1;
    saveFileDialog1.RestoreDirectory = true;
    saveFileDialog1.ShowDialog();
    XmlDocument document = new XmlDocument();

    //Add this line of code
    document.LoadXml("<root></root>");

    string fileName = saveFileDialog1.FileName.ToString();
    // Save the document to a file
    XmlTextWriter writer = new XmlTextWriter(fileName,null);
    document.Save(writer);

} 
```

# php - php代码中的标头重定向不起作用

> ID：16002199
> 
> 赞同：0
> 
> 时间：2013-04-14T17:41:54.573
> 
> 标签：php, http-headers, http-redirect

我想在给我发电子邮件后重定向用户。除非我在-method 之后放置一些东西（如-method）
，否则代码会运行。 有什么提示吗？`email()``header()`

```
function process()
{
    $msg = "Form Contents: \n\n";
    foreach($this->fields as $key => $field)
        $msg .= "$key :  $field \n";

    $to = 'mymail@gmail.com';
    $subject = 'thesubject';
    $from = $this->fields['email'];

    mail($to, $subject, $msg, "From: $from\r\nReply-To: $from\r\nReturn-Path: $from\r\n");

    header('Location: thanks.html');
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-18T17:50:53.767

当我遇到类似的问题时，通常是在行尾缺少分号，或者像这里的情况一样，缺少括号，因为`foreach`代码块应该被 {} 阻止。请参阅[文档](http://php.net/manual/en/control-structures.foreach.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:47:37.887

您的位置应该是绝对的，而不是相对的。

```
header("Location: /myPath/thanks.html"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-22T19:51:37.603

```
<?php
header("Location: http://www.example.com/"); /* Redirect browser */

/* Make sure that code below does not get executed when we redirect. */
exit;
?> 
```

就我而言，有那些引号。做到了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-14T17:46:51.570

在 header('location: ....'); 之后 你应该添加一个出口；否则脚本会一直运行直到结束。

```
header('Location: thanks.html');
exit; 
```

# java - 处理多个插入的最佳方法

> ID：16002200
> 
> 赞同：4
> 
> 时间：2013-04-14T17:41:56.743
> 
> 标签：java, database, performance, jpa, playframework

目前我们正在使用带有 Java 和 MySQL 的 play 1.2.5。我们有一个简单的 JPA 模型（一个扩展 Model 类的 Play 实体），我们保存到数据库中。

```
SimpleModel() test = new SimpleModel();
test.foo = "bar";
test.save(); 
```

在每个 Web 请求中，我们保存多个 SimpleModel 实例，例如：

```
JPAPlugin.startTx(false);
for (int i=0;i<5000;i++)
{
     SimpleModel() test = new SimpleModel();
     test.foo = "bar";
     test.save();
}
JPAPlugin.closeTx(false); 
```

我们正在使用 JPAPlugin.startTx 和 closeTx 来手动启动和结束事务。如果只有一个请求执行事务，一切正常。我们注意到，如果第二个请求尝试同时执行循环，则第二个请求会收到“超过锁定等待超时；尝试重新启动事务 javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: could not insert: [SimpleModel ]”，因为第一个请求锁定了表，但直到第二个请求超时才完成。这导致多个：

> 错误 AssertionFailure:45 - 发生断言失败（这可能表明 Hibernate 中存在错误，但更可能是由于会话使用不安全） org.hibernate.AssertionFailure: SimpleModel 条目中的空 id（在发生异常）

另一个消毒是插入期间的 CPU 使用率变得疯狂。

为了解决这个问题，我正在考虑创建一个事务感知队列来顺序插入实体，但这会导致插入时间很长。处理这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:47:27.053

你真的需要整个插入的事务吗？数据导入过程中数据库没有锁定有关系吗？

您可以简单地创建一个作业并为每个插入执行它：

```
for (int i=0;i<5000;i++)
{
     new Job() { 
       doJob(){ 
          SimpleModel() test = new SimpleModel();
          test.foo = "bar";
          test.save();
      }.now();
} 
```

这将为每个插入创建一个事务并摆脱您的数据库锁定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T05:44:06.923

在这种情况下，您不需要自己处理事务。

相反，如果任务很耗时，请将您的插入放入控制器方法或异步作业中。

作业和控制器都处理事务。

但是，请检查这是否真的是您想要实现的目标。每个 http 请求创建 5000 条记录似乎并不现实。也许拥有一个带有集合的容器模型会更有意义？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T01:03:24.363

Play Framwork 1.2.5 上的 JPAPlugin 不是线程安全的，您无法使用此版本的 Play 解决此问题。

该问题在 Play 2.x 上已修复，但如果您无法迁移，请尝试直接使用休眠。

# sql - nvarchar 类型的唯一列

> ID：16002204
> 
> 赞同：3
> 
> 时间：2013-04-14T17:42:11.987
> 
> 标签：sql, sql-server, linq-to-sql, unique, nvarchar

我有一个简单的表：

`File`：`path | deleted | categories | description`

我想将该表用于 Linq to SQL 实体模型。在模型上，该列`path`（`nvarchar`在数据库中是字符串）可以设置为主键，但 Visual Studio 表设计器并非如此。

路径是使一个文件唯一的原因，因此我必须确保表中没有重复的路径。如何做到这一点？谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T18:15:51.240

您可以使用 SQL 中的 UNIQUE 约束、NOT NULL UNIQUE 约束或 PRIMARY KEY 约束来使列唯一。但是，我能想到的每一个当前的 dbms 对可以通过这种方式限制的 columnm 的长度都有一个或多个限制。

这意味着对于最一般的情况，*你有一个相当引人注目的问题。*例如， Windows 上的[UNC 路径的长度约为 32,767 个字符。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx#maxpath)

Linux 系统差异很大。根据 Google 的快速研究，1024 和 4096 似乎很常见。

我认为您将不得不*仅对*代理键施加唯一约束。（您*不*知道这样说对数据库人员的伤害有多大。）问题是您可以对代理项强制唯一性，但不能对它所取代的东西强制执行唯一性。它取代的东西是重要的部分。

身份证号码在一般情况下不起作用；您可以轻松地以 {1, /etc/adjtime}, {2, /etc/adjtime}, {3, /etc/adjtime} 结束。您需要以某种方式将真实数据与代理键的值联系起来的东西。像[hashbytes](http://msdn.microsoft.com/en-us/library/ms174415%28v=sql.105%29.aspx) () 这样的东西会在 T-SQL 中“工作”；linq 有类似的功能。（但是你可以有冲突，就像你可以使用几乎所有的哈希函数一样。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T18:13:19.863

正如 Martin 已经解释的那样，您可以创建一个主键，只要值 <= 450 个字符（或 900 个字符，如果您能够限制数据以不允许使用 Unicode 字符）。这工作正常：

```
CREATE TABLE dbo.sample1
(
  path NVARCHAR(450) NOT NULL PRIMARY KEY,
  deleted BIT NOT NULL DEFAULT 0
  -- ... other columns ...
);

CREATE TABLE dbo.sample2
(
  path VARCHAR(900) NOT NULL PRIMARY KEY,
  deleted BIT NOT NULL DEFAULT 0
  -- ... other columns ...
); 
```

某些未声明版本的 Visual Studio 中的某些可视化设计器是否允许您这样做，我不知道，但您不必*使用*某些可视化设计器创建表，对吗？

如果路径可能超过 900 字节，您不能将其设为密钥，抱歉。您必须使用`IDENTITY`列、其他代理项或路径值的哈希值才能在键中使用。最多支持 4000 个字符的路径的哈希示例 - 不能满足所有潜在用例，但希望您不需要超过 4000：

```
CREATE TABLE dbo.sample3
(
  [path] NVARCHAR(4000) NOT NULL,
  pathhash AS CONVERT(VARBINARY(900), HASHBYTES('MD5', path)) 
    PERSISTED PRIMARY KEY
);

INSERT dbo.sample3([path])
  SELECT '\\some\share\x' + REPLICATE('x', 900) + '.gif'
  UNION ALL SELECT '\\some\share\x' + REPLICATE('x', 900) + '.jpg'; 
```

尝试再次运行插入。

*（同样，如果*您可以保证没有路径包含 Unicode 字符，您可以将 4000 个字符加倍到 8000 个字符；在这种情况下，您可以使用`varchar(8000)`代替`nvarchar(4000)`.）

# c++ - QUrl：协议“sftp”未知

> ID：16002205
> 
> 赞同：2
> 
> 时间：2013-04-14T17:42:17.667
> 
> 标签：c++, qt, protocols, qnetworkaccessmanager, qurl

我正在尝试列出我的 sftp 服务器，但在发送请求时遇到问题：如果我打印 my `QNetworkReply::errorString()`，这就是我得到的：协议“sftp”未知

这就是我的 QUrl 的样子：

> sftp://username:password@host:22

用户名/密码没问题，主机和端口是我的服务器所需的，所以我不知道发生了什么……我尝试了不同的方案（http、https、ftp、sftp……），看起来只有 http 和https 被识别...</p>

有任何想法吗？

# php - Javascript/Ajax/PHP 表单验证错误

> ID：16002206
> 
> 赞同：0
> 
> 时间：2013-04-14T17:42:20.923
> 
> 标签：php, javascript, ajax, forms, validation

我有一个表格，用于在允许输入新作者之前检查作者是否在我的数据库（书店网站）中。

这部分工作完美，作者被发现并提醒用户，但是当一个条目可以提交时，它不会提交......

它只是什么都不做。下面的代码是检查器，然后下面是不工作的提交功能......基本上如果验证作者很好，那么它应该提交但目前不是。我在网站上的另一个表单上使用了类似的方法，它可以工作，但是这个页面上有多个表单，所以这可能是个问题？

```
var author = $("#author");
var authortext = $("#authortext");          
var authorForm = $("#addauthor");

//Author Validation
        function validateAuthor()
        {
            author.css('border', '');
            if (author.val().length == 0)
            {
                author.css('border', '2px solid red');
                authortext.text("Please enter an author.");
                return false;
            }
            else
            {
                $.ajax({
                   type: "POST",
                   url: "authorcheck.php",
                   data: 'author='+ author.val(),

                   //Stops the query being cached.
                   cache: false,
                   //The function when query accepted. 
                   success: function(result)
                   {
                        if (result == 1)
                        {
                            author.css('border', '2px solid red');
                            authortext.text("Author has been added already.");
                            return false;
                        }
                        else
                        {
                            authortext.text("Correct entry.");
                            return true;
                        }
                    }
                });
            }

        //Forms are submitted if no errors or blank values are found. The server side checks are still done later if the user has javascript disabled. 
        authorForm.submit(function()
        {
            if (validateAuthor())
            {
                return true;
            }
            else
            {
                return false;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:51:35.553

利用`data: { author: author.val(); }`

# java - 在 java 中定义一个单例以用于资源尝试

> ID：16002208
> 
> 赞同：3
> 
> 时间：2013-04-14T17:42:24.107
> 
> 标签：java, singleton, try-catch

我的目标是将*try-with-resource*构造与一个类的单个实例一起使用，即处理连接池的*单例。*我需要这个来确保连接池在一切结束时关闭，然后我想使用*try-with-resource*。例如

```
public class MyHandler implements java.io.Closeable{

   public static ConnectionPool pool;

   //Init the connection pool
   public MyHandler(){
      pool = ...;
   }

    @Override
    public void close() {
        pool().close();    
    }
} 
```

可能的地方`main`是：

```
public static void main(String [] args){
  try(MyHandler h = new MyHandler){
     //execute my code
     // somewhere I do MyHandler.pool.something();
  }
} 
```

如何确保 MyHandler 用作单例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T17:46:46.570

我见过的确保类是单例的常用方法是将其构造函数设置为私有，然后使用公共静态 getInstance 方法来检索单例。

```
public class MyHandler implements java.io.Closeable {
    private static MyHandler singleton = new MyHandler();
    private MyHandler() {}
    public static MyHandler getInstance() {
        return singleton;
    }

    @Override
    public void close() {
        //close stuff  
    }
}

try(MyHandler h = MyHandler.getInstance()){ } 
```

[Spring 框架](http://www.springsource.org/spring-framework)也有一个很好的系统来定义单例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:50:01.993

如果您需要的是一个单例类，您应该将您的构造函数设为私有并创建一个名为 getInstance() 的公共方法和一个私有属性 MyHandler 实例（或任何您想要的名称）。然后，如果实例为空或未定义，getInstance 方法将调用构造函数“MyHandler()”。最后，它返回实例属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T17:56:55.397

声明类单例的方法有很多种，但这种方法存在局限性。单例方法的最佳方法是 ENUM。声明 ENUM，其余的事情将被自动处理。

# c# - 在Session中存储Class对象，是引用类型吗？

> ID：16002211
> 
> 赞同：-2
> 
> 时间：2013-04-14T17:42:25.957
> 
> 标签：c#, asp.net

*   我有一个 Class X，它的对象是 objX，我为它设置了属性并将它存储在 Session 中。
*   创建另一个相同类型 X 的对象 objY。将 objX 的内容复制到 objY，例如：objY = objX。
*   现在，当我更改 objX 的属性时，它会在 objY 中更改。
*   即使我喜欢 objY = (X)Session["objX"]，它给出的结果与 objX 相同

为什么会发生这种情况，如何避免？如何避免？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:46:56.973

您不是在克隆对象，而只是在执行 objX =objY 时复制引用。使用正确实施的克隆方法。

克隆：

```
public Class X{
  public String A;
  public String B;
  public X Clone(){
     X cl = new X();
     cl.A = this.A;
     cl.B = this.B;
     return cl;
  }            
} 
```

语法可能不是 100% 正确的。

# python - 从 Google Maps API v3 获取经纬度

> ID：16002213
> 
> 赞同：1
> 
> 时间：2013-04-14T17:42:39.500
> 
> 标签：python, google-api

我正在 python 2.7 中构建一个独立的邻近搜索工具（目的是使用 py2exe 和 NSIS 分发它）和 tkinter，它采用中心点地址，查询数据库，并返回数据库中一定范围内的所有地址。

这是我第一次涉足 google api，我对如何利用它来检索这些数据感到非常困惑。

我在这里遵循了代码：[http ://www.libertypages.com/clarktech/?p=315](http://www.libertypages.com/clarktech/?p=315)

并且只收到一个 610。

我尝试使用此 url，基于堆栈溢出的问题并收到拒绝访问错误：[http](http://maps.googleapis.com/maps/api/geocode/xml) ://maps.googleapis.com/maps/api/geocode/xml ？

我已经在 API 控制台中设置了项目，启用了地图服务，添加了浏览器和服务器 api 密钥，都尝试了它们，但都失败了。

我整个上午都在翻阅 API 文档，但找不到任何东西告诉我为 google maps api v3 的简单 API 信息请求指定哪个 URL。

这是我的函数的实际代码，它是我上面链接的稍微修改的版本，当我使用[http://maps.google.com/maps/geo](http://maps.google.com/maps/geo)运行它时，混合了一些调试输出？我收到了 610,0,0,0 ：

```
def get_location(self, query): 

    params = { }
    params[ 'key' ] = "key from console" # the actual key, of course, is not provided here
    params[ 'sensor' ] = "false"
    params[ 'address' ] = query

    params = urllib.urlencode( params )
    print "http://maps.googleapis.com/maps/api/geocode/json?%s" % params

    try:
        f = urllib.urlopen( "http://maps.googleapis.com/maps/api/geocode/json?%s" % params ) 
```

一切运行完美，我只是以“610”和“失败”作为数据库中所有地址的经纬度。：/

我尝试了服务器应用程序 API 密钥和浏览器应用程序 API 密钥，Oauth 客户端 ID 不是一个选项，因为我不希望我的用户必须允许访问。

我真的希望有人会说“去阅读这份文件，你这个白痴”，然后我就可以把尾巴夹在两腿之间了。

更新：我发现了这个：[https](https://developers.google.com/maps/documentation/geocoding/) ://developers.google.com/maps/documentation/geocoding/实施了它建议的更改，没有更改，但是给我“拒绝访问”响应需要更长的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:23:45.067

API 密钥导致它失败。我将它从查询参数字典中取出，它只是作为一个匿名请求工作。

```
 params = { }
    params[ 'sensor' ] = "false"
    params[ 'address' ] = query 
```

# vim - 我如何制作这样的 vim 状态行

> ID：16002214
> 
> 赞同：0
> 
> 时间：2013-04-14T17:42:42.907
> 
> 标签：vim

我有几个 vim 的屏幕截图，其中状态行看起来像这样（特别是三角形背景）

![状态行示例](https://i.stack.imgur.com/txWui.png)

原始[海报](https://stackoverflow.com/a/8848009/1233517)声称这是默认设置。

但是，我的 vim 状态行默认情况下是这样的（我只将 colorcheem 更改为 Tomorrow-Night）

![在此处输入图像描述](https://i.stack.imgur.com/yrJmk.png)

如何使我的状态行看起来更像上面的。

我在 Ubuntu 12.04 上使用 vim-gnome

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T17:54:58.643

干得好：

[https://github.com/Lokaltog/powerline](https://github.com/Lokaltog/powerline)

这是一个不错的插件。我个人尝试过并且不喜欢这个插件...... :(

即使 vim 问题受到 SO 的欢迎，这个问题也可能会转到超级用户或其他频道....

# css - 我可以使用 twitter bootstrap 在同一个网站上使用不同数量的网格列吗？

> ID：16002216
> 
> 赞同：0
> 
> 时间：2013-04-14T17:42:58.190
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

正如标题所说 - 我可以使用 twitter bootstrap 在同一个网站上使用不同数量的网格列吗？

例如，上`about page`我想定义一个14个元素的网格系统，但是上`contact page`我想使用8列网格系统。我可以这样做吗？

我知道有一个变量命名`@gridColumns`，但我可以为不同的页面定义它`<div classes>`还是有其他方法？

`about page`编辑：有一种方法可以通过使用不同的布局和使用不同的包含文件来做到这一点 - 前者覆盖`contact page`. 我认为这可以做到，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:22:43.733

好吧，看来我找到了办法。至少这是我确信的方式之一。它现在正在工作，但我会进一步调查，如果我找到更好的解决方案，我会在这里发布。

我通过在资产中创建一个新文件来完成它 - 比如说`about.css.less`在我的`assets/stylesheets`文件夹中。我已经把我想覆盖的所有变量放在`about`页面上。（基本上我已经复制了内容`bootstrap_and_overrides.css`并覆盖了我想要的参数）

然后`/view/layouts/application.html.erb`我放了代码：

```
<% if params[:controller] != 'about' %>
    <%= stylesheet_link_tag "application", :media => "all" %>
<%end%> 
```

它现在包括`abouts.css`页面`about`和所有其他的，而不是。这至少是一种解决方案。

# android - ActionBarSherlock 横向模式

> ID：16002217
> 
> 赞同：2
> 
> 时间：2013-04-14T17:43:01.450
> 
> 标签：android, actionbarsherlock, custom-view

我在这个操作栏上读了很多东西，但是在横向模式下我遇到了问题

我想在选项卡上方创建一个自定义视图

这是我的代码

```
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockActivity;

public class MainActivity extends SherlockActivity {
private ActionBar bar;
@Override
protected void onCreate(Bundle savedInstanceState) {
    setTheme(R.style.Theme_Sherlock);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    bar = getSupportActionBar();
    LayoutInflater inflater =       (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View customView = (View)inflater.inflate(R.layout.custom_view, null);
    bar.setDisplayOptions(
            ActionBar.DISPLAY_SHOW_CUSTOM,
            ActionBar.DISPLAY_SHOW_CUSTOM | ActionBar.DISPLAY_SHOW_HOME
                    | ActionBar.DISPLAY_SHOW_TITLE);
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setCustomView(customView, new ActionBar.LayoutParams(
            ViewGroup.LayoutParams.MATCH_PARENT,
            ViewGroup.LayoutParams.MATCH_PARENT));
}

 @Override
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
        getSupportMenuInflater().inflate(R.menu.test_menu, menu);
        return super.onCreateOptionsMenu(menu);
    }
 } 
```

这是自定义视图

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:minWidth="100dp"
        android:background="#FFFFFFFF"
        android:text="CUSTOMVIEW" />

</LinearLayout> 
```

然而，这是视图位于按钮左侧的结果，而不是在它们上方，有没有办法让它在按钮上方？

![在此处输入图像描述](https://i.stack.imgur.com/oEFGF.png)

# sql - 如何将一个表列值保存到另一个表值？

> ID：16002230
> 
> 赞同：-3
> 
> 时间：2013-04-14T17:43:55.673
> 
> 标签：sql, sql-server-2005

![在此处输入图像描述](https://i.stack.imgur.com/TNdbE.jpg)

我有 2 个表 表 1 = Profile_Update 表 2 = PostalDB

此处表 1 列（BusinessName、ContactName、City、State、Postalcode{PrimaryKey} 等）值也希望存储表 2（City、State、Postalcode{PrimaryKey}）列。如何将一个表列值保存到另一个表值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:09:36.007

忽略在邮政编码上有一个主键并不聪明（因为在某些情况下，多个城市可以共享一个邮政编码，当然你不希望任何邮政编码只允许一个用户），也许你正在寻找的是这个：

```
UPDATE p SET city = pu.city, state = pu.state
  FROM dbo.PostalDB AS p
  INNER JOIN dbo.Profile_Update AS pu
  ON p.Postalcode = pu.Postalcode;

INSERT dbo.PostalDB(city, state, Postalcode)
  SELECT city, state, postalcode
  FROM dbo.Profile_Update AS pu
  WHERE NOT EXISTS
  (
    SELECT 1 FROM dbo.PostalDB
      WHERE Postalcode = pu.Postalcode
  ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:55:08.323

利用

```
SELECT ... INTO 
```

当您创建新表时。

否则

```
Insert INTO table (columns...)   (SELECT ... FROM ... where ...) 
```

# dns - 如何确保 bar.com 始终与 foo.freedns.com 相同？

> ID：16002232
> 
> 赞同：0
> 
> 时间：2013-04-14T17:43:57.953
> 
> 标签：dns

我的情况是，我有一个相当可靠的地址，因为它正在使用服务器上的程序进行更新，我们可以调用`foo.freedns.com`. 因此，此 DNS 条目始终具有正确的 IP。然后我们进行了手动配置`bar.com`，这显然会在服务器 IP 地址更改后立即停止工作（它会）。

所以我想知道的是，我怎样才能确保 DNS 记录`bar.com`始终相同`foo.freedns.com`？我可以简单地在为我处理的公司创建一个 DNS 条目`bar.com`，而不是将其重定向到当前 IP，而是将其重定向到`foo.freedns.com`？我感觉这行不通，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:52:48.237

不，您不能`CNAME`为`bar.com`. `bar.com`处于区域顶点，因此必须具有`SOA`和`NS`记录。DNS 名称不能`CNAME`与任何其他类型的记录一起具有记录。

您的选择是切换到使用不在区域顶点的 DNS 名称（例如`foo.bar.com`）并在其`CNAME`上放置一个，或者使用动态 DNS 来更新地址更改时的`A`和`AAAA`记录。`bar.com`

# codeigniter - 代码点火器自定义字段验证不起作用

> ID：16002237
> 
> 赞同：1
> 
> 时间：2013-04-14T17:44:40.043
> 
> 标签：codeigniter, validation

我在 Code Igniter 中创建了一个自定义验证。我有以下代码，但`is_FieldUnique`验证不起作用。即使，我`var_dump()`仍然没有得到它显示的参数。我在下面的代码做错了什么？我没有得到任何回报，`is_FieldUnique`但默认验证工作正常，如`required`, `min_length`。

在`application/libraries/Customfieldvalidation.php`，我在下面有这行代码：

```
class Customfieldvalidation extends CI_Form_validation 
    {
        public function is_FieldUnique($str, $field)
        {
            var_dump($str);
            var_dump($field);
            list($table, $field)=explode('.', $field);
            $q = $this->CI->db->query("SHOW KEYS FROM $table WHERE Key_name = 'PRIMARY'")->row();
            $primary_key = $q->Column_name;
            if($this->CI->input->post($primary_key) > 0):
                $query = $this->CI->db->limit(1)->get_where($table, array($field => $str,$primary_key.' !='=>$this->CI->input->post($primary_key)));
            else:
                $query = $this->CI->db->limit(1)->get_where($table, array($field => $str));
            endif; 
            echo $query;
            exit();
            return $query->num_rows() === 0;
        }
    } 
```

在我的控制器中，我有以下代码：

```
class User extends CI_Controller 
{
    function __construct()
    {
        parent::__construct();
        $this->load->library('customfieldvalidation');
    }
    function _setRules()
    {
        $this->form_validation->set_rules('email_address', 'Email Address', 'required|valid_email|min_length[8]|is_FieldUnique[users.email_address]');
        $this->form_validation->set_message('is_FieldUnique', '* must have a unique value');
    }
} 
```

自定义字段不起作用的原因可能是什么？我知道这对每个人来说都非常简单，但我是 Codeigniter 的新手并开始学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:12:35.990

如果要扩展本机库，则必须正确地为自定义库添加前缀。默认前缀是`MY_`可以在 中更改的`application/config/config.php`，使用以下配置：`$config['subclass_prefix'] = 'MY_';`。

所以这：

```
class Customfieldvalidation extends CI_Form_validation 
```

应该：

```
class MY_Form_validation extends CI_Form_validation 
```

还要确保文件名反映了这一点并且位于适当的位置：

```
application/libraries/MY_Form_validation.php 
```

您还需要一个构造函数来扩展父类：

```
function __construct($rules = array())
{
    parent::__construct($rules);
} 
```

确保您在控制器中加载库或[自动加载](http://ellislab.com/codeigniter/user-guide/general/autoloader.html)它。加载库时不需要包含类前缀：

```
$this->load->library('form_validation'); 
```

我猜你已经在你的`is_FieldUnique`函数中添加了几行用于调试，但你绝对不希望在此`exit()`之前，`return`因为这将退出脚本并且不允许返回任何内容。我也不清楚函数返回的是什么（也许我只是昏暗了！），所以这样的声明应该会有所帮助：

```
if ($query->num_rows() === 0)
{
    return TRUE;
}
else
{
    return FALSE;
} 
```

您还可以考虑使用[回调](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks)，这是添加您自己的验证规则的常用方法。

# ruby - 无法使用诅咒滚动主窗口

> ID：16002246
> 
> 赞同：1
> 
> 时间：2013-04-14T17:45:50.233
> 
> 标签：ruby, curses

我刚刚遇到了和这个人一样的问题：[http ://computer-programming-forum.com/39-ruby/b4065fe9ccbcae86.htm](http://computer-programming-forum.com/39-ruby/b4065fe9ccbcae86.htm)

诅咒（与 Window 相同）具有方法`scrl(n)`和`scroll()`，要启用它们，我必须做`.scrollok true`. 问题在于，与 Window 不同：

```
temp.rb:8:in `<main>': undefined method `scrollok' for Curses:Module (NoMethodError) 
```

*我必须添加一个 scrollok 包装器.....如果您一开始就无法启用滚动，那么拥有一个 scrl() 包装器有什么好处？*

那么它是一个错误还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:45:50.233

在发布问题时，我想出了一个解决方案。

您不必制作包装纸。只需以这种方式使用[.scrollok ：](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/curses/rdoc/Curses.html#method-c-stdscr)

```
Curses.stdscr.scrollok true 
```

# networking - 是否可以强制多播数据包在被环回发送者之前通过路由器？

> ID：16002251
> 
> 赞同：0
> 
> 时间：2013-04-14T17:45:56.790
> 
> 标签：networking, synchronization, wifi, multicast, loopback

简而言之：多播数据包是否可以在被环回发送者之前强制通过路由器（即禁用内部环回但仍接收数据包）？

我的目的是使用多播作为本地 WiFi 上的同步方法：向多个接收者发送一个虚拟多播数据包；由于他们几乎同时接收到该数据包，因此他们可以比较他们的接收时间以同步他们的时钟。

这适用于 3 个或更多设备（并且已禁用环回）。但是，对于 2 个设备，一个设备需要既是发送者又是接收者，并且内部环回会短路数据包原本会采用的路径，从而破坏时序。

我尝试禁用多播环回（IP_MULTICAST_LOOP）。我试过强制 WiFi 作为多播接口（IP_MULTICAST_IF）。

否则我将不得不求助于 2 设备同步的网络条件估计，这不是首选，因为我一般不精通网络编程，它可能是最常用的配置。

需要明确的是，这是在 iOS 上使用的，但我会就从哪里开始寻找任何建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:17:33.263

我对此表示怀疑。路由器不会将它发送到它没有收到 IGMP JOIN 消息的任何地方。您可以尝试在发件人处加入您要发送的群组，但我不保证它会起作用。这通常是不必要的，但无论如何您可能都会这样做。

# php - localhost 标头重定向到 localhost/link

> ID：16002255
> 
> 赞同：1
> 
> 时间：2013-04-14T17:46:14.723
> 
> 标签：php, http, header, location, localhost

我在我的电脑上设计了一个主页，可以通过 localhost/Home 访问。在这里我输入一个站点名称，它必须带我到那个站点。我使用了 header("Location: url"); 在我的代码中运行，它正确地接收站点名称。但问题是，任何我尝试打开的站点，它都会将我带到“localhost/site”，就像我在输入中输入 www.google.com 一样，它会将我带到 localhost/www.google.com

有什么方法可以退出本地主机并在输入时转到 google.com？还是不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:53:18.523

您需要提供完整的绝对 URL，包括方案。例子：

```
header('Location: http://www.google.com'); 
```

否则，客户端会将 URL 视为相对 URL。

# javascript - 查看字符串是否开始匹配另一个字符串

> ID：16002256
> 
> 赞同：0
> 
> 时间：2013-04-14T17:46:20.517
> 
> 标签：javascript, jquery

我在数组中有一个关键字列表，当用户正确键入其中一个关键字时，我运行 pass() 函数。我检查用户在输入每个键后输入的内容（在 key up 上）是否等于数组中的任何内容。

我通过在每个键上执行此操作，使用 for 循环遍历数组，如果它与数组中的项目匹配，则运行 pass 函数，但如果它的长度更长或等于长度且不等于一个项目在数组中并且是已经到达数组的末尾然后运行一个失败函数。

这是我的代码：

```
var keywords = new Array('', 'help', 'search', 'clock', 'folio', 'pong', 'simon');
for(var i=0; i<=(keywords.length)-1; i++){
if($('#code').val()===keywords[i]){
    pass(i);
}
else if(($('#code').val().length>=keywords[i].length) && (i === (keywords.length)-1)){
    fail();
}
} 
```

现在，我遇到的问题是过早的 fail() 执行。当用户键入较长的关键字之一时，在它比较短的关键字之一长时执行失败。

此外，对于键入“帮助”和“搜索”的一些研究，通过和失败运行？

无论如何，我想知道有没有办法改进我的代码，所以我想要做什么并正常工作？

**是否可以检查用户输入的内容是否与关键字之一匹配，如果看起来他们正在拼写其中一个关键字，那么不会失败（），但是当他们搞砸并拼写等于长度的东西时，但不是关键字然后失败（）。**

例如：sear 会在我之前的代码中导致失败，但在我现在尝试做的事情中，直到用户键入类似 searck 的内容才会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:48:37.123

您只需要`fail()`在`for`循环完成并且没有匹配项时调用。

我不知道你试图用`else if`逻辑完成什么。`fail()`这是一个仅在没有匹配项时调用的版本。出于效率考虑，它还退出循环`$('#code').val()`，并在找到匹配项时退出循环，因为没有理由继续。`for``for`

```
var keywords = new Array('', 'help', 'search', 'clock', 'folio', 'pong', 'simon');
var val = $('#code').val();
var fullMatch = false, partialMatch = false;

for (var i = 0; i < keywords.length; i++) {
    if (val === keywords[i]) {
        fullMatch = true;
        pass(i);
        break;
    } else if (val && !partialMatch) {
        if (keywords[i].indexOf(val) === 0) {
           partialMatch = true;
        }
    } 
}
if (!fullMatch && !partialMatch) {
    fail();
} 
```

# c++ - 这会是在 C++ 中运行循环的有效方法吗？

> ID：16002260
> 
> 赞同：-3
> 
> 时间：2013-04-14T17:46:34.887
> 
> 标签：c++, loops, syntax, while-loop

如果我想有一个while循环：虽然一个变量不等于几个不同的值，这有效吗？：

```
while (uInput != ('a' || 'b' || 'c')){
    //do something to make it equal one of those
} 
```

或者我是否必须单独将 uInput 与 a 进行比较，将 uInput 与 b 进行比较，等等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T17:47:27.707

它不会做你想让它做的事情。您需要单独比较每个值：

```
uInput != 'a' && uInput != 'b' && uInput != 'c' 
```

实际上，`('a' || 'b' || 'c')`将被评估为`true`并且表达式等效于：

```
uInput != true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T17:47:38.293

**没有**。你想写的是：

```
while ((uInput != 'a') && (uInput != 'b') && (uInput != 'c'))
{
    //do something to make it equal one of those
} 
```

表达式`('a' || 'b' || 'c')`将通过转换字符`'a'`,`'b'`和`'c'`too来计算`bool`；实际上，这里*只有第一个操作数*( `'a'`) 被求值，因为它的求值会产生值`true`并保证整个表达式也`('a' || 'b' || 'c')`求值`true`- 应用了短路。

所以你的初始循环所做的是：

```
while (uInput != true)
{
    //do something to make it equal one of those
} 
```

这不太可能是您想要的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-14T17:55:31.360

## 不。

> 这会是在 C++ 中运行循环的有效方法吗？

它是“有效的”，但它并没有做你想做的事情。与我不同，编译器不会神奇地推断出您的意图，因为它与语言的语义不同。

运算符是愚蠢的`!=`，因为它不在乎你试图在它的右手边做什么有趣的魔法——右手边表达式的*结果*是被比较的结果，结果是`('a' || 'b' || 'c')`只是一个值，*即*不是您想要的选项列表。

某些语言提供了允许您使用这些语义的替代运算符*，*例如在 SQL 中：

```
SELECT * FROM tbl WHERE NOT value IN ('a', 'b', 'c')
--                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

但即使在 SQL 中，基本的不等式运算符也不关心列表：

```
SELECT * FROM tbl WHERE value != ('a', 'b', 'c')
-- probably a syntax error, or otherwise failure to do what you wanted 
```

在 C++ 中，您*只能*获得愚蠢的语法，但如果您真的想要，您可以将这些选项放在容器中（例如 an `std::vector`）并使用以下算法`std::find`：

```
std::vector<char> v{'a', 'b', 'c'};
while (std::find(uInput, v.begin(), v.end()) != v.end()) {
  // ...
} 
```

当然，当您只想编写以下代码时，这太过分了：

```
while (uInput != 'a' && uInput != 'b' && uInput != 'c') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T17:49:45.170

正确答案是

```
while (uInput != 'a' && uInput != 'b' && uInput != 'c') 
```

因为条件

```
uInput != 'a' || uInput != 'b' || uInput != 'c' 
```

将始终评估为真，即使 uInput 等于其中一个值，使您的循环成为无限循环。

你真的需要阅读 C++ 语法。

# php - 对多维数组进行排序

> ID：16002266
> 
> 赞同：1
> 
> 时间：2013-04-14T17:46:59.980
> 
> 标签：php, arrays, sorting, multidimensional-array

如果之前已经回答过，我真的很抱歉，但这是我的问题，
我有这个：

```
 array (size=256)
      0 =>
            array (size=2)<br>
                0 => string 'name_a'
                1 => string '2175'
      1 =>
            array (size=2)
                0 => string 'name_d'
                1 => string '1'
      2 =><
            array (size=2)
                0 => string 'name_c'
                1 => string '715'
      3 =>
            array (size=2)
                0 => string 'name_b'
                1 => string '5' 
```

我希望能够按从多到少的数字或/和名称对它进行排序，如果我为每个名称添加更多信息，例如时间值。它是一个巨大的数组（我认为超过 400 个），我需要从上到下一个一个地显示它。如果有人有任何想法，我很想听听他们的意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:56:52.993

[`usort`](http://us3.php.net/manual/en/function.usort.php)像这样使用：

```
function myComp($a, $b) {
    if($a[1] == $b[1]) {
        return 0;
    }

    return ($a[1] > $b[1]) ? -1 : 1;
}

usort($myArray, 'myComp'); 
```

# pointers - STRCAT 代码构建、运行但崩溃

> ID：16002267
> 
> 赞同：0
> 
> 时间：2013-04-14T17:47:02.417
> 
> 标签：pointers, strcat

我正在浏览一些关于 C 的基本教程，使用`Code::Blocks`.

任何人都可以用下面的代码帮助我，并给出一些解释吗？它构建但在运行时崩溃。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#define MAX_LEN 40

main()
{
   int pos;
   char *line,*aster,*blank;

   line=(char *)malloc(MAX_LEN);
   aster=(char *)malloc(1);
   blank=(char *)malloc(1);
   line="                                        ";
   aster="*";
   blank="";

   printf("Enter position of star (1-40): ");
   scanf("%d",&pos);

   if(pos>0&&pos<41)
   {
       printf("\n");
       printf("         1         2         3         4\n");
       printf("1234567890123456789012345678901234567890\n");
       puts(strcat(strncat(blank,line,pos-1),aster));
   }
   else
    printf("Out of range");
} 
```

问题似乎出在 strcat 代码行中，我猜是指针的使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:06:38.723

问题是您的`blank`字段为一个字符提供了空间，但您最多需要 40 个字符。使用`strcat`or`strncat`时，目标缓冲区（这是任一函数的第一个参数）必须为连接的字符串和终止`\0`字符提供足够的空间。

你想做的是像

```
line = "                                        ";
blank = malloc(MAX_LEN+1); /* 40 characters + terminating '\0' */
blank[0] = 0; /* Needed for strcat to work */
[...]
puts(strcat(strncat(blank, line, pos-1), aster)); 
```

另一个注意事项：您使用`line`and`aster`会导致内存泄漏。如果你想`malloc`用空格填充分配的内存，你应该使用`memset`，如果你想分配一个字符串文字，你根本不应该使用`malloc`。您实际上所做的是覆盖由`malloc`.

# php - 使用 PHP set_time_limit() 防止 nginx 504 网关超时

> ID：16002268
> 
> 赞同：140
> 
> 时间：2013-04-14T17:47:02.573
> 
> 标签：php, nginx, fastcgi

当我的 PHP 脚本运行时间比平时长时，我从 nginx 收到 504 超时消息。`set_time_limit(0)`似乎并没有阻止！在nginx上运行php5-fpm时它不起作用吗？如果是这样，设置时间限制的正确方法是什么？

**错误：**

```
504 Gateway Time-out
nginx/1.2.7 
```

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2013-07-07T10:48:31.103

有几种方法可以设置 php-fpm 的超时。在`/etc/php5/fpm/pool.d/www.conf`我添加了这一行：

```
request_terminate_timeout = 180 
```

此外，`/etc/nginx/sites-available/default`我在相关服务器的位置块中添加了以下行：

```
fastcgi_read_timeout 180; 
```

整个位置块如下所示：

```
location ~ \.php$ {
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    fastcgi_param   SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_read_timeout 180;
    include fastcgi_params;
} 
```

现在只需重新启动 php-fpm 和 nginx，对于少于 180 秒的请求应该不会再有超时。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-10-10T17:41:50.093

试试这个[链接](http://www.codetweet.com/nginx/solved-504-gateway-timeout-error-in-nginx-web-server/)，它有一个更好的解决方案来解决这个问题。所以步骤是：

1.  打开`nginx.conf`位于`/etc/nginx`目录中的文件。
2.  在以下部分添加以下代码`http {`：

    ```
    client_header_timeout 3000;
    client_body_timeout 3000;
    fastcgi_read_timeout 3000;
    client_max_body_size 32m;
    fastcgi_buffers 8 128k;
    fastcgi_buffer_size 128k; 
    ```

    注意：如果它已经存在，请更改相应的值。

3.  重新加载 Nginx 和 php5-fpm。

    ```
    $ service nginx reload
    $ service php5-fpm reload 
    ```

    如果错误仍然存​​在，请考虑增加值。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-14T17:51:31.813

您不能使用 PHP 来防止 nginx 发出超时。

要配置 nginx 以允许更多时间，请参阅[`proxy_read_timeout`指令](http://wiki.nginx.org/HttpProxyModule#proxy_read_timeout)。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-12-23T06:54:52.923

```
 sudo nano /etc/nginx/nginx.conf 
```

将这些变量添加到 nginx.conf 文件中：

```
http {  
  # .....
  proxy_connect_timeout       600;
  proxy_send_timeout          600;
  proxy_read_timeout          600;
  send_timeout                600;
} 
```

然后重启：

```
service nginx reload 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-10-19T14:37:46.780

正确的答案是在 Nginx 配置中增加**fastcgi_read_timeout 。**
就那么简单！

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-03-07T13:31:52.227

在这种情况下会发生三种超时。可以看出，每个答案都只关注这些可能性的一个方面。所以，我想把它写下来，这样将来访问这里的人就不需要随机检查每个答案并在不知道哪个有效的情况下获得成功。

1.  来自请求者的请求超时 - 需要设置超时标头（请参阅请求库中的标头配置）
2.  **发出请求时 nginx**超时（在转发到代理服务器之前），例如：正在上传巨大的文件
3.  **转发到代理服务器后**超时，服务器没有及时回复nginx。例如：在服务器上运行的耗时脚本

**因此，每个问题的修复如下。**

1.  设置超时标头，例如：在 ajax 中

    ```
    $.ajax({
        url: "test.html",
        error: function(){
            // will fire when timeout is reached
        },
        success: function(){
            //do something
        },
        timeout: 3000 // sets timeout to 3 seconds
    }); 
    ```

2.  nginx客户端超时

    ```
    http{
         #in seconds
        fastcgi_read_timeout 600;
        client_header_timeout 600;
        client_body_timeout 600;
     } 
    ```

3.  nginx 代理服务器超时

    ```
    http{
      #Time to wait for the replying server
       proxy_read_timeout 600s;

    } 
    ```

所以使用你需要的那个。也许在某些情况下，您需要所有这些配置。我需要。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-06T23:27:47.243

您需要在 中添加额外的 nginx 指令（for `ngx_http_proxy_module`）`nginx.conf`，例如：

```
proxy_read_timeout 300; 
```

基本上 nginx`proxy_read_timeout`指令会更改代理超时，`FcgidIOTimeout`适用于安静时间过长`FcgidBusyTimeout`的脚本，以及执行时间过长的脚本。

此外，如果您使用的是 FastCGI 应用程序，请同时增加这些选项：

```
FcgidBusyTimeout 300
FcgidIOTimeout 250 
```

然后重新加载 nginx 和 PHP5-FPM。

### 普莱斯克

在 Plesk 中，您可以在*Additional nginx 指令*下的*Web 服务器设置*中添加它。

 *对于 FastCGI 检查*HTTP 附加指令*下的*Web 服务器设置*。

 *^(请参阅：[如何修复 Plesk 中的 FastCGI 超时问题？](https://stackoverflow.com/q/13905004/55075))

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-27T08:10:43.317

使用 php-fpm 或类似的进程管理器时，使用[`set_time_limit(0)`](http://www.binarytides.com/php-set-time-limit/)是无用的。

`set_time_limit`使用时不要使用底线`php-fpm`，以增加执行超时，请查看本[教程](https://rtcamp.com/tutorials/php/increase-script-execution-time/)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-15T16:20:22.903

由于您使用的是 php-fpm，因此您应该利用 fastcgi_finish_request() 来处理您知道可能需要更长时间的请求。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-12T10:21:48.517

不要忘记查看您的 php-fpm 日志！

在我的 PHP 7.3 中，我遇到了：

> 警告：[pool www] 服务器达到 pm.max_children 设置 (5)，考虑提高它

在`/etc/php/7.3/fpm/pool.d/www.conf`我不得不将`pm.max_children`价值从`5`最高提高到`50`（我有时会做一些非常繁重的本地工作......）。

*注意：请注意，它可能会使用更多 CPU！*

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-02T20:26:20.867

经过长时间寻找这个问题的答案后，我看到了一件事。

我的应用程序还有一层：

1.  负载均衡器（问题一直在这里）
2.  网络服务器（nginx）
3.  应用程序 (php)

从发出请求转义到 LB，我可以在 php 中使用“sleep”看到测试成功响应。**

# vb.net - 动态清除流布局面板

> ID：16002270
> 
> 赞同：0
> 
> 时间：2013-04-14T17:47:09.757
> 
> 标签：vb.net, flowlayoutpanel

一直在尝试以几种不同的方式做到这一点，这是我最新的：

```
Dim i As Integer = 0
    Dim ControlCount As Integer = SearchResults.Controls.Count
    Do Until i > ControlCount
        SearchResults.Controls.RemoveByKey(i)
        i += 1
    Loop 
```

搜索结果是流程布局面板的名称！

关于如何做到这一点的任何想法？我只是想删除当前面板中的所有内容！

我也尝试过诸如 searchresults.items.clear 之类的东西，但无济于事

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:37:07.640

你试过`SearchResults.Controls.Clear()`吗？FlowLayoutPanel 有一个 Controls 属性。查看该文档（[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx)），您可以看到这是一个 Control.ControlCollection，并查看相关文档，您可以找到 .Clear() 方法。

我怀疑您的控件没有 0,1,2 的键...（键应该是字符串，而不是整数）-也许您正在考虑 RemoveAt 方法（[http://msdn.microsoft.com/ en-us/library/system.windows.forms.control.controlcollection.removeat.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.removeat.aspx)）。但这不会以您显示的方式起作用，因为每次删除控件时，控件的数量都会减少一个。

所以，试试 .Clear() 方法，并请设置[Option Strict On](http://msdn.microsoft.com/en-us/library/zcd4xwzs%28v=vs.110%29.aspx)，最好是在 IDE 中，让它为你指出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T19:56:38.417

正如第一个响应所述，密钥是一个字符串。关键是控件的 Name 属性。如果您还想删除 flowlayoutpanel 及其内容，您可以调用 dispose 方法，如下所示：

```
 If IsNothing(flpTechProductionNumbers.Controls.Find(Action, True).FirstOrDefault) Then
    Else
        flpTechProductionNumbers.Controls.Find(Action, True).First.Dispose()
        ' flpTechProductionNumbers.Controls.Find(Action, True).First.Controls.Clear()
    End If 
```

如果您想通过索引访问控件，就像您尝试的那样，您应该能够将 Controls 属性视为一个数组并执行以下操作：

```
 flpTechProductionNumbers.Controls(i) 
```

# ios - NSURLConnection didFailWithError 是否需要我警告用户？

> ID：16002272
> 
> 赞同：0
> 
> 时间：2013-04-14T17:47:16.917
> 
> 标签：ios

我知道苹果指南中的某处说，如果连接不可用，则通知用户。但是具体应该在哪里做呢？

到目前为止，我只是`UIAlertView`在`NSURLConnection didFailWithError`方法中显示了一个，但是当我使用多个连接对象时它会变得很烦人，如果一个连接不可用，在某些情况下会多次弹出窗口。

我绝对必须在`didFailWithError`方法中显示一条消息吗？或者有没有更简洁的方法让用户知道检查他/她的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:52:01.953

> 我是否必须在 didFailWithError 方法中显示一条消息？

不，当然不。如果您的应用程序可以容忍无法建立连接，则没有理由为此打扰用户。如果失败的连接改变了应用程序响应用户的方式，那么你当然应该以某种方式让用户知道。您可以为此使用警报，或者您可能只显示“离线”图标或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:52:13.640

您不需要显示警报，当然也不需要每次连接失败。你有几个选择：

1.  一次失败，重试几次；如果所有这些都失败，则通知。
2.  警告一次失败，但禁用/限制后续失败的警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T17:57:24.793

在尝试连接之前，我会检查是否可以连接到主机，您可以使用[此处](https://github.com/tonymillion/Reachability)找到的 Apple 可达性代码的变体。

如果检查成功但连接失败，那么问题就出现了，连接对于用户在应用程序中继续进行是否绝对重要？如果它很重要，提醒用户连接失败，将此状态存储在某处，并采取相应的行动，如果它不重要，为什么要告诉他们呢？下次他们尝试连接时，他们将不得不经历相同的过程，最终会告诉他们主机无法访问。

# javascript - jQuery Waypoints 触发一次

> ID：16002273
> 
> 赞同：10
> 
> 时间：2013-04-14T17:47:25.040
> 
> 标签：javascript, jquery, jquery-waypoints

我正在使用[http://imakewebthings.com/jquery-waypoints](http://imakewebthings.com/jquery-waypoints)，当用户向下滚动到带有类的区域时，我需要执行一些操作`div1`。但是，我只需要它触发一次，而不是每次用户滚动到该位置时。——**只有一次**

```
$('.div1').waypoint(function(direction) 
{
    alert(CARRY OUT MY ACTION);
}); 
```

这只需要在第一次滚动到该部分时发生——向上或向下。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-06-08T13:38:02.390

`triggerOnce()`替换为`destroy()`。只需添加`this.destroy()`.

```
$('.div1').waypoint(function(direction){
    alert('CARRY OUT MY ACTION')
    this.destroy()
}); 
```

有关更多选项，请查看[Waypoints 的 API](http://imakewebthings.com/waypoints/api/waypoint/)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-14T17:51:28.327

如果将第二个参数传递给`waypoint()`函数，则可以包含配置选项对象。将该`triggerOnce`选项设置为 true 将使插件按照您想要的方式运行。

```
$('.div1').waypoint(function(direction) 
{
    alert('CARRY OUT MY ACTION');
},  
{ 
    triggerOnce: true 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-18T10:37:04.353

在新的 API 中，似乎没有 triggerOnce 选项了，但仍然可以使用`waypoint.disable()`第一次调用后的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-12T19:32:04.020

答案是`this.destroy()`在处理函数的末尾使用。这是一个可行的示例：

```
$('.div1').waypoint(function(direction){

    handler: function(direction) {

        alert('CARRY OUT MY ACTION');

        this.destroy();

    }

}); 
```

另请参阅[waypoint.destroy()](http://imakewebthings.com/waypoints/api/destroy/)文档。

# macos - Mac Qt macdeployqt 问题

> ID：16002280
> 
> 赞同：1
> 
> 时间：2013-04-14T17:47:48.623
> 
> 标签：macos, qt, macdeployqt

我的可执行文件中有 2 个加载命令，一个有效，另一个现在有效，使用 qtcreator,macdeployqt 加载命令 12 版本甚至不存在.....

加载命令 11 cmd LC_LOAD_DYLIB cmdsize 72 名称 @executable_path/../Frameworks/libsasl2.2.dylib (offset 24) 时间戳 2 Wed Dec 31 19:00:02 1969 当前版本 3.25.0 兼容版本 3.0.0

加载命令 12 cmd LC_LOAD_DYLIB cmdsize 72 名称 @executable_path/../Frameworks/libsasl2.2.dylib (offset 24) 时间戳 2 Wed Dec 31 19:00:02 1969 当前版本 5.9.2 兼容版本 5.9.2

# c# - WPF 数据网格给定日期但行为空

> ID：16002283
> 
> 赞同：0
> 
> 时间：2013-04-14T17:48:05.217
> 
> 标签：c#, wpf, datagrid, xml-serialization

我在填充`DataGrid`数据时遇到问题。这是我反序列`XML file`化并将信息放入数组中的代码，然后将其`Array`放入`DataGrid`using`ItemsSource`方法中。

```
public partial class Teacher_Page : Window
{
    List<User> pupils;

    public Teacher_Page()
    {
        InitializeComponent();
        XmlSerializer deserializer = new XmlSerializer(typeof(List<User>));
        TextReader textReader = new StreamReader("../../../Pupils.xml");
        pupils = (List<User>)deserializer.Deserialize(textReader);
        textReader.Close();

        lbtest.Content = pupils[2].Name;
        dataResults.ItemsSource = pupils;

    }
} 
```

但是，当我运行程序时，我`DataGrid`填充了正确数量的行，`arraylist`但是行是空的并且没有列。`lbltest`从 中输出一个字符串`arraylist`来证明`arraylist`不为空，这是正确的。 `AutoGenerateColumns`也设置为 true。

`XAML`

```
<DataGrid x:Name="dataResults" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Height="248" Width="610" IsReadOnly="True"/> 
```

`Code behind`

```
public class User
{
    public String Name;
    public int Score;

    public User()
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T18:08:23.207

问题在于你的`User`班级。

要在 dataGrid 中自动生成列，您应该`properties`在基础 ItemsSource 类和`not fields`. `Binding`from XAML 仅适用于属性而不适用于字段。

制作`Name`和`Score`作为属性，然后它应该可以工作 -

```
public class User
{
    public String Name { get; set; }
    public int Score { get; set; }
} 
```

# android - 将事件添加到 android 日历而不显示日历

> ID：16002284
> 
> 赞同：0
> 
> 时间：2013-04-14T17:48:05.483
> 
> 标签：android

我有这个添加事件的代码：

```
Intent calendarIntent = new Intent(Intent.ACTION_INSERT, Events.CONTENT_URI);

Calendar beginTime = Calendar.getInstance();
beginTime.set(2013,04,14,21,00,00);

Calendar endTime = Calendar.getInstance();
endTime.set(2013,04,14,21,10,00);
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("title", "Some title");
intent.putExtra("description", "Some description");
intent.putExtra("beginTime", beginTime.getTimeInMillis());
intent.putExtra("endTime", endTime.getTimeInMillis());
startActivity(intent); 
```

但是如何在不打开日历的情况下插入事件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:07:10.793

你需要使用 a`ContentResolver`代替`Intent`

```
ContentResolver cr = getContentResolver();
ContentValues values = new ContentValues();

Calendar beginTime = Calendar.getInstance();
beginTime.set(2013,04,14,21,00,00);

Calendar endTime = Calendar.getInstance();
endTime.set(2013,04,14,21,10,00);

values.put(Events.DTSTART, beginTime.getTimeInMillis());
values.put(Events.DTEND, endTime.getTimeInMillis());
values.put(Events.TITLE, "Some title");
values.put(Events.DESCRIPTION, "Some description");

Uri uri = cr.insert(Events.CONTENT_URI, values); 
```

你可以阅读更多[日历提供者](http://developer.android.com/guide/topics/providers/calendar-provider.html#calendar)

# ios - 在 iOS 中渲染数学方程

> ID：16002286
> 
> 赞同：6
> 
> 时间：2013-04-14T17:48:14.157
> 
> 标签：ios, cocoa-touch

我想知道是否有一种简单的方法可以将数学方程式渲染到 iOS 应用程序中。它不必是交互式的。它所要做的就是以传统方式显示方程，因此当用户处理复杂的方程时，它更容易理解。

前任。2^(2/(6^(1/2))) 给出：![示例输出](https://i.stack.imgur.com/pnPVo.gif)

Wolfram Alpha 与我见过的其他应用程序一起执行此操作。它也不必处理变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T18:16:35.487

从 iOS5 开始，UIWebView 可以显示 mathML。你的例子：

```
<math title="2^(2/(sqrt(6))" xmlns="http://www.w3.org/1998/Math/MathML">
  <mstyle mathcolor="blue" fontfamily="sanserif" displaystyle="true">
    <msup>
      <mn>2</mn>
      <mrow>
        <mfrac>
          <mn>2</mn>
          <mrow>
            <msqrt>
              <mrow>
                <mn>6</mn>
              </mrow>
            </msqrt>
          </mrow>
        </mfrac>
      </mrow>
    </msup>
  </mstyle>
</math> 
```

这将在 iOS 上的 UIWebView 中呈现。

有可以为您转换的 javascript 库 - 例如[mathjax](http://www.mathjax.org)可以接受[ASCIIMath](http://www1.chapman.edu/~jipsen/mathml/asciimath.html)输入，例如这个例子 2^(2/(sqrt(6))

有一个很好的讨论这些问题here [Tradeoff between LaTex, MathML, and XHTMLMathML in an iOS app?](https://stackoverflow.com/questions/13243539/tradeoff-between-latex-mathml-and-xhtmlmathml-in-an-ios-app)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:03:19.370

对于简单的表达式，最简单的方法可能是使用 HTML 并在 UIWebView 中显示表达式。如果其他内容的表达部分也可以使用 HTML 显示，这将特别有效。

# android - 更改相机预览的大小不起作用（预览图片被剥离）

> ID：16002290
> 
> 赞同：0
> 
> 时间：2013-04-14T17:48:47.563
> 
> 标签：android, android-camera

我需要处理我的相机视图生成的所有帧才能读取条形码。

我使用 HTC Sensation（我还没有其他手机可以测试它）

所以我打电话给 getSupportedPreviewSizes 来选择我可以使用的最佳分辨率，我得到了：

* * *

1920,1088

1280,720

960,544

800,480

720,480

640,480

640,368

480,320

352,288

320,240

176,144

* * *

但只有 640x480 有效:(

如果我使用：

参数.setPreviewSize(800 , 600);

或者

参数.setPreviewSize(960, 544);

或者

参数.setPreviewSize(1280, 720);

然后我得到的图片被剥离，我在这里给你看一个例子：

![在此处输入图像描述](https://i.stack.imgur.com/6hpxJ.jpg)

如果我使用设置 3264x1840 或 2592x1456 作为预览大小，它没有效果，生成的图片仍然有 640x480 的大小

如果我将 1920x1088 设置为预览大小，我会遇到这个致命的错误，它会自动重新启动应用程序：

致命信号 11 (SIGSEGV) 在 0x417db2d9 (code=2)

为了您的信息，我复制/粘贴了我的 onPreviewFrame 的正文：

```
 public void onPreviewFrame(byte[] data, Camera camera) 
    {

    int width = camera.getParameters().getPreviewSize().width;  
    int height = camera.getParameters().getPreviewSize().height; 

    Parameters parameters = camera.getParameters();

    YuvImage image = new YuvImage(data , parameters.getPreviewFormat(), width , height , null);

    String resultText = "";

    try 
    {

        ByteArrayOutputStream baos = new ByteArrayOutputStream();

        image.compressToJpeg(new Rect(0 , 0 , image.getWidth() , image.getHeight()), 100, baos);

        // Convertie YUV TO BITMAP
        Bitmap bitmap = BitmapFactory.decodeByteArray( baos.toByteArray(), 0,  baos.size());

        FileOutputStream outStream = new FileOutputStream("/sdcard/" + System.currentTimeMillis() + ".jpg");

            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outStream);

            outStream.close();

            outStream.flush();

    }
    catch (Exception e) 
    {
             e.printStackTrace();
        }    

  } 
```

我用我的 surfaceChanged 函数的代码更新了我的帖子，其中包括回调缓冲区的代码：

```
 @Override
public void surfaceChanged(SurfaceHolder holder,  int format, int width, int height) 
{

    try 
    {
        Parameters parameters = camera.getParameters();

    //  parameters.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH); // ACTIVE FLASH SI NECESSAIRE
    //  parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO ); // ACTIVE AUTOFOCURS
    //  parameters.setSceneMode(Camera.Parameters.SCENE_MODE_STEADYPHOTO);

        String focusMode = Utils.findSettableValue(parameters.getSupportedFocusModes(), Camera.Parameters.FOCUS_MODE_AUTO, Camera.Parameters.FOCUS_MODE_MACRO);

        if (focusMode != null) 
        {
            parameters.setFocusMode(focusMode);
        }

        Log.e(TAG , "PREVIEWS : ");

        List<Size> previews = parameters.getSupportedPreviewSizes();

        for(int i = 0 ; i < previews.size() ; i++) 
        {
            Log.e(TAG , i + " : " + previews.get(i).width + "," + previews.get(i).height);
        } 

        Log.e(TAG , "PICTURES : ");

        List<Size> pictures = parameters.getSupportedPictureSizes();

        for(int i = 0 ; i < pictures.size() ; i++) 
        {
            Log.e(TAG , i + " : " + pictures.get(i).width + "," + pictures.get(i).height);
        } 

        Size preview = previews.get(1);

        parameters.getSupportedPictureSizes();

//      parameters.setPreviewSize(preview.width , preview.height);

    //  Camera.Size size = getBestPreviewSize(width, height);

        parameters.setPictureSize(1280 , 720);
        parameters.setPreviewSize(1280 , 720);

        camera.setParameters(parameters);

    //  camera.setDisplayOrientation(90);
        camera.setPreviewDisplay(holder);
        camera.setPreviewCallback(this);
        camera.startPreview();
        camera.autoFocus(autoFocusCallback);

        ///////////////////////////////////////////////////////////

        int imgformat = parameters.getPreviewFormat();
        int bitsperpixel = ImageFormat.getBitsPerPixel(imgformat);

        Camera.Size camerasize = parameters.getPreviewSize();
        int frame_size = ((camerasize.width * camerasize.height) * bitsperpixel) / 8;

        byte[] buffer = new byte[frame_size];
        camera.addCallbackBuffer(buffer);

    } 
    catch (Exception e) 
    {
        e.printStackTrace();
    }   

} 
```

但即使使用回调缓冲区，问题仍然存在，图片被剥离。

我做错什么了吗 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:39:45.877

回调缓冲区的大小是多少？拥有所有预览像素就足够了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T06:26:41.913

据我所知，HTC G11也有同样的问题（setPreviewSize超过1280x720）。

我建议适配HTC手机。如果他们使用的是 HTC 手机，请将 PreviewSize 设置为 640x480。

# java - 如果语句在 Java 中产生空结果

> ID：16002292
> 
> 赞同：-2
> 
> 时间：2013-04-14T17:48:58.677
> 
> 标签：java

我不想添加所有代码，因为这是我目前正在制作的游戏。无论如何，我声明了 class_Selection 和 Characterclass。用户为 class_Selection 输入一个字符串。它显示结果，然后进入一个 if 语句，在该语句中它使用相同的输入来决定之后要做什么。我对java非常陌生，并且为此编码，这是我的第一个项目。问题可能很简单。如您所见，我将其全部大写，因为我听说如果它全部大写，无论用户如何输入，它都会接受该密钥，例如：MeLeE，那可能不是真的。结果在正确通过程序的其余部分时产生，甚至显示了 class_Selection 的结果，但是当它到达 if 语句时，它显示为 null。

*编辑* 问题是某种字符类等于 null 所以当我 System.out.println(Characterclass); 我收到空值。

我修复了 ==，谢谢你，但我需要修复 CharacterClass 以某种方式最终为空。

*编辑*问题是，在 IF 语句中，我得到了全部大写的答案，我知道可能有办法做到这一点，但我做得不对。如果我输入正确的键，例如如果它是 MELEE，我输入 MELEE 它将显示结果。我也想当我做 system.out.println(Characterclass); ，我没有运行它的方法，所以我要修复它。我得到它来显示奖金。

谢谢你的==问题，我离我的目标更远了。

// 类选择

```
 System.out.println("Which one did you excel in ( Class )? Melee, Magic, or Archery?"); // Class selection
    String class_Selection; // Hold the class name (make method with this to declare bonuses and things that have to do with the class he chose: such as If ( class_Selection == melee) 
    class_Selection = classSelection.next(); // User enters name of class they want
    System.out.println("You entered: " + class_Selection + (" Is this the class you want?, y or n?"));

    String yOrN;
    yOrN = defaultScanner.next();

    if (yOrN == "n") { // redo if selection is no
        System.out.println("Then which class would you like? Melee, Magic, Archery?");
        class_Selection = classSelection.next();
        System.out.println("You entered: " + class_Selection + (" Is this the class you want?, y or n?"));
        yOrN = defaultScanner.next();

    }else{ // Does nothing if y because the selection is correct
    }

    // Continue after class selection

        System.out.println("Your class is: " + class_Selection); // Final display
        System.out.println("\n");

        // This is where your selection takes effect and displays your bonuses

        if (class_Selection == "MELEE") {
            Characterclass = "melee";
            System.out.println("Melee = +5 Blade, +5 Blunt, +5 Hand-To-Hand, +5 Heavy Armor,");

        }
        if (class_Selection == "ARCHERY") {
            Characterclass = "Archery";
            System.out.println("+10 Archery, + 10 Light Armor");

        }
        if (class_Selection == "MAGIC") {
            Characterclass = "Magic";
            System.out.println(" +10 Arcane, +5 Light Armor");

}
        System.out.println(Characterclass);

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:50:28.227

`if (yOrN == "n")`！！！应该 `if (yOrN.equals("n")){...}`

对于任何`Object`相等性检查，您应该使用`Object#equals`. 对于对象引用相等性检查，您应该使用`==`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T17:50:51.370

在 Java 中比较字符串，使用`String.equals()`; 不是 == 运算符。例如`yOrN.equals("n")`

`==`操作员检查两个字符串是否引用相同的字符串对象。该`equals()`方法比较两个字符串在两个字符串中是否具有相同的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:52:24.727

使用 比较字符串`.equals()`，而不是使用`==` which 比较引用。如果您想要不区分大小写的比较，请使用`.equalsIgnoreCase()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:53:58.067

`Strings`应该使用**equals**进行比较

 **```
if (yOrN == "n") {
// Code
} 
```

会变成

```
if (yOrN.equlals("n")) {
// Code
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T17:54:31.283

利用：

```
if (yOrN.equals("n")) 
```

阅读[这篇](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)关于如何比较字符串的信息。**

# visual-c++ - Visual c++ /clr 错误

> ID：16002293
> 
> 赞同：0
> 
> 时间：2013-04-14T17:49:06.027
> 
> 标签：visual-c++

因此，我的 Visual C++ 程序出现此错误，该程序使用按钮连接到相机、录制视频并保存视频，然后断开与相机的连接。为了解决这个问题，我在 c/c++ 属性的命令行中输入 /clr。错误是

```
1>c:\users\taycm_000\documents\visual studio 2010\projects\test-new\test\stdafx.h(28): error C3641: 'handleObjectEvent' : invalid calling convention '__stdcall ' for function compiled with /clr:pure or /clr:safe
1>c:\users\taycm_000\documents\visual studio 2010\projects\test-new\test\stdafx.h(32): error C3641: 'handlePropertyEvent' : invalid calling convention '__stdcall ' for function compiled with /clr:pure or /clr:safe
1>c:\users\taycm_000\documents\visual studio 2010\projects\test-new\test\stdafx.h(37): error C3641: 'handleStateEvent' : invalid calling convention '__stdcall ' for function compiled with /clr:pure or /clr:safe 
```

有没有办法在不使用 /clr 的情况下解决这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:22:13.280

当您说“将所有代码编译为 IL”时，C++/CLI 编译器并不是很激动，它会遇到一个函数声明，该声明显然是一个编译为本机代码的函数。不能两者兼而有之。

一定要告诉它哪些头文件包含本机代码函数的声明。您可以即时来回切换。使用 pragma 很容易做到：

```
#pragma managed(push, off)
#include "foo.h"
#pragma managed(pop) 
```

# r - ProjectTemplate - 自动更新 global.dcf 文件

> ID：16002294
> 
> 赞同：1
> 
> 时间：2013-04-14T17:49:07.393
> 
> 标签：r, project-template

我正在使用该包`ProjectTemplate`来自动加载 RStudio 中的数据和包。`ProjectTemplate`使用名为 global.dcf 的文件来设置加载包、加载数据和其他任务。

我有许多 RStudio 项目（.Rproj 文件），并且在每个 RStudio 项目中，我都有一个不同的 global.dcf 文件。目前，如果我修改在一个 RStudio 项目中加载了哪些包，则需要更新每个 RStudio 项目中的每个 global.dcf 文件。

我想要的是一个单一的主 global.dcf 文件。如果我修改此主 global.dcf 文件中加载了哪些包，则每个 RStudio 项目中的每个 global.dcf 文件都会自动更新。有没有办法使用 R 来做到这一点？

# intellij-idea - IntelliJ IDEA 退格和缩进？

> ID：16002295
> 
> 赞同：10
> 
> 时间：2013-04-14T17:49:16.770
> 
> 标签：intellij-idea

这里有两个场景：

Eclipse（甚至可能是其他程序？）：如果我缩进，例如按 Tab 或类似的：第 1 步：（ | 是插入符号）

```
public text(){
     |
} 
```

第 2 步：我按退格键：

```
 public text(){
 |
    } 
```

看看按一下退格键是如何将整个缩进移回的，因为它全是空白空间？同样，如果我用 TAB 缩进四次，我会按 4 个退格键，每个退格键移动一个空格缩进。

这对 IntelliJ 是否可行，因为现在，我被迫向退格键发送垃圾邮件，因为它只会后退一步？例如，如果我想获得与第 2 步相同的结果，我必须退格 4-5 次。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-07-13T23:36:13.270

以防万一其他人将来偶然发现此问题，现在这是一个标准选项，可在以下位置找到：

**首选项 -> 编辑器 -> 常规 -> 智能键**。然后在**Backspace**部分下选择您喜欢的**Unndent选项**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-26T10:10:14.543

你可能想试试这个非常方便的 intellij 插件： [饥饿的退格键](http://plugins.jetbrains.com/plugin/162?pr=) 当你按下退格键时它会“吃掉”所有的空格！接近那个但不是很好的方法是输入 ctrl + backspace。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-24T23:49:26.287

默认情况下，当您在 IntelliJ 的 Java 编辑器中按 TAB 时，您会得到 4 个空格而不是单个 TAB 字符。您可以通过 File>Settings>Code Style>Java>Tabs and Indents 更改此行为。只需选中“使用制表符”复选框即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-21T16:37:46.317

按**SHITF+TAB 取消**缩进。

首选项中没有任何内容可以像**SHIFT+TAB一样简单**

# django - 如何在模型表单中显示 ForeignKey 字段

> ID：16002297
> 
> 赞同：0
> 
> 时间：2013-04-14T17:49:18.853
> 
> 标签：django, django-models, django-forms

```
# models.py

class modelA(models.Model):
    a = models.CharField()
    b = models.CharField()

class ModelB(models.Model):
    c = models.CharField()
    d = models.ForeignKey(modelA)

# forms.py

class myForm (ModelForm):
    class Meta: 
       model = ModelB
       fields = ('d')
       widgets = { 'd' : TextInput() } 
```

我想显示一个显示`a`和`b`字段的表单`TextInput`以及如何做？

上面的`forms.py`代码显示`d`为名称而不是其字段..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:03:21.463

看来您正在寻找[内联表单集](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#inline-formsets)：

> 内联表单集是模型表单集之上的一个小型抽象层。这些简化了通过外键处理相关对象的情况。假设你有这两个模型......

对于您的模型：

```
from django.forms.models import inlineformset_factory
ModelBFormSet = inlineformset_factory(ModelB, ModelA)
BInstance = ModelB.objects.get(a=u'some value')
formset = ModelBFormSet(instance=BInstance) 
```

阅读“[在视图中使用内联表单集](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-an-inline-formset-in-a-view)”以了解如何使用工厂。

# jquery - divs无限垂直滑动效果

> ID：16002301
> 
> 赞同：0
> 
> 时间：2013-04-14T17:49:36.693
> 
> 标签：jquery, html, jquery-animate

我想要一个画廊，其中 div 会上下滑动。现在我不确定这是否是正确的方法，因为这显然是糟糕的代码，但是如果有正确的方法，请指出正确的方向..我的小提琴 [在这里](http://jsfiddle.net/deadbysunrise/5m24e/1/)

```
$(function () {
    grid_move();

    function grid_move() {
        $("#one,#two,#three,#four,#five").animate({
            bottom: "-=400"
        },
        3000,
            "linear",

        function () {
            grid_move();
        });
    }
}); 
```

我编写的代码向下滑动，但现在消失了我想做的是，colum1 下的所有 5 个 div 都会重复动画，就像轮播一样，最后一个 div 后面跟着第一个，依此类推，

（顺便说一句，我不喜欢我想自己做的插件 :) 在此先感谢 :)

# java - 正则表达式查找两个选项卡之间的文本（java pattens）

> ID：16002308
> 
> 赞同：0
> 
> 时间：2013-04-14T17:50:29.087
> 
> 标签：java, regex

我有这样的文字

```
500     Robin Stuart    zzzzzzz 
```

我想获得包含在两个选项卡中的文本 Robin STuart。有人可以帮我用正则表达式吗。我想出了`(^.*?)(\t)(^.*?)(\t)`但它没有编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:56:23.137

您不必要地使用`^`第二次`(^.*?)(\t)(^.*?)(\t)`- 可能是复制粘贴错误。采用：

```
String s = "500 Robin Stuart    zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz";
Pattern p = Pattern.compile("(\t)(.*?)(\t)");
Matcher m1 = p.matcher(s);
if (m1.find()){
    System.out.println(m1.group(2));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:15:07.060

尝试

```
 String s = "500\tRobin Stuart\tzzzzzzz";
    s = s.replaceAll(".*\t(.+)\t.*", "$1");
    System.out.println(s); 
```

# qt - QML 对象的动态实例化？

> ID：16002310
> 
> 赞同：6
> 
> 时间：2013-04-14T17:50:44.580
> 
> 标签：qt, qml

我想在 QML 中绘制许多矩形。Rectangulars (x,y) 的坐标将在 C++ 中计算，并且需要传递给 QML。

我试图寻找 ListView 或 Column 或 Row 元素（使用Repeater），但这似乎不能解决问题，因为这些元素的排列方式就像“表格”一样......我面临着关于网络示例的信息不足这种情况。

更具体地说：
1\. 如何将我的 Rectangular 的多个坐标传递给 QML？（什么数据结构）
2\. 我应该使用什么机制来显示它们？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-14T20:34:46.500

你可以简单地：

```
import QtQuick 2.0

Rectangle {
    id: root
    height: 500
    width: 500

    property string sc: 'import QtQuick 2.0; Rectangle {width: 20; height: 20; color: "red"; Component.onCompleted: {x = Math.random() * parent.width; y = Math.random() * parent.height;}}'

    Component.onCompleted: {
        for (var i = 0; i < 10; ++i) Qt.createQmlObject(sc, root, 'obj' + i);
    }
} 
```

此代码将创建指定数量的矩形并将它们随机放置在父矩形上。

如果必须在 C++ 中生成位置，则必须创建自定义 C++ 元素，这是一个基本示例：

```
class Positioner : public QObject
{
    Q_OBJECT
public:
    explicit Positioner(QObject *parent = 0) : QObject(parent) {}

public slots:
    QPointF getPosition() {
        return QPoint(qrand() % 500, qrand() % 500);
    }    
}; 
```

在 main.cpp 中注册它：

```
qmlRegisterType<Positioner>("TestComponent", 1, 0, "Positioner"); 
```

最后使用它，这次我们使用 Positioner 的`getPosition()`C++ 槽：

```
 import QtQuick 2.0
    import TestComponent 1.0

    Rectangle {
        id: root
        height: 500
        width: 500

        Positioner {id: myPositioner}

        property string sc: 'import QtQuick 2.0; Rectangle {width: 20; height: 20; color: "red"; Component.onCompleted: {var pos = myPositioner.getPosition(); x = pos.x; y = pos.y;}}'

        Component.onCompleted: {
            for (var i = 0; i < 10; ++i) Qt.createQmlObject(sc, root, 'obj' + i);
        }
    } 
```

您还可以使用现有的 QML 文件而不是字符串，这更方便一些，因为您可以获得自动完成功能。那将是您的 TestItem 组件，只是为了好玩，它的实例将在单击时自行删除：

```
import QtQuick 2.0

Rectangle {
    width: 100
    height: 100
    color: "black"

    MouseArea {
        anchors.fill: parent
        onClicked: parent.destroy()
    }

    Component.onCompleted: {
        var pos = myPositioner.getPosition()
        x = pos.x
        y = pos.y
    }
} 
```

在您的主 QML 文件中实例化它：

```
var component = Qt.createComponent("TestItem.qml")
component.createObject(root) 
```

如果您不想在 QML 中实例化定位器，而是在 QML 中实例化和使用单个对象，您可以执行以下操作（在 main.cpp 中）：

```
Positioner p;
view.rootContext()->setContextProperty("sPositioner", &p); 
```

并在 QML 中使用：

```
var pos = sPositioner.getPosition() 
```

# c# - 如何获取所有网络适配器的列表？

> ID：16002313
> 
> 赞同：2
> 
> 时间：2013-04-14T17:50:57.080
> 
> 标签：c#

例如，此代码不返回断开连接的 ppp/3G 调制解调器适配器（这就是我所需要的）：

```
foreach (NetworkInterface nic in NetworkInterface.GetAllNetworkInterfaces()) 
{ 
    value = nic.Name; 
} 
```

我在整个网络上搜索了大多数编程语言，但没有找到如何做到这一点。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:02:54.830

我认为它们没有列出，因为当它不活动/未连接时，它实际上不是网络适配器，直到它连接之后。

当不活动时，我认为它可以被认为是系统配置而不是其他任何东西。

我使用手动定义的 PPPoE 连接以及 LTE 数据棒连接和连接到我的家庭服务器的 VPN 在我的机器上尝试了一些简单的测试。所有这些类型的网络适配器都以这种方式运行。

您可能想尝试找到一种列出所有“拨号”样式连接的方法。（不知道自己该怎么做）

**编辑**

拨号连接的位置在文本文件中的多个位置...

Windows 7 上的用户特定路径示例

C:\Users\darren\AppData\Roaming\Microsoft\Network\Connections\Pbk（文件“rasphone.pbk”）

所有用户

C:\Users\All Users\Microsoft\Network\Connections\Pbk（文件“rasphone.pbk”）

如果我在记事本中用笔在所有用户下的系统中，我会在我的 LTE 定义的连接中看到类似的内容......

```
[LTE]
Encoding=1
PBVersion=1
Type=1
AutoLogon=0
...

[PPPoE]
Encoding=1
PBVersion=1
Type=5
AutoLogon=0 
```

它基本上是一个 INI 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-27T21:44:22.420

您可以使用 Win32_NetworkAdapterConfiguration 获取所有网络适配器（即使是隐藏的或未连接的）。确保如果您使用下面的代码，则包括 System.Management。

这是一个快速示例，说明如何将它们放入列表中，然后遍历它以获取它们的名称。

```
public static IEnumerable<ManagementObject> GetAllAdaptors() {
    var tempList = new List<ManagementObject>();

    ManagementObjectCollection moc = 
        new ManagementClass("Win32_NetworkAdapterConfiguration").GetInstances();

    foreach(ManagementObject obj in moc) {
        tempList.Add(obj);
    }

    return tempList;
} 
```

以上返回所有网络适配器的列表。获取名称您所要做的就是遍历列表，如下所示。

```
foreach(ManagementObject obj in GetAllAdapters()) {
    var name = obj["Caption"];
} 
```

这将为您提供所有适配器，隐藏，断开连接，连接。基本上所有将显示在设备管理器中的“显示隐藏”选中。

# objective-c - 在 Mac 上创建 QR 条码

> ID：16002314
> 
> 赞同：1
> 
> 时间：2013-04-14T17:50:58.857
> 
> 标签：objective-c, macos, cocoa, qr-code

我正在为 mac 创建一个应用程序，它需要创建 QR 条形码作为应用程序的一部分。

我找到了适用于 iOS 的[https://github.com/jverkoey/ObjQREncoder](https://github.com/jverkoey/ObjQREncoder)，但无法使其在我的 Mac 应用程序上运行。

在 Mac 上的 Objective-C 中是否有任何用于生成 QR 条码的库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-05-16T14:00:38.263

您可以尝试使用`CIFilter`生成 QRCode ：

```
static func generateQRCode(from string: String) -> NSImage? {
    let data = string.data(using: String.Encoding.ascii)

    if let filter = CIFilter(name: "CIQRCodeGenerator") {
        filter.setValue(data, forKey: "inputMessage")
        let transform = CGAffineTransform(scaleX: 3, y: 3)

        if let output = filter.outputImage?.applying(transform) {
            let rep = NSCIImageRep(ciImage: output)
            let nsImage = NSImage(size: rep.size)
            nsImage.addRepresentation(rep)
            return nsImage
        }
    }
    return nil
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T17:53:56.777

您正在寻找的 QR 和条形码编码和解码库是这个（我在自己的几个项目中使用过）：

[http://github.com/TheLevelUp/ZXingObjC](http://github.com/TheLevelUp/ZXingObjC)

它是 ZXing 图像处理库的完整 Objective-C 端口。当您构建它时，它会*同时*创建iOS 和 MacOS 目标（框架和库）。

# c++ - QAbstractListModel 崩溃

> ID：16002315
> 
> 赞同：3
> 
> 时间：2013-04-14T17:51:00.050
> 
> 标签：c++, qt, list, model, qml

我正在使用 QAbstractListModel 向 QML ListView 公开数据。除此之外使用 QML SectionScroller，它使用 get 和 data 函数。

滚动一段时间后，出现崩溃。回溯是：

```
Program received signal SIGILL, Illegal instruction.
0x0000cdcc in QBasicAtomicInt::ref (
    this=0x35)
    at /usr/include/QtCore/qatomic_armv6.h:119
119 /usr/include/QtCore/qatomic_armv6.h: No such file or directory.
    in /usr/include/QtCore/qatomic_armv6.h
(gdb) bt
#0  0x0000cdcc in QBasicAtomicInt::ref (
    this=0x35)
    at /usr/include/QtCore/qatomic_armv6.h:119
#1  0x0000f4e8 in QString (
    this=0xbebf1a5c, other=...)
    at /usr/include/QtCore/qstring.h:729
#2  [address] in IrregularVerb::getForm0
    (this=0x92e428) at IrregularVerb.h:16
#3  0x0000e29c in IrregularListWrapper::data (this=0x92dd20, index=..., role=33)
    at IrregularListWrapper.cpp:37
#4  0x4010e9c6 in ?? ()
   from /usr/lib/libQtDeclarative.so.4
#5  0x4010e9c6 in ?? ()
   from /usr/lib/libQtDeclarative.so.4
Backtrace stopped: previous frame identical to this frame (corrupt stack?) 
```

在其他设备上（第一个是 N900，第二个是 N950）回溯是类似的。它是 SIGSEGV 而不是 SIGILL，但除此之外，回溯是相同的。我注意到曾经有过一些字段在崩溃时变得空白的情况。（使用getForm0和getForm1的）

当我向返回的值添加额外的赋值时，在赋值时发生了崩溃。

一些重要的代码：

元素：

```
class IrregularVerb : public QObject
{
    Q_OBJECT
    Q_PROPERTY(QString form0 READ getForm0 CONSTANT)
    Q_PROPERTY(QString form1 READ getForm1 CONSTANT)
    Q_PROPERTY(QString form2 READ getForm2 CONSTANT)
public:
    QString forms[3];
    QString getForm0() const { return forms[0]; }
    QString getForm1() const { return forms[1]; }
    QString getForm2() const { return forms[2]; }
    IrregularVerb(QString a, QString b, QString c) { forms[0] = a; forms[1] = b; forms[2] = c; }
}; 
```

该模型：

```
class IrregularListWrapper : public QAbstractListModel
{
    Q_OBJECT
    Q_PROPERTY(QString langName READ getLangName NOTIFY langChanged)
    Q_PROPERTY(int count READ rowCount NOTIFY langChanged)
    Q_ENUMS(Language)
public:

    Q_INVOKABLE int rowCount(const QModelIndex& = QModelIndex()) const { return db->count(); }
    Q_INVOKABLE QObject* get(int index) const {return db->at(index);}
    QVariant data(const QModelIndex &index, int role) const;

    enum Language
    {
        English = 0,
        German = 1
    };

    enum IrregularVerbRoles
    {
        Form0Role = Qt::UserRole + 1,
        Form1Role,
        Form2Role
    };

    IrregularListWrapper();

    QString getLangName() const { return langName; }
    Q_INVOKABLE void changeLang(Language l) { beginResetModel(); db = 0; setLang(l); endResetModel(); }

    static QMap<Language, QString> plugins;

signals:
    void langChanged();
protected:
    void setLang(Language);
    QString langName;
    AbstractIrregularList * db;

};

QVariant IrregularListWrapper::data(const QModelIndex &index, int role) const
{
    if (!index.isValid()) return QVariant();

    int rowno = index.row();

    qDebug() << "Row is " << index.row() << flush;

    const IrregularVerb* verb = db->at(index.row());

    switch (role)
    {
    case Form0Role:
        return verb->getForm0();
        break;
    case Form1Role:
        return verb->getForm1();
        break;
    case Form2Role:
        return verb->getForm2();
        break;
    }
    return QVariant();
} 
```

抽象不规则列表：

```
class AbstractIrregularList : public QObject, public QList<IrregularVerb*>
{
    Q_OBJECT
public:
    void IV(const char* a, const char* b, const char* c) { append (new IrregularVerb(a, b, c)); }
    void IV(const char *a, const char *b) { IV(a, b, b); }
    void IV(const char *a) { IV(a,a,a); }
};

Q_DECLARE_INTERFACE(AbstractIrregularList, "com.marmistrz.Plugin.AbstractIrregularList/1.0"); 
```

你知道为什么会这样吗？谢谢！

/edit1：感谢您的回复。这样可以吗？

```
Q_INVOKABLE QObject* get(int index)
{
    QObject* item = db->at(index);
    QDeclarativeEngine::setObjectOwnership(item, QDeclarativeEngine::CppOwnership);
    item->setParent(this); // do I need to do this? An QList<QObject*>-child would clean it, right? 
    return item;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T20:20:51.190

看起来你`QAbstractListModel`在 QML 端使用了一个“经典”问题。您的`IrregularListWrapper`has`get`方法返回具有 JS 所有权的对象（这种所有权是`Q_INVOKABLE`方法的默认值），它们将在 QML 端使用 JS 引擎进行垃圾收集。为了防止这种情况，您应该在将对象返回给 QML 之前更改对象的所有权[`QDeclarativeEngine::setObjectOwnership`](http://qt-project.org/doc/qt-4.8/qdeclarativeengine.html#setObjectOwnership)。请参阅我的答案中的[示例](https://stackoverflow.com/a/14424517/1059494)。

# php - 如何删除 MySQL 表中的第 1-12 行

> ID：16002316
> 
> 赞同：-2
> 
> 时间：2013-04-14T17:51:01.393
> 
> 标签：php, sql, delete-row

我该怎么做呢？我已经有一个带有自动增量和主键的 id 字段。但是，是的，我需要一个执行此操作的脚本。我到处查看它只是向我展示了如何删除单行但从不按顺序删除多行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:53:29.963

您需要`LIMIT`删除 12 行，您需要对其进行设置，以便将其删除`WHERE`到应开始`id`的`>=`id。

如果我想`id`从表中删除 12 行，从（包括）4开始`foo`：

```
DELETE FROM `foo` WHERE `id` >= 4 ORDER BY `id` ASC LIMIT 12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:52:44.110

您可以定义任何您喜欢删除数据的顺序。并且`limit`您可以限制要删除的记录数

```
delete from your_table
order by id asc
limit 12 
```

# java - 从java导入django模块

> ID：16002320
> 
> 赞同：1
> 
> 时间：2013-04-14T17:51:28.483
> 
> 标签：java, python, django, jython

我正在尝试使用 Java 从我的 django 项目中调用一些类。这是我的代码：

```
PythonInterpreter interpreter = new PythonInterpreter();

        PySystemState sys = Py.getSystemState(); 

        sys.path.append(new PyString("/Library/Python/2.7/site-packages/"));
        sys.path.append(new PyString("/myApps/categoryApp/review/"));

        interpreter.exec("from products.models import Category"); 
```

但我得到了这个错误：

```
Exception in thread "main" Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/myApps/categoryApp/review/products/models.py", line 4, in <module>
    from django.core.exceptions import ValidationError
  File "/Library/Python/2.7/site-packages/django/core/exceptions.py", line 4, in <module>
    from functools import reduce
ImportError: cannot import name reduce 
```

有什么办法解决吗？我相信进口有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:08:42.060

Jython 的标准版本与 Python 2.5 兼容。如[有关在 Jython 上运行 Django 的文档](https://docs.djangoproject.com/en/1.5/howto/jython/)中所述，Django 1.5 仅兼容 Python 2.6 及更高版本。您将需要运行 2.7 beta 版本的 Jython，或较旧的 1.4 版本的 Django。

# c# - 嵌入外部 XML 文件

> ID：16002322
> 
> 赞同：1
> 
> 时间：2013-04-14T17:51:42.740
> 
> 标签：c#, xml, wpf, file, relative-path

是的，所以我有一个程序可以从外部 XML 文件中读取学生的详细信息。目前它设置为完整路径，例如：`C:\Users\LittleJohnny\Students.XML`. 我正在使这个程序独立（将所有视频设置为，`Always Copy`以便它们可以在不同的机器上正常运行），我想知道我是否可以将 XML 文件也放在一个相对位置，这样它就会在不同的机器上工作。我确信有一种简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:07:35.150

您可以使用像这样的特殊文件夹路径：“Environment.SpecialFolder.CommonApplicationData”。它允许您设置相对于运行应用程序的当前系统的文件夹路径。

[那里有](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)更多信息

在代码中，这将是：

```
path = Environment.SpecialFolder.MyDocuments + @"\Students.xml"; 
```

例如，如果您想将其存储在当前用户的文档中。

# javascript - 在响应式设计中为“顶部”和“底部”提供与“右”和“左”的边距相同的边距

> ID：16002325
> 
> 赞同：1
> 
> 时间：2013-04-14T17:51:49.373
> 
> 标签：javascript, jquery, html, css

我有一个具有动态宽度的容器 div，它会根据屏幕分辨率而变化。在这样的 div 中，我有另一个具有固定高度和宽度的元素。我可以给这样的元素 a`margin: 0 auto;`并在中间水平对齐它，但是这个技巧不能让它在中间垂直对齐，因为容器 div 的高度保持不变（它不是固定高度，它取决于 div 内的内容）。因此，当用户更改分辨率时，我想以某种方式应用与左右、顶部和底部相同的边距。因此，各方应该有相同的动态余量？

拥有基于 css 的解决方案会很好，但如果这不可能，jQuery 也很好。

基本上我需要的是计算右侧或左侧的边距并将这些值应用于顶部和底部边距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:56:46.800

我认为您在这里不需要 JavaScipt/jQuery 解决方案。你可以只用 CSS 来做到这一点。

查看`vertical-align`物业。您需要查看它的注意事项和要求，因为它要求元素是`inline`/ `inline-block`。

你会想要的是这样的：

```
#centered-element {
    display: inline-block;
    height: 300px; //your fixed height
    width: 250px; // your fixed width
    margin-left: auto;
    margin-right: auto;
    vertical-align: middle;
} 
```

看看[这篇文章](http://css-tricks.com/what-is-vertical-align/)。它很好地描述了该`vertical-align`属性、其用途和局限性。

**更新**

根据您的评论，如果您想（从字面上）应用左边距或右边距作为上边距，您可以使用以下 jQuery 执行此操作：

```
$(document).ready(function() {
    var $ele = $("#centered-element");
    var marginL = $ele.css("margin-left");
    $ele.css({
        "margin-top": marginL,
        "margin-bottom": marginL
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:19:30.863

这使容器 div 以恒定的边距浮动。

```
<div>Content</div>

div {
    background: #282;
    width:90%;
    height:90%;
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
    margin:auto;
} 
```

[http://jsfiddle.net/djwave28/tATZU/1/](http://jsfiddle.net/djwave28/tATZU/1/)

除了引用内容，你可以把它放在容器里面。超过高度时，可以应用 CSS 中的滚动功能。如果不是，窗口的滚动功能将接管。

[http://jsfiddle.net/djwave28/tATZU/2/](http://jsfiddle.net/djwave28/tATZU/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:54:37.440

如果你有固定的内部元素的宽度和高度，你可以使用这个小技巧

```
#outside {
    position: relative;
}
#inside {
    position: absolute;
    top: 50%;
    left: 50%;
    height: 500px;
    width: 500px;
    margin-top: -250px;
    margin-left: -250px;
} 
```

# java - 如何在 monodroid 项目中使用 .jar？

> ID：16002329
> 
> 赞同：0
> 
> 时间：2013-04-14T17:52:21.383
> 
> 标签：java, binding, jar, xamarin.android

我想在我的 monodroid 项目中使用百度地图 Android SDK。这个 SDK 下载地址是 [http://developer.baidu.com/map/static/doc/BaiduMap_AndroidSDK_v2.1.0_All.zip](http://developer.baidu.com/map/static/doc/BaiduMap_AndroidSDK_v2.1.0_All.zip)
我按照[Xamarin 文档](http://docs.xamarin.com/guides/android/advanced_topics/java_integration_overview/binding_a_java_library_%28.jar%29)中描述的说明，创建一个绑定项目，按照文档中的这些步骤，在构建绑定项目时，我收到了消息：

```
1>------ 已启动全部重新生成: 项目: JuHuiBao.Binding, 配置: Debug Any CPU ------
1>BINDINGSGENERATOR : warning BG8C00: For type System.Byte, base interface System.IComparable`1<System.Byte> does not exist.
1>BINDINGSGENERATOR : warning BG8400: unexpected field type com.baidu.location.BDLocation.a
1>BINDINGSGENERATOR : warning BG8400: unexpected field type com.baidu.location.i
1>BINDINGSGENERATOR : warning BG8102: Class Com.Baidu.Mapapi.Map.Overlay has unknown base type com.baidu.platform.comapi.map.y
1>BINDINGSGENERATOR : warning BG8103: Class Com.Baidu.Mapapi.Map.GraphicsOverlay has invalid base type com.baidu.mapapi.map.Overlay
1>BINDINGSGENERATOR : warning BG8103: Class Com.Baidu.Mapapi.Map.ItemizedOverlay has invalid base type com.baidu.mapapi.map.Overlay
1>BINDINGSGENERATOR : warning BG8701: Invalid return type java.util.List<com.baidu.mapapi.map.Overlay>
1>BINDINGSGENERATOR : warning BG8103: Class Com.Baidu.Mapapi.Map.MyLocationOverlay has invalid base type com.baidu.mapapi.map.Overlay
1>BINDINGSGENERATOR : warning BG8103: Class Com.Baidu.Mapapi.Map.PoiOverlay has invalid base type com.baidu.mapapi.map.Overlay
1>BINDINGSGENERATOR : warning BG8103: Class Com.Baidu.Mapapi.Map.PopupOverlay has invalid base type com.baidu.mapapi.map.Overlay
1>BINDINGSGENERATOR : warning BG8103: Class Com.Baidu.Mapapi.Map.RouteOverlay has invalid base type com.baidu.mapapi.map.ItemizedOverlay
1>BINDINGSGENERATOR : warning BG8103: Class Com.Baidu.Mapapi.Map.TransitOverlay has invalid base type com.baidu.mapapi.map.ItemizedOverlay
1>BINDINGSGENERATOR : warning BG8C00: For type Com.Baidu.Mapapi.Search.PlaceCaterActivity, base interface com.baidu.mapapi.search.a.a does not exist.
1>BINDINGSGENERATOR : warning BG8102: Class Com.Baidu.Platform.Comapi.Map.A has unknown base type com.baidu.platform.comapi.map.i
1>BINDINGSGENERATOR : warning BG8102: Class Com.Baidu.Platform.Comapi.Map.B has unknown base type com.baidu.platform.comapi.map.i
1>BINDINGSGENERATOR : warning BG8102: Class Com.Baidu.Platform.Comapi.Map.C has unknown base type com.baidu.platform.comapi.map.i
1>BINDINGSGENERATOR : warning BG8102: Class Com.Baidu.Platform.Comapi.Map.D has unknown base type com.baidu.platform.comapi.map.i
1>BINDINGSGENERATOR : warning BG8102: Class Com.Baidu.Platform.Comapi.Map.F has unknown base type com.baidu.platform.comapi.map.i
1>BINDINGSGENERATOR : warning BG8800: Unknown parameter type com.baidu.platform.comapi.map.z
1>BINDINGSGENERATOR : warning BG8800: Unknown parameter type com.baidu.platform.comapi.map.u
1>BINDINGSGENERATOR : warning BG8800: Unknown parameter type com.baidu.platform.comapi.map.w
1>BINDINGSGENERATOR : warning BG8800: Unknown parameter type com.baidu.platform.comapi.map.w
1>BINDINGSGENERATOR : warning BG8700: Unknown return type com.baidu.platform.comjni.map.basemap.a
1>BINDINGSGENERATOR : warning BG8700: Unknown return type com.baidu.platform.comapi.map.w
1>BINDINGSGENERATOR : warning BG8800: Unknown parameter type com.baidu.platform.comapi.map.u
1>BINDINGSGENERATOR : warning BG8900: Type com.baidu.platform.comjni.permissioncheck.PermissionCheck: FxDG naming violation: Type name 'PermissionCheck' matches namespace part 'Permissioncheck'.
1>BINDINGSGENERATOR : warning BG8700: Unknown return type com.baidu.vi.i
1>BINDINGSGENERATOR : warning BG8C00: For type Com.Baidu.Mapapi.Search.PlaceCaterActivity, base interface com.baidu.mapapi.search.a.a does not exist.
1>BINDINGSGENERATOR : warning BG8900: Type com.baidu.platform.comjni.permissioncheck.PermissionCheck: FxDG naming violation: Type name 'PermissionCheck' matches namespace part 'Permissioncheck'.
1>BINDINGSGENERATOR : warning BG8401: Skipping Com.Baidu.Mapapi.Search.MKSearch.PoiDetailSearch, due to a duplicate field, method or nested type name
1>BINDINGSGENERATOR : warning BG8401: Skipping Com.Baidu.Platform.Comapi.Map.MapController.A, due to a duplicate field, method or nested type name
1>BINDINGSGENERATOR : warning BG8401: Skipping Com.Baidu.Platform.Comapi.Map.MapController.B, due to a duplicate field, method or nested type name
1>BINDINGSGENERATOR : warning BG8401: Skipping Com.Baidu.Platform.Comapi.Map.MapController.C, due to a duplicate field, method or nested type name
1>BINDINGSGENERATOR : warning BG8401: Skipping Com.Baidu.Platform.Comapi.Map.MapController.D, due to a duplicate field, method or nested type name
1>BINDINGSGENERATOR : warning BG8401: Skipping Com.Baidu.Platform.Comapi.Map.MapController.E, due to a duplicate field, method or nested type name
1>BINDINGSGENERATOR : warning BG8401: Skipping Com.Baidu.Platform.Comapi.Map.MapController.F, due to a duplicate field, method or nested type name
1>BINDINGSGENERATOR : warning BG8401: Skipping Com.Baidu.Platform.Comapi.Map.MapController.G, due to a duplicate field, method or nested type name
1>BINDINGSGENERATOR : warning BG8401: Skipping Com.Baidu.Platform.Comapi.Map.MapController.H, due to a duplicate field, method or nested type name
1>BINDINGSGENERATOR : warning BG8401: Skipping Com.Baidu.Platform.Comapi.Map.MapController.I, due to a duplicate field, method or nested type name
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(23,17,23,18): warning CS0628: “Com.Baidu.Location.LocationClientOption.A”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(39,20,39,24): warning CS0628: “Com.Baidu.Location.LocationClientOption.Byte”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(58,18,58,22): warning CS0628: “Com.Baidu.Location.LocationClientOption.Case”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(74,20,74,24): warning CS0628: “Com.Baidu.Location.LocationClientOption.Char”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(93,19,93,21): warning CS0628: “Com.Baidu.Location.LocationClientOption.Do”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(109,18,109,22): warning CS0628: “Com.Baidu.Location.LocationClientOption.Else”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(125,18,125,21): warning CS0628: “Com.Baidu.Location.LocationClientOption.For”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(141,17,141,21): warning CS0628: “Com.Baidu.Location.LocationClientOption.Goto”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(157,18,157,20): warning CS0628: “Com.Baidu.Location.LocationClientOption.If”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(173,17,173,20): warning CS0628: “Com.Baidu.Location.LocationClientOption.Int”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(189,17,189,21): warning CS0628: “Com.Baidu.Location.LocationClientOption.Long”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(205,20,205,23): warning CS0628: “Com.Baidu.Location.LocationClientOption.New”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(224,20,224,23): warning CS0628: “Com.Baidu.Location.LocationClientOption.Try”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Location.LocationClientOption.cs(243,18,243,22): warning CS0628: “Com.Baidu.Location.LocationClientOption.Void”: 在密封类中声明了新的保护成员
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Mapapi.Map.MapView.cs(11,24,11,36): warning CS0108: “Com.Baidu.Mapapi.Map.MapView.LayoutParams”隐藏了继承的成员“Android.Views.ViewGroup.LayoutParams”。如果是有意隐藏，请使用关键字 new。
1>J:\Development\JuHuiBao\JuHuiBao.Binding\obj\Debug\generated\src\Com.Baidu.Mapapi.Map.MapView.cs(784,36,784,55): warning CS0618: “Com.Baidu.Mapapi.Map.MapView.ZoomControls”已过时:“deprecated”
1>  JuHuiBao.Binding -> J:\Development\JuHuiBao\JuHuiBao.Binding\bin\Debug\JuHuiBao.Binding.dll
========== 全部重新生成: 成功 1 个，失败 0 个，跳过 0 个 ========== 
```

构建的动作成功，有很多警告，有些类无法创建，`JuHuiBao.Binding.dll`找不到。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:06:46.603

您将不得不编辑该`Metadata.xml`文件。截至目前，设置绑定非常困难。一个较新版本的 android 单声道应该公开一些方法，`java`这些方法可能会解决您的一些问题。[我唯一可以推荐的另一件事是遵循github](https://github.com/xamarin/monodroid-samples)上的 Xamarin 示例中提供的一些示例。他们有很多使用绑定的示例，可以帮助您弄清楚如何编辑该`Metadata.xml`文件。

# jquery - 使用 JQuery 调用 Web 服务时遇到问题

> ID：16002332
> 
> 赞同：0
> 
> 时间：2013-04-14T17:52:31.573
> 
> 标签：jquery, web-services, cors

我无法从 JQuery 调用 Web 服务。

我正在访问的网址是：`http://www.deeptraining.com/webservices/weather.asmx?WSDL`其中有一个名为`GetWeather`. 我正在使用 Firefox，我收到以下消息：

> Firefox 控制台：[19:43:29.849] 选项 [http://www.deeptraining.com/webservices/weather.asmx?op=GetWeather](http://www.deeptraining.com/webservices/weather.asmx?op=GetWeather) [HTTP/1.1 200 OK 371ms]
> 
> 警报：未定义的解析器错误

如果获取代码**200**，表示请求发送成功？我究竟做错了什么？提出请求的正确方法是什么？谢谢！！

这是我的代码：

```
<html>
    <head>
        <title>Calling Web Service from jQuery</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
        <script type="text/javascript">
        $(document).ready(function () {
        $("#btnCallWebService").click(function (event) {
            var wsUrl = "http://www.deeptraining.com/webservices/weather.asmx?op=GetWeather";

            var soapRequest ='<?xml version="1.0" encoding="utf-8"?> \
                                <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" \
                                    xmlns:xsd="http://www.w3.org/2001/XMLSchema" \
                                    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
                                  <soap:Body> \
                                    <GetWeather xmlns="http://litwinconsulting.com/webservices/"> \
                                      <City>new york</City> \
                                    </GetWeather> \
                                  </soap:Body> \
                                </soap:Envelope>';

            $.ajax({
                type: "POST",
                url: wsUrl,
                contentType: "text/xml",
                dataType: "xml",
                data: soapRequest,
                success: processSuccess,
                error: processError
            });

        });
    });
    function processSuccess(data, status, req) {
        if (status == "success")
            alert('SUCCESS');
    }

    function processError(data, status, req) {
        alert(req.responseText + " " + status);
    }
    </script>
    </head>
    <body>
        <h3>
            Calling Web Services with jQuery/AJAX
        </h3>
        <input id="btnCallWebService" value="Call web service" type="button" />
        <div id="response" />
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:42:27.317

(Answer below assumes, as it seems, you are not deploying this HTML file in the [http://www.deeptraining.com/](http://www.deeptraining.com/).)

**Your code is actually attempting to make a CORS request, not an ordinary POST.**

Modern browsers will only allow Ajax calls to pages in the **same domain** as the source HTML page.

In other words, whenever the HTML page that tries to make an Ajax request is not on the same domain as the target URL (in your case, `www.deeptraining.com`), the browser won't make the call (as you'd expect). Instead, it will try to make a CORS request.

**CORS request? !@#$¨& is that?**

[Wikipedia says](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing): **Cross-origin resource sharing (CORS)** is a mechanism that allows a web page to make `XMLHttpRequests` to another domain. Such "cross-domain" requests would otherwise be forbidden by web browsers, due to the **[same origin security policy](http://en.wikipedia.org/wiki/Same_origin_policy)**.

To put it shortly, to perform a CORS request, your browser:

*   Will first send an `OPTION` request to the target URL

    *   Your Firefox told you that:
        *   *Firefox console: [19:43:29.849] **OPTIONS** [http://www.deeptraining.com/webservices/weather.asmx?op=GetWeather](http://www.deeptraining.com/webservices/weather.asmx?op=GetWeather) [HTTP/1.1 200 OK 371ms]*
        *   **The response code is `200` because it is for the `OPTIONS` call, not the `POST`**.
*   And then **only if** the server response to that `OPTION` contains the [adequate headers](http://enable-cors.org/server.html) to allow the CORS request, the browse will perform the call (almost exactly the way it would if the HTML page was at the same domain).

    *   If the expected headers don't come, the browser simply gives up (like it did to you).

**How to solve it?**

Unfortunately, there is nothing you can do about it other than deploying that HTML file in a server located at [http://www.deeptraining.com/](http://www.deeptraining.com/).

**How about JSONP?**

To use JSONP in this scenario, you'd have to change the service to return information via GET, as you can't POST using JSONP. ([This answer](https://stackoverflow.com/questions/2699277/post-data-to-jsonp) points to some hacks, but that's going too far, I think.)

**Oh man, no workarounds, then?**

There is no clean workaround, really. You could set up an application (at the same domain of your HTML file) that forwards every TCP/IP request to [http://www.deeptraining.com/](http://www.deeptraining.com/), an then fool your browser. Or you could set up a mirror of that web service in you domain. You see, it all becomes too dirty from this point on, so good luck.

# json - 简单的 Spring MVC 类抛出 HTTP 状态 406

> ID：16002336
> 
> 赞同：0
> 
> 时间：2013-04-14T17:53:05.473
> 
> 标签：json, spring, spring-mvc

我有以下简单的 Spring MVC 测试方法来使用 ResponseEntity 进行测试。

```
@RequestMapping(value = "/", method = RequestMethod.GET, produces= MediaType.APPLICATION_JSON_VALUE)
public ResponseEntity<Map<String, String>>  home(Locale locale, Model model) {
    Map<String,String> returnMap = new HashMap<String,String>(2);
    returnMap.put("lang1", "Java");
    returnMap.put("lang2", "C++");
    ResponseEntity<Map<String, String>> respEntity = new ResponseEntity<Map<String,String>>(returnMap,  HttpStatus.OK);
    return  respEntity;
} 
```

创建了 ResponseEntity 并且在 Eclipse 调试器中，我可以看到 ResponseEntity 对象的正文、标题和状态代码都是正确的，但是在页面中我收到以下错误：

```
The resource identified by this request is only capable of generating 
responses with characteristics not acceptable according to the request 
"accept" headers (). 
```

如果有人能告诉我我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:04:29.207

Remove 生成​​ JSON，或者将 responsebody 注释添加到您的返回类型并更改返回类型；将 ResponseEntity 作为返回类型并将方法注释为生成 JSON 是行不通的。非此即彼。

[文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-ann-responsebody)

其实想一想，spring/jackson其实可能会自动把responsentity转成json。但无论哪种方式，您都需要 responsebody 来生成 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:29:31.783

您是否尝试过使用以下 RequestMapping：

```
@RequestMapping(value = "/", method = RequestMethod.GET, produces = "application/json") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T21:41:04.600

当我遇到此问题时，是因为我的`mvc-config.xml`文件中缺少以下内容：

```
<mvc:annotation-driven /> 
```

# ruby-on-rails - 解释 Rails 中的 NoSuchMethod 错误

> ID：16002337
> 
> 赞同：0
> 
> 时间：2013-04-14T17:53:13.960
> 
> 标签：ruby-on-rails, ruby

单击链接时，我的 Rails 应用程序中出现以下错误

```
<%= link_to 'Add New Slinky', new_admin_slinky_path %> 
```

这是错误：

```
NoMethodError in Admin/slinkys#new
Showing /Users/Me/Folder/Folder/app/views/admin/slinkys/new.html.erb where line #7 raised:

undefined method `model_name' for NilClass:Class
Extracted source (around line #7):

4: <h5>Here is a header</h5>
5: <li>Here is a bullet</li>
6: <br>
7: <%= simple_form_for @slinky_file do |f| %>
8: <%= f.file_field :file %>
9: <br>
10: <%= f.submit "Upload" %> 
```

这个错误是什么意思？第 7 行有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:59:05.517

这意味着@slinky_file == nil，你必须在使用前设置它

更新：

在控制器中

```
@slinky_file = SlinkyFile.find(params[:slinky_file]) 
```

或者，如果你想初始化新的模型实例

```
@slinky_file = SlinkyFile.new 
```

# php - mysql_select_db() 期望参数 2 是资源，给定对象

> ID：16002342
> 
> 赞同：7
> 
> 时间：2013-04-14T17:53:47.247
> 
> 标签：php, mysql

我是使用 PHP 的新手。我做了一些简单的事情来连接到 MySQL 并选择一个数据库：

```
$conn = mysqli_connect($db_host, $db_admin, $db_pass) or die(mysql_error());
// these variables are previously declared and initialized 

$selected_db = mysql_select_db($db_name, $conn) or die(mysql_error()); 
```

当我测试它时，我得到了一个成功建立的连接和以下警告：

```
mysql_select_db() expects parameter 2 to be resource, object given 
```

为什么会这样？我该如何解决？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-14T17:55:26.743

您同时使用两者`mysqli`，`mysql`只需更改

`mysql_select_db()`

和

```
mysqli_select_db 
```

**参考** [http://php.net/manual/en/mysqli.select-db.php](http://php.net/manual/en/mysqli.select-db.php)

`updated`

当您使用时，`mysql_select_db`您应该使用`mysql`api，因此您必须使用 mysql sintax `mysql_connect` [Reference扩展与数据库的连接](http://www.php.net/manual/en/function.mysql-connect.php)

Mysql 现在已被弃用，因此使用`mysqli`或`PDO`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-06T21:16:01.857

除了始终如一地使用 mysqli_* （如[Fabio 的回答](https://stackoverflow.com/a/16002365/899126)中所述），还有一个额外的问题（和建议）：

*   而参数中的顺序`mysql_select_database`是数据库名称、连接，参数的顺序[`mysqli_select_db`](http://php.net/manual/en/mysqli.select-db.php)是连接、数据库名称。

    ```
    mysqli_select_db($conn, $db_name); 
    ```

*   作为建议，[`mysqli_connect`](http://php.net/manual/en/function.mysqli-connect.php)包括一个可选的第四个参数来连接到特定的数据库。这将使您`mysql_select_db`完全避免调用。

    ```
    $conn = mysqli_connect($db_host, $db_admin, $db_pass, $db_name)
        or die(mysqli_connect_error()); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-22T06:02:33.180

您必须更改`mysql_select_db`为`mysqli_select_db`所指出的，`Fabio`但您会收到错误消息

```
mysqli_select_db() expects parameter 1 to be mysqli, string given 
```

对于遇到这种情况的人，颠倒参数的顺序，就像在这种情况下给

```
$selected_db = mysqli_select_db($conn, $db_name) 
```

# javascript - 简单的 require-jquery 测试未加载

> ID：16002346
> 
> 赞同：0
> 
> 时间：2013-04-14T17:54:10.930
> 
> 标签：javascript, jquery, requirejs

为什么这个简单的 require-jquery 测试不会显示警报？

html:

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>test</title>
</head>
<body>

stuff.

<script data-main="js/main" src="js/require-jquery.js"></script>

</body>
</html> 
```

js/main.js：

```
require(['jquery'], function($) {
    $(function() {
        alert("hi");
    });
}); 
```

没有错误或任何东西，也没有警报。我也尝试将脚本标签放在头部，但没有任何区别。:(

js 文件存在并且可以从浏览器直接访问。

**编辑：** 哎呀！这似乎是一个缓存问题，其中加载了旧的缓存（非工作）版本的 js。在快速重新加载页面几次后，它似乎工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:58:54.973

是否尝试过在回调中简单地调用警报？喜欢：

```
require(['jquery'], function($) {
    alert("hi");
}); 
```

# jquery - 同一类jquery的多种形式

> ID：16002349
> 
> 赞同：0
> 
> 时间：2013-04-14T17:54:20.417
> 
> 标签：jquery

我得到了多个表单，通过使用一些 jquery 代码来刷新单个 div，如下所示。它指的是表单的类，因此所有表单的代码都是相同的。问题是，它只接受最后一个表单的输入并将其发送到 div，无论单击什么表单。他们应该发送所有不同的信息，具体取决于单击的表单按钮。

```
 $(document).ready(function(){
    $(".formlistmenu").validate({

    submitHandler: function(form) {
        // do other stuff for a valid form
       $.post('listmenu.php', $(".formlistmenu").serialize(), function(data) {
          $('#select').html(data);
        });
      }
    });
 });

 <form name="myform1" class="formlistmenu" action="" method = "post"> 
 <input type="hidden" name="selectstuff" value ="resources">
 <input type="image" SRC="resources.gif" title="resources">
 </form>

 <form name="myform2" class="formlistmenu" action="" method = "post">
 <input type="hidden" name="selectstuff" value ="items">
 <input type="image" SRC="resources.gif" title="resources">
 </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:55:57.953

尝试这个

```
$(".formlistmenu").each(function(){
       $(this).validate({
     submitHandler: function(form) {
        // do other stuff for a valid form
       $.post('listmenu.php', $(this).serialize(), function(data) {
          $('#select').html(data);
        });
      }
    });
}); 
```

# android - 几个 android-support-v4，我该如何删除它们？

> ID：16002351
> 
> 赞同：2
> 
> 时间：2013-04-14T17:54:28.113
> 
> 标签：android, actionbarsherlock, pull-to-refresh

我对 Android 很陌生

我在我的项目中使用了 2 个库：

1.  ActionBarSherlock - [http://actionbarsherlock.com/](http://actionbarsherlock.com/)

2.  下拉刷新 - [https://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)

在成功使用 ActionBarSherlock 并成功导入（使用随附的 android-support-v4.jar）后，我想将 Pull-to-Refresh 添加到我的项目中。然后我去我的项目属性添加pull-to-refresh 库，但遇到了一个问题 - “Jar 不匹配！修复您的依赖项。” 我尝试了不同的方法来尝试解决问题，例如从 ActionBarSherlock 和 pull-to-refresh 库中删除 android-support-v4 并将它们重新添加到我的项目属性中 + 从 extras 文件夹中添加 android-support-v4 ADT..

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:05:10.013

> 难道我做错了什么？

有点。

您的情况的要求是：

1.  每个 Android 项目都需要直接访问 JAR，或者依赖于具有 JAR 的 Android 库项目，并且

2.  对于任何给定的 JAR 文件名，JAR 必须是*相同的 JAR（相同的大小，相同的 MD5 哈希）*

对于您的方案，最简单的解决方案是将最新的 JAR 复制到*两个*库项目中，并且在您的主应用程序项目中不包含 JAR。

# html - iPad 上的应用程序缓存不会缓存网站数据或页面

> ID：16002355
> 
> 赞同：2
> 
> 时间：2013-04-14T17:54:54.410
> 
> 标签：html, ipad, .htaccess, caching, manifest

我正在运行一个 DHTML 页面并希望缓存引用的 HTML、PHP 文件和 IMAGE 文件。

我在 WWW.sitename.COM/sub-dir/ 中有以下所有文件

.htaccess

```
AddType application/x-httpd-php .html
AddType application/x-httpd-php .htm
AddType text/cache-manifest .manifest
AddHandler server-parsed .html
AddHandler application/x-httpd-php .html .htm 
```

缓存清单

```
CACHE MANIFEST

# Cache manifest version 0.0.00002

NETWORK:

CACHE:

http://WWW.sitename.COM/sub-dir/index.html
http://WWW.sitename.COM/sub-dir/this.php
http://WWW.sitename.COM/sub-dir/images/first.png
http://WWW.sitename.COM/sub-dir/images/second.png

FALLBACK: 
```

THIS.PHP 文件中的 HTML 清单参考...

```
<html manifest="http://WWW.sitename.COM/sub-dir/cache.manifest"> 
```

检测缓存活动的脚本

```
<script type="text/javascript">
var cacheStatusValues = [];
cacheStatusValues[0] = 'uncached';
cacheStatusValues[1] = 'idle';
cacheStatusValues[2] = 'checking';
cacheStatusValues[3] = 'downloading';
cacheStatusValues[4] = 'updateready';
cacheStatusValues[5] = 'obsolete';

var cache = window.applicationCache;
cache.addEventListener('cached', logEvent, false);
cache.addEventListener('checking', logEvent, false);
cache.addEventListener('downloading', logEvent, false);
cache.addEventListener('error', logEvent, false);
cache.addEventListener('noupdate', logEvent, false);
cache.addEventListener('obsolete', logEvent, false);
cache.addEventListener('progress', logEvent, false);
cache.addEventListener('updateready', logEvent, false);

function logEvent(e) 
{
var online, status, type, message;
online = (navigator.onLine) ? 'yes' : 'no';
status = cacheStatusValues[cache.status];
type = e.type;
message = 'online: ' + online;
message+= ', event: ' + type;
message+= ', status: ' + status;
if (type == 'error' && navigator.onLine) 
{
    message+= ' (probably a syntax error in cache.manifest)';
}
console.log(message);
}

window.applicationCache.addEventListener(
'updateready',
function(){
    window.applicationCache.swapCache();
    console.log('swap cache has been called');
},
false
);

setInterval(function(){cache.update()}, 10000);

</script> 
```

控制台报告没有缓存任何内容。

任何和所有的帮助都非常感激。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T14:14:24.490

经过大量研究，答案是......

1.  请勿包含包含

    html manifest="cache.manifest"

    cache.manifest 文件中的标记。

2.  确保 cache.manifest 文件仅使用相对 URL，而不是 ABSOLUTE。

3.  确保您的 iPad 在任何系统软件更新后至少重新启动一次。

4.  .htaccess 文件中清单文件的正确 MIME 类型是

    AddType 文本/缓存清单 .manifest

感谢 dev.bjorn.com/723 上的 Bjorn 帮助我到达那里……一篇值得一读的好博文。

# android - 当我们可以直接使用修改后的静态成员时，为什么还要使用 Intent？

> ID：16002358
> 
> 赞同：2
> 
> 时间：2013-04-14T17:55:06.807
> 
> 标签：android, android-intent, static

假设我们通过单击一个按钮将从一个活动 Main_Activity 的文本框接收到的数据发送到另一个活动 Display_Message_Activity。

在 Main_Activity 中：步骤 1：声明最终字符串

```
public final static String EXTRA_MESSAGE="com.example.myfirstapp.MESSAGE"; 
```

第 2 步：将点击分配给按钮

```
public void sendMessage(View view) {
Intent intent = new Intent(this, DisplayMessageActivity.class);
EditText editText = (EditText) findViewById(R.id.edit_message);
String message = editText.getText().toString();
intent.putExtra(EXTRA_MESSAGE, message);
startActivity(intent);
} 
```

第 3 步：在 DisplayMessageActivity 中，

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

// Get the message from the intent
Intent intent = getIntent();
String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

// Create the text view
TextView textView = new TextView(this);
textView.setTextSize(40);
textView.setText(message);

// Set the text view as the activity layout
setContentView(textView);
} 
```

现在我的问题是我们为什么要使用**intent.getStringExtra(MainActivity.EXTRA_MESSAGE);** ?? 取而代之的是，我们可以在按钮单击时轻松更新静态字符串**MainActivity.EXTRA_MESSAGE**的值，然后直接访问它并将 EXTRA_MESSAGE 字符串的值分配给 DisplayMessageActivity 中的 **消息*字符串。我的意思是，步骤：1

```
 public static String EXTRA_MESSAGE="com.example.myfirstapp.MESSAGE"; 
```

第2步

```
 public void sendMessage(View view) {
Intent intent = new Intent(this, DisplayMessageActivity.class);
EditText editText = (EditText) findViewById(R.id.edit_message);
String message = editText.getText().toString();
EXTRA_MESSAGE=message;
startActivity(intent);
} 
```

步骤：3

```
.
.
.
String message=MainActivity.EXTRA_MESSAGE;
.
.
. 
```

那么为什么在消息传递的情况下首选使用 Intent 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T18:05:57.837

如果 Android 为您的应用程序终止并重新启动进程，则静态变量将被分配为其默认值。如果您希望值保持不变，则最好使用 SharedPreferences 而不是静态变量。

不推荐使用静态变量。静态变量存储在堆的 PermGen 部分中。即使类完成了它的工作，静态变量也会留在堆中。垃圾收集器会做标记和清扫。如果您在第二个活动中引用的第一个活动中有一个静态变量，则该引用将保持很长时间。

如果您使用更多静态变量，您可能会出现内存泄漏。也减少使用不必要的物品。

**静态变量由 ClassLoader 引用的 Class 对象引用 - 因此，除非 ClassLoader 以某种方式删除 Class 或 ClassLoader 本身符合垃圾收集条件，否则静态变量不会被垃圾收集。**因此，如果您使用在许多类中引用的静态变量，除非这些类可用于垃圾收集，否则这些类和声明静态变量的类不能被垃圾收集。所以这会导致堆内存扩展导致内存泄漏。

要在活动之间传递数据（基元类型），我建议使用意图。

在这个视频中，这个人谈到了为什么不应该使用静态变量以及如何避免内存泄漏。[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。

[http://developer.android.com/training/articles/perf-tips.html](http://developer.android.com/training/articles/perf-tips.html)。检查将静态最终用于常量下的主题。

**并不是说您不应该使用静态变量。**

[http://developer.android.com/guide/faq/framework.html#3](http://developer.android.com/guide/faq/framework.html#3)。

查看**如何在单个应用程序中的活动/服务之间传递数据下的主题？**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:46:09.633

In case when you are using `static String` to pass data the memory leak is not significant, but there is something more important:

When you press HOME on the second activity and your process is killed by the system, after you go back you will not see the value of a `static String` what you set before (it will be `null` or what value you set it as default), but you will get the value from the `Intent` you passed. This works because system persists this value.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T18:51:39.147

从安全和设计的角度来看，这是一个坏主意。

首先，如果您的进程被 ActivityManager 透明地重新启动（例如，由于 RAM 压力），它可能是不安全的。在这种情况下，您的所有静力学都将重新初始化。

其次，意图是在进程内和进程间启动组件并可能跨进程边界传递数据的 android 方式。在跨越流程边界的情况下，静态解决方案显然行不通。

在您的示例中，DisplayMessageActivity 是在同一进程中启动的，但是如果明天您决定它应该接受来自其他应用程序的意图怎么办。然后您将不得不返回并以“正确的方式”传递数据。为什么不从“正确的方式”开始，让它成为未来的证明呢？

# c++ - 如何在不切片的情况下将多个派生类存储在向量中

> ID：16002360
> 
> 赞同：1
> 
> 时间：2013-04-14T17:55:08.567
> 
> 标签：c++, c++11

```
class Base
{
    public :
        void func()
        {
            cout << "Base func()" << endl;
        }
};

class DerivedA : public Base
{
    public :
        void func()
        {
            cout << "Derived A func()" << endl;
        }
};

class DerivedB : public Base
{
    public :
        void func()
        {
            cout << "Derived B func()" << endl;
        }
};

void main()
{
    DerivedA a;
    DerivedB b;

    vector<shared_ptr<Base>> temp;
    temp.push_back(make_shared<DerivedA> (a));
temp.push_back(make_shared<DerivedB> (b));

    for(auto ptr : temp)
    ptr->func();
} 
```

输出是

```
Base func()
Base func() 
```

但我所期望的是

```
Derived A func()
Derived B func() 
```

如何在不切片的情况下将派生类推入基类向量？如果没有办法解决这个问题，是否有任何等效的方法可以将多个派生类存储到一个类似对象的数组中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T17:56:22.133

没有切片发生。您需要在以下位置进行`func`虚拟化`Base`：

```
virtual void func()
{
    cout << "Base func()" << endl;
} 
```

这告诉编译器查找`func`a 的动态类型`Base*`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:03:52.857

在基类中将 func() 设为虚拟

```
class Base
{
    public :
        virtual void func()
        {
            cout << "Base func()" << endl;
        }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T06:56:53.240

您应该使用[虚函数](http://en.wikipedia.org/wiki/Virtual_function)。

这是它如何工作的示例：

virtual_functions.h

```
#pragma once

class Base {
public:
    virtual void virtual_func();   // virtual function.
    void non_virtual_func();       // non-virtual function.
};

class Derived : public Base {
public:
    void virtual_func();          // virtual function.
    void non_virtual_func();      // non-virtual function.
}; 
```

virtual_functions.cpp

```
#include "virtual_functions.h"

#include <iostream>
using namespace std;

void Base::virtual_func() {
    cout << "Base::virtual_func\n";
}

void Base::non_virtual_func() {
    cout << "Base::non_virtual_func()\n";
}

void Derived::virtual_func() {
    cout << "Derived::virtual_func\n";
}

void Derived::non_virtual_func() {
    cout << "Derived::non_virtual_func()\n";
} 
```

主文件

```
#include "virtual_functions.h"

int main() {
    // Declare an object of type Derived.
    Derived aDerived;

    // Declare two pointers,
    // one of type Derived * 
    // and the other of type Base *,
    // and initialize them to point to derived.

    Derived *pDerived = &aDerived;
    Base    *pBase    = &aDerived;

    // Call the functions.
    pBase->virtual_func();        // Call virtual function.
    pBase->non_virtual_func();    // Call nonvirtual function.
    pDerived->virtual_func();     // Call virtual function.
    pDerived->non_virtual_func(); // Call nonvirtual function.

    return 0;
} 
```

输出应该是：

派生::virtual_func()
基::non_virtual_func()
派生::virtual_func()
派生::non_virtual_func()

# c++ - 将新元素添加到列表中

> ID：16002361
> 
> 赞同：-1
> 
> 时间：2013-04-14T17:55:10.290
> 
> 标签：c++

我有单链表，我想在这个结构中添加一个新元素。

* * *

在程序代码中，我将创建结构和指向 NULL 的头指针。这就是我在oo代码中解决这个问题的方法：

```
typedef struct a {
    int element;
    struct a *next;
} a;
typedef struct b {
    int element;
    struct b *next;
} b;

class Foo {
    a *a; // head for a structure = NULL at the beginning
    b *b; // head for b structure = NULL at the beginning 
```

接下来我要做的是检查列表是否为空，如果是，则将 head 设置为指向新创建的第一个元素。

执行此操作的函数应该是模板，因为我想将我拥有的任何结构传递给它。所以：

```
template <class T> void Addition_Struct::add(T head)
{
    if(head == NULL)
    {
        head = (T*)malloc(sizeof(T));

        head->next = NULL;
    }
} 
```

此时出现了几个问题。我猜想 T 应该是结构的类型，并且指向头指针（当前为 NULL）。编译器在 malloc 行 - 中引发错误`cannot convert "a**" to "a*"`。怎么了？

编辑：

示例函数调用将是：

```
add(this->a); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:38:59.247

您混淆了`T`模板函数中的含义。

在您的示例调用`add(this->a);`中，您将参数视为指向结构的**指针**。

但是您的函数`head = (T*)malloc(sizeof(T));`认为`T`是结构类型。不是指针。

更改您的模板声明以阐明*指向*`T`的类型。

 *```
template <class T> void Addition_Struct::add(T * head) 
```*

# cuda - 编译器无法识别内核函数

> ID：16002363
> 
> 赞同：0
> 
> 时间：2013-04-14T17:55:25.133
> 
> 标签：cuda

我正在尝试编译 CUDA 工具包（MC 的亚洲选项）的示例。我正在使用 Qt。我复制了一个在 Internet 上找到的适用于 CUDA 的 pro 文件，但是每次`foo<<<x,y>>>(...)`我的代码中有一个内核函数时，最后一个都会用红色下划线。不出所料，当我尝试编译它时，它失败了。

你知道它可能来自哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:05:32.940

很可能您运行 GCC 来编译它，而您需要使用 nvcc，它首先进行预处理 -`kernel<<<>>>`东西扩展并为 GPU 生成代码。

# jquery - 从 .text 函数中获取值

> ID：16002364
> 
> 赞同：0
> 
> 时间：2013-04-14T17:55:26.483
> 
> 标签：jquery

我有不断计算值的函数我试图在按下按钮时存储这些函数的值但是当我尝试下面的代码时它不起作用。那么当按钮暂停时，如何在变量中捕获它？

`songposition = $("#songCurrentpos").text(pad(Math.floor(current / 60), 2) + ":" + pad(Math.floor(current % 60), 2));`

`songlength = $("#songDuration").text(pad(Math.floor(duration / 60), 2) + ":" + pad(Math.floor(duration % 60), 2));`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:56:40.863

```
// Set the values
$("#songCurrentpos").text(pad(Math.floor(current / 60), 2) + ":" + pad(Math.floor(current % 60), 2));
$("#songDuration").text(pad(Math.floor(duration / 60), 2) + ":" + pad(Math.floor(duration % 60), 2));

// Get the values
songposition = $("#songCurrentpos").text();
songlength = $("#songDuration").text(); 
```

# javascript - 难以理解 javascript 函数级别范围

> ID：16002366
> 
> 赞同：3
> 
> 时间：2013-04-14T17:55:29.867
> 
> 标签：javascript, scope

我很难理解`JavaScript`函数级别的范围，作为一个`C#`程序员，它看起来与我有关，我将尝试通过代码来解释它：

**代码#1**

```
//Problem
//if same named variable (as in global scope) is used inside function scope,
//then variable defined inside function will be used,global one will be shadowed
var a = 123;
function func() {
    alert(a); //returns undefined,why not just return 123 ?
    //how come js knew that there is variable 'a' will be defined and used in 
    //this function scope ,js is interpreter based ?
    var a = 1; //a is defined inside function
    alert(a); //returns 1 
}
func(); 
```

**代码#2**

```
//when a variable(inside function) not named as same as the global,
//then it can be used inside function,and global variable is not shadowed
var k = 123;
function func2() {
    alert(k); //returns 123 ,why not 'undefined'
    var c = 1;
    alert(c); //returns 1
}
func2(); 
```

**所以我的问题是**

1.  在*CODE#1*为什么第一次`a`是`undefined`，为什么不只是返回`123`？怎么会`js`知道在这个函数范围内定义和使用变量'a'，`js`是基于解释器的吗？

2.  在*CODE#2*为什么不是`k`“未定义”？

[http://jsfiddle.net/Nu2Vu/](http://jsfiddle.net/Nu2Vu/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T18:31:39.777

# 代码 #1

[提升](http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html)会导致所有变量声明都被带到作用域的顶部，但它会将赋值留在原处。当有对变量的引用时，JavaScript 将首先在当前作用域中查找，如果没有找到该变量，它将继续查找作用域链，直到找到该变量为止。这段代码解释如下：

```
var a = 123; // global var named a declared, assigned a value
function func() {
  var a; // the declaration of the local var a gets
         // hoisted to the top of the scope, but the
         // assignment is left below, so at the point
         // it is initialized with a value of `undefined`
    alert(a); // looks for a local var named a, finds it but
              // it currently has a value of `undefined`

    a = 1; // now the value is assigned to the local a
    alert(a); // returns 1 
}
func(); 
```

# 代码 #2

由于[关闭](http://www.hunlock.com/blogs/Closing_The_Book_On_Javascript_Closures)，此代码的行为方式相同。闭包的一个基本定义是 JavaScript 函数不仅可以访问定义在它们自己作用域中的变量，还可以访问它们的父作用域可用的变量。

```
var k = 123; // declares and assigns a value to global k
function func2() {
    alert(k); // looks for a local var named k, doesn't find it,
              // looks in its parent scope (the global scope in
              // this case) finds k, returns its value of 123
    var c = 1;
    alert(c); //returns 1
}
func2(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T17:59:33.743

第一个代码等于：

```
var a = 123;
function func() {
    var a; //Undefined!
    alert(a); 
    a = 1; 
    alert(a); 
} 
```

这很好地解释了它： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)

# java - 如何解决 CWE-259：使用硬编码密码？

> ID：16002369
> 
> 赞同：6
> 
> 时间：2013-04-14T17:55:32.857
> 
> 标签：java, security, veracode

我将我的应用程序 EAR 提交给 Veracode 安全扫描工具，并在以下代码中发现了这个缺陷：

```
private String url = "jdbc:mysql://localhost:8081/sql";  
private String userName = "xyz";  
private String password = "abc";
DriverManager.getConnection(url, user, password); // At this line i am getting this flaw. 
```

有人请帮助我解决 CWE-259：使用硬编码密码漏洞。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T18:18:41.980

您获得硬编码密码缺陷的原因是因为在您的代码段的第三行中，您将密码硬编码在一个变量中。这是因为您在源代码中存储了敏感信息（用户名和密码），这是一个缺陷，因为您的 can 源可以被反编译。

修复此缺陷的一种方法是将凭据存储在高度加密的文件中，或将强单向哈希应用于凭据并将这些哈希存储在配置文件中。

您可以在此处获取更多信息：http: [//cwe.mitre.org/data/definitions/259.html](http://cwe.mitre.org/data/definitions/259.html)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2016-05-19T10:17:40.217

**字符串密码 = 新 Securestring("123").GetValue()。**

```
 class Securestring {
     private readonly string _password;

     public Securestring(string value) {
         _password = value;
     }

     public string GetValue() {
         return _password;
     }
 }
```

# java - 从 wav 文件播放原始 PCM 字节

> ID：16002372
> 
> 赞同：1
> 
> 时间：2013-04-14T17:55:45.150
> 
> 标签：java, android, audio, wav, pcm

我有一个用 16 位 PCM 编码的 wav 文件，我想将其转换为 PCM 短数组并使用音轨类播放原始数组。这就是我所做的：

```
 String fileName = "test.wav";
        File f = new File(baseDir + File.separator + fileName);
        InputStream is = null;
        try {
            is = new FileInputStream       (f);
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
            BufferedInputStream     bis = new BufferedInputStream   (is, 8000);
            DataInputStream         dis = new DataInputStream       (bis);      //  Create a DataInputStream to read the audio data from the saved file
            short[] music = new short[(int) f.length()];
            int i = 0;                                                          //  Read the file into the "music" array
            try {
                while (dis.available() > 0)
                {
                    music[i] = dis.readShort();                                      //  This assignment does not reverse the order
                    i++;
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Log.i("123",""+Arrays.toString(music));

            try {
                dis.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }        

            at=new AudioTrack(AudioManager.STREAM_MUSIC, 8000, AudioFormat.CHANNEL_OUT_MONO,
                    AudioFormat.ENCODING_PCM_16BIT, 8000 /* 1 second buffer */,
                    AudioTrack.MODE_STREAM);
            at.write(music, 0, (int)f.length());
            at.play(); 
```

数组是可以播放的，但问题是当我和播放原始wav文件比较时，我发现它们输出的声音不一样。有人可以帮我解决这个问题吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:09:18.777

您必须查找文件中的实际音频数据以获取音频样本，请参阅[http://en.wikipedia.org/wiki/WAV](http://en.wikipedia.org/wiki/WAV)或[https://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/) .

一秒钟的 16 位单声道 @ 8khz 将是 8000 * 2 * 1 字节 = 16000 字节

# android - Android OpenGL ES 2.0：三星 Galaxy S2 上的 GLSL 片段着色器中是否可以使用“switch-case”语法？

> ID：16002378
> 
> 赞同：9
> 
> 时间：2013-04-14T17:56:12.800
> 
> 标签：android, opengl-es, glsl, fragment-shader

有人知道如何`switch` `case`在三星 Galaxy S2 的片段着色器中执行语法吗？我得到编译错误：`Expected literal or '(', got 'switch'`.

我的语法如下：

```
switch(i){
    case 0: x = alphas[0]; break;
    case 1: //...etc.
} 
```

这在 Nexus 7 上运行良好，但在 Galaxy S2 上出现上述错误。`switch` `case`Galaxy S2 上的指令是不可能的吗？我想使用它们的原因是它们似乎`if` `else`在 Nexus 7 上提供了性能改进。如果它们在 Galaxy S2 上是不可能的，有没有办法查询设备并`switch` `case`在可用时使用，`if` `else`否则？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T18:10:16.497

`switch`OpenGL ES 2.0 不支持该语句。来自[OpenGL ES Shading Language 1.0.17](http://www.khronos.org/registry/gles/specs/2.0/GLSL_ES_Specification_1.0.17.pdf)规范 3.7：

> 以下是保留供将来使用的关键字。使用它们会导致错误：
> 
> asm 类联合枚举 typedef 模板这个打包的 goto**开关**默认...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-14T18:04:44.160

GLSL ES 基于桌面 GLSL 的 1.10 版，但在 1.30 版中添加了“switch case”语句，因此您不能假设设备会支持它。

另外我建议避免在片段着色器中进行分支，因为它会严重影响性能。

# c - printf 添加数字

> ID：16002389
> 
> 赞同：1
> 
> 时间：2013-04-14T17:57:04.387
> 
> 标签：c, console, printf

我有一个小程序：

```
int main(int argc, const char * argv[])
{

    float num1;
    float num2;

    num1 = 21.2;
    num2 = 13.6;

    double sum;

    sum = num1 + num2;

    printf("The sum of two numbers is %3.5f. \n", sum);

    return 0;
} 
```

当它打印到控制台时，这就是我得到的：

两个数之和是`34.800003`

为什么我在小数点后得到 3？试图理解`Printf`，但这对我来说很神秘......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:03:08.010

它与数字的精度有关。如果您对详细信息感兴趣，我建议您查看[Wikipedia](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)。它们存储的格式仅在一定程度上是准确的。

要获得更高的精度，请使用以下`double`类型：

```
int main(int argc, const char * argv[])
{

    double num1;
    double num2;

    num1 = 21.2;
    num2 = 13.6;

    double sum;

    sum = num1 + num2;

    printf("The sum of two numbers is %3.5f. \n", sum);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:42:15.643

c 中的每件事都是按位完成的，只需打印 num1 和 num2 的十六进制值。您缺少的是 0.2 和 0.6 无法在 cu 中精确定义无法在 c 中获得正确的位。在 c 中，小数点是用 2 的负数计算的。从十进制到二进制的转换低于 2^-1*b1+2^-2*b2+2^-3*b3 这就是 c 计算浮点数的方式在c。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T18:00:21.497

使用双精度进行加法：

```
sum = num1;
sum += num2; 
```

或应用一些铸造：

```
sum = (double) num1 + (double) num2; 
```

# c - 带有指向输出参数中对象的指针的动态数组

> ID：16002390
> 
> 赞同：0
> 
> 时间：2013-04-14T17:57:15.473
> 
> 标签：c, arrays, pointers, dynamic, openssl

我有一个从服务器获取多个`X.509`证书的功能。`X509 *`我希望它在 OpenSSL 的结构中“返回”这些证书的数组。但是由于我的界面返回错误代码，我想使用一个 out 参数。

如果我没有误导，这将要求我使用带有 3(!) 的指针`*`（例如`X509 ***certs`）。我在这里是因为我个人觉得这非常令人困惑。这是我打算做的事情，我想知道我是否完全走错了路（在我看来）：

```
int get_certs(X509 ***certs)
{
    X509 **local_certs;
    int i;
    local_certs = malloc(no_of_certs * sizeof(X509 *));
    // fetch certs
    for(i=0; i < no_of_certs; ++i)
    {
        // load single cert into variable "cert"
        local_certs[i] = cert
    }
    *certs = local_certs;
} 
```

一个电话可能看起来像这样：

```
X509 **certs;
get_certs(&certs); 
```

这是正确的方法吗？因为对我来说这个三分球看起来很奇怪。

*注意*：我不知道会有多少证书，所以它必须是一个动态数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:03:59.420

只需应用左右阅读规则......`X509 ***certs`意味着 certs 是指向指向 X509 的指针的指针。因此，如果您想将 a 返回`X509**`给调用者，则调用者需要将 an 传递给您，`X509***`以便您将其存储在其中。

另外，我不确定您处理单个证书的逻辑是否正确......它应该看起来像这样（imo） - 请注意 for 循环中的额外 malloc 。

```
int get_certs(X509 ***certs)
{
    X509 **local_certs;
    int i;
    local_certs = malloc(no_of_certs * sizeof(X509 *));
    // fetch certs
    for(i=0; i < no_of_certs; ++i)
    {
        X509* cert = malloc( sizeof( X509 ) );
        // load single cert into variable "cert"
        local_certs[i] = cert
    }
    *certs = local_certs;
} 
```

`X509**`另一种方法是从函数中返回 a ...

```
X509** get_certs( int no_of_certs )
{
    X509 **local_certs;
    int i;
    local_certs = malloc(no_of_certs * sizeof(X509 *));
    // fetch certs
    for(i=0; i < no_of_certs; ++i)
    {
        X509* cert = malloc( sizeof( X509 ) );
        // load single cert into variable "cert"
        local_certs[i] = cert
    }
    return local_certs;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:24:27.307

我错了，我知道*感觉*不对。这是第一个问题：如果以这种方式返回，我怎么知道里面有多少证书？我不。但是 OpenSSL 已经通过所谓的堆栈解决了这个问题：

```
int get_certs(STACK_OF(X509) **certs)
{
    STACK_OF(X509) *local_certs;
    int i;
    // load variable local_certs with content
    // in my case that is a PKCS#7 data structure
    *certs = local_certs;
} 
```

正如我已经知道的那样，我缩短了数据源，但它更复杂。这看起来好多了，而且 OpenSSL 现在提供了一些功能，例如`sk_X509_push`或`sk_X509_num`。这是一个很好的抽象，解决了我的问题。

# for-loop - 每个 CCMenuItem 的 cocos2d

> ID：16002393
> 
> 赞同：1
> 
> 时间：2013-04-14T17:57:24.703
> 
> 标签：for-loop, cocos2d-iphone, menuitem, ccmenuitem

我设置了一个 CCMenu，菜单项如下：

```
 CCLabelTTF *label1 = [CCLabelTTF labelWithString:@"level 1" fontName:@"Marker Felt" fontSize:32];
    CCLabelTTF *label2 = [CCLabelTTF labelWithString:@"level 2" fontName:@"Marker Felt" fontSize:32];
    CCLabelTTF *label3 = [CCLabelTTF labelWithString:@"level 3" fontName:@"Marker Felt" fontSize:32];
    CCLabelTTF *label4 = [CCLabelTTF labelWithString:@"level 4" fontName:@"Marker Felt" fontSize:32];

    CCMenuItem *level1 = [CCMenuItemLabel itemWithLabel:label1 target:self selector:@selector(levelSelect:)];
    level1.tag = 1;
    CCMenuItem *level2 = [CCMenuItemLabel itemWithLabel:label2 target:self selector:@selector(levelSelect:)];
    level2.tag = 2;
    CCMenuItem *level3 = [CCMenuItemLabel itemWithLabel:label3 target:self selector:@selector(levelSelect:)];
    level3.tag = 3;
    CCMenuItem *level4 = [CCMenuItemLabel itemWithLabel:label4 target:self selector:@selector(levelSelect:)];
    level4.tag = 4;
    CCMenu *menu = [CCMenu menuWithItems:level1, level2, level3, level4, nil];
    [menu alignItemsVerticallyWithPadding:20]; 
```

有没有办法可以缝制一个 for 循环来遍历每个 CCMenuItem？如果它的标签小于其他东西，我基本上想将启用设置为 no。例如：

```
for (ALL MENU ITEMS) {
    if (THAT MENU ITEM.tag < 4) {
        THAT MENU ITEM.enabled = NO;
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T18:00:23.907

`CCMenuItems`被添加为您的 CCMenu 的子项，因此为了遍历它们，您可以这样做。-

```
for (CCMenuItem *item in [menu children]) {
    if (item.tag < 4) {
        item.enabled = NO;
    }
} 
```

# select - 如何将集合选择与 has_one 关联一起使用

> ID：16002396
> 
> 赞同：1
> 
> 时间：2013-04-14T17:57:44.683
> 
> 标签：select, collections, has-one

我有 2 个模型：

```
class Brigade < ActiveRecord::Base
  attr_accessible :title
  has_one :country
end

class Country < ActiveRecord::Base
  attr_accessible :title
end 
```

在我的 _form.html.erb 我有：

```
<%= form_for(@brigade) do |f| %>
     <p>
       <%= f.label :title %>
       <%= f.text_field :title %>
     </p>
     <p>
       <%= f.label "Country" %>
       <%= f.collection_select :country_id, Country.all, :id, :title %>
     </p>
<% end %> 
```

运行这个我有一条消息：

```
undefined method `country_id' for #<Brigade:0x9a89cac> (ActionView::Template::Error) 
```

我认为在这种情况下，Rails 必须自动加入`country_id`，`brigade`但事实并非如此。

我不知道我的错误在哪里。有必要使用`accepts_nested_attributes_for`吗？

# kernel - 包含本地资源的内核模块

> ID：16002400
> 
> 赞同：2
> 
> 时间：2013-04-13T15:35:29.720
> 
> 标签：kernel, header-files

假设我有以下结构：

```
.\
 |_ foo.c
 |_ inc\
     |_ foo_helper.c
     |_ foo_helper.h 
```

我想获取 foo.ko。foo.c 应该`#include <foo_helper.h>`。此外，在 foo.c init 函数中放置了一条调试消息`printk`，只是为了查看该函数是否已加载。我的 Kbuild 文件是：

```
obj-m := foo.o
foo-y := inc/foo_helper.o

ccflags-y := -I$(src)/inc/ 
```

编译良好。`insmod`返回`0`；`lsmod`将模块列为已加载，但调试消息未打印在 kern.log 中。

## 一个最小的例子：

*   富.c：

> ```
> #undef __KERNEL__
> #define __KERNEL__
> #undef MODULE
> #define MODULE
> 
> #include <linux/module.h>   // included for all kernel modules
> #include <linux/kernel.h>   // included for KERN_INFO
> 
> #include <foo_helper.h>
> 
> static int __init foo_init(void)
> {
>     printk(KERN_INFO "Foo inserted successfully.\n");
> 
>     foo_help_me();
> 
>     return 0;
> }
> 
> static void __exit foo_exit(void){}
> module_init(foo_init);
> module_exit(foo_exit);
> MODULE_LICENSE("GPL");
> MODULE_AUTHOR("Foo");
> MODULE_DESCRIPTION("Bar"); 
> ```

*   公司/foo_helper.h：

> ```
> #ifndef __FOO_CUSTOM_HELPER
> #define __FOO_CUSTOM_HELPER
> 
> #include <linux/kernel.h>
> 
> void foo_help_me(void);
> 
> #endif  /* __FOO_CUSTOM_HELPER */ 
> ```

*   公司/foo_helper.c：

> ```
> #include "foo_helper.h"
> 
> void foo_help_me(void)
> {
>   printk(KERN_INFO "We're inside the helper, seems to be working.\n");
> } 
> ```

*   构建：

> ```
> obj-m := foo.o
> foo-y := inc/foo_helper.o
> ccflags-y := -I$(src)/inc 
> ```

*   生成文件：

> ```
> ifneq ($(KERNELRELEASE),)
> include Kbuild
> else
> KDIR := /lib/modules/`uname -r`/build
> default:
>   $(MAKE) -C $(KDIR) M=$$PWD modules
> endif 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T23:02:45.367

同时，我在[tldp.org](http://www.tldp.org/LDP/lkmpg/2.6/html/x351.html)找到了解决方案。唯一需要的修改是在 Kbuild 文件中，如下所示：

> ```
> obj-m := fool.o
> fool-objs := foo.o inc/foo_helper.o
> ccflags-y := -I$(src)/inc/ 
> ```

所以我需要链接两个*中间*对象（foo 和 foo_helper）以获得第三个，最后一个，在这种情况下我称之为**傻瓜**。

# c# - 具有社交登录功能的会员提供商

> ID：16002402
> 
> 赞同：0
> 
> 时间：2013-04-14T17:58:45.693
> 
> 标签：c#, asp.net-mvc, nhibernate

我正在使用自定义`nhibernate` `asp.net membership provider`，现在我想允许社交登录功能（使用 fb、twitter、linkedin 登录）。我知道它已经存在于简单的会员提供程序 outofbox 中，但我需要支持其他数据库`microsoft sql server`，而且我使用的是代码优先原则，这意味着我将即时生成数据库表。

我正在寻找扩展我当前用户对象的解决方案（使用扩展属性来支持社交网络登录）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:31:23.927

在一般情况下，社交网站的身份验证与您在本地存储数据的方式无关。大多数提供商都支持 oauth2 协议，该协议会为您提供用户名。

这意味着，如果您将您的帐户与非空电子邮件（以某种方式获得授权）一起存储在本地，则在进行身份验证后，外部站点会返回包含电子邮件的信息，您可以使用该信息在本地商店中查找用户。

另一方面，使用使用其他数据库引擎的本地提供者与外部提供者的身份验证完全无关。人们避免回答您的问题的原因之一可能是您在一个问题中混合了两个不同且不相关的问题。

# f# - 是否可以将 F# 类型提供程序写入链接数据？

> ID：16002406
> 
> 赞同：4
> 
> 时间：2013-04-14T17:59:26.947
> 
> 标签：f#, type-providers, f#-data

我真的很喜欢 Freebase 和 World Bank 类型提供程序，我想通过自己编写一个来了解有关类型提供程序的更多信息。欧盟有一个开放数据程序，您可以在其中通过 SPARQL/链接数据访问数据。是否有可能通过类型提供程序来包装对开放欧盟数据的数据访问，或者尝试弄清楚如何去做是浪费时间？

此处描述了对欧盟数据的访问：http: [//open-data.europa.eu/en/linked-data](http://open-data.europa.eu/en/linked-data)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T21:28:15.127

我认为这当然是可能的——我与一些真正对此感兴趣的人进行了交谈（并且正在为此努力，但我不确定目前的状态是什么）。无论如何 - 我绝对认为这是一个如此广泛的领域，额外的努力不会浪费时间。

为类似 RDF 的数据编写类型提供程序的关键问题是决定将什么视为类型（什么应该成为类型名称或属性名称）以及什么应该作为值（作为列表或键返回）值对）。这对世界银行来说非常明显——国家和属性的名称变成了类型（属性名称），值变成了数据。但是对于基于三元组的数据集，这不太明显。

到目前为止，我认为有两种方法：

*   **附加本体**- 要求数据源附带一些附加本体，指定导航键是什么。[http://mspace.fm](http://mspace.fm)上使用了一种叫做“方面本体”的东西，这可能很有趣。

*   **参数化**- 参数化类型提供者（以某种方式）并给它一个应该在类型级别可用的关系列表（你可能还需要提供一些根从哪里开始）。

肯定还有其他可能性——我认为拥有链接数据的提供者会非常有趣。如果您想为 F# Data 执行此操作，有一个[关于贡献的有用页面](http://fsharp.github.io/FSharp.Data/contributing.html):-)。

# entity-framework - “引用关系会导致不被允许的循环引用。”

> ID：16002410
> 
> 赞同：0
> 
> 时间：2013-04-14T17:59:59.000
> 
> 标签：entity-framework, cyclic-reference

这是场景一，效果很好：

```
public class Domain
{
    public int DomainId { get; set; }

    [InverseProperty("Domain")]
    public virtual ICollection<Person> Persons { get; set; }

    [InverseProperty("Domain")]
    public virtual ICollection<Group> Groups { get; set; }
}

public class Person
{
    public int PersonId { get; set; }
    public virtual Domain Domain { get; set; }
    public virtual ICollection<Group> Groups { get; set; }
}

public class Group
{
    public int GroupId { get; set; }
    public virtual Domain Domain { get; set; }
    public virtual ICollection<Person> Members { get; set; }
} 
```

这是场景二，它失败了。

```
public class Domain
{
    // Same as scenario 1...
}

public class Person
{
    public int PersonId { get; set; }
    public int DomainId { get; set; }             // <--- new
    [ForeignKey("DomainId")]                      // <--- new
    public virtual Domain Domain { get; set; }
    public virtual ICollection<Group> Groups { get; set; }
}

public class Group
{
    public int GroupId { get; set; }
    public int DomainId { get; set; }              // <--- new
    [ForeignKey("DomainId")]                       // <--- new
    public virtual Domain Domain { get; set; }
    public virtual ICollection<Person> Members { get; set; }
} 
```

**方案 2 中的错误消息如下：** 引用关系将导致不允许的循环引用。[约束名称 = FK_dbo.GroupMembers_dbo.Persons_MemberId]

这两种情况都有这个映射（多对多），在 OnModelCreating 的方法中。

```
 modelBuilder.Entity<Group>()
            .HasMany(group => group.Members)
            .WithMany(member => member.Groups)
            .Map(m =>
            {
                m.ToTable("GroupMembers");
                m.MapLeftKey("GroupId");
                m.MapRightKey("MemberId");
            }); 
```

我究竟做错了什么？！我想要达到的目的是完全合理的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:52:55.517

要么您使用的是与我不同的 EF 版本（我使用的是 5），要么您没有包含一些导致您的问题的代码。我创建了一个包含您提供的代码的上下文，我得到的唯一错误是关于多个级联路径的错误（通过人员或组删除域）。我在其中一个关系上删除了级联删除，它工作正常。

这是我的整个上下文类，没有错误：

```
public class TestContext : DbContext
{
    public DbSet<Person> People { get; set; }

    public DbSet<Group> Groups { get; set; }

    public DbSet<Domain> Domains { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Group>()
           .HasMany(group => group.Members)
           .WithMany(member => member.Groups)
           .Map(m =>
           {
               m.ToTable("GroupMembers");
               m.MapLeftKey("GroupId");
               m.MapRightKey("MemberId");
           });

        modelBuilder.Entity<Domain>()
            .HasMany(d => d.Groups).WithRequired(g => g.Domain)
            .WillCascadeOnDelete(false);
    }
} 
```

# javascript - 检查文件扩展名并在不是图像文件时提醒用户

> ID：16002412
> 
> 赞同：22
> 
> 时间：2013-04-14T18:00:17.637
> 
> 标签：javascript, image, file-upload

我需要帮助添加一些代码行来检查文件是图像，检查扩展名。这是我用来指示上传图像进度的代码。我在 php 中执行此操作，用户无法上传除 .jpg .jpeg .gif 和 .png 以外的任何文件，但他没有收到文件未上传的消息。当我为进度上传添加 javascript 代码时，我创建的 php 消息不再显示。

这是我的 javascript upload.js 文件代码：

```
 var handleUpload = function(event) {
    event.preventDefault();
    event.stopPropagation();

    var fileInput = document.getElementById('image_id');

    var data = new FormData();

    data.append('javascript', true);

        if(fileInput.files[0].size > 1050000) {
        document.getElementById("image_id").innerHTML = "Image too big (max 1Mb)";
        alert('Fotografija koju želite dodati je veća od 1Mb!');
        window.location="upload_images.php"
        return false;
        }

    for (var i =0; i < fileInput.files.length; ++i) {
        data.append('image', fileInput.files[i]);
    }

    var request = new XMLHttpRequest();

    request.upload.addEventListener('progress', function(event) {
        if (event.lengthComputable) {
            var percent = event.loaded / event.total;
            var progress = document.getElementById('upload_progress');

            while (progress.hasChildNodes()) {
                progress.removeChild(progress.firstChild);
            }

            progress.appendChild(document.createTextNode(Math.round(percent * 100) + ' %'));
        }
    });

    request.upload.addEventListener('load', function(event) {
        document.getElementById('upload_progress').style.display = 'none';
    });

    request.upload.addEventListener('error', function(event) {
        alert('Dodavanje slika nije bilo uspješno! Pokušajte ponovo.');
    });

    request.addEventListener('readystatechange', function(event) {

        if (this.readyState == 4) {
            if(this.status == 200) {
                var links = document.getElementById('uploaded');

                window.location="upload_images.php?success"
                console.log(this.response); 
            } else {
                console.log('Server replied with HTTP status ' + this.status);
            }
        }

    });

    request.open('POST', 'upload_images.php');
    request.setRequestHeader('Cache-Control', 'no-cache');

    document.getElementById('upload_progress').style.display = 'block';

    request.send(data);
}

window.addEventListener('load', function(event) {
    var submit = document.getElementById('submit');
    submit.addEventListener('click', handleUpload);

}); 
```

这是我上传文件的表格：

```
<div id="uploaded">

</div>
<div>
<form action="" method="post" enctype="multipart/form-data">
<input name="image" id="image_id" type="file" size="25" value="Odaberi sliku" />
<input type="submit" id="submit" value="Dodaj Foto"/>
</form>
</div>
<div class="upload_progress" id="upload_progress"></div> 
```

我还需要在那个 javascript 代码中检查文件是图像。允许 jpg、jpeg、png 和 gif 扩展名并阻止其他扩展名。如果他试图上传其他类型的文件来提醒用户。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-14T18:04:27.847

```
if (!fileInput.files[0].name.match(/.(jpg|jpeg|png|gif)$/i))
    alert('not an image'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-26T11:26:15.460

对于 Vue.js

```
if (filename.match(/.(jpg|jpeg)$/i)){
                     $('#modalimage').modal('show')    
                     vm.downloadimage = result.data
                 }else{
                  const a = document.createElement('a')
                  a.setAttribute('href', result.data)
                  a.dispatchEvent(new MouseEvent("click", {'view': window, 'bubbles': 
true, 'cancelable': true}))
                 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-22T02:50:14.907

你给类名的样式-jsp

```
"Choose file",input:true,icon:true,classButton:"btn",classInput:"input-large name-jsp" 
```

在您的 jsp 或 html 中，您提供 id="cekJpg"（单击上传文件时不要选择文件）

```
<input id="cekJpg" type="submit" class="btn btn-primary" value="Upload image"> 
```

在 javascript

```
//if click button upload image with id="cekJpg"
$("#cekJpg").on('click', function (e) {
    //get your format file
    var nameImage = $(".name-jsp").val();
    //cek format name with jpg or jpeg
    if(nameImage.match(/jpg.*/)||nameImage.match(/jpeg.*/)){
        //if format is same run form
    }else{
        //if with e.preventDefault not run form
        e.preventDefault();
        //give alert format file is wrong
        window.alert("file format is not appropriate");
    }
}); 
```

# php - 在 WP mysql 数据库中插入和更新数组值

> ID：16002414
> 
> 赞同：0
> 
> 时间：2013-04-14T18:00:23.017
> 
> 标签：php, mysql, arrays, wordpress

我可以使用以下方法将变量中的单个记录插入到自定义 WordPress 表中：

```
global $wpdb;
$wpdb->custom_table = $wpdb->prefix . 'clients';
$wpdb->query( $wpdb->prepare( 
    "
        INSERT INTO $wpdb->custom_table 
        (client_id, client_name) 
        VALUES ( %s, %s )           
    ", 
    array(
        $client_id, 
        $client_name
    )       
) ); 
```

但是，我需要通过 API 导入大量记录（手动和预定），该 API 为我提供了一个名为 $clients 的数组，其结构如下：

```
Array
(
[0] => Array
    (
        [id] => 1234567
        [name] => Client 1
        [other_field] => misc
    )
[1] => Array
    (
        [id] => 1234568
        [name] => Client 2
        [other_field] => misc
    )
[2] => Array
    (
        [id] => 1234569
        [name] => Client 3
        [other_field] => misc
    )
) 
```

我想将 $clients 数组中的每个 [id] 和 [name] 作为表中的一行插入。

如果记录基于 client_id 列（唯一索引）存在，那么我需要更新表中的行。

# c++ - 通过友好的输出运算符访问模板化类的字段时“无效使用非静态数据成员”

> ID：16002417
> 
> 赞同：0
> 
> 时间：2013-04-14T18:00:34.883
> 
> 标签：c++, templates, friend

当我尝试通过友好的输出运算符访问模板化类的字段时，出现以下错误。

```
Database.hpp: In function ‘std::ostream& ostream(std::ostream&, const Table<T, S>&)’:
Database.hpp:10:12: error: invalid use of non-static data member ‘Table<T, S>::tab’
Database.hpp:41:19: error: from this location
Database.hpp: In function ‘std::ostream& operator<<(std::ostream&, const List&)’:
Database.hpp:62:17: error: no match for ‘operator<<’ in ‘os << l.List::AnnouncementDate’ 
```

这是我写的确切代码：

```
template <class T, int S>
class Table
{
    T tab[S];
    public:
    inline T& operator[](int i)
    {
        return tab[i];
    }
    inline const T& operator[](int i) const
    {
        return tab[i];
    }
    Table() {}
    ~Table() {}
    Table(const Table &t)
    {
        for ( int i=0; i<S; ++i )
        {
            tab[i] = t[i];
        }
    }
    Table& operator=(const Table &t)
    {
        for ( int i=0; i<S; ++i )
        {
            tab[i] = t[i];
        }
        return *this;
    }
    friend std::ostream& ostream( std::ostream& os, const Table<T,S> &t )
    {
        for ( int i=0; i<3; os << '-' )
        {
            os << tab[i++];
        }
        return os;
    }
};

typedef Table<int,3> Date;

struct List
{
    Date AnnouncementDate;
    int BonusShares;
    int StockSplit;
    int CashDividend;
    bool DividendPayment;
    Date ExDividendDate;
    Date ShareRecordDate;
    Date BonusSharesListingDate;

    friend std::ostream& operator<<( std::ostream& os, const List &l )
    {
        os << l.AnnouncementDate << ',' << std::endl <<
        l.BonusShares << ',' << std::endl <<
        l.StockSplit << ',' << std::endl <<
        l.CashDividend << ',' << std::endl <<
        l.DividendPayment << ',' << std::endl <<
        l.ExDividendData << ',' << std::endl <<
        l.ShareRecordDate << ',' << std::endl <<
        l.BonusSharesListingDate << ',' << std::endl;
        return os;
    }
};

typedef std::vector<List> Database; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:03:10.847

看起来您打算命名朋友函数`operator<<`而不是`ostream`：

```
friend std::ostream& operator<<( std::ostream& os, const Table<T,S> &t )
//                   ^^^^^^^^^^ 
```

您还需要以`tab`成员身份访问`t`：

```
os << t.tab[i++]; 
```

这是因为，尽管您在类定义中定义了朋友函数，但它具有命名空间范围：

> 在类中定义的友元函数在定义它的类的（词法）范围内。

# php - PHP 数据库相关错误和 MySQL 错误

> ID：16002423
> 
> 赞同：-2
> 
> 时间：2013-04-14T18:00:59.353
> 
> 标签：php, mysql

这是我在下面输入代码时收到的错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'order(order_date,cust_firstname,cust_lastname,cust_add,cust_city,cust_state,indi' 附近使用正确的语法

此错误的代码是：

```
<?php
include "db.php";
    $cust_firstname=$_POST['name'];
    $cust_lastname=$_POST['lastname'];
    $cust_add=$_POST['add'];
    $cust_city=$_POST['city'];
    $cust_state=$_POST['state'];
    $cust_country=$_POST['country'];
    $cust_zip=$_POST['pincode'];
    $cust_phone=$_POST['mobile'];
    $cust_email=$_POST['email'];
    $sql=mysql_query("INSERT INTO order(order_date,cust_firstname,cust_lastname,cust_add,cust_city,cust_state,$cust_country,cust_zip,cust_phone,cust_email)values(now(),'$cust_firstname','$cust_lastname','$cust_add','$cust_city','$cust_state','$cust_country','$cust_zip','$cust_phone','$cust_email')")or die(mysql_error());
    header("location:done.php");
?> 
```

我想知道，这个错误的真正含义是什么以及我必须做些什么来修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:02:51.493

订单是[保留关键字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。您需要将其包装在刻度中：

```
$sql=mysql_query("INSERT INTO `order` (order_date, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:01:42.100

试试这个

```
 $sql=mysql_query("INSERT INTO `order` (order_date,cu..... 
```

`order`是mysql中的保留关键字

编辑：

改变这个

```
 $cust_country 
```

到

```
 cust_country 
```

在插入语句列中

# excel - Excel VBA 运行时错误 1004 仅具有以“c”开头的名称

> ID：16002425
> 
> 赞同：3
> 
> 时间：2013-04-14T18:01:14.817
> 
> 标签：excel, excel-2010, vba

这是正确的。如果我将以下代码中的“Chart_Series_W_Gain_AAPL”中的“C”更改为任何其他字母，则代码有效。否则，它会在 Series.Formula 分配中引发错误 1004。事实上，如果我使用任何以“c”开头的随机名称，代码就会失败，但否则不会。我试过关闭 Excel 并重新打开，但同样的问题。我遇到了这个问题，因为我一直以图表名称开头命名我的图表系列定义的名称，但后来我认为这很令人困惑，我试图在用作图表系列的定义名称前面加上“Chart_Series_”。人们会认为，这是非常良性的变化。

```
 Dim objChartWGain As Chart
    Dim objSeries As Series

    Set objChartWGain = Charts("W Gain")
    Set objSeries = objChartWGain.SeriesCollection.NewSeries

    ActiveWorkbook.Names.Add "Chart_Series_W_Gain_AAPL", "=W_Gain_Data_Array(W_Gain_Data_Alloc,1,W_Gain_Data_GainLossCurr)"

    objSeries.Formula = "=SERIES(""AAPL"",,'ThomTrade-charts.xlsb'!Chart_Series_W_Gain_AAPL,1)" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T21:19:10.277

MSDN 指出您不能使用字母“C”或“R”（大写/小写）作为名称。我认为当这个字母是名称中的第一个字母是 R 或 C（或 r 或 c）时存在一个错误，我已经复制了您的错误。

尝试在连接到您的公式的字符串中使用名称的地址，如下所示：

```
Sub ChtSeries()
Dim objChartWGain As Chart
Dim objSeries As Series
Dim nmAddress As String
Dim n As Name

Set objChartWGain = Charts("W Gain")

'Replace with your Name definition:'
Set n = ActiveWorkbook.Names.Add("Chart_Series_W_Gain_AAPL", Sheets("Sheet2").Range("A2:A4"))

'Turn the Name's address in to a usable string:'
nmAddress = Replace(n.RefersTo, "=", vbNullString)

Set objSeries = objChartWGain.SeriesCollection(1)
objSeries.Formula = "=SERIES(""AAPL"",," & nmAddress & ",1)"

End Sub 
```

来自 MSDN 的信息在这里：

[http://office.microsoft.com/en-us/excel-help/define-and-use-names-in-formulas-HA102749565.aspx#_Learn_about_syntax](http://office.microsoft.com/en-us/excel-help/define-and-use-names-in-formulas-HA102749565.aspx#_Learn_about_syntax)

> 您不能使用大写和小写字符“C”、“c”、“R”或“r”作为定义的名称，因为它们都用作为当前选定的单元格选择行或列的简写，当您在名称或转到文本框中输入它们。

# c - 从命令行使用静态库编译程序

> ID：16002430
> 
> 赞同：-1
> 
> 时间：2013-04-14T18:02:30.600
> 
> 标签：c, visual-c++

好的，我创建了一个简单的静态库 myLib.lib，现在在我的程序中创建：

```
#include "mylib.h"

void somefun(){
       call a lib fun
} 
```

我编译

> cl myFile.c /link myLib.lib

但它给了我：

> 无法打开包含的文件“mylib.h”没有这样的文件或目录

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:25:54.993

您需要将位置添加`mylib.h`到包含路径中。否则你的图书馆找不到它。使用[`/I`标志](http://msdn.microsoft.com/en-us/library/73f9s62w.aspx)：

```
cl myFile.c /I ..\mylib\ /link myLib.lib 
```

*注意*：代码未经测试，但应该像这样工作。

# c++ - 是否可以编写没有 IDE 能够解析的代码？

> ID：16002432
> 
> 赞同：0
> 
> 时间：2013-04-14T18:02:37.210
> 
> 标签：c++

今天我想尝试一个名为[oglplus](http://oglplus.org/html/index.html)的 opengl 包装器。我可以使用该库，但我的 IDE 向我抛出大量错误消息。我用 QtCreator 和 EclipseCDT 进行了尝试。

基本上没有IDE能够看到各种类的成员/方法。所以我做了一些挖掘。例如，该类`FragmentShader`至少有两个方法，称为 Source 和 Compile。

Eclipse 和 QtCreator 向我展示了以下源代码。

```
#if OGLPLUS_DOCUMENTATION_ONLY
    /// Fragment shader wrapper
    /**
     *  @see Shader
     *  @see Program
     *  @ingroup objects
     */
    class FragmentShader
     : public Shader
    { };
    #elif GL_FRAGMENT_SHADER
    typedef Specialized<
        Shader,
        OGLPLUS_CONST_ENUM_VALUE(ShaderType::Fragment),
        SpecializedShaderInitializer
    > FragmentShader;
    #endif 
```

所以好吧，可能每个着色器都完全相同，只是名称不同。

```
class Shader
 : public ShaderOps
{
public:
    Shader(ShaderType type);
    Shader(ShaderType type, String description);
}; 
```

看来 ShaderOps 是重要的类。

我还在 ShaderOps 中找到了方法“Source”（它在公共块中）

```
const ShaderOps& Source(
        const GLchar** srcs,
        const GLint* lens,
        int count
    ) const
    {
        assert(_name != 0);
        OGLPLUS_GLFUNC(ShaderSource)(_name, count, srcs, lens);
        return *this;
    } 
```

您知道为什么*没有*IDE 能够看到这些方法吗？源代码中有什么奇怪的地方吗？

是否有可能编写出如此不同以至于 IDE 无法解析的代码？

ps：我只用eclipse cdt和Qtcreator测试过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T18:08:13.730

原因可能是 ifdef 守卫：`#if OGLPLUS_DOCUMENTATION_ONLY`

如果您没有正确定义预处理器，IDE 将不会显示相关的类/方法

# c# - Linq 查询对象引用未设置为对象的实例

> ID：16002434
> 
> 赞同：-1
> 
> 时间：2013-04-14T18:02:48.430
> 
> 标签：c#, wpf, linq, listbox

我有一个列表框，其中填充了 C# 中使用 Linq 的表中的条目。我将 DisplayMemberPath 设置为“国家/地区”，这很好，没有问题。从该列表框中选择国家/地区时，将触发选择更改事件。此处运行另一个 linq 查询以将选定的 CustomerID 与订单表中的 CustomerID 匹配。这也很好用。

现在。这就是问题所在。如果我从第一个国家/地区更改选择，我会收到错误

> 你调用的对象是空的。

问题出在 t2 变量上：

```
RESOLVED 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:14:18.323

将断点放在您的`SelectionChanged`事件中并检查`((ListBox)sender).SelectedValue`. 在这种情况下可能是`null`这样。

**编辑**

将其放入`null check`处理程序中，因为当`ItemsSource is reset`用于列表框时`SelectedValue is set to null`，然后重置为其他值，这将自动更新您的选择 -

```
private void lbxCountry_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if(((ListBox)sender).SelectedValue != null)
    {
       var t2 = (from o in db.Orders
                where o.CustomerID == ((ListBox)sender).SelectedValue.ToString()
                select o);
       lbxCustCountry.ItemsSource = t2;
       Tab0Total.Text = lbxCustCountry.Items.Count.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:43:11.443

当 SelectedIndex 变为 -1 时，它可能会引发一个事件，即没有选择任何内容。然后它将引发另一个事件，以将选择更改为新选择。

我建议将逻辑放入您的事件处理程序中，以适应 SelectedItem==null 时的情况。可能清除其他列表适合这种情况。

# c - 为什么我会收到“来自不兼容指针类型的赋值”错误？

> ID：16002439
> 
> 赞同：1
> 
> 时间：2013-04-14T18:03:01.707
> 
> 标签：c, pointers

我不断收到此错误，但无法弄清楚原因。任何帮助将不胜感激。

这是我的 stock.h 文件。

```
typedef struct stock {

char *stockSymbol;
float closingSharePrice;
float openingSharePrice;
int numberOfShares;
float (* getPrice) (void * S);
float (* getTotalDollarAmount) (void * S);
float (* getPercentChange) (void * S);
char * (* toString)(void * S);

 } stock_t; 

float returnPrice (stock_t *S);
float returnTotal (stock_t *S);
float returnPercentChange (stock_t *S);
char * returnString (stock_t *S); 
```

这是我的stocks.c 文件。

```
#include <stdio.h>
#include <stdlib.h>
#include "stocks.h"

float returnPrice (stock_t *S) {

S->getPrice = returnPrice;

    } 
```

它在 .c 文件中我将 getPrice 指针设置为等于 returnPrice 函数的行中，我得到了错误。我应该如何定义 assign getPrice 以使其指向 returnPrice 函数？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:11:01.660

`setPrice`期望的原型`float (* getPrice) (void * S);`意味着`setPrice`期望函数的参数接受指向任何数据类型的指针。但是，您的`returnPrice`方法更具限制性，因为`float returnPrice (stock_t *S)`它仅适用于/期望 a`stock_t*`作为参数，因此不符合`setPrice`指针的标准。

您需要声明`float returnPrice (void *S)`然后`S`在函数内部进行强制转换才能正常工作。或者转换函数指针本身。

```
typedef float (*GetPriceFunction) (void * S);

typedef struct stock 
{
    GetPriceFunction getPrice;
}

S->getPrice = (GetPriceFunction)returnPrice; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:18:04.240

`float (*) (void*)`并且`float (*) (stock_t*)`是不同的类型，因此投诉。

要定义您的函数，您可以使用例如以下语法：

```
typedef struct stock stock_t;
struct stock {
   ...
   float (* getPrice) (stock_t * S);
   ...
}; 
```

`void*`除非绝对必须，否则不要使用and casts。在这种情况下，您不必这样做。其他答案告诉您继续使用`void*`. 我恭敬地认为这是不明智的。

我不确定你为什么要在你做的地方做函数指针分配。这可能是错误的，尽管与编译器消息无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T18:12:14.813

这是因为`S->getPrice`是指向 a 的指针`float(void *)`，但是`returnPrice`是 a `float(stock_t *)`。它们不一样，也不兼容。

您可以通过更改函数签名来修复它：

```
float returnPrice(void * p)
{ 
    stock_t * S = p;
    S->getPrice = &returnPrice;
} 
```

# php - Zend DbTable 从其他模块的引用表中获取行

> ID：16002441
> 
> 赞同：0
> 
> 时间：2013-04-14T18:03:10.567
> 
> 标签：php, mysql, zend-framework, zend-db-table, relationships

我目前正在开发一个基于 Zend 框架 1.12 的项目。我使用不同的模块来尽可能地保持分离。我的数据存储在 mysql 数据库中，因此我在项目中设置了一些 db 表模型。表之间的关系应该由 Zend 框架 Zend_Db_Table 关系处理。我在我的课程中添加了必要的代码：

```
class User_Model_DbTable_Users extends Zend_Db_Table_Abstract
{
    protected $_name = 'users';
    protected $_primary = 'user_id';

    protected $_dependentTables = array('Diagnostics_Model_DbTable_Diagnostics');
} 
```

`User_Model_DbTable_Users`是父类，在`Users`模块内部定义。是被引用的类，在模块`Diagnostics_Model_DbTable_Diagnostics`内部定义。`Diagnostics`

```
class Diagnostics_Model_DbTable_Diagnostics extends Zend_Db_Table_Abstract
{
    protected $_name = 'diagnostics';
    protected $_primary = 'diagnostic_id';

    protected $_referenceMap = array(
        'User' => array(
            'columns'   =>  array('diagnostic_user'),
            'refTableClass' =>  'User_Model_DbTable_Users',
            'refColumns'    =>  array('user_id')
        )
    );
} 
```

当我现在尝试使用

> `$row->findDiagnostics_Model_DbTable_Diagnostics();`

我收到一个错误：

> **文件“Diagnostics\Model\DbTable\Diagnostics.php”不存在或在文件中找不到类“Diagnostics_Model_DbTable_Diagnostics”**

当我将类移动`Diagnostics_Model_DbTable_Diagnostics`到用户模块并相应地重命名它时，一切正常。所以在我看来，它似乎与在不同模块中定义的类有关。我在研究过程中发现的所有文章都无法回答这个问题。也许我在主要`Bootstrap.php`或`application.ini`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:40:40.840

您将需要引导模块。好信息：[http ://akrabat.com/zend-framework/bootstrapping-modules-in-zf-1-8/](http://akrabat.com/zend-framework/bootstrapping-modules-in-zf-1-8/)

我使用一个简单的类如下：

```
class Diagnostics_Bootstrap extends Zend_Application_Module_Bootstrap {
     ...
} 
```

不要引导你不需要的模块，我建议阅读[http://www.mwop.net/blog/234-Module-Bootstraps-in-Zend-Framework-Dos-and-Donts.html](http://www.mwop.net/blog/234-Module-Bootstraps-in-Zend-Framework-Dos-and-Donts.html)

# java - 如何在正则表达式中定义切换案例？

> ID：16002444
> 
> 赞同：4
> 
> 时间：2013-04-14T18:03:15.147
> 
> 标签：java, regex

如何制作执行以下操作的单个正则表达式：

“一般来说，做一个通用的正则表达式。但如果特定字符相互跟随，请以不同的方式检查这些特定字符后面的字符串”？

```
one == two && three | four 
```

一般的正则表达式是：`[&|=\s]+`.

拆分时会导致：`one, two, three, four`.

但是，如果我想在每次有`=`字符时应用不同的正则表达式，并且希望后面的表达式`=`只在`|`字符处停止呢？这样我就可以得到结果：`one, two && three, four`.

我怎么能这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T18:11:42.623

这是一种可能性：

```
(?=[&|=\s])[&|\s]*(?:=[^|]*?[|][&|=\s]+)? 
```

或者在带有解释的自由间距模式下：

```
(?=[&|=\s])  # make sure there is at least a single separator character ahead;
             # this is important, otherwise you would get empty matches, and
             # depending on your implementation split every non-separator
             # character apart.
[&|\s]*      # same as before but leave out =
(?:          # start a (non-capturing) group; it will be optional and treat the
             # special =...| case
  =          # match a literal =
  [^|]*?     # match 0 or more non-| characters (as few as possible)
  [|]        # match a literal | ... this is the same as \|, but this is more
             # readable IMHO
  [&|=\s]+   # and all following separator characters
)?           # make the whole thing optional 
```

[试试看。](http://fiddle.re/5bxh6)

**编辑：**

我刚刚意识到，这吞噬了中心部分，但你也想归还它。在这种情况下，您最好使用匹配而不是拆分（使用`find`）。这种模式应该可以解决问题：

```
=[&|=\s]*([^|]+?)[&|=\s]*[|]|([^&|=\s]+) 
```

现在，第一个或第二个捕获组将包含所需的结果。这是一个解释：

```
#this consists of two alternatives, the first one is the special case
  =            # match a literal =
  [&|=\s]*     # consume more separator characters
  ([^|]+?)     # match 1 or more non-| characters (as few as possible) and
               # capture (group 1)
  [&|=\s]*     # consume more separator characters
  [|]          # match a literal |
|              # OR
  ([^&|=\s]+)  # match 1 or more non-separator characters (as many as possible)
               # and capture (group 2) 
```

[试试看。](http://www.regexplanet.com/cookbook/ahJzfnJlZ2V4cGxhbmV0LWhyZHNyDgsSBlJlY2lwZRjr6lwM/index.html)

# jquery - Flickr API 到 jQuery 的 html 画廊

> ID：16002451
> 
> 赞同：0
> 
> 时间：2013-04-14T18:03:33.780
> 
> 标签：jquery, html, json, flickr

如果这是在错误的论坛上，这是我第一次在网站上道歉。

我正在尝试从我网站上的灯箱画廊的 flickr 集中提取图像。灯廊需要照片按以下方式编码：

```
<ul>
    <li data-type="media" data-url="FULL SIZE URL"></li>
    <li data-thumbnail-path="THUMBNAIL URL"></li>
</ul> 
```

我想在我命名的 div 中插入照片`<div id="test"><div>`这是我在查阅 Flick API 常见问题并查看其他代码后制作的 javascript：

```
$(function () {

$.ajax({
    url: 'http://api.flickr.com/services/rest/',
    data: {
        format: 'json',
        method: 'flickr.photosets.getPhotos',
        api_key: 'MY KEY',
        photoset_id: 'THE SET I'M USING',
        per_page: '50'
    },
    dataType: 'jsonp',
    jsonp: 'jsoncallback'
}).done(function (data) {
    var gallery = $('#test'),
        url;
$.each(data.photoset.photo, function (index, photo) {
        url = 'http://farm' + photo.farm + '.static.flickr.com/' +
            photo.server + '/' + photo.id + '_' + photo.secret;
        $('<ul>')
            .append($('<li>').prop('data-url', url + '_b.jpg').prop('data-type', 'media'))
            .append($('<li>').prop('data-thumbnail-path', url + '_s.jpg'))
        .appendTo(gallery);
    }); 
}); 
```

目前，我将 javascript 放在我的 html 标题中，但是当我运行页面时 div 是空的。

我错过了什么？

谢谢！

更新 1：我错过了`});`js 代码末尾的 a 。谢谢@dfsq 现在我们已经附加了部分工作，但是 flickr 数据仍然没有被传递给 li 道具。这是当前插入的内容的片段

```
<ul>
  <li></li>
  <li></li>
</ul> 
```

更新 2：通过将每个更改`.prop`为`.attr`剩余的问题已解决....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T03:09:36.937

修正后的js如下：

```
$(function () {

$.ajax({
    url: 'http://api.flickr.com/services/rest/',
    data: {
        format: 'json',
        method: 'flickr.photosets.getPhotos',
        api_key: 'MY KEY',
        photoset_id: 'THE SET I'M USING',
        per_page: '50'
    },
    dataType: 'jsonp',
    jsonp: 'jsoncallback'
}).done(function (data) {
    var gallery = $('#test'),
        url;
$.each(data.photoset.photo, function (index, photo) {
        url = 'http://farm' + photo.farm + '.static.flickr.com/' +
            photo.server + '/' + photo.id + '_' + photo.secret;
        $('<ul>')
            .append($('<li>').attr('data-url', url + '_b.jpg').attr('data-type', 'media'))
            .append($('<li>').attr('data-thumbnail-path', url + '_s.jpg'))
        .appendTo(gallery);
    }); 
  });
}); 
```

# c# - 而（现在<结束）没有在结束时间结束它仍然继续无限循环？

> ID：16002456
> 
> 赞同：-1
> 
> 时间：2013-04-14T18:03:53.140
> 
> 标签：c#, wpf, windows, datetime, loops

我对 C# 很陌生，我正在使用修改后的 WPF 应用程序。我的程序的问题是循环是无限的......而（现在<结束）并没有在结束时间结束它仍然继续直到你终止主进程。该程序正在显示电影和图片，因此每次都不同。这意味着 now = now.AddSeconds 不起作用。对？

启动信息 = 列表框

```
 private bool startjob() //DateTime checking for DateValue and start's if correct value.
    {
        DateTime? start = DateTimePicker1.Value;
        DateTime? end = DateTimePicker2.Value;
        DateTime now = DateTime.Now;

        if (start == null || end == null)
        {
            Xceed.Wpf.Toolkit.MessageBox.Show("one of the pickers is empty");
        }
        else if (now >= start.Value && now <= end.Value)
        {
            while (now < end)
            {
                foreach (var selected in startupinfo.SelectedItems)
                {
                    string s = selected.ToString();

                    if (startupinfoDict.ContainsKey(s))
                    {

                        Process process = Process.Start(startupinfoDict[s]);
                        process.WaitForExit();
                        while (!process.HasExited)
                            Thread.Sleep(500);
                    }
                }
                foreach (var selected in listBox2.SelectedItems)
                {
                    string s = selected.ToString();

                    if (listBox2Dict.ContainsKey(s))
                    {
                        Process process = Process.Start(listBox2Dict[s]);
                        process.WaitForExit();
                        while (!process.HasExited)
                            Thread.Sleep(500);
                    }
                }
            }
            return true;
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:05:47.110

您永远不会费心在循环中重新评估“现在”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:06:17.317

您没有修改`now`循环中的值。它将始终评估`now < end`为 True。因此无限循环

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T18:06:28.493

你的`now`变量的值永远不会改变。你可以这样循环：

```
while (DateTime.Now < end.Value) 
```

# java - 无法运行 JFlex 生成的 lexer Java 文件

> ID：16002459
> 
> 赞同：2
> 
> 时间：2013-04-14T18:04:14.667
> 
> 标签：java, compiler-construction, lex, lexer, jflex

所以我使用 JFlex 生成了一个名为 Yylex.java 的文件，没有任何问题。当我尝试使用 command 编译它时`javac Yylex.java`，我收到 30 个错误，源于此：

```
Yylex.java:13: error: package java_cup.runtime does not exist
import java_cup.runtime.Symbol; 
```

这显然是由我的 JFlex 文件中的第一次导入引起的。由于我试图将它与 CUP 一起使用，我读到我需要将 java-cup-11a.jar 文件和 java-cup-11a-runtime.jar 与 Yylex.java 放在同一个文件夹中，我这样做了. 有谁知道怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:08:10.317

简单地将罐子放在目录中是不够的，您必须使用`-cp`命令行选项将它们添加到类路径中，例如

`javac -cp ava-cup-11a-runtime.jar Yylex.java`

# mysql - Magento 站点因 mysql 错误而关闭 一般错误：1030 Got error -1 from storage engine

> ID：16002461
> 
> 赞同：2
> 
> 时间：2013-04-14T18:04:16.313
> 
> 标签：mysql, magento

我什至从 log_visitor 表中删除了所有记录，仍然遇到同样的问题。以下是我得到的堆栈。SQLSTATE[HY000]: 一般错误: 1030 Got error -1 from storage engine

```
#0 /home/site/public_html/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 /home/site/public_html/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 /home/site/public_html/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 /home/site/public_html/lib/Zend/Db/Adapter/Pdo/Abstract.php(238):     Zend_Db_Adapter_Abstract->query('INSERT INTO `lo...', Array)
#4 /home/site/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('INSERT INTO `lo...', Array)
#5 /home/site/public_html/lib/Zend/Db/Adapter/Abstract.php(574): Varien_Db_Adapter_Pdo_Mysql->query('INSERT INTO `lo...', Array)
#6 /home/site/public_html/app/code/core/Mage/Core/Model/Resource/Db/Abstract.php(453): Zend_Db_Adapter_Abstract->insert('log_visitor', Array)
#7 /home/site/public_html/app/code/core/Mage/Core/Model/Abstract.php(318): Mage_Core_Model_Resource_Db_Abstract->save(Object(Mage_Log_Model_Visitor))
#8 /home/site/public_html/app/code/core/Mage/Log/Model/Visitor.php(167): Mage_Core_Model_Abstract->save()
#9 /home/site/public_html/app/code/core/Mage/Core/Model/App.php(1338): Mage_Log_Model_Visitor->initByRequest(Object(Varien_Event_Observer))
#10 /home/site/public_html/app/code/core/Mage/Core/Model/App.php(1317): Mage_Core_Model_App->_callObserverMethod(Object(Mage_Log_Model_Visitor), 'initByRequest', Object(Varien_Event_Observer))
#11 /home/site/public_html/app/Mage.php(447): Mage_Core_Model_App->dispatchEvent('controller_acti...', Array)
#12 /home/site/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(528): Mage::dispatchEvent('controller_acti...', Array)
#13 /home/site/public_html/app/code/core/Mage/Core/Controller/Front/Action.php(64): Mage_Core_Controller_Varien_Action->preDispatch()
#14 /home/site/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(408): Mage_Core_Controller_Front_Action->preDispatch()
#15 /home/site/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#16 /home/site/public_html/app/code/local/SM/Vendors/Controller/Router/Vendor.php(76): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#17 /home/site/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): SM_Vendors_Controller_Router_Vendor->match(Object(Mage_Core_Controller_Request_Http))
#18 /home/site/public_html/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#19 /home/site/public_html/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#20 /home/site/public_html/index.php(87): Mage::run('', 'store')
#21 {main}

Fatal error: Exception thrown without a stack frame in Unknown on line 0 
```

这是一个直播网站，我需要尽快让它上线。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-08T01:43:28.903

这是 InnoDB 无法写入其数据文件时发生的一般错误。

当磁盘已满，或者文件的权限发生更改以致您无法写入它们时，我已经看到了有关此问题的报告。

另一份报告是当有人启用`innodb_force_recovery`大于 0 的值时，没有意识到在恢复模式 >0 时，InnoDB 实际上是只读的。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T00:24:51.667

尝试删除文件夹 var/cache 和 var/session 它对我有用

# jquery - 有没有办法仅使用 CSS 来定位具有值的所有文本区域？

> ID：16002469
> 
> 赞同：3
> 
> 时间：2013-04-14T18:04:59.250
> 
> 标签：jquery, css, textarea, css-selectors

我认为这很简单，但我找不到任何表明我可以使用 CSS 来定位页面上的非空文本区域的东西。

如果 CSS 绝对不支持，我可以使用 JS，但即使使用 jQuery，我也找不到使用选择器的方法，但必须明确检查 .val()。

*一些上下文：我有一个可选的文本区域，可以扩展焦点，但是如果用户确实决定输入某些内容，我不希望它在焦点离开时再次缩小。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T18:08:10.347

标记方面，`:empty`选择器应该允许您选择绝对没有内容的文本区域，甚至没有空格或换行符。相反`:not(:empty)`应该让您选择非空文本区域。

CSS 中的选择器大部分是静态的，这意味着它们不考虑动态变化，例如在页面加载后编辑文本区域的内容。此外，像这样的选择器`:empty`并没有真正考虑到文本区域的值，因为它通常检查内容节点的存在（或不存在），所以我怀疑它不能很好地处理表单。

如果您需要根据表单字段的值动态应用样式，则需要使用脚本在`.val()`每次更新时使用或类似的方式检查其值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:22:52.733

怎么用`.filter()`？

```
 $("input").filter(function() { return this.value == ""; }).css('dosomething'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T18:12:51.487

看看`:invalid & :valid`CSS3 伪类：

[演示](http://jsfiddle.net/eAYsp/1/)

```
<textarea required="required"></textarea>

textarea:invalid{background:red}
textarea:valid{background:blue} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T18:27:25.143

`$('textarea:empty')`是一种很好的方法，但是当我正在处理其内容可能不断变化并且在某一点为空而下一个非空的文本区域时，这仍然需要在用户每次关注和离开文本区域时进行检查。

我最终`.empty`在我的文本区域中添加了一个类，并在每次`.focusout`触发时检查它的值：

```
$('textarea').focusout(function() {
  if ($(this).val() == '') { $(this).addClass('empty'); }
  else { $(this).removeClass('empty'); }
  }); 
```

这样，`.empty`即使用户输入了某些内容并决定将其全部删除，我也可以将样式保留在样式表中，并且使用 get 定义的规则。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-14T18:10:38.753

是的，你可以在 jQuery 中做到这一点：

```
$('textarea:not(:empty)').css('color','red'); 
```

[**在这里演示**](http://jsfiddle.net/Znj5x/)

# snmp - MIB 表中的索引

> ID：16002470
> 
> 赞同：0
> 
> 时间：2013-04-14T18:05:01.190
> 
> 标签：snmp, mib, snmp-trap

我想在 MIB 中使用分层表结构来实现 SNMPv2-Trap，类似于此答案中描述的结构[https://stackoverflow.com/a/2510340/346899](https://stackoverflow.com/a/2510340/346899)

但是，对于 MIB 表中的条目，我并没有真正了解 INDEX 的概念。例如，在以下引用答案的摘录中，`childIndex`使用了子表中的条目：

```
childEntry OBJECT-TYPE
SYNTAX       ChildEntry
MAX-ACCESS   not-accessible
STATUS       current
DESCRIPTION  "Entry in Child table"
INDEX        { parentIndex,
               childIndex }
::= { childTable 1 } 
```

但是，如果我没有`childIndex`在它使用的已使用 Trap-MIB 中指定特殊内容，我的 Trap 接收器（通过 iReasoning）也可以工作。那么索引的目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:53:31.870

此索引仅用于表检索，您可以使用 GET NEXT 或 GET BULK 消息来查询表中的所有对象。只有基于 INDEX 信息，您才能知道如何将接收到的对象格式化为适当的表格。

> “但是，如果我没有`childIndex`在它使用的已用 Trap-MIB 中指定特殊内容，我的 Trap 接收器（通过 iReasoning）也可以工作。”

**编辑：** 对于陷阱接收器，它取决于 MIB 文档来了解如何解释传入的通知。幸运的是，在几乎所有标准 MIB 文档中，对于 NOTIFICATION-TYPE 对象，定义都很明确。例如，在 RFC 4898

[https://www.rfc-editor.org/rfc/rfc4898](https://www.rfc-editor.org/rfc/rfc4898)

```
tcpEStatsEstablishNotification NOTIFICATION-TYPE
   OBJECTS     {
                 tcpEStatsConnectIndex
               }
   STATUS      current
   DESCRIPTION
       "The indicated connection has been accepted
       (or alternatively entered the established state)."
   ::= { tcpEStatsNotifications 1 } 
```

OBJECTS 部分显示了如何解释对象。

因此，陷阱接收器确实没有必要返回并检查您是否错误地定义了表（在此 MIB 的开头）。

您对表的更改只会是一个问题，当此 MIB 文档用于解释表的 GET NEXT 或 GET BULK 结果时，因为那时实用程序会发现缺少一些索引项。

# c++ - 如何纠正不一致的未解决的外部错误？

> ID：16002474
> 
> 赞同：2
> 
> 时间：2013-04-14T18:05:12.583
> 
> 标签：c++, visual-studio, debugging, sfml, unresolved-external

我正在尝试使用 SFML 库来了解 C++ 开发。我正在学习教程（[http://www.gamefromscratch.com/page/Game-From-Scratch-CPP-Edition-Part-7.aspx](http://www.gamefromscratch.com/page/Game-From-Scratch-CPP-Edition-Part-7.aspx)），并使用 Visual Studio 2010。

我一直遇到的一个关于未解决的外部问题的问题。我真的在为此苦苦挣扎，因为与我遇到的大多数错误不同，它似乎 a) 与代码没有任何关系，并且 b) 行为不一致。与其给你们一个具体的例子并寻求帮助来解决这个例子，我希望开发一种更可靠的方法来解决这些问题。不过，我会给你一个常见情况的概述。

我有一个解决方案，其中包含 8 个头文件和对应于它们的 8 个 cpp 文件。解决方案是稳定的：它编译和运行没有错误或警告。

我将进入一个头文件并添加这一行：

虚空 DoNothing();

然后我将进入匹配的 cpp 文件并编写方法：

无效 DoNothing(){};

我编译并运行，得到 5 个未解决的外部错误。它们没有指向任何代码行，所以我真的不知道如何修复它们，但我显然做错了什么。很公平。为了回到稳定状态，我删除了我插入的两行代码，然后编译。即使代码与最后一个稳定状态相同，我也会得到相同的未解决的外部错误。

尝试随机的事情，我进入另一个 cpp 文件并颠倒两个包含的头文件的顺序。游戏现在编译。如果我将包含的头文件的顺序切换回来，它就会编译。

什么是未解决的外部错误？为什么他们的行为似乎与我输入的代码不一致？我如何阅读它们以找出问题所在，以及如何首先避免它们？

谢谢你。

ps：如果我应该提供更具体的细节，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:45:02.960

“未解决的外部”错误意味着您的代码引用了不存在的东西（通常是函数或方法，但也可以是变量）。这些是*链接*错误，而不是*编译*错误；这就是为什么您没有得到行号和更有用的错误消息的原因。

让我给你一些关于如何将 C++ 代码转换为可执行文件的背景知识（请记住，我正在简化一些事情。）

项目中的每个 C++ 源文件（而不是头文件）都是单独编译的。“.cpp”文件和它包含的所有头文件都被编译成所谓的*目标文件*或*目标代码*。（这些文件具有“.obj”或“.o”扩展名。）您还可以将库文件（即 Windows 上的“.lib”文件和 Linux 上的“.a”文件）视为这些目标文件的集合, 保存以备后用。

为了生成可执行程序（例如 Windows 上的 EXE 或 DLL 文件），所有这些目标文件都*链接*在一起，*瞧*！

现在，重要的是每个源文件都是独立编译*的，*并且独立于其他源文件。因此，如果一个文件中的代码调用了另一个文件中实现的函数，编译器将看不到该函数的实际主体，并且只能假设只要被调用函数的*声明*是可见的（即*原型*，即您在标题中编写的行，）然后这些文件最终将链接在一起，并将离开实际调用链接器的任务。这通常意味着只要您包含正确的标头，您的编译器就会很高兴。

但是链接器将更加顽固和迂腐。在链接时，您确实需要提供您在整个项目中使用的所有功能的主体（即实现）。您的任务是确保所有正确的目标文件和库都链接在一起，并且每个使用的函数的实现在它们之间的某个地方恰好存在一次（不多也不少。）

这给我们带来了您的问题。当您收到“未解决的外部”链接器错误时，这意味着您调用的函数的主体在您链接在一起的目标文件和库中的任何位置都不存在。

显然，正在发生两件事之一。要么你已经包含了一个外部库的头文件，但是忘记了链接库文件本身（这不是你的问题）或者你已经声明了一个函数（即为它编写了原型）但忘记了实现它的主体.

请记住，链接器在这里非常严格。如果您在课堂上声明这样的内容：

```
class Foo {
    void bar (int x);
}; 
```

然后在你的“.cpp”文件中，实现这个功能：

```
void bar (int x)
{
    // Do nothing
} 
```

那么如果您实际上`Foo::bar()`在程序中的任何地方调用，您将得到一个未解决的外部错误，因为已实现`bar()`的方法不是`Foo`（您应该已经实现`void Foo::bar (int x) {}`）。如果您稍微拼写错误或参数类型错误或诸如此类，也会发生类似的事情.

阅读链接器错误并从中理解*可能*很困难。有时，链接器抱怨的名称（它说它找不到的“符号”）都被破坏得面目全非。这与 *Application Binary Interface*s (ABI) 和几十年的历史和优先级有关。无论如何，大多数时候，如果您仔细查看链接错误消息，您可以看到函数名称并检查您的代码（或库）并重试。

此外，虽然这种情况很少见，但有时为了解决某些链接问题，您必须求助于完全重建您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:28:37.160

每次我看到这样的行为都是因为项目之间的循环引用。例如，项目 A 引用了项目 B 中实现的对象/符号，同时项目 B 引用了项目 A 中的对象/符号。每次构建解决方案时，工具都必须编译一个项目首先，然后是另一个。如果您对要编译的第二个项目进行更改，则第一个在第一轮编译中看不到更改，并且构建失败。如果您设法手动构建项目 B（针对现在已过时的库 B 副本），则解决方案开始正确构建。更复杂的循环是可能的（例如，A 取决于 B，B 取决于 C，C 取决于 A）。您没有明确提及多个项目，但我敢打赌您拥有它们。

这些循环引用在已经存在很长时间并且随着时间的推移缓慢增长的大型解决方案中很常见。人们习惯于添加从所有事物到所有事物的链接，因为他们需要*这里的一个函数，**那里*的结构......

寻找这些依赖关系。您应该能够从源代码进行完全干净的重建。你的依赖树应该看起来像……嗯，一棵树；不是图表。

# matlab - 如何在 matlab 中绘制多个 3d 立方体

> ID：16002476
> 
> 赞同：5
> 
> 时间：2013-04-14T18:05:28.143
> 
> 标签：matlab, 3d, cube

我正在尝试在一个 M 文件中绘制 2 个立方体。这是我的代码：

```
    格式紧凑
    h(1) = axes('位置',[0.2 0.2 0.6 0.6]);
    顶点 = [1 1 1; 1 2 1; 2 2 1; 2 1 1 ; ...
            1 1 2;1 2 2; 2 2 2；2 1 2]；
    fac = [1 2 3 4; ...
        2 6 7 3; ...
        4 3 7 8；...
        1 5 8 4；...
        1 2 6 5；...
        5 6 7 8]；
    patch('Faces',fac,'Vertices',vert,'FaceColor','r'); % 补丁函数
    材质有光泽；
    阿尔法（“颜色”）；
    alphamap('rampdown');
    视图（30,30）；

```

现在，我想绘制第二个立方体并替换第一个立方体。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-03T08:51:57.530

也许你想要这样的东西： ![在此处输入图像描述](https://i.stack.imgur.com/Qs6EK.png)

你只需要稍微修改你的原始代码： 1\. 定义一个新的立方体，它应该放在第一个里面。2.请记住在“patch”后面加上“hold on”。

```
clf;
figure(1);
format compact 
h(1) = axes('Position',[0.2 0.2 0.6 0.6]);
vert = [1 1 -1; 
        -1 1 -1; 
        -1 1 1; 
        1 1 1; 
        -1 -1 1;
        1 -1 1; 
        1 -1 -1;
        -1 -1 -1];

fac = [1 2 3 4; 
       4 3 5 6; 
       6 7 8 5; 
       1 2 8 7; 
       6 7 1 4; 
       2 3 5 8];

% I defined a new cube whose length is 1 and centers at the origin.
vert2 = vert * 0.5;  
fac2 = fac;

patch('Faces',fac,'Vertices',vert,'FaceColor','b');  % patch function
axis([-1, 1, -1, 1, -1, 1]);
axis equal;

hold on;

patch('Faces', fac2, 'Vertices', vert2, 'FaceColor', 'r');
material metal;
alpha('color');
alphamap('rampdown');
view(3); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T18:16:41.520

使用`hold on`命令...

```
format compact 
h(1) = axes('Position',[0.2 0.2 0.6 0.6]);
%----first cube------
vert = [1 1 1; 1 2 1; 2 2 1; 2 1 1 ; ...
        1 1 2;1 2 2; 2 2 2;2 1 2];
fac = [1 2 3 4; ...
    2 6 7 3; ...
    4 3 7 8; ...
    1 5 8 4; ...
    1 2 6 5; ...
    5 6 7 8];
patch('Faces',fac,'Vertices',vert,'FaceColor','r');  % patch function
material shiny;
alpha('color');
alphamap('rampdown');
view(30,30);

%------second cube-----
hold on;
vert2 = [1 1 1; 1 2 1; 2 2 1; 2 1 1 ; ...
            1 1 2;1 2 2; 2 2 2;2 1 2]/5;
    fac2 = [1 2 3 4; ...
        2 6 7 3; ...
        4 3 7 8; ...
        1 5 8 4; ...
        1 2 6 5; ...
        5 6 7 8];
    patch('Faces',fac2,'Vertices',vert2,'FaceColor','b');  % patch function 
```

# mongodb - 避免重复具有不同_id的项目的mongodb查询

> ID：16002477
> 
> 赞同：0
> 
> 时间：2013-04-14T18:05:30.787
> 
> 标签：mongodb

我正在处理由第 3 方提供的事件转储。在这个转储中，它们有重复的事件，它们完全相同，但有不同的_id。所以我的目标是提供唯一的数据，所以我不能使用重复事件。是否可以构建只返回具有唯一值的文档的查询？

可以说，在每个文档中我都有`EventId`字段，并且我需要所有事件，并且具有唯一性`EventID`

我无法更改转储，只有读取权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:09:06.390

您可以使用 db.collection.distinct() 方法[http://docs.mongodb.org/manual/reference/method/db.collection.distinct/](http://docs.mongodb.org/manual/reference/method/db.collection.distinct/)

# php - 创建具有数组属性的类更好的方法

> ID：16002479
> 
> 赞同：0
> 
> 时间：2013-04-14T18:05:45.993
> 
> 标签：php, arrays, oop

我成功创建了一个类并将其保存到页面中。我在这里使用了特殊的 php 字符。不使用那些无论如何都可以使用 OOP 中的任何魔术方法创建一个类

请看这个波纹管代码。我完整更新它

```
<?php

$title = null;
$online = null;
$offline = null;
$email = null ;
$metadescription = null;
$metakeywords = null ;
$copyright = null;
$pard_host = null;
$pard_database = null;
$username = null;
$password = null ;

if(isset($_POST["title"])){$title = $_POST["title"];}
if(isset($_POST["online"])){$online = $_POST["online"];}
if(isset($_POST["offline"])){$offline = $_POST["offline"];}
if(isset($_POST["email"])){$email = $_POST["email"];}
if(isset($_POST["meta-description"])){$metadescription = $_POST["meta-description"];}
if(isset($_POST["meta-keywords"])){$metakeywords = $_POST["meta-keywords"];}
if(isset($_POST["copyright"])){$copyright = $_POST["copyright"];}
if(isset($_POST["pard_host"])){$pard_host = $_POST["pard_host"];}
if(isset($_POST["pard_database"])){$pard_database = $_POST["pard_database"];}
if(isset($_POST["username"])){$username = $_POST["username"];}
if(isset($_POST["password"])){$password = $_POST["password"];}  

class pard_admin_Config{

    function __construct($TITLE,$ONLINE,$OFFLINE,$EMAIL,$METADESCRIPTION,$METAKEYWORDS,$COPYRIGHT,$HOST,$DATABASE,$USERNAME,$PASSWORD) {
        $this->TITLE = $TITLE;
        $this->ONLINE= $ONLINE;
        $this->OFFLINE = $OFFLINE;
        $this->EMAIL = $EMAIL;
        $this->METADESCRIPTION = $METADESCRIPTION;
        $this->METAKEYWORDS= $METAKEYWORDS;
        $this->COPYRIGHT = $COPYRIGHT;
        $this->HOST = $HOST;
        $this->DATABASE= $DATABASE;
        $this->USERNAME = $USERNAME;
        $this->PASSWORD = $PASSWORD;
    }
}

$adminConfig  = new pard_admin_Config($title,$online,$offline,$email,$metadescription,
$metakeywords,$copyright,$pard_host,$pard_database,$username,$password);

$pardConfig = new PDO('mysql:host=localhost;dbname=pard', "root", "");
if(isset($pardConfig)){
    echo $adminConfig->TITLE;

    }
$SQL =<<<'EOD'
CREATE TABLE IF NOT EXISTS pard_admin_config(
title varchar(255) NOT NULL,
online varchar(100),
offline varchar(100),
email varchar(100),
metades varchar(200),
metakey varchar(200),
copyright varchar(200),
pard_host varchar(100),
pard_database varchar(100),
username varchar(100),
password varchar(100)
)
EOD;

$pardConfig->query($SQL);

$stmt = $pardConfig->prepare("INSERT INTO pard_admin_config (title, online, offline, email, metades, metakey, copyright, pard_host, pard_database, username, password) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
ON DUPLICATE KEY UPDATE 
title=values(title), online=values(online), offline=values(offline), email=values(email), metades=values(metades), metakey=values(metakey), copyright=values(copyright), pard_host=values(pard_host), pard_database=values(pard_database), username=values(username), password=values(password)");
 $ConfigData = array($adminConfig->TITLE,
 $adminConfig->ONLINE,
 $adminConfig->OFFLINE,
 $adminConfig->EMAIL,
 $adminConfig->METADESCRIPTION,
 $adminConfig->METAKEYWORDS,
 $adminConfig->COPYRIGHT,
 $adminConfig->HOST,
 $adminConfig->DATABASE,
 $adminConfig->USERNAME,
 $adminConfig->PASSWORD);
$stmt->execute($ConfigData);

$classProperties =  "<?php \n class PardFactory { \n public \$TITLE = '$adminConfig->TITLE';\n public \$ONLINE = '$adminConfig->ONLINE';\n public \$OFFLINE =  '$adminConfig->OFFLINE';\n public \$EMAIL =  '$adminConfig->EMAIL';\n public \$METADESCRIPTION =   '$adminConfig->METADESCRIPTION';\n public \$METAKEYWORDS =  '$adminConfig->METAKEYWORDS';\n public \$COPYRIGHT =  '$adminConfig->COPYRIGHT';\n public \$HOST =  '$adminConfig->HOST';\n public \$DATABASE =  '$adminConfig->DATABASE';\n public \$USERNAME =  '$adminConfig->USERNAME';\n public \$PASSWORD =  '$adminConfig->PASSWORD';\n } \n ?>";

$file = fopen("../../pard_config/configuration.php","w");
fwrite($file,$classProperties);
fclose($file);
?> 
```

**此代码创建一个类**

```
<?php 
 class PardFactory 
 { 
     public $TITLE = '';
     public $ONLINE = '';
     public $OFFLINE =  '';
     public $EMAIL =  '';
     public $METADESCRIPTION =   '';
     public $METAKEYWORDS =  '';
     public $COPYRIGHT =  '';
     public $HOST =  '';
     public $DATABASE =  '';
     public $USERNAME =  '';
     public $PASSWORD =  '';
 } 
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:54:16.727

如果您只需要一个表示数据的简单对象，则可以使用 stdClass 或关联数组：

目的：

```
$cls = new stdClass();
$cls->param = 'string';
$cls->{'param2'} = 12; 
```

大批：

```
$arr = array(
    'param'=> 'string',
    'param2' => 12
); 
```

stdClass 的优势在于它是一个“纯”php 对象，默认情况下您可以通过 ref 将其发送到您的代码中，而无需在数组示例中设置 & 来通过 ref 传递它。

数组的优点是您可以将其设置在一行中。

# c# - 删除字符串数组中的空格

> ID：16002480
> 
> 赞同：1
> 
> 时间：2013-04-14T18:05:46.857
> 
> 标签：c#, arrays

我有一个包含这种格式数字的文本文件：

```
84  152  100       
86  149   101     
83   149   99    
86  142   101 
```

我怎样才能删除空格并把它变成这个形状：

```
84 152 100       
86 149 101     
83 149 99    
86 142 101 
```

这是我迄今为止尝试过的：

```
string path = Directory.GetCurrentDirectory();
string[] lines = System.IO.File.ReadAllLines(@"data_1_2.txt");
string[] line = lines[0].Trim().Split(new string[] { " " }, StringSplitOptions.RemoveEmptyEntries); 
```

但是这个输入的结果是：

```
84
152
100 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T18:08:22.720

使用一点 LINQ 魔法：

```
lines = lines.Select(l => String.Join(" ", l.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries))).ToArray(); 
```

它将使用空格作为分隔符拆分每一行，删除空条目并再次使用空格作为分隔符将它们连接回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:13:47.210

您可以使用一个简单的正则表达式：

```
lines = lines.Select(line => Regex.Replace(line, @"\s+", " ")).ToArray(); 
```

# guice - 用 Guice 代替抽象工厂？

> ID：16002484
> 
> 赞同：4
> 
> 时间：2013-04-14T18:06:01.760
> 
> 标签：guice, factory-pattern

我是 Guice 的新手，我想知道我能走多远。我有一个`UserInfo`包含多个实现类`GoogleUserInfo`等`FacebookUserInfo`的接口`TwitterUserInfo`。这些类是使用工厂创建的

```
public class UserInfoFactory {
  public UserInfo createFromJsonString(String jsonspec) {
    .
    .
    .

  }
} 
```

创建由 JSON 字符串控制，该字符串`jsonspec`控制返回哪个实现类`UserInfo`。具体来说，有一个 JSON 字符串元素`domain`控制创建。创建确实是`jsonspec`使用GSON的反序列化功能。
我想知道是否有一种用 Guice 依赖注入替换这个创建的好方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T23:32:21.803

您可以将 Guice 集成到工厂中，但在这种情况下，您的代码可能会更好。

这实际上是那些不能轻易替换的工厂之一，因为它必须包含逻辑来解析`jsonSpec`并更改它返回的具体类型。假设稍微简化的工厂版本如下所示：

```
public class UserInfoFactory {
  public UserInfo createFromJsonString(String jsonspec) {
    if(getUserType(jsonSpec) == TWITTER) {
      return new TwitterUserInfo(jsonSpec);
    } else { /* ... */ }
  }

  private UserInfoType getUserType(String jsonSpec) { /* ... */ }
} 
```

这种逻辑必须存在于某个地方，而您自己的`UserInfoFactory`似乎是一个完美的家。但是，因为您使用`new`，您将无法注入任何`TwitterUserInfo`' 依赖项，或其依赖项' 的依赖项——*这*是 Guice 很好地解决的问题类型。

您*可以*`TwitterUserInfo`作为注入`Provider`，这将使您可以访问任意数量的完全注入`TwitterUserInfo`对象：

```
public class UserInfoFactory {
  @Inject Provider<TwitterUserInfo> twitterUserInfoProvider;

  public UserInfo createFromJsonString(String jsonspec) {
    if(getUserType(jsonSpec) == TWITTER) {
      TwitterUserInfo tui = twitterUserInfoProvider.get();
      tui.initFromJson(jsonSpec);
      return tui;
    } else { /* ... */ }
  }
} 
```

...当然，`@Twitter Provider<UserInfo>`如果您只需要接口并且希望在将来的某个时间更改具体类，这也允许您注入 a 。如果你想`TwitterUserInfo`接受构造函数参数，[辅助注入](https://code.google.com/p/google-guice/wiki/AssistedInject) *将*帮助你创建一个`TwitterUserInfoFactory`虽然，这将有助于它实现[不变性](http://www.javapractices.com/topic/TopicAction.do?Id=29)：

```
public class UserInfoFactory {
  @Inject TwitterUserInfo.Factory twitterUserInfoFactory;

  public UserInfo createFromJsonString(String jsonspec) {
    if(getUserType(jsonSpec) == TWITTER) {
      return twitterUserInfoFactory.create(jsonSpec);
    } else { /* ... */ }
  }
}

// binder.install(new FactoryModuleBuilder().build(TwitterUserInfoFactory.class));
public class TwitterUserInfo implements UserInfo {
  public interface Factory {
    TwitterUserInfo create(String jsonSpec);
  }

  public TwitterUserInfo(@Assisted String jsonSpec, OtherDependency dep) { /* ... */ }
} 
```

**最后一点：** `TwitterUserInfo`可能没有任何依赖关系——对我来说这听起来像是一个数据对象——所以让你的类完全按照你找到它的方式（使用`new`）可能是最好的方法。虽然解耦接口和类以简化测试是件好事，但维护和理解是有成本的。Guice 是一把非常强大的锤子，但并非所有东西实际上都是要敲的钉子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:12:51.070

您可能需要使用辅助注射。

您需要使用（@Assisted String jsonspec）（当然还有@Inject）在 GoogleUserInfo、FacebookUserInfo 和 TwitterUserInfo 中注释您的构造函数

然后你需要配置你的工厂类

```
binder.install(new FactoryModuleBuilder().build(UserInfoFactory.class)); 
```

然后适当地绑定您要使用的任何信息提供者。

我*认为*。我对自己很陌生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-07T13:35:27.377

这是我对 Guice 的[抽象工厂模式](https://en.wikipedia.org/wiki/Abstract_factory_pattern)的变体——使用[多重](https://github.com/google/guice/wiki/Multibindings)绑定来绑定具体工厂。

在这里，我使用一组工厂和一个循环来选择合适的工厂类，但如果可能的话，您也可以使用 Map 并通过某个键获取具体工厂。

```
public class AbstractFactory {
  @Inject Set<UserInfoFactory> factories;

  public UserInfoFactory createFor(String jsonSpec) {
    for (UserInfoFactory factory : factories) {
      if (factory.handles(jsonSpec))
        return factory;
    }
    throw new IllegalArgumentException("No factory for a given spec!");
  }
} 
```

这种技术不需要您打开和修改 AbstractFactory 类来添加新的具体工厂 - 只需编写新工厂并将适当的绑定添加到您的 Guice 模块。

每个具体工厂负责处理特定的数据格式并正确解析 json 字符串：

```
public class FacebookUserInfoFactory implements UserInfoFactory {
  public boolean handles(String jsonSpec) {
    return jsonSpec.contains("facebook");
  }

  public UserInfo createFromJsonString(String jsonspec) {
    return new FacebookUserInfo(jsonspec);
  }
}

public class TwitterUserInfoFactory implements UserInfoFactory {
  public boolean handles(String jsonSpec) {
    return jsonSpec.contains("twitter");
  }

  public UserInfo createFromJsonString(String jsonspec) {
    return new TwitterUserInfo(jsonspec);
  }
} 
```

现在，用 Multibinder 绑定你的混凝土工厂。示例用法：

```
AbstractFactory abstractFactory = Guice
        .createInjector(new AbstractModule() {
          protected void configure() {
            Multibinder<UserInfoFactory> factoryBindings = Multibinder
                    .newSetBinder(binder(), UserInfoFactory.class);
            factoryBindings.addBinding().to(FacebookUserInfoFactory.class);
            factoryBindings.addBinding().to(TwitterUserInfoFactory.class);
          }
        }).getInstance(AbstractFactory.class);

UserInfoFactory factory1 = abstractFactory.createFor("twitter");
UserInfoFactory factory2 = abstractFactory.createFor("facebook");
UserInfo user1 = factory1.createFromJsonString("twitter user json string");
UserInfo user2 = factory2.createFromJsonString("facebook user json string");
System.out.println(user1.toString());
System.out.println(user2.toString());
} 
```

输出将是：

```
TwitterUserInfo{twitter user json string}
FacebookUserInfo{facebook user json string} 
```

`UserInfo`只是一个接口或一个抽象类（为清楚起见，此处省略）。

# android - Android AlertDialog 活动和异步错误

> ID：16002485
> 
> 赞同：0
> 
> 时间：2013-04-14T18:06:03.560
> 
> 标签：android, android-asynctask, android-alertdialog

我的 android 应用程序中有一个功能齐全的 asynctask，但是当我没有连接时，它会导致我的应用程序在我的 Activity（在 AlertDialog.Builder 中）由于异步未连接而导致的错误消息中崩溃。我将上下文传递给我的异步，所以这可能与它有关，但不确定。

下面是来自 Async 类和 Activity 的代码。LogCat 告诉我 AlertDialog 警报 builder.create() 中发生错误。我该如何解决？

从异步类：

```
 InputsRecapUploadTask extends AsyncTask<String, Void, Integer> {

public InputsRecapUploadTask(InputsRecap activity,
        ProgressDialog progressDialog, Context ctx) {
    this.activity = activity;
    this.myCtx = ctx;
    this.progressDialog = progressDialog;   
}

@Override
protected void onPreExecute() {
    progressDialog.show();
}

}       
@Override
protected Integer doInBackground(String... arg0) {
    //// http code
                responseCode = 1;
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
        progressDialog.dismiss();
        activity.showLoginError("");
    }

    return responseCode;

}

@Override
protected void onPostExecute(Integer headerCode) {
    progressDialog.dismiss();
    if (headerCode == 1)
        activity.login(id);
    else
        activity.showLoginError("");
}
Activity Class:
    public void showLoginError(String result) {
    AlertDialog.Builder builder = new AlertDialog.Builder(InputsRecap.this);
    builder.setPositiveButton("okay",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });
    builder.setMessage("unable to upload database");
    AlertDialog alert = builder.create();
    alert.setCancelable(true);
    alert.show();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:10:54.250

如果在您的方法中抛出异常，`doInBackground`这两行：

```
progressDialog.dismiss();
activity.showLoginError(""); 
```

将导致异常 - 您无法从`doInBackground`方法中修改 UI。而是设置一个标志并`onPostExecute`在主线程中执行的错误对话框中显示错误对话框。

检查下面的链接，尤其是标题**The 4 steps**下的主题。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# php - 致命错误：调用未定义的函数 mysql_connect_errno()

> ID：16002486
> 
> 赞同：-3
> 
> 时间：2013-04-14T18:06:06.150
> 
> 标签：php, html, mysql

代码保存在两个文件中 1 是 html 和 2 是 php 文件我是 php 新手请帮忙

我收到以下错误消息：

致命错误：在第 11 行调用 C:\xampp\htdocs\xampp\saveCode.php 中未定义的函数 mysql_connect_errno()

我想在数据库中保存几个字段

请提供任何解决方案

**HTML 代码**

```
<BODY>

<form method="post" action="saveCode.php">
<table>
    <tr>
        <td>

<TEXTAREA name="txtEn" onkeypress=writeurdu(event); id="id" dir=lft NAME="id" 
                style="font-size:xx-large;" rows="1"></TEXTAREA></td>
        <td>
<!--<TEXTAREA id="urd" dir=rtl NAME="id" ROWS="1" COLS="40"></TEXTAREA style="font-size:xx-large;">-->

<TEXTAREA name="txtAr" id="urd" style=" width:388px; height:141px; border:solid 1px green;font-size:xx-large;" 
                dir=rtl align="center"></TEXTAREA></td>
<div  ></div>
</td>

    </tr>
    <tr>
        <td>
            Persio Arabic
</td>
        <td>
            Roman
</td>
    </tr>
    <tr>
        <td>
            &nbsp;</td>
        <td>

    <textarea name="comments">Example Comment</textarea>
    <input name="submitSave" type="submit" value="Save" />
        </form>
           <a href="" id="btn_Save" name="lnkSave"> Save</a>
            <input type="button" id="btn_View" value="View" /> </td>
    </tr>
</table>

</form>

</BODY> 
```

**保存代码.php**

```
 <?php

     $conn_error='Could not Connect';
      $mysql_host='localhost';
      $mysql_user='root';
      $mysql_pass='';
      $mysql_db='db_ZS';

    $con=mysql_connect($mysql_host,$mysql_user,$mysql_pass,$mysql_db);

    if (mysql_connect_errno())
      {
      echo "Failed to connect to MySQL: " . mysql_connect_error();
      }

    mysql_query($con,"INSERT INTO tlb1 (EN,AR) values ({$_POST['txtAr']},{$_POST['txtEn']})");

    mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:45:14.260

PHP中[没有名为 mysql_connect_errno](http://uk1.php.net/manual-lookup.php?pattern=mysql_connect_errno&scope=quickref)的函数，但有`mysqli_connect_errno`. 您需要确保使用所有 mysqli_ 函数，但不能混合使用 mysql 和 mysqli 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:08:12.700

正如此处的语法着色所示，您缺少结束引号。它应该是：

```
mysqli_query($con,"INSERT INTO tlb1 (EN,AR) values ({$_POST['txtAr']},{$_POST['txtEn']})"); 
```

使用带有语法突出显示的 IDE / 文本编辑器可能是一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T18:09:00.183

您的代码中有错误，您没有关闭双引号。请更换

```
mysqli_query($con,"INSERT INTO tlb1 (EN,AR) values ({$_POST['txtAr']},{$_POST['txtEn']})); 
```

至

```
mysqli_query($con,"INSERT INTO tlb1 (EN,AR) values ({$_POST['txtAr']},{$_POST['txtEn']})"); 
```

# java - 使用特定端口和数据线的 Java 声音

> ID：16002487
> 
> 赞同：2
> 
> 时间：2013-04-14T18:06:09.317
> 
> 标签：java, javasound

这感觉就像我在此站点上提出的第 100 个与 Java 声音相关的问题，但我在 Java 声音 API 或 jsresources.org 的任何地方都找不到答案。我正在制作一个多轨录音机，到目前为止它工作得很好，比预期的要好，我目前遇到的问题是允许用户在运行时为每个轨道选择一个输入。现在我的程序只需要一个可用`TargetDataLine`的`Mixer`，我可以在录制过程中控制音量以及平衡。如果我列出`Ports`并允许用户选择一个特定`Port`的，例如笔记本电脑中的内置麦克风，我如何获得一个用于录制`TargetDataLine`的特定的？`Port`是关闭所有未使用的问题`Ports`吗？

我也刚刚注意到，当列出源是指输入和目标输出时，如果有人能澄清我会很感激`Ports`，我只是习惯了相反的方式。`DataLines`

可以帮助我解决当前问题的事情是了解和之间的关系`Ports`，`DataLines`我知道两者是什么，但我不明白为什么你不能像混音器一样`DataLine`从 a 中得到 a，那么两者之间的关系是什么？`Port`二？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:31:29.007

您正在领先于我尝试做的事情，但也许我仍然可以提供一些帮助！

您是否看到了 Port 和 DataLine 之间差异的摘要？ [http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/package-summary.html](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/package-summary.html)

在我看来，给定的端口只能与 SourceDataLine 或 TargetDataLine 中的一个一起使用，具体取决于它是输入端口还是输出端口。

您是否也尝试过这里的示例？ [http://docs.oracle.com/javase/tutorial/sound/capturing.html](http://docs.oracle.com/javase/tutorial/sound/capturing.html)

在我看来，由于端口扩展了线路，因此如果您将端口替换为线路（假设它是输入端口），则用于读取音频的示例代码应该可以工作。示例代码对您有用吗？

我猜如果您要从多个端口混合声音，则需要解压缩声音数据，自己添加声音值并将它们重新打包为 PCM 样本（即，进行自己的音频混合）单个输出线。

# compiler-errors - Lisp 非法函数调用，

> ID：16002497
> 
> 赞同：1
> 
> 时间：2013-04-14T18:07:16.137
> 
> 标签：compiler-errors, lisp, common-lisp

下面的代码不断抛出以下错误：

```
 caught ERROR:

illegal function call

     (LET ((SOLUTION 'NIL) (FIRST 0) (SECOND 0))
       (DOLIST (EL LST)
         (IF (NUMBERP EL)
             (PUSH EL SOLUTION)
             ((SETF #) (SETF #) (PUSH # SOLUTION))))
       (CAR SOLUTION)) 
```

谁能明白为什么？从语法上讲，我看不出它有什么问题。注意：我正在使用 sbcl。

我的代码：

```
(defun evalpostfix (lst)
  (let ((solution '())
        (first 0)
        (second 0))
    (dolist (el lst)
      (if (numberp el) ;if
          (push el solution) ;then
          ((setf second (pop solution)) ;else
             (setf first (pop solution))
             (push (funcall el first second) solution))))
    (car solution))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T18:10:22.477

`((setf second (pop solution))`- 两个左括号？为什么？`IF`使用 else 形式的语法是：

```
(if test-form then-form else-form) 
```

表单不能以两个括号开头 - 只有一个例外：`((lambda (x) (+ x 1)) 2)`.

如果您想对多个表达式进行分组，请使用类似`(progn a b c ... z)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:10:39.447

实际上，为了将多个表单组合在一起，请使用特殊运算符[`progn`](http://www.lispworks.com/documentation/HyperSpec/Body/s_progn.htm#progn)。

您可以更进一步，将后续[`setf`](http://www.lispworks.com/documentation/HyperSpec/Body/m_setf_.htm)调用组合在一起：

```
(setf second (pop solution)
      first  (pop solution)) 
```

# python - Python循环不断重复？为什么？

> ID：16002498
> 
> 赞同：1
> 
> 时间：2013-04-14T18:07:19.627
> 
> 标签：python, while-loop

```
Another_Mark = raw_input("would you like to enter another mark? (y/n)")

while Another_Mark.lower() != "n" or Another_Mark.lower() != "y":
    Another_Mark = raw_input("Do you want to input another mark? Please put either 'y' or 'n' this time")

if Another_Mark == "y":
    print "blah"

if Another_Mark == "n":
    print "Blue" 
```

这不是我使用的实际代码，除了第一三行。无论如何，我的问题是为什么当我输入值'y'或'n'时，while循环会继续重复，当它再次询问你是否想在第三行输入另一个标记时。我陷入了无限重复的循环。当 Another_Mark 的值更改为“y”或“n”时，不应重复

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T18:11:31.443

尝试：

```
while Another_Mark.lower() not in 'yn':
    Another_Mark = raw_input("Do you want to input another mark? Please put either 'y' or 'n' this time") 
```

`not in`如果在给定的可迭代对象中找不到给定的对象，则运算符返回 true，否则返回 false。所以这就是您正在寻找的解决方案:)

* * *

由于布尔代数错误，这根本不起作用。正如 Lattyware 所写：

> not（a 或 b）（您所描述的）与 not a 或 not b（您的代码所说的）不同

```
>>> for a, b in itertools.product([True, False], repeat=2):
...     print(a, b, not (a or b), not a or not b, sep="\t")
... 
True    True    False   False
True    False   False   True
False   True    False   True
False   False   True    True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T18:12:05.233

你的循环逻辑只有每一个都是真的——如果输入是“n”，那么它不是“y”，所以它是真的。相反，如果它是“y”，则不是“n”。

尝试这个：

```
while not (Another_Mark.lower() == "n" or Another_Mark.lower() == "y"):
    Another_Mark = raw_input("Do you want to input another mark? Please put either 'y' or 'n' this time") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T18:14:25.197

您循环背后的逻辑是错误的。这应该有效：

```
while Another_Mark.lower() != "n" and Another_Mark.lower() != "y":
    Another_Mark = raw_input("Do you want to input another mark? Please put either 'y' or 'n' this time") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T18:16:14.970

您需要使用 AND 而不是 OR。

这是布尔逻辑分布的方式。你可以说：

```
NOT ("yes" OR "no") 
```

或者您可以通过将 OR 翻转为 AND 将 NOT 分配到括号中（这是您想要做的）：

```
(NOT "yes") AND (NOT "no") 
```

# nxt - 无法加载 LeJOS NXT 通讯驱动程序

> ID：16002501
> 
> 赞同：3
> 
> 时间：2013-04-14T18:07:30.397
> 
> 标签：nxt, lejos-nxj

我一直在尝试使用 LeJOS 库与我的 NXT 机器人生成接口。当我运行代码时，控制台打印出以下错误：

`lejos.pc.comm.NXTCommException: Cannot load NXTComm driver at lejos.pc.comm.NXTCommFactory.newNXTCommInstance(NXTCommFactory.java:110) at lejos.pc.comm.NXTCommFactory.createNXTComm(NXTCommFactory.java:91) at com.thirteenbit.prasController.PrasController.initConnection(PrasController.java:24) at com.thirteenbit.prasController.PrasController.<init>(PrasController.java:17) at com.thirteenbit.prasController.PrasController$1.run(PrasController.java:42) at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209) at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:708) at java.awt.EventQueue.access$400(EventQueue.java:82) at java.awt.EventQueue$2.run(EventQueue.java:669) at java.awt.EventQueue$2.run(EventQueue.java:667) at java.security.AccessController.doPrivileged(Native Method) at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87) at java.awt.EventQueue.dispatchEvent(EventQueue.java:678) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188) at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) Caused by: lejos.internal.jni.JNIException: cannot load library /Users/Andrew/Desktop/Dropbox/Eclipse Files/leJOS_NXJ_0.9.1beta-3/lib/pc/native/macosx/libjfantom.jnilib, architecture macosx/x86_64 at lejos.internal.jni.JNILoader.loadLibrary(JNILoader.java:121) at lejos.pc.comm.NXTCommFantom.initialize0(NXTCommFantom.java:96) at lejos.pc.comm.NXTCommFantom.initialize(NXTCommFantom.java:103) at lejos.pc.comm.NXTCommFactory.newNXTCommInstance(NXTCommFactory.java:103) ... 18 more Caused by: java.lang.UnsatisfiedLinkError: /Users/Andrew/Desktop/Dropbox/Eclipse Files/leJOS_NXJ_0.9.1beta-3/lib/pc/native/macosx/libjfantom.jnilib: no suitable image found. Did find: /Users/Andrew/Desktop/Dropbox/Eclipse Files/leJOS_NXJ_0.9.1beta-3/lib/pc/native/macosx/libjfantom.jnilib: no matching architecture in universal wrapper at java.lang.ClassLoader$NativeLibrary.load(Native Method) at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1827) at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1703) at java.lang.Runtime.load0(Runtime.java:770) at java.lang.System.load(System.java:1020) at lejos.internal.jni.JNILoader.loadLibrary(JNILoader.java:111) ... 21 more`

我相信这与在[java eclipse 中发现的问题相同： failed to load nxt usb comm driver](https://stackoverflow.com/questions/14166040/java-eclipse-failed-to-load-nxt-usb-comm-driver)，并且我安装了 eclipse 32 位版本，但仍然遇到相同的错误，即上述错误。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T17:28:30.663

因为我的声誉（我是新人）无法发表评论，所以回答：
您应该确保您拥有：
- x86 [JDK](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)（Java 开发工具包），点击：jdk-7u21-windows-i586.exe
- Lego fantom[驱动程序](http://mindstorms.lego.com/en-us/support/files/Driver.aspx)，单击：Fantom Driver 1.1.3
和您已经提到的 32 位版本的 Eclipse

# backbone.js - 子视图上的主干布局管理器委托事件不起作用

> ID：16002502
> 
> 赞同：0
> 
> 时间：2013-04-14T18:07:31.013
> 
> 标签：backbone.js, backbone-events, backbone-layout-manager

我所拥有的是以下内容：

```
Views.Parent = Backbone.View.extend( {
    template: "parent",
    initialize: function( ) {
        this.render( );
    },
    beforeRender: function( ) {
        this.setView( ".foo", new Views.Child( {
            model: this.model
        } );
    },
    afterRender: function( ) {
        this.$el.html( Handlebars.compile( this.$el.html( ) ).call( this, this.model.attributes ) );
        var foo = this.getView( ".foo" );
        foo.delegateEvents( ); 
    }
} );

Views.Child = Backbone.View.extend( {
    template: "child",
    events: {
        "click input": "inputClick"
    },
    initialize: function( ) {
        this.listenTo( this.model, "change", this.render );
    },
    inputClick: function( ) {
        console.info( "Input Clicked" );
    }, 
    afterRender: function( ) {
        this.$el.html( Handlebars.compile( this.$el.html( ) ).call( this, this.model.attributes ) );
        var foo = this.getView( ".foo" );
        foo.delegateEvents( ); 
    }
} ); 
```

中的事件`Views.Child`没有触发。肯定会找到该视图，并且 foo.events 返回正确的事件。我尝试了多种插入子视图的方法，delegateEvents 只是没有这样做。

有没有其他人遇到过这个问题并可以提供任何见解？

我应该提到我在子视图中同时使用了 events 属性和 this.listenTo。他们都没有被解雇。

编辑：父级被添加到另一个视图中： `this.$el.append( parentView.$el );`

`parentView`的实例化对象在哪里`Views.Parent`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:40:40.823

当您调用`this.$el.html`时`afterRender`，您将覆盖视图当前 HTML（以及每个绑定事件/子视图）。因此，您正在删除您设置的子视图`beforeRender`。

这就是为什么你没有触发事件。

我想就您应该如何组织代码提供更多见解……但是我不明白您要做什么`afterRender`，这根本没有意义。[`fetch`](https://github.com/tbranyen/backbone.layoutmanager/wiki/Configuration#fetchpath)在和[`render`](https://github.com/tbranyen/backbone.layoutmanager/wiki/Configuration#rendertemplate-context)配置选项中编译所有模板代码，而不是在`afterRender`.

快速说明：：
`beforeRender`您在哪里设置子视图
`afterRender`：您在哪里绑定事件或启动 jQuery 插件等。您不应该在这里接触 DOM。

# wpf - WPF VirtualizingWrapPanel 选定项更改导致滚动

> ID：16002505
> 
> 赞同：1
> 
> 时间：2013-04-14T18:07:51.280
> 
> 标签：wpf, scroll, virtualization, selectionchanged

我已经实现了一个运行良好的虚拟化面板，该面板实现了 IScrollInfo。我正在使用键盘让它工作。Panel 在 ListView 中用作 ListView.ItemsPanel。当用户按下所选项目正确更改但不滚动时，当您到达最后一个可见项目时，您不能再按下。我试图弄清楚如何让面板知道所选项目并适当地滚动。我尝试过四处搜索，但似乎找不到与我想做的事情相关的任何事情。一个正确方向的点将不胜感激。

编辑：[这](https://dl.dropboxusercontent.com/u/56578152/VirtualizingTilePanel.cs)是 VirtualizingWrapPanel 的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T16:06:50.320

所以我找到了一个效果很好的解决方案，我不确定它是否是最好的方法，但它似乎工作正常。

在遍历子项时的 ArrangeOverride 方法中，我执行以下操作。

```
var listViewItem = child as ListViewItem;
if (listViewItem != null)
{
    listViewItem.Selected -= ListViewItemSelected;
    listViewItem.Selected += ListViewItemSelected;
} 
```

在 MeasureOverride 中，我在这里调用 CleanUpItems，我们需要取消订阅所选事件。

```
var listViewItem = children[i] as ListViewItem;
if (listViewItem != null)
{
    listViewItem.Selected -= ListViewItemSelected;
} 
```

我还添加了以下三个功能。

```
private void ListViewItemSelected(object sender, RoutedEventArgs e)
{
    var listViewItem = sender as ListViewItem;
    if(listViewItem == null) return;

    var content = listViewItem.Content as CollectionViewGroup;
    if(content != null) return; //item is a group header dont click

    var items = ItemContainerGenerator as ItemContainerGenerator;
    if(items == null) return;
    BringIndexIntoView(items.IndexFromContainer(listViewItem));
    listViewItem.Focus();
}

protected override void BringIndexIntoView(int index)
{
    var offset = GetOffsetForFirstVisibleIndex(index);
    SetVerticalOffset(offset.Height);
}

private Size GetOffsetForFirstVisibleIndex(int index)
{
    int childrenPerRow = CalculateChildrenPerRow(_extent);
    var actualYOffset = ((index / childrenPerRow) * ChildDimension.Height) - ((ViewportHeight - ChildDimension.Height) / 2);
    if (actualYOffset < 0)
    {
        actualYOffset = 0;
    }
    Size offset = new Size(_offset.X, actualYOffset);
    return offset;
} 
```

GetOffsetForFirstVisibleIndex 函数可能会根据您的实现而有所不同，但如果其他人在想出解决方案时遇到问题，这应该是足够的信息。

# ios - 在 iOS 应用程序中使用时复制 sqlite 文件的最佳方法是什么

> ID：16002517
> 
> 赞同：0
> 
> 时间：2013-04-14T18:09:01.797
> 
> 标签：ios, cocoa, sqlite, xcode4

我有一个使用 sqlite 作为数据库的 iOS 应用程序，我想在使用时复制一个 sqlite 文件。做这个的最好方式是什么。现在我只是在 NSFileManager 中使用 copyItemAtPath 复制文件。这是最好的方法吗？这会损坏原始数据库文件吗？请注意， db 在需要处理时被大量使用。

# jquery - 带颜色的表格 [jquery]

> ID：16002521
> 
> 赞同：0
> 
> 时间：2013-04-14T18:09:15.723
> 
> 标签：jquery, colors, html-table

我想在 jquery 中制作这样的表格，但我不知道如何；/

CSS：

```
 *桌子{

    宽度：200px；

    高度：200px；

    颜色：绿色；

    }

    表 td{

    填充：2px；

    边距：2px；

    边框：2px 实心#ccc；

    }

    身体{

    背景颜色：白色；

    }* 

```

JavaScript：

```
<script>

function split(elem) {

   var tekst = $(elem).text();

   $('body').css({"background-color" : tekst});

};

function change(x){

var tekst = $(x).text();

   $(x).css({"background-color" : "black"});

   $(x).css({"color" : tekst});

};

function changeback(x){

var tekst = $(x).text();

   $(x).css({"background-color" : tekst});

   $(x).css({"color" : "green"});

};

$(document).ready(function() {

createTable(7,4);

function createTable(rows,cols){

mytable = $('<table></table>').attr({ id: "Tabela1" });

       var b = 255;

       var r = 255;

       var g = 255;

   for (var i = 0; i < rows; i++) {

       var row = $('<tr></tr>').appendTo(mytable).attr({ id: i+1 });

           for (var j = 0; j < cols; j++) {

               $('<td></td>').text("rgb("+r+","+g+","+b+")").attr
               ({ 
               id: j+1,onclick:"split(this)",
               onmouseover:"change(this)",
               onmouseout:"changeback(this)" }).css({"background-color" : 'rgb('+r+','+g+','+b+')'}).appendTo(row);

               g-=30;

           }

       g = 255;

       if((i/3)<1) r -=43;

       else r-=42;

   }

mytable.appendTo("#box");

}}

);

</script> 
```

HTML：

```
<html>
<body>
<div id="box">

</div>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:54:57.810

我希望你明白 jQuery 就是 javascript。

我已经清理了内联 javascript，因此所有函数都组合在一起（[演示](http://jsfiddle.net/Mottie/QHPfp/)）：

```
$(function () {
    createTable(7, 4);

    function createTable(rows, cols) {
        var $body = $('body'),
            mytable = $('<table></table>').attr({
                id: "Tabela1"
            }),
            r = 255,
            g = 255,
            b = 255,
            i, $row;
        for (i = 0; i < rows; i++) {
            $row = $('<tr></tr>').appendTo(mytable).attr({
                id: i + 1
            });
            for (var j = 0; j < cols; j++) {
                $('<td></td>', {
                    text: "rgb(" + r + "," + g + "," + b + ")",
                    id: j + 1,
                    css: {
                        "background-color": 'rgb(' + r + ',' + g + ',' + b + ')'
                    }
                }).appendTo($row);
                g -= 30;
            }
            g = 255;
            r -= ((i / 3) < 1) ? 43 : 42;
        }
        mytable.appendTo("#box");
        mytable.find('td').on('click mouseover mouseleave', function (e) {
            var $t = $(this),
                color = $t.text();
            switch (e.type) {
                case 'click'     :  $body.css({ 'background-color': color }); break;
                case 'mouseover' : $t.css({ 'background-color': 'black', color: color }); break;
                case 'mouseleave': $t.css({ 'background-color': color, color: 'green' }); break;
            }
        });
    }

}); 
```

# python - 具有 Python 的 C 扩展名的命名空间/包名称

> ID：16002522
> 
> 赞同：1
> 
> 时间：2013-04-14T18:09:16.643
> 
> 标签：python, distutils, python-c-extension

我正在学习/实验 C 中的 Python 扩展。我正在尝试包装一个 C 库，以便可以以更 Pythonic 的方式使用它。例如：

```
import mylib

widget = mylib.widget.Widget(name="Hello!")
widget.show()

mylib.utils.say_hello() 
```

在 C 代码中，传递给的模块名称分别`PyModule_Create`为“mylib”、“mylib.widget”和“mylib.utils”。该`mylib.widget`模块还包括一个新`Widget`类型。

但是，我似乎无法弄清楚如何使用这种包/命名空间样式来安装这些扩展。我试过了：

```
from distutils.core import setup, Extension

setup(
    ...
    ext_modules = [Extension('mylib', sources=['src/mylib.c'], ...), 
                   Extension('mylib.widget', sources=['src/widget.c'], ...),
                   Extension('mylib.utils', sources=['src/utils.c'], ...)]
) 
```

但这不起作用。“mylib 没有名为 widget 的模块”。

C 扩展通常是如何打包/分发的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T04:13:03.673

扩展可以有子模块，但您可能必须在 C 的 init() 函数中定义它们；如您所见， distutils 在这个概念上就放弃了幽灵。我会做这样的事情：

```
from distutils.core import setup,Extension

setup(
  packages = ['package_name'],
  ext_modules = [
    Extension('package_name.widget',sources=['src/widget.c']),
    Extension('package_name.utils',sources=['src/utils.c'])
  ]
) 
```

然后让您的文件布局为：

```
ROOT/
 | -- setup.py
 | -- src/
 |     | -- widget.c
 |     | -- utils.c
 | -- package_name/
 |     | -- __init__.py
 |     | -- (other python files) 
```

这样，您的`*.so`文件（或`*.pyd`在 Windows 上）最终将`package_name/`位于您的 python 站点包的目录中。

# java - 在java中将元素添加到ArrayList

> ID：16002525
> 
> 赞同：0
> 
> 时间：2013-04-14T18:09:31.363
> 
> 标签：java

```
import java.util.ArrayList;

public class ArrayTest {

    private static ArrayList<String> list = new ArrayList<String>();

    public static void printList () {
        System.out.println("Printing the list");
        for (int i = 0; i < list.size(); i++)
        {
            if (list.get(i) != null)
                System.out.println(i + " => " + list.get(i));
        }   
    }

    public static void add(Integer index, String val) {
        while(list.size() <= index)
            list.add(null);
        list.add(index, val);   
    }   

    public static void main(String[] args) {
        ArrayTest.add(8, "cover");
        ArrayTest.printList();
        ArrayTest.add(6, "and");
        ArrayTest.printList();
    }   

} 
```

产生以下输出

```
Printing the list
8 => cover
Printing the list
6 => and
9 => cover 
```

该`add(Integer index, String val)`函数将适当数量的空值添加到列表中作为检查以避免任何`IndexOutOfBoundsException`异常。有人可以解释为什么在列表中添加“和”会推动“覆盖”列表中的位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:15:08.013

因为您使用的[add 方法在指定索引处](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28int,%20E%29)**插入**一个元素。它不会替换该位置的现有元素，而是添加一个新元素，因此将索引位置从该位置添加到末尾。

如果需要替换值，请使用[set 方法](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#set%28int,%20E%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T18:16:12.130

因为这是该方法的[实际规范](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28int,%20E%29)`List.add(int index, E element)`：

> 在此列表中的指定位置插入指定元素（可选操作）。**将当前位于该位置的元素（如果有）和任何后续元素向右移动（将其索引加一）。**

至于“为什么”：这样做是为了避免覆盖指定位置的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-10T09:06:57.437

在 Java 9 中，有一种简单的方法，行数更少，无需初始化或`add`方法。使用`collection factory`方法：

```
List<String> list = List.of("first", "second", "third"); 
```

# ios - 使用 UITabBarController 将 UISlider 数据从 XIB 的视图控制器传递到非 XIB 的视图控制器

> ID：16002526
> 
> 赞同：0
> 
> 时间：2013-04-14T18:09:33.063
> 
> 标签：ios, delegates, uitabbarcontroller

我已经遵循了几个关于在视图控制器之间传递数据的指南，但它们似乎涉及在任何等效的 -(void)goToNextView 方法中设置 secondViewController 的属性。我试图弄清楚如何在使用应用程序委托中创建的标签栏控制器时从第一个视图控制器中为第二个视图控制器中的属性分配值。

当前设置：

AppDelegate.m

```
@synthesize window;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
   ...
    UITabBarController *tbc = [[UITabBarController alloc] init];
    FirstViewController *vc1 = [[FirstViewController alloc] init];
    SecondViewController *vc2 = [[SecondViewController alloc] init];

    [tbc setViewControllers: [NSArray arrayWithObjects: vc1, vc2, nil]];

    [[self window] setRootViewController:tbc];
    [self.window makeKeyAndVisible];
    return YES;
}
...
@end 
```

第一视图控制器.h

```
#import "SecondViewController.h"

@interface FirstViewController : UIViewController
{
    SecondViewController *vc2;

    IBOutlet UISlider *sizeSlider;
}

@property (nonatomic, retain) SecondViewController *vc2;
@property (strong, nonatomic) UISlider *mySlider;

-(IBAction) mySliderAction:(id)sender;

@end 
```

第一视图控制器.m

```
#import "FirstViewController.h"
#import "SecondViewController.h"

@implementation FirstViewController

@synthesize vc2, mySlider;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {
        UITabBarItem *tbi = [self tabBarItem];
        [tbi setTitle:@"xib"]; 
    }
    return self;
}
...
- (IBAction) mySliderAction:(id)sender
{
    NSString *str = [[NSString alloc] initWithFormat:@"%3.2f", mySlider.value];
    if(self.vc2 == nil)
    {
        SecondViewController *viewTwo = [[SecondViewController alloc] initWithNibName:nil bundle:nil];
        self.vc2 = viewTwo;
    }
    vc2.sliderValueString = str;  
}
...
@end 
```

SecondViewController.h

```
#import <UIKit/UIKit.h>
#import "myView.h"

@interface SecondViewController : UIViewController
{   
    NSString *sliderValueString; 
}

@property (copy) NSString *sliderValueString;
@end 
```

第二视图控制器.m

```
#import "SecondViewController.h"

@implementation SecondViewController

@synthesize sliderValueString;

- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)bundle
{
    self = [super initWithNibName:nil bundle:nil];
    if (self) {
        UITabBarItem *tbi = [self tabBarItem];
        [tbi setTitle:@"View 2"];
    }
    return self;
}

-(void) loadView
{
    CGRect frame = [[UIScreen mainScreen] bounds];
    myView *view = [[myView alloc] initWithFrame:frame];

    printf("Slider Value: %s", [sliderValueString UTF8String]);

    [self setView: view];
}
...
@end 
```

myView.h 和 .m 可能与问题无关，但我有 .h 子类化 UIView，并且 .m 使用 -(id)initWithFrame:(CGRect)frame 创建视图

我猜我将第二个 VC 的属性分配在错误的位置（mySliderAction），因为第二个 VC 中的 printf() 是空白的，所以我的问题是：应该在哪里分配属性，或者我是什么做错了阻止第二个 VC 允许它的 sliderValueString 不被（或保持）分配？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:08:15.890

您可以在 中设置属性`mySliderAction`，但问题是您将其设置在错误的对象上。

在 App Delegate 中，您为 tabControllers 的第 2 项创建一个 viewController：

```
SecondViewController *vc2 = [[SecondViewController alloc] init]; 
```

在 vc1 中`mySliderAction`，您*还*创建了一个 vc2 的实例：

```
SecondViewController *viewTwo = [[SecondViewController alloc] initWithNibName:nil bundle:nil]; 
```

这不是您通过 tabController 上的第二个选项卡导航到的实例，而是`sliderValueString`您正在设置的属性。

您需要引用已经存在的实例，而不是在这里创建一个新实例：

```
 SecondViewController *viewTwo = [self.tabBarController.viewControllers objectAtIndex:1] 
```

那你应该没事。

# java - Java中的字符串*真的*不可变吗？

> ID：16002529
> 
> 赞同：0
> 
> 时间：2013-04-14T18:09:47.427
> 
> 标签：java, string, immutability, stringbuilder, mutable

每个人都知道 Java 的 String 对象是不可变的，这实质上意味着如果您将 String 对象`a`与另一个 String 对象连接起来，例如`b`，将创建一个全新的 String 对象，而不是就地连接。

但是，最近我在 SO 上阅读[了这个问题](https://stackoverflow.com/questions/11408427/how-does-the-string-class-override-the-operator/)，它告诉编译器将连接运算符`+`替换为`StringBuilder`实例。

在这一点上，我有点困惑，因为据我所知和认为，`StringBuilder`对象由于它们的内部结构是可变的。在这种情况下，这不会本质上使 Java 中的 String 对象*可变*吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:11:02.020

并不真地。

实际的 Strings 仍然是不可变的，但在编译时，JVM 可以检测到一些情况，其中额外的 String 对象的创建可以被 StringBuilder 替换。

因此，如果您声明一个字符串`a`并与另一个字符串连接，您的`a`对象不会更改（因为它是不可变的），但 JVM 通过将连接替换为 StringBuilder 的实例化、将两个字符串附加到 Builder 来优化这一点，最后分配结果字符串。

假设您有：

```
String a = "banana";
String d = a + "123" + "xpto"; 
```

在 JVM 对此进行优化之前，您实际上会为如此简单的事情创建相对大量的字符串，即：

*   字符串
*   字符串“123”
*   字符串“xpto”
*   字符串 a + "123"
*   字符串 a+"123"+"xpto"

通过将 concatenation 转换为 StringBuilder 的优化，JVM 不再需要创建 concatenation 的中间结果，因此只需要单个 Strings 和结果一个。

这基本上是出于性能原因，但请记住，在某些情况下，如果您不小心，您将为此付出巨大的代价。例如：

```
String a = "";
for(String str: listOfStrings){
    a += str;
} 
```

如果你在做这样的事情，在每次迭代中，JVM 都会实例化一个**新**`listOfStrings`的 StringBuilder，如果有很多元素，这将是非常昂贵的。在这种情况下，您应该`StringBuilder`显式使用 a 并在循环内进行追加而不是连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T18:14:45.860

字符串是不可变的对象。一旦你将它与另一个字符串连接起来，它就会变成一个新对象。所以请记住 - 您不会更改现有字符串，您只需创建一个新字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T18:23:44.680

字符串确实是不可变的。编译器可能会生成涉及 的代码`StringBuilder`，但这只是一种优化，不会改变代码的行为方式（除了性能）。如果在某些情况下您可以观察到突变（例如，通过保留对中间结果之一的引用），编译器必须以一种仍然为您提供该中间引用的不可变字符串的方式进行优化。

所以如果`StringBuilder`在幕后使用，即使你不能直接看到差异，那不仍然意味着涉及可变性吗？嗯，是的，但如果你认真对待，你 PC 中的所有 RAM 都是可变的。不可变对象的内存可以被垃圾收集器移动，这肯定也涉及到变异。最后，作为程序员，对你来说最重要的是这个突变对你来说是隐藏的，你得到一个很大的承诺，你的程序会按照你期望的方式运行，即你永远不会在不可变对象中看到突变（除了如果出现严重问题，例如 RAM 故障）。

# java - 用于 Web 的模块化 OSGI Java 框架？

> ID：16002532
> 
> 赞同：4
> 
> 时间：2013-04-14T18:09:52.483
> 
> 标签：java, model-view-controller, web, osgi

我正在为 WEB 寻找一个强大的最新 Java OSGI 框架，它允许

*   模块化架构 (OSGI)
*   灵活的视图（JavaScript、HTML、模板...）
*   字符串 MVC 分离
*   也许是预先实现的 CMS 模块？
*   积极开发并开源

我发现的是

*   用于 PHP 的 ZEND。Java 世界是否提供了类似的东西？
*   弹簧拼接可能是解决方案
*   Eclipse RAP，可以 OSGI 但不提供足够灵活的视图
*   ... ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T06:38:58.267

采取任何标准。您选择的框架并将其部署在 Karaf 之上（如果您不想麻烦构建自己的 OSGi 运行时环境），或者如果您想从头开始构建所有内容，还要考虑 Pax-Web 它还支持 Servlet 3.0 和 OSGi 看看[Pax-Web 的主页](https://ops4j1.jira.com/wiki/display/paxweb/Pax+Web)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T06:29:57.203

您应该查看 Apache (Felix) Sling 或其商业版本 CQ5（以前称为 Day Software）。它完全基于 OSGi。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T19:22:24.987

我非常喜欢[Vaadin](https://vaadin.com/home)，它与 OSGi 配合得很好，而且非常活跃。它是一个基于 Google GWT 的 UI 工具包。

请注意，您仍然需要做出一些决定：您可以“直接”使用 OSGi 框架，例如 Felix 或 Equinox，但也许您最好使用应用程序服务器，例如 Apache Karaf 或 Eclipse Virgo。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-19T18:41:47.337

我每天都在开发基于 OSGi 的 Web 应用程序。我们有一个稍微替代的方法，效果很好：

*   使用 OSGi 服务实现的 RESTful Web 服务
*   基于模块化 AngularJS 的用户界面，打包在 OSGi 包中

虽然 AngularJS 显然不是 Java Web 框架，但它非常适合现代 Web 开发。如果您熟悉 Java MVC Web 框架，也很容易理解 Angular。

主要问题是如何模块化你的代码。在后端，我们将所有内容都实现为 OSGi 服务。RESTful Web 服务是通过 JAX-RS 使用 Amdatu (amdatu.org) 实现的。使用 Amdatu，您可以以非常适合 OSGi 的方式使用 JAX-RS。每个 RESTful 资源和较低级别的服务也打包在单独的包中，因此后端是完全模块化的。

为了模块化 UI 本身，我们将应用程序的不同功能部分分离为不同的 Angular 应用程序。每个 Angular 应用程序也使用 Amdatu 资源提供程序打包在单独的包中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-13T10:20:36.773

您可以测试 Konekti 一个开源 OSGi 业务平台，该平台由 Thingtrack 开发的 Eclipse Virgo OSGi Container 提供支持。

*   瓦丁。
*   春天。
*   贾斯珀报告。
*   石英。
*   JBoss JBmp，流口水。
*   阿帕奇骆驼，ActiveMQ。
*   还有很多

[http://www.konekti.org](http://www.konekti.org)

# scala - classOf 的输入类型是什么

> ID：16002533
> 
> 赞同：1
> 
> 时间：2013-04-14T18:09:53.097
> 
> 标签：scala, types

我想知道我用什么类型代替 XXX

```
def registerClass(cl:XXX) = kryo.register(classOf[cl]) 
```

编辑：为什么我想这样做。

我必须使用上面的代码注册许多类。我想删除多次调用 kyro.register 的重复，希望编写如下代码：

```
 Seq(com.mypackage.class1,com.mypackage.class2,com.mypackage.class3).foreach(registerClass) 
```

另一个问题，我可以通过 String 代替吗？并以某种方式将其转换为 registerClass 中的类？

```
Seq("com.mypackage.class1","com.mypackage.class2").foreach(registerClass) 
```

编辑 2：当我编写 com.mypackage.class1 时，它表示在我的源代码中定义的任何类。所以如果我创建一个类

```
package com.mypackage.model

class Dummy(val ids:Seq[Int],val name:String) 
```

我会提供 com.mypackage.model.Dummy 作为输入所以，

```
kryo.register(classOf[com.mypackage.model.Dummy]) 
```

Kryo 是一个 Java 序列化库。寄存器类的签名是

```
register(Class type) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T18:24:12.100

你可以这样做：

```
def registerClass(cl:Class[_]) = kryo.register(cl) 
```

然后这样称呼它：

```
registerClass(classOf[Int]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T23:08:19.260

`classOf`需要在编译时知道类型参数。在不了解您正在尝试做什么的情况下，您是否有任何理由不能使用：

```
def registerClass(cl:XXX) = kryo.register(cl.getClass) 
```

# mahout - 如何在 Myrrix 服务层中通过 REST API 插入字符串用户 ID

> ID：16002534
> 
> 赞同：2
> 
> 时间：2013-04-14T18:10:00.887
> 
> 标签：mahout, myrrix

我有 a6347324、b7432408、f54789922（非数字）和数字项目 ID 等用户 ID。我希望能够在 Myrrix 中使用 REST API 来插入这样的用户-项目对。但`/pref/a6347324/1234`返回错误。可以预期，考虑到[https://github.com/myrrix/myrrix-recommender/blob/master/web-common/src/net/myrrix/web/servlets/PreferenceServlet.java](https://github.com/myrrix/myrrix-recommender/blob/master/web-common/src/net/myrrix/web/servlets/PreferenceServlet.java)`parseLong`的第 74 行

我使用的是 0.11 版。我不想使用“标签”功能，因为它不会像等效的数字 ID 那样返回字符串标签，而且我认为它不适用于`because`API（因为不返回标签！）。会很快解决这个问题吗？是否有我可以快速使用或实施的直接解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:17:40.273

根据设计，REST API 本身根据数字 ID 工作。客户端可能会对其他一些 ID（无论是否为数字）进行散列处理以生成数字 ID。您想`TranslatingClientRecommender`改用它，它可以帮助管理翻译回原始 ID。

额外的好处是潜在的一些安全性；您实际上不需要将真实的用户和项目 ID 发送到服务，如果它要托管在 Amazon EC2 等第三方云上，这可能很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-16T15:40:23.070

我决定在这个答案中添加一些关于我实际上是如何解决问题的细节。请注意，我稍后进行了重大修改并使代码更加面向对象。为了便于理解，这只是一个简单的解释。

这是一个`WebClientRecommender`基本上是一个小包装器的类`TranslatingClientRecommender`。

```
package suggester.client.recommender;

import java.io.File;
import java.io.Reader;
import java.net.URI;
import java.util.Arrays;
import java.util.List;
import net.myrrix.client.MyrrixClientConfiguration;
import net.myrrix.client.translating.TranslatedRecommendedItem;
import org.apache.mahout.cf.taste.common.TasteException;

/**
 *
 * @author Nilesh Chakraborty
 */
public class WebClientRecommender extends AbstractClientRecommender {

    public WebClientRecommender(MyrrixClientConfiguration myrrixClientConfiguration) {
        super(myrrixClientConfiguration);
    }

    @Override
    public List<TranslatedRecommendedItem> recommend(String idListFile, String recommendTo, String recommendType, int howMany) throws TasteException {
        clientRecommender.addItemIDs(new File(idListFile));
        List<TranslatedRecommendedItem> recommendations = clientRecommender.recommend(recommendTo, howMany, false, new String[]{recommendType});
        return recommendations;
    }

    @Override
    public List<TranslatedRecommendedItem> recommendAnonymous(String idListFile, String recommendType, int howMany, String[] list) throws TasteException {
        clientRecommender.addItemIDs(new File(idListFile));
        float[] values = new float[list.length];
        Arrays.fill(values, 30);
        List<TranslatedRecommendedItem> recommendations = clientRecommender.recommendToAnonymous(list, values, howMany, new String[]{recommendType}, "testID");
        return recommendations;
    }

    public List<TranslatedRecommendedItem> recommendAnonymous(URI idListFile, String recommendType, int howMany, String[] list) throws TasteException {
        clientRecommender.addItemIDs(new File(idListFile));
        float[] values = new float[list.length];
        Arrays.fill(values, 30);
        List<TranslatedRecommendedItem> recommendations = clientRecommender.recommendToAnonymous(list, values, howMany, new String[]{recommendType}, "testID");
        return recommendations;
    }

    @Override
    public void ingest(Reader csvReader) throws TasteException {
        clientRecommender.ingest(csvReader);
    }
} 
```

这里是`AbstractClientRecommender`：

```
package suggester.client.recommender;

import java.io.IOException;
import java.io.Reader;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import net.myrrix.client.ClientRecommender;
import net.myrrix.client.MyrrixClientConfiguration;
import net.myrrix.client.translating.TranslatedRecommendedItem;
import net.myrrix.client.translating.TranslatingClientRecommender;
import org.apache.mahout.cf.taste.common.TasteException;

/**
 *
 * @author nilesh
 */
abstract class AbstractClientRecommender {

    protected TranslatingClientRecommender clientRecommender;

    public AbstractClientRecommender(MyrrixClientConfiguration myrrixClientConfiguration) {
        try {
            clientRecommender = new TranslatingClientRecommender(new ClientRecommender(myrrixClientConfiguration));
        } catch (IOException ex) {
            Logger.getLogger(CLIClientRecommender.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public abstract List<TranslatedRecommendedItem> recommend(String idListFile, String recommendTo, String recommendType, int howMany) throws TasteException;

    public abstract List<TranslatedRecommendedItem> recommendAnonymous(String idListFile, String recommendType, int howMany, String[] list) throws TasteException;

    public void ingest(String csvFile) throws TasteException {
    }

    public void ingest(Reader csvReader) throws TasteException {
    }
} 
```

现在，我`WebClientRecommender`在自定义 Servlet 中使用该类。这是`SuggesterServlet`：

```
package suggester.client.servlets;

import com.google.common.base.Splitter;
import suggester.client.recommender.WebClientRecommender;
import java.io.IOException;
import java.net.URL;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import net.myrrix.client.MyrrixClientConfiguration;
import net.myrrix.web.servlets.AbstractMyrrixServlet;

/**
 *
 * @author nilesh
 */
public abstract class AbstractSuggesterServlet extends AbstractMyrrixServlet {

    static final Splitter SLASH = Splitter.on('/').omitEmptyStrings();
    private WebClientRecommender recommender;

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
        MyrrixClientConfiguration config = new MyrrixClientConfiguration();
        config.setHost(request.getServerName());
        config.setPort(request.getServerPort());
        recommender = new WebClientRecommender(config);
    }

    protected final WebClientRecommender getClientRecommender() {
        return recommender;
    }
} 
```

现在，我们在这里使用`SuggesterServlet`：

```
package suggester.client.servlets;

import com.google.common.collect.Iterables;
import java.io.IOException;
import java.io.PrintWriter;
import java.net.URISyntaxException;
import java.util.List;
import javax.naming.NamingException;
import javax.servlet.ServletException;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import net.myrrix.client.translating.TranslatedRecommendedItem;
import org.apache.mahout.cf.taste.common.TasteException;

/**
 *
 * @author nilesh
 */
public class SuggesterServlet extends AbstractSuggesterServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
        super.doGet(request, response);

        String pathInfo = request.getPathInfo();
        String[] pathComponents = Iterables.toArray(SLASH.split(pathInfo), String.class);

        if (pathComponents.length == 0) {
            response.sendError(HttpServletResponse.SC_BAD_REQUEST);
            return;
        }

        try {
            List<TranslatedRecommendedItem> recommended = getClientRecommender().recommendAnonymous(getPropFilePath("proplist").toURI(), request.getParameter("type"), getHowMany(request), pathComponents);
            output(request, response, recommended);
        } catch (URISyntaxException use) {
            response.sendError(HttpServletResponse.SC_BAD_REQUEST, use.toString());
        } catch (NamingException ne) {
            response.sendError(HttpServletResponse.SC_BAD_REQUEST, ne.toString());
        } catch (TasteException te) {
            response.sendError(HttpServletResponse.SC_BAD_REQUEST, te.toString());
        }
    }

    protected final void output(HttpServletRequest request,
            ServletResponse response,
            List<TranslatedRecommendedItem> items) throws IOException {

        PrintWriter writer = response.getWriter();
        // Always print JSON
        writer.write('[');
        boolean first = true;
        for (TranslatedRecommendedItem item : items) {
            if (first) {
                first = false;
            } else {
                writer.write(',');
            }
            writer.write("[\"");
            writer.write(item.getItemID());
            writer.write("\",");
            writer.write(Float.toString(item.getValue()));
            writer.write(']');
        }
        writer.write(']');
    }
} 
```

读取道具文件并将字符串 ID 添加到`TranslatingClientRecommender`（连接到 Myrrix REST Servlet），`TranslatingClientRecommender`在自定义 Servlet（HAS-A 关系）中使用它 - 这基本上就是我的做法。我只需要修改 Myrrix 的 web.xml 以将我的自定义 servlet 添加到列表中，并且所有内容都可以在 Tomcat 上的单个应用程序中运行。

# scala - 异常填充子列表

> ID：16002536
> 
> 赞同：2
> 
> 时间：2013-04-14T18:10:11.437
> 
> 标签：scala, anorm

我是 Scala 和 Anorm 的新手，但我正在尽力尝试一下。我现在正试图填充对象的子列表。

例如，我有一个有多个电话号码的联系人。我将如何从数据库中填写我的电话号码？

**斯卡拉**

```
case class Contact(id: long, phoneNumbers: List[PhoneNumber])
case class PhoneNumber(area: String, rest: String) 
```

**表结构**

```
Contact
  id bigint

PhoneNumber
 area varchar(3)
 rest varchar(7)
 contact_id bigint 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T11:17:06.317

你可以尝试这样的事情：

```
val contacts: Iterable[Contact] = SQL(
  """
    SELECT c.id, p.area, p.rest
    FROM PhoneNumber p
    JOIN Contact c on p.contact_id = c.id;
  """
).as(long("id") ~ str("area") ~ str("rest") map(flatten) *
).groupBy(_._1).map {
  case (k,l) => Contact(k, l.map {
    d => PhoneNumber(d._2, d._3)
  })
} 
```

# linux - FUSE 错误：传输端点未连接

> ID：16002539
> 
> 赞同：70
> 
> 时间：2013-04-14T18:10:22.633
> 
> 标签：linux, mount, fuse

我正在尝试实现 FUSE 文件系统。我收到此错误：

> 无法访问 MountDir：传输端点未连接

这是程序的相关部分。有两个目录`MirrorDir`和`MountDir`，它们与所有代码位于同一目录中。我这样调用程序：

```
./myFS -o nonempty -o allow_other MirrorDir MountDir 
```

谁能看到我做错了什么？

```
static struct fuse_operations xmp_oper = {
    .getattr    = xmp_getattr,
    .readdir    = xmp_readdir,
    .open       = xmp_open,
    .read       = xmp_read,
};

int main(int argc, char *argv[]) {
    int fuse_stat;
    char* mirrorDir;

    mirrorDir = malloc(sizeof(strlen(argv[argc-2]+1)));
    if (mirrorDir == NULL) {
        perror("main calloc");
        abort();
    }

    // Pull the rootdir out of the argument list and save it in my internal data
    mirrorDir = realpath(argv[argc-2], NULL);

    argv[argc-2] = argv[argc-1];
    argv[argc-1] = NULL;
    argc--;

    // turn over control to fuse
    fprintf(stderr, "about to call fuse_main\n");   
    fuse_stat = fuse_main(argc, argv, &xmp_oper, mirrorDir);
    fprintf(stderr, "fuse_main returned %d\n", fuse_stat);
    return fuse_stat;
} 
```

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-11-12T02:54:06.397

这通常是由于文件系统崩溃而导致挂载目录挂载所致。转到挂载点的父目录并输入`fusermount -u YOUR_MNT_DIR`.

如果这不能解决问题，请执行`sudo umount -l YOUR_MNT_DIR`.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-04-01T08:02:04.447

我挂载了一个 ssh 文件系统（sshfs 命令行）并将其挂载，我遇到了同样的问题，`fusermount -u YOUR_MNT_DIR`解决了我的问题。谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-23T21:50:19.200

在 Azure 中，我尝试使用用户管理的身份装载我的容器。在将权限添加到托管标识`Transport endpoint is not connected`之前，我一直在获取。`Storage Blob Data Contributor`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-09T00:55:05.493

您可以检查您的 /etc/hosts 以验证主节点是否具有完全限定名称。[https://community.cloudera.com/t5/CDH-Manual-Installation/Setting-the-NameNode-port-8020-to-listen-outside-of-localhost/td-p/2257](https://community.cloudera.com/t5/CDH-Manual-Installation/Setting-the-NameNode-port-8020-to-listen-outside-of-localhost/td-p/2257)和[How to](https://stackoverflow.com/questions/22193051/how-to-configure-hosts-file-for-hadoop-ecosystem)中的更多详细信息[为 Hadoop 生态系统配置 hosts 文件](https://stackoverflow.com/questions/22193051/how-to-configure-hosts-file-for-hadoop-ecosystem)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-14T11:46:29.347

`rclone`当我使用将 Microsoft OneDrive 挂载到 Ubuntu 系统时，我遇到了类似“传输端点未连接”或“权限被拒绝”的问题。我是系统的普通用户，所以默认情况下我的主目录只能由我访问。当我创建挂载点目录时，它也只有我可以访问。rclone论坛版主只是误导了我的方向，当他意识到他无法回答时，最终粗鲁地关闭了我的问题，所以我必须自己解决问题。经过几天的调查，我终于弄清楚这些错误消息与文件访问权限模式有关。由于我是普通用户，但是`fusermount`以root身份运行，它在挂载时无法访问挂载点目录，并且在卸载时无法访问我的主目录，所以它抱怨。解决方法很简单：将挂载点目录和主目录的文件访问权限都开放给每个人，将他们的模式位设置为777。

# c - 在 C 中压缩和加密字节数组

> ID：16002541
> 
> 赞同：0
> 
> 时间：2013-04-14T18:10:36.473
> 
> 标签：c, encryption, binary, embedded, compression

我有一个程序可以生成字节数组`unsigned * char`并使用 fwrite 通过无线流将该数据发送出去。

我想将该字节数组压缩并加密为另一个字节数组，但由于我在嵌入式系统上运行代码，我宁愿不加载新库；我宁愿自己写出压缩和加密函数。

所以，换句话说，我的程序如下：

```
void send(STREAM* s, unsigned* char byteArr) {
  fwrite(s, byteArr);
} 
```

相反，我想创建一个函数：

```
void send(STREAM* s, unsigned* char byteArr) {
    unsgiend* char compressedArr = compressCharArr(byteArr);
    unsigned* char encryptedArr = encryptCharArr(compressedArr)
    fwrite(s, encryptedArr);
}

unsigned* char encryptedArr(unsigned* char byteArr) {
  // make the encrypted byte array (?)
}

unsigned* char compressedArr (unsigned* char byteArr) {
  // make the compressed byte array (?)
} 
```

我的问题是：我可以自己写出什么简单的算法来用 C 语言完成这个任务？我更喜欢只涉及标准 C 代码、没有库、只有数学、for 循环等的东西。

至于加密，我知道加密需要通信两端的密钥/密码。很好，让我们假设密钥是共享的并且我们使用的是对称加密。

我不介意使用与 zip、7zip、gzip 相同的算法——我知道这些压缩系统还包括加密/密码保护。我只是不确定如何在不将库、DLL 等插入嵌入式系统的情况下简单地实现它。

PS - 我的语法可能与 fwrite() 不一致，因为我现在不在我的代码附近。我希望我的编码示例清楚地表明了我的意图。

ADD：我要提一下，C 代码运行在一个名为“Atmega168”的芯片上......所以如果使用库是唯一可靠的方法，那么任何人都可以推荐针对这种芯片优化的库吗？[http://www.atmel.com/devices/atmega168.aspx](http://www.atmel.com/devices/atmega168.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T18:23:00.360

编写自己的加密算法不是一个好主意**。**甚至，如果你复制它。有许多旁道和其他意想不到的攻击，它真的不鼓励。

相反，我建议您使用众所周知的安全算法，例如[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)（因为您使用的是软件）或[3DES](http://en.wikipedia.org/wiki/Triple_DES)（如果您需要硬件方法）。如果您确实*需要*更快的算法的资源受限，那么还有称为“轻量级对称密码”的非常快速的对称密码，但这是一个新领域，它可能超出了您的应用程序的范围。

我的建议是使用具有这些算法并针对您正在使用的设备进行优化的库（它们通常设计有一些非常快的装配部件）。如果您可以针对它们进行静态编译，那么您应该不会比自己编写代码有更多的开销。但他们的代码很可能更快、更安全。

关于压缩：请记住在加密之前进行压缩，这样做有多种原因，例如速度、大小和熵。我听说过一些针对之后加密的压缩数据的攻击，但我现在找不到它们。我不会认为这是一个问题，除非你正在做一些特别重要的事情（想想：像 SSL/TLS 对一般互联网通信的影响）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T20:14:51.973

您没有理由编写自己的压缩或加密代码，因为已经使用经过大量测试的免费代码为您完成了，这样做会浪费时间，而且您自己编写的代码非常容易出现错误和安全漏洞。

您可以在嵌入式系统中使用现有代码。 [例如， zlib](http://zlib.net/)可以编译为根本不使用其他库。您不需要“加载”库。您可以简单地链接压缩例程，就好像您自己编写它们一样。

AES 也是如此，有[许多](http://www.literatecode.com/aes256). [实现](http://www.aescrypt.com/)。[出来](http://www.openssl.org/)。[那里](http://www.gnutls.org/)。

# javascript - 尝试使用 Jquery 在复选框中创建一些必填字段

> ID：16002543
> 
> 赞同：0
> 
> 时间：2013-04-14T18:10:37.187
> 
> 标签：javascript, jquery, input, checkbox, required

我在小提琴中工作（[这里](http://jsfiddle.net/sandeepd/sF3My/5/)）。在此，我需要在执行任何计算之前检查一些必填字段。有 6 个必填字段，所以我试图检查所有 6 个必填输入（其 TR 有自己的类）都已检查。我曾经`$('tr.mustPass').find('input.subFieldCheck:checked').length`检查过这个，但它似乎不起作用。不管这是否是六，我的 if 语句都说不是，并发出警报说明这一点。

我究竟做错了什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:16:23.180

您的 JavaScript 缺少逗号和括号。此外，稍微降低了 CSS 选择器的特异性：

```
$('#calculate').on('click', function(event) {
   console.log($('tr.mustPass').find('input:checked').length)
}); 
```

这会将选中的必需复选框的数量记录到控制台。（[小提琴](http://jsfiddle.net/NVAPk/)）

# html - 标签和输入在同一边框内

> ID：16002544
> 
> 赞同：-4
> 
> 时间：2013-04-14T18:10:37.673
> 
> 标签：html, css

如图所示，我有 2 个标签和两个输入：

![在此处输入图像描述](https://i.stack.imgur.com/OrR7X.png)

如何才能做到这一点？我正在使用外部 css 文件。

html代码：

```
<fieldset class="polje">
            <legend>Podatki</legend>
            <dl>
              <dt id="border1">
                <label id="ime_label" for="ime">Ime</label> 
              </dt>
              <dd id="border1">
                <input type="text" id="ime" tabindex="1">
              </dd>
              <dt id="border2">
                <label for="priimek">Priimek</label>
              </dt>
              <dd id="border2">
                <input type="text" id="priimek" tabindex="2">
              </dd>
            </dl>
          </fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:31:34.827

我会做这样的DEMO [http://jsfiddle.net/kevinPHPkevin/YJVek/](http://jsfiddle.net/kevinPHPkevin/YJVek/)

```
div {
    border:solid thin #000;
    margin:15px 0 0 0;
}
h2 {
    margin:-15px 0 0 10px;
    background:#fff;
    width:80px;
}
label {
    margin-left:10px;
    width:60px;
    float:left;
}
p.border {
    padding-top:10px;
    padding-bottom:10px;
    border-top:solid thin #ccc;
    border-bottom:solid thin #ccc;
} 
```

# prolog - prolog 定义中的输入/输出参数

> ID：16002546
> 
> 赞同：2
> 
> 时间：2013-04-14T18:10:39.927
> 
> 标签：prolog

prolog定义中的输入/输出参数有什么区别吗？这与其他语言（如 scheme 和 C ）相比如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T18:36:49.160

好吧，输入和输出参数之间存在差异，但让我们用一个例子来说明：

```
?- length([1, 2, 3], 3).
true. 
```

这里我们的参数都是输入，谓词用作测试。

```
?- length([1, 2, 3], L).
L = 3. 
```

这里我们的论点是`+`, `-`。谓词用作列表长度计算器。

```
?- length(X, 3).
X = [_A, _B, _C]. 
```

这里我们的论点是`-`, `+`。谓词用作列表骨架生成器。

```
?- length(X, L).
X = [], L = 0;
X = [_A], L = 1;
X = [_A, _B], L = 2;
% etc, infinite. 
```

这里我们的论点是`-`, `-`。谓词用作越来越长的列表的生成器。

因此`length/2`，输入和输出参数之间并没有真正的区别，它只是根据调用方式来服务不同的目的。

另一方面：

```
?- X is 3 + 2.
X = 5. 
```

工作，而

```
?- 5 is A + 2. 
```

抛出一个未充分实例化的参数错误...如果您考虑一下，这很正常，因为要在所有情况下都给出答案，`is/2`必须是一个非常先进的求解器...

我希望这些示例能帮助您区分不同类型的参数。

# vim - VIM 格式化/对齐

> ID：16002547
> 
> 赞同：3
> 
> 时间：2013-04-14T18:10:45.733
> 
> 标签：vim, formatting, text-align

我正在尝试将 VIM 作为我的 ruby​​/rails 编辑器。太胖了，我对它的功能印象深刻，我能够安装以下插件来给我更好的 IDE 体验

*   自动配对
*   更好的片段
*   书呆子评论者
*   书呆子树
*   表格
*   vim-endwise
*   vim-nerdtree 选项卡
*   vim 导轨
*   vim环绕

但是，我仍然很难找到一种方法来格式化/对齐我的代码。例如，有时我可能会从另一个地方复制和粘贴代码，然后整个代码就分散了。

例如：items.css.scss

```
.throw {
  float:left; width: 100%; 
                   margin-bottom: 2px; 
                        border: solid gray 1px; 
                                border-radius: 10px; 
                                            .cell { 
                                                            float: left; 
                                                                            padding-left: 6px; 
                                                                                            padding-right: 6px; 
                                                                                                         } 
                                                                                                             } 
```

我希望它是

```
.throw {
  float:left; width: 100%; 
  margin-bottom: 2px; 
  border: solid gray 1px; 
  border-radius: 10px; 
     .cell { 
       float: left; 
       padding-left: 6px; 
       padding-right: 6px; 
                                                                                                } 
                                                                                           } 
```

在 VIM 中对齐/格式化代码的最佳插件/方法是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T18:17:08.947

有两件事可以帮助你：

*   该`==`命令，它重新缩进当前选择的任何内容（例如，尝试`V`以视觉方式选择行 - 一个有用的组合是`{V}=`缩进当前的“段落”）

*   命令`:set paste`。在将代码粘贴到文件中之前打开它（完成后再次关闭它`:set nopaste`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T18:16:37.303

在粘贴之前尝试粘贴它`]p`或发出问题，然后在粘贴代码时将 vim 置于粘贴模式。您也可以将其映射到您选择的某个组合键，这样您就不必每次都键入它。您可以从 vim 的帮助 ( , ) 中获得有关这两种方法的更多信息。`:set paste``:set nopaste``:h ]p``:h paste`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T20:56:19.543

如果您对格式化代码感兴趣，请查看这个名为的 vim 插件`vim-autoformat`： [https ://github.com/vim-autoformat/vim-autoformat](https://github.com/vim-autoformat/vim-autoformat)

# c# - 具有多个参数的嵌套 if-else 语句

> ID：16002549
> 
> 赞同：1
> 
> 时间：2013-04-14T18:10:53.560
> 
> 标签：c#, sharepoint, if-statement

所以，我正在做的是从 SharePoint 网站检索信息。但是，当我尝试从该站点获取项目时。我收到此错误：

> 可能的意外参考比较；要进行值比较，请将左侧转换为“字符串”

它确实可以正确获取信息，但是我想要实现的是一种颜色格式，其中当 时`Status ="Completed"`，颜色将为蓝色，如果 则为`Status="Not Completed"`红色。

```
foreach (ListItem item in listItems)
{
    if (item["ows_BM_x0020_Status"] != null)
    {
        str.AppendLine("<tr><td bgcolor='#E7E7E7'> " + item["ows_BM_x0020_Status"].ToString() + "</td>");

    }
    else if (item["ows_BM_x0020_Status"] == "Completed")
    {
        str.AppendLine("<td bgcolor='#0000FF'> </td>");
    }
    else if (item["ows_BM_x0020_Status"] == "Not Completed")
    {
        str.AppendLine("<td bgcolor='#FF0000'> </td>");
    }      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:33:53.053

您收到错误是因为`item[key]`在编译时是一个对象，但您正在将其与字符串进行比较。一个简单的解决方法是将 转换`item[key]`为字符串。

```
if (item["ows_BM_x0020_Status"] != null)
{
    str.AppendLine("<tr><td bgcolor='#E7E7E7'> " + item["ows_BM_x0020_Status"].ToString() + "</td>");
}
else if (item["ows_BM_x0020_Status"].ToString() == "Completed")
{
    str.AppendLine("<td bgcolor='#0000FF'> </td>");
}
else if (item["ows_BM_x0020_Status"].ToString() == "Not Completed")
{
    str.AppendLine("<td bgcolor='#FF0000'> </td>");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:53:47.137

keyboardP 的正确方法是修复错误。但如果它像这样嵌套：

```
if (item["ows_BM_x0020_Status"] != null)
{
    str.AppendLine("<tr><td bgcolor='#E7E7E7'> " + item["ows_BM_x0020_Status"].ToString() + "</td>");
}
else if (item["ows_BM_x0020_Status"].ToString() == "Completed")
{
    str.AppendLine("<td bgcolor='#0000FF'> </td>"); // will never be reached
}
else if (item["ows_BM_x0020_Status"].ToString() == "Not Completed")
{
    str.AppendLine("<td bgcolor='#FF0000'> </td>"); //neither
} 
```

永远不会到达另外 2 个 appendLines，因为：

```
item["ows_BM_x0020_Status"].ToString() == "Completed" 
```

只能是真的，如果这也是真的：

```
item["ows_BM_x0020_Status"] != null 
```

这也适用于原始代码。所以使用这个：

```
object obj = item["ows_BM_x0020_Status"];
if ( obj != null)
{
    string value = obj.ToString();
    if (value == "Completed")
    {
       str.AppendLine("<td bgcolor='#0000FF'> </td>"); 
    }
    else if (value == "Not Completed")
    {
       str.AppendLine("<td bgcolor='#FF0000'> </td>"); 
    }  
    else
    {
       str.AppendLine("<tr><td bgcolor='#E7E7E7'> " + value + "</td>");
    }
} 
```

这假设您不想做任何事情，如果未设置状态：

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-14T18:15:25.097

```
if (item["ows_BM_x0020_Status"].ToString() != null)
{} 
```

我相信您必须将您通过索引或值搜索的项目转换为字符串。

# javascript - jQuery height() 返回实际高度值的大约一半

> ID：16002554
> 
> 赞同：1
> 
> 时间：2013-04-14T18:11:25.800
> 
> 标签：javascript, jquery, css

*最后更新！*

我有一组评论的容器面板。每个评论都有不同的长度，所以容器的高度应该是动态的，这可以通过`height:auto`. 为了能够输入新的评论，用户应该单击一个按钮，输入文本将呈现在评论面板下。所以我编写了一个 js 函数，它获取面板的高度并将其设置为输入文本的位置顶部值，即：

```
var commentPanelStr = 'dataTableFormHM' + ':dataTableHM:' + rowIndex + ':commentPanel';
var commentPanel = $(document.getElementById(commentPanelStr));
commentPanel.css({
    "height":"auto",
    "top":commentPanelTopValue
});

var commentInputPanelStr = 'dataTableFormHM' + ':dataTableHM:' + rowIndex + ':commentInputPanel';
var commentInputPanel = $(document.getElementById(commentInputPanelStr));

var y = parseInt(commentPanel.height())+commentPanelTopValue;
commentInputPanel.css("top", y); 
```

关于这个功能的问题是；`commentPanel.height()`返回大约一半的实际高度值。下图显示了它的外观：

![在此处输入图像描述](https://i.stack.imgur.com/rRoIJ.png)

但它看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/uat1P.png)

我试图将函数标题更改`$(window).load()`为 `$(document).ready()`. 函数也`outerHeight() $(elem).css('height');$(elem)[0].height; $(elem)[0].innerHeight; $(elem)[0].clientHeight;`返回错误的值。

jQuery position() 函数还将 inputText 插入到评论面板的中间，这是评论面板的大约一半，代码如下：

```
commentInputPanel.position({my:"bottom",at:"bottom",of:commentPanel}); 
```

我认为 jQuery 函数无法获得确切的值，`height:auto`但问题是为什么？

相关xhtml代码：

```
<p:panel id="commentPanel" style="width:353px; height:34px;position:absolute;left:370px;top:149px;"
                         styleClass="statusComment">
                    <ui:param name="max" value="#{Status.numOfCommentsShown}"/>
                    <ui:repeat var="Comment" value="#{Status.commentListOfStatus}" varStatus="statusVar">
                        <ui:fragment rendered="#{statusVar.index lt max}">
                            <li>
                                <div class="wrapper" id="wrapperDiv" style="word-wrap: break-word;width: 335px;">
                                    <h:link value="#{Comment.commentAuthorName}: " id="goToProfileWithAuthorName"
                                            outcome="/profile.xhtml" type="submit"
                                            style="text-decoration:none;font-family:arial;font-weight:bold;font-size: 11px;color: rgb(120,120,159);">
                                        <f:param name="userId" value="#{Comment.comauthorId}"/>
                                    </h:link>

                                    <h:outputText id="commentText" value="#{Comment.commentText}"
                                                  style="font-family:arial;font-size: 11px;color: rgb(77,77,103);"></h:outputText>
                                    <br/>
                                    <abbr class="timeago" title="#{Comment.commentDate}"
                                          style="color: #778899;font-size: 10px;">
                                    </abbr>
                                    <p:commandLink styleClass="deleteCommentButton" style="display:none;">
                                        <p:graphicImage value="/images/smallCancel.png" alt="delete"
                                                        style="outline: none; border:none"/>
                                    </p:commandLink>
                                </div>
                            </li>
                        </ui:fragment>
                    </ui:repeat>
                </p:panel> 
```

感谢您的帮助。

**更新！**

我想我找到了原因！正如在 xhtml 中看到的那样，我有 br 标记和带有图像的命令链接。当我删除该 br 标记图像并且 timeago 写在同一行中的注释之后，在这种情况下 height() 计算正确。

但是每当我使用 a `<br/>`or`<p/>`表示有新行时，`height()`函数就会损坏。但我不知道如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:57:55.290

在研究了`<br/>`标签后发现它根本没有高度。它只是强行结束线路，仅此而已。这就是为什么所有 js 函数都计算高度错误的原因，因为它们不关心 br 标签。

这是一个巨大且有点有趣的错误样式`<br/>`标签。我正在检查ajax回调参数，几乎尝试了所有通过javascript获得正确高度的可能性，但没有奏效。最后， br 标签模仿我并试图教一些东西：

只要您不太了解基础知识，您对使用准备好的库有多深入并不重要！

还有一件事，根本原因也可以是`<li/>`标签，如果您有 2 行，请确保您有 2 个`<li/>`标签

# ruby - 哪些方法可以访问源代码？

> ID：16002558
> 
> 赞同：7
> 
> 时间：2013-04-14T18:11:50.727
> 
> 标签：ruby, metaprogramming

有几种方法可以从需要/加载该库的 Ruby 代码中访问库的源代码。在这些方式中，有的直接读取库文件并解析。其他人通过一些提供源信息的内置方法（例如抽象语法树）访问源。在我无法直接读取文件内容的情况下（如前一种方式），访问源的唯一方法是访问提供信息的内置方法。通过重新定义这些方法来做其他事情，我将完全放弃对源代码的访问。什么是最小的方法集，如果我将它们重新定义为其他方法，我将完全失去对外部文件上库源代码的访问权限？

* * *

**重新表述问题**

认为：

*   有一个用户可以在文件 A 中编写任何 Ruby 代码。
*   有一个我写的静态Ruby文件B，它加载文件A并调用A中定义的主例程，还定义了一些用户可以在A中使用的类/方法。
*   用户对 B 没有 +r（读取）或 +w（写入）权限。

我必须通过在文件 B 中写入来重新定义（无效）或删除哪些（标准 Ruby）方法，以使用户无法访问写入文件 B 中的源（通过用户可以在文件 A 中写入的任何代码） ) 当我运行文件 B 时？

有一些库，如 sorcerer、pry，可以提取它有权访问的方法的源代码。纯 Ruby 中必须有一些原始命令，这些库依赖这些命令才能访问源代码。使这种事情成为可能的方法是什么？

如果您不知道完整答案但知道特定库如何提取某些方法的来源，那么这仍然会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-10T01:04:31.747

**TL;DR**: Ruby-only solutions can only use `source_location`, so just redefine this to return something like `['/some/empty/file', 1]`. C hacks to the interpreter don't use `source_location`, but you can prevent any use of C extensions by blocking/white-listing `require` and friends.

* * *

For one, to be able to execute a Ruby script, you have to be able to read it...

But back to the question. I know Sourcify doesn't use any mystical method besides a little method on Proc and Method called `source_location`, which gives the filename and line number were a method/proc is defined. I know from experience that this approach is very fragile, requires writing some sort of parser, and only sometimes works in legitimate situations. So, Sourcify is already out if you redefine `source_location` in B to return something like `/dev/null, line 0` and let Sourcify throw a not-Ruby-source exception.

From Pry's [source](https://github.com/pry/pry/blob/master/lib/pry/method.rb#L551-L566), it seems that Pry uses the same `source_location` approach, so two birds with one stone.

Now, there is another option for all of these libraries, which is to drop down to C and hack the interpreter to record source code. This is almost flawless. But we can still avoid the danger in one very simple way. Someone could include all of the code for Pry's method source in A. But you can't include inline C/C extensions without requiring a C library. So, the solution is obvious: Redefine `require` and `require_relative` and `load` to either not work, or to only allow certain libraries. This way, you can keep out the C hacks.

On MRI, there is no way (from Ruby code) besides `source_location` to do this. So there you go!

**Edit**: According to @banister, from MRI 2.0+ there is a `binding_of_caller` method builtin that could replace source location. Nuke this too. ;)

**Warning**: Ruby is not a good language for this. If you can metaprogram them, they can probably metaprogram you unless you're in a different process.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T00:14:06.150

如果您使用 John Mair（Pry 的制造商）的令人敬畏的“method_source”gem，实际上非常容易：该方法必须在 Ruby（而不是 C）中实现，并且必须从文件（而不是 irb）中加载。

这是一个在 Rails 控制台中使用 method_source 显示方法源代码的示例：

```
 $ rails console
  > require 'method_source'

  # the following prints out the method code for #lookup in the Rails I18n Backend:

  > I18n::Backend::Simple.instance_method(:lookup).source.display
    def lookup(locale, key, scope = [], options = {})
      init_translations unless initialized?
      keys = I18n.normalize_keys(locale, key, scope, options[:separator])

      keys.inject(translations) do |result, _key|
        _key = _key.to_sym
        return nil unless result.is_a?(Hash) && result.has_key?(_key)
        result = result[_key]
        result = resolve(locale, _key, result, options.merge(:scope => nil)) if result.is_a?(Symbol)
        result
      end
    end
    => nil 
```

显示的 Ruby 代码需要来自已经加载的文件（显然它必须是可读的），并且它需要是本机 Ruby 代码（这不适用于已编译/链接的库）。

也可以看看：

*   [https://rubygems.org/gems/method_source](https://rubygems.org/gems/method_source)
*   [https://github.com/banister/method_source](https://github.com/banister/method_source)
*   [http://banisterfiend.wordpress.com/](http://banisterfiend.wordpress.com/)

# javascript - 如何按属性值长度对包含对象的数组进行排序？

> ID：16002562
> 
> 赞同：0
> 
> 时间：2013-04-14T18:12:21.117
> 
> 标签：javascript

在javascript中，我有以下带有对象的数组：

```
var defaultSanitizer = [
    {"word": "large", "replaceWith":"L"},
    {"word": "os", "replaceWith":"One Size"},  
    {"word": "xlarge", "replaceWith":"XL"},
    {"word": "o/s", "replaceWith":"One Size"},
    {"word": "medium", "replaceWith":"M"}
    ...
]; 
```

（实际上这个数组要大得多）

我想创建一个函数，以便可以按属性值的长度对数组进行排序，例如对象的属性“单词”。

像这样的东西：

```
function sortArrByPropLengthAscending(arr, property) {

    var sortedArr = [];

    //some code

    return sortedArr;

} 
```

如果我要运行函数 sortArrByPropLengthAscending(defaultSanitizer, "word") 它应该返回一个如下所示的排序数组：

```
sortedArr = [        
    {"word": "os", "replaceWith":"One Size"},  
    {"word": "o/s", "replaceWith":"One Size"},
    {"word": "large", "replaceWith":"L"},
    {"word": "xlarge", "replaceWith":"XL"},        
    {"word": "medium", "replaceWith":"M"}
    ...
] 
```

你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:19:16.413

```
function sortMultiDimensional(a,b)
{
    return ((a.word.length < b.word.length) ? -1 : ((a.word.length > b.word.length) ? 1 : 0));
}

var defaultSanitizer = [
    {"word": "large", "replaceWith":"L"},
    {"word": "os", "replaceWith":"One Size"},  
    {"word": "xlarge", "replaceWith":"XL"},
    {"word": "o/s", "replaceWith":"One Size"},
    {"word": "medium", "replaceWith":"M"}
];

defaultSanitizer.sort(sortMultiDimensional);
console.log(defaultSanitizer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:16:40.037

您可以按属性的升序长度对数组进行排序`propName`：

```
function sortArray(array, propName) {
    array.sort(function(a, b) {
        return a[propName].length - b[propName].length;
    });
} 
```

见[`Array.sort`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)函数说明。

# python - 玩家不会倒下

> ID：16002571
> 
> 赞同：0
> 
> 时间：2013-04-14T18:13:15.857
> 
> 标签：python, pygame, collision, gravity

**问题：**

所以我正在制作这款 2D 平台游戏，但遇到了问题。当玩家跳到一个平台上并离开它时，重力不会影响它并且它不会掉下来，直到你再次按下跳跃键，它就好像它认为它仍然在地面上，直到你更新他。我已将问题缩小到重力或碰撞，但找不到问题。任何人都可以帮忙吗？我附上了下面的代码。

**代码：**

```
import pygame, sys, time, random, math
from pygame.locals import *

BACKGROUNDCOLOR = (255, 255, 255)

WINDOWW = 800 
WINDOWH = 600
PLAYERW = 66
PLAYERH = 22
FPS = 60
MOVESPEED = 3
YACCEL = 0.13
GRAVITY = 2
BLOCKSIZE = 30

pygame.init()
screen = pygame.display.set_mode((WINDOWW, WINDOWH), 0, 32)
mainClock = pygame.time.Clock()

testLevel = [
            (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,)]

def createblock(length, height, color):
    tmpblock = pygame.Surface((length, height))
    tmpblock.fill(color)
    tmpblock.convert()
    return tmpblock

def terminate(): # Used to shut down the software
    pygame.quit()
    sys.exit()

def add_level(lvl, bSize): # Creates the level based on a map (lvl) and the size of blocks
    bList = [] # List of every block
    bListDisp = [] # List of every block to display    
    bTypeList = [] # List with corresponding type of block(wall, air, etc.)

    for y in range(len(lvl)): 
        for x in range(len(lvl[0])):

            if lvl[y][x] == 0: # If the block type on lvl[y][x] is '0', write "air" down in the type list
                bTypeList.append("air")
            elif lvl[y][x] == 1: # If the block type on lvl[y][x] is '1', write "wall" down in the type list
                bTypeList.append("solid")

            bList.append(pygame.Rect((bSize * x), (bSize * y), bSize, bSize)) #Append every block that is registered
            bListDisp.append(pygame.Rect((bSize * x), (bSize * y), bSize, bSize)) #Append every block to display that is registered

    return bList, bListDisp, bTypeList

player = pygame.Rect((WINDOWW/2), (WINDOWH - BLOCKSIZE*3), PLAYERW, PLAYERH)
wallblock = createblock(BLOCKSIZE, BLOCKSIZE,(20,0,50))

lastTime = pygame.time.get_ticks()
isGrounded = False

vx = 0
vy = 0

allLevels = [testLevel] # A list containing all lvls(only one for now)
maxLevel = len(allLevels) # Checks which level is the last
currLevel = allLevels[0] # Current level(start with the first lvl)
blockList, blockListDisp, blockTypeList = add_level(currLevel, BLOCKSIZE) # A list with every block and another list with the blocks types

thrusters = True
jumping = False
falling = True
while True:
    """COLLISION"""
    for i in range(len(blockTypeList)): # Go through every block...
        if blockTypeList[i] == "solid": # ...and check what kind of block it is
            if player.colliderect(blockList[i]): #Apply necessary influences from the block(e.g. a solid block prevents the player from moving into it)
                if vx > 0 and not falling:
                    player.right = blockListDisp[i].left
                    print 'Collide Right'
                if vx < 0 and not falling:
                    player.left = blockListDisp[i].right
                    print 'Collide Left'
                if vy > 0:
                    player.bottom = blockListDisp[i].top
                    isGrounded = True
                    falling = False
                    vy = 0
                    print 'Collide Bottom'
                if vy < 0:
                    player.top = blockListDisp[i].bottom
                    print 'Collide Top'
    # Input
    pressedKeys = pygame.key.get_pressed() # Checks which keys are being pressed
    timeDiff = pygame.time.get_ticks() - lastTime # Calculates time difference 
    lastTime +=  timeDiff # Last time checked reset to current time

    # Shut-down if the ESC-key is pressed or the window is "crossed down"
    for event in pygame.event.get():
        if event.type == QUIT or event.type == KEYDOWN and event.key == K_ESCAPE:
            terminate()    

    """X-axis control"""
    if pressedKeys[ord('a')]:
        vx = -MOVESPEED
    if pressedKeys[ord('d')]:
        vx = MOVESPEED
    if not pressedKeys[ord('d')] and not pressedKeys[ord('a')]:
        vx = 0

    """Y-axis control"""
    # Controls for jumping
    if pressedKeys[ord('w')] and thrusters == True:
            vy -= YACCEL * timeDiff; # Accelerate along the y-xis when "jumping", but not above/below max speed
            if vy <= -4:
                vy = -4
            isGrounded = False # You are airborne
            jumping = True # You are jumping

    if event.type == KEYUP: # If you let go of the "jump"-button, stop jumping
        if event.key == ord('w') and vy < 0 and not isGrounded:
            jumping = False
            falling = True

    player.x += vx
    player.y += vy

    # Gravity
    if not isGrounded or falling:
        vy += 0.3
        if vy > 80:
            vy = 80

    screen.fill(BACKGROUNDCOLOR)

    for i in range(len(blockTypeList)):
        if blockTypeList[i] == "solid":
            screen.blit(wallblock, (blockListDisp[i].x, blockListDisp[i].y)) #blit the wall-block graphics

    pygame.draw.rect(screen, (0, 0, 0), player)

    pygame.display.update()
    mainClock.tick(FPS) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:29:42.937

一份可以帮助您的清单。

创建self.min_height：

*   min_height 初始化为可能的最低级别（例如，地板）
*   如果玩家没有与任何东西碰撞，那么 min_height 仍然是地板
*   如果玩家与平台发生碰撞，则他的 min_height 变为平台的 min_height
*   如果 distance_between(min_height, current_y) 接近 JUMP_SENSITIVITY，玩家可以跳跃（你可能需要一种方法来确定他是否会很快发生碰撞，但留待以后再说）
*   只要没有达到 min_height，玩家就会继续下降。

编辑：这可以帮助你摆脱跳跃/下降标志

# jquery - 按钮单击时的 Jquery 切换表单

> ID：16002573
> 
> 赞同：0
> 
> 时间：2013-04-14T18:13:20.040
> 
> 标签：jquery, html, forms, button, toggle

我只想在按下按钮时显示表单。这工作正常。当我再次单击该按钮时，我希望表单消失。有人可以解释问题是什么吗？谢谢！

```
<script type="text/javascript">
$(document).ready(function() {

 $('#instantchannel').hide(); //Initially form wil be hidden.
 var numclicks = 2
  $('#instant').click(function() {
  if(numclicks%2==1){
  numclicks=++;
   $('#instantchannel').show();//Form shows on button click
}else{
numclicks=++;
 $('#instantchannel').hide();//Form shows on button click
}
   });
 });
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:15:33.530

jQuery[`toggle`](http://api.jquery.com/toggle/)为这些情况提供了一个方法：

```
$('#instant').click(function() {
  $('#instantchannel').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:16:32.923

你缺少一个`;`after `var numclicks = 2`。此外，`numclicks`单击按钮时不再可见。而且，您应该使用`toggle()`.

```
$(document).ready(function() {
  $('#instantchannel').hide(); //Initially form wil be hidden.
  $('#instant').click(function() {
    $('#instantchannel').toggle();//Form toggles on button click
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T18:16:48.270

您不必计算点击次数。只需使用[.toggle](http://api.jquery.com/toggle/)功能。

```
<script type="text/javascript">
$(document).ready(function() {

 $('#instantchannel').hide(); //Initially form wil be hidden.
 $('#instant').click(function() {
  $('#instantchannel').toggle();
 });

});
</script> 
```

但是，如果您想知道代码中的问题，那么您缺少`;`after`var numclicks = 2`并且正确的用法`++`运算符是`numclicks++;`.

# php - 带有缓存清单的动态内容

> ID：16002574
> 
> 赞同：0
> 
> 时间：2013-04-14T18:13:27.837
> 
> 标签：php, jquery, caching, cache-manifest

我在构建带有缓存清单的 Web 应用程序时面临着几个挑战。

我的挑战是处理动态内容。如果用户注销并使用**其他**帐户重新登录应用程序，我该如何处理**重新加载**缓存文件以显示与用户帐户相关的信息？

是否可以强制重置/重新加载缓存清单？文档似乎很薄。

我正在 jQuery Mobile 和 Codeigniter 上构建应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:53:38.287

从来没有这样做过，但首先想到的是在清单属性 url 中设置查询参数。

```
<html manifest="manifestFileName.manifestMime?user_id=1234&version=xxx"> 
```

然后用于`htaccess`将任何请求重定向`.manifestMime`到输出适当用户资源的 php 文件。

必须在 url 中有一个段用于 html 输出页面，使每个帐户的 url 唯一，如果可行，甚至可以添加一组链接`my Accounts`

另一种清单命名协议可能类似于：

```
<html manifest="manifestFileName.USER_ID.manifestMime"> 
```

# python - django social-auth 多账户关联

> ID：16002576
> 
> 赞同：10
> 
> 时间：2013-04-14T18:13:34.027
> 
> 标签：python, django, single-sign-on, django-socialauth

我正在使用 django social-auth （[http://django-social-auth.readthedocs.org/en/latest/index.html](http://django-social-auth.readthedocs.org/en/latest/index.html)）并尝试创建一个用户配置文件，用户可以在其中关联多个帐户（如 Stackoverflow 上的此处） .

目前，我处于单个用户可以使用不同的身份验证提供程序登录的地步，但每次登录都会创建一个新用户。如何将所有用户帐户关联到一个帐户（如用户个人资料）？

另外，使用 django social-auth 时创建用户个人资料页面的最佳做法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T17:46:50.047

DSA 已经支持多个帐户关联，诀窍是用户必须登录，否则 DSA 不知道它应该与已经存在的帐户关联。

关于您的个人资料，向 DSA 添加功能的推荐方法是扩展[管道](http://django-social-auth.readthedocs.org/en/latest/pipeline.html)，您可以创建如下条目：

```
def create_profile(user, is_new=False, *args, **kwargs):
    if is_new:
        # create a profile instance for the given user
        create_user_profile(user) 
```

然后在这样的设置中注册它：

```
SOCIAL_AUTH_PIPELINE = (
    'social_auth.backends.pipeline.social.social_auth_user',
    'social_auth.backends.pipeline.user.get_username',
    'social_auth.backends.pipeline.user.create_user',
    'social_auth.backends.pipeline.social.associate_user',
    'social_auth.backends.pipeline.social.load_extra_data',
    'social_auth.backends.pipeline.user.update_user_details',
    'myapp.pipeline.create_profile'
) 
```

其中条目是获取该功能的导入路径。

编辑：链接到文档和设置说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:29:25.310

I see 2 alterntive when you want to handle with multiple account association:

*   1.  Find a unique attribute that all identity provider has.
*   2.  Keep a base authentication and link all the rest identity providers to its.

The first approach has 2 disadvantages

*   Is possible that does not exist any attibute that is present in all the identity provider. One common implementatios that people did in the past is to use the email as this attribute to identity the user, but for example Twitter does not share the email anymore.

*   Is posible to find a non consistent problem. For example people can set differents values for an username or for a email in the differents providers.

I recommend you to implement the second approach. Set a primary identity provider (ldap, database or an authentication closed and secure for you). And each time a user want link a "X identity provider to your account", look for the attribute that this provider use and save in a table this relation between your primary identity and that new identity.

Keep also aware about the data colision. Set what provider will have preference when setting the data for your local account, in order to not turn your data wrong or expired. (Read somethig about "[Level of assurance](http://kantarainitiative.org/confluence/download/attachments/38371432/Kantara+IAF-1200-Levels+of+Assurance.pdf))

This is an old debate so first of implement something, start to read. There are many interesting documentation about this [issues](https://www.google.es/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CFAQFjAD&url=http://www.terena.org/activities/refeds/docs/multipleIdPs&LoAs-v1.0.pdf&ei=7g5sUcTSPJS6hAfk64D4Cg&usg=AFQjCNF2nUNAkD1CDy7IYKAjJnVfxmLdJA&sig2=Hn_gUid2RpdlSJkcb4d-cA&bvm=bv.45175338,d.ZG4&cad=rja)

Related to the specific problem in django. Read this comparation between the differents [djago social-auth apps](http://hackerluddite.wordpress.com/2011/05/17/review-of-4-django-social-auth-apps/). Also check [django-socialprofile](https://github.com/cyface/django-socialprofile) and this [old thread](https://stackoverflow.com/questions/7313336/django-multiple-user-profiles-subprofiles)

# ruby-on-rails - Rails 将 JSON 解析为哈希

> ID：16002577
> 
> 赞同：3
> 
> 时间：2013-04-14T18:13:34.287
> 
> 标签：ruby-on-rails, json, parsing

我尝试解析 JSON 响应。

```
@response = ActiveSupport::JSON.decode(@data.body) 
```

@回复：

```
{"response"=>[{"name"=>"Den", "other"=>[{"sex"=>"male"}]}]} 
```

如何访问

```
@response['response']['name'] 
```

和

```
@response['response']['name']['sex'] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T18:18:12.243

```
@response['response'][0]['name'] 
```

和

```
@response['response'][0]['other'][0]['sex'] 
```

# c - 如何捕获 SIGINT 在 c 中使用的次数？

> ID：16002579
> 
> 赞同：1
> 
> 时间：2013-04-14T18:13:40.900
> 
> 标签：c, function

如何捕获程序结束前使用 SIGINT 的次数？例如：在一个仅在使用 SIGQUIT 时结束的程序中，并告诉我们用户在结束前按了多少次 ctr-c（使用了 SIGINT）。

到目前为止，我已经做到了：

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <unistd>

void sigproc1(int var); 
void sigproc2(int var);

int main()
{

    signal(SIGINT, sigproc1)  //SIGINT - interactive attention request sent to the program.
    signal(SIGQUIT, sigproc2) //SIGQUIT - The SIGQUIT signal is similar to SIGINT, except that it's controlled by a different key—the QUIT character, usually C-\—and produces a core dump when it terminates the process, just like a program error signal. You can think of this as a program error condition “detected” by the user.

}

void sigproc1(int var)
{

    signal(SIGINT, sigproc1);
    signal(SIGINT, sigproc2);

    printf("You have pressed ctrl-c\n");

    //Save the number of times that it received the SIGINT signal
//Print the number of times that it received the SIGINT signal
}

void sigproc2(int var)

    exit(0); //Normal exit status.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:29:01.603

我使用了一个名为（来自计数）的全局变量，我在函数`ct`中递增并显示它。`sigint`

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>

int ct = 0;

void sigint(int sig)
{
    printf("You have pressed ctrl-c %d times\n", ++ct);
}

void sigquit(int sig){
    exit(0); // use CTRL+\ to exit the program since CTRL+c displays those stats
}

int main()
{
    signal(SIGINT, sigint);
    signal(SIGQUIT, sigquit);

    while(1){}
} 
```

样本输出：

```
[paullik@eucaryota tmp]$ ./a.out 
^CYou have pressed ctrl-c 1 times
^CYou have pressed ctrl-c 2 times
^CYou have pressed ctrl-c 3 times
^CYou have pressed ctrl-c 4 times
^CYou have pressed ctrl-c 5 times
^CYou have pressed ctrl-c 6 times
^CYou have pressed ctrl-c 7 times
^CYou have pressed ctrl-c 8 times
^\[paullik@eucaryota tmp]$ 
```

# ruby - Rails 设计困境：相同的算法，不同的类

> ID：16002581
> 
> 赞同：1
> 
> 时间：2013-04-14T18:13:47.743
> 
> 标签：ruby, ruby-on-rails-3, pointers, multiple-inheritance

我正在处理我的第一个 Ruby on Rails 项目，现在我面临着设计困境。我不是专业程序员，所以我可能会遗漏一些非常基本的东西。请多多包涵。

我的项目是一个选举系统模拟器。我有（除其他外）这些模型

```
class Town < ActiveRecord::Base
  attr_accessible :census, :name
  has_many :results
  has_many :parties, :through => :results
  belongs_to :region
end

class Party < ActiveRecord::Base
  attr_accessible :acronym, :name
  has_many :results
  has_many :towns, :through => :results
end

class Result < ActiveRecord::Base
  attr_accessible :party, :town, :votes, :year
  belongs_to :town
  belongs_to :party
end 
```

两个类`Town`和`Party`都有一个方法`seats()`，计算座位的算法（从`:census`或从`:votes`，分别）将基本相同。我希望能够以适用于任何一种的方式对算法进行编码。

我想到了各种解决方案：

*   编写一个通用函数并将其传递给所需类的指针。这有一个问题是，在另一种情况`:census`下是`:votes`，我不知道在 RoR 中管理它有多容易。我也可以将指针传递给列吗？这听起来不太像Rubyish。
*   从定义算法的公共类继承。然后我会失去实际上非常方便的 ActiveRecord 功能。或者我会？
*   创建一个通用算法并相应地从特定于类的方法中为其提供原始数据数组。这意味着我必须分别为每个类编写数据接口。

我希望解决方案具有可扩展性，即有一天我希望它适用于将成为城镇集合的“区域”，以及将成为各方集合的“联盟”......

你会实施这些选项中的任何一个吗？他们每个人的优点/缺点是什么？有没有解决这个问题的标准方法？

# html - 验证警告：“文本运行不在 Unicode 规范化表单 C 中。”

> ID：16002582
> 
> 赞同：0
> 
> 时间：2013-04-14T18:13:54.590
> 
> 标签：html, validation, w3c-validation

我在这里看到了一些具有相同标题的其他问题，但没有一个解释如何解决这个问题。

每当我通过使用 HTML 实体在文档中包含特殊字符时，验证器都会向我发出警告“文本运行不在 Unicode 规范化表单 C 中”。

例子：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test page</title>
</head>
<body>

&#8486;

</body>
</html> 
```

你可以自己试试，在这里：http: [//validator.w3.org/check](http://validator.w3.org/check)

为什么我会收到验证警告，我应该怎么做才能修复它？

# session - 使用 JPA 加载后如何更新会话属性

> ID：16002584
> 
> 赞同：0
> 
> 时间：2013-04-14T18:14:14.887
> 
> 标签：session, servlets, jpa-2.0, session-variables

使用 JPA 加载一些数据后，我在更新会话属性时遇到问题。

我设置/获取会话属性：

```
request.getSession().setAttribute("user", user);

User user = (User) request.getSession().getAttribute("user"); 
```

在应用程序的某个地方，我从数据库加载列表`users`（与`user`会话属性相同），修改并保存。一切都会好起来的，我将获得最新信息，但如果我从会话属性中获取信息，则不会。我不想为几乎静态的信息请求数据库，但另一方面我不知道如何更新会话属性。

存储会话的属性可能是非常不正确的实现吗？

**更新** 这个解决方案怎么样：

我有会话属性的缓存

```
public static final HashMap<String, HashMap<String, Object>> sessionAttributeMaps = new HashMap<>(); 

public static final HashMap<String, HashMap<String, Object>> sessionAttributeMapsForUpdate = new HashMap<>(); 
```

在`sessionAttributeMaps`我存储会话属性（我需要稍后刷新并保持实际），使用`HttpSessionAttributeListener`：

```
@WebListener
public class SessionAttributeListener implements HttpSessionAttributeListener{

    @Override
    public void attributeAdded(HttpSessionBindingEvent event) {
        String SessionId = event.getSession().getId();
        String attributeName = event.getName();        
        Object attributeValue = event.getValue();    

        if (attributeName.equalsIgnoreCase("user")) {
            HashMap<String, Object> hm = ServletUtil.sessionAttributeMaps.get(SessionId);
            if (hm==null) {
                hm = new HashMap<String, Object>();
                ServletUtil.sessionAttributeMaps.put(SessionId, hm);
            }
            hm.put("user", attributeValue);
        }
    }
    ...
} 
```

sessionAttributeMaps（用于几个创建的会话）：

[[会话1：[{“user”：user1}，{“customer”：customer1}]]，

[会话 2: [{"user" : user1}, {"customer" : customer2}]],

[会话 3: [{"user" : user2}, {"customer" : customer1}]] ]

在`sessionAttributeMapsForUpdate`我存储会话属性的实际值（当它们被改变时，我在地图中检查它在 POJO 实体中实现的所有会话）。

```
public void fireChanges() {    
    for (Entry<String, HashMap<String, Object>> sessionAttributesMap : servlets.ServletUtil.sessionAttributeMaps.entrySet()) {
        for (Entry<String, Object> entry : sessionAttributesMap.getValue().entrySet()) {
            if (this.equals(entry.getValue()) && this!=entry.getValue()) {
                entry.setValue(this);
                HashMap<String, Object> hm = ServletUtil.sessionAttributeMapsForUpdate.get(sessionAttributesMap.getKey());
                if (hm==null) {
                    hm = new HashMap<String, Object>();
                    ServletUtil.sessionAttributeMapsForUpdate.put(sessionAttributesMap.getKey(), hm);
                }
                hm.put("user", this);
            }
        }
    }
} 
```

如果`user1`更改，我填写`sessionAttributeMapsForUpdate`：

[[会话1：[{“user”：user1}]]，

[会话 2: [{"user" : user1}]]]

在助手中，我获取会话属性并检查更新（使用更新的清洁）

```
public static Object getSessionAttribute(String key) {

    Object value = FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get(key);

    if (key.equalsIgnoreCase("user")) {
        if (!ServletUtil.sessionAttributeMapsForUpdate.isEmpty()) {
            HttpSession hs = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false);
            HashMap<String, Object> hm = ServletUtil.sessionAttributeMapsForUpdate.get(hs.getId());    
            if (hm!=null) {
                User u = (User) hm.get("user");
                if (u!=null) {
                    value = u;
                    removeSessionAttribute("user");
                    setSessionAttribute("user", value);

                    hm.remove("user");
                }
                if (hm.isEmpty()) {
                    ServletUtil.sessionAttributeMapsForUpdate.remove(hs.getId());
                }
            }
        }
    }

return value;
} 
```

**警告**：由于新等于（但是） ，`setSessionAttribute("user", value);`因此无法正常工作`removeSessionAttribute("user");``value``value from session map``!=`

因此，当我使用助手获取会话属性时，我使用实际值。

可能已经有像我这样但经过时间考验的解决方案？

# typescript - 为什么在 AMD 编译时在 typescript 中使用模块和类？

> ID：16002585
> 
> 赞同：1
> 
> 时间：2013-04-14T18:14:15.727
> 
> 标签：typescript

我正在为我的项目创建一个模块（不确定它是否应该是模块/类/或无）。

我最喜欢这种方式。

```
///<reference path="..\typings\knockout\knockout.d.ts" />
///<reference path="..\typings\requirejs\require.d.ts"/>
///<reference path="hubs.d.ts" />

//export module SignalRService {
    export var deployHub = $.connection.deployHub;
    export var status = ko.observable();
    export function intialize() {
        $.connection.start()
        .done(() => { this.status("Connection Succesfull") } )
        .fail(() => { this.status("Connection Failed")});

    }

//} 
```

这导致我能够这样做：

```
var ko: KnockoutStatic = require('ko');
var hostNodes = ko.observableArray([]);
import signalr = module('SignalRService');

export class AppViewModel {

    ///Properties
    hostNodes = hostNodes;
    error = ko.observable();
    signalr = signalr;
    ///Constructor
    constructor() {

        signalr.intialize();
    }
} 
```

我可以从导入中直接访问我的“模块”中定义的东西。或者，如果我将它创建为打字稿模块。我必须补充：

信号器 = 信号器.SignalRService；

从导入中访问我的模块。当我没有在我的打字稿文件中将它声明为模块时，如果我错过了一些东西，谁能给我一点启发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:49:30.393

从我的角度来看 - 您正在使用两种不同的方法在 TypeScript (JavaScript) 中定义模块。

模块可帮助您确保不会与外部库发生冲突。例如，如果您将在脚本中定义 Common 类，同时您的外部库之一将具有同名的类，并且它们都将在全局上下文中 - 您将遇到问题，实现之一将覆盖另一个。

当你这样做`export module SignalRService`并且你不使用`AMD`JS 的编译选项时 - 你将所有的实现移到我们的全局上下文中。如果您不这样做`export module`，而是进行`AMD`编译 - 全局上下文的问题也得到了解决。因此，我们可以说 - 如果您的应用程序基于`AMD`- 您可能不需要`export module`.

# mapping - ElasticSearch 映射字符过滤器

> ID：16002588
> 
> 赞同：2
> 
> 时间：2013-04-14T18:14:21.310
> 
> 标签：mapping, elasticsearch

我的目标是能够搜索带有括号的单词，例如：

（安迪）

据我所知，如果我执行 Mapping Charfilter 并将括号更改为下划线，这将完成我所追求的。

```
 "index" : {
        "analysis" : {
            "char_filter" : {
                "my_mapping" : {
                    "type" : "mapping",
                    "mappings" : ["( => _", ") => _"]
                }
            },
            "analyzer" : {
                "custom_with_char_filter" : {
                    "tokenizer" : "standard",
                    "char_filter" : ["my_mapping"]
                },
            }
        }
    }
}'; 
```

当我运行上面我得到以下错误：

{"error":"ElasticSearchParseException[failed to parse source for create index]; 嵌套：JsonParseException[Unexpected character ('}' (code 125)): 期待有效的名称字符（用于未引用的名称）或双引号（用于引用）在 [Source: [B@70de7f1b; line: 15, column: 14]]; ","status":400} 处开始字段名称\n

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T20:56:15.433

仔细重新阅读错误信息。它包含您需要的所有信息来解决这个问题。基本上，您在第 14 行有一个额外的逗号，因此解析器希望它后面跟着一个名称，而不是在第 15 行第 14 列得到“}”。

# wordpress - 如何编辑 Wordpress 注册页面错误代码？

> ID：16002591
> 
> 赞同：0
> 
> 时间：2013-04-14T18:14:28.733
> 
> 标签：wordpress, login

我正在尝试找到一种方法来编辑 wordpress 注册页面抛出的错误代码。例如：

> 错误：请输入用户名。
> 
> 错误：电子邮件地址不正确。

这些存储在哪里以便我可以更改它们？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:36:01.570

中有一个过滤器`wp-login.php`。但是不要触摸 WordPress 核心文件，过滤器和操作挂钩已经到位，因此您可以在不编辑核心的情况下修改 WP 行为。

```
add_filter( 'registration_errors', 'registration_errors_so_16002591' );

function registration_errors_so_16002591( $errors )
{
    if( isset( $errors->errors['invalid_email'] ) ) {
        $errors->errors['invalid_email'][0] = '<strong>bad</strong> email';
    }
    if( isset( $errors->errors['username_exists'] ) ) {
        $errors->errors['username_exists'][0] = 'nick <strong>picken</strong>';
    }
    // Other errors
    // ['empty_email']
    // ['empty_username']

    return $errors;
} 
```

[*相关问答：[将我的代码放在哪里：plugin 或 functions.php？](https://wordpress.stackexchange.com/q/73031/12615)*]

# asp.net-mvc - WebAPI 表单身份验证的 MessageHandler 的任何示例？

> ID：16002592
> 
> 赞同：1
> 
> 时间：2013-04-14T18:14:33.047
> 
> 标签：asp.net-mvc, security, authentication, asp.net-web-api

作为这个问题的后续行动：

[WebAPI + Forms Authentication + SimpleMembershipProvider 在不应该使用 WindowsIdentity 时使用](https://stackoverflow.com/questions/15994857/webapi-forms-authentication-simplemembershipprovider-using-windowsidentity-w)

我现在正在尝试实现一个消息处理程序，该处理程序在每个请求上设置主体，但我不确定如何将它与 simpleMembershipProvider 联系起来。我正在寻找一个设置主体并针对 simpleMembership 执行身份验证的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:24:02.727

答案是“这取决于您计划在 Web api 上实施的身份验证机制”。

## 基本的 Http 身份验证？

这应该有效：

[http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/)

...而且似乎有更好/更简单的方法

[http://leastprivilege.com/2012/10/23/mixing-mvc-forms-authentication-and-web-api-basic-authentication/](http://leastprivilege.com/2012/10/23/mixing-mvc-forms-authentication-and-web-api-basic-authentication/)

这里的想法是您将以纯文本形式发送您的凭据（希望您应该使用 https），并且消息处理程序（又名 DelegatingHandler）将获取这些凭据，使用您的简单会员提供程序验证它们，如果无效或设置返回 401如果他们没问题，就上去校长。

## 更复杂的机制？

与具有更复杂机制的基本 http 身份验证相比，您的 api 用户将进行**一次**身份验证，并且您的 api 将发出一个安全令牌，该令牌应在客户端发出的每个后续请求上发送。

在这种情况下，您的 DelegatingHandler 将检查此令牌，对其进行验证，并以 401 响应或相应地设置委托人。

请注意，我没有在这里介绍令牌颁发或验证背后的逻辑，因为它们通常是自定义的。你可以用谷歌搜索亚马逊是如何用它的 api 做的，但如果你的 api 背后的数据非常敏感，我只会使用这种复杂的机制。

# javascript - 什么是正确发布 javascript 函数？

> ID：16002605
> 
> 赞同：-2
> 
> 时间：2013-04-14T18:16:18.133
> 
> 标签：javascript, jquery

下面这两个是一样的吗？

```
<script type="text/javascript"> 
var $j = jQuery.noConflict();
$j(document).ready(function () {
    $j('.fancybox').fancybox({
        maxWidth    : 700,
        maxHeight   : 550,
        minHeight   : 500,
        closeBtn:true
    });
    $j('a.fancybox').fancybox({
        maxWidth    : 700,
        maxHeight   : 550,
        minHeight   : 500,
        closeBtn:true
    });
    $j('#homeslider iframe').each(function() {
        var url = $j(this).attr("src")
        $j(this).attr("src",url+"&amp;wmode=Opaque")
    });
});
</script>
<script>
var $j = jQuery.noConflict();
$j(function(){
    // jQuery UI Dialog  
    $j('#dialog').dialog({
        autoOpen: false,
        width: 400,
        modal: true,
        resizable: false,
        buttons: {
            "Submit Form": function() {
                document.testconfirmJQ.submit();
            },
            "Cancel": function() {
                $j(this).dialog("close");
            }
        }
        return false;
    });
});
</script> 
```

和这个

```
<script type="text/javascript"> 
var $j = jQuery.noConflict();
$j(document).ready(function () {
    $j('.fancybox').fancybox({
        maxWidth    : 700,
        maxHeight   : 550,
        minHeight   : 500,
        closeBtn:true
    });
    $j('a.fancybox').fancybox({
        maxWidth    : 700,
        maxHeight   : 550,
        minHeight   : 500,
        closeBtn:true
    });
    $j('#homeslider iframe').each(function() {
        var url = $j(this).attr("src")
        $j(this).attr("src",url+"&amp;wmode=Opaque")
    });
});
$j(function(){
    // jQuery UI Dialog  
    $j('#dialog').dialog({
        autoOpen: false,
        width: 400,
        modal: true,
        resizable: false,
        buttons: {
            "Submit Form": function() {
                document.testconfirmJQ.submit();
            },
            "Cancel": function() {
                $j(this).dialog("close");
            }
        }
        return false;
    });
});
</script> 
```

我删除了关闭脚本并开始新的脚本来连接这两个。我还删除了多余的 noConflict。为什么在我的标题中使用这两种不同的用途会得到不同的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:30:01.583

你没有描述发生了什么变化。但是看着它，我猜你的第二个`script`从来没有开始工作过。

它们是相同的，但如果你的第二个接近尾声`script`，你就错位了`return false`。`script`这是一个语法错误，当它们连接在一起时会对整体产生影响。

```
$j(function(){
    // jQuery UI Dialog  
    $j('#dialog').dialog({
        autoOpen: false,
        width: 400,
        modal: true,
        resizable: false,
        buttons: {
            "Submit Form": function() {
                document.testconfirmJQ.submit();
            },
            "Cancel": function() {
                $j(this).dialog("close");
            }
        }
        return false;  // INVALID SYNTAX
    });
}); 
```

请在开发过程中保持浏览器的开发者控制台打开。这会告诉您语法错误，并且应该是您诊断问题的第一个地方。

当您确实发布了一个您无法弄清楚的问题时，请从一开始就发布一个完整的示例。

此外，当您发布问题时，请勿使用诸如“行为不同”或“不起作用”之类的模糊术语。详细描述你观察到的东西。

# php - 无法将从关联数组读取的图像插入到 mysql 表中

> ID：16002610
> 
> 赞同：0
> 
> 时间：2013-04-14T18:16:34.330
> 
> 标签：php, mysql

通过将二进制文件（图像）的内容读取到**$banner**

`$banner = addslashes (fread (fopen ( $mysql_banner, "r"),filesize($mysql_banner)))`

然后，您可以轻松地将其放入 MySQL 数据库表中。它工作完美。但是，当您通过将二进制文件（图像）的内容加载到关联数组**$final**以便稍后将其插入数据库来执行额外步骤时，会出现一个问题 - 您无法将其插入数据库表中。让我们将相同的内容放入关联**$final**

`$final["banner"] = addslashes( fread( fopen( $mysql_banner,"r"), filesize($mysql_banner)`

并将其分解为组件

```
 while ( list($name, $value) = each($final) )  {**
     $values_fields .= "$name, "; 
      $values .= "'$value', ";
}
$query1 = "INSERT INTO $banery ($values_fields) VALUES('$values')";
$res = mysql_db_query( $db, $query1)** 
```

虽然原始 $banner 及其副本变量**$value**（取自关联数组 **$final**）具有相同的内容（图像的二进制内容），但只有原始**$banner**可以插入数据库。当我尝试插入**$value**时，会显示以下警告：“-无法插入***数据库。MySQL 插入 - 有问题***...”（神秘提示）为什么？`enter code here`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:27:47.933

你从未定义

```
$banery 
```

因此你不能插入它。

你必须做类似的事情

```
INSERT INTO table_name (... 
```

但你在做

```
INSERT INTO $table_name (... 
```

没有定义 $table_name（在您的情况下为 $banery）是什么

# javascript - 特殊字符前的 Jquery 匹配 URL

> ID：16002615
> 
> 赞同：0
> 
> 时间：2013-04-14T18:16:48.007
> 
> 标签：javascript, jquery

我想匹配 url 直到一个特殊字符 '_' 如果它存在

`var url = window.location;` [var url 应该在 '_' http://www.example.com/index.php?route=product/category&path=25_10](http://www.example.com/index.php?route=product/category&path=25_10) 之前获取部分 url

即 [http://www.example.com/index.php?route=product/category&path=25](http://www.example.com/index.php?route=product/category&path=25)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:18:12.690

[split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)方法会做到这一点：

```
window.location.href.split('_')[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:23:46.877

```
var href = window.location.href;
// http://www.example.com/index.php?route=product/category&path=25_10

var new_url = href.slice(0, href.indexOf('_'));
// http://www.example.com/index.php?route=product/category&path=25 
```

# python - python中的json树

> ID：16002618
> 
> 赞同：0
> 
> 时间：2013-04-14T18:17:18.460
> 
> 标签：python, json

当我在 python 中加载 json 树时

> > > 树 = json.loads('["SBARQ", ["WHADJP", ["ADV", "How"], ["ADJ", "far"]], ["SBARQ", ["SQ",["动词", "is"], ["NP", ["NOUN", "Yaroslavl"], ["PP", ["ADP", "from"], ["NP+NOUN", "Moscow"]] ]], [".", "?"]]]')

似乎将树存储为看起来像嵌套列表的东西

```
>>> print tree
[u'SBARQ', [u'WHADJP', [u'ADV', u'How'], [u'ADJ', u'far']], [u'SBARQ', [u'SQ', [u'VERB', u'is'], [u'NP', [u'NOUN', u'Yaroslavl'], [u'PP', [u'ADP', u'from'], [u'NP+NOUN', u'Moscow']]]], [u'.', u'?']]] 
```

你是什​​么意思？这棵树是如何存储的？我应该如何遍历/搜索树？我是 json 树的新手，对于 json 树的初学者来说似乎没有很多好的教程。有人可以解释正在发生的事情的基础知识或将我链接到一个好的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:22:00.327

`u'foo'`事情是一个 Unicode 字符串：一个字符串，其元素是 Unicode 字符而不是字节。别担心。

的返回值`json.loads()`是一个普通的 Python 对象，在您的情况下是一个列表。该列表中的一些元素也是列表。您使用列表的方式与使用所有 Python 列表的方式相同。请参阅[教程](http://docs.python.org/2/tutorial/introduction.html#lists)和 [更多教程](http://docs.python.org/2/tutorial/datastructures.html#more-on-lists)。

# mysql - SQL 数据库中的自动计算百分比和 Post 值

> ID：16002620
> 
> 赞同：0
> 
> 时间：2013-04-14T18:17:29.803
> 
> 标签：mysql, sql

我想要一个 sql 查询，它可以帮助我计算 MAX 列中所有单元格的百分比。

它应该这样计算 - (max/500)*100

它应该在新行“max_percent”中发布所有这些值

**SQL 表**

```
id   Name   min    max   max_percent
1  Samsung  100    2050
2  Nokia    100    1520
3  HTC      1200   5600
4  Apple    1200   2210
5  O2       700    1700 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:19:20.960

```
UPDATE myTable SET `max_percent`=`max`/500*100 
```

# java - 如何在不破坏后退按钮的情况下将应用程序置于停止阶段？

> ID：16002624
> 
> 赞同：0
> 
> 时间：2013-04-14T18:18:09.197
> 
> 标签：java, android

我正在开发服务器客户端应用程序，因此我的客户端 android 连接到在 pc 中运行的服务器。

如果我在任何其他活动而不是主要活动中，而不是按返回按钮而不是转到上一个，但是当我在应用程序的主屏幕中按返回按钮时，应用程序会销毁并转到移动设备的主屏幕

所以在那之后我按住手机的主页按钮并再次启动我的应用程序虽然我连接到电脑而不是我必须再次提供IP地址和端口号

所以我必须通过在我按下后退按钮时将我的应用程序置于停止阶段来解决它

```
public void onBackPressed() {

    Intent intent = new Intent();
    intent.setAction(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_HOME);

    startActivity(new intent(mainactivity.this , home.class);

    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:15:11.503

将网络客户端相关代码放入其中是错误的`Activity`。您应该为此使用`Service`并从活动绑定或发送命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:26:16.063

实际上，您是在正确的方式上，在实现 onBeackPressed() 方法方面做了一些事情，但主页按钮应该保持不变。

但是，当您启动应用程序时，您可以使用预定义的设置进行开发。例如：如果 DEVELOPMENT = true，则使用一些存根 IP。

# jquery - Jquery 自动完成 + 搜索结果

> ID：16002625
> 
> 赞同：0
> 
> 时间：2013-04-14T18:18:11.840
> 
> 标签：jquery, html, search, autocomplete

我有以下代码工作，但我仍然需要一些帮助来弄清楚如何使自动完成输入部分成为搜索栏。

首先我以为我需要制作一个表单并使用提交来获取结果，但据我了解，我可以简单地使用 jquery 的“搜索”方法/事件来完成它并省去麻烦想，我没有成功

这是我得到的：

```
<div id="search">
    <input id="project" />
</div> 
```

作为 html

```
$( "#project" ).autocomplete({
    minLength: 0,
    source: projects,
    focus: function( event, ui ) {
        $( "#project" ).val( ui.item.label );
        return false;
    },
    select: function( event, ui ) {
        $( "#project" ).val( ui.item.label );
        $( "#project-id" ).val( ui.item.value );
        $( "#project-description" ).html( ui.item.desc );
        return false;
    },
})
.data( "ui-autocomplete" )._renderItem = function( ul, item ) {
  return $( "<li>" )
    .append( "<a>" + item.label +  "</a>" )
    .appendTo( ul );
}; 
```

作为jquery，我已经看到了一些类似的问题，但是我没有从我所做的事情中得到正确的答案，自动完成列表在输入单词时是可见的，但我想要发生的是当用户按下回车键时自动完成列表中的结果将显示在页面另一部分的某个 div 中。

感谢您的帮助（尝试插入“搜索”、“”字段和其他一些方法都没有达到我的目标:()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T13:43:28.423

这是代码：

```
<div id="search">
  <input list="results" id="project" onkeydown="if (event.keyCode == 13) { checkInput(this.value); return false; }" />
</div> 
```

可用的结果...

```
<datalist id="results">
  <option>Demo</option>    
  <option>Example</option>
  <option>pizza</option>
</datalist> 
```

最后是javascript

```
function checkInput(searchQuery)
{
if(searchQuery=="Demo")
{
    window.location = "Demo.html";
}
else if(searchQuery == "Example")
{
    window.location = "Example.html";
}
else if(searchQuery == "Pizza")
{
    window.location = "Pizza.html";
}
else
{
    window.location = "noresult.html";
}
} 
```

因此，当有人去搜索时，他们在预填充列表中的选项数量有限，而他们选择的任何一个选项都会将他们引导到您的目标页面！我不能接受所有的功劳，但我希望这会有所帮助！

# javascript - 如何使用 ajax 从 php 文件中加载 popover 的内容？

> ID：16002628
> 
> 赞同：1
> 
> 时间：2013-04-14T18:18:28.920
> 
> 标签：javascript, ajax, popover

这是js代码：

```
function bindMyPopovers() {
  $("a[rel=popover]").each(function(){

        $(this).popover({
        trigger: 'hover',
        placement: 'top',
        html: true,
        title:"Passenger Information",
        content: "Passenger "+$(this).attr('id')+" "+showPassenger($(this).attr('id')) 
    })
    .click(function(e) {
        e.preventDefault()
    });

});
} 
```

这是用于获取乘客信息的 showPassenger()：

```
var v=false;
function showPassenger(id){
  var id_num=id.charAt(id.length-1);
  $.getJSON('Passengers.php?id='+id_num, function(passenger){
      v=null;

        $.each(passenger, function(pas_key, pas_value) {

          v+=pas_key+" "+pas_value;

        });
      });
   return v;
} 
```

当我来到某个图标时，我可以看到一些关于它的信息（我只是控制）。但是现在，我想显示另一个名为 Passenger.php 的文件中的内容，但是使用 showPassenger(id) 我无法显示内容，并且它也不会改变 v 的值。为什么会这样？如何加载内容？谢谢。

# java - Java 小程序到 BufferedImage

> ID：16002629
> 
> 赞同：1
> 
> 时间：2013-04-14T18:18:30.563
> 
> 标签：java, image, applet, awt, bufferedimage

我创建了一个 JFrame，它为这样的游戏加载外部小程序：

```
//Setup everything for the Stub.. Below adds the stub to the applet and creates it.
DownloadFile(new URL(World + "/" + Archive), "./gamepack.jar");
CAppletStub Stub = new CAppletStub(new URL(World), new URL(World), this.Parameters);
applet = (Applet) new URLClassLoader(new URL[] {new URL(World.toString() + "/" + Archive)}).loadClass("Rs2Applet").newInstance();

applet.setStub(Stub);
applet.init();
applet.start();
applet.setPreferredSize(new Dimension(Width, Height));
Frame.getContentPane().add(applet); 
```

我正在尝试截取这个小程序或让它在 BufferedImage 中绘制它的表面。我尝试将“Applet”子类化并将我的 URLClassLoader 转换为该类，但它无法转换，这是有道理的。

如何捕获小程序渲染成图像的所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:40:06.033

这适用于任何组件，而不仅仅是小程序：

```
public static BufferedImage toBufferedImage(Component component) {
    BufferedImage image = new BufferedImage(component.getWidth(), 
        component.getHeight(), BufferedImage.TYPE_INT_RGB);
    Graphics g = image.getGraphics();
    component.paint(g);
    return image;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:27:46.290

我将[屏幕图像](http://tips4java.wordpress.com/2008/10/13/screen-image/)用于普通的 Swing 应用程序。不知道将小程序加载到 JFrame 中是否会导致任何问题。

# ios - 在 TableView 中移动单元格

> ID：16002630
> 
> 赞同：0
> 
> 时间：2013-04-14T18:18:39.247
> 
> 标签：ios, objective-c, uitableview

我有一个表格视图，用户可以在其中按照他希望的顺序移动和重新排列单元格。但是当他多次移动/重新排列单元格时，保存项目的数组会因为项目的顺序而完全混乱，但视觉上一切都很好。我究竟做错了什么？先感谢您...

```
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath
{

    id object1 = [_items5 objectAtIndex:sourceIndexPath.row];
    id object2 = [_items5 objectAtIndex:destinationIndexPath.row];

    [_items5 replaceObjectAtIndex:sourceIndexPath.row withObject:object2];
    [_items5 replaceObjectAtIndex:destinationIndexPath.row withObject:object1]; 
```

其中 _items5 是一个 NSMutableArray 并在 viewDidLoad 中初始化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:22:05.403

您正在交换两个项目，而不是移动一个移动的项目。你要：

```
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath {
    id object = [_items5 objectAtIndex:sourceIndexPath.row];
    [_items5 removeObjectAtIndex:sourceIndexPath.row];
    [_items5 insertObject:object atIndex:destinationIndexPath.row];
} 
```

注意：如果使用 MRC，您需要保留`object`，以便在放回数组之前不会释放它。

# postgresql - 多个连接上具有 NULL 值的多列唯 一索引的行为

> ID：16002634
> 
> 赞同：1
> 
> 时间：2013-04-14T18:18:55.423
> 
> 标签：postgresql, unique-constraint, unique-index

我在 postgresql 中有一个多列唯一索引。有时这些列值之一将为 NULL，我希望唯一索引将 NULL 视为另一个值。因此不允许这两行：

```
1,2,NULL
1,2,NULL 
```

在 psql 做简单的实验，这正是我看到的行为。

但是我有一个压力测试，我使用 20 个线程进行 20 个并发插入。在这里，Postgres 允许插入相同的行。

发生这种情况有什么原因吗？也许我的 psql 实验和我的测试实验之间还有另一个区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:34:00.383

唯一索引将认为空值是不同的，因此可以插入这些值：

```
create table t (a int, b int, c int, unique (a, b, c));
insert into t (a, b, c) values
(1, 2, null),
(1, 2, null);
INSERT 0 2 
```

展示你的实验是不允许的。

# python - lxml事件解析大文件只提取一些数据

> ID：16002635
> 
> 赞同：2
> 
> 时间：2013-04-14T18:19:09.250
> 
> 标签：python, xml-parsing, lxml

我在这里看到了很多关于 lxml 解析的问题，虽然它们都非常有用，但有些问题是特定于被解析文件的结构的。

就我而言，我有一个如下所示的 xml：

```
<documents>
    <document>
        <id>123456</id>
        <element name="name">
            <value><![CDATA[john doe]]></value>
        </element>
        <element name="address">
            <value><![CDATA[no name street]]></value>
        </element>
    </document>
</documents> 
```

实际的 xml 有更多的元素，但这只是为了举例说明。我的最终目的是将其中一些信息提取到 csv 中，以便得到以下结果：

```
id, name, address
123456,john doe,no name street 
```

但是我的问题是解析文件以根据条件（如果父“元素”具有特定属性）获取“值”元素中的值。

因为我要解析的真实文件大约是 8gb，所以我认为最好使用 lxml 的 iterparse 来避免在内存中存储一​​棵大树。

这是我现在拥有的代码，如果“元素”的属性“名称”等于列表“属性”中指定的值，我在尝试检查下一个元素的文本时有点卡在最后：

```
from lxml import etree

attributes = ("name", "address")
context = etree.iterparse("test.xml", tag="document")

for event, element in context:
    for child in element:
        if child.attrib.get("name") in attributes:
            print child.getnext().text 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:44:08.377

它不是真正的“下一个”，而是后代，所以我认为你可以再做一个循环。如果`value`始终是唯一的子元素，您可以执行以下操作：

```
from lxml import etree

attributes = ("name", "address")
context = etree.iterparse("test.xml", tag="document")

for event, element in context:
    for child in element:
        if child.attrib.get("name") in attributes:
            print next(c for c in child).text
    element.clear() # clear the subtree from the memory 
```

否则你可以`for`在 if 里面做一个完整的循环，有点像

```
if child.attrib.get("name") in attributes:
    for subchild in child:
        if subchild.tag == 'value':
            print subchild.text 
```

# android - 在另一个活动中显示 wifi 扫描的结果

> ID：16002641
> 
> 赞同：0
> 
> 时间：2013-04-14T18:19:27.140
> 
> 标签：android

我想在其他活动中显示 wifi 扫描的扫描结果，但是我这样做的方式使我的应用程序崩溃，谁能帮我在其他活动中显示扫描结果？// 这是我想要显示扫描结果的活动的代码

```
 package com.example.wizerv1;

import java.util.ArrayList;

import android.net.wifi.ScanResult;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class AP_list extends Activity {

Wizer wifi;
CustomReceiver rcv; 
TextView t1;
ListView list;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_ap_list);

    t1=(TextView)findViewById(R.id.textView1);

     list = (ListView) findViewById(R.id.listView1);
ArrayList<String> AP=new ArrayList<String>();
for (ScanResult result : rcv.results)
{
    AP.add("AP :"+result.SSID);

}

 ArrayAdapter<String> adp = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,AP);
   list.setAdapter(adp);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_ap_list, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:09:19.817

你没有设置`CustomReceiver rcv`任何值，所以你得到了一个`NullPointerException`。

# java - 按下按钮后检查文本框中的文本是否与字符串匹配

> ID：16002647
> 
> 赞同：1
> 
> 时间：2013-04-14T18:20:04.970
> 
> 标签：java, swing, jbutton, actionlistener

我想创建一个程序，其中用户按下按钮并且必须在文本框中输入一个单词，一旦他们输入了他们必须按下回车按钮的文本，他们输入的单词将与另一个字符串进行检查。我可以让它检查他们输入的字符串，但我不确定我会怎么做，所以用户必须先选择一个按钮，然后输入文本，然后按 Enter 按钮。

将有多个按钮可供用户选择，他们将打开图像，用户需要在文本框中写下这些图像的内容，以检查单词是否正确，他们将按下另一个按钮进行检查。

例如，四个带有图像`bag` `cat` `house` `lamp post`的按钮，用户选择一个按钮，然后他们需要使用文本框来拼写单词，然后按回车键来检查文本框中的文本是否与某个字符串匹配。

谢谢

这是我尝试过的：

```
 public class Textb extends JPanel{

 JFrame frame =new JFrame();
 JPanel panel =new JPanel();
 JButton enter =new JButton("Enter");
 JButton wordBtn =new JButton("Cat");
 JTextField tb =new JTextField();

public Textb() {

    // Panel and button layout 

    panel.setLayout(null);
    panel.setBackground(Color.WHITE);
    panel.setCursor( new Cursor(Cursor.HAND_CURSOR) ); // set the cursor to a hand 

    Insets insets = panel.getInsets();

    tb.setVisible(true);
    tb.setBounds(200 + insets.left, 5 + insets.top, 110,60);
    tb.setBackground(Color.YELLOW);

    enter.setLayout(null);
    enter.setBounds(10 + insets.left, 5 + insets.top, 110,60);
    enter.setBackground(Color.WHITE);
    enter.setBorder(BorderFactory.createEmptyBorder());
    enter.setFocusPainted( false );

    wordBtn.setLayout(null);
    wordBtn.setBounds(10 + insets.left, 70 + insets.top, 110,60);
    wordBtn.setBackground(Color.WHITE);
    wordBtn.setBorder(BorderFactory.createEmptyBorder());
    wordBtn.setFocusPainted( false );

    panel.add(tb);
    panel.add(enter);
    panel.add(wordBtn);
    frame.add(panel);
    frame.setTitle("Matching");
    frame.setSize(800, 600);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE ); 
    frame.setVisible(true);

    // This is where i did the action listener
    enter.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent ae)
        {
            if( ae.getSource().equals(wordBtn) )
            {
                if(tb.getText().equals("cat")){
                    tb.setText("Correct");
                }
            }
        }
    });
}

public static void main(String[] args) {
    new Textb();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:32:42.440

这是一个针对字符串测试输入并将输出附加到`JTextArea`. 它甚至使用`LayoutManager`, 你会发现它比布局有用**1000**倍（至少） 。`null`

![在此处输入图像描述](https://i.stack.imgur.com/gFfhH.png)

```
public class Test {
    private static String ENTER = "Enter";
    static JButton enterButton;
    public static JTextArea output;
    public static JTextField input;
    static JFrame frame;
    static JPanel panel;
    public static String testString = "test";

    public static void main(String... args)
    {
        try
        {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception ex)
        {
            ex.printStackTrace();
        }
        createFrame();
    }

    public static void createFrame()
    {
        frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
        panel.setOpaque(true);
        ButtonListener buttonListener = new ButtonListener();
        output = new JTextArea(15, 50);
        output.setWrapStyleWord(true);
        output.setEditable(false);
        JScrollPane scroller = new JScrollPane(output);
        scroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        scroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        JPanel inputpanel = new JPanel();
        inputpanel.setLayout(new FlowLayout());
        input = new JTextField(20);
        enterButton = new JButton("Enter");
        enterButton.setActionCommand(ENTER);
        enterButton.addActionListener(buttonListener);
        // enterButton.setEnabled(false);
        input.setActionCommand(ENTER);
        input.addActionListener(buttonListener);
        DefaultCaret caret = (DefaultCaret) output.getCaret();
        caret.setUpdatePolicy(DefaultCaret.ALWAYS_UPDATE);
        panel.add(scroller);
        inputpanel.add(input);
        inputpanel.add(enterButton);
        panel.add(inputpanel);
        frame.getContentPane().add(BorderLayout.CENTER, panel);
        frame.pack();
        frame.setLocationByPlatform(true);
        // Center of screen
        // frame.setLocationRelativeTo(null);
        frame.setVisible(true);
        frame.setResizable(false);
        input.requestFocus();
    }

    public static class ButtonListener implements ActionListener
    {

        public void actionPerformed(final ActionEvent ev)
        {
            Thread thread = new Thread()
            {

                public void run()
                {
                    if (!input.getText().trim().equals(""))
                    {
                        String cmd = ev.getActionCommand();
                        if (ENTER.equals(cmd))
                        {
                            output.append(input.getText());
                            if (input.getText().trim().equals(testString)) output.append(" = " + testString);
                            else output.append(" != " + testString);
                            output.append("\n");
                        }
                    }
                    input.setText("");
                    input.requestFocus();
                }
            };
            thread.start();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:34:07.493

我不确定您到底要做什么，但我认为您的这部分代码不会起作用...

```
 enter.addActionListener(new ActionListener(){
     public void actionPerformed(ActionEvent ae)
{

if( ae.getSource().equals(wordBtn) )
    {
    if(tb.getText().equals("cat")){
         tb.setText("Correct");
 }

}

 }
}); 
```

您正在添加一个`ActionListener`要输入的内容，然后检查是否单击了 wordBtn。并非如此，您的内部 if 语句将永远不会运行。

这是我认为您正在尝试做的一个示例。

```
public class textb extends JPanel {

    int counter = 0;

    public textb() {
        JButton enter = new JButton("Enter");
        JButton wordBtn = new JButton("Cat");

        enter.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                counter++;
            }
        });

       wordBtn.addActionListener(new ActionListener() {
           if (counter > 0) {
               //insert your code to check the String here, because the
               //only way to increment counter is by pressing the enter button
               //this code will not run unless enter has been pressed at least once
               //to make counter greater than zero, you could also use a boolean
               //set it to true when enter is pressed and check to see if its true
               //instead of checking if counter is greater than zero
           }
       });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T18:43:55.113

一个简单的`flag`变量应该可以工作：

![在此处输入图像描述](https://i.stack.imgur.com/eyqVk.png)

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class TestingCat extends JPanel{

JFrame frame =new JFrame();
JPanel panel =new JPanel();
private int flag=0;

JButton enter =new JButton("Enter");
JButton wordBtn =new JButton("Cat");

JTextField tb =new JTextField();

public TestingCat() {

// Panel and button layout

panel.setLayout(null);
panel.setBackground(Color.WHITE);
panel.setCursor( new Cursor(Cursor.HAND_CURSOR) ); // set the cursor to a hand

Insets insets = panel.getInsets();

tb.setVisible(true);
tb.setBounds(200 + insets.left, 5 + insets.top, 110,60);
tb.setBackground(Color.YELLOW);

enter.setLayout(null);
enter.setBounds(10 + insets.left, 5 + insets.top, 110,60);
enter.setBackground(Color.WHITE);
enter.setBorder(BorderFactory.createEmptyBorder());
enter.setFocusPainted( false );

wordBtn.setLayout(null);
wordBtn.setBounds(10 + insets.left, 70 + insets.top, 110,60);
wordBtn.setBackground(Color.WHITE);
wordBtn.setBorder(BorderFactory.createEmptyBorder());
wordBtn.setFocusPainted( false );

panel.add(tb);
panel.add(enter);
panel.add(wordBtn);
frame.add(panel);
frame.setTitle("Matching");
frame.setSize(800, 600);
frame.setLocationRelativeTo(null);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE );
frame.setVisible(true);

 // This is where i did the action listener
 wordBtn.addActionListener(new ActionListener(){

public void actionPerformed(ActionEvent ae)

{
flag=1;
}

} );

 enter.addActionListener(new ActionListener(){
 public void actionPerformed(ActionEvent ae)
{

JFrame f=new JFrame();
if( ae.getSource().equals(enter) )
    {
      if(flag==1) 
       {
          flag=0;
   if(tb.getText().equals("cat")){
             tb.setText("Correct");
       }
   }
      else
          JOptionPane.showMessageDialog(f,"enter cat 1st");
}

}
});

}

public static void main(String[] args) {
new TestingCat();
}
} 
```

# directx-11 - 如何在directX 11中将SHADEMODE设置为D3DSHADE_FLAT

> ID：16002650
> 
> 赞同：2
> 
> 时间：2013-04-14T18:20:48.350
> 
> 标签：directx-11

在 DirectX 9 中它是 g_d3dDevice->SetRenderState( D3DRS_SHADEMODE , D3DSHADE_FLAT); dx11 的 API 怎么样

谢谢

////////更新1///////

顶点/像素更碎，光线根本不会产生效果。例如。3 vectex 有红色、绿色、蓝色。如果打开 FLAT ode ，它将用第一种颜色填充所有三角形，如果 SMOOTH 模式 ，您将使用 Gouraud Shading 获得一个彩色三角形。

在顶点分片中，我得到了顶点颜色。

在像素分片中，我得到了像素颜色，但已经插值了。

没有灯光没有正常信息，这是一个二维程序。

而且我不要求用相同颜色填充三角形的方法。我只找到了使用 FLAT SHADEMODE 的方法。

////////更新2///////

```
struct VertexShaderInput
{
    float2 pos : POSITION;
    float4 color : COLOR0;
};

struct VertexShaderOutput
{
    float4 pos : SV_POSITION;
    nointerpolation float4 color : COLOR0;
}; 
```

但它也使用 Gouraud 着色。

////////更新3///////

我找到一个话题

[http://www.gamedev.net/topic/621313-directx11-and-smooth-shading](http://www.gamedev.net/topic/621313-directx11-and-smooth-shading/) 作者说“我没有在 Blender 中激活平滑阴影”但我在 Blender 中找不到关键字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T04:50:54.110

您可以通过在顶点数据上使用**nointerpolation修改器来做到这一点。**

```
struct VS_OUTPUT_AND_PS_INPUT
{
    float4 f4Position : SV_POSITION;    
    nointerpolation float3 f3WorldNormal : NORMAL;
}; 
```

您还可以对任何顶点数据使用**非插值以获得有趣的结果。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:28:51.907

如果我没记错的话，您要的是固定功能管道。在 DirectX 11 中，所有即时模式渲染、固定功能管道的东西都被彻底抛弃了（你仍然可以在旧版本的 OpenGL 和非常旧的 DirectX 版本中获得它，但你想要闪亮的新 DirectX 11）。你现在的绘制方式是编写[HLSL 着色器](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509561%28v=vs.85%29.aspx)，然后通过[`ID3D11Buffer*`相关 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476501%28v=vs.85%29.aspx)将其存储在 Vertex Buffers 中。然后调用设备上下文的`DrawIndexed`或`Draw`函数。

与旧 OpenGL 和旧 DirectX 的固定管道和硬状态机相比，这是一个非常大的变化。

如果您遵循[本教程](http://www.rastertek.com/tutdx11.html)可能会有所帮助。它将为您提供一个很好的起点，如果您了解 C++ 11，您甚至可以使用[`std::unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr).

**编辑：** 我提到固定功能管道的原因是因为 SHADEMODE 用于由 GPU 上的固定功能管道执行的照明计算。因为您正在编写自己的 HLSL 着色器来绘制事物，所以您无需设置“阴影模式”。相反，您可以通过编写自己的 HLSL 着色器来定义自己的着色模式。我不确定你是否还在考虑使用 DX11 进行固定功能管道编程，所以我确保在这个答案中尽可能地包容。

简短版：不存在，不要打扰。平坦/平滑着色可以通过编写您自己的遵循光和物理定律的着色器来实现，[其中许多之前已经完成，并为您的使用进行了简化和解释](http://en.wikipedia.org/wiki/Phong_shading)。祝你好运！

# sql - IN 语句中的 SQL IF 或 CASE

> ID：16002654
> 
> 赞同：0
> 
> 时间：2013-04-14T18:21:16.760
> 
> 标签：sql, sql-server

用户正在从 .aspx 页面将数据输入到我的“跟踪”表中。他们正在为不同的活动输入一系列日期，如果他们想被提醒该日期，请选中一个框。我目前遇到的具体问题是限制我的 IN 语句中的列：

```
SELECT [id], [name], MIN([DATE]) AS [MinDate] 
FROM track UNPIVOT ([DATE] FOR d IN ([date1],[date2],[date2])) unpvt
GROUP BY [id], [name] 
```

`date1`如果 column`date1chk`的值为，我只想包括`1`。同样，`date2`如果`date2chk`为“1”等。否则该`date#`列不包含在 IN 中。

在此之后，我的挑战是能够更新表，例如，例如，如果是最小值，则为特定记录`date2chk`设置从`1`到。`0``date2`

非常感谢您的想法——事实证明这是我处理过的更难的问题之一。

编辑（感谢您的反馈）：

### 数据

```
ID       Date1       Date1Chk         Date2      Date2Chk       Date3        Date3Chk
0     2013-01-15        0          2013-02-01       1        2013-02-10         1
1     2013-02-05        1          2013-02-05       1        2013-02-10         0 
```

### 期望的结果

```
ID    MinDate
0    2013-02-01
1    2013-02-05 
```

假设我能得到这个结果，我不确定如何更新表格。例如，在“期望结果”中，ID 1 返回一个最小值，该最小值同时存在于 [Date1] 和 [Date2] 中；我希望用户在第一个实例上停止提醒，因此 [Date1Chk] 将设置为 0（而不是 [Date2Chk]）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:32:07.183

您可以使用`CROSS APPLY.. VALUES`unpivot 数据而不是`UNPIVOT`函数，这允许您 unpivot 到多个列：

```
SELECT  ID, MinDate = MIN(Date)
FROM    track
        CROSS APPLY
        (   VALUES
                (Date1, date1chk),
                (Date2, date2chk),
                (Date3, date3chk)
        ) t (Date, datechk)
WHERE   Datechk = 1
GROUP BY ID; 
```

为了获得包含最小日期的列的名称，您可以稍微更改交叉应用以选择`TOP 1`而不是使用`MIN`：

```
SELECT  ID, Name, MinDate = Date
FROM    track
        CROSS APPLY
        (   SELECT  TOP 1 Date, datechk, Name
            FROM    (VALUES
                        (Date1, date1chk, 'Date1'),
                        (Date2, date2chk, 'Date2'),
                        (Date3, date3chk, 'Date3')
                    ) t (Date, datechk, Name)
            WHERE   Datechk = 1
            ORDER BY Date
        ) t; 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/d73c0f/6)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:11:53.980

将 移动`unpivot`到子查询中，以便您可以获取列的名称。然后一个`where`子句解决了你的问题：

```
select id, name, min([date]) as mindate
from (SELECT [id], [name], d, [DATE]
      FROM track
      UNPIVOT ([DATE] FOR d IN ([date1], [date2], [date2])) unpvt
    ) t
where (d = 'date1' and datecheck1 = 1) or
      (d = 'date2' and datecheck2 = 1) or
      (d = 'date3' and datecheck3 = 1)
GROUP BY [id], [name] 
```

要获取特定日期，请使用`row_number()`而不是`group by`：

```
select id, name, [date] as mindate
from (select id, name, [date],
             row_number() over (partition by id, name order by [date]) as seqnum
      from (SELECT [id], [name], d, [DATE]
            FROM track
            UNPIVOT ([DATE] FOR d IN ([date1], [date2], [date2])) unpvt
          ) t
      where (d = 'date1' and datecheck1 = 1) or
            (d = 'date2' and datecheck2 = 1) or
            (d = 'date3' and datecheck3 = 1)
     ) t
where seqnum = 1 
```

# java - 我应该存储什么类型的文件？

> ID：16002656
> 
> 赞同：0
> 
> 时间：2013-04-14T18:21:24.333
> 
> 标签：java, algorithm, encoding, huffman-code

我有树，每个字节的编码值，编码和解码表，以及我在编码文件的二进制文件中的编码文件，我有两个问题，我应该存储什么，只有解码表和编码文件应该够了吧？我应该在什么类型的文件中存储解码表和我的编码文件？我正在使用java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:10:15.833

如果生成规范树，则只需按未编码值的顺序存储每个字节的代码长度。由于霍夫曼码的最大长度是不同的未编码值的数量，而最小长度为 1，因此每个长度都适合单个字节。（gzip 库还对长度进行了编码，以进一步减少开销。）

假设代码是规范的，有一个简单的算法可以从长度列表生成完整的树。

实际上，至少有两种可能的规范编码样式。在这两种情况下，给定长度的代码与原始未编码字节具有相同的顺序。在[维基百科](http://en.wikipedia.org/wiki/Canonical_Huffman_code)描述的规范代码中，较短的代码在较长的代码之前（即*最短*的代码全为零。但更常见的规范形式将较长的代码放在开头，因此*最长*的代码全为零。维基百科的文章包括生成其规范编码形式的算法；另一种形式同样简单。

最长代码优先形式的优点是您可以证明只有任何代码的最后一位可以是非零的（是字母表大小）；换句话说，每个代码都由一定数量的零位组成，后跟最多一个混合零和一的“字节”。此属性有助于加快解码速度。`ceil(log[2]n)``n`

# mongodb - 如何查询嵌套对象？

> ID：16002659
> 
> 赞同：255
> 
> 时间：2013-04-14T18:21:50.393
> 
> 标签：mongodb, syntax, nested, mongodb-query, bson

使用嵌套对象表示法查询 mongoDB 时遇到问题：

```
db.messages.find( { headers : { From: "reservations@marriott.com" } } ).count()
0
db.messages.find( { 'headers.From': "reservations@marriott.com" }  ).count()
5 
```

我看不出我做错了什么。我期望嵌套对象表示法返回与点表示法查询相同的结果。我哪里错了？

* * *

## 回答 #1

> 赞同：509
> 
> 时间：2013-04-14T18:27:56.460

`db.messages.find( { headers : { From: "reservations@marriott.com" } } )`

这会查询`headers` *equals* `{ From: ... }`的文档，即不包含其他字段。

* * *

`db.messages.find( { 'headers.From': "reservations@marriott.com" } )`

这仅查看`headers.From`字段，不受 . 中包含或缺少的其他字段的影响`headers`。

* * *

[点符号文档](http://docs.mongodb.org/manual/core/document/#dot-notation)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-14T18:28:19.173

*正如子文档*部分[的文档](http://docs.mongodb.org/v2.2/core/read-operations/#subdocuments)中所建议的，这两种查询机制以不同的方式工作：

 *当字段包含嵌入文档（即*subdocument*）时，您可以将整个*子文档*指定为字段的值，或者使用点表示法“进入”*子文档，以指定**子文档*中各个字段的值：

如果子文档与指定的子文档（包括字段顺序）完全匹配，则子文档内的相等匹配选择文档。

* * *

在以下示例中，查询匹配字段 producer 的值为子文档的所有文档，该子文档仅包含`company`具有 value 的字段和具有 value的`'ABC123'`字段，按确切顺序：`address``'123 Street'`

```
db.inventory.find( {
    producer: {
        company: 'ABC123',
        address: '123 Street'
    }
}); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2019-05-05T07:48:35.813

**由于查询 MongoDB 集合与子文档**有很多混淆，我认为值得用示例来解释上述答案：

首先，我在集合中只插入了两个对象，即`message`：

```
> db.messages.find().pretty()
{
    "_id" : ObjectId("5cce8e417d2e7b3fe9c93c32"),
    "headers" : {
        "From" : "reservations@marriott.com"
    }
}
{
    "_id" : ObjectId("5cce8eb97d2e7b3fe9c93c33"),
    "headers" : {
        "From" : "reservations@marriott.com",
        "To" : "kprasad.iitd@gmail.com"
    }
}
> 
```

> 那么查询的结果是什么：`db.messages.find({headers: {From: "reservations@marriott.com"} }).count()`

它应该是**一个**，因为这些对`headers`等于 object的文档的查询`{From: "reservations@marriott.com"}`，仅 ie 不包含其他字段，或者我们应该将整个子文档指定为字段的值。

所以根据@Edmondo1984的回答

> > **如果子文档与指定的子文档（包括字段 order ）完全**匹配，则子文档内的相等匹配选择文档。

从上面的语句，下面的查询结果应该是什么？

```
> db.messages.find({headers: {To: "kprasad.iitd@gmail.com", From: "reservations@marriott.com"}  }).count()
0 
```

如果我们改变和的顺序，`From`即`To`与第二个文档的子文档相同怎么办？

```
> db.messages.find({headers: {From: "reservations@marriott.com", To: "kprasad.iitd@gmail.com"}  }).count()
1 
```

> 因此，它与**指定的子文档完全匹配，包括字段 order**。

对于使用点运算符，我认为每个人都非常清楚。让我们看看以下查询的结果：

```
> db.messages.find( { 'headers.From': "reservations@marriott.com" }  ).count()
2 
```

我希望以上示例的这些解释将使人们更清楚地**了解 find query with sub-documents**。*

# ruby-on-rails - Rails 路由路径

> ID：16002663
> 
> 赞同：1
> 
> 时间：2013-04-14T18:22:06.950
> 
> 标签：ruby-on-rails, ruby, routing

我有一个名为`views/admin/slinky_files/new.html.erb`我正在尝试使用以下链接打开的视图：

```
<%= link_to 'Add New Slinky', new_slinky_file_path %> 
```

当我单击链接时，这给了我一个错误：

```
Routing Error
uninitialized constant SlinkyFilesController 
```

当然，这是因为它应该是`Admin::SlinkyFilesController`

我该如何解决？我不知何故需要路由`new_slinky_file_path`到而不是像`admin_new_slinky_file_path`我想的那样？

`rake routes | grep slinky`输出：

```
 slinkys GET    /slinkys(.:format)                            slinkys#index
                      POST   /slinkys(.:format)                            slinkys#create
           new_slinky GET    /slinkys/new(.:format)                        slinkys#new
          edit_slinky GET    /slinkys/:id/edit(.:format)                   slinkys#edit
               slinky GET    /slinkys/:id(.:format)                        slinkys#show
                      PUT    /slinkys/:id(.:format)                        slinkys#update
                      DELETE /slinkys/:id(.:format)                        slinkys#destroy
         slinky_files GET    /slinky_files(.:format)                       slinky_files#index
                      POST   /slinky_files(.:format)                       slinky_files#create
      new_slinky_file GET    /slinky_files/new(.:format)                   slinky_files#new
     edit_slinky_file GET    /slinky_files/:id/edit(.:format)              slinky_files#edit
          slinky_file GET    /slinky_files/:id(.:format)                   slinky_files#show
                      PUT    /slinky_files/:id(.:format)                   slinky_files#update
                      DELETE /slinky_files/:id(.:format)                   slinky_files#destroy
        admin_slinkys GET    /admin/slinkys(.:format)                      admin/slinkys#index
                      POST   /admin/slinkys(.:format)                      admin/slinkys#create
     new_admin_slinky GET    /admin/slinkys/new(.:format)                  admin/slinkys#new
    edit_admin_slinky GET    /admin/slinkys/:id/edit(.:format)             admin/slinkys#edit
         admin_slinky GET    /admin/slinkys/:id(.:format)                  admin/slinkys#show
                      PUT    /admin/slinkys/:id(.:format)                  admin/slinkys#update
                      DELETE /admin/slinkys/:id(.:format)                  admin/slinkys#destroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:26:17.187

模板：

```
<%= link_to 'Add New Slinky', new_admin_slinky_file_url %> 
```

控制器：

```
class Admin::SlinkyFilesController < ApplicationController
  def new
    @slinky_file = SlinkyFile.new
  end
end 
```

路线.rb：

```
scope "admin" do
  resources :silky_files
end 
```

# javascript - 停止 javascript，直到服务的所有响应到达

> ID：16002666
> 
> 赞同：0
> 
> 时间：2013-04-14T18:22:19.810
> 
> 标签：javascript, google-api

我在我的 javascript 中多次调用谷歌服务。

在得到所有响应之前，我想停止执行进一步的 javascript。

```
<script type="text/javascript">
    var schools =
    [
        'Abelsvej 98, 4100, Ringsted',
        'Almstoftevej 71, 4100, Ringsted',
        'Balstrupvej 35, 4100, Ringsted',
        'Ejlstrupvej 101, 4100, Ringsted',
        'Ejlstrupvej 101 C 101, 4100, Ringsted',
        'Ejlstrupvej 90 90, 4100, Ringsted',
        'Haraldsvej 7 7, 4100, Ringsted',
        'Løngangen 43 65, 4100, Ringsted',
        'Vetterslev Bygade 21 21, 4100, Ringsted',
        'Østergade 25, Høm 25, 4100, Ringsted',
        'Østergade 3, høm 3, 4100, Ringsted'
    ];

for (var r = 0; r < schools.length; r++) {

                (function (r) {
                    var address = schools[r][1];
                    var geocoder = new google.maps.Geocoder();
                    setTimeout(function () {
                        geocoder.geocode({ 'address': address }, function (results, status) {
                            if (status == google.maps.GeocoderStatus.OK) {
                                var location = results[0].geometry.location;
                                schoolsArray[r] = location.lat() + ', ' + location.lng();
                            }
                        });
                    }
                    , 1000 * (r + 1));
                }(r));

// other javascript stuff

</script> 
```

我希望在所有响应都到达之前，javascript 不应该走得更远。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:28:03.487

您在这里遇到的是异步请求和同步 JavaScript 方法之间的区别。

对 Google 的请求可能需要任何时间，因此您会发现您的`geocode()`方法中有一个回调作为第二个参数。

最好的方法是记录你有多少响应，在回调方法中，你可以添加一个函数，当你有每个回复。

没有办法*阻止*所有 JavaScript 运行，您只能告诉一些代码在获得每个地理编码响应时运行。

我不确定为什么您`setTimeout()`的代码中也有 a 。

```
<script type="text/javascript">
    var schools =
    [
        'Abelsvej 98, 4100, Ringsted',
        'Almstoftevej 71, 4100, Ringsted',
        'Balstrupvej 35, 4100, Ringsted',
        'Ejlstrupvej 101, 4100, Ringsted',
        'Ejlstrupvej 101 C 101, 4100, Ringsted',
        'Ejlstrupvej 90 90, 4100, Ringsted',
        'Haraldsvej 7 7, 4100, Ringsted',
        'Løngangen 43 65, 4100, Ringsted',
        'Vetterslev Bygade 21 21, 4100, Ringsted',
        'Østergade 25, Høm 25, 4100, Ringsted',
        'Østergade 3, høm 3, 4100, Ringsted'
    ];

var count = 0;

for (var r = 0; r < schools.length; r++) {
    (function (r) {
        var address = schools[r][1];
        var geocoder = new google.maps.Geocoder();
        setTimeout(function () {
            geocoder.geocode({ 'address': address }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    var location = results[0].geometry.location;
                    schoolsArray[r] = location.lat() + ', ' + location.lng();
                    count++;
                    if(count == schools.length){
                        doMoreJS();
                    }
                }
            });
        }
        , 1000 * (r + 1));
    }(r));
}

function doMoreJS(){
    // Do more JS
}

</script> 
```

# c# - Datagridview插入数据不显示

> ID：16002667
> 
> 赞同：0
> 
> 时间：2013-04-14T18:22:24.497
> 
> 标签：c#, linq-to-entities, ado.net-entity-data-model

我只是学习 linq 并尝试使用 linq 和 ado.net 数据实体模型进行插入更新删除。现在我遇到了一些问题，当我插入一些数据时，datagridview 没有显示，我必须关闭程序并再次运行它以显示我正在输入的最新数据。这里的代码：

```
namespace TesDB
{
    public partial class Form1 : Form
    {
        private Database1Entities de = new Database1Entities();
        int index;

    public Form1()
    {
        InitializeComponent();

        var query = from x in de.MsEmployees
                    select x;

        dataGridView1.DataSource = query;
        dataGridView1.Refresh();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    public void loadtext()
    {
        textBox1.Text = dataGridView1.Rows[index].Cells[0].Value.ToString();
        textBox2.Text = dataGridView1.Rows[index].Cells[1].Value.ToString();
        textBox3.Text = dataGridView1.Rows[index].Cells[2].Value.ToString();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        string EmployeeID = dataGridView1.Rows[index].Cells[0].Value.ToString();

        var employee = (from x in de.MsEmployees
                        where x.EmployeeID == EmployeeID
                        select x).First();
        employee.EmployeeID  = textBox1.Text;
        employee.EmployeeName = textBox2.Text;
        employee.Salary = int.Parse(textBox3.Text);
        de.SaveChanges();
        Refresh();

    }

    private void button3_Click(object sender, EventArgs e)
    {
        string EmployeeID = dataGridView1.Rows[index].Cells[0].Value.ToString();
       // int id1 = int.Parse(EmployeeID);

        var Employee = (from x in de.MsEmployees
                        where x.EmployeeID == EmployeeID
                        select x).First();
        de.MsEmployees.DeleteObject(Employee);
        de.SaveChanges();
        Refresh();

    }

    private void button1_Click(object sender, EventArgs e)
    {
        string employeeID = dataGridView1.Rows[index].Cells[0].Value.ToString();

        var employee = (from x in de.MsEmployees
                        where x.EmployeeID == employeeID
                        select x.EmployeeID).First();

        MsEmployee me = new MsEmployee();
        me.EmployeeID = textBox1.Text;
        me.EmployeeName = textBox2.Text;
        me.Salary = int.Parse(textBox3.Text);
        de.AddToMsEmployees(me);
        de.SaveChanges();
       this.Refresh();
    }

    private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {

        index = e.RowIndex;
        loadtext();

    }

} 
```

}

`

我将`refresh()`这项工作用于更新和删除，但它不适用于插入，有人知道在我完成插入后如何刷新该表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:57:02.047

制作一个 refresh() 方法并将您的 Query 粘贴到里面并在按钮后面调用它

```
 public void refresh()
      {
           //Paste ur Query here and call it behind the button_click Event
      } 
```

# ruby-on-rails - Schema PostgreSQL on Rails 的磁盘大小

> ID：16002672
> 
> 赞同：0
> 
> 时间：2013-04-14T18:22:50.050
> 
> 标签：ruby-on-rails, postgresql, activerecord, ruby-on-rails-3.2

我有多租户应用程序轨道，并试图为每个帐户获取模式 posgresql 的大小磁盘。最初，我在视图中进行了尝试，大致如下：

```
<% for account in @accounts %>
<td>
    <%= number_to_human_size(@schemasize = (ActiveRecord::Base.connection.select_rows(%q{select sum(pg_total_relation_size(table_schema || '.' || table_name)) from information_schema.tables where table_schema in ('} +account.schema+ %q{') group by table_schema}).to_s.gsub(/\D/, '').to_f + account.size_logo.to_f), :locale=> 'en') %>
</td>
<% end %> 
```

浏览器输出

```
| schema  | usage  |
|_________|________|
| schema1 | 259 KB |
| schema2 | 294 KB | 
```

但**它没有插入数据库**（在公共模式上）。**现在，我希望它存储在数据库中。**

这是每个帐户的模式处理大小磁盘的控制器：

```
@accounts.each do |t|
     select_size = "select sum(pg_total_relation_size(table_schema || '.' || table_name)) from information_schema.tables where table_schema = " + t.schema.to_s + " group by table_schema"
     @a =  ActiveRecord::Base.connection.select_rows(select_size)  
     @b = @a.to_s.gsub(/\D/, '').to_f
     @c = t.size_logo.to_f
     @d = @b + @c
     @cek_schema = Usage.find_by_account_id(t.id)
     if @cek_schema.nil?
       Usage.create(:account_id => t.id, :size => @d)
     else
       @cek_schema.destroy
       Usage.create(:account_id => t.id, :size => @d)
     end
end 
```

我收到一个错误

```
ActiveRecord::StatementInvalid in AccountsController#kapasitas

PG::Error: ERROR:  column "schema1" does not exist
LINE 1: ... from information_schema.tables where table_schema = schema1
                                                                ^
: select sum(pg_total_relation_size(table_schema || '.' || table_name)) from information_schema.tables where table_schema = schema1 group by table_schema 
```

谁能告诉我是什么错误？

*   获取模式的大小磁盘并存储在数据库中

帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:10:58.657

感谢@DondiMichaelStroma

t.schema.to_s 没有被引用。Pg 认为这是一个表名。

**解决方案：**在 t.schema.to_s 周围加上单引号

```
select_size = "select sum(pg_total_relation_size(table_schema || '.' || table_name)) from information_schema.tables where table_schema = '" + t.schema.to_s + "' group by table_schema" 
```

# c# - 如何获取调用表达式的参数？

> ID：16002673
> 
> 赞同：2
> 
> 时间：2013-04-14T18:22:50.670
> 
> 标签：c#, expression

给定以下代码：

```
public static MvcHtmlString InlineEditable<T,TP>(this HtmlHelper helper, Expression<Func<T,TP>> fieldSelector)
{
    var compiledFieldSelector = fieldSelector.Compile();
    T argument = ????;
    TP value = compiledFieldSelector(argument);
    return new MvcHtmlString(GetInlineEditableMarkupInternal(helper, fieldSelector) + value);
} 
```

我如何获得参数的值？

我试过查看 Expression.Parameters 集合，其中有一些东西，但我似乎无法找到我传入的实际 T？

我这样称呼

```
@Html.InlineEditable(x=>x.Property) 
```

在 Razor 视图中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:42:38.857

尝试这个

```
 public static MvcHtmlString InlineEditable<T,TP>(this HtmlHelper<T> helper, Expression<Func<T,TP>> fieldSelector)
 {
     var compiledFieldSelector = fieldSelector.Compile();
     var arg = helper.ViewData.Model;
     var value = compiledFieldSelector(arg);
     ....
 } 
```

# javascript - 在解析之前更改 Meteor.Collection

> ID：16002676
> 
> 赞同：1
> 
> 时间：2013-04-14T18:23:02.733
> 
> 标签：javascript, html, mongodb, collections, meteor

我有以下问题：我正在从我的 Mongo 数据库中检索 Meteor Collection。此集合应通过内置的 handlebar.js 解析为 HTML。在此之前，我想要么更改集合中的值而不将其保存到数据库，要么将新值添加到集合而不保存它。

这是因为插入的数据取决于在运行时完成的计算。

我尝试了以下内容：

```
var topics = Topic.find({}, {sort: {votes: -1}});
var totalUsers = Meteor.users.find({}).count();
topics.forEach(function(topic){
  var numberOfGoodVotes = topic.votes.goodVotes.length;
  var numberOfBadVotes = topic.votes.badVotes.length;
  topic.pctGood = (numberOfGoodVotes*(100/totalUsers));
  topic.pctBad = (numberOfBadVotes*(100/totalUsers));
  topic.pctRest = 100 - topic.pctGood - topic.pctBad;
}); 
```

不幸的是 pctGood/Bad/Rest 都是 0，这是不可能的。在这种情况下，pctGood/Bad/Rest 是我的 Collection 中的存储，并且值为 0。这就是为什么我假设它在计算后不会更改。

我的 HTML 如下所示：

```
<div style="width: {{pctGood}}%;">{{pctGood}}%</div>
<div style="width: {{pctRest}}%;">{{pctRest}}%</div>
<div style="width: {{pctBad}}%;">{{pctBad}}%</div> 
```

希望任何人都可以提供帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:12:55.150

Found a working solution. Just add a function to the transform option.

```
var topics = Topic.find({}, {sort: {votes: -1}, transform: YOURFUNCTIONGOESHERE});

var YOURFUNCTIONGOESHERE = function(topic){
  var totalUsers = Meteor.users.find({}).count();
  var numberOfGoodVotes = topic.votes.goodVotes.length;
  var numberOfBadVotes = topic.votes.badVotes.length;
  topic.pctGood = (numberOfGoodVotes*(100/totalUsers));
  topic.pctBad = (numberOfBadVotes*(100/totalUsers));
  topic.pctRest = 100 - topic.pctGood - topic.pctBad;
  return topic;
} 
```

# javascript - 谷歌扩展的问题

> ID：16002678
> 
> 赞同：0
> 
> 时间：2013-04-14T18:23:17.717
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在制作一个非常简单的扩展程序，当您单击它时，它应该会打开一个新选项卡，并将用户发送到 www.simplewebstats.com，如下所示：

```
http://simplewebstats.com/process.php?domain="Domain the user is browsing" 
```

因此，如果他正在浏览 google.com，他应该被发送为

```
http://simplewebstats.com/process.php?domain=google.com 
```

这是我所拥有的

清单.json

```
{
   "background_page": "background.html",
   "browser_action": {
   "default_icon": "icon.png"
   },
   "description": "A free SEO tool for webmasters to track and display web data from most websites. ",
   "name": "SimpleWebStats Site Report",
   "permissions": [ "tabs", "http://www.simplewebstats.com/" ],
   "version": "1.2",
   "manifest_version": 2
} 
```

背景.html

```
<script src="js.js"></script> 
```

js.js

```
chrome.browserAction.onClicked.addListener(function(tab){
    chrome.tabs.getSelected(null,function(tab){
        chrome.tabs.create({url:"http://www.simplewebstats.com/process.php?ref=plugins&    processType=add&domain="+tab.url.match(/:\/\/(.[^/]+)/)[1]});
    });
}); 
```

点击没有任何反应，问题出在哪里？我似乎找不到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:42:45.600

你可以用一个书签来做到这一点。

```
javascript: (function() {
    var current_domain = window.location.href.replace(/^http\:\/\//,'');
    window.location.href = "http://www.simplewebstats.com/process.php?ref=plugins&processType=add&domain=" + current_domain;
})(); 
```

# c++ - 将二维数组写入/读取到二进制文件 C++

> ID：16002680
> 
> 赞同：4
> 
> 时间：2013-04-14T18:23:30.847
> 
> 标签：c++, multidimensional-array, binaryfiles, binary-data

我正在尝试将二维数组中的数据写入二进制文件。我只写入值大于0的数据。因此，如果数据为0，则不会写入文件。数据如下：

```
Level       0   1   2   3   4   5

Row 0       4   3   1   0   2   4
Row 1       0   2   4   5   0   0 
Row 2       3   2   1   5   2   0
Row 3       1   3   0   1   2   0

void { 

    // This is what i have for writing to file.

    ofstream outBinFile; 
    ifstream inBinFile; 
    int row; 
    int column; 

    outBinFile.open("BINFILE.BIN", ios::out | ios::binary);

    for (row = 0; row < MAX_ROW; row++){

        for (column = 0; column < MAX_LEVEL; column++){

          if (Array[row][column] != 0){

             outBinFile.write (reinterpret_cast<char*> (&Array[row][column]), sizeof(int)
          }
        }
    } 

    outBinFile.close(); 

    // Reading to file. 

    inBinFile.open("BINFILE.BIN", ios::in | ios::binary);

    for (row = 0; row < MAX_ROW; row++){

        for (column = 0; column < MAX_LEVEL; column++){

          if (Array[row][column] != 0){

             inBinFile.read (reinterpret_cast<char*> (&Array[row][column]), sizeof(int)
          }
        }
    } 

    inBinFile.close();  
} 
```

正在读取的所有数据都被插入到第一行，当我退出程序时如何让数据加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:33:52.507

您仅在数据不等于零时读取，这意味着它被第一个零锁定。一旦达到零，它就会停止读取。

在“if 命令”之前将文件读取到其他变量，然后在 if (variable != 0) Array[row][column] = variable.

如果你的数组是用数据初始化的，也许看看你的阅读设置位置。所以要设置好我有零，接下来我应该从另一个位置读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-16T20:39:22.710

二进制文件采用简单的内存转储。我在 Mac 上，所以我必须找到一种方法来计算数组的大小，因为 sizeof(array name) 由于某种原因（macintosh、netbeans IDE、xCode 编译器）不返回数组的内存大小。我不得不使用的解决方法是：编写文件：

```
fstream fil;
fil.open("filename.xxx", ios::out | ios::binary);
fil.write(reinterpret_cast<char *>(&name), (rows*COLS)*sizeof(int));
fil.close();
//note: since using a 2D array &name can be replaced with just the array name
//this will write the entire array to the file at once 
```

读书也是一样。由于我使用的 Gaddis 书中的示例在 Macintosh 上无法正常工作，因此我必须找到一种不同的方法来完成此操作。不得不使用以下代码片段

```
fstream fil;
fil.open("filename.xxx", ios::in | ios::binary);
fil.read(reinterpret_cast<char *>(&name), (rows*COLS)*sizeof(int));
fil.close();
//note: since using a 2D array &name can be replaced with just the array name
//this will write the entire array to the file at once 
```

除了获取整个数组的大小之外，您还需要通过将二维数组的行*列相乘然后将其乘以数据类型的大小来计算整个数组的大小（因为我使用整数数组，所以它是 int这个案例）。

# ruby-on-rails - New Relic 导致未初始化的常量 Mongoid::Collection (NameError)

> ID：16002682
> 
> 赞同：3
> 
> 时间：2013-04-14T18:23:32.823
> 
> 标签：ruby-on-rails, mongoid, newrelic

将我的 Heroku 应用程序移至 Unicorn 后，New Relic 停止显示除部署之外的任何报告。我尝试了这里建议的解决方案：[https](https://newrelic.com/docs/ruby/no-data-with-unicorn) ://newrelic.com/docs/ruby/no-data-with-unicorn没有运气。我尝试更新所有宝石，现在我收到错误：

> `block (2 levels) in <top (required)>': uninitialized constant Mongoid::Collection (NameError) from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/newrelic_rpm-3.6.0.83/vendor/gems/dependency_detection-0.0.1.build/lib/dependency_detection.rb:53:in`从 /Users/bashar/退出 /Users/bashar/.rvm/gems/ruby-1.9.3-preview1@global/gems/rpm_contrib-2.1.11/lib/rpm_contrib/instrumentation/mongoid.rb:13:in call' .rvm/gems/ruby-1.9.3-preview1/gems/newrelic_rpm-3.6.0.83/vendor/gems/dependency_detection-0.0.1.build/lib/dependency_detection.rb:53:in `block in execute' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/newrelic_rpm-3.6.0.83/vendor/gems/dependency_detection-0.0.1.build/lib/dependency_detection.rb:52:in`each' 来自 /Users/bashar/ .rvm/gems/ruby-1.9.3-preview1/gems/newrelic_rpm-3.6.0.83/vendor/gems/dependency_detection-0.0.1.build/lib/dependency_detection.rb:52:in `execute' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/newrelic_rpm-3.6.0.83/vendor/gems/dependency_detection-0.0.1.build/lib/dependency_detection.rb:19:in`block in detect!' 来自 /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/newrelic_rpm-3.6.0.83/vendor/gems/dependency_detection-0.0.1.build/lib/dependency_detection.rb:17:in`each' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/newrelic_rpm-3.6.0.83/vendor/gems/dependency_detection-0.0.1.build/lib/dependency_detection.rb:17:in`探测！' 来自 /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/newrelic_rpm-3.6.0.83/lib/new_relic/control/instrumentation.rb:93:in `_install_instrumentation' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/newrelic_rpm-3.6.0.83/lib/new_relic/control/instrumentation.rb:52:in`install_instrumentation' 来自 /Users/bashar/.rvm /gems/ruby-1.9.3-preview1/gems/newrelic_rpm-3.6.0.83/lib/new_relic/control/instance_methods.rb:76:in`init_plugin' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/newrelic_rpm-3.6.0.83/lib/newrelic_rpm.rb:40:in`块来自 /Users/bashar/.rvm/gems/ruby-1.9。 3-preview1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in`run' 来自 /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/railties-3.2。 11/lib/rails/initializable.rb:55:in `block in run_initializers' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in`each'来自/Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/railties-3.2.11/lib/rails/initializable.rb： 54：在`run_initializers' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/railties-3.2.11/lib/rails/application.rb:136:in`初始化！' 来自 /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing' from /Users/bashar/rails-projects/myapp/config/environment.rb:5:in`'来自 /Users/bashar/rails-projects /myapp/config.ru:7:in `block in <main>' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/rack-1.4.1/lib/rack/builder.rb:51:in`instance_eval' 来自 /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/rack-1.4.1/lib/rack/builder.rb:51:in`initialize' from /Users/bashar/rails-projects/myapp/config.ru:1:in`新的'来自 /Users/bashar/rails-projects/myapp/config.ru:1:in `<main>' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/rack-1.4.1/lib/rack/builder.rb:40:in`eval' 来自 /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/rack-1.4.1/ lib/rack/builder.rb:40:in `parse_file' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/rack-1.4.1/lib/rack/server.rb:200:in`app' 来自 /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/railties-3.2.11/lib/rails/commands/server.rb： 46:in `app' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/rack-1.4.1/lib/rack/server.rb:301:in`Wrapped_app' 来自 /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/rack-1.4.1/lib/rack/server.rb:252:in`start' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/railties-3.2.11/lib/rails/commands/server.rb:70:in`从 /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/railties-3.2.11/lib/rails/commands.rb:55:in `block in <top (required)>' from /Users/bashar/.rvm/gems/ruby-1.9.3-preview1/gems/railties-3.2.11/lib/rails/commands.rb:50:in`tap' 从 /Users/bashar/.rvm 开始/gems/ruby-1.9.3-preview1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>' from script/rails:6:in`require' from script/rails:6:in `'

我有以下宝石：

```
gem 'rpm_contrib'
gem 'newrelic_rpm'
gem 'newrelic_moped' 
```

我过去升级到 Mongoid 3 时也遇到过类似的问题，但当时的解决方案是 newrelic_moped。这次好像不是。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T22:08:51.247

我有同样的。将以下代码添加到`config/initializers/newrelic.rb`：

```
# Ensure the agent is started using Unicorn.
# This is needed when using Unicorn and preload_app is not set to true.
# See https://newrelic.com/docs/ruby/no-data-with-unicorn
if defined? Unicorn
  ::NewRelic::Agent.manual_start()
  ::NewRelic::Agent.after_fork(:force_reconnect => true)
end 
```

# tsql - 如何更简单快捷地设置层次表中项目的“顺序”？

> ID：16002687
> 
> 赞同：0
> 
> 时间：2013-04-14T18:23:56.350
> 
> 标签：tsql, common-table-expression

参考这篇[文章](https://stackoverflow.com/questions/16000618/how-to-set-the-order-of-items-in-a-hierarchy-table/16001317#16001317)，这里是整体问题和代码：

```
declare @tbl table (MenuItemID uniqueidentifier, PID uniqueidentifier, MenuID uniqueidentifier, SO tinyint, lvl tinyint)
;WITH 
cte (MenuItemID, PID, MenuID, SO, lvl) AS 
(
    select MenuItemID, PID, MenuID, SO, 0 from MenuItems
        where del = 0 and Perms = 1 and MenuID = @MenuID and MenuID = PID
    UNION ALL
    SELECT MenuItems.MenuItemID, MenuItems.PID, MenuItems.MenuID, MenuItems.SO, cte.lvl + 1 FROM MenuItems 
        JOIN cte ON cte.MenuItemID = MenuItems.PID
    ) 
    select * from cte
        ORDER BY lvl, SO
insert into @tbl select * from cte

declare @tbl2 table (MenuItemID uniqueidentifier, PID uniqueidentifier, MenuID uniqueidentifier, SO tinyint, lvl tinyint)
;with hier (MenuItemID, PID, MenuID, SO, lvl, FullSO) as
(select l0.*, convert(varchar(max),right('000'+convert(varchar(3),SO),3)) FullSO 
 from @tbl l0 where lvl=0
 union all
 select ln.*, lp.FullSO+','+right('000'+convert(varchar(3),ln.SO),3) FullSO
 from @tbl ln
 join hier lp on ln.PID = lp.MenuItemID)

insert into @tbl2 
 select MenuItemID, 
       PID, 
       MenuID,
       rank() over (partition by PID order by SO) SO,
       lvl
from hier
order by FullSO, SO

 update MenuItems set SO = h.SO
    from MenuItems as mi
    join @tbl2 h on mi.MenuItemID = h.MenuItemID and mi.MenuID = h.MenuID 
```

我想知道这段代码是否有更简单和更短的方法？

提前致谢，

卡多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:51:04.357

您仍然需要递归 CTE 来确定层次结构的哪些顶级记录具有 del = 0 和 Perms = 1，但以下应该更简单：

```
WITH cte AS 
(select MenuItemID, PID, MenuID, SO, 
        rank() over (partition by PID order by SO) newSO
 from MenuItems
 where del = 0 and Perms = 1 and MenuID = @MenuID and MenuID = PID
 UNION ALL
 SELECT m.MenuItemID, m.PID, m.MenuID, m.SO, 
        rank() over (partition by m.PID order by m.SO) newSO
 FROM MenuItems m
 JOIN cte c ON c.MenuItemID = m.PID
) 
update MenuItems set SO = h.newSO
from MenuItems as mi
join cte h on mi.MenuItemID = h.MenuItemID and mi.MenuID = h.MenuID; 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!3/a38c9/10)。

# java - 在java中插入字符串

> ID：16002688
> 
> 赞同：0
> 
> 时间：2013-04-14T18:24:02.020
> 
> 标签：java, interpolation

假设我有一个名为 perm1、perm2、perm3、...、perm10 的 char 变量列表。

我对所有十个 char 变量执行相同的功能，并且宁愿使用类似的东西将它们通过循环

```
for (int i = 0; i < 11; i ++){
    doSomething(perm$i);
} 
```

这个想法的正确语法是什么，类似于 Perl 中的插值？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:31:41.410

如果需要将变量插入字符串，请使用[String 的 format 方法](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)

```
String[] perms = {"1", "2", "3", "4", "5", "6", "7", "8", "9", "10" };  
String result = String.format("perm1=%s perm2=%s ... perm10=%s;", (Object[])perms ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:57:40.073

将它们塞入一个数组并循环遍历该数组。

# php - 获取选定列的正则表达式

> ID：16002690
> 
> 赞同：5
> 
> 时间：2013-04-14T18:24:33.883
> 
> 标签：php, mysql, regex

我必须从 MYSQL 中提取列名`SELECT`，我希望使用正则表达式来做到这一点。
这是一个普通的`SELECT`，类似于：
`SELECT column1, column2 ... FROM table`

我必须涵盖所有情况，我们没有别名，前面有或没有表格，有或没有引用字符：

```
SELECT column, column as foo, table.column, table.column as foo, 
       `column`, `column` as foo, `table`.`column`, `table`.`column` as foo
       ..... 
```

目前我已经能够解决这个正则表达式：`#\w+(\sas)?#i`但它与前缀列相比不好。
有什么帮助吗？

顺便说一句，Regex 擅长这项任务吗？

**编辑**
感谢您的回答！
您发布的模式对整个查询有效，实际上我已经在处理每一列：

```
$fields = Frameworkmethod::getSelectFields($query);
$columns = explode(',' , $fields);
foreach($columns as $column)
{
     //do Regex work to "clean up" the single field and get the "standard" one (not the alias)
     //`#__tracktime_projects`.`pr_name` AS `project_name` should return pr_name
} 
```

如上面的评论所述，我总是需要字段名称，而不是别名。很抱歉之前没有指出！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T19:40:43.643

我[在单个正则表达式中使用了折叠和捕获重复模式](https://stackoverflow.com/q/15268504/731947)并对其进行了调整以适应此目的。

因此，一个有希望从***SQL**查询中捕获列名的*防弹正则表达式：*

 **```
/(?:SELECT\s++(?=(?:[#\w,`.]++\s++)+)|(?!^)\G\s*+,\s*+(?:`?+\s*+[#\w]++\s*+`?+\s*+\.\s*+)?+`?+\s*+)(\w++)`?+(?:\s++as\s++[^,\s]++)?+/ig 
```

解释在线演示：[http ://regex101.com/r/wL7yA9](http://regex101.com/r/wL7yA9)

使用带有单个 RegEx 的 preg_match_all() 的 PHP 代码，用`/x`修饰符注释：

```
preg_match_all('/(?:SELECT\s++(?=(?:[\#\w,`.]++\s++)+) # start matching on SELECT
                |              # or
                (?!^)\G        # resume from last match position 
                \s*+,\s*+      # delimited by a comma 
                (?:`?+\s*+     # optional prefix table with optional backtick
                    [\#\w]++   # table name
                    \s*+`?+    # optional backtick
                    \s*+\.\s*+ # dot separator
                )?+ # optional prefix table end group

                `?+\s*+ # optional backtick

            ) # initial match or subsequent match

            (\w++)    # capturing group
            `?+         # optional backtick

            (?:\s++as\s++[^,\s]++)?+ # optional alias

            /ix', $query, $matches); 
```

实时代码：[http ://codepad.viper-7.com/VTaPd3](http://codepad.viper-7.com/VTaPd3)

*注意：“希望是防弹的”针对有效的 SQL*

* * *

使用explode()的PHP代码

```
$columns = explode(',', $fields);

foreach($columns as $column)
{
    $regex='/([\w]++)`?+(?:\s++as\s++[^,\s]++)?+\s*+(?:FROM\s*+|$)/i';

    preg_match($regex, $column, $match);

    print $match[1]; // field stored in $match[1]
} 
```

带有示例提取的实时代码：http: [//codepad.viper-7.com/OdUGXd](http://codepad.viper-7.com/OdUGXd)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T19:08:18.407

我使用了 PHP：

```
$query = 'SELECT column1, column2 as foo, table.column3, table.column4 as foo, 
       `column5`, `column6` as foo, `table`.`column7`, `table`.`column8` as foo
       FROM table';

$query = preg_replace('/^SELECT(.*?)FROM.*$/s', '$1', $query); // To remove the "SELECT" and "FROM table..." parts

preg_match_all('/(?:
    (?:`?\w+`?\.)? (?:`)?(\w+)(?:`)? (?:\s*as\s*\w+)?\s*
#   ^--TableName-^ ^---ColumnName--^ ^----AsFoo-----^
)+/x',$query, $m);

print_r($m[1]); 
```

输出：

```
Array
(
    [0] => column1
    [1] => column2
    [2] => column3
    [3] => column4
    [4] => column5
    [5] => column6
    [6] => column7
    [7] => column8
) 
```

现场演示：[http ://www.rubular.com/r/H960NFKCTr](http://www.rubular.com/r/H960NFKCTr)

* * *

**更新：**由于您使用了一些“不寻常”但有效的 SQL 表名（例如`#__tracktime_projects`：），因此它弄乱了正则表达式。所以为了解决这个问题，我添加了一个包含我们期望的字符的变量，我还添加了`i`修饰符以使匹配无大小写：

```
$query = 'SELECT column1, column2 as foo, table.column3, table.column4 as foo, 
       `column5`, `column6` as foo, `table`.`column7`, `table`.`column8` as foo, `#__tracktime_projects`.`pr_name` AS project_name, `#wut`
       FROM table';

$query = preg_replace('/^SELECT(.*?)FROM.*$/s', '$1', $query); // To remove the "SELECT" and "FROM table..." parts

$allowed = '\w#'; // Adjust this to the names that you expect.

preg_match_all('/(?:
    (?:`?['.$allowed.']++`?\.)?
#   ^--------TableName--------^

    (?:`)?(['.$allowed.']++)(?:`)?
#   ^----------ColumnName--------^

    (?:\s*as\s*['.$allowed.']++)?\s*
#   ^-------------AsFoo------------^
)+
/xi',$query, $m);

print_r($m[1]); 
```

输出：

```
Array
(
    [0] => column1
    [1] => column2
    [2] => column3
    [3] => column4
    [4] => column5
    [5] => column6
    [6] => column7
    [7] => column8
    [8] => pr_name
    [9] => #wut
) 
```

现场演示：[http ://www.rubular.com/r/D0iIHJQwB8](http://www.rubular.com/r/D0iIHJQwB8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T19:46:52.703

这是一个老问题，但我遇到了同样的问题，使用@CSᵠ regex 无法解决。我创建了另一个正则表达式来在更广泛的列上执行任务，包括计算字段

```
preg_match_all('/(?<=^SELECT |, |\) )([a-z]+\.)?([a-z]+ )?(as )?([a-z]+)(?= ?,|$)/im'); 
```

如果将用于复杂查询，我建议使用我创建的完整函数：[https ://gist.github.com/pedrosancao/2498ed85b3c1834c5bdd](https://gist.github.com/pedrosancao/2498ed85b3c1834c5bdd)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T19:44:13.790

这是通用解决方案：

```
((select|,)\s+((((`)?\w+\6?\.)?(`)?\w+\7?)(\s+as\s+(`)?\w+\9?)?\s*))+from\s 
```

组 $3 包含具有可能的表和别名装饰的列。

您可以将非捕获组 - (?...) 用于表达式的某些部分。在这种情况下，更改反向引用编号。

用单行运行它并忽略大小写标志。例如，也许您应该将标识符规范 \w+ 更改为更具体的 [a-zA-Z]\w* 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T19:36:30.007

如果使用 PHP（我相信其他语言也支持），你可以考虑[`getcolumnmeta`](http://www.php.net/manual/en/pdostatement.getcolumnmeta.php). 从文档：

```
<?php
  $select = $DB->query('SELECT COUNT(*) FROM fruit');
  $meta = $select->getColumnMeta(0);
  var_dump($meta);
?> 
```

结果：

```
array(6) {
  ["native_type"]=>
   string(7) "integer"
  ["flags"]=>
   array(0) {
  }
  ["name"]=>
   string(8) "COUNT(*)"
  ["len"]=>
    int(-1)
  ["precision"]=>
    int(0)
  ["pdo_type"]=>
    int(2)
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-06T20:04:10.867

我参加聚会迟到了，但其中大多数对我来说太复杂了，而且是特定于 PHP 的，我想这就是你所追求的，但很多人可能不是。我使用的 PCRE 风格的正则表达式是：

```
([\w`]+)(?=\s*,|\s+from\s+) 
```

这匹配紧跟逗号（或空格和逗号）或空格和关键字'from'的字母数字和反引号（[\w`]+）字符。

后者是使用积极的前瞻来完成的

```
(?=<expression>) 
```

在这种情况下

```
(?=\s*,|\s+from\s+) 
```

它检查前面的标记 [\w`]+ 后面是

```
\s*,       # whitespace (0 or more) and comma 
```

或 (|)

```
\s+from\s+ # the keyword 'from', surrounded by >=1 whitespace characters 
```

然后，您可以使用任何语言风格的 case 标志来忽略大小写。

编辑：还应该注意这匹配别名而不是原始列名。**

# c++ - 修剪字符数组 C++

> ID：16002697
> 
> 赞同：0
> 
> 时间：2013-04-14T18:25:19.903
> 
> 标签：c++, trim

如何修剪 char 数组？

我正在从文本文件中读取这个数组，当它匹配某个字符串时，我会处理它。但它永远不会匹配。我假设因为它包含一些尾随和前导空格或\和'\ n'

我不知道如何修剪 char 数组，但我用它来删除空格。这有一个问题，当`token[0] = {0 0 0 0}`它使它成为 {0000} 时。所以我不知道下一步该怎么做。。

```
char a[50] = {0};
int j = 0;

    //Removing spaces or garbage values in token[0] for perfect string match
    for(int i=0; (unsigned)i<strlen(token[0]) ; ++i )
    {
      if( (isalnum(token[0][i])) || token[0][i] == 95)
      {
        a[j]=token[0][i];
        j++;
      }
      else
      {
        continue;
      }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:37:57.313

鉴于您没有提及其他任何内容，因此始终可以执行以下操作：

将数组（要检查）按字符复制到另一个数组，仅需要所需的字符数...（这样您还可以检查需要修剪的字符数）：

```
a=0;

while(array1[a] != '\0'){
    array2[a] = array1[a];
    a++;
}

array2[a] = '\0'; 
```

# c# - 如何根据数组元素检查来自控制台的用户输入值？C＃

> ID：16002702
> 
> 赞同：0
> 
> 时间：2013-04-14T18:25:39.403
> 
> 标签：c#, arrays, validation

我已使用文本文件读取单位转换并将它们存储在`array`.

我计划获取他们想要转换的每个测量的用户输入并将它们与`element`in进行比较，`array`以便我可以引用它们以输入有效输入。

我的数组中的数据使用以下方法拆分`(",")`

数组中的数据以这种格式组织。例如“盎司，克，28.0”

如何检查用户是否输入了有效输入？例如，他们将盎司放在不是另一种不兼容的测量值（如品脱）的地方。

这是我到目前为止所做的

```
 class Program
{
    static void Main(string[] args)
    {
        Program myProgram = new Program();//call for program to start 
        myProgram.RunProgram();

    }
    public string inputA;
    PUBLIC STRING InputB;
    public decimal inputC;
    string[] finalArray;

    public class Conversion
    {
        public string measurementA { set; get; }
        public string measurementB { set; get; }
        public decimal converFac { set; get; }

    }
    public void RunProgram()
    {
        Console.WriteLine("Welcome to to our Conversion Calculator");
        ReadFile();//read in text file
        GetInput();//get the user input
        //Validation();//validate it according to the data in the text file, redirect to getInput is not validated correctly
        //Display();//display the result accordingly if validated correctly
        //ReDo();//offer a restart or an exit to the program
    }

    public void ReadFile()
    {

        List<Conversion> Convert = new List<Conversion>();
        using (StreamReader sr = new StreamReader(@"U:\convert.txt"))
        {
            while (sr.Peek() >= 0)
            {
                string str;
                string[] srArray;
                str = sr.ReadLine();

                srArray = str.Split(',');
                Conversion currentConversion = new Conversion();
                currentConversion.measurementA = srArray[0];
                currentConversion.measurementB = srArray[1];
                currentConversion.converFac = decimal.Parse(srArray[2]);
                finalArray = (string[])srArray.Clone();

            }

        }
    }
    public void GetInput()
    {
        Console.Write("Please enter your first unit of Measurement.");
        inputA = Convert.ToString(Console.ReadLine());
        //what do I put her to make sure that it corresponds with one of the measurementA elements in the array?

    }

} 
```

任何帮助，将不胜感激。谢谢！编辑：撞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:44:42.387

要比较数组中的度量单位，请使用 Array.Find 方法，如下所示

```
static void Main()
{
   string[] array1 = { "kgs", "pounds"};
   string value1 = Array.Find(array1,element => element=="kgs");
   Console.WriteLine(value1);
   Console.ReadKey();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:31:18.260

利用`try` `catch`

您可以修改它以提供更好的输出错误，例如**：文件在行号不正确：**

```
public List<Conversion> ReadFile()
    {

        List<Conversion> Convert = new List<Conversion>();
        using (StreamReader sr = new StreamReader(@"U:\convert.txt"))
        {
            while (sr.Peek() >= 0)
            {
                string str;
                string[] srArray;
                str = sr.ReadLine();

                srArray = str.Split(',');
                Conversion currentConversion = new Conversion();
                currentConversion.measurementA = srArray[0];
                currentConversion.measurementB = srArray[1];
                try{
                currentConversion.converFac = decimal.Parse(srArray[2]);
                    }
                catch(Exception ex){
                Console.WriteLine("File is not in correct format");
                break;
                }
                Convert.Add(currentConversion);

            }

        }
   return Convert;
    } 
```

# c - 包装/评论评论

> ID：16002704
> 
> 赞同：0
> 
> 时间：2013-04-14T18:25:57.260
> 
> 标签：c, comments

我复制这个结构

```
typedef struct SDL_Surface {
Uint32 flags; /* Read-only */
SDL_PixelFormat *format; /* Read-only */
int w, h; /* Read-only */
Uint16 pitch; /* Read-only */
void *pixels; /* Read-write */
SDL_Rect clip_rect; /* Read-only */
8 int refcount; /* Read-mostly */
/* This structure also contains private fields not shown
here */} SDL_Surface; 
```

并尝试用 /* 和 */ 以及代码的开头和结尾注释（换行），但它不起作用。

```
/*
typedef struct SDL_Surface { //only commented out this line
Uint32 flags; /* Read-only */
SDL_PixelFormat *format; /* Read-only */ 
int w, h; /* Read-only */
Uint16 pitch; /* Read-only */
void *pixels; /* Read-write */
SDL_Rect clip_rect; /* Read-only */
8 int refcount; /* Read-mostly */
/* This structure also contains private fields not shown
here */} SDL_Surface;
*/ 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:29:55.167

采用

```
#if 0
blah
#endif 
```

像这样“注释掉”大块代码。它还具有可嵌套的优点。

（原因`/*`和`*/`不起作用是因为一旦在评论中，第*一个* `*/`将结束它，所以`/* blah /* explanation */ more */`会在之后结束`explanation`，*而不是* `more`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:31:04.577

嵌套注释不起作用，但您可以让预处理器跳过结构

```
#if 0

    typedef struct SDL_Surface {
    Uint32 flags; /* Read-only */
    SDL_PixelFormat *format; /* Read-only */
    int w, h; /* Read-only */
    Uint16 pitch; /* Read-only */
    void *pixels; /* Read-write */
    SDL_Rect clip_rect; /* Read-only */
    8 int refcount; /* Read-mostly */
    /* This structure also contains private fields not shown
    here */} SDL_Surface;

#endif 
```

# opencv - 如何在 SURF、SIFT 和 ORB 匹配结果上应用 RANSAC

> ID：16002709
> 
> 赞同：8
> 
> 时间：2013-04-14T18:26:34.983
> 
> 标签：opencv, feature-extraction, orb, ransac, feature-descriptor

我正在研究图像处理。我想匹配 2D 特征，我在 SURF、SIFT、ORB 上做了很多测试。
如何在 OpenCV 的 SURF/SIFT/ORB 上应用 RANSAC？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-15T00:09:28.437

OpenCV 具有`cv::findHomography`可以选择使用 RANSAC 来查找与两个图像相关的单应矩阵的功能。[您可以在此处](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html)查看此功能的示例。

具体来说，您感兴趣的代码部分是：

```
FlannBasedMatcher matcher;
std::vector< DMatch > matches;
matcher.match( descriptors_object, descriptors_scene, matches );

for( int i = 0; i < good_matches.size(); i++ )
{
    //-- Get the keypoints from the good matches
    obj.push_back( keypoints_object[ good_matches[i].queryIdx ].pt );
    scene.push_back( keypoints_scene[ good_matches[i].trainIdx ].pt );
}

Mat H = findHomography( obj, scene, CV_RANSAC ); 
```

然后，您可以使用该函数`cv::perspectiveTransform`根据单应矩阵扭曲图像。

`cv::findHomography`除此之外的其他选项`CV_RANSAC`是`0`使用每个点和`CV_LMEDS`使用最小中值方法。更多信息可在[此处](http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html)的 OpenCV 相机校准文档中找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-15T10:00:16.027

`ransac`这是在获得的 SIFT / SURF 关键点上使用`skimage`with`ProjectiveTransform`或`AffineTransform`（即 Homography）模型应用的 python 实现。该实现首先对获得的关键点进行 Lowe 比率测试，然后对来自 Lowe 比率测试的过滤关键点执行 ransac。

```
import cv2
from skimage.measure import ransac
from skimage.transform import ProjectiveTransform, AffineTransform
import numpy as np

def siftMatching(img1, img2):
    # Input : image1 and image2 in opencv format
    # Output : corresponding keypoints for source and target images
    # Output Format : Numpy matrix of shape: [No. of Correspondences X 2] 

    surf = cv2.xfeatures2d.SURF_create(100)
    # surf = cv2.xfeatures2d.SIFT_create()

    kp1, des1 = surf.detectAndCompute(img1, None)
    kp2, des2 = surf.detectAndCompute(img2, None)

    FLANN_INDEX_KDTREE = 0
    index_params = dict(algorithm = FLANN_INDEX_KDTREE, trees = 5)
    search_params = dict(checks = 50)
    flann = cv2.FlannBasedMatcher(index_params, search_params)
    matches = flann.knnMatch(des1,des2,k=2)

    # Lowe's Ratio test
    good = []
    for m, n in matches:
        if m.distance < 0.7*n.distance:
            good.append(m)

    src_pts = np.float32([ kp1[m.queryIdx].pt for m in good ]).reshape(-1, 2)
    dst_pts = np.float32([ kp2[m.trainIdx].pt for m in good ]).reshape(-1, 2)

    # Ransac
    model, inliers = ransac(
            (src_pts, dst_pts),
            AffineTransform, min_samples=4,
            residual_threshold=8, max_trials=10000
        )

    n_inliers = np.sum(inliers)

    inlier_keypoints_left = [cv2.KeyPoint(point[0], point[1], 1) for point in src_pts[inliers]]
    inlier_keypoints_right = [cv2.KeyPoint(point[0], point[1], 1) for point in dst_pts[inliers]]
    placeholder_matches = [cv2.DMatch(idx, idx, 1) for idx in range(n_inliers)]
    image3 = cv2.drawMatches(img1, inlier_keypoints_left, img2, inlier_keypoints_right, placeholder_matches, None)

    cv2.imshow('Matches', image3)
    cv2.waitKey(0)

    src_pts = np.float32([ inlier_keypoints_left[m.queryIdx].pt for m in placeholder_matches ]).reshape(-1, 2)
    dst_pts = np.float32([ inlier_keypoints_right[m.trainIdx].pt for m in placeholder_matches ]).reshape(-1, 2)

    return src_pts, dst_pts 
```

# java - JTree 节点未按预期添加

> ID：16002714
> 
> 赞同：0
> 
> 时间：2013-04-14T18:26:50.003
> 
> 标签：java, swing, jtree

我正在尝试解析下面的 XML 文件并基于它创建一个 JTree。

```
<OBJECTS>
    <WINDOW NAME = "WINDOW 01" URL = "URL 01">
        <PAGE NAME = "PAGE 01" URL = "PAGE URL 01">
        </PAGE>
    </WINDOW>
</OBJECTS> 
```

“WINDOW 01”被添加到根节点“对象列表”中，但“PAGE 01”节点未显示在“WINDOW 01”节点下。使用的源代码如下所示。请帮忙！！！

```
public class DataNode extends DefaultMutableTreeNode {    
    private static final long serialVersionUID = 1L;
    public String ObjectType, ObjectName, URL, ElementType;
    public DefaultMutableTreeNode node;

    public DataNode(DefaultMutableTreeNode node, Element element) {
        this.node = node;
        this.ObjectType = element.getTagName();
        this.ObjectName = element.getAttribute("NAME");
        this.URL = element.getAttribute("URL");
        this.ElementType = element.getAttribute("TYPE");
    }

    public DataNode(Element element) {
        this.node = new DefaultMutableTreeNode("OBJECT");
        this.ObjectType = element.getTagName();
        this.ObjectName = "Object List";
        this.URL = "";
        this.ElementType = "";
    }

    @Override
    public String toString() {
        return this.ObjectName;
    }
} 
```

这是主要课程。编译时不显示错误或警告。

```
public class MyOwn {
    private JFrame contentsFrame;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    MyOwn window = new MyOwn();
                    window.contentsFrame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public MyOwn() {
        contentsFrame = new JFrame();
        contentsFrame.setTitle("My JTree");
        contentsFrame.setBounds(100, 100, 549, 738);
        contentsFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JTree objectListTree = new JTree(convertXMLtoTree("G:/Collection.xml"));
        objectListTree.setAlignmentY(Component.TOP_ALIGNMENT);
        objectListTree.setAlignmentX(Component.LEFT_ALIGNMENT);

        contentsFrame.getContentPane().add(new JScrollPane(objectListTree));
    }

    private DefaultMutableTreeNode convertXMLtoTree(String Path) {
        NodeList nWindow, nPage;
        DefaultMutableTreeNode dRoot, dWindow, dPage;
        DataNode xRoot, xWindow, xPage;

        try {
            File fXmlFile = new File(Path);
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(fXmlFile);

            doc.getDocumentElement().normalize();
            xRoot = new DataNode(doc.getDocumentElement());
            dRoot = new DefaultMutableTreeNode(xRoot);
            nWindow = doc.getDocumentElement().getElementsByTagName("WINDOW");

            for (int i = 0; i < nWindow.getLength(); i++) {
                dWindow = new DefaultMutableTreeNode(((Element)(nWindow.item(i))).getAttribute("NAME"));
                xWindow = new DataNode(dWindow, (Element)(nWindow.item(i)));
                dRoot.add(xWindow);
                nPage = ((Element)(nWindow.item(i))).getElementsByTagName("PAGE");
                for (int j = 0; j < nPage.getLength(); j++) {
                    dPage = new DefaultMutableTreeNode(((Element)(nPage.item(j))).getAttribute("NAME"));
                    xPage = new DataNode(dPage, (Element)(nPage.item(j)));
                    dWindow.add(xPage);
                }
            }
            return dRoot;
        } catch (Exception e) {
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:47:18.747

将您的自定义`DefaultMutableTreeNode` *DataNode*添加到子节点，`WINDOW 01`而不是`dWindow`永远不会添加到`JTree`. 代替

```
dWindow.add(xPage); 
```

和

```
xWindow.add(xPage); 
```

# python - TypeError：异常必须是旧式类或派生自 BaseException，而不是 NoneType

> ID：16002718
> 
> 赞同：3
> 
> 时间：2013-04-14T18:27:26.783
> 
> 标签：python, inheritance, exception-handling, ipython

所以今天这让我困惑了太久。我把它扔给你们。

我正进入（状态

```
TypeError: exceptions must be old-style classes or derived from BaseException, not NoneType 
```

即使我只是`raise`单独使用或与`Exception()`

这是整个回溯，以防万一。我一头雾水……

```
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
/home/gus/py274/lib/python2.7/site-packages/IPython/utils/py3compat.pyc in execfile(fname, *where)
    176             else:
    177                 filename = fname
--> 178             __builtin__.execfile(filename, *where)

/home/gus/Dropbox/repos/git/blacktie/src/blacktie/scripts/blacktie_pipeline.py in <module>()
    233 
    234 if __name__ == "__main__":
--> 235     main()

/home/gus/Dropbox/repos/git/blacktie/src/blacktie/scripts/blacktie_pipeline.py in main()
    203             # Prep cuffmerge call
    204             ##ipdb.set_trace()
--> 205             cuffmerge_call = CuffmergeCall(yargs,email_info,run_id,run_logs,conditions=experiment,mode=args.mode)
    206             cuffmerge_call.execute()
    207 

/home/gus/Dropbox/repos/git/blacktie/src/blacktie/utils/calls.pyc in __init__(self, yargs, email_info, run_id, run_logs, conditions, mode)
    627 
    628         self.prog_yargs = self.yargs.cuffmerge_options
--> 629         self.set_call_id()
    630         self.init_log_file()
    631         self.out_dir = self.get_out_dir()

/home/gus/Dropbox/repos/git/blacktie/src/blacktie/utils/calls.pyc in set_call_id(self)
    116             self.call_id = call_id
    117         else:
--> 118             raise Exception()
    119 
    120     def notify_start_of_call(self):

TypeError: exceptions must be old-style classes or derived from BaseException, not NoneType 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:34:11.553

好的，我似乎发现问题不在于我自己的代码本身。我一直在 Ipython 中运行脚本：因此是顶级跟踪地址。

我决定从终端运行它，并按预期引发异常。

我自己回答了这个问题，尽管我仍然不知道为什么 Ipython 会导致这种情况发生，因为这似乎是我应该问的一个单独的问题。

希望这有助于有人看到这种奇怪的行为。

# python - 使用 Python + OpenCV 重新流式传输实时流

> ID：16002719
> 
> 赞同：2
> 
> 时间：2013-04-14T18:27:29.077
> 
> 标签：python, opencv, video

我有一个脚本，它使用 CaptureFromFile 从实时流中获取帧，然后对其进行一些工作。现在我想注释该流并重新传输它 - 完成此操作的最简单方法是什么？是否有可能以某种方式使用内置的 VideoWriter 来制作实时流，而不仅仅是制作视频？（生成的流不需要任何音频。）

# python - 在 matplotlib 图中更改偏移量的文本

> ID：16002721
> 
> 赞同：5
> 
> 时间：2013-04-14T18:27:34.617
> 
> 标签：python, python-2.7, matplotlib

我想更改 matplotlib 中偏移量的文本。我做了一个情节：

```
x = linspace(0, 11, 1000)
plot(x,2000*(1-exp(-x))+randn(1000))
axis((10.3, 11, 1996.9, 2002.9)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/hvB9N.png)

偏移量以 +1.996e+3 的形式写入。在我看来太难了。我想将其更改为 +1996，或者完全禁用偏移量。我尝试如下：

```
t = gca().yaxis.get_offset_text()
t.set_text('+1996') 
```

它没有奏效。什么是正确的方法？或者我可以设置偏移量的格式吗？或者我怎样才能禁用使用偏移量？

# android - 为什么画的很慢？还是奇怪？

> ID：16002722
> 
> 赞同：0
> 
> 时间：2013-04-14T18:27:36.297
> 
> 标签：android, android-canvas, android-view

我正在尝试做一个允许用户“绘制”它的视图。现在我所做的是路径，然后我用一条线将它连接起来，但不能正常工作，它工作缓慢并且让事情变得“奇怪”。你可以在这个视频[http://youtu.be/PUSUTFhDPrM](http://youtu.be/PUSUTFhDPrM)上看到，对不起，它有点快，但你可以看到我在说什么。

我的实际代码是：

```
public class DrawView extends View implements OnTouchListener {

private static final String TAG = "DrawView";

private List<List<Point>> _paths = new ArrayList<List<Point>>();
private List<Point> _lastPath;
private Paint _paint = new Paint();
private Path _path = new Path();

public DrawView(Context context) {
    super(context);

    setFocusable(true);
    setFocusableInTouchMode(true);
    setOnTouchListener(this);

    _paint.setColor(Color.BLACK);
    _paint.setStyle(Paint.Style.STROKE);
    _paint.setStrokeWidth(5);
    _paint.setAntiAlias(true);
}
public DrawView(Context context, AttributeSet attrs) {
    super( context, attrs );

    setFocusable(true);
    setFocusableInTouchMode(true);
    setOnTouchListener(this);

    _paint.setColor(Color.BLACK);
    _paint.setStyle(Paint.Style.STROKE);
    _paint.setStrokeWidth(5);
    _paint.setAntiAlias(true);
}

public DrawView(Context context, AttributeSet attrs, int defStyle) {
    super( context, attrs, defStyle );

    setFocusable(true);
    setFocusableInTouchMode(true);
    setOnTouchListener(this);

    _paint.setColor(Color.BLACK);
    _paint.setStyle(Paint.Style.STROKE);
    _paint.setStrokeWidth(5);
    _paint.setAntiAlias(true);
}

@Override
protected void onDraw(Canvas canvas) {

    for (List<Point> pointsPath : _paths) {
        _path.reset();
        boolean first = true;

        for (int i = 0; i < pointsPath.size(); i += 2) {
            Point point = pointsPath.get(i);

            if (first) {
                first = false;
                _path.moveTo(point.x, point.y);
            } else if (i < pointsPath.size() - 1) {
                Point next = pointsPath.get(i + 1);
                _path.quadTo(point.x, point.y, next.x, next.y);
            } else {
                _path.lineTo(point.x, point.y);
            }
        }
        canvas.drawPath(_path, _paint);
    }
}

public boolean onTouch(View view, MotionEvent event) {
    Point point = new Point();
    point.x = event.getX();
    point.y = event.getY();
    Log.d(TAG, "point: " + point);

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        _lastPath = new ArrayList<Point>();
        _lastPath.add(point);
        _paths.add(_lastPath);
        break;
    case MotionEvent.ACTION_MOVE:
        _lastPath.add(point);
        break;
    }
    invalidate();
    return true;
}

private class Point {
    float x, y;

    @Override
    public String toString() {
        return x + ", " + y;
    }
}
public void changePaint(int Stroke, int color){

    _path.reset();

    _paint.setColor(color);
    _paint.setStyle(Paint.Style.STROKE);
    _paint.setStrokeWidth(Stroke);
    _paint.setAntiAlias(true);

}

} 
```

我想知道是否有更好的方法允许用户用手指“绘图”，或者我可以改进什么来删除这段代码中最慢的部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:30:48.040

问题可能是您在 UI 线程上执行此类操作，尝试在后台线程上执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:43:13.717

您的绘图操作很好。绘图时最糟糕的事情是实例化新对象而您不这样做。

要评论@Atermis 的答案，实际上“在背景中绘制”没有多大意义。Android 中的绘图发生在 UI 线程上，如果您有大量计算要绘制，那么是的，它可能很有用，但这里更简单的解决方案可能是：双缓冲区。

您可以使用表面视图和[lockCanvas](http://developer.android.com/reference/android/view/SurfaceHolder.html#lockCanvas%28%29)，也可以在内存缓冲区中绘制，然后在单个操作中显示它，如下所述：http: [//www.mail-archive.com/android-beginners@googlegroups.com/msg03172 .html](http://www.mail-archive.com/android-beginners@googlegroups.com/msg03172.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T19:37:59.143

您可能想在这里阅读有关批处理的信息：http `MotionEvent`: [//developer.android.com/reference/android/view/MotionEvent.html](http://developer.android.com/reference/android/view/MotionEvent.html)

`getHistoricalX`基本上，您可以使用and获取当前和最后 X,Y 之间所有坐标的列表`getHistoricalY`。

# java - JPA - 如何在 EclipseLink 中正确保存 OneToOne 关联？

> ID：16002723
> 
> 赞同：0
> 
> 时间：2013-04-14T18:27:40.623
> 
> 标签：java, jpa, associations, eclipselink

我正在使用 Tomcat 和 EclipseLink。我想知道，为什么我的关联存储在我的数据库中，但我的实体对象在相应的属性中没有值？我想，我只需要创建两个实体并在事务开始和结束期间调用设置器。我可以在我的数据库中看到，一切顺利！我的预订表中有一个“用户”列，其中包含外键。不幸的是，如果我在预订时调用 toString()-method，那么 booker-property 似乎仍然为空。什么地方出了错？这是我的例子：

我的班级 BookerApi.java

```
public Booking createBooking(Integer courtNo, Date startDate, Date endDate, Integer bookerId) {
    // Entity bilden
    Booking booking = new Booking();
    booking.setCourtNo(courtNo);
    booking.setStart(startDate);
    booking.setEnd(endDate);
    User booker = new User();
    booker.setEmail("100");
    booker.setName("101");
    booker.setPassword("102");
    emf = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
    EntityManager em = emf.createEntityManager();
    em.getTransaction().begin();
    booking.setBooker(booker); // set relation
    em.persist(booking); // persist relation, entity a, see vogella.com/articles/JavaPersistenceAPI/article.html#example
    em.persist(booker);
    em.getTransaction().commit();
    em.clear();
    emf.close();
    //System.out.println("BookerApi.createBooking() - booking (out of em-context): " + booking);    
    return booking;
} 
```

更新：根据要求，这里是 Booking.java 的代码

```
@Entity
@Table(name="booking")
public class Booking implements Serializable {
    private static final long serialVersionUID = -5077792582177235184L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    Integer id;
    @Temporal(TemporalType.DATE)
    @Column(nullable = false)
    Date start;
    @Temporal(TemporalType.DATE)
    @Column(nullable = false)
    Date end;
    @Column(nullable = false)
    Integer courtNo;
    @OneToOne(fetch = FetchType.EAGER) // Mueller S. 105, 109
    @JoinColumn(name = "user")
    User booker;
    public Booking(){
    }
    public Integer getId() {
        return id;
    }
    public Date getStart() {
        return start;
    }
    public void setStart(Date start) {
        this.start = start;
    }
    public Date getEnd() {
        return end;
    }
    public void setEnd(Date end) {
        this.end = end;
    }
    public Integer getCourtNo() {
        return courtNo;
    }
    public void setCourtNo(Integer courtNo) {
        this.courtNo = courtNo;
    }
    public User getBooker() {
        return booker;
    }
    public void setBooker(User booker) {
        this.booker = booker;
    }
    public Integer getBookerId() {
        if (getBooker() == null){
            return 0;
        } else {
            return getBooker().getId();
        }
    }
    public void setBookerId(Integer bookerId) {
        //System.out.println("Booking.setBookerId(Integer bookerId) " + bookerId);
        BookerApi api = new BookerApi();
        User booker = api.readUser(bookerId);
        setBooker(booker);
    }
    @Override
    public String toString(){
        String logString = "LogString Booking -" +
            " id: " + getId().toString() + ";" +
            " court: " + getCourtNo().toString() + ";" +
            " start: " + getStart() + ";";
        if (getBooker() == null){
            logString += " booker: " + getBooker() + ";";
        } else {
            logString += " booker: - ;";
        }
        return logString;
    }
} 
```

# asp.net - 无法将变量从 aspx 访问到 cs

> ID：16002729
> 
> 赞同：0
> 
> 时间：2013-04-14T18:28:16.167
> 
> 标签：asp.net, computer-science

我有个问题。我在 c# 中创建了 asp.net 网页。我使用 Visuals Studio 为您提供的默认母版页创建了它。在 register.aspx 中有一个用于用户名的文本框，例如 tihs：

```
 <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">User Name:</asp:Label>
                            <asp:TextBox ID="UserName" runat="server" CssClass="textEntry"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" ControlToValidate="UserName" 
                                 CssClass="failureNotification" ErrorMessage="User Name is required." ToolTip="User Name is required." 
                                 ValidationGroup="RegisterUserValidationGroup">*</asp:RequiredFieldValidator> 
```

在cs文件夹中，在按钮下我放了一个将注册用户放入数据库的代码，但它找不到文本框的变量。这里有什么问题？

```
protected void RegisterUser_CreatedUser(object sender, EventArgs e)
{
    //FormsAuthentication.SetAuthCookie(RegisterUser.UserName, false 

    //string continueUrl = RegisterUser.ContinueDestinationPageUrl;
    //if (String.IsNullOrEmpty(continueUrl))
    //{
    //    continueUrl = "~/";
    //}
    //Response.Redirect(continueUrl);

        try
        {
            SqlConnection objcon = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ToString());
            DataTable objdatatable = new DataTable();
            string validationquery = "select * from Uporabniki where username=`" + UserName.Text + "`";
            SqlDataAdapter objdavalidate = new SqlDataAdapter(validationquery, objcon);
            objdavalidate.SelectCommand.CommandType = CommandType.Text;
            objdavalidate.Fill(objdatatable);
            if (objdatatable.Rows.Count > 0)
            {
               ... 
```

# c++ - （C++）试图打印出 char* 数组（我认为）

> ID：16002731
> 
> 赞同：3
> 
> 时间：2013-04-14T18:28:34.327
> 
> 标签：c++, arrays, char

我有这两个数组：

```
const char *face[] =
{"Deuce", "Three", "Four", "Five",
 "Six", "Seven", "Eight", "Nine", "Ten",
 "Jack", "Queen", "King", "Ace", "\0"};

const char *suit[] = { " of Hearts", " of Clubs", " of Diamonds", " of Spades", "\0" }; 
```

实际上，由于我在 C++ 中什至不是那么好，所以我什至不知道您何时在数组或其他任何地方使用星号......如果有人也能解释一下，我将不胜感激。

但无论如何，问题是我试图用他们的西装打印出所有可能的卡片，如下所示：

```
for (int n = 0; n<strlen(*suit); n++){ //where strlen(*suit) should be 4
for(int i = 0; i<strlen(*face); i++){ //where strlen(*face) should be 13
        cout << endl << face[i] << suit[n] << endl;
    }
} 
```

使用该代码，我的程序崩溃了。我究竟做错了什么？（它在使用 n<4 和 i<13 时有效，但如果我从数组中添加或删除项目，我希望它实际工作）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:32:41.497

该函数`strlen`传递一个`const char*`指向以空字符结尾的字符数组的指针。您不能使用它来计算字符串数组的长度。

相反，我建议你这样做：

```
const char *face[] =
    {"Deuce", "Three", "Four", "Five",
     "Six", "Seven", "Eight", "Nine", "Ten",
     "Jack", "Queen", "King", "Ace", NULL}; 
```

所以，哨兵是空指针。像这样的循环：

```
for (int i=0; face[i]; i++)
    // do something with face[i] 
```

当然，对于另一个阵列也是如此。

* * *

现在，说了这么多，对于 C++ 程序，你正在以错误的方式进行操作。

*   而不是使用 C 字符串，指向字符数组的指针，使用`std::string`.
*   不要使用原始数组来保存字符串，而是使用标准容器类。在您的情况下，您想要`std::vector<std::string>`.

我能给你的最好建议是忘记 C 的做事方式，并尝试学习惯用的 C++ 方式来编写代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:41:02.457

一些东西！你可以做这个检查：

`sizeof(suit)/sizeof(suit[0])`

但它会比你需要的运行时间长一倍，因为你确实有一个空终止符。因此，要么从西装中删除空终止字符串并使用上述内容，要么将您的 for 更改为：

`for (int n = 0; strlen(suit[n]); n++)`

同样在面部阵列上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T18:37:27.527

您正在存储指针数组。* in font of a pointer 取消引用该指针并返回字符串。因此，您对 strlen(*suit) 的第一次调用返回 10，这将导致索引超出范围，从而导致程序崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T18:31:58.793

数组的长度不是由 给出的`strlen`，因为它的元素不是`char`，而是`char*`。换句话说，您的数组不是字符串。

您需要将数组长度存储在一个单独的变量中，或者只使用`std::vector<const char*> face;`容器并使用`face.size()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T18:32:15.143

指针数组与 char 数组不同。`strlen( *suit )`返回数组第一个元素的长度`face`，它是一个字符串。该索引处的字符串长度为 11（包括终止字符），这就是它只会循环 11 次的原因。同样，内部循环只运行 5 次，因为第一个元素的字符串长度`face`为 6 个字符。

你应该使用一个向量来`std::string`代替：

```
std::vector<std::string> suit{"Deuce", "Three", "Four", "Five",
 "Six", "Seven", "Eight", "Nine", "Ten",
 "Jack", "Queen", "King", "Ace"};

std::vector<std::stirng> face{" of Hearts", " of Clubs", " of Diamonds", " of Spades"};

for (auto a : suit)
{
    for (auto b : face)
    {
        // ...
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-14T18:32:33.740

```
 const char *face[] =
   {"Deuce", "Three", "Four", "Five",
     "Six", "Seven", "Eight", "Nine", "Ten",
      "Jack", "Queen", "King", "Ace", "\0"}; 
```

是一个字符串字面量数组。你最好声明`face`如下：

```
string face[13]= {"Deuce", "Three", "Four", "Five",
     "Six", "Seven", "Eight", "Nine", "Ten",
     "Jack", "Queen", "King", "Ace"}; 
```

您不再需要“\0”，因为您不处理 c-string（char 数组）。

你可以为`suit`.

```
 string suit[4] = { " of Hearts", " of Clubs", " of Diamonds", " of Spades"}; 
```

您可以按如下方式打印这两个字符串数组：

```
 for (int n = 0; n<13; n++){ //where strlen(*face) should be 13
      for(int j = 0; j< 4; j++){ //where strlen(*suit) should be 4
          cout << endl << face[n] << suit[j] << endl;
      }
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-14T18:33:30.373

你的计数器是错误的

```
 for (int n = 0; n<4; n++){ 
    for(int i = 0; i<13; i++){ 
        cout << endl << face[i] << suit[n] << endl;
    }
 } 
```

你也可以这样做

```
 for (int n = 0; strlen(suit[n]) > 0; n++){
    for(int i = 0; strlen(face[i]) > 0; i++){
        cout << endl << face[i] << suit[n] << endl;
    }
 } 
```

# jquery - jQuery - Datepicker 总是显示在屏幕底部

> ID：16002735
> 
> 赞同：0
> 
> 时间：2013-04-14T18:28:57.370
> 
> 标签：jquery, jquery-ui-datepicker

我使用 jQuery 的 datepicker 插件，它运行良好。然而，最近，我注意到它总是出现在浏览器窗口的左下角——但没有正确的格式（它是透明且丑陋的）。看它的截图：![在此处输入图像描述](https://i.stack.imgur.com/X6nUz.png)

另外——我认为这是相关的——我所有的工具提示现在*总是*在屏幕的最左边，并且也缺少正确的格式。

工具提示仅在应有的时候显示，但固定在左边缘并且没有格式化。而且，当我单击日期字段时，日期选择器确实会出现——但也没有正确的格式。选择日期后，日期选择器确实保留在屏幕的左下方。

知道发生了什么吗？我觉得我缺少某种与实际脚本或 CSS 的 jQuery 链接。看来我的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:33:02.590

经典的。发布后，我有“啊哈”的时刻。

对于遇到此问题的任何其他人，事实证明我对我使用的 CSS 文件的权限是错误的。我必须在 jquery-custom-theme.css 上设置 perms 以允许任何人阅读它。现在一切都恢复正常了。

问题解决了。

# mysql - 如何按重复次数排序，然后在 MySQL 中按日期排序？

> ID：16002737
> 
> 赞同：1
> 
> 时间：2013-04-14T18:29:04.360
> 
> 标签：mysql, group-by, sql-order-by

我有以下 SQL 查询。

```
SELECT p.`id`, p.`data`, p.`title`, p.`creation_date`, t.`name` AS 'tag'

    FROM `post_tag` pt, `post` p, `tag` t 

    WHERE p.`id` = pt.`post` 
        AND pt.`tag` = t.`id` 
        AND p.`author` <> '1'
        AND (t.`name` = 'Programming' 
            OR t.`name` = 'Photography' 
            OR t.`name` = '[...]') 

    ORDER BY p.`creation_date`, t.`name` DESC 
```

我的结果表如下所示：

![sql结果](https://i.stack.imgur.com/TpwKk.png)

正如我在屏幕截图中强调的那样，重复 ID 为 76 和 77 的行。在我的应用程序中，这是衡量“受欢迎程度”的标准。我希望能够：

1.  将“数据”重复为一行的行分组（我知道我可以使用 GROUP BY 来做到这一点）
2.  首先按“受欢迎程度”对行进行排序，然后按“creation_date”排序。因此，如果有 3 行具有相同的“数据”，我希望首先返回它，然后是计数为 2 的行，等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:32:22.880

```
... group by p.data order by count(*) desc, p.creation_date, t.name desc 
```

# tomcat - 在 Intellij IDEA 中更改资源或代码时触发 tomcat 更新编译项目

> ID：16002741
> 
> 赞同：0
> 
> 时间：2013-04-14T18:29:36.487
> 
> 标签：tomcat, intellij-idea

我使用 intellij IDEA (12.x)。

Tomcat 6 下有 Spring MVC 应用程序。这就是我要做的：

我的步骤：

```
 1\. Run idea
 2\. Create new project -> Spring MVC application 
```

现在配置一切以运行应用程序。

```
 3\. Start application (pressing green arrow on the top), 
    As a result I can see my "hello" message jsp - in browser

 4\. in the Controller I change "hello" to "hello123" 
```

然后我想在浏览器页面中看到我的“hello123”。我的尝试：

```
 5\. refresh page - no result
 6\. Ctrl+Shift+F9 (compiling current controller class). 
    refresh page - no result
 7\. pressing "refresh" button in the tomcat server panel in IDEA. 
    the pop-up dialog appears: "update classes and resuources" option 
    is selected there by default. refresh page - no result
 8\. restart server - then yes - I can see result ("hello123" message) 
```

将操作/等待时间最小化以尽可能快地获得结果以确保开发人员安全的最佳方法是什么？

在我的 tomcat 配置面板中，我有以下配置（实际上是默认配置）：

```
On 'Update' action: Update classes and resources.
On frame deactivation: Do nothing

Before launch: Make; Build app:war exploded artifact 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:42:16.847

这有两个部分 - JSP 编译和源文件编译。以我的经验，IDEA 可以很好地重新加载资源和类，但有一些限制，但要真正*最大限度地减少*编译和看到它之间的时间，你需要一个第三方工具 - [JRebel](http://zeroturnaround.com/software/jrebel/)。

要重新加载资源，您可以执行以下操作。

*   在 Tomcat 运行时，当您进行更改时，点击蓝色的刷新图标。
*   当它弹出时，选择“重新加载类和资源”。
*   你的类和资源应该重新加载。

JRebel 将为您提供的内容[在此处列出](http://zeroturnaround.com/software/jrebel/features/#headline)得很好，而不是每次使用 JVM 热交换时都重新加载资源。

# java - 如何从 NOT 资源文件中解析 xml

> ID：16002742
> 
> 赞同：1
> 
> 时间：2013-04-14T18:29:38.240
> 
> 标签：java, android, xml, string, parsing

我的应用程序使用数据并将其保存在文件 [root]/data/data/appName/files/list.xml

我知道如何解析 XML，如下所示：

```
XmlResourceParser parser = getResources().getXml(R.xml.list); 
```

但是因为我有一个不在 res 目录中的文件，所以我需要找到另一种方法。

我知道如何将我的文件作为字符串获取，如下所示：

```
FileInputStream fIn = openFileInput("samplefile.txt");
InputStreamReader isr = new InputStreamReader(fIn);
char[] inputBuffer = new char[TESTSTRING.length()];
isr.read(inputBuffer);
String readString = new String(inputBuffer); 
```

能够指定文件名很重要。

另外，当我保存文件时：

```
FileOutputStream fOut = openFileOutput("list1.xml", MODE_WORLD_READABLE); 
```

编译器显示：`"MODE_WORLD_READABLE"`因为

```
"This constant was deprecated in API level 17". 
```

但它有效。这对我意味着什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:47:46.893

从路径读取 Xml 文件-

```
public boolean ReadXmlFile(String filePath)
    {
        try {
            String Data="";
            File fIN = new File(filePath);

            if (fIN.exists()) 
            {
                StringBuffer fileData = new StringBuffer(1000);
                BufferedReader reader = new BufferedReader(
                        new FileReader(filePath));
                char[] buf = new char[1024];
                int numRead=0;

                while((numRead=reader.read(buf)) != -1){            
                    String readData = String.valueOf(buf, 0, numRead);
                    fileData.append(readData);              
                    buf = new char[1024];
                }

                reader.close();   
                Data= fileData.toString();

            }
            else
            {

                return false;
            }

            docData = null;
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

            try 
            {           
                DocumentBuilder db = dbf.newDocumentBuilder();          
                InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(Data));
                docData = db.parse(is);         
            } catch (ParserConfigurationException e) {          
                return false;
            } catch (SAXException e) {          
                return false;
            } catch (IOException e) {           
                return false;
            }
            return true;
        } catch (Exception e) {

            return false;
        }
    } 
```

# c# - 正则表达式匹配不起作用

> ID：16002745
> 
> 赞同：0
> 
> 时间：2013-04-14T18:29:45.930
> 
> 标签：c#, regex, pattern-matching

我正在做一个非常简单的任务：解析一个网站，寻找

```
<tbody>this is what important for me</tbody>` 
```

并返回，但我无法让它发挥作用。当我做：

```
Regex.Matches(webData, @"<tbody>(.*?)</tbody>") 
```

它没有给我任何结果。然而，这给了我两个结果：

```
Regex.Matches(webData, @"tbody") 
```

但同样，这

```
Regex.Matches(webData, @"tbody(.*?)tbody") 
```

什么也没给我（所以我认为逃避不是问题）。我`(.*?)`在[这个页面上](https://stackoverflow.com/questions/3677255/regex-for-anything-between)找到了，我认为它会很容易使用，但我就是无法解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:36:29.213

`regex`不推荐用于解析html

`regex`用于定期出现的模式。`html`它的格式不规则（除了`xhtml`）。例如`html`，即使您**没有**`closing tag`! 这可能会破坏您的代码，文件也是有效的。

使用像[htmlagilitypack这样的 html 解析器](http://htmlagilitypack.codeplex.com/)

您可以使用此代码检索所有 tbody 的内容`HtmlAgilityPack`

```
HtmlDocument doc = new HtmlDocument();
doc.Load(yourStream);

var tbodyList= doc.DocumentNode.SelectNodes("//tBody")
                  .Select(p => p.InnerText)
                  .ToList(); 
```

`tbodyList`包含`tbody`整个文档中的所有值！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T18:37:06.770

要解析网页，请使用真正的 html 解析器，例如[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)

```
string html = "<tbody>this is what important for me</tbody>";

var doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var text = doc.DocumentNode.Descendants("tbody").First().InnerText; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T18:43:40.417

我也推荐 HtmlAgilityPack。

您也可以使用 XPath ( [http://www.w3schools.com/xpath/](http://www.w3schools.com/xpath/) )

在 I4V 示例中：

```
var text = doc.DocumentNode.SelectSingleNode("//tbody").InnerText; 
```

# asp.net-mvc-3 - 带有表单身份验证的 ASP.NET MVC 注销

> ID：16002746
> 
> 赞同：0
> 
> 时间：2013-04-14T18:29:47.910
> 
> 标签：asp.net-mvc-3, c#-4.0

我有`Logout action`一个控制器：

```
public ActionResult Logout()
{
    FormsAuthentication.SignOut();
    Session["UserCredential"] = null;
    return RedirectToAction("Index", "Home");
} 
```

这在谷歌浏览器中工作。但是当我在第一次登录和注销后使用我的 web 应用程序和 firefox 浏览器（最新版本）时。当我再次登录应用程序并按下注销按钮时，我无法从 Web 应用程序注销。`Request.IsAuthenticated`正在返回我真正的价值。

**对于登录，我使用了以下操作：**

```
 [HttpPost]
        public JsonResult Login(string userName, string password)
        {

            User oUser = oRepository.GetUser(userName,password); 
            Session["UserCredential"] = oUser;

            if (oUser != null)
            {
                if (oUser.IsVerified)
                {
                    string url = Request.Url.AbsolutePath;    
                    FormsAuthentication.SetAuthCookie(userName, false);
                    return Json(new { res = 1, RedirectUrl = Url.Action("Index", "Home") }, JsonRequestBehavior.AllowGet);
                }
                else
                {
                    return Json(new { res = 0, RedirectUrl = "" }, JsonRequestBehavior.AllowGet);
                }
            }

            return Json(new { res = -1, RedirectUrl = "" }, JsonRequestBehavior.AllowGet);
        } 
```

任何人都知道我必须做些什么来解决我的Firefox浏览器问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:03:32.090

我不是 100% 肯定，但你可以试试这个。

我观察到该方法`FormsAuthentication`是在 ASP.NET 中实现的，该`SignOut`方法不会清除`ASPXAUTH`cookie。因此，在注销时，我通常会自己手动清除响应中的所有 cookie。

你可以尝试这样做。至少，在您的情况下，您应该清除 2 个 cookie：

1) **FormsAuth** cookie。`CookieName`您可以通过访问类的（或某些此类）静态字段来获取 cookie 的名称`FormsAuthentication`。

2) ASP.NET 会话 cookie。检查**即时窗口**中的 cookie 名称（打印`Cookies`集合）。

要清除 cookie，只需向响应对象的 cookie 集合中添加与旧 cookie 同名的新 cookie，然后将它们的到期日期设置为过去的日期。

# c# - C# 导入 C++ 非托管 dll 并从一个 dll 创建多个实例？

> ID：16002752
> 
> 赞同：2
> 
> 时间：2013-04-14T18:30:53.993
> 
> 标签：c#, c++, pinvoke

我有一个用 C++ 编写的非托管 dll，它有一个简单的功能。

```
int temp =0;
int func1(void)
{
    return temp +=2;
} 
```

和导出的功能是

```
UNMANAGED_DLL1_API int recepret(void)
{
    return func1();
} 
```

然后我有一个导入这个 dll 的 C# 项目。我想要做的是创建一个导入 dll 的类并从另一个类创建实例。

```
class DllClass
    {
        public int classval;

        [DllImport("unmanaged_dll1.dll", EntryPoint = "recepret", CharSet = CharSet.Unicode)]
        public static extern int recepret();

        public int func1()
        {
            return recepret();
        }
} 
```

并在表格应用程序中

```
public partial class Form1 : Form
{
    DllClass dll1 = new DllClass();
    DllClass dll2 = new DllClass();
    DllClass dll3 = new DllClass();
private void button1_Click(object sender, EventArgs e)
    {
        richTextBox1.AppendText( "dll1 " +  dll1.func1().ToString()+ "\r\n");
    }

    private void button2_Click(object sender, EventArgs e)
    {
        richTextBox1.AppendText("dll2 " + dll2.func1().ToString() + "\r\n");
    }

    private void button3_Click(object sender, EventArgs e)
    {
        richTextBox1.AppendText("dll3 " + dll3.func1().ToString() + "\r\n");
    }
} 
```

但所有树实例都是相同的。我想要独立的实例。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:48:43.953

You have a global variable. There's just one instance of it per module instance. And there's one instance of your native DLL module per process. Using a global variable is not the solution here.

If you want to have a different variable associated with each button click, you'll need to create a separate variable for each.

It would make much more sense for the variables to be owned by the C# code.

Your C++ code would look like this:

```
void func1(int &value)
{
    value +=2;
} 
```

Then in the C# you call it like this:

```
[DllImport("unmanaged_dll1.dll")]
public static extern void func1(ref int value);

....

int button1counter = 0;

private void button1_Click(object sender, EventArgs e)
{
    dll1.func1(ref button1counter);
    richTextBox1.AppendText( "dll1 " +  button1counter.ToString()+ "\r\n");
} 
```

# gdi+ - Gdiplus位图错误

> ID：16002758
> 
> 赞同：2
> 
> 时间：2013-04-14T18:31:17.467
> 
> 标签：gdi+

我正在尝试将 HBITMAP 转换为 Gdiplus 位图。我的代码正在获取我从谷歌找到的一些代码的屏幕截图并将其放入 HBITMAP。我想使用 Gdiplus 获取 rgb 值（特别是 argb）。

获取屏幕截图的代码工作文件，但是将 HBITMAP 转换为位图的行会引发大量疯狂的链接器错误。这是我的代码：

```
HDC hScreenDC = CreateDC((LPCWSTR)"DISPLAY", NULL, NULL, NULL);     
// and a device context to put it in
HDC hMemoryDC = CreateCompatibleDC(hScreenDC);

int x = GetDeviceCaps(hScreenDC, HORZRES);
int y = GetDeviceCaps(hScreenDC, VERTRES);

// maybe worth checking these are positive values
HBITMAP hBitmap = CreateCompatibleBitmap(hScreenDC, x, y);

// get a new bitmap
HBITMAP hOldBitmap = (HBITMAP)SelectObject(hMemoryDC, hBitmap);

BitBlt(hMemoryDC, 0, 0, 1920, 1080, hScreenDC, 0, 0, SRCCOPY);
hBitmap = (HBITMAP)SelectObject(hMemoryDC, hOldBitmap);

// clean up
DeleteDC(hMemoryDC);
DeleteDC(hScreenDC);

Gdiplus::Bitmap* pBitmap = Gdiplus::Bitmap::FromHBITMAP( hBitmap, NULL ); // <-- problem line 
```

班轮错误是 LNK2019 并说：错误 2 错误 LNK2019：未解析的外部符号 _GdipFree@4 在函数“public: static void __cdecl Gdiplus::GdiplusBase::operator delete(void *)”中引用 (??3GdiplusBase@Gdiplus@@萨克斯@Z)

我已包含 gdiplus.h、windows.h 和 #define GDIPVER 0x110

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:39:00.573

首先要检查 - 你是否链接到 gdiplus.lib？这很可能是问题所在。

还要确保在开始使用 GDI+ 函数之前调用了[GdiplusStartup()](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms534077%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-23T19:11:41.813

您需要将您的项目链接到`gdiplus.lib`.

```
#include "Gdiplus.h"
#pragma comment(lib,"gdiplus.lib") 
```

以查看这篇[文章](https://msdn.microsoft.com/en-us/library/windows/desktop/ms533895(v=vs.85).aspx)为例。

# assembly - 当我有第一个索引的地址时，如何在 x86 程序集中获取数组元素的值

> ID：16002763
> 
> 赞同：2
> 
> 时间：2013-04-14T18:31:44.227
> 
> 标签：assembly, x86

我需要在 C 程序中调用汇编程序。在我的 C 程序中，我有一个数组的地址，在我的汇编程序中，我需要获取数组的第二个索引的值。如果我将数组本身作为参数，对我来说会更容易。你能告诉我如何获得数组第二个元素的内容吗？

在我的 C 程序中，我调用了这个函数：

```
getIndex(&array[0]); 
```

如果参数不是地址，我在组装过程中的解决方案是：

```
PUSH BP
MOV BP,SP
push SI

MOV SI,[BP+4]
ADD CX,SI
ADD SI,2
MOV AX,SI ; AX got the value of the second index of the array 
```

我应该如何解决我的问题？感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:58:54.017

基本上，您还需要一个内存地址取消引用（方括号），但您的代码还存在一些其他问题。

查看您的代码，我假设数组中元素的大小为 2 个字节，您使用的是[cdecl](http://en.wikipedia.org/wiki/X86_calling_conventions#cdecl)调用约定，并且有一个 16 位处理器。以下是问题：

1.  如果将 SI 推入堆栈，则还应将其弹出
2.  您将 SI 的值添加到 CX，但从不使用 CX 中的值
3.  该过程不会恢复调用者的 BP 和 SP，也不会返回调用该过程的位置

这是已修复问题的代码：

```
push bp
mov bp,sp
push si
mov si,[bp+4] ; si = address of the first element in the array
mov ax,[si+2] ; ax = value of the second element in the array
pop si        ; revert si
mov sp,bp     ; revert the caller's stack pointer
pop bp        ; revert the caller's base pointer
ret           ; jump to the instruction after the call 
```

# html - webworkers 中的 websocket

> ID：16002765
> 
> 赞同：1
> 
> 时间：2013-04-14T18:31:57.313
> 
> 标签：html, websocket

是否可以在网络工作者中创建和使用网络套接字？

我收到了这个错误：

```
WebSocket is not defined 
```

Ps：我使用的是最新版本的 Firefox。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:38:17.110

这在 Chrome 中受支持（尽管我已经测试过，但我怀疑在 IE 10 中也是如此）。

有一个 Firefox 错误来实现在 Web Workers 中使用 WebSockets 的能力：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=504553) ://bugzilla.mozilla.org/show_bug.cgi?id=504553我预计它将在未来几个月内在 Firefox 中实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-22T14:40:04.277

FWIW FireFox 38：我可以在 Webworkers 中使用 Websockets。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T20:08:55.197

2015 年 1 月 1 日的[评论](https://bugzilla.mozilla.org/show_bug.cgi?id=504553#c156)表明，在 Web Worker 中创建的 WebSocket 直到版本 37 才会添加到 FireFox。[这里](https://bugzilla.mozilla.org/show_bug.cgi?id=1112054)的错误显示为版本 37 已修复。

# macos - Mac 使用终端安装库

> ID：16002768
> 
> 赞同：0
> 
> 时间：2013-04-14T18:32:02.537
> 
> 标签：macos, shell, terminal, installation, libraries

我对此进行了研究，并找到了关于这个主题的答案，但仍然感到困惑。

尝试开始使用 Git。我也是 shell 脚本的新手，所以希望在此之后我会更熟悉它。

我正在阅读有关如何启动和运行 Git 的页面：http: [//git-scm.com/book/en/Getting-Started-Installing-Git](http://git-scm.com/book/en/Getting-Started-Installing-Git)

我在桌面上创建了一个名为“git”的目录，并在终端中导航到它。以我在 shell 脚本方面的经验水平，这是一场胜利。然后，按照有关如何从终端下载的博客文章运行以下命令：

```
curl -O http://git-scm.com/download 
```

那行得通，或者至少在我创建的“git”目录中添加了一个新文件。

阅读说明会被告知“要安装 Git，您需要拥有 Git 依赖的以下库：curl、zlib、openssl、expat 和 libiconv”

好的。嗯。如何？我确实阅读了一些关于如何执行此操作的博客文章和 SO 答案，但失败了。例如第一个 - 键入 zlib 并按回车 - 找不到命令？如何检查它是否已安装或如何安装？其他人呢？

我尝试关注这篇博文：http: [//www.neuraladvance.com/using-open-source-libraries-on-mac-os-x.html](http://www.neuraladvance.com/using-open-source-libraries-on-mac-os-x.html)

我输入：

```
./configure
make
sudo make install 
```

甚至不确定会发生什么。前两个命令说没有找到最后一个要求我输入密码。

然后我尝试了`./configure --help`

然后被告知“没有这样的文件或目录”

不用说，我不知道下一步该做什么。如何使用终端在 Mac 上安装库？curl、zlib、openssl、expat 和 libiconv

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:00:58.207

我很确定所有这些库都预装在你的 Mac 上。如果没有，安装 Xcode（AppStore 上免费）就可以了。Xcode 实际上带有 git（但不是最新版本），因此如果您安装 Xcode，则不需要单独安装 git。

要更一般地回答您的问题，您可能需要安装[Homebrew](http://mxcl.github.io/homebrew/)。它是一个用于安装软件和库的命令行工具，而且非常易于使用。

发现外壳真是太好了。您应该阅读一些针对初学者的教程。如果你喜欢它，你会学得很快，几周后，你就会明白为什么你尝试的命令不起作用。学习愉快！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:58:33.650

正如 Simon 建议的那样，您应该安装 Xcode，但是 CLI 工具不会自动安装。它们必须通过 Xcode 的首选项下载。在首选项中单击下载选项卡，然后在命令行工具旁边安装。

如果 Xcode 没有自动安装任何必需的工具，[Homebrew](http://mxcl.github.io/homebrew/)是一个很棒的、易于使用的实用程序，它可以安装几乎任何 UNIX 或 Linux 命令，语法如下：

```
brew install <SomeAppName> 
```

[Homebrew](http://mxcl.github.io/homebrew/)网站很容易按照说明进行初始设置。因此，如果您缺少任何需要的东西，请尝试使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T10:00:42.877

在 Xcode 5 中，要下载命令行工具，请选择“Xcode”下的 Open Developer Tool，然后从子菜单中选择 More Developer Tools>。这会将您带到 Apple 网页 - 您需要开发者用户名/密码才能访问下载页面。为您的系统选择正确的 CLT，从 dmg/pkg 下载并安装。

# c++ - 需要使用 JNI 发布 jboolean 吗？

> ID：16002769
> 
> 赞同：4
> 
> 时间：2013-04-14T18:32:03.013
> 
> 标签：c++, java-native-interface, cocos2d-x

我正在尝试将静态方法从 C++ 调用到 Java。但我收到以下错误：

```
D/cocos2d-x debug info(29160): isInternetConnected Done, value is: 1
A/libc(29160): @@@ ABORTING: INVALID HEAP ADDRESS IN dlfree
A/libc(29160): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1) 
```

代码是：

```
bool InterfaceJNI::isInternetConnected()
{
    JavaVM* jvm = JniHelper::getJavaVM();
    int status;
    JNIEnv *env;
    jmethodID mid;
    jobject jobj;

    bool isAttached = false;
    bool returnValue = false;

    CCLog("InterfaceJNI isInternetConnected");

    // Get Status
    status = jvm->GetEnv((void **) &env, JNI_VERSION_1_6);

    if(status < 0)
    {
        CCLog("isInternetConnected Status < 0 Failed to get JNI Enviroment!!!");
        status = jvm->AttachCurrentThread(&env, NULL);
        CCLog("isInternetConnected Status 2: %d", status);
        if(status < 0)
        {
            CCLog("isInternetConnected Status < 0 !!!");
            return false;
        }
        isAttached = true;
        CCLog("isInternetConnected Status isAttached: %d", isAttached);
    }

    CCLog("isInternetConnected Status: %d", status);

    CCLog("isInternetConnected Finding Class....");
    jclass mClass = env->FindClass("org/example/SocialNetwork/CCSocialNetwork");

    // Get Static bool isInternetConnection()
    CCLog("isInternetConnected Getting method....");
    mid = env->GetStaticMethodID(mClass, "isInternetConnection", "()Z");
    if (mid == 0)
    {
        CCLog("isInternetConnected FAIL GET METHOD STATIC");
        return false;
    }
    CCLog("isInternetConnected Calling method....");

    // Call Static bool isInternetConnection()
    jboolean jReturnValue = env->CallStaticBooleanMethod(mClass,mid);

    CCLog("Call done ");
    // Convert value from Java to C++
    returnValue = (bool)jReturnValue;
    CCLog("isInternetConnected Done, value is: %d", returnValue);

    if(isAttached)
        jvm->DetachCurrentThread();

    // Change for return value
    return returnValue;
} 
```

但如果我只是：

```
// Call Static bool isInternetConnection()
    /*jboolean jReturnValue =*/ env->CallStaticBooleanMethod(mClass,mid);

    CCLog("Call done ");
    // Convert value from Java to C++
    //returnValue = (bool)jReturnValue;
    CCLog("isInternetConnected Done, value is: %d", returnValue);

    if(isAttached)
        jvm->DetachCurrentThread();

    // Change for return value
    return returnValue; 
```

我得到：

```
Fatal signal 7 (SIGBUS) at 0x00000000 (code=128) 
```

所以我假设我打的电话没问题。

我在 C++ 中，我必须释放 jboolean 还是其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T06:35:59.440

不需要释放 jboolean。

C++ 代码没问题。但是那个信号 7 似乎你的 Java 代码有问题。

*   检查您是否正在使用带有静态调用的静态类。

如果这是正确的，请检查您使用的代码在哪里。有时，内部调用可以发送 SIGBUS，因此请尝试仅在您的课程中使用代码。

*   逐步尝试您正在执行的代码以检查问题所在。

# django - 有没有一种简单的方法可以在 Django-CMS 中实现“漂亮链接”，类似于 WordPress Pretty Links 插件？

> ID：16002770
> 
> 赞同：0
> 
> 时间：2013-04-14T18:32:05.033
> 
> 标签：django

我计划使用 Django-CMS 建立一个网站，并计划包含我想要隐藏的附属链接，即将 mysite.com/rec-product 重定向到affiliate-site.com/product-with-affiliate-info ，最好使用存储在数据库中的映射。

有没有一种简单的方法可以在 Django-CMS 中实现“漂亮链接”，类似于 WordPress Pretty Links 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:15:13.997

Django 默认带有一个重定向应用程序：[`django.contrib.redirects`](https://docs.djangoproject.com/en/dev/ref/contrib/redirects/). 它允许您通过 Django 管理界面或使用 Django 数据库 API 添加重定向。

看起来有人已经将其与 Django CMS 集成：[django-cms-redirects](https://github.com/salvaorenick/django-cms-redirects)。

# android - Android 和中介者设计模式

> ID：16002779
> 
> 赞同：1
> 
> 时间：2013-04-14T18:32:57.327
> 
> 标签：android, design-patterns, mediator

我对 android 还很陌生，在阅读了一本书并学习了很多教程之后，我即将创建我的第一个“真正的”应用程序。

我的问题很简单：在设计 android 应用程序时，调解器设计模式仍然是一个不错的选择吗？

如果是的话，在编写 android 应用程序时是否应该避免任何设计模式？

如果没有，您可以使用中介模式来收集不同对象的实例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:15:59.420

我建议创建一个模型类（我们称之为）并在（不是）`MyModel`中创建这个类的对象。`Application.onCreate``Activity.onCreate`

在那之后添加吸气剂，所以你可以从任何`Activity`或`Service`这样的地方得到这个模型：

```
MyApplication app = (MyApplication) getApplication();
MyModel model = app.getMyModel();
User user = model.getCurrentUser(); 
```

等等

如果您在那里创建从上面代码的前两行返回模型的方法，那么创建`BaseActivity`类也可以节省您的输入。`protected MyModel getModel()`

**编辑：**

您需要创建一个类来扩展`Application`并在`AndroidManifest.xml`.

这是如何：[https ://stackoverflow.com/a/2929927/2183804](https://stackoverflow.com/a/2929927/2183804)

**编辑（关于单例）：**

据说它是一种反模式（不仅在 Android 上）。在 Android 中，我看到人们以带有 MySingleton.getInstance(Context) 之类的访问器的单例结尾，因为他们无论如何都需要 Context，例如用于 SharedPrefs 或 DB 访问。这就是 Application 的用途，因此无需创建额外的、骇人听闻的实体，它可能会以错误的方式使用：MySingleton.getInstance(null) 从没有可用上下文的地方。在进程被杀死并重新启动后，这可能会导致 NPE。

# ruby - 与 Nokogiri::XML::Text#text 输出混淆

> ID：16002780
> 
> 赞同：1
> 
> 时间：2013-04-14T18:32:58.313
> 
> 标签：ruby, nokogiri

我写了下面的代码：

```
require 'nokogiri'
require 'pp'

html = <<-END
<html>

    <head>

    <title> A Dirge </title>

    <link rel     = "schema.DC"
          href    = "http://purl.org/DC/elements/1.0/">

    <meta name    = "DC.Title"
          content = "A Dirge">

    <meta name    = "DC.Creator"
          content = "Shelley, Percy Bysshe">

    <meta name    = "DC.Type"
          content = "poem">

    <meta name    = "DC.Date"
          content = "1820">

    <meta name    = "DC.Format"
          content = "text/html">

    <meta name    = "DC.Language"
          content = "en">

    </head>

    <body><pre>

            Rough wind, that moanest loud
              Grief too sad for song;
            Wild wind, when sullen cloud
              Knells all the night long;
            Sad storm, whose tears are vain,
            Bare woods, whose branches strain,
            Deep caves and dreary main, -
              Wail, for the world's wrong!

    </pre></body>

    </html>
 END

doc = Nokogiri::HTML::DocumentFragment.parse(html)
pp doc 
doc.children.each do |ch|
    p ch.text if ch.text?
end 
```

但它输出：

```
"\n\n    \n\n    "
"\n\n    " 
```

现在我的问题是为什么里面的线`<pre>`..`<\pre>`没有打印出来？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:47:35.003

`doc.children.each`块输出比我多一点：

```
"\n\n \n\n "
“\n\n”
“\n\n”
“\n\n”
“\n\n”
“\n\n”
“\n\n”
“\n\n”
"\n\n \n\n "
“\n\n\n”

```

这是正确的输出；这些是 . 的直接子节点的文本节点`<html>`。

我不确定你想要哪条“线”而你没有看到。例如，如果您想要 的内容`<pre>`，您可以这样做

```
doc.xpath("pre").text 
```

为拿到它，为实现它。如果那不能为您解答问题，则必须澄清您的问题。

# c# - 将sql查询写入linq

> ID：16002785
> 
> 赞同：0
> 
> 时间：2013-04-14T18:33:18.343
> 
> 标签：c#, sql, linq

我有以下查询`sql`：

```
SELECT [definition],[pos]
  FROM [WordNet].[dbo].[synsets]
  where synsetid in(SELECT [synsetid] FROM [WordNet].[dbo].[senses] 
  where wordid = (select [wordid]FROM [WordNet].[dbo].[words]
  where lemma = 'searchString')) 
```

**我已经为 sql to linq 试过这个：**

```
long x = 0;

if (!String.IsNullOrEmpty(searchString))
{
    var word = from w in db.words
               where w.lemma == searchString
               select w.wordId;
    x = word.First();

   var sence = from s in db.senses
               where (s.senseId == x)
               select s;
   var synset = from syn in db.synsets
                where sence.Contains(syn.synsetId)
                select syn; 
```

但我收到以下错误`sence.Contains()`

```
 Error1:Instance argument: cannot convert from
  'System.Linq.IQueryable<WordNetFinal.Models.sense>' to
  'System.Linq.ParallelQuery<int>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:52:02.233

下面的代码：

```
var sence = from s in db.senses
               where (s.senseId == x)
               select s; 
```

返回类型的对象：`WordNetFinal.Models.sense`，但在`where sence.Contains(syn.synsetId)`您尝试在其中搜索它`syn.synsetId`是一个整数。

所以你应该把上面的代码改成：

```
var sence = from s in db.senses
                   where (s.senseId == x)
                   select s.senseId; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:50:43.440

x 似乎是 Word 类型，而不是 Id 的类型（可能是 int 或 long）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T19:09:43.370

您正在将整`sense`行与 a进行比较`synsetId`，这是不正确的。您还将原始查询拆分为两个单独的查询，方法是使用`First()`到目前为止触发表达式的评估。如果在 中有重复项时您可以忍受不返回 SQL 错误，则`words`可以将查询编写为如下内容；

```
if (!String.IsNullOrEmpty(searchString))
{
    var wordIds = from word in db.words
                  where word.lemma == searchString
                  select word.wordId;

    var synsetIds = from sense in db.senses
                    where wordIds.Contains(sense.wordId)
                    select sense.synsetId;

    var result = (from synset in db.synsets
                  where synsetIds.Contains(synset.synsetId)
                  select new {synset.definition, synset.pos}).ToList(); 
} 
```

为整个`ToList()`查询触发一次评估。

您也可以使用更简单的连接来完成；

```
var result = (from synset in db.synsets
              join sense in db.senses on synset.synsetId equals sense.synsetId
              join word in db.words on sense.wordId equals word.wordId
              select new {synset.definition, synset.pos}).ToList(); 
```

# c# - 如何创建从 CommonDialog 类派生的自定义用户控件

> ID：16002788
> 
> 赞同：0
> 
> 时间：2013-04-14T18:33:37.583
> 
> 标签：c#, user-controls, folderbrowserdialog

我想扩展 FolderBrowserDialog 以选择包含所选文件夹的子文件夹（添加复选框以设置是否包含）。我发现我无法扩展基本的 FolderBrowserDialog，因为它是一个密封类。

所以我认为最简单的解决方案是创建一个用户控件，它派生自 CommonDialog（与 FolderBrowserDialog 相同的类），从标准 FolderBrowserDialog 复制代码并稍微改变它，使其也具有“包含子文件夹" 复选框。

但是当我从默认的 FolderBrowserDialog 复制代码时，它给了我一个错误：

```
missing partial modifier on declaration of type [my_class_name] another partial declaration of this type exists c# 
```

它指出了“[my_class_name].Designer.cs”文件。

```
namespace my_custom_folder_open
{
    // Summary:
    //     Prompts the user to select a folder. This class cannot be inherited.
    [DefaultEvent("HelpRequest")]
    [DefaultProperty("SelectedPath")]
    [Designer("System.Windows.Forms.Design.FolderBrowserDialogDesigner, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")]
    public sealed class UserControl2 : CommonDialog
    {
        // Summary:
        //     Initializes a new instance of the System.Windows.Forms.FolderBrowserDialog
        //     class.
        public UserControl2();

        // Summary:
        //     Gets or sets the descriptive text displayed above the tree view control in
        //     the dialog box.
        //
        // Returns:
        //     The description to display. The default is an empty string ("").
        [Browsable(true)]
        [DefaultValue("")]
        [Localizable(true)]
        public string Description { get; set; }
        //
        // Summary:
        //     Gets or sets the root folder where the browsing starts from.
        //
        // Returns:
        //     One of the System.Environment.SpecialFolder values. The default is Desktop.
        //
        // Exceptions:
        //   System.ComponentModel.InvalidEnumArgumentException:
        //     The value assigned is not one of the System.Environment.SpecialFolder values.
        [Browsable(true)]
        [Localizable(false)]
        public Environment.SpecialFolder RootFolder { get; set; }
        //
        // Summary:
        //     Gets or sets the path selected by the user.
        //
        // Returns:
        //     The path of the folder first selected in the dialog box or the last folder
        //     selected by the user. The default is an empty string ("").
        [Browsable(true)]
        [DefaultValue("")]
        [Localizable(true)]
        public string SelectedPath { get; set; }
        //
        // Summary:
        //     Gets or sets a value indicating whether the New Folder button appears in
        //     the folder browser dialog box.
        //
        // Returns:
        //     true if the New Folder button is shown in the dialog box; otherwise, false.
        //     The default is true.
        [Browsable(true)]
        [DefaultValue(true)]
        [Localizable(false)]
        public bool ShowNewFolderButton { get; set; }

        // Summary:
        //     Occurs when the user clicks the Help button on the dialog box.
        [Browsable(false)]
        [EditorBrowsable(EditorBrowsableState.Never)]
        public event EventHandler HelpRequest;

        // Summary:
        //     Resets properties to their default values.
        public override void Reset();
        protected override bool RunDialog(IntPtr hWndOwner);
    }
} 
```

哪里可能有问题？

顺便说一句，我已经将该项目创建为 Windows 窗体控件库..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T22:16:55.253

你在这方面真的走错了路。这些对话框是组件，而不是控件。它们是 Windows 内置对话框的非常薄的包装器。这些对话框本身对 .NET 一无所知，并且是用非托管代码编写的。它们是 Component 而不仅仅是普通类的唯一原因是允许您将其放在表单上。与设计师一起设置一些属性很有帮助。

也许“CommonDialog”一词具有误导性。微软称其为“通用”只是因为它们是 GUI 程序中常用的对话框。并鼓励使用内置的，以便每个程序都有非常相似的方式来打开文件。

从 CommonDialog 派生没有多大意义，因为不需要创建自定义对话框。因为 Windows 只有内置的，并且它们已经被各自的 .NET 类包装。您的计划将破坏本机 FolderBrowserDialog 的功能。其中不包括显示复选框。它被密封是有充分理由的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:47:40.910

Hans 是非常正确的，你不能通过从`CommonDialog`. 您可以做的是`IFileDialog`在文件夹选择器模式下使用原始组件。您还需要使用`IFileDialogCustomize`来添加您的复选框。由于这只是 COM，因此从 .net 使用它实际上非常简单。

# javascript - 如何从返回的 JSON 字符串中提取某些数据？

> ID：16002791
> 
> 赞同：2
> 
> 时间：2013-04-14T18:33:46.077
> 
> 标签：javascript, json, string

所以我有一个 JavaScript 应用程序，它拍摄用户照片，然后将其发送到人脸识别 API，它返回一个 JSON 值，然后我将其转换为字符串。但是我只有返回给我的两个项目是重要的。我想将这两个（uid和confidence）拉出来并将它们设置为变量；我不完全确定该怎么做。以下是返回内容的示例：

```
{"photos":[{"url":"http://api.skybiometry.com/fc/images/get?id=bmN2X3hybD0wMTk5c29ub3I0MXE0bjN…RyMTQzJmVxPTE1ODkmY3ZxPTY5MjcxMzEyMTI3cTImZ3Z6cmZnbnpjPTIwMTMwNDE0MTgxNjI5","pid":"F@0deeecd9274c7d8357343ed57e6aaf6c_69271312127d2","width":380,"height":300,"tags":[{"tid":"TEMP_F@0deeecd9274c7d8357343ed500c20089_69271312127d2_51.05_45.67_0_1","recognizable":true,"threshold":20,"uids":[{"uid":"sam@sam","confidence":100}],"confirmed":false,"manual":false,"width":20,"height":25.33,"center":{"x":51.05,"y":45.67},"eye_left":{"x":56.32,"y":39.67},"eye_right":{"x":46.32,"y":40},"mouth_center":{"x":48.68,"y":55.67},"nose":{"x":50.79,"y":47},"yaw":0,"roll":1,"pitch":0,"attributes":{"face":{"value":"true","confidence":60}}}]}],"status":"success","usage":{"used":5,"remaining":95,"limit":100,"reset_time_text":"Sun, 14 April 2013 18:20:53 +0000","reset_time":1365963653}} 
```

这是我目前用来返回整个字符串的代码：

```
.done(function (result) {
    alert("Received response..");
    var resultObject = JSON.stringify(result);
    alert(resultObject);
}); 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T18:50:48.790

```
 .done(function (result) {
     if(result != null) {
        var uids = result.photos[0].tags[0].uids[0]; 
        var uid = uids.uid; 
        var confidence = uids.confidence; 

     } }); 
```

# ios - UISplitViewController：以编程方式使弹出控制器访问按钮出现在详细信息视图上

> ID：16002792
> 
> 赞同：0
> 
> 时间：2013-04-14T18:33:47.810
> 
> 标签：ios, ipad, uisplitviewcontroller

我不知道如何更准确地问这个问题。我有一个主/详细信息，并且正在以编程方式创建整个事情。我将 UISplitViewController 子类化并用两个控制器填充它，一切看起来都应该`splitViewController:shouldHideViewController:inOrientation`如此，直到我设置它以使其在纵向模式下返回 YES。

当我让主人隐藏在肖像和肖像颠倒时，正如预期的那样，它隐藏了。但是，我无法将“主”按钮添加到`splitViewController:willHideViewController:withBarButtonItem:forPopoverController`. 这可能是因为我对我应该如何完成这项任务有一个根本的误解。

我按照苹果的例子做了：

```
barButtonItem.title = NSLocalizedString(@"Master", @"Master");
[detailController.navigationItem setLeftBarButtonItem:barButtonItem animated:YES]; 
```

我没有收到任何错误，但也没有按钮。我推测这可能是因为我`detailController`在子类中保存的是 a`UINavigationController`而不是 a `UIViewController`。

非常感谢您对此的任何指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:50:53.430

写完后，我意识到在连接整个过程中有几个错误：

1.  `splitViewController:willHideViewController:withBarButtonItem:forPopoverController`真的希望您不仅要设置`barButtonItem`标题，还要将其添加到细节控制器的导航栏。

2.  如果您想以编程方式关闭弹出框，则必须将提供的弹出框存储在`splitViewController:willHideViewController:withBarButtonItem:forPopoverController`主视图中的某个位置。

因此，问题第一部分的答案是：

```
barButtonItem.title = NSLocalizedString(@"Master", @"Master");
[[detailController.topViewController navigationItem] setLeftBarButtonItem:barButtonItem animated:YES]; 
```

这让我找到了可以`UIBarButtonItem`在导航栏上设置 a 的 UIViewController。我敢肯定我可以直接在上面做这个，`UINavigationController`但没有立即看到如何做。

这个问题的第二部分，即未提出的部分，涉及在弹出框可见后如何处理它。同样，我需要细节控制器知道实际的弹出框是什么，以便可以将其关闭，所以在 中`splitViewController:willHideViewController:withBarButtonItem:forPopoverController`，我添加了如下代码：

```
[masterController.navigationItem topViewController].popoverController = pc; 
```

其中`pc`是传递给委托方法的参数值。然后，在我的主控制器中，我有一个`UITableView`和`didSelectRowAtIndexPath`，我只是这样做了：

```
if(popoverController)
    [popoverController dismissPopoverAnimated:YES]; 
```

这就是我今天在 iOS 学校学到的 :)

# magento - 在 magento 中显示交货时间

> ID：16002796
> 
> 赞同：2
> 
> 时间：2013-04-14T18:33:54.633
> 
> 标签：magento, magento-1.7

我想在基于 magento(1.7) 的购物车上显示产品的**交货时间**以及**IN STOCK 。**

例如：“在 2-3 个工作日内交付。”

Magento 社区版本中是否有任何此类选项可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:06:36.003

实现这一点的一种方法是向产品添加一个新属性，并提供所有不同的交付选项。

然后，您可以填充它并使用数据来更新前端存储。电子邮件等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-30T14:41:31.493

这将适用于常规产品。

```
<?php if ($qtyStock = (int)Mage::getModel('cataloginventory/stock_item')->loadByProduct($product)->getQty()>0):{?>
            <p class="availability in-stock">
    <span class="label"><?php echo $this->helper('catalog')->__('Availability:') ?></span>
    <span class="value"><?php echo $this->helper('catalog')->__('In stock') ?></span>
    <span class="value"><p>Delivery Time:</p>
    <div id="delivery_time"><p>Delivered in 2-3 business days.</p></div></span>
</p>
 <?php } else: { ?>
            <p class="availability out-of-stock">
    <span class="label"><?php echo $this->helper('catalog')->__('Availability:') ?></span>
    <span class="value"><?php echo $this->helper('catalog')->__('Out of stock') ?></span>
</p>
            <?php } endif; ?> 
```

# sql - SQL Select 使用 CHARINDEX 非常慢

> ID：16002797
> 
> 赞同：-2
> 
> 时间：2013-04-14T18:33:58.663
> 
> 标签：sql, sql-server, database

我正在使用 sql server 并且有一个包含 2 列的表
`myId varchar(80)`
`cchunk varchar(max)`

基本上它存储大量文本，这就是我需要它的原因`varchar(max)`。我的问题是当我做这样的查询时：

```
select *
from tbchunks
where
  (CHARINDEX('mystring1',tbchunks.cchunk)< CHARINDEX('mystring2',tbchunks.cchunk))
AND
  CHARINDEX('mystring2',tbchunks.cchunk) - CHARINDEX('mystring1',tbchunks.cchunk) <=10 
```

完成大约需要 3 秒，表块大约只有 500,000 条记录，从上述查询返回的数据最大在 0 到 800 之间

我在 myid 列上有非聚集索引，它有助于快速选择计数（*），但对上述查询没有帮助。

我尝试使用全文但速度很慢。我尝试将 cchunk 中的文本拆分为更小的部分并添加一个 id 列，该列将连接所有这些拆分的块，但最终得到一个包含 200 万条拆分文本块记录的表（我这样做是为了添加索引）但仍然查询甚至更慢。

**编辑：** 修改表以包含主键（int）创建的全文目录，使用“Accent Senstive=true”在我的表上的“cchunk”列上创建全文索引运行相同的上述查询，它最终需要 22 秒，但速度要慢得多

**更新** 感谢大家建议全文（@Aaron Bertrand 谢谢！），我将我的查询转换为此

SELECT * FROM tbchunksAS FT_TBL INNER JOIN CONTAINSTABLE(tbchunks, cchunk, '(mystring1 NEAR mystring2)') AS KEY_TBL ON FT_TBL.cID = KEY_TBL.[KEY]

顺便说一句，cID 是我稍后添加的主键。无论如何，我得到了 borad 结果，我注意到返回的 RANK 列越高，结果就越好。我的问题是 RANK 何时开始变得准确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:42:11.207

索引根本不会帮助 CHARINDEX。特定列上的索引只能快速找到索引字段中的值恰好是索引值的行。实际上，我很惊讶查询只需要 3 秒，因为它必须读取每一行四次（或至少两次）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:03:03.377

这里提出的想法很好，没有人能够真正解决我的问题，而是提供了有用的提示，引导我找到我愿意分享的解决方案。

使用全文确实是许多人提到的答案，但我设法将 Contains 与 Near 结合使用，因此它可以完全取代我当前的 sql 查询并提供惊人的速度。

包含（tbchunks，'NEAR（（mystring1，mystring2），3，TRUE）'）

# c# - 查找 System.Array 中是否存在任何元素，如果存在则从原始元素中删除

> ID：16002801
> 
> 赞同：0
> 
> 时间：2013-04-14T18:34:14.757
> 
> 标签：c#, arrays, string-comparison

我有三个 System.Array，其中基本上存储了 10 个字符的电话号码。定义是这样的：

```
private static System.Array objRowAValues;
private static System.Array objRowBValues;
private static System.Array objRowCValues; 
```

我这样做是因为我读取了一个包含许多单元格（大约 1 000 000 个）的巨大 Excel 文件，并且处理`List<string>`速度有点慢。稍后在我的代码中，我将 System.Array 更改为 a`List<string>`主要是因为我填充了一个 ListBox 元素。这些是列表的定义

```
private List<string> bd = new List<string>();
private List<string> bl = new List<string>();
private List<string> cm = new List<string>(); 
```

我想检查 objRowAValues 中的任何值是否存在于 objRowBValues 或 objRowCValues 中，如果存在则删除现有值，我该怎么做？我是 C# 的新手，这是我的第一步。

**编辑：这是我正在做的代码（仅相关部分）：**

```
private List<string> bd = new List<string>();
private static System.Array objRowAValues;

private List<string> bl = new List<string>();
private static System.Array objRowBValues;

private List<string> cm = new List<string>();
private static System.Array objRowCValues;

private List<string> pl = new List<string>(); 

private static Microsoft.Office.Interop.Excel.Application appExcel;

Excel.Application xlApp;
Excel.Workbook xlWorkBook;
Excel.Worksheet xlWorkSheet;
Excel.Range rngARowLast, rngBRowLast, rngCRowLast;

long lastACell, lastBCell, lastCCell, fullRow;

// this is the main method I use to load all three Excel files and fill System.Array and then convert to List<string>

private void btnCargarExcel_Click(object sender, EventArgs e)
    {
        if (this.openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            if (System.IO.File.Exists(openFileDialog1.FileName))
            {
                Stopwatch stopWatch = new Stopwatch();
                stopWatch.Start();
                Thread.Sleep(10000);

                filePath.Text = openFileDialog1.FileName.ToString();

                xlApp = new Microsoft.Office.Interop.Excel.Application();
                xlWorkBook = xlApp.Workbooks.Open(openFileDialog1.FileName, 0, true, 5, "", "", true,
                                                  Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false,
                                                  false, 0, true, 1, 0);
                xlWorkSheet = (Excel.Worksheet) xlWorkBook.Worksheets.get_Item(1);

                fullRow = xlWorkSheet.Rows.Count;
                lastACell = xlWorkSheet.Cells[fullRow, 1].End(Excel.XlDirection.xlUp).Row;
                rngARowLast = xlWorkSheet.get_Range("A1", "A" + lastACell);
                objRowAValues = (System.Array) rngARowLast.Cells.Value;

                foreach (object elem in objRowAValues) { bd.Add(cleanString(elem.ToString(), 10)); }

                nrosProcesados.Text = bd.Count().ToString();
                listBox1.DataSource = bd;

                xlWorkBook.Close(true, null, null);
                xlApp.Quit();

                releaseObject(xlWorkSheet);
                releaseObject(xlWorkBook);
                releaseObject(xlApp);

                stopWatch.Stop();

                TimeSpan ts = stopWatch.Elapsed;
                executiontime.Text =
                    String.Format("{0:00}:{1:00}:{2:00}.{3:00}", ts.Hours, ts.Minutes, ts.Seconds,
                                  ts.Milliseconds/10).ToString();
            }
            else
            {
                MessageBox.Show("No se pudo abrir el fichero!");
                System.Runtime.InteropServices.Marshal.ReleaseComObject(appExcel);
                appExcel = null;
                System.Windows.Forms.Application.Exit();
            }
        }
    }

    // This is the method where I clean the existent values from bd (the List where I should remove existent values on bl and existent values on cm
   private void btnClean_Click(object sender, EventArgs e)
    {
        pl = bd;
        Stopwatch stopWatch = new Stopwatch();
        stopWatch.Start();
        Thread.Sleep(10000);

        pl.RemoveAll(element => bl.Contains((element)));
        pl.RemoveAll(element => cm.Contains((element)));

        textBox2.Text = pl.Count.ToString();
        listBox4.DataSource = pl;

        stopWatch.Stop();

        TimeSpan ts = stopWatch.Elapsed;
        textBox6.Text =
            String.Format("{0:00}:{1:00}:{2:00}.{3:00}", ts.Hours, ts.Minutes, ts.Seconds,
                          ts.Milliseconds / 10).ToString();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:49:23.737

实际上有两个问题：

1.  如何以性能有效的方式找到（巨大的）集合中存在的值？
2.  如何从正在枚举的集合中删除值？

对于第一个，我建议使用`HashSet`, 因为`Contains`它的操作需要 O(1) 而不是 O(n) 的`List`/ `Array`。

第二个有点棘手 - 您可以遍历其余部分，而不是迭代第一个集合，然后尝试从第一个集合中删除这些项目。

在 的情况下`Hashset`，`Remove`包括`Contains`逻辑和返回`bool`以指示值是否在集合中，因此它也更容易`HashSet`用于第一个集合。

所以它应该看起来像这样：

```
 var a = new HashSet<string>();

    // OR, if you have existing array:
    // var a = new HashSet<string>(myArray);

    var b = new HashSet<string>();
    var c = new HashSet<string>();

    // ... some filling logic here ...

    foreach (var item in b)
    {
        a.Remove(item);
    }

    foreach (var item in c)
    {
        a.Remove(item);
    } 
```

之后，您可以使用`ToList()`将值绑定到您的控件 - 它将创建具有所有未删除值的新数组：

```
 List<string> aList = a.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:46:00.833

在对 OP 的评论的基础上，您需要执行以下操作：

```
...make your lists...
bd.removeAll(phoneNum => bl.contains(phoneNum) || cm.contains(phoneNum)); 
```

请注意，您*不*应该使用`arrays`. 您*应该*改为使用`List<string>`上述所有三个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T18:48:53.603

假设它们是 List 并且您只想丢弃 中的元素`bd`，因为您没有明确说明应该从哪些列表中删除，我会这样做：

```
bd.RemoveAll(element => bl.Contains((element)));
bd.RemoveAll(element => cm.Contains((element))); 
```

或者你可以尝试使用`HashSet`

```
private List<string> hsA = new List<string>();
private List<string> hsB = new List<string>();
private List<string> hsC = new List<string>(); 
```

并尝试使用相同的方法：

```
hsA.RemoveWhere(element => hsB.Contains(element) || hsC.Contains(element)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T18:49:11.377

首先，如果您知道有多少行，请尝试使用适当的最大大小初始化 List。所以它不必不断地调整底层数组的大小。或者使用类型保存数组`string[]`来为您节省一些转换等的麻烦。

如果要过滤 RowAValues 列表，可以使用 Linq 进行：

```
rowAValues = rowAValues.Where(x => !rowBValues.Contains(x) 
                                && !rowCValues.Contains(x))
                       .ToArray() 
```

如果您当然使用列表，则将 ToArray 替换为 ToList。

请记住，迭代数千个项目是相当性能密集型的。如果检查多次执行，请考虑`HashSet<string>`对行 b+c 使用 a。代码保持不变，但查找速度会很快。

LINQ（语言集成查询）的一个很好的参考是[http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

# php - 如果（查询1值=查询2值）{}否则{}

> ID：16002803
> 
> 赞同：-2
> 
> 时间：2013-04-14T18:34:40.283
> 
> 标签：php, mysql, equals

所以，我想知道如何在 if 语句中将一个查询的结果与另一个查询的结果进行比较。像这样：

```
$team = mysql_query("SELECT teamId FROM team WHERE teamName='$teamName'");
$tplayer = mysql_query("SELECT teamId FROM player WHERE playerName='$playerName'");

if($team==$lplayer){
//Do something
}
else{
//Do something else
} 
```

这不起作用......为什么？

现在，为什么这不起作用：

```
$tleague = mysql_query("SELECT teamId from team
    WHERE leagueId=(SELECT leagueId FROM league WHERE leagueName='$leagueName')");
$tplayer = mysql_query("SELECT teamId FROM player WHERE playerName='$playerName'");

$row1 = mysql_fetch_array($tleague);
$row2 = mysql_fetch_array($tplayer);

if($row1['teamId']==$row2['teamId']){}
else{} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:38:16.803

您需要`mysql_fetch_assoc()`在查询上使用，并比较返回的值。像下面这样的东西。您要比较的是两个返回的资源对象：

```
$team = mysql_query("SELECT teamId FROM team WHERE teamName='$teamName'");
$tplayer = mysql_query("SELECT teamId FROM player WHERE playerName='$playerName'");
$t = mysql_fetch_assoc($team);
$p = mysql_fetch_assoc($tplayer);
if($t['teamId'] ==$p['teamId']){
//Do something
}
else{
//Do something else
} 
```

**但是，您不应该使用`mysql_*`方法，而是使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php) // [Tutorial](http://codular.com/php-mysqli)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:39:15.427

您没有从查询中获取任何结果。做类似的事情

```
$team_result = mysql_fetch_array($team);
$tplayer_result = mysql_fetch_array($tplayer); 
```

然后使用获取的结果来制作你的`if`条件

```
if($team_result['teamId'] == $tplayer_result['teamId'])
{
    //do something
} 
```

也请停止使用`mysql`，因为它已被弃用，切换到`PDO`或`mysqli`用于新项目

`Update`

新查询有错误。为什么不使用[联接](http://dev.mysql.com/doc/refman/5.0/en/join.html)

```
$tleague = mysql_query("SELECT a.`teamId` from `team` a LEFT JOIN `league` b ON a.`leagueId` = b.`leagueId` WHERE b.`leagueName` = '$leagueName'");
$tplayer = mysql_query("SELECT `teamId` FROM `player` WHERE `playerName`='$playerName'");

$row1 = mysql_fetch_array($tleague);
$row2 = mysql_fetch_array($tplayer);

if($row1['teamId']==$row2['teamId'])
{
// do something
}
else
{  
// do something else
} 
```

`UPDATED AGAIN`

我将所有查询合并为一个，并将数据封装在查询`'".$playerName."'`中`'".$leagueName."'`

```
$query = mysql_query("SELECT a.`teamId` from `team` a LEFT JOIN `league` b ON a.`leagueId` = b.`leagueId` LEFT JOIN `player` c ON b.`teamId` = c.`teamId` WHERE b.`leagueName` = '".$leagueName."' and c.`playerName`= '".$playerName."'");
if($row = mysql_fetch_array($query))
{
    echo 'Found: ' . $row['teamId'];
}
else
{ 
    echo 'Not Found.';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T18:37:39.263

那样做

```
 $team = mysql_query("SELECT teamId FROM team WHERE teamName='$teamName'");
   $tplayer = mysql_query("SELECT teamId FROM player WHERE playerName='$playerName'");
   $row1 = mysql_fetch_array($team);
   $row2 = mysql_fetch_array($tplayer);

if($row1['teamId']==$row2['teamId']){
 //Do something
}
 else{
 //Do something else
} 
```

**编辑：**

在您的第二次编辑中，您的问题在于查询本身。

试试这个

```
 $tleague = mysql_query("SELECT t.teamId from team inner join league l On t.leagueId = l.leagueId  
 WHERE t.leagueName='".$leagueName."' "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T18:38:24.613

它不起作用，因为它不是查询的结果。您需要将 mysql_result 传递给变量，即：

```
$result1 = mysql_result($team, 0);
$result2 = mysql_result($tplayer, 0);
if ($result == $result2) { ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T18:38:54.263

像这样试试

```
$teamQuery = mysql_query("SELECT teamId FROM team WHERE teamName='$teamName'");
$lplayerQuery = mysql_query("SELECT teamId FROM player WHERE playerName='$playerName'");

$team = mysql_fetch_assoc($teamQuery);
$lplayer = mysql_fetch_assoc($lplayerQuery);

if($team['teamId']==$lplayer['teamId']){
//Do something
}
else{
//Do something else
} 
```

# ios - 从后台线程调用时 iPad 延迟

> ID：16002804
> 
> 赞同：0
> 
> 时间：2013-04-14T18:34:44.153
> 
> 标签：ios, objective-c, ipad

我正在将我的 iPhone 应用程序转换为 iPad，但我遇到了转换问题。我有一个创建一些缩略图的背景线程。

问题似乎是应用程序循环通过数组并输出所有项目，但似乎只有最后一个项目正在加载 UIButton 文本。在所有之前的按钮显示文本之前，有 5-15 秒的延迟。

```
UIImage *tmp = [self thumbnailImage:[effect objectAtIndex:0] thumbnailType:@"category"];

for (id effect in effectArray) {

    UIImage *tmp = [self thumbnailImage:[effect objectAtIndex:0] thumbnailType:@"category"];

    dispatch_async(dispatch_get_main_queue(), ^{

        UIView *effectView = [[UIView alloc] initWithFrame:CGRectMake(item_x_axis, current_row_height, item_width, item_height)];

        UIImageView *imagepreview = [[UIImageView alloc] init];
        [imagepreview setFrame:CGRectMake(20, 20, 100, 100)];
        [imagepreview setImage:tmp];
        imagepreview.contentMode = UIViewContentModeScaleAspectFit;
        imagepreview.layer.shadowColor = [UIColor blackColor].CGColor;
        imagepreview.layer.shadowOffset = CGSizeMake(0, 1);
        imagepreview.layer.shadowOpacity = 1;
        imagepreview.layer.shadowRadius = 2.0;
        imagepreview.clipsToBounds = NO;
        [effectView addSubview:imagepreview];

        if([[effect objectAtIndex:3]  isEqualToString:@"iap"]){

            UIImageView *buttonPlus = [[UIImageView alloc] init];
            [buttonPlus setFrame:CGRectMake(54, 66, 23, 23)];
            [buttonPlus setImage:[UIImage imageNamed:@"ButtonPlus.png"]];
            [effectView addSubview:buttonPlus];

        }

        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        [button addTarget:self action:NSSelectorFromString([effect objectAtIndex:1]) forControlEvents:UIControlEventTouchDown];
        [button setTitle:[effect objectAtIndex:2] forState:UIControlStateNormal];
        button.frame = CGRectMake(0, 0, item_width, item_height);
        button.titleLabel.font = [UIFont systemFontOfSize:11];
        [button setTitleShadowColor:[UIColor blackColor] forState:UIControlStateNormal];
        [button.titleLabel setShadowOffset:CGSizeMake(1.0f, 1.0f)];
        [button setTitleEdgeInsets:UIEdgeInsetsMake(120, 0, 0.0, 0.0)];
        [effectView addSubview:button];

        [self.viewScrollCategories addSubview:effectView];

        button = nil;

    });

    if(current_items_per_row < 3){
        current_items_per_row++;
        item_x_axis = item_x_axis + item_width;
    }else {
        current_row_height = current_row_height + item_height;
        current_items_per_row = 1;
        item_x_axis = 0;
    }

} 
```

知道如何解决这个问题吗？它似乎在 iPhone 上运行良好。

**编辑**

这是调用后台线程的代码（缩短）

```
- (void)imagePickerController:( UIImagePickerController *)picker didFinishPickingMediaWithInfo: (NSDictionary *)info {

//[self generatingThumbnailMessageShow];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [self loadAllEffects];
    dispatch_async(dispatch_get_main_queue(), ^{
        [self generatingThumbnailMessageHide];
    });
});

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:42:58.553

好吧，您*要求*延迟`dispatch_async(dispatch_get_main_queue()...`. 该代码的意思是“请在我当前代码完成运行后的某个时间，只要有时间就这样做。” 一旦你这么说，你基本上是在说你不在乎这段代码什么时候运行。您希望很快就会有一段时间，但您已经离开运行时来处理细节。

所以也许正是这个“希望”才是问题所在。设备处理器的体系结构不同，设备的线程模型可能会改变设备响应这些延迟请求堆积的方式。

我完全不清楚您要在此代码中完成什么（抱歉，`tl:dr`），但在其中使用延迟性能以及您抱怨“5-15 秒延迟”似乎是以某种方式在一起...

编辑：好的，我现在看到您的代码正在后台运行，并且您正在使用`dispatch_async`单步到主线程以修改界面。因此，问题可能*不*在于您引用的代码，而在于您用于管理后台线程的代码。

另一个编辑：这里只是一个疯狂而疯狂的想法。如果图像处理需要时间，为什么不进行*所有*图像处理，然后在主线程上更新*一次*界面？我的意思是，你正在这样做：

```
for (id effect in effectArray) {
    UIImage *tmp = // ...
    dispatch_async(dispatch_get_main_queue(), ^{
        // ...
        [imagepreview setImage:tmp]; 
```

所以你每次通过循环都重复回到主线程。为什么不试试这个：

```
dispatch_async(dispatch_get_main_queue(), ^{
    for (id effect in effectArray) {
        UIImage *tmp = // ...
        // ...
        [imagepreview setImage:tmp]; 
```

现在你只是回到主线程*一次*。图像处理过程中会有延迟，但界面应该只是更新，badda bing badda boom（技术编程术语）。

# data-binding - 绑定到只有 get 方法的属性

> ID：16002808
> 
> 赞同：0
> 
> 时间：2013-04-14T18:34:55.200
> 
> 标签：data-binding, winrt-xaml

我对 WinRT 中的绑定有疑问。我有一个像这样的视图模型：

```
 public class MainPageViewModel : INotifyPropertyChanged 
{
    private ObservableCollection<Vehicle> _vehicles = new ObservableCollection<Vehicle>();
    public ObservableCollection<Vehicle> Vehicles
    {
        get { return _vehicles; }
        set { _vehicles = value; }
    } 
```

而且我还有一些属性可以从这个主列表中获取值，例如

```
 public int GetType1Vehicles
    {
        get { return Vehicles.Where(x => x.Type == Type1).Count(); }
    }

    public int TotalVehicles
    {
        get { return Vehicles.Count(); }
    } 
```

我将一个 UI 文本框绑定到“GetType1Vehicles”，将另一个文本机器人绑定到“TotalVehicles”。问题是当我更新车辆列表时，所有车辆的 ListView 都正确更新，但 Total 和 Type 没有。我做错了什么？任何人都可以帮助我吗？谢谢！

更新我找到了一个解决方法，但我不确定这是最好的方法。每次我从列表中更改一些时，手动调用方法：

```
RaisePropertyChanged("GetType1Vehicles");
RaisePropertyChanged("TotalVehicles"); 
```

是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:05:02.263

大卫是对的，为什么这个 TotalVehicles 财产？

使用 ObservableCollection，您不应该调用 Count() 方法，只需使用**Count 属性**。如果您只想计算具有特定值的项目，而不是集合的大小，则 Count 方法很有用，这是属性的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:32:52.063

您是正确的，因为您需要手动调用 RaisePropertyChanged。无论如何，当您可以绑定到“Vehicles.Count”时，为什么还要拥有 TotalVehicles 属性？

# python - 如何制作处理繁重计算负载的可交互程序？

> ID：16002813
> 
> 赞同：1
> 
> 时间：2013-04-14T18:35:07.323
> 
> 标签：python, tkinter

我正在尝试制作一个以迭代方式处理繁重计算负载的程序。我希望能够中断程序并重新启动。

我使用 Tkinter 构建了一个简单的 GUI，以允许使用“after_cancel”中断迭代循环。这在计算负载较低的测试中效果很好，但在计算负载较高的情况下，程序不会响应旨在执行“after_cancel”的按钮单击。

为简单起见，我已将程序替换为斐波那契。效果是一样的（一段时间后）。

我该如何设计它以使“停止”按钮保持响应？

这是代码：

```
from tkinter import *
import time

def fibonacci(n):
    if n == 0:
        return 0
    if n == 1:
        return 1
    return fibonacci(n - 1) + fibonacci(n - 2)

class App:

    def __init__(self, master):

        self.frame = Frame(master)
        self.frame.pack(expand=1, fill=BOTH)
        self.master = master

        self.quitter = Button(self.frame, text="Quit", fg="red", command=self.master.destroy)
        self.quitter.pack(side=LEFT)

        self.starter = Button(self.frame, text="Start", command=self.start)
        self.starter.pack(side=LEFT)

        self.stopper = Button(self.frame, text="Stop", command=self.stop)
        self.stopper.pack(side=LEFT)

        self.counter = 0

    def start(self):
        print((fibonacci(self.counter)))
        self.counter += 1
        self.afterid = self.master.after(1, self.start)

    def stop(self):
        print('Stop')
        self.master.after_cancel(self.afterid)

root = Tk()
app = App(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T19:56:19.507

如果您从小部件回调中调用您的`fibonacci`函数，它将在您的 GUI 线程上运行。为避免冻结您的 GUI，请`fibonacci`在单独的线程上运行并设置一个标志以停止其执行：

```
from tkinter import *
import threading
import time

def fibonacci(n):
    if n == 0:
        return 0
    if n == 1:
        return 1
    return fibonacci(n-1) + fibonacci(n-2)

class App:

    def __init__(self, master):
        self.frame = Frame(master)
        self.frame.pack(expand=1, fill=BOTH)
        self.master = master

        self.quitter = Button(self.frame, text="Quit", fg="red", command=self.master.destroy)
        self.quitter.pack(side=LEFT)

        self.starter = Button(self.frame, text="Start", command=self.start)
        self.starter.pack(side=LEFT)

        self.stopper = Button(self.frame, text="Stop", command=self.stop)
        self.stopper.pack(side=LEFT)

        self.counter = 0
        self.running = False

    def start(self):
        self.running = True
        threading.Thread(target=self.start_fibonacci).start()

    def start_fibonacci(self):
        while self.running:
            print(fibonacci(self.counter))
            self.counter += 1
            time.sleep(1)

    def stop(self):
        self.running = False
        print('Stop')

if __name__ == "__main__":
    root = Tk()
    root.title("Fibonacci")
    app = App(root)
    root.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:50:40.300

在 mainprog 函数中，您计算​​一次斐波那契，然后将警报回调注册为 self.mainprog，在 1 毫秒后调用。换句话说，每次调用斐波那契函数之间都有一个间隔时间。并且您的 stopprog 按钮只能在控制权空闲时在间隔时间内响应您。

在高计算负载下，您的任务始终保留执行权（在一次斐波那契函数调用中）。结果，没有按钮可以响应您。

您最好以多线程或多进程的方式实现您的品味（例如斐波那契计算）以避免此问题。

# iphone - 在 iphone 的 css 中居中图像

> ID：16002817
> 
> 赞同：1
> 
> 时间：2013-04-14T18:35:32.573
> 
> 标签：iphone, css, centering

徽标：San-Francisco-Family-Photographer.com

在 iPhone 上，图像不会居中。

```
 .header-image #header #title-area {
    background: url("http://www.san-francisco-family-photographer.com/wp-content/uploads/2013/04/Joey-Chandler-Photographer-square.png") no-repeat scroll center center transparent;
    background-position: center;
    height: 130px!important;
    width: 180px!important;
}

.header-image #title-area, .header-image #title, .header-image #title a {
    display: block;
    margin-left: auto;
    margin-right: auto;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:45:55.643

你可以把它放在一个 div 中并居中。

```
div#image {
    background: #282;
    width:130px;
    height:130px;
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
    margin:auto;
} 
```

# c++ - C ++读取带空格的字符串

> ID：16002833
> 
> 赞同：2
> 
> 时间：2013-04-14T18:37:40.460
> 
> 标签：c++, istream

我有这样的文件：

```
59 137 New York
137 362 Syracuse
216 131 New Jersey
...
..
. 
```

我想把它读成一个结构：X - Y - 一个城市的名字

```
 char city[100];
  int x , y;
  f.open("map.txt");
  f >> x >> y >> city;
  while (!f.fail()) {
    f >> x >> y >> city;
  }
  f.close(); 
```

问题是，那个城市只能读取到下一个空间，所以从纽约它只能读取 New。我应该如何以某种简单而聪明的方式阅读整行的其余部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:44:36.403

你可以这样做：

```
 f.open("map.txt");
  string city;
  int x , y;
  f >> x >> y;
  getline(f,city);

  while (!f.fail()) {
  f >> x >> y;
  getline(f,city);
  }
  f.close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T18:45:23.907

您的文件格式似乎暗示城市名称以*行尾结尾*，而不是*空格*。

您可以使用阅读该表格[`getline`](http://en.cppreference.com/w/cpp/io/basic_istream/getline)

```
 char city[100];
  int x , y;
  f.open("map.txt");
  while ( f ) {
      f >> x >> y;         
      f.getline(city, 100); 
  }
  f.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T18:45:32.893

使用 getline(f, city) 作为城市。所以，你有 f >> x >> y; getline(f, 城市);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T19:02:44.100

此代码正确读取空格并处理文件结尾。我认为没有其他答案可以做到这一点

```
while ((f >> x >> y).getline(city, 100))
{
} 
```

有关如何正确测试文件结尾的更多信息，请参阅[此内容。](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)

当然，您应该`std::string`像其他人所说的那样以简单的方式做事。

# php - php代码中出现意外的T变量，无法弄清楚原因

> ID：16002834
> 
> 赞同：1
> 
> 时间：2013-04-14T18:37:50.907
> 
> 标签：php, syntax-error

我看不到我的错误来自哪里，我检查了分号并且看不到任何缺失。我对php相当陌生，非常感谢您的帮助。实际错误如下：

> 解析错误：语法错误，第 54 行 /home/sam/public_html/query.php 中的意外 T_VARIABLE

以下是第 54 行：

```
$sql = "UPDATE Users SET Datecreated='".$date."' WHERE Username='".$usernamec."'"; 
```

这是完整的代码：

```
<?php  session_start();

include 'connect.php';

echo "Hello World!";

echo '$_SESSION[page]';

$_SESSION['loggedon']=12345;
$username=$_POST['username'];
$password=$_POST['password'];

$sql = "SELECT * FROM 'Users' WHERE 'Username'='".$username."'";
$result = @mysql_query( $sql );
while ($row= @mysql_fetch_assoc($result))
    {
    if (($username=$row['Username'])&&($password=$row['Password']))
    {
        $_SESSION['loggedon']=$row['AccessLevel'];
        $_SESSION['userid']=$row['UserID'];}}

if ($_SESSION['loggedon']==12345)
    {
    $sql = "SELECT * FROM 'RedundantUsers' WHERE 'Username'='".$username."'";
    $result = @mysql_query( $sql );
    while ($row= @mysql_fetch_assoc($result))
        {   
            $_SESSION['loggedon']=$row['AccessLevel'];
            $_SESSION['userid']=$row['UserID'];

            $userid    =$row['UserID'];
            $forename  =$row['Forename'];
            $surname   =$row['Surname'];
            $email     =$row['Email'];
            $usernamec =$row['Username'];
            $access    =$row['AccessLevel'];

            $sql = "INSERT INTO 'Users' ('UserID', 'Forename', 'Surname', 'Email', 'Username', 'AccessLevel')
                    VALUES ('$userid', '$forename', '$surname', '$email', '$usernamec', '$access')";

                if (!@mysql_query($sql))    
                    {
                    die('Error: ' . mysql_error());
                        }
               $sql = "DELETE * FROM 'RedundantUsers' WHERE 'Username'='".$usernamec."'"; }}

    date_default_timezone_set('UTC');

        $date = date("Y-m-d H:i:s");    

            $sql = "UPDATE 'Users' SET 'Datecreated'='".$date."' WHERE 'Username'='".$usernamec."'";

                if (!@mysql_query($sql))    
                    {
                    die('Error: ' . mysql_error());
                        }

                    echo $_SESSION['loggedon']; 

header('Location: /'.$_SESSION['page']);

?> 
```

万一它有帮助，这里是connect.php：

```
<?php
$dbhost = '*****';
$dbuser = '*****'; 
$dbpass = '*****';  
$conn = @mysql_connect($dbhost, $dbuser, $dbpass) or die ('Error connecting to local MySQL')
$dbname = '******';
@mysql_select_db($dbname);      
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:41:12.750

在第 54 行（发生错误的地方）

改变

`echo $_SESSION[loggedon];`

到

`echo $_SESSION['loggedon'];`

这意味着您忘记包含`'`在会话值中。除非值是已定义的常量，否则应始终包含单引号。

**更新**

* * *

```
<?php  session_start();

include 'connect.php';

echo "Hello World!";

echo $_SESSION['page'];

    $_SESSION['loggedon']=12345;
    $username=$_POST['username'];
    $password=$_POST['password'];

    $sql = "SELECT * FROM Users WHERE Username='".$username."'";
    $result = mysql_query($sql) or die(mysql_error());
    while ($row= mysql_fetch_array($result))
        {

        if (($username=$row['Username'])&&($password=$row['Password']))
        {
            $_SESSION['loggedon']=$row['AccessLevel'];
            $_SESSION['userid']=$row['UserID'];}}

    if ($_SESSION['loggedon']==12345)
        {
        $sql = "SELECT * FROM RedundantUsers WHERE Username='".$username."'";
        $result = mysql_query($sql);
        while ($row= mysql_fetch_array($result))
            {   
                $_SESSION['loggedon']=$row['AccessLevel'];
                $_SESSION['userid']=$row['UserID'];

                $userid    =$row['UserID'];
                $forename  =$row['Forename'];
                $surname   =$row['Surname'];
                $email     =$row['Email'];
                $usernamec =$row['Username'];
                $access    =$row['AccessLevel'];

                $sql = "INSERT INTO Users (UserID, Forename, Surname, Email, Username, AccessLevel)
                        VALUES ('$userid', '$forename', '$surname', '$email', '$usernamec', '$access')";

                    if (!mysql_query($sql))    
                        {
                        die('Error: ' . mysql_error());
                            }
                   $sql = "DELETE * FROM RedundantUsers WHERE Username='".$usernamec."'"; }}

        date_default_timezone_set('UTC');

            $date = date("Y-m-d H:i:s");  
            global $usernamec;          

                $sql = "UPDATE Users SET Datecreated='".$date."' WHERE Username='".$usernamec."'";

                    if (!@mysql_query($sql))    
                        {
                        die('Error: ' . mysql_error());
                            }

                        echo $_SESSION[loggedon];   

    header('Location: /'.$_SESSION[page]);

    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:50:41.767

这里有几个明显的问题：

1.  您正在使用`mysql_*`方法，而应该使用 MySQLi。
2.  你不能确保你的 SQL 查询中包含的字符串已经过清理，因此为 SQL 注入敞开了大门。
3.  您的数组键应该是字符串，这意味着将它们放在单引号中。
4.  从`mysql_fetch_array`to切换`mysql_fetch_assoc`将返回一半的数据量，但仍然可以正常工作 - 无需无缘无故增加内存使用量。
5.  使用反引号 (`) 来表示您的表名和列名，这有助于保持 SQL 整洁，但也可以避免与保留字等的任何潜在冲突。

所以最终是这样的：

```
$row[UserID]; 
```

应该变成：

```
$row['UserID']; 
```

与您在代码中使用的位置`$_SESSION`或`$_POST`其他数组相同。

另外，一定要看看[这个关于 MySQLi 的教程](http://codular.com/php-mysqli)，尤其是关于转义字符串的部分！

**编辑**：

您在语句中使用声明`if`，而不是比较：

```
if (($username=$row[Username])&&($password=$row[Password])) 
```

应该：

```
if (($username==$row[Username])&&($password==$row[Password])) 
```

仔细检查你的所有`if`陈述。

# php - 检查行是否存在

> ID：16002837
> 
> 赞同：0
> 
> 时间：2013-04-14T18:38:00.430
> 
> 标签：php, mysql

我有一个表单，提交后，数据将插入三个表（用户、旅程、user_journey 表）。在插入数据之前，我想检查用户表中是否已经存在该用户。如果没有，那么没有问题，用户将被插入到用户表中，但是，如果用户已经存在于用户表中，我不想再次添加用户。我想获取用户的 user_id 并插入第三个表（user_journey）。

目前，当我提交表单时，即使用户已经存在于表中，用户也会被插入到用户表中。

我不确定我检查用户是否存在的方式是否正确以及我获取 user_id 的方式。任何意见，将不胜感激

```
$query = $db->query("SELECT COUNT(*) FROM user WHERE facebook_id = '.$hdnFacebookId.'");

        //$query->execute();
        //$countRows = $query->rowCount();//return number of rows
        //check to see if user is already in the database

        if  ($query->fetchColumn() > 0)
        {
            if ($oneWay)
            {
                $query_journey = $db->prepare("INSERT INTO journey
                (from_destination,to_destination,journey_type,depart_date,depart_time,seats_available,journey_message,user_type)
                VALUES('$pjFrom','$pjTo','$radioJourneyType', STR_TO_DATE('$departDate','%d/%m/%Y'),'$newDepTime','$seatcounter','$textareanotes','$radUserType')");
            }
            else
            {
                $query_journey = $db->prepare("INSERT INTO journey
                (from_destination,to_destination,journey_type,depart_date,depart_time,return_date,return_time,seats_available,journey_message,user_type)
                VALUES('$pjFrom','$pjTo','$radioJourneyType', STR_TO_DATE('$departDate','%d/%m/%Y'),'$newDepTime',STR_TO_DATE('$returnDate','%d/%m/%Y'),'$newRetTime ','$seatcounter','$textareanotes','$radUserType')");
            }
            $user_query = $db->prepare("SELECT user_id FROM user WHERE facebook_id = '$hdnFacebookId'");
            $result = $user_query->execute();
            $user_query_result = $user_query->fetch(PDO::FETCH_ASSOC);

            $query_journey->execute();//EXECUTE QUERY

            $lastJourneyID = $db->lastInsertId();
            $queryUserJourney = $db->prepare("INSERT INTO user_journey
                                (journey_id,user_id)
                                VALUES('$lastJourneyID','$user_query_result')");
            $queryUserJourney->execute();//EXECUTE QUERY

            //include('index.php');
        }
        else //insert user
        {
            //if $oneWay true, then omit $returnDate and $returnTime
            if ($oneWay)
            {
                $query = $db->prepare("INSERT INTO journey
                (from_destination,to_destination,journey_type,depart_date,depart_time,seats_available,journey_message,user_type)
                VALUES('$pjFrom','$pjTo','$radioJourneyType', STR_TO_DATE('$departDate','%d/%m/%Y'),'$newDepTime','$seatcounter','$textareanotes','$radUserType')");
            }
            else
            {
                $query = $db->prepare("INSERT INTO journey
                (from_destination,to_destination,journey_type,depart_date,depart_time,return_date,return_time,seats_available,journey_message,user_type)
                VALUES('$pjFrom','$pjTo','$radioJourneyType', STR_TO_DATE('$departDate','%d/%m/%Y'),'$newDepTime',STR_TO_DATE('$returnDate','%d/%m/%Y'),'$newRetTime ','$seatcounter','$textareanotes','$radUserType')");
            }
            $queryfb = $db->prepare("INSERT INTO user
                (facebook_id,facebook_username,facebook_first_name,facebook_last_name,facebook_image,facebook_link)
                VALUES('$hdnFacebookId','$hdnUsername','$hdnFirstName','$hdnLastName','$hdnFacebookImg','$hdnFacebookUrl')");

            $query->execute();
            $lastUserID = $db->lastInsertId();
            $queryfb->execute();
            $lastJourneyID = $db->lastInsertId();
            $queryUserJourney = $db->prepare("INSERT INTO user_journey
                                (user_id,journey_id)
                                VALUES('$lastJourneyID','$lastUserID')");
            $queryUserJourney->execute();

        } 
```

更新

```
function userExists($db, $hdnFacebookId)
        {
            $userQuery = "SELECT * FROM user WHERE facebook_id = :user;";
            $stmt = $db->prepare($userQuery);
            $stmt->execute(array(':user'=>$hdnFacebookId));
            $result = $stmt->fetch(PDO::FETCH_ASSOC);
            if($result)
            {
                return true;
            }
            return false;
        }

        $userExists = userExists($db,$hdnFacebookId);
        if($userExists)
        {
            //don't insert user
            //get user's id from database
            $user_query = $db->prepare("SELECT * FROM user WHERE facebook_id = '$hdnFacebookId'");
            $result = $user_query->execute();
            $user_query_result = $user_query->fetch(PDO::FETCH_ASSOC);
            $userID = $user_query_result['user_id'];
            $query_journey->execute();//EXECUTE QUERY
            $lastJourneyID = $db->lastInsertId();
            $queryUserJourney = $db->prepare("INSERT INTO user_journey
                                (journey_id,user_id)
                                VALUES('$lastJourneyID','$userID')");
            $queryUserJourney->execute();//EXECUTE QUERY
        }
        else
        {
            //insert user
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:41:16.013

典型的“检查用户是否存在”：

```
function userExists($db, $user)
{
    $userQuery = "SELECT * FROM users u WHERE u.user=:user;";
    $stmt = $db->prepare($userQuery);
    $stmt->execute(array(':user' => $user));
    $result = $stmt->fetch(PDO::FETCH_ASSOC);
    if($result)
    {
         return true;
    }
    return false;
} 
```

所以你可以做类似的事情

```
$user = isset($_POST['user']) ? $_POST['user'] : "Unknown";
$userExists = userExists($db, $user);
if($userExists)
{
    // Don't insert
]
else
{
    // Insert the user.
} 
```

# iphone - 带有超过 9 个单选按钮的 Opera mini 表单出现问题

> ID：16002842
> 
> 赞同：0
> 
> 时间：2013-04-14T18:38:38.150
> 
> 标签：iphone, html, radio-button, opera, opera-mini

我在 iphone 上使用 opera mini 打开一个页面，其中一个表单中有超过 9 个选项，每个选项都有一个单选按钮。我目前面临的问题是我无法选择第 9 个以外的任何选项。有什么建议么？

```
<form>
<input id="min1" type="radio" name="operator1" value="min1"/></br>
<input id="min2" type="radio" name="operator1" value="min2"/></br>
<input id="min3" type="radio" name="operator1" value="min3"/></br>
<input id="min4" type="radio" name="operator1" value="min4"/></br>
<input id="min5" type="radio" name="operator1" value="min5"/></br>
<input id="min6" type="radio" name="operator1" value="min6"/></br>
<input id="min7" type="radio" name="operator1" value="min7"/></br>
<input id="min8" type="radio" name="operator1" value="min8"/></br>
<input id="min9" type="radio" name="operator1" value="min9"/></br>
<input id="min10" type="radio" name="operator1" value="min10"/></br>

cannot select any option beyond this.

<input id="min11" type="radio" name="operator1" value="min11"/></br>
<input id="min12" type="radio" name="operator1" value="min12"/></br>
<input id="min13" type="radio" name="operator1" value="min13"/></br>
<input id="min14" type="radio" name="operator1" value="min14"/></br>
<input id="min15" type="radio" name="operator1" value="min15"/></br>
<input id="min16" type="radio" name="operator1" value="min16"/></br>
<input id="min17" type="radio" name="operator1" value="min17"/></br>
<input id="min18" type="radio" name="operator1" value="min18"/></br>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:31:07.577

您是否在动态生成列表？

我能够用 jsfiddle 重现问题，它动态创建输出：http: [//jsfiddle.net/rHpQ7/3/embedded/result/](http://jsfiddle.net/rHpQ7/3/embedded/result/)

但我无法用静态页面重现该问题：http: [//fraamba.ch/test.html](http://framba.ch/test.html)

Opera Mini 对动态内容的支持不好，这一直是个问题。你能做的最好的就是`<body>`提前给出一个高度，比如`style="height:800px"`如果你认为你需要那么多。抱歉，这不是一个答案，但opera mini 并不意味着处理动态内容。

# ruby-on-rails - 建立一个安全的匿名上传者

> ID：16002846
> 
> 赞同：1
> 
> 时间：2013-04-14T18:38:52.137
> 
> 标签：ruby-on-rails, security, amazon-s3

我想建立一个网站，人们可以在其中通过 rails 应用程序将文件上传到我的 S3 存储桶。我希望对上传进行加密，以便我不知道上传的内容，并且我只希望用户拥有解密它的密钥。

有人可以给我一些关于如何去做这个或实现这个的方法的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:46:18.730

Lichtamberg is right, the best and most secure way would be for the user to do it clientside. Perhaps you could tell them what encryption types are accepted (such as GPG) and provide instructions for doing so, or recommend tools that might make it easier.

You could probably enforce this in your code by checking whether an uploaded file is encrypted, and rejecting it if not. The check would be similar to an image upload feature that rejects non-image files, for instance.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:47:27.190

您只能在本地对其进行加密，服务器端（甚至是 ISP）上的所有其他内容都可以以某种方式被操纵

# ruby-on-rails - 无法使用 Ckeditor、Paperclip 和 Ruby on Rails 向图片模型添加参数

> ID：16002849
> 
> 赞同：3
> 
> 时间：2013-04-14T18:39:00.393
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem, ckeditor

我有一个这样的CKeditor图片模型：

```
class Ckeditor::Picture < Ckeditor::Asset
  before_save :set_vars
  has_attached_file :data,
                :url  => "/ckeditor_assets/pictures/:id/:style_:basename.:extension",
                :path => ":rails_root/public/ckeditor_assets/pictures/:id/:style_:basename.:extension",
                :styles => { :content => '600>',:medium => '300x300', :quintet => '150x150', :thumb => '118x100#' }

  validates_attachment_size :data, :less_than => 2.megabytes
  validates_attachment_presence :data

  def url_content
    url(:content)
  end

  protected
  def set_vars
    #self.assetable_id = id
    #self.assetable_type = controller_name
  end
end 
```

我想要的是在创建新图片期间填充“assetable_id”和“assetable_type”（因为数据库表中有列）。我想给他们传递变量。就像图片链接到的帖子/事件/用户的 id。当然，图片分配给的“模型”类型 - 再次发布/事件/用户。

我不知道这是否是正确的解决方案，但我不知道如何解决它。关于 CKeditor gem、配置设置和 Rails 的在线文档太可怕了——我正在寻找几个小时和几个小时，但我找不到与我想要的非常相似的东西——所以请帮忙。

我知道如何调整上传参数，但它们似乎都没有做我想做的事情：

```
Started POST "/ckeditor/pictures?CKEditor=post%5B14%5D&CKEditorFuncNum=1&
langCode=en&%3Aassetable-id=0&assetable_type=post&
authenticity_token=fsKA68sxkzQpiSMmtcP782i4oI%2FA6KSIsSZuwO5zDWA%3D" for 127.0.0.1 at 
2013-04-15 10:05:06 +0200

Processing by Ckeditor::PicturesController#create as HTML

Parameters: {"upload"=>#<ActionDispatch::Http::UploadedFile:0x007f94f80beef8 
@original_filename="kb_new.png", @content_type="image/png", @headers="Content-
Disposition: form-data; name=\"upload\"; filename=\"kb_new.png\"\r\nContent-Type: 
image/png\r\n", @tempfile=#<File:/tmp/RackMultipart20130415-3130-1ls814r>>, 
"CKEditor"=>"post[14]", "CKEditorFuncNum"=>"1", "langCode"=>"en", ":assetable-id"=>"0", 
"assetable_type"=>"post", 
"authenticity_token"=>"fsKA68sxkzQpiSMmtcP782i4oI/A6KSIsSZuwO5zDWA="}
User Load (0.2ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
[ALL THE FORMATING STUFF]

SQL (0.6ms)  INSERT INTO `ckeditor_assets` (`assetable_id`, `assetable_type`, `created_at`, `data_content_type`, `data_file_name`, `data_file_size`, `height`, `type`, `updated_at`, `width`) VALUES (NULL, '0', '2013-04-15 08:05:07', 'image/png', 'kb_new.png', 291770, 419, 'Ckeditor::Picture', '2013-04-15 08:05:07', 450)

[paperclip] Saving attachments.

(62.5ms)  COMMIT

Rendered text template (0.0ms)

Completed 200 OK in 929ms (Views: 0.5ms | ActiveRecord: 63.6ms) 
```

也看看这个问题：

[如何根据图片模型在Ruby On Rails的CKeditor中设置图片的大小？](https://stackoverflow.com/questions/15883162/how-to-set-the-size-of-an-image-within-ckeditor-in-ruby-on-rails-according-to-th)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-16T22:59:26.997

我实际上想通了这一点，并有一个可行的解决方案。我也尝试在谷歌上搜索所有内容，并发现关于如何将自定义参数添加到 Rails 中的 Ckeditor 上传的零信息。

这是我所做的：

1.  让我们从表单本身开始。使用 Ckeditor，一切都由 URL 驱动。因此，当您单击图像图标时，会出现弹出窗口，然后单击“浏览服务器”按钮，您会注意到它会打开一个带有 URL 的新弹出窗口。这是您需要修改的第一个 URL。然后，当您实际上传图像时，它会向另一个 URL 发送一个 post 请求。这是您需要修改的第二个 URL。

默认情况下，这些 URL 设置为 Ckeditor::PicturesController 上的“索引”和“创建”操作。这是 gem 存储库中此控制器文件的链接，稍后您将需要它 - [https://github.com/galetahub/ckeditor/blob/2dd963fae117726976e5bf1dc264e27d3741fea8/app/controllers/ckeditor/pictures_controller.rb](https://github.com/galetahub/ckeditor/blob/2dd963fae117726976e5bf1dc264e27d3741fea8/app/controllers/ckeditor/pictures_controller.rb)

所以从逻辑上讲，我们需要做的是修改这些 URL，以便我们可以添加自己的自定义代码来控制发生的情况。所以这就是我所做的（注意“ckeditor”哈希）：

```
<%= cktext_area_tag 'column1_body', @section, 
    :ckeditor => { 
      filebrowserImageUploadUrl: "/ckeditor/pictures?website_id=#{@website.id}",
      filebrowserImageBrowseUrl: "/picture_overrides" 
} %> 
```

凉爽的。

2.所以首先我用'/picture_overrides'修改了filebrowserImageBrowseUrl。这意味着当有人单击 BROWSE SERVER 按钮时，它将调用我的 PictureOverridesController 上的“索引”操作。所以我添加了路线，创建了控制器文件和视图。

对于视图，我完全从 gem 中复制了视图文件，这里是[https://github.com/galetahub/ckeditor/blob/master/app/views/ckeditor/pictures/index.html.erb](https://github.com/galetahub/ckeditor/blob/master/app/views/ckeditor/pictures/index.html.erb)。注意：那里有一个部分，所以你也需要抓住它。

现在在我的新“PictureOverridesController”文件中，我编辑了“索引”操作，如下所示：

```
def index
  # I need to find the website
  @website = Website.find_by_subdomain(request.subdomain)
  # I can scope @pictures to only contain the images the user should see.
  @pictures = Ckeditor::Picture.where(website_id: @website.id)
end 
```

然后，在此过程中会调用其他一些私有方法，因此您还需要将以下代码添加到此控制器文件中（只需剪切和粘贴）。你会注意到我从 gem 文件的同一个控制器中获取了这段代码。

```
 protected

  def find_asset
    @picture = Ckeditor.picture_adapter.get!(params[:id])
  end

  def authorize_resource
    model = (@picture || Ckeditor.picture_model)
    @authorization_adapter.try(:authorize, params[:action], model)
  end 
```

有了这个，现在我的用户将只能看到具有正确 website_id 的图像。

现在，我需要确保当用户通过 Ckeditor 上传图像时设置 website_id。

3.虽然您当然可以修改此控制器文件上的创建操作，并将 URL 设置为此，但我选择了不同的方式。如上所示，我只是将 website_id 添加到 URL 中。不幸的是， Ckeditor::Picture 实例不会自动保存它。所以我决定在 ApplicationController 中使用 after_filter 来完成此操作，如下所示：

```
 after_filter :ckeditor_add_website_id

    def ckeditor_add_website_id
      if params[:controller] == 'ckeditor/pictures' && params[:action] == 'create'
        @website = find_website_by_domain_subdomain(request)
        @picture.update_attributes(website_id: @website.id)
      end
    end 
```

它只是工作。

最后——不要忘记将自定义 URL 添加到您使用 Ckeditor 的任何表单中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-23T11:04:48.143

我认为最简单的解决方案：

```
#controllers/application_controller.rb
protected

def ckeditor_pictures_scope(options = { :assetable_id => "#{current_page.id}" ,:assetable_type => "Page" })
  ckeditor_filebrowser_scope(options)
end

def ckeditor_attachment_files_scope(options = { :assetable_id => "#{current_page.id}" ,:assetable_type => "Page" })
  ckeditor_filebrowser_scope(options)
end

def ckeditor_before_create_asset(asset)
  asset.assetable = current_page if current_page
  return true
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-10T08:35:55.217

感谢 nfriend21 和 wacaw 的解决方案。这个问题困扰了我一个星期！

wacaw的解决方案是最简单最干净的，但我是受nfriend21启发完成的。对于像我这样没有经验的人来说，它可能很有用。

我有一个包含许多编辑器的页面，每个编辑器都有不同的 ID（名为 column_id）。我希望将 column_id 保存为 Column 类型的asset_id（在我的应用程序中定义的对象）。

1）我更改页面中所有编辑器的网址：

```
for (instance in CKEDITOR.instances) {
          var editor = CKEDITOR.instances[instance];
          var id = editor.name.substr(6);

          if(editor) {
            editor.config.filebrowserImageBrowseUrl = "/ckeditor/pictures?column_id=" + id;
            editor.config.filebrowserImageUploadUrl = "/ckeditor/pictures?column_id=" + id;
          }
} 
```

请注意，我将编辑器的 ID 提取为包含它的 div 的 ID 的子字符串...即 editor134、editor245 等：我删除了前 6 个字符。

另请注意，我使用 ckeditor 的 gem 的原始 PicturesController。

2）现在，在ApplicationController中修改一下wacav解决方案：

```
#controllers/application_controller.rb
protected

  def ckeditor_pictures_scope(options = { :assetable_id => params[:column_id], :assetable_type => "Column"})
    ckeditor_filebrowser_scope(options)
  end

  # to be modified: at this moment I'm interested in pictures only
  def ckeditor_attachment_files_scope(options = { :assetable_id => "#{current_page.id}" ,:assetable_type => "Page" })
    ckeditor_filebrowser_scope(options)
  end

  def ckeditor_before_create_asset(asset)
    asset.assetable = Column.find(params[:column_id])
    return true
  end 
```

我希望它可以对其他人有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-14T20:50:37.060

您正在搜索的是使用**多态**图片模型，该模型将属于许多其他模型。

请在这里阅读[http://rails-bestpractices.com/posts/45-use-sti-and-polymorphic-model-for-multiple-uploads](http://rails-bestpractices.com/posts/45-use-sti-and-polymorphic-model-for-multiple-uploads)，因为它的描述很好。

# matlab - 使以下 matlab 代码更快

> ID：16002851
> 
> 赞同：0
> 
> 时间：2013-04-14T18:39:21.663
> 
> 标签：matlab

```
function c foo(a, b)
     for ii = [1 3 4 5]
          c = a(:,ii) +  b(:,ii);
     end
return 
```

有人可以解释这是在做什么吗？是在第 1 列中添加第 1`a`列`b`，然后在第 3、4、5 列中添加相同的内容吗？应该是`c+=`吗？否则它只是覆盖最后的总和。我对matlab不太熟悉，这段代码有意义吗？任何人都可以看到任何使这更快的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:49:56.057

如果代码做了应该做的事情（是的，它确实覆盖了以前的结果，并且只返回最后一个总和），那么最快的方法是：

```
function c foo(a, b)
         c = a(:,5) + b(:,5)
end 
```

如果应该添加列并将它们一个接一个地“连接”，则可以直接使用索引：

```
function c foo(a, b)
         ix = [1 3 4 5];
         c  = a(:,ix) + b(:,ix);
end 
```

# java - HTML CDATA 问题

> ID：16002854
> 
> 赞同：1
> 
> 时间：2013-04-14T18:39:38.943
> 
> 标签：java, html, xml, cdata

我在 Java 中工作，我有这个例子：

[http://jsfiddle.net/uAQ94/1/](http://jsfiddle.net/uAQ94/1/)

但是当我想显示最终的 HTML 时，我看不到 CDATA 标记包围的特殊字符。例如：

```
<![CDATA[à]]  not show the à character 
```

我需要理解这一点，因为我必须执行这段代码：

```
 try {
        DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        Document doc = builder.parse(new StringBufferInputStream(escapedStr));
        ITextRenderer renderer = new ITextRenderer();
        renderer.setDocument(doc, null);
        renderer.layout();
        OutputStream os = response.getOutputStream();
        renderer.createPDF(os);
        os.close();
    } catch (Exception ex) {
        ex.printStackTrace();
    } 
```

获取pdf页面。

为什么 CDATA 不显示任何特殊字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:43:41.883

在 HTML 中，CDATA 部分只能出现在[外部 XML 元素](http://www.whatwg.org/specs/web-apps/current-work/multipage/syntax.html#foreign-elements)中，而且只能出现在相对现代的浏览器中。

[第 12.1.5 节](http://www.whatwg.org/specs/web-apps/current-work/multipage/syntax.html#syntax-cdata)说

> CDATA 部分只能用于外来内容（MathML 或 SVG）。

CDATA 部分也存在问题，因为没有简单的方法来呈现其值包含 string 的 CDATA 部分`"]]>"`。

由于这两个原因，大多数 HTML 渲染器会将 CDATA 部分转换为常规实体转义文本节点。

* * *

```
<p>
  <![CDATA[à]]>
  <![CDATA[ò]]>
  <![CDATA[è]]>+
  <![CDATA[ì]]>
</p> 
```

这些 CDATA 部分不在外部 XML 中。它们位于常规 HTML`<p>`元素中，因此是不允许的。

使用这些重音元音避免编码问题的最简单方法是使用 HTML 数字字符引用：

```
<p> &#224; &#242; &#232;+ &#236; </p> 
```

应该与您的原始文件等效（标准化后）。

# php - Laravel 4 文件上传

> ID：16002860
> 
> 赞同：7
> 
> 时间：2013-04-14T18:40:16.720
> 
> 标签：php, file-upload, laravel, laravel-4

我正在尝试上传一些照片并使用 Laravel 函数中的构建来处理这个问题。但我一生都无法弄清楚如何正确地做到这一点。我已经能够实际上传一些东西，但我遇到了一些问题。这是我现在拥有的代码：

如果查看文档，发现这个函数：`$file = Input::file('photo');`我用过这个函数，它的内容`$file`是一个 的实例`Symfony\Component\HttpFoundation\File\UploadedFile`，正如文档告诉我们的，“扩展了 PHP SplFileInfo 类并提供了多种方法与文件交互。” [http://laravel.com/docs/4.2/requests#files](http://laravel.com/docs/4.2/requests#files)

然后我使用了这个函数`Input::file('photo')->move($destinationPath);`，它应该是服务器上所需文件夹中的文件。它确实做到了。但现在问题来了。现在所有上传的文件都有一个类似的文件名`phpgoJnLc`，并且没有扩展名。

我查看了可用的函数`SplFileInfo`并尝试`getExtension`了它给我一个空字符串，`getFilename`它也给了我类似`phpgoJnLc`.

然后我在互联网上环顾四周，发现了 Laravel 3 的一些代码，他们做了这样的事情：

`$filename = Str::random(20) .'.'. File::extension(Input::file('photo.name'));`

但是这样做的结果是只给我`Str::random(20)`一个点的结果。同样，没有文件扩展名。

那么，我做错了什么？如何使用 Laravel 4 上传文件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-14T19:02:00.177

在同一个类文件中，我看到了一个`getClientOriginalName()`函数......

```
$file = Input::file('photo');
$file->move($destinationPath,$file->getClientOriginalName()); 
```

...假设您*想*保留客户设置的原始名称...这可能是危险的，我的建议是对其进行一些安全检查。仅使用 获取扩展名`->getClientOriginalExtension()`，因此您也可以只保存该部分并在`move()`函数的第二个参数中添加一个随机字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T04:29:11.753

这对我有用，尤其是当您想更改上传图片的名称时：

```
$filename = 'New_Name'.'.'.Input::file('photo')->getClientOriginalExtension(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T16:19:16.637

您还可以为具有原始文件扩展名的文件生成名称，如下所示：

```
$filename = Str::random(20) . '.' . Input::file('image')->guessExtension(); 
```

如果您尝试在 Laravel 4 中使用以下内容：

```
$filename = Str::random(20) .'.'. File::extension(Input::file('photo.name')); 
```

你会得到这个错误：

```
'Call to undefined method Illuminate\Filesystem\Filesystem::guessExtension()' 
```

# azure - 重新启用已取消的帐户

> ID：16002861
> 
> 赞同：0
> 
> 时间：2013-04-14T18:40:21.627
> 
> 标签：azure, http-status-code-301, azure-web-app-service

我取消了用于托管我的 Windows azure 网站的“即用即付”帐户。然而，今天我查看了谷歌，它决定索引 azure 站点（builtagroup.azurewebsites.net）。我想重新启用我的帐户并在网站上放置一个永久重定向，直到谷歌将其删除，但它不允许我这样做。当我尝试重新启用它时，它只会让我创建一个新帐户，但不会让我访问我的旧网站。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:21:48.377

我认为目前没有任何规定可以重新启用已取消的帐户。您可能需要通过 Windows Azure 团队打开计费支持票证，该票证是免费的。

> 对计费和订阅管理问题的支持包含在您的 Windows Azure 订阅中，无需额外费用，您无需拥有 Windows Azure 支持计划即可提出这些问题。要提交事件，请访问 Windows Azure 支持站点并单击获取支持

.

# python - \frac{}{} 不适用于我 w/pylab

> ID：16002862
> 
> 赞同：6
> 
> 时间：2013-04-14T18:40:21.853
> 
> 标签：python, matplotlib, tex

我在使用 python 尤其是 numpy 和 matplotlib 方面比较陌生。运行下面的代码（没有该`\frac{}{}`部分可以正常工作）会产生错误：

```
Normalized Distance in Chamber ($
                             rac{x}{L}$)
                            ^
Expected end of text (at char 32), (line:1, col:33) 
```

数学模式似乎适用于我尝试过的所有其他东西（主要是符号，例如`$\mu$`运行良好并显示 µ）所以我不确定这里发生了什么。我查看了其他人的代码以获取示例，他们似乎只是使用`\frac{}{}`没有什么特别的东西，而且效果很好。我不知道我在做什么不同。这是代码。谢谢您的帮助！

```
import numpy as np
import math
import matplotlib.pylab as plt

[ ... bunch of calculations ... ]

plt.plot(xspace[:]/L,vals[:,60])
plt.axis([0,1,0,1])
plt.xlabel('Normalized Distance in Chamber ($\frac{x}{L}$)')
plt.savefig('test.eps') 
```

另外，我确实查找了 \f ，它似乎是一个“转义字符”，但我不知道这意味着什么或为什么它会在 TeX 模式下处于活动状态。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-14T18:43:35.287

在许多语言中，反斜杠字母是一种输入其他难以键入的字符的方法。在这种情况下，它是“表单提要”。例子：

```
\n — newline
\r — carriage return
\t — tab character
\b — backspace 
```

要禁用它，您要么需要转义反斜杠本身（反斜杠反斜杠是反斜杠）

```
'Normalized Distance in Chamber ($\\frac{x}{L}$)' 
```

或者使用禁用转义序列的“原始”字符串：

```
r'Normalized Distance in Chamber ($\frac{x}{L}$)' 
```

这与 Python 相关，与 TeX 无关。

[关于 Python 字符串文字的文档](http://docs.python.org/2.7/reference/lexical_analysis.html#string-literals)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T18:44:05.667

`"\f"`是 Python 中的换页符。TeX 永远不会看到反斜杠，因为 Python`\f`在将字符串发送到 TeX 之前解释了 Python 源代码中的 。您可以将反斜杠加倍，也可以使用`r'Normalized Distance ... etc.'`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T18:44:09.133

您必须`r`在字符串前面添加一个以避免解析`\f`.

# microcontroller - 使用 8051 查找 hfe

> ID：16002864
> 
> 赞同：0
> 
> 时间：2013-04-14T18:40:57.483
> 
> 标签：microcontroller, 8051

我正在尝试找到晶体管的 hfe 值，我正在从 ADC 的输入中获取移植到微控制器的输入，现在我需要在 8051 中编码除法，公式将是

```
V1*10/V2 
```

有人可以帮我编码吗，因为 V1*10 将是一个 B 中的 msb 和 a 中的 lsb 的 WORD。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:43:40.307

除以 V2，然后乘以 10。

# php - 如何分离 PHP 生成的列表项 - Magento

> ID：16002866
> 
> 赞同：0
> 
> 时间：2013-04-14T18:41:05.157
> 
> 标签：php, css, magento

我有一些 php 生成的 magento 顶部链接，截图如下：

![在此处输入图像描述](https://i.stack.imgur.com/3XSVL.jpg)

我的目标是将“登录”链接分开并将其浮动到同一行的左侧。

我希望有一种有效的方法来选择最后生成的列表项元素并对其应用一些 CSS。

代码如下：

```
<ul class="links pull-right"<?php if($this->getName()): ?> id="<?php echo $this->getName() ?>"<?php endif;?>>
    <?php foreach($_links as $_link): ?>
        <?php if ($_link instanceof Mage_Core_Block_Abstract):?>
            <?php echo $_link->toHtml() ?>
        <?php else: ?>
            <li<?php if($_link->getIsFirst()||$_link->getIsLast()): ?> class="<?php if($_link->getIsFirst()): ?>first<?php endif; ?><?php if($_link->getIsLast()): ?> last<?php endif; ?>"<?php endif; ?> <?php echo $_link->getLiParams() ?>><?php echo $_link->getBeforeText() ?><a href="<?php echo $_link->getUrl() ?>" title="<?php echo $_link->getTitle() ?>" <?php echo $_link->getAParams() ?>><?php echo $_link->getLabel() ?></a><?php echo $_link->getAfterText() ?></li>
        <?php endif;?> 
        <?php if (! $_link->getIsLast()):?>|<?php endif;?>
    <?php endforeach; ?>
</ul> 
```

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:58:05.450

晚上所有，

我会尝试限制您添加到模板的业务逻辑的数量。由于您要实现的目标是对这个 magento 实例的自定义，因此我将创建一个非常基本的模块。然后我会考虑实现一个新块或只是一个帮助函数来返回你想要的数据。

如果您使用块功能，请确保您的类扩展了 Magento 导航类。（对不起，我没有检查这是什么）然后创建动作：例如

```
public function getNavigation()
{
     $links     = $this->getLinks();
     $linkArray = array();
     $linkCount = count($links);
     $i;

     foreach($links as $link) {
          if($i == $linkCount) {
              $last = true;
          } else { 
               $last = false;
          }
          $linkArray[] = 'link'   => $link->getLink()->toHtml(),
                         'isLast' => $last 

          $i++;
     }
     return $linkArray();

} 
```

然后，您的块将应用最少的逻辑。主要只是遍历结果集。

希望这是有道理的，如果不让我知道，我会给你你需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:46:55.317

不久前我回答了一个类似的问题。这会将“last-item”类添加到最后处理的项目中。

```
<?php list($parent) = split('/', $this->url); ?>
<?php  $last_articles = $this->find('/news')->children(array('limit'=>5, 'order'=>'page.created_on DESC')); ?>
<ul id="latest-news">
<?php $count = count($last_articles); $num = 0; ?>
<?php foreach ($last_articles as $article): ?>
<li <?php if($num == $count-1){ ?> class="last-item" <?php } ?>>
<?php echo '<h3>'.$article->link($article->title()).'</h3>'; ?>
<?php echo strip_tags(substr($article->content(),0,100)).'...'; ?>
</li>
<?php $num++ ?>
<?php endforeach; ?>
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T19:43:07.167

CSS 提供了一种方法来设置集合的最后一个子元素，无需修改 PHP。

[http://tinker.io/926d2](http://tinker.io/926d2)

```
ul.links.pull-right :last-child {
    margin-left: 2em;
} 
```

# gwt - 实时驱动器文档中提到的 GwtDocumentBridge 是什么？

> ID：16002867
> 
> 赞同：3
> 
> 时间：2013-04-14T18:41:07.080
> 
> 标签：gwt, google-drive-api, google-drive-realtime-api

API 文档为实时服务提供了 GWT 绑定的诱人提示，但我找不到其他提及它们的地方。

> 参数： gapi.drive.realtime.GwtDocumentBridge bridge — GWT 协作库的驱动程序。

我正在使用实时 API 编写 GWT 应用程序，并且有很多复杂的管道可以避免！这是`GWT collaborative libraries`对已经存在的东西的引用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:20:03.017

对不起，但这只是一个实现细节。目前没有可用的 GWT API，只有 javascript API。

# java - 乒乓球不反弹

> ID：16002872
> 
> 赞同：2
> 
> 时间：2013-04-14T18:41:22.130
> 
> 标签：java, swing, class, user-interface, pong

当它撞到墙上时，它只是沿着墙滚动，但我正在反转 y 坐标。此外，您不能同时移动桨。有什么建议吗？我应该创建 2 个线程吗？

这是我在 Y 线撞到墙上后更改它的功能。

```
 public void ballMove(){
            if(ballStartY+randomBally > jpH){
                randomBally -=4;

            }
            if(ballStartY+randomBally <0){
                randomBally +=4;
            }
        } 
```

这是完整的代码

```
import java.awt.Color;
import java.awt.Event;
import java.awt.Graphics;
import java.util.Random;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Pong extends JFrame implements ActionListener{

        //implement constants

        PongPanel pongPanel = new PongPanel();  

        //JFrame pong x and y coordinates 
        static final int jfpX = 150;
        static final int jfpY = 20;

        // JFrame pong width and height
        static final int jfpW = 800;
        static final int jfpH = 600;

        Thread thrd;

        public static void main(String[] args) {
                Pong jfp = new Pong();
                jfp.setVisible(true);

        }

        public Pong(){
                setBounds(jfpX,jfpY,jfpW,jfpH); 
                setTitle("Pong");
                setResizable(false);
                setDefaultCloseOperation(EXIT_ON_CLOSE);
                setBackground(Color.black);

                add(pongPanel);
                addKeyListener(pongPanel);
                thrd = new Thread (pongPanel);
        thrd.start();
        }

        public void actionPerformed(ActionEvent e) {

        }

}

class PongPanel extends JPanel implements Runnable, KeyListener{
        Random random = new Random();
        static final int jpW = 800;
        static final int jpH = 600;
        int paddleStart = (jpH/2)-35;
        int paddleStarttwo = (jpH/2)-35;
        int ballStartX = (jpW/2)-20;
        int ballStartY = (jpH/2)-20;
        int ytwo,x,y;
        int ballD = 30;
        int paddleW1 = 20;
        int paddleH1 = 100;
        int paddleW2 = 20;
        int paddleH2 = 100;
        int min = -2;
        int max = 2;
        int randomBallx = random.nextInt(max-min+1)+min;
        int randomBally = random.nextInt(max-min+1)+min;

        public PongPanel(){

        }

        protected void paintComponent(Graphics g) 
        {
        super.paintComponent(g);

        Color ball;
        Color paddleOne;
        Color paddleTwo;
        ball = new Color(255,0,255);
        paddleOne = new Color(255,0,0);
        paddleTwo = new Color(0,0,255);

        g.setColor(ball);
        g.fillOval(ballStartX+randomBallx,ballStartY+randomBally,ballD,ballD);

        g.setColor(paddleOne);
        g.fillRect(20,paddleStart+y,paddleW1,paddleH1);

        g.setColor(paddleTwo);
        g.fillRect(760,paddleStarttwo+ytwo,paddleW2,paddleH2);

        }
        public void run() {
                while(true){

                randomBall();
                ballMove();
                repaint();
        try {Thread.sleep(75); } catch(Exception e){

        };

                }
        }

        public void randomBall(){
            if(randomBallx >=0 ){
                randomBallx=+4;
            }
            if(randomBallx<0){
                randomBallx-=4;
            }
            if(randomBally>=0){
                randomBally+=4;
            }
            if(randomBally<0){
                randomBally-=4;
            }
//                randomBallx+=randomBallx;
//                randomBally+=randomBally;
        }
        public void ballMove(){
            if(ballStartY+randomBally > jpH){
                randomBally -=4;

            }
            if(ballStartY+randomBally <0){
                randomBally +=4;
            }
        }

        public void keyPressed(KeyEvent e) {

        if(e.getKeyCode() == KeyEvent.VK_A){
                y-=10;
        }
        else if(e.getKeyCode() == KeyEvent.VK_S){
                        y+=10;
                }

        if(e.getKeyCode() == KeyEvent.VK_QUOTE){
                ytwo-=10;
        }
        else if(e.getKeyCode() == KeyEvent.VK_SEMICOLON){
                        ytwo+=10;
                }

        }

        public void keyTyped(KeyEvent e) {

        }

        @Override
        public void keyReleased(KeyEvent e) {
                // TODO Auto-generated method stub

        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-01T06:30:42.097

而不是做`randomBally -=4;`，`randomBally +=4;`你可以做`randomBally *=-1`。您应该将速度乘以 ，而不是增加速度`-1`，这会改变运动的方向。

# php - 在mysql中保存数据但不能

> ID：16002873
> 
> 赞同：-2
> 
> 时间：2013-04-14T18:41:23.250
> 
> 标签：php, mysql, mysqli

**当我放置一个静态值时它可以工作但是当我使用 $a 它打印正确的值但没有将值保存在数据库中**

```
<?php

    $conn_error='Could not Connect';
    $mysql_host='localhost';
    $mysql_user='root';
    $mysql_pass='';
    $mysql_db='db_ZS';

    $con=mysqli_connect($mysql_host,$mysql_user,$mysql_pass,$mysql_db);

    if (mysqli_connect_errno())
    {
        echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }

    $a=$_POST['txtEn'];
    echo $a;

    mysqli_query($con,"INSERT INTO tlb1 (AR,EN) values ($a,$a)");

    mysqli_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:43:40.823

如果您的变量包含字符串值，则需要使用`'`引号

```
mysqli_query($con,"INSERT INTO tlb1 (AR,EN) values ('$a','$a')"); 
```

还要确保`mysqli_real_escape_string`在将任何内容发布到数据库之前至少使用清理数据..

并确保您的列数据类型是`varchar`，或者`text`如果它是一个字符串`int`，`bigint`列不存储文本值

> 提示：始终使用`echo mysqli_error($connection);`这将帮助您调试查询

# android - 如何使用 Android Universal Image Loader 捕捉图像并将它们用于布局背景？

> ID：16002874
> 
> 赞同：0
> 
> 时间：2013-04-14T18:41:47.377
> 
> 标签：android, image, loader, universal

我正在对 Universal Image Loader 库进行一些研究，发现它很棒。但我有一个疑问。我想从 URL 下载图像，将其捕获到 SD/内部存储器中并将其用于线性布局背景。据我所知，当您使用 displayImage(..) 方法时，它会捕获图像。有谁知道是否可以从 URL 下载图像、捕获它并将其加载到位图中以便稍后在 Layouts 的背景中使用它？我可以接受任何其他解决方案来实现这一点。谢谢

编辑

只是为了清楚我想做的是 1.- 下载图像 2.- 捕捉它 3.- 将它加载为位图，这样我就可以做类似的事情

```
 Bitmap b=(image catched by UIL);
 BitmapDrawable drawableBitmap=new BitmapDrawable(b);
 linearLayout.setBackgroundDrawable(drawableBitmap); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-16T08:06:46.840

您可以使用以下代码在布局中设置下载的图像。

```
 ImageLoader.getInstance().loadImage(pack.getCoverImageUrl(), new SimpleImageLoadingListener(){
        @Override
        public void onLoadingStarted(String imageUri, View view) {
            super.onLoadingStarted(imageUri, view);
        }

        @Override
        public void onLoadingFailed(String imageUri, View view, FailReason failReason) {
            super.onLoadingFailed(imageUri, view, failReason);
        }

        @Override
        public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
            super.onLoadingComplete(imageUri, view, loadedImage);
            rl_header_main.setBackgroundDrawable(new BitmapDrawable(loadedImage));
            rl_header_main.setAlpha();
        }

        @Override
        public void onLoadingCancelled(String imageUri, View view) {
            super.onLoadingCancelled(imageUri, view);
        }
    }); 
```

享受 ：）

# javascript - 测试服务是否对 DOM 事件做出反应

> ID：16002879
> 
> 赞同：0
> 
> 时间：2013-04-14T18:42:14.320
> 
> 标签：javascript, angularjs, jasmine

我刚刚编写了这个服务来提醒用户在关闭窗口时他们是未保存的数据：

```
 module.factory('autosaver',
        ['$rootScope', '$window', 'editor', 'doc', 'saveInterval', '$timeout',
        function ($rootScope, $window, editor, doc, saveInterval, $timeout) {

        var scope = $rootScope.$new(true);
        scope.doc = doc;
        scope.confirmOnLeave = function(e) {
        var msg = "You have unsaved data.";

        // For IE and Firefox
        e = e || window.event;
        if (e) {e.returnValue = msg;}

        // For Chrome and Safari
        return msg;
    };
    scope.$watch('doc.dirty', function (newValue, oldValue) {
        if(newValue !== oldValue) {
            newValue ? $window.addEventListener('beforeunload', scope.confirmOnLeave) : $window.removeEventListener('beforeunload', scope.confirmOnLeave);
        }
    });

    return scope;
}]); 
```

现在我想写规范。我不知道如何模拟 beforeunload 事件并监视调用。我试过这段代码：

```
 it('should listen to beforeunload event', inject(function ($window, autosaver) {
        autosaver.confirmOnLeave = jasmine.createSpy('confirmOnLeave');

        var evt = document.createEvent("beforeunloadEvents");
        evt.initMouseEvent("beforeunload", true, true, $window,
            0, 0, 0, 0, 0, false, false, false, false, 0, null);

        $window.dispatchEvent(evt);
    })); 
```

但我得到这个错误：

```
NotSupportedError: NotSupportedError: DOM Exception 9
    Error: The implementation did not support the requested type of object or operation. 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:23:09.617

与其直接使用 DOM，不如直接模拟`$window.addEventListener`并立即调用回调函数。

```
jasmine.spyOn($window, 'addEventListener'); 
```

调用你的函数，然后触发事件：

```
var msg = $window.addEventListener.mostRecentCall. args[1]({}) 
expect(msg).toBeEqual("You have unsaved data.") 
```

# javascript - 仅在 Chrome 中使用 JQuery UI 选项卡破坏表单

> ID：16002880
> 
> 赞同：1
> 
> 时间：2013-04-14T18:42:15.770
> 
> 标签：javascript, jquery, jquery-ui, fancybox

我研究了许多类似的问题和解决方案，但没有一个解决了这个问题。此表单适用于 Firefox，但不适用于 Chrome。我想了解 Firefox 在做什么而 Chrome 不是，并修复此页面，使其适用于所有浏览器。

一旦将表单放置在 JQuery UI 选项卡中但仅在 Chrome 中，该表单似乎变得无法使用。

```
<form method="post" action="/data-page/" id="enter_exercise" >      
  <div id="tabs_ajax">
    <ul>
      <li><a href="#tabs-1">General Info</a></li>
      <li><a href="#tabs-2">Heart Rate</a></li>
      <li><a href="#tabs-3">Exercise</a></li>
    </ul>
    <div id="tabs-1" style="padding:0;" >
      Workout Title:<input type='text' name='title' value="" />
    </div>  <!-- END tab-1 -->
    <div id="tabs-2" style="padding:0;" >
      Average Heart Rate:<input type='text' name='avgHR' value="" />
    </div>  <!-- END tab-2 -->
    <div id="tabs-3" style="padding:0;" >
      Run Miles:<input type='text' name='miles' value="" />
    </div>  <!-- END tab-3 -->
  </div>
</form> 
```

javascript（发布在页面底部）

```
<script>
  $j = jQuery.noConflict();
  $j(document).ready(function(){        
    $j( "#tabs_ajax" ).tabs({
    });
  });
</script> 
```

此页面用于在 wordpress 博客上输入练习，并以花式框弹出窗口的形式启动。我`include("../../../wp-load.php");`用来允许此弹出窗口访问 wordpress 功能。我也使用`wp_enqueue_scripts("jquery");`和`wp_enqueue_script('jquery-ui-tabs');`

如果我在此弹出窗口上创建一个普通表单，它可以工作，但是当我将表单放在`<div id="tabs_ajax">`内容中时，它不允许我在 Chrome 中输入表单数据。它适用于 Firefox，但 Chrome 无响应，包括提交按钮。

# character - PHP用对应的ASCII码替换特殊字符

> ID：16002882
> 
> 赞同：0
> 
> 时间：2013-04-14T18:42:25.023
> 
> 标签：character, ascii

我正在寻找一个将所有特殊字符转换为相应 ascii 代码的函数！我会解释的！

我有这个代码：

> <trust:RequestSecurityTokenResponseCollection xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">

我想把它转换成

```
%3Ctrust%3ARequestSecurityTokenResponseCollection+xmlns%3Atrust%3D%22http%3A%2F%2Fdocs.oasis-open.org%2Fws-sx%2Fws-trust%2F200512%22%3E 
```

如果我使用函数 urlencode 它将字符串转换为

```
%26lt%3Btrust%3ARequestSecurityTokenResponseCollection+xmlns%3Atrust%3D%26quot%3Bhttp%3A%2F%2Fdocs.oasis-open.org%2Fws-sx%2Fws-trust%2F200512%26quot%3B%3E 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:14:50.127

问题仅针对 2 个字符：<"

所以我用这 3 行解决了：

```
$result = urlencode($result);
$result = str_replace ('%26lt%3B','%3C', $result);
$result = str_replace ('%26quot%3B','%22', $result); 
```

# android - 如何在 Android 浏览器中隐藏 URL 栏

> ID：16002884
> 
> 赞同：0
> 
> 时间：2013-04-14T18:42:30.193
> 
> 标签：android, url

我想从浏览器中永久隐藏 URL 栏，即使该人从一个页面重定向到另一个页面，它也不应该出现。这是我的 .java 代码：

```
package com.example.com.android.royalcastleapp;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.Window;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.support.v4.app.NavUtils;
public class Bookinghome extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_bookinghome);
        //Get a reference of WebView holder
        WebView webview = (WebView) this.findViewById(R.id.webview);
        //Get the settings
        WebSettings websettings = webview.getSettings();
        //Enable Javascript
        websettings.setJavaScriptEnabled(true);
        //Make the zoom controls visible
        websettings.setBuiltInZoomControls(true);
        //Load the default url.
        webview.loadUrl("http//okRoom.aspx");   
    }
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_bookinghome, menu);
        return true;
    }
} 
```

这是我的布局：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <WebView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        tools:context=".Bookinghome" 
        android:id= "@+id/webview"/>
</RelativeLayout> 
```

如果有人可以建议我可以做出的任何改变，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:48:27.877

您的应用程序启动默认浏览器。

您需要使用 WebViewClient.shouldOverrideUrlLoading ，如下所述：[https ://stackoverflow.com/a/2379054/2183804](https://stackoverflow.com/a/2379054/2183804)

# c# - MVC.Net Action 链接更新部分

> ID：16002885
> 
> 赞同：0
> 
> 时间：2013-04-14T18:42:32.863
> 
> 标签：c#, .net, asp.net-mvc, database

我在 MVC.Net 网站中使用部分视图来显示数据库中的内容。我希望能够尽可能提供所见即所得的界面来修改该内容。

理想情况下，我希望能够`@Html.Action`在我需要一些内容的任何页面上放置一个。然后自动为经过身份验证的用户提供“*编辑*”链接。

单击编辑链接后，我想显示与它们已经存在的页面相同的页面。（来自不同的控制器）。但是用它的“*编辑*”状态替代部分替换。

显然，此刻，`ActionLink`在部分中放置一个导航离开当前页面并全屏显示编辑视图。

控制器“SiteCMSController”从 db/cache 中查找 id 并将其插入到页面中。如果用户是管理员，它会添加一个编辑链接。

```
<div>
    @Html.Action("_Content", "SiteCMS", new { id = 1 })
</div> 
```

结果是

```
<div>
    Some text pulled in from the database.
    <br>
    <a href="~/SiteCMS/Edit/1">Edit this content</a>
</div> 
```

（关闭我的头代码。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:49:20.150

使用一些ajax

```
<div>
    @Ajax.Actionlink("_Content", "SiteCMS", new { id = 1}, new AjaxOptions {       UpdateTargetId = "someDiv"})
</div> 
```

UpdateTargetId，这是您将要存储的部分内容，您必须创建一个 id 为“someDiv”的 div，或者其他 ofc :)

# c++ - 如何在不复制和粘贴整个类体的情况下专门化模板？

> ID：16002889
> 
> 赞同：5
> 
> 时间：2013-04-14T18:42:50.830
> 
> 标签：c++, templates, template-specialization

我为移动平均线编写了一个简单的类，可以与 AVR 一起使用。

```
template<typename T, typename Tsum = int32_t>
class MovingAverage { ... } 
```

但是现在我想将这个类专门用于浮点而不复制和粘贴整个类主体并将所有 T 和 Tsum 更改为浮点，并且我不需要使用两个模板参数。Tsum 是“sum”变量的类型，其中所有传递的 T 类型的值都被汇总。如果 T 是 'uint8_t'，最好使用 'uint32_t' 作为总和，但对于 float 或 double，不需要使用精度更高的数据类型，因此我只需要一个参数。我认为它可以这样工作：

```
typedef MovingAverage<float, float> MovingAverage<float> 
```

或者这样：

```
template<>
class MovingAverage<float> : public MovingAverage<float, float> {}; 
```

但是我错了，我只找到了必须编写两次代码的解决方案。

有没有办法只编写一次课程，然后以我喜欢的方式对其进行专门化？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T18:50:24.320

如果你想要不同的默认类型`Tsum`，这应该外包给另一个可以指定的类，例如：

```
template< typename, typename = void >
struct DefaultSum { using type = int32_t; };

template< typename T >
struct DefaultSum< T, typename std::enable_if<
  std::is_floating_point< T >::value
>::type >
{ using type = T; };

template<typename T, typename Tsum = typename DefaultSum<T>::type >
class MovingAverage { ... } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T18:49:53.560

您可以编写一个简单的**特征类**

```
// general version
template<typename T>
struct sum_type
{
    typedef int32_t type;
};

// specialized version
template<>
struct sum_type<float>
{
    typedef float type;
};

// repeat for double, the solution from @DanielFrey is even more sophisticated 
// as it specializes all floating point types in one sweep. 
```

然后在你的类模板中提取这个类型

```
template<typename T, typename Tsum = typename sum_type<T>::type>
//                                   ^^^^^^^^ <-- dependent type disambiguation
class MovingAverage { ... }; 
```

请注意，这仅在您`MovingAverage`具有定期参数化的实现时才有效。如果您实际上正在做一些特殊的事情`float`（例如重写表达式以处理浮点运算的非关联字符），那么您需要做更多的工作。

如果您认真对待使用 C++ 模板，请运行 - 而不是步行 - 到最近的书店并获取[**C++ 模板：完整指南**](https://rads.stackoverflow.com/amzn/click/com/0201734842)一书。第 15.1 节有超过 15 页的关于定义通用累积类模板的讨论。

# postgresql - 如何获取包含未知列的 postgres (8.4) 查询结果

> ID：16002897
> 
> 赞同：1
> 
> 时间：2013-04-14T18:43:22.543
> 
> 标签：postgresql, dynamic-sql

编辑：发布后，我发现[Erwin Brandstetter 对类似问题的回答](https://stackoverflow.com/questions/11740256/refactor-a-pl-pgsql-function-to-return-the-output-of-various-select-queries)。听起来在 9.2+ 中我可以使用他列出的最后一个选项，但对于我的情况，其他选项听起来都不可行。然而，Jakub Kania 的评论和 Craig Ringer 重申的建议我在 psql 中使用 COPY 或 \copy 似乎解决了我的问题。

我的目标是将动态创建的查询执行到文本文件中的结果。

列名和列数未知；运行时生成的查询是“枢轴”查询，SELECT 列表中的列名取自存储在数据库中的值。

我的设想是能够从命令行运行：

```
$ psql -o "myfile.txt" -c "EXECUTE mySQLGeneratingFuntion(param1, param2)" 
```

但是我发现除非我知道查询结果中的列数及其类型，否则我无法从 EXECUTEd 查询中获得结果。

```
create or replace function carrier_eligibility.createSQL() returns varchar AS
$$
begin
return 'SELECT * FROM carrier_eligibility.rule_result';
-- actual procedure writes a pivot query whose columns aren't known til run time
end
$$ language plpgsql

create or replace function carrier_eligibility.RunSQL() returns setof record AS
$$
begin 
return query EXECUTE carrier_eligibility.createSQL();
end
$$ language plpgsql

-- this works, but I want to be able to get the results into a text file without knowing
-- the number of columns 
select * from carrier_eligibility.RunSQL() AS (id int, uh varchar, duh varchar, what varchar) 
```

不需要使用 psql。我只想将查询结果放入文本文件中，第一行中包含列名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T05:14:00.573

你想要什么格式的文本文件？像csv这样的东西？

像这样的东西怎么样：

```
CREATE OR REPLACE FUNCTION sql_to_csv(in_sql text) returns setof text
SECURITY INVOKER -- CRITICAL DO NOT CHANGE THIS TO SECURITY DEFINER 
LANGUAGE PLPGSQL AS
$$
DECLARE t_row RECORD;
        t_out text;
BEGIN
  FOR t_row IN EXECUTE in_sql LOOP
     t_out := t_row::text;
     t_out := regexp_replace(regexp_replace(t_out, E'^\\(', ''), E'\\)$', '');
     return next t_out;
  END LOOP;
END; 
$$; 
```

这应该创建没有标题的正确引用的 csv 字符串。嵌入的换行符可能是个问题，但您可以编写一个快速的 Perl 脚本来连接和写入数据或其他内容。

请注意，这假定元组结构（带括号的 csv）不会随着未来的版本而改变，但它目前至少应该在 8.4 到 9.2 中工作。

# entity-framework - 实体框架 - 使用 toTraceString 查看 Sql

> ID：16002898
> 
> 赞同：9
> 
> 时间：2013-04-14T18:43:24.873
> 
> 标签：entity-framework, logging, entity-framework-5, generated-sql

我正在尝试查看 Entity Framework 5.0 从实体查询生成的生成的 sql。在整个网络上，每个人都说将**IQuerable**对象转换为**ObjectQuery**对象，然后使用 toTraceString() 方法返回生成的查询。

但是我不断收到无效案例异常：

```
 Unhandled Exception: System.InvalidCastException: Unable to cast object of type
'System.Data.Entity.Infrastructure.DbQuery`1[System.String]' to type 'System.Data.Objects.ObjectQuery'. 
```

在 Entity Framework 5 中执行此操作的新方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-14T18:59:03.853

您可以使用 IQueryable 查看生成的 SQL `.ToString()`，例如

```
var query = context.People.Where(x => x.DomainId == 1);
Console.WriteLine(query.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:13:43.793

你在使用 SQL Server 吗？如果是这样，请尝试使用分析器。Management Studio开发版中的Tools->SQL Server Profiler

# debugging - 如果图像在只读内存中，调试器如何设置断点？

> ID：16002899
> 
> 赞同：4
> 
> 时间：2013-04-14T18:43:25.523
> 
> 标签：debugging, memory, assembly, operating-system, ollydbg

如果图像在只读内存中，调试器如何设置断点？我知道有硬件断点，但在我使用的调试器 (OllyDbg) 中，必须使用与普通断点不同的对话框专门设置这些断点。

解释：

这是调试器中的一个例程，它将自身与自身的副本进行比较。EDX 指向正在运行的镜像，EBX 指向镜像的已知良好副本。只有在不匹配的情况下才会到达 4010CE 上的断点。被比较的字符在 AL 寄存器中。如您所见，调试器在 10CE 显示 EB F6，但这是错误的。正如您通过查看 AL 寄存器可以看到的那样，10CE 实际上有 CC。这是因为调试器已经偷偷插入了CC来执行断点。

![在此处输入图像描述](https://i.stack.imgur.com/PeavW.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T10:28:24.320

调试器首先必须更改它要写入的页面的内存保护。这可以通过 VirtualProtectEx 来完成。之后，它可以使用 WriteProcessMemory 进行写入，然后将保护设置回原始值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-21T22:01:05.753

让我以我不熟悉您的特定工具集的免责声明作为开头。

如果您尚未启用硬件断点，则唯一剩下的断点类型是软件断点。当您用陷阱指令替换指令的第一个字节时，这些只会被命中（在 x86 上，因为这是我最熟悉的），并且只有在*正确*的陷阱时才会通过操作系统的断点机制路由到调试器使用了您的操作系统的指令，并且调试器已经向操作系统注册了自己作为此过程的调试器。为了使软件断点在正确的时刻发生，必须在正确指令的第一个字节上将陷阱指令写入代码段。

首先得到的两个答案解释了可以让你来到这里的两种情况（至少，我能想到的只有两个）：

*   内核总是在任何地方都有写访问权限，除了受硬件保护的页面（即在某种 ROM 上），您的进程的内存几乎肯定没有。它具有编写断点指令的*能力*，而不管暴露给正在调试的用户进程的权限如何。

*   在插入断点之前，调试器必须使用一些系统调用来更改目标进程内存的访问权限。

就个人而言，我猜第一件事正在发生。段权限仅用于保护您的目标进程不受其自身的影响，而不是来自调试器进程或内核的保护。操作系统中的调试机制经常违反“正常”权限，以允许调试器对目标进程执行任何它想做的事情。当然，这就是为什么某些操作系统在某些情况下允许您使用调试器之前要求您输入密码的原因。

但是，您可以通过在设置断点后尝试从目标进程内部写入代码段来测试它是否是第二个。如果写入成功，您就知道操作系统已经降低了权限（以允许调试进程）。对于操作系统来说，要求调试器跳过这个循环会很尴尬，因为它已经可以将任意代码插入内存的可写部分，然后通过生成堆栈帧溢出来强制跳转到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T19:28:50.770

调试器利用 WriteProcessMemory() 函数来更改指令。它将保留一份说明。当 bp 被击中时，它将重置旧字节值并将 EIP 设置回上一条指令，以便真正的指令可以执行。

# sql - 以与我们在 Oracle SQL 中相同的方式更新 sql server 中设计器视图中的表

> ID：16002900
> 
> 赞同：0
> 
> 时间：2013-04-14T18:43:33.307
> 
> 标签：sql, sql-server, sql-server-2008

我们可以使用以下查询在 Pl/sql 的设计器视图中更新表：

```
select * from table1 for update 
```

而不是通过解锁设计器视图并进行进一步的更改。

我们可以在 SQL Server 中做同样的事情吗？我尝试在 SQL Server 中执行相同操作，但出现错误：

> FOR UPDATE 子句仅允许用于 DECLARE CURSOR

伙计们有什么想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:58:28.243

在 Management Studio 中，右键单击对象资源管理器中的表名，然后选择“编辑前 200 行”。如果这没有返回您要编辑的行，请点击`Ctrl`+ `3`，这将允许您修改填充网格的查询。老实说，您应该学习正确的 DML（更新、插入、删除）语法，而不是将表格视为电子表格。

但是，您将无法从同一个设计器更改架构；为此，您必须使用右键单击 > 设计。（再一次，正确的 DDL 比依赖充满错误和功能受限的视觉设计师要好。）

# asp.net - 将文件从powershell上传到asp.net

> ID：16002901
> 
> 赞同：7
> 
> 时间：2013-04-14T18:43:34.780
> 
> 标签：asp.net, asp.net-mvc, powershell, file-upload

我有一个 asp.net mvc 应用程序，它允许使用 CSV 文件上传公司结构。我被问及使用 powershell 脚本自动化此功能的可能性。在 powershell 中创建 CSV 很容易，但我不知道如何上传到 asp.net。

我的第一选择是使用 WebClient，但我的身份验证有问题 - 在 mvc 中我们使用表单身份验证。我[在这里](http://channel9.msdn.com/Forums/TechOff/162017-Using-WebClient-to-enter-Form-based-Auth-system-How)读到这是可能的，但如果我的登录表单发生更改，我将不得不向客户端发送更新的脚本。我想省略客户端的管理代码。

第二种选择是创建单独的控制器并在其中使用授权令牌，但我看起来像“再次发明轮子”，因为我需要编写所有负责身份验证的代码。

我可以改进上述选项之一吗？或者也许有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T03:03:55.520

您可能能够使用`Invoke-RestMethod`cmdlet 使用现有的 Web 服务，但它可能需要两个单独的调用。对于这两种调用，您可能需要说`-Method Post`. 使用 WebClient 可以完成所有这些操作，但 cmdlet 可能更易于描述。我实际上并没有尝试过，但它可能看起来像这样：

```
Invoke-RestMethod -Method Post $loginPage -SessionVariable webSession -Body "..."
Invoke-RestMethod -Method Post $uploadPage -WebSession $webSession -Body "..." 
```

对于第一次调用，您指定登录页面的 URL，并通过在参数中提供用户名和密码来模拟 Web 表单登录`-Body`，并用于`-SessionVariable`捕获和存储上下文以使下一个请求经过身份验证。

在第二个请求中，您使用数据上传 URL、`-WebSession`提供第一个请求建立的上下文的参数以及`-Body`上传 CSV。请注意，您需要第二个变量中的 webSession 变量上的美元符号，而不是第一个变量。

当然，您需要存储用户名/密码以供自动化在某处使用，但无人值守自动化始终需要这样做。缓解这种情况的一种可能的巧妙方法是使用基于客户端证书的凭据，而不是 Web 表单身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T05:14:02.230

使用侧通道怎么样？

有两种方法。您要么不时将其发送到客户的 Web 服务器，要么 Web 服务器从您那里下载数据。

对于发送数据，基于 SSL 的 FTP 应该足够安全。这是一个关于如何使用 Powershell 命令 FTP的[示例。](https://stackoverflow.com/questions/265339/whats-the-best-way-to-automate-secure-ftp-in-powershell "例子")为 IIS 配置FTP/SSL 很[容易。](http://www.iis.net/learn/publish/using-the-ftp-service/using-ftp-over-ssl-in-iis-7 "例子")

要接收数据，只需在您自己的网站上发布 CSV。在客户的 Web 服务器上设置一个脚本，该脚本不时下载 CSV。如果除了客户之外的任何人都无法访问 CSV，则需要[客户端证书](https://stackoverflow.com/questions/5621954/how-can-you-add-a-certificate-to-webclient-in-powershell%20%22Example%22.)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:08:49.397

我可能会这样做：

*   第一步：在asp.net服务器上创建一个https网页来接收csv
*   [第 2 步：创建一个 powershell 脚本，该脚本使用-F](http://curl.haxx.se/docs/manpage.html#-F)选项调用**curl**以向其发布文件并在调用时附加您需要的任何元数据
*   第 3 步：收到文件后，使用表单中提供的元数据存储它，并将 clientid/date/etc 附加到文件中

# c# - 包含相同元素的两个数组可以不相等吗？

> ID：16002903
> 
> 赞同：1
> 
> 时间：2013-04-14T18:43:35.867
> 
> 标签：c#, arrays, list, c#-4.0

今天我遇到了一个惊人的问题，我试图找出一个对象是否包含在 List 集合中。问题是列表没有找到对象并返回索引为-1，而我已经可以在那里看到它。然后，我创建了一个自定义*索引查找器*，通过比较属性而不是直接相等来查找对象.

数组如下：

> {ushort[1]} [0]13

并且它们在两者中完全相同，只是其中一个对象包含在 List 中，而另一个对象是自己的。这个问题的原因可能是什么？我已经尝试了各种不同的方法来解决这个问题，但我不能只是弄清楚问题是什么。在这种特殊情况下，导致两个数组之间的比较返回 false 的原因，我使用`Object.equals`了普通比较器和普通`==`比较器。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T18:46:50.587

对于数组，只有在比较指向同一数组的两个引用时，Equals 才会返回 true。要按内容比较不同的数组，可以使用：

```
 Enumerable.SequenceEqual(a1, a2) 
```

此外，如果集合包含您的自定义类型的对象，请确保这些类型覆盖 Equals、相等运算符 (==) 和 GetHashCode。

# jquery - Asana API 错误语法无效标签

> ID：16002909
> 
> 赞同：0
> 
> 时间：2013-04-14T18:43:56.997
> 
> 标签：jquery, asana

我尝试将 Asana API 集成到我的 HTML、CSS 和 Jquery Only 项目中。我得到了响应，但我得到了无效的语法错误，请指导仅使用客户端可用功能做错了什么。我不能使用任何服务器端解决方案。因此，在寻找客户端解决方案方面需要帮助，仅感谢您。

```
$.ajax({
          url : 'https://app.asana.com/api/1.0/workspaces/',
          username : API_KEY,
          dataType: 'jsonp',
          contentType:"application/json",
          success: function (response) {
              console.log(response["data"]);
          },
          error: function (xhr, ajaxOptions, thrownError) {
              console.log(xhr.status);
              console.log(xhr.thrownError);
      }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:15:53.717

（我在 Asana 工作。）

Asana API 目前不支持`jsonp`作为数据类型。您得到的错误可能是 jQuery 引擎试图解释来自 Asana 服务器的不兼容响应。

使用 API 密钥从 Javascript 进行身份验证意味着将完整的客户端凭据暴露在客户端上，这是我们不鼓励的不安全做法；这就是我们今天不支持 jsonp 的原因。

但是，我们[最近刚刚推出了 OAuth](http://blog.asana.com/2013/04/introducing-asana-connect/)，这是一种更安全的身份验证方式。我们预计很快会为连接 OAuth 的客户端添加 jsonp 支持，敬请期待。

# javascript - 具有固定开始和结束的正则表达式

> ID：16002916
> 
> 赞同：0
> 
> 时间：2013-04-14T18:44:40.847
> 
> 标签：javascript, regex

我有以下东西 - 我正在尝试获得财产`calc(100% - 14px)`但没有运气：

```
var a = 'width:calc(100% - 14px); adsasd';
var b = 'width:calc(100% - 14px]; adsasd';

console.log(a.match('width:calc\(.*?\)$'));
console.log(b.match('width:calc\(.*?\)$')); 
```

**示例** [http://jsfiddle.net/zFacF/](http://jsfiddle.net/zFacF/)

两个 console.log 都会输出相同的结果

```
["width:calc(100% - 14px); adsasd", 
 "(100% - 14px); adsasd"] 

["width:calc(100% - 14px]; adsasd", 
 "(100% - 14px]; adsasd"] 
```

如何`calc(100% - 14px)`从给定的字符串中获取？

**@解决**了

`/width:\s?(calc\(.*\))/`

因为 inline`style="width: calc(100% - 14px)"`没有`;`和之间的空格`width`和`calc`不匹配。

[http://jsfiddle.net/zFacF/5/](http://jsfiddle.net/zFacF/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:47:14.290

在你的正则表达式的`$`末尾是拉伸你的模式匹配直到结束..`$`描绘了字符串的结尾..

利用`width:(calc\(.*?\));`

`Group 1`包含您所需的数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:08:04.763

如果您还想验证该字符串是否具有相同的形式，请使用：

```
^width:(calc\(.*\));.*$ 
```

第一组 (group[1]) 将包含所需的结果。

如果您不需要验证，请仅使用：

```
calc\(.*\) 
```

在这种情况下，结果是完全匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T18:48:41.270

这似乎工作正常：http: [//jsfiddle.net/zFacF/1/](http://jsfiddle.net/zFacF/1/)

$ 使 .* 一直匹配到最后。相反，我添加了一个`;`来阻止这种情况发生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T19:09:25.223

`/width:(calc\(.*\))/`

如果你想考虑方括号：

`/width:(calc[(\[].*[)\]])/`

# android - Android在后台执行SU命令？

> ID：16002921
> 
> 赞同：1
> 
> 时间：2013-04-14T18:45:13.847
> 
> 标签：android, service, broadcast, toast, su

我正在编写一个 android 应用程序来设置最大频率、调节器等。当屏幕关闭时。为此，我运行了一个接收屏幕开/关广播意图的服务。当屏幕关闭事件触发时，我从共享首选项中读取并设置用户使用此功能设置的任何内容

```
public static void writeFile(String file, String content) {
    try {
        Process suProcess = Runtime.getRuntime().exec("su"); 
        DataOutputStream out = new DataOutputStream(suProcess.getOutputStream());
        out.writeBytes("echo '" + content + "' > '" + file + "'");
        out.flush();
        out.close();
    }
    catch (IOException e) {
        e.printStackTrace();
    }
} 
```

然后当屏幕重新打开时，我通过重写文件将系统恢复到以前的状态。一切都运行良好，按预期工作。

问题是我在打开/关闭屏幕时注意到一些滞后。此外，当我打开屏幕时，我看到来自超级用户的 toast 消息“应用程序被授予 su 访问权限”，并且每个命令都会弹出一次。有没有办法隐藏那个吐司信息？我还没有找到任何方法来隐藏来自另一个活动的 toast 消息。我知道可以在超级用户应用程序中禁用它们，但这并不理想。我读到您可以编写自己的超级用户二进制文件，但这听起来比简单的 java 编程要复杂得多……听起来也可能导致安全问题。

基本上我在问什么是最好的方法来做到这一点，以便它对用户尽可能无创？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:53:51.520

我没有用过su，但我认为如果你不每次都关闭流，它应该只显示一次toast。

# objective-c - NSKeyedArchiver 和 AttributedString

> ID：16002923
> 
> 赞同：1
> 
> 时间：2013-04-14T18:45:22.227
> 
> 标签：objective-c, core-data, nsattributedstring

我想知道如何将 NSAttributedString 序列化为能够将其连续存储在核心数据 managedObjectContext 中。但是，我找到[了这个](https://stackoverflow.com/questions/10558619/encoding-nsattributedstring-throws-error)答案，但线程中没有进一步的解释。有人可以解释（简而言之）如何手动编码属性字符串吗？将不胜感激！

非常感谢！

编辑：

这就是我所做的：

```
NSMutableData *renderCacheData = [[NSMutableData alloc] init];
    NSKeyedArchiver *renderCacheArchiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:renderCacheData];
    [renderCacheArchiver encodeObject:bSelf.attString forKey:@"aS"]; 
```

在它失败的最后一行，输出如下：

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFType encodeWithCoder:]：无法识别的选择器发送到实例 0x1c538a70”

现在我理解了这里的其他问题，这是由于 CT* 对象无法自行序列化（我的 NSAttributedString 属性字典包含 CTFont 和 CTColorRef 属性。唯一的事情是 - 我不知道如何编写类别或（不太可能？）这些类型的子类，因此它们能够序列化自己。

# java - 打开文件以查看其内容

> ID：16002926
> 
> 赞同：2
> 
> 时间：2013-04-14T18:45:34.870
> 
> 标签：java, file-io

我有一个文件列表。可以说它看起来：

```
String[] lst = new String[] {
    "C:\\Folder\\file.txt", 
    "C:\\Another folder\\another file.pdf"
}; 
```

我需要一些方法来使用默认程序打开这些文件，比如使用记事本的“file.txt”，使用 Adob​​eReader 的“another file.pdf”等等。

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T18:50:28.893

有一种方法可以做到这一点：

```
java.awt.Desktop.getDesktop().open(file); 
```

## Java文档：

> 启动关联的应用程序以打开文件。
> 
> 如果指定的文件是目录，则启动当前平台的文件管理器打开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:50:42.680

[Desktop](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#open%28java.io.File%29)类允许 Java 应用程序启动在本机桌面上注册的关联应用程序以处理 URI 或文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T19:06:54.050

如果您使用 J2SE 1.4 或 Java SE 5，最好的选择是：

```
for(int i = 0; i < lst.length; i++) {
    String path = lst[i];
    if (path.indexOf(' ') > 0) { 
        // Path with spaces
        Runtime.getRuntime().exec("explorer \"" + lst[i] + "\"");
    } else { 
        // Path without spaces
        Runtime.getRuntime().exec("explorer " + lst[i]);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T18:51:22.160

只要确保文件位于正确的位置，这应该可以正常工作。

```
try
{
    File dir = new File(System.getenv("APPDATA"), "data");
    if (!dir.exists()) dir.mkdirs();
    File file = new File(dir"file.txt");
    if (!file.exists()) System.out.println("File doesn't exist");
    else Desktop.getDesktop().open(file);
} catch (Exception e)
{
    e.printStackTrace();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T20:06:01.657

我不知道你现在有一个字符串数组。因此，这个使用正则表达式以您之前指定的格式处理文件列表。如果不需要，请忽略。

如果文件列表很大，并且您希望文件一个一个打开`cmd`效果很好。如果您希望它们一次全部打开，请使用`explorer`. 仅适用于 Windows，但随后适用于几乎所有 JVM 版本。因此，这里需要考虑权衡。

```
public class FilesOpenWith {

    static String listOfFiles = "{\"C:\\Setup.log\", \"C:\\Users\\XYZ\\Documents\\Downloads\\A B C.pdf\"}";

    public static void main(String[] args) {
        if (args != null && args.length == 1) {
            if (args[0].matches("{\"[^\"]+\"(,\\s?\"[^\"]+\")*}")) {
                listOfFiles = args[0];
            } else {
                usage();
                return;
            }
        }
        openFiles();
    }

    private static void openFiles() {
        Matcher m = Pattern.compile("\"([^\"]+)\"").matcher(listOfFiles);
        while (m.find()) {
            try {
                Runtime.getRuntime().exec("cmd /c \"" + m.group(1) + "\"");
                // Runtime.getRuntime().exec("explorer \"" + m.group(1) + "\"");
            } catch (IOException e) {
                System.out.println("Bad Input: " + e.getMessage());
                e.printStackTrace(System.err);
            }
        }
    }

    private static void usage() {
        System.out.println("Input filelist format = {\"file1\", \"file2\", ...}");
    }

} 
```

# c# - 使用属性进行枚举描述

> ID：16002929
> 
> 赞同：0
> 
> 时间：2013-04-14T18:45:41.337
> 
> 标签：c#

我有一个枚举并想为每个值添加一个描述。我读了一些关于属性的东西，这可以解决我的问题。我尝试从 msdn 实施解决方案，但没有成功。如果 iam 使用类但不使用枚举值，它可以工作。

是否有可能有人发布它是如何工作的？

问候

这是 msdn 解决方案的链接。这就是我尝试做的。唯一的区别是我想处理枚举值。

[http://msdn.microsoft.com/de-de/library/aa288454(v=vs.71).aspx](http://msdn.microsoft.com/de-de/library/aa288454(v=vs.71).aspx)

例子：

```
public enum Color
{
  [Description("This is red")]
  Red,
  [Description("This is blue")]
  Blue
} 
```

我如何才能访问描述以及如何实现描述类/方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:52:37.650

像这样的东西

```
using System.ComponentModel;

public enum MyColors{
   [Description("Editor Color")]
   White,
   [Description("Errors Color")]
   Red,
   [Description("Comments Color")]
   Green
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T06:08:22.233

试试这个枚举

```
public enum MyColors{
[Description("Editor Color")]
White,
[Description("Errors Color")]
Red,
[Description("Comments Color")]
Green
}

var type = typeof(MyColors);
var memInfo = type.GetMember(MyColors.White.ToString());
var attributes = memInfo[0].GetCustomAttributes(typeof(DescriptionAttribute),
false);
var description = ((DescriptionAttribute)attributes[0]).Description; 
```

# .net - 游戏图形 - 取决于质量的 FPS 控制？

> ID：16002932
> 
> 赞同：1
> 
> 时间：2013-04-14T18:46:04.123
> 
> 标签：.net, vb.net, winforms, performance, graphics

我目前正在制作一个使用[Graphics 类](http://msdn.microsoft.com/en-gb/library/system.drawing.graphics.aspx)来绘制大部分游戏对象的游戏（在 vb.net 中），但我遇到了老的性能问题。为了解决滞后问题，我添加了一些代码来自动降低游戏质量，这样我就可以尝试提高游戏的速度，这在一定程度上是有效的，但是当更多的“敌人”被添加到更高的水平。我对图形类很陌生（几天前才开始使用它），所以我知道的唯一有助于加快游戏速度的事情是：关闭抗锯齿，并降低计时器间隔（这几乎控制了我的游戏刷新率），那么除了前面的，还有其他方法可以提高我的游戏性能吗？

游戏截图... ![截屏](https://i.stack.imgur.com/uaVAA.jpg)

到目前为止，这是我的代码（质量调整位在底部），

```
Public Class Form1

Private keysPressed As New HashSet(Of Keys)
Private firstRun As Boolean = True
Private mouseDownB As Boolean = False
Private newLevel As Boolean = True
Private randomColour As New Random
Private RandomEnemyX As New Random
Private RandomEnemyY As New Random
Private RandomEnemySide As New Random
Private life As Integer = 5
Private score As String = 0
Private playerX As Integer = 403
Private playerY As Integer = 206
Private totaltEnemyCount As Integer = 10
Private enemyCount As Integer = 0
Private enemyX(0) As Integer
Private enemyY(0) As Integer
Private enemyID(0) As Integer
Private EX As Integer = 0
Private EY As Integer = 0
Private ES As Integer = 0
Private enemyMoved As Integer
Private enemySpeed As Integer = 1
Private enemyAttacked As Integer = 0
Private enemyActive As Integer = 0
Private levelNumber As Long = 0
Private FPS As Integer = 40
Private g1 As Graphics
Private enemyCountIncrease As Boolean = True
Private enemySpeedIncrease As Boolean = False

Private Sub Form1_Shown(sender As Object, e As EventArgs) Handles Me.Shown
    g1 = Me.CreateGraphics
    g1.SmoothingMode = Drawing2D.SmoothingMode.AntiAlias                           
End Sub

Private Sub Form1_MouseDown(sender As Object, e As MouseEventArgs) Handles Me.MouseDown
    mouseDownB = True
End Sub

Private Sub Form1_MouseUp(sender As Object, e As MouseEventArgs) Handles Me.MouseUp
    mouseDownB = False
End Sub

Private Sub Form1_KeyDown(sender As Object, e As KeyEventArgs) Handles Me.KeyDown
    If e.KeyCode = Keys.Left Then
        keysPressed.Add(Keys.Left)
    ElseIf e.KeyCode = Keys.Up Then
        keysPressed.Add(Keys.Up)
    ElseIf e.KeyCode = Keys.Right Then
        keysPressed.Add(Keys.Right)
    ElseIf e.KeyCode = Keys.Down Then
        keysPressed.Add(Keys.Down)
    End If
End Sub

Private Sub Form1_KeyUp(sender As Object, e As KeyEventArgs) Handles Me.KeyUp
    keysPressed.Remove(e.KeyCode)
End Sub
'''''''''''''''''''''''''Random colour generator''''''''''''''''''''''''''''
Private Function R() As String
    Return randomColour.Next(0, 255)
End Function

Private Function G() As String
    Return randomColour.Next(0, 255)
End Function

Private Function B() As String
    Return randomColour.Next(0, 255)
End Function
'''''''''''''''''''''''''Random location generator''''''''''''''''''''''''''''
Private Function X() As String
    Return RandomEnemyX.Next(0, 494)
End Function

Private Function Y() As String
    Return RandomEnemyY.Next(24, 348)
End Function
'''''''''''''''''''''''''Main display & player generation''''''''''''''''''''''''''''''''
Private Sub mainPaint(sender As Object, e As EventArgs) Handles Timer1.Tick
    Timer1.Interval = FPS
    Dim ST As New Stopwatch
    ST.Start()
    If firstRun = True Then
        levelNumber = levelNumber + 1
        g1.DrawString("Level " & levelNumber, New Font("DigifaceWide", 64, GraphicsUnit.Pixel), New SolidBrush(Color.FromArgb(191, R, G, B)), X, Y)
        g1.DrawRectangle(New Pen(Color.FromArgb(128, R, G, B)), 0, 0, 884, 24)
        g1.FillEllipse(New SolidBrush(Color.FromArgb(128, R, G, B)), playerX, playerY, 24, 24)
        g1.FillRectangle(New SolidBrush(Color.FromArgb(128, R, G, B)), 0, 0, 884, 24)
        g1.DrawString("Life: 5", New Font("DigifaceWide", 20, GraphicsUnit.Pixel), New SolidBrush(Color.FromArgb(191, R, G, B)), 2, 0)
        g1.DrawString("Score: 0", New Font("DigifaceWide", 20, GraphicsUnit.Pixel), New SolidBrush(Color.FromArgb(191, R, G, B)), 100, 0)
        firstRun = False
    End If
    '''''''''''''''''''''''''''''''Move player''''''''''''''''''''''''''''''
    If keysPressed.Contains(Keys.Left) Then
        If playerX > 0 Then
            playerX = playerX - 5
            g1.FillEllipse(New SolidBrush(Color.FromArgb(128, R, G, B)), playerX, playerY, 24, 24)
        End If
    ElseIf keysPressed.Contains(Keys.Up) Then
        If playerY > 24 Then
            playerY = playerY - 5
            g1.FillEllipse(New SolidBrush(Color.FromArgb(128, R, G, B)), playerX, playerY, 24, 24)
        End If
    ElseIf keysPressed.Contains(Keys.Right) Then
        If playerX < 860 Then
            playerX = playerX + 5
            g1.FillEllipse(New SolidBrush(Color.FromArgb(128, R, G, B)), playerX, playerY, 24, 24)
        End If
    ElseIf keysPressed.Contains(Keys.Down) Then
        If playerY < 388 Then
            playerY = playerY + 5
            g1.FillEllipse(New SolidBrush(Color.FromArgb(128, R, G, B)), playerX, playerY, 24, 24)
        End If
    End If
    '''''''''''''''''''''''''''''''Laser generation'''''''''''''''''''''''''''''''''''''
    If mouseDownB = True Then
        g1.DrawLine(New Pen(Color.FromArgb(102, R, G, B)), playerX + 12, playerY + 12, Control.MousePosition.X - Me.Bounds.X, Control.MousePosition.Y - Me.Bounds.Y)
    End If
    ''''''''''''''''''''''''''''''''Enemy generation - New level''''''''''''''''''''''''''''''''''''
    If newLevel = True Then
        levelNumber = levelNumber + 1
        Do While enemyCount < totaltEnemyCount
            Dim i As Integer = 0
            ReDim enemyID(0)
            Do While enemyID.Length <= totaltEnemyCount
                EX = RandomEnemyX.Next(0, 872)
                EY = RandomEnemyY.Next(24, 400)
                ES = RandomEnemySide.Next(0, 4)
                ReDim Preserve enemyID(i + 1)
                enemyID(i) = 1
                ReDim Preserve enemyX(i + 1)
                ReDim Preserve enemyY(i + 1)
                If ES = 0 Then 'Left side
                    enemyX(i) = 0
                    enemyY(i) = EY
                ElseIf ES = 1 Then 'Top side
                    enemyX(i) = EX
                    enemyY(i) = 24
                ElseIf ES = 2 Then 'Right side
                    enemyX(i) = 872
                    enemyY(i) = EY
                ElseIf ES = 3 Then 'Bottom side
                    enemyX(i) = EX
                    enemyY(i) = 400
                End If
                g1.FillEllipse(New SolidBrush(Color.FromArgb(128, Color.Red)), enemyX(i), enemyY(i), 12, 12)
                enemyCount = enemyID.Length
                enemyActive = enemyActive + 1
                i = i + 1
            Loop
        Loop
        newLevel = False
    End If
    ''''''''''''''''''''''''''''''''Enemy attacked''''''''''''''''''''''''''''''''''''''''
    Dim iii As Integer = 0
    Do While iii < totaltEnemyCount
        If (((Control.MousePosition.X - Me.Location.X) > enemyX(iii))) And ((Control.MousePosition.X - Me.Location.X) < (enemyX(iii) + 16)) And ((Control.MousePosition.Y - Me.Location.Y) > enemyY(iii)) And ((Control.MousePosition.Y - Me.Location.Y) < (enemyY(iii) + 16)) Then
            If mouseDownB = True Then
                enemyID(iii) = -1
                enemyX(iii) = -1
                enemyY(iii) = -1
                enemyActive = enemyActive - 1
                enemyCount = enemyCount - 1
            End If
        End If
        iii = iii + 1
    Loop
    ''''''''''''''''''''''''''''''''Move enemy'''''''''''''''''''''''''''''
    Dim ii As Integer = 0
    Do While enemyMoved < totaltEnemyCount
        If enemyActive < 1 Then
            enemyCount = 0
            newLevel = True
            If enemyCountIncrease = True Then
                totaltEnemyCount = totaltEnemyCount + 50
            ElseIf enemySpeedIncrease = True Then
                enemySpeed = enemySpeed + 1
            End If
            g1.DrawString("Level " & levelNumber, New Font("DigifaceWide", 64, GraphicsUnit.Pixel), New SolidBrush(Color.FromArgb(191, R, G, B)), X, Y)
            Exit Sub
        End If
        If enemyID(ii) = -1 Then
            GoTo skipMove
        End If
        If (enemyX(ii) - (playerX + 4)) < 0 Then 'Enemy on left
            enemyX(ii) = enemyX(ii) + enemySpeed
        End If
        If (enemyX(ii) - (playerX + 4)) > 0 Then 'Enemy on right
            enemyX(ii) = enemyX(ii) - enemySpeed
        End If
        If (enemyY(ii) - (playerY + 4)) < 0 Then 'Enemy above
            enemyY(ii) = enemyY(ii) + enemySpeed
        End If
        If (enemyY(ii) - (playerY + 4)) > 0 Then 'Enemy below
            enemyY(ii) = enemyY(ii) - enemySpeed
        End If
        g1.FillEllipse(New SolidBrush(Color.FromArgb(51, Color.Red)), enemyX(ii), enemyY(ii), 12, 12)
skipMove:
        enemyMoved = enemyMoved + 1
        ii = ii + 1
    Loop
    enemyMoved = 0
    ''''''''''''''''''''''QDSA - Quality Depentant Speed Adjustment''''''''''''''''''''
    ST.Stop()
        Dim elapTick As Decimal = ST.ElapsedTicks
        If elapTick < 5000 Then 'Slow down
            FPS = FPS + 1
            enemySpeedIncrease = False
            g1.SmoothingMode = Drawing2D.SmoothingMode.AntiAlias
            enemyCountIncrease = True
        ElseIf elapTick > 5000 Then 'Speed up
            If FPS > 1 Then
                FPS = FPS - 1
            End If
            g1.SmoothingMode = Drawing2D.SmoothingMode.None
            enemyCountIncrease = False
            If enemySpeed < 4 Then
                enemySpeedIncrease = True
            Else
                enemySpeedIncrease = False
            End If
        End If
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T16:10:35.317

我已经制作了一个类似于您需要的示例 WPF 项目，只是为了让您了解 WPF 与古代技术相比是多么强大、美观和快速。

它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/V1nW8.png)

在这里完全发布它的代码有点太多了，所以[这里是一个指向](https://anonfiles.com/file/9cae0f3766ed95a78d48b4e8cdf345c9)带有完整源代码的 RAR 文件的链接。

主要的 UI XAML 是这样的：

```
<Window x:Class="SamsGameSample.MainWindow"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:SamsGameSample"
        Title="SamsGameSample"
        PreviewKeyDown="Window_PreviewKeyDown"
        PreviewKeyUp="Window_PreviewKeyUp"
        SizeChanged="Window_SizeChanged"
        WindowState="Maximized">
    <Window.Resources>
        <DataTemplate DataType="{x:Type local:Player}">
            <Ellipse Fill="Green" Stroke="Black" Height="{Binding Size.Height}" Width="{Binding Size.Width}"/>
        </DataTemplate>

        <DataTemplate DataType="{x:Type local:Enemy}">
            <Ellipse Fill="Red" Stroke="Black" Height="{Binding Size.Height}" Width="{Binding Size.Width}"/>
        </DataTemplate>
    </Window.Resources>

    <DockPanel>
        <DockPanel.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0" Opacity=".6">
                <GradientStop Color="Blue" Offset="0"/>
                <GradientStop Color="Red" Offset=".5"/>
                <GradientStop Color="Green" Offset="1"/>
            </LinearGradientBrush>
        </DockPanel.Background>
        <StackPanel Orientation="Horizontal" Background="#70000000" DockPanel.Dock="Top">
            <TextBlock Text="{Binding Lives, StringFormat='Lives: {0}'}" Margin="10" Foreground="AliceBlue"/>
            <TextBlock Text="{Binding Score, StringFormat='Score: {0}'}" Margin="10" Foreground="AliceBlue"/>
        </StackPanel>
        <ItemsControl ItemsSource="{Binding GameObjects}" x:Name="GameArea">
            <ItemsControl.ItemContainerStyle>
                <Style TargetType="ContentPresenter">
                    <Setter Property="Canvas.Left" Value="{Binding Location.X}"/>
                    <Setter Property="Canvas.Top" Value="{Binding Location.Y}"/>
                </Style>
            </ItemsControl.ItemContainerStyle>
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas IsItemsHost="True"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </DockPanel>
</Window> 
```

*   将我的项目中的代码量（以及它的清洁度）与在 winforms 中执行几乎任何操作所需的多个 hack 进行比较。
*   还要比较性能和分辨率独立性。

# windows - VS lib 工具出错，“无法打开共享对象文件”

> ID：16002933
> 
> 赞同：1
> 
> 时间：2013-04-14T18:46:21.570
> 
> 标签：windows, dll, visual-studio-2012, cygwin, static-libraries

我没有很多在 Windows 下构建库的经验，而且我很难在网上找到信息，“lib”和“def”不是我期望的很好的搜索词。无论如何，我的问题如下所示；虽然`.dll`和`.lib`文件实际上是构建和安装的，但使用它们失败了，所以我想我最好解决这个问题。lib 找不到的文件在 directory`exports`中，它是当前目录的子目录。当我尝试构建一个类似的库（GotoBLAS）时，也会发生同样的事情。

![在此处输入图像描述](https://i.stack.imgur.com/xMFyP.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T15:34:49.983

我知道这是几个月后的事了，但我通过更改 PATH 上的 lib.exe 解决了这个确切的问题。

而不是“C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\x86_amd64”（或只是 bin 或 x86arm），您需要有“C:\Program Files (x86)\Microsoft Visual Studio 11.0 \VC\bin\amd64"

希望对您（或发现此问题的任何其他人）有所帮助

# java - 如何从 Java .class 文件中获取方法体偏移量

> ID：16002935
> 
> 赞同：1
> 
> 时间：2013-04-14T18:46:51.160
> 
> 标签：java, class, bytecode

如何在开始方法体的 Java .class 文件中查找

前任。

```
package com.test;

class Hello
{

    public static boolean isTrue()  {
        return true;
    }

    public static void main(String args[])
    {

    }
} 
```

我想知道`isTrue()`Hello.class 上的启动方法主体在哪里

我可以在地址 0x0205 处找到带有十六进制编辑器的 04 0C （字节码：iconst_1 ireturn ），但我希望以编程方式将这个值用于任何名称的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:10:26.450

在 JVM 类文件格式中，偏移量不存储到特定部分。相反，每个项目都有自己的长度，并且是按顺序解析的。这意味着为了找到方法代码，您至少必须能够解析常量池以获取每种类型并计算字符串长度，因为方法位于常量池之后。

此时，您不妨使用功能齐全的类文件解析器。那里有很多图书馆。

PS 在字节码级别，方法不是通过名称唯一标识，而是通过（名称，描述符）对。多个方法可以具有相同的名称。字段也是如此。

# javascript - Dojo 如何捕获用户对 onkeyup 事件的 Dojo.FilteringSelect 输入

> ID：16002946
> 
> 赞同：1
> 
> 时间：2013-04-14T18:47:47.760
> 
> 标签：javascript, html, dojo

我正在追赶一个`onkeyup`关于道场的活动`filteringSelect`但是似乎

```
var userInput = dijit.byId('someId').attr("value"); 
```

只返回 "" 或某个精确等于选项之一的值。因此，关于事件，filteringSelect 似乎只能返回`<Select>`dijit 的部分而不是部分的值。`<input type="text">``onkeyup`

那么捕获用户当前输入的 FilteringSelect 的正确程序是什么？顺便说一句，当前应用程序在 Dojo 1.6 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T06:40:12.633

那么您可能应该尝试该`"displayedValue"`属性：

```
var userInput = dijit.byId('someId').get("displayedValue"); 
```

如果您需要有关可以使用的属性的一些信息，我建议您阅读[API 文档](http://dojotoolkit.org/api/1.8/dijit/form/FilteringSelect#displayedValue)（对于 dijit 库，它通常有很好的文档记录）。

# networking - 从以下语句计算 IP 地址

> ID：16002949
> 
> 赞同：2
> 
> 时间：2013-04-14T18:48:21.580
> 
> 标签：networking, ip, subnet

我不想对我的问题那么具体，但我不明白，想得到一些帮助。声明说：

> 该接口应在 192.168.20.0/24 地址空间中的下一个（向上）可用 /27 子网中寻址。

我不明白这是什么意思。我明白那个：

*192.168.20.0/24*表示子网掩码为*255.255.255.0*，地址范围为*192.168.20.0* - *192.168.20.255*。但是对于该地址空间中下一个向上可用的 /27 子网，该语句意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:52:28.943

下一个 /27 未被其他东西使用。如果 192.168.20.0/27 可用，就拿去吧。否则，如果 192.168.20.32/27 可用，就拿去。否则，如果 192.168.20.64/27 可用......等等。您应该使用该子网中的哪个地址，以及如何确定什么是“可用的”在您提供的上下文中都不清楚，但可能在某处提供。

# mysql - 具有 AUTO_INCREMENT 列的 MySQL 表中简单 SELECT 的默认顺序是什么

> ID：16002951
> 
> 赞同：1
> 
> 时间：2013-04-14T18:48:28.923
> 
> 标签：mysql, sql, sql-order-by

我有一个带有 AUTO_INCREMENT 列 (id_mt) 的表 (mytable)。当我做一个简单的查询时

```
SELECT * FROM mytable; 
```

结果按 AUTO_INCREMENT 列排序，如

```
SELECT * FROM mytable order by id_mt; 
```

所以我的问题是：当您不使用“order by”并且如果您有 AUTO_INCREMENT 列时，结果顺序的规则（如果有）是什么？

对于一些参考其他帖子的人来说清楚：我不使用

```
ALTER TABLE mytable ORDER BY sort_order ASC; 
```

很明显，当您使用 ORDER BY 查询时，此查询只会改变性能。我的问题更多的是“AUTO_INCREMENT 是否改变（强制？）简单 SELECT 的顺序？”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T18:50:32.267

从[DBA Stack Exchange 站点](https://dba.stackexchange.com/a/6053/20509)：

在 SQL 世界中，顺序不是一组数据的固有属性。因此，除非您使用 ORDER BY 子句查询您的数据，否则您的 RDBMS 无法保证您的数据将以特定顺序返回——甚至以一致的顺序返回。

*   因此，为了回答您的问题，MySQL 会根据需要对记录进行排序，而不会保证一致性。
*   如果您只是对 MySQL 的内部结构感到好奇，Rolando 提供了一个有趣的答案。
*   另一方面，如果您打算依赖此订单进行任何操作，则**必须使用 指定所需的订单`ORDER BY`。做任何其他事情都是在为不受欢迎的意外做好准备**。

# c++ - 处理 WM_KEYDOWN

> ID：16002953
> 
> 赞同：2
> 
> 时间：2013-04-14T18:48:35.637
> 
> 标签：c++, winapi

如果按下 shift 键，我试图让我的程序切换一个布尔值。但是，由于某种原因，它似乎没有收到消息，因为我已经将 MessageBoxes 放在 KEYDOWN 和 KEYUP 情况下，并且它们不会被触发。这感觉像是一个菜鸟问题，但任何帮助将不胜感激。

```
BOOL CALLBACK CreateRoom(HWND hwnd, UINT Message, WPARAM wParam, LPARAM lParam)
{
static char *achTileDetails = new char[100,100];
static POINT *pDimensions = new POINT, *pMonsterLocations = new POINT[10], *pMinDisplay = new POINT, *pMaxDisplay = new POINT;
static HBITMAP *pahbmTileset = new HBITMAP[4];
static bool *pbShowBars = new bool;
switch(Message)
{
case WM_INITDIALOG:
    g_hDialogInUse = hwnd;
    SetFocus(hwnd);
    for (int iii = 0; iii < 100; iii++)
        for(int jjj = 0; jjj < 100; jjj++)
            achTileDetails[iii,jjj] = 'g';
    (*pDimensions).x = 20;
    (*pDimensions).y = 10;
    (*pMinDisplay).x = 0;
    (*pMinDisplay).y = 0;
    (*pMaxDisplay).x = 20;
    (*pMaxDisplay).y = 10;
    for (int iii = 0; iii < 4; iii++)
        pahbmTileset[iii] = LoadBitmap(GetModuleHandle(NULL), MAKEINTRESOURCE(IDB_CLEAR_GROUND + iii));
    return TRUE;
case WM_PAINT:
    DisplayRoom(hwnd, achTileDetails, *pMaxDisplay, *pMinDisplay, pahbmTileset, *pbShowBars);
    break;
case WM_COMMAND:
    switch(LOWORD(wParam))
    {
    case IDCANCEL:
        delete[] achTileDetails;
        delete pDimensions;
        delete[] pMonsterLocations;
        delete pMinDisplay;
        delete pMaxDisplay;
        delete[] pahbmTileset;
        delete pbShowBars;
        EndDialog(hwnd, IDCANCEL);
        break;
    }
    break;
case WM_LBUTTONDOWN:

    break;
case WM_KEYDOWN:
    MessageBox(hwnd, "Down", "", NULL);
    switch (wParam)
    {
    case VK_SHIFT:
        *pbShowBars = true;
        InvalidateRect(hwnd, NULL, TRUE);
        UpdateWindow(hwnd);
        break;
    }
    break;
case WM_KEYUP:
    {
        MessageBox(hwnd, "Up", "", NULL);
        switch(wParam)
        {
        case VK_SHIFT:
            *pbShowBars = false;
            InvalidateRect(hwnd, NULL, TRUE);
            UpdateWindow(hwnd);
            break;
        }
    }
    break;
default:
    return FALSE;
}
} 
```

消息循环：

```
 while(GetMessage(&Msg, NULL, 0, 0) != 0)
{
    TranslateMessage(&Msg);
    DispatchMessage(&Msg);
} 
```

现在这是此回调的完整代码。我知道顶部的各种静态动态变量可能不是最有效的方法，但可以满足我的目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:16:53.613

WM_KEYUP/DOWN 消息发布到具有焦点的窗口。这不会是您的对话窗口，我们可以从 WM_COMMAND 消息处理程序中得知您至少有一个取消按钮。这很可能成为焦点。除了按空格键之外，该按钮对消息没有任何特殊作用。

这个问题是通过使用对话框作为主窗口开始的。它不完全是实现游戏的合适窗口类型，它适用于对话框。在窗口仅充当容器的情况下，工作由您放在对话框上的控件完成。您可以通过在消息循环中拦截消息来拯救它，然后再将其分派到具有焦点的窗口。TranslateAccelerator() 函数是实现快捷键的标准方法。或者通过在循环内调用 IsDialogMessage 并实现 WM_GETDLGCODE 的处理程序。

# html - 在非 html5 浏览器中没有 hashbang 的 angular.js

> ID：16002955
> 
> 赞同：1
> 
> 时间：2013-04-14T18:48:47.773
> 
> 标签：html, angularjs, browser-history, history.js

有没有人设法摆脱在非 html5 浏览器中运行的 angular.js 应用程序的 hashbang url？

我有一个针对 IE8/9 的应用程序，我不希望有 hashbang url。因此，希望将 html5 polyfills（history.js 等）与 angular 一起使用。是推荐的方法吗？

# jquery - jQuery 哈希历史 - 没有历史

> ID：16002961
> 
> 赞同：0
> 
> 时间：2013-04-14T18:49:20.467
> 
> 标签：jquery, ajax, hash, history

我正在使用[Ben Almon 的 Hash history 插件](http://benalman.com/projects/jquery-bbq-plugin/)，一切正常，除了使用返回按钮返回主页时 - 它没有哈希标签。

所以我要使用后退按钮从：www.mysite.com/#category1 到 www.mysite.com/。

尽管浏览器发生了变化，但我的页面并没有重新加载。

我的代码与他的示例代码几乎相同。虽然，如果 URL 中没有哈希标记，我只想准确加载浏览器 URL 中的内容。目前它什么也不做。

哪来的**？？？**'s 在我下面的代码中，我尝试输入一行以将 URL 重定向到我的主页，但它一直在无限循环中触发，因为插件读取没有#tag，所以再次重新加载页面。

所以问题是，应该在 ??? 以下：

```
 $(document).ready(function() 
    {
       // Bind an event to window.onhashchange that, when the hash changes, gets the
      // hash and adds the class "selected" to any matching nav link.

      $(window).hashchange( function(){
        var hash = location.hash;
        var param=  ( hash.replace( /^#/, '' ) || 'Blank' );

    if(param=='Blank'){ **?????**}

     else
     {
      // Set the page title based on the hash.
      document.title = ( param );

     //do other stuff 
     }
     });

      // Since the event is only triggered when the hash changes, we need to trigger
      // the event now, to handle the hash the page may have loaded with.

          $(window).hashchange();

}); 
```

# javascript - 无法在全局范围内使用 document.getElementById()

> ID：16002978
> 
> 赞同：0
> 
> 时间：2013-04-14T18:50:46.830
> 
> 标签：javascript, getelementbyid

当我在全局范围内尝试这个时：

```
document.getElementById("p1").innerHTML ="Howdy mate"; 
```

它不起作用，firebug 报告错误：

```
TypeError: document.getElementById is null 
```

但是在函数内部时，相同的指令效果很好：

```
function sayHello(){
    document.getElementById("p1").innerHTML ="Howdy mate";
} 
```

我还没有找到任何文献来解释这种行为。任何人都可以帮忙吗？

编辑：@All，正确的错误信息是

`document.getElementById("p1") is null` 不是

`Window.getElementById("p1") is not a function`

如前所述。我已更正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:56:54.173

可能是您在`document.getElementById("p1").innerHTML ="Howdy mate";` 加载元素之前调用的？

[http://jsbin.com/abejiz/1/edit](http://jsbin.com/abejiz/1/edit)与[http://jsbin.com/abejiz/2/edit](http://jsbin.com/abejiz/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:43:18.403

@All，我按照@user2264587 的回答修改了我的代码。问题是我将我的 javascript 代码加载到`<head>`文档的标签中，而`<p>`元素`id="p1"`位于`<body>`. 因此，javascript 指令实际上是在`<p>`加载元素之前执行的。我现在已经在里面`<body>`和之后放置了代码`<p>`：

```
<body>
...
<p id="p1"><p>
<script>
        document.getElementById("p1").innerHTML ="Howdy mate";
</script>

</body> 
```

它工作正常。

# maven - java.lang.ClassNotFoundException：javax.faces.webapp.FacesServlet，tomcat 看不到 javaee-api-7.0-b83.jar

> ID：16002979
> 
> 赞同：5
> 
> 时间：2013-04-14T18:50:47.297
> 
> 标签：maven, tomcat, jakarta-ee, classnotfoundexception

我正在尝试从 Java EE 教程运行示例guessnumber-jsf。它在这里：[https ://svn.java.net/svn/javaeetutorial~svn](https://svn.java.net/svn/javaeetutorial~svn)

pom.xml 中没有依赖项。所以输出文件没有 .jar 文件。当我尝试将 javaee-api-7.0-b83.jar 放入 tomcat/lib 或 WEB-INF/lib/javaee-api-7.0-b83.jar 时，没有任何变化。

当我尝试打开

本地主机：8080/guessnumber-jsf/faces/greeting.xhtml

我得到 ClassNotFoundException。我在哪里可以获得面部教程所需的罐子列表？我怎样才能连接它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T09:17:57.340

您不能将那个 Java EE jar 放在 Tomcat 中并期望它神奇地变成一个 Java EE 服务器。

该特定 jar 仅包含要链接的 API（例如 C/C++ 术语中的“标题”）。它不包含任何实现。

最简单的方法是安装 Tomcat 并下载 TomEE。可选择下载 GlassFish。

这些都已经包含了您需要的所有功能，无需将任何内容放入 WEB-INF/lib。（如果使用 Maven 将 Java EE 6 GAV 作为pom 中*提供的范围的依赖项）。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-19T05:46:10.083

如果您使用的是 Maven 项目，则可以通过添加以下依赖项来修复此错误：

```
<dependency>
    <groupId>org.glassfish</groupId>
    <artifactId>javax.faces</artifactId>
    <version>2.2.7</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T07:02:42.683

添加到 Mike Braun 的答案中，Web 配置文件的**Java EE** 6 GAV 是：

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-web-api</artifactId>
    <version>6</version>
    <scope>provided</scope>
</dependency> 
```

特别注意范围：“提供”。这意味着您的 Maven 项目将与此链接，但它希望您的运行时具有实现。对于 TomEE、GlassFish、JBoss AS 7.x 等，情况确实如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-21T10:28:44.837

在您的类路径（.classpath）中确保您有类似的条目

```
<attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/> 
```

# asp.net-mvc - 在开发机器上打开水晶报告时出错

> ID：16002980
> 
> 赞同：0
> 
> 时间：2013-04-14T18:50:48.560
> 
> 标签：asp.net-mvc, visual-studio, crystal-reports

我收到错误不支持的操作。尝试以编程方式显示在 Crystal Reports 环境中开发的 Crystal Report 时，无法在 C++ 堆栈中打开由 JRC 引擎处理的文档。

我正在使用 MS Visual Studio 2012 并尝试发布我用于在下面调用此报告的整个代码以及堆栈跟踪。问题出现在我的 VS 开发环境中。当它在发布应用程序后发生时，我已经看到了几个帖子和解决方案。我对 Crystal Reports 很陌生，我无法找到一种方法来完成这项工作。发生在负载点。

谢谢你的帮助

```
rpt properties
Build Action: Content
Cope to Output Directory: Do not copy
Custom Tool: blank
Custom Tool Name: blank

Imports CrystalDecisions.CrystalReports.Engine
Public Class CrystalReportsController
    Inherits System.Web.Mvc.Controller

    Public Function EmployeeQuoteLanscape() As ActionResult
        Dim rptH As New ReportClass()
        rptH.FileName = Server.MapPath("~/Content/Reprots/Quote/EmployeeQuoteLandscape.rpt")
        rptH.Load()
        rptH.SetDataSource("")
        Dim stream As IO.Stream = rptH.ExportToStream(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat)
        Return File(stream, "application/pdf")
    End Function
End Class 
```

“/”应用程序中的服务器错误。

不支持的操作。JRC 引擎处理的文档无法在 C++ 堆栈中打开。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Runtime.InteropServices.COMException：不支持的操作。JRC 引擎处理的文档无法在 C++ 堆栈中打开。

源错误：

第 6 行：Dim rptH As New ReportClass() 第 7 行：rptH.FileName = Server.MapPath("~/Content/Reprots/Quote/EmployeeQuoteLandscape.rpt") 第 8 行：rptH.Load() 第 9 行：rptH.SetDataSource( "") 第 10 行：昏暗流 As IO.Stream = rptH.ExportToStream(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat)

源文件：D:\Visual Studio Projects\GBIP\gbip_new\gbip_new\Controllers\CrystalReportsController.vb 行：8

堆栈跟踪：

[COMException (0x80041811)：不支持的操作。JRC 引擎处理的文档无法在 C++ 堆栈中打开。] CrystalDecisions.ReportAppServer.ClientDoc.ReportClientDocumentClass.Open(Object& DocumentPath, Int32 Options) +0 CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.Open(Object& DocumentPath, Int32 Options) +138 CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.EnsureDocumentIsOpened() +546

[CrystalReportsException: 加载报告失败。] CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.EnsureDocumentIsOpened() +647 CrystalDecisions.CrystalReports.Engine.ReportDocument.Load(String filename, OpenReportMethod openMethod, Int16 parentJob) +1799 CrystalDecisions.CrystalReports.Engine.ReportClass.Load( String reportName, OpenReportMethod openMethod, Int16 parentJob) +278 CrystalDecisions.CrystalReports.Engine.ReportClass.Load() +38 gbip_new.CrystalReportsController.EmployeeQuoteLanscape() 在 D:\Visual Studio Projects\GBIP\gbip_new\gbip_new\Controllers\CrystalReportsController.vb ：8 lambda_method（闭包，ControllerBase，Object[]）+102 System.Web.Mvc.ActionMethodDispatcher.Execute（ControllerBase 控制器，Object[] 参数）+59 System.Web.Mvc.ReflectedActionDescriptor。执行（ControllerContext 控制器上下文，IDictionary`2 parameters) +435 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2个参数) +60 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeSynchronousActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary `2 parameters) +50 System.Web.Mvc.Async.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41() +75 System.Web.Mvc.Async.<>c__DisplayClass8`1.b__7(IAsyncResult *) +44 System.Web.Mvc.Async.WrappedAsyncResult `1.End() +139 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +102 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +49 System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +126 System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +323 System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +44 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +139 System. Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +102 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +50 System.Web.Mvc.Async.<>c* _DisplayClass2a.b_ *20 () +68 System.Web.Mvc.Async.<>c* _DisplayClass25.b_ *22(IAsyncResult asyncResult) +184 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +136 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +56 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +40 System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +40 System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +47 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +151 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +59 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +40 System.Web .Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +44 System.Web.Mvc.Async.<>c* _DisplayClass4.b__3(IAsyncResult ar) +47 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +151 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +59 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +40 System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +39 System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +39 System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +45 System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +47 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +151 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +59 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +40 System.Web .Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +40 System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult 结果) +38 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629296 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.18034

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T20:14:16.870

“报告”一词在您的文件路径中拼写错误。也许这就是问题所在？

# angularjs - AngularJS - 如何在整个页面加载时进行重定向？

> ID：16002984
> 
> 赞同：93
> 
> 时间：2013-04-14T18:51:11.917
> 
> 标签：angularjs, routing

我想做一个重新加载整个页面的重定向，以便在页面加载时刷新来自我的 Web 服务器的 cookie。`window.location = "/#/Next"`并且`window.location.href = "/#/Next"`不工作，他们做了一个不会击中服务器的 Angular 路由。

在 Angular 控制器中发出完整服务器请求的正确方法是什么？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2013-04-14T18:54:01.187

**对于`<a>`标签**：

你需要贴上`target="_self"`你的`<a>`标签

AngularJS 会在三种情况下执行完整的页面重新加载：

*   包含目标元素的链接
    示例：`<a href="/ext/link?a=b" target="_self">link</a>`
*   指向不同域的绝对链接
    示例：`<a href="http://angularjs.org/">link</a>`
*   以“/”开头的链接在定义 base 时指向不同的基本路径
    示例：`<a href="/not-my-base/link">link</a>`

**使用 javascript**：

该`$location`服务只允许您更改 URL；它不允许您重新加载页面。当您需要更改 URL 并重新加载页面或导航到不同的页面时，请使用较低级别的 API `$window.location.href`：.

看：

*   [https://docs.angularjs.org/guide/$location](https://docs.angularjs.org/guide/$location)
*   [https://docs.angularjs.org/api/ng/service/$location](https://docs.angularjs.org/api/ng/service/$location)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-11-13T10:58:47.137

我们遇到了同样的问题，使用 JS 代码（即不是来自 HTML 锚）。这就是我们解决这个问题的方法：

1.  如果需要，可以通过服务*虚拟*更改当前 URL 。`$location`如果您的目标只是当前 URL 的变体，这可能很有用，以便您可以利用`$location`辅助方法。例如，我们运行`$location.search(..., ...)`只是更改查询字符串参数的值。

2.  建立新的目标 URL，`$location.url()`如果需要，使用当前的。为了工作，这个新的必须包括架构、域和端口之后的所有内容。因此，例如，如果您想搬到：

    [http://yourdomain.com/YourAppFolder/YourAngularApp/#/YourArea/YourAction?culture=en](http://yourdomain.com/YourAppFolder/YourAngularApp/#/YourArea/YourAction?culture=en)

    那么您应该将 URL 设置为：

    `var destinationUrl = '/YourAppFolder/YourAngularApp/#/YourArea/YourAction?culture=en';`

    （与领先`'/'`以及）。

3.  *在低级*分配新的目标 URL ：`$window.location.href = destinationUrl;`

4.  强制重新加载，仍然处于低级别：`$window.location.reload();`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-07-01T10:19:31.167

在搜索并提供命中和试用会话后，我可以通过首先指定 url 来解决它

```
$window.location.href = '/#/home/stats'; 
```

然后重新加载

```
$window.location.reload(); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-06-07T09:39:30.697

我遇到过同样的问题。当我使用`window.location`时，`$window.location`甚至`<a href="..." target="_self">`路由都不刷新页面。所以使用了缓存的服务，这不是我在我的应用程序中想要的。我通过添加`window.location.reload()`after`window.location`来解决它，以强制页面在路由后重新加载。这种方法似乎加载了两次页面。可能是一个肮脏的把戏，但它确实有效。这就是我现在的样子：

```
 $scope.openPage = function (pageName) {
      window.location = '#/html/pages/' + pageName;
      window.location.reload();
  }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-22T12:16:41.733

尝试这个

```
$window.location.href="#page-name";
$window.location.reload(); 
```

# r - ggplot2（和 plyr？）无法绘图

> ID：16002986
> 
> 赞同：6
> 
> 时间：2013-04-14T18:51:20.193
> 
> 标签：r, ggplot2

第一次尝试使用ggplot2，代码很简单，但是报错：

```
a <- c(1,2,3)
b <- c(2,3,4)

> qplot(a,b)
Error in .Call("split_indices", group, as.integer(n)) : 
  "split_indices" not resolved from current namespace (plyr)

> ggplot(data.frame(a,b), aes(a,b)) +geom_line()
Error in .Call("split_indices", group, as.integer(n)) : 
  "split_indices" not resolved from current namespace (plyr) 
```

我验证了 plyr 已安装（v1.8）和 ggplot2（v0.9.3.1）。我可以在网上找到的几乎所有示例都会发生同样的错误..

这里有什么想法吗？

**编辑：解决方案可能是在安装 ggplot2 包后重新启动 RStudio。我怀疑这是在发布问题之前完成的，但不确定。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T16:54:42.587

我认为您只是在“>”方面遇到了问题。试试这个，这对我有用：

```
require(ggplot2)

a <- c(1,2,3)
b <- c(2,3,4)

qplot(a,b) 
```

# c++ - C++：在对象指针中为字符串赋值时的第一次机会异常

> ID：16002991
> 
> 赞同：1
> 
> 时间：2013-04-14T18:51:40.187
> 
> 标签：c++, visual-c++, object, visual-studio-2012

正如标题所暗示的，我试图将一个值插入到对象指针的字符串中。

在我的标题中，我的对象如下所示：

```
typedef struct d_tree
{
std::string name;
d_tree *parent;
std::vector<d_tree> dirs;
std::vector<t_file> files;
} tree_node; 
```

（这是一个为好奇的人处理建模文件和目录系统的任务。）为了简单起见，我使用字符串和向量（以避免 char * 和双指针数组的细微差别）

现在，对于这个目录树的头部，我的源代码中有：

```
tree_node *G = (tree_node *)malloc(sizeof(tree_node));
getline(dirs, dirp);  //First should be main parent, or ./
G->name = dirp;
G->parent = NULL;
tree_node *top = G;
tree_node *curr = G; 
```

分配运行良好，getline 仅用于读取我将使用的一些字符串数据......但是一旦我点击`G->name = ...`，我的编译器（使用 VS 12）大喊：

```
" First-chance exception at 0x57AD11CE (msvcr110d.dll) in File_System.exe: 0xC0000005:
 Access violation writing location 0xCDCDCDCD.

If there is a handler for this exception, the program may be safely continued. " 
```

在抛出异常之前查看局部变量时，我注意到一些事情：G 中的 name 变量在 value 列中有一个。

父变量似乎也很奇怪，但我暂时不会担心它（尤其是因为我将其设为 NULL，无论如何..）

非常感谢有关如何缓解此问题的任何建议（最好保留字符串，但如果不存在平滑解决方案则可以理解）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:55:11.640

您需要使用 new, 创建树节点，以便调用名称的构造函数来初始化它。

```
//tree_node *G = (tree_node *)malloc(sizeof(tree_node));
  tree_node *G = new tree_node; 
```

这应该有效。
虽然如果你真的因为某种原因需要用 malloc 分配内存，你可以使用placement new。

```
 void* gptr = malloc(sizeof(tree_node));//Allocate memory
 tree_node *G = new(gptr) tree_node;//construct object in allocated memory
 //Do whatever you want with G
 G->~tree_node();//Explicitly call destrutor
 free(gptr);//free memory 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T18:55:31.160

您`malloc`用于分配`struct`非 POD 类型。`malloc`只分配内存，它不*构造*已分配的非 POD 成员`struct`。因此，当您尝试分配给 that`struct`的非 POD 成员时，您会在垃圾对象上调用每个成员类型的赋值运算符。

改为使用`new tree_node()`。（并且当你完成后也使用`delete`而不是释放内存。或者更好的是，假设你有一个没有循环的真正树，使用智能指针为你释放内存。）`free`

顺便说一句，你不需要做

```
typedef struct tag { ... } typename; 
```

在 C++ 中；只是

```
struct typename { ... }; 
```

是等价的。

# c# - 使用语音识别的命令

> ID：16002993
> 
> 赞同：0
> 
> 时间：2013-04-14T18:52:13.713
> 
> 标签：c#, visual-studio-2010

我使用语音识别创建了一个 C# 项目，其中我有一个具有下一个和最后一个按钮的表单我想要做的是，当我说下一步时，按钮将带我到下一个文件，或者如果我说回来，它将转到以前的文件。但是在调试项目时，它只会向我展示我所说的而不是做的。有谁知道我该如何修复它？

这是我制作的代码：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        SpeechRecognizer recognizer = new SpeechRecognizer();
        Choices command = new Choices();
        command.Add(new string[] { "next", "last", "first" });

        GrammarBuilder gb = new GrammarBuilder();
        gb.Append(command);

        Grammar g = new Grammar(gb);
        recognizer.LoadGrammar(g);

        recognizer.SpeechRecognized +=
              new EventHandler<SpeechRecognizedEventArgs>(sre_SpeechRecognized); 
    }

    void sre_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
    {
        MessageBox.Show("Speech recognized: " + e.Result.Text);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:07:29.400

几年前，我有一个关于这个主题的案例研究。如果您将我的代码与您的代码进行比较，您会发现一些东西。下面的代码改变了灯泡的状态。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Speech.Recognition;
using System.Threading;

namespace SesTanima
{
    public partial class Form1 : Form
    {
        private SpeechRecognitionEngine recognizer = new SpeechRecognitionEngine();

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            LoadGrammars();
            StartRecognition();
        }

        private void LoadGrammars() 
        {
            Choices choices = new Choices( new string[] {"Lights on", "Exit", "Zoom out", "Zoom in", "Reset", "Lights off" } );
            GrammarBuilder grammarBuilder = new GrammarBuilder(choices);
            Grammar grammar = new Grammar(grammarBuilder);
            recognizer.LoadGrammar(grammar);
        }

        private void StartRecognition() 
        {
            recognizer.SpeechDetected += new EventHandler<SpeechDetectedEventArgs>(recognizer_SpeechDetected);
            recognizer.SpeechRecognitionRejected += new EventHandler<SpeechRecognitionRejectedEventArgs>(recognizer_SpeechRecognitionRejected);
            recognizer.SpeechRecognized += new EventHandler<SpeechRecognizedEventArgs>(recognizer_SpeechRecognized);
            recognizer.RecognizeCompleted += new EventHandler<RecognizeCompletedEventArgs>(recognizer_RecognizeCompleted);

            Thread t1 = new Thread(delegate()
            {            
                recognizer.SetInputToDefaultAudioDevice();
                recognizer.RecognizeAsync(RecognizeMode.Single);
            });
            t1.Start();
        }

        private void recognizer_SpeechDetected(object sender, SpeechDetectedEventArgs e) 
        {
            textBox1.Text = "Recognizing voice command...";     
        }

        private void recognizer_SpeechRecognized(object sender, SpeechRecognizedEventArgs e) 
        {
            if (e.Result.Text == "Lights on")
            {
                pictureBox1.Image = Properties.Resources.lightsOn;
            }
            else if (e.Result.Text == "Lights off")
            {
                pictureBox1.Image = Properties.Resources.lightsOff;
            }
            else if ( e.Result.Text == "Exit" )
            {
                recognizer.Dispose();
                Application.Exit();

            }
            else if ( e.Result.Text == "Zoom out" )
            {
                pictureBox1.Size = new System.Drawing.Size( 135, 107 );
            }
            else if ( e.Result.Text == "Zoom in" )
            {
                pictureBox1.Size = new System.Drawing.Size( 538, 426 );
            }
            else if ( e.Result.Text == "Reset" )
            {
                pictureBox1.Size = new System.Drawing.Size( 269, 213 );
            }
            textBox1.Text = e.Result.Text;
        }

        private void recognizer_SpeechRecognitionRejected(object sender, SpeechRecognitionRejectedEventArgs e) 
        {
            textBox1.Text = "Failure.";
        }

        private void recognizer_RecognizeCompleted(object sender, RecognizeCompletedEventArgs e) 
        {
            recognizer.RecognizeAsync();
        }
    }
} 
```

# ruby-on-rails - 通过指定其“id”来销毁嵌入的 Mongoid 文档（而不是通过其父级找到它）

> ID：16002994
> 
> 赞同：2
> 
> 时间：2013-04-14T18:52:14.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

我有这两个模型：

```
class Presentation
  include Mongoid::Document
  embeds_many :presentation_rows
end

class PresentationRow
  include Mongoid::Document
  embedded_in :presentation
end 
```

在我的presentation_rows_controller.rb 我有这些代码行：

```
def show
  @presentation = Presentation.find(params[:id])
  @presentation_rows = @presentation.presentation_rows
end

def destroy
  ...
  ...
end 
```

在我的 presentation_rows/show.html.haml 我有这些代码行：

```
- @presentation_rows.each do |presentation_row|
  = link_to "Delete", presentation_row, method: :delete 
```

我在销毁控制器操作中尝试了许多方法，但它们都指向一个明显的事实，即我试图在不通过其父级的情况下销毁嵌入式文档。但是现在我在我的视图文件中通过它的 id 拥有了presentation_row，我不应该被允许销毁它似乎很愚蠢。

带有空销毁操作的错误消息，仅供参考：

```
Started DELETE "/en/presentation_rows/516af0a983c336708300000f" for 127.0.0.1 at 2013-04-14 20:08:47 +0200
Processing by PresentationRowsController#destroy as HTML
  Parameters: {"authenticity_token"=>"KHGG2dsTseCl88okOKW9JAlHb+VaK2lKIxb0ptAIC7A=", "locale"=>"en", "id"=>"516af0a983c336708300000f"}
  MOPED: 127.0.0.1:27017 QUERY        database=shop_import_development collection=users selector={"$query"=>{"_id"=>"511a813a83c336a0ea000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 fields=nil (0.3152ms)
  MOPED: 127.0.0.1:27017 QUERY        database=shop_import_development collection=presentations selector={"_id"=>"516af0a983c336708300000f"} flags=[:slave_ok] limit=0 skip=0 fields=nil (0.2129ms)
Completed 500 Internal Server Error in 2ms

Mongoid::Errors::DocumentNotFound (
Problem:
  Document(s) not found for class Presentation with id(s) 516af0a983c336708300000f.
Summary:
  When calling Presentation.find with an id or array of ids, each parameter must match a document in the database or this error will be raised. The search was for the id(s): 516af0a983c336708300000f ... (1 total) and the following ids were not found: 516af0a983c336708300000f.
Resolution:
  Search for an id that is in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause a nil to be returned instead of raising this error when searching for a single id, or only the matched documents when searching for multiples.):
  app/controllers/presentation_rows_controller.rb:16:in `correct_user?'

  Rendered /Users/christoffer/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/christoffer/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/christoffer/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.2ms 
```

我应该在销毁动作中添加什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T05:32:45.090

这是 mongoid 的一个限制。Quoth 一个贡献者“必须始终通过父级访问嵌入式文档。” [https://github.com/mongoid/mongoid/issues/348](https://github.com/mongoid/mongoid/issues/348)

请注意，这不是 mongodb 的限制。`PresentationRow`从其 id获取对象的解决方法是...

```
pres = Presentation.where('presentation_rows._id' => Moped::BSON::ObjectId(params[:id])).first
row = pres.presentation_rows.detect { |pr| pr.id.to_s == params[:id] }
row.destroy 
```

`presentation_rows._id`如果您有很多索引，请添加索引。