# StackOverflow 问答 15615000-15615999

# pkcs#11 - PKCS#11 dll 中的 C_getfunctionlist

> ID：15615001
> 
> 赞同：1
> 
> 时间：2013-03-25T12:30:20.770
> 
> 标签：pkcs#11

我正在尝试编写一个最终将连接到虚拟令牌的 dll。我试图制作一个可导出的 C_getfunctionlist 函数，该函数将包含指向 PCKS#11 标准支持的函数的指针地址，但我无法弄清楚为什么我无法在使用 dll 的程序中访问这些函数。我试图只加载 C_Initialize 函数。

```
extern "C" __declspec(dllexport)
CK_RV C_GetFunctionList(CK_FUNCTION_LIST_PTR_PTR ppFunctionList) {
    CK_FUNCTION_LIST_PTR function_list;
    function_list=new CK_FUNCTION_LIST;
    function_list->C_Initialize=&C_Initialize;
    ppFunctionList=&function_list;
return CKR_OK;

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:55:03.460

如果要在代码中使用 pkcs#11 实现的函数，则必须加载实现标准的 dll，然后使用 dll 提供的函数。这是我在 Linux 系统上使用的代码。我希望它有所帮助。

```
 static char const * PKCS11_SO_NAME = "/usr/lib/pkcs11/PKCS11_API.so";

static void * pkcs11_so;
//list of all pkcs#11 functions
static CK_FUNCTION_LIST_PTR pkcs11;

CK_RV load_pkcs11() {
  CK_RV rv = CKR_OK;
  CK_RV (*C_GetFunctionList) (CK_FUNCTION_LIST_PTR_PTR) = 0;

  pkcs11_so = dlopen(PKCS11_SO_NAME, RTLD_NOW);
  if (!pkcs11_so) {
    fprintf(stderr, "Error loading pkcs#11 so: %s\n", dlerror());
    return CKR_GENERAL_ERROR;
  }

  rv = load_symbol((void **)&C_GetFunctionList, "C_GetFunctionList");
  if (CKR_OK != rv) {
    return rv;
  }

  rv = C_GetFunctionList(&pkcs11);
  if (CKR_OK != rv) {
    fprintf(stderr, "C_GetFunctionList call failed: 0x%.8lX", rv);
    return rv;
  }

  return CKR_OK;
} 
```

# java - JNA 与 DLL（德尔福）

> ID：15615007
> 
> 赞同：3
> 
> 时间：2013-03-25T12:30:32.607
> 
> 标签：java, delphi, java-native-interface, jna

我是这里的新手，但是，我有一个“大问题”

我有一个 DLL（在 Delphi 中），我想通过 Java 访问它。如果您在 DLL 的“主体”(.dpr) 中使用简单的返回或过程，这很容易。但我需要使用接口，因为我想在桌面应用程序和 Web 应用程序（使用 java）中使用相同的代码。代码如下：

测试库文件

```
library TESTLIB;  
{$DEFINE TESTLIB}  

uses  
  System.SysUtils,  
  System.Classes,  
  TestInt in 'TestInt.pas';  

{$R *.res}  

function MyReturn(Test: PTest): PChar; stdcall;  
begin  
    Result := 'Im Here!';  
    Test^.vResult := 'Test 123';  
end;  

exports MyReturn;  

begin  
end. 
```

接口TestInt.pas

```
unit TestInt;  

interface  

type  
  PTest = ^TTest;  
  TTest = record  
    vResult: PChar;  
  end;  

  {$IFNDEF TESTELIB}  
  function MyReturn(Test: PTest): PChar; stdcall;  
  {$ENDIF}  

implementation  

{$IFNDEF TESTELIB}  
function MyReturn; external 'TESTLIB.DLL' name 'MyReturn';  
{$ENDIF}  

end. 
```

以及我如何使用 Delphi 中的一个简单应用程序访问它：

```
unit FormMain;  

interface  

uses  
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes,   Vcl.Graphics,  
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;  

type  
  TForm1 = class(TForm)  
    Button1: TButton;  
    procedure Button1Click(Sender: TObject);  
  private  
    { Private declarations }  
  public  
    { Public declarations }  
  end;  

var  
  Form1: TForm1;  

implementation  

{$R *.dfm}  

uses TestInt;  //The interface

procedure TForm1.Button1Click(Sender: TObject);  
var  
  Test: TTest; //Type declared in Interface TestInt.pas  
begin  
    ShowMessage(MyReturn(@Test)); //Returns Im Here!  

    ShowMessage(Test.vResult); //Test 123  
end;  

end. 
```

我想使用 Java 访问它（JNI、JNA 等......如果可以提供一个例子会更好）

非常感谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T18:30:42.040

一般来说，Delphi DLL（使用 stdcall 调用约定）的访问方式与访问 Win32 API 的方式相同。您应该能够通过检查 Delphi 类型的大小并用类似大小的 Java 类型替换它们来找出适当的类型映射。

`PCHAR`映射到 Java 字符串，因此您提供的“接口”看起来像这样：

```
public interface TestInt extends StdCallLibrary {
    TestInt INSTANCE = (TestInt)Native.loadLibrary("TestInt", TestInt.class);

    class Test extends Structure {
        public String vResult;
        public Test() { }
        public Test(Pointer p) { 
            super(p);
            read();
        }
        protected List getFieldOrder() { return Arrays.asList(new String[] { "vResult" }); }
    }

    String MyReturn(Test test);
} 
```

请记住[David](https://stackoverflow.com/users/505088/david-heffernan)关于返回字符串的警告；如果 delphi 分配了内存，它必须稍后释放内存，所以通常更容易让调用者 (Java) 传递分配的内存并让 delphi 简单地写入提供的缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:50:50.670

> 想在桌面应用程序和 Web 应用程序中使用相同的代码（使用 java）

代替使用 JNI/JNA 执行此任务，您的 Delphi 代码可以通过 HTTP Web 服务（例如 JSON/REST）而不是直接的进程内通信方法公开。对于基于 Delphi 的 Web 服务，您可以使用 Indy、Synapse 或为 IIS 构建 ISAPI DLL。然后，Java Web 应用程序充当 Web 服务客户端。它可以在许多操作系统上运行，而 JNI/JNA 要求这两个部分都在同一个目标上编译和运行。

* * *

更新：关于您的评论，如果速度非常重要，还有其他用于进程内通信的选项，例如共享内存映射文件和 IOCP，它们非常快。

但是我不认为基于套接字的解决方案会变慢。您可以在 Delphi 应用程序和 Java 进程之间创建直接套接字连接，并轻松地每秒传输数千条消息。如果消息在不到一毫秒的时间内没有处理，你确定会有问题吗？

[Java 文档](http://docs.oracle.com/javase/tutorial/essential/concurrency/procthread.html)建议使用管道和套接字进行进程间通信：

> 为了促进进程之间的通信，大多数操作系统都支持进程间通信 (IPC) 资源，例如管道和套接字。IPC 不仅用于同一系统上的进程之间的通信，还用于不同系统上的进程之间的通信。

# java - Spring Hibernate 只有一个会话工厂

> ID：15615011
> 
> 赞同：0
> 
> 时间：2013-03-25T12:30:40.640
> 
> 标签：java, mysql, spring, hibernate

我正在使用hibernate和spring来构建一个应用程序。我有很多实体，因此我实现了一个通用 DAO、一些扩展这个通用 DAO 的 DAO 和一些使用这些 DAO 的服务。

```
public class GenericDAOImpl<T, PK extends Serializable> implements IGenericDAO<T, PK> {
private SessionFactory sessionFactory;
private Class<T> type;

public void setSessionFactory(SessionFactory sessionFactory) 
{
    this.sessionFactory = sessionFactory;
}
public Session getSession() {
    return sessionFactory.getCurrentSession();
}   
public GenericDAOImpl(Class<T> type) {
    this.type = type;
}
public void create(T o) {
    getSession().save(o);
}
@SuppressWarnings("unchecked")
public T read(PK id) {
    return (T) getSession().get(type, id);
}

public void update(T o) {
    getSession().update(o);

} 
```

}

这是我的地区 DAO，我也有一个国家 DAO。

```
 public class PaysDAOImpl extends GenericDAOImpl<Pays, String> implements IPaysDAO {

public PaysDAOImpl(Class<Pays> type) {
    super(type);

}

public void deleteRegion(Pays region) {
    // TODO Auto-generated method stub

}

 } 
```

这是我的服务类：

```
 public class RegionServiceImpl implements IRegionService {

private IRegionDAO regionDAO;

public void setRegionDAO(IRegionDAO regionDAO) {
    this.regionDAO = regionDAO;
}

public void saveRegion(Region region) {
    regionDAO.create(region);

}

public void deleteRegion(Region region) {
    // TODO Auto-generated method stub

}

  } 
```

最后是我的主要课程：

```
 ApplicationContext appContext = new ClassPathXmlApplicationContext("applicationContext.xml");
   IRegionService regionBO=(IRegionService)appContext.getBean("myRegionService");
   IPaysService paysBO=(IPaysService)appContext.getBean("myPaysService");
   Region r=new Region();
   r.setNom("EUROPE");
   Pays p=new Pays();
   p.setNom("Belgique");
   p.setNomRegion(r);
   r.getLesPays().add(p);
   regionBO.saveRegion(r);
   paysBO.savePays(p); 
```

应用程序上下文文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

<bean id="baselineDataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost/baseline" />
    <property name="username" value="root" />
    <property name="password" value="root" />
</bean>

<bean id="baselineSessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="baselineDataSource" />
    <property name="annotatedClasses">
        <list>
            <value>domain.entites.Region </value>
            <value>domain.entites.Pays </value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
            <prop key="current_session_context_class">thread</prop>
        </props>
    </property>
</bean>

<!-- Hibernate Transaction Manager Definition -->
<bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="baselineSessionFactory" />
</bean>

<!-- ========================= Start of DAO DEFINITIONS ========================= -->
<!-- proxy for DAO using generic DAO -->
<bean id="myGenericDAO" abstract="true">
    <property name="sessionFactory" ref="baselineSessionFactory" />
</bean>

<!-- Region DAO Definition -->
<bean id="myRegionDAO" class="dao.impl.RegionDAOImpl" parent="myGenericDAO">
    <constructor-arg value="domain.entites.Region" />
</bean>

<!-- Region DAO Definition -->
<bean id="myPaysDAO" class="dao.impl.PaysDAOImpl" parent="myGenericDAO">
    <constructor-arg value="domain.entites.Pays" />
</bean>

<!-- ========================= Start of SERVICE DEFINITIONS ========================= -->
<!-- Transactional proxy for Services -->
<bean id="proxyService"
    class="org.springframework.transaction.interceptor.TransactionInterceptor">
    <property name="transactionManager" ref="transactionManager" />
    <property name="transactionAttributes">
        <props>
            <prop key="find*">PROPAGATION_REQUIRED, readOnly</prop>
            <prop key="get*">PROPAGATION_REQUIRED, readOnly</prop>
            <prop key="*">PROPAGATION_REQUIRED, -java.lang.Exception</prop>
        </props>
    </property>
</bean>

<!-- autoproxy -->
<bean id="transactionBeanNameProxyCreator"
    class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator">
    <property name="beanNames">
        <value>*Service</value>
    </property>
    <property name="interceptorNames">
        <list>
            <value>proxyService</value>
        </list>
    </property>
</bean>

<bean id="myRegionService" class="domain.services.impl.RegionServiceImpl">
    <property name="regionDAO" ref="myRegionDAO" />
</bean>

<bean id="myPaysService" class="domain.services.impl.PaysServiceImpl">
    <property name="paysDAO" ref="myPaysDAO" />
</bean> 
```

我的问题是，当我运行我的主类并插入一个区域时，然后在一个引用该区域的国家/地区之后，会创建两个会话并使用额外的查询，如您在此处看到的：

```
Hibernate: insert into REGIONS (nom_region) values (?)
Hibernate: select region_.nom_region from REGIONS region_ where region_.nom_region=?
Hibernate: insert into PAYS (nom_region, nom_pays) values (?, ?) 
```

当我查看日志时，我看到为插入区域打开了第一个会话，然后关闭并打开了第二个会话以插入国家/地区。我想为我的所有交易使用一个会话。也许你能帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:39:44.067

这仅仅是因为您没有创建任何事务服务来在同一事务中同时创建一个地区和一个国家。

相反，您使用第一个事务性服务调用单独创建区域，然后使用第二个事务调用单独创建国家/地区。

会话绑定到事务，这是一件好事。您不希望会话永远持续并充满 1 小时前的过时数据。而且您甚至更少为所有事务建立一个会话，因为事务并行执行，并且会话不是线程安全的。

# autoresizingmask - UITableView 不自动调整大小以适应其 UIView 超级视图

> ID：15615018
> 
> 赞同：1
> 
> 时间：2013-03-25T12:30:56.917
> 
> 标签：autoresizingmask

不得不以不同的方式解决它。还是要谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T12:30:27.503

我通过将动态控件和表格放在单独的视图上解决了这样的问题。我有不同的导航栏高度 + iAd 横幅出现和消失。

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner {
  if (!self.bannerIsVisible)
  {
    [UIView beginAnimations:@"animateAdBannerOn" context:NULL];
    banner.frame = CGRectMake(0, 0, 320, 50);

    self.tableView.frame = CGRectMake(0, 50, 320, self.view.frame.size.height - 50);

    [UIView commitAnimations];
    self.bannerIsVisible = YES;

  }
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {
    [UIView beginAnimations:@"animateAdBannerOn" context:NULL];
    banner.frame = CGRectMake(0, 0, 320, 0);

    self.tableView.frame = CGRectMake(0, 0, 320, self.view.frame.size.height);

    [UIView commitAnimations];
    self.bannerIsVisible = NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:18:37.827

y如果你动态地将你的 UITableView 添加到 UIView，尝试设置 autoresizingMask：

```
tableView.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin); 
```

然后将 tableView 添加为 subView：

```
[view addSubView:tableView]; 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:27:47.813

您是否尝试在添加父 UIView 之前或之后为 UITableview 设置框架`[myTableView setFrame:CGRectMake(parentView.frame.origin.x+5,parentView.frame.origin.y+5,parentView.frame.size.width-10,parentView.frame.size.height-10)];`？

# php - kohana 3.3 子类别中的路由

> ID：15615019
> 
> 赞同：0
> 
> 时间：2013-03-25T12:30:59.290
> 
> 标签：php, kohana, kohana-3

我有 Route 的代码（使用 Kohana 3.3）

```
Route::set('admin', '<directory>(/<controller>(/<action>))', array('directory' => '(admin)'))
    ->defaults(array(
        'controller' => 'main',
        'action' => 'index',
    ));

Route::set('default', '(<controller>(/<action>(/<id>)))')
    ->defaults(array(
        'controller' => 'main',
        'action' => 'index',
    )); 
```

当我输入`www.my_site/admin`时，它可以正常工作。

所有用户都必须经过身份验证，因此我重定向到发生这种情况的控制器。

```
public function before() {
    parent::before();
    Controller::redirect('admin/users/login'); ... 
```

但是，我收到以下错误：

> Kohana_HTTP_Exception [404]：在此服务器上找不到请求的 URL admin/users/login。

如何进行重定向/路由到`www.my_site/admin/user/login`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:58:04.263

更新***

**结构**
-Controller(文件夹)
--admin(文件夹)
---users(文件夹)
----login.php(控制器)
`class Controller_Admin_Users_Login ext...`

**kingkero**回复 帮助了我

```
$route = Route::get('admin')->uri(array(
            'directory' => 'admin',
            'controller' => 'users_login',
            'action' => 'index',
));

Controller::redirect($route); 
```

但网址有查看**www.my_site/admin/users_login**

我们可以查看**www.my_site/admin/users/login**吗？

PS如果我想要太多，我很抱歉：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:16:11.173

如前所述，控制器和功能是否存在？

此外，建议创建用于通过[Route重定向的 URL](http://kohanaframework.org/3.3/guide-api/Route)

```
$route = Route::get('admin')->uri(array(
    'controller' => '..',
    'action' => '..',
));
Controller::redirect($route); 
```

# git - '为绑定事件发布接收钩子。'？

> ID：15615020
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:31:03.573
> 
> 标签：git, gitlab

'为绑定事件发布接收钩子。'你能解释一下是什么意思吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:40:50.697

每个 GitHub 存储库都可以选择在将存储库推送到时与 Web 服务器进行通信。这些“WebHooks”可用于更新外部问题跟踪器、触发 CI 构建、更新备份镜像，甚至部署到您的生产服务器。

您可以在 github 上阅读有关[此主题的信息。](https://help.github.com/articles/post-receive-hooks)

# arrays - Winbugs中的不平衡面板和多维数组

> ID：15615021
> 
> 赞同：3
> 
> 时间：2013-03-25T12:31:07.217
> 
> 标签：arrays, winbugs

我有一个输入需求模型，数据不平衡。因变量是`yijt`，其中`i`表示生产函数的投入`(i=1,2,3)`，`j`表示公司`(j=1,..,21)`，`t`表示时间`(ti=1,..,Ti)`。所以，因为面板是不平衡的，有三个方程，在 winbugs 中使用它的正确格式是什么？

我尝试以 STATA 长格式 3*107 的形式使用它，其中索引有点不同。行 ( `i`) 表示输入，列 ( `j`) 表示面板`i*t`。所以，没有明确的时间索引。我对列使用嵌套索引，将数据形成为面板。一小段代码：

```
for (i in 1:3){
     for(j in 1:107){
          log(mu[i,j]) <- a[i]+ u[firm[j]]+... 
```

其中`a[i]`是一个特定于输入的自由参数，`u`是一个期望的特定于公司的误差分量，应该对公司进行估计（21）。为此，我使用嵌套索引，其中模型中 u 的表达式超过列`u[firm[j]]`，而先验 for`u`超过公司`u[k]`。

这是关于嵌套索引的问题。**如果模型包含许多协变量，这些协变量也是时间相关的，我是否应该对所有这些协变量使用嵌套索引，否则 Winbugs 不会将其作为面板？**

我尝试对所有多维变量使用多维数组。为了平衡很多 NA-s 被包括在内。例如，因变量 yijt 是一个 3 维数组`y[ , , ]`，（使用 list 命令），但由于某种原因，Winbugs 无法识别 NA-s？要点是后验分布不收敛，数据格式化可能是原因之一

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:54:09.940

您最好将数据保留为长格式（y、i、j 和 t 列）和每个响应的行（如果缺少数据，y 将具有 NA）。

多级建模中心有一个很好的介绍性指南，关于使用 WinBUGS 以这种格式运行这些类型的模型[[这里]](http://www.bristol.ac.uk/cmm/learning/mmsoftware/winbugs.html)

# sql - 在插入触发器中将范围值解析为逗号分隔的值数组

> ID：15615030
> 
> 赞同：3
> 
> 时间：2013-03-25T12:31:39.183
> 
> 标签：sql, sql-server, sql-server-2008, parsing, triggers

在 SQL2008 服务器上插入触发器之前，我需要一些帮助来解析值。

我有一个包含文本字段的表（我们称之为源）。字段值可能如下所示

> 10-15,20-22,25-26,

我想在另一个字段中用逗号分隔值（比如说目标）：

> 10,11,12,13,14,15,20,21,22,25,26,

这可以在插入触发器之前完成还是我需要某种外部应用程序？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:35:05.123

首先，您需要创建一个`Table Valued function`which take`start`和`end`value 来生成`sequence`.This 使用完成`recursive cte`

```
CREATE FUNCTION FnGetRange(@startValue int,@endValue int)
RETURNS  @rtnTable TABLE 
(
  generatedVal VARCHAR(MAX)
)
AS
BEGIN
;with cte(startValue,rangeVal,generatedVal)
as
(
Select @startValue,@endValue,@startValue as generatedVal
union all
Select  startValue, rangeVal, generatedVal+1
from cte r
where  rangeVal > generatedVal 
)
Insert into @rtnTable
Select  generatedVal from cte
return
END 
```

您需要进入`split`，以便您可以获取范围并将其传递给`single column``rows``function`

```
 ;with cte(range) as 
 (
   SELECT 
   RIGHT(LEFT(T.rangeVal,Number-1),
  CHARINDEX(',',REVERSE(LEFT(','+T.rangeVal,Number-1)))) as range
  FROM
  master..spt_values,
  yourTable T
  WHERE
  Type = 'P' AND Number BETWEEN 1 AND LEN(T.rangeVal)+1
  AND
 (SUBSTRING(T.rangeVal,Number,1) = ',' OR SUBSTRING(T.rangeVal,Number,1)  = '') 
) 
```

上面的解决方案发布[在这里](https://stackoverflow.com/questions/4250475/split-one-column-into-multiple-rows/4250498#4250498)，它基本上使用 master..spt_values 来生成序列

cte 将返回结果，如

```
range
10-15
20-22
25-26 
```

现在您需要`split`将范围设置为`StartValue`和`EndValue`

```
rangeCte  (startValue,endValue) as
(
Select parsename(replace(range,'-','.'),2) as startValue,
parsename(replace(range,'-','.'),1) as endValue
from cte
) 
```

以上`rangeCTE`将返回数据，如

```
 startValue  endValue
    10         15
    20         22
    25         26 
```

一旦你得到这些值，你只需要将它传递给函数`FnGetRange`使用`cross apply`

```
 RowValue (rangeSep) as 
( Select val.generatedVal as rangeSep from rangeCte r
  CROSS APPLY
  dbo.FnGetRange(r.StartValue,r.endValue) AS val
) 
```

这将生成序列，但它将在多行中。将其转换为单次`row`使用`xml path`

```
 SELECT STUFF(
(SELECT ',' + rangeSep
   FROM RowValue
    FOR XML PATH(''),type).value('.','varchar(max)'),1,1,'') 
```

现在结合所有`CTE's`最终查询是

```
;with cte(range) as 
(
  SELECT 
  RIGHT(LEFT(T.rangeVal,Number-1),
  CHARINDEX(',',REVERSE(LEFT(','+T.rangeVal,Number-1)))) as range
  FROM
  master..spt_values,
  yourTable T
  WHERE
  Type = 'P' AND Number BETWEEN 1 AND LEN(T.rangeVal)+1
  AND
 (SUBSTRING(T.rangeVal,Number,1) = ',' OR SUBSTRING(T.rangeVal,Number,1)  = '') 
),rangeCte  (startValue,endValue) as
  (
Select parsename(replace(range,'-','.'),2) as startValue,
parsename(replace(range,'-','.'),1) as endValue
from cte
  ),RowValue (rangeSep) as 
    ( Select val.generatedVal as rangeSep from rangeCte r
      CROSS APPLY
      dbo.FnGetRange(r.StartValue,r.endValue) AS val
    ) 
     SELECT STUFF(
    (SELECT ',' + rangeSep
     FROM RowValue
     FOR XML PATH(''),type).value('.','varchar(max)'),1,1,'') 
```

结果将是

```
 10,11,12,13,14,15,20,21,22,25,26 
```

正如其他人所建议的那样，您应该认真更改 . 而`table design`不是将其存储为`string`create`columns`来存储`range`of 类型`int`

更新

只是为了在同一页上。`Insert Trigger`您在包含类似值的源表上创建`10-15,20-22,25-26`。您需要将这些值转换为`sequence`并将其插入到`Target`表中。如果是这种情况，您可以使用下面的代码。

基本上创建的触发器从[触发器](http://msdn.microsoft.com/en-IN/library/ms189799.aspx)中的逻辑表中`Derived Table`插入数据。然后使用上面的方法，你在表中插入`inserted``nested CTE's``sequence``target`

```
create trigger tri_inserts on a
after insert
as
set nocount on
Declare @RangeTable table
(rangeVal varchar(max))

Insert into @RangeTable
Select rangeColumn from INSERTED

;with cte(range) as 
(
 SELECT 
 RIGHT(LEFT(T.rangeVal,Number-1),
 CHARINDEX(',',REVERSE(LEFT(','+T.rangeVal,Number-1)))) as range
 FROM
 master..spt_values,
 @RangeTable T
 WHERE
 Type = 'P' AND Number BETWEEN 1 AND LEN(T.rangeVal)+1
 AND
 (SUBSTRING(T.rangeVal,Number,1) = ',' OR SUBSTRING(T.rangeVal,Number,1)  = '') 
 ),rangeCte  (startValue,endValue) as
   (
    Select parsename(replace(range,'-','.'),2) as startValue,
    parsename(replace(range,'-','.'),1) as endValue
    from cte
   ),RowValue (rangeSep) as 
    ( Select val.generatedVal as rangeSep from rangeCte r
      CROSS APPLY
      dbo.FnGetRange(r.StartValue,r.endValue) AS val
    ) 
     Insert into Target(DestColumn)     --Change the target name 
     SELECT STUFF(
     (SELECT ',' + rangeSep
      FROM RowValue
      FOR XML PATH(''),type).value('.','varchar(max)'),1,1,'') 
  GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:50:12.887

我建议这些数字应该真正存储在一个单独的表中，例如 Range (start int, end int)，其中包含指向您引用的表的 many-1 链接，这应该使这样的查询更简单，并为您节省其他潜在的麻烦，但也许你有充分的理由这样做。在这种情况下，我建议创建一个 UDF 来生成 CSV 字符串并将该字段声明为引用 UDF 的计算列。如果这是一个频繁使用或经常更新的表，请注意潜在的性能问题。

# uitableview - 当上一部分被隐藏时，UITableView 重新加载带有不需要的淡入淡出的行

> ID：15615031
> 
> 赞同：0
> 
> 时间：2013-03-25T12:31:41.450
> 
> 标签：uitableview, key-value-observing

我有一个 UITableViewController，它在分组的 tableView 中显示 NSManagedObject 的属性。可以从具有 UISteppers 和 UITextFields 的自定义 UITableViewCell 子类更改这些属性的值。该表通常有 9 个部分，但是当 NSManagedObject 的某些属性为 nil 时，我通过将 numberOfRowsInSection 设置为 0 以及将 heightForHeaderInSection 和 heightForFooterInSection 设置为 1 来隐藏这些部分。这些部分是隐藏的。

自定义单元格调用更改 NSManagedObject 的属性值的委托方法，并且 UITableViewController 设置为 KVO 观察 NSManagedObject 的属性，并在相应的属性更改时重新加载其各个行。这是方法的开始：

```
#define POSITION 3
#define TARGETED_BY 5

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ([keyPath isEqualToString:@"positionX"]) {
        [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:POSITION]]
                              withRowAnimation:UITableViewRowAnimationNone];

    } else if ([keyPath isEqualToString:@"positionY"]) {
        [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:1 inSection:POSITION]]
                              withRowAnimation:UITableViewRowAnimationNone];

    } else if ([keyPath isEqualToString:@"isTargetedBy"]) {
        [self.tableView reloadSections:[NSIndexSet indexSetWithIndex:TARGETED_BY]
                      withRowAnimation:UITableViewRowAnimationNone];   
    }
} 
```

这不是具有所有属性的完整方法，但您明白了。

**问题：**当我隐藏了 PROPERTIES 上方的部分并更改了 positionX 的值时，第 0 行的单元格（正确的 positionX 单元格）不会重新加载 UITableViewRowAnimationNone，而是使用 UITableViewRowAnimationFade 重新加载。它会动，我不希望它动。我的子类直接来自 UITableViewController，并且类中没有其他方法可以重新加载除 -RowAnimationNone 之外的任何行或节。当我尝试在没有动画的情况下重新加载整个部分时，整个部分都会动画。该部分中的其他行都没有这样的行为；他们重新加载正确，没有动画。当第 0 行上方的部分未隐藏时，第 0 行会重新加载且没有动画。

我可以通过调用 [self.tableview reloadData] 来解决这个问题，但为了时间和 hackiness，我不想那样做。任何人都知道如何防止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:57:14.677

当涉及许多部分时，这可能会变得复杂。我认为您正在尝试复制免费的 Sensible TableView 框架已经做的事情。该框架将根据您的托管对象的数据自动生成您的所有部分，并且可以根据您自己的规则确定要使哪些部分可见。值得一试，因为它可以为您节省大量尝试重新发明这一切的时间。

# javascript - 使用字符串键映射，其中值是 Javascript 中的一对长数组？

> ID：15615032
> 
> 赞同：0
> 
> 时间：2013-03-25T12:31:43.247
> 
> 标签：javascript, string, map, multidimensional-array, long-integer

我正在与 Javascript 数据结构作斗争。我需要创建一个映射，其中键是字符串，值是两个长数组。

例如，类似：

```
var x = myMap["SomeString"];

var firstLong = x[0][0];
var secondLong = x[0][1];

// do something with first and second long

firstLong = x[1][0];
secondLong = x[1][1];

// do something with first and second long

etc.. 
```

如何在 Javascript 中正确实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:35:16.093

javascript中的字典等效数据结构是基本的JavaScript对象。你可以试试

```
var myMap = {

    SomeString : [
        [1,2],
        [32222,44444]
    ]
} 
```

并打印它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:37:06.227

因此，为了使用多维数组，您首先需要“定义”维度，即

```
var myMap = {};
myMap["SomeString"] = [];

myMap["SomeString"][0] = [];   // new dimension
myMap["SomeString"][0][0] = 1; // can be also done with
myMap["SomeString"][0][1] = 2; // myMap["SomeString"][0].push(2);

myMap["SomeString"][1] = [];   // new dimension
myMap["SomeString"][1][0] = 3;
myMap["SomeString"][1][1] = 4; 
```

文字也可以这样做：

```
var myMap = {
    SomeString: [
        [1, 2],
        [3, 4]
    ]
};

console.log(myMap["SomeString"][0][1]);  // 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:35:22.940

假设您实际上并不是指二维数组；

```
var myMap = {};
myMap["SomeString"] = [123, 456];

alert( myMap["SomeString"][0] );
alert( myMap["SomeString"][1] ); 
```

# javascript - JavaScript JSON 表匹配

> ID：15615033
> 
> 赞同：1
> 
> 时间：2013-03-25T12:31:45.417
> 
> 标签：javascript, database, json

我一直在努力解决这个问题，我敢肯定这没什么大不了的，也许我只是因为整晚编码而感到疲倦，但我真的需要一些帮助......

“users”是一个类似数据库的对象，包含用户帐户信息（当然是服务器端），“get”是一个从 users 数组返回匹配对象数组的函数。

```
var users = [
    {
        name:"xymon",   
            age:19,
        pass:"mypass",  
        time:1364101200684
    },
    {
        name:"test",    
            age:19,
        pass:"x",   
        time:1364101200993
    },
    {
            name:"test",
            age:19,
            pass:"bleh",
            time:1364101200992
    }

];

function get(a){

} 
```

我想要“get”做的是返回与数组中指定对象（a）匹配的属性，就像这样......

```
var matching_users = get({name:"test",age:19}); 
```

这将返回“users”数组中的两个对象，因为它们的属性与“get”中的指定属性匹配，因此“matching_users”将返回为...

```
[
    {
        name:"test",    
            age:19,
        pass:"x",time:1364101200993
    },
    {
            name:"test",
            age:19,
            pass:"bleh",
            time:1364101200992
    }

] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:46:13.460

迭代您的数组并检查每个项目是否匹配：

```
function get(a){
var r = [];
for (var i=0, len=users.length; i<len; ++i) {
    var doAdd = true;
    for (var p in a) {
        if (a.hasOwnProperty(p)) {
            if (a[p] != users[i][p]) {
                doAdd = false;
                break;
            }
        }            
    }    
    if (doAdd)
        r.push(users[i]);
}
return r;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:47:13.610

```
function get(a) {
  var matches = [];

  for (var i in users) {
     var matched = true;

     for (var prop in a) {
         if (a.hasOwnProperty(prop) && users[i][prop] !== a[prop]) {
             matched = false;
             break;
         }
     }

     if (matched) matches.push(users[i]);
  }

  return matches;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:04:50.087

```
 function get(a) {
 var result = [];
      users.forEach(function (v, i) {
           if (v.name == a.name && v.age == a.age) {
                result.push(v);               
           }
 }); 
```

结果将是具有匹配对象的数组。

# ajax - 使用来自不同子域的相同 Web 服务的最佳实践

> ID：15615036
> 
> 赞同：2
> 
> 时间：2013-03-25T12:31:55.303
> 
> 标签：ajax, web-services, architecture, cross-domain

我有具有多个客户端 UI 的 Web 应用程序（桌面浏览器应用程序、移动设备、平板电脑、报告等）。它们都是 html-css-javascript 应用程序，通过 REST Web 服务检索数据。大多数 Web 服务都是跨应用程序使用的，只有少数是专用于一个应用程序的。

我想让应用程序由子域分隔：

```
webservices.mydomain.com
www.mydomain.com
mobile.mydoaim.com
reporting.mydomain.com 
```

尽管 url “位置”不同，但这样做并维护 ajax 调用的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:51:47.683

您的 AJAX 调用可以是托管页面的服务器，并且该服务器可以在内部对实际的 REST 服务（mobile.mydomain.com、reporting.mydomain.com 等）进行 b2b 调用。您不必从 UI 调用跨域 URL。只需通过托管页面的服务器代理它。

# grails - Grails 中的事务

> ID：15615048
> 
> 赞同：0
> 
> 时间：2013-03-25T12:32:26.990
> 
> 标签：grails, transactions, grails-orm

在几个域类中，我有一个`createdBy`带有 class的属性`User`。如果我删除一个用户，我想更改所有域对象以使用该属性的默认用户。

我想通过交易来做到这一点（改变所有或什么都不做）。我如何使用 grails 事务执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:45:33.170

正如 -marko- 已经评论的那样，您可以通过实现服务来做到这一点。另一种方法是使用“beforeDelete”事件。使用 beforeDelete 时，请确保使用另一个休眠会话。

```
User.withNewSession { 
     // your code here 
} 
```

# google-drive-api - 谷歌驱动SDK：取消上传

> ID：15615052
> 
> 赞同：0
> 
> 时间：2013-03-25T12:32:30.657
> 
> 标签：google-drive-api, google-api-dotnet-client, request-cancelling

如何取消文件上传请求`Google Drive SDK`？

我正在创建调用的 .NET 4 任务

```
FilesResource.InsertMediaUpload request = service.Files.Insert(body, stream, body.MimeType);
request.Upload(); 
```

我不能在这里使用取消令牌来取消我的任务，我也找不到任何取消请求的方法。我应该如何停止上传过程？\

**更新**

你好？有没有人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T06:39:44.070

谷歌支持“很棒”。我想即使在`happy housewives club forum`我至少会得到一个答案。我已经知道这是不可能的，并且我自己添加了取消支持以上传功能，但是伙计们，如果您提供支持，则需要不时回答。这不是第一次长时间等待 Google 支持的响应。 [在这里](https://developers.google.com/drive/support)你说你支持`Google Drive SDK`Stack Overflow。你肯定需要提高你的反应能力。

对于其他可能感兴趣的人。

我将项目更改为使用 .NET 框架 4.0，并在文件中为函数`Src\GoogleApis\Apis\Upload\ResumableUpload.cs`添加了重载`CancellationToken token`参数`Upload`。

```
do
{
    token.ThrowIfCancellationRequested(); // <----------------------
    bytesSent += SendChunk(contentStream, url, bytesSent);
    UpdateProgress(UploadStatus.Uploading, bytesSent);
} while (bytesSent < contentStream.Length); 
```

然后在上传循环中添加标记行。

为避免测试失败，您还可以`Upload`像这样重载函数

```
public void Upload()
{
    Upload(new CancellationTokenSource().Token);
} 
```

而已。

# c# - 无法从任何 twitter api 获取结果，其中 OAuth 凭据使用 tweetsharp 为 1.1 版获得

> ID：15615060
> 
> 赞同：1
> 
> 时间：2013-03-25T12:33:00.550
> 
> 标签：c#, twitter, tweetsharp

我正在使用带有 twitter 版本 1.1 的 tweetsharp 来访问来自 twitter 的数据。我可以从我的应用程序（Asp.net Web 应用程序）使用 OAuth 登录。我将令牌和令牌秘密存储在 cookie 中，当我尝试访问任何 twitter api 时，例如，`/statuses/oembed.json?id=xxxxx`我什么也没得到。这发生在我的服务器上。但是当我调试应用程序时，一切都按预期工作。我怀疑我的 Twitter 帐户中“我的应用程序”部分的设置有问题。或者身份验证方法有问题。

在我的推特帐户的“我的应用程序”部分，我提供了以下详细信息：

*   网站：[http ://test.mywebsite.com](http://test.mywebsite.com)
*   回调地址：[http ://test.mywebsite.com/twitterauth/authorizecallback](http://test.mywebsite.com/twitterauth/authorizecallback)
*   *其中 mywebsite 是我的网站的名称。

授权有效。但我无法从 api 获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:37:47.247

我自己解决了这个问题。让我发布答案，这可能会在与我类似的情况下帮助其他人。

*问题的原因*：我正在使用 javascript 将 twitter 推文 ID 的值从视图传递到 api。javascript 的问题在于它没有按照需要解释“long”（64 位整数）类型。它修剪最后的数字。

*修复：*将推文 ID 括在单引号或双引号内，使其成为 javascript 中的字符串变量。所以最后没有修剪。解决问题。

问候

苏尼尔

# c# - 使用 C# 发生更新记录异常

> ID：15615062
> 
> 赞同：1
> 
> 时间：2013-03-25T12:33:05.993
> 
> 标签：c#, sql, sql-server

我正在尝试更新记录并引发异常。这段代码有错误吗？

```
try
{
   using (SqlConnection conn = new SqlConnection(Common.GetDBConnectionString()))
   {
      conn.Open();
      using (SqlCommand cmd =
                        new SqlCommand("UPDATE dbo.Tb_Patient SET Name = @PatientName, Age = @PatientAge, Contact = @PatientContact, Date = @PatientDate, Occupation = @PatientOccupation, Gender = @PatientGender " +
                            " WHERE Id=@SetVForText", conn))
      {
         cmd.Parameters.AddWithValue("@Id", SetVForText);
         cmd.Parameters.AddWithValue("@Name", txtname.Text);
         cmd.Parameters.AddWithValue("@Age", txtage.Text);
         cmd.Parameters.AddWithValue("@Contact", txtcontact.Text);
         cmd.Parameters.AddWithValue("@Date", txtdate.Text);
         cmd.Parameters.AddWithValue("@Occupation", txtoccupation.Text);
         cmd.Parameters.AddWithValue("@Gender",comboBox1.SelectedItem.ToString() );

         int rows = cmd.ExecuteNonQuery();
         MessageBox.Show("Update successfully");

         //rows number of record got updated
      }
   }
}
catch (SqlException ex)
{
   MessageBox.Show("Updation failed"+ex);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:53:45.307

试试这个可能对你有帮助。在数据库中允许空值到日期时间列并以“mm/dd/yyyy”格式从文本框中发送日期

```
 try
            {
                using (SqlConnection conn = new SqlConnection(Common.GetDBConnectionString()))
                {
                    conn.Open();
                    DateTime? Date;
                    DateTime.TryParseExact(txtdate.Text, "MM/dd/yyyy",
                               System.Globalization.CultureInfo.InvariantCulture,
                               System.Globalization.DateTimeStyles.None,
                               out Date);

                    if (Date == Convert.ToDateTime("1/1/0001 12:00:00 AM"))
                        Date = null;

                    using (SqlCommand cmd =
                                      new SqlCommand("UPDATE dbo.Tb_Patient SET Name = @Name, Age = @Age, Contact = @Contact, Date = @Date, Occupation = @Occupation, Gender = @Gender " +
                                          " WHERE Id=@SetVForText", conn))
                    {

                        cmd.Parameters.AddWithValue("@Id", SetVForText);
                        cmd.Parameters.AddWithValue("@Name", txtname.Text);
                        cmd.Parameters.AddWithValue("@Age", txtage.Text);
                        cmd.Parameters.AddWithValue("@Contact", txtcontact.Text);
                        cmd.Parameters.AddWithValue("@Date", Date);
                        cmd.Parameters.AddWithValue("@Occupation", txtoccupation.Text);
                        cmd.Parameters.AddWithValue("@Gender", comboBox1.SelectedItem.ToString());

                        int rows = cmd.ExecuteNonQuery();
                        MessageBox.Show("Update successfully");

                        //rows number of record got updated
                    }
                }
            }
            catch (SqlException ex)
            {
                MessageBox.Show("Updation failed" + ex);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:39:05.063

我会说确保转换`txtdate.Text`为有效的`DateTime`. 这是最可能导致更新错误的原因。此外，您需要使用*参数名称* ，`AddWithValue`而不是*列名称*！

即使在某种程度上发生了转换，您通常也应该确保在命令参数中传递正确的数据类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:39:10.543

您必须具有相同的参数名称：

> cmd.Parameters.AddWithValue("@PatientName", txtname.Text);

代替

> cmd.Parameters.AddWithValue("@name", txtname.Text);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:39:22.350

这些都是错误的。

```
cmd.Parameters.AddWithValue("@Id", SetVForText);
cmd.Parameters.AddWithValue("@Name", txtname.Text);
cmd.Parameters.AddWithValue("@Age", txtage.Text);
cmd.Parameters.AddWithValue("@Contact", txtcontact.Text);
cmd.Parameters.AddWithValue("@Date", txtdate.Text);
cmd.Parameters.AddWithValue("@Occupation", txtoccupation.Text);
cmd.Parameters.AddWithValue("@Gender",comboBox1.SelectedItem.ToString() ); 
```

您正在使用字段的名称，就像它是参数的名称一样。参数名称不同

```
@PatientName,@PatientAge,@PatientContact,@PatientDate,
@PatientOccupation,@PatientGender @SetVForText 
```

因此，您的 AddWithValue 调用应该是

```
cmd.Parameters.AddWithValue("@SetVForText", SetVForText);
cmd.Parameters.AddWithValue("@PatientName", txtname.Text);
cmd.Parameters.AddWithValue("@PatientAge", txtage.Text);
cmd.Parameters.AddWithValue("@PatientContact", txtcontact.Text);
cmd.Parameters.AddWithValue("@PatientDate", txtdate.Text);
cmd.Parameters.AddWithValue("@PatientOccupation", txtoccupation.Text);
cmd.Parameters.AddWithValue("@PatientGender",comboBox1.SelectedItem.ToString() ); 
```

此外，从您的问题中无法确定参数的正确数据类型。正如所写的数据表中的每个字段都应该是 varchar/nvarchar 数据类型，因为您正在将字符串传递给 AddWithValue 可能的例外`SetVForText`

# java - 在 MySQL 中使用 statement.getGeneratedKeys() 时是否可以获得自动生成的值？

> ID：15615070
> 
> 赞同：0
> 
> 时间：2013-03-25T12:33:19.147
> 
> 标签：java, mysql, insert, last-insert-id

我通过java连接mysql。我正在尝试插入一条记录，我正在使用`statement.getGeneratedKeys()`然后查找状态`if (generatedKeys.next())`。现在我可以获得一个插入的 coulmn 值（即）我有一个名为 pass 的列，它是一个 auto_increament 列，它是我的主键，现在我想获取插入到该列中的值。可能吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:50:54.123

标准的 MySQL 连接器 J 驱动程序确实支持获取生成的密钥，是的。这是一些示例代码：

```
final Connection conn ; // setup connection
final String SQL ; // define SQL template string

final PreparedStatement stmt = connection.prepareStatement(
    SQL,
    Statement.RETURN_GENERATED_KEYS);

int affected = stmt.executeUpdate();
if (affected > 0) {
    final ResultSet keySet = stmt.getGeneratedKeys();
    while (keySet.next()) {
        // these are your autogenerated keys, do something with them
        System.out.println(keySet.getInt(1));
    }
} 
```

# angularjs - AngularJS 表单验证指令 $setValidity 在元素上

> ID：15615071
> 
> 赞同：29
> 
> 时间：2013-03-25T12:33:28.830
> 
> 标签：angularjs, angularjs-directive

我正在尝试`$setValidity`在指令中的元素上使用。我发现的所有示例似乎都将它设置在控制器上......

我在表单验证上分叉了一个 JS fiddle，并尝试了很多东西。任何见解将不胜感激：http: [//jsfiddle.net/thomporter/pmKpG/2/](http://jsfiddle.net/thomporter/pmKpG/2/)

在小提琴中，`$setValidity`在控制器上调用：

```
ctrl.$setValidity('pwd', true); 
```

我想做类似的事情：

```
elm.$setValidity('pwd', true); 
```

这样我就可以执行以下操作：

```
ng-class="{error:form.password.$error.pwd}" 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-25T12:55:08.787

我想通了......你必须在输入元素上有一个名字。一旦我添加了名称，错误就会根据需要自动绑定到元素，不需要额外的更改！

```
<input ng-model="password"
       name="inputPassword"
       class="immediate-help"
       password-validate
       required
       type="password"
       id="inputPassword"
       placeholder="Password"> 
```

[http://jsfiddle.net/thomporter/pmKpG/4/](http://jsfiddle.net/thomporter/pmKpG/4/)

# mysql - 无法从 Hibernate 工具执行简单的 HQL 查询

> ID：15615073
> 
> 赞同：-3
> 
> 时间：2013-03-25T12:33:30.143
> 
> 标签：mysql, eclipse, hibernate, mysql5

尝试从 Eclipse（Juno）中的 HQL 编辑器（休眠工具）执行简单的 HQL 查询（来自 Famille）时遇到以下错误：

```
org.hibernate.exception.SQLGrammarException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.famille famille0_' at line 1 
```

这是详细的错误：

```
org.hibernate.exception.SQLGrammarException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.famille famille0_' at line 1
at org.hibernate.exception.internal.SQLStateConverter.convert(SQLStateConverter.java:100)
at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
at $Proxy29.executeQuery(Unknown Source)
at org.hibernate.loader.Loader.getResultSet(Loader.java:1978)
at org.hibernate.loader.Loader.doQuery(Loader.java:829)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289)
at org.hibernate.loader.Loader.doList(Loader.java:2463)
at org.hibernate.loader.Loader.doList(Loader.java:2449)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2279)
at org.hibernate.loader.Loader.list(Loader.java:2274)
at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:196)
at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1115)
at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
at org.jboss.tools.hibernate4_0.HQLQueryPage.getList(HQLQueryPage.java:58)
at org.hibernate.eclipse.console.views.QueryPageViewer$ContentProviderImpl.getElements(QueryPageViewer.java:120)
at org.eclipse.jface.viewers.StructuredViewer.getRawChildren(StructuredViewer.java:1010)
at org.eclipse.jface.viewers.ColumnViewer.getRawChildren(ColumnViewer.java:703)
at org.eclipse.jface.viewers.AbstractTableViewer.getRawChildren(AbstractTableViewer.java:1087)
at org.eclipse.jface.viewers.StructuredViewer.getFilteredChildren(StructuredViewer.java:917)
at org.eclipse.jface.viewers.StructuredViewer.getSortedChildren(StructuredViewer.java:1067)
at org.eclipse.jface.viewers.AbstractTableViewer.internalRefreshAll(AbstractTableViewer.java:701)
at org.eclipse.jface.viewers.AbstractTableViewer.internalRefresh(AbstractTableViewer.java:649)
at org.eclipse.jface.viewers.AbstractTableViewer.internalRefresh(AbstractTableViewer.java:636)
at org.eclipse.jface.viewers.AbstractTableViewer$2.run(AbstractTableViewer.java:592)
at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1443)
at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1404)
at org.eclipse.jface.viewers.AbstractTableViewer.inputChanged(AbstractTableViewer.java:590)
at org.eclipse.jface.viewers.ContentViewer.setInput(ContentViewer.java:280)
at org.eclipse.jface.viewers.StructuredViewer.setInput(StructuredViewer.java:1690)
at org.hibernate.eclipse.console.views.QueryPageViewer.createTable(QueryPageViewer.java:225)
at org.hibernate.eclipse.console.views.QueryPageViewer.createControl(QueryPageViewer.java:203)
at org.hibernate.eclipse.console.views.QueryPageViewer.<init>(QueryPageViewer.java:160)
at org.hibernate.eclipse.console.views.QueryPageTabView.rebuild(QueryPageTabView.java:109)
at org.hibernate.eclipse.console.views.QueryPageTabView$1.contentsChanged(QueryPageTabView.java:75)
at org.hibernate.eclipse.console.views.QueryPageTabView$1.intervalAdded(QueryPageTabView.java:85)
at javax.swing.AbstractListModel.fireIntervalAdded(Unknown Source)
at org.hibernate.console.QueryPageModel.add(QueryPageModel.java:67)
at org.hibernate.console.KnownConfigurations$1.queryPageCreated(KnownConfigurations.java:88)
at org.hibernate.console.ConsoleConfiguration.fireQueryPageCreated(ConsoleConfiguration.java:332)
at org.hibernate.console.ConsoleConfiguration.executeHQLQuery(ConsoleConfiguration.java:301)
at org.hibernate.eclipse.hqleditor.HQLEditor.executeQuery(HQLEditor.java:447)
at org.hibernate.eclipse.console.actions.ExecuteQueryAction.execute(ExecuteQueryAction.java:88)
at org.hibernate.eclipse.console.actions.ExecuteQueryAction.run(ExecuteQueryAction.java:56)
at org.eclipse.jface.action.Action.runWithEvent(Action.java:498)
at org.hibernate.eclipse.console.actions.ExecuteQueryAction.runWithEvent(ExecuteQueryAction.java:60)
at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
at org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:452)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1053)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:942)
at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
at org.eclipse.equinox.launcher.Main.main(Main.java:1414)

Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.famille famille0_' at line 1
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.Util.getInstance(Util.java:386)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3597)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3529)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1990)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2151)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2625)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2119)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2281)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
... 75 more 
```

**编辑：**

家庭.hbm.xml

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!-- Generated 25 mars 2013 11:54:17 by Hibernate Tools 4.0.0 -->
<hibernate-mapping>
<class name="beans.Famille" table="famille" catalog="bd">
    <id name="familleId" type="java.lang.Integer">
        <column name="familleID" />
        <generator class="identity" />
    </id>
    <property name="libelle" type="string">
        <column name="libelle" not-null="true" unique="true" />
    </property>
    <set name="articles" table="article" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="familleID" />
        </key>
        <one-to-many class="beans.Article" />
    </set>
</class>
</hibernate-mapping> 
```

生成的 SQL 查询：

```
0: beans.Famille
-----------------
select
  famille0_.familleID as familleID103_,
  famille0_.libelle as libelle103_ 
 from
  bd.bd.famille famille0_ 
```

我正在使用带有 MySQL 5 (InnoDB) 方言的 Hibernate 4，

请问我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:48:14.237

如果查询是 simple `from Town`，并且您收到此异常，则表示您的实体的映射与数据库中的列名不匹配。

如果您向我们提供实体的代码及其映射、数据库表定义和生成的 SQL 查询，我们只能提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:00:17.070

当我使用 Hibernate Tools 从我的数据库生成域代码和 hbm 文件时，为我的所有映射文件设置了目录属性，因此当我执行查询时，生成的 SQL 会查找 bd.bd.table 而不是 bd.table。

所以我从所有映射文件中删除了目录属性

```
<hibernate-mapping>
<class name="beans.Famille" table="famille">
//...
</class>
</hibernate-mapping> 
```

现在生成的代码如下所示：

总部：

```
from Famille 
```

SQL：

```
select
  famille0_.familleID as familleID128_,
  famille0_.libelle as libelle128_ 
 from
  bd.famille famille0_ 
```

# iphone - 音频信道化？

> ID：15615074
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:33:30.567
> 
> 标签：iphone, ios, objective-c

我想知道的是，iOS设备上是否有将声音从扬声器中传出的通道。通道化是指扬声器声音的左、中或右通道化。假设我有一个滑块，如果滑块在中间，则意味着声音应该从两个扬声器中均匀地发出，但如果它向左侧滑动，那么左侧扬声器的音量应该减小，同时右侧扬声器的音量应该减小应该增加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:13:16.720

如果您使用的是`AVAudioPlayer`，则该[`pan`](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html#//apple_ref/occ/instp/AVAudioPlayer/pan)属性控制余额/通道：

> 通过设置此属性，您可以在立体声场中定位声音。值 –1.0 表示完全左侧，0.0 表示中间，1.0 表示完全右侧。

# javascript - 新创建的模型哈希中缺少 Ember 数据映射

> ID：15615085
> 
> 赞同：0
> 
> 时间：2013-03-25T12:34:01.433
> 
> 标签：javascript, model, ember.js, deserialization, ember-data

我有一个绑定到 Rails API 的 Ember 应用程序。

我的模型定义如下：

```
NewsCMS.NewsItem = DS.Model.extend({
  title: DS.attr('string'),
  date: DS.attr('date'),
  body_html: DS.attr('string')
}); 
```

当应用程序启动时，它成功地拉入当前模型并显示它们，但是，当我创建一个新的 NewsItem 并且从 API 返回该项目时，我收到一个错误：

> 未捕获的错误：断言失败：您的服务器返回了一个带有密钥 body_html 的哈希，但您没有它的映射

该模型已成功持久化到 Rails API，因此问题肯定在于新创建的对象的反序列化，但是使用了断点。

如果我比较 rails API 的 index 操作返回的初始模型哈希的结构和它的 create 操作返回的单个模型哈希的结构，它们是相同的，那么为什么 Ember 在新创建的模型上窒息，但处理初始的，持久化没有问题的模型？

查看异常的来源，我可以看到它在这里：

```
if (!sideloadedType) {
        sideloadedType = this.sideloadMapping.get(prop);

        if (typeof sideloadedType === 'string') {
          sideloadedType = get(Ember.lookup, sideloadedType);
        }

        Ember.assert("Your server returned a hash with the key " + prop + " but you have no mapping for it", !!sideloadedType);
      } 
```

堆栈如下所示：

```
Ember.assert (ember.js:52)
DS.JSONSerializer.DS.Serializer.extend.sideload (ember-data.js:6482)
DS.JSONSerializer.DS.Serializer.extend.extract (ember-data.js:6424)
superWrapper (ember.js:946)
DS.Adapter.Ember.Object.extend.didCreateRecord (ember-data.js:6730)
DS.RESTAdapter.DS.Adapter.extend.createRecord.ajax.success (ember-data.js:7625)
RunLoop._prev (ember.js:4156)
Ember.handleErrors (ember.js:410)
invoke (ember.js:4154)
tryable (ember.js:4343)
Ember.tryFinally (ember.js:1101)
Ember.run (ember.js:4347)
DS.RESTAdapter.DS.Adapter.extend.createRecord.ajax.success (ember-data.js:7624)
jQuery.Callbacks.fire (jquery.js:1038)
jQuery.Callbacks.self.fireWith (jquery.js:1149)
done (jquery.js:8075)
jQuery.ajaxTransport.send.callback (jquery.js:8599) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:46:00.817

原来问题出在 API 的模型序列化上。我没有连接 Active Model Serializer 来以 Ember 预期的方式序列化模型。

我正在返回格式的 JSON：

```
{name:"", body:""} 
```

当它需要看起来像这样时：

```
[
 { news_item: {
    name: "",
    body: ""}
 }
] 
```

因此 Ember 将它遇到的第一个属性视为描述它即将反序列化的模型类型的键。当它检查如何处理这个模型时，它找不到任何映射到它的东西（因为它是模型的属性，而不是模型本身）。

# ember.js - ember.js 从子视图和控制器中过渡到路由

> ID：15615089
> 
> 赞同：3
> 
> 时间：2013-03-25T12:34:13.793
> 
> 标签：ember.js

我有一个从路线自动呈现的模板。车把模板指定了一个子视图。

子视图在我的 js 中有一个扩展视图，它指定了要使用的控制器。它还有一个引发事件的点击处理程序。控制器处理事件。

到目前为止，这是可行的 - 问题是控制器试图调用......

```
this.transitionToRoute("about") 
```

并且由于某种原因不起作用。

我还在主视图上处理了一个点击事件，并在它的控制器中使用了完全相同的方法，并且确实有效。 **那么区别是什么呢？我能做些什么来处理过渡？**

示例：http: [//jsfiddle.net/b6xsk/4/](http://jsfiddle.net/b6xsk/4/)

在示例中，您可以看到单击索引有效，而单击子视图无效。

下面的代码与小提琴匹配。

我的模板...

```
<script type="text/x-handlebars">
    {{#linkTo "index"}}Index{{/linkTo}}
    {{#linkTo "about"}}About{{/linkTo}}
  <div class="app-template">
    {{outlet}}
  </div>
</script>

<script type="text/x-handlebars" data-template-name="index">
    <h1>Index (click me)</h1>
    {{view App.ChildView}}
</script>

<script type="text/x-handlebars" data-template-name="about">
    <h1>About</h1>
</script>

<script type="text/x-handlebars" data-template-name="childview">
    <h2>Child View (click me)</h2>
</script> 
```

然后我的JS...

```
App = Ember.Application.create();

// two simple routes
App.Router.map(function() {
  this.route("index");
  this.route("about");
});

// index controller handles event and moves to about route
App.IndexController = Ember.Controller.extend({
    useraction: function(event) {
        console.log("User Action");
        this.transitionToRoute("about"); // works !
    }
});

// index view handles the click and raises event (handled by controller)
App.IndexView = Ember.View.extend({
    click: function(event) {
        this.get('controller').send('useraction', event);        
    }
});

// handles child event and tries (but fails) to transition to about route
App.ChildViewController = Ember.Controller.extend({
    childuseraction: function(event) {
        console.log("Child User Action");

        // do some validation or other code and maybe then transition 
        // in this example always transition

        this.transitionToRoute("about"); // doesn't work !  why??

        event.stopPropagation(); // don't allow the event to bubble
    }
});

// instantiated so we can attach to view below
App.childViewController = App.ChildViewController.create();

// child view is added in the index handlebar template and raises 
// event on click that is handled by child view controller
App.ChildView = Ember.View.extend({
    templateName: 'childview',
    controller: App.childViewController,
    click: function(event) {
        this.get('controller').send('childuseraction', event);
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:59:15.737

不同之处在于 indexController 具有对应用程序路由器的引用，但**您**创建的 childViewController 没有对所述路由器的引用。您应该让 Ember 为您创建控制器，您可以执行以下操作。

在 ChildView 中删除 childController 创建和控制器规范。

将以下内容添加到您的`IndexController`

```
needs: ['childView'] // Can be a string if you only need one other controller 
```

这将使 Ember 为您创建控制器，并将其添加到 indexController 的控制器集合中。然后，您可以在索引模板中指定 a `controllerBinding`，如下所示。

```
{{view App.ChildView controllerBinding="controllers.childView"}} 
```

更详细的解释可以在这里找到[管理控制器之间的依赖关系](http://emberjs.com/guides/controllers/dependencies-between-controllers/)和这里[darthdeus vs Ember.js: Controller's Needs Explained](http://darthdeus.github.com/blog/2013/01/27/controllers-needs-explained/)

# eclipse - 删除文件后 Eclipse 不显示可绘制对象和布局

> ID：15615090
> 
> 赞同：0
> 
> 时间：2013-03-25T12:34:14.353
> 
> 标签：eclipse

我不小心从桌面上删除了我的项目在 eclipse(shift+del) 中依赖的一些文件
现在在 eclipse 中我的项目没有显示

1.  整个包层次结构
2.  所有的java类文件
3.  drawables文件夹中的所有drawables也没有drawable-hdpi etc mdpi etc文件夹
4.  布局文件夹中的所有布局
5.  所有本地化字符串文件夹，即只有一个值文件夹

我尝试添加我的项目所依赖的所有外部库项目和 jar，但我仍然无法解决问题

我已经尝试过 Project>>Restore from local history 但令人惊讶的是缺少的布局、类和可绘制对象并没有在此处列出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T21:22:32.060

用“经典”价值改变主题。这个对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:37:48.617

只是，创建一个新项目并导入旧项目数据。

# database - Cassandra 数据中心复制与 Couchbase 数据中心复制

> ID：15615092
> 
> 赞同：2
> 
> 时间：2013-03-25T12:34:19.337
> 
> 标签：database, cassandra, database-replication, couchbase

我试图了解在 Cassandra 和 Couchbase 中实现的数据中心复制之间的区别。看起来在 Cassandra 中，如果我有两个数据中心（DC），我的所有数据都会在两个数据中心中复制。在 Couchbase 中，两个 DC 保存不同的数据，并且可以手动配置在不同 DC 之间复制数据子集。这是对的吗？

客户如何知道数据在 Couchbase 中的位置？如果我在 DC1 中查询 DC2 中的数据，会发生什么？

在 Couchbase 中，整个系统如何知道数据的复制位置？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:24:35.163

Couchbase 跨数据中心复制 (XDCR) 将所有数据从源存储桶复制到目标存储桶（连续）。

如果您在纽约数据中心有存储桶 A，在旧金山数据中心有存储桶 B，并且您将 XDCR 从存储桶 A 配置到存储桶 B，则存储桶 A 中的所有数据都会复制到存储桶 B。您无法配置任何其他过滤器。然而，这种复制只是一个方向。因此，如果您还将数据直接写入存储桶 B，您将不会在两个数据中心中拥有所有数据。如果你想同时拥有两个数据中心的所有数据，你还需要配置从bucket B到bucket A的XDCR。这在手册中称为双向复制。在这 2 个集群配置中，它将为您提供所有数据中心中的所有数据。

Couchbase 客户端 SDK 配置为与单个集群通信。这意味着客户端必须知道要连接到哪个集群，如果您的纽约集群中存储的数据与旧金山集群不同，您的应用程序必须具有知道在哪里查找数据的逻辑。

对于高可用性用例，通常在区域之间设置双向复制，并且应用程序被设计为首选集群。部署在纽约附近的应用程序可能更喜欢纽约集群。只要没有问题，它就可以读取和写入该集群。如果出现问题，比如纽约数据中心出现故障，应用程序可以通过切换到旧金山数据中心继续运行。但同样，所有这些逻辑都将在您的应用程序中。

Robin提到的“智能集群图”是用来在单个集群内查找数据的。重要的是要理解这不会定位存储在不同区域的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-20T21:25:26.080

请注意，最新版本的 Couchbase（4.0 和更高版本）XDCR 确实允许过滤。键名上的简单正则表达式允许选定的数据子集可以在数据中心之间复制。[在http://developer.couchbase.com/documentation/server/4.0/xdcr/xdcr-filtering-setup.html](http://developer.couchbase.com/documentation/server/4.0/xdcr/xdcr-filtering-setup.html)查看更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:09:59.530

在 Couchbase 中，跨数据复制工作桶到桶。Couchbase 允许两种类型的复制 - 双向和单向。如果您使用双向，两个数据集将是相同的。如果您使用单向，理论上您可以拥有一个比另一个大的数据集，但通常不会。

客户端 SDK 知道数据在 Couchbase 中的位置，因为它使用智能集群映射。该集群映射始终跟踪数据所在的位置，从而将请求发送到正确的节点。

# java - java中的自定义toString()

> ID：15615094
> 
> 赞同：3
> 
> 时间：2013-03-25T12:34:21.697
> 
> 标签：java

我正在学习使用 Michael Ernest 的“Java SE7 Programming Essentials”一书进行 java OCA 测试。这是我对以下问题的答案之一的代码：

```
public class Point3D {
    int x, y, z;

    public void setX(int x) {
        this.x = x;
    }

    public int getX() {
        return this.x;
    }

    public void setY(int y) {
        this.y = y;
    }

    public int getY() {
        return this.y;
    }

    public void setZ(int z) {
        this.z = z;
    }

    public int getZ() {
        return this.z;
    }

    public String toString(Point3D p) {
        String result = p.getX() + "," + p.getY() + "," + p.getZ();
        return result;
    }

    public static void main(String args[]) {
        Point3D point = new Point3D();
        point.setX(5);
        point.setY(12);
        point.setZ(13);
        System.out.println(point.toString(point));
    }
} 
```

我的代码有效，但在最后一行，我认为我的代码以一种奇怪的方式制作，难道不应该有一种方法来制作`point.toString()`而不是`point.toString(point)`返回该点的字符串表示形式吗？谁能向我解释如何解决它？

我确定这是一个简单的答案，只是试图理解它，因为我怀疑它指向我的 Java 知识中的一个漏洞。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T12:37:32.073

您的方法`public String toString(Point3D p)`不是重写的，这是[`Object.toString()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)获取.`String``Object`

重写它的要点是允许 的任何子类`Object`将对象的适当表示形式提供为`String`. Java API 在很多情况下都使用这种方法，主要是在需要将 an`Object`转换为 a`String`时（例如在做`System.out.println(object)`，或执行字符串连接时：

`String s = "The point is " + pointObject;`

按照ay89的建议实施它：

```
@Override
public String toString() { 
    String result = getX() + "," + getY() + "," + getZ(); 
    return result;
} 
```

请注意注解的使用[`@Override`](http://docs.oracle.com/javase/6/docs/api/java/lang/Override.html)。如果你在你的方法中使用它，编译器会警告你它的定义有问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T12:36:08.660

你为什么不使用

```
public String toString() {
    String result = getX() + "," + getY() + "," + getZ();
    return result;      
} 
```

那么你可以使用`System.out.println(point)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T12:39:11.170

为了清楚起见，我将使用[`String.format`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)而不是串联：

```
public String toString() {
    return String.format("(%d, %d, %d)", x, y, z);      
} 
```

使用此方法，您可以更改输出的外观，而无需代码读者进行太多“心理重建”。例如，如果您决定将输出更改为，例如，`{x=1, y=2, z=3}`您可以简单地重写格式行，如下所示：

```
return String.format("{x=%d, y=%d, z=%d}", x, y, z); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-25T12:39:14.973

好的，我自己解决了这个问题 - 事实证明，发布这个问题与我的[橡胶闪避](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)非常相似。

我需要添加另一种方法：

```
public String toString() {
    String result = this.getX() + "," + this.getY() + "," + this.getZ();
    return result;      
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-25T12:36:50.883

您需要覆盖 toString() 方法。Java 中的所有对象都有一个 toString 方法（它是 Object 类的一个方法）。

默认的 Object 实现只返回该对象的 hashCode （因此，如果您不覆盖它，这也是您将得到的），但如果您覆盖，您可以对特定于您的对象的数据做一些更有意义的事情。

```
@Override  
public String toString() {
   return this.getX() + "," + this.getY() + "," + this.getZ(); 
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-25T12:36:38.583

您可以简单地使用`this`代替参数`p`。因此，将您的方法`public String toString()`更改`p`为`this`并将函数本身更改为。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-25T12:40:30.407

对于覆盖/实现的方法，请使用`@Override`注释，这会给您错误参数化的 toString 错误。

此外，在 toString 中不使用 getter 更有意义。

在 println 或 String 连接中， Object.toString 被自动调用，不要显式调用它（以表明你知道这一点）。

```
@Override
public String toString() {
    StringBuilder sb = new StringBuilder();
    sb.append("Point3D(").append(x).append(", ")
        .append(y).append(", ").append(z).append(")";
    return sb.toString();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-25T12:39:00.380

你的`toString`方法应该是`public String toString()`[没有任何参数]，这意味着从 Object 类中重写

如果你这样做，你可以这样做：`System.out.println(point);`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-25T12:36:51.747

尝试这个

```
public String toString() {
    String result = this.getX() + "," + this.getY() + "," + this.getZ();
    return result;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-25T12:37:19.707

这应该解决它：

```
public String toString() {
String result = this.getX() + "," + this.getY() + "," + this.getZ();
return result;      
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-25T12:37:33.707

这样做

```
 public String toString() {
        String result = this.getX() + "," + this.getY() + "," + this.getZ();
        return result;
    } 
```

**这**是对调用对象的内部引用（在您的情况下为点），因此使用它将使对参数点的需要无效

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-25T12:37:54.467

这段代码：

```
@Override
public String toString() {
    return "{ x: " + x + ", y: " + y + ", z: " + z + " }";
} 
```

会输出这个：

```
{ x: 13, y: 2, z: 10 } 
```

当您的 get 方法返回属性时，通过直接使用属性，您可以节省方法调用。

此外，最近的编译器将自动优化这种连接`StringBuilder`。

有关更多信息，请查看此[帖子](https://stackoverflow.com/a/1532499/281815)。

我希望它有帮助

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-03-25T12:38:37.980

```
public String toString() {
    String result = this.x+ "," + this.y + "," + this.z;
    return result;      
} 
```

使用上面的代码。

# ios - 用于数学输入的自定义键盘

> ID：15615102
> 
> 赞同：0
> 
> 时间：2013-03-25T12:34:48.963
> 
> 标签：ios

如何显示只有数字和典型数学符号的键盘：括号、运算符`(+,*,/,-,^)`等。我正在寻找与 iOS 上的标准键盘具有相同外观和感觉的东西，可以移动、取消停靠和拆分. 我可能可以在 UIView 中使用按钮，但感觉与通常的键盘不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:38:43.423

# UIKeyboardType

```
The type of keyboard to display for a given text-based view.

typedef enum {
   UIKeyboardTypeDefault,
   UIKeyboardTypeASCIICapable,
   UIKeyboardTypeNumbersAndPunctuation,
   UIKeyboardTypeURL,
   UIKeyboardTypeNumberPad,
   UIKeyboardTypePhonePad,
   UIKeyboardTypeNamePhonePad,
   UIKeyboardTypeEmailAddress,
   UIKeyboardTypeDecimalPad,
   UIKeyboardTypeTwitter,
   UIKeyboardTypeAlphabet = UIKeyboardTypeASCIICapable
} UIKeyboardType; 
```

**根据您的要求进行设置。**

# php - 每次刷新 jquery 移动页面时都会将行插入数据库

> ID：15615106
> 
> 赞同：0
> 
> 时间：2013-03-25T12:35:12.353
> 
> 标签：php, mysql, forms, jquery-mobile

我正在制作一个 jquery 移动网络应用程序，并且我正在使用多页面布局。我在页面加载时连接到 mySQL，在第二个 div 页面上，我有一个表单，它使用 php 文件在提交时将表单中的值发送到 mySQL 数据库。

我的问题是，每次我刷新 Web 应用程序时，都会在我的数据库中的表中插入一行。在单击/点击提交按钮之前，我显然不希望发生这种情况。我对网络应用程序开发相对较新，并且希望对我做错的事情有所帮助。

关于如何在多页布局上通过 php 最好地插入 mySQL 数据库的建议会很棒。如果我需要显示更多代码，请告诉我。

```
<!--Top of second page within multi page layout containing form-->
<!-- The POST A JOURNEY page where user creates a journey to be seen by others-->
    <div data-role="page" id="postAJourney" data-add-back-btn="true" data-back-btn-text="back" data-rel="back" data-direction="reverse" data-transition="flip" data-theme="b" >
        <div data-role="header"  data-position="fixed">
            <h1>Post A Journey</h1>
        </div>

        <div data-role="content">
            <form action="add_journey.php" method="post" id="postAJourneyForm">

<!--Top of multipage layout-->
<?php
require 'database.php';
?> 
```

再次更新

```
<?php

//get the journey data
$radUserType = intval($_POST['radUserType']);
$pjFrom = $_POST['pjFrom'];
$pjTo = $_POST['pjTo'];
$radioJourneyType = intval($_POST['radioJourneyType']);
$departDate = $_POST['departDate'];
$returnDate = $_POST['returnDate'];
$textareanotes = $_POST['textAreaNotes'];

//check all values from $_POST
$canSubmitForm = false;
$isFormEmpty = false;

if (empty($radUserType) || empty($pjFrom) || empty($pjTo) || empty($radioJourneyType) || empty($departDate) || empty($returnDate) || empty($textareanotes))
{
$isFormEmpty = true;
}

//check for your data here
if(isset($radUserType) && isset($pjFrom) && isset($pjTo) && isset($radioJourneyType) &&     isset($departDate) && isset($returnDate) && isset($textareanotes))
{
$canSubmitForm = true;
}

$departTime = '11:12';
$returnTime = '11:16';
$seatcounter = '2';

//will only get executed if true
if ($canSubmitForm)
{
if ($isFormEmpty == false)
{
require_once('database.php');
$query = "INSERT INTO journey
    (from_destination,to_destination,journey_type,depart_date,depart_time,return_date,return_time,seats_available,journey_message,user_type)
        VALUES('$pjFrom','$pjTo','$radioJourneyType','$departDate','$departTime','$returnDate','$returnTime','$seatcounter','$textareanotes','$radUserType')";
$db->exec($query);
// Perform Query
//$result = mysql_query($query);
//if($result === true)
//{
//  $result = 'success';
//}
//else
//{
//  $result = 'insertion failure' . mysql_error();
//}
include('index.php');
}
}
else
{
$error = "Invalid product data. Check all fields and try again.";
include('error.php');
}
//Display the Product List page
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:22:46.597

您需要打破插入逻辑并检查表单是否有效并准备好提交。

伪代码：

```
// check all values from $_POST
$canSubmitForm = false;

// check for your data here
// might want to verify type as well
if (isset($radUserType) && isset($pjFrom) && isset($pjTo) && isset($radioJourneyType))
{
    $canSubmitForm = true;
}

// will only get executed if true
if ($canSubmitForm)
{
    require_once('database.php');
    $query = "INSERT INTO journey
              (from_destination,to_destination,journey_type,depart_date,depart_time,return_date,return_ti      me,seats_available,journey_message,user_type)
              VALUES('$pjFrom','$pjTo','$radioJourneyType','$departDate','$departTime','$returnDate','$re    turnTime','$seatcounter','$textareanotes','$radUserType')";

    $db->exec($query);
    // Perform Query
    $result = mysql_query($query);

    // the rest of your code here 
    ...
} 
```

# elasticsearch - pyelasticsearch 映射被覆盖

> ID：15615114
> 
> 赞同：1
> 
> 时间：2013-03-25T12:35:31.670
> 
> 标签：elasticsearch

我有一个映射的索引：

```
{
    properties: {
        field1: {
            index: not_analyzed
            omit_norms: true
            index_options: docs
            type: string
        }
       },
       _parent: {

       type: parent_doctype
       }
   }
} 
```

我所做的只是索引项目（使用“elasticsearch-HEAD”插件或python客户端pyelasticsearch）出于某种原因，有时我的映射似乎被破坏了-映射的“_parent”部分消失了，所有现有的父母文件也消失了。

这很糟糕，因为我不能依赖我的数据库，并且项目可能已损坏。

我没有使用任何进一步的映射 API 调用。什么可能导致这种情况？

我有一些想法，当尝试使用 PUT 而不是 POST 或类似的东西进行索引时会发生这种情况？

_index 可以更改映射吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:05:02.170

看来我实际上删除了我自己的映射。试图删除我发送的文件：

```
curl -XDELETE 'http://localhost:9200/my_index/my_doctype' 
```

然后，当我索引另一个文档时，映射是自动生成的，但没有 _parent 映射。

尴尬的....

# java - 极其精确的重复/连续代码执行

> ID：15615118
> 
> 赞同：0
> 
> 时间：2013-03-25T12:35:36.287
> 
> 标签：java, scheduled-tasks, nanotime, time-precision

在我的公司，我有一个程序必须通过 UDP 将一些数据发送到不受我们控制的远程系统。

数据**必须**每 7981859ns (=7.98 毫秒) +/- 0.001ms 发送一次。

可悲的是，如果我们传输数据太晚，旧版本的远程系统就会崩溃，如果我们传输太快/太早（实时数据生成），我们这边的数据就会用完。

目前，我们正在通过

```
private Runnable sendData() {
    return new Runnable() {
        byte[] b = new byte[2000];
        DatagramPacket packet = new DatagramPacket(b, b.length);

        public void run() {
                // do some processing and fill the DatagramPacket
                // (..)
                packet.setData(data);   
                packet.setSocketAddress(address);
                socket.send(packet);
                Log.debug("log time here")
        }
    };
}

threadPoolExecutor = new ScheduledThreadPoolExecutor(3);
threadPoolExecutor.scheduleAtFixedRate(sendData(), 7981859, 7981859, TimeUnit.NANOSECONDS); 
```

如果我添加一些日志记录，我可以看到数据在 6ms - 11ms 之间发送，这对我们来说范围太大了。

我现在想知道如何优化它。

是否可以使用上次传输的纳米时间戳设置变量（如何获得？我只知道`System.currentTimeMillis())`，更快地执行循环（或只是在循环中`while(true)`），然后等到“currentNanoTime - lastNanoTime > 7981859 “在做之前`send(..)`？

我的问题是我没有找到等待纳秒的方法，只有几毫秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:37:37.700

我不禁想到这不切实际。

撇开 Java*不是*实时环境（运行不同的线程、执行垃圾收集等）这一事实不谈，您能否保证您的 UDP 数据包能够以规定的精度到达？UDP 交付没有保证，更不用说有任何 QoS（服务质量）的概念

# .htaccess - 从 url 中删除多个 index.php 实例

> ID：15615128
> 
> 赞同：0
> 
> 时间：2013-03-25T12:35:59.420
> 
> 标签：.htaccess, rewrite

我知道如何从 .htaccess 中的规则中删除 index.php：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

但是当我在 404 日志中看到这个时，我不知道该怎么办：

```
video/index.php 
video/index.php/index.php 
video/index.php/index.php/index.php 
video/index.php/index.php/index.php/index.php 
```

有没有一种方法可以删除所有这些而不必逐个拼写出来？就像我可以遍历重写规则以继续删除 index.php 直到它消失吗？

非常感谢，菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:45:51.020

嗯。奇怪的是人们实际上会请求这种 URI。

试试这个：

```
RewriteRule ^(.*)\/index\.php$ $1 [R=301,L,NC] 
```

这应该从 . 末尾重复删除任何`index.php`提及`REQUEST_URI`，并重定向到正确的提及。但是请注意，它每次都会重定向，直到它消失。

另请注意，我尚未对其进行测试，因为我的 PC 目前无法正常工作（尽管该规则似乎足够基本可以分享）。如果您遇到任何问题，请告诉我。

# php - MAMP PHP 包括失败

> ID：15615129
> 
> 赞同：2
> 
> 时间：2013-03-25T12:36:06.300
> 
> 标签：php, include, mamp

Mountain Lion 上的 MAMP PHP Symfony2 本地安装。

我正在尝试执行一个简单的包含

```
require __DIR__.'/../vendor/symfony/src/Symfony/Component/ClassLoader/ApcUniversalClassLoader.php'; 
```

这解析为 /Applications/MAMP/htdocs//refactoring/base/app/../vendor/symfony/src/Symfony/Component/ClassLoader/ApcUniversalClassLoader.php

或者

/Applications/MAMP/htdocs//重构/base/vendor/symfony/src/Symfony/Component/ClassLoader/ApcUniversalClassLoader.php

由于找不到文件，这总是导致包含失败。我已经进行了测试，似乎 80 个字符是包含路径长度的限制，但是我找不到任何地方来控制它。是否有我可以更改的 max_include_path_length 变量？如果没有，还有其他建议吗？

谢谢克里斯 H

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:55:12.573

它花了一些空格，尝试删除空格...或像这样使用

```
require_once __DIR__ . '/../../../../bootstrap/unit.php';

require_once sfConfig::get('sf_root_dir') . '/MY/LONG/PATH.php' 
```

供参考使用

```
http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx 
```

# java - Java sql 查询手动工作，但不在 Java 代码中执行

> ID：15615130
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:36:07.650
> 
> 标签：java, sql

所以我想在数据库中添加一些东西，但它不起作用，它不会做`this.statement.executeUpdate(sqlQuery);`。如果我打印出`sqlQuery`并在 phpMyAdmin 中调用它，它就可以工作。

我有几个数据库迭代，类似于这个，工作得很好，但是这个随机没有。

SQL查询：

```
INSERT INTO tvshows (title, plot, poster, imdb_rating, imdb_url, imdb_id, release_date) 
VALUES('The Office', 'A mockumentary on a group of typical office workers, where the workday consists of ego clashes, inappropriate behavior, and tedium. Based on the hit BBC series.', 'http://ia.media-imdb.com/images/M/MV5BMTgzNjAzMDE0NF5BMl5BanBnXkFtZTcwNTEyMzM3OA@@._V1._SY317_CR9,0,214,317_.jpg', '8.9', 'http://www.imdb.com/title/tt0386676/', 'tt0386676', '2005-06-11') 
```

代码：

```
public boolean insert_tvShow(TvShow tvShow) {

    boolean success = false;
    String plot = tvShow.getPlot();
    plot = plot.replaceAll("'", "''");

    try {
        this.statement = this.connection.createStatement();
        String sqlQuery = String.format("INSERT INTO tvshows (title, plot, poster, imdb_rating, imdb_url, imdb_id, release_date) " +
                                        "VALUES('%s', '%s', '%s', '%s', '%s', '%s', '%s')",
                                        tvShow.getTitle(),
                                        plot,
                                        tvShow.getPoster(),
                                        tvShow.getImdb_Rating(),
                                        tvShow.getImdb_url(),
                                        tvShow.getImdb_id(),
                                        tvShow.getReleaseDate());
        System.out.println(sqlQuery);
        this.statement.executeUpdate(sqlQuery);
        success = true;
    } catch(Exception e) {

    } finally {
        try {
            connection.close();
        } catch (SQLException e) {}
    }

    return success;
} 
```

**编辑：**

好的，我从现在开始使用 PreparedStatement。但我仍然不会让代码执行。由于我没有错误，我无法知道。可能一个原因是我的 release_date，所以我尝试在没有它的情况下让它工作。“ps.executeUpdate();” 是代码到达的地方。

```
public boolean insert_tvShow(TvShow tvShow) {

    boolean success = false;
    java.util.Date myDate = new java.util.Date("10/10/2009");

    try {
        String sqlString = "INSERT INTO tvshows (title, plot, poster, imdb_rating, imdb_url, imdb_id, release_date) " +
                            "VALUES(?, ?, ?, ?, ?, ?, ?)";
        PreparedStatement ps = connection.prepareStatement(sqlString);
        ps.setString(1, tvShow.getTitle()); 
        ps.setString(2, tvShow.getPlot()); 
        ps.setString(3, tvShow.getPoster()); 
        ps.setDouble(4, tvShow.getImdb_Rating()); 
        ps.setString(5, tvShow.getImdb_url()); 
        ps.setString(6, tvShow.getImdb_id());
        ps.setDate(7, new java.sql.Date(myDate.getTime()));
        ps.executeUpdate();
        connection.commit();
        success = true;
    } catch(Exception e) {
        //TODO logging
    } finally {
        try {
            connection.close();
        } catch (SQLException e) {}
    }
    return success;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:44:44.350

您的代码很容易受到 SQL 注入攻击。如果有人进入了一个名为'; 放下电视节目；' 例如，您认为会发生什么？

使用参数：

```
 PreparedStatement ps = this.connection.prepareStatement("INSERT INTO tvshows (title, plot, poster, imdb_rating, imdb_url, imdb_id, release_date) VALUES(?,?,?,?,?,?,?)");

    ps.setString(1, tvShow.getTitle());
    ps.setString(2, tvSHow.getPlot();
    //etc...

    ps.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T12:43:45.717

永远不要这样做：

```
 String sqlQuery = String.format("INSERT INTO tvshows (title, plot, poster, imdb_rating, imdb_url, imdb_id, release_date) " +
                                        "VALUES('%s', '%s', '%s', '%s', '%s', '%s', '%s')",
                                        tvShow.getTitle(),
                                        plot,
                                        tvShow.getPoster(),
                                        tvShow.getImdb_Rating(),
                                        tvShow.getImdb_url(),
                                        tvShow.getImdb_id(),
                                        tvShow.getReleaseDate()); 
```

用这个替换它：

```
 PreparedStatement statement = conn.prepareStatement("INSERT INTO tvshows (title, plot, poster, imdb_rating, imdb_url, imdb_id, release_date) " +
                                                "VALUES(?,?,?,?,?,?,?)";
statement.setString(1,"title");  
//rest of setters here  
statement.execute();  
conn.commit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:44:11.090

最有可能的问题是发布日期。数据库对它们如何接受日期和时间很挑剔。您不能只将看起来像日期的字符串塞入 SQL 查询中。

我建议使用适当的 JDBC 方法，即 PreparedStatement.setTimestamp，它使 JDBC 驱动程序能够将表示日期的 Java 对象转换为数据库将接受的结构。

[http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setTimestamp(int](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setTimestamp(int) , java.sql.Timestamp)

在您阅读了 PrepatedStatement 接口之后，我可以建议您研究一下 SQL 注入吗？

[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

由于一些评论提到了 Bobby Tables，这里有一些关于 Little Bobby 的信息。

[http://bobby-tables.com/](http://bobby-tables.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T12:46:09.697

使用`PreparedStatement`：

```
 String sqlQuery = "INSERT INTO tvshows (title, plot, poster, imdb_rating, imdb_url, imdb_id, release_date) VALUES(?, ?, ?, ?, ?, ?, ?)";
    final PreparedStatement preparedStatement = conn.prepareStatement(sqlQuery);
    preparedStatement.setString(1, tvShow.getTitle());
    preparedStatement.setString(2, plot);
    preparedStatement.setString(3, tvShow.getPoster());
    preparedStatement.setString(4, tvShow.getImdb_Rating());
    preparedStatement.setString(5, tvShow.getImdb_url());
    preparedStatement.setString(6, tvShow.getImdb_id());
    preparedStatement.setString(7, tvShow.getReleaseDate()); 
```

**永远不要使用`String`**.

`String`使用容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击的查询构建。他们也容易出现`String`转义问题，例如`'`您的示例中的问题。

# blackberry - 警告 - BlackBerry 9900 Simulator ----无法删除 C:\Eclipse\plugins\net.rim.ejde.componentpack7.1.0_7.1.0.10\components\simulator\9900.bug

> ID：15615133
> 
> 赞同：0
> 
> 时间：2013-03-25T12:36:14.800
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

有人可以解释一下并给我解决方案吗？对于在...上运行项目时出现的问题。`Blackberry Simulator 7`我有一个弹出窗口

```
Warning - BlackBerry 9900 Simulator 
```

`Could not erase... C:\Eclipse\plugins\net.rim.ejde.componentpack7.1.0_7.1.0.10\components\simulator\9900.bug`

感谢您！

-Preetam。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T06:21:37.747

只需重置或重新启动您的设备模拟器并从 Eclipse 中清理模拟器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:37:36.133

在模拟器文件夹中运行 clean.bat。也可以尝试从模拟器窗口 File》Reset device

# c++ - codecvt 不是标准头吗？

> ID：15615136
> 
> 赞同：45
> 
> 时间：2013-03-25T12:36:30.700
> 
> 标签：c++, c++11

此代码使用 Visual C++ 11 编译并在 Windows 7 上按预期运行，但无法使用 Windows 7 上的 MinGW 4.7.0 或 Linux 上的 gcc 4.8.0 进行编译。`-std=c++11`使用标志编译

```
#include <codecvt>
#include <string>

// convert UTF-8 string to wstring
std::wstring utf8_to_wstring (const std::string& str)
{
    std::wstring_convert<std::codecvt_utf8<wchar_t>> myconv;
    return myconv.from_bytes(str);
}

// convert wstring to UTF-8 string
std::string wstring_to_utf8 (const std::wstring& str)
{
    std::wstring_convert<std::codecvt_utf8<wchar_t>> myconv;
    return myconv.to_bytes(str);
} 
```

错误：

> codecvt：没有这样的文件或目录。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-25T12:38:56.017

GCC 拒绝这段代码的原因很简单：libstdc++ 还不支持`<codecvt>`。

[C++11 支持状态页面](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011)证实了这一点：

> 22.5 标准代码转换方面 N

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-03-16T10:17:42.827

这个问题是在大约 3 年前提出的，我很惊讶我在使用带有新更新的 Ubuntu 14.04 时也遇到了同样的问题。

第二个惊喜，@Fanael 提供的链接现在显示：

> 22.5 标准代码转换方面**Y**

所以我搜索了哪个版本的 GCC 将完全实现 C++11。事实证明，在 GCC 5 中添加了完全支持：

[https://gcc.gnu.org/gcc-5/changes.html](https://gcc.gnu.org/gcc-5/changes.html)

> 完全支持 C++11，包括以下新特性：
> 
> ...
> 
> 用于 Unicode 转换的语言环境方面；
> 
> ...

如果我有足够的声誉，我会很乐意对答案发表评论:)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-03-05T10:18:47.717

使用[Boost.Locale](http://www.boost.org/doc/libs/1_57_0/libs/locale/doc/html/index.html)的解决方法：

```
#include <boost/locale/encoding_utf.hpp>
#include <string>

using boost::locale::conv::utf_to_utf;

std::wstring utf8_to_wstring(const std::string& str)
{
    return utf_to_utf<wchar_t>(str.c_str(), str.c_str() + str.size());
}

std::string wstring_to_utf8(const std::wstring& str)
{
    return utf_to_utf<char>(str.c_str(), str.c_str() + str.size());
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-08T16:40:13.877

它适用于带有 gcc 5.3 的 Ubuntu 14.04。

# php - zend SMTP 由于目标机器主动拒绝，无法建立连接

> ID：15615143
> 
> 赞同：0
> 
> 时间：2013-03-25T12:36:47.077
> 
> 标签：php, zend-framework

下面的片段：

```
$config = array('auth' => 'login',
                'username' => 'myusername',
                'password' => 'password');

$transport = new Zend_Mail_Transport_Smtp('mail.server.com', $config);

$mail = new Zend_Mail();
$mail->setBodyText('This is the text of the mail.');
$mail->setFrom('sender@test.com', 'Some Sender');
$mail->addTo('recipient@test.com', 'Some Recipient');
$mail->setSubject('TestSubject');
$mail->send($transport); 
```

...正在引发以下错误：

```
"No connection could be made because the target machine actively refused." 
```

片段中的错误是什么？我只是从 zend 框架在线教程中获取的。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:50:17.953

尝试将此添加到您的 SMTP 配置中

```
$config = array('auth' => 'login',
'username' => 'myusername',
'password' => 'password'
'ssl' => 'ssl',
'port' => $port
); 
```

$port 可能因 SMTP 提供程序而异，通常为 465，但请通过 SMTP 服务提供程序手册/帮助获取正确的端口。

希望这可以帮助

# wpf - ListCollectionView - GroupDescriptions - 如何获取分组项目计数？

> ID：15615147
> 
> 赞同：2
> 
> 时间：2013-03-25T12:36:58.930
> 
> 标签：wpf, datagrid, listcollectionview

我有一个`ListCollectionView`使用`PropertyGroupDescription`如下所示分组的实例

```
ListCollectionView view = new ListCollectionView(calls);
view.GroupDescriptions.Add(new PropertyGroupDescription("Technician.Name"));
DGCalls.ItemsSource = view; 
```

分组工作正常，但我想显示分组项目的计数，如下所示。

![在此处输入图像描述](../Images/8b900c876874c58ab16b96ea1a3ebae6.png)

是否可以显示计数？

这是我创建的示例应用程序。

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            Technician tech1 = new Technician() { Name = "Tech01" };
            Technician tech2 = new Technician() { Name = "Tech02" };
            List<ServiceCall> calls = new List<ServiceCall>();
            calls.Add(new ServiceCall() { ID = 1, Technician = tech1});
            calls.Add(new ServiceCall() { ID = 2, Technician = tech1 });
            calls.Add(new ServiceCall() { ID = 3, Technician = tech1 });
            calls.Add(new ServiceCall() { ID = 4, Technician = tech2 });
            calls.Add(new ServiceCall() { ID = 5, Technician = tech2 });
            ListCollectionView view = new ListCollectionView(calls);
            view.GroupDescriptions.Add(new PropertyGroupDescription("Technician.Name"));
            DGCalls.ItemsSource = view;
        }
    }
    public class ServiceCall
    {
        public int ID { get; set; }
        public Technician Technician { get; set; }
    }
    public class Technician
    {
        public String Name { get; set; }
    }

} 
```

XAML：

```
<Grid>
    <Grid.Resources>
        <Style x:Key="GroupHeaderStyle" TargetType="{x:Type GroupItem}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type GroupItem}">
                        <Expander IsExpanded="True"  Background="Blue" >
                            <Expander.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Name}" Foreground="White" FontWeight="Bold"/>
                                    <TextBlock Text="{Binding Count}" Foreground="White" FontWeight="Bold"/>
                                </StackPanel>
                            </Expander.Header>
                            <ItemsPresenter/>
                        </Expander>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Grid.Resources>
    <DataGrid Name="DGCalls" AutoGenerateColumns="False" IsReadOnly="True">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Call ID" Binding="{Binding ID}"/>
            <DataGridTextColumn Header="Technician Name" Binding="{Binding Technician.Name}"/>
        </DataGrid.Columns>
        <DataGrid.GroupStyle>
            <GroupStyle ContainerStyle="{StaticResource GroupHeaderStyle}">
                <GroupStyle.Panel>
                    <ItemsPanelTemplate>
                        <DataGridRowsPresenter/>
                    </ItemsPanelTemplate>
                </GroupStyle.Panel>
            </GroupStyle>
        </DataGrid.GroupStyle>
    </DataGrid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:46:57.140

只需使用 CollectionViewSource 的[ItemCount](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewgroup.itemcount.aspx)属性：

```
 <Style x:Key="GroupHeaderStyle" TargetType="{x:Type GroupItem}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type GroupItem}">
                    <Expander IsExpanded="True"  Background="Blue" >
                        <Expander.Header>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Name}" Foreground="White" FontWeight="Bold"/>
                                <TextBlock Text="{Binding ItemCount}" Foreground="White" FontWeight="Bold"/>
                            </StackPanel>
                        </Expander.Header>
                        <ItemsPresenter/>
                    </Expander>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# vb.net - VB.NET 将图片框设置为另一个图片框的背景

> ID：15615148
> 
> 赞同：0
> 
> 时间：2013-03-25T12:37:05.477
> 
> 标签：vb.net, background, drawing, picturebox

我有一个背景图片框和背景上的大量图片框，但是如何使图片框的背景与普通背景相同？

# java - 如何将eclipse中的代码标记为测试代码/未经测试/实验/修复/不完整？

> ID：15615151
> 
> 赞同：0
> 
> 时间：2013-03-25T12:37:12.223
> 
> 标签：java, eclipse

您可以使用注释来标记代码。除此之外，有没有办法将代码块或代码行标记为实验性/仅用于测试目的？

java中的伪代码 -

```
public SpecialObject importantMethod(){

System.out.println("Ready to go into if else"); // Test Code: Delete Later !

if(condition after a big series of method calls){

System.out.println("Entered into if"); // Test Code: Delete Later !

//execute code which is critical to program

}else
{

 System.out.println("Entered into else");  // Test Code: Delete Later !

 //execute code which is critical to program

}

 return specialObject;
}

public void anotherImportantMethod(){

 SpecialObject obj = importantMethod();

 //do something important with obj
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:40:48.230

您的示例看起来像是 Log4j 级别所需要的。您可以为不同的类别（通常对应于类名）指定不同的日志级别，并在部署或运行​​时打开/关闭这些级别。

如果您的要求不仅限于日志记录，我会注入一些您调用合适方法的组件，并创建不同的实现（例如，一个调用`TestExperimentalFunctionality`和一个调用`NoFunctionality`）。它们都将实现相同的接口，并且您的核心代码不必更改。但是，您可以在部署/运行时提供不同的实现，从而为您提供不同的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-12T07:03:30.783

首先，我想添加您可能也会感兴趣的我自己的要求，然后我将分享我到目前为止的知识。

我的要求是像编译错误一样在“项目资源管理器”上显示类似错误的指示。这样我就不会意外地提交、上传或发布不完整或错误代码到空中（这不是编译错误，而是业务逻辑错误）。

例子：

我希望它在项目树上显示错误标记： [这就像在“项目资源管理器”中标记编译错误的方式](https://i.stack.imgur.com/oyUD3.png)

```
// SKIP this product
if(identifier==null){
// FIXME - REVERT THIS = TEST ONLY - Don't skip product
/*
  continue;
*/
} 
```

为你：

1.  您可以使用一些书签来突出显示代码。在这里查看答案： [Eclipse plugin to mark code](https://stackoverflow.com/questions/11400007/eclipse-plugin-to-mark-code?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa)
2.  您可以使用“任务标签”来标记 TODO、FIXME、XXX 和自定义中的评论。Window -> Preferences，然后搜索 General -> Editors -> Structured Text Editors -> Task 标签，或搜索 Java -> Compiler -> Task 标签。在此处查看答案：[IDE 注释关键字](https://stackoverflow.com/questions/9586478/ide-comment-keywords?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa)

# maven - 插件“：maven-assembly-plugin”的错误解析版本

> ID：15615157
> 
> 赞同：2
> 
> 时间：2013-03-25T12:37:25.217
> 
> 标签：maven, plugins, tomcat7, pom.xml, cloud-foundry

我正在开发一个 Spring 应用程序，我在其中添加了 EL2.2，它需要 tomcat 7。该应用程序部署在仅提供 tomcat 6 的 Cloud Foundry 上。因此我必须遵循以下说明： [https ://github.com/ ericbottard/cloudfoundry-tomcat-7/blob/master/README.md](https://github.com/ericbottard/cloudfoundry-tomcat-7/blob/master/README.md)

一切正常，但我的 pom.xml 现在有一个错误说：

`Error resolving version for plugin 'com.luke.timetable:maven-assembly-plugin' from the repositories [local (C:\Users\Luke.m2\repository), central (http://repo.maven.apache.org/maven2)]: Plugin not found in any plugin repository`

我不确定在上述说明的第 4 步中需要执行哪些修改（如果有），有什么想法吗？

感谢帮助。

**编辑：** 我已经更改了下面评论中建议的内容，但现在我的问题是该应用程序无法在 Cloud Foundry 上运行。当 pom.xml 中存在错误时它可以工作，但是一旦我删除它就会得到这个错误

`java.lang.LinkageError: loader constraint violation: when resolving interface method "javax.servlet.jsp.JspApplicationContext.getExpressionFactory()Ljavax/el/ExpressionFactory;" the class loader (instance of org/apache/catalina/loader/WebappClassLoader) of the current class, com/sun/faces/config/ConfigureListener, and the class loader (instance of org/apache/catalina/loader/StandardClassLoader) for resolved class, javax/servlet/jsp/JspApplicationContext, have different Class objects for the type avax/el/ExpressionFactory; used in the signature at com.sun.faces.config.ConfigureListener.registerELResolverAndListenerWithJsp(ConfigureListener.java:694) at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:244) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206) at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705) at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057) at org.apache.catalina.core.StandardHost.start(StandardHost.java:840) at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057) at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463) at org.apache.catalina.core.StandardService.start(StandardService.java:525) at org.apache.catalina.core.StandardServer.start(StandardServer.java:754) at org.apache.catalina.startup.Catalina.start(Catalina.java:595) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289) at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)`

我在本地 tomcat 6 和 cloud Foundry 上都遇到了上述异常，当 pom.xml（您在下面给出修复的那个）中存在错误时，该应用程序在本地 tomcat 6 和 cloud Foundry 上都可以工作。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:39:48.063

maven-assembly-plugin 的 groupId 是：

```
org.apache.maven.plugins 
```

并不是

```
com.luke.timetable 
```

这意味着给定的信息必须如下所示：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-assembly-plugin</artifactId>
  <version>2.4</version>
  ...
</plugin> 
```

# c# - 将 RDP 构建到 C# 应用程序中

> ID：15615160
> 
> 赞同：5
> 
> 时间：2013-03-25T12:37:33.030
> 
> 标签：c#, rdp

我目前正在尝试将 RDP 构建到我制作的应用程序中。我们经常需要定期连接到许多服务器，并且希望我们的员工无需了解所有服务器的详细信息。

我目前正在尝试使用以下示例： http: [//www.codeproject.com/KB/cs/RemoteDesktop_CSharpNET.aspx](http://www.codeproject.com/KB/cs/RemoteDesktop_CSharpNET.aspx)

使用上述内容时，我收到以下错误：

> 由于以下错误，检索具有 CLSID {791FA017-2DE3-492E-ACC5-53C67A2B94D0} 的组件的 COM 类工厂失败：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

从这段代码：

```
MsRdpClient rdp1;
rdp1 = new MSTSCLib.MsRdpClient(); 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:39:45.627

将您的 Visual Studio 项目设置为 x86 版本。

项目属性 -> 构建选项卡 -> 平台目标 -> x86

![在此处输入图像描述](../Images/5b0f4bc3160beb69ba58ba2f235d7472.png)

如果没有帮助，请尝试通过[regsvr32](http://technet.microsoft.com/en-us/library/bb490985.aspx)注册 com dll 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:51:59.653

正如 iamsleepy 评论的那样，依赖您的操作系统，您需要一个不同的 COM 组件。

您引用的那个是特定于 XP 的。查看以下页面，了解不同操作系统的所有 CLSID：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383541%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383541%28v=vs.85%29.aspx)

例如，对于 Windows 7，`{A9D7038D-B5ED-472E-9C47-94BEA90A5910}`如果您通过注册表 (HKEY_CLASS_ROOT\CLSID) 搜索，您需要由`C:\Windows\System32\mstscax.dll`

# asp.net-mvc - ASP.NET MVC4 简单成员资格不起作用

> ID：15615170
> 
> 赞同：0
> 
> 时间：2013-03-25T12:38:06.467
> 
> 标签：asp.net-mvc, iis, razor

我有一个使用 sql server 获取数据的 MVC4 应用程序。我也有简单的成员资格提供程序，它的表存储在同一个数据库中，并且都使用相同的连接字符串：

```
<connectionStrings><add name="bazaConnectionString" connectionString="DataSource=WINSERVER;Initial Catalog=baza;Persist Security Info=True;User ID=visualstudio;Password=xxx" providerName="System.Data.SqlClient" /> 
```

当我在 Visual Studio 中测试应用程序时，一切正常，但是当我发布项目并将其附加到 IIS8 网络服务器（与 sql 服务器在同一台计算机上）时，简单的成员资格不起作用。

首先，我认为连接字符串有问题，但应用程序中使用它的其他功能正常工作。但是，一旦我单击使用登录之类的成员资格的东西，它就会出现错误：

*   WinException 0x80004005 找不到文件 SqlException 0x80131904
*   网络相关或特定于实例的错误

任何人都可以帮我解决这个问题，否则我想我将不得不将自己的用户授权逻辑写入每个控制器。

**更新：**在尝试了一些事情之后，问题似乎出在 Visual Studio 生成的 [Authorize] 属性和 accountController 上。因为如果我在其他任何地方调用 WebSecurity 方法，比如登录，它就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:41:34.547

最可能的原因是您的应用程序正在使用另一个数据库来存储简单的成员信息。

浏览您机器上的 app_Data 文件夹，如果您看到那里创建了一个 .mdf 文件，那么您肯定会为此使用不同的数据库。当 asp.net 应用程序尝试在 app_Data 文件夹中搜索要附加的 localdb 文件但找不到该文件时，就会出现此问题。在这种情况下，重新配置简单成员资格提供程序以使用给定的连接字符串。

此外，还要确保您没有使用 asp.net 配置工具来创建用户和角色，因为如果没有指定 db，它将始终创建一个 localdb。

# c - 函数指针和默认参数

> ID：15615174
> 
> 赞同：1
> 
> 时间：2013-03-25T12:38:17.190
> 
> 标签：c, function-pointers

假设，我有一个原型函数，如 (in `function.h`)

```
void function(int argument, bool flag); 
```

此函数有两种变体行为，取决于`flag`.

早些时候，在一个模块 ( `module.h`, `module.c`) 中，我调用了该函数：

```
#include "function.h"

function(argument1, true);
function(argument2, false); 
```

让我们进一步假设，我想将此函数传递给一个模块，反转该依赖关系：

```
void (* funcPtr)(int argument, bool flag);

void setFuncPtr(void (* func)(int argument, bool flag))
{
  funcPtr = func;
} 
```

现在我可以拥有`function.c`：

```
#include "module.h"

setFuncPtr(function); 
```

并在`module.h`：

```
funcPtr(argument1, true);
funcPtr(argument2, false); 
```

有没有办法拥有两个指针，每个指针都指向函数，但具有不同的硬编码值`flag`？喜欢：

```
void (* funcPtrTrue)(int argument, bool flag);
void (* funcPtrFals)(int argument, bool flag);
/* Or, even better
void (* funcPtrTrue)(int argument);
void (* funcPtrFals)(int argument);
*/

void setFuncPtr(void (* func)(int argument, bool flag))
{
  funcPtrTrue  = func(argument, true);
  funcPtrFalse = func(argument, false);

} 
```

（我现在，这不是正确的代码，但应该说明所需的功能）

在 Olis 提议之后，让我们把事情复杂化。`bool`是一个类型定义`function.h`：

```
typedef enum {
  FALSE,
  TRUE
} bool; 
```

现在我必须`function.h`再次包含`module.c`以使其再次工作。

```
#include "function.h"

void functionTrue(int argument)
{
  fktPtr(argument, TRUE);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:40:20.073

C 没有默认参数。

我认为您需要两个单独的函数指针是有充分理由的，而不是直接`funcPtr`使用所需的`flag`参数进行调用。如果是这样，为什么不在你的模块里有两个包装函数呢？

```
void (* funcPtr)(int argument, bool flag);

void setFuncPtr(void (* func)(int argument, bool flag)) {
  funcPtr = func;
}

void funcTrue(int argument)  { funcPtr(argument, true); }
void funcFalse(int argument) { funcPtr(argument, false); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:02:39.297

你可以使用结构

```
struct funcstruct {
    void (*func)(int arg, bool flag);
    bool default_flag;
} funcstruct;

struct funcstruct funcPtrTrue, funcPtrFalse;

void setFuncPtr(void (* func)(int argument, bool flag))
{
  funcPtrTrue.func = func; funcPtrTrue.default_flag = true;
  funcPtrFals.func = func; funcPtrFals.default_flag = false;

} 
```

# webdriver - WebDriver：根据选项值选择 Radio 组

> ID：15615179
> 
> 赞同：1
> 
> 时间：2013-03-25T12:38:31.533
> 
> 标签：webdriver, radio-group

我试图通过使用 WebDriver 给出以下命令从 RadioGroup 中选择一个选项

**driver.findElement(By.name("selectedAdvertiser value=4_7")).click();**

上面这段代码是从 IDE 中导出的。但是它抛出了一个 ElementNotFoundException。仅供参考：它是一个有多种选择的广播组。我的要求是根据输入选择选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:48:06.747

由于“值= 4_7”，它不起作用。你正在做一个 By.name，所以只应该存在可能只是“selectedAdvertiser”的名称。如果您需要 value=4_7 来识别您正在单击的按钮，因为所有单选按钮都具有相同的名称，请尝试：

```
driver.findElement(By.cssSelector("[name='selectedAdvertiser'][value='4_7']").click(); 
```

# ajax - drupal 7中的ajax请求不起作用

> ID：15615180
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:38:31.973
> 
> 标签：ajax, drupal, autocomplete, drupal-7, drupal-modules

我的 drupal 7 站点中的自动完成有问题。每当发送自动完成请求时，每个请求的末尾都会出现 9 个。

类似的事情正在网页上发生。9 出现在标签的末尾。

请给我它的解决方案。这是与 9 一起出现的 ajax 结果

```
 An AJAX HTTP error occurred.
    HTTP Result Code: 200
    Debugging information follows.
    Path: node_reference/autocomplete/node/field_parent_textbook
StatusText: OK
ResponseText: {"Zondervan Atlas of the Bible [nid:4602]":"\u003cdiv class=\"reference-autocomplete\"\u003eZondervan Atlas of the Bible\u003c\/div\u003e"}9 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:24:10.647

到目前为止，最有可能的情况是您有一些自定义代码错误地打印了该代码。查看您的代码，并确保您不这样做`print`或`echo`任何事情。

# php - 仅显示具有特定值的动态创建的表行

> ID：15615182
> 
> 赞同：0
> 
> 时间：2013-03-25T12:38:37.753
> 
> 标签：php, if-statement, html-table

首先，我将展示我目前拥有的内容，以便（希望）问题很清楚。

我有一个 SQL 查询来从我的数据库中获取数据，如下所示：

```
$strSQL1        = "SELECT Klant.ID, Klant.Naam, Klant.Email, Klant.Soort, Subscriptions.Klant_ID, Subscriptions.Status, Subscriptions.Datum, Subscriptions.ID
                  FROM NAW.Klant 
                  JOIN NAW.Subscriptions 
                  ON Klant.ID = Subscriptions.Klant_ID,
                  (SELECT MAX(Subscriptions.ID) as ids, Klant_ID 
                  FROM NAW.Subscriptions
                  WHERE Mail_ID ='".$_GET["ID"]."'  
                  GROUP BY Klant_ID) table2
                  WHERE Subscriptions.ID=table2.ids"; 
$objQuery1      = mysql_query($strSQL1); 
```

然后我将数据添加到如下所示的 HTML 表中：

```
<table width="700" border="1">  
<tr> 
   <th width="91"> <div align="center">ID  </div></th>  
   <th width="91"> <div align="center">Naam  </div></th> 
   <th width="91"> <div align="center">Email  </div></th> 
   <th width="91"> <div align="center">Soort  </div></th> 
   <th width="91"> <div align="center">Status  </div></th> 
   <th width="91"> <div align="center">Datum  </div></th> 
</tr> 
<?php for ($i = 0; $objResult1 = mysql_fetch_array($objQuery1); $i++) : ?> 
<tr>  
   <td><div align="center"><?=$objResult1["Klant_ID"];?></div></td>
   <td><div align="center"><?=$objResult1["Naam"];?> </div></td> 
   <td><div align="center"><?=$objResult1["Email"];?> </div></td> 
   <td><div align="center"><?=$objResult1["Soort"];?> </div></td> 
   <td><div align="center"><?=$objResult1["Status"];?> </div></td>
   <td><div align="center"><?=$objResult1["Datum"];?> </div></td>
<?php endfor; ?>
</table> 
```

该表当前显示此数据：

![在此处输入图像描述](../Images/7e5b1483aae955f38e558647f54ac2c9.png) （这些都是编造的名字/电子邮件）

我的问题是，是否有办法只显示“状态”为 10 的行？使用“if”语句可能是可能的，但我不知道如何做到这一点。如果有人知道如何做到这一点或将我推向正确的方向，那就太好了。提前致谢！

注意：我知道我不应该使用 mysql_* 但因为我稍后会更改为 PDO，所以你们不必提及这个^^

注意 #2：我忘了补充一点，我不想更改我的 SQL 查询，因为它会弄乱我从数据库中获取的数据。（我知道这有点含糊，但我不知道如何解释）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:40:53.263

```
<?php for ($i = 0; $objResult1 = mysql_fetch_array($objQuery1); $i++) :
    if($objResult1["Status"]!= 10) continue;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:42:24.233

将您希望强制执行的条件添加到您的 WHERE 子句中。

```
"SELECT Klant.ID, Klant.Naam, Klant.Email, Klant.Soort, Subscriptions.Klant_ID, Subscriptions.Status, Subscriptions.Datum, Subscriptions.ID
                  FROM NAW.Klant 
                  JOIN NAW.Subscriptions 
                  ON Klant.ID = Subscriptions.Klant_ID,
                  (SELECT MAX(Subscriptions.ID) as ids, Klant_ID 
                  FROM NAW.Subscriptions
                  WHERE Mail_ID ='".$_GET["ID"]."'  
                  GROUP BY Klant_ID) table2
                  WHERE Subscriptions.ID=table2.ids
                  AND Subscriptions.Status = 10"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:43:07.513

尝试添加`Subscriptions.Status = 10`查询的 where 子句

```
$strSQL1        = "SELECT Klant.ID, Klant.Naam, Klant.Email, Klant.Soort, Subscriptions.Klant_ID, Subscriptions.Status, Subscriptions.Datum, Subscriptions.ID
                  FROM NAW.Klant 
                  JOIN NAW.Subscriptions 
                  ON Klant.ID = Subscriptions.Klant_ID,
                  (SELECT MAX(Subscriptions.ID) as ids, Klant_ID 
                  FROM NAW.Subscriptions
                  WHERE Mail_ID ='".$_GET["ID"]."'  
                  GROUP BY Klant_ID) table2
                  WHERE Subscriptions.ID=table2.ids AND Subscriptions.Status = 10"; 
$objQuery1      = mysql_query($strSQL1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:44:20.720

这是你要找的吗？

```
<?php
for ($i = 0; $objResult1 = mysql_fetch_array($objQuery1); $i++) :
if($objResult1p['Status'] == 10){
?>
<tr>  
   <td><div align="center"><?=$objResult1["Klant_ID"];?></div></td>
   <td><div align="center"><?=$objResult1["Naam"];?> </div></td> 
   <td><div align="center"><?=$objResult1["Email"];?> </div></td> 
   <td><div align="center"><?=$objResult1["Soort"];?> </div></td> 
   <td><div align="center"><?=$objResult1["Status"];?> </div></td>
   <td><div align="center"><?=$objResult1["Datum"];?> </div></td>
</tr>
<?php
}
endfor;
?> 
```

# vba - VBA我如何在命令按钮上具有相同的代码但变量已更改

> ID：15615188
> 
> 赞同：1
> 
> 时间：2013-03-25T12:38:54.573
> 
> 标签：vba

对 VBA （和真正的编码）来说是全新的，并且从今天开始，所以我可以想象这个问题有一个相对简单的解决方法。

我想为多个主题创建一个修订记录器，并且仅针对 1 个主题的代码运行良好。这是我所拥有的。（我不能放图片，所以这里是链接。）

[http://i.imgur.com/Up2Pf8r.png](http://i.imgur.com/Up2Pf8r.png)

这是命令按钮的代码（notr 代表修改次数）

```
Private Sub revision_Click()

Dim check As String

If revision.Caption = "StartRevision" Then
revision.Caption = "EndRevision"
Else
revision.Caption = "StartRevision"
End If

Dim column As Integer
Dim notr As Integer

notr = Cells(*2*, 5).Value
column = notr + 6

If revision.Caption = "StartRevision" Then
Cells(*3*, column).Value = Now
Cells(*3*, column).NumberFormat = "dd/mm/yyyy hh:mm:ss"
Cells(*4*, column).Value = Abs((Cells(2, column)) - (Cells(3, column)))
Cells(*4*, column).NumberFormat = "hh:mm:ss"
Else
Cells(*2*, column).Value = Now
Cells(*2*, column).NumberFormat = "dd/mm/yyyy hh:mm:ss"
End If

If revision.Caption = "StartRevision" Then
notr = notr + 1
Cells(*2*, 5).Value = notr
End If

End Sub 
```

现在虽然我希望为其他主题复制并粘贴该命令按钮。现在我可以通过更改每个按钮每次都标有 * 的数字来轻松做到这一点，但我想知道是否有办法做到这一点，但使这些 * 数字变量并且只为每个按钮设置一次该代码主题只需更改这些变量，而不必多次复制和粘贴整个代码。

我知道我不是很清楚，所以很抱歉:(但任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:12:31.080

不是将所有代码放在按钮单击事件上，而是有一个单独的子程序，它为您要更改的元素提供一个参数。因此，而不是像这样的第一行：

```
Private Sub revision_Click() 
```

用这个：

```
Private Sub revision(MyVar As Long) 
```

然后使用 MyVar 替换您想要更改的代码部分，这将需要一些修改才能从一个数字中获取您想要的单元格编号。然后为每个按钮使用一些代码，如下所示：

```
Private Sub Button1_Click()
  revision 1
End Sub

Private Sub Button2_Click()
  revision 2
End Sub 
```

# asp.net-mvc - 设置fineuploader asp.net mvc的最大请求长度

> ID：15615189
> 
> 赞同：0
> 
> 时间：2013-03-25T12:38:55.860
> 
> 标签：asp.net-mvc

我正在使用 Fineuploader 在我的 ASP.net MVC 项目中上传文件。

但是，我在上传大文件时遇到了一些问题。

我的上传控制器也包含在一个名为“文档”的区域中。

我在我的根 web.config 文件中包含了以下代码。

```
<location path="~/Documents/Upload/UploadFile">
<system.web>
  <authorization>
    <deny users="?" />
    <allow users="*" />
  </authorization>
  <!--by default set to 100 MB-->
  <httpRuntime maxRequestLength="104857600" />
</system.web>
<system.webServer>
  <security>
    <requestFiltering>
      <requestLimits maxAllowedContentLength="104857600" />
    </requestFiltering>
  </security>
</system.webServer> 
```

但是，这似乎对 maxrequestlength 没有任何影响，因此我无法上传大文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:09:18.103

你能检查一下你的 executionTimeout 属性，它可能会更少并且 timeout 。由于您需要更多时间来上传 httpruntime 部分的文件。默认为 110 秒，请查看：[http ://forums.asp.net/t/1040377.aspx](http://forums.asp.net/t/1040377.aspx)

# opengl - OpenGL：使用任意行步长/填充将纹理读入内存中的图像

> ID：15615191
> 
> 赞同：1
> 
> 时间：2013-03-25T12:38:55.973
> 
> 标签：opengl

我想将纹理读入内存，其中目标图像可以在每行的末尾有任意填充。为了澄清，所有行的填充都是相同的。

我知道纹理是用 glGetTexImage 读取的。我也研究了 glPixelStorei，但这只能添加填充，它尊重边界对齐，选项非常有限。

有没有办法在 OpenGL 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:38:22.247

我将自己回答这些问题，因为我发现我一直在阅读 OpenGL ES 2.0 的文档，该文档在 glPixelStore 方面严重缺乏功能。但无论如何，您可以将此函数与 GL_PACK_ROW_LENGTH 一起使用来指定两个连续行之间的位移。

# android - Android 云 - 备份管理器与驱动器

> ID：15615196
> 
> 赞同：3
> 
> 时间：2013-03-25T12:39:10.140
> 
> 标签：android, google-drive-api, backup, sharedpreferences

我正在开发一个应用程序，我想实现一个功能，可以在相同的用户设备之间共享，比如收藏夹、书签等。所以，我想实现像 iCloud 这样的东西。

我遇到了 2 个可能的想法：备份管理器和 Google Drive。我认为备份管理器是最简单的解决方案，可以满足我的需求，但也许我错了：

> **注意**：备份服务不是为与其他客户端同步应用程序数据或保存您希望在正常应用程序生命周期中访问的数据而设计的。您无法按需读取或写入备份数据，也无法通过 Backup Manager 提供的 API 以外的任何方式访问它。

> **注意**：Android Backup Service 提供的备份传输不保证在所有支持备份的 Android 设备上都可用。有些设备可能支持使用不同的传输方式进行备份，有些设备可能根本不支持备份，并且您的应用程序无法知道设备上使用了哪种传输方式。

由于我将此信息存储在 SharedPreferences 中，因此我按照 Google 的建议 ( [http://developer.android.com/guide/topics/data/backup.html#BackupAgentHelper](http://developer.android.com/guide/topics/data/backup.html#BackupAgentHelper) )扩展**BackupAgentHelper来开始实施。**

> ...每次用户更改某些数据时，您的应用程序应调用 dataChanged()，它将备份请求添加到备份管理器队列。

因此，例如，每次我更改数据、保存或删除书签时，我都会调用：

```
BackupManager.dataChanged(C.PROJECT_PATH); 
```

当我的应用程序启动时，我调用：

```
contentBackupManager.requestRestore(new RestoreObserver() {}) 
```

一切都已设置好，AndroidManifest.xml 也是如此。

不幸的是***requestRestore***正在返回！= 0（错误）并且我的 BackupAngent（扩展 BackupAgentHelper）***onBackup***和***onRestore***没有被调用（***onCreate***是）。但是，再一次：

> 备份请求不会立即调用您的 onBackup() 方法。相反，备份管理器会等待适当的时间，然后对自上次执行备份后请求备份的所有应用程序执行备份。

这是否意味着我只能在 Google Drive 中找到答案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T13:18:52.333

你是正确的，你不应该使用`BackupManager`这个。您将需要使用第三方服务来保存您的确切数据类型。所以你可以：

*   使用提供 API 的服务，如 Google Drive 或 Dropbox，您可以在其中上传（和下载）任何类型的文件，并以您选择的格式（XML/JSON/二进制）存储您的数据。这里的好处是：
    *   您不需要用于数据存储的服务器端应用程序，因此可以减少开发工作量
    *   用户拥有自己的数据，这对某些用户可能很重要
*   编写一些自定义服务器端代码，为您的应用提供特定的 API。您可以为此使用[Google App Engine](https://developers.google.com/appengine/)。显然，如果你有很多用户，缺点是增加了开发工作量和来自 appengine 的潜在费用。然而，如果你走这条路，你也有很多优势：
    *   您不会在用户的 Drive 或 Dropbox 帐户上浪费空间，
    *   用户不喜欢在 3rd 方应用程序中输入他们的 Drive / Dropbox 凭据，
    *   您可以使用[GCM](http://developer.android.com/google/gcm/index.html)等漂亮的功能，
    *   您将数据存储在一个实际的数据库中，因此您可以根据需要构建它，并且您也拥有它。

你选 ：）

# iphone - MKAnnotation 显示问题

> ID：15615201
> 
> 赞同：1
> 
> 时间：2013-03-25T12:39:15.630
> 
> 标签：iphone, ios, objective-c, mkmapview, mapkit

我创建了带有图钉的 MKMapView。

当我按下图钉时，我会看到标题和副标题，但我想在不点击的情况下看到它。所以，我希望标题和副标题在显示地图后立即出现。

这是我的代码：

```
 self.mapView = [[[MKMapView alloc]init] autorelease];
    mapView.frame = self.view.bounds;
    mapView.delegate = self;
    [self.view addSubview:mapView];

    location = CLLocationCoordinate2DMake(lattitude, longitude);

    MKCoordinateRegion region = self.mapView.region;
    region.center = location;
    region.span.longitudeDelta = kSpan;
    region.span.latitudeDelta = kSpan;
    [self.mapView setRegion:region animated:YES];

    CustomMapAnnotation *newAnnotation = [[CustomMapAnnotation alloc] init];
    newAnnotation.title = @"Title";
    newAnnotation.subtitle = @"Subtitle";
    newAnnotation.accessibilityTraits = UIAccessibilityTraitButton;

    newAnnotation.coordinate = location;
    annotation = newAnnotation;
    [mapView addAnnotation:annotation];
    [newAnnotation release];

- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotationDel
{

    MKPinAnnotationView *pinView = nil;

    static NSString *defaultPinID = @"mapPin";

    pinView = (MKPinAnnotationView *)[self.mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];

    if (pinView == nil)
        pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotationDel reuseIdentifier:defaultPinID] autorelease];

    pinView.pinColor = MKPinAnnotationColorRed;
    pinView.canShowCallout = YES;
    pinView.animatesDrop = YES;
    [pinView setSelected:YES];

    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton addTarget:self action:@selector(detailButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    pinView.rightCalloutAccessoryView = rightButton;

    return pinView;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:43:44.637

使用`MKMapView's` `selectAnnotation:animated`方法

```
[mapView selectAnnotation:YorAnnotation animated:YES]; 
```

欲了解更多信息，请阅读[如何在不触摸引脚的情况下触发 MKAnnotationView 的标注视图？](https://stackoverflow.com/questions/978897/how-to-trigger-mkannotationviews-callout-view-without-touching-the-pin)以及[如何在地图注释（pin）](https://stackoverflow.com/questions/3663563/how-to-automatically-display-title-subtitle-on-map-annotation-pin)问题上自动显示标题/副标题。

# apache - Apache ProxyPass 无法按预期工作

> ID：15615208
> 
> 赞同：0
> 
> 时间：2013-03-25T12:39:25.880
> 
> 标签：apache, mod-rewrite

我在 httpd.conf 中有以下配置

```
ProxyPass /chat http://localhost:8888 
```

如果我点击 url `localhost/chat/test`，而不是重定向到`http://localhost:8888/test`，它会重定向到`http://localhost:8888`.

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:48:01.280

尝试这个：

```
ProxyPass /chat http://localhost:8888/test 
```

在这种情况下，您需要提供项目目录文件夹。

# c# - 如何为分离的 ANTLR 词法分析器和解析器添加虚构的标记？

> ID：15615209
> 
> 赞同：2
> 
> 时间：2013-03-25T12:39:39.617
> 
> 标签：c#, antlr, antlr3, lexer

我正在使用 ANTLR 并基于分离的 Java6 词法分析器和语法构建 AST。词法分析器定义包含在 Java6Lex.g 中，并生成语法使用的标记。解析器消耗这些没有问题，但是当我生成 AST 时，我想引入虚构的标记 - 但是，ANTLR 似乎不喜欢这个模型。

解析器语法包括来自词法分析器的标记词汇表——它应该为语法可用的标记提供基线。

```
parser grammar Java6Parse;

options {
    tokenVocab=Java6Lex;
    backtrack=true;
    memoize=true;
    output=AST;
    language = CSharp3;
} 
```

现在假设，我想获取 fieldDeclaration 并使用重写规则将其转换为根节点。我假设（显然是错误的）我可以将虚构的标记直接引入解析器语法，如下所示：

```
fieldDeclaration
    :   modifiers type variableDeclarator (COMMA variableDeclarator)* SEMI
            -> ^(FIELD modifiers type variableDeclarator+)
    ; 
```

但是，这只会导致发生以下错误：

```
reference to undefined token in rewrite rule: FIELD 
```

没问题，我明白了，我没有定义它。所以，我尝试在解析器语法的标记部分中定义它。再次错误地认为，tokenVocab 应该提供基线。

```
tokens { FIELD; } 
```

不，似乎即使定义令牌块也会导致 EarlyExitException 和指示 Java6Parse.g 没有规则的错误。我想，解析器语法根本不喜欢在解析器中定义标记。所以，我在词法分析器中定义了它。再一次，那失败了。然后我在词法分析器和解析器中定义了每个标记 - 再次失败。

所以，这就是我需要知道的。当词法分析器和解析器分开时，有没有办法定义一个虚构的标记，如果是的话，如何。如果不是，是否是将语法和词法分析器组合回同一个文件的唯一选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:02:49.427

您很可能将`tokens{}`块包含在错误的位置。ANTLR 3 要求语法头元素以特定顺序出现。有关正确顺序，请参阅此 Stack Overflow 答案：

[**在 ANTLR 中使用 @header**](https://stackoverflow.com/questions/4066209/using-header-in-antlr)

# javascript - 带有添加关闭选项的引导弹出窗口也提交表单

> ID：15615213
> 
> 赞同：3
> 
> 时间：2013-03-25T12:39:46.463
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

正如您在这个[jQuery](http://jsfiddle.net/LRCNm/7/)中看到的，我有一个 Boostrap 弹出框，它可以通过外部点击以及点击“x”来关闭。

但是，当此弹出框放置在表单中时，它也会提交表单。

有没有办法在点击后不提交表单的情况下获得这个可关闭的弹出窗口的功能？

HTML：

```
<form action="quote-calculator.php" method="post">
    <div class="bs-docs-example" style="padding-bottom: 24px;">
      <a href="#" class="more-info btn btn-large btn-danger" data-toggle="popover" data-content="And here's some amazing content. It's very engaging. right?">Click to toggle popover</a>
    </div>
</form> 
```

jQuery：

```
 var isVisible = false;
        var clickedAway = false;

        $('.btn-danger').popover({
                html: true,
                trigger: 'manual'
            }).click(function(e) {
                $(this).popover('show');
            $('.popover-content').append('<button class="close" style="position: absolute; top: 0; right: 6px;">&times;</button>');
                clickedAway = false
                isVisible = true
                e.preventDefault()
            });

        $(document).click(function(e) {
          if(isVisible & clickedAway)
          {
            $('.btn-danger').popover('hide')
            isVisible = clickedAway = false
          }
          else
          {
            clickedAway = true
          }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:59:34.273

将您的按钮元素更改为锚元素。

[http://jsfiddle.net/LRCNm/8/](http://jsfiddle.net/LRCNm/8/)

```
$('.popover-content').append('<a class="close" style="position: absolute; top: 0; right: 6px;">&times;</a>');
                    clickedAway = false
                    isVisible = true
                    e.preventDefault()
                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:47:50.017

您需要在`preventDefault()`此处添加：

```
 $(document).click(function(e) {
          if(isVisible & clickedAway)
          {
            $('.btn-danger').popover('hide')
            isVisible = clickedAway = false
            e.preventDefault()
          }
          else
          {
            clickedAway = true
          }
        }); 
```

# java - 流 readLine 以中断关闭

> ID：15615214
> 
> 赞同：2
> 
> 时间：2013-03-25T12:39:47.380
> 
> 标签：java

我有一个线程，它`getInputStream`从`Process`. 它等待 readLine。

```
BufferedReader read = new BufferedReader(new InputStreamReader(process.getInputStream));
while(!Thread.currentThread().isInterrupted()){
String s = read.readLine();
process(s);
} 
```

但事实证明，`readLine`它不响应中断状态。所以在关闭期间，它不会让 JVM 关闭。在浏览源代码时，看起来他们只是轮询直到有一个`\n`行终止字符。

任何替代方案或黑客？

PS：它是[如何中断 BufferedReader 的 readLine](https://stackoverflow.com/questions/3595926/how-to-interrupt-bufferedreaders-readline?rq=1)的副本。因此我要关闭它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:42:23.920

不应该是：

```
while(!Thread.currentThread().isInterrupted()){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:10:42.727

停止进程的可靠方法是 Process.destroy。在字段中保存对进程的引用并调用 Process.destroy 而不是中断线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:12:24.717

从[`Thread.interrupt`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)

> 如果此线程在可中断通道上的 I/O 操作中被阻塞，则通道将关闭，线程的中断状态将被设置，并且线程将收到 ClosedByInterruptException。

但[`BufferedReader`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)不执行[`InterruptibleChannel`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/InterruptibleChannel.html)。因此，这就是您的线程卡在对`readLine()`.

# node.js - 如何在 express-coffee 中使用 express 中间件

> ID：15615220
> 
> 赞同：0
> 
> 时间：2013-03-25T12:40:04.367
> 
> 标签：node.js, express, coffeescript

因此，我尝试将[express-coffee](https://github.com/twilson63/express-coffee)与[express-form](https://github.com/freewil/express-form)中间件一起使用，并且我正在遵循建议的控制器结构。

在 channels.coffee （控制器）中，我有

```
module.exports =
    ..
    create: (req, res)->
      form(
        filter('title')
          .trim()
          .required()
      )
      console.log 'after filter'
      if form.isValid
        console.log 'isValid'
      else
        console.log req.form.title
      console.log req.form.title
      res.send 'finished' 
```

最后，这不会像它应该的那样拦截动作。在这种情况下，您如何将 express 中间件连接到操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:16:58.047

您从处理程序中调用中间件，而它应该用作路由的参数。

在 JS 中，它看起来像这样：

```
var channels = require('./channels');
app.get('/', form(...), channels.create); 
```

如果你想把中间件和你的处理程序放在一起，你可以试试这个（仍然是 JS，我的 CS 充其量是生锈的；）：

```
// channels.js
module.exports = {
  create : [ form(...), function(req, res) {
  }]
};
// app.js
var channels = require('./channels');
app.get('/', channels.create); 
```

# linux - 在 Linux 用户空间中访问硬件寄存器

> ID：15615229
> 
> 赞同：2
> 
> 时间：2013-03-25T12:40:31.380
> 
> 标签：linux, memory, memory-management

我想在 Linux 用户空间中写入 OMAP3530 上的硬件寄存器。请找到下面的代码。Mmap 返回错误：

内存映射失败。错误-1

mmap：权限被拒绝

```
#include <stdio.h>
#include <sys/mman.h>
#include <fcntl.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>

#define BASE_ADDRESS 0x48050000

int main()
{
        int mem;
        unsigned int *value;
        void *ptr;

        /* Open /dev/mem */
        if ((mem = open ("/dev/mem", O_RDONLY | O_SYNC)) == -1)
                fprintf(stderr, "Cannot open /dev/mem\n"), exit(1);

        ptr = mmap (0, 8192, PROT_READ|PROT_WRITE, MAP_SHARED, mem, BASE_ADDRESS);

        if(ptr == (void *) -1) {
                printf("Memory map failed. error %i\n", ptr);
                perror("mmap");
                }

        value = (unsigned int*)(ptr + 0x4BC+((1-1)*0x90)+(0*0x04));
        *value = 479*799*3-4;
        printf("value = %i", value);

        value = (unsigned int*)(ptr + 0x4C4+((-1)*0x90));
        *value = 1;
        printf("value = %i", value);

        value = (unsigned int*)(ptr + 0x4C8+((-1)*0x90));
        *value = 1;
        printf("value = %i", value);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:44:46.497

[mmap()](http://linux.die.net/man/3/mmap)的文档说（强调我的）：

> 如果出现以下情况，该`mmap()`功能将失败：
> 
> **EACCES**
> 
> *fildes*参数未打开以供读取，无论指定的保护如何，或者fildes***未*打开以供写入并且`PROT_WRITE` 为`MAP_SHARED`类型映射**指定。

由于您指定`PROT_WRITE`，该文件应打开以供写入。您的代码仅将其打开以供阅读。

# iphone - 在 iPhone 中实现 Twitter 卡片

> ID：15615230
> 
> 赞同：4
> 
> 时间：2013-03-25T12:40:34.043
> 
> 标签：iphone, twitter, ios6

我已经在我的 iPhone 应用程序中集成了 twitter。因为我也在共享音频，为了增强这种共享，我想在我的 iPhone 应用程序中使用 Twitter 卡。

除了以下 URL，我无法获得更多信息： [https ://dev.twitter.com/docs/cards](https://dev.twitter.com/docs/cards)

任何类型的代码行/教程都会有很大帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T11:18:35.503

您需要一个 Web 应用程序来创建 Twitter 卡片。

Twitter 卡片通过扫描推文中的链接来工作。如果链接指向具有正确标签的网站，Twitter 将创建卡片。

您必须采取的过程是：

*   将您的音频和其他元数据上传到服务器
*   服务器通过向您发送回该页面的 Web 链接来响应
*   服务器为玩家卡等设置相关标签。
*   然后，您用户的手机会将推文发送到他们的 Twitter 帐户。

对于不做太多 Web 开发的 iOS 开发人员来说，这将变得更加复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-06T13:22:59.830

在 iPhone 中 实现 Twitter 卡片，http: [//twittercardsios.blogspot.in/2013/11/twitter-summary-cards.html在 iPhone 中](http://twittercardsios.blogspot.in/2013/11/twitter-summary-cards.html)[实现 Twitter 卡片](http://twittercardsios.blogspot.in/2013/11/twitter-summary-cards.html)

# c# - 如何在boundfield中使用jquery？

> ID：15615231
> 
> 赞同：0
> 
> 时间：2013-03-25T12:40:40.300
> 
> 标签：c#, jquery, asp.net, boundfield

我正在使用下面的 jQuery 向文本添加“阅读更多”选项，因此它只显示前 200 个字符，并允许用户单击阅读更多以查看文本的其余部分

```
<head><title>Add Read More Link (from DevCurry.com)</title>    
    <script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery/jquery1.4.4.min.js">    </script>    
    <script type="text/javascript"    src="http://plugins.learningjquery.com/expander/jquery.expander.js">    </script>    
    <script type="text/javascript">
           $(function () {
               $('div.readmore').expander({
                 slicePoint: 200, expandText: 'Click Here to Read More', userCollapseText: 'Hide Text'
              });
           }
          );    
    </script>
</head> 
```

要使用该功能，我必须使用以下内容

```
<div class="readmore">     The Div Text Comes Here      </div> 
```

我的问题是我想在gridview boundfield 中使用jQuery。我有一列包含很长的描述，需要在其中应用 jQuery。

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" AllowSorting="True"
            AutoGenerateColumns="False" EmptyDataText="No Records" EnableSortingAndPagingCallbacks="True"
            Width="1017px" ShowFooter="False" DataSourceID="SqlDataSource1" 
            EnableModelValidation="True" PageSize="10" GridLines="None" CssClass="mGrid"
            PagerStyle-CssClass="pgr" AlternatingRowStyle-CssClass="alt"  >

        <Columns>
            <asp:BoundField DataField="CreationDate" HeaderText="Date" SortExpression="CreationDate"  dataformatstring="{0:MM/dd/yyyy}" />
            <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
            <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description" />
            <asp:BoundField DataField="Type" HeaderText="Type" SortExpression="Type" />
            <asp:BoundField DataField="Department" HeaderText="Department" SortExpression="Department" />

        </Columns>

    </asp:GridView> 
```

不幸的是，我无法在边界域内插入 a。你有没有其他方法可以将 Jquery 应用于 boundfield？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:44:39.477

你可以更换

```
<asp:BoundField DataField="Description" HeaderText="Description"
   SortExpression="Description" /> 
```

经过

```
<asp:TemplateField HeaderText="Description" SortExpression="Description">
    <ItemTemplate>
        <div class="readmore"><%# Eval("Description") %></div>
    </ItemTemplate>                                                
</asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:45:43.827

您可以设置一个 css 类并在 jQuery 中使用该类。
您需要使用 TemplateField 来显示数据。

# ios - 如何创建一个仅接收一次信号的 ReactiveCocoa 订阅者，然后自行取消订阅/释放？

> ID：15615232
> 
> 赞同：17
> 
> 时间：2013-03-25T12:40:45.053
> 
> 标签：ios, objective-c, reactive-programming, reactive-cocoa

我目前正在为这样的属性信号注册订阅者：

```
[RACAble(self.test) subscribeNext:^(id x) {
        NSLog(@"signal fired!");
 }]; 
```

默认功能是每次更改 self.test 时都会触发，但我只想触发一次，然后取消订阅。创建此订阅者时，是否可以将“一次”参数或修饰符传递给 RAC？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-25T17:37:07.630

```
[[RACAble(self.test) take:1] subscribeNext:^(id x) {
    NSLog(@"signal fired!");
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-21T13:19:40.573

[kamil3 答案](https://stackoverflow.com/a/38620654/2265618)的小修复：

```
__block RACDisposable *subscription = [RACObserve(self, test) subscribeNext:^(id x) {
    [subscription dispose];
    NSLog(@"signal fired!");
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T18:31:27.847

这可能会很有帮助，尤其是在您创建嵌套订阅时：

```
RACDisposable *subscription = [RACObserve(self, test) subscribeNext:^(id x) {
         NSLog(@"signal fired!");
}];
[subscription dispose]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-01T12:12:06.030

你也可以这样做（如果你不喜欢整个简洁的事情）：

```
[RACSignal createSignal:^RACDisposable *(id<RACSubscriber> subscriber){
   RACDisposable *inner_disposer = [RACAble(self.test) subscribeNext:^(id x){
      [subscriber sendNext:x];
      [subscriber sendComplete];
   }];
   return [RACDisposable disposableWithBlock:^{
      [inner_disposer dispose];
   }];
}]; 
```

# php - 无法检索访问令牌linkedin api

> ID：15615239
> 
> 赞同：9
> 
> 时间：2013-03-25T12:41:12.300
> 
> 标签：php, linkedin

我正在申请`connect with linkedin`。我正在按照[分步指南](https://code.google.com/p/simple-linkedinphp/wiki/QuickStart)进行操作。为了对用户进行身份验证，我从[这个](https://developer.linkedin.com/documents/authentication).

当用户单击`connect with linkedin`按钮时，用户将被带到linkedin 登录页面。在用户授予对帐户的访问权限后，用户将被重定向到：

```
https://www.linkedin.com/uas/oauth2/authorization?response_type=code&client_id=1ba8ogpm9e05&scope=r_basicprofile%20r_emailaddress&state=STATE&redirect_uri=http://127.0.0.1:8088/sandbox/linkedin/test.php 
```

通过这个，我得到了授权码。并将其传递到以下网址

```
https://www.linkedin.com/uas/oauth2/accessToken?grant_type=authorization_code&code=AUTHORIZATION_CODE&redirect_uri=http://127.0.0.1:8088/sandbox/linkedin/final.php&client_id=1ba8ogpm9e05&client_secret=n7GN09I3F2L3IJD1 
```

在这里，错误来了，即

```
"error":"invalid_request","error_description":"missing required parameters, includes an invalid parameter value, parameter more then once. : Unable to retrieve access token : appId or redirect uri does not match authorization code or authorization code expired" 
```

我哪里错了？我已经仔细检查了我的 api 密钥和密钥。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T13:15:52.750

```
https://www.linkedin.com/uas/oauth2/accessToken?grant_type=authorization_code&code=AUTHORIZATION_CODE&redirect_uri=http://127.0.0.1:8088/sandbox/linkedin/final.php&client_id=1ba8ogpm9e05&client_secret=n7GN09I3F2L3IJD1
https://www.linkedin.com/uas/oauth2/authorization?response_type=code&client_id=1ba8ogpm9e05&scope=r_basicprofile%20r_emailaddress&state=STATE&redirect_uri=http://127.0.0.1:8088/sandbox/linkedin/test.php 
```

`redirect_uri`根据[LinkedIn 身份验证指南](https://developer.linkedin.com/documents/authentication)，这两者都应该包含相同的内容：

> **参数：** `redirect_uri`
> **说明：**必需。与`redirect_uri`您在上一步中通过的相同。
> **可能的错误：**
> 
> *   `redirect_uri`与授权码生成期间使用的不同
> *   传递了无效值
> *   传递了一个空值或空白值
> *   缺少参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-10T13:57:54.460

我得到了和你一样的错误。我还满足了以下条件：

*   我的请求是一个`POST`请求。
*   我`redirect_uri`的`/authorization`和`/accessToken`电话是一样的。
*   调用在`/accessToken`收到授权码后立即执行，因此不会过期。

最终对我有用的是撤销在[https://www.linkedin.com/secure/developer](https://www.linkedin.com/secure/developer)上的应用程序详细信息页面上生成的访问令牌。

这是 oAuth 1.a 的访问令牌，与当前运行 linkedIn api 的 oAuth 2.0 不兼容。撤销此访问令牌后，我能够通过and调用
获得一个新的访问令牌。`/authorization``/accessToken`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T18:25:43.223

您可能还需要确保将访问令牌请求作为“POST”发送

鱼

# php - Yii CGridView 按钮 - 调用参数化的 javascript 函数

> ID：15615242
> 
> 赞同：1
> 
> 时间：2013-03-25T12:41:33.950
> 
> 标签：php, javascript, yii, cgridview, cbuttoncolumn

我需要用一个按钮创建一个 CGridView 并使按钮调用 javascript 函数，如下所示：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id' => 'projectCities',
    'summaryText' => '',
    'dataProvider' => $model->getCitiesProvider(),
    'columns' => array(
        'name',
        'directional',
        'customCount',
        array(
            'class'=>'CButtonColumn',
            'template'=>'{delete}',
            'buttons' => array(
                'delete' => array(
                    'url' => '',
                    'click' => '',
                    'options' => array(
                        'onclick' => 'removeCity(this, $data->idCity, 
                                      $model->idProject); return false;',
                    ),                          
                )
            ),
        )
    ),
    )); 
```

当然它不起作用，因为生成的html是：

```
<a class="delete" title="Delete" onclick="removeCity(this, $data->idCity, $model->idProject); return false;"> 
```

有没有办法做到这一点，以便在 javascript 函数调用中有正确的 id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:50:16.040

```
//Controller:
public function gridButtons($model)
{   
    return array(
        'class'=>'CButtonColumn',
        'template'=>'{delete}',
        'buttons' => array(
            'delete' => array(
                'url' => '',
                'click' => '',
                'options' => array(
                    'onclick' => sprintf(
                        'js:removeCity(this, %d, %d);return false;',
                        $model->idCity, $model->idProject
                    ),
                ),                          
            )
        ),
    )
}
//view
$this->widget('zii.widgets.grid.CGridView', array(
    'id' => 'projectCities',
    'summaryText' => '',
    'dataProvider' => $model->getCitiesProvider(),
    'columns' => array(
        'name',
        'directional',
        'customCount',
        array(            
            'value' => array($this, 'gridButtons'),            
        ),        
    ),
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:38:26.537

您可以使用双引号来激活字符串中的变量替换：

```
'onclick' => "js:removeCity(this, {$data->idCity}, {$model->idProject}); return false;", 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:18:25.473

我遇到了这个问题，也解决了这个问题。可能是你的问题是在 'click' 参数后关闭 'option' 数组，其中 js 函数保持不变。但是 'option' 数组在下面的 'click' 参数之前关闭。请看这个，也许这个解决问题对你有帮助。

```
$this->widget('zii.widgets.grid.CGridView', array(
'id' => 'projectCities',
'summaryText' => '',
'dataProvider' => $model->getCitiesProvider(),
'columns' => array(
    'name',
    'directional',
    'customCount',
    array(
        'class'=>'CButtonColumn',
        'template'=>'{delete}',
        'buttons' => array(
            'delete' => array(                      
       'url'=>'$data->id',
       'visible'=>'true',
       'options'=>array('class'=>'viewbtns'),
       'click'=>'js: function(){ viewProfile((this).attr("href"),"openDialog" ); return false; }',

            )
        ),
    )
),
)); 
```

# php - php+mysql 致命错误：调用未定义函数mysql_connect()

> ID：15615244
> 
> 赞同：5
> 
> 时间：2013-03-25T12:41:34.653
> 
> 标签：php, mysql

我已经在互联网上搜索了此“调用未定义函数 mysql_connect()”错误的故障排除，但建议的程序均无效...

当我尝试从 php 访问 mysql 时，出现此错误。我有 PHP 版本 5.2.17 和 MySQL 5.1.68（mysql 在 php 之外运行，我尝试创建表和数据库等）。

我取消注释 php.ini 中的扩展：

```
extension=php_mysql.dll
extension=php_mysqli.dll 
```

并指定这些扩展的路径。

我还将 PHP 和 MySQL 添加到我的 PATH 变量中。我正在使用 Apache 2.2。每次更改后我都重新启动了服务器。

这是我在 php 中用于访问数据库的代码（但我认为问题不在于语法）：

```
<?php     
      $dbhost = 'localhost';
      $dbuser = 'root';
      $dbpass = 'pasw';
      $dbname = 'db';

      $conn = mysql_connect($dbhost, $dbuser, $dbpass) or die ('Error connecting to mysql');
      mysql_select_db($dbname);
?> 
```

我不知道如何解决这个问题，你能建议一些其他的故障排除技巧吗？我对他的问题很陌生...我想使用 MySQL，因为这就是我将在我的网站启动并运行时在实际服务器上使用的内容。提前致谢！

编辑：这是来自 apache 日志：

```
[Mon Mar 25 13:50:42 2013] [error] [client 127.0.0.1] PHP Fatal error:  Call to undefined function mysql_connect() in C:\\Web\\thenemis\\dbconnect.php on line 7, referer: http://localhost/thenemis/admin.php
[Mon Mar 25 13:50:42 2013] [error] [client 127.0.0.1] File does not exist: C:/Web/favicon.ico 
```

EDIT2：这是来自 php info （我认为问题可能出在 php.ini 文件中的一些未指定的参数上）。除了扩展名和路径之外，我还没有读到任何我应该指定其他功能的地方，但也许我错了......你有什么建议？

```
mysql

MySQL Support   enabled
Active Persistent Links 0
Active Links    0
Client API version  5.0.51a

Directive   Local Value Master Value
mysql.allow_persistent  On  On
mysql.connect_timeout   60  60
mysql.default_host  no value    no value
mysql.default_password  no value    no value
mysql.default_port  no value    no value
mysql.default_socket    no value    no value
mysql.default_user  no value    no value
mysql.max_links Unlimited   Unlimited
mysql.max_persistent    Unlimited   Unlimited
mysql.trace_mode    Off Off 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T13:44:01.947

正如已经说过的，使用 phpinfo() 来确定 mysql 是否正常运行。一般来说，您不应该再使用 mysql，而是使用新的改进版 mysql，称为 mysqli [http://php.net/manual/de/book.mysqli.php](http://php.net/manual/de/book.mysqli.php)

您还可以使用 method_exists 方法以编程方式检查函数是否存在

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T13:54:21.303

尝试使用这个：

```
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = 'pasw';
$dbname = 'db';

<?php
// Create connection
$con=mysqli_connect($dbhost,$dbuser,$dbpass,$dbname);

// Check connection
if (mysqli_connect_errno($con))
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }
?> 
```

PHP 将不再支持 MySQL，因此开始使用 MySQLi 或 PDO。

:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-03T09:43:13.533

验证您的 PHP 安装是否已使用 mysql 支持进行编译。`<?php phpinfo(); exit(); ?>`创建一个包含并在浏览器中运行的测试 php 文件。在页面中搜索关键字“MySQL”。如果你没有看到它，你需要重新编译 PHP 并支持 MySQL，或者重新安装一个内置的 PHP 包。

打开终端并运行以下命令。

```
sudo apt-get install mysql-server 
```

如果您正在运行 PHP，您还需要为 mysql 安装 php 模块

```
sudo apt-get install php5-mysql 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-23T00:44:39.300

我在计算机的系统变量中设置了 PHP 的路径，将路径值编辑为`C:/program files/php;` 并`extension=php_mysqli.dll`在`php.ini`.

然后我使用了这个功能

```
mysqli_connect($host,$username,$password)or die(mysql_error()); 
```

之后系统重新启动。它对我有用；我希望这个对你有用。

# java - 泛型类初始化

> ID：15615246
> 
> 赞同：3
> 
> 时间：2013-03-25T12:41:44.877
> 
> 标签：java, generics, initialization

这是我的课：

```
public class FoodSet<T extends ConcreteFood>{
    public List<T> food = new ArrayList<T>();
    public FoodSet()
    {
        /*
        *  FoodType is an enum containing food types e.g: rice, pork, beef ...
        */
        for(FoodType foodType : FoodType.values())
        {  
            /*
            * 1(*)
            * /
            food.add( (T)new ConcreteFood(foodType,0) ) 
        }       
    }
} 
```

在 1(*) 中是问题，如何使用 'T' 类型初始化这个列表？现在我用 ConcreteFood 初始化它，作为参数 foodType 和数量，但我的目标是用扩展 ConcreteFood 的 T 初始化这个列表。ConcreteFood 的每个子类都可以访问 foodType 和 food count。我只想用适当的 ConcreteFood 子类初始化这个列表，并用 foodType 和 count = 0 初始化每个 ConcreteFood 对象。我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:19:56.483

您可以将您的`FoodType` `enum`用作工厂：

```
public static class ConcreteFood {
}

public static class Bacon extends ConcreteFood {
};

public static class SavoyCabbage extends ConcreteFood {
};

enum FoodType {
  Pork {
    @Override
    public ConcreteFood makeNew() {
      return new Bacon();
    }
  },
  Cabbage {
    @Override
    public ConcreteFood makeNew() {
      return new SavoyCabbage();
    }
  };

  public abstract ConcreteFood makeNew();
}

public static class FoodSet {
  public List<ConcreteFood> food = new ArrayList<ConcreteFood>();

  public FoodSet() {
    /*
     *  FoodType is an enum containing food types e.g: rice, pork, beef ...
     */
    for (FoodType foodType : FoodType.values()) {
      /*
       * 1(*)
       */
      //food.add((T) new ConcreteFood(foodType, 0)) 
      food.add(foodType.makeNew());
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:08:19.990

回应 OP 的回答：你真的不应该这样。我建议您也将正确的混凝土工厂传递给您`FoodSet`。

抽象工厂：

```
public interface FoodFactory<T extends ConcreteFood> {
    public T create(FoodType type);
} 
```

混凝土工厂，每个子类一个`ConcreteFood`

```
public class BagFoodFactory implements FoodFactory<BagFood> {
    private static final BagFoodFactory INSTANCE = new BagFoodFactory ();

    private BagFoodFactory () {}

    public static FoodFactory<BagFood> getInstance() { return INSTANCE; }

    public BagFood create(FoodType type) {
        return new BagFood(type, 0);
    }
} 
```

使用您的工厂`FoodSet`

```
public class FoodSet<T extends ConcreteFood> {
    public List<T> food = new ArrayList<T>();

    public FoodSet(FoodFactory<T> factory) {
        for (FoodType foodType : FoodType.values()) {
            food.add(factory.create(foodType));
        }
    }
} 
```

将正确的工厂传递给构造函数（无论如何你都知道这里需要哪一个）。

```
class Sack
{
    public FoodSet<BagFood> bagFoodSet 
            = new FoodSet<BagFood>(BagFoodFactory.getInstance());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:44:40.810

这不是你想要的。您需要一个工厂类来为您创建 ConcreteFood 的实例。

```
public class FoodFactory {
    private static final FoodFactory INSTANCE = new FoodFactory();

    private FoodFactory() {}

    public static FoodFactory getInstance() { return INSTANCE; }

    public Food create(FoodType type) {
       // Put the type checks here 
    }
} 
```

我不太关心你的命名。“混凝土食品”？听起来不开胃。为什么不是食品分类？

# android - Android SDK 按名称查找联系人电话号码

> ID：15615254
> 
> 赞同：1
> 
> 时间：2013-03-25T12:42:07.043
> 
> 标签：android, contact

我正在尝试按他们的名字查找联系人电话号码。我试图使用本教程，但效果不佳。我很难从数字部分实际找到名称。我没有错误。有没有更简单的方法来做到这一点？这是我一直在关注的教程。[教程！](http://www.higherpass.com/Android/Tutorials/Working-With-Android-Contacts/)我也调查了这个[链接](https://stackoverflow.com/questions/1721279/how-to-read-contacts-on-android-2-0)，但是我很难找到一个特定的联系人，而不仅仅是他们。

# javascript - Javascript代码不起作用

> ID：15615255
> 
> 赞同：0
> 
> 时间：2013-03-25T12:42:19.590
> 
> 标签：javascript, jquery

我有一个面板激活/停用复选框（chk1）'开/关'。该面板包含一个复选框 (chk2) 和一个单选按钮 (rbtn)。选中单选按钮 (rbtn) 时，必须禁用该复选框。当通过取消选中“开/关”复选框禁用面板时，单选按钮和复选框 (chk2) 将被禁用。问题是，当我打开启用面板的页面时，执行来自 javascript 的代码，但是当我打开禁用面板的页面时，启用面板后，当我检查单选按钮时，javascript 不起作用，因此 chk2变成了残疾人。

```
 $(document).ready(function (){
     $('input[id^=rbtn]').click(function () {
         SetControlEnableState($('#chk2'), $('#rbtn'));
     });
     function SetControlEnableState(controlToSet, control) {
         if (control.is(':checked')) {
            $(controlToSet).attr('disabled', 'disabled');
            alert('if');
         }
         else {
            $(controlToSet).removeAttr('disabled');
            alert('else');
        }
     }
}); 
```

当面板更新时，javascript 代码不再可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:45:29.337

不要`click`在复选框上使用事件，而是在`change`一个：

```
 $('input[id^=rbtn]').change(function () { 
```

这样你就会得到新的状态。该`click`事件在复选框更改*之前生成。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:45:56.943

而不是这个：

```
$(controlToSet).attr('disabled', 'disabled');

$(controlToSet).removeAttr('disabled'); 
```

做这个：

```
$(controlToSet).prop('disabled', true);

$(controlToSet).prop('disabled', false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:52:26.843

尝试这个

```
$(document).ready(function (){
    $('input[id^=rbtn]').click(function () {
        SetControlEnableState($('#chk2'), $(this));
    });
    function SetControlEnableState(controlToSet, control) {
        if (control.is(':checked')) {
            $(controlToSet).attr('disabled', 'disabled');
        } else {
            $(controlToSet).removeAttr('disabled');
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:52:24.723

简化整个事情：

```
 $(document).ready(function () {
     $('input[id^=rbtn]').change(function () {
         SetControlEnableState($('#chk2'), $('#rbtn'));
     });

     function SetControlEnableState(controlToSet, control) {
         controlToSet.prop('disabled', control.is(':checked'));
     }
 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T12:45:22.570

```
$(document).ready(function (){

            $('input[id^=rbtn]').change(function () {
                SetControlEnableState();
            });
    function SetControlEnableState() {
        if ($('#rbtn').is(':checked')) {
            $('#chk2').attr('disabled', 'disabled');
            alert('if');
        }
        else {
            $('#chk2').removeAttr('disabled');
            alert('else');
        }
    } 
```

# c++ - 游戏中的射击按钮在按下空格键时触发多次而不是一次

> ID：15615258
> 
> 赞同：0
> 
> 时间：2013-03-25T12:42:27.567
> 
> 标签：c++, keypress, game-physics

我正在制作一个非常简单的太空侵略者风格的游戏。目前，我有一个 fire 方法，设置为响应空格键，如下所示：

```
case VK_SPACE:
     tank.Fire();
     break; 
```

还有火法，它使屏幕外的子弹出现在坦克后面，然后向上射击。

```
void Tank::Fire() {
    //Moves bullets to behind tank.
    bullets[bulletCount].SetPos(Vector2D (tank_pos.x+20, tank_pos.y+20));

    //Sets their speed vector in motion.
    bullets[bulletCount].SetSpeed(Vector2D (0, -350));
    bulletCount++; //Increment the current bullet to be used.
} 
```

问题是空格键的一次物理命中一次会触发不止一次。如何确保每台印刷机只触发一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:10:29.427

您如何捕获键盘输入？如果这只是一个检查键状态的循环，是否有一个表示天气的布尔值，这是否是一个新键，然后在您发现该键不再关闭时清除它。如果您担心操作系统的自动重复，那么您想研究去抖动，基本思想是您捕获获得按键事件的时间，然后与未来按键事件发生的时间进行比较，以便您可以对它们进行速率限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:06:10.063

目前，您的代码可能正在执行“按下空格时拍摄”之类的操作。你想要的是“如果按下空间但之前没有按下框架则按下”。

因此，基本上，您必须逐帧保存空间状态，并检查前一帧是否按下了空间。

# perl - 比较文件内容

> ID：15615267
> 
> 赞同：0
> 
> 时间：2013-03-25T12:43:00.330
> 
> 标签：perl, bash, shell

我有两个制表符分隔的文件，每个文件有 15 列，n 和 m 行。

文件 1 中的行数大于文件 2 的行数，例如文件 1 有 15 行文件 2 中不存在

我怎样才能找出这些行？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:02:35.490

该`comm`命令将查找任一文件独有的行或两者共有的行。

```
comm -23 <( sort file1 ) <( sort file2 ) 
```

将仅打印 file1 中的行（仅在 file2 中的行和公共行由`-2`and`-3`选项抑制。必须对文件进行排序；它们如何排序并不重要，只要它们都在同一个键上排序并以同样的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:49:32.747

这有帮助吗？

```
awk 'NR==FNR{a[$0];next}!($0 in a)' file2 file1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:09:01.943

[join](http://linux.die.net/man/1/join)命令可能会有所帮助，尤其是**-a**选项：

> -a FILENUM 打印来自文件 FILENUM 的不可配对行，其中 FILENUM 为 1 或 2，对应 FILE1 或 FILE2

# python - Sublime Editor Plugin 记住变量

> ID：15615273
> 
> 赞同：3
> 
> 时间：2013-03-25T12:43:20.460
> 
> 标签：python, plugins, sublimetext2

我正在编写一个 sublime editor 2 插件，并希望它在会话期间记住一个变量。我不希望它将变量保存为文件（它是密码），但希望能够重复运行命令，并且变量可以访问。

我希望我的插件能够像这样工作......

```
import commands, subprocess

class MyCommand(sublime_plugin.TextCommand):
  def run(self, edit, command = "ls"):
    try:
      thevariable
    except NameError:
      # should run the first time only
      thevariable = "A VALUE"
    else:
      # should run subsequent times
      print thevariable 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:54:15.290

实现此目的的一种方法是将其设为全局变量。这将允许您从任何函数访问该变量。[这](https://stackoverflow.com/questions/423379/using-global-variables-in-a-function-other-than-the-one-that-created-them)是一个要考虑的堆栈问题。

另一种选择是将其添加到类的实例中。这通常在`__init__()`类的方法中完成。该方法在类对象被实例化后立即运行。[有关此堆栈讨论](https://stackoverflow.com/questions/625083/python-init-and-self-what-do-they-do)的更多信息`self`并`__init__()`请参阅。这是一个基本的例子。

```
class MyCommand(sublime_plugin.TextCommand):
    def __init__(self, view):
        self.view = view # EDIT
        self.thevariable = 'YOUR VALUE' 
```

这将允许您在创建类对象后访问该变量。像这样的东西`MyCommandObject.thevariable`。这些类型的变量将持续到调用该方法的窗口关闭。

# mysql - 判断 mysql 表中是否存在键需要太长时间

> ID：15615277
> 
> 赞同：2
> 
> 时间：2013-03-25T12:43:29.610
> 
> 标签：mysql, database, optimization, query-optimization

我从这个问题开始：[我的大型 mysql 表注定要失败吗？](https://stackoverflow.com/questions/15612361/is-my-large-mysql-table-destined-for-failure)

我从那个问题中找到的答案是令人满意的。我有一个包含 2200 万行的表，我希望将其增加到大约 1 亿行。这时候的表`minute_data`结构是这样的： ![在此处输入图像描述](../Images/a257dfb0eca4f6d3378ea5233d940c84.png)

我遇到的一个问题如下。我需要执行这个查询：

```
select datediff(date,now()) from minute_data  where symbol = "CSCO" order by date desc limit 1; 
```

当表包含值“CSCO”时，这非常快（< 1 秒）。问题是，有时我会查询一个不在表中的符号。当我为 symbol = "ABCD" 执行这样的查询时：

```
select datediff(date,now()) from minute_data  where symbol = "ABCD" order by date desc limit 1; 
```

然后查询需要很长时间......就像永远（180秒）。

我可以解决这个问题的一种方法是在执行查询之前确保表包含我正在寻找的符号。我发现执行此操作的最快方法是使用以下查询，我只需要使用它来检查表是否`minute_data`包含我正在寻找的符号。基本上我只需要它返回一个布尔值，这样我就知道符号是否在表中：

```
select count(1) from minute_data where symbol = "CSCO"; 
```

这个查询需要 30 多秒才能返回 1 个值，这对我来说太长了，因为上面的查询实际上返回一个`datediff`计算只需要不到 1 秒。

`symbol`列是 pri 键的一部分，我认为它应该能够很快找出是否存在值。

我究竟做错了什么？有没有一种快速的方法来做我想做的事？我应该更改数据结构以优化性能吗？

谢谢你！

**更新**

我想我找到了解决这个问题的好方法。从 LastCoder 下面的回答中，我做了以下事情：

1) 创建了一个新表`minute_data_2`，其名称与`minute_data`.

2）ALTER TABLE minute_data_2 ADD PRIMARY KEY（符号，日期）；

3) INSERT IGNORE INTO minute_data_2 SELECT * FROM minute_data;

4) 删除表分钟数据；

5) 将 minute_data_2 重命名为 minute_data

现在，我看到上面描述的相同查询的速度非常快，耗时超过 180 秒，现在在 0.001 秒内完成。惊人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:53:26.507

您是否尝试使用 EXISTS (...)

```
select datediff(date,now()) from minute_data  
where EXISTS(SELECT * FROM minute_data WHERE symbol = "CSCO") 
AND symbol = "CSCO" order by date desc limit 1; 
```

即使符号是主键，但似乎您也将时间戳作为 PK，这让我认为您使用的是 COMPOSITE pk，这意味着排序是按时间戳然后符号。如果您所拥有的只是一个以时间戳为第一的复合索引，则您可能希望在符号上放置单独的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:56:52.737

我认为最好创建一个名为的表`symbols`并在表中添加对该表的引用`minute_data`：

**符号**:
symbol_id (INT, Primary Key, Auto Increment)
symbol_text (VARCHAR)

**minute_data** :
key_col (BIGINT, Primary Key, Auto Increment)
symbol_id (INT, Index)
other_field

使用 InnoDB 作为表类型来添加引用。

尽量避免重复输入到您的表中..

# java - Java gui 框创建器

> ID：15615287
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:44:20.443
> 
> 标签：java, swing, user-interface, jframe

嗨，我第一次在 java 中玩 gui，试图制作一个游戏并感到兴奋。我想弄清楚的是如何制作一个带有黑色边框的盒子，这是这个大小的敌人示例：

```
------------------
|                |      
|                |
|                |      
|                |  
|                |
------------------ 
```

然后当用户点击它时，它会将黑色边框变为红色边框，然后用户可以在其中写入一个 1-5 的数字。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:00:49.593

您的信息很少见，但我认为，这将引导您迈出第一步：

我想，当您标记 jframe 时，您想使用 Swing 和 JFrame。

尝试这个：

```
LineBorder border = new LineBorder(Color.BLACK);
JPanel p = new JPanel();
p.setBorder(border) 
```

将其添加到 jfame 的内容窗格中。

学习编写鼠标侦听器（最简单的方法是覆盖 MouseAdapter）并将其添加到面板（addMouseListener）。听众的一种方法（猜猜哪个:)）应该改变面板的边框颜色。

玩得开心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:03:11.320

这里没有太多信息可以给你一个很好的答案。但是，我假设您对标签 JFrame 给出的 Swing 感兴趣。我建议您在[此处查看](http://docs.oracle.com/javase/tutorial/uiswing/)oracle 网站上的 Swing 教程。

# regex - 电子邮件正则表达式中的逻辑或

> ID：15615289
> 
> 赞同：1
> 
> 时间：2013-03-25T12:44:21.373
> 
> 标签：regex

伙计们，

我有一个关于正则表达式的基本问题，我想写一个匹配 * OR *@anything.com 的正则表达式。以下工作正常***+@.+$**用于电子邮件，但我无法弄清楚如何做 * OR ***+@.+$**。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:03:54.040

正则表达式中的逻辑`OR`是`|`，从字面上看，在您的情况下：

```
\*|\*@.+$ 
```

但是上面的正则表达式可以简化为

```
\*(@.+$)? 
```

实际上，`*`char 必须存在，只是`@.+$`可选的（`?`表示*“0 或 1 次”*）。

您可能需要使用`^`锚点，这意味着*“字符串的开头”*：

```
^\*(@.+$)? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:48:45.410

这行得通吗？: [^@]*@.+$

它会多次匹配任何不是“@”的东西，直到“@anything.com”

# c# - 在 for 循环中加载图像

> ID：15615290
> 
> 赞同：0
> 
> 时间：2013-03-25T12:44:23.693
> 
> 标签：c#

```
for (int s = 1; s <= NumComponents;s++ )
{
   fname = @"C:\Users\Johaira\Documents\Visual Studio 2010\Projects\SpecialProblem1\SpecialProblem1\bin\Debug\" ;
   fname2 = fname + string.Format("{0:00}.png", s);
    Bitmap inputImage = new Bitmap(fname2);

    //do some image processing here...for example thinning
} 
```

我正在用 c# 进行图像处理。我有这个for循环来处理目录中的每个图像..我的图像的文件名是数字..但我无法加载它们..我该怎么办..它不在循环中时工作..当我称呼

```
Bitmap inputImage = new Bitmap(@"C:\Users\Johaira\Documents\Visual Studio 2010\Projects\SpecialProblem1\SpecialProblem1\bin\Debug\1.png"); 
```

它工作正常……仅在一张图像中……但我希望它是动态的，那我该怎么办？请帮助我..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:53:43.513

您的代码使用

```
string.Format("{0:00}.png", s) 
```

生成文件名。对于`1`this 的输入值，结果为字符串`"01"`。那是因为您的格式字符串明确包含前导零。

所以问题归结为你从整数到字符串的转换。您需要一个没有前导零的转换。例如：

```
s.ToString() 
```

或者，如果您想要方便地转换号码并一次性添加分机，那么

```
string.Format("{0}.png", s) 
```

格式项具有以下语法：

```
{ index[,alignment][ :formatString] } 
```

因此，由于`{0}`只包含索引并省略了`formatString`，因此默认格式化是通过调用`ToString()`对象来执行的。所以，上面的调用`string.Format()`只是一种方便的写法：

```
s.ToString() + '.png' 
```

* * *

作为一般建议，我建议您花一些时间来学习如何充分利用您的调试器。如果您检查了文件名变量的值，您会立即看到错误的前导零。您将从学习如何使用调试器来调查代码问题中受益匪浅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:48:24.003

假设您的文件名是例如`1.png`等`2.png`：

```
for (int s = 1; s <= NumComponents;s++ ) {
    const string fname = @"C:\Users\Johaira\Documents\Visual Studio 2010\Projects\SpecialProblem1\SpecialProblem1\bin\Debug\" ;
    var fname2 = Path.Combine(fname,String.Format("{0}.png",s));

    using (Bitmap inputImage = new Bitmap(fname2)) {
        // Process image
    }
} 
```

您的代码最初无法正常工作的原因是您正在使用`{0:00}`它会填充`0`您的循环值。

# javascript - Javascript从当前目录读取文本文件

> ID：15615293
> 
> 赞同：4
> 
> 时间：2013-03-25T12:44:25.230
> 
> 标签：javascript, html

如何使用没有 jquery 的 javascript 从当前目录读取文本文件 (text1.txt)。我尝试了以下代码。

```
var file = "text1.txt";
var reader = new FileReader();
var result = reader.readAsText(file);
console.log(result); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T12:48:56.227

FileReader API 通常用于读取通过`<input type="file">`. 它不能读取任意文件。该[`readAsText`方法](https://developer.mozilla.org/en-US/docs/DOM/FileReader#readAsText())期望接收 Blob 或 File 对象，而不是包含文件名的字符串。

要读取 HTML 文档的同级文件，请使用[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)。如果您通过 HTTP(S) 加载文档，这将可靠地工作。如果您使用的是本地 HTML 文档（通过`file:`URI），那么许多浏览器中的安全限制将阻止它工作（您应该运行本地 Web 服务器）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-20T19:31:33.067

***选项 A，您的用例阻止您使用 http 或 php 服务器。*** 您可以使用脚本包含将本地内容作为变量包含在您的 javascript 中。如果您在本地打开页面，作为目录中的文件，这是在网页中包含本地内容的唯一方法。

要包含本地内容，请将其放在您的其他脚本标记之上：

```
<script src="text1.txt"></script> 
```

并编辑您的 text1.txt 文件，以便将所有内容分配给一个变量：

```
gbl_text=`...contents of my text file...
...more contents...
...and so on....   
` 
```

例如，您可以使用脚本来创建此包含文件（使用波浪号 ~ 键下方的 ` 标记）：

```
echo -n "var gbl_text=\`" > text1.txt
cat your-original-file.txt >> text1.txt
echo "\`" >> text1.txt 
```

然后根据需要在您的 javascript 中使用 gbl_text 变量...

```
function dosomething()
{
  if (typeof(gbl_text)=='undefined'){
    setTimeout('dosomething()',500)  //call back until defined
  }else{
    console.log(gbl_text)
  }
} 
```

***选项 B，您的用例将允许您使用 php-cli 内置服务器。*** 如果能够运行 php-cli，则可以在内置的 php 网络服务器上打开页面，并通过 php 调用读取和写入本地内容。要在 linux 上安装和使用 php，

```
sudo apt install php7.0-cli
#To use the php built-in webserver, run:
php -S localhost:8000 -t /path/to/your/content 
```

因此，与其将 html 作为文件打开，不如将其作为 http 网页打开：

```
firefox http://localhost:8000/mypage.html
#or browser of choice 
```

现在本地网页由具有 php 支持的实际（本地）http 服务器提供服务，您可以使用它来操作本地文件。

这是一个简单的示例，展示了如何使用 jQuery 和 php 读取和写入本地文件。下载 jQuery（参见 jQuery.com）并将其包含在您的 html 文件中。

dofile.php 的内容：

```
<?php 
$dowhat  = $_REQUEST['dowhat'];
  if ($dowhat=='save'){
    $myvar = $_REQUEST['myvar'];
    file_put_contents('myfile', $myvar); 
  }elseif($dowhat=='read'){
    $myvar=file_get_contents('myfile');
    echo $myvar; 
  }
?> 
```

mypage.html 的内容：

```
<script src='jquery-3.2.1.js';></script>
<!--make sure the filename matches the jQuery you use-->

<script>
function savevar(){
  var myvar=document.getElementById('mytxt').value
  var path="dofile.php?dowhat=save&myvar="+myvar 
  $.get(path, function(data){
    console.log("saved ...\n"+myvar)
    alert("saved ...\n"+myvar)
  });
}

function clearbox(){
  document.getElementById('mytxt').value='reading file...'
  setTimeout('getvar()',1000)
}

function getvar(){
  var path="dofile.php?dowhat=read"
  $.get(path, function(data){
    console.log(data);
    document.getElementById('mytxt').value=data
    /*do other things with data here*/;
  });
}
</script>

<html>
Type something in the text box.<br>
Use the Read and Write buttons to verify <br>
text is saved and read back.<br> 
<input id='mytxt' value='type text here' onclick=document.getElementById('mytxt').value=''><br>
<input type='button' value='Save' onclick=savevar() ><input type='button' value='Read' onclick=clearbox() >

</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:56:25.950

请区分2种阅读文件：

*   阅读“从互联网” - 使用[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)读取任何类型的文件
*   “从客户端”读取 - 使用 FileReader 或`<input type="file">`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-07-11T07:52:48.270

制作一个小的 iframe。在那里加载文件。用 iframe.innerHTML 阅读

# c# - 如何使 EF 将数据插入到包含另一个表中的键值的表中？

> ID：15615307
> 
> 赞同：0
> 
> 时间：2013-03-25T12:45:11.640
> 
> 标签：c#, sql-server, entity-framework, entity-framework-4

我想使用以下代码将数据添加到我的 EF 数据库：

```
 var applicationNames = new[] { 
            "C", 
            "E", 
            "S" };
        var testAccountNames = new[] {
            "Production",
            "Ready",
            "Beta",
            "Alpha" };
        foreach (string applicationName in applicationNames)
        {
            _uow.Applications.Add(
                new Application 
                { 
                    Name = applicationName, 
                    ModifiedDate = DateTime.Now 
                });
                foreach (string testAccountName in testAccountNames)
                {
                   new TestAccount 
                   { 
                       ApplicationID = ??
                       Name = applicationName, 
                       ModifiedDate = DateTime.Now 
                   });
                }
        }
        _uow.Commit(); 
```

这是我的课程：

```
public partial class Application
{
    public Application()
    {
        this.TestAccounts = new List<TestAccount>();
    }

    public int ApplicationId { get; set; }
    public string Name { get; set; }
    public byte[] RowVersion { get; set; }
    public System.DateTime ModifiedDate { get; set; }
    public virtual ICollection<TestAccount> TestAccounts { get; set; }
}

public partial class TestAccount
{
    public TestAccount()
    {
        this.Subjects = new List<Subject>();
    }

    public int TestAccountId { get; set; }
    public string Name { get; set; }
    public int ApplicationId { get; set; }
    public byte[] RowVersion { get; set; }
    public System.DateTime ModifiedDate { get; set; }
    public virtual Application Application { get; set; }
    public virtual ICollection<Subject> Subjects { get; set; }
} 
```

这是我用于 add 方法的代码

```
 public virtual void Add(T entity)
    {
        DbEntityEntry dbEntityEntry = DbContext.Entry(entity);
        if (dbEntityEntry.State != EntityState.Detached)
        {
            dbEntityEntry.State = EntityState.Added;
        }
        else
        {
            DbSet.Add(entity);
        }
    } 
```

这是映射：

```
 public TestAccountMap()
    {
        // Primary Key
        this.HasKey(t => t.TestAccountId);

        // Relationships
        this.HasRequired(t => t.Application)
            .WithMany(t => t.TestAccounts)
            .HasForeignKey(d => d.ApplicationId);

    } 
```

请注意，在数据库中 ApplicationId 和 TestId 是身份数据类型。我还有一个外键，可以将 Application 表的 ApplicationID 正确链接到 TestAccount 表中的 ApplicationId。

如何使 EF 在插入数据库时​​将数据插入到 TestAccount 表中的正确 ApplicationID 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:54:59.810

```
foreach (string applicationName in applicationNames)
        {
            var app = new Application 
                { 
                    Name = applicationName, 
                    ModifiedDate = DateTime.Now 
                });
            _uow.Applications.Add(app);
                foreach (string testAccountName in testAccountNames)
                {
                   new TestAccount 
                   { 
                       Application = app ,
                       Name = applicationName, 
                       ModifiedDate = DateTime.Now 
                   });
                }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:01:58.907

不要直接设置ID，设置引用属性，剩下的EF会整理出来，所以是这样的：

```
....
foreach (string applicationName in applicationNames)
    {
        _uow.Applications.Add(
            new Application 
            { 
                Name = applicationName, 
                ModifiedDate = DateTime.Now,
                TestAccounts = (from  testAccountName in testAccountNames
                                select new TestAccount
                                { 
                                   Name = testAccountName , 
                                   ModifiedDate = DateTime.Now 
                               })
            }
    } 
```

# java - 如何在 solr 的查询时提升某个字段

> ID：15615308
> 
> 赞同：0
> 
> 时间：2013-03-25T12:45:12.073
> 
> 标签：java, solr, lucene

我正在尝试使用 solr 配置文件在查询时提升某个字段。我知道我可以使用 qf 使用 field^boost 语法指定字段列表，但是我不希望我的字段在进行一般查询时自动包含在搜索字段中。

因此，假设我希望作者字段提升 4.0，但是对“某物”进行默认查询，并且 qf 中的标题和正文都使用 boost 2.0，我会得到一个解析查询，如 (title:something^2.0 OR body: something^2) 在“something”上，以及 (title:something^2.0 OR body:something^2 authors:john^4.0) 在“something authors:john”上。我希望这个字段在查询时间而不是索引上得到提升。

编辑：到目前为止，我想出的只是编写另一个搜索组件，将提升附加到解析原始 qString 的字段，然后将其传递给查询组件。我仍然会感谢任何有关天气的输入，这可以仅使用预定义的 solr 配置设置来实现

如果重要的话，我正在使用 edismax 查询解析器

提前致谢

# html - 浏览器支持 UTF-8 符号

> ID：15615309
> 
> 赞同：6
> 
> 时间：2013-03-25T12:45:21.570
> 
> 标签：html, browser, unicode, utf-8, glyph-substitution

我想用 UTF-8 符号替换我的一个网站中的一些图像图标。似乎到目前为止，并非每个浏览器中的每种字体都支持所有 UTF-8 字符。是否有任何 UTF-8 符号可以安全地与标准浏览器字体（Verdana、Arial 等）一起使用的概述？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T14:30:02.980

没有字体支持所有 Unicode 字符（这就是您所说的“UTF-8 字符”）。Verdana 和 Arial 不是标准的，只是普通的，一种字体可能存在不同的版本（具有不同的字符库）。

所以没有普遍的答案。但作为一个粗略的指南，[Windows Glyph List 4](http://www.alanwood.net/demos/wgl4.html)试图定义一个有用的泛欧字符集合，这足以满足欧洲语言的正常需求，包括许多常用的特殊字符。它旨在为字体设计师提供指导，许多现代字体实际上涵盖了它，或者大部分。

用字符替换图像图标通常是徒劳的，因为通常用作图标的东西要么根本没有编码为字符，要么只是最近才编码，并且字体支持非常有限（或没有）。但这实际上取决于所使用的符号类型以及对它们形状的要求。

# sql - 禁止在特定条件下插入表格

> ID：15615314
> 
> 赞同：2
> 
> 时间：2013-03-25T12:45:39.960
> 
> 标签：sql, database, sql-server-2008, triggers, insert-into

我有一个 SQL Server 2008 数据库。有三个端子连接到它（A、B、C）。数据库中有一个表`SampleTable`，它对任何终端活动作出反应。每次登录到此数据库的任何终端上有一些活动时，新行都会插入到`SampleTable`.

我想将来自三个终端中的一个 (C) 的流量重定向到表 RealTable 而不是 SampleTable，但我必须在 DB 层执行此操作，因为将终端活动写入 DB 的服务位于黑盒中。

我已经有一些`SampleTable`使用重定向逻辑的触发器，但问题是行仍然被插入到`SampleTable`.

什么是最干净的解决方案。我确信在插入触发器中删除行是坏的，坏的，坏的。

请帮忙。

**编辑：**

我们当前的逻辑是这样的（这是伪代码）：

```
ALTER TRIGGER DiffByTerminal
 ON SampleTable
AFTER INSERT
AS
DECLARE @ActionCode VARCHAR(3), 
    @ActionTime DATETIME,
    @TerminalId INT

  SELECT @ActionCode = ins.ActionCode, 
     @ActionTime = ins.ActionTime, 
     @TerminalId = ins.TerminalId
  FROM inserted ins

IF(@TerminalId = 'C')
BEGIN

    INSERT INTO RealTable 
    (   
         ...
    )
    VALUES
    (
         @ActionCode, 
         @ActionTime, 
         @TerminalId
    )
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:21:49.320

为了在将行插入表之前“拦截”某些内容，您需要一个`INSTEAD OF`触发器，而不是`AFTER`触发器。因此，您可以删除现有触发器（其中还包括假设所有插入都是单行的有缺陷的逻辑）并创建此`INSTEAD OF`触发器：

```
DROP TRIGGER DiffByTerminal;
GO

CREATE TRIGGER dbo.DiffByTerminal
 ON dbo.SampleTable
INSTEAD OF INSERT
AS
BEGIN
  SET NOCOUNT ON;

  INSERT dbo.RealTable(...) SELECT ActionCode, ActionTime, TerminalID
    FROM inserted
    WHERE TerminalID = 'C';

  INSERT dbo.SampleTable(...) SELECT ActionCode, ActionTime, TerminalID
    FROM inserted
    WHERE TerminalID <> 'C';
END
GO 
```

这将处理由 (a) 仅 C (b) 仅非 C 和 (c) 混合组成的单行插入和多行插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:13:43.433

对您来说最简单的解决方案之一是 INSTEAD OF 触发器。简单地说，它是在您决定的操作上“触发”并让您“覆盖”该操作的默认行为的触发器。

您可以使用 INSTEAD OF 触发器覆盖特定表/视图的 INSERT、DELETE 和 UPDATE 语句（您经常将它与组合来自不同表的数据的视图一起使用，并且您希望使视图可插入），您可以在其中放置您的逻辑. 在触发器内部，您可以在适当的时候再次调用 INSERT，并且您不必担心递归 - INSTEAD OF 触发器不会应用于触发器代码本身内部的语句。

享受。

# ruby-on-rails-3 - 花更多时间在机架空间上上传图像

> ID：15615317
> 
> 赞同：0
> 
> 时间：2013-03-25T12:45:47.100
> 
> 标签：ruby-on-rails-3, heroku, paperclip

我有一个应用程序，我正在使用回形针和回形针云文件宝石上传图像以在机架空间上上传图像。此功能需要大约几分钟才能通过 localhost 将图像上传到机架空间。并且在 heroku 上给出了一个应用程序错误。

代码是使用以下准则构建的。
[http://blog.joshsoftware.com/2010/04/16/using-rackspace-cloudfiles-with-paperclip/](http://blog.joshsoftware.com/2010/04/16/using-rackspace-cloudfiles-with-paperclip/)

在heroku上出现以下错误

```
2013-03-22T14:49:02+00:00 heroku[router]: at=error code=H13 desc="Connection closed without response" method=POST path=/en/people/dC95vKJ7mr4OadeJe5kdxp/update_avatar host=foodswap.herokuapp.com fwd="14.97.68.176" dyno=web.1 queue=0ms wait=0ms connect=1ms service=30950ms status=503 bytes=0
2013-03-22T14:49:02+00:00 app[web.1]: Disconnected from ActiveRecord
2013-03-22T14:49:02+00:00 app[web.1]: reaped # worker=0
2013-03-22T14:49:03+00:00 app[web.1]: Connected to ActiveRecord
2013-03-22T14:49:03+00:00 app[web.1]: worker=0 ready 
```

使用：ruby 1.9.3 rails 3.0.19 paperclip 3.4.1 paperclip-cloudfiles 2.3.8.3

那么我怎样才能减少图像处理时间或延长服务器时间呢？或延迟的工作将帮助我上传图片？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:05:02.370

Heroku 会超时需要超过 30 秒的请求 - 这始终是上传的问题。

使用 Amazon S3，您可以直接上传而无需通过 Heroku，并在上传完成后将响应传递给 Heroku，从而完全绕过 Heroku 的超时 - 您需要查看 Rackspace 是否提供此类功能。

# php - 消息：未定义的属性：CI_Loader::$table

> ID：15615319
> 
> 赞同：1
> 
> 时间：2013-03-25T12:45:54.103
> 
> 标签：php, codeigniter

这是我的控制器..

```
class Customer extends CI_controller
{

public function __construct()
{
    parent::__construct();
    $this->load->model('Customer_model');
}
public function create()
{

        $this->load->helper('form');
        $this->load->library('form_validation');
    $this->form_validation->set_rules('name', 'Name', 'required');
    $this->form_validation->set_rules('address', 'Address', 'required');
    $this->form_validation->set_rules('office_phone', 'Phonenumber', 'required');
    $this->form_validation->set_rules('fax', 'Faxno.', 'required');
    $this->form_validation->set_rules('email', 'Mailaddress', 'required');

    $data = array(
        'name' => $this->input->post('name'),

        'address' => $this->input->post('address'),

        'phoneno' => $this->input->post('office_phone'),

        'fax' => $this->input->post('fax'),

        'email' => $this->input->post('email')
    );

    if ($this->form_validation->run() === FALSE)
    {
        $this->load->helper('url');
        $this->load->view('templates/header');  
        $this->load->view('master/customer',$data);
    }
    else
    {

        $this->Customer_model->register($data);
        $this->load->library('session');
       //$this->session->set_flashdata('message', 'New Contact has been added');
             //redirect(current_url());
        $this->load->helper('url');
        $this->load->view('templates/header');
        $this->load->view('templates/success');
    }
    $this->load->library('pagination');
     $this->load->library('table');

      // Config setup
    $config['base_url'] = base_url().'/customer/';
    $config['total_rows'] = 20;
    $config['per_page'] = 10;
    // I added this extra one to control the number of links to show up at each page.
    $config['num_links'] = 5;
    // Initialize
    $this->pagination->initialize($config);

      $data1 = $this->db->get('registration');
      $header = array('Name', 'Address', 'phoneno','fax','email');
       $this->table->set_heading($header);
       $this->load->view('master/customer',$data1);
       }
} 
```

这是我的观点部分..

```
<div id='results'>
<?php  echo $this->table->generate($data1); ?>
<?php echo $this->pagination->create_links(); ?>
</div> 
```

在运行 iam 时收到这样的错误消息

遇到 PHP 错误

> 严重性：通知
> 
> 消息：未定义的属性：CI_Loader::$table
> 
> 文件名：master/Customer.php
> 
> 行号：44
> 
> 致命错误：在第 44 行调用 C:\xampp\htdocs\CodeIgniter_2.1.3\application\views\master\Customer.php 中非对象的成员函数 generate()

任何人请告诉我有什么问题。我是新来的codeignator ..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T13:04:20.950

在视图中时，调用`get_instance()`以获取 CodeIgniter 实例。从那里，您可以访问`table`对象的属性，调用您需要的方法。

```
<div id='results'>
<?php $CI =& get_instance(); ?>
<?php echo $CI->table->generate($data1); ?>
<?php echo $CI->pagination->create_links(); ?>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-25T21:35:39.333

我想向你推荐这个：

`<?php $CI =& get_instance(); ?>`

在您的视图中使用`$CI`而不是`$this`，看看它是否有效..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-29T19:54:02.550

only one line your needed

```
$this->load->library('table'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T14:46:12.037

尝试`table`在您的构造函数中加载库

```
public function __construct()
{
     parent::__construct();
     $this->load->model('Customer_model');
     $this->load->library('table');
} 
```

如果它仍然给出同样的错误，那么将这个`table`库加载到这样的自动加载文件中

```
$autoload['libraries'] = array('table'); 
```

希望这会奏效

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-30T16:51:16.240

尝试这个：

```
$autoload['libraries'] = array('database','session','table'); 
```

# ruby - 检查文本输入是否为空，如果是，则不要转换为浮点数

> ID：15615326
> 
> 赞同：1
> 
> 时间：2013-03-25T12:46:07.480
> 
> 标签：ruby, validation, methods, sinatra

我正在使用 sinatra 编写一个小型 ruby​​ 应用程序，并有一个文本输入作为输入，然后我使用该`.to_f`方法将其转换为平面。但是，如果输入为空，则`.to_f`仍会将空字符串转换为 0 值。

我希望对其进行检查，因此如果输入为空白/空，它不会尝试将其转换为数字。下面是我到目前为止的代码，我尝试添加`.empty?`到末尾，但它会引发方法错误。

```
weight = Weight.create(
    :amount => params[:amount].to_f,
    :user_id => current_user.id,
    :created_at => Time.now
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:19:27.933

你有两个基本的选择。第一种是使用三元运算符，当字符串为空时给出一个默认值。基本模板是：

```
(params[:amount].empty?) ? <EMPTY EXPRESSION> : <NOT EMPTY EXPRESSION> 
```

例如，`nil`当`params[:amount]`为空时返回：

```
weight = Weight.create(
    :amount => (params[:amount].empty?) ? nil : params[:amount].to_f,
    :user_id => current_user.id,
    :created_at => Time.now
) 
```

二是使用Ruby的逻辑运算符。基本模板是：

```
params[:amount].empty? && <EMPTY EXPRESSION> || <NOT EMPTY EXPRESSION> 
```

例如，在`params[:amount]`为空时引发异常：

```
weight = Weight.create(
    :amount => params[:amount].empty? && \
        (raise ArgumentError.new('Bad :amount')) || params[:amount].to_f
    :user_id => current_user.id,
    :created_at => Time.now
) 
```

两种方式都可以返回`nil`或引发异常。选择主要是风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:07:32.853

这是一种比严格必要的更 Java/EE 的做事方式，但我发现参数验证是如此普遍，它有助于在一个地方定义功能，然后重用它。

```
class ParamsExtractor
  def get_float_parameter(params,key)
    params[key] && !(params[key].nil? || params[key].to_s.strip == '') ? params[key].to_f : 0.0
  end
end

weight = Weight.create(
  :amount => ParamsExtractor.get_float_parameter(params, :amount),
  :user_id => current_user.id,
  :created_at => Time.now
) 
```

您可以做其他事情（模块等），但这很清楚并且可以通过 RSpec 轻松测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:15:36.540

```
x = '' => ""
x.to_f unless x.empty? => nil
x = '1' => "1"
x.to_f unless x.empty? => 1.0 
```

# xml - xml 文件中的图标标记

> ID：15615328
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:46:11.710
> 
> 标签：xml, google-maps, icons, kml

我正在开发一个应用程序，我想在其中显示覆盖在谷歌地图上的 kml 文件。这个 kml 文件包含我想为它们设置自定义图标的标记。图标存储在我的电脑上。

我的问题是如何从我的 kml 文件中访问这些图标以便在地图上显示它们。

以下是我试图做的，通过将图标存储在 kkml 文件的同一文件中，但它不起作用。

```
<?xml version="1.0" encoding="utf-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>route</name>
    <Placemark>
      <name>445</name>
      <description>Market</description>
      <Style>
            <IconStyle>
              <Icon>
                <href>0.png</href>
              </Icon>
            </IconStyle>
      </Style>
      <Point>
        <coordinates>14.5139685555926,35.898079278121</coordinates>
      </Point>
    </Placemark>
  </Document>
</kml> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:25:53.473

您可以选择将图标存储在与 KML 相同的级别（例如，在同一文件夹中的同一 Web 服务器上）或子文件夹，以便相关 URL 正确解析或嵌入到[KMZ](https://developers.google.com/kml/documentation/kmzarchives)文件中，这基本上是一个带有根 KML 文件的“ZIP”文件以及 KML 中引用的任意数量的其他 KML 文件和内联图标或叠加层。

示例 1： http: [//kml-samples.googlecode.com/svn/trunk/kml/kmz/balloon/balloon-image-rel.kml](http://kml-samples.googlecode.com/svn/trunk/kml/kmz/balloon/balloon-image-rel.kml)

这里 KML 引用了与 KML 文件相关的图像：

```
 <description>
        <![CDATA[
        Here is an image:
        <img src="images/googleearth.gif"/>
        ]]>
      </description> 
```

在某些平台上，该图像不起作用，但如果您在本地下载 KML 和图像，那么它将按照您对内嵌图像的预期显示。

示例 2：

[http://kml-samples.googlecode.com/svn/trunk/kml/kmz/balloon/balloon-image-rel.kmz](http://kml-samples.googlecode.com/svn/trunk/kml/kmz/balloon/balloon-image-rel.kmz)

在此示例中，图像*googleearth.gif*存储在 KMZ 文件中的子文件夹 images 中，因此下载的 KMZ 文件包括 KML 和图像。

您可以像在 Web 服务器上一样布置 KMZ 文件。

[谷歌地图文档](https://developers.google.com/kml/documentation/mapsSupport)说它支持 KMZ（压缩的 KML，包括附加的图像）。

# jquery-ui - 如何使用 RequireJS 填充 jQueryUI？

> ID：15615330
> 
> 赞同：0
> 
> 时间：2013-03-25T12:46:16.027
> 
> 标签：jquery-ui, requirejs

我更喜欢使用 require、jQuery 和 jQueryUI 作为单独的脚本，而不需要修改它们。

我收到错误：（在 jquery-ui.min.js:6 内）

> 未捕获的 ReferenceError：未定义 jQuery

jQuery 本身可以工作并且可以使用，但是 jQuery-UI 不起作用。

如何在不使用 require-jquery 的情况下通过修改 main.js 来解决它

这是我当前的 main.js

```
requirejs.config({

    paths: {
        'jquery': 'lib/jquery/jquery',
        'jqueryui': 'lib/jquery-ui/jquery-ui.min'
    },
    shim: {
        'jquery': {
            exports: 'jQuery'
        },
        'jqueryui': {
            deps: ['jquery']
        }
    }
});

require([
    "jquery",
    "jqueryui"], function(jQuery) {    
}); 
```

我尝试了各种东西，比如 shim init 函数，但是在异常发生之前甚至没有调用它。

有什么想法，还是不可能？

更新：修复了上面的代码。它现在工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:15:06.433

错误在你的代码中，你写了这个

```
'jqueryui:': {
            deps: ['jquery'],
        } 
```

你注意到多余的吗`:`？删除它，然后你的代码就可以工作了

# git - Git 日志早于分支点

> ID：15615333
> 
> 赞同：0
> 
> 时间：2013-03-25T12:46:32.010
> 
> 标签：git, git-branch

我的存储库基本上是这样的：

```
-- X -- A -- B -- C -- D -- F  (master) 
          \     /   \     /
           \   /     \   /
             G -- H -- I -- J  (deployment-branch-1) 
```

通常，我会被问到，什么进入了部署，什么没有。`Git log`在分支上只给了我到分支点“A”的日志

从上面的示例中，这将如下所示：

```
$ git co deployment-branch-1
$ git log --oneline --decorate
J (HEAD, deployment-branch-1) branch commit
I branch commit
H branch commit
G branch commit 
```

...但可惜没有 A 或更早的提交行。我想从分支的尖端一直显示日志，包括在分支点之前进行的提交。像这样：

```
J (HEAD, deployment-branch-1) branch commit
I branch commit
H branch commit
G branch commit
A (master) master commit
X master commit 
```

所以我的问题是，我如何显示更长的日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:35:57.733

我希望为一个分支显示整个日志；不仅仅是从分支点到 HEAD 的日志。您可以尝试使用该`<source>..<target>`选项：

```
git log --oneline --decorate X..J 
```

一个例子。这是输出

```
 git log --oneline --graph --all

* 1eaa578 histogrammer
| * 9c7e745 Revert "Revert "Initial README""
| * 63a94ef Revert "Initial README"
| * 8c7f0ec Use ...; remove define-values, vector-copy, and case-lambda; a
|/  
* 18e6e26 Initial README
* 528c542 Add copyright notice based on the MIT License
... 
```

然后我结帐`9c7e745`（这是一个分支的负责人`foo`）。然后尝试`git log --oneline`。您可以看到它继续超出分支。

```
9c7e745 Revert "Revert "Initial README""
63a94ef Revert "Initial README"
8c7f0ec Use ...; remove define-values, vector-copy, and case-lambda; add f
18e6e26 Initial README
528c542 Add copyright notice based on the MIT License
... 
```

我的 git 版本：

```
ebg@ebg(181)$ git --version
git version 1.7.9.6 (Apple Git-31.1) 
```

和没有区别：

```
ebg@ebg(185)$ /usr/local/bin/git --version
git version 1.7.10.3 
```

# objective-c - NSOutlineView 选择第一次单击

> ID：15615335
> 
> 赞同：1
> 
> 时间：2013-03-25T12:46:38.650
> 
> 标签：objective-c, xcode, macos

我有一个带有 NSOutlineView 的 NSPanel 来显示我的数据。我想在 NSOutlineView 内第一次单击选择一行，即使面板不在焦点（即不是关键窗口）我有一个允许选择的委托，并且我已经覆盖了 NSOutlineView 类以覆盖acceptsFirstMouse：方法，但是我无法获得第一次点击选择。

我检查了 mouseDown 事件，当面板是和不是关键窗口时，它触发没有任何问题（在我的类中覆盖）。但是当面板不是 key 时，NSOutlineViewDelegate 方法 shouldSelectItem: 不会被调用。

我错过了什么/做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:51:47.863

您只需要继承您的 NSTableOutlineView 并覆盖：

```
- (BOOL)needsPanelToBecomeKey 
```

返回 NO。

**NSView 类参考状态：**

> 被子类覆盖以确定接收器是否需要其面板（否则可能会避免成为键）成为键窗口，以便它可以处理键盘输入和导航。
> 
> **讨论**
> 
> 这样的子类也应该重写 AcceptFirstResponder 以返回 YES。
> 
> 此方法也用于键盘导航。它确定鼠标单击是否应将焦点放在视图上（使其成为第一响应者）。当您单击某些视图时，它们会希望获得键盘焦点，例如文本字段。其他视图只有在您选择它们​​时才会获得焦点，例如按钮。您不希望仅仅因为单击复选框而将焦点从正在进行编辑的文本字段转移。

*资料来源：[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsview_Class/Reference/NSView.html)*

# d3.js - 基于文本框的交叉过滤器过滤器

> ID：15615336
> 
> 赞同：4
> 
> 时间：2013-03-25T12:46:42.047
> 
> 标签：d3.js, datatables, crossfilter, dc.js

我想根据文本框中的输入过滤我的数据。这可能吗？像[这样](http://datatables.net/release-datatables/examples/api/multi_filter.html)但带有交叉过滤器的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:23:10.390

当然可以`crossfilter`，只需从原始数据创建`dimension`对象，然后通过文本框的输入应用过滤器。

```
myDimension.filter(valueFromBox); // selects values who equal the value in the text box 
```

在此处查看[API 文档。](https://github.com/square/crossfilter/wiki/API-Reference)

# javascript - 如何从其中的 for 循环中退出（转义）函数？

> ID：15615342
> 
> 赞同：10
> 
> 时间：2013-03-25T12:47:00.810
> 
> 标签：javascript, for-loop, foreach

这是一个理论问题，用于了解有多少转义（返回或退出）可以应用于嵌套循环或其他控件和函数。

我对此感到困惑，因为我被困在代码中 [如何同时摆脱 for ... 每个循环和方法？](https://stackoverflow.com/questions/15574121/how-to-escape-from-for-each-loop-and-method-at-the-same-time)

我不能停止迭代元素中`option`的 s 。`select`

我已经尝试过`return`，`return false`但没有成功。

一般来说，我们怎么能做到这一点？

```
function() {
    for (...) {
        if (...) {
            $(...).each(function() {
               // You have to exit outer function from here
            });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T12:53:30.790

在循环之间使用共享变量。如果要退出，则将其翻转到循环`true`结束时，并在检查结束时将其翻转为. 如果是的话，打破它。`each()``for-loop``true`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T12:52:31.840

**我会这样做：**

*   创建一个布尔变量来检查每个循环，如果变量为真，则退出循环（对每个循环执行此操作）。

    ```
    var exitLoop = false;

     $(sentences).each(function() {
        if(exitLoop) {return;}
        var s = this;
        alert(s);
        $(words).each(function(i) {
        if(exitLoop) {return;}
            if (s.indexOf(this) > -1)
            {
                alert('found ' + this);
                throw "Exit Error";
            }
        });
    }); 
    ```

**请注意**，这*不是*正确使用 a`try-catch`作为 a`try-catch`应该严格用于错误处理，而不是跳转到代码的不同部分 - 但它适用于您正在做的事情。

如果`return`不是为您执行此操作，请尝试使用`try-catch`

```
try{
$(sentences).each(function() {
    var s = this;
    alert(s);
    $(words).each(function(i) {
        if (s.indexOf(this) > -1)
        {
            alert('found ' + this);
            throw "Exit Error";
        }
    });
});
}
catch (e)
{
    alert(e)
} 
```

取自[此答案的代码](https://stackoverflow.com/a/3267593/220060)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-10T12:29:38.997

也可以通过更改迭代器值来退出循环。

```
var arr = [1,2,3,4,5,6,7,8,9,10];

for(var i = 0;i<arr.length;i++){

  console.log(i);
  compute(i);

  function compute(num){
    //break is illegal here
    //return ends only compute function
    if(num>=3) i=arr.length;
  }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-21T05:09:21.013

“标签”是范围过程（如中断循环）的解决方案。这是我多年后意识到的内置答案：[https ://css-tricks.com/you-can-label-a-javascript-if-statement/](https://css-tricks.com/you-can-label-a-javascript-if-statement/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-25T12:51:27.597

与大多数语言一样。退出循环的关键字是`break;` 更多信息：http: [//www.w3schools.com/js/js_break.asp](http://www.w3schools.com/js/js_break.asp)

# delphi - 带有 Indy 的 HTTP 连续分组流

> ID：15615347
> 
> 赞同：6
> 
> 时间：2013-03-25T12:47:13.533
> 
> 标签：delphi, indy, indy10, idhttp

我有一个 JSON-RPC 服务，其中一个请求返回一个连续的 JSON 对象流。

IE ：

```
{id:'1'}
{id:'2'}
//30 minutes of no data
{id:'3'}
//... 
```

当然，没有 Content-Length，因为流是无穷无尽的。

我正在使用自定义 TStream 后代来接收和解析数据。但是在内部缓冲数据并且在收到字节`TIdHttp`之前不会将其传递给我。`RecvBufferSize`

这导致：

```
{id:'1'} //received
{id:'2'} //buffered by Indy but not received
//30 minutes of no data
{id:'3'} //this is where Indy commits {id:'2'} to me 
```

显然这不会发生，因为 30 分钟前重要的消息应该在 30 分钟前传递。

我希望 Indy 做套接字所做的事情：如果有可用数据，则读取到 RecvBufferSize 或更少并立即返回。

我发现[这个讨论](http://borland.newsgroups.archived.at/public.delphi.internet.winsock/200504/0504201980.html)从 2005 年开始，一些可怜的人试图向 Indy 开发人员解释这个问题，但他们不理解他。（读它；这是一个悲伤的景象）

无论如何，他通过编写自定义 IOHandler 后代来解决这个问题，但那是在 2005 年，也许今天有一些现成的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:54:56.420

对我来说听起来像是一个*WebSocket*任务，因为您的连接不再是面向简单的 HTTP 问题/答案，而是一个内容流。

有关某些代码，请参阅[Delphi 的 WebSocket 服务器实现。](https://stackoverflow.com/questions/8595800)

[至少有一个基于 Indy](http://asmprofiler.googlecode.com/svn/trunk/-Other-/IndyWebsocketDemo/)的，来自 AsmProfiler 的作者。

AFAIK websockets中有两种流：二进制和文本。从 websocket 的角度来看，我怀疑您的 JSON 流是一些文本内容。

另一种选择是使用[长池](http://en.wikipedia.org/wiki/Push_technology)或一些更旧的协议，它们对 rooter 更友好 - 当连接切换到 websockets 模式时，它不再是标准 HTTP，所以一些“明智的”数据包检查工具（在公司网络上) 可能会将其识别为安全攻击（例如 DoS），因此可能会停止连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:22:35.860

虽然使用 TCP 流是一种选择，但最后我还是采用了编写自定义`TIdIOHandlerStack`后代的原始解决方案。

动机是使用 TIdHTTP 我知道什么不起作用，只需要修复它，而切换到较低级别的 TCP 意味着可能会出现新问题。

**[这是我正在使用的代码，我](http://pastebin.com/5uyuuL1V)**将在这里讨论关键点。

新`TIdStreamIoHandler`必须继承自`TIdIOHandlerStack`.

需要重写两个函数：`ReadBytes`和`ReadStream`：

```
function TryReadBytes(var VBuffer: TIdBytes; AByteCount: Integer;
  AAppend: Boolean = True): integer; virtual;
procedure ReadStream(AStream: TStream; AByteCount: TIdStreamSize = -1;
  AReadUntilDisconnect: Boolean = False); override; 
```

两者都是修改后的 Indy 函数，可以在`IdIOHandler.TIdIOHandler`. 在子句`ReadBytes` 中`while`必须替换为单个`ReadFromSource()`请求，以便`TryReadBytes`在一次读取最多 AByteCount 个字节后返回。

基于此，`ReadStream`必须处理 AByteCount (>0, <0) 和 ReadUntilDisconnect (true, false) 的所有组合以循环读取然后写入从套接字到达的流数据块。

请注意，`ReadStream`如果套接字中只有部分请求的数据可用，即使在此流版本中也不需要提前终止。它只需要立即将该部分写入流而不是将其缓存在 中`FInputBuffer`，然后阻塞并等待下一部分数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T14:25:16.620

您不需要编写 IOHandler 后代，`TIdTCPClient`类已经可以。它公开了一个`TIdIOHandler`对象，该对象具有从套接字读取的方法。这些 ReadXXX 方法会一直阻塞，直到请求的数据被读取或发生超时。只要连接存在，ReadXXX 就可以循环执行，每当它接收到新的 JSON 对象时，将其传递给应用程序逻辑。

您的示例看起来像所有 JSON 对象只有一行。然而，JSON 对象可以是多行的，在这种情况下，客户端代码需要知道它们是如何分开的。

* * *

更新：在“流式”HTTP JSON Web 服务的类似 Stackoverflow 问题（针对 .Net）中，最受好评的解决方案使用较低级别的 TCP 客户端而不是 HTTP 客户端：[Reading data from an open HTTP stream](https://stackoverflow.com/questions/1081860/reading-data-from-an-open-http-stream)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-01T03:15:26.523

在分块编码传输模式下传输的数据包内容之前实际上有一个长度数据。idhttp 的 IOhandler 使用这个长度数据，一包一包地读取流。最小有意义的单位是一个数据包，所以不需要从一个数据包中一个一个地读取字符，也不需要改变IOHandler的功能。唯一的问题是 idhttp 不会停止将流数据转到下一步，因为流数据无穷无尽：没有结束数据包。所以解决方案是使用 idhttp onwork 事件触发从流中读取并将流位置设置为零以避免溢出。像这样：

```
 //add a event handler to idhttp    
    IdHTTP.OnWork :=  IdHTTPWork;

    procedure  TRatesStreamWorker.IdHTTPWork(ASender: TObject; AWorkMode: TWorkMode; AWorkCount: Int64);
    begin
         .....
         ResponseStringStream.Position :=0; 
         s:=ResponseStringStream.ReadString(ResponseStringStream.Size) ;//this is the packet conten
         ResponseStringStream.Clear;
         ... 
    end;

procedure TForm1.ButtonGetStreamPricesClick(Sender: TObject);
var
 begin
    .....    
    source := RatesWorker.RatesURL+'EUR_USD';  
    RatesWorker.IdHTTP.Get(source,RatesWorker.ResponseStringStream);  
 end; 
```

然而，使用 Tstream 的自定义 write() 函数可能是这种需求的更好解决方案。

# ruby - 正则表达式：在文本和标签 img 之间插入一个中断

> ID：15615350
> 
> 赞同：0
> 
> 时间：2013-03-25T12:47:19.930
> 
> 标签：ruby, regex

我想在几个或一个 img 标签之前的任何文本之后插入一个中断：

我有一段文字：

```
Some text, some text <img src="thumb.jpg" /><img src="thumb2.jpg" /> 
```

我想得到：

```
Some text, some text <br /><img src="thumb.jpg" /><img src="thumb2.jpg" /> 
```

我想使用 gsub 方法通过 Ruby 中的正则表达式来实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:01:33.500

也许这个？

```
str.gsub(/((?:<img[^>]+>)+)/, '<br />\1') 
```

取决于您如何定义*text*，您可能需要对 Regexp 进行一些更改才能进行正确的替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:08:01.947

听起来您实际上应该使用`sub`而不是`gsub`，因此它只会更改`<img>`您遇到的标签的第一个实例：

```
s.sub(/<img/, '<br /><img') 
```

# .net - .Net 如何在不降低性能的情况下检查数组边界？

> ID：15615353
> 
> 赞同：1
> 
> 时间：2013-03-25T12:47:36.860
> 
> 标签：.net, arrays

.Net 如何在不显着影响性能的情况下检查数组边界？

我想在 C 和 C++ 代码中使用这种技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:59:13.343

您可以使用多种技术来检查数组边界，同时最大限度地减少对性能的影响：

1.  通过进行无符号比较，您只需检查数组的上限（下限始终为 0）。

2.  一旦你检查了一个绑定到一个没有改变的变量的数组，你就不需要再次检查它了。例如，如果您有，即使数组被访问两次`a[i] = a[i] + 1`，您也只需要检查一次。`i`

3.  当您知道数组索引变量永远不会超出数组的边界时，您就不需要检查了。例如，如果您有`for (int i = 0; i < a.Length; i++) a[i] = 0;`，您就知道它`i`始终是数组的有效索引`a`，并且不需要检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:55:05.150

检查边界只是做一个简单的比较，它非常快，但它当然会对性能产生影响（因为它正在做其他事情）。每组之前都会发生这样的事情：

```
if (array.Length <= i)
    throw new IndexOutOfRangeException("..."); 
```

# javascript - 自定义数字输入

> ID：15615355
> 
> 赞同：2
> 
> 时间：2013-03-25T12:47:43.907
> 
> 标签：javascript, ruby-on-rails, user-interface, input

干杯! 我的前端不是很好，所以，设计师偷看，你知道如何实现类似这样的输入，我应该从什么开始？

![输入](../Images/39676f1f8aefd581e9660f85585f7d8c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:09:34.677

这是如何完成***的非常基本的示例。***当然，您需要更改样式并根据需要调整元素。不过这个想法应该是可以理解的。

*HTML：*

```
<div class="spin"><span>&ndash;</span><input value="0" /><span>+</span></div> 
```

*CSS：*

```
.spin {
    display: inline-block;
}
.spin span {
    display: inline-block;
    width: 20px;
    height: 22px;
    text-align: center;
    padding-top: 2px;
    background: #ff0;
    border: 1px solid #aaa;
    border-radius: 0 4px 4px 0;
    cursor: pointer;
}
.spin span:first-child {
    border-radius: 4px 0 0 4px;
}
.spin input {
    width: 40px;
    height: 20px;
    text-align: center;
    font-weight: bold;
} 
```

*JavaScript：*

```
var spins = document.getElementsByClassName("spin");
for (var i = 0, len = spins.length; i < len; i++) {
    var spin = spins[i],
        span = spin.getElementsByTagName("span"),
        input = spin.getElementsByTagName("input")[0];

    input.onchange = function() { input.value = +input.value || 0; };
    span[0].onclick = function() { input.value = Math.max(0, input.value - 1); };
    span[1].onclick = function() { input.value -= -1; };
} 
```

**演示：http:** [//jsfiddle.net/fPQvK/](http://jsfiddle.net/fPQvK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:51:57.807

尝试 html5[输入类型号](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_input_type_number)：

```
<input type="number"/> 
```

缺乏火狐支持:(

编辑：或按照 Jakub 的建议创建一个：

```
 <input type="text" id="numberInput" value="1"/>
 <input type="button" id="btnIncrement" value="increment" onclick="increment();" />
 <input type="button" id="btnDecrement" value="decrement" onclick="decrement();" />

function increment(){
    var input = document.getElementById('numberInput');
    input.value = parseInt(input.value) + 1;
}

function decrement(){
    var input = document.getElementById('numberInput');
    input.value = parseInt(input.value) - 1;
} 
```

见[小提琴](http://jsfiddle.net/ZwNkb/1/)

# android - 同一屏幕中的两个线性布局

> ID：15615358
> 
> 赞同：3
> 
> 时间：2013-03-25T12:47:53.640
> 
> 标签：android, android-linearlayout

嗨，我正在尝试为 Android 手机和平板电脑设计我的应用程序。所以我已经设计了它，但需要重新设计以适应不同屏幕的缩放目的。

![在此处输入图像描述](../Images/d30848c070c5a8d43a27ca113e865b29.png)

这是我想要的布局。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@color/white">

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:weightSum="2"
        android:orientation="horizontal" >

    <fragment
        android:id="@+id/map"
        android:layout_marginTop="5dp"
        android:layout_weight=".1"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        class="com.google.android.gms.maps.MapFragment"
         />

    <Button
        android:id="@+id/button3"
        android:layout_weight=".25"
        android:layout_marginLeft="34dp"
        android:layout_marginTop="10dp"
           android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:onClick="ClickTourismButton"
        android:text="@string/Tourism" />

    <Button
        android:id="@+id/button4"
        android:layout_weight=".25"
           android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_marginLeft="34dp"
        android:text="@string/Nearby" />
    <Button
        android:id="@+id/button2"
        android:layout_weight=".25"
        android:layout_marginLeft="34dp"
           android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:text="@string/Favourites" />
    <Button
        android:id="@+id/button1"
        android:layout_weight=".25"
          android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_marginLeft="34dp"  
        android:text="@string/Map" />

    </LinearLayout>   

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:weightSum="2"
        android:orientation="horizontal" >
    <TextView

        android:layout_marginLeft="10dp"
        android:layout_marginTop="5dp"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:textIsSelectable="true"      
        android:id="@+id/feedupdate1" />

    <ListView
        android:id="@android:id/list"
        android:background="@color/red"
        android:layout_weight="1"       
        android:layout_marginTop="5dp"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"/>

    <TextView
        android:id="@+id/empty"
        android:textIsSelectable="true"   
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"  
        android:layout_marginLeft="10dp"
         android:layout_marginTop="5dp"/>
    <TextView
        android:id="@+id/feedupdate"        
        android:layout_marginLeft="6dp"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_marginTop="430dp"
        android:textIsSelectable="true"/>
    <ListView

        android:id="@+id/list1"
        android:background="@color/blue"
        android:layout_weight="1"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_marginTop="430dp"
        android:layout_marginLeft="6dp" /> 

    </LinearLayout>
</RelativeLayout> 
```

当我运行应用程序时，两个线性布局相互重叠？或者上面看到的黑色矩形的地图片段占据了整个屏幕？？？我不知道我做错了什么，我浏览了几个教程，看起来是对的？

请需要帮助

谢谢

* * *

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:weightSum="2"
    android:background="@color/white">

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >

    <fragment
        android:id="@+id/map"
        android:layout_marginTop="5dp"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        class="com.google.android.gms.maps.MapFragment"
         />

    <Button
        android:id="@+id/button3"
        android:layout_marginLeft="34dp"
        android:layout_marginTop="10dp"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:onClick="ClickTourismButton"
        android:text="@string/Tourism" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_marginLeft="34dp"
        android:text="@string/Nearby" />
    <Button
        android:id="@+id/button2"
        android:layout_marginLeft="34dp"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:text="@string/Favourites" />
    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content" 
        android:layout_height="0dp"
        android:layout_marginLeft="34dp"  
        android:text="@string/Map" />

    </LinearLayout>   

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >
    <TextView

        android:layout_marginLeft="10dp"
        android:layout_marginTop="5dp"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:textIsSelectable="true"      
        android:id="@+id/feedupdate1" />

    <ListView
        android:id="@android:id/list"
        android:background="@color/red"    
        android:layout_marginTop="5dp"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"/>

    <TextView
        android:id="@+id/empty"
        android:textIsSelectable="true"   
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"  
        android:layout_marginLeft="10dp"
         android:layout_marginTop="5dp"/>
    <TextView
        android:id="@+id/feedupdate"        
        android:layout_marginLeft="6dp"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_marginTop="430dp"
        android:textIsSelectable="true"/>
    <ListView

        android:id="@+id/list1"
        android:background="@color/blue"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_marginTop="430dp"
        android:layout_marginLeft="6dp" /> 

    </LinearLayout>
</LinearLayout> 
```

![在此处输入图像描述](../Images/7c60cd02430be6233f831f33cde8b0a2.png)

一个组件占据每一侧？？它分为两部分，但地图片段占据了一侧，而第一个列表视图占据了另一侧？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T12:56:39.560

1.  将两个子 LinearLayouts 的方向更改为`VERTICAL`

2.  对于顶部删除 Relative 并使用具有方向的 LinearLayout`HORIZONTAL` 并具有`weightSum=2`

3.  现在在两个子线性布局视图中给出`layout_width="0dp"` 和`layout_weight="1"`

* * *

为您提供的示例 XML：http: [//pastebin.com/2MCBN9qk](http://pastebin.com/2MCBN9qk)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T12:56:45.137

尝试使用 LinearLayout 更改 RelativeLayout，请查看此[链接](https://stackoverflow.com/questions/4905370/what-are-the-differences-between-linearlayout-relativelayout-and-absolutelayou)以更深入地了解不同类型的布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-28T06:32:33.743

Try using weightSum and add your linear layouts inside a Relative layout for better positioning.

# android - Facebook SDK 3.0 Android - 缺少令牌

> ID：15615362
> 
> 赞同：2
> 
> 时间：2013-03-25T12:48:13.130
> 
> 标签：android, facebook, facebook-android-sdk

我正在尝试在我的应用程序中使用 facebook 身份验证，但由于令牌丢失，我无法登录。在 LogCat 我有一个循环：“[Tag]System.out [Text]doLogin:”。这发生在 Facebook 对话框之前，当它出现时，我单击“确定”但没有任何反应。

这是我的代码：

```
private SharedPreferences.Editor loginPrefsEditor;
private Session.StatusCallback statusCallback = new SessionStatusCallback();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fb_auth);
    choosePseudoButton = (Button) findViewById(R.id.buttonChoosePseudoFb);
    progressBarFb = (ProgressBar) findViewById(R.id.progressBarFbLoad);
    textViewFbInfo = (TextView) findViewById(R.id.currentInfoFb);
    editTextFbPseudo = (EditText) findViewById(R.id.editTextPseudoFb);
    /*
     * Get existing access_token if any
     */
    mPrefs = getPreferences(MODE_PRIVATE);

    // start Facebook Login
    Session.openActiveSession(this, true, new Session.StatusCallback() {
        public void call(final Session session, SessionState state, Exception exception) {
            if (session.isOpened()) {
                Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {
                    public void onCompleted(GraphUser user, Response response) {
                        if (user != null) {
                            System.out.println("onCreate");  
                            fbToken = session.getAccessToken();
                            SharedPreferences.Editor editor = mPrefs.edit();
                            editor.putString("access_token", fbToken);
                            JSONRequest jr = (JSONRequest) new JSONRequest().execute();

                        }
                    }
                });
            }
            else {
                doLogin();
            }
        }
    });
}

private void doLogin() {
    Session session = Session.getActiveSession();
    if (!session.isOpened() && !session.isClosed()) {
        session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
    } else {
        Session.openActiveSession(this, true, statusCallback);
    }
    fbToken = session.getAccessToken();
    System.out.println("doLogin: "+fbToken);
    JSONRequest jr = (JSONRequest) new JSONRequest().execute();
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
}

private void updateView() {
    Session session = Session.getActiveSession();
    if (session.isOpened()) {
        fbToken = session.getAccessToken();
        System.out.println("updateView: "+fbToken);
        JSONRequest jr = (JSONRequest) new JSONRequest().execute();
    } 
    else {
        doLogin();
    }
}

private class SessionStatusCallback implements Session.StatusCallback {
    public void call(Session session, SessionState state, Exception exception) {
        // Respond to session state changes, ex: updating the view
        if( session.isOpened() ){
            Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                public void onCompleted(GraphUser user, Response response) {
                }
            });
        }
        updateView();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:50:52.470

需要注意的几点：

会话打开是异步发生的，这意味着当您调用 Session.openActiveSession 时，它不会（总是）立即打开会话（它必须调用另一个活动，等待用户输入等）。所以你的线

```
fbToken = session.getAccessToken(); 
```

几乎总是返回 null。

其次，在 Session 进入 OPENED 状态之前，它可能处于几种状态，因此在 SessionStatusCallback 中，您可能应该将 updateView() 调用移到 if(session.isOpened()) 检查中。

最后，您在 onCreate 方法中调用 Session.openActiveSession ，并且在该回调中，如果会话未打开，则始终调用 doLogin() 。但是就像我之前说的，会话在它打开之前可以转换到多个状态，所以你实际上是在多次调用 doLogin。删除该 doLogin() 调用。

# c++ - 将 iOS 应用程序与 libstdc++ 和 libc++ 链接

> ID：15615364
> 
> 赞同：8
> 
> 时间：2013-03-25T12:48:18.500
> 
> 标签：c++, ios, xcode, c++11, linker

用例：我想使用使用 libstdc++（无法更改）的第 3 方静态库，因此我必须将我的应用程序与 libstdc++ 链接。现在，如果我想在自己的代码中使用 C++11 功能，我必须在 Xcode 中选择 libc++ 并另外链接 libstdc++ 以满足静态库。

我的问题是，即使我在“构建设置”中选择了 libc++ 并将“-lstdc++”添加到“其他链接器标志”（也通过“构建阶段 > 将二进制文件与库链接”进行了尝试），但我得到了后者的链接器错误，即第 3 方库引用的 libstdc++ 函数/类。

如何配置项目以链接两个 C++ 标准库？理论上应该是可能的，因为 libc++ 将在它自己的内联命名空间`std::__1`中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-30T15:46:52.223

我刚刚遇到了这个问题，我的解决方案是，而不是添加`-lstdc++`其他标志，你把`/usr/lib/libstdc++.dylib`.

我的预感是，当 xcode/clang`-std=c++`设置时，需要显式加载旧的 .dylib。

# python - 基于自定义字段的搜索和更新 - Jira Python

> ID：15615376
> 
> 赞同：0
> 
> 时间：2013-03-25T12:49:06.597
> 
> 标签：python, jira, jira-rest-java-api

我有一个名为“**详细状态**”的自定义字段，类型为*文本字段（< 255 个字符）*，自定义字段 ID 值为 10000。

我正在编写一个 JIRA Python 脚本来更新该自定义字段的值，该自定义字段具有该字段的特定值。

假设我想用另一个名为“*新值”的值来更新自定义字段值为“**测试值*”的所有问题。

 *我刚刚开始使用 JIRA Python 脚本，所以根据我在[文档](http://jira-python.readthedocs.org)中阅读的内容，这就是我的代码现在的样子。

```
from jira.client import JIRA
jira_options={'server': 'http://localhost:8080'}
jira=JIRA(options=jira_options,basic_auth=('usrname','pwd'))
for issue in jira.search_issues(' cf[10000] = "Test Value" ', maxResults=3):
    issue.update(fields={'Detailed Status': 'New Value'}) 
```

但是，我收到以下错误。

```
 File "test.py", line 10, in <module>
    for issue in jira.search_issues(' cf[10000] = "Test Value" ', maxResults=3):

  File "C:\Python27\lib\site-packages\jira\client.py", line 1000, in search_issues
    resource = self._get_json('search', search_params)
  File "C:\Python27\lib\site-packages\jira\client.py", line 1396, in _get_json
    raise_on_error(r)
  File "C:\Python27\lib\site-packages\jira\exceptions.py", line 36, in raise_on_
error
    raise JIRAError(r.status_code, error, r.url)
jira.exceptions.JIRAError: HTTP 400: "Field 'cf[10000]' is not searchable, it is
 only sortable."
http://localhost:8080/rest/api/2/search?jql=+cf%5B10000%5D+%3D+%22Test+Value%22+
&startAt=0&maxResults=3 
```

我也尝试过，`cf[10000] ~ 'Test Value'`但它给出了与上面相同的错误。

你能告诉我我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:18:34.517

当您定义自定义字段时，您是否为它启用了搜索器？根据错误消息，这可能是问题所在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:26:59.483

根据上面@mdoar 给出的答案，在我为自定义字段启用搜索器之后，只需添加对我有用的代码。

```
from jira.client import JIRA
jira_options={'server': 'http://localhost:8080'}
jira=JIRA(options=jira_options,basic_auth=('usrname','pwd'))

for issue in jira.search_issues(' cf[10000] ~ "Test Value" '):
    issue.update(fields={'customfield_10000': 'New value'}) 
```*

# python - 对嵌套字典python 2.7进行排序，按最深值，返回键元组

> ID：15615384
> 
> 赞同：1
> 
> 时间：2013-03-25T12:49:43.867
> 
> 标签：python, sorting, dictionary, python-2.7

我有一本这样的字典：

```
d = {11:{'a':2.1, 'b':2.2,'c':3.0},
     12:{'b':4.5,'g':1.2},
     4:{'g':5.6,'a':4.5,'f':0.5,'r':1.3}
} 
```

我想要得到的是：

```
 [(4,'g'),(4,'a'),(12,'b'),(11,'c'),(11,'b'),(11,'a'),(4,'r'),(12,'g'),(4,'f')] 
```

所以我想做的是按降序对值进行排序并获取实现此顺序的字典键。

我想使用`key = lambda x, y: d[x][y]`一些东西，但我不知道如何返回我想要的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:54:46.270

这应该这样做：

```
sorted(((k1, k2) for k1 in d for k2 in d[k1]), key=lambda t: d[t[0]][t[1]], reverse=True) 
```

生成器表达式首先列出值的所有键“路径”，然后对值进行排序，颠倒。

演示：

```
>>> sorted(((k1, k2) for k1 in d for k2 in d[k1]), key=lambda t: d[t[0]][t[1]], reverse=True)
[(4, 'g'), (4, 'a'), (12, 'b'), (11, 'c'), (11, 'b'), (11, 'a'), (4, 'r'), (12, 'g'), (4, 'f')] 
```

# jsf - 如何将 JSF 页面组织到目录中

> ID：15615388
> 
> 赞同：0
> 
> 时间：2013-03-25T12:50:03.280
> 
> 标签：jsf, jsf-2

我有几个 JSF 页面，它们被分类为不同的类别，但放在一个目录中。这使它们难以管理。我很感兴趣什么是最好的做法？例如，我可以按类别将 JSF 页面插入到多个目录中，但是当我打开服务器地址只看到没有目录路径的 JSF 页面时？我可以隐藏目录路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:23:40.800

如果您可以使用[Prettyfaces](http://ocpsoft.org/prettyfaces/)，这将非常简单，并且您的 URL 将非常漂亮（可自定义）。否则，我认为使用过滤器可以隐藏目录。但是，我真的推荐 Prettyfaces，它非常简单且非常可定制。

# asp.net - 为 MVC3 和 MVC4 解决方案重用共享项目

> ID：15615392
> 
> 赞同：2
> 
> 时间：2013-03-25T12:50:10.120
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我们有使用 MVC3 的 Web 应用程序，它们都与 HtmlHelper Extensions 共享一个库。

有没有办法让这个必须引用 MVC 程序集的共享库也可以与 MVC4 应用程序一起使用，而无需转换现有的并且不复制共享库？

我尝试将共享库上的 MVC 引用设置为 SpecificVersion=false，但随后切换到 MVC4，MVC3 项目无法再使用它。

每当我尝试并排使用 MVC3 和 MVC4 程序集时，都会收到未处理的 win32 异常。

任何想法如何解决这个问题，或者是完整的 MVC4 还是留在 MVC3 的唯一方法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:53:23.633

您可以在 ASP.NET MVC 4 应用程序的 web.config 中使用绑定重定向：

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

现在您可以在您的 ASP.NET MVC 4 应用程序中引用包含您的自定义帮助程序（这又取决于 ASP.NET MVC 3）的程序集。

# ios - 为什么 relaodData 调用 viewDidLoad

> ID：15615395
> 
> 赞同：1
> 
> 时间：2013-03-25T12:50:13.817
> 
> 标签：ios, objective-c, uitableview

我正在维护一个由其他人开发的应用程序，并且在调试它时出现了一个奇怪的行为。当从另一个类分配一个视图控制器对象时，它会调用`viewDidLoad`，在`viewDidLoad`，我调用另一个方法，我在其中填充一个数组：

```
- (void)viewDidLoad
{
      [super viewDidLoad];
      [self fillArray];
}

-(void)fillArray{
    arrayProduct = [[NSMutableArray alloc] init];
   //fill in the array from server
   [self.objTableView reloadData];//refresh the table view 
} 
```

奇怪的行为是，一旦`[self.objTableView reloadData];`执行语句，`viewDidLoad`就会再次调用。为什么会这样？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:54:50.130

您可以通过使用标志来解决此问题。

在调用方法之前声明`BOOL`变量并使其为真。`reloadData`并`viewDidLoad`检查变量是否为真，然后不要初始化你的数组。

# c# - 两个表之间的多重关系

> ID：15615399
> 
> 赞同：0
> 
> 时间：2013-03-25T12:50:26.700
> 
> 标签：c#, ef-code-first

我有两个类要存储在 EF Code First 中。建筑物有一个维护者，以及在那里工作的人员列表。维护人员不必在大楼内工作。

在我第一次尝试时，我刚刚

```
public class Person
    {
        public virtual Guid Id { get; set; }
        public virtual string Name { get; set; }

    } 
```

和

```
public class Building
{
    public virtual  Guid Id { get; set; }
    public virtual List<Person> WorksHere { get; set; }

    public virtual Person MaintainedBy { get; set; }
    public virtual String Address { get; set; }
} 
```

这给了我两个带有基本属性的表，以及关于 People 的 Building_Id 和关于 Buildings 的 MaintainedBy_Id。

当我运行测试程序时

```
 using (TestContext tc = new TestContext())
        {
            Person m1 = tc.persons.Create();
            m1.Name = "maintainB1";
            m1.Id = Guid.NewGuid();

            Person m2 = tc.persons.Create();
            m2.Name = "maintainB2";
            m2.Id = Guid.NewGuid();

            Building b1 = tc.buildings.Create();
            b1.Address = "building1";
            b1.Id = Guid.NewGuid();
            tc.buildings.Add(b1);

            Building b2 = tc.buildings.Create();
            b2.Address = "building1";
            b2.Id = Guid.NewGuid();
            tc.buildings.Add(b2);

            b1.MaintainedBy = m1;
            b2.MaintainedBy = m2;

            if (b1.WorksHere == null) b1.WorksHere = new List<Person>();
            if (b2.WorksHere == null) b2.WorksHere = new List<Person>();

            b1.WorksHere.AddRange(new List<String>() { "e11", "e12", "e13" }.Select(s =>
            {
                Person p = new Person();
                p.Id = Guid.NewGuid();
                p.Name = s;
                return p;
            }));

            b2.WorksHere.AddRange(new List<String>() { "e21", "e22", "e23" }.Select(s =>
            {
                Person p = new Person();
                p.Id = Guid.NewGuid();
                p.Name = s;
                return p;
            }));

            b1.WorksHere.Add(m2);
            b2.WorksHere.Add(m1);
            tc.SaveChanges();
        }

    } 
```

我收到一个异常：“保存不为其关系公开外键属性的实体时发生错误。EntityEntries 属性将返回 null，因为无法将单个实体标识为异常源。保存时处理异常可以是通过在实体类型中公开外键属性变得更容易。有关详细信息，请参阅 InnerException。

带有内部异常：“无法确定依赖操作的有效排序。由于外键约束、模型要求或存储生成的值，可能存在依赖关系。”

我不想在我的 Poco 上公开更多属性，因为它们是 Poco 的，我对这些属性没有用处。如果我必须满足 Code First 模型生成，那就必须这样做，但如果可能的话，我希望在映射类中远离我的 Poco。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:14:18.177

因此，出现此问题是因为您的实体之间存在循环关系，这导致 EF 在尝试在一次调用中解决所有插入时放弃`SaveChanges`，并引发您看到的异常。

为了理解为什么它不能处理这种情况，让我们想想当试图保存实体时数据库中发生了什么。

使用您的代码，您可以通过在调用之前注释掉最后一行来使其运行没有错误`SaveChanges`，但是人员`m1`将不会在 building 中工作`b2`，所以这不是您想要的。

```
b1.WorksHere.Add(m2);
//b2.WorksHere.Add(m1); <-- When this is removed it works.. 
tc.SaveChanges(); 
```

但是，EF 可以通过在数据库中创建以下插入来运行它：

1.  插入人`m1`。将建筑物表的 FK 保留为空，因为`m1`无处可工作。
2.  插入建筑物'b1'。使用 'm1' 的 id 作为 FK，因为`m1`维护`b1`.
3.  插入人`m2`。使用 id of`b1`作为 FK，因为`b1`它是`m2`有效的。
4.  插入建筑物`b2`。使用 id`m2`作为 FK，因为`m2`维护`b2`.

现在很容易看出为什么当你包含使`m1`工作的行时它不起作用`b2`。
在上面的第一个插入中，EF 无法将 FK 保留为空，因为您告诉它它需要指向一个建筑物，但该建筑物尚未插入，因此它无法创建 FK 指向回到它。
当实体具有循环依赖关系时，这在 EF 中始终是一个问题。当两者相互依赖时，不能在一次提交中创建插入。

您的问题的解决方案是简单地调用两次`SaveChanges`. 如果你在`m1`工作之前调用它`b2`，然后再调用它，你会得到正确的行为。

```
b1.WorksHere.Add(m2);
tc.SaveChanges(); <-- Create inserts. FK in m1 is null because he works nowhere yet.
b2.WorksHere.Add(m1);
tc.SaveChanges(); <-- Updates FK in m1 to point to b2. 
```

**实体框架中的未来支持**
似乎这个问题将在 EF 的未来版本中得到解决。

可以合理地期望 ORM 应该能够处理插入父级、插入子级，然后使用新创建的子级 ID 更新父级。

您可以阅读有关它的更多信息并投票支持要在[Microsoft Connect](https://connect.microsoft.com/VisualStudio/feedback/details/633296/support-for-creation-of-entities-with-circular-references-in-entity-framework)上实施的功能。

[EF CodePlex 网站](http://entityframework.codeplex.com/workitem/142)上也有一些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:25:10.257

尝试映射关系。在从 DbContext 派生的上下文中，覆盖 OnModelCreating 方法：

```
protected override void OnModelCreating(DbModelBuilder mb)
{
    mb.Entity<Building>()
        .HasMany(m => m.LivesHere)
        .WithRequired()
        .Map(n => n.MapKey("Home_Id"));
} 
```

我也会尝试使用 [Key] 来表示实体中的主键，但我不确定你是否必须这样做。

像这样：

```
public class Building
{
    [Key]
    public virtual  Guid Id { get; set; }
    public virtual List<Person> WorksHere { get; set; }

    public virtual Person MaintainedBy { get; set; }
    public virtual String Address { get; set; }
} 
```

我现在不能尝试这个，但我希望它会有所帮助。

# jasper-reports - jasper idesigner中的条形图在预览中打印两次？

> ID：15615400
> 
> 赞同：0
> 
> 时间：2013-03-25T12:50:27.713
> 
> 标签：jasper-reports

我在 idesigner 中配置了条形图，但是当我单击预览时，它显示了两次。知道为什么会发生这种情况。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:34:18.127

尝试将您的图形组件放入汇总带，因为详细带重复数据集中每一行的记录。

我想你已经把图表放在了细节带中，如果你真的需要把它放在细节带中，你可以尝试将表格属性“printWhenExpression”设置为 $V{REPORT_COUNT} == 1

要设置属性以在摘要或详细带中制作图表，您可以在 XML 代码中进行编辑，也可以通过设计器添加带和移动图表。

# tinyos - TinyOS 中断处理

> ID：15615401
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:50:31.277
> 
> 标签：tinyos, nesc

请给我一个建议：

我想获得从 mote 发送信号的时间（我想在 SFD 引脚从 1 变为 0 时产生中断）我没有找到解决方案，但我找到了这个组件：组件： tos.chips.cc2420_tkn154.CC2420TransmitP

它提供了 cc2420Tx，这似乎给了我时间需要。但我无法使用它，因为默认情况下它使用 cc2420 文件夹中的组件，而不是 cc2420_tkn154 文件夹中的组件。

主要想法是我想测量从发送信号到接收确认的时间。我需要微秒精度。所有这些都将帮助我获得两个微粒之间的距离。

任何想法都会有所帮助。我到处搜索：论坛、tinyos 文档、示例……

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T10:23:01.857

我不知道你想得到多低的级别，但是如果你有一个计时器，在 nesC 中你可以在每次计时器触发时获取本地时间：

```
uint32_t timestamp;

event void myTimer.fired() {

    timestamp = call myTimer.getNow();
    printf("Timestamp: %ld \n", timestamp);
} 
```

如果您没有计时器，则可以使用组件 LocalTimeMilliC。将此添加到您的配置文件中：

```
components LocalTimeMilliC;
TestC.LocalTime -> LocalTimeMilliC; 
```

...在实现的模块部分：

```
uses interface LocalTime<TMilli>; 
```

...在代码中：

```
timestamp = call LocalTime.get(); 
```

但是，当您重置节点时，每个节点的本地时间将重新开始。您将不得不同步不同的时间。如果要计算微粒之间的距离，这可能不是最好的方法。从[本文](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=5434802)的摘要中引用：

> 部署的传感器节点的位置可以通过 TOA、TDOA 或接收信号强度 (RSS) 测量来找到。

对于[RSSI ，在](http://en.wikipedia.org/wiki/Received_signal_strength_indication)*tinyos-2.1.1/apps/tutorials*文件夹中有一个演示。

# java - 如何使用 Android 手机的摄像头和 OpenCV 最好地检测不同的 LED 颜色？

> ID：15615407
> 
> 赞同：5
> 
> 时间：2013-03-25T12:50:48.220
> 
> 标签：java, android, opencv, colors, color-space

我正在尝试在 Android 手机上使用 OpenCV 识别和区分黑色背景下 LED 的颜色，但目前正在苦苦挣扎。我迄今为止的调查指向两个不同的问题：

1.  使用 OpenCV，相机似乎默认为自动白平衡，这使得难以区分某些颜色。使用本机 Android 相机，在白平衡设置为“多云”的情况下，可以生成最佳图像。
2.  OpenCV 提供 RGB 颜色空间中的图像，但 RGB 与人类感知的颜色之间的距离不匹配，这意味着欧几里德 RGB 距离度量不是最佳解决方案（请参阅[如何比较两种颜色](https://stackoverflow.com/questions/9018016/how-to-compare-two-colors)）。

因此，我有三个问题：

1.  Android Java 或 OpenCV 中有没有办法设置相机的白平衡，以便影响 OpenCV 返回的结果图像？
2.  如果没有，是否有可用的算法（最好是在 Java 中）来修改 OpenCV 图像的白平衡？
3.  是否有可用的算法（同样，最好是在 Java 中）将 RGB 颜色转换为可以更好地匹配人类感知的颜色之间距离的替代颜色空间？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:18:04.653

我对问题 1 的回答（意味着我不需要对问题 2 的回答）是使用 Using the OpenCV Tutorial 3 code (Camera Control)（请参阅[OpenCV4Android 示例](http://opencv.org/platforms/android/opencv4android-samples.html)）并修改颜色效果方法以允许设置白平衡：

```
public List<String> getWhiteBalanceList() {
    return mCamera.getParameters().getSupportedWhiteBalance();
}

public boolean isWhiteBalanceSupported() {
    return (mCamera.getParameters().getWhiteBalance() != null);
}

public String getWhiteBalance() {
    return mCamera.getParameters().getWhiteBalance();
}

public void setWhiteBalance(String whiteBalance) {
    Camera.Parameters params = mCamera.getParameters();
    params.setWhiteBalance(whiteBalance);
    mCamera.setParameters(params);
} 
```

一旦我知道这行得通，我就可以向我的主线程添加一个调用来设置正确的白平衡：

```
mOpenCvCameraView.setWhiteBalance(Parameters.WHITE_BALANCE_CLOUDY_DAYLIGHT); 
```

在回答问题 3 时，我使用了[Color Logic Algorithm](https://stackoverflow.com/questions/2103368/color-logic-algorithm)中的 Java 答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:34:57.867

为了从黑色背景中识别不同的 LED 颜色，我提出以下建议：

1.  首先，使用 OpenCV 的[cvtColor 函数](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html)将 RGB 转换为 HSV 颜色空间。这里 HSV 代表 Hue（如红色、绿色、黄色、蓝色等）、Saturation（颜色的饱和度）、Value（亮度）。转换每个 RGB 值后，您将获得 HSV 值。像 RGB HSV 一样具有三个通道 H、S 和 V。

2.  其次，由于您对 LED 的颜色感兴趣，请仅分析色相分量来确定 LED 的颜色。例如，您可以对 Hue 通道进行阈值处理，并确定图像的哪个部分包含从 10 到 25 的色调，等等……绘制/打印阈值图像以检查您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:03:41.773

1.  我认为这与相机的设备驱动程序是否可以通过Android的Camera API控制它有关。
2.  这对您很有用：[检测颜色](http://myopencv.wordpress.com/2009/06/13/detecting-colors-using-rgb-color-space/)

我喜欢电子产品，所以一个简单的光敏电阻无需任何代码就可以做到这一点:)。

# ios - UICollectionView 单元格：将 cell.selectedBackgroundView 放在前面是否安全？

> ID：15615408
> 
> 赞同：1
> 
> 时间：2013-03-25T12:50:48.673
> 
> 标签：ios, cell, subview, uicollectionview, uicollectionviewcell

我刚刚开始实现多选 UICollectionView。以下是否会被视为“安全”代码（因为我认为它被称为 BackgroundView 而不是 AccessoryView 等）？我想节省一些精力，我打算跟踪索引路径中的选定项目，以便通过数组进一步使用。

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath 
{
 //....

 cell.selectedBackgroundView = someView_With_A_Checkmark_Image;
 [cell bringSubviewToFront:cell.selectedBackgroundView];

 //...
return cell;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:37:34.100

安全吗？？雅当然不会导致任何错误。如果你的backgroundView在单元格的contentView之上，那这个意义何在`contentView`？？

**集合视图单元格结构**
![在此处输入图像描述](../Images/8b207610934eae61a3d92c0c189a8c98.png)

如果你在collection view中选择了一个item，collectionView会切换`BackgroundView`和`Selected background view`。因此，您可以做的是在配置自定义单元格时将有效视图作为背景视图和选定的背景视图，或更改**didSelectItem**中单元格的任何属性以区分选择。那更好。

然后不再需要使用单独的数组来跟踪选择。**[self.collectionView indexPathsForSelectedItems]**将在任何时间点为您提供所选项目的路径

# c++ - 编译器拒绝两个相同的模板特化

> ID：15615410
> 
> 赞同：1
> 
> 时间：2013-03-25T12:50:57.237
> 
> 标签：c++, templates, stl, typedef, template-specialization

我正在使用两个辅助结构来处理智能指针和向量

```
template<typename T>
struct Pointer {
    typedef shared_ptr<T> type;
};

template<typename T>
struct Vector {
    typedef vector<T, allocator<T>> type;
}; 
```

在这种情况下很明显，表达式

```
is_same<
    vector<
        shared_ptr<T>,
        allocator<shared_ptr<T>>>,
    Vector<
        Pointer<T>::type>::type>
::value 
```

产生真实的。但是，我现在有一个模板化函数（实际上是一个操作符），它在使用`Vector<Pointer<T>::type>::type`或通常处理时会有所不同`vector`：

```
// (1) General version
template<typename T>
Foo& operator&(T& object);

// (2a) Specialized version
template<typename T>
Foo& operator&(vector<shared_ptr<T>, allocator<shared_ptr<T>>>& object);

// (2b) Specialized version which does not work
template<typename T>
Foo& operator&(typename Vector<typename Pointer<T>::type>::type& object); 
```

在我的代码中有 (2a) 时调用此运算符按预期工作。但是，当我将 (2a) 替换为 (2b) 时，编译器/链接器会尝试将调用与 (1) 匹配，这对我来说会产生链接错误，因为 (1) 对向量没有定义/有效。为什么编译器对 (2a) 和 (2b) 的处理方式不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T12:55:18.207

因为编译器无法推断（2b）中的类型。问题是它可以匹配

```
vector<shared_ptr<T>,allocator<shared_ptr<T>>> 
```

因为那是要匹配的“只是一种类型”。对于任何给定的参数，它只检查是否存在 a`T`并且类型匹配。编译器只需要测试一个选项。为了

```
typename Vector<typename Pointer<T>::type>::type 
```

编译器将不得不尝试 all `T`for with`Vector<...>::type`会产生所需的类型，但它不会这样做。如果可能的话，这种分析将比仅匹配直接类型复杂得多。

# mobile - 我们需要与手机通信的微控制器驱动程序吗？

> ID：15615412
> 
> 赞同：0
> 
> 时间：2013-03-25T12:51:04.803
> 
> 标签：mobile, embedded, microcontroller, at-command

我打算构建一个微控制器（一个开关将连接到包含这个微控制器的嵌入式系统），这个嵌入式系统将通过一根电线连接到手机。我的目标是当用户按下嵌入式系统上的开关时，通过连接的移动电话网络拨打特定号码。（计划使用AT命令进行拨号）。经过广泛搜索，我发现可以执行上述任务。我对此有一些问题：

a) 我们是否必须在微控制器上安装任何驱动程序才能与手机通信（用于发送 AT 命令），即，如果我们简单地在微控制器中编写相关的 AT 命令（用 C++）就足够了吗？

b) 许多人使用 F-bus 协议来实现上述目标。是否有任何其他类似的通用协议可以帮助与所有手机进行通信（三星、诺基亚、索尼..）

我也广泛阅读了SO。但是，我没有发现任何关于驱动程序的问题。我将不胜感激任何帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:33:48.973

驱动程序只不过是一种允许您的系统与其他设备交互的软件，并且通常与操作系统相关联（驱动程序可能为您的通信提供抽象层）。您是否打算使用操作系统？

无论如何，很明显，如果您想与另一台设备通信，则需要软件来完成。问题是您是自己编写还是获得“现成”的解决方案。

在许多情况下，特别是当设备使用专有通信协议时，您别无选择，只能让驱动程序与之通信，而这很可能需要您拥有操作系统。

如果您只需要蜂窝通信，那么可以使用更简单的解决方案（特别是如果您打算将您的项目变成产品）。搜索“嵌入式调制解调器”或 M2M 解决方案。您可以使用 RS232 连接许多可用的调制解调器，并且可以直接发送 AT 命令。Telit 和 Multitech 是我合作过的两家供应商，并且非常易于交互。

# spring - 验收测试期间的 BeanCreationException

> ID：15615415
> 
> 赞同：0
> 
> 时间：2013-03-25T12:51:15.263
> 
> 标签：spring, spring-security, javabeans, jbehave

我使用 Spring Security 进行身份验证。我修改了`@Page`定义哪种类型的用户可以访问页面的注释。

在那之后，在我的验收测试中，我开始出现以下错误：

```
public void login(@Named("email") String email, @Named("password") String password) {
    fillUpLoginForm(email, password);
    waitForElement(MosquitoElements.MainNavigationBar.LOGOUT);
    securityService.login(email, password); // authenticates user in test environment too
} 
```

我发现这里有问题：

```
 UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(email, password);
    getSecurityContext().setAuthentication(authenticationManager.authenticate(token)); 
```

什么会导致问题？

错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'scopedTarget.securityContext': Scope 'session' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request. 
```

注释的变化：

前

```
boolean requiresAdminPrivileges() default false; 
```

后

```
Authorities[] requiredAuthorities(); 
```

在应用程序中一切正常，只有测试有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:37:51.437

尝试在测试的应用程序上下文中模拟会话范围：

```
<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
    <property name="scopes">
    <map>
        <entry key="session">
            <bean class="org.springframework.context.support.SimpleThreadScope"/>
        </entry>
    </map>
    </property>
</bean> 
```

# sql - PostgreSQL LEFT OUTER JOIN 查询语法

> ID：15615419
> 
> 赞同：5
> 
> 时间：2013-03-25T12:51:25.610
> 
> 标签：sql, postgresql, left-join, cross-join

可以说我有一个`table1`：

```
 id      name
-------------
  1       "one"
  2       "two"
  3       "three" 
```

第一个`table2`带有外键的a：

```
id    tbl1_fk    option   value
-------------------------------
 1      1         1        1
 2      2         1        1
 3      1         2        1
 4      3         2        1 
```

现在我想有一个查询结果：

```
table1.id | table1.name | option | value
-------------------------------------
      1       "one"        1       1
      2       "two"        1       1
      3       "three"    
      1       "one"        2       1
      2       "two"    
      3       "three"      2       1 
```

我该如何做到这一点？

我已经尝试过：

```
SELECT
  table1.id,
  table1.name,
  table2.option,
  table2.value
FROM table1 AS table1
LEFT outer JOIN table2 AS table2 ON table1.id = table2.tbl1fk 
```

但结果似乎省略了空值：

```
1    "one"    1   1
2    "two"    1   1
1    "one"    2   1
3    "three"  2   1 
```

已解决：感谢 Mahmoud Gamal：（加上 GROUP BY）已解决此查询

```
SELECT 
  t1.id,
  t1.name,
  t2.option,
  t2.value
FROM
(
  SELECT t1.id, t1.name, t2.option
  FROM table1 AS t1
  CROSS JOIN table2 AS t2
) AS t1
LEFT JOIN table2 AS t2  ON t1.id = t2.tbl1fk
                       AND t1.option = t2.option
group by t1.id, t1.name, t2.option, t2.value
ORDER BY t1.id, t1.name 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T12:53:21.977

您必须使用从第一个表和第二个表`CROSS JOIN`中获取所有可能的组合。然后将这些与第二张表结合起来。就像是：`name``option``LEFT JOIN`

```
SELECT 
  t1.id,
  t1.name,
  t2.option,
  t2.value
FROM
(
  SELECT t1.id, t1.name, t2.option
  FROM table1 AS t1
  CROSS JOIN table2 AS t2
) AS t1
LEFT JOIN table2 AS t2  ON t1.id = t2.tbl1_fk
                       AND t1.option = t2.option 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!10/79d21/12)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T19:38:43.433

### 简单版：选项=组

它没有在 Q 中指定，但似乎选项应该以某种方式定义一个组。在这种情况下，查询可以简单地是：

```
SELECT t1.id, t1.name, t2.option, t2.value
FROM  (SELECT generate_series(1, max(option)) AS option FROM table2) o
CROSS  JOIN table1 t1
LEFT   JOIN table2 t2 ON t2.option = o.option AND t2.tbl1_fk = t1.id
ORDER  BY o.option, t1.id; 
```

或者，如果选项没有按顺序编号，则从 开始`1`：

```
...
FROM  (SELECT DISTINCT option FROM table2) o
... 
```

回报：

```
 id | name  | option | value
----+-------+--------+-------
  1 | one   |      1 |     1
  2 | two   |      1 |     1
  3 | three |        |
  1 | one   |      2 |     1
  2 | two   |        |
  3 | three |      2 |     1 
```

*   *更快更*干净*，*避免大`CROSS JOIN`的和大的`GROUP BY`。
*   您将获得每组带有组号 ( )的*不同行。*`grp`
*   需要 Postgres 8.4+。

### 更复杂：由行序列指示的组

```
WITH t2 AS (
   SELECT *, count(step OR NULL) OVER (ORDER BY id) AS grp
   FROM (
      SELECT *, lag(tbl1_fk, 1, 2147483647) OVER (ORDER BY id) >= tbl1_fk AS step
      FROM table2
      ) x
   )
SELECT g.grp, t1.id, t1.name, t2.option, t2.value
FROM  (SELECT generate_series(1, max(grp)) AS grp FROM t2) g
CROSS  JOIN table1 t1
LEFT   JOIN        t2 ON t2.grp = g.grp AND t2.tbl1_fk = t1.id
ORDER  BY g.grp, t1.id; 
```

结果：

```
 grp | id | name  | option | value
-----+----+-------+--------+-------
   1 |  1 | one   |      1 |     1
   1 |  2 | two   |      1 |     1
   1 |  3 | three |        |
   2 |  1 | one   |      2 |     1
   2 |  2 | two   |        |
   2 |  3 | three |      2 |     1 
```

[**-> SQLfiddle**两者都适用。](http://www.sqlfiddle.com/#!12/d924d/5)

## 如何？

解释复杂的版本...

*   每组都以`tbl1_fk`<= 最后一组开始。[我用窗口函数`lag()`](http://www.postgresql.org/docs/current/interactive/functions-window.html)检查这个。为了覆盖第一行的极端情况（没有前一行），我提供了[最大可能的整数`2147483647`](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html)作为`lag()`.

*   使用`count()`聚合窗口函数，我将运行计数添加到每一行，有效地形成组号`grp`。

*   我可以为每个组获取一个实例：

    ```
    (SELECT DISTINCT grp FROM t2) g 
    ```

    但是，获得最大值并[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html)为减少的`CROSS JOIN`.

*   这`CROSS JOIN`正好产生了我们需要的行，没有任何多余的。避免了以后的需要`GROUP BY`。

*   `LEFT JOIN t2`为此，使用`grp`除了`tbl1_fk`使其与众不同。

*   以您喜欢的任何方式排序 - 现在可以使用组号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:54:10.183

尝试这个

```
SELECT
  table1.id, table1.name, table2.option, table2.value  FROM table1 AS table11
JOIN table2 AS table2 ON table1.id = table2.tbl1_fk 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-11-05T09:42:29.117

这就够了：

select * from table1 left join table2 on table1.id=table2.tbl1_fk ;

# actionscript-3 - 如何定义自定义坐标系？

> ID：15615421
> 
> 赞同：0
> 
> 时间：2013-03-25T12:51:30.497
> 
> 标签：actionscript-3, flash, projection, coordinate-systems

在使用 OpenGL 的 Java 中，我可以为世界坐标设置矩阵，如下所示：

```
GL.glMatrixMode(GL.GL_PROJECTION);
GL.glLoadIdentity();
// window size is 640x480
// viewport size is 8x6 (e.g. in meters, so you see only 8x6 meters of the world in a flash game)
GL.glOrtho(0, 8, 0, 6, -1, 1); 
```

如何在 ActionScript 中做同样的事情？当我的图块大小为 80px 时，我想说

```
mySprite.x = 1; // 80 pixels
mySprite.x = 2; // 160 pixels
mySprite.x = 3; // 240 pixels 
```

它应该使精灵出现在距左侧 80、160 或 240 像素的位置。

AS3 中是否没有等效的投影可能性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:16:26.157

您可以定义一个超类来重新定义 x 和 y 的 getter 和 setter，然后从该类派生每个 MovieClip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:04:57.577

使用 spark.components.Group。这没有背景或其他类似的东西，所以即使它取代了 Canvas，它也不是。它本质上只是一组 UIComponents。话虽如此，将 Group 的 x 字段设置为 79，并在 mySprite 上调用 Group 的 addElement() 函数。那么如果你将 mySprite 的 x 字段设置为 1，则相对于 Group 而言，它被认为是 1，这已经是一个整体距离左侧 79 个像素的位置。所以 79 + 1 = 80。

```
var group:Group = new Group();
group.x = 79;
group.addElement(mySprite);
mySprite.x = 1; 
```

# javascript - 谷歌地图绘制路径一直有效

> ID：15615423
> 
> 赞同：0
> 
> 时间：2013-03-25T12:51:48.970
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一个带有 latlang 值的数组，我想绘制一个遵循这个值的路径。这就是我所做的，但它只画到某个点。当我 console.log '结果'时，期待绘制的对象，它会打印

`Uncaught Error: Error in property <routes>: (Cannot read property 'routes' of null)`

```
function renderDirections(result) {

  var directionDisplay = new google.maps.DirectionsRenderer();
  directionDisplay.setMap(map);
  directionDisplay.setDirections(result);
  directionDisplay.setOptions({suppressMarkers: true});
}

for(var i=0; i < array.length; i++){

                    var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(array[i].lat, array[i].lng),
                    map: map                                 
                    });

                    var directionsService = new google.maps.DirectionsService();
                    directionsService.route({
                    origin:  new google.maps.LatLng(array[i].lat, array[i].lng),
                    destination:  new google.maps.LatLng(array[i+1].lat, array[i+1].lng),
                    unitSystem: google.maps.UnitSystem.IMPERIAL,
                    travelMode: google.maps.DirectionsTravelMode.DRIVING
                    },
                    function(result){
                      renderDirections(result);
                    });
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:27:17.973

[检查DirectionsService](https://developers.google.com/maps/documentation/javascript/reference#DirectionsService)的“状态” 。DirectionsService 受配额和费率限制。

```
 directionsService.route({
                  origin:  new google.maps.LatLng(array[i].lat, array[i].lng),
                  destination:  new google.maps.LatLng(array[i+1].lat, array[i+1].lng),
                  unitSystem: google.maps.UnitSystem.IMPERIAL,
                  travelMode: google.maps.DirectionsTravelMode.DRIVING
                },
                function(result, status){
                  if (status == google.maps.DirectionsStatus.OK)
                    renderDirections(result);
                  else alert ("Directions request failed:"+status);
                }); 
```

“Uncaught TypeError: Cannot read property 'lat' of undefined”的问题是由于你的逻辑。当您收到最后一个路线请求时，array[i+1] 不存在。尝试这个：

```
for(var i=0; i < array.length-1; i++){ 
```

[使用函数闭包的示例](http://www.geocodezip.com/v3_SO_directions_multipleA.html)

[这个](http://www.geocodezip.com/v3_directions_multipleWayPts_CustomMrkrsB.html)将多个请求串在一起的示例也可能对您有所帮助。

# ios - UIButton Highlighting 克服默认行为

> ID：15615425
> 
> 赞同：0
> 
> 时间：2013-03-25T12:51:51.193
> 
> 标签：ios, uibutton, highlighting

在一个非常想成为百万富翁的程序中......我有 4 个选项按钮。它应该在按下时闪烁红色或绿色。这四个按钮具有红色或绿色图像作为背景图像。在代码设置中，我准备好这样的方法来设置第一个问题，当设置第二个问题时，背景图像会相应更改。
目前，默认的蓝色突出显示总是出现在第一次按下任何按钮时，之后还有其他问题。

我可以在这里粘贴一些不同的方法，（但它们不起作用）。所以任何建议都会很好。

同样在 IB 中，当您使用背景图像设置突出显示时，它可以工作。我会使用 use，但对于同一个按钮，必须以编程方式更改背景图像。

提前感谢您的帮助/建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:55:58.390

使用两个`State` `UIControlStateNormal`和 `UIControlStateHighlighted`

```
[btnMenu setBackgroundImage:[UIImage imageNamed:@"img1.png"] forState:UIControlStateNormal];
[btnMenu setBackgroundImage:[UIImage imageNamed:@"img1-Highlighted.png"] forState:UIControlStateHighlighted]; 
```

# ios - 如何引用 UIImageView (Xcode iOS)

> ID：15615427
> 
> 赞同：0
> 
> 时间：2013-03-25T12:51:59.260
> 
> 标签：ios, objective-c, uiimageview

我刚刚开始学习 Xcode 和 Objective C 的基础知识，并且我正在制作一个基本的 Torch 应用程序作为起点。

我已经掌握了大部分基础知识，但我不知道如何从单独的操作中引用另一个元素（我不知道这个术语是否正确）。

例如：

```
- (IBAction)screenButtonClicked:(id)sender {
    UIButton *button = (UIButton *)sender;
    if (_ScreenOnOff) {
        [self.view setBackgroundColor:[UIColor blackColor]];
        [button setTitle:@"Screen (Off)" forState: UIControlStateNormal];
    }
    else {
        [self.view setBackgroundColor:[UIColor whiteColor]];
        [button setTitle:@"Screen (On)" forState: UIControlStateNormal];
    }
    _ScreenOnOff = !_ScreenOnOff;
} 
```

我在故事板上有一个链接到该按钮的按钮，并且我有一个 UIImageView 我想显示和隐藏（取决于 if）。

我到处寻找如何做到这一点，并尽可能多地把它放到谷歌中，但没有运气。

这可能是 Objective C 中的一个小步骤，但请帮助，因为它会教我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:58:04.727

在头文件中为 UIImageView 声明一个 IBOutlet：

```
@property (weak) IBOutlet UIImageView *myImageView; 
```

之后，将 UIImageView 连接到 Interface Builder 中的此 IBOutlet。

然后，您可以像这样引用（并隐藏它）：

```
self.myImageView.hidden = _ScreenOnOff; 
```

在你的实现文件中。

* * *

另请参阅：[创建和连接插座](https://developer.apple.com/library/mac/recipes/xcode_help-interface_builder/articles-connections_bindings/CreatingOutlet.html#//apple_ref/doc/uid/TP40009971-CH15-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:23:07.603

此操作可能归您的视图控制器所有。如果您的视图控制器有一个名为“imageView”的 UIImageView 属性，您可以像使用 _ScreenOnOff 一样从您的操作内部访问它。

要隐藏您的图像视图，您可以执行以下操作：

```
self.imageView.hidden = YES; 
```

请注意，使用 self.imageView 和 self.ScreenOnOff 而不是通过 _imageView 直接访问该属性很重要。当你在你的类中声明一个属性时（不管它是否是 IBOutlet），编译器会合成该属性的访问器方法（get 和 sets）。因此，当您调用 self.ScreenOnOff 时，它与 [self ScreenOnOff] 类似。

您可以通过“_”直接访问该属性的唯一地方是 init 和 dealloc 方法。'- (void) viewDidLoad' 是 init 方法的类型。我猜你想要这样的东西：

```
- (IBAction)screenButtonClicked:(id)sender {
UIButton *button = (UIButton *)sender;
if (self.ScreenOnOff) {
    [self.view setBackgroundColor:[UIColor blackColor]];
    [button setTitle:@"Screen (Off)" forState: UIControlStateNormal];
    self.imageView.hidden = YES;
}
else {
    [self.view setBackgroundColor:[UIColor whiteColor]];
    [button setTitle:@"Screen (On)" forState: UIControlStateNormal];
    self.imageView.hidden = NO;
}
self.ScreenOnOff = !self.ScreenOnOff; 
```

}

我希望这会有所帮助。

# spring - Spring roo 上的时间戳

> ID：15615435
> 
> 赞同：0
> 
> 时间：2013-03-25T12:52:17.210
> 
> 标签：spring, timestamp, spring-roo

我将 spring roo 上的时间戳添加到特定实体。时间戳工作正常，也就是说，当列出实体中的所有条目时，创建和更新字段的日期是可见的。问题是，当我查看条目网页时，我还可以在左侧看到其他条目的时间戳，你如何删除它，我已经查看了 show.jspx 文件，但这很简单![在此处输入图像描述](../Images/c733e038b14fc810ba39b8300a098dfb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:47:16.223

看起来项目/后缀本身就是实体。默认情况下，spring roo 使用应用程序转换服务将这些对象转换为字符串。

在您的项目中，查找 ApplicationConversionServiceFactoryBean，并推送您需要更改的方法。

# c# - 检查文本框值是否存在列表框项

> ID：15615436
> 
> 赞同：0
> 
> 时间：2013-03-25T12:52:17.543
> 
> 标签：c#, sharepoint

检查列表框项目是否存在的方法：

```
 private bool ValueAlreadyInListLanguage(object vItem)
    {
        string valueTextBox = TextBoxLanguages.Text;
        string valueListBox = vItem.ToString();

        return valueTextBox == valueListBox;
    } 
```

![在此处输入图像描述](../Images/a6d5ba1ff24a6c4799b51649a6dc16db.png)

**解决方案**

```
 private bool ValueAlreadyInListLanguage(object vItem)
    {
        string valueTextBox = TextBoxLanguages.Text.Trim();
        string valueListBox = vItem.ToString();

        return valueTextBox.Equals(valueListBox, StringComparison.CurrentCultureIgnoreCase);
    } 
```

现在，如果我将例如“瑞典语”保存到我的列表框中，我无法添加“瑞典语”，因为它已经存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:04:35.523

没有大写或小写的替代修复将是：

```
return valueTextBox.Equals(valueListBox,String.CurrentCultureIgnoreCase); 
```

我还要在这里进行修剪：

```
string valueTextBox = TextBoxLanguages.Text.Trim(); 
```

因为输入文本末尾的空格会破坏相等性。

即“瑞典语”！=“瑞典语”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:00:38.363

```
private bool ValueAlreadyInListLanguage(object vItem)
{
    string valueTextBox = textBox1.Text;
    string valueListBox = vItem.ToString();

    return valueTextBox.Equals(valueListBox, StringComparison.CurrentCultureIgnoreCase);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:57:12.503

在你的比较中试试这个：

```
return valueTextBox.ToLower() == valueListBox.ToLower(); 
```

正如有人在评论中指出的那样 -`Swedish`不等于`swedish`- 它识别字母大小写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T12:57:37.597

尝试：

```
private bool ValueAlreadyInListLanguage(object vItem)
{
   return TextBoxLanguages.Text.ToLower().Equals(vItem.ToString().ToLower());
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T12:59:04.673

尝试在下面做

```
 string valueTextBox = TextBoxLanguages.Text.ToUpper();
    string valueListBox = vItem.ToString().ToUpper(); 
```

# javascript - 是否有任何类型的 jQuery.browser 后备？

> ID：15615437
> 
> 赞同：2
> 
> 时间：2013-03-25T12:52:19.807
> 
> 标签：javascript, jquery, deprecated

由于 jQuery.browser 自 1.9 以来已被删除，我遇到了很多麻烦，因为尽管当前的 jQuery 版本中没有该功能，但仍有很多插件没有得到更新并且仍然使用该功能。是否有任何推荐的方法来修改现有插件或任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:56:04.683

[http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed](http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed)

> jQuery.browser() 已移除
> 
> jQuery.browser() 方法自 jQuery 1.3 以来已被弃用，并在 1.9 中被删除。如果需要，它可以作为 jQuery Migrate 插件的一部分使用。我们建议将特征检测与 Modernizr 等库一起使用。

所以它应该在这里可用：

[http://blog.jquery.com/2013/01/31/jquery-migrate-1-1-0-released/](http://blog.jquery.com/2013/01/31/jquery-migrate-1-1-0-released/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:55:10.147

[jQuery.browser() 删除](http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed)：

> 该`jQuery.browser()`方法自 jQuery 1.3 以来已被弃用，并在 1.9 中被删除。如果需要，它可以作为[jQuery Migrate 插件](https://github.com/jquery/jquery-migrate/)的一部分使用。我们建议将特征检测与诸如[Modernizr之类的库一起使用](http://modernizr.com/%5d)

[jQuery Migrate 1.1.1 发布](http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/)：

> 使用该`jQuery Migrate`插件很容易，例如，只需在 jQuery 的 script 标签之后立即包含它。
> 
> ```
> <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
> <script src="http://code.jquery.com/jquery-migrate-1.1.1.js"></script> 
> ```

# php - 当套接字客户端检查数据时，套接字服务器是否“命中”？

> ID：15615446
> 
> 赞同：4
> 
> 时间：2013-03-25T12:52:46.677
> 
> 标签：php, sockets, lua

我已经设置了一个 PHP 服务器每秒写入一个套接字。

```
while(1) {
  $message = "Hello, World!";
  socket_write($socket, $message, strlen($message));
  sleep(1);
} 
```

然后我有一个 Lua 客户端（Corona SDK），它每 1/10 秒检查一次套接字的数据：

```
timer.performWithDelay(100, function() sock:receive() end, 0) end 
```

我的问题是：每次运行 sock:receive() 时服务器是否“命中”？还是 sock:receive() 只检查本地缓冲区？

重新表述这个问题：我运行 sock:receive() 的频率越高，服务器会收到更多的负载吗？还是完全不受此影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:48:48.170

不，套接字接收不会“命中”服务器。如果可能，您可以在服务器端运行 Wireshark，以向自己证明当客户端调用诸如接收或读取之类的东西时没有发送任何内容。与客户端交换少量数据以设置套接字，但是，一旦设置了套接字，客户端在读取时不会发送任何内容。

[Beej's Guide](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#sendrecv)中提供了一些背景信息

# vb.net - 如何在安装前提条件之前预先检查应用程序是否已安装

> ID：15615449
> 
> 赞同：1
> 
> 时间：2013-03-25T12:52:58.133
> 
> 标签：vb.net, prerequisites

我开发了一个单击安装的应用程序，并且我使用 BMG 软件开发了 AccessDataBaseEngine 的软件包。它将安装 AccessdatabaseEngine 作为先决条件，它将在安装我的应用程序之前安装 AccessdatabaseEngine。现在的问题是如何在提示用户安装AccessdatabaseEngine之前检查系统中是否安装了AccessdatabaseEngine，以便如果它预先安装在系统中而不是请求安装AccessdatabaseEngine，而是直接与应用程序一起安装而不是要求重新安装它。

请帮我解决一下这个。

# google-app-engine - 如何在 GAE BlobStore 服务的 restlet 中获取 HttpServletResponse 对象

> ID：15615450
> 
> 赞同：2
> 
> 时间：2013-03-25T12:52:59.537
> 
> 标签：google-app-engine, servlets, restlet

我将 Restlet 与 GAE 一起使用，GAE Blobstore API 需要一个 HttpServletRequest 对象来上传 blob 和一个 HttpServletResponse 对象来为它们提供服务。有什么方法可以从 restlet Response 中获取 HttpServletResponse 对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:09:10.220

您可以使用实用程序类 org.restlet.ext.servlet.ServletUtils 来访问 HttpServletRequest ：

```
org.restlet.Request restletRequest = getRequest();
HttpServletRequest servletRequest = ServletUtils.getRequest(restletRequest); 
```

和类似的响应：

```
org.restlet.Request restletResponse = getResponse();
HttpServletResponse servletResponse = ServletUtils.getResponse(restletResponse); 
```

# c# - 创建客户端时出现 Keynotfoundexception

> ID：15615452
> 
> 赞同：0
> 
> 时间：2013-03-25T12:53:18.177
> 
> 标签：c#, wcf, windows-phone-7

我在我的 WP 项目中遇到了这个错误：

```
An exception of type 'System.Collections.Generic.KeyNotFoundException' occurred in mscorlib.ni.dll but was not handled in user code 
```

在这：

```
 AzureService.AzureServiceClient client = new AzureService.AzureServiceClient(); 
```

客户端 = 来自 WCF Web 服务的客户端。

这里发生了什么事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:57:40.723

当操作尝试使用该集合中不存在的键从集合中检索元素时，将引发 KeyNotFoundException。

所以我认为，当您注册服务时，您在调用时遇到问题，您在注册服务和被调用服务之间设置了不匹配

# java - 如何将 pageContext 中的属性值提取到我的 JSP 中的 scriptlet 代码中

> ID：15615456
> 
> 赞同：1
> 
> 时间：2013-03-25T12:53:26.783
> 
> 标签：java, jsp

我的 JSP 中有以下一段 scriptlet 代码。

```
<%   
      String instockMessage = pageContext.getAttribute("instockMessage");
      if ((instockMessage != null) && (instockMessage.trim().length() != 0)) {
            instockMessage = instockMessage.replaceAll("<[^>]*>", "").trim();
            pageContext.setAttribute("instockMessage", instockMessage);

      }
%> 
```

但是，我在编译时收到一条错误消息，提示“：类型不匹配：无法从对象转换为字符串”。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:54:29.500

这是因为 pageContext.getAttribute() 返回一个对象。您必须将对象转换为字符串才能解决此问题：

```
String instockMessage = (String) pageContext.getAttribute("instockMessage"); 
```

或者

```
String instockMessage = pageContext.getAttribute("instockMessage").toString(); 
```

那就是修改后你的最终代码应该是这样的：

```
<%  
    String instockMessage = pageContext.getAttribute("instockMessage").toString();
    if ((instockMessage != null) && (instockMessage.trim().length() != 0)) {
        instockMessage = instockMessage.replaceAll("<[^>]*>", "").trim();
        pageContext.setAttribute("instockMessage", instockMessage);
    }
%> 
```

或者

```
<%  
    String instockMessage = (String) pageContext.getAttribute("instockMessage");
    if ((instockMessage != null) && (instockMessage.trim().length() != 0)) {
        instockMessage = instockMessage.replaceAll("<[^>]*>", "").trim();
        pageContext.setAttribute("instockMessage", instockMessage);
    }
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:55:46.363

它告诉你你需要知道的一切。来自页面上下文的属性是`Objects`，您需要向下转换为`String`. 做一个

```
String instockMessage = (String) pageContext.getAttribute("instockMessage"); 
```

但是为了这个世界上所有美好的事物，请避免使用脚本并查看`JSTL`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:54:44.337

尝试转换成字符串：

```
String instockMessage = (String) pageContext.getAttribute("instockMessage"); 
```

# android - 如何从服务器读取文本文件中的行数？

> ID：15615468
> 
> 赞同：0
> 
> 时间：2013-03-25T12:54:00.397
> 
> 标签：android, webview

我在fileden 中有一个文本文件。链接在这里...

[http://www.fileden.com/files/2012/11/16/3367367/trailers.txt](http://www.fileden.com/files/2012/11/16/3367367/trailers.txt)

我想计算这个文本文件中的行数..我将进一步更新这个文本文件..

我可以在这个文本文件中添加行数，或者我可以删除行数。基于此

我在我的应用程序中显示图像的行数。如果我有两行我应该显示两个图像..

如果 ii 有四行文本，那么我将在我的应用程序中显示四个图像..

有什么想法在这里分享给我...

提前致谢...

# iphone - NSMutableArray 比较不同的计数

> ID：15615469
> 
> 赞同：0
> 
> 时间：2013-03-25T12:54:01.617
> 
> 标签：iphone, ios, objective-c, nsstring, nsmutablearray

我的新应用有问题：

我有两个字符串：

```
NSString *string1 = @"Il alla a la prison sur le champ" 
NSString *string2 = @"Il alllla a la prissson sur le champ" 
```

我制作数组：

```
NSArray *arrayReference = [string1 componentsSeparatedByString:@" "]; 
NSArray *arrayUser = [string2 componentsSeparatedByString:@" "]; 
```

我比较数组：

```
NSMutableArray *arrayResult; 

for (int i = 0; i < arrayReference.count ; i++)
{
  NSString *stringReference = [arrayReference objectAtIndex:i]; 
  NSString *stringUser = [arrayUser objectAtIndex:i]; 

  if ([stringReference isEqualToString:stringUser])
  {
    [arrayResult addObject:stringUser]; 
  }
  else {
    [arrayResult addObject:[NSString stringWithFormat:@"<strong>%@</strong> <italic>%@</italic>",stringUser]; 
  }
} 
```

然后我得到：

```
NSString *stringResult = [arrayResult componentsJoinedByString:@" "]; 
```

所以我可以打印：

Il **alllla** *alla* a la **prissson** *监狱*sur le champ

没关系，我可以得到用户的错误。

但是当数组的计数不同时我遇到了问题！

如果我有 ：

```
NSString *string1 = @"Il alla a la prison sur le champ";
NSString *string2 = @"Il fjdbfds alllla a la prison fdnfs sur le cahmp"; 
```

我想打印：

Il **fjdbfds alllla allla** *alla* a la **jail fdnfs** sur le **cahmp** *champ*

当我输入我的 for (...) 时应用程序崩溃，因为我试图将 nil 对象插入到 NSString

请帮助我，如果需要，贝宝捐款。

谢谢大家。

对于世界上最好的开发者 Martin 来说：

字符串用户 : Il alla sur le champ a la jail juju, il descendit au cabanon du saltimbanque ; il l'appela par son nom, lui pris la main et lui parla。Il passa toute la journée auprés de lui, oubliant la nourriture et le sommeil, priant dieu pour l'ame du condamné et priant le condmané pour la sienne prore。Il lui dit les meilleures verite qui sont les plus simples。Il fut pere, frere, ami, eveque pour benir seulement。Il lui enseigna tout, en le rassurant et en le consolant。Cet homme allait mourir deseperer。La mort etait pour lui comme un abime。Debout et fremissant sur le seuil lugubre, il reculait avec horreur。Il n'etait pas assez ignorant pour etre absoluement 无动于衷。Sa 诅咒，secouusse proonde，avait en quelques sorte rompue ca et la autour de lui cette coison qui nous separe du lystere des chooses et que nous appelons la vie。Il respectait sans cesse au dehors de ce monde ar ses breches fatales, et ne coyait que des tenebres。L'eveque lui fit voir une clarte。

字符串参考 : Il alla sur le champ à la jail, il descendit au cabanon du saltimbanque ; il l'appela par son nom, lui prit la main et lui parla。Il passa toute la journée auprès de lui, oubliant la nourriture et le sommeil, priant Dieu pour l'âme du condamné et priant le condamné pour la sienne prore。Il lui dit les meilleures vérités, qui sont les plus simples。Il fut père, frère, ami, évêque pour bénir seulement。Il lui enseigna tout, en le rassurant et en le consolant。Cet homme allait mourir désespéré。La mort était pour lui comme un abîme。Debout et frémissant sur ce seuil lugubre, il reculait avec horreur。Il n'était pas assez ignorant pour être absolument indifférent。Sa 诅咒，secouusse proonde，avait en quelque sorte rompu çà et là autour de lui cette cloison qui nous sépare du mystère des chooses et que nous appelons la vie。Il respectait sans cesse au dehors de ce monde par ces brèches fatales, et ne voyait que des ténèbres。L'évêque lui fit voir une clarté。

结果字符串： Il alla sur le champ **a** **à** la jail **juju** , jail *,* il descendit au cabanon du saltimbanque ; il l'appela par son nom, lui **pris** *prit* la main et lui parla。Il passa toute la journée **auprés** *auprès* de lui, oublant la nourriture et le sommeil, priant **dieu** *Dieu* pour **l'ame** *l'âme* du **condmané** *condamné* et priant le condamné pour la sienne prore。Il lui dit les meilleures *verite* **vérités** , qui sont les plus simples。Il fut **père, frère,** *père,frère* ami, **eveque** *évêque* pour **benir *bénir* seulement。Il lui enseigna tout, en le rassurant et en le consolant。Cet homme allait mourir **desperer。** *désespéré。*La mort **etait** *était* pour lui comme un abîme。Debout et **fremissant** *frémissant* sur **le** *ce* seuil lugubre, il reculait avec horreur。Il **n'etait** *n'était* pas assez ignorant pour **etre absoluement indifférent** *être absolument indifférent。*Sa condamnation, secouusse profonde, avait en *quelques* _quelque_ sorte **rompu çà** *rompu çà* et*là autour de lui cette cloison qui nous sépare du mystère des chooses et que nous appelons* la **autour** *vie。*_Il respectait sans cesse au dehors_ de *ce monde par ces brèches fatales,* _et ne voyait que des ténèbres。L'évêque_ lui **cette coison qui nous separe du lystere des chooses et que nous appelons la vie。Il respectait sans cesse au dehors de ce monde ar ses breches fatales, et ne coyait que des tenebres。L'eveque lui** fit voir une **clarte。** *澄清*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:04:57.967

代替：

```
for (int i = 0; i < arrayReference ; i++) 
```

做

```
NSInteger index = 0;
for (NSString * stringReference in arrayReference)
{
   if(index < [arrayUser count])
   {
       NSString * stringUser = [arrayUser objectAtIndex: index++];
       ...
       ...
       // do your comparison here
   } else {
       // you need to decide what to do if stringUser would be NULL
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:58:02.903

你正在检查`i < arrayReference`。但是 arrayReference 是一个数组，您必须检查数组中的项目数。

```
for (int i = 0; i < [arrayReference count] ; i++) {
    NSString *stringReference = [arrayReference objectAtIndex:i];
    if([arrayUser count]> i) {
         NSString *stringUser = [arrayUser objectAtIndex:i]; 
         if ([stringReference isEqualToString:stringUser])
         {
            [arrayResult addObject:stringUser]; 
         } else {
            [arrayResult addObject:[NSString stringWithFormat:@"<strong>%@</strong> <italic>%@</italic>",stringUser]; 
         }
    } else {
        //do you want to do something if the second array does not contain more words?
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:21:03.863

在下一行

```
 [arrayResult addObject:[NSString stringWithFormat:@"<strong>%@</strong> <italic>%@</italic>",stringUser]; 
```

您在这里给出了两个格式说明符`(%@)`，但您只给出了一个值。这就是崩溃的原因。这条线应该是这样的。

```
[arrayResult addObject:[NSString stringWithFormat:@"<strong>%@</strong> <italic>%@</italic>",stringUser,@"Some Text"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:16:27.537

尝试这个

```
for (int i = 0; i < [arrayReference count] ; i++)
{

    NSString *stringReference = [arrayReference objectAtIndex:i];

    NSString *stringUser = @"";
    if (i<[arrayUser count]) {
         [arrayUser objectAtIndex:i];
    }

    if ([stringReference isEqualToString:stringUser])
    {
        [arrayResult addObject:stringUser];
    }
    else {

         NSString *tempString = @"";
        if ([stringUser length])
        {
            tempString = [NSString stringWithFormat:@"<strong>%@</strong> <italic>%@</italic>",
                          stringUser,stringReference];
        }
        else{
            tempString = [NSString stringWithFormat:@"<italic>%@</italic>",stringReference];
        }

        [arrayResult addObject:tempString];
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T14:21:20.710

这是你想要的？

```
NSString *string1 = @"Il alla a la prison sur le champ";
NSString *string2 = @"Il fjdbfds alllla a la prison fdnfs sur le cahmp";

NSMutableArray *array1 = [[string1 componentsSeparatedByString:@" "] mutableCopy];
NSMutableArray *array2 = [[string2 componentsSeparatedByString:@" "] mutableCopy];
NSMutableArray *goodArray = [NSMutableArray array];

while ([array1 count] > 0 && [array2 count] > 0) {
    // Check if first word of array2 occurs in array1: 
    NSString *word = [array2 objectAtIndex:0];
    NSUInteger idx = [array1 indexOfObject:word];
    if (idx == 0) {
        // correct word
        [goodArray addObject:word];
        [array1 removeObjectAtIndex:0];
        [array2 removeObjectAtIndex:0];
    } else if (idx == NSNotFound || idx > 4) {
        // extra word in array2
        [goodArray addObject:[NSString stringWithFormat:@"<strong>%@</strong>", word]];
        [array2 removeObjectAtIndex:0];
    } else {
        // missing word from array1
        word = [array1 objectAtIndex:0];
        [goodArray addObject:[NSString stringWithFormat:@"<em>%@</em>", word]];
        [array1 removeObjectAtIndex:0];
    }
}
// Remaining missing words:
for (NSString *word in array1) {
    [goodArray addObject:[NSString stringWithFormat:@"<em>%@</em>", word]];
}
// Remaining extra words:
for (NSString *word in array2) {
    [goodArray addObject:[NSString stringWithFormat:@"<strong>%@</strong>", word]];
}

NSString *stringCorrected = [goodArray componentsJoinedByString:@" "];
NSLog(@"%@", stringCorrected); 
```

*输出：*

```
Il <strong>fjdbfds</strong> <strong>alllla</strong> <em>alla</em> a la prison <strong>fdnfs</strong> sur le <strong>cahmp</strong> <em>champ</em> 
```

或呈现为 HTML：

Il **fjdbfds alllla** **allla** *alla* a la **jail fdnfs** sur le **cahmp** *champ*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T16:11:53.220

The easiest way is convert the first string to NSDictionary. Since we dont care about values lets initialize them to zeros.

So this will look like `NSString *string1 = @"Il alla a la prison sur le champ"`

```
Il -> 0, alla ->0 a -> 0, la -> 0 etc. 
```

Now iterate through the second string after converting to array. Create a new resultString.

```
for(iterate elements through array)
{
   check if the element exists in dictionary
   if(!exists)
   {
      concatenate the result string with element that does not exist
   }

   concatenate the result string with current element

} 
```

I just gave a basic idea. There are few pit falls which you need to address. Ex what if the dictionary contains more strings compared to array etc.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-25T13:02:07.740

“arrayUser”的应用程序崩溃计数的简单原因小于“arrayReference”的计数，并且您正在为“arrayReference”运行循环，并试图获取“arrayUser”的值......

您需要应用以下代码段才能比较您的两个数组

> 这将帮助您比较任何动态阵列

* * *

```
for (int i = 0; i < [arrI count]; i++)
{
    for (int j = 0; j < [arrJ count]; j++)
    {
        if ([[arrJ objectAtIndex:j] isEqualToString:[arrI objectAtIndex:i]])
        {
            NSLog(@"%@",[arrI objectAtIndex:i]);
        }
    }
} 
```

其中 arrI = arrReference 和

arrJ = arrUser

享受编程！！

# android - 当 GPS 提供商没有正确的位置更新时，在 android 中更改我的位置提供商

> ID：15615471
> 
> 赞同：2
> 
> 时间：2013-03-25T12:54:05.980
> 
> 标签：android, location

我需要定期跟踪用户的位置。

为此，我在我的服务的 onCreate 方法中调用 requestLocationUpdates()。

```
@Override
public void onCreate()
{
LocationManager aLocationManager = (LocationManager) getApplicationContext().getSystemService(Context.LOCATION_SERVICE);

aLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, MIN_TIME, MIN_DISTANCE, new LocationListener(LocationManager.GPS_PROVIDER));
} 
```

通常我会通过这个 GPS_PROVIDER 定期获取位置更新。但是，在某些区域，我无法正确获取位置更新。在这种情况下，我喜欢将我的 requestLocationUpdates 调用切换为使用 NETWORK_PROVIDER。

因此，当我无法从 GPS_PROVIDER 获取正确的位置更新时，我可以切换我的 requestLocationUpdates 以使用 NETWORK_PROVIDER。

我怎样才能做到这一点？检查某种条件并在 onStatusChanged() 中更改我的 requestLocationUpdates() 是否正确。

请提出建议。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:01:22.763

是的 有办法做到这一点。您可以检查 GPS 提供商是否可用，`locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)` 如果为 false，则使用网络提供商

您还可以覆盖 onProviderEnabled() 和 onProviderDisabled() 以从 GPS 切换到网络平均值，而如果您喜欢使用库，则可以使用此位置跟踪库 [https://github.com/nagendraksrivastava/Android-Location-Tracking-Library](https://github.com/nagendraksrivastava/Android-Location-Tracking-Library) 它漂亮的图书馆和完美的工作

这是获取所有提供者列表并在此基础上获取数据的代码，因此在这种情况下，您应该担心提供者

```
LocationManager mLocationManager = new LocationManager()
List<String> matchingProviders = mLocationManager.getProviders(true);
for(String provider : matchingProviders ){
Location location = mLocationManager.getLastKnownLocation(provider);
if(location != null){
double lat = location.getLatitude();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:00:19.553

试试这个代码它对我有用......

```
void currentlocation(){
    LocationManager locationManager = (LocationManager) getApplicationContext().getSystemService(Context.LOCATION_SERVICE);
    LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            // Called when a new location is found by the network location provider.
            MyContants.lat = location.getLatitude();
            MyContants.lon = location.getLongitude();
            //  Log.w(MyContants.ScanResult_TAG, "Currnet Location==="+String.valueOf(lat)+"-----"+String.valueOf(lon));
        }
        public void onStatusChanged(String provider, int status, Bundle extras) {}
        public void onProviderEnabled(String provider) {}
        public void onProviderDisabled(String provider) {}

    };

    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
    //GPS location updates.
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
} 
```

使用权限

```
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

# visual-c++ - 区分 Visual C++ 中 ActiveX 的设计时和运行时

> ID：15615476
> 
> 赞同：0
> 
> 时间：2013-03-25T12:54:18.223
> 
> 标签：visual-c++, runtime, activex, design-time

我使用 Visual C++ 创建了一个 ActiveX 控件，以便在我的另一个程序中使用。我想添加一个与硬件 ID 相关的许可证代码，在设计时放在它旁边，以确保只有授权的人可以将它用于他们的程序。换句话说，没有任何人使用我的软件来为他的程序使用我的 ActiveX。代码应该只在设计时检查，ActiveX 在运行时应该在没有代码的情况下正常工作。现在，我如何区分 ActiveX 的设计时和运行时？

谢谢...

# vb.net - VisualBasic 如何发送 Base64

> ID：15615478
> 
> 赞同：0
> 
> 时间：2013-03-25T12:54:29.293
> 
> 标签：vb.net, base64, mailmessage

是的，我被难住了，我什至不知道我在做什么是对的。我有一些图像的 Base64 代码，我正在使用 Visual Basic 发送电子邮件（代码如下），但是当我收到电子邮件时，它只显示了方框和红十字。

我对此知之甚少，我刚刚一起破解了这个。我可能会做一些根本上愚蠢的事情，但我不会意识到这一点。

请指教：S

*VB代码*

```
Public Sub Main()

    Dim mySmtpClient As SmtpClient
    Dim myMessage As MailMessage
    Dim FileReader As StreamReader
    Dim EmailBody As String

    FileReader = New StreamReader("D:\Extracts\Body.html")

    EmailBody = FileReader.ReadToEnd()

    myMessage = New MailMessage("eg@example.com", "eg@example.com")
    myMessage.Body = EmailBody
    myMessage.IsBodyHtml = True
    mySmtpClient = New SmtpClient("Server")
    mySmtpClient.Credentials = CredentialCache.DefaultNetworkCredentials
    mySmtpClient.Send(myMessage)

    Dts.TaskResult = ScriptResults.Success
End Sub 
```

*正文.html*

```
 <img src="data:image/jpg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABVAAD/4QNtaHR0cDov
    L25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENl
    aGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4
    OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6
    MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5
    OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHht
    bG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0i
    aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1w
    PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9
    InhtcC5kaWQ6MTY3RkUyMEFCREQ0RTExMUFFODdDOUNGOURFNjQ5MUYiIHhtcE1NOkRvY3VtZW50
    SUQ9InhtcC5kaWQ6RjYyRDMzNjdFQzRBMTFFMTg2RDRCN0EyNTQxQTE2QkMiIHhtcE1NOkluc3Rh
    bmNlSUQ9InhtcC5paWQ6RjYyRDMzNjZFQzRBMTFFMTg2RDRCN0EyNTQxQTE2QkMiIHhtcDpDcmVh
    dG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIj4gPHhtcE1NOkRlcml2ZWRGcm9t
    IHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDk5QTM0OUY0OUVDRTExMUFEQjdGMjZDRTM5OTI3
    NTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTY3RkUyMEFCREQ0RTExMUFFODdDOUNGOURF
    NjQ5MUYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBh
    Y2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAACAQEBAQECAQECAwIBAgMDAgICAgMD
    AwMDAwMDBAMEBAQEAwQEBQYGBgUEBwcICAcHCgoKCgoMDAwMDAwMDAwMAQICAgQDBAcEBAcKCAcI
    CgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABN
    ASwDAREAAhEBAxEB/8QAugABAAIDAQEBAAAAAAAAAAAAAwIIBQYHCQQBAQACAwEBAQEBAAAAAAAA
    AAACAwEEBgUHCAAJEAABAwMDAwMCAgUIBwkBAAACAQMEAAUGEQcIMRIJIUETFBUiCjK0dXY4UUIj
    tRYXNzmzdNSFlcW2YZEzJCU2J1cYGREAAQIEBAQDBQQIBAcBAAAAAQACEQMEBSExEgZBUXEHYYET
    kbEicjWhcxQ0wdEykrLCIxVCYoKz4VIzU4NUNhb/2gAMAwEAAhEDEQA/AOPF0r7bX81woL0qCiUa
    golCoKJQqCiUF6VCJQLpUIgoF0qEYRlUIgoF1oUYRl0r8iCM6FGEZ+9QjCMulQjCI/ehKMIzqCjC
    IvehKMIy61CYERdKFGER+9CjCI+tQUwIi6UJTAiP3qCjCI/ehKYER0KMIjoSmBCdQmBEdCmBCdCm
    BEfvUFMCJz3oUYQue9CmhEdCjCE6FMCI6EpgQnUJgQl1oSmBHQo1aYulbdeEhQXpUFEo1BRKFQUS
    hUFEoL0qESgXSoRBQLpUIwjKoRBQLrQowjLpX5EEZ0KMIz96hGEZdKhGER+9CUYRnUFGERe9CUYR
    l1qEwIi6UKMIj96FGER9agpgRF0oSmBEfvUFGER+9CUwIjoUYRHQlMCE6hMCI6FMCE6FMCI/eoKY
    ETnvQowhc96FNCI6FGEJ0KYER0JTAhOoTAhLrQlMCOhRq0xdK268JCgvSoKJRqCiUKgolCoKJQXp
    UIlAulQiCgXSoRhGVQiCz+H7Qbtbiwnbnt9i93vttYc+B+RZrbMmtNu9qH2GcZo0QtFRdFXXSqVT
    cJFOQ2bMa0nmQPeV0qO1VVU0ukSnvAwi1pPuClP2P3qtmRwsNuWH3uPl9yFx23Wp+1T25koGRVxw
    mGCZRw0ARVSUUXREXWgbc6ZzDMExha3M6hAR5mMAmus9WyY2U6S8PdGALXRMM4CETDwX3Fxc5M//
    AF1k/wDwC6/7PSP71R/96X+839atDbtw/wDXm/uO/UoFxb5Nev8A8dZP/wAAuv8As9R/eqP/AL0v
    95v60Y27cP8A15v7jv1LRbjAnWqa9a7oy5GuUZw2JEd8CbdadbJQMDA0QhISRUVFTVFroNcHAOaY
    grluYWOLXCBGBB4L5T96/FSF0SzcPOVeSYM7ubZdushf28ZjuXA70lpmDD+labV43xdNsRJsQRVU
    hVU9OtcibfqKXM9F05gfGENQjHlDmtBJ2zcZsk1DKeYZYEdWkwgMYxhl4rmRe9dQrihGXWoTAiLp
    QowiP3oUYRH1qCmBEXShKYF9OPYzkmY3tjGcQt8m65HLJQi2+2sOyZLxCKmqNtMiRkqCKr6J0SlT
    ZrZTS95AA4nAKxIkvnODJbS5xyAESfIJcv29z7Ar6GL5zY7hZcmdAHW7ddoUmJKMHSUQIWZAAaoS
    oqIqJ6qlKlVMuc3XLcHDmCCPaE+dSTZDtE1jmu5EEH2FLnm0G7O2DMeRuVi93x6PMUwiHfLbMgC+
    TaIpo2spptCUUJNdOmtLkVsmfESntdDkQfcn1Fvn00DOluZHLUCI+0LWDp5VcITqEwIjoUwIToUw
    Ij96gpgROe9CjCy2EbZbk7o3B607Z49c8iusdv6mRFsUCVPdaa7kD5DCK24Qj3Eiaqmmq1Wn1MuS
    IzHBo8SB71cpqWbPMJTC4jkCfcsTkFhvmL3mVjuTQn7dkEJwo0yBPZcjyGHQXQm3WnUExJF9FRUR
    UomTGvAc0gg8QofLdLcWvBBGYOBWOOpUhEdCUwITqEwIS60JTAjoUatMXStuvCQoL0qCiWf2r2p3
    B3uz2BthtZbDvGeXP5/oLcwbTZvfTR3JbuhPm2CdrTRF6knT+WqVwr5NFJM+e7SxsInqYDLxK6Nr
    tVRcp7aalZrmOjACGMASc4DIErpWS+ODm/iVytNnvm3VyC6XyStvtjEc4kknnhaN8kVIz7nYItgp
    EZ6CiJ6qlcSTvO1zWucye2DRE5jDLiBHHgMVp6jt3epDmMfTPi8waBAxMI8CYCAiSYAc1928fjA5
    u7FYM9uPn2FOJiERtX7hJtc2BcShtiPcRvtwX3XBAURVI0FRTT1VKRbt8WyumiTKm/EcgQWx6EgD
    yzVm79tL1bZBqJ8g6AIktLXQ6hpJhzOQ5qW0niz5zb2YWxuBheEON4rNbGRb37vMgW05TZp3CbTM
    19p1QJNFElFBJFRUVUobhvm10c0yZk34hnAF0OpAI8s0y09sr3cJIqJMg6CIguLWxHMBxBhyMIHg
    tOt/B7lbdt5J/HyJhcxN47dFK6SbG+7EYdWGJg2r7LjzwNOt9ziaE0ZIvrp0XS+/c9A2mFWZo9Jx
    gHYnHkYCIPUBcyVsy6PrHUAkO9Zo1FpIBhzBJgRjmCV+71cFOWnHjDP7wt5cLl2PDPqGoKz3noTw
    C+8hK2JJGfdJNexfVU019NdVSgt26KCvmejTTQ50IwgRgOoCO77Kulrk+vVyCxkQIxBxOWRKx2xf
    DjkxyatM++7F4lJyGz2x4Ik6RGdiMg084HyCGsp5rVe319NdPfrTLpuGitzg2qmBhcIjPLyBS7Jt
    O43djn0UkzGtMCQQIHzIXp34GsLybbjZncvAc0i/RZdZswettzhK406UeVHtsRp1oiZIwUgJFRdF
    XRUrxXuhUsqKiRNlmLXSog8wSYHFfRvZSjmUtJUyJwg9k4gjAwIa2IwwwXy+QXe/bvjj5QdiN5t1
    5bkHALNY8j+vlMMPSTD6uDPgtaNMCZlq6+KeiemuvSp2pbZ1fZaunkCL3PZARhkWk4nwCHfF4kWv
    cdBV1JhLZLmRMCcw5owGOZCtPxh5h7D8wbHdMi2Iub1ztVmfbhTzkw5UNQdebV0EQZTYKWop1SsT
    etv1Vqc1lU0NLhEYg+5ekbd3VRXtjplE4uDDAxBGJ6rB8nPITxd4gZZb8K32vMm25Dc4n3WG1Gt0
    2YJR/mNjuU4rRii97apoq61Ys21a26SzMpmgtaYHEDHPiVU3Bve3WWa2TWPLXOERBpOEYcB4LwN3
    4ymzZzvdmWbY44ruPXi+3a6wHTAmyOPLnvPtEoGiEKqBouipqlfTttkOk00qW/NrGg9QACvjS71D
    KisnTpeLXPcR0LiQuzeM7htuHyW5C4tlgYyd82KsN+gf2vkq5F+naabVJfxPtPOCZg4gIhIIrqiq
    lZ3eF/lUFLMZr0zXMOnOPKIPgtbsHa8+6VsqZ6euQyY3WcIAZwIJiQei9FvLVnPkasyScT4q482/
    xyPFpr+Z3oWrY65/TfWMzGP/ADzqGAtQ2xNFbDX8fXVNE8n2RTWl8H1r4TvUGgY+EDhzOGPJe5dx
    6u+MjLt0uNP6R1ug3jqDhiYiDQDgOK8hth+Mu/fJ/J3MQ2FxeZkl7ZQTk/Ri23HjCaqIlIkyDaYZ
    QlRdFcMda9xud3prez1Kl4YPHM9AMT5BfN9nsNZdJnp0csvIzhkOpMAPMhdN3r8T3PTYbEZGfZtg
    rz+IQ2zkTpljlwbosVptFM3HmYLzrwgIopEfZ2inqqpXGoN622seJUubBxyBBEehIh5ZrRXPt5d6
    CUZ02SSwZlpDoeJAJMPGEFW7tI1QRTUlXRETqq1qCscFZXbLw9+Q3dnEm81x7b96FZJAC7EG/Trd
    a5L4kPcijGnSGnhRU00UwFF19FX10yNZvi2Uz/TdNiRnAEgeYEPYt1QdubxVyxNZIIBy1FrSfIkH
    2gLiG+GwG8/G/NC2+3yxyZjWWiHzhFuDaILzSkoI6w62ptOt9wqne2RDqipr6V3aC5SK6X6tO8Pb
    4fpGYPgVnLnaKm3TPRqpZY7kePiDkR4jBNsBxm325T5ou3+wWNysjydtv6iQ3FVppmMz3IHySJEk
    2mWh7l0RTNEVfRPWl3O609BL9SpeGt9/QDE+SfaLLVXOb6NJLL3eGQHiTADzKt/wd8e/Lfhz5Fdn
    7/v1ijltxafc5saNd4cmJPhK+tlnkjJvQnXUbNUFVQT7VVEXTXRaw+4Ny0VytlQ2nfFwAwIIP7Qx
    gc/Jei7Y2lcLRd6Z9VL0tLiAQQRHS7CIJgeq/fPH/mcY1+xMc/rOZQ9vvpT/AJne4JvdD61L+Rn8
    RVpPPRxv3k5VXDZfaLY2zOXrNJU7InybEgaZjR249uRyRIedUQbbDuTUiX1VURNSVEXI9vrnIoBU
    Tqh2loDfM/FgBxK3Pc+0VFyNLIpm6nEv6AQbiTwC87OVHiA5s8SNvnN1dwbLDuu38VEK53LGZazx
    t4kXahSWybZdENepoKgnuqV6Pat5UNwmelLcQ45BwhHpw8s15TethXG1yvXmtDmDMtMYdcj55KtW
    LYllGeZJCw7CbdJu+WXF0YsC221lyRJkPH+iDTTSERKv8iJWlnTmSml7yA0Zk4ALK08h854lywXO
    OAAxJ8laOxeC/wAm2Q2JL6G3zcNHBVxqHcL3YmJRj2oSatlN/Aq66aOKKovVErJTN92tjtPqx6Nd
    D3e5beT25u726vRh4FzQff71Xbf3jnvhxgzo9td/Mal4zmQgkgIs8QIH2SVRR2O+wTjLzfcip3tm
    Q6oqa6otaCguUitl+rTvDm+H6RmPNZu42qot8z0qlhY7x94ORHiF9fHPiTyN5c5S/h/HbE5mTXeI
    IOTnI3xMxIguKqAsmXLNmO13dq9qGaKWi6a6LSbldqagaH1Dw0HLmegGJT7VZaq4v0UssvIz5DqT
    ADzK6FyM8TXPni9hr+426mBPpgERtX513ssuDdWIYCuhHJG3vPONAKaKpmCB6/pddObb910Fa/05
    Uz4jkCCI9IjHpmuxctm3GgZ6s6UdIzIIMOsCSOuSs5+WI/iy3B/dJf64g1mO5f5SX8/6Ctd2p/OT
    fu/5gqgeT/8AzDd5v3tvX64danbX0+R8g9yyO6fqVR9473rDZ3wA5hbZ7IMcjtxcHlWLZmUzGkxr
    zdpECJ8oTVT6dAjPyBkqTiEiiKN9yp66aetHJvtJOnfh5cwOeI4CJyzxhD7UM7b1ZIkCpmSy2WYY
    kgZ5YRjj0XGDrqlckITqEwIS60JTAjoUatMXStuvCQoL0qCiVl/Dx/mNbdf7/wD+mLnWI7jfRp/+
    j+Nq9L7Q/wD0VN/5P9p69S/JFyty3hrxzXeLArXBumYHcollhheReOK0koXXTcMY7jLhfhYVNEMf
    VUXX00XwjZlhl3is/DTXFrdJcYQjhDmCOPIr6f7i7pm7ft34yQxrn6w0aowEYknAg8OYXRuPG5h7
    /cesS3WvkBqM9lVmh3SbbhX5WAKXGE3Wk+RPxBqSond7da494ovwFZNp2kn03kA8cDgeq0W37l/d
    LfJqntA9VgcRmMRiOir1wR8jGe8teUu4+y96sVvteBYuEmRYH4aSEnqzFuQ2/tlk4840RGhoX9GA
    IPT8XWtdunZ0q1UMipa9znvhqjCGLY4YR9pMfBYHZHcGffLnU0b5bWy5US0iOqAdp+LEgxzwAhli
    sD5Ut4YPGHkVx85GiPxFbrpeLTfX2h1N6xywgty2iQU1PsbcM20XoXqnWrOxbcblR1tHza0t8HDV
    A+ZgD4Kn3NuzbPcLdcMtL3tcebDp1DxgCSPFd/5ubOROS/EDNttbUoS5d1tLk6yONaPC5Nh9txhK
    Chrqhusgmo6+i+mvSsntq4m3XCVOdhpdA9DgfsJW73jaRd7VPp24lzIt44j4mw6kBcP4XwLX4+/E
    /wD3u5MwLWQHape4E5h4fjV+fdABLbHNP0kIm/pmV19UX+Tomm3G519v34dh+HUJY8A39o+3UVjd
    oS27Z2x+KmCDtBmnxc79geY0tWp/l/r1dck2C3DyK+vlJvc/LXpsyS76m6+/bYrrhlpp6kRKq1d7
    qy2y6qSxogBLgOgJXN7HTnTaGomPMXOnEk8yWgkrh35iv/G7bv8AYcz9fWtJ2k/LTvnHuWR77fnK
    f7s/xLp/5dH/AAe3I/bNv/Ujri92/wAxI+U+9aPsR+Vqfnb7lxv8xR/Ezg/7r/8ANZld7tP+Tm/e
    fyhZnvl9QkfdfzOXnqXSvU14oFanxHci96duOWWGbNYTfnYG2eWX2MmRWptqMQTUFkwTvNxonE0R
    P5pJWH31aaefQzaiYyL2MOk44fbBekdtL5V0txk0sp5bLmPGoQGOHSPsVkPOpzG5LbJ8hrfsttbl
    ci0bYX/C2HrxaGWIbjck51yu8GQpG+w44new0IL2knonp61kO3FhpKuldUTpYc9s0wMThANIyPMr
    fd29z19DWtpaeaWy3yRqEBjFzwcxHEABd92344b88dfFhZNtuENvjf8A6QyeBbrpdrqciNGNqXd2
    AkzpYvS3BAjZaVGGV19NBJE9KzNXdqauvLptxJ9FhIAgTg0wAgOZxPmFsqGx1lt2+yRamj8RMa0k
    xAxcIuMTxA+EeRWC8Z+1Plk2a3fmWfl/MkZDsZd4j6vyb7kMW9SoE9v+kYOORSHn0A/xNkCfh9UX
    RO2rG7q2yVUgOoQGzWkZNLQRxjgB4xzVXYtv3FRVJbciXyXA4ueHkHhDEmByIy9i5psL49tr7R5t
    M3jfb2F2qw+CxuLZLSSIrLdxuv06x20aQtEbYkOvuAnQewE00rqXLc85235RifUeSwnwbGPmRAHq
    VxbRs6QzdE4aR6UtomNHDU6EBDkCXEdAs7zr2Y81m8HJe55Rx3uMvHNlLW6EXFoVkyeFbG5DDIpr
    JmMDKD5TdcUi7XhXQdB09Kq7dr7BTUjWVQD5h/aJYTDwBhhDw6q9uq2bnrK50yjcWSWmDQ2YGxA4
    kRxiefDBbL5Q9jc73v8AFKzuJyTtUWDykwKJCvst2CcdwAlDJag3AQcjkofHIYJXVAVVEJB9PwpV
    PaVwl0t5MqkcTImEgRjlCLc+IOEeUeav75tc2tsAnVrQKiUA4whnEB2WECMYc4clifH2dj4CeGi6
    8qrVb2ZW4d2g3DMJPypqMiUcs7ZaWXSBRL4RH4lIUXVFI9PVaduXVd762jJgxpDeghFx65+wJO0d
    Ni246va0F7gXnxMdLAfDL2lcQ8WHlk5Yb280LJspyKvDOV4HmLswY7Ui329g7TPjRH58d6KURhle
    3uYRtRJVREXuTRU9e7u/Z1HS0Lp9K3Q5kOJMQSAQYk84rN7F37X1tyZTVjhMZMjwA0kAkEQA5Q+1
    aT54/wDM4xr9iY5/Wcyrvb76U/5ne4Kj3Q+tS/kZ/EVcXzw8x93+KOyGJ2rY6eVizjL58yG9kUUW
    1lxbfCZaefZjmYkrZPOOtKpj6ogLp6qipiO39kk1895qBqawA6eBJjAnnDH2r0PubuCotlNLbTHS
    +YSNQzAEIgcomGPgtX8FXMndLmZtZuJsTyannlzliCJ8Nwu6I6/Mtd6blx5ESU5oiuIKseinqSoa
    oq6Imlrf1klW2dKqKUaNUcBwLYEEcs/sVPtpuCfdpE6mrD6mmGJzLXRBB55faqM8Kt1ct8f3kPzj
    B9pNsT3W3Nt90veA2O3R3pDc6O1BurkeQ9HViPL0I2o+huKOgh3ar2qWu6vlIy7W6XMnTvRYWteT
    wxERHEc8ua8727Wvst1my5Ej13hzmAYxEHQJEAeAxPAeCsIPG/8AMV7i7jHvouTT8YuEmStyiYzI
    yyI1bIzRuE43HW1Rn34agIqg9roKWn6X4tazhuW3JMr0NAcAIatBifHUQD7PJasWndU+b+J1lhJi
    G6xAeGkEj2jrit6/Mu47Gl8Y9rsyvsVoc5i35y3G+yno2Ey0uvyWgJdS7FdigqevtXO7aTCKqcxp
    +Etj7Dh711e7EoGkkTHD4g+HtbE/aAtqyu+//wAkPCdZ8i2XZYib1X+FZzcu6tNOEWQZG0EqTKNH
    EMXVjMd4MoSKmjYappqlVJTP79e3NnRMtpOH+VuAHhE59Sr02Z/+csDXSICY4Nx/zOxJ8YCMOgVN
    OA3nO3a2TyTJLPzWuV63R2bvdvdaZtr6Qp0ti4G62OnfPcZT6ZxgnRcbUlTXt0H9LXYX/Y8qpa00
    QbKe054gQ8uMYQKxG2+4E6lc9teXTpbhlgTHzhgRGI6LoX5cifiV153buXTAYjtvwSTYZr9lgSyE
    340BzIYpxmXCFVRTBpRElReqVze4bXtoZImGLg4RPM6TFdXti5jrhPMsQaWmA5DUID2LtfHvw9tb
    y+RbdTmRyjtYO7Ps5fepOF4vOHVLzIauJiM6Y0SaLEAgX42y/wDGL1X+jTRziV+7fw9vk0dMfj0N
    1OHDDIePM8OuWgtuzPxNynVtWP6fqO0tP+IxzPhyHHpnRrzo8s+QG9nMjIdj9zYxWDbvbqa9asdx
    ph10o7raiht3V3uQEN2UwYmC9qIDZIKfziLZ7KtcinpGzpZ1OmCJP8vQH2nFYffd3qKmtdImjS2W
    YBvD5upGPgMOtIzrXlYsITqEwIS60JTAjoUatMXStuvCQoL0qCiVl/Dx/mNbdf7/AP8Api51iO43
    0af/AKP42r0vtD/9FTf+T/aer7+eH+CGN+8tr/VZteS9q/qh+7d72r3jvl9FH3rfc5dx8fX8EG1X
    7s2r9VCsxu76pU/eO962uwvotJ9033Ki3hS/jy3g/wBRuf8A1CzXqHcv6VTdW/wFeKdnPrlb8rv9
    wLZ/zFP/ALI2t/16+f6CDVDtB/1ajo33uXV7/f8ARpPmf7mqwHiB5FryB4XWKLdpPz5rhpLiN17y
    UnSCGAlCdLuRFXuim2Pd66kJeuuumT7g2f8AAXJ5aIMmfGPPMe2PkQt12pv/APc7PLDzF8n4Hc8P
    2T+7DHiQVw78wTyCHGdqcU402N7suGRyVyG8tNroo263L8cZsx1/Rdkmpp6dWf8Av03ai0+pPmVr
    hgwaR1OfsGH+pY/vnffRppVuYcZh1O+VuQ6F2P8ApWS/Lx/w05v+8/8AyqHSO7X5yV93/MVZ7EfT
    p/3v8rVxj8xX/jdt3+w5n6+taDtJ+WnfOPcsr32/OU/3Z/iXT/y6P+D25H7Zt/6kdcXu3+YkfKfe
    tH2I/K1Pzt9y43+Yo/iZwf8Adf8A5rMrvdp/yc37z+ULM98vqEj7r+Zy89S6V6mvFAu6eMT/ADAN
    qv26x/o3KzG8vpdR8hWz7f8A1ml+cLvP5ij+NbF/3Itv9fXusv2r+nTPvT/CxbXvZ9Vl/ct/jmK1
    Oet5t5DvEDjkvjDcz/vgskOznIt9tmLEkHc7HHSHPgKYGCgRgRONCSohIodEJFrFU3p2S+vFY3+m
    4uxIiIOMWu/QeWK9Eq/V3HtqWaB39VgbEAwOpgg5vhHEiOeHNUx4g+OXyJcjtzSxnc6bmO223MRu
    SVxyPIhurJC6DS/A3FiTJEQ5Cm6ooqgSCg9y92qIi72+7qtdDJ1yRLmvMINbp84kAww848F5ltrZ
    V6uU/wBOoM6RLEYudqHQAEjVE8sIRxXS/F1uRg/F3yj5hx/yHP8A+21lvcI8NtmaTUJhubd4T7El
    tgFelS9BUkeZDR1UM+3t/SSuPvClmXCzy6lsr0y06iwcGkERyHgThgF39hVsq136bRvn+qHDQHnC
    LgQYYk+IGOJhDNa15O+G3kKsXMLJsq2cgZbku1uXzlvFkk4kd0mMRVloJPRpDcIiSP8AG6pIimiA
    oaKi9USxtK+2x9Cxk8y2PYIHVARhkRHOI84qrvnbV4l3KZMpmzXy5jotLNRAjmCB+zA88ILUuWvj
    53h4u8K7VvnyH3duMTdG/KzBPa6ST8z5npD5ErP1aXNRL4YqI49/QEIl+HVdRVblm3LIr691PS04
    LG4+pgMuMNPE4DHLFUr/ALQqbZbG1VZUuEx+HpGJxJyjq4DE4EA4RyVu+D8KBzx8Jlx42YfMYb3J
    ttuuGIvx3z7BZuEWaVztqu9uhI26Cs6noqa93XtVKxG4HG038VTwdBId5EQd5jH7F6Ltdovm2XUU
    sj1GtLOhB1Nj4HDHryVe/FL4weUez3Mix75cjbEWEYDhsh4AcusmJ8lzuc+O7a4kWIjDjyGiuyUJ
    TT8KomgqqqlaPeG7KSpoXU9K71HPHAHAAxJOXAZLKbE2TXUlxZVVjPSZLPEj4nEFoAhGOJzy5LXP
    PH/mcY1+xMc/rOZVjt99Kf8AM73BV+6H1qX8jP4irg+c3iDurzI2kx4OPbLOQ7jYBNfm3bGIsqOM
    9YN2jCKOg24Y6kixUUQVUUx7u3uVNKxOwrzJts5/4n4WTBAOgYRB/wCPlxXoXcqwT7tIZ+EAe+US
    S0ERg4Z/Zlx4RWveFbh/uB4/tj9yeQ3LKOGJuXhmLLOFPdaV63Wexsy5D0iT8RkIK6UhdAVe5EBN
    UTXSrG+LzLu8+VTUZ16Y4ji50BAdIfaqvbuwTbJTT6uuHp6gDA5hrYkk9Y5Z4LXPy/mUYBvLutyE
    3/lMNf3w5Ffwuxq+IfVx7Xd5c+4KDfXtE31X5OxdFUB16DVjuHKmU0mlpwf6bWw8CWgD3ZdSq/a+
    dKqp9ZVEf1Hvj4hri4/ac+g8FUbf7h75WOVvLK/Y3vva8kDHzu0opuT31JjOG2m0tSSMpUeS8QQU
    jMMJ8gg0XcqJ6IprWuoLxaaCka6nLI6RBohrJhkR+1EnDH3LFXKxXq41z2VLXw1GLjH02tjmD+zA
    DGAx81bj8yA3aw4TbXfYHVk2AciijDkquvyMfYZnxGqogp+IE16JWO7cE/jZ2rA6DH94Ldd1AP7f
    I04jWIfulZze3Frz5SPB9jH9wXZeN0bDDscmRZmjAXnLxjsdIFxhomooLhNm440Kp+NFDT9JFqvR
    TRZL4/8AEYMcXY+DjEHpkDyx5K1XSnX/AG+z8N8T2huH+Zog4dcyOeHNUq4B+ELeLkXPyXIuWUO9
    7R7TWOEbjFzvkD7fLkTRMDJUj3UWiSM2wLhOOqiDr2oir+LTZ3/e0mkDW0hbOe45AxEOo4kwgFhd
    t7Bn1pe6sDpMtozIgSehhgBGJXUfy4luxa0c6t2rTg05y54TFsEyPZ7lIaRl2XBbyCIEd9xtFJAJ
    xtBJR1XRV0rldxHOdQyS8QcXCI5HSYhdrti1jbhPEsxaGGB5jUIH2LC+R/y/b94t5NLaxjXfb9p9
    kcjdiM45HfLsvLrPy2+5SJRJ2opvxnnWW0X0bAvT1IlU9vbTkPtp1YvnNz5cQB0MCeZ8kG5d5VDL
    oA3Bkh8NP/NwcT1BIHIea3n8w1xyxPerZ7AvJdsiAzsZnwoFsyKdGFER613IEk2ec4idFE3VYNVV
    V1Nsf5tUNhXB9PNmW6dgQSQPEftD9PkV0u4ltZUyZVzkYggAnwOLT+jzAXkYdepFeSBCdQmBCXWh
    KYEdCjVpi6Vt14SFBelQUS2TZ7eLcbYLca3btbS3H7TuDafqPt9w+niyvi+qiuw3f6KY080Xc08Y
    /iBdNdU9dFqjcrdJr5LqeobqY6EREjIgjEEHMDiupZ7vUWuobV0jtExkYGAMIgg4EEZEjELfN+fI
    Fy65NYOO3G9+W/e8MCS1chhfa7LD0ksCYNn8kCFHc9EcL07tPXpXIte0bdbZvrUsrS+EI6nHA9XE
    cF375v27XiR+HrZ2tkQYaWDERhi1oPHms1t95TOd+1eD2rbjA86+gwuyRmrba4X2XHn/AIYzAoDY
    fJItzjhaInUiVf5VqpWbFtVVNdOmyYvcYk6niJPR0FfoO518opDKeRUaWMADRolmAGWJYT7StC2V
    5c8huOueXjc7ZzIfs+cX9t1m7TvobbL+cHpAyzT4p0Z9odXRQvwCn8nT0rp3Pb9HcJTZFSzUxmQi
    4QgIZgg5c1xrNuuvtU99TSTNEyZEOOlpjExODgQMeQXZ9mN0N7fK1yfwLjny3zGXcMMcK+PQ5Fqg
    2S3yojrdjkzu4CiwAEkJyE2hIYr+HVE7VXWs1cqGm2vQzqy3ygHfDGJcQfiA4u5E5cea2VnudbvS
    5U9vus5zmfHAtaxpB0F3BuOLRGMcMoZr034c8FtlPHVjmV3vHcmuMiz3gY0u9TsnlQ2ocVm3C+om
    KNMsAGiPl3kSr6adNPXxTcW6Km/vltfLaC2IAaDEkw8THLAL6P2lsqj2rLnPlzXFr4FxeQAA2OOA
    AGZiSvIHyN8mYvK/ltk26FjeN7BWTbseNq4ij/6bAFWgcESXVEecU3tF9U7+iV9AbQsptdBLkOEH
    /tO+Y/qEB5L5X39uIXq6TalhjLHws+VuEfMxd5rD8eeeHK3ijjU7D9gsq+w45cpX3ObG+2Wed8kn
    4gY7++4w5Jp+BsU0FUT06U277Xobm8TKqXrcBAfE4YZ8CFXsO9LnZpbpVDN0NcYkaWHGEP8AE0nI
    LBcjOWO//LG927I+QF/+/wB6tLBwbe99DbYPxMOOfKQ9ttjRhLUvXUkVasWmxUtsa5lIzQHGJxJx
    8yVXvu5q68vbMrpmtzRAYNEBn/hAWR4685eUvEuz3Kwcfco/s/abu83MuLX220TvleaBWwLuuUSS
    Q6CumgqiVXu+2qK5ua+ql6y0QGLh7iFbsO8LjZmOZQzdAcYn4WmJHzNKwfIzlRvzywyeFmO/9++/
    5HbYv2yFJ+it0H443ym/2dltjxgX8bhLqSKvr10p9pslLbGGXSs0tJicSccuJKr3zcdbeZjZtbM1
    uaIAwaMIx/wgDMrnRdK6i44WZ2z3NzjZncC1bpbbTvtud2R8Z1rnfDHkfC+KKiF8Upt1ovRehCqV
    UraOXVSnSZwixwgRiMPKBV+3V82inMqJDtL2GIMAYHoQR7Qs3yM5Pb5csM2i7i7/AN8+/wCYwoLd
    ljTPo7fB7ITL78kGvjtseM2ujklxe5RUvXTXRE0qWqz01tlmVSt0tJjCJOMAOJJyAXQvV/q7vNE+
    tfreG6QYNGAJMINAGZPivp438v8AkXxHyGTkWwOTP2N6agjcInYzJhS0b7kD54soHWSUUJe0u3uH
    VdFSlXexUtyaGVLA6GRyI6EYp9i3LW2d5fRzCyOYwIPUGI88xwXUN5vMTz63rxCTgl9y8LVjU1so
    85vHIUa3PSGjRRICkNCr4iqKqKgGKKnoutcSg2JbKR4mNl6nDLUSYeWX2LR3LuXeK6UZT5ulpwOk
    BpPnn7Cqug87HdCRHJQfAkMDBVEhIV1RUVPVFRa1pEcCsO0kGIVqtv8AzZeRDbvFWsSZzFm8RIwI
    zGl3+2wps0ARFRO6STYuOr6/pOqa/wDbWLqtgWuc/X6ZbHgCQPZw8oL0Oi7n3mnliX6ocBkXNBPt
    zPnFcF5Ccmt9uU+aJn2/WRychyNsFYjFJ+NtiK0pd6txo8cW2WhVfVUAE1X1XVa0NttNPb5fp0zA
    0faepOJ81l7tfKu6TPWq5he7hHIeAAwHkF9fGTmByF4eZe9mewGQu2afMAWLjEJtqTCmtgqqIyI0
    gTbPt7l7S07h1XtVNVpN2slNcmenUs1AZcCOhGKs2PcNZaZhmUj9JOYzB6g4fpHBb/u95Zudu82a
    Y5nOTZikWfiMwbxYIdst8BmDHngBNjJcjGy42+aCSonzIaDqvaiarry6PZ1vpZb5bJcQ8QJJMSOU
    Y4eUF2q/ft0rJkua+bAyzFoAAAPOEIE9Yw4Lle/fKffjk1udG3k3vvv3vciGxGhRrl9FbofYzEdN
    5kfhgR47K9puEuqhquvrrXUt9op6GUZFO3SwkmESc88SSVx7nfKq4zhUVL9TwAIwAwGIwAA+xbhY
    PJbzaxjkHceUFuzqSu8F5YjwbzKONBSHOixGhZZYet7bAROwBD8Pa0ioqqSKhEqrQm7XoH0wpDLH
    ptJIxMQTmQYx+37F1ZO8blLq3Vomn1HAAmAgQMAC2Gn7PHMr6+U3lM5q8vsRTbzd3Ku3b0iFyTZL
    HFYt0WWYGjgLKSOiG8gkKEgmSiioiomqa0m1bTobc/1JLPi5kxI6Ry8sVYvO9bjdJfpT5nwcgAAe
    sM+hwXKtgOR29fFncVjdbYXIJGPZuy2cUpMZG3G347iiRsSGHxcZebVQEuxwVTuRCT1RFTqXG2yK
    6X6NQ0Ob+nmDmD0XJtV2qLdN9emeWO945EHAjwK7FyN8wnPTk5t7L2qz/LW4WA3ECYusDHoMa3LO
    ZJFQmn3mR+YmyRVQm0NAJPQkVK4du2db6KYJstkXDIkkw6DKPjmOC0d033crhKMmbMgw5hoAj4E5
    w8IwPFc/3t8gHLnkTs1ZuP8AvNl33zabHnIT9otj1rszJsO26G5AjH9VFhNSjIWHTBVNxVLVVLVf
    WrtFt+jpJzqiSzS90YmLuJicCYZ+CoV25q6tkNpqiZqlthAQbhAQGIAOR59V8PFfnNyh4WXuVeeP
    GUPWaNcFErna3m2ZdumKCKIk9FlA42pihKiGiISey1N2sdLcWgVDNUMjkR5hTZtw1drcXUry2OYz
    B6g+/NbxyZ8vPPPlXg8jbLcrMEi7eTB+O42nH4ca2NTQXqElyOCPONr7tqfYvuK1z7btGgoX+rKZ
    FwyJJMOnDzzXUum9bjcJfpTZkGHMNAEesMfKMFy3jJzC5GcNMsuOc8bci/s3lN1ifaZ8r6C2XD5Y
    vzBI+PsukWUA/jbFdRFF9OuldG52inuDAypbqAMRiRj5ELm2i9VNteZlK/S4iBwBwz4grS90ty82
    3l3DvW625M37ln2Qy37teJ/wsR/qJUg1ccc+KK200GpLroAoieyVZpqZlPLbKliDWiAHh54qtU1U
    ypmOnTTFzjEnARJ6YLpto8j3M+wcaXeH0HM/k45vQ5NoPHJtpscxEiS3TfcbGXLguyx0ccUgUXUV
    tdOxR0TTlP29RuqfxZZ/ViDEFwxHgDDrhjxXZlblrWUv4MTP6UCIENOB8SI9McOC4UddgrjBCdQm
    BCXWhKYEdCjVpi6Vt14SFBelQUSjUFEoVBRKFQUSgvSoRJ7Nfb3jVzavmOTH7feo6qTEyE64w+2p
    CoKoONKJJqiqnovSlzZTZjS14BB4HEJ8ie+S4PluLXDIgwI8wsvl+8u7+e29LVnWV3i9WtF7kjXa
    5zZjSLqha9kh0x6ii9Paqsi3U8g6pUtrTzDQPcFeqbvV1LdM+c945OcSPtK1cqtqiFAutCjCMulf
    kQRnQowjP3qEYRl0qEYRH70JRhGdQUYRF70JRhGXWoTAiLpQowiP3oUYRH1qCmBEXShKYER+9QUY
    RH70JTAiOhRhEdCUwITqEwIjoUwIToUwIj96gpgROe9CjCFz3oU0IjoUYQnQpgRHQlMCE6hMCEut
    CUwI6FGrTF0rbrwkKC9KgolGoKJQqCiUKgolBelQiUC6VCIKBdKhGEZVCIKBdaFGEZdK/IgjOhRh
    GfvUIwjLpUIwiP3oSjCM6gowiL3oSjCMutQmBEXShRhEfvQowiPrUFMCIulCUwIj96gowiP3oSmB
    EdCjCI6EpgQnUJgRHQpgQnQpgRH71BTAic96FGELnvQpoRHQowhOhTAiOhKYEJ1CYEJdaEpgR0KN
    WmLpW3XhIUF6VBRKNQUShUFEoVBRKC9KhEoF0qEQUC6VCMIyqEQUC60KMIy6V+RBGdCjCM/eoRhG
    XSoRhEfvQlGEZ1BRhEXvQlGEZdahMCIulCjCI/ehRhEfWoKYERdKEpgRH71BRhEfvQlMCI6FGER0
    JTAhOoTAiOhTAhOhTAiP3qCmBE570KMIXPehTQiOhRhCdCmBEdCUwITqEwIS60JTAjoUa//Z"
    /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:34:21.650

尝试根据[.net 使用隐藏附件 - 在 html 电子邮件中嵌入附件图像](https://stackoverflow.com/questions/3786644/net-embedding-attached-image-in-html-email)

```
Dim plainView As AlternateView = AlternateView.CreateAlternateViewFromString("This is my plain text content, viewable by those clients that don't support html", Nothing, "text/plain")

Dim logo As New LinkedResource(Server.MapPath("images1/links/beach-icon.jpg"))

logo.ContentId = "embeddedimage"

Dim htmlView As AlternateView = AlternateView.CreateAlternateViewFromString("<p>Here is an embedded image.</p> <img src=cid:embeddedimage> <p>More text here</p>", Nothing, "text/html")

htmlView.LinkedResources.Add(logo)

objMM.AlternateViews.Add(plainView)
objMM.AlternateViews.Add(htmlView) 
```

# mysql - MySQL聊天表，加入用户名？

> ID：15615480
> 
> 赞同：1
> 
> 时间：2013-03-25T12:54:34.623
> 
> 标签：mysql, sql, join

我有一个像这样的简单聊天数据库：

```
id | from | to | message
---|------|----|-----------------
1  | 1    | 2  | hello
2  | 1    | 2  | are you there?
3  | 2    | 1  | yes I'm here! 
```

还有第二个表，其中包含名称

```
`users`.`firstname` and `users`.`lastname` 
```

我正在尝试将两者结合起来，因此在检索聊天时，我也会有两个参与者的姓名。我的查询现在看起来像这样：

```
SELECT 
  `messages`.*, 
  CONCAT(`users`.`firstname`, " ", `users`.`lastname`) as `nameFrom`     
FROM `messages`     
  INNER JOIN 
     `users` ON `messages`.`from` = `users`.`id` 
```

它工作正常，但如果我尝试添加另一个连接，只需更改`messages`. `from`到`messages`. `to`我得到错误。

检索聊天记录时如何合并每个参与者的名字和姓氏？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:57:54.373

看起来您正在尝试同时获取发送者和接收者？如果是这样，这应该可以加入用户表两次：

```
SELECT 
  `messages`.*, 
  CONCAT(u.`firstname`, " ", u.`lastname`) as `nameFrom`,
  CONCAT(u2.`firstname`, " ", u2.`lastname`) as `nameTo`
FROM `messages`     
  INNER JOIN 
     `users` u ON `messages`.`from` = u.`id`
  INNER JOIN 
     `users` u2 ON `messages`.`to` = u2.`id` 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T12:57:59.707

如果您提供唯一标识具有相同表名的表，则基本上需要在表上连接表`users`两次。`messages``ALIAS`

```
SELECT  messages.*, 
        CONCAT(a.firstname, ' ', a.lastname) as nameFrom,
        CONCAT(b.firstname, ' ', b.lastname) as nameTo  
FROM    messages     
        INNER JOIN users a
            ON messages.from = a.id
        INNER JOIN users b
            ON messages.to = b.id 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/619d9/1)

# wpf - 应用程序设置绑定到特定于实例的 UserControl

> ID：15615481
> 
> 赞同：0
> 
> 时间：2013-03-25T12:54:34.813
> 
> 标签：wpf, binding, user-controls, application-settings

我的 MyUserControl 类型的应用程序中有三个控件。MyUserControl 包含一个标签，我想将其绑定到位于应用程序设置中的字符串。MyUserControl 的三个实例中的每一个在应用程序设置中都有自己的字符串，分别名为 Description1、Description2 和 Description3。

问题是我无法将 UserControl 中的绑定路径设置为位于应用程序设置中的字符串的名称，因为这样 MyUserControl 的每个实例都会绑定到同一个字符串。

我已经设法让某些东西工作了，但正如我在使用 WPF 时了解到的那样，我提出的解决方案从来都不是做事的最佳方法:)，所以我想知道是否有更好的方法来做到这一点？以下是我现在使用的相关代码：

MyUserControl.xaml.cs

```
public partial class MyUserControl : UserControl
{
    public static DependencyProperty DescriptionProperty = DependencyProperty.Register("Description", typeof(string), typeof(MyUserControl));

    public string Description { get { return (string)GetValue(DescriptionProperty); } set { SetValue(DescriptionProperty, value); } }
} 
```

MyUserControl.xaml

```
<UserControl x:Class="MyApplication.MyUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:MyApplication"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300" Name="myUserControl"> 
```

...

```
<Label Content="{Binding ElementName=myUserControl, Path=Description, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,6" /> 
```

主窗口.xaml

```
xmlns:properties="clr-namespace:MyApplication.Properties" 
```

...

```
<local:MyUserControl Description="{Binding Source={x:Static properties:Settings.Default}, Path=Description1, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" x:Name="myUserControl1" DataContext="{Binding ElementName=MainWindow, Path=Params}" />
<local:MyUserControl Description="{Binding Source={x:Static properties:Settings.Default}, Path=Description2, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" x:Name="myUserControl2" DataContext="{Binding ElementName=MainWindow, Path=Params}" /> 
```

# linux - 了解 linux 标准 USB 网络摄像头驱动程序

> ID：15615494
> 
> 赞同：6
> 
> 时间：2013-03-25T12:55:00.560
> 
> 标签：linux, usb, driver, webcam

我试图了解与 USB 网络摄像头接口的软件层。

**据我了解：**

标准网络摄像头属于[“USB 视频设备类”或“UVC”类别](http://en.wikipedia.org/wiki/USB_video_device_class)。

而在linux中，[Video4Linux（V4L，V4L2）](http://en.wikipedia.org/wiki/Video4Linux)封装了所有的视频采集设备。V4L(2) 提供了两种 API：一种是用于希望从捕获设备获取和使用数据的程序。另一个 API 是内部的，用于驱动程序本身，因此程序可以通过 V4L(2) 的外部 API 访问这些驱动程序。

其中一个 V4L(2) 驱动程序是[UVC 驱动程序](http://www.ideasonboard.org/uvc/)，它包含所有符合标准的 USB 网络摄像头。

**我的问题：**

查看[UVC 驱动程序](http://www.ideasonboard.org/uvc/)的主页，它显示了支持的设备列表。UVC 驱动程序中是否单独满足了这些设备中的每一个？还是仅当设备具有需要处理的特性时？换句话说，是否所有符合标准的 USB 网络摄像头都应该自动使用 UVC 驱动程序，无论它们是否在该列表中？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T17:47:43.440

USB 视频类已发布具有规范的手册，供应商应实施这些规范。当供应商考虑这些规格来设计他们的产品时，该设备就符合 UVC 标准。

我正在使用符合 UVC 但未列出的网络摄像头。

当我将网络摄像头插入 Linux 机器时，一个简单的“dmesg”会显示以下消息 1\. 发现 UVC 投诉设备 2\. 该设备未列出。

我可以通过这个网络摄像头轻松流式传输未压缩的帧。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T13:01:06.777

我相信“支持的设备”标题下的文字可以回答您的问题：

> 下表列出了已知的 UVC 设备。很可能支持其他符合 UVC 的视频输入设备。

因此，符合标准的未列出设备*应该可以*工作。从嵌入式环境中的大容量存储（“USB 闪存驱动器”）的经验来看，您的里程可能会有所不同，因为并非所有设备都是工程的优秀示例。

# wpf - 如何设置 RibbonComboBox 的样式

> ID：15615502
> 
> 赞同：0
> 
> 时间：2013-03-25T12:55:24.387
> 
> 标签：wpf, xaml, combobox, styles, ribboncontrolslibrary

我已经描述了[绑定 RibbonComboBox 的 SelectedItem 的](https://stackoverflow.com/q/15555449/385995)问题。尝试设置此控件的样式时会出现另一个非常难看的问题。

从上面提到的帖子中的无样式 ComboBox 开始：

```
<r:RibbonComboBox >
    <r:RibbonGallery SelectedItem="{Binding SelectedItem, Mode=TwoWay}">
        <r:RibbonGalleryCategory ItemsSource="{Binding Controls}" DisplayMemberPath="Caption" />
    </r:RibbonGallery>
</r:RibbonComboBox> 
```

我得到了预期的结果：

![在此处输入图像描述](../Images/8085590882e61b3439ca12b546e8d8c8.png)

但是在 Microsoft Blend（VS 2012 预览版）的帮助下应用样式时，Object | 编辑样式 | 编辑副本...（仅复制模板，使用 Blend 或 Visual Studio，具有相同的效果）：

![在此处输入图像描述](../Images/e05026a51dee8ed8a8f54e02666f622b.png)

所选项目将不再正确显示 - 而不是 DisplayMemberPath 属性，而是显示类型名称。下拉列表中的项目仍然正确。请注意，我还没有以任何方式更改样式，它是提取的默认样式/模板会产生此问题。

```
<r:RibbonComboBox Style="{DynamicResource RibbonComboBoxStyle1}" > 
```

![在此处输入图像描述](../Images/abfd7c6652a892349ffca960a17ac52a.png)

我在设置下拉项的样式时也遇到了麻烦（主要是想更改鼠标悬停背景角半径），因为 RibbonComboBox 的 ItemContainerStyle 将具有目标类型 RibbonMenuItem，并且似乎对实际的 RibbonGalleryItems 没有影响。

1.  如何修复 RibbonComboBox 样式？
2.  如何通过 Blend/VS 获得 RibbonGalleryItem 样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:01:30.737

目前，我已经通过使用 ILSpy 直接从 RibbonControlsLibrary.dll (Resources/RibbonControlsLibrary.g.resources/themes/generic.baml) 中提取默认 RibbonComboBox 样式解决了这个问题。

这是一项繁琐的工作，因为样式引用了同一文件中的其他 StaticResources，因此您也需要找到并提取它们。

这同样适用于 RibbonGalleryItem 样式，它可以像这样提取，但我更喜欢涉及 Blend 或 Visual Studio 的“更干净”的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T18:49:08.177

您可能想看看[JetBrains dotPeek](https://www.jetbrains.com/decompiler/)反编译器。

它的[特点](https://www.jetbrains.com/decompiler/features/)之一是：

> “...反编译 .baml 文件，使您能够重建 XAML UI 定义。”

另外，我刚刚使用上面提到的反编译器完成了对可视化 RibbonCombobox 及其相关控件的编辑，它反编译了包括原始 Microsoft .XAML 主题在内的整个 Ribbon 库。

# ssis - 如何通过 DBAmp 使用 SSIS？

> ID：15615504
> 
> 赞同：9
> 
> 时间：2013-03-25T12:55:34.477
> 
> 标签：ssis, salesforce, dbamp

如何将 SSIS 与 DBamp 结合使用来提取 salesforce 数据？我想要的是使用 SSIS 和 DBAmp 过滤 salesforce 数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:22:27.057

DBAmp[主页](http://www.forceamp.com)清楚地表明这*应该是*可以实现的：

> SSIS 和 SSRS 支持 DBAmp 与 SSIS 和 SSRS 无缝协作。使用 DBAmp 和 SSIS 构建复杂的集成。使用本地数据、镜像或实时销售人员数据与 DBAmp 和 SSRS 的任意组合构建复杂的报告。

因此，进一步深入他们的页面，[PDF 文档的第 5 章](http://forceamp.com/hats/DBAmpDoc.pdf#page40)有一个完整的部分

> 将 SSIS 与 DBAmp 一起使用

包括

> 直接连接到 DBAmp 以从 salesforce.com 提取数据

我不会在这里剪切和粘贴整个章节，但它解释了如何使用 a 设置连接`DBAmp OLE DB Provider`，然后`OLE Data Source`在 SSIS 数据流开始时使用 a。

# twitter-bootstrap - YII：无法为 TbButton 设置 ID？

> ID：15615505
> 
> 赞同：1
> 
> 时间：2013-03-25T12:55:41.257
> 
> 标签：twitter-bootstrap, yii

我有一个生成按钮的视图：

```
$view->widget('bootstrap.widgets.TbButton', array(
    'id'         =>   'removeButton',
    'label'      =>  $label,
    'buttonType' => 'ajaxButton', 
  ... etc 
```

生成按钮后，我检查代码，我看到：

```
<button name="yt0" id="yt0" class="btn btn-primary btn-large" data-loading-text="loading...."  type="button">Add to Cart</button> 
```

为什么名称和 id 都是 yt0 而不是我指定的“removeButton”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T13:03:33.523

它应该是：

```
$view->widget('bootstrap.widgets.TbButton', array(
  'htmlOptions'   => array('id'=> 'removeButton'),
   etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-13T13:53:43.377

完整示例：

```
<?php
$this->widget('bootstrap.widgets.TbButton', array(
    'buttonType' => 'submit',
    'type' => $model->isNewRecord ? 'primary' : 'info',
    'label' => $model->isNewRecord ? 'Create' : 'Save',
    'loadingText' => 'Saving...',
    'htmlOptions'   => array('tabindex'=>7, 'id'=>'submit-button', 'class'=>'buttonStateful'),
));
?>

<script>
$('.buttonStateful').click(function() {
    var btn = $(this);
    btn.button('loading'); // call the loading function
    setTimeout(function() {
        btn.button('reset'); // call the reset function
    }, 3000);
});
< 
```

# javascript - html表格的排序和分页

> ID：15615515
> 
> 赞同：0
> 
> 时间：2013-03-25T12:56:23.737
> 
> 标签：javascript, jquery, html, json

我正在使用这个 Json 到 Html 表并且我也得到了这些值。我需要做的就是为此实现排序。有人可以帮我吗？在 objArray 中传递我的 Json 数据的位置。我需要做的就是实现排序和分页。请帮帮我。

```
function CreateTableViewX(objArray, theme, enableHeader) {
        // set optional theme parameter
        if (theme === undefined) {
            theme = 'mediumTable'; //default theme
        }

        if (enableHeader === undefined) {
            enableHeader = true; //default enable headers
        }

        var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;

        var str = '<table class="' + theme + '">';

        // table head
        if (enableHeader) {
            str += '<thead><tr>';
            for (var index in array[0]) {
                str += '<th scope="col">' + index + '</th>';
            }
            str += '</tr></thead>';
        }

        // table body
        str += '<tbody>';
        for (var i = 0; i < array.length; i++) {
            str += (i % 2 == 0) ? '<tr class="alt">' : '<tr>';
            for (var index in array[i]) {
                str += '<td>' + array[i][index] + '</td>';
            }
            str += '</tr>';
        }
        str += '</tbody>'
        str += '</table>';
        return str;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:02:14.660

尝试 Jquery[数据表](http://www.datatables.net/)

您只需要在您的解决方案中引用 Jquery 和 datables 脚本文件，使用 Id 或类名选择您的 html 表并像这样初始化它。然后，Datatable 将为您处理排序和分页。

```
$(document).ready(function(){
    $('#tableID').dataTable();
}); 
```

# java-ee-6 - Apache Deltaspike 的示例和文档——它们在哪里？

> ID：15615519
> 
> 赞同：3
> 
> 时间：2013-03-25T12:56:36.287
> 
> 标签：java-ee-6, cdi

我遵循 Java EE 的道路已经有一段时间了，使用了 JBoss Seam 并在 CDI 中遵循了它的标准化。

现在，在尝试解决从 Seam 2 到 3 迁移的艰难道路上的第一步之后，我了解到一切都转移到了[Apache Deltaspike](http://incubator.apache.org/deltaspike/index.html)。

但是，虽然 Seam 有很好的文档记录并配备了示例，但 Deltaspike 却没有。有一些菜单项导致“文档”非常差，到处都是 TODO，没有任何可见的结构，还有“示例”，这或多或少是个笑话。

自从我尝试升级到 Java EE 6 以来，我感觉有点像站在雨中——尽管这很棒，Seam 2 的许多概念都进入了标准，我怀念以前的很多东西——而正是这些东西应该被 CDI 扩展覆盖。再次强调，在像 Apache Deltaspike 这样的项目中共同努力引导这些扩展是很棒的——但目前，即使您不是该技术的初学者，也很难从中受益。

那么 - 任何人都可以引导我获得如何使用和理解 CDI 扩展的体面资源、文档和示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:57:34.640

正如其他回复中所指出的，DeltaSpike 文档有点缺乏。您可以随时查看测试和 javadoc。例如，我认为您会发现[JBoss jdf quickstarts](http://www.jboss.org/jdf/quickstarts/get-started/)是当前示例的最佳位置。在右侧搜索 DeltaSpike，您应该会看到大约七个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:18:05.003

DeltaSpike 仍处于开发初期。它仅在 0.3 版；它可能需要相当长的时间才能投入生产。在那之前，您可以看看[MyFaces CODI](http://myfaces.apache.org/extensions/cdi/)或[Seam](http://www.seamframework.org/Seam3)，这两个项目的开发已经停止，因为它们目前正在合并到 DeltaSpike。

我同意 DeltaSpike 网站上的文档对用户来说是不够的。我敢打赌，它只适合想要测试或开发它的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T01:04:01.783

这是一个具体的例子。我是一个相当有经验的软件人。我想使用 DeltaSpike`BeanProvider.getContextReference`将 EJB 注入一些本身不是 EJB 的代码中。我包含了必要的 Maven 依赖项并将 BeanProvider.getContextReference 代码添加到我的一个类中。我收到错误消息，告诉我 DeltaSpike 未配置。两个小时的文档并没有让我更接近于理解我需要做什么才能打开它。似乎缺少的是“如何配置 DeltaSpike 核心”。页。

# visual-studio-2010 - 在 Visual Studio 中将 Crystal Report 日期时间字段格式化为日期

> ID：15615528
> 
> 赞同：0
> 
> 时间：2013-03-25T12:56:58.393
> 
> 标签：visual-studio-2010, visual-studio, crystal-reports

我有一份报告，当它运行时，它会拉出一个日期。当日期显示在报告上时，显示如下：

`11/20/2012 12:00:00AM`

我希望它显示为：

`11/20/2012`

尝试在格式公式编辑器中编辑公式时，出现以下错误：

![在此处输入图像描述](../Images/963b66c28451ef3ed376329c453b82d0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T18:58:33.457

这个几乎在任何情况下都很完美：

```
ToText(Cdate({Command.Payment Date}),"dd/MMM/yyyy") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:00:01.857

我最终使用了这个公式：

```
ToText(Cdate({tbl_R002.Date})) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:06:39.477

假设该字段是 DateTime 您需要为此使用 ToText 函数，即

```
ToText({tablename.fieldname}, "MM/dd/yyyy") 
```

# php - 使用php在Windows服务器上上传文件时出现问题

> ID：15615529
> 
> 赞同：3
> 
> 时间：2013-03-25T12:56:58.603
> 
> 标签：php, windows, file-upload

我们在运行 php 的 Windows 服务器上上传文件时遇到问题。更大的文件不会上传到服务器。该站点托管在 Windows 2008 服务器中，网络服务器为 IIS 7。

有时可以上传 22MB 的文件，但有时上传 10MB 的文件会失败。日志文件中没有错误消息。

我们在 PHP.ini 文件中设置了非常高的值。

```
max_execution_time 1800
max_input_time  1800
memory_limit       = 5000M
upload_max_filesize = 60M
max_file_uploads = 40
post_max_size  = 400 
```

我们还尝试通过在 web.conf 文件中添加值来增加 IIS 上传限制。它也没有解决问题。

```
maxRequestLength="204800"
requestLengthDiskThreshold="204800"
executionTimeout="3600"
maxAllowedContentLength="204800000" 
```

[http://support.myeasyprojects.net/KB/a53/uploading-large-files-times-out.aspx](http://support.myeasyprojects.net/KB/a53/uploading-large-files-times-out.aspx)

我们正处于一个非常令人困惑的问题之中。任何人都可以帮助我们解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:59:37.860

`post_max_size`应该匹配`upload_max_filesize`，因为文件是通过 POST 发送的。

内存限制很高，你真的需要那么多内存吗？256M应该够用了。

我建议的配置：

```
memory_limit       = 256M
upload_max_filesize = 64M
post_max_size  = 64M 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:02:25.890

需要在 php.ini 文件中进行如下设置。它位于您的 c:\php post_max_size 中（它应该大于upload_max_filesize）；

# css - Twitter Bootstrap 仅移动列

> ID：15615531
> 
> 赞同：1
> 
> 时间：2013-03-25T12:57:00.503
> 
> 标签：css, twitter-bootstrap

是否可以在 Boostrap 中制作“仅限移动设备”列？即在较小的屏幕上，一行 4 变成一行 2（3 * span4s 变成 2 * span6？）。我知道您可以通过添加隐藏移动元素`.hidden-phone`。

Zurb Foundation 有`phone-two`etc 类可以做到这一点。[http://www.zurb.com/article/859/fancy-mobile-layouts-with-the-foundation-](http://www.zurb.com/article/859/fancy-mobile-layouts-with-the-foundation-)

我需要编写自己的媒体查询来执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:43:36.253

Bootstrap 没有您所询问的类的内置等效项。

如果你想自己写，这里有一个让你开始的想法：http: [//jsfiddle.net/panchroma/g6PRS/](http://jsfiddle.net/panchroma/g6PRS/)

**CSS**

```
@media (max-width: 767px) {
  .row-fluid.phone-two .span3 {
    width: 48%;
    margin-left: 4%;
    float:left;
  }

  .row-fluid.phone-two > .span3:nth-child(odd){
    margin-left: 0;
  }
} 
```

**HTML**

```
<div class="container">
  <div class="row-fluid phone-two">
    <div class="span3">
      span3
    </div>
    <div class="span3">
      span3
    </div>
    <div class="span3">
      phone-two span3
    </div>
    <div class="span3">
      span3
    </div>
  </div>
</div> 
```

希望这足以让你继续前进！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T08:59:34.483

快速更新 bootstrap 3 现在支持您在此处执行的操作。

例如

```
<div class='row'>
   <div class='col-xs-3 col-md-6'>
   </div>

   <div class='col-xs-3 col-md-6'>
   </div>

   <div class='col-xs-3 col-md-6'>
   </div>

   <div class='col-xs-3 col-md-6'>
   </div>
</div> 
```

Havent对此进行了测试，但应该可以。应该在移动设备上显示 2 列，在桌面上显示 4 列。更多信息[http://getbootstrap.com/css/#grid](http://getbootstrap.com/css/#grid)

# java - 如何使用 log4j 在 Java 中获取当前类名

> ID：15615532
> 
> 赞同：4
> 
> 时间：2013-03-25T12:57:07.590
> 
> 标签：java, log4j

我正在使用 log4j 进行日志记录，为了在执行时获取各个方法的类名，我得到了一些使用 SecurityManager 来获取类名的常用方法，但我不想使用 SecurityManager，他们还有其他方法吗在运行时获取类名。我也不想编写代码（`MyClass.getClassName`）来获取每个类中的类名。

```
class log extends SecurityManager {

public String getClassName() {
        return getClassContext()[3].getName();
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-01T09:03:22.233

静态记录器的解决方案：

```
private static final Logger LOG = Logger.getLogger(new Object() { }.getClass().getEnclosingClass()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T13:01:27.703

对于全名（带包）：

```
this.getClass().getName(); 
```

对于类的名称（只是类名，没有更多）：

```
this.getClass().getSimpleName(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T13:04:29.810

除了接收类名，您还可以接收`Logger`类对象本身的 a：

```
public static Logger getLogger(Class clazz) 
```

这是它的使用方式：

```
private static final Logger logger = Logger.getLogger(MyClass.class); 
```

[http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Logger.html#getLogger(java.lang.Class)](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Logger.html#getLogger(java.lang.Class))

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T13:15:42.360

您可以在 appender 配置中添加`%l`到[PatternLayout](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)以获取日志语句的调用类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T13:08:45.853

我猜你需要调用你的日志类的类的类名？

尝试这个：

```
StackTraceElement stackTraceElement = new Throwable().getStackTrace()[3]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T13:04:59.217

你也可以这样做：

```
private static final String CLASS_NAME = MyClass.class.getName();

log.debug(new LogRecord(CLASS_NAME," Success = "+isSuccess)); 
```

# kendo-ui - 日期时间格式不适用于斜杠 Kendo UI

> ID：15615533
> 
> 赞同：0
> 
> 时间：2013-03-25T12:57:08.223
> 
> 标签：kendo-ui

我的 Web 应用程序支持多种日期时间格式，即`yyyy-MM-dd`、`yyyy.MM.dd`和. 前两个完美地工作，但是，当我使用其他两种格式时，斜线在初始打印中被替换为破折号，这使得它们无法通过验证。但是，如果我选择一个日期，它会以正确的（选择的）格式出现。`dd/MM/yyyy``MM/dd/yyyy`

我正在使用文化 sv-SE。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:00:21.483

我*怀疑*（没有 Kendo UI 的经验，但有其他日期/时间 API 的经验）“/”被视为“特定于文化的日期分隔符”。如果您想要“完全是正斜杠，无论文化如何”，您可能需要转义它。

转义的执行方式取决于库，但通常您只使用引号，例如

```
dd'/'MM'/'yyyy
MM'/'dd'/'yyyy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T13:58:56.967

正如[Jon](https://stackoverflow.com/a/15615589/67392)在他的回答中指出的那样，这是关于`/`成为 .NET[自定义日期格式](https://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#dateSeparator)中的特殊字符。

使用 Kendo 时，这会让人感到困惑，因为它不用`/`作[特殊字符](http://docs.telerik.com/kendo-ui/framework/globalization/dateformatting)。

使用单独的格式字符串客户端和服务器端应该是答案，但不幸的是，在[MVC 的 Telerik UI](http://docs.telerik.com/kendo-ui/aspnet-mvc/introduction)（在客户端使用 Kendo）中，客户端和服务器端都使用单个格式字符串以及用于 Kendo 的 MVC 助手。

例如，在日期格式为“dd-MM-yyyy”（在 Windows 区域设置中设置）和视图模型的服务器上：

```
 [Display(Name="Date")]
    [UIHint("Date")]
    [DisplayFormat(DataFormatString = Constants.DateFormat, ApplyFormatInEditMode = true)]
    public DateTime Date { get; set; } 
```

（`Constants.DateFormat`是“dd/MM/yyyy”）然后有一个编辑器模板（“Date.cshtml”）：

```
@(Html.Kendo().DatePickerFor(m => m) 
```

导致初始日期显示“29-05-2015”和 JavaScript 错误，因为它无法解析。

作为一种解决方法

```
@(Html.Kendo().DatePickerFor(m => m)
              .ParseFormats(new[] { "dd-MM-yyyy", Constants.DateFormat})) 
```

生成的 HTML 中的格式是错误的，但 JavaScript 至少能够理解它。（这当然应该`DateTimeFormatInfo.DateSeparator`用来动态构建替代格式。）

# entity-framework - 实体框架代码优先性能和内存消耗

> ID：15615542
> 
> 赞同：1
> 
> 时间：2013-03-25T12:57:43.360
> 
> 标签：entity-framework, ef-code-first

在我们的一个环境中，我们构建了一个代码生成器，高级用户可以在其中创建模型并在运行时进行部署。无需提及我们使用的是 EF 5.0 Code First。

我们的应用程序本身也有许多在内部使用的模型。所以 dbContext 最终可能至少有 80 个属性和更多（80 多个表）。

我们观察到的是初始 asp.net 应用程序加载时间相当长，并且 IIS 进程中的内存消耗也很高（600MB+）。

**我们可以通过哪些方式将 EF 配置为更加注意性能和内存使用？**

更新：似乎是为固定实体进行预编译视图生成的唯一方法。这样我们可以提高性能，因为在我们的项目中，固定模型与动态模型的比例为 60% 到 40%

**我们如何为 Code-First 生成按编译的视图？**

更新：使用 EF Power Tools 我能够生成视图。现在我想知道我是否可以在同一个项目中有两个单独的代码优先上下文。一方面，我打算生成视图，因为模型是固定的。第二个模型可以由管理员更改，所以现在我没有简单的方法为它们生成视图。你认为这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:32:50.867

你有一个非常具体的情况——考虑到你的代码生成与代码优先模型的动态特性——正如@Ladislav 提到的那样。我不确定是否有一个“简单的答案”。

通常，您可以在（预）编译时创建视图 - 例如 EF Power Tools。那对你不起作用。

**“EdmGen.exe”是**完成大部分工作的实用程序，因此以某种方式自动化可能是一种选择 - 但我没有尝试过，考虑到你所拥有的，这可能是一个挑战。

**T4 模板 - 是另一种选择**。
这是您所需的最佳信息来源 - [如何使用 T4 模板生成视图](http://blogs.msdn.com/b/adonet/archive/2008/06/20/how-to-use-a-t4-template-for-view-generation.aspx)

**但是，我不确定这是否会对**您有所帮助。问题是它首先需要生成 EDMX 模型——这通常是手工完成的。

现在，您可以为此调用一个工具 - 或者尝试以某种方式对 EDMX 模型进行“逆向工程” - 首先看看它是如何由 EF 构建的。我不确定，这有点“投机”。

这是我**在 EDMX 阅读器/编写器上所**知道的以及如何使用它的帖子。不确定，但可能会扩展您的视野:)
[EF 4.3 Code First Migrations - Uncompress __MigrationHistory Model](https://stackoverflow.com/questions/15922984/ef-4-3-code-first-migrations-uncompress-migrationhistory-model/15929090#15929090)

此外，我可以通过链接链接更多有关如何`metadata`从代码访问的信息`DbContext`，但我再次不确定这对您是否有用，您可能需要“事先”所有这些信息。

您可能需要参与 EF 源代码，以便能够遵循和理解它的工作原理，以及如何执行您需要的操作（如果您还没有的话）。

* * *

[http://blogs.msdn.com/b/adonet/archive/2008/06/20/how-to-use-a-t4-template-for-view-generation.aspx](http://blogs.msdn.com/b/adonet/archive/2008/06/20/how-to-use-a-t4-template-for-view-generation.aspx)
[EF 4.3 代码优先迁移 - 解压缩 __MigrationHistory 模型](https://stackoverflow.com/questions/15922984/ef-4-3-code-first-migrations-uncompress-migrationhistory-model/15929090#15929090)
[http://edmxdom.codeplex.com/](http://edmxdom.codeplex.com/)（EF 6 但它重叠，你也可以找到 EF5）

# javascript - Dojo 1.7 dojo/on 可以接受哪些字符串作为类型参数？

> ID：15615546
> 
> 赞同：0
> 
> 时间：2013-03-25T12:57:54.320
> 
> 标签：javascript, dojo

对于 type 参数，dojo/on 可以接受哪些字符串。

[http://livedocs.dojotoolkit.org/dojo/on](http://livedocs.dojotoolkit.org/dojo/on)

描述“**这是要分派的事件类型的名称（如 select）。此事件可能是标准事件（如单击）或自定义事件（如完成）。** ”但在某处是否有事物类型的列表我可以放在这里吗？它是否具有与我使用 dojo/query 一样过滤要调度的事件的能力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:28:41.243

我刚刚浏览了 Dojo 1.8 API 文档，如果您选择特定的 Dijit，您可以在*Event Summary*部分看到这些事件。例如[`dijit/Tree`](http://dojotoolkit.org/api/1.8/dijit/Tree)：

*   onBlur() 当小部件停止“活动”时调用，因为焦点移到了它之外的某个地方，或者用户单击了它之外的某个地方，或者小部件被隐藏了。
*   onClick(item, node, evt) 单击树节点时的回调
*   onClose(item, node) 关闭节点时的回调
*   onDblClick(item, node, evt) 双击树节点时的回调
*   ...

和[`dojox/treemap/TreeMap`](http://dojotoolkit.org/api/1.8/dojox/treemap/TreeMap)

*   onBlur() 当小部件停止“活动”时调用，因为焦点移到了它之外的某个地方，或者用户单击了它之外的某个地方，或者小部件被隐藏了。
*   onChange() Called when the selection changed.
*   onFocus() 当小部件变为“活动”时调用，因为它或其中的小部件要么具有焦点，要么最近被单击。
*   onItemRollOut() 在项目渲染器推出时调用。
*   onItemRollOver() 当项目渲染器悬停时调用。
*   onRendererUpdated() 在渲染器更新时调用。

我不确定是否有一种（简单的）方法可以聚合所有组件中的所有事件。因此，可能只是阅读您感兴趣的组件的文档的情况。

# android - opencv - 安卓上的人脸检测

> ID：15615551
> 
> 赞同：1
> 
> 时间：2013-03-25T12:58:10.230
> 
> 标签：android

我试图在android上使用opencv的面部检测代码，但即使我像其他人所说的那样清理项目也存在一些问题。

这是关于日食的描述

> 在解决构建路径错误之前无法构建项目 OpenCV Sample - color-blob-detection Unknown Java Problem The container 'Android Dependencies' references non existing library 'C:\OpenCV-2.4.3-android-sdk\sdk\java\ bin\opencv library - 2.4.3.jar' OpenCV Sample - color-blob-detection Build path Build Path Problem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-08T22:30:31.280

没有要导入的 .jar。

如果您遵循 openCV 教程（[http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html)）并导入所有示例和库，您应该确保库项目可以正确构建。

就我而言，我刚刚将 Android Target 设置为当前版本 5.1.1。为此，右键单击项目“OpenCV Library - 2.4.11”->Properties->Android->Select Android 5.1.1->Apply

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T15:30:32.460

它主要是路径的问题。

您是否正确检查了路径？（琼斯的建议应该适合你）

如果设置正确...我会要求您检查 JNI 文件夹中的 make 文件并使用此完整路径，并检查构建路径 -> C++ -> GNU C++ -> 添加此路径（如果尚未添加）。

然后你应该能够让它工作。

# javascript - 使用纯 JavaScript 获取 div 高度

> ID：15615552
> 
> 赞同：375
> 
> 时间：2013-03-25T12:58:14.290
> 
> 标签：javascript, html, css

关于如何在不使用 jQuery 的情况下获得 div 的高度的任何想法？

我在 Stack Overflow 上搜索这个问题，似乎每个答案都指向 jQuery 的`.height()`.

我尝试了类似的东西`myDiv.style.height`，但它什么也没返回，即使我的 div 有它`width`并`height`在 CSS 中设置。

* * *

## 回答 #1

> 赞同：693
> 
> 时间：2013-03-25T13:05:33.123

```
var clientHeight = document.getElementById('myDiv').clientHeight; 
```

或者

```
var offsetHeight = document.getElementById('myDiv').offsetHeight; 
```

`clientHeight`包括填充。

`offsetHeight`包括内边距、滚动条和边框。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2017-08-05T00:45:42.433

另一种选择是使用 getBoundingClientRect 函数。请注意，如果元素的显示为“无”，getBoundingClientRect 将返回一个空矩形。

例子：

```
var elem = document.getElementById("myDiv");
if(elem) {
  var rect = elem.getBoundingClientRect();
  console.log("height: " + rect.height);  
} 
```

更新：这是 2020 年编写的相同代码：

```
const elem = document.querySelector("#myDiv");
if(elem) {
  const rect = elem.getBoundingClientRect();
  console.log(`height: ${rect.height}`);
} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-03-25T12:59:27.057

[jsFiddle](http://jsfiddle.net/zFTMX/)

```
var element = document.getElementById('element');
alert(element.offsetHeight); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-25T12:59:52.250

```
var myDiv = document.getElementById('myDiv'); //get #myDiv
alert(myDiv.clientHeight); 
```

clientHeight 和 clientWidth 是您正在寻找的。

offsetHeight 和 offsetWidth 也返回高度和宽度，但它包括边框和滚动条。根据情况，您可以使用其中一种。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-13T17:32:53.980

除了`el.clientHeight`和之外`el.offsetHeight`，当您需要**元素内部内容的高度时**（无论元素本身设置的高度如何），您都可以使用`el.scrollHeight`. [更多信息](https://stackoverflow.com/a/22675563/661643)

如果您想将元素高度或最大高度设置为其内部动态内容的确切高度，这将很有用。例如：

```
var el = document.getElementById('myDiv')

el.style.maxHeight = el.scrollHeight+'px' 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-08-13T21:52:31.523

其他答案对我不起作用。这是我在[w3schools](http://www.w3schools.com/jsref/prop_style_height.asp)找到的，假设`div`有一个`height`和/或`width`设置。

您所需要的只是`height`排除`width`填充。

```
 var height = document.getElementById('myDiv').style.height;
    var width = document.getElementById('myDiv').style.width; 
```

**你们反对者：**从我收到的赞成票来看，这个答案至少帮助了 5 人。如果您不喜欢它，请告诉我原因，以便我可以修复它。那是我对投票的最大不满；你很少告诉我你为什么不投票。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-04-17T04:57:21.553

尝试

```
myDiv.offsetHeight 
```

```
console.log("Height:", myDiv.offsetHeight );
```

```
#myDiv { width: 100px; height: 666px; background: red}
```

```
<div id="myDiv"></div>
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-14T17:48:10.680

这是另一种选择：

```
var classElements = document.getElementsByClassName("className");

function setClassHeight (classElements, desiredHeightValue) 
    {
        var arrayElements = Object.entries(classElements);
        for(var i = 0; i< arrayElements.length; i++) {
            arrayElements[i][1].style.height = desiredHeightValue;
        }

    } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-12-19T17:39:20.470

一种选择是

```
const styleElement = getComputedStyle(document.getElementById("myDiv"));
console.log(styleElement.height); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-12-06T10:30:08.110

```
<div id="item">show taille height</div>
<script>
    alert(document.getElementById('item').offsetHeight);
</script> 
```

[提琴手](http://jsfiddle.net/mouadh/ef6v7a36/)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-10-07T02:54:24.960

最好的办法是——

```
var myDiv = document.getElementById('myDiv');

var myDivWidth = myDiv.clientWidth || myDiv.offsetWidth || (myDiv.getBoundingClientRect()).width;
var myDivHeight= myDiv.clientHeight || myDiv.offsetHeight  || (myDiv.getBoundingClientRect()).height;

console.log("Width: "+ myDivWidth + "px");
console.log("Height: "+ myDivHeight + "px");
```

```
<div style="padding: 50px; margin: 8px auto; outline: 1px solid green;">

  <div id="myDiv" style="width: 100%; height: 256px; padding: 50px; margin: 4px; background: #000000; color: #ffffff; outline: 1px solid red;">
  This is "#myDiv" <br>
  Width: 100% <br>
  Height: 256px
  </div>

</div>
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-05T18:17:36.390

javascript高度计算

包括填充

利用`clientHeight`

```
element.clientHeight 
```

利用`offsetHeight`

包括填充，边框，border_width

```
element.offsetHeight 
```

利用`el.style.height`

它仅返回给定高度（必须具有手动高度，例如：`<div style="height:12px"></div>`否则返回空结果

```
element.style.height 
```

利用`getBoundingClientRect`

包括填充，边框，border_width

```
elem.getBoundingClientRect();
elem.height 
```

# javascript - 删除括号拆分 Javascript/Jquery

> ID：15615553
> 
> 赞同：0
> 
> 时间：2013-03-25T12:58:18.900
> 
> 标签：javascript, split

我认为这个问题的答案并不难，但我就是无法让它发挥作用！我有这个 div，其中的答案存储为 ("A""B""C") 等。我正在用 jQuery 阅读这个 div，所以我可以计算分数，到目前为止一切都很好。

因为我需要单独获得每个答案，所以我将答案拆分如下：

```
var totalAnswer = $(correctAnswer.split(/A/g).length - 1); 
```

上面我计算“A”答案并计算它们。

问题是它像这样返回它：

`[3]`而不仅仅是`3`没有`[]`. 有什么办法可以去掉括号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:02:02.237

不知道为什么要使用 jquery 对象进行包装。我会说你只需要更换

```
var totalAnswer = $(correctAnswer.split(/A/g).length - 1); 
```

经过

```
var totalAnswer = correctAnswer.split(/A/g).length - 1; 
```

# java - selenium 声明的包与预期的包不匹配

> ID：15615555
> 
> 赞同：0
> 
> 时间：2013-03-25T12:58:25.023
> 
> 标签：java, eclipse, selenium

我倾向于硒。我无法运行示例脚本。请帮我弄清楚我做错了什么。谢谢！我的安装：JDK1.7.0._02 selenium-server-standalone-2.31.0.jar Eclipse IDE 3.7.0 Selenium IDE 1.9.0（Firefox 插件）

当我单击代码中的包部分时，Eclipse 提示以下错误消息 1.声明了包 org.openqa.selenium.example；与预期的包 Seletest1 不匹配 2\. 令牌包的语法错误，导入的预期 Eclipse 还建议将 Test1.java 移动到包 'org.openqa.selenium.example

请建议我采取正确的行动，我应该将 org.openqa.selenium.example 导入我的项目的构建路径还是应该将 Test1.java 移动到包中？

在哪里可以找到 package-org.openqa.selenium.example 的位置？

这是我从 Google 代码复制的代码 开始使用 Selenium 我的项目结构 SeleniumTest1>Src>SeleTet1

```
package SeleTest1;
package org.openqa.selenium.example;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.htmlunit.HtmlUnitDriver;

public class Test1 
{
    public static void main(String[] args) 
    {
        // Create a new instance of the html unit driver
        // Notice that the remainder of the code relies on the interface, 
        // not the implementation.
        WebDriver driver = new HtmlUnitDriver();

        // And now use this to visit Google
        driver.get("http://www.google.com");

        // Find the text input element by its name
        WebElement element = driver.findElement(By.name("q"));

        // Enter something to search for
        element.sendKeys("Cheese!");

        // Now submit the form. WebDriver will find the form for us from the element
        element.submit();

        // Check the title of the page
        System.out.println("Page title is: " + driver.getTitle());
    }

} 
```

执行代码时显示的错误消息当我在 Eclipse 中运行代码时，我收到以下错误消息：线程“main”java.lang.Error 中的异常：未解决的编译问题：方法 sendKeys(CharSequence[]) 在类型 WebElement 不适用于参数（字符串）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:16:35.107

您的代码顶部有一个重复的包声明。我会删除第二个（`org.openqa.selenium.example`），因为您的代码可能在`SeleTest1`文件夹中。

您的包声明不需要匹配您正在使用的框架之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:14:23.927

当您将 selenmium IDE 记录的测试用例导出为 webdriver 格式时，默认情况下 package 语句将添加为

```
package org.openqa.selenium.example; 
```

我们需要根据我们在 Eclipse 中创建的包名来修改它。

因此，在您的情况下，您可以删除下面的重复行。

```
package org.openqa.selenium.example; 
```

完成此修改后，您也不会出现第二个错误。

# javascript - 需要重定向到谷歌应用程序电子邮件登录页面，而不是在passportjs和nodejs中正常的gmail登录

> ID：15615557
> 
> 赞同：0
> 
> 时间：2013-03-25T12:58:37.640
> 
> 标签：javascript, node.js, oauth-2.0, passport.js

我有一个 nodejs 应用程序。我在其中使用护照 js 设置了一个 google auth2 登录系统。我需要针对谷歌应用电子邮件 ID 而不是普通的 gmail id 进行身份验证。身份验证工作正常。但它不会重定向到谷歌应用电子邮件登录页面 (google.com/a/domain.com)。它重定向到 gmail 登录页面，从那里我可以通过输入完整的电子邮件 ID (username@domain.com) 登录并进行身份验证。有什么方法可以重定向到应用引擎登录页面，这样我只需要输入用户名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:44:43.773

我通过编辑此文件得到了解决方案

node_modules/passport-google-oauth/lib/passport-oauth/strategies/oauth2.js

我在以下 2 行 params['response_type'] = 'code'; 下面的第 164 行添加了一个新行 参数['redirect_uri'] = callbackURL;

新行在 params['hd'] = "domainname.com"; 下面给出

现在它正在重定向到特定于域的登录页面

# jquery - 如何在jquery中读取带有命名空间的json数据

> ID：15615559
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:58:39.343
> 
> 标签：jquery, json

我正在使用 jquery 获取 json 数据，我正在获取这样的 json 数据

```
{
        "im:name": {
                        "label": "Meon"
                    },
         "rights": {
                        "label": "© 2012 Manbolo"
                    },
        "im:price": {
                        "label": "$0.99"
                    }
    } 
```

我能够阅读**“权利”**标签**标签**数据，但不知道如何阅读**“im:name”**。当我试图阅读它给出**未定义**的错误时。

请建议我如何读取数据。我只使用**jquery**。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:00:50.307

使用下标符号代替点符号。

```
data["im:name"].label 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-26T21:43:38.803

您可以轻松转到显示对象的控制台，在要查找的属性上单击鼠标右键，然后“复制属性路径” [在此处输入图像描述](https://i.stack.imgur.com/Rfszt.png)

# javascript - 每次使用 AJAX 更改值时执行一个函数

> ID：15615563
> 
> 赞同：0
> 
> 时间：2013-03-25T12:58:57.177
> 
> 标签：javascript, jquery, xml, ajax

我想做的是每次值增加或减少时播放一个小动画。使用此代码，我每秒都会从 XML 源更新我的值。动画只应在值增加时执行。所以如果我的值为 62 并更新为 62，则不应执行任何动画。当我的值为 62 并更新为 63 时，我希望这个动画发生。有谁知道如何修改此代码以实现这一目标？

```
function updateAll()
{
$.ajax({
    type: "GET",
    url: "/ajax/ajax.updatedata.php",
    data: "",
    success: function(html){
        html = JSON.parse(html);

        if(html instanceof Object)                                 
        {
            // projecten
            $('#projecten-aantal').html(html['projecten'][0]['waarde']);
            $('#projecten-afgerond').html(html['projecten'][1]['waarde']);

            var projecten_aantal = parseInt(html['projecten'][0]['waarde']);
            var projecten_afgerond = parseInt(html['projecten'][1]['waarde']);

            var  sampleDataProjecten = [
                { naam: html['projecten'][0]['naam'], waarde: parseInt(html['projecten'][0]['waarde']), percent: parseFloat(html['projecten'][0]['percent'])},
                { naam: html['projecten'][1]['naam'], waarde: parseInt(html['projecten'][1]['waarde']), percent: parseFloat(html['projecten'][1]['percent'])}
            ];

            var settingsProjecten = {
                enableAnimations: false,
                source: sampleDataProjecten
            };
            $('#pie-chart-projecten').jqxChart(settingsProjecten);
            $('#pie-chart-projecten').jqxChart('refresh');

            // domeinwinkel
            var aantalRegistraties = 0;

            for(var i=0;i<=6;i++)
            {
                aantalRegistraties += parseInt(html['domeinwinkel'][i]['waarde']);
            }

            $('#domeinwinkel-registraties').html(aantalRegistraties);

            var  sampleDataDomeinwinkel = [
                { naam: html['domeinwinkel'][5]['naam'], waarde: parseInt(html['domeinwinkel'][5]['waarde']) },
                { naam: html['domeinwinkel'][4]['naam'], waarde: parseInt(html['domeinwinkel'][4]['waarde']) },
                { naam: html['domeinwinkel'][3]['naam'], waarde: parseInt(html['domeinwinkel'][3]['waarde']) },
                { naam: html['domeinwinkel'][2]['naam'], waarde: parseInt(html['domeinwinkel'][2]['waarde']) },
                { naam: html['domeinwinkel'][1]['naam'], waarde: parseInt(html['domeinwinkel'][1]['waarde']) },
                { naam: html['domeinwinkel'][0]['naam'], waarde: parseInt(html['domeinwinkel'][0]['waarde']) },
                { naam: html['domeinwinkel'][6]['naam'], waarde: parseInt(html['domeinwinkel'][6]['waarde']) }
            ];

            var settingsDomeinwinkel = {
                enableAnimations: false,
                source: sampleDataDomeinwinkel
            };

            $('#line-chart-domeinwinkel').jqxChart(settingsDomeinwinkel);
            $('#line-chart-domeinwinkel').jqxChart('refresh');

            // serverload
            var barcolors = new Array();

            //Serverload bars
            for(var i=0;i<=6;i++)
            {
                var setBarWidth = (parseFloat(html['servers'][i]['waarde'])/2)*100;
                if(setBarWidth > 100)
                {
                    barcolors[i] = 100;
                }
                else
                {
                    barcolors[i] = setBarWidth;
                }
            }

            $("[id^=serverload]").filter(function() {
                var i = this.id.substring(10),
                    width = barcolors[i-1];

                if (width !== undefined)
                    this.style.width = width + "%";

                return width > 50;
            }).addClass("redbar");

            $("[id^=serverload]").filter(function() {
                var i = this.id.substring(10),
                    width = barcolors[i-1];

                if (width !== undefined)
                    this.style.width = width + "%";

                return width <= 50;
            }).removeClass("redbar");
        }
        else
        {
            console.log('Fout bij het updaten van de data: html is geen array');
            console.log(html);
        }
    }
}); 
```

}

有关上述代码的更多信息：

上面的代码是更新值（span 元素，其中包含文本和 JQuery 折线图和饼图），这些值将从 XML 文件中检索，该 XML 文件包含以下序列中的数据（已翻译）：

```
<root>
  <projects>
   <entry>
    <name>Total</name>
    <value>10</value>
    <percent>100</percent>
   </entry>
   <entry>
    <name>Finished</name>
    <value>5</value>
    <percent>50</percent>
   </entry>
  </projects>
  <tasks>
   <entry>
    <name>Total</name>
    <value>20</value>
   </entry>
  </tasks>
  etc.
</root> 
```

XML 文件将由 cron 作业更新，因此没有直接使用数据库或隐藏字段来保存值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:04:26.790

将当前值保留在隐藏字段中，当您收到响应时，检查隐藏值，完成逻辑后，使用更新后的值更新隐藏值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:01:24.637

是的 - 保留一个公共变量，它将代表您的`currentScore`. 每次收到`AJAX`回复时，请检查找到的值并将其与您的 public 进行比较`currentScore`。从那里，您可以使用一个简单的`if`条件来确定是否`currentScore`大于或小于返回值。

# ios - 在 AFNetworking 的 JSONRequestOperationWithRequest:success:failure: 方法中，JSON 响应是什么类型的对象？

> ID：15615568
> 
> 赞同：1
> 
> 时间：2013-03-25T12:59:15.027
> 
> 标签：ios, objective-c, json, afnetworking, afjsonrequestoperation

它为您提供了一个名为 JSON 的 id 类型的变量，但我该如何操作呢？它是一个字符串吗？我必须先序列化它吗？我究竟如何与它互动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:01:03.107

它以字典的形式返回，您只需要根据键提取值。例子 ：

`[JSON valueForKey:@"key"];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:33:20.353

[您可以在这里](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/)获得的不仅仅是基础知识

很棒的课程，在 photo mania 应用程序中有关于 json 处理的非常好的代码。

# c - 为什么我得到一个负值？

> ID：15615577
> 
> 赞同：0
> 
> 时间：2013-03-25T12:59:39.337
> 
> 标签：c

我的代码的幂函数存在一些错误，它为小值返回正确答案，但为大值给出错误答案。

```
#include<stdio.h>
long long MOD= 1000000007;
long long power(long long i,long long j)
{
        if(j==0)
                return 1;
        long long d;
        d=power(i,j/(long long)2);
        if(j%2==0)
                return (d*d)%MOD;
        else
                return (d*d*i)%MOD;
}

int main()
{
        long long inv=1;
        inv=power(25,MOD-2)%MOD;
        printf("%lld\n",inv);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:28:58.333

您的算术溢出了`long long`C 实现中可表示的值。

此外，你正在处理一个在 Stack Overflow 上讨论过无数次的挑战问题或家庭作业，你可以通过搜索“1000000007”看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:43:30.317

signed long long 的范围是 -2^63 到 (2^63 - 1)，最后一位用于存储 sign 。在您的情况下，当计算大数的乘法时，您的结果将溢出并且数字的第 64 位（存储符号）将获得值 1（这意味着 -ve 值）。

这就是你得到负值作为输出的原因。

[读这个](http://en.wikipedia.org/wiki/Integer_%28computer_science%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:29:46.170

您需要小心`(d*d*i)%MOD;`，因为没有模数的多个运算是不正确的，***需要考虑精度和溢出风险***。要严格正确，您需要编写

```
 return ((d*d)%MOD * i)%MOD; 
```

即使在这种情况下，我也认为`i == i%MOD`

编辑：我举个例子：

```
log2((MOD-1)x(MOD-1)x25) = log2(1000000006x1000000006x25) = 64.438 
```

这意味着您将在计算期间使用此输入溢出。

# encryption - 如何打开 .txt.enc 文件？

> ID：15615578
> 
> 赞同：5
> 
> 时间：2013-03-25T12:59:43.247
> 
> 标签：encryption, openssl, file-format

我有一个 .txt.enc 文件。当我尝试在 Emacs 等文本编辑器中打开它时，我得到了任意数量的字符和数字。实际上，它是加密的。我也尝试过 openssl 命令行工具，但它们也没有给出正确的结果。

有人知道我如何打开这样的文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T14:08:32.660

看起来文件以某种方式加密或编码，但显而易见的问题是，如何？

如果用于加密文件的程序是一个相当常见的程序，并且如果它在其输出中包含一个已知的标头，那么 Unix[`file`命令](http://linux.die.net/man/1/file)可能能够识别它。如果没有，它可能归结为猜测。

请注意，该文件实际上可能没有使用密钥加密：似乎`.enc`扩展名有时用于例如[uuencoded](http://en.wikipedia.org/wiki/Uuencoding)文件，这些文件只是编码为 ASCII 文本的二进制文件，非常类似于[base64](http://en.wikipedia.org/wiki/Base64)编码。不过，该`file`命令肯定应该识别这些。

但是，如果文件*是*加密的，那么即使在找到用于加密它的软件之后，您仍然会遇到一个更大的问题：找到正确的密钥。如果加密有任何好处，那么唯一的方法（假设您还不知道密钥）将通过暴力破解所有可能的密钥。 *如果*密钥基于密码，*并且*密码相当弱（即非常短和/或常见，如“abc123”），则可能使用暴力密码破解程序找到它。但我不会屏住呼吸。

（当然，如果文件被加密并且您不知道密码，那么下一个明显的问题是，您最终是如何得到该文件的？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:02:45.233

该文件似乎已加密。原始文件将类似于 xxx.txt，编码文件为 xxx.txt.enc，并且已使用某些专有实用程序进行了编码。

您需要访问对该文件进行编码的应用程序，或者至少知道该应用程序使用什么编码系统才能对其进行解码。

# android - java.lang.outofmemoryerror 即使它们没有图像

> ID：15615582
> 
> 赞同：0
> 
> 时间：2013-03-25T13:00:11.013
> 
> 标签：android

除了谷歌广告，我没有在我的活动中使用任何图片。但我得到 java.lang.outofmemoryerror 并且应用程序正在崩溃。

这是日志猫

```
03-25 18:24:22.125: E/AndroidRuntime(277): FATAL EXCEPTION: AsyncTask #2
03-25 18:24:22.125: E/AndroidRuntime(277): java.lang.RuntimeException: An error occured while executing doInBackground()
03-25 18:24:22.125: E/AndroidRuntime(277):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
03-25 18:24:22.125: E/AndroidRuntime(277):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-25 18:24:22.125: E/AndroidRuntime(277):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-25 18:24:22.125: E/AndroidRuntime(277):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-25 18:24:22.125: E/AndroidRuntime(277):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-25 18:24:22.125: E/AndroidRuntime(277):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
03-25 18:24:22.125: E/AndroidRuntime(277):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
03-25 18:24:22.125: E/AndroidRuntime(277):  at java.lang.Thread.run(Thread.java:1096)
03-25 18:24:22.125: E/AndroidRuntime(277): Caused by: java.lang.OutOfMemoryError
03-25 18:24:22.125: E/AndroidRuntime(277):  at org.kxml2.io.KXmlParser.push(KXmlParser.java:626)
03-25 18:24:22.125: E/AndroidRuntime(277):  at org.kxml2.io.KXmlParser.pushText(KXmlParser.java:865)
03-25 18:24:22.125: E/AndroidRuntime(277):  at org.kxml2.io.KXmlParser.nextImpl(KXmlParser.java:354)
03-25 18:24:22.125: E/AndroidRuntime(277):  at org.kxml2.io.KXmlParser.next(KXmlParser.java:1385)
03-25 18:24:22.125: E/AndroidRuntime(277):  at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:210)
03-25 18:24:22.125: E/AndroidRuntime(277):  at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:366)
03-25 18:24:22.125: E/AndroidRuntime(277):  at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:233)
03-25 18:24:22.125: E/AndroidRuntime(277):  at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:366)
03-25 18:24:22.125: E/AndroidRuntime(277):  at org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:121)
03-25 18:24:22.125: E/AndroidRuntime(277):  at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:137)
03-25 18:24:22.125: E/AndroidRuntime(277):  at org.ksoap2.transport.Transport.parseResponse(Transport.java:63)
03-25 18:24:22.125: E/AndroidRuntime(277):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:100)
03-25 18:24:22.125: E/AndroidRuntime(277):  at com.netserv.Pungry.RestaurantsList.SendRequesttoServer(RestaurantsList.java:207)
03-25 18:24:22.125: E/AndroidRuntime(277):  at com.netserv.Pungry.RestaurantsList$ListData.doInBackground(RestaurantsList.java:148)
03-25 18:24:22.125: E/AndroidRuntime(277):  at com.netserv.Pungry.RestaurantsList$ListData.doInBackground(RestaurantsList.java:1)
03-25 18:24:22.125: E/AndroidRuntime(277):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-25 18:24:22.125: E/AndroidRuntime(277):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-25 18:24:22.125: E/AndroidRuntime(277):  ... 4 more
03-25 18:24:22.485: E/WindowManager(277): Activity com.netserv.Pungry.RestaurantsList has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@43f0d2e8 that was originally added here
03-25 18:24:22.485: E/WindowManager(277): android.view.WindowLeaked: Activity com.netserv.Pungry.RestaurantsList has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@43f0d2e8 that was originally added here
03-25 18:24:22.485: E/WindowManager(277):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
03-25 18:24:22.485: E/WindowManager(277):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
03-25 18:24:22.485: E/WindowManager(277):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
03-25 18:24:22.485: E/WindowManager(277):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
03-25 18:24:22.485: E/WindowManager(277):   at android.app.Dialog.show(Dialog.java:241)
03-25 18:24:22.485: E/WindowManager(277):   at com.netserv.Pungry.RestaurantsList$ListData.onPreExecute(RestaurantsList.java:159)
03-25 18:24:22.485: E/WindowManager(277):   at android.os.AsyncTask.execute(AsyncTask.java:391)
03-25 18:24:22.485: E/WindowManager(277):   at com.netserv.Pungry.RestaurantsList.onCreate(RestaurantsList.java:83)
03-25 18:24:22.485: E/WindowManager(277):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-25 18:24:22.485: E/WindowManager(277):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-25 18:24:22.485: E/WindowManager(277):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-25 18:24:22.485: E/WindowManager(277):   at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-25 18:24:22.485: E/WindowManager(277):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-25 18:24:22.485: E/WindowManager(277):   at android.os.Handler.dispatchMessage(Handler.java:99)
03-25 18:24:22.485: E/WindowManager(277):   at android.os.Looper.loop(Looper.java:123)
03-25 18:24:22.485: E/WindowManager(277):   at android.app.ActivityThread.main(ActivityThread.java:4627)
03-25 18:24:22.485: E/WindowManager(277):   at java.lang.reflect.Method.invokeNative(Native Method)
03-25 18:24:22.485: E/WindowManager(277):   at java.lang.reflect.Method.invoke(Method.java:521)
03-25 18:24:22.485: E/WindowManager(277):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-25 18:24:22.485: E/WindowManager(277):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-25 18:24:22.485: E/WindowManager(277):   at dalvik.system.NativeStart.main(Native Method) 
```

这是我收到错误的 AsyncTask 类

```
public class ListData extends AsyncTask<String, Void, String> {

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        dialog.dismiss();
        try {
            if (!lstresponse.isEmpty()) {
                lstresult.addAll(lstresponse);
                GlobVariables.restaurant_response = lstresult;
                lst_restaurant.setAdapter(CustAdapter);
            } else
                Toast.makeText(getApplicationContext(),
                        "No result found for" + " " + check,
                        Toast.LENGTH_LONG).show();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub

        SendRequesttoServer(params);
        return "1";
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        dialog = new ProgressDialog(RestaurantsList.this);
        dialog.setMessage("Please Wait...");
        dialog.setIndeterminate(true);
        dialog.setCancelable(false);
        dialog.show();

    }

}

public void SendRequesttoServer(String[] params) {
    try {
        if (GlobVariables.MenuSelectd.equals("Cuisine")
                || GlobVariables.Selecteditem.equals("Cuisines")) {
            METHOD = "GetRestaurantsByCuisines";

            request = new SoapObject(NAMESPACE, METHOD);
            request.addProperty("cuisineName", params[0]);
            request.addProperty("cityName", params[1]);
        } else if (GlobVariables.MenuSelectd.equals("locations")
                || GlobVariables.Selecteditem.equals("Location")) {
            METHOD = "GetRestaurantsByLocations";
            request = new SoapObject(NAMESPACE, METHOD);
            request.addProperty("location", params[0]);
            request.addProperty("cityName", params[1]);
        } else if (GlobVariables.Selecteditem.equals("ByName")) {
            METHOD = "GetRestaurantsByName";
            request = new SoapObject(NAMESPACE, METHOD);
            request.addProperty("restaurantName", params[0]);
            request.addProperty("cityName", params[1]);

        } else {
            METHOD = "SearchRestaurant";
            request = new SoapObject(NAMESPACE, METHOD);
            request.addProperty("searchParameter", params[0]);
            request.addProperty("cityName", params[1]);
        }

        SOAP_ACTION = NAMESPACE + METHOD;

        // SoapObject request = new SoapObject(NAMESPACE, METHOD);
        // request.addProperty("location", params[0]);
        // request.addProperty("cityName", params[1]);
        check = params[0];
        SoapSerializationEnvelope res = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        res.dotNet = true;
        res.setOutputSoapObject(request);

        HttpTransportSE call = new HttpTransportSE(url);

        SoapPrimitive result;
        call.call(SOAP_ACTION, res);
        result = (SoapPrimitive) res.getResponse();
        ParseDetails Objparsecities = new ParseDetails(
                new ByteArrayInputStream(result.toString()
                        .getBytes("UTF-8")));
        lstresponse = Objparsecities.parse();
        System.out.println(lstresponse.size());

    } catch (SoapFault e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

我能知道为什么我收到 java.lang.outofmemoy 错误以及我在做什么错误吗？

谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:22:49.337

在 Android 中，每个应用程序都分配有一个**VM 预算**。VM 预算是任何应用程序可以使用的最大内存量。此内存限制包括所有内容、位图（即使它是在外部堆上创建的）、对象等。每当应用程序超出此限制时，就会引发 OOM 异常。

**VM 预算的值范围从 16MB 到 80MB 或更多。这取决于设备。**

即使打印大量日志也会导致 OOM 问题，我自己已经测试过了。

同样在您的情况下，日志清楚地表明您在`onPreExecute`异步任务中添加的对话框正在泄漏。您是否正在处理活动中的方向变化？

> > 03-25 18:24:22.485: E/WindowManager(277): 活动 com.netserv.Pungry.RestaurantsList 泄露了最初添加在这里的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@43f0d2e8
> > 
> > 03-25 18:24:22.485: E/WindowManager(277): android.view.WindowLeaked: Activity com.netserv.Pungry.RestaurantsList 泄露了窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@43f0d2e8最初添加在这里

如果您不处理方向更改，那么对于方向的每次更改，将再次创建并`onCreate`执行活动，这会导致异步任务被一次又一次地触发。这也可能导致更高的内存利用率。

*你的服务器响应有多大，我有过服务器响应的经验，它有 50,000 多个节点，从长远来看会导致问题。*

您是否使用外部库来解析 XML 数据？我建议编写一个简单的 SAX 解析器而不是那个，它会减少对象创建的数量，并且控制保留在您自己的代码中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:25:09.747

问题很可能是您使用 ksoap2 通过 SOAP 请求发送/接收大量数据。`OutOfMemoryError`每当超出内存时就会引起。您的应用程序中没有必要必须存在图像才能发生这种情况。

以前曾报告过使用此库的此类问题。此线程中的解决方案可能对您有用：

[非常大的 SOAP 响应 - Android - 内存不足错误](https://stackoverflow.com/questions/4941581/very-large-soap-response-android-out-of-memory-error/12732396#12732396)

# ruby-on-rails-3 - rake install 失败但 gem install 工作正常，知道为什么吗？

> ID：15615584
> 
> 赞同：1
> 
> 时间：2013-03-25T13:00:11.820
> 
> 标签：ruby-on-rails-3, gem

## 问题：

我有我正在研究的这颗宝石。尝试在本地安装它以进行一些测试时，`rake install`构建 gem 后失败。Rake 建议我运行`gem install`构建的 gem 来调试。令人惊讶的是，`gem install pkg/my_gem-x.y.z.gem`它就像一个魅力！

知道为什么吗？

## 一些细节：

耙版本：10.0.3

使用 bundler 版本创建的 Gem：1.2.1

gemspec的内容：

```
lib = File.expand_path('../lib', __FILE__)
$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)
require 'my_gem/version'

Gem::Specification.new do |gem|
  gem.name          = "mygem"
  gem.version       = MyGem::VERSION
  gem.authors       = ["Omar Abdel-Wahab"]
  gem.email         = ["me@example.com"]
  gem.description   = %q{bla bla bla}
  gem.summary       = %q{bla bla bla}
  gem.homepage      = "http://github.com/foobar/"

  gem.files         = `git ls-files`.split($/)
  gem.executables   = gem.files.grep(%r{^bin/}).map{ |f| File.basename(f) }
  gem.test_files    = gem.files.grep(%r{^(test|spec|features)/})
  gem.require_paths = ["lib"]

  gem.add_dependency "rails", ">= 3.1"
  gem.add_dependency "jquery-rails"
  gem.add_dependency "twitter-bootstrap-rails", ">= 2.1.0"

  gem.add_development_dependency "bundler", ">= 1.0.0"
  gem.add_development_dependency "rspec", "~> 2.3"
  gem.add_development_dependency "sqlite3-ruby"
end 
```

输出`rake install`：

```
~/Projects/Github/my_gem% rake -vt install
** Invoke install (first_time)
** Execute install
my_gem 0.0.1 built to pkg/my_gem-0.0.1.gem
rake aborted!
Couldn't install gem, run `gem install /Users/owahab/Projects/Github/my_gem/pkg/my_gem-0.0.1.gem' for more detailed output
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/bundler-1.2.1/lib/bundler/gem_helper.rb:68:in `install_gem'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/bundler-1.2.1/lib/bundler/gem_helper.rb:43:in `block in install'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/owahab/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/bin/rake:19:in `load'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/bin/rake:19:in `<main>'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/bin/ruby_noexec_wrapper:14:in `eval'
/Users/owahab/.rvm/gems/ruby-1.9.3-p286/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => install 
```

`rake build`从那时起的输出`gem install`：

```
~/Projects/Github/rails_autocomplete% rake build && gem install pkg/my_gem-0.0.1.gem
my_gem 0.0.1 built to pkg/my_gem-0.0.1.gem
Successfully installed my_gem-0.0.1
1 gem installed
Installing ri documentation for my_gem-0.0.1...
Building YARD (yri) index for my_gem-0.0.1...
Installing RDoc documentation for my_gem-0.0.1... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:46:02.667

根据该问题的评论线程，这是一个权限问题。调试 Bundler 的`gem_helper.rb`文件揭示了这一点：

> 错误：执行 gem 时...（Errno::EACCES）权限被拒绝 - /Users/owahab/.rvm/gems/ruby-1.9.3-p286/gems/i18n-0.6.1/ci/Gemfile.no-rails

一些 gem 已以 root 身份安装。删除它们解决了问题。

# c - 忽略字符串中的空格，除非它在引号中

> ID：15615587
> 
> 赞同：0
> 
> 时间：2013-03-25T13:00:14.753
> 
> 标签：c, strtok

```
char *args[32];
char **next = args;
char *temp = NULL;
char *quotes = NULL;

temp = strtok(line, " \n&");

while (temp != NULL) {
    if (strncmp(temp, "\"", 1) == 0) {
        //int i = strlen(temp);
        printf("first if");
        quotes = strtok(temp, "\"");    
    } else if (strncmp(temp, "\"", 1) != 0) {
        *next++ = temp;
        temp = strtok(NULL, " \n&");
    }
} 
```

如果字符串的一部分用引号引起来，我很难理解如何仍然保留空格。例如，如果我希望 execvp() 执行以下命令：diff "space name.txt" sample.txt，它应该将 diff 保存在 args[0]，space name.txt 保存在 args[1]，sample.txt 保存在 args[ 2]。

我不太确定如何实现这一点，我已经尝试了几种不同的 if 语句逻辑方式，但我并不完全在那里。目前我正在尝试做一些简单的事情，例如：ls“文件夹”，但是，它卡在了打印我的 printf() 语句的 while 循环中。

我知道这不是一个问题 - 它更多地解释了我正在努力实现的目标以及到目前为止我在哪里，但我遇到了麻烦，并且真的很感激一些关于逻辑应该如何的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:06:53.690

而不是`strtok`逐个字符地处理字符串。如果您看到`"`，请设置一个标志。如果标志已经设置 - 改为取消设置。如果您看到一个空格 - 检查标志并切换到下一个参数，或者将空格添加到当前。任何其他字符 - 添加到当前。零字节 - 完成处理。

通过一些额外的努力，您甚至可以处理`diff "file \"one\"" file\ two`（您应该得到`diff`,`file "one"`和`file two`结果）之类的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:55:23.960

所以这是我在该行中读到的地方：

```
while((qtemp = fgets(line, size, stdin)) != NULL ) {
    if (strcmp(line, "exit\n") == 0) {
        exit(EXIT_SUCCESS);
    }
    spaceorquotes(qtemp);
} 
```

然后我去这个：（我没有添加我的初始化程序，但你明白了）

```
length = strlen(qtemp);
for(i = 0; i < length; i++) {
    position = strcspn(qtemp, " \"\n");
    while (strncmp(qtemp, " ", 1) == 0) {   
        memmove(qtemp, qtemp+1, length-1);
        position = strcspn(qtemp, " \"\n");
    } /*this while loop is for handling multiple spaces*/

    if (strncmp(qtemp, "\"", 1) == 0) { /*this is for handling quotes */    
        memmove(qtemp, qtemp+1, length-1);
        position = strcspn(qtemp, "\"");
        stemp = malloc(position*sizeof(char));
        strncat(stemp, qtemp, position);
        args[i] = stemp;
    } else {      /*otherwise handle it as a (single) space*/
        stemp = malloc(position*sizeof(char));
        strncat(stemp, qtemp, position); 
        args[i] = stemp;
    }
    //printf("args: %s\n", args[i]);
    length = strlen(qtemp);
    memmove(qtemp, qtemp+position+1, length-position);
}
args[i-1] = NULL; /*the last position seemed to be a space, so I overwrote it with a null to terminate */
if (execvp(args[0], args) == -1) {
    perror("execvp");
    exit(EXIT_FAILURE);
} 
```

我发现使用 strcspn 有帮助，正如可修改的左值所建议的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:08:34.033

我什至不明白你试图做什么。您是否尝试将输入字符串标记为空格分隔的标记？

只需在空格上分隔输入字符串，当您遇到双引号字符时，您需要第二个内部循环来处理带引号的字符串。

带引号的字符串比搜索结束引号要多。您需要处理反斜杠，例如反斜杠转义引号和反斜杠转义反斜杠。

只需考虑以下几点：

```
diff "space name \" with quotes.txt\\" foo 
```

它指的是（垃圾）文件名`space name " with quotes.txt\`。将此用作测试用例，然后您就知道何时完成了基础知识。请注意，shell 命令行拆分比这要疯狂得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:21:28.507

这是我的想法：

1.  制作两个指针`A`和`B`，最初指向字符串的第一个字符。
2.  使用指针遍历字符串`A`，将每个字符复制到数组中，只要它不是空格。
3.  到达 a后，从该位置开始`"`指针并继续前进，直到到达下一个，复制包括空格在内的所有内容。`B``A+1``"`
4.  现在从数字 2 开始重复，从 char 开始`B+1`。
5.  只要你还没有达到，就重复`\0`。

**注意：**如果有**嵌套**引号，您将不得不考虑该怎么做。

您还可以使用标志 (int 1 || 0) 和指针来表示您是否在引号中，遵循基于标志的 2 个单独规则。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T13:34:08.403

写三个函数。所有这些都应该返回它们处理的字节数。首先，处理引用参数的那个。

```
size_t handle_quoted_argument(char *str, char **destination) {
    assert(*str == '\"');
    /* discard the opening quote */
    *destination = str + 1;

    /* find the closing quote (or a '\0' indicating the end of the string) */
    size_t length = strcspn(str + 1, "\"") + 1;
    assert(str[length] == '\"'); /* NOTE: You really should handle mismatching quotes properly, here */

    /* discard the closing quote */
    str[length] = '\0';
    return length + 1;
} 
```

...然后是一个处理未引用参数的函数：

```
size_t handle_unquoted_argument(char *str, char **destination) {
    size_t length = strcspn(str, " \n");
    char c = str[length];
    *destination = str;
    str[length] = '\0';
    return c == ' ' ? length + 1 : length;
} 
```

...然后是处理（可能是重复的）空格的函数：

```
size_t handle_whitespace(char *str) {
    int whitespace_count;
    /* This will count consecutive whitespace characters, eg. tabs, newlines, spaces... */
    assert(sscanf(str, " %n", &whitespace_count) == 0);
    return whitespace_count;
} 
```

将这三者结合起来应该很简单：

```
size_t n = 0, argv = 0;
while (line[n] != '\0') {
    n += handle_whitespace(line + n);
    n += line[n] == '\"' ? handle_quoted_argument(line + n, args + argv++)
                         : handle_unquoted_argument(line + n, args + argv++);
} 
```

通过将其分解为四个独立的算法，你能看出这个任务变得多么简单吗？

# c# - 仅在 Windows XP 上异步接收的 UdpClient 异常

> ID：15615594
> 
> 赞同：2
> 
> 时间：2013-03-25T13:00:41.607
> 
> 标签：c#, .net, sockets, windows-xp, udpclient

我的 ac# 代码在 Windows vista/7 中运行良好，但在 Windows XP 上却不行。

有问题的部分是“多播”节点，它基本上通过多播地址+端口读取和发送数据。

读取/写入网络的部分是单例。

每个访问这个单例的线程都必须指出它们何时需要开始监听，何时停止。

当至少一个线程需要“开始”时监听套接字，当所有线程“停止”时我们停止（他们必须给出一个 Guid 令牌，即 Start 方法返回）。

这种启动/停止机制是为了确保如果没有线程需要查看网络上发生的事情，我们不会为此消耗内存。

我遇到的问题是，在 Windows XP 上，我遇到了这个异常：

```
System.Net.Sockets.SocketException (0x80004005): The I/O operation has been aborted because of either a thread exit or an application request
   at System.Net.Sockets.Socket.EndReceiveFrom(IAsyncResult asyncResult, EndPoint& endPoint)
   at System.Net.Sockets.UdpClient.EndReceive(IAsyncResult asyncResult, IPEndPoint& remoteEP) 
```

经过一番搜索，似乎在 Windows XP 及更低版本上，当线程结束时，操作系统会释放其所有 I/O 资源。（[VB.NET 3.5 SocketException 在部署但不在开发机器上](https://stackoverflow.com/questions/1609706/vb-net-3-5-socketexception-on-deployment-but-not-on-development-machine)）。

有没有办法避免这种行为？因为在我的情况下，我创建一个在执行结束之前结束的线程是很正常的，而且我不想释放它的套接字？

如果不可能，您将如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:20:30.800

异步操作的调用线程在操作完成之前终止。

异步 I/O 操作使用称为 IOCP（I/O Completion Port）的机制在 I/O 操作结束时通知正在执行的线程。

在幕后，整个事情基于一种称为重叠 I/O 的东西。在 Windows Vista 中，重叠 i/o 的行为发生了变化，因此当调用线程中止时，I/O 操作不再被取消。

在 Windows Vista（例如 XP）之前，每当调用线程中止时，由该线程发起的任何重叠 i/o 都会被取消，这可能就是此异常的原因。

您可以在这里阅读更多相关信息：http: [//www.lenholgate.com/blog/2008/02/major-vista-overlapped-io-change.html](http://www.lenholgate.com/blog/2008/02/major-vista-overlapped-io-change.html)

您不能覆盖此行为，但可以确保（例如，使用事件）您不会尝试使用创建线程不再处于活动状态的任何 I/O 资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T13:54:51.673

所以这似乎是由于windows XP在线程结束时自动释放线程创建的资源（[部署时的VB.NET 3.5 SocketException，但不在开发机器上](https://stackoverflow.com/questions/1609706/vb-net-3-5-socketexception-on-deployment-but-not-on-development-machine)）。

因此，我的解决方法是让一个线程将`IsBackground`属性设置为 true，即在 BlockingCollection 上进行迭代。当我需要再听一个 IP 时，我将这个 IP 添加到阻塞集合中，这个线程会创建它。

由于该线程在整个应用程序生命周期中永远不会结束，因此不会释放资源。我已将此行为检查`Environment.OSVersion.Version.Major`为大于或等于 6，即 Vista 版本号。

现在它就像所有版本的魅力一样工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T09:18:55.833

在较新的 .NET FrameWork 版本上，这可以解决问题。

```
TaskEx.Run(() => _udp.BeginReceive(AsyncCallback, state)).ConfigureAwait(false); 
```

# android - 快捷方式主屏幕，如何发送额外内容

> ID：15615595
> 
> 赞同：2
> 
> 时间：2013-03-25T13:00:42.963
> 
> 标签：android, android-intent, shortcut

我在某处读过（但我再也找不到了）应该可以从设备主屏幕上的快捷方式发送附加信息。我成功创建了一个快捷方式，但`Bundle extras = getIntent().getExtras();`给出了一个空指针。

我按如下方式创建快捷方式：

```
 Intent shortcutIntent = new Intent(this.getApplicationContext(),
                        Shortcut_Activity.class);

                shortcutIntent.setAction(Intent.ACTION_MAIN);

                Intent addIntent = new Intent();
                addIntent
                        .putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
                addIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, name);
                addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,
                        Intent.ShortcutIconResource.fromContext(this.getApplicationContext(),
                                R.drawable.ic_shortcut));
                addIntent.putExtra("ID", id); //THIS IS THE EXTRA DATA I WANT TO ATTACH
                addIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
                this.getApplicationContext().sendBroadcast(addIntent); 
```

可能吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-24T06:43:59.957

是的，我已经实现了，这是代码

```
private void addShortcut() {
    //Adding shortcut for MainActivity 
    //on Home screen
    Intent shortcutIntent = new Intent(getApplicationContext(),
            HOMESHORTCUT.class);
    //Set Extra
    shortcutIntent.putExtra("extra", "shortCutTest ");

    shortcutIntent.setAction(Intent.ACTION_MAIN);

    Intent addIntent = new Intent();
    addIntent
            .putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "HelloWorldShortcut");
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,
            Intent.ShortcutIconResource.fromContext(getApplicationContext(),
                    R.drawable.ic_launcher));

    addIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");

    getApplicationContext().sendBroadcast(addIntent);

}
//GET Extra in HOMESHORTCUT activity.
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mTextExtra=new TextView(this);
        Bundle bundel=getIntent().getExtras();
        String getExString=getIntent().getExtras().getString("extra");
        mTextExtra.setText(getExString);
        setContentView(mTextExtra);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:10:01.463

如此处发现：http: [//www.joulespersecond.com/2010/04/android-tip-effective-intents/](http://www.joulespersecond.com/2010/04/android-tip-effective-intents/)

幸运的是，有一个解决方案。更好的方法是将行 ID 作为 URI 的一部分，而不是作为额外的一部分。所以之前的代码变成了这样：

```
void returnShortcut(int rowId, String shortcutName) {
    Intent i = new Intent(this, ShowInfoActivity.class);
    i.setData(ContentUris.withAppendedId(BASE_URI, rowId));
    Intent shortcut = new Intent();
    shortcut.putExtra(Intent.EXTRA_SHORTCUT_INTENT, i);
    shortcut.putExtra(Intent.EXTRA_SHORTCUT_NAME, shortcutName);
    setResult(RESULT_OK, shortcut);
    finish();
} 
```

BASE_URI 可以是任何东西，但它应该是特定于您的应用程序的东西。关键是 Data URI 用于确定两个 Intent 是否相等，因此系统最终会为此创建一个新的 Activity，即使具有不同数据的同一个 Activity 在您的任务堆栈上也是如此。

# javascript - 如何克服javascript数组迭代跳过记录/秒

> ID：15615598
> 
> 赞同：0
> 
> 时间：2013-03-25T13:00:51.267
> 
> 标签：javascript, arrays, firefox, safari

在 Firefox 和 Safari 中出现问题，但在 Chrome 中它可以正常工作。

这个 javascript 数组包含测验问题，我一次显示一个。但是，有时并非所有记录都被迭代。我使用了控制台，它肯定会加载所有问题，但有时仍会跳过一条记录（通常只有第一个）。

**编辑：**我注意到这个数组适用于测验，所有问题都是有序的，即数组中的 290,291,293。但是在一个不工作的例子中，测验 ID 的顺序是这样的，286,285,287,288 和 285 是被跳过的，这可能是问题的一部分。

这是我的Javascript数组代码，请帮我解决这个问题。

```
var currentquestion;

        jQuery.ajax({
                    url:"quizajax.php",

        dataType: "json",
                data: { 
                    quizidvalue: <?=$thisquizid?>
                },
        }).done(function(data) {
                questions = data;
                for(i in data){
                    console.log(data[i]);

                }
            });

function nextQuestion (){
        for(i in questions) {
            if(i<=currentquestion)
                continue;

            currentquestion = i;

            for(y in questions[i]) {
                console.log("CurrentA: "+ currentquestion);
                console.log("I: " + i);
                console.log(questions[i][y].answerid);
            }
            console.log("CurrentQ: "+ currentquestion);
            console.log("I: " + i);
            console.log(questions[i]);
            questionVariables ();
            break;
        } 
```

来自 db 的示例代码，

```
 questionid | quizid | questiontype |   qdescription   |           qfilelocation            | noofanswers | answertype 
------------+--------+--------------+------------------+------------------------------------+-------------+------------
        285 |     55 | text         | 6 answer text    | null                               |           6 | text
        287 |     55 | text         | 4ans text q      | null                               |           4 | text
        289 |     55 | text         | 2 answers text q | null                               |           2 | text
        286 |     55 | text         | 5 answer text q  | null                               |           5 | text
        288 |     55 | text         | 3 answer text q  | null                               |           3 | text
        290 |     55 | image        | image q and a    | image/55/712013a88298585d415c.jpeg |           4 | image
        291 |     55 | video        | video q and a    | video/55/8efa10195f0c20d1254f.mp4  |           4 | video 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:20:04.870

该`continue`语句导致循环跳过部分执行。尝试调试，看看代码逻辑哪里有错误。

```
 for(i in questions) {
        if(i<=currentquestion) {
            console.log('Skipping question: ' + i); // add debugging
            continue;
        }
        ... 
```

**编辑：（**基于更新的几条评论）

1.  最好使用传统的 for 循环遍历数组：

    ```
    for (var i = 0, len = questions.length; i < len; i++) { 
    ```

    但是外部循环不需要事件

2.  如果初始化`var currentquestion = 0;`外循环可以替换

    ```
    function nextQuestion (){

        for(y in questions[currentquestion]) {
            console.log("CurrentA: "+ currentquestion);
            console.log(questions[currentquestion][y].answerid);
        }
        console.log("CurrentQ: "+ currentquestion);
        console.log(questions[currentquestion]);
        questionVariables ();
        currentquestion++; //update here
    } 
    ```

3.  看起来您的代码取决于顺序，因此您可以排序

    ```
    .done(function(data) {
        questions = data;
        questions.sort(function(q1,q2){

        //assuming questionid is the correct property
            if (q1.questionid < q2.questionid) {
                return -1;
            } else if (q1.questionid > q2.questionid) {
                return 1;
            }
            return 0; 
        });
        ... 
    ```

4.  您可以使用`jquery.getJSON`或`$.ajax( { success ....})`
5.  您可能应该`currentquestion = 0;`在 done 方法中重置。

# c - Windows 设备驱动程序函数中的 IN 是什么意思？

> ID：15615599
> 
> 赞同：2
> 
> 时间：2013-03-25T13:00:54.700
> 
> 标签：c, windows, device-driver

我开始学习如何编写 Windows 驱动程序，但似乎无法找到包含位于函数参数声明中的 IN 定义的任何地方。例如：

```
NTSTATUS DriverEntry( IN PDRIVER_OBJECT DriverObject, 
                      IN PUNICODE_STRING RegistryPath) 
```

有人可以解释一下 IN 是什么意思吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T03:57:47.650

这些称为 SAL（源注释语言）注释，并且有[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms182032.aspx)说明如何使用它们从出色的静态分析中受益。

实际语法可能因一个 SAL 版本而异（例如 IN 和 _In_）。有向后兼容性，但我建议始终使用最新的语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:11:59.387

据我所知，它的定义如下：

```
///
/// Datum is passed to the function.
///
#define IN 
```

这用于表明该参数只是一个输入参数。

as`OUT` 和`OPTIONAL`用于表示输出和可选参数。

这些可能是为了方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:10:17.157

在 WDK 中，这是在 ntdef.h 文件中定义的。通常，在您的驱动程序中，您只需包含 ntddk.h 或 wdm.h 文件，这些文件又将包含 ntdef.h 和其他重要的头文件。例如：

```
#include <ntddk.h> 
```

如前所述，该注解用于静态分析，简单定义为

```
#define IN 
```

# vba - 如何找到具有特定条件的最后一个值？

> ID：15615600
> 
> 赞同：0
> 
> 时间：2013-03-25T13:00:55.447
> 
> 标签：vba, excel

表 1 列 A 具有以下值（它有大约 3000 条记录。我给出了以下示例值）。我需要找到特定文本的最后一个值。

```
RVT-01
RVT-02
RVT-03
RVT-04
RVT-05
RVT-06
RHT-01
RHT-02
RHT-03
RHT-04
RHT-05
ROI-01
ROI-02
ROI-03
SWO-01
SWO-02
SWO-03
SOR-01
SOR-02
SOR-03
SOR-04
SOR-05
SOR-06
SOR-07 
```

### 使用 VBA 代码

如果输入 short tex `sheet1.cells(2,2) = SWO`，我需要最后一个值`sheet1.cells(2,4)=SWO-03`
如果我输入 `sheet1.cells(2,2) = RHT`，我需要最后一个值`sheet1.cells(2,4)=RHT-05`
如果我输入 `sheet1.cells(2,2) = RVT`，我需要最后一个值`sheet1.cells(2,4)=RVT-06`
如果我输入 `sheet1.cells(2,2) = SOR`，我需要最后一个值`sheet1.cells(2,4)=SOR-07`

上述过程的 VBA 代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:33:38.477

正如**Skip Intro**建议的那样，*不需要 VBA*：在 B 列中，输入如下公式：

1.  `=IF(IF(LEFT(A1,3)=LEFT(A2,3),1,0)=0,RIGHT(TRIM(A:A),2),"")`（获得最大数量）：

或者

2.  `=IF(IF(LEFT(A1,3)=LEFT(A2,3),1,0)=0,A:A,"")`（获取单元格的完整内容）

两者都会向您显示最高值。然后你可以自动过滤该列，隐藏空白，瞧 :)

或者

```
=IF(IF(LEFT($A1,3)=LEFT($A2,3),1,0)=0,NA(),"") 
```

将使您能够在 VBA 中使用 SpecialCells 来获得一个范围，您可以在该范围内查询每个组中的最大值，如下所示：

```
Sub test()

    Dim rng As Range
    Dim cell

    Range("B1:B" & Range("A65536").End(xlUp).Row).Formula = "=IF(IF(LEFT($A1,3)=LEFT($A2,3),1,0)=0,NA(),"""")"
    Set rng = Range(Range("B1:B" & Range("A65536").End(xlUp).Row).SpecialCells(xlCellTypeFormulas, xlErrors).Offset(0, -1).Address)

    For Each cell In rng
        Debug.Print cell.Address & " =" & cell.Value
        MsgBox cell.Address & " =" & cell.Value
    Next
End Sub 
```

有关 SpecialCells 魔术技巧的更多信息，请参阅[如何在 Excel VBA 中删除多行而不使用循环](https://stackoverflow.com/questions/15431801/how-to-delete-multiple-rows-without-a-loop-in-excel-vba)。

# django - Django：当您的缓存键使用 GET 参数时如何删除模板缓存？

> ID：15615602
> 
> 赞同：1
> 
> 时间：2013-03-25T13:00:56.327
> 
> 标签：django, caching, django-templates, django-cache

这个问题困扰了我一上午：

*   我有一些视图接受 GET 参数来修改查询集（order_by 和分页）并缓存它。
*   这些视图非常相似，并且都共享相同的模板。
*   这些模板缓存页面的一部分（考虑到 GET 参数），如下所示：

    ```
    {% with order=request.GET.order_by %}{% with page=request.GET.page %}{# I need them to set the cache name #}
    {% cache 7200 template urlname order page %}
    .... some part of the page...
    {% endcache %}
    {% endwith %}{% endwith %}{# with order and with page #} 
    ```

*   删除查询集缓存是小菜一碟，但事实证明删除模板缓存相当复杂。您通常需要生成 cache_key，[如 DOCS 中所述](https://docs.djangoproject.com/en/dev/topics/cache/#django.core.cache.utils.make_template_fragment_key)。我的问题是我必须生成所有可能的键组合并删除它们，我这样做是这样的：

    ```
    SITE_LIST_OPTIONS = [
        ('url', [reverse_lazy('site_list'),
                 reverse_lazy('best_site_list'),
                 reverse_lazy('banned_site_list'),
                 reverse_lazy('toreview_site_list')]),
        ('order', ['url', 'country', 'upstream_rank']),
        ('page', range(10))]

    def delete_cache_keys(keys):
        '''Deletes all the cache keys on the provided list.'''
        for e in keys:
            cache.delete(e)

    def delete_template_cache(key, filters=None):
        # first, we need to get all possible filter combination options
        if filters:
            options = combine_options(filters)
            keys = [make_template_fragment_key(key, ops) for ops in options]
            delete_cache_keys(keys)
        else:
            key = make_template_fragment_key(key, filters)
            cache.delete(key)

    # context_processor.py (used to generate key in template)

    def urlname(request):
        return {'urlname': resolve_urlname(request)} 
    ```

我想我不是第一个尝试基于 GET 参数缓存模板的人，所以......有没有更明智的方法来删除与这个特定模板相关的所有缓存？

编辑：不知道为什么格式没有出现，但这里有一个更干净的版本，以防万一[http://dpaste.org/XYYo2/](http://dpaste.org/XYYo2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:59:13.133

您可以将模板的所有缓存片段组合在一起，方法是为它们提供绑定到模板的组缓存键。当您想使与模板相关的所有内容失效时，您只需清除模板的组键即可：

```
>>> from django.core.cache import cache

>>> template_name = 'foo.html'
>>> cache.set(template_name, 1)
>>> make_group_key = lambda: '{name}-{version}'.format(
        name=template_name, version=cache.get(template_name))
>>> cache.set(make_group_key(), 'page content...')
>>> cache.get(make_group_key())
'page content...'

>>> cache.incr(template_name)
>>> cache.get(make_group_key()) is None
True 
```

对于您的代码，您可以编写一个模板标签，将组键传播到上下文，例如

```
{% get_template_key template as tmpl_key %}
{% cache 7200 template urlname order page tmpl_key %} 
```

或者您可以在视图或其他地方生成密钥。

然后删除部分就像`cache.incr(template_name)`（您可能需要处理 template_name 不再存在的异常）

这种方法增加了一个额外的缓存往返，但通常它足够快。

# css - asp.net mvc 4 捆绑包和显式文件包括

> ID：15615607
> 
> 赞同：0
> 
> 时间：2013-03-25T13:01:08.133
> 
> 标签：css, asp.net-mvc-4, bundle

我很困惑，我刚开始为我的 ASP.NET MVC4 网站处理 CSS，但我并不完全理解发生了什么。

目前我的移动布局有效，但对其进行任何更改都会导致一种又一种奇怪的效果。（例如，未显示到 ajax-loader.gif 的表单不断被显示。）

我有以下内容`.Layout.Mobile.cshtml`

> ```
>  @Styles.Render("~/Content/Mobile/css", "~/Content/jquerymobile/css")  
>     <link rel="stylesheet" href="~/Content/Mobile/css/jquery.mobile-1.2.0.min.css" /> 
>     <link rel="stylesheet" href="~/Content/Mobile/css/jquery.mobile-1.2.0.css" /> 
>     <link rel="stylesheet" href="~/Content/Mobile/css/jquery.mobile.theme-1.2.0.css" /> 
> 
>     @Scripts.Render("~/bundles/jquery", "~/bundles/jquerymobile") 
>     <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
>     <script src="http://code.jquery.com/mobile/latest/jquery.mobile.min.js"></script> 
> ```

我已将`BundleMobileConfig.cs`App_start 中的修改如下：

```
 //       bundles.Add(new StyleBundle("~/Content/Mobile/css")
 //           .Include("~/Content/Site.Mobile.css"));
 //kludge is the above wrong...and the following needed??
         bundles.Add(new StyleBundle("~/Content/Mobile/css")
            .Include("~/Content/Site.Mobile.css",
                     "~/Content/Mobile/css/")); 
```

我不明白为什么这不是这个捆绑包的默认设置？

这是我的问题/问题：

1.  如果您注意到样式表，我不需要包含三个显式链接，它们应该来自捆绑包。但是，如果删除其中任何一个，站点就会中断。

    *   为什么修改后的包不会`~/Content/Mobile/css`拉出这些 css 文件？
2.  对于脚本文件，我查看了 code.jquery.com，但我不明白为什么需要这些。我的本地代码是最新的（即 jquery-1.9.1.js 和 jquery.mobile-1.2.0.js

    *   我希望版本 1.9.1 应该能够毫无问题地替换 1.7.1，但事实并非如此

    *   jquery.mobile.min.js 应该只在发布和调试版本之间切换，这不应该导致问题，但确实如此。

我使用 firebug 查看正在加载哪些文件，我发现当我只使用没有显式包含的包的渲染时，我没有得到包含的文件，为什么不呢？我已经阅读了有关捆绑的信息，看来我应该只获取捆绑的文件。

任何人都可以阐明正在发生的事情并指出我的教程，这样我就可以学习如何使用如何调试 CSS 和捆绑包。我已经阅读了几本，我发现萤火虫非常有用，但我不知道下一步该往哪里看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:32:42.693

尝试用这个替换你的包代码。

```
bundles.Add(new StyleBundle("~/Content/Mobile/css")
        .Include("~/Content/Site.Mobile.css",
                 "~/Content/Mobile/jquery.mobile*")); 
```

这应该在没有明确这样做的情况下加载您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:46:54.337

你的权利这确实有效！谢谢....

奇怪的是，以下内容不起作用：

```
bundles.Add(new StyleBundle("~/Content/Mobile/css")
    .Include("~/Content/Site.Mobile.css",
             "~/Content/Mobile/css/jquery.mobile-{version}.js",
             "~/Content/Mobile/css/jquery.mobile.theme-{version}.js",
             "~/Content/Mobile/css/jquery.mobile.structure-{version}.js",
             "~/Content/Mobile/css/")); 
```

我明白你的例子为什么有效......但不明白为什么我的不......除非版本标签不像我期望的那样工作......

我还发现 jquery 1.9.1 与 1.7.1 有很大不同，为此我必须执行以下操作：

```
@Scripts.Render("~/bundles/jquery")  
@Scripts.Render("~/bundles/jquerymobile")  
<script src="~/Scripts/jquery-1.9.1.js"></script>
<script src="~/Scripts/jquery-migrate-1.1.1.js"></script> 
<script src="~/Scripts/jquery.mobile-1.2.0.js"></script> 
```

这有效....使用您的示例，我将找出一个通配符模式来包含它。

# android - Android 应用程序：使用“打开方式...”处理在 Android 其他地方打开的链接

> ID：15615609
> 
> 赞同：0
> 
> 时间：2013-03-25T13:01:20.433
> 
> 标签：android, webview, hyperlink

我对 Android 应用程序开发非常陌生，但我有一个包含应用程序的网站 - 该应用程序只是使用 webview 来加载网站。到目前为止非常简单。

因为桌面用户将使用网站本身，并且他们希望分享他们在网站上遇到的链接，所以移动用户可能会，比如说，去 Facebook，看到他们想要访问的链接，它会简单地在浏览器，而不是在应用程序中加载该 URL，这显然会分散/混淆用户（该网站有一个登录系统，对于初学者来说，他们需要从 android 浏览器再次登录）。

有没有办法在 Android 中监听到网站的链接并使用应用程序的 webview 打开这些链接，而不是在浏览器中？我知道 Facebook 有打开应用程序的 fb:// 链接。

不过，问题更加复杂。实际上，为了防止内部链接启动外部 android 浏览器，我有一个过滤器，效果如下：

```
public boolean shouldOverrideUrlLoading(WebView view, String url) {
     if (url.contains("root_address_of_site/page/")) {

         return false;
     } else {
         view.getContext().startActivity(
                  new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
     }
        return true;

 } 
```

在应用程序中，您可以通过基本 url 分享到 Facebook、Twitter 和日历的链接，因此到 Twitter 的链接可能是[https://twitter.com/intent/tweet?original_referer=root_address_of_site/page/&text=page_name&tw_p=tweetbutton&url= root_address_of_site/page/](https://twitter.com/intent/tweet?original_referer=root_address_of_site/page/&text=page_name&tw_p=tweetbutton&url=root_address_of_site/page/)。当然，这只会被过滤器捕获，因为意图 URL“包含”“root_address_of_site/page/”。我想知道是否有办法更改过滤器，使其“以”开头，而不是“url.contains”？这意味着 twitter/facebook 链接仍将在外部打开，但指向网站本身的链接仍将在应用程序内打开，无论如何。

我希望这是有道理的——很难描述。感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:17:40.653

这是[有关如何在应用程序中处理您自己的链接的文档](http://developer.android.com/training/sharing/receive.html)

因此，您需要将您的一项活动注册为所需 uri 模式的处理程序：

```
<activity android:name="OpenCustomUriActivity">
     <intent-filter>
          <data
              android:scheme="http"
              android:host="yoursite.com"
              android:pathPrefix="pathOnYourSiteIfNeeded"
              />
      </intent-filter>
</activity> 
```

然后只需处理活动中的意图并做您需要的事情。

# c# - 用于记录更新的复杂字符串解析

> ID：15615612
> 
> 赞同：3
> 
> 时间：2013-03-25T13:01:27.267
> 
> 标签：c#, regex

考虑下面的输入字符串。

```
var inputString = "Config: EbizNewTestProject.dll PaymentSOAUrl for Paid: http://111.11.11.111/Payment.asp?" + Environment.NewLine;
            inputString += "Exception: <Response> <ReturnCode>4000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: " + Environment.NewLine;
            inputString += "Config: EbizNewTestProject.dll PaymentSOAUrl for Paid: http://111.11.11.111/Payment.asp? " + Environment.NewLine;
            inputString += "Exception: <Response> <ReturnCode>4000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: " + Environment.NewLine;
            inputString += "Config: PartnerServicesTestBase.dll PaymentSOAUrl for Paid: https://172.31.26.38/Payment.asp? " + Environment.NewLine;
            inputString += "Exception: <Response> <ReturnCode>5000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: " + Environment.NewLine;
            inputString += "Config: PartnerServicesTestBase.dll PaymentSOAUrl for Paid: https://172.31.26.38/Payment.asp? " + Environment.NewLine;
            inputString += "Exception: <Response> <ReturnCode>5000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>" + Environment.NewLine;
            inputString += "Config: EbizNewTestProject.dll PaymentSOAUrl for Paid: http://111.11.11.111/Payment.asp? " + Environment.NewLine;
            inputString += "Exception: <Response> <ReturnCode>4000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: " + Environment.NewLine; 
```

让我们观察“Exceptions”的字符串内容（给出的示例中共有 5 个）。

**第一**

```
Exception: <Response> <ReturnCode>4000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: 
```

**第二个**

```
Exception: <Response> <ReturnCode>4000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: 
```

**第三个**

```
Exception: <Response> <ReturnCode>5000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: 
```

**第四人**

```
Exception: <Response> <ReturnCode>5000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: 
```

**第五人**

```
Exception: <Response> <ReturnCode>4000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: 
```

如果我们仔细看，第一种情况和第二种情况是相同的。第三和第四也是如此。第 5 个与第 1/2 个相同。

我需要做的是，如果第一个和第二个或连续的“异常”文本是相同的，那么留下第一个，其他的将被替换为“异常：--DO--”。如果找到一个相同的字符串但不是连续的，那么它将按原样显示。

此后，输出将是（原始字符串的所有内容都将保持不变，只有匹配的异常将被更新，如下所示）

**第一**

```
Exception: <Response> <ReturnCode>4000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: 
```

**SecondOne（因为它与 Firstone 相同并且是连续的）**

```
Exception: --DO-- 
```

**ThirdOne（因为是新的）**

```
Exception: <Response> <ReturnCode>5000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: 
```

**FourthOne（因为它与 Thirdone 相同并且是连续的）**

```
Exception: --DO-- 
```

**FifthOne（虽然它与第一个/第二个相同，但不是连续的）**

```
Exception: <Response> <ReturnCode>4000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: 
```

我做了这个程序。首先，我根据索引（开始和结束）获取异常的内容，然后将值存储在集合中。然后使用循环检查第一个和第二个的内容并进行所需的更新。

但我相信还有很多比这更好的解决方案（可能是正则表达式、linq、lambda组合。）

需要帮助以有效的方式解决此问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:09:17.917

当谈到正则表达式时，我仍然是一个主要的新手，但似乎你可以使用它们来做到这一点......

我仍在努力解决这个问题，如果我不能足够快地到达那里，希望大师能指出你正确的方向，但这就是我目前所拥有的：

**正则表达式匹配：**

```
((Exception.*?)(?=Exception)){2} 
```

基本上，查找以单词“Exception”开头的字符串并匹配所有内容，直到下一次看到单词“Exception”（但第二次不匹配），然后查找相同字符串的 2 个副本。

**正则表达式替换：**

```
$1Exception: --DO-- 
```

意思是，保留第一次出现并用“例外：--DO--”替换第二次

希望这至少能让你走上正确的道路，我也会继续玩下去。（再次，抱歉，Regex 对我来说还是相当新的，我只知道这将是一个很酷的解决方案）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T02:08:45.890

这是我的最终版本

```
var inputString = "Config: EbizNewTestProject.dll PaymentSOAUrl for Paid: http://111.11.11.111/Payment.asp?" + Environment.NewLine;
            inputString += "Exception: <Response> <ReturnCode>4000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: " + Environment.NewLine;
            inputString += "Config: EbizNewTestProject.dll PaymentSOAUrl for Paid: http://111.11.11.111/Payment.asp? " + Environment.NewLine;
            inputString += "Exception: <Response> <ReturnCode>4000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: " + Environment.NewLine;
            inputString += "Config: PartnerServicesTestBase.dll PaymentSOAUrl for Paid: https://172.31.26.38/Payment.asp? " + Environment.NewLine;
            inputString += "Exception: <Response> <ReturnCode>5000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: " + Environment.NewLine;
            inputString += "Config: PartnerServicesTestBase.dll PaymentSOAUrl for Paid: https://172.31.26.38/Payment.asp? " + Environment.NewLine;
            inputString += "Exception: <Response> <ReturnCode>5000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: " + Environment.NewLine;
            inputString += "Config: EbizNewTestProject.dll PaymentSOAUrl for Paid: http://111.11.11.111/Payment.asp? " + Environment.NewLine;
            inputString += "Exception: <Response> <ReturnCode>4000</ReturnCode> <SuccessCode>NO</SuccessCode> <ReturnDesc>System Error</ReturnDesc> <ReturnURL>http://localhost/Default.aspx</ReturnURL> <CustomParameter /> </Response>: " + Environment.NewLine;

            TextReader reader = new StringReader(inputString);
            string line = null;
            StringBuilder sb = new StringBuilder();
            string firstLine = null;

            //append the first line
            sb.AppendLine(reader.ReadLine());

            //read the first exception line
            firstLine = reader.ReadLine();
            sb.AppendLine(firstLine);

            while ((line = reader.ReadLine()) != null)
            {
                if (line.StartsWith("Exception:"))
                {

                    if (line == firstLine)
                    {
                        sb.AppendLine("Exception:-- Do --");
                    }

                    if (line != firstLine)
                    {
                        sb.AppendLine(line);
                        firstLine = line;

                    }
                }
                else
                {
                    sb.AppendLine(line);
                }
            }

            Console.WriteLine(sb.ToString());

            Console.ReadKey(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T13:42:52.323

我将介绍 XML 反序列化，它为您处理了很多痛苦：

进口：

```
using System.Xml.Serialization;
using System.Text.RegularExpressions; 
```

代码：

```
//find the Reponses with regex
MatchCollection  matches = Regex.Matches(inputString, "<Response>(.)+</Response>");

XmlSerializer serializer = new XmlSerializer(typeof(Response));

List<Response> entityList = new List<Response>();

//Deserialize the reponses
foreach (Match item in matches)
{
    using(System.IO.TextReader rdr = new StringReader(item.Value))
    {
        Response entity = (Response)serializer.Deserialize(rdr);
        entity.Line = item.Value;
        entityList.Add(entity);
    }
}

//now you have real objects which you can treat however you want. Example just a loop or linq or whatever
for (int i = 0; i < entityList.Count; i++)
{
    if (i > 0 && entityList[i - 1].ReturnCode == entityList[i].ReturnCode)
        Console.Out.WriteLine("--DO--");
    else
        Console.Out.WriteLine(entityList[i].Line);
} 
```

和实体：

```
public class Response
{
    [XmlElement("ReturnCode")]
    public int ReturnCode { get; set; }

    [XmlIgnore()]
    public string Line { get; set; }
} 
```

# symfony - Twig / Symfony2 - 在数组合并中使用变量

> ID：15615615
> 
> 赞同：2
> 
> 时间：2013-03-25T13:01:30.837
> 
> 标签：symfony, twig

```
{% set var_name1 = "hello" %}
{% set var_name2 = "there" %}
{% array1|merge({var_name1: var_name2}) %} 
```

我希望上面的代码将它添加到array1：

```
hello:there 
```

...但它补充说：

```
var_name1:there 
```

我尝试将 {{ }} 包裹在 var_name1 周围。是否可以将记录添加到数组并使用变量作为键？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T13:08:59.813

将密钥名称括在括号中：

```
{% array1|merge({(var_name1): var_name2}) %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-19T15:19:17.883

请注意，如果 var_name1 是数值，它将不起作用。您必须将其与字符串值连接：

```
{% set array1 = array1|merge({(var_name1~'_'): var_name2}) %} 
```

# visual-studio - 如何在 Visual Studio 2012 下启用 TypeScript 0.9 nightly drop

> ID：15615618
> 
> 赞同：1
> 
> 时间：2013-03-25T13:01:42.487
> 
> 标签：visual-studio, generics, typescript, preview, beta

任何想法我如何尝试泛型功能（位于 dev-0.9.x 分支）

a) 在 Visual Studio 2012 中使用 TypeScript 插件

b）或者至少在命令提示符下？

我遵循了如何构建步骤（涉及 Jake），所以我有一个最新版本。

但是，我尝试了 Microsoft 的[帖子，](http://blogs.msdn.com/b/typescript/archive/2013/01/29/trying-the-latest-typescript-build.aspx)但使用了以下代码

```
class MyClass<T> {

} 
```

Visual Studio 2012 报告 { 是预期的（显然不知道新的语言功能 }）

如果我尝试从命令提示符编译，我会得到同样的错误。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:27:58.693

0.9 代码引入了相当多的更改，因此它与博客文章中的 Visual Studio 插件不兼容（即，您不能只替换 typescriptServices.js，它会起作用）。

在 MSI 发布 0.9 版本之前，它也安装了更新的 VS 插件，它只能在命令行中使用。

但是，如果您构建，然后运行 ​​tsc.js 脚本，命令行应该可以工作。您能否提供有关您的步骤和所见内容的更多详细信息？随着工作的进行，这种情况目前正在迅速变化，因此请确保您已提取最新的位，以便我进行验证。

# django - 遍历列表并在复杂查询中使用值 Django ORM

> ID：15615620
> 
> 赞同：0
> 
> 时间：2013-03-25T13:01:58.440
> 
> 标签：django, django-models

我有以下设计的要求：-example.com/?param1=blah¶m1=blah1....param1=blahn。请注意，我希望 param1 具有多个参数。现在要捕获参数 param1 的值，我执行以下操作

```
searchQery = request.GET.getlist('param1') 
```

我得到一个包含 param1 值的列表。我想使用复杂的查询

```
for item searchQuery:
      val = MyModel.objects.filter(Q(item__startswith=searchQuery[0])| Q(item__startswith=searchQuery[1])| Q(item__startswith=searchQuery[2])) all the way to searchQuery[n] 
```

简而言之，我想动态地遍历列表的值，目前我迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:14:11.400

```
from operator import or_
val = MyModel.objects.filter(reduce(or_,(Q(item__startswith=x) for x in searchQuery))) 
```

用于`reduce`组合生成的`Q`表达式序列。

# css - 粘性页脚问题，页脚上方的间隙

> ID：15615627
> 
> 赞同：0
> 
> 时间：2013-03-25T13:02:10.787
> 
> 标签：css, html, footer

我遇到了一个问题，即粘性页脚似乎在其上方添加间距，我不确定是什么原因造成的，我尝试了几种不同的粘性页脚方法，但似乎都有同样的问题。标记一定有问题吗？

这是网站： http: [//www.adamtoms.co.uk/](http://www.adamtoms.co.uk/)

感谢任何帮助！

亲切的问候，亚当

```
 <?php defined( '_JEXEC' ) or die( 'Restricted access' );?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
   xml:lang="<?php echo $this->language; ?>" lang="<?php echo $this->language; ?>" >
<head> 
<jdoc:include type="head" />
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/mk1/css/system.css" type="text/css" />
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/mk1/css/general.css" type="text/css" />
</head>
<div id="wrap">

    <div id="main">

<div id="container">
<body>

<div id="header" >

  <div id="headleft">
   <jdoc:include type="modules" name="logo" />
  </div>

  <div id="headright">
   <div id="navr">
    <div id="nav">
     <jdoc:include type="modules" name="menu" />
    </div>
   </div>
  </div>
</div>

<div id="breadcrumb">
    <jdoc:include type="module" name="breadcrumb" />
</div><br />

<div id="content">
<jdoc:include type="component" name="content" />
<jdoc:include type="component" />
<jdoc:include type="modules" name="slider" />
</div>

<div id="leftrightmain">
<div id="midleft">
<jdoc:include type="modules" name="left" />
</div>
<div id="midright">
<jdoc:include type="modules" name="right" /></div>
</div>

</body>
</div>

</div>
</div>

<footer>
<div id="footer"><jdoc:include type="modules" name="footer" />
    <jdoc:include type="module" name="debug" />

</footer></div>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:06:10.220

第 9 行 system.css 中的以下行导致您的问题...

```
#main {
   overflow: auto;
   padding-bottom: 250px;
} 
```

把它变成这样：

```
#main {
   overflow: auto;
} 
```

我建议您学习如何使用调试工具，例如 chromes 开发人员工具或 firebug for firefox。当查看 HTML 并将鼠标悬停在元素上时，使用 chromes 开发工具很容易找到这一点。它突出显示元素本身蓝色，任何填充绿色和任何边缘橙色。我首先在您的页脚上突出显示，现在在蓝色突出显示上方看到绿色或橙色，表明问题不是您的页脚。所以我向上移动，我发现 ID 为 main 的 div 有一大块绿色，因为我将鼠标悬停在它上面，表示有大量的填充。单击该div后，我查看了CSS规则，看到了padding：250px，然后取消选中它，您的问题就解决了。

**编辑：**

正如下面发现的 NoLiver92...您确定了 -250px 边距顶部，但随后您将其重置为边距 0 自动...

```
#footer {
position: relative;
background-image:url('../images/bg_footer1.png');
margin-top: -250px; /* negative value of footer height */
height: 250px;
clear:both;
width: auto;
margin: 0 auto;} 
```

改为：

```
#footer {
position: relative;
background-image:url('../images/bg_footer1.png');    
height: 250px;
clear:both;
width: auto;
margin: -250px auto 0 auto;}/* negative value of footer height */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:14:31.057

你可能想看看这里！您将 margin top 设置为 -250 px，但您也将 margin 设置为 0 auto。这是一个矛盾，要么删除 margin-top ，要么删除 margin 并用 margin-left、margin-right 和 margin-bottom 替换它。

```
#footer {
position: relative;
background-image:url('../images/bg_footer1.png');
margin-top: -250px; /* negative value of footer height */
height: 250px;
clear:both;
width: auto;
margin: 0 auto;} 
```

# jquery - JQuery 删除和添加跨度类

> ID：15615630
> 
> 赞同：0
> 
> 时间：2013-03-25T13:02:15.503
> 
> 标签：jquery, html, css

我有两个带有用户可以单击的链接的跨度，当单击一个跨度时，它会删除一个类并在单击一个上添加另一个类：

![在此处输入图像描述](../Images/9111c2da45ce1ebf7440c3510c525002.png)

**HTML：**

```
<span class="resCheck label label-success">
  <a data-method="get" class="resCheckLink" href="trafikskola?utf8=%E2%9C%93&amp;query=lund&     
   amp;sort=asc">Cheap prices</a>
</span>
<span class="resCheck label">
  <a class="resCheckLink" data-method="get" href="trafikskola?utf8=%E2%9C%93&query=lund&  
  sort=desc">Expensive prices</a>
</span> 
```

**查询：**

```
$(function(){
    $('.resCheckLink').click(function(e){
        $('.resCheck.label').removeClass('label-success');
        $(this).parent().addClass('label-success')
    });
}); 
```

但是它不起作用，它不会添加和删除类，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:04:10.807

尝试这个

```
$(function(){
    $('.resCheckLink').click(function(e){
        $('.resCheck').removeClass('label-success');
       $(this).parent().addClass('label-success');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:10:17.410

尝试这个...

```
$(function(){
    $('.resCheckLink').click(function(e){
        $('.resCheck').removeClass('label-success');
        $(this).parent().addClass('label-success');
    });
}); 
```

**[工作演示](http://jsfiddle.net/KXDJE/13/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:11:44.910

您正在删除和添加相同的类，因此您将无法实际监控，

```
$('.resCheck.label').removeClass('label-success');
    $(this).parent().addClass('label-success'); 
```

所以请创建另一个具有不同风格的课程，然后尝试，上面的 PSR 给出了答案。

那会做的:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:07:13.760

尝试这个。

```
$(function(){
    $('.resCheckLink').click(function(e){
        $('span.resCheck').removeClass('label-success');
        $(this).parent().addClass('label-success')
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T13:07:21.240

它确实有效，我想你的元素样式不正确还是什么？我添加`return false`以防止链接正常工作。

[jsFiddle](http://jsfiddle.net/78Uk8/)

```
$(function(){
    $('.resCheckLink').click(function(e){
        $('.resCheck.label').removeClass('label-success');
        $(this).parent().addClass('label-success');
        return false;
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T13:10:12.477

尝试这个

```
$(function(){
   $('.resCheckLink').click(function(e){
         $('.resCheck').removeClass('label-success');
         $(this).parent().addClass('label-success')
   });
}); 
```

# twitter - 在我的网站上显示最新的推文.. 用户名未出现

> ID：15615631
> 
> 赞同：1
> 
> 时间：2013-03-25T13:02:16.020
> 
> 标签：twitter, tweets

嗨，我已经集成了 twitter api 来在我的网站上显示最近的推文。

我可以获取最近的推文，但推文不包含用户名（在我的墙上发推文的用户）

下面是我用过的代码

```
<div id="twitter_update_list" style="height:300px;width:300px; overflow:auto; overflow-x:hidden"> 
```

javascipt

```
 <script type="text/javascript" src="https://twitter.com/javascripts/blogger.js"></script>

  <script type="text/javascript" src="https://api.twitter.com/1/statuses/user_timeline.json?screen_name=ABMMyuniverse&include_rts=true&count=4&callback=twitterCallback2"></script> 
```

输出 ：

Aditya Birla Money MyUniverse 现在是 Finnoviti-2012 的骄傲获奖者，该奖项表彰了在金融服务领域激发创新的奖项 122 天前

Team MyUniverse 祝大家#排灯节快乐，愿灯光在你的生活中传播欢乐、和平与繁荣！[http://t.co/xbCUSRRT](http://t.co/xbCUSRrT) 133 天前

只有推文我得到..没有用户详细信息..我怎么能得到那个？

有人请帮助我..提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:25:52.663

最后我整合了 . 我希望这会对某人有所帮助:)

```
 <script language="javascript">

     $(document).ready(function () {
       var username = 'YourTwitterName';
       $.getScript('http://api.twitter.com/1/statuses/user_timeline.json?screen_name=' + username + '&callback=twitterCallback2&count=4');
     });

     function twitterCallback2(twitters)
     {
     var statusHTML = [];
     for (var i=0; i<twitters.length; i++){
     var username = twitters[i].user.screen_name;
     var profileimage = twitters[i].user.profile_image_url;
     var status = twitters[i].text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g, function(url) {
     return '<a href="'+url+'">'+url+'</a>';
      }).replace(/\B@([_a-z0-9]+)/ig, function(reply) {
      return  reply.charAt(0)+'<a href="http://twitter.com/'+reply.substring(1)+'">'+reply.substring(1)+'</a>'; });

      statusHTML.push('<table style="border-top:1px dotted #000"><tr><td><a target="_blank" href="http://twitter.com/' + username + '">' + username + ':</a><br/>' + status + ' <br/><small style="color:#737373">' + relative_time(twitters[i].created_at) + '</small></td></tr></table>');
    }

      $('.loading').fadeOut(800, function() {
      $('#userlatest_tweet').append($(statusHTML.join('')).hide().fadeIn(750));                             
      }); 
      }      
      function relative_time(time_value) {
      var values = time_value.split(" ");
      time_value = values[1] + " " + values[2] + ", " + values[5] + " " + values[3];
      var parsed_date = Date.parse(time_value);
      var relative_to = (arguments.length > 1) ? arguments[1] : new Date();
      var delta = parseInt((relative_to.getTime() - parsed_date) / 1000);
      delta = delta + (relative_to.getTimezoneOffset() * 60);
      if (delta < 60) {
      return 'less than a minute ago';
      }
      else if (delta < 120) {
      return 'about a minute ago';
      }
      else if (delta < (60*60)) {
      return (parseInt(delta / 60)).toString() + ' minutes ago';
      }
      else if(delta < (120*60)) {
      return 'about an hour ago';
      } else if(delta < (24*60*60)) {
      return 'about ' + (parseInt(delta / 3600)).toString() + ' hours ago';
      } else if(delta < (48*60*60)) {
      return '1 day ago';
      else {
      return (parseInt(delta / 86400)).toString() + ' days ago';
     }
   } 
  }

</script>
<div id="userlatest_tweet" style="height: 300px; overflow: auto; overflow-x: hidden">
                <div class="loading">
                </div>
 </div> 
```

**您也可以通过修改statusHTML.push**函数中的表格来添加图像....!!!

如果它工作正常..然后将其作为对其他人有帮助的**答案！**

# ios - 如何在 iOS 上获取当地时间

> ID：15615637
> 
> 赞同：6
> 
> 时间：2013-03-25T13:02:29.973
> 
> 标签：ios, objective-c, nsdate

我只是注意到这`NSDate *nowDate = [NSDate date];`给了我 GMT+0 时间，而不是当地时间。所以基本上在我的 iPad 上是 13:00，这段代码的输出是 12:00。

如何正确获取当地时间？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-25T13:04:00.307

试一试 ！

```
NSDate* sourceDate = [NSDate date];

NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];//use `[NSTimeZone localTimeZone]` if your users will be changing time-zones. 

NSInteger sourceGMTOffset = [sourceTimeZone secondsFromGMTForDate:sourceDate];
NSInteger destinationGMTOffset = [destinationTimeZone secondsFromGMTForDate:sourceDate];
NSTimeInterval interval = destinationGMTOffset - sourceGMTOffset;

NSDate* destinationDate = [[[NSDate alloc] initWithTimeInterval:interval sinceDate:sourceDate] autorelease]; 
```

它将根据当前系统时区为您提供时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T13:23:52.860

NSDate 不关心时区。它只是记录一个时刻。

使用 NSDateFormatter 获取日期的字符串表示时，您应该设置本地时区：

```
NSDate *date = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeStyle:NSDateFormatterMediumStyle];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle]; // Set date and time styles
[dateFormatter setTimeZone:[NSTimeZone localTimeZone]];
NSString *dateString = [dateFormatter stringFromDate:date]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-25T13:14:01.517

```
 NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSCalendarIdentifierGregorian];
 [calendar setTimeZone:[NSTimeZone localTimeZone]];
 NSDateComponents *dateComponents = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:[NSDate date]];
 NSDate *d = [calendar dateFromComponents:dateComponents]; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-25T13:05:18.547

```
// get current date/time
NSDate *today = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
// display in 12HR/24HR (i.e. 11:25PM or 23:25) format according to User Settings
[dateFormatter setTimeStyle:NSDateFormatterShortStyle];
NSString *currentTime = [dateFormatter stringFromDate:today];
[dateFormatter release];
NSLog(@"%@",currentTime); 
```

# javascript - JavaScript中带有for的数组不会改变每个var

> ID：15615640
> 
> 赞同：3
> 
> 时间：2013-03-25T13:02:36.143
> 
> 标签：javascript, google-maps, geocoding

嗨，我在 JavaScript 中使用带有 for 的数组时遇到了一些问题。我们来看一下：

```
var Villes = [
  ['Versailles+France', 'upr2.png'],
  ['Paris+France', 'upr5.png'],
  ['Bruxelle+Belgique', 'upr4.png'],
  ['Manchester+Angleterre', 'upr1.png'],
  ['Monaco+Monaco', 'upr3.png']
];

function initialize() {
  var mapOptions = {
    zoom: 5,
    center: new google.maps.LatLng(46.225453,2.219238),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
  var geocoder = new google.maps.Geocoder();
  for (var i = 0; i < Villes.length; i++) {
    var ville = Villes[i];
    geocoder.geocode( { 'address': ville[0]}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        var marker = new google.maps.Marker({position: results[0].geometry.location,map: map,icon: ville[1]});
        alert(ville[1] + status);
      } else {
        alert("Geocode n'a pas fonctionner. Erreur: " + status);
      }
    });
  }
} 
```

我的地图带有我所有的标记，但图标永远不会改变，就像对我不习惯 JS`ville[1]`的静态调用一样，这是我第一次看到它。`upr3.png`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:05:52.813

到你给的回调`geocode`被调用时，`i`它的值是循环结束。

通常的通用解决方案是通过立即调用的函数表达式来保护它：

```
for (var i = 0; i < Villes.length; i++) {
     (function(ville){
        geocoder.geocode( { 'address': ville[0]}, function(results, status)
           ...
        });
     })(Villes[i]);
} 
```

由于变量的范围是声明它的函数，这使得新变量`ville`不受循环变化的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:07:05.870

问题是它`ville`不是一个数组，所以当 for 循环完成时，`ville`只有初始数组 (png3) 中最后一项的值。您需要在将值设置为后立即调用该函数`ville`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:09:20.827

调用是异步的`geocode`，这意味着您将遍历所有地方并发送请求，然后响应将到达。那个时候你已经跑完了循环，`ville`变量有最后一个地方的值。

在循环中的代码周围放置一个函数表达式，以便每次迭代都有自己的变量副本：

```
for (var i = 0; i < Villes.length; i++) {

  (function(ville){

    geocoder.geocode( { 'address': ville[0]}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        var marker = new google.maps.Marker({position: results[0].geometry.location,map: map,icon: ville[1]});
        alert(ville[1] + status);
      } else {
        alert("Geocode n'a pas fonctionner. Erreur: " + status);
      }
    });

  })(Villes[i]);

} 
```

# javascript - 滚动没有滚动条的 div 内容

> ID：15615644
> 
> 赞同：1
> 
> 时间：2013-03-25T13:02:49.193
> 
> 标签：javascript, jquery, html, css, scrollbar

我有两种不同的看法。我不想显示内部 div 的滚动条。通过仅更改外部 div 滚动条，我必须更改内部 div 中的内容。但两者都是不同的视图页面。

我想要与此类似的操作（来自[http://jsfiddle.net/qcv5Q/1/](http://jsfiddle.net/qcv5Q/1/)）：在主页（main div）中，我定义为

```
$(window).scroll(function()    {
    document.getElementById("mainDiv").contentWindow.callchildPage();
}); 
```

在子页面中我调用了这个函数，我不知道如何在这里编码以显示为小提琴？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T19:19:07.330

## ***[`jsFiddle Demo`](http://jsfiddle.net/qcv5Q/200/)***

只需通过使用将滚动条设置为相对于侧边栏内容

```
#scroller{ width: 150%; } 
```

该演示展示了即使在不同的宽度下滚动条也不会显示。

# php - AJAX XMLHttpRequest 给出错误

> ID：15615645
> 
> 赞同：1
> 
> 时间：2013-03-25T13:02:49.583
> 
> 标签：php, ajax, apache2, xmlhttprequest

我必须在 php 上部署一个应用程序，它是使用 wamp 服务器开发的（在 win 上）。现在我必须将它部署在 apache2 debian 服务器上。该应用程序可以在使用 wamp 的开发人员 PC 上运行，但无法在 debian 服务器上运行。

问题是所有网格（jquery网格）都使用ajax加载内容

```
grid.jqGrid({
            datatype: "xml",
            url:'../Controladores/cPedidos.php?action=lpd',
            mtype: 'POST',
            colNames:['FECHA','DEPOSITO','USUARIO'],
            colModel:[
                {name:'fecha_pedido',index:'fecha_pedido',width:120, sorttype: 'date'},
                {name:'deposito',index:'deposito',width:500, editable:false},
                {name:'usuario_id',index:'usuario_id',width:150, editable: false}
            ],
            rowNum:10,
            rowList:[10,20,40],
            pager: '#paginacion',
            gridview:true,
            rownumbers:true,
            ignoreCase:true,
            sortname: 'fecha_pedido',
            viewrecords: true,
            sortorder: "asc",
            caption:"Pedidos",
            height: "100%",
            subGrid : true,
            subGridUrl: '../Controladores/cPedidos.php?action=lad',
            subGridModel: [{ name  : ['Codigo','Cantidad','Articulo','Estado','Categoria','Observaciones'], 
                width : [50,50,450,60,60,150] }], 
            editurl: '../Controladores/cPedidos.php?action=editar',
            ondblClickRow: function(id, ri, ci) {
                // edit the row and save it on press "enter" key
                grid.jqGrid('editRow',id,true,null,null, 'clientArray');
            },
            onSelectRow: function(id) {
                if (id && id !== lastSel) {
                    // cancel editing of the previous selected row if it was in editing state.
                    // jqGrid hold intern savedRow array inside of jqGrid object,
                    // so it is safe to call restoreRow method with any id parameter
                    // if jqGrid not in editing state
                    if (typeof lastSel !== "undefined") {
                        grid.jqGrid('restoreRow',lastSel);
                    }
                    lastSel = id;
                }
            }
        }).jqGrid('navGrid','#pager',{add:false,edit:false},{},{},myDelOptions,{multipleSearch:true,overlay:false});
        //grid.jqGrid('filterToolbar',{defaultSearch:'cn',stringResult:true});
        $("#filtro").change(function(){
            var valor = $("#filtro").val();
            $("#tablapedidos").jqGrid().setGridParam({url:'../Controladores/cPedidos.php?action=lpd&filtro='+valor}).trigger('reloadGrid');
        }); 
```

问题是没有加载任何内容，使用萤火虫我得到该网址的帖子被中止。

如果我直接在浏览器 (ff) 上输入 url，我会收到“连接已重置”错误，Chrome：“错误 324 (net::ERR_EMPTY_RESPONSE)”。如果我在开发人员电脑的本地主机上执行此操作，我将获得 XML 文件，url 页面使用 echo 创建 XML 文件，示例（不完整）

```
function getArticulosPendientes() {
if ( stristr($_SERVER["HTTP_ACCEPT"],"application/xhtml+xml") ) {
header("Content-type: application/xhtml+xml;charset=utf-8"); } else {
header("Content-type: text/xml;charset=utf-8");
}
$et = ">";
echo "<?xml version='1.0' encoding='utf-8'?$et\n";
echo "<rows>";

$lista = getListaArticulosPendientes($_POST);
$resultado = array();

for($i = 0; $i < count($lista); $i++) {
    $fila = $lista[$i];
    $dif = diferenciaCompradoPedido($fila['item_id']);
    if($dif > 0) {
        $fila['cantidad'] = $dif;
        array_push($resultado, $fila);
    }
    else {
        array_push($resultado, $fila);
    }
}

for($a = 0; $a < count($resultado); $a++) {
    $row = $resultado[$a];
    $fecha = date("d/m/Y H:i", strtotime($row["fecha_pedido"]));
    echo "<row id='". $row["item_id"]."'>";
    echo "<cell>". $fecha."</cell>";
    echo "<cell>". $row["cantidad"]."</cell>";
    echo "<cell><![CDATA[". utf8_encode($row["descripcion"])."]]></cell>";
    echo "<cell><![CDATA[". $row["categoria"]."]]></cell>";
    echo "<cell><![CDATA[". $row["usuario_id"]."]]></cell>";
    echo "<cell><![CDATA[". $row["estado"]."]]></cell>";
    echo "<cell><![CDATA[". $row["observaciones"]."]]></cell>";
    echo "</row>";
}
echo "</rows>"; 
```

}

有任何想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:06:17.457

您正在使用相对路径。将路径更改为绝对路径，例如：[http ://www.yourdomain.com/folder/path/to/Controladores/cPedidos.php?action=lpd](http://www.yourdomain.com/folder/path/to/Controladores/cPedidos.php?action=lpd)

# c# - Windows Server 2008 上的 UserPrincipal GetGroups 非常慢

> ID：15615646
> 
> 赞同：7
> 
> 时间：2013-03-25T13:02:52.443
> 
> 标签：c#, active-directory

我有一种在 Windows 2008 AD 上获取用户组的方法。

```
using (var domainContext = new PrincipalContext(ContextType.Domain, domain, login, pwd))
{
    using (var foundUser = UserPrincipal.FindByIdentity(domainContext, IdentityType.SamAccountName, samAccountName))
    {
        if (foundUser != null)
        {
            var grs = foundUser.GetGroups(domainContext);
            ....
        }
    }
} 
```

该批次在 Windows Server 2003 和 XP 上运行良好，但我在 Windows Server 2008 上的响应非常慢，这行：

```
foundUser.GetGroups(domainContext); 
```

*   Windows Server 2003 和 XP：调用需要 100 毫秒
*   Windows Server 2008：调用需要 2500 毫秒

你能帮我解决这个问题吗？

非常感谢

# php - 已安装 PDO 驱动程序，但 php 测试说不是

> ID：15615654
> 
> 赞同：0
> 
> 时间：2013-03-25T13:03:28.757
> 
> 标签：php, pdo

我试图在 windows 下使用 php 5.4.13 + apache 2 使用 dbo 执行简单的 dbcon 测试，但是当我尝试它时（使用下面的代码）它返回“找不到驱动程序”

```
<?php
   try {
        $dbh = new PDO("pgsql:host=localhost;dbname=dbtst", "tstu", "tstp");
        echo 'Connected to database!!';
    } catch (PDOException $ex) {
        echo $ex->getMessage();
        }
?> 
```

所以，我检查了一下`phpinfo();`，我发现它安装正确：

```
PHP Version 5.4.13

PDO
PDO support enabled
PDO drivers     pgsql

pdo_pgsql
PDO Driver for PostgreSQL   enabled
PostgreSQL(libpq) Version   9.2.3
Module version  1.0.2
Revision    $Id$ 
```

我可能会错过什么？

# java - JComboBox addActionListener 不起作用

> ID：15615657
> 
> 赞同：-4
> 
> 时间：2013-03-25T13:03:41.570
> 
> 标签：java, swing, actionlistener, jcombobox, java-7

所以我有[这个](https://compilr.com/IDE/preview.php?projectId=203141)项目，

源代码在[这里](https://compilr.com/aghotbi/booking/Project.java)。

当您运行项目并转到处理时，`jcombobox`假设有一个 addActionListener。

```
p_customer_list = new JComboBox<>(customers_name);
    pp_customer_list.setPreferredSize(new Dimension(360, 35)); 
    panel_processing_header.add(pp_customer_list);
    //pp_customer_list.addActionListener(this);
    pp_customer_list.addActionListener (new ActionListener () {
        public void actionPerformed(ActionEvent e) {
            JComboBox tmpBox = (JComboBox) e.getSource();
            int selected = tmpBox.getSelectedIndex();
            pp_refresh_data(selected);
        }
    }); 
```

这就是我到目前为止所拥有的，它假设在组合框的值发生变化时找到选定的索引并将其传递给`pp_refresh_data()`但由于某种原因它没有运行（我尝试放置一个`JOptionPane`以查看代码何时执行，并且它唯一程序运行时执行一次。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:03:52.077

仅从部分代码片段很难分辨，但您有 2 个组合，一个名为“p_customer_list”，另一个名为“pp_customer_list”？

这可能是你的问题。您可能将侦听器添加到错误的组合中，或者您可能将错误的组合添加到面板中，或者您不需要两个，或者...

同样，仅凭一个片段很难分辨。

# ipad - iPad 方向问题

> ID：15615660
> 
> 赞同：0
> 
> 时间：2013-03-25T13:03:46.570
> 
> 标签：ipad, landscape, retina-display

我开发了一个仅限 iPhone 的应用程序，现在我正在使它成为通用的。在 iPhone 上它将以纵向运行，而在 iPad 上我想强制它以横向运行。

我面临一个奇怪的问题，因为我为 iPad 版本创建的所有控制器似乎都是纵向的。我有一个主控制器，然后我通常会创建更多控制器并将它们的视图添加到主控制器的视图中。后一种视图是使用适合纵向而不是横向的框架创建的。所有这些控制器都实现了`-shouldAutorotateToInterfaceOrientation:`和`-preferredInterfaceOrientationForPresentation`方法来强制横向模式。可能这还不够。

此外，我最大的问题是我最近尝试创建翻转视图动画：

```
[UIView transitionFromView:self.view
                    toView:about.view
                  duration:1
                   options:UIViewAnimationOptionTransitionFlipFromBottom
                completion:^(BOOL finished){
                }]; 
```

当我调用此方法时，新视图将出现在屏幕上，但显然它已旋转。![可视化问题](../Images/935623f5a68487e81f4a62e932772165.png)

橙色条应该出现在视图的顶部，并且应该占据所有可见空间。似乎它处于横向模式，但添加到主视图时旋转错误。

你能给我提示来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T23:44:50.140

显然，要让 iPad 上的工作正常，您*必须*使用 a`UINavigationController`作为主窗口的根视图控制器。否则你会遇到这样的问题。事实上，将导航控制器设置为根控制器已经完全解决了我在处理旋转时的所有问题。

# regex - 正则表达式位置字符串

> ID：15615668
> 
> 赞同：1
> 
> 时间：2013-03-25T13:03:58.823
> 
> 标签：regex, string

例如我有这个字符串。

```
$string = 'test***bas'; 
```

如何使用正则表达式在星星之前显示文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:07:43.590

以下模式

```
^(.+?)\*\*\* 
```

将使用括号运算符创建组匹配。请参阅[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)以测试您的正则表达式（在线测试有多种方法）

您在正则表达式周围使用的语言将具有不同的捕获组的方式，因此您需要更好地解释您使用的语言以获得任何进一步的建议。

**asterix 之前和之后的示例**

```
^(.+?)\*\*\*(.+)$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:08:12.227

您可以使用利用[Capture Groups](http://www.regular-expressions.info/named.html)的正则表达式。一旦您匹配了输入，您就可以访问捕获的组并打印输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:19:19.953

如果您还想要位于 *** 之后的内容，则可以使用以下命令：

```
$string = 'test***bas';
$pattern = '/(.+)\*{3}(.+)/';
preg_match($pattern, $string, $matches); 
```

$matches 将包含结果：

$matches[1] 将是“测试”
$matches[2] 将是“bas”

# javascript - 我无法操作/选择通过 Ajax 调用加载的 div？

> ID：15615673
> 
> 赞同：0
> 
> 时间：2013-03-25T13:04:12.837
> 
> 标签：javascript, jquery, ajax

我有一个简单的应用程序，我决定使用 ajax 来加载关卡为了简单/不管什么原因（也许要学一点）。

但我被困住了...

```
$.ajax({
    url: "actions.php",
    get: "GET",
    data: "show_level=" + 1,
    cache: false,
    success: function (views){
        $(".slides_container").append(views);
    }
}); 
```

问题是，附加到我的容器的视图不再可选择，基本上我已经停止工作的所有 jquery 函数一起工作。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:09:00.917

如果您正在使用绑定，例如`$(".target-element").click(function(){ do something here});`它们仅在绑定发生时对 DOM 中已经存在的元素有效。

你需要使用`$("#element-already-in-dom").on("click", ".target-element", function(){do something here});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:10:25.233

你是非事件冒泡的受害者。

当您将事件绑定到元素时，您通常会在窗口加载时执行此操作。如果在窗口加载后将元素添加到 DOM，则事件不会绑定到它，尽管它满足事件处理程序规定的所有其他条件。

相反，您必须使用委托，这意味着事件绑定到页面上不变的元素，然后冒泡到正确的元素。

```
$('.appended-view').click(function(event) { ... } 
```

不管用

```
$('body').on('click', '.appended-view', function(event) { ... } 
```

将工作

# jquery - 如何在 JQuery 中更改 Layout 的值？

> ID：15615675
> 
> 赞同：0
> 
> 时间：2013-03-25T13:04:15.647
> 
> 标签：jquery, asp.net-mvc, razor

我创建了一个模态弹出窗口，您将[在此处](https://stackoverflow.com/questions/15544471/how-to-create-a-modal-popup-to-login-when-the-user-is-not-authenticated)看到。我的问题是当用户正常连接时我需要布局，但当我使用相同的登录名显示模式弹出窗口时不需要。所以我想做一些类似的东西：

```
$("@Layout").setValue(null); 
```

我想知道这是否可能。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:13:12.917

如果要从视图中删除布局，

把它放在你的视野之上

```
@{
    Layout = null;
} 
```

更好的方法是在弹出窗口中使用局部视图。

# c# - 将 Flowdocument 转换为 XML 和 XML 转换为 Flowdocument

> ID：15615676
> 
> 赞同：2
> 
> 时间：2013-03-25T13:04:17.040
> 
> 标签：c#, wpf, xml, converter, flowdocument

我使用[此处](https://stackoverflow.com/questions/15547738/save-the-color-of-a-text-in-a-database-and-copy-text-with-color-into-a-richtextb)的代码（来自 Wiimax 的答案）将我的转换`FlowDocument`为`XML`并将其转换回`FlowDocument`. 但现在我这里有一些问题。

我的转换代码：

```
public static bool IsFlowDocument(this string xamlString)
        {
            if (xamlString == null || xamlString == "")
                throw new ArgumentNullException();

            if (xamlString.StartsWith("<") && xamlString.EndsWith(">"))
            {
                XmlDocument xml = new XmlDocument();
                try
                {
                    xml.LoadXml(string.Format("<Root>{0}</Root>", xamlString));
                    return true;
                }
                catch (XmlException)
                {
                    return false;
                }
            }
            return false;
        }

        public static FlowDocument toFlowDocument(this string xamlString)
        {
            if (IsFlowDocument(xamlString))
            {
                var stringReader = new StringReader(xamlString);
                var xmlReader = System.Xml.XmlReader.Create(stringReader);

                return XamlReader.Load(xmlReader) as FlowDocument;
            }
            else
            {
                Paragraph myParagraph = new Paragraph();
                myParagraph.Inlines.Add(new Run(xamlString));
                FlowDocument myFlowDocument = new FlowDocument();
                myFlowDocument.Blocks.Add(myParagraph);

                return myFlowDocument;
            }
        } 
```

我输入此代码（例如，它不是我在程序中使用的代码）：

![我的代码](../Images/e4ef79d534584fca37dca53cdd854c1e.png)

转换后我得到这个代码：

![我的代码](../Images/6440b2bdc49384c5717c045dbc47a4c4.png)

您会看到跳过了一些空白。在命名空间之后添加了一个 { } 我查看了转换后的 XML 字符串，没有跳过空白，但是 { } 是他们的

有人知道如何解决这个问题或看到我的失败吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T12:34:30.493

*大括号：*

这是因为 Binding-Syntax 和 WPF（Xamlreader 和 XamlWriter）想要帮助你；）。

当你的 XAML-Code 类似于

```
<Run Text="{" /> 
```

Xaml-Engine 首先假定一个绑定。由于没有并且取决于您创建 FlowDocument 的方式，因此**“{”**被转义为**“{}{”**

一种解决方法是，您将大括号放在这样的位置：

```
<Run>{</Run> 
```

另一种解决方法是避免花括号是第一个字符：

```
<Run Text=" {" /> 
```

*空格：* 有一个属性可以派上用场：

```
<Run xml:space="preserve">some                   Space</Run> 
```

这不是 Xaml，而是由 Xaml 引擎处理的 XML 属性。

# c++ - spidermonkey 1.8.5 在调试模式下崩溃

> ID：15615677
> 
> 赞同：0
> 
> 时间：2013-03-25T13:04:18.607
> 
> 标签：c++, c, spidermonkey

我在我的应用程序中使用 Spidermonkey 1.8.5。当我使用调试 JS 库时，我的应用程序崩溃了。我正在使用以下选项构建库：--enable-debug --disable-optimize --enable-threadsafe

crash 指向这里：断言失败：(cx)->thread->data.requestDepth || (cx)->thread == (cx)->runtime->gcThread，位于 ../../src/jsapi.cpp

这是示例程序

```
/* Include the JSAPI header file to get access to SpiderMonkey. */
#include "jsapi.h"

/* The class of the global object. */
static JSClass global_class = {
    "global", JSCLASS_GLOBAL_FLAGS,
    JS_PropertyStub, JS_PropertyStub, JS_PropertyStub, JS_StrictPropertyStub,
    JS_EnumerateStub, JS_ResolveStub, JS_ConvertStub, JS_FinalizeStub,
    JSCLASS_NO_OPTIONAL_MEMBERS
};

/* The error reporter callback. */
void reportError(JSContext *cx, const char *message, JSErrorReport *report)
{
    fprintf(stderr, "%s:%u:%s\n",
            report->filename ? report->filename : "<no filename=\"filename\">",
            (unsigned int) report->lineno,
            message);
}

int main(int argc, const char *argv[])
{
    /* JSAPI variables. */
    JSRuntime *rt;
    JSContext *cx;
    JSObject  *global;
    printf("Started\n");
    /* Create a JS runtime. You always need at least one runtime per process. */
    rt = JS_NewRuntime(8 * 1024 * 1024);

    if (rt == NULL)
        return 1;

    /*
     * Create a context. You always need a context per thread.
     * Note that this program is not multi-threaded.
     */
    cx = JS_NewContext(rt, 8192);
    if (cx == NULL)
        return 1;

    JS_SetErrorReporter(cx, reportError);

    /*
     * Create the global object in a new compartment.
     * You always need a global object per context.
     */
    global = JS_NewCompartmentAndGlobalObject(cx, &global_class, NULL);
    if (global == NULL)
        return 1;

    /*
     * Populate the global object with the standard JavaScript
     * function and object classes, such as Object, Array, Date.
     */
    if (!JS_InitStandardClasses(cx, global))
        return 1;

    /* Your application code here. This may include JSAPI calls
     * to create your own custom JavaScript objects and to run scripts.
     *
     * The following example code creates a literal JavaScript script,
     * evaluates it, and prints the result to stdout.
     *
     * Errors are conventionally saved in a JSBool variable named ok.
     */
    char *script = "'Hello ' + 'World!'";
    jsval rval;
    JSString *str;
    JSBool ok;
    const char *filename = "noname";
    uintN lineno = 0;

    ok = JS_EvaluateScript(cx, global, script, strlen(script),
                           filename, lineno, &rval);
    if (rval == NULL | rval == JS_FALSE)
        return 1;

    str = JS_ValueToString(cx, rval);
    printf("%s\n", JS_EncodeString(cx, str));

    /* End of your application code */

    /* Clean things up and shut down SpiderMonkey. */
    JS_DestroyContext(cx);
    JS_DestroyRuntime(rt);
    JS_ShutDown();
    return 0;
} 
```

如果我在发布模式下构建程序可以正常工作。此问题仅与调试模式有关。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:58:52.377

`JS_BeginRequest(cx);`在通话之前插入`JS_NewCompartmentAndGlobalObject`。

`JS_EndRequest(cx);`在调用 之前插入`JS_DestroyContext`。

大多数 JSAPI 函数都需要请求。（我不知道为什么。线程的最初原因与多线程有关，但现在每个 JSRuntime 都是单线程的。）

SpiderMonkey 的调试版本包括以发布模式无法检查 API 使用情况的断言。因此，您可能会再次看到仅调试断言。我强烈建议针对调试构建进行开发，因为这些断言几乎总是表明真正的问题。

下一个 SpiderMonkey 版本即将发布：[https ://bugzilla.mozilla.org/show_bug.cgi?id=735599#c54](https://bugzilla.mozilla.org/show_bug.cgi?id=735599#c54)

# python - 查找具有连续字符的最长子字符串，其中字符串可能混乱

> ID：15615683
> 
> 赞同：0
> 
> 时间：2013-03-25T13:04:37.980
> 
> 标签：python, string, algorithm

给定一个字符串，找到最长的子字符串，其字符是连续的（即它们是连续的字母）但可能是混乱的（即无序的）。例如：
输入：`"owadcbjkl"`
输出：`"adcb"`
我们认为`adcb`它是连续的`abcd`。

（这是一个面试问题。）

我有一个使用 2 个条件运行 while 循环的想法，一个使用 Python 检查连续字符`ord`，另一个条件是找到最小值和最大值，并检查以下所有字符是否都在此范围内。

有没有什么办法可以用低运行时间复杂度来解决这个问题？我能做到的最好是 O(N^2) 其中 N 是输入字符串的长度，并且`ord()`似乎是一个缓慢的操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T07:39:24.207

如果子字符串定义为`''.join(sorted(substr)) in alphabet`then：

*   子字符串中没有重复项，因此最长子字符串的大小小于（或等于）字母表的大小

*   `(ord(max(substr)) - ord(min(substr)) + 1) == len(substr)`, 其中 `ord()`返回字母表中的位置（+/- 常量）（内置 `ord()`可用于小写 ascii 字母）

这是`O(n*m*m)`-time, `O(m)`-space 解决方案，其中`n`is`len(input_string)`和`m`is `len(alphabet)`：

```
from itertools import count

def longest_substr(input_string):
    maxsubstr = input_string[0:0] # empty slice (to accept subclasses of str)
    for start in range(len(input_string)): # O(n)
        for end in count(start + len(maxsubstr) + 1): # O(m)
            substr = input_string[start:end] # O(m)
            if len(set(substr)) != (end - start): # found duplicates or EOS
                break
            if (ord(max(substr)) - ord(min(substr)) + 1) == len(substr):
                maxsubstr = substr
    return maxsubstr 
```

例子：

```
print(longest_substr("owadcbjkl"))
# -> adcb 
```

# actionscript-3 - 不使用sql查询过滤数据

> ID：15615686
> 
> 赞同：1
> 
> 时间：2013-03-25T13:04:48.543
> 
> 标签：actionscript-3, flex4

我正在开发一个基于 flex-4 的大型企业级数据分析软件。我通常需要根据用户选择过滤数据网格，这需要在我的数据库上运行查询。我想知道是否有任何方法可以在没有 sql 查询的情况下过滤网格数据？这将花费很少的时间，这会导致我现在延迟 2-3 分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:11:00.040

如果您使用的是 ArrayCollection（或 ICollectionView 的其他实现），请查看 ICollectionView.filterFunction[属性](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ListCollectionView.html#filterFunction)。您可以在用户交互后将其设置为您需要的内容并调用 ICollectionView.refresh() - 然后所有关联的网格应自动显示过滤后的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:11:47.623

在 ActionScript 中有很多方法可以做到这一点。但是，既然您使用 Flex，那么我们就依赖于框架。您正在寻找的功能`filterFunction`（请参阅[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ListCollectionView.html#filterFunction)）：

给定一个数据对象，例如`{name:"Jo", type:"employee"}`，您可以过滤员工：

```
myArrayCollection.filterFunction = function(data:Object):Boolean {
   return data.type == "employee";
}
myArrayCollection.refresh(); 
```

然后应相应地更新您的数据网格。

当然，根据列表中存在的项目数量，这可能会在眨眼间运行或非常缓慢 =)

# in-app-purchase - 将订阅作为应用内购买添加到 Windows Phone 应用

> ID：15615697
> 
> 赞同：0
> 
> 时间：2013-03-25T13:05:23.407
> 
> 标签：in-app-purchase, windows-phone

据我了解，Windows Phone 现在允许应用内购买。我想授权我的用户在我的应用程序中注册三个订阅级别之一。但是，我不明白如何启用这种类型的场景。我看到了添加“应用内产品”的选项。但是，就我而言，我不确定以下几点：

*   我是提供一种产品还是三种单独的产品（每个订阅级别一个）。
*   我不明白“产品标识符”是订阅的标识符还是我的应用程序的标识符？如果是前者，我不应该在这里扔一个 GUID 吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:22:12.920

可能值得看一下[MSDN 上的概述](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206949%28v=vs.105%29.aspx)- 您的产品标识符是您通过开发仪表板（作为个人）提交的标识符 - 它也是您的应用可以枚举以查看可用产品列表的标识符，以及您用于购买的产品 ID。

据我所知，你不能拥有（例如）*每月*10 英镑的产品——当然你可以做一些事情，比如在定价结构上捆绑捆绑，在你的应用程序中交换一些东西，也许 5 英镑换 5 英镑音乐下载，10 英镑 9 英镑等，而不是“每月 10 英镑无限”（虽然很难给出一个通用的例子）

# javascript - 碰撞检测不影响 Box2d Javascript

> ID：15615700
> 
> 赞同：3
> 
> 时间：2013-03-25T13:05:30.673
> 
> 标签：javascript, box2d, collision

我正在创建一个赛车游戏，我需要通过 Box2d Javascript 在一些粗糙的表面区域上获得帮助。

1.  我通过以下链接创建了汽车游戏 [http://www.codekites.com/make-racing-car-box2d-javascript/](http://www.codekites.com/make-racing-car-box2d-javascript/)
2.  也制造了障碍。

**问题：**

1.  现在我想要这样的障碍物，它不应该与汽车碰撞。但是当 Car 越过那个形状时，Car 就会变慢。

所以请帮助我，如何去做。我找到了 IsSensor，但这不起作用。所以请让我知道，如何去做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:49:49.603

Aahhhh ...终于从stackoverflow本身获得了解决方案。这里是。

[如何在box2d中检测碰撞但不碰撞？](https://stackoverflow.com/questions/11062252/how-to-detect-collision-but-do-not-collide-in-box2d)

我使用了错误的关键字。它是

```
fixturedef.isSensor = true; 
```

就是这样；）为了检测碰撞，我们必须像这样编写监听器

```
 world.SetContactListener(listener);
 var listener = new Box2D.Dynamics.b2ContactListener;
 listener.BeginContact = function(contact) {
    // console.log(contact.GetFixtureA().GetBody().GetUserData());
    div = document.getElementById("textUI");
    div.innerHTML = "Come "+contact.GetFixtureA().GetBody();
    defaultCarSpeed = defaultCarSpeed/2;
}

listener.EndContact = function(contact) {
    // console.log(contact.GetFixtureA().GetBody().GetUserData());
    div = document.getElementById("textUI");
    div.innerHTML = "Go "+contact.GetFixtureA().GetBody();
    defaultCarSpeed = defaultCarSpeed*2;
} 
```

# c++ - 将 C++ 中的增量值放入 Excel

> ID：15615702
> 
> 赞同：0
> 
> 时间：2013-03-25T13:05:50.533
> 
> 标签：c++, excel

我试图把我从这个增量中获得的答案；

```
for(int i=0; i<=n; i++)
  {
  Xnew = -i*(Y+R1)/n; //calculation for angles and output displayed to user

  Ynew = pow((((Y+R1)*(Y+R1)) - (Xnew*Xnew)), 0.5);

  cout<<"\n("<<Xnew<<", "<<Ynew<<")"<<endl;

  AngleB = acos(Xnew/pow((pow(Xnew, 2))+(pow(Ynew, 2)), 0.5))*(180/Pi);

  cout<<"\nAngle 'B' = "<<AngleB1<<" Degrees"<<endl;

  AngleV = acos(((pow(Xnew, 2))+(pow(Ynew, 2))+(pow(100, 2))-(pow(65, 2)))/(200*(pow(((pow(Xnew, 2))+(pow(Ynew, 2))), 0.5))))* (180/Pi);

  cout<<"Angle 'V' = "<<AngleV<<" Degrees"<<endl;
  AngleTheta1 = AngleB - AngleV;

  cout<<"Theta 1 = "<<AngleTheta1<<" Degrees"<<endl;

  AngleTheta2 =(asin(pow(((sin(AngleV*Pi/180))*(pow(((pow(Xnew, 2))+(pow(Ynew, 2))), 0.5))/65), 0.5)))*(180/Pi);

  cout<<"Theta 2 = "<<AngleTheta2<<" Degrees"<<endl;

  } 
```

现在，根据用户为“n”选择的值，将出现一个包含“n”个值的列表。EG 所以如果 n = 2，我将得到 2 个坐标（Xnew，Ynew）和 4 个不同的角度。

现在，我们在将这些值输入 Excel 时遇到了麻烦，其中会出现一个带有标题的值表。我们尝试用 CSV 编写。格式，但我们只成功地让 Excel 在每一列中显示一个值，而不是我们想要的值列表（当 n>1 时）。

我们的项目的研究生助手为我们提供了这段代码，但仍然没有真正帮助。

```
// writing on a text file
   #include <iostream>
   #include <fstream>
   using namespace std;

   int main () {
   ofstream myfile ("h:\\test\\files\\example.txt");
   if (myfile.is_open())
   {
       myfile << "This is a line.\n";
       myfile << "This is another line.\n";
       myfile.close();
   }
   else cout << "Unable to open file";
   return 0;
   } 
```

那么，是否有人对如何将我们的计算值放到 Excel 中，以我上面指定的格式显示有任何建议？再次感谢，希望问题足够清楚。

这里大致是我们之前尝试过的代码（尽管我们确实删除了它，所以可能并不完美）当我们得到损坏的单个值时。

在 int main(){

```
 std::ofstream file_out("Test.csv"); 
```

并在底部（在所有代码下方）

```
 file_out << "x, x2, x3" << std:endl;
 file_out << x << ", " << x2 << ", " << x3 << std::endl; 
```

但是x、x2、x3都是上面指定的值（即AngleB、Xnew等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:18:06.573

您将需要一个值表而不是一个列表才能使其工作

删除所有 cout 实例并替换为以下内容。

```
cout<<AngleB1<<" "<<AngleV<<" "<<AngleTheta1<<" "AngleTheta2<<" "<<endl; 
```

您可以在循环运行之前将标题列表写入文件

# android - 为什么说构造函数未定义？

> ID：15615703
> 
> 赞同：0
> 
> 时间：2013-03-25T13:05:50.983
> 
> 标签：android, sqlite

我正在为我的小组项目制作一个 android 应用程序并收到以下错误：

`The constructor GradesDataSource(AddGradesFragment) is undefined`

这是包含错误的代码：

```
package com.petroc.nationaldiploma;

import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

import com.actionbarsherlock.app.SherlockFragment;

public class AddGradesFragment extends SherlockFragment {

private GradesDataSource datasource;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    datasource = new GradesDataSource(this);

    Spinner spinner;

    View view = inflater.inflate(R.layout.fragment_add_grades, container,
            false);

    spinner = (Spinner) view.findViewById(R.id.spinner);
    List<String> list = new ArrayList<String>();
    list.add("Pass");
    list.add("Merit");
    list.add("Distinction");
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(
            getActivity(), android.R.layout.simple_spinner_item, list);
    dataAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(dataAdapter);

    spinner = (Spinner) view.findViewById(R.id.spinner);
    spinner.setOnItemSelectedListener(new CustomOnItemSelectedListener());
    // EditText editText = (EditText)
    // view.findViewById(R.id.editModuleText1);

    return view;
}
} 
```

这是 GradesDataSource 类：

```
package com.petroc.nationaldiploma;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class GradesDataSource {

// Database fields
private SQLiteDatabase database;
private MySQLiteHelper dbHelper;
private String[] allColumns = { MySQLiteHelper.COLUMN_ID, 
        MySQLiteHelper.COLUMN_GRADE, MySQLiteHelper.COLUMN_MODULE };

public GradesDataSource(Context context) {
    dbHelper = new MySQLiteHelper(context);
}

public void open() throws SQLException {
    database = dbHelper.getWritableDatabase();
}

public void close() {
    dbHelper.close();
}

public Grade createGrade(String grade, String module) {
    ContentValues values = new ContentValues();
    values.put(MySQLiteHelper.COLUMN_GRADE, grade);
    values.put(MySQLiteHelper.COLUMN_MODULE, module);
    long insertId = database.insert(MySQLiteHelper.TABLE_GRADES, null, 
            values);
    Cursor cursor = database.query(MySQLiteHelper.TABLE_GRADES, 
            allColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
            null, null, null);
    cursor.moveToFirst();
    Grade newGrade = cursorToGrade(cursor);
    cursor.close();
    return newGrade;
}

public void deleteGrade(Grade grade) {
    long id = grade.getId();
    System.out.println("Grade deleted with id: " + id);
    database.delete(MySQLiteHelper.TABLE_GRADES, MySQLiteHelper.COLUMN_ID
            + " = " + id, null);
}

public List<Grade> getAllGrades() {
    List<Grade> grades = new ArrayList<Grade>();

    Cursor cursor = database.query(MySQLiteHelper.TABLE_GRADES, 
            allColumns, null, null, null, null, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Grade grade = cursorToGrade(cursor);
        grades.add(grade);
          cursor.moveToNext();
    }
    // Make sure to close the cursor
    cursor.close();
    return grades;
}

private Grade cursorToGrade(Cursor cursor) {
    Grade grade = new Grade();
    grade.setId(cursor.getLong(0));
    grade.setGrade(cursor.getString(1));
    return grade;
}

  } 
```

为什么我会收到此错误？我使用了本教程：[http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

生成的应用程序运行良好，我现在将此代码添加到我的小组项目的应用程序中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:07:15.240

更改此行：

```
 datasource = new GradesDataSource(this); 
```

至

```
 datasource = new GradesDataSource(getActivity()); 
```

您正在传递对没有构造函数的 Fragment 的引用。您想要传递通过该`getActivity()`方法获得的 Host Activity 的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:08:21.747

代替

```
datasource = new GradesDataSource(this); 
```

你应该使用

```
datasource = new GradesDataSource(getActivity()); 
```

# linux - 在scons中，如何指定目标的路径？

> ID：15615705
> 
> 赞同：0
> 
> 时间：2013-03-25T13:05:58.237
> 
> 标签：linux, scons

我是新来的。我试图指定目标的路径。我不希望在 SConstruct 文件所在的同一文件夹中生成可执行文件。

我尝试了以下方法：（假设 SConstruct 文件位于某个文件夹“Foo”中）

```
env.Program(
    #executable name
    target="~/Desktop/my_executable", 
     ... 
```

但是，这**会创建**目录`Foo/~/Desktop/`并将目标`my_executable`放置到叶目录中。

如何让 scons 在某个固定文件夹中生成目标？我正在使用Linux。

# objective-c - NSUserScriptTask 困难

> ID：15615712
> 
> 赞同：7
> 
> 时间：2013-03-25T13:06:29.673
> 
> 标签：objective-c, cocoa, nstask, appstore-sandbox

我一直在尝试使用最近的 NSUserScriptTask 类及其子类来解决（参见[this](https://stackoverflow.com/questions/15599493/nsuserscripttask-cancelling-tasks)和[this ），到目前为止，我已经解决了一些问题，但还有一些问题有待解决。](https://stackoverflow.com/questions/15603062/nsuserscripttask-accepted-file-types)从[文档](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSUserScriptTask_Class/Reference/Reference.html)中可以看出，NSUserScriptTask 不允许取消任务。因此，我决定创建一个简单的可执行文件，它将脚本路径作为参数并运行脚本。这样，我可以使用 NSTask 从我的主应用程序启动帮助程序，并`[task terminate]`在必要时调用。但是，我要求：

*   从它启动的助手接收输出和错误的主应用程序
*   助手仅在 NSUserScriptTask 完成时终止

主应用程序的代码很简单：只需使用正确的信息启动一个 NSTask。这是我现在所拥有的（为了简单起见，我忽略了安全范围书签等的代码，这些都没有问题。但不要忘记这是运行沙盒）：

```
// Create task
task = [NSTask new];
[task setLaunchPath: [[NSBundle mainBundle] pathForResource: @"ScriptHelper" ofType: @""]];
[task setArguments: [NSArray arrayWithObjects: scriptPath, nil]];

// Create error pipe
NSPipe* errorPipe = [NSPipe new];
[task setStandardError: errorPipe];

// Create output pipe
NSPipe* outputPipe = [NSPipe new];
[task setStandardOutput: outputPipe];

// Set termination handler
[task setTerminationHandler: ^(NSTask* task){        
    // Save output
    NSFileHandle* outFile = [outputPipe fileHandleForReading];
    NSString* output = [[NSString alloc] initWithData: [outFile readDataToEndOfFile] encoding: NSUTF8StringEncoding];

    if ([output length]) {
        [output writeToFile: outputPath atomically: NO encoding: NSUTF8StringEncoding error: nil];
    }

    // Log errors
    NSFileHandle* errFile = [errorPipe fileHandleForReading];
    NSString* error = [[NSString alloc] initWithData: [errFile readDataToEndOfFile] encoding: NSUTF8StringEncoding];

    if ([error length]) {
        [error writeToFile: errorPath atomically: NO encoding: NSUTF8StringEncoding error: nil];
    }

    // Do some other stuff after the script finished running <-- IMPORTANT!
}];

// Start task
[task launch]; 
```

请记住，我需要终止处理程序仅在以下情况下运行：（a）任务被取消（b）任务因脚本完成运行而自行终止。

现在，在助手方面，事情开始变得棘手，至少对我来说是这样。为了简单起见，让我们假设脚本是一个 AppleScript 文件（所以我使用 NSUserAppleScriptTask 子类 - 在现实世界中，我必须适应这三种类型的任务）。这是我到目前为止得到的：

```
int main(int argc, const char * argv[])
{
    @autoreleasepool {
        NSString* filePath = [NSString stringWithUTF8String: argv[1]];
        __block BOOL done = NO;

        NSError* error;
        NSUserAppleScriptTask* task = [[NSUserAppleScriptTask alloc] initWithURL: [NSURL fileURLWithPath: filePath] error: &error];

        NSLog(@"Task: %@", task); // Prints: "Task: <NSUserAppleScriptTask: 0x1043001f0>" Everything OK

        if (error) {
            NSLog(@"Error creating task: %@", error); // This is not printed
            return 0;
        }

        NSLog(@"Starting task");

        [task executeWithAppleEvent: nil completionHandler: ^(NSAppleEventDescriptor *result, NSError *error) {
            NSLog(@"Finished task");

            if (error) {
                NSLog(@"Error running task: %@", error);
            }

            done = YES;
        }];

        // Wait until (done == YES). How??
    }

    return 0;
} 
```

现在，我有三个问题（这是我想通过这个 SO 条目提出的问题）。**首先**，“已完成的任务”永远不会被打印出来（块永远不会被调用），因为任务甚至永远不会开始执行。相反，我在控制台上得到了这个：

```
MessageTracer: msgtracer_vlog_with_keys:377: odd number of keys (domain: com.apple.automation.nsuserscripttask_run, last key: com.apple.message.signature) 
```

我尝试从主应用程序运行完全相同的代码，并且它毫不费力地完成（但从主应用程序我失去了取消脚本的能力）。

**其次**，我只想在`return 0;`调用完成处理程序后到达 main() 的末尾。但我不知道该怎么做。

**第三**，每当助手出现错误或输出时，我想将该错误/输出发送回应用程序，应用程序将通过 errorPipe/outputPipe 接收它们。类似的东西`fprintf(stderr/stdout, "string")`可以解决问题，但我不确定这是否是正确的方法。

因此，简而言之，感谢有关第一个和第二个问题的任何帮助。第三个我只是想确保我应该这样做。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T23:11:58.963

问题一：子任务没有运行，因为它的父任务立即退出。（关于“奇数个键”的日志消息是 中的一个错误`NSUserScriptTask`，发生是因为您的助手没有捆绑标识符，但在其他方面无害且与您的问题无关。）它立即退出，因为它没有等待完成阻止火灾，这使我们...

问题2：如何等待异步完成块？这已在其他地方得到解答，包括[等待多个网络请求全部执行 - 包括它们的完成块](https://stackoverflow.com/questions/10643797/wait-until-multiple-operations-executed-including-completion-block-afnetworki)，但回顾一下，使用调度组，如下所示：

```
dispatch_group_t g = dispatch_group_create();
dispatch_group_enter(g);
[task executeWithAppleEvent:nil completionHandler:^(NSAppleEventDescriptor *result, NSError *e) {
    ...
    dispatch_group_leave(g);
}];
dispatch_group_wait(g, DISPATCH_TIME_FOREVER);
dispatch_release(g); 
```

同样的模式适用于任何具有您想要等待的完成块的调用。如果您希望在组完成时收到另一个通知，而不是等待它，请使用`dispatch_group_notify`代替`dispatch_group_wait`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T17:57:05.800

作为旁注，您`error`在分配 后进行测试的方式`NSUserAppleScriptTask`不正确。*当且仅当*函数结果为 nil（或 NO，或任何指示失败）时，才`error`定义的值。如果函数成功（你知道它是否返回非 nil），那么可能是任何东西——函数可能将它设置为 nil，它可能让它未定义，它甚至可能用一个真实的对象填充它。（另请参阅[(NSError**) 错误的意义何在？](https://stackoverflow.com/questions/2067563/whats-the-point-of-nserrorerror)）*`error`*

# php - JS：如何添加，然后扣除增值税并返回完全相同的原始价值？

> ID：15615714
> 
> 赞同：-1
> 
> 时间：2013-03-25T13:06:34.267
> 
> 标签：php, javascript, math, accounting

我允许用户以 NET 或 Gross 的形式将产品价格输入库存。如果他们以总价格输入价格，则在存储之前为他们计算 NET，并使用以下代码：

```
var vatrate = 12;
IsuppGross = parseInt(suppGross * 100); // makes it an integer

// calc net
var revVR = parseFloat('1.'+vatrate);
Net = ( ( IsuppGross / revVR) / 100 ).toFixed(2); 
```

我努力让它发挥作用，但不确定这是否是问题所在。

如果我输入“100.00”作为总数字并且我的增值税率为 12%，它返回`Net`为“112.00”，所以它似乎正在工作。

所以我输入了一个总价为 100.00 美元的产品，净价计算为“89.29 美元”（我假设这是正确的）。

为上述 10 个项目创建发票时，发票底部如下所示：

```
Net Subtotal $892.90
VAT $107.15
Grand Total $1000.05 
```

我期待的是：

```
Net Subtotal $892.90
VAT $107.10
Grand Total $1000.00 
```

...特别是因为，当仅出售上述其中一种时，会导致：

```
Net Subtotal $89.29
VAT $10.71
Grand Total $100.00 
```

......这是预期的。因此，可以合理地假设购买 10 件相同物品的成本恰好是其十倍。

这是我用来将增值税添加到净小计的公式：

数量 x 净价 x 0.12 (10 x 89.29 x 0.12) = 107.148

然后将上述四舍五入为 107.15，将其添加到净小计为 1000.05。

当我重新添加增值税时，我需要什么公式才能达到 1000？

**总结/澄清** 这个公式...数量 x 净价 x 0.12 (10 x 89.29 x 0.12)

给我`107.148`，但我认为我需要它给我的是`107.10`。

那么我可以使用什么javascript函数来实现这一点（或者我需要如何调整我的公式/将其转换为代码）？

**更新** @jakub 我认为是在正确的轨道上。我找到了一种简单的方法来测试它，方法是：

```
alert( (892.90 * 0.12).toFixed(2) );  // should equal 107.10 
```

（仍然等于 107.15）

以上内容基于 Jakub 的输入，如下所示。请注意，我在这里没有单独乘以 10，因为我注意到我们正在小计级别工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:17:19.733

一种方法是将舍入放在不同的地方

```
round(quantity * price) != quantity * round(price) 
```

增值税也是如此，将结果四舍五入与将一种产品的增值税四舍五入然后乘以数量略有不同。另外，您知道，该数量必须是整数，而不是浮点数（*如果不是，则情况不同*），因此四舍五入后的乘法不应*产生*更多小数位。

我希望这会有所帮助。

好的，回复您的编辑：

你有

```
(quantity * price * VAT).toFixed(2) = (10 * 89.29 * 0.12).toFixed(2) = (107.148).toFixed(2) = 107.15 
```

你应该有

```
quantity * (price * VAT).toFixed(2) = 10 * (89.29 * 0.12).toFixed(2) = 10 * (10.7148).toFixed(2) = 10 * 10.71 = 107.10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:32:14.563

我认为我的说法是正确的，法律立场是开具发票的增值税金额必须是开具发票的商品和服务的正确百分比，因此不应将含增值税的项目价格相加。

我使用的一个系统显示每行的增值税修改了最后一行的增值税金额以消除舍入错误。除非您以 5 位小数显示价格（假设您的增值税税率为 3 位有效数字），否则它们将始终存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:41:35.140

基本上这个问题的原因是计算机无法使用浮点数表示大多数以 10 为底的实数，因为计算机使用以 2 为底的数字。

检查此线程： [为什么不使用 Double 或 Float 来表示货币？](https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency)

所以第一步是始终使用整数作为货币，在这种情况下以美分而不是美元来衡量，我想。

# hibernate - 使用hibernate和struts添加/删除多对一映射对象的最佳解决方案是什么

> ID：15615715
> 
> 赞同：0
> 
> 时间：2013-03-25T13:06:34.690
> 
> 标签：hibernate, jakarta-ee, struts2, hibernate-mapping, hibernate-annotations

票务等级：

```
@Entity
@Table(name="tickets")
public class Ticket implements Serializable {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "id")
private Long id;

@Column(name="requester_name")
private String requesterName;

@ManyToOne
private BusinessPurpose business_purpose;

@ManyToOne
private Park park;

@Column(name="no_of_tickets")
private Integer noOfTickets;

@ManyToOne
private Status status; 

@ManyToOne
private User user; 
```

这是 jsp 的一部分，我允许用户输入新票的详细信息。此 jsp 通过其中定义了所有字段的 ticketDTO 对象获取其数据。

```
function submitRegistration()
{
    var bpl = document.getElementById("bpl");
    document.forms['ticketRequestForm'].businessPurpose.value = bpl.options[bpl.selectedIndex].text;
    document.forms['ticketRequestForm'].park.value = document.forms['ticketRequestForm'].parkName.options[document.forms['ticketRequestForm'].parkName.selectedIndex].text;
    document.forms['ticketRequestForm'].stateName.value = document.forms['ticketRequestForm'].stateId.options[document.forms['ticketRequestForm'].stateId.selectedIndex].text;
    document.forms['ticketRequestForm'].countryName.value = document.forms['ticketRequestForm'].countryId.options[document.forms['ticketRequestForm'].countryId.selectedIndex].text;

    return isValid();
}

<s:form id="ticketRequestForm" method="post"
            action="submitTicket" theme="simple"
            onsubmit="return submitRegistration();">
            <s:hidden name="businessPurpose" />
            <s:hidden name="park" />

                    <td id="formtxt" width="20%">Requestor's Name</td>
                    <td valign="middle">
                        <p class="form">
                            <s:textfield name="requesterName">
                            </s:textfield>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td id="formtxt" width="15%">Business Purpose</td>
                    <td valign="middle">
                        <p class="form">
                            <s:select id="bpl" list="businessPurposeList"
                                name="businessPurposeId" listKey="id"
                                listValue="businessPurposeName" onchange="businessList();"></s:select>
                        </p>
                    </td>
                </tr>

                    <td id="formtxt" width="15%">Which Park</td>
                    <td valign="middle">
                        <p class="form">
                            <s:select list="parkList" name="parkId" listKey="id"
                                listValue="name"></s:select>
                        </p>
                    </td>
                </tr>
            </table>
        </s:form> 
```

PS：这是一个工作 jsp 的精简版本。请注意一些丢失的标签，因为我试图保持帖子简短。我的主要关注点是由对象内部的对象填充的列表。

**现在我的第一个问题是-我可以以某种方式使用一个jsp进行保存和编辑操作吗？**我可以在一个工单对象下获得完整的详细信息。

但是现在我已经实现了另一个jsp进行编辑。此 jsp 文件通过在操作类中填充的票证对象获取其值。

```
function submitRegistration()
{
    var bpl = document.getElementById("bpl");
    document.forms['ticketRequestForm'].businessPurpose.value = bpl.options[bpl.selectedIndex].text;
    document.forms['ticketRequestForm'].park.value = document.forms['ticketRequestForm'].parkName.options[document.forms['ticketRequestForm'].parkName.selectedIndex].text;
    document.forms['ticketRequestForm'].stateName.value = document.forms['ticketRequestForm'].stateId.options[document.forms['ticketRequestForm'].stateId.selectedIndex].text;
    document.forms['ticketRequestForm'].countryName.value = document.forms['ticketRequestForm'].countryId.options[document.forms['ticketRequestForm'].countryId.selectedIndex].text;

    return isValid();
}

<s:form id="ticketRequestForm" method="post"
            action="editTicket" theme="simple"
            onsubmit="return submitRegistration();">
            <s:hidden name="businessPurpose" />
            <s:hidden name="park" />
            <s:hidden name="stateName" />
            <s:hidden name="countryName" />

                <tr>
                    <td id="formtxt" width="20%">Requestor's Name</td>
                    <td valign="middle">
                        <p class="form">
                            <s:textfield name="%{ticket.requesterName}" value="%{ticket.requesterName}">
                            </s:textfield>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td id="formtxt" width="15%">Business Purpose</td>
                    <td valign="middle">
                        <p class="form">
                            <s:select id="bpl" list="businessPurposeList"
                                name="%{ticket.businessPurpose.businessPurposeId}" listKey="id"
                                listValue="%{ticket.businessPurpose.businessPurposeName}" onchange="businessList();"></s:select>
                        </p>
                    </td>

                    <td id="formtxt">Country</td>
                    <td valign="middle">
                        <p class="form">
                            <s:select list="countriesList" name="ticket.country.countryId" listKey="id"
                                listValue="ticket.country.countryName"></s:select>
                        </p>
                        <p class="yellowLg">All fields are required.</p>
                        <p>
                            <s:submit name="Submit" title="Submit"></s:submit>
                        </p>

            </table>
        </s:form> 
```

**问题：**我的问题是我无法在编辑页面中显示列表，这些列表实际上是我的主要对象中的对象。我希望这里的多对一关系对您来说很清楚。就像 BusinessPurpose 是通过休眠映射到表的 pojo 一样，Ticket 类将此对象映射为多对一。**Park**和**Status**也是如此。我想要做的是获取所有公园和状态的列表并将其显示在 struts 标记中，然后获取要编辑的值。但是在编辑页面中，整个列表都填充了以前的值。如何在操作类中取回具有编辑/新值的票证对象？

如果您无法理解，请指出哪一部分不清楚。我将尝试详细说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:46:32.273

关于你的第一个问题

```
Now my first question here is - can i somehow use one jsp for both save 
and edit operations ?? I can get the complete details under one ticket object. 
```

您最好使用不同的 JSP 来执行这两个任务。

```
My problem is that i am unable to display the lists inside the edit page which 
are actually objects inside my main object. 
```

您能否将 JSP 代码粘贴到您尝试访问主对象内的对象的位置。

# javascript - 如何在 Ubuntu 上为 JavaScript 平台安装 Eclipse IDE

> ID：15615716
> 
> 赞同：0
> 
> 时间：2013-03-25T13:06:35.973
> 
> 标签：javascript, eclipse, ubuntu

我安装了 Eclipse，`sudo apt-get install eclipse`但似乎它不支持 JavaSript 文件编辑。链接[http://www.eclipse.org/downloads/packages/eclipse-ide-javascript-web-developers/heliosr](http://www.eclipse.org/downloads/packages/eclipse-ide-javascript-web-developers/heliosr)为 JavaScript Eclispe 平台提供二进制文件，但我不知道如何在我的 Ubuntu 12.04 上安装它。我是 Ubuntu 的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:17:47.727

您可以通过 Eclipse 市场客户端安装它吗？

我只浏览了这个视频，但它看起来至少有基本的权利： [http ://www.youtube.com/watch?v=bfp5FOJtack](http://www.youtube.com/watch?v=bfp5FOJtack)

# ios - 如何确保只有一个操作响应用户输入而运行？

> ID：15615719
> 
> 赞同：2
> 
> 时间：2013-03-25T13:06:39.893
> 
> 标签：ios, cocoa-touch

假设一个应用程序有两个按钮，每个按钮都会启动一个动画（例如，推送或其他标准 segue 或自定义动画）。如果用户“同时”按下两个按钮，你如何阻止两个动画同时发生？好吧，首先我尝试：

```
[[viewController view] setUserInteractionEnabled:NO]; 
```

但这并不能解决问题。（也许`userInteractionEnabled`不会立即级联到子视图？）

然后我尝试了：

```
[[UIApplication sharedApplication] beginIgnoringInteractionEvents]; 
```

这确实解决了这个问题，*除非*你一个接一个地快速按下两个按钮*（*基本上用两个手指同时按下两个按钮），那么你会同时发生两个动画，这会导致我的应用出现问题。也许在我要运行的代码被调用之前，这两个事件都已经触发了`-beginIgnoringInteractionEvents`？

立即停止任何其他点击事件的可靠方法是什么？或者清除已经开始的那些。我的整个应用程序都有这个问题 - 按下两个按钮（或点击表格单元格等）很快就会触发两个事件并弄乱动画。

有任何想法吗？人们对 iOS 应用程序中的这个问题做了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:48:29.567

触摸处理在 iOS 中异步完成，以确保设备响应。这意味着处理程序可能在运行之前排队，这就是您的调用`beginIgnoringInteractionEvents`被忽略的原因。

最简单的解决方案是简单地创建一个全局变量以使交互独占您自己。

```
@interface UIApplicaiton(AnimationsInProgress)

- (BOOL)isAnimationInProgress;
- (void)setAnimationInProgress:(BOOL)value;

@end 
```

和实施：

```
@implementation UIApplication(AnimationsInProgress)
{
    BOOL _isAnimationInProgress;
}

- (BOOL)isAnimationInProgress {
    return _isAnimationInProgress;
}

- (void)setAnimationInProgress:(BOOL)value {
    _isAnimationInProgress = value;
} 
```

`beginIgnoringInteractionEvents`在动画动作的顶部几乎像您一样使用它：

```
if ([[UIApplication sharedApplication] isAnimationInProgress)
    return;
[[UIApplication sharedApplication] setAnimationInProgress:YES];

[UIView animate .... completion:^{
    [[UIApplication sharedApplication] setAnimationInProgress:NO];
}]; 
```

由于没有像触摸事件和 那样的竞争条件`beginIgnoringInteractionEvents`，这将适用于您的目的。

# xcode - 带有 Git 显示警告的新 Xcode 项目

> ID：15615723
> 
> 赞同：0
> 
> 时间：2013-03-25T13:06:55.510
> 
> 标签：xcode, git

我已经设置了一个新的测试项目来看看如何使用git，所以我在创建项目时检查了git。然后我按下了创建按钮并收到了一个奇怪的警告（附加）。

然后我打开了项目，所有文件都标有 A（他们不应该）作为 git![在此处输入图像描述](../Images/6f317944f45aa32c12d84f78ac6132fd.png)

应该在项目创建时提交它们。

知道如何为 git 配置用户吗？

我还尝试打开终端并用我的电子邮件从错误中写出一行。它没有用。

我使用 xcode 4.6.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:10:39.760

从终端执行以下两个命令应该确保您将来不会收到此错误：

```
git config --global user.email "IOS.DEV@mail.com"
git config --global user.name "IOS DEV" 
```

# qt - 如何仅在一个 cpp 文件中使用 QPainter？

> ID：15615726
> 
> 赞同：0
> 
> 时间：2013-03-25T13:07:10.180
> 
> 标签：qt, makefile, qwidget, qpainter

这是我的代码：

```
#include<QApplication>
#include<QWidget>
#include<QPaintEvent>
#include<QPainter>

int main(int argc,char**argv)
{
QApplication app(argc,argv);
QWidget*wid=new QWidget;
wid->setWindowTitle("sb");

QPainter paint;
paint.setWindow(0,0,900,900);
QRectF border(3*45-20,25,670,850);
QRectF inter(3*45,45,630,810);
paint.setPen(Qt::NoPen);
paint.setBrush(QBrush(Qt::darkMagenta,Qt::SolidPattern));
paint.drawRect(border);
paint.setBrush(QBrush(Qt::gray,Qt::SolidPattern));
paint.drawRect(inter);//
paint.setPen(QPen(Qt::darkGray,3,Qt::SolidLine,Qt::RoundCap,Qt::RoundJoin));
paint.setPen(Qt::NoPen);

paint.beginNativePainting();
wid->show();
return app.exec();
} 
```

在 qmake -project ,qmake ,make 之后，出错如下：

```
kl@kl-Latitude-D630:~/QTproj/t1$ ./t1 
QPainter::setWindow: Painter not active
QPainter::setPen: Painter not active
QPainter::setBrush: Painter not active
QPainter::drawRects: Painter not active
QPainter::setBrush: Painter not active
QPainter::drawRects: Painter not active
QPainter::setPen: Painter not active
QPainter::setPen: Painter not active
QPainter::beginNativePainting: Painter not active 
```

好吧~~如何仅在一个cpp文件中激活QPainter（我不想使用单独的文件，例如paint.h，paint.cpp和main.cpp。我知道如果我创建一个继承了QWidget，但我想尝试一下如何让它在一个文件中工作）？？非常感谢~;-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:43:28.110

我认为，错误在这里：

```
QPainter paint;
paint.setWindow(0,0,900,900); 
```

错误说，您只是在绘画之前没有激活 Painter，例如在打开文件之前尝试读取文件。你初始化了painter，但没有告诉他在哪里绘画。检查一些文档 - [http://harmattan-dev.nokia.com/docs/library/html/qt4/qpainter.html#QPainter](http://harmattan-dev.nokia.com/docs/library/html/qt4/qpainter.html#QPainter)

只需在该行`QPainter::begin ( QPaintDevice * device )`之后添加`QPainter paint;`或更改为`QPainter::QPainter ( QPaintDevice * device )`

例如 -`QPainter p(img);`在这种情况下，img 是 QImage*。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:05:56.977

您只能使用`QPainter`in`QWidget`的`paintEvent`功能。因此，编写一个继承`QWidget`并实现其`paintEvent`功能的新类。

# python - 如何在numpy中沿轴添加

> ID：15615744
> 
> 赞同：1
> 
> 时间：2013-03-25T13:07:53.540
> 
> 标签：python, numpy

我想在张量中添加一个矩阵。

这有效

```
numpy.zeros((4,4,4))+numpy.sum(numpy.ones((4,4,4)),axis=2) 
```

这行不通。

```
numpy.zeros((3,4,5))+numpy.sum(numpy.ones((3,4,5)),axis=2)
ValueError: operands could not be broadcast together with shapes (3,4,5) (3,4) 
```

如何让第二个例子工作？我想沿第三个轴添加。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:10:19.673

[播送](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)

```
numpy.zeros((3,4,5))+numpy.sum(numpy.ones((3,4,5)),axis=2)[...,None] 
```

# python - PyGTK - 显示 MessageDialog 并在特定时间后关闭它

> ID：15615745
> 
> 赞同：0
> 
> 时间：2013-03-25T13:07:53.663
> 
> 标签：python, gtk, messagedialog

我正在尝试创建一个内部没有按钮的新消息对话框。它将显示一些信息，并且在某些函数执行后以编程方式关闭它时遇到问题。我已经阅读了有关 run() 和 response() 函数并编写了一些代码：

```
def stop():
    md.response(0)

md = gtk.MessageDialog(None, gtk.DIALOG_MODAL | gtk.DIALOG_DESTROY_WITH_PARENT, gtk.MESSAGE_QUESTION, gtk.BUTTONS_NONE, "Wait... computing...")
print 'closing in 5 secs...'
threading.Timer(5.0, stop).start()
md.run()
md.destroy() 
```

问题是，stop() 在关闭主应用程序窗口后执行。即使上面的程序可以正常工作，它也不会做我想要的。在函数执行后关闭消息对话框的任何想法？

最好的问候， mopsiok

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:10:06.157

制作 gtk 应用程序是一项非常艰巨的工作。您通常会以死锁结束。

检查 gtk 的文档`gtk.timeout_add`。

# networking - 第 2 层上的组播

> ID：15615746
> 
> 赞同：1
> 
> 时间：2013-03-25T13:08:00.170
> 
> 标签：networking, network-programming, ip, multicast, ethernet

请原谅我在网络方面的有限知识。

我正在尝试将两个小程序设置为客户端和服务器，它们加入特定的多播组。服务器向组发送一些任意数据，客户端在侦听组时接收数据。

`UDP`这对于我已经完成的程序当然是可能的。但是我需要使用 MAC 地址而不是`IP`s。我对此有几个问题：

1.  是否可以为我的多播应用程序修复一系列 MAC 地址？据我了解，MAC 地址中第一个八位字节的最低有效位表示它是否是多播的。所以多播 MAC 应该是这样的`01:*:*:*:*:*`。所以我想，应该有一些方法可以使用广泛的 MAC 地址（除了那些保留的）。

2.  很多地方都写成`All multicast MAC addresses begin with: 0100.5e`。它总是真实的吗？AFAIK 这个前缀是固定在 MAC 地址中的，它为要在此处映射的其余 IP 地址位留出空间。但是，如果我的应用程序不关心 IP 地址并根据 MA​​C 地址侦听多播组（如果可能的话）怎么办？我不能保留第一个八位字节`01`并为我的多播寻址使用广泛的范围吗？

3.  如何仅基于 MAC 地址而不考虑 IP 将数据包发送到多播组并侦听多播组？即多播组地址是根据MAC 定义的。

我希望我的问题是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T11:15:59.987

如果您不使用 IP（或除此之外的 UDP），那么将 IP 地址映射到 mac 地址的默认方式可能对您没有附加价值。例如，这些映射在：

*   [http://en.wikipedia.org/wiki/IP_multicast#Layer_2_delivery](http://en.wikipedia.org/wiki/IP_multicast#Layer_2_delivery)
*   rfc1112 [https://www.rfc-editor.org/rfc/rfc1112](https://www.rfc-editor.org/rfc/rfc1112)第 6.4 段

如果您坚持使用 layer2 和多播，则发送带有第一个八位组集的 LSB 的帧可能就足够了（多播位，参考：[http://en.wikipedia.org/wiki/File:MAC-48_Address. svg](http://en.wikipedia.org/wiki/File:MAC-48_Address.svg)）。并将您自己的映射放在上面。但是你应该考虑到：

*   您可能需要强制您的 NIC 传递数据，通常 NIC 会过滤掉他们对硬件感兴趣的帧。这些过滤器通常在加入组时设置，例如在设置 ALLMULTI 标志时设置）。
*   中间可能有网络设备，一些伪智能交换机可能会拒绝转发数据，除非他们看到 IGMP 加入（ref igmp snooping）。
*   而且您的代码显然需要处理原始的第 2 层套接字来读取数据。

考虑到仅使用 UDP 的便利性，这可能需要做很多工作。

# javascript - 在 JavaScript 中拆分分隔字符串与 JSON 解析效率

> ID：15615748
> 
> 赞同：6
> 
> 时间：2013-03-25T13:08:03.587
> 
> 标签：javascript, json, performance, split, string-parsing

我需要通过 AJAX 检索大量数据（坐标加上额外的值）。数据格式为：

```
-72.781;;6,-68.811;;8 
```

请注意，使用了两个不同的分隔符：`;;`和`,`.

我应该只返回一个分隔字符串并使用`String.split()`（两次）还是返回一个 JSON 字符串并用于`JSON.parse()`解压缩我的数据更好？每种方法最差和最好的是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T13:10:30.753

即使数据真的很大，它们在现实世界中出现明显性能差异的可能性也很低（数据传输时间将胜过解码时间）。因此，除非出现现实世界的性能问题，否则最好从代码清晰的角度关注什么是最好的。

如果数据是同质的（您处理每个坐标的方式大致相同），那么该`String#split`方法没有任何问题。

如果您需要在代码中单独引用坐标，则会有一个参数来为它们分配正确的名称，这将建议使用 JSON。我倾向于清晰，所以我可能倾向于 JSON。

要考虑的另一件事是电线上的尺寸。如果您只需要支持良好的胖网络连接，那可能无关紧要，但因为每个对象都重复了 JSON 键，所以大小可能会明显更大。这可能会争论[压缩 JSON](https://stackoverflow.com/questions/4201647/what-is-compressed-json)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:29:36.407

我创建了一个描述您的问题的[性能测试。](http://jsperf.com/string-split-vs-json-parse)
虽然它取决于浏览器的实现，但在许多情况下——如结果所示——`split`会快得多，因为`JSON.parse`在后台做了很多其他事情，但你需要提供数据以便于解析：在测试中我已经添加了一个案例，您使用`split`(among `replace`) 来解析已经格式化的 json 数组，结果不言而喻。

总而言之，我不会使用快几毫秒但难以阅读和维护*n秒的脚本。*

# javascript - 如何使用 Javascript 写入 CouchDB？

> ID：15615750
> 
> 赞同：5
> 
> 时间：2013-03-25T13:08:12.903
> 
> 标签：javascript, jquery, rest, couchdb

我已经看到了[几个](https://stackoverflow.com/questions/6395338/how-do-you-post-data-to-couchdb-both-with-and-without-using-javascript)[这样](https://stackoverflow.com/questions/10570062/saving-json-object-in-couchdb-from-javascript)的问题，并阅读了我能[找到](http://wiki.apache.org/couchdb/Getting_started_with_JavaScript)的教程。不幸的是，他们都认为我对一些我实际上没有的知识有所了解，我什至不知道我不知道的关键词。

我有一个 HTML 页面，里面有一些 javascript。我可以将信息放在字符串或 javascript 对象中。现在，我如何将它发送到我的数据库？我如何指出我的数据库在哪里以及 javascript 如何授权给数据库以便它可以写入？

大多数教程只展示了 CouchDB 如何与 curl 一起工作，我还没有看到让网站与数据库交互的教程。这不就是 CouchDB 的本意吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T15:36:51.697

从 JavaScript（使用 jQuery）发送 REST 请求与使用 curl 执行的操作非常相似：

```
function create() {
  var o = {"name":"Bond"};
  $.ajax({
   type: "POST",
   url: "/myDB/",
   contentType: "application/json",
   data: JSON.stringify(o),
   dataType: "json",
   success: function(data) {
     alert(data.id + " created !");
   }
  });
} 
```

但请注意：如果请求不是从与 CouchDB 相同的服务中检索到的，则出于安全原因，该请求将被阻止。因此，将您的 HTML 页面作为设计文档的附件。

稍后您将学习如何在“节目”或“列表”中使用此类脚本。但是，让我们从简单的事情开始。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-22T14:15:28.210

仅仅因为我也很难找到一个明确的答案，这里是如何在 vanilla JS 中做到这一点：

```
const URL = "http://127.0.0.1:5984"

function createDB(dbName) {
    var req = new XMLHttpRequest();
    req.open("PUT", URL + "/" + dbName, true);
    req.setRequestHeader("Content-type", "application/json");

    req.send();
}

function updateDB(dbName, docName, data) {
    var req = new XMLHttpRequest();
    req.open("PUT", URL + '/' + dbName + '/' + docName, true);
    req.setRequestHeader("Content-type", "application/json");

    req.send(JSON.stringify(data));
} 
```

所以你会像这样使用它们：

```
createDB('baseball');
updateDB('baseball', 'document', {"pitcher":"Nolan Ryan"}); 
```

注意：我不打算在这里讨论修订号和冲突解决，只是提供一些非常基本的代码。第二次尝试更新同一记录时，除非您提供正确的修订号，否则将会发生冲突，仅供参考。

```
updateDB('baseball', 'document', {"_rev":"1-7e007b1ef348cba88396435479822386", "pitcher":"Roger Clemens"}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T13:12:51.517

结帐`jquery.couch.js`：[https ://github.com/daleharvey/jquery.couch.js-docs](https://github.com/daleharvey/jquery.couch.js-docs)

文档在这里：[http ://daleharvey.github.com/jquery.couch.js-docs/symbols/](http://daleharvey.github.com/jquery.couch.js-docs/symbols/)

# php - Zend 服务器配置问题

> ID：15615757
> 
> 赞同：0
> 
> 时间：2013-03-25T13:08:23.360
> 
> 标签：php, zend-framework, wamp, zend-server-installation

我对 Zend 非常熟悉，我已经在使用 Zend，但只是在创建新项目时复制 Zend 库，所以今天我安装了 Zend 服务器以使用命令行尝试所有这些。

我已经在 D 中安装了 WAMP：

我按照[http://framework.zend.com/manual/1.12/en/learning.quickstart.create-project.html上的说明进行操作](http://framework.zend.com/manual/1.12/en/learning.quickstart.create-project.html)

*   我在 C:, 中安装 Zend
*   在 D:, c 的其他地方使用 cmd 创建项目
*   配置的虚拟主机和主机文件。（我使用的是 Windows 7）。

所有文件和文件夹均已正确创建。但是**，当我尝试按照上述指南的“检查点”部分中的说明在浏览器中访问项目时，我看到列出了以前的 wamp 项目而不是“欢迎页面”**

我将 vhost 文件中的端口从 80 更改为 8080，并在主机文件中添加了 127.0.0.1:8080 地址，因为在安装 Zend 时，我将 Web 服务器端口指定为 8080。此外，我将 Zend 服务器接口端口指定为 10082。

谁能告诉我我是否遗漏了什么或哪里出错了？？？？？？
谢谢。

# android - 带有 Google API 的真正的 Android 2.3 设备上的空白 GoogleMap（Lv. 17）

> ID：15615759
> 
> 赞同：6
> 
> 时间：2013-03-25T13:08:34.263
> 
> 标签：android, google-maps, google-maps-android-api-2

## 问题描述，请先阅读此内容

我正在尝试获取我的简单应用程序，它将显示在从 Android 2.3 到 Android 4.0+ 设备的设备上运行的用户位置。**地图不会显示在真正的 Android 2.3 设备上。**

**该应用程序目前可以在 Android 4.0+ 设备上按照我的需要运行和显示地图，没有任何问题。**

因为它可以在Android 4.0+上毫无问题地显示地图，所以**我认为问题应该不是谷歌地图V2的设置或权限有什么问题。**

但是，当我在 Android 2.3 设备上尝试时，地图区域将是空白的，如下图所示：

![在此处输入图像描述](../Images/65485837aacf4a1e914f6c8c5296cd3d.png)

该应用程序使用 ActionBarSherlock、Google Maps API v2 和 SupportMapFragment。针对 SDK 17 构建，最低 SDK 10。

* * *

## 代码片段

我粘贴并修剪了代码以显示唯一相关的部分，如果您需要其他任何内容，请发表评论。

活动布局.xml

```
<fragment
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="@dimen/incident_padding_right" /> 
```

活动.java

```
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMarkerDragListener;
import com.google.android.gms.maps.SupportMapFragment;

public class Activity extends SherlockFragmentActivity{

private static GoogleMap map;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.activity_layout);

            ............

        //Set up map view
        map = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

            ............

        OnMarkerDragListener markerDragListener = new OnMarkerDragListener() {

            @Override
            public void onMarkerDragStart(Marker marker) {
                // Called when the marker drag is started

            }

            @Override
            public void onMarkerDragEnd(Marker marker) {
                // Called when the marker is dropped down.
                coords[0] = marker.getPosition().latitude;
                coords[1] = marker.getPosition().longitude;
                RestoreUIwithSavedLocation(coords);
                Log.d(TAG, "Pin Dropped at: " + coords[0] + ", " + coords[1]);
            }

            @Override
            public void onMarkerDrag(Marker marker) {

            }
        };

        map.setOnMarkerDragListener(markerDragListener);
} 
```

在真正的 Android 2.3 设备上运行时的 Logcat：

```
01-04 21:16:52.020: D/dalvikvm(19074): VFY: dead code 0x0014-0018 in Lcom/google/android/gms/common/GooglePlayServicesUtil;.b (Landroid/content/res/Resources;)Z
01-04 21:16:52.150: W/dalvikvm(19074): Unable to resolve superclass of Lmaps/p/s; (427)
01-04 21:16:52.150: W/dalvikvm(19074): Link of class 'Lmaps/p/s;' failed
01-04 21:16:52.150: W/dalvikvm(19074): Unable to resolve superclass of Lmaps/y/bo; (3820)
01-04 21:16:52.150: W/dalvikvm(19074): Link of class 'Lmaps/y/bo;' failed
01-04 21:16:52.150: W/dalvikvm(19074): Unable to resolve superclass of Lmaps/i/k; (4208)
01-04 21:16:52.150: W/dalvikvm(19074): Link of class 'Lmaps/i/k;' failed
01-04 21:16:52.150: E/dalvikvm(19074): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
01-04 21:16:52.150: W/dalvikvm(19074): VFY: unable to resolve new-instance 3540 (Lmaps/i/k;) in Lmaps/z/ag;
01-04 21:16:52.150: D/dalvikvm(19074): VFY: replacing opcode 0x22 at 0x006d
01-04 21:16:52.160: D/dalvikvm(19074): VFY: dead code 0x006f-007f in Lmaps/z/ag;.a (Landroid/view/LayoutInflater;Lcom/google/android/gms/maps/GoogleMapOptions;ZLjava/lang/String;)Lmaps/z/ag; 
```

使用 Google API Lv.10 在模拟器上运行时的 logcat

```
03-25 13:00:47.974: W/GooglePlayServicesUtil(751): Google Play services is missing.
03-25 13:00:47.992: W/GooglePlayServicesUtil(751): Google Play services is missing.
03-25 13:00:47.992: W/GooglePlayServicesUtil(751): Google Play services is missing.
03-25 13:00:48.002: W/GooglePlayServicesUtil(751): Google Play services is missing.
03-25 13:00:48.002: W/GooglePlayServicesUtil(751): Google Play services is missing.
03-25 13:00:48.022: W/GooglePlayServicesUtil(751): Google Play services is missing.
03-25 13:00:48.072: D/AndroidRuntime(751): Shutting down VM
03-25 13:00:48.072: W/dalvikvm(751): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-25 13:00:48.133: E/AndroidRuntime(751): FATAL EXCEPTION: main
03-25 13:00:48.133: E/AndroidRuntime(751): java.lang.RuntimeException: Unable to start activity ComponentInfo{Activity}: java.lang.NullPointerException
03-25 13:00:48.133: E/AndroidRuntime(751):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-25 13:00:48.133: E/AndroidRuntime(751):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-25 13:00:48.133: E/AndroidRuntime(751):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-25 13:00:48.133: E/AndroidRuntime(751):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-25 13:00:48.133: E/AndroidRuntime(751):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-25 13:00:48.133: E/AndroidRuntime(751):  at android.os.Looper.loop(Looper.java:130)
03-25 13:00:48.133: E/AndroidRuntime(751):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-25 13:00:48.133: E/AndroidRuntime(751):  at java.lang.reflect.Method.invokeNative(Native Method)
03-25 13:00:48.133: E/AndroidRuntime(751):  at java.lang.reflect.Method.invoke(Method.java:507)
03-25 13:00:48.133: E/AndroidRuntime(751):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-25 13:00:48.133: E/AndroidRuntime(751):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-25 13:00:48.133: E/AndroidRuntime(751):  at dalvik.system.NativeStart.main(Native Method)
03-25 13:00:48.133: E/AndroidRuntime(751): Caused by: java.lang.NullPointerException
03-25 13:00:48.133: E/AndroidRuntime(751):  at Activity.onCreate(Activity.java:250)
03-25 13:00:48.133: E/AndroidRuntime(751):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-25 13:00:48.133: E/AndroidRuntime(751):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-25 13:00:48.133: E/AndroidRuntime(751):  ... 11 more 
```

`Activity.onCreate(Activity.java:250)`指向这一行：

> map.setOnMarkerDragListener(markerDragListener);

## 我试过的

奇怪的是，如果我添加这一行

```
<uses-library android:name="com.google.android.maps" /> 
```

到`AndroidManifest.xml`，logcat 将不显示任何内容（没有错误没有警告），并且地图仍然是空白的。但是有人发帖说这条线解决了她/他的空白地图问题：[https ://stackoverflow.com/questions/15595357/android-supportmapfragment-google-play-services-issue](https://stackoverflow.com/questions/15595357/android-supportmapfragment-google-play-services-issue)

在我的项目`Android Dependencies`文件夹中，我有这些`*.jar`文件：

```
actionbar-sherlock-4.2-library.jar
google-play-services_lib.jar
android-support-v4.jar
actionbarsherlock-plugin-maps-4.2.0.jar
google-play-services.jar 
```

从[这篇文章](https://stackoverflow.com/a/15385769/763459)的回答中，**我知道谷歌地图可能无法在模拟器上运行良好。我所需要的只是让地图显示在我失败的真正的 Android 2.3 设备上。**

此外，我也密切关注这些帖子并尝试了他们的方法（如果适用于我的情况），但仍然对我的问题不满意：

[Google Map V2 安卓地图参考](https://stackoverflow.com/questions/15310637/google-map-v2-android-map-referencing)

[如何在 API 级别 10 中使用 Google Maps API v2？](https://stackoverflow.com/questions/14265959/how-to-use-google-maps-api-v2-with-api-level-10)

[Google MapFragment 为空白（白色），找不到类“maps.jk”](http://androiddev.orkitra.com/?p=2260)

[将 ActionBarSherlock 与新的 SupportMapFragment 一起使用](http://androiddev.orkitra.com/?p=1799)

如果您需要更多信息，请在下面发表评论，我会尝试添加它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T11:43:39.543

好的，经过数小时的思考和尝试，我想我可以将此问题标记为已修复。

该问题是由2.3 设备中的**错误日期和时间引起的。**

2.3 设备上的时间和日期由于长时间没电而被重置为 2013/01/01（正如您在日志输出中看到的，它显示 01/04 为日期）。这也可以解释为什么使用相同的代码运行时，Google Maps V2 没有出现在 2.3 设备上，但会出现在 4.0+ 设备上（因为我使用的 4.0+ 设备有正确的时间）。

我认为由于此设备与 Google 地图服务器之间的日期和时间存在巨大差异，它们之间的通信出现故障（不知道确切原因，但应该是一些时间戳的东西）。

当我手动将 2.3 设备的日期和时间设置为当前时间时，问题立即得到解决。

这个问题太奇怪了，注销只是显示如下：

> 找不到从方法 maps.z.ag.a 引用的类“maps.ik”

如此模棱两可，让我很难想到问题是由设备上错误的日期和时间引起的。

因此，下次如果您在使用 Google Maps API 时遇到问题，请按照以下步骤检查：

*   检查您设备的日期和时间设置是否与您当前的时区相对应（不幸的是，日志输出不会返回太多建设性信息来引导您考虑日期和时间）
*   检查您是否在 API 控制台中启用了正确的服务（启用`Google Maps API Android V2`not ，如果您在此步骤中做错了`Google Maps API V2`，日志将返回）`Authentication Failed`
*   检查您是否使用了正确的密钥库来获取 API 机密（日志会提示您说`Authentication Failed`
*   检查您是否包含了正确的库文件

感谢任何试图帮助我的人，我希望这个问题和解决方案可以帮助其他人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T06:12:28.977

将这两个权限添加到 AndroidManifest.xml 文件中：

```
<permission
 android:name="YOUR_PACKAGE_NAME.permission.MAPS_RECEIVE"
 android:protectionLevel="signature"/>
<uses-permission android:name="YOUR_PACKAGE_NAME.permission.MAPS_RECEIVE"
 android:protectionLevel="signature"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:49:40.380

这是常见的问题`google Map using Api v2`。主要原因`google play service`是如果`google play service`更新，则只会显示地图视图。如果您在设备中运行该应用程序可以解决问题。所以最好在设备中尝试它会为您工作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T06:17:14.167

好的。我认为下面的链接会对您有所帮助，因为它也让我也遇到了同样的问题。虽然我不确定你在 API 级别 4.0+ 版本中没有遇到任何问题

[google-maps-v2-shows-blank-screen-on-android-2-2](https://stackoverflow.com/questions/13768681/google-maps-v2-shows-blank-screen-on-android-2-2)

问题可能是因为`Debug.keystore`

**解决方案：**确保您使用与创建 SHA-1 代码以获取 API 密钥相同的密钥库来调试您的应用程序。

假设您正在使用 Ubantu 并以 root 身份打开您的 Eclipse，那么每当您构建应用程序时，eclipse 将使用 default.keystore 在内部的设备中运行您的应用程序，`root/.android/debug.keystore`因此当您创建 API 密钥时，您必须确保您正在使用与您构建应用程序相同的密钥库。

希望它会帮助你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T21:00:24.130

查看此相关问题：[Android 空白空间上的 Google 地图](https://stackoverflow.com/questions/15622866/google-maps-on-android-blank-space)

看起来从 v1 到 v2 的更改使得很难获得新的 API 密钥，并且在 v2 中，密钥存储在清单中。让我知道这个是否奏效。

# python - 使用 tkinter 延迟的 Python 建议

> ID：15615760
> 
> 赞同：0
> 
> 时间：2013-03-25T13:08:34.543
> 
> 标签：python, time, python-3.x, tkinter, gpio

我使用 tkinter 创建了 GUI，它将在 RaspberryPi 上运行并执行各种操作，例如点亮 LED。我遇到的问题是使用 root 来打开和关闭 LED。在调度之后，就像我使用 time.sleep() 一样，GUI 将在此睡眠时冻结。这是我的代码，下面我想用大约 500 毫秒的某种延迟替换 time.sleep()。

```
def toggleLED(root,period=0):
    if (period <15) and (Status is "On"):
            GPIO.output(11, True)
            time.sleep(0.5) #Needs to be replaced as causing GUI to freeze
            GPIO.output(11, False)
            root.after(1000, lambda: toggleLED(root, period)) #schedule task every 1 second while condition is true
    elif (Status == "Off"):
            print("Lights have been switched off")
    else:
            GPIO.output(11, True) 
```

谢谢

这是一种解决方案，但看起来很混乱：

```
def toggleLED(root,period=0):
    global Flash
    while (period <30) and (Status is "On"):
            if (Flash is True):
                    GPIO.output(11, False)
                    Flash = False
                    break
            elif (Flash is False):
                    GPIO.output(11, True)
                    Flash = True
                    break
            else:
                    break
    if (period <30) and (Status == "On"):
            period +=1
            print(period)
            root.after(500, lambda: toggleLED(root, period))
    elif (Status == "Off"):
           print("Lights have been switched off")
    else:
           GPIO.output(11, True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T22:09:16.897

问题的一部分是你的while循环——你不需要任何类型的循环，因为你有事件循环。

下面是一个每 500 毫秒切换标签 30 秒的示例：

```
import Tkinter as tk

class Example(tk.Frame):

    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)
        self._job_id = None

        self.led = tk.Label(self, width=1, borderwidth=2, relief="groove")
        self.start_button = tk.Button(self, text="start", command=self.start)
        self.stop_button = tk.Button(self, text="stop", command=self.stop)

        self.start_button.pack(side="top")
        self.stop_button.pack(side="top")
        self.led.pack(side="top")

    def stop(self):
        if self._job_id is not None:
            self.after_cancel(self._job_id)
            self._job_id = None
            self.led.configure(background="#ffffff")

    def start(self):
        self._job_id = self.after(500, lambda: self.toggle(60))

    def toggle(self, counter):
        bg = self.led.cget("background")
        bg = "#ffffff" if bg == "#ff0000" else "#ff0000"
        self.led.configure(background=bg)
        if counter > 1:
            self._job_id = self.after(500, lambda: self.toggle(counter-1))

root = tk.Tk()
Example(root).pack(side="top", fill="both", expand=True)
root.mainloop() 
```

# sql - SQL JOIN 格式选项

> ID：15615761
> 
> 赞同：0
> 
> 时间：2013-03-25T13:08:41.743
> 
> 标签：sql, join

这只是一个关于 JOINS 及其不同编写方式的问题。我以前遇到过这两种方式很多次，但从来不明白为什么不同的人使用不同的布局，只是有些人更喜欢一种方式而不是另一种方式，还是一种方法是一种旧的做事方式，或者是一种格式比另一种格式有性能优势，还是仅仅取决于您使用的 SQL、Oracle、MSSQL、MySQL 等？

示例一：

```
SELECT 
m.name
, e.address
FROM member  m
, email e 
WHERE m.id = e.mid 
```

示例二：

```
SELECT
m.name
, e.address
FROM member m
INNER JOIN email e ON m.id = e.mid 
```

无需深入了解 LEFT/RIGHT 连接等的使用，因为我已经了解这些，只是对上面的示例以及人们认为最好使用的任何反馈感到好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:12:00.187

它们相同，但`JOIN`语法不同，因此您不会期望两种语法之间有任何性能差异。

第一个使用旧的 ANSI SQL-89`JOIN`语法，第二个使用 ANSI SQL-92`JOIN`语法。

但是，最好坚持第二个，有关更多信息，请参阅以下文章：

*   [**要改掉的坏习惯：使用老式的 JOIN。**](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)

*   [**要改掉的坏习惯：使用表别名，如 (a, b, c) 或 (t1, t2, t3)。**](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-table-aliases-like-a-b-c-or-t1-t2-t3)

*   [**SQL JOIN：USING、ON 或 WHERE 之间有区别吗？**](https://stackoverflow.com/questions/5654278/sql-join-is-there-a-difference-between-using-on-or-where/5654338#5654338).

# android - 倒数计时器文本视图

> ID：15615766
> 
> 赞同：0
> 
> 时间：2013-03-25T13:08:56.280
> 
> 标签：android, time, textview, countdowntimer, milliseconds

我创建了这个应用程序，现在我想使用文本视图来显示秒数，直到其他活动开始但我不知道如何，我在倒数计时器内创建了一个 txtview 但它从未显示

```
Event=new String(Edt.getText().toString());
final int time = Integer.parseInt(sec.getText().toString());

Intent myInt = new Intent(MainActivity.this,Receiver.class);

myInt.putExtra("key",Event);
endingIntent pendingIntent = PendingIntent.getActivity(MainActivity.this,2,myInt,PendingIntent.FLAG_CANCEL_CURRENT);
AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+(time*1000),pendingIntent);

new CountDownTimer(time*1000, 1000) {

    @Override
    public void onTick(long millisUntilFinished) {
    // TODO Auto-generated method stub
        txtV.setText("Activity starts"+millisUntilFinished/1000+"seconds"); // here is the txtV which isn't shown 
    }

    @Override
    public void onFinish() {
        // TODO Auto-generated method stub

    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:18:28.067

首先你需要通过调用[start 方法来启动你的计数器](http://developer.android.com/reference/android/os/CountDownTimer.html#start%28%29)

但要小心，您只能从创建此视图的线程更改视图。一种方法是[在视图上发布可运行](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)：

```
 CountDownTimer timer = new CountDownTimer(time*1000, 1000) {

        @Override
        public void onTick(long millisUntilFinished) {
            txtV.post(new Runnable() {
                @Override
                public void run() {
                            txtV.setText("Activity starts"+millisUntilFinished/1000+"seconds"); // here is the txtV which isn't shown 
                }
            });
        }

        @Override
        public void onFinish() {
            // TODO Auto-generated method stub

        }
    };
    timer.start(); 
```

# c# - 在多用户软件中监控登录

> ID：15615773
> 
> 赞同：0
> 
> 时间：2013-03-25T13:09:16.057
> 
> 标签：c#, sql, database

我们目前正在用 C# 开发一个实现审计跟踪的软件，但是当它被多用户使用时，我们无法知道哪个用户实现了更新/插入/删除。我的用户表如下所示：

```
create table Users(
    userID varchar(20) not null,
    userPass varchar(20) not null,
    userFName varchar(25) not null,
    userLName varchar(25) not null,
    userMName varchar(25) not null,
    secretAnswer varchar(40),
    userStatus int default 0,
    primary key(userID)
) 
```

userStatus检查用户是否登录，默认为0，表示未登录，登录后更新为1，表示当前为该软件的用户. 所以，要检查谁登录，我的代码是

```
select userID from Users where userStatus = 1 
```

然后所有用户的所有用户状态在他退出后将被重置为0，或者软件被关闭。但是这个逻辑只适用于个人用户。如何跟踪实现更新/插入/删除的用户？我正在使用 C#。我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:31:37.673

在您写入日志之前，您的代码中的 Dustine 您可以根据他们的登录跟踪正在调用代码的当前用户，您可以执行此操作，它将返回您需要确定代码中您想要的位置的当前用户放好它

```
var currentUser = System.Security.Principal.WindowsIdentity.GetCurrent().Name.Split(
    new [] {"\\"}, 
        StringSplitOptions.RemoveEmptyEntries)[1]; 
```

这是您可以看到的相同代码将字符串拆分`Domain`为`User`

```
var currentUser2 = System.Security.Principal.WindowsIdentity.GetCurrent().Name;
var SplitUser = currentUser2.Split(new string[] { "\\" }, StringSplitOptions.RemoveEmptyEntries);
var domain = SplitUser[0];
var domainUser = SplitUser[1]; 
```

# c++ - VxWorks with Eclipse - 缺少头文件

> ID：15615775
> 
> 赞同：1
> 
> 时间：2013-03-25T13:09:18.763
> 
> 标签：c++, c, cmake, eclipse-cdt, vxworks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:19:53.107

在 eclipse 中添加包含目录的路径是不够的。您也必须将其添加到*cmakelists*中。你可以使用`include_directories("[your path here]")`这样做。

# vba - VBA PowerPoint 复制/粘贴不一致

> ID：15615778
> 
> 赞同：1
> 
> 时间：2013-03-25T13:09:27.120
> 
> 标签：vba, clipboard, copy-paste, powerpoint

我编写了一个 VBA 脚本，它通过一个 PowerPoint (PRS_data) 搜索标题匹配，然后将幻灯片复制到新的 PowerPoint (PRS)。源上的幻灯片只是标题和图像。当某些幻灯片被复制时，图像要么没有被保留，要么我得到一个带有红色 X 的框。

我使用的是 PowerPoint 2007 SP3，所以红色 X 修补程序不是问题。

我也尝试添加 DoEvents 和 Sleep，但没有成功。

如果我让目标窗口在用户屏幕上最大化，它似乎可以工作，但如果它被最小化，我会得到零星的空白幻灯片。结果不一致。此外，我可以确认幻灯片*确实*被复制了，因为目标是一个空的演示文稿，并且它充满了只有正确标题的幻灯片。再次不一致的结果。

以前有人遇到过这个吗？？

**这是代码：**

```
For Each Sld In PRS_data.Slides
    If Sld.SlideIndex > 1 Then          
        If (Sld.Shapes.Title.TextFrame.TextRange.Text Like "*" & iDiv & " Division*") Then
            PRS_data.Slides.Range(Sld.SlideIndex).Cut
            PRS.Windows(1).Activate
            PRS.Slides.Paste
            DoEvents
        End If
    End If
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:40:05.200

您不能在剪切或复制后立即执行粘贴。系统上的其他程序正在对剪切做出反应，因此剪贴板尚不可用。几年前，您可能会从 PowerPoint 中收到“无法打开剪贴板”错误，但显然它只是默默地失败了。

请注意，如果这是一个最终用户应用程序，并且他们正在运行其他支持剪贴板的应用程序，或者正在使用远程桌面，那么这些用户会讨厌您的程序。提供剪贴板是为了方便用户，而不是开发人员。

也就是说，您可以通过在 CUT/COPY 命令之后立即添加 2 秒睡眠来完成这项工作。

# python - 如何在 wxpython 中设置动态创建的静态文本的标签？

> ID：15615782
> 
> 赞同：0
> 
> 时间：2013-03-25T13:09:34.123
> 
> 标签：python, wxpython

我正在学习 wx，但遇到了这样的问题：假设我创建了几个 StaticText 对象，然后我想在某些事件上更改它的标签。例子：

```
import wx

class MyFrame(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self, parent=parent)
        self.panel=wx.Panel(self)
        for i in range(5):
            self.button=wx.Button(self.panel, -1, label='b'+str(i), pos=(20,30*i))
            self.button.Bind(wx.EVT_BUTTON, self.on_button)
            self.label=wx.StaticText(self.panel, -1, label='label'+str(i), pos=(120,30*i), name='label'+str(i))

    def on_button(self, event):
        b=event.GetEventObject().GetLabel()
        if b.endswith('1'):
            self.label1.SetLabel('sss')

x=wx.App()
y=MyFrame(None).Show()
x.MainLoop() 
```

所以，如您所见，我想更改我之前创建的 self.label1 的标签，但由于错误而无法这样做：in on_button; AttributeError：“MyFrame”对象没有属性“label1”

我想我必须在创建对象时改变一些东西，但我不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:47:15.957

那么第一个问题是，在通过 for 循环的每次迭代中，您都会覆盖 self.button 和 self.label 实例。你永远不会创建一个名为“self.label1”的变量。有几种方法可以解决此问题。这是一种简单的方法：

```
import wx

class MyFrame(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self, parent=parent)
        self.panel=wx.Panel(self)
        for i in range(5):
            self.button=wx.Button(self.panel, -1, label='b'+str(i), pos=(20,30*i))
            self.button.Bind(wx.EVT_BUTTON, self.on_button)
            self.label=wx.StaticText(self.panel, -1, label='label'+str(i), pos=(120,30*i), name='label'+str(i))

    def on_button(self, event):
        b=event.GetEventObject().GetLabel()

        if b.endswith('1'):
            newLabel = "sss"
            self.resetLabel('1', newLabel)
        elif b.endswith('2'):
            self.resetLabel('2', "Number 2!")

    #----------------------------------------------------------------------
    def resetLabel(self, number, newLabel):
        """"""
        lbls = [widget for widget in self.panel.GetChildren() if isinstance(widget, wx.StaticText)]
        for lbl in lbls:
            if number in lbl.GetLabel():
                lbl.SetLabel(newLabel)
                break

x=wx.App()
y=MyFrame(None).Show()
x.MainLoop() 
```

您还可以使用 setattr 和 getattr 来动态创建 self.label(1-N) ，如下所示：

```
import wx

class MyFrame(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self, parent=parent)
        self.panel=wx.Panel(self)
        for i in range(5):
            setattr(self, "button%s" % i, 
                    wx.Button(self.panel, -1, label='b'+str(i), pos=(20,30*i))
                    )
            btn = getattr(self, "button%s" % i)
            btn.Bind(wx.EVT_BUTTON, self.on_button)
            setattr(self, "label%s" % i,
                    wx.StaticText(self.panel, -1, label='label'+str(i), pos=(120,30*i), name='label'+str(i))
                    )
        print

    def on_button(self, event):
        b=event.GetEventObject().GetLabel()

        if b.endswith('1'):
            self.label1.SetLabel("sss")
        elif b.endswith('2'):
            self.label2.SetLabel("Number 2!")

x=wx.App()
y=MyFrame(None).Show()
x.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:45:23.677

您可以使用 dict 将按钮映射到标签：

```
self.label[button] = label 
```

然后，给定一个与按钮关联的事件，您可以找到关联的标签：

```
 button = event.GetEventObject()
    label = self.label[button] 
```

* * *

```
import wx

class MyFrame(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self, parent=parent)
        self.panel = wx.Panel(self)
        self.label = {}
        for i in range(5):
            button = wx.Button(
                self.panel, -1, label='b' + str(i), pos=(20, 30 * i))
            button.Bind(wx.EVT_BUTTON, self.on_button)
            label = wx.StaticText(self.panel, -1, label='label' + str(
                i), pos=(120, 30 * i), name='label' + str(i))
            self.label[button] = label

    def on_button(self, event):
        button = event.GetEventObject()
        label = self.label[button]
        label.SetLabel('sss')

x = wx.App()
y = MyFrame(None).Show()
x.MainLoop() 
```

# php - 将哈希生成代码从 ASP 转换为 PHP

> ID：15615784
> 
> 赞同：0
> 
> 时间：2013-03-25T13:09:37.497
> 
> 标签：php, asp.net, converter

我在 ASP 中有这段代码：

```
Public Function ComputeCredentialHash(ByVal timestamp As DateTime, ByVal id As String, ByVal authKey As String) As String
    Dim sig As String = timestamp.ToUniversalTime().ToString("yyyy-MM-ddTHH:mm:ss.fffZ") & id & authKey
    Dim sigdata As Byte() = System.Text.Encoding.ASCII.GetBytes(sig)
    Dim md5 As System.Security.Cryptography.MD5 = New System.Security.Cryptography.MD5CryptoServiceProvider()
    Dim md5Hash As String = System.Convert.ToBase64String(md5.ComputeHash(sigdata))
    Return md5Hash
End Function 
```

我需要编写一个 PHP 函数来做同样的事情。到目前为止，我有：

```
function ComputeCredentialHash ($timestamp, $id, $authKey) {
    $sigData = mb_convert_encoding($timestamp.$id.$authKey, "ASCII", "auto");
    $md5 = md5($sigData);
    $md5Hash = base64_encode($md5);
    echo "ComputeCredentialHash => $md5Hash<br/>Sig Data => $sigData<br/>MD5 Sig => $md5<br/>";
    return $md5Hash;
} 
```

但这不起作用。我确定这是由于该`ASCII.GetBytes`功能，但我不确定如何转换它，因为我不确定它的作用。看起来它只是返回字节数，但这对我来说真的没有意义（为什么它会给你一些如此通用的东西来制作散列）。无论如何，如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:03:22.590

发现[这里](http://msdn.microsoft.com/en-us/library/system.security.cryptography.md5.aspx)说：“MD5 类的 ComputeHash 方法将哈希作为 16 字节的数组返回。请注意，某些 MD5 实现会生成 32 个字符的十六进制格式的哈希。” – PHP 的 md5() 执行后者，因此如果您想要与 ASP 代码生成的数据结构相同，您可能必须重新格式化其输出。

# workflow - CQ5 - 对话参与者选择器步骤未打开对话？

> ID：15615791
> 
> 赞同：0
> 
> 时间：2013-03-25T13:09:53.943
> 
> 标签：workflow, aem

我很想扩展工作流程并让用户有机会在自定义工作流程过程中选择“东西”。据我了解，使用 Dialog Participant Chooser 是一个工作流步骤实现，可用于打开 PopUps。

因此，为了测试功能，我分配了一个简单的对话框（本教程中实现的对话框[http://dev.day.com/docs/en/cq/5-5/workflows/wf-extending.html](http://dev.day.com/docs/en/cq/5-5/workflows/wf-extending.html)）对话参与者选择器，但没有任何反应。

我错过了什么？

*   EDIT#1：它确实打开了一个对话框，但是允许进一步进入下一个工作流程步骤的对话框......
*   编辑#2：显然对话参与者步骤根本不关心，如果设置了对话。
*   编辑#3：显然它只是从伙伴开始时不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T07:39:08.100

这是助手中的一个错误。Adobe 通过包共享提供了解决该问题的修补程序。

# java - Java conn.getHeaderField("Content-Range") 返回错误的大小

> ID：15615794
> 
> 赞同：1
> 
> 时间：2013-03-25T13:10:06.017
> 
> 标签：java, android, download

我正在下载一个文件，我首先需要文件的大小，然后分块下载文件。

但是当我使用**connection.getHeaderField("Content-Range")** 它返回**0-1048575/12927246**其中**/12927246**部分是文件的总大小但是当我下载实际文件时它的大小是返回的两倍值即 1292724*2=25854492。

任何人都可以解释我的原因或是否有任何其他方法可以获取要分块下载的文件大小？

我指的是下载代码： [下载代码](http://supportforums.blackberry.com/t5/tkb/articleprintpage/tkb-id/java_dev@tkb/article-id/299)

# c - IF 语句不能正常工作

> ID：15615798
> 
> 赞同：0
> 
> 时间：2013-03-25T13:10:14.610
> 
> 标签：c, if-statement

我决定制作一个播放井字游戏的程序，但我的 if 语句失败了。它使用我放在 else 下的任何内容。我已经盯着它看了两个小时，我就是找不到任何问题！这是代码：

```
#include <stdio.h>
#include <process.h>

int main()
{
char ans,ans2;
double a,b,c,d,e,f;
printf("Do you want to play? (y/n)\n"); //must make a loop
scanf ("%c",&ans);
if (ans == 'y')
{
    printf("Do you want to be first?\n");
    scanf ("%c",&ans2);
    if (ans2 == 'y')
    {
        printf("Make your choice.\n");
        printf(" 1 2 3\n");
        printf("a | | \n");
        printf(" - - -\n");
        printf("b | | \n");
        printf(" - - -\n");
        printf("c | | \n");
    }
    else if (ans2 == 'n')
    {
        printf("option under construction!\n"); //must write this situation
    }
    else
        printf("Invalid choice!\n");
}
else if (ans == 'n')
{
    printf("Goodbye!\n");
    system("pause");
}
else
    printf("Invalid choice!\n");

} 
```

请注意，程序还没有完成（显然）。

PS我昨天开始编程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:15:23.017

我想，问题是当你`scanf`用来读取一个字符时，它会读取那个字符，但你也输入了 e 换行符。然后下一个`scanf`调用将读取该换行符而不是预期的字符。

最简单的解决方案是告诉`scanf`跳过空格（如换行符）：

```
scanf(" %c", &ans); 
```

注意前面的空格`%c`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:16:21.643

正如约阿希姆所说，问题出在`scanf`第二个问题上。如前所述，恕我直言，它读取的是新行，而不是空格。

无论如何，我的标准灵魂将`fflush(stdin)`是`scanf ("%c",&ans2)`.

顺便说一句：为每个 if 和 else 语句使用花括号。它减少了在某处修改新行后的愚蠢错误，并增加了此处的可读性。我的第一个猜测是错误的嵌套大括号和案例..

**编辑**正如我通过评论了解到的：**不要**使用`fflush(stdin)`！它可能会起作用，但只是偶然，因为`fflush()`on`stdin`在 ANSI-C 中具有未定义的行为！

# java - 如何仅将 BigDecimal 的整数部分转换为十六进制字符串？

> ID：15615800
> 
> 赞同：2
> 
> 时间：2013-03-25T13:10:14.810
> 
> 标签：java, hex, bigdecimal

我有一些 BigDecimal 类型，例如 18446744073709551616，我想将其转换为十六进制值。我可以截断小数部分。

有没有办法做到这一点而不是手动做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T13:26:58.143

从您的示例来看，您应该使用`BigInteger`而不是`BigDecimal`. 这样你就可以使用

```
new BigInteger("18446744073709551616").toString(16) 
```

如果您无法更改原始对象的类型，请稍后在方法中将其转换为 BigInteger

```
new BigDecimal("18446744073709551616").toBigInteger().toString(16); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:33:51.277

考虑到将十进制值转换为十六进制需要一个指数。您可以使用 获取表示数值的十六进制字符串[`Formatter`](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)。

> %A : 结果被格式化为十六进制浮点数，带有效数和指数
> %X: 结果被格式化为十六进制整数

`%A`如果要转换十进制值，请使用转换：

```
System.out.println(String.format("%A", myBigDecimal)); 
```

奇怪的是，上面的代码对于 的 javadoc 是正确的`Formatter`，但是 javadocs 中似乎有一个相关的*9 年前的错误，**几周前*在 Java 8中已修复： [5035569：Formatter 中的 (fmt) 断言错误对于 BigDecimal 和 %a](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5035569)。您可以使用下面的模拟代码：

```
System.out.println(String.format("%A", myBigDecimal.doubleValue())); 
```

**编辑**
从您帖子中的价值来看，您并不真正关心小数部分。您可以`%X`在模式中使用转换并只提供`BigInteger`表示：

```
BigDecimal bd = new BigDecimal("18446744073709551616");
System.out.println(String.format("%X", bd.toBigInteger())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:15:21.940

理论上可以将 BigDecimal 表示为十六进制字符串，类似于 Double.toHexString

```
0x1.199999999999p+1 
```

但是 AFAIK 没有标准的方法来做到这一点，自定义实现并不容易

# git - 有没有办法关闭 git 冲突解决？

> ID：15615813
> 
> 赞同：6
> 
> 时间：2013-03-25T13:10:47.843
> 
> 标签：git

有没有办法在将文件输入三向合并工具之前完全关闭 git 解决冲突的尝试？

我的意思是那些行：

```
<<<<<<< Temporary merge branch 1
...
=======
...
>>>>>>> Temporary merge branch 2 
```

它在将它们输入到 kdiff3 之前添加它们并将更改分支到基本文件中，而后者则完全发疯了，显示出奇怪的冲突。

我想简单地保持基本版本不变。

到目前为止，我只找到了选项

```
merge.conflictstyle 
```

但似乎没有选择关闭这些线路。

除了编写一个可以去除线条的预处理器之外，还有其他方法吗？

**更新**

我会在这里解释我不喜欢什么。

问题是当 git 启动 kdiff3 时，基本版本包含如下行

```
X1
<<<<<<< Temporary merge branch 1
A
=======
B
>>>>>>> Temporary merge branch 2
X2 
```

本地版本包含：

```
X1
A
X2 
```

远程修订包含：

```
X1
B
X2 
```

where`X1`和`X2`是 3 个文件之间的一些常见代码行。

现在，kdiff3 在这里发出冲突信号。

如果我抓取文件，将它们复制到单独的文件夹并删除 and 之间的所有内容`<`，`>`kdiff3 会更好地合并文件，有时会自动合并。

从我在[http://www.gitguys.com/topics/merging-with-a-gui/](http://www.gitguys.com/topics/merging-with-a-gui/)看到的内容来看，看起来它实际上不应该显示 BASE 修订版中的行。但确实如此。我如何解决它？

**配置**

`git config -l`给出了这个：

```
core.symlinks=false
core.autocrlf=false
color.diff=auto
color.status=auto
color.branch=auto
color.interactive=true
pack.packsizelimit=2g
help.format=html
http.sslcainfo=/bin/curl-ca-bundle.crt
sendemail.smtpserver=/bin/msmtp.exe
diff.astextplain.textconv=astextplain
rebase.autosquash=true
user.name=Pavel Gatilov
user.email=********
merge.tool=kdiff3
mergetool.kdiff3.path=C:/Program Files (x86)/KDiff3/kdiff3.exe
diff.guitool=kdiff3
difftool.kdiff3.path=C:/Program Files (x86)/KDiff3/kdiff3.exe
difftool.kdiff3.cmd="C:/Program Files (x86)/KDiff3/kdiff3.exe" "$LOCAL" "$REMOTE"
core.editor="C:/Program Files (x86)/GitExtensions/GitExtensions.exe" fileeditor
core.autocrlf=false
credential.helper=!"C:/Program Files (x86)/GitExtensions/GitCredentialWinStore/git-credential-winstore.exe"
core.repositoryformatversion=0
core.filemode=false
core.bare=false
core.logallrefupdates=true
core.symlinks=false
core.ignorecase=true
core.hidedotfiles=dotGitOnly
core.safecrlf=true
remote.origin.url=********
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
branch.develop.remote=origin
branch.develop.merge=refs/heads/develop
gui.wmstate=normal
gui.geometry=887x427+175+175 171 192
branch.8480-il.remote=origin
branch.8480-il.merge=refs/heads/8480-il
branch.branch-9354.remote=origin
branch.branch-9354.merge=refs/heads/branch-9354 
```

**版本**

我用：

```
工具版本
----------------------
msysgit 1.8.1.msysgit.1
Git 扩展 2.44
kdiff3 0.9.97

```

当我通过 Git Extensions 和通过运行合并时，问题都存在`git mergetool`

**更新 2**

我已经尝试配置 kdiff3 预处理器命令来删除不需要的文件部分，但它似乎在每行的基础上工作，所以它无法解决问题。

我可以编写一个预处理器包装器，但我还不想这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-15T09:49:17.940

您可以在[.gitattributes](https://git-scm.com/docs/gitattributes)中设置标志来配置 git 行为，开启 git 冲突解决，我们可以使用[`merge=union`](https://git-scm.com/docs/gitattributes#_built_in_merge_drivers)标志来执行此操作。

示例 .gitattributes

```
* merge=union 
```

除了指定所有文件都没有合并选项外，我们还可以对选定数量的文件执行此操作，例如：

```
*.java merge=union
src/generated/* merge=union 
```

这些行调整了 java 文件的合并选项，以及 src/generated 文件夹中的所有文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:44:07.473

这不是将配置变量设置`mergetool.<tool>.cmd`为根本没有初始/默认合并的情况。

在合并发生后使用（手册如此*说*`git merge-tool`）

# c# - 理解字典，使用 c# 向字典中添加新值

> ID：15615816
> 
> 赞同：4
> 
> 时间：2013-03-25T13:10:55.573
> 
> 标签：c#, dictionary, initialization

如果我有具有 Payment 属性的 Customer 对象，该属性是自定义枚举类型和十进制值的字典，例如

```
Customer.cs
public enum CustomerPayingMode
{
   CreditCard = 1,
   VirtualCoins = 2, 
   PayPal = 3
}
public Dictionary<CustomerPayingMode, decimal> Payment; 
```

在客户端代码中，我在向字典中添加值时遇到问题，尝试这样

```
Customer cust = new Customer();
cust.Payment = new Dictionary<CustomerPayingMode,decimal>()
                      .Add(CustomerPayingMode.CreditCard, 1M); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T13:12:32.837

[Add()](http://msdn.microsoft.com/en-us/library/k7z0zy8k.aspx)方法不返回您可以分配给的值，`cust.Payment`您需要创建字典然后调用创建的 Dictionary 对象的 Add() 方法：

```
Customer cust = new Customer();
cust.Payment = new Dictionary<CustomerPayingMode,decimal>();
cust.Payment.Add(CustomerPayingMode.CreditCard, 1M); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:13:23.323

您可以[内联初始化字典](http://msdn.microsoft.com/en-us/library/vstudio/bb531208.aspx)：

```
Customer cust = new Customer();
cust.Payment = new Dictionary<CustomerPayingMode, decimal>()
{
    { CustomerPayingMode.CreditCard, 1M }
}; 
```

您可能还想在`Customer`构造函数中初始化字典，让用户`Payment`无需初始化字典即可添加：

```
public class Customer()
{
    public Customer() 
    {
        this.Payment = new Dictionary<CustomerPayingMode, decimal>();
    }

    // Good practice to use a property here instead of a public field.
    public Dictionary<CustomerPayingMode, decimal> Payment { get; set; }
}

Customer cust = new Customer();
cust.Payment.Add(CustomerPayingMode.CreditCard, 1M); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:13:40.067

到目前为止，我理解`cust.Payment`的是 type of`Dictionary<CustomerPayingMode,decimal>`但您将其分配为`.Add(CustomerPayingMode.CreditCard, 1M)`.

你需要做

```
cust.Payment = new Dictionary<CustomerPayingMode,decimal>();
cust.Payment.Add(CustomerPayingMode.CreditCard, 1M); 
```

当您链接方法调用时，结果是链中最后一个调用的返回值，在您的情况下是`.Add`方法。由于它返回 void，因此无法转换为`Dictionary<CustomerPayingMode,decimal>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:13:25.370

您正在创建字典，为其添加一个值，然后将`.Add`函数的结果返回给您的变量。

```
Customer cust = new Customer();

// Set the Dictionary to Payment
cust.Payment = new Dictionary<CustomerPayingMode, decimal>();

// Add the value to Payment (Dictionary)
cust.Payment.Add(CustomerPayingMode.CreditCard, 1M); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T13:37:20.867

在单独的行中将值添加到字典中：

```
 Customer cust = new Customer();
    cust.Payment = new Dictionary<CustomerPayingMode, decimal>();
    cust.Payment.Add(CustomerPayingMode.CreditCard, 1M); 
```

# android - 如何每分钟运行 BroadcastReceiver？

> ID：15615817
> 
> 赞同：2
> 
> 时间：2013-03-25T13:10:57.253
> 
> 标签：android, broadcastreceiver

我正在开发一个应用程序来监控每分钟后的网络。我为此使用广播接收器。

我想每分钟执行一次 BroadcastReceiver 。

我该怎么做？我可以在 BroadcastReceiver 中使用 Thread.sleep() 吗？

在android中持续运行BroadcastReceiver可以吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T13:14:30.510

BroadcastReceivers 设计为仅在接收到某些广播（系统广播或用户定义的广播）时运行。如果您想每分钟运行一些代码，您可以创建一个服务并使用警报管理器将其安排为每分钟运行一次。您可以使用警报管理器从广播接收器启动服务，它将每分钟运行一次。

在广播接收器的 onRecieve() 方法中，使用类似于以下给出的代码：

```
PendingIntent service = null; 
Intent intentForService = new Intent(context.getApplicationContext(), YourService.class);
final AlarmManager alarmManager = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
final Calendar time = Calendar.getInstance();
time.set(Calendar.MINUTE, 0);
time.set(Calendar.SECOND, 0);
time.set(Calendar.MILLISECOND, 0);
if (service == null) {
 service = PendingIntent.getService(context, 0,
                    intentForService,    PendingIntent.FLAG_CANCEL_CURRENT);
        }

        alarmManager.setRepeating(AlarmManager.RTC, time.getTime()
                .getTime(), 60000, service); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-04T08:57:58.293

即使没有 AlarmManager 你也可以做到

```
 private void ping() {
    try {
        //Your code here

    } catch (Exception e) {
        e.printStackTrace();
    }
      scheduleNext();
    }

    private void scheduleNext() {
      mHandler.postDelayed(new Runnable() {
        public void run() { ping(); }
      }, 60000);
    }

    public int onStartCommand(Intent intent, int x, int y) {
      mHandler = new android.os.Handler();
      ping();
      return START_STICKY;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:15:09.850

不可以。如果你能提供帮助，在 Android 或任何其他移动操作系统中持续运行任何会耗尽电池电量的东西是绝对不能接受的。

您应该做的是使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)类并每隔一分钟左右触发一个 Intent，这反过来将激活一个[Service](http://developer.android.com/guide/components/services.html)，您可以在其中运行您想要的任何代码。

有关示例，请参[见此答案。](https://stackoverflow.com/a/8321512/1369222)

有关更多信息，请参阅此线程： [Android：如何使用 AlarmManager](https://stackoverflow.com/questions/1082437/android-alarmmanager)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T13:15:25.070

是否有理由需要广播接收器，特别是？如果是这样，答案很简单，就是让某个组件每分钟广播它收到的 Intent。

我认为你应该看看警报管理器。您可以对其进行编程以定期在您的应用程序中触发 PendingIntent。我敢打赌这就是你想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T13:17:33.943

而不是广播接收器。您应该使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)以在特定时间间隔启动[服务](http://developer.android.com/guide/components/services.html)。

[你可以从这里](https://github.com/rakeshcusat/Code4Reference/tree/master/AndroidProjects/AlarmManagerExample)获取示例源代码

希望它会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T13:14:16.133

我建议您使用 Service 组件，而不是使用 BroadcastReceiver。您的代码可能需要超过 10 秒才能执行，但是对于 BroadcastReceiver，您有 10 秒的限制来执行代码。

此外，服务最适合下载、上传或播放音乐等后台进程。

所以我建议你使用执行服务而不是广播接收器。

# ios - IOS 链接器错误

> ID：15615820
> 
> 赞同：-4
> 
> 时间：2013-03-25T13:11:25.007
> 
> 标签：ios, objective-c, xcode4.5

> 重复符号 _a 在：/Users/pgmutti/Library/Developer/Xcode/DerivedData/iPhoneXMPP-dzzpetgrkxvjlwfavatmfkvovusv/Build/Intermediates/iPhoneXMPP.build/Debug-iphonesimulator/iPhoneXMPP.build/Objects-normal/i386/SettingsViewController.o /Users/ pgmutti/Library/Developer/Xcode/DerivedData/iPhoneXMPP-dzzpetgrkxvjlwfavatmfkvovusv/Build/Intermediates/iPhoneXMPP.build/Debug-iphonesimulator/iPhoneXMPP.build/Objects-normal/i386/AddDamageAccount.o ld：架构i386 clang的1个重复符号：错误: 链接器命令失败，退出代码为 1（使用 -v 查看调用）

我已经删除了我在这两个类中使用的图像参考。但我仍然收到这个错误。如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:13:36.063

似乎您在项目的不同不同组中有以下文件的 2 个副本：

**添加损坏帐户**

**设置视图控制器**

请确认 ！

# android - setEnabled() 与 setClickable() 有什么区别？

> ID：15615823
> 
> 赞同：87
> 
> 时间：2013-03-25T13:11:34.857
> 
> 标签：android, android-button, clickable

到目前为止，当我想阻止用户按下按钮时，我会设置`button.setClickable(false);`并通常将文本更改为某种灰色（让用户知道按钮已禁用）。今天我偶然发现了该`setEnabled()`物业。

所以我去文档看下面方法的解释：

```
setEnabled(boolean enabled)
   Set the enabled state of this view. 
```

这甚至意味着什么？启用状态/可点击状态和禁用状态/不可点击状态有什么区别？有人可以解释一下我以前做的事情，使用可点击属性和使用该属性有什么区别`setEnabled()`吗？什么时候应该用？我搜索了 Stack Overflow，但找不到任何相关内容。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-03-25T13:46:22.297

> 这他妈是什么意思？

引用[“GUI 小部件”的 Wikipedia 页面](http://en.wikipedia.org/wiki/GUI_widget)：

> 在应用程序的上下文中，可以在给定时间点启用或禁用小部件。启用的小部件具有响应事件的能力，例如击键或鼠标操作。无法响应此类事件的小部件被视为已禁用。禁用的小部件的外观通常与启用的小部件不同；禁用的小部件可能以较浅的颜色绘制，或者可能以某种方式在视觉上被遮挡。示例见右图。

这个概念已经存在了几十年，并且可以在大多数 GUI 框架中找到。

> 启用状态/可点击状态和禁用状态/不可点击状态有什么区别？

在 Android 中，不可点击的小部件不会响应点击事件。禁用的小部件不仅不可点击，而且还直观地表明它已被禁用。

> 你是什​​么意思：“..因为它使按钮在视觉上“禁用”？它如何在视觉上改变它？

使`Button`外观和响应像 a 的`Button`是它的背景，即 a `StateListDrawable`。有用于禁用状态的特定图像。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-02-01T03:30:01.970

我在其他地方没有提到的一个很大的区别是重叠的视图。带有 clickable=true 和 enabled=false 的视图将不允许您按其后面的视图。但是带有 clickable=false 的 View 将允许您按下它后面的 View。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-03T10:29:08.867

因此，基本上启用的 false 不会响应任何响应，而在运行时设置的可单击的 false 仍然响应，相信我，我刚刚尝试过。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-16T13:27:50.363

正如 Dilip 所说，如果在运行时设置 setClickable 则不起作用。这是使它工作的技巧：

```
ToggleButton toggle = ...
toggle.setOnTouchListener(new ToggleButton.OnTouchListener() {

  @Override
  public boolean onTouch(View v, MotionEvent event) {
     // If true is returned, the event is eated by the TouchListener
     return !v.isClickable();
  }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-17T17:28:35.723

视图还可以响应外部键盘、方向键（遥控器/游戏控制器）和辅助设备（[开关](https://en.wikipedia.org/wiki/Switch_access)、[屏幕阅读器](https://play.google.com/store/apps/details?id=com.google.android.marvin.talkback)）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-20T11:19:09.633

setClickable public void setClickable (boolean clickable)

它启用或禁用特定视图的点击事件。当一个视图可点击时，它会在每次点击时将其状态更改为“按下”。如果视图的这个属性被禁用，那么它不会改变它的状态。

setEnabled public void setEnabled（启用布尔值）

它设置此视图的启用状态。如果特定视图设置为启用，则在参数中传递 true，否则传递 false

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-15T06:35:10.410

上面列出了差异，但有一个提示。在 setOnClickListener() 之后使用 setClickable()。因为这：

```
public void setOnClickListener(@Nullable OnClickListener l) {
    if (!isClickable()) {
        setClickable(true);
    }
    getListenerInfo().mOnClickListener = l;
} 
```

# javascript - 如何在javascript中访问单击的表格行的特定单元格

> ID：15615825
> 
> 赞同：5
> 
> 时间：2013-03-25T13:11:40.753
> 
> 标签：javascript, jquery, html, css

我有一个从数据库填充的 HTML 表。以及一个将客户端点击事件添加到每个表行的 jquery 函数。

```
$(function() {
    $(".TreeTable tr").each(function(index) {
        $(this).click(function() {
            alert($(this).text());
        });
    });
}); 
```

现在我可以通过单击任何行来获得完整的行值。现在我需要访问该函数中的单个单元格值。谁能告诉我如何在行点击时获得单个单元格的值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T14:09:57.937

看看这个：

```
$(document).ready(function(){
    $('.TreeTable tr').click(function(e){
        var cell = $(e.target).get(0); // This is the TD you clicked
        var tr = $(this); // This is the TR you clicked
        $('#out').empty();
        $('td', tr).each(function(i, td){
            $('#out').html(
              $('#out').html()
              +'<br>'
              +i+': '+$(td).text() 
              + (td===cell?' [clicked]':'') );
        });
    });
}); 
```

这是工作代码：http: [//jsfiddle.net/VbA9D/](http://jsfiddle.net/VbA9D/)

如果您在可能单击的表格单元格中有其他 HTML 元素，则以下示例将更好地工作：

```
$(document).ready(function(){
    $('.TreeTable tr').click(function(e){
        var cell = $(e.target).get(0); // This is the TD you clicked
        if(cell.nodeName != 'TD') 
            cell = $(cell).closest('td').get(0);
        var tr = $(this); // This is the TR you clicked
        $('#out').empty();
        $('td', tr).each(function(i, td){
            $('#out').html(
              $('#out').html()
              +'<br>'
              +i+': '+$(td).text() 
              + (td===cell?' [clicked]':'') );
        });
    });
}); 
```

这是您可以测试的代码：

[http://jsfiddle.net/7PWu5/](http://jsfiddle.net/7PWu5/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T13:15:24.740

首先，不需要`.each`- 该`.click`方法将绑定到每个传递的元素，而不仅仅是第一个。

其次，在表格行元素上有一个特定的属性`cells`，可以直接访问行的单元格：

```
$('.TreeTable').on('click', 'tr', function() {
    var td = this.cells[0];  // the first <td>
    alert( $(td).text() );
}); 
```

请注意事件委托的使用——事件处理程序实际上是在整个表上注册的，然后依靠事件冒泡告诉您单击了哪一行（并从中获取单元格文本）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:16:52.670

您不需要显式迭代 using`.each()`将事件处理程序绑定到一组元素，事件绑定函数将为您隐式执行此操作。由于事件传播，您可以将事件处理程序绑定到`<tr>`并使用`event.target`（原始元素）来获取对实际单击的元素（）的引用`<td>`：

```
$(function() {
    $('.TreeTable tr').click(function(event) {
        console.log(this); // the <tr>
        console.log(event.target); // the <td>
    });
}); 
```

这是假设您对`<td>`单击的特定元素感兴趣。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T13:16:17.260

我更喜欢这个：

```
$('.TreeTable').on('click', 'td', function() { // td not tr
     alert($(this).text());
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T13:12:28.230

您可以使用获取第二个单元格

```
 alert($('td', this).eq(1).text()); 
```

通常，为了获得更可靠的代码，您更愿意向所需的单元格添加一个类，以便您可以使用

```
 alert($('td.myclass', this).text()); 
```

如果您想要获取单击的单元格，只需将事件绑定到单元格：

```
$(".TreeTable  td").click(function() { // td not tr
     alert($(this).text());
}); 
```

请注意，循环遍历 jQuery 集合以绑定事件是没有用的，正如您从我上一个代码中看到的那样。

# php - SimpleXML 错误“调用非对象上的成员函数”

> ID：15615831
> 
> 赞同：1
> 
> 时间：2013-03-25T13:11:48.453
> 
> 标签：php, html, xml, simplexml

我不断收到以下错误：

> 致命错误：在第 3 行的 /www/zzl.org/t/h/e/theseminary/htdocs/submit.php 中的非对象上调用成员函数 addChild()

我的代码，在它自己的 php 文件中，如下所示：

```
<?php
$xmlobject = simplexml_load_file('data.xml');
$xmlobject[0]->channel[0]->posts[0]->addChild("item");
$itemcount = $xmlobject->channel->posts->count();
$xmlobject->channel[0]->posts[0]->item[$itemcount]->addChild("title", $title);
$xmlobject->channel->posts->item[$itemcount]->addChild("content", $content);
$xmlobject->asxml("data.xml");
header( "Location: $url" );
?> 
```

*我意识到这个问题已被多次问过，但我*找不到解决问题的方法。

这是 XML 文件，如果有帮助的话。

```
<?xml version="1.0"?>
<channel>
<title></title>
<description></description>
<posts>
</posts>
</channel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T23:49:40.863

改变这个...

```
$xmlobject[0]->channel[0]->posts[0]->addChild("item"); 
```

对这个……

```
$xmlobject->posts[0]->addChild("item"); 
```

原因：`<channel>`是你的根元素，`$xmlobject`代表根元素。

这就是为什么也必须发布 XML 的原因。
观看现场演示@http [://codepad.viper-7.com/DffgLG](http://codepad.viper-7.com/DffgLG)

顺便说一句，这条线...

```
$itemcount = $xmlobject->posts->count(); 
```

将计数`<posts>`-nodes，如果你想计数`<item>s`，去...

```
$itemcount = $xmlobject->posts->item->count(); 
```

...并记住这样做，`$itemcount--`因为索引从 0 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:13:40.570

错误是指这一行

```
$xmlobject[0]->channel[0]->posts[0]->addChild("item"); 
```

并且正在向你“说话”到底发生了什么。

根本`posts[0]`不是一个对象（就像你正在尝试做类似的事情`1->addChild("item");`or`'foo'->addChild("item");`或`null->addChild("item");`）

你确定`->post[0]`会返回一个值（所以，一个`SimpleXMLElement`对象）？

# javascript - 带有标签的复选框，单击子标签应打开超链接：javascript

> ID：15615835
> 
> 赞同：0
> 
> 时间：2013-03-25T13:11:54.523
> 
> 标签：javascript, html

如何制作一个包含文本和复选框的复选框，就像我在此文本中有一个带有“我接受”服务条款“”标签的复选框，我的服务条款应该是超链接，点击服务条款文本它应该打开另一个 HTML 页面，我已经使用下面的代码完成了，但使用此代码检查并取消选中复选框，而不是打开超链接。

```
 <input name="checkbox-0 " type="checkbox" data-iconpos="left" id="Chkterms">I accept the <a href="#terms-of-service">Terms of Services</a>. </label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:14:04.283

在 onchange 中调用一个 javascript 函数并执行该操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:14:26.930

移除包装`label`以防止点击您的`a`标签以选中该框。

请参阅此[小提琴](http://jsfiddle.net/bigood/GWSgU/)以进行演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:33:27.417

确切地说，这段代码对我来说很好，只是修改它以在新页面中打开 google.com

```
<html>
 <input name="checkbox-0 " type="checkbox" data-iconpos="left" id="Chkterms">

 I accept the <a href="http://google.com" target=_blank>Terms of Services</a>.
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:41:41.547

这应该适合你。我已经`label`把`<label for="Chkterms">`. 并用于`span`可点击的链接。

**注意：** 打开`#terms-of-service`会将页面滚动到具有 id 的元素，`terms-of-service`而不是服务条款页面。

**[jsFiddle](http://jsfiddle.net/mHbHv/3/)**

# php - YII：Renderpartial 不生成 javascript？

> ID：15615842
> 
> 赞同：2
> 
> 时间：2013-03-25T13:12:05.827
> 
> 标签：php, yii

我正在调用一个生成按钮的 ajax 函数：

```
$html = $this->renderPartial( '/cart/_cartItem',  array( 'data'   => $data,  ) , true ); 
```

问题是，如果我打印出 $html，我会看到按钮，但是使按钮正常工作的相关 javascript 不存在。有没有办法强制渲染包含使该按钮 100% 工作的必要 javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:23:30.667

将 javascript 放在包含按钮的页面上（不要使用 ...），但例如；

```
Yii::app()->clientScript->registerScript('toggle', "

$('#clearDate').click(function() {
$('#Project_start_date').val('');
});

"); 
```

如果它仍然无法正常工作，请尝试在 javascript 中包含 document.ready

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:27:01.077

我通过做两件事来修复它：

首先，通过将进程 $outputTrigger 设置为 true 来包含所有 javascript；

```
$html = $this->renderPartial( '/cart/_cartItem',  array( 'data'   => $data,  ) , true, **true** ); 
```

其次，它也添加了这个：

```
<link rel="stylesheet" type="text/css" href="/easionline2/www/assets/9bdc3248/css/bootstrap-yii.css" />
<script type="text/javascript" src="/easionline2/www/assets/1dffa579/jquery.js"></script>
<script type="text/javascript" src="/easionline2/www/assets/9bdc3248/js/bootstrap.js"></script> 
```

我做了一个破解来摆脱这个：

```
$start = strpos($html, '<div class="cartItem');
$end = strlen($html) - $start;
$html = substr($html, $start , $end ); 
```

有人知道做第二部分的更好方法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T16:46:58.793

这个问题已经回答了，但这是相关的，可能会派上用场。

请注意在 Yii 中使用 AJAX 调用的 renerPartial()。Yii 没有正确解释 AJAX 引入的新视图之外的 javascript 是一个已知错误。如果您正在加载一个小部件，或者重新加载 jQuery 或另一个 JS 文件的东西，那么在 AJAX 调用之前最初加载到页面上的 jQuery 将被忘记，并且它所做的所有委托也将被忘记。此 JS 代码设置所有 AJAX 调用，以剥离将加载已加载 JS 文件的任何 JS 脚本的新 HTML。把它放到你的主视图中：

```
<script>
$.ajaxSetup({
global: true,
dataFilter: function(data,type){
    //  only 'text' and 'html' dataType should be filtered
    if (type && type != "html" && type != "text")
    {
                return data;
    }

    var selector = 'script[src]'; // copy-paste the following back in after [src] if you also want stylesheets blocked too: ,link[rel="stylesheet"]

        // get loaded scripts from DOM the first time we execute.
        if (!$._loadedScripts) {
        $._loadedScripts = {};
        $._dataHolder = $(document.createElement('div'));

                var loadedScripts = $(document).find(selector);

        //fetching scripts from the DOM
            for (var i = 0, len = loadedScripts.length; i < len; i++) 
        {
                    $._loadedScripts[loadedScripts[i].src] = 1;
                }
        }

    //$._dataHolder.html(data) does not work
    $._dataHolder[0].innerHTML = data;

    // iterate over new scripts and remove if source is already in DOM:
    var incomingScripts = $($._dataHolder).find(selector);
    for (var i = 0, len = incomingScripts.length; i < len; i++)
    {
        if ($._loadedScripts[incomingScripts[i].src])
        {
                    $(incomingScripts[i]).remove();
                }
                else
                {
                    $._loadedScripts[incomingScripts[i].src] = 1;
                }
        }

    return $._dataHolder[0].innerHTML;
}
});
</script> 
```

# asp.net - 如何发送警报并刷新页面？

> ID：15615847
> 
> 赞同：1
> 
> 时间：2013-03-25T13:12:30.090
> 
> 标签：asp.net

我一直在阅读一些主题，`StackOverFlow`并找到了一些刷新页面的方法，例如：
`Response.Redirect(Request.RawURL);, Response.Redirect(Absolute.Uri) etc...`

但我需要发送确认警报并刷新页面......现在，我正在使用此方法发送警报：

```
ScriptManager.RegisterStartupScript(this, typeof(Page), "alert", "alert('Well Done !');", true); 
```

但是使用这些方法中的任何一种来刷新页面，都不会触发警报。所以我需要知道一种很好的方法来做到这一点。
因为我有一些`DropDownList`数据来自`database`并且我正在`Edits`对数据进行一些处理，所以当用户单击`edit`当前数据的按钮时，它会显示一条消息，`edit successfully`然后用新数据刷新页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:20:31.913

客户端重定向怎么样？

```
alert("You're now will be redirected");
window.location.reload(); 
```

由于 alert() 是同步函数，重定向只会在用户点击“ok”时触发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:31:03.347

上面的客户端脚本可以通过这种方式添加到您的代码隐藏中。

```
protected void Render()
{
    System.Text.StringBuilder stringBuilder = new System.Text.StringBuilder("<script "
        + "type='text/javascript'>"
        );
    stringBuilder.Append("alert('hi');");
    stringBuilder.Append("window.location.reload();");
    stringBuilder.Append("</script>");

} 
```

# jquery - 使用 jQuery 添加样式表

> ID：15615855
> 
> 赞同：2
> 
> 时间：2013-03-25T13:12:49.307
> 
> 标签：jquery

我已经阅读了它，似乎使用 jQuery 添加样式表的最佳方法如下：

```
 $('head').append('<link rel="stylesheet" type="text/css" href="../css/mystyle.css">'); 
```

现在我想做的是使用这种方法在不同的主题之间切换：

```
<script type="text/javascript">
      $(document).ready(function () {
          if($('body').hasClass('pink'))
          {
              $('head').append('<link rel="stylesheet" type="text/css" href="../css/mystylePink.css">');
          }
          else
          {
              $('head').append('<link rel="stylesheet" type="text/css" href="../css/mystyle.css">');
          }
      });
</script> 
```

**我的问题**：除了没有启用 javascript 的表单用户，加载这样的样式表时存在哪些并发症/问题？IE？移动浏览器？因为我实际上想在移动网站上使用它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:15:42.377

这里的主要问题是样式表加载时无样式内容的闪烁，而不是 IE 或移动浏览器。

我建议您使用 CSS 预处理器（SASS、LESS），并仅使用一个样式表与您的正常样式，然后用`.pink`下面的类覆盖。

```
.myClass{
  color: white;
  background: black;
}

.pink .myClass{
  color: pink;
  background: grey;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:16:20.910

此方法不适用于 IE8 及以下版本。

您必须使用另一种方法，例如 IEss document.createStyleSheet() 方法。

有关更多信息，请参阅此讨论：[我可以根据请求加载外部样式表吗？](https://stackoverflow.com/questions/2126238/load-external-stylesheets-on-request)

# android - Eclipse项目不想清理

> ID：15615859
> 
> 赞同：0
> 
> 时间：2013-03-25T13:13:07.963
> 
> 标签：android, eclipse-3.6

我一直在研究 eclipse helios，尝试 SVN 存储库项目。可以肯定地说它已正确签出到特定的工作空间。

但是，当我将文件从 eclipse 打包文件夹复制到根文件夹并重新启动 eclipse 时。

清理项目功能变得不活跃，这会带来很多错误，例如：

> 期间发生内部错误: `"Launching iReadTrunk".java.lang.NullPointerException`,

当我尝试运行应用程序时。请！帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:25:19.567

升级到 Eclipse Juno，Helios 很老了。 [http://www.eclipse.org/downloads/packages/release/juno/sr1](http://www.eclipse.org/downloads/packages/release/juno/sr1)

# c++ - 为什么 emplace_back 需要移动构造函数

> ID：15615872
> 
> 赞同：19
> 
> 时间：2013-03-25T13:13:41.113
> 
> 标签：c++, c++11

我有以下代码：

```
#include <string>
#include <vector>
#include <iostream>

class Test final {
public:
  Test(const std::string& s)
    : s_(s) {
    std::cout << "constructing: " << s_ << std::endl;
  }
#ifdef NO_MOVE
private:
  Test(const Test& t) = delete;
  Test(Test&& t) = delete;
#else
public:
  Test(const Test& t)
    : s_(t.s_) {
    std::cout << "copying: " << s_ << std::endl;
  };
  Test(Test&& t)
    : s_(std::move(t.s_)) {
    std::cout << "moving: " << s_ << std::endl;
  };
#endif
private:
  std::string s_;
};

int main() {
  std::vector<Test> v;
  v.emplace_back("emplace_back");
} 
```

当允许移动构造函数时，会发生以下情况：

```
[matt test] g++ -std=c++11 main.cpp && ./a.out
constructing: emplace_back 
```

但是，如果删除了移动构造函数：

```
[matt test] g++ -std=c++11 main.cpp -DNO_MOVE && ./a.out
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_construct.h: In instantiation of ‘void std::_Construct(_T1*, _Args&& ...) [with _T1 = Test; _Args = {Test}]’:
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_uninitialized.h:77:3:   required from ‘static _ForwardIterator std::__uninitialized_copy<_TrivialValueTypes>::__uninit_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = std::move_iterator<Test*>; _ForwardIterator = Test*; bool _TrivialValueTypes = false]’
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_uninitialized.h:119:41:   required from ‘_ForwardIterator std::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = std::move_iterator<Test*>; _ForwardIterator = Test*]’
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_uninitialized.h:260:63:   required from ‘_ForwardIterator std::__uninitialized_copy_a(_InputIterator, _InputIterator, _ForwardIterator, std::allocator<_Tp>&) [with _InputIterator = std::move_iterator<Test*>; _ForwardIterator = Test*; _Tp = Test]’
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_uninitialized.h:283:69:   required from ‘_ForwardIterator std::__uninitialized_move_if_noexcept_a(_InputIterator, _InputIterator, _ForwardIterator, _Allocator&) [with _InputIterator = Test*; _ForwardIterator = Test*; _Allocator = std::allocator<Test>]’
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/vector.tcc:410:6:   required from ‘void std::vector<_Tp, _Alloc>::_M_emplace_back_aux(_Args&& ...) [with _Args = {const char (&)[13]}; _Tp = Test; _Alloc = std::allocator<Test>]’
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/vector.tcc:102:4:   required from ‘void std::vector<_Tp, _Alloc>::emplace_back(_Args&& ...) [with _Args = {const char (&)[13]}; _Tp = Test; _Alloc = std::allocator<Test>]’
main.cpp:32:32:   required from here
main.cpp:14:3: error: ‘Test::Test(Test&&)’ is private
In file included from /usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/vector:63:0,
                 from main.cpp:2:
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_construct.h:77:7: error: within this context
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_construct.h:77:7: error: use of deleted function ‘Test::Test(Test&&)’
main.cpp:14:3: error: declared here 
```

但是`emplace_back`不使用移动构造函数。为什么在这个实例中初始化需要一个移动构造函数？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-25T13:41:24.763

如问题后的评论中所述。`emplace_back`操作员可能需要重新分配容器内存，因此模板`vector`类型需要是可复制或可移动构造的。

问题不是参数的转发，而是为新对象分配内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:42:13.070

如果向量中没有空间，那么它应该分配新空间并将所有内容移到那里，以避免复制对象（向量内）包含或拥有的资源，需要移动

对于类型的向量`Test`

```
Test object(original)--->resource on heap
Test object(relocated with move constructor)------>resource on heap
Test object(relocated with copy constructor)------>copy of resource on heap 
```

# openlayers - 在 OpenLayers 中捕捉到道路

> ID：15615876
> 
> 赞同：1
> 
> 时间：2013-03-25T13:13:46.103
> 
> 标签：openlayers

我有追踪车辆的 GPS 系统。我使用 openlayer 通过带有线条的矢量图层显示他们的路线，并且当我的 gps 跟踪设备没有向我发送曲线（转弯）位置时。线路在路外。我想使用 snap to road 来修复它，但我在 OpenLayers 中没有找到任何解决方案。你能帮我解决一些问题吗？

我想做类似的东西：[http ://www.cyclelicio.us/2013/strava-snap-tool-gps/](http://www.cyclelicio.us/2013/strava-snap-tool-gps/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-01T11:31:25.020

这个问题对于 OpenLayers 并不是很具体，但是将轨迹捕捉到道路网络的技术称为[map-matching](http://en.wikipedia.org/wiki/Map_matching)。[OSRM](https://github.com/Project-OSRM/osrm-backend/wiki/Server-api#map-matching)和[GraphHopper](https://github.com/graphhopper/map-matching)提供了该算法的开源实现，您可能想看看。

# ruby-on-rails - 如何在 ruby on rails 中获取电子表格中的单元格位置？

> ID：15615880
> 
> 赞同：1
> 
> 时间：2013-03-25T13:14:13.760
> 
> 标签：ruby-on-rails, spreadsheet

有什么方法可以使用 roo、电子表格等宝石在 ruby​​ 中获取电子表格单元格的位置（坐标）？

假设我在第 C 列和第 2 行中有值“TOTAL”。如何使用 ruby​​ on rails 获得这个职位？

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:27:18.980

```
#http://spreadsheet.rubyforge.org/GUIDE_txt.html

require 'spreadsheet'
book = Spreadsheet.open 'sample.xls'
sheet1 = book.worksheet 0
sheet1.each_with_index do |row, index|
  for column in 0..(row.length-1)
    puts "Row:- #{index}, Column: #{column}, Value: #{row[column]}" 
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:31:43.380

这是来自 roo 官方教程的示例[http://roo.rubyforge.org/](http://roo.rubyforge.org/) 希望它会有所帮助

```
HOURLY_RATE = 123.45

oo = Openoffice.new("simple_spreadsheet.ods")
oo.default_sheet = oo.sheets.first

4.upto(12) do |line|
    date       = oo.cell(line,'A')
    start_time = oo.cell(line,'B')
    end_time   = oo.cell(line,'C')
    pause      = oo.cell(line,'D')
    sum        = (end_time - start_time) - pause
    comment    = oo.cell(line,'F')
    amount     = sum * HOURLY_RATE
    if date
     puts "#{date}\t#{sum}\t#{amount}\t#{comment}"
 end
end 
```

# java - 如何向 JavaFX 图表添加值标记？

> ID：15615881
> 
> 赞同：9
> 
> 时间：2013-03-25T13:14:14.827
> 
> 标签：java, charts, javafx-2, javafx

我正在尝试使用 JavaFX 构建一个系列图表，其中数据是动态插入的。

每次插入新值时，我想检查这是否是迄今为止的最高值，如果是，我想画一条水平线来表明这是最大值。

在 JFree 图表中，我会使用 ValueMarker，但我正在尝试对 JavaFX 做同样的事情。

我尝试使用 Line 对象，但它绝对不一样，因为我无法提供图表值，它采用窗口中的相对像素位置。

这是我想要实现的图表截图：

[http://postimg.org/image/s5fkupsuz/](http://postimg.org/image/s5fkupsuz/)

有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T13:55:31.320

要将图表值转换为像素，您可以使用`NumberAxis#getDisplayPosition()`返回图表节点实际坐标的方法。

虽然这些坐标是相对于图表区域的，但您可以通过下面的代码找到：

```
Node chartArea = chart.lookup(".chart-plot-background");
Bounds chartAreaBounds = chartArea.localToScene(chartArea.getBoundsInLocal()); 
```

注意`localToScene()`方法，它允许您将任何坐标转换为场景坐标。因此，您可以使用它们来更新您的值标记坐标。确保`localToScene`在显示场景后拨打电话。

请参阅下面的示例程序，该程序生成下一个图表：

![在此处输入图像描述](../Images/e5eeca5d76aa4863d36e0f6ca4d97f63.png)

```
public class LineChartValueMarker extends Application {

    private Line valueMarker = new Line();
    private XYChart.Series<Number, Number> series = new XYChart.Series<>();
    private NumberAxis yAxis;
    private double yShift;

    private void updateMarker() {
        // find maximal y value
        double max = 0;
        for (Data<Number, Number> value : series.getData()) {
            double y = value.getYValue().doubleValue();
            if (y > max) {
                max = y;
            }
        }
        // find pixel position of that value
        double displayPosition = yAxis.getDisplayPosition(max);
        // update marker
        valueMarker.setStartY(yShift + displayPosition);
        valueMarker.setEndY(yShift + displayPosition);
    }

    @Override
    public void start(Stage stage) {
        LineChart<Number, Number> chart = new LineChart<>(new NumberAxis(0, 100, 10), yAxis = new NumberAxis(0, 100, 10));

        series.getData().add(new XYChart.Data(0, 0));
        series.getData().add(new XYChart.Data(10, 20));

        chart.getData().addAll(series);
        Pane pane = new Pane();
        pane.getChildren().addAll(chart, valueMarker);
        Scene scene = new Scene(pane);

        // add new value on mouseclick for testing
        chart.setOnMouseClicked(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent t) {
                series.getData().add(new XYChart.Data(series.getData().size() * 10, 30 + 50 * new Random().nextDouble()));
                updateMarker();
            }
        });

        stage.setScene(scene);
        stage.show();

        // find chart area Node
        Node chartArea = chart.lookup(".chart-plot-background");
        Bounds chartAreaBounds = chartArea.localToScene(chartArea.getBoundsInLocal());
        // remember scene position of chart area
        yShift = chartAreaBounds.getMinY();
        // set x parameters of the valueMarker to chart area bounds
        valueMarker.setStartX(chartAreaBounds.getMinX());
        valueMarker.setEndX(chartAreaBounds.getMaxX());
        updateMarker();
    }

    public static void main(String[] args) {
        launch();
    }
} 
```

# php - Yii 命令行不自动加载模型

> ID：15615888
> 
> 赞同：4
> 
> 时间：2013-03-25T13:14:32.683
> 
> 标签：php, command-line, yii, yii-cmodel

我正在尝试使用 Yii 在命令行上运行命令。我的方法需要一个模型，但是当我运行命令时，Yii 说模型不存在，就好像它没有自动加载它一样。我的课很短很简单：

```
class ImportCommand extends CConsoleCommand {

    public function actionIndex() {

    }

    public function actionImport() {

        ini_set("display_errors", 1);
        set_time_limit(0);

        $cores = Core::model() -> findAll(array('limit' => 300000));

        foreach($cores as $core) {
            $core -> syncLocation();
        }

    }
} 
```

错误消息如下所示：

```
./yiic import import
PHP Warning:  PHP Startup: Unable to load dynamic library '/opt/local/lib/php/extensions/no-debug-non-zts-20090626/php_xsl.dll' - dlopen(/opt/local/lib/php/extensions/no-debug-non-zts-20090626/php_xsl.dll, 9): image not found in Unknown on line 0
PHP Error[2]: include(Core.php): failed to open stream: No such file or directory
    in file /Users/dixond/Sites/nevada/yii/framework/YiiBase.php at line 421
#0 /Users/dixond/Sites/nevada/yii/framework/YiiBase.php(421): autoload()
#1 unknown(0): autoload()
#2 /Users/dixond/Sites/nevada/pub/webservice/protected/commands/ImportCommand.php(15): spl_autoload_call()
#3 unknown(0): ImportCommand->actionImport()
#4 /Users/dixond/Sites/nevada/yii/framework/console/CConsoleCommand.php(172): ReflectionMethod->invokeArgs()
#5 /Users/dixond/Sites/nevada/yii/framework/console/CConsoleCommandRunner.php(67): ImportCommand->run()
#6 /Users/dixond/Sites/nevada/yii/framework/console/CConsoleApplication.php(91): CConsoleCommandRunner->run()
#7 /Users/dixond/Sites/nevada/yii/framework/base/CApplication.php(169): CConsoleApplication->processRequest()
#8 /Users/dixond/Sites/nevada/yii/framework/yiic.php(33): CConsoleApplication->run()
#9 /Users/dixond/Sites/nevada/pub/webservice/protected/yiic.php(7): require_once()
#10 /Users/dixond/Sites/nevada/pub/webservice/protected/yiic(4): require_once() 
```

为了让 Yii 自动加载模型，我需要做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T13:59:11.053

该`yiic`命令通常使用与您的 Web 应用程序不同的配置文件。

`import`在您的部分中定义所需的路径**`config/console.php`**，就像您在`config/main.php`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-26T07:25:49.893

```
Write this code in your config/console.php
// autoloading model and component classes
    'import'=>array(
        'application.models.*',
        'application.components.*',
    ), 
```

更多详情[http://www.yiiframework.com/doc/guide/1.1/en/topics.console](http://www.yiiframework.com/doc/guide/1.1/en/topics.console)

# sql - 使用 varchar 和 bigint 的 SQL Server IN 运算符

> ID：15615889
> 
> 赞同：4
> 
> 时间：2013-03-25T13:14:38.880
> 
> 标签：sql, sql-server, tsql

我在使用存储过程搜索并使用 SQL IN 运算符返回匹配 ID 列表时遇到了一些问题。我认为这个问题与数据类型有关。

参数作为字符串“32,1,5,78,43”传递给存储过程 - 这需要作为 IN 运算符传递到查询中以搜索字段 Column1。Bigint 中此字段的数据类型。

```
DECLARE @TEST varchar(1000)
SET @TEST = REPLACE('32,1,5,78,43', '''','')

SELECT Column1, Column2 
FROM Table
WHERE Column1 IN(@TEST) 
```

尝试从字符串中删除引号似乎不起作用，并且我收到一条错误消息，提示“将数据类型 varchar 转换为 bigint 时出错。”

在没有存储过程的情况下运行代码，并将值直接放入 IN 运算符（不带引号）然后可以正常工作并返回正确的值。例如

```
SELECT Column1, Column2 
FROM Table
WHERE Column1 IN(32,1,5,78,43) 
```

请有人能告诉我这里哪里出错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T13:17:14.587

您也可以在此使用*动态 sql*：

```
DECLARE @TEST varchar(1000)
DECLARE @SQLQuery AS NVARCHAR(500)

SET @TEST = '32,1,5,78,43'

SET @SQLQuery = 'SELECT Column1, Column2 FROM Table WHERE Column1 IN('+ @TEST +')'
EXECUTE(@SQLQuery) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T13:16:46.063

编写 integer-in-string-list 测试的一种工作方法是：

```
DECLARE @TEST varchar(1000)
SET @TEST = '32,1,5,78,43'

SELECT Column1, Column2 
FROM Table
WHERE ',' + @TEST + ',' LIKE '%,' + cast(Column1 as varchar(16)) + ',%' 
```

更好的方法是使用表值参数将强类型整数列表传递给存储过程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T13:20:29.597

因此，您需要使用动态 SQL，但您不需要转义单引号，只需执行以下操作：

```
declare @sql varchar(max)
set @sql = 'Select Column1, Column2 from Table where Column1 in (' + @test + ')'
execute (@sql) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T13:22:40.793

您可以使用 Split 函数将逗号分隔的字符串拆分为临时表，然后加入该临时表。

这是拆分字符串的一个很好的代码示例： [T-SQL：与字符串连接相反 - 如何将字符串拆分为多个记录](https://stackoverflow.com/questions/314824/t-sql-opposite-to-string-concatenation-how-to-split-string-into-multiple-reco)

您也可以执行动态 SQL，但这通常不太理想。

# input - 在 JavaFX 文本字段中限制输入的推荐方法

> ID：15615890
> 
> 赞同：13
> 
> 时间：2013-03-25T13:14:41.980
> 
> 标签：input, javafx, textfield

问题似乎是[this](https://stackoverflow.com/questions/7555564/what-is-the-recommended-way-to-make-a-numeric-textfield-in-javafx)的副本。但我的问题是我通过两种方式在 JavaFX 中开发了一个整数文本字段。代码如下

```
public class FXNDigitsField extends TextField
{
private long m_digit;
public FXNDigitsField()
{
    super();
}
public FXNDigitsField(long number)
{
    super();
    this.m_digit = number;
    onInitialization();
}

private void onInitialization()
{
    setText(Long.toString(this.m_digit));
}

@Override
public void replaceText(int startIndex, int endIndex, String text)
{
    if (text.matches(Constants.DIGITS_PATTERN) || text.equals(Constants.EMPTY_STRING)) {
        super.replaceText(startIndex, endIndex, text);
    }
}

@Override
public void replaceSelection(String text)
{
    if (text.matches(Constants.DIGITS_PATTERN) || text.equals(Constants.EMPTY_STRING)) {
        super.replaceSelection(text);
    }
}
} 
```

第二种方法是添加一个事件过滤器。

给出了代码片段。

```
 // restrict key input to numerals.
this.addEventFilter(KeyEvent.KEY_TYPED, new EventHandler<KeyEvent>() {
  @Override public void handle(KeyEvent keyEvent) {
    if (!"0123456789".contains(keyEvent.getCharacter())) {
      keyEvent.consume();
    }
  }
}); 
```

我的问题是，这样做的诽谤方式是什么？任何人都可以帮我拿起权利吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-10-31T08:26:26.073

在 TextField 中添加验证的最佳方式是第三种方式。此方法让 TextField 完成所有处理（复制/粘贴/撤消安全）。它不需要您扩展 TextField 类。它允许您决定在每次更改后如何处理新文本（将其推送到逻辑，或返回到以前的值，甚至修改它）。

```
// fired by every text property changes
textField.textProperty().addListener(
  (observable, oldValue, newValue) -> {
    // Your validation rules, anything you like
    // (! note 1 !) make sure that empty string (newValue.equals("")) 
    //   or initial text is always valid
    //   to prevent inifinity cycle
    // do whatever you want with newValue

    // If newValue is not valid for your rules
    ((StringProperty)observable).setValue(oldValue);
    // (! note 2 !) do not bind textProperty (textProperty().bind(someProperty))
    //   to anything in your code.  TextProperty implementation
    //   of StringProperty in TextFieldControl
    //   will throw RuntimeException in this case on setValue(string) call.
    //   Or catch and handle this exception.

    // If you want to change something in text
    // When it is valid for you with some changes that can be automated.
    // For example change it to upper case
    ((StringProperty)observable).setValue(newValue.toUpperCase());
  }
); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-24T04:44:48.917

在这两种方式中，您都不能输入数字字符以外的字符。但它允许在那里粘贴任何字符（从任何来源复制文本并粘贴到您的 TextField 中）。

进行验证的一个好方法是在提交之后，

喜欢（对于整数）：

```
try {
    Integer.parseInt(myNumField.getText());
} catch(Exception e) {
    System.out.println("Non-numeric character exist");
} 
```

（或者您可以使用您的任意组合+上述方法）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-04-18T17:16:05.140

JavaFX为这个用例提供了一个[TextFormatter类。](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/TextFormatter.html)它允许您在将文本内容“提交”`textProperty`到`TextField`.

看这个例子：

```
TextFormatter<String> textFormatter = new TextFormatter<>(change -> {
    if (!change.isContentChange()) {
        return change;
    }

    String text = change.getControlNewText();

    if (isValid(text)) { // your validation logic
        return null;
    }

    return change;
});

textField.setTextFormatter(textFormatter); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-06T11:22:52.000

> 此代码片段仅允许用户在 TextField 中输入数字。

```
 /**
     * This will check whether the incoming data from the user is valid.
     */
    UnaryOperator<TextFormatter.Change> numberValidationFormatter = change -> {
        if (change.getText().matches("\\d+")) {
            return change; //if change is a number
        } else {
            change.setText(""); //else make no change
            change.setRange( //don't remove any selected text either.
                    change.getRangeStart(),
                    change.getRangeStart()
            );
            return change;
        }
    };

    TextFormatter tf = new TextFormatter(numberValidationFormatter);

    textfield.setTextFormatter(tf); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-11T04:37:09.723

与`Manuel Mauky`发布的内容类似，但在`groovy`：

注意：这将阻止输入除数字之外的任何其他字符。

```
def digitsOnlyOperator = new UnaryOperator<TextFormatter.Change>() {
        @Override
        TextFormatter.Change apply(TextFormatter.Change change) {
            return !change.contentChange || change.controlNewText.isNumber() ? change : null
        }
}
textField.textFormatter = new TextFormatter<>(digitsOnlyOperator) 
```

在 groovy 中可能有一种更短的方法。如果您知道，请在此处发布。

# c - libpcap：64 位机器没有兼容的 32 位 libpcap 库

> ID：15615891
> 
> 赞同：0
> 
> 时间：2013-03-25T13:14:44.463
> 
> 标签：c, linux, tcpdump

我想使用带有 libpcap 的选项将`.c`文件编译为 32 位可执行文件，机器是 linux 64 位 fedora 16`gcc``-m32`

但是，我收到以下错误

```
[root@fdf source]# gcc -m32 -o test_tcp test_tcp.c -lpcap
/usr/bin/ld: skipping incompatible /usr/lib64/libpcap.so when searching for -lpcap
/usr/bin/ld: cannot find -lpcap
 collect2: ld returned 1 exit status 
```

我安装了

```
 yum install libpcap.i686 
```

然后尝试编译，但仍然出现错误：

```
root@ddh-4.0# gcc -m32 -o test_tcp test_tcp.c -lpcap
/usr/bin/ld: skipping incompatible /usr/lib64/libpcap.so when searching for -lpcap
/usr/bin/ld: cannot find -lpcap 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:09:39.340

除了运行时库之外，您还需要开发包。也一样

百胜安装 libpcap-devel.i686

# websocket - Mqttjs websocket 支持

> ID：15615892
> 
> 赞同：2
> 
> 时间：2013-03-25T13:14:47.530
> 
> 标签：websocket, mqtt

我正在尝试使用[mqttjs](https://npmjs.org/package/mqttjs)和 websockets，我希望能够使用 websockets 从网页发送消息，*而无需*桥接到由 mqttjs 运行的 MQTT 代理。如果这可用甚至可能，我找不到任何信息。

我看过 mosquitto，他们有“[实验性](http://test.mosquitto.org/ws.html)”websocket 支持，我很想找到一个可以提供相同功能的 Node.JS MQTT 代理。

到目前为止，我已经使用 pywebsocket 和 Socket.IO 进行了通信。如果可以在没有桥接的情况下使用 websockets 到 mqtt，我将非常感谢任何方向的指针。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-07T10:34:43.490

是老问题，但很高兴分享我的发现。您可以使用用 node.js 编写并使用 mqtt.js 的 mosca 代理 mosca 支持经典 mqtt 连接和 mqtt over WS： [MQTT-over-Websockets](https://github.com/mcollina/mosca/wiki/MQTT-over-Websockets)

Mosca 可以在两种模式下运行：独立和作为 node.js 模块。

一般来说，mosca 可以支持多种类型的代理： [Mosca-advanced-usage](https://github.com/mcollina/mosca/wiki/Mosca-advanced-usage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T21:04:46.320

[HiveMQ](http://www.hivemq.com)支持原生 websocket，这意味着您可以使用任何 Javascript MQTT 库（例如带有 websockets 的[Eclipse Paho.js。](http://www.eclipse.org/paho/)完全可以通过标准 TCP 连接连接一些客户端 vie websockets 和其他客户端。websocket 支持稳定并用于生产。

对您来说唯一的缺点可能是 HiveMQ 不是用 Node.JS 编写的。

披露：我是 HiveMQ 的开发人员之一。

# facebook - 如何将初始内容填充到 Facebook 链接（如果可以）？

> ID：15615894
> 
> 赞同：0
> 
> 时间：2013-03-25T13:15:01.183
> 
> 标签：facebook, facebook-javascript-sdk, social-networking

在我的网站上，我只是添加了在 Facebook 上讨论帖子的链接；[您可以在http://jonathanscorner.com/steel/](http://jonathanscorner.com/steel/)看到这样的链接。该链接重定向到[https://www.facebook.com/pages/CJS-Hayward/9506801167](https://www.facebook.com/pages/CJS-Hayward/9506801167)，它允许人们发布但最初是空的。

如果可能的话，我想创建一个链接，预先填充评论的文本，以包括我网站上的标题和 URL。因此，单击该链接的人会发布一个预先填充的帖子，“我刚刚在[http://JonathansCorner.com/steel/](http://JonathansCorner.com/steel/)完成了“钢球内” 。'''

是否有一些 URL 参数我可以使用 ('''...?text=I%20just%20finished...''') 或其他接口在 JavaScript 生成的链接中预填充评论？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:18:01.167

简短的回答，你不能。即使使用提要对话框，您也无法使用一些预定义的文本预先填充评论区域。您可以做的是，使用提要对话框让人们写下他们的评论，然后将该提要的连接重定向到您的网站。

唯一的问题是这个提要对话框会出现在用户提要上，而不是出现在您的页面墙上。

另一种方式，我认为这是最好的选择，将评论社交插件添加到您的网站，这样人们就会在您的页面上讨论该文章，并且每次他们使用此社交插件发表评论时，评论都会出现在他们的 Facebook 墙上让他们的朋友对此感到好奇，并可能访问您的网站。

您可以在此处阅读更多相关信息：[https ://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

# php - .htaccess 的 PHP 正则表达式

> ID：15615897
> 
> 赞同：0
> 
> 时间：2013-03-25T13:15:16.267
> 
> 标签：php, regex, .htaccess, rest

假设我有一个页面 testpage.php 并且我想通过 localhost/testpage 访问它。我无法弄清楚正则表达式让它工作。

当我使用以下内容时，出现服务器错误

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule .* "^[^0-9][A-z0-9_]+*.php"/$0 
```

但是，当我指定它工作的确切文件时。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule .* testpage.php/$0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:17:52.943

尝试这个：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [NC,L] 
```

第三行在进行重写之前检查文件是否确实存在以避免错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:19:51.393

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php$
RewriteRule ^(.*)$ $1.php [L] 
```

它将用 .php 扩展名重写文件名

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:22:25.807

您不能在替换模式中指定正则表达式。这就是它失败的原因。在这一行

```
RewriteRule .* "^[^0-9][A-z0-9_]+*.php"/$0 
```

您告诉 Apache 将任何 ( `.*`) 重写为文字`"^[^0-9][A-z0-9_]+*.php"/`，加上第零个匹配的字符串（无论如何这是一个错误，因为匹配从 $1 开始，然后是 $2 等）。

如果要捕获匹配项，则必须用括号括起来，例如

```
(.*) 
```

然后它将在替换字符串中作为`$1`.

# scala - 喷雾路由、控制器和 DAO——应该创建期货？

> ID：15615906
> 
> 赞同：1
> 
> 时间：2013-03-25T13:15:28.707
> 
> 标签：scala, future, spray

我正在使用喷雾路由。我的路由器调用控制器，控制器调用 DAO。哪个应该创建返回到喷罐服务器的期货？我的想法是：

*   DAO 应该返回 Futures，因为这是长时间运行的操作（数据库查询）发生的地方
*   路由器应该创建 Futures，以便在创建时留下最大的灵活性

在后一种情况下，可能有一个future 可以进行多个数据库查询，而不必将它们链接起来。

想法？

# javascript - Windows Store App 购买客户信息

> ID：15615907
> 
> 赞同：0
> 
> 时间：2013-03-25T13:15:34.363
> 
> 标签：javascript, windows-8, microsoft-metro, windows-runtime, windows-store-apps

我有一个 Windows 应用商店应用程序，我想为它建立一个网站，但我如何知道谁从 Windows 8 应用程序商店购买了我的应用程序？

我的应用不进行应用内购买，我不使用任何其他第三方支付系统。我只使用 Windows 应用商店，所以我不确定。我了解我们仅限于向我们透露的信息类型，但如果，例如，我的网站提供额外服务，他们可以在我的网站上注册并登录使用，对于付费用户，我怎么知道他们购买了我的应用程序？我没有看到任何相关的 API 或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:52:04.997

您应该使用 LicenseInformation 类的[isActive 属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.licenseinformation.isactive.aspx)来判断您的应用程序是否已被购买。

# yii - 在 yii 中如何根据下拉选择执行动态验证

> ID：15615915
> 
> 赞同：0
> 
> 时间：2013-03-25T13:15:59.653
> 
> 标签：yii

大家好，谢谢阅读。

我做一个网站只是为了好玩和学习 yii。该网站是一个可用于举报盗版链接的应用程序。

我有一个输入字段，我在其中提供了一个链接，然后我有一个下拉菜单，您可以从中选择要提交的链接类型。根据您选择的值，我希望对提交的链接执行不同的验证规则。如果我的解释不清楚，请随时访问 www.youtubetv.it，在主页上您会看到一个输入字段和一个下拉菜单。

代码如下；

```
 <div class="span4">
    <div class="input-prepend"><span class="add-on" style="height: 50px;">
            <i class="icon-4x icon-globe" style="line-height: 54px;"></i></span>
        <?php
        echo $form->textField($model, 'link', array(
            'prepend' => '<i class="icon-4x icon-globe" style="line-height: 54px;"></i>',
            'class' => 'span12', 'maxlength' => 999,
            'style' => 'height:60px;font-size: 22px;width: 400px;',
        ));
        ?>

    </div>
</div>
<div class="span4 offset1">
    <?php
    echo $form->dropDownList($model, 'category', CHtml::listData(Lookup::model()->findAll('type="kind"'), 'code', 'name'), array(
        'prompt' => 'Select Type',
        'class' => 'span12',
        'style' => 'height:60px;font-size: 22px;',
    ));
    ?>
</div> 
```

模型中的当前验证规则

```
public function rules() {
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('category, link', 'required'),
        array('id_user', 'numerical', 'integerOnly' => true),
        array('link', 'length', 'max' => 999),
        array('link', 'url',
            'allowEmpty' => false,
            'defaultScheme' => null,
            //'pattern' => 'esspressione regolare',
            'message' => 'The specified model does not exist.',
            'validSchemes' => (array('http', 'https'))
        ),
        array('category, web_page', 'length', 'max' => 255),
        array('creation_date', 'default',
            'value' => new CDbExpression('NOW()'),
            'setOnEmpty' => false,
            'on' => 'insert'),
        array('id_public_link, category, id_user, link, creation_date', 'safe', 'on' => 'search'),
    );
} 
```

如果有人可以向我展示一个示例，如果有人从下拉列表中选择电影，我将如何验证“url”，我将不胜感激。

如果我不清楚，请随时要求澄清

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:01:32.003

Yii 有所谓的验证规则*场景*，您需要添加带有您喜欢的任何场景名称的“on”键作为您想要的规则中的值。然后将模型的场景设置为 $model->scenario = 'Your scenario'; 例如

```
public function rules() {
// NOTE: you should only define rules for those attributes that
// will receive user inputs.
return array(
    array('category, link', 'required'),
    array('id_user', 'numerical', 'integerOnly' => true),
    array('link', 'length', 'max' => 999),
    array('link', 'url',
        'allowEmpty' => false,
        'defaultScheme' => null,
        //'pattern' => 'esspressione regolare',
        'message' => 'The specified model does not exist.',
        'validSchemes' => (array('http', 'https')),
        'on'=>'urlcheck'
    ),
    array('category, web_page', 'length', 'max' => 255),
    array('creation_date', 'default',
        'value' => new CDbExpression('NOW()'),
        'setOnEmpty' => false,
        'on' => 'insert'),
    array('id_public_link, category, id_user, link, creation_date', 'safe', 'on' => 'search'),
    );
} 
```

然后在您的操作中使用：

```
...
$type = isset($_POST['Lookup']['type'])?$_POST['Lookup']['type']:false;
if($type === '1') //as I assume from your website '1' is a Movie
    $model->scenario = 'urlcheck';
... 
```

顺便说一句，正如您所看到的，您的规则中已经有一个关于“creation_date”属性的场景。场景“插入”是新记录的默认场景。Yii 中有更多默认场景，你可以在[这里学习](http://www.yiiframework.com/wiki/266/understanding-scenarios/)

# android - 在可拖动的网格视图或绘图画布的视图中添加子视图，而不创建位图图像

> ID：15615917
> 
> 赞同：1
> 
> 时间：2013-03-25T13:16:16.493
> 
> 标签：android, gridview, drag-and-drop, android-canvas

我正在使用`draggable gridview`，我必须在gridview中以编程方式添加子视图，我尝试了`addView()`方法和其他`Draw(Canvas)`方法来添加，但它不起作用。

请帮助我，如何添加`subview`每个`view`.`draggable grid view`

```
String color ="null";
                try
                {
                    word=inCartSongTitleList.get(i).toString();
                    color=inCartColor_List.get(i).toString();
                    time="00.00";
                    if(word.equals("null"))
                    {
                        word="";
                    }
                }
                catch(Exception e)
                {
                    word="ERROR";
                    Log.e("",""+e+"");
                }

                //ImageView view = new ImageView(CartActivity.this);

                LinearLayout view = new LinearLayout(CartActivity.this);
                LinearLayout.LayoutParams trparams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
                view.setLayoutParams(trparams);
                TextView txt=new TextView(CartActivity.this);

                txt.setText("Mikin");
                txt.setTextColor(Color.parseColor("#ffffff"));

                Canvas canvas = new Canvas();
                Paint paint = new Paint();
                paint.setColor(Color.BLACK);
                paint.setTextAlign(Paint.Align.CENTER);
                canvas.drawText("Mikin",50,50,paint);

                //ImageView view = new ImageView(CartActivity.this);
                //view.setBackgroundResource(R.drawable.sound);
                view.draw(canvas);
                //view.setBackgroundColor(Color.parseColor("#ffffff"));

                if(String.valueOf(color).equals("0"))
                {
                    //view.setBackgroundColor(Color.parseColor("#768CA7"));
                    view.setBackgroundColor(Color.parseColor("#768CA7"));
                    //view.setImageBitmap(getThumb(word,"#768CA7",time));
                }
                else if(color.equals("null"))
                {
                    view.setBackgroundColor(Color.parseColor("#768CA7"));
                    //imageView.setBackgroundColor(Color.parseColor("#768CA7"));
                    //view.setImageBitmap(getThumb(word,"#768CA7",time));               
                }
                else if(color!=null)
                {
                    view.setBackgroundColor(Color.parseColor(color));
                    //imageView.setBackgroundColor(Color.parseColor(color));
                    //view.setImageBitmap(getThumb(word,color,time));
                }
                //view.addView(imageView);
                draggableGrid.addView(view); 
```

# jsf - 如何更新 PrimeFaces 中的 LayoutUnit 以使其呈现？

> ID：15615921
> 
> 赞同：1
> 
> 时间：2013-03-25T13:16:22.863
> 
> 标签：jsf, layout, primefaces

我的 xhtml 中有一个 fullPage 布局，其中一个用于菜单的西方布局单元和一个用于内容的中心布局单元。

我已经实现了几个居中定位的layotUnits，我想根据选择的menuItem 来渲染它们。

当我运行应用程序时，它不会刷新 layoutUnit，直到我在浏览器中单击刷新（IE8 - 公司标准）。

xhtml如下：

```
<h:body>
   <h:form>
      <p:layout fullPage="true" id="allLayout">

        <p:layoutUnit position="west" header="Menu" collapsible="true">
           <p:menu>
              <p:submenu label="Resources">
                 <p:menuitem value="Option1" action="#{menu.setSelectedMenu(menu.OPT1)}" update="allLayout"/>
                 <p:menuitem value="Option2" action="#{menu.setSelectedMenu(menu.OPT2)}" update="allLayout"/>
              </p:submenu>
          </p:menu>
        </p:layoutUnit>

        <p:layoutUnit position="center" rendered="#{menu.selectedMenu == menu.OPT1}">
           <p:outputLabel value="This is the content option 1 (default)."/>
        </p:layoutUnit>         

        <p:layoutUnit position="center" rendered="#{menu.selectedMenu == menu.OPT2}">
           <p:outputLabel value="This is the content option 2."/>
        </p:layoutUnit>

      </p:layout>
   </h:form>
</h:body> 
```

它的 bean 是：

```
@ManagedBean
@SessionScoped
public class Menu {

   private final int OPT1 = 1;
   private final int OPT2 = 2;
   private int selectedOption;

   public Menu() {
      selectedMenu = OPT1;
   }

   public int getSelectedOption() {
      return selectedOption;
   }

   public void setSelectedOption(int selectedOption) {
      this.selectedOption = selectedOption;
   }

   public int getOPT1() {
      return OPT1;
   }

   public int getOPT2() {
      return OPT2;
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:21:40.747

我认为您不想创建多个中心布局单元。我认为使用单个布局单元并更改该单个单元内的内容会更好。根据您在做什么，您可能希望为该单元使用一些模板。我会说，您最好的方法可能是将您的不同内容放在面板上，然后将它们包装在您将更新的父面板中以显示您想要的内容。

```
 <p:layout fullPage="true" id="allLayout">
        <p:layoutUnit position="west" header="Menu" collapsible="true">
            <p:menu>
                <p:submenu label="Resources">
                    <p:menuitem value="Option1"
                        action="#{menu.setSelectedMenu(menu.OPT1)}" update="optionPanel" />
                    <p:menuitem value="Option2"
                        action="#{menu.setSelectedMenu(menu.OPT2)}" update="optionPanel" />
                </p:submenu>
            </p:menu>
        </p:layoutUnit>

        <p:layoutUnit position="center">
            <p:panel id="optionPanel">
                <p:panel id="opt1Panel" rendered="#{menu.selectedMenu == menu.OPT1}">
                    <p:outputLabel value="This is the content option 1 (default)." />
                </p:panel>

                <p:panel id="opt2Panel"
                    rendered="#{menu.selectedMenu == menu.OPT2}">
                    <p:outputLabel value="This is the content option 2 (default)." />
                </p:panel>
            </p:panel>

        </p:layoutUnit>
    </p:layout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T18:03:10.893

修改这部分：

```
<p:layoutUnit position="west" header="Menu" collapsible="true">
       <p:menu>
          <p:submenu label="Resources">
             <p:menuitem value="Option1" action="#{menu.setSelectedMenu(menu.OPT1)}"       
              update="allLayout" ajax="false"/>
             <p:menuitem value="Option2" action="#{menu.setSelectedMenu(menu.OPT2)}" 
              update="allLayout" ajax="false"/>
          </p:submenu>
      </p:menu>
    </p:layoutUnit> 
```

# c++ - Visual Studio 中的错误消息后面的消息是什么意思？

> ID：15615923
> 
> 赞同：0
> 
> 时间：2013-03-25T13:16:33.080
> 
> 标签：c++, visual-studio-2012

所以我正在创建一个多线程 C++ 程序，它返回这个错误：

> HANASimulationSync.exe 中 0x77e915de 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000020。

顺便说一句，当我在单个线程中运行此代码时，它不会返回任何错误。我只想知道这是什么错误？它与内存管理有关吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T13:18:11.663

这意味着您试图从无效的内存位置读取。在这种情况下，位置是`0x00000020`。由于这只是零以上的一个小偏移量，因此您似乎可能正在取消引用来自空指针的偏移量。

因此，查看此类内容的一种常见方法是，如果您有一个成员位于 offset 的结构`0x20`。然后，如果您尝试从指向指针为空的结构的指针中读取该成员。使用空指针对数组进行索引也会出现同样的错误。我想你现在明白了。

其他相关信息是导致故障的代码地址。在你的例子中是`0x77e915de`. 如果您将链接器配置为生成完整的图像映射，您将能够识别导致错误的代码行。更好的是，如果您生成调试信息，那么您可以附加一个调试器。

一般而言，这种错误称为[分段错误](http://en.wikipedia.org/wiki/Segmentation_fault)、访问冲突或保护错误。这些术语的意思都是一样的。

# joomla - 未找到 JControllerLegacy，joomla 2.5，yoothemes zoo

> ID：15615931
> 
> 赞同：1
> 
> 时间：2013-03-25T13:17:04.813
> 
> 标签：joomla, joomla2.5

我已经安装了`yoothemes zoo 3.11`。安装的消息表明一切正常，但是当我转到组件时，我收到以下错误：

> 致命错误：在第 17 行的 /home/p446072r/public_html/administrator/components/com_zoo/framework/classes/controller.php 中找不到类“JControllerLegacy”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T13:32:44.287

JControllerLegacy 类是在 Joomla 2.5.6 中添加的。升级到那个，你会没事的。如果您无法升级，您也可以自己定义类，因为它们只是扩展 JController 的外壳。但是，推荐的方法是至少升级到 2.5.6。

# hibernate - 与外键相关的 Hibernate Mapping 异常

> ID：15615938
> 
> 赞同：0
> 
> 时间：2013-03-25T13:17:23.560
> 
> 标签：hibernate, exception, mapping, foreign-key-relationship

我的休眠映射有问题。我有三个文件，每个文件都是一个休眠类的映射：

*   Proyectos.hbm.xml：Proyectos 类
*   UnidadesEmpresa.hbm.xml：UnidadesEmpresa 类
*   CliUniEmps.hbm.xml；CliUniEmp 类

我有一个与最后一个有关的问题。它的代码是这样的：

```
<hibernate-mapping>
    <class name="com.dmsti.dominio.CliUniEmp" table="clientes_uniemps"  lazy="false" catalog="dms_hrm">
        <id name="id" type="java.lang.Integer">
            <column name="id" />
            <generator class="identity" />
        </id>

        <many-to-one name="cliente" entity-name="com.dmsti.dominio.Cliente"
        column="cliente_id" unique="false" not-null="false" />

        <many-to-one name="unidadEmpresa" entity-name="com.dmsti.dominio.UnidadEmpresa"
        column="uniemp_id" unique="false" not-null="false" />

    </class>
</hibernate-mapping> 
```

所有文件都通过**hibernate.cfg.xml**正确关联，并且它们通常都可以正常工作。现在让我深入解释一下我目前的问题。

在我的 Hibernate 文件**Proyectos.hbm.xml**中，我引用了一个名为**cliUniEmp**的实体，该实体在 CliUniEmps.hbm.xml 中定义如下（其表为 clientes_uniemps）。

**代码 1。**

```
 <many-to-one name="cliUniEmp" entity-name="com.dmsti.dominio.CliUniEmp"
     column="cli_uniemp_id"  unique="false" not-null="false" /> 
```

在**UnidadesEmpresa.hbm.xml**中有另一个对同一个表的引用。

**代码 2。**

```
 <set name="clientes" table="clientes_uniemps"   catalog="dms_hrm"
         inverse="false" lazy="false" fetch="select" cascade="all" >
        <key>
            <column name="uniemp_id" not-null="true" />
        </key>
        <many-to-many entity-name="com.dmsti.dominio.Cliente">
            <column name="cliente_id" not-null="true" />
        </many-to-many>
         </set> 
```

当只有其中一个存在时，这两个代码都可以正常工作。**如果我从UnidadesEmpresa.hbm.xml**中删除集合“clientes”（代码 2）， 那么*多对一*实体“cliUniEmp”（代码 1）可以正常工作。同样，如果我删除代码 1，那么代码 2 可以完美运行。

如果两者同时在我的应用程序中，Hibernate 会启动一个异常：

> org.hibernate.MappingException: 外键 (FKE442A80E4FB5975E:proyectos [cli_uniemp_id])) 必须具有与引用的主键相同的列数 (clientes_uniemps [uniemp_id,cliente_id])

我被卡住了！拜托，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:42:26.067

您在`clientes_uniemps`.

以这种方式考虑您的对象模型：三个实体`CliUniEmp`、`Proyecto`和`UnidadesEmpresa`。这三个中的每一个都应该有自己的表。然后是它们之间的关系：`CliUniEmp`N<->N `UnidadedEmpresa`，`CliUniEmp`1<->N `Proyecto`。

这两种关系都需要一种将一个实体的 ID 映射到另一个实体的 ID 的方法。对于 1<->N 的关系，`Proyecto`表中可以直接包含 ID 就可以了`CliUniEmp`。

对于 N<->N，你不能这样做。必须有一个包含ID*对的中间表。*元素中的`table`属性定义了该表的名称。[你可以在Hibernate docs](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#collections-bidirectional)中阅读到这一点，他们说：`set``UnidadesEmpresa.hbm.xml`

> 您还必须使用 @JoinTable 注释来描述关联表和连接条件。

您的具体问题是您为实体**和**关系表使用了*相同的表名。*他们必须不同。更改关联表的名称或实体表的名称，就可以了。`CliUniEmp`

# javascript - 当我使用 iOS 的 Web Logger 时，Javascript 中没有定义方法

> ID：15615940
> 
> 赞同：0
> 
> 时间：2013-03-25T13:17:27.540
> 
> 标签：javascript, ios, logging

当我尝试将日志转储到网页时，这真的很奇怪。

我有一个带有 Web 插件的基本应用程序（在 xcode 中），它允许我将日志从 iPhone 拉到网页。

但是，不知何故，当我尝试调用放置在其他 js 文件中的方法时，我得到：*"method" is not defined*。

xcode-Web 结构：

![在此处输入图像描述](../Images/891e8f93ce0417b5ee5bd07b2bf0de30.png)

socket.html 的片段：

```
 <script type="text/javascript" src="src/js/script.js"></script>

    <script type="text/javascript">

        $(document).ready(main);

        // Run when document.ready fires
        function main() {

            $('#btnClear').click(function() {

                clearTable();
            }); 

        }
 ....
 </script> 
```

`clearTable`is 方法定义在文件中，`src/js/script.js`我知道它已加载，因为`onLoad`方法已调用。

script.js 的片段：

```
$(function() {

   ....

  function onLoad(){
    ....
   }

   function clearTable(){
    ....
    }

onLoad();
}); 
```

有人知道原因吗？

我将这个项目处理到 linux 并且一切正常。所有的依赖都很好。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:21:40.887

这是由于范围问题，`clearTable`在匿名函数中定义，因此它仅在该范围内可用。

您正在尝试从另一个不可用的范围调用它。

解决办法是在全局范围内定义clearTable。前任

```
$(function() {

    // ....

    function onLoad() {
        // ....
    }

    window.clearTable = function() {
        // ....
    }

    onLoad();
}); 
```

问题：[小提琴](http://jsfiddle.net/arunpjohny/HZyfA/)
解决方案：[小提琴](http://jsfiddle.net/arunpjohny/HZyfA/1/)

另一种解决方案

```
var clearTable, isAutoScroll; //Declare these as global variables
$(function() {

    // ....

    function onLoad() {
        // ....
    }

    //note this is a function variable and there is no `var`
    clearTable = function() {
        // ....
    }

    //note there is not `var` used while defining the variable
    isAutoScroll = false;

    onLoad();
}); 
```

# regex - Vi 编辑器：在具有相同空格数的模式上方插入换行符

> ID：15615942
> 
> 赞同：0
> 
> 时间：2013-03-25T13:17:32.477
> 
> 标签：regex, vim, vi

```
if (BT_IS_SUCCESS(xCode))
        {                
          if (!(BT_IS_SUCCESS(xCode)))
          {
             else
           {
             if ()
             {

             }
           }
          }
        } 
```

我试图在预期代码库中的每个 if - 语句之前插入换行符。每当我使用 \r 插入换行符时，空格都不会保留。

我目前正在使用

```
:1,$ g/;\nif (

:%s//;\r\rif 
```

这里插入了换行符，但要保留相同数量的空格，哪些选项是可用的。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:40:20.757

这有帮助吗？

```
:g/if (/normal O 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:40:50.593

如果你想转这个：

```
function dummy() {
  if (true) {
    return true;
  else {
    return false;
  }
  if (true) {
    return true;
  else {
    return false;
  }
} 
```

进入那个：

```
function dummy() {

  if (true) {
    return true;
  else {
    return false;
  }

  if (true) {
    return true;
  else {
    return false;
  }
} 
```

一种解决方案是：

```
:g/if (/norm! O 
```

或者你可以这样做：

```
:g/if (/put!='' 
```

# jsf - java.lang.IllegalStateException：WEB9031：WebappClassLoader 无法加载资源 [org.apache.xerces.impl.dv.dtd.DTDDVFactoryImpl]

> ID：15615944
> 
> 赞同：1
> 
> 时间：2013-03-25T13:17:36.280
> 
> 标签：jsf, exception, glassfish

在（重新）部署应用程序时，我从 GlassFish 收到此错误：

```
com.sun.faces.config.ConfigurationException:
java.util.concurrent.ExecutionException:
org.apache.xerces.impl.dv.ObjectFactory$ConfigurationError: Provider org.apache.xerces.impl.dv.dtd.DTDDVFactoryImpl could not be instantiated: 
java.lang.IllegalStateException: WEB9031: WebappClassLoader unable to load resource [org.apache.xerces.impl.dv.dtd.DTDDVFactoryImpl], because it has not yet been started, or was already stopped 
```

我停止了 GlassFish，清理并构建了应用程序，部署了应用程序，这就是结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:21:44.817

奇怪的是，我不得不取消部署另一个项目，该项目有一个 xercesImpl.jar 作为库和我试图部署的应用程序，甚至在没有警告的情况下部署......显然 GlassFish 有它自己的 XML 解析器，当它检测到其他 XML 时它会发生冲突-解析器。

# jquery - 衡量和比较自有服务器和 CDN 之间的差异

> ID：15615947
> 
> 赞同：1
> 
> 时间：2013-03-25T13:17:47.623
> 
> 标签：jquery, performance, google-analytics, google-cdn

我一直在为自己的 jquery.js 提供服务，最近偶然发现了使用 google 的 CDN 的想法。

由于它宣传的原因，我对切换到它非常感兴趣，但我也想衡量它的价值。（如果有人想知道为什么，我的网站的流量人口主要由发展中国家组成，那里的基础设施往往缺乏完整性和成熟度（例如，我自己的服务器可能更接近最接近大多数访问者的 CDN 服务器？？），以及性能研究在哪里报告在抽样中往往会被忽视（例如，如果有人说 CDN 效果很好但从未在 56k 拨号连接上测试过，那将是无效的结论）

所以我的问题是，我可以测量下载的平均时间还是`http://mydomain.com/jquery.js`使用`<whatevercdnurl>/jquery.js`分析跟踪它们？
另外我不能异步加载这个脚本（我不介意）所以我希望提交手动测量的时间信息..

具体来说，以下测试方法是否有效？（使用 Google CDN 对 jquery-1.8.0 网址进行 A/B 测试）

```
<script type="text/javascript">before = new Date().getTime();</script>
<script type="text/javascript" src='/jquery-1.8.0.min.js'></script>
<script type="text/javascript">
  after = new Date().getTime();
  timeSpent = after - before;
  // Google Analytics _trackTiming call
</script> 
```

感谢您的细读，任何帮助表示赞赏！

# performance - SqlAlchemy - 当我迭代一个查询时，我得到一个列表还是一个迭代器？

> ID：15615949
> 
> 赞同：1
> 
> 时间：2013-03-25T13:17:48.490
> 
> 标签：performance, memory, sqlalchemy

我开始学习如何使用 SQLAlchemy，但遇到了一些效率问题。

我在我们的 Oracle 数据库上创建了一个映射现有大表的对象：

```
engine = create_engine(connectionString, echo=False)

class POI(object):
    def __repr__(self):
        return "{poi_id} - {title}, {city} - {uf}".format(**self.__dict__)

def loadSession():
    metadata = MetaData(engine)
    _poi = Table('tbl_ourpois', metadata, autoload = True)
    mapper(POI, _poi)
    Session = sessionmaker(bind = engine)
    session = Session()
    return session 
```

该表有数百万个注册表。当我做一个简单的查询并尝试迭代它时：

```
 session = loadSession()
 for poi in session.query(POI):
     print poi 
```

我注意到两件事：（1）它需要几分钟才能开始在屏幕上打印对象，（2）内存使用量开始疯狂增长。所以，我的结论是这段代码获取了列表中的所有结果集，然后对其进行迭代。这个对吗？

使用`cx_Oracle`，当我执行如下查询时：

```
conn = cx_Oracle.connect(connectionString)
cursor = conn.cursor()
cursor.execute("select * from tbl_ourpois")
for poi in cursor:
    print poi 
```

生成的游标表现为一个迭代器，它将结果放入缓冲区并在需要时返回它们，而不是将整个事物加载到列表中。该循环几乎立即开始打印结果，并且内存使用率非常低且恒定。

我可以通过 SQLAlchemy 获得这种行为吗？有没有办法从`session.query(POI)`列表中获取常量内存迭代器？

# sql - SQL server - 获取数据库元数据的权限

> ID：15615950
> 
> 赞同：0
> 
> 时间：2013-03-25T13:17:49.143
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的用户需要哪些最低权限才能从数据库中获取元数据（表、列、过程等的名称）？

我需要选择：

*   [数据库].sys.objects
*   [数据库].sys.schemas
*   [数据库].sys.extended_properties
*   [数据库].sys.sql_modules
*   [数据库].information_schema.columns

**db_datareader**没问题，但我需要最低权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:28:01.403

为了让用户只查询对象的元数据，只需给他 VIEW ANY DEFINITION 权限，如下所述：http: [//msdn.microsoft.com/en-us/library/ms175808 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms175808(v=sql.105).aspx)

# grails - 在 birt-report 插件中运行时，BIRT 报告不会打印 dataSetRow["name"] 值

> ID：15615955
> 
> 赞同：0
> 
> 时间：2013-03-25T13:18:03.307
> 
> 标签：grails, birt

我创建了一个简单的 BIRT 报告，它使用两个不同的 DataSet 从两个 DB 表中选择数据。它还有两个传递给 DataSet 查询的参数。

我的问题是，当我从 Eclipse+BIRT 环境运行报告时，它会按原样获取所有数据，但是当我从 Grails birt-report 服务运行报告时，它只打印静态骨架，而不是来自D B。

首先，我认为我传递给服务的参数值有问题，所以我在报告中添加了一行来打印这些值。参数已按应有的方式传递和打印。
然后我从查询中删除了*where*部分，但仍然没有任何反应。从 Eclipse 运行时会填写报告，在*birt-report*插件中运行时报告为空。

这是我用来打印报告的代码：

```
 params.remove('action')
    params.remove('controller')
    params.remove('name')

    params.put("userId", 10)   //parameter that should be passed
    params.put("resumeId", 5)  //parameter that should be passed

    println params;

    def options = birtReportService.getRenderOption(request, 'doc')
    def result=birtReportService.runAndRender(reportName, params, options)
    response.setHeader("Content-disposition", "attachment; filename=" +reportName + "."+reportExt);
    response.contentType = 'application/doc'
    response.outputStream << result.toByteArray() 
```

任何想法可能是什么原因？

UPD：我怎样才能调试它以查看里面到底发生了什么？

UPD 2：看起来它与应用程序有关，因为当我在新的 Grails 应用程序中启动报告时，它工作正常。

我在查看调试日志时发现成功和失败启动之间的唯一区别是：

**我的应用程序日志：**

```
[26/03/2013 13:12:36,909] [org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery] [219] 条目 org.eclipse.birt.data.engine.impl.DataEngineImpl@1ed14cb8 org.eclipse。 birt.data.engine.api.querydefn.QueryDefinition@729b6def org.eclipse.birt.data.engine.impl.OdaDataSetAdapter@200ecb05 {org.eclipse.datatools.connectivity.oda.util_consumerResourceIds=org.eclipse.datatools.connectivity.oda .util.ResourceIdentifiers@2b32c5b4, OdaJDBCDriverPassInConnection=来自数据源的目标连接的事务感知代理 [org.apache.commons.dbcp.BasicDataSource@39547eb6], HTML_RENDER_CONTEXT=org.eclipse.birt.report.engine.api.HTMLRenderContext@1251c294, org.eclipse.birt.data.query.ResultBufferSize=100}
[26/03/2013 13:12:36,909] [org.eclipse.birt.data.engine.impl.DataEngineImpl] [219] PreparedQuery 启动。
[26/03/2013 13:12:36,909] [org.eclipse.birt.data.engine.impl.aggregation.AggregateTable] [219] 条目
[26/03/2013 13:12:36,909] [org.eclipse.birt.data.engine.impl.aggregation.AggregateTable] [219] 返回
[26/03/2013 13:12:36,909] [org.eclipse.birt.data.engine.impl.aggregation.AggregateTable] [219] 条目 C:\Users\SZAGOR~1\AppData\Local\Temp\DataEngine_517033144_2\ [对象对象] []
[26/03/2013 13:12:36,909] [org.eclipse.birt.data.engine.impl.aggregation.AggregateTable] [219] 返回
[26/03/2013 13:12:36,909] [org.eclipse.birt.data.engine.impl.DataEngineImpl] [219] 开始准备 PreparedQuery。
[26/03/2013 13:12:36,909] [org.eclipse.birt.data.engine.impl.aggregation.AggrRegistry] [219] ENTRY 0 -1 true org.eclipse.birt.core.script.ScriptContext@57b32816
[26/03/2013 13:12:36,909] [org.eclipse.birt.data.engine.impl.aggregation.AggrRegistry] [219] 返回

//这些行是可疑的
[26/03/2013 13:12:36,909][org.eclipse.birt.data.engine.expression.InvalidExpression] [219] InvalidExpression 启动
[26/03/2013 13:12:36,912] [org.eclipse.birt.data.engine.expression.InvalidExpression] [219] InvalidExpression 启动

[26/03/2013 13:12:36,912] [org.eclipse.birt.data.engine.impl.GroupBindingColumn] [219] ENTRY null 0 {first_name=org.eclipse.birt.data.engine.api.querydefn。 Binding@f6678eba, last_name=org.eclipse.birt.data.engine.api.querydefn.Binding@77fdce94, coalesce(resume.mobile_phone, "-")=org.eclipse.birt.data.engine.api.querydefn.Binding @9beadc7d}
```

**和新的应用程序日志：**

```
2013-03-26 12:51:08,352 [http-bio-8080-exec-1] 调试 impl.PreparedDataSourceQuery - 条目 org.eclipse.birt.data.engine.impl.DataEngineImpl@79bff971 org.eclipse.birt.data。 engine.api.querydefn.QueryDefinition@1799e2e2 org.eclipse.birt.data.engine.impl.OdaDataSetAdapter@1aec9361 {org.eclipse.datatools.connectivity.oda.util_consumerResourceIds=org.eclipse.datatools.connectivity.oda.util.ResourceIdentifiers @21bfd316，OdaJDBCDriverPassInConnection=来自数据源的目标连接的事务感知代理 [org.apache.commons.dbcp.BasicDataSource@38bb5aa9]，HTML_RENDER_CONTEXT=org.eclipse.birt.report.engine.api.HTMLRenderContext@143d2a58，org.eclipse。 birt.data.query.ResultBufferSize=100}
2013-03-26 12:51:08,352 [http-bio-8080-exec-1] 调试 impl.DataEngineImpl - PreparedQuery 启动。
2013-03-26 12:51:08,352 [http-bio-8080-exec-1] 调试聚合。聚合表-条目
2013-03-26 12:51:08,352 [http-bio-8080-exec-1] 调试聚合。聚合表-返回
2013-03-26 12:51:08,352 [http-bio-8080-exec-1] 调试聚合.AggregateTable - 条目 C:\Users\SZAGOR~1\AppData\Local\Temp\DataEngine_2042624369_1\ [对象对象] []
2013-03-26 12:51:08,352 [http-bio-8080-exec-1] 调试聚合。聚合表-返回
2013-03-26 12:51:08,352 [http-bio-8080-exec-1] 调试 impl.DataEngineImpl - 开始准备 PreparedQuery。
2013-03-26 12:51:08,362 [http-bio-8080-exec-1] DEBUG aggregation.AggrRegistry - ENTRY 0 -1 true org.eclipse.birt.core.script.ScriptContext@560fc912
2013-03-26 12:51:08,362 [http-bio-8080-exec-1] 调试聚合.AggrRegistry - 返回

// 这里不一样
2013-03-26 12:51:08,362 [http-bio-8080-exec-1] 调试表达式.ColumnReferenceExpression - ENTRY first_name
2013-03-26 12:51:08,362 [http-bio-8080-exec-1] 调试表达式.ColumnReferenceExpression - 返回
2013-03-26 12:51:08,362 [http-bio-8080-exec-1] 调试表达式。ColumnReferenceExpression - ENTRY last_name
2013-03-26 12:51:08,362 [http-bio-8080-exec-1] 调试表达式.ColumnReferenceExpression - 返回
2013-03-26 12:51:08,362 [http-bio-8080-exec-1] 调试表达式.ColumnReferenceExpression-条目合并（resume.mobile_phone，“-”）
2013-03-26 12:51:08,362 [http-bio-8080-exec-1] 调试表达式.ColumnReferenceExpression - 返回
2013-03-26 12:51:08,362 [http-bio-8080-exec-1] 调试 impl.GroupBindingColumn - ENTRY null 0 {first_name=org.eclipse.birt.data.engine.api.querydefn.Binding@f6678eba, last_name=org.eclipse.birt.data.engine.api.querydefn.Binding@77fdce94, coalesce(resume.mobile_phone, "-")=org.eclipse.birt.data.engine.api.querydefn.Binding@9beadc7d}
```

在这两种情况下都使用了相同的报告文件。

# sql-server - t sql 调用函数作为 while 参数

> ID：15615960
> 
> 赞同：1
> 
> 时间：2013-03-25T13:18:17.497
> 
> 标签：sql-server, tsql

是否可以在 T SQL 中使用函数作为 while 参数？我有以下代码：

```
 create function LoginExists (@p_login char(6))
returns varchar(5)
begin
    if exists(select * from Student where student.slogin = @p_login)
        return 'true'
        return 'false'
end; 
```

和

```
 create procedure AddStudent2
(@p_fname varchar(30), @p_lname varchar(50), @p_tallness int)
as
declare @p_login char(6), @p_email varchar(50), @suffix char(3);
set @p_lname = LOWER(@p_lname);
set @suffix = '000';
begin
    set @p_login = substring(@p_lname,1, 3) + @suffix;
    while (LoginExists @p_login = 'true')
        set @suffix = cast((CAST(@suffix as int) + 1) as char(3));
            set @p_login = substring(@p_lname,1, 3) + @suffix;
    set @p_email = @p_login + '@vsb.cz';
    insert into Student values (@p_login, @p_fname, @p_lname, @p_email, @p_tallness);
end; 
```

并且在尝试编译它时，会发生错误，说：“'@p_login' 附近的语法不正确。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:49:15.930

您调用函数的语法实际上是不正确的：

代替：

```
while (LoginExists @p_login = 'true') 
```

和：

```
while (dbo.LoginExists (@p_login)= 'true') 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T13:22:31.900

代替

```
if exists(select * from Student where student.slogin = @p_login) 
```

经过

```
 if exists(select * from Student where Student.slogin = @p_login) 
```

上“S” `student.slogin` ，我希望它有效

# c# - 工作单元内多条消息的相同 Rebus 处理程序实例

> ID：15615961
> 
> 赞同：3
> 
> 时间：2013-03-25T13:18:23.053
> 
> 标签：c#, rebus

我希望批量处理相关消息，例如使用 Rebus 服务总线在相同范围/事务中使用相同的处理程序（相同的实例）处理事件 CustomerCreated 和 PreferredCustomer。

同一个处理程序正在处理两个消息/事件：

```
class CustomerHandler : IHandleMessages<CustomerCreated>, IHandleMessages<PreferredCustomer>
{
    Customer Customer { get; set; }

    public CustomerHandler() {
        Customer = new Customer();
    }

    public void Handle(CustomerCreated message) {
        Customer.Name = message.Name;
        Console.WriteLine(Customer);
    }

    public void Handle(PreferredCustomer message) {
        Customer.Rebate = message.Rebate;
        Console.WriteLine(Customer);
    }
} 
```

发送消息时我使用批处理操作（在 NServiceBus 中传输消息）

```
bus.Advanced.Batch.Publish(
  new CustomerCreated() { Name = "Anders" }, 
  new PreferredCustomer() { Rebate = 10 }); 
```

为了控制处理程序的生命周期，我使用了[Windsor Castle 的 Scoped 生活方式](http://docs.castleproject.org/Windsor.LifeStyles.ashx#Scoped_7)

```
_container.Register(
  Component.For<IHandleMessages<CustomerCreated>, IHandleMessages<PreferredCustomer>>)
    .ImplementedBy<CustomerHandler>().LifestyleScoped()); 
```

以及实例化 ScopedUnitOfWork 的自定义 UnitOfWorkManager

```
class CustomUnitOfWorkManager : IUnitOfWorkManager
{
    private readonly IWindsorContainer _container;

    public CustomUnitOfWorkManager(IWindsorContainer container) {
        _container = container;
    }

    public IUnitOfWork Create() {
        return new ScopedUnitOfWork(_container);
    }
}

class ScopedUnitOfWork : IUnitOfWork
{
    private readonly IDisposable _scope;

    public ScopedUnitOfWork(IWindsorContainer container) {
        // Begin transaction
        _scope = container.BeginScope();

    }

    public void Dispose() {
        _scope.Dispose();
    }

    public void Commit() {
        // Commit transaction
        Console.WriteLine("Commiting");
    }

    public void Abort() {
        // Rollback transaction            
        Console.WriteLine("Aborting!!!");
    }
} 
```

最后将 Rebus 配置为使用 CustomUnitOfWorkManager

```
var bus = Configure.With(new WindsorContainerAdapter(_container))
  .Transport(t => t.UseMsmqAndGetInputQueueNameFromAppConfig())
  .MessageOwnership(d => d.FromRebusConfigurationSection())
  .Events(x => x.AddUnitOfWorkManager(new CustomUnitOfWorkManager(_container)))
  .CreateBus()
  .Start(); 
```

这是正确的方法吗？

我有限的测试表明这应该有效。我什至可以扩展它以包括针对 ScopedUnitOfWork 中的数据存储的事务管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:20:02.347

听起来你已经搞定了:)

如果你得到正确的提交/回滚行为，那么我会说它很好而且花花公子。

如果您对替代方案感兴趣，您可能想看看`PerTransportMessage`Castle Windsor 范围访问器 - 它可以像这样使用：

```
container.Register(
    Component
        .For<ISomething>()
        .ImplementedBy<Whatever>()
        .LifestyleScoped<PerTransportMessage>()
); 
```

这应该能够实现完全相同的行为。

# ide - Xamarin 工作室有宏录制器吗？

> ID：15615973
> 
> 赞同：1
> 
> 时间：2013-03-25T13:18:50.197
> 
> 标签：ide, code-editor, xamarin-studio

我在 Xamarin Studio 中找不到击键宏记录器，但它对于 IDE 来说是一个有用的功能（例如，编辑一些对齐的代码行）。它藏在哪里？

在相同的想法中，搜索有点基本，如果搜索仅与“完整单词”相关（因此表达式由符号/空格分隔），我可以在哪里设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:25:17.457

截至 2013 年 3 月 6 日，似乎没有按键宏支持 [http://forums.xamarin.com/discussion/1987/keystroke-macros-please](http://forums.xamarin.com/discussion/1987/keystroke-macros-please)

这篇文章谈到了代码片段，也许这对你有用？

马丁

# eclipse - Eclipse 插件开发：运行时缺少依赖项

> ID：15615977
> 
> 赞同：0
> 
> 时间：2013-03-25T13:18:56.633
> 
> 标签：eclipse, noclassdeffounderror

## 背景

我目前正在尝试扩展 Junit (org.eclipse.jdt) 以进行一些跟踪。因此，我创建了自己的插件项目，它（除其他外）提供了一个应该由 junit 运行时插件使用的类。

我已将我的项目设置为 junit 的依赖项，并且包含我的类的包在运行时选项卡的清单中列为“导出”。如果我将插件作为 Eclipse 应用程序运行，那么一切都会构建和启动。

## 问题

但是，如果在开始的 Eclipse 中我执行“以 Junit 身份运行”，我会收到关于我的班级的 NoClassDefFoundError。据我了解，这意味着在运行时我的类在启动的 Eclipse 中不可见。因此，我在运行时打印了类路径，并且像预期的那样，我的插件没有出现。

我是否必须将我的插件添加到 junit 插件的“运行时”设置中？在清单中，我的包在“导出 -> 添加”按钮下不可用。我尝试导入插件的 jar 并在此处手动配置这些导出，但这也无济于事。

我的思维过程有点卡在这种“运行中运行”配置中......欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:12:11.827

深入研究代码，我发现错误的原因是，调用我的代码并引发错误的部分是在一个单独启动的 VM 中运行的，该 VM 通过代码设置了其类路径。配置没有问题，只是在这种情况下没有使用。

因此，如果您在遇到类路径问题时偶然发现“VMRunnerConfiguration”，这可能是您的问题。;)

# excel - Excel - 屏幕更新时屏幕闪烁

> ID：15615978
> 
> 赞同：4
> 
> 时间：2013-03-25T13:19:01.333
> 
> 标签：excel, vba

我从“停止 excel 屏幕闪烁”的长系列中得到了另一个问题，但我认为这个问题有点棘手。

我有一个客户在宏执行期间需要在他的电子表格上显示一个“进度”栏。我所做的是，我有一个饼图链接到 2 个单元格，我会根据进度进行调整。为了性能，我禁用了`events`，`ScreenUpdating`并更改了`calculation to manual`.

然后，偶尔我会快速切换`ScreenUpdating on and off`到实际更新进度表。每次我使用它时，这就像一个魅力（现在有 30 多个项目）。

最近，客户带着一个“大”问题来找我。每当我进行快速切换以刷新进度表时，整个 Excel 屏幕（包括上面的所有项目）都会闪烁，这让这家伙发疯了。

有没有人知道可以做些什么来保持图表更新，同时保持首页不断显示（页面之间的宏跳转）而没有屏幕闪烁？像双缓冲之类的东西......

**解决方案**

信不信由你，但我刚刚找到了解决方案。这太容易了。在 VBA 中，可以仅刷新特定对象，而其余屏幕保持“锁定”状态。例如：

```
ThisWorkbook.Worksheets("Welcome").ChartObjects(1).Chart.Refresh 
```

谢谢大家的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:43:38.343

您可以重写宏，使其不会“在页面之间跳转”（因为通常不需要`activate`工作表来操作其数据。否则，用户表单或应用程序`StatusBar`可用于显示进度酒吧：

```
Sub StatusBar()
Dim pct As Double
Dim msg as String
Application.ScreenUpdating = False
For i = 10000 To 1 Step -1
    pct = (10000 - i) / 10000
    msg = Format(pct, "0.0%")  & " complete"
    Application.StatusBar = msg

Next
Application.StatusBar = False
Application.ScreenUpdating = True
End Sub 
```

这是用户窗体的修改示例。请注意，您需要添加 UserForm 模块和至少一个 Label 以显示信息：

```
Sub StatusBar()
Dim pct As Variant
DoEvents
UserForm1.Show vbModeless

Application.ScreenUpdating = False
For i = 10000 To 1 Step -1
    pct = (10000 - i) / 10000
    If Int((i / 10000) * 100) = (i / 10000) * 100 Then
        msg = Format(pct, "0%")
        UserForm1.Label1 = msg & " complete"
    End If
Next
UserForm1.Label1 = "Finished!"
Application.ScreenUpdating = True
End Sub 
```

问题可能是，根据宏执行的速度，进度指示器可能会从 0 跳到 100%。您也可以制作图形进度条，但其背后的基本思想是相同的，只是不是更新标签值，而是更改具有不同背景颜色的文本框的大小等。

**根据 OP 评论修订**

这是您无需“复制/粘贴”即可将范围从一张纸“复制”到另一张纸的方法：

```
Set rng1 = Sheets(1).Rows(12)
Set rng2 = Sheets(2).Rows(1)

rng2.Value = rng1.Value 
```

因此，您可以只定义您的范围，并将第二个范围分配给 = 第一个范围。

# c# - 使用 WinForms 在 C# 中保存 DataGridView 中的数据

> ID：15615981
> 
> 赞同：0
> 
> 时间：2013-03-25T13:19:12.857
> 
> 标签：c#, xml, winforms, datagridview, datatable

我有两个 DataGridView 一个非常简单，一个更复杂，具有不同的列类型。我的想法是将数据存储到 XML 并在重新启动时从文件中加载。对于简单的没有问题（dgvAccounts 是 DataGridView）：

```
 DataTable dtusers = new DataTable("Users");
   DataColumn col1 = new DataColumn("ID");
   DataColumn col2 = new DataColumn("Key");
   dtUsers.Columns.Add(col1);
   dtUsers.Columns.Add(col2);
   if (File.Exists("user.xml"))
         dtUsers.ReadXml("user.xml");
   dgvAccounts.DataSource = dtUsers;     
   ....
   dtUsers.WriteXml("user.xml"); 
```

但在另一个 DataGridView 上，我喜欢从 DataSource 获取的 DataTable 永远为空（dgvActions 是 DataGridView）：

```
 DataGridViewTextBoxColumn dgvcolA5 = new DataGridViewTextBoxColumn();
   DataGridViewComboBoxColumn dgvcolA6 = new DataGridViewComboBoxColumn();
   dgvActions.Columns.Add(dgvcolA5);
   dgvActions.Columns.Add(dgvcolA6);
   DataTable dtActions = (DataTable)dgvActions.DataSource;
   dtActions.WriteXML("actions.xml"); 
```

我还尝试提前创建一个 DataTable 并将其添加为 dgvActions.DataSource 但结果是一样的。

那么请有人帮我为 DataGridView 创建一个 DataTable 或建议任何其他方式来存储和加载数据？

谢谢

安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:25:49.030

首先设置数据表，然后像第一个示例中那样将其设置为数据源（这样您就不会从数据源中获取空数据表）：

```
 DataTable dtActions = new DataTable();
   //Set DataTable columns here
   dtActions.WriteXML("actions.xml");
   dgvActions.DataSource = dtActions; 
```

# java - 在动态文本android的末尾添加三个点

> ID：15615984
> 
> 赞同：0
> 
> 时间：2013-03-25T13:19:24.717
> 
> 标签：java, android

我必须在文本视图中的文本末尾添加 3 个点。我的 textView 位于惰性列表适配器中，因此内容经常更改。textview 中仅显示两行。

例如假设文本是

abcdefghigdddddddddddddddddddddddddddddd

结果应该是

abcdefghigdddddddddddddddddddddddddddd...

我知道我应该使用 .replace("...","");

但如何总是写下最后三个字？

我的文本视图如下

```
holder.title.setText(Html.fromHtml(a.name)); 
```

其中 a.name 是要设置的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:24:38.863

您可以在 TextView 中添加“省略号”属性，还可以指定文本视图仅为一行。它可能看起来像这样：

```
<TextView
                    android:id="@+id/text_value"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:ellipsize="end"
                    android:maxLines="1" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:38:26.293

只需设置您的`TextView`属性`android:ellipsize="end"`，您就会得到结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:24:46.247

首先，您获取字符串中的文本。然后你获取字符串的长度。然后您可以从最后一个字符获取第三个字符的索引。您可以轻松地将最后三个字符替换为...

所有这些都可以使用 Java 中 String 类的方法来完成。

假设您只想显示字符串“raviranjan”中的 4 个字符，并且希望通过将所有其他字符替换为“...”来修剪所有其他字符。做如下： -

```
String str = "raviranjan";
int length = str.length();
String subString = str.substring(0, 3);  // takes four characters from beginning
String str2 = subString + "...";   // Add ellipsis 
```

现在 str2 是你想要的字符串....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:22:01.457

制作 textView 省略号并让 android 自动为您截断它。

```
<TextView ....... bla- bla -------
          .......................
          android:elipsis="true"
          android:lines="num_of_lines" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T13:22:58.807

您想在文本末尾添加 3 个点然后

```
holder.title.setText(Html.fromHtml(a.name+"...")); 
```

删除 3 个字符并添加 3 个点..

```
 String a = a.name;
    a.substring(0, a.length() - 3);
    holder.title.setText(Html.fromHtml(a.name+"...")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T13:28:06.203

如果你想用省略号替换多余的字符，你可能会摆脱这样的事情：

```
String str = "abcdefghigdddddddd dddddddddddddddddddd";
String newStr = str.replaceAll("^(.{100})(.*)$","$1..."); 
```

以上内容应匹配前 100 个字符并将它们放入一组中，而将其他字符放入另一组中。结果将是一个新字符串，该字符串由第一组后跟 3 个点组成。

您可以将 100 的值更改为省略号之前所需的任意数量的字符。

# c# - Windows 商店应用程序：从代码动态更改背景图像

> ID：15615985
> 
> 赞同：0
> 
> 时间：2013-03-25T13:19:24.813
> 
> 标签：c#, xaml, windows-8, windows-runtime, windows-store-apps

我正在开发一个天气应用程序，我想根据天气（晴天、阴天等）动态更改背景图像。我为 App.xaml.cs 中的所有页面设置了背景图像，如下所示：

```
 rootFrame.Background = new ImageBrush
            {
                Stretch = Windows.UI.Xaml.Media.Stretch.UniformToFill,
                ImageSource = new BitmapImage { UriSource = new Uri("ms-appx:///Assets/blueSky.jpg") }
            }; 
```

我在 App.xaml.cs 中设置了图像，因此所有页面都获得相同的图像，并且我不需要每次都加载图像。App.xaml.cs 的完整代码：

```
 sealed partial class App : Application
{

    /// <summary>
    /// Initializes the singleton application object.  This is the first line of authored code
    /// executed, and as such is the logical equivalent of main() or WinMain().
    /// </summary>
    public App()
    {
        this.InitializeComponent();
        this.Suspending += OnSuspending;

    }

    /// <summary>
    /// Invoked when the application is launched normally by the end user.  Other entry points
    /// will be used when the application is launched to open a specific file, to display
    /// search results, and so forth.
    /// </summary>
    /// <param name="args">Details about the launch request and process.</param>
    protected async override void OnLaunched(LaunchActivatedEventArgs args)
    {
        Frame rootFrame = Window.Current.Content as Frame;

        // Do not repeat app initialization when the Window already has content,
        // just ensure that the window is active
        if (rootFrame == null)
        {
            // Create a Frame to act as the navigation context and navigate to the first page
            rootFrame = new Frame();

            // Her we set the application background Image for all pages
            rootFrame.Background = new ImageBrush
            {
                Stretch = Windows.UI.Xaml.Media.Stretch.UniformToFill,
                ImageSource = new BitmapImage { UriSource = new Uri("ms-appx:///Assets/blueSky.jpg") }
            };
            weather.Common.SuspensionManager.RegisterFrame(rootFrame, "appFrame");

            if (args.PreviousExecutionState == ApplicationExecutionState.Terminated)
            {
                //TODO: Load state from previously suspended application
                await weather.Common.SuspensionManager.RestoreAsync();
            }

            // Place the frame in the current Window
            Window.Current.Content = rootFrame;
        }

        if (rootFrame.Content == null)
        {
            // When the navigation stack isn't restored navigate to the first page,
            // configuring the new page by passing required information as a navigation
            // parameter
            if (!rootFrame.Navigate(typeof(MainPage), args.Arguments))
            {
                throw new Exception("Failed to create initial page");
            }
        }
        // Ensure the current window is active
        Window.Current.Activate();
    }

    /// <summary>
    /// Invoked when application execution is being suspended.  Application state is saved
    /// without knowing whether the application will be terminated or resumed with the contents
    /// of memory still intact.
    /// </summary>
    /// <param name="sender">The source of the suspend request.</param>
    /// <param name="e">Details about the suspend request.</param>
    private async void OnSuspending(object sender, SuspendingEventArgs e)
    {
        var deferral = e.SuspendingOperation.GetDeferral();
        //TODO: Save application state and stop any background activity
        await weather.Common.SuspensionManager.SaveAsync();
        deferral.Complete();
    }
} 
```

这适用于 1 张图像，但我无法自动更改图像。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:48:10.260

从 Web 服务获取天气的代码在哪里？在该代码中，获取当前天气，然后根据预报设置背景图片。

# c# - c#中的webservice泛型方法和接口？

> ID：15615989
> 
> 赞同：0
> 
> 时间：2013-03-25T13:19:34.327
> 
> 标签：c#, web-services, generics, interface, windows-phone-8

在 Windows Phone 应用程序中，我使用来自不同提供商的多个 Web 服务。为了绑定 xaml 中的数据，我有一个类来统治它们。比方说：

```
public class Event
{
  public string Id { get;set;}
  public string Title { get;set;}
  public string Latitude { get;set;}
  public string Longitude { get;set;}
} 
```

当提供商有一个网络服务时，我使用如下方法：

```
private List<Event> MigrateCompanyEventToEvent(DataServiceCollection<CompanyEvent> collection)
{
   var listEvents = new List<Event>();
   foreach(var item in collection)
   {
      var ev = new Event();
      ev.Id = item.itemId.ToString(); //typeof Guid();
      ev.Title = item.companyEventTitle;
      if(item.latitude != null) { ev.Latitude = item.latitude.ToString(); } //typeof double?
      //etc.
      listEvents.Add(ev);
   }
   return listEvents;
} 
```

但是...我有一个提供许多类似网络服务的提供商。我不想为每个方法编写一个方法，所以我查看了泛型方法。我想我不明白一些事情。

我有一个名为 KidEvents、ParentalEvents、SingleEvents 的 Web 服务......所有这些都具有相同的定义。所以，我写了一个接口：

```
public interface IdataEvents<T>
{
     Guid entity_id {get;}
     string nameEvent {get;}
     double? latitude {get;}
     double? longitude {get;}
} 
```

为了继续，我写道：

```
private List<Event> MigrateGenericOdataToEvent<T>(DataServiceCollection<T> collection) where T:IdataEvents<T>
{
    var listEvents = new List<Event>();
    foreach(T item in collection)
    {
       var ev = new Event();
       ev.Title = item.nameEvent;
       ev.Id = item.entity_id;
       //etc.
       listEvents.Add(ev);
    }
    return listEvents
} 
```

我的问题是，当我使用： var SingleEvents = MigrateGenericOdataToEvent(collection); //带有DataServiceCollection的集合类型

我收到一个错误：

```
Le type 'm3.ServiceReferenceData.SingleEvents' ne peut pas être utilisé 
comme paramètre de type 'T' dans le type ou la méthode générique 
'm3.ViewModels.MainViewModel.MigrateGenericOdataToEvent<T>
(System.Data.Services.Client.DataServiceCollection<T)'. 
Il n'y a pas de conversion de référence implicite de 
'm3.ServiceReferenceData.SingleEvents' en 
'm3.ViewModels.IdataEvents<m3.ServiceReferenceData.SingleEvents>'. 
```

对不起，它是法语...意思是这样的：

```
The type 'm3.ServiceReferenceData.SingleEvents' can not be used as a paramater 
of type 'T' in the type or generic method 
'm3.ViewModels.MainViewModel.MigrateGenericOdataToEvent<T>
(System.Data.Services.Client.DataServiceCollection<T)'. 
There is no implicit conversion reference of 'm3.ServiceReferenceData.SingleEvents' 
in 'm3.ViewModels.IdataEvents<m3.ServiceReferenceData.SingleEvents>' 
```

是否可以将 SingleEvents、ParentalEvents、KidEvents（所有相同的数据模型）中的数据解析为一个通用事件？请问我该怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:32:45.253

您得到的错误是由于您的函数定义的这一部分：

```
where T:IGenericOdata<T> 
```

（根据异常消息，我假设您的实际代码使用`IdataEvents<T>`and not `IGenericOdata<T>`，否则异常没有多大意义。）

它抱怨您的数据类型实际上并未实现您在约束中拥有的接口。您已经告诉编译器，只允许将实现接口的东西用作`T`，但是您发送的是不实现接口的类型。

如果这些类型来自自动生成的服务引用，您可以利用引用代码生成器将数据类型实现为分部类这一事实，并通过简单地创建另一个分部类文件来扩展它们以实现您的新接口. 或者，您可以围绕每个服务引用类创建一个包装类，并在那里实现您的接口。

# polygon - 如何在适用于 iOS 的 Google Maps SDK 中绘制填充多边形

> ID：15615996
> 
> 赞同：1
> 
> 时间：2013-03-25T13:19:53.073
> 
> 标签：polygon, google-maps-sdk-ios

我想用谷歌地图在 iPhone 上画一个填充的多边形（版本 1.1.1，最后一个）。

任何人都知道如何在 ios 上这样做：

（我在 Android 上的代码）

```
mMap.addPolygon(new PolygonOptions()
            .addAll(latLngList)
            .fillColor(Color.BLUE)
            .strokeColor(Color.RED)
            .strokeWidth(3)); 
```

问候，

PS：如果你有很多解决方案，请记住我有很多多边形要绘制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:38:14.630

SDK 目前不支持填充多边形，但是有一个功能请求在此处添加它们：

[https://code.google.com/p/gmaps-api-issues/issues/detail?id=5070](https://code.google.com/p/gmaps-api-issues/issues/detail?id=5070)

同时，一种选择是将多边形绘制到图像中，然后将它们添加为地面叠加层。这将是非常有限的，但可以作为临时解决方法。

另一种选择是在地图视图的顶部添加另一个视图并将多边形绘制到其中，然后在地图视图移动时更新它们。不可能将另一个视图与地图视图完美同步，因此当您平移/缩放时，您的多边形会有点滞后，但这对于您来说也可以作为临时解决方法。

**更新**

这些只是尝试地面覆盖方法的一些随机想法，我不确定它们是否可行，但它们可能会让您入门：

我建议将矩形的纬度/经度角转换为`MKMapPoint`（使用`MKMapPointForCoordinate`）。这些相当于 Google 在缩放级别 20 时的坐标系。

然后，您可以使用坐标中矩形宽度/高度的`MKMapPoint`纵横比来确定地面覆盖层的纵横比`UIImage`。一旦你有了纵横比，你只需要试验实际尺寸（即猜测宽度，根据纵横比计算高度）来找到一个看起来不错的。它越大，矩形的细节就越精细，但它使用的内存越多，性能可能就越慢。此外，您可能会遇到某种尺寸的硬限制——我猜`UIImage`Google Maps SDK 将其转换为纹理，并且纹理在 iPhone 3GS+ 上的最大尺寸为 2048x2048。

然后，使用类似于[How to setRegion with google maps sdk for iOS？](https://stackoverflow.com/questions/15040409/how-to-setregion-with-google-maps-sdk-for-ios)计算缩放级别和中心纬度/经度。而不是地图视图的宽度/高度，您将使用`UIImage`宽度/高度，并且您将使用矩形的边界而不是所需视图的边界。您也不需要从宽度和高度计算比例（因为比例应该相同） - 所以只需使用其中一个。不要创建具有缩放级别和中心纬度/经度的相机，而是将它们设置在`GMSGroundOverlayOptions`. 还将地面叠加层设置`anchor`为图像的中心（即 0.5、0.5）。

上面描述了如何为每个矩形添加一个 GroundOverlay。如果您有很多重叠或附近的矩形，您可以将它们组合成一个`UIImage`，但这会有点复杂。