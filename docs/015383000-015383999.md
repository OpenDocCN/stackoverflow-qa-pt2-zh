# StackOverflow 问答 15383000-15383999

# jsf - 将两个 DataScroller 添加到一个 DataTable

> ID：15383000
> 
> 赞同：0
> 
> 时间：2013-03-13T10:41:27.637
> 
> 标签：jsf, facelets, myfaces, tomahawk

我想将两个 DataScroller 添加到一个 DataTable （在页面的顶部和底部）。到目前为止，一个 DataScroller 可以工作。这个绑定到我选择第一页的 backbean (scroller.getUIData().setFirst(0);)

现在我尝试添加第二个 DataScroller，它只是第一个带有新 ID 的副本。如果您将两个 DataScroller 绑定到同一个 backbean，这似乎是一个问题。所以我必须删除第二个DataScroller的绑定。

这个可以吗？没有其他解决办法吗？为什么我不能只对 ione 表使用两个相等的 DataScroller？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:22:08.100

看起来只绑定一个 DataScroller 工作正常。两个滚动条都是同步的，可以正常工作。

# r - 我的生存对象有什么问题？

> ID：15383001
> 
> 赞同：0
> 
> 时间：2013-03-13T10:41:29.060
> 
> 标签：r, na, quantile, survival-analysis

我有一个生存对象`R`。

`print(surv)`给我

```
> print(surv)
Call: survfit(formula = Surv(TAGE, EVENT) ~ 1, data = data_LTC[data_LTC$TYPE == 
    "Job", ])

records   n.max n.start  events  median 0.95LCL 0.95UCL 
 299510  299510  299510  252884     177     173     180 
```

但是，`quantile(surv)`不起作用并输出

```
> quantile(surv)
Error in is.na(y) : 'y' is missing 
```

对我来说这有点奇怪，因为`R`能够计算中位数（177）但不能计算其他四分位数。

我的生存对象有什么问题？

[编辑]
也许这是问题的最小示例：在文档中（[http://stat.ethz.ch/R-manual/R-patched/library/survival/html/quantile.survfit.html](http://stat.ethz.ch/R-manual/R-patched/library/survival/html/quantile.survfit.html)）有这个例子：

```
> fit <- survfit(Surv(time, status) ~ ph.ecog, data=lung)
> quantile(fit)
$quantile
          25% 50% 75%
ph.ecog=0 285 394 655
ph.ecog=1 181 306 550
ph.ecog=2 105 199 351
ph.ecog=3 118 118 118
... 
```

现在，如果我只想重复这个输出的第一行，我会做

```
> fit <- survfit(Surv(time, status) ~ 1, data = lung[lung$ph.ecog == 0,])
> quantile(fit)
Error in is.na(y) : 'y' is missing 
```

`quantile(fit$time)`@Edwin建议在下面使用

```
> quantile(fit$time)
     0%     25%     50%     75%    100% 
   5.00  224.25  301.50  439.75 1010.00 
```

然而，这显然会导致不同的结果。

**[已关闭]**
请忽略下面的答案，因为它们没有`quantile.survfit`在`survival`包中使用，而是使用`R`s 内置`quantile`函数。

更新到最新版本的`survival`-package 以解决此问题。

这样做

```
update.packages() 
```

请注意，您可能需要 root 权限才能执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:58:24.110

您正在尝试将该`quantile`函数应用于生存对象，该函数需要输入一个 numeric `vector`。生存对象包含此向量，但您需要先从中提取它。我以生存包中的白血病数据集为例；

```
library(survival)
data(leukemia)
surv.obj <- survfit(Surv(time = leukemia$time, event = leukemia$status) ~ 1)

names(surv.obj)
[1] "n"         "time"      "n.risk"    "n.event"   "n.censor"  "surv"   "type"     
[8] "std.err"   "upper"     "lower"     "conf.type" "conf.int"  "call"     

quantile(surv.obj$time)
  0%    25%    50%    75%   100% 
5.00  13.75  27.50  33.75 161.00 
```

`quantile`请注意，您也可以使用函数 on`surv.obj$lower`和提取 95% CI 的下边界和上边界的分位数`surv.obj$upper`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:40:11.987

我建议该对象没有任何问题，而是您试图滥用它。print(surv) 语句中的中位数使用来自 Surv(TAGE,EVENT) 数据的信息，但这并不意味着 quantile(surv) 必须按预期工作。

# jquery - 在 IE9 中获取 TD 宽度？

> ID：15383002
> 
> 赞同：0
> 
> 时间：2013-03-13T10:41:29.423
> 
> 标签：jquery, internet-explorer-9

我无法在 IE9 中获得正确的 TD 宽度，以下代码在 Chrome、Firefox 和 IE10 中运行良好：

```
var calculatedWidth = $(td).get(0).clientWidth - parseInt($(td).css("padding-left")) - parseInt($(td).css("padding-right")); 
```

在互联网上搜索了很长时间，但似乎无法找到合适的解决方案。该表没有一组固定的列，并且列的宽度也可以变化。

# c# - 如何使用 ConfigurationManager 存储结构化数据？

> ID：15383003
> 
> 赞同：3
> 
> 时间：2013-03-13T10:41:31.643
> 
> 标签：c#, .net, configurationmanager

我可以使用 .Net ConfigurationManager 存储字符串，但如何存储结构化数据？

例如，我可以这样做：

```
conf = ConfigurationManager.OpenExeConfiguration(...)
string s = "myval";
conf.AppSettings.Settings["mykey"].Value = s;
conf.Save(ConfigurationSaveMode.Modified); 
```

我想这样做：

```
class myclass {
   public string s;
   int i;
   ... more elements
};

myclass c = new myclass(); c.s = "mystring"; c.i = 1234; ...

conf.AppSettings.Settings["mykey"] = cc;
conf.Save(ConfigurationSaveMode.Modified); 
```

如何使用 ConfigurationManager 存储和检索结构化数据？

我按照@sll 的建议实施了一个解决方案。但随后的困难是为配置创建一个新部分。这是如何完成的： [如何通过 ConfigurationManager 写入 User.Config 文件？](https://stackoverflow.com/questions/2632806/how-to-write-to-a-user-config-file-through-configurationmanager)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:43:07.540

您可以通过从类继承来创建自己的配置节类型，`ConfigurationSection`并使用它来保存/加载任何自定义类型信息。

MSDN：[如何：使用 ConfigurationSection 创建自定义配置部分](http://msdn.microsoft.com/en-gb/library/2tw134k3%28v=vs.100%29.aspx)

顺便说一句，一个可能对您或其他人有帮助的建议：一件好事是使自定义配置部分类[不可变](http://en.wikipedia.org/wiki/Immutable_object)（没有公共设置器），因此您可以确保在应用程序生命周期的任何阶段都不能更改配置，但是如果您决定为依赖于配置节类的代码编写*单元测试*，并且需要带有一些测试值的节存根，因为没有设置器，您可能会坚持设置属性值。解决方案是提供一个从您的节类继承的新类，并使用受保护的索引器在构造函数中指定值，如下所示：

```
public class TestSectionClass: MyConfigurationSection
{
    public TestSectionClass(string testUserName)
    {
        this["userName"] = testUserName;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:42:57.080

[序列化](http://msdn.microsoft.com/en-gb/library/vstudio/ms233843.aspx)。

序列化数据的方法有很多种，因此您需要选择一种。但是 .NET 提供了适合很多情况的序列化 API，最近在处理 Web AJAX 调用时，我发现自己[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)大量使用将事物转换为 JSON。但是有第三方库，例如[protobuf-net](http://code.google.com/p/protobuf-net/)等。

这里的关键是本质上将您的数据转换为字节或字符串表示形式，稍后可以将其反序列化回其原始结构，从而允许您将其存储在其间的介质中，例如配置文件或通过网络传输等等

根据@sll 的回答，.NET 还有另一个方面意味着它可以处理进出自定义配置部分的数据序列化；是否要为此目的明确指定类型是您的决定。底线是相同的，以某种方式序列化。

# jquery - 带有 addClass 的单击函数在动态 html() 中不起作用

> ID：15383007
> 
> 赞同：1
> 
> 时间：2013-03-13T10:41:42.913
> 
> 标签：jquery, html, click, addclass

点击功能在动态添加的 html 中不起作用。该类在新元素中被测试为 true，但它忽略了该类的单击功能 - 尽管它在其他元素中工作正常。

以下是相关代码：

```
// The added html element + addClass
$('#sendResultMsg').html('<a href="javascript:void(0);" id="closeButt">Close</a>');
$('#sendResultMsg').find('#closeButt').addClass('closeButton');

// just for testing this alert confirms hasClass as true
alert($('#closeButt').hasClass('closeButton')); 
```

'#sendresult' 是页面中的一个元素，并且 html 与 'Close' 链接一起显示很好，但单击时没有任何反应。分配给该类的单击功能在页面中的其他 2 个元素中可以正常工作，如下所示：

```
$('.toggleContactBox, .closeButton).on('click',function () {
  cntBox = $('#contactBox');
  cntBoxPos = cntBox.css('right');
  if (cntBoxPos <= '-550px') {
    cntBox.animate({ right: '0px' }, 200);
  } else {
    cntBox.animate({ right: '-550px' }, 200);
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:43:19.913

为了将事件绑定到动态添加的元素，`.on`您必须将事件委托给 DOM[文档中存在的更高元素](http://api.jquery.com/on/)

尝试

```
$(document).on('click','.toggleContactBox, .closeButton',function () {
  cntBox = $('#contactBox');
  cntBoxPos = cntBox.css('right');
  if (cntBoxPos <= '-550px') {
    cntBox.animate({ right: '0px' }, 200);
  } else {
    cntBox.animate({ right: '-550px' }, 200);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:45:37.433

**代替**

```
$('.toggleContactBox, .closeButton).on('click',function () { 
```

**和**

```
$('.toggleContactBox, .closeButton').on('click',function () { 
```

您忘记`'`了何时使用类选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:45:41.453

将其更改为：

```
$('#sendResultMsg').on('click', '.toggleContactBox, .closeButton', function () {
    ...
}); 
```

文档：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

`If selector is omitted or is null, the event handler is referred to as direct or directly-bound. The handler is called every time an event occurs on the selected elements, whether it occurs directly on the element or bubbles from a descendant (inner) element.`

`When a selector is provided, the event handler is referred to as delegated. The handler is not called when the event occurs directly on the bound element, but only for descendants (inner elements) that match the selector. jQuery bubbles the event from the event target up to the element where the handler is attached (i.e., innermost to outermost element) and runs the handler for any elements along that path matching the selector.`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:00:10.190

而不是“开”使用现场，它会工作

# javascript - 我应该如何使用 Jasmine 在 JavaScript 中对单例进行单元测试？

> ID：15383009
> 
> 赞同：1
> 
> 时间：2013-03-13T10:41:45.317
> 
> 标签：javascript, unit-testing, debugging, singleton, jasmine

我有一些看起来像这样的代码：

```
var x = x || (function() {

    // Some private variables
    // ...

    return {
        init:function(options) {
            // Do stuff
            // ...
        },

        // Some other public methods
        // ...
    };
})(); 
```

如果我是正确的，那么这是一个单例类。现在我想用 Jasmine 为这个类写一些单元测试。我从这样的事情开始：

```
describe("x", function() {

    var myX;

    beforeEach(function(){
        myX = x; 
    });

    it("has been instatiated correctly", function() {
        expect(myX.init).toBeDefined();
    });
}); 
```

我的理解是，由于最外层有括号，所以这个单例[在解析后立即](http://www.hardcode.nl/subcategory_1/article_526-singleton-examples-in-javascript.htm)`function(){}`被实例化。在其余代码中缺少对这个单例方法的调用加强了我的假设（无论如何，在这种情况下该方法的意义是什么？）。`init``init`

由此得出结论，我知道

```
var myX;

beforeEach(function(){
    myX = x; 
}); 
```

不可能是对的。我已经尝试了许多其他排列来获得一些可以使用的东西（从把它全部排除在外，因为我认为在浏览器达到测试规范时已经解析了包含代码的文件，所以单例类应该可用，对吧？）。但是一切都会导致完全相同的错误消息：

```
ReferenceError: x is not defined 
```

那么我该如何解决呢？

提前致谢！

- 克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T03:14:17.050

> 如果你得到 x 没有定义，你似乎没有包含模块代码。请向我们展示您如何将其嵌入到您的测试中。

使用两种类型断言，一种在实例化之前，一种在实例化之后，来测试一个单例：

```
function foo()
  {
  foo = {};
  return 1;
  }

console.assert(foo.constructor === Object, "foo.constructor === Function", 'foo should be a type of Function before it is instantiated')

foo();

console.assert(foo.constructor === Object, "foo.constructor === Object", 'foo should be a type of Object after it is instantiated') 
```

**参考**

*   [MOP：面向元模型的编程](http://www.infoq.com/articles/mop)

# haskell - 将“只是 []”变成“无”

> ID：15383010
> 
> 赞同：2
> 
> 时间：2013-03-13T10:41:46.757
> 
> 标签：haskell, monads

以下行

```
filterM (\x -> Just (x > 0)) [2, 1, 0, -1] 
```

输出

```
Just [2,1] 
```

和线

```
filterM (\x -> Just (x > 0)) [] 
```

节目

```
Just [] 
```

但我希望它输出**Nothing**。可以做些什么来可能引入一些适用于所有使用列表的 monad 函数的更改？那么我应该使用其他东西而不是 filterM 还是可以从 Maybe monad 继承一些东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T10:55:10.643

您可以使用基于谓词[`mfilter`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad.html#v%3amfilter)将您的转换为空：`Just []`

```
 mfilter (not . null) . filterM (Just . (>0)) $ [] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-13T10:55:04.177

定义：

```
flatten :: Maybe [a] -> Maybe [a]
flatten Nothing   = Nothing
flatten (Just []) = Nothing
flatten x         = x 
```

然后

```
flatten $ filterM (\x -> Just (x > 0)) [] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-13T10:57:53.760

我不确定您对所有使用列表的 monad 函数的工作是什么意思。没有办法修改列表 monad，这样任何 monad 函数都会自动发生这种情况，因为这需要有效地更改一些其他未知 monad 的绑定。同样，更改所有 monad 函数会有点耗时。

我的建议是使用可组合性。如果内部单子 list 失败，我们想要的是在外部单子 m 中失败。这应该很容易，虽然我不知道该怎么称呼它，所以我将使用`failing`.

```
failing :: MonadPlus m => m [a] -> m [a]
failing = (=<<) $ \l -> case l of
    [] -> mzero
    _  -> return l 
```

然后`failing $ filterM (\x -> Just (x > 0)) []`应该做你想做的事。

我不确定你为什么在这种情况下完全涉及 Maybe （因为你的过滤条件都只使用 Just ），但我假设你有其他原因这样做，或者其他一些有时会失败的条件。

# ios - 导航栏中带有返回按钮的 UISegmentedControl

> ID：15383014
> 
> 赞同：15
> 
> 时间：2013-03-13T10:42:11.020
> 
> 标签：ios, objective-c, uinavigationcontroller, uinavigationbar, uisegmentedcontrol

我正在`UISegmentedControl`以编程方式将 a 添加到导航栏`titleView`应该在的位置。但正如[Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html)在 下所述`titleView`，*如果 leftBarButtonItem 不是 nil，则忽略此属性*。

但我也想要后退按钮。就像他们在自己的图像中说明的那样！

![在此处输入图像描述](../Images/bbabb2043087b4ea9ab70b0e993743d3.png)

下面是我添加的代码`UISegmentedControl`。

```
self.navigationItem.leftBarButtonItem = nil;
UISegmentedControl *statFilter = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Filter_Personnal", @"Filter_Department", @"Filter_Company", nil];
[statFilter setSegmentedControlStyle:UISegmentedControlStyleBar];
self.navigationItem.titleView = statFilter; 
```

是否还有另一种方法可以添加`UISegmentedControl`“后退”按钮？

谢谢你。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-13T10:58:05.320

尝试这个

删除这一行--->`self.navigationItem.leftBarButtonItem = nil;`

改为添加

```
UISegmentedControl *statFilter = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Filter_Personnal", @"Filter_Department", @"Filter_Company", nil]];
[statFilter setSegmentedControlStyle:UISegmentedControlStyleBar];
[statFilter sizeToFit];
self.navigationItem.titleView = statFilter; 
```

唯一的变化是我添加了这一行：

```
[statFilter sizeToFit]; 
```

希望这可以帮助 ！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T10:48:11.010

您可以`UIBarButtonItem`使用自定义视图创建一个可能是您的`UISegmentedControl`.

以下内容可能会起作用。

```
//create segmented control with items
UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"One", @"Two", nil]];

//create bar button item with segmented control as custom view
UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithCustomView:segmentedControl];

//add segmented control bar button item to navigation bar
[[[self navigationController] navigationItem] setRightBarButtonItem:barButtonItem]; 
```

我没有对此进行测试，但它应该符合您的需求。

# cross-platform - 在 Windows phone 8 中从 WebView 请求时创建应用程序栏

> ID：15383018
> 
> 赞同：0
> 
> 时间：2013-03-13T10:42:22.573
> 
> 标签：cross-platform, windows-phone-8, application-bar

我想用 webbrowser 创建应用程序。当通过脚本请求像“ **createappbar** ”时，我必须`create the application bar from JavaInterface methods`。有没有可用的教程。***我在谷歌上搜索了更多。但是每个示例都显示了从 PhoneApplicationPage 创建应用程序栏***。请建议我任何链接或示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:07:08.753

我已经解决了这个问题并在下面的链接中发布了解决方案

[动态创建应用程序栏](https://stackoverflow.com/questions/15381752/create-application-bar-dynamically)

# java - AchartEngine 内折线图的渐变颜色

> ID：15383019
> 
> 赞同：5
> 
> 时间：2013-03-13T10:42:26.630
> 
> 标签：java, android, achartengine, linechart

我正在使用 AchartEngine 绘制折线图。

**我所做的：**我想使用 Achart 引擎制作 LineGraph。但是像我们在条形图中那样启用不同的颜色渐变。

我有无忧无虑地制作折线图。

我知道渐变仅受 Achart 引擎中的范围条形图支持。但是，如果有人有的话，应该有一些解决方法。

我有我的代码如下：

```
public GraphicalView graph(Context context) {
        String[] titles = new String[] { "Nike Line Graph" };
        List<double[]> values = new ArrayList<double[]>();

        values.add(new double[] { 14230, 12300, 14240, 15244, 14900, 12200,
                11030, 12000, 12500, 15500, 14600, 15000 });

        int length = values.get(0).length;

        Log.d("****length*********", "" + length);

        int[] colors = new int[] { Color.GREEN };
        PointStyle[] styles = new PointStyle[] { PointStyle.POINT };

        XYMultipleSeriesRenderer renderer = buildRenderer(colors, styles);
        setChartSettings(renderer, "Monthly sales in the last 2 years",
                "Month", "Units sold", 0.75, 12.25, 10000, 19000,
                Color.argb(0x00, 0x01, 0x01, 0x01),
                Color.argb(0x00, 0x01, 0x01, 0x01));

        renderer.setChartTitleTextSize(20);
        renderer.setTextTypeface("sans_serif", Typeface.BOLD);
        renderer.setLabelsTextSize(0f);
        renderer.setLabelsColor(Color.argb(0x00, 0x01, 0x01, 0x01));
        renderer.setAxisTitleTextSize(15);
        renderer.setApplyBackgroundColor(true);
        renderer.setBackgroundColor(Color.argb(0x00, 0x01, 0x01, 0x01));
        renderer.setLegendTextSize(15);
        renderer.setScale(10);
        renderer.setShowAxes(false);
        renderer.setXLabelsColor(Color.argb(0x00, 0x01, 0x01, 0x01));
        renderer.setYLabelsColor(0, Color.argb(0x00, 0x01, 0x01, 0x01));
        renderer.setMarginsColor(Color.argb(0x00, 0x01, 0x01, 0x01));

        renderer.setPanEnabled(false, false);
        renderer.setZoomEnabled(false, false);
        length = renderer.getSeriesRendererCount();
        SimpleSeriesRenderer r1 = new SimpleSeriesRenderer();

        r1.setGradientEnabled(true);
        r1.setGradientStart(-50, Color.BLACK);
        r1.setGradientStop(50, Color.GREEN);

        Log.d("****length*********", "" + length);

        for (int i = 0; i < length; i++) {
            XYSeriesRenderer r = (XYSeriesRenderer) renderer
                    .getSeriesRendererAt(i);
            r.setLineWidth(5f);
        }

        GraphicalView v = ChartFactory.getCubeLineChartView(context,
                buildBarDataset(titles, values), renderer, 0.5f);
        return v;

    } 
```

有了方法：

```
protected XYMultipleSeriesRenderer buildRenderer(int[] colors,
            PointStyle[] styles) {
        XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
        setRenderer(renderer, colors, styles);
        return renderer;
    }

    protected void setRenderer(XYMultipleSeriesRenderer renderer, int[] colors,
            PointStyle[] styles) {
        renderer.setAxisTitleTextSize(16);
        renderer.setChartTitleTextSize(20);
        renderer.setLabelsTextSize(15);
        renderer.setLegendTextSize(15);
        renderer.setPointSize(5f);

        renderer.setMargins(new int[] { 20, 30, 15, 20 });
        int length = colors.length;
        for (int i = 0; i < length; i++) {

             XYSeriesRenderer r = new XYSeriesRenderer();
              r.setColor(colors[i]);
             r.setPointStyle(styles[i]);    
             renderer.addSeriesRenderer(r);     

        } 
```

我得到的是如下截图：

![在此处输入图像描述](../Images/9d7259a367ab156af0b93ac2e1b726f5.png)

**我想要的是 ：**

![在此处输入图像描述](../Images/807326db2703a4e4390db4e77051081d.png)

**问题：**我想在此折线图中添加渐变颜色。从一种颜色到另一种颜色。

任何帮助都会受到高度赞赏。

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T07:12:44.827

如果您仍在寻找答案并且有人发现这个问题相同，那么答案是肯定的，我们可以将渐变设置为折线图。解决方案是继承 LineChart 并覆盖 drawSeries 方法，如下所示

```
 @Override
    public void drawSeries(Canvas canvas, Paint paint, float[] points,
                    SimpleSeriesRenderer seriesRenderer, float yAxisValue, int seriesIndex, int startIndex) {
            int length = points.length;
            XYSeriesRenderer renderer = (XYSeriesRenderer) seriesRenderer;
            float lineWidth = paint.getStrokeWidth();
            paint.setStrokeWidth(renderer.getLineWidth());
            if (renderer.isFillBelowLine() || renderer.isGradientEnabled()) {
                    int pLength = points.length;
                    float[] fillPoints = new float[pLength + 4];
                    System.arraycopy(points, 0, fillPoints, 0, length);
                    fillPoints[0] = points[0] + 1;
                    fillPoints[length] = fillPoints[length - 2];
                    fillPoints[length + 1] = yAxisValue;
                    fillPoints[length + 2] = fillPoints[0];
                    fillPoints[length + 3] = fillPoints[length + 1];
                    float max = 0;
                    for (int i = 0; i < length + 4; i += 2) {
                            if (fillPoints[i + 1] < 0) {
                                    fillPoints[i + 1] = 0;
                            }
                            else if (fillPoints[i + 1] > max) {
                                    max = fillPoints[i + 1];
                            }
                    }
                    paint.setStyle(Style.FILL);
                    if (renderer.isGradientEnabled()) {
                            Shader s = paint.getShader();
                            // Create gradient from values set in renderer
                            paint.setShader(new LinearGradient(0, (float)(renderer.getGradientStartValue() * max), 0, (float)(renderer.getGradientStopValue() * max),
                                            renderer.getGradientStartColor(), renderer.getGradientStopColor(), Shader.TileMode.MIRROR));
                            drawPath(canvas, fillPoints, paint, true);
                            // Restore paint's shader to previous value (null)
                            paint.setShader(s);
                    }
                    else {
                            paint.setColor(renderer.getFillBelowLineColor());
                            drawPath(canvas, fillPoints, paint, true);
                    }
            }
            paint.setColor(seriesRenderer.getColor());
            paint.setStyle(Style.STROKE);
            drawPath(canvas, points, paint, false);
            paint.setStrokeWidth(lineWidth);
    } 
```

如果您想使用原始粘贴数据查看，请使用以下代码：

```
@Override
public void drawSeries(Canvas canvas, Paint paint, float[] points, 
        SimpleSeriesRenderer seriesRenderer, float yAxisValue, int seriesIndex, int startIndex) {
    int length = points.length;
    XYSeriesRenderer renderer = (XYSeriesRenderer) seriesRenderer;
    float lineWidth = paint.getStrokeWidth();
    paint.setStrokeWidth(renderer.getLineWidth());
    if (renderer.isFillBelowLine() || renderer.isGradientEnabled()) {
        int pLength = points.length;
        float[] fillPoints = new float[pLength + 4];
        System.arraycopy(points, 0, fillPoints, 0, length);
        fillPoints[0] = points[0] + 1;
        fillPoints[length] = fillPoints[length - 2];
        fillPoints[length + 1] = yAxisValue;
        fillPoints[length + 2] = fillPoints[0];
        fillPoints[length + 3] = fillPoints[length + 1];
        float max = 0;
        for (int i = 0; i < length + 4; i += 2) {
            if (fillPoints[i + 1] < 0) {
                fillPoints[i + 1] = 0;
            }
            else if (fillPoints[i + 1] > max) {
                max = fillPoints[i + 1];
            }
        }
        paint.setStyle(Style.FILL);
        if (renderer.isGradientEnabled()) {
            Shader s = paint.getShader();
            // Create gradient from values set in renderer
            paint.setShader(new LinearGradient(0, (float)(renderer.getGradientStartValue() * max), 0, (float)(renderer.getGradientStopValue() * max), 
                    renderer.getGradientStartColor(), renderer.getGradientStopColor(), Shader.TileMode.MIRROR));
            drawPath(canvas, fillPoints, paint, true);
            // Restore paint's shader to previous value (null)
            paint.setShader(s);
        }
        else {
            paint.setColor(renderer.getFillBelowLineColor());
            drawPath(canvas, fillPoints, paint, true);
        }
    }
    paint.setColor(seriesRenderer.getColor());
    paint.setStyle(Style.STROKE);
    drawPath(canvas, points, paint, false);
    paint.setStrokeWidth(lineWidth);
} 
```

如果它帮助你让我知道。或者你已经解决了，然后让我知道你是怎么做到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:35:05.360

使用多个系列，每个系列都有自己的颜色。

# java - 如何通过单击更改多个单元格的背景？

> ID：15383023
> 
> 赞同：0
> 
> 时间：2013-03-13T10:42:39.273
> 
> 标签：java, swing, background, jtable

我有一个表格，每个单元格都有一个字符串。实际上，我将表格用作一页书，其中包含文本。我的问题是我想单击一个单元格，并且表格中所有相似单词的背景颜色都变为一种唯一颜色。例如，当我单击包含“and”的单元格时，表格中的所有“and”都会突出显示。我实现了 defaulttablecellrenderer，我知道当 java 想要绘制表格时，它会为每个单元格调用它。我尝试使用内在的重复能力并设置颜色，但它没有按我预期的方式工作。这些是我的代码：

```
JTable t=new Jtabale();
//Filling my table....here....
t.addMouseListener(new MouseAdapter() {
                public void mouseClicked(MouseEvent e){
                    int column=((JTable)e.getSource()).getSelectedColumn();
                    int row=((JTable)e.getSource()).getSelectedRow();
                    JTable table=(JTable)e.getComponent();
                    Object myS=table.getValueAt(row, column);//value of that cell saved
                    CustomCellRenderer r=(CustomCellRenderer)table.getCellRenderer(row, column);
                    r.setCell(myS);

                    table.repaint();
                }
            }); 
```

这是我的 DefaultTableCellRenderer 实现：

```
public class CustomCellRenderer extends DefaultTableCellRenderer {

Object myStr;

public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)
{

    Component c=super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

    if(myStr==value){
        c.setBackground(Color.YELLOW);
    }
    else
        c.setBackground(table.getBackground());
    return c;
}

public void setCell(Object val){
    myStr=val;
} 
```

不知道这段代码有什么问题？这只是突出显示我单击的那个单元格。但我预计它会一起改变几个单元格的背景！即使我将 println 放在 if 中，但即使它在 if 大括号中也只有一次！我很困惑。你有什么想法？！

# javascript - 显示来自自定义 JSON 结构的数据

> ID：15383030
> 
> 赞同：0
> 
> 时间：2013-03-13T10:42:45.500
> 
> 标签：javascript, html, json

使用 javascript 我需要显示 JSON 结构中的属性 --> 变量值。我还需要显示中的类依赖项以及相应 JSON 结构的变量名。

我无法将正确的类依赖项与属性数组中的相应变量分开

```
{
"demo": {
    "class": [
        {
            "name": "class1",
            "attributes": [],
            "class": [
                {
                    "name": "class2",
                    "attributes": [
                        {
                            "variable": "firstname"
                        },
                        {
                            "variable": "lastname"
                        },
                        {
                            "variable": "middlename"
                        }
                    ]
                }
            ]
        },
        {
            "name": "class3",
            "attributes": [],
            "class": [
                {
                    "name": "class4",
                    "attributes": [],
                    "class": [
                        {
                            "name": "class5",
                            "attributes": [
                                {
                                    "variable": "city"
                                },
                                {
                                    "variable": "state"
                                },
                                {
                                    "variable": "country"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
  }
 } 
```

输出应该像

```
 variable name                      class dependency

     firstname                          :class1:class2
     lastname                           :class1:class2
     middlename                         :class1:class2
     city                               :class3:class4:class5
     state                              :class3:class4:class5
     country                            :class3:class4:class5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:18:48.503

我让它工作了。我做了一个函数调用`determine`，它将返回一个包含每个键的标记的对象`JSON`

```
var determine = function ( obj ) {

    var result = {},
        index = 0,
        name;
        getData = function ( _obj, _result ) {

            var key;

            if ( 'name' in _obj ) {
                name += ':' + _obj.name;
            }

            if ( 'class' in _obj ) {

                _obj.class.forEach( function ( data ) {
                    getData( data, _result );
                });
                name = '';

            } else {

                for ( key in _obj.attributes ) {
                    _result[ _obj.attributes[ key ].variable ] = name.substr( 1 );
                }

            }

            return _result;

        };

    for ( var item in obj ) {

        name = '';
        result[ item ] = getData( obj[ item ], {} );
        index++;

    }

    return result;

};

var markup = determine( json );

console.log( markup ); 
```

# listview - jQuery mobile listview data-split change right button into text

> ID：15383036
> 
> 赞同：3
> 
> 时间：2013-03-13T10:42:55.893
> 
> 标签：listview, jquery-mobile, button

How can I make the data split list view right button as picture below:

![default mode](../Images/86b67f51d9079b7a5026df9645ee92e8.png)

into text like the picture below:

![custom right button into text](../Images/2af9b77a04c33a7cb866458ba0c6e801.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:58:45.710

Here's a working example: [http://jsfiddle.net/Gajotres/dcs6w/](http://jsfiddle.net/Gajotres/dcs6w/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $('#custom-btn').find('.ui-btn-inner span').last().removeClass('ui-icon').text('M+');
}); 
```

# php - 扩展 php_win32service 安装服务，但服务无法启动（挂起）

> ID：15383037
> 
> 赞同：1
> 
> 时间：2013-03-13T10:42:56.307
> 
> 标签：php, windows, windows-services

我正在尝试在 Windows Server 2008 SP1 机器上设置 PHP Web 应用程序。我们让这个应用程序在 Windows Server 2003 上正确运行，但现在无法`PHP`正确启动使用 php_win32service 扩展构建的 Windows 服务。

以下是`PHP`代码的相关部分。这是执行安装和卸载的部分：

```
if ($argv[1] == 'install') {
    win32_create_service(array(
        'service' => $service_name,
        'display' => $service_name,
        'params' => '"'. __FILE__ . '"' . ' run'));
        exit;
} 
else if ($argv[1] == 'uninstall') {
    win32_delete_service($service_name);
    exit;
} 
else if ($argv[1] != 'run') {
   die("Invalid arguments");
}

win32_start_service_ctrl_dispatcher($service_name); 
```

这是主循环：

```
while (1) {
    switch (win32_get_last_control_message()) {
       case WIN32_SERVICE_CONTROL_INTERROGATE: win32_set_service_status(WIN32_SERVICE_RUNNING); break; // Respond with status
       case WIN32_SERVICE_CONTROL_STOP: win32_set_service_status(WIN32_SERVICE_STOPPED);  exit; // Terminate script
    }         
    processQueue();
    usleep(500000);
} 
```

只要我`cmd`以管理员身份运行，安装和卸载就可以工作。如果我`cmd`在用于登录服务器的帐户下启动，则不会创建服务`win32_create_service`。我也可以使用`run`命令行中的参数运行脚本并且它运行正确，但是当我尝试启动服务时，它只是挂起`Starting`消息并且永远不会进入`Started`状态。

I think this issue has something to do with the rights of the `LocalSystem` account on the machine, but I do not know what rights are needed to get this to work properly. I also do not know how I can debug this and find out what error/issue is occurring with the `WIN32_SERVICE_CONTROL_INTERROGATE`, especially as I do not have rights on this server to make changes to security settings. Any changes that I need made to security settings I need to communicate to the network administrator so that he can perform the changes. Can anyone offer any help with debugging or resolving this issue?

UPDATE:

This issue only seems to occur in the 64-bit version of `PHP`. It seems that the 64-bit compile of `php_win32service` runs into some sort of problem when trying to start the service. I removed the 64-bit versions of `PHP` and 'php_win32service' and replaced them with the 32-bit versions. The service then started correctly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:43:37.767

Have you tried with NetworkService account? Other way is creating own service account. Do you communicate outside the server? Maybe firewall?

Ps. the network service account has a default password (system known)

***Note that this account does not have a password, so any password information that you provide in this call is ignored.***

[http://msdn.microsoft.com/nl-nl/library/windows/desktop/ms684272(v=vs.85).aspx](http://msdn.microsoft.com/nl-nl/library/windows/desktop/ms684272(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T14:13:53.790

Updated Answer:

I am now convinced that this issue arises when you update or downgrade `PHP` to a different version, but fail to remove and recreate the services using the `php_win32service` for the newly installed version of `PHP`. This was mentioned as an aside in my old answer, but after encountering the same thing on another server and resolving it by removing and recreating the service entries, I am convinced that this is the true cause of this issue and that is not a bug in `PHP`.

Old Answer:

I encountered this issue again when I tried to update `PHP` on a `Windows Server 2008` machine from `5.3` to `5.6`. From the testing that I have done I have concluded that `php_win32service.dll` extension works correctly for `PHP 5.3`, but not from `5.4` upwards. From `5.4` there seems to be a bug whereby the function `win32_get_last_control_message` always returns 0 rather than a valid status.

I finally got a clue to what was going on from a post made over here: [http://enlinea.creaelicita.cl/guia/function.win32-set-service-status.html](http://enlinea.creaelicita.cl/guia/function.win32-set-service-status.html)

So, if you have code such as this:

```
while (1) {
    switch (win32_get_last_control_message()) {
        case WIN32_SERVICE_CONTROL_INTERROGATE: win32_set_service_status(WIN32_SERVICE_RUNNING); break; // Respond with status
        case WIN32_SERVICE_CONTROL_STOP: win32_set_service_status(WIN32_SERVICE_STOPPED); exit; // Terminate script
    }    
    usleep(3000000);

    // Main script goes here
    processQueue();
} 
```

then

```
win32_set_service_status(WIN32_SERVICE_RUNNING); 
```

will never get called, because `win32_get_last_control_message` never gets the value of 4 (WIN32_SERVICE_CONTROL_INTERROGATE).

A workaround which I use is to add a default case to the switch statement that sets the service status. Like this:

```
 switch (win32_get_last_control_message()) {
        case WIN32_SERVICE_CONTROL_INTERROGATE: win32_set_service_status(WIN32_SERVICE_RUNNING); break; // Respond with status
        case WIN32_SERVICE_CONTROL_STOP: win32_set_service_status(WIN32_SERVICE_STOPPED); exit; // Terminate script
        default: win32_set_service_status(WIN32_SERVICE_RUNNING);
 } 
```

As an aside, I also found that this issue occurred if I upgraded to `PHP 5.4` and did not recreate the service entries before trying to start them. So besides applying the above workaround, remember to first uninstall the windows service in question and reinstall it from your `PHP` script.

# winapi - 无模式对话键盘处理 (winapi)

> ID：15383040
> 
> 赞同：0
> 
> 时间：2013-03-13T10:42:59.257
> 
> 标签：winapi, dialog, keyboard

我有一个带有一个主窗口的应用程序，它有一堆控件，包括空格键，它由一个名为`onSpacebar()`. 在那个主窗口的顶部，我有一个持久的无模式对话框。我需要空格键的行为完全相同，无论对话框是否具有焦点，或者主窗口是否具有焦点。

这个对话框由一个看起来像这样的 DialogProc 支持：

```
 BOOL CALLBACK DialogProc(HWND hDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
    {
      switch(uMsg)
      {
      case WM_NOTIFY:
        std::cout<< "WM_NOTIFY" <<std::endl;
        switch(LOWORD(wParam))
        {
              // which component caused the message?
        case COMP_TREE:
              if(((LPNMHDR)lParam)->code == NM_DBLCLK){
                          onDoubleclk()
              }
              //...
        break;
        // other components...

        }
      break;
      case WM_CLOSE: 
          // the dialog can only be closed when the whole app is closed
          //EndDialog(hDlg, IDCANCEL); 
          return TRUE;
      case WM_DESTROY:
          PostQuitMessage(0); 
          return TRUE;
      }
      return FALSE;
    } 
```

根据我收集的信息，我应该`onSpacebar()`从 DialogProc 中调用我的方法，类似于我处理双击的方式。我可以看到`WM_NOTIFY`按下空格键时对话框收到了该消息（短语 WM_NOTIFY 打印到 cout），但我似乎无法将空格键通知与对话框收到的其他众多通知区分开来。

请告诉我如何识别特定`WM_NOTIFY`是对空格键按键的响应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:12:07.990

[`WM_NOTIFY`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775583.aspx)消息*不是*窗口处理按键事件的标准方式。当一个键被按下时，你的窗口应该会收到[`WM_KEYDOWN`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646280.aspx), [`WM_KEYUP`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646281.aspx), 和可能的[`WM_CHAR`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646276.aspx)消息。`WM_NOTIFY`完全不同的目的：将消息从公共控件传递到其父窗口。

因此，您收到`WM_NOTIFY`响应按键的消息是一件相当不寻常的事情，当您了解*焦点*的工作原理（这是解决最终问题的关键）时可以解释。

在 Windows 中，一次只能聚焦一个窗口，当前聚焦的窗口是接收*所有*键盘输入的窗口。因此，如果对话框具有焦点，它将收到按键通知。如果该对话框上的*子控件具有焦点，**则它*（不是其父对话框）将收到按键通知。并且对话框上有一个可聚焦的子控件，它将*始终*优先于其父对话框接收焦点，因此它也将始终接收按键通知。

`WM_NOTIFY`因此，对您的好奇消息的可能解释是，对话框上的[常见控件](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773169.aspx)之一具有焦点，它正在接收空格键按下事件，并在处理它之后，将通知传递给它的父窗口（您的对话框）消息的形式`WM_NOTIFY`。正如您可能想象的那样，这不是检测空格键已被按下的可靠方法。

相反，您需要找出某种方法来捕获按键通知*，然后再将*它们发送到焦点控件。为此，您需要在调用or*之前*`WM_KEYDOWN`修改应用程序的消息循环以捕获或`WM_KEYUP`消息。*[`DispatchMessage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644934.aspx)[`IsDialogMessage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645498.aspx)*

 **   如果键事件对应于空格键，您将调用您的`onSpacebar`函数并指示该消息已被处理，从而防止它被传递并被另一个窗口处理。
*   如果键事件与空格键*不*对应，那么您将需要像往常一样处理消息，确保它*确实*被传递并由另一个窗口处理。

由于这种方法在全局级别过滤掉空格按键，因此它解决了对话框上的子控件窃取按键和其他无模式对话框的问题。但是，您确实需要小心，因为很容易搞砸，以至于用户根本无法使用键盘导航您的对话框。

更根本的是，我认为**你处理*空格键*的想法从根本上是有缺陷**的。某些常用控件的逻辑基本上*要求*它们处理空格键的按下。例如，考虑一个文本框：如果您在全局级别过滤掉所有按空格键，用户将永远无法在文本框中键入空格。如果您坚持处理空格键，则需要检查全局处理程序中的焦点控件，如果它是文本框（或您希望接收空格的其他常见控件），请将其传递；否则，请自行处理。

老实说，我要做的是选择一个更独特的组合键（例如，我不知道，`Ctrl`+ `Space`）并将其设置为*Accelerator*。大概，您的全局消息循环已经通过调用该[`TranslateAccelerator`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646373.aspx)函数来处理加速键，这样就可以为您处理所有脏活。甚至不需要任何代码——您只需在项目中编辑加速器资源文件即可完成所有工作。有关键盘加速器的 MSDN 文档在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646337.aspx)，但您可能会更轻松地查阅您最喜欢的有关 Visual C++ 的书籍。*

# actionscript-3 - 如何设置敌人的伤害等级

> ID：15383041
> 
> 赞同：1
> 
> 时间：2013-03-13T10:43:01.583
> 
> 标签：actionscript-3

提前致谢...

我对在游戏中为敌人设置伤害等级的逻辑有点怀疑。以下是我的敌人班

```
package scripts.enemy
{
    import flash.display.MovieClip;
    import flash.events.*;
    import flash.display.Stage;

    public class Enemy1 extends MovieClip
    {
        private var BG:MovieClip;
        private var speed:Number = 0.5;
        private var ease:Number = .005;
        private var rad:Number = 57.2957795;

        public function Enemy1(BG:MovieClip) : void
        {
            var RandomX:Array = new Array(-150,-200,-250,-300,-350,-400,-450,-500,-550,150,200,250,300,350,400,450,500,550);
            var RandomY:Array = new Array(-150,-200,-250,-300,-350,-400,150,200,250,300,350,400);
            var r:int = (Math.random() * 18);
            var s:int = (Math.random() * 12);

            x = RandomX[r];
            y = RandomY[s];

            this.BG = BG;

            addEventListener(Event.ENTER_FRAME, moveEnemy); //false, 0, true);.
        }
        private function moveEnemy(e:Event):void
        {
            var dx:Number = x - 10;
            var dy:Number = y - 10;

            this.x -= dx * ease;
            this.y -= dy * ease;

            this.rotation = (Math.atan2(dy,dx) * rad) + 180;

        }

    }

} 
```

这是一些给我的主要课程带来麻烦的代码

```
// ......... Function for Checking the Collision between Bullet And Enemy...........
        private function checkCollision(mc:MovieClip):Boolean
        {
            var test:Point = mc.localToGlobal( new Point());
            for (var i = 0; i < enemies1.length; i++)
            {
                tempEnemy1 = enemies1[i];
                if (kill == true)
                {
                    if (tempEnemy1.hitTestPoint(test.x,test.y,true))
                    {
                        enemies1.splice(i, 1);
                        bg_mc.removeChild(tempEnemy1);
                        createDead(Dead1,deadArray1,tempEnemy1.x,tempEnemy1.y,tempEnemy1.rotation);
                        Score +=  10;
                        Scr_txt.text = String(Score);
                        bugsKill +=  1;
                        kill = false;
                        return true;
                    }
                }
            }
            if (Level >= 2)
            {
                for (var j = 0; j < enemies2.length; j++)
                {
                    tempEnemy2 = enemies2[j];
                    if (kill == true)
                    {
                        if (tempEnemy2.hitTestPoint(test.x,test.y,true))
                        {
                            bug2HitCount -= 1;
                            if (bug2HitCount == 0)
                            {
                                enemies2.splice(j, 1);
                                bg_mc.removeChild(tempEnemy2);
                                createDead(Dead2,deadArray2,tempEnemy2.x,tempEnemy2.y,tempEnemy2.rotation);
                                Score +=  20;
                                Scr_txt.text = String(Score);
                                bugsKill +=  1;
                                kill = false;
                                //bug2HitCount = bug2HitRate;
                                return true;
                            }
                            kill = false;
                            return true;
                        }

                    }
                }
            }

            return false;
        }

        private function removeElement(removeList:Array):void
        {
            for (var i = 0; i < removeList.length; i++)
            {
                bg_mc.removeChild(removeList[i]);
            }
        }
        //...........Function Checking the Collission Between Bunker And Enemy..............
        private function collideEnemy(deadArray:Array,enemyArray:Array,rate:Number):void
        {
            var enemy:MovieClip;
            for (var i = 0; i < enemyArray.length; i++)
            {
                enemy = enemyArray[i];
                if (enemy.hitTestObject(bunker_mc))
                {
                    life_mc.scaleX -=  rate;
                    if (life_mc.scaleX <= 0.05)
                    {
                        stage.removeEventListener(Event.ENTER_FRAME,updateCollission);
                        Timer1.stop();
                        Mouse.show();
                        stage.removeEventListener(MouseEvent.MOUSE_UP,mouseUpFun);
                        stage.removeEventListener(Event.ENTER_FRAME,updateStage);
                        stage.removeEventListener(MouseEvent.MOUSE_DOWN,mouseDownFun);
                        (player.parent).removeChild(player);
                        (bunker_mc.parent).removeChild(bunker_mc);
                        (life_mc.parent).removeChild(life_mc);
                        (sniper_mc.parent).removeChild(sniper_mc);
                        removeElement(bullets);
                        EndFun();
                        gunFire = false;
                        gotoAndStop("end");
                        Level = 1;
                    }
                }
            }
        }
        //...........function of Timer Complete Event.....................
        private function TimerEnd(e:TimerEvent):void
        {
            EndBug();
            gotoAndStop("end");
        }
        //...........function of Timer Complete Event.....................
        private function EndBug():void
        {
            HelpTimer = new Timer(1000,1);
            HelpTimer.addEventListener(TimerEvent.TIMER_COMPLETE,HelpFun);
            HelpTimer.start();
            stage.removeEventListener(Event.ENTER_FRAME,updateStage);
            stage.removeEventListener(Event.ENTER_FRAME,updateCollission);
            function HelpFun(Event:TimerEvent)
            {
                stage.removeEventListener(MouseEvent.MOUSE_UP,mouseUpFun);
                stage.removeEventListener(MouseEvent.MOUSE_DOWN,mouseDownFun);
                gunFire = false;
                bg_mc.removeChild(player);
                bg_mc.removeChild(bunker_mc);
                (life_mc.parent).removeChild(life_mc);
                bg_mc.removeChild(sniper_mc);
                EndFun();
                Score = 0;
                Level +=  1;
                totalBugs += 5;
            }
        }
        //..................Function for ending the Game And removing the Reamining Enemies.................
        private function EndFun():void
        {
            Mouse.show();
            removeElement(dustArray);
            if (Level == 1)
            {
                removeElement(enemies1);
                removeElement(deadArray1);
                gotoAndStop("level2");
            }
            if (Level == 2)
            {
                removeElement(enemies1);
                removeElement(deadArray1);
                removeElement(enemies2);
                removeElement(deadArray2);
                gotoAndStop("level3");
            }
            if (Level == 3)
            {
                ......
            }

            .....................
            .....................

        }
    }
} 
```

在这段代码中，我在 2 级中添加了一种新型 Enemy，我还为其 HitTest 属性编写了代码。其中 2 级的每个敌人需要超过 1 颗子弹才能杀死。但是当我向一颗子弹射击时敌人，然后我向另一个相同类型的敌人发射另一颗子弹，另一个敌人被杀死。这意味着第二个敌人只被一颗子弹杀死了..那么我该如何解决这个问题..？

请帮助..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:21:30.790

您的代码中的问题出在`checkCollision`函数中。它基本上遍历了第一个 for 循环并忽略了第二个。但最好是通过在 Enemy 类中添加一个生命值参数来分配敌人的生命值，并让每颗子弹将它们的生命值减少 1。这样，你可以通过你的阵列并移除任何生命值达到 0 的敌人。

编辑：我刚刚再次查看了您的代码，并意识到这是把`bug2HitCount`所有事情都搞砸了。

# c# - 使用 svcutil 中的代码创建服务

> ID：15383042
> 
> 赞同：0
> 
> 时间：2013-03-13T10:43:02.813
> 
> 标签：c#, .net, wcf, web-services, .net-4.0

我不太明白 svcutil 的输出是什么，有人可以解释一下吗？

在 vs 命令提示符中我使用了：svctil /mc *.wsdl *.xsd /language:c#

```
 [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
[System.ServiceModel.ServiceContractAttribute(ConfigurationName="GenericInboundBrokerSoap")]
public interface GenericInboundBrokerSoap
{

    // CODEGEN: Generating message contract since element name SourceID from namespace http://tempuri.org/ is not marked nillable
    [System.ServiceModel.OperationContractAttribute(Action="http://tempuri.org/BrokerInboundRequest", ReplyAction="*")]
    BrokerInboundRequestResponse BrokerInboundRequest(BrokerInboundRequestRequest request);
}

[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
[System.ServiceModel.MessageContractAttribute(IsWrapped=false)]
public partial class BrokerInboundRequestRequest
{

    [System.ServiceModel.MessageBodyMemberAttribute(Name="BrokerInboundRequest", Namespace="http://tempuri.org/", Order=0)]
    public BrokerInboundRequestRequestBody Body;

    public BrokerInboundRequestRequest()
    {
    }

    public BrokerInboundRequestRequest(BrokerInboundRequestRequestBody Body)
    {
        this.Body = Body;
    }
}

[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
[System.Runtime.Serialization.DataContractAttribute(Namespace="http://tempuri.org/")]
public partial class BrokerInboundRequestRequestBody
{

    [System.Runtime.Serialization.DataMemberAttribute(EmitDefaultValue=false, Order=0)]
    public string SourceID;

    [System.Runtime.Serialization.DataMemberAttribute(EmitDefaultValue=false, Order=1)]
    public string TokenID;

    [System.Runtime.Serialization.DataMemberAttribute(EmitDefaultValue=false, Order=2)]
    public string xml;

    public BrokerInboundRequestRequestBody()
    {
    }

    public BrokerInboundRequestRequestBody(string SourceID, string TokenID, string xml)
    {
        this.SourceID = SourceID;
        this.TokenID = TokenID;
        this.xml = xml;
    }
}

[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
[System.ServiceModel.MessageContractAttribute(IsWrapped=false)]
public partial class BrokerInboundRequestResponse
{

    [System.ServiceModel.MessageBodyMemberAttribute(Name="BrokerInboundRequestResponse", Namespace="http://tempuri.org/", Order=0)]
    public BrokerInboundRequestResponseBody Body;

    public BrokerInboundRequestResponse()
    {
    }

    public BrokerInboundRequestResponse(BrokerInboundRequestResponseBody Body)
    {
        this.Body = Body;
    }
}

[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
[System.Runtime.Serialization.DataContractAttribute(Namespace="http://tempuri.org/")]
public partial class BrokerInboundRequestResponseBody
{

    [System.Runtime.Serialization.DataMemberAttribute(EmitDefaultValue=false, Order=0)]
    public string BrokerInboundRequestResult;

    public BrokerInboundRequestResponseBody()
    {
    }

    public BrokerInboundRequestResponseBody(string BrokerInboundRequestResult)
    {
        this.BrokerInboundRequestResult = BrokerInboundRequestResult;
    }
}

[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
public interface GenericInboundBrokerSoapChannel : GenericInboundBrokerSoap, System.ServiceModel.IClientChannel
{
}

[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
public partial class GenericInboundBrokerSoapClient : System.ServiceModel.ClientBase<GenericInboundBrokerSoap>, GenericInboundBrokerSoap
{

    public GenericInboundBrokerSoapClient()
    {
    }

    public GenericInboundBrokerSoapClient(string endpointConfigurationName) : 
            base(endpointConfigurationName)
    {
    }

    public GenericInboundBrokerSoapClient(string endpointConfigurationName, string remoteAddress) : 
            base(endpointConfigurationName, remoteAddress)
    {
    }

    public GenericInboundBrokerSoapClient(string endpointConfigurationName, System.ServiceModel.EndpointAddress remoteAddress) : 
            base(endpointConfigurationName, remoteAddress)
    {
    }

    public GenericInboundBrokerSoapClient(System.ServiceModel.Channels.Binding binding, System.ServiceModel.EndpointAddress remoteAddress) : 
            base(binding, remoteAddress)
    {
    }

    [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
    BrokerInboundRequestResponse GenericInboundBrokerSoap.BrokerInboundRequest(BrokerInboundRequestRequest request)
    {
        return base.Channel.BrokerInboundRequest(request);
    }

    public string BrokerInboundRequest(string SourceID, string TokenID, string xml)
    {
        BrokerInboundRequestRequest inValue = new BrokerInboundRequestRequest();
        inValue.Body = new BrokerInboundRequestRequestBody();
        inValue.Body.SourceID = SourceID;
        inValue.Body.TokenID = TokenID;
        inValue.Body.xml = xml;

        //do the hokey pokey here?

        BrokerInboundRequestResponse retVal = ((GenericInboundBrokerSoap)(this)).BrokerInboundRequest(inValue);
        return retVal.Body.BrokerInboundRequestResult;
    }
} 
```

如何/以什么方式创建 WCF 服务？我使用以下方法创建了一个服务：

![在此处输入图像描述](../Images/b2a5bb5e01e2f865f07ecd0aee5c07b4.png)

我要实现什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:02:10.303

你需要区分两件事：

*   服务（服务器端），您的 wcf 服务
*   调用您的服务（客户端）的代理由 svcutil 创建（由 VS 使用“添加服务引用命令”）

如果您使用 svcutil 创建了代理代码，则意味着您已经知道 wsdl 合约文件的地址，这意味着服务已经存在。

您可以查看这些链接以找到一些示例：

*   [http://www.codeproject.com/Articles/42643/Creating-and-Consuming-Your-First-WCF-Service](http://www.codeproject.com/Articles/42643/Creating-and-Consuming-Your-First-WCF-Service)
*   [http://blogs.msdn.com/b/jmeier/archive/2007/10/15/how-to-create-a-hello-world-wcf-service-using-visual-studio.aspx](http://blogs.msdn.com/b/jmeier/archive/2007/10/15/how-to-create-a-hello-world-wcf-service-using-visual-studio.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:01:03.993

您无需更改或实施任何东西，您只需使用生成的代理。

```
using (var thing = new GenericInboundBrokerSoapClient()) {
  thing.CallToMethodExposedByService();
} 
```

根据您是使用同步方法还是异步方法，您将获得适当的返回类型值或与请求相关的返回类型值；在某些情况下，只有异步方法可用（*à la* Silverlight）。

# actionscript-3 - 我不断收到此错误

> ID：15383049
> 
> 赞同：-5
> 
> 时间：2013-03-13T10:43:16.023
> 
> 标签：actionscript-3

将具有静态类型对象的值隐式强制转换为可能不相关的数字类型

但iv将其定义为

```
private var width:Object;

public function SetEnemyStartPosition():void
        {
            var stage:Object;
            this.x = stage.stageWidth * .2 - (this.width * .2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:50:44.387

你已经创建了一个泛型类型的变量`Object`，但是你把它当作一个`number`. 从提供的代码来看，您似乎从未为变量设置值，`width`这使得：

```
(this.width * .2) 
```

您的部分代码错误，它为空，并且开始进行算术运算的类型错误。我建议将变量声明更改为：

```
private var width:Number; 
```

`width`并在开始使用它之前确保它不为空。

# c++ - LCA 后代节点

> ID：15383055
> 
> 赞同：0
> 
> 时间：2013-03-13T10:43:35.187
> 
> 标签：c++, least-common-ancestor

我正在尝试获取树中两个节点的**最小共同祖先**。我已经尝试过了，但问题是`if one node is the descendant node for other`我无法获得 LCA。
我尝试解决它，然后它仅适用于后代节点。不知道如何进行。

```
Node* Tree::LCA(Node* root, Node* n1, Node* n2) {
    list<Node*> a1,a2;

    while(n1 != NULL) {
        a1.push_back(n1->parent);
        n1 = n1->parent;
    }

    while(n2 != NULL) {
        a2.push_back(n2->parent);
        n2 = n2->parent;
    }

    while(!a1.empty() && !a2.empty() && a1.back() == a2.back()) {   
        a1.pop_back();
        a2.pop_back();
    }

    if( a1.back() != a2.back()) {
        Node* rn = a1.back();
        cout << " LCA of r-U and r_v is " << rn->index << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:46:27.473

`n1->parent`你从和开始推动`n2->parent`。取而代之的是，在推动他们的父母`n1`和`n2`其他祖先之前。所以你的代码应该是：

```
Node* Tree::LCA(Node* root, Node* n1, Node* n2) {
    list<Node*> a1,a2;
    a1.push_back(n1); // line to be added

    while(n1 != NULL) {
        a1.push_back(n1->parent);
        n1 = n1->parent;
    }

    a2.push_back(n2); // line to be added
    while(n2 != NULL) {
        a2.push_back(n2->parent);
        n2 = n2->parent;
    }
    // rest of code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:03:57.143

```
Node* Tree::LCA(Node* root, Node* n1, Node* n2) {
    list<Node*> a1,a2;

    while(n1 != NULL) {
        a1.push_back(n1); // push n1 
        n1 = n1->parent;
    }

    while(n2 != NULL) {
        a2.push_back(n2);  // push n2
        n2 = n2->parent;
    }

    Node* old; // create new node
    while(!a1.empty() && !a2.empty() && a1.back() == a2.back()) {
        old = a1.back(); // store the node before popping
        a1.pop_back();
        a2.pop_back();
    }

    if( a1.back() != a2.back()) {
       // Node* rn = a1.back();  //not needed
        cout << " LCA of r-U and r_v is " << old->index << endl; // changed 
    }
} 
```

这可能会有所帮助。

# objective-c - Objective-C 在系统组件之后命名组件

> ID：15383056
> 
> 赞同：1
> 
> 时间：2013-03-13T10:43:36.830
> 
> 标签：objective-c

我想创建一个自定义表格视图，以线性视图显示单元格。我想不出这个自定义 UIView 类的好名字。将其命名为“TableView”是否安全？

```
TableView.h
TableView.m 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:46:27.440

可以在此处找到有关 Apple 命名的一些一般性建议[编码指南](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingBasics.html#//apple_ref/doc/uid/20001281-1002226-BBCJECED)

在这种情况下，您可能应该添加三个字母的首字母缩写词 - 可能是您的个人或公司首字母缩写。我可能会考虑`PASTableView`

* * *

值得注意的是 - 使用前缀作为一种命名空间以避免命名冲突是一种很好的形式，但是

> 两个字母的前缀 ... 由 Apple 保留用于框架类。

取自[Programming With Objective-C](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/Conventions/Conventions.html#//apple_ref/doc/uid/TP40011210-CH10-SW4) - 所以使用 3 个字母

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:46:58.680

它是安全的（Apple 的所有类都有前缀），但为了保持一致性，最好选择您自己唯一的类名前缀并使用它。请参阅[在 Cocoa Dev 上选择您自己的前缀](http://cocoadev.com/wiki/ChooseYourOwnPrefix)。方法各不相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T10:47:58.337

（所以你决定问一个关于你的名字的问题`UITableView`......真棒......？）

但是要回答你的问题。命名它没有问题，`TableView.h/.m`但我真的建议将它命名为其他名称。比如`AwesomeQuestionTableView.h/.m`什么的...

希望能帮助到你！

# r - 准确地从字符->POSIXct->字符转换为亚毫秒日期时间

> ID：15383057
> 
> 赞同：7
> 
> 时间：2013-03-13T10:43:38.727
> 
> 标签：r, posixct

我在文件中有一个字符日期时间列。我加载文件（到 a 中`data.table`）并执行需要将列转换为`POSIXct`. 然后我需要将`POSIXct`值写回文件，但日期时间不会相同（因为它打印不正确）。

这个打印/格式化问题是众所周知的，并且已经讨论过好几次了。我读过一些描述这个问题的帖子。我找到的最权威的答案是针对[这个问题](https://stackoverflow.com/q/7726034/271616)给出的。该问题的答案提供了两个应该解决此问题的函数（`myformat.POSIXct`和`form`），但它们似乎不适用于此示例：

```
x <- "04-Jan-2013 17:22:08.139"
options("digits.secs"=6)
form(as.POSIXct(x,format="%d-%b-%Y %H:%M:%OS"),format="%d-%b-%Y %H:%M:%OS3")
[1] "04-Jan-2013 17:22:08.138"
form(as.POSIXct(x,format="%d-%b-%Y %H:%M:%OS"),format="%d-%b-%Y %H:%M:%OS4")
[1] "04-Jan-2013 17:22:08.1390"
myformat.POSIXct(as.POSIXct(x,format="%d-%b-%Y %H:%M:%OS"),digits=3)
[1] "2013-01-04 17:22:08.138"
myformat.POSIXct(as.POSIXct(x,format="%d-%b-%Y %H:%M:%OS"),digits=4)
[1] "2013-01-04 17:22:08.1390" 
```

我的`sessionInfo`：

```
R version 2.15.2 (2012-10-26)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United Kingdom.1252
[3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C                        
[5] LC_TIME=C                              

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base     

other attached packages:
[1] fasttime_1.0-0   data.table_1.8.9 bit64_0.9-2      bit_1.1-9
[5] sas7bdat_0.3     chron_2.3-43     vimcom_0.9-6    

loaded via a namespace (and not attached):
[1] tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:44:17.473

所以我想你确实需要在我的建议中添加一些软糖因素：[https](https://stackoverflow.com/a/7730759/210673) ://stackoverflow.com/a/7730759/210673 。这似乎可行，但可能包括其他错误；在用于任何重要的事情之前，请仔细测试并考虑它在做什么。

```
myformat.POSIXct <- function(x, digits=0) {
  x2 <- round(unclass(x), digits)
  attributes(x2) <- attributes(x)
  x <- as.POSIXlt(x2)
  x$sec <- round(x$sec, digits) + 10^(-digits-1)
  format.POSIXlt(x, paste("%Y-%m-%d %H:%M:%OS",digits,sep=""))
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T12:41:55.937

正如您链接到的问题的答案已经说过，值的打印/格式化方式**与**实际值**不同**。这只是一个印刷代表问题。

```
R> as.POSIXct('2011-10-11 07:49:36.3')-as.POSIXlt('2011-10-11 07:49:36.3')
Time difference of 0 secs
R> as.POSIXct('2011-10-11 07:49:36.2')-as.POSIXlt('2011-10-11 07:49:36.3')
Time difference of -0.0999999 secs 
```

您的理解`POSIXct`不准确，`POSIXlt`不正确。您说不能将`POSIXlt`对象作为列包含在 data.frame 中也是不正确的。

```
R> x <- data.frame(date=Sys.time())
R> x$date <- as.POSIXlt(x$date)
R> str(x)
'data.frame':   1 obs. of  1 variable:
 $ date: POSIXlt, format: "2013-03-13 07:38:48" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T11:45:53.750

当你写

> 我的理解是 POSIXct 表示不如 POSIXlt 表示精确

你完全错了。

两者的表示形式相同——在 Windows 上低至*毫秒*，在其他操作系统上低至（几乎）微秒。你读了`help(DateTimeClasses)`吗？

至于你的最后一个问题，是的，我的 RcppBDT 包的开发版本使用 Boost Date.Time，**如果**你的操作系统支持它**并且**你打开了正确的表示，它可以一直到纳秒。但它确实取代了 POSIXct，并且还不支持时间对象的向量。

*编辑：*关于您的后续问题：

```
R> one <- Sys.time(); two <- Sys.time(); two - one
Time difference of 7.43866e-05 secs
R>
R> as.POSIXlt(two) - as.POSIXlt(one)
Time difference of 7.43866e-05 secs
R> 
R> one    # options("digits.sec"=6) on my box
[1] "2013-03-13 07:30:57.757937 CDT"
R> 
```

*编辑 2：* 我认为您只是在体验计算机上的浮点表示是不精确的：

```
R> print(as.numeric(as.POSIXct("04-Jan-2013 17:22:08.138",
+                   format="%d-%b-%Y %H:%M:%OS")), digits=18)
[1] 1357341728.13800001
R> print(as.numeric(as.POSIXct("04-Jan-2013 17:22:08.139",
+                   format="%d-%b-%Y %H:%M:%OS")), digits=18)
[1] 1357341728.13899994
R> 
```

差异并不像您假设的那样精确为 1/1000。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-11T15:53:35.060

两件事情：

1）@statquant 是正确的（而其他知名专家@Joshua Ulrich 和@Dirk Eddelbuettel 是错误的），@Aaron 在他的评论中，但这对于这里的主要问题并不重要：

`POSIXlt`按照设计，在存储时间方面肯定比 更准确`POSIXct`：由于**它的**秒数始终在 [0, 60) 中，因此它的粒度约为 6e-15，即 6 飞秒，比`POSIXct`.

但是，这在这里（和当前的 R）不是很相关：几乎所有操作，尤其是数字操作，都使用`Ops`group 方法（是的，初学者不知道，但有据可查），只需看看`Ops.POSIXt` 哪个确实浪费了额外的精度首先强制到`POSIXct`. 此外， format()/print() ing 在“.”之后使用 6 位小数。`POSIXlt`最多，因此也不区分`POSIXct`.
（由于上述原因，Dirk 和 Joshua 都导致了他们的错误断言：对于所有简单的实际用途，*lt 和 *ct 的精度是*相同*的）。

2）我确实倾向于同意我们（R Core）应该改进`format()`ing 并因此改进`print()`这种几分之一秒的 POSIXt 对象（仍然*在*上面@Aaron 提到的错误修复之后）。
但是我可能是错的，并且“我们”已经做对了，根据“正确”的某种定义;-)

# flurry - Flurry 参数限制

> ID：15383061
> 
> 赞同：2
> 
> 时间：2013-03-13T10:43:47.877
> 
> 标签：flurry

在我的应用程序中，当我尝试检索该事件以及参数时，我有一个已发生 1000 多次的事件，我仅获得 500 个参数值。

有什么方法可以获取所有记录吗？

API调用：

[http://api.flurry.com/eventMetrics/EventapiAccessCode=APIACCESSCODE&apiKey=APIKEY&startDate=STARTDATE&endDate=ENDDATE&eventName=EVENTNAME&versionName=VERSIONNAME](http://api.flurry.com/eventMetrics/EventapiAccessCode=APIACCESSCODE&apiKey=APIKEY&startDate=STARTDATE&endDate=ENDDATE&eventName=EVENTNAME&versionName=VERSIONNAME)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:55:45.167

Event 参数显示前 500 个值。前 500 名之外的所有参数值都归入“其他”。

（全面披露：我在 Flurry 的支持团队工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T02:28:43.223

似乎没有办法深入了解前 500 个值之外的信息。

> 目前没有办法深入到前 500 名之外的值。如果您需要更多信息，一种最佳做法是为参数值创建分组（例如，如果值可以是单独的数字，例如，创建“1-10”、“11-20”等组，而不是而不是存储每个单独的值）。

[https://developer.yahoo.com/flurry/docs/faq/events/](https://developer.yahoo.com/flurry/docs/faq/events/)

# jquery - 如何在 Wordpress 中使与博客无关的内容动态化

> ID：15383065
> 
> 赞同：0
> 
> 时间：2013-03-13T10:43:56.747
> 
> 标签：jquery, css

我有这个与博客无关的静态内容，我想在 wordpress 中动态化。你将如何使这种动态？在管理面板中编辑应该是用户友好的。

是帖子、自定义字段、类型吗？真的不知道。

代码如下所示：

```
 <ul class="ca-menu">
        <li>
            <a href="#">
                <span class="ca-icon">A</span>
                <div class="ca-content">
                    <h2 class="ca-main">Exceptional Service</h2>
                    <h3 class="ca-sub">Personalized to your needs</h3>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <span class="ca-icon">I</span>
                <div class="ca-content">
                    <h2 class="ca-main">Creative Storytelling</h2>
                    <h3 class="ca-sub">Advanced use of technology</h3>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <span class="ca-icon">C</span>
                <div class="ca-content">
                    <h2 class="ca-main">Infographical Education</h2>
                    <h3 class="ca-sub">Understanding visually</h3>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <span class="ca-icon">S</span>
                <div class="ca-content">
                    <h2 class="ca-main">Sophisticated Team</h2>
                    <h3 class="ca-sub">Professionals in action</h3>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <span class="ca-icon">d</span>
                <div class="ca-content">
                    <h2 class="ca-main">Unconditional Support</h2>
                    <h3 class="ca-sub">24/7 for you needs</h3>
                </div>
            </a>
        </li>
    </ul>
</div> 
```

```
@font-face {
    font-family: 'WebSymbolsRegular';
    src: url('websymbols/websymbols-regular-webfont.eot');
    src: url('websymbols/websymbols-regular-webfont.eot?#iefix') format('embedded-opentype'),
        url('websymbols/websymbols-regular-webfont.woff') format('woff'),
        url('websymbols/websymbols-regular-webfont.ttf') format('truetype'),
        url('websymbols/websymbols-regular-webfont.svg#WebSymbolsRegular') format('svg');
    font-weight: normal;
    font-style: normal;
}
.ca-menu{
    padding:0;
    margin:20px auto;
    width: 1020px;
}
.ca-menu li{
    width: 200px;
    height: 300px;
    overflow: hidden;
    position: relative;
    float:left;
    background: #fff;
    -webkit-box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    -moz-box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    margin-right: 4px;
    -webkit-transition: all 300ms linear;
    -moz-transition: all 300ms linear;
    -o-transition: all 300ms linear;
    -ms-transition: all 300ms linear;
    transition: all 300ms linear;
}
.ca-menu li:last-child{
    margin-right: 0px;
}
.ca-menu li a{
    text-align: left;
    width: 100%;
    height: 100%;
    display: block;
    color: #333;
    position: relative;
}
.ca-icon{
    font-family: 'WebSymbolsRegular', cursive;
    font-size: 60px;
    color: #333;
    text-shadow: 0px 0px 1px #333;
    line-height: 150px;
    position: absolute;
    width: 100%;
    height: 50%;
    left: 0px;
    top: 0px;
    text-align: center;
    -webkit-transition: all 400ms linear;
    -moz-transition: all 400ms linear;
    -o-transition: all 400ms linear;
    -ms-transition: all 400ms linear;
    transition: all 400ms linear;
}
.ca-content{
    position: absolute;
    left: 0px;
    width: 100%;
    height: 50%;
    top: 50%;
}
.ca-main{
    font-size: 30px;
    opacity: 0.8;
    text-align: center;
    -webkit-transition: all 200ms linear;
    -moz-transition: all 200ms linear;
    -o-transition: all 200ms linear;
    -ms-transition: all 200ms linear;
    transition: all 200ms linear;
}
.ca-sub{
    text-align:center;
    font-size: 14px;
    color: #666;
    line-height: 40px;
    opacity: 0.8;
    position: absolute;
    bottom: 0;
    width: 100%; 
    -webkit-transition: all 200ms linear;
    -moz-transition: all 200ms linear;
    -o-transition: all 200ms linear;
    -ms-transition: all 200ms linear;
    transition: all 200ms linear;
}
.ca-menu li:hover{
    background-color: #000;
}
.ca-menu li:hover .ca-icon{
    color: #ff2020;
    -webkit-animation: moveFromBottom 300ms ease;
    -moz-animation: moveFromBottom 300ms ease;
    -ms-animation: moveFromBottom 300ms ease;
}
.ca-menu li:hover .ca-main{
    color: #ff2020;
    -webkit-animation: smallToBig 300ms ease;
    -moz-animation: smallToBig 300ms ease;
    -ms-animation: smallToBig 300ms ease;
}
.ca-menu li:hover .ca-sub{
    color: #000;
    background-color: #ff2020;
    -webkit-animation: moveFromBottom 500ms ease;
    -moz-animation: moveFromBottom 500ms ease;
    -ms-animation: moveFromBottom 500ms ease;
}
@-webkit-keyframes smallToBig{
    from {
        -webkit-transform: scale(0.1);
    }
    to {
        -webkit-transform: scale(1);
    }
}
@-moz-keyframes smallToBig{
    from {
        -moz-transform: scale(0.1);
    }
    to {
        -moz-transform: scale(1);
    }
}
@-ms-keyframes smallToBig{
    from {
        -ms-transform: scale(0.1);
    }
    to {
        -ms-transform: scale(1);
    }
}

@-webkit-keyframes moveFromBottom {
    from {
        -webkit-transform: translateY(100%);
    }
    to {
        -webkit-transform: translateY(0%);
    }
}
@-moz-keyframes moveFromBottom {
    from {
        -moz-transform: translateY(100%);
    }
    to {
        -moz-transform: translateY(0%);
    }
}
@-ms-keyframes moveFromBottom {
    from {
        -ms-transform: translateY(100%);
    }
    to {
        -ms-transform: translateY(0%);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:56:12.237

我建议使用[Elliot Condon 的高级自定义字段](http://www.advancedcustomfields.com/)

# php - PHP ZF2单元测试调度方法非常慢

> ID：15383073
> 
> 赞同：6
> 
> 时间：2013-03-13T10:44:10.697
> 
> 标签：php, unit-testing, phpunit, zend-framework2, zend-test

我需要测试一个用 ZF2 编写的大型网站。有 443 个测试和大约 10000 个断言。代码覆盖率测试需要 6 个小时！我想我发现了问题：在控制器的测试中，我使用了 AbstractHttpControllerTestCase 的调度方法。每次测试后，调度方法的执行时间都会增加（从几分之一秒到几十秒）。

我使用 ZF 2.1.3、PHPUnit 3.7、PHP_CodeCoverage 1.2、Xdebug v2.2.1、PHP 5.4.7。

我的调度方法：

```
public function dispatch($url, $method = HttpRequest::METHOD_GET, $params = array())
{
    $s = microtime(true);

    parent::dispatch($url, $method, $params);

    $end = microtime(true) - $s;
    echo 'dis: '.$end."\n";

    return $this->getApplication()->getMvcEvent()->getResult();
} 
```

parent::dispatch 是来自 AbstractHttpControllerTestCase 的方法。

测试样本：

```
$result = $this->dispatch('/archive/finance/older');

$this->assertControllerName('skycontent\controller\article');
$this->assertActionName('archive');
$this->assertParamValue('older', true);
$this->assertParamValue('category', 'finance');

$vars = (array) $result->getVariables();

$this->assertArrayHasKey('archivePosts', $vars); 
```

请帮忙。谢谢。

* * *

更新：

我使用进程隔离并在大约 15 分钟内完成测试（没有代码覆盖），但在测试中出现错误，标记为已跳过：

```
PHPUnit_Framework_Exception: PHP Fatal error:  Uncaught exception 'Exception' with message 'Serialization of 'Closure' is not allowed' in -:44 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:10:04.133

两者都`Zend\ServiceManager`大量`Zend\EventManager`使用[闭包](http://php.net/manual/en/class.closure.php)。您不能序列化整个应用程序实例并期望它能够工作，因为这基本上意味着您尝试序列化定义为闭包的服务工厂和事件侦听器。

解决方案可能是使用`Bootstrap.php`类似[DoctrineORMModule](https://github.com/bjyoungblood/DoctrineORMModule/blob/0.7.0/tests/Bootstrap.php)的测试，它不会将应用程序实例保存在内存中。这是一个简化的示例：

```
require_once __DIR__ . '/../vendor/autoload.php';

$appConfig = require __DIR__ . '/TestConfiguration.php';

\YourModuleTest\Util\ServiceManagerFactory::setConfig($appConfig);

unset($appConfig); 
```

（`TestConfiguration`应该看起来像[标准 mvc 应用程序的配置](https://github.com/zendframework/ZendSkeletonApplication/blob/zf/release-2.1.0/config/application.config.php)）

您还需要`ServiceManagerFactory`. 示例实现可以在[这里](https://github.com/doctrine/DoctrineORMModule/blob/0.7.0/tests/DoctrineORMModuleTest/Util/ServiceManagerFactory.php)和[这里](https://github.com/zendframework/zf2/blob/develop/library/Zend/Test/Util/ModuleLoader.php)找到。

```
namespace YourModuleTest\Util;

class ServiceManagerFactory
{
    /**
     * @var array
     */
    protected static $config;

    /**
     * @param array $config
     */
    public static function setConfig(array $config)
    {
        static::$config = $config;
    }

    /**
     * Builds a new service manager
     * Emulates {@see \Zend\Mvc\Application::init()}
     */
    public static function getServiceManager()
    {
        $serviceManager = new ServiceManager(new ServiceManagerConfig(
            isset(static::$config['service_manager']) 
                ? static::$config['service_manager'] 
                : array()
        ));

        $serviceManager->setService('ApplicationConfig', static::$config);
        $serviceManager->setFactory(
            'ServiceListener',
            'Zend\Mvc\Service\ServiceListenerFactory'
        );

        /** @var $moduleManager \Zend\ModuleManager\ModuleManager */
        $moduleManager = $serviceManager->get('ModuleManager');
        $moduleManager->loadModules();

        return $serviceManager;
    }
} 
```

现在，无论您想在测试中的哪个位置，您都可以：

```
$serviceManager = \YourModuleTest\Util\ServiceManagerFactory::getServiceManager();
$application    = $serviceManager->get('Application');

$application->bootstrap();

// ... 
```

使用此设置，您可以在绝缘中运行测试。

另一方面，您应该首先关注真正的单元测试，因为 ZF2 确实简化了您组合复杂对象的方式。您还应该正确设置覆盖过滤器，以便不处理不相关的代码（这可能会占用大量时间）。

此外，重用 mvc 应用程序实例是错误的，因为助手不是无状态的，这使得重用它们变得困难。

# sockets - 服务器通信

> ID：15383075
> 
> 赞同：2
> 
> 时间：2013-03-13T10:44:20.870
> 
> 标签：sockets

我们有一个 Websphere 应用服务器，其中一个集群包含 2 个服务器。每个服务器都包含我们的 webapp。每个 webapp/server 通过套接字与单个 NCipher 服务器通信。NCipher 服务器在公共端口上侦听来自每个 webapp/服务器的通信。如果我们单独重启集群中的每台 Websphere 服务器，我们会发现其中一台服务器会直接连接，而另一台服务器在连接前需要多次重启。我感到困惑的是为什么一个立即连接而另一个没有。

我注意到的是 webapp 中的连接没有被关闭。不确定这可能会产生什么影响，因为其中一台服务器在重新启动后连接良好，而另一台则没有。

即使没有关闭，我猜连接也会超时，尽管关闭它们绝对是正确的做法。

有人知道为什么会发生这种情况吗？

# c# - 保护 foreach 循环免受 null 影响的更智能方法

> ID：15383078
> 
> 赞同：1
> 
> 时间：2013-03-13T10:44:22.367
> 
> 标签：c#, foreach, null

有没有比这更聪明的方法来保护`foreach`循环免受 NullReference 异常的影响：

```
if (G_Locatie.OverdrachtFormulierList != null)
{
    foreach (OverdrachtFormulier otherform in G_Locatie.OverdrachtFormulierList)
    {
        ...
    }
} 
```

我使用了很多 foreach 循环，通常是嵌套的，还有很多变量，例如 G_Lo​​cation 肯定存在，但是 datamember .OverdrachtFormulierList 可能还没有被分配一个列表使用`new`。

* * *

亲爱的朋友，感谢您的所有评论。在了解了您的建议之后，虽然在准确理解方面遇到了很多麻烦，但在挖掘了我开始研究的千层面代码之后，经过一些实验，我发现最简单和最干净的方法就是简单地避免使用 NULL，通过适当的初始化。虽然我有点抗拒必须在我的代码中初始化 OverdrachtFormulierList，但有可能忘记一个实例，但我找到了初始化的适当位置，即在原始类定义中。

为简单起见，请查看以下代码：

```
 class MyClass
    {
        public List<string> items = new List<string>();

        public IEnumerator<string> GetEnumerator()
        {
            return items.GetEnumerator();
        }
    }

    class MyComplexClass
    {
        private MyClass _itemlist /*= new MyClass()*/;
        public MyClass itemlist
        {
            get { return _itemlist; }
            set { _itemlist = value; }
        }
    }

    void Sandbox()
    {
        MyClass mc /*= new MyClass()*/;
        foreach (string Sb in mc.items)
        {
            string x = Sb;
        }

        MyComplexClass mcc = new MyComplexClass();
        foreach (string Mb in mcc.itemlist) // <--- NullReferenceException
        {
            string x = Mb;
        }

        return;
    } 
```

有趣的是，C# 似乎可以保护您免受许多错误的错误。如果您不取消注释中的初始化，此代码将不会构建`Sandbox()`，因此第一个`foreach`不会得到`NullReferenceException`.

但是，您最好取消注释 init`MyComplexClass`以避免第二个中的异常`foreach`。C# 将在有和没有这个初始化的情况下构建。

所以事实证明，在我的真实代码中，我只需要在 G_Lo​​cate 的类定义中添加一个简单的初始化。

现在唯一的问题是我一直想用上面的代码来简化上面的代码，`{get; set;}`但是用所描述的初始化是不可能的。我将不得不忍受这个小问题。

事实上，在对象类型属性上，您并不需要 setter。

最后，我意识到我找不到适合我的问题的标题。到目前为止，我遇到的每一个问题都已经在这个论坛上得到了解答，我觉得我今天才发帖只是因为我找不到类似的帖子。也许有人可以想出标题和标签，使这个解决方案更容易找到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T10:46:47.087

是的，您的集合属性应该返回空集合而不是 null。确保这一点的一种方法是使用支持字段并在 getter 中分配一个新列表：

```
private List<string> overdrachtFormulierList;

public List<string> OverdrachtFormulierList 
{
     get
     {
        return this.overdrachtFormulierList ?? 
            (this.overdrachtFormulierList = new List<string>());
     }

     set
     {
        this.overdrachtFormulierList = value;
     }
} 
```

`Enumerable.Empty<T>`如果您的类型是，您也可以使用`IEnumerable<T>`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T10:47:22.290

一种选择是创建一个扩展方法：

```
public static IEnumerable<T> EmptyIfNull<T>(this IEnumerable source)
{
    return source ?? Enumerable.Empty<T>();
} 
```

然后：

```
foreach (var otherform in G_Locatie.OverdrachtFormulierList.EmptyIfNull())
{
    ...
} 
```

请注意，最好始终使用空集合而不是空引用。

# c# - VerificationException“操作可能破坏运行时”错误与 MsgPack 和 .net 错误

> ID：15383079
> 
> 赞同：0
> 
> 时间：2013-03-13T10:44:36.477
> 
> 标签：c#, f#, msgpack

使用 MsgPack 序列化某些 F# 类型时遇到 VerificationException“操作可能破坏运行时”错误。编译器还建议可能会加载冲突的类库，但这似乎是一个红鲱鱼。

目前尚不清楚错误是由什么引起的，因此为了社区利益，请在下面发布解决方案。

* * *

回应以下评论：

```
....Sammo\bin\Debug>peverify /verbose Sammo.exe

Microsoft (R) .NET Framework PE Verifier.  Version  4.0.30319.17929
Copyright (c) Microsoft Corporation.  All rights reserved.

All Classes and Methods in Sammo.exe Verified.

....Sammo\bin\Debug>Sammo.exe
Unhandled Exception: System.Security.VerificationException: Operation could destabilize the runtime.
   at _4(MsgPackReader )
   at _3(MsgPackReader )
   at MsgPack.CompiledPacker.Unpack[T](Stream strm)
   at MsgPack.CompiledPacker.Unpack[T](Byte[] buf, Int32 offset, Int32 size)
   at MsgPack.CompiledPacker.Unpack[T](Byte[] buf)
   at <StartupCode$Sammo>.$Program.main@() in ....\Sammo\Pro
gram.fs:line 67

....\Sammo\bin\Debug> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:50:31.787

问题是 MsgPack，一个序列化库不支持特定的 DateTime 格式或约定。

然而，错误消息输出具有误导性，只有当您深入研究异常时，您才能找到有关正在发生的事情的更多线索。

作为一种替代解决方案，可以改为使用 Unix 时间戳或 .Net Ticks [100ns] 概念作为具有适当成员定义的基础值/字段来公开 System.DateTime。

# variables - 在 KSH 中将变量从孩子传递给父母

> ID：15383082
> 
> 赞同：1
> 
> 时间：2013-03-13T10:44:39.927
> 
> 标签：variables, fork, ksh, subroutine

我必须与 KSH 合作（是的，那个地狱壳）。我需要使用一个 fork，一个子程序如下：

```
 #!/bin/ksh

    PIPE=PIPE_$$
    PIPE_ERR=PIPE_ERR_$$

    export TEST_FILS

    $(. ./LanceFils.ksh 2>${PIPE_ERR} 1>${PIPE}) &
    PID_CHILD=$!
    echo "Nom du fichier PIPE: ${PIPE}"
    echo "Processus fils : " $!
    wait ${PID_CHILD}

    echo "Code retour: " $?
    echo "Sortie standard de PROC_FILS : " $(cat ${PIPE})
    echo "Sortie d'erreur(s) de PROC_FILS : " $(cat ${PIPE_ERR})

    echo "Contenu de TEST_FILS: ${TEST_FILS}"
    rm -rf ${PIPE} 
```

LanceFils.ksh 的内容

```
 #!/bin/ksh

    TIMEOUT=5

    export TEST_FILS

    echo "Je suis le script fils et j'attends ${TIMEOUT} secondes" 
    echo "Nom du pipe du pere ${PIPE}"
    sleep ${TIMEOUT}

    TEST_FILS="Je suis le fils"
    echo "Salut c'était bien !!!"
    exit 10 
```

我知道这行不通，顺便说一句，我试图找到一种方法让它工作......在我的代码中，你可以看到我想在孩子和父母之间共享 TEST_FILS 变量。KSH 有办法共享一个变量，比如在 perl 中使用“share”或者我必须使用 C 中的管道？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T10:58:09.313

变量可以从父 shell 传递到子 shell，而不是相反。但是，如果您确实需要子 shell 中设置的值，您可以采取一种解决方法。

一种可能的解决方法：在子 shell 中，将您感兴趣的环境变量及其值写入文件。回到父 shell 后，运行此文件，以便使用文件中设置的内容覆盖所需的环境变量。你可以[参考这里](http://www.theunixschool.com/2010/07/how-to-access-child-shell-env-variable.html)的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T21:09:28.813

shell 变量只是运行中的 shell 进程中的一块内存。环境变量是 shell在调用另一个程序之前复制到其*环境中的变量。*

要了解环境变量的局限性，必须了解进程*环境*的概念：它是一段内存，不在进程之间*共享*，而是在系统调用期间从一个进程*传递到另一个进程。*[`exec`](http://www.kernel.org/doc/man-pages/online/pages/man3/exec.3.html)（另见：[环境变量](https://unix.stackexchange.com/questions/17758/exception-of-inheritance-of-environment-variables)）

环境从一个进程传递到下一个进程，后续进程可以在调用另一个程序之前对其进行更改。

这个环境也有一定的限制：它只能包含一个以空指针结尾的以空字符结尾的字符串列表。本质上，它是一个字符串数组。

请注意，这些字符串不需要遵循`VARNAME=value`结构，这是早期 unix shell 采用的约定。

`ksh93` does support shell *co-processes*, though.

After starting a child process, the parent can connect to the child's stdin and stdout with the `<& p` and `>& p` redirection operators. It can be a challenge to handle these correctly, as many operations close their stdout on termination, which will close the pipe to the child.

# visual-studio-2012 - 如何让 Visual Studio 2012 使 ifdef 变灰而不是变暗

> ID：15383086
> 
> 赞同：7
> 
> 时间：2013-03-13T10:45:01.467
> 
> 标签：visual-studio-2012, syntax-highlighting

在我们的代码中，有很多段落被 ifdef 删除了。在以前版本的 Visual Studio 中，它们是灰色的。然而，在 Visual Studio 2012 中，它们不再变灰而是变暗，即这些段落以语法突出显示方案的所有颜色出现，但颜色饱和度较低。实现此功能的 Microsoft 程序员一定认为这很酷，但在实践中，很难判断段落是否处于活动状态。

有没有人找到一种方法来欺骗 Visual Studio 2012 以使用旧的方式将不活动的段落变灰？

感谢您的任何回复

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T11:04:50.977

您有一个`Opacity`可以更改的设置：

在`Tools -> Options -> Text Editor -> C/C++ -> Formatting` 您可以更改*`Inactive Code Opacity Percent`*. 默认为 65，将其更改为更高的值。
或者，如果您想完全取消它，
只需将其设置为*`Disable Inactive Code Opacity`*。`True`

![在此处输入图像描述](../Images/7478e6c51ad271c39b33beb7b81982fa.png)

# css - 在不改变整体宽度的情况下添加填充

> ID：15383088
> 
> 赞同：17
> 
> 时间：2013-03-13T10:45:11.087
> 
> 标签：css, grid, overflow, padding

如何在不添加预定义宽度的情况下向元素添加填充？

最好定义一列的宽度来为布局创建一个干净的网格；但也想为列内的内容添加填充。有什么方法可以指定吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-13T10:47:48.257

```
element { 
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-13T10:48:02.593

使用 box-sizing，它使填充包含在内： [https ://developer.mozilla.org/en-US/docs/CSS/box-sizing](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)

例子：

```
div {
    box-sizing:border-box;
    -moz-box-sizing:border-box; /* Firefox */
    -webkit-box-sizing:border-box; /* Safari */
} 
```

值得注意的是，这不适用于 IE7。

对于 IE8，请参阅此问题的最佳答案：[box-sizing:border-box => for IE8？](https://stackoverflow.com/questions/11608291/box-sizing-border-box-for-ie8)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T11:19:24.540

每次向块元素添加填充时，该元素的宽度都会发生变化。这个问题有很多解决方案。我通常设置`margin`为第一个子元素并`width: 100%`为此元素设置。

例如，我们有：

```
<div id="main">
    <div id="child">
        This is content with margin
    </div>
</div> 
```

这些元素的 CSS 样式：

```
#main {
    border: solid 1px red;
    float: left;
    width: 5em;
}

#child {
    border: solid 1px blue;
    float: left;
    width: 100%;
    margin: 0.5em;
} 
```

这是任何浏览器的解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-23T00:11:58.717

这是一个旧线程，我知道。但是上次我有一个完整的黑洞，关于制作一个没有设置宽度和填充的 DIV，所以它不会炸毁我的 3 列行和 CSS2。所以我放了一个左浮动的DIV，右浮动的DIV，在它们之间放置一个没有浮动且没有固定宽度的DIV，但我想在其中添加填充。那个怎么样...

我放弃了。:D 但我在中间放了一个内部 DIV 并给它 width=90%。到目前为止一切顺利，这是一个非常简单但不是很好的解决方案，但有时它有助于实现您需要的外观。;]

br

# java - 尝试运行引用库的精简版时出现 ClassNotFoundException

> ID：15383091
> 
> 赞同：0
> 
> 时间：2013-03-13T10:45:21.377
> 
> 标签：java, android, classnotfoundexception, android-library

我的主要项目正在工作并完成。我开始研究如何制作精简版/专业版，现在一切都搞砸了。`Android Library`我制作了名为an 的主项目`BibleTrivia`，现在有两个其他项目引用它，它们分别命名为`BibleTriviaLite`和`BibleTriviaPro`. 我以为我已经完成了所有工作，但是当我尝试运行精简版时，`ClassNotFoundException`当它试图找到第一个活动时，我得到了一个`SplashScreen`. 精简版和专业版是一样的`SplashScreen`，所以我在库项目中有它。

我的问题是如何让这个结构正确，这样我就可以运行我的精简版和专业版而没有这个例外。

我在`LogCat`下面展示了我的输出和我的文件结构。如果您需要任何进一步的信息，请告诉我。

日志猫

```
03-09 02:10:52.745: E/AndroidRuntime(4706): FATAL EXCEPTION: main
03-09 02:10:52.745: E/AndroidRuntime(4706): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{matt.lyons.bibletrivia.lite/matt.lyons.bibletrivia.lite.SplashScreen}: java.lang.ClassNotFoundException: Didn't find class "matt.lyons.bibletrivia.lite.SplashScreen" on path: /data/app/matt.lyons.bibletrivia.lite-1.apk
03-09 02:10:52.745: E/AndroidRuntime(4706):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at android.os.Looper.loop(Looper.java:137)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at java.lang.reflect.Method.invokeNative(Native Method)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at java.lang.reflect.Method.invoke(Method.java:511)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at dalvik.system.NativeStart.main(Native Method)
03-09 02:10:52.745: E/AndroidRuntime(4706): Caused by: java.lang.ClassNotFoundException: Didn't find class "matt.lyons.bibletrivia.lite.SplashScreen" on path: /data/app/matt.lyons.bibletrivia.lite-1.apk
03-09 02:10:52.745: E/AndroidRuntime(4706):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-09 02:10:52.745: E/AndroidRuntime(4706):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-09 02:10:52.745: E/AndroidRuntime(4706):     ... 11 more 
```

![在此处输入图像描述](../Images/5848e5c470ffa48f857aec0df832f294.png)

**编辑**

这是我的精简版的开始`AndroidManifest`。这`LogCat`就是 SplashScreen 活动的说法`ClassNotFoundException`，因此它会读取下面的清单，但随后无法找到 SplashScreen 启动器活动。

```
<manifest 
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="matt.lyons.bibletrivia.lite"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/icon_lite"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".SplashScreen"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action
                    android:name="android.intent.action.MAIN" />
                <category
                    android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
            android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />
        <activity
            android:label="@string/app_name"
            android:name=".About"
            android:screenOrientation="portrait" />
    ...
    ...more activities...
    ...
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:52:34.317

正如原始邮件建议的那样，我发布的评论有一个答案，因为它解决了问题。

在您发布的图片中，我可以看到 SplashScreen Activity 类位于包**matt.lyons.bibletrivia**中。有了这些信息，连同你的清单文件，我可以得出以下结论：

1.  您将默认包定义为**matt.lyons.bibletrivia.lite**对清单文件中的*包属性执行*

2.  您正在定义 SplashScreen 活动，就好像它在默认包中一样，因为您将活动定义为**android:name=".SplashScreen"**。这导致查找不存在的类 matt.lyons.bibletrivite.lite.SplashScreen。

要解决您的问题，您只需使用完整的类名定义 SplashScreen 活动，这意味着：

```
android:name=".SplashScreen" 
```

应替换为

```
android:name="matt.lyons.bibletrivite.SplashScreen" 
```

一切都应该正常工作。

# cloud-foundry - VMC PUSH 的 REST API URL

> ID：15383094
> 
> 赞同：0
> 
> 时间：2013-03-13T10:45:27.700
> 
> 标签：cloud-foundry

这个问题是关于 REST API URL 用于 curl 等效于 VMC 推送新应用程序。

我已经在[http://apidocs.cloudfoundry.com/http-apps](http://apidocs.cloudfoundry.com/http-apps)参考了 Cloud Foundry 的 api 文档，用于将各种 REST API URL 映射到 vmc 命令。但是，我没有找到用于推送新应用程序的 REST API URL。我尝试使用 POST html 请求部署新应用程序，但返回 504 BAD GATEWAY 响应。下面是 curl 命令：

```
curl --request POST http://api.cloudfoundry.com/apps --data @data.json --header "Authorization: bearer token" 
```

data.json 的内容如下：

```
{"name": "mywebapp45",  "staging": {"model": "spring","stack": "java"}, "uris": [    "mywebapp45.cloudfoundry.com"], "instances": 1, "resources": {"memory": 256},"state": "STARTED"}` 
```

并且 Web 应用程序存档位于我执行 curl 命令的同一目录中。

对此的任何见解都非常感谢。非常感谢您提前提供的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:25:03.070

基于语言，我希望你尝试 cfoundry ruby​​ 客户端：rubygems.org/gems/cfoundry，java 客户端：github.com/cloudfoundry/vcap-java-client，或者 Node.js 客户端也可以可以在 github 上找到。

# css - CSS3 PIE：相同的样式，不同的呈现方式

> ID：15383095
> 
> 赞同：1
> 
> 时间：2013-03-13T10:45:34.133
> 
> 标签：css, css3pie

我正在使用 CSS3 PIE 使框阴影属性在 IE 8 中工作。正如您在图像中看到的，我有 3 个具有相同样式的框，但只有一个（第一个）按我的意愿呈现。

![在此处输入图像描述](../Images/7391ce6f65db46a2e28630e5f2a70691.png)

HTML

```
<div class="grid_22">
    <div class="panel_third">
        <!--WHATEVER-->
    </div>
    <div class="panel_third panel2">
        <!--WHATEVER-->
    </div>
    <div class="panel_third panel3">
        <!--WHATEVER-->
    </div>
</div> 
```

CSS

```
.panel_third{
   float: left;
   height: 317px;
   width: 206px;
   padding: 30px;
   margin-right:31px;
   background: #ffffff;
   position: relative;
   -webkit-box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.16);
   -moz-box-shadow:    0px 0px 5px rgba(0, 0, 0, 0.16);
   box-shadow:         0px 0px 5px rgba(0, 0, 0, 0.16);

   /**http://css3pie.com**/
   behavior: url(../../../../../dashboard/resources/main/js/libs/pie/PIE.htc);
}
.panel2{
  background: url(../img/Box-2-BG.png) no-repeat;
}
.panel3{
  background: url('../img/Box-3-BG.png') no-repeat;
  margin-right: 0;
  float: right;
} 
```

[http://jsfiddle.net/QV3GF/](http://jsfiddle.net/QV3GF/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:05:43.107

像这样给它

```
.grid_22>div    
{
-webkit-box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.16);
   -moz-box-shadow:    0px 0px 5px rgba(0, 0, 0, 0.16);
   box-shadow:         0px 0px 5px rgba(0, 0, 0, 0.16);

   /**http://css3pie.com**/
   behavior: url(../../../../../dashboard/resources/main/js/libs/pie/PIE.htc);
} 
```

它为 .grid_22 的所有直接子 div 提供阴影

# android - 片段 onResume 未调用

> ID：15383096
> 
> 赞同：8
> 
> 时间：2013-03-13T10:45:35.163
> 
> 标签：android, android-fragments, android-fragmentactivity, onresume

我有 4 个（比如说 1、2、3 和 4 个）片段。并且一次它们中的任何一个都将对用户可见。在第二个片段中，我想在用户使用它时做一些事情。现在，当用户导航到第三个片段并点击后退按钮时，我想运行一些代码。我的问题是`onResume`当用户点击后退按钮并进入第二个片段时没有被调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-20T13:44:04.693

我最近遇到了同样的问题，我知道为时已晚，但以防万一其他人正在寻找这个，这是我的答案：

感谢@fasteque 缩小了我的搜索范围。

只有在调用活动或时才会调用片段`onResume()`或。它们与 Activity 紧密耦合。`onPause()``onResume()``onPause()`

但是如果你仍然想听你的活动中的变化，比如哪个片段在上面，并相应地触发事件，你可能想看看[FragmentManager.OnBackStackChangedListener](http://developer.android.com/reference/android/app/FragmentManager.OnBackStackChangedListener.html)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-03T12:11:41.323

我有同样的问题。如果您想从第三个片段切换到第二个片段（使用后退按钮或其他方式），您可以在第三个片段的 onPause 中调用第二个片段。

```
@Override
public void onPause() {
    super.onPause();

     Fragment2 fragment2= (Fragment2) getActivity().getSupportFragmentManager().findFragmentById(R.id.fragment2);
     if (fragment2!= null) {
         //you can call any function from fragment2
         fragment2.SomeFunctions();
     }
} 
```

# ant - Ant System Class Loader 不支持 $CLASSPATH，支持 $LOCALCLASSPATH

> ID：15383099
> 
> 赞同：0
> 
> 时间：2013-03-13T10:45:38.757
> 
> 标签：ant, classpath, classloader

我正在实现一个 ant 任务作为另一个类的包装器，该类使用系统类加载器加载其他几个类。现在，任务在这些其他类的同一个 jar 中，所以我想知道为什么它没有找到它们，因为任务*正在*运行

请注意，我的类在`$CLASSPATH`env 变量中。如果我不会出现问题`export LOCALCLASSPATH=$CLASSPATH`

最小的例子：

```
<taskdef name="mytask" classname="my.package.MyTask"  />

<target name="compile">
    <mytask />
</target> 
```

你可以很容易地看到这里的问题

```
public class MyTask extends Task {
   public void execute() throws BuildException {
    try {
        ClassLoader cl = ClassLoader.getSystemClassLoader();

        // this will only print the ant jar file path
        for(URL url: ((URLClassLoader)cl).getURLs()){
        log(url.getFile());
        }

        cl.loadClass("my.package.OtherClass"); // throws an exception

    } catch (Exception ex) {
        throw new BuildException(ex);
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:16:16.587

shell 脚本在`ant`内部修改了类路径，因此 SystemClassLoader 只包含“真实”类路径的最小部分

tl;博士：使用

```
 ClassLoader cl = Thread.currentThread().getContextClassLoader(); 
```

代替

```
 ClassLoader cl = ClassLoader.getSystemClassLoader(); 
```

来自邮件列表，[Rainer Noack](http://mail-archives.apache.org/mod_mbox/ant-user/201303.mbox/browser)：

> 如果您通过 shell 脚本启动 ant，它使用的是 oata.launcher.Launcher.java
> 
> 这个类稍微重新组织了类路径。环境变量 CLASSPATH 和类路径命令行参数被剥离并替换为用于启动 ant 的最小类路径。系统类加载器的子类加载器是使用原始 CLASSPATH 条目创建的。然后使用这个类加载器加载 oata.Project。

问题在于实际上没有改变加载器，`ClassLoader.getSystemClassLoader()`可以使用`Thread.currentThread().getContextClassLoader()`.

# ios - 如何访问 Instagram 图像

> ID：15383101
> 
> 赞同：3
> 
> 时间：2013-03-13T10:45:41.887
> 
> 标签：ios, objective-c, instagram

我有一个应用程序，我想从 instagram 或 cameraroll 获取图像，然后使用这些图像。如何从 Instagram 中挑选图片？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:55:23.293

您只能使用 instagramAPI 在您的 iOS 应用程序中访问 Instagram 图像。
如果您不熟悉 iOS 中的社交媒体集成，请注意 iOS 中的任何社交媒体集成都需要相应的 API。您应该从他们的文档[instagramAPI开始。](http://instagram.com/developer/)[此处](http://instagram.com/developer/iphone-hooks/)还描述了访问方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T03:26:00.550

你可以检查这个简单的框架[https://github.com/Busta117/SBInstagram](https://github.com/Busta117/SBInstagram)

您可以更改用户点击图像的时间并让您的 UIimage 在您想要的地方使用它。

# netbeans - Netbeans 中的 Jaxb 解组错误

> ID：15383114
> 
> 赞同：1
> 
> 时间：2013-03-13T10:46:08.050
> 
> 标签：netbeans, jaxb, unmarshalling

我已经使用带有xsd的jaxbbinding在netbeans中创建了java类。我在一个名为“Generated sources(jaxb)”的包下创建了3个类，其中有一个名为generated的包。我创建了一个用于解组的类，我在其中导入了生成.*; 但它显示一个错误

```
error: package generated does not exist

      import generated.*; 
```

在运行时。虽然在编译期间没有显示错误。

# jsf-2 - JSF 2.0：JSR-303 bean 验证的存在对自定义 JSF-Validators 有影响吗？

> ID：15383117
> 
> 赞同：0
> 
> 时间：2013-03-13T10:46:17.333
> 
> 标签：jsf-2, bean-validation, myfaces, hibernate-validator

我现在负责一个 JSF 2.0 应用程序，其中所有内容都通过自定义验证器进行验证，这完全破坏了 *.xhtml 文件。我尝试将验证迁移到 JSR-303 bean 验证，效果很好。

由于 JSR-303 不验证类级别的约束，我不想保留一个自定义验证器来验证请求表单至少有一个字段已填充。

验证器注册到每个字段并获取一个字符串数组，其中包含其他字段的名称，它必须检查输入。问题是，当 JSR-303 出现在类路径中时，自定义验证器的属性未设置，因此它不知道其他字段的名称。验证器仍会被触发，但最终会显示一条消息，即未提供任何输入。

我已经查看了日志文件输出，但唯一的区别是

```
11:22:50,403 INFO  [Version] Hibernate Validator 4.2.0.Final
11:22:50,450 INFO  [ExternalSpecifications] MyFaces Bean Validation support enabled 
```

代替

```
11:02:10,472 INFO  [ExternalSpecifications] MyFaces Bean Validation support disabled 
```

另一个区别是以下输出，当第一次触发验证时，当 JSR-303 存在时出现：

```
11:23:09,906 INFO  [_ExternalSpecifications] MyFaces Unified EL support disabled
11:23:09,906 INFO  [_ExternalSpecifications] MyFaces Bean Validation support enabled 
```

我在 JBoss 5.1 jdk6 上使用 MyFaces 2.0、Hibernate Validator 4.2

**更新**：

```
<cc:formular bean="#{bankenBean}">
        <h:outputLabel for="bankleitzahl">
            <span class="kurztaste">B</span>ankleitzahl:</h:outputLabel>
        <h:inputText id="bankleitzahl" accesskey="b" size="10" maxlength="8"
            value="#{bankenBean.bankleitzahl}">
            <audi:notEmptyValidator dependsOn="bic name ort"
                detail="Eines dieser Felder muss gefüllt sein." />
        </h:inputText>
        <h:message for="bankleitzahl" errorClass="fehlertext" />
        <h:outputLabel for="bic">B<span class="kurztaste">I</span>C:</h:outputLabel>
        <h:inputText id="bic" accesskey="i" size="12" maxlength="11"
            value="#{bankenBean.bic}">
            <audi:notEmptyValidator dependsOn="bankleitzahl name ort"
                detail="Eines dieser Felder muss gefüllt sein." />
        </h:inputText>
        <h:message for="bic" errorClass="fehlertext" />
        <h:outputLabel for="name">
            <span class="kurztaste">N</span>ame der Bank:</h:outputLabel>
        <h:inputText id="name" accesskey="n" size="35" maxlength="58"
            value="#{bankenBean.name}">
            <audi:notEmptyValidator dependsOn="bankleitzahl bic ort"
                detail="Eines dieser Felder muss gefüllt sein." />
        </h:inputText>
        <h:message for="name" errorClass="fehlertext" />
        <h:outputLabel for="ort">
            <span class="kurztaste">O</span>rt der Bank:</h:outputLabel>
        <h:inputText id="ort" accesskey="o" size="35" maxlength="35"
            value="#{bankenBean.ort}">
            <audi:notEmptyValidator dependsOn="bankleitzahl bic name"
                detail="Eines dieser Felder muss gefüllt sein." />
        </h:inputText>
        <h:message for="ort" errorClass="fehlertext" />
    </cc:formular> 
```

这就是使用 notEmptyValidator 的地方。它在 facelets.taglib.xml 中定义：

```
<?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib version="2.0"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd">

<namespace>http://rzf.finnrw.de/audi</namespace>
<tag>
    <tag-name>notEmptyValidator</tag-name>
    <validator>
        <validator-id>de.finnrw.rzf.audi.NotEmptyValidator</validator-id>
    </validator>
    <attribute>
        <name>dependsOn</name>
        <type>java.lang.String</type>
    </attribute>
    <attribute>
        <name>detail</name>
        <type>java.lang.String</type>
    </attribute>
</tag> 
```

当 JSR-303 出现在类路径中时，此自定义验证器仍被注册为触发。但它没有设置它的属性，因此不知道它必须检查的字段。

# javascript - 如何为 JavaScript 数组的每个元素赋予不同的“类型”？

> ID：15383119
> 
> 赞同：0
> 
> 时间：2013-03-13T10:46:26.980
> 
> 标签：javascript, arrays, associative-array

我有一个包含许多图像的 JavaScript 数组。这些图像都是从我的 HTML 中的一个隐藏部分使用的，例如

```
sources[0] = document.getElementById("building").src 
```

我从 HTML 而不是直接从源获取图像的原因是因为我想在[HTML5](http://en.wikipedia.org/wiki/HTML5)画布上显示大约 30 个图像，如果我要将它们直接从源加载到 JavaScript 代码中，页面会占用加载时间很长，所以我将它们“预加载”在我的 HTML 的隐藏部分中，然后从那里将它们加载到 JavaScript 代码中。

因此，我使用以下内容创建了我的 JavaScript 数组：

```
var sources = [];
sources[0] = document.getElementById("building").src,
sources[1] = document.getElementById("chair").src,
.... 
```

`sources`（将图像添加到数组中大约有 30 行）。

这个想法是会有四五种不同“类型”的图像（即，一些是资产，另一些是负债等），用户需要将每个图像拖到其对应的描述框（也显示在画布上）。

所以我想做的是将图像放入一个数组中的不同“组”中。我已经研究过了，我的理解是最好的方法是使用关联数组，例如：

```
var sources = {
    name1 : ["name1", "place1", "data1"],
    name2 : ["name2", "place2", "data2"],
    name3 : ["name3", "place3", "data3"]
}; 
```

但我不确定如何在我目前拥有的环境中使用它......我会做类似以下的事情吗？

```
var sources = {
    asset1 : document.getElementById("building").src,
    asset2 : document.getElementById("chair").src,

    liability1: document.getElementById("electricity").src,
    ...
}; 
```

当用户将图像拖动到他们认为属于的描述框时，我将如何检查图像是否属于它被拖动到的描述框？

我打算检查图像是否已被拖动到正确的描述框的方式是，当在“可拖动”图像之一上检测到事件时，将布尔值设置为“真” `mousedown`，并跟踪光标在画布上移动时的 x 和 y 坐标。

然后，当`mouseup`事件被触发时，我将检查光标在该点的坐标。如果光标已将图像拖放到绘制描述框之一的位置（例如，x 介于 50-100 之间，y 介于 150-200 之间是资产描述框所在的位置，负债描述框位于 x 150 -200, y 150-200)，然后我将检查哪个描述框位于该位置（循环遍历描述框位置数组，并检查哪个位于光标位置，如果有的话）。

一旦我在该位置获得了描述框的名称，我将检查刚刚丢弃的图像是什么“类型”，如果它与丢弃位置的框匹配，它将从画布，如果不是，它将被拉回到用户最初“拾取”的位置。

我不确定如何执行此操作，我如何访问用户从数组中单击的图像的“类型”？

* * *

**编辑 2013-03-13T14:15**

所以我已经给出了建议的答案。但是，当我现在在浏览器中查看我的页面时，没有显示画布，并且我在控制台中收到“未捕获的异常”错误。此错误消息说：

> 未捕获的异常：[异常...“组件返回失败代码：0x80040111（NS_ERROR_NOT_AVAILABLE）[nsIDOMCanvasRenderingContext2D.drawImage]”nsresult：“0x80040111（NS_ERROR_NOT_AVAILABLE）”位置：“JS 框架 :: file:///M:/year%205 /major%20project/development/collision/kinetic.js :: :: line 4250" 数据：无]

我想知道这是否是因为我在这个函数末尾调用的函数......？为了进一步解释，我在函数`sources`内部创建和使用数组。`window.onload`它目前看起来像这样：

```
window.onload = function(){
    var sources = {
        assets: [],
        liabilities: [],
        income: [],
        expenditure: []
    }
    console.log("the code reaches here");
    sources.assets[0] = document.getElementById("building").src,
    sources.assets[1] = document.getElementById("chair").src,
    sources.assets[2] = document.getElementById("drink").src,
    sources.assets[3] = document.getElementById("food").src,
    sources.assets[4] = document.getElementById("fridge").src,
    sources.assets[5] = document.getElementById("land").src,
    sources.assets[6] = document.getElementById("money").src,
    sources.assets[7] = document.getElementById("oven").src,
    sources.assets[8] = document.getElementById("table").src,
    sources.assets[9] = document.getElementById("van").src,

    sources.liabilities[10] = document.getElementById("burger").src,
    sources.liabilities[11] = document.getElementById("chips").src,

    /* I have loads of lines like this, adding in roughly 30 images */

    /*Maybe create an array of attributes within each position
      of this array, so that I have access to all of each
      element's attributes. */

    /*Create an associative array for the images and their types*/
    var imageTypes = new Array();

    /*Use a loop to populate the associative array, declare variables for the total number
      of items in each group, declare a variable for the item being for example: */

    var numAssets = 10;
    var numLiabilities = 5;
    var numEx = 11;
    var numInc = 8;

    // Error checking- check total of these numbers adds up to the number elements in sources array.

    var j = 0; // This is to indicate the location of the image in sources array

    loadImages(sources, drawImage);
    drawGameElements();
    drawDescriptionBoxes();
    //drawBox();

    stage.add(imagesLayer);
}; 
```

由于我在函数末尾调用的其他函数之一，画布现在没有显示`window.onload`吗？但是这些函数调用在我更改`sources`数组之前执行正确，所以我在`sources`数组中更改的内容可能有问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T10:56:30.757

我建议将您的来源对象重组为：

```
var sources = {
  assets: [],
  liabilities: []
};

sources.assets[0] = document.getElementById("building").src;
sources.assets[1] = document.getElementById("chair").src;
...
sources.liabilities[0] = document.getElementById("electricity").src;
... 
```

来源对象是可选的，您可以只拥有资产和负债数组。

然后您可以使用这个答案： [如何确定对象是否在数组](https://stackoverflow.com/questions/4587061/how-to-determine-if-object-is-in-array) 中以找出所选图像的“类型”。

* * *

或者，您可以根据图像的“类型”向图像添加一个类，然后在用户选择时进行检查。

# javascript - 如何在 jquery 模板中检查值是否在数组中、if 条件内？

> ID：15383124
> 
> 赞同：0
> 
> 时间：2013-03-13T10:46:35.540
> 
> 标签：javascript, jquery, web, jquery-templates

我有一个 jQuery 模板，我需要检查列表中的复选框，其值在数组内。我正在尝试以下代码，但它不起作用：

```
{{each loginProvidersList}}
  {{if inArray($value.Id, settings.LoginProviders) }}
    <input id="${$value.Id}" type="checkbox" name="LoginProviders[]" value="${$value.Id}" checked="checked" /> ${$value.Name}<br />                     
  {{else}}
    <input id="${$value.Id}" type="checkbox" name="LoginProviders[]" value="${$value.Id}" /> ${$value.Name}<br />                     
  {{/if}}
{{/each}} 
```

settings.LoginProviders 包含一个数组，其中包含已从数据库加载的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:01:02.810

我发现了错误。

首先 inArray 不返回布尔值，而是返回项目所在的索引（如果未找到则返回-1）。另外，我忘记了函数开头的 $ 。正确的代码是这样的：

```
{{each loginProvidersList}}
  {{if $.inArray($value.Id, settings.LoginProviders) != -1 }}
    <input id="${$value.Id}" type="checkbox" name="LoginProviders[]" value="${$value.Id}" checked="checked" /> ${$value.Name}<br />                     
  {{else}}
    <input id="${$value.Id}" type="checkbox" name="LoginProviders[]" value="${$value.Id}" /> ${$value.Name}<br />                     
  {{/if}}
{{/each}} 
```

# javascript - jQuery/jQueryUI 冲突

> ID：15383126
> 
> 赞同：6
> 
> 时间：2013-03-13T10:46:42.907
> 
> 标签：javascript, jquery

我正在使用一些 jquery 文件进行自动完成和日期时间选择器控制，但其中 3 个文件是冲突的：

1.  自动完成的两个文件是

    ```
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script> 
    ```

2.  日历日期时间选择器的一个文件是：

    ```
    <script  src="../assets/js/jquery-1.8.3.min.js"></script> 
    ```

当我评论日期时间选择器文件自动完成工作并且如果我取消评论它自动完成停止时，这 3 个文件是冲突的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T10:49:56.853

如果你想包含两个 js 文件，你可以..

```
 <!-- load jQuery 1_8_3 -->
    <script  src="../assets/js/jquery-1.8.3.min.js"></script> 
    <script type="text/javascript">
    var jQuery_1_8_3 = $.noConflict(true);
    </script>

    <!-- load jQuery 1.4.2 -->
    <script type="text/javascript" src="jquery/jquery-1.4.2.js"></script>
    <script type="text/javascript">
    var jQuery_1_4_2= $.noConflict(true);
    </script> 
```

最好避免页面中有多个版本..最好将适当的jquery-UI版本与jquery版本一起使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:54:15.057

如果你只尝试这些，我认为你很高兴：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js">
</script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.10.1/jquery-ui.js">
</script> 
```

`No need to add other versions of jquery.`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T10:55:36.587

这可能是因为您包含 jQuery 2 次。一个旧版本和一个新版本。

我建议您尝试使用最新版本的 jQuery 和 jQuery UI，并检查一切是否仍然有效。

# ios - NSPredicate 用于手机号码验证

> ID：15383130
> 
> 赞同：3
> 
> 时间：2013-03-13T10:46:52.323
> 
> 标签：ios, xcode, nspredicate

如何通过 NSPredicate 验证电话号码（NSString *）？

规则：

最少 10 位数字

最多 10 位数字

第一个数字必须是 7,8 或 9 谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T11:04:28.553

基于`NSPredicate`正则表达式的将满足您的要求。

```
NSString *stringToBeTested = @"8123456789";

NSString *mobileNumberPattern = @"[789][0-9]{9}";
NSPredicate *mobileNumberPred = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", mobileNumberPattern];

BOOL matched = [mobileNumberPred evaluateWithObject:stringToBeTested]; 
```

您不需要将模式单独保留在字符串中，但是正则表达式已经足够复杂，因此如果您将其保留在`NSPredicate`格式字符串之外，它会使整体代码更清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-26T11:27:38.390

You can just use below code

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string;   // return NO to not change text
 {
  if(textField.tag == 111)
    {
    if([self MobileNumberValidate:string] == TRUE)
    return YES;
    else
    return NO;
}
return YES;
}

#pragma mark - Mobile Number validation
- (BOOL)MobileNumberValidate:(NSString*)number
{
NSString *numberRegEx = @"[0-9]";
NSPredicate *numberTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", numberRegEx];
if ([numberTest evaluateWithObject:number] == YES)
    return TRUE;
else
    return FALSE;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:02:38.677

```
 NSString *phoneNumber = @"1234567890";
    NSString *phoneRegex = @"[789][0-9]{3}([0-9]{6})?"; 
    NSPredicate *test = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", phoneRegex]; 
    BOOL matches = [test evaluateWithObject:phoneNumber]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-29T06:43:51.300

下面的代码将满足您的要求：

功能：

```
-(BOOL)validatePhone:(NSString *)enteredPhoneNumber
{
    NSString *phoneRegex = @"[789][0-9]{9}";
  // OR below for advanced type 
  //NSString *phoneRegex = @"^((\\+)|(00))[0-9]{6,14}$";

    NSPredicate *phoneTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", phoneRegex];

    return [phoneTest evaluateWithObject:enteredPhoneNumber];
} 
```

叫它：

```
if ([self validatePhone:@"9833112299"])
        {
            NSLog(@"Valid Phone Number");
        }
        else
        {
            NSLog(@"Invalid Phone Number");
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-30T13:50:49.050

# 使用“扩展”使其成为全球性，在需要的地方使用它

**在最后一个}之后**的任何一个视图控制器类中粘贴下面的代码

```
extension String
{
func validateMobile() -> Bool
{
    return NSPredicate(format: "SELF MATCHES %@","[789][0-9].{9}").evaluate(with: self)
 }
 } 
```

当您想在任何 ViewController 类中验证 yourTxtField 时，只需调用如下：

```
if (yourTxtField.text?.validateMobile())!
{
 print("It is 10 digit, starting with 7/8/9")
}
else
{
 print("Invalid mobile number")
} 
```

# sql - 在 SQL Server 2008 中插入一些值后更新表

> ID：15383132
> 
> 赞同：0
> 
> 时间：2013-03-13T10:46:59.277
> 
> 标签：sql, sql-server-2008, stored-procedures, insert-update

我正在尝试在 SQL Server 2008 中编写一个存储过程，该过程在将某些值插入表后更新表。

我的存储过程从 DMV 获取值并将它们存储在表中。在插入查询之后的相同过程中，我为同一个表编写了更新查询。

插入结果填充得很好，但更新的结果会丢失。

但是当我尝试只在存储过程中插入并手动执行更新查询时，一切都很好。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:08:39.860

这不应该有问题。

下面的代码按预期工作。

```
create procedure dbo.test

as

begin 

create table #temp (
name varchar(100) ,
id int
)

insert #temp
select name ,
       id 
from master..sysobjects

update #temp

set name='ALL Same'

from #temp

select * from #temp

drop table #temp

end
go 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:05:07.173

最好的方法是使用[Trigger](http://msdn.microsoft.com/en-us/library/ms189799.aspx)，触发器示例`AFTER UPDATE`如下：

```
ALTER TRIGGER [dbo].[tr_MyTriggerName]
   ON [dbo].[MyTableName] AFTER UPDATE
AS 
BEGIN
    SET NOCOUNT ON;
    --if MyColumnName is updated the do..
    IF UPDATE (MyColumnName) 
    BEGIN

        UPDATE MyTableName
        SET    AnotherColumnInMyTable = someValue
        FROM   MyTableName  
               INNER JOIN Inserted  
               ON MyTableName.PrimaryKeyColumn = Inserted.PrimaryKeyColumn 
    END
END 
```

# c# - NameValueCollection.Get() 替代 DataRow

> ID：15383134
> 
> 赞同：0
> 
> 时间：2013-03-13T10:47:02.240
> 
> 标签：c#, datarow, datacolumn

我可以安全地从`NameValueCollection`using获取值`NameValueCollection.Get()`，如果键不存在，则返回 null。

然而很多时候我想尝试加载一个`DataColumn`值，不幸`dr["BadColumn"]` 的是会抛出一个异常。

有没有比创建检查方法更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:55:11.717

听从@Tim Schmelter 的建议。如果您愿意，您可以在 DataRow 的扩展方法中执行该检查，并且还可以为您想要其他值而不是 null 的场景提供替代默认值。

```
public static Object GetOrDefault(this DataRow dr, String columnName, String defaultValue = null)
{
    if (dr.Table.Columns.Contains(columnName)) return dr[columnName];
    return defaultValue;
} 
```

# sql - 查询中行的固定值

> ID：15383135
> 
> 赞同：1
> 
> 时间：2013-03-13T10:47:08.390
> 
> 标签：sql, database, oracle, select

考虑这个 SQL：

```
SELECT c1 AS C1, 
       1  AS NO 
FROM   t1 
WHERE  c1 = 'abc' 
UNION 
SELECT c1 AS C1, 
       2  AS NO 
FROM   t2 
ORDER  BY NO 
```

您可能会注意到，union 之前的第一个 select 语句只是绕过向第二个查询返回的列表添加新值。

有没有办法不参与`t1`查询？我觉得这是不必要的，但我无法用这个查询做任何更好的事情。

结果：

```
C1    |NO
---------------
abc   |1
def   |2
ghi   |2
jkl   |2
mno   |2
etc   |2
--------------- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T10:53:06.863

添加`1 AS NO`时，您可以添加`'abc' AS C1`：

```
SELECT 'abc' AS C1, 
        1 AS NO 
   FROM DUAL
UNION 
SELECT c1 AS C1, 
       2 AS NO 
   FROM t2 
ORDER BY NO; 
```

# visual-studio-2012 - 如何在VS2012中设置控制台应用程序

> ID：15383136
> 
> 赞同：0
> 
> 时间：2013-03-13T10:47:14.623
> 
> 标签：visual-studio-2012, console-application, setup-project

我想在 VS2012 中为我的控制台应用程序进行设置。但是，没有显示在 otherProjects> setup project

有什么帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T10:57:08.960

文件菜单 > 创建项目 > Visual C# / Visual Basic > Windows > 控制台应用程序 :)

按照这个

# javascript - 第一次在 javascript /jquery 中运行该函数时不做任何事情

> ID：15383139
> 
> 赞同：1
> 
> 时间：2013-03-13T10:47:19.400
> 
> 标签：javascript, jquery, function, loops, if-statement

问题是如果它是第一次运行，我需要中断该功能是否有任何可用的功能，或者我必须执行以下操作？

```
var times = 1

function abc () {
    if (times == 1)
      break;
    else
      .....
    times++;
} 

times = 0; 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:51:57.127

您可以使用此模式：

```
function abc() {

    if (!abc.flag) {
        abc.flag = true;
        return;
    }

    // .. rest of the code
} 
```

它基于 Function 也是 Javascript 中的对象这一事实。

基本上这是一种记忆模式。它的缺点是该`flag`属性可以被另一个代码覆盖。优点是您不需要使用其他变量污染全局范围。

*thg435*提出了更优雅的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:55:20.907

在我看来，您试图在错误的地方解决问题。你能告诉我们整个故事吗？

与此同时，这样的事情应该可以解决问题：

```
function abc() {
    abc = function() {
         // ...actual work...
    }
} 
```

详细信息取决于您的函数的定义方式（全局、本地、作为方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:49:48.727

```
var isFirstTime = true;

function abc () {
    if (isFirstTime)
    {
        isFirstTime = false;
        return;
    }
    .....
} 

abc(); //returns
abc(); //runs 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T10:50:33.673

```
 var firstTime= true

    function abc () {
        if (firstTime)
        {
              firstTime = false;
              return;
        }

        else
        {
          .....
        }

     } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T11:13:49.400

试试这个 ：

```
var times = 1;

function abc () {
if (times == 1){}     
else{
  .....
times == 0;}
} 
```

# c++ - switch 中的 throw 语句

> ID：15383146
> 
> 赞同：0
> 
> 时间：2013-03-13T10:47:54.863
> 
> 标签：c++, switch-statement, throw

我尝试运行代码，但我无法理解 throw 语句在这部分中的作用，我认为我们可以在 try-catch 块中使用“throw”语句。任何人都可以帮助我这个例子：

```
switch(npt) {
  case 1: {
    a = NPoint1;
    b = NLine1;
    break;
  }
  .
  .
  .
  case 5: {
    a = NPoint2;
    b = NLine2;
    break;
  }
  default:
    printf("what you entered is wrong");
    throw 1;
  };
  return 1;
} 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:50:04.433

`throw`被最近的`try-catch`方块捕获。如果它不在您自己的代码中，则它在调用您的代码的代码中，依此类推。

# single-sign-on - 如何刷新/保持 CAS 服务器上的“父”会话

> ID：15383148
> 
> 赞同：0
> 
> 时间：2013-03-13T10:47:55.977
> 
> 标签：single-sign-on, cas

我正在针对 CAS 服务器进行集成。用户登录到那里，被转发到执行 CAS 验证的脚本，获取用户并登录。这一切都很好。

集成规范的一部分是确保我们每 60 秒 ping 一次 CAS 服务器，以确保用户不会在“父”CAS 服务器上注销，因为它们仍然处于活动状态。

为此目的，CAS 设置中是否内置了一些东西？我一直在查看 CAS 文档和 phpCAS 客户端，但无济于事。有一种`renewAuthentication`方法，但它会导致用户在调用时必须再次登录。也许这只是服务器端的配置问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T03:17:36.630

您无法代表用户 ping CAS 服务器，因为您的应用程序*不应*访问标识用户会话的令牌。每次用户从 CAS 服务器请求新的服务票证时，默认策略都会自动扩展用户的单点登录会话。

然而，如果你确实有 TGT（你真的，真的，真的应该避免），你基本上可以为用户请求一个服务票，这将延长单点登录会话的寿命（尽管如果你这样做了，您不需要每 60 秒执行一次，因为这相当极端）。

# ruby-on-rails - 如何在 Rails 应用程序中为模型生成文档？

> ID：15383149
> 
> 赞同：2
> 
> 时间：2013-03-13T10:47:58.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rdoc

我想为我的 rails 应用程序生成文档。该应用程序具有具有关系的模型（例如 has_many 关系），我正在寻找一种方法来生成显示模型之间关系的文档。理想情况下，用一些图表来表示模型之间的关系。

有没有办法在 rails 3.2x 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:56:19.023

查看[rails-erd gem](https://github.com/voormedia/rails-erd)。它从您的模型生成实体关系图。

Rubymine IDE 也可以即时执行，但它不是免费的[。](http://www.jetbrains.com/ruby/)

# user-interface - 购物车 - 防止返回按钮

> ID：15383154
> 
> 赞同：1
> 
> 时间：2013-03-13T10:48:08.790
> 
> 标签：user-interface, shopping-cart, back

我有一个带有购物车系统的网站，问题是我们有一些成员点击了删除项目按钮，该按钮使用“已删除”标志更新行项目 - 然后点击浏览器返回按钮，然后显示购物车之前的状态 - 订单项完好无损。

如果他们在这种状态下付款，当销售被处理为他们支付的多个项目之一没有得到处理时，我们会遇到各种问题。这意味着我们必须在以后手动拾取碎片。

是否有任何标准方法来处理这种情况——即我知道我们可以提供一个“撤消”按钮——但用户并不总是会使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:21:47.300

对于这种情况，您必须使用过滤器。而且是的...您还可以通过使用简单的java脚本禁用后退按钮来防止用户返回。

[http://www.viralpatel.net](http://www.viralpatel.net)

访问这个。这将对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:08:42.263

我将详细说明我最终得到的解决方案，以防其他人有类似的问题。

我们的支付网关提供了一种将自定义信息传递到我们的支付流程系统的方法，我们计划传递购物车中所有商品的 id，当我们取回它们时，我们将使用它来取消删除已删除的项目。

这使用首先导致问题的相同过程起作用，因为购物车页面不会重新加载到浏览器上。

这是假设通过按下后退是用户试图撤消他的操作，因为在销售之前确认支付价值，我们可以合理地确定如果购物车被推动，那么购物车就是用户想要的。

我们还提供撤消系统以及 javascript 后退保护以防止需要它，在这些情况下，有 10 种解决方案比一种更好。

# ruby-on-rails - 在 Rails 中部署后如何检查生产日志？

> ID：15383156
> 
> 赞同：1
> 
> 时间：2013-03-13T10:48:14.013
> 
> 标签：ruby-on-rails, capistrano, passenger

我使用 capistrano 和乘客 (+ apache) 部署了我的应用程序。现在，当我转到链接时，它告诉我

```
"We're sorry, but something went wrong." 
```

我在哪里可以找到日志以对问题进行更多调查？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:16:01.233

您可以登录/ssh 进入服务器并在 logs/production.log 中检查它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:22:04.133

使用此路径：

> /var/log/apache2/error.log

# facebook - 在我的网站上提交按钮后在 Facebook 墙上发表评论

> ID：15383158
> 
> 赞同：0
> 
> 时间：2013-03-13T10:48:18.693
> 
> 标签：facebook, facebook-graph-api

在我的网站上提交按钮后，是否可以在用户 Facebook 墙上发表评论？

在我的网页上，用户可以查看某些产品，并在他们查看后点击“提交评论”按钮。我想让审查报告发布在用户的 Facebook 提要上。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:03:46.383

对于普通帖子，您可以使用[Feed 对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)——这不需要用户先连接到您的应用程序。

如果你想在后台通过 API 发帖，那么你必须先让用户登录到你的应用程序。

如果您不想要普通帖子，请查看 Open Graph 操作：[https ://developers.facebook.com/docs/concepts/opengraph/](https://developers.facebook.com/docs/concepts/opengraph/)

# ios - UITabBarController - 更多按钮不显示

> ID：15383160
> 
> 赞同：1
> 
> 时间：2013-03-13T10:48:24.287
> 
> 标签：ios, button, uitabbarcontroller

我以`TabBarController`编程方式创建我的，因为我希望每个选项卡中的相同控制器显示不同的内容。内容由`ID`. 我使用故事板 id 的方式与使用`initWithNibName:`.

我在 AppDelegate 中执行此操作：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];

    UITabBarController *tabBarController = [[UITabBarController alloc] init];

    for (int i = 0; i < 7; i++) {
        MyViewController *svc = [storyboard instantiateViewControllerWithIdentifier:@"MyView"];
        [svc setID: i];
        [tabBarController addChildViewController:svc];
    }

    [self.window makeKeyAndVisible];
    [self.window setRootViewController: tabBarController];

    return YES;
} 
```

但 TabBar 仅显示 7 个选项卡中的 5 个。这很好，因为同时只能看到 5 个选项卡。不幸的是...更多按钮不可见。所以最后 2 个选项卡无法访问。

有谁知道如何强制显示更多按钮，或者为什么它不显示？

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:26:21.547

它没有显示，因为您正在使用方法将视图控制器添加到标签栏控制器`addChildViewController`，该方法是一种`UIViewController`方法，而不是标签栏控制器方法。所以我认为正在发生的事情是标签栏控制器并不真正知道它有超过 5 个视图控制器。

如果要显示更多的视图控制器，请直接设置标签栏控制器的 viewControllers 数组。将您的代码修改为如下所示：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UITabBarController *tabBarController = [[UITabBarController alloc] init];  
NSMutableArray *vcArray = [NSMutableArray array]; 
for (int i = 0; i < 7; i++) {
    ViewController *svc = [storyboard instantiateViewControllerWithIdentifier:@"MyView"];
    [svc setID: i];
    [vcArray addObject:svc];
}
[tabBarController setViewControllers:vcArray]; //This is the important part.
[self.window setRootViewController: tabBarController];
[self.window makeKeyAndVisible]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:59:51.000

以下是如何使用的简单示例`UITabBarController`

首先创建文件中的所有对象`UIViewController`并使用以下方法`UINavigationController``AppDelegate.h``AppDelegate.m`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window=[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds ]];

    self.viewCon=[[ViewController alloc] init];
    self.navCon=[[UINavigationController alloc] initWithRootViewController:self.viewCon];
    self.navCon.navigationBar.tintColor=[UIColor blackColor];
    self.viewCon.title=@"First View";

    self.fView=[[FirstViewController alloc] init];
    self.FnavCon=[[UINavigationController alloc] initWithRootViewController:self.fView];
    self.FnavCon.navigationBar.tintColor=[UIColor blackColor];

    self.fView.title=@"Secound View";

    self.sView=[[SecoundViewController alloc] init];
    self.SnavCon=[[UINavigationController alloc] initWithRootViewController:self.sView];
    self.SnavCon.navigationBar.tintColor=[UIColor blackColor];
    self.sView.title=@"Third View";
    .
    .
    // create UIViewController and UINavigationController As you need 
    .
    .
    .
    UIImage *img1=[UIImage imageNamed:@"Australia.gif"];
    self.tbItem1=[[UITabBarItem alloc] initWithTitle:@"First Page" image:img1 tag:1];
    self.viewCon.tabBarItem=self.tbItem1;

    UIImage *img2=[UIImage imageNamed:@"Cameroon.gif"];
    self.tbItem2=[[UITabBarItem alloc] initWithTitle:@"Secound Page" image:img2 tag:2];
    self.fView.tabBarItem=self.tbItem2;

    UIImage *img3=[UIImage imageNamed:@"Canada.png"];
    self.tbItem3=[[UITabBarItem alloc] initWithTitle:@"Third Page" image:img3 tag:3];
    self.sView.tabBarItem=self.tbItem3;

    NSMutableArray *viewArr=[[NSMutableArray alloc] init];
    [viewArr addObject:self.navCon];
    [viewArr addObject:self.FnavCon];
    [viewArr addObject:self.SnavCon];

    self.tbCon=[[UITabBarController alloc] init];
    self.tbCon.viewControllers=viewArr;

    [self.window addSubview:tbCon.view];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

# android - 最大限度。蓝牙距离

> ID：15383162
> 
> 赞同：2
> 
> 时间：2013-03-13T10:48:25.127
> 
> 标签：android, bluetooth, communication

简单的技术问题：

1.  蓝牙运行的最大距离/范围是多少？

2.  有没有办法提高最大范围？

3.  是否有协议来传输某些数据，谁不需要任何 Internet 连接或电话网络？

4.  Wifi Direct 需要设备之间的接入点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:55:45.087

1\. 大多数蓝牙设备在某些特定范围内的容量为 10 米。它还取决于设备的能力。与现代设备相比，旧设备速度较慢且范围较小。

2\. 从技术上讲这是可能的。您可以达到 1 公里（或更好）的范围，但这只能在两个发射器/接收器之间实现。在我看来，使用蓝牙设备不可能有 1 公里的范围。此外，在许多国家，禁止输出功率大于 20dB（即 1 类，100m）的蓝牙设备。

3. **在您的电脑中（替代答案）-**

将两台计算机连接到同一个 WiFi 路由器。

在两台计算机上启用文件和打印机共享。如果您右键单击文件或文件夹并选择共享它，系统将提示您打开文件和打印机共享。因此，对 Windows XP 机器上的共享文档（所有用户）和公共文档（Windows 7 机器上）都这样做是一种可行的方法。

查找可用的网络计算机。然后复制并粘贴您要传输的数据。例如...如果您在 Windows 机器共享音乐目录中有一首歌曲，您将在 Windows 机器上的资源管理器中可用的网络连接中浏览到该计算机。浏览该文件夹..选择歌曲..复制然后将其粘贴到您想要的任何位置。

您无需安装第三方软件。您需要的只是在您的计算机之间传输文件和文件夹已经存在。

4.不，也许不。

# c++ - 如何为类成员变量编写setter？

> ID：15383167
> 
> 赞同：1
> 
> 时间：2013-03-13T10:48:41.957
> 
> 标签：c++, setter

我正在尝试用 C++ 编写一个简单的类，其中包含类成员变量的 getter 和 setter。吸气剂工作正常，但我不能写二传手。是否可以用 setter 覆盖“m_var”，或者这仅适用于指针变量？

```
class Foo: public QObject {
Q_OBJECT
public:

MyOtherClass& getVar()  {
    return m_var;
}

private:
  MyOtherClass m_var;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:52:33.763

这应该是这样的：

```
// this is your setter
// you can set the var parameter as const because it is just copied to var
void setVar(const MyOtherClass& var){m_var = var;}

//this is your getter
MyOtherClass& getVar() {return m_var;}

// also this getter should be declared as const because you return a copy 
// of m_var and thus you do not modify the object
MyOtherClass getVarByCopy() const {return m_var;} 
```

以下代码可以使用 g++ 正常编译：

```
class A
{
public :
   int someInt;
};

class B{
    A m_var;
public:
    void setVar(const A& var){m_var = var;}
    A& getVar() {return m_var;}
};

int main(int argc, char* argv[])
{
    B b;
    A a;
    a = b.getVar();
    b.setVar(a);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T04:40:47.813

我们错过了什么吗？

```
class Foo: ...
{
.....
.....

MyOtherClass& getVar()  {
return m_var;
} 
```

您的

```
getVar() 
```

实际上是一个 setter，因为它返回一个非常量引用。

检查此代码。

```
 class MyOtherClass
    {
    public:
        MyOtherClass(int i=10)
        {
            m_someInt = i;
        }
        int m_someInt;
    };
    class QObject
    {
    };

    class Foo: public QObject 
    {
        // Q_OBJECT
    public:

        MyOtherClass& getVar()  
        {
            return m_var;
        }

    private:
        MyOtherClass m_var;
    };
    void someFunc()
    {
        Foo f1;
        printf("%d", f1.getVar().m_someInt);

        f1.getVar() = 100;
        printf("\r\n %d", f1.getVar().m_someInt);
    } 
```

虽然我不喜欢这种设计的想法。
如果您真的希望 getVar() 只获取但不设置，那么它应该是

```
const MyOtherClass& getVar()const  {
return m_var;
} 
```

# java - YUI Compressor 2.4.7 - 没有类定义错误 ErrorReporter

> ID：15383171
> 
> 赞同：0
> 
> 时间：2013-03-13T10:48:52.843
> 
> 标签：java, yui, minify, rhino, yui-compressor

我的 YUI Compressor for js 有问题：我在 Eclipse 中的构建路径中添加了 2.4.7 版（尝试使用 rhino jar 也没有尝试） - 没有任何效果。我没有收到编译错误，我可以看到我创建的实现 org.mozilla.javascript.ErrorReporter 的类，但是当我尝试运行压缩器时，我得到：

> java.lang.ClassNotFoundException：来自 BaseClassLoader@1d81fd2 的 org.mozilla.javascript.ErrorReporter

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T10:07:38.393

我知道这是一个老问题，但我会添加一个答案，以防其他人在搜索中遇到这个问题。

我有同样的问题。问题是 yuicompressor-2.4.7.jar 不在我们共享的 maven 存储库中，因此 yuicompressor maven 插件没有下载。要验证这一点，请检查 yuicompressor-2.4.7.jar 的本地 maven 存储库（通常是 C:\Users\.m2\repository\com\yahoo\platform\yui\yuicompressor\2.4.7）。如果它在那里，那么你有一个不同的问题，如果不是，那么这很可能是你的问题。要修复，只需将 yuicompressor-2.4.7.jar 上传到您的共享存储库。

# hibernate - 如何与 JPA/Hibernate 建立基本的多对多关系？

> ID：15383172
> 
> 赞同：2
> 
> 时间：2013-03-13T10:49:02.420
> 
> 标签：hibernate, jpa, spring-data-jpa

我有一个非常基本的多对多关系：人员和项目，设置如下：

人：

```
@ManyToMany(cascade=CascadeType.ALL)
@JoinTable(name = "person_project", 
joinColumns = @JoinColumn(name = "Person_Id"),
inverseJoinColumns = @JoinColumn(name = "Project_id"))
private Set<Project> projects = new HashSet<Project>(); 
```

项目：

```
@ManyToMany
@JoinTable(name = "person_project", 
joinColumns = @JoinColumn(name = "Project_Id"), 
inverseJoinColumns = @JoinColumn(name = "Person_id"))
private Set<Person> persons = new HashSet<Person>(); 
```

更新人员时，可能会指定新项目。我为 Person 设置了 JPARepository，我使用 saveAndFlush(...) 来保存 Person 可能的新项目。

这适用于一个人。如果我添加一个新项目，它将与 Person 一起保存，并且数据库中的表会正确更新。但是，如果我随后为另一个人添加相同的项目 - 它将从第一个人中删除！连接表中第一个人的 id 被替换为第二个人的 id。

这是什么原因造成的？我的关系设置不正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:45:04.587

您不会在映射的两半上使用相同的注释。第一部分定义连接表和列。映射的后半部分只需要知道另一半的名称（在您的情况下为项目），它将从第一个注释中获取详细信息。有关体面的解释，请参见：[Hibernate Many to Many Mapping](http://viralpatel.net/blogs/hibernate-many-to-many-annotation-mapping-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:20:02.663

It looks like changing Project as follows fixes the problem:

```
@ManyToMany(mappedBy="projects")
private Set<Person> persons = new HashSet<Person>(); 
```

Now when I add the same project to a second person, the first one will remain related to that project as it should.

I still don't know why this works, so If someone can explain it, please do!

# python - AttributeError：“float”对象没有属性“get”

> ID：15383173
> 
> 赞同：3
> 
> 时间：2013-03-13T10:49:06.817
> 
> 标签：python, xml, openerp

这是我的错误

```
2013-03-13 10:31:50,358 11345 ERROR OpenERP_DB openerp.osv.osv: Uncaught exception
Traceback (most recent call last):
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/osv.py", line 131, in wrapper
    return f(self, dbname, *args, **kwargs)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/osv.py", line 197, in execute
    res = self.execute_cr(cr, uid, obj, method, *args, **kw)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/osv.py", line 185, in execute_cr
    return getattr(object, method)(cr, uid, *args, **kw)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/orm.py", line 4479, in create
    self.pool.get(object)._store_set_values(cr, user, ids, fields2, context)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/orm.py", line 4627, in _store_set_values
    result = self._columns[f].get(cr, self, ids, f, SUPERUSER_ID, context=context)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/fields.py", line 1137, in get
    elif result.get(id):
AttributeError: 'float' object has no attribute 'get'
2013-03-13 10:31:50,363 11345 ERROR OpenERP_DB openerp.netsvc: 'float' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/netsvc.py", line 293, in dispatch_rpc
    result = ExportService.getService(service_name).dispatch(method, params)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/service/web_services.py", line 618, in dispatch
    res = fn(db, uid, *params)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/osv.py", line 188, in execute_kw
    return self.execute(db, uid, obj, method, *args, **kw or {})
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/osv.py", line 131, in wrapper
    return f(self, dbname, *args, **kwargs)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/osv.py", line 197, in execute
    res = self.execute_cr(cr, uid, obj, method, *args, **kw)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/osv.py", line 185, in execute_cr
    return getattr(object, method)(cr, uid, *args, **kw)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/orm.py", line 4479, in create
    self.pool.get(object)._store_set_values(cr, user, ids, fields2, context)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/orm.py", line 4627, in _store_set_values
    result = self._columns[f].get(cr, self, ids, f, SUPERUSER_ID, context=context)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/fields.py", line 1137, in get
    elif result.get(id):
AttributeError: 'float' object has no attribute 'get'
2013-03-13 10:31:50,369 11345 INFO OpenERP_DB werkzeug: 127.0.0.1 - - [13/Mar/2013 10:31:50] "POST /web/dataset/call_kw HTTP/1.1" 200 - 
```

这是我的模块源代码

```
class namelistupdate(osv.osv):

    def _invoiced_rate(self, cr, uid, ids, name, args, context):
        amount_untaxed = 1
        if amount_untaxed == 0:
            res = 100.0
        else:
            res = 50.0
        print (res)
        return res

    _name = "checkroll.namelist.update"
    _description = "This table is for keeping Name list updates"
    _columns = {        
        'date': fields.date("Date"),
        'value': fields.function(_invoiced_rate, method=True, type='float', string='Test', store=True),
    }

namelistupdate() 
```

我也检查了后端表。他们正确地创建和归档也正确地操作。请检查这个并告诉我有什么问题

这里显示了我的 view.xml 文件

```
 <record model="ir.ui.view" id="namelist_update_form">
        <field name="name">Name List Update</field>
        <field name="model">checkroll.namelist.update</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="namelist_update">
                <field name="date" />
                <field name="value" />
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="namelist_update_list">
        <field name="name">Name List Update</field>
        <field name="model">checkroll.namelist.update</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="namelist_update">
                <field name="value" />
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_namelist_update">
        <field name="name">Name List Update</field>
        <field name="res_model">checkroll.namelist.update</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:17:27.270

请检查您的功能代码。它不像 openerp 函数代码。

你可以查看这个问题链接：[How add a function in openERP 7?](https://stackoverflow.com/questions/15102388/how-add-a-function-in-openerp-7/15132719#15132719)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:56:31.957

```
def _invoiced_rate(self, cr, uid, ids, name, args, context):
    amount_untaxed = 1
    record_id=ids[0]
    res={record_id: 0.0}
    if amount_untaxed == 0:
        res[record_id] = 100.0
    else:
        res[record_id] = 50.0
    print (res)
    return res 
```

我需要以字典对象的形式返回结果。并且 key 应该是该记录的 id。只需替换我的功能

积分需要去 Mr.Parth Gajjar @ [http://help.openerp.com](http://help.openerp.com)论坛

# c# - wpf中控制位置的奇怪行为

> ID：15383176
> 
> 赞同：0
> 
> 时间：2013-03-13T10:49:12.720
> 
> 标签：c#, wpf, c#-4.0, wpf-controls

这是关于 WPF 控件定位的奇怪行为。我有一个下面的控件，并且在设计时对齐得很好。但是运行时在按钮的角落给出了未对齐的位置

```
<Window x:Class="StackOverflow.LookAndWork"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Tables" Height="388" Width="314" ResizeMode="NoResize" >
    <Grid>
        <TextBox Margin="12,12,12,41"></TextBox>
        <Button Content="OK" Height="23" Margin="205,314,12,12" Name="button3" Width="75" IsCancel="True"  IsEnabled="False" />

    </Grid>
</Window> 
```

设计时快照

![设计时间](../Images/dd0672228a84443a71bbad11b8370962.png)

运行时快照

![运行](../Images/38a2216374bdb388387785f41c610c82.png)

假设如果我从窗口中删除了 ResizeMode="NoResize"。我可以在运行时看到正确的定位。ResizeMode="NoResize" 有什么问题？

任何帮助将不胜感激 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:01:47.457

为了更好看，不要使用边距或大小。使用网格定义来拆分您的应用程序。

使用以下 xaml，您的应用程序将始终具有良好的外观：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="23" />
    </Grid.RowDefinitions>
    <TextBox />
    <Grid Grid.Row="1">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="75" />
        </Grid.ColumnDefinitions>
        <Button Grid.Column="1" Content="OK" Name="button3" IsCancel="True"  IsEnabled="False" />
    </Grid>
</Grid> 
```

宽度和高度可以在字典中定义。在这种情况下，在 RowDefinition 和 ColumnDefinition 属性中，使用 Auto 而不是值。

**编辑：** 使用字典

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Style TargetType="{x:Type Button}">
        <Setter Property="Width" Value="75"/>
        <Setter Property="Height" Value="23"/>
    </Style>
</ResourceDictionary> 
```

然后

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Dictionary1.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <TextBox />
    <Grid Grid.Row="1">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Button Grid.Column="1" Content="OK" Name="button3" IsCancel="True"  IsEnabled="False" />
    </Grid>
</Grid> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:03:53.370

为什么不在控制级别添加边距，而不是在网格级别添加最小边距？

例子：

```
<Grid Margin="12,12,12,12"> 
```

这样，您将获得 12 像素的边距边框。在按钮上，不要做硬编码的左边距。相反，您可以使用`HorizontalAlignment="Right"`来完成这项工作。

附带说明一下，我不太喜欢在不指定 Grid.RowDefinitions、Grid.ColumnDefinitions、Grid.Row 和 Grid.Column 的情况下在网格中添加控件。它是 Grid 的强大工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:00:08.440

我在 VisualStudio 2012 设计器中看不到同样的问题：[http](http://screencast.com/t/TGVgUyfR) : //screencast.com/t/TGVgUyfR 设计时和运行时看起来都一样。所以在设计器的早期版本中应该有一个错误。不过，我建议您将按钮移动到单独的网格行或使用其他布局控件来组织您的视图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T11:07:07.303

为了扩展 Xaruth 的答案，我不会固定按钮行的高度，而是让它使用默认高度。宽度也是如此，我将定义按钮。

另请注意，我给按钮留有余量。不固定网格列/行大小的额外好处是，现在行高也考虑了边距：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <TextBox />
    <Grid Grid.Row="1">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <Button Grid.Column="1" Content="OK" Name="button3" IsCancel="True"  IsEnabled="False" Width="75" Margin="0,8,0,0" />
    </Grid>
</Grid> 
```

# facebook - Facebook 发布从应用程序到其他人不可见的页面墙

> ID：15383181
> 
> 赞同：0
> 
> 时间：2013-03-13T10:49:34.047
> 
> 标签：facebook, facebook-wall

我有一个大问题，我尝试将帖子从 Facebook 应用程序发布到 Facebook 页面墙。

我使用此功能这样做：

```
function Post_facebook($message){ 

    include_once('php-sdk/facebook.php');

    $app_config = array(
        'appId' => '*********',
        'secret' => '************');

    $page_config = array(
        'access_token' => '********',
        'page_id' => '*********');

    $facebook = new Facebook($app_config);

    $params = array(
       'access_token' => $page_config['access_token'],
       'message' => $message);

    $post_id = $facebook->api('/'.$page_config['page_id'].'/feed','post',$params);
} 
```

一切似乎都很好，但只有我可以看到帖子。当我在墙上时，一切看起来都很正常，我会看到来自应用程序的帖子。但如果别人上墙，他就不行了。出版物在隐私设置上设置为“公开”，所以我看不出它为什么不起作用。

如果我`https://www.facebook.com/*****/posts/*****`从另一个帐户发布 URL ()，它会显示：*页面不存在....*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T05:09:08.870

您需要从 Facebook 应用的设置中禁用沙盒模式

# xsd - 我只有一个 WSDL 我也应该要求一个 XSD 吗？

> ID：15383195
> 
> 赞同：1
> 
> 时间：2013-03-13T10:50:29.813
> 
> 标签：xsd, wsdl, biztalk

第三方提供了 WSDL。它们位于 Java 堆栈上。我相信我需要一个 XSD 才能通过“添加生成的项目-> 使用 WCF 服务”在 BizTalk 中使用它。第 3 方未使用 WCF，但这看起来是唯一可用于使用 WSDL 的选项。

我假设如果没有随附的 XSD，我将无法使用 WSDL。我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:53:39.057

并不真地; XSD 内容可以嵌入到 WSDL 文件的 wsdl:types 部分中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:11:11.620

当您添加对 Web 服务 WSDL 的引用时，Visual Studio 将自动为您生成必要的 BizTalk XSD 文件。它还将添加一个编排，其中包含输入到服务的请求和响应消息的必要端口（如果不需要，可以安全地删除此编排）。

正如您正确指出的那样，添加服务引用是通过在使用 WCF 服务时选择“添加生成的项目 -> 使用 WCF 服务”来实现的，或者如果您正在使用直接的 Web 服务，则选择“添加服务引用”来实现。

您可能还想查看一些与在 BizTalk[中使用 Web 服务相关的 MSDN 文档，尤其是使用](http://msdn.microsoft.com/en-us/library/aa561062.aspx)[Web 服务时的具体注意事项](http://msdn.microsoft.com/en-us/library/aa561724.aspx)。

# iphone - ld: 找不到 -lIOKit 的库

> ID：15383197
> 
> 赞同：3
> 
> 时间：2013-03-13T10:50:32.753
> 
> 标签：iphone, ios, ipad, ios6, iokit

我已将 libIOKit.dylib 添加到我的项目中以获取 imei 编号，然后它开始给我以下链接器错误。

```
ld: library not found for -lIOKit
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我该如何解决这个问题？

我已将 " `Build Active Architecture Only`" 设置为`yes`并从中删除`armv7s`，`valid architectures`即使它仍然相同。

![在此处输入图像描述](../Images/f2bb1675bf22141d61b9bdfa59ca4e7c.png)

# c# - Kinect 保存关节数据

> ID：15383204
> 
> 赞同：0
> 
> 时间：2013-03-13T10:50:55.757
> 
> 标签：c#, visual-studio-2010, kinect

我看过一些关于保存 Kinect 骨架数据的教程和文章，但它们似乎都没有工作，基本上目前我有一个计时器，它以设定的间隔（2.5 秒）截取屏幕截图，以及/而不是截取屏幕截图时，我想将所有连接信息读入数组和/或将坐标 (x,y) 保存到文本文件中，当这些动作保存到文件中时，我想按照相同的步骤进行制作一组新的坐标并比较两者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:38:58.493

[Kinect 工具箱](http://kinecttoolbox.codeplex.com/)开箱即用地提供了此功能。它是一个开源库，您可以将其包含在您的应用程序中，或者可以检查代码以了解如何继续。

如果您希望自己滚动，您可以设置计时器以将信息`Skeleton`或信息子集保存`Joint`到包含从零开始的时间戳的自定义类中。然后，您可以将这些放入`List`. 当您准备好保存时，您可以进行二进制保存或使用序列化程序将其保存为 XML。

# android - 我如何改变android中录制声音的频率

> ID：15383206
> 
> 赞同：2
> 
> 时间：2013-03-13T10:50:56.323
> 
> 标签：android, audio-recording

我正在开发一个通过 MIC 记录并更改其频率的 android 应用程序。类似于 iPhone 的 Helium 展位应用程序。目前我已经编写了代码来记录文件并将其保存在 sdcard 中。现在我的问题是我可以在录音时改变声音的频率吗？或者我可以设置录制音频的频率吗？以下是我的代码：

```
 public class MainActivity extends Activity {

MediaRecorder recorder;
  File audiofile = null;
  private static final String TAG = "SoundRecordingActivity";
  private View startButton;
  private View stopButton;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    startButton = findViewById(R.id.start);
    stopButton = findViewById(R.id.stop);
    startButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            try {
                startRecording(v);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    });
    stopButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            stopRecording(v);

        }
    });
}

 public void startRecording(View view) throws IOException {

        startButton.setEnabled(false);
        stopButton.setEnabled(true);

        File sampleDir = Environment.getExternalStorageDirectory();
        try {
          audiofile = File.createTempFile("sound", ".3gp", sampleDir);
        } catch (IOException e) {
          Log.e(TAG, "sdcard access error");
          return;
        }
        recorder = new MediaRecorder();
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setOutputFile(audiofile.getAbsolutePath());
        recorder.prepare();
        recorder.start();
      }

      public void stopRecording(View view) {
        startButton.setEnabled(true);
        stopButton.setEnabled(false);
        recorder.stop();
        recorder.release();
        addRecordingToMediaLibrary();
      }

      protected void addRecordingToMediaLibrary() {
        ContentValues values = new ContentValues(4);
        long current = System.currentTimeMillis();
        values.put(MediaStore.Audio.Media.TITLE, "audio" + audiofile.getName());
        values.put(MediaStore.Audio.Media.DATE_ADDED, (int) (current / 1000));
        values.put(MediaStore.Audio.Media.MIME_TYPE, "audio/3gpp");
        values.put(MediaStore.Audio.Media.DATA, audiofile.getAbsolutePath());
        ContentResolver contentResolver = getContentResolver();

        Uri base = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
        Uri newUri = contentResolver.insert(base, values);

        sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, newUri));
        Toast.makeText(this, "Added File " + newUri, Toast.LENGTH_LONG).show();
      }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}} 
```

# c# - 将 SQL 转换为 LINQ：将结果选择为模型

> ID：15383212
> 
> 赞同：1
> 
> 时间：2013-03-13T10:51:21.040
> 
> 标签：c#, sql, linq, linq-to-sql, linq-to-entities

我对LINQ不熟悉，有人可以帮我吗？提前致谢。

我的模型：

```
public class OrderOverViewModel
{
    public int Quantity { get; set; }
    public String ACCN { get; set; }
    public DateTime OrderDate { get; set; }
} 
```

这是 SQL：

```
SELECT COUNT(*) AS HowMany, 
       DATEADD(dd, 0, DATEDIFF(dd, 0, RXS_OrderDate)) AS OrderDate, 
       RXS_ACCN  AS ACCN  
FROM RXS_RxJobs
WHERE DATEDIFF(WK, RXS_OrderDate, GETDATE()) = 1
GROUP BY RXS_ACCN, DATEADD(dd, 0, DATEDIFF(dd, 0, RXS_OrderDate)) 
```

SSMS 中的结果：

![在此处输入图像描述](../Images/071f4318a5751e0e640dc615aa9b97c1.png)

我希望选择结果填充模型，如何实现这一点？再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:19:50.033

使用[SqlFunctions.DateDiff](http://msdn.microsoft.com/en-us/library/dd487052.aspx)方法获取当前日期和订单日期之间的周数。`Date`您也可以通过对象的属性简单地获取日期的日期部分`DateTime`。查询应如下所示：

```
from j in context.RXS_RxJobs
    .Where(x => SqlMethods.DateDiffDay(x.RXS_OrderDate, DateTime.Now) >= 7 &&
                SqlMethods.DateDiffDay(x.RXS_OrderDate, DateTime.Now) < 14)
group j by new { j.RXS_ACCN, j.RXS_OrderDate.Date } into g
select new OrderOverViewModel
{
   Quantity = g.Count(),
   ACCN =  g.Key.RXS_ACCN,
   OrderDate = g.Key.Date  
}; 
```

更新（对于 Linq to Entity）：

```
from j in context.RXS_RxJobs
    .Where(x => SqlFunctions.DateDiff("wk", x.RXS_OrderDate, DateTime.Now) == 1)
group j by new { 
    j.RXS_ACCN, 
    Date = EntityFunctions.TruncateTime(j.RXS_OrderDate).Value
} into g
select new OrderOverViewModel {
   Quantity = g.Count(),
   ACCN =  g.Key.RXS_ACCN,
   OrderDate = g.Key.Date 
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:06:20.273

```
var viewModels = from job in ObjectContext.RXS_RxJobs
where SqlFunctions.DateDiff("Day", RXS_OrderDate,DateTime.Now) == 1
group job by new { RXS_ACCN, OrderDate} into jobGroup
select new OrderOverViewModel
{ 
    Quantity = jobGroup.Count(),
    ACCN =  jobGroup.Key.RXS_ACCN,
    OrderDate = jobGroup.Key.OrderDate
} ; 
```

# android - 带有 Spinner 的奇怪 ClassCastException

> ID：15383219
> 
> 赞同：1
> 
> 时间：2013-03-13T10:51:41.937
> 
> 标签：android, spinner, classcastexception

我有这个代码：

```
Spinner entrega=(Spinner)findViewById(R.id.comboentrega); //This is the line where it cracks
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
            R.array.arrayentrega, android.R.layout.simple_spinner_item);
    // Specify the layout to use when the list of choices appears
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // Apply the adapter to the spinner
    entrega.setAdapter(adapter); 
```

在布局中：

```
<Spinner
    android:id="@+id/comboentrega"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView4" /> 
```

当我运行该应用程序时，我会收到此堆栈跟踪：

```
03-13 11:43:13.748: E/AndroidRuntime(1668): FATAL EXCEPTION: main
03-13 11:43:13.748: E/AndroidRuntime(1668): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.publidirecta.AppAzafata/com.publidirecta.AppAzafata.Incidencias}: java.lang.ClassCastException: android.widget.Button
03-13 11:43:13.748: E/AndroidRuntime(1668):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
03-13 11:43:13.748: E/AndroidRuntime(1668):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
03-13 11:43:13.748: E/AndroidRuntime(1668):     at android.app.ActivityThread.access$1500(ActivityThread.java:121)
03-13 11:43:13.748: E/AndroidRuntime(1668):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
03-13 11:43:13.748: E/AndroidRuntime(1668):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 11:43:13.748: E/AndroidRuntime(1668):     at android.os.Looper.loop(Looper.java:130)
03-13 11:43:13.748: E/AndroidRuntime(1668):     at android.app.ActivityThread.main(ActivityThread.java:3701)
03-13 11:43:13.748: E/AndroidRuntime(1668):     at java.lang.reflect.Method.invokeNative(Native Method)
03-13 11:43:13.748: E/AndroidRuntime(1668):     at java.lang.reflect.Method.invoke(Method.java:507)
03-13 11:43:13.748: E/AndroidRuntime(1668):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
03-13 11:43:13.748: E/AndroidRuntime(1668):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
03-13 11:43:13.748: E/AndroidRuntime(1668):     at dalvik.system.NativeStart.main(Native Method)
03-13 11:43:13.748: E/AndroidRuntime(1668): Caused by: java.lang.ClassCastException: android.widget.Button
03-13 11:43:13.748: E/AndroidRuntime(1668):     at com.publidirecta.AppAzafata.Incidencias.onCreate(Incidencias.java:122)
03-13 11:43:13.748: E/AndroidRuntime(1668):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-13 11:43:13.748: E/AndroidRuntime(1668):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623) 
```

如果我没有投射到 Button，为什么会收到 ClassCastException android.widget.Button？万一它可能有帮助，微调器首先连接到屏幕的右侧，并且工作得很好。我注意到它并将它附加到左侧，它必须在哪里，异常开始了。

有人对此有任何想法吗？谢谢你。

# extjs4 - Extjs 窗口关闭事件

> ID：15383220
> 
> 赞同：5
> 
> 时间：2013-03-13T10:51:43.607
> 
> 标签：extjs4

我有一个带有取消按钮和默认关闭 [x] 的窗口。当用户单击取消按钮时，它应该检查特定标志并关闭窗口并更新数据库。我正在使用 me.close(this); 用于关闭取消按钮的窗口。当用户单击 [x] 时，它应该检查相同的标志并更新 db，然后关闭窗口。为了检查那个标志条件，我添加了一个监听器这个监听器工作正常。但是添加监听器后，点击取消按钮，两次关闭事件被调用。所以数据库更新发生了两次。有人可以建议我如何处理窗口的 [x] 关闭事件

```
Ext.define('MyApp.view.updateForm', {
    extend: 'Ext.window.Window',
    height: 600,
    width: 800,
    layout: {
        type: 'absolute'
    },
    title: 'Update Window',
    modal: true,
    initComponent: function() {

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'button',
                    id:'btnCancel',
                    handler    : function(){
                        if(flag == true){
                            //add to db
                            me.close(this);                                
                        }
                    }
                }]
        });    
        me.callParent(arguments);
    },

    listeners:{
        close:function(){
            if(flag == true){
                alert("close window");
                //add to db
            }
        }
    }

}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T23:16:27.427

我已经完成了这个精确的实现，但有一些细微的差别，并且可以证明这完全符合预期。

这是我的代码：

```
 Ext.create('Ext.window.Window', {
      ...
      buttons:[
            {
                text:'Finish',
                handler:function () {
                    this.up('window').close();
                }
            }
       ],
       listeners:{
            close:this.someFunction,
            scope:this
        }
      .... 
```

这完美地工作。这告诉我问题在您的代码中的其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:06:25.367

一种解决方法是在按下按钮`close`时简单地调用。即按下时`Cancel`不执行`(flag == true)`检查。`Cancel`这不会导致`close`被调用两次。

# c - 在结构中使用结构..无法访问内部结构元素？

> ID：15383227
> 
> 赞同：0
> 
> 时间：2013-03-13T10:52:00.347
> 
> 标签：c

嗨，朋友，我是新手，正在尝试学习结构...在这里我已经在结构计算中声明了结构日期...但不知道如何从日期访问元素。我通过使用 malloc 为父结构 calc 保留了内存。这对于日期结构也足够了吗？.请指导我...谢谢！

```
#include <stdio.h>
#include <stdlib.h>

struct date{
   int day;
   int month;
   int year;
};

struct calc{
   int row;
   int col;
   char menu_name[20];
   char sub_menu_name[20];
   struct date dob;
};

int main()
{
    int count = 0, i;
    struct calc *my_calc[2];

   //here unable to understand that where i need to resever seprate memory for date?
   my_calc[0] = (struct calc *)malloc(sizeof(struct calc)); 

   //trying to asign the date value 
   for(count; count<2; count++)
   {   
       printf("Please enter day: ");    
       scanf("%d",&my_calc[count]->date.day);

       printf("Please enter month: ");    
       scanf("%d",&my_calc[count]->date.month);

       printf("Please enter Year: ");    
       scanf("%d",&my_calc[count]->date.year);
   }

   //trying to print the date value 
   printf("Day: %d\t  Month: %d\t   Year: %d\n ",my_calc[0]->date.day,my_calc[0]->date.month,my_calc[0]->date.year);

   system("PAUSE");

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:54:41.087

你声明`dob`不是`date`。`&my_calc[count]->dob.day`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:54:47.007

您需要使用`dob`，而不是`date`，例如：

```
scanf("%d",&my_calc[count]->dob.day); 
```

您要访问的元素的名称是`dob`-`date`是结构名称。

通过此修改，您的代码可以正常编译，但您会遇到一些严重的**运行时问题**- 有关如何正确分配内存的提示，请参阅其他答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:55:44.137

如果您 malloc`sizeof(struct calc)`则包括该结构的所有元素（阅读：它对结构`sizeof`的所有元素执行 a 并将其相加并根据其分配空间）。

我还在您的代码中看到了很多指针/数组问题，您应该认真阅读该主题。

并且您需要通过元素的名称来引用`dob`，而不是元素所在的 strcut 的名称 ( `date`)

# jquery - 如何在调整大小事件上触发我的 jQuery 脚本

> ID：15383230
> 
> 赞同：0
> 
> 时间：2013-03-13T10:52:03.067
> 
> 标签：jquery, navigation, responsive-design

我有一个 jQuery 脚本，可以将我的菜单重新组织成一个选择表单元素，它工作正常。

我想在 .resize() 事件上触发它，但我无法让它工作。我该怎么做？

```
 $(function () {
    $(window).resize(function () {
        /* Get the window's width, and check whether it is narrower than 580 pixels */
        var windowWidth = $(window).width();
        if (windowWidth <= 580) {

            /* Clone our navigation */
            var mainNavigation = $('nav.main-navigation').clone();

            /* Replace unordered list with a "select" element to be populated with options, and create a variable to select our new empty option menu */
            $('nav.main-navigation').html('<select class="menu"></select>');
            var selectMenu = $('select.menu');

            /* Navigate our nav clone for information needed to populate options */
            $(mainNavigation).children('ul').children('li').each(function () {

                /* Get top-level link and text */
                var href = $(this).children('a').attr('href');
                var text = $(this).children('a').text();

                /* Append this option to our "select" */
                $(selectMenu).append('<option value="' + href + '">' + text + '</option>');

                /* Check for "children" and navigate for more options if they exist */
                if ($(this).children('ul').length > 0) {
                    $(this).children('ul').children('li').each(function () {

                        /* Get child-level link and text */
                        var href2 = $(this).children('a').attr('href');
                        var text2 = $(this).children('a').text();

                        /* Append this option to our "select" */
                        $(selectMenu).append('<option value="' + href2 + '">--- ' + text2 + '</option>');
                    });
                }
            });

        }

        /* When our select menu is changed, change the window location to match the value of the selected option. */
        $(selectMenu).change(function () {
            location = this.options[this.selectedIndex].value;
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:56:51.110

好吧，试试这个`resize!`

```
$("#div").resize(function(e){
   // do something when #div element resize
}); 
```

# c# - 用于控制 wcf 服务的 GUI

> ID：15383234
> 
> 赞同：-3
> 
> 时间：2013-03-13T10:52:17.710
> 
> 标签：c#, winforms, wcf

是否可以创建一个 GUI（winform）来控制 wcf 服务并将数据发送到连接到该服务的客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:00:41.337

简短的回答：是的 - 只是因为 C# 几乎所有事情都是可能的 :-)

长答案：这取决于你想控制什么。如果要打开/关闭服务，最好将其实现为 Windows 服务，并使用 Windows 手段来控制服务。如果您想在服务中“更改设置”，那么：是的，这只是另一个客户端。

要将消息从服​​务发送到客户端，最好实现回调合约（也称为双向通信）。见这里：http: [//idunno.org/archive/2008/05/29/wcf-callbacks-a-beginners-guide.aspx](http://idunno.org/archive/2008/05/29/wcf-callbacks-a-beginners-guide.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:53:48.170

是的，好吧，一个*调用*服务的 GUI；*我想说，控制** 是另外一回事，但同样可能。

[*对我来说，控制将是一个应用程序，它位于它旁边，能够打开、关闭、重置等。与使用它完全不同的东西。]

# android - 如何解析这些类型的 xml 数据？

> ID：15383242
> 
> 赞同：0
> 
> 时间：2013-03-13T10:52:34.130
> 
> 标签：android, xml-parsing

我需要以某种方式解析的数据如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<parent>

<child ID="1" Name="CHILD" Order="1">

<subchild ID="1" Name="SUB_CHILD" Order="1">
<subchild ID="1" Name="SUB_CHILD_NODE1" Order="01"/>
<subchild ID="2" Name="SUB_CHILD_NODE2" Order="02"/>
</subchild>

</child>

</parent> 
```

这就像打开子文件夹，主文件夹 -> inside_main_folder -> inside_main_folder 中的数据。对不起，我无法解释，这是第一次看到这种数据。

我之前解析过数据，但它看起来像这样：

```
<results>
    <result>
        <id>1</id>
        <name>Mark</name>
        <score>6958</score>
    </result>
    <result>
        <id>2</id>
        <name>Wesley</name>
        <score>4039</score>
    </result>
</result> 
```

顺便说一句，我正在使用 DOMParser。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:58:31.247

那些“ID”、“Name”和“Order”是节点的属性。获取节点后，在节点上使用 getAttribute 方法（查看 DOM 文档以查看该方法的确切名称）来解析“ID”、“Name”和“Order”的值。

# java - 错误：请将主方法定义为：public static void main(String[] args)

> ID：15383244
> 
> 赞同：0
> 
> 时间：2013-03-13T10:52:40.717
> 
> 标签：java

在执行下面的程序时，我收到错误消息“错误：在 Parent_Package.Parent 类中找不到主方法，请将主方法定义为：public static void main(String[] args)”........ .......... 任何人都知道如何解决这个问题吗？

```
First Package
==============
package Parent_Package;

public class Parent {
     int money = 100;enter code here
     protected  void give_Money(){
    money = money-10;
     System.out.println(money);
}
}

======================
Second Package
===================================
 package Child_Package;

 import Parent_Package.Parent;

 class Child extends Parent{
        public void donate() {
            give_Money();
        }

    }

 class Friend {
     public static void main(String[] args){
    Child c = new Child();
    c.donate();

    }
}

==================================================</body></html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T10:55:23.277

运行这个 Java 程序时，您需要运行`Friend`该类，因为这是唯一一个具有 main 方法的类。

看起来您正在运行`Parent`没有定义 main 方法的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:56:26.707

`class`which has`main`方法应标记`public`为.

所以，让你`class Friend`的`public class Friend`

和

运行`java Friend`而不是`java Parent`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:09:38.420

默认情况下，运行一个包含多个类的文件将运行公共类（单个文件中只能有一个类是公共的）。在您的代码中 Parent 是不包含 main 方法的公共类。这就是为什么它没有找到主要方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-10T04:41:04.167

由于您尚未将 Parent 类标记为 public，因此将分配“默认”访问修饰符。在java中，类只能看到另一个包中存在的“公共”类。由于您的 Friend 被标记为默认值（由编译器），因此 Child 类将无法看到 Parent 类。

# android - 如何在 Android 中启用/禁用 3rd 方应用程序？

> ID：15383253
> 
> 赞同：2
> 
> 时间：2013-03-13T10:53:27.890
> 
> 标签：android

众所周知，从 Android Ice Cream Sandwich（4.0 版）我们可以禁用或启用系统的内置应用程序。现在，我想开发一个 Android 应用程序，我想在系统设置中为 3rd 方应用程序添加此功能。这有可能以编程方式完成吗？

任何帮助都是不言而喻的。

如何在 Android Ice Cream Sandwich 中禁用系统应用

1.  进入主系统设置。（您可以通过选择手机应用程序托盘中的“设置”图标到达那里。）
2.  向下滚动到“设备”部分并选择“应用程序”选项。
3.  点击顶部标有“全部”的标签，然后滚动列表以找到您想要爆破的应用程序。
4.  点击应用程序，然后点击“禁用”按钮。在出现的确认框中点击“确定”。

完成这些步骤后，您可以成功禁用系统应用程序。如果没有任何反应，只需重新启动手机。

# android - 谷歌播放地图应用程序在 Eclipse 中不起作用

> ID：15383257
> 
> 赞同：0
> 
> 时间：2013-03-13T10:53:47.593
> 
> 标签：android, map

我已经完成了 Google play 所需的所有设置。但是我在 Eclipse 中的模拟器给了我错误“不幸的是你的 com.vogella .. ..stopped”请给我建议解决方案，以便我可以检查我的谷歌地图示例代码是否正常工作。

我的 ShowMapActivity.java 文件

```
package com.vogella.android.locationapi.maps;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

@SuppressWarnings("unused")
public class ShowMapActivity extends Activity {
static final LatLng HAMBURG = new LatLng(53.558, 9.927);
static final LatLng KIEL = new LatLng(53.551, 9.993);
private GoogleMap map;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_show_map);
map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
    .getMap();
// Move the camera instantly to hamburg with a zoom of 15.
map.moveCamera(CameraUpdateFactory.newLatLngZoom(HAMBURG, 15));

// Zoom in, animating the camera.
map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
getMenuInflater().inflate(R.menu.show_map, menu);
return true;
}

} 
```

我的 activity_show_map xml 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment" />

</RelativeLayout> 

AnrdoidManifest.xml file

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.vogella.android.locationapi.maps"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="17"
    android:targetSdkVersion="17" />

<permission
    android:name="com.vogella.android.locationapi.maps.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<uses-permission          android:name="com.vogella.android.locationapi.maps.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission    android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<application
android:allowBackup="true"
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@style/AppTheme" >
<activity
android:name="com.vogella.android.locationapi.maps.MainActivity"
android:label="@string/app_name" >
<intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyBIVouPmUMc0-EDPtQwqgzVcwlEt9NlaIo" />
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T04:44:01.660

根据此链接：[http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)。您的模拟器必须运行 Google API 4.2.2 或更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T20:56:54.127

我试图在模拟器上运行一个使用谷歌播放服务的应用程序，它可以工作

首先创建具有 api 级别 18 (Android 4.3) 的 Android Emulator

你必须下载两个APK：

1) Google play APK 名为 com.android.vending.apk (求最新版本)

2) 名为 com.google.android.gms.apk 的 Google play 服务（求最新版本）

然后在您刚刚创建的模拟器中安装这两个 apk：

打开您的控制台，然后转到您的 SDK 的平台工具文件

将这些命令写入安装 apk

**adb install com.android.vending.apk**

然后

**adb install com.android.vending.apk**

使用此命令重新启动您的 adb

**亚行重启**

启动您的应用程序希望它可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:57:31.950

Google Maps for Android v2 API 不能在开箱即用的模拟器中运行。有些人用一些技巧让它工作，但不幸的是我自己没有。

你可以通过[这篇文章](https://stackoverflow.com/q/13691943/620338)自己尝试一下，祝你好运！...或使用真实设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T05:57:11.100

即使我在模拟器上运行地图也没有运气。但是在真实设备上它应该可以正常工作。

[这里有一些步骤..希望它有所帮助](http://umut.tekguc.info/en/content/google-android-map-v2-step-step)

一些概要

*安装谷歌服务包；gms和自动售货机*

```
Be sure that emulator started Copy attached com.google.android.gms-19032013.apk and com.google.android.vending-19032013.apk files to <bundel root>\sdk\platform-tools
    Open command from and go to <bundel root>\sdk\platform-tools
    then run command adb install com.google.android.gms-19032013.apk

then run command adb install com.android.vending-19032013.apk
if it says already exits then run commands
    adb uninstall com.android.vending
    adb uninstall com.google.android.gms 
```

猜猜这会有所帮助:)

# linux-kernel - 是否有任何内核工具可用于以合理的精度测量中断延迟？

> ID：15383259
> 
> 赞同：5
> 
> 时间：2013-03-13T10:53:49.563
> 
> 标签：linux-kernel, interrupt, interrupt-handling

我正在尝试测量各种Linux内核（启用RT补丁等）的中断延迟中的抖动。我知道最好的方法是使用示波器来执行此操作，通过使用 GPIO 引脚生成中断并在中断服务例程中切换另一个 GPIO 引脚，但我想知道是否有任何 Linux 内核工具可以执行此操作，并且可能是我可以做一个数字的比较。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T03:49:18.790

一种典型的方法是设置一个高精度时钟（如 CPU 的周期计数器）以在未来某个随机但已知的时间触发中断，并在 ISR 中测量时钟设置时间之间的差异与实际达到 ISR 的时间相比。

（其中的“随机”部分是为了确保您避免在安静或繁忙时间系统地进行测量——例如，您不希望您的定时器中断与网卡中断同时系统地触发，这是不公平的提高你的延迟数字。）

一个在一定程度上实现了这一点的工具是[Cyclictest](https://wiki.linuxfoundation.org/realtime/documentation/howto/tools/cyclictest)，尽管它似乎是在内核线程内而不是 ISR 本身测量时间，这会在一定程度上推高您测量的延迟数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T05:58:17.470

使用“循环测试”实用程序来测量延迟，我已经做过研究，我正在使用循环测试来测量 powerpc 平台上移植的 RT linux 的抖动。
测量延迟的简单而强大的实用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T03:14:37.813

另一种方法是将目标板的一个 GPIO 输出连接到另一个 GPIO 输入，将信号拉到 GPIO 输出上并在 GPIO 的 ISR 例程中处理此事件。检查 GPIO 输入 ISR 的上拉信号和触发的时间差。这是用于 Raspberry 板的开源代码：

[Linux GPIO IRQ 延迟测试](https://github.com/gkaindl/linux-gpio-irq-latency-test)

# javascript - 避免 jQuery 与 asp.net 中的多个 JavaScript 库发生冲突

> ID：15383263
> 
> 赞同：2
> 
> 时间：2013-03-13T10:54:01.000
> 
> 标签：javascript, jquery, asp.net, .net

我正在开发 C#.net 项目，我为菜单和图像滑块等使用了多个 javascript 库，但是出现了冲突，我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:13:52.043

在加载 jQuery 库之后立即调用[$.noConflict();](http://api.jquery.com/jQuery.noConflict/) 然后您对 jQuery 的所有调用都是使用`jQuery`关键字进行的。[来自jQuery 网站](http://api.jquery.com/jQuery.noConflict/)的示例：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  });
  // Code that uses other library's $ can follow here.
</script> 
```

# c++ - 向量的 STL 向量 - 好主意吗？调整“内部”矢量大小的机制？

> ID：15383270
> 
> 赞同：2
> 
> 时间：2013-03-13T10:54:27.383
> 
> 标签：c++, data-structures, vector, stl

我经常需要表示从整数`0...N-1`到某种类型的列表的映射`T`。对于各个列表，我需要在末尾动态添加元素。`N`通常是事先知道的（但不是在编译时）。我需要快速访问各个列表。

我通常使用 来实现它`vector<vector<T> > my_map(N)`，并且我使用它`my_map[key].push_back(val)`来添加元素。

我有两个问题：

这是实现此类地图的有效且推荐的方法吗？

另外，我想知道元素的连续性及其对调整大小的影响。说，我添加了一个元素`my_map[key].push_back(val)`，并且`my_map[key]`需要`key != N-1`调整大小。这是否会触发整个向量的副本`my_map`以保持其内容连续？或者是在`my_map`内部用指向堆上的向量的指针实现的？

我知道这可能取决于 STL 的实现。我主要对 Visual Studio 2010 和 Linux 中的 GCC 的机制（和速度影响）感兴趣。

* * *

## 更新

在评论中，@PeterWood 指向我`std::deque`作为列表的容器，它不需要重新分配来增长。我做了一些不科学的基准测试来`vector< deque<T> >`与as`vector< vector<T> >`进行比较。对于这两种情况，我分别为 100 万个包含 30 个元素的列表和 10,000 个包含 3000 个元素的列表计时。请注意，我的测试反映了我对此类数据结构的典型应用场景。`unsigned int``T`

我定时了一个随机访问“建立”，它的工作原理如下：

```
vector<ContainerT> my_map(numKeys);
vector<unsigned int> random_keys(numKeys);
for (unsigned int i=0; i<numKeys; ++i) random_keys[i] = i;
random_shuffle(random_keys.begin(),random_keys.end());

for (auto pKey=random_keys.begin(); pKey!=random_keys.end(); ++pKey)
{
  for (unsigned int i=0; i<listSize; ++i)
  {
    my_map[*pKey].push_back( rand() );
  }
} 
```

我定时从随机选择的列表中查询 3000 万个随机元素。

**结果**

`deque`对于许多小列表，构建速度稍快，但在两种*情况*下，查询速度都比向量慢。我得出结论，我会`vector< vector<T> >`因为我的问题类型而坚持下去。

```
deque

Keys: 1000000, list size: 30
Mean time buildup: 1.29517 seconds
Mean time query: 4.17624 seconds

Keys: 10000, list size: 3000
Mean time buildup: 0.998761 seconds
Mean time query: 5.052 seconds

vector

Keys: 1000000, list size: 30
Mean time buildup: 1.5347 seconds
Mean time query: 1.63043 seconds

Keys: 10000, list size: 3000
Mean time buildup: 0.604954 seconds
Mean time query: 1.58328 seconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:58:18.127

> 这是实现此类地图的有效且推荐的方法吗？

我认为这是实现这种地图的一种完全合理的方式。

> 另外，我想知道元素的连续性及其对调整大小的影响。说，我添加了一个元素`my_map[key].push_back(val)`，并且`my_map[key]`需要`key != N-1`调整大小。这是否会触发整个向量的副本`my_map`以保持其内容连续？或者是在`my_map`内部用指向堆上的向量的指针实现的？

不，它不会触发整个外部向量的副本。只有子向量是连续的；整个向量通常不是。

就心理模型而言，您可以将其`my_map`视为指向一维数组的指针数组，而不是单个连续的二维数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:59:05.037

它复制外部向量中的向量对象。但是这些向量内的堆上的对象不会被重新分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:59:07.407

每个 std::vector 通常都有一个内部指针，指向它分配 T 类型对象数组的内存。

在此类 T 类型的向量的向量中，调整内部向量的大小不会调整外部向量的大小（`my_map`在您的示例中），因为外部向量只能被视为指向此类数组的指针的向量。内部向量数组位于外部向量之外的其他内存位置。

出于同样的原因，你的内部向量之间没有邻接`my_map`

# php - 在 Yii 中以数组形式获取翻译的 monthNames/dayNames

> ID：15383272
> 
> 赞同：5
> 
> 时间：2013-03-13T10:54:30.033
> 
> 标签：php, internationalization, yii, fullcalendar, translation

Yii 在 framework/i18n/data/%lang%.php 文件中有很多翻译。这里是例如[德语翻译](https://github.com/yiisoft/yii/blob/master/framework/i18n/data/de_de.php)

我想在我的 Yii 项目中使用[Fullcalendar 。](http://arshaw.com/fullcalendar/)要翻译此日历，我必须为当前语言提供一组月名/日名。 [Fullcalendar monthNames 文档](http://arshaw.com/fullcalendar/docs/text/monthNames/)

Yii 中生成这样的数组的最佳方法是什么：

```
['January', 'February', 'March', 'April', 'May', 'June', 'July',
 'August', 'September', 'October', 'November', 'December'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T11:18:14.970

您可以使用[`json_encode`](http://php.net/json_encode)（或 Yii native `CJSON::encode()`）和 Yii 提供的数据生成它：

```
json_encode(
    include('path/to/yii/framework/i18n/data/de_de.php')['monthNames']['wide']
); 
```

（此语法需要 PHP 5.4 才能[解除数组引用](http://php.net/array#example-88)）

从 Yii 中的当前语言环境来看：

```
json_encode(
    Yii::app()->locale->getMonthNames()
) 
```

见[http://www.yiiframework.com/doc/api/1.1/CLocale#getMonthNames-detail](http://www.yiiframework.com/doc/api/1.1/CLocale#getMonthNames-detail)

# login - 在登录流星之前强制电子邮件验证

> ID：15383273
> 
> 赞同：11
> 
> 时间：2013-03-13T10:54:33.807
> 
> 标签：login, meteor

我用

```
Accounts.config({
    sendVerificationEmail: true, 
    forbidClientAccountCreation: false
}) 
```

在创建用户时发送电子邮件验证。但是，当用户注册时，他们在验证邮件之前被允许进入产品，这是我不想要的。

我尝试通过创建一个模板变量来破解它，该变量在验证用户时为真，但用户信息在模板渲染后到达，甚至使用 Meteor。setTimeout() 数据到达时我无法更新模板。

对正确的方法有什么建议吗？

发送

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-07-24T17:47:01.597

要完全阻止他们登录，您可以这样做：

```
Meteor.startup(function() {
  if (Meteor.isServer) {
    var loginAttemptVerifier = function(parameters) {
      if (parameters.user && parameters.user.emails && (parameters.user.emails.length > 0)) {
        // return true if verified email, false otherwise.
        var found = _.find(
                           parameters.user.emails, 
                           function(thisEmail) { return thisEmail.verified }
                          );

        if (!found) {
          throw new Meteor.Error(500, 'We sent you an email.');
        }
        return found && parameters.allowed;
      } else {
        console.log("user has no registered emails.");
        return false;
      }
    }
    Accounts.validateLoginAttempt(loginAttemptVerifier);
  }
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-13T11:28:09.453

首先，你需要让你的数据“不可破解”，看看发布功能：[http ://docs.meteor.com/#meteor_publish](http://docs.meteor.com/#meteor_publish)

因此，在您的产品的 Meteor.publish 函数中，您应该执行以下操作：

这确保客户只有在登录并拥有经过验证的帐户时才能看到产品。他们仍然可以登录，但*在他们的帐户得到验证之前看不到产品*。

**服务器js**

```
Meteor.publish("productinfo", function () {
  user = Meteor.users.findOne({_id:this.userId})
  if(user) {
      if(user.emails[0].verified) {
          //You can put some extra logic in here to check which product the user has, if you're selling or something like that
          return Products.find({});
      }
   }
}); 
```

请记住，您需要删除`autopublish`哪个流星使用以使生活更轻松，它基本上将所有集合发布给用户，但您想限制某些信息，因此您应该删除它

其次，您需要处理模板上的数据，以便如果用户未登录模板，则内容不可见。因此，即使在浏览器最初加载的那一步中，他们也不会看到产品

**客户端JS**

```
Meteor.subscribe("productinfo");

Template.products.products = function() {
  if(Meteor.userId()) {
    if(Meteor.user().emails[0].verified) {
        return Product.findOne({_id:"your product id"});
    }
  }
} 
```

这样，模板助手会检查用户是否已登录并且他们是否拥有经过验证的帐户。此外，如果在客户端更改了代码，由于发布功能，他们将看不到产品。

# php - 在每个控制器和操作之前进行 Codeigniter 身份验证

> ID：15383274
> 
> 赞同：2
> 
> 时间：2013-03-13T10:54:35.867
> 
> 标签：php, codeigniter

我正在使用 codeigniter 编写一个 Web 应用程序。
我想在我们的用户访问页面之前验证他们的权限。
实际上除了登录页面几乎所有的控制器动作都需要调用模型并使用

```
$this->Users->validate($username, $password) 
```

我想让它适用于每个控制器。我需要继承控制器类吗？我怎么能这样做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T10:58:32.057

我们有一个使用 Codeigniter 的项目以及我们的做法：

当你有一个新的控制器时：

```
class xxxx extends MY_Controller { } 
```

在 MY_Controller 类里面

```
function __construct() {
 // do your validations
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:49:25.680

最好的方法是您应该在 application/helper 文件夹中使用此名称或任何您想要但不要删除**_helper**的帮助文件，您应该使用此名称**authentication_helper**，并将以下代码作为您的

```
 <?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    function varify_session(){
       $CI = &get_instance();
       $user_session_id = $CI->session->userdata('logged_in');

       if($user_session_id  ==  '') {
        redirect('login');
       }
   }
   ?> 
```

用你的代码修改代码。然后在您的自动加载文件中并将其放入帮助程序中

```
 $autoload['helper'] = array('authentication'); 
```

然后你只需要像这样将这一行放入你的每个控制器构造函数中

```
 function __construct()
     {
         parent::__construct();
         varify_session();  
     } 
```

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:14:49.867

请在每个控制器的构造函数中编写以下代码

```
$this->load->library(‘session’);
$this->load->model(‘login_model’,'login’,TRUE);

/* check whether login or not */
if(!$this->login->check_session()){
redirect(‘/login’);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T10:58:15.013

过滤器使用前更正：

```
class Test extends Controller {

    var $before_filter = array();

    var $after_filter = array();

    function __construct() {
        parent::Controller();

        $this->before_filter[] = array(
            'action' => 'before_filter_run',
        );

    }

    function before_filter_run() {
        // Auth here
    }
} 
```

有关详细信息，请阅读[此处](http://forrst.com/posts/CodeIgniter_before_after_controller_action-Diy)

# css - 指针事件解决方法

> ID：15383275
> 
> 赞同：1
> 
> 时间：2013-03-13T10:54:37.507
> 
> 标签：css, internet-explorer, cross-browser

IE 已经有一些解决方案来解决指针事件。但是，我只是一个初学者，不理解也无法遵循该解决方案中的指南。 [IE 的 css 'pointer-events' 属性替代](https://stackoverflow.com/questions/5855135/css-pointer-events-property-alternative-for-ie/15367868?noredirect=1#comment21736908_15367868)

昨天，我发现了这个新方法。但不知何故，我无法做到这一点。谁能帮我？ [http://lea.verou.me/css3-secrets/#pointer-events-workaround](http://lea.verou.me/css3-secrets/#pointer-events-workaround)

```
function noPointerEvents (element) {
    $(element).bind('click mouseover', function (evt) {
        this.style.display = 'none';
        var x = evt.pageX, y = evt.pageY,
            under = document.elementFromPoint(x, y);
        this.style.display = '';
        evt.stopPropagation();
        evt.preventDefault();
        $(under).trigger(evt.type);
    });
} 
```

# java - Android - 我需要从一个布局替换另一个布局

> ID：15383281
> 
> 赞同：0
> 
> 时间：2013-03-13T10:54:57.663
> 
> 标签：java, android, xml, android-layout, tablet

我正在使用 android Tablet Devices 。在那，我有两个布局，如布局1和布局2。在我的平板电脑中，我在屏幕的前半部分设置了一个布局（布局1），在屏幕的后半部分设置了第二个（布局）。我的布局布局1​​有一个 ImageView。如果我单击该 Imageview ，我已经在 xml 中设计的布局必须替换现有的布局1。

我试过这样：

```
 package com.example.androidoverlapp;

import android.os.Bundle;
import android.app.Activity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;
import android.widget.LinearLayout;

public class MainActivity extends Activity implements OnClickListener {
ImageView i;LinearLayout l;View viewToLoad;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.homepage);
       i=(ImageView)findViewById(R.id.gprs);
       l=(LinearLayout)findViewById(R.id.homepageoverlappable);
       i.setOnClickListener(this);
    }
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
    l.removeAllViews();
    viewToLoad = LayoutInflater.from(this.getParent()).inflate(R.layout.activity_main, null);
    l.addView(viewToLoad);

    }

} 
```

但它强制关闭。

Logcat 输出：

```
03-13 16:04:41.461: I/Process(309): Sending signal. PID: 309 SIG: 9
03-13 16:05:53.056: D/dalvikvm(331): GC freed 652 objects / 53680 bytes in 145ms
03-13 16:05:58.796: D/AndroidRuntime(331): Shutting down VM
03-13 16:05:58.826: W/dalvikvm(331): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
03-13 16:05:58.826: E/AndroidRuntime(331): Uncaught handler: thread main exiting due to uncaught exception
03-13 16:05:58.866: E/AndroidRuntime(331): java.lang.NullPointerException
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.view.LayoutInflater.from(LayoutInflater.java:171)
03-13 16:05:58.866: E/AndroidRuntime(331):  at com.example.androidoverlapp.MainActivity.onClick(MainActivity.java:28)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.view.View.performClick(View.java:2364)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.view.View.onTouchEvent(View.java:4179)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.view.View.dispatchTouchEvent(View.java:3709)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
03-13 16:05:58.866: E/AndroidRuntime(331):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
03-13 16:05:58.866: E/AndroidRuntime(331):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
03-13 16:05:58.866: E/AndroidRuntime(331):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.os.Looper.loop(Looper.java:123)
03-13 16:05:58.866: E/AndroidRuntime(331):  at android.app.ActivityThread.main(ActivityThread.java:4363)
03-13 16:05:58.866: E/AndroidRuntime(331):  at java.lang.reflect.Method.invokeNative(Native Method)
03-13 16:05:58.866: E/AndroidRuntime(331):  at java.lang.reflect.Method.invoke(Method.java:521)
03-13 16:05:58.866: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
03-13 16:05:58.866: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
03-13 16:05:58.866: E/AndroidRuntime(331):  at dalvik.system.NativeStart.main(Native Method)
03-13 16:05:58.916: I/dalvikvm(331): threadid=7: reacting to signal 3
03-13 16:05:58.916: E/dalvikvm(331): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
03-13 16:06:00.739: I/Process(331): Sending signal. PID: 331 SIG: 9 
```

请有人告诉我如何解决这个问题？

# jquery - JavaScript 中的引用错误。附加函数中未定义的字符

> ID：15383282
> 
> 赞同：0
> 
> 时间：2013-03-13T10:54:59.190
> 
> 标签：jquery, html, referenceerror

使用来自 jquery 的 append 函数添加标签。

这是阻塞的jquery代码

```
tabSections(data).forEach(function(section){
    $("#sections nav ul").append("<li id='section_"+section+"' class='list_section' onClick='addText("+section+")'>" + section + "</li>");
}); 
```

以及来自浏览器的 HTML 代码

```
<li onclick="addText(287585-C)" class="list_section" id="section_287585-C">287585-C</li> 
```

当我单击*li*标签时，它会调用定义的函数*addText(section){}*。我得到的参考错误是它无法识别我传递给函数的完整字符串，而是 2 个数字（减法）。这就是为什么会出现错误说明 C 未定义的原因。

我正在尝试获取一个看起来像这样的 html 代码

```
<li onclick="addText('287585-C')" class="list_section" id="section_287585-C">287585-C</li> 
```

如何修改我的 javascript 代码，以便在 HTML 代码中出现 2 个引号（和/或 javascript 将参数解释为字符串而不是 2 个数字）？单击标签后会引发错误

*toString()*函数也没有做任何事情。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:20:38.840

```
tabSections(data).forEach(function(section){
    $("#sections nav ul").append('<li id="section_'+section+'" class="list_section" onClick="addText(\''+section+'\')">' + section + '</li>');
}); 
```

没有运行它...但尝试一下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:06:35.370

改成这样：

```
 $("#sections nav ul").append(
                             "<li id='section_'"+section+"'" 
                                  class='list_section' 
                                  onClick='addText("'+section+'")>' + section + 
                              "</li>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:07:31.890

您需要添加字符串分隔符，但使用`\`...

```
tabSections(data).forEach(function(section){
    $("#sections nav ul").append("<li id='section_"+section+"' class='list_section' onClick='addText(\""+section+"\")'>" + section + "</li>");
}); 
```

# ruby-on-rails - 为什么 print.scss 不能在 Heroku 上加载指南针/重置？

> ID：15383288
> 
> 赞同：0
> 
> 时间：2013-03-13T10:55:15.250
> 
> 标签：ruby-on-rails, asset-pipeline, compass-geolocation

在 localhost 上，Compass 运行良好。`screen.scss`加载`compass/reset`就好了。也是如此`print.scss`。

在 Heroku 上，screen.scss 仍然有效，但`print.scss`出现此错误：

```
Error compiling CSS asset
Sass::SyntaxError: File to import not found or unreadable: compass/reset.
Load path: Sass::Rails::Importer(/app/app/assets/stylesheets/print.scss)
(in /app/app/assets/stylesheets/print.scss)
/app/app/assets/stylesheets/print.scss:1 
```

为什么？我如何解决它？

相关文件中的相关行...

**宝石文件**：

```
gem "compass"
gem "pg"
gem "sass"
gem "sass-rails"
gem "haml"
gem "haml-rails"
gem "susy"
# gem "thin"
gem "unicorn"
gem "pdfkit"
gem "wkhtmltopdf-binary"

group :assets do
  gem "sass-rails"
  gem "coffee-rails"
  gem "compass-rails"
  gem "compass-susy-plugin"
end 
```

**配置/应用程序.rb**：

```
if defined?(Bundler)
  Bundler.require *Rails.groups(:assets => %w(development test))
end

module Testivate
  class Application < Rails::Application
    config.assets.enabled = true
    config.assets.paths << "#{Rails.root}/app/assets/fonts"    
    config.assets.initialize_on_precompile = false
    config.assets.version = '1.0'
    config.middleware.use "PDFKit::Middleware", :print_media_type => true        
  end
end 
```

**/config/environments/production.rb**：

```
Testivate::Application.configure do
  config.cache_classes = true
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true
  config.serve_static_assets = true
  config.assets.precompile += %w( .svg .eot .woff .ttf )
  config.assets.compress = true
  config.assets.compile = true
  config.assets.digest = true
end 
```

**/app/assets/stylsheets/screen.scss**（第一行）：

```
@import "compass/reset"; 
```

**/app/assets/stylesheets/print.scss**（第一行）：

```
@import "compass/reset"; 
```

**/app/assets/stylesheets/application.css**：

```
/*
 *= require_self
 *= require jquery.ui.core
 *= require screen
*/ 
```

**/app/views/reviews/print.html**（编译自`print.html.haml`）：

```
<head>
<link href="/assets/print.css" media="print, screen, projection" rel="stylesheet" type="text/css" />
</head> 
```

**/app/views/reviews/show.html**（编译自`show.html.haml`）：

```
<head>
<link href="/assets/application.css" media="screen" rel="stylesheet" type="text/css" />
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:32:29.623

[在55 分钟](http://blog.55minutes.com/2012/04/untangling-the-rails-asset-pipeline-part-4-troubleshooting/#main-stylesheet-works)博客上找到了答案：

> 默认情况下，Rails 只预编译 application.css。如果你有额外的样式表，比如 ie.css 或 print.css，除非你明确告诉 Rails 这样做，否则它们不会被预编译。
> 
> `config.assets.precompile += ['ie.css', 'print.css']`

# ruby-on-rails - nil:NilClass 的未定义方法“用户”

> ID：15383294
> 
> 赞同：0
> 
> 时间：2013-03-13T10:55:32.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

在我的模型电子邮件令牌中，我有

```
def self.token_valid(token, type)
   return unless token.present?
   token = EmailToken.where("token = ? and verification_type = ? and confirmed = 'false' and created_at <= ?", token, type, EmailToken.expires).includes(:user).first
   user = token.user
 end 
```

我从我的控制器调用这个方法

```
def confirm_password_reset
    @user = EmailToken.token_valid(params[:pass_reset],"password")
    render 'reset_password' if @user
end 
```

这些条件是有效的，因为我已经对其进行了测试，但并未尝试将其与用户相关联并且它可以工作。我要做的是获取`token_valid`确认令牌并返回令牌及其关联用户的方法。the`belongs_to`和`has_many`del 也已定义。
`Current error : undefined method user for nil:NilClass`
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:19:52.250

解决此问题的最佳方法是让您的模型返回令牌，然后在您的 reset_password 视图中检查 @user obj

```
<%= @user.inspect %> 
```

我的猜测是它返回和空数组。如果您使用的是 sqlite，您可能需要阅读这个 关于 sqlite 中布尔数据类型的[参考文档。](http://www.sqlite.org/datatype3.html)因此，您可能希望将您的已确认字段更改为 0 表示 false 和 1 表示 true。

```
token = EmailToken.where("token = ? and verification_type = ? and confirmed = 0 and created_at <= ?", token, type, EmailToken.expires).includes(:user).first 
```

如果没有，请检查表格中的拼写错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:58:10.297

这一行：

```
 token = EmailToken.where("token = ? and verification_type = ? and confirmed = 'false' and created_at <= ?", token, type, EmailToken.expires).includes(:user).first 
```

返回零。

# mysql - 同步时 SQL 语法错误 1064

> ID：15383301
> 
> 赞同：0
> 
> 时间：2013-03-13T10:55:46.990
> 
> 标签：mysql, sql

我正在使用 MySQL Workbench，我刚刚在我的 MySQL 模型中添加了一个新表。当我尝试与数据库同步时，出现以下错误：

```
Executing SQL script in server
ERROR: Error 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') )
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_general_ci' at line 5

CREATE  TABLE IF NOT EXISTS `NAW`.`HTML` (
   `ID` INT(11) NOT NULL AUTO_INCREMENT ,
    `HTML` LONGTEXT NULL DEFAULT NULL ,
    PRIMARY KEY (`ID`) ,
    SPATIAL INDEX () 
)   ENGINE = InnoDB
    DEFAULT CHARACTER SET = utf8
    COLLATE = utf8_general_ci

SQL script execution finished: statements: 3 succeeded, 1 failed 
```

如果有人看到出了什么问题，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:00:47.657

试试这个。

```
CREATE  TABLE IF NOT EXISTS `NAW`.`HTML` (   
   `ID` INT(11) NOT NULL AUTO_INCREMENT ,
    `HTML` LONGTEXT NULL DEFAULT NULL ,
    PRIMARY KEY (`ID`) ,
    SPATIAL INDEX (`ID`) 
)   ENGINE = MyISAM 
    DEFAULT CHARACTER SET = utf8
    COLLATE = utf8_general_ci 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:15:40.663

您目前（5.6）不能将空间索引与 innoDb 引擎一起使用，而是使用 MyISam 引擎。但是，从 5.0.6 开始，您可以将空间数据类型与 InnoDb 一起使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:02:19.580

您应该`=`从字符设置中删除标志。

```
CREATE  TABLE IF NOT EXISTS `NAW`.`HTML` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `HTML` LONGTEXT NULL DEFAULT NULL,
  PRIMARY KEY (`ID`),
  SPATIAL INDEX ())
ENGINE = MyISAM
DEFAULT CHARACTER SET 'utf8'
COLLATE 'utf8_general_ci' 
```

# c# - 如何将匿名类型转换为 IListSource、IEnumerable 或 IDataSource

> ID：15383302
> 
> 赞同：0
> 
> 时间：2013-03-13T10:55:48.380
> 
> 标签：c#, linq, .net-3.5, ienumerable, anonymous-types

我创建以下内容`anonymous type`：

```
 int group_id = 0;
  int dep_code = 0;
  int dep_year = 0;
  string dep_name = string.Empty;
  int boss_num = 0;
  string boss_name = string.Empty;
  var list =  new  { group_id = group_id, dep_code = dep_code, dep_year = dep_year, dep_name = dep_name, boss_num = boss_num, boss_name = boss_name }; 
```

* * *

怎么转换成`IListSource, IEnumerable, or IDataSource.`？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:57:47.223

如果您只是想创建一个具有单个值的序列，则可以使用隐式类型数组：

```
int group_id = 0;
int dep_code = 0;
int dep_year = 0;
string dep_name = string.Empty;
int boss_num = 0;
string boss_name = string.Empty;
var list =  new[] { 
    new { group_id, dep_code, dep_year, dep_name, boss_num, boss_name }
}; 
```

请注意，这使用*投影初始*值设定项，其中属性名称是从表达式中推断出来的。

不过，我*强烈*建议您对变量使用常规名称，例如`groupId`. 也不清楚`dep`这里是什么意思 - 如果这是一个缩写，您可能需要扩展它以清楚起见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:00:34.993

* * *

## 笔记

*根据我的问题中一些原始发帖人的评论，问题是关于 .NET Framework 3.5。我自己重新标记了这个问题。无论如何，我把这个答案留在这里，因为它可能在未来对原始海报和未来的访客有用。*

* * *

你为什么不使用匿名对象而不是使用匿名对象`ExpandoObject`？

```
dynamic list = new ExpandoObject();
list.group_id = group_id;
list.dep_code = dep_code;
// ... and so on. 
```

一个很好的细节是`ExpandoObject`implements `IDictionary<string, object>`，而 bingo:`IDictionary<string, object>`将有一个`Values`属性，它 implements `IEnumerable<T>`！

```
IEnumerable<object> items = ((IDictionary<string, object>)list).Values; 
```

### 更新

由于我看到 Jon Skeet 的答案对你来说是正确的，我猜你正在寻找一个匿名对象列表，而不是一个匿名对象*变成“可枚举”*（*从你的问题中知道什么对你有好处并不容易。 ..我不会删除我的答案，因此任何其他寻找我的第一个理解的访问者仍然可以发现我的答案非常有用*）。

现在，更好地理解您的问题，您也可以这样做：

```
// Create a list of objects and you got it!
List<object> list = new List<object>();
list.Add(new { group_id, dep_code, dep_year, dep_name, boss_num, boss_name }); 
```

# asp.net - WebControl 生成 ASP.NET 中的错误

> ID：15383307
> 
> 赞同：3
> 
> 时间：2013-03-13T10:56:09.737
> 
> 标签：asp.net, visual-studio-2010

我得到了我所有的 Cotrols 因错误而消失了

错误创建控件 [controlid] 错误 HRESULT E_FAIL 已从对 COM 组件的调用中返回。

有人对此错误有想法吗？

我在 Visual Studio 2010 操作系统中工作：Windows7

当我今天开始项目时，此错误已自动生成。谢谢-Jadeja

# c# - 如何从 Excel 工作表中获取列，如果 Excel 工作表名称包含空格字符，即“人员详细信息”

> ID：15383308
> 
> 赞同：1
> 
> 时间：2013-03-13T10:56:11.407
> 
> 标签：c#, asp.net, ado.net, excel-2010

这里我使用 ADO.Net 使用指定的 connectionString 连接到 Excel 文件，它工作正常，我唯一担心的是工作表名称是否有空格字符而不是它不从相应的工作表返回列名。我的代码：

```
 if (extension == ".xls")
        {
            connectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;" +
            "Data Source=" + Server.MapPath("~\\ExcelUpload\\Excelsheets\\temp.xls") + ";" +
            @"Extended Properties=" + "\"Excel 8.0;HDR=YES;\"";
        }
        else if (extension == ".xlsx")
        {
            connectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;" +
            "Data Source=" + Server.MapPath("~\\ExcelUpload\\Excelsheets\\temp.xlsx") + ";" +
            @"Extended Properties=" + "\"Excel 12.0;HDR=YES;\"";
        }

        DbProviderFactory factory = DbProviderFactories.GetFactory("System.Data.OleDb");
        DbConnection connection = factory.CreateConnection();
        connection.ConnectionString = connectionString;
        connection.Open();

        DataTable dt;
        String[] restrection = { null, null, sheetName + "$", null };
        dt = connection.GetSchema("Columns", restrection); 
```

那么我们如何才能将具有空格字符的 excelsheet 名称命名为 paas 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:47:05.200

尝试

```
String[] restrictions = { null, null, "['" + sheetName + "$']", null }; 
```

因此，如果您有一个工作表 TEST WORKSHEET 它变成了“TEST WORKSHEET$”

为什么我们必须遵循这种 WIERD 命名约定，这让我无法理解

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:06:19.370

也许你可以使用这样的东西：

```
var dataset = new DataSet();
var connectionString = "connstring";
var connection = new OleDbConnection(connectionString);

connection.Open();

var sheets = connection.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });
if (sheets == null || sheets.Rows.Count < 1) throw new InvalidOperationException("CantReadWorksheets");

foreach (DataRow sheet in sheets.Rows)
{
    var tableName = sheet["Table_Name"].ToString();
    var sql = "SELECT * FROM [" + tableName + "]";

    var adap = new OleDbDataAdapter(sql, connection);
    adap.Fill(dataset, tableName);
}

connection.Close(); 
```

您可以看到我是如何获取工作表名称的。（`try..catch`块被剪断）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:03:07.550

包含空格的文件名应该没有问题。在读取文件之前尝试检查文件是否存在：

```
System.IO.File.Exists(Server.MapPath("~\\ExcelUpload\\Excelsheets\\temp filename.xlsx")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:15:10.647

编码...

```
String[] restrection = { null, null, sheetName + "$", null }; 
```

...在工作表名称上附加一个“$”。也许工作表名称需要分隔，也许......

```
String[] restrection = { null, null, "[" + sheetName + "]$", null }; 
```

...或者...

```
String[] restrection = { null, null, "\"" + sheetName + "\"$", null }; 
```

...？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-28T09:38:09.963

尝试替换这个：

```
connectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;" +
            "Data Source=" + Server.MapPath("~\\ExcelUpload\\Excelsheets\\temp.xls") + ";" +
            @"Extended Properties=" + "\"Excel 8.0;HDR=YES;\""; 
```

有了这个：

```
string conn = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" + path +
                              ";Extended Properties=\'Excel 8.0; HDR=YES; IMEX=1;\'"; 
```

Excel 12.0 也一样。就我而言，解决这个问题:)

# javascript - CRM 2011 中的 JavaScript

> ID：15383312
> 
> 赞同：4
> 
> 时间：2013-03-13T10:56:26.320
> 
> 标签：javascript, dynamics-crm-2011

法定免责声明：JavaScript 新手

**表格**：我的表格

**领域**：

```
ntt_name
ntt_lookup1
ntt_lookup2 
```

**要求**：

读取 ntt_lookup1 和 ntt_lookup2 的值并获取名称（不是 id）并将它们连接起来并将其填充到名称字段（主属性）中。

我将其作为 Web 资源上传，将其与 Form MyForm 关联并将其添加到 onsave 事件。

我收到以下错误。

![在此处输入图像描述](../Images/d97aaedb3dc4af9952ad0a7c4426ef7a.png)

**问题**：我做错了什么？

**到目前为止我做了什么**：

1.  谷歌搜索错误并找到[了这个](https://stackoverflow.com/questions/10128973/ie-throws-javascript-error-the-value-of-the-property-googlemapsquery-is-null)问题。因此，请使用 Notepad++ 和手动手动跟踪检查是否有任何丢失的括号。

* * *

**代码**：

```
if (typeof(CRMDynamics2011) == "undefined")
{ CRMDynamics2011 = {}; }

CRMDynamics2011.MyForm = {
    FormSave: function() {
        alert("Within Function FormSave");
        var lookup1 = Xrm.Page.getAttribute("ntt_lookup1").getValue();
        var lookup2 = Xrm.Page.getAttribute("ntt_lookup2").getValue();
        if (lookup1 != null && lookup1[0] && lookup1[0].name != null) {
            alert("lookup1 is NOT NULL");
            var value1 = lookup1[0].name;
        }
        if (lookup2 != null && lookup2[0] && lookup2[0].name != null) {
            alert("lookup2 is NOT NULL");
            var value2 = lookup2[0].name;
        }
        var fieldName = Xrm.Page.getAttribute("ntt_name");
        fieldName.setValue(value1 + ' - ' + value2);

    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:08:42.547

当您使用命名空间时，您必须完全限定要调用的方法。

因此，在 CRM 的表单属性中，用于 OnSave 事件

```
CRMDynamics2011.MyForm.FormSave(); 
```

然后，当您单击保存时，CRM 应该调用您的方法。

# android - Android 模拟器主机文件

> ID：15383315
> 
> 赞同：10
> 
> 时间：2013-03-13T10:56:33.627
> 
> 标签：android, avd, hosts

我想知道如何更新 android 虚拟设备上的主机文件？每次我重新打开模拟器时，它都会出现默认主机文件，所以我每次都拉主机文件。

我现在应该做什么：

1.  emulator.exe -avd %avd_name% -partition-size 256 -gpu on
2.  adb.exe 等待设备
3.  adb.exe 重新挂载
4.  adb.exe push %avd_root_dir%\hosts /system/etc

但是下次我启动模拟器时，会有默认的主机文件。如何只更改一次主机文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T05:25:50.873

Myabe 你必须重新包装`system.img`。

它在`sdk/systemimages/android-**/armeabi-v7a`.

# c++ - 复制类内动态数组的构造函数和运算符 =

> ID：15383321
> 
> 赞同：-1
> 
> 时间：2013-03-13T10:56:46.147
> 
> 标签：c++, class, operator-keyword, copy-constructor, dynamic-arrays

我需要一些帮助来为我的类中的动态数组实现复制构造函数和 operator=。**我此时不允许使用向量**

这是我的代码： 类：

```
 class Matrix{
    private:
        int rows;
        int columns;
        double* matrix;
    public:
        Matrix();
        explicit Matrix(int N);
        Matrix(int M, int N);
        void setValue(int M, int N, double value);
        double getValue(int M, int N);
        bool isValid() const;
        int getRows();
        int getColumns();
        ~Matrix();
        friend ostream& operator<<(ostream &out, Matrix&matrix1);       
}; 
```

我的代码：

```
Matrix::Matrix(){
    matrix = NULL;
}

Matrix::Matrix(int N){
    matrix = new double[N * N];
    rows = N;
    columns = N;

    for(int i = 0; i < N; i++){
        for(int j = 0; j < N; j++){
            if(i==j)
                matrix[i * N + j] = 1;
            else
                matrix[i * N + j] = 0;
        }
    }
}

Matrix::Matrix(int M, int N){
    matrix = new double[M * N];
    rows = M;
    columns = N;

    for(int i = 0; i < M; i++){
        for(int j = 0; j < N; j++)
            matrix[i * N + j] =  0;
    }
}

Matrix::~Matrix(){
    delete [] matrix;
}

void Matrix::setValue(int M, int N, double value){
    matrix[M * columns + N] = value;
}

double Matrix::getValue(int M, int N){
    return matrix[M * columns + N];
}

bool Matrix::isValid() const{
    if(matrix==NULL)
        return false;
    else
        return true;
}

int Matrix::getRows(){
    return rows;
}

int Matrix::getColumns(){
    return columns;
}

ostream& operator<<(ostream &out, Matrix&matrix1){
    if(matrix1.isValid())
        for(int i = 0; i < matrix1.getRows(); i++){
            for(int j = 0; j < matrix1.getColumns(); j++)
                out << matrix1.getValue(i,j) << "\t";
            out << endl;
        }
    else
        out << "Matrisen er ikke gyldig."; //the matrix is not valid
    return out;
} 
```

像这样的东西会起作用吗？

```
Matrix &operator=(const Matrix &m) {*(this->matrix) = *(m.matrix);}
Matrix(const Matrix &rhs) : matrix(0) {
        this->matrix = new double();
        *(this->matrix) = *(rhs.matrix);
    } 
```

我还要重载运算符 += 和 +。我试图将其实现为：

```
const Matrix operator+=(Matrix matrix1, Matrix matrix2){
        if(!matrix1.isValid() || !matrix2.isValid()){
            cout << "En av matrisene er ugyldig"; //one of the matrices are invalid
            return Matrix::Matrix(); //returning a NULL matrix
        }
        else{
            if(matrix1.getColumns()==matrix2.getColumns() && matrix1.getRows()==matrix2.getRows()){
                Matrix temp(matrix1.getRows(), matrix1.getColumns());
                for(int i = 0; i < matrix1.getRows(); i++){
                    for(int j = 0; j < matrix1.getColumns(); j++)
                        temp.setValue(i,j,(matrix1.getValue(i,j) + matrix2.getValue(i,j)));
                }
                return temp;
            }
            else{
                cout << "Matrisene har ikke samme dimensjon"; //the matrices does not have the same dimensions
                return Matrix::Matrix();
            }
        }
    }
    const Matrix operator+(Matrix matrix1, Matrix matrix2){
        return matrix1 += matrix2;
    } 
```

像这样的东西会起作用吗？将运算符重载为类的一部分、类的朋友还是类之外更好？

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:02:05.863

你为什么删除另一个问题？我希望这只是一个错误：（见最后的编辑）

是的，您的代码甚至设计中都有很多问题。

只是给你一个想法：

您的 Matrix 没有复制构造函数（或移动），也没有“<code>=”。他们是：

```
Matrix(const Matrix &m); 
```

和（移动构造函数）：

```
Matrix(Matrix &&m); 
```

和

```
Matrix& operator=( const Matrix &m);
Matrix& operator=( Matrix &&m); 
```

如果你不定义这些特殊函数，编译器会为你定义。但它们只会在表面上起作用。程序编译但工作错误（*浅拷贝与深拷贝问题*，并按*值或按引用传递*）。我很高兴您`new`在构造函数中使用来构建`matrix`私有数组。而在析构函数中你`delete[]matrix`。每次`Matrix`通过值传递时，它都会使用编译器生成的复制构造函数进行复制，只需复制 的成员的值`Matrix`，从而复制指针的值`matrix`但不是数组。在调用结束时，此本地副本将被破坏，并且您的原始矩阵将被删除！！这只是众多问题之一。足够你坐下来，多读一读，然后再试一次。一个“简单”的修复可能会替换

```
 double *matrix; 
```

经过

```
std::vector<double> matrix; 
```

现在编译器生成的函数会更好地工作。

是的，如果你想与你一起使用`[]`，`Matrix`你需要定义它。And`+=`是一个二元运算符，它接受一个参数（左边总是`this`，一个指向调用它的对象的指针）。在这里，您只想要一个`+()`带有 2 个参数的免费或一个`+()`带有一个参数的成员。希望这对您有所帮助。再问一遍。

编辑：这可以作为一个`operator=`吗？

```
Matrix &operator=(const Matrix &m) {*matrix = *(m.matrix);} 
```

不，这只会复制第一个双精度数。您将需要对 entery 数组进行循环并复制每个元素。首先，您需要确保矩阵的大小是兼容的。（如果你使用`vector` `matrix=m.matrix`意志工作。）。您的复制构造函数的修复可能是：

```
Matrix::Matrix(const Matrix &m):   rows    (m.rows), 
                                   columns (m.columns), 
                                   matrix  (new double[rows* columns]) 
{
    for(int i = 0; i < rows; i++)
        for(int j = 0; j < columns; j++)
            matrix[i * columns + j] =  m.matrix[i * columns + j];

} 
```

并移动：

```
Matrix::Matrix(     Matrix &&m):   rows    (m.rows), 
                                   columns (m.columns), 
                                   matrix  (m.matrix) 
{
     m.matrix=nullptr;
     m.rows= m.columns=0;
} 
```

当您不关心原始值时，这一举措可以显着提高处理矩阵的效率，例如时间对象的情况。在这种情况下，您不需要重复复制每个数组元素：您只需窃取整个数组。这样做的好处是，在大多数情况下，编译器会为您“自动”选择正确的变体（复制或移动）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:06:10.537

```
Matrix &operator=(const Matrix &m) {*(this->matrix) = *(m.matrix);} 
```

这只会将 lhs 矩阵的第一个元素分配为与 rhs 矩阵的第一个元素相同。最重要的是，这将要求两个矩阵都已使用相同数量的行和列进行初始化。您可以使用 memcpy 或循环来分配所有元素。

```
Matrix(const Matrix &rhs) : matrix(0) {
    this->matrix = new double();
    *(this->matrix) = *(rhs.matrix);
} 
```

这将失败，因为您没有为新构造的实例的矩阵成员分配足够的内存（除非另一个矩阵是 1x1 矩阵）。假设矩阵以行优先顺序存储，它应该如下所示：

```
Matrix(const Matrix &rhs) : matrix(0), rows(rhs.rows), columns(rhs.columns) {
    this->matrix = new double[rows * columns];
    for (size_t r = 0; r < rows; r++) {
       for (size_t c = 0; c < columsn; c++) {
          this->matrix[r * columns + c] = rhs.matrix[r * columns + c];
       }
    }
} 
```

编辑：只是为了确保，这是我将如何做赋值运算符：

```
Matrix &operator=(const Matrix &m) {
    if (rows * columns != m.rows * m.columns) {
        delete [] this->matrix;
        this->matrix = new double[m.rows * m.columns];
    }
    rows = m.rows;
    columns = m.columns;
    for (size_t r = 0; r < rows; r++) {
       for (size_t c = 0; c < columsn; c++) {
          this->matrix[r * columns + c] = m.matrix[r * columns + c];
       }
    }
    return *this;
} 
```

# maven-3 - 如何将项目添加为另一个项目的依赖项？

> ID：15383322
> 
> 赞同：85
> 
> 时间：2013-03-13T10:56:47.193
> 
> 标签：maven-3

有两个独立的项目 (`myWarProject`和`MyEjbProject`)。因此，当我构建时，`myWarProject`我需要将其安装`MyEjbProject`到本地存储库中，这样我就可以在 myWarProject 中定义为依赖项并成功打包 myWarProject。

有没有办法在不`MyEjbProject`单独安装并且不定义为父模块的情况下处理这个问题。

我知道这可以通过ant build来实现，但是想知道有没有办法通过maven来处理？

我们可以用“pom”创建父项目，将另外两个移到父项目下。然而，不幸的是我不能这样做，因为目前我们已经将这两个作为单独的项目放在 CVS 中，我无法更改结构。如果我可以通过 pom 文件处理这个问题，这就是我要找的。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-13T11:08:32.637

假设 MyEjbProject 不是您拥有或想要使用 maven 构建的另一个 Maven 项目，您可以使用系统依赖项链接到项目的现有 jar 文件，如下所示

```
<project>
   ...
   <dependencies>
      <dependency>
         <groupId>yourgroup</groupId>
         <artifactId>myejbproject</artifactId>
         <version>2.0</version>
         <scope>system</scope>
         <systemPath>path/to/myejbproject.jar</systemPath>
      </dependency>
   </dependencies>
   ...
</project> 
```

也就是说，将包安装到存储库通常是更好的（也是首选方式），方法是使其成为一个 maven 项目并构建它，或者按照您似乎已经做的方式安装它。

* * *

但是，如果它们相互依赖，您始终可以创建一个单独的父项目（必须是“pom”项目），将其他两个项目声明为其“模块”。（子项目不必将第三个项目声明为其父项目）。结果，您将获得新父项目的新目录，您也很可能将两个独立的项目放置在其中，如下所示：

```
parent
|- pom.xml
|- MyEJBProject
|   `- pom.xml
`- MyWarProject
    `- pom.xml 
```

父项目将获得一个“模块”部分来命名所有子模块。然后聚合器将使用子模块中的依赖项来实际找出项目的构建顺序）

```
<project>
   ...
   <artifactId>myparentproject</artifactId>
   <groupId>...</groupId>
   <version>...</version>

   <packaging>pom</packaging>
   ...
   <modules>
     <module>MyEJBModule</module>
     <module>MyWarModule</module>
   </modules>
   ...
</project> 
```

这样，项目可以相互关联，但（一旦它们安装在本地存储库中）仍然可以作为其他项目中的工件独立使用

* * *

最后，如果您的项目不在相关目录中，您可以尝试将它们作为相关模块提供：

```
filesystem
 |- mywarproject
 |   `pom.xml
 |- myejbproject
 |   `pom.xml
 `- parent
     `pom.xml 
```

现在你可以这样做（在 maven 2 中工作，刚刚尝试过）：

```
<!--parent-->
<project>
  <modules>
    <module>../mywarproject</module>
    <module>../myejbproject</module>
  </modules>
</project> 
```

# asp.net-mvc - 分离 MVC 和 webAPI 控制器路由

> ID：15383334
> 
> 赞同：1
> 
> 时间：2013-03-13T10:57:22.327
> 
> 标签：asp.net-mvc, routes, asp.net-web-api

我创建了一个 WebApi 项目，它有多个 WebApi 控制器。根据我的要求，我必须在我的 WebApi 项目中添加一个 MVC 控制器。我的客户端代码正在向该 MVC 控制器发出 ajax 请求`{ControllerName/ActionMethodName}`。我的`global.asax`文件中有多个路线：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
);
routes.MapHttpRoute(
    name: "ActionRoute",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
);
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

下面是我的`ReportServiceBaseController`：

```
protected virtual ReportServiceBase CreateReportService(); 

[HttpPost]
public JsonResult LoadDocumentInfo(LoadDocumentInfoRequest request);

[HttpPost]
public JsonResult LoadDocumentMapInfo(LoadDocumentMapInfoRequest request);

[HttpPost]
public JsonResult LoadDocumentMapInfoFull(LoadDocumentMapInfoFullRequest request);

[HttpPost]
public JsonResult LoadPageInfo(LoadPageInfoRequest request); 
```

我在控制器中继承该`ReportService`控制器：

```
public class ReportServiceController : ReportServiceBaseController
{
    protected override PerpetuumSoft.Reporting.WebViewer.Server.ReportServiceBase   CreateReportService()
    {
        return new ServiceClass();
    }

} 
```

发出请求的客户端 URL：

> "http://" + 主机名 + "/ReportService/LoadDocumentInfo"

我认为 WebApi 路由正在抑制 MVC 控制器路由。如何将 MVC 控制器路由与 WebApi 路由分开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:45:06.890

您可以`ApiRouteConfig.cs`在`App_Start`.

```
namespace Mvc4App
{
    public class ApiRouteConfig
    {
        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.MapHttpRoute(
                name: "ActionRoute",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );
        }
    }    
} 
```

然后，编辑`Global.asax.cs`，调用`ApiRouteConfig.RegisterRoutes(RouteTable.Routes);`

# ios - UICollectionView 不加载-iOS

> ID：15383340
> 
> 赞同：0
> 
> 时间：2013-03-13T10:57:48.987
> 
> 标签：ios, uiviewcontroller, uicollectionview, uicollectionviewcell

我有一个`UIViewController`包含一个`CollectionView`但输出全白的

**在 GridViewController.h**

```
 #import <UIKit/UIKit.h>

 @interface GridViewController : UIViewController <UICollectionViewDataSource,
   UICollectionViewDelegate>{

  }
 @property (nonatomic, strong)UIImageView *imageHeader;
 @property (nonatomic, strong)UIButton * buttonHome;
 @property (nonatomic, strong)UILabel * labelTitle;
 @property (nonatomic, strong)UICollectionView * collectionView;

 //....
 @end 
```

**在 GridViewController.m**

```
 - (void)viewDidLoad
 {
    //....
     [self.collectionView registerClass:[UICollectionView class] 
         forCellWithReuseIdentifier:@"Cell"];

      NSLog(@"%@", self.collectionView);//here (null), why?
     self.collectionView.delegate=self;
     self.collectionView.dataSource=self;
    //...
  }

  - (NSInteger)numberOfSectionsInCollectionView: (UICollectionView *)collectionView
 {
      return 1;
 }

 - (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection: 
 (NSInteger)section;
{
     return 32;
 }

- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:
(NSIndexPath *)indexPath{

     NSString *kCellID = @"cellID";
     CollectionViewCellCustom *cell = [cv dequeueReusableCellWithReuseIdentifier:kCellID forIndexPath:indexPath];
    cell.imageView.backgroundColor =[UIColor greenColor];

    return cell;
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:24:01.533

我在您的代码中没有看到任何出口。所以我假设您尝试以编程方式创建它。为此，您应该这样做

```
UICollectionViewFlowLayout *layout= [[UICollectionViewFlowLayout alloc]init];
self.collectionView = [[UICollectionView alloc]initWithFrame:self.view.bounds collectionViewLayout:layout];
[self.view addSubView:self.collectionView];  
 [self.collectionView registerClass:[UICollectionViewCell class]
        forCellWithReuseIdentifier:@"Cell"];
 self.collectionView.delegate=self;
 self.collectionView.dataSource=self; 
```

在您的代码中，我可以看到您在`registerClass:[UICollectionView class]`做错`registerClass:[UICollectionViewCell class]`的事。

改变

```
 [self.collectionView registerClass:[UICollectionView class]forCellWithReuseIdentifier:@"Cell"]; 
```

到

```
 [self.collectionView registerClass:[UICollectionViewCell class]forCellWithReuseIdentifier:@"Cell"]; 
```

您使用不同单元格 ID 的另一个错误是注册和出队。让它一样。使用 id **Cell**注册单元并尝试使用**cellID进行双端队列**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:00:22.327

对于示例代码，您可以参考[这个](http://yashesh87.wordpress.com/2012/09/12/uicollectionview-sample-code/)。

希望这会帮助你。

祝一切顺利 ！！！

# java - android中的“returnRes无法解析为变量”错误

> ID：15383345
> 
> 赞同：0
> 
> 时间：2013-03-13T10:57:56.137
> 
> 标签：java, android, listview, scroll

我在一个虚拟项目中测试了无限滚动功能的功能，它工作正常，但如果我将相同的代码粘贴到我的原始项目中，我在变量“loadMoreListItems”和“returnRes 不能被解析为变量”解析为变量”，即使我检查了 android.R 导入和布局名称，一切都是正确的，不知道错误在哪里。

```
public class Home extends ListActivity {

ArrayList<HashMap<String, String>> songsList;
ListView list;
LazyAdapter adapter;
JSONArray posts;

LinearLayout line1,line2;
ImageView menu; 
boolean loadingMore = false;

ArrayList<String> songsList1;
LayoutInflater inflater;

static int jsonpage = 0;
JSONParser jParser;
JSONObject json;
TextView loadtext;
// All static variables
static final String URL = "http://www.exm.com/?json=get_recent_posts";
static final String KEY_POSTS = "posts";
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DATE = "date";
static final String KEY_CONTENT = "content";
static final String KEY_AUTHOR = "author";
static final String KEY_NAME = "name";
static final String KEY_ATTACHMENTS = "attachments";
static final String KEY_SLUG = "slug";
static final String KEY_THUMB_URL = "thumbnail";
static final String KEY_IMAGES = "images";
static final String KEY_URL = "url";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
   list = (ListView) findViewById(android.R.id.list);

 // get the LayoutInflater for inflating the customomView
 // this will be used in the custom adapter
 inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
 songsList = new ArrayList<HashMap<String, String>>();
_loaddata();

 LayoutInflater li = LayoutInflater.from(getBaseContext());

 View footerView = li.inflate(com.exm.com.R.layout.listfooter, null);

 loadtext = (TextView) footerView.findViewById(R.id.empty);

 loadtext.setEnabled(false);

 loadtext.setOnClickListener(new View.OnClickListener() {

 @Override  

 public void onClick(View v) {

 // TODO Auto-generated method stub

 Toast.makeText(getApplicationContext(), "poda",

 Toast.LENGTH_LONG).show();

 }
 });

 this.getListView().addFooterView(footerView);
// Getting adapter by passing json data ArrayList

 adapter = new LazyAdapter(this, songsList);

 list.setAdapter(adapter);

 list.setOnItemClickListener(new AdapterView.OnItemClickListener() {

 @Override

 public void onItemClick(AdapterView<?> parent, View view,

 int position, long id) {

 Toast.makeText(

 getApplicationContext(),

 "Click ListItem Number "

 + songsList.get(position).get("title"),

 Toast.LENGTH_LONG).show();

 }

 });
 this.getListView().setOnScrollListener(new OnScrollListener() {

     @Override

     public void onScrollStateChanged(AbsListView view, int scrollState) {

     // int first = view.getFirstVisiblePosition();

     // int count = view.getChildCount();

     //

     // if (scrollState == SCROLL_STATE_IDLE

     // || (first + count > adapter.getCount())) {

     // list.invalidateViews();

     // }

     if (scrollState == SCROLL_STATE_IDLE) {

     _loaddata();

     adapter.notifyDataSetChanged();

     }

     }

     @Override

     public void onScroll(AbsListView view, int firstVisibleItem,

     int visibleItemCount, int totalItemCount) {

     }

     });

     Thread thread = new Thread(null, loadMoreListItems);
     thread.start();
     }

@SuppressWarnings("unused")
private void _loaddata() {

try {

// getting JSON string from URL

jParser = new JSONParser();

jsonpage = jsonpage + 1;

json = jParser

.getJSONFromUrl("http://india.exm.net/ads/page/"

+ jsonpage + "/?json=get_recent_posts");

posts = json.getJSONArray(KEY_POSTS);

if (posts.length() > 0) {

for (int i = 0; i < posts.length(); i++) {

JSONObject c = posts.getJSONObject(i);

// Storing each json item in variable

String id = c.getString(KEY_ID);

String title = c.getString(KEY_TITLE);

String date = c.getString(KEY_DATE);

String content = c.getString(KEY_CONTENT);

// to remove all <P> </p> and <br /> and replace with ""

content = content.replace("<br />", "");

content = content.replace("<p>", "");

content = content.replace("</p>", "");

// authornumber is agin JSON Object

JSONObject author = c.getJSONObject(KEY_AUTHOR);

String name = author.getString(KEY_NAME);

String url = null;

String slug = null;

try {

JSONArray atta = c.getJSONArray("attachments");

for (int j = 0; j < atta.length(); j++) {

JSONObject d = atta.getJSONObject(j);

slug = d.getString(KEY_SLUG);

JSONObject images = d.getJSONObject(KEY_IMAGES);
JSONObject thumbnail = images
.getJSONObject(KEY_THUMB_URL);
url = thumbnail.getString(KEY_URL);

}
} catch (Exception e) {

e.printStackTrace();
    }

// creating new HashMap

HashMap<String, String> map = new HashMap<String, String>();

// adding each child node to HashMap key => value

map.put(KEY_ID, id);

map.put(KEY_TITLE, title);

map.put(KEY_DATE, date);

map.put(KEY_NAME, name);

map.put(KEY_CONTENT, content);

map.put(KEY_SLUG, slug);

map.put(KEY_URL,

url);

// adding HashList to ArrayList

songsList.add(map);

}

} else

loadtext.setText("Data ivlo thaan irukku k va summa look-u vidatha");

} catch (JSONException e) {

e.printStackTrace();

}

// Runnable to load the items

Runnable loadMoreListItems = new Runnable() {

@Override
public void run() {

// Set flag so we cant load new items 2 at the same time
loadingMore = true;
// Reset the array that holds the new items
songsList1 = new ArrayList<String>();

// Simulate a delay, delete this on a production environment!

try {

Thread.sleep(1000);

} catch (InterruptedException e) {

}

runOnUiThread(returnRes);  

}

};

// Since we cant update our UI from a thread this Runnable takes care of

// that!

private Runnable returnRes = new Runnable() {

@Override

public void run() {

// Loop thru the new items and add them to the adapter

if (songsList1 != null && songsList1.size() > 0) {

for (int i = 0; i < songsList1.size(); i++)

adapter.add(songsList1.get(i));

}

// Update the Application title

setTitle("Neverending List with "

+ String.valueOf(adapter.getCount()) + " items");

// Tell to the adapter that changes have been made, this will cause

// the list to refresh

adapter.notifyDataSetChanged();

// Done loading more.

loadingMore = false;

}

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:08:48.467

这与Android资源无关。

该变量`loadMoreListItems`在 中使用`onCreate()`，但在 中定义`_loaddata()`。您不能在一种方法中定义变量并在另一种方法中使用它。

你可以`loadMoreListItems`从`_loaddata()`

```
private Runnable _loaddata() {
    ...
    return loadMoreListItems;
} 
```

并`onCreate()`像这样使用它

```
Runnable loadMoreListItems = _loaddata();
...
Thread thread = new Thread(null, loadMoreListItems); 
```

并且您在使用`returnRes`in`Runnable loadMoreListItems`之前使用它稍后在相同的方法中定义它。您必须先定义和初始化`returnRes`，然后才能在`loadMoreListItems`. 所以移动`returnRes`之前`loadMoreListItems`应该解决这个问题。

# c# - 从字符串转换日期

> ID：15383350
> 
> 赞同：-1
> 
> 时间：2013-03-13T10:58:05.153
> 
> 标签：c#

我有一个字符串“03/13/13”，当我将它转换为`DateTime`它时，它会抛出错误`invalid string format`。

如何将字符串“03/13/13”转换为日期时间“03/13/13”（相同格式）

```
Convert.ToDateTime("03/13/13", new CultureInfo("en-GB")) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:59:25.070

将[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)与格式一起使用`"M/d/yy"`

```
DateTime dt = DateTime.ParseExact("03/13/13", "M/d/yy", CultureInfo.InvariantCulture); 
```

格式：

> ```
> M - For single digit or double digit month
> d - For single digit or double digit day
> yy- for two digits year. 
> ```

您可能会看到：[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

稍后，如果您想要相同格式的字符串表示，您可以执行以下操作：

```
string str = dt.ToString("MM/dd/yy") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T11:04:04.200

您可以使用`Convert.ToDateTime`或`DateTime.Parse`..

```
DateTime date = Convert.ToDateTime("5/17/2012"); 
```

或者

```
DateTime date1 = DateTime.Parse("5/17/2012"); 
```

**示例**：

```
 string date = "5/17/2012";
 DateTime dates = Convert.ToDateTime(date); 
```

# php - Symfony2：CRUD 编辑视图中的“无效架构”

> ID：15383351
> 
> 赞同：1
> 
> 时间：2013-03-13T10:58:06.987
> 
> 标签：php, xml, symfony, symfony-2.0

我们有一个运行Symfony **2.0.17**版本的站点（是的，我们知道它已经过时，正在迁移到 2.2.x）。它一直运行良好，直到几天前，我们开始收到**错误 500**并显示此消息：

> 警告：DOMDocument::schemaValidate()：/var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Validator/Mapping/Loader/XmlFileLoader.php 第 197 行中的架构无效

当我们尝试使用`FormBuilder`. 在我们的开发和测试环境中一切正常，这使得排除故障非常痛苦。

这个问题的可能原因是什么？自 1 月以来，没有对网站进行任何新的更改，而且它肯定在 3 月初有效，因为这是最新发布内容的时间戳。

这是完整堆栈跟踪的相关部分。`DOMDocument->schemaValidate()`是导致警告的方法。

```
at DOMDocument ->schemaValidate ('/var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Validator/Mapping/Loader/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd') 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Validator/Mapping/Loader/XmlFileLoader.php at line 197    
at XmlFileLoader ->parseFile ('/var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Form/Resources/config/validation.xml') 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Validator/Mapping/Loader/XmlFileLoader.php at line 32    
at XmlFileLoader ->loadClassMetadata (object(ClassMetadata)) 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Validator/Mapping/Loader/LoaderChain.php at line 57    
at LoaderChain ->loadClassMetadata (object(ClassMetadata)) 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Validator/Mapping/Loader/LoaderChain.php at line 57    
at LoaderChain ->loadClassMetadata (object(ClassMetadata)) 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Validator/Mapping/ClassMetadataFactory.php at line 68    
at ClassMetadataFactory ->getClassMetadata ('OurCompany\OurCMSBundle\SearchableInterface') 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Validator/Mapping/ClassMetadataFactory.php at line 65    
at ClassMetadataFactory ->getClassMetadata ('OurCompany\OurCMSBundle\Entity\News') 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Form/Extension/Validator/ValidatorTypeGuesser.php at line 314    
at ValidatorTypeGuesser ->guess ('OurCompany\OurCMSBundle\Entity\News', 'title', object(Closure)) 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Form/Extension/Validator/ValidatorTypeGuesser.php at line 39    
at ValidatorTypeGuesser ->guessType ('OurCompany\OurCMSBundle\Entity\News', 'title') 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Form/FormTypeGuesserChain.php at line 46    
at Symfony\Component\Form\{closure} (object(ValidatorTypeGuesser)) 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Form/FormTypeGuesserChain.php at line 85    
at FormTypeGuesserChain ->guess (object(Closure)) 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Form/FormTypeGuesserChain.php at line 47    
at FormTypeGuesserChain ->guessType ('OurCompany\OurCMSBundle\Entity\News', 'title') 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Form/FormFactory.php at line 315    
at FormFactory ->createBuilderForProperty ('OurCompany\OurCMSBundle\Entity\News', 'title', null, array()) 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Form/FormBuilder.php at line 575    
at FormBuilder ->create ('title', null, array()) 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Form/FormBuilder.php at line 691    
at FormBuilder ->buildChildren () 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Form/FormBuilder.php at line 654    
at FormBuilder ->getForm () 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Component/Form/FormFactory.php at line 138    
at FormFactory ->create (object(NewsType), object(News), array()) 
  in /var/www/customers/customername/symfony/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php at line 129   
at Controller ->createForm (object(NewsType), object(News)) 
  in /var/www/customers/customername/symfony/src/Customer/OurCMSBundle/Controller/NewsController.php at line 127    
at NewsController ->editAction ('2') 
```

使用的模式是 Symfony Validator 组件的一部分，位于`vendor/symfony/src/Symfony/Component/Validator/Mapping/Loader/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd`. 它在使用[w3.org 验证器检查时进行验证](http://validator.w3.org)。这是架构：

```
<?xml version="1.0" ?>

<xsd:schema xmlns="http://symfony.com/schema/dic/constraint-mapping"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://symfony.com/schema/dic/constraint-mapping"
    elementFormDefault="qualified">

  <xsd:annotation>
    <xsd:documentation><![CDATA[
      Symfony Validator Constraint Mapping Schema, version 1.0
      Authors: Bernhard Schussek

      A constraint mapping connects classes, properties and getters with
      validation constraints.
    ]]></xsd:documentation>
  </xsd:annotation>

  <xsd:element name="constraint-mapping" type="constraint-mapping" />

  <xsd:complexType name="constraint-mapping">
    <xsd:annotation>
      <xsd:documentation><![CDATA[
        The root element of the constraint mapping definition.
      ]]></xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="namespace" type="namespace" minOccurs="0" maxOccurs="unbounded" />
      <xsd:element name="class" type="class" maxOccurs="unbounded" />
    </xsd:sequence>
  </xsd:complexType>

  <xsd:complexType name="namespace">
    <xsd:annotation>
      <xsd:documentation><![CDATA[
        Contains the abbreviation for a namespace.
      ]]></xsd:documentation>
    </xsd:annotation>
    <xsd:simpleContent>
      <xsd:extension base="xsd:string">
        <xsd:attribute name="prefix" type="xsd:string" use="required" />
      </xsd:extension>
    </xsd:simpleContent>
  </xsd:complexType>

  <xsd:complexType name="class">
    <xsd:annotation>
      <xsd:documentation><![CDATA[
        Contains constraints for a single class.

        Nested elements may be class constraints, property and/or getter
        definitions.
      ]]></xsd:documentation>
    </xsd:annotation>
    <xsd:choice minOccurs="0" maxOccurs="unbounded">
      <xsd:element name="group-sequence" type="group-sequence" minOccurs="0" maxOccurs="1" />
      <xsd:element name="constraint" type="constraint" minOccurs="0" maxOccurs="unbounded" />
      <xsd:element name="property" type="property" minOccurs="0" maxOccurs="unbounded" />
      <xsd:element name="getter" type="getter" minOccurs="0" maxOccurs="unbounded" />
    </xsd:choice>
    <xsd:attribute name="name" type="xsd:string" use="required" />
  </xsd:complexType>

  <xsd:complexType name="group-sequence">
    <xsd:annotation>
      <xsd:documentation><![CDATA[
        Contains the group sequence of a class. Each group should be written
        into a "value" tag.
      ]]></xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="value" type="value" minOccurs="1" maxOccurs="unbounded" />
    </xsd:sequence>
  </xsd:complexType>

  <xsd:complexType name="property">
    <xsd:annotation>
      <xsd:documentation><![CDATA[
        Contains constraints for a single property. The name of the property
        should be given in the "name" option.
      ]]></xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="constraint" type="constraint" maxOccurs="unbounded" />
    </xsd:sequence>
    <xsd:attribute name="name" type="xsd:string" use="required" />
  </xsd:complexType>

  <xsd:complexType name="getter">
    <xsd:annotation>
      <xsd:documentation><![CDATA[
        Contains constraints for a getter method. The name of the corresponding
        property should be given in the "property" option.
      ]]></xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="constraint" type="constraint" maxOccurs="unbounded" />
    </xsd:sequence>
    <xsd:attribute name="property" type="xsd:string" use="required" />
  </xsd:complexType>

  <xsd:complexType name="constraint" mixed="true">
    <xsd:annotation>
      <xsd:documentation><![CDATA[
        Contains a constraint definition. The name of the constraint should be
        given in the "name" option.

        May contain a single value, multiple "constraint" elements,
        multiple "value" elements or multiple "option" elements.
      ]]></xsd:documentation>
    </xsd:annotation>
    <xsd:choice minOccurs="0">
      <xsd:element name="constraint" type="constraint" minOccurs="1" maxOccurs="unbounded" />
      <xsd:element name="option" type="option" minOccurs="1" maxOccurs="unbounded" />
      <xsd:element name="value" type="value" minOccurs="1" maxOccurs="unbounded" />
    </xsd:choice>
    <xsd:attribute name="name" type="xsd:string" use="required" />
  </xsd:complexType>

  <xsd:complexType name="option" mixed="true">
    <xsd:annotation>
      <xsd:documentation><![CDATA[
        Contains a constraint option definition. The name of the option
        should be given in the "name" option.

        May contain a single value, multiple "value" elements or multiple
        "constraint" elements.
      ]]></xsd:documentation>
    </xsd:annotation>
    <xsd:choice minOccurs="0">
      <xsd:element name="constraint" type="constraint" minOccurs="1" maxOccurs="unbounded" />
      <xsd:element name="value" type="value" minOccurs="1" maxOccurs="unbounded" />
    </xsd:choice>
    <xsd:attribute name="name" type="xsd:string" use="required" />
  </xsd:complexType>

  <xsd:complexType name="value" mixed="true">
    <xsd:annotation>
      <xsd:documentation><![CDATA[
        A value of an element.

        May contain a single value, multiple "value" elements or multiple
        "constraint" elements.
      ]]></xsd:documentation>
    </xsd:annotation>
    <xsd:choice minOccurs="0">
      <xsd:element name="constraint" type="constraint" minOccurs="1" maxOccurs="unbounded" />
      <xsd:element name="value" type="value" minOccurs="1" maxOccurs="unbounded" />
    </xsd:choice>
    <xsd:attribute name="key" type="xsd:string" use="optional" />
  </xsd:complexType>
</xsd:schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:39:44.013

最后证明这是由于我们的 RHEL5 上的**libxml2版本错误造成的。**

我们注意到我们的服务提供商在升级软件包时重新启动了系统。libxml2 软件包已升级到在使用其中包含某些内容的 XML 模式进行验证时`libxml2-2.6.26-2.1.21.el5_9.2`存在[严重问题的版本。](https://bugzilla.redhat.com/show_bug.cgi?id=877348)这些问题导致一些 XML 验证失败，即使它们是有效的。

该问题已在 build 中修复`libxml2-2.6.26-2.1.22.el5`。升级到此版本后，表单再次开始工作。

# android - 屏幕锁定时的状态栏android

> ID：15383352
> 
> 赞同：0
> 
> 时间：2013-03-13T10:58:08.033
> 
> 标签：android, screen, statusbar, locked

当屏幕被锁定时，我正在使用应用程序上下文开始活动。但是状态栏不可用，不会被下拉。有什么方法可以在屏幕锁定时使状态栏和通知可用？(ICS-安卓)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:28:17.033

不，这是做不到的。这是 android 的一个安全功能，如果在用户锁定设备时通知栏可能被拉下，那么它会给用户带来安全问题，因为个人信息可能在通知栏中，例如未接来电、短信和电子邮件等.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-03T07:41:15.603

好吧.. GravityBox 有一个选项允许这样做。

但是我很想知道你必须在 SystemUI/res 文件夹中修改什么文件才能使它在没有 Gravitybox 的情况下工作......

# java - 使用 Jersey 在浏览器上显示 JSON

> ID：15383357
> 
> 赞同：1
> 
> 时间：2013-03-13T10:58:27.523
> 
> 标签：java, json, browser, jersey

我正在使用 Jersey 来实现 REST 服务。我想在浏览器上显示 JSON，但我得到的是 XML。

```
@Path("/todos")
public class TodosResource {

// Allows to insert contextual objects into the class, 
// e.g. ServletContext, Request, Response, UriInfo
@Context
UriInfo uriInfo;
@Context
Request request;

// Return the list of todos to the user in the browser
@GET
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
  public List<Todo> getTodosBrowser() {
  List<Todo> todos = new ArrayList<Todo>();
  todos.addAll(TodoDao.instance.getModel().values());
  return todos; 
} 
```

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:06:25.853

好吧，您的代码声明它生成 XML 和 JSON。根据您的浏览器设置，它可能会请求 XML 而不是 JSON。

首先，检查您的代码是否真的可以生成 JSON。`MediaType.APPLICATION_XML`从您的 @Produces 注释中删除并再次测试。

如果可行，您将需要告诉您的浏览器请求 JSON。添加`Accept: application/json`到您的请求标头。

如何完成取决于您的客户端应用程序。在 JavaScript 中，这是通过添加类似的东西来完成的

```
httpRequest.setRequestHeader('Accept', 'application/json'); 
```

取决于您使用的框架。您也可以`curl`在命令行上进行测试

```
curl -H "Accept: application/json" http://yourhost/context/todos 
```

如果您在浏览器中键入 URL，它很可能会发送以下接受标头

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
```

因为浏览器想要向用户显示一些东西（样式化的 html）。这就是 MediaType.APPLICATION_XML 优先于您的 MediaType.APPLICATION_JSON 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T14:40:23.260

1) 安装浏览器扩展，例如 Postman (Chrome) 或 Poster (FireFox) 2) 在此扩展中添加标头 Accept:application/json

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:12:42.620

添加`jersey-json.jar`

将 POJOMappingFeature 作为 initparam 添加到 web.xml 中，然后它会自动将 java 列表转换为 json 格式。

```
<init-param>
    <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
    <param-value>true</param-value>
</init-param> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-12T07:22:08.300

正如我所看到的，您的方法是用 GET 映射的。所以你必须改变@Produces({ MediaType.APPLICATION_JSON })。这将仅以 JSON 形式生成数据，并且要在浏览器中查看这些数据，您可以为 Chrome 浏览器插入 Advance Rest API（应用程序）支持。那肯定会奏效。一切顺利

```
 @GET
 @Produces({MediaType.APPLICATION_JSON})
 public List<Todo> getTodosBrowser() {
   List<Todo> todos = new ArrayList<Todo>();
   todos.addAll(TodoDao.instance.getModel().values());
   return todos; 
 }

 Web.xml-
 <?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee"             xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee       http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
   <display-name>homepage_todaysdeal_products</display-name>
      <welcome-file-list>
        <welcome-file>default.jsp</welcome-file>
       </welcome-file-list>
     <servlet>
       <servlet-name>RESTService</servlet-name>
       <servlet-  class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
     <init-param>
       <param-name>com.sun.jersey.config.property.packages</param-name>
       <param-value>"Mention Your Package Name here for GET/POST"</param-value>
     </init-param>
     <init-param>
       <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
       <param-value>true</param-value>
     </init-param>
     <load-on-startup>1</load-on-startup>
     </servlet>
     <servlet-mapping>
     <servlet-name>RESTService</servlet-name>
     <url-pattern>/rest/*</url-pattern>
     </servlet-mapping>
   </web-app> 
```

# function - Extjs - 隐藏字段内容的文本标签值更改

> ID：15383362
> 
> 赞同：1
> 
> 时间：2013-03-13T10:58:38.017
> 
> 标签：function, extjs, hidden, xtype

我正在尝试根据另一个字段（隐藏）上的值更改表单内显示字段的值。

隐藏字段从中检索它的值，显示字段`mapping`也将从映射中检索内容，但是根据隐藏值从两个不同的值（mapping1，mapping2）中检索内容。这就是我想要做的：

```
mapping: ['myHidden''mapping1','mapping2'],
form: [{
    fieldLabel: 'myHidden',
    xtype: 'hidden',
    name: 'myHidden',
    listeners: {
          'change': function(){
                   if(this.getValue=='X'){
                         this.up('form').findfield('myText').setName('mapping1');
                   }
                   else{
                         this.up('form').findfield('myText').setName('mapping2');
                    }
                }
            }
    },{
        fieldLabel: 'myText', 
        xtype: 'displayfield'
    }] 
```

因为我不明白标签给出了到“myText”的映射`name`，但是因为我不想改变它的值我应该怎么做？

我只想根据我从服务器通过“myHidden”字段获得的值更改表单加载时“myText”的映射。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:26:48.503

`name`您正在为文本字段 ( )的关键配置定义一个函数。你为什么要做这样的事？
好吧回到我的答案..

你希望你的文本字段值在什么时候改变？隐藏字段何时获得值？此代码将为您工作：

```
{
  xtype: 'hidden',
  id: 'myHidden',//Do you really want an id?
  name: 'myHidden',
  listeners: {
    change: function(){
        //this piece of code changes the textfield to the same value as the hidden field when the hidden field value changes.
        this.up('form').findfield('myTextField').setValue(this.getValue());
    }
  }
},{
  fieldLabel: 'myText', 
  xtype: 'displayfield',        
  name: 'myTextField'
} 
```

* * *

解决这个问题 IMO 的最佳方法是创建一个包含隐藏字段和字段的容器。这样，隐藏字段值将由表单发布，而不是来自其他字段的值。你会得到这样的东西：

```
Ext.define('LookupField', {
    extend: 'Ext.container.Container',
    alias: 'widget.lookupfield',

    constructor: function (config) {
        var me = this;
        var hiddenFieldName = me.name;
        var triggerFieldName = "Display" + me.name;

        me.hiddenField = Ext.create('Ext.form.field.Hidden', {
            name: hiddenFieldName,
            hidden: true
        });

        me.triggerField = Ext.create('Ext.form.field.Trigger', {
            name: triggerFieldName,
            triggerCls: 'x-form-search-trigger',
            editable: false,
            submitValue: false,
            enableKeyEvents: true,
            onTriggerClick: function () {
            }//eo onTriggerClick
        });
        //Add config to the triggerfield
        Ext.applyIf(me.triggerField, config);
        //Add the hiddenfield and triggerfield to the container
        me.items = [me.hiddenField, me.triggerField];
        me.callParent(arguments);
    }//eo initComponent
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:32:38.323

我已经能够让第一个示例按我的意愿工作。我不知道这是否是最好的解决方案，但我会将它放在这里，以便您在遇到相同问题时可以使用它。

基本上我已经将值映射到隐藏字段，然后根据值更改显示字段的内容`myHidden`

```
mapping: ['myHidden''mapping1','mapping2'],
form: [{
    fieldLabel: 'mapping1',
    xtype: 'hidden',
    id: 'mapping1',
},{
    fieldLabel: 'mapping2',
    xtype: 'hidden',
    id: 'mapping2',
},{
    fieldLabel: 'myHidden',
    xtype: 'hidden',
    name: 'myHidden',
    listeners: {
          'change': function(){
                   if(this.getValue=='X'){
                         Ext.getCmp('myText').setValue(Ext.getCmp('mapping1').getValue());
                   }
                   else{
                         Ext.getCmp('myText').setValue(Ext.getCmp('mapping2').getValue());
                    }
                }
            }
    },{
        fieldLabel: 'myText', 
        xtype: 'displayfield',
        id: 'myText'
    }] 
```

# python - django 基于类的视图在 POST 时返回空字符串

> ID：15383367
> 
> 赞同：0
> 
> 时间：2013-03-13T10:58:58.070
> 
> 标签：python, django, post, django-views, django-class-based-views

演示：

```
from django.views.generic.base import View
from django.views.decorators.csrf import csrf_exempt
from django.utils.decorators import method_decorator

class TestView(View):
    @method_decorator(csrf_exempt)
    def dispatch(self, request, *args, **kwargs):
        return HttpResponse('haha') 
```

urls.py 是

```
url(r'^test/', TestView.as_view()), 
```

所以当 GET 你可以看到`haha`，但是当你做 POST 你得到一个空白页......

我在这里想念什么？

编辑：澄清我在做什么。我正在编写一个 JSON 流 CURD 视图，我需要以各种方式解析 JSON。其中之一是当 ppl POST 具有特定模式的数据时，视图将分派到视图内的另一个方法并返回一些东西。但事实证明什么都没有返回。因此，我向您介绍了最小的 PoC。请帮助我我的代码出了什么问题。蒂亚！

顺便说一句[可能的相关问题](https://stackoverflow.com/q/8216980/41948)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:44:42.653

你需要实现它的`post`方法。请参阅[基于类的视图](https://docs.djangoproject.com/en/dev/ref/class-based-views/base/#view)。

```
from django.http import HttpResponse
from django.views.generic import View

class TestView(View):

    @method_decorator(csrf_exempt)
    def dispatch(self, *args, **kwargs):
        # do something
        return super(TestView, self).dispatch(*args, **kwargs)

    def post(self, request, *args, **kwargs):
       # do somthing

    def get(self, request, *args, **kwargs):
       return HttpResponse('Hello, World!') 
```

查看更多`dispatch` [文档](https://docs.djangoproject.com/en/dev/ref/class-based-views/base/#django.views.generic.base.View.dispatch)。

> 默认实现将检查 HTTP 方法并尝试委托给与 HTTP 方法匹配的方法；GET 将委托给 get()，POST 委托给 post()，依此类推。

所以以前你在扰乱上述逻辑，调用`super`将允许`dispatch`委托发布方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T01:45:36.710

我知道这并不能真正回答您的问题，但它可能会提供一种解决方法。我在 JSON 应用程序中使用的是当我想要两者的结果相同时向 get 方法发送一个帖子。就像是：

```
def get(self, request, *args, **kwargs):
    return HttpResponse('Ha!')

def post(self. request, *args, **kwargs):
    return self.get(request, *args, **kwargs) 
```

调度独自一人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:21:00.373

使用基于类的视图时最好的方法是不要从头开始编写自己的方法处理程序；相反，使用一个通用类作为基础，然后只修改处理您需要的方法。例如，如果您有一个需要通过 POST 提交的表单，您应该使用[FormView](https://docs.djangoproject.com/en/1.4/ref/class-based-views/#formview)作为基础，它处理 GET 和 POST 请求的响应。

您不需要自己重写`post()`和/或`get()`方法；而是用于`form_valid()`定义提交表单时发生的情况：

```
class TestView(FormView):
    form_class = MyForm
    success_url = "/your/return/url/"
    def form_valid(self, form):
        # do something
        return redirect(self.get_success_url()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T01:01:56.477

抱歉，这是 uWSGI 和 nginx 中的错误...

[https://stackoverflow.com/a/11115108/41948](https://stackoverflow.com/a/11115108/41948)

我真的很抱歉误导你浪费你的时间。我仍然花了一段时间才弄清楚我的堆栈的哪一部分出了问题。

# android - 如何在不暴露密钥的情况下使用 Android SDK 将文件上传到 Amazon S3

> ID：15383372
> 
> 赞同：1
> 
> 时间：2013-03-13T10:59:12.493
> 
> 标签：android, amazon-web-services, amazon-s3

在本教程中：[http](http://aws.amazon.com/articles/3002109349624271) ://aws.amazon.com/articles/3002109349624271在文件上传期间使用密钥。

我无法使用密钥，因为我的应用用户没有亚马逊帐户，我无法将我的亚马逊密钥分享给我的应用用户。

我想让用户直接将他们的头像上传到 S3，而无需通过自己的具有密钥的代理。

我知道这对于 HTML 5 应用程序来说是可能的，但还没有找到原生 SDK 的文档化方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:28:25.790

您可以部署[令牌自动售货机](http://aws.amazon.com/articles/4611615499399490)来为您的用户生成临时会话密钥。这是一个[匿名 TVM](http://aws.amazon.com/code/8872061742402990)的示例。

或者，您可以使用像[Filepicker.io](https://developers.filepicker.io/docs/android/)这样的框架，它会为您处理身份验证详细信息。

# c++ - QCustomPlot 链接器

> ID：15383374
> 
> 赞同：1
> 
> 时间：2013-03-13T10:59:25.867
> 
> 标签：c++, visual-studio-2010, qt, opencv, qcustomplot

我想使用 QCustomPlot 的功能从我的 openCV 项目中得出一些结果。

我没有找到将 QCustomPlot 包含到我的 Microsoft Visual Studio 2010 中的方法。我已将 cpp 和 h 文件包含或处理到我的项目中。但是，我认为我仍然缺少关于它的链接器和附加依赖项（.lib 文件）

```
1>moc_ex4.obj : error LNK2019: unresolved external symbol "public: void __thiscall ex4::plot_graphs(void)" (?plot_graphs@ex4@@QAEXXZ) referenced in function "private: static void __cdecl ex4::qt_static_metacall(class QObject *,enum QMetaObject::Call,int,void * *)" (?qt_static_metacall@ex4@@CAXPAVQObject@@W4Call@QMetaObject@@HPAPAX@Z)
1>C:\Users\310114602\Documents\Visual Studio 2010\Projects\ex4_120313\Win32\Debug\\ex4.exe : fatal error LNK1120: 1 unresolved externals 
```

我搜索了它，但没有结果。

我该去哪里下载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:17:59.780

It looks like you either didn't [moc your cpp file](http://qt-project.org/doc/qt-4.8/moc.html) or you simply forgot to compile and link against the moc generated .cpp file.

# javascript - javascript部门给出错误答案？

> ID：15383376
> 
> 赞同：2
> 
> 时间：2013-03-13T10:59:37.147
> 
> 标签：javascript

> 警报（5.30/0.1）；

这给出`52.99999999999999`但应该是`53`. 任何人都可以告诉如何以及为什么？

我想找到一个数字可以被给定的数字整除。请注意，其中一个数字可能是浮点数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T11:06:50.487

出于同样的原因

```
0.1 * 0.2 //0.020000000000000004 
```

一些十进制数不能用 IEEE 754 表示，这是 JavaScript 使用的数学表示。如果您想在问题中对这些数字进行算术运算，最好先将它们相乘，直到它们成为整数，然后再除以它们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T11:07:04.587

将数字缩放为整数。然后对结果取模。

```
alert((5.30*10) % (0.1*10)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:51:46.277

现在您已经阅读了我评论的文章，​​您应该知道问题的根源。您可以通过缩放浮动来部分解决这个问题......

然后只需编写一个函数：

*   如果它是一个浮动
    *   缩放数字
*   返回数字整除性的布尔表示

* * *

```
function isDivisable(n, d) {
    var ndI = 1 + "".indexOf.call(n, "."); //Index of the Number's Dot
    var ddI = 1 + "".indexOf.call(d, "."); // Index of the Divisors Dot
    if (ndI || ddI) { // IF its a float
        var l = Math.max(("" + n).length - ndI, ("" + d).length - ddI); //Longest Decimal Part
        var tmpN = (n * Math.pow(10, l)); //scale the float
        var tmpD = (d * Math.pow(10, l));
        return !~((tmpN % tmpD) - 1); //Substract one of the modulo result, apply a bitwise NOT and cast a boolean.
    }
    return !~((n % d) - 1); // If it isnt a decimal, return the result 
}
console.log(isDivisable(5.30, 0.1));//true 
```

这是一个[JSBin](http://jsbin.com/irufux/2/edit)

然而...

由于整数以 64 位精度存储，因此最大精度约为 (2^53)，当缩放更大的数字时，您很快就会超过最大精度。

因此，如果您想测试浮点数的可分性，那么为 javascript 获取某种 BigInteger 库可能是一个好主意

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T11:03:24.430

要确定一个数字`x`是否可以被一个数字整除，`y`你必须做`x % y`（模）。如果结果为 0，则它是完全可除的，任何其他都不是。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-13T11:04:54.673

您可以通过以下方式获得它： var num = (5.30/0.1); alert(num.toFixed(2));

这会给你 53.00。

# android - 用于登录的 Gmail 集成

> ID：15383378
> 
> 赞同：-2
> 
> 时间：2013-03-13T10:59:42.527
> 
> 标签：android, gmail

如何使用 Gmail 凭据登录 Android 应用程序。谁能给我提供描述整个集成过程的教程链接。任何人都可以分享gmail集成的任何示例代码以登录android App。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:02:13.303

使用[JavaMail](http://www.oracle.com/technetwork/java/javamail/index.html)。这是一个不错的教程[链接](http://www.javaworld.com/jw-10-2001/jw-1026-javamail.html)。你可以找到很多其他的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:04:45.793

您只需将此代码添加到您的 loginActivity：

```
 List<String> googleAccounts = new ArrayList<String>();
    Account[] accounts = AccountManager.get(this).getAccounts();
    for (Account account : accounts) {
      if (account.type.equals("com.google")) {
        googleAccounts.add(account.name);
      }
    } 
```

归功于臭氧的[原始答案](https://stackoverflow.com/a/4553216/1221203)

# sharepoint - 从存储在文档库中的 Excel 中获取数据并使用 powershell 将其显示在列表中

> ID：15383379
> 
> 赞同：3
> 
> 时间：2013-03-13T10:59:44.067
> 
> 标签：sharepoint, powershell

我必须从存储在我的文档库中的 Excel 文档中获取数据并将数据显示在列表中。我的脚本运行良好，但`$workbook`它提示我传递凭据。

这个问题能解决吗？

```
$web = Get-SPWeb -Identity 'http://.....'
$list = $web.Lists['XL List']
$XLSDoc ='http://...'
$SheetName = 'Overall Project Health'
$Excel = New-Object -ComObject 'Excel.Application'
$Workbook = $Excel.workbooks.open($XLSDoc)....
$Sheet = $Workbook.Worksheets.Item($SheetName) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:17:15.020

尝试这个：

```
$Workbook = $Excel.workbooks.open($XLSDoc, $false, $true) 
```

参考：

[http://msdn.microsoft.com/en-us/library/aa195811(office.11​​).aspx](http://msdn.microsoft.com/en-us/library/aa195811%28office.11%29.aspx)

# java - 带有自定义注释和过滤所有测试的junit上的“无可运行方法”

> ID：15383387
> 
> 赞同：2
> 
> 时间：2013-03-13T11:00:20.450
> 
> 标签：java, junit, annotations, test-runner

我正在使用 JUnit 4.11，扩展了 BlockJUnit4ClassRunner 并使用了自定义注释。如果带有特定参数的注释存在，则不会运行测试。

这工作正常，除了在一个类中的所有测试都被过滤掉但自定义测试运行器的情况。

基本上与这篇文章中描述的完全一样：[JUnit4 skip test(s) based on custom java annotations](https://stackoverflow.com/questions/13590557/junit4-skip-tests-according-to-custom-java-annotations)

我尝试了这篇文章中提到的解决方法：[JUnit: how to Avoid "no runnable methods" in test utils classes](https://stackoverflow.com/questions/672466/junit-how-to-avoid-no-runnable-methods-in-test-utils-classes)

如果我引入了一个虚拟测试，那么至少有一个测试会一直运行，一切都很好。如果所有测试都没有运行，因为它们都有注释，我会得到“没有可运行的方法”异常。

我可以接受解决方法，但应该有更好的方法。我感谢任何指示或解释我做错了什么或如何改善这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:13:45.917

`validateInstanceMethods`由于在computeTestMethods() 返回一个空列表后执行验证，您会收到此错误：

```
protected void validateInstanceMethods(List<Throwable> errors) {
        validatePublicVoidNoArgMethods(After.class, false, errors);
        validatePublicVoidNoArgMethods(Before.class, false, errors);
        validateTestMethods(errors);

        if (computeTestMethods().size() == 0)
            errors.add(new Exception("No runnable methods"));
    } 
```

您可以覆盖此方法并删除大小验证或添加您自己的验证，这将考虑带注释的测试方法。
请注意，此方法已经`@Deprecated`并将在未来的版本中删除。

# c# - 安排 Web Api 方法以设定的时间间隔运行

> ID：15383388
> 
> 赞同：13
> 
> 时间：2013-03-13T11:00:21.360
> 
> 标签：c#, asp.net-web-api

在我当前的项目中，需要安排一种方法以设定的时间间隔运行，例如每周一次，目前这是通过创建 HttpClient 并点击所需控制器方法的 Windows 服务完成的。

我想知道这是否可以在 Web Api 项目本身中实现自动化，而不是使用外部服务。到目前为止，我还没有找到任何关于这样做的文档。

很抱歉没有可以使用的代码示例，因为我还没有找到一个可以开始的基础。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-07-29T17:37:37.543

如果您需要安排一个后台任务每周运行，您可以使用[FluentScheduler](https://github.com/jgeurts/FluentScheduler)（[NuGet 链接](https://www.nuget.org/packages/FluentScheduler/)）为您运行它。你可以这样做：

```
public class WeeklyRegistry : Registry
{
    public WeeklyRegistry()
    {            
        Schedule<WeeklyTask>().ToRunEvery(1).Weeks(); // run WeeklyTask on a weekly basis           
    }
}

public class WeeklyTask : IJob
{
    public void Execute()
    {            
        // call the method to run weekly here
    }
} 
```

**更新**[FluentScheduler](https://github.com/jgeurts/FluentScheduler)的新版本稍微改变了 API。该任务现在应该来自 IJob，而不是 ITask。更新了我的示例以反映这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T11:03:51.047

在 Web Api 中并没有真正实现您想要的方法。Web API 无论如何都应该是无状态的。

理论上，您可以在 Web 服务器上创建一个长时间运行的任务来定期调用您的 Api（或直接调用该方法），放置此类方法的最佳位置是全局 asax 文件中的 OnStart 方法。但是，当 Web 服务器加载到应用程序域时会运行此方法，并且当 Web 服务器决定卸载您的应用程序时，该任务将被终止。因此，如果您至少一次不调用您的 Web 服务器，您的任务将不会启动。如果您的网络服务器没有定期访问，您的任务将被终止。

拥有外部可靠资源（例如您的服务）仍然是最好和最安全的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T11:03:04.147

这不是您希望 Web API 做的事情，我不认为它会做。关于单一职责的一些事情。

服务方式有什么问题？您可能还想看看 Windows 任务计划程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-17T04:22:55.530

我并不是说这是最好的方法，但它对我有用，而且很容易。

我们的 WebApi 已经到位，我需要一个快速的解决方案来每小时调用一次 API。我使用了 node.js 并编写了几行代码来利用 moment.js 库。有一个计时器/倒计时功能可用。我将它设置为每小时触发一次并调用我们的 API。让它在IIS上工作。这是在我以前的雇主那里，否则我会发布实际代码。

这很容易，而且很有效。希望它可以帮助某人。 **node.js + moment.js**库。

# php - textarea 不能有默认值

> ID：15383397
> 
> 赞同：2
> 
> 时间：2013-03-13T11:00:45.723
> 
> 标签：php, html, textarea

请检查这些行

```
<textarea class="wideInput" cols="30" rows="10" value="<?php echo $row['foodDescription']; ?>" ></textarea>
            <input value="<?php echo $row['foodDescription']; ?>" /> 
```

输入类型有默认值，但是textarea没有，请问为什么，解决办法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T11:04:01.460

没有`value`属性

```
<textarea class="wideInput" cols="30" rows="10" ><?php echo $row['foodDescription']; ?></textarea> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:04:02.977

您可以在`<textarea>`开始和结束标签之间添加值。

```
<textarea class="wideInput" cols="30" rows="10"><?php echo $row['foodDescription']; ?></textarea> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T11:04:19.470

```
<textarea class="wideInput" cols="30" rows="10" value="<?php echo $row['foodDescription']; ?>" ></textarea> 
```

应改为：

```
<textarea class="wideInput" cols="30" rows="10"><?php echo $row['foodDescription']; ?></textarea> 
```

因为 textarea 没有 value 属性

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T11:04:36.090

只需将值放在 textarea 标签之间：

```
<textarea class="wideInput" cols="30" rows="10">
    <?php echo $row['foodDescription']; ?>
</textarea> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-13T11:04:44.600

textarea 不像输入，它不能自关闭（`<textarea/>`），它是自关闭标签，可以具有默认显示的值。`<textarea></textarea>`只需更改您的代码以在标签内回显 foodDescription

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-13T11:05:34.630

您必须在标签之间放置默认值，以便：

```
<textarea class="wideInput" cols="30" rows="10"><?php echo $row['foodDescription']; ?></textarea> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T11:09:29.397

它必须在标签之间。

```
<textarea class="wideInput" cols="30" rows="10"><?php echo $row['foodDescription']; ?></textarea> 
```

大声笑向合唱团讲道

# c# - 在不同的线程中渲染控件

> ID：15383404
> 
> 赞同：2
> 
> 时间：2013-03-13T11:00:56.757
> 
> 标签：c#, wpf, multithreading, visifire

我的应用程序 (migradoc) 中有一个 PDF 导出。为了避免冻结 GUI，我想将此导出作为单独的线程运行。PDF 还嵌入了图表。为了使这些图表看起来像我在应用程序中使用的图表，我在代码中创建和呈现它们。(visifire) 我的线程已经是 STA，但是在运行 WPF 渲染命令时出现异常：

> 调用线程无法访问此对象，因为不同的线程拥有它

我的代码：

```
 chart.Measure(new Size(311, 180));
            chart.Arrange(new Rect(0, 0, 311, 180));
            chart.UpdateLayout();
            ExportToPng(new Uri("C:\\" + i + "c.png"), chart);

  public void ExportToPng(Uri path, Chart surface)

    {
        if (path == null) return;

        // Save current canvas transform

        Transform transform = surface.LayoutTransform;

        // reset current transform (in case it is scaled or rotated)

        surface.LayoutTransform = null;

        // Create a render bitmap and push the surface to it

        var renderBitmap =
            new RenderTargetBitmap(
                (int) surface.Width,
                (int) surface.Height,
                96d,
                96d,
                PixelFormats.Pbgra32);

        renderBitmap.Render(surface);

        // Create a file stream for saving image

        using (var outStream = new FileStream(path.LocalPath, FileMode.Create))

        {
            // Use png encoder for our data

            var encoder = new PngBitmapEncoder();

            // push the rendered bitmap to it

            encoder.Frames.Add(BitmapFrame.Create(renderBitmap));

            // save the data to the stream

            encoder.Save(outStream);
        }

        // Restore previously saved layout

        surface.LayoutTransform = transform;
    } 
```

我已经尝试发送此命令，但我仍然不断收到相同的错误。

```
 DispatcherHelper.UIDispatcher.BeginInvoke((Action)(() =>
        {
                        chart.Measure(new Size(311, 180));
                        chart.Arrange(new Rect(0, 0, 311, 180));
                        chart.UpdateLayout();
                        ExportToPng(new Uri("C:\\" + i + "c.png"), chart);
                    })); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:08:16.027

您需要传递作为 GUI 线程一部分的任何对象的副本，因为 GUI 线程拥有它们，这就是为什么它们不能在其他线程中访问的原因。就像您的图表对象一样，您需要创建图表对象的副本，然后将其传递给线程，因此对象的所有者就是您的新线程。

如果您需要在同一个 GUI 线程上呈现这些，那么唯一的机会就是在同一个线程上呈现这些并等待操作完成。

# ruby-on-rails-3 - 随时调用 rake

> ID：15383410
> 
> 赞同：0
> 
> 时间：2013-03-13T11:01:19.277
> 
> 标签：ruby-on-rails-3, cron, rake-task, whenever

我刚开始使用 Rails When 插件。我有 rake 文件 cron。有任务：

```
task :cron => :environment do
   puts "Task invoked!"
end 
```

在 schedule.rb 我有这个：

```
every 2.minutes do 
   rake "cron", enviroment => "development"
end 
```

一旦我启动我的应用程序并通过指定的时间间隔，什么都没有发生？我对 Ruby 和 Rails 很陌生，所以我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:52:46.567

您需要将计划写入您的 crontab。在您的应用程序中运行此命令：

```
bundle exec whenever --update-crontab myapp 
```

当您运行此命令时，`whenever`将采用 Ruby 语法，将其转换为 cron 语法并将其添加到您的 crontab 中。

# javascript - 从 innerhtml 字符串值创建 javascript 时间戳

> ID：15383412
> 
> 赞同：0
> 
> 时间：2013-03-13T11:01:23.550
> 
> 标签：javascript

我想创建一个基于 rails date_select 和 time_select 属性的 javascript 时间戳。我将一个 onChange 函数附加到选择助手并获取 innerhtml 以将值读入一个可以正常工作的 div。现在我想使用 select 属性中的这些字符串并在 js 中创建一个时间戳（使用它进行验证）。

我首先通过从 innerhtml 值制作整数来尝试这个：

```
function insertText10()
{
    var start_day = document.new_link['link[start_at(3i)]'];
    var start_month = document.new_link['link[start_at(2i)]'];
    var start_year = document.new_link['link[start_at(1i)]'];
    var start_hour = document.new_link['link[start_at(4i)]'];   
    var start_minute = document.new_link['link[start_at(5i)]'];

    var selOption1 = start_day[start_day.selectedIndex];
    var selOption2 = start_month[start_month.selectedIndex];
    var selOption3 = start_year[start_year.selectedIndex];
    var selOption4 = start_hour[start_hour.selectedIndex];
    var selOption5 = start_minute[start_minute.selectedIndex];

    start_date = new Date(parseInt(selOption3.innerHTML),parseInt(selOption2.innerHTML),parseInt(selOption1.innerHTML),parseInt(selOption4.innerHTML),parseInt(selOption5.innerHTML),0,0); 
```

然后通过使用字符串：

```
start_date = new Date(selOption3.innerHTML+selOption2.innerHTML+selOption1.innerHTML+selOption4.innerHTML+selOption5.innerHTML); 
```

但两者都不起作用。我究竟做错了什么？

-- PS：我查看了 w3s 文档[http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)以找到上述解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:10:18.767

解决了：

```
start_date = new Date(parseInt(selOption3.value),parseInt(selOption2.value),parseInt(selOption1.value),parseInt(selOption4.value),parseInt(selOption5.value),0,0); 
```

# php - Restler API Explorer 发布 JSON 数据

> ID：15383417
> 
> 赞同：2
> 
> 时间：2013-03-13T11:01:48.360
> 
> 标签：php, restler

我在使用 Restler API Explorer 将 JSON 数据发布到我的 Restler Web 服务时遇到问题。

这是一个例子

```
/**
 * Inserts a product
 * 
 * @param string    $product_id {@from body} The SKU for the product
 * @return a product object which contains the product
 */
function post($product_id=NULL, $request_data=NULL){

error_log(var_export($request_data,1));
} 
```

当我通过资源管理器发布以下 JSON 字符串时

{“product_id”：“MOO”}

我在日志中输出以下内容

```
array ('{____"product_id":_"MOO"}' => '','index_url' => 'index',) 
```

而如果我使用 CURL，例如

```
curl -X POST http://xxx.xxx.xxx/products.json -H "Content-Type: application/json" -d '{"product_id": "MOO"}' 
```

我明白了

```
array ('product_id' => 'MOO','index_url' => 'index',) 
```

这是我所期望的。

可以发现什么问题吗？

干杯抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:35:22.683

这是由于一个月前修复的 API Explorer 中的错误

[从https://github.com/Luracast/Restler-API-Explorer](https://github.com/Luracast/Restler-API-Explorer)将您的资源管理器更新到最新版本

删除缓存并看到问题消失

# jsf - 几个支持 a4j 的选择菜单，只有最后一个有效

> ID：15383418
> 
> 赞同：0
> 
> 时间：2013-03-13T11:01:51.217
> 
> 标签：jsf, richfaces, ajax4jsf

我在同一页面上有几个这样的表格：

```
<h:form>
    <h:selectOneMenu value="#{collectionBean.selectedCollection}">
        <f:selectItems value="#{collectionBean.collectionItems}" />
        <a4j:support event="onchange" />
    </h:selectOneMenu>
    <a4j:commandButton value="Add" action="#{collectionBean.addToCollection(_resource)}" >
    </a4j:commandButton>
</h:form> 
```

这是我的豆：

```
@Name("collectionBean")
@Scope(ScopeType.SESSION)
public class CollectionBean {
    private String selectedCollection;

    public String getSelectedCollection() {
        return selectedCollection;
    }

    public void setSelectedCollection(String collectionName) {
        selectedCollection = collectionName;
    }

    public List<SelectItem> getCollectionItems() {
        ...
    }

    public void addToCollection(Resource res) {
        ...
    }
} 
```

表单与资源相关联`_resource`，其目标是让用户将资源添加到他选择的集合中。

问题是只有页面上的最后一个表单有效：当更改其他表单中的选择时，该`setSelectedCollection`方法永远不会被调用。

你知道什么可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:01:12.453

正如[这里](https://stackoverflow.com/questions/10972284/hselectonemenu-in-loop/10973440#10973440)和评论中所说，将多个组件绑定到同一个 bean 属性是没有意义的。所以我在支持 bean 中使用了一个 Map，以资源 id 作为键。

```
<h:selectOneMenu value="#{collectionBean.selections[_resource.id]}">
    <f:selectItems value="#{collectionBean.collectionItems}" />
    <a4j:support event="onchange" />
</h:selectOneMenu> 
```

尽管如此，它并没有解决主要问题：只有页面上的最后一个表单有效。对于所有其他形式，该方法`getSelections`从未被调用。

然后，我没有使用多个表单（每个选择菜单一个表单），而是使用了一个完整的表单。我不知道为什么，但它的工作...

# android - 将服务绑定到广播接收器

> ID：15383421
> 
> 赞同：9
> 
> 时间：2013-03-13T11:01:58.100
> 
> 标签：android, broadcastreceiver, android-service, android-alarms

我有一些**服务**类，它注册了多个警报。

在我的**BroadcastReceiver**类中，我希望**onReceive** () 方法调用**Service**类的某些方法。

但是，我不知道如何将它们绑定在一起。我试图让**BroadcastReceiver**成为一个内部类，但后来我遇到了更多错误，根本无法发出警报。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-20T00:44:53.027

查看[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)生命周期。BroadcastReceiver 仅用于处理消息。这意味着它的寿命很短，它也是无国籍的。所以你不能绑定任何东西。

无论如何，您可以尝试启动 BroadcastReceiver 的*服务*表单`onReceive(Context context, Intent intent)`方法，如下所示：

```
 public void onReceive(Context context, Intent intent) {
        Intent intent2 = new Intent(context, GCMService.class);
        intent2.putExtras(intent);
        context.startService(intent2);
} 
```

然后 a=服务应该处理广播消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-29T13:48:58.340

来自[http://developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)

> 注意：只有活动、服务和内容提供者可以绑定到服务 - 您**不能**从广播接收器绑定到服务。

# javascript - 保持默认光照的地形着色器

> ID：15383422
> 
> 赞同：1
> 
> 时间：2013-03-13T11:02:00.173
> 
> 标签：javascript, three.js, webgl, shader

所以对于我的地形，我有一个着色器来将多个纹理混合在一起（比如草、沙子、岩石）。这一切都很好，但唯一的问题是着色器与 Three.js 照明引擎不兼容，所有顶点都被点亮。我可以手动计算一些光照，比如太阳/月亮，但如果我可以将 Three.js 光照引擎与我的着色器一起使用，那就太好了。有没有办法将例如 Lambert 材质着色器（使用 Three.js 照明）与我的自定义着色器结合起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:45:54.187

您可以做的是将`ShaderMaterial.lights`属性设置为`true`. 您仍然需要自己处理照明计算，但您可以通过制服访问您创建的灯光。

例如，参见[http://mrdoob.github.com/three.js/examples/webgl_materials_normalmap.html](http://mrdoob.github.com/three.js/examples/webgl_materials_normalmap.html)

示例来源：[https ://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLShaders.js](https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLShaders.js)

三.js r.56

# phpexcel - PHPExcel 上的引号变成“

> ID：15383430
> 
> 赞同：1
> 
> 时间：2013-03-13T11:02:23.480
> 
> 标签：phpexcel, utf8-decode

我正在使用 PHPExcel 将数据导出到 Excel 报告中。但以下字符正在更改。

```
" become &quot;

& become &amp; 
```

例子：

> “公司” --> 成为`&quot;`公司`&quot;`
> 
> 我和我的公司 --> 成为我`&amp;`我的公司

任何人都可以帮助我如何解决它。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:47:34.807

仔细检查您传递给 PHPExcel 的字符串，以确保它们中没有 HTML 元素。请注意，如果您通过将输出转储到浏览器进行调试，那么 PHP 代码中的字符串实际上可能已经是

`This &amp; That`

但浏览器会将其显示为

`This & That`.

# javascript - 在 JavaScript 中使用多个分号有什么影响吗？

> ID：15383433
> 
> 赞同：3
> 
> 时间：2013-03-13T11:02:26.363
> 
> 标签：javascript, performance, syntax

例如，是：

```
alert('something'); 
```

与以下相同：

```
alert('something');; 
```

或者额外的分号是否会在 JavaScript 引擎中导致某种“无操作循环”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:04:12.280

第二个分号将被解释为[*空语句* ^([spec])](http://es5.github.com/#x12.3)。它没有任何效果。

我相信引擎会忽略它，但这实际上取决于引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:06:51.563

NO.即使你不给，也没关系。javascript隐式插入逗号（，）。

# ruby - 在我的 rails 3 应用程序中使用 pony gem 和 ckeditor 发送批量邮件

> ID：15383437
> 
> 赞同：-1
> 
> 时间：2013-03-13T11:02:38.323
> 
> 标签：ruby, ruby-on-rails-3, rubygems, ckeditor, pony

我正在使用 ckeditor 我正在发送使用小马宝石邮件进行批量邮寄的申请，但我有几个问题：

1.  一些标签也通过邮件交付。
2.  如果我将效果应用到邮件中可见的粗体、斜体、下划线等文本
3.  图像不可见，而不是 {"body"=>" 可见。

以下是代码...

1.  我的小马邮件功能...

> ```
> params[:l].each do |single_email|
>         p single_email
>         Pony.mail(:to => single_email, :from => 'example@example.co.in', :subject => @bmail.subject, 
>       :headers => { "Content-Type" => "text/html"}, :body => @bmail.body, :via => :smtp, :via_options => { 
>       :address => "smtp.gmail.com", 
>       :port => 587, 
>       :domain => 'example.co.in', 
>       :user_name => 'example@example.co.in', 
>       :password => 'paswd', 
>       :authentication => 'plain', 
>       :enable_starttls_auto => true 
> })    end 
> ```

1.  调用ckeditor

> ```
> %br = cktext_area :body, :body, :ckeditor => {:uiColor => "#AADC6E", :toolbar => "mini"} 
> %br 
> ```

请帮助我发送带有图像和内容的完美邮件，请尽快帮助我。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T15:55:11.053

试试 :html_body => @bmail.body

[http://rubydoc.info/gems/pony/1.4.1/frames](http://rubydoc.info/gems/pony/1.4.1/frames)

# php - PHP - 使用 DomDocument 获取标签的位置

> ID：15383438
> 
> 赞同：1
> 
> 时间：2013-03-13T11:02:38.660
> 
> 标签：php, domdocument

```
<a>
    <b id="bye">
        <name>john</name>
    </b>
    <b id="goodbye">
        <name>emma</name>
    </b>
</a> 
```

使用该 XML 文件，我想打印如下内容：

```
b with id:bye has position 0
b with id:goodbye has position 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:11:01.720

您可以使用 Dom 的 XPath 来获取您需要的内容（更新以输出与原始帖子更好的匹配）。

```
<?php

$xml = '<a>
    <b id="bye">
        <name>john</name>
    </b>
    <b id="goodbye">
    <name>emma</name>
    </b>
</a>';

$dom = new DOMDocument();
$dom->loadXML($xml);

foreach ( $dom->getElementsByTagName("b") as $domNode ) {
    print "b with id:{$domNode->attributes->getNamedItem("id")->nodeValue} has position {$domNode->getNodePath()}\n";
} 
```

应该为您提供：

```
b with id:bye has position /a/b[1]
b with id:goodbye has position /a/b[2] 
```

# css - 在引导工具提示上设置箭头样式

> ID：15383440
> 
> 赞同：44
> 
> 时间：2013-03-13T11:02:40.420
> 
> 标签：css, twitter-bootstrap, tooltip

我正在尝试使用

```
.tooltip-inner{} 
```

但是我遇到了麻烦，因为我找不到如何设置工具提示小箭头的样式。

如屏幕截图所示，工具提示的箭头是黑色的，我想在上面添加新颜色：

![在此处输入图像描述](../Images/33f2820fb968417a4bae5d8271a457b7.png) 有什么建议吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-13T11:11:51.387

您可以使用它来更改工具提示箭头颜色

```
.tooltip.bottom .tooltip-arrow {
  top: 0;
  left: 50%;
  margin-left: -5px;
  border-bottom-color: #000000; /* black */
  border-width: 0 5px 5px;
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-05-30T15:17:23.037

使用此样式表让您开始！

```
.tooltip{
    position:absolute;
    z-index:1020;
    display:block;
    visibility:visible;
    padding:5px;
    font-size:11px;
    opacity:0;
    filter:alpha(opacity=0)
}
.tooltip.in{
    opacity:.8;
    filter:alpha(opacity=80)
}
.tooltip.top{
    margin-top:-2px
}
.tooltip.right{
    margin-left:2px
}
.tooltip.bottom{
    margin-top:2px
}
.tooltip.left{
    margin-left:-2px
}
.tooltip.top .tooltip-arrow{
    bottom:0;
    left:50%;
    margin-left:-5px;
    border-left:5px solid transparent;
    border-right:5px solid transparent;
    border-top:5px solid #000
}
.tooltip.left .tooltip-arrow{
    top:50%;
    right:0;
    margin-top:-5px;
    border-top:5px solid transparent;
    border-bottom:5px solid transparent;
    border-left:5px solid #000
}
.tooltip.bottom .tooltip-arrow{
    top:0;
    left:50%;
    margin-left:-5px;
    border-left:5px solid transparent;
    border-right:5px solid transparent;
    border-bottom:5px solid #000
}
.tooltip.right .tooltip-arrow{
    top:50%;
    left:0;
    margin-top:-5px;
    border-top:5px solid transparent;
    border-bottom:5px solid transparent;
    border-right:5px solid #000
}
.tooltip-inner{
    max-width:200px;
    padding:3px 8px;
    color:#fff;
    text-align:center;
    text-decoration:none;
    background-color:#000;
    -webkit-border-radius:4px;
    -moz-border-radius:4px;
    border-radius:4px
}
.tooltip-arrow{
    position:absolute;
    width:0;
    height:0
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-13T11:16:59.103

我为你创造了小提琴。

看一眼`[**`here`**](http://jsfiddle.net/w6dqz/2/)`

```
<p>
    <a class="tooltip" href="#">Tooltip
        <span>
            <img alt="CSS Tooltip callout"
                 src="http://www.menucool.com/tooltip/src/callout.gif" class="callout">
            <strong>Most Light-weight Tooltip</strong><br>
            This is the easy-to-use Tooltip driven purely by CSS.
        </span>
    </a>
</p> 
```

```
a.tooltip {
    outline: none;
}

a.tooltip strong {
    line-height: 30px;
}

a.tooltip:hover {
    text-decoration: none;
}

a.tooltip span {
    z-index: 10;
    display: none;
    padding: 14px 20px;
    margin-top: -30px;
    margin-left: 28px;
    width: 240px;
    line-height: 16px;
}

a.tooltip:hover span {
    display: inline;
    position: absolute;
    color: #111;
    border: 1px solid #DCA;
    background: #fffAF0;
}

.callout {
    z-index: 20;
    position: absolute;
    top: 30px;
    border: 0;
    left: -12px;
}
/*CSS3 extras*/
a.tooltip span {
    border-radius: 4px;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    -moz-box-shadow: 5px 5px 8px #CCC;
    -webkit-box-shadow: 5px 5px 8px #CCC;
    box-shadow: 5px 5px 8px #CCC;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-07-09T07:34:01.107

对于每个方向箭头（左、右、上和下）的样式，我们必须使用**CSS 属性选择器**选择每个箭头，然后单独设置它们的样式。

**技巧：**顶部箭头必须仅在顶部具有边框颜色，而在其他 3 侧必须透明。其他方向箭头也需要以这种方式设置样式。

[单击此处获取工作 Jsfiddle 链接](https://jsfiddle.net/nvishnu/rc8kncjn/33/)

这是简单的CSS，

```
.tooltip-inner { background-color:#8447cf;}

[data-placement="top"] + .tooltip > .tooltip-arrow { border-top-color: #8447cf;}

[data-placement="right"] + .tooltip > .tooltip-arrow { border-right-color: #8447cf;}

[data-placement="bottom"] + .tooltip > .tooltip-arrow {border-bottom-color: #8447cf;}

[data-placement="left"] + .tooltip > .tooltip-arrow {border-left-color: #8447cf; } 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-01-06T12:04:34.257

您可以随时尝试将此代码放在您的主 css 中，而无需修改最推荐的引导文件，以便在将来更新引导文件时保持一致性。

```
.tooltip-inner {
background-color: #FF0000;
}

.tooltip.right .tooltip-arrow {
border-right: 5px solid #FF0000;

} 
```

请注意，此示例适用于正确的工具提示。tooltip-inner 属性改变工具提示 BG 颜色，另一个改变箭头颜色。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-01-15T23:17:43.023

箭头是边框。
您需要根据工具提示的“数据放置”更改每个箭头的颜色。

```
.tooltip.top .tooltip-arrow {
  border-top-color: @color;
}
.tooltip.top-left .tooltip-arrow {
  border-top-color: @color;
}
.tooltip.top-right .tooltip-arrow {
  border-top-color:@color;
}
.tooltip.right .tooltip-arrow {
  border-right-color: @color;
}
.tooltip.left .tooltip-arrow {
  border-left-color: @color;
}
.tooltip.bottom .tooltip-arrow {
  border-bottom-color: @color;
}
.tooltip.bottom-left .tooltip-arrow {
  border-bottom-color: @color;
}
.tooltip.bottom-right .tooltip-arrow {
  border-bottom-color: @color;
}
.tooltip > .tooltip-inner {
  background-color: @color;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-03-11T22:30:22.740

如果您只想设置工具提示的颜色样式，请执行以下操作：

```
.tooltip-inner { background-color: #000; color: #fff; }
.tooltip.top .tooltip-arrow { border-top-color: #000; }
.tooltip.right .tooltip-arrow { border-right-color: #000; }
.tooltip.bottom .tooltip-arrow { border-bottom-color: #000; }
.tooltip.left .tooltip-arrow { border-left-color: #000; } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-11T19:08:33.497

这个对我有用！

```
.tooltip .tooltip-arrow {
border-top: 5px solid red !important;} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-29T18:37:46.460

如果您四处走动以解决此问题并且上述选项均无效，则您可能会遇到 .tooltip 与 bootstrap 和 jquery 的**名称空间冲突**。

请参阅有关如何修复的答案：[jQueryUI 工具提示正在与 Twitter Bootstrap 竞争](https://stackoverflow.com/questions/13731400/jqueryui-tooltips-are-competing-with-twitter-bootstrap)

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2014-07-10T14:30:35.313

您可以添加“显示：无；” 到 .tooltip-arrow 类

```
.tooltip-arrow {
   display: none;
} 
```

# javascript - top.frames 在 Firefox 中不起作用

> ID：15383442
> 
> 赞同：1
> 
> 时间：2013-03-13T11:02:43.307
> 
> 标签：javascript, firefox

我`iframes`在我的页面中使用了两个父页面有`iframe`发言权`id = grandparent , src = "child.html".`

在 child.html 中我设置了一些变量，`iframe`在 child.html 中也有一个说

```
id = parent, src="grandchild.html" 
```

并从 grandchild.html 我使用 JavaScript 访问 child.html 中的变量

```
var value = top.frames['grandparent'] 
```

它在 chrome 中运行良好，但在 Firefox 中无法运行，这意味着使用 value 变量我无法访问 child.html 的变量

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:57:14.353

Firefox 行为是规范要求的行为。请参阅[http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#dom-window-nameeditem-filter以及在](http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#dom-window-nameditem-filter)[http://www.whatwg](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#the-iframe-element)浏览上下文名称的规则。 [org/specs/web-apps/current-work/multipage/the-if​​rame-element.html#the-if​​rame-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#the-iframe-element)

WebKit 有一个已知错误（参见[https://bugs.webkit.org/show_bug.cgi?id=11388](https://bugs.webkit.org/show_bug.cgi?id=11388)），它将 iframe 的 id 转换为内部窗口的名称。

对于您的情况，您只想`name="grandparent"`在相关的 iframe 上使用。

# ios - Objective C - 示例单例实现

> ID：15383452
> 
> 赞同：1
> 
> 时间：2013-03-13T11:03:07.747
> 
> 标签：ios, objective-c, singleton

**我绝对需要休息...原因很简单-未分配数组...感谢您的帮助。由于那个令人尴尬的错误，我标记了我的帖子以删除它。我觉得它对用户没有用 ;) **

我刚刚尝试在 iOS 中创建一个单例类，但我可能犯了一个错误。代码（不需要 ARC）：

```
#import "PeopleDatabase.h"
#import "Person.h"

#import <Foundation/Foundation.h>

@interface PeopleDatabase : NSObject{objetive
    NSMutableArray* _arrayOfPeople;
}

+(PeopleDatabase *) getInstance;

@property (nonatomic, retain) NSMutableArray* arrayOfPeople;

@end 
```

--

```
 @implementation PeopleDatabase
    @synthesize arrayOfPeople = _arrayOfPeople;

    static PeopleDatabase* instance = nil;

    -(id)init{
        if(self = [super init]) {
            Person* person = [[[Person alloc] initWithName:@"John" sname:@"Derovsky" descr:@"Some kind of description" iconName:@"johnphoto.png" title:Prof] retain];

            [_arrayOfPeople addObject:person];
            NSLog(@"array count = %d", [_arrayOfPeople count]); // <== array count = 0 
            [person release];
        }
        return self;
    }

    +(PeopleDatabase *)getInstance {
        @synchronized(self)
        {
            if (instance == nil)
                NSLog(@"initializing");
                instance = [[[self alloc] init] retain];
                NSLog(@"Address: %p", instance);
        }
        return(instance);
    }

    -(void)dealloc {

        [instance release];
        [super dealloc];
    }
@end 
```

像这里调用 getInstance 时：

```
PeopleDatabase *database = [PeopleDatabase getInstance];
NSLog(@"Adress 2: %p", database); 
```

地址 2 的值与 getInstance 中的值相同。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-13T11:07:42.403

创建单例的标准方法是......

单例.h

```
@interface MySingleton : NSObject

+ (MySingleton*)sharedInstance;

@end 
```

单身人士.m

```
#import "MySingleton.h"

@implementation MySingleton

#pragma mark - singleton method

+ (MySingleton*)sharedInstance
{
    static dispatch_once_t predicate = 0;
    __strong static id sharedObject = nil;
    //static id sharedObject = nil;  //if you're not using ARC
    dispatch_once(&predicate, ^{
        sharedObject = [[self alloc] init];
        //sharedObject = [[[self alloc] init] retain]; // if you're not using ARC
    });
    return sharedObject;
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:06:11.750

检查这个苹果文档如何创建单例实例：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T11:09:57.033

```
 @synchronized(self)
    {
        if (instance == nil)
            NSLog(@"initializing");
            instance = [[[self alloc] init] retain];
            NSLog(@"Address: %p", instance);
    } 
```

您似乎缺少该`if`陈述的括号。如前所述，您唯一不同`instance == nil`的是发出日志消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-06T20:47:06.917

经过网络阅读和个人实践，我目前的单例实现是：

```
@interface MySingleton

@property myProperty;
+(instancetype) sharedInstance;

@end

@implementation MySingleton

+ (instancetype) sharedInstance
{
    static dispatch_once_t pred= 0;
    __strong static MySingleton *singletonObj = nil;
    dispatch_once (&pred, ^{
        singletonObj = [[super allocWithZone:NULL]init];
        singletonObj.myProperty = initialize ;
    });

    return singletonObj;
}

+(id) allocWithZone:(NSZone *)zone
{
    return [self sharedInstance];
}

-(id)copyWithZone:(NSZone *)zone
{
    return self;
} 
```

这是一个线程安全的实现，通过在你的类上调用“alloc init”来避免创建新对象的风险。由于类似的原因，属性初始化必须发生在块内，而不是在“init”覆盖内。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T11:12:22.483

在这个函数中，`+(PeopleDatabase *)getInstance`我认为你需要正确放置花括号：像这样

```
+(PeopleDatabase *)getInstance {
    @synchronized(self)
    {
        if (instance == nil)
        {
            NSLog(@"initializing");
            instance = [[[self alloc] init] retain];
            NSLog(@"Address: %p", instance);
        }
        return instance ;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T11:23:50.613

这是一个可以通过一些不规则的约定来避免的错误，即始终使用大括号后跟 if 和 else。

```
+(PeopleDatabase *)getInstance {
    @synchronized(self)
    {
        if (instance == nil)
            NSLog(@"initializing");
            instance = [[[self alloc] init] retain];
            NSLog(@"Address: %p", instance);
    }
    return(instance);
} 
```

如果 instance 为 nil，则下一个语句，并且仅执行该语句。那是 nslog 而不是分配。然后无论如何都会分配实例，无论它之前是否使用过。这将在每次调用时为您提供一个新的单例。顺便说一句，这会导致泄漏。

```
+(PeopleDatabase *)getInstance {
    @synchronized(self)
    {
        if (instance == nil) {
            NSLog(@"initializing");
            instance = [[[self alloc] init] retain];
            NSLog(@"Address: %p", instance);
        }
    }
    return(instance);
} 
```

但是这个错误是在调试时出现的。它可能会使您感到困惑，但不能解决您最初的问题。请添加一个 alloc 和 init 并同时保留`_arrayOfPeople`。

```
-(id)init{
    if(self = [super init]) {
        Person* person = [[[Person alloc] initWithName:@"John" sname:@"Derovsky" descr:@"Some kind of description" iconName:@"johnphoto.png" title:Prof] retain];

        _arrayOfPeople = [[[NSMutableArray alloc] init] retain]; //dont forget the release
        [_arrayOfPeople addObject:person];
        NSLog(@"array count = %d", [_arrayOfPeople count]); // <== array count = 1 !!!  
        [person release];
    }
    return self;
} 
```

在您的代码中 _arrayOfPeople 为 nil 并且 addObject 被发送到 nil ，这不会导致中止，但也不会执行任何操作。然后 count 被发送到 nil，它返回 0/nil。

# c# - C# HMM 手势识别使用 Kinect

> ID：15383454
> 
> 赞同：1
> 
> 时间：2013-03-13T11:03:08.620
> 
> 标签：c#, kinect, hidden-markov-models, accord.net

我正在研究一种使用 Kinect 传感器进行手势识别的解决方案。现在我正在使用 Accord .NET 来训练 HMM。我有一个保存手势的数据集。该数据集有 11 个手势，每个手势有 32 帧，保存了 18 个点。

所以我有一个 (double [12] [32,18]) 输入数据集和一个 (int[12]) 输出数据集，但是当我这样做时：double error = teacher.Run(inputSequences, output)，它给了我这个： “指定的参数超出了有效值的范围。”

有谁知道如何解决这个问题？在hmm老师上使用之前应该先处理数据集还是数据集可以这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:51:36.643

I have used Accord.NET in the past and its really one of the best implementations for a HMM engine. However, when I trained my HMM, I passed the HMM parameters (namely PI, A and B) to the Baum Welch Teacher with the input data set supplied using an organized excel sheet. (similar to what Accord's author himself has used in his project). I somehow feel that since you are storing your data set as a multi-dimensional array and directly supplying it to the teacher, its unable to process it properly. Maybe you could supply one gesture record at a time or change the storage structure of your data set altogether. I advice going through the entire example of Accord if you haven't already because it worked just fine for me.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T11:36:16.920

问题可能是教学算法期望训练序列采用格式*`double[12][32][18]`*，而不是*`double[12][32,18]`*. 训练数据应该是多变量点序列的集合。还应注意，如果您有 11 种可能的手势类别，则`int[12]`数组中给出的整数标签应仅包含 0 到 10 之间的值。

因此，如果您有 12 个手势样本，每个包含 32 帧，并且每帧是 18 个点的向量，您应该为教师提供一个`double[12][32][18]`包含观察结果的`int[12]`数组和一个包含预期类标签的数组。

下面的示例[摘自 HiddenMarkovClassifierLearning 文档页面](http://accord-framework.net/docs/html/T_Accord_Statistics_Models_Markov_Learning_HiddenMarkovClassifierLearning_1.htm)，应该有助于了解向量的组织方式！

```
// Create a Continuous density Hidden Markov Model Sequence Classifier 
// to detect a multivariate sequence and the same sequence backwards. 

double[][][] sequences = new double[][][]
{
    new double[][] 
    { 
        // This is the first  sequence with label = 0 
        new double[] { 0, 1 },
        new double[] { 1, 2 },
        new double[] { 2, 3 },
        new double[] { 3, 4 },
        new double[] { 4, 5 },
    }, 

    new double[][]
    {
            // This is the second sequence with label = 1 
        new double[] { 4,  3 },
        new double[] { 3,  2 },
        new double[] { 2,  1 },
        new double[] { 1,  0 },
        new double[] { 0, -1 },
    }
};

// Labels for the sequences 
int[] labels = { 0, 1 }; 
```

在上面的代码中，我们为 2 个观察序列设置了问题，其中每个序列包含 5 个观察，并且每个观察由 2 个值组成。如您所见，这是一个 double[2][5][2] 数组。类标签数组由 int[2] 给出，仅包含从 0 到 1 的值。

现在，为了使示例更完整，我们可以使用以下代码继续创建和训练模型：

```
var initialDensity = new MultivariateNormalDistribution(2);

// Creates a sequence classifier containing 2 hidden Markov Models with 2 states 
// and an underlying multivariate mixture of Normal distributions as density. 
var classifier = new HiddenMarkovClassifier<MultivariateNormalDistribution>(
    classes: 2, topology: new Forward(2), initial: initialDensity);

// Configure the learning algorithms to train the sequence classifier 
var teacher = new HiddenMarkovClassifierLearning<MultivariateNormalDistribution>(
    classifier,

    // Train each model until the log-likelihood changes less than 0.0001
    modelIndex => new BaumWelchLearning<MultivariateNormalDistribution>(
        classifier.Models[modelIndex])
    {
        Tolerance = 0.0001,
        Iterations = 0,

        FittingOptions = new NormalOptions()
        {
            Diagonal = true,      // only diagonal covariance matrices
            Regularization = 1e-5 // avoid non-positive definite errors
        }
    }
);

// Train the sequence classifier using the algorithm 
double logLikelihood = teacher.Run(sequences, labels); 
```

现在我们可以测试模型，断言输出类标签确实符合我们的预期：

```
// Calculate the probability that the given 
//  sequences originated from the model 
double likelihood, likelihood2;

// Try to classify the 1st sequence (output should be 0) 
int c1 = classifier.Compute(sequences[0], out likelihood);

// Try to classify the 2nd sequence (output should be 1) 
int c2 = classifier.Compute(sequences[1], out likelihood2); 
```

# sql-server-2008 - sql 2008 添加序号

> ID：15383466
> 
> 赞同：0
> 
> 时间：2013-03-13T11:03:41.160
> 
> 标签：sql-server-2008, insert

我有一个带有主键列 ID 的表，当将新记录插入数据库时​​，它需要按顺序增加。（即：1,2,3,...）

我可以设置自动执行此操作的数据库选项吗？

如果不是，那么手动执行此操作的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:08:20.083

如果您创建带有[`IDENTITY`](http://msdn.microsoft.com/en-us/library/ms186775.aspx)列的表，它将自动为您完成；

```
CREATE TABLE test (
  id INT IDENTITY PRIMARY KEY NOT NULL,
  val VARCHAR(32)
);

INSERT INTO test (val) VALUES ('a'),('b'),('c');

SELECT * FROM test;

id   val
1    a
2    b
3    c 
```

[显示它的 SQLfiddle](http://sqlfiddle.com/#!6/af149/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:05:37.767

您需要标识属性 msdn 文档解释它的用法

[http://msdn.microsoft.com/en-gb/library/ms186775.aspx](http://msdn.microsoft.com/en-gb/library/ms186775.aspx)

# delphi - 是否有 DCC32 选项可将特定编译器警告视为错误？

> ID：15383471
> 
> 赞同：10
> 
> 时间：2013-03-13T11:03:49.563
> 
> 标签：delphi, compiler-warnings

对于命令行构建，我想将警告（例如“构造包含抽象方法的实例”）视为错误。我在 Delphi 2009 中没有找到用于此目的的 dcc32 命令行选项。有没有办法，例如使用 dcc32.cfg，来做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T11:33:25.797

像这样：

```
dcc32 -W^^CONSTRUCTING_ABSTRACT MyProject.dpr 
```

例如，使用此程序：

```
program MyProject;

type
  TMyClass = class
    procedure X; virtual; abstract;
  end;

begin
  TMyClass.Create;
end. 
```

这是输出：

```
>dcc32 我的项目.dpr
Embarcadero Delphi for Win32 编译器版本 24.0
版权所有 (c) 1983,2012 Embarcadero Technologies, Inc.
Myproject.dpr(9) 警告：W1020 构造包含抽象方法“TMyClass.X”的“TMyClass”实例
我的项目.dpr(12)
13 行，0.03 秒，21568 字节代码，13256 字节数据。

>dcc32 -W^^CONSTRUCTING_ABSTRACT MyProject.dpr
Embarcadero Delphi for Win32 编译器版本 24.0
版权所有 (c) 1983,2012 Embarcadero Technologies, Inc.
Myproject.dpr(9) 错误：E1020 构造包含抽象方法“TMyClass.X”的“TMyClass”实例
我的项目.dpr(12)

```

如果您希望所有警告都被视为错误，那么您可以这样做：

```
dcc32 -W^^ MyProject.dpr 
```

如需进一步阅读，请参阅[Delphi XE2 的隐藏提示和警告选项](https://marc.durdin.net/2012/05/delphi-xe2s-hidden-hints-and-warnings-options/)。

# ruby-on-rails - 如何存根：Rspec中的where方法？

> ID：15383474
> 
> 赞同：2
> 
> 时间：2013-03-13T11:03:54.370
> 
> 标签：ruby-on-rails, ruby, rspec, stub

我有以下代码：

```
Group.where('name ~* ?', params[:name]).first 
```

在这种情况下如何存根`where`方法？

```
Group.stub(:where).and_return(mock_model(Group, name: "SomeName")) 
```

导致错误：

```
Mock "Group_1001" received unexpected message :first with (no args) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T11:05:25.423

在您的情况下，您应该返回响应`first`. 数组是一个不错的选择。

```
Group.stub(:where).and_return([mock_model(Group, name: "SomeName")]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-13T11:16:27.877

您可以使用`stub_chain`两个存根`where`，`first`然后返回您的对象：

```
Group.stub_chain(:where, :first).and_return(mock_model(Group, name: "SomeName")) 
```

# jquery - 如何创建指向 Twitter 登录弹出窗口/灯箱 iframe 的链接，以便人们在不使用标准推文按钮的情况下发布推文？

> ID：15383480
> 
> 赞同：0
> 
> 时间：2013-03-13T11:04:04.850
> 
> 标签：jquery, iframe, twitter, time, loading

我想为 twitter 创建一个链接/灯箱，供人们发布有关我的网站的信息，但我不想使用 twitter 提供的标准推文按钮，因为它会为我的主页加载时间增加 100k。

基本上我试图减少加载时间以增加谷歌访问我网站的流量。

有什么方法可以像推特按钮一样链接到 Twitter，但对我的网站影响最小，并且可能通过使用灯箱让客户留在我的网站上。

* * *

我可以使用灯箱（[http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)）并链接到推文按钮生成的代码

例如：[https ://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fdev.twitter.com%2Fdocs%2Ftweet-button&text=Tweet%20Button%20|%20Twitter%20Developers&tw_p=tweetbutton&url=https%3A %2F%2Fdev.twitter.com%2Fdocs%2Ftweet-按钮](https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fdev.twitter.com%2Fdocs%2Ftweet-button&text=Tweet%20Button%20|%20Twitter%20Developers&tw_p=tweetbutton&url=https%3A%2F%2Fdev.twitter.com%2Fdocs%2Ftweet-button)

但我不确定这是否会产生错误，因为实际上没有使用推文按钮

* * *

谢谢你的帮助

朱迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:58:53.057

我发现 twitter 似乎无法将灯箱用作 iframe。因此，作为替代方案，我使用了一个简单的 javascript 弹出窗口，它与推文按钮的作用相同，但对页面加载时间的干扰较小。

这个链接

```
<a href="https://twitter.com/share/" onClick="return popup(this, 'notes')">my popup</a> 
```

使用此代码

```
 <script type="text/javascript">
<!--
function popup(mylink, windowname)
{
if (! window.focus)return true;
var href;
if (typeof(mylink) == 'string')
   href=mylink;
else
   href=mylink.href;
window.open(href, windowname, 'width=550,height=420,scrollbars=yes');
return false;
}
//-->
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:34:15.717

@brightmist.co.uk，您的简单代码可以为用户提供任何推文。

如何在推文框中自动插入@ourTwitterUsername。

它可能会被使用，以便用户可以直接向我们发送推文而无需在其中输入@ourTwitterUsername？

或者喜欢自动插入用户正在查看的标题和链接/文章？

# tfs - 归档团队系统源代码控制

> ID：15383487
> 
> 赞同：0
> 
> 时间：2013-03-13T11:04:27.470
> 
> 标签：tfs

是否可以从 MS Team System Source Control 存档旧数据？我们的 TFS 数据库中有多达 10,000 个变更集，并且不太可能想要追溯到那么远，但是数据库文件变得越来越大。是否可以在某个日期（例如）之前归档所有内容以减小数据库的大小？如果不是这样，从逻辑上的结论来看，一个长期活跃的开发项目最终将爆炸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:10:02.030

您可以备份整个 TFS 数据库，然后使用`destroy`命令永久删除源代码控制树。但是您只能对整个源代码控制路径执行此操作，而不是特定版本。

如果有许多已删除的文件，您还可以使用相同的命令查看源代码控制树并永久销毁这些已删除的文件。

您将不能只删除旧的变更集，因为每次签入时 TFS 都会存储增量更改。这也意味着您可能将大型二进制文件存储在 TFS 中 - 大于特定限制的文件不会增量存储（从而节省空间），而是每个版本都完整存储。

有关命令的文档：http: [//msdn.microsoft.com/en-us/library/bb386005 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb386005(v=vs.100).aspx)

# bash - 如何从脚本结束后仍然存在的 bash 脚本生成 bash 子shell

> ID：15383497
> 
> 赞同：3
> 
> 时间：2013-03-13T11:04:44.503
> 
> 标签：bash

我想从一个 bash 脚本中生成一个 bash 子shell，它允许我初始化环境变量并进行一些尝试，以便当脚本结束时，用户在具有初始化环境变量的子shell中。

通过测试，我发现如果脚本中有*/bin/bash*指令，则会生成子 shell，并且当脚本结束时用户位于子 shell 中。如果我执行 exit，则子 shell 终止，用户返回父 shell。

我现在希望能够初始化环境变量并根据脚本中给出的参数在子shell中执行一些任务。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:20:19.557

[exec](http://www.gnu.org/software/bash/manual/bashref.html#Bourne-Shell-Builtins)是你要找的

```
$ cat reshell.sh
#!/bin/bash
export MY_ENVIRONMENT=foo
chdir /home/bar
exec $SHELL 
```

其中，`exec`将当前运行的脚本替换为继承了脚本环境的新 shell。这仍然是您运行它的那个的从属外壳，但它只有一层深；例如：

```
$ pwd 
/home/chmike
$ ./reshell.sh
$ pwd
/home/bar
$ exit
$ pwd
/home/chmike 
```

使用`exec $SHELL`而不是`exec /bin/bash`允许脚本调用用户首选的 shell，以防它不是 bash。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:14:44.267

导出脚本中的所有环境变量，然后生成一个子shell。子shell 将设置所有环境变量。

```
export EXAMPLE="<value>"
...
#spawn a subshell
/bin/bash 
```

# c# - 为 aspx 页面使用自定义文件扩展名

> ID：15383504
> 
> 赞同：0
> 
> 时间：2013-03-13T11:05:01.350
> 
> 标签：c#, asp.net, visual-studio, intellisense

如何在具有自定义扩展的 Web 应用程序中处理 aspx 页面？我想使用 test.meExtension 而不是 test.aspx。我想保留智能，而所有其他人都认为 aspx 页面有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:17:46.533

您可以使用`HttpContext.RewriteUrl method`来修改您的网址

链接：http: [//msdn.microsoft.com/en-us/library/system.web.httpcontext.rewritepath.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.rewritepath.aspx)

# javascript - 将 Uint8Array 更改为 blob 时遇到问题

> ID：15383505
> 
> 赞同：5
> 
> 时间：2013-03-13T11:05:05.363
> 
> 标签：javascript, html, webkit, blob

我正在写一些东西，它需要一个画布（具有 1 位像素颜色深度），将其转换为 Uint8Array（一个字节代表 8 个像素），然后在接收其他类似编码的消息时将其发送出去。

我认为 blob 非常适合这种数据，我创建了一个 blob，创建 FormData，将 blob 附加到 FormData，然后像这样发送它：

```
function sendFormData(data){
    //data.data is a Uint8Array other attributes are strings
    var bytesBlob = new Blob([data.data],{type: "application/octet-stream"});
    console.log(bytesBlob,data.data);
    var form = new FormData();
    var request = new XMLHttpRequest();
    form.append("blob",bytesBlob,"message");
    form.append("user",data.user);
    form.append("colour",data.colour);
    form.append("room",currentRoom);
    request.open("POST","http://localhost:8080/",true);
    request.send(form);
} 
```

现在，在创建 blob 后使用 console.log，我可以看到 blob 的长度，它应该是 2035，并且在 Chrome 中，但在其他 webkit 浏览器（Safari）上，大小是 19。

这是因为，它不是从 Uint8Array 中创建一个 blob，而是从“[object Uint8Array]”这个词中创建一个 blob，这显然对任何人都没有用。

当我从服务器下载其中一个 blob 时，我看到了这一点：

```
$ cat blob-1 [object Uint8Array] 
```

我猜这是 Uint8Array 对象在某个时候得到 toString() 的结果，那么我如何确保它作为实际的二进制数据发送？

我想知道我是否正确地处理了这个问题，使用 blob 或发送数据的最佳方法是什么？特别是因为目标平台似乎引发了异常并停止而不是使“[object Uint8Array]”

目标平台只是 Webkit，所以我不必担心其他类型的浏览器。谢谢。

# django - mongoDB 和 Django TypeError: __init__() 正好需要 2 个参数（1 个给定）

> ID：15383506
> 
> 赞同：1
> 
> 时间：2013-03-13T11:05:07.150
> 
> 标签：django, mongodb, python-2.7

我已经从[链接安装了以下内容](http://www.django-mongodb.org/topics/setup.html)

```
django-nonrel 

djangotoolbox 

mongodb-engine 
```

我改变了我`installed_apps`的

```
INSTALLED_APPS = (
   .. apps ..
) 
```

到

```
INSTALLED_APPS = [
   .. apps ..
] 
```

但我收到如下错误，

```
Validating models...

Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x12b8450>>

Traceback (most recent call last):
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/core/management/commands/runserver.py", line 92, in inner_run
    self.validate(display_num_errors=True)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/core/management/base.py", line 280, in validate
    num_errors = get_validation_errors(s, app)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/core/management/validation.py", line 28, in get_validation_errors
    from django.db import models, connection
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/db/__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/db/utils.py", line 94, in __getitem__
    conn = backend.DatabaseWrapper(db, alias)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django_mongodb_engine-0.4.0-py2.7.egg/django_mongodb_engine/base.py", line 88, in __init__
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/djangotoolbox-0.9.2-py2.7.egg/djangotoolbox/db/base.py", line 28, in __init__

TypeError: __init__() takes exactly 2 arguments (1 given) 
```

我正在使用**Django 1.5** 和**python 2.7**

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:30:33.553

`django-nonrel`是 Django 1.3 的一个分支，所以你不能在 Django 1.5 中使用它。尝试卸载 Django 1.5。

# capistrano - Capistrano 上传失败，参数错误？

> ID：15383507
> 
> 赞同：4
> 
> 时间：2013-03-13T11:05:13.673
> 
> 标签：capistrano

我在跑

```
upload('bin/rvm_install.sh','~/rvm_install.sh') 
```

在我的 Capistrano 部署脚本中。它吐出以下错误：

```
capistrano-2.14.2/lib/capistrano/configuration/namespaces.rb:110:in `block in define_task': wrong number of arguments (2 for 0) (ArgumentError) 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T11:11:50.423

改变

```
upload('bin/rvm_install.sh','~/rvm_install.sh') 
```

到

```
top.upload('bin/rvm_install.sh','~/rvm_install.sh') 
```

解决了我的问题。

# javascript - main.js 中的 Gtk.init 出错

> ID：15383510
> 
> 赞同：0
> 
> 时间：2013-03-13T11:05:17.117
> 
> 标签：javascript, gtk, gnome

我正在关注[本教程](https://developer.gnome.org/gnome-devel-demos/unstable/record-collection.js.html.en)。但是当我尝试运行它时，我不断收到这个错误；

```
 JS ERROR: !!!   Exception was: Error: Expected type utf8 for Argument 'argv' but got type 'number' (nil)
    JS ERROR: !!!     message = '"Expected type utf8 for Argument 'argv' but got type 'number' (nil)"'
    JS ERROR: !!!     fileName = '"main.js"'
    JS ERROR: !!!     lineNumber = '146'
    JS ERROR: !!!     stack = '"@main.js:146
"'
Error: Expected type utf8 for Argument 'argv' but got type 'number' (nil) 
```

我真的不确定出了什么问题。错误发生在第 146 行；

> Gtk.init(0, null);

使用的代码可[在此处](https://developer.gnome.org/gnome-devel-demos/unstable/record-collection/record-collection.js)获得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:38:23.507

是的。这是一个错误。看看这个带有补丁的消息：[https ://mail.gnome.org/archives/commits-list/2012-February/msg10213.html](https://mail.gnome.org/archives/commits-list/2012-February/msg10213.html)

你应该改变`Gtk.init(0,null);`。`Gtk.init(null, null);`

# sql-server - BCP 无法导出并出现错误“无法解析列级排序规则”

> ID：15383511
> 
> 赞同：1
> 
> 时间：2013-03-13T11:05:19.737
> 
> 标签：sql-server, cygwin, bcp

我已经彻底搜索了 Stack Overflow 以及许多其他资源，但仍然有问题。这是我的导出脚本，在 Cygwin 下运行：

```
#!/usr/bin/env bash
#-*- coding: cp1255; -*-
bcp "declare @billing_types table(k int null, t varchar(14)
    collate SQL_Latin1_General_CP1255_CI_AS)
insert @billing_types
values (null, 'לא פעיל')
       ,(1, 'אשרי')
       ,(2, 'צ׳ק')
       ,(3, 'הוראת קבע')

declare @standing_order_status table(i int null, s varchar(14)
    collate SQL_Latin1_General_CP1255_CI_AS)
insert @standing_order_status
values (null, 'אין')
       ,(4, 'מבותל')
       ,(3, 'לא מאושר')
       ,(2, 'ממתין')
       ,(1, 'מאושר')

select billing_company_id
      ,internal_company_name
      , t collate SQL_Latin1_General_CP1255_CI_AS as payment_type_string
      ,isnull(company_email, '') collate SQL_Latin1_General_CP1255_CI_AS as email
      ,company_fax
      ,company_address
      ,company_comments
      ,invoice_send_with_details
      ,invoice_send_fax
      ,invoice_print
      ,cc_name
      ,cc_number
      ,cc_cvv
      ,cc_id
      ,cc_expire
      ,bank_number
      ,bank_branch
      ,bank_account
      ,bank_hoshen
      ,s collate SQL_Latin1_General_CP1255_CI_AS
from billing_companies
join @billing_types bt on bt.k = payment_type
join @standing_order_status os on os.i = bank_standing_order_status" \
queryout  billing-companies.csv -t"," -r"\n" -S server -T \
-U user -P password -f ./billing-companies.fmt 
```

这是格式文件：

```
9.0
20
1  BIGINT  0 1    ""  1  billing_company_id        ""
2  VARCHAR 0 1000 ""  2  internal_company_name     SQL_Latin1_General_CP1255_CI_AS
3  VARCHAR 0 14   ""  3  payment_type_string       SQL_Latin1_General_CP1255_CI_AS
4  VARCHAR 0 200  ""  4  email                     SQL_Latin1_General_CP1255_CI_AS
5  VARCHAR 0 100  ""  5  company_fax               SQL_Latin1_General_CP1255_CI_AS
6  VARCHAR 0 4000 ""  6  company_address           SQL_LATIN1_GENERAL_CP1255_CI_AS
7  NTEXT   0 1    ""  7  company_comments          SQL_LATIN1_GENERAL_CP1255_CI_AS
8  BIT     0 1    ""  8  invoice_send_with_details ""
9  BIT     0 1    ""  9  invoice_send_fax          ""
10 BIT     0 1    ""  10 invoice_print             ""
11 VARCHAR 0 200  ""  11 cc_name                   SQL_LATIN1_GENERAL_CP1255_CI_AS
12 VARCHAR 0 50   ""  12 cc_number                 SQL_LATIN1_GENERAL_CP1255_CI_AS
13 VARCHAR 0 50   ""  13 cc_cvv                    SQL_LATIN1_GENERAL_CP1255_CI_AS
14 VARCHAR 0 50   ""  14 cc_id                     SQL_LATIN1_GENERAL_CP1255_CI_AS
15 VARCHAR 0 50   ""  15 cc_expire                 SQL_LATIN1_GENERAL_CP1255_CI_AS
16 VARCHAR 0 100  ""  16 bank_number               SQL_LATIN1_GENERAL_CP1255_CI_AS
17 VARCHAR 0 100  ""  17 bank_branch               SQL_LATIN1_GENERAL_CP1255_CI_AS
18 VARCHAR 0 100  ""  18 bank_account              SQL_LATIN1_GENERAL_CP1255_CI_AS
19 INT     0 1    ""  19 bank_hoshen               ""
20 varchar 0 14   ""  20 standing_order_status     SQL_LATIN1_GENERAL_CP1255_CI_AS 
```

排序规则与数据库中的排序规则匹配。当我在工作室中运行查询时，我得到了预期的结果，没有警告。

也许这里有一个警告：数据库使用单字节史前希伯来语编码......我不确定 Cygwin 或以后的任何人是否没有尝试在编码之间进行转换。但是，我仔细确认了自己的工作做得很好。即脚本文件本身在cp-1255 中。

如果我从脚本中删除所有提到的希伯来语，它就会起作用。所以，我猜这一定是问题所在，但是，我不知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:24:54.603

您是否尝试过使用 -C 开关来指定特定的代码页？

这是联机丛书中的 BCP 语法页面：

[http://msdn.microsoft.com/en-us/library/ms162802.aspx](http://msdn.microsoft.com/en-us/library/ms162802.aspx)

看这里，您可能想要使用代码页 1255：

[http://msdn.microsoft.com/en-us/library/ms186356(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms186356(v=sql.105).aspx)

HTH。

# c++ - 为什么链接库的顺序会导致运行时错误？

> ID：15383512
> 
> 赞同：1
> 
> 时间：2013-03-13T11:05:22.827
> 
> 标签：c++, visual-studio-2010, linker

我有一个非托管 C++ 项目，当链接器库（属性->链接器->输入->附加依赖项）按特定顺序列出时会产生运行时错误，但当我更改库的顺序时运行良好。我理解为什么该顺序会导致链接错误（[为什么链接库的顺序有时会导致 GCC 中的错误？](https://stackoverflow.com/questions/45135/linker-order-gcc)）但它怎么可能导致运行时错误？我在 VS2005、2008 和 2010 中观察到了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:37:24.130

什么样的运行时错误？你不说，所以我们不得不猜测。

以下是可能发生运行时错误的一种方式：如果两个不相关的库公开了碰巧具有相同名称的不同函数，则链接器将选择它找到的第一个实现。

如果您打算调用`draw()`from `paint.lib`，但`gunfight.lib`在链接器列表中较早，那么您将调用错误`draw()`并产生不可预知的后果。

# c++ - Winsock 没有在 while 循环中发送

> ID：15383513
> 
> 赞同：0
> 
> 时间：2013-03-13T11:05:23.330
> 
> 标签：c++, windows, sockets, networking, winsock

我对网络非常陌生，并且在一段时间循环期间发送消息时遇到问题。

据我所知，我应该按照以下方式做一些事情：

```
Create Socket()
Connect()

While
     Do logic
     Send()
End while

Close Socket() 
```

但是它发送一次并在之后返回-1。

该代码仅在我在循环中创建套接字时才有效。

```
While
     Create Socket()
     Connect()
     Do logic
     Send()
     Close Socket()
End while 
```

这是我正在使用但不起作用的代码部分：

```
//init winsock
WSAStartup(MAKEWORD(2, 0), &wsaData);

//open socket
    sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);

    //connect
    memset(&serveraddr, 0, sizeof(serveraddr));
    serveraddr.sin_family      = AF_INET;
    serveraddr.sin_addr.s_addr = inet_addr(ipaddress);
    serveraddr.sin_port        = htons((unsigned short) port);
    connect(sock, (struct sockaddr *) &serveraddr, sizeof(serveraddr));

while(true) {

    if (send(sock, request.c_str(), request.length(), 0)< 0 /*!= request.length()*/) {
        OutputDebugString(TEXT("Failed to send."));
    } else {
        OutputDebugString(TEXT("Activity sent."));
    }
    Sleep(30000);
}
//disconnect
closesocket(sock);

//cleanup
WSACleanup(); 
```

函数 CheckForLastError() 返回：10053

WSAECONNABORTED 软件导致连接中止。已建立的连接被主机中的软件中止，可能是由于数据传输超时或协议错误

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2021-09-17T00:05:53.237

我也一直在寻找解决这个问题的方法。我的服务器也有同样的问题。当尝试从循环内部发送响应时，客户端似乎永远不会收到它。

据我了解问题，根据user207421的建议，当您在客户端和服务器之间建立连接时，协议应该有足够的信息让客户端知道服务器何时完成发送响应。如果您看到此[示例](https://github.com/timbergus/sockets-playground)，则您有一个响应请求的最小 HTTP 服务器。在这种情况下，您可以使用浏览器或 Postman 等应用程序。如果您看到响应消息，您将看到一个名为`Connection`. 将其值设置为`close`告诉客户端哪个是来自服务器的该请求的最后一条消息。消息正在发送，但客户端一直在等待，可能是因为客户端无法识别关闭元素。我也错过了`Content-Length`标题。我的 HTTP 响应消息错误，客户端丢失。

该图显示了需要在循环之外以及需要在循环内部的内容。

[![在此处输入图像描述](../Images/8bb8d35956d1a7512a6c2255138e3cc8.png)](https://i.stack.imgur.com/Sthds.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-21T09:13:50.723

要了解您的程序如何以及为什么会失败，您必须了解您使用的功能。其中一些是阻塞功能，而另一些则不是。其中一些需要先前调用其他函数，而另一些则不需要。现在据我了解，我们在这里谈论的是客户端，而不是服务器。在这种情况下，客户端只有非阻塞功能。这意味着每当您调用一个函数时，它都会在不等待的情况下执行。所以 send() 将在它被调用的第二次发送数据，并且流将继续到下一行代码。如果要发送的信息还没有准备好……你会遇到问题，因为什么都不会发送。要解决它，您可以使用某种延迟。延迟的问题在于它们是阻塞函数，这意味着您的流一旦达到延迟就会停止。要解决它，您可以创建一个线程并将其锁定，直到准备好发送信息。但这将完成一个 send() 的工作。您将发送信息，仅此而已。如果要保持通信并重复发送信息，则需要创建一个while循环。一旦你有一个while循环，你就不必担心任何事情。那是因为您可以使用流控制验证信息是否已准备就绪，并且您可以在终止连接之前反复使用发送。现在的问题是服务器端发生了什么？“ipaddress”应该保存服务器的 ip。服务器可能会拒绝您的连接请求。或者最糟糕的是，他可能会接受您的请求，但他正在使用与您的客户端相关的不同设置进行侦听。

# android - 设置新路径android

> ID：15383515
> 
> 赞同：1
> 
> 时间：2013-03-13T11:05:30.470
> 
> 标签：android, path

这是我的代码的一部分：

```
mediaRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);    
CamcorderProfile camcorderProfile_HQ = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);     
mediaRecorder.setProfile(camcorderProfile_HQ);    
mediaRecorder.setOutputFile("/sdcard/Video.mp4");    
mediaRecorder.setMaxDuration(600000000); // Set max duration 60 sec.    
mediaRecorder.setMaxFileSize(500000000); // Set max file size 5M 
```

全班将视频从实时摄像头录制到 SD 卡。但由于我总是用相同的路径保存它，我录制的新视频会覆盖之前的视频。如何更改每次以新名称保存的路径或视频不会相互覆盖的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:13:19.760

不要使用硬核字符串，如`'/sdcard'`or `'/mnt/sdcard'`。

始终使用`Environment.getExternalStorageDirectory()`. 每次使用以下函数获取新名称。

```
 private File getNextFileName() 
 {
    File file = new File(Environment.getExternalStorageDirectory(), "Video_" + System.currentTimeMillis() + ".mp4" );
    return file;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:08:10.797

而不是 video.mp4 获取 System.nanoTime() 并将其插入到路径中。

```
mediaRecorder.setOutputFile("/sdcard/" + System.nanoTime() + "_video.mp4"); 
```

# c#-4.0 - 通过用户参数解析依赖

> ID：15383518
> 
> 赞同：0
> 
> 时间：2013-03-13T11:05:38.053
> 
> 标签：c#-4.0, dependency-injection

我经常需要使用一些本身必须加载一些依赖项才能工作的类。但是，我的组件可以有多个具体的依赖实现，它会根据某些对象参数选择一个，而不是另一个。

真正的问题是应用程序启动时对象参数总是未知的，所以我现在无法注册任何依赖项，也无法解决它们。

相反，例如，当我需要使用某个本身需要加载某些依赖项的类时，我知道使用的对象参数`concreteBuilder`以便返回给我适当的实现：

```
interface ISample { }

class ParamForBuildSomeISampleImplementation
{
    // this instance cannot be create by my startUpApplication - Container - Resolver.
    // Instead, all time dependency is required (buttonClick, pageLoad and so on), this class can be instantiated.
}

class Sample1 : ISample 
{
    // some implementation
}

class Sample2 : ISample
{
    // some other implementation
}

class MyISampleFactory
{
    // Build ISample
    public ISample Build(ParamForBuilderISample obj)
    {
        // if obj.someProperty == ".." return new Sample1();
        // else if obj.someProperty == "--" return new Sample2();
        // else if ...
    }
}

class NeedsDependency
{
    ISample _someSample;
    public NeedsDependency(ISample someSample)
    {
        _someSample = someSample;
    }
}

// *** Controllor - ApplicationStartup - other ***
// Here I have not idea how to build ISample dependency

@@ EDIT 
// *** button click event handler ***
// Ok, here I know how to create ParamForBuilderISample, 
// hence I can call MyISampleFactory, then, I can Use NeedDependency class:
ParamForBuilderISample obj = new ...
obj.SomeProperty = ...
obj.otherSomeProperty = ...
ISample sample = MyISampleFactory.Build(obj);
NeedDependency nd = new NeedDependency(sample);
// perfect, now my buttonClick can execute all what it wants
nd.DoSomething();
nd.DoOtherStuff(); 
```

我的场景适合依赖注入模式吗？如果是真的，我真的不知道如何构建我的模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:38:17.867

与其使用构造函数注入来传递此“运行时依赖项”，不如使用方法注入。这甚至可以完全消除对工厂的需求：

```
private readonly ISample sample;

public MyController(ISample sample) {
    this.sample = sample;
}

public string button_click_event_handler(object s, EventArgs e) {
    ParamForBuilderISample obj = new ...
    obj.SomeProperty = ...
    obj.otherSomeProperty = ...

    this.sample.DoSomething(obj);
} 
```

您仍然需要在某个地方切换，但是您可以实现代理，而不是拥有工厂`ISample`：

```
public class SampleProxy : ISample
{
    private readonly Sample1 sample1;
    private readonly Sample2 sample2;

    public SampleProxy(Sample1 sample1, Sample2 sample2) {
        this.sample1 = sample1;
        this.sample2 = sample2;
    }

    public void DoSomething(ParamForBuilderISample param) {
        this.GetSampleFor(param).DoSomething(param);
    }

    private ISample GetSampleFor(ParamForBuilderISample param) {
        // if obj.someProperty == ".." return this.sample1;
        // else if obj.someProperty == "--" return this.sample2;
        // else if ...
    }
} 
```

你`ParamForBuilderISample`看起来像一个[参数对象](http://sourcemaking.com/refactoring/introduce-parameter-object)。依赖注入并没有消除对方法参数的需要。数据仍应通过方法传递。

# html - 无法居中导航菜单并且无法在项目之间获取分隔线

> ID：15383524
> 
> 赞同：1
> 
> 时间：2013-03-13T11:05:54.957
> 
> 标签：html, css

我在其他所有内容下将导航菜单居中时遇到了一些麻烦，而且分隔线也没有位于两个菜单项之间的中心。

CSS

```
 .center{
    width: 450px;
    height: 500px;
    /*margin: 0 auto;
    display: block;
    position:relative;*/
    position:absolute;
    left:50%;
    top:50%;
margin-left:-225px;
margin-top:-250px;}

#navbar {

    padding:0;
    margin-left: 0 auto;
    margin-right: 0 auto;}

#navbar li {
    float: left;
    list-style:none;
    width: 100px;}

#navbar a{
    text-decoration:none;
    color:#FFF;
    font-family:Arial, Helvetica, sans-serif;
    padding: 0;}

#navbar li + li {
    background: url('separator.gif') no-repeat top left;
} 
```

这是[http://jsfiddle.net/elroyz/GPgPF/](http://jsfiddle.net/elroyz/GPgPF/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:10:33.120

而不是浮动你的`navbar li`make 它们`display:inline-block`：

```
#navbar li {
    display:inline-block;
    list-style:none;
    width: 100px;
} 
```

[http://jsfiddle.net/GPgPF/3/](http://jsfiddle.net/GPgPF/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:13:48.230

把你的css改成这样：

```
#navbar {
    width: 100%;
    padding:0;
}

#navbar li {
    display:inline-block;
    list-style:none;
    width: 100px;
} 
```

# assembly - ASM-使用过程查找数组a是否以相同的顺序存在于数组b中

> ID：15383525
> 
> 赞同：0
> 
> 时间：2013-03-13T11:05:55.313
> 
> 标签：assembly, x86

首先，我想说的是，我花了 5 个小时试图找到答案。

设置了数组 A 和数组 B。一个名为 TEST1 的过程将获得一个值 V 并返回该值是否存在于数组 B 中。如果它确实将索引存储在 P 中，如果没有，则将 -1 存储在 P 中。（我找到了答案，但在下一节中你必须使用它）现在的难题：在下一节中，他们希望我使用此过程-TEST1 查找数组 a 是否以相同的顺序存在于数组 b 中。

（数组 a 将在数组 b 中连续找到）

我对最后一部分的想法是：

我们将定义 3 个 DB 大小的变量：Flag (0),Count(0),Check(0)。我们将数组 a 中的值传递给变量 V。每次我们将“调用”过程并检查变量 P 是否不同于 -1，如果是，变量 Flag 将增加 1。

程序会检查 Flag 是否等于 1，如果是，flag 会减 1，count 会增加 1。调用程序后第一次 flag 会等于 0，Count 会保存在变量 Check 中. 每次变量 Count 变为等于 0 之前，程序都会比较变量 Check 和变量 Count。变量 Check 必须为变量 Count 的最大值，然后变量 Count 将被重置。所有这些都将在一个循环中运行大约 100 次。如果变量 Check 等于 10，则数组 A 以相同的顺序存在于数组 B 中。

请记住：数组 B 的长度始终高于数组 A 的长度，因此无需检查哪个长度更大。

该程序应从以下数据开始：

```
ARR_B DB 100 DUP() 

ARR_A DB 10 DUP () 

V DB ? 

P DB ? 
```

无论我多么努力地尝试实现这个想法，它仍然不起作用（当我尝试运行它时，它会给出一个无效索引和内存不足的错误消息 - 当我尝试修复程序允许进入的错误时数字，但如果数组 a 存在于数组 b) 中，它会在给出按摩之前卡住。

请使用跳转、cmp、中断等基本命令，不要使用不难理解的高级命令。这个问题有更好的解决方案吗？什么？

我的解决方案：（仍然不起作用）

```
Data Segment 
    ARR_B DB 100 DUP(?) 
    ARR_A DB 10 DUP(?) 
    V DB ? P DB ? 
    FLAG DB (0) 
    Message1 DB 'Array A found in array B','$' 
    Message2 DB 'Array A is not found in array B','$' 
DATA ends

Code Segment Assume CS:CODE,DS:DATA

IntakeB PROC 
    MOV AH,1H 
    INT 21H 
    MOV ARR_B[SI],AL 
    INC SI 
    RET 
endp

IntakeA PROC 
    MOV AH,1H 
    INT 21H 
    MOV ARR_A[SI],AL 
    INC SI 
    RET 
endp

TEST1 PROC 
    MOV AH,1 
    NEG AH 
    MOV P,AH 

SEARCH: 
    MOV DL,ARR_B[BX] 
    CMP V,DL 
    JE EQUAL 
    INC BX 
    LOOP SEARCH 
    JMP RETURN 

EQUAL: 
    MOV P,BL 

RETURN: 
    RET
endp

FIND PROC
SEARCH2: 
    CMP V,ARR_B[BX] 
    JE EQUAL2 
    RET 
    MOV FLAG,0 

EQUAL2: 
    INC BX 
    INC FLAG 
    LOOP SEARCH2 
endp

START: 
    MOV AX,DATA 
    MOV DS,AX 
    MOV SI,0H 
    MOV CX,100 

ValuesB: 
    CALL IntakeB 
    LOOP ValuesB 
    MOV SI,0H 
    MOV CX,10 

ValuesA: 
    CALL IntakeA 
    LOOP ValuesA 
    MOV BX,0H 
    MOV CX,100 
    MOV SI,0H 

CHECK: 
    MOV V,ARR_A[SI] 
    CALL TEST1 
    MOV CH,-1 
    CMP P,CH 
    JNE FIRST 
    JMP FINISH

FIRST: 
    MOV AH,0 
    MOV CX,10 
    MOV BX,0H 
    MOV AL,P 
    MOV V,ARR_B[AX] 
    CALL FIND
    MOV AH,0
    CMP FLAG,AH
    JE EQUAL5
    MOV BL,0H
    MOV AH,9H
    MOV DX,OFFSET Message2
    INT 21H
    JMP FINISH

EQUAL5: 
    MOV BL,1H 
    MOV AH,9H 
    MOV DX,OFFSET Message1 
    INT 21H 

FINISH: 
    MOV AX,4C00H 
    INT 21H

END START
CODE ENDS 
```

# node.js - express.js 中的服务器端“重定向”

> ID：15383527
> 
> 赞同：2
> 
> 时间：2013-03-13T11:06:01.350
> 
> 标签：node.js, express

假设我为 /x/AAA 设置了一条路线。我如何获得 /y/AAA 的请求，以像 /x/AAA 一样处理，但代码也知道它最初来自 /y/，以便它可以启用调试。

我基本上是在服务器端重定向之后，类似于 ASP.NET 中的 Server.Transfer。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:25:31.810

这在 Express 中不是很常见（因此，没有明显的解决方案）。

您当然可以对两条路线使用相同的处理程序：

```
var handler = function(req, res) {
  ...
};
app.get('/x/AAA', handler);
app.get('/y/AAA', handler); 
```

在您的处理程序中，您可以查看`req.path`调用了哪个路由。

# css - jQuery Mobile 不对动态复选框应用样式并且无法单击

> ID：15383531
> 
> 赞同：2
> 
> 时间：2013-03-13T11:06:16.617
> 
> 标签：css, json, jquery-mobile, checkbox

我正在尝试刷新在菜单选项卡页脚处单击时附加在字段集标记中的复选框的数量。第一次标签访问是可以的，但在那之后，所有的复选框都不能再被选中了。我已经多次修改我的代码，但它不起作用。有时可以检查它们但没有应用样式。有时它们不能被检查但应用了样式。

我已经尝试过`.controlgroup('refresh');`，`.checkboxradio("refresh");`但它们都没有工作。我看过大多数类似的问题，但它们并没有帮助我解决这个问题。可能是我把代码放错地方了吗？

对于`.checkboxradio("refresh");`控制台，请始终记录此错误。在初始化之前不能调用 checkboxradio 上的方法；试图调用方法`'refresh'`

这是我原来的 HTML 和 JS

```
<div data-role="content" data-theme="a">
     <div id='delete_wrapper'>
          <a href="#" data-role="button" id='deleteButton'>Delete</a>
          <a href="#" data-role="button" id='deleteAllButton'>Delete All</a>
     </div>
     <fieldset data-role="controlgroup" id='checkboxes_wrapper2'>

     </fieldset>
 </div> 
```

这是我的 JS

```
runfirstDelete = true;
$('.delete_tab').click(function(){
$("#checkboxes_wrapper2").children().remove();
    var dataIndex;
    var dataName;
    for(var i in localStorage)
    {   
        dataIndex = JSON.parse(localStorage[i]).index;
        dataName = JSON.parse(localStorage[i]).name;

        if(runfirstDelete){ // This for 1st time visit, It's working okay.
            $("#checkboxes_wrapper2").append('<input type="checkbox" name="'+dataIndex+'" id="checkbox'+dataIndex+'" value="'+dataIndex+'"/><label for="checkbox'+dataIndex+'">'+dataName+'</label>');
        }
        else{ //if not, trying to insert embedded style in element
            $('#checkboxes_wrapper2').append('<div class="ui-checkbox"><input type="checkbox" value="'+dataIndex+'" name="'+dataIndex+'" id="checkbox'+dataIndex+'"><label for="checkbox'+dataIndex+'" data-corners="true" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="checkbox-off" data-theme="a" data-mini="false" class="ui-checkbox-off ui-btn ui-btn-up-a ui-btn-corner-all ui-fullsize ui-btn-icon-left ui-btn-up-a"><span class="ui-btn-inner"><span class="ui-btn-text">'+dataName+'</span><span class="ui-icon ui-icon-checkbox-off ui-icon-shadow">&nbsp;</span></span></label></div>');
        }
    }
    runfirstDelete = false; //Then indicate that it's not 1st click on tab
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:32:25.487

由于您正在添加新元素，因此不会有 jQuery Mobile 小部件来扩充它们，因此尝试调用它们的`refresh()`方法确实会失败。

告诉 jQuery Mobile “赶上”新标记的一种简单方法是`create`在容器元素上触发事件：

```
$("#checkboxes_wrapper2").trigger("create"); 
```

# paypal - 贝宝访问和权限 API..？

> ID：15383535
> 
> 赞同：0
> 
> 时间：2013-03-13T11:06:20.463
> 
> 标签：paypal

我对使用 PayPal Access 有点困惑。我知道我可以使用它来允许用户创建帐户或登录到我的站点/应用程序，但仅此一项就可以让我代表他们进行 API 调用，还是我仍然需要 Permissions API？

例如，我将构建一个简单的应用程序，允许用户根据订单/授权取消或捕获。我想使用 PayPal Access 让用户非常轻松地注册这个应用程序，但是我是否必须使用 Permissions API 再次通过 PayPal 登录流程向他们发送，或者它是如何工作的？

任何有关这方面的信息将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:59:06.673

不幸的是，这是目前不可用的东西。您必须通过 Permissions API 流发送买家。

# ios - JAVAPNS setAllowYouTube,setAllowCamera 问题

> ID：15383544
> 
> 赞同：0
> 
> 时间：2013-03-13T11:06:45.967
> 
> 标签：ios, mdm

嗨，我正在为 IOS MobileDeviceManagament 使用 JavaPNS。到现在为止的步骤 1）我在 iPad 上安装了 mobileconfig 文件。2）我在Windows系统上设置JavaPNS项目。3)我可以使用 Push.alert(...),Push.Sound(...),Push.Badge() 发送警报、声音和徽章 4)我的意图是禁用相机。使用以下代码为了它。

RestrictionsPayload rsp= new RestrictionsPayload(1, "raja", "com25.restrictions", "allowYouTube") ; 上面的类提供了一些功能，比如启用相机、youtube..等。所以我正在使用这个类。rsp.setAllowCamera(false); rsp.setAllowYouTube(false); 我将此方法添加到 rsp 对象。Push.payload(rsp,"PushNotification.p12", "aadmin123(", false, "36........6");

使用上述语句，我将 rsp 对象发送到 IOS 设备。

这里 RestrictionsPayload 类用于启用相机和 youtube。这两种方法用于启用相机和 youtube。服务器日志未显示任何错误。

谁能指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:46:57.950

两个重要说明：

a) 默认情况下，您只能**推送**声音、包和警报。如果您没有 MDM，则无法推送配置文件。

b) 要通过无线方式在您的设备上安装配置文件，您必须执行以下两项操作之一 - 将浏览器指向您的配置文件并手动接受它 - 首先安装 MDM 配置文件，这将允许您将新的配置文件推送到设备。

根据您的描述，您缺少 MDM 配置文件。您是否安装并正确配置？

# iphone - 4英寸启动图像视网膜在iphone4启动图像中不起作用

> ID：15383546
> 
> 赞同：1
> 
> 时间：2013-03-13T11:06:50.773
> 
> 标签：iphone, xcode, ios5, ios-simulator, retina-display

我用于`Default-568h@2x.png`iphone5屏幕。但在 xcode4.2 启动图像在 iphone5 模拟器中工作正常。当我使用这个启动图像时，它在 iphone5 中运行良好。但在 iphone4 启动图像正在拉伸。我用过`autoresizingMask`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:15:40.910

确保放置了 Default@2x.png、Default.png 和 Default-568h@2x.png

还要确保您在 xcode 摘要页面中放置了相同的内容。

![在此处输入图像描述](../Images/65d4a452150ab25e8af322b300336621.png)

# c++ - 在 for 循环中声明向量操作

> ID：15383549
> 
> 赞同：0
> 
> 时间：2013-03-13T11:06:56.180
> 
> 标签：c++, for-loop, vector

考虑到这段代码：

```
vector<double> student_grades(20);

for (vector<double>::size_type i = 0; i < student_grades.size(); i++)
{
    cout << i << endl;
} 
```

`i`以这种方式声明而不是 just到底有什么不同`int i = 0`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:11:21.460

> 以这种方式声明 i 而不是仅仅声明 int i = 0 到底有什么不同？

它确保使用正确的类型 - 您假设它`vector<T>::size_type`始终与 相同`int`，但这种假设是不正确的。根据实现，它也可能是`unsigned int`,或.`long``unsigned long``size_t`

通过使用`vector<T>::size_type`，您的代码在不同的实现中保持可移植性。

另请参见[C++ 中的 vector<int>::size_type](https://stackoverflow.com/questions/4849632/c-vectorintsize-type)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:14:09.173

`size_type`是向量类中的 typedef，它使`vector`类有机会决定使用什么类型进行索引。`int`具有 2^31 的最大值（通常，但不能保证 - 我认为保证至少为 32767）。由于有时我们需要大于 20 亿个项目的向量 [诚然不是那么频繁，我怀疑]，因此由类本身指定类型很有用。

这种类型保证覆盖`vector`实现本身可以处理的范围。它不会太大[如果你选择`long long`在 32 位系统上使用，它会比你需要的大]，也不会太小。当然，如果你知道你只会有 10 件物品，那可能没关系。

It is also almost always a unsigned type. In some cases, that makes the indexing of arrays more efficient, which also helps performance a tiny bit.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:12:29.097

`vector<T>::size_type`是 的`static`成员`std::vector`。我不知道为什么有人会使用它，因为它可能会导致混乱，我猜。看[这里](https://stackoverflow.com/questions/4849632/c-vectorintsize-type)，他已经在 SO 上回答了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:12:56.830

> size_type 是类型向量的（静态）成员类型。通常，它是 std::size_t 的 typedef，它本身通常是 unsigned int 或 unsigned long long 的 typedef。

[链接到这个问题](https://stackoverflow.com/questions/4849632/c-vectorintsize-type)

> 标准容器将 size_type 定义为 Allocator::size_type 的 typedef（Allocator 是一个模板参数），对于 std::allocator，它被定义为 size_t。

[链接到这个问题](https://stackoverflow.com/questions/918567/size-t-vs-containersize-type)

# sql - 更新如何工作？

> ID：15383550
> 
> 赞同：3
> 
> 时间：2013-03-13T11:07:00.193
> 
> 标签：sql, sql-server, tsql

一段时间以来，我一直在研究存储过程。最近我一直想知道 UPDATE 究竟是如何工作的。

我有一个 while 循环，在其中我会一一更新表中的某些行，直到所有相关行都已更新。

我的同事建议我删除 while 循环，而只使用一个 UPDATE 语句。

但是，我不知道这是否可能？我不知道每次执行存储过程时会更新哪些行。

我有一个表变量，其中包含所有需要更新的 ID 的列表，并将其用作标识需要更新的行的键。我可以在不使用 while 循环的情况下同时更新所有行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:16:47.457

您的同事建议的方法称为基于集合的方法。

与其使用while循环或逐行处理，不如使用基于集合的方法来完成，这在所有方面都更好，无论是性能还是维护。

正如建议的那样，您可以使用 IN 子句或 Inner Join 来更新表，因为您确实有唯一值来更新相应的表。

```
UPDATE table_to_update 
SET whatever_you_want_to_set 
From temptable 
inner join temptable on temptable.key = table_to_update.key 
```

我希望这对你有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:14:45.833

您的同事是对的，因为多个查询最终可能会减慢您的数据库速度。大查询不是问题。我建议您按照这篇文章中的说明进行操作，它很好地展示了 UPDATE 命令的强大功能：[http ://www.karlrixon.co.uk/writing/update-multiple-rows-with-different-values-and-a -single-sql-query/](http://www.karlrixon.co.uk/writing/update-multiple-rows-with-different-values-and-a-single-sql-query/)。

当然，在 PHP 中编写单个查询会使您更容易出错。我建议您只让 PHP 输出您的查询，然后您可以将整个内容直接检查到 MySQL（或您使用的任何其他内容）中。当然，不要为此使用实时数据库；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:11:22.427

是的。

我之前做过的一件事是将 a`join`与我的更新一起使用。我知道这听起来很奇怪，但它确实有效。

您还可以构建`in`子句或`exists`子选择。

子句的危险之一`in`是您使用的值列表是有限的。过去我遇到过一个问题，我的 SQL 语句太长而无法执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T11:12:24.170

是的你可以。有不同的方法可以做到这一点，其中之一是

```
UPDATE table_to_update 
    SET whatever_you_want_to_set 
    WHERE table_id IN (SELECT id FROM @tableVariable); 
```

你的同事说得对——一般来说，单个大 UPDATE 语句的执行速度比单独的小 UPDATE 快得多*。*

# ios - 如何设置应用程序/vnd.apple.pkpass 的 MIME 类型以通过链接或电子邮件共享传递

> ID：15383552
> 
> 赞同：13
> 
> 时间：2013-03-13T11:07:04.450
> 
> 标签：ios, mime-types, passbook

我刚刚创建了一个应用程序和一个通行证，因此我可以将通行证添加到 iPod 中的 PassBook，但我无法通过电子邮件或来自 Web 服务器的链接共享通行证。从我从 Apple 阅读的文档中，我需要将 MIME 类型添加为`application/vnd.apple.pkpass`. 但是，我不清楚我应该做什么步骤。我不知道如何使用 MIME 类型。

我应该如何添加此 MIME 类型以使用来自我的 Web 服务的传递？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T11:57:07.477

**阿帕奇**

将以下行添加到其中一个：

*   在`.htaccess`为您的 .pkpass 提供服务的目录中，或
*   到`mime.types`文件，或
*   到您的 appache`httpd.conf`或 virtuatl 服务器`.conf`文件

然后重新启动 Apache（如果添加到，则不需要`.htaccess`）

```
AddType application/vnd.apple.pkpass    pkpass 
```

* * *

**nginx**

将以下行添加到您的`mime.types`文件中并重新启动 nginx

```
application/vnd.apple.pkpass    pkpass; 
```

* * *

**IIS**

1.  打开 IIS 管理器并导航到要管理的级别。
2.  在功能视图中，双击 MIME 类型。
3.  在“操作”窗格中，单击“添加”。
4.  在添加 MIME 类型`.pkpass`
5.  `application.vnd.pkpass`在 MIME 文本框中键入n
6.  点击确定
7.  重新启动 IIS

* * *

如果您通过脚本提供文件并且无法编辑您的网络服务器配置，您可以在发送任何内容之前添加以下行：

**PHP**

```
header('Content-Type: application/vnd.apple.pkpass'); 
```

**C＃**

```
WebClient client = new WebClient();
client.Headers.Add("Content-Type", "application/vnd.apple.pkpass"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:45:23.143

对于纯 PHP 解决方案，将 .pkpass 包添加到服务器，然后创建以下文件并将此文件命名为 pass.php。

```
<?php   
$pkpass_file = '/path/to/your/.pkpass/file/GenericMemberCard.pkpass';

header("Pragma: no-cache");
header("Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0");
header("Content-Type: application/vnd.apple.pkpass");
header('Content-Disposition: attachment; filename="pass.pkpass"');
clearstatcache();
$filesize = filesize($pkpass_file);
if ($filesize)
    header("Content-Length: ". $filesize);
header('Content-Transfer-Encoding: binary');
if (filemtime($pkpass_file)) {
    date_default_timezone_set("UTC");
    header('Last-Modified: ' . date("D, d M Y H:i:s", filemtime($pkpass_file)) . ' GMT');
}
flush();
readfile($pkpass_file); 
```

然后创建第二个文件链接到您在上面创建的文件。

```
<a href="pass.php">Click to download your pass</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-20T07:25:57.347

通过 Windows 10 IIS

1.  打开 IIS 管理器并导航到要管理的级别。
2.  在功能视图中，双击 MIME 类型。
3.  在“操作”窗格中，单击“添加”。
4.  在添加 MIME 类型`.pkpass`
5.  `application.vnd.pkpass`在 MIME 文本框中键入n
6.  点击确定
7.  重新启动 IIS

# asp.net - 在新选项卡中打开一个页面并复制页面文本属性 on_completed

> ID：15383554
> 
> 赞同：1
> 
> 时间：2013-03-13T11:07:04.917
> 
> 标签：asp.net, .net

我之前使用浏览器控件使用 vb.net 完成了此操作，on_completed 我可以复制页面上的文本而不是 html 但我不知道该怎么做，因为我已经在浏览器上并且不知道是否可以打开迷你浏览器，然后复制页面上的文本。我需要打开一个带有 url 的页面并确认 API 的结果，然后在我的页面上继续

# ios - 如何从 superview / superviewcontroller iOS 请求更多空间

> ID：15383555
> 
> 赞同：2
> 
> 时间：2013-03-13T11:07:05.383
> 
> 标签：ios, uiview, xamarin.ios, space

我最近开始开发一个带有单点触控的 iOS 应用程序。我的问题是关于布局过程。目前我所有的超级视图决定子视图获得多少空间。

```
override void LayoutSubviews()
{
    this.subview1.Frame = new RectangleF(new PointF(0,0), new SizeF(10, 10));
    this.subview2.Frame = new RectangleF(new PointF(0, 15), new SizeF(10, 10));
} 
```

但现在我试图显示一个`UITableView`高度取决于内容。那么告诉 Superview 我需要特定高度的正确方法是什么？

我在弹出窗口中显示 a 时遇到了同样的问题`UITableView`。UIPopoverController 接受另一个 UIViewController 并将其显示在 Popover 中。`UIPopoverController`告诉我需要特定尺寸的适当方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:48:47.343

感谢所有回复，尽管他们没有完全解决我的问题。但现在我想我有一个解决方案。

iOS 本身不支持自下而上的布局过程。所以层次结构顶部的元素应该触发布局过程并询问它的子视图它想要多大。因此，如果新数据来自您的业务模型，ViewController 首先必须处理它，然后将其推送到呈现数据的 tableView。之后，他触发布局过程并询问 tableView 它必须有多大才能在不滚动的情况下呈现所有数据（只需通过`ContentSize`属性获得所需的大小）。

我也不知道的是，有一个特殊的属性可以用于将视图控制器显示在 Popover 中所需的大小`ContentSizeForViewInPopover`。iOS 中集成了一种机制，您可以在其中监听对属性所做的更改。PopoverController 侦听对此属性所做的更改并自动调整自己的大小以适应此 Size。因此，您在 ContentViewController 中所要做的就是设置`ContentSizeForViewInPopover`属性的值，然后 PopoverController 会自动调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:10:07.217

这应该不会太难：

*   将父视图/弹出框实例传递给您的`UITableViewSource`，这可以通过其构造函数、公共属性或字段等。
*   当您需要在表格源中修改父控件的大小形式时，您应该有权访问其`Frame`或`ContentSize`属性来执行此操作

这能解决您的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:11:29.280

在 UITableView 的情况下，您应该覆盖 UITableViewSource 的 GetHeightForRow 方法。此方法在渲染之前为每个单元格运行并返回其高度。

因此，您可以直接根据单元格底层数据源或单元格视图计算高度（您可以通过 NSpath 属性从表中引用它）

# sql - 如何从 MSSQL 中的许多间隔值中获取第一条和最后一条记录

> ID：15383557
> 
> 赞同：0
> 
> 时间：2013-03-13T11:07:07.317
> 
> 标签：sql, sql-server, range, intervals, min

我需要为 MSSQL 创建一个查询，以仅获取 MSSQL 表中每个间隔的第一条和最后一条记录。例如我有下表

## 编号 | label_id

1 | A1

2 | A2

3 | A3

4 | A4

5 | A10

6 | A11

7 | A13

结果必须显示类似

## label_id_start | label_id_start | 数数

```
A1         |       A4          |   4
A10        |       A11         |   2
A13        |       A13         |   1 
```

我一直在寻找解决方案，但到目前为止我找不到任何东西，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:58:22.647

这样的解决方案可以是一种选择。但请注意 WITH 构造具有递归深度的限制。最大递归大小可以增加 200。`OPTION (MAXRECURSION 200)`

```
DECLARE @MyTable TABLE (Iteration INT, Label VARCHAR(50))

INSERT INTO @MyTable(Iteration, Label)
VALUES
    (1, 'A1'),
    (2, 'A2'),
    (3, 'A3'),
    (4, 'A4'),
    (5, 'A10'),
    (6, 'A11'),
    (7, 'A13')

DECLARE @RefinedTable TABLE (LabelId INT, Label VARCHAR(50))

INSERT INTO @RefinedTable(LabelId, Label)
SELECT CAST(REPLACE(Label, 'A', '') AS INT) AS LabelNo, Label 
FROM @MyTable

DECLARE @Queue TABLE (Parent VARCHAR(50), Child VARCHAR(50))

INSERT INTO @Queue(Parent, Child)
SELECT t1.Label, t2.Label
FROM @RefinedTable t1
LEFT OUTER JOIN @RefinedTable t2
    ON t1.LabelId + 1 = t2.LabelId;

WITH Checker(Parent, Child, LastItem, Depth)
AS
(
    SELECT Parent, CAST(NULL AS VARCHAR(50)), Parent, 0  
    FROM @Queue
    WHERE Child IS NULL
    UNION ALL
    SELECT q.Parent, q.Child, c.LastItem, c.Depth + 1
    FROM @Queue q
    INNER JOIN Checker c
        ON c.Parent = q.Child 
)
SELECT 
    'A' + CAST(CAST(REPLACE(LastItem, 'A', '') AS INT) - MAX(Depth) AS VARCHAR) StartLabel,
    LastItem EndLabel,
    COUNT(*) AS [Count] 
FROM Checker
GROUP BY LastItem
ORDER BY 1 
```

# node.js - 是否有任何 Uglify Express 中间件？

> ID：15383559
> 
> 赞同：1
> 
> 时间：2013-03-13T11:07:18.197
> 
> 标签：node.js, express, uglifyjs, uglifyjs2

我正在尝试为 Uglify 寻找一个 Express 中间件，你能推荐一个吗？似乎[uglify-js-middleware](https://github.com/JakeWharton/uglify-js-middleware)正在尝试将其解决为 Connect，但似乎不再维护它，当我尝试它时，它并没有使用 Express。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:08:50.247

你应该试试这些包：

1.  [表达丑化](https://npmjs.org/package/express-uglify)
2.  [js-中间件](https://npmjs.org/package/js-middleware)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T12:47:17.287

我正在使用基于少中间件分叉的中间件。与其他一些选项相比，我更喜欢这种方法和设置。

[902 Labs - GitHub 上的 express-uglify-middleware](https://github.com/902Labs/express-uglify-middleware)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-21T04:46:03.063

我想在这些日子里我们使用

[https://github.com/breeswish/express-minify](https://github.com/breeswish/express-minify)

这确实会自动丑化。但要注意...它仍然不支持 ES6

# ffmpeg - 保持 FFMPEG 运行并等待新的图像文件进行编码和流式传输

> ID：15383560
> 
> 赞同：3
> 
> 时间：2013-03-13T11:07:19.447
> 
> 标签：ffmpeg

我正在将 TIFF 图像转换为 HTTP Live Stream。图像由相机连续流式传输并保存到硬盘驱动器。然后 FFMPEG 将文件转换为 MPEG 传输流 (.ts) 并对它们进行分段。但是，一旦 FFMPEG 用完当前保存到磁盘的图像，它就会结束转换。有没有办法让 FFMPEG 保持运行并等待新图像保存到磁盘并进行转换？

这就是我正在使用的：

```
ffmpeg -f image2 -r 10/1 -i MMseries_%3d.jpg -c:v libx264 -r 30 -b:v 256000 -flags 
    -global_header -map 0 -f segment -segment_time 4 -segment_list_size 0 
    -segment_list demo_list.m3u8 -segment_format mpegts video_seg_%05d.ts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-28T04:59:36.663

尝试将 ffmpeg 限制为以源帧速率读取，即

```
ffmpeg -re -f image2 -framerate 10 -i MMseries_%3d.jpg -c:v libx264 -r 30 
       -b:v 256000 -flags +global_header -map 0 -f segment -segment_time 4 
       -segment_list_size 0 -segment_list demo_list.m3u8 -segment_format mpegts
        video_seg_%05d.ts 
```

# ios - 无法从日期获取工作日

> ID：15383561
> 
> 赞同：0
> 
> 时间：2013-03-13T11:07:27.287
> 
> 标签：ios, objective-c, nsdate

我正在从 coredata 获取日期并尝试获取该日期的工作日。我尝试了以下代码，但它不起作用。

```
 NSDateFormatter *weekDayFormatter = [[NSDateFormatter alloc]init];
    [weekDayFormatter setDateFormat:@"EEEE"];
    NSDate *weekDay = [results valueForKey:@"date"];
    NSLog(@"%@",weekDay);//This log is working.
    NSString *weekDayString = [weekDayFormatter stringFromDate:weekDay];
    NSLog(@"%@",weekDayString); //This log is displaying null.
    NSLog(@"%@ is spent on %@",[results valueForKey:@"amount"],weekDayString); 
```

如果我使用`[NSDate date]`而不是`[results valueForKey:@"date"]`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:14:32.113

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *weekdayComponents =[gregorian components:NSWeekdayCalendarUnit fromDate:dateOfInterest];

NSInteger weekday = [weekdayComponents weekday];
// weekday 1 = Sunday for Gregorian calendar

[gregorian release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:12:39.690

尝试使用 a`NSCalendar`从`NSDateComponents`您的`NSDate`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:19:09.647

I think `[results valueForKey:@"date"]` gives NSString type object. Check it once. If it is true convert it to NSDate.

Case 1:

```
 NSDateFormatter *weekDayFormatter = [[NSDateFormatter alloc]init];
    [weekDayFormatter setDateFormat:@"EEEE"];
    NSDate *weekDay = @"2013-03-13 11:06:55 +0000";//here warning is there...
    NSLog(@"%@",weekDay);//This log is working.
    NSString *weekDayString = [weekDayFormatter stringFromDate:weekDay];
    NSLog(@"%@",weekDayString); //It gives NULL... 
```

In this case, answer is null.

Case 2:

```
NSDateFormatter *weekDayFormatter = [[NSDateFormatter alloc]init];
    [weekDayFormatter setDateFormat:@"EEEE"];
    NSDate *weekDay = [NSDate date];
    NSLog(@"%@",weekDay);//This log is working.
    NSString *weekDayString = [weekDayFormatter stringFromDate:weekDay];
    NSLog(@"%@",weekDayString); //It gives results... 
```

In this case, answer is yourResult.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:19:33.443

您必须使用从 [results valueforKey:@"date"] 收到的相同日期格式。此后，您尝试根据需要格式化日期。

```
NSDateFormatter *weekDayFormatter = [[NSDateFormatter alloc]init];
[weekDayFormatter setDateFormat:SAME FORMAT YOU RECEIVING];
NSDate *weekDay = [weekDayFormatter dateFromString:[results valueForKey@"date"]];   
NSLog(@"%@",weekDay);
[weekDayFormatter setDateFormat:@"EEEE"];
NSString *weekDayString = [weekDayFormatter stringFromDate:weekDay]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T11:26:13.843

```
// Your date as a string
NSString *yourDate = @"02-09-2011 20:54:18";    //  [results valueForKey:@"date"]

// Prepare an NSDateFormatter to convert to and from the string representation
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

// set format as your Date string (Eg. dd/MM/yyyy for 25/12/2012)
[dateFormatter setDateFormat:@"dd-MM-yyyy HH:mm:ss"];

// Parse the string representation of the date
NSDate *date = [dateFormatter dateFromString:yourDate];

NSDateFormatter* theDateFormatter = [[NSDateFormatter alloc] init];
[theDateFormatter setFormatterBehavior:NSDateFormatterBehavior10_4];
[theDateFormatter setDateFormat:@"EEEE"];
NSString *weekDay =  [theDateFormatter stringFromDate:date];
NSLog(@"%@",weekDay); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T12:32:09.790

```
NSDate *today = [NSDate date];

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *todayComponents = [gregorian components:NSWeekdayCalendarUnit fromDate:today];

NSLog(@"weekday = %d",[todayComponents weekday]); 
```

# opencv - 从投影映射回显示 OpenCV

> ID：15383564
> 
> 赞同：1
> 
> 时间：2013-03-13T11:07:34.967
> 
> 标签：opencv

我有一个系统，我在其中投影一组图像，然后使用相机读取投影的内容。当有人站在投影前面时，我需要知道他们站在投影的哪个部分。我检测人没有问题，我只需要想办法将相机中检测到的点映射回发送到投影仪的图像。

我尝试使用 findHomograhy（使用显示图像和投影图像的角），但生成的矩阵没有给出准确的结果。任何其他想法（或让 findHomography 工作的技巧）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:58:51.380

我猜从相机捕获的图像非常模糊、嘈杂和失真，我猜你会以某种方式检测/跟踪投影图像的角落。

要做的一件重要事情是校准您的相机以消除径向镜头失真，如果您还没有这样做： [http ://docs.opencv.org/doc/tutorials/calib3d/camera_calibration/camera_calibration.html](http://docs.opencv.org/doc/tutorials/calib3d/camera_calibration/camera_calibration.html)

投影仪可能确实也有径向失真，这也可以用您新校准的相机进行校准。我不知道你是否有运气找到现成的解决方案。您可能必须参与一些类似于相机校准的严重优化问题领域。

在上述所有问题都解决之后，您仍然遇到问题......，因为您捕获的图像模糊且嘈杂，您会在角落跟踪中出现错误。这意味着只有 4 个点，这些错误在结果透视扭曲中很明显。点对应的提取误差具有一定的概率分布。如果您假设它是正常的，在大多数情况下它是正常的，除了异常值，那么它只是意味着您的误差标准偏差太大。现在，大数定律向您保证，如果您增加样本数量，您将接近均值，在这种情况下是正确的投影。

我想说的是，你需要更多的点对应来对抗噪声或更精确地检测少数。如果您总是/通常在投影图像中有一些好的特征并且您愿意花费计算能力，您可以使用特征匹配： [http ://docs.opencv.org/doc/tutorials/features2d/feature_description/feature_description .html](http://docs.opencv.org/doc/tutorials/features2d/feature_description/feature_description.html)

# java - org.osgi.framework.BundleException：激活器 ..for bundle .. 无效

> ID：15383567
> 
> 赞同：1
> 
> 时间：2013-03-13T11:07:39.683
> 
> 标签：java, osgi

这个Bundle异常是因为一次又一次地改变工作空间而发生的吗？我以前正常运行的项目现在在运行时出现此异常。请帮帮我。我已经被这个问题困扰了2天。

```
 Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Project
Bundle-SymbolicName: com.spundhan.eboard.project; singleton:=true
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: com.spundhan.eboard.project.Activator
Bundle-Vendor: SPUNDHAN
Require-Bundle: org.eclipse.emf;bundle-version="2.6.0",
 org.eclipse.ui.console;bundle-version="3.5.100",
 org.jdom;bundle-version="1.1.1",
 org.eclipse.ui.navigator;bundle-version="3.5.101",
 org.eclipse.ui.navigator.resources;bundle-version="3.4.300",
 org.eclipse.ui.views.log;bundle-version="1.0.200",
 org.eclipse.ui.ide;bundle-version="3.7.0",
 org.eclipse.core.resources;bundle-version="3.7.101",
 org.eclipse.gef;bundle-version="3.7.2",
 org.eclipse.emf.ecore;bundle-version="2.7.0",
 org.eclipse.ui.views;bundle-version="3.6.0",
 org.eclipse.help;bundle-version="3.5.100",
 org.eclipse.help.ui;bundle-version="3.5.101",
 org.eclipse.ui.forms;bundle-version="3.5.101",
 org.eclipse.ui.intro.universal;bundle-version="3.2.500",
 org.eclipse.help.webapp;bundle-version="3.6.1",
 org.eclipse.ui.intro;bundle-version="3.4.100",
 org.eclipse.cdt.ui;bundle-version="5.2.2";resolution:=optional,
 com.spundhan.eboard.code;bundle-version="1.0.0",
 com.spundhan.eboard.emf;bundle-version="1.0.0",
 com.spundhan.eboard.gef;bundle-version="1.0.0"
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Bundle-ActivationPolicy: lazy
Import-Package: com.spundhan.eboard.gef.components.model,
 com.spundhan.eboard.gef.model,
 com.spundhan.eboard.gef.part,
 com.spundhan.eboard.model,
 org.eclipse.core.resources,
 org.eclipse.jface.text,
 org.eclipse.ui.console
Bundle-ClassPath: .,
 libs/com.spundhan.licensing-1.0.0.jar,
 libs/log4j-1.2.15.jar,
 libs/RXTXcomm.jar,
 libs/com.spundhan.eboard.db-1.0.0.jar,
 .,
 libs/bcpg-jdk15-143.jar,
 libs/bcprov-jdk15-143.jar 
```

**活化剂：**

```
package com.spundhan.eboard.project;

import org.eclipse.jface.resource.ImageDescriptor;
import org.eclipse.ui.plugin.AbstractUIPlugin;
import org.osgi.framework.BundleContext;

/**
 * The activator class controls the plug-in life cycle
 */
public class Activator extends AbstractUIPlugin {

    // The plug-in ID
    public static final String PLUGIN_ID = "com.spundhan.eboard.project"; //$NON-NLS-1$

    // The shared instance
    private static Activator plugin;

    /**
     * The constructor
     */
    public Activator() {
    }

    /*
     * (non-Javadoc)
     * @see org.eclipse.ui.plugin.AbstractUIPlugin#start(org.osgi.framework.BundleContext)
     */
    @Override
    public void start(BundleContext context) throws Exception {
        super.start(context);
        plugin = this;
    }

    /*
     * (non-Javadoc)
     * @see org.eclipse.ui.plugin.AbstractUIPlugin#stop(org.osgi.framework.BundleContext)
     */
    @Override
    public void stop(BundleContext context) throws Exception {
        plugin = null;
        super.stop(context);
    }

    /**
     * Returns the shared instance
     *
     * @return the shared instance
     */
    public static Activator getDefault() {
        return plugin;
    }

    /**
     * Returns an image descriptor for the image file at the given
     * plug-in relative path
     *
     * @param path the path
     * @return the image descriptor
     */
    public static ImageDescriptor getImageDescriptor(String path) {
        return imageDescriptorFromPlugin(PLUGIN_ID, path);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:38:26.067

这是*对我*有用的解决方案。每个错误都是不同的，但让我们看看你是否幸运。

打开清单并转到构建选项卡。在运行时配置中，如果没有出现，点击“添加库”，然后只写一个点“ **.** ”。然后，将**src/**添加到运行时文件夹。

希望这可以帮助。

# windows - 为什么 GetTickCount 和 timeGetTime 有不同的分辨率？

> ID：15383570
> 
> 赞同：6
> 
> 时间：2013-03-13T11:07:47.977
> 
> 标签：windows, timer, performancecounter, gettickcount

默认情况下，GetTickCount 和 timeGetTime 具有相同的分辨率 - 15.625ms，但我调用 timeBeginPeriod(1) 后，GetTickCount 仍然每 15.625 ms 更新一次，而 timeGetTime 确实每 1ms 更新一次，这是为什么呢？

在[等待计时器中的错误？](http://forum.sysinternals.com/topic16229.html)，作者提到：

![基于 RTC 的定时器](../Images/ef12619d57c0bbd8e455543db5083c92.png)

我想知道：为什么GetTickCount和timeGetTime来自同一个RTC，但有两种分辨率？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T10:38:08.890

实际上，您引用的表对于 QueryPerformanceCounter 是错误的。QPC（简称）是根据 3 个可能的时序源实现的，它们是 1：HPET，2：PM ACPI 定时器，3：RDTSC。该决定是根据条件、内核启动选项、BIOS 中的错误和芯片组提供的 ACPI 代码中的错误通过启发式方法做出的。所有这些错误都是在 Microsoft 实验室中基于每个硬件发现的。Linux 和 BSD 程序员必须自己找到困难，并且通常必须重写 ACPI 代码以解决问题。由于不同的原因，Linux 社区已经开始讨厌 RDTSC 以及 ACPI。但不管怎么说...

timeReadTime 与 GetTickCount 不同，因为根据文档指定 GetTickCount 的方式的稳定性，无法更改其行为。然而，在某些情况下，windows 需要获得更好的 Tick 分辨率以允许更好的 Timer 功能。（定时器与发送到应用程序 GetMessage 或 PeekMessage 函数的消息一起使用，然后在良好的回调中分支以处理定时器）这是声音/音频同步等多媒体所必需的。

显然，游戏或实时编程有时甚至需要更高的精度，并且不能使用计时器。相反，他们使用忙等待，或者他们只在一种情况下睡觉：通过调用 OpenGL 或 DirectX 进行后缓冲区/前缓冲区交换时的 VSync。视频驱动程序将根据来自屏幕本身的 VSync 信号唤醒等待线程。这是一个基于事件的睡眠，就像一个定时器，但不是基于定时器中断。

应该注意的是，现代内核具有动态滴答（tickless kernel，来自 windows 8 或 linux 2.6.18）。滴答中断的最细频率不能低于 1ms 以免阻塞，但没有上限。如果没有应用程序正在运行并发布计时事件，则机器可能会无限期地休眠，从而使 CPU 进入最深的休眠状态（英特尔增强速度步骤 C7 状态）。在这之后，下一个唤醒事件大部分时间是由于设备中断（主要是 USB）而发生的。（鼠标移动或其他东西）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T07:54:09.583

我认为 OP 在定时器、中断和定时器滴答之间感到困惑。

时间间隔是计时器滴答周期。这以 18.2 滴答/秒的速度硬连线到系统中。这永远不会因任何原因而变化，并且不基于系统 CPU 时钟（显然！）。

您可以向系统询问 2 个不同的内容：日期和时间 (GetTime) 或系统运行的时间量 (GetTickCount/GetTickCount64)。

如果您对系统的正常运行时间感兴趣，请使用 GetTickCount。根据我有限的理解，GetInterruptTime 仅返回实时中断期间花费的时间量（而不是运行应用程序或空闲所花费的时间）。

我不确定告诉新程序员不要再问“为什么？” 会帮助他们。是的，OP 没有看到或阅读提到的页面上的评论；但在这里提问不应该是只授予已经用尽所有其他途径（可能包括 C 的 Seeing Stones）的搜索者的特权。我们都在这里学习。停止告诉人们他们的问题是没有意义的，而不告诉他们为什么。没有理由不问。计时器可能会令人困惑！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-05T06:25:34.950

对于那些好奇为什么系统滴答声过去以 18.2Hz 运行的人，这里是解释：1981 年发布的原始 IBM PC 的时钟速度为 4.77MHz，并使用了英特尔 8253 可编程间隔计时器。定时器的预分频器为 4，系统定时器的值编程为 0，计数间隔为 65536。因此系统定时器频率 = (4770000 / 4) / 65536 = 18.2Hz 所有现代 PC 甚至仍然使用这种配置虽然时钟现在更高了，8253 现在已经过时了（但仍然在芯片组中实现）。

然而，现代操作系统（如 Windows 10 和 Linux）对这个计时器进行编程以生成 1000Hz 的系统滴答声，而不是旧的 18.2Hz。

# iphone - 分发证书和配置文件的连接

> ID：15383575
> 
> 赞同：1
> 
> 时间：2013-03-13T11:08:03.523
> 
> 标签：iphone, objective-c, ipad, in-house-distribution

我使用苹果企业许可证来构建我的内部 iPad 应用程序。目前通过门户创建的分发证书有效期为 3 年。但是通过门户创建的配置文件仅在一年内有效。在 Apple 网站上，它说“当您的分发证书过期时，该应用程序将无法启动。您的分发证书的有效期为三年，自颁发之日起，或直到您的企业开发人员计划会员资格过期，以先到者为准。”（按照[链接](http://help.apple.com/iosdeployment-apps/mac/1.1/#app43ad802c)）

它没有提到配置文件到期。目前我的分发证书将于 2015 年到期，配置文件将于 2013 年 11 月到期。我的问题是我的配置文件到期后会发生什么。配置文件过期后我的应用程序是否可以工作。或者我是否需要更新有效期为另一年的配置文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:19:01.073

我的理解是（通过与 Apple 工程师交谈），您将需要更新配置文件，使用该配置文件签署应用程序存档，并使用该更新的配置文件发布应用程序的新版本。我们进行了大量的企业开发，这是我每年必须为我们的每个应用程序处理一次的一个难题。幸运的是，我创建了一个内部结构，以便我们的用户收到新应用更新的通知，并且我们还有自己的内部“应用商店”应用来管理所有其他应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:12:21.833

1.  您将无法启动应用程序 -[链接](https://stackoverflow.com/a/4740428/1263701)
2.  更新您的个人资料 -[链接](https://stackoverflow.com/a/5763827/1263701)

# c# - 如何设置私人懒人 在 C# 中用于测试目的的反射？

> ID：15383577
> 
> 赞同：12
> 
> 时间：2013-03-13T11:08:07.857
> 
> 标签：c#, reflection, lazy-evaluation

# 问题描述

我们有一个相当大的系统，它曾经使用私有设置器将数据急切地加载到属性中。为了使用测试特定场景，我曾经使用私有设置器在这些属性中写入数据。

但是，由于系统变得越来越慢，并且正在加载不必要的东西，我们将某些东西更改为延迟加载，使用 Lazy 类。但是，现在我不再能够将数据写入这些属性，因此许多单元测试将不再运行。

## 我们曾经拥有的

### 测试对象：

```
public class ComplexClass
{
    public DateTime Date { get; private set; }

    public ComplexClass()
    {
        // Sample data, eager loading data into variable
        Date = DateTime.Now;
    }
    public string GetDay()
    {
        if (Date.Day == 1 && Date.Month == 1)
        {
            return "New year!";
        }
        return string.Empty;
    }
} 
```

### 测试的样子：

```
[Test]
public void TestNewyear()
{
    var complexClass = new ComplexClass();
    var newYear = new DateTime(2014, 1, 1);
    ReflectionHelper.SetProperty(complexClass, "Date", newYear);

    Assert.AreEqual("New year!", complexClass.GetDay());
} 
```

### 上面示例中使用的 ReflectionHelper 的实现。

```
public static class ReflectionHelper
{
    public static void SetProperty(object instance, string properyName, object value)
    {
        var type = instance.GetType();

        var propertyInfo = type.GetProperty(properyName);
        propertyInfo.SetValue(instance, Convert.ChangeType(value, propertyInfo.PropertyType), null);
    }
} 
```

## 我们现在拥有的

### 测试对象：

```
public class ComplexClass
{
    private readonly Lazy<DateTime> _date;

    public DateTime Date
    {
        get
        {
            return _date.Value;
        }
    }

    public ComplexClass()
    {
        // Sample data, lazy loading data into variable
        _date = new Lazy<DateTime>(() => DateTime.Now);
    }
    public string GetDay()
    {
        if (Date.Day == 1 && Date.Month == 1)
        {
            return "New year!";
        }
        return string.Empty;
    }
} 
```

# 尝试解决它

现在请记住，这只是一个示例。从急切加载到延迟加载的代码更改在很多不同的地方都发生了变化。因为我们不想更改所有测试的代码，所以最好的选择似乎是更改中间人：`ReflectionHelper`

### 这是目前的状态`ReflectionHelper`

顺便说一句，我想为这段奇怪的代码提前道歉

```
public static class ReflectionHelper
{
    public static void SetProperty(object instance, string properyName, object value)
    {
        var type = instance.GetType();

        try
        {
            var propertyInfo = type.GetProperty(properyName);
            propertyInfo.SetValue(instance, Convert.ChangeType(value, propertyInfo.PropertyType), null);
        }
        catch (ArgumentException e)
        {
            if (e.Message == "Property set method not found.")
            {
                // it does not have a setter. Maybe it has a backing field
                var fieldName = PropertyToField(properyName);
                var field = type.GetField(fieldName, BindingFlags.NonPublic | BindingFlags.Instance);

                // Create a new lazy at runtime, of the type value.GetType(), for comparing reasons
                var lazyGeneric = typeof(Lazy<>);
                var lazyGenericOfType = lazyGeneric.MakeGenericType(value.GetType());

                // If the field is indeed a lazy, we can attempt to set the lazy
                if (field.FieldType == lazyGenericOfType)
                {
                    var lazyInstance = Activator.CreateInstance(lazyGenericOfType);
                    var lazyValuefield = lazyGenericOfType.GetField("m_boxed", BindingFlags.NonPublic | BindingFlags.Instance);
                    lazyValuefield.SetValue(lazyInstance, Convert.ChangeType(value, lazyValuefield.FieldType));

                    field.SetValue(instance, Convert.ChangeType(lazyInstance, lazyValuefield.FieldType));
                }

                field.SetValue(instance, Convert.ChangeType(value, field.FieldType));
            }
        }
    }

    private static string PropertyToField(string propertyName)
    {
        return "_" + Char.ToLowerInvariant(propertyName[0]) + propertyName.Substring(1);
    }
} 
```

尝试执行此操作时遇到的第一个问题是，我无法在运行时创建未知类型的委托，因此我尝试通过设置的内部值来解决这个问题`Lazy<T>`。

在设置了lazy的内部值之后，我可以看到它确实被设置了。但是我遇到的问题是，我发现 a 的内部字段`Lazy<T>`不是 a `<T>`，而是实际上 a `Lazy<T>.Boxed`。`Lazy<T>.Boxed`是一个懒惰的内部类，所以我必须以某种方式实例化它......

我意识到也许我从错误的方向来解决这个问题，因为解决方案变得越来越复杂，我怀疑很多人会理解“ReflectionHelper”的奇怪元编程。

解决这个问题的最佳方法是什么？我可以解决这个问题`ReflectionHelper`还是我必须通过每个单元测试并修改它们？

## 得到答案后编辑

我从[dasblinkenlight](https://stackoverflow.com/users/335858/dasblinkenlight)得到了使 SetProperty 通用的答案。我改成代码，这是最终结果，以防其他人需要它

# 解决方案

```
public static class ReflectionHelper
{
    public static void SetProperty<T>(object instance, string properyName, T value)
    {
        var type = instance.GetType();

        var propertyInfo = type.GetProperty(properyName);
        var accessors = propertyInfo.GetAccessors(true);

        // There is a setter, lets use that
        if (accessors.Any(x => x.Name.StartsWith("set_")))
        {
            propertyInfo.SetValue(instance, Convert.ChangeType(value, propertyInfo.PropertyType), null);
        }
        else
        {
            // Try to find the backing field
            var fieldName = PropertyToField(properyName);
            var fieldInfo = type.GetField(fieldName, BindingFlags.NonPublic | BindingFlags.Instance);

            // Cant find a field
            if (fieldInfo == null)
            {
                throw new ArgumentException("Cannot find anything to set.");
            }

            // Its a normal backing field
            if (fieldInfo.FieldType == typeof(T))
            {
                throw new NotImplementedException();
            } 

            // if its a field of type lazy
            if (fieldInfo.FieldType == typeof(Lazy<T>))
            {
                var lazyValue = new Lazy<T>(() => value);
                fieldInfo.SetValue(instance, lazyValue);
            }
            else
            {
                throw new NotImplementedException();
            }
        }
    }

    private static string PropertyToField(string propertyName)
    {
        return "_" + Char.ToLowerInvariant(propertyName[0]) + propertyName.Substring(1);
    }
} 
```

### 突破性的变化

如果没有明确地给它一个类型，将变量设置为 null 不再起作用。

```
ReflectionHelper.SetProperty(instance, "parameter", null); 
```

必须成为

```
ReflectionHelper.SetProperty<object>(instance, "parameter", null); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:28:56.630

尝试制作`SetProperty`一个通用方法：

```
public static void SetProperty<T>(object instance, string properyName, T value) 
```

这应该让您捕获`value`. 使用`T`到位后，您可以`Lazy<T>`使用常规 C# 语法构造对象，而不是通过反射：

```
...
Lazy<T> lazyValue = new Lazy<T>(() => value);
... 
```

现在您可以通过调用将其写入`lazyValue`属性/字段`setValue`。

对于许多（如果不是全部）单元测试来说，这应该足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:10:34.197

为了使您的类可单元测试，并促进关注点分离，请考虑使用依赖注入：

### 你应该拥有的：

```
public class ComplexClass
{
    private readonly Lazy<DateTime> _date;

    public DateTime Date
    {
        get
        {
            return _date.Value;
        }
    }

    public ComplexClass(Lazy<DateTime> date)
    {
        // Allow your DI framework to determine where dates come from.
        // This separates the concern of date resolution from this class,
        // whose responsibility is mostly around determining information
        // based on this date.
        _date = date;
    }
    public string GetDay()
    {
        if (Date.Day == 1 && Date.Month == 1)
        {
            return "New year!";
        }
        return string.Empty;
    }
} 
```

### 测试应该是什么样子：

```
[Test]
public void TestNewyear()
{
    var newYear = new DateTime(2014, 1, 1);
    var complexClass = new ComplexClass(new Lazy<DateTime>(() => newYear));

    Assert.AreEqual("New year!", complexClass.GetDay());
} 
```

# apache - 500 内部服务器错误 .htaccess: 没有匹配 部分，引用：http://localhost/

> ID：15383578
> 
> 赞同：0
> 
> 时间：2013-03-13T11:08:08.360
> 
> 标签：apache

嗨，我的 Apache 错误日志文件出现以下错误……而 500 内部服务器错误帮助我解决了这个问题……

```
[Wed Mar 13 16:33:13 2013] [alert] [client 127.0.0.1] C:/wamp/www/phpwork/.htaccess: </files> without matching <files> section, referer: http://localhost/ 
```

我的 .htaccess 文件是

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule (.*\.(png|gif|jpg|jpeg|js|css|swf))$ webroot/img_handler.php?arg=$1 [L] 
   RewriteRule    ^$ webroot/    [L]
   RewriteRule    (.*) webroot/$1 [L]
</IfModule>

# disable directory browsing -IMPORTANT, do NOT remove.
Options -Indexes

# protect the htaccess file
<files .htaccess>
order allow,deny
deny from all
</files>

# disable the server signature
ServerSignature Off

# protect php.ini
#<files *.ini>
order allow,deny
deny from all
</files> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:00:00.350

```
# protect php.ini
#<files *.ini>
order allow,deny
deny from all
</files> 
```

在这里你评论了“文件”指令

请删除评论以使您的文件部分与此相同：

```
<files *.ini>
order allow,deny
deny from all
</files> 
```

# openssl - 证书请求的相对专有名称和属性

> ID：15383580
> 
> 赞同：3
> 
> 时间：2013-03-13T11:08:15.043
> 
> 标签：openssl, request, certificate

在一个项目中，我在 openssl 函数的帮助下创建了证书请求。请求创建过程包括以下步骤：

*   使用 openssl 函数“X509_NAME_add_entry_by_txt”构造“主题专有名称”；
*   用“X509_REQ_add1_attr_by_txt”添加“属性”；
*   使用“X509V3_EXT_conf”添加“扩展属性”；

问题是我不确切知道什么“相对专有名称”和“属性”值是可能的，以及 openssl 支持什么。是否有它们可能值的完整列表？有没有关于 openssl 支持哪些的信息？

# spring-mvc - Jboss As 7.1 ModuleNotFoundException: 模块 com.oracle:main 未找到

> ID：15383585
> 
> 赞同：5
> 
> 时间：2013-03-13T11:08:33.247
> 
> 标签：spring-mvc, oracle11g, jboss7.x

我正在将war文件部署到JBoss As 7.1，同样的war文件在tomcat上正常运行，但在jboss上它给出了流动异常。

```
16:20:50,906 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.module.service."deployment.VSCAS.war".main: org.jboss.msc.service.StartException in service jboss.module.service."deployment.VSCAS.war".main: Failed to load module: deployment.VSCAS.war:main
at  org.jboss.as.server.moduleservice.ModuleLoadService.start(ModuleLoadService.java:91) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0]
 Caused by: org.jboss.modules.ModuleNotFoundException: Module com.oracle:main is not   found in local module loader @40dd550c (roots: E:\server\jboss-as-7.1.1.vsc\jboss-as-7.1.1.Final\modules)
at org.jboss.modules.LocalModuleLoader.findModule(LocalModuleLoader.java:126)
at org.jboss.modules.ModuleLoader.loadModuleLocal(ModuleLoader.java:275)
at org.jboss.modules.ModuleLoader.preloadModule(ModuleLoader.java:222)
at org.jboss.modules.LocalModuleLoader.preloadModule(LocalModuleLoader.java:94)
at org.jboss.modules.Module.addPaths(Module.java:841)
at org.jboss.modules.Module.link(Module.java:1181)
at org.jboss.modules.Module.relinkIfNecessary(Module.java:1207)
at org.jboss.modules.ModuleLoader.loadModule(ModuleLoader.java:208)
at org.jboss.as.server.moduleservice.ModuleLoadService.start(ModuleLoadService.java:70) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
... 5 more 
```

我已经给 jboss-deployment-structure.xml 文件提供了流动的内容以避免错误。

```
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.0">
<deployment>
<exclusions>
   <module name="org.hibernate"/>
    <module name="com.oracle" />
</exclusions>
 </deployment>
</jboss-deployment-structure> 
```

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-09-01T20:50:30.413

通过遵循简短的答案，我完成了以下步骤：

1-在 EAP-6.4.0\modules\system\layers\base\com\ 下创建目录结构 **oracle\ojdbc6\main**

2-下载并复制**ojdbc6-11.2.0.3.jar**并将其放在**主**目录下

3-在**主**目录中创建**module.xml**文件，内容如下

 **```
<?xml version="1.0" encoding="UTF-8"?>

<module xmlns="urn:jboss:module:1.1" name="com.oracle.ojdbc6">
    <properties>
        <property name="jboss.api" value="private"/>
    </properties>

    <resources>
        <resource-root path="ojdbc6-11.2.0.3.jar"/>
        <!-- Insert resources here -->
    </resources>

    <dependencies>
    </dependencies>
</module> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-21T08:51:58.200

此错误意味着您的安装缺少模块 com.oracle。默认情况下不包含此模块。要解决此问题，您需要使用所需的 JAR 文件和相应的 module.xml 创建 com.oracle 模块。放置它/modules/system/layers/base

希望这对您和其他人有所帮助。

奥利弗**

# c++ - GCC 4.6 和库链接

> ID：15383595
> 
> 赞同：0
> 
> 时间：2013-03-13T11:08:57.853
> 
> 标签：c++, linux, qt, gcc, compiler-construction

这有点学术性，因为我已经解决了它（我认为！），但好奇是否有人知道它*为什么*会发生。

我正在开发一个已经开发了几年的项目，我们有几个我们依赖的库，例如：

```
myencryption.so
|
 ----- #include <openssl/sha.h>

mymainapp
|
----- LIBS += -lmyencryption -lssl -lcrypto 
```

当它失败时，它会失败并显示如下消息：

```
../../bin/libbcencryption.so: undefined reference to `SHA256_Update'
../../bin/libbcencryption.so: undefined reference to `SHA256_Final'
../../bin/libbcencryption.so: undefined reference to `SHA256_Init' 
```

过去可以正常工作和构建，现在我们正在向前推进我们的平台，并且 GCC 4.6 是可用的最新版本，它会导致以这种方式链接库的重大构建问题，但只有当库与二进制文件链接时。现在让构建工作它的结构：

```
myencryption.so
|
 ----- #include <openssl/sha.h>
 ----- LIBS += -lssl -lcrypto 
```

哪个工作正常。还需要其他东西，例如对以前编译中从未需要的 Qt 库的引用。

但是，我在 GCC 发行说明中找不到对此类更改的任何参考，因此我非常好奇是否有人知道它是否*已*更改或是否涉及其他因素，因此这是一个基于 Qt 的项目，它是从基础迁移而来的Ubuntu 11.04 到 12.10 平台，GCC 版本从 4.5.2 到 4.6.3。除了在 Ubuntu 中进行的任何升级之外，构建过程中的任何内容都没有改变。

编辑：看起来评论中引用的答案接近于解释问题，并更新了`ld`导致头痛的问题。

# php - preg_match 和我的字符串

> ID：15383596
> 
> 赞同：0
> 
> 时间：2013-03-13T11:08:59.880
> 
> 标签：php, preg-match

我想要这种字符串：

**基本上是一串可以（或不能）以 à 或 è 或 ì 或 ù 结尾的字母 a-zA-Z。**

我这样做了：

```
preg_match('/^[a-zA-Z]+[a-zA-Z]+$|^[a-zA-Z]+[àèìòù]?$/', $word) 
```

我仍然认为没问题，但由于某种原因它不起作用！

编辑：有一些意大利姓氏可以以 àèìòù 结尾，但其他一些姓氏只以字母结尾。我想得到字符串的结尾可以以 àèìòù 或字母结尾。

这是完整的代码

```
if ( preg_match('/^[a-zA-Z]+[àèìòù]?$/', $word) ) {
    echo "0";

} else {
    echo LASTNAME_ERROR;
} 
```

但是当我执行它时，它给了我 LASTNAME_ERROR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:11:29.553

根据您的描述，我将制定正则表达式如下：

```
/^[a-zA-Z]+[àèìòù]?$/ 
```

但是，从您的问题来看，尚不清楚您的问题到底出在哪里。您的正则表达式看起来有点冗长，但并没有那么错误，它可以解释您的问题（至少对我来说不是）。

***编辑：***重新阅读您的问题后，我看到一件事：该变量`$word`可能包含 UTF-8 编码数据。如果是这种情况，您需要将[*`u`(PCRE_UTF8)*修饰符](http://php.net/reference.pcre.pattern.modifiers)添加到正则表达式：

```
/^[a-zA-Z]+[àèìòù]?$/u
                     ^
                     `--- UTF-8 modifier 
```

反过来也是如此：如果您的应用程序还没有使用 UTF-8，但 PHP 文件是用 UTF-8 编码的，那么上面的正则表达式也是无效的。

所以检查字符串和你的 PHP 文件的字符编码，这是我可以假设这里可能出错的一件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:17:22.627

好的，让我们回顾一下你的一些正则表达式，这样你就可以看到哪里出错了。

```
/^[a-zA-Z]+[a-zA-Z] 
```

所以一个或多个 a-zA-Z，然后是 a-zA-Z。好吧，这真的很没有意义： `/^[a-zA-Z]+`就足够了。

```
^[a-zA-Z]+[àèìòù]?$/ 
```

So a-zA-Z one or more times, followed by one or more of your symbols. Well, that's awfully similar to your original regular expression, so let's cut away and put it back together.

```
/^[a-zA-Z]+[àèìòù]?$/ 
```

So we've got a-zA-Z one or more times, followed by the symbols, 0 or more times at the end of the string. **Just to note, Hakre devised this answer first. I just wanted to explain some of your mistakes.**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:17:44.437

This should be work

```
/((?!\(à|è|ì|ò|ù)$)[a-zA-Z])+/

(            # start a group for the purposes of repeating
 (à|è|ì|ò|ù) # negative lookahead assertion for the pattern à|è|ì|ò|ù
 [a-zA-Z]    # your own pattern for matching a URL character
)+           # repeat the group 
```

# java - Google App Engine - 从 blob 服务回调时出错

> ID：15383597
> 
> 赞同：1
> 
> 时间：2013-03-13T11:09:01.930
> 
> 标签：java, google-app-engine

我已经开发了一个将文件上传到 blobstore 的应用程序。它在开发服务器上运行良好，真正的服务器但免费版本。但是，当我在生产服务器（付费服务器）上对其进行测试时，当 blob 服务回调我的 API 时出现以下错误。

```
java.lang.IllegalStateException: Must be called from a blob upload callback request.
    at com.google.appengine.api.blobstore.BlobstoreServiceImpl.getUploads(BlobstoreServiceImpl.java:160) 
```

# asp.net - 禁止 IIS 7.5 或 .NET 中某些文件的查询参数

> ID：15383598
> 
> 赞同：5
> 
> 时间：2013-03-13T11:09:09.630
> 
> 标签：asp.net, .net, iis, iis-7.5

是否有一种通用的方法来禁止`.swf`IIS 7 中的示例文件或使用 .Net 上的查询字符串参数？

我们有一个第三方 swf 文件的应用程序，它通过使用某些查询字符串参数调用它来允许 XSS。因此，我们希望以通用方式禁用参数。

我唯一想到的是编写一个处理程序，将文件调用重新路由到不带参数的调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:07:28.237

您不需要`Handler`，只需一个新的 IIS`Rewrite`规则，它将匹配`yourfile.swf?*`并将其重写为`yourfile.swf`（明确地不附加`querystring`）。

类似的东西（没有检查）：

```
<configuration>
<system.webServer>
    <rewrite>
        <rules>
            <rule name="strip_querystring" patternSyntax="Wildcard" stopProcessing="true">
                <match url="yourfile.swf*" />
                <action type="Rewrite" url="yourfile.swf" appendQueryString="false" />
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:02:45.057

在 Global.asax BeginRequest 事件中试试这个

```
 Private Sub Global_BeginRequest(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.BeginRequest

        Dim httpContext As HttpContext = httpContext.Current
        Dim request As HttpRequest = httpContext.Request
        Dim response As HttpResponse = httpContext.Response

        If request.QueryString.Count > 0 AndAlso request.Url.LocalPath.EndsWith(".swf", StringComparison.InvariantCultureIgnoreCase) = True Then
            response.Redirect(request.Url.LocalPath)
        End If

    End Sub 
```

# jquery-datatables - 在数据表中添加新行时日期选择器未触发

> ID：15383601
> 
> 赞同：0
> 
> 时间：2013-03-13T11:09:26.713
> 
> 标签：jquery-datatables

单击添加新行时，我希望出现一个日期选择器日历，我尝试使用 jquery easy ui 但是当我单击 datepicjker id 字段时，它没有触发下面的代码。

```
<style type="text/css" title="currentStyle">
        @import "demo_page.css";
        @import "demo_table.css";
        td input { width: 100% }
        #example_wrapper { min-height: 0; }
    </style>
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery- ui.css" />
 <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
    <script type="text/javascript" language="javascript"   src="jquery.dataTables.js"></script>
     <script>
$(function() {
$( "#datepicker" ).datepicker();
});
</script> 
```

这是javascript代码

```
 function restoreRow ( oTable, nRow )
        {
            var aData = oTable.fnGetData(nRow);
            var jqTds = $('>td', nRow);

            for ( var i=0, iLen=jqTds.length ; i<iLen ; i++ ) {
                oTable.fnUpdate( aData[i], nRow, i, false );
            }

            oTable.fnDraw();
        }

        function editRow ( oTable, nRow )
        {
            var aData = oTable.fnGetData(nRow);
            var jqTds = $('>td', nRow);
            jqTds[0].innerHTML = '<input type="text" value="'+aData[0]+'">';
            jqTds[1].innerHTML = '<input type="text" id="datepicker" value="'+aData[1]+'">';
            jqTds[2].innerHTML = '<input type="text" value="'+aData[2]+'">';
            jqTds[3].innerHTML = '<input type="text" value="'+aData[3]+'">';
            jqTds[4].innerHTML = '<input type="text" value="'+aData[4]+'">';
            jqTds[5].innerHTML = '<a class="edit" href="">Save</a>';
        }

        function saveRow ( oTable, nRow )
        {
            var jqInputs = $('input', nRow);
            oTable.fnUpdate( jqInputs[0].value, nRow, 0, false );
            oTable.fnUpdate( jqInputs[1].value, nRow, 1, false );
            oTable.fnUpdate( jqInputs[2].value, nRow, 2, false );
            oTable.fnUpdate( jqInputs[3].value, nRow, 3, false );
            oTable.fnUpdate( jqInputs[4].value, nRow, 4, false );
            oTable.fnUpdate( '<a class="edit" href="">Edit</a>', nRow, 5, false );
            oTable.fnDraw();
        }

        $(document).ready(function() {
            var oTable = $('#example').dataTable();
            var nEditing = null;

            $('#new').click( function (e) {
                e.preventDefault();

                var aiNew = oTable.fnAddData( [ '', '', '', '', '', 
                    '<a class="edit" href="">Edit</a>', '<a class="delete" href="">Delete</a>' ] );
                var nRow = oTable.fnGetNodes( aiNew[0] );
                editRow( oTable, nRow );
                nEditing = nRow;
            } );

            $('#example a.delete').live('click', function (e) {
                e.preventDefault();

                var nRow = $(this).parents('tr')[0];
                oTable.fnDeleteRow( nRow );
            } );

            $('#example a.edit').live('click', function (e) {
                e.preventDefault();

                /* Get the row as a parent of the link that was clicked on */
                var nRow = $(this).parents('tr')[0];

                if ( nEditing !== null && nEditing != nRow ) {
                    /* Currently editing - but not this row - restore the old before continuing to edit mode */
                    restoreRow( oTable, nEditing );
                    editRow( oTable, nRow );
                    nEditing = nRow;
                }
                else if ( nEditing == nRow && this.innerHTML == "Save" ) {
                    /* Editing this row and want to save it */
                    saveRow( oTable, nEditing );
                    nEditing = null;
                }
                else {
                    /* No edit in progress - let's start one */
                    editRow( oTable, nRow );
                    nEditing = nRow;
                }
            } );
        } );
    </script>
</head> 
```

和html表

```
 <body id="dt_example">
   <div id="container">
   <div id="demo">
      <p><a id="new" href="">Add new row</a></p>
     <table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
   <thead>
   <tr>
<th>Rendering engine</th>
<th>Date</th>
<th>Platform(s)</th>
<th>Engine version</th>
<th>CSS grade</th>
<th>Edit</th>
<th>Delete</th>
</tr>
    </thead>
     <tbody>
    <tr class="odd gradeX">
        <td>Trident</td>
        <td>23rd june</td>
        <td>Win 95+</td>
        <td class="center"> 4</td>
        <td class="center">X</td>
        <td><a class="edit" href="">Edit</a></td>
        <td><a class="delete" href="">Delete</a></td>
    </tr>
    <tr class="even gradeC">
        <td>Trident</td>
        <td>3rd june</td>
        <td>Win 95+</td>
        <td class="center">5</td>
        <td class="center">C</td>
        <td><a class="edit" href="">Edit</a></td>
        <td><a class="delete" href="">Delete</a></td>
    </tr>
    <tr class="odd gradeA">
        <td>Trident</td>
        <td>3rd june</td>
        <td>Win 95+</td>
        <td class="center">5.5</td>
        <td class="center">A</td>
        <td><a class="edit" href="">Edit</a></td>
        <td><a class="delete" href="">Delete</a></td>
    </tr>
      </tbody>
       </table>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:14:07.750

您必须在数据表回调函数上再次调用日期选择器

```
 oTable = $('#example').dataTable( {
         "fnDrawCallback": function () {
                  $( "#datepicker" ).datepicker();

         }
     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:21:32.487

您必须在添加的新行上运行 jQuery datepicker 函数。

# excel - Excel：使用文本框输入和检索数据

> ID：15383602
> 
> 赞同：1
> 
> 时间：2013-03-13T11:09:27.157
> 
> 标签：excel, excel-2007, excel-formula, vba

我有一个带有不同国家 /名称的列表框，当一个国家 /地区选择的信息与该国有关时，将出现在文本框中。我对包含国家和评论列的表使用简单的 VLOOKUP 来做到这一点。

```
=VLOOKUP(INDEX(countries,$C$10),countriestable,2,FALSE) 
```

现在假设我想添加第二个文本框，它将具有反向操作，用户将在文本框中输入数据/评论，并将相应地保存在国家表中（根据所选国家/地区）

问题是我可以将 texbox2 链接到一个单元格并添加与 textbox1 相同的公式，但是当我输入数据时，它将覆盖链接单元格公式，然后当我从列表框中更改国家/地区时，Textbox2 中的值逻辑上将noo 更改（静态）。

**我怎样才能实现一种方式（在同一页面上）我有一个 texbox 来显示表格中的数据（Step1 是成功的）和一个用户可以在其中写入/输入评论数据的 Texbox？**

感谢您的任何指导，问候

Excel 版本 2007

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:18:00.860

您需要决定是否以及何时将 textbox2 的评论转移到国家表中。由于 countrytable 是一种“主表”，我不建议在其中使用公式试图从用户表中提取评论......主表不应该包含公式......太难以捉摸

相反，我会让 textbox2 字段没有任何指向任何特定 Excel 单元格的链接，而是添加一个按钮，用户可以按下该按钮将他/她的评论转移到国家表中。我也可能会考虑在国家表中为“用户评论”增加一列（与您在输入/选择国家时检索的“通用评论”相反）。最后，我可以考虑使用“添加到用户评论”/“替换用户评论”功能制作 2 个按钮而不是 1 个按钮

# jsf - JSF 长时间运行的进程

> ID：15383606
> 
> 赞同：-4
> 
> 时间：2013-03-13T11:09:35.117
> 
> 标签：jsf, jsf-2, icefaces

如果支持 bean 函数需要一些时间来处理请求，我们如何拉进度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:14:43.393

我更喜欢进度条之类的东西。您可以为此使用 Primefaces 之类的框架：

[http://www.primefaces.org/showcase/ui/misc/progressBar.xhtml](http://www.primefaces.org/showcase/ui/misc/progressBar.xhtml)

# css - 从现有样式继承 CSS。Extjs4 沙盒

> ID：15383610
> 
> 赞同：0
> 
> 时间：2013-03-13T11:10:00.650
> 
> 标签：css, extjs, extjs4, extjs3

我设法将我的 extjs4 面板嵌入到现有的 extjs3 应用程序中。

我想继承面板标题等现有的 css 颜色方案。

但是我的 extjs4 组件是“沙盒化”的，因此使用 .x4-* 命名空间作为 css。

怎么能：

```
my-styles.css

.x4-tab { some-stuff } 
```

继承自：

```
existing-styles.css 

.x-tab { foo: #FFF } 
```

这可能吗？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:51:31.870

虽然这在技术上是可行的，但结果实际上没有意义，除非您手动遍历每个组件并覆盖类以拥有正确的 css 引用（如果它们甚至存在）（并且您必须手动创建其他引用）。这是因为 Extjs 4 在 css 命名空间和类的技术意义上与 Extjs 3 的工作方式不同。您可以通过覆盖组件类来手动更改组件正在使用的所有 css 类，但这不值得花时间. 如果没有大量的努力，你想要做的事情是无法完成的，这是不值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:45:58.623

您可以获取选择器中包含“.x-”的所有现有 css 规则，并使用“.x4-”创建新规则。

```
var newRules = [];
Ext.Object.each(Ext.util.CSS.getRules(), function(selector, rule) {
    if (/\.x-/.test(selector)) {
        newRules.push(rule.cssText.replace(/\.x-/g, '.x4-');
    }
});

Ext.util.CSS.createStyleSheet(newRules.join(' ')) 
```

# jquery - 为 Jquery 动画有效地使用 Enquire.js 和媒体查询

> ID：15383614
> 
> 赞同：1
> 
> 时间：2013-03-13T11:10:10.537
> 
> 标签：jquery, media-queries, show-hide, enquire.js

嗨，我一直在努力弄清楚如何使用 enquire.js。我正在使用 .mouseenter(function() 来激活 .show 和 .hide 功能。但是当您在平板电脑和移动设备上查看它时，.mouseenter 变得多余。我想告诉 jquery 一旦屏幕宽度达到我的就显示 div媒体查询。

```
 @media only screen and (min-width : 769px ) and (max-width : 959px) 
```

下面是一个例子。

这是我的jQuery：

```
$(".slidingDiv_how").hide(); 
          $(".show_sub").show(); 

          $('.show_sub').mouseenter(function(){
          $(".slidingDiv_how").slideDown();
            return false;
          });
            }); 
```

这是我的html

```
<div class"right-wrapper"><!--How wrapper -->
                                <div id="how_we" class="show_sub1" style="cursor: hand; cursor: pointer;">
                                    <h1><a href="#">How We Work:</a></h1>
                                        <div class="slidingDiv_how">
                                            <p class="show_sub1">The heat of the vertical rays of the sun was fast making our horrible prisons unbearable, so that after passing a low divide, and entering a sheltering forest, we finally.</br> 
                www.dochouse.co.uk</p>

                                        </div> <!-- end slidingdiv2 --> 
```

我已经阅读了文档，并不太明白该放哪一部分。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:56:43.590

希望这会有所帮助，几乎直接从[文档中复制](http://wicky.nillia.ms/enquire.js/)

```
enquire.register("screen and (min-width : 769px ) and (max-width : 959px)", {
    match : function() {
        $(".slidingDiv_how").show();            
    },
    unmatch : function() {
        $(".slidingDiv_how").hide();
    }
}).listen(); 
```

注意最新版本的更改

> v2.0.0 (2013-04-17)
> 
> 从 v2 开始不再需要 listen 和 fire，并且已从 API 中删除。只需在您的代码中删除它们的任何用法。此外，由于查询不再依赖于调整大小事件，您必须确保您的 polyfill 支持 matchMedia.addListener。这方面的详细信息可以在旧版浏览器部分中找到。

# c# - 通过 System.Data.SQLite 和 c# 对单个 SQLite 数据库文件进行多次访问

> ID：15383615
> 
> 赞同：9
> 
> 时间：2013-03-13T11:10:12.523
> 
> 标签：c#, database, sqlite, locking, system.data.sqlite

正如我可以从[**SQLite FAQ**](http://www.sqlite.org/faq.html#q5)中看到的，它在任何时候都支持多个进程读取（SELECT）和一个进程写入（INSERT、UPDATE、DELETE）数据库：

> SQLite 使用读/写锁来控制对数据库的访问。当任何进程想要写入时，它必须在其更新期间锁定整个数据库文件。但这通常只需要几毫秒。其他流程只是等待作者完成然后继续他们的业务

我正在通过 c#使用[**System.Data.SQLite适配器。**](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)

有人可以向我解释一下，这个过程**到底**是怎么回事？

如果已经在同一个数据库上执行另一个写入**SQLiteCommand**，这个过程是否会自动工作并且写入**SQLiteCommand将只是等待？**

 **或者它可能会抛出异常？什么样的？

抱歉，我没有找到有关此机制的信息 :)

谢谢你。

**更新：**

我发现帖子说[**将**](https://stackoverflow.com/questions/11223044/retreiving-error-codes-from-sqlite-when-using-executenonquery)使用特定的错误代码引发异常

这种说法正确吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-14T06:33:26.293

我自己调查过：

我创建了一个示例 SQLite 数据库`c:\123.db`，其中一个表`Categories`包含两个字段：`ID`(uniqueidentifier) 和`Name`(nvarchar)。

`System.Data.SQLite`然后我编写了一些多线程代码来模拟对数据库的多次写入访问（如果您使用此代码，请不要忘记添加对您的项目的引用）：

```
using System;
using System.Data.SQLite;
using System.Threading.Tasks;

namespace SQLiteTest
{
    class Program
    {
        static void Main(string[] args)
        {
            var tasks = new Task[100];

            for (int i = 0; i < 100; i++)
            {
                tasks[i] = new Task(new Program().WriteToDB);
                tasks[i].Start();
            }

            foreach (var task in tasks)
                task.Wait();
        }

        public void WriteToDB()
        {
            try
            {
                using (SQLiteConnection myconnection = new SQLiteConnection(@"Data Source=c:\123.db"))
                {
                    myconnection.Open();
                    using (SQLiteTransaction mytransaction = myconnection.BeginTransaction())
                    {
                        using (SQLiteCommand mycommand = new SQLiteCommand(myconnection))
                        {
                            Guid id = Guid.NewGuid();

                            mycommand.CommandText = "INSERT INTO Categories(ID, Name) VALUES ('" + id.ToString() + "', '111')";
                            mycommand.ExecuteNonQuery();

                            mycommand.CommandText = "UPDATE Categories SET Name='222' WHERE ID='" + id.ToString() + "'";
                            mycommand.ExecuteNonQuery();

                            mycommand.CommandText = "DELETE FROM Categories WHERE ID='" + id.ToString() + "'";
                            mycommand.ExecuteNonQuery();
                        }
                        mytransaction.Commit();
                    }
                }
            }
            catch (SQLiteException ex)
            {
                if (ex.ReturnCode == SQLiteErrorCode.Busy)
                    Console.WriteLine("Database is locked by another process!");
            }
        }
    }
} 
```

我的 Core2Duo E7500 上的结果是从未引发异常！

看起来 SQLite 已经针对我的需要进行了足够的优化（锁定/解锁非常快，通常只需要几毫秒，正如[SQLite 常见问题解答](http://www.sqlite.org/faq.html#q5)告诉我们的那样） - 太棒了！

请注意，不需要为 an 检索整数 ErrorCode `SQLiteException`- 您可以改用特殊的枚举`ReturnCode`字段。[此处](http://www.sqlite.org/c3ref/c_abort.html)描述了所有代码。

希望这些信息对某人有所帮助。**

# ruby-on-rails - 安装导轨时出错

> ID：15383616
> 
> 赞同：0
> 
> 时间：2013-03-13T11:10:12.777
> 
> 标签：ruby-on-rails

以下是我在我的linux系统上安装rails时遇到的错误，任何人的帮助..欢迎！

```
Installing gem rails-3.2.12
Successfully installed rails-3.2.12
1 gem installed
Installing ri documentation for rails-3.2.12...
ERROR:  While executing gem ... (NoMethodError)
undefined method `map' for Gem::Specification:Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:14:26.857

您需要更新您的红宝石宝石..

或者你可以使用

```
rvm get head
rvm reload
rvm install 1.9.3-p194
rvm use 1.9.3 
```

在 linux 机器上安装 rails 的好博客之一：[RailsInstallationOnRubyMachine](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

我希望这对您的安装有所帮助。

# matlab - 如何从matlab启动mupad？

> ID：15383622
> 
> 赞同：0
> 
> 时间：2013-03-13T11:10:23.517
> 
> 标签：matlab, mupad

我想绘制不等式。Mupad 在这方面非常有用。如何从 Matlab 启动 Mupad？使用`mphandle = mupad`返回错误`??? Undefined function or variable 'mupad'.` 我正在使用 matlab 版本`7.11.0.584 (R2010b)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:32:59.767

`mupad`是`Symbolic Math Toolbox`( [http://www.mathworks.de/products/symbolic/](http://www.mathworks.de/products/symbolic/) ) 的一部分。使用命令检查您是否拥有它`ver`

# android - 如何在 SeekBar 上显示最大值和最小值？

> ID：15383623
> 
> 赞同：2
> 
> 时间：2013-03-13T11:10:25.267
> 
> 标签：android, user-interface, seekbar

我正在尝试做的事情：

1.  我想`SeekBar`在 Android 应用程序中实现 a 并且`SeekBar`我还想显示最大值和最小值。最小值始终为 0，但最大值取决于剪辑长度。（例：0---180）

2.  有没有办法显示用户移动时选择的值（在搜索栏本身上）`SeekBar`？

我无法弄清楚如何与 android 一起实现这一点`SeekBar`，因为似乎没有任何选项可用于显示值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:49:21.920

> 我想在 Android 应用程序中实现搜索栏。但在搜索栏上，我还想显示最大值和最小值。最小值始终为 0，但最大值取决于剪辑长度。（例：0---180）
> 
> 有没有办法显示用户>移动搜索栏时选择的值（在搜索栏本身上）？

如果您希望将这些值**放在顶部**，`SeekBar`则扩展`SeekBar`该类并覆盖该`onDraw`方法。调用后，您可以绘制自己的东西，例如开始和结束或当前进度`super.onDraw(canvas)`的最小/最大值。`SeekBar`制作看起来不错的东西（在所有不同的外观`Seekbars`上）会有点困难，因为您需要仔细计算绘制文本的位置和方式。

一种更简单的方法是制作一个自定义组件，在其左侧和右侧`SeekBar`用 a包装（对于当前进度，下面有一个可选的）并使用最小值/最大值设置它们（即使以编程方式设置最大值，最大值可以“遵循”这些变化）。知道进度的宽度和当前进度，可以轻松计算和更新进度。`TextView``TextView``TextView``SeekBar`

第二种情况的一个小例子：

```
public static class SeekBarWithValues extends RelativeLayout {

    private int mMax = 100;
    private TextView mMinText;
    private TextView mMaxText;
    private TextView mCurrentText;
    private SeekBar mSeek;

    public SeekBarWithValues(Context context, AttributeSet attrs) {
        super(context, attrs);
        LayoutInflater.from(getContext()).inflate(
                R.layout.content, this);
        // the minimum value is always 0
        mMinText = (TextView) findViewById(R.id.minValue);
        mMinText.setText("0");
        mMaxText = (TextView) findViewById(R.id.maxValue);
        mCurrentText = (TextView) findViewById(R.id.curentValue);
        mSeek = (SeekBar) findViewById(R.id.seekBar);
        mSeek.setMax(100);
        mMaxText.setText(String.valueOf(mSeek.getMax()));
    }

    /**
     * This needs additional work to make the current progress text stay
     * right under the thumb drawable.
     * 
     * @param newProgress
     *            the new progress for which to place the text
     */
    public void updateCurrentText(int newProgress) {
        mCurrentText.setText(String.valueOf(newProgress));
        final int padding = mMinText.getWidth() + mSeek.getPaddingLeft();
        final int totalSeekWidth = mSeek.getWidth();
        final RelativeLayout.LayoutParams lp = (LayoutParams) mCurrentText
                .getLayoutParams();
        final int seekLocation = (mSeek.getProgress() * totalSeekWidth)
                / mMax - mCurrentText.getWidth() / 2;
        lp.leftMargin = seekLocation + padding;
        mCurrentText.setLayoutParams(lp);
    }

    public SeekBar getSeekBar() {
        return mSeek;
    }

    public void updateSeekMaxValue(int newValue) {
        mMax = newValue;
        mMaxText.setText(mMax);
        mSeek.setMax(mMax);
    }

} 
```

内容布局在哪里：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android" >

<TextView
    android:id="@+id/minValue"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/seekBar"
    android:layout_alignParentLeft="true"
    android:layout_alignTop="@id/seekBar"
    android:gravity="center" />

<TextView
    android:id="@+id/maxValue"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@id/seekBar"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@id/seekBar"
    android:gravity="center" />

<SeekBar
    android:id="@id/seekBar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@id/maxValue"
    android:layout_toRightOf="@id/minValue" />

<TextView
    android:id="@+id/curentValue"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/seekBar"
    android:gravity="center" /> 
```

当前文本的偏移量往往超出应有的范围，并且需要进行额外的工作才能将其放在搜索句柄的正下方。

# git - 总消息后 git push origin 挂起

> ID：15383624
> 
> 赞同：19
> 
> 时间：2013-03-13T11:10:25.997
> 
> 标签：git, github

`git push origin master`在github 上执行后，推送挂起，没有任何反应。我正在使用`https://username@github.com`. 起初我首先遇到的错误`http.postbuffer`是太小了，我把它改成了`http.postbuffer=209715200`. 现在它挂在 Total 行之后：

```
Counting objects: 203, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (197/197), done.
Writing objects: 100% (201/201), 49.41 MiB | 11.07 MiB/s, done.
Total 201 (delta 37), reused 0 (delta 0) 
```

编辑：不涉及代理

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-23T17:08:33.487

您可能需要等待它完成。没有进度条所以看起来它已经停止但它没有。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-22T14:59:47.657

就我而言，这是远程存储库的权限问题。一旦我“chown”了远程 repo 目录，推送就完成了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T16:33:50.080

我以前遇到过和你类似的问题。

看看我已解决的 stackoverflow 问题，以防万一它可能有帮助： [将带有 SCP 的大文件发送到某个服务器，该文件的大小正好为 2112 kB](https://stackoverflow.com/questions/11985008/sending-a-large-file-with-scp-to-a-certain-server-stalls-at-exactly-2112-kb)

# android - 在签名过程中如何获取android签名的地图密钥？

> ID：15383625
> 
> 赞同：1
> 
> 时间：2013-03-13T11:10:26.120
> 
> 标签：android, google-maps

我想为谷歌地图生成签名的地图密钥。目前我已经生成了一个地图密钥并在应用程序中使用。我知道我们需要在代码签名过程中更改谷歌地图 api 密钥，我的意思是在应用程序分发时。如何获取**签名**的Google 地图 API 密钥？

另外请告诉我为什么要更改地图 api 密钥？

**编辑**
我已经生成了用于签署应用程序的密钥库。
我正在开发 Android 2.2 版本的应用程序。
如果我需要生成新密钥，如何生成它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:17:08.170

地图 API 密钥是根据用于签署应用程序的证书生成的。

因此，如果您更改了您的签名证书（例如，从使用调试证书更改为发布证书时），您必须生成一个新的 API 密钥（至少对于 Maps API v1）

如果您正在使用**API v1 ，您应该快点，因为从****3 月 18 日**开始，这将不再可能。

如果您使用**API v2**，则不必生成新密钥。您可以将签名证书与开发人员控制台中的现有 API 密钥相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:39:01.230

首先需要获取调试证书的MD5指纹。当您准备好发布您的应用程序时，请向 Google 地图服务注册您的发布证书以用于营销目的。

检查此[链接](https://developers.google.com/maps/documentation/android/v1/mapkey)

检查[此](http://seasonofrejoice.blogspot.in/)链接以获取 android map apiv2 集成。希望它可以帮助您！

# php - Zend_Paginator 让用户选择每页的行数

> ID：15383627
> 
> 赞同：2
> 
> 时间：2013-03-13T11:10:31.453
> 
> 标签：php, zend-framework, zend-paginator

我需要一些关于 Zend Framework 分页的概念性建议。

我正在使用 Zend_Paginator，它就像一个魅力，在我看来，我想要一个选择器让用户选择他想要的每页有多少行，这将设置 setItemCountPerPage() 方法的参数。截至目前，我的视图中有一个硬编码的选择表单元素（触发使用 jQuery 更改 url），如下所示：

```
 <select id="rpp" name="rpp">
       <option value="/goods">--</option>
       <option value="/goods/rpp/2">[2 for dev]</option>
       <option value="/goods/rpp/5">5 <?php echo $this->translate('Rows per page') ?></option>
       <option value="/goods/rpp/15">15 <?php echo $this->translate('Rows per page') ?></option>
       <option value="/goods/rpp/25">25 <?php echo $this->translate('Rows per page') ?></option>
       <option value="/goods/rpp/50">50 <?php echo $this->translate('Rows per page') ?></option>
       <option value="/goods/rpp/100">100 <?php echo $this->translate('Rows per page') ?>   </option>
   </select> 
```

它可以工作，但我需要在多个视图中使用它，所以我尝试在部分视图中用这样的东西来弥补一些东西：

```
...
<option value="<?php echo $this->userAgent()->getServerValue('request_uri'); ?>/rpp/2">[2 for dev]</option>
... 
```

但在某些情况下最终会出现路由问题。

什么将是一个好的开发策略，对于让用户选择他想要的每页多少行的功能，最通用和可重用的可能。

感谢您的建议。

F。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:43:58.813

您可以使用`Zend_Paginator::setDefaultItemCountPerPage`Bootstrap 类中存储在会话中的方法和值来设置每页的项目。如果您想稍后在某个阶段更改它。只需为会话变量分配不同的值。例如（**未测试**）

```
protected function _initPagination()
{
  $session = new Zend_Session_Namespace('default');
  $itemCountPerPage = (isset($session->itemCountPerPage) 
  ? $session->itemCountPerPage : 5);

  Zend_Paginator::setDefaultItemCountPerPage($itemCountPerPage);
} 
```

稍后在您的操作中：

```
public function itemCountPerPageAction()
{
  $session = new Zend_Session_Namespace('default');
  $session->itemCountPerPage = $this->_getParam('itemCountPerPage');
  $this->_helper->redirector->gotoUrlAndExit($this->_request->getServer("HTTP_REFERER"));
} 
```

# twitter - 显示来自我在网站嵌入式 Twitter 提要上关注的人的推文

> ID：15383632
> 
> 赞同：1
> 
> 时间：2013-03-13T11:10:41.790
> 
> 标签：twitter

我查看了以下链接 - Twitter 中的[https://dev.twitter.com/docs/embedded-timelines 。](https://dev.twitter.com/docs/embedded-timelines)它说您可以显示您的时间线、收藏夹、列表，但不能显示您关注的人的推文。

基本上，当你第一次登录 Twitter 时，我想显示这些推文——来自我在我的网站上关注的人的推文。

或者有没有办法自动将我们关注的人添加到列表中？那么我可以显示该列表吗？

可以做到吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:36:00.810

我不认为你可以通过嵌入式时间线来实现这一点，但你可以通过使用 REST API 来实现。下面的链接提供了有关如何执行此操作的详细信息。然后，您的请求将返回您关注的人的最新推文的 json 字符串。您可以格式化然后显示它

[https://dev.twitter.com/docs/api/1.1/get/statuses/home_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/home_timeline)

# c# - 在 ASP.NET 母版页的页脚中添加页面加载字符串

> ID：15383633
> 
> 赞同：3
> 
> 时间：2013-03-13T11:10:46.960
> 
> 标签：c#, asp.net, master-pages

我想在我的 ASP.NET 应用程序的页脚中添加一个标签，向我的用户显示每个页面的加载时间。在我的`site.master`页面中，我目前有：

```
public partial class SiteMaster : MasterPage
   {
    public Stopwatch pageLoadTime = new Stopwatch();

    protected void Page_Load(object sender, EventArgs e)
    {
        pageLoadTime.Start();

        //Other stuff here

        pageLoadTime.Stop();
        TimeSpan ts = pageLoadTime.Elapsed;

        // Format and display the TimeSpan value. 
        string elapsedTime = String.Format("{0:00}:{1:00}:{2:00}.{3:00}", ts.Hours, ts.Minutes, ts.Seconds, ts.Milliseconds / 10);

        PageLoadTimeLabel.Text = "Page loaded in " + elapsedTime;
    } 
```

但这并没有给我一个“真正的”页面加载时间，即使一个页面需要 5 秒来加载它也会返回 0.1 秒。所以我将结束代码移到该`Page_LoadComplete`部分，但这无法更新它看起来的标签。

任何指针？我知道我可以使用 firebug 等，但我希望我的用户能够轻松访问这些信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:17:32.087

I would do it in the `global.asax`:

```
private DateTime start_time

protected void Application_BeginRequest(object sender, EventArgs e)
{
    start_time = DateTime.Now;
}
protected void Application_EndRequest(object sender, EventArgs e)
{
    var duration = DateTime.Now - start_time;
    Response.Write("...");
} 
```

Or write it to a session and read in your master page.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:05:08.903

感谢 Linus，我创建了它，它可以满足我的需求：

```
 protected void Application_BeginRequest(Object sender, EventArgs e)
{
    Context.Items["loadstarttime"] = DateTime.Now;
} 
```

接着

```
public void Application_EndRequest(object src, EventArgs e)
{
    DateTime end = (DateTime)Context.Items["loadstarttime"];
    TimeSpan ts = DateTime.Now - end;

    // Format and display the TimeSpan value. 
    string elapsedTime = String.Format("{0:00}:{1:00}:{2:00}.{3:00}", ts.Hours, ts.Minutes, ts.Seconds, ts.Milliseconds / 10);

    Response.Write("<div style='text-align: center' class='thesmallprint'>Page loaded in: " + elapsedTime + "</div>");
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T11:22:19.293

Page.LoadComplete 可以帮助您。如果您在 Page_Load 事件处理程序中启动计时器并在 LoadComplete 事件处理程序中停止它，那么您可能会得到实际时间。

# jsf - JSF Javascript 失败 - myfaces 未定义

> ID：15383634
> 
> 赞同：1
> 
> 时间：2013-03-13T11:10:51.297
> 
> 标签：jsf, primefaces, commandlink

我正在使用 myfaces 和 primefaces 开发一个 Web 解决方案。我们的解决方案中有几个页面，其中一些会出现这个神秘的错误`myfaces not defined`，因为页面中没有包含一个 javascript 文件，即`jsf.js`文件：

```
<script type="text/javascript" src="/driwkraft-hig/javax.faces.resource/jsf.js.xhtml?ln=javax.faces&stage=Development"> 
```

单击页面上的某些命令链接时发生错误，其中生成的 javascript 已设置为`onClick="myfaces.oam.submitForm...`

现在，我知道这是 JSF 框架根据一些我无法理解的神秘标准添加到页面中的内容。有些页面在使用哪些元素方面似乎是相同的，它在一个上成功，在另一个上失败。

我试图创建一个测试文件，在其中复制了其中一个失败页面的内容，然后删除了部分，直到它可以找出问题的根源，但这并没有给我任何东西。我的下一个预感是它可能是某个地方的一些配置错误。但我完全不知道从哪里开始。

我知道我应该可能会在这个问题中添加一些代码或 xml，但我不能发布整个解决方案，所以我认为最好根据要求这样做。web.xml 有用吗？faces-config.xml 怎么样？

非常感谢任何指导和想法！

* * *

编辑 - 添加模板

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:insert name="metadata" />
    <h:head>
        ....
        <title>
            <ui:insert name="title">
                ....
            </ui:insert>
        </title>

    </h:head>
    <h:body>
        ....
        <ui:insert name="content">
            ....
        </ui:insert>
        ...
    </h:body>
</html> 
```

* * *

编辑 - 添加模板客户端

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:dp="http://java.sun.com/jsf/composite/dapsys">
    <ui:composition template="/templates/default.xhtml">
        <ui:define name="title">TITLE</ui:define>
        <ui:define name="metadata">
            <f:metadata>
                <f:viewParam name="customerId" value="#{CustomerController.customerId}">
                </f:viewParam>
                <f:viewParam name="edit" value="#{CustomerController.edit}">
                </f:viewParam>
                <f:viewParam name="activeTab" value="#{CustomerController.activeTab}">
                </f:viewParam>
            </f:metadata>
        </ui:define>
        <ui:define name="content">
            ...
        </ui:define>
    </ui:composition>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:15:11.950

`<h:head>`如果模板中有一个自动呈现 CSS/JS 依赖项，则它是自动包含的，这些依赖项是通过JSF 组件上的注释[`UIViewRoot#getComponentResources()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIViewRoot.html#getComponentResources%28javax.faces.context.FacesContext,%20java.lang.String%29)添加的。[`@ResourceDependency`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceDependency.html)

这些问题症状表明`<h:head>`模板中没有，而是一个普通的`<head>`. 因此，JSF 无法自动包含 CSS/JS 资源依赖项，这反过来又会导致此 JS 错误。

要解决此问题，只需确保模板中有 a`<h:head>`而不是。`<head>`

```
<!DOCTYPE html>
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head> <!-- Look here. -->
        <title>Blah</title>
    </h:head>
    <h:body>
        <h1>Blah</h1>
        <p>Blah blah.</p>
    </h:body>
</html> 
```

# c# - 逐行列出sql表中的所有数据

> ID：15383635
> 
> 赞同：0
> 
> 时间：2013-03-13T11:10:58.093
> 
> 标签：c#, sql, sql-server, sqlcommand

我试图列出表中的所有数据，但它只返回第一行，它不会循环整个表。我需要将数据作为字符串返回，因为我将在 ASMX Web 服务中使用它。

并且 xml 模式只返回第一行

```
<String> data in row 1<String> 
```

我希望它返回这样的东西：

```
<String> data in row 1<String>
<String> data in row 2<String>
<String> data in row 3<String> 
```

和第 1 行到第 n 行....

我已经在 VS2012 查询生成器中测试了 sql 语句，它工作正常。所以我需要以某种方式列出所有数据。

**这是我的代码**

```
public String finAllCompaniesForSpesficuserByUserId(String userid)
{
    List<String> l = new List<String>();
    try
    {
        String sql = "SELECT Companies.Name FROM UsersInCompanies INNER JOIN Companies ON UsersInCompanies.CompanyId = Companies.CompanyId WHERE UsersInCompanies.UserId ='" + userid + "'";
        con = new SqlConnection(cs);
        cmd = new SqlCommand(sql, con);

        DataTable table = new DataTable();
        SqlDataAdapter adapter = new SqlDataAdapter(cmd);
        adapter.Fill(table);
        con.Open();

        dr = cmd.ExecuteReader();
        dr.Read();

        //while (dr.Read())
        //{
        //    l.Add(dr["Name"].ToString());
        //}

        foreach (DataRow row in table.Rows)
        {
            return row["Name"].ToString();
        }
    }
    finally
    {
        if (con != null)
            con.Close();
    }
    /*
    foreach (string p in l)
    {
        return p;

    }
    */
    return null;
} 
```

有人可以指出我正确的方向或给我一个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:14:33.050

```
foreach (DataRow row in table.Rows)
{
    return row["Name"].ToString();
} 
```

您正在从第一次迭代本身返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:19:04.913

Instead of returning immediately in the for-loop either use a `yield` statement (and change the return type to `IEnumerable<String>` - which just moves the `for` loop out of the function and somewhere else) or use a `StringBuilder` to build the resulting string.

```
StringBuilder sb = new StringBuilder(table.Rows.Count * 30); /* 30 is arbitrary */ 

foreach (DataRow row in table.Rows)
{
    // yes 3 separate calls are correct
    sb.Append("<String>");
    sb.Append(row["Name"].ToString())
    sb.Append("</String>\n");
}

/* after closing, cleaning up */
return sb.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:38:47.203

> 尝试这个

```
 var temp=  "<String>" +
            string.Join("</String>\n<String>", dt.Rows.Cast<DataRow>().Select(x => x["Name"].ToString())) +
            "</String>"; 
```

# r - 提取相交元素的行号

> ID：15383636
> 
> 赞同：0
> 
> 时间：2013-03-13T11:10:58.170
> 
> 标签：r, read.table

我有两张桌子。我想从第二个表中提取一个列并将其传递到第一个表中。问题是，并非第二个表的列的所有行都应该被复制，而是只复制那些第一个列与第一个表匹配的行

```
read.table("table1")->c
read.table("table2")->d
d[,1] %in% c[,1] ->f 
```

只会导致一个带有 TRUE 和 FALSE 的向量 - 但我需要行号，然后有一个带有匹配元素的行号的向量，我需要从表 d 第四列中准确提取这些行

```
d[,4]->g
g[vector with numbers,]->g1 
```

有简单的可能性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:17:20.730

Or with `match`

```
f <- d[ match(c[,1] , d[,1]) , ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T11:20:30.000

这是经典`merge`：

```
merge(c,d[,c(1,4)],by=1) 
```

如果您`names`的数据表中有，则可以在不指定`by`参数的情况下执行匹配。附带说明一下，因为`c`它是一个非常常见的基本函数（我在这里使用过），所以它不是变量名的好选择。

# javascript - 使用 jQuery，从下拉列表中选择后清除其余的选项/DIV

> ID：15383639
> 
> 赞同：0
> 
> 时间：2013-03-13T11:11:07.383
> 
> 标签：javascript, jquery, html

这是我的js：

```
<script type="text/javascript">
        $(document).ready(function(){
           $('#box1').hide();
           $('#box2').hide();
           $('#box3').hide();
           $("#thechoices").change(function(){
              if(this.value == 'all'){
                     $("#boxes").children().show();
                  }else{
                     $("#" + this.value).show().siblings().hide();
                  }
           });          
           $("#thechoices").change(); 
        });
</script> 
```

* * *

和HTML：

```
 <div id="boxes">
       <div id="box1"><p>Box 1 stuff…&lt;/p></div>
       <div id="box2"><p>Box 2 stuff…&lt;/p></div>
       <div id="box3"><p>Box 3 stuff…&lt;/p></div>
    </div> 
```

从下拉列表中选择后，我需要清除（清空）所有其余的选项/div，（即使我打开了它们不会出现的源代码）并同时禁用下拉列表，

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:16:36.583

移除隐藏元素：

```
$('#boxes').remove('div:hidden'); 
```

禁用下拉菜单：

```
$('#thechoices').attr('disabled', true); 
```

因此：

```
 $(document).ready(function(){
       $('#boxes > div').hide();

       $("#thechoices").change(function(){
          if(this.value == 'all')
              $("#boxes").children().show();
          else
              $("#" + this.value).show().siblings().hide();

          $('#boxes').remove('div:hidden'); // remove hidden boxes from DOM
          $(this).attr('disabled', true); // disable drop down
       });

       $("#thechoices").change(); 
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:47:31.033

如果我正确理解您的要求，则将脚本更改为

```
<script type="text/javascript">
        $(document).ready(function(){
           $("#thechoices").change(function(){
              var self = $(this);
              if(self.val() !== 'all'){
                     self.attr('disabled',true);
                     $("#boxes").empty();
              }
           });          
           $("#boxes").append('<div id="box1"><p>Box 1 stuff…&lt;/p></div>       <div id="box2">p>Box 2 stuff…&lt;/p></div>       <div id="box3"><p>Box 3 stuff…&lt;/p></div>');
});
</script> 
```

和 HTMl 片段（无嵌套 div）

```
<div id="boxes">
</div> 
```

如果您动态添加框，它们将不会显示在视图源中（视图源显示从服务器发送的 html）。然后当您更改选择的值时，您只需禁用选择并清空`boxes`div

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:41:36.510

就像 Jai 所说，也许您正在寻找的是动态创建它们。

你要找的是

```
$(document).ready(function(){
    $('#box1').hide();
    $('#box2').hide();
    $('#box3').hide();
    $("#thechoices").change(function(){
        if(this.value == 'all'){
            $("#boxes").children().show();
        }else{
            $("#" + this.value).show().siblings().remove();
            $(this).prop('disabled', 'disabled');
        }
    });          
    $("#thechoices").change(); 
}); 
```

[jsFiddle 代码](http://jsfiddle.net/rJtLk/)

# entity-framework - 实体框架模型优先和代码优先 TPH 问题

> ID：15383640
> 
> 赞同：2
> 
> 时间：2013-03-13T11:11:07.907
> 
> 标签：entity-framework, ef-code-first, ef-model-first

通过尝试先制作模型或先使用 TPH 概念编写代码，我面临两个问题。

问题是我需要在三个级别上使用每个层次结构的表，以便：

当我使用 Model First 时，最后一个层次结构实体（第三级）不会保存在数据库中。我从该实体创建一个实例，该实例继承了一个抽象实体，该抽象实体继承了另一个抽象实体。保存了两个抽象实体的数据，但不保存最后一个实体。如果继承最多两个级别可以正常工作。

如果我尝试使用 Code First，问题是我不能共享具有相同名称的属性，例如：ClassB 和 ClassC 有一个名为“Name”的属性，并且都继承了 ClassA。当我映射生成数据库时，我只想创建一个名为 ClassA 的 sql 表，但它不共享“Name”列，它创建 Name 和 Name1 列。

我需要做这个模型之一，否则我不能在我的模型中使用继承。

希望有所帮助！

谢谢

# android - 在一个应用程序中使用 2 个地图片段时出现问题

> ID：15383641
> 
> 赞同：4
> 
> 时间：2013-03-13T11:11:14.903
> 
> 标签：android, google-maps, android-mapview, supportmapfragment

我正在尝试在两个不同的片段活动中使用两个不同的地图片段。根据 SupportMapFragment 设计，我将映射键保留在 Manifest 文件中应用程序属性的 META TAG 中。但是我的地图视图没有清除，它在第二个片段中显示与旧点相同的地图，即使我调用“getMap().clear()”。请建议

这工作正常，除非我不在单独的 Activity 中使用新的 MapFragment，如果我使用新的 MapFragment，它会采用相同的地图视图，因此地图视图不会清除。

代码 ：

地图片段

公共类 DisplayMapFragment 扩展 SupportMapFragment 实现 OnMarkerClickListener,OnInfoWindowClickListener {

```
View mMapViewContainer;
MapView mMapView;

private Utill utilClass = Utill.getInstance(false);
private View v;
private MapView mapView;
private GeoPoint p;
private MapController mc;
private String latstr = "";
private String lonstr = "";
private String name, address;
private double lat;
private double lng;

ArrayList<NearByItem> NearByList=new ArrayList<NearByItem>();
private LatLng mPosFija;
private ArrayList<Double> mlat, mlong;
private ViewGroup parent;
Utill utilclass=Utill.getInstance(false);
Bitmap bmp;
ImageView ivIcon;
StringBuilder sbc=new StringBuilder();

ProgressBar progressbar;
public ImageLoader imageLoader;     
public DisplayMapFragment() {
    super();

}

public static DisplayMapFragment newInstance(LatLng posicion) {
    DisplayMapFragment frag = new DisplayMapFragment();
    frag.mPosFija = posicion;
    return frag;

}

@Override
public void onCreate(Bundle arg0) {
    // TODO Auto-generated method stub
    super.onCreate(arg0);
    NearByList=NearByMapActivity.fltrdNearByLists;
    imageLoader=new ImageLoader(this.getActivity().getApplicationContext());

}

@Override
public View onCreateView(LayoutInflater arg0, ViewGroup arg1, Bundle arg2) {
    View v = super.onCreateView(arg0, arg1, arg2);
    mlat = new ArrayList<Double>();
    mlong = new ArrayList<Double>();
    parent=arg1;
    if(NearByMapActivity.fltrdNearByLists!=null && !NearByMapActivity.fltrdNearByLists.isEmpty())
            NearByList.addAll(NearByMapActivity.fltrdNearByLists);
    else
        NearByList.addAll(Utill.NearbyList);

    NearByMapActivity parentActivity = (NearByMapActivity) getActivity();

    return v;
}

public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem> {
    private List<OverlayItem> items;
    private Drawable marker;

    public MyItemizedOverlay(Drawable defaultMarker) {
        super(defaultMarker);
        items = new ArrayList<OverlayItem>();
        marker = defaultMarker;
    }

    @Override
    protected OverlayItem createItem(int index) {
        return items.get(index);
    }

    @Override
    public int size() {
        return items.size();
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        super.draw(canvas, mapView, shadow);
        boundCenterBottom(marker);
    }

    public void addItem(OverlayItem item) {
        items.add(item);
    }

    public void populateNow() {
        populate();
    }

    @Override
    protected boolean onTap(int index) {

        return true;
    }

}

private void initMap() {

    UiSettings settings = getMap().getUiSettings();
    settings.setAllGesturesEnabled(true);
    // settings.setMyLocationButtonEnabled(true);
    settings.isZoomControlsEnabled();
    getMap().setTrafficEnabled(true);
    getMap().getMaxZoomLevel();
    // getMap().setMyLocationEnabled(true);

    if(NearByMapActivity.fltrdNearByLists!=null && !NearByMapActivity.fltrdNearByLists.isEmpty())
    getMap().moveCamera(
            CameraUpdateFactory.newLatLngZoom(
                    new LatLng(Double.parseDouble(NearByMapActivity.fltrdNearByLists.get(0).getLocationLat()), 
                            Double.parseDouble(NearByMapActivity.fltrdNearByLists.get(0).getLocationLong())), 14));
    getMap().isTrafficEnabled();
    // getMap().addGroundOverlay(new GroundOverlayOptions().)

    getMap().setOnMarkerClickListener(this);
    getMap().setOnInfoWindowClickListener(this);

            marker=new MarkerOptions()
                        .position(
                                new LatLng(
                                        Double.parseDouble(item.getLocationLat()), 
                                        Double.parseDouble(item.getLocationLong())))
                        .title(""+item.getStoreTitle())
                        .icon(bitmapLoyalty
                                ).snippet(sbc.toString());
        else
            marker=new MarkerOptions()
        .position(
                new LatLng(
                        Double.parseDouble(item.getLocationLat()), 
                        Double.parseDouble(item.getLocationLong())))
        .title(""+item.getStoreTitle())
        .icon(bitmapIconNearBy
                ).snippet(sbc.toString());

Marker marker1=getMap().addMarker(marker);

PopupWindowAdapter view1=new PopupWindowAdapter();

this.getMap().setInfoWindowAdapter(view1);

        // .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_RED)));

bmp=BitmapFactory.decodeResource(getResources(),R.drawable.orgr_icon);
    }
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);
    initMap();
     getMap().addMarker(new MarkerOptions().position(new
LatLng(36.865814,-119.758399)).icon(BitmapDescriptorFactory.fromResource(R.drawable.red_pin)));
     //getMap().addGroundOverlay(new GroundOverlay(null)); 
```

/* getMap().addGroundOverlay(new GroundOverlayOptions() .image(image) .positionFromBounds(bounds) .transparency(0.5)); */ }

```
@Override
public void onPause() {
    super.onPause();

//getMap().clear();
}
public void onResume(){
    super.onResume();
    if(NearByMapActivity.mainMapView!=null)
        //if(NearByMapActivity.mainMapView.getVisibility()==View.GONE)
                NearByMapActivity.mainMapView.setVisibility(View.VISIBLE);
}

@Override
public boolean onMarkerClick(Marker arg0) {
    // TODO Auto-generated method stub
    Log.e("cleared", "");
    return false;
}

}

public void onStop(){
    super.onStop();
    //getMap().clear();
} 
```

}

MAP ACTIVITY : 启动 Fragment 的 Activity 类。

```
public class NearByMapActivity extends FragmentActivity{

onCreate(){
            FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
            Fragment frag=new DisplayMapFragment();
            transaction.add(R.id.middle_view, frag);
            transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_CLOSE);
            transaction.addToBackStack(null);
            transaction.commit();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T09:37:55.767

非常感谢你！！！！！！！！！！！！！

我试试这个，它的工作就像一个魅力:)

```
public void hideStupidMaps() {
        mMapView.getLayoutParams().height = 1;
        mMapView.getLayoutParams().width = 1;
        mMapView.invalidate();
        mMapView.requestLayout();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T06:20:22.887

您可能会受到此错误的影响： [https ://code.google.com/p/gmaps-api-issues/issues/detail?id=5027&thanks=5027&ts=1362071369](https://code.google.com/p/gmaps-api-issues/issues/detail?id=5027&thanks=5027&ts=1362071369)

# excel - 从 Visual Basic 中的函数返回

> ID：15383648
> 
> 赞同：1
> 
> 时间：2013-03-13T11:11:29.027
> 
> 标签：excel, vba

我必须更新一个 Excel 文件，其中包含一个附加到按钮的 Visual Basic 例程。我试图阻止例程使用空数据运行，并希望提前返回：

```
Sub FillProductDetail()
    Dim wks As Worksheet
    set wks = Worksheets("Product Detail")

    Dim ProductToShow As String
    ProductToShow = wks.Range("C4")
    wks.Rows("5:1000")Delete Shift :=xlUp

    If ProductToShow = "" Then
        Return
    End If

    ..... many lines which take forever if ProductToShow is empty

End Sub 
```

我知道如何在 If 语句中包含函数的其余部分，这是可行的，但是所有内容都进一步向右缩进。我之前在 Basic 中看到过 Return 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:15:19.493

您应该`Exit Sub` 在子程序中使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:18:49.427

你是这个意思吗？

```
Option Explicit

Sub FillProductDetail()
    Dim wks As Worksheet
    Set wks = ThisWorkbook.ActiveSheet

    Dim ProductToShow As String
    ProductToShow = wks.Range("C4")
    wks.Rows("5:1000").Delete Shift:=xlUp

    If ProductToShow = "" Then GoSub MyRoutine
    Exit Sub

MyRoutine:
    MsgBox "Empty cell"
    Return
End Sub 
```

# mysql - ADODB 记录集在传递带有 UNION 的 sql 查询时引发错误

> ID：15383651
> 
> 赞同：0
> 
> 时间：2013-03-13T11:11:40.363
> 
> 标签：mysql, asp-classic

我有一些类似于以下代码的东西。它不断向我抛出一个错误，说明

Microsoft VBScript 运行时错误“800a01b6”

对象不支持此属性或方法：“打开”

UNION 可能是问题所在。请帮忙！

//包含连接字符串

```
<%
SQL = "(SELECT a as id , b as url FROM tbl_a) UNION (SELECT c as id , d as url FROM tbl_b )"

rs=Server.CreateObject("ADODB.Recordset")
rs.Open sql,objConn,3,3

if not rs.eof then

    do while not rs.eof
        response.Write(rs("url") & "<br/>")
        rs.movenext
    loop
else
    Response.Write("not found")

end if
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:15:41.410

创建记录集对象时需要使用Set语句

```
Set rs=Server.CreateObject("ADODB.Recordset") 
```

# .htaccess - 而不是 404 错误，使用 htaccess 重定向到其他站点

> ID：15383653
> 
> 赞同：0
> 
> 时间：2013-03-13T11:11:43.653
> 
> 标签：.htaccess, redirect, http-status-code-301

我们已经将一个站点移动到另一个域并将 htacess 设置如下，但是我如何设置规则“如果页面不存在 -（即 404 错误）重定向到新站点主页。” 用作后备，如果有人关注我们旧网站的损坏网址。

```
<Files ~ "^\.(htaccess|htpasswd)$">
deny from all
</Files>
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.oldsite\.co\.uk)(:80)? [NC]
RewriteRule ^(.*) http://oldsite.co.uk/$1 [R=301,L]

Redirect permanent http://oldsite.co.uk http://newsite.co.uk
Redirect permanent http://oldsite.co.uk/index.html http://newsite.co.uk

Redirect permanent http://oldsite.co.uk/contact-us.html http://newsite.co.uk/contact-us.html
Redirect permanent http://oldsite.co.uk/bespoke-furniture.html http://http://newsite.co.uk/bespoke-furniture.html
Redirect permanent http://oldsite.co.uk/about-us.html http://newsite.co.uk/about-us.html   
Redirect permanent http://oldsite.co.uk/how.html http://newsite.co.uk/about-us.html

order deny,allow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:32:13.960

你可以*简单地*使用它。

```
ErrorDocument 404 http://newsite.co.uk 
```

# mysql - 如何优化这个慢查询？

> ID：15383654
> 
> 赞同：1
> 
> 时间：2013-03-13T11:11:47.387
> 
> 标签：mysql, performance, explain

我有以下运行非常慢的查询（几乎 50000 条记录）

```
SELECT
  news.id,
  news.title,
  DATE_FORMAT(news.date_online,'%d %m %Y')AS newsNL_Date
  news_categories.parent_id
FROM 
  news,
  news_categories
WHERE 
  DATE(news.date_online)=2013-02-25 
  AND news.category_id = news_categories.id
  AND news.date_online < NOW()
  AND news.activated ='t' 
ORDER BY 
  news.date_online DESC 
```

我有 MySQL 客户端版本 5.0.96

当我使用此查询运行 EXPLAIN EXTENDED 调用时，结果如下：

```
id select_type table type possible_keys key key_len ref rows Extra
1 SIMPLE news ref category_id,date_online,activated 激活 1 const 43072 使用 where；使用文件排序
1 SIMPLE news_categories eq_ref PRIMARY,id PRIMARY 4 news_category_id 1      

```

我在以下列有索引 news_id（主键） date_online 已激活 category_id

当我查看 EXPLAIN EXTENDED 结果时，我看到了 USING_WHERE; 使用文件排序。我知道他们两个都很糟糕，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:37:19.483

使用 LEFT JOIN 并查看差异

```
SELECT
  news.id,
  news.title,
  DATE_FORMAT(news.date_online,'%d %m %Y')AS newsNL_Date
  news_categories.parent_id
FROM 
  news
LEFT JOIN news_categories ON news_categories.id = news.category_id
WHERE 
  DATE(news.date_online)= '2013-02-25'
  AND DATE(news.date_online) < DATE(NOW())
  AND news.activated ='t' 
ORDER BY 
  news.date_online DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:16:58.733

尝试为`date_online`（类型 B 树）添加索引。另外，我会尽量避免在 where close 中使用 NOW() ，而是将其设置在变量中并改用该变量。

我想 id 字段是键，所以它们已经被索引了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:00:26.407

除了其他有价值的建议之外，您还有 DATE(news.date_online)=2013-02-25。这似乎会迫使 MySQL 将 news.date_online 转换为表中每一行的不同格式。这将停止索引有用。

可能将其更改为**news.date_online BETWEEN '2013-02-25 00:00:00' AND '2013-02-25 23:59:59'**这应该（我认为）允许使用 date_online 上的索引

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T11:45:52.530

您的查询正在获取特定日期的数据，因此在这种情况下您可以省略该`AND news.date_online < NOW()`部分（也许查询优化器会为您执行此操作）。

在另一种情况下，如果您想要所有活动新闻而不指定 a `date_online`，您也应该摆脱 NOW()。问题是，您的查询不能被数据库缓存，因为它包含每次执行都不同的部分（ NOW() ）。您可以通过在此处提供计算常数来做到这一点。如果您在比较过程中省略了分钟部分，则可以将其缓存为最大值。60 秒。

接下来，您应该为您正在使用的列创建一个多列索引，因为我猜`category_id`,`date_online`并且`activated`几乎用于每个查询。这将使插入速度稍慢一些，但从它的样子（新闻应用程序）来看，读取次数将比插入次数多得多。

# svn - SVN 1.7，单个工作副本和多个客户端

> ID：15383658
> 
> 赞同：0
> 
> 时间：2013-03-13T11:12:07.050
> 
> 标签：svn, subclipse

我有一个在 Subversion 1.6 中运行良好但在 1.7 中不再运行的工作流。

我的代码位于我的笔记本电脑（Mac）上的 Linux 虚拟机中。为了编辑代码，我通过 Samba 将目录挂载到主机上并使用带有 Subclipse 的 Eclipse。

使用 SVN 1.6，我可以在 Linux 命令行上执行“svn switch”，Eclipse 会在刷新项目后看到更改。

在 SVN 1.7 中，情况不再如此。svn 切换后，即使手动刷新，Eclipse 仍然认为它正在使用旧分支。这不仅仅是一个视觉问题，尝试签入代码会将其发送到旧的（错误的）分支。

为什么会发生这种情况，是否有解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:37:44.950

在操作系统之间和/或通过网络共享共享工作副本从来不是推荐或支持的配置。它可能似乎适用于 1.6，但一直有警告说随着时间的推移它可能会不太好用。

随着工作副本格式越来越依赖 SQLite 而不是普通文件，这种情况变得越来越真实。

解决方案：不要这样做。将您的工作副本保存在您的客户本地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:12:01.877

提交本身是通过 Subversion API 完成的，您不需要告诉 API 将其“发送”到哪里。在内部，API 根据它从工作副本元数据中读取的内容来决定。所以说实话，这种情况似乎牵强，不太可能。您是否真的尝试过提交，或者您是否按照 UI 所说的去做？

SVN 1.7 的工作副本布局在 Eclipse 之外完成的更改不会显示在 Eclipse 中。我们添加了一个显式选项（团队 > 清理/刷新）来处理这些场景。这将绕过 Eclipse 的触发器，这些触发器通常会导致刷新并迫使我们去读取 SVN 元数据。

在较旧的 SVN 版本中，因为工作副本元数据存在于每个文件夹中，所以在任何元数据更新时总是会触发正常的 Eclipse 资源刷新。

# jquery - 旋转元素的 IE8 悬停/渲染错误

> ID：15383660
> 
> 赞同：2
> 
> 时间：2013-03-13T11:12:10.860
> 
> 标签：jquery, css, internet-explorer-8

我正在使用 jQuery 插件来生成带有旋转文本标签的水平手风琴。它叫做easyAccordion，演示页面在这里：

[http://www.madeincima.it/download/samples/jquery/easyAccordion/](http://www.madeincima.it/download/samples/jquery/easyAccordion/)

我的问题，即使在他们的演示页面上也很明显，IE8 似乎将旋转元素（插件使用 CSS Microsoft 旋转过滤器）视为可悬停/可点击区域未旋转。这意味着只有按钮的顶部是可点击的，达到元素宽度的大小。奇怪的是，这在 IE7 中可以正常工作，但不能在 IE8 中正常工作。

是否有某种方法（CSS 或其他）可以解决此问题并允许整个元素可点击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:08:13.257

使用 CSS 过滤器旋转实际上只转换 DOM 节点的绘制结果，而不是实际节点本身。这意味着与 DOM 节点的任何交互都不会覆盖与您在屏幕上看到的相同的坐标。

我曾经创建了一个 45 度角的可变长度导航栏，但需要使用实际文本而不是图像。对于 IE，我最终在将鼠标事件委托回原始节点的整个事物上分层透明图像映射。

# postgresql - 循环时插入

> ID：15383664
> 
> 赞同：2
> 
> 时间：2013-03-13T11:12:28.897
> 
> 标签：postgresql, loops, plpgsql, sql-insert

我想在循环时将一些记录插入表中。记录作为 varchar 选项卡传递给函数，即：

```
create function a(tab varchar[]) RETURNS void AS
$$
DECLARE 
  b varchar(20);
BEGIN
  FOREACH b IN ARRAY tab
   LOOP
      INSERT INTO....;
   END LOOP;
  RETURN;
END;
$$
LANGUAGE plpgsql; 
```

但是，执行时出现错误：

```
ERROR:  syntax error at or near "FOREACH"
LINE 1: FOREACH  $1  IN ARRAY tab LOOP INSERT INTO x (c, ...
QUERY:  FOREACH  $1  IN ARRAY tab LOOP INSERT INTO x (c) VALUES ( $1)
CONTEXT:  SQL statement in PL/PgSQL function " near line ...

********** ERROR **********

ERROR: syntax error at or near "FOREACH" 
```

有谁知道为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T01:56:16.870

从 PostgreSQL 9.1 开始，还有一种[内置的方法可以遍历数组切片](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-FOREACH-ARRAY)：

```
FOREACH x SLICE 1 IN ARRAY $1
LOOP
   RAISE NOTICE 'row = %', x;
END LOOP; 
```

where`x`必须是匹配的*数组*类型并且...

> SLICE 值必须是不大于数组维数的整数常量

对于一维数组，只需省略该`SLICE`部分，并且`x`可以是您在问题中显示的简单类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T11:29:15.420

[`FOREACH`](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-FOREACH-ARRAY)构造是在 9.1 中添加的。对于早期版本，您可以通过[`unnest()`](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)以下方式使用函数：

```
CREATE FUNCTION a(tab varchar[]) RETURNS void AS
$$
DECLARE 
  b varchar(20);
BEGIN
  FOR b IN SELECT unnest(tab)
  LOOP
    INSERT INTO x(c) VALUES (b);
  END LOOP;
  RETURN;
END;
$$ LANGUAGE plpgsql; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:12:54.770

我想添加一件事，那就是 unnest 取消了数组的所有级别：

```
select * from unnest(ARRAY[ARRAY[1,2,3],Array[5,6,7]]);
 unnest 
--------
      1
      2
      3
      5
      6
      7
(6 rows) 
```

如果要遍历多维数组的一级，则应改为遍历以下内容

```
 FOR out_count IN
                    array_lower(in_transactions, 1) ..
                    array_upper(in_transactions, 1)
    LOOP
        -- Fill the bulk payments table
        INSERT INTO bulk_payments_in(id, amount)
        VALUES (in_transactions[out_count][1],
                in_transactions[out_count][2]);
    END LOOP; 
```

# python - 为 Python 安装 VTK

> ID：15383666
> 
> 赞同：18
> 
> 时间：2013-03-13T11:12:31.020
> 
> 标签：python, tar, vtk

我正在尝试为 python 安装 VTK 模块，但是我没有成功。我已经下载了一个 VTK tar 文件，但我无法解压它。我能够提取其他 tar 文件，所以我想这个文件一定有一些特定的东西。

这是我的错误：

gzip：标准输入：无效的压缩数据——违反格式 tar：子返回状态 1 tar：错误不可恢复：现在退出

我希望有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T19:38:18.443

答案取决于您使用的操作系统。如果您可以找到适用于您的特定操作系统和/或发行版的软件包或安装程序，这将容易得多。

### Linux

如果您使用的是 Linux，则在发行版的包管理器中查找相应的包。例如，在 Ubuntu Linux 上，您应该能够使用以下命令安装它：

```
sudo apt-get install python-vtk 
```

### 微软Windows

如果您使用的是 Microsoft Windows，最简单的方法是安装[Python(x,y)](https://code.google.com/p/pythonxy/)。它带有VTK支持。

此外，[Anaconda](https://www.anaconda.com/)还包括 VTK 包以及对虚拟环境的支持。对于某些人来说，这可能是一个不错的选择。

### Mac OS X

如果您使用的是 Mac OS X，请尝试通过[MacPorts](http://www.macports.org/)安装所有内容。

* * *

~~正如@Nil 在下面的评论中提到的，VTK 开发人员现在提供了 VTK 的独立 python 接口。[您可以从此处](https://www.vtk.org/download/#latestcand)下载适用于 Windows、Darwin 和 Linux 的它。~~

* * *

正如@Nil 所提到的，VTK 曾经在其[下载](https://vtk.org/download/)页面上提供`vtkpython`二进制文件。[但是，自此处](https://blog.kitware.com/vtk-8-0-0/)提到的 VTK-8.xx 以来，他们已经放弃了这个：

> 对于那个很抱歉。我们决定放弃 8 的 vtkpython 二进制文件。我想把精力集中在支持 python 轮子安装上。目前还没有完整解决方案的时间表，但我们最近在这方面取得了一些良好进展：[https](https://github.com/jcfr/VTKPythonPackage) ://github.com/jcfr/VTKPythonPackage 。

因此，`vtkpython`现在推荐的安装方式是（请参阅[此](https://github.com/KitwareMedical/VTKPythonPackage)页面）：

```
$ python -m pip install --upgrade pip
$ python -m pip install vtk 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-02T02:03:36.267

在 Ubuntu 上，也许这篇文章会有所帮助： http: [//kazenotaiyo.blogspot.jp/2010/06/installing-vtk-in-ubuntu-and-making.html](http://kazenotaiyo.blogspot.jp/2010/06/installing-vtk-in-ubuntu-and-making.html)

*   **最简单的方法**

第一个也是最简单的方法是使用 Aptitude 包管理器安装包：

```
sudo apt-get install libvtk5-dev python-vtk 
```

*   **如果你想要最新版本**

如果你想要最新版本的VTK，你也可以自己构建：

确保已安装 CMake：

```
sudo apt-get install cmake 
```

从下载页面下载 VTK 源代码。

解压它：

```
tar xvzf vtk-5.6.0.tar.gz 
```

创建一个 Out-Of-Source 构建并使用 CMake 进行配置：

```
mkdir VTK_BUILD
cd VTK_BUILD
ccmake ../VTK 
```

确保启用 python 包装并将安装前缀设置为您希望包去的位置。默认的 /usr/local 可以正常工作。

```
sudo make -j 8 install 
```

（ -j 8 for make 只是让构建过程并行假设你有它的处理器）

您现在已经安装了 VTK。恭喜！如果你尝试运行 vtkpython，你会得到一个错误：

vtkpython：加载共享库时出错：libvtksys.so.5.6：无法打开共享对象文件：没有这样的文件或目录

要解决此问题，请将这些行附加到主目录中的 .bash_profile、.bashrc 或 .profile 文件中：

```
# add vtk paths
LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/local/lib/vtk-5.6"
PYTHONPATH="$PYTHONPATH:/usr/local/lib/vtk-5.6" 
```

您现在需要重置终端。

这将为 vtkpython 可执行文件设置您的库和 python 路径。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-04T11:33:22.103

[http://www.lfd.uci.edu/~gohlke/pythonlibs/#vtk](http://www.lfd.uci.edu/~gohlke/pythonlibs/#vtk)试试这个！适用于窗户！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-21T16:15:36.513

我在win7下通过以下方式安装了vtk没有问题`pip`：

```
> pip install vtk
Collecting vtk
  Downloading vtk-8.1.0-cp36-cp36m-win_amd64.whl (24.4MB)
    100% |████████████████████████████████| 24.4MB 56kB/s
Installing collected packages: vtk
Successfully installed vtk-8.1.0 
```

使用蟒蛇蟒：

```
> python
Python 3.6.1 |Continuum Analytics, Inc.| (default, May 11 2017, 13:25:24) [MSC v.1900 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information. 
```

# windows-phone-7 - 如何解决使用 scrollViewer Windows 手机时的内存问题

> ID：15383667
> 
> 赞同：0
> 
> 时间：2013-03-13T11:12:30.903
> 
> 标签：windows-phone-7, windows-phone-8

我正在为 WP8 开发一个应用程序，其中数据来自服务器（云）并且想在滚动查看器中显示大量数据它工作正常只是问题是由于内存问题在一段时间后崩溃我已经检查了性能工具它超过了内存在滚动查看器中限制超过 150 MB 我正在显示来自服务器的图像，请告诉我如果其他人遇到问题，我该如何摆脱这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:39:15.113

如果您使用大量数据，您可以使用增量加载

检查这个：

[Windows 8 系列 - 增量加载](http://rahulpnath.wordpress.com/2012/10/28/windows-8-series-incremental-loading/)

# android - 布局超越另一个布局

> ID：15383673
> 
> 赞同：0
> 
> 时间：2013-03-13T11:12:47.980
> 
> 标签：android

我正在使用`RelativeLayout`.

在 RelativeLayout 中，我有一个我正在使用的 LinearLayout `GridView`。`GridView`正在运行时填充。但是所有的值都没有显示出来。

下面`LinearLayout`有一个`TextView`。我想随着 LinearLayout 的增加，它下面的其他部分应该向下移动。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/firstimage"
    tools:context=".SendMessage" >
<Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="36dp"
        android:text="Add" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="106dp"
        android:ems="10"
        android:inputType="textMultiLine" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/editText1"
        android:layout_marginTop="43dp"
        android:text="Send" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_alignParentLeft="true"
        android:text="To:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button1"
        android:layout_marginTop="78dp"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <LinearLayout
        android:id="@+id/linear"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textView2"
        android:layout_alignTop="@+id/button1"
        android:layout_toLeftOf="@+id/button1"
        android:layout_toRightOf="@+id/textView1"
        android:orientation="vertical" >

    </LinearLayout>

</RelativeLayout> 
```

这是我设置gridview的代码

ViewGroup 布局=(ViewGroup)findViewById(R.id.linear);

```
 // gridview = (GridView) findViewById(R.id.gridView1);
            gridview=new GridView(getBaseContext());

             String[] items = { "this", "is", "a", "really", "really2", "really3",
                    "really4", "really5", "silly", "list" };
             ArrayAdapter<String> aa = new ArrayAdapter<String>(
                    this,
                    android.R.layout.simple_list_item_1, 
                items);

            gridview.setAdapter(aa);
             layout.addView(gridview); 
```

# java - android旋转矩阵转换

> ID：15383678
> 
> 赞同：1
> 
> 时间：2013-03-13T10:07:35.850
> 
> 标签：java, android, accelerometer

android使用以下代码计算旋转矩阵：

```
float Ax = gravity[0];
float Ay = gravity[1];
float Az = gravity[2];
final float Ex = geomagnetic[0];
final float Ey = geomagnetic[1];
final float Ez = geomagnetic[2];
float Hx = Ey*Az - Ez*Ay;
float Hy = Ez*Ax - Ex*Az;
float Hz = Ex*Ay - Ey*Ax;
final float normH = (float)Math.sqrt(Hx*Hx + Hy*Hy + Hz*Hz);
if (normH < 0.1f) {
    // device is close to free fall (or in space?), or close to
    // magnetic north pole. Typical values are  > 100.
    return false;
}
final float invH = 1.0f / normH;
Hx *= invH;
Hy *= invH;
Hz *= invH;
final float invA = 1.0f / (float)Math.sqrt(Ax*Ax + Ay*Ay + Az*Az);
Ax *= invA;
Ay *= invA;
Az *= invA;
final float Mx = Ay*Hz - Az*Hy;
final float My = Az*Hx - Ax*Hz;
final float Mz = Ax*Hy - Ay*Hx;
if (R != null) {
    if (R.length == 9) {
        R[0] = Hx;     R[1] = Hy;     R[2] = Hz;
        R[3] = Mx;     R[4] = My;     R[5] = Mz;
        R[6] = Ax;     R[7] = Ay;     R[8] = Az;
    } else if (R.length == 16) {
        R[0]  = Hx;    R[1]  = Hy;    R[2]  = Hz;   R[3]  = 0;
        R[4]  = Mx;    R[5]  = My;    R[6]  = Mz;   R[7]  = 0;
        R[8]  = Ax;    R[9]  = Ay;    R[10] = Az;   R[11] = 0;
        R[12] = 0;     R[13] = 0;     R[14] = 0;    R[15] = 1;
    }
} 
```

我想知道这背后的逻辑是什么。我应该如何使用加速度计和磁力计来获得旋转矩阵？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:19:26.137

带注释的，删除了角盒处理：

```
// Down vector
float Ax = gravity[0];
float Ay = gravity[1];
float Az = gravity[2];

// North vector
final float Ex = geomagnetic[0];
final float Ey = geomagnetic[1];
final float Ez = geomagnetic[2]; 
```

H 垂直于 E 和 A

```
// H = E x A
float Hx = Ey*Az - Ez*Ay;
float Hy = Ez*Ax - Ex*Az;
float Hz = Ex*Ay - Ey*Ax;
final float normH = (float)Math.sqrt(Hx*Hx + Hy*Hy + Hz*Hz); 
```

矩阵中的每一列的长度应为 1

```
// Force H to unit length
final float invH = 1.0f / normH;
Hx *= invH;
Hy *= invH;
Hz *= invH;

// Force A to unit length
final float invA = 1.0f / (float)Math.sqrt(Ax*Ax + Ay*Ay + Az*Az);
Ax *= invA;
Ay *= invA;
Az *= invA; 
```

由于 A 垂直于 H，并且两者都是单位长度，因此 M 也必须具有单位长度，所以这里不需要归一化。

```
// M = A x H
// Forward vector
final float Mx = Ay*Hz - Az*Hy;
final float My = Az*Hx - Ax*Hz;
final float Mz = Ax*Hy - Ay*Hx; 
```

H、M、A相互垂直，所以我们有一个旋转矩阵

```
R[0] = Hx;     R[1] = Hy;     R[2] = Hz;
R[3] = Mx;     R[4] = My;     R[5] = Mz;
R[6] = Ax;     R[7] = Ay;     R[8] = Az; 
```

# php - jQuery ajax 返回“对象对象”

> ID：15383680
> 
> 赞同：1
> 
> 时间：2013-03-13T11:13:13.573
> 
> 标签：php, jquery

我正在尝试使用 jQuery Ajax 将数据发送到 PHP 脚本。由于某种原因，Ajax 请求引发错误并从 PHP 脚本返回以下数据 -`[object Object]`

我在下面复制了我的代码。我还在页面其他地方使用完全相同的方法复制了代码，这似乎工作正常！

谁能解释为什么会这样？

首先，工作正常的代码

**jQuery**

```
 $("#reqtable a").click(function(){
  var cells = []; 
  var name;
  var account;
  var module;
  var email;
  $(this).parent().parent().find("td").each(function(){
  cells.push($(this).html());
  });
  $(this).parent().parent().find("input").each(function(){
  email = $(this).val();
  });
  $(this).parent().parent().prop('id', 'die');
  name = cells[0];
  account = cells[1];
  module = cells [2];

  $.ajax({
            url: "release.php",
            type: "POST",
            data: {name: name, account: account, module: module, email: email},
            success: function(){
            $("#die").remove();
           }
         });
 }); 
```

**PHP**

```
<?php
include('../../dbconnect.php');

$name = $_POST['name'];
$account = $_POST['account'];
$email = $_POST['email'];
$module = $_POST['module'];

$releasequery = "INSERT INTO release_assignment(name, account, email, module) VALUES ('$name', '$account', '$email', '$module')";
$release = $conn->query($releasequery);

$erasequery = "DELETE FROM request_assignment WHERE email='$email' AND module = $module";
$erase = $conn->query($erasequery);

?> 
```

现在代码不起作用。

**jQuery**

```
 $("#downloadtable a").click(function(){
  var dlcells = []; 
  var dlname;
  var dlaccount;
  var dlmodule;
  var dlemail;
  var dlsub;
  var dlpath;

  $(this).parent().parent().find("td").each(function(){
  dlcells.push($(this).html());
  });
  $(this).parent().parent().find("input.dlemail").each(function(){
  dlemail = $(this).val();
  });
  $(this).parent().parent().find("input.dlsub").each(function(){
  dlsub = $(this).val();
  });
  $(this).parent().parent().find("input.dlpath").each(function(){
  dlpath = $(this).val();
  });

  $(this).parent().parent().prop('id', 'die2');
  dlname = dlcells[0];
  dlaccount = dlcells[1];
  dlmodule = dlcells [2];

  $.ajax({
            url: "download.php",
            type: "POST",
            data: {dlname: dlname, dlaccount: dlaccount, dlmodule: dlmodule, dlemail: dlemail, dlsub: dlsub, dlpath: dlpath},
            success: function(data){
            $("#die2").remove();
            },
            error: function(data){
             $('#downloaddiv').html('<p>' + data + '</p>');
            }
         });
 }); 
```

**PHP**

```
<?php
include('../../dbconnect.php');

$name = $_POST['dlname'];
$email = $_POST['dlemail'];
$account = $_POST['dlaccount'];
$module = $_POST['dlmodule'];
$path = $_POST['dlpath'];
$submission = $_POST['dlsub'];

$feedbackquery = "INSERT INTO feedback_assignments(name, email, level, unit, assignmentpath, submission) VALUES ('$name', $email, '$account', '$module', '$path', '$submission')";
$feedback = $conn->query($feedbackquery);

$erasequery = "DELETE FROM uploaded_assignments WHERE email='$email' AND unit = $module";
$erase = $conn->query($erasequery);

?> 
```

当我注释掉所有 PHP 代码并简单地把`echo ($_POST['dlname']);`它返回数据`[object Object]`

谁能解释发生了什么以及为什么它似乎与一个代码块一起工作而不是另一个？

谢谢！

克里斯

**更新：**可能值得一提的是，初始链接`('#downloadtable a')`实际上会引发文件下载以及 ajax 调用，而在正在运行的代码中，它只是进行 ajax 调用，没有别的。我不知道这是否是在投入使用，但我认为值得一提。

**更新 2：**使用如下所述的 jQuery Ajax 错误回调，我得到以下响应：

```
{"readyState":0,"responseText":"","status":0,"statusText":"error"} 
AJAX error: error : 
```

我在错误回调中使用的代码如下：

```
error: function(jqXHR, textStatus, errorThrown) {
   console.log(JSON.stringify(jqXHR));
   console.log("AJAX error: " + textStatus + ' : ' + errorThrown);
   } 
```

不幸的是，我不明白这意味着什么。任何人都可以对此有所了解吗？

**更新 3**好的，我找到了 Ajax 对我大发雷霆的原因，它与更新 1（上图）有关。基本上因为链接是文件下载（.docx 文件），它似乎导致了 ajax 的问题。当我将链接更改为，`href='#'`而不是`href="document.docx"`，ajax 和 PHP 脚本工作。

当然，这引发了一个新问题——如何在更新数据库的同时获取下载文件的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:16:47.940

指定 a[`dataType`](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)并用于[`console`](https://developer.mozilla.org/en-US/docs/DOM/console)调试数据响应。

另外，请注意`error`回调包含以下参数，而不是任何“数据”；

> **错误**类型：函数（jqXHR jqXHR，字符串 textStatus，字符串 errorThrown ）

**更新**

目标文件`download.php`可能会引发异常。可能是因为行中缺少一些引号`$email`；

`$feedbackquery = "INSERT INTO feedback_assignments(name, email, level, unit, assignmentpath, submission) VALUES ('$name', $email, '$account', '$module', '$path', '$submission')";`

调试`download.php`并确保它生成预期的输出/响应。

我建议您转义用于构建 SQL 查询的值，以防止 SQL 注入。

# vb.net - 上下文菜单条的位置

> ID：15383681
> 
> 赞同：1
> 
> 时间：2013-03-13T11:13:15.170
> 
> 标签：vb.net

我的表单上有一个上下文菜单条，右键单击 datagridview 时显示。
问题是菜单显示在右上角，而我想在单击鼠标的位置显示它。

请指教。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:41:43.213

DataGridView 可以在 MouseDown 单击事件的位置自动显示 ContextMenuStrip。

为此，必须将属性 ContextMenuStrip 关联到菜单条的实际实例。您可以通过代码或直接在设计器中执行此操作

```
 DataGridView1.ContextMenuStrip = ctxMenu; 
```

# c# - 以当前用户身份从 Windows 服务运行进程

> ID：15383684
> 
> 赞同：10
> 
> 时间：2013-03-13T11:13:23.907
> 
> 标签：c#, windows-services

我目前有一个在系统帐户下运行的 Windows 服务。我的问题是我需要以当前登录用户的身份从服务中启动某些进程。我有所有代码等来获取当前登录的用户/活动会话。

我的问题是我需要作为登录用户生成一个进程，但不知道用户凭据等。

该服务是.net 编译的服务，我希望我需要使用一些 Pinvoke 方法来获取当前用户进程之一的句柄，以便将其复制并作为带有句柄的进程午餐。

不幸的是，我找不到任何关于如何实现它的好的文档/解决方案？

如果有人能给我一些指导/示例，我将不胜感激。

*** 更新 *** 我认为我的解释有误，需要根据我的实际需要重新调整。我不一定想启动一个新进程，我只想模拟登录用户。我已经非常专注于查看 CreateProcess 等，我带领自己走上了一条作为当前登录用户创建新进程的路径（这不是我特别想做的）。

反过来，我只想在当前用户上下文下运行一些代码（模拟当前登录用户）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T11:30:50.630

一种选择是让后台应用程序在用户登录时自动启动，并通过 WCF 或 thrift 侦听来自您的服务的命令，或者仅通过监视某些文件并从那里读取命令。

另一种选择是执行您最初要求的操作 - 使用 Windows API 启动。但是代码很吓人。这是一个示例，您可以使用。它将使用 CreateProcessInConsoleSession 方法在当前活动的用户会话下执行任何命令行：

```
internal class ApplicationLauncher
{
    public enum TOKEN_INFORMATION_CLASS
    {
        TokenUser = 1,
        TokenGroups,
        TokenPrivileges,
        TokenOwner,
        TokenPrimaryGroup,
        TokenDefaultDacl,
        TokenSource,
        TokenType,
        TokenImpersonationLevel,
        TokenStatistics,
        TokenRestrictedSids,
        TokenSessionId,
        TokenGroupsAndPrivileges,
        TokenSessionReference,
        TokenSandBoxInert,
        TokenAuditPolicy,
        TokenOrigin,
        MaxTokenInfoClass // MaxTokenInfoClass should always be the last enum
    }

    public const int READ_CONTROL = 0x00020000;

    public const int STANDARD_RIGHTS_REQUIRED = 0x000F0000;

    public const int STANDARD_RIGHTS_READ = READ_CONTROL;
    public const int STANDARD_RIGHTS_WRITE = READ_CONTROL;
    public const int STANDARD_RIGHTS_EXECUTE = READ_CONTROL;

    public const int STANDARD_RIGHTS_ALL = 0x001F0000;

    public const int SPECIFIC_RIGHTS_ALL = 0x0000FFFF;

    public const int TOKEN_ASSIGN_PRIMARY = 0x0001;
    public const int TOKEN_DUPLICATE = 0x0002;
    public const int TOKEN_IMPERSONATE = 0x0004;
    public const int TOKEN_QUERY = 0x0008;
    public const int TOKEN_QUERY_SOURCE = 0x0010;
    public const int TOKEN_ADJUST_PRIVILEGES = 0x0020;
    public const int TOKEN_ADJUST_GROUPS = 0x0040;
    public const int TOKEN_ADJUST_DEFAULT = 0x0080;
    public const int TOKEN_ADJUST_SESSIONID = 0x0100;

    public const int TOKEN_ALL_ACCESS_P = (STANDARD_RIGHTS_REQUIRED |
                                           TOKEN_ASSIGN_PRIMARY |
                                           TOKEN_DUPLICATE |
                                           TOKEN_IMPERSONATE |
                                           TOKEN_QUERY |
                                           TOKEN_QUERY_SOURCE |
                                           TOKEN_ADJUST_PRIVILEGES |
                                           TOKEN_ADJUST_GROUPS |
                                           TOKEN_ADJUST_DEFAULT);

    public const int TOKEN_ALL_ACCESS = TOKEN_ALL_ACCESS_P | TOKEN_ADJUST_SESSIONID;

    public const int TOKEN_READ = STANDARD_RIGHTS_READ | TOKEN_QUERY;

    public const int TOKEN_WRITE = STANDARD_RIGHTS_WRITE |
                                   TOKEN_ADJUST_PRIVILEGES |
                                   TOKEN_ADJUST_GROUPS |
                                   TOKEN_ADJUST_DEFAULT;

    public const int TOKEN_EXECUTE = STANDARD_RIGHTS_EXECUTE;

    public const uint MAXIMUM_ALLOWED = 0x2000000;

    public const int CREATE_NEW_PROCESS_GROUP = 0x00000200;
    public const int CREATE_UNICODE_ENVIRONMENT = 0x00000400;

    public const int IDLE_PRIORITY_CLASS = 0x40;
    public const int NORMAL_PRIORITY_CLASS = 0x20;
    public const int HIGH_PRIORITY_CLASS = 0x80;
    public const int REALTIME_PRIORITY_CLASS = 0x100;

    public const int CREATE_NEW_CONSOLE = 0x00000010;

    public const string SE_DEBUG_NAME = "SeDebugPrivilege";
    public const string SE_RESTORE_NAME = "SeRestorePrivilege";
    public const string SE_BACKUP_NAME = "SeBackupPrivilege";

    public const int SE_PRIVILEGE_ENABLED = 0x0002;

    public const int ERROR_NOT_ALL_ASSIGNED = 1300;

    private const uint TH32CS_SNAPPROCESS = 0x00000002;

    public static int INVALID_HANDLE_VALUE = -1;

    [DllImport("advapi32.dll", SetLastError = true)]
    public static extern bool LookupPrivilegeValue(IntPtr lpSystemName, string lpname,
        [MarshalAs(UnmanagedType.Struct)] ref LUID lpLuid);

    [DllImport("advapi32.dll", EntryPoint = "CreateProcessAsUser", SetLastError = true, CharSet = CharSet.Ansi,
        CallingConvention = CallingConvention.StdCall)]
    public static extern bool CreateProcessAsUser(IntPtr hToken, String lpApplicationName, String lpCommandLine,
        ref SECURITY_ATTRIBUTES lpProcessAttributes,
        ref SECURITY_ATTRIBUTES lpThreadAttributes, bool bInheritHandle, int dwCreationFlags, IntPtr lpEnvironment,
        String lpCurrentDirectory, ref STARTUPINFO lpStartupInfo, out PROCESS_INFORMATION lpProcessInformation);

    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern bool DuplicateToken(IntPtr ExistingTokenHandle,
        int SECURITY_IMPERSONATION_LEVEL, ref IntPtr DuplicateTokenHandle);

    [DllImport("advapi32.dll", EntryPoint = "DuplicateTokenEx")]
    public static extern bool DuplicateTokenEx(IntPtr ExistingTokenHandle, uint dwDesiredAccess,
        ref SECURITY_ATTRIBUTES lpThreadAttributes, int TokenType,
        int ImpersonationLevel, ref IntPtr DuplicateTokenHandle);

    [DllImport("advapi32.dll", SetLastError = true)]
    public static extern bool AdjustTokenPrivileges(IntPtr TokenHandle, bool DisableAllPrivileges,
        ref TOKEN_PRIVILEGES NewState, int BufferLength, IntPtr PreviousState, IntPtr ReturnLength);

    [DllImport("advapi32.dll", SetLastError = true)]
    public static extern bool SetTokenInformation(IntPtr TokenHandle, TOKEN_INFORMATION_CLASS TokenInformationClass,
        ref uint TokenInformation, uint TokenInformationLength);

    [DllImport("userenv.dll", SetLastError = true)]
    public static extern bool CreateEnvironmentBlock(ref IntPtr lpEnvironment, IntPtr hToken, bool bInherit);

    public static bool CreateProcessInConsoleSession(String CommandLine, bool bElevate)
    {

        PROCESS_INFORMATION pi;

        bool bResult = false;
        uint dwSessionId, winlogonPid = 0;
        IntPtr hUserToken = IntPtr.Zero, hUserTokenDup = IntPtr.Zero, hPToken = IntPtr.Zero, hProcess = IntPtr.Zero;

        Debug.Print("CreateProcessInConsoleSession");
        // Log the client on to the local computer.
        dwSessionId = WTSGetActiveConsoleSessionId();

        // Find the winlogon process
        var procEntry = new PROCESSENTRY32();

        uint hSnap = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);
        if (hSnap == INVALID_HANDLE_VALUE)
        {
            return false;
        }

        procEntry.dwSize = (uint) Marshal.SizeOf(procEntry); //sizeof(PROCESSENTRY32);

        if (Process32First(hSnap, ref procEntry) == 0)
        {
            return false;
        }

        String strCmp = "explorer.exe";
        do
        {
            if (strCmp.IndexOf(procEntry.szExeFile) == 0)
            {
                // We found a winlogon process...make sure it's running in the console session
                uint winlogonSessId = 0;
                if (ProcessIdToSessionId(procEntry.th32ProcessID, ref winlogonSessId) &&
                    winlogonSessId == dwSessionId)
                {
                    winlogonPid = procEntry.th32ProcessID;
                    break;
                }
            }
        }
        while (Process32Next(hSnap, ref procEntry) != 0);

        //Get the user token used by DuplicateTokenEx
        WTSQueryUserToken(dwSessionId, ref hUserToken);

        var si = new STARTUPINFO();
        si.cb = Marshal.SizeOf(si);
        si.lpDesktop = "winsta0\\default";
        var tp = new TOKEN_PRIVILEGES();
        var luid = new LUID();
        hProcess = OpenProcess(MAXIMUM_ALLOWED, false, winlogonPid);

        if (
            !OpenProcessToken(hProcess,
                TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY | TOKEN_DUPLICATE | TOKEN_ASSIGN_PRIMARY
                | TOKEN_ADJUST_SESSIONID | TOKEN_READ | TOKEN_WRITE, ref hPToken))
        {
            Debug.Print(String.Format("CreateProcessInConsoleSession OpenProcessToken error: {0}",
                Marshal.GetLastWin32Error()));
        }

        if (!LookupPrivilegeValue(IntPtr.Zero, SE_DEBUG_NAME, ref luid))
        {
            Debug.Print(String.Format("CreateProcessInConsoleSession LookupPrivilegeValue error: {0}",
                Marshal.GetLastWin32Error()));
        }

        var sa = new SECURITY_ATTRIBUTES();
        sa.Length = Marshal.SizeOf(sa);

        if (!DuplicateTokenEx(hPToken, MAXIMUM_ALLOWED, ref sa,
                (int) SECURITY_IMPERSONATION_LEVEL.SecurityIdentification, (int) TOKEN_TYPE.TokenPrimary,
                ref hUserTokenDup))
        {
            Debug.Print(
                String.Format(
                    "CreateProcessInConsoleSession DuplicateTokenEx error: {0} Token does not have the privilege.",
                    Marshal.GetLastWin32Error()));
            CloseHandle(hProcess);
            CloseHandle(hUserToken);
            CloseHandle(hPToken);
            return false;
        }

        if (bElevate)
        {
            //tp.Privileges[0].Luid = luid;
            //tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;

            tp.PrivilegeCount = 1;
            tp.Privileges = new int[3];
            tp.Privileges[2] = SE_PRIVILEGE_ENABLED;
            tp.Privileges[1] = luid.HighPart;
            tp.Privileges[0] = luid.LowPart;

            //Adjust Token privilege
            if (
                !SetTokenInformation(hUserTokenDup, TOKEN_INFORMATION_CLASS.TokenSessionId, ref dwSessionId,
                    (uint) IntPtr.Size))
            {
                Debug.Print(
                    String.Format(
                        "CreateProcessInConsoleSession SetTokenInformation error: {0} Token does not have the privilege.",
                        Marshal.GetLastWin32Error()));
                //CloseHandle(hProcess);
                //CloseHandle(hUserToken);
                //CloseHandle(hPToken);
                //CloseHandle(hUserTokenDup);
                //return false;
            }
            if (
                !AdjustTokenPrivileges(hUserTokenDup, false, ref tp, Marshal.SizeOf(tp), /*(PTOKEN_PRIVILEGES)*/
                    IntPtr.Zero, IntPtr.Zero))
            {
                int nErr = Marshal.GetLastWin32Error();

                if (nErr == ERROR_NOT_ALL_ASSIGNED)
                {
                    Debug.Print(
                        String.Format(
                            "CreateProcessInConsoleSession AdjustTokenPrivileges error: {0} Token does not have the privilege.",
                            nErr));
                }
                else
                {
                    Debug.Print(String.Format("CreateProcessInConsoleSession AdjustTokenPrivileges error: {0}", nErr));
                }
            }
        }

        uint dwCreationFlags = NORMAL_PRIORITY_CLASS | CREATE_NEW_CONSOLE;
        IntPtr pEnv = IntPtr.Zero;
        if (CreateEnvironmentBlock(ref pEnv, hUserTokenDup, true))
        {
            dwCreationFlags |= CREATE_UNICODE_ENVIRONMENT;
        }
        else
        {
            pEnv = IntPtr.Zero;
        }
        // Launch the process in the client's logon session.
        bResult = CreateProcessAsUser(hUserTokenDup, // client's access token
            null, // file to execute
            CommandLine, // command line
            ref sa, // pointer to process SECURITY_ATTRIBUTES
            ref sa, // pointer to thread SECURITY_ATTRIBUTES
            false, // handles are not inheritable
            (int) dwCreationFlags, // creation flags
            pEnv, // pointer to new environment block 
            null, // name of current directory 
            ref si, // pointer to STARTUPINFO structure
            out pi // receives information about new process
            );
        // End impersonation of client.

        //GetLastError should be 0
        int iResultOfCreateProcessAsUser = Marshal.GetLastWin32Error();

        //Close handles task
        CloseHandle(hProcess);
        CloseHandle(hUserToken);
        CloseHandle(hUserTokenDup);
        CloseHandle(hPToken);

        return (iResultOfCreateProcessAsUser == 0) ? true : false;
    }

    [DllImport("kernel32.dll")]
    private static extern int Process32First(uint hSnapshot, ref PROCESSENTRY32 lppe);

    [DllImport("kernel32.dll")]
    private static extern int Process32Next(uint hSnapshot, ref PROCESSENTRY32 lppe);

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern uint CreateToolhelp32Snapshot(uint dwFlags, uint th32ProcessID);

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern bool CloseHandle(IntPtr hSnapshot);

    [DllImport("kernel32.dll")]
    private static extern uint WTSGetActiveConsoleSessionId();

    [DllImport("Wtsapi32.dll")]
    private static extern uint WTSQueryUserToken(uint SessionId, ref IntPtr phToken);

    [DllImport("kernel32.dll")]
    private static extern bool ProcessIdToSessionId(uint dwProcessId, ref uint pSessionId);

    [DllImport("kernel32.dll")]
    private static extern IntPtr OpenProcess(uint dwDesiredAccess, bool bInheritHandle, uint dwProcessId);

    [DllImport("advapi32", SetLastError = true)]
    [SuppressUnmanagedCodeSecurity]
    private static extern bool OpenProcessToken(IntPtr ProcessHandle, // handle to process
        int DesiredAccess, // desired access to process
        ref IntPtr TokenHandle);

    #region Nested type: LUID

    [StructLayout(LayoutKind.Sequential)]
    internal struct LUID
    {
        public int LowPart;
        public int HighPart;
    }

    #endregion

    //end struct

    #region Nested type: LUID_AND_ATRIBUTES

    [StructLayout(LayoutKind.Sequential)]
    internal struct LUID_AND_ATRIBUTES
    {
        public LUID Luid;
        public int Attributes;
    }

    #endregion

    #region Nested type: PROCESSENTRY32

    [StructLayout(LayoutKind.Sequential)]
    private struct PROCESSENTRY32
    {
        public uint dwSize;
        public readonly uint cntUsage;
        public readonly uint th32ProcessID;
        public readonly IntPtr th32DefaultHeapID;
        public readonly uint th32ModuleID;
        public readonly uint cntThreads;
        public readonly uint th32ParentProcessID;
        public readonly int pcPriClassBase;
        public readonly uint dwFlags;

        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)]
        public readonly string szExeFile;
    }

    #endregion

    #region Nested type: PROCESS_INFORMATION

    [StructLayout(LayoutKind.Sequential)]
    public struct PROCESS_INFORMATION
    {
        public IntPtr hProcess;
        public IntPtr hThread;
        public uint dwProcessId;
        public uint dwThreadId;
    }

    #endregion

    #region Nested type: SECURITY_ATTRIBUTES

    [StructLayout(LayoutKind.Sequential)]
    public struct SECURITY_ATTRIBUTES
    {
        public int Length;
        public IntPtr lpSecurityDescriptor;
        public bool bInheritHandle;
    }

    #endregion

    #region Nested type: SECURITY_IMPERSONATION_LEVEL

    private enum SECURITY_IMPERSONATION_LEVEL
    {
        SecurityAnonymous = 0,
        SecurityIdentification = 1,
        SecurityImpersonation = 2,
        SecurityDelegation = 3,
    }

    #endregion

    #region Nested type: STARTUPINFO

    [StructLayout(LayoutKind.Sequential)]
    public struct STARTUPINFO
    {
        public int cb;
        public String lpReserved;
        public String lpDesktop;
        public String lpTitle;
        public uint dwX;
        public uint dwY;
        public uint dwXSize;
        public uint dwYSize;
        public uint dwXCountChars;
        public uint dwYCountChars;
        public uint dwFillAttribute;
        public uint dwFlags;
        public short wShowWindow;
        public short cbReserved2;
        public IntPtr lpReserved2;
        public IntPtr hStdInput;
        public IntPtr hStdOutput;
        public IntPtr hStdError;
    }

    #endregion

    #region Nested type: TOKEN_PRIVILEGES

    [StructLayout(LayoutKind.Sequential)]
    internal struct TOKEN_PRIVILEGES
    {
        internal int PrivilegeCount;
        //LUID_AND_ATRIBUTES
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 3)]
        internal int[] Privileges;
    }

    #endregion

    #region Nested type: TOKEN_TYPE

    private enum TOKEN_TYPE
    {
        TokenPrimary = 1,
        TokenImpersonation = 2
    }

    #endregion

    // handle to open access token
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-13T11:31:17.723

与此类有关 Windows 服务的问题很常见，您是在单用户操作系统的思维模式中操作的。您决定将应用程序编写为服务的全部原因是因为您在单用户操作系统的心理模型和多用户操作系统的现实之间遇到了冲突。不幸的是，一项服务并没有解决你所有的问题，现在你正试图弄清楚如何在最终注定要被黑的设计中完成第二步。

事实是，您不能保证存在***“***登录用户”。如果没有人登录到工作站，将没有人登录，但您的服务仍将运行。

即使您通过确保某人*始终*登录（不可能）以某种方式克服了这一点，那么您也会遇到*多个*用户登录的情况。那么您的服务应该从哪一个开始该过程？它应该只是随机选择其中一个吗？

在您的情况下，是否有必要区分本地登录到控制台的用户和远程登录的用户？请记住，远程用户没有本地控制台。

如果您能以某种方式克服所有这些障碍（不幸的是，可能是把头埋在沙子里并继续假装 Windows 是单用户操作系统），您可以使用该[`WTSGetActiveConsoleSessionId`](http://msdn.microsoft.com/en-us/library/aa383835.aspx)函数来获取当前会话 ID，即[`WTSQueryUserToken`](http://msdn.microsoft.com/en-us/library/aa383840.aspx)获取与该会话 ID 对应的用户令牌的函数，最后是[`CreateProcessAsUser`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429.aspx)在该用户的上下文中启动您的进程的函数。如果有的话。他们拥有适当的特权。并且物理控制台未附加到虚拟会话。而且您没有运行允许多个活动控制台会话的服务器 SKU。和…

如果您可以决定要使用其帐户启动辅助进程的特定用户，则可以登录该用户，操作其用户令牌，执行该进程，最后关闭该进程并注销该用户。该[`CreateProcessWithLogonUser`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682431.aspx)为您完成了许多繁琐的工作，使代码更加简洁。但是外表可能具有欺骗性，这仍然具有一些*巨大的*安全隐患，如果您首先提出这个问题，您可能并不完全理解。你真的不能不了解这样的安全风险。

此外，登录的用户[`LogonUser`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184.aspx)（使用该`CreateProcessWithLogonUser`功能时会自动为您完成）缺少可以启动交互式进程的窗口站和桌面。因此，如果您希望在该用户的上下文中启动的进程将显示任何类型的 UI，那么您就不走运了。一旦 Windows 尝试访问缺少必要权限的桌面，它就会终止您的应用程序。没有办法从 Windows 服务获取对您有用的桌面句柄（这对于解释您可能已经知道的一般规则有很长的路要走，即服务不能显示任何类型的 UI）。

# javascript - 是否有浏览器支持或任何插件，在悬停在元素中时将 html 元素的 ID 或 NAME 显示为工具提示？

> ID：15383689
> 
> 赞同：1
> 
> 时间：2013-03-13T11:13:47.080
> 
> 标签：javascript, jquery, plugins, browser

我想要一个[类似于这个例子的解决方案](http://jsfiddle.net/yrojha4ever/t4hZK/5/)

```
$('#field2').attr('title', 'student_Name'); 
```

但以另一种方式，正如我在下面解释的那样！

在使用浏览器的开发工具或使用 firebug 插件测试 web 程序时，**检查元素**可以帮助我们了解任何元素的 id 或名称或整个结构的详细信息。

现在我只想**在不编写任何 javascript 或 jquery 代码的情况下将鼠标悬停在任何元素中时，将所选元素的 id 或名称显示为工具提示**。

这个要求是因为，我的网站是*日语*的。
所有标签均以日文显示，其 id 或 name 属性的名称为英文（*等于日文翻译成英文，例如：学生名 -> 学生名*）。

这将有助于轻松找出所选元素的英文名称，而无需将其标签文本翻译为日文名称。
我认为这将帮助许多像我一样使用英语以外的语言工作的程序员！

是否有浏览器工具或插件或任何其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:24:09.847

您可以为此编写简单的 CSS 调试规则：

```
label {
    position: relative;
}
label:hover:after {
    content: attr(for);
    position: absolute;
    top: 100%;
    right: 0;
    background-color: rgba(0, 0, 0, .7);
    border-radius: 5px;
    color: #FFF;
    padding: 2px 4px 3px;
} 
```

[http://jsfiddle.net/dfsq/zMX5w/1/](http://jsfiddle.net/dfsq/zMX5w/1/)

# c# - 当某个值超过 Windows Phone 8 时禁用滑块控件

> ID：15383694
> 
> 赞同：0
> 
> 时间：2013-03-13T11:13:58.940
> 
> 标签：c#, slider, windows-phone-8

我有一个调整位图大小的滑块控件。当位图大小超过屏幕宽度时，我想禁止进一步更改值，但允许减小值。

到目前为止，当位图大小超过屏幕宽度时，我将滑块设置为 IsEnabled 属性为 false 基本上禁用滑块。但是当用户只向左滑动拇指（减小值）时，我如何再次启用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:46:50.887

您最好处理 内部的限制`ValueChanged`，而不是禁用控件以避免您看到的问题。

或者更好的是，当您知道原始位图的尺寸时，您可以计算滑块的最大允许值。您可以在运行时设置它，然后可能允许您完全避开它。

# zend-framework - Zend Framework Mail：传入邮件的 Base64 标头编码

> ID：15383696
> 
> 赞同：1
> 
> 时间：2013-03-13T11:14:12.543
> 
> 标签：zend-framework, header, base64, imap, pop3

我尝试使用 Zend Framework 1.12 从我的 POP3/IMAP 帐户下载电子邮件，它运行良好。QP 标头字段将自动解码。但是，当标头字段（来自名称或主题）采用 base64 编码时，如下所示：

```
=?UTF-8?B?c3DEvsWIYcWl?= 
```

它不会自动对其进行base64解码。不知道为什么。虽然修复这种“我的方式”很容易，但我想把它做好。

任何人都可以推荐一种处理base64标头的好方法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:58:08.157

您可以使用[iconv_mime_decode_headers()](http://php.net/manual/en/function.iconv-mime-decode-headers.php) PHP 函数。

```
 $decoded = iconv_mime_decode_headers('Subject: '.$subject, 0, "UTF-8");
   var_dump(decoded['Subject']); 
```

请注意，您可以将多个标头参数传递给一个函数，方法是用换行符或“\n”分隔它们。例如

```
 $headers = "Subject: {$subject}\nFrom: {$from}";
   $decoded = iconv_mime_decode_headers($headers, 0, "UTF-8"); 
```

在这种情况下，您将获得带有“主题”和“来自”键的数组以及解码数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:50:54.717

它负责`mail mime parsers`解码邮件标头。网上有开源`base64 decoders`可用于解码这些字符串。

# android - 微调器文本不可见

> ID：15383697
> 
> 赞同：0
> 
> 时间：2013-03-13T11:14:15.320
> 
> 标签：android, spinner

我正在尝试但`setText`在`Spinner`设备中不可见。（在模拟器中可见）。

请为此提供解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:26:04.370

您不能使用 settext() 将文本设置为微调器。您必须使用 ArrayAdapter 在微调器中显示内容。像这样，

声明一个数组——

```
String[] type_array = {"Monthly","Quaterly","Yearly"}; 
```

在 onCreate()-

```
spinner_type = (Spinner) findViewById(R.id.spinner_type_susa);
spinner_type.setOnItemSelectedListener(this);

ArrayAdapter<String> adapter_type = new ArrayAdapter<String>(this,R.layout.spinner_row,type_array);
adapter_type.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner_type.setAdapter(adapter_type); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:38:05.960

您为文本提供了仅在高级 API 级别上可用的全息颜色，并且您的设备不知道如何处理它，因此它提供了文本的默认颜色，即黑色，恰好是背景的颜色在你的微调器中。是的，这是一个疯狂的猜测。

# boonex-dolphin - 如何在 boonex 的加入页面添加会员级别选择框

> ID：15383698
> 
> 赞同：1
> 
> 时间：2013-03-13T11:14:15.523
> 
> 标签：boonex-dolphin

我想在 boonex 的加入页面使用会员级别。

# asp.net - 我想更改 ssrs 中项目符号和编号列表的字体大小

> ID：15383699
> 
> 赞同：1
> 
> 时间：2013-03-13T11:14:21.830
> 
> 标签：asp.net, reporting-services

在我想要的 SSRS 报告中

1.  红色的
2.  绿色的
3.  蓝色的
4.  粉色的

通过使用项目符号和编号，大小为 6pt。

编号大小也应为 6pt。

请帮助我如何在 SSRS 中执行此操作。

# html - 占位符 z-index Firefox 问题

> ID：15383710
> 
> 赞同：3
> 
> 时间：2013-03-13T11:14:43.690
> 
> 标签：html, css, firefox, z-index, placeholder

使用 Firefox 时，我在注册输入中有占位符，注册表上方是我的菜单，当我将鼠标悬停在下拉菜单上时，占位符出现在顶部。

我试过弄乱 z-indexes 但这似乎不是问题。输入字段的所有其他部分都隐藏在下拉菜单后面，但不是占位符。

我也尝试将 z-indexes 添加到

```
::-webkit-input-placeholder {}
::-moz-placeholder {}
:-ms-input-placeholder {}
input:-moz-placeholder {} 
```

但无济于事。

我希望在不使用 Javascript 的情况下实现这一目标。

![在此处输入图像描述](../Images/38d77e86956ffb5405024f4d185bb196.png)

Jsfiddle 快速演示：http: [//jsfiddle.net/LLANn/1/](http://jsfiddle.net/LLANn/1/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T12:23:39.480

给出**位置：相**对于**#submenu**。它解决了这个问题。

除非伴随“位置”，否则任何 z-index 都是无用的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-04-16T17:05:20.090

可能我的建议对某人有用......如果您的占位符元素`z-index`为 0（默认） - 设置为`#menu`：

```
z-index: 1; 
```

在其他情况下`z-index`，`#menu`应该至少比占位符元素多 1 个

# .net - 有没有办法在不调用 .Read() 的情况下判断 DataReader 是否已被迭代？

> ID：15383711
> 
> 赞同：0
> 
> 时间：2013-03-13T11:14:43.560
> 
> 标签：.net, vb.net, datareader

假设我返回一个 DataReader 并使用以下代码完全迭代它：

```
While Reader.Read
    Dim x as string = Reader.GetString("x")
End While 
```

*我希望能够在不*调用.Read()的情况下确定它是否在 While 循环之后被迭代。原因是因为 .Read() 在调用时会自动前进到下一行。如果存在读者没有完全迭代的情况，我不希望它前进到下一行。似乎有某种方法可以判断读者是否已完全阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:05:18.397

`Datareader`您可以通过将数据加载到`DataTable`下面的类似中来遍历您的数据，

```
 Dim DtTbl As DataTable = New DataTable

 'Load Your DataReader into a Datatable
 DtTbl .Load(rdr) 

 'And Here You can itereate through Your data like below
 For Each xDataRow As DataRow In DtTbl .Rows
      MsgBox(xDataRow.Item("COLUMN_NAME"))
 Next 
```

[**注意**：一旦您将数据从 加载`datareader`到`datatable`，`datareader`将自动关闭。但与此同时，您可以通过`datatable`计算任何约束来迭代多次。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:27:51.527

根据问题评论中的史蒂夫，看起来这是重复的：

[如何在 C# 中检测 DataReader 上的 EOF 而不执行 Read()](https://stackoverflow.com/questions/7844355/how-to-detect-eof-on-datareader-in-c-sharp-without-executing-read)

由于史蒂夫不想对答案发表评论，因此我正在使用此链接回答我自己的问题。我会删除这个问题，但 se 不会让我，因为它有答案。我不希望这影响我的问答比例，所以我们来了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:17:49.457

I think you are looking for: [HasRows](http://msdn.microsoft.com/en-us/library/haa3afyz.aspx#note), which enables you to determine if the DataReader has any results reading from it.

```
if(Reader.HasRows) {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:18:51.320

Its wrong.

```
If there is a circumstance where the reader hasn't completely been iterated through 
```

It iterates till the reader.

If you use,

```
If reader.read
//
End if 
```

It reads only one time

# java - MapDB 集合大小问题

> ID：15383716
> 
> 赞同：0
> 
> 时间：2013-03-13T11:14:51.723
> 
> 标签：java, memory-management, map, mapdb

我正在使用 MapDB 0.9 快照。我有一些包含数百万条记录 String->String 的集合。我的问题是这种 ConcurrentMap(s) 上的方法 size() 需要大量时间和大量内存（我什至有 OutOfMemory 错误）。

有没有其他人遇到过这样的问题？谢谢再见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:32:05.153

MapDB 需要遍历集合中的所有条目来统计它。您可以将计数存储在外部 Atomic.Long 中并单独检索，示例如下：

[https://github.com/jankotek/MapDB/blob/master/src/test/java/examples/Map_Size_Counter.java](https://github.com/jankotek/MapDB/blob/master/src/test/java/examples/Map_Size_Counter.java)

OOEM 不应该发生，这可能是由于 GC 开销断言。

# c# - 与其余代码内联编写时，扩展列表不起作用

> ID：15383717
> 
> 赞同：1
> 
> 时间：2013-03-13T11:14:57.397
> 
> 标签：c#, asp.net, visual-studio-2010, extension-methods

我正在尝试从 thsi 线程中实现手榴弹对如何随机化列表的响应：[Randomize a List<T>](https://stackoverflow.com/questions/273313/randomize-a-listt-in-c-sharp)。该解决方案包括创建扩展列表。这是用我自己的代码编写的确切方式：

```
 static class MyExtensions
{
    static readonly Random Random = new Random();
    public static void Shuffle<T>(this IList<T> list)
    {
        Random rng = new Random();
        int n = list.Count;
        while (n > 1)
        {
            n--;
            int k = rng.Next(n + 1);
            T value = list[k];
            list[k] = list[n];
            list[n] = value;
        }
    }
} 
```

问题在于，当我尝试在触发所述事件时创建的列表上的按钮单击事件中运行该方法时，VS 无法识别该方法并产生此错误：

System.Collections.Generic.IList 不包含“Shuffle”的定义，并且没有扩展方法“Shuffle”接受“System.Collections.Generic.IList”类型的第一个参数......”

这是我尝试使用的参考：

```
 public void Button1_Click(object sender, EventArgs e)
    {

    IList<int> dayList = new List<int>();
    for (int i = 0; i < 32; i++)
    {
        dayList.Add(i);
    }

    dayList.Shuffle();

    More code...

    } 
```

我搜索了这些板，发现我需要声明扩展方法所在的命名空间，但我的与我页面的其余部分内联，所以没有命名空间要声明。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:18:31.610

are you sure you are importing MyExtensions in the form class where you are using it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:24:40.293

在您的 MyExtensions 文件中搜索此内容：

```
namespace MyApp.Namespace
{ 
```

现在将其添加到表单的最顶部：

```
using MyApp.Namespace; 
```

`MyApp.Namespace`当然，它只是您的命名空间的占位符。如果您的扩展位于不同的项目中，则必须添加对该项目的引用。您可能还想`MyExtensions`公开您的信息。

# asp.net - 在asp.Net中重定向到登录页面

> ID：15383722
> 
> 赞同：1
> 
> 时间：2013-03-13T11:15:09.330
> 
> 标签：asp.net

当我运行我的网站时，我有一个奇怪的重定向到登录页面的问题。

问题是：-

当我尝试使用正确的用户凭据登录到我的网站时，它运行良好，我可以看到我的仪表板而没有任何错误（这意味着用户的会话已正确生成）。

但是，一旦我链接到站点中的其他页面，它就会将我重定向到带有该页面的 RedirectURL 的登录页面（我必须再次插入用户凭据并在没有错误发生之后通过该站点）。

成功登录后，我尝试注销并重新登录，但效果很好。当我第一次运行该站点时，问题仅发生一次。

请指导我，让我摆脱这个奇怪的问题。

谢谢普拉尚特

# ios - plist的最大存储容量是多少？

> ID：15383725
> 
> 赞同：12
> 
> 时间：2013-03-13T11:15:17.823
> 
> 标签：ios, objective-c, cocoa-touch, plist, storage

我的应用程序使用a`plist`作为数据存储，我想知道，iOS中plist文件的**最大存储容量是多少？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T11:18:46.467

A `plist` **can be of arbitrary length**.

Apple, however, only recommend `plists` having a maximum size of [a couple hundred KB](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/propertylists/AboutPropertyLists/AboutPropertyLists.html):

> "For situations where you need to store small amounts of persistent data—say less than a few hundred kilobytes—property lists offer a uniform and convenient means of organizing, storing, and accessing the data."

For data which is more memory intensive, they recommend the following:

> "In some situations, the property-list architecture may prove insufficient. If you need a way to store large, complex graphs of objects, objects not supported by the property-list architecture, or objects whose mutability settings must be retained, use [archiving](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/Archiving/Articles/archives.html#//apple_ref/doc/uid/20000946-BAJDBJAI)."

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:18:53.683

plist is a file format. It is only constrained by the maximum file size. The way it's read and written poses another constraint: the memory available to hold serialized objects.

# playframework-2.0 - 在 Play Framework 2.0.3 中使用阻塞 IO

> ID：15383728
> 
> 赞同：0
> 
> 时间：2013-03-13T11:15:29.430
> 
> 标签：playframework-2.0, akka, nonblocking

我们正在使用一个非常频繁地查询 MySQL 的 Play 应用程序。事实上，几乎每个操作都以某种方式查询数据库。

据我了解，Play 旨在支持异步和非阻塞应用程序，并鼓励据此进行编码。但由于 com.mysql.jdbc.Driver 是一个阻塞 JDBC 驱动程序，我看不到使用非阻塞查询的方法。

当多个 (6-20) 用户同时使用我们的应用程序时，我们遇到了严重的性能问题。当您开始使用应用程序时，它会随着时间的推移而变慢。

因此，我尝试通过将其放在 application.conf 中来更改默认的 play akka 配置，如此处建议的“高度同步应用程序”：[http ://www.playframework.com/documentation/2.1.0/ThreadPools](http://www.playframework.com/documentation/2.1.0/ThreadPools)

```
play {
  akka {
    event-handlers = ["akka.event.slf4j.Slf4jEventHandler"]
    loglevel = WARNING
    actor {
      default-dispatcher = {
        fork-join-executor {
          parallelism-min = 300
          parallelism-max = 300
        }
      }
    }
  }
} 
```

我的问题是：application.conf 中的大多数其他配置都是键=值对，我是否只是将这个 json 对象直接放在文件中，它就可以工作？当我这样做时我没有收到任何错误，所以我认为它接受这个？

如果是，我如何测试这是否生效？我没有看到应用程序的性能发生巨大变化。所以我不确定我是否在这里遇到了根本性的错误。任何帮助、指示或评论将不胜感激。

我们在 linux 机器上使用 Play 2.0.3 和 OpenJDK 1.6，有 2 个 CPU 和 2GB 的 xmx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:48:17.117

如果您的配置文件已经有一个部分，`default-dispatcher`那么您只需确保它使用`fork-join-executor`并增加 and 的`parallelism-min`值`parallelism-max`。

您可以在配置部分添加`log-config-on-start = on`选项以`play { akka { }}`在应用程序启动时记录完整的 akka 配置（然后检查 and 是否具有`default-dispatcher`正确的值）。`parallelism-min``parallelism-max`

# ios - ios：短信编辑器未显示

> ID：15383729
> 
> 赞同：0
> 
> 时间：2013-03-13T11:15:30.717
> 
> 标签：ios, uitableview, uiactionsheet, mfmessagecomposeview

我有一个 UITableViewController 显示一个联系人列表，当用户选择一行时，它会显示一个 UIActionSheet 来询问用户一个操作（呼叫，发送短信......）。

用户选择一个动作，第一个 UIActionSheet 将显示另一个包含电话号码的 UIActionSheet。

用户选择一个电话号码，这应该会显示 SMS 消息编写器。

问题是当用户选择电话号码时，消息编写器视图不显示（只是黑屏），并且我在 MFMessageComposeViewController 的 didFinishWithResult 中收到 MessageComposeResultCancelled。

这会生成此警告“警告：在演示或关闭过程中尝试从视图控制器中关闭！”

如何正确调用和显示 SMS 消息编写器？

（如果我在用户使用 didSelectRowAtIndexPath 选择列表中的一行时直接调用它，这非常有效）

这是一些代码：

1- 在 didSelectRowAtIndexPath 方法中调用第一个 UIActionSheet：

```
UIActionSheet *popupQuery;
...
[popupQuery showInView:self.view]; 
```

2-在 clickedButtonAtIndex 方法中调用第二个 UIActionSheet：

```
UIActionSheet *popupQuery2;
...
[popupQuery showInView:self.view]; 
```

3-从相同的方法，调用消息编写器：

```
[self sendSMS:@"" recipientList:[phoneNumbers objectAtIndex:buttonIndex]]; 
```

显示消息编写器的方法：

```
 (void)sendSMS:(NSString *)bodyOfMessage recipientList:(NSArray *)recipients
{
    MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
    if([MFMessageComposeViewController canSendText])
    {
        controller.body = bodyOfMessage;
        controller.recipients = recipients;
        controller.messageComposeDelegate = self;

        [self presentModalViewController:controller animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:41:49.360

在这里找到解决方案：[MFMessageComposeViewController 显示空白/白屏](https://stackoverflow.com/questions/15138497/mfmessagecomposeviewcontroller-shows-blank-white-screen)

```
 controller.recipients = [NSArray arrayWithObject:theRecipients]; 
```

theRecipients 是一个仅包含一个元素（所选电话号码）的数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:16:44.580

由于您不想尝试同时显示两个模态控件，请使用`actionSheet:didDismissWithButtonIndex:`委托方法，以便在您开始显示消息控制器时隐藏操作表。

以下代码显示了不会自动取消的作曲家。只有当我按下 按钮时，我才能`0`在日志中看到 的值。你想通过自动按下按钮来破解吗？`MessageComposeResultCancelled``Cancel``send`

![来自动作表委托的作曲家](../Images/992a5cb0e0a8286401d977b9c9e39df1.png)

**MFMessageComposeViewController.h**

```
enum MessageComposeResult {
    MessageComposeResultCancelled, //0
    MessageComposeResultSent,      //1
    MessageComposeResultFailed     //2
}; 
```

**我的视图控制器.m**

```
-(IBAction)onButtonPressed:(id)sender {
    UIActionSheet * sheet = [[UIActionSheet alloc] initWithTitle:@"Title"
                                                        delegate:self
                                               cancelButtonTitle:@"Go out"
                                          destructiveButtonTitle:@"Show message composer"
                                               otherButtonTitles:nil, nil];
    [sheet showInView:self.view];
}

-(void) actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex {
    MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
    if([MFMessageComposeViewController canSendText])
    {
        controller.body = @"body";
//        controller.recipients = recipients;
        controller.messageComposeDelegate = self;

        [self presentModalViewController:controller animated:YES];
    }
}

-(void) messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result {
    NSLog(@"%d", result);
    [controller dismissModalViewControllerAnimated:YES];
} 
```

# c# - 将数据从一个桌面/Web 应用程序传递到另一个桌面应用程序

> ID：15383731
> 
> 赞同：-7
> 
> 时间：2013-03-13T11:15:35.280
> 
> 标签：c#, asp.net, desktop-application

我已经在 c#.net 中运行了一个桌面应用程序。现在我想准备一个桌面/网络应用程序。并将数据传递给现有的桌面应用程序。

是否可以 ？如果是，请提供任何示例链接。

编辑：现有的，比如说应用程序A，具有添加学生信息的形式：姓名，标准，地址等。现在我的另一个应用程序，比如说B（我必须准备）。所以，我想在B中添加相同的信息，同时在B中保存数据，数据也应该填写应用程序A表格并保存。应用程序 A 是桌面应用程序。现在app B是我们的选择，无论是桌面还是WEB。

当我从应用 B 添加信息时，它应该打开应用 A 表单，填写从应用 B 传递的文本框中的信息，然后自动保存。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:16:57.590

[您可以使用命名管道](http://www.codeproject.com/Tips/492231/Csharp-Async-Named-Pipes)或 windows [.net 远程处理](http://www.codeproject.com/Articles/14791/NET-Remoting-with-an-easy-example)在进程之间共享数据这篇[维基百科文章](http://en.wikipedia.org/wiki/Inter-process_communication)讨论了进程间通信的不同选项，如果您想将数据发送到网站，您可以公开一个`web service`.

# java - Java线程同步块行为 - 同步与同步（）？

> ID：15383740
> 
> 赞同：0
> 
> 时间：2013-03-13T11:16:00.423
> 
> 标签：java, multithreading, thread-safety

我有一个简单的问题，但很难找到答案。

**问题是同步方法是否等于 synchronized(this) - 意味着做相同的锁定。**

我想编写减少线程锁定的线程安全代码（不想使用总是同步的方法，但有时只使用部分同步关键部分）。

您能否解释一下这段代码是否相等以及为什么简而言之（简化示例以显示原子问题）？

## 例子

这个混合锁定代码是否等于下面的蛮力代码：

```
public class SynchroMixed {
    int counter = 0;

    synchronized void writer() {
        // some not locked code
        int newCounter = counter + 1;

        // critical section
        synchronized(this) {
            counter = newCounter;
        }
    }

    synchronized int reader() {
        return counter;
    }
} 
```

蛮力代码（每个方法都被锁定，包括非关键部分：

```
public class SynchroSame {
    int counter = 0;

    synchronized void writer() {
        int newCounter = counter + 1;

        counter = newCounter;
    }

    synchronized int reader() {
        return counter;
    }
} 
```

或者我应该编写这段代码（这肯定是有效的，但更多的是微编码且不清楚）。

```
public class SynchroMicro {
    int counter = 0;

    void writer() {
        // some not locked code
        int newCounter = counter + 1;

        // critical section
        synchronized(this) {
            counter = newCounter;
        }
    }

    int reader() {
        synchronized (this) {
            return counter;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:18:34.853

`synchronized` method and `synchronized(this)` means absolutely the same thing, and uses the same mutex behind. It's more question of taste what notation to prefer.

Personally I prefer `synchronized(this)`, because it explicitly specifies the scope of the mutex lock which could be smaller than the whole method

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:20:32.340

`synchronized(this)`在方法中肯定没有意义，`synchronized`因为进入方法已经是隐含的`synchronized(this)`。

这只是您的语法错误，因为您显然打算缩小临界区的范围，但缩小的范围会在您的代码中引入数据竞争：您必须在同一块中*读取*和*写入共享变量。*`synchronized`

此外，即使一个方法*只*读取共享变量，它*仍然*必须在一个`synchronized`块中进行；否则它可能永远不会观察到其他线程的任何写入。这是 Java 内存模型的基本语义。

现在，如果您所展示的内容确实代表了您的全部问题，那么您甚至不应该使用`synchronized`，而应该使用简单`AtomicInteger`的 ，它将具有最佳的并发性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T11:21:38.970

这三个例子都是等价的。在方法上使用`synchronized`与将整个主体包裹在`synchronized(this) {}`.

然后，通过使用`synchronized(this) {}`for 某些语句，线程只是重新获取它已经拥有的锁：在这里没有意义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T12:59:50.953

从功能的角度来看，同步方法和块是绝对相似的。它们都执行相同的任务，即避免同时访问特定方法或方法中的代码块。

当您有一个长方法并且只需要同步其中的一部分时，synchronized() 块会更加灵活和方便。您不需要锁定对整个方法的访问，因为我们知道同步有一些与之相关的性能问题。因此，始终建议只同步部分代码而不是整个方法（如果不需要）。

# mysql - 涉及 MAX() 的更简洁的 SQL 查询

> ID：15383744
> 
> 赞同：0
> 
> 时间：2013-03-13T11:16:08.050
> 
> 标签：mysql, sql, sql-server, subquery, max

```
存货
+------------------+------------------+---------- --+
| 影碟 | 更换价格 | 库存|
+------------------+------------------+---------- --+
| 圆周率 | 9.99 | 500 |
| 沙丘 | 29.99 | 100 |
| 希瑟斯 | 4.99 | 20 |
| 大白鲨 | 19.99 | 500 |
| Mulholland_Drive | 39.99 | 50 |
| 醒来_生活 | 29.99 | 200 |
+------------------+------------------+---------- --+

租用
+-----------------+------------+------------------+
| 订户 | queue_nbr | 影碟 |
+-----------------+------------+------------------+
| 鲍勃 | 1 | Mulholland_Drive |
| 鲍勃 | 2 | 大白鲨 |
| 蔡 | 1 | 圆周率 |
| 蔡 | 2 | 希瑟斯 |
| 杰米 | 2 | Mulholland_Drive |
| 杰米 | 4 | 沙丘 |
| 杰米 | 1 | 大白鲨 |
| 杰米 | 3 | 醒来_生活 |
| 诺拉 | 4 | 大白鲨 |
| 诺拉 | 2 | Mulholland_Drive |
| 诺拉 | 3 | 沙丘 |
| 诺拉 | 1 | 醒来_生活 |
+-----------------+------------+------------------+

```

我只想返回具有最昂贵电影队列的订户（如果您在给定时间丢失了所有电影，请考虑 Netflix DVD 更换成本）。我使用了 MAX() 而不是 TOP、LIMIT 或 ROWNUM，因为查询需要尽可能独立于数据库，并且在出现平局时必须返回多个订阅者。使用上面的表格，结果应该是

```
+----------+
| 最高 |
+----------+
| 杰米 |
| 诺拉 |
+----------+

```

经过大量的搜索和实验，我提出了可行的代码，但在我的新手眼中，无论是在代码数量还是在执行方面，它都显得臃肿且效率低下。

有人介意重构和解释您的代码吗？

我的代码：

```
 SELECT z.subscriber highest
FROM 
(SELECT MAX(price) max_price
    FROM (
        SELECT subscriber_name subscriber, SUM(replacement_price) price
        FROM inventory i
        INNER JOIN rented r
        ON i.DVD = r.DVD
        GROUP BY subscriber
    ) x
) y
INNER JOIN
(
    SELECT subscriber_name subscriber, SUM(replacement_price) price
    FROM inventory i
    INNER JOIN rented r
    ON i.DVD = r.DVD
    GROUP BY subscriber
) z
ON z.price = y.max_price 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:41:11.340

```
SELECT z.subscriber
FROM(
    SELECT RANK() OVER(ORDER BY SUM(replacement_price)) subscriber_rank, 
           r.subscriber subscriber, 
           SUM(replacement_price) totalReplacementPrice
    FROM inventory i
    INNER JOIN rented r ON i.dvd = r.DVD
GROUP BY subscriber
) z
WHERE z.subscriber_rank = 1 
```

您从 sql 示例查询的某些列名不同，因此我使用了演示表中给出的列名。我在内部查询中使用 rank 函数通过replacement_price 的总和来查找所有订购人的顺序。然后选择排名为 1 的行。

Rank 在 MS Sql Server 和 Oracle 中都可用。要比@bluefeet 所说的更进一步，您需要提供更多关于您所针对的数据库的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:45:42.457

如果您只想返回`max`总数，那么您可以使用以下在 MySQL 和 SQL Server 中都有效的方法。它并不比您当前的查询更简洁：

```
select subscriber
from inventory i
inner join rented r
  on i.dvd = r.dvd
group by subscriber
having sum(replacement_price) = (select max(TotalCost)
                                 from 
                                 (
                                   select sum(replacement_price) TotalCost
                                   from inventory i
                                   inner join rented r
                                     on i.dvd = r.dvd
                                   group by subscriber
                                  ) p); 
```

如果您使用的是 SQL Server，那么我建议您实现窗口函数，类似于：

```
select subscriber
from
(
  select subscriber,
    rank() over(order by sum(replacement_price) desc) rnk
  from inventory i
  inner join rented r
    on i.dvd = r.dvd
  group by subscriber
) src
where rnk = 1 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/df620/16)

# java - ASP.NET 网站上 Java 中的 HTTPS POST 请求

> ID：15383747
> 
> 赞同：2
> 
> 时间：2013-03-13T11:16:20.740
> 
> 标签：java, url, urlencode

我无法在 asp.net 网站上发布请求。当我在 localhost 上尝试使用 php 时，它工作正常，但在 web asp.net 网站上却无法正常工作。

请有人帮帮我。

```
 package cc.cu.desertcreator;

    import java.io.InputStreamReader;
    import java.io.OutputStreamWriter;
    import java.net.URL;
    import java.net.URLConnection;
    import java.net.URLEncoder;
    import java.io.BufferedReader;

    public class Test {

    public static void main(String[] args) {
        try {
            // Construct data
            String data = URLEncoder.encode("__EVENTTARGET", "UTF-8") + "="
                    + URLEncoder.encode("", "UTF-8");
            data += "&" + URLEncoder.encode("__EVENTARGUMENT", "UTF-8") + "="
                    + URLEncoder.encode("", "UTF-8");

            data += "&" + URLEncoder.encode("__VIEWSTATE", "UTF-8") + "="
                    + URLEncoder.encode("/wEPDwUJMjQ4Njc3OTkzD2QWAmYPZBYCZg9kFgJmD2QWCGYPZBYGAgEPZBYCAgMPFgIeC18hSXRlbUNvdW50Av////8PZAIDDxYCHgdjb250ZW50BRIxMjAzMjAzOTYxLDM2MDYzNTJkAgQPFQENJ1VBLTcxODc2MC0xJ2QCBg8WAh4HVmlzaWJsZWhkAgcPDxYCHwJoZGQCCA9kFgICAQ9kFgICARBkZBYCAgEPZBYCAgkPZBYCZg9kFgICAQ9kFgICAQ9kFgICAw8PFgIeEkVuYWJsZUNsaWVudFNjcmlwdGhkZGRPA99uYkD6em3jusGYVPJ/ioe47g==", "UTF-8");
            data += "&" + URLEncoder.encode("userPrefs", "UTF-8") + "="
                    + URLEncoder.encode("", "UTF-8");
            data += "&" + URLEncoder.encode("M$ctl00$ctl00$MainContent$MainContent$MainContent$eh", "UTF-8") + "="
                    + URLEncoder.encode("value2", "UTF-8");
            data += "&" + URLEncoder.encode("M$ctl00$ctl00$MainContent$MainContent$MainContent$c7$tb_email", "UTF-8") + "="
                    + URLEncoder.encode("asikpstu@gmail.com", "UTF-8");
            // Send data
            URL url = new URL("https://www.prosper.com/account/common/login.aspx");
            URLConnection conn = url.openConnection();
            conn.setRequestProperty("Content-Type","application/x-www-form-urlencoded"); 
            conn.setDoOutput(true);
            OutputStreamWriter wr = new OutputStreamWriter(
                    conn.getOutputStream());
            wr.write(data);
            wr.flush();

            // Get the response
            BufferedReader rd = new BufferedReader(new InputStreamReader(
                    conn.getInputStream()));
            String line;
            while ((line = rd.readLine()) != null) {
                System.out.println(line);
            }
            wr.close();
            rd.close();
        } catch (Exception e) {
        }
    }
} 
```

输出应该转到网页源，但它返回：

```
--------------------Configuration: <Default>--------------------
<html><head><title>Object moved</title></head><body>
<h2>Object moved to <a href="http://m.prosper.com/account/common/login.aspx">here</a></h2>
</body></html> 
```

# java - 在 JTextField 中打印数组项

> ID：15383750
> 
> 赞同：0
> 
> 时间：2013-03-13T11:16:28.620
> 
> 标签：java, swing, jtextfield, indexoutofboundsexception

我有一个 java swing 的应用程序。我的目的是将数组的元素打印到 JTextField

但是当我按下 jbutton 来执行此操作时，我得到以下异常

线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException：3

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Main extends JFrame  implements ActionListener   {

    /**
     * @param args the command line arguments
     */

    JTextField jtext;
    JPanel panel;

    public Main()
    {

    jtext = new JTextField("                                   " );
    Container pane = getContentPane();
JButton b =new JButton("Click Me");
     panel = new JPanel();

     panel.add(jtext);
     panel.add(b);

     b.addActionListener(this);
     pane.add(panel);
    }

 public void actionPerformed(ActionEvent e)

    {
          String[] strArray = new String[] {"John", "Mary", "Bob"};
int j;
       for( j=0;j< strArray.length;j++)
  {

  }

  jtext.setText(strArray[j]);
}

    public static void main(String[] args) {
        // TODO code application logic here
       Main m = new Main();
       m.setVisible(true);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:25:37.260

您正在循环运行而没有做任何事情。当您最终退出循环时， j 确实会变为 3，因为它不匹配 j 小于 strArray.length 条件。但是由于数组在 java 中是 0，因此您试图获取三元素数组的第四个元素。

以下代码应该可以解决您的问题。放置这个而不是你的 for 循环。

```
StringBuilder sb=new StringBuilder();
for(int j=0;j< strArray.length;j++)
{
   sb.append(strArray[j]);
}
jtext.setText(sb.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:37:52.767

将代码重写为：

```
String valueToBeInserted="";

for( j=0;j< strArray.length;j++)
 {
   valueToBeInserted=valueToBeInserted + " " + strArray[j];
 }

 jtext.setText(valueToBeInserted); 
```

# delphi - 如何通过 TIdHTTP 下载大文件？

> ID：15383756
> 
> 赞同：4
> 
> 时间：2013-03-13T11:16:36.970
> 
> 标签：delphi, delphi-xe2, wininet, indy10

我使用此代码下载小文件：

```
Var
 ms:TMemoryStream;
begin
  ms:=TMemoryStream.Create;
  Idhttp1.get('http://mydomain.com/myfile.zip',ms);
  ms.SaveToFile('myfile.zip');
  ms.Free;
end; 
```

但是文件在存储到磁盘之前先保存在 RAM 中，因此可能很难下载大于 1Gb 的文件，例如。有没有办法按部分下载文件？还是我需要使用 WinInet？提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T12:36:27.817

`TMemoryStream`提供了一个内存缓冲区，所以如果你下载到一个，你需要有足够的内存来保存你收到的所有东西。不过，这不是唯一的流。您可以将`Get`任何类型的流传递给该方法，包括在接收到内容时将其内容写入磁盘的流。`TFileStream`例如，使用。

```
var
  s: TStream;

s := TFileStream.Create('myfile.zip', fmCreate);
try
  IdHttp1.Get(..., s);
finally
  s.Free;
end; 
```

无论您在哪里打电话`LoadFromFile`或`SaveToFile`在 上`TMemoryStream`，这可能`TFileStream`是一个更好的选择。

# git - 使用 git 在另一个分支中发布子目录

> ID：15383757
> 
> 赞同：0
> 
> 时间：2013-03-13T11:16:37.417
> 
> 标签：git

我正在开发一个只包含头文件的小库。另外，我编写了一些测试和 CMakeLists.txt。我的 git master 分支中有以下目录结构：

```
/
  include/
    header 1.hpp
    header 2.hpp
    ...
  tests/
    test 1.cpp
    test 2.cpp
    ...
  CMakeLists.txt 
```

现在我想使用该库，但当然我不需要测试或其他项目中的 CMakeLists.txt。所以我想把这个结构放在一个名为“devl”的分支中，而在主分支中我只想要“include/”的内容。

我四处搜索，但如果其他人想要提取一个子目录，他们总是想把它放到另一个 repo 中。

那么如何将子目录移动到另一个分支呢？或者它是错误的发布方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:24:54.590

您可以分支“devl”分支并删除所有测试和 CMakeLists.txt 文件。
然后，当您从 devl 分支获得更新时，您可以将其合并回 master 并再次删除任何测试文件。

对我来说，这听起来很麻烦但可行。

# microsoft-metro - 当用户停止使用应用程序并在 Metro 应用程序中移动到另一个应用程序时运行后台任务

> ID：15383760
> 
> 赞同：0
> 
> 时间：2013-03-13T11:16:42.423
> 
> 标签：microsoft-metro

您好，我的 Metro 应用程序有以下要求。你能解释一下如何处理这个吗？

1.  用户通过输入他的登录凭据登录到应用程序。
2.  然后用户转移到另一个应用程序并开始使用它（他仍在使用机器）。
3.  15分钟后他回来了。现在，我必须抛出错误消息说“Session Tiemout”

我尝试使用 BackgroungTask - 但没有成功。原因是我无法启动后台任务 OnSuspend()。

让我知道如何实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:58:38.260

如果您希望在再次激活应用程序时发生通知，则只需注册[应用程序激活](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx#app_activation)处理程序并检查您的登录是否已超时。

如果您希望通知在您的应用程序之外发生，您将需要使用带有[预定通知的](http://msdn.microsoft.com/en-us/library/windows/apps/hh779721.aspx)[toast](http://msdn.microsoft.com/en-us/library/windows/apps/hh779727.aspx)通知。

后台任务用于在用户执行其他操作时在后台执行工作。它不能用于通知。

# javascript - Javascript，查看 [object HTMLInputElement]

> ID：15383765
> 
> 赞同：32
> 
> 时间：2013-03-13T11:16:50.997
> 
> 标签：javascript, html

我刚刚开始学习 HTML。对我的一个变量做一个`alert()`给我这个结果`[object HTMLInputElement]`。

如何获取在文本字段中添加的数据，我的输入类型是文本？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-13T11:21:19.827

假设您的变量是`myNode`，您可以`myNode.value`检索输入元素的值。

*Chrome 开发者工具*有一个*属性*选项卡，显示有用的 DOM 属性。

另请参阅[MDN](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)以获取参考。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-13T11:19:53.897

如果元素是[`<input type="text">`](http://www.w3.org/TR/html-markup/input.text.html)，则应查询[`value`](http://www.w3.org/TR/html-markup/input.text.html#input.text.attrs.value)属性：

```
alert(element.value); 
```

请参阅此[jsFiddle](http://jsfiddle.net/ZE8sj/)中的示例。

此外，看到您开始学习 HTML，您可能会考虑使用`console.log()`而不是`alert()`用于调试目的。它不会中断脚本的执行流程，并且您可以使用开发人员工具（显然除了*那个）查看几乎每个浏览器中的所有日志。*

当然，您可以考虑使用像[Firebug](http://en.wikipedia.org/wiki/Firebug_%28software%29)这样的 Web 开发工具，它是 Firefox 的一个强大插件，提供了许多功能（调试 javascript 代码、DOM 检查器、实时 DOM/CSS 更改、请求监控。 ..)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-04-04T20:39:29.023

这不是因为您使用了警报，而是在使用 document.write() 时也会发生。当您将任何标签的 id 或类命名为与您在 javascript 代码中使用的任何变量相同时，通常会出现此问题。尝试更改 javascript 变量名称或更改标签的 id/类名称。

**我的代码示例：** **bank.html**

```
<!doctype html>
<html>
<head>
    <title>Transaction Tracker</title>
    <script src="bank.js"></script> 
</head>
    <body>
        <div><button onclick="bitch()">Press me!</button></div>
    </body>
</html> 
```

**Javascript代码：** **bank.js**

```
function bitch(){ amt = 0;
var a = Math.random(); ran = Math.floor(a * 100);
return ran; }

function all(){
amt = amt + bitch(); document.write(amt + "
"); } setInterval(all,2000); 
```

* * *

您可以从我的代码中查看并理解这个概念。在这里，我在 JS 中使用了一个名为“amt”的变量。您只是尝试运行我的代码。它可以正常工作，但是当您在 html 正文中为 div 标记添加 [id="amt"]（不带方括号）（这是 JS 代码中的变量名）时，您将看到与您正在谈论的相同的错误。如此简单的解决方案是更改变量名或 id 或类名。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-21T04:51:40.130

改变：

```
$("input:text").change(function() {
    var value=$("input:text").val();
    alert(value);
}); 
```

到

```
$("input:text").change(function() {
    var value=$("input[type=text].selector").val();
    alert(value);
}); 
```

**注意：**选择器：id，类..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-16T06:02:12.583

```
<input type="text" />
<script>
$("input:text").change(function() {
    var value=$("input:text").val();
    alert(value);
});
</script> 
```

使用 .val() 获取元素的值（jquery 方法），使用 $("input:text") 这个选择器来选择您的输入，使用 .change() 将事件处理程序绑定到“更改”JavaScript 事件。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-06-29T21:10:28.663

例如，当您从客户那里获得价值时，该价值。

```
var current_text = document.getElementById('user_text').value;
        var http = new XMLHttpRequest();
        http.onreadystatechange = function () {

            if (http.readyState == 4 &&  http.status == 200 ){
                var response = http.responseText;
              document.getElementById('server_response').value = response;
                console.log(response.value);

            } 
```

# ssas - 基于 SSAS 层次结构中特定级别的计算成员

> ID：15383768
> 
> 赞同：0
> 
> 时间：2013-03-13T11:16:58.033
> 
> 标签：ssas, mdx

由于我在维度表中具有自联接，因此我有一个具有多级层次结构的特定维度。

在特定层次结构中，我有收入和费用等值。我有一个框架计算成员以获得总收入和费用

我试过这个，我`NULL`在浏览多维数据集时得到了

```
AGGREGATE({[Account Hierarchy].[Account Hierarchy].Properties( "Account Name" )="Revenues"},[Measures].[Budget])) 
```

请让我知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:48:48.597

可能您应该使用不访问属性的成员引用。

我将使用 BIDS Cube / Calculations / Metadata 窗格找到该成员并将其拖到计算中以获得正确的语法。

# trigger.io - Trigger.IO topbar button Border, modify

> ID：15383772
> 
> 赞同：0
> 
> 时间：2013-03-13T11:17:07.233
> 
> 标签：trigger.io

im triying to create the top bar of my app but when I make a button setting the icon and tint a small border it's around the button. Is it posible to modify this propierty?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:01:20.387

It's not currently possible to change the appearance of the button outline. We plan to add customisations like this, and grant more complete control over the topbar appearance in general, in a future platform version.

# php - Trying to get the results from first query to search a second query

> ID：15383775
> 
> 赞同：0
> 
> 时间：2013-03-13T11:17:12.027
> 
> 标签：php, mysqli

I have been working on a social network, i have a fanpages table that a user can create a profile for their favorite band or celebrity and another table called friends where they can subscribe to the fanpages. i then want the requests to appear in notifications for the fanpage admin to except. after the first sql query it returns fanpages with multiple values but if i echo the next $sql query it shows that its only selecting one result to query instead of all of them.

so basically i need to query fanpages table for all fanpages created_by the user logged on ($log_username), then i need to take those fanpages and query the friends table to find out if anyone has requested to subscribe to the users fan pages??

this line of code $fanpage_requests = "$fansubSql"; outputs SELECT * FROM friends WHERE user2='fan4' AND accepted='0' ORDER BY datemade ASC as the only result but there should be 2 results as both fan3 and fan4 have requests.

thanks for your help Michael

```
$fanpage_requests = '';

$fansql = "SELECT created_by, fanpage_name FROM `fanpages`  WHERE created_by = '$log_username' ";
$fanquery = mysqli_query($db_conx, $fansql);
$fannumrows = mysqli_num_rows($fanquery);

if($fannumrows < 1){
    $fanpage_requests = 'No friend requests';
} else {

    while($row = mysqli_fetch_array($fanquery, MYSQLI_ASSOC)) {
        $fanpage_name = $row["fanpage_name"];
        $created_by = $row["created_by"];

        $fansubSql = "SELECT * FROM friends WHERE user2='$fanpage_name' AND accepted='0' ORDER BY datemade ASC";
        $fansubQuery = mysqli_query($db_conx, $fansubSql);
        $fansubNumrows = mysqli_fetch_row($fansubQuery);
        $fanpage_requests = "$fansubSql";

        if($fansubNumrows < 1){
            $fanpage_requests = "blah blah"; 
        }

        while ($fansubRow = mysqli_fetch_array($fansubQuery, MYSQLI_ASSOC)) {
            $fansubreqID = $fansubRow["id"];
            $fansubuser1 = $fansubRow["user1"];
            $fansubdatemade = $fansubRow["datemade"];
            $fansubdatemade = strftime("%B %d", strtotime($datemade));

            $fansubthumbquery = mysqli_query($db_conx, "SELECT avatar FROM users WHERE username='$user1' LIMIT 1");
            $fansubthumbrow = mysqli_fetch_row($thumbquery);
            $fansubuser1avatar = $thumbrow[0];
            $fansubuser1pic = '<img src="user/'.$user1.'/'.$user1avatar.'" alt="'.$user1.'" class="user_pic">';

            if($fansubuser1avatar == NULL){
                $fansubuser1pic = '<img src="images/avatardefault.jpg" alt="'.$user1.'" class="user_pic">';
            }

            $fanpage_requests .= '<div id="friendreq_'.$fansubreqID.'" class="friendrequests">';
            $fanpage_requests .= '<a href="user.php?u='.$fansubuser1.'">'.$fansubuser1pic.'</a>';
            $fanpage_requests .= '<div class="user_info" id="user_info_'.$fansubreqID.'">'.$fansubdatemade.' <a href="user.php?u='.$fansubuser1.'">'.$fansubuser1.'</a> requests friendship<br /><br />';
            $fanpage_requests .= '<button onclick="fanReqHandler(\'accept\',\''.$fansubreqID.'\',\''.$fansubuser1.'\',\'user_info_'.$fansubreqID.'\')">accept</button> or ';
            $fanpage_requests .= '<button onclick="fanReqHandler(\'reject\',\''.$fansubreqID.'\',\''.$fansubuser1.'\',\'user_info_'.$fansubreqID.'\')">reject</button>';
            $fanpage_requests .= '</div>';
            $fanpage_requests .= '</div>';
        }
    }
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:49:51.147

阅读文档。[mysqli_fetch_row](http://php.net/mysqli_fetch_row)不返回数字。它从查询中返回一条记录。查看文档中的示例：您需要`mysqli_fetch_row`在循环中使用来检索所有记录。

要知道查询返回的行数，请使用[mysqli_num_rows](http://php.net/mysqli_num_rows)。

# mysql - 如何处理返回多行的子查询

> ID：15383777
> 
> 赞同：0
> 
> 时间：2013-03-13T11:17:16.343
> 
> 标签：mysql, sql, mysql-error-1242

这是我为获取 Author-1 的所有评论而编写的查询。Author-1 写了 2 个帖子，每个帖子都有很多评论。我想要所有这些评论。

```
 SELECT * 
  FROM `package_reviews`
  WHERE `post_id` = (SELECT `post_id` 
                     FROM `wp_posts` 
                     WHERE `post_author`=1); 
```

获取错误消息为 #1242 - 子查询返回超过 1 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:20:36.590

你应该在这里使用加入。

像这样的东西。

```
SELECT * FROM `package_reviews` r LEFT JOIN `wp_posts` p ON r.post_id= p.post_id WHERE p.post_author = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:22:17.333

你需要

```
SELECT * FROM `package_reviews`
  WHERE `post_id` IN 
   (SELECT `post_id` FROM `wp_posts` WHERE `post_author`=1); 
```

如果您想返回所有评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:22:25.360

您可以使用 LIMIT 限制子查询

```
 SELECT * 
 FROM `package_reviews`
 WHERE `post_id` IN (SELECT `post_id` 
                    FROM `wp_posts` 
                    WHERE `post_author`=1
                    ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T08:52:00.340

像这样更改您的代码：SELECT * FROM `package_reviews` WHERE `post_id`= ANY (SELECT `post_id` FROM `wp_posts` WHERE `post_author`=1); 这个链接非常有用 [http://dev.mysql.com/doc/refman/5.0/en/subquery-errors.html](http://dev.mysql.com/doc/refman/5.0/en/subquery-errors.html)

# iphone - 如何为触摸重置 NSTimer，在 ios 中触摸移动

> ID：15383782
> 
> 赞同：1
> 
> 时间：2013-03-13T11:17:29.530
> 
> 标签：iphone, ios, objective-c, ios5, nstimer

我正在开发应用程序，在该应用程序中我必须在 3 秒后隐藏控制按钮，所以我使用 NSTimer 编写代码并开始触摸它并且它工作但问题是当我再次触摸任何其他按钮时，我的计时器不会重置，即使我像拖动一样移动我的触摸示例。

如果我拖动或移动触摸它应该重置计时器但它不会。

我发现如果我连续触摸其他区域（但它在控制按钮上不起作用）如果我连续触摸控制按钮仍然在 3 秒后隐藏它，则此实现工作。如何解决这个问题。我也希望事件在按钮单击时触发。

**编辑**我自己解决了我的问题..我在按钮单击扇区上添加了这段代码，它可以工作..

谢谢大家的支持

```
if(screenTimer)
{
    [screenTimer invalidate];
    screenTimer = nil;
    screenTimer = [NSTimer scheduledTimerWithTimeInterval:3.0 target:self selector:@selector(turnOffScreen) userInfo:nil repeats:NO];
} 
```

这是我的代码

```
// Touch began for touch event.

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

if(screenTimer)
{
    [screenTimer invalidate];
    screenTimer = nil;
}

mode1View.hidden=NO;

 screenTimer = [NSTimer scheduledTimerWithTimeInterval:3.0 target:self       selector:@selector(turnOffScreen) userInfo:nil repeats:NO];
}

- (void)turnOffScreen{
NSLog(@"TURN OFF SCREEN");
if(screenTimer!=nil)
{
    mode1View.hidden=YES;
}
} 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:25:56.060

你有没有尝试过

```
[self performSelector:@selector(turnOffScreen:) withObject:nil afterDelay:3.0]; 
```

该`NSObject`方法`performSelector:withObject:afterDelay:`在一定延迟后调用带有对象的对象上的方法。

# android - StackOverflowError while navigating between activities of ActivityGroup

> ID：15383784
> 
> 赞同：1
> 
> 时间：2013-03-13T11:17:36.177
> 
> 标签：android, android-activity, stack-overflow, activitygroup, activity-finish

I am making an application with tabs. In that app same `TabView` is to be shown in multiple activities in hierarchy. For that i used `ActivityGroup`.

In my application i can navigate from first activity containing tab to its child activity and can come back to previous activity by pressing a button in child activity. While navigating between these two activities, i get StackOverflowError after few navigations. I tried flag

```
Intent.FLAG_ACTIVITY_CLEAR_TOP 
```

but it doesn't help. I also tried

```
finish() 
```

but it finishes whole `ActivityGroup`. Then i tried method

```
finishActivityFromChild() 
```

but still getting same error.

This is my code for moving from first activity containing tabs to its child-

```
intent = new Intent(context, ChildActivity.class);
View view = getLocalActivityManager().startActivity("activity2", intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)) .getDecorView(); 
setContentView(view);
finishActivityFromChild(getCurrentActivity(), 0); 
```

And the same code i am using for coming back to parent activity on click of a button-

```
public void onClick(View arg0) {
    intent = new Intent(context, ParentActivity.class);
    View view = getLocalActivityManager().startActivity("activity1", intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)) .getDecorView(); 
setContentView(view);
finishActivityFromChild(getCurrentActivity(), 0);
} 
```

Now i have no idea what to do for this problem. Any help is appreciated. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:40:59.627

我认为一些代码在这里会有所帮助。如果我是你，我会尝试打印出调用的函数，以查看递归调用的函数可能导致堆栈溢出。（一些断点也可以解决问题）

# ios - Set UIBarButtonItem tint color always display default color

> ID：15383785
> 
> 赞同：2
> 
> 时间：2013-03-13T11:17:37.767
> 
> 标签：ios, objective-c, uibarbuttonitem, uiappearance

I have an `IBAction` responding to a selector that I want to use to change the displayed color of the icons. I set in Interface Builder a `darkGrayColor` for tint, but when changing the `tintColor` through code, the tint always goes to default color, making the icon white.

```
UIColor *dayColor = [UIColor darkGrayColor];
UIColor *nightColor = [UIColor lightGrayColor];

dayMode = !dayModeSwitch.on;
if (dayMode) {
    [tocButton setTintColor:dayColor];
    [actionButton setTintColor:dayColor];
    [searchButton setTintColor:dayColor];
} else {
    [tocButton setTintColor:nightColor];
    [actionButton setTintColor:nightColor];
    [searchButton setTintColor:nightColor];
} 
```

# php - Large images load slowly when sending via php vs straight links

> ID：15383786
> 
> 赞同：0
> 
> 时间：2013-03-13T11:17:41.790
> 
> 标签：php, image, apache

When we output images via PHP with `image_jpeg` or `file_get_contents` it takes more than twice as long as when we use straight links to the jpg files.
These files are about 180kb.
With our thumbnails (4kb images) there's not much of a time difference between the link and output via PHP.

Anyone know of a why PHP output is slower with larger files and a way to fix it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:20:12.783

我能想到的就是它在通过PHP解析时被解析了两次，而不是直接发送给客户端。因为 file_get_contents 执行它所说的，它读取内容，然后将其发送给客户端。不过我可能是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:25:14.767

image_jpeg 和 file_get_contents 之间存在差异。第一个是创建 jpeg 的 gd 函数，这需要时间。第二个只是从文件中读取数据。

问题是如何将其输出到浏览器。如果不采取适当的措施，内容永远不会被缓存，所以浏览器每次都要下载。静态图像总是由浏览器缓存，在第一次加载后，几乎不需要时间（只是一个 HEAD 请求）。

试试这个代码：

```
function CachedFileResponse($thefile,$nocache=0) {
  if (!file_exists($thefile)) {
    error_log('cache error: file not found: '.$thefile);
    header('HTTP/1.0 404 Not Found',true,404);
  } else {
    $lastmodified=gmdate('D, d M Y H:i:s \G\M\T', filemtime($thefile));
    $etag = '"'.md5($lastmodified.filesize($thefile).$thefile).'"';
    header('ETag: '.$etag);
    header('Last-Modified: '.$lastmodified);
    header('Cache-Control: max-age=3600');
    header('Expires: '.gmdate('D, d M Y H:i:s \G\M\T', time()+86400));
    $ext=strtolower(substr($thefile,strrpos($thefile,'.')+1));
    $fname=substr($thefile,strrpos($thefile,'/')+1);
    if ($ext=='jpg' || $ext=='jpeg') {
      header('Content-Type: image/jpeg');
    } elseif ($ext=='gif') {
      header('Content-Type: image/gif');
    } elseif ($ext=='png') {
      header('Content-Type: image/png');
    } else {
      header('Content-Type: application/binary');
    }
    header('Content-Length: ' . filesize($thefile));
    header('Content-Disposition: filename="'.$fname.'"');

    $ifmodifiedsince = isset($_SERVER['HTTP_IF_MODIFIED_SINCE']) ? stripslashes($_SERVER['HTTP_IF_MODIFIED_SINCE']) : false;
    $ifnonematch = isset($_SERVER['HTTP_IF_NONE_MATCH']) ? stripslashes($_SERVER['HTTP_IF_NONE_MATCH']) : false;
    if ($nocache || (!$ifmodifiedsince && !$ifnonematch) ||
       ($ifnonematch && $ifnonematch != $etag) ||
       ($ifmodifiedsince && $ifmodifiedsince != $lastmodified)) {
      error_log('cache miss: '.$thefile);
      $fp = fopen($thefile, 'rb');
      fpassthru($fp);
      fclose($fp);
    } else {
      error_log('cache hit: '.$thefile);
      header("HTTP/1.0 304 Not Modified",true,304);
    }
  }
} 
```

# github - 为打开请求的请求创建 GitHub 挂钩

> ID：15383790
> 
> 赞同：1
> 
> 时间：2013-03-13T11:17:47.783
> 
> 标签：github, jira, github-api

我正在尝试设置一个 GitHub 挂钩，该挂钩在打开拉取请求时将 POST 发送到 url。这篇文章应该包含拉取请求的所有相关细节，但是我在 GitHub 上的“Web-Hook URLS”中添加了一个 url，并使用请求 bin 对其进行了测试，发现它只在我执行 git commit 时发送一个 POST。

当我打开一个新的拉取请求时，是否可以让 GitHub 发送一个 POST？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:28:23.420

通过使用此要点解决：

[https://gist.github.com/bjhess/2726012](https://gist.github.com/bjhess/2726012)

# java - Paint my collection of geometry feature?

> ID：15383794
> 
> 赞同：0
> 
> 时间：2013-03-13T11:17:59.427
> 
> 标签：java, swing, paint, computational-geometry, jviewport

hello am trying to paint my feature ( collection of geometry with a specific color ) but i get this error: it's a problem with the arraylist to be casted but i don't how to fix it PLZ help me Thanks in advance

> ```
> Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: 
> ```
> 
> java.util.ArrayList cannot be cast to com.vividsolutions.jts.geom.GeometryCollection at com.vividsolutions.jump.workbench.ui.plugin.specific.SearchPropertiesPlugin$3.actionPerformed(SearchPropertiesPlugin.java:205) at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995) at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318) at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387) at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242) at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236) at java.awt.Component.processMouseEvent(Component.java:6297) at javax.swing.JComponent.processMouseEvent(JComponent.java:3275) at java.awt.Component.processEvent(Component.java:6062) at java.awt.Container.processEvent(Container.java:2039) at java.awt.Component.dispatchEventImpl(Component.java:4660) at java.awt.Container.dispatchEventImpl(Container.java:2097) at java.awt.Component.dispatchEvent(Component.java:4488) at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4575) at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4236) at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4166) at java.awt.Container.dispatchEventImpl(Container.java:2083) at java.awt.Window.dispatchEventImpl(Window.java:2489) at java.awt.Component.dispatchEvent(Component.java:4488) at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:668) at java.awt.EventQueue.access$400(EventQueue.java:81) at java.awt.EventQueue$2.run(EventQueue.java:627) at java.awt.EventQueue$2.run(EventQueue.java:625) at java.security.AccessController.doPrivileged(Native Method) at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87) at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98) at java.awt.EventQueue$3.run(EventQueue.java:641) at java.awt.EventQueue$3.run(EventQueue.java:639) at java.security.AccessController.doPrivileged(Native Method) at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87) at java.awt.EventQueue.dispatchEvent(EventQueue.java:638) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161) at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)

here's where he get's the exception:

```
Viewport viewport = new Viewport(context.getLayerViewPanel());
Paint fillPaint = null;
Color color = Color.yellow;
Stroke stroke =new BasicStroke(5, BasicStroke.CAP_ROUND,BasicStroke.JOIN_ROUND);
final Graphics2D graphics = (Graphics2D) context.getLayerViewPanel().getGraphics(); 
```

//in this line:

```
paintGeometryCollection((GeometryCollection) selectedFeatures(),
                                        graphics, viewport, true,
                                        stroke,fillPaint, true,
                                        stroke, color); 
```

and here's the other methods that it needs:

```
public Collection selectedFeatures() {
    ArrayList selectedFeatures = new ArrayList();
    for(BasicFeature basicFeature : TitreList) {
    selectedFeatures.add(search().getGeometry());
    // search() is a BasicFeature
    }
    return selectedFeatures;
}   

    private static void paintGeometryCollection(GeometryCollection collection,
        Graphics2D g, Viewport viewport, boolean renderingFill,
        Stroke fillStroke, Paint fillPaint, boolean renderingLine,
        Stroke lineStroke, Color lineColor)
        throws NoninvertibleTransformException {
        //For GeometryCollections, render each element separately. Otherwise,
        //for example, if you pass in a GeometryCollection containing a ring and a
        // disk, you cannot render them as such: if you use Graphics.fill, you'll get
        //two disks, and if you use Graphics.draw, you'll get two rings. [Jon Aquino]
        for (int i = 0; i < collection.getNumGeometries(); i++) {
            paint(collection.getGeometryN(i), g, viewport, renderingFill,
                fillStroke, fillPaint, renderingLine, lineStroke, lineColor);
        }
    }

public static void paint(Geometry geometry, Graphics2D g,
        Viewport viewport, boolean renderingFill, Stroke fillStroke,
        Paint fillPaint, boolean renderingLine, Stroke lineStroke,
        Color lineColor) throws NoninvertibleTransformException {
        if (geometry instanceof GeometryCollection) {
            paintGeometryCollection((GeometryCollection) geometry, g, viewport,
                renderingFill, fillStroke, fillPaint, renderingLine,
                lineStroke, lineColor);

            return;
        }

        Shape shape = toShape(geometry, viewport);
        if (!(shape instanceof GeneralPath) && renderingFill) {
            g.setStroke(fillStroke);
            g.setPaint(fillPaint);
            g.fill(shape);
        }
        if (renderingLine) {
            g.setStroke(lineStroke);
            g.setColor(lineColor);
            g.draw(shape);
        }
    }

private static Shape toShape(Geometry geometry, Viewport viewport)
throws NoninvertibleTransformException {
//At high magnifications, Java rendering can be sped up by clipping
//the Geometry to only that portion visible inside the viewport.
//Hence the code below. [Jon Aquino]
Envelope bufferedEnvelope = EnvelopeUtil.bufferByFraction(viewport.getEnvelopeInModelCoordinates(),
        0.05);
Geometry actualGeometry = geometry;
Envelope geomEnv = actualGeometry.getEnvelopeInternal();
if (! bufferedEnvelope.contains(geomEnv)) {
  /**
   * MD - letting Java2D do more clipping actually seems to be slower!
   * So don't use following "optimization"
   */
  //if (isRatioLarge(bufferedEnvelope, geomEnv, 2)) {
    if (!((geometry instanceof LineString) || (geometry instanceof MultiLineString)))
        actualGeometry = clipGeometry(geometry, bufferedEnvelope);
    //System.out.println("cl");
  //}
}
return viewport.getJava2DConverter().toShape(actualGeometry);
   }

private static Geometry clipGeometry(Geometry geom, Envelope env)
{
  try {
      Geometry clipGeom = EnvelopeUtil.toGeometry(env)
                                   .intersection(geom);
      return clipGeom;
  } catch (Exception e) {
      //Can get a TopologyException if the Geometry is invalid. Eat it. [Jon Aquino]
      //Can get an AssertionFailedException (unable to assign hole to a shell)
      //at high magnifications. Eat it. [Jon Aquino]

      //Alvaro Zabala reports that we can get here with an
      //IllegalArgumentException (points must form a closed linestring)
      //for bad geometries. Eat it. [Jon Aquino]
  }
  return geom;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:38:35.023

`public Collection selectedFeatures()`返回，`Colecction`但您将其转换为`GeometryCollection`. 对我来说，这就是问题所在。

线`paintGeometryCollection((GeometryCollection) selectedFeatures(),`

# python - Allen Dwney 的 Think Python 第 12 章（元组）练习 6

> ID：15383799
> 
> 赞同：5
> 
> 时间：2013-03-13T11:18:23.583
> 
> 标签：python, algorithm, data-structures

我正在从 Allen Downey 的 Think Python 中学习 python，我在[这里](http://www.greenteapress.com/thinkpython/html/thinkpython013.html#toc141)的练习 6 被困住了。我为它写了一个解决方案，乍一看，它似乎比[这里](http://www.greenteapress.com/thinkpython/code/reducible.py)给出的答案有所改进。但是在运行两者后，我发现我的解决方案需要一整天（约 22 小时）来计算答案，而作者的解决方案只需要几秒钟。谁能告诉我作者的解决方案*如何*如此之快，当它遍历包含 113,812 个单词的字典并对每个单词应用递归函数以计算结果时？

我的解决方案：

```
known_red = {'sprite': 6, 'a': 1, 'i': 1, '': 0}  #Global dict of known reducible words, with their length as values

def compute_children(word):
   """Returns a list of all valid words that can be constructed from the word by removing one letter from the word"""
    from dict_exercises import words_dict
    wdict = words_dict() #Builds a dictionary containing all valid English words as keys
    wdict['i'] = 'i'
    wdict['a'] = 'a'
    wdict[''] = ''
    res = []

    for i in range(len(word)):
        child = word[:i] + word[i+1:]
        if nword in wdict:
            res.append(nword)

    return res

def is_reducible(word):
    """Returns true if a word is reducible to ''. Recursively, a word is reducible if any of its children are reducible"""
    if word in known_red:
        return True
    children = compute_children(word)

    for child in children:
        if is_reducible(child):
            known_red[word] = len(word)
            return True
    return False

def longest_reducible():
    """Finds the longest reducible word in the dictionary"""
    from dict_exercises import words_dict
    wdict = words_dict()
    reducibles = []

    for word in wdict:
        if 'i' in word or 'a' in word: #Word can only be reducible if it is reducible to either 'I' or 'a', since they are the only one-letter words possible
            if word not in known_red and is_reducible(word):
                known_red[word] = len(word)

    for word, length in known_red.items():
        reducibles.append((length, word))

    reducibles.sort(reverse=True)

    return reducibles[0][1] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:31:16.943

```
wdict = words_dict() #Builds a dictionary containing all valid English words... 
```

据推测，这需要一段时间。

但是， 对于您尝试减少的每个单词，您都会**多次重新生成相同的、不变的字典。**多么浪费！如果你制作这个字典一次，然后像你一样为你尝试减少的每个单词重新使用该字典`known_red`，那么计算时间应该会大大减少。

# javascript - jQuery - 获取多选中未选中项的值

> ID：15383802
> 
> 赞同：1
> 
> 时间：2013-03-13T11:18:26.013
> 
> 标签：javascript, jquery, jquery-chosen

虽然这听起来很简单，但由于我只能在 select 元素上使用 change() 触发器，事情变得复杂了。我正在使用'Chosen' jQuery 插件，它基本上修改了页面上的多选框。

Whenever a item is selected or unselected, the plugin triggers the change event on the original select element. 我显然能够获得所有未选择的项目，但我需要一个刚刚未选择的导致更改事件触发的项目。

所以我有以下功能，中间的位是我需要捕获刚刚未选中的项目。#cho 是原始选择元素的 id。

```
$("#cho").chosen().change( function() {

// Need code here to capture what item was just unselected, if any...

}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:50:53.523

当用户更改复选框时存储值。

var preVal;

$("input[name='g']").on("change",function(e){ if(preVal){

```
 alert(preVal);
}

preVal=$(this).val(); 
```

});

检查这个[http://jsfiddle.net/fcpfm/](http://jsfiddle.net/fcpfm/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:27:23.923

1.使用隐藏字段

2.隐藏字段值最初为空。

3.Onchange 将选定的值放在隐藏字段中。

4.如果再次发生onchange，隐藏字段值是之前选择的值。

```
$("#cho").chosen().change( function() {

 var hidvalue =  $('#hiddenfield').val();
 if (hidvalue ) {
   //Get the previously selected ids
    var prev_ids = $('#hiddenfield').val();
   //Then Update currently selected ids  
    $('#hiddenfield').val('currently selected ids');
 } else {
     //Update currently selected ids  
    $('#hiddenfield').val('currently selected ids');  
 }

}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:26:30.520

尝试使用变量来存储所选项目。每次更改项目时更新它。我无法添加评论。这就是为什么我将其发布为答案。

# c# - Add to an arraylist from different arraylist index

> ID：15383817
> 
> 赞同：3
> 
> 时间：2013-03-13T11:19:16.413
> 
> 标签：c#, winforms, arraylist, listbox

I have two array lists one in which I read in values from an XML, and then I add a specific tag to a listbox. From the listbox I transfer over the tag to another listbox, but the problem I am having is when trying to get the values of the selected item in the listbox in array1 to move over to array2. How can I do this and make sure all things saved in the current index of arraylist1 move to arraylist2?

//Initialisation

```
 int moduleCount = 0;
    bool isFull = false;
    ArrayList chosen= new ArrayList();
    ArrayList module = new ArrayList();
    String name;
    String code;
    String info;
    String semester;
    String tSlot;
    String lSlot;
    String preReq;
    string xmlDirectory = Directory.GetCurrentDirectory();
    public Form1()
    {
        InitializeComponent();
        createBox();
        //List<Array> a=new List<Array>();            

        // Console.WriteLine(module.ToString());
       // getXML();
    }

    private void createBox()
    {
        String workingDir = Directory.GetCurrentDirectory();

        XmlTextReader textReader = new XmlTextReader(workingDir + @"\XML.xml");
        textReader.Read();
        XmlNodeType type;

        while (textReader.Read())
        {
            textReader.MoveToElement();
            type = textReader.NodeType;
            if (type == XmlNodeType.Element)
            {
                if (textReader.Name == "Code")
                {
                    textReader.Read();
                    code = textReader.Value;
                    Console.WriteLine(code);
                }
                if (textReader.Name == "Name")
                {
                    textReader.Read();
                    name = textReader.Value;
                    //selectionBox.Items.Add(name);
                    Console.WriteLine(name);
                }
                if (textReader.Name == "Semester")
                {
                    textReader.Read();
                    semester = textReader.Value;
                    Console.WriteLine(semester);
                }
                if (textReader.Name == "Prerequisite")
                {
                    textReader.Read();
                    preReq = textReader.Value;
                    Console.WriteLine(code);
                }
                if (textReader.Name == "LectureSlot")
                {
                    textReader.Read();
                    lSlot = textReader.Value;
                    Console.WriteLine(lSlot);
                }
                if (textReader.Name == "TutorialSlot")
                {
                    textReader.Read();
                    tSlot = textReader.Value;
                    Console.WriteLine(tSlot);
                }
                if (textReader.Name == "Info")
                {
                    textReader.Read();
                    info = textReader.Value;
                    Console.WriteLine(info);
                    module.Add(new Modules(code, name, semester, tSlot, lSlot, info, preReq));
                }
            }

            //Console.WriteLine(module);
        }
        foreach (object o in module)
        {
            Modules m = (Modules)o;
            //String hold = m.mName;
            selectionBox.Items.Add(m.mName);
        }
        textReader.Close(); 
```

//button event handler to move from one listbox to the other

```
if (selectionBox.SelectedItem != null)
        {
            chosenBox.Items.Add(selectionBox.SelectedItem);
            selectionBox.Items.Remove(selectionBox.SelectedItem);
            chosen.Add(selectionBox.SelectedItem);
            errorLabel.Text = "";
            moduleCount++;
            if (moduleCount >= 8)
            {
                isFull = true;
                errorLabel.Text = "You have selected 8 Modules please fill the fields and submit";
                selectionBox.Enabled = false;
            }
        }
        else
        {
            errorLabel.Text = "Please select a module";
        }

        numberChosen.Text = String.Format(moduleCount.ToString()); 
```

//Write to XML

```
 foreach (object o in chosen)
            {
                Modules m = (Modules)o;
                if (m.mPreReq != "None")
                {   
                    MessageBox.Show("You must chose module " + m.mPreReq);
                    //errorLabel.Text = "You must chose module " + m.mPreReq;
                    errorLabel.Text = "There is a prereq course";
                    req = true;
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:39:58.707

好的，您似乎需要将添加到 selectionBox 的 m.mName 与您添加到模块 ArrayList 的实际模块相关联，以便稍后可以将该模块的成员添加到所选的 ArrayList 中。就像是：

```
if (selectionBox.SelectedItem != null)
{
    chosenBox.Items.Add(selectionBox.SelectedItem);
    selectionBox.Items.Remove(selectionBox.SelectedItem);

    foreach (Module m in module)
    {
        if (m.Name.Equals(selectionBox.SelectedItem)
        {
            chosen.Add(m.Info);
            chosen.Add(m.Code);
            ...
            break;
        }
     }

     errorLabel.Text = "";
     moduleCount++;
     if (moduleCount >= 8)
     {
         isFull = true;
         errorLabel.Text = "You have selected 8 Modules please fill the fields and submit";
         selectionBox.Enabled = false;
     }
     else
     {
        errorLabel.Text = "Please select a module";
     }
 }

 numberChosen.Text = String.Format(moduleCount.ToString()); 
```

# c# - 如何计算图像中两点之间的距离，答案应该是像素数？

> ID：15383818
> 
> 赞同：-4
> 
> 时间：2013-03-13T11:19:19.877
> 
> 标签：c#

我在 c# 编程方面不是那么好。我只是在学习它。我有一个小程序，我必须计算图像上直线绘制的两点之间的距离，结果应该是它们之间的像素数。我需要画一条线，一旦我结束这条线，我应该得到一个像素数的答案。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:33:29.797

您可以为此使用毕达哥拉斯定理。

假设您想要整数像素的距离，向上舍入，然后给定两个点，它们之间的距离（以像素为单位）为：

```
public static int Distance(Point p1, Point p2)
{
    int dx = p1.X - p2.X;
    int dy = p1.Y - p2.Y;

    double distance = Math.Sqrt(dx*dx + dy*dy);

    return (int) Math.Round(distance, MidpointRounding.AwayFromZero);
} 
```

# ruby-on-rails - Angular Routes 和 Rails 部分

> ID：15383821
> 
> 赞同：0
> 
> 时间：2013-03-13T11:19:28.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, angularjs

嗨，有一条看起来像这样的角度路线

```
app.config ($routeProvider, $locationProvider) ->
  $locationProvider.html5Mode(true);
  $routeProvider.when("/",
    {
      templateUrl: "assets/pages/partials/home_controls.html"
      controller: MapCtrl
    }
  ).when("/products/business",
    {
      templateUrl: "../assets/pages/partials/business_controls.html"
      controller: MapCtrl
    }
  ).when("/products/search",
    {
      templateUrl: "../assets/pages/partials/search_controls.html"
      controller: MapCtrl
    }
  ) 
```

它的工作原理非常好。并将部分加载到

当这些页面从地址输入或页面刷新加载时，它们加载正常

但是，例如，如果我有一个由 Rails 视图控制的链接，它只会加载 AngularJS Partial 而不会更改 Rails 页面。例如：

```
<%= render :partial => "pages/partials/map"%> 
```

Angular 代码正在该部分内加载，其他周围的布局控制导航等...

这很奇怪，因为指向页面的链接仅加载 Angular，但新地址加载一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T21:14:16.297

也许它的发生是因为

`$locationProvider.html5Mode(true);`

你确定你的浏览器真的要求你的 Rails 服务器给它页面吗？

# joomla3.0 - 如何在 Joomla 中使用 AJAX 从另一个更改选择列表

> ID：15383822
> 
> 赞同：4
> 
> 时间：2013-03-13T11:19:30.033
> 
> 标签：joomla3.0

我有一个国家列表和每个国家的城市列表。我将两者都设置为下拉列表。

我的问题是，当所选国家/地区发生变化时，如何更改列出的城市？

这是我的 XML 代码：

```
<field name="country_id" type="sql" class="country" label="Country"
       description="Country" required="true"
       query="SELECT id, title FROM #__destination_countries WHERE state = 1"
       key_field="id" value_field="title" filter="raw">
</field> 

<field name="city_id" type="sql"
       query="SELECT id, title FROM #__destination_cities WHERE state = 1"
       key_field="id" value_field="title" class="city" label="City"
       description="City" required="true" filter="raw">
</field> 
```

阿贾克斯代码：

```
jQuery(document).ready(function($) {
    $(".country").change(function(){
        country_id = $("#" + this.id).val();
        $.ajax({
            url:'index.php?option=com_destination&task=cities.getListCities',
            type: "POST",
            data: {
                'country_id': country_id
            }
        }).done(function(msg) {
            console.log(msg);
            $(".city").html(msg);

        })
    })
}); 
```

这是我的服务器端代码

```
public function getListCities()
{
    $country_id = JRequest::getInt('country_id', 0);
    $model = $this->getModel();
    $model->setState('filter.country_id', $country_id);
    $items = $model->getItems();
    $option = array();
    foreach ($items as $key => $item) {
        $option[] = "<option value='{$item->id}'>{$item->title}</option>";
    }
    $return = implode("", $option);
    echo $return;
    exit;
} 
```

但它没有按我的意愿显示，它显示如下

```
<select style="display: none;" required="required" id="jform_city_id" name="jform[city_id]" class="city required chzn-done">
    <option value="1">City 1 of Coutry 1</option>
</select>
<div style="width: 220px;" class="chzn-container chzn-container-active" id="jform_city_id_chzn">
    <a tabindex="-1" href="javascript:void(0)" class="chzn-single chzn-single-with-drop">
        <span>City 1 of Coutry 1</span>
        <div><b></b></div>
    </a>
    <div class="chzn-drop" style="display: block; width: 218px; top: 24px;">
        <div class="chzn-search"><input tabindex="-1" style="width: 183px;" autocomplete="off" type="text"></div>
        <ul class="chzn-results">
            <li id="jform_city_id_chzn_o_0" class="active-result" style="">City 1 of Coutry 1</li>
            <li id="jform_city_id_chzn_o_1" class="active-result result-selected" style="">City 2 of Coutry 1</li>
        </ul>
    </div>
</div> 
```

只需更改选择选项，但没有更改以下内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T13:14:57.917

另外请注意，您正在使用不推荐使用的`JRequest::getInt();`地方

```
$input = JFactory::getApplication()->input;
$country_id = $input->getInt('country_id', 0); 
```

为了改变第二个选择，你必须触发第二个选择的更新：

```
$(".country").change(function(){
    // your ajax call from your code

    // on success, you need to trigger the second select by using
    $(".city_id").val(your_value_from_ajax_response).trigger("liszt:updated");

}); 
```

# javascript - JavaScript 正则表达式排除 + 包含模式匹配

> ID：15383829
> 
> 赞同：3
> 
> 时间：2013-03-13T11:20:07.017
> 
> 标签：javascript, regex

我正在使用 JavaScript RegExp 对 HTML 内容进行搜索突出显示。

为此，我正在使用：

```
data.replace( new RegExp("("+search+")", 'g'), "<b id='searchHighlight'>$1</b>" ); 
```

其中`data`是整个 HTML 内容，`search`是搜索字符串。

例如，在搜索时`h`，它会突出显示单词（the、there 等）中的 h 以及诸如`"<h1 id="title"> Something </h1>"`等标签中的实例。

我不能采用替代方法，因为我需要以相同的样式突出显示相同的 HTML 内容。

我已阅读以下解决方案：

```
var input = "a dog <span class='something'> had a  </span> and a cat";
// Remove anything tag-like
var temp = input.replace(/<.+?>/g, "");
// Perform the search
var matches = new RegExp(exp, "g").exec(temp); 
```

但是由于我需要在相同的 HTML 内容中突出显示搜索文本，所以我不能简单地去掉现有的标签。有什么方法可以在 RegExp 中进行包含和排除搜索，例如，我可以`h`在**“the”**中突出显示`"t<b id='searchHighlight'>h</b>e"`
并且不允许`"<h1 id="title">Test</h1>"`因此被破坏：`"<<b id='searchHighlight'>h</b>1 id="title">Test</<b id='searchHighlight'>h</b>1>"`？

HTML 内容是静态的，如下所示：

```
 <h1 id="title">Samples</h1>
        <div id="content">
            <div  class="principle">
        <h2 id="heading">           
            PRINCIPLE</h2>

        <p>
            FDA recognizes that samples are an important part of ensuring that the right drugs are provided to the right patients. Under the Prescription Drug Marketing Act (PDMA), a sales representative is permitted to provide prescription drug samples to eligible healthcare professionals (HCPs). In order for BMS to provide this service, representatives must strictly abide by all applicable compliance standards pertaining to the distribution of samples.</p></div>
<h2 id="heading">           
            WHY DOES IT MATTER?</h2>
        <p>
            The Office of Inspector General (OIG) recognizes that samples can have monetary value to HCPs and, when used improperly, may have implications under the Federal False Claims Act and the Federal Anti-kickback Act. To minimize risk of such liability, the OIG requires the clear and conspicuous labeling of individual samples as units that cannot be sold.&nbsp; BMS and its business partners label every sample package to meet this requirement.&nbsp; Additionally, the HCP signature statement acknowledges that the samples will not be sold, billed or provided to family members or friends.</p>
        <h2 id="heading">

            WHO IS YOUR SMaRT PARTNER?</h2>
        <p>
            SMaRT is an acronym for &ldquo;Samples Management and Representatives Together&rdquo;.&nbsp; A SMaRT Partner has a thorough understanding of BMS sample requirements and is available to assist the field with any day-to-day policy or procedure questions related to sample activity. A SMaRT Partner will also:</p>

        <ul>
            <li style="margin-left:22pt;"> Monitor your adherence to BMS&rsquo;s sample requirements.</li>
            <li style="margin-left:22pt;"> Act as a conduit for sharing sample compliance issues and best practices.</li>
            <li style="margin-left:22pt;"> Respond to day-to-day sample accountability questions within two business days of receipt.</li>
        </ul>
        <p>

            Your SMaRT Partner can be reached at 888-475-2328, Option 3.</p>
        <h2 id="heading">

            BMS SAMPLE ACCOUNTABILITY POLICIES &amp; PROCEDURES</h2>
        <p>
            It is the responsibility of each sales representative to read, understand and follow the BMS Field Sample Accountability Procedures, USPSM-SOP-101\. The basic expectations are:</p>
        <ul>
            <li style="margin-left:22pt;"> Transmit all sample activity by communicating your tablet to the host server on a <strong>daily</strong> basis.</li>
            <li style="margin-left:22pt;"> Maintain a four to six week inventory of samples rather than excessive, larger inventories that are more difficult to manage and increase your risk of non-compliance.</li>
            <li style="margin-left:22pt;"> Witness all HCP&rsquo;s signatures to confirm request and receipt of samples.</li>
        </ul>
</div> 
```

内容都是分散的，而不是一个标签。所以 DOM 操作对我来说不是一个解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:18:28.287

如果您可以确定标签的属性不存在`<`或存在，则可以使用`>`

```
data = data.replace( 
    new RegExp( "(" + search + "(?![^<>]*>))", 'g' ),
        "<b id='searchHighlight'>$1</b>" ); 
```

如果字符串中出现在前面，则负前瞻会`(?![^<>]*>)`阻止替换，就像在标签内一样。`>``<`

这远非万无一失，但它可能已经足够好了。

顺便说一句，当您在全球范围内匹配时，即进行多个替换，`id='searchHighlight'`可能应该是`class='searchHighlight'`.

并且您需要注意`search`不包含任何正则表达式特殊字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:49:18.157

您可能已经意识到您尝试使用错误的工具来完成这项工作，所以这只是为了记录（如果您不是，您可能会[发现这很有见地](https://stackoverflow.com/questions/590747/using-regular-expressions-to-parse-html-why-not)）。

您可能（肯定会？）在具有基本任意文本内容的 html 属性上遇到一个基本问题，即`title`（工具提示属性）和`data-...`（通过设计保存任意数据的通用用户定义属性） - 无论您在文本部分找到什么你的 html 代码，你也可以在那里找到，替换会破坏气球帮助和/或破坏一些应用程序逻辑。另请注意，文本内容的任何字符都可以编码为命名或数字实体（例如`&`-> `&amp;`、`&#x26;`、`&#38;`），原则上可以处理，但会使动态正则表达式复杂化（如果您的变量`search`将保存直接文本）。

说了这么多，除非要突出显示的搜索结果可能包含在正则表达式规范中具有语义的字符，否则您可能会相处融洽，**例如**，也许；这些你必须正确逃脱。`data.replace( new RegExp("([>]?)[^><]*("+search+")[^><]*([<]?)", 'g'), "<b id='searchHighlight'>$1$2$3</b>" );``.+*|([{}])\``-`

总而言之：*修改您的设计以使您免于麻烦*。

顺便说一句，你为什么不选择 dom 遍历？你不需要知道实际存在的 html 标签来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:09:04.400

这不是一个纯粹的 RegExp 解决方案，但是，如果您无法遍历 DOM，那么带有功能替换和循环的字符串操作可能对您有用。

1.  声明您需要的变量并获取文档正文的 innerHTML。
2.  现在查看提取任何标签并将它们保存在数组中的数据。留下一个占位符，以便您知道以后将它们放回哪里。
3.  将字符串中的所有标签替换为临时占位符后，您可以使用原始代码替换所需的字符，但将结果分配回`data`.
4.  然后，您需要通过反转之前的过程来恢复标签。
5.  将 new 指定`data`为文档正文的 innerHTML。

这是[在行动的过程](http://jsfiddle.net/guypursey/zLEgC/)。

这是代码：

```
var data = document.body.innerHTML, // get the DOM as a string
    tagarray = [], // a place to temporarily store all your tags
    tagmatch = /<[^>]+>/g, // for matching tags
    tagplaceholder = '<>', // could be anything but should not match the RegExp above, and not be the same as the search string below
    search = 'h'; // for example; but this could be set dynamically

while (tagmatch.test(data)) {
    data = data.replace(tagmatch, function (str) {
        tagarray.push(str); // store each matched tag in your array
        return tagplaceholder; // whatever your placeholder should be
    });
}

data = data.replace( new RegExp("("+search+")", 'g'), "<b id='searchHighlight'>$1</b>" ); // now search and replace the string of your choice

while (new RegExp(tagplaceholder, 'g').test(data)) {
    data = data.replace(tagplaceholder, function (str) {
        return tagarray.shift(str); // replace the placeholders with the tags you saved earlier to restore them
    });
}

document.body.innerHTML = data; // assign the changed `data` string to the body 
```

显然，如果您可以将所有这些都放在一个自己的函数中，那就更好了，因为您真的不希望像上面这样的全局变量到处存在。

# model-view-controller - Ember.js - 创建一个多步骤向导 - 如何？

> ID：15383834
> 
> 赞同：11
> 
> 时间：2013-03-13T11:20:16.673
> 
> 标签：model-view-controller, ember.js

我需要创建一个包含多个步骤的向导。每个步骤都会显示一个带有选项的表单，并且根据用户的选择，向导应该转到某个步骤，并将用户偏好（选择）存储在某个位置。

这些首选项不会保存在模型中，它们仅与模型创建步骤相关。

为了给出一些上下文，这样做的目标是：

*   向用户提出一些关于其营业时间的问题。例如：*周末营业吗？*,*夏天不一样吗？*.
*   根据这些问题的答案，将显示最终表格以创建时间表模型。

问题是，在 Ember 中实现这一目标的最佳方式是什么？

这是我的——Ember 新手——的想法：

*   为每个向导步骤创建一个模板。
*   跟踪当前步骤。**在哪里？控制器？路线？**
*   将这些模板显示到`outlets`中，应根据当前步骤动态呈现。**这是我完全迷失的地方。这该怎么做？每个步骤是否应该有不同的路线？**
*   跟踪**控制器**中的用户回答。
*   向导完成后，加载表单模板，该模板将读取存储在控制器中的用户首选项。

* * *

正在使用的版本：

*   Ember.VERSION：1.0.0-rc.1 application.js:9268
*   Handlebars.VERSION：1.0.0-rc.3 application.js:9268
*   jQuery.版本：1.9.1

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T13:34:35.370

听起来你在正确的轨道上。

> 为每个向导步骤创建一个模板。

是的，这是一个好的开始。

> 跟踪当前步骤。在哪里？控制器？路线？

控制器或路由都可以工作。如果您希望每个步骤和后退/前进工作的可收藏 url，Route 最有意义，并且可能是最直接的解决方案。将假设您选择了路线。

> 将这些模板显示到 outlet，应根据当前步骤动态呈现。这是我完全迷失的地方。这该怎么做？每个步骤是否应该有不同的路线？

由于每一步都是一条路线，ember 会自动渲染适当的模板。

> 跟踪控制器中的用户回答。
> 
> 向导完成后，加载表单模板，该模板将读取存储在控制器中的用户首选项。

将“完成”视为又一个步骤。每个步骤都有自己的控制器，用于记录用户响应。最后一个控制器使用“需要”来访问早期的控制器，以便根据对向导的响应来自定义行为。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-02T14:21:49.030

我知道这是一个旧线程，可能对 OP 没有帮助，但是 stackoverflow 比其他任何东西都能提供更多的答案。我刚刚写了[一篇](http://mistahenry.com/form-wizards-custom-computed-property-for-route-dependent-values/)关于此的博客文章。

看看这个[JSBin](http://jsbin.com/tegega/2/edit?html,js,output)看看我做了什么。我会在这里总结一下。

模板中的每一步路线：

```
Router.map(function() {
  this.resource('wizard', function(){
    this.route('index');
    this.route('review');
    this.route('complete');
  });
}); 
```

路由更改时更改值的自定义计算属性（在这种情况下，当向导的步骤更改时）

```
import Ember from 'ember';  
var get = Ember.get;  
var computed = Ember.computed;

export function routeVal(routeVals, prop){  
    return computed('currentPath', function(){
        var currentRoute = get(this, 'currentPath');
        var routeValues = get(this, routeVals);
        for (var i = 0; i < routeValues.length; i++) {
            if (routeValues[i].route === currentRoute) {
                return routeValues[i][prop];
            }
        }
    });
} 
```

一个`route-value`对象：

```
export default Ember.Object.extend({
    route: null
    //all other props can be added dynamically
}); 
```

用于了解当前路由的控制器 mixin：

```
export default Ember.Mixin.create({  
    needs: ['application'],
    currentPath: Ember.computed.alias("controllers.application.currentPath")

}); 
```

资源控制器：

```
import CurrentRouteAware from 'path/to/mixin'; 
import {routeVal} from 'app_name/utils/macros';
export default Ember.Controller.extend(CurrentRouteAware, {
  routeValues: [
        RouteVal.create({
            route: 'wizard.index',
            step: 'Create',
            next: 'Review',
            nextTransition: 'wizard.review',
            prevTransition: 'wizard.index',
            showNext: true,
            showPrev: false
        }),
        RouteVal.create({
            route: 'wizard.review',
            step: 'Review',
            next: 'Complete',
            prev: 'Create',
            nextTransition: 'wizard.complete',
            prevTransition: 'wizard.index',
            showNext: true,
            showPrev: true
        }),
        RouteVal.create({
            route: 'wizard.complete',
            step: 'Complete',
            next: 'Make Another',
            prev: 'Review',
            nextTransition: 'wizard.complete',
            prevTransition: 'wizard.review',
            showNext: false,
            showPrev: true
        })
    ], 
    nextButton: routeVal('routeValues', 'next'),
    prevButton: routeVal('routeValues', 'prev'),
    nextTransition: routeVal('routeValues', 'nextTransition'),
    showButtons: routeVal('routeValues', 'showButtons'),
    prevTransition: routeVal('routeValues', 'prevTransition'),
    showNext: routeVal('routeValues', 'showNext'),
    showPrev: routeVal('routeValues', 'showPrev'),
    actions: {
        next: function(){
            this.transitionToRoute(this.get('nextTransition'));
        },
        prev: function(){
            this.transitionToRoute(this.get('prevTransition'));
        }
    }
}); 
```

将路由值对象视为“当路由等于 routeVal.route 时，以下属性将具有这些值”例如“当当前活动的路由是 'wizard.index' 时，下一个转换是 'wizard.review'，下一个按钮文本是“评论”，上一个按钮应该被隐藏，等等”

最后，您的资源模板：

```
<div class="wizard" id="wizardIllustration">
    {{form-wizard steps=routeValues currentPath=currentPath}}
  <div class="actions">
  {{#if showPrev}}
    <button type="button" {{action 'prev'}}class="btn btn-default btn-prev"><span class="glyphicon glyphicon-arrow-left"></span>{{prevButton}}</button>
    {{/if}}
    {{#if showNext}}
    <button {{action 'next'}}type="button" class="btn btn-default btn-next" >{{nextButton}}<span class="glyphicon glyphicon-arrow-right"></span></button>
    {{/if}}
  </div>
  <div class="step-content">
    {{outlet}}
  </div>

</div> 
```

您可以查看 jsbin 以了解 form-wizard 组件是什么（只是对 Fuelux 向导的 css 的包装，它使活动类根据路线保持在正确的步骤上）。向导的主体是每个子路由的模板。下一个/上一个按钮的文本会根据路线而变化，它们的转换也是如此（因为转换取决于向导的当前状态）。它或多或少是一个 FSM

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-22T08:01:51.320

回答一个老问题，以防有人需要一些答案。

您可以使用 Ember.js 在一条路线中使用类似这样 [的多步骤表单（或多个“页面”）](https://stackoverflow.com/questions/21620782/multi-step-form-or-multiple-pages-in-one-route-using-ember-js)

这使用了 1 条路线，每个步骤/页面使用 {{#if}} 显示或隐藏为了回答 Nino 的问题，当我实现这个时，我的控制器中有一个对象跟踪表单字段的所有值并将其更新为我点击下一步。当您到达提交的最后一页时，您可以简单地将这个对象插入到控制器的提交函数中，如下所示

```
submitSurvey: function() {
  var survey = this.store.createRecord('survey', this.get('surveyObj'));
  // surveyObj contains all the form field's values that you've been
  // keeping track of everytime you go from one step to another
  survey.save();
  this.transitionToRoute('somewhere'); // go somewhere after submitting the form
  this.set('firstPage', true); // make first page the page to show
  this.set('lastPage', false);
  this.init();
  // constructor's init contains code that empties all the form fields alternatively
  // you can create a separate function instead of using init
} 
```

适用于多页表单的简单实现。我遇到的问题是我有 jQuery UI 代码可以连接到视图的 didInsertElement 并且当我从一个步骤转到另一个步骤并返回时（每个页面都有“下一个”和“上一个”按钮），我发现在 didInsertElement 上运行的任何代码都将被撤消。就像这段 html 代码不只是隐藏和重新显示一样。它被重新加载，因此所有效果都消失了。

# c# - MouseEnter 和 MouseLeave 事件

> ID：15383836
> 
> 赞同：1
> 
> 时间：2013-03-13T11:20:19.097
> 
> 标签：c#, events, user-interface

我有一个图片框。它有两个事件

在 MouseEnterEvent 中：我确实在图片框底部加载了一个面板，其中有两个单选按钮

在 MouseLeaveEvent 中：我确实从图片框中删除了带有单选按钮的面板

但是问题是面板在图片框上，所以当鼠标从图片框进入面板时，图片框的离开事件被执行并且单选按钮消失。

当鼠标从图片框的实际边界而不是在面板上时，我想删除面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:25:15.397

您可以`MouseEnterEvent`为包含您的`pictureBox`.

例如，如果您的图片框是 on `Form1`，则在此表单的`Form1_MouseLeave`事件中删除面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:25:56.603

也许在你离开图片框之前做一些事情，检查你是否在面板中。如果是这样，请将布尔标志设置为 false，并在 mouseleave 中检查以确定是否要隐藏面板。

# c++ - 在 C++ 中使用 auto 的最简单的例子是什么？

> ID：15383844
> 
> 赞同：3
> 
> 时间：2013-03-13T11:20:42.310
> 
> 标签：c++, auto

我试图了解如何`auto`在 C++ 中使用。对我来说，理解某事的最好方法是看一个例子。但是，我看到的例子并不是那么简单。例如这里是“ [C++0x auto 关键字的含义，例如？](https://stackoverflow.com/questions/3784804/meaning-of-c0x-auto-keyword-by-example) ”。要理解这个例子，我需要知道什么是“模板”、“指针”、“malloc”等等。

请任何人都可以举一个使用 auto 的简约示例，以便人们可以轻松理解它的用途？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T11:23:41.910

```
int a = 10;
int b = 20;

auto c = a+b; // c will be int 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-13T11:25:28.867

`auto`用于类型推断，即基于表达式声明类型，而不是显式声明它。

```
auto val = 3; // here, val is declared as an integer 
```

显然，这并不是一个很大的优势，`int val = 3`所以让我们举一个更好的例子：

```
std::vector<int> container; // ...
for (auto it = container.begin(); it != container.end(); it++) {
    // type of it is std::vector<int>::iterator, but you don't need to state that
} 
```

在这里你不必关心真正的容器类型，即`std::vector<int>::iterator it = c.begin()`. 此外，您可以`container`从向量更改为列表，并且循环仍然可以在没有任何更改的情况下工作，`it`因为可以正确推断出类型。

注意：在 C++11 中，您可以将上面的循环编写为，`for( auto it: container)`但这可以更好地作为说明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T11:25:33.370

`auto`对于避免输入冗长的名称很有用，这是您通常使用模板获得的。但总的来说，模式是这样的：

```
struct my_class_with_a_long_name { };

my_class_with_a_long_name foo()
{
    my_class_with_a_long_name obj;
    // ...
    return obj;
}

int main()
{
    auto myObj = foo();
} 
```

但这不仅仅是关于输入更少的字符，它还与*一致性*有关。如果更改 的返回类型`foo`，则不必显式更改 的类型`myObj`。

基本上，关键是当编译器在编译时知道某个表达式的类型时，没有理由不利用这些知识并让编译器自动使用它，无论在什么情况下都可以这样做。

The only situation where you likely do *not* want to use `auto` is when you want to perform *conversions*, or when you want the type of a variable to appear explicit before its declaration for readability reasons.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T11:25:18.910

我假设您知道什么`std::vector<int>`是（基本上是可调整大小的整数数组）。

假设您只有这样一个向量，并且想要迭代它的元素。在这里，`auto`非常方便：

```
std::vector<int> items;
...
for (auto iter = std::begin(items); iter != std::end(items); ++iter) {
    // do something with `iter'
} 
```

虽然`iter`概念上很简单（它是一个迭代器），但它的类型有点复杂（`std::vector<int>::iterator`）。使用`auto`使您不必拼出类型。它还可以更轻松地将类型更改为`items`其他容器。

# javascript - JavaScript“计数器”对象，它是什么？

> ID：15383846
> 
> 赞同：6
> 
> 时间：2013-03-13T11:20:46.740
> 
> 标签：javascript, html, firefox, webkit

我只是偶然注意到 WebKit 和 Firefox 在窗口中定义了一个名为“Counter”的全局变量。知道这是什么吗？

在 Chrome 上，它在手表中显示为：

```
Counter: function Counter() { [native code] } 
```

注意：此变量在 IE 上不存在（使用版本 10 测试）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:26:49.340

我能找到的最好的与 Rhino 相关： [https ://developer.mozilla.org/en-US/docs/Rhino/Embedding_tutorial#Counter_example](https://developer.mozilla.org/en-US/docs/Rhino/Embedding_tutorial#Counter_example)

但是在 webkit 中它无法实例化：

```
var c = new Counter(7)
TypeError: Illegal constructor

var c = Counter(7)
TypeError: Illegal constructor 
```

在壁虎中：

```
[12:33:24.608] var c = Counter(7)
[12:33:24.609] TypeError: Counter is not a function
[12:33:29.049] var c = new Counter(7)
[12:33:29.051] TypeError: Counter is not a constructor
[12:33:31.043] Counter
[12:33:31.046] [object Counter] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T12:11:15.620

[http://blog.peschla.net/doxygen/v8_chromium_r157275/v8-counters_8h.html](http://blog.peschla.net/doxygen/v8_chromium_r157275/v8-counters_8h.html)

我相信这是说计数器用于垃圾收集，计算对任何给定数据的引用次数。直接或间接帮助它创建一个更准确的指针来调用该数据或从缓存中释放它？如果我错了，请纠正我，我是新手.. 谷歌比学习更有趣。

# java - 如何获取android sqlite数据库中的所有表名？

> ID：15383847
> 
> 赞同：41
> 
> 时间：2013-03-13T11:20:48.513
> 
> 标签：java, android, sqlite

我试过这段代码

```
Cursor c=db.rawQuery("SELECT name FROM sqlite_master WHERE type = 'table'",null);
c.moveToFirst();
while(!c.isAfterLast()){
    Toast.makeText(activityName.this, "Table Name=> "+c.getString(0), 
        Toast.LENGTH_LONG).show();
} 
```

但它会抛出错误：

```
"android.database.sqlite.SQLiteException: no such table: sqlite_master(code 1):, while 
compiling: SELECT name FROM sqlite_master WHERE type='table'" 
```

如何获取所有表名？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-13T11:39:35.160

检查、测试和运行。试试这个代码：

```
Cursor c = db.rawQuery("SELECT name FROM sqlite_master WHERE type='table'", null);

if (c.moveToFirst()) {
    while ( !c.isAfterLast() ) {
        Toast.makeText(activityName.this, "Table Name=> "+c.getString(0), Toast.LENGTH_LONG).show();
        c.moveToNext();
    }
} 
```

我假设，在某个时刻，您将获取*表名*列表以显示在 a`ListView`或其他内容中。不只是展示吐司。

*未经测试的代码。正是我想到的。在生产应用程序中使用它之前进行测试。;-)*

在这种情况下，请考虑对上面发布的代码进行以下更改：

```
ArrayList<String> arrTblNames = new ArrayList<String>();
Cursor c = db.rawQuery("SELECT name FROM sqlite_master WHERE type='table'", null);

    if (c.moveToFirst()) {
        while ( !c.isAfterLast() ) {
            arrTblNames.add( c.getString( c.getColumnIndex("name")) );
            c.moveToNext();
        }
    } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-09T03:12:21.873

将您的 sql 字符串更改为此：

`"SELECT name FROM sqlite_master WHERE type='table' AND name!='android_metadata' order by name"`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-17T12:46:58.437

获取包含该表**所有列列表的****表名**

 **```
 public void getDatabaseStructure(SQLiteDatabase db) {

            Cursor c = db.rawQuery(
                    "SELECT name FROM sqlite_master WHERE type='table'", null);
            ArrayList<String[]> result = new ArrayList<String[]>();
            int i = 0;
            result.add(c.getColumnNames());
            for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
                String[] temp = new String[c.getColumnCount()];
                for (i = 0; i < temp.length; i++) {
                    temp[i] = c.getString(i);
                    System.out.println("TABLE - "+temp[i]);

                    Cursor c1 = db.rawQuery(
                            "SELECT * FROM "+temp[i], null);
                    c1.moveToFirst();
                    String[] COLUMNS = c1.getColumnNames();
                    for(int j=0;j<COLUMNS.length;j++){
                        c1.move(j);
                        System.out.println("    COLUMN - "+COLUMNS[j]);
                    }
                }
                result.add(temp);
            }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-13T11:33:03.413

尝试在表格之前添加架构

schema.sqlite_master

来自[SQL 常见问题](http://www.sqlite.org/faq.html)

> 如果您正在运行 sqlite3 命令行访问程序，您可以键入“.tables”来获取所有表的列表。或者您可以键入“.schema”来查看完整的数据库架构，包括所有表和索引。这些命令中的任何一个都可以后跟一个 LIKE 模式，该模式将限制显示的表。
> 
> 在 C/C++ 程序（或使用 Tcl/Ruby/Perl/Python 绑定的脚本）中，您可以通过对名为“SQLITE_MASTER”的特殊表执行 SELECT 来访问表和索引名称。每个 SQLite 数据库都有一个**SQLITE_MASTER 表，它定义了数据库的模式**。SQLITE_MASTER 表如下所示：
> 
> CREATE TABLE sqlite_master（类型 TEXT，名称 TEXT，tbl_name TEXT，rootpage INTEGER，sql TEXT）；

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-13T11:33:53.520

试试这个：

```
SELECT name FROM sqlite_master WHERE type = "table"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-01T15:33:42.643

我用 Kotlin 和 Room 测试了 Siddharth Lele 的答案，它也能正常工作。

相同的代码但使用 Kotlin 和 Room 是这样的：

```
val cursor = roomDatabaseInstance.query(SimpleSQLiteQuery("SELECT name FROM sqlite_master WHERE type='table' AND name NOT IN ('android_metadata', 'sqlite_sequence', 'room_master_table')"))
val tableNames = arrayListOf<String>()
if(cursor.moveToFirst()) {
   while (!cursor.isAfterLast) {
      tableNames.add(cursor.getString(0))
      cursor.moveToNext()
   }
} 
```**

# javascript - javascript 在 chrome、safari 等中不起作用

> ID：15383849
> 
> 赞同：0
> 
> 时间：2013-03-13T11:20:54.960
> 
> 标签：javascript, joomla

我在基于 joomla 的网站中有一个用于视频更改的 javascript 代码，但它没有显示在 chrome、safari、internet explorer 中，但它正在显示在 Mozilla Firefox 中。这是javascript的代码。

```
<script type="text/ecmascript">

$(document).ready(function() {
        $("ul.videolist").ytplaylist({addThumbs:true, autoPlay: false, holderId: 'ytvideo'});
    }); 
```

这是实时链接： http: [//great.server279.com/greatofficiants](http://great.server279.com/greatofficiants)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:07:15.087

我想我知道出了什么问题，我会发布我的答案，但你知道吗，我认为我们应该讨论的是如何让你成为一个更好的调试器。你写的这样的帖子并没有真正帮助我们或帮助你。首先比你的代码更重要的是，你的控制台说什么？

如果您使用的是 Google Chrome，请按 F12 或 Ctrl+Shift+J 并查看控制台面板。有什么可以和我们分享的信息吗？

**无论如何，这就是我的想法**

默认情况下，Joomla 在标题中加载 MooTools，所以我想到的是您要么没有加载 jQuery 库，要么它已加载并且它与 MooTools 冲突。

尝试将您的代码更改为：

```
 <script type="text/javascript">
      window.addEvent('domready', function() {
          jQuery("ul.videolist").ytplaylist({
               addThumbs: true,
               autoPlay:  false,
               holderId: 'ytvideo'
           });
      });
  </script> 
```

并确保您已经调用了 jQuery 并且您的代码包含`jQuery.noConflict();`

# mysql - SQL - 如果存在更新 ELSE INSERT INTO

> ID：15383852
> 
> 赞同：89
> 
> 时间：2013-03-13T11:21:05.483
> 
> 标签：mysql, sql, insert, exists

我想要做的是`INSERT`我的数据库中的订阅者，但`IF EXISTS`它应该`UPDATE`是一行，`ELSE INSERT INTO`一个新行。

当然，我首先连接到数据库，然后`GET`从url 字符串连接到数据库。`$name``$email``$birthday`

```
$con=mysqli_connect("localhost","---","---","---");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$name=$_GET['name']; 
$email=$_GET['email'];
$birthday=$_GET['birthday']; 
```

这有效，但只是添加了新行；

```
mysqli_query($con,"INSERT INTO subs (subs_name, subs_email, subs_birthday)
VALUES ('$name', '$email', '$birthday')");

mysqli_close($con); 
```

这是我尝试过的；

```
mysqli_query($con,"INSERT INTO subs (subs_name, subs_email, subs_birthday)
VALUES '$name', '$email', '$birthday'
ON DUPLICATE KEY UPDATE subs_name = VALUES($name), subs_birthday = VALUES($birthday)");
mysqli_close($con); 
```

和

```
mysqli_query($con,"IF EXISTS (SELECT * FROM subs WHERE subs_email='$email')
    UPDATE subs SET subs_name='$name', subs_birthday='$birthday' WHERE subs_email='$email'
ELSE
    INSERT INTO subs (subs_name, subs_email, subs_birthday) VALUES ('$name', '$email', '$birthday')");
mysqli_close($con); 
```

和

```
mysqli_query($con,"IF NOT EXISTS(SELECT * FROM subs WHERE subs_email='$email')
Begin
INSERT INTO subs (subs_name, subs_email, subs_birthday)
VALUES ('$name', '$email', '$birthday')
End");
mysqli_close($con); 
```

但是它们都不起作用，我做错了什么？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2013-03-13T11:26:37.450

1.  如果不存在，请在您的列上创建一个[`UNIQUE`约束：](http://dev.mysql.com/doc/en/constraint-primary-key.html)`subs_email`

    ```
    ALTER TABLE subs ADD UNIQUE (subs_email) 
    ```

2.  使用[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/en/insert-on-duplicate.html)：

    ```
    INSERT INTO subs
      (subs_name, subs_email, subs_birthday)
    VALUES
      (?, ?, ?)
    ON DUPLICATE KEY UPDATE
      subs_name     = VALUES(subs_name),
      subs_birthday = VALUES(subs_birthday) 
    ```

> 您可以在 UPDATE 子句中使用 VALUES(col_name) 函数来引用来自 INSERT ... ON DUPLICATE KEY UPDATE 的 INSERT 部分的列值 - [dev.mysql.com](http://dev.mysql.com/doc/en/constraint-primary-key.html)

3.  请注意，我使用参数占位符代替了字符串文字，因为*确实*应该使用参数化语句来[防御 SQL 注入攻击](https://stackoverflow.com/a/60496)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-16T04:34:04.457

试试这个：

```
INSERT INTO `center_course_fee` (`fk_course_id`,`fk_center_code`,`course_fee`) VALUES ('69', '4920153', '6000') ON DUPLICATE KEY UPDATE `course_fee` = '6000'; 
```

# php - 重定向到页面并滚动到特定的 div

> ID：15383853
> 
> 赞同：0
> 
> 时间：2013-03-13T11:21:06.490
> 
> 标签：php, zend-framework

如何使用 Zend Framework 重定向到以下 URL？

```
http://hms.localhost.com/booking/room#availableResults 
```

我不能使用 Java 脚本。这需要使用 Zend 框架控制器帮助程序（例如 rediretor()）来完成；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:26:11.257

好的，通过 Zend，首先点击@Google：

gotoRoute() 方法不支持散列，但您可以通过使用 url 操作助手根据您的路由构造 url 来完成此操作，然后将您的散列连接到它。然后调用重定向器的 gotoUrl 方法：

```
$url = $this->_helper->url->url(array('module' => 'blog',
'controller' => 'documentation', 'action' => 'tags'));
 $url .= "#add";
$this->_helper->redirector->gotoUrl($url); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:31:00.313

从控制器：

```
$this->_redirect('/booking/room#availableResults'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:24:09.547

将您的 div id 设置为 availableResults

```
<div id="availableResults">
...
..
.. 
```

用于在 codeigniter 中重定向

```
$url = 'http://hms.localhost.com/booking/room#availableResults';
redirect($url); 
```

# ios - 如何等到代码完成。iOS

> ID：15383854
> 
> 赞同：4
> 
> 时间：2013-03-13T11:21:08.477
> 
> 标签：ios, objective-c, animation

我可以通过这段代码调用一些选择器

```
[self performSelector:<#(SEL)#> onThread:<#(NSThread *)#> withObject:<#(id)#> waitUntilDone:<#(BOOL)#>] 
```

并且线程将等到这个选择器工作（如果我设置了waitUntilDone：YES）。我的问题是 - 我可以等到一些代码完成吗？

例如。我有一些子视图，其中加载了动画。动画持续时间为 2 秒。如果我在背景视图上进行一些操作，在制作动画时，我会出错。我想等到动画结束。而且我不能制作选择器，并使用

```
[self performSelector:<#(SEL)#> onThread:<#(NSThread *)#> withObject:<#(id)#> waitUntilDone:<#(BOOL)#>] 
```

有什么建议么？)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:26:59.490

你可以试试这个方法

```
-(void)waitUntilDone:(void(^)(void))waitBlock {
    //use your statement or call method here
    if(waitBlock){
        waitBlock();
    }
} 
```

你需要把它用作

```
[self.tableView waitUntilDone:^{
    //call the required method here                                            
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:29:30.120

`UIView`动画以块样式动画的形式将其提供给您

```
[UIView animateWithDuration:0.25f
                 animations:^{
                   // animations
                 } completion:^(BOOL finished) {
                   // run code when the animation is finished
                 }]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:28:23.100

等到动画完成然后做剩下的事情：

例如：

```
 [UIView animateWithDuration:duration
    animations:^
    {
       //DO ANIMATION ADJUSTMENTS HERE
    }
    completion:^(BOOL finished)
    {
        //ANIMATION DID FINISH -- DO YOUR STUFF
    }]; 
```

# asp.net-mvc - IIS 默认站点

> ID：15383856
> 
> 赞同：1
> 
> 时间：2013-03-13T11:21:18.067
> 
> 标签：asp.net-mvc, iis-7

我有一个 IIS 配置，使得 [mywebapp] 是一个存在于 myserver.com 的“默认网站”下的 asp.net mvc Web 应用程序。

如何配置我的 IIS，以便对 www.myserver.com 的请求实际显示 [mywebapp] 的主页，而无需将 URL 更改为 www.myserver.com/mywebapp。目前，当我在默认网站上使用 HttpRedirect 时会发生 url 更改，但这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:24:35.673

假设您有一个将服务器 IP 地址映射到域名的 DNS 记录集，您将需要设置一个新站点，而不是默认网站下的虚拟目录。`Host name`创建站点时，请在字段中输入您的域名。

您可以先在 IIS 中设置站点，然后在主机文件`C:\Windows\System32\drivers\etc\hosts`(`127.0.0.1`您实际上不会访问实时 IP 地址。

# python - Django 错误：solution_building.ID_CUSTOMER_id 可能不为 NULL

> ID：15383858
> 
> 赞同：0
> 
> 时间：2013-03-13T11:21:19.837
> 
> 标签：python, django, django-models, django-views

有人可以帮我弄这个吗。我对此很陌生，现在我有点空白。我知道这可能只是一个愚蠢的问题，但老实说我被困住了。

我收到此错误：

> 异常类型：/building/ 处的 IntegrityError
> 
> 异常值：solution_building.ID_CUSTOMER_id 可能不为 NULL

我在这里做错了什么

视图.py

```
class buildingView(UpdateView):
template_name="building.html"
model = building
form_class = buildingForm

def get_context_data(self, **kwargs):
    context = super(buildingView, self).get_context_data(**kwargs)  

    context['pk'] = 1
    context['numberOfObjects'] = building.objects.all().count()

    return context

def get_object(self, queryset = None):
    try: 
        obj = building.objects.get(id = 1)
    except: 
        obj = building.objects.create(id = 1)
    return obj

def form_valid(self, form):

    form.save()
    return HttpResponseRedirect(reverse("building_view", kwargs={'pk': self.kwargs['pk']})) 
```

当我做 python manage.py sql 我得到了这个

```
CREATE TABLE "solution_building" (
"id" integer NOT NULL PRIMARY KEY,
"ID_CUSTOMER_id" integer NOT NULL REFERENCES "solution_customer" ("id"),
"BUILDING_USE" varchar(2) NOT NULL,
"BUILDING_FLOORSPACE" integer, 
```

需要帮助。太感谢了。

模型.py

```
class building(models.Model):
id                   = models.AutoField(primary_key = True)
ID_CUSTOMER          = models.ForeignKey(customer)
BUILDING_USE         = models.CharField(max_length = 2, blank = True, choices = c.Anvendelse)
BUILDING_FLOORSPACE  = models.IntegerField(null = True, blank = True)
def __unicode__(self):
    return '%s' % (self.ID_CUSTOMER) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:27:06.653

错误来自这里：

```
def get_object(self, queryset = None):
    try: 
        obj = building.objects.get(id = 1)
    except: 
        obj = building.objects.create(id = 1) <---- here
    return obj 
```

您尝试使用 id 创建新的建筑数据？

根据您的建筑表，ID_CUSTOMER、BUILDING_USE 和 BUILDING_FLOORSPACE 所需的值。因此，当您尝试创建新建筑物时，它会触发错误。

更新：

```
class building(models.Model):
    #id = models.AutoField(primary_key = True) --> you don't need this, the system automatically create id
    CUSTOMER = models.ForeignKey(customer, null=True, blank=True)
    BUILDING_USE = models.CharField(max_length=2, 
        blank=True, choices=c.Anvendelse, default="base on choices")
    BUILDING_FLOORSPACE  = models.IntegerField(default=0)

    def __unicode__(self):
        return '{0}' % (self) 
```

# html - 滴之间的下拉导航空间会产生错误

> ID：15383859
> 
> 赞同：0
> 
> 时间：2013-03-13T11:21:20.303
> 
> 标签：html, css, drop-down-menu

我为我正在创建的网站制作了一个下拉菜单，我认为它看起来不错，尽管在水平导航栏和垂直下拉栏之间有一个 px 的空间。当您将鼠标悬停在该空间上时，垂直菜单会再次消失，并且由于您有时将鼠标放在一个 px 空间上，因此用户会感到非常困惑。

这是我的html；

```
<div class="nav">
        <div class="links">
            <ul id="dropdown">
                <li class="currentpage">
                    <a href="index.html"> Tetterode </a>
                    <ul>
                        <li><a href="project.html">Project</a></li>
                        <li><a href="promenade.html">Promenade</a></li>
                        <li><a href="brochure.html">Brochure</a></li>
                        <li><a href="impressies.html">Impressies</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Woningen</a>
                    <ul>
                        <li><a href="oplevering.html">Oplevering</a></li>
                        <li><a href="impressies.html">Impressies</a></li>
                        <li><a href="kavelkaart.html">Kavelkaart</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Locatie</a>
                    <ul>
                        <li><a href="ligging.html">Ligging</a></li>
                        <li><a href="routeplanner.html">Routplanner</a></li>
                        <li><a href="situatie.html">Situatie</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Financiering</a>
                    <ul>
                        <li><a href="hypotheken.html">Hypotheken</a></li>
                        <li><a href="fiscaal.html">Fiscale mogelijkheden</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Contact</a>
                    <ul>
                        <li><a href="makelaars.html">Makelaars</a></li>
                        <li><a href="gegevens.html">Gegevens</a></li>
                    </ul>
                </li>

            </ul>
        </div>
    </div> 
```

这是我的CSS；

```
.nav{
    width: 100%;
    height:50px;
    background-image:url("bg.jpg");
    background-repeat:repeat;
    text-align:center;
    padding-bottom:0px;
    margin-bottom:0px;
}

.links ul li {
   list-style-type: none;
   padding-right: 17px;
   height:50px;
   position:relative;
   display:inline-block;
   padding-top:0px;
   line-height:50px;
   padding-left:17px;
   text-shadow: 3px 3px 2px rgba(0, 0, 0, 0.50);
   margin-top:0px;
}
.links ul li:hover {
    height:50px;
   background-color:#b2071a;
   display:inline-block;
   margin:0px;
}
.links a {
   text-transform:uppercase;
   font-family:helvetica;
   font-size:18px;
   color:#fff;
   display:inline-block;
   font-size:20px;
   text-decoration:none;
}
.links a:hover {
  background-color:transparent;
}
#dropdown ul{
    background-color:#b2071a;
    list-style:none;
    position:absolute;
    left:-9999px;
    z-index:20;
    font-size:16px;
    padding-top:0px;
    margin-top:0px;
    }
#dropdown ul li{
    float:none;
}
#dropdown ul a{
    white-space:nowrap; 
    font-size:16px;
}
#dropdown li:hover ul{ 
    left:0;
}
#dropdown li:hover a{ 
    text-decoration:underline;
}
#dropdown li:hover ul a{ 
    text-decoration:none;
}
#dropdown li:hover ul li a:hover{ 
color:#000;
}
.currentpage{
   height:50px;
   background-color:#b2071a;
   display:inline-block;
} 
```

我没有看到任何导致 1 px 空间的边距/填充，我不知道如何解决这个问题。我希望有人可以帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:32:25.833

您的代码和样式表非常好，易于阅读和遵循。

一种解决方案是调整 to 的上边距，`#dropdown ul`如下`-2px`所示：

```
#dropdown ul{
    background-color:#b2071a;
    list-style:none;
    position:absolute;
    left:-9999px;
    z-index:20;
    font-size:16px;
    padding-top:0px;
    margin-top:-2px;
} 
```

负边距是允许的，并且非常有用。您遇到的问题在下拉菜单中很常见，此修复是一个典型问题。

供参考，请参阅小提琴：http: [//jsfiddle.net/audetwebdesign/Ygn6X/](http://jsfiddle.net/audetwebdesign/Ygn6X/)

# java - 如何序列化多线程程序

> ID：15383866
> 
> 赞同：0
> 
> 时间：2013-03-13T11:21:39.100
> 
> 标签：java, multithreading, serialization, deserialization

我有许多线程对对象执行不同的操作，当将近 50% 的任务完成时，我想序列化所有内容（可能是我想关闭我的机器）。

当我回来时，我想从我离开的地方开始。我们怎样才能达到？

这就像在玩游戏时保存任何游戏对象的状态。通常我们保存对象的状态并取回。但是在这里我们存储它的进程的计数/状态。

例如：

我有一个线程正在为 50,000 名员工创建薪水 Excel 表。

其他线程正在为相同的 50,000 名员工创建评估信。

另一个主题是给 50,000 名员工写“新年快乐”电子邮件。

所以想象一下多个操作。

现在我想在 50% 的任务完成之间关闭。比如说已经写了25-30000个员工工资excel-sheet，并完成了25-30000的评估信等等。当我第二天回来时，我想从我离开的地方开始这个过程。

这就像*简历*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:31:36.647

我不确定这是否有帮助，但如果线程通过内存队列进行通信，您可以实现这一点。

要序列化整个应用程序，您需要做的是禁用队列的消耗，当所有线程都空闲时，您将到达可以序列化整个状态的“安全点”。您需要跟踪您生成的所有线程，以了解它们是否处于空闲状态。

您也许可以使用另一种技术（可能是 java 代理？）来执行此操作，该技术会冻结 JVM 并允许您转储整个状态，但我不知道这是否存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:31:24.723

好吧，它与保存对象状态没有太大区别。只需为不同类型的输入维护单独的队列。并在每次启动（第一次启动或重新启动）时检查这些队列，如果不是空的，则通过启动新进程但保留剩余数据来恢复“停止的进程”。

比如说前。一个应用程序正在发送消息，你退出该应用程序，剩余 10 个消息。有一个全局队列，应用程序的 senderMethod 将在每次启动时检查它。所以在这种情况下它将有 10msg 在等待队列中，所以它将继续发送剩余的 msgs。

**编辑：** 基本上，对于所有可恢复的过程'说pr1，pr2 ....prN，维护输入队列，比如q1，q2 ... qN。queue 应该删除已处理的元素，以仅包含待处理的输入。一旦你暂停系统。存储这些队列，并在重新启动时恢复它们。有一个通用的例程，说 resumeOperation，它将调用所有可恢复的进程（pr1，pr2....prN）。因此它将触发具有非 0 队列的方法的执行。在 tern 中复制恢复行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:43:38.810

Java 提供`java.io.Serializable`接口来指示类中的序列化支持。

您没有提供有关该任务的太多信息，因此很难给出答案。

考虑任务的一种方法是根据可以分成几个步骤的通用算法。这些步骤中的每一个都是任务本身，因此您应该在此处看到一个模式。

通过将每个算法切成小块，直到您无法进一步划分，您可以很好地了解您的任务可以在以后中断和恢复的位置。任务的结果可以是：

*   成功：任务返回预期类型的​​值

*   失败：不知何故，在进行计算时某些事情没有转好

*   中断计算：工作未完成，但可能稍后恢复，返回值是任务的状态

（请注意，后一种情况可能被视为失败的子情况，您可以根据自己的需要组织协议）。

根据您生成中断事件的方式（它是从主线程传递到工作线程的消息吗？会是异常吗？），该事件必须在任务树中冒泡，并触发每个任务以评估是否它的工作可以恢复也可以不恢复，然后将其自身的序列化版本提供给包含它的更大任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T23:18:59.573

我不认为序列化是解决这个问题的正确方法。您想要的是持久队列，您可以在处理项目后将其删除。每次启动程序时，您只需从头开始处理队列。实现持久队列的方法有很多种，但考虑到您的操作规模，您首先想到的是数据库。

# php - 在@import 之后覆盖 Bootstrap LESS 变量

> ID：15383869
> 
> 赞同：9
> 
> 时间：2013-03-13T11:21:49.193
> 
> 标签：php, twitter-bootstrap, less, lessphp

我试图在编译之前覆盖一些引导 LESS 变量，例如

```
// Core variables
@import "variables.less";

// Trying to override @white from variables.less
@white: #de1de1;

// other bootstrap @imports.... 
```

上面的代码没有覆盖`@white`，但是如果我`@white`在 variables.less 文件的末尾添加，它可以正常工作。

看起来变量只能在同一个文件中被覆盖。但这对我来说没有意义，因为我认为 LESS 不是那样工作的。例如其他`@import`文件（从上面的代码中省略）使用该`@white`变量。如果他们能够在 variables.less 文件之外使用它，为什么我不能在文件之外覆盖它？

我正在使用[Less Php](http://leafo.net/lessphp/) 0.3.9 来编译我的代码。

注意：我刚刚尝试了以下代码：

```
// Core variables
@import "variables.less";
@import "variables-custom.less"; 
```

现在的值`@white`取自 variables-custom.less （这在一定程度上解决了我的问题）。它仍然没有解释为什么我的原始代码不起作用。将不胜感激答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:44:36.700

变量将按照您将导入设置为编译的顺序被覆盖（并且可用）。

例如：

```
@import "variables.less";   //@white is set
@import "styles.less";        //UPDATED @white NOT available
@import "variables-custom.less";   //Update @white
@import "styles2.less";        //UPDATED @white available 
```

因此，只要确保如果您不打算使用 variables.less 而是使用 variables-custom.less，则将其放在所有其他 .less 文件之前（当然，variables.less 除外）。

# android - Android上网格上的覆盖布局

> ID：15383872
> 
> 赞同：0
> 
> 时间：2013-03-13T11:22:01.973
> 
> 标签：android, grid, overlay, android-relativelayout

我正在尝试在 Android 中创建以下布局，但我并不是很成功：

4 个 View 排列成一个 Grid，就像在水平和垂直中间分割屏幕一样。在这些视图之上，在中间居中，是第五个视图，并且（部分地）重叠它们。我尝试将 LinearLayout 与 RelativeLayout 结合使用，但我似乎无法做到这一点。对此有什么建议吗？

非常感谢大家，我很感谢你们的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:31:35.440

须藤代码。

```
<Relative fill_parent >
  <Linear  fill_parent orientatin=vertical>
    <Linear orientatin=horizontal layout_weight=1 >
       <Child1 layout_weight=1 />
        <Child2 layout_weight=1 />
    <Linear>
    <Linear orientatin=horizontal layout_weight=1 >
       <Child1 layout_weight=1 />
        <Child2 layout_weight=1 />
    <Linear>
  </Linear>

  <Linear centerInParent=true />
</relative> 
```

# ruby - Ruby 中的“包含”和“前置”有什么区别？

> ID：15383878
> 
> 赞同：31
> 
> 时间：2013-03-13T11:22:17.010
> 
> 标签：ruby, mixins, prepend, ruby-2.0

从[模块](http://www.ruby-doc.org/core-2.0/Module.html#method-i-prepend_features)

> Module#append_features(mod) → mod => 当这个模块被包含在另一个模块中时，Ruby 会在这个模块中调用 append_features，并将其传递给 mod 中的接收模块。如果此模块尚未添加到 mod 或其祖先之一，则 Ruby 的默认实现是将此模块的常量、方法和模块变量***添加到 mod。***
> 
> Module#prepend_features(mod) → mod => 当这个模块被附加在另一个模块中时，Ruby 会在这个模块中调用 prepend_features，并将其传递给 mod 中的接收模块。如果此模块尚未添加到 mod 或其祖先之一，则 Ruby 的默认实现是将此模块的常量、方法和模块变量***覆盖到 mod。***

谁能帮我理解以下问题：

*   除了那些默认功能之外，还有哪些功能`Module`被定义为？`append``prepend`

*   它们在功能上有何不同？

*   何时使用`append_features`，何时使用`prepend_features`？

*   上面两条粗线有什么区别？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-13T12:00:00.673

*   Module 的哪些特性被定义为 append 和 prepend？

如您引用的文本中所述：

> 常量、方法和模块变量

*   它们在功能上有何不同？

两者都将混入模块的方法添加到传递的模块（类）中。不同之处在于这些方法的查找顺序，以防目标类已经定义了它们：

`include`表现得好像目标类继承了混合模块：

```
module FooBar
  def say
    puts "2 - Module"
  end
end

class Foo
  include FooBar

  def say
    puts "1 - Implementing Class"
    super
  end
end

Foo.new.say # =>
            # 1 - Implementing Class
            # 2 - Module 
```

`prepend`使混合模块中的方法“更强”并首先执行它们：

```
module FooBar
  def say
    puts "2 - Module"
    super
  end
end

class Foo
  prepend FooBar

  def say
    puts "1 - Implementing Class"
  end
end

Foo.new.say # =>
            # 2 - Module
            # 1 - Implementing Class 
```

这个例子好心从这里扯掉：http: [//blog.crowdint.com/2012/11/05/3-killer-features-that-are-coming-on-ruby-2-0.html](http://blog.crowdint.com/2012/11/05/3-killer-features-that-are-coming-on-ruby-2-0.html)

*   何时使用 append_features 以及何时使用 prepend_features？

`prepend`当您想将目标模块（类）的方法保留在方法查找链的末尾时使用。

`ruby`通过搜索 SO和可以找到一些真实世界的`module`示例`prepend`：

*   [由模块中定义的另一个覆盖方法](https://stackoverflow.com/questions/5944278/overriding-method-by-another-defined-in-module)
*   [猴子修补方法时，您可以从新实现中调用覆盖的方法吗？](https://stackoverflow.com/questions/4470108/when-monkey-patching-a-method-can-you-call-the-overridden-method-from-the-new-i)
*   [Ruby：模块、Mixins 和 Blocks 令人困惑？](https://stackoverflow.com/questions/14088513/ruby-module-mixins-and-blocks-confusing)

（注意：我只提到方法，因为它们在继承和混合方面最容易想象，但同样适用于其他特性。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-08-02T23:04:28.213

我想将它作为评论添加到@Mladen Jablanovic 已经做出的一个很好的答案中，但由于我的声誉低，我不能这样做。

我在这里的帖子中找到了更简洁、更清晰和更具描述性的答案[——Ruby modules: Include vs Prepend vs Extend](https://medium.com/@leo_hetsch/ruby-modules-include-vs-prepend-vs-extend-f09837a5b073)，我在这里发布它以防万一有人需要它并且可以用更少的努力得到它。

直接报价：

> 尽管 include 是将外部代码导入到类中的最常用方式，但 Ruby 还提供了另外两种实现方式：extend 和 prepend。但是，它们根本没有相同的行为，并且这些差异经常被 Ruby 开发人员误解。
> 
> 要了解如何使用它们，我们必须首先更深入地了解 Ruby 如何使用称为祖先链的东西解析方法以在运行时执行。
> 
> 创建 Ruby 类时，它包含一个常量名称列表，这些常量名称是其祖先。它们是类继承自的所有类，以及它们包含的模块。例如，通过调用 String 类的祖先，我们得到它的祖先列表：
> 
> ```
> String.ancestors
> => [String, Comparable, Object, PP::ObjectMixin, Kernel, BasicObject] 
> ```
> 
> include 是导入模块代码最常用和最简单的方法。当在类定义中调用它时，Ruby 会将模块插入到类的祖先链中，就在它的超类之后。
> 
> 从 Ruby 2 开始，prepend 对 Rubyists 的了解比它的另外两个朋友要少一些。它实际上像包含一样工作，只是它不是在链中的类和它的超类之间插入模块，而是将它插入到链的底部，甚至在类本身之前。

我建议阅读这篇文章，以便更好地理解它附带的示例。

# html - 没有坐标的填充文本

> ID：15383881
> 
> 赞同：0
> 
> 时间：2013-03-13T11:22:21.333
> 
> 标签：html, canvas, draw

所以我在画布上画了一个圆圈，我试图在里面放一行文字。问题是，filltext 代码行在特定给定坐标处生成文本，但我不希望那样。

有没有办法让文本行留在圆圈内？

```
 var programFill = function ( context ) {

                context.beginPath();
                context.arc( 0, 0, 1, 0, PI2, true );

                context.font="20px Georgia";
                context.fillText("Hello World!",10,50);

                context.closePath();

                context.fill();

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:53:09.037

**在圆圈内绘制填充文本**

这是一个如何将文本放在圆圈内的示例：http: [//jsfiddle.net/m1erickson/BUkKt/](http://jsfiddle.net/m1erickson/BUkKt/)

注意 context.beginPath() 被调用了两次，因为你正在做 2 次填充。第一个绘制填充圆，第二个更改填充颜色并绘制填充文本。

这是代码：

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; padding:10px; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas1=document.getElementById("canvas");
    var context=canvas1.getContext("2d");

    context.beginPath();
    context.fillStyle="yellow";
    context.strokeStyle="black";
    context.font="20px Georgia";
    context.lineWidth=10;
    context.arc(100,100, 75, 0 , 2 * Math.PI, false);
    context.fill();
    context.beginPath();
    context.fillStyle="red";
    context.fillText("Hello World!",40,100);
    context.fill();

}); // end $(function(){});

</script>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas><br/>
</body>
</html> 
```

# c++ - vc++应用程序中的看门狗

> ID：15383883
> 
> 赞同：2
> 
> 时间：2013-03-13T11:22:25.817
> 
> 标签：c++, visual-c++, watchdog

我编写了一个简单的 vc++ 后台应用程序。我正在尝试的就像一个看门狗服务，它可以监控应用程序是否正在运行。如果应用程序崩溃，那么服务应该启动应用程序

要通过 Windows 安装程序创建设置，我只使用 app.exe 和 app.dll。是否可以在 exe 本身中创建这个看门狗服务？

不幸的是，我不知道如何编写这样的程序，请问有人有一些示例代码可以演示这种技术吗？

如果是这样，那么如何将默认 exe 和 watchdog exe 作为单个应用程序进行安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:38:24.737

这里 - [http://yadi.sk/d/EtzBRSMi3FqVH](http://yadi.sk/d/EtzBRSMi3FqVH) - 是我在系统托盘中工作的 WatchDog 应用程序的实现。不要介意它是用 Qt 编写的——主要功能是使用 WinAPI。此应用程序正在进程列表中查看多个进程，如果找不到则重新启动它们。第二个功能是它监视系统中所有窗口的可疑窗口标题（例如“'My Great App' 导致系统错误并将被关闭。向开发人员发送消息？”），如果发现，也重新启动它们

PS我没有i18n它，但我认为不会有麻烦）

**更新：（**根据@CodyGray 评论）

这是 pastebin 的链接：[WatchDog.cpp](http://pastebin.com/YmEygbnQ)和[WatchDog.h](http://pastebin.com/Cx0hckc4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:31:55.087

您最好的方法是创建一个单独的服务来充当看门狗。从技术上讲，可以将服务和“真实应用程序”放在同一个可执行文件中。您可以根据 exe 的启动方式来区分两者，但这会使维护变得相当困难。

这篇[文章](http://www.codeproject.com/Articles/16488/A-Windows-Service-Application)可能很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:27:16.583

例如，可以将这样的看门狗设置为每分钟（或其他任何时间）写入文件。如果文件在两分钟或更长时间内没有更新，则应用程序很可能出现死锁，必须重新启动。

# c# - DeploymentItem-文件夹中所有文件和文件夹的属性

> ID：15383888
> 
> 赞同：7
> 
> 时间：2013-03-13T11:22:46.993
> 
> 标签：c#, unit-testing, deploymentitem

我想将所有文件部署在单元测试目录中的文件夹中。通过 DeploymentItem-Attribute 来部署 eacht 项目太多了。

我尝试了类似的东西

```
[DeploymentItem(".\\")] 
```

或者

```
[DeploymentItem("*.*")] 
```

但两者都不起作用。

有谁知道我如何通过部署属性部署所有子文件夹的所有文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:54:20.730

DeploymentItemAttribute 不采用模式来搜索和部署。[在此处](http://msdn.microsoft.com/en-us/library/ms245570%28v=vs.110%29.aspx)阅读有关它的更多信息

您需要使用相同的每个文件名或创建一个自定义属性，该属性采用模式并将项目部署到我们的输出目录。

# java - Java 如何为新实例（带有 String 属性）分配内存？

> ID：15383889
> 
> 赞同：7
> 
> 时间：2013-03-13T11:22:50.790
> 
> 标签：java, memory

假设我们有一个类：

```
 class Account {
      String name;
      int ID;
    } 
```

然后

```
a1 = new Account();

a2 = new Account(); 
```

将创建 2 个变量，它们指向 2 个内存位置，存储 2 个 Account 类实例。

我的问题是Java如何知道这些实例有多大来分配它们的内存（因为使用String类型，我们可以为其分配任何字符串。例如，`a1.name = "Solomon I", a2.name = "Alan"`. 这将导致每个实例的大小不同）

内存位置是一个“连续”的字节串。因此，如果我有`a1 = new Account()`a2 = new Account() => a1 的内存位置是固定的（'used memory | a1 | a2'）那么如果我将 a1.name 设为一个非常长的字符串会发生什么？a1 的内存位置会延伸到 a2 的内存位置吗？

感谢您阅读本文，如果我有任何误解，请告诉我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T11:24:36.447

`name`是一个字符串引用（不是实际的字符串）。当您分配它时，它将“指向”一个 String 对象。

因此，作为对象的一部分，java 只需要为 String 引用“分配”空间，加上一个 int，它们的大小是恒定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:49:17.580

该对象仅保存对其他对象（成员变量）的引用。所以它的大小总是固定的。所以改变被引用对象的内容不会影响引用它的对象的大小。因此，您不必担心字符串大小，即使您更改字符串，您的“帐户”类对象也不会受到影响，因为“帐户”类对象仅存储字符串引用。

希望这对您有所帮助。

# sql - 面临不正确的语法错误

> ID：15383890
> 
> 赞同：-2
> 
> 时间：2013-03-13T11:22:51.740
> 
> 标签：sql, sql-server

我在 sql server 中编写了一个函数，并在“return”语句中遇到错误。

我面临的错误是

```
Incorrect syntax near 'RETURNS'. 
```

我的sql函数如下

```
 CREATE FUNCTION UTILIZATION(@START_DATE DATETIME,
                        @END_DATE DATETIME,
                        @D1 DECIMAL(5,2),
                        @D2 DECIMAL(5,2),
                        @D3 DECIMAL(5,2),
                        @D4 DECIMAL(5,2),
                        @D5 DECIMAL(5,2),
                        @D6 DECIMAL(5,2),
                        @D7 DECIMAL(5,2)) 
RETURNS DECIMAL(5,2)
AS
BEGIN
DECLARE
    @UTILIZATION DECIMAL(5,2),
    @TOTAL_HOURS DECIMAL(5,2),
    @TOTAL_HOURS_ACCRUED DECIMAL(5,2),
    @QUERY  NVARCHAR(MAX);
BEGIN
SET @TOTAL_HOURS = @D1 + @D1 + @D3 + @D4 + @D5 + @D6 + @D7

SET @QUERY = ' SELECT TOTAL_ACTUAL_HOURS AS @TOTAL_HOURS_ACCRUED FROM WEEK_MASTER WHERE' +
             ' START_DATE = ' + '''' + @START_DATE + '''' +' AND ' +
             ' END_DATE = ' + '''' + @END_DATE + ''''

EXEC SP_EXECUTESQL @QUERY

SET @UTILIZATION = (@TOTAL_HOURS/@TOTAL_HOURS_ACCRUED)*100

RETURNS @UTILIZATION
END
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:24:13.323

使用`RETURN`而不是`RETURNS`

```
RETURN @UTILIZATION 
```

[这是根据手册创建函数的语法](http://msdn.microsoft.com/en-us/library/ms186755.aspx)，

```
CREATE FUNCTION [ schema_name. ] function_name 
( [ { @parameter_name [ AS ][ type_schema_name. ] parameter_data_type 
    [ = default ] [ READONLY ] } 
    [ ,...n ]
  ]
)
RETURNS return_data_type
    [ WITH <function_option> [ ,...n ] ]
    [ AS ]
    BEGIN 
        function_body 
        RETURN scalar_expression
    END
[ ; ] 
```

# c# - 列表框中的多维数组

> ID：15383892
> 
> 赞同：0
> 
> 时间：2013-03-13T11:23:00.897
> 
> 标签：c#, arrays, listbox

您好，我是 csharp 的新手，我进行了很多实验以查看和解决难题，但是一个是新错误，我以前从未见过：

> “[] 内的索引数量错误；预期为 1”

，我试图谷歌它并尝试以我自己的方式解决它，但我没有找到解决方案。谁能帮我解决这个问题并说出我做错了什么？

```
 public Form1()
    {
        InitializeComponent();
    }

    class Planeet
    {
        public String Naam;
        public Byte Grootte;
        public Brush Kleur;
        public short Afstand;

        public Planeet(String argNaam, Byte argGrootte, Brush argKleur, short gAfstand)
        {
            Naam = argNaam;
            Grootte = argGrootte;
            Kleur = argKleur;
            Afstand = argAfstand;
        }

    }

    private void pbZonnestelsel_Click(object sender, EventArgs e)
    {

        Planeet[] arrPlaneten = new Planeet[9]
        {
        new Planeet("Mercurius", 4, Brushes.DarkGray, 4),
        new Planeet("Venus", 10, Brushes.White, 20),
        new Planeet("Aarde", 10, Brushes.LightBlue, 40),
        new Planeet("Mars", 5, Brushes.Red, 60),
        new Planeet("Jupiter", 112, Brushes.Orange, 80),
        new Planeet("Saturnus", 94, Brushes.Beige, 200),
        new Planeet("Uranus", 40, Brushes.Green, 300),
        new Planeet("Neptunus", 38, Brushes.Blue, 350),
        new Planeet("Pluto", 2, Brushes.LightGray, 400)
        };

        for (int i = 0; i < arrPlaneten.GetLength(0); i++)
        {
            listBox1.Items.Add(arrPlaneten[i, 0,0,0]);
            listBox1.Items.Add(arrPlaneten[0, i, 0,0]);
        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:25:58.320

你在这里做什么，毫无意义。因为您有一个一维数组，并将其视为 4 维数组。当您在 for 循环中遍历所有行星时，第二次添加到列表框也是不必要的。

```
 for (int i = 0; i < arrPlaneten.GetLength(0); i++)
    {
        listBox1.Items.Add(arrPlaneten[i, 0,0,0]);
        listBox1.Items.Add(arrPlaneten[0, i, 0,0]);
    } 
```

你想要完成什么？将行星添加到列表框？你会这样：

```
 for (int i = 0; i < arrPlaneten.GetLength(0); i++)
    {
        listBox1.Items.Add(arrPlaneten[i]);
    } 
```

**注意** 您的`Planeet`类需要实现 ToString() 否则列表框中将不会显示任何内容。所以添加

`public String ToString() { return this.Naam; }`像这样到你的班级：

```
class Planeet
{
    public String Naam;
    public Byte Grootte;
    public Brush Kleur;
    public short Afstand;

    public Planeet(String argNaam, Byte argGrootte, Brush argKleur, short argAfstand)
    {
        Naam = argNaam;
        Grootte = argGrootte;
        Kleur = argKleur;
        Afstand = argAfstand;
    }

    public String ToString()
    {
        return Naam; //Or add more info here like return Naam + " " + Afstand;
    }
} 
```

第二个注意事项：列表框可以保存任何对象的项目列表。但是，如果您不想引用对象，而只想引用它的名称，则应该这样做`listBox1.Items.Add(arrPlaneten[i].Naam)`。

你的代码中也有一个错字`short argAfstand`，上面写着`short gAfstand`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:32:50.590

看起来您正在尝试对数组进行错误寻址。您正在索引它，就好像它有四个维度一样。

如果您尝试将所有项目添加到列表框中，您可以这样做：

```
foreach(Planeet aPlanet in arrPlaneten)
{
    listbox1.Items.Add(aPlanet);
} 
```

但是，您将需要在您的类中覆盖 ToString 以使列表框条目有意义......

或者您可以使用数据绑定`listbox1.DataSource = arrPlaneten;` 和选择`Listbox1.displayMember = "Naam"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:25:59.453

在`listBox1.Items.Add(arrPlaneten[i, 0,0,0]);`您为数组提供四个逗号分隔的索引时，这是一个语法错误。如果要从数组中检索元素，请执行以下操作：

```
for (int i = 0; i < arrPlaneten.GetLength(0); i++)
    {
        listBox1.Items.Add(arrPlaneten[i]);
    } 
```

只使用一个索引！

# javascript - 显示页面时无法显示生成的数据

> ID：15383894
> 
> 赞同：1
> 
> 时间：2013-03-13T11:23:10.397
> 
> 标签：javascript, jquery, jquery-mobile

我正在开发一个小的 JQuery Mobile 应用程序。初始页面包含一个按钮，当按下该按钮时，会触发对服务器的调用以获取某些数据。然后新页面相应地显示数据。它的一些图形组件也根据获得的数据改变外观。我一直在尝试几种方法，但我无法使其发挥作用。按下按钮时，不显示数据。但是，当我刷新页面时，页面会完美地显示数据。我一直在尝试在 head 部分、body 部分的底部使用 pageshow 事件，并且还嵌入在 #pageData 标记中：它不适用于显示数据，但如果我想使用警报，它确实有效. 有人可以告诉我解决这个问题的最佳方法吗？还，Javascript 代码应该放在哪里（在头部、特定标签内或页面底部）？提前致谢！

这是进行服务器调用的新页面的代码（对不起，它很乱）：

```
<%! final static String DATE_FORMAT_NOW = "dd/MM/yy"; %>
<%@ page session="false" %>
<%@ page session="false" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>

<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8">
<title>T2 Data Monitor</title>

<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css"/>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>

<style>
    .ui-page { background: #2f2d2d;}

    .headerBar{
        min-height: 45px;
        font-size: 100%;
        text-align: center;
    }

    .footerBar{
        min-height: 45px;
    }

    .footer-button{
        min-height: 45px;
        height:45px;
        max-height:45px;
        word-wrap: normal;
        vertical-align:bottom;
    }

    .back-button{
        width: 80px;
        max-height:32px;
        min-height:32px
    }

    .back-button .ui-btn-text{
        font-size: 100%;
        horizontal-align:left;
    }

    [data-role=page]{
        height: 100% !important;
        position:relative !important;
    }

    #service-title{
       width: 80%;
    }

    #platform-title{
        width: 80%;
    }

    #service-status-title{
        width: 20%;
    }

    #platform-status-title{
        width: 20%;
    }

    .status-img{
        min-height: 20px;
        min-width: 20px;
        max-height: 30px;
        max-width: 30px;
        margin-top: 12px;
    }

    .title-class{
        margin-bottom:17px;
        margin-top:17px;
        color: black;
        text-align: center;
        font-weight:bold;
    }

    #service-title-grid{

        border-top-style: solid;
        border-top-color: #d3d3d3;
        border-top-width: 1px;

        border-left-style: solid;
        border-left-color: #d3d3d3;
        border-left-width: 1px;

        border-right-style: solid;
        border-right-color: #d3d3d3;
        border-right-width: 1px;

        vertical-align: middle;
        text-align: center;
    }

    #platform-title-grid{

        border-top-style: solid;
        border-top-color: #d3d3d3;
        border-top-width: 1px;

        border-left-style: solid;
        border-left-color: #d3d3d3;
        border-left-width: 1px;

        border-right-style: solid;
        border-right-color: #d3d3d3;
        border-right-width: 1px;

        vertical-align: middle;
        text-align: center;
    }

    .custom-collapsible {
        width: 74% !important;
        margin-left: 9px !important;
        border-width: 0px !important;
        background-color: white  !important;
    }

    .custom-collapsible h3 a {
        border-width: 0px !important;
        background: white  !important;
    }

    #t2-content {
        padding: 0 !important;
    }

    .t2-button{
        margin: 0 !important;
        min-height: 270px;
        width:100%;
        height:100%;
    }

</style>

</head>
<body>

<div data-role="page" id="t2-monitor" data-theme="d" >
<script type="text/javascript">

</script>

<div data-role="header" style="height:110px;" data-position="fixed" data-theme="a">

    <a href="index-new.html" data-icon="arrow-l" data-iconpos="left" data-transition="slide" data-direction="reverse" class="back-button" style="vertical-align:middle;">Back</a>

    <div align="center" style="vertical-align:middle; margin-left:3px; margin-right:3px; margin-top:60px; margin-bottom:25px; font-family:Arial,Sans-serif; font-size:19px">
        <img src="images/bigtelematiclogoreduced.png" height="30" width="30"
             style="text-align:center;horizontal-align:middle; vertical-align:middle;">
       T2 System Monitor
    </div>

</div>
<!-- /header -->

<div data-role="content" id="t2-content" data-fullscreen="true" data-theme="d">
    <div class="ui-grid-a">
        <div class="ui-block-a"><a data-role="button" href="#platform-status" class="t2-button" id="button-a" data-theme="d">Button A</a></div>
        <div class="ui-block-b">
            <a data-role="button" href="#service-status" class="t2-button" id="button-b" data-theme="d">
                Button B</a></div>
    </div>
</div>

<div data-role="footer" style="height:45px" data-theme="a">
    <h3> &#169; 2013 ITB</h3>
</div>
</div> 
```

```
<div data-role="page" data-theme="b" id="platform-status">
<div data-role="header" data-position="fixed" class="headerBar" data-theme="a">
    <a href="#t2-monitor" data-icon="arrow-l" data-iconpos="left" data-transition="slide" data-direction="reverse" class="back-button">Back</a>
    <div align="center" style="vertical-align:middle; margin-top:10px; margin-bottom:10px;">
        Status Platforms
    </div>
</div>

<div data-role="content" data-theme="d">

    <div class="ui-grid-a" id="platform-title-grid">
        <div class="title-class ui-block-a" id="platform-title">
            Service
        </div>
        <div class="title-class ui-block-b" id="platform-status-title" >
            Status
        </div>
    </div>

    <div id="platform-results">

    </div>

    <div data-role="footer" style="height:45px" data-theme="a">
        <h3> &#169; 2013 ITB</h3>
    </div>
</div>

</div>

<div data-role="page" data-theme="b" id="service-status">
<div data-role="header" data-position="fixed" class="headerBar" data-theme="a">
    <a href="#t2-monitor" data-icon="arrow-l" data-iconpos="left" data-transition="slide" data-direction="reverse" class="back-button">Back</a>
    <div align="center" style="vertical-align:middle; margin-top:10px; margin-bottom:10px;">
       Status Services
    </div>
</div>

<div data-role="content" data-theme="d">

        <div class="ui-grid-a" id="service-title-grid">
            <div class="title-class ui-block-a" id="service-title">
               Service
            </div>
            <div class="title-class ui-block-b" id="service-status-title" >
               Status
            </div>
        </div>

       <div id="services-results">

</div>

<div data-role="footer" style="height:45px" data-theme="a">
    <h3> &#169; 2013 ITB</h3>
</div>
</div>

</div>

<script type="text/javascript">

var statusServicesData = {};
var statusPlatformsData = {};

$(document).ready(function () {
    refreshStatus();
    window.setInterval("refreshStatus()", 2500);
});

//data is StatusObject
function refreshStatus() {

    $.getJSON("app/stats/refreshT2StatusPlatformsAndServices", function (data) {
        if (data == null) {
            return false;
        }

        $.each(data["services"], function(index, value) {
            statusServicesData[index] = value;
        });

        $.each(data["platforms"], function(index, value) {
            statusPlatformsData[index] = value;
        });

        <!--------- Code to manage platforms data ----------->
        var keyPlatformStatus = "Status";
        var isRed = false;
        var isOrange = false;

        for (var key in statusPlatformsData) {
            if(statusPlatformsData [key][keyPlatformStatus]=='Red'){
                isRed = true;
            }else  if(statusPlatformsData [key][keyPlatformStatus]=='Orange'){
                isOrange = true;
            }
        }

        if(isRed==true){
            $("#button-a").css("background", "#AB1616");
        }else if(isRed==false && isOrange==true){
            $("#button-a").css("background", "#FD9801");
        } else{
            $("#button-a").css("background", "#4DAB16");
        }

        $("#platform-results").empty();
        for (var key in statusPlatformsData){
            $("#platform-results").append("<div class='ui-grid-a' style='border-style:solid; border-width:1px; border-color:#d3d3d3'>");
            $("#platform-results").append("<div class='custom-collapsible ui-block-a' data-role='collapsible' data-collapsed-icon='arrow-r' data-expanded-icon='arrow-d' style='width: 80%; width: 74% !important; margin-left: 9px !important;border-width: 0px !important; background-color: white  !important;'>");

            $("#platform-results").append("<h4>"+statusPlatformsData[key]["Name"]+"</h4>");
            $("#platform-results").append("<p>"+statusPlatformsData[key]["Description"]+"</p>");
            $("#platform-results").append("</div>");
            $("#platform-results").append("<div class='ui-block-b' style='vertical-align: middle; text-align: center; width: 20%;'>");

            if(statusPlatformsData[key]["Status"]=="Red"){
                $("#platform-results").append("<img src='images/red.png' class='status-img' />");
            }else if(statusPlatformsData[key]["Status"]=="Orange"){
                $("#platform-results").append("<img src='images/orange.png' class='status-img' />");
            }else{
                $("#platform-results").append("<img src='images/green.png' class='status-img' />");
            }
            $("#platform-results").append("</div>");
            $("#platform-results").append("</div>");
        }
        <!------------------------------------------------------------------->

        <!--------- Code to manage services data----------->
        var keyServiceStatus = "Status";
        var isRed = false;
        var isOrange = false;

        for (var key in statusServicesData ) {
            if(statusServicesData [key][keyServiceStatus]=='Red'){
                isRed = true;
            }else  if(statusServicesData [key][keyServiceStatus]=='Orange'){
                isOrange = true;
            }
        }

        if(isRed==true && isOrange==true){
            $("#button-b").css("background", "#AB1616");
        }else if(isRed==false && isOrange==true){
            $("#button-b").css("background", "#FD9801");
        } else{
            $("#button-b").css("background", "#4DAB16");
        }

            $("#service-results").empty();
            for (var key in statusServicesData ){
                $("#service-results").append("<div class='ui-grid-a' style='border-style:solid; border-width:1px; border-color:#d3d3d3'>");
                $("#service-results").append("<div class='custom-collapsible ui-block-a' data-role='collapsible' data-collapsed-icon='arrow-r' data-expanded-icon='arrow-d' style='width: 80%; width: 74% !important; margin-left: 9px !important;border-width: 0px !important; background-color: white  !important;'>");

                $("#service-results").append("<h4>"+statusServicesData[key]["Name"]+"</h4>");
                $("#service-results").append("<p>"+statusServicesData [key]["Description"]+"</p>");
                $("#service-results").append("</div>");
                $("#service-results").append("<div class='ui-block-b' style='vertical-align: middle; text-align: center; width: 20%;'>");

                if(statusServicesData [key]["Status"]=="Red"){
                    $("#service-results").append("<img src='images/red.png' class='status-img' />");
                }else if(statusServicesData [key]["Status"]=="Orange"){
                    $("#service-results").append("<img src='images/orange.png' class='status-img' />");
                }else{
                    $("#service-results").append("<img src='images/green.png' class='status-img' />");
                }
                $("#service-results").append("</div>");
                $("#service-results").append("</div>");
            }
        <!------------------------------------------------------------------->

    });

}

</script>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:17:19.153

你的问题是：

```
$(document).ready(function () { 
```

jQuery Mobile 不能与**$(document).ready**一起正常工作。而不是它，您需要使用正确的 jQuery Mobile 页面事件。

在我解释如何做之前，首先让我告诉你为什么你的例子在刷新后工作。当您的代码在页面准备好之前第一次执行**文档准备**就绪时，此时页面仍未加载到 DOM 中。当您单击刷新时，同一页面已经在 DOM 中，并且新执行的**文档准备**成功执行。

**[在我的其他文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**（我的个人博客）中阅读更多相关信息或在**[此处](https://stackoverflow.com/a/14469041/1848600)**找到它。

现在关于你的问题，如果你改变它，你可以解决它：

```
$(document).ready(function () {
    refreshStatus();
    window.setInterval("refreshStatus()", 2500);
}); 
```

有了这个：

```
$(document).on('pagebeforeshow', '#platform-status', function(){       
    refreshStatus();
}); 
```

其中平台状态是您的第一页的 id。

**但是**，您的代码中还有另一个问题。你有 2 个 jQuery Mobile 页面，你**不能** 同时修改它们。您可以修改以太页面平台状态或页面服务状态，但不能同时修改它们。出于简单的原因，只会加载其中一个。

因此，您需要将函数 refreshStatus() 拆分为 2 个函数，一个在页面平台状态加载时执行，第二个在页面服务状态加载时执行。所以基本上这样做：

```
$(document).on('pagebeforeshow', '#platform-status', function(){       
    // executed function one for page platform-status
}); 
```

和

```
$(document).on('pagebeforeshow', '#service-status', function(){       
    // executed function one for page service-status
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:35:30.663

您需要使用 ajax 调用从服务器获取数据。然后，您可以在 ajax 调用的成功选项中使用 jQuery 附加您的内容。

您可以使用 .html() 函数将代码放入带有 jQ​​uery 的 div 中：

```
$(document).ready(function(){

    $("#myDiv").html("<p>Hello World!</p>");

}); 
```

此代码需要在 ajax 调用的成功选项中。例如：

```
$.ajax({
    url:"www.example.com/fileThatReturnsTheData.php",
    type: 'POST', 
    success: function(myValue){
        $("#myDiv").html("<p>"+myValue+"</p>");
    }
}); 
```

欲了解更多信息检查：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# javascript - 在表格中显示/隐藏值

> ID：15383895
> 
> 赞同：1
> 
> 时间：2013-03-13T11:23:26.980
> 
> 标签：javascript, jquery, jquery-plugins, html-table, show-hide

我有一个结构如下的表：

```
<table id="example">
<thead>
<tr>
    <th>Header1</th>
    <th>Header2</th>
    <th>Header3</th>
</tr>
</thead>

<tbody>
<tr>
   <td>some php to get custom field</td>
   <td>also custom field- the loop is above so this is working as it should</td>
   <td>
   <a href="#" class="showhide"> 
    <div class="more">
     .. the content I want to show when user clicks a class="showhide"
    </div>
   </a>
   </td>
<tr>
</tbody>
</table> 
```

我尝试用 jQuery 实现，但没有任何反应。这是我尝试过的 jQuery：

```
$(function () {
    $('.showhide').click(function () {
        $(this).next().toggle()
    });
}); 
```

我也成功了`document.ready`，但仍然无法正常工作。有没有其他方法可以做到这一点？

我想要的是 div class="more" 的内容将显示在表格中的行下方（并且在下一个之前），当然是在单击 a 时`class="showhide"`。

我将它与插件 DataTables 一起使用，但这不会引起问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:24:28.370

你上的课`showmore`不是`showhide`

**[现场演示](http://jsfiddle.net/E5X9R/)**

```
$(function() {
  $('.showmore').click(function(){
    $(this).next().toggle()
  });
}); 
```

`div`根据 OP 评论进行编辑：我缩短了html 以使其简单并去掉`a`标签。

**[现场演示](http://jsfiddle.net/E5X9R/)**

*html*

```
<table id="example">
    <tbody>
        <tr>
            <td> <a href="#" class="showhide"> Show / Hide </a>

                <div class="more">.. the content I want to show when user clicks a class="showmore"</div>
            </td>
        </tr>
    </tbody>
</table> 
```

*Javascript*

```
$(function () {
    $('.showhide').click(function () {
        $(this).next().toggle()
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:29:06.183

在标记中更改它：

```
 class="showmore"> 
```

对此：

```
 class="showhide"> 
```

或这样做：

```
$('.showmore').click(function (e) {
    e.preventDefault();
    $(this).next().toggle()
}); 
```

### 笔记：

这是无效的 html：

```
<a href="#" class="showhide"> 
<div class="more">
 .. the content I want to show when user clicks a class="showhide"
</div> 
```

改为：

```
<a href="#" class="showmore">show more</a> 
<div class="more">
 .. the content I want to show when user clicks a class="showhide"
</div> 
```

或者你可以试试这个`.children()`不带`.next()`：

```
$('.showmore').click(function (e) {
    e.preventDefault();
    $(this).children('more').toggle();
}); 
```

### [在这里尝试小提琴](http://jsfiddle.net/n8fF2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:25:34.577

```
$(document).on('click','.showmore',function(){
//your code..
}) 
```

# ruby-on-rails - Formtastic nested_form 只有一个“添加新图像”上传按钮

> ID：15383901
> 
> 赞同：1
> 
> 时间：2013-03-13T11:23:56.740
> 
> 标签：ruby-on-rails, formtastic

我有一个项目模型：

```
class Project < ActiveRecord::Base
  attr_accessible :active, :address, :date_begun, :date_ended, :description, :name, :url, :organization_id, :invisible, :zone, :definition, :images, :partners, :external_partners, :partner_ids, :external_partner_ids, :images_attributes 

  has_many    :images, :as => :imageble

  accepts_nested_attributes_for :images

end 
```

图像多态模型

```
class Image < ActiveRecord::Base
  attr_accessible :imageble_id, :imageble_type, :order, :data

  belongs_to :imageble, :polymorphic => true

  has_attached_file :data, 
  :styles => { :mini => "60x60#", :medium => "300x300>", :thumb => "100x100>" }, 
  ...
end 
```

项目控制器：

```
class Admin::ProjectsController < ApplicationController
  def edit
    @project = Project.find(params[:id])
    @project.images.build
    @hash_partners = Organization.retrieve_hash(@project.partners.collect{|o| o.id})
    @hash_external_partners = ExternalOrganization.retrieve_hash(@project.external_partners.collect{|eo| eo.id})
  end
end 
```

以及项目的表格形式：

```
<%= semantic_form_for ([:admin, @project]) do |f| %>
<%= f.inputs do %>
  <%= f.input :name,         :label =>"Nome",    :hint => "Clicca sul nome per cambiare", :placeholder => "nome del progetto" %>

  <%= f.semantic_fields_for :images do |images| %>
     <%= images.inputs :data %>
  <% end %>

  <% @project.images.each do |i| %>
     <%= image_tag i.data(:mini) %>
  <% end  %>

<% end %>
<%= f.actions %>
<% end %> 
```

一切正常，但是当我向项目添加图像时，表单会向表单呈现越来越多的文件输入按钮。

我想要的是只有**一个文件上传按钮**来向项目添加新图像。然后有一个项目图像缩略图列表。

如何在 Rails3 和 Formtastic 2.1.1 中实现这一点？

# c++ - cp：无法创建常规文件：

> ID：15383902
> 
> 赞同：-1
> 
> 时间：2013-03-13T11:23:56.930
> 
> 标签：c++, ubuntu

您好我正在尝试安装 ETHNOS，这是一个用于设计由不同机器人、设备和外部监督或控制站组成的实时控制系统的编程环境。安装说明很简单： cd source make make install

但是当我使用 make install 时，它会说：

```
cp *.h /usr/include
cp: cannot create regular file `/usr/include/broadrx.h': Permission denied
cp: cannot create regular file `/usr/include/broadtx.h': Permission denied
cp: cannot create regular file `/usr/include/etconst.h': Permission denied
cp: cannot create regular file `/usr/include/etctlmsg.h': Permission denied
cp: cannot create regular file `/usr/include/etexpert.h': Permission denied
cp: cannot create regular file `/usr/include/etkernel.h': Permission denied
cp: cannot create regular file `/usr/include/etmasks.h': Permission denied
cp: cannot create regular file `/usr/include/etmemory.h': Permission denied
cp: cannot create regular file `/usr/include/etmsg.h': Permission denied
cp: cannot create regular file `/usr/include/etmsgbmb.h': Permission denied
cp: cannot create regular file `/usr/include/etsubsched.h': Permission denied
cp: cannot create regular file `/usr/include/ettimer.h': Permission denied
cp: cannot create regular file `/usr/include/exception.h': Permission denied
cp: cannot create regular file `/usr/include/libsock.h': Permission denied
cp: cannot create regular file `/usr/include/mastersocket.h': Permission denied
cp: cannot create regular file `/usr/include/sockexrx.h': Permission denied
cp: cannot create regular file `/usr/include/sockextx.h': Permission denied
cp: cannot create regular file `/usr/include/trace.h': Permission denied
cp: cannot create regular file `/usr/include/trace_generic.h': Permission denied
make: *** [install] Error 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:26:15.213

您无权在 /usr/include 中创建文件。通常这意味着您需要成为 root。安装时通常需要运行`make; make test; sudo make install`. sudo 以超级用户（又名 root）的身份运行作为其参数提供的命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:25:09.967

您是否尝试过以 root 身份运行该命令？

`sudo make install`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T11:25:15.203

以 root 身份运行 make install

> 须藤使安装

# orchardcms - 如何更改 Orchard 中的数据库表名（添加表前缀）？

> ID：15383906
> 
> 赞同：1
> 
> 时间：2013-03-13T11:24:11.440
> 
> 标签：orchardcms

一般来说，我是 Orchard 和 MVC 的初学者，但是用谷歌搜索我还没有找到解决方案。

我从源代码创建了一个新的 Orchard 站点，在创建了类似 HelloWorld 的模块/部件/小部件几天后，我决定要实现一个多租户解决方案。

**已经创建了一些我不想丢失的内容，我想知道是否可以通过为所有数据库表添加像“Tenant1_”这样的表前缀来重命名所有现有表？**

我尝试将 DataPrefix 添加到 ~\Orchard.Web\App_Data\Sites\Default\Settings.txt 并手动重命名数据库中的所有表，但这会生成“无效的对象名称'Orchard_Framework_ContentItemVersionRecord'”。错误。

我的下一步是尝试添加一个新的迁移，它将重命名所有表，但我不知道该怎么做。我是否试图以完全错误的方式解决这个问题？

我正在使用 SqlServer 和 VS2012。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:00:36.413

我认为手动重命名不起作用，因为所有表映射都缓存在 ~\Orchard.Web\App_Data\Sites\Default\mappings.bin
尝试删除它。

# php - 如何检查.exe文件是否存在于php中

> ID：15383907
> 
> 赞同：0
> 
> 时间：2013-03-13T11:24:12.383
> 
> 标签：php, file, file-exists

嗨，有什么方法可以检查`.exe`给定路径上是否存在文件。我已经安装了`ImageMagic`. 我有一条`convert.exe`Image Magic之路。我需要检查给定路径中`convert.exe`是​​否存在。我已经实施

```
$settingFileContent = file_get_contents($settingFilePath);
       // print_r($settingFileContent);
        $allPaths = unserialize(stripslashes($settingFileContent));

if (isset($allPaths['IMAGE_CONVERT_EXE'])) {
                //cho $allPaths['IMAGE_CONVERT_EXE'];
                if (file_exists($allPaths['IMAGE_CONVERT_EXE'])) {
                    $analysisResultObj->level = ENUM_SUCCESS;
                } else {
                    $analysisResultObj->level = ENUM_ERROR;
                    $analysisResultObj->infoText = "Image Magic convert.ext has wrong path";   
                 Logger::getLogger('Application')->error('Image Magic convert.ext has wrong path');
                }
            } 
```

我可以更改 `$allPaths['IMAGE_CONVERT_EXE']`文件中的值。即使在这种情况下，当我更改为错误值时，它也会返回 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:29:36.530

根据专门关于 Windows 上 PHP 的[文档](http://www.php.net/file_exists)评论，我猜（让我们明确一点： PHP 中的**一切**都是猜测）试试这个：

```
$file = 'd:/somfolder/imagemagic/convert.ext'
if(file_exists($file)) {
    // should be false
} 
```

根据您的实际代码，您是否尝试过：

```
$file = $allPaths['IMAGE_CONVERT_EXE'];
if(file_exists($file)) {
    // should be false
} 
```

查看文档，有人评论说在 Windows 上存在同样的问题，并且在连接字符串值时无法返回正确的结果。虽然您没有将字符串值连接在一起，但至少值得一试以确保没有其他奇怪的事情发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:40:26.010

对我来说，这听起来像是您试图确定 Imagemagick 扩展是否存在。PHP 提供了这样做的方法，从而完全消除了你的推断和疯狂的方法。

```
<?php    
    echo extension_loaded('imagick');
?> 
```

此外，您可以通过以下方式了解已安装的扩展程序

```
<?php 
    print_r(get_loaded_extensions()); 
?> 
```

# android - 在listview android中更改当前选定行项的图像图标

> ID：15383912
> 
> 赞同：4
> 
> 时间：2013-03-13T11:24:20.490
> 
> 标签：android, listview, selecteditem

在我的`ListView`, 我有`TextView`一`Imageview`排。`Listview`行数据来自本地数据库。现在，当用户触摸任何行进行选择时，我想更改该行项目图像。现在再次当用户关闭此应用程序并再次打开时，我想为`imageview`上次选择的那一行设置新图像。

当用户选择`listview`. 并且当用户从该新活动中按下后退按钮时，所选行`imageview`不会更改，仅显示原始图像。我使用了下面的代码，但它不能完美地工作。

这是活动的 onstart 方法：

```
@Override
public void onStart() {
  super.onStart();
  int pos = prefs.getInt(PrefernceData.PREF_CURR_SELECTED_ID, -1);
  for(int  i = 0; i < text.length; i++){
    if(Integer.parseInt(text[i][0]) == pos){
      dotPosition = i;
    }
} 
```

listview itemclick 方法：

```
public void onItemClick(AdapterView<?> arg0, View view, int position, long arg3) {

dotPosition = position;
clearSelection();

lastSelectedView = (ImageView)view.findViewById(R.id.doticon);
ImageView v = (ImageView)view.findViewById(R.id.doticon);
v.setImageResource(R.drawable.dothighlight);
prefs.edit().putInt(PrefernceData.PREF_CURR_SELECTED_ID, Integer.parseInt(text[position][0]).commit();
Intent i = new Intent(this,SecondActivity.class);
startActivity(i); 
```

这是clearselection方法：

```
public void clearSelection() {
  if(lastSelectedView != null) {
    Log.i("myLog","clear selection:lastselected icon::");
    lastSelectedView.setImageResource(R.drawable.dot);
  }
} 
```

这是适配器的 getview 方法：

```
public View getView(int position, View convertView, ViewGroup parent) {

  ViewHolder holder;
  LayoutInflater mInflater = LayoutInflater.from(myActivity.this);

  if(convertView == null) {
    convertView = mInflater.inflate(R.layout.site_listview_items, null);
    holder = new ViewHolder();
    holder.siteText = (TextView)convertView.findViewById(R.id.homesitelisttext);
    holder.dotIcon = (ImageView)convertView.findViewById(R.id.doticon);
    convertView.setTag(holder);
  } else {
    holder = (ViewHolder)convertView.getTag();
  }

  holder.siteText.setText(text[position][1]);
  Log.i("myLog","position::"+position+"dotPosition:"+dotPosition);

  if(position == dotPosition) {
    holder.dotIcon.setImageResource(R.drawable.dothighlight);
    lastSelectedView = holder.dotIcon;
  } else {
    holder.dotIcon.setImageResource(R.drawable.dot);
  }

  return convertView;
} 
```

# javascript - 包含元素内的高度相等的div？

> ID：15383913
> 
> 赞同：0
> 
> 时间：2013-03-13T11:24:26.663
> 
> 标签：javascript, jquery, containers, parent-child, equal-heights

这是我的 HTML（或访问luxury-decor.co.uk）

```
<div class="wrapper">
    <div class="box_left">
        <p>Providing only the highest quality service work, both internal and external, in Reading, London and surrounding areas. We provide a bespoke service for any areas such as boardrooms, offices, showrooms, hotel lobby's, reception areas, bathrooms, wet rooms,
            kitchens and living areas. We specialise in Venetian Marble Plastering, Painting and Decorating, and both Wall & Floor Tiling. Our decorators are meticulous in what they do and we always strive to adhere to our customers needs. So whatever your project
            is, get in touch with us via email or telephone to discuss your requirements.
        </p>
    </div>
    <!--#box_left-->
    <div id="gallery_container1">
        <script type="text/javascript">
            jQuery.flashgallery('color_chart/gallery.swf', 'color_chart/config.xml', {
                width: '100%',
                background: '#000000'
            });
        </script>
    </div>
    <!--#gallery_container1-->
</div>
<!--#wrapper--> 
```

现在，如您所见，当这样设置时，右侧的图片库太大了。是否有可能使“包装器”内的 div 具有相同的高度？我确实遇到了这个[http://www.cssnewbie.com/equalheights-jquery-plugin/#.UUBcyhw0xnM](http://www.cssnewbie.com/equalheights-jquery-plugin/#.UUBcyhw0xnM)但我对 jQuery 不太好，无法让它工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:44:14.733

识别包装器的类/名称，我不知道 flashgalley 方法，所以我无法帮助您，只需查找它用作包装器的 div 的类/名称，查看 html，然后找到最大高度并将它们全部设置为：

```
var wrappers = $('div.wrapper');
var maxHeight = 0;
for(var i in wrappers){
    if (maxHeight < wrappers[i].height()){
        maxHeight = wrappers[i].height();
    }
}
$('div.wrapper').height(maxHeight); 
```

这将复制您链接到的插件的功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:29:27.960

只需使用 CSS，

```
 div#wrapper > div{height:200px} 'assuming you want 200px height for all div within wrapper 
```

我希望这会做，如果不回复:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:31:49.203

在 CSS 中：

```
#wrapper { height: 400px; } //or whatever you like

#wrapper.box_left, #gallery_container1 { height: 100% } 
```

# macos - 使用#version 130 加载纹理导致错误“不支持版本'130'”

> ID：15383915
> 
> 赞同：1
> 
> 时间：2013-03-13T11:24:29.087
> 
> 标签：macos, opengl

我尝试设置简单的纹理：fp：

```
uniform sampler2D colorMap;

out vec4 vFragColor;
smooth in vec2 vVaryingTexCoords;

void main(void)
   { 
   vFragColor = texture(colorMap, vVaryingTexCoords.st);
   } 
```

VB：

```
#version 130

in vec4 vVertex;
in vec2 vTexCoords;

smooth out vec2 vVaryingTexCoords;

void main(void) 
    { 
    vVaryingTexCoords = vTexCoords;
    gl_Position = vVertex;
    } 
```

这是加载代码：

```
#ifdef linux
#include <cstdlib> 
#endif
#ifdef __APPLE__
#if IPHONE
#include <OpenGLES/ES2/gl.h>
#include <OpenGLES/ES2/glext.h>
#define OPENGL_ES
#else
//#include "GL/glew.h"
#import <OpenGL/glext.h>  
#include <OpenGL/gl3.h>     // Apple OpenGL haders (version depends on OS X SDK version)
#endif
#include <unistd.h>
#endif
GLuint gltLoadShaderPairWithAttributes(const char *szVertexProg, const char *szFragmentProg, ...)
    {
    // Temporary Shader objects
    GLuint hVertexShader;
    GLuint hFragmentShader; 
    GLuint hReturn = 0;   
    GLint testVal;

    // Create shader objects
    hVertexShader = glCreateShader(GL_VERTEX_SHADER);
    hFragmentShader = glCreateShader(GL_FRAGMENT_SHADER);

    // Load them. If fail clean up and return null
    // Vertex Program
    if(gltLoadShaderFile(szVertexProg, hVertexShader) == false)
        {
        glDeleteShader(hVertexShader);
        glDeleteShader(hFragmentShader);
        fprintf(stderr, "The shader at %s could ot be found.\n", szVertexProg);
        return (GLuint)NULL;
        }

    // Fragment Program
    if(gltLoadShaderFile(szFragmentProg, hFragmentShader) == false)
        {
        glDeleteShader(hVertexShader);
        glDeleteShader(hFragmentShader);
        fprintf(stderr,"The shader at %s  could not be found.\n", szFragmentProg);
        return (GLuint)NULL;
        }

    // Compile them both
    glCompileShader(hVertexShader);
    glCompileShader(hFragmentShader);

    // Check for errors in vertex shader
    glGetShaderiv(hVertexShader, GL_COMPILE_STATUS, &testVal);
    if(testVal == GL_FALSE)
        {
        char infoLog[1024];
        glGetShaderInfoLog(hVertexShader, 1024, NULL, infoLog);
        fprintf(stderr, "The shader at %s failed to compile with the following error:\n%s\n", szVertexProg, infoLog);
        glDeleteShader(hVertexShader);
        glDeleteShader(hFragmentShader);
        return (GLuint)NULL;
        }

    // Check for errors in fragment shader
    glGetShaderiv(hFragmentShader, GL_COMPILE_STATUS, &testVal);
    if(testVal == GL_FALSE)
        {
        char infoLog[1024];
        glGetShaderInfoLog(hFragmentShader, 1024, NULL, infoLog);
        fprintf(stderr, "The shader at %s failed to compile with the following error:\n%s\n", szFragmentProg, infoLog);
        glDeleteShader(hVertexShader);
        glDeleteShader(hFragmentShader);
        return (GLuint)NULL;
        }

    // Create the final program object, and attach the shaders
    hReturn = glCreateProgram();
    glAttachShader(hReturn, hVertexShader);
    glAttachShader(hReturn, hFragmentShader);

    // Now, we need to bind the attribute names to their specific locations
    // List of attributes
    va_list attributeList;
    va_start(attributeList, szFragmentProg);

    // Iterate over this argument list
    char *szNextArg;
    int iArgCount = va_arg(attributeList, int); // Number of attributes
    for(int i = 0; i < iArgCount; i++)
        {
        int index = va_arg(attributeList, int);
        szNextArg = va_arg(attributeList, char*);
        glBindAttribLocation(hReturn, index, szNextArg);
        }
    va_end(attributeList);

    // Attempt to link    
    glLinkProgram(hReturn);

    // These are no longer needed
    glDeleteShader(hVertexShader);
    glDeleteShader(hFragmentShader);  

    // Make sure link worked too
    glGetProgramiv(hReturn, GL_LINK_STATUS, &testVal);
    if(testVal == GL_FALSE)
        {
        char infoLog[1024];
        glGetProgramInfoLog(hReturn, 1024, NULL, infoLog);
        fprintf(stderr,"The programs %s and %s failed to link with the following errors:\n%s\n",
            szVertexProg, szFragmentProg, infoLog);
        glDeleteProgram(hReturn);
        return (GLuint)NULL;
        }

    // All done, return our ready to use shader program
    return hReturn;  
    } 
```

这是一个输出：

> 错误：0:5：“”：不支持版本“130”错误：0:10：“平滑”：语法错误语法错误

我哪里错了。我在上一个 osx 版本，它必须支持 1.5 GLSL 和 3.2 gl 遵循官方 OpenGL 描述：

[https://developer.apple.com/graphicsimaging/opengl/capabilities/index.html](https://developer.apple.com/graphicsimaging/opengl/capabilities/index.html)

但是当我通过 OpenGL 扩展查看器检查时，它看起来像只支持 1.2 版本。我需要任何后门方法来启用 glsl 1.3 支持吗？

![在此处输入图像描述](../Images/adb5397a61cd1c9a979914cc8255bbbf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:14:02.100

OpenGL 版本 3.2 只需要能够编译 GLSL 版本 1.40 和 1.50。在 Windows 上，大多数 OpenGL 实现将接受各种着色语言版本，而在 MacOSX 上，您将不得不坚持所需的内容。

# php - 使用 jQuery 从 PHP 生成的列表中按 id 调用单个 Div

> ID：15383917
> 
> 赞同：2
> 
> 时间：2013-03-13T11:24:34.467
> 
> 标签：php, jquery, html

我在 PHP 中从一个数组生成 div，因此：

```
echo "<div id='parentdiv'>";
 for($counter = 0; $counter < count($list); $counter++){
         echo "<div>".$list['important_info']."</div>";

   }
  echo "</div>";//parentdiv 
```

我想为每个div独立添加一些点击功能，即点击时执行的动作取决于div，更重要的是数组的索引，$list;

我想根据它在 PHP 数组中的索引给每个 div 一个 id。所以我可以做

```
echo "<div id='"."divindex_".$counter."'>".$list['important_info']."</div>"; 
```

其中“divindex_”仅用于防止 id 形式以数值开头。

然后，我认为在 jQuery 中我可以为每个 div 编写点击函数。

但是问题是 $list 的大小是可变的，所以我不知道有多少个 div。所以我的想法是这样的，

```
 $("#parentdiv div").click(function(){
            var id = split($(this).attr('id').split("_")[1];//get the php index from the id
            //do something with the id, e.g. ajax or whatever
　　}); 
```

有一个更好的方法吗？如果您认为我在做的事情很奇怪而且不是一个好主意，那么我理解。但我不知道如何以其他方式做到这一点。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:27:59.220

只需使用：

```
$("#parentdiv div").click(function(){
            var id  = $(this).index(); //index of div, 0 based
            var val = $(this).text();  //content of div, if you need it
}); 
```

无需添加唯一`ID`的 s :) 。

演示：http: [//jsfiddle.net/q9TaJ/](http://jsfiddle.net/q9TaJ/)

文档： [http ://api.jquery.com/index/](http://api.jquery.com/index/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:36:31.987

首先，确保正确转义您的输出：

```
echo '<div id="parentdiv">';
for ($counter = 0; $counter < count($list); $counter++){
    echo sprintf('<div data-id="%d">%s</div>',
        $counter,
        htmlspecialchars($list['important_info'])
    );
}
echo '</div>';//parentdiv 
```

我还使用了一个名为的特殊属性`data-id`，您可以使用以下代码在 jQuery 中轻松访问该属性：

```
$('#parentdiv > div').on('click', function() {
    var id = $(this).data('id');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:05:42.023

您可以将变量作为 html 属性传递。然后将点击事件绑定到单个类。

```
<div class="divs" data-id="myid"></div> 
```

在jQuery中

```
 $('.divs').click(function(){
console.log($(this).data('id));    
}); 
```

# cmake - 有没有办法告诉 CMake 生成几个安装规则？

> ID：15383921
> 
> 赞同：0
> 
> 时间：2013-03-13T11:24:37.543
> 
> 标签：cmake

以使用 CMake 生成 GNU/Makefile 为例，我希望能够运行不同的安装规则，比如`make install`和`make install-doc`.

有没有办法告诉 CMake 生成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:14:55.983

您可以添加一个自定义目标，该目标调用`cmake_install.cmake`最外层二进制目录中的脚本。`install`当您运行默认目标时，也会调用此脚本。

```
add_custom_target(install-doc
    COMMAND "${CMAKE_COMMAND}" "-DBUILD_TYPE=$<CONFIGURATION>"
        "-DCOMPONENT=doc" "-P" "${CMAKE_BINARY_DIR}/cmake_install.cmake"
    WORKING_DIRECTORY "${CMAKE_BINARY_DIR}") 
```

所需的安装组件必须作为 CMake 变量传递`COMPONENT`。可以使用变量设置构建配置`BUILD_TYPE`。`$<CONFIGURATION>`是一个[生成器表达式](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_custom_command)，它将被当前活动的构建配置替换。

# java - java中如何做unix命令或unix的操作

> ID：15383927
> 
> 赞同：-1
> 
> 时间：2013-03-13T11:24:49.810
> 
> 标签：java

如何连接到 unix 服务器并在 java 中执行我们在 unix 屏幕中执行的操作。我想在 java 中执行这个命令“ **sed '1,2d;/affected/d;/^$/d;/------/d'** ”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:37:03.337

这实际上是两个问题。

如何在 Java 中执行系统命令。为此，您可以使用[`Runtime.exec`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)

```
Process p = Runtime.getRuntime().exec("sed '1,2d;/affected/d;/^$/d;/------/d' file.txt");
p.waitFor(); 
```

如何在远程机器上执行命令。这可以通过[`ssh`](http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1)

```
ssh user@example.com "sed '1,2d;/affected/d;/^$/d;/------/d' file.txt" 
```

当然，要使其正常工作，您必须已`ssh`安装。

# jquery - Jquery：Dropkick 插件 - 表单提交 onchange

> ID：15383929
> 
> 赞同：0
> 
> 时间：2013-03-13T11:24:50.870
> 
> 标签：jquery, forms, submit, onchange, jquery-dropkick

嗨，我得到了一个没有按钮提交的表单，它在没有 Dropkick 的情况下工作得很好，并通过 POST 方法发送一个名为“fonction”的变量：

```
<form name="recherche_cat" method="post" class="ass_select">
<select name="fonction" onchange='submit()' tabindex="3" size="1">
    <option value="default">default</option>
    <option value="1">mot1</option>
    <option value="2">mot2</option>
</select>
</form> 
```

但是当我使用dropkick时，它不再起作用了。我试试这个：

```
$('.ass_select').dropkick({
  change: function (value, label) {
  $(this).closest('form').submit();
  }
}); 
```

页面重新加载但没有发布值。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:41:41.323

您`onchange='submit()'`不再触发，因为 jQuery 不保证在没有 jQuery 的情况下附加触发处理程序。

相反，假设您`submit`声明了该函数，请使用：

```
$('.ass_select').dropkick({
  change: submit
}); 
```

[**小提琴**](http://jsfiddle.net/kx2VT/2/)

请注意，在处理程序内部，现在`this`指向`form`而不是`select`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:05:37.837

我发现了我的问题。我不应该在表单上添加 dropkick 类（在我的示例 class="ass_select" 上），而是在选择上。像这样提交就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-16T11:04:25.340

你可以这样做：

```
$('.ass_select').dropkick({
  change: function (value, label) {
      $(this.form).submit();//changed here
  }
}); 
```

# python - urllib2 获取网页

> ID：15383935
> 
> 赞同：0
> 
> 时间：2013-03-13T11:25:15.490
> 
> 标签：python, urllib2, fetch, web-crawler

我有一个让我发疯的问题。我正在使用 urllib2 来获取许多 url。有一个 url 有时会返回给我整个 html 页面，有时不会。这是我的代码：

```
def find_html(url):
    req = urllib2.Request(url)
    req.add_header('User-Agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB;   rv:1.8.1.14) Gecko/20080404 Firefox/2.0.0.14')
    page_html = urllib2.urlopen(req).read()

    n = string.find(page_html, "filter clearfix active")
    print "find element:",n

url = "http://it.hotels.com/ho113127/rome-cavalieri-waldorf-astoria-hotels-resorts-roma-italia/"
find_html(url) 
```

为什么会这样？我在哪里做错了？（我不想对这个 url 使用 selenium，我想使用 urllib2）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:29:08.147

我`Moved Permanently`从那个 URL 得到 200 和 301 ( ) 响应，所以这是服务器的事情。

由于`urllib2`会自动跟随重定向，如果您想阻止处理重定向页面（如果我理解正确，它不包含您想要的信息），您必须检查是否发生了重定向：

```
...
response = urllib2.urlopen(req)
if response.geturl() == url:
  // no redirect occurred
else:
  // a redirect occurred because the url has changed 
```

这取决于您的确切设置和您必须如何处理的意图（因为对于某些 URL，您可能实际上想要处理重定向的页面）。

# javascript - 你能用 JavaScript 检测用户的 ISP 提供商吗？

> ID：15383938
> 
> 赞同：3
> 
> 时间：2013-03-13T11:25:21.630
> 
> 标签：javascript

我有静态网页。在该页面中，我想使用 JavaScript 获取用户的 ISP 提供商和位置。

有没有办法只使用 JavaScript 来做到这一点，还是我需要使用其他工具来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:27:11.257

**仅使用JavaScript****无法**检测 ISP 提供商，但如果您愿意使用 PHP，这非常简单：

 **```
<?php 
  $hostname = gethostbyaddr($_SERVER['REMOTE_ADDR']); 
  echo $hostname; 
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-12T15:13:10.643

您可以通过 Get http 请求调用[http://ip-api.com/json](http://ip-api.com/json)，响应是一个包含用户 IP 数据的 json，包括“isp”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:28:28.273

您可以使用[地理位置 API](http://en.wikipedia.org/wiki/W3C_Geolocation_API)获取地理位置。我认为不可能在客户端上使用 JavaScript 来获取 ISP。**

# java - 在java中寻找简单的方法来只大写字符串的第一个字母

> ID：15383950
> 
> 赞同：0
> 
> 时间：2013-03-13T11:25:47.733
> 
> 标签：java

在java中寻找简单的方法来只将字符串的第一个字母更改为大写。

例如，我有一个 String `DRIVER`，如何`Driver`用 java制作它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:27:41.203

你可以试试这个：

```
String d = "DRIVER";
d = d.substring(0,1) + d.substring(1).toLowerCase(); 
```

编辑：

另请参见[StringUtils.capitalize()](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#capitalize%28java.lang.String%29)，如下所示：

```
d = StringUtils.capitalize(d.toLowerCase()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:29:29.923

```
WordUtils.capitalize(string); 
```

[http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/text/WordUtils.html](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/text/WordUtils.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:29:30.060

```
String str = "DRIVER";
String strFirst = str.substring(0,1);
str = strFirst + str.substring(1).toLowerCase(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:35:47.867

```
public static void main(String[] args) {
    String txt = "DRIVER";
    txt = txt.substring(0,1).toUpperCase() + txt.substring(1).toLowerCase();            
    System.out.print(txt);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T11:37:33.637

我会用`CapitalizeFully()`

```
String s = "DRIVER";
WordUtils.capitalizeFully(s); 
```

`s`会举行`"Driver"`

`capitalize()` **只会**将第一个字符更改为大写字母，不会触及其他字符。

我了解`CapitalizeFully()`将第一个字符更改为大写字母，将另一个字符更改为小写字母。

[https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/text/WordUtils.html#capitalizeFully(java.lang.String)](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/text/WordUtils.html#capitalizeFully(java.lang.String))

顺便说一句，Apache Commons Lang 库中还有许多其他很棒的功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T11:37:46.393

我正在使用 Springs，所以我可以这样做：

```
String d = "DRIVER";
d = StringUtils.capitalize(d.toLowerCase()); 
```

# c# - 从另一个自定义服务器控件加载自定义服务器控件

> ID：15383955
> 
> 赞同：1
> 
> 时间：2013-03-13T11:25:57.303
> 
> 标签：c#, asp.net

我在 ASP.NET 页面中有两个自定义服务器控件，一个构建图表，另一个播放构建的图表。

所以我的问题是在构建图表时加载播放器。

所以我将文件发送给构建器，现在我只想加载它

```
gChartPlayer Player = new gChartPlayer();
Player.XML_FILE = ChartFile; 
```

类似的东西`Player.Load()`，

有人能帮我吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:16:17.220

您可以使用 `Add Method`

代码 ：`this.Controls.Add`

链接： http: [//msdn.microsoft.com/en-us/library/aa277578 (v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa277578(v=vs.60).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:33:06.287

问题不是很清楚，但如果您想决定何时加载用户控件，您可以使用`LoadControl` [http://msdn.microsoft.com/en-us/library/c0az2h86(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/c0az2h86(v=vs.100).aspx)

# php - 以正确的格式显示日期

> ID：15383956
> 
> 赞同：0
> 
> 时间：2013-03-13T11:25:57.647
> 
> 标签：php, mysql, sql

我将日期存储在 mysql 数据库中的 varchar 字段中，格式为 YYYYMMDD，例如 20130312。我知道正确的方法应该是使用日期或时间戳数据类型，但这现在不在我手中。

我想在我的网页上使用 date() 函数以正确的格式显示这些数据，在 php 中。我该怎么做。

使用

```
date("Y-m-d", strtotime('20130312')) 
```

不起作用。任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:26:59.723

采用`DATE`

```
SELECT DATE(20130312) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/8841)

但是如果你想以这种格式返回`YYYY/MM/DD`，使用`DATE_FORMAT()`（*它返回一个字符串*）

```
SELECT DATE_FORMAT(DATE(20130312), '%Y-%m-%d') 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/8842)

其他来源：

*   [日期](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)
*   [日期格式](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:29:43.333

有一个名为“DATE_FORMAT(date,format)”的函数可以转换不同格式的日期。 [http://www.w3schools.com/sql/func_date_format.asp](http://www.w3schools.com/sql/func_date_format.asp)

```
 DATE_FORMAT(NOW(),'%b %d %Y %h:%i %p')
 DATE_FORMAT(NOW(),'%m-%d-%Y')
 DATE_FORMAT(NOW(),'%d %b %y')
 DATE_FORMAT(NOW(),'%d %b %Y %T:%f') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:31:55.150

用这个

```
 <?php   
   $dbdate = '20130312';
   $year  = substr($dbdate,'0','4');
   $month = substr($dbdate,'4','2');
   $date  = substr($dbdate,'6','2');
   $formatDate = "$year-$month-$date";
   echo $date = date('Y-m-d', strtotime($formatDate))
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T11:35:36.720

如果要转换为时间戳，请使用

```
UNIX_TIMESTAMP(20130312) date_as_timestamp 
```

在使用 PHP 处理之前来自 MySQL，例如

```
date('some format like dd/mm/YYYY', $row['date_as_timestamp']) 
```

# python - Numpy、Atlas 和 Lapack

> ID：15383960
> 
> 赞同：0
> 
> 时间：2013-03-13T11:26:07.997
> 
> 标签：python, numpy, python-3.3, lapack, atlas

我正在使用 numpy 进行一些数组操作，它目前非常慢。matlab 中的相同操作（计算协方差矩阵）只需要一秒钟。我已经安装了 atlas 和 lapack，但我不确定我的 numpy 是否真的在使用它们。有谁知道如何检查？我正在使用 Mac

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-11T16:22:16.957

要让 numpy 使用 ATLAS，您要么必须

*   从源代码构建它，设置 site.cfg 文件，以便它可以找到您的 ATLAS 库。这让我花了一天的大部分时间开始在 Gentoo 上工作（请参阅[这个错误报告](http://bugs.funtoo.org/browse/FL-1224)），不幸的是，我不确定我的经验是否能很好地转化为 Mac。
*   查找使用 ATLAS 的预编译包。[Anaconda](https://store.continuum.io/cshop/anaconda/)或[Canopy](https://www.enthought.com/products/canopy/)可能是不错的选择，尽管它们可能只在付费版本中包含优化的库——我不确定这一点。

# iphone - 如何在 tumblr 上分享图片？

> ID：15383963
> 
> 赞同：1
> 
> 时间：2013-03-13T11:26:11.990
> 
> 标签：iphone, ios6, tumblr

我有一个应用程序，我需要在 tumblr 上共享图像并从 tumblr 访问图像。

有什么 API 可以让我们得到这个东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:36:05.153

可能以下链接有效：

[http://getsharekit.com/tutorial/tumblr](http://getsharekit.com/tutorial/tumblr)

[适用于 twitter、facebook、flicr、tumblr 的 IOS 共享框架](https://stackoverflow.com/questions/9825548/ios-sharing-framework-for-twitter-facebook-flicr-tumblr)

[通过 Tumblr 和 Path 共享图像](https://stackoverflow.com/questions/15171113/image-sharing-via-tumblr-and-path)

# php - PHP socket_read 不返回空字符串''

> ID：15383971
> 
> 赞同：1
> 
> 时间：2013-03-13T11:26:34.577
> 
> 标签：php, sockets

嗨，下面的socket_read函数有问题，它在读取完数据后不返回空字符串''。在第二次调用 socket_read() 时，它只是挂在那里，页面继续在浏览器中加载，没有返回。如果服务器关闭连接，它会起作用，服务器是否必须关闭客户端套接字？谢谢

```
 $json = $_GET['json'];

    /* Get the port for the WWW service. */
    // $service_port = getservbyname('www', 'tcp');
    $service_port = "1111";

    /* Get the IP address for the target host. */
    $address = "192.168.3.5";

    /* Create a TCP/IP socket. */
    $socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
    if ($socket === false) {
        echo "socket_create() failed: reason: " . socket_strerror(socket_last_error()) . "\n";
        die();
    } else {
        //echo "OK.\n";
    }

    //echo "Attempting to connect to '$address' on port '$service_port'...";
    $result = socket_connect($socket, $address, $service_port);
    if ($result === false) {
        echo "socket_connect() failed.\nReason: ($result) " . socket_strerror(socket_last_error($socket)) . "\n";
        die();
    } else {
        //echo "OK.\n";
    }

    $out = '';

    //echo "Sending HTTP HEAD request...";
    $result = socket_write($socket, $json, strlen($json));

    if ($result === false) {
        echo "socket_connect() failed.\nReason: ($result) " . socket_strerror(socket_last_error($socket)) . "\n";
        die();
    } else {
        //echo "OK.\n";
    }

    echo socket_read($socket, 2048);
    echo socket_read($socket, 2048);
//  
     // while (socket_read($socket, 2048) !== '') {
        // echo $out;
//       
     // }
//   
     socket_close($socket); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:59:47.313

是的，这正是我期望它做的——socket_read() 永远不会返回一个空字符串，除非你打开它一个二进制文件并且服务器用'\0'响应。

您似乎正在尝试编写 HTTP 客户端。如果您是，请立即停止，扔掉您的代码并阅读 Curl 扩展。HTTP 不是一个简单的协议，关于简单的东西是如何工作的，你还有很多东西要学习。您目前依靠套接字状态和数据格式来确定数据流 - 但 HTTP 两者都不使用。

如果您想了解 HTTP 的工作原理，那么 Internet 上有很多文档 - RFC 是必须的，但不是简单的介绍。如果您的目标是开发应用程序，请使用 curl（甚至是 HTTP 流包装器）。

# ipad - 如何在点击时使文本文件清晰

> ID：15383978
> 
> 赞同：0
> 
> 时间：2013-03-13T11:26:49.540
> 
> 标签：ipad, uitextfield

我有应用程序，我希望当用户输入任何数据时，文本字段默认为 10，因此当用户单击文本字段时，它会清除文本字段以输入数据。这意味着当用户输入数据时，它不会像清除 1 和o 带有退格，但默认情况下，当用户单击文本字段时，它应该会变得清晰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:09:45.493

```
- (void)textFieldDidBeginEditing:(UITextField *)textField  
 {  
       [textfield settext:@""];
 } 
```

如果您专注于文本字段，则调用此方法并清除文本字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:33:57.437

*Apple Developers*已经为您完成了这项工作，设置`10`into `UITextField`placeholder 属性[见 doc](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html#//apple_ref/doc/uid/TP40006888-CH3-SW14)，当您点击文本字段时，它将*自动*删除！

但是，如果您想清除它以防您添加`10`为文本字段的文本，那么，

```
 - (void)textFieldDidBeginEditing:(UITextField *)textField 
 {
       textField.text = @"";
 } 
```

每次您关注文本字段时都会调用它。

# java - 如何知道java中的excel文件版本？

> ID：15383980
> 
> 赞同：1
> 
> 时间：2013-03-13T11:26:54.253
> 
> 标签：java, excel, apache-poi, jxl

我想用java读取excel文件。我有一些旧格式的 excel 文件（excel 95）和其他新格式的文件（excel 2007）。我目前正在使用 poi，但它无法读取旧格式的 excel 文件。所以我需要的是一个传递文件名的函数，如果格式是旧格式（BIFF5），它将返回一个布尔值，如果格式是新格式（BIFF8），则返回false。这个函数的需要是允许我使用 jxl in 来处理旧格式，而 poi 来处理新格式。

这是我的代码：

```
 try
    {
      // create a new org.apache.poi.poifs.filesystem.Filesystem
      POIFSFileSystem poifs = new POIFSFileSystem(fin);
      w = new HSSFWorkbook(poifs);
    }
    catch (IOException e)
    {
      w = null;
      throw e;
    }
    catch (OutOfMemoryError e) // java.lang.OutOfMemoryError:
    {
      w = null;
      throw e;
    }
    catch (OldExcelFormatException e) // OldExcelFormatException
    {
      w = null;
      System.out.println("OldExcelFormatException");
      translateBIFF5();
    }

 private void translateBIFF5() throws IOException, CmpException
  {
    ArrayList<String> row = null;
    try
    {
      jxl_w = Workbook.getWorkbook(excelFile);
    }
    catch (BiffException e)
    {
      jxl_w = null;
      e.printStackTrace();
    }
    catch (IOException e)
    {
      jxl_w = null;
      throw e;
    }
    catch (OutOfMemoryError e) // java.lang.OutOfMemoryError:
    {
      jxl_w = null;
      throw e;
    }

    if (jxl_w != null)
    {
      try
      {
        for (currentSheet = 0; currentSheet < jxl_w.getNumberOfSheets(); currentSheet++)
        {
          jxl_sheet = jxl_w.getSheet(currentSheet);
      . . . . . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:45:33.567

一种方法是调用 Windows ASSOC 和 FTYPE 命令，捕获输出并对其进行解析以确定安装的 Office 版本。

```
C:\Users\me>assoc .xls
.xls=Excel.Sheet.8

C:\Users\me>ftype Excel.sheet.8
Excel.sheet.8="C:\Program Files (x86)\Microsoft Office\Office12\EXCEL.EXE" /e 
```

这里有一个简单的例子：

```
import java.io.*;
public class ShowOfficeInstalled {
    public static void main(String argv[]) {
      try {
        Process p = Runtime.getRuntime().exec
          (new String [] { "cmd.exe", "/c", "assoc", ".xls"});
        BufferedReader input =
          new BufferedReader
            (new InputStreamReader(p.getInputStream()));
        String extensionType = input.readLine();
        input.close();
        // extract type
        if (extensionType == null) {
          System.out.println("no office installed ?");
          System.exit(1);
        }
        String fileType[] = extensionType.split("=");

        p = Runtime.getRuntime().exec
          (new String [] { "cmd.exe", "/c", "ftype", fileType[1]});
        input =
          new BufferedReader
            (new InputStreamReader(p.getInputStream()));
        String fileAssociation = input.readLine();
        // extract path
        String officePath = fileAssociation.split("=")[1];
        System.out.println(officePath);
      }
      catch (Exception err) {
        err.printStackTrace();
      }
    }
  } 
```

或者

您可以在注册表中搜索密钥：

HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\App 路径

正如这个问题所证明的那样，这可能需要一些工作：

[使用 Java 读取/写入 Windows 注册表](https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:29:02.340

我建议尝试使用 Andy Khan 的 JExcel 而不是 POI。我不认为 POI 的设计或记录特别好。JExcel 让我很幸运。试试看。

# php - 用于在标签之间提取数据的正则表达式

> ID：15383981
> 
> 赞同：0
> 
> 时间：2013-03-13T11:26:54.280
> 
> 标签：php, regex

我正在尝试在下面的给定数据中提取字母和 / 。（我不希望多年来的“s”以及-）

```
football soccer/basketball

1990s-1999s 
```

我 `/\D[a-zA-Z].*/s`在`preg_match_all`函数中使用。它返回字母和数字。（在 rubular.com 中进行测试时，上述表达式有效，但在 PHP 程序中无效）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:46:08.973

```
# ^([\D]+)$
# 
# Options: case insensitive; ^ and $ match at line breaks
# 
# Assert position at the beginning of a line (at beginning of the string or after a line break character) «^»
# Match the regular expression below and capture its match into backreference number 1 «([\D]+)»
#    Match a single character that is not a digit 0..9 «[\D]+»
#       Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
# Assert position at the end of a line (at the end of the string or before a line break character) «$»

preg_match_all('/^([\D]+)$/im', $subject, $result, PREG_PATTERN_ORDER);
$result = $result[0]; 
```

# objective-c - 指针后空格的编码约定 *

> ID：15383998
> 
> 赞同：2
> 
> 时间：2013-03-13T11:27:40.113
> 
> 标签：objective-c, cocoa, coding-style, conventions

在 Cocoa 中，为指针编写 * 的最佳约定是什么？

```
@property (nonatomic, retain) MyClass * instance; 
```

或者

```
@property (nonatomic, retain) MyClass *instance; 
```

我注意到 Core Data 的自动生成代码，将 *instance 按关系放置，但 *instance 按属性放置：

```
@property (nonatomic, retain) NSDate * send;
@property (nonatomic, retain) NSString * text;
@property (nonatomic, retain) User *user;
@property (nonatomic, retain) User *userManager; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:29:56.313

最好用

```
char *examplea; 
```

对于这样的情况：

假设你想在一行中包含多个指针变量，你需要这样做：

```
char *examplea, *exampleb; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:35:59.117

我读过的几乎所有 Objective-C 代码都是这样的：

```
@property (nonatomic, retain) MyClass *instance 
```

就个人而言，我也认为这样看起来最干净/最好