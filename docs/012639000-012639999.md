# StackOverflow 问答 12639000-12639999

# ios - 通过phonegap获取ios设备真实的udid

> ID：12639002
> 
> 赞同：2
> 
> 时间：2012-09-28T11:17:47.780
> 
> 标签：ios, cordova

我正在尝试使用 device.uuid 通过 phonegap 检索 ios udid（与 iTunes 中显示的相同）。每次安装应用程序时我都会得到不同的 uuid，似乎我得到的 uuid 属于应用程序而不是设备。

有人可以确认吗？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:21:37.930

这是正确的。请看[这个](http://techcrunch.com/2012/03/24/apple-udids/)。

> Apple 已开始加大力度弃用 UDID——将用户与特定设备（如 iPhone 或 iPad）联系起来的唯一标识符。该公司最初宣布打算在 6 个多月前随着 iOS 5 的发布逐步淘汰 UDID 的使用，但它最近开始拒绝来自 App Store 的试图访问这些标识符的应用程序。

不过可以看看[这个](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/SecureDeviceIdentifier)那个[。](https://github.com/crashlytics/secureudid)

# mysql - mysql 数据库中缺少数据

> ID：12639010
> 
> 赞同：0
> 
> 时间：2012-09-28T11:18:25.247
> 
> 标签：mysql

因此，我编写了一个 PHP 脚本，以便将我以前的 MySQL 数据库升级到具有新关系和内容的新数据库。一切似乎都运行良好，直到我注意到我的新数据库中缺少一些条目。我的旧数据库显示该表的 322 条记录，而我的新鞋仅显示 95 条记录。因此，由于有一些条目，我不知道问题出在哪里，谁能帮助我？

这是我的代码，我只在具有 bigint、varchar、double 和 float 的表 POIS 中遇到此问题：

```
<?
include("mysql.class.php");

$db_old = new mysqli("localhost", "root", "admin", "smarturbia_old");
$db = new mysqli("localhost", "root", "admin", "smarturbia");

$categories = array();;

$db->query("INSERT INTO categories(name) VALUES('taxi')") or die($db->error.__LINE__);
$db->query("INSERT INTO categories(name) VALUES('golf')") or die($db->error.__LINE__);
$db->query("INSERT INTO categories(name) VALUES('usa')") or die($db->error.__LINE__);
$db->query("INSERT INTO categories(name) VALUES('car')") or die($db->error.__LINE__);
$db->query("INSERT INTO categories(name) VALUES('moon')") or die($db->error.__LINE__);
$db->query("INSERT INTO categories(name) VALUES('scooter')") or die($db->error.__LINE__);
$db->query("INSERT INTO categories(name) VALUES('motocross')") or die($db->error.__LINE__);
$db->query("INSERT INTO categories(name) VALUES('supercar')") or die($db->error.__LINE__);
$db->query("INSERT INTO categories(name) VALUES('europe')") or die($db->error.__LINE__);
$db->query("INSERT INTO categories(name) VALUES('snow')") or die($db->error.__LINE__);

$result = $db->query("SELECT * FROM categories") or die("Não foi possível selecionar a base de dados");

        if($result->num_rows > 0) {
            while($row = $result->fetch_assoc()) 
                $categories[$row['name']] = $row['id'];         
    }
    else 
            echo 'NO RESULTS';  

$result = $db_old->query("SELECT * FROM cities") or die($db_old->error.__LINE__);

        if($result->num_rows > 0) {
        while($row_old = $result->fetch_assoc()) {
                        $sql="INSERT INTO `cities` VALUES (".$row_old['id'].",'".$row_old['published']."', '".$row_old['open']."', '".$row_old['path']."', '".$row_old['key']."', '".$row_old['world']."', '".$row_old['name']."', '".$row_old['description']."', '".$row_old['logo']."' , '".$row_old['footer']."', '".$row_old['footer_large']."' , '".$row_old['leftpub']."', '".$row_old['rightpub']."' ,'".$row_old['model']."', ".$row_old['modelxscale'].", ".$row_old['modelyscale'].", ".$row_old['modelzscale'].", ".$row_old['wheelmodelxscale'].", ".$row_old['wheelmodelyscale'].", ".$row_old['wheelmodelzscale'].", '".$row_old['allwheels']."', '".$row_old['frontleftwheel']."', '".$row_old['frontrightwheel']."', '".$row_old['rearleftwheel']."', '".$row_old['rearrightwheel']."', ".$row_old['axisdistance']." , ".$row_old['wheelsdistance']." , ".$row_old['wheelsheight'].", ".$row_old['kms'].", ".$row_old['maxspeed'].", ".$row_old['accel'].", ".$row_old['accelstep'].", ".$row_old['minaccelstep']." , ".$row_old['maxrevspeed'].", ".$row_old['decel']." , ".$row_old['gravity'].", ".$row_old['camheight'].", ".$row_old['camtilt'].", ".$row_old['traildistance'].", ".$row_old['mass'].", ".$row_old['vehicleagility'].", ".$row_old['suspensionstiffness'].", ".$row_old['suspensionrestlength'].", ".$row_old['suspensiondamping'].", ".$row_old['suspensiondeltatime'].", ".$row_old['turnspeedmin'].", ".$row_old['turnspeedmax'].", ".$row_old['speedmaxturn'].", ".$row_old['speedminturn'].", ".$row_old['steerroll'].", ".$row_old['rollspring'].", ".$row_old['rollclamp'].", '".$row_old['mapiconurl']."', '".$row_old['vehicleshadow']."', '".$row_old['vehiclesound']."', ".$row_old['vehiclesoundtime'].", '".$row_old['vehiclefastsound']."', ".$row_old['vehiclefastsoundtime'].", '".$row_old['backgroundsound']."', ".$row_old['backgroundsoundtime'].", '".$row_old['crashsound']."', ".$row_old['crashsoundtime'].", '".$row_old['vehicletype']."', '".$row_old['date']."' , ".$categories[$row_old["path"]]. ")";
                        try {
                            $db->query($sql);
                        }
                        catch (Exception $e){
                            echo 'Caught exception: ',  $e->getMessage(), "\n";
                        }                    
                }
    }
    else {
        echo 'NO RESULTS';  
    }

$result = $db_old->query("SELECT * FROM kmz") or die($db_old->error.__LINE__);

            if($result->num_rows > 0) {
        while($row_old = $result->fetch_assoc()) {
                        $sql="INSERT INTO `kmz` VALUES (".$row_old['id'].",".$row_old['city'].", '".$row_old['file']."','".$row_old['date']."')";
                        try {
                            $db->query($sql);
                        }
                        catch (Exception $e){
                            echo 'Caught exception: ',  $e->getMessage(), "\n";
                        }                    
                }
    }
    else {
        echo 'NO RESULTS';  
    }

$result = $db_old->query("SELECT * FROM pois") or die($db_old->error.__LINE__);

            if($result->num_rows > 0) {
        while($row_old = $result->fetch_assoc()) {
                        $sql="INSERT INTO `pois` VALUES (".$row_old['id'].",".$row_old['city'].", '".$row_old['name']."','".$row_old['description']."',".$row_old['lat'].", ".$row_old['lon'].",".$row_old['heading'].")";
                        try {
                            $db->query($sql);
                        }
                        catch (Exception $e){
                            echo 'Caught exception: ',  $e->getMessage(), "\n";
                        }                    
                }
    }
    else {
        echo 'NO RESULTS';  
    }

        //Just for consistency

        try {
            $db->query("INSERT INTO `smarturbia`.`limits` (`id`, `city`, `area`, `lat`, `lon`, `date`) VALUES (NULL, '76', NULL, '23.34343434', '-3.343343434', CURRENT_TIMESTAMP);");
            $db->query("INSERT INTO `smarturbia`.`area` (`id`, `city`, `name`, `date`) VALUES (NULL, '76', 'areateste', CURRENT_TIMESTAMP);");
            $db->query("UPDATE  `smarturbia`.`limits` SET  `area` =  '1' WHERE  `limits`.`id` =1;");

            //for sound
            $db->query("UPDATE  `smarturbia`.`cities` SET  `vehiclesound` =  '/assets/sounds/vehicle.ogg';");
            $db->query("UPDATE  `smarturbia`.`cities` SET  `backgroundsound` =  '/assets/sounds/background.ogg';");
            $db->query("UPDATE  `smarturbia`.`cities` SET  `crashsound` =  '/assets/sounds/crash.ogg';");

        }
        catch (Exception $e){
            echo 'Caught exception: ',  $e->getMessage(), "\n";
        }    

        echo 'Done';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:29:49.573

既然两个数据库都驻留在同一台主机上，为什么不简单地使用 SQL 将它们复制过来呢？大致取自您的代码：

```
INSERT INTO SMARTURBIA.cities 
SELECT SMARTURBIA_OLD.cities.*,catagories.name 
  from SMARTURBIA_OLD.cities, SMARTURBIA.CATEGORIES 
 WHERE cities.path=categories.name; 
```

和

```
INSERT INTO SMARTURBIA.kmz SELECT * FROM SMARTURBIA_OLD.kmz; 
```

和

```
INSERT INTO SMARTURBIA.pois SELECT * FROM SMARTURBIA_OLD.pois; 
```

等等 ：）

这样，如果所有行都已迁移，您可以立即查看（受影响的行数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:34:41.030

So i figured it out, the problem was my special characters, so i mysqli real_escape_string() to fix my problem. Thanks anyways guys.

# javascript - 如何使用从另一个对象生成的动态键替换多维 javascript 对象中的值

> ID：12639011
> 
> 赞同：0
> 
> 时间：2012-09-28T11:18:25.543
> 
> 标签：javascript, object

我有 2 个 javascript 对象，一个包含当前值，另一个包含需要替换的值的键。

```
var values = {'instance': {'body' : {'background': '000000'}}};

var replace = {'scope':'instance', 'item':'body', 'property': 'background'};

var newValue = 'FFFFFF';

Values[replace.scope][replace.item][replace.property] = newValue; 
```

如上所示，我可以“硬编码”替换，但有没有办法使用“替换”对象的映射/循环动态创建替换，因为多维对象的深度可能会有所不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:52:40.137

假设关于修改样式的示例是一个示例（否则我会建议您使用 jQuery 来修改样式）：

你可以这样做：

```
values.instance.body.background = newValue; 
```

因此，如果替换实例按原样定义并且它甚至可以更深入，那么在这种情况下，您可以执行以下操作：

```
 var path = "";
 for(i = 0; i < replace.length; i++) {
    path += "." + replace[i];
 }
 eval(path + " = " + "'" + newValue + "'"); 
 //resulting in "values.instance.body.background = newValue" being executed; 
```

干杯!

# c# - nlog：使用“Trace”输出会使 Logger.Error() 引发异常 - 如何修复？

> ID：12639012
> 
> 赞同：4
> 
> 时间：2012-09-28T11:18:38.787
> 
> 标签：c#, trace, nlog, system.diagnostics

我正在使用 NLog 进行日志记录。我正在尝试设置一种将其输出到 System.Diagnostics.Trace() 的方法，因此我将 NLog.config 文件设置如下：

```
<targets>
  <target name="debugOutput" xsi:type="Trace" />
</targets>
<rules>
  <logger name="*" minlevel="Debug" writeTo="debugOutput" />
</rules> 
```

这适用于除 Error() 和 Fatal() 之外的所有日志记录级别。

例如，下面的代码：

```
private static readonly Logger _logger = LogManager.GetCurrentClassLogger();
...
_logger.Trace("Sample trace message\n");
_logger.Debug("Sample debug message\n");
_logger.Info("Sample informational message\n");
_logger.Warn("Sample warning message\n");
_logger.Error("Sample error message\n");
_logger.Fatal("Sample fatal error message\n"); 
```

当 _logger.Error() 和 _logger.Fatal() 被调用时抛出异常：

```
2012-09-28 12:08:04.9296|DEBUG|ClassLibraryUsingNLog.Test|Sample debug message

2012-09-28 12:08:04.9636|INFO|ClassLibraryUsingNLog.Test|Sample informational message

2012-09-28 12:08:04.9906|WARN|ClassLibraryUsingNLog.Test|Sample warning message

---- DEBUG ASSERTION FAILED ----
---- Assert Short Message ----
2012-09-28 12:08:05.0176|ERROR|ClassLibraryUsingNLog.Test|Sample error message

---- Assert Long Message ----

   at NLog.Targets.TraceTarget.Write(LogEventInfo logEvent)
   at NLog.Targets.Target.Write(AsyncLogEventInfo logEvent)
   at NLog.Targets.Target.WriteAsyncLogEvent(AsyncLogEventInfo logEvent)
   at NLog.LoggerImpl.WriteToTargetWithFilterChain(TargetWithFilterChain targetListHead, LogEventInfo logEvent, AsyncContinuation onException)
   at NLog.LoggerImpl.Write(Type loggerType, TargetWithFilterChain targets, LogEventInfo logEvent, LogFactory factory)
   at NLog.Logger.WriteToTargets[T](LogLevel level, IFormatProvider formatProvider, T value)
   at NLog.Logger.Error(String message)
   at ClassLibraryUsingNLog.Test.Func() in c:\Test\CS4.x\ClassLibraryUsingNLog\Test.cs:line 15
   at ConsoleAppIndirectlyUsesNLog.Program.Main(String[] args) in C:\Test\CS4.x\ConsoleAppIndirectlyUsesNLog\Program.cs:line 11

First-chance exception at 0x7686b9bc in ConsoleAppIndirectlyUsesNLog.exe: Microsoft C++ exception: EEMessageException at memory location 0x0053e8d4..
---- DEBUG ASSERTION FAILED ----
---- Assert Short Message ----
2012-09-28 12:08:06.7936|FATAL|ClassLibraryUsingNLog.Test|Sample fatal error message

---- Assert Long Message ----

   at NLog.Targets.TraceTarget.Write(LogEventInfo logEvent)
   at NLog.Targets.Target.Write(AsyncLogEventInfo logEvent)
   at NLog.Targets.Target.WriteAsyncLogEvent(AsyncLogEventInfo logEvent)
   at NLog.LoggerImpl.WriteToTargetWithFilterChain(TargetWithFilterChain targetListHead, LogEventInfo logEvent, AsyncContinuation onException)
   at NLog.LoggerImpl.Write(Type loggerType, TargetWithFilterChain targets, LogEventInfo logEvent, LogFactory factory)
   at NLog.Logger.WriteToTargets[T](LogLevel level, IFormatProvider formatProvider, T value)
   at NLog.Logger.Fatal(String message)
   at ClassLibraryUsingNLog.Test.Func() in c:\Test\CS4.x\ClassLibraryUsingNLog\Test.cs:line 16
   at ConsoleAppIndirectlyUsesNLog.Program.Main(String[] args) in C:\Test\CS4.x\ConsoleAppIndirectlyUsesNLog\Program.cs:line 11 
```

但是，如果我将配置文件更改为输出到 OutputDebugString，则通过将 xsi:type 更改为“OutputDebugString”，如下所示：

```
<targets>
  <target name="debugOutput" xsi:type="OutputDebugString" />
</targets>
<rules>
  <logger name="*" minlevel="Debug" writeTo="debugOutput" />
</rules> 
```

然后一切都按预期工作，没有任何例外。我在调试输出窗口中得到这个输出（在更改项目设置以支持非托管调试之后）：

```
2012-09-28 12:16:13.4166|DEBUG|ClassLibraryUsingNLog.Test|Sample debug message
2012-09-28 12:16:13.4166|INFO|ClassLibraryUsingNLog.Test|Sample informational message
2012-09-28 12:16:13.4166|WARN|ClassLibraryUsingNLog.Test|Sample warning message
2012-09-28 12:16:13.4266|ERROR|ClassLibraryUsingNLog.Test|Sample error message
2012-09-28 12:16:13.4266|FATAL|ClassLibraryUsingNLog.Test|Sample fatal error message 
```

有没有办法通过输出到 System.Diagnostics.Trace() 来完成这项工作，而不会引发 Logger.Error() 和 Logger.Fatal() 的异常？为什么它会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T03:23:01.507

除了第一个答案：

NLog TraceTarget 在 LogLevel >= LogLevel.Error 时调用 Trace.Fail

Trace.Fail 方法记录在这里[http://msdn.microsoft.com/en-us/library/95s7fba5.aspx](http://msdn.microsoft.com/en-us/library/95s7fba5.aspx)

问题的原因似乎是：

*默认跟踪侦听器的默认行为是当应用程序在用户界面模式下运行时将消息参数输出到消息框，并输出到 Listeners 集合中的 TraceListener 实例。*

您可以在控制台应用程序中演示问题

```
 static void Main( string[ ] args ){
  Trace.TraceInformation( "Hello world" );
  Trace.Fail("A failure");
} 
```

您可以通过在添加自己的 TraceListener 之前删除 DefaultTraceListener 来“修复”此问题

```
static void Main( string[ ] args ){
  Trace.Listeners.Clear();
  Trace.Listeners.Add( new ConsoleTraceListener( ) );
  Trace.TraceInformation( "Hello world" );
  Trace.Fail("A failure");
} 
```

或者，您可以将 DefaultTraceListener 的 AssertUiEnabled 属性设置为 false。

```
static void Main( string[ ] args ){
  Trace.Listeners.OfType<DefaultTraceListener>().First().AssertUiEnabled = false;
  Trace.TraceInformation( "Hello world" );
  Trace.Fail("A failure");
} 
```

这会抑制断言失败对话框，但跟踪输出仍包含虚假堆栈转储

如果您只想将日志信息发送到 Visual Studion 输出窗口，请使用 DebuggerTarget

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T14:30:24.117

在内部，TraceTarget 使用[System.Diagnostics.Trace.Fail](http://msdn.microsoft.com/en-us/library/95s7fba5.aspx)来编写消息。

下面是 NLog TraceTarget 的 Write 方法的代码：

```
protected override void Write(LogEventInfo logEvent)
{
    if (logEvent.Level >= LogLevel.Error)
    {
        Trace.Fail(this.Layout.Render(logEvent));
    }
    else
    {
        Trace.WriteLine(this.Layout.Render(logEvent));
    }
} 
```

我不知道为什么 Trace.Fail 显然失败了。但是，知道 NLog 使用 Trace.Fail，您可以尝试使用 Trace.Fail（在您使用 NLog 记录的同一个调用站点），看看您是否可以诊断 Trace.Fail 出了什么问题。它可能与 app.config 文件中的 System.Diagnostics 配置（或缺少相同配置）有关。

请注意，在 Trace.Fail 的 MSDN 文档中，它说如果 DefaultTraceListener 不存在，则使用 MessageBox。我在您的输出中注意到您正在使用控制台应用程序。MessageBox 在控制台应用程序的上下文中是否可能无法正常工作？

[这是 Scott Hanselman 发表的一篇相对较旧的博客文章的链接](http://www.hanselman.com/blog/PreventingDialogsOnTheServerSideInASPNETOrTraceFailConsideredHarmful.aspx)，可能会对您的问题有所了解。在底部，他描述了 Trace.Fail 在非 UI 上下文中的问题，并提出了一个可能对您有用的解决方案。

总而言之，他建议将它（特别是[assertuienabled](http://msdn.microsoft.com/en-us/library/ty5e4c4h.aspx)标志）放在您的 app.config/web.config 中（或通过[代码](http://msdn.microsoft.com/en-us/library/system.diagnostics.defaulttracelistener.assertuienabled.aspx)设置）。

```
<configuration>
   <system.diagnostics>
      <assert assertuienabled="false" logfilename="c:\log.txt"/>
   </system.diagnostics>
</configuration> 
```

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-28T15:01:51.187

NLog 4.5 引入了独立于 LogLevel的`rawWrite=true`转发设置。`Trace.WriteLine`

```
<targets>
  <target xsi:type="Trace" name="debugOutput" rawWrite="true" />
</targets> 
```

另见：[https ://github.com/nlog/nlog/wiki/Trace-target](https://github.com/nlog/nlog/wiki/Trace-target)

PS 由于 NLog 2.0.1 then only`LogLevel.Fatal`被映射到`Trace.Fail`

# javascript - 包含在 div 中的相同文本，在被 Javascript 插入后会溢出相同的 div

> ID：12639013
> 
> 赞同：0
> 
> 时间：2012-09-28T11:18:39.240
> 
> 标签：javascript, css, html

我有一个用一些文本初始化的 div：

```
<div id="previewText" style="margin: 10px auto; width:366px; background: #EDEDED; border: solid 1px #CCC; padding: 10px; word-wrap: normal; font-size: 13px; font-family: 'lucida grande',tahoma,verdana,arial,sans-serif;">
   word1 word2 word3333 word444444 word55555 word666666 word777777 word888888 word999999 word1000000 word11111111 word222222222 word333333333   
</div> 
```

我在浏览器上看到了这个：

![文本1](../Images/7e0b054010ea045fbb30b473f7510532.png)

然后，如果我将相同的文本从 a 附加`textarea`到确切的 div：

***文字区：***

![文本区域](../Images/b2cde30958f2ab548f8a28f2a825ecc4.png)

***Javascript 代码***

```
var TheTextBox = document.getElementById("fbMessage");
var textAreaText = TheTextBox.value;

previewText = textAreaText.replace(/\n/g, "<br/>").replace(/\s/g, "&nbsp");

document.getElementById('previewText').innerHTML = previewText; 
```

新的附加文本超出了 div 的宽度，我看到了：

![文本2](../Images/6d87c5a9e22a0671a607394248dc856c.png)

我尝试将 div 更改为表格并将文本放入`<td>`. 但同样的事情也会发生。

为什么会这样？以及如何在复制后保留 div 内的文本？

**注意：我不想使用`word-wrap: break-word;`，因为不想破坏任何单词

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:08:07.310

尝试添加“溢出：隐藏；” 到 div 的样式声明。

如果这不起作用，请尝试删除“自动换行”规则，您可能不需要它。

# java - 方程输出为十进制，而不是科学计数法

> ID：12639014
> 
> 赞同：0
> 
> 时间：2012-09-28T11:19:02.203
> 
> 标签：java, bigdecimal

所以我有这个代码：

```
public BigDecimal calculateEWT (BigDecimal amount, boolean vatInclusive, int scale)
{       
    if (isZeroTax())
        return Env.ZERO;

    BigDecimal rateTax = getRate().divide(ONEHUNDRED, 12, BigDecimal.ROUND_HALF_UP);
    BigDecimal rateEWT = getcus_tax_EWTRate().divide(ONEHUNDRED, 12, BigDecimal.ROUND_HALF_UP);
    rateTax = rateTax.add(Env.ONE);

    BigDecimal ewt = null;
    if (!vatInclusive) {
        BigDecimal base = amount.divide(rateTax, 12, BigDecimal.ROUND_HALF_UP);
        ewt = base.multiply(rateEWT);
        System.out.println("EWT VAT not inclusive: " + ewt);
    } else {
        BigDecimal base = amount.multiply (rateTax);
        ewt = base.multiply(rateEWT);
        System.out.println("EWT VAT inclusive: " + ewt);
    }
    BigDecimal finalEWT = ewt.setScale(scale, BigDecimal.ROUND_HALF_UP);
    System.out.println("Final EWT: " + finalEWT);
    return finalEWT;
} 
```

而 System.out.println("EWT 不含增值税：" + ewt); 打印出“EWT VAT not inclusive: 0E-12”，因为 finalEWT 返回 0.00 而弄乱了其他方程

作为示例值，假设金额 = 1000，rateTax 为 1.12，rateEWT 为 0.05

有没有办法以正常的十进制形式打印出来？我需要它仍然是 BigDecimal 格式，因为我会将答案插入数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:21:50.933

是的，有一个方法叫做[`BigDecimal.toPlainString()`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#toPlainString%28%29)：

> *返回此 BigDecimal 的字符串表示形式，不带指数字段...*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:31:22.143

我建议使用[String.format](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)

```
System.out.println(String.format("EWT VAT not inclusive: %f", ewt)); 
```

[此处](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#dndec)描述了格式化程序（“%f”）。请参阅“BigDecimal”部分

编辑：答案似乎无效，因为操作实际上不是要求输出的另一种格式，而是检查计算。对不起。请不要投反对票。这是一个误会。

# php - 通过 HTTP GET 传递带有键的数组

> ID：12639015
> 
> 赞同：4
> 
> 时间：2012-09-28T11:19:10.283
> 
> 标签：php, http, get, http-get

我试图通过请求将数组数据传递给 PHP 脚本：

```
script.php?page=7&filter[key]=value 
```

但在脚本中没有收到。我可以这样做吗？如果不能 - 我如何使用 HTTP GET 传递数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:23:35.803

`script.php`是的，您将在页面上的数组中获得这些值

只需尝试在`script.php`页面中打印数组值。

`print_r($_GET['filter']);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:38:33.303

您绝对可以从 url 传递数组并在 php 页面上获取值，

```
$testvar = $_GET['filter'];
echo $testvar['key']; 
```

只是出于好奇，我尝试了`$_GET['filter']['value']`，它也奏效了！

如果你想传递多个数组 val，你可以使用**[http_build_query](http://php.net/manual/en/function.http-build-query.php)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:23:47.853

你必须像这样传递数据

```
script.php?page=7&filter=value 
```

并`is_array()`用于检查传入数据是否为数组

```
is_array($_GET['filter']) 
```

[http://php.net/manual/en/function.is-array.php](http://php.net/manual/en/function.is-array.php)

# php - 如何将自定义 mysql 列数据添加到 WordPress 循环

> ID：12639024
> 
> 赞同：0
> 
> 时间：2012-09-28T11:19:53.047
> 
> 标签：php, mysql, wordpress

我正在尝试向 WordPress 网站添加自定义“喜欢”按钮。

我在“wp_posts”表中添加了一个名为“post_likes”的额外列。

我正在努力解决的是是否有任何方法可以将此数据作为标准 WordPress 循环的一部分输出？

我从数据库中检索信息的代码：

```
function get_articles() {
    $articles = array();

    $query = mysql_query("SELECT `ID`, `post_title`, `post_likes` FROM `wp_posts`");
    while (($row = mysql_fetch_assoc($query)) !== false) {
    $articles[] = array(
        'ID' => $row['ID'],
        'post_title' => $row['post_title'],
        'post_likes' => $row['post_likes']
    );

    }   

    return $articles;
} 
```

输出这个的当前代码：

```
 <?php
$articles= get_articles();
foreach ($articles as $article) { echo '<p><a href="#">Like</a> <span>', $article['post_likes'], '</span> Like this</p>'; }
?> 
```

但我需要知道是否有办法将其添加为循环的一部分，这样我就可以使用缩略图、按类别过滤等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:21:27.233

好吧，这在很多方面都是错误的。**永远不要改变 WP 表**。
你`post_likes`应该是一个`post_meta`（检查[add_post_meta](http://codex.wordpress.org/Function_Reference/add_post_meta)）

数据库连接应该用[`$wpdb`](http://codex.wordpress.org/wpdb)

并且显示帖子应该在[循环](http://codex.wordpress.org/the_loop)中完成，不需要数据库连接来做到这一点。
您可以在其中使用[get_post_meta](http://codex.wordpress.org/get_post_meta)来获取您的`post_likes`
And the `like_post`+1 them with [update_post_meta](http://codex.wordpress.org/update_post_meta)

如果您需要更改循环，请使用[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

**为什么你不应该改变 WordPress 表格**

1.  帖子（和用户）所需的所有替代“列”都应存储在该`*_meta`表中。看看这些表，你应该能够理解它是如何工作的。
2.  这样您就可以使用所有 *_post_meta 来添加/编辑/更新/删除这些数据。无需自己编写额外的代码功能（并进行数据库调用）
3.  如果您确实使用函数创建了自己的列，缓存插件不会优化您获取这些部分的性能。
4.  如果 WP 更新对数据库执行某些操作，它可能会删除您的数据
5.  当您使用自己的流程并围绕 WordPress 进行破解/更改时，为什么要使用 Wordpress。

# jenkins - Gradle 任务突然终止

> ID：12639029
> 
> 赞同：-1
> 
> 时间：2012-09-28T11:20:17.103
> 
> 标签：jenkins, hudson, gradle, jenkins-plugins, hudson-plugins

我将简要解释一下这个问题：

我正在通过 Hudson 执行 gradle 任务。gradle 任务执行一些 groovy 代码。如果我取消 Hudson 作业，执行 gradle 任务，那么 gradle 任务会突然结束，而没有完全执行其中的 groovy 代码。

有没有办法，即使 gradle 任务突然终止，代码块也会反抗执行？这是为了处理优雅的退出。就像在 java 中一样，我们有一个 finally 块。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:46:07.890

在 Gradle 中无法做到这一点，因为 Hudson 正在控制执行 Gradle/Groovy 代码的 JVM 进程。但是由于你使用的是 Hudson，你可以尝试使用一些插件来实现你所需要的。例如，您可以创建另一个作业并使用[Build Result Trigger Plugin](https://wiki.jenkins-ci.org/display/JENKINS/BuildResultTrigger+Plugin)，它将在您的原始作业失败时启动该作业。

# sql - 获取在特定日期创建和/或修改的存储过程列表？

> ID：12639030
> 
> 赞同：46
> 
> 时间：2012-09-28T11:20:34.420
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我想找到我创建的存储过程，还想找到在特定日期（如 2012 年 9 月 27 日（27/09/2012））在我的 SQL Server 中修改的存储过程。

是否有任何查询会列出在该日期创建和修改的这些程序？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-09-28T11:23:07.860

您可以在任何给定的 SQL Server 数据库中尝试此查询：

```
SELECT 
    name,
    create_date,
    modify_date
FROM sys.procedures
WHERE create_date = '20120927' 
```

其中列出了名称、创建和最后修改日期——不幸的是，它没有记录**谁**创建和/或修改了相关存​​储过程。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-13T13:21:21.563

这是“新学校”版本。

```
SELECT * FROM INFORMATION_SCHEMA.ROUTINES
WHERE ROUTINE_TYPE = N'PROCEDURE' and ROUTINE_SCHEMA = N'dbo' 
and CREATED = '20120927' 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-13T13:02:54.217

```
SELECT name
FROM sys.objects
WHERE type = 'P'
AND (DATEDIFF(D,modify_date, GETDATE()) < 7
     OR DATEDIFF(D,create_date, GETDATE()) < 7) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-01T09:51:36.243

```
SELECT * FROM sys.objects WHERE type='p' ORDER BY modify_date DESC

SELECT name, create_date, modify_date 
FROM sys.objects
WHERE type = 'P'

SELECT name, crdate, refdate 
FROM sysobjects
WHERE type = 'P' 
ORDER BY refdate desc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-04T09:51:13.250

对于 SQL Server 2012：

```
SELECT name, modify_date, create_date, type
FROM sys.procedures
WHERE name like '%XXX%' 
ORDER BY modify_date desc 
```

# django - 可以在 django 模型验证器中使用多个值吗？

> ID：12639031
> 
> 赞同：7
> 
> 时间：2012-09-28T11:20:36.620
> 
> 标签：django, model, validation

我有一个使用`CompareDates`为我的模型验证器调用的验证类的模型，我想向验证器传递两个字段值。但是我不确定如何在验证器中使用多个字段值。

我希望能够在日期之间进行比较，以便整体验证模型，但您似乎无法对传递给验证器的值进行关键字，或者我错过了什么？

```
from django.db import models
from myapp.models.validators.validatedates import CompareDates

class GetDates(models.Model):
    """
    Model stores two dates
    """
    date1 = models.DateField(
            validators = [CompareDates().validate])
    date2 = models.DateField(
            validators = [CompareDates().validate]) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T11:37:11.213

“正常”验证器只会获取当前字段值。所以它不会做你想做的事。但是，您可以添加一个干净的方法，并且 - 如果需要的话 - 像这样覆盖您的保存方法：

```
class GetDates(models.Model):
    date1 = models.DateField(validators = [CompareDates().validate])
    date2 = models.DateField(validators = [CompareDates().validate])
    def clean(self,*args,**kwargs):
        CompareDates().validate(self.date1,self.date2)
    def save(self,*args,**kwargs):
        # If you are working with modelforms, full_clean (and from there clean) will be called automatically. If you are not doing so and want to ensure validation before saving, uncomment the next line.
        #self.full_clean()
        super(GetDates,self).save(*args,**kwargs) 
```

# java - Enum 实例何时创建？

> ID：12639038
> 
> 赞同：7
> 
> 时间：2012-09-28T11:21:04.333
> 
> 标签：java, enums

我有一个关于 Java 的简单问题，`Enums`请参阅以下代码。什么时候实例化像这样的`PropName .CONTENTS`实例？

```
public enum PropName {

  CONTENTS("contents"),
  USE_QUOTES("useQuotes"),
  ONKEYDOWN("onkeydown"),
  BROWSER_ENTIRE_TABLE("browseEntireTable"),
  COLUMN_HEADINGS("columnHeadings"),
  PAGE_SIZE("pageSize"),
  POPUP_TITLE("popupTitle"),
  FILTER_COL("filterCol"),
  SQL_SELECT("sqlSelect"),
  ;

  private String name;

  private PropName(String name) {
    this.name = name;
  }

  public String getName() {
    return name;
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T11:21:51.930

它是在加载类时创建的，就像任何静态代码块一样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T11:22:26.190

当类加载器加载 PropName 类时。枚举常量是其类的静态最终字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-28T14:30:04.933

枚举类型的实例是在**“加载类文件”的最后阶段在****类加载器子系统**中创建的，称为***初始化***，而不是像其他类实例一样在运行时创建。它们首先出现，在任何其他静态字段/变量初始化之前，这就是为什么您也不能访问枚举构造函数中的静态字段，除非它们是常量。

# android - NoSuchMethodError：getSize

> ID：12639043
> 
> 赞同：1
> 
> 时间：2012-09-28T11:21:30.910
> 
> 标签：android

我有以下代码来查找屏幕的大小：

```
WindowManager wm = (WindowManager) this.getSystemService(Context.WINDOW_SERVICE);
    Point size = new Point();
    int measuredWidth = 0;
    int measuredHeight = 0;

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        wm.getDefaultDisplay().getSize(size);

        measuredWidth = size.x;
        measuredHeight = size.y;
    } else {
        Display display = wm.getDefaultDisplay();

        measuredWidth = display.getWidth();
        measuredHeight = display.getHeight();
    } 
```

在galaxy gio（2.3.6）上这是可行的，但是在galaxy tab 10.1（3.0）上会崩溃。

```
wm.getDefaultDisplay().getSize(size); 
```

在这条线上我得到

> NoSuchMethodError：android.view.Display.getSize。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:27:24.350

我已经找到了，我认为 getSize() 方法从 HoneyComb (api 11) 开始可用，但实际上它只在 Honeycomb_MR2 (api 13) 之后可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:29:45.763

getSize() 从 API 13[文档开始](http://developer.android.com/reference/android/view/Display.html#getSize%28android.graphics.Point%29)

您可能在具有旧版本的设备上运行它。

尝试 getHeight() 和 getWidth()。

# c# - Exe（控制台应用程序）故障排除

> ID：12639044
> 
> 赞同：-2
> 
> 时间：2012-09-28T11:21:34.200
> 
> 标签：c#, console-application, exe

我正在开发数据馈送控制台应用程序。它将 xml 文件（xml 文件形式的数据）从目录馈送到投资组合应用程序。它在 for 循环中一一处理文件取决于文件数。

当我运行这个应用程序的 exe 时，有时它会因为一些未知的错误而突然停止。不过，我使用了日志记录机制和错误处理。我应该怎么做才能在处理完所有文件之前不会在两者之间崩溃（停止）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:25:53.720

我认为抛出了一个未捕获的未知异常。您可以尝试添加一个全局异常处理程序（[通过这个 SO answer](https://stackoverflow.com/a/3133249/637425)）并记录该异常。但这仍然可能导致您的程序停止，但至少您可以捕获所有异常，以便更好地调试。

# php - php正则表达式 - 如何在结果中分离子模式的重复

> ID：12639045
> 
> 赞同：1
> 
> 时间：2012-09-28T11:21:43.130
> 
> 标签：php, regex

我有以下正则表达式：

```
preg_match('/some text \d ([\d\,\s]*[A-Z0-9]\, [A-Za-ząćęłńóśźżĄĆĘŁŃÓŚŹŻ\s]*){0,5}/',$text,$results); 
```

里面有 subpattern:`([\d\,\s]*[A-Z0-9]\, [A-Za-ząćęłńóśźżĄĆĘŁŃÓŚŹŻ\s]*)`我想从 0 到 5 次匹配它。`$result`但我想让这个子模式的每个匹配项与数组中的其他匹配项分开。- 我该怎么做？

因为我的结果是（我为此示例更改了字符串）：

```
0 => string 'some text pattern1 pattern2 pattern3 pattern4 pattern5' (length=376)
1 => string 'pattern5' 
```

所以它匹配子模式5次，但只有最后一个在数组中分开......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:28:40.723

不可能。您必须在正则表达式中手动重复该模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:54:20.773

我会通过几个步骤来做到这一点。

根据您的简化字符串：

```
$text = "some text pattern1 pattern2 pattern3 pattern4 pattern5";
if (preg_match('/^some text /', $text)) {
    $text = preg_replace('/^some text /', '', $text);
    preg_match_all('/(pattern\d)/', $text, $m);
    print_r($m);
} 
```

**输出：**

```
Array
(
    [0] => Array
        (
            [0] => pattern1
            [1] => pattern2
            [2] => pattern3
            [3] => pattern4
            [4] => pattern5
        )

    [1] => Array
        (
            [0] => pattern1
            [1] => pattern2
            [2] => pattern3
            [3] => pattern4
            [4] => pattern5
        )

) 
```

# php - Magento 网格问题

> ID：12639049
> 
> 赞同：6
> 
> 时间：2012-09-28T11:21:55.177
> 
> 标签：php, magento

谁能指出我如何在 Magento Grid 中保存可编辑列的正确方向？

我有一个名为 'sort_order' 的列，其中有 'editable' => true ，它添加了一个要编辑的字段，但是如何使它将值保存到行中？

预先感谢您的帮助。

这是我的 grid.php 代码，

```
class ***_Imagegallery_Block_Manage_Imagegallery_Grid extends Mage_Adminhtml_Block_Widget_Grid
{
    public function __construct()
    {
        parent::__construct();
        $this->setId('imagegalleryGrid');
        $this->setDefaultSort('sort_order');
        $this->setDefaultDir('ASC');
        $this->setSaveParametersInSession(true);
    }

    protected function _getStore()
    {
        $storeId = (int) $this->getRequest()->getParam('store', 0);
        return Mage::app()->getStore($storeId);
    }

    protected function _prepareCollection()
    {

        $collection = Mage::getModel('imagegallery/imagegallery')->getCollection();

        $store = $this->_getStore();
        if ($store->getId()) {
            $collection->addStoreFilter($store);
        }

        $filter = $this->getParam('filter');

        $filter_data = Mage::helper('adminhtml')->prepareFilterString($filter);

        if(!isset($filter_data['status']))
        {
            $collection->addFieldToFilter('status', array('eq' => 1));
        }

        $this->setCollection($collection);

        return parent::_prepareCollection();
    }

    protected function _prepareColumns()
    {

        $this->addColumn('sort_order', array(
          'header'    => Mage::helper('imagegallery')->__('Sort'),
          'align'     =>'right',
          'width'     => '50px',
          'index'     => 'sort_order',
        'type'      => 'number',
    'width'     =>  '1',
    'sortable'  => true,
    'editable'  => true
        ));

        $this->addColumn('post_id', array(
          'header'    => Mage::helper('imagegallery')->__('ID'),
          'align'     =>'right',
          'width'     => '50px',
          'index'     => 'post_id',
        ));

        $this->addColumn('nfile', array(
            'header'    => Mage::helper('cms')->__('Image File'),
            'align'     => 'left',
            'index'     => 'nfile',
            'type'      => 'image',
            'width'     => '100',
        ));

        $this->addColumn('title', array(
          'header'    => Mage::helper('imagegallery')->__('Title'),
          'align'     =>'left',
          'index'     => 'title',
        ));

        /*$this->addColumn('identifier', array(
          'header'    => Mage::helper('imagegallery')->__('Identifier'),
          'align'     => 'left',
          'index'     => 'identifier',
        ));

        $this->addColumn('user', array(
            'header'    => Mage::helper('imagegallery')->__('Poster'),
            'width'     => '150px',
            'index'     => 'user',
        ));*/

        $this->addColumn('created_time', array(
            'header'    => Mage::helper('imagegallery')->__('Created'),
            'align'     => 'left',
            'width'     => '120px',
            'type'      => 'date',
            'default'   => '--',
            'index'     => 'created_time',
        ));

        $this->addColumn('update_time', array(
            'header'    => Mage::helper('imagegallery')->__('Updated'),
            'align'     => 'left',
            'width'     => '120px',
            'type'      => 'date',
            'default'   => '--',
            'index'     => 'update_time',
        ));

        $this->addColumn('status', array(
          'header'    => Mage::helper('imagegallery')->__('Status'),
          'align'     => 'left',
          'width'     => '80px',
          'index'     => 'status',
          'type'      => 'options',
          'options'   => array(
              1 => Mage::helper('imagegallery')->__('Enabled'),
              2 => Mage::helper('imagegallery')->__('Disabled'),
              3 => Mage::helper('imagegallery')->__('Hidden'),
          ),
        ));

        $this->addColumn('action',
            array(
            'header'    =>  Mage::helper('imagegallery')->__('Action'),
            'width'     => '100',
            'type'      => 'action',
            'getter'    => 'getId',
            'actions'   => array(
                    array(
                            'caption'   => Mage::helper('imagegallery')->__('Edit'),
                            'url'       => array('base'=> '*/*/edit'),
                            'field'     => 'id'
                    )
            ),
            'filter'    => false,
            'sortable'  => false,
            'index'     => 'stores',
            'is_system' => true,
    ));

        return parent::_prepareColumns();
    }

    protected function _prepareMassaction()
    {
        $this->setMassactionIdField('post_id');
        $this->getMassactionBlock()->setFormFieldName('imagegallery');

        $this->getMassactionBlock()->addItem('delete', array(
             'label'    => Mage::helper('imagegallery')->__('Delete'),
             'url'      => $this->getUrl('*/*/massDelete'),
             'confirm'  => Mage::helper('imagegallery')->__('Are you sure?')
        ));

        $statuses = Mage::getSingleton('imagegallery/status')->getOptionArray();

        array_unshift($statuses, array('label'=>'', 'value'=>''));
        $this->getMassactionBlock()->addItem('status', array(
             'label'=> Mage::helper('imagegallery')->__('Change status'),
             'url'  => $this->getUrl('*/*/massStatus', array('_current'=>true)),
             'additional' => array(
                    'visibility' => array(
                         'name' => 'status',
                         'type' => 'select',
                         'class' => 'required-entry',
                         'label' => Mage::helper('imagegallery')->__('Status'),
                         'values' => $statuses
                     )
             )
        ));
        return $this;
    }

    public function getRowUrl($row)
    {
        return $this->getUrl('*/*/edit', array('id' => $row->getId()));
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:03:46.260

这实际上非常复杂。理想情况下，您的网格需要成为实例化表单的容器的一部分，并通过选项卡部分调用。保存按钮通常是自定义 phtml 模板的一部分，它与通过 Adminhtml 中的控制器操作调用的布局块一起调用。

这个 form.phtml 可以非常简单，但通常包含一些 javascript 来格式化保存 url（见下文）并收集提交数据。

**表单.php**

构造函数：

```
public function __construct()
{
    parent::__construct();
    $this->setTemplate('your/adminhtml/edit/form.phtml');
} 
```

而 _prepareLayout 方法：

```
protected function _prepareLayout()
{
    // Save button
        $this->setChild('save_button',
            $this->getLayout()->createBlock('adminhtml/widget_button')
                ->setData(array(
                    'label'     => Mage::helper('catalog')->__('Save Category'),
                    'onclick'   => "formSubmit('" . $this->getSaveUrl() . "', true)",
                    'class' => 'save'
                ))
        ); 
```

您的保存按钮将提交定向到正确的控制器。在上面的示例中，他们使用 getSaveUrl 作为这些块类的方法。您也可以对其进行硬编码或`$this->getUrl('*/*/save')`像在其他地方一样使用它。单击此保存按钮将序列化表单：

**表单.phtml**

默认文件只有：

```
<div class="entry-edit">
    <?php echo $this->getFormHtml();?>
</div>
<?php echo $this->getChildHtml('form_after');?> 
```

包含可编辑帖子数据的扩展 form.phtml 文件执行以下操作：

```
<div class="entry-edit">
    <?php echo $this->getFormHtml();?>
</div>
<?php echo $this->getChildHtml('form_after');?>
<script>
    function formSubmit(url){
        var elements = $('[yourformid]').select('input');
        var serialized = Form.serializeElements(elements, true);
        window.location(url + '?' + serilized.[element_name].join(','));
    }
</script> 
```

我没有测试上述代码的每一部分，但理论是可靠的，这就是我在这些情况下所做的。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:39:50.130

虽然您认为此属性可用作 addColumn 的属性是正确的，但我相信 FlorinelChis 实际上在需要表单时是正确的。我在 Magento 核心代码中知道的唯一示例是编辑类别时的产品订购。如果您查看它，您将看到有问题的网格实际上作为选项卡添加到类别的编辑表单中。对数据库的持久性是作为标准编辑表单保存的一部分完成的（在`saveAction`产品`Mage_Adminhtml_Catalog_CategoryController`中使用`Varien_Object`魔法设置器存储`setPostedProducts`，然后当动作调用类别模型上的保存时，类别模型上的`_afterSave`函数会触发`_saveCategoryProducts`，从而持久化信息到数据库）。

（不幸的是）没有自动支持直接从标准网格页面保存值。

# android - 在 JNI Android 中写入标准输出？没有

> ID：12639050
> 
> 赞同：6
> 
> 时间：2012-09-28T11:21:57.333
> 
> 标签：android, android-ndk, java-native-interface, logcat, stdio

我已经更改了 android ndk 的 HelloJni 示例，我想在标准输出中写一些东西。这是 Jni 代码：

```
#include <stdlib.h>
#include <jni.h>
#include <stdio.h>

jstring
Java_com_example_hellojni_HelloJni_stringFromJNI( JNIEnv* env,
                                              jobject thiz )
{
    printf("Hello from C !\n");
    return (*env)->NewStringUTF(env, "Hello from JNI !");
} 
```

这是我的日志：

```
09-28 13:07:02.906: I/ActivityManager(1650): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.example.hellojni/.HelloJni u=0} from pid 1790
09-28 13:07:03.007: D/dalvikvm(1650): GC_FOR_ALLOC freed 687K, 10% free 9300K/10247K, paused 62ms, total 62ms
09-28 13:07:03.070: D/dalvikvm(3562): Not late-enabling CheckJNI (already on)
09-28 13:07:03.085: I/ActivityManager(1650): Start proc com.example.hellojni for activity com.example.hellojni/.HelloJni: pid=3562 uid=10052 gids={1015, 1028}
09-28 13:07:03.101: I/dalvikvm(3562): Turning on JNI app bug workarounds for target SDK version 3...
09-28 13:07:03.132: D/dalvikvm(3562): Debugger has detached; object registry had 1 entries
09-28 13:07:03.171: D/dalvikvm(3562): Trying to load lib /data/data/com.example.hellojni/lib/libhello-jni.so 0x414af318
09-28 13:07:03.179: D/dalvikvm(3562): Added shared lib /data/data/com.example.hellojni/lib/libhello-jni.so 0x414af318
09-28 13:07:03.179: D/dalvikvm(3562): No JNI_OnLoad found in /data/data/com.example.hellojni/lib/libhello-jni.so 0x414af318, skipping init
09-28 13:07:03.265: V/TabletStatusBar(1715): setLightsOn(true)
09-28 13:07:03.328: I/ActivityManager(1650): Displayed com.example.hellojni/.HelloJni: +279ms
09-28 13:07:07.078: E/ThrottleService(1650): problem during onPollAlarm: java.lang.IllegalStateException: problem parsing stats: java.io.FileNotFoundException: /proc/net/xt_qtaguid/iface_stat_all: open failed: ENOENT (No such file or directory) 
```

我已将 log.redirect-stdio 设置为 true，以便我可以在 LogCat 中看到 Hello 行。

有人知道如何完成这项工作吗？谢谢。

更清楚地说，我想做的是在标准输出中查看我的输出。没有问题，我只是想知道我是否可以输出到stdout。感谢谁提供了解决方案__android_log_print。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T11:41:36.427

**安卓工作室**

如果您使用 Android Studio 和 gradle，它会忽略 Android.mk。将此添加到您的 build.gradle 文件中：

```
android {
    defaultConfig {
        ndk {
            moduleName "your_module_name"
            ldLibs "log"
        }
    }
} 
```

**蚀**

你需要添加`LOCAL_LDLIBS := -L$(SYSROOT)/usr/lib -llog`到你的 Android.mk 文件..

你只需要定义你自己的辅助宏，像这样......

```
#include <android/log.h>

#define LOGV(TAG,...) __android_log_print(ANDROID_LOG_VERBOSE, TAG,__VA_ARGS__)
#define LOGD(TAG,...) __android_log_print(ANDROID_LOG_DEBUG  , TAG,__VA_ARGS__)
#define LOGI(TAG,...) __android_log_print(ANDROID_LOG_INFO   , TAG,__VA_ARGS__)
#define LOGW(TAG,...) __android_log_print(ANDROID_LOG_WARN   , TAG,__VA_ARGS__)
#define LOGE(TAG,...) __android_log_print(ANDROID_LOG_ERROR  , TAG,__VA_ARGS__) 
```

效果很好。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-28T11:38:03.513

使用 Android 日志功能：

```
#include <android/log.h>
.... 
__android_log_print(ANDROID_LOG_VERBOSE, "MyApp", "The value of n is %d", n); 
```

^([请注意在编辑问题后阅读此内容的人：问题最初并未指定 OP 不想使用 <android/log.h> 中的函数。])

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-28T11:40:04.813

要通过本机代码打印到 Logcat，您必须使用 Android 的本机 Logger。

它是这样的：

```
#include <jni.h>
#include <android/log.h>

#define  LOGD(...)  __android_log_print(ANDROID_LOG_DEBUG,DEBUG_TAG,__VA_ARGS__)
#define  LOGI(...)  __android_log_print(ANDROID_LOG_INFO,DEBUG_TAG,__VA_ARGS__) 
```

你在你的函数中使用它：

```
LOGD("hello"); 
```

为了使它工作，您必须将本机 LOG 添加到您的编译中：（Android.mk）

```
LOCAL_LDLIBS :=  -llog 
```

# multithreading - 每核缓存和线程池

> ID：12639052
> 
> 赞同：1
> 
> 时间：2012-09-28T11:22:07.973
> 
> 标签：multithreading, performance, threadpool, cpu-cache

给定（特别是）以下场景：

*   每个核心一个线程，
*   每个核心都有自己独特的缓存，
*   缓存命中/未命中率对良好性能至关重要的程序（即今天的大多数程序）

我经常阅读有关线程池在多核系统中调度工作的好处。尽管有许多多线程方法，但通常在像这样的更智能的负载平衡方法和更天真的“按任务类型分配线程”方法之间进行比较，假设负载平衡已在开发时，而不是由系统本身在运行时。这方面的一个例子可能是一个线程上的专用数字运算和另一个线程上的渲染任务。

*在我看来，在上述条件下，逐个任务类型的方法可以带来更好的性能，因为该内核的本地缓存对于分配给它的特定任务*会更有效率？（假设等待不是什么大问题，即两个线程都在全速运行或接近全速运行。）

我还想知道线程安全机制在负载平衡与幼稚方法中可能会对性能产生什么影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:50:57.170

> 在我看来，在上述条件下，逐个任务类型的方法可能会带来更好的性能，因为该内核的本地缓存对于分配给它的特定任务会更有效率

线程编程最大的性能提升*不*在于分叉的任务类型，而在于其操作的*异步程度。*如果任务与共享资源密切相关，这意味着它必须经常锁定和同步内存，那么您将无法获得单独处理器上缓存内存的好处。

**编辑：**我现在知道你要去哪里尼克。*根据定义*，负载平衡系统从一些常见的任务队列中消费，因此可能有更多的同步点。但是，不同的任务可能正在处理数据库或写入文件系统并阻塞其他阻碍其异步运行能力的资源。即使负载平衡方法可能需要更多同步，它也可能是显着提高应用程序吞吐量的最简单方法。

> 我还想知道线程安全机制在负载平衡与幼稚方法中可能会对性能产生什么影响。

对。这是关键点。线程安全意味着同步或其他锁定以及将脏内存写入中央存储，并使已被其他线程更新的高速缓存内存无效。线程任务执行此类操作的次数越多，其性能受到的影响就越大。

同样，这不一定与任务类型、负载平衡与任务类型有关，而是与执行任务所需的代码细节有关。

最后，重要的是要意识到，对于大多数线程程序，您将拥有比 CPU/内核更多的线程——尤其是考虑到经常有后台 GC、终结器和其他 VM 线程（假设您在 VM 上）竞争 CPU资源。这使得优化线程程序以利用线程与 CPU 的亲和性变得更加困难，这似乎暗示了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:43:01.943

> 在我看来，在上述条件下，逐个任务类型的方法可以带来更好的性能 [...]

您似乎在这里将苹果与橙子进行了比较。显然，如果您有几个不同的任务，它们是独立的并且具有不同的执行模式，那么为每个此类任务类型启动一个线程是最好的方法。线程池不适合这种工作，它们用于相同的任务，不关心哪个线程执行它们，这是它们最大的优势。

现在，您必须区分应用程序级别的线程池和操作系统级别的线程池。在应用程序级别，您希望线程匿名执行任务以确保负载平衡。这是完全可取的。但是在操作系统级别，线程被映射到内核，但是操作系统通常在执行期间将它们保留在初始内核上，即由于缓存问题，内核负载平衡不如应用程序负载平衡那么激进。

# php - jquery - 与 javascript 变量斗争

> ID：12639053
> 
> 赞同：0
> 
> 时间：2012-09-28T11:22:08.117
> 
> 标签：php, jquery

我在使用 Jquery 函数时遇到了一些困难。由于我对语言非常不确定，我想知道是否有人可以提供帮助。

```
$('.editableWC').editable('<?php echo base_url();?>ratesheet/editrowwendCall/<?=$editable['url'];?>/', 
        {
        callback: function(value){
            $(this).data('bgcolor', $(this).css('background-color'));
            if(value == this.revert)
                {                                                                            
                $(this).animate({ backgroundColor: "red", color: "white" }, 400);
                $(this).animate({ backgroundColor: $(this).data('bgcolor'), color: "black" }, 400);
                }
            else
                {                                                                               
                $(this).animate({ backgroundColor: "green", color: "white" }, 400);
                $(this).animate({ backgroundColor: $(this).data('bgcolor'), color: "black" }, 400);
                }
             }, 
         name : 'value',
         style : 'display:inline; position:relative; right:120px;',
         width : '100px',
         height: '16px',
         onblur : 'submit' 
     }); 
```

这是我的代码。它只是在 php 验证中检查发布的项目，如果不符合验证，则返回原始值，如果符合，则返回新值。

因此，代码应该查看返回值是否与原始值相同，如果没有变化，则显示红色表示不成功，或绿色表示成功（如果值不同）。绿色确实有效，但是它无法识别回传的原始值与 this.revert 值相同。

这段代码发生的情况是，如果值不变 = 绿色，如果值改变并且满足验证 = 绿色，如果值改变，不满足验证 = 根本没有动画。当它想要闪烁红色时。

我将不胜感激任何帮助，因为在涉及 javascript 时我完全不了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:27:11.507

尝试这个：

```
$('.editableWC').editable('<?php echo base_url();?>ratesheet/editrowwendCall/<?=$editable['url'];?>/', 
    {
    that:this,
    callback: function(value){
        $(this.that).data('bgcolor', $(this.that).css('background-color'));
        if(value == this.that.revert)
            {                                                                            
            $(this.that).animate({ backgroundColor: "red", color: "white" }, 400);
            $(this.that).animate({ backgroundColor: $(this.that).data('bgcolor'), color: "black" }, 400);
            }
        else
            {                                                                               
            $(this.that).animate({ backgroundColor: "green", color: "white" }, 400);
            $(this.that).animate({ backgroundColor: $(this.that).data('bgcolor'), color: "black" }, 400);
            }
         }, 
     name : 'value',
     style : 'display:inline; position:relative; right:120px;',
     width : '100px',
     height: '16px',
     onblur : 'submit' 
 }); 
```

# objective-c - 为什么 Objective-C 中的 id 类型省略了星号？

> ID：12639055
> 
> 赞同：6
> 
> 时间：2012-09-28T11:22:09.490
> 
> 标签：objective-c

我对 Objective-C`id`类型的理解是它是一个指向未知类型对象的指针。在我看来，它就像 Objective-C 类的 void* ，顶部有一些编译器糖，用于类型检查之类的东西。我的问题是为什么它`id*`不是`id`then ，因为它是指针类型？如果这是 Java 或 C#，其中没有使用 an 声明对象引用，`*`那么我就不会那么惊讶了。但是在 Objective-C 中，每个类都被 C 风格的指针引用，那么为什么要隐藏`*`未知对象类型呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T11:26:18.777

`id typedef`已经是一个指针：

```
typedef struct objc_object {
    Class isa;
} *id; 
```

来自[Objective-C 编程语言](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW3)：

> 在 Objective-C 中，对象标识符是一种不同的数据类型：`id`. 这种类型是任何类型的对象的通用类型，无论类如何，并且可以用于类的实例和类对象本身。
> 
> ```
> id anObject; 
> ```
> 
> 对于 Objective-C 的面向对象构造，例如方法返回值，id 替换 int 作为默认数据类型。（对于严格的 C 构造，例如函数返回值，int 仍然是默认类型。）
> 
> 关键字nil被定义为一个空对象，一个值为0的id。id、nil以及Objective-C的其他基本类型在头文件objc/objc.h中定义。
> 
> id 被定义为指向对象数据结构的指针：

```
typedef struct objc_object {
    Class isa;
} *id; 
```

> 因此，每个对象都有一个 isa 变量，告诉它它是什么类的实例。由于 Class 类型本身定义为指针：
> 
> ```
> typedef struct objc_class *Class; 
> ```
> 
> 该`isa`变量通常被称为“isa 指针”。</p>

# css - 使用 CSS 更改悬停时 img 标签的图像

> ID：12639062
> 
> 赞同：1
> 
> 时间：2012-09-28T11:22:47.677
> 
> 标签：css, image, html-table

我有一个图像菜单。我想在链接激活时更改`image`into表。`TD`

```
<table width="100%">
    <tr>
        <td align="left">
            <a href="http://pinkmodels.16mb.com/">
                <img src="http://i.imgur.com/jO3ni.jpg">
            </a>
        </td>
        <td align="center">
            <a href="http://pinkmodels.16mb.com/models/">
                <img src="http://i.imgur.com/utKcC.jpg">
            </a>
        </td>
        <td align="center">
            <a href="http://pinkmodels.16mb.com/blog/">
                <img src="http://i.imgur.com/h4JGE.jpg">
            </a>
        </td>
        <td align="center">
            <a href="http://pinkmodels.16mb.com/about/">
                <img src="http://i.imgur.com/M2GE8.jpg">
            </a>
        </td>
        <td align="right">
            <a href="http://pinkmodels.16mb.com/contact/">
                <img src="http://i.imgur.com/bWoe3.jpg">
            </a>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T11:27:39.307

而不是在你的 CSS 文件中使用`<img>`标签使用属性。`background-image`

例如，

```
table td a{
    display: block;
    background-image:url('FirstImageURL');
    /* other background properties like "background-size", if needed */
}

table td a:active{
    background-image:url('SecondImageURL');
} 
```

**要不然**

[**您可以使用content**](https://developer.mozilla.org/en-US/docs/Web/CSS/content) css 属性更改图像：（*适用于 chrome*）

```
.className { /* or "img" */
    content:url('ImagePathURL');
} 
```

[**工作小提琴**](http://jsfiddle.net/venkateshwar/MzP2X/4/)。

您可以通过为每个`img`标签分配唯一的类（或 ID）来完成上述操作。或者将`:first-child`and`:last-child`选择器与`+`（*兄弟*）选择器结合使用。像这样的东西：

```
table > img:first-child{ /* css properties */ }                     /* first  child */
table > img:first-child + img{ /* css properties */ }               /* second child */
table > img:first-child + img + img { /* css properties */ }        /* third  child */
table > img:first-child + img + img + img { /* css properties */ }  /* fourth child */
table > img:last-child { /* css properties */ }                     /* fifth  child */ 
```

有关更多信息，请查看此[链接](https://stackoverflow.com/q/2182716/1577396)。

我希望您了解 CSS，因为您没有在代码中的任何地方使用过 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:32:12.290

```
a:visited img ,a:active img
{
content:url('change img link as you want);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:32:31.870

两种选择：

## JavaScript 解决方案：

```
var links = document.getElementsByTagName("a");
var n = links.length;
for(var i = 0; i < n; i ++) {
    var cur = links[i];
    if(cur.getAttribute("href") == window.location) {
        cur.parentNode.childNodes[1].src = "http://i.imgur.com/newimagesrc.png";
    }
} 
```

## 纯 CSS 解决方案：

不使用`img`标签，而是使用 a`div`和 a `background-image`，HTML 看起来像：

```
<table width="100%">
    <tr>
        <td align="left"><a href="http://pinkmodels.16mb.com/">
            <div class = "image first"></div>
        </a></td> 
```

CSS：

```
a:active > .image.first {
     background-image: url(newimageurl.png);
} 
```

# backbone.js - Backbone - 如何针对涉及重复模型的情况进行设计

> ID：12639063
> 
> 赞同：2
> 
> 时间：2012-09-28T11:22:52.797
> 
> 标签：backbone.js

使用这个假设的应用程序，您可以在其中查看社交网络上所有朋友的联系信息。

搜索一位朋友，结果中会显示一张联系人卡片。在联系人卡片中是朋友的名字，但也链接到他们所有的朋友。如果您单击其中一个链接，则相关的联系人卡片会附加到结果中。这使您可以钻取。

通常只需创建一个朋友集合和一个关联的 resultsView 来编排就足够了。每个模型都可以将一个实例保存到自己的视图中。但在这种情况下，可能会引入重复模型。IE。

Adam to=> Paul back_to=> Adam（由于互惠友谊，adam 将出现在 pauls 好友列表中）。

也许我试图将视觉设计强加到模型集合上，但集合确实提供了开箱即用的事件（这对于处理从结果中添加和删除卡片非常有用）。我可能想多了，但因为我在骨干网相当新手无法弄清楚。

这里最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T15:42:32.847

你可以看看[Pathable 的超模](http://pathable.github.com/supermodel/)或[Backbone-Relational](https://github.com/PaulUithol/Backbone-relational)。

两者都是 Backbone 中模型/收集系统的混合/附加组件，以防止重复数据（我相信）您所描述的方式。

我更喜欢超模，因为从 API 的角度来看，它感觉更干净一些。

# vba - 在 Sharepoint 站点中发布 Excel 工作簿

> ID：12639071
> 
> 赞同：4
> 
> 时间：2012-09-28T11:23:19.043
> 
> 标签：vba, excel, sharepoint-2007, adfs

我有一个 Excel 工作簿，我需要使用 Excel VBA 在 SharePoint 网站中发布它。所以我使用以下代码在模块中创建了一个方法：

```
Private sc_Lists As SoapClient30

Public c_WSDL_URL As String

Private Const c_SERVICE As String = "Lists"

Private Const c_PORT As String = "ListsSoap"

Private Const c_SERVICE_NAMESPACE As String = "http://schemas.microsoft.com/sharepoint/soap/"

Private Sub Class_Initialize()

    Dim str_WSML As String
    str_WSML = ""
    Set sc_Lists = New SoapClient30
    c_WSDL_URL = glb_URL

    sc_Lists.MSSoapInit2 c_WSDL_URL, str_WSML, c_SERVICE, c_PORT, c_SERVICE_NAMESPACE

    sc_Lists.ConnectorProperty("WinHTTPAuthScheme") = &H1
    sc_Lists.ConnectorProperty("UseSSL") = True
    sc_Lists.ConnectorProperty("AuthUser") = "username"
    sc_Lists.ConnectorProperty("AuthPassword") = "pass"

End Sub 
```

问题是当我打开 excel 文档并尝试发布它时，它会询问我的 SharePoint 网站的凭据，即使我已经在代码中提供了它们，如上所示。我需要的是防止在发布时询问凭据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-05T03:32:59.680

我在尝试使用 VBA 推送到 SP 时遇到了身份验证问题；它简直是脆弱和挑剔。我在工作中使用的一种解决方案是将 SP 站点映射为网络驱动器并直接保存文件[（就像在这个 UC 教程中一样）](https://answers.uchicago.edu/page.php?id=32514)，从而避免了这个问题。

# gridview - 通过 ExtJS 中的内容设置大小“gridcolumn”

> ID：12639073
> 
> 赞同：0
> 
> 时间：2012-09-28T11:23:21.430
> 
> 标签：gridview, extjs

我有一个带有列的gridview。这里的例子：

```
 {
     xtype: 'gridcolumn',
     header: '№',                   
     dataIndex: 'number'
 }, 
```

有没有办法**按内容**自动调整列大小？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:31:57.193

是的，只需使用 flex 属性。

例子：

```
column1 flex: 1  column2: flex: 1

|-----Column 1-----|-----Column 2-----|

column1 flex: 2  column2: flex: 1

|--------Column 1--------|--Column 2--| 
```

# cognos - 如何在 cognos 的渐进图中显示每个自己的条形值？

> ID：12639076
> 
> 赞同：-1
> 
> 时间：2012-09-28T11:23:30.120
> 
> 标签：cognos, cognos-8, cognos-bi

我完全说出了我想在标题中问什么？如何在渐进图表上显示每个自己的条形值。我不想显示总值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:11:52.453

我假设您使用的是 8.X 图表和新的 10.X 图表。
您可以使用图表的 Values 属性并将其设置为 Show: ![值属性](../Images/04f5410c6f8672abc7ae678c0d59712d.png)。

运行报告时，类别的值将显示在其 bat 中。像这样： ![在此处输入图像描述](../Images/882c8e640bdb68faf13e47d375f7b78f.png)

# c++ - 通过指针访问 C 中 4d 数组中的元素

> ID：12639083
> 
> 赞同：1
> 
> 时间：2012-09-28T11:23:54.763
> 
> 标签：c++, c, arrays

我在声明指向我的 4d 数组的指针时遇到问题。

我已经这样声明了：

```
int matrix[7][4][5][5] =
{
  {/* Section 1 */
    {
      /* 1st */
      {0,0,1,0,0},
      {0,0,1,0,0},
      {0,0,1,0,0},
      {0,0,0,0,0},
      {0,0,0,1,0}
    },
    {
     /* 2nd */
      {0,0,0,0,0},
      {0,0,0,0,0},
      {1,0,0,1,1},
      {0,0,0,0,0},
      {0,0,0,0,0}
    },
    . . . 
  }/* End Section 1 */
} 
```

我希望能够打印出评论下方二维数组中的元素`/* 2nd */`。

我有一些代码可以像这样循环遍历二维数组：

```
for(int i = 0; i < 5; i++)
  {
    for(int j=0; j<5; j++)
    {
      std::cout << " " << pMatrixPtr[i][j];
    }
    std::cout << "\n";
  } 
```

但我的问题是 - 我不知道将 pMatrixPtr 设置为什么，或者它应该是什么类型（我的意思是指针的级别......应该是`**`什么？）。我尝试的任何东西似乎都无法编译，我认为这是因为我不完全了解所涉及的类型。

谁能解释如何通过指针访问 4d 数组，以及该指针应该指向什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:39:08.357

如果要打印仅在注释 / *2nd* / 下的内容，则可以手动选择前两个数组块并为后两个块应用循环，例如...

```
for(int i=0;i<5;i++)
{
   for(int j=0;j<5;j++)
   {
      std::cout<<" "<<matrix[7][1][i][j];
   }
   std::cout<<"\n";
} 
```

使用指针会使它变得复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T11:55:43.003

```
int (*pMatrixPointer)[5] = matrix[0][1]; 
```

将设置`pMatrixPointer`为指向中的第二个二维数组`matrix`。然后，您将在上面的代码中使用它：

```
for(int i = 0; i < 5; i++)
{
  for(int j=0; j<5; j++)
  {
    std::cout << " " << pMatrixPtr[i][j];
  }
  std::cout << "\n";
} 
```

为什么这样有效：

在大多数情况下，数组类型的表达式将被转换为指针类型的表达式，并且表达式的值将是数组中第一个元素的地址（对于 C 和 C++ 都是如此）。

*表达式* 的`matrix[0][1]`类型为“5 元素数组的 5 元素数组`int`”；根据上面的规则，表达式被转换为类型“指向 5 元素数组的指针`int`” ( `int (*)[5]`) 并且值为`&matrix[0][1]`.

表达式`a[i]`等价于`*(a + i)`; 下标操作中有一个隐式取消引用。So`pMatrix[i]`等价于`*(pMatrix + i)`，它产生一个指针值，我们用`j`, as进一步偏移`*(*(pMatriux + i) + j)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:49:54.030

指向 4D 数组的指针不是很容易从头开始定义也不可读，我总是使用 typedefs 来帮助：

```
 typedef int MATRIX_1D[5]; // 5 element array of int
  typedef int* MATRIX_1D_PTR; // pointer to int array
  typedef MATRIX_1D MATRIX_2D[5]; // 5 element array of 5 element array of int
  typedef MATRIX_1D* MATRIX_2D_PTR; // pointer to array of 5 element array of int
  typedef MATRIX_2D MATRIX_3D[4]; // 4 el. arr. of 5 el. arr. of 5 el. arr. of int
  typedef MATRIX_2D* MATRIX_3D_PTR; // pointer to arr. of 5 el. arr. of 5 el. ...
  typedef MATRIX_3D MATRIX_4D[7]; // 7 el. arr. of 4 el. arr. of 5 el. arr. of 5...
  typedef MATRIX_3D* MATRIX_4D_PTR; // pointer to array of 4 element array of ... 
```

所以对于你的情况：

```
MATRIX_2D_PTR pMatrixPtr = matrix[0][0];    
for(int i = 0; i < 5; i++)
  {
    for(int j=0; j<5; j++)
    {
      std::cout << " " << pMatrixPtr[i][j];
    }
    std::cout << "\n";
  } 
```

如您所见`pMatrixPtr`，它是指向由 5 个 int 类型元素组成的数组的指针。这就是我定义`MATRIX_2D_PTR`类型的方式。

作为奖励答案 - 如何迭代整个矩阵的方式：

```
 void printMatrix(MATRIX_4D_PTR* p)
  {
    for (int i1 = 0; i1 < 7; ++i1)
     for (int i2 = 0; i2 < 4; ++i2)
      for (int i3 = 0; i3 < 5; ++i3)
       for (int i4 = 0; i4 < 5; ++i4)
        std::cout << p[i1][i2][i3][i4] << std::endl;
  }
  int main() { printMatrix(matrix); } 
```

# drupal - 未定义的属性：stdclass

> ID：12639085
> 
> 赞同：0
> 
> 时间：2012-09-28T11:24:03.990
> 
> 标签：drupal, error-handling

我不断有这个错误，我无法解决它。这个错误是什么意思？？我应该删除徽章模块还是编辑一些模块。

注意：未定义的属性：user_badges_block_view() 中的 stdClass::$badges_all （/home/dev_yasglobal/drupal.pk/drupal/sites/all/modules/user_badges/user_badges.module 的第 1347 行）。警告：为 user_badges_block_view() 中的 foreach() 提供的参数无效（/home/dev_yasglobal/drupal.pk/drupal/sites/all/modules/user_badges/user_badges.module 的第 1350 行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:36:59.503

在开发有问题的代码时，通常会因为非关键问题而显示通知。最好搜索问题提示以防此问题已经存在（例如您的情况 [http://drupal.org/node/931604]）并与维护者跟进。这可能与 D6 和 PHP 5.3.x 或类似版本之间的模块不兼容有关。

# objective-c - iphone UiImage 不规则裁剪 - JIGSAW 拼图

> ID：12639089
> 
> 赞同：1
> 
> 时间：2012-09-28T11:24:31.850
> 
> 标签：objective-c, iphone, uiimageview, uiimage

正在为 iphone 开发拼图游戏。在这里，我已经完成了足够的谷歌搜索，但我找不到任何关于**如何在不规则形状中裁剪 uiimage 的**想法和代码。例如，请检查以下 URL。

[http://www.jigzone.com/puzzles/AA055D504773?z=1](http://www.jigzone.com/puzzles/AA055D504773?z=1)

如果有任何示例代码和建议将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:32:16.987

使用`bezier paths`您可以创建`path`您喜欢的任何形状并将其应用为`clipping path`图像的一部分，因此如果您将结果放入另一个具有透明背景的图像中，您将创建一个拼图。您必须想出一种方法来创建许多组合在一起的部分，但这当然是您的应用程序的全部意义所在，所以我认为您自己解决这个问题是公平的 :)

# php - php memory_get_usage(true) vs top %MEM

> ID：12639090
> 
> 赞同：7
> 
> 时间：2012-09-28T11:24:32.213
> 
> 标签：php, memory, memory-management, memory-leaks

我有一个脚本，用 PHP 编写，使用 AWS Dynamo PHP API。它运行一个长循环，从发电机中提取大量数据，然后对其进行处理。

当我使用“top”查看进程时，我可以看到“php”进程使用的内存使用情况

在我的脚本循环中，我打印 memory_get_usage(true) 的结果

当我运行测试时，这两个值甚至都不相似......

他们应该是吗？如果不是为什么不呢？

在我的测试中，我有一个 1.7gb 内存的服务器，我将 php.ini 的 memory_limit 设置为 64M。我还在脚本开始时调用 gc_enable()，并在每个循环之间调用 gc_collect_cycles()，希望强制进行垃圾回收。

当我使用 'top' 观看我的 php 脚本时，我可以看到 %MEM 不断上升，直到它最终超过 95% 并且 linux 杀死了 php 进程，我通过查看 'dmesg' 知道这一点。当我查看循环每次迭代的打印输出时，memory_get_usage(true) 报告的内存使用量永远不会超过 50mb。

Linux 认为脚本使用了将近 1.7gb，php 认为它只使用了 50mb！

怎么回事？

即使脚本有内存泄漏，我也不明白为什么 memory_get_usage(true) 不考虑内存...

## 更新

在花了一些时间注释掉我在循环中运行的处理的各个部分后，我发现如果我删除以下代码：

```
class cMyClass {
    public static function static_cmp_fn(&$a, &$b) {
        if ($a['att'] == $b['att']) { return 0; }
        $ret = ($a['att'] < $b['att']) ? -1 : +1;
        return $ret;
    }
    function DoProcessing(){
        $sort_fn = array("cMyClass", "static_cmp_fn");
        usort($this->m_dictToSort, $sort_fn); 
        unset($sort_fn);
    }

} 
```

php 永远不会吃掉所有的系统内存。在我看来，usort 正在泄漏内存，我不知道为什么。我不明白的是为什么 PHP 报告有关它正在使用多少内存的错误信息......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:40:55.993

> 在花了一些时间注释掉我在循环中运行的处理的各个部分后，我发现如果我删除以下代码：

```
$sort_fn = array("cMyClass", "static_cmp_fn");
usort($this->m_dictToSort, $sort_fn); 
```

> php 永远不会吃掉所有的系统内存。在我看来，usort 正在泄漏内存，我不知道为什么。

显然是的。参见手册：

[http://php.net/manual/en/function.usort.php](http://php.net/manual/en/function.usort.php)

“这里有几个例子提倡使用 'create_function' 进行排序，由于 usort 的限制，这很容易使用。但要注意这种方法 -**创建的函数不会在排序例程结束时被释放**，这会创建内存泄漏。因此，可能永远不应该使用这种方法。

该`array()`方法似乎做了类似的事情。您可以声明一个在外部调用您的方法的包装函数，也许？

**更新**

试图建立一个小测试用例来看看会发生什么。到目前为止，我无法重现泄漏；也许有更多关于什么是结构`static_cmp_fn()`和结构的数据`m_dictToSort`。一个简单的比较不会触发任何奇怪的事情。也不会在循环内分配字符串、数组或对象。垃圾收集器将它们杀死并且内存保持在低位。

我会通过调用*另一个*根本不排序的函数或进行非常基本的排序来进一步限制问题，以查看问题是否在于`usort`它的可调用函数做一些有趣的事情，正如我所想的那样（它似乎没有，我错了）或者比较函数内部发生了一些有趣的事情。

# android - 当屏幕上出现“触摸光束”时尝试执行点击

> ID：12639095
> 
> 赞同：0
> 
> 时间：2012-09-28T11:24:53.530
> 
> 标签：android, nfc

现在我正在尝试一些测试来擦除 NFC android 共享中的实际“触摸到光束”，我尝试了很多东西，比如控制“触摸时”返回 false，使用带有计时器的线程来启动点击活动......什么都没有，这不是响应。

有些人有什么疯狂的想法来完成这项任务？无需破解固件。我可以尝试获取屏幕上的所有视图，并尝试找出执行点击的视图吗？！

我花了几天时间进行测试，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:04:03.557

好吧，我才刚刚开始......但是“触摸到光束”屏幕是另一个活动，一个外部活动，所以你不能实现任何方法来控制这个活动中的 onTouch 事件超出你的控制......

我也在考虑如何跳过这个“触摸到光束”……暂时没有结果！

# cmd - 如何通过cmd删除文件夹而不是文件夹中的文件

> ID：12639100
> 
> 赞同：0
> 
> 时间：2012-09-28T11:25:35.117
> 
> 标签：cmd, dos, rm, rmdir

如何删除文件夹而不是文件夹中的文件`cmd`？

比如，有一个目录：

```
c:\image\1.png
c:\image\2.png
c:\image\3.png
c:\image\*.png
c:\image\folder1\*.png
c:\image\folder2\*.png
.... 
```

现在我不知道如何删除所有文件夹（和子文件）`folder1`，... ” ，`folder2`只保留文件`1.png`，，，，`2.png`...`3.png``4.png`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:35:57.950

```
for /d %F in (c:\image\*) do rd /s /q "%F" 
```

如果在批处理文件中使用，则将百分比加倍

# php - 使用 facebook 应用程序创建 facebook 事件

> ID：12639106
> 
> 赞同：0
> 
> 时间：2012-09-28T11:25:50.137
> 
> 标签：php, facebook

如何使用 facebook 应用程序创建 facebook 事件？此外，我想为此目的使用graph api，请帮助我...

```
$access_token = 'app_access_token';
$url = "https://graph.facebook.com/app_id/events";
$postdata = "access_token=$access_token&name=$name&start_time=$start_time&end_time=$end_time&description=$description&privacy=$privacy&location=$location&picture=$picture_source";             
$event_code = curl_sending_newsfeed_facebook($url, $postdata); 
```

我已经完成了事件的创建，但没有显示事件的图片（我的意思是图片代表事件的面貌）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:48:55.140

尝试做这样的事情，

```
$fb = new Facebook(array(
    'appId' => YOUR_APP_ID,
    'secret' => YOUR_APP_SECRET,
    'cookie' => false,
    'fileUpload' => true
));
$imageFile = realpath('/path/to/your/example.jpg');
$eventInfo = array(
    'name' => 'some title',
    'start_time' => time()+32400,
    'description' => 'some description',
    basename($file) => '@'.$imageFile    
);
$result = $fb->api(
    '/'.$app_id.'/events',
    'post',
    $eventInfo
);
echo 'Created event #'.$result['id']; 
```

# perl - Catalyst：如何声明一个全局子程序

> ID：12639108
> 
> 赞同：3
> 
> 时间：2012-09-28T11:25:53.747
> 
> 标签：perl, web-applications, dry, catalyst, subroutine

嗨，我不想在控制器中重复相同的代码，所以我在主 MyApp 包中创建了一个子：

```
sub do_stuff {
    my $input = shift;

    do something
} 
```

但后来我想在控制器中使用它`MyApp::Controller::Foo`

```
sub test : Chained('base') Args(0) {
    my ($self, $c) = @_;

    my $test = do_stuff($c->request->params->{s});

    do something more
} 
```

我收到以下错误：

> 在 MyApp::Controller::Foo->test 中捕获异常“未定义的子例程 &MyApp::Controller::Foo::do_stuff 在 /home/student/workspace/MyApp/script/../lib/MyApp/Controller/Foo 调用。下午第 24 行，第 1000 行。”

**我如何创建一个子程序/函数以在所有催化剂控制器中使用全局？？？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:35:14.943

原则上，它已经在您的 main 使用的所有模块中可用`MyApp`。

但如果它是在主包中定义的，则必须从该命名空间（`main`或您的`MyApp`命名空间）中调用它，或者将其导入当前的包命名空间。

根据定义的位置，使用其中一种方式。

```
my $test = main::do_stuff($c->request->params->{s});
my $test = MyApp::do_stuff($c->request->params->{s}); 
```

另一种方法是将其导入每个包中的命名空间。

```
package MyApp::Controller::Foo;
if (defined &MyApp::do_stuff) {
  *do_stuff = *MyApp::do_stuff;
} 
```

[`defined`](http://perldoc.perl.org/functions/defined.html)可以检查是否存在子程序。

* * *

另一方面，也许这个`do_stuff`sub 最好放在另一个具有[Exporter](https://metacpan.org/module/Exporter)的模块中。您可以在所有需要它的控制器或其他模块中使用它，Exporter 会自行将其导入您的命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T14:44:51.427

在 Catalyst 中传递给大多数方法的上下文对象 ( `$c`) 已经是一个类型的对象`MyApp`，所以如果你说

```
$c->do_stuff($c->request->params->{s}) 
```

和调用一样

```
MyApp::do_stuff($c, $c->request->params->{s}); 
```

如果您希望全局子例程使用此上下文对象，那么您将需要考虑将它们编写为方法（即，包中的子例程，其中第一个参数始终是包的实例）：

```
# to be called like   $c->do_stuff("s")  to do something with form input "s"
sub do_stuff {
    my ($c, $param) = @_;

    ... do something with $c->request->param($param) ...
} 
```

# django - 使用 django-form-b uilder 的高级表单

> ID：12639111
> 
> 赞同：1
> 
> 时间：2012-09-28T11:26:13.823
> 
> 标签：django, django-forms, django-admin

所以，我一直在使用 django-forms-builder 库。现在，我正在处理的用例说，使用管理界面，一旦创建一个表单，询问用户姓名、电子邮件、资格等详细信息。现在，问题是 - 一个用户可以有多个资格，所以要求是显示一个字段，以及一个小的“加号”按钮 - 单击该按钮会显示另一个字段，您可以在其中添加第二个资格。

Django-forms-builder 做了我需要做的所有其他事情——但这是我唯一被卡住的部分。更糟糕的是，我不是一个成熟的 Django 程序员。将不胜感激我能得到的任何指示。

编辑 - 为了澄清，在我的项目中，定义了将通过 Django 管理界面显示给最终用户的表单。然后该表单将显示给最终用户，如果最终用户有任何他/她想要添加的其他资格，将呈现的表单将具有该加号按钮，以添加另一个字段。

# facebook - 在 Facebook 上存储应用程序信息（data.getCookies 和 data.setCookies）

> ID：12639112
> 
> 赞同：0
> 
> 时间：2012-09-28T11:26:15.433
> 
> 标签：facebook, cookies, facebook-javascript-sdk, facebook-rest-api

使用 Facebook API JavaScript SDK 开发 Web 应用程序 我试图在 Facebook 上存储一些应用程序设置，因此即使用户更改了浏览器也可以加载设置。

Facebook API 文档中描述了一些方法`data.getCookies`，`data.setCookies`但它们都不起作用。他们回来了

```
{
  error_code: "3",
  error_msg: "Unknown method"
} 
```

这是我发送的请求：

```
FB.api(
  {
    method: 'data.getCookies'
  },
  function(response) {
    console.log( response )
  }
); 
```

文档中的所有其他方法都可以正常工作，例如：

```
FB.api(
  {
    method: 'friends.get'
  },
  function(response) {
    console.log( response )
  }
); 
```

`uid`返回一个带有s的数组。

方法是否`data.*`已弃用？有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:47:55.970

> Facebook API 文档中描述了 data.getCookies 和 data.setCookies 方法

具体在哪里？

> 但它们都不起作用。

Facebook 最近将 SDK 中的一些方法（在公开可用之前）转换为“私有”方法。

开发人员应仅使用此处描述的方法：[https ://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

**不保证其他一切都**以任何特定方式工作，也不保证如果它现在应该这样做纯粹是偶然的，那么它会继续工作。

# android - ANDROID：将自定义视图添加到网格视图

> ID：12639116
> 
> 赞同：-1
> 
> 时间：2012-09-28T11:26:26.033
> 
> 标签：android

在我的 android 中，我有列表，每个列表项将显示三个 GridView。一个 GridView 显示所有项目及其详细信息，第二个将显示有关该列表的一些操作，然后第三个将显示注销操作。

是否可以实施？如果是，请为我提供实施的最佳方式....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:32:41.897

如果您想在 ListView 中添加网格，您可以更喜欢 GridLayout 而不是网格视图。通过以下 xml 代码自定义您的列表视图项。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/whole_row"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <GridLayout
        android:id="@+id/one"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:columnCount="3"
        android:orientation="horizontal"
>    </GridLayout>
 <GridLayout
        android:id="@+id/two"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:columnCount="3"
        android:orientation="horizontal"
>    </GridLayout>
 <GridLayout
        android:id="@+id/three"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:columnCount="3"
        android:orientation="horizontal"
>    </GridLayout>
</LinearLayout> 
```

# performance - jdbc 批处理性能

> ID：12639118
> 
> 赞同：3
> 
> 时间：2012-09-28T11:26:30.150
> 
> 标签：performance, postgresql, jdbc, batch-file

我正在使用 jdbc 批量更新

```
ps = con.prepareStatement("");
ps.addBatch();
ps.executeBatch(); 
```

但在后台，prostgres 驱动程序似乎将查询逐位发送到数据库。

org.postgresql.core.v3.QueryExecutorImpl:398

```
 for (int i = 0; i < queries.length; ++i)
            {
                V3Query query = (V3Query)queries[i];
                V3ParameterList parameters = (V3ParameterList)parameterLists[i];
                if (parameters == null)
                    parameters = SimpleQuery.NO_PARAMETERS;

                sendQuery(query, parameters, maxRows, fetchSize, flags, trackingHandler);

                if (trackingHandler.hasErrors())
                    break;
            } 
```

有没有可能让他一次发1000个来加快速度？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T23:15:21.903

~~[AFAIK 在fe/be 协议](http://www.postgresql.org/docs/current/static/protocol-overview.html)中没有服务器端批处理，因此 PgJDBC 不能使用它。~~. *更新*：好吧，我错了。*如果不需要获取生成的密钥*，PgJDBC（准确到 9.3）*确实会*向服务器发送批量查询。它只是在发送缓冲区中排队一堆查询，而不在每个单独的查询之后与服务器同步。

 *看：

*   [问题 #15：在返回生成的密钥时启用批处理](https://github.com/pgjdbc/pgjdbc/issues/15)
*   [问题 #195：PgJDBC 不会流水线批处理返回生成的密钥](https://github.com/pgjdbc/pgjdbc/issues/195)

即使在请求生成的密钥时，[扩展查询协议](http://www.postgresql.org/docs/current/static/protocol-overview.html#PROTOCOL-QUERY-CONCEPTS)也用于确保不需要每次都发送查询文本，只需要发送参数。

坦率地说，JDBC 批处理在任何情况下都不是一个很好的解决方案。对于应用程序开发人员来说，它很容易使用，但性能却不是最优的，因为服务器仍然必须单独执行每个语句——尽管只要您使用准备好的语句，就不必单独*解析*和*计划它们。*

如果启用自动提交，性能将非常糟糕，因为每条语句都会触发一次提交。即使关闭自动提交，运行大量小语句也不会特别快，即使您可以消除往返延迟。

许多 simple `UPDATE`s 的更好解决方案是：

*   `COPY`将新数据放入`TEMPORARY`或`UNLOGGED`表中；和
*   使用`UPDATE ... FROM`to`UPDATE`对`JOIN`复制的表

对于 COPY，请参阅[PgJDBC 文档](http://jdbc.postgresql.org/documentation/publicapi/org/postgresql/copy/CopyManager.html#copyIn%28java.lang.String,%20java.io.InputStream%29)和[服务器文档中的](http://www.postgresql.org/docs/current/static/sql-copy.html)[文档`COPY`](http://www.postgresql.org/docs/current/static/sql-copy.html)。

您经常会发现可以进行一些调整，这样您的应用就不必发送所有这些单独`UPDATE`的 s。*

# php - 更新关联数组键

> ID：12639119
> 
> 赞同：1
> 
> 时间：2012-09-28T11:26:36.037
> 
> 标签：php, mysql, sql, web-applications

我在更新多维关联数组的值时遇到问题。该数组`$people`是从另一个 MySQL 调用生成的。With : `array_push($people, array("forename" => $pat_f_name, "surname" => $pat_s_name,"id" => $id));`我设置了`$forname`and `$surname`to `""`，只是为了把钥匙放在那里。

我正在尝试遍历进行 SQL 调用的数组并检索相关的名字和姓氏，然后更新该数组索引处的键。

以下是我迄今为止的尝试。

提前致谢。

```
$stmt = $mysql->stmt_init();

foreach ($people as $person)
{
    if($stmt->prepare("SELECT forename,surname FROM worker WHERE id = ?"))
    {
        $stmt->bind_param('i', $p_id);
        $p_id = $person["id"];
        $stmt->execute();
        $stmt->bind_result($f_name, $s_name);
        while($stmt->fetch())
        {
            $people[$person]["forename"] = $f_name;
            $people[$person]["surname"] = $s_name;

        }
    }
}    

$stmt->close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:53:53.067

$person 是一个数组

```
$p_id = $person["id"]; 
```

这

```
$people[$person]["forename"] = $f_name; 
```

应该输出：

警告：非法偏移类型在 ....

和

```
var_dump($people) 
```

输出

```
array(0) { } 
```

更好的

```
foreach($people as $key => $person)
<your code>

$people[$key]["forename"] = $f_name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:44:15.360

我认为这里的主要问题是您尝试使用 $person 作为索引。要么给你的数组 ($people) 一个适当的索引，要么创建一个全新的数组，在你的 while 循环中用你的新 $persons 填充。

对于索引解决方案，将人员添加到您的数组中，如下所示：

```
$people[$i++] = $person; 
```

对于新数组解决方案，创建一个新数组，然后使用以下命令填充它：

```
$newPeople[] = $person; 
```

# java - GEF 中的 SVG 图像

> ID：12639121
> 
> 赞同：1
> 
> 时间：2012-09-28T11:26:42.763
> 
> 标签：java, svg, swt, eclipse-gef

有没有办法在 GEF 编辑器中显示 SVG 图像？我发现可以将 SVG 图像转换为 SWT 图像，但我需要它是矢量格式，这样当我放大时不会出现质量损失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:18:28.020

根据[这个](http://www.eclipse.org/forums/index.php/m/649266/)站点，您应该可以使用[GMF](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CB4QFjAA&url=http%3A%2F%2Fwww.eclipse.org%2Fgmf%2F&ei=c5VlUOKPDZOr0AWxk4GwCA&usg=AFQjCNFqWldu-gq9AQHt2FdQgXOOIaWXbw&sig2=OcSGeGnltjPFL_AdATa8gA)[`SVGFigure`](http://modeling.eclipse.org/modeling/gmp/gmf-tooling/downloads/drops/2.4.0/N201012171702/eclipse/org.eclipse.gmp/org.eclipse.gmf.tooling/plugins/org.eclipse.gmf.runtime.lite.svg/src/org/eclipse/gmf/runtime/lite/svg/SVGFigure.java)类。

此类不依赖于 GMF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:03:38.063

好的，我终于找到了可行的方法。似乎使用 org.eclipse.gmf.runtime.draw2d.ui.render.figures.ScalableImageFigure 就是答案。ScalableImageFigure 是 Figure 的子类，因此它的工作方式与普通 GEF Figure 类似。您可以在 GMF 的运行时库包中找到它。

使用 ScalableImageFigure 您可以在 GEF 中显示 SVG 图像，但是当您放大时仍然会出现质量损失。要克服这个问题，您需要子类化 ScalableImageFigure 并实现 org.eclipse.gmf.runtime.draw2d.ui.mapmode.IMapMode。当您放大可缩放图形时，将重新绘制，并重新渲染图像。org.eclipse.gmf.runtime.draw2d.ui.mapmode.IMapMode.LPtoDP(Translatable) 将返回要渲染的图像的比例。我没有足够的时间来正确实现这个接口，我只需要检查它是否有效，所以我只是在子类中创建了一个字段（int 名为 scale，默认值为 1），每次调用 LPtoDP 时都会递增

```
 public Translatable LPtoDP(Translatable t) {
  t.performScale(scale++);
  return t; 
```

}

这完全是实验性的，当我将在我们的应用程序中实现此功能时，我将重新审视此问题并发布此接口和类的功能和正确实现。在此之前，我希望这将有助于其他正在研究此类问题的人。

# c# - 如何将日期时间字段值设置为现在

> ID：12639124
> 
> 赞同：2
> 
> 时间：2012-09-28T11:26:54.113
> 
> 标签：c#, sql-server, database, visual-studio, entity-framework

我有带有日期时间字段的模型。

我的代码正在使用模型设置此重置此字段到现在。但是我现在不想“设置”，而是现在“保存”：即如果我设置`field1 = now [0:00:00]`，那么，10s。稍后`field2 = now [0:00:10]`，10 秒。稍后，我执行`SaveChanges()`我希望将两个字段都设置为 0:00:20（节省时间）。

编辑：代码示例：

```
var context = new SomeEntities();
SomeModel model = context.GetSomeModel(...);
// SomeModel has two DateTime fields: dt1 and dt2
model.dt1 = SavingDateTimeNow(); // .... 13:42:00
// some code, i.e. Sleep(TimeSpan.FromSeconds(10));
model.dt2 = SavingDateTimeNow(); // .... 13:42:10
// again 10s. code
context.SaveChanges(); // .... 13:42:20 
```

Edit2：更复杂的例子：

```
var context = new SomeEntities();
SomeModel model = context.GetSomeModel(...);
// SomeModel has two DateTime fields: dt1 and dt2
if(someComplexCondition)model.dt1 = SavingDateTimeNow(); // .... 13:42:00
// some code from which I would know if someOtherComplexCondition is true
if(someOtherComplexCondition)model.dt2 = SavingDateTimeNow(); // .... 13:42:10
// again 10s. code
// much more code here
context.SaveChanges(); // .... 13:42:20 
```

我希望（dt1 和 dt2）都设置为 ... 13:42:20，而不是 13:42:00 和 13:42:10

Edit3：最简单的例子：我希望它像 django 的字段一样工作`auto_now=True`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:48:54.470

啊，所以可能有多个模型已被修改，并且可能需要在保存时设置 DateTime。

在这种情况下，要么将布尔标志（setDt1 和 SetDt2）推送到模型中，然后在您进行更改时将这些模型添加到列表中......或者将元组添加`<model,bool,bool>`到列表中。

查看这个问题[Getting all changes made to an object in the Entity Framework](https://stackoverflow.com/questions/3265257/getting-all-changes-made-to-an-object-in-the-entity-framework)以查看然后循环遍历这些存储模型以查看其修改后的属性的示例。

您可以检查实体的[EntityState](http://msdn.microsoft.com/en-us/library/system.data.entitystate.aspx)以获取已添加的实体

```
var addedStateEntries = Context.ObjectStateManager.GetObjectStateEntries(EntityState.Added); 
```

和已修改的实体

```
var modifiedStateEntries = Context.ObjectStateManager.GetObjectStateEntries(EntityState.Modified); 
```

当您准备好保存并根据需要设置 dt1 或 dt2 时，您可以遍历它们

* * *

`DateTime.Now`如果我理解正确，那么您希望将 dt1 和 dt2 设置为`saveChanges()`

在这种情况下，将您的调用替换`context.SaveChanges()`为对以下方法的调用

```
private void SaveModel(SomeEntities context, SomeModel model bool setDt1, bool setDt2) {
  DateTime instant = DateTime.Now;
  if (SetDt1) { model.dt1 = instant; }
  if (setDt2) { model.dt2 = instant; }
  context.SaveChanges();
} 
```

* * *

所以看看更复杂的例子......一旦我知道是否应该在保存时设置日期，我就会设置一个标志。我已经离开`SavingDateTimeNow()`了，因为我不知道它是否执行其他任务以及将 dt1 设置为 Now

```
var context = new SomeEntities();
SomeModel model = context.GetSomeModel(...);
var setDt1 = false;
var setDt2 = false;

// SomeModel has two DateTime fields: dt1 and dt2
if(someComplexCondition) {
 model.dt1 = SavingDateTimeNow(); // .... 13:42:00
 setDt1 = true;
}
// some code from which I would know if someOtherComplexCondition is true
if(someOtherComplexCondition) {
  model.dt2 = SavingDateTimeNow(); // .... 13:42:10
  setDt2 = true;
}
// again 10s. code
// much more code here
SaveModel(context, model, setDt1, setDt2); // .... 13:42:20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:05:07.417

这不是一个完整的答案，而是需要考虑的一些提示。

1.  您可以在数据库级别设置和处理属性并处理这种`StoreGeneratedPattern`情况`dt1`。`dt2``Computed`
2.  您可以将默认值设置为`getdate()`数据库级别，对于未指定的新记录，`dt`它将设置为现在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:26:16.767

为什么不扩展您的对象模型以包含 SaveDateTime 属性。然后你使用：

```
dt1.SaveDateTime = true; 
```

当您调用 SaveChanges() 时，您会将所有正面标志更新为当前 DateTime（记住之后重置）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T13:29:47.783

我找到了不完美的解决方案（如果您找到更好的解决方案，请在此处发布）。这是完整的文章：[Dave Dunkin 的博客：实体框架的自动时间戳](http://rabblerule.blogspot.com/2008/10/automatic-timestamping-for-entity.html)

这个想法是：

1.  为需要此功能的模型创建接口
2.  实现接口
3.  在 Entity 中创建方法，该方法将遍历所有修改的实体，检查实现接口的实体并修改其日期时间字段（可以通过此接口中的方法完成）
4.  将此方法添加到实体中的 SavingChanges 事件

# ontology - OWL Ontology（给出属性限制）

> ID：12639125
> 
> 赞同：3
> 
> 时间：2012-09-28T11:26:56.487
> 
> 标签：ontology, owl, protege

我目前正在研究 OWL Ontology 我有一个关于财产的问题。

坦率地说，我并没有真正看到对阶级进行财产限制的重要性。

例如，

产品（类）有制造商（属性）一些制造商。

在这种情况下，这意味着一种产品至少有一个制造商。

但是，那为什么不只做对象属性断言

塑料模型（产品的个体）具有制造商（对象属性）DOCOMO（制造商的实例）？

我必须两者都做吗？如果我不做第一件事，推理者说没有问题。为什么我必须两者都做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:48:07.583

财产限制断言关于一组个人的东西，而不仅仅是一个人。考虑属性限制：

```
Every man likes a woman. (i.e. "man subClassOf like some woman") 
```

与属性断言：

```
John likes Mary. (i.e. "{John} subClassOf like some {Mary}") 
```

其中`{John}`和`{Mary}`是具有单个个体的类，但`man`和`woman`是具有0个或更多个体的类。

# jquery - 点击时在 div 中附加 img

> ID：12639136
> 
> 赞同：0
> 
> 时间：2012-09-28T11:27:20.130
> 
> 标签：jquery

```
<a class="imageToAppend" href="img/image.jpg">Click image to show</a>
<a class="imageToAppend" href="img/image1.jpg">Click image to show</a>
<a class="imageToAppend" href="img/image2.jpg">Click image to show</a>

<div class="appendHere"></div> 
```

我想在单击链接时显示图像，链接包含图像的链接。并将图像附加到`div`

我有一个 jQuery 代码，但它显示所有图像，我只想显示单击的链接图像

```
jQuery(window).load(function(){
jQuery(function() {
jQuery('.imageToAppend').click(function(e){
e.preventDefault();
jQuery(".screenshot").prepend('<img src="<?php echo $photo->sourceImageFilePath; ?>" />');
});
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:39:38.467

试试这个

```
$(document).ready(function){
 $('a.imageToAppend').click(function(e){
  var currentLink=$(this);

  $('#appendHere').empty() // remove existing img/html, if added already
  //generate image tag on fly and assign src from current anchor clicked and add to div
  $('<img />').attr("src",$(currentLink).attr("href")).appendTo($('#appendHere'));
  e.preventDefault();

 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:34:57.620

就像 Deepak 提到的那样，您无法在客户端评估 PHP，但是您可以从

尝试这样的事情：

```
jQuery(window).load(function(){
  jQuery('.imageToAppend').click(function(e){
    e.preventDefault();
    var src = $(this).attr('href');   //$this will be the <a> clicked
    jQuery(".screenshot").prepend('<img src="'+src+'"/>');
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:35:53.800

```
$('.imageToAppend').click(function(e){  
    $(".appendHere").append(this);
});​ 
```

[jsFiddle](http://jsfiddle.net/TheJoeFletch/xmt8A/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T11:36:37.573

假设您尝试附加的图像是 href 路径中的图像...

```
$('.imageToAppend').bind('click', function(e) {
    e.preventDefault();
    var url = $(this).attr('rel'),
        el = $('.appendHere');
    el.fadeOut('slow', function(){
        el.empty().text('Loading...').fadeIn().delay('400').fadeOut(function(){
            $(this).empty();
            $('<img src="' + url + '" />').appendTo(el);
            $(this).fadeIn();
        });
    });
});​ 
```

[http://jsfiddle.net/shannonhochkins/TEPKd/](http://jsfiddle.net/shannonhochkins/TEPKd/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T11:37:33.410

试试看

```
$(function(){
    $('.imageToAppend').click(function(e){
        var img = $(this).attr('href');
        $('.appendHere').prepend($('<img/>')
                      .attr('src', img));      
    });
}) 
```

# objective-c - touches end 导致 segue 动画出现问题

> ID：12639137
> 
> 赞同：0
> 
> 时间：2012-09-28T11:27:22.107
> 
> 标签：objective-c, xcode, animation, segue, touch-event

我使用下面的代码进行触摸结束。在移动了一些 uiview 之后，我在我的代码中调用了一个 segue，如下所示： [self performSegueWithIdentifier: @"segueToLevel2" sender: self]

segue 的过渡类型设置为“交叉溶解”。

使用下面的代码，一切正常，直到我达到第 5 级。在第 5 级，当调用 segue 时，它​​会进行角到角翻转而不是交叉溶解，从这一点开始，我的应用程序中的每个 segue 都会进行此翻转而不是什么他们打算这样做。如果我拿出我的触摸结束方法，一切都会按预期工作，所以问题一定就在这里。我只是想不通为什么这适用于 1-4 级，但在 5 级上无效。任何帮助将不胜感激......我在这里失去了理智。

```
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
switch (level) {
    case 1:{

        if ((piece11.hidden == YES) && (piece1moving.hidden == NO) && (piece1placedstate == 0)){
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece1moving.frame = CGRectMake(-65, 153, 490, 422);
            [UIView commitAnimations];
            [NSTimer scheduledTimerWithTimeInterval:3 target:(self) selector:@selector(moveToFront) userInfo:(nil) repeats:NO];
            [NSTimer scheduledTimerWithTimeInterval:1 target:(self) selector:@selector(singlePieceCallback) userInfo:(nil) repeats:NO];   

        }    
    }
        break;
    case 2:{
        UITouch *touch1 = [[event allTouches] anyObject];
        if (([touch1 view] == piece1) && (piece1placedstate == 0)){
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece1.frame = CGRectMake(47, 402, 305, 312);
            [UIView commitAnimations];

        }
        if (([touch1 view] == piece2) && (piece2placedstate == 0)){
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece2.frame = CGRectMake(34, 4, 291, 399);
            [UIView commitAnimations];
        }
    }
        break;
    case 3:{
        UITouch *touch1 = [[event allTouches] anyObject];
        if (([touch1 view] == piece1) && (piece1placedstate == 0)){
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece1.frame = CGRectMake(1, 419, 308, 356);
            [UIView commitAnimations];

        }
        if (([touch1 view] == piece2) && (piece2placedstate == 0)){
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece2.frame = CGRectMake(-7, 67, 291, 315);
            [UIView commitAnimations];

        }
        if (([touch1 view] == piece3) && (piece3placedstate == 0)){
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece3.frame = CGRectMake(-16, 169, 427, 310);
            [UIView commitAnimations];

        }
    }
        break;
    case 4:{
        UITouch *touch1 = [[event allTouches] anyObject];

        if (([touch1 view] == piece1) && (piece1placedstate == 0)){
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece1.frame = CGRectMake(0, 76, 219, 261);
            [UIView commitAnimations];

        }
        if (([touch1 view] == piece2) && (piece2placedstate == 0)){
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece2.frame = CGRectMake(89, 485, 255, 287);
            [UIView commitAnimations];

        }
        if (([touch1 view] == piece3) && (piece3placedstate == 0)){
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece3.frame = CGRectMake(103, 197, 305, 330);
            [UIView commitAnimations];

        }
        if (([touch1 view] == piece4) && (piece4placedstate == 0)){
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece4.frame = CGRectMake(5, 277, 228, 294);

        }

    }
        break;
    case 5:{
        UITouch *touch1 = [[event allTouches] anyObject];
        if (([touch1 view] == piece1) && (piece1placedstate == 0)) {
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece1.frame = CGRectMake(115, 89, 247, 263);
            [UIView commitAnimations];

        }
        if (([touch1 view] == piece2) && (piece2placedstate == 0)) {
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece2.frame = CGRectMake(14, 497, 211, 271);
            [UIView commitAnimations];

        }
        if (([touch1 view] == piece3) && (piece3placedstate == 0)) {
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece3.frame = CGRectMake(92, 248, 244, 272);
            [UIView commitAnimations];

        }
        if (([touch1 view] == piece4) && (piece4placedstate == 0)) {
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece4.frame = CGRectMake(87, 458, 228, 294);

        }
        if (([touch1 view] == piece5) && (piece5placedstate == 0)) {
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            piece5.frame = CGRectMake(-13, 102, 244, 303);

        }
    }
        break;

    default:
        break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:31:19.647

我仍然不确定是什么导致了上述代码出现问题，但我找到了一种解决方案，可以重写我的代码并使用 UIPanGestureRecognizer，如下面的每个部分所附。这在整个过程中都非常有效。

```
- (void) dragGesture5:(UIPanGestureRecognizer *) panGesture {
CGPoint translation = [panGesture translationInView:self.view];

switch (panGesture.state) {
    case UIGestureRecognizerStateBegan:{

        originalCenter = piece5.center;
        [self.view bringSubviewToFront:piece5];

    }
        break;
    case UIGestureRecognizerStateChanged:{

        piece5.center = CGPointMake(piece5.center.x + translation.x,
                                     piece5.center.y + translation.y);
        [self checkColision];

    }
        break;
    case UIGestureRecognizerStateEnded:{            

        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:1.0];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
        piece5.center = originalCenter;
        [UIView commitAnimations];

    }
        break;
    default:
        break;
}

[panGesture setTranslation:CGPointZero inView:self.view];
} 
```

# wpf - 如何更改 WPF TextBlock 中文本和下划线之间的距离？

> ID：12639139
> 
> 赞同：6
> 
> 时间：2012-09-28T11:27:25.110
> 
> 标签：wpf, xaml, textblock, underline

我有一个来自设计师的样式指南，用于一个看起来像超链接的按钮，我正在尝试使用 WPF 样式尽可能接近它。

但我无法改变文本和下划线之间的距离。我想添加图像进行比较，但不幸的是，到目前为止我还没有获得足够的积分。

有没有办法改变文字和下划线之间的距离？

这是我到目前为止的 XAML 代码：

```
<Style x:Key="LinkButton" TargetType="ButtonBase">
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="Cursor" Value="Hand"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ButtonBase">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="&gt; "/>
                    <TextBlock TextDecorations="Underline">
                        <ContentPresenter/>                        
                    </TextBlock>
                </StackPanel>                 
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Foreground" Value="{StaticResource LxGrayBrush}"/>
    <Setter Property="FontSize" Value="12"/>
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="true">
            <Setter Property="Foreground" Value="{StaticResource LxGreenBrush}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T22:52:37.943

使用[元素语法](http://msdn.microsoft.com/en-us/library/ms788723.aspx#property_element_syntax)将 的实例添加[`TextDecoration`](http://msdn.microsoft.com/en-us/library/system.windows.textdecoration.aspx)到[`TextBlock.TextDecorations`](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.textdecorations.aspx)，然后您可以调整[`Location`](http://msdn.microsoft.com/en-us/library/system.windows.textdecoration.location.aspx)或[`PenOffset`](http://msdn.microsoft.com/en-us/library/system.windows.textdecoration.penoffset.aspx)。

```
<TextBlock>
    <TextBlock.TextDecorations>
        <TextDecoration Pen="..." Location="..."/>
    </TextBlock.TextDecorations>
</TextBlock> 
```

（您可能还需要设置`Pen`via 元素语法）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-02T07:20:15.720

```
<TextBlock >
    Here is my text to be displayed 
    <TextBlock.TextDecorations>
        <TextDecoration PenOffset="3" PenOffsetUnit="Pixel"/> 
    </TextBlock.TextDecorations>
</TextBlock> 
```

调整 PenOffset 会增加/减少文本和线条之间的间隙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:08:58.350

您可以通过在它们之间添加[分隔符](http://msdn.microsoft.com/en-us/library/ms612946%28v=vs.100%29.aspx)或设置[Margin](http://msdn.microsoft.com/en-us/library/ms600890%28v=vs.100%29.aspx)来做到这一点。

分隔器：

```
<StackPanel Orientation="Horizontal">
    <TextBlock Text="&gt; "/>
    <Separator Width="5" Visibility="Hidden" />
    <TextBlock TextDecorations="Underline">
        <ContentPresenter/>                        
    </TextBlock>
</StackPanel> 
```

利润：

```
<StackPanel Orientation="Horizontal">
    <TextBlock Text="&gt; " Margin="0,0,5,0" />
    <TextBlock TextDecorations="Underline">
        <ContentPresenter/>                        
    </TextBlock>
</StackPanel> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-19T00:04:08.567

要使比“下划线”更接近文本的线有“基线”。它比 HB 解决方案灵活得多，但也更简单。

```
<TextBlock TextDecorations="Baseline" /> 
```

# c# - 不能在 jQuery 下拉菜单中工作

> ID：12639141
> 
> 赞同：0
> 
> 时间：2012-09-28T11:27:29.353
> 
> 标签：c#, jquery, asp.net, .net, jquery-ui

我有一个 asp:dropdownlist 已更改为 jQuery 多选。我必须在下拉列表中对数据进行分组。我在运行时对它进行分组。如果它是一个正常的 asp 下拉列表，它可以工作。应用 jquery Multiselect 时，它不会。

资源：

```
<link rel="stylesheet" type="text/css" href="Styles/jquery.multiselect.css" />
    <link rel="stylesheet" type="text/css" href="Styles/jquery.multiselect.filter.css" />
    <link rel="stylesheet" type="text/css" href="Styles/style.css" />
    <link rel="stylesheet" type="text/css" href="Styles/prettify.css" />
    <%--<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>--%>
    <script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/ui-lightness/jquery-ui.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
    <script type="text/javascript" src="Scripts/jquery.multiselect.js"></script>
    <script type="text/javascript" src="Scripts/jquery.multiselect.filter.js"></script>
    <script type="text/javascript" src="Scripts/prettify.js"></script>

 <script type="text/javascript">
        $(document).ready(function () {
            //Create groups for dropdown list
            $("option[classification='LessThanFive']").wrapAll("<optgroup label='Less Than Five' />");
            $("option[classification='GreaterThanFive']").wrapAll("<optgroup label='Greater Than five' />");
        });

    </script>

 <asp:DropDownList ID="MobileData" runat="server" OnDataBound="ddl_DataBound">
            </asp:DropDownList> 
```

//后面的代码：

```
protected void ddl_DataBound(object sender, EventArgs e)
    {
        foreach (ListItem item in ((DropDownList)sender).Items)
        {

            if (System.Int32.Parse(item.Value) < 2)
                item.Attributes.Add("classification", "LessThanFive");
            else
                item.Attributes.Add("classification", "GreaterThanFive");

        }

    }

  protected void Page_Load(object sender, EventArgs e)
    {
          ListItemCollection list = new ListItemCollection();     
           list.Add(new ListItem("1", "1"));
           list.Add(new ListItem("2", "2"));
           list.Add(new ListItem("3", "3"));
           list.Add(new ListItem("4", "4"));
           list.Add(new ListItem("5", "5"));
           list.Add(new ListItem("6", "6"));
           list.Add(new ListItem("7", "7"));
           list.Add(new ListItem("8", "8"));
           list.Add(new ListItem("9", "9"));
           list.Add(new ListItem("10", "10"));

           MobileData.DataSource = list;
           MobileData.DataBind();
   } 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:34:28.023

[它在这里](http://jsfiddle.net/ZW3Z3/)为我工作

确保选择中的大小写是正确的，

如果您在 JQuery 中有 LessThanFive 并且 HTML 呈现为小于五，则 JQuery 将不会返回匹配项。

**编辑** 我已经用你给我们的代码创建了一个解决方案，直到我打电话`$('select').multiselect();`我也无法应用任何样式，并且选项组出现了。

但是一旦我应用了这个脚本，我就会得到与[这个](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)例子中给出的相同的下拉列表。只有这样我才能重现症状。

经过进一步调查，我查看并看到我正在调用代码以在调用`optGroup`之后添加`$('select').multiselect();` ，

所以我认为您对下拉菜单的更改是在控件初始化后发生的。

尽早将脚本添加到页面中，然后添加代码以初始化多选控件。

# ios - 旋转后如何更改自定义viewForHeaderInSection宽度

> ID：12639148
> 
> 赞同：4
> 
> 时间：2012-09-28T11:28:07.230
> 
> 标签：ios, uitableview

我必须构建一个自定义 tableViewHeader ，其中至少应显示两个标签，即。一个项目名称和项目描述。这两个标签的内容不同（即在字符串长度方面）。

我设法获得了默认设备方向（纵向）的工作版本，但是如果用户将设备旋转为横向，我的自定义 headerView 的宽度不会调整，并且用户将在右侧看到未使用的空白区域。

正在使用以下代码片段：

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 50.0f;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{    
    CGFloat wd = tableView.bounds.size.width;
    CGFloat ht = tableView.bounds.size.height;
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0., 0., wd, ht)];
    headerView.contentMode = UIViewContentModeScaleToFill;
    // Add project name/description as labels to the headerView.
    UILabel *projName = [[UILabel alloc] initWithFrame:CGRectMake(5., 5., wd, 20)];
    UILabel *projDesc = [[UILabel alloc] initWithFrame:CGRectMake(5., 25., wd, 20)];
    projName.text = @"Project: this project is about an interesting ..";
    projDesc.text = @"Description: a very long description should be more readable when your device is in landscape mode!";
    [headerView addSubview:projName];
    [headerView addSubview:projDesc];
    return headerView;
} 
```

我注意到`tableView:viewForHeaderInSection:`只会在 之后调用一次`viewDidLoad`，但不会在设备方向更改之后调用。

我是否应该使用以下方法实现该`willRotateToInterfaceOrientation:`方法：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                                duration:(NSTimeInterval)duration
{
    [self.tableView reloadSections:nil withRowAnimation:UITableViewRowAnimationNone];
} 
```

我无法弄清楚如何使之`reloadSections:`工作，从而强制重新计算我的 customView。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T01:47:40.040

如果您使用 autoresizingMask，标题会在旋转时正确调整。无需覆盖其他任何内容。在返回视图之前，我会在代码末尾设置自动掩码：

```
 [headerView addSubview:projName];
    [headerView addSubview:projDesc];
    projName.autoresizingMask = UIViewAutoresizingFlexibleRightMargin;
    projDesc.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin;
    headerView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    return headerView; 
```

# c# - 如何使用“添加服务参考”从 Visual Studio 调用 php 服务

> ID：12639149
> 
> 赞同：0
> 
> 时间：2012-09-28T11:28:09.217
> 
> 标签：c#, php, add, service-reference

我想从 c# 桌面应用程序使用 php 服务。我通过“添加服务引用”将 php 服务添加到我的项目中，但我看不到来自方法的正确响应。那就是 php 服务 wsdl；

```
 <?xml version="1.0" encoding="UTF-8"?>
<definitions
    xmlns:SOAP-ENV = "http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:xsd = "http://www.w3.org/2001/XMLSchema"
    xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance"
    xmlns:SOAP-ENC = "http://schemas.xmlsoap.org/soap/encoding/"
    xmlns:tns = "urn:Invest"
    xmlns:soap = "http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:wsdl = "http://schemas.xmlsoap.org/wsdl/"
    xmlns = "http://schemas.xmlsoap.org/wsdl/"
    targetNamespace = "urn:Invest">
    <types>
        <xsd:schema elementFormDefault = "qualified" targetNamespace = "urn:Invest">
            <xsd:import namespace = "http://schemas.xmlsoap.org/soap/encoding/"/>
            <xsd:import namespace = "http://schemas.xmlsoap.org/wsdl/"/>
            <xsd:complexType name = "ReturnItems">
                <xsd:sequence>
                    <xsd:element
                        name = "itemName"
                        type = "xsd:string"
                        minOccurs = "0"
                        maxOccurs = "unbounded"/>
                </xsd:sequence>
            </xsd:complexType>
        </xsd:schema>
    </types>
    <message name = "ShowDataRequest">
        <part name = "no" type = "xsd:string"/>
        <part name = "user_name" type = "xsd:string"/>
    </message>
    <message name = "ShowDataResponse">
        <part name = "return" type = "tns:ReturnItems"/>
    </message>
    <portType name = "InvestPortType">
        <operation name = "ShowData">
            <input message = "tns:ShowDataRequest"/>
            <output message = "tns:ShowDataResponse"/>
        </operation>
    </portType>
    <binding name = "InvestBinding" type = "tns:InvestPortType">
        <soap:binding style = "document" transport = "http://schemas.xmlsoap.org/soap/http"/>
        <operation name = "ShowData">
            <soap:operation soapAction = "urn:Invest#ShowData" style = "rpc"/>
            <input>
                <soap:body use = "literal" namespace = "urn:Invest"/>
            </input>
            <output>
                <soap:body use = "literal" namespace = "urn:Invest"/>
            </output>
        </operation>
    </binding>
    <service name = "Invest">
        <port name = "InvestPort" binding = "tns:InvestBinding">
            <soap:address location = "http://test.com.tr/service.php"/>
        </port>
    </service>
</definitions> 
```

当我通过“添加服务引用”从 vs2010 调用 ShowData 方法时，响应类型为字符串 [] 并始终返回字符串 [0]。此外，我在 SoapUi 中使用相同的参数调用此方法。由于以下原因返回给我;

请求 SoapUi：

```
<soapenv:Envelope xmlns:soapenv = "http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn = "urn:Invest">
<soapenv:Header/>
<soapenv:Body>
    <urn:ShowData>
        <no>475</no>
        <user_name>7302AEKI</user_name>
    </urn:ShowData>
</soapenv:Body> 
```

响应 SoapUi：

```
<SOAP-ENV:Envelope
xmlns:SOAP-ENV = "http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsd = "http://www.w3.org/2001/XMLSchema"
xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance"
xmlns:SOAP-ENC = "http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body>
    <ns1:ShowDataResponse xmlns:ns1 = "urn:Invest">
        <return>
            <item>
                <TAP>
                    <kod>
                        <item>768</item>
                    </kod>
                </TAP>
            </item>
            <item>
                <BASV>
                    <SUB>10</SUB>
                </BASV>
            </item>
            <item>
                <BASV>
                    <SIRK/>
                </BASV>
            </item>
            <item>
                <BASV>
                    <BASV_NO/>
                </BASV>
            </item>
            <item>
                <aaa>bbb</aaa>
            </item>
        </return>
    </ns1:ShowDataResponse>
</SOAP-ENV:Body> 
```

因此，是否可以通过“添加服务引用”从 VS2010 调用此服务，或者应该是什么？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:42:25.357

据我所知，WSDL 和实际响应不匹配。要获得您期望的响应，请修复 WSDL 或响应。

# android - 响应 Activity 事件的片段

> ID：12639150
> 
> 赞同：0
> 
> 时间：2012-09-28T11:28:10.760
> 
> 标签：android, android-fragments

我有包含几个片段的 ViewPager 活动。我也在操作栏中使用下拉导航

```
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST); 
```

对于这个导航栏，我有一些回调：

```
actionBar.setListNavigationCallbacks(mSpinnerAdapter, mNavigationCallback); 
```

我的问题是导航列表中的更改选项应该会影响 ViewPager 中的所有片段。

我应该怎么做才能符合良好的 OO 原则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:11:52.493

我会让你的片段实现这样的接口：

```
public Interface NavigationListener {
    public void onNavigationChanged(args...)
} 
```

然后只需在 mNavigationCallback 中的每个片段上调用该方法。

# jquery - jQuery UI-Slider 没有“实时”效果和 CSS 样式

> ID：12639152
> 
> 赞同：1
> 
> 时间：2012-09-28T11:28:18.890
> 
> 标签：jquery, css, jquery-ui, uislider, jquery-ui-slider

基本上这里有几个问题，因为下面出现的 ui-slider ucas 积分和等级不是“实时”的，我希望它们在使用滑块时出现。所以所有的计算都是立即发生的，所以当你滑动它们时它们会改变，而不是当用户停止时。

另外，我将如何设计杆的样式，以便当杆向上移动时，已滑动的钻头会变成某种颜色。

对于现场版本：[http ://universitycompare.com](http://universitycompare.com)

我的滑块的 jQuery 可以在下面看到：

```
jQuery(document).ready(function($) {

    var slider1 = $("#slider").slider({
        max: 420,
        min: 0,
        step: 20,
        change: function(event, ui) {
            $("#s2").html(ui.value);    
            $("#s2")
        },
        stop:Calculate
    });

    var slider2 = $("#slider2").slider({
        max: 420,
        min: 0,
        step: 20,
        change: function(event, ui) {
            $("#s3").html(ui.value);    
            $("#s3")
        },
        stop:Calculate

    });

    var div = $('#s4'); //cache this object in a variable if you'll be using it multiple times
    slide: function Calculate(){
        var val1 = slider1.slider('option', 'value');
        var val2 = slider2.slider('option', 'value');

        var finalVal = (val1 + val2) / 2;
        //update the ui
            if (finalVal === 0) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('N / A');
            }

            if (finalVal === 20) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('N / A');
            }

            if (finalVal === 40) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('N / A');
            }

            if (finalVal === 60) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('N / A');
            }

            if (finalVal === 80) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('N / A');
            }

            if (finalVal === 100) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('N / A');
            }

            if (finalVal === 120) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('EEE');
            }

            if (finalVal === 140) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('DEE');
            }

            if (finalVal === 160) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('DDE');
            }

            if (finalVal === 180) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('DDD');
            }

            if (finalVal === 200) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('CDD');
            }

            if (finalVal === 220) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('CCD');
            }

            if (finalVal === 240) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('CCC');
            }

             if (finalVal === 260) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('BCC');
            }

             if (finalVal === 280) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('BBC');
            }

            if (finalVal === 300) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('BBB');
            }

            if (finalVal === 320) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('ABB');
            }

            if (finalVal === 340) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('AAB');
            }

            if (finalVal === 360) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('AAA');
            }

            if (finalVal === 380) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('A*AA');
            }

            if (finalVal === 400) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('A*A*A');
            }

            if (finalVal === 420) { //replace 220 with whatever you're checking
               //if finalVal does equal 220
               div.text('A*A*A*');
            }

    }
}); 
```

滑块的 CSS 也在这里，但似乎没有改变颜色：

```
/* Slider
----------------------------------*/
.ui-slider { position: relative; text-align: left; background-color:#ffdd4e; height:7px; }
.ui-slider .ui-slider-handle { position: absolute; z-index: 2; width: 1.2em; height: 1.2em; cursor: default; }
.ui-slider .ui-slider-range { position: absolute; z-index: 1; font-size: .7em; display: block; border: 0; background-position: 0 0; }

.ui-slider-horizontal { height: 7px; }
.ui-slider-horizontal .ui-slider-handle { top: -.5em; margin-left: -.6em; background-color:#ffdd4e; }
.ui-slider-horizontal .ui-slider-range { top: 0; height: 100%; }
.ui-slider-horizontal .ui-slider-range-min { left: 0; }
.ui-slider-horizontal .ui-slider-range-max { right: 0; }

.ui-widget-header { background-color:#0071bc !important; height:8px !important; left:1px !important; top:1px !important; position:absolute !important; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:55:02.150

试试这个**[jsFiddle 示例](http://jsfiddle.net/j08691/UN8AZ/25/)**。

对于您的两个滑块，我向滑块的滑动事件添加了对您的计算函数的调用。

```
slide: Calculate, 
```

更新：

要显示滑块值，请改用：

```
slide: function(event, ui) {
    Calculate();
    $("#s2").html(ui.value);
}, 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/UN8AZ/26/)**

请注意，在这个小提琴中，我更改了您的 CSS 以使值可见（例如，您在白色上有白色）。

# java - 使用like运算符搜索MySql数据库关键字

> ID：12639154
> 
> 赞同：2
> 
> 时间：2012-09-28T11:28:32.347
> 
> 标签：java, mysql, sql-server, database

我想从特定列中搜索一些关键字并打印与关键字对应的所有列值，现在问题是如果我使用查询

Select * from Candidate where %C% 等技能，技能中的不同行是：

Java、C、C++、HTML、CSS、Net Beans、我的 Eclipse

Java、Asp.Net、Eclipse

C、PHP、CSS、休眠

现在它正在显示所有行，因为 C 是每一行中的子字符串，我尝试使用 C% 而不是 %C% 但仅显示第 3 行，因为它以 C 开头，但我需要显示所有具有“C”的行作为一个不同的词，我如何搜索整个世界，建议一段代码。

```
import java.util.*;
import java.sql.*;
import java.io.*;

public class TokensOfString 
{
    public static void main(String[] args) 
    {
        String str;
        String query = "";
        try
        {
            int i =0, cntToken =0;
            BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("Enter the keywords to be searched");
            str = br.readLine();
            StringTokenizer words = new StringTokenizer(str, ",");
            cntToken = words.countTokens();
            //System.out.println("No. of Tokens = "+cntToken);

            String token[]= new String[cntToken];

            while(words.hasMoreElements())
            {
                token[i] = words.nextToken().trim();
                //System.out.println(token[i]);
                i++;
            }
                //System.out.println(++i+" : "+words.nextElement().toString().trim());    

            query = "SELECT * from can_skills where skills  like '"+ token[0] +"%'";
           // System.out.println("Query at 34 : "+query);
            if(cntToken == 1)
            {
                query ="";
                query = "SELECT * from can_skills where skills  like '"+ str +"%'";
            }
            if(cntToken > 1)
            {
                for( int j=1; j < cntToken; j++)
                query = query + " or skills  like '"+ token[j] +"%'";
            }
            System.out.println("Query at 43 : "+query);

            Connection con = null;
            Class.forName("com.mysql.jdbc.Driver");
            String hostName = "localhost";
            String port = "3306";
            String userName = "root";
            String password = "root";
            con = DriverManager.getConnection("jdbc:mysql://" + hostName + ":" + port + "/prem", userName, password);
            Statement statement= con.createStatement();
            ResultSet rs = statement.executeQuery(query);
            while(rs.next())
            {
                System.out.println(rs.getString(4));
            }

        }
        catch(ClassNotFoundException e){ System.out.println(e); }
        catch(Exception ex){ System.out.println(ex); }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:23:22.603

你可以试试正则表达式：

```
"select * from can_skills where skills REGEXP '" . token . ",?'" 
```

在这里阅读更多：http: [//dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

FWIW：您现在拥有代码的方式使其容易受到注入式攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:25:46.957

使用正则表达式代替`like`表达式：

```
select *
from Candidate
where skills regexp '^C,| C,| C$' 
```

`|`手段`or`。_ `^`表示字符串的开始，表示`$`结束。所以它将匹配字符串开头、结尾和中间的标记。请注意，在第二种和第三种情况之前有空格。

在java中，如果我没有弄错：

```
"SELECT * from can_skills where skills regexp '^" + token[0] + ",| " + token[0] + ",| " + token[0] + "$'"; 
```

# algorithm - 解码 HID 数据

> ID：12639155
> 
> 赞同：0
> 
> 时间：2012-09-28T11:28:33.243
> 
> 标签：algorithm, decode

我正在使用 rs232 HID 阅读器。
它的手册说它的输出是

```
 CCDDDDDDDDDDXX     
where CC is reserved for HID    
      DDDDDDDDDD is the transponder (the card) data
      XX is a checksum 
```

校验和在这里得到了很好的解释并且无关紧要。关于 DDDDDDDDDD 只说有效值是 0000000000 到 1FFFFFFFFF，但没有说明它如何转换为卡正面印刷的内容。
我有 3 张样本卡，遗憾的是在短距离范围内（**编辑**加上额外的一张）。在这里，我向他们展示：

```
readed from rs232     shown on card    
 00000602031C27          00398    
 00000602031F2A          00399    
 0000060203202B          00400    
 00000601B535F1          55962       **new 
```

另外我有一个加载了 1000 张卡的数据库（前面印有什么），所以我需要从我在 rs232 上读取的内容到前面打印的内容的解码路径。

来自 DB 的一些值（我已经看到了这些卡片，但我现在无法访问它们）

```
55503
60237
00833 
```

非常感谢每一个人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:03:34.593

搜索字符串“CCDDDDDDDDDDXX”会返回[http://www.rfideas.com/downloads/SerialAppNote8.pdf](http://www.rfideas.com/downloads/SerialAppNote8.pdf)，它似乎描述了如何解码数字。我不保证这是否准确。

> # 解码标准 26 位格式
> 
> 读者发来的消息：
> 
> ```
> C C D D D D D D D D D D X X
> ---------------------------
> 0 0 0 0 0 6 0 2 0 3 1 C 2 7
> 0 0 0 0 0 6 0 2 0 3 1 F 2 A
> 0 0 0 0 0 6 0 2 0 3 2 0 2 B
> 0 0 0 0 0 6 0 1 B 5 3 5 F 1 
> ```
> 
> 剥离校验和 X，并将数据简化为二进制给出：
> 
> ```
>  C    C    D    D    D    D    D    D    D    D    D    D
> cccc cccc zzzz zzzz zzzz zspf ffff fffn nnnn nnnn nnnn nnnp
> -----------------------------------------------------------
> 0000 0000 0000 0000 0000 0110 0000 0010 0000 0011 0001 1100
> 0000 0000 0000 0000 0000 0110 0000 0010 0000 0011 0001 1111
> 0000 0000 0000 0000 0000 0110 0000 0010 0000 0011 0010 0000
> 0000 0000 0000 0000 0000 0110 0000 0001 1011 0101 0011 0101 
> ```
> 
> 7号左边的所有卡片数据字符都可以忽略。
> 
> *   c = HID 特定代码。
> *   z = 前导零
> *   s = start sentinel (它总是一个 1)
> *   p = 奇偶校验（每个 12 位）。
> *   f = 设备代码 8 位
> *   n = 卡号 16 位

由此我们可以看出

*   00000602031C27 → n = 0b0000000110001110 = **398**
*   00000602031F2A → n = 0b0000000110001111 = **399**
*   0000060203202B → n = 0b0000000110010000 = **400**
*   00000601B535F1 → n = 0b1101101010011010 = **55962**

因此，对于您的示例，我们可能会得到：

*   55503
*   (f, n) = 0b0000_0001__1101_1000_1100_1111
*   前 12 位奇校验 = 0
*   最后 12 位的偶校验 = 0
*   结果 = **00000403b19e56**

# clojure - 如何安全地加密配置文件中的值

> ID：12639159
> 
> 赞同：1
> 
> 时间：2012-09-28T11:28:52.180
> 
> 标签：clojure, continuous-integration, travis-ci

我正在使用配置文件来存储数据库的密码/密钥以及与 AWS 等其他服务的连接。

我正在使用 Travis CI 进行构建，运行我的测试，然后将其部署到实时服务器。

我想加密我的配置文件中的变量，只有应用程序才能读取它。这是标准——

1）应用程序应该能够在多个环境中解密它，从构建服务器到多个部署服务器。

2) 用于解密配置文件的密码对开发者不可用。

该项目在 clojure 中，是否有任何 leiningen 插件/功能可以帮助实现这一点？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:21:47.410

我认为您尝试做的最好的解决方案就是从应用程序源代码树中删除配置文件。将配置文件保存到构建和部署服务器，不要让开发人员直接访问这些文件。

你试图做的主要问题是你试图让你的开发人员无法访问某些东西，但同时让开发人员可以完全控制的东西，应用程序代码，拥有访问相同的东西。也就是说，为了使应用程序能够解密配置，开发人员必须有权访问解密密钥。

您可以尝试仅通过仅在构建和部署服务器上可用的工具（即 Leiningen 插件）来解密您的配置，但单独存储配置文件会更简单。

# java - 从作为几个局部变量之一的 JTextField 获取数据

> ID：12639162
> 
> 赞同：2
> 
> 时间：2012-09-28T11:28:59.357
> 
> 标签：java, swing, jtextfield, parseint, absolutelayout

所以我正在阅读一个文件，我得到了该文件中的行数。基于此，我生成了我的界面。现在我需要能够编辑价值槽 UI 。Rows 是具有输入文档行数的变量。当然下面的代码不起作用。我想将新值写入我从中读取的数组中。

```
for(int i=0;i<Rows;i++)
{
    //System.out.println("!"+Symbol[1]+"!");
    //if(Symbol[i]!=""&&Symbol[i]!=null)
    // {
    JTextField symbol = new JTextField(6);
    symbol.setText(Symbol[i]);
    symbol.setBounds(10,25*i+10 , 75, 20);
    symbol.setEditable(false);
    frame.add(symbol);
    JTextField buyf = new JTextField(4);
    buyf.setText(String.valueOf(buy[i]));
    buyf.setBounds(95, 25*i+10, 50, 20);
    buyf.setEditable(true);
    buyf.addActionListener(new java.awt.event.ActionListener() { 
         public void actionPerformed(ActionEvent ae) {  
              buy[i]=Integer.parseInt(buyf.getText());
         }
    });                      
    frame.add(buyf);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:03:31.310

1.  不要使用[AbsoluteLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)例如`symbol.setBounds(10,25*i+10 , 75, 20);`使用正确的`LayoutManager`，也许[GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)最适合您的...

2.  使用[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)监听[JTextComponents的变化](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)

3.  将[JFormattedTextField 与 Number formatter 一起](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)使用，而不是普通的[JTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)，那么您可以删除关于`parseWhatever`

4.  您可以使用普通的[JTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)但使用`DocumentFilter`（删除非数字字符）

5.  [ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)可能是正确`Listener`的，另一种选择是`DocumentListener`在第二点

6.  尽快发布[SSCCE](http://sscce.org/)以获得更好的帮助，但我认为这`DocumentListener`可以解决这个问题

# sql-server-2008 - 无法解决排序规则冲突

> ID：12639163
> 
> 赞同：4
> 
> 时间：2012-09-28T11:29:12.747
> 
> 标签：sql-server-2008, tsql, function, reporting-services

我收到以下错误消息。

> 无法解决等于操作中“Latin1_General_CI_AI”和“SQL_Latin1_General_CP1_CI_AS”之间的排序规则冲突。

只有当我将此代码放在我的 WHERE 子句中时，我才会得到它。

```
WHERE Region IN (SELECT Token FROM dbo.getParmsFromString(@Region)) 
```

现在 @Region 包含来自 SSRS 的多选字段中的所有值。

下面是使用的函数的代码。

```
CREATE FUNCTION [dbo].[getParmsFromString]
    (@String VARCHAR(MAX))
RETURNS @Parms TABLE
(
    Token VARCHAR(MAX)
)
AS
BEGIN
    IF CHARINDEX(',', @String) != 0
    BEGIN
        ;WITH cte0(Token, List) AS
              (
                SELECT   SUBSTRING(@String, 1, CHARINDEX(',',@String,1) - 1)
                        ,SUBSTRING(@String,CHARINDEX(',',@String,1) + 1, LEN(@String)) + ','

                UNION ALL

                SELECT     SUBSTRING(List,1,ISNULL(CHARINDEX(',',List,1) - 1,1))
                        ,SUBSTRING(List,CHARINDEX(',',List,1) + 1, LEN(List))
                FROM cte0
                WHERE LEN(cte0.List) > 0
              )

            INSERT INTO @Parms (Token)
            SELECT Token
            FROM cte0
            OPTION (MAXRECURSION 0)
        RETURN;
    END

    ELSE
        INSERT INTO @Parms
            SELECT @String
        RETURN;
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:46:47.220

尝试改变

```
 RETURNS @Parms TABLE 
( 
    Token VARCHAR(MAX) 
) 
```

和

```
try changing RETURNS @Parms TABLE 
( 
    Token VARCHAR(MAX) COLLATE DATABASE_DEFAULT
) 
```

和

```
WHERE Region IN (SELECT Token FROM dbo.getParmsFromString(@Region)) 
```

和

```
WHERE Region COLLATE DATABASE_DEFAULT  IN (SELECT Token FROM dbo.getParmsFromString(@Region)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T21:56:01.973

通常，当您尝试比较不同区域的数据或将使用特定加密的数据与使用不同加密的其他数据进行比较时，会发生这种类型的错误。最可能的原因是他们的 tempdb 使用排序**规则 "SQL_Latin1_General_CP1_CI_AS"**而数据库使用的是**"Latin1_General_CI_AS"**。结果，临时对象在排序**规则 "SQL_Latin1_General_CP1_CI_AS"下创建，然后无法与使用排序****规则 "Latin1_General_CI_AS"**的数据库的数据库对象进行比较。

最简单的解决方法也是推荐的方法是在使用排序**规则“Latin1_General_CI_AS”**安装的服务器上运行数据库。

供参考。SQL 排序规则（**“SQL_Latin1_General_CP1_CI_AS”**）存在于 sql server 中以实现向后兼容性。在处理使用 unicode 和非 unicode 数据的国际数据或数据库时，建议使用 windows 排序规则（**“Latin1_General_CI_AS”**）。

您可以通过以下方式更改数据库排序规则：

```
use master
ALTER DATABASE "Your database"
COLLATE Latin1_General_CI_AS;

SELECT name, collation_name
FROM sys.databases; 
```

如果需要，您还可以更改“主”数据库的排序规则，即重建数据库，为此请访问以下链接：

[http://msdn.microsoft.com/en-us/library/dd207003(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/dd207003(v=sql.100).aspx)

[http://sqlbuzz.wordpress.com/2011/08/20/how-to-rebuild-master-database-aka-rebuilding-sql-server-2008r2/](http://sqlbuzz.wordpress.com/2011/08/20/how-to-rebuild-master-database-aka-rebuilding-sql-server-2008r2/)

但请确保在执行此操作之前备份所有数据库。

# jquery - 当网格数据在每次回发时都发生变化时，如何预先触发 rowcommand 事件？

> ID：12639164
> 
> 赞同：0
> 
> 时间：2012-09-28T11:29:20.850
> 
> 标签：jquery, asp.net

我的要求是在每次回发时刷新数据，但如果这样做，我的 rowcommand 事件不会在 gridview 中的链接按钮单击时触发？我怎样才能实现它？

我正在使用 jquery 更改行顺序并将新顺序保存在隐藏变量中。在页面回发上，我从隐藏变量中获取新订单，并用新订单重新绑定网格。

每次页面回发时，我都需要用新订单重新绑定网格。当我单击网格中的编辑/删除链接按钮但不会触发 rowcommand 事件时，会发生回发。

```
 protected void Page_Load(object sender, EventArgs e)
        {
            if (IsPostBack)
            {
              string order = hdnOrder.Value.ToString();
               if (order != string.Empty)
               {
                ReOrder();
               } 
         }
       }

 protected void ReOrder()
        {
            DataTable dt = new DataTable();

            if (ViewState["data"] != null)
            {
                dt = (DataTable) ViewState["data"];

                string[] order = hdnOrder.Value.Split(',');

                for (int i = 0; i < order.Length; i++)
                {
                    DataRow[] keyRows;

                    keyRows = dt.Select("ID='" + order[i] + "'");
                    if (keyRows.Length > 0)
                    {
                        int index = dt.Rows.IndexOf(keyRows[0]);

                        dt.Rows[index].SetField("Precedence", i + 1);
                    }
                }
                DataView dv = dt.DefaultView;
                dv.Sort = "Precedence ASC";

                ViewState["data"] = dv.ToTable();

                grd.DataSource = ViewState["data"];
                grd.DataBind();
                hdnOrder.Value = string.Empty;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:39:04.640

如果以下情况属实：

1.  您需要处理行命令；
2.  您需要重新绑定网格，但让它也反映行命令的结果

...它应该像在`PreRender`事件处理程序而不是`Load`事件处理程序中重新排序一样简单。

# java - 如何解决导入无法解决的错误？

> ID：12639165
> 
> 赞同：2
> 
> 时间：2012-09-28T11:29:22.190
> 
> 标签：java, android, eclipse, import

我收到了那个错误：

```
The import android.graphics.TableMaskFilter cannot be resolved 
```

但是我在 android-sdk 文件夹的 android.graphics 包中看到了 TableMaskFilter 类，我无法在 Eclipse 的 android4.0.3 库中看到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T11:44:41.087

你不能。`TableMaskFilter`用 注释`@hide`，这意味着它的定义从`android.jar`.

# css - Chrome 的 CSS 问题

> ID：12639166
> 
> 赞同：0
> 
> 时间：2012-09-28T11:29:42.120
> 
> 标签：css, google-chrome

我有这个页面 http://www.digitalking.it/fxmypics 可以在 IE 和 Firefox 中显示，但我在使用 Chrome 时遇到问题。

似乎css没有应用好，这是HTML代码：

```
<div id="slider">
<div class="box1"><?php if (function_exists('easing_slider')){ easing_slider(); }; ?></div> 
    <div class="box2"><p><a href="<?php echo site_url('/wp-login.php?action=register&redirect_to=' . get_permalink()); ?>" title="Register">REGISTER</a> / <a href="<?php echo wp_login_url(); ?>" title="Login">LOGIN</a></p>
    <div class="arrow"><img src="<?php bloginfo('template_directory'); ?>/images/arrow.png" width="22" height="35" /></div>
    <div class="upload"><a href="<?php echo get_site_url(); ?>/upload/">UPLOAD</a></div>
    </div>
    </div> 
```

以及以下CSS：

```
#slider  .box1 { width: 490px; float:left;  } 

#slider  .box2 { width: 460px; float:left; } 

#slider  .box2 p { text-align: center; font-family: 'Dancing Script', 'Droid Serif', serif; font-weight: 700; font-size: 24px; background: url(../images/border1.png) center 0px no-repeat; position: relative; top:-10px; height:40px; padding:14px; } 

#slider  .box2 a:hover { text-decoration: none; } 

#slider .arrow  { text-align: center; position: relative; top:-10px; }

#slider  .upload  { text-align: center; font-family: 'Dancing Script', 'Droid Serif', serif; font-weight: 700; font-size: 24px; background: url(../images/border2.png) center 0px no-repeat; position: relative; top:0px; height:25px; padding:14px; }

#slider  .upload a:hover { text-decoration: none; } 
```

怎么了？

谢谢西蒙妮

# css - 如何在 CSS 中多个类共享 1 个 css 方法

> ID：12639169
> 
> 赞同：0
> 
> 时间：2012-09-28T11:29:46.840
> 
> 标签：css

我试着放

```
.dxdpLoadingPanel_Aqua,dxdpLoadingPanel_BlackGlass,dxdpLoadingPanel
{
    z-index:999;
} 
```

和

```
.dxdpLoadingPanel_Aqua .dxdpLoadingPanel_BlackGlass .dxdpLoadingPanel
{
    z-index:999;
} 
```

但不能运行。多少类或 id 共享 1 个方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:42:26.607

在 CSS 中，类选择器总是以`.`s 为前缀。要在多个选择器上应用相同的规则集，请用逗号分隔选择器：

```
.class1, .class2, .class3 {
    /*Making stuff look pretty*/
} 
```

然而，你不能把它写成`.class1, class2, class3`——你必须对`.`每个选择器使用。`.class1, class2, class3`选择带有`class = "class1"`, 和带有**标记名** `class2`的元素or `class3`，因此您的第一个示例不起作用。

**注意：**您也可以使用多个不同类型的选择器：

```
.class1, #id1, div {
     /*Very fancy*/
} 
```

在上面的示例中，`#id1`选择 id = "id1" 的元素并`div`选择所有`div`元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:33:25.537

您应该使用第一个，但包括句号来标识类：

```
.dxdpLoadingPanel_Aqua, .dxdpLoadingPanel_BlackGlass, .dxdpLoadingPanel
{
    z-index:999;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T11:41:56.483

**可以有尽可能多的。**

但是在您的情况下，您`wrong syntax`应该在选择器`.`中指明类并`,`分隔类

**第一个选择器**

```
.dxdpLoadingPanel_Aqua, .dxdpLoadingPanel_BlackGlass, .dxdpLoadingPanel
{
    z-index:999;
} 
```

这会将 css 应用于**所有 3 个类**

*   dxdpLoadingPanel_Aqua
*   dxdpLoadingPanel_BlackGlass
*   dxdpLoadingPanel

**第二个选择器**

```
.dxdpLoadingPanel_Aqua .dxdpLoadingPanel_BlackGlass .dxdpLoadingPanel
{
    z-index:999;
} 
```

这会将 css 应用于唯一的 **dxdpLoadingPanel**类，该类是 dxdpLoadingPanel_BlackGlass 的子类，它是 dxdpLoadingPanel_Aqua 的子类

# javascript - 咖啡/javascript中的短路

> ID：12639171
> 
> 赞同：2
> 
> 时间：2012-09-28T11:29:50.670
> 
> 标签：javascript, coffeescript

这个咖啡脚本：

```
if  typeof(groups) is undefined or groups.length == 0 
```

被编译成以下 javascript：

```
if (typeof groups === void 0 || groups.length === 0) 
```

基本上我想检查组数组是否为空或为空，并希望如果第一个条件为真，则不会检查第二个条件（短路）。但是 Chrome 会抛出以下错误：

> 未捕获的类型错误：无法读取未定义的属性长度

关于为什么它不会短路的任何见解？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:33:20.493

因为第一个条件永远不会成立。`void 0`将计算值`undefined`（不是字符串“undefined”），但`typeof`返回字符串“undefined”。

JavaScript 应为：

```
if (typeof groups === "undefined" || groups.length === 0) 
```

或者：

```
if (groups === void 0 || groups.length === 0) 
```

要修复 CoffeeScript，您需要检查字符串“undefined”：

```
if typeof groups is "undefined" or groups.length == 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T14:43:30.407

CoffeeScript 有一个运算符可以为您处理这种情况。如果您使用：

```
unless groups?.length > 0 
```

它将形成您要查找的内容，处理未定义/空的情况，并且仅尝试`groups.length`是否`groups`已定义。这具有易于链接的优点：

```
if foo?.bar?.length > 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T16:42:30.400

如果`groups`是局部变量，你可以问：

```
if not groups or groups.length is 0
  ... 
```

如果它是一个可能未定义的全局变量（即访问`groups`将抛出“未定义”错误），您可以使用存在运算符`?`：

```
if not groups? or groups.length is 0
  ... 
```

最后，当您要求`length`第二个条件中的属性时，您可以利用 0 是假的这一事实：

```
if not groups?.length
  ... 
```

最后一个表达式不关心`groups`变量是否定义；它适用于两种情况=D

# objective-c - 目标 C：如何支持已弃用的方法

> ID：12639172
> 
> 赞同：3
> 
> 时间：2012-09-28T11:29:50.177
> 
> 标签：objective-c, ios, deprecated

因此，对于每个新操作系统，都会声明不推荐使用一堆方法。对我来说奇怪的是，如果我还想支持 iOS5 和 iOS6，我必须同时使用 deprecated 和 replacement 方法，比如 with `UILabel`'s `minimumScaleFactor`over `minimumFontSize`。

如果我替换`myLabel.minimumFontSize`为`myLabel.minimumScaleFactor`，我的应用程序将在 iOS5 中崩溃。

所以我使用`if`with`-respondsToSelector:`来确定操作系统是 5 还是 6 并相应地使用`minimumScaleFactor`or `minimumFontSize`。

问题是我可能不得不在我的代码中编写一堆`if`s 和`respondsToSelectors`，这感觉很愚蠢。

**有没有更好的方法来处理弃用？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T08:23:41.237

我创建了可以在任何 ios 中使用的函数：

```
void AbsSdk30_upg60_UILabel_setMinimumScaleFactor(UILabel * label, CGFloat minimumScaleFactor) {
    if ([label respondsToSelector: @selector(setMinimumScaleFactor:)]) {
        [label setMinimumScaleFactor: minimumScaleFactor];
    }
    else {
        const CGFloat curFontSize = label.font.pointSize;
        const CGFloat fontSize = (0.0 == curFontSize) ? [UIFont labelFontSize] : curFontSize;
        [label setMinimumFontSize: fontSize * minimumScaleFactor];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:36:48.693

语言独立解决方案：在应用程序开始时获取操作系统并设置全局变量。然后，当需要查询操作系统版本的变量时。如果未来版本发生更改，您可以在 case/switch 语句中执行此操作，以便轻松扩展。

伪代码：

```
switch iOSversion
    case < 6
        dothis
        break
    case <7
        dothat
        break
    case >7
        OS not supported ;) 
```

从技术上讲，它与 IF 相同，但您的源代码会更短且结构更结构化，而且您不必每次都查询操作系统版本，而只需在应用程序启动时查询一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:38:27.087

为此，您应该将部署目标设为最低。这样，如果您运行您的应用程序。那时它不会给您不推荐使用的错误。而且您不需要在代码中编写 if 和 respondsToSelectors。您可以将您的部署目标设置为 ios 5.0 或 5.1，我认为这对您有用。如果您想要您的部署目标 6.0，那么将有另一种方法可以替换该已弃用的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T11:41:41.273

我将“弃用”视为一种方法可能在未来某个时候消失的警告，而不是现在必须更换它。我没有让当前构建的代码复杂化，而是给自己留下评论，说明当我放弃对某些旧版本的支持时要更改的内容。

除了在新版本中停止工作的东西外，我不会按版本#ifdef。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-14T19:46:15.103

在 .h 文件或 .h 和 .m 文件中向 UILabel 添加一个类别，其中 .h 文件将由使用它的代码导入：

```
@interface UILabel (UILabelCategory)

+ (CGFloat)minimumLabelFontSize;
- (void)adjustsFontSizeToFitWidthWithMinimumFontSize:(CGFloat)fontSize;

@end

@implementation UILabel (UILabelCategory)

+ (CGFloat)minimumLabelFontSize // class method that returns a default minimum font size
{
    return 11;
}

- (void)adjustsFontSizeToFitWidthWithMinimumFontSize:(CGFloat)fontSize
{
    if ([self respondsToSelector: @selector(setMinimumScaleFactor:)])
    {
        CGFloat currentFontSize = self.font.pointSize == 0 ? [UIFont labelFontSize] : self.font.pointSize;
        [self setMinimumScaleFactor:fontSize / currentFontSize];
    }
    else
    {
        [self setMinimumFontSize:fontSize]; // deprecated, only use on iOS's that don't support setMinimumScaleFactor
    }
    [self setAdjustsFontSizeToFitWidth:YES];
}

@end 
```

然后从代码中的多个位置像这样调用 UILabel 扩展：（假设您有一个名为 _instructions 的 UILabel 对象，并且您导入了实现 UILabelCategory 扩展的文件）

```
[_instructions adjustsFontSizeToFitWidthWithMinimumFontSize:[UILabel minimumLabelFontSize]]; 
```

或像这样：

```
[_instructions adjustsFontSizeToFitWidthWithMinimumFontSize:14]; 
```

注意：请记住，在 iOS 6 和之前的版本中，setMinimumFontSize 仅在您还将行数设置为 1 时才有效，如下所示：

```
[_instructions setNumberOfLines:1]; // on iOS6 and earlier the AdjustsFontSizeToFitWidth property is only effective if the numberOfLines is 1 
```

# linux - 使用太多 file.pl 生成 perl 字节码

> ID：12639174
> 
> 赞同：0
> 
> 时间：2012-09-28T11:29:55.460
> 
> 标签：linux, perl

如果 sub 在另一个 file.pl 中，如何制作 perl 字节码，以便我可以将所有 perl 脚本放入二进制文件以供使用，但我收到 codedump 警告。

这是我如何做的例子！

文件：add.pl

```
require "util.pl";

$a = 1;

$b = 2;

$res = add($a,$b);

print $res; 
```

文件：util.pl

```
sub add()

{

my ($a,$b) = @_;

my $c = $a + $b;

return $c;

}

1; #to return true 
```

然后当我运行时：

```
perlcc add.pl

./a.out 
```

我明白了

```
Segmentation fault (core dumped) 
```

我也试过

```
perlcc add.pl util.pl 
```

但它说

```
/usr/bin/perlcc: using add.pl as input file, ignoring util.pl 
```

笔记：

如果两者都在单个文件中

```
perlcc file.pl 
```

和

```
./a.out 
```

将工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:07:47.813

~~我无法回答实际的编译器问题，但让我做一些笔记。~~

`<Edit>`我越看这个，我越认为问题出在`add`函数的命名空间上。当它们在同一个文件中时，函数在`main`命名空间中声明。我认为`require`-d 文件也是如此，因为没有包声明。无论哪种方式，这些仍然是一些我希望有所帮助的好笔记。`</Edit>`

1.  你真的应该使用`strict`和`warnings`编译指示
2.  你不应该使用`$a`and `$b`，因为它们在 Perl 中是半魔法的，应该避免使用（是的，这很奇怪）
3.  Perl 原型与大多数语言不同，即使这样`()`，您的`add`函数上的空原型也不正确，最好不要使用它

这里所说的就是我将如何格式化我的文件。

文件：add.pl

```
use strict;
use warnings;

use MyUtils;

my $x = 1;

my $y = 2;

my $res = add($a,$b);

print $res; 
```

文件：MyUtils.pm

```
package MyUtils;

use strict;
use warnings

use parent 'Exporter';
our @EXPORT = ('add');

sub add

{

my ($x,$y) = @_;

my $c = $x + $y;

return $c;

}

1; 
```

这对可重用库使用了更现代的模块/包形式。该`use`指令包含一个`require`指令，但在编译时而不是运行时执行。

`Exporter`模块（和变量）正确地将`@EXPORT`函数导入脚本的命名空间（通常是`main`）。

也许`perlcc`会更喜欢这些变化；但即使没有，这些也是习惯的好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T16:24:39.650

perlcc在版本 5.10.0（大约五年前）中[从 Perl 中删除。](https://metacpan.org/module/perl5100delta#Removal-of-the-bytecode-compiler-and-of-perlcc)perldelta 手册页有这样的说法：

> perlcc、字节加载器和支持模块（B::C、B::CC、B::Bytecode 等）不再随 perl 源分发。那些实验性工具从来没有可靠地工作过，并且由于缺乏志愿者来使它们与 perl 解释器的开发保持一致，因此决定删除它们而不是发布那些损坏的版本。

看到这一点，我不得不建议将 perlcc 与任何版本的 Perl 一起使用可能是一个相当糟糕的主意。这是一个从未真正起作用的实验性功能。您可能希望不再使用它。

# javascript - 更改时更新 h2

> ID：12639177
> 
> 赞同：1
> 
> 时间：2012-09-28T11:30:01.100
> 
> 标签：javascript, jquery

因此，由于一些原因，当用户选择他想要的颜色和尺寸时，我需要在产品名称中添加项目颜色和项目尺寸。但是，我只在用户选择了两个选项时才设法更新 h2，并且每次更改选项时我都需要更新标题。

*HTML：*

```
<h2 class="item_name" style="float:left;">Quartz-kalvot</h2>

<br><br><strong>V&auml;ri</strong><br />
    <select class="item_Color">
    <option value="Ei valintaa">Valitse väri</option>
    <option value="Violet">Violet</option>
    <!-- ... -->
</select>
<br />
<strong>Koko</strong><br />
    <select class="item_size">
    <option value="Ei valintaa">Valitse koko</option>
    <option data-price="20.00&euro;">25cm x 30cm</option>
    <option data-price="30.00&euro;">50cm x 30cm</option>
    <option data-price="45.00&euro;">100cm x 50cm</option>
</select> 
```

*JavaScript：*

```
$(".item_size, item_Color").change(function() {
    var vari = $(".item_Color").val();
    var koko = $(".item_size").val();
    $('.item_name').html("Quartz-kalvot (" + vari + ")(" + koko + ")");
});​ 
```

小提琴：http: [//jsfiddle.net/WVCzY/](http://jsfiddle.net/WVCzY/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:32:53.017

您在这里忘记了`.`类选择器；

```
$(".item_size, item_Color")... 
```

所以事件不会绑定，要修复；

```
$(".item_size, .item_Color")... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:33:02.350

[http://jsfiddle.net/WVCzY/1/](http://jsfiddle.net/WVCzY/1/)

```
$(document).ready(function () {
    $(".item_size, .item_Color").change(function () {
     var vari = $(".item_Color").val();
     var koko = $(".item_size").val();
      $('.item_name').html("Quartz-kalvot ("+vari+")("+koko+")");
     });

});​ 
```

你只是在第一个`.`之前错过了一个`.item_Color`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:32:47.547

您忘记添加 . 前`item_Color`

```
$(document).ready(function () {
    //*************. here
    $(".item_size, .item_Color").change(function () {
     var vari = $(".item_Color").val();
     var koko = $(".item_size").val();
      $('.item_name').html("Quartz-kalvot ("+vari+")("+koko+")");
     });

});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T11:32:48.343

使 H2 更新一个函数，并在更改事件中调用它。

```
$(document).ready(function () {
    $(".item_size").change(function () {
        updateH2();
     });

    $(".item_Color").change(function() {
     updateH2();   
    });

});

function updateH2() {
     var vari = $(".item_Color").val();
     var koko = $(".item_size").val();
      $('.item_name').html("Quartz-kalvot ("+vari+")("+koko+")");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T11:35:38.647

您忘记将点添加到`item_Color`

它应该看起来像这样

```
 $(".item_size, .item_Color").change(function () { 
```

# e-commerce - 如何解决 Magento 产品计数错误？

> ID：12639178
> 
> 赞同：-1
> 
> 时间：2012-09-28T11:30:09.887
> 
> 标签：e-commerce, magento-1.6, magento

我正在开发一个 Magento 网站。我已经添加产品一段时间了。现在该网站将在几天后上线，只是在做最后的润色。

有几个类别..假设**Stools**。在管理中它显示它有 989 个产品，但在前端它显示它有 677 个产品。问题出现在许多类别中。

我认为有一些问题，所以我在**Stools -> NHL Logo Stools**下添加了另一个名为 :- **Ottawa Senators**的类别。我选择了 15 种必须存在的产品。但在前端它只显示 7 个产品。

 **我附上了一个截图，最能很好地描述这个问题。！

[截图](http://i.stack.imgur.com/98nVC.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:36:57.383

检查（或最好进行批量更新）您的所有产品：

*   有库存（库存标签）
*   有正数量（相同标签）
*   选择了正确的网站（网站选项卡）

PS：参议员是扼流圈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T06:01:32.307

是的，我找到了解决方案：首先备份您的数据库，然后运行此查询

```
DELETE FROM catalog_category_product where product_id NOT IN (SELECT entity_id FROM (catalog_product_entity)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T06:37:49.720

您需要注意缓存管理，转到系统>缓存管理（刷新magento缓存和刷新缓存存储）。索引管理应该可以使用了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T23:24:06.163

当然，计数是不同的，因为并非后端中的所有内容都显示在前端

例子 ：-

*   缺货产品（如果您配置为隐藏缺货）
*   残疾人产品 不可见的个别产品 产品
*   产品未分配到网站
*   产品未分配到某些类别，因此您只能通过直接 url 看到它们
*   您必须重新索引目录平面产品和类别（如果您在配置中使用平面表）**

# iphone - NSUserDefaults 不一致还是设备不一致？- 苹果手机

> ID：12639179
> 
> 赞同：0
> 
> 时间：2012-09-28T11:30:13.860
> 
> 标签：iphone

我为 iPhone 开发了一个基于服务器的应用程序。但根据客户要求并避免服务器端过载，**我需要将数据存储在本地端。它都是文本，通常大小为 2-4 MB。** 为此，我使用**NSUserDefaults**而不是 sqlite 或 CoreData。该应用程序在其开发期间以及开发后测试期间已成功测试了大约 2-3 个月，并且从未在 iphone 3G - iphone 4S 的任何类型的 iphone 设备上显示任何类型的数据存储、更新或删除不一致。

现在实时应用程序中存在不一致问题，**当用户让应用程序在屏幕上闲置约 15-20 分钟**并且不按主页按钮时，意味着应用程序不在后台。在这种情况下，数据似乎丢失了。但是一旦刷新应用程序，在这种情况下数据会再次出现并且应用程序再次开始正常运行。这里的主要问题是，**当我刷新时，我什么都不做，只是从服务器获取新数据，它可能只是一到五条记录，或者什么也没有**。然后刷新应用程序，显示所有记录并正常运行。

我已经尝试发现这个问题大约 3 天了，但我的设备（iPhone 4S）上没有发生这种情况。据我所知，旧设备似乎有问题。

以前在测试中，这些都没有发生在旧设备或新设备上。我的问题是——

**a）这是我的编码不一致吗？**

**b) NSUserDefaults 对于实时应用程序的数据库管理是否不可信？**

**c) 它是与 NSUserDefaults 相关的设备版本特定问题吗？**

任何人都面临/面临 NSUserDefaults 的问题？

请建议我可以为此做些什么，或者告诉我必须使用 sqlite 或 CoreData 为下一个版本再次完成所有数据库工作。

无论如何，这是至关重要的，需要解决。

提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:44:21.967

正如我对您的建议，请介绍 Sqlite 数据库集成，因为当数据存储的大小较短时，它比 Sqlite 更好，但它不能处理大量数据，因此必须使用 Sqlite 或 coredata。

所以我建议使用 Sqlite 数据和 coredata。

# php - 对 DOMDocument 中节点的绝对引用以供以后使用？

> ID：12639182
> 
> 赞同：0
> 
> 时间：2012-09-28T11:30:43.827
> 
> 标签：php

我正在遍历一个 XML 文件并以 HTML 表单显示某些属性和节点值。表单提交后，我想直接将表单字段的值插入到 XML 文件中。

基本上，我正在为特定节点和属性构建一个“在线 xml 编辑器”。

我正在使用 DOMDocument 加载 XML，我找到了我想要更改的所有属性和节点值。我现在需要为每个已编辑节点保存唯一标识符，以便在发布后我可以将表单字段保存到 XML 中。

我可以将 XPATH 存储到这样的数组中

```
array_push($edited_images, $image->getNodePath()); 
```

...但我不知道如何在下一页访问这些节点。我需要某种方法来做到这一点：

```
$doc = new DOMDocument();
...
$node_to_edit = $doc->selectOneNodeBySpecificXPATH($edited_images[0]);
$node_to_edit->->setAttribute($a, 'FORM FIELD CONTENT FROM PAGE'); 
```

我找不到可以帮助我使用 XPATH 选择单个节点的方法。DOMDocument 的节点是否有更好的唯一标识符？还是我需要的更好的通用方法？

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:36:40.913

要使用存储的 XPath 选择单个节点，请使用[`DOMXPath`](http://php.net/class.domxpath)它的`query`函数：

```
$xpath = new DOMXpath($doc);
$node = $xpath->query($edited_images[0]);
$node && $node = $node->item(0); 
```

当它返回 a[`DOMNodeList`](http://php.net/DOMNodeList)时，如果成功，您需要选择第一个。如果`$node`仍然评估`false`做错误处理。

另一件事是使用 ID，但看起来您没有任何 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:34:09.743

要使用 XPath 选择单个节点，请使用[`DOMXPath`](http://php.net/manual/en/class.domxpath.php)：

```
$xpath = new DOMXpath($doc);
$node = $xpath->query($edited_images[0])->item(0); 
```

# android - Android RevMob 无法显示广告

> ID：12639186
> 
> 赞同：3
> 
> 时间：2012-09-28T11:30:55.177
> 
> 标签：android, revmob

当我将 RevMob 集成到我的应用程序中时，它向我显示以下错误：

```
No ads for this device/country right now 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:37:11.107

您是否在清单中给予许可`<uses-permission android:name="android.permission.INTERNET"/> <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> <uses-permission android:name="android.permission.READ_PHONE_STATE"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:35:43.337

要检查实现，您可以使用测试模式：

```
EnvironmentConfig.setTestingMode(true); 
```

这在 sdk 文档[http://sdk.revmob.com/android中有描述](http://sdk.revmob.com/android#testing-mode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T17:34:07.813

这意味着它所说的。Revmob 在您所在的国家/地区没有任何出版商。Revmob 在吸引开发人员而不是广告商方面投入了大量资金，因此他们有时缺乏广告。

只是为了检查您是否一切正常，请尝试在您的英国或美国设备上使用 VPN。他们通常有这些国家的广告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T17:14:40.950

这可能是您的设备/国家/地区等活动的临时中断。它必须在服务器/销售端自动解决。但是你可以使用测试模式检查你的实现，就像 Diogo 说的那样。

在最新版本中，您必须使用以下代码：

```
RevMob revmob = RevMob.start(this, APPLICATION_ID);
revmob.setTestingMode(RevMobTestingMode.WITH_ADS); 
```

# javascript - 在 ckeditor 的工具栏上添加多个额外的插件

> ID：12639195
> 
> 赞同：24
> 
> 时间：2012-09-28T11:32:01.723
> 
> 标签：javascript, ckeditor

我想在 ckeditor 的工具栏上添加多个插件（我已经创建）。我在 config.js 中编写了以下代码

```
CKEDITOR.editorConfig = function( config ) {
    config.toolbar_Full =  [
        ['Styles', 'Bold', 'Italic', 'Underline', 'SpellChecker', 'Scayt', '-', 'NumberedList', 'BulletedList'],
        ['Link', 'Unlink'], ['Undo', 'Redo', '-', 'SelectAll'], '/', ['timestamp', '-', 'linkbutton']
    ];
    config.extraPlugins = 'linkbutton, timestamp';
}; 
```

我有两个不同的自定义插件。但不接受另一个插件。如何在一个工具栏上添加另一个插件？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-18T11:18:40.000

除了逗号后的空格之外，您是对的，因此您对[http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.extraPlugins](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.extraPlugins)的定义应该是：

```
config.extraPlugins = 'linkbutton,timestamp'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-15T08:20:42.150

您也可以像这样添加另一个自定义插件：

```
extraPlugins: 'linkbutton,timestamp,justify' 
```

# python - 读写全局变量和列表

> ID：12639205
> 
> 赞同：1
> 
> 时间：2012-09-28T11:32:31.053
> 
> 标签：python, singleton, wxpython

编辑：正如我刚刚发现的那样，“Singleton”在 python 中并没有那么有用。python 改用“Borg”。[http://wiki.python.de/Das%20Borg%20Pattern](http://wiki.python.de/Das%20Borg%20Pattern)使用 Borg 我能够从不同的类中读取和写入全局变量，例如：

```
b1 = Borg()
b1.colour = "red"
b2 = Borg()
b2.colour
>>> 'red' 
```

但是我**无法**使用 borg 创建/读取列表，例如：

```
b1 = Borg()
b1.colours = ["red", "green", "blue"]
b2 = Borg()
b2.colours[0] 
```

这是 Borg 不支持的东西吗？如果是：如何创建可以从不同类读取和写入的全局列表？

* * *

原始问题：

我想从不同的类中读取和写入全局变量。伪代码：

```
class myvariables():
    x = 1
    y = 2

class class1():
    # receive x and y from class myvariables
    x = x*100
    y = y*10
    # write x and y to class myvariables

class class2():
    # is called *after* class1
    # receive x and y from class myvariables
    print x
    print y 
```

printresult 应该是“100”和“20”。我听说“Singleton”可以做到这一点......但我没有找到“Singleton”的任何好的解释。我怎样才能使这个简单的代码工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:35:08.417

Borg 模式类属性不会在新的实例调用上被重置，但实例属性会被重置。如果要保留以前设置的值，请​​确保使用类属性而不是实例属性。下面的代码将做你想做的事。

```
class glx(object):
    '''Borg pattern singleton, used to pass around refs to objs. Class
    attrs will NOT be reset on new instance calls (instance attrs will).
    '''
    x = ''
    __sharedState = {}
    def __init__(self):
        self.__dict__ = self.__sharedState
        #will be reset on new instance 
        self.y = ''  

if __name__ == '__main__':
    gl = glx()
    gl.x = ['red', 'green', 'blue']
    gl2 = glx()
    print gl2.x[0] 
```

为了证明这一点，请使用实例 attr y 再试一次。你会得到一个不愉快的结果。

祝你好运，迈克

# java - Servlet 发送重定向到欢迎页面？

> ID：12639208
> 
> 赞同：4
> 
> 时间：2012-09-28T11:32:35.327
> 
> 标签：java, servlets

如何强制 Servlet 重定向到欢迎页面，而无需指定确切的路径？就像只是将路径更改为最上面的路径：

```
response.sendRedirect("/"); 
```

这显然不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T11:38:15.737

```
response.sendRedirect(response.encodeRedirectURL(request.getContextPath() + "/")); 
```

如果您想支持禁用 cookie 支持的浏览器的会话跟踪（即使用 URL 重写），则需要调用 encodeRedirectURL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T11:36:27.460

感谢上面的 Michael-O，以下解决方案：

```
response.sendRedirect(request.getContextPath()); 
```

# javascript - 如何重置 Jcrop 插件？即如何允许更改目标图像的来源？

> ID：12639209
> 
> 赞同：0
> 
> 时间：2012-09-28T11:32:40.243
> 
> 标签：javascript, jquery, jquery-plugins, jcrop

我正在开发的应用程序允许用户将无限数量的图像添加到视口中。对于这些图像，允许进行一系列操作：*调整大小*、*拖动*、*旋转*和*裁剪*。对于裁剪功能，我使用的是*Jcrop*插件。

当点击裁剪的控件图标时，会出现一个灯箱，显示选中的图像（`<img>`元素都是一样的，只是`src`属性值每次都会改变）并允许用户裁剪它。*单击裁剪*图标时触发的关联事件处理程序是：

```
$(document).on("click", "div.cropper", function(){

            var ctrl = $(this),
                ref = ctrl.attr("reference"),
                obj = returnObj(objects,ref),
                target = $("#crop-target")
                crop_params = {};

            target.attr("src",obj.src);
            target.Jcrop({
                onSelect: function(c){
                    crop_params = c;
                }
            });
}); 
```

鉴于上面的代码，裁剪工作完美，但仅适用于我尝试的第一张图像。之后，当我单击任何其他图像的“裁剪器”图标时，将显示第一张图像。

我该如何解决这个问题？

PS：我已经搜索了关于 Jcrop 的现有问题，但找不到我的特定问题的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-07T16:48:43.517

您只需要创建一个新的 img 标签并以此启动 jCrop。

```
$('#parent_tag #img_to_crop').remove();
$('#parent_tag').html('<img id="img_to_crop"></img>');
$('#parent_tag #img_to_crop').Jcrop({ options ... }); 
```

# android - 创建无边界文本字段（Titanium studio Android）

> ID：12639217
> 
> 赞同：2
> 
> 时间：2012-09-28T11:33:15.857
> 
> 标签：android, ios, textfield, titanium-mobile, borderless

我是 Titanium Studio 的新手。我想为 Android 创建一个无边框的文本字段。我看到有一种适用于 Ios 的方法，但没有找到适用于 android 的方法。谁能建议我如何为android创建一个没有边框的文本字段。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:57:19.047

看来当前的技巧是在 Android 平台上应用透明图像。这似乎也适用于 IO，尽管我认为 IOS 的首选选项是设置borderStyle：Ti.UI.INPUT_BORDERSYLE_NONE

```
var myText = Ti.UI.createTextField({
  backgroundImage: 'images/transparent.jpeg'
}); 
```

# android - 在将文本发布到 tumblr 时，我得到的消息不是 401 未授权

> ID：12639222
> 
> 赞同：1
> 
> 时间：2012-09-28T11:33:26.980
> 
> 标签：android, authentication, authorization, tumblr

我正在使用以下代码在我的 Android 应用程序中将文本发布到 tumblr：

```
public class Snippet {
    HttpPost hpost = new HttpPost("http://api.tumblr.com/v2/blog/" + blogname.getText().toString() + ".tumblr.com/post");
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("type", "text"));
    nameValuePairs.add(new BasicNameValuePair("title", title));
    nameValuePairs.add(new BasicNameValuePair("body", body));
    try 
    {
        hpost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    }
    catch (UnsupportedEncodingException e) 
    {
        debug += e.toString();
    }
    consumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
    consumer.setTokenWithSecret(token, secret);
    try 
    {
        consumer.sign(hpost);
    } catch (OAuthMessageSignerException e) 
    {
        debug += e.toString();
    } catch (OAuthExpectationFailedException e) 
    {
        debug += e.toString();
    } catch (OAuthCommunicationException e) 
    {
        debug += e.toString();
    }
    DefaultHttpClient client = new DefaultHttpClient();
    HttpResponse resp = null;
    try 
    {
        resp = client.execute(hpost);
    } catch (ClientProtocolException e) 
    {
        debug += e.toString();
    } catch (IOException e) 
    {
        debug += e.toString();
    }
    String result = null;
    try {
        result = EntityUtils.toString(resp.getEntity());
    } catch (ParseException e) 
    {
        debug += e.toString();
    } catch (IOException e) 
    {
        debug += e.toString();
    }
} 
```

然后我得到以下结果：

```
{"meta":{"status":401,"msg":"Not Authorized"},"response":[]} 
```

我错过了什么吗？我有正确的访问令牌和密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T12:46:52.747

```
HttpPost hpost = new HttpPost("http://api.tumblr.com/v2/blog/" + blogname.getText().toString() + ".tumblr.com/post"); 
```

替换`.tumblr.com/post`为`.tumblr.com/posts`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T08:03:11.847

您首先需要在 tumblr 上创建一个博客，然后您才能在该博客上发帖。您需要手动创建一个博客，然后在该博客上发帖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:11:20.120

检查您的标题、正文或博客名称，如果它等于 null，您的回复将是 401

# mysql - 加入两个包含时间函数的 mysql 查询

> ID：12639226
> 
> 赞同：1
> 
> 时间：2012-09-28T11:33:58.013
> 
> 标签：mysql, join, date-format

我需要加入接下来两个查询的结果：

```
SELECT EXTRACT( HOUR 
FROM (
TIMEDIFF( NOW( ) , (

SELECT MIN( date_cmd ) 
FROM arc_commande_temp
WHERE id_cmd =  '6580' ) )
)
) AS HOURS

SELECT EXTRACT( MINUTE
FROM (
TIMEDIFF( NOW( ) , (

SELECT MIN( date_cmd ) 
FROM arc_commande_temp
WHERE id_cmd =  '6580' ) )
)
) AS MINS 
```

我知道我必须以某种方式加入它们，但是这个提取函数给我带来了很多问题。我有下一个仍然有效的查询

```
SELECT 
    * 
FROM 
    (SELECT 
        MIN(date_cmd) AS HOURS
    FROM 
        arc_commande_temp
    WHERE 
        id_cmd = '6580') AS HOURS, 
    (SELECT 
        MIN(date_cmd) AS MINS
    FROM 
        arc_commande_temp
    WHERE 
        id_cmd = '6580') AS MINS 
```

*   这不是我需要的，但我正在尝试修改它以获得我想要的 - 但是当我尝试更改其他内容以构建我需要的查询时......我收到一个错误:-(

提前致谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:51:10.587

```
SELECT 
    EXTRACT(HOUR FROM (TIMEDIFF(NOW( ), (
        SELECT MIN(date_cmd) 
        FROM arc_commande_temp
        WHERE id_cmd =  '6580' 
    )))) AS HOURS
    ,
    EXTRACT(MINUTE FROM (TIMEDIFF(NOW( ) , (
        SELECT MIN( date_cmd ) 
        FROM arc_commande_temp
        WHERE id_cmd =  '6580' 
    )))) AS MINS 
```

# windows - 如何在 Windows 上构建 xmlsec

> ID：12639229
> 
> 赞同：3
> 
> 时间：2012-09-28T11:34:02.560
> 
> 标签：windows, build, xmlsec

我正在尝试在 Windows 上构建[xmlsec](http://www.aleksey.com/xmlsec/) ......我**不是一个经验丰富的 C/C++ 开发人员，并且如果类似于“** *make ... make install* ”的东西不能解决问题，我也不是很熟悉构建过程。

xmlsec 带有一个 Win32 子目录，一个不错的 ECMAScript configure.js，它带有一组可选参数和一个自述文件，它解释了运行配置后，“ *nmake ... nmake install* ”应该可以解决问题。（显然这不是*那么*容易，否则我不会在这里发帖！）

xmlsec 还依赖于许多其他库（请参见[此处](http://www.zlatkovic.com/libxml.en.html#binaries)的图形）。我已经下载了这些库的源代码。

我的问题是我不知道如何安排这些来源，或者告诉 configure.js 脚本什么，以便让构建工作。

例如，nmake 进程抱怨它找不到“iconv.h”（iconv 是必需的库之一），这并不奇怪，因为没有。相反，有一个“iconv.h. **in** ”和一个“iconv.h. **build.in** ”......我不知道如何处理才能生成所需的“iconv.h”。

（我在命令提示符下使用 MS Visual Studio 2010（我*认为*这是推荐的方法。）

有没有人知道如何做到这一点？任何帮助都将非常感激。

TIA

迈克·皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-14T11:19:51.950

不需要构建xmlsec，可以直接从这个链接下载wheel文件 [https://github.com/mehcode/python-xmlsec/releases](https://github.com/mehcode/python-xmlsec/releases)

它安装了所有依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:06:10.153

嗨克里斯汀（@Kristine T）-（感谢您回复我！）

我没有做“make clean”，但现在已经这样做了（“make clean”，然后是“make”——虽然结果没有变化）。

我用“make”遇到的问题是它在编译“dl.c”时抛出一个错误，说“PACKAGE”是未定义的（第295行）。

我在使用 libxml2 的编译版本时也遇到了问题——“配置”总是说找不到它（它在那里，但是......），所以我一直在使用 --with-libxml-src=.. . 参数进行配置，为其提供 libxml2 的完整源代码，使其配置至少可以完成。

我没有与 openssl 或 libxslt 相同的问题，我可以告诉 configure 有关已编译的版本（使用 --with-XXX={path-to-dir}，或者只是省略 ={path} 位，在这种情况下它似乎找到了 MinGW 自己的版本，但这不适用于 libxml2。

麦克风

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T02:13:34.327

您是否尝试过使用 Mingw32 编译器的 Msys？在 Msys 中，您可以执行 make 和 make install 技巧。我在编译 xmlsec 时成功使用了 Msys。如果您想使用 Msys 并且遇到困难，我可以提供帮助。

无论如何，一般情况下，Zlatkovic提供的预编译文件夹（即C:\iconv\include\iconv.h）中必须有一个iconv.h文件。您可能需要再次下载该文件夹。在弄清楚所有依赖项在哪里之后，将路径放在环境路径中。供您参考，我曾经尝试过 configure.js 但没有成功。希望你比我幸运 :D

# advantage-database-server - 为什么 ADS 中没有 NVarCiChar 字段类型？

> ID：12639231
> 
> 赞同：1
> 
> 时间：2012-09-28T11:34:10.697
> 
> 标签：advantage-database-server

我想知道为什么 ADS 中没有不区分大小写的 Unicode 字符字段类型？

虽然您可以将 NVarChar 字段的索引排序规则设置为不区分大小写，但使用简单查询`WHERE field = 'HeLlO WoRlD'`找不到值`'Hello World'`？

我知道这`WHERE field = 'HeLlO WoRlD' COLLATE ads_default_ci`行得通，但对每一次比较都这样做不是一种选择。

CiChar 字段类型不支持 Unicode（除非您在其中存储 UTF-8 字符串会导致其他问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:02:13.133

从根本上说，与常规字符字段不同，Unicode 可以存储所有语言的字符，因此没有特定的排序规则/语言与之关联。排序规则来自于它的使用、索引或排序方式。如果要定义 NVarCiChar 字段，则需要将语言/区域设置（英语与法语或德语区分大小写）与此类字段类型相关联，这会给系统带来不必要的复杂性（当英语 ci field 是与德语 ci 字段进行比较）。

尽管 ciChar 类型在某些方面更易于使用，但它也有缺点。主要是它不是标准的，因此它不能移植到其他数据库，并且需要在代码中进行一些特殊处理。它不太灵活。尝试将 ciChar 字段与常规 char 字段进行比较时会导致问题——这种比较需要 COLLATE 子句。由于比较标准的使用 COLLATE 子句的方式支持不区分大小写的比较，以更清晰的方式同时更灵活，我们决定不区分大小写的 Unicode 字段是不必要的。通过为 SQL 语句句柄指定不区分大小写的 Unicode 排序规则来避免使用多个 COLLATE 子句，还可以轻松地对 Unicode 字符串进行不区分大小写的比较。

# android - Android：音乐播放器会在一段时间后自行启动

> ID：12639234
> 
> 赞同：0
> 
> 时间：2012-09-28T11:34:21.160
> 
> 标签：android, service, media-player

在我的应用程序中，我在服务中使用媒体播放器来播放音乐文件。它正在工作，但最终会在一段时间后自行启动，并且音乐开始播放。我不知道问题出在哪里。下面，我发布我的代码：

**媒体播放器服务**

```
public class ChalisaService extends Service implements OnCompletionListener
{
static MediaPlayer mediaPlayer;
static int playerFlag = 0;
TelephonyManager tm;
ActivityManager actManager;
/**
 * 0 for stop/pause
 * 1 for play*/
@Override
public IBinder onBind(Intent intent) 
{
    return null;
}//onBind

@Override
public void onCreate() 
{
    super.onCreate();

    mediaPlayer = MediaPlayer.create(getApplicationContext(), R.raw.chalisa);
    mediaPlayer.setVolume(100, 100);
    mediaPlayer.setOnCompletionListener(this);
    tm = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
    tm.listen(mPhoneListener, PhoneStateListener.LISTEN_CALL_STATE);
}//onCreate

@Override
public int onStartCommand(Intent intent, int flags, int startId) 
{
    if(mediaPlayer.isPlaying())
    {
        mediaPlayer.pause();
        /*HanuAlarm.txtPlay.setText("Play");
        HanuAlarm.btn_Play.setBackgroundResource(R.drawable.btnplay);*/
        playerFlag = 0;
    }//if
    else
    {
        mediaPlayer.start();
        /*HanuAlarm.txtPlay.setText("Pause");
        HanuAlarm.btn_Play.setBackgroundResource(R.drawable.btnpause);*/
        playerFlag = 1;
    }//else

    startForeground(0, null);
    return playerFlag;
}//onStartCommand

@Override
public void onDestroy() 
{
    super.onDestroy();
    /*//mediaPlayer.stop();
    //mediaPlayer.release();
    playerFlag = 0;
    Log.v("Chalisa service", "on destroy called");*/
}//onDestroy

private PhoneStateListener mPhoneListener = new PhoneStateListener() {
    public void onCallStateChanged(int state, String incomingNumber) {
        switch (state) {
        case TelephonyManager.CALL_STATE_RINGING:
            if(mediaPlayer.isPlaying())
            {
                mediaPlayer.pause();
                playerFlag = 0;
            }//if
            break;

        case TelephonyManager.CALL_STATE_OFFHOOK:
            if(mediaPlayer.isPlaying())
            {
                mediaPlayer.pause();
                playerFlag = 0;
            }//if
            break;

            /**
             * Nitish 
             * 26 Sep 2012, Wed 
             * 11:50 AM*/
        case TelephonyManager.CALL_STATE_IDLE:
            if(!mediaPlayer.isPlaying())
            {
                mediaPlayer.start();
                playerFlag = 1;
            }//if
        default:
            Log.d("Chalisa Service", "Unknown phone state=" + state);
        }
    } 
};

public void onCompletion(MediaPlayer mp) 
{
    mp.stop();
    mp.release();
    playerFlag = 0;
    stopSelf();
    updateUI();
    Log.v("Chalisa Service media player", "on completion listener called");
}

private void updateUI() 
{
    Intent in = new Intent("com.dzo.HanumanChalisaWithAudioAndAlarm.UPDATE_UI");
    in.putExtra("Player_FLAG_VALUE", playerFlag);
    getApplicationContext().sendBroadcast(in);
}
}//ChalisaService 
```

# c#-4.0 - 不能隐式转换类型“int？” 到'system.collections.generic.list ?

> ID：12639246
> 
> 赞同：0
> 
> 时间：2012-09-28T11:35:14.843
> 
> 标签：c#-4.0, entity-framework-4

我收到错误

> 不能隐式转换类型“int？” 到'system.collections.generic.list？

有人可以帮我吗？

```
internal class PatchDetails
{
    internal List<int> ServerID { get; set; }
    internal List<string> PatchStatus { get; set; }
}
class Program
{        
    void PatchQueue()
    {
        List<PatchDetails> patchinfo = new List<PatchDetails>();            
        using (PatchEntities server = new PatchEntities())
        {
            patchinfo = (from patches in server.AppPM_Patches
                         where patches.PatchStatus == "Started" 
                         || patches.PatchStatus == "NotStarted"
                         select new PatchDetails { ServerID = patches.ServerId, PatchStatus = patches.PatchStatus }).ToList();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:40:42.943

您将 a`int`和 a`string`放入对象中，因此我认为您希望每个`PatchDetails`都包含这些，而不是它们的列表：

```
internal class PatchDetails
{
  internal int? ServerID { get; set; }
  internal string PatchStatus { get; set; }
} 
```

如果您不希望该`ServerID`属性可以为空，则从`int?`查询中获取值：

```
ServerID = patches.ServerId.Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:40:12.350

select 语句返回单个 PatchDetails 对象，您尝试将单个类强制转换为不正确的列表。

如果您尝试获取单个对象，则可以删除 .ToList()。

# php - 如何根据表单中的先前值预填充字段？

> ID：12639250
> 
> 赞同：0
> 
> 时间：2012-09-28T11:35:43.167
> 
> 标签：php, javascript, jquery, symfony

（我正在使用 Symfony2） 我有一个表格，要求输入姓名和名字以及电子邮件地址。

电子邮件地址始终采用相同的模式：firstname.name@mycompany.com

例如，我希望当用户输入“John”作为名字并输入“Adams”作为姓氏时，电子邮件地址默认设置为：“john.adams@mycompany.com”（但它不应该被禁用，因为它有时会改变一点，如果用户有复杂的名字等......）。

我从来没有做过这样的事情，我被这个问题困住了，尽管它可能很简单，但我无法解决。

任何帮助将不胜感激非常
感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:17:03.137

我认为有很多方法：

解决方案 1：在实体中

```
public function setEmail($email)
{
        $email = $this->email.firstName.'.'.$this->lastName.'@domain.com'
        $this->email = $email;
} 
```

解决方案2：在控制器中

```
in the createAction and in the updateAction

$email = $entity->getEmail().'.'.$entity->getLastName().'@domain.com';
$entity->setEmail($email); 
```

解决方案 3：您可以直接在 javascript 中执行此操作（使用 jquery 很容易）您将事件放在 Keyup 上以生成电子邮件字段。

```
$('#form_firstName').live('keyup',function() {
       var email = $('#form_firstName').val()+'.'+$('#form_lastName').val().'@domain.com';
    $('#form_email').val(email);
});
$('#form_lastName').live('keyup',function() {
       var email = $('#form_firstName').val()+'.'+$('#form_lastName').val().'@domain.com';
    $('#form_email').val(email);
}); 
```

# xml - 从 XML 中检索 URL

> ID：12639252
> 
> 赞同：0
> 
> 时间：2012-09-28T11:35:49.007
> 
> 标签：xml, parsing, url, xpath

我有以下 XML -

```
<title type="text/html">First part of string</title>
<content type="text/html"><p>And Second part of string</p> </content>
<link rel="alternate" type="text/html" href="http://www.FooBar.com"/> 
```

并在`XPath`-

```
use XML::XPath;
use XML::XPath::XMLParser;

my $file = 'MY.xml';
my $xp = XML::XPath->new(filename=>$file);

my $body = $xp->findvalue('entry/activity:object/content');
print "$body\n";
my $title = $xp->findvalue('entry/activity:object/title');
print "$title\n"; 
```

哪个返回 -

```
First part of string And Second part of string 
```

我还需要它来输出 -

```
http://www.FooBar.com 
```

我尝试添加 -

```
my $URL = $xp->findvalue('entry/activity:object/link');
print "$URL\n"; 
```

但这并没有输出任何东西。

如何编辑我的脚本以包含 URL 字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:44:27.460

URL 在`href`属性中，而不是在`link`元素的文本内容中（它没有任何内容），所以你需要

```
entry/activity:object/link/@href 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:43:50.273

href 值是链接元素的一个属性，所以使用：

```
<path>/link/@href 
```

# php - 检查 javascript 是否可用，如果 javascript 不可用则重定向

> ID：12639258
> 
> 赞同：5
> 
> 时间：2012-09-28T11:36:11.130
> 
> 标签：php, javascript, html

> **可能重复：**
> [如何检测 JavaScript 是否被禁用？](https://stackoverflow.com/questions/121203/how-to-detect-if-javascript-is-disabled)

在我的 php 应用程序中，我需要检查浏览器中是否打开了 javascript。我已经尝试过了`<noscript><p>javascript is off<p></noscript>`，它工作正常。但是如果 javascript 是这样开发的，我需要重定向到一个页面

```
<noscript>
<?php header('Location: index.php');?>
</noscript> 
```

但是 i/ts 总是重定向到 index.php，有任何方法可以做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T11:38:23.817

您的解决方案显然无法正常工作，因为 php 在页面提供给客户端之前执行

你可以改为做类似的事情

```
<noscript>
  <meta http-equiv="refresh" content="0;URL='http://example.com/'">
</noscript> 
```

在文档的开头

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T11:41:17.840

```
<noscript><meta http-equiv="refresh" content="1;url=error.html"></noscript> 
```

如果 JS 被禁用，请尝试此重定向 Php 脚本独立于 js 运行

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T11:45:13.690

noscript存在**已知**[问题](https://stackoverflow.com/questions/2170484/shouldnt-we-use-noscript-tag)

 **而是这样做：

```
<html>

<head>

<script>
window.location.href="javascriptEnabled.html";
/*Since javascript is enabled redirect to javascript based page*/
</script>

</head>

<body>
Showing Static Website since javascript is not enabled..
</body>

</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T11:40:19.120

没有好的方法可以做到这一点，因为没有客户端交互，您无法从客户端获取信息。

你可以做这样的事情......

1.  设置元重定向以在 5 秒后触发
2.  使用 javascript 覆盖元重定向

因此，如果启用了 javascript，您将进入 javascript 页面，否则将进入非 javascript 页面

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T11:41:46.820

它确实重定向到 index.php，因为它`<?php header('Location: index.php');?>`是由服务器处理的，而`<noscript>`是由客户端处理的。

正确的方法是在客户端使用 javascript 设置 cookie，然后在服务器上使用 php 检查 cookie 的存在，如果 cookie 确实存在，则 javascript 开启，否则关闭。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T12:00:10.320

您可以在这里使用不同的方法

*   使用无 javascript 版本作为默认版本
*   使用 javascript 重定向到增强版本

请记住，最好不要有单独的网站版本。[您可以使用http://modernizr.com/](http://modernizr.com/)或[https://github.com/filamentgroup/enhance](https://github.com/filamentgroup/enhance)等库进行渐进式增强**

# java - FindBugs 警告：使用 keySet 迭代器而不是 entrySet 迭代器效率低下

> ID：12639259
> 
> 赞同：36
> 
> 时间：2012-09-28T11:36:11.943
> 
> 标签：java, performance, findbugs

请参考以下方法：

```
public Set<LIMSGridCell> getCellsInColumn(String columnIndex){
    Map<String,LIMSGridCell> cellsMap = getCellsMap();
    Set<LIMSGridCell> cells = new HashSet<LIMSGridCell>();
    Set<String> keySet = cellsMap.keySet();
    for(String key: keySet){
      if(key.startsWith(columnIndex)){
        cells.add(cellsMap.get(key));
      }
    }
    return cells;
  } 
```

FindBugs 给出这个警告信息：

> "**低效使用 keySet 迭代器而不是 entrySet 迭代器** 此方法使用从 keySet 迭代器检索到的键来访问 Map 条目的值。在映射的 entrySet 上使用迭代器更有效，以避免 Map .get(key) 查找。”

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-28T11:38:44.970

您正在检索所有键（访问整个映射），然后对于某些键，您再次访问映射以获取值。

您可以遍历地图以获取地图条目（[Map.Entry](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html)）（一对键和值）并且只访问一次地图。

[Map.entrySet()](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#entrySet%28%29)提供一组`Map.Entry`s，每个都带有键和对应的值。

```
for ( Map.Entry< String, LIMSGridCell > entry : cellsMap.entrySet() ) {
    if ( entry.getKey().startsWith( columnIndex ) ) {
        cells.add( entry.getValue() );
    }
} 
```

**注意**：我怀疑这将是一个很大的改进，因为如果您使用映射条目，您将为每个条目实例化一个对象。我不知道这是否真的比`get()`直接调用和检索所需的参考更快。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-06-30T07:09:36.957

如果有人仍然对详细且有数字支持的答案感兴趣：是的，您应该使用`entrySet()`vs.`keySet()`以防您*遍历整个*地图。有关详细数字，请参阅[此 Gist](https://gist.github.com/AFulgens/42ef34d625dd5b00f62d9ed77e727ccb)。我使用 JMH 为使用 Oracle JDK8 的 Map 的默认实现运行基准测试。

主要发现是：迭代`keySet`和重新查询每个键总是有点慢。一旦你有更大的地图，乘数就会变得相当大（例如，对于 a`ConcurrentSkipListMap`它总是 5-10x；而对于`HashMap`s 它不大于 2x 最多有一百万个条目）。

然而，这些仍然是非常小的数字。迭代超过 100 万个条目的最慢方法是使用 a `ConcurrentSkipListMap.keySet()`，大约为 500-700 毫秒；而迭代`IdentityHashMap.entrySet()`只是 25-30 毫秒，`LinkedHashMap.entrySet()`紧随其后的是 40-50 毫秒（不足为奇，因为它有一个`LinkedList`内部，这有助于迭代）。作为上述链接要点的概述：

```
Map type              | Access Type | Δ for 1M entries
----------------------+-------------+-----------------
HashMap               | .entrySet() |     69-72  ms
HashMap               |   .keySet() |     86-94  ms
ConcurrentHashMap     | .entrySet() |     72-76  ms
ConcurrentHashMap     |   .keySet() |     87-95  ms
TreeMap               | .entrySet() |    101-105 ms
TreeMap               |   .keySet() |    257-279 ms
LinkedHashMap         | .entrySet() |     37-49  ms
LinkedHashMap         |   .keySet() |     89-120 ms
ConcurrentSkipListMap | .entrySet() |     94-108 ms
ConcurrentSkipListMap |   .keySet() |    494-696 ms
IdentityHashMap       | .entrySet() |     26-29  ms
IdentityHashMap       |   .keySet() |     69-77  ms 
```

所以底线是：这取决于您的用例。虽然迭代数字并不大，特别是对于相当小的地图来说，迭代肯定**更快。**`entrySet()`但是，如果您经常迭代具有 100 万个条目的 Map，最好使用更快的方法；）

当然，这些数字只是为了相互比较，而不是绝对的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-28T11:38:45.067

您正在获取地图中的一组键，然后使用每个键从地图中获取值。

相反，您可以简单地遍历通过.Entry返回给您的[Map.Entry](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.Entry.html)`entrySet()`键/值对。这样你就可以避免相对昂贵的`get()`查找（注意这里使用了*相对*这个词）

例如

```
for (Map.Entry<String,LIMSGridCell> e : map.entrySet()) {
   // do something with...
   e.getKey();
   e.getValue();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-26T08:21:35.860

这是建议；不是你的问题的真正答案。当您使用 ConcurrentHashMap 时；下面是javadoc中提到的迭代器行为

> 视图的迭代器是一个“弱一致”的迭代器，它永远不会抛出 ConcurrentModificationException，并保证在构造迭代器时遍历元素，并且可以（**但不保证**）反映构造后的任何修改。

所以如果你使用 EntrySet 迭代器；这可能包含陈旧的键/值对；所以会更好；从 keySet iterator() 获取密钥；并检查收藏价值。这将确保您从集合中获得最近的更改。

如果您对故障安全迭代器没问题；然后检查此[链接](http://howtodoinjava.com/2013/04/01/performance-comparison-of-different-ways-to-iterate-over-hashmap/)；它使用 entrySet 声明；对性能的改善不大。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-14T06:54:32.887

在 keyset 中，您需要获取所有键，然后搜索集合中的每个键。

此外，遍历 entrySet 更快，因为您不会为每个键查询两次映射。

如果您只需要 Map 的键或值，请使用 keySet() 或 values()。

# c++ - 将哈希表的 [] 运算符重载到向量

> ID：12639260
> 
> 赞同：2
> 
> 时间：2012-09-28T11:36:15.327
> 
> 标签：c++, oop, vector, operator-overloading, hashtable

我正在使用 C++ 编写一个简单的哈希表。我有插入、删除和搜索指定键的哈希表的方法。我知道 C++ map STL 容器可以处理我的情况，但我有点想编写自己的代码作为教育练习。

基本上我有一个哈希表，它将采用单个字符串并将其映射到其他字符串的向量。这在方法中很容易做到，因为调用 .Add() 或 .Delete() 将按预期运行。但是，我想为能够对向量执行这些操作的类创建一个重载的 [] 运算符。

例如，如果我想在向量中添加一个项目，我可以这样写：

```
     hashTable[string1] = newString;

```

这会将新字符串设置为我的向量的成员。删除和搜索也是如此。

```
    hashTable[string1] = "";
    cout << hashTable[string1] << endl;

```

我的主要问题是我不知道如何重载`[]`运算符来获得此功能。我现在已经编写了这个函数。它适用于基本的 1 对 1 字符串匹配，但不适用于字符串到矢量匹配。

```
    //返回对要更新的向量的引用然后重新分配？

        vector& HashClass::operator[](const string index)
        {
           断言（尺寸 >= 0 && 尺寸 < 最大尺寸）；
           散列键）;
           返回哈希表[索引]；     
        }

```

我认为我最坚持的想法是稍后需要分配一个向量返回。作为用户，我会觉得这个很笨拙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:53:29.817

这个问题与另一个问题密切相关：当你访问一个不存在的值而不是赋值时，你想要什么行为？换句话说，当你写的时候你想发生什么：

```
std::cout << hashTable[string] << std::endl; 
```

并且`string`不存在于表中？

有两种可能的方法：您可以将其视为错误，然后抛出异常、中止或类似的东西；或者您可以返回某种默认值，使用默认构造函数构建，或者由客户端早些时候提供。

标准 map 和 unordered_map 采用第二种方法，使用默认构造函数构造一个新值。这允许一个非常简单的解决方案：如果`operator[]`不存在，则插入它，并使用默认值对其进行初始化。然后返回对它的引用； `hashTable[string] = newString;`通过对已经存在的值的引用进行分配。

在许多用例中，第一种方法会更可取（可能使用 `contains`函数，因此您可以预先测试它是否`operator[]` 会找到某些东西）。要实现第一种方法，您必须首先为每种访问类型实现特定功能：

```
template <typename Key, typename Value>
class HashTable
{
public:
    Value* get( Key const& key ) const;
    void set( Key const& key, Value const& value );
}; 
```

（我通常会公开这些信息；没有理由禁止客户使用它们。）

然后，您定义`operator[]`返回一个代理，如下所示：

```
template <typename Key, typename Value>
class HashTable
{
public:
    class Proxy
    {
        HashTable* myOwner;
        Key myKey;
    public:
        Proxy( HashTable* owner, Key const& key )
            : myOwner( owner )
            , myKey( key )
        {
        }

        operator Value const&() const
        {
            Value const* result = myOwner->get( myKey );
            if ( result == NULL ) {
                //  Desired error behavior here...
            }
            return *result;
        }

        Proxy const& operator==( Value const& value ) const
        {
            myOwner->set( myKey, value );
            return *this;
        }
    };

    Value* get( Key const& key ) const;
    void set( Key const& key, Value const& value );

    Proxy operator[]( Key const& key )
    {
        return Proxy( this, key );
    }
}; 
```

因此，当你写：

```
hashTable[key] = newString; 
```

，代理`operator=`将调用`hashTable.put( key, newString )`；但是，在其他情况下，它将调用代理上的隐式类型转换，该代理调用`hashTable.get( key )`.

在某些情况下，即使您希望返回默认值，最好使用此解决方案：该`get`函数不需要向哈希表中插入任何内容，因此该表不会填满所有未命中的值，你可以重载`operator[]`on ，所以你也可以在哈希表`const`上使用它。`const`此外，它不需要值类型具有默认构造函数。

相对于标准中使用的解决方案，它确实有一个缺点。因为你不能重载`operator.`，你不能让代理表现得像一个引用，比如：

```
hashTable[string].someFunction(); 
```

不工作。一种解决方法是`operator->`在代理中重载，但这会导致语法有些不自然：

```
hashTable[string]->someFunction();  //  But the hash table contains
                                    //  values, not pointers!!! 
```

`a`（不要被隐式转换为引用所误导。在表达式中 不会考虑隐式转换`a.b`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:48:39.203

在 C++ 中，`[]`对关联容器的访问通常具有以下语义：默认构造一个映射类型的对象，用键插入它，并返回对插入的映射对象的引用。

所以你`operator[]`将被实施为：

```
 string& HashClass::operator[](const string index)
    {
       assert(size >= 0 && size < maxSize); 
       Hash(key);
       vector &v = hashTable[index];     
       if (index in v) {
          ...
       } else {
          v.push_back(string());
          return v.back();
       }
    } 
```

# java - Java DB 在没有 NetBean 的情况下无法运行

> ID：12639261
> 
> 赞同：1
> 
> 时间：2012-09-28T11:36:15.640
> 
> 标签：java, netbeans-7, javadb

> **可能重复：**
> [如何以编程方式启动 apache derby jar 文件？](https://stackoverflow.com/questions/9725376/how-can-i-start-apache-derby-programmatically-jar-file)

我创建了一个包含一些客户信息的桌面应用程序。该程序

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {   
 try{ 
Class.forName("org.apache.derby.jdbc.EmbeddedDriver");  
Connection conn= DriverManager.getConnection("jdbc:derby://localhost:1527/data;create=true;user=APP;password=app");  

String id = jTextField1.getText();  
String name = jTextField2.getText();  

String query = "INSERT INTO CUSTOMER(id, Name) VALUES (' "+id+" ',' "+name+"')";  
Statement stmt = conn.createStatement();  
int executeUpdate = stmt.executeUpdate(query);  
int ans =JOptionPane.showConfirmDialog(null, "Record Saved Successfully. Do you want to Add More Data ?");  
if (ans== JOptionPane.YES_OPTION){  
       this.dispose();  
   window1 newWindow = new window1();  
newWindow.setVisible(true);  
}  

}  
catch ( ClassNotFoundException | SQLException e) {  
    JOptionPane.showMessageDialog(null, "Cannot Save!!");  

}           
} 
```

或者，如果我从`startNetworkServer.bat`C:\Program Files\Java\jdk1.7.0_03\db\bin 开始，这可以正常工作。

但是如何自动启动那个bat文件呢？

# android - android ndk 调试陷阱

> ID：12639264
> 
> 赞同：2
> 
> 时间：2012-09-28T11:36:35.573
> 
> 标签：android, debugging, android-ndk

在 NDK (Only-native-C++) 应用程序中，设置编程调试陷阱的正确方法是什么？我的意思是停止应用程序以检查调用堆栈、变量等。例如，在我的 GameEngine 中的 WIN32 调试陷阱下声明为

```
#define DIE() __asm{ int 3 } 
```

对于 iOS，它是

```
#   if TARGET_IPHONE_SIMULATOR
#       define DIE() {__asm__("int3");}
#   else
#       define DIE() {__asm__("trap");}
#   endif 
```

对于 Android NDK 应用程序，什么是正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T22:46:54.483

来自“android/log.h”的 __android_log_assert(...) 应该可以完成这项工作。

这应该会让你进入调试器，因为它会引发 SIGTRAP。有关使用摘要，请参阅[http://mobilepearls.com/labs/native-android-api/ 。](http://mobilepearls.com/labs/native-android-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T13:49:47.120

```
#include <signal.h>
raise(SIGTRAP); 
```

或类似[http://androidxref.com/5.0.0_r2/xref/system/core/liblog/logd_write.c](http://androidxref.com/5.0.0_r2/xref/system/core/liblog/logd_write.c)函数：__android_log_assert

```
__builtin_trap(); 
```

# c# - 如何在 Google Plus API 中按 ActivityId、CommentId 和 UserId 删除评论？

> ID：12639271
> 
> 赞同：-1
> 
> 时间：2012-09-28T11:36:52.570
> 
> 标签：c#, asp.net, google-plus

我正在研究 Google plus 模块。我已经得到了用户的 ActivityId 的评论。但是，问题是，我想通过删除 Google Plus API 中的 ActivityId、CommentId 和 UserId 的评论来删除用户的评论，是吗可能，如果是，那么如何。请给我有关此的全部详细信息。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:31:32.160

Google+ API 目前不支持此功能。API 目前仅允许对公共数据进行读取操作。

# mobile - 移动设备上网站右侧的空白

> ID：12639273
> 
> 赞同：4
> 
> 时间：2012-09-28T11:37:10.373
> 
> 标签：mobile, removing-whitespace

[http://cardiffhosp.rapdevs.co.uk/](http://cardiffhosp.rapdevs.co.uk/)是围绕 WooTheme Canvas 构建的，这是一种响应式设计。

我不得不禁用视口元标记，因为我不希望布局响应。

现在它在移动设备上看起来好多了，但右侧出现了一个白色区域。大部分在 iPhone/iPad 上可见，但在其他设备上缩小显示存在空白。

添加以下代码，解决了我的问题，但导致导航在 iPhone 上停止工作并导致 Windows 7 手机上的显示问题......

```
html, body {
   overflow-x:hidden;
} 
```

有没有人有更好的解决方案来去除空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-05T00:41:13.200

您可以尝试添加`width:100%`，看看是否解决了溢出导致的问题，IE：

```
html, body {
    overflow-x:hidden;
    width:100%;
   /* You may also want to try adding:*/
    margin: 0;
    padding: 0;
} 
```

如果这仍然导致问题，那么您将需要找到导致问题的元素。

几种方法可以做到这一点。（请务必`overflow-x:hidden;`在开始之前删除。）

1) 打开检查器，从包含其他元素的 div 或元素开始。将这些 div 设置为`display:none`. 如果多余的空白消失了，那么你可以找到有问题的元素并修复它的 CSS。

如果该选项太耗时或您在执行此操作时遇到困难，您可以尝试其他选项：

2)[这个网站](http://wernull.com/2013/04/debug-ghost-css-elements-causing-unwanted-scrolling/)有一些 CSS 概述了您网站上的所有元素。这可以帮助您找到导致溢出的原因。本网站使用的 CSS 是：

```
* {
   background: #000 !important;
   color: #0f0 !important;
   outline: solid #f00 1px !important;
} 
```

他们还提供了一个[javascript 书签](http://javascript:(function()%7Bdocument.body.innerHTML+=%22%3Cstyle%3E*%7Bbackground:%20#000%20!important;color:%20#0f0%20!important;outline:%20solid%20#f00%201px%20!important;%7D%3C/style%3E%22;%7D)();)，这也有助于解决这个问题。

# android - 安卓蓝牙SCO

> ID：12639277
> 
> 赞同：0
> 
> 时间：2012-09-28T11:37:21.160
> 
> 标签：android, bluetooth, bluetooth-sco

我在我的 android 应用程序中遇到了蓝牙 SCO 音频的问题。

我为动作 ACL_CONNECTED 和 ACL_DISCONNECTED 注册了一个接收器，以捕获蓝牙 SCO 设备连接和断开连接。在收到 ACL_CONNECTED 时，我正在检查蓝牙设备是否有音频服务（耳机），如果有音频服务，我正在实例化 AudioTrack（`new AudioTrack(....)`）并启动蓝牙 SCO（`startBluetoothSco(); setBluetoothScoOn(true);`）。

我的应用中有一个按钮可以将 pcm 数据写入 AudioTrack。在这个应用程序中，我听不到我写的 PCM 数据的声音。

我尝试不使用任何接收器，`onCreate()`仅实例化 AudioTrack 并启动蓝牙 SCO。在启动应用程序之前，我将耳机连接到我的设备并进行了测试，它工作正常。

但是，为什么我的应用程序在运行时建立蓝牙 SCO 连接时无法工作，具体取决于 ACL_CONNECTED 意图。

如果有人知道解决方案，请回复我。我添加了所有必需的权限 BLUETOOTH、BLUETOOTH_ADMIN、MODIFY_AUDIO_SETTINGS（不要报告这些权限中的拼写错误）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:30:32.370

使用什么版本的 API？

创建接收器时，请使用 BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED 而不是 ACL_CONNECTED。

```
intentFilter.addAction(BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED); // API 11
intentFilter.addAction(AudioManager.ACTION_SCO_AUDIO_STATE_CHANGED); // API 8
intentFilter.addAction(AudioManager.ACTION_SCO_AUDIO_STATE_UPDATED); // API 14 
```

# java - 如何在 Selenium webdriver 中等待警报？

> ID：12639280
> 
> 赞同：10
> 
> 时间：2012-09-28T11:37:45.137
> 
> 标签：java, selenium, alert, selenium-webdriver

> **可能重复：**
> [selenium 2.4.0，如何检查是否存在警报](https://stackoverflow.com/questions/7076758/selenium-2-4-0-how-to-check-for-presence-of-an-alert)

我正在使用以下代码关闭警报窗口：

```
Alert alert3 = driver.switchTo().alert();
alert3.dismiss(); 
```

警报会在主窗口打开几秒钟后出现。

如何等待并检查是否出现警报？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T12:12:49.510

没有等待警报的默认方法。

但是，您可以像这样编写自己的方法。

```
waitForAlert(WebDriver driver)
{
   int i=0;
   while(i++<5)
   {
        try
        {
            Alert alert = driver.switchTo().alert();
            break;
        }
        catch(NoAlertPresentException e)
        {
          Thread.sleep(1000);
          continue;
        }
   }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T13:05:08.003

```
public boolean isAlertPresent() {

  boolean presentFlag = false;

  try {

   // Check the presence of alert
   Alert alert = driver.switchTo().alert();
   // Alert present; set the flag
   presentFlag = true;
   // if present consume the alert
   alert.accept();

  } catch (NoAlertPresentException ex) {
   // Alert not present
   ex.printStackTrace();
  }

  return presentFlag;

 } 
```

# c - 这些 C 语句之间有什么区别？

> ID：12639286
> 
> 赞同：1
> 
> 时间：2012-09-28T11:38:15.707
> 
> 标签：c, bit-manipulation

```
int y = 17*x;
int y = x + 16*x;
int y = x + (x<<4) 
```

所有数字都等于 17x ，但它们在执行或其他方面有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:47:18.387

严格来说，它取决于 的类型和值`x`。就标准而言，溢出符号`int`是未定义的行为，因此例如，根据您的代码是否包含 2 个溢出操作或仅 1 个，*允许实现的行为不同。*

假设一切都是保持在界限内的整数，那么这些语句具有相同的含义。有可能它们都会产生完全相同的代码，但您必须通过编译器和编译器选项进行检查。这更有可能是您拥有的优化越多。

您可能会看到为第一个发出的代码的一个版本（编译器发出乘法）和为其他两个发出的不同代码（编译器发出加法和乘以 16 或移位 4 也是合理的） ）。即使没有优化，编译器也会`1<<4`在编译时进行评估——标准要求编译器能够在某些上下文中评估此类表达式，因此编译器没有理由不这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:57:33.373

```
1) int y = 17*x;
2) int y = x + 16*x;
3) int y = x + (x<<4); 
```

区别在于：1) 可读，2) 晦涩难懂，3) 更加晦涩难懂。

现代编译器不需要手动优化，用按位指令代替乘法。它很可能会将所有 3 种替代方案翻译成相同的机器代码。

如果编译器不好并且*没有*将它们转换为相同的机器代码，那么我们就无法知道哪个是最快的，因为它依赖于特定 CPU 架构的底层汇编指令的速度。传统上，逻辑移位指令比乘法指令快，但您不能假设所有 CPU 都是如此。

# ruby - ruby ocra 不会使用 business_time gem 编译脚本

> ID：12639292
> 
> 赞同：2
> 
> 时间：2012-09-28T11:38:32.203
> 
> 标签：ruby, rubygems, ocra

尝试使用 ocra 将 ruby​​ 脚本编译为 Windows 可执行文件。由于某种原因，将 business_time 添加到脚本后，它拒绝编译。如果我删除 require 'business_time' 它将编译。所以我为 business_time 创建了一个脚本，它可以工作但不会编译。努力从错误消息中查看问题所在。

提前致谢。

```
require 'rubygems'
require 'business_time'

puts 1.business_day.ago.strftime("%Y%m%d") 
puts 1.business_day.ago.strftime("%m/%d/%Y") 
```

> C:/Ruby/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:467：使用 RbConfig 代替过时和弃用的 Config。C:/Ruby/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib/i18n/tests/basics.rb:8:in `test' : unknown command 'a' (ArgumentError) from C:/Ruby/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib/i18n/tests/basics.r b:8:in`'来自 C:/Ruby/lib/ruby/gems/1.9 .1/gems/i18n-0.6.1/lib/i18n/tests/basics.r b:3:in `<module:Tests>' from C:/Ruby/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib/i18n/tests/basics.r b:2:in`'来自 C:/Ruby/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib /i18n/tests/basics.r b:1:in `<top (required)>' from C:/Ruby/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:467:in`const_ get' from C:/Ruby/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:467:in `block (3 levels) in attempt_load_autoload' from C:/Ruby/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:464:in`each' from C :/Ruby/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:464:in `block (2 levels) in attempt_load_autoload' from C:/Ruby/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:462:in`each' 来自 C:/Ruby/lib/ruby/gems/1.9.1/gems/ocra -1.3.0/bin/ocra:462:in `block in attempt_load_autoload' from C:/Ruby/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:456:in`loop' 来自 C:/Ruby/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:456:`attemp t_load_autoload' from C:/Ruby/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:679:in`build_exe' 来自 C:/Ruby/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:1138:in `block in'
> 
> ```
> C:\Ruby> 
> ```

# c# - 将对象属性作为参数传递给通用列表扩展方法

> ID：12639299
> 
> 赞同：1
> 
> 时间：2012-09-28T11:38:48.137
> 
> 标签：c#, generics, extension-methods

我有一个具有 Text 和 ID 属性的 GenericListItem 对象。为了绑定到简单的通用列表控件，我将各种 DB 对象转换为 List。

我想在 List 上编写一个扩展方法，允许我指定 T 的相关属性，这些属性将映射到 GenericListItem 的 Text 和 ID 属性，然后能够轻松地将任何 List 转换为列表

然后，该方法的签名需要以某种方式接受 T 的两个属性，这样我就可以从列表中输出一个新的 List

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:44:35.140

我会创建一个扩展方法来转换项目，并使用它来转换列表：

```
public static GenericListItem ToListItem<T>(this T obj, Func<T, string> textFunc, Func<T, int> idFunc)
{
    return new GenericListItem
    {
        Text = textFunc(obj),
        Id = idFunc(obj)
    };
}

public static List<GenericListItem> ToItemList<T>(this IEnumerable<T> seq, Func<T, string> textFunc, Func<T, int> idFunc)
{
    return seq.Select(i => i.ToListItem(textFunc, idFunc)).ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:52:44.287

您可以使用 Linq，而不是重新发明轮子：

```
List<string> list = new List<string>();
list.Add("first");
list.Add("second");

List<ListItem> items = list.Select(s => new ListItem() {Id = s.Length, Text = s.ToLower()}).ToList();
// or if ListItem has a constructor with parameters
List<ListItem> items = list.Select(s => new ListItem(s.Length, s.ToLower()).ToList(); 
```

如果你真的坚持扩展，你可以把上面的逻辑包装成一个扩展方法，但是我没看出来重点：

```
List<ListItem> items = list.ToItemList(s => s.Length, s => s.ToLower());

static class Helper
{
   public static List<ListItem> ToItemList<T>(this IList<T> list, Func<T, int> idFunc, Func<T,string> textFunc)
   {
      return list.Select(s => new ListItem() { Id = idFunc(s), Text = textFunc(s) }).ToList();
   }
} 
```

无论您选择什么，都不要编写通过名称指定属性的方法。当您更改属性名称时，编译器将无法告诉您您忘记更新方法调用中的名称，因为它们只是字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:54:16.877

```
public class customList<T> : IList<T>
    {
        public List<GenericListItem> ToCustomListItem()
        {
             List<GenericListItem> listItems = new List<GenericListItem>();
             //logic to convert list to GenericListItem
        }
    } 
```

使用执行以下操作

```
customList<object> list = new customList<object>();
//populate your list
list.ToCustomListItem(); 
```

但是，是的，您可以根据需要更改名称和类型。

# sql-server-2008 - SQL Server 2008 中的存储过程表参数与 xml

> ID：12639301
> 
> 赞同：0
> 
> 时间：2012-09-28T11:38:53.037
> 
> 标签：sql-server-2008, tsql, stored-procedures

我有两个版本的存储过程，它们的功能基本相同——对一个较大的表和另一个作为参数提供的表进行右连接查询。

*   第一个版本采用 XML 字符串并从`OPENXML`.
*   第二个采用提供的表变量参数。

我希望第二个/表版本的性能优于第一个/XML 版本，因为它不进行任何解析、文档对象的创建和显式处理。然而，我的测试表明，两个版本几乎同时执行。

可能是什么原因？表参数序列化比字符串参数差？XML 查询非常高效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:46:48.743

看执行计划。

我的印象是，大部分工作不是在 XML 的序列化中，而是在实际的连接中，这对于两个选项都是相同的

# javascript - 以编程方式清除输入文本框

> ID：12639303
> 
> 赞同：0
> 
> 时间：2012-09-28T11:38:59.183
> 
> 标签：javascript, jquery, plugins, textbox

> **可能重复：**
> [jQuery选择重置](https://stackoverflow.com/questions/7897760/jquery-chosen-reset)

我在我的项目中使用[Chosen](http://harvesthq.github.com/chosen/)插件。

[http://jsfiddle.net/tt13/gFzzc/](http://jsfiddle.net/tt13/gFzzc/)

问题是，我无法以编程方式重置选择的输入文本框。当我点击清除按钮时怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:54:31.130

首先，您应该使用正确版本的 Chosen，取自这里：

*   [https://raw.github.com/harvesthq/chosen/master/chosen/chosen.jquery.js](https://raw.github.com/harvesthq/chosen/master/chosen/chosen.jquery.js)

然后，只需重置`select`并触发*“liszt:updated”*事件的值：

```
$("button").on("click", function() {
    $(".chzn-select").val("").trigger("liszt:updated");
});​ 
```

**演示：http:** [//jsfiddle.net/gFzzc/13/](http://jsfiddle.net/gFzzc/13/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:04:15.717

这适用[**于jsfiddle**](http://jsfiddle.net/pTf5z/)

```
$('button').click(function(){
    $('.search-choice-close').click();
}); 
```

如果有多个控件，您可能会稍微缩小范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:54:09.623

你可以尝试这样的事情：

为按钮提供 ID：说 clear_chosen

然后触发关闭按钮：

javascript代码::

```
$("#clear_chosen").click(function(){
    $(".search-choice-close").click();
}); 
```

在此块内编写代码::

```
 $(function () {
    $('.chzn-select').chosen();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T11:57:36.500

丑陋的黑客，但有效：

**演示：** [**jsfiddle**](http://jsfiddle.net/Z52gy/2/)

**代码：**

```
$('button').click(function() {
    $(".chzn-select").next('.chzn-container').find('.search-choice').remove();
    $(".chzn-select").val('');
    $(".chzn-select").next('.chzn-container').find('.search-field input').focus();
}); 
```

# command-line - ffmpeg 命令行工具在转换文件编解码器后删除所有元数据信息

> ID：12639305
> 
> 赞同：1
> 
> 时间：2012-09-28T11:39:25.057
> 
> 标签：command-line, ffmpeg

我正在使用 ffmpeg 命令行工具将 abc.flac 文件转换为 abc.mp3。但是当 abc.mp3 创建时，所有元数据信息都会变得清晰，如艺术家姓名、专辑名称等。所有字段都为空。我正在使用这个命令 ffmpeg -i "abc.flac" -acodec mp3 -ab 256 "abc.mp3"

这给了我 abc.mp3 我也尝试了 -map_metadata 标签，但它不起作用你对此有任何想法提前谢谢。

# simulink - 如何在simulink中处理视频帧

> ID：12639306
> 
> 赞同：0
> 
> 时间：2012-09-28T11:39:30.207
> 
> 标签：simulink

我正在处理 simulink 中的视频。我们知道多媒体文件块一次读取一帧，所以当我将它与 matlab 功能块附加时，它应该使用 imread 命令一次读取一帧。如果我双击 matlab 函数块（如[http://tinypic.com/view.php?pic=dggujd&s=6](http://tinypic.com/view.php?pic=dggujd&s=6)所示），那么您将看到我必须给出在 matlab mfile 中编写的函数名称与输入；在这种情况下是视频（命名为 convid.avi）。我一次读取一帧，但我已将整个视频作为参数提供给 matlab 函数。这是我如何解决它的问题。应该在 matlab 函数块中作为参数给出什么而不是整个视频。我还在[http://tinypic.com/view.php?pic=55jggw&s=6上传了我的模型](http://tinypic.com/view.php?pic=55jggw&s=6). 我用于 vidfunc 的代码是：

```
function h=vidfunc(u)
a=imread(u); % read frame
BW = edge(a,'sobel'); %sobel edge detection
[H,thetaa,rhoo]=hough(BW); % Hough Transform
P = houghpeaks(H,6,'threshold',ceil(0.5*max(H(:))));
lines=houghlines(BW,thetaa,rhoo,P,'FillGap',15,'Minlength',15)
figure,imshow(I),hold on
for k = 1:length(lines) % Draw lines
 xy = [lines(k).point1; lines(k).point2];
 z(k)=lines(k).point2(2);
 plot(xy(:,1),xy(:,2),'LineWidth',1,'Color','green');
 end
 h=z(k) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:50:13.683

看起来在这个“Simulink”模型中完成的工作实际上是由您的 MATLAB 函数执行的。所以这个问题的答案将在很大程度上取决于该函数实际在做什么。具体来说， 的预期输入是`vidfunc`什么，这个函数的输出是什么？我怀疑这个函数可能需要修改以适应您的模型。

要调试您的模型，考虑每个模块的信号输出是很有用的。在每个时间步，您的`From Multimedia File`块将输出一个图像帧，根据[文档](http://www.mathworks.com/help/dsp/ref/frommultimediafile.html)，它看起来被构造为

> M×N×P 彩色视频信号，其中 P 是彩色平面的数量。

向下游移动，我们接下来来到`Color Space Conversion`块，在这种情况下，它很可能会以 M×N 矩阵的形式输出图像帧（其中矩阵的每个元素对应于该像素的图像强度）。

现在我们来到有趣的部分——`MATLAB Fcn`块。正如我们刚刚看到的，这个块的输入将是一个代表单个图像帧的 M×N 矩阵。当您查看块的参数对话框时，该`MATLAB Fcn`块的输入由变量 表示`u`。因此，要在输入到此模块的图像帧上执行`vidfunc`函数，您只需`vidfunc(u)`为您的*MATLAB 函数*输入。

现在，基于到`MATLAB Fcn`块的输入，以及您有一个连接到输出的视频查看器块的事实，`vidfunc`应该构建这样的结构，使其对单个图像帧作为其输入进行操作并输出另一个单个图像帧。如果`vidfunc`不是以这种方式构建的，您将需要对其进行编辑（或者只是使用 Simulink 模块重新实现相同的功能）。

也就是说，让我们假设`vidfunc`它还返回一个表示处理后的图像帧的 M×N 矩阵。您需要为您的模块设置*Output Dimensions*参数以指示输出将具有与输入相同的维度。此外，（如[文档](http://www.mathworks.com/help/simulink/slref/interpretedmatlabfunction.html)中所示）您需要确保未**选中将***二维结果折叠为一维*，否则您的图像输出将采用一个长向量而不是 M×N 矩阵的形式。`MATLAB Fcn``-1`

 ***如果`vidfunc`结构正确，这应该可以解决您的问题。

**注意：**为了让您的生活更轻松，我强烈建议您在 Simulink 模型中显示信号数据类型和维度。这可以帮助避免很多混乱。该[文档](http://www.mathworks.com/help/releases/R2012a/toolbox/simulink/ug/f15-90106.html)准确描述了如何执行此操作。

**- 更新 -**

查看您的代码后，这证实了我的怀疑，即输入/输出`vidfunc`与您的 Simulink 模型所期望的不一致。您进行的方式在很大程度上取决于您自己的设计约束是什么以及您实际希望从这个系统中得到什么。基本上，您的 Simulink 模型和 MATLAB 函数不一致……哪一个是对的？我将根据我对您的目标的最佳猜测给出一些一般性的想法。

首先，Simulink 将图像（以 M×N 矩阵的形式）传递到`vidfunc`. 这意味着`vidfunc`不再需要在代码开头加载图像。因此，我相信您可以将前几行代码更新为：

```
function h=vidfunc(a)
BW = edge(a,'sobel'); %sobel edge detection 
```

看到现在`vidfunc`将实际图像（而不是包含图像的文件名）作为其输入。基本上，您正在删除`a=imread(u);`线路并直接进入 processing `a`。

另一个问题是输出`vidfunc`。Simulink 期望输出是图像，但事实并非如此。我不是 100% 确定`h`这段代码应该是什么（当我第一次看你的代码时，我认为这些是行对象的句柄，但似乎并非如此）。它看起来可能是其中一条线的端点的 y 坐标。然而，这不是您的 Simulink 模型所期望的。这不是直接修复。可能您可以尝试使用[getframe](http://www.mathworks.com/help/matlab/ref/getframe.html)从线条图中获取图像。

实际上，我觉得我能给你的最好建议就是***废弃 MATLAB 函数并在 Simulink 中实现所有内容***。`vidfunc`我认为这比尝试与您的模型很好地配合要容易得多。`vidfunc`实际上并没有包含那么多代码，所以这对你来说应该不是太难的任务。另一个好处是，在此过程结束时，您将拥有一个很好的 Simulink 模型，该模型明确显示您正在执行的所有图像处理步骤。

我相信您使用 MATLAB 函数进行的所有图像处理也可以使用 Simulink 模块完成（请参阅本[文档的](http://www.mathworks.com/help/vision/filters-transforms-and-enhancements.html)*Simulink 模块*部分）。

祝你好运。***

# excel - 将 Excel Grid Intersection 数据规范化为平面列表

> ID：12639309
> 
> 赞同：1
> 
> 时间：2012-09-28T11:40:01.627
> 
> 标签：excel, vba

我正在尝试获取 Excel 数据，该数据是使用网格/矩阵映射映射到非规范化的，以便我可以将数据输入数据库。

如何将网格中的数据从一张 Excel 表格复制到另一张表格，如下图所示。 ![在此处输入图像描述](../Images/1482ae036152d12e78fd51a15bb931d3.png)

我正在尝试这样的事情......但正如你所看到的，我离得很远！

```
Sub NormaliseList(mySelection As Range)
Dim cell As Range
Dim i As Long
i = 1
    For Each cell In mySelection
        If cell <> "" Then
                Sheets(2).Range("A" & i).Value = cell(cell.Row, 1).Value
                Sheets(2).Range("B" & i).Value = cell.Value
                Sheets(2).Range("C" & i).Value = cell(1, cell.Column).Value
                i = i + 1

    Next cell
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:04:32.100

以供参考。我更新了我的代码..只需添加代码，为函数分配宏快捷方式选择包含交叉数据的范围（不是行和列数据）运行宏（注意，表 2 将以标准化形式添加数据）

如果需要多个标题，我想我会合并为一列，然后在处理后执行“文本到列”。

```
Sub NormaliseList()
' to run - assign macro shortcut to sub - Select Intersection data (not row and column headings and run)
    Dim Rowname, ColumnName, IntValue As String
    Dim x, cntr As Integer
    Dim test As Boolean
    cntr = 0

For x = 1 To Selection.Count
    If Selection(x).Value <> "" Then
        cntr = cntr + 1
        Rowname = ActiveSheet.Cells(Selection.Cells(x).Row, Selection.Column - 1)
        ColumnName = ActiveSheet.Cells(Selection.Row - 1, Selection.Cells(x).Column)
        IntValue = Selection(x).Value
        test = addrecord(Rowname, ColumnName, IntValue, cntr)
     End If
  Next x
   End Sub

 Function addrecord(vA, vB, vC As String, rec As Integer) As Boolean
   'Make sure that you have a worksheet called "Sheet2"
   Sheets("Sheet2").Cells(rec, 1) = vA
   Sheets("Sheet2").Cells(rec, 2) = vB
   Sheets("Sheet2").Cells(rec, 3) = vC
 End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T15:18:01.370

我的博客上有两篇关于在 Excel/VBA 中执行此操作的帖子，其中包含可用的代码和可下载的工作簿：

[http://yoursumbuddy.com/data-normalizer](http://yoursumbuddy.com/data-normalizer)

[http://yoursumbuddy.com/data-normalizer-the-sql/](http://yoursumbuddy.com/data-normalizer-the-sql/)

这是代码：

```
'Arguments
'List: The range to be normalized.
'RepeatingColsCount: The number of columns, starting with the leftmost,
'   whose headings remain the same.
'NormalizedColHeader: The column header for the rolled-up category.
'DataColHeader: The column header for the normalized data.
'NewWorkbook: Put the sheet with the data in a new workbook?
'
'NOTE: The data must be in a contiguous range and the
'rows that will be repeated must be to the left,
'with the rows to be normalized to the right.

Sub NormalizeList(List As Excel.Range, RepeatingColsCount As Long, _
    NormalizedColHeader As String, DataColHeader As String, _
    Optional NewWorkbook As Boolean = False)

Dim FirstNormalizingCol As Long, NormalizingColsCount As Long
Dim ColsToRepeat As Excel.Range, ColsToNormalize As Excel.Range
Dim NormalizedRowsCount As Long
Dim RepeatingList() As String
Dim NormalizedList() As Variant
Dim ListIndex As Long, i As Long, j As Long
Dim wbSource As Excel.Workbook, wbTarget As Excel.Workbook
Dim wsTarget As Excel.Worksheet

With List
    'If the normalized list won't fit, you must quit.
   If .Rows.Count * (.Columns.Count - RepeatingColsCount) > .Parent.Rows.Count Then
        MsgBox "The normalized list will be too many rows.", _
               vbExclamation + vbOKOnly, "Sorry"
        Exit Sub
    End If

    'You have the range to be normalized and the count of leftmost rows to be repeated.
   'This section uses those arguments to set the two ranges to parse
   'and the two corresponding arrays to fill
   FirstNormalizingCol = RepeatingColsCount + 1
    NormalizingColsCount = .Columns.Count - RepeatingColsCount
    Set ColsToRepeat = .Cells(1).Resize(.Rows.Count, RepeatingColsCount)
    Set ColsToNormalize = .Cells(1, FirstNormalizingCol).Resize(.Rows.Count, NormalizingColsCount)
    NormalizedRowsCount = ColsToNormalize.Columns.Count * .Rows.Count
    ReDim RepeatingList(1 To NormalizedRowsCount, 1 To RepeatingColsCount)
    ReDim NormalizedList(1 To NormalizedRowsCount, 1 To 2)
End With

'Fill in every i elements of the repeating array with the repeating row labels.
For i = 1 To NormalizedRowsCount Step NormalizingColsCount
    ListIndex = ListIndex + 1
    For j = 1 To RepeatingColsCount
        RepeatingList(i, j) = List.Cells(ListIndex, j).Value2
    Next j
Next i

'We stepped over most rows above, so fill in other repeating array elements.
For i = 1 To NormalizedRowsCount
    For j = 1 To RepeatingColsCount
        If RepeatingList(i, j) = "" Then
            RepeatingList(i, j) = RepeatingList(i - 1, j)
        End If
    Next j
Next i

'Fill in each element of the first dimension of the normalizing array
'with the former column header (which is now another row label) and the data.
With ColsToNormalize
    For i = 1 To .Rows.Count
        For j = 1 To .Columns.Count
            NormalizedList(((i - 1) * NormalizingColsCount) + j, 1) = .Cells(1, j)
            NormalizedList(((i - 1) * NormalizingColsCount) + j, 2) = .Cells(i, j)
        Next j
    Next i
End With

'Put the normal data in the same workbook, or a new one.
If NewWorkbook Then
    Set wbTarget = Workbooks.Add
    Set wsTarget = wbTarget.Worksheets(1)
Else
    Set wbSource = List.Parent.Parent
    With wbSource.Worksheets
        Set wsTarget = .Add(after:=.Item(.Count))
    End With
End If

With wsTarget
    'Put the data from the two arrays in the new worksheet.
   .Range("A1").Resize(NormalizedRowsCount, RepeatingColsCount) = RepeatingList
    .Cells(1, FirstNormalizingCol).Resize(NormalizedRowsCount, 2) = NormalizedList

    'At this point there will be repeated header rows, so delete all but one.
   .Range("1:" & NormalizingColsCount - 1).EntireRow.Delete

    'Add the headers for the new label column and the data column.
   .Cells(1, FirstNormalizingCol).Value = NormalizedColHeader
    .Cells(1, FirstNormalizingCol + 1).Value = DataColHeader
End With
End Sub 
```

你会这样称呼它：

```
Sub TestIt()
NormalizeList ActiveSheet.UsedRange, 1, "Name", "Count", False
End Sub 
```

# html - 使用 CSS 为表格中的某些元素分配样式

> ID：12639317
> 
> 赞同：-2
> 
> 时间：2012-09-28T11:40:42.490
> 
> 标签：html, css, html-table

> **可能重复：**
> [将表格中的样式应用于 th 和 td 中的特定列](https://stackoverflow.com/questions/12638587/apply-style-in-a-table-to-specific-columns-within-the-th-and-td)

我有一张桌子，我需要能够为不同的列分配不同的样式，我需要：-

1.  表头中的前两列（表头 1 和表头 2 被赋予 text-align:left；然后表头中的所有剩余表头被赋予 text-align:center；

2.  与表格行类似，表格中所有行的前两个被赋予 text-align:left; 然后其余的 tds 给定 text-align:center;

所以基本上整个表格的前两列将被留下，然后剩下的被居中？

`

```
<tr>

<th>Header 1</th>
<th>Header 2</th>
<th>Header 3</th>
<th>Header 4</th>
<th>Header 5</th>
</tr>
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
<td>row 1, cell 3</td>
<td>row 1, cell 4</td>
<td>row 1, cell 5</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
<td>row 2, cell 3</td>
<td>row 2, cell 4</td>
<td>row 2, cell 5</td>

</tr> 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:47:36.183

假设您的表有一个类`mytable`：

```
.mytable td, .mytable th {
    text-align: center;
}
.mytable td:first-child, .mytable td:nth-child(2) {
    text-align: left;
}
.mytable th:first-child, .mytable th:nth-child(2) {
    text-align: left;
} 
```

这可以更简洁地写成：

```
.mytable td, .mytable th {
    text-align: center;
}
.mytable td:nth-child(-n+2) {
    text-align: left;
}
.mytable th:nth-child(-n+2) {
    text-align: left;
} 
```

# android - 仅限我所在国家/地区的 Google 地图？

> ID：12639319
> 
> 赞同：2
> 
> 时间：2012-09-28T11:40:49.940
> 
> 标签：android, google-maps, google-api

如何在 Android 应用程序中使用谷歌地图，以便它只显示我的国家？

我的意思是这样世界其他地方就不会出现在应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:42:10.743

查看[Mike Williams](http://econym.org.uk/gmap/range.htm)的精彩 GMaps 教程之一 - 他向您展示了如何限制地图中的缩放和平移。

如果您希望某些区域不可见，[您可以尝试这个：](http://econym.org.uk/gmap/einsertg.htm)我认为这最接近您想要的（该[示例](http://econym.org.uk/gmap/example_egroundoverlay.htm)实际上与您想要的类似，以美国为例）。

# scala - Scala中的惰性迭代器？

> ID：12639320
> 
> 赞同：14
> 
> 时间：2012-09-28T11:40:49.993
> 
> 标签：scala, sorting, lazy-evaluation

我在haskell中读到过，在对迭代器进行排序时，它只评估尽可能多的qsort，以返回在结果迭代器上实际评估的值的数量（即，它是惰性的，即，一旦它完成了LHS第一个枢轴并且可以返回一个值，它可以在迭代器上调用“next”时提供一个值，并且除非再次调用下一个，否则不会继续旋转）。

例如，在 haskell 中，head(qsort list) 是 O(n)。它只是在列表中找到最小值，并且不会对列表的其余部分进行排序，除非`qsort list`访问了其余的结果。

有没有办法在 Scala 中做到这一点？我想在集合上使用 sortWith ，但只进行必要的排序，这样我就可以 mySeq.sortWith( *<* ).take(3) 并且不需要完成排序操作。

我想知道是否可以以惰性方式使用其他排序函数（如 sortBy），以及如何确保惰性，以及如何找到有关何时对 Scala 中的排序进行或不进行惰性评估的任何其他文档。

**更新/编辑**：理想情况下，我正在寻找使用 sortWith 等标准排序功能的方法。我宁愿不必为了获得惰性评估而实现自己的快速排序版本。这不应该被内置到标准库中吗，至少对于像 Stream 这样支持惰性的集合？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T12:18:51.473

我使用 Scala 的[优先队列实现](http://www.scala-lang.org/api/current/scala/collection/mutable/PriorityQueue.html)来解决这种部分排序问题：

```
import scala.collection.mutable.PriorityQueue

val q = PriorityQueue(1289, 12, 123, 894, 1)(Ordering.Int.reverse) 
```

现在我们可以调用`dequeue`：

```
scala> q.dequeue
res0: Int = 1

scala> q.dequeue
res1: Int = 12

scala> q.dequeue
res2: Int = 123 
```

`O(n)`构建队列和`O(k log n)`获取第一个`k`元素是有成本的。

不幸的是`PriorityQueue`，它没有按优先级顺序进行迭代，但是编写一个调用`dequeue`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:11:55.277

作为一个例子，我创建了一个惰性快速排序的实现，它创建了一个惰性树结构（而不​​是生成一个结果列表）。可以针对任何时间`i`元素`O(n)`或元素切片请求此结构`k`。再次询问相同的元素（或附近的元素）只需要`O(log n)`重用上一步中构建的树结构。遍历所有元素需要`O(n log n)`时间。（都假设我们选择了合理的支点。）

关键是子树不是立即构建的，它们在惰性计算中被延迟。因此，当仅要求单个元素时，会在 中计算根节点`O(n)`，然后在等中计算其子节点之一，`O(n/2)`直到找到所需的元素，取`O(n + n/2 + n/4 ...) = O(n)`. 当树被完全评估时，选择任何元素都`O(log n)`与任何平衡树一样。

请注意，执行`build`效率非常低。我希望它尽可能简单易懂。重要的是它具有适当的渐近界。

```
import collection.immutable.Traversable

object LazyQSort {
  /**
   * Represents a value that is evaluated at most once.
   */
  final protected class Thunk[+A](init: => A) extends Function0[A] {
    override lazy val apply: A = init;
  }

  implicit protected def toThunk[A](v: => A): Thunk[A] = new Thunk(v);
  implicit protected def fromThunk[A](t: Thunk[A]): A = t.apply;

  // -----------------------------------------------------------------

  /**
   * A lazy binary tree that keeps a list of sorted elements.
   * Subtrees are created lazily using `Thunk`s, so only
   * the necessary part of the whole tree is created for
   * each operation.
   *
   * Most notably, accessing any i-th element using `apply`
   * takes O(n) time and traversing all the elements
   * takes O(n * log n) time.
   */
  sealed abstract class Tree[+A]
    extends Function1[Int,A] with Traversable[A]
  {
    override def apply(i: Int) = findNth(this, i);

    override def head: A = apply(0);
    override def last: A = apply(size - 1);
    def max: A = last;
    def min: A = head;
    override def slice(from: Int, until: Int): Traversable[A] =
      LazyQSort.slice(this, from, until);
    // We could implement more Traversable's methods here ...
  }
  final protected case class Node[+A](
      pivot: A, leftSize: Int, override val size: Int,
      left: Thunk[Tree[A]], right: Thunk[Tree[A]]
    ) extends Tree[A]
  {
    override def foreach[U](f: A => U): Unit = {
      left.foreach(f);
      f(pivot);
      right.foreach(f);
    }
    override def isEmpty: Boolean = false;
  }
  final protected case object Leaf extends Tree[Nothing] {
    override def foreach[U](f: Nothing => U): Unit = {}
    override def size: Int = 0;
    override def isEmpty: Boolean = true;
  }

  // -----------------------------------------------------------------

  /**
   * Finds i-th element of the tree.
   */
  @annotation.tailrec
  protected def findNth[A](tree: Tree[A], n: Int): A =
    tree match {
      case Leaf => throw new ArrayIndexOutOfBoundsException(n);
      case Node(pivot, lsize, _, l, r)
                => if (n == lsize) pivot
                   else if (n < lsize) findNth(l, n)
                   else findNth(r, n - lsize - 1);
    }

  /**
   * Cuts a given subinterval from the data.
   */
  def slice[A](tree: Tree[A], from: Int, until: Int): Traversable[A] =
    tree match {
      case Leaf => Leaf
      case Node(pivot, lsize, size, l, r) => {
        lazy val sl = slice(l, from, until);
        lazy val sr = slice(r, from - lsize - 1, until - lsize - 1);
        if ((until <= 0) || (from >= size)) Leaf // empty
        if (until <= lsize) sl
        else if (from > lsize) sr
        else sl ++ Seq(pivot) ++ sr
      }
  }

  // -----------------------------------------------------------------

  /**
   * Builds a tree from a given sequence of data.
   */
  def build[A](data: Seq[A])(implicit ord: Ordering[A]): Tree[A] =
    if (data.isEmpty) Leaf
    else {
      // selecting a pivot is traditionally a complex matter,
      // for simplicity we take the middle element here
      val pivotIdx = data.size / 2;
      val pivot = data(pivotIdx);
      // this is far from perfect, but still linear
      val (l, r) = data.patch(pivotIdx, Seq.empty, 1).partition(ord.lteq(_, pivot));
      Node(pivot, l.size, data.size, { build(l) }, { build(r) });
    }
}

// ###################################################################

/**
 * Tests some operations and prints results to stdout.
 */
object LazyQSortTest extends App {
  import util.Random
  import LazyQSort._

  def trace[A](name: String, comp: => A): A = {
    val start = System.currentTimeMillis();
    val r: A = comp;
    val end = System.currentTimeMillis();
    println("-- " + name + " took " + (end - start) + "ms");
    return r;
  }

  {
    val n = 1000000;
    val rnd = Random.shuffle(0 until n);
    val tree = build(rnd);
    trace("1st element", println(tree.head));
    // Second element is much faster since most of the required
    // structure is already built
    trace("2nd element", println(tree(1)));
    trace("Last element", println(tree.last));
    trace("Median element", println(tree(n / 2)));
    trace("Median + 1 element", println(tree(n / 2 + 1)));
    trace("Some slice", for(i <- tree.slice(n/2, n/2+30)) println(i));
    trace("Traversing all elements", for(i <- tree) i);
    trace("Traversing all elements again", for(i <- tree) i);
  }
} 
```

输出将类似于

```
0
-- 1st element took 268ms
1
-- 2nd element took 0ms
999999
-- Last element took 39ms
500000
-- Median element took 122ms
500001
-- Median + 1 element took 0ms
500000
  ...
500029
-- Slice took 6ms
-- Traversing all elements took 7904ms
-- Traversing all elements again took 191ms 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:22:28.110

You could use a `Stream` to build something like that. Here is a simple example, that can definitely be made better, but it works as an example, I guess.

```
def extractMin(xs: List[Int]) = {
  def extractMin(xs: List[Int], min: Int, rest: List[Int]): (Int,List[Int]) = xs match {
    case Nil => (min, rest)
    case head :: tail if head > min => extractMin(tail, min, head :: rest)
    case head :: tail => extractMin(tail, head, min :: rest)
  }

  if(xs.isEmpty) throw new NoSuchElementException("List is empty")
  else extractMin(xs.tail, xs.head, Nil)
}

def lazySort(xs: List[Int]): Stream[Int] = xs match {
  case Nil => Stream.empty
  case _ =>
    val (min, rest) = extractMin(xs)
    min #:: lazySort(rest)
} 
```

# ruby-on-rails - - 如果 request.fullpath != "/" || “/info” 忽略第二个链接

> ID：12639326
> 
> 赞同：0
> 
> 时间：2012-09-28T11:41:24.377
> 
> 标签：ruby-on-rails, if-statement, haml

抱歉标题措辞不好，我目前有这个 if 语句：

```
- if request.fullpath == "/" || "/info" 
```

哪个工作正常，但另一个应该做相反的事情，忽略第二个地址。

```
- if request.fullpath != "/" || "/info" 
```

它的行为就好像它只是在说：

```
- if request.fullpath != "/" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:16:45.750

或使用 Rails`String in?`方法：

```
- unless request.fullpath.in?("/", "/info") 
```

或者

```
- if !request.fullpath.in?("/", "/info") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:43:34.003

试试这个：

```
- if request.fullpath != "/" || request.fullpath != "/info" 
```

右侧的部分独立于左侧的相等性测试进行评估

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:11:40.337

等一下，你正在使用 ruby​​：

```
- if %w(/ /info).include? request.fullpath
#and opposite
- unless %w(/ /info).include? request.fullpath 
```

[检查Ruby中的数组中是否存在值](https://stackoverflow.com/questions/1986386/check-if-value-exists-in-array-in-ruby)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:41:48.897

尝试

```
unless request.fullpath != "/" && "/info" 
```

# java - 由于许多连接错误，主机“X”被阻止

> ID：12639328
> 
> 赞同：7
> 
> 时间：2012-09-28T11:41:38.637
> 
> 标签：java, mysql, jsp

嗨，我正在将 Java 与 MySql 一起使用。我已经使用了一些 x 托管服务，因为我已经部署了我的 java .war 文件，它工作了几天，因为 2 天我收到了一些错误，即

> java.sql.SQLException：null，来自服务器的消息：“由于许多连接错误，主机'X主机'被阻止；使用'mysqladmin flush-hosts'解除阻止”。

我使用了普通的数据库连接以及连接池。

我的代码是：

```
Class.forName("com.mysql.jdbc.Driver");
con = DriverManager.getConnection("jdbc:mysql://IP Address:3306/DBName?user=xxxxx&password=YYYYYYY"); 
```

..

请给出解决方案..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-06T06:41:03.327

使用 'mysqladmin flush-hosts' 解除对主机的阻塞或增加 max_connect_errors 参数将解决问题。

服务器启动：

```
shell> mysqld_safe --max_connect_errors=10000 & 
```

运行：

```
mysql> SET GLOBAL max_connect_errors=10000; 
```

但应确定连接错误的原因。可以通过 * 检查 MySQL.err 日志文件 * 检查主机中的 TCP/IP 连接参数来识别

参考： http: [//dev.mysql.com/doc/refman/5.0/en/blocked-host.html](http://dev.mysql.com/doc/refman/5.0/en/blocked-host.html) [http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html #sysvar_max_connect_errors](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_max_connect_errors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-30T12:29:47.703

要恢复系统，您可能必须重新启动 mysql 服务器。

```
$ sudo service mysql restart 
```

要停止再次发生这种情况，在重新启动之前增加低于值，

```
$ mysql> SET GLOBAL max_connections = 500;
$ mysql> SET GLOBAL max_connect_errors=10000; 
```

要查看当前值，请通过`my.cnf`

```
$ vi /etc/mysql/my.cnf 
```

希望这可以帮助！

# entity-framework - EF：一对多关系——查询数据的子集

> ID：12639332
> 
> 赞同：1
> 
> 时间：2012-09-28T11:41:47.933
> 
> 标签：entity-framework, lazy-loading

我正在尝试从一对多关系中获取一组实体作为 IQueryable，以便在从数据库中获取之前过滤数据。

为了清楚起见，请考虑以下示例：

我目前有一个实体“用户”，其中包含一组图片：

```
public virtual ICollection<Picture> Pictures{ get; set; } 
```

图片实体可能属于也可能不属于用户，因此在其定义中没有用户属性。

一个用户可能有数千张图片，但我想选择前 10 张，例如，按 Picture.Id 排序。有没有办法做到这一点？

也许是这样的：

```
IQueryable<ICollection<Picture>> pictures = context.Users.Where(u=>u.UserId == userId).Select(c => c.Pictures) 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:50:47.073

基本思想是对用户的集合使用`OrderBy`和`Take`方法。`Pictures`但是，由于您希望确保只执行单个 EntityFramework SQL 查询而不加载`Pictures`用户的整个集合，因此需要以稍微更具体的方式表达。

**查询语法**

```
var result = (from u in users
              where u.Id == userId
               from p in u.Pictures
               orderby p.Id
               select p).Take(10); 
```

**方法语法**

```
var result = context.Users
    .Where(u => u.Id == 2)
    .SelectMany(u => u.Pictures)
    .OrderBy(p => p.Id)
    .Take(10); 
```

注意对 的调用`SelectMany`。这一点很重要。基本上，这会将所有`Pictures`选定用户的所有集合添加到一个列表中，并继续在这个扁平元列表上进行查询。理论上这听起来像是一个相当大的操作，但在这种情况下应该只有一个具有特定 ID 的用户，所以它实际上只是继续选择用户的`Pictures`集合。生成的 SQL 是一个单一的快速查询：

**生成的 SQL 查询**（对于上述两个）

```
SELECT TOP (10)
[Extent1].[User_Id] AS [User_Id],
[Extent1].[Id] AS [Id],
[Extent1].[Name] AS [Name]
FROM [dbo].[Pictures] AS [Extent1]
WHERE ([Extent1].[User_Id] IS NOT NULL) AND (2 = [Extent1].[User_Id])
ORDER BY [Extent1].[Id] ASC 
```

# vim - gvim：行首的连续行

> ID：12639334
> 
> 赞同：0
> 
> 时间：2012-09-28T11:41:51.250
> 
> 标签：vim

> **可能重复：**
> [为什么 vim 在制表符的位置绘制下划线以及如何避免这种情况？](https://stackoverflow.com/questions/4625274/why-is-vim-drawing-underlines-on-the-place-of-tabs-and-how-to-avoid-this)

当我在行首写空格或制表符时，我得到了连续的行：

[http://www.freeimagehosting.net/68r69](http://www.freeimagehosting.net/68r69)

任何的想法？

哈维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:54:27.320

这不是在行首使用制表符的结果，它只是 vim 的代码高亮。

Vim 给链接加下划线，你仍然在 <a> 标记的主体内。这没什么好担心的，它只是显示链接的可显示部分的内容从哪里开始和结束。

您可以禁用 HTML 的语法突出显示，但我不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:54:06.057

HTML 超链接内的文本用 Vim 的语法高亮加下划线，表明它是一个链接。在这种情况下，标签周围的空白将被突出显示。

这个问题解决了关闭这种下划线[问题](https://stackoverflow.com/questions/4625274/why-is-vim-drawing-underlines-on-the-place-of-tabs-and-how-to-avoid-this)，归结为设置

```
:let html_no_rendering=1 
```

你可以把它放在你的 .vimrc 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:29:08.540

这是语法定义中的一个缺陷；我在[这里](https://stackoverflow.com/a/10165836/813602)发布了修复；我现在将把它作为一个补丁发送给维护者，因为它似乎一直是混乱的根源。

# android - 在 ICS 或 JB 的任务管理器中显示自定义应用程序图像

> ID：12639335
> 
> 赞同：6
> 
> 时间：2012-09-28T11:41:54.173
> 
> 标签：android, screenshot, preview, taskmanager

据我在Android 4.0（或更高版本）上看到的默认任务管理器显示程序的最后一个屏幕截图，左上角没有程序图标。见图片：

![截屏](../Images/623e01ffd49cd340a4f1479a56b62574.png)

我的问题是如何将任务管理器中的应用程序图像（不是图标）更改为自定义？不要问我为什么，我只是需要它。

经过一些研究，我在 SO: [Show black preview screen in task manager on ICS 上](https://stackoverflow.com/questions/9984083/show-black-preview-screen-in-task-manager-on-ics)发现了类似的问题。但这并没有回答我的问题。

我也没有找到任何 API 可以使用这个任务管理器。

所以我决定在程序（活动）关闭时显示自定义图像。从[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)中我发现我需要覆盖方法`onPause`。所以我决定编写一个小程序。这很容易理解：

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onResume()
    {
        super.onResume();
        setContentView(createImageView("/sdcard/program-image.jpg"));
    }

    @Override
    public void onPause()
    {
        setContentView(createImageView("/sdcard/task-manager-image.jpg"));
        super.onPause();
    }

    private ImageView createImageView(String pathFile)
    {
        ImageView imageView = new ImageView(getApplication());
        imageView.setImageBitmap(BitmapFactory.decodeFile(pathFile));
        imageView.invalidate();
        return imageView;
    }
} 
```

按下主页按钮后确实显示`task-manager-image`了一段时间，但任务管理器仅显示`program-image`。

那么有什么好的解决方案可以做到这一点吗？

谢谢你的帮助。

# .net - 获取 Office 2010 功能区的所有控件的 ID，并与自定义加载项中的功能区快捷方式进行交互

> ID：12639337
> 
> 赞同：9
> 
> 时间：2012-09-28T11:41:56.920
> 
> 标签：.net, vsto, powerpoint, add-in, ribbonx

我想在 powerpoint 2010 功能区中获取所有控件列表，就像在 powerpoint 选项中的一样-> 自定义功能区-> 所有命令。

此外，我想与**自定义**加载项中的功能区快捷方式进行交互

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:45:24.690

您可以在 microsoft 网站[http://www.microsoft.com/en-us/download/details.aspx?id=6627](http://www.microsoft.com/en-us/download/details.aspx?id=6627)上找到您想要的所有 office id 。

`PowerPointControls.xlsx`您将在文件中找到您的 id 。

创建您自己的菜单：

打开你的 Ribbon.xml

并在之后添加以下内容`<ribbon>`

```
<tabs>
    <tab idMso="TabAddIns">
        <group id="ContentGroup" label="Content">
            <button id="textButton" label="Insert Text"
                 screentip="Text" onAction="OnTextButton"
                 supertip="Inserts text at the cursor location."/>
            <button id="tableButton" label="Insert Table"
                 screentip="Table" onAction="OnTableButton"
                 supertip="Inserts a table at the cursor location."/>
        </group>
    </tab>
</tabs> 
```

对于自定义插件快捷方式，我认为您必须添加一个新选项卡：

```
<tab id="YourTab" visible="true" label="Name">
    <group id="YourGroup" label="name">
      <button onAction="CallAddinsHere();" label="Call add-ins"/>
    </group>
  </tab> 
```

如果您想与自定义插件快捷方式交互，请查看：

[通过 MSAA 自动化 Office 功能区 (CSOfficeRibbonAccessibility)](http://code.msdn.microsoft.com/CSOfficeRibbonAccessibility-cd7fe67f/view/Reviews)

# sql - 有机会从 varchar 列恢复 unicode 数据

> ID：12639339
> 
> 赞同：2
> 
> 时间：2012-09-28T11:42:02.560
> 
> 标签：sql, sql-server-2005

Unicode 数据（西里尔文）被写入类型的数据库列`varchar`

有没有机会以正确的格式恢复该数据？

不必完全恢复，一切都会好起来的

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:44:18.303

不。

这是一种有损转换，因为双字节字符不可能全部用单字节方案表示。所有不能强制转换为默认排序规则代码页的字符都将转换为`?`.

没有办法对`?`最初应该表示的内容或沿途可能发生的任何其他不太严重的转换进行逆向工程（例如，将字符转换为有点相似的同形文字字符）。

例子

```
DECLARE @T TABLE 
(
V VARCHAR(10)
)
INSERT INTO @T 
VALUES (N'中华人民共和国');

SELECT V,
       CAST(V AS VARBINARY(10))
FROM @T 
```

输出

```
V          
---------- ----------------------
???????    0x3F3F3F3F3F3F3F 
```

您可以清楚地看到源中的所有不同字符都存储为同一事物。

# python - 家谱图数据库

> ID：12639342
> 
> 赞同：4
> 
> 时间：2012-09-28T11:42:11.267
> 
> 标签：python, database, graph, family-tree

有人可以指点我将图形数据库用于家谱吗？我想学习neo4j，我使用python，所以我想为自己制作一个家谱图数据库来学习图数据库。我搜索了示例来模拟和学习（任何图形数据库，任何语言），但很惊讶我发现的很少。

注意我的意思是图形数据库，它的结构与关系数据库不同。请参阅[http://en.m.wikipedia.org/wiki/Graph_database](http://en.m.wikipedia.org/wiki/Graph_database)。

我正在寻找家谱的示例模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-23T15:24:29.033

如果你想学习做graphdb，你不需要使用任何软件。铅笔、纸和大脑都可以。想出一个设计你需要记住的事情是：

*   什么是图：顶点和边
*   graphdb 数据结构的具体内容：顶点和边与类似 python 的字典相关联。
*   graphdb 中需要哪些信息来解决我手头的问题。列出您希望能够对图表执行的所有查询。

在下图中，您将看到可以作为设计基础的图表。

![可用于进行家谱查询的裸图](../Images/704393c1bca915f8cc9da70df40e1296.png)

您必须想象每个节点都有一个名称、出生日期等……和一个唯一标识符。

它代表了两个不相干的家庭，左边一个有两个孩子，右边一个有三个孩子。

使用上图，您可以计算：

*   X的父母是谁？
*   最大家族的父亲叫什么名字？

而其他人，由于只有两个家庭，只有父母和孩子，没有祖父母或孙子女代表，您可能无法理解实际上您还可以计算以下查询：

*   以X为祖先的人还活着的人是谁？

现在，如果您想尝试使用 Python，您可以从更简单的设置开始有多种选择：

纯蟒蛇：

*   创建一个继承dict的Vertex类和Edge类。
*   使用来自真实数据的 Python 代码构建家谱图。
*   尝试查询。

[Python 和 BerkleyDB](https://bitbucket.org/amirouche/ajgu-graphdb)

*   免责声明：这是我的一个项目
*   与纯 Python 版本相同，只是图形保存在数据库中。API 类似于 neo4j python 绑定。

它们是其他解决方案，但如果没有关于目标应用程序（例如 Web 或桌面）的更多上下文，我无法将它们全部列出。它们是[neo4j 网站](http://www.neo4j.org/develop/python)上的一些信息，可能会有所帮助。

也就是说，最好的解决方案可能涉及 neo4j，但如果您想在多个数据库之间轻松切换以找到在您的用例性能方面最佳的数据库，则需要用于网络应用程序的 Rexster 或[用于其他应用程序的](https://github.com/tinkerpop/rexster/wiki)[蓝图。](https://github.com/tinkerpop/blueprints/wiki)直接使用 neo4j 服务器的唯一原因是能够使用[密码查询语言](http://docs.neo4j.org/chunked/stable/cypher-query-lang.html)。

如果我必须创建一个家谱 webapp 并从中建立业务，我会使用我已经构建的软件，即：

*   [Java-GraphitiDB](https://bitbucket.org/amirouche/java-graphitidb)
*   [石墨ORM](https://bitbucket.org/amirouche/graphiti-unmaintained)

这些还没有准备好按原样生产。但这就是我会做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-23T15:39:44.113

如果您想在**没有服务器（并且没有 JVM）的情况下**使用快速数据库。我建议你尝试全新的[Sparksee](http://www.sparsity-technologies.com/#download)（以前是 Dex）python 绑定。然而，原始 API 是不可移植的。然而，性能要快几个数量级。

第二种选择是使用[Bulbs](http://bulbflow.com/quickstart/)，它通过其 REST api 在 Neo4j 之上运行，它还支持任何 Rexsters 服务器。查询语言是 Gremlin（Cypher 也可以）。好处是，如果它更适合您的需求，您可以切换到不同的后端。

关于您的数据库方案，您至少有 1 个节点和 1 个边缘：

1 个节点：PERSON（姓名、出生、死亡），它们是索引字段。

1 条从 PERSON 到 PERSON 的定向受限边，名为：CHILD_OF 或 PARENT_OF。

您可以在节点之间添加更多边，例如：SIBLINGS、MARRIED_TO 等。

# java - Fuse ESB 是开源的吗？

> ID：12639343
> 
> 赞同：3
> 
> 时间：2012-09-28T11:42:15.820
> 
> 标签：java, esb, fuseesb, jbossfuse

如果 Fuse ESB 是开源的，有点困惑。Fuse 网站说它是开源的，但是当我尝试下载它时，我被重定向到 Red Hat 网站。在 Red Hat 网站上我看不到任何开源链接，只能下载 Fuse ESB 企业 90 天评估版。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:05:17.307

是的，Fuse ESB 一直是开源的，并且一直是 ASL 许可证。没有任何改变。

二进制下载现在托管在 Red Hat 网站上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T03:42:41.823

Fuse ESB 是 Apache ServiceMix 的产物。

如果您安装 Apache Karaf（以前称为 ServiceMix Kernel），然后将 Camel、CXF 和 ActiveMQ 配置到其中，据我所知，您将几乎拥有 Fuse ESB 的开源版本。

# android - Amazon IAP 不调用 onPurchaseResponse

> ID：12639349
> 
> 赞同：4
> 
> 时间：2012-09-28T11:42:36.927
> 
> 标签：android, amazon, in-app-purchase

我有一个使用 IAP 的 android 应用程序。我正在发送*PurchasingManager.initiateGetUserIdRequest()*并在*onGetUserIdResponse中***成功获取用户 ID**。

 *获得响应后，会调用*PurchasingManager.initiatePurchaseRequest("sku")*，但不幸的是，似乎从未调用过所需的*onPurchaseResponse 。*

我的申请 IAP 项目已获得亚马逊批准。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T03:39:46.117

在我们的例子中，问题最终是我们在清单中添加了 android:exported="false" 标志到我们的 Amazon IAP 响应接收器：

```
<receiver android:name="com.amazon.inapp.purchasing.ResponseReceiver"
          android:exported="false" >
...
</receiver> 
```

这会阻止亚马逊购买应用程序通过意图回调您的应用程序，因此您需要将其删除。学过的知识...*

# javascript - 鼠标悬停时动态更改 DIV 颜色

> ID：12639352
> 
> 赞同：1
> 
> 时间：2012-09-28T11:42:42.477
> 
> 标签：javascript, dom, styles, onmouseover

我想将 div 背景颜色更改为绿色 onmouseover 事件，但我不确定为什么我不断收到此错误 **TypeError: Cannot read property 'style' of undefined**

这是我的 JS 代码：

// JavaScript 文档

```
s1= new String()
var myArray = new Array();
var div_id=0;

myArray[0] = "Donald Duck";
myArray[1] = "Winnie Pooh";
myArray[2] = "Komal Waseem";
myArray[3] = "Hockey";
myArray[4] = "Basketball";
myArray[5] = "Shooting";
myArray[6] = "Mickey Mouse";

function test(){
s1 = document.getElementById('filter').value;
var myRegex = new RegExp((s1),"ig");
arraysearch(myRegex);
}

function arraysearch(myRegex){ 
var flag=0;

for(b=1; b<=div_id; b++)
    {
   var d = document.getElementById('lc');
   var olddiv= document.getElementById("div" + b);
   if(olddiv){
   d.removeChild(olddiv);}
   }

for(i=0; i<myArray.length; i++)
{ 
if (myArray[i].match(myRegex)){ 
      div_id++;
      flag=1;
      document.getElementById('lc').style.visibility='visible';
      var element = document.createElement("div");
      element.setAttribute('id', "div" + div_id);
      element.appendChild(document.createTextNode(myArray[i]));
      document.getElementById('lc').appendChild(element);

      var x =document.getElementsByTagName("div")
      for(t=0; t<x.length; t++)
      {
      //alert(t);
      if(x[t]){
      x[t].onmouseover = function(){
      x[t].style.backgroundColor='green';
       }
       }
}
}
    if (flag ==0){
    document.getElementById('lc').style.visibility='hidden'; }
}

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:46:08.050

您可以更改您的 JavaScript，这应该可以：

```
x[t].onmouseover = function() {
   this.style.backgroundColor='green';
} 
```

您原来的 JavaScript 不起作用的原因是因为`t`在您将鼠标悬停时已经更改，因此`x[t]`事件处理程序内部无法工作。

或者你可以使用 CSS：

```
div.myDiv:hover {
    background-color: green;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:53:11.990

万一，如果你希望它`div`是绿色的，例如：div id is mydiv，你可以简单地在你的css中做这样的事情。

```
 #mydiv{
     background-color:red;
}

#mydiv:hover{
    background-color:green;
} 
```

# objective-c - 圆圈覆盖跟随用户位置

> ID：12639353
> 
> 赞同：0
> 
> 时间：2012-09-28T11:42:43.473
> 
> 标签：objective-c, ios, xcode, location, overlay

如何让我的自定义圆圈叠加层作为子视图实时跟踪当前用户位置？我已经设法显示我的圆圈覆盖并到达用户位置的中心，但是当用户移动（gps）时，覆盖保持静止并且不跟随用户。我该如何解决？先感谢您..

```
- (void)viewDidLoad {
[super viewDidLoad];

[self.mapView setRegion:MKCoordinateRegionMake(self.location.coordinate, MKCoordinateSpanMake(0.02, 0.02))];
[self configureOverlay];

[[self locationManager] startUpdatingLocation];

} 
```

在配置覆盖中：

```
 CircleOverlay *overlay = [[CircleOverlay alloc] initWithCoordinate:self.location.coordinate radius:self.radius];

    [self.mapView addOverlay:overlay];

    GeoQueryAnnotation *annotation = [[GeoQueryAnnotation alloc] initWithCoordinate:self.location.coordinate radius:self.radius];

    [self.mapView addAnnotation:annotation]; 
```

我也尝试过使用：

```
 CLLocation *location = _locationManager.location;

    CLLocationCoordinate2D coordinate = [location coordinate]; 
```

并用 self.location.coordinate 替换坐标

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:26:36.720

告诉你的班级你将要实现 CLLocationManagerDelegate

```
@interface YourClass () <CLLocationManagerDelegate> 
```

然后添加以下方法：

```
 #pragma mark CLLocationManagerDelegate Methods
    - (void)locationManager:(CLLocationManager *)manager
        didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
//You can change the overlay coordinates here. Even with an animation if you want.

    }

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {
    NSString *errorType = (error.code == kCLErrorDenied) ? @"Access Denied" : @"Unknown Error";
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error getting Location"message:errorType delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:nil];
    [alert show];
} 
```

每次位置管理器检测到用户位置的变化时，都会触发 locationManager:didUpdateToLocation... 方法。

干杯。

**编辑** 我忘记了一些非常重要的事情。在您的 viewDidLoad 方法中，将您的类添加为委托：

```
self.locationmanager.delegate = self; 
```

# android - 错误：在包“android”中找不到属性“showAsAction”的资源标识符

> ID：12639354
> 
> 赞同：2
> 
> 时间：2012-09-28T11:42:46.670
> 
> 标签：android, android-emulator

我不在任何 xml 文件中使用此属性，即使当我将“2.3.3”android 版本设置为我的项目属性时，我也会收到此错误。（如果我设置 4.1 clean 工作。但我想找出应用程序在真机上崩溃的原因，所以我尝试设置为 2.3.3。应用程序不会在 Android 2.2 Emulator 上崩溃）还有这个：

> 坏 XML 块：标头大小 63322 或总大小 142711912 大于数据大小 0

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:54:51.897

这是声明目标版本低于 11 (Honeycomb) 的典型情况。某些功能仅从 11 开始可用（与 Theme.Holo 相同）。

在 PROJECT > PROPERTIES > ANDROID 中更改它（别担心，它最多可以挂起 10 分钟，检查您的 sysMonitor，只要 eclipse 占用 CPU 时间，就可以了）。

您可能还需要更改 AndroidManifest.xml 文件中的版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:58:41.010

解决了。我自己发现了问题。我检查了 xml 文件并删除了报告的属性。

# twitter-bootstrap - 将 twitter bootstrap .less 文件编译成自定义 css 文件，它们应该按什么顺序排列？

> ID：12639355
> 
> 赞同：1
> 
> 时间：2012-09-28T11:42:48.677
> 
> 标签：twitter-bootstrap, less

我目前正在做一个项目，我想使用 twitter bootstrap 直接编辑 .less 文件。为此，我有一个 less 编译器，它仅检查 .less 文件是否已更改并将它们重新编译到我的 .css 文件中，然后将其发布到网络上。

我的问题是，每个 .less 文件应该以什么顺序编译到我的 css 文件中，我显然是从添加重置开始的，然后是基础内容、响应等等等，但想知道是否有正确的顺序 - 我在引导站点上看不到任何提及这一点，也不想因为级联错误而导致事情无法正常工作。这对引导程序来说甚至是一个很大的问题吗 - 即它不会对以前的样式进行很多否决。

显然，任何帮助都会受到赞赏 - 谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T12:31:43.187

您只需要编译`bootstrap.less`，因为它会自动导入所有其他文件。

# android - Android ImageView 缩放、旋转、位置变化问题

> ID：12639356
> 
> 赞同：0
> 
> 时间：2012-09-28T11:42:50.477
> 
> 标签：android, rotation, imageview, zooming, ontouchlistener

我正在为图像使用以下代码，该图像将旋转，捏合放大。用户可以通过拖动来确定其位置。

**activity_img_match.xml**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="@drawable/brokenbone"
        android:gravity="center_vertical|center_horizontal" >

        <ImageView
            android:id="@+id/bonestruct"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:scaleType="matrix"
            android:src="@drawable/bone" />
    </FrameLayout> 
```

**ImgMatchActivity.java**

```
 public class ImgMatchActivity extends Activity implements OnTouchListener {

    private static final String TAG = "Touch";
    // These matrices will be used to move and zoom image
    Matrix matrix = new Matrix();
    Matrix savedMatrix = new Matrix();
    Matrix savedMatrix2 = new Matrix();

    // We can be in one of these 3 states
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    private static final float MAX_ZOOM = 5.0f;
    private static final float MIN_ZOOM = 0.15f;
    int mode = NONE;

    // Remember some things for zooming
    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_img_match);

        ImageView bonestruct = (ImageView) findViewById(R.id.bonestruct);
        bonestruct.setOnTouchListener(this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_img_match, menu);
        return true;
    }

    public boolean onTouch(View selectedView, MotionEvent event) {
        // TODO Auto-generated method stub
        ImageView view = (ImageView) selectedView;
        int rotation = 25;
        // Dump touch event to log
        dumpEvent(event);

        // Handle touch events here...
        switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            savedMatrix.set(matrix);
            start.set(event.getX(), event.getY());
            Log.d(TAG, "mode=DRAG");
            mode = DRAG;
            break;

        case MotionEvent.ACTION_POINTER_DOWN:
            oldDist = spacing(event);
            Log.d(TAG, "oldDist=" + oldDist);
            if (oldDist > 10f) {
                savedMatrix.set(matrix);
                midPoint(mid, event);
                mode = ZOOM;
                Log.d(TAG, "mode=ZOOM");
            }
            break;

        case MotionEvent.ACTION_UP:

            mode = NONE;
            Log.d(TAG, "mode=NONE");
            savedMatrix.set(matrix);
            //matrix.postRotate(90);

            break;

        case MotionEvent.ACTION_MOVE:
            if (mode == DRAG) {
                // ...
                matrix.set(savedMatrix);
                matrix.postTranslate(event.getX() - start.x, event.getY()
                        - start.y);
            } else if (mode == ZOOM) {
                float newDist = spacing(event);
                Log.d(TAG, "newDist=" + newDist);
                if (newDist > 10f) {
                    matrix.set(savedMatrix);
                    float scale = newDist / oldDist;
                    matrix.postScale(scale, scale, mid.x, mid.y);
                }
            }
            break;
        }

        view.setImageMatrix(matrix);
        fixing();
        view.setImageMatrix(savedMatrix2);

        return true; // indicate event was handled

    }

    public void fixing() {

        float[] value = new float[9];
        matrix.getValues(value);

        float[] savedValue = new float[9];
        savedMatrix.getValues(savedValue);

        WindowManager mWinMgr = (WindowManager) getApplicationContext().getSystemService(Context.WINDOW_SERVICE);
        int width = mWinMgr.getDefaultDisplay().getWidth();
        int height = mWinMgr.getDefaultDisplay().getHeight();

        Drawable d = this.getResources().getDrawable(R.drawable.bone);
        if (d == null)
            return;
        int imageWidth = d.getIntrinsicWidth();
        int imageHeight = d.getIntrinsicHeight();
        int scaleWidth = (int) (imageWidth * value[0]);
        int scaleHeight = (int) (imageHeight * value[4]);

        // don't let the image go outside
        if (value[2] > width - 1)
            value[2] = width - 10;
        else if (value[5] > height - 1)
            value[5] = height - 10;
        else if (value[2] < -(scaleWidth - 1))
            value[2] = -(scaleWidth - 10);
        else if (value[5] < -(scaleHeight - 1))
            value[5] = -(scaleHeight - 10);

        //Log.d("value[0]", "value[0]: "+value[0]);
        //Log.d("value[4]", "value[4]: "+value[4]);

        // maximum zoom ratio: MAX
        if (value[0] > MAX_ZOOM || value[4] > MAX_ZOOM) {
            value[0] = MAX_ZOOM;
            value[4] = MAX_ZOOM;
            // value[2] = savedValue[2];
            // value[5] = savedValue[5];
        }

        // minimum zoom ratio: MIN
        /*if (value[0] < MIN_ZOOM || value[4] < MIN_ZOOM) {
            value[0] = MIN_ZOOM;
            value[4] = MIN_ZOOM;
            // value[2] = savedValue[2];
            // value[5] = savedValue[5];
        }*/

        matrix.setValues(value);
        savedMatrix2.set(matrix);
    }

    /** Show an event in the LogCat view, for debugging */
    private void dumpEvent(MotionEvent event) {
        String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE",
                "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
        StringBuilder sb = new StringBuilder();
        int action = event.getAction();
        int actionCode = action & MotionEvent.ACTION_MASK;
        sb.append("event ACTION_").append(names[actionCode]);
        if (actionCode == MotionEvent.ACTION_POINTER_DOWN
                || actionCode == MotionEvent.ACTION_POINTER_UP) {
            sb.append("(pid ").append(
                    action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
            sb.append(")");
        }
        sb.append("[");
        for (int i = 0; i < event.getPointerCount(); i++) {
            sb.append("#").append(i);
            sb.append("(pid ").append(event.getPointerId(i));
            sb.append(")=").append((int) event.getX(i));
            sb.append(",").append((int) event.getY(i));
            if (i + 1 < event.getPointerCount())
                sb.append(";");
        }
        sb.append("]");
        Log.d(TAG, sb.toString());
    }

    /** Determine the space between the first two fingers */
    private float spacing(MotionEvent event) {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    /** Calculate the mid point of the first two fingers */
    private void midPoint(PointF point, MotionEvent event) {
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }

} 
```

现在我可以拖动图像，通过捏合操作将其缩小。但是根本没有旋转。如何获得旋转动作并获得旋转角度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-17T06:32:17.590

试试下面的代码它对我有用。

```
float[] lastEvent = null;
float d = 0f;
float newRot = 0f;

 public boolean onTouch(View v, MotionEvent event) {
            ImageView view = (ImageView) v;

            // Handle touch events here...
            switch (event.getAction() & MotionEvent.ACTION_MASK) {
            case MotionEvent.ACTION_DOWN:
                savedMatrix.set(matrix);
                start.set(event.getX(), event.getY());
                mode = DRAG;
                lastEvent = null;
                break;
            case MotionEvent.ACTION_POINTER_DOWN:
                oldDist = spacing(event);
                if (oldDist > 10f) {
                    savedMatrix.set(matrix);
                    midPoint(mid, event);
                    mode = ZOOM;
                }
                lastEvent = new float[4];
                lastEvent[0] = event.getX(0);
                lastEvent[1] = event.getX(1);
                lastEvent[2] = event.getY(0);
                lastEvent[3] = event.getY(1);
                d = rotation(event);
                break;
            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_POINTER_UP:
                mode = NONE;
                lastEvent = null;
                break;
            case MotionEvent.ACTION_MOVE:
                if (mode == DRAG) {
                    // ...
                    matrix.set(savedMatrix);
                    matrix.postTranslate(event.getX() - start.x, event.getY()
                            - start.y);
                } else if (mode == ZOOM && event.getPointerCount() == 2) {
                    float newDist = spacing(event);
                    matrix.set(savedMatrix);
                    if (newDist > 10f) {
                        float scale = newDist / oldDist;
                        matrix.postScale(scale, scale, mid.x, mid.y);
                    }
                    if (lastEvent != null) {
                        newRot = rotation(event);
                        float r = newRot - d;
                        matrix.postRotate(r, view.getMeasuredWidth() / 2,
                                view.getMeasuredHeight() / 2);
                    }
                }
                break;
            }

            view.setImageMatrix(matrix);

            return true;
        } 
```

//用于在多点触控上旋转图像。

```
private float rotation(MotionEvent event) {
        double delta_x = (event.getX(0) - event.getX(1));
        double delta_y = (event.getY(0) - event.getY(1));
        double radians = Math.atan2(delta_y, delta_x);

        return (float) Math.toDegrees(radians);
    } 
```

# symfony - LogicException：容器扩展“jms_serializer”未注册

> ID：12639358
> 
> 赞同：4
> 
> 时间：2012-09-28T11:42:53.653
> 
> 标签：symfony, fosrestbundle, jmsserializerbundle

我正在尝试添加 FosComment 包、FOS Rest Bundle、JMS 序列化程序

我收到错误 LogicException：容器扩展“jms_serializer”未注册

当它们安装时。
\任何人都可以建议解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:48:55.400

您应该确保您使用的是标签 0.9，如[本期](https://github.com/schmittjoh/JMSSerializerBundle/issues/181)建议的那样。

# java - ANTLR 重写语句的问题（简单？）

> ID：12639361
> 
> 赞同：0
> 
> 时间：2012-09-28T11:43:03.297
> 
> 标签：java, antlr3, antlrworks

我不断得到`MissingTokenException`，，`NullPointerException`如果我没记错的话`NoViableAlterativeException`。ANTLRWorks 的日志文件/控制台输出对我来说没有足够的帮助。

我所追求的是重写，如下所示：

```
(expression | FLOAT) '(' -> (expression | FLOAT) '*(' 
```

下面是我用来创建测试文件的语法示例。

```
grammar Test;

expression
: //FLOAT '(' -> (FLOAT '*(')+
| add EOF!
;
term
:   
| '(' add ')'
| FLOAT
| IMULT
;

IMULT
:   (add ('(' add)*) -> (add ('*' add)*)
;
negation
:   '-'* term
;

unary
:   ('+' | '-')* negation
;

mult
:   unary (('*' | '/') unary)*
;

add
:   mult (('+' | '-') mult)*
;

ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
;

FLOAT
:   ('0'..'9')+ '.' ('0'..'9')*// EXPONENT?
|   '.' ('0'..'9')+ //EXPONENT?
|   ('0'..'9')+ //EXPONENT
;

WS  :   ( ' '
    | '\t'
    | '\r'
    | '\n'
    ) {$channel=HIDDEN;}
; 
```

我也试过：

```
imult
: FLOAT '(' -> FLOAT '*('
; 
```

和这个：

```
IMULT / imult
: expression '(' -> expression '*'
; 
```

以及我数不清的无数其他版本（黑客）。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:21:55.230

我以前遇到过这个问题。基本答案是 ANTLR 不允许您在“->”语句的右侧使用左侧不存在的标记。但是，您可以做的是使用专门为 AST 定义的额外令牌。只需在语法规则之前创建一个标记块，如下所示：

```
tokens { ABSTRACTTOKEN; } 
```

您可以像这样在语法语句的右侧使用它们。

```
imult
: FLOAT '(' -> ^(ABSTRACTTOKEN FLOAT) 
; 
```

希望有帮助。

# asp.net-mvc-3 - 如何制作一个循环来为每个项目重复我的方法？

> ID：12639363
> 
> 赞同：-1
> 
> 时间：2012-09-28T11:43:15.560
> 
> 标签：asp.net-mvc-3

这是我的问题。在控制器中，我有这种方法，当我单击按钮时，它会将我的视图导出到文件中。

```
public ActionResult Export(string searchString, int searchOrder = 0)
{
    var user = from m in db.Orders select m;

    if (!String.IsNullOrEmpty(searchString))
    {
        user = user.Where(s => s.ClientID.Contains(searchString));
    }

    Response.AddHeader("Content-Type", "application/vnd.ms-excel");            
    return this.View(user);
} 
```

我的索引视图：

```
@model IEnumerable<MyApp.Models.Order>

@{
    ViewBag.Title = "Index";
}

<h2>Orders Historic</h2>    

<div id="orderDiv">
@using (Html.BeginForm("Export", "Historic", FormMethod.Get))
{
            <p>
        Generate Order with ClientID :&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
         @Html.TextBox("searchString")

        <input type="submit" value="GENEREMOI" />
        </p>
}
</div> 
```

还有我的导出视图：

```
@model IEnumerable<KrysGroup.Models.Order>

    <table cellpadding="3" cellspacing="3">
        <tr>       
            <td width="12%" align="center">
                Client Name/ID
            </td>
            <td width="15%" align="center">
                N° Order
            </td>

            OTHER TD....

        </tr>   

@foreach (var item in Model)
{
      TimeSpan result = DateTime.Now - item.OrderDate;

      if (result.Days < 31)
      {            
            <tr border="1" bgcolor="@Odd">
               <td> @Html.DisplayFor(modelItem => item.Username) </td>    
               <td> @Html.DisplayFor(modelItem => item.OrderId) </td>  
                <td>
                    <ul style="list-style-type:none; padding:0; margin:0">
                        @if (item.OrderDetails != null)
                        {
                            foreach (var o in item.OrderDetails)
                            {
                                if (o.Pack == null)
                                { 
                                    <li>  @Html.DisplayFor(modelItem => o.Product.Name)  </li>
                                }
                                else
                                {  
                                    <li> <text>Pack</text>  @Html.DisplayFor(modelItem => o.Pack.Name)  </li>
                                }
                            }
                        }  
                    </ul>             
                </td>

                OTHER TD...    
 </table> 
```

因此，在我看来，我在文本框中通知了一个 ClientID，当我单击该按钮时，它会将我的表中具有此 ClientID 的所有字段导出到一个文件中。

我想自动化这个动作，也就是说我想写一个方法或其他东西，当我点击按钮时，它会为它在我的表中遇到的每个 clientId 执行这​​个 export() 方法。

我希望我足够清楚，对不起我的英语.. 感谢您的回答、链接、提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:24:41.190

您可以将部分视图键入到单击按钮时加载的 Id 列表中。

因此，在控制器中，您有一个方法可以转换您想要的内容并返回一个输入模型转换的视图。

在您的主视图中，您有一个 div 将在原始按钮的单击事件之后填充部分视图。

```
@Ajax.ActionLink("Name", "NameOfTheAction", "NameOfTheController",
                                   new { id = itemId },
                                   new AjaxOptions { HttpMethod = "Get", UpdateTargetId = "divInMainView", OnSuccess = "Do Something (js)" },
                                    new { html-props }) 
```

在您看来，如何填充取决于您

# jquery - 带有动态列的 asp.net 的 jQuery 网格

> ID：12639373
> 
> 赞同：2
> 
> 时间：2012-09-28T11:44:15.070
> 
> 标签：jquery, asp.net

有许多不同的 jquery 网格插件可用，但我似乎无法找到或无法解决如何动态填充一个。我的意思是对于一个网格，我可以返回一个包含 5 列的数据集/json 等，或者一个只有 2 列的数据集，我希望它进行相应的调整。我发现的所有内容都要求您在分配数据之前以某种方式指定列，但我不能这样做，因为返回到网格的数据是完全随机的（因为它在选择表时用作用户的数据预览/字段）。

有谁知道可以处理动态列的一种，或者我可以使用的一种我每次都可以轻松修改它们的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:49:10.887

Infragistics jQuery Grid 确实具有自动生成列的功能。这是显示此内容的示例：

[igGrid 自动列生成](http://www.infragistics.com/products/jquery/sample/grid/auto-generate-columns)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:51:44.533

我建议使用类似[datatables](http://www.datatables.net/)的东西。这将允许您将网格构建为普通的 html 表格，然后对其应用数据表插件，这样您就可以控制表格的外观，然后再将其变成网格

# java - 如何将数千条记录传递给线程？

> ID：12639375
> 
> 赞同：0
> 
> 时间：2012-09-28T11:44:18.713
> 
> 标签：java, multithreading

我已经从 db 中检索了数千条记录到`ArrayList`. 我需要根据这些记录形成报告。

如何在 Java 中应用多线程来实现此功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:45:20.847

在不知道您正在尝试的细节的情况下，我会向您指出[Executor 教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html)。

使用 Executor 框架允许您将工作拆分为作业（Callables），并且 executor 将并行执行这些作业（使用池等）。您只需查询/等待您的工作完成，而无需处理`notify()`/ `wait()`/`join()`等的复杂性。

API 抽象出池/线程创建问题以及调度和确定您的作业何时完成（和/或异常处理）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:47:31.753

您需要提供更多详细信息，但通常*生产者-消费者*模式应该可以工作。尝试一些简单的东西，例如[`ExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)：

```
final List<Record> records = //...
final ExecutorService executorService = Executors.newFixedThreadPool(10);
for (final Record record : records) {
    executorService.submit(new Runnable() {
        @Override
        public void run() {
            //process record here
        }
    });
} 
```

此代码将获取每条记录并在最多 10 个线程中并行处理它。当然，这取决于您的要求，您想用它做什么。例如用于[`Callable<T>`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)返回一些结果，[`ExecutorCompletionService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html)等待第一个结果等。

# php - PHP mail（）不发送电子邮件

> ID：12639378
> 
> 赞同：-1
> 
> 时间：2012-09-28T11:44:23.763
> 
> 标签：php, email

我在网页上有一个表格，它使用该`PHP mail()`功能通过电子邮件发送详细信息。表格很长，我还包括电子邮件的 HTML 格式。
如果我不包含所有表单信息，电子邮件发送正常，但是当我尝试包含整个表单时，电子邮件不会发送。当我包含太多信息时，它似乎停止工作。一旦我取出一些信息，它就会再次起作用，我删除信息的哪一部分并不重要。
我已经在两个不同的网站主机上尝试了同样问题的表单。电子邮件的内容只有大约 300 行，所以我不确定大小是否是问题。

有谁知道可能导致问题的原因？

[这是我的代码供您参考](http://www.benmango.co.uk/code.html)

当我在上面说“停止工作”时，我的意思只是该`mail()`函数返回 false 并且不发送电子邮件。实际形式工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:51:55.343

当您在 PHP 脚本中遇到如此多的 HTML 时，将其捕获在一个变量中而不是将每一行都放在一个 $body 变量中是很有用的。

```
ob_start();
?>
<html>
   Your HTML.
</html>
<?
$body = ob_get_clean(); 
```

这样，您可以更轻松地查看您的消息是否有问题破坏了邮件功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:08:31.567

下面是[php邮件功能的说明](http://www.php.net/manual/en/function.mail.php)。本文档连同本文档，[什么是 PHP 邮件字符限制](http://www.ehow.com/info_12198732_php-mail-character-limit.html)，指定正文的每一行不得超过 70 个字符。

这个 stackoverflow，[What is the maximum length of a string in PHP](https://stackoverflow.com/questions/3189040/what-is-the-maximum-length-of-a-string-in-php)以及其他来源表明 PHP 没有特定限制，除了您的字符串似乎远远低于的总内存限制。

还有几个不同的地方可能会发生故障，并且您没有指定您看到的故障行为。

首先，检查 mail() 的返回值以确定 PHP 是否能够将消息传递给邮件代理 MTA。接下来确保您指定收件地址和返回地址，以便如果邮件代理出现问题，它能够向您发送某种描述问题的回复。

**上面Undrium提供的答案的详细说明。根据他的回答，这里有一些指向其他材料的链接。**

这是[ob_get_clean() 文档](http://php.net/manual/en/function.ob-get-clean.php)。

这是一个[使用 ob_get_clear() 发送 HTML Email](http://webcheatsheet.com/php/send_email_text_html_attachment.php)的示例。

# facebook - 删除Facebook页面应用程序后如何仍然访问它？

> ID：12639381
> 
> 赞同：0
> 
> 时间：2012-09-28T11:44:35.263
> 
> 标签：facebook, tabs, uninstallation, favorites

我们正在为 Facebook 页面创建一个应用程序，由于其性质，该页面必须链接到同一页面中的其他选项卡。所以有一个应用程序应该链接到 4-5 个以上。我试图仅在“收藏夹”（封面图片正下方的位置）中显示父应用程序，并隐藏所有其他应用程序，因此您只能从父应用程序访问它们。我注意到当您将鼠标悬停在每个应用程序上并单击铅笔图标时，有两个选项，“从收藏夹中删除”和“卸载应用程序”。

命名表明从收藏夹中删除应用程序不会从该页面卸载应用程序。然而，事实并非如此。从收藏夹中删除应用程序后，我无法再使用其不同的 url 访问它。所以，我的问题是，这两个操作之间有什么区别，以及是否有一种方法可以链接到应用程序而不显示收藏夹中的应用程序！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:56:29.800

> 所以，我的问题是，这两个动作有什么区别

如果您只是从收藏夹中删除该应用程序，它仍会显示在您的页面管理控制台中的“应用程序”下，管理员可以轻松地将其重新添加为页面选项卡。

但是，如果您卸载它，它将完全从您的页面中删除，甚至从管理部分中也是如此。（如果这也使之前发布的页面访问令牌无效，我不确定 - 可能是。）

> 并且如果有一种方法可以链接到应用程序而不显示收藏夹中的应用程序！

不，不适用于页面标签。

您可以将您的其他应用程序设置为画布应用程序 - 但它们将不再位于您页面的“上下文”中，这意味着您无法轻松检查访问用户是否喜欢您的页面。

# android - Android：requestFocus() 不是来自软键盘的字符

> ID：12639383
> 
> 赞同：0
> 
> 时间：2012-09-28T11:44:37.137
> 
> 标签：android, android-edittext, fragment, android-softkeyboard

在一个活动中说`MainActivity`，我以编程方式添加了一个片段说`Fragment_1`

这`Fragment_1`有一个布局，其中包含一个`EditText`. 当我开始显示此内容`Fragment_1`时，`EditText`焦点集中但未`soft keyboard`打开

所以我点击`EditText`打开`keyboard`,`type some text`和`click done button`，它必须替换`Fragment_1`为`Fragment_2`其中还包含一个`EditText`.

但是 this `EditText`in `Fragment_2`is not `focused`，但 the `keyboard`is still `open`（可能是因为 last `Fragment_1`）

所以我添加了这个`Fragment_2`

```
EditText.requestFocus(); 
```

焦点在那里并且键盘打开，但`EditText`没有被我点击的关键字符填充。

为什么会这样？？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:47:59.720

您应该为第一个片段上的第一个编辑文本隐藏键盘

```
private InputMethodManager mInputMethodManager = (InputMethodManager) getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
EditText.clearFocus();
mInputMethodManager.hideSoftInputFromWindow(EditText.getWindowToken(), 0); 
```

并且您应该为第二个编辑文本请求焦点并显示键盘：

```
EditText.requestFocus();
mInputMethodManager.showSoftInput(EditText, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T10:06:20.053

输入法管理器会忽略键盘请求，除非它`EditText`和它所在的 Window 都具有焦点。因此，在输入`Activity`/`Dialog`后，您需要等到焦点稳定下来后再请求键盘。您可以通过在 中调用`InputMethodManager`服务来做到这一点`OnFocusChangeListener`，但 Views 可以在 Window 本身之前获得焦点，因此您必须等待 Window 获得焦点。您无法找到`OnFocusChangeListener`在 Window 对象本身上添加一个，但监听 View 焦点并发布一个 Runnable 似乎有效。

[请在这里看一个漂亮的分析](http://turbomanage.wordpress.com/2012/05/02/show-soft-keyboard-automatically-when-edittext-receives-focus/)

# jquery - Twitter Boostrap 下拉加载 Ajax 内容

> ID：12639385
> 
> 赞同：0
> 
> 时间：2012-09-28T11:44:46.617
> 
> 标签：jquery, drop-down-menu, twitter-bootstrap

我不知道如何在打开 Bootstrap 下拉菜单时将内容加载到其中。单击触发器时，我什至无法让它记录某些内容。

```
<span class="dropdown">
  <a class="btn btn-mini btn-info dropdown-toggle insert-gallery" id="dLabel" role="button" data-media-id="50" data-toggle="dropdown" href="#">
    Add To Gallery
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"></ul>
</span>

$('.insert-gallery').on('click', function(){
  var media_id = $(this).data('media-id');
  console.log(media_id);
  console.log('click');
}); 
```

控制台不记录任何内容...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:49:55.070

Ok 找到了解决方法，因为插件当前在单击事件上返回 false。

删除数据切换和以下内容：

```
$(document).on("click", ".dropdown-toggle", function(event) {
  // Ajax actions here 
  $(this).attr("data-toggle", "dropdown").click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:47:46.333

这是下拉插件的破解版本，它发布到 href 并在请求中发布内联数据属性。

[http://pastebin.com/fRWJaL6L](http://pastebin.com/fRWJaL6L)

# c# - 使用引用的 ItemsSource 绑定到 SelectedItem

> ID：12639389
> 
> 赞同：3
> 
> 时间：2012-09-28T11:45:13.177
> 
> 标签：c#, wpf, binding, datacontext

## 介绍

我有一个不同的数据源池。我有口罩。口罩有索引线。每个 Indexline 都有一个来自关联池的 DataSource：

## 课程

```
public class DataSource
{
    public string Name { get; set; }

    public override string ToString()
    {
        return Name;
    }
}

public class Mask
{
    public string Name { get; set; }
    public ObservableCollection<Indexline> Indexlines { get; set; }

    public override string ToString()
    {
        return Name;
    }
}

public class Indexline
{
    public DataSource SelectedDatasource { get; set; }
} 
```

## 依赖属性

在我的 MainWindow 上，我有一些依赖属性（它们没什么特别的）：

*   可用数据源 ( `ObservableCollection<DataSource>`)
*   可用口罩 ( `ObservableCollection<Mask>`)
*   选定蒙版 ( `Mask`)

## 样本数据

这是我的示例数据，它在以下`Loaded`事件中设置`Window`：

```
this.AvalibleMasks = new ObservableCollection<Mask>()
{
    new Mask()
    {
        Name = "Search Mask",
        Indexlines = new ObservableCollection<Indexline>()
        {
            new Indexline(),
            new Indexline(),
            new Indexline(),
            new Indexline(),
        }
    },
    new Mask()
    {
        Name = "Document Mask",
        Indexlines = new ObservableCollection<Indexline>()
        {
            new Indexline(),
            new Indexline(),
        }
    }
};

this.AvalibleDataSources = new ObservableCollection<DataSource>()
{
    new DataSource(){Name = "ERP Database"},
    new DataSource(){Name = "CRM Database"},
}; 
```

## XAML

这是我的窗口的 xaml 代码：

```
<Window x:Class="DataSourcesQuestion.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Name="MainWindow_instance"
        Title="MainWindow" Height="372" Width="735" Loaded="Window_Loaded">
    <Grid>

        <ListBox ItemsSource="{Binding AvalibleMasks}" SelectedItem="{Binding SelectedMask}" Margin="10,10,10,236" />

        <DataGrid Margin="10,111,10,43" ItemsSource="{Binding SelectedMask.Indexlines}" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTemplateColumn Width="500" Header="Selected DataSource">
                    <DataGridTemplateColumn.CellTemplate>                        
                        <DataTemplate>

                            <ComboBox ItemsSource="{Binding AvalibleDataSources,Source={x:Reference MainWindow_instance}}" 
                                      SelectedItem="{Binding SelectedDatasource}"/>

                        </DataTemplate>                        
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

    </Grid>
</Window> 
```

我现在在 中选择一个掩码`ListBox`，然后在 中显示所有索引行`DataGrid`。到目前为止一切都很好。当我知道 select a `DataSource`from the`ComboBox`时，它​​不会存储到`Indexline`对象中。（因为当我切换掩码，然后切换回来时，选择消失了。而且当我使用调试器时，我可以看到s 都是空的`SelectedDatasource`）`Mask`

![显示代码用户界面的图像](../Images/c33e0b154ec5080055b97694d85b0abd.png)

## 问题

**这种行为的原因是什么？我需要改变什么才能得到预期的结果？**

* * *

*有人可以建议一个更好的标题吗？我觉得当前的不是很有帮助:(*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:01:09.130

我找到了原因：

s属性的默认值`UpdateSourceTrigger`似乎是. 将其设置为显式，可以解决问题！太简单！`ComboBox``SelectedItem``Explicit``PropertyChanged`

这就是新的完整 XAML 代码

```
<Window x:Class="DataSourcesQuestion.MainWindow" 
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Name="MainWindow_instance" 
        Title="MainWindow" Height="372" Width="735" Loaded="Window_Loaded"> 
    <Grid> 

        <ListBox ItemsSource="{Binding AvalibleMasks}" SelectedItem="{Binding SelectedMask}" Margin="10,10,10,236" /> 

        <DataGrid Margin="10,111,10,43" ItemsSource="{Binding SelectedMask.Indexlines}" AutoGenerateColumns="False"> 
            <DataGrid.Columns> 
                <DataGridTemplateColumn Width="500" Header="Selected DataSource"> 
                    <DataGridTemplateColumn.CellTemplate>                         
                        <DataTemplate> 

                            <ComboBox ItemsSource="{Binding AvalibleDataSources,Source={x:Reference MainWindow_instance}}"  
                                      SelectedItem="{Binding SelectedDatasource, UpdateSourceTrigger=PropertyChanged}"/> 

                        </DataTemplate>                         
                    </DataGridTemplateColumn.CellTemplate> 
                </DataGridTemplateColumn> 
            </DataGrid.Columns> 
        </DataGrid> 

    </Grid> 
</Window> 
```

# cordova - ShareKit 无法将消息或图像分享到 Facebook

> ID：12639395
> 
> 赞同：0
> 
> 时间：2012-09-28T11:45:27.560
> 
> 标签：cordova, sharekit

![错误](../Images/97a4d3f8b62d2267e210cef5e9228d8b.png)

我正在使用共享工具包将图像或消息发布到 Facebook。登录页面出现后出现以下错误。错误显示在图像中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:53:37.737

我有同样的问题。这个链接帮助了我：[ShareKit + Facebook authentication not working](https://stackoverflow.com/questions/9951292/sharekit-facebook-authentication-not-working) 特别是“Ramel singh Rana”的答案。希望这对其他人也有帮助。

# jquery - 如何在关键帧动画中应用 CSS3 变换？

> ID：12639398
> 
> 赞同：0
> 
> 时间：2012-09-28T11:45:41.827
> 
> 标签：jquery, html, css, css-transforms

如何使用 CSS3 动画应用多个变换？

这是我的 HTML 代码：

```
<div class="container">
<div class="cell"><span class="inner"></span><span class="inner"></span></div>
<div class="cell"><span class="inner"></span><span class="inner"></span></div>
<div class="cell"><span class="inner"></span><span class="inner"></span></div>
<div class="cell"><span class="inner"></span><span class="inner"></span></div>
<div class="cell"><span class="inner"></span><span class="inner"></span></div>
</div> 
```

我的尝试：

```
@-webkit-keyframes firstanim{
    from{
        -webkit-transform:scale(1);
        -webkit-transform:rotate(0deg);
    backgroud:skyblue;
    left:0px;

    -webkit-transform: rotateY(0deg);
   }    to{
    -webkit-transform:rotate(360deg);
    -webkit-transform:scale(1.5);
    background:orange;
    left:100px;
    -webkit-transform: rotateY(360deg);
   }
}

.container{
    border:1px solid black;
    padding:20px;
    width:250px;
    height:50px;
    position:realtive;
}
.cell{
    width:25px;
    height:25px;

    background:skyblue;

    float:left;
    display:inline-block;
    margin:0px 5px;
    position:relative;
    -webkit-animation: firstanim 3s infinite;

}
.inner{
 width:100%;
 height:50%;
 float:left;

    border:1px solid white;
    border-left-width:0px;
    borer-right-width:0px;
} 
```

结果位于[此处](http://jsfiddle.net/TBrf2/1/)。

即使我添加了更多，也只对元素应用了一种变换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:51:07.917

如果你写这样的东西：

```
transform: rotate(30deg);
transform: scale(3); 
```

然后*第二个覆盖第一个*，并且您的元素仅缩放，不旋转。

为了将多个转换应用于单个元素，您需要将它们链接起来。

例子：

```
transform: rotate(30deg) scale(3) translateX(3em) skewY(60deg); 
```

此外，**应用它们的顺序很重要**，根据选择的顺序，您可能会得到不同的结果 - 请参阅[**此示例**](http://dabblet.com/gist/3799448)，其中蓝色框在应用相同的两个变换后与红色框的形状不同，但在逆序。

您使用链式转换的小提琴：http: [//jsfiddle.net/TBrf2/4/](http://jsfiddle.net/TBrf2/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:56:00.760

这是使用多个转换的[小提琴演示。](http://jsfiddle.net/TBrf2/3/)

```
-webkit-transform:scale(1)  rotateY(0deg); 
```

你需要像这样申请。

# c# - 找不到类型“###”的构造函数

> ID：12639403
> 
> 赞同：2
> 
> 时间：2012-09-28T11:46:43.930
> 
> 标签：c#, .net, reflection

我有一个接受这些参数的类型：

```
public SmaSeries(ISeries<decimal> parent, int periods, TierKind? runOnTier = null) 
```

我正在尝试通过在 args 参数中传递 object[] 来使用 Activator.CreateInstance （接受类型和 args 的重载）创建这种类型的实例：

```
 new object[] 
 {
    new DecimalSeries(),
    20,
    new Nullable<TierKind>(TierKind.Client)
 }

//DecimalSeries implements ISeries<decimal> 
```

*找不到类型“SmaSeries”的构造函数*。

 *有没有办法修复 args 以便激活器找到构造函数？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T11:55:59.117

在 .NET 4.5 甚至 2.0 中都能正常工作

```
using System;

class SmaSeries
{
    public SmaSeries(ISeries<decimal> parent, int periods,
         TierKind? runOnTier = null) { }
    static void Main()
    {
        object[] args = new object[] 
         {
            new DecimalSeries(),
            20,
            new Nullable<TierKind>(TierKind.Client)
         };

        object obj = Activator.CreateInstance(typeof(SmaSeries), args);
    }
}
enum TierKind { Client }
interface ISeries<T> { }
class DecimalSeries : ISeries<decimal> { } 
```

我想也许：您的构造函数或其中一种类型可能不是公开的？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T14:17:35.803

果然是个bug。我正在创建对象列表以动态添加参数，然后在调用激活器时忘记执行 ToArray，并且由于 args 是参数对象 []，因此它采用列表而不是其成员。很抱歉浪费您的时间，并感谢所有回复/评论这篇文章的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-13T02:08:30.203

`DateTimeConverter`在将 Unity 项目导出到 iOS 后，我收到了这个错误。原来项目中的一个 DLL 使用反射来获取类型转换器，因此执行时的代码需要一段`DateTimeConverter`时间，在原始代码库中没有明确引用它。我怀疑这导致程序集在代码剥离过程中被排除在最终构建之外。

解决方案只是添加一个：

```
new System.ComponentModel.DateTimeConverter(); 
```

源代码中的任何位置。这表明构建过程包含必要的代码。*

# mysql - SQL - IF EXISTS UPDATE ELSE INSERT 语法错误

> ID：12639407
> 
> 赞同：33
> 
> 时间：2012-09-28T11:46:57.247
> 
> 标签：mysql, sql

我有以下 SQL 查询：

```
IF EXISTS(SELECT * FROM component_psar WHERE tbl_id = '2' AND row_nr = '1') 
   UPDATE component_psar
      SET col_1 = '1', col_2 = '1', col_3 = '1', col_4 = '1', col_5 = '1',
                 col_6 = '1', unit = '1', add_info = '1', fsar_lock = '1' 
    WHERE tbl_id = '2' AND row_nr = '1' 
ELSE 
    INSERT INTO component_psar (tbl_id, row_nr, col_1, col_2, col_3, col_4,
                                col_5, col_6, unit, add_info, fsar_lock)
    VALUES ('2', '1', '1', '1', '1', '1', '1', '1', '1', '1', 'N') 
```

忽略我试图将每一列设置为“1”的事实。这只是示例数据。:)

无论如何，执行此查询会返回语法错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your
     MySQL server version for the right syntax to use near 'IF EXISTS(SELECT * FROM
     component_psar WHERE tbl_id = '2' AND row_nr = '1') UP' at line 1 
```

我一直盯着它并在互联网上搜索了半个小时，但找不到这个所谓的语法错误。它可能最终会成为我想念的非常愚蠢的东西，但我可以在这方面使用你们的帮助。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-09-28T11:54:36.007

```
INSERT INTO component_psar (tbl_id, row_nr, col_1, col_2, col_3, col_4, col_5, col_6, unit, add_info, fsar_lock)
VALUES('2', '1', '1', '1', '1', '1', '1', '1', '1', '1', 'N')
ON DUPLICATE KEY UPDATE col_1 = VALUES(col_1), col_2 = VALUES(col_2), col_3 = VALUES(col_3), col_4 = VALUES(col_4), col_5 = VALUES(col_5), col_6 = VALUES(col_6), unit = VALUES(unit), add_info = VALUES(add_info), fsar_lock = VALUES(fsar_lock) 
```

将使用`tbl_id`并`row_nr`拥有`UNIQUE`密钥。

这是 DocJonas 与示例相关联的方法。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-28T11:49:19.853

这是文档[INSERT ... ON DUPLICATE](http://dev.mysql.com/doc/refman/5.7/en/insert-on-duplicate.html)语句的链接。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-28T11:54:58.260

你必须添加`THEN`

```
IF EXISTS(SELECT * FROM component_psar WHERE tbl_id = '2' AND row_nr = '1') 
THEN
UPDATE component_psar SET col_1 = '1', col_2 = '1', col_3 = '1', col_4 = '1', col_5 = '1', col_6 = '1', unit = '1', add_info = '1', fsar_lock = '1' WHERE tbl_id = '2' AND row_nr = '1' 
ELSE 
INSERT INTO component_psar (tbl_id, row_nr, col_1, col_2, col_3, col_4, col_5, col_6, unit, add_info, fsar_lock) VALUES('2', '1', '1', '1', '1', '1', '1', '1', '1', '1', 'N') 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-15T05:26:24.103

在这种方法中，当 UPDATE 成功时只执行一条语句。

```
-- For each row in source
BEGIN TRAN    

UPDATE target
SET <target_columns> = <source_values>
WHERE <target_expression>

IF (@@ROWCOUNT = 0)
   INSERT target (<target_columns>)
VALUES (<source_values>)

COMMIT 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-18T21:05:43.217

这难道不是最优雅的吗？

```
REPLACE 
INTO component_psar (tbl_id, row_nr, col_1, col_2, col_3, col_4, col_5, col_6, unit, add_info, fsar_lock) 
VALUES('2', '1', '1', '1', '1', '1', '1', '1', '1', '1', 'N') 
```

见：[http ://dev.mysql.com/doc/refman/5.7/en/replace.html](http://dev.mysql.com/doc/refman/5.7/en/replace.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-13T23:14:59.320

使用以下语句：

```
IF EXISTS(SELECT * FROM prueba )
then
  UPDATE prueba
  SET nombre = '1', apellido = '1' 
  WHERE cedula = 'ct'
ELSE 
  INSERT INTO prueba (cedula, nombre, apellido)
  VALUES ('ct', 'ct', 'ct'); 
```

# jquery - IE中的jquery克隆方法消除了选择选项

> ID：12639408
> 
> 赞同：0
> 
> 时间：2012-09-28T11:46:59.337
> 
> 标签：jquery, internet-explorer, clone

我有以下代码：-

```
//-- function to enable editing of content if disabled for new records --\\
function edit(e,elems)
{
  if ( e.value == "new" )
  {
    $(e).parent().parent().find(":input[readonly]").each(function(index) {
      $(this).prop('readonly',false);
      $(this).addClass('highlight');
    });
      $(e).parent().parent().find("select[disabled]").each(function(index) {
      $(this).prop('disabled',false);
      $(this).addClass('highlight');
//-- Insert dynamic options --\\
      if ($(this).attr('name') == 'low')
      {
        var optVal = "option[value='" + $(this).val() + "']";
        var optclone = $("#affoptions").clone();
        $(optclone).find(optVal).attr("selected",true);
        $(this).html($(optclone).find("option"));
      }
      if ($(this).attr('name') == 'high')
      {
        var optVal = "option[value='" + $(this).val() + "']";
        optclone = $("#insoptions").clone();
        $(optclone).find(optVal).attr("selected",true);
        $(this).html($(optclone).find("option"));
      }
    });
    $(e).parent().parent().find(elems).focus();
  } else {
      $(e).parent().parent().find(elems).each(function(index) {
      if ( $(this).is('select') )
      {
        $(this).prop('disabled',true);
      } else {
        $(this).prop('readonly',true);
      }
      $(this).removeClass('highlight');
    });
  }
} 
```

这在谷歌浏览器中工作得很好，但在 IE 8 中不起作用。基本上我有一个带有单选按钮的表单，其中一个用于新条目。这基本上启用了输入文本字段并删除了选择字段的禁用标志。禁用时，选择选项中只有 1 个值。单选按钮插入隐藏 div 中的所有可用选项，并在新选项中标记所选索引值以匹配初始加载中的单个条目。

在 IE 中，选择选项被完全清除，甚至最初的条目都没有留下。

我无法让它正常工作，并认为这是克隆元素的问题。

我究竟做错了什么？

谢谢克雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:17:17.760

没关系，我最终想通了。我的代码很好，问题是 IE 不喜欢我正在克隆的带有选项的隐藏 DIV 缺少 SELECT 标记。去搞清楚。

所以改变这个： -

```
<div id="affoptions" class="options">
  <option value="0001">0001 | A</option>
  <option value="0002">0002 | B</option>
  <option value="*">* | All</option>
  <option value="0003">0003 | C</option>
  <option value="0004">0004 | D</option>
</div> 
```

对此：-

```
<div id="affoptions" class="options">
 <select>
  <option value="0001">0001 | A</option>
  <option value="0002">0002 | B</option>
  <option value="*">* | All</option>
  <option value="0003">0003 | C</option>
  <option value="0004">0004 | D</option>
 </select>
</div> 
```

解决了。

干杯克雷格

# solr - SOLR中的分面排序

> ID：12639411
> 
> 赞同：1
> 
> 时间：2012-09-28T11:47:09.040
> 
> 标签：solr, lucene

是否可以提及 SOLR 方面的排序顺序。

我正在使用`f.<fieldname>.facet.sort=count`它总是按降序排序（最高计数优先）

例如：

```
<lst name="facet_fields">
<lst name="myfield">
<int name="a">97</int>
<int name="b">44</int>
<int name="c">42</int>
</lst>
</lst> 
```

有没有办法按升序排序。

例如：

```
<lst name="facet_fields">
<lst name="myfield">
<int name="c">42</int>
<int name="b">44</int>
<int name="a">97</int>
</lst>
</lst> 
```

任何信息都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:12:25.570

Jira 中的相同问题存在未解决的问题 ( [SOLR-1672](https://issues.apache.org/jira/browse/SOLR-1672) )。他们添加了一个补丁，也许它会对你有所帮助。

# iphone - 使用 Objective-c 下载文件 Ipad 时出错

> ID：12639415
> 
> 赞同：0
> 
> 时间：2012-09-28T11:47:28.670
> 
> 标签：iphone, ipad

我是 iPhone 开发的新手。我使用以下代码从应用程序中的实时 url 下载 zip。

```
NSURL *URL = [NSURL URLWithString:sourceUrl];
    NSError *error=[[[NSError alloc]init] autorelease];

    NSData* theData = [NSData dataWithContentsOfURL: URL];   // Line One to download
    NSURLResponse *response1 = nil;
    NSURLRequest *theRequest =[[NSURLRequest requestWithURL:URL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60] autorelease];
    NSData* theData1 = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:&response1 error:&error];   // Line two to download

    if(error != nil)
    {
        NSString *errorIdentifier = [NSString stringWithFormat:@"(%@)[%d]",error.domain,error.code];        
    } 
```

文件已正确下载到 Iphone 上，但是当我在 IPad1、Ipad3 和 Iphone3gs 上进行测试时，它只能从 6mb 下载 22kb。

换句话说，下载在 iPad 或 Iphone 3gs 中不起作用。它给出了 CFString 错误。任何人都面临同样的问题和任何解决方案。

# javascript - jQuery Flot - 舍入 x 轴值？

> ID：12639430
> 
> 赞同：1
> 
> 时间：2012-09-28T11:48:09.920
> 
> 标签：javascript, jquery, json, flot

在这里有点挣扎，因为如果我正确理解了文档（尽管我承认可能不是这样！），这应该可以工作。

我正在使用 Coldfusion CFC 来获取数据并以 JSON 格式返回。数据以 2 个数值形式返回，即 6 & 1、3 & 2 等。“x 轴”值是一天，即第 1 天、第 2 天等。

目前，x 轴将其显示为 2.5、5、7.5 等。我需要更改它以便在返回时显示 - 即 1、2、3 等。

这是我现在拥有的 JS，它执行没有错误，但没有按预期显示图表......

```
$(function() {
$.getJSON("/com/stats.cfc?method=getPageViews&returnformat=json", {}, function(data) {
 $.plot($("#chart"), [ data ],
    {
        lines:{show:true},
        points:{show:true},
        tickSize:1, 
        tickDecimals:0
    })

})
}); 
```

非常感谢指点！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:00:03.233

纯粹靠运气，我找到了正确的语法。为了方便任何搜索此内容的人，这里是更新的工作代码；

```
$(function() {
    $.getJSON("/com/stats.cfc?method=getPageViews&returnformat=json", {}, function(data) {
        $.plot($("#chart"), [ data ],
        {
            lines:{show:true},
            points:{show:true},
            xaxis: 
                {
                    tickSize:1, 
                    tickDecimals:0
                }
        })

    })
}); 
```

# ios - 有人可以帮我解决内存泄漏吗？

> ID：12639431
> 
> 赞同：0
> 
> 时间：2012-09-28T11:48:13.547
> 
> 标签：ios, memory-leaks, plist, automatic-ref-counting, nsdictionary

**编辑：我在项目中使用 ARC**

我像这样从 plist 加载注释：

```
[NSThread detachNewThreadSelector:@selector(loadPList) toTarget:self withObject:nil]; 
```

...

```
- (void) loadPList
{

    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *path = [[documentPaths lastObject] stringByAppendingPathComponent:@"test.plist"];

    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path]; // memory leak here

    NSMutableArray *annotations = [[NSMutableArray alloc]init];

    dispatch_async(dispatch_get_main_queue(), ^{

        NSMutableArray * annotationsToRemove = [ mapView.annotations mutableCopy ] ;
        [ annotationsToRemove removeObject:mapView.userLocation ] ;
        [ mapView removeAnnotations:annotationsToRemove ] ;

        if ([[NSUserDefaults standardUserDefaults] boolForKey:@"blackKey"])
        {

            NSArray *ann = [dict objectForKey:@"Black"];

            for(int i = 0; i < [ann count]; i++) {

                NSString *coordinates = [[ann objectAtIndex:i] objectForKey:@"Coordinates"];

                double realLatitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:1] doubleValue];
                double realLongitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:0] doubleValue];

                MyAnnotation *myAnnotation = [[MyAnnotation alloc] init];
                CLLocationCoordinate2D theCoordinate;
                theCoordinate.latitude = realLatitude;
                theCoordinate.longitude = realLongitude;

                myAnnotation.coordinate=CLLocationCoordinate2DMake(realLatitude,realLongitude);        
                myAnnotation.title = [[ann objectAtIndex:i] objectForKey:@"Name"];
                myAnnotation.subtitle = [[ann objectAtIndex:i] objectForKey:@"Address"];
                myAnnotation.icon = [[ann objectAtIndex:0] objectForKey:@"Icon"];

                [mapView addAnnotation:myAnnotation];
                [annotations addObject:myAnnotation];

            }

        }   

    });

} 
```

一切正常，但内存泄漏工具向我显示了泄漏。

![泄漏截图](../Images/40f0e4d7f1d5b2090fd8f94833bad131.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:23:00.490

您需要将 the`@autoreleasepool`放在方法的开头 - 在它`dictionaryWithContentsOfFile:`之外调用该调用，您将创建一个没有池的自动释放对象，因此它会泄漏。[根据线程编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW17)：

> 如果您的应用程序使用托管内存模型，那么创建自动释放池应该是您在线程进入例程中要做的第一件事。同样，销毁这个自动释放池应该是你在线程中做的最后一件事。

另外，我能问一下为什么你使用`NSThread`加载 plist 而不是`dispatch_async()`使用全局队列吗？我不经常看到`dispatch_async()`嵌套在线程分离中，所以只是好奇。

**编辑：**

要修复您的内存泄漏，而不干扰您的线程/GCD 混合，请像这样调用您的方法：

```
[NSThread detachNewThreadSelector:@selector(loadPList) toTarget:self withObject:nil]; 
```

并像这样实现它：

```
- (void) loadPList
{
    @autoreleasepool {
        NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
        NSString *path = [[documentPaths lastObject] stringByAppendingPathComponent:@"test.plist"];

        NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path]; // memory leak here

        NSMutableArray *annotations = [[NSMutableArray alloc]init];

        dispatch_async(dispatch_get_main_queue(), ^{

            NSMutableArray * annotationsToRemove = [ mapView.annotations mutableCopy ] ;
            [ annotationsToRemove removeObject:mapView.userLocation ] ;
            [ mapView removeAnnotations:annotationsToRemove ] ;

            if ([[NSUserDefaults standardUserDefaults] boolForKey:@"blackKey"])
            {
                NSArray *ann = [dict objectForKey:@"Black"];

                for(int i = 0; i < [ann count]; i++) 
                {
                    NSString *coordinates = [[ann objectAtIndex:i] objectForKey:@"Coordinates"];

                    double realLatitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:1] doubleValue];
                    double realLongitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:0] doubleValue];

                    MyAnnotation *myAnnotation = [[MyAnnotation alloc] init];
                    CLLocationCoordinate2D theCoordinate;
                    theCoordinate.latitude = realLatitude;
                    theCoordinate.longitude = realLongitude;

                    myAnnotation.coordinate=CLLocationCoordinate2DMake(realLatitude,realLongitude);        
                    myAnnotation.title = [[ann objectAtIndex:i] objectForKey:@"Name"];
                    myAnnotation.subtitle = [[ann objectAtIndex:i] objectForKey:@"Address"];
                    myAnnotation.icon = [[ann objectAtIndex:0] objectForKey:@"Icon"];

                    [mapView addAnnotation:myAnnotation];
                    [annotations addObject:myAnnotation];
                }
            }   
        }
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:52:15.720

如果不出意外，您需要一个自动释放池。从文档中引用[`detachNewThreadSelector`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html#//apple_ref/doc/uid/20000311-CHDEBGEC)，“该方法`aSelector`负责为新分离的线程设置一个自动释放池，并在它退出之前释放该池。”

就个人而言，我可能只是`loadPlist`通过 GCD 而不是调用`detachNewThreadSelector`，然后您就不必担心自动释放池：

```
dispatch_async(get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [self loadPlist];
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T12:32:31.803

```
NSMutableArray *annotations = [[NSMutableArray alloc]init]; // Never released
NSMutableArray * annotationsToRemove = [ mapView.annotations mutableCopy ] ; // Never released
MyAnnotation *myAnnotation = [[MyAnnotation alloc] init]; // Never released 
```

您的方法应如下所示：

```
- (void) loadPList {
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *path = [[documentPaths lastObject] stringByAppendingPathComponent:@"test.plist"];
    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path]; // memory leak here
    NSMutableArray *annotations = [[[NSMutableArray alloc] init] autorelease];
    dispatch_async(dispatch_get_main_queue(), ^{
        NSMutableArray * annotationsToRemove = [[mapView.annotations mutableCopy] autorelease];
        [annotationsToRemove removeObject:mapView.userLocation] ;
        [mapView removeAnnotations:annotationsToRemove] ;
        if ([[NSUserDefaults standardUserDefaults] boolForKey:@"blackKey"])
        {

            NSArray *ann = [dict objectForKey:@"Black"];

            for(int i = 0; i < [ann count]; i++) {

                NSString *coordinates = [[ann objectAtIndex:i] objectForKey:@"Coordinates"];

                double realLatitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:1] doubleValue];
                double realLongitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:0] doubleValue];

                MyAnnotation *myAnnotation = [[[MyAnnotation alloc] init] autorelease];
                CLLocationCoordinate2D theCoordinate;
                theCoordinate.latitude = realLatitude;
                theCoordinate.longitude = realLongitude;

                myAnnotation.coordinate=CLLocationCoordinate2DMake(realLatitude,realLongitude);
                myAnnotation.title = [[ann objectAtIndex:i] objectForKey:@"Name"];
                myAnnotation.subtitle = [[ann objectAtIndex:i] objectForKey:@"Address"];
                myAnnotation.icon = [[ann objectAtIndex:0] objectForKey:@"Icon"];

                [mapView addAnnotation:myAnnotation];
                [annotations addObject:myAnnotation];

            }
        }   
    });
} 
```

# c# - 为什么这个操作PE文件头的代码使用了这么奇怪的偏移值？

> ID：12639433
> 
> 赞同：1
> 
> 时间：2012-09-28T11:48:16.723
> 
> 标签：c#, c++, .net, visual-c++

[下面是一段获取 .NET 程序集构建时间的代码](https://stackoverflow.com/a/1600990)。笔记：

```
const int c_LinkerTimestampOffset = 8; 
```

然后：

```
int secondsSince1970 = System.BitConverter.ToInt32(b, i + c_LinkerTimestampOffset); 
```

此代码提取存储在程序集中的[IMAGE_FILE_HEADER 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680313%28v=vs.85%29.aspx)`TimeDateStamp`的成员。结构定义如下：

```
typedef struct _IMAGE_FILE_HEADER {
    WORD  Machine;
    WORD  NumberOfSections;
    DWORD TimeDateStamp;
    DWORD PointerToSymbolTable;
    DWORD NumberOfSymbols;
    WORD  SizeOfOptionalHeader;
    WORD  Characteristics;
} IMAGE_FILE_HEADER, *PIMAGE_FILE_HEADER; 
```

and`WORD`是两个字节，应该是两个字节对齐的。当我使用 Visual C++ 10 编译以下代码时：

```
IMAGE_FILE_HEADER header;
char* start = (char*)&header;
char* field = (char*)(&header.TimeDateStamp);
int diff = field - start; 
```

`diff`等于`4`我个人的预期。

这是 C# 代码中的错误吗？为什么`8`使用偏移值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:29:22.390

它用于跳过附加签名，因为`i`它包含 NT 标头的偏移量，而不是文件图像标头（请参阅[正式的 PE 结构](http://msdn.microsoft.com/en-us/magazine/cc301805.aspx)）：

```
typedef struct _IMAGE_NT_HEADERS {
    DWORD Signature; //<- we need to skip this
    IMAGE_FILE_HEADER FileHeader;
    IMAGE_OPTIONAL_HEADER32 OptionalHeader;
} IMAGE_NT_HEADERS32, *PIMAGE_NT_HEADERS32; 
```

所以实际总和是`sizeof(WORD /* FileHeader.Machine */) + sizeof(WORD /* FileHeader.NumberOfSections */) + sizeof(DWORD /* Signature */)`

底线，不是错误，只是跳过一些结构嵌套/内联的一些魔法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:10:04.543

> DWORD 是一个 int 无符号值，4 个字节。

C# 代码不正确，它读取 8 个字节。我觉得应该是4。

```
int secondsSince1970 = System.BitConverter.ToInt32(b, i + c_LinkerTimestampOffset); 
```

几天前我写了一个PE阅读器。我将其用于“图像文件头”：

```
public class IMAGE_FILE_HEADER 
{
     public UInt16 Machine;
     public UInt16 NumberOfSections;
     public UInt32 TimeDateStamp;
     public UInt32 PointerToSymbolTable;
     public UInt32 NumberOfSymbols;
     public UInt16 SizeOfOptionalHeader;
     public UInt16 Characteristics;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T12:49:36.570

您很可能会得到 8 字节的差异，因为您使用的是 64 位系统/目标平台，如果您使用的是 32 位，那将是您所期望的。

在 32 位系统上，DWORD 定义为 uint（32 位/4 字节），而在 64 位系统上，它定义为 ulong（64 位/8 字节）。

一个字本质上代表架构的地址大小。当它被创造出来时，一个 WORD 是 16 位，而一个 DWORD 是一个双字，32 位（4 个字节）。

有人会期望 DWORD 在 x86 系统上为 64 位/8 字节，但 MS 希望保留旧版支持，因此保留了旧定义：http: [//msdn.microsoft.com/en-us/library/aa383751 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa383751(VS.85).aspx)

# wpf - WinRT 中的 UI 事件顺序与 WinForms、SL 和 WPF 相比

> ID：12639440
> 
> 赞同：1
> 
> 时间：2012-09-28T11:48:45.223
> 
> 标签：wpf, silverlight, winrt-xaml

我相信我在某处读到过，在 WinRT 中触发 UI 事件的顺序是任意的。我也相信我读到它不同于 Silverlight 和/或 WPF，当然还有 WinForms。它的不同之处在于在 WinForms 中您可以确定地知道，例如，按钮的 Click 事件在 GotFocus 之后触发等等（示例可能不正确）。在 WinRT 中你不能。我自己做了一些粗略的测试，似乎是正确的。有时事件 X 先触发，有时事件 Y。

任何人都可以为我确认这些假设，特别是关于我不太精通的 Silverlight 和 WPF 吗？最好带有微软官方文章的链接。

我相信这是一个需要掌握的重要概念，因为它会影响您在事件处理程序中可以做什么和不可以做什么——尤其是在与数据绑定属性同步方面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:39:00.560

WinRT 是对运营模型的完全重新定义。不过，不要让这些话吓到你。这意味着曾经有同步动作的地方，它们已经变成了异步动作。

但是，这意味着您正确地假设一个事件可能在另一个事件之前触发。使用预构建的 WinRT 控件，无法同步异步，但使用自定义代码，您可以实现调用和响应模式。

我在博客中介绍了事件聚合器，它允许从应用程序的任何位置发布和订阅事件：

[http://developingzack.blogspot.com/2012/09/what-why-and-how-event-aggregator.html](http://developingzack.blogspot.com/2012/09/what-why-and-how-event-aggregator.html)

通过创建一组事件，原始事件订阅者发布第二个事件，第二个事件订阅发布第三个事件......到第 N 层。

这也是一种创建同步方法的错觉（和操作顺序）的解耦方式。

每个响应时间可能超过 50 毫秒的方法都被重写为异步。

这是 MSDN 博客中对异步的相当详细的解释：http: [//blogs.msdn.com/b/windowsappdev/archive/2012/06/14/exposing-net-tasks-as-winrt-asynchronous-operations.aspx](http://blogs.msdn.com/b/windowsappdev/archive/2012/06/14/exposing-net-tasks-as-winrt-asynchronous-operations.aspx)

# objective-c - 子模块中的 Xcode 调试器

> ID：12639441
> 
> 赞同：2
> 
> 时间：2012-09-28T11:48:51.363
> 
> 标签：objective-c, ios, xcode, debugging

在 iOS 应用程序上工作我正在使用作为子模块集成的静态库。没问题，但是当我想在调试调试器时单步执行此子模块的方法时，只需跳过该方法调用即可。

我想这与构建设置有关，但我不知道。

谢谢你的帮助！

科贝尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:25:46.167

除非您有源代码，否则您无法进入库代码。这是库的目的，如果您自己制作库，您可能希望阻止其他人查看其构建方式。如果要检查库函数的正确性，有两种方法：

1.  获取源代码——在大多数情况下这是不可能的，除非你从作者那里得到它
2.  做单元测试。检查库函数的参数是否给出正确的结果。

如果您确实拥有该库的源代码，则必须将其构建设置为调试模式，以便您可以为 Xcode 提供符号以通过库的方法。

# asp.net - CMS 如何处理集成 Web 应用程序的回发？

> ID：12639442
> 
> 赞同：0
> 
> 时间：2012-09-28T11:48:50.600
> 
> 标签：asp.net, sharepoint, content-management-system, opentext

目前，我正在开展一个将遗留应用程序 (ASP.NET) 与内容管理系统集成的项目。有两台 Web 服务器，一台充当面向公众的 cms 服务器，另一台充当防火墙后面的遗留应用程序网站。CMS 驱动节目呈现页眉、页脚、左右信息盘和菜单。

我的要求是在 cms 的内容区域内显示遗留应用程序 aspx 页面。一切正常，除了回发。表单提交到 cms 网站，而我希望它回发到旧应用程序。

CMS 或 SharePoint 如何实现这一点？例如，如果一个 webpart 有一个提交按钮，它可以回发，SharePoint 如何将表单提交到 webpart？这背后的架构是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:52:57.090

我不确定你在问什么。您说的是托管在某种 iframe 中的遗留应用程序并且无法回发？嗯，当然？！

在 SharePoint 中，当您构建 WebPart 时，您可以使用任何服务器端方法，它会自动回发 - 只是那里的常规 ASP.NET，没什么特别的。`_doPostBack()`有时通过使用 Javascript 方法的 Javascript 调用 PostBack 。

# javascript - 在同一输入字段中搜索项目和位置

> ID：12639449
> 
> 赞同：1
> 
> 时间：2012-09-28T11:49:12.423
> 
> 标签：javascript, google-maps-api-3

我面临一个问题。我在互联网上搜索了一个解决方案，但没有找到任何解决方案。

这是我的问题：我有一些项目存储在具有位置（纬度和经度）的数据库表中。例如，巴黎的飞机、纽约的自行车、巴黎的另一辆自行车、东京的洗碗机等……我想在某个地方附近找到所有类型的物品。

为此，我做了 2 个输入字段：一个称为“What”，另一个称为“Where”（这个具有谷歌地图的自动完成功能）。如果您在第一个字段中输入“Bike”，在第二个字段中输入“Paris”，则可以完美运行！（我使用地理编码获取“Where”字段的坐标，然后使用 SQL 查询过滤对象类型）

但我的目标是在一个输入字段中实现这一目标！一个全局字段，用户可以在其中输入“Bike Paris”或“Paris Bike”并获取数据库中所有靠近巴黎的自行车的结果。就像谷歌地图中的情况一样：如果您输入“手机芝加哥”：它将解释“芝加哥附近的手机”并获得您的结果。困难在于解释哪个词是放置的，哪个不是。

您知道如何实现这一目标吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:18:03.390

这需要一些工作。一种方法是使用某些机器学习分类算法的某些方法。他们基本上所做的是，他们使用某种包含观察的数据集进行训练，以将对象分类为某些类别。因此，当他们获得一个新对象时，他们可以相应地对其进行分类。

[你可以在这里](http://en.wikipedia.org/wiki/Statistical_classification)和[这里](http://en.wikipedia.org/wiki/Data_mining)阅读更多关于它们的信息

如果您无法管理这种复杂性，您可以做的一件简单的事情是搜索用户在最小数据集中（即事物或地点）中输入的词，如果其中一个词比另一个词大，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T14:21:51.367

这条**SQL**语句

```
SELECT *  FROM `mixedsearch` WHERE `place` IN ('London','Bike') AND `type` IN ('London','Bike') 
```

选择

```
London | Bike 
```

从这张表

```
place | type
Paris | Bike
Paris | Plane
Paris | Car
London | Bike
London | Car
London | Plane
Tokyo | Dishwasher
Tokyo | Bike 
```

[SQLFiddle](http://sqlfiddle.com/#!2/f708e/3)

如何将输入字段转换为 SELECT 语句取决于您的应用程序

# scala - 使 ScalaCheck 测试具有确定性

> ID：12639454
> 
> 赞同：16
> 
> 时间：2012-09-28T11:49:28.577
> 
> 标签：scala, specs2, scalacheck

我想暂时使我的 specs2 测试套件中的 ScalaCheck 属性测试具有确定性，以简化调试。现在，每次我重新运行测试套件时都可能生成不同的值，这让调试变得令人沮丧，因为您不知道观察到的行为的变化是由您的代码更改引起的，还是仅仅由生成的不同数据引起的。

我怎样才能做到这一点？有没有官方的方法来设置 ScalaCheck 使用的随机种子？

我`sbt`用来运行测试套件。

**奖励问题：**是否有官方方法可以*打印出*ScalaCheck 使用的随机种子，以便您甚至可以重现非确定性测试运行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T14:38:04.630

如果您使用的是纯 ScalaCheck 属性，您应该能够使用`Test.Params`该类来更改所使用的 `java.util.Random`实例并提供您自己的实例，该实例始终返回相同的一组值：

`def check(params: Test.Parameters, p: Prop): Test.Result`

[更新]

我刚刚发布了一个新的 specs2-1.12.2-SNAPSHOT，您可以在其中使用以下语法来指定您的随机生成器：

```
case class MyRandomGenerator() extends java.util.Random {
  // implement a deterministic generator 
}

"this is a specific property" ! prop { (a: Int, b: Int) =>
  (a + b) must_== (b + a)
}.set(MyRandomGenerator(), minTestsOk -> 200, workers -> 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-04T17:56:29.053

作为一般规则，在对非确定性输入进行测试时，您应该尝试在出现故障时在某处回显或保存这些输入。

如果数据很小，您可以将其包含在向用户显示的标签或错误消息中；例如，在 xUnit 风格的测试中：（因为我是 Scala 语法的新手）

```
testLength(String x) {
    assert(x.length > 10, "Length OK for '" + x + "'");
} 
```

如果数据很大，例如自动生成的数据库，您可以将其存储在非易失性位置（​​例如带有时间戳名称的 /tmp）或显示用于生成它的种子。

下一步很重要：获取该值或种子或其他任何内容，并将其添加到您的确定性回归测试中，以便从现在开始每次都对其进行检查。

你说你想让 ScalaCheck 确定性“暂时”重现这个问题；我说你发现了一个非常适合成为单元测试的错误边缘案例（也许在一些手动简化之后）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-16T13:21:56.400

> **奖励问题**：是否有官方方法可以打印出 ScalaCheck 使用的随机种子，以便您甚至可以重现非确定性测试运行？

从`specs2-scalacheck`版本开始`4.6.0`，这现在是默认行为：

给定测试文件`HelloSpec`：

```
package example

import org.specs2.mutable.Specification
import org.specs2.ScalaCheck

class HelloSpec extends Specification  with ScalaCheck {
package example

import org.specs2.mutable.Specification
import org.specs2.ScalaCheck

class HelloSpec extends Specification  with ScalaCheck {
  s2"""
    a simple property       $ex1
  """

  def ex1 = prop((s: String) => s.reverse.reverse must_== "")
} 
```

`build.sbt`配置：

```
import Dependencies._

ThisBuild / scalaVersion     := "2.13.0"
ThisBuild / version          := "0.1.0-SNAPSHOT"
ThisBuild / organization     := "com.example"
ThisBuild / organizationName := "example"

lazy val root = (project in file("."))
  .settings(
    name := "specs2-scalacheck",
    libraryDependencies ++= Seq(
      specs2Core,
      specs2MatcherExtra,
      specs2Scalacheck
    ).map(_ % "test")
  ) 
```

`project/Dependencies`：

```
import sbt._

object Dependencies {
  lazy val specs2Core                       = "org.specs2"             %% "specs2-core"               % "4.6.0"
  lazy val specs2MatcherExtra               = "org.specs2"             %% "specs2-matcher-extra"      % specs2Core.revision
  lazy val specs2Scalacheck                 = "org.specs2"             %% "specs2-scalacheck"         % specs2Core.revision

} 
```

从`sbt`控制台运行测试时：

```
sbt:specs2-scalacheck> testOnly example.HelloSpec 
```

您会得到以下输出：

```
[info] HelloSpec
[error]     x a simple property
[error]  Falsified after 2 passed tests.
[error]  > ARG_0: "\u0000"
[error]  > ARG_0_ORIGINAL: "猹"
[error]  The seed is X5CS2sVlnffezQs-bN84NFokhAfmWS4kAg8_gJ6VFIP=
[error]  
[error]  > '' != '' (HelloSpec.scala:11)
[info] Total for specification HelloSpec 
```

要重现该特定运行（即使用相同的种子），您可以`seed`从输出中获取并使用命令行传递它`scalacheck.seed`：

```
sbt:specs2-scalacheck>testOnly example.HelloSpec -- scalacheck.seed X5CS2sVlnffezQs-bN84NFokhAfmWS4kAg8_gJ6VFIP= 
```

这会产生与以前相同的输出。

您还可以使用以下方式以编程方式设置种子`setSeed`：

```
def ex1 = prop((s: String) => s.reverse.reverse must_== "").setSeed("X5CS2sVlnffezQs-bN84NFokhAfmWS4kAg8_gJ6VFIP=") 
```

提供的另一种方法是在设置的地方`Seed`传递一个隐式：`Parameters``seed`

```
package example

import org.specs2.mutable.Specification
import org.specs2.ScalaCheck
import org.scalacheck.rng.Seed
import org.specs2.scalacheck.Parameters

class HelloSpec extends Specification  with ScalaCheck {

  s2"""
    a simple property       $ex1
  """

  implicit val params = Parameters(minTestsOk = 1000, seed = Seed.fromBase64("X5CS2sVlnffezQs-bN84NFokhAfmWS4kAg8_gJ6VFIP=").toOption)

  def ex1 = prop((s: String) => s.reverse.reverse must_== "")
} 
```

[这](https://etorreborre.github.io/specs2/guide/SPECS2-4.6.0/org.specs2.guide.UseScalaCheck.html)是有关所有这些不同方式的文档。这个[博客](https://typelevel.org/blog/2018/07/12/testing-in-the-wild.html)也谈到了这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-25T08:09:14.730

对于`scalacheck-1.12`此配置有效：

```
new Test.Parameters {
  override val rng = new scala.util.Random(seed)
} 
```

因为`scalacheck-1.13`它不再起作用，因为 rng 方法已被删除。有什么想法吗？

# java - 带有本地分页的 GWT/GXT 网格？

> ID：12639457
> 
> 赞同：1
> 
> 时间：2012-09-28T11:49:45.527
> 
> 标签：java, gwt, extjs, gxt

我正在使用带有本地分页的 GXT 网格（[http://www.sencha.com/examples-2/#localpaging](http://www.sencha.com/examples-2/#localpaging)）。我可以从数据库中获取 2000 条记录，所有记录都将在内存中，并且只向用户显示第一页记录，然后从内存中提取下一组结果并显示。

我的问题是，我保存所有 2000 条记录的内存是指客户端计算机的内存还是应用程序服务器的内存？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:17:00.050

它是客户端机器的内存。如果您查看示例，所有要显示到网格中的记录都加载到 PagingModelMemoryProxy 实例中

```
PagingModelMemoryProxy proxy = new PagingModelMemoryProxy(TestData.getStocks()); 
```

# php - 具有参数和依赖项的类设计

> ID：12639462
> 
> 赞同：0
> 
> 时间：2012-09-28T11:50:03.027
> 
> 标签：php, dependency-injection, class-design, factory

我在 Zend Framework 1 之后设计了我的数据库和缓存层，如下所示：

```
class Cache
{
    public static function create($adapter, array $params)
    {
        $class_name = 'Cache_Adapter_' . $adapter;

        return new $class_name($params);   
    }
}

abstract class Cache_Adapter
{
    public function __construct(array $params)
    {

    }
}

class Cache_Adapter_File extends Cache_Adapter
{
    // ...
} 
```

使用示例：

```
// config.php
return array(
    'cache' => array(
        'adapter' => 'file',
        'params' => array(
            'path' => '/path',
        ),
    ),
);

// bootstrap.php
$dic->cache = Cache::create($config['cache']['adapter'], $config['cache']['params']); 
```

这种方法很棒，因为每个缓存适配器可以有不同的参数，例如，文件缓存需要存储缓存文件的目录的路径。

然后我想创建用于在数据库中存储数据的缓存适配器，并意识到需要数据库抽象类依赖而不是标量参数数组。

目前数据库连接注册在依赖注入容器中：

```
// config.php
return array(
    'db1' => array(
        'adapter' => 'mysql',
        'params' => array(
            'user' => 'root',
            'connect_timeout' => 5,
        ),
    ),
    'db2' => array(
        'adapter' => 'sqlsrv',
        'params' => array(
            'db' => 'foo',
        ),
    ),
);

// bootstrap.php
$dic->db1 = Site:Db::create($config['db1']['adapter'], $config['db1']['params']);
$dic->db2 = Site:Db::create($config['db2']['adapter'], $config['db2']['params']); 
```

所以我想问一下，除了标量配置参数数组之外，如何将零个或多个特定依赖项传递给缓存适配器，这可以在 config.php 中完成。

```
class Cache_Adapter_Db extends Cache_Adapter
{
    // Instead of abstract Cache_Adapter::__construct(array $params)
    // something like this is needed:
    // public function __construct(array $params, Db_Adapter $db)
    public function __construct(array $params)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:04:44.160

涉及两个步骤：首先，您的缓存适配器应该以正确的方式调用其父类：

```
class Cache_Adapter_Db extends Cache_Adapter
{
    public function __construct(array $params, Db_Adapter $db)
    {
       parent::__construct($params);
    }
} 
```

第二：你的工厂类`Cache`应该接受更多的参数：

```
class Cache
{
    public static function create($adapter, array $params, $optparams = null )
    {
        $class_name = 'Cache_Adapter_' . $adapter;

        return new $class_name($params, $optparams);   
    }
} 
```

配置 php 看起来像这样：

```
// config.php
return array(
    'db1' => array(
        'adapter' => 'mysql',
        'params' => array(
            'user' => 'root',
            'connect_timeout' => 5,
        ),
    ),
    'db2' => array(
        'adapter' => 'sqlsrv',
        'params' => array(
            'db' => 'foo',
        ),
        'options' => 'extraoption'
    ),
); 
```

在 bootstrap.php 中：

```
$dic->db2 = Site:Db::create(
   $config['db2']['adapter'], 
   $config['db2']['params'],
   $config['db2']['options']
); 
```

# asp.net-mvc - 从 Asp.Net Mvc4 项目到另一个 Asp.Net Webapi 项目的身份验证，由 SQL Server CE 4 支持

> ID：12639465
> 
> 赞同：4
> 
> 时间：2012-09-28T11:50:21.457
> 
> 标签：asp.net-mvc, asp.net-membership, forms-authentication, asp.net-web-api, sql-server-ce-4

我一直在寻找我的问题的答案一段时间，但找不到我要找的东西，所以我希望有人能帮助我:)

**设想：**

3个项目：

*   Asp.net Web Api 项目（SQL Server CE 4 数据库 + Asp.Net Membership）
*   Windows Phone 7.5 应用程序（使用 REST 对 SQL Server CE 数据库进行身份验证）
*   Asp.net MVC 4 项目（希望与同一个 SQL Server CE 数据库进行通信，也使用 REST）

WP7 应用程序的身份验证已经开始工作。但是我在试图弄清楚如何让我的 MVC 应用程序使用相同的 SQL Server CE 数据库进行身份验证时遇到了问题。

我可能能够创建自己的控件并使用我在 WP7 应用程序中使用的相同逻辑来进行身份验证，但我想保留该`[Authorize]`属性提供的现有功能。

所以我的问题是：

如何让我的 MVC 项目通过 Web Api 项目进行身份验证，并且仍然保持当用户尝试访问需要身份验证的页面时，他将被重定向到登录页面等功能

我希望我的问题足够清楚！如果没有，请不要犹豫，问一些其他问题！

亲切的问候，

格特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:22:01.690

好的，经过一些休息和一些逻辑思考，我才意识到我必须在MVC项目中更改AccountController中的Login方法。

我无法提供任何代码，因为我不在我的开发电脑上，但它只是您可以在其他任何地方使用的任何身份验证代码。例如使用 REST 身份验证或通过 WCF 服务进行身份验证。

亲切的问候，

格特

# asp.net - 在 ftp ASP.Net 上托管时日历不起作用

> ID：12639467
> 
> 赞同：1
> 
> 时间：2012-09-28T11:50:28.513
> 
> 标签：asp.net

当我尝试在本地主机上打开 asp.net 日历时，它工作正常，但是当我在发布项目后将其托管在 ftp 上时，日历遇到错误，因为“字符串未被识别为有效的日期时间”。我们该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:14:01.850

我可能与您的全球化设置有关，请尝试在 web.config 中覆盖您的系统设置，以确保在两台机器上您具有相同的设置。例如：

```
<configuration>
   <system.web>
       <globalization uiCulture="es" culture="es-MX" />
    </system.web>
</configuration> 
```

在下面的页面上，您可以找到更多信息：

[如何：设置 ASP.NET 网页全球化的文化和 UI 文化](http://msdn.microsoft.com/en-us/library/bz9tc508%28v=vs.100%29.aspx)

# javascript - Jquery幻灯片切换问题

> ID：12639468
> 
> 赞同：2
> 
> 时间：2012-09-28T11:50:30.980
> 
> 标签：javascript, jquery, toggle, slide

我正在尝试触发我的幻灯片切换，但没有按预期工作。每次点击仅适用于第一个 div。

HTML 代码：

```
<div id="toggle">
    <span id="down"></span>
    <a id ="slide" href="#">Passende Produkte zum Gutschein</br></a>
    <div id="inner">text tetxtext</div>

    <span id="down"></span>
    <a id ="slide" href="#">Passende Produkte zum Gutschein</a>
    <div id="inner">text tetxtext</div>
</div> 
```

JS代码：

```
$('a').click(function() {
    $('#inner').slideToggle('fast');    
}); 
```

CSS：

```
#inner {
    display:none;
} 
```

我的结果位于[此处](http://jsfiddle.net/lgtsfiddler/fRfsa/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:52:50.787

ID 必须是唯一的，您应该改用类，而且您还没有在 jsfiddle 中加载 jQuery。

```
<div id="toggle">
    <span class="down"></span>
    <a class="slide" href="#">Passende Produkte zum Gutschein</br></a>
    <div class="inner">text tetxtext</div>

    <span class="down"></span>
    <a class="slide" href="#">Passende Produkte zum Gutschein</a>
    <div class="inner">text tetxtext</div>
</div> 
```

根据您的标记，您可以使用`next`或`siblings`方法。

```
$('a').click(function(event){
   $(this).next('.inner').slideToggle('fast');
   // $(this).siblings('.inner').slideToggle('fast'); 
   event.preventDefault() // prevents the default action of event.       
}); 
```

[http://jsfiddle.net/Wh5u2/](http://jsfiddle.net/Wh5u2/)

# java - Java - 使用整数和字节进行位移

> ID：12639471
> 
> 赞同：1
> 
> 时间：2012-09-28T11:50:52.273
> 
> 标签：java, int, byte, bit-shift

考虑以下代码（其中 byteIndex 是一个 int）：

```
int bitNumber = b-(8*byteIndex);
bitMask = 0x8>>(byte)bitNumber; 
```

这会产生错误

```
error: possible loss of precision 
```

编译时（必需字节，找到 int）。

编码

```
int bitNumber = b-(8*byteIndex);
bitMask = 0x8>>2; 
```

编译得很好。

这里有什么问题，如何修复第一个示例以允许按 int 值进行位移？

编辑：在评论之后，这是一个更完整的示例：

```
48) int byteIndex;
49) byte bitMask;
50) int bitNumber;
    // assign value to byteIndex
67) bitNumber = b-(8*byteIndex);
68) bitMask = 0x8>>bitNumber; 
```

给出的错误是：

```
...MyClass.java:68: error: possible loss of precision
    bitMask = 0x8>>bitNumber;
             ^
  required: byte
  found:    int
1 error 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T12:03:29.530

将您的`shifting`行转换为： -

```
byte bitMask = (byte)(0x8>>(byte)bitNumber); 
```

您的 RHS 是一个 int，您需要将其类型转换为字节 ..

上面的代码可以正常工作.. 有或`casting`没有`bitNumber`to`byte`

因此，您还可以拥有：-

```
byte bitMask = (byte)(0x8>>bitNumber); 
```

但是，这是一个问题 -`byte bitMask = 0x8>>3;`工作正常.. 为什么会这样？

**这是一些示例来解释其工作背后的原因以及以下行为`final`：-**

```
byte bitMask;
int varInt1 = 3;
final int finalVarInt2 = 3;
final int finalVarInt3 = 4;

bitMask = 0x8>>varInt1;    // 1\. Will not work. 
bitMask = 0x8<<3;          // 2\. Will work

bitMask = 0x8<<4;          // 3\. Will not work
bitMask = 0x8<<finalVarInt2;   // 1\. Will work
bitMask = 0x8<<finalVarInt3;   // 2\. Will not work 
```

**以下是解释上述行为的一些推理： -**

*   `typecasted`只有当编译器确定它能够在 LHS 上的变量中容纳该值时，RHS 上的值才会是隐式的`byte`。否则，我们必须`Explicit type casting`告诉编译器，我们知道我们在做什么，只为我们做..

*现在让我们一一考虑所有情况（从上面的代码（1-3、1-2）：-*

1.  **`varInt1`**最初包含**3**。所以**RHS**的值计算为**64**。虽然这个值可能会适应**LHS****中****`byte`**的变量，但编译器也知道，可以改变 .. 的值。那么如果在某个阶段将 ..为什么不允许..****`varInt1`****`varInt1`****
*****   现在，在这种情况下，由于我们在**`Integer Literal`**这里明确使用了 an，所以编译器确信它会适应**`byte`**.. 所以它允许**`implicit`**强制转换 ..*   同样，在这种情况下，已知**`RHS`**将评估**`128`**哪个不能容纳在**`byte`**..*再次失败*..****

 ******最后两种情况**与常规变量不同...由于它们已声明**`final`**，因此无法重新初始化..因此，编译器可以根据分配的值做出决定..

1.  在这种情况下，编译器会看到，**`finalVarInt2`**包含值**3**。因此，**RHS**的计算结果为**64**，可以容纳在**LHS****`byte`**上的变量中。现在，由于变量是不能更改的，并且知道这一点，因此可以确定 t**他的值将始终为**.. 所以编译器允许这样做。****`final`**`Compiler`*`64`***

***   在最后一种情况下，值为**`finalVarInt3`**4.. 类似的推理.. 不适合**LHS**，因为**RHS**评估为**128**不适合**`byte`**** 

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:57:21.203

在您的第一个示例中，bitnumber 是一个 int（32 位），当您将其转换为一个字节（8 位）时，您将丢失高位 24 位。因此，您正在失去精度。只需关闭演员表（字节）即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:23:37.673

事实上这不是答案，正确的答案是 Rohit Jain 写的，但这是我第一次看到 JVM 的这种行为，比较这些代码：

`bitNumber`标记为**最终**版本的版本

 **```
final int bitNumber = 10;
final byte bitMask = 0x8 >> bitNumber; 
```

`bitNumber`不是最终版本

```
int bitNumber = 10;
bitNumber = 10;
final byte bitMask = 0x8 >> bitNumber; 
```

第二个例子有错误，可能是一些优化。如果有人知道原因会很棒;-)********

# node.js - passport.js - 使用本地护照验证来自 MongoDB 的用户

> ID：12639476
> 
> 赞同：2
> 
> 时间：2012-09-28T11:51:03.520
> 
> 标签：node.js, mongodb, passport.js

我的 MongoDB 中有一个简单的用户集合。我使用 mongo-native 驱动程序。

```
{
    "email": "johndow@example.com",
    "password": "123456",
    "_id": {
        "$oid": "50658c835b821298d3000001"
    }
} 
```

当我通过pair email:pass 进行用户身份验证时，我将默认的passport-local 函数findByUsername 重写为：

```
function findByEmail(email, fn) {
    db.collection("users", function(err, collection) {
        collection.find({}, {}, function(err, users) {
            users.each(function(err, user) {
                if (user.email === email) {
                    return fn(null, user);
                }
            });
            return fn(null, null);
        });
    });
} 
```

只需从数据库中获取所有用户，并检查 - 如果 user.email == 提供了电子邮件，则返回用户对象。

我使用 MongoDB 的 _id 参数作为用户的 id，这就是我修改这两个函数的原因：

```
passport.serializeUser(function(user, done) {
    done(null, user._id);
});

passport.deserializeUser(function(id, done) {
    findById(id, function(err, user) {
        done(err, user);
    });
}); 
```

这是我的护照本地策略代码：

```
passport.use(new LocalStrategy( function(email, password, done) {
    process.nextTick(function() {
        console.log('initialize findByEmail() for "',email,'"');
        findByEmail(email, function(err, user) {
            if (err) {
                return done(err);
            }
            if (!user) {
                console.log('Unknown user ' + email)
                return done(null, false, {
                    message: 'Unknown user ' + email

                });
            }
            if (user.password != password) {
                console.log('Invalid password')
                return done(null, false, {
                    message: 'Invalid password'
                });
            }
            //сonsole.log('ALL VERIFIATION PASSED');
            return done(null, user);
        })
    });
})); 
```

我从登录页面发布数据：

```
app.post('/login', passport.authenticate('local', {
    failureRedirect: '/',
    failureFlash: true
}), function(req, res) {
    res.redirect('/desk');
}); 
```

我得到

```
Error: Can't set headers after they are sent. 
```

在此之后我得到

```
TypeError: Cannot read property 'email' of null 
```

最后一个错误真的很奇怪，因为 findByEmail 有 console.log(user) 行（从这个列表中删除）并且它列出了所有用户的数据。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:34:53.663

它没有很好的文档记录，但为其回调的第二个参数`cursor.each`提供了一个`null`值，以指示游标没有更多可用的文档。仅在[文档](http://mongodb.github.com/node-mongodb-native/api-generated/cursor.html#each)示例中提及。

因此，在您的情况下，您应该`user !== null`在`users.each`回调中进行检查。

但是，让 mongo 通过将`find`调用更改为：

```
collection.findOne({email: email}, {}, function(err, user) {
    if (user) {
        // email was found case
        ...
    }
    ...
} 
```

# xpages - 通过关键属性（而不是 UNID）初始化文档数据源

> ID：12639477
> 
> 赞同：0
> 
> 时间：2012-09-28T11:51:04.200
> 
> 标签：xpages

我们有一些文件包含一些参考文件的“关键”。我们不使用UNID是有原因的。我想通过这个键值来初始化数据源。所以在 Document ID 属性中我编写脚本来打开视图，查找指定的文档并使用查找的 UNID 来初始化数据源。我认为这不是最佳解决方案。

问题：有没有更好的方法来根据键值初始化文档数据源？

示例代码：

```
@DbLookup("", "view", "key", 1, '[RETURNDOCUMENTUNIQUEID]'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T22:19:00.527

在视图中通过键查找文档的 UNID 可能确实是最好的方法。但是，您可以通过编写托管 bean 作为缓存来加快重复调用的速度。例如，如果您编写了一个实现 java.util.Map 的 Java 类，将大部分方法存根，并实现一个将键作为参数的 .get(...) 方法，您可以像 (假设您将 bean 称为“DocKeyManager”）：

<xp:dominoDocument ... documentId="${DocKeyManager[someKey]}"/>

这样，您可以缓存来自 .get(...) 调用的值，而不必每次都访问数据库，并且还可以让您稍后更改查找算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:28:38.360

您应该查看有关将字符串转换为 MD2 的 Tims 文章。这样，我认为您可以将字符串 id 转换为 unid 并使用 getDocumentByUnid 访问它们

[http://xmage.gbs.com/blog.nsf/SearchResults?OpenNavigator&Query=md2](http://xmage.gbs.com/blog.nsf/SearchResults?OpenNavigator&Query=md2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T07:50:42.710

我们经常这样做，但只记得做一次查找（在页面加载时通过 $ 标签）而不是动态（# 标签）。

如果你这样做是动态的，它最终会进行多次查找。. .

Jesse Gallagher 提出的缓存查找结果的建议也是一个好主意。

# php - 在 MySQL 中查看 6 个表的数据

> ID：12639484
> 
> 赞同：1
> 
> 时间：2012-09-28T11:51:38.060
> 
> 标签：php, html, mysql, css, web

我正在尝试制作一个“锦标赛”应用程序，并且卡在查看来自 6 个不同表的数据！

我有6个表可以同时放入数据，但是不能一起查看！并试图在互联网上搜索几个小时，但我就是无法得到它......

反正。这是一场 4 队锦标赛，有赢、平、输和积分。为此，我有 6 张桌子：

*   比赛名称 - ID、名称
*   团队 - ID、团队 1、团队 2、团队 3、团队 4
*   获胜 - ID、team1w、team2w、team3w、team4w
*   绘制 ID、team1d、team2d、team3d、team4d
*   松动 - ID、team1l、team2l、team3l、team4l
*   积分 - ID、team1p、team2p、team3p、team4p

这就是表格中的内容...

这是我的输入，它工作正常..

```
<?php
                if(isset($_POST['submit'])) {
                    $cupname = $_POST['cupname'];
                    $team1 = $_POST['team1'];
                    $team2 = $_POST['team2'];
                    $team3 = $_POST['team3'];
                    $team4 = $_POST['team4'];

                    $zero = "0";

                    $result = mysql_query("INSERT INTO cupname (name) VALUES ('$cupname')");
                    $result = mysql_query("INSERT INTO teams (team1, team2, team3, team4) VALUES ('$team1', '$team2', '$team3', '$team4')");
                    $result = mysql_query("INSERT INTO wins (team1w, team2w, team3w, team4w) VALUES ($zero, $zero, $zero, $zero)");
                    $result = mysql_query("INSERT INTO draws (team1d, team2d, team3d, team4d) VALUES ($zero, $zero, $zero, $zero)");
                    $result = mysql_query("INSERT INTO looses (team1l, team2l, team3l, team4l) VALUES ($zero, $zero, $zero, $zero)");
                    $result = mysql_query("INSERT INTO points (team1p, team2p, team3p, team4p) VALUES ($zero, $zero, $zero, $zero)");
                echo "<h1>Turnering og lag lagt til!</h1>";
                }

                ?> 
```

这就是制作“联赛/锦标赛”的开始。所有的数据都在表格中。

我从一个教程中获得了这段代码，该教程用于为我的网页进行简单的现场编辑。虽然我可以使用相同的输出代码，但在那个站点上它只是来自单个表的新闻。

我已经阅读了一些关于 UNION、LEFT JOIN、FULL JOIN 等的信息……但我没有明白。

这是我的“输出”代码：

```
<?php
                $result = mysql_query("SELECT * FROM cupname ORDER BY id DESC");
                $result = mysql_query("SELECT * FROM teams ORDER BY id DESC");
                $result = mysql_query("SELECT * FROM wins ORDER BY id DESC");
                $result = mysql_query("SELECT * FROM draws ORDER BY id DESC");
                $result = mysql_query("SELECT * FROM looses ORDER BY id DESC");
                $result = mysql_query("SELECT * FROM points ORDER BY id DESC");
                    while($row = mysql_fetch_array($result)) {
                        $i=$i + 1;
                        echo "<table>";
                        echo "<tr>";
                        echo $row['name'];
                        echo "</tr>";
                        echo "<tr><td><b>Lag</b></td>
                        <td><b>Seiere</b></td>
                        <td><b>Uavgjort</b></td>
                        <td><b>Tap</b></td>
                        <td><b>Poeng</b></td>
                        </tr><tr><td>";
                        echo $row['team1'];
                        echo "</td><td>";
                        echo $row['team1w']; 
                        echo "</td><td>"; 
                        echo  $row['team1d']; 
                        echo "</td><td>"; 
                        echo  $row['team1l']; 
                        echo "</td><td>"; 
                        echo  $row['team1p']; 
                        echo "</td></tr><tr><td>"; 
                        echo  $row['team2']; 
                        echo  "</td><td>"; 
                        echo  $row['team2w']; 
                        echo "</td><td>"; 
                        echo  $row['team2d']; 
                        echo "</td><td>"; 
                        echo  $row['team2l']; 
                        echo "</td><td>"; 
                        echo  $row['team2p']; 
                        echo "</td></tr><tr><td>"; 
                        echo  $row['team3']; 
                        echo  "</td><td>"; 
                        echo  $row['team3w']; 
                        echo "</td><td>"; 
                        echo  $row['team3d']; 
                        echo "</td><td>"; 
                        echo  $row['team3l']; 
                        echo "</td><td>";
                        echo  $row['team3p']; 
                        echo "</td></tr><tr><td>"; 
                        echo  $row['team4']; 
                        echo  "</td><td>"; 
                        echo  $row['team4w']; 
                        echo "</td><td>"; 
                        echo  $row['team4d']; 
                        echo "</td><td>"; 
                        echo  $row['team4l']; 
                        echo "</td><td>"; 
                        echo  $row['team1p']; 
                        echo "</td></tr></table><br /><hr /><br />";
                    }
                ?> 
```

有人知道我应该做什么，或者不做什么吗？

感谢您的任何回答！

编辑：我只是得到一个空表的输出！仅输出点，即 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:27:29.287

您需要加入表格。从您的问题来看，您似乎已经对表的关系部分进行了排序（尽管我不完全确定我是否完全遵循它），所以这实际上是一个使用什么连接的问题：

内连接 - 这将只返回所有表中数据匹配的记录：

```
select
    tourn.id,
    tourn.name
from
    tournament
        join teams team
            on tourn.id=team.id
        join wins win
            on tourn.id=win.id 
```

依此类推（我假设锦标赛.ID 是其他相关的列）

现在，您可以将其更改为外连接，无论其他表中是否存在匹配行，它都会从您的第一个表中返回行：

```
select
    tourn.id,
    tourn.name
from
    tournament
        right outer join teams team
            on tourn.id=team.id
        right outer join wins win
            on tourn.id=win.id 
```

我不完全确定我可以在这个答案中以任何我在之前写的[问答中解释的方式更好地解释它。](https://stackoverflow.com/questions/12475850/how-can-an-sql-query-return-data-from-multiple-tables)这个答案有意义吗？

# html - CSS添加的字符后的行

> ID：12639488
> 
> 赞同：1
> 
> 时间：2012-09-28T11:51:58.043
> 
> 标签：html, css, vb.net, razor

在我的 CSS 中，我定义了以下内容：

```
.required:before
 {
    content: "*";
    font-weight: bold;
    color: Red;
 } 
```

在我看来，以下几点：

```
 <div class="editor-label required">
        Customer Group
    </div>
    <div class="editor-field">
        @Html.DropDownList("GroupId", "")
        @Html.ValidationMessageFor(Function(model) model.GroupId)
    </div> 
```

但是当我运行视图时，它会放一个星号，然后在下一行标签上，我希望它们在同一行。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:00:40.507

...................................................

嗨现在定义位置像这样

做这个CSS

```
.required:before
 {
    content: "*";
    font-weight: bold;
    color: Red;
    position:absolute;
    left:0;
    top:0;
 }

.required{
position:relative;
    padding-left:10px;
} 
```

根据您的设计向左或向上调整

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:56:04.073

添加`display: inline-block;`到两者`.required`和`.required:before`：

```
.required, .required:before {
    display: inline-block;
} 
```

# marklogic - Marklogic：使用搜索：搜索对元素范围索引进行 Wilcard 搜索

> ID：12639493
> 
> 赞同：1
> 
> 时间：2012-09-28T11:52:21.413
> 
> 标签：marklogic

Page1.xml

```
<pages xmlns="http://marklogic.com/docs">
  <page>
    <elementNode>data1</elementNode>
    <textNode>text1</textNode>
  </page>
  <page>
    <elementNode>data2</elementNode>
    <textNode>text2</textNode>
  </page>
  <page>
    <elementNode>data3</elementNode>
    <textNode>text3</textNode>
  </page>
  <page>
    <elementNode>data4</elementNode>
    <textNode>text4</textNode>
  </page>
</pages> 
```

我在 elementNode 上创建了一个元素范围索引，然后执行了以下 XQuery：

```
xquery version "1.0-ml";
declare namespace html = "http://www.w3.org/1999/xhtml";
declare namespace ts= "http://marklogic.com/docs";
import module namespace search ="http://marklogic.com/appservices/search" at "/MarkLogic/appservices/search/search.xqy";

declare variable $options :=  
  <options xmlns="http://marklogic.com/appservices/search">
    <searchable-expression xmlns:ex="http://marklogic.com/docs">//ex:page</searchable-expression>
    <grammar>
      <starter strength="30" apply="grouping" delimiter=")">(</starter>
      <starter strength="40" apply="prefix" element="cts:not-query">NOT</starter>
      <joiner strength="10" apply="infix" element="cts:or-query" tokenize="word">OR</joiner>
      <joiner strength="20" apply="infix" element="cts:and-query" tokenize="word">AND</joiner>
      <joiner strength="50" apply="constraint">:</joiner>
    </grammar>
    <constraint name="elementNode">
      <range collation="http://marklogic.com/collation/" type="xs:string">
        <facet-option>limit=1000</facet-option>
        <element ns="http://marklogic.com/docs" name="elementNode"/>
        <searchable-expression xmlns:ex="http://marklogic.com/clover/docs-xml">//ex:elementNode</searchable-expression>
      </range>
    </constraint>
  </options>;

let $searchResult := search:search("elementNode:(*data*)", $options)
return $searchResult 
```

在上述情况下，我没有得到任何结果，因为我在这里使用了通配符星号 [*]。有什么方法可以启用带有元素范围限制的通配符搜索？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:51:55.783

范围约束使用`cts:element-range-query()`，它允许值比较但不允许通配符。但是，`cts:element-value-match()`它被设计为使用通配符表达式，因此一种解决方案是使用该 API 调用构建自定义约束：

```
declare function parse(
    $constraint-qtext as xs:string,
    $right as schema-element(cts:query))
as schema-element(cts:query)
{
    let $vals := cts:element-value-match(
        xs:QName("elementNode"),
        string($right//cts:text))
    return document { 
        cts:element-range-query(xs:QName("elementNode"),"=",$vals) }/*
}; 
```

然后在您的选项节点中声明：

```
<options xmlns="http://marklogic.com/appservices/search">
    <constraint name="match-elementName">
        <custom facet="false">
            <parse apply="parse" ns="" at="/custom.xqy"/>
        </custom>
    </constraint>
</options> 
```

但是，如果您不需要范围索引，则创建一个字段`elementNode`然后使用字段约束可能更简单：

```
<constraint name="elementNode">
    <term-option>wildcarded</term-option>
    <word>
        <field name="field-elementNode"/>
    </word>
</constraint> 
```

# wordpress - 电子邮件使用 Wordpress 中的联系表格 7 插件进入垃圾文件夹

> ID：12639494
> 
> 赞同：4
> 
> 时间：2012-09-28T11:52:24.933
> 
> 标签：wordpress, contact-form-7

我正在使用联系表格 7（3.3 版）插件来创建表格并发送电子邮件。我只有 3 个字段：

1.  名
2.  姓
3.  电子邮件

当我点击提交按钮时，电子邮件进入垃圾文件夹。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-28T14:45:48.440

默认的 CF 7“发件人”字段通常会导致通知被标记为垃圾邮件。将其更改为正确的电子邮件地址，即使 noreply@yourdomain.com 也会比默认的更好（正如贷款所指出的 - 当我回答时错过了！）。

如果这没有帮助，并且实际上是您托管该站点的服务器已被列入黑名单，请查看允许您使用 SMTP 而不是 PHP mail() 函数的 WP 插件。

[http://www.wordpress.org/extend/plugins/wp-mail-smtp/](http://www.wordpress.org/extend/plugins/wp-mail-smtp/)

这也可以排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:56:23.600

电子邮件的收件人决定将哪些电子邮件内容视为“垃圾”。确保插件发出的电子邮件中有“发件人”电子邮件。然后，在您的电子邮件客户端中，将该地址添加到白名单中，这样以后来自该地址的所有电子邮件都将始终被视为合法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:00:15.733

您的 WP 是否在顶级域上运行？和自己托管？如果您确实尝试使用 SPF 记录和 DKIM 记录对您的域进行签名。大多数主要的电子邮件提供商会在他们的传入电子邮件中查找这些记录，然后才能确定它是垃圾邮件 希望有帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-26T11:24:51.530

避免在您的电子邮件中使用过多的链接，因为这会增加邮件被标记为垃圾邮件的机会。

我有同样的问题，但通过删除自动生成的邮件中的一些链接来解决它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-18T16:11:35.510

## **我刚刚解决了同样的情况**

我的邮件被放入垃圾邮件文件夹，而电子邮件没有被发送。我找到了这个[链接](http://codex.wordpress.org/FAQ_Troubleshooting#E-mailed_passwords_are_not_being_received)并在我的 functions.php 文件中添加了这个代码：

```
function cdx_from_email() {
    return "wpgod@yourdomain.com";
}
add_filter( 'wp_mail_from', 'cdx_from_email' );
function cdx_from_name() {
    return "WPGod";
}
add_filter( 'wp_mail_from_name', 'cdx_from_name' ); 
```

默认情况下，您的网站将发送为；从 'wo​​rdpress' 通过将其更改为我的姓名和电子邮件地址，一切正常发送到 gmail。

*这一切都在本地 MAMP 设置上进行了测试。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-31T01:36:32.603

虽然这个问题已经得到解答，但我想我添加了这个，因为这里提供的答案一直是我修复它的方法，直到最近它再次停止工作。所以，我刚从针对这个特定问题的研讨会回来。我正在分享:)

大多数从第三方应用程序（如 Wordpress、Joomla 或 Amazon）发送的电子邮件都会被转移到垃圾邮件中，有时它们会失败并卡在安全层后面。我知道 Wordpress Contact Form 7 的一个事实，这种情况很多次。

尽管我对插件的中继犹豫不决，但这个插件很有帮助！[**WP-SMTP**](https://wordpress.org/plugins/wp-smtp/)

在执行任何操作之前，请确保正确写入 SMTP 设置并确保正确填写字段。这意味着确保这些是您用于 Outlook 的设置：

```
From: your email ("asdf@outlook.com")
From Name: "Your name or company name"
Host: smtp.live.com
Type of Encryption: TLS
SMTP Port: 587
SMTP Authentication: Yes
Username: Same you use to login (usually the complete email address)
Password: Enough said there 
```

> **重要**- 即使失败也发送测试电子邮件。关键是在 Outlook 中触发一项活动，并让他们将其标记为未经授权的连接

现在，修复：

*   转到 Outlook.com
*   登录
*   转到帐户设置
*   选择安全和隐私
*   点击“查看我最近的活动”
*   最近的活动应该是失败尝试。将其授权为受信任的连接。

完毕！

重新测试，您将看到您的电子邮件在收件箱中显示为授权连接。执行这些步骤让 Outlook 知道您来自 Wordpress 的电子邮件是合法连接，而不是请求等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-26T11:30:01.880

正如您被告知将默认 cf7 更改为 noreply@yourdomain.com 可能会给您带来更好的结果，但是，根据我的经验，这通常是您的托管公司限制 PHP mail () 函数的问题，而不是cf7 本身。

由于 wordpress 默认使用 PHP mail() 函数发送电子邮件，该函数由于不可靠而已经非常流行，因此您应该期望将一些邮件丢失到垃圾邮件中。

您可以出于多种原因将一些邮件发送到 PHP mail() 函数，但最重要的是：

大多数托管公司限制使用此功能以防止滥用和垃圾邮件。

因此，如果您将电子邮件丢失为垃圾邮件，那么您的托管公司很可能出于上述原因限制了此功能的使用。

解决方案：

您最好的选择是使用 SMTP（简单邮件传输协议）代替 PHP 的 mail() 函数来发送邮件。SMTP 是行业邮件标准，它使用适当的身份验证来确保比 PHP mail() 函数更多的邮件传递，PHP mail() 函数在帮助将大量邮件变成垃圾邮件方面享有盛誉。

解决这个问题的一个简单方法是安装和配置这个插件[Post SMTP Mailer/Email Log](https://wordpress.org/plugins/post-smtp/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-20T01:40:08.320

我登录到 Hotmail，打开垃圾文件夹，然后在我的表单中的一条消息旁边打勾。顶部出现一个“...”，单击它。创建一个规则（通过单击 X 删除其他人），允许来自您的表单所在域的所有内容，将其移动到您的收件箱。

我就是这样做的。除了我使用了在主题行中包含“这些词”的任何内容的规则（请参阅联系表 7 设置并将“那些词”放在“[您的主题]”之前）。

# r - 将列表转换为数据框，同时保留列表元素名称

> ID：12639501
> 
> 赞同：15
> 
> 时间：2012-09-28T11:52:53.193
> 
> 标签：r, list, dataframe, r-faq

我有一个列表，其中元素名称是 ID 标签，并包含一个带有数值的向量。它们的长度不等（！）。

我想将其转换为一个数据框，其中一列中有 ID，另一列中有数值。例如：

```
$`1`  
[1] 1 2   
$`2`  
[1] 1 2 3 
$`3`  
[1] 1 
```

到：

```
ID   Obs  
1    1  
1    2
2    1
2    2
2    3
3    1 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-28T12:07:42.953

这是一种方法：

```
## your list
ll <- list("1" = 1:2, "2" = 1:3, "3" = 1:2)
## convert to data.frame
dl <- data.frame(ID = rep(names(ll), sapply(ll, length)),
                 Obs = unlist(ll)) 
```

这给出了：

```
> dl
   ID Obs
11  1   1
12  1   2
21  2   1
22  2   2
23  2   3
31  3   1
32  3   2 
```

调用中的第一行`data.frame()`只是一些重复`names()`列表所需次数的代码。第二行只是取消列出将其转换为向量的列表。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-28T11:56:12.860

使用`reshape2`和`melt`哪个有方法`melt.list`

```
.list <- list(`1` = 1:2, `2` = 1:3, `3` = 1:2)
library(reshape2)
melt(.list)
##   value L1
## 1     1  1
## 2     2  1
## 3     1  2
## 4     2  2
## 5     3  2
## 6     1  3
## 7     2  3 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-16T11:31:41.163

已经发布的解决方案的一个很好但仍然缺少的替代方案是`stack`-function：

```
df <- stack(ll)[2:1] 
```

这使：

> ```
> > df
>   ind values
> 1   1      1
> 2   1      2
> 3   2      1
> 4   2      2
> 5   2      3
> 6   3      1
> 7   3      2 
> ```

* * *

同样使用`setNames`，您可以获得所需的确切格式：

```
df <- setNames(stack(ll)[2:1], c('ID','Obs')) 
```

这使：

> ```
> > df
>   ID Obs
> 1  1   1
> 2  1   2
> 3  2   1
> 4  2   2
> 5  2   3
> 6  3   1
> 7  3   2 
> ```

* * *

使用数据：

```
ll <- list("1" = 1:2, "2" = 1:3, "3" = 1:2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T12:02:22.527

使用基函数的解决方案

```
List <- list('1'=c(1,2), '2'= c(1,2,3), '3'=1)
x <- unlist(List)  # as suggested by Gavin Simpson
data.frame(ID=substr(names(x),1,1), Obs=x)
   ID Obs
11  1   1
12  1   2
21  2   1
22  2   2
23  2   3
3   3   1 
```

如果你想要`rownames`1,2,3,4,5,6 试试这个（使用`setNames`）：

```
data.frame(ID=substr(names(x),1,1), Obs=setNames(x, NULL))
  ID Obs
1  1   1
2  1   2
3  2   1
4  2   2
5  2   3
6  3   1 
```

该解决方案仅在所有名称的长度相同时才有效，否则会失败，使用 Gavin 的解决方案会更好。参见例如：

```
List2 <- list('week1'=c(1,2), 'week2'= c(1,2,3), 'week3'=1)
x <- unlist(List2)  
data.frame(ID=substr(names(x),1,nchar(names(x)[1])-1), Obs=setNames(x, NULL))

    ID   Obs
1 week1   1
2 week1   2
3 week2   1
4 week2   2
5 week2   3
6 week3   1 
```

# c# - 从 ASP.NET 页面调用 IronPython 用户控件方法

> ID：12639502
> 
> 赞同：1
> 
> 时间：2012-09-28T11:52:59.253
> 
> 标签：c#, asp.net, .net, user-controls, ironpython

我试图从 C# aspx asp.net 页面的 IronPython 代码中的 ascx 用户控件调用方法。当我对 C# 用户控件方法调用执行 C# 页面时，我没有问题，当我对 IronPython 用户控件方法调用执行 IronPython 页面时，我也没有问题，但是当我从 C# 页面调用 IronPython 用户控件方法调用时，我收到 CS1061 错误

我用来调用它的代码与我从 C# 到 C# 或 IronPython 到 IronPython 使用的代码相同，即 (controlID).method() 。控件常规属性是可访问的（启用、可见等），但方法不是。有什么办法可以使这项工作？

# wpf - 在 WPF 中 ItemsControl 的 DataTemplate 中访问 TextBlock 的文本

> ID：12639508
> 
> 赞同：1
> 
> 时间：2012-09-28T11:53:28.463
> 
> 标签：wpf, time, datatemplate, textblock

当向消息中添加新消息时，我在我的 WPF 应用程序中显示
消息，我需要突出显示它。所以我想动态获取添加到 TextBlock 的文本

我有这样的xaml

```
 <ItemsControl Name="DialogItemsControl" ItemsSource="{Binding Messages, Mode=OneWay}" Background="Transparent" 
                          BorderBrush="Transparent" TargetUpdated="DialogItemsControl_TargetUpdated">
                <ItemsControl.ItemTemplate><!-- For ever message -->
                    <DataTemplate>
                        <Grid Margin="0,0,0,20">
                            <ItemsControl Name="SubDialogItemsControl"
                                  Foreground="{DynamicResource ButtonTextBrush}" 
                                  ItemsSource="{Binding Lines,NotifyOnTargetUpdated=True}"
                                  Margin="0,0,0,12"
                                  Grid.Column="0">
                                <ItemsControl.ItemTemplate><!-- For every line -->
                                    <DataTemplate>
                                        <TextBlock Name="DialogMessageText" 
                                                   Text="{Binding NotifyOnTargetUpdated=True}" 
                                            VerticalAlignment="Top" 
                                            Margin="0,2,0,2" 
                                            TextTrimming="WordEllipsis"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>                                    
                            </ItemsControl>
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl> 
```

代码隐藏类中的代码是这样的：

```
private void DialogItemsControl_TargetUpdated(object sender, System.Windows.Data.DataTransferEventArgs e)
        {  
          ItemsControl itemControl = sender as ItemsControl;

            ContentPresenter dp =   itemControl.ItemContainerGenerator.ContainerFromItem(itemControl.Items.CurrentItem) as ContentPresenter;

            // Finding textBlock from the DataTemplate that is set on that ContentPresenter
            DataTemplate myDataTemplate = dp.ContentTemplate;
            ItemsControl itc = (ItemsControl)myDataTemplate.FindName("SubDialogItemsControl", dp);
            if (itc != null && itc.ItemContainerGenerator.Status == System.Windows.Controls.Primitives.GeneratorStatus.ContainersGenerated)
            {
                ContentPresenter cp = itc.ItemContainerGenerator.ContainerFromIndex(0) as ContentPresenter;
                DataTemplate dt = cp.ContentTemplate;
                TextBlock tb = dt.LoadContent() as TextBlock;               

                tb.TargetUpdated += new EventHandler<System.Windows.Data.DataTransferEventArgs>(myTextBlock_TargetUpdated);
            }            
        }

 void myTextBlock_TargetUpdated(object sender, System.Windows.Data.DataTransferEventArgs e)

       {

            TextBlock tb = sender as TextBlock;
           //When i access the text property of tb, its showing null, how to get the text
        } 
```

当我在文本块的目标更新事件中访问文本块的文本属性时，它显示为空，如何读取文本。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:07:29.897

您从错误的角度解决了问题（并且可能在此过程中添加了内存泄漏，因为我没有看到您取消订阅该事件）。

您需要创建一个自定义 TextBlock，覆盖 Text 属性的元数据，以便在文本字符串更改时（通过 PropertyChangedCallback）更改背景几秒钟。

然后在 ItemsControl 的 DataTemplate 中使用该自定义 TextBlock。

**编辑**- 我认为其他人可能需要此功能，所以这是一个工作示例：

```
public class CustomTextBlock : TextBlock
    {
        static CustomTextBlock()
        {
            TextProperty.OverrideMetadata(typeof(CustomTextBlock), new FrameworkPropertyMetadata(null, 
                new PropertyChangedCallback(
                    (dpo, dpce) => 
                    {
                        //Flash the background to yellow for 2 seconds
                        var myTxtblk = dpo as CustomTextBlock;
                        if (myTxtblk != null)
                        {
                            myTxtblk.Background = Brushes.Yellow;
                            Task.Factory.StartNew(
                                () => 
                                {
                                    Thread.Sleep(2000);
                                    Application.Current.Dispatcher.Invoke(
                                        new Action(() => 
                                        {
                                            myTxtblk.Background = Brushes.Transparent;
                                        }));
                                });
                        }
                    })));
        }
    } 
```

然后，您需要在 XAML 视图中声明正确的 xmlns 命名空间，并像使用常规 TextBlock 一样使用它：

```
<local:CustomTextBlock Text="{Binding MyDynamicText}"/> 
```

当 MyDynamicText 被修改时，它会闪烁黄色（如果它引发 PropertyChanged）。

# javascript - 如何预选 Dijit.form.FilteringSelect 中的第一个元素？

> ID：12639511
> 
> 赞同：1
> 
> 时间：2012-09-28T11:53:42.500
> 
> 标签：javascript, dojo

我有 Dijit.form.FilteringSelect 从下拉的 Web 服务内容动态加载。

我想预选第一个元素。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T15:28:56.800

这取决于您的实施。

如果您首先加载数据，然后创建`dojo/store/Memory`哪些提要，`dijit/form/FilteringSelect`则：

```
// sync only for dojo/store/Memory
var store = filteringSelect1.store;
filteringSelect1.set("value", store.getIdentity(store.data[0])); 
```

更强大的同步或异步方式将是查询商店：

```
when(store.query(function(item, index, items) {
    return index == 0;
}), function(results) {
    filteringSelect2.set("value", store.getIdentity(results[0]));
}); 
```

在 jsFiddle 上查看这两个示例：http: [//jsfiddle.net/phusick/DaA3a/](http://jsfiddle.net/phusick/DaA3a/)

如果您`filteringSelect`已备份，`dojo/store/JsonRest`那么您的 REST 服务必须支持查询方式`index`（除了查询方式`id`）：

```
restStore.query({ index: 0 }).then(function(item) {
    filteringSelect1.set("value", restStore.getIdentity(item));  
}); 
```

在 jsFiddle上查看一个更复杂的示例（通过 sinon.js [fakeServer](http://sinonjs.org/docs/#fakeServer)模拟这样的 REST 服务）：http: [//jsfiddle.net/phusick/pGt5n/](http://jsfiddle.net/phusick/pGt5n/)

# javascript - 单击时更改颜色

> ID：12639516
> 
> 赞同：0
> 
> 时间：2012-09-28T11:53:54.310
> 
> 标签：javascript, css, hyperlink, onclick, hover

我想在单击时更改超链接的颜色。

我使用了以下代码并且它有效：

```
var current = "home";

function home()
{
    current = "home";
    update2();
}

function comp()
{
    current = "comp";
    update2();
}

function team()
{
    current = "team";
    update2();
}

function cars()
{
    current = "cars";
    update2();
}

function spons()
{
    current = "spons";
    update2();
}

function update2()
{
    if (current == "home"){
        document.getElementById('home').style.cssText='color:#FFE006;font-size:20pt;text-   shadow: -1px 1px 8px #ff9c00, 1px -1px 8px #ff9c00;';
        document.getElementById('comp').style.cssText='color:white;font-size:18pt;text-shadow:;';
        document.getElementById('team').style.cssText='color:white;font-size:18pt;text-shadow:;';
        document.getElementById('cars').style.cssText='color:white;font-size:18pt;text-shadow:;';
        document.getElementById('spons').style.cssText='color:white;font-size:18pt;text-shadow:;';
    } else if (current == "comp"){
        document.getElementById('home').style.cssText='color:white;font-size:18pt;text-shadow:;';
        document.getElementById('comp').style.cssText='color:#FFE006;font-size:20pt;text-shadow: -1px 1px 8px #ff9c00, 1px -1px 8px #ff9c00;';
        document.getElementById('team').style.cssText='color:white;font-size:18pt;text-shadow:;';
        document.getElementById('cars').style.cssText='color:white;font-size:18pt;text-shadow:;';
        document.getElementById('spons').style.cssText='color:white;font-size:18pt;text-shadow:;';
     } else if (current == "team"){
         document.getElementById('home').style.cssText='color:white;font-size:18pt;text-shadow:;';
         document.getElementById('comp').style.cssText='color:white;font-size:18pt;text-shadow:;';
         document.getElementById('team').style.cssText='color:#FFE006;font-size:20pt;text-shadow:  -1px 1px 8px #ff9c00, 1px -1px 8px #ff9c00;';
         document.getElementById('cars').style.cssText='color:white;font-size:18pt;text-shadow:;';
         document.getElementById('spons').style.cssText='color:white;font-size:18pt;text-shadow:;';
     } else if (current == "cars"){
         document.getElementById('home').style.cssText='color:white;font-size:18pt;text-shadow:;';
         document.getElementById('comp').style.cssText='color:white;font-size:18pt;text-shadow:;';
         document.getElementById('team').style.cssText='color:white;font-size:18pt;text-shadow:;';
         document.getElementById('cars').style.cssText='color:#FFE006;font-size:20pt;text-shadow: -1px 1px 8px #ff9c00, 1px -1px 8px #ff9c00;';
         document.getElementById('spons').style.cssText='color:white;font-size:18pt;text-shadow:;';
     } else if (current == "spons"){
         document.getElementById('home').style.cssText='color:white;font-size:18pt;text-shadow:;';
         document.getElementById('comp').style.cssText='color:white;font-size:18pt;text-shadow:;';
         document.getElementById('team').style.cssText='color:white;font-size:18pt;text-shadow:;';
         document.getElementById('cars').style.cssText='color:white;font-size:18pt;text-shadow:;';
         document.getElementById('spons').style.cssText='color:#FFE006;font-size:20pt;text-shadow: -1px 1px 8px #ff9c00, 1px -1px 8px #ff9c00;';
     }
 } 
```

实际上，它起作用了，但出现了一个问题。如您所见，当`current`设置为时，我尝试更改颜色、大小和文本阴影等属性`home/spons/cars/team/comp`。`current`当用户单击超链接时调用函数时发生变化。

出现问题，因为我告诉它在它是时执行相同的属性`:hover`。单击按钮后，其属性会更改，其他超链接也会更改为白色和 18 pt 大小。

现在，一旦用户点击一个超链接，它就会改变一个框架的来源、它自己的属性和其他超链接的属性。但是，一旦我单击它然后将鼠标悬停在另一个超链接上，悬停的属性就不起作用，但 javascript 的属性起作用。

如果您无法理解我的问题，请查看[http://www.xphoenix1.hpage.com/](http://www.xphoenix1.hpage.com/)。单击一个菜单按钮后，它也会更改其他按钮属性并停止悬停属性。

如果您能够理解我在说什么并有解决方案，那么请回答。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:38:11.600

这在 css 中很简单

```
a:hover{background-color:yellow;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:18:02.893

公平地说，他们希望影响一些不仅仅是文本颜色的更改。而且，不幸的是，大多数[:visited 状态的样式不再像以前那样工作了](http://hacks.mozilla.org/2010/03/privacy-related-changes-coming-to-css-vistited/)。

除了字体颜色之外，他们还使字体大小更大一些并添加/删除文本阴影。

虽然，我同意，这种 JS 方法有点过头了。

我对 OP 的建议是让菜单链接实际转到单独的页面，而不仅仅是换出 div。然后，您可以通过任何您希望的方式将“当前”类从链接移动到链接——即使这是静态 HTML，也可以手动移动。然后相应地设置它的样式：

```
a.current {  //styles } 
```

这种方式减少了出错的可能性，并且导航仅适用于 HTML 和 CSS - 不需要 JS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:57:57.730

为超链接写文字颜色，这样写

```
a:visited{
    color:red;
    } 
```

更新：

好的，如果你想使用 JQuery，想法是你将菜单作为`<li>`或或任何其他元素，并将这些图像作为背景图像。当您创建图片时，白色文本和黄色文本都在另一个下方（CSS spriting），单击菜单时，您将一个名为 selected 的类添加到当前元素并将图像移到上方，以便显示黄色文本，然后删除从所有其他菜单中选择的类。例如，我使用`<a>`了标签。

```
.menu a{
   background-image:url('images/button.png');
}
.menu a.selected {
     background-image:url('images/button.png'):0 -50px;
}

$(".menu a").live('click', function() {
  $(".menu a").removeClass("selected");
  $(this).addClass("selected");
  return false;
}); 
```

[在这里](https://stackoverflow.com/questions/3465248/highlight-active-link-using-jquery)查看这篇文章

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:17:48.863

然后使用

```
#home:visited, #comp:visited{
    color:red;
} 
```

或者更好的是，使用类名应用所有相关的锚点，例如'rav'（访问后红色;））这样你就可以做到：

```
.rav:visited{ color:red; } 
```

干杯!

# c# - 如何创建活动图像以显示容器中的内容级别

> ID：12639517
> 
> 赞同：0
> 
> 时间：2012-09-28T11:54:03.803
> 
> 标签：c#, asp.net, charts, gauge

我不知道如何问这个，因为我不知道我在寻找什么。

开始。我需要以图形方式显示容器的级别。例如：假设我正在监控玻璃杯中的内容。我刚把玻璃装满，所以它的内容是 100% 所以我想显示一个 100% 装满水的玻璃的图像，现在我希望水位随着内容物的水平下降而实时下降（在数据库中）。

如果可能，我需要 C# 中的解决方案

任何帮助将不胜感激！

（我知道这个问题可能含糊不清，但请尽可能提供帮助）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:27:11.800

我认为您可以使用一个名为 SignalR 的框架。这基本上在服务器和客户端之间发送实时消息。（我猜有点像 websockets，据我所知，也许 SignalR 是基于 websockets 的）。

因此，当数据库中的值发生变化时，您可以向客户端发送一条消息，告诉它以某种方式更新其图像。

您可以在此处阅读有关 SignalR 的一些信息：http: [//www.code-magazine.com/Article.aspx](http://www.code-magazine.com/Article.aspx?quickid=1210071) ?quickid= 1210071 或者您可以适当地查看如何使用 websockets。

# javascript - 使用 cookie 保存列表并删除

> ID：12639519
> 
> 赞同：0
> 
> 时间：2012-09-28T11:54:07.527
> 
> 标签：javascript, jquery, json, cookies, append

我有一个允许保存和删除 cookie 的脚本：[JsFiddle](http://jsfiddle.net/V63Px/)

在输入字段中输入内容并保存。这样做两次或更多次，现在删除项目并刷新。您将看到最后删除的项目仍然存在。这怎么可能？？

附言。您可以单击列表删除项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:41:40.987

`values2`在删除单击的项目之前保存列表。演示：http: [//jsfiddle.net/V63Px/9/](http://jsfiddle.net/V63Px/9/)

# google-apps-script - “您的脚本最近未能成功完成”中不存在的行号

> ID：12639522
> 
> 赞同：0
> 
> 时间：2012-09-28T11:54:14.283
> 
> 标签：google-apps-script, google-sheets

我有一个谷歌电子表格脚本，我在定时触发器上运行，并选择在失败时接收通知。如果我手动运行它，它可以正常工作，但是当它触发时，我会收到以下通知：

> 启动函数错误消息触发器结束 2012 年 9 月 28 日晚上 9:45 plotPortfolioData TypeError：无法调用 null 的方法“getSheetByName”。（第 5 行）基于时间的 9/28/12 晚上 9:45

问题是，第 5 行是空的，第 4 行和第 3 行都没有任何“getSheetByName”函数

```
function plotPortfolioData() {

  // get the Portfolio Chart sheet, and create it if it doesn't exist
  var ss = SpreadsheetApp.getActiveSpreadsheet();

  var portfolioDataSetT = transpose(GetComprehensivePortfolioData(ss));

  varSheetName = "Charts";

  // IMPORTANT
  var firstIndividualStockColumn = 6; // first column in portfolioDataSetT where the actual individual holdings start

  // loop through every value in the portfolio dataset and replace 0 with a blank string (this has the effect of removing
  // any 0 quantity lines from the stacked charts).
  for (var i = 2; i != portfolioDataSetT.length; i++) // start at i = 2 to skip the header and first row (needed for charting)
  {
    for (ii in portfolioDataSetT[i])
    {
      if (portfolioDataSetT[i][ii] <= 0)
      {
        portfolioDataSetT[i][ii] = '';
      }
    }
  }

  if (!ss.getSheetByName(varSheetName))
  {
    var newSheetCreated = true;
    ss.insertSheet(varSheetName);
    var sheet = ss.getSheetByName(varSheetName);
  }
  else
  {
    var sheet = ss.getSheetByName(varSheetName);

    // remove all charts in this existing sheet
    var charts = sheet.getCharts();
    for (var i in charts)
    {
      sheet.removeChart(charts[i]);
    }
    var sheet = ss.getSheetByName(varSheetName);
  }

  // Build the data into the spreadsheet
  var sheetDataRange = sheet.getRange(1, 1, portfolioDataSetT.length, portfolioDataSetT[0].length);
  sheetDataRange.setValues(portfolioDataSetT);

  // prepare the pie chart data
  // start by listing the individual stock names vertically
  var number_of_custom_rows = 1; // the number of manual rows we will add that are not just stocks
  var pieChartSize = (portfolioDataSetT[0].length + 1 - firstIndividualStockColumn) + number_of_custom_rows; // number of holdings in the pie chart
  var pieChartFirstColumn = portfolioDataSetT[0].length+1; // just start after the data pile

  var pieChartStockTitles = sheet.getRange(1,1,1,portfolioDataSetT[0].length).getValues(); // the range of headers
  var pieChartHoldingsRange = sheet.getRange(portfolioDataSetT.length,1,1,portfolioDataSetT[0].length);
  var pieChartHoldings = pieChartHoldingsRange.getValues(); // range of holdings values

  // set the pie chart holdings range number format
  pieChartHoldingsRange.setNumberFormat("$#,###");

  var pieChartDataSpace = sheet.getRange(1,pieChartFirstColumn,pieChartSize,2); // the space where the pie chart data will be printed for graphing (2 columns for name and holding value for each stock)

  for (var i = 0; i != pieChartSize - number_of_custom_rows; i++)
  {
    pieChartDataSpace.getCell(i+1,1).setValue(pieChartStockTitles[0][firstIndividualStockColumn-1+i]); // add the name of the holding to the first pie chart column
    pieChartDataSpace.getCell(i+1,2).setValue(pieChartHoldings[0][firstIndividualStockColumn-1+i]); // add the value of the holding to the 2nd pie chart column
  }

  // now add the custom rows
  pieChartDataSpace.getCell(pieChartSize,1).setValue(pieChartStockTitles[0][4]); // add the cash header
  pieChartDataSpace.getCell(pieChartSize,2).setValue(pieChartHoldings[0][4]); // add the cash amount

  var chartHeight = 400;
  var chartWidth = 500;
  var offset = 3; // buffer region in pixels between charts and the edge of screen

  // hide the numbers for neatness:
  sheet.hideRows(1,portfolioDataSetT.length);

  // performance chart (top left)
  var performanceChart = sheet.newChart()
      .setOption('title', "Portfolio Measurements")
      .setPosition(portfolioDataSetT.length, 1, offset, offset)
      .setOption('height',chartHeight)
      .setOption('width',chartWidth)
      .setOption('lineWidth',1)
      //.setOption('vAxis.format',"$#,###")
      .setOption('vAxis.gridlines.count',10)
      .setOption('theme','maximized')
      .setChartType(Charts.ChartType.LINE)
      .addRange(sheet.getRange("A:D")) // date,cost base, cash-only,cost-base no cash
      .build();
  sheet.insertChart(performanceChart);

  // performance chart (bottom left)
  var compositionChart = sheet.newChart()
      .setChartType(Charts.ChartType.AREA)
      .setOption('title', "Portfolio Composition")
      .setPosition(portfolioDataSetT.length, 1, offset, 2*offset + chartHeight)
      .setOption('height',chartHeight)
      .setOption('width',chartWidth)
      .setOption('theme','maximized')
      .setOption('vAxis.gridlines.count',10)
      .setOption('isStacked',true)
      .setOption('lineWidth',0)
      .setOption('areaOpacity',0.8)
      //.setOption('vAxis.format',"$#,###")
      .addRange(sheet.getRange("A:A")) // dates
      .addRange(sheet.getRange("E:E")) // cash balance
      .addRange(sheet.getRange(1,firstIndividualStockColumn,portfolioDataSetT.length,portfolioDataSetT[0].length + 1 - firstIndividualStockColumn)) // add the individual stock holdings
      .build();
  sheet.insertChart(compositionChart);

  // pie chart portfolio composition (top right)
  var pieChart = sheet.newChart()
      .setChartType(Charts.ChartType.PIE)
      .setOption('title', "Portfolio Composition")
      .setPosition(portfolioDataSetT.length, 1, 2*offset + chartWidth, offset)
      .setOption('height',chartHeight)
      .setOption('width',chartWidth)
      .setOption('pieSliceText','label')
      .setOption('is3D',true)
      .addRange(sheet.getRange(1,pieChartFirstColumn,pieChartSize,1)) // add the individual stock names
      .addRange(sheet.getRange(1,pieChartFirstColumn+1,pieChartSize,1)) // add the individual holding values
      .build();
  sheet.insertChart(pieChart);

  // fix up number formatting
  var sheetWholeRange = sheet.getDataRange();
  sheetWholeRange.setNumberFormat("$#,###"); // set all numbers to currency
  var sheetDateRange = sheet.getRange("A:A");
  sheetDateRange.setNumberFormat("d-LLL-YYYY"); // set date column formatting
} 
```

那么，发生了什么事，我应该如何调试这个问题？当我运行它时，它工作正常！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:07:17.153

似乎问题出在以下行

> var ss = SpreadsheetApp.getActiveSpreadsheet();

当您手动启动此脚本时，我假设您以电子表格脚本的形式从`Spreadsheet Script Editor`或`Spreadsheet Script Manager`. 在这种情况下，`getActiveSpreadsheet`返回现在打开的活动工作表并且`ss`没有`null`- 一切都很好。

当您从定时触发器启动相同的脚本时，没有任何活动的电子表格并且`getActiveSpreadsheet()`返回`null`. 在那之后，可能在`GetComprehensivePortfolioData`方法内部的某个地方有一条线`ss.getSheetByName('...')`。在这一行中抛出异常。

我认为，该`GetComprehensivePortfolioData`方法在一个单独的`gs`文件中，第一次`getSheetByName`调用在第 5 行。

# javascript - UIButton 可以用来在 UIWebView 中执行超链接点击吗？

> ID：12639525
> 
> 赞同：0
> 
> 时间：2012-09-28T11:54:22.547
> 
> 标签：javascript, objective-c, ios, uiwebview, uibutton

这可能是一个疯狂的问题，但我希望在 iOS 应用程序中使用 UIButton，当您单击它时，它会依次单击在隐藏的 UIWebView 中加载的网页上的超链接。

该链接也可以由 javascript 调用触发我只是不确定是否可以从 UIButton 到 UIWebView？

谢谢亚伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:06:45.217

您可以从 UIButton 点击​​处理程序调用 UIWebView 内的 javascript，直接调用处理 href 点击的 javascript 函数。

请参阅[基于开关在代码中在运行时将 html 添加到 ui web 视图](https://stackoverflow.com/questions/12478460/adding-html-to-a-ui-web-view-at-runtime-in-code-based-on-a-switch/12478702#12478702)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:56:30.617

我建议只使用带有提交按钮的 HTML 表单。我已经这样做了，而且要简单得多。就像是：

```
 - (NSString *)makeSubmitForm
    {
        NSMutableString *ms = [NSMutableString string];

        [ms appendString:@"<p><form action=\"formentry\">"];
        [ms appendString:@"<input style=\"submit\" type=\"submit\" value=\"Submit\" />"];
        [ms appendString:@"<input type=\"hidden\" name=\"fieldtype\" value=\"submit\" />"];
        [ms appendString:@"</form>"];

        return ms;
    } 
```

然后在你的 UIWebViewDelegate 中寻找它。下面的代码会执行此操作，并检查是否存在其他表单输入内容（如文本字段输入）

```
 - (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
    {
        NSString *surl = [[request URL] absoluteString];

        NSRange ner = [surl rangeOfString:@"formentry?"];

        if (ner.location != NSNotFound){
            NSString *argstr = [surl substringFromIndex:ner.location+ner.length];
            NSMutableDictionary *md = [NSMutableDictionary dictionary];
            NSArray *args = [argstr componentsSeparatedByString:@"&"];
            for (int i=0; i < args.count; i++){
                NSString *keyval = [args objectAtIndex:i];
                NSArray *pair = [keyval componentsSeparatedByString:@"="];
                [md setObject:[pair objectAtIndex:1] forKey:[pair objectAtIndex:0]];
            }
            [MyDelegate tellItWhatever:md];
        } 

         return NO;
    } 
```

# jquery - 如果 div 已被删除，则禁用删除？

> ID：12639533
> 
> 赞同：1
> 
> 时间：2012-09-28T11:54:51.750
> 
> 标签：jquery, drag-and-drop, jquery-ui-draggable, jquery-ui-droppable

为了开始自学 jquery，我创建了一个拖放游戏。一切似乎都在工作，但您可以将多个项目放到同一个方块上。如果占位符中有图像，我想禁用 droppable。

我调查过：

```
`greedy: true` 
```

这会禁用 drop 但我不确定如何再次启用它，并且：

```
$(this).droppable( 'disable' ); 
```

我可以让这两个都禁用下降，但不确定如果块/图像恢复到其原始位置或移动到另一个方块，我如何让它们再次启用它。

完整版： [http ://creativelabel.co.uk/drag-and-drop/](http://creativelabel.co.uk/drag-and-drop/)

更新：这是可放置插槽的代码。

```
 for ( var i=0; i<=19; i++ ) {
  var images = 'images/slot' + slotNumbers[i] + '.jpg';
$('<div class="placeholder"><div class="img-slot"></div></div>').attr('id', 'slot'+slotNumbers[i]).data( 'slotNumbers', slotNumbers[i] ).appendTo( '#imgSlots' ).droppable( {
      accept: '#images img',
      hoverClass: 'hovered',
      drop: handleDropEvent,
      activate: handleDragEvent
}); 
```

这是`drop:`事件代码：

```
 function handleDropEvent( event, ui ) {
  var slotNumber = $(this).data( 'slotNumbers' );
  var imgNumber = ui.draggable.data( 'number' );
  ui.draggable.addClass( 'dropped' );
  $(this).droppable( 'disable' );
  ui.draggable.position( { of: $(this), my: 'right top', at: 'right top' } );

  if ( slotNumber == imgNumber ) {
    ui.draggable.addClass( 'img-match' );
    ui.draggable.data("valid", true);

    imgMatch++;
  }  else {
      if(ui.draggable.data("valid")) {
         imgMatch--;
         ui.draggable.data("valid", false); 
      }
  } 
```

`activate:`代码：

```
 function handleDragEvent( event, ui ) {
   $(this).droppable( 'enable' );
   if(ui.draggable.data("valid")) {
         imgMatch--;
         $('input[name=Score]').val(imgMatch);
         $('#score h1').text(imgMatch);
         ui.draggable.data("valid", false); 
   }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:57:50.907

[文档](http://jqueryui.com/demos/droppable/#option-disabled)（在“方法”选项卡下 查看）表明要禁用您使用：

```
$(this).droppable( 'disable' ); 
```

并使您能够使用

```
$(this).droppable( 'enable' ); 
```

* * *

更新：检查这个实时示例： http: [//jsfiddle.net/QqJRs/](http://jsfiddle.net/QqJRs/) 将其中一个红色方块拖到大框并放下它（它变成绿色表示它已放下）。当一个在里面时，你不能把其他任何一个放到这个盒子里。现在将其拖出（它变回红色表示已删除）。现在您可以将其他任何一个放在它的位置。

症结正如我在下面的评论中所描述的那样；当您将项目放入容器中时，将容器与该项目相关联：

```
drop: function(event,ui){
    ui.draggable.addClass( 'dropped' ); // taken from your code & I used to change color

   ui.draggable.data('droppedin',$(this)); // associate the container
    $(this).droppable('disable'); // disable the droppable
} 
```

然后当你再次拖动它时，取消关联并重新启用：

```
drag: function(event,ui){
       if($(this).data('droppedin')){
           $(this).data('droppedin').droppable('enable'); v// re-enable
           $(this).data('droppedin',null);  // de-associate
           $(this).removeClass( 'dropped' ) // remove class
       }
   } 
```

# php - php + api：在客户端网站上下载和评估代码 -> 这是个好主意吗？

> ID：12639544
> 
> 赞同：0
> 
> 时间：2012-09-28T11:55:35.083
> 
> 标签：php, api

我们提供链接聚合服务。

术语：
1）客户端 api：客户端 api 代码，用 php 编写，我们为客户提供
2）客户端：客户端站点，使用客户端 api 获取（从我们的服务器）并显示 html 链接

Api 非常简单。
客户所关心的只是获取和显示链接。而已。
目前，它看起来像这样：

```
<?php
require_once('/path/to/lib.php'); // all logic is here ( what to send, log, ...)
$obj = new Obj();
echo $obj->getData(); // html links
?> 
```

问题是，升级客户端 api 后，我们必须将其提供给每个客户端以上传到他们的网站。
所以，这很不方便。

**您如何看待以下想法**：
将 lib.php 放置到服务器并升级客户端 api，以便下载并评估该代码。
因此，我们可以在一个地方控制客户网站上发生的一切。

你怎么看 ？
我应该注意什么？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:50:48.047

> **您如何看待以下想法：**
> 将 lib.php 放置到服务器并升级客户端 api，以便下载并评估该代码。因此，我们可以在一个地方控制客户网站上发生的一切。

任何允许自动更新的代码段都是一个*重要*的安全问题。

根据您的客户群的富裕程度，这可能是可接受的风险。但更有可能的是，他们不会理解或意识到其中的含义。这带来了另一个经常被忽视的观点。

> 我应该注意什么？

如果出现问题，或者您的代码导致（甚至怀疑）漏洞，您承担什么责任？

任何选择与您合作的人都必须对您的所有系统都有信心。

对不起，不在我的手表上。

# html - SVG 在不同浏览器上的缩放比例不同

> ID：12639546
> 
> 赞同：1
> 
> 时间：2012-09-28T11:55:38.433
> 
> 标签：html, svg, cross-browser

我需要将我的 svg 放在 div 中，如下所示：

```
<div style="height:100px; width: 300px; border:1px solid red;" >
    <div style="width: 100%; height: 100%; display: table;">
        <div style="display:table-row; height:100%">
            <div style="position: relative; vertical-align: middle; height:100%;">
                <div style="vertical-align: middle; position: relative; margin: 0px auto; height:100%;">
                    <svg viewBox="0 0 485 255" id="damageCanvas" style="vertical-align: middle;" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" version="1.1" fill="rgba(124,240,10,0.5)" height="100%" width="100%">    
                            <g transform="translate(1,1)">
                                <rect stroke="black" stroke-width="1.5" width="99.5%" height="99.5%" fill-opacity="0" style="padding: 2px 2px 2px 2px"></rect>                    
                            </g>                        
                    </svg>
                </div>
            </div>
        </div>
    </div>
</div> 
```

问题是下面的 SVG 在不同的浏览器中以不同的方式呈现。铬合金： ![在此处输入图像描述](../Images/42cac9e3d068dbdda01da86716565610.png)

火狐：

![在此处输入图像描述](../Images/736c4b154a1d2a013079bf0aff3a5c7e.png)

即 9：

![在此处输入图像描述](../Images/19efcd17b41d8d6a04769def9c9a356a.png)

我希望图像像 chrome 版本一样缩放。我怎样才能做到这一点？

小提琴：http: [//jsfiddle.net/Sq5bL/5/](http://jsfiddle.net/Sq5bL/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:28:02.150

`<img>`您可以通过或将 SVG 保存在文件中并将其用作资源`<embed>`。我已经使用了这两种方法，并且可以很好地扩展。`<img>`阻止您访问 SVG，因此如果您需要访问 SVG，那么我建议您使用`<embed>`.

就我而言，我做了：

```
<embed id="gaugeSpeed" class="gaugeImage" width="200" height="200" type="image/svg+xml" src="assets/gauges/speed.svg"> 
```

它很好地缩放了它。`<img>`当我使用带有标签的 SVG 时也是如此。我已经在运行 ICS 和 Jellybean 的 Transformer Prime 和 Nexus 7 上进行了测试，工作正常。

应该也可以与您的父 div 一起使用，因为它只是被视为普通的 img 或对象。

* * *

好吧，既然你想保留你的 SVG ......你的问题是由使用

> 显示：表

在第二个 div 上。如果您将其更改为表格单元格或将其删除，那么您的问题就解决了。

[这是一个 JSFiddle，显示它与 table-cell 一起使用](http://jsfiddle.net/metalskin/Sq5bL/11/)

# node.js - 用于数据库驱动网站的 Node vs nginx + php-fpm

> ID：12639551
> 
> 赞同：0
> 
> 时间：2012-09-28T11:55:58.820
> 
> 标签：node.js, content-management-system, nginx, php

节点是数据库驱动网站的好选择吗？我了解实时场景和应用程序中的性能优势。但与 nginx + php-fpm 相比，它是否为经典的、数据库驱动的 CMS 网站提供了相同的性能优势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:48:26.040

鉴于您以非阻塞方式编写数据库绑定，Node 是数据库驱动网站的不错选择。[大多数使用的数据库](https://github.com/joyent/node/wiki/modules#wiki-database)服务器现在都有以非阻塞方式编写的 nodejs 绑定。

例如，PHP 与 apache。它为每个请求创建一个线程。与数据库线程进行 IO 时处于阻塞状态。这意味着在 IO 完成（40,000,000 个周期）之前，http 服务器无法对该请求执行任何操作。这是做 IO 的错误方式。而在nodeJS中，如果db binding是以非阻塞方式编写的，binding是在线程池中做IO，node event loop正在监听事件。

**IO 延迟（以 CPU 周期为单位）**

L1：< 10 个周期

L2：< 20 个周期

RAM：约 300 个周期

圆盘：40,000,000 次循环

网络：240,000,000 次循环

# cuda - CPU 是否等待 DEVICE 让它完成其内核执行......？

> ID：12639552
> 
> 赞同：18
> 
> 时间：2012-09-28T11:55:59.117
> 
> 标签：cuda

主机是否完全等待设备完成其执行？例如，程序的结构如下

```
// cpu code segment

// data transfer from host to device

QUESTION - WILL CPU WAIT FOR DEVICE TO FINISH TRANSFER? IF NO, IS IT POSSIBLE? IF YES, HOW?

// kernel launch

QUESTION - WILL CPU WAIT FOR DEVICE TO LET IT FINISH KERNEL EXECUTION (CONSIDERING KERNEL EXECUTION WILL TAKE NOTABLE TIME say-5 sec)? IF NO, IS IT POSSIBLE? IF YES, HOW?

// data transfer from device to host

// program terminates after printing some information 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-28T12:15:05.513

CUDA运行时的同步功能可以让你达到你想要的。

`cudaDeviceSynchronize()`：

当您调用此函数时，CPU 将等待设备完成所有工作，无论是内存复制还是内核执行。

`cudaStreamSynchronize(cudaStream)`：

此函数将阻塞 CPU，直到指定的 CUDA 流完成其执行。其他 CUDA 流将继续异步执行。

# algorithm - 不能绕枢轴旋转

> ID：12639555
> 
> 赞同：0
> 
> 时间：2012-09-28T11:56:06.513
> 
> 标签：algorithm, binary-search-tree, avl-tree

我正在尝试将新值插入`AVL`树中。新的插入会导致不平衡（根据[维基百科](http://en.wikipedia.org/wiki/Avl_tree)上的文章，这应该属于左右情况），因此需要旋转。但是，在当前情况下不可能轮换，因为两个孩子最终都变得比父母小：

```
 15
         /    \
        10    27
       /  \      
      8   12 
```

现在如果我想插入 11，结构就会变得不平衡：

```
 15
         /    \
        10    27
       /  \      
      8   12
         /
        11 
```

由于左子树更长，并且左子树具有更长的右子树，根据维基百科的图表，这应该属于左右情况。然而，在那里，元素`4`同时具有左右子树，使得旋转成为可能。但是在这里，由于`12`只有左子树，因此旋转使它看起来像：

```
 15
         /    \
        12    27
       /  \      
      10   8
         /
        11 
```

导致两个孩子`12`都不到 12 岁。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:13:31.547

你好像转错了。唯一具有错误平衡因子的节点是根，所以你围绕它旋转。

这种情况涉及检查`10`（根的左孩子）的平衡因子：它是-1，所以我们需要两个不同的旋转（左右情况）。

首先，根据这张图片的左上角，我们向左旋转 10 圈：

![在此处输入图像描述](../Images/cb808129817eda08831e59db112f86e3.png)

所以我们得到：

```
 15
          /  \
         12  27
        / 
       10    
      /  \
     8   11 
```

然后您继续下一个旋转，如图像中所述。

# forms - 如何将 \n 更改 为对文本框使用 java 脚本

> ID：12639557
> 
> 赞同：0
> 
> 时间：2012-09-28T11:56:12.937
> 
> 标签：forms, textbox, line-breaks

我的文本框输出始终只有一行，即使我按 Enter 输出始终是一行，

例如：用户输入：

```
Name: Stack
Last: Over
Address: Flow 
```

不需要的输出：

```
Name: Stack Last: Over Address: Flow 
```

无论如何允许文本框中的多行

输出也应该是：

```
Name: Stack
Last: Over
Address: Flow 
```

输出被发送到我的 php 脚本。只要输出正确，任何 javascript 或 php 脚本都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:31:33.793

文本框输出是指从该文本框中获得的值吗？HTML 文本框不支持多行输入，您应该使用 textarea 代替。这当然是纯 HTML 方法。

我只熟悉 ASP.NET，但在那里，您将使用 TextMode="Multiline" 的 TextBox。

如果通过输出你的意思是你有一个带有**\n**的字符串并且你想用 <br/> 替换它**，**你可以实现一个javascript函数来为你做这件事，比如：

```
function ToHtmlLineBreaks(output)
{
    return output.replace(/(\r\n|\n|\r)/gm,"<br/>");
} 
```

要在 html 页面上显示它，您仍然需要使用文本框以外的内容，以便换行符正确显示。

# java - 在两台 linux 系统计算机之间从 Java 调用 linux shell 命令

> ID：12639558
> 
> 赞同：-1
> 
> 时间：2012-09-28T11:56:15.960
> 
> 标签：java, linux, shell

> **可能重复：**
> [如何使用 Java 在远程机器上执行 Linux 命令？](https://stackoverflow.com/questions/7950024/how-can-i-execute-linux-commands-on-a-remote-machine-using-java)

在我的 linux 客户端计算机中，我试图在另一台 linux 服务器上调用 linux shell。

然后我会在客户端计算机上显示结果。

该命令如下所示：grep 11111 userId.log

有没有什么java开源项目可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:00:34.930

如果您可以 ssh 到另一台计算机，则可以使用[Jsch](http://www.jcraft.com/jsch/)库在 java 中执行此操作。

# windows-phone-7 - Windows phone 7 访问 SQL Azure

> ID：12639561
> 
> 赞同：0
> 
> 时间：2012-09-28T11:56:27.687
> 
> 标签：windows-phone-7, azure, azure-sql-database

我是 WP7 的初学者，我花了一些时间寻找不仅可以消费而且可以插入/更新/删除存储在 SQL Azure 中的数据的解决方案。

我在这里找到了一个很好的教程：

[http://samidipbasu.com/2011/07/24/updating-odata-data-source-from-wp7-part-1/](http://samidipbasu.com/2011/07/24/updating-odata-data-source-from-wp7-part-1/)

但是，SQL Azure 实验室不再接受注册。

[http://www.microsoft.com/en-us/sqlazurelabs/labs/odata.aspx](http://www.microsoft.com/en-us/sqlazurelabs/labs/odata.aspx)

那么，有没有其他的解决方案，可以直接访问云端的 SQL Azure 而无需架设服务器呢？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:21:56.323

看看[Windows Azure Mobile Service](http://www.windowsazure.com/en-us/develop/mobile/)，它应该涵盖服务器端。然后，您可以从 Windows Phone 访问基于 REST 的 API，请参阅[将 Azure 移动服务与 Windows Phone 一起使用](http://kenegozi.com/blog/2012/08/29/using-azure-mobile-services-with-windows-phone)

# drupal - 在 hook_node_view 的另一个节点中添加节点的内容

> ID：12639564
> 
> 赞同：0
> 
> 时间：2012-09-28T11:56:34.967
> 
> 标签：drupal, drupal-7, drupal-modules

在 Drupal 7 中，我想在用户登录时将节点添加到另一个节点。

我正在使用 Drupal 7，我想在用户登录时在另一个节点内添加一个节点：

```
function my_modul_node_view($node, $view_mode, $langcode) {
    global $user;
    switch ($node->vid) {
    case 4:
        $node2 = node_load(37);
        if ($user->uid > 0) {
            $node->content['my_data_field'] = array(
                '#markup' => drupal_render($node2),
                '#weight' => 10,
            );   
        }
    } 
} 
```

我收到以下错误消息：

```
Fatal error: Cannot use object of type stdClass as array 
```

我正在使用以下表格：

```
 $form = drupal_get_form('user_login', $node);
    $node->content['data_collection_form'] = array(
        '#markup' => drupal_render($form),
        '#weight' => 10,
    ); 
```

在我的模块中执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:53:29.393

据我所知，您只需要进行一点小改动：

```
$node->content['my_data_field'] = array(
  '#markup' => drupal_render(node_view($node)),
  '#weight' => 10,
); 
```

# c# - 如何使两个clickonce应用程序分开应用程序？

> ID：12639565
> 
> 赞同：0
> 
> 时间：2012-09-28T11:56:46.980
> 
> 标签：c#, visual-studio-2010, clickonce

我在部署基于现有 clickonce 应用程序 ('AppX') 的新的、单独版本的 clickonce 应用程序 ('AppY') 时遇到问题，但我希望将其与客户端计算机并排安装旧应用程序。

换句话说，我希望用户能够安装 AppX 和 AppY，并将它们作为两个独立的应用程序从他们的开始菜单中启动。

看这个页面：

[http://blogs.msdn.com/b/winformsue/archive/2006/04/20/580223.aspx](http://blogs.msdn.com/b/winformsue/archive/2006/04/20/580223.aspx)

...似乎这应该像更改**产品名称**一样简单，以便 AppX 和 AppY 具有不同的产品名称。

因此，我已将应用程序的其中一个产品名称修改为不同的（在“发布选项”对话框的“描述”选项卡中）。

然而尽管如此，安装 AppX 会取代 AppY，反之亦然。这两个应用程序仍被视为同一个应用程序。

我该如何解决？

# ruby-on-rails - state_machine vs aasm gems for app ruby on rails 3.2

> ID：12639567
> 
> 赞同：10
> 
> 时间：2012-09-28T11:56:48.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, state-machine, aasm

我需要一个用于消息私有系统和订单状态系统的**状态机。**

你可以看到这两个宝石：

[https://github.com/pluginaweek/state_machine](https://github.com/pluginaweek/state_machine)

[https://github.com/rubyist/aasm](https://github.com/rubyist/aasm)

### 编辑..

我正在将 mongoid 与 mongodb 数据库一起使用

**什么宝石最适合此功能？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T18:50:01.250

**更新：**

查看最近的 RailsCast：[状态机之旅](http://railscasts.com/episodes/392-a-tour-of-state-machines)

**上一个答案：**

这两个 gem 运行良好，与 Mongoid 兼容，并且得到积极维护。

我过去使用过 AASM，它的使用时间更长，但是 state_machine gem 具有更多的功能和更多的选项。例如检查 state_machine 在基类上生成的方法（在他们的例子下面）；您可以定义更多细节，例如转换回调、条件转换；您可以进行路径分析，甚至还有一个 GraphViz 生成器来生成状态图的精美图片。

如果您只需要一个简单的状态机，则可以使用 AASM。如果您需要建模更多细节，例如条件转换或转换回调、路径分析、对状态进行大量查询，或者需要嵌套状态机，那么请使用 state_machine gem。

**参考：**

AASM：[https ://github.com/aasm/aasm](https://github.com/aasm/aasm)

state_machine：[https ://github.com/pluginaweek/state_machine](https://github.com/pluginaweek/state_machine)

**关于 state_machine 的附加信息：**

[http://www.pluginaweek.org/2009/03/08/state_machine-one-machine-to-rule-them-all/](http://www.pluginaweek.org/2009/03/08/state_machine-one-machine-to-rule-them-all/)

[http://rdoc.info:8080/github/pluginaweek/state_machine/master/StateMachine/Machine](http://rdoc.info:8080/github/pluginaweek/state_machine/master/StateMachine/Machine)

# c++ - 传递 std::list 作为函数的参数

> ID：12639569
> 
> 赞同：0
> 
> 时间：2012-09-28T11:57:10.457
> 
> 标签：c++, boost, std

我正在尝试将`boost::any`对象列表传递给函数。

这是我的尝试：

```
typedef std::list<boost::any> Any_List_Type;
typedef std::list<int> Int_List_Type;

void printAnyListSize(Any_List_Type anyListType)
{
   printf("Any list size(%d) \n", anyListType.size();
   return;
}

void showInstListSize(Int_List_Type intListType)
{
   printAnyListSize(intListType);  //compile error...
} 
```

由于 boost::any 允许在列表中传递任何类型，我不确定为什么会出现错误。

如何将类型`boost::any`转换为列表中的适当类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:04:50.960

存在错误是因为`std::list<int>`无法转换为`std::list<boost::any>`（或`std::list<T>`与任何其他`T`，例如`unsigned`）。

你可以手动转换

```
 printAnyListSize(Any_List_Type(intListType.begin(), intListType.end())); 
```

您要求的是协变列表类型。协变类型（类型构造函数）存在于某些语言中，例如 Scala；如果 a`CovT<X>`是协变的`X`并且`T`是 的子类型`U`（例如`int`是 的子类型`any`），则`Cov<T>`是 的子类型`Cov<U>`。这意味着在 Scala 中，可以使用类似于您的示例。

在 C++ 中，没有对协变类型的语言支持。某些类型（如`shared_ptr`）通过用户定义的转换（例如转换构造函数）来模拟协方差。然而，`std::list`不在其中。这就是您必须自己执行转换的原因。

# asp.net - 是否可以在源代码中使用 iframe 和 localhost 地址？

> ID：12639570
> 
> 赞同：13
> 
> 时间：2012-09-28T11:57:14.713
> 
> 标签：asp.net, html, browser

我的 HTML 标记非常简单

```
....
<iframe width="800" height="800" src="http://localhost:69345/Handler.ashx"/>
... 
```

但是这个页面被我用过的所有浏览器阻止了。我想知道这个问题有什么解决方法吗？当然，我完全理解，如果我的页面部署到生产环境中，不会有任何问题。但是，**如果 iframe 在本地被阻止，我该如何进行任何测试？**

谢谢先进

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T11:59:52.440

*不要使用绝对网址*

**使用相对**

```
....
<iframe width="800" height="800" src="Handler.ashx"/>
... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-05-21T17:09:15.147

当 Chrome 在 iframe 中显示以下文本时：

[![127.0 0.1 拒绝连接](../Images/2405e01bcfa16b54ee04a5e4a835b974.png)](https://i.stack.imgur.com/zaue4.png)

这是因为服务器[`X-Frame-Options`响应](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options)了`DENY`.

解决方案是更改服务器配置，以便删除此标头或将其设置为`SAMEORIGIN`.

例如，如果您使用的是 Django，您可以更改[`X_FRAME_OPTIONS`设置或使用](https://docs.djangoproject.com/en/3.0/ref/clickjacking/#setting-x-frame-options-for-all-responses)[`@xframe_options_sameorigin`或`@xframe_options_exempt`](https://docs.djangoproject.com/en/3.0/ref/clickjacking/#setting-x-frame-options-per-view)装饰您的视图。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-17T21:19:32.127

尝试使用您机器的实际 IP 地址（通常为 127.0.0.1）...

```
<iframe width="800" height="800" src="http://127.0.0.1:69345/Handler.ashx"/> 
```

不要忘记端口号！

PS：在 Mac OS 上，您可以运行类似`ifconfig | grep inet`或`ifconfig | grep 127`识别您的网络 IP 地址的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:02:01.350

你在这里有几个问题。首先是请求将在端口 69345 上提供服务（这看起来非常像调试器自动配置的端口）。该端口当前是否在服务请求？你能在没有 iframe 的情况下进入那个页面吗？当页面部署在生产环境中时，这个 url 绝对保证会中断，因为 localhost 总是解析为 127.0.0.1 相对于客户端，而不是服务器。您需要查看实际地址是什么或将需要是什么。正如一些发帖人在我键入此内容时已回答的那样，您的问题可能就像使用相对 url 一样简单。如果这不能解决您的问题，您将需要调查将为该处理程序提供服务的实际端口和服务器名称。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-28T11:58:48.690

只需尝试使用相对路径

```
<iframe width="800" height="800" src="Handler.ashx"/> 
```

# appharbor - AppHarbor 构建参数

> ID：12639572
> 
> 赞同：1
> 
> 时间：2012-09-28T11:57:20.190
> 
> 标签：appharbor

是否可以指定构建参数？

有环境选项，但不适用于构建。

将作为 /p:MyParameter=MyValue 放入命令行的内容

# linux - 获取在其他机器上运行的最后一个命令的 PID

> ID：12639575
> 
> 赞同：0
> 
> 时间：2012-09-28T11:57:36.513
> 
> 标签：linux, bash, pid, rsh

我正在使用以下代码在另一台机器上启动命令：

```
#!/bin/bash
/usr/bin/rsh -n $Host_Name "cat asdf.txt &" 
```

我正在尝试使用以下命令获取 cat 命令的 PID：

```
/usr/bin/rsh -n $Host_Name pid="$!" 
```

但是当我回显 $pid 时，它只是空白。我做错了什么？有没有更简单的方法来获取在另一台机器上执行的最后一个命令的 PID？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:55:12.790

你只能得到$！您在其中启动命令的 shell 中的后台命令。如果您的命令没有向 stderr 输出任何内容，这可能有效：

```
/usr/bin/rsh -n $Host_Name "cat asdf.txt & echo $! >&2" 2> pidfile 
```

启动命令的 pid 然后将本地存储在“pidfile”中。

只是一个旁注：我永远不会使用 rsh。它本质上是不安全的。我会改用 ssh ;)

# c++ - C++11 lambda 返回 lambda

> ID：12639578
> 
> 赞同：25
> 
> 时间：2012-09-28T11:58:02.210
> 
> 标签：c++, visual-c++, lambda, c++11, visual-studio-2012

这段代码对于 JS 开发者来说并不陌生

```
function get_counter()
{
    return (
        function() {
            var c = 0;
            return function() { return ++c; };
        })();
} 
```

它基本上创建了一个创建不同枚举数的。所以我想知道是否可以在 C++11 中使用新的 lambda 语义来完成同样的事情？我最终写了这段 C++ 不幸的是不能编译！

```
int main()
{
    int c;
    auto a = [](){
        int c = 0;
        return [&](){
            cout << c++;
        };
    };
    return 0;
} 
```

所以我想知道是否有一种解决方法来编译它，如果有编译器如何使这段代码正确运行？我的意思是它必须创建单独的枚举器，但它也应该收集垃圾（未使用的 c 变量）。

顺便说一句，我使用的是 VS2012 编译器，它会产生这个错误：

```
Error   2   error C2440: 'return' : cannot convert from 'main::<lambda_10d109c73135f5c106ecbfa8ff6f4b6b>::()::<lambda_019decbc8d6cd29488ffec96883efe2a>' to 'void (__cdecl *)(void)'    c:\users\ali\documents\visual studio 2012\projects\test\test\main.cpp   25  1   Test 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-28T12:14:08.013

您的代码有一个错误，它包含一个悬空引用；该`c`引用将引用外部 lambda 中的局部变量，该变量将在外部 lambda 返回时被销毁。

您应该使用`mutable`按值 lambda 捕获来编写它：

```
auto a = []() {
    int c = 0;
    return [=]() mutable {
        cout << c++;
    };
}; 
```

这依赖于后标准扩展，以允许在返回类型推导 lambda 中使用多个语句；[如果它包含多个语句，是否有理由不允许 lambdas 推断返回类型？](https://stackoverflow.com/questions/6240894/is-there-a-reason-on-not-allowing-lambdas-to-deduce-the-return-type-if-it-contai)修复它的最简单方法是提供一个参数，以便 lambda 仅包含一条语句：

```
auto a = [](int c) {
    return [=]() mutable {
        cout << c++;
    };
}; 
```

不幸的是，lambdas 中不允许使用默认参数，因此您必须将其称为`a(0)`. 或者以可读性为代价，您可以使用嵌套的 lambda 调用：

```
auto a = []() {
    return ([](int c) {
        return [=]() mutable {
            cout << c++;
        };
    })(0);
}; 
```

它的工作方式是，当`a`执行内部 lambda 时，将所有引用的变量复制到其闭包类型的实例中，这将类似于：

```
struct inner_lambda {
    int c;
    void operator()() { cout << c++; }
}; 
```

然后闭包类型的实例由外部 lambda 返回，并且可以被调用并在调用时修改其副本`c`。

总体而言，您的（固定）代码被翻译为：

```
struct outer_lambda {
    // no closure
    struct inner_lambda {
        int c;    // by-value capture
        // non-const because "mutable"
        void operator()() { cout << c++; }
    }
    // const because non-"mutable"
    inner_lambda operator()(int c) const {
        return inner_lambda{c};
    }
}; 
```

如果您`c`作为按引用捕获离开，这将是：

```
struct outer_lambda {
    // no closure
    struct inner_lambda {
        int &c;    // by-reference capture
        void operator()() const { cout << c++; } // const, but can modify c
    }
    inner_lambda operator()(int c) const {
        return inner_lambda{c};
    }
}; 
```

这`inner_lambda::c`是对局部参数变量的悬空引用`c`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-28T12:11:03.817

一旦变量不再存在，通过引用捕获的 lambda 不能再使用捕获的变量，这是 C++ 的一个自然限制。所以即使你让它编译，你也不能从它出现的函数中返回这个 lambda（这也恰好是一个 lambda，但这无关紧要），因为自动变量`c`在返回时被破坏。

我认为您需要的代码是：

```
return [=]() mutable {
    cout << c++;
}; 
```

我没有测试过，也不知道哪些编译器版本支持它，但这是按值捕获，`mutable`也就是说捕获的值可以由 lambda 修改。

因此，每次调用时，`a`您都会得到一个不同的计数器，其计数从 0 开始。每次调用该计数器时，它都会增加自己的`c`. 据我了解Javascript（不远），这就是你想要的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-28T12:19:43.220

我认为问题在于编译器无法推断出外部 lambda 的返回类型（分配给`a`），因为它包含的不仅仅是一个简单的单行返回。但不幸的是，也没有办法明确说明内部 lambda 的类型。因此，您将不得不返回 a `std::function`，这会带来一些额外的开销：

```
int main()
{
    int c;
    auto a = []() -> std::function<void()> {
        int c = 0;
        return [=]() mutable {
            std::cout << c++;
        };
    };
    return 0;
} 
```

当然，您必须按价值捕获，就像*史蒂夫*在他的回答中已经解释的那样。

**编辑：**至于为什么确切的错误是它不能将返回的内部 lambda 转换为`void(*)()`（指向`void()`函数的指针），我只有一些猜测，因为我对他们的 lambda 实现没有太多了解，我不确定是不是完全稳定或符合标准。

但我认为 VC 至少尝试推断出内部 lambda 的返回类型并意识到它返回一个可调用对象。但是后来它以某种方式错误地假设这个内部 lambda 没有捕获（或者他们无法确定内部 lambda 的类型），所以他们只是让外部 lambda 返回一个简单的函数指针，如果内部 lambda 不会，这确实可以工作捕捉任何东西。

**编辑：**就像*ecatmur*在他的评论中所说的那样，`std::function`在制作实际`get_counter`函数（而不是 lambda）时甚至需要返回 a ，因为普通函数没有任何自动返回类型推导。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-28T12:18:23.467

您应该知道的第一件事是，即使您获得了要编译的语法，语义也是不同的。在按引用捕获的 C++ lambda 中，仅捕获一个普通引用，这不会延长该引用绑定的对象的生命周期。也就是说，生命周期`c`绑定到封闭 lambda 的生命周期：

```
int main()
{
    int c;
    auto a = [](){
        int c = 0;
        return [&](){
            return ++c;
        };
    }();                     // Note: added () as in the JS case
    std::cout << a() << a();
    return 0;
} 
```

添加缺失`()`以便评估外部 lambda 后，您的问题是`c`返回的 lambda 中通过引用保存的 lambda 在评估完整表达式后不再有效。

话虽如此，以额外的动态分配为代价（这相当于 JS 的情况）来完成这项工作并不太复杂：

```
int main()
{
    int c;
    auto a = [](){
        std::shared_ptr<int> c = std::make_shared<int>(0);
        return [=](){
            return ++(*c);
        };
    }();                     // Note: added () as in the JS case
    std::cout << a() << a();
    return 0;
} 
```

这*应该*可以按预期编译和工作。每当内部 lambda 被释放（`a`超出范围）时，计数器将从内存中释放。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-23T18:05:21.247

这适用于 g++ 4.7

```
#include <iostream>
#include <functional>                                                                           

std::function<int()> make_counter() {
    return []()->std::function<int()> {
        int c=0;
        return [=]() mutable ->int {
            return  c++ ;
        };  
    }();
}   

int main(int argc, char * argv[]) {
    int i = 1;
    auto count1= make_counter();
    auto count2= make_counter();

    std::cout << "count1=" << count1() << std::endl;
    std::cout << "count1=" << count1() << std::endl;
    std::cout << "count2=" << count2() << std::endl;
    std::cout << "count1=" << count1() << std::endl;
    std::cout << "count2=" << count2() << std::endl;
    return 0;
} 
```

Valgrind 完全没有抱怨这一点。每次我调用 make_counter 时，valgrind 都会报告一个额外的分配和空闲，所以我假设 lambda 元编程代码正在为变量 c 插入内存​​分配代码（我想我可以检查调试器）。我想知道这是否符合 Cxx11 或只是 g++ 特定的。Clang 3.0 不会编译它，因为它没有 std::function （也许我可以尝试使用 boost 函数）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-14T20:57:06.703

我知道这已经很晚了，但是在 C++14 及更高版本中，您现在可以初始化 lambda 捕获，从而获得更简单的代码：

```
auto a = []() {
    return [c=0]() mutable {
        cout << c++;
    };
}; 
```

# facebook - Facebook 应用程序图形 api 提要返回空数据集

> ID：12639580
> 
> 赞同：-2
> 
> 时间：2012-09-28T11:58:11.003
> 
> 标签：facebook, facebook-graph-api, feed

之前来自 FB 应用程序[https://graph.facebook.com/APP_ID/feed?access_token=ACCESS_TOKEN](https://graph.facebook.com/APP_ID/feed?access_token=ACCESS_TOKEN)的工作数据已停止工作。响应现在是一个空数据集：{“数据”：[

] } 自应用程序方面以来没有任何变化。在此之前，应用墙中至少有 50 个帖子。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:43:48.127

> 在此之前，应用墙中至少有 50 个帖子。

就其本身而言，不再有“应用程序墙”之类的东西。

现在，要为应用程序创建一个页面，您必须特别创建一个页面——应用程序不再自动拥有相应的页面。

有一个过渡期，您可以将旧的应用程序页面转换为“正常”页面并将您的应用程序与之链接——但我认为这不再可能了。

那么，您有链接到您的应用程序的页面吗？（您的应用程序的 ID 是什么，以便我们可以在 API 上自行检查？）

# php - PHP readfile() 返回损坏的数据

> ID：12639582
> 
> 赞同：0
> 
> 时间：2012-09-28T11:58:16.600
> 
> 标签：php, cakephp, header, readfile

在我的函数中，我保存了从 base64 字符串解码的图像：

```
function saveImage(){
    //magic...
    define('UPLOAD_DIR', '../webroot/img/');
    $base64string = str_replace('data:image/png;base64,', '', $base64string);
    $base64string = str_replace(' ', '+', $base64string);
    $data = base64_decode($base64string);
    $id = uniqid();
    $file = UPLOAD_DIR.$id.'.png';
    $success = file_put_contents($file, $data);
} 
```

上述功能正常工作，图像保存在指定文件夹中且未损坏。

在下一个函数中，我现在尝试将图像强制下载给用户：

```
function getChart($uniqid= null){
    if($uniqid){
        $this->layout = null;
        header("Content-type: image/png");
        header("Content-Disposition:attachment;filename='".$uniqid.".png'");
        readfile('../webroot/img/'.$uniqid.'.png');
        exit;
    } else exit;
} 
```

从服务器下载的图像已损坏，无法显示。在文本编辑器中打开下载的文件后，我注意到在最顶部添加了一个换行符。删除字符并保存文件后，它会正确打开并正确显示。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:03:30.280

```
header("Content-length: $file_size") 
```

此标头告诉浏览器文件有多大。某些浏览器需要它才能正确下载文件。无论如何，这是一个很好的方式来告诉文件有多大。这样，任何下载文件的人都可以预测下载需要多长时间。

```
header("Content-type: $file_type") 
```

这个标头告诉浏览器它试图下载什么样的文件。

```
header("Content-Disposition: attachment; filename=$file_name"); 
```

这告诉浏览器以指定的名称保存这个下载的文件。如果您不发送此标头，浏览器将尝试使用脚本名称保存文件。

但是您需要在第一个出口的正上方`flush();`或在您的情况下刷新缓冲区；`ob_flush();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:07:20.333

在您实际打开下载的文件之前，您所描述的内容可能会隐藏多个问题。

而是使您的代码更健壮并检查先决条件，如果标头已经发送并清理任何可能的现有输出缓冲区并在不可能的情况下给出错误：

```
function getChart ($uniqid = null) {

    if (!$uniqid) exit;

    $this->layout = null;

    if (headers_sent()) throw new Exception('Headers sent.');
    while (ob_get_level() && ob_end_clean());
    if (ob_get_level()) throw new Exception('Buffering is still active.');

    header("Content-type: image/png");
    header("Content-Disposition:attachment;filename='".$uniqid.".png'");
    readfile('../webroot/img/'.$uniqid.'.png');

    exit;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:03:49.030

在调用之前检查您是否正在输出某些内容`readfile`：

```
// add ob_start() at the very top of your script
function getChart($uniqid= null){
    echo strlen(ob_get_clean()); die(); // if it's not 0 then you are definetly echoing something

    if($uniqid){
        $this->layout = null;
        header("Content-type: image/png");
        header("Content-Disposition:attachment;filename='".$uniqid.".png'");
        readfile('../webroot/img/'.$uniqid.'.png');
        exit;
    } else exit;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:01:55.787

编辑（强制下载）：

```
function getChart($uniqid= null){
    if($uniqid){

        $image = $uniqid;

        header("Cache-Control: public");
        header("Content-Description: File Transfer");
        header("Content-Disposition: attachment; filename=" . $image);
        header("Content-Type: image/jpg");
        header("Content-Transfer-Encoding: binary");

        readfile($image);

    } else exit;
}

getChart("060620121945.jpg"); 
```

试试这个（只是为了渲染图像）：

```
function getChart($uniqid= null){
    if($uniqid){

        $mime_type = "image/png";
        $content = file_get_contents('../webroot/img/'.$uniqid.'.png');
        $base64   = base64_encode($content); 
        return ('data:' . $mime_type . ';base64,' . $base64);

    } else exit;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-14T16:23:07.947

我曾多次遇到这个问题。这是我使用的解决方案：

结果几乎总是我忘记关闭文件中的`unicode BOM`编码，`download.php`这会在下载文件的前面添加一些内容，因此会损坏它。

所以解决办法**是****关掉`unicode BOM`。`download.php`**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-16T22:16:08.777

只需使用 ob_clean(); 在 readfile() 之前

# javascript - 生成基于 Web 的 GUI 以拖放组件并连接它们

> ID：12639583
> 
> 赞同：5
> 
> 时间：2012-09-28T11:58:18.847
> 
> 标签：javascript, user-interface, drag-and-drop

![在此处输入图像描述](../Images/117235dd046a501af6159908956370b1.png)我们正在尝试将桌面应用程序转换为基于 Web 的应用程序。我们需要创建一个 GUI，我们可以在其中从左侧菜单栏中拖放组件并连接它们。以上来自桌面应用程序的示例输出显示了我们正在查看的 GUI 类型。所有这些连接的组件将创建一个工作流。在这些工作流程中，我们可以将少数组件的终端连接到其他组件（并非每个终端都可以连接到其他所有终端）。

我是为基于 Web 的应用程序开发 GUI 的新手。我们计划使用 javascript 来开发这个 GUI。从谷歌我遇到了图书馆“wireit”。

有人可以阐明可以使用javascript中的哪些库来实现这一目标。任何其他有助于我们实现这一目标的基于 Web 的架构/语言。您的回复将极大地帮助我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:01:12.870

jQuery UI 有一个很好的 Draggable API：http: [//jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

# java - java AES-128-CBC解密

> ID：12639588
> 
> 赞同：0
> 
> 时间：2012-09-28T11:58:41.880
> 
> 标签：java, aes

鉴于我知道 aes-128-cbc 用于生成密文，没有使用加盐并且 IV 都是零，我的目标是编写一个程序来找出用于加密纯文本的密钥（我还得到了一个可能使用的键的字典）。

所以我实现了以下

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStream;
import java.security.InvalidKeyException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.security.Provider;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;

import javax.crypto.NoSuchPaddingException;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

import org.bouncycastle.jce.provider.BouncyCastleProvider;

public class myClassName123 {

/**
 * @param args
 * @throws Exception 
 */
public static void main(String[] args) throws Exception {
    // TODO Auto-generated method stub

    try {
        BufferedReader in = new BufferedReader(new FileReader("/Users/username/Documents/f12/words.txt"));
        String str;
        while ((str = in.readLine()) != null && str.getBytes().length<16) { //clue given in spec

                System.out.println(decrypt(getBytesFromFile(new File("/Users/username/Documents/f21/some.aes-128-cbc")),str));

        }
        in.close();
    } catch (IOException e) {
    }
}

/**
* This method decrypts the input byte [] using AES Key byte [] 
* 
* @param byte []
* @param byte [] 
* @return byte []
* @throws Exception
*/
public static byte[] decrypt(byte[] text, String key) throws Exception {
    Cipher cipher;
    byte[] bytes = null;

    Provider provider = new BouncyCastleProvider();
    MessageDigest digester = MessageDigest.getInstance("SHA-256", provider);
    digester.update(key.getBytes("UTF-8"));
    //byte[] key = digester.digest();
    SecretKeySpec spec = new SecretKeySpec(digester.digest(), "AES");

    //SecretKeySpec spec = new SecretKeySpec(toByteArray(key.toCharArray()), "AES");
     byte[] iv = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };
        IvParameterSpec ivspec = new IvParameterSpec(iv);
    try {
            // Instantiate the cipher
            cipher = Cipher.getInstance("AES/CBC/NoPadding");
            cipher.init(Cipher.DECRYPT_MODE, spec, ivspec);

             bytes = cipher.doFinal(text);

             String value = new String(bytes, "UTF-8");

                System.out.println("DEBUG HERE: "+value);

    }catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        //  throw new Exception(e);
    } catch (NoSuchPaddingException e) {
        e.printStackTrace();
    //  throw new Exception(e);
    } catch (InvalidKeyException e) {
        e.printStackTrace();
        //throw new Exception(e);
    } catch (IllegalBlockSizeException e) {
        e.printStackTrace();
        //throw new Exception(e);
    } catch (BadPaddingException e) {
        e.printStackTrace();
        //throw new Exception(e);
    }
    return bytes;
}

// Returns the contents of the file in a byte array.
public static byte[] getBytesFromFile(File file) throws IOException {
    InputStream is = new FileInputStream(file);

    // Get the size of the file
    long length = file.length();

    // Create the byte array to hold the data
    byte[] bytes = new byte[(int)length];

    // Read in the bytes
    int offset = 0;
    int numRead = 0;
    while (offset < bytes.length
           && (numRead=is.read(bytes, offset, bytes.length-offset)) >= 0) {
        offset += numRead;
    }

    // Ensure all the bytes have been read in
    if (offset < bytes.length) {
        throw new IOException("Could not completely read file "+file.getName());
    }

    // Close the input stream and return bytes
    is.close();
    return bytes;
}   
} 
```

但是，当我运行它时，我得到以下信息：

在这里调试：（M��1�����-��e�}�p����+�� [B@4ed1e89e

我想我没有正确转换为字符串，但我目前坚持这一点。非常感谢任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:00:42.790

如果问题是字符没有正确显示，可能是因为解密的结果包含不可打印的字符。

即使原始文本是纯文本，这种行为也是有意义的，因为您正在尝试使用不同的键。如果你选错了，你很可能会得到这样的结果。

您还可以将字符串显示为十六进制（http://stackoverflow.com/questions/923863/converting-a-string-to-hexadecimal-in-java），这可能使其更具可读性。

希望能帮助到你

# seo - URL中的阿拉伯字符？对SEO有好处吗？

> ID：12639589
> 
> 赞同：2
> 
> 时间：2012-09-28T11:58:42.350
> 
> 标签：seo, search-engine

我知道在 URL 中包含搜索短语有助于提高网站在搜索引擎上的排名。但是像阿拉伯语或中文这样的非拉丁字符是这样的吗？知道将在某些浏览器中编码的情况下，将阿拉伯语网站的 URL 保留为阿拉伯语更好吗？还是转成英文？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:58:10.140

与 URL 本身相比，您网站的内容对您的 SEO 的影响要大得多。这并不是说一个好的、对 SEO 友好的 URL 不重要（因为它很重要），但网站内容的影响更大。

此外，您的内容应该针对您的目标受众，使用受众可能使用的短语和搜索词来查找您的网站。

# spring-mvc - 用于多个控制器的 SpringFramework 和 Tiles 设计模式

> ID：12639592
> 
> 赞同：0
> 
> 时间：2012-09-28T11:58:54.527
> 
> 标签：spring-mvc, tiles2, apache-tiles

我是 Tiles 的新手，我喜欢它。

我的问题是，我在 SpringFramework 的模板定义中有一个 head 、 body 和 footer tile。我想在 head tile 中显示一些用户信息，并在页脚中显示最后登录 ip 以及一些动态数据。我的意思是我可以做到这一点，如果我 assagn(addAttribute) 使用此模板的每个控制器中的每个变量。

有没有什么方法可以让header/footer tile从自己的spring Controller中询问数据？或者如何在不重复每个控制器中的源代码的情况下将信息（变量值）添加到页眉和页脚图块。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:08:42.227

可能有几种方法可以实现这一点，但一种方法可能是通过过滤器。

在您的 web.xml 中，您将定义一个新过滤器并将其映射到所有 url，即

```
<filter>
  <filter-name>myFilter</filter-name>
  <filter-class>path.to.my.filter.MyFilter</filter-class>
</filter>

<filter-mapping>
  <filter-name>myFilter</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

然后，您将在`<filter-class>`元素中指定的路径（在本例中为 path.to.my.filter.MyFilter）创建一个类并创建实际的过滤器。

至于过滤器的实现，也有几种方法，我建议使用 Spring 实现，因为它更容易集成。下面是我用于 Flash Map 实现的另一个堆栈溢出帖子的示例。它使用了一个OncePerRequestFilter，所以每个请求都会调用这个过滤器。如果您希望使用此过滤器类型，我建议将这些值存储在 Session 中，以便它们只执行一次，然后在每个请求中检索，从而节省一些处理时间。

[https://github.com/donkeystalk/floor41/blob/master/floor-41/src/main/java/octane/floor/filters/FlashMapFilter.java](https://github.com/donkeystalk/floor41/blob/master/floor-41/src/main/java/octane/floor/filters/FlashMapFilter.java)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T14:28:30.960

Spring Interceptor solve this (example: [http://dzone.com/tutorials/java/spring/spring-interceptor.html](http://dzone.com/tutorials/java/spring/spring-interceptor.html))

# android - Android 的 droidtext 商业用途从我的应用程序生成 PDF 文档

> ID：12639593
> 
> 赞同：0
> 
> 时间：2012-09-28T11:58:56.610
> 
> 标签：android, pdf, android-droidtext

我有一个 Android 应用程序，当前在导出信息时会生成一个 HTML 文件作为输出。我也想为用户提供导出到 PDF 文档的选项。我联系了 iText 的好人，但他们想要的超出了我的承受能力。

我读到了 droidtext 项目以及它可以用于商业应用程序的事实，前提是满足某些要求。有人可以解释我应该怎么做才能在我的应用程序中使用 droidtext 以便我可以在 Google Play 上销售吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:25:57.603

droidtext 项目网站上已经提供了 LGPL 合规性的详细步骤。之前错过了。这是链接...

[http://code.google.com/p/droidtext/wiki/LGPLCompliance](http://code.google.com/p/droidtext/wiki/LGPLCompliance)

# sql-server - 将 T-SQL 转换为 ANSI-SQL

> ID：12639594
> 
> 赞同：-3
> 
> 时间：2012-09-28T11:59:02.200
> 
> 标签：sql-server, tsql, ansi

我想将我的存储过程从 T-SQL 转换为 ANSI-SQL。是否有任何工具或清单可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:03:13.500

您可以使用该[`SET FIPS_FLAGGER`](http://msdn.microsoft.com/en-us/library/ms189781.aspx)选项来帮助查找您正在使用的非标准构造。

例子

```
SET FIPS_FLAGGER 'INTERMEDIATE';

SELECT TOP 10 *
FROM master..spt_values;

SET FIPS_FLAGGER OFF; 
```

输出

```
FIPS Warning: Line 1 has the non-ANSI statement 'SET'.
FIPS Warning: Line 3 has the non-ANSI clause 'TOP'. 
```

还有一些[针对该标准的各种版本的](http://developer.mimer.com/validator/index.htm)在线验证器。

# android - 将 ReplayGain 值转换为音量调整

> ID：12639596
> 
> 赞同：5
> 
> 时间：2012-09-28T11:59:19.190
> 
> 标签：android, math, logarithm, acoustics, replaygain

我正在尝试在股票 Android/AOSP 音乐播放器应用程序中实现重播增益（即响应音乐文件中的重播增益标签）。这只是一个个人项目，但我可以将其作为补丁提供，或者制作我自己的库或播放器。我只在第一个实例中查看 Track Gain。我的问题的性质可能归结于我数学不及格的事实；）

任务是做两件事：A）在播放开始之前，将音量钳制到设备最大-14dB（或者更多，一些消息来源建议-23dB）。B) 在每首曲目开始播放之前，阅读其标签并按该数 dB 进行调整。

我看到在 Android 中调整播放音量[也涉及对数缩放](https://stackoverflow.com/questions/5215459/android-mediaplayer-setvolume-function)，但由于我是对数的新手，我不确定这是否会使事情变得更容易或两倍（10 倍？）。

谁能给我关于如何将分贝值转换为 MediaPlayer.setVolume() 的可用参数的线索？感谢您的任何提示。

编辑：我有一些（可能是不稳定的）断言可能需要建立联系，但如果其中任何一个是轻率的，我非常需要被告知。

1.  ReplayGain 假设目标电平为 -14 dBFS == 89dB SPL。因此，我假装这些比例上下都是等价的（我知道这是不准确的，但*有多*不准确？）
2.  我将 MediaPlayer.setVolume(1.0f,1.0f) （最大音量）视为 0dBFS。
3.  基于 (1)，我将其等同于 89+14 = 103dBSPL。
4.  我将 MediaPlayer.setVolume(0.0f,0.0f) (mute) 视为 0dBSPL，因此我有一个 0-103 的抽象线性音量刻度。

如果这些保持不变，我会将 -1.3 的 Track Gain 值转换为 MediaPlayer.setVolume() 的适当参数，如下所示：

1.  目标响度 = 89 - 1.3 = 87.7
2.  浮动 newVol = 1.0f - (Math.log(103 - 87.7 / Math.log(103)) = 0.41143207395167

这是在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-28T02:01:10.250

*   dBFS 代表 deciBel Full Sound，因此将其分配给最大级别是完全明智的。
*   分贝是表示（对数）两个值之比的单位。当使用 dBFS 与 dBSPL 时，您所说的只是您使用的参考声压。
    *   -14 dBFS 意味着您使用的声压比您的参考值小 10^(-14/20) 倍（即最大可能）
    *   89 dBSPL 表示您使用的值比“空气中常用的参考声压 [...] p0 = 20 μPa (RMS) 或 0.0002 dynes/cm2,[5] 大 10^(89/20) 倍”，即通常被认为是人类听觉的阈值（大约是蚊子飞出 3 m 的声音）。” （来自维基百科）。

所以一旦你在两个尺度之间找到了一个共同点，它们就会进化成相同的。您基本上定义了两个音阶的参考声压之间的比率，即 -14dbFS = 89 dBSPL。

因为乘法尺度很麻烦，我们取这些乘法值的对数，然后除以 10，得到称为分贝的加法值（额外的 2 因子来自我们比较声压的平方，而不是声压的事实他们自己）。

现在最后，如果您认为您有一个 103 dB 的范围，从 0.0f 到 1.0f 以对数方式映射（就像您的 dB 一样）（这是 Android 中播放音量的接缝），那么 -14dBFS 是（ 103 - 14)/103。

仅当您想从中得出线性比例时，您才需要进入对数的数学：线性比例上最大声音的 80% 将是输出比例上的 1-log(20)/log(100)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-22T22:47:03.990

我正在研究同样的问题，我想我明白了。

首先要意识到的是，无法通过调整播放器的音量来放大音频文件。你根本做不到。音量从 0% 变为 100%，仅此而已。

你实际上做的是衰减一切。为此，您需要决定音量应为 0dB。也就是说，没有应用衰减或放大的音频文件的音量应该是多少。

假设您希望 0dB 为 60%。这将是你的“基地”。

知道了`vol% = 100 * 10 ^ (db / 20) - base`，我们就可以计算出我们的公式来获得给定 dB 值的音量：

```
vol% = 100 * 10 ^ (REPLAYGAIN_TRACK_GAIN / 20) - 60 
```

您可能还想知道您的 dB 范围是多少。我们可以通过从上面的公式中分离`db`变量来做到这一点：

```
db = 20 * Log(vol% + base) / (Log(2) + Log(5)) - 40 
```

将音量和基础值代入前一个公式，我们将得到 0% 音量（静音）对应于 -4.44dB，100%（最大音量）对应于 +4.02dB。

这很有帮助，因为您需要知道公式能够处理的 dB 值。出于同样的原因，您将需要调整`vol%`公式，使其“剪裁”超出您支持范围的 dB 值：

```
vol% = Min(100, Max(0, 100 * 10 ^ (REPLAYGAIN_TRACK_GAIN / 20) - 60) 
```

# javascript - 如何使用nodejs来分隔文件的内容，用双换行符分隔？

> ID：12639598
> 
> 赞同：0
> 
> 时间：2012-09-28T11:59:31.950
> 
> 标签：javascript, node.js

我想要做什么： 1\. 读取文件 2\. 拆分读取的文件。

这是一个示例输入文件 -

```
#This is a comment

Line one of first block,
Line two of first block,
Line three of first block.

Line one of second block.
Line two of second block
line three of second block.

Line one of third block. 
```

每个块由换行符分隔（无法控制它们是否是 windows/unix）。如何使用nodejs分别读取每个块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:07:37.657

我建议你使用 split() 函数。

```
var blocks = str.split([separator],[limit]); 
```

在此之后，您可以尝试像这样迭代数组

```
blocks.each(function(err, block) {
    console.log(block);
}); 
```

但是，您应该检查指定什么作为分隔符 - Windows 或 UNIX（CRLF 或只是 LF）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:08:21.363

您可以使用 JavaScript 拆分来做到这一点。[jsfiddle](http://jsfiddle.net/Qrc3R/2/)中的相同代码。即使换行符之间有空格也可以工作。

```
 // assuming content is your text.
    var contentArray = content.split(/\n\s{0,}\n/); 
```

# android - 如何在 Android 设备中获取 GSM 的电话号码

> ID：12639599
> 
> 赞同：0
> 
> 时间：2012-09-28T11:59:37.807
> 
> 标签：android, android-emulator

我想用这样的代码从android设备显示自己的电话号码

```
TelephonyManager tMgr =(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);    
         mPhoneNumber = tMgr.getLine1Number(); 
```

当我使用 CDMA 时它的工作和显示电话号码，但是如果我使用 GSM，它的号码没有显示，并且如果我检查设置 - 关于电话状态 - 我的电话号码在我使用 GSM 时是否显示“未知”，

你能给我解决方案来显示来自 GSM 的 android 设备的电话号码吗？拜托，谢谢：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:09:27.257

由于电话号码并未物理存储在所有 SIM 卡上，或从网络广播到电话，因此无法保证解决此问题。在一些需要物理地址验证的国家尤其如此，之后才进行号码分配。电话号码分配发生在网络上 - 并且可以在不更改 SIM 卡或设备的情况下进行更改（例如，这是支持移植的方式）。我知道这很痛苦，但很可能最好的解决方案就是要求用户输入他/她的电话号码一次并存储它。

# android - 如何在 virtualbox 上更改 Android Emulator 的 IP 地址？

> ID：12639603
> 
> 赞同：0
> 
> 时间：2012-09-28T11:59:53.683
> 
> 标签：android, android-emulator, virtualbox

如何在 virtualbox 上更改 Android Emulator 的 IP 地址？我无法获得模拟器的IP。我输入了这个代码： ![在此处输入图像描述](../Images/e13528d27277ad8b122298901cf85ef3.png)

但是没有模拟器的ip？

我希望有人能帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:03:37.387

> 无法更改模拟器的 IP 地址。每个模拟器都在一个专用网络中。ip 地址 10.0.2.15 只是私有网络，主机用一个不同的端口来识别每个模拟器。
> 
> 例如，您打开 2 模拟器，然后主机将连接到 5554 端口的模拟器 1，用 5555 端口连接到模拟器 2。这 2 台模拟器的 IP 地址仍然是 10.0.2.15

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T17:37:58.287

您要做的是将您的网络设置为桥接适配器。这应该为您的模拟器提供来自路由器的 dhcp 地址，因此它将与您的开发盒存在于同一网络上。

# iphone - ResignFirstResponder 不工作

> ID：12639607
> 
> 赞同：12
> 
> 时间：2012-09-28T12:00:25.543
> 
> 标签：iphone, objective-c, resignfirstresponder

```
-(IBAction)settings:(id)sender
{
    [mileagerate resignFirstResponder];

    [mainView bringSubviewToFront:mileageView];
    mainView.hidden=TRUE;

    [UIView beginAnimations:@"Settings" context:nil];
    [UIView setAnimationDuration:1.0];
    [mainView setFrame:CGRectMake(0, 0, 320, 460)];
    [UIView commitAnimations];
    mileagerate.text = [[NSUserDefaults standardUserDefaults] valueForKey:@"savedstring"];

    mileageView.hidden=FALSE;
} 
```

我在我的应用程序的各个地方使用了辞职第一响应者。但是当我单独点击这个按钮时，键盘并没有消失。如果我点击键盘上的返回键，输入的值就会消失。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-28T12:08:54.907

如果您不知道`textfield`要辞职，请在您的方法中使用以下代码行：

## 迅速

```
self.view.endEditing(true)//resign current keyboard 
```

## Objective-C

```
[self.view endEditing:YES]; //resign current keyboard 
```

**编辑**：**注意**：它将`resign keybord`来自您当前的`view`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T12:22:24.250

check your .h file if you have put the **TextFieldDelegate** over there. . Some time if we not declare its delegates function doesn't work properly.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T14:49:44.657

您必须首先使用 `[UIView setAnimationDidStopSelector:@selector(yourMethod)];`

然后在“ `YourMethod`”中退出你的键盘。

```
- (void)yourMethod
{
   [mileagerate resignFirstResponder];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T12:23:32.003

我认为当你设置文本时， textField mileagerate 再次成为第一响应者，所以在方法的最后使用这个语句

```
[mileagerate resignFirstResponder]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-16T21:19:44.963

在 Swift 2 中，您可以使用以下 3 种不同的类型来关闭键盘（假设有一个文本字段和一个按钮

```
 import UIKit

    class ViewController: UIViewController, UITextFieldDelegate {

        @IBOutlet var userInputField: UITextField!

        override func viewDidLoad() {
            super.viewDidLoad()
            //Important if you are using textfieldDelegate
            self.userInputField.delegate = self
        }

        @IBAction func findAgeBtn(sender: UIButton) {

//1\. keyboard to disappear when button clicked
            dimissKeyboard()

        }

//2\. keyboard to disappear when touched anywhere on the view

    override func touchesBegan(touches: Set<UITouch>, withEvent event: UIEvent?) {
        self.view.endEditing(true)

    }

//Function for option 1
        func dimissKeyboard(){
            self.view.endEditing(true)
}

//3\. keyboard to disappear when clicked on the Return key. Don't forget to set the delegate to self
    func textFieldShouldReturn(textField: UITextField) -> Bool {
                    textField.resignFirstResponder()
                return true
            }
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T12:03:36.560

确保您已连接返回键以退出第一个响应者

在连接选项卡上将连接更改为“退出时结束”并连接到视图控制器（橙色球），将键盘返回键更改为完成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-28T12:30:41.397

尝试这个：

```
if([mileagerate isFirstResponder])
        [mileagerate resignFirstResponder]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-31T09:36:10.670

1.检查 UITextFieldDelegate ，

```
class YourClass : UIViewController,UITextFieldDelegate{ 
```

2.然后覆盖功能“应该结束编辑”返回到是

```
 func textFieldShouldEndEditing(_ textField: UITextField) -> Bool {  
    return true
} 
```

# jsf - 如何将参数从模板客户端传递到主模板，然后在复合属性中使用它？

> ID：12639608
> 
> 赞同：4
> 
> 时间：2012-09-28T12:00:27.357
> 
> 标签：jsf, parameters, facelets

我有一个复合组件（导航栏），它采用一个名为“activeIndex”的变量来确定哪个选项卡处于活动状态（显然）。导航栏是一个复合组件，其属性如下：

```
<!-- INTERFACE -->
<cc:interface>
    <cc:attribute name="tab"/>
</cc:interface>

<!-- IMPLEMENTATION -->
<cc:implementation>

    <pou:tabMenu activeIndex="#{cc.attrs.tab}" 
                 styleClass="margin-top-52">  

        <pou:menuitem value="Home" url="#" />  
        <pou:menuitem value="About" url="#"/> 
        <pou:menuitem value="iConsult" url="#"/> 
        <pou:menuitem value="Contact" url="#"/>  

    </pou:tabMenu> 

</cc:implementation> 
```

所以从这里我可以使用以下方法传入活动选项卡：

```
<!-- Composite Navigation -->
<ez:anonymous-navigation tab="2"/> 
```

问题是上面的代码放在一个template.xhtml中，我不想在`2`模板中指定tab值。相反，我需要从实现模板的页面传回这个值，然后将模板传递给上面的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T12:07:25.640

使用[`<ui:param>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/param.html). 这是一个启动示例：

`client.xhtml`：

```
<ui:composition template="/WEB-INF/template.xhtml"
    xmlns="..."
>
    <ui:param name="tab" value="2" />
    ...
</ui:composition> 
```

`/WEB-INF/template.xhtml`：

```
<ez:anonymous-navigation tab="#{tab}"/> 
```

# bash - cygwin ssh 在退出时给出“被信号 1 杀死”

> ID：12639615
> 
> 赞同：23
> 
> 时间：2012-09-28T12:00:46.417
> 
> 标签：bash, ssh, cygwin, signals

使用 cygwin 的 ssh 从 windows 登录到 linux-hosts 后，在退出远程 shell 时，我总是收到烦人的 msg：

“被信号 1 杀死”

我用谷歌搜索，并意识到它无害，但仍然很烦人......有人建议你可以通过使用摆脱该消息

$ ssh -q ...

但这对我尝试过的任何机器都没有影响。

任何人都知道摆脱此味精的有效解决方案吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-03-09T20:41:19.603

当您通过另一台主机代理您的 ssh 会话时，就会发生这种情况。示例`.ssh/config`文件：

```
# machine with open SSH port
Host proxy
HostName foo.com

# machine accessible only from the above machine
Host target
HostName 192.168.0.12
ProxyCommand ssh proxy nc %h %p 
```

当您退出时`ssh target`，`ssh`in`ProxyCommand`将导致输出。如果你在`-q`那里添加，它将被抑制：

```
ProxyCommand ssh -q proxy nc %h %p 
```

您可能会惊讶于这个输出与 Cygwin 无关——它也发生在 Linux 上。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-09T05:27:05.650

将以下行添加到您的`~/.ssh/config`文件中可以压缩该消息。

**更新：QUIET 必须全部为大写，并且必须为配置中的每个主机添加。**

```
LogLevel QUIET 
```

在第一行添加将全局压缩消息。只有放在`Host`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-08-30T10:18:14.660

*我正在添加一个新答案，因为在不同的情况下我有一个新的解决方案。*

使用现代`ProxyJump`指令时，没有地方可以放置`-q`，如下所示`ProxyCommand`：

```
Host target
  ProxyJump proxy 
```

与其使用 切换回更手动的跳转定义`ProxyCommand`，不如使用 的解决方案`ProxyJump`添加`LogLevel QUIET`到`Host proxy`定义中：

```
Host target
  ProxyJump proxy
Host proxy
  LogLevel QUIET 
```

`-q`这将具有与in相同的`ProxyCommand`效果`ssh -q proxy ...`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-20T13:50:32.043

在脚本 bash 中，要删除此消息，请在顶部添加以下内容：

```
exec 2> >(grep -v "Killed by signal 1.") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-29T00:54:37.207

如果您使用 ControlMaster 指令启用连接共享，您可以在通过另一台主机代理会话时共享单个连接。然后，您可以将 ControlPersist 指令设置为 1 秒，这将通过延迟共享连接的终止来避免“被信号 1 杀死”错误。

将以下内容添加到您的 ~/.ssh/config

```
ControlMaster auto
ControlPersist 1
ControlPath ~/.ssh/.%C 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T06:30:06.517

也许，您可能喜欢[PuTTY](http://portableapps.com/apps/internet/putty_portable)作为替代品。我不认为它给出了那个错误，它允许你做一些事情，比如保存连接信息以及其他细节。

虽然我还没有尝试过，但您也可以将 sterr（我相信消息将被发送到的流）重定向到 /dev/null （实际上，就是事情走向死亡的 bitbucket 或无底洞）。你可以做类似的事情：

ssh 用户@主机 2>/dev/null

# sql-server - 什么是 SQL Server 相当于 MS Access 中的链接表？

> ID：12639616
> 
> 赞同：4
> 
> 时间：2012-09-28T12:00:50.140
> 
> 标签：sql-server, ms-access

我来自 MS Access 数据库世界，我习惯使用 Linked ODBC 函数链接到其他数据库中的表。

与此功能等效的 SQL Server 是什么？

PS：在 SQL Server 中，我想链接到其他服务器上的其他 SQLServer 数据库和一些 Access 数据库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T12:02:41.123

在 SQL Server 上，您可以设置`LINKED SERVERS`. 来自[MSDN](http://msdn.microsoft.com/en-us/library/ms188279.aspx?ppud=4)：

> 配置链接服务器以使 SQL Server 数据库引擎能够针对 SQL Server 实例之外的 OLE DB 数据源执行命令。通常，链接服务器配置为使数据库引擎能够执行 Transact-SQL 语句，该语句包括另一个 SQL Server 实例或另一个数据库产品（如 Oracle）中的表。许多类型的 OLE DB 数据源都可以配置为链接服务器，包括 Microsoft Access 和 Excel。链接服务器具有以下优点：
> 
> 从 SQL Server 外部访问数据的能力。
> 
> 能够在整个企业的异构数据源上发布分布式查询、更新、命令和事务。
> 
> 以类似方式处理不同数据源的能力。

这是一篇关于[配置链接服务器的 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa213778%28v=sql.80%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-31T21:20:53.660

我同意其他海报并说链接服务器是要走的路。链接服务器后，您可以使用***server.database.schema.tablename***格式对表进行寻址以访问表。

如果您想要优雅，您可以使用 SELECT 语句围绕该远程表创建所谓的 SQL **VIEW ：**

```
CREATE VIEW ViewName AS SELECT * FROM server.database.schema.tablename 
```

这将使您最接近您寻找的 Access 样式的链接表。只要您在视图中只使用一个表，记录就应该可以从该视图中更新、插入和删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:04:31.067

您需要 Microsoft JDBC Driver for SQL Server

# c++ - 使用矢量的 C++ 纸牌 vector.erase 函数出错

> ID：12639617
> 
> 赞同：0
> 
> 时间：2012-09-28T12:00:50.780
> 
> 标签：c++, vector

我用 C++ 制作了这个非常简单的纸牌。牌组是随机洗牌的，我拿一张牌，然后按 Ace、One、Two、...、Ten、Jack、Queen、King 的顺序发音。如果这张牌正是我所说的，我会从牌组中取出这张牌。我使用剩余的牌组迭代该过程，直到我移除卡片或直到牌组为空（仅在这种情况下我赢了）。这是我编写的代码，但是当我使用功能擦除删除卡时，第 62 行出现错误。我不明白是哪个问题。

```
#include <iostream>
#include <vector>
using namespace std;

enum SUIT { HEART, CLUB, DIAMOND, SPADE };
string suit_string[] = {"HEART", "CLUB", "DIAMOND", "SPADE"};

enum VALUE { ACE, TWO, THREE, FOUR, FIVE, SIX,
    SEVEN, EIGHT, NINE, TEN, JACK, QUEEN, KING};
string value_string[] = {"ACE", "TWO", "THREE", "FOUR", "FIVE",
    "SIX", "SEVEN", "EIGHT","NINE", "TEN", "JACK", "QUEEN", "KING"};

class Card {
 public:
    Card(SUIT s, VALUE v);
    SUIT suit;
    VALUE value;
    string toString();
};

Card::Card(SUIT s, VALUE v){
    suit=s;
    value=v;
}

string Card::toString(){
    return value_string[(int)this->value]+" of "+suit_string[(int)this->suit];
}

int main() {
        vector<Card*> deck;
        for (int i=0; i<4; i++) {
            for (int j=0; j<13; j++) {
                deck.push_back(new Card((SUIT)i,(VALUE)j));
            }               
        }

        int removed_count, runs = 0;

        do{
            random_shuffle(deck.begin(),deck.end());
            removed_count=0;

            cout<<"--- Run number: "<<++runs<<"\n";
            cout<<"--- still "<<deck.size()<<" cards in the deck\n";

            for (int i=0; i<4; i++) {
                for (int j=0; j<13; j++) {
                    //cout<<i*13+j<<"\n";

                    int position=i*13+j; //from 0 to 51

                    cout<<"'"+value_string[j]+"'"<<" <-> ";

                    Card card=*(deck.at(position));
                    cout<<card.toString()<<" ";

                        if(card.value == j){
                            removed_count++;
                            deck.erase(deck.begin()+position); //problems here!
                            cout<<"removed\n";
                        }else{
                            cout<<"not removed\n";
                        }

                    }               
            }
            if(deck.empty()) break;
        }while(removed_count>0);

        if(deck.empty()){
            cout<<"You win!\n";
        }else{
            cout<<"You lose!\n";
        }

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:11:37.013

好吧，当我启动它时，我得到

```
'KING' <-> terminate called after throwing an instance of 'std::out_of_range'
  what():  vector::_M_range_check 
```

显然，这意味着您正在尝试访问超出向量范围的内容。您正在擦除循环中的一个元素：

```
deck.erase(deck.begin()+position); 
```

命中后，向量的大小将是 51 而不是 52。但是，您的循环正在处理 52 个值，正如您在此评论中明确提到的：

```
int position=i*13+j; //from 0 to 51 
```

所以在物品被移除并且牌组中还剩下 51 个物品（0 到 50）之后，最后一次迭代仍然会尝试访问第 51 个元素并崩溃。它失败的实际行是这一行：

```
Card card=*(deck.at(position)); 
```

当状态如下： ![在此处输入图像描述](../Images/45037480a49de64b79fba864e2b4e019.png)

如您所见，向量中有 51 个元素，`*(deck.at(position))`将尝试访问第 52 个元素（索引为 51，因为您从零开始计数），并抛出异常。

# php - 显示所有字体文件字符

> ID：12639619
> 
> 赞同：11
> 
> 时间：2012-09-28T12:01:01.030
> 
> 标签：php, javascript, jquery, fonts

我想知道是否有办法使用 HTML/CSS/JS/PHP 显示所有字体文件字符？

假设我想显示所有可能的“Arial”字符。或者来自自定义 @font-face 字体的字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T15:06:52.690

字体可以映射范围广泛的 Unicode 字符，使用从 0 到 0x10FFFF 的代码。因此，如果您真的想以任何随机字体查看*所有内容*，那么按照其他答案中的建议在循环中进行操作确实会有问题。即使对于 Arial 的“简单”示例，最低映射字符是 U+0020，最高映射字符是 U+FB02。但是，并非该范围内的所有内容都已映射，因此如果您在循环中执行此操作，您最终会得到很多空的。更不用说它可能会很慢。

为了有效地做你想做的事，你需要一些东西来破解打开字体文件，检查 cmap 表，并获得一个映射字符列表（**而不是**一个范围）。我不确定您的设置是什么，但是您可能可以使用[FreeType](http://freetype.org/)之类的东西在服务器端执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:25:15.770

我想建议你试试 GD 库[**imagettftext()**](http://www.php.net/imagettftext)函数。手册中的示例：

```
// Set the content-type
header('Content-Type: image/png');

// Create the image
$im = imagecreatetruecolor(400, 30);

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The string with character sets
for($i=0; $i<256; $i++){ 
     $text.= chr($i); 
} 

// Replace path by your own font path
$font = 'arial.ttf';

// Add some shadow to the text
imagettftext($im, 20, 0, 11, 21, $grey, $font, $text);

// Add the text
imagettftext($im, 20, 0, 10, 20, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($im);
imagedestroy($im); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:00:17.663

您可以将 chr 函数与 for 循环一起使用。您将拥有一些不存在的角色，但它又快又容易。如果您愿意，您可以更具体地了解您的开始和结束 ascii 值。

```
for($x=1;$x<=255;$x++) {
    echo chr($x) . "&nbsp;"; 
} 
```

然后你可以只使用 jquery 来动态更改字体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-12T15:09:17.940

我有类似的情况，我通过解析 .svg 文件解决了它。因此，如果您没有 SVG 中的文件，您可以将 ttf 转换为 SVG，然后对其进行解析以获取可用字符的 unicode。

# unit-testing - MRUnit：测试因自定义可写而失败

> ID：12639621
> 
> 赞同：1
> 
> 时间：2012-09-28T12:01:11.590
> 
> 标签：unit-testing, hadoop

我正在尝试使用[MRUnit](http://mrunit.apache.org/)为我的 hadoop 作业实施单元测试。

对于我自己的 Writable，中的断言

```
withOutput(K2 k2, V2 v2) 
```

失败。我曾尝试从 Object 覆盖 equals(Object o) 方法，但这没有帮助。任何想法如何告诉 MRUnit 当两个 Writables 实际上是相同的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:20:22.060

为了`runTest()`成功，`int hashCode()`必须被覆盖。

# unit-testing - 如何对使用相同私有方法的公共方法进行单元测试？

> ID：12639624
> 
> 赞同：3
> 
> 时间：2012-09-28T12:01:21.537
> 
> 标签：unit-testing, refactoring, nunit

我需要一些关于我的软件测试的指导。

我把事情复杂化了，但我太专注于看我做错了什么，或者另一种做事方式。

我有几个使用相同私有方法的公共方法。

私有方法本身：

*   必须为其特定角色处理许多场景
*   与同一实例中的字段/属性/方法密切合作

假设私有方法需要 5 次测试才能覆盖所有场景，并被 6 个公共方法使用。

**问题**

*   *那么我至少需要`5x6`测试吗？*

*   *如何为每个公共方法重用私有方法的测试？*

*   *有没有关于重构重复测试的示例/文章？*

**例子**

*启动（）*

```
- if_file_exists_load_entries           ()
- if_file_missing_load_last             ()
- if_no_files_create_new_entries        ()
- if_exception_clear_entries_and_log    ()
- loaded_entries_init_called            ()
- Other tests 
```

*OnUserLoadCustom()*

```
- if_file_exists_load_entries           _AND_STORE_AS_LAST()
- if_file_missing_load_last             _AND_STORE_AS_LAST_AND_WARNING_MESSAGE()
- if_no_files_create_new_entries        _AND_WARNING_MESSAGE()
- if_exception_clear_entries_and_log    _AND_ERROR_MESSAGE()
- loaded_entries_init_called            _AND_SUCCESS_MESSAGE()
- Other tests 
```

*OnRecover()*

```
- if_file_exists_load_entries           _AND_INFO_MESSAGE()
- if_file_missing_load_last             _AND_INFO_MESSAGE()
- if_no_files_create_new_entries        _AND_INFO_MESSAGE()
- if_exception_clear_entries_and_log    _AND_ERROR_MESSAGE_AND_SHUTDOWN()
- loaded_entries_init_called            _AND_SUCCESS_MESSAGE()
- Other tests 
```

我正在考虑使用策略模式封装私有方法，因此我可以单独测试它（和公共方法）。

但是，我觉得使用其中一个不合适，因为：

*   我不打算在运行时有可互换的行为
*   为了更容易测试而使用模式似乎是错误的

**更新#1**

我的问题与测试私有方法行为的公共接口有关。但我最终得到了很多重复的测试方法（见我上面的例子）。

对于策略模式，我认为我需要的只是：

*   测试策略中的所有路径（本质上是测试私有方法）
*   验证所有公共方法都调用了策略（可以在这里轻松地使用模拟对象，并验证它是否被调用）

但就像我提到的那样，我认为我不应该仅仅为了更容易测试而引入一种模式。除非我真的必须这样做，否则我会推迟这种方法。

* * *

**更新#2**

减少重复的第一次尝试：

*   私有方法测试分组到自己的类（Behaviour1Test）

    *   GetTestCases() 返回与此行为相关的测试用例列表
*   所有需要这个测试的公共方法都实现了暴露的接口

    *   安排（）
    *   行为（）
    *   断言（）

例如：

```
// Public method tests
[TestFixture]
public class PublicMethodTests: IBehaviour1Test
{
    // Behaviour 1
    Behaviour1Test _behaviour1;
    IEnumerable<TestCaseData> Behaviour1TestCases{ get { return _behaviour1.GetTestCases(); } }
    [Test]
    [TestCaseSource("Behaviour1TestCases")]
    public void RunBehaviour1Test(Action<IBehaviour1Test> runTestCase)
    {
        runTestCase(this);
    }

    // ==============================
    // Behaviour 1 Arrange/act/assert
    void IBehaviour1Test.Arrange(){}
    void IBehaviour1Test.Assert(object result){}
    object IBehaviour1Test.Act()
    {
        return _model.PublicMethod();        
    }

    // Other tests
}

// Implement this in order to run Behaviour1 test cases
interface IBehaviour1Test
{
    void Arrange(); 
    object Act();
    void Assert(object retValue);
}

// Collection of tests for behaviour 1
public class Behaviour1Test
{
    // Generate test cases
    IEnumerable<TestCaseData>() GetTestCases()
    {
        yield return new TestCaseData((Action<IBehaviour1Test>)Test_1);
        yield return new TestCaseData((Action<IBehaviour1Test>)Test_2);
        yield return new TestCaseData((Action<IBehaviour1Test>)Test_3);
    }

    void Test_1(IBehaviour1Test impl)
    {
        // Arrange
        impl.Arrange(); // public method's arrange
        Test1Setup(); // Arrange for this test

        // Act
        var result = impl.Act();

        // Assert
        Test1Assert(result); // Assert for this test
        impl.Assert(result); // Assert on public method

    }

    void Test_2(IBehaviour1Test impl){}
    void Test_3(IBehaviour1Test impl){}
} 
```

这样，如果我需要为私有方法的行为添加一个新的测试用例，我只需要在 BehaviourTest 中添加一次，所有包含它的公共方法测试都会更新。

![在此处输入图像描述](../Images/3ceae651166a9a1da4c6fbca3592739e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:33:46.180

您应该在测试中应用与在应用程序代码中相同的理念。如果可以将通用功能提取到辅助方法或类中，那么您应该这样做。它将为您节省代码重复，并在私有方法发生更改时帮助您稍后重构。

我想你有很多通用的设置、拆卸、断言和验证代码，可以推广。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:11:27.210

从某种意义上说，您不会测试私有方法。您彻底测试使用私有方法的方法，并且一切都检查出来，私有方法“有效”。

如果你真的想要安心，你可以使用反射来执行私有方法，这样你就可以单独测试它。

关于测试重构，您当然应该有设置和拆卸例程来处理这些相应的功能。我不会在测试中进入策略模式，只需在测试类中创建非测试方法，这些方法具有多个测试所需的功能块并适当地使用它们。例如，如果您的私有方法可以影响 5 个字段，并且您需要多次测试这 5 个字段，我会创建一个类似的方法

```
private void verifyField(expected1, extpected2, ....){
     equals(actual1, expected1, 'expected1 correct);
     ....
} 
```

并在适当的地方使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:25:57.817

您需要将私有方法提取到辅助类中。然后分别测试它的功能并在其他测试中模拟它。私有方法中的功能与您尝试在其他方法中测试的内容无关——它只提供输入。大多数私有方法通常只是等待释放的辅助方法。

# jquery - 如何在鼠标悬停时缩放图像而不影响其他图像位置？（JQuery）

> ID：12639625
> 
> 赞同：2
> 
> 时间：2012-09-28T12:01:22.923
> 
> 标签：jquery, html, css

我想获得类似于谷歌图像的效果，当我们将鼠标悬停在任何图像上时，图像会弹出并出现在前面，而不会影响其他图像的原始位置。此外，这只发生在光标是静态的时候，而不是我们随机移动它的时候。

我试图缩放图像，但其他图像正在失去其原始位置。我的代码如下-->

```
$("img").mouseover(function(){
      $(this).css("cursor","pointer")
      $(this).animate({zoom: '107%'}, 'fast')

   }).mouseout(function(){
      $(this).animate({zoom: '100%'}, 'fast') 

   }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:06:32.427

在你的 CSS 添加`Z-index`你想要缩放的图像，图像将在 z 坐标中弹出。这个想法是改变Z-index，使图像弹出，而其他图像的z-index小于悬停的，所以这不会影响其他图像的位置。

```
$("img").mouseover(function(){
      $(this).css("z-index","2")
} 
```

更新：延迟示例

```
$(function() {
        var timer;

        $('img').hover(function() {
                if(timer) {
                        clearTimeout(timer);
                        timer = null
                }
                timer = setTimeout(function() {
                        $(this).css("z-index","2"), 2000)
    },
    // mouse out
         clearTimeout(timer);
         $(this).css("z-index","1")
    });
}); 
```

试试这样的东西，在[这里查看帖子](https://stackoverflow.com/questions/435732/delay-jquery-hover-event)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:02:43.027

```
<img style="position:absolute"> 
```

更改 img 样式属性位置绝对

# python - 这里最好的矢量化方法是什么？

> ID：12639628
> 
> 赞同：0
> 
> 时间：2012-09-28T12:01:40.583
> 
> 标签：python, numpy, vectorization

我想知道向量化以下公式的最佳方法是什么：

```
c= Sum(u(i)*<u(i),y>/v(i) ) 
```

`<.,.>`表示两个矩阵的点积。

假设我们有一个矩阵`K= U*Diag(w)*U^-1`（`w`并且是大小`u`矩阵的特征值和特征向量）。是一个大小为 的向量。`k``nxn``y``n`

因此，如果 ：

```
k=np.array([[1,2,3],[2,3,4],[2,7,8]])
y=np.array([1,4,5])
w,u=np.linalg.eigh(k) 
```

然后 ：

```
w=array([ -2.02599523,   0.47346124,  13.552534  ])

u=array([[-0.18897996,  0.95770742,  0.21698634],
        [ 0.82245177,  0.03363605,  0.5678395 ],
       [-0.53652554, -0.28577109,  0.79402471]]) 
```

这就是我实现它的方式：

```
uDoty=np.dot(u,y)
div=np.divide(y,w)

div=np.divide(uDoty,w)
r=np.tile(div,(len(u),1))
a=u*r.T
c=sum(a) 
```

但它实际上对我来说并不好看。所以有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:18:37.920

您可以避免使用`np.tile`某些广播：

```
U = np.dot(u, y)
d = U/w
a = u*d[:,None]
c = a.sum() 
```

# eclipse - 项目探索者，有孩子的项目

> ID：12639630
> 
> 赞同：3
> 
> 时间：2012-09-28T12:01:42.997
> 
> 标签：eclipse, eclipse-rcp, rcp

我想在 Eclipse 4.2 的 Project Explorer 中将子项添加到我的文件中。我使用“带有多页编辑器的插件”模板制作了一个 RCP 项目。运行它，使用向导将我的文件类型（.mpe）添加到一些现有项目中，一切正常。现在我想允许我的文件类型 (1) 具有可点击的子项，例如 .h 文件具有 (2)。这个怎么做？

![图解说明](../Images/a4ee678ecb66c295f4c99fa8c28dc2e1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:21:52.710

您必须为“org.eclipse.ui.navigator.viewer”和“org.eclipse.ui.navigator.navigatorContent”提供扩展名。项目浏览器基于通用导航框架，允许用户扩展功能。

一个例子

“org.eclipse.ui.navigator.viewer”扩展

```
 <extension
          id="navigator-viewbinding"
          point="org.eclipse.ui.navigator.viewer">
       <viewerContentBinding
             viewerId="org.eclipse.ui.navigator.ProjectExplorer">
          <includes>
             <contentExtension
                   pattern="<plugin_name>.myResourceContent">
             </contentExtension>             
          </includes>
       </viewerContentBinding>      
    </extension> 
```

和“org.eclipse.ui.navigator.navigatorContent”扩展

```
 <extension
         id="navigator-content"
         point="org.eclipse.ui.navigator.navigatorContent">
      <navigatorContent
            activeByDefault="true"
            contentProvider="MyNavigatorContentProvider"
            icon="icon.gif"
            id="myResourceContent"
            labelProvider="MyNavigatorLabelProvider"
            name="Some Name"
            priority="normal">
         <triggerPoints>
            <or>
               <and>
                  <instanceof
                        value="org.eclipse.core.resources.IFile">
                  </instanceof>
                  <test
                        property="org.eclipse.core.resources.extension"
                        value="mpe">
                  </test>
               </and>
            </or>
         </triggerPoints>
         <possibleChildren>
            <or>
               <instanceof
                     value="<Class name of possible children>">
               </instanceof>
            </or>
         </possibleChildren>      
   </extension> 
```

“MyNavigatorContentProvider”类实现了“ICommonContentProvider”，您必须在其中解析文件并获取您想要显示的孩子。“MyNavigatorLabelProvider”类用于在查看器中装饰您的孩子。

希望这个[链接](http://scribbledideas.blogspot.in/)应该有所帮助

# java - 编译库到什么java版本

> ID：12639632
> 
> 赞同：0
> 
> 时间：2012-09-28T12:01:54.117
> 
> 标签：java, jar, compilation, version, software-distribution

我正在编写一个通用库（比如说 junit 或 spring）。我不使用较新的 java 版本的任何功能。我想把我的图书馆放在 Maven 中心。

我的问题是：`-target`在编译过程中我应该选择什么？如果我选择 1.2，那么每个人都可以使用我的库，但是我不确定在最近的 jvm 上运行时我是否会失去一些性能。在这种情况下，最佳做法是什么？我想避免在 maven Central 中部署多个版本，每个版本都针对特定的 jvm

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:10:09.403

我不会低于 1.5（因为泛型，即使你现在不使用它们，它们也有可能有一天是必要的——看看 Apache Commons 发生了什么）。如果它是一个新库，我认为支持最后两个主要的 Java 版本就足够了。但是您的问题与性能更相关。我认为目标版本应该不会有任何重大影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:24:33.957

我认为使用编译类所需的最低 Java 版本应该没问题。因此，如果您的代码使用 Java 1.2 编译（这意味着您不使用任何泛型、枚举、自动资源管理等），那么请随意使用 Java 1.2 编译它。

我不认为存在巨大的性能障碍，尽管较新的 javac 版本可能会更好地优化代码。

# css - css变换/过渡后的模糊div

> ID：12639634
> 
> 赞同：0
> 
> 时间：2012-09-28T12:01:57.243
> 
> 标签：css, css-transitions, css-transforms

按照此演示[http://css3.bradshawenterprises.com/sliding/的说明处理内容滑块](http://css3.bradshawenterprises.com/sliding/)

但是对于我的，我注意到我的内容，在这种情况下是几个 div，在 css 转换完成后变得有点模糊。在最新版本的 Firefox、Safari 和 Opera 中对其进行了测试，并且运行良好。所以模糊只发生在 Chrome 中（我在 22.0.1229.79）

关于这可能是什么或如何解决它的任何想法？

[http://jsfiddle.net/SYYhS/5/](http://jsfiddle.net/SYYhS/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-21T08:28:32.153

一半像素的问题。

尝试：`transform: translate(-50%, -51%);`或者，尝试将 div 尺寸设置为偶数。

它会起作用的！

# git - 解开和合并与先前提交的分支

> ID：12639635
> 
> 赞同：0
> 
> 时间：2012-09-28T12:01:58.223
> 
> 标签：git

我有一个上游 git 存储库（远程），它有一个 master 和几个分支，但只有一个分支对手头的讨论很重要：

上游的：

```
x-------y--------> master
     \
      \
        ----z-----> develX 
```

然后我在 x 处从上游克隆了我自己的仓库。

```
x--------y---------> master
      \
       \
        -----z-------> develY 
```

develY 是我的分支，拥有我自己的工作和来自 develX 的补丁 (z)。我的主人在时间上有些失落。它有来自上游 master 的补丁 (y) 和一些调整，试图让它与我的一些补丁一起工作，但它实际上是一个丢失的案例并且无法正常工作。

所以我决定让它与 develY 完全相同： $ git checkout develY $ git merge -s ours master $ git checkout master $ git merge develY $ git push

所以现在master和develY完全一样。但是，我真正想要的是将我的 master 与我的 develY 更改同步到上游 master（现在也在我的 master 中）。

我最初以为我要将上游 master 中的更改重新设置到我的 master 上，但是上游大约有 6000 次提交要重新设置，而且这不可能很好地工作。有几个问题似乎使这个案例比我最初想象的更复杂：

*   develY（以及我合并和推送 master 之后的 master）有一些来自上游 develX 的补丁，这些补丁可能不存在于上游 master 中；
*   我的主人有一些来自上游主人的提交，这些提交由于合并 -s ours of develY 而被恢复；
*   由于上述几点，将`git merge-base master upstream/master`补丁 y 显示为最后一个共同祖先，但是此补丁实际上不在 master 中，因为它已通过合并恢复。

关于如何尽可能干净地让我的主服务器与上游/主服务器同步以及我的开发人员的更改有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:08:55.387

我想你将不得不做一个`git merge origin/master`from in `master`。

当你说“没办法解决”时，你是什么意思？有两个多冲突？如果存在真正的冲突并且您想要两组更改，那么您确实必须通过手动编辑来解决它们。

`git rebase`无论如何都是我采取的路线，以便我`git fetch`成为最新的大师，然后在此基础上重新调整我的工作并解决出现的冲突。我经常首先使用`git rebase -i HEAD~10`first 来压缩/重新排序/删除我的分支提交。

# jquery - HoverIntent 只触发一次

> ID：12639640
> 
> 赞同：1
> 
> 时间：2012-09-28T12:02:11.950
> 
> 标签：jquery, hoverintent

我一直在使用 HoverIntent 来显示一个弹出菜单，下面的代码只工作一次。

我需要在`#MenuPopup`用户将鼠标悬停在其上时保持可见，因此我曾经`clearTimeout(MenuButton.hoverIntent_t);`停止`hideMenu()`调用该函数，然后`hideMenu()`在用户不再悬停时调用它`#MenuPopup`。这行得通。

如果我现在`#MenuButton`再次将鼠标悬停`#MenuPopup`不显示。任何想法为什么？

先感谢您。

巴里

```
$(document).ready(function(){
    $("#MenuButton").hoverIntent({
        over: showMenu, 
        timeout: 1000, 
        out: hideMenu
});

$("#MenuPopup").hover(
  function () {
    clearTimeout(MenuButton.hoverIntent_t);
  }, 
  function () {
    setTimeout("hideMenu()",1000);  
  }
);  

}); // close document.ready

function showMenu() {  
    $("#MenuPopup").animate({ 
    top: "-195px",
    height: "195px"
  }, 500, "swing" );
}

function hideMenu() { 
    $("#MenuPopup").animate({ 
         top: "0px",
         height: "0px"
        }, 200, "swing" );
} 
```

# php - 返回最后 2 位数字

> ID：12639642
> 
> 赞同：12
> 
> 时间：2012-09-28T12:02:27.213
> 
> 标签：php

我怎样才能得到最后2位数字：

```
<departureDate>200912</departureDate> 
```

对我的对象：

```
$year = $flightDates->departureDate->year; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-28T12:07:35.263

```
// first two
$year = substr($flightDates->departureDate->year, 0, 2);
// last two
$year = substr($flightDates->departureDate->year, -2); 
```

但是考虑到您在这里解析日期的事实，使用 date 函数会更聪明。pe`strtotime()`甚至`date()`：

```
<?php
$someDate ='200912';
$dateObj = DateTime::createFromFormat('dmy', $someDate);
echo $dateObj->format('Y');
// prints "2012" .. (see date formats) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T12:05:26.403

您可以将其作为字符串寻址，该函数`substr`将自动转换它：

```
<?php

//$year = '200912';
$year = $flightDates->departureDate->year;

echo substr( $year, -2 );

?> 
```

仔细看看[substr](http://php.net/manual/en/function.substr.php)函数。如果您希望结果是一个严格的整数，那么只需`(int)`在返回之前添加。

但是，正如[Jan.](https://stackoverflow.com/users/433075/jan)所说，您最好将其用作日期：

```
<?php

//$year = '200912';
$year = $flightDates->departureDate->year;

$date = DateTime::createFromFormat( 'dmy', $year );

echo date( "y", $date->getTimestamp() );

?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-10T18:02:53.507

对于数字，您可以使用 php 的模函数（[http://php.net/manual/en/internals2.opcodes.mod.php](http://php.net/manual/en/internals2.opcodes.mod.php)）：

```
<?php
//$year = '200912';
$year = $flightDates->departureDate->year;

echo $year % 100;
?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T12:06:07.450

你可以使用一个基本的算术运算，像这样......

```
while ( $var > 100 ) 
{
    $var = (int) $var / 10;
} 
```

可能有更好的解决方案，但这个会很好

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T12:05:08.687

示例 1：您可以剥离标签`strip_tags`并使用`substr`

```
$number = '<departureDate>200912</departureDate>' ;
$year = substr(strip_tags($number), 0,2);
var_dump($year); 
```

示例 2：您也可以使用`simplexml_load_string`with`substr`

```
$number = '<departureDate>200912</departureDate>' ;
$year = substr(simplexml_load_string($number),0,2);
var_dump($year); 
```

输出

```
string '20' (length=2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T12:05:23.320

将其转换为字符串。然后取前两个元素。

在java中，您可以通过以下代码来做到这一点。让变量是一个名为 x 的整数。那么你可以使用

```
byte[] array= Integer.toString(x).get.bytes(). 
```

现在 array[0] 和 array[1] 是前两位数。array[array.length-1] 和 array[array.length] 是最后两个。

# c# - Ajax Post Back 发送两个数组作为参数

> ID：12639648
> 
> 赞同：0
> 
> 时间：2012-09-28T12:02:49.703
> 
> 标签：c#, jquery, asp.net-mvc

我有一个动作方法，它有两个字符串数组作为参数，我用 ajax post 方法发布这个动作方法，我有一个问题，在控制器上我得到两个数组数据相同但我用不同的数据制作两个数组（一个包含代码其他包含名称）下面是我的代码

```
 public ActionResult SectionBook(string[] cs,string[] cname)
{
}

var CourseSection=new Array();
var CourseName=new Array();
 $('a p-button').live('click', function () {    
        var schoolCourseId = $(this).attr('id');
        CourseSection.push(schoolCourseId);
        CourseName.push($(this).html().split("(")[0]);        
    });

 $('#btnSubmit').live('click', function () {

$.ajax({
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            url: '/MyController/SectionBook',
            //            dataType: 'json',
            data: $.toJSON(CourseSection, CourseName),
            success: function (result) {                
                window.location.href = '/MyController/SectionBooks'
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status);
                alert(thrownError);
            },
            async: false,
            cache: false
        });

}); 
```

我已经调试了 JS 代码，两个数组在这里都有不同的值，但是在控制器 cs 和 cname 中包含相同的数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:31:31.050

这可能会有所帮助：

[ASP.NET MVC 和 jQuery 第 4 部分 - 高级模型绑定](http://theycallmemrjames.blogspot.com/2010/05/aspnet-mvc-and-jquery-part-4-advanced.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T14:40:22.887

尝试不使用 contentType: 'application/json; charset=utf-8'，您没有在服务器端的任何地方指定它，因此 mvc 尝试使用请求正文中的默认绑定以防发布。因此，只需将 js 对象作为数据参数传递，jQuery 就会在此请求的主体中使用必要的对象表示来执行一个常见的 post 请求。

```
$.ajax({
        type: 'POST',
        url: '/MyController/SectionBook',
        data: {cs: CourseSection, cname: CourseName},
        success: function (result) {                
            window.location.href = '/MyController/SectionBooks'
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert(xhr.status);
            alert(thrownError);
        },
        async: false,
        cache: false
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T19:47:03.543

我认为问题在于 toJSON 方法只接受一个参数而忽略了其余参数。因此，通过执行 $.toJSON(CourseSection, CourseName) 您只是创建了一个 JSON 对象，其中传入了第一个数组的值。如果将 2 个数组包装在对象中，但是像这样

```
var CourseSection = new Array();
var CourseName = new Array();
CourseSection.push("cs1");
CourseSection.push("cs2");
CourseSection.push("cs3");

CourseName.push("cn1");
CourseName.push("cn2");
CourseName.push("cn3");

var newObj = {
 cn:CourseName,
 cs:CourseSection        
}; 
```

然后将 newObj 对象转换为 JSON

```
JSON.stringify(newObj) 
```

或者

```
 $.toJSON(newObj) 
```

您应该能够使用 JavascriptSerializer 从控制器中的两个数组中检索值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:28:09.367

试试这个

```
var data = { courseSection:CourseSection.toString(),courseName:CourseName.toString()};
            $.ajax({
                url:'/MyController/SectionBook',
                type:'GET',
                data:data,
                async:false,
                success:function(data)
                {
                    window.location.href = '/MyController/SectionBooks'

                }
            });
        }

In Controller
public ActionResult SectionBook(string courseSection,string courseName)
{

} 
```

只需在 ajax 调用之前确认您的数组是否包含不同的值。在 json 中，您应该在密钥对中传递值，在控制器中，您将获得这些值作为逗号分隔符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T12:29:30.493

问题出在`data:`$.toJSON(CourseSection, CourseName), `它用第一个元素填充它们查看文档

# android - 如何在服务器端的 Android 中保存视频？

> ID：12639649
> 
> 赞同：0
> 
> 时间：2012-09-28T12:02:51.007
> 
> 标签：android, email, video

我在*JSON*的帮助下从服务器获取视频*URL*。

 *如何将其保存在我的 android 项目中？（我也想通过电子邮件发送此视频。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:16:09.223

试试这个，

```
public String downloadImages(String serverUrl,String directory)
    {

        if (serverUrl == null)
            return null;

        String LocalFilePath=serverUrl.substring(serverUrl.lastIndexOf("/")+1, serverUrl.length());
        File file =  new File(directory, LocalFilePath);
         if (!file.exists())
         {
                int bytesread = 0;
                byte[] bytes = new byte[1024];  
                InputStream strm = null;
                HttpResponse response = null;
                HttpEntity entity = null;
                String LocalFile = null;
                FileOutputStream foStream;
                BufferedOutputStream writer = null;
                try {
                    DefaultHttpClient httpclient = new DefaultHttpClient();
                    serverUrl = serverUrl.replace(" ", "%20");
                    HttpGet httpget = new HttpGet(serverUrl);   

                    response = httpclient.execute(httpget);

                    if (response == null) 
                    {
                        return null;
                    }
                    entity = response.getEntity();
                    strm = entity.getContent();         
                    File dire = new File(directory);
                    if (!dire.isDirectory()) 
                    {
                        dire.mkdirs();
                    }
                    LocalFile = directory+LocalFilePath;
                    directory = null;
                    foStream = new FileOutputStream(LocalFile);
                    writer = new BufferedOutputStream(foStream);            

                    do 
                    {
                        bytesread = strm.read(bytes, 0, bytes.length);
                        if(bytesread > 0)
                        {   
                            writer.write(bytes, 0, bytesread);
                            writer.flush();
                        }
                    } while (bytesread > 0);                    

                    writer.close();
                    foStream.close();

                    strm.close();               
                    return LocalFile;
                }
                catch(Exception e)  
                {   
                    file.delete();
                    e.printStackTrace();
                    return null;
                }   
         }
         else
         {
             return "file exist";
         }
    } 
```

这将从服务器下载文件并保存在您给定的文件路径中*

# django - 获取模板标签位置

> ID：12639650
> 
> 赞同：1
> 
> 时间：2012-09-28T12:02:52.823
> 
> 标签：django, django-templates

每次出现模板标签时，我都需要一个唯一标识符。是否可以获得使用模板标签的实际文件名、行号和列？

我曾考虑在上下文中使用变量来计算我的模板标签的实例，但是如果我遇到以下情况，这将导致数字被分配两次：

```
{% mytemplatetag %}
{% if random %}
    Some Text {% mytemplatetag %}
{% else %}
    Some other Text
{% endif %}
{% mytemplatetag %} 
```

如果 random 为真，则模板标签将获得数字 1,2 和 3。如果 random 为假，则只有第一个和最后一个模板标签会获得一个数字，因此数字的分配方式不同。

在上面的示例中，我只需要 mytemplatetag 的所有实例的唯一 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T14:48:59.717

在您的模板标签中，您得到了解析器。您可以使用它来获取源文件和模板中的当前字符，如下所示：

```
@register.tag
def mytemplatetag(parser, token):
    template_loader, position = parser.command_stack[0][-1]
    print template_loader.loadname, position 
```

# excel - VBA 出错时未退出函数

> ID：12639651
> 
> 赞同：1
> 
> 时间：2012-09-28T12:02:59.633
> 
> 标签：excel, error-handling, excel-2007, vba

使用下面的代码，我试图推断存在定义值的列右侧的列字母。例如，如果 D1 = 'Postcode'，我想`insert_col`等于 'E'。

如果 'Postcode' 中存在值，则此方法有效`title_range`，但如果不存在，我会在最后一行出现错误（类型不匹配）。

根据 Match 的文档，如果查找值在范围内不存在，则返回 Excel 错误“N/A”，但检查`xlErrNA`退出函数不起作用。

```
' Work out the column to insert
insert_col_pos = Application.Match("Postcode", title_range, 0)
If insert_col_pos = xlErrNA Then Exit Function ' Exit if the column to insert next to does not exist
insert_col = GetInsertCol(insert_col_pos + 1) 
```

有没有人知道我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:07:46.857

你想要的是

```
If insert_col_pos = CVErr(xlErrNA) Then Exit Sub 
```

前提`insert_col_pos`是`Dim`'ed 为`Variant`

# c# - BindingList<> Listchanged 事件未触发

> ID：12639664
> 
> 赞同：5
> 
> 时间：2012-09-28T12:03:35.507
> 
> 标签：c#, bindinglist

我的应用程序中有以下代码。但是 Listchanged 事件没有按预期触发。我有一个对象“预订”。我从 frmMain 调用它。你能告诉我问题吗？？

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.OleDb;
using System.ComponentModel;

namespace CustomObjects
{
public class Booking:ObjectBase
{

    private int pBookingNo=0;
    private BindingList<Loans> pCashLoans = new BindingList<Loans>();

    public int BookingNo
    {
        get { return pBookingNo; }
        set
        {
            if (!value.Equals(pBookingNo))
            {
                pBookingNo = value;
                PropertyHasChanged("BookingNo");
            }
        }
    }

   public BindingList<Loans> CashLoans
    {
        get { return pCashLoans; }
        set 
        { 
            pCashLoans = value;
            //CalculateCashLoan(this,new System.ComponentModel.ListChangedEventArgs(ListChangedType.Reset,-1));
            PropertyHasChanged("CashLoans");
        }
    }

    private decimal pTakenCashLoan = 0;
    public decimal TakenCashLoan
    {
        get { return pTakenCashLoan; }
        set
        {
            pTakenCashLoan = value;
            PropertyHasChanged("TakenCashLoan");
        }
    }

      public void CalculateCashLoan(object sender, ListChangedEventArgs args)
    {
        decimal total = 0;
        foreach (Loans loan in pCashLoans)
        {
            total += loan.LoanAmount;
        }
        this.TakenCashLoan = total;
    }

    public Booking()
    {
        this.pCashLoans.ListChanged += this.CalculateCashLoan;
    }

    public static Booking FillEntity(OleDbDataReader Reader, OleDbConnection Connection)
    {
        Booking booking = new Booking();
        booking.BookingNo = (int)Reader["BookingNo"];

        booking.CashLoans = Loans.GetLoanList(booking.BookingNo, 1, Connection);
        booking.MarkOld();
        return booking;
    }

    public static Booking GetEntity(int bookingNo, string ConnectionString)
    {
        Booking booking =new Booking();
        using (OleDbConnection Connection = new OleDbConnection(ConnectionString))
        {
            string sqlSelect = "SELECT BookingNo FROM tblBooking WHERE BookingNo=" + bookingNo + "";
            using (OleDbCommand cmd = new OleDbCommand(sqlSelect, Connection))
            {
                Connection.Open();
                OleDbDataReader bReader = cmd.ExecuteReader();
                if (bReader.HasRows)
                {
                    bReader.Read();
                    booking = FillEntity(bReader, Connection);
                }
                Connection.Close();

                if (!bReader.IsClosed)
                {
                    bReader.Close();
                }
            }
        }
        return booking;
    }

}

} 
```

我从这里调用这段代码

```
 private void frmMain_Load(object sender, EventArgs e)
    {
        AddDataBindings();
        cmbBookingType.DataSource = BookingType.GetSelectionList(ConnectionString.CreateConnectionStringForAccess("LOCAL", "2012"));
    }

    private Booking booking=new Booking();
    private void button1_Click(object sender, EventArgs e)
    {
        try
        {
           booking = Booking.GetEntity(1, ConnectionString.CreateConnectionStringForAccess("LOCAL", "2012"));
            bsBooking.DataSource = booking;
        }
        catch (Exception Ex)
        {
            MessageBox.Show(Ex.Message);
            MessageBox.Show(Ex.StackTrace);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:48:53.670

这是因为您正在`BindingList`为属性分配一个新实例，而不是在现有列表中添加和删除项目。

尝试将属性`CashLoans`设为只读，即删除 set 访问器并修改代码以清除列表并添加新项目。

# c# - winforms中的键盘事件传播

> ID：12639673
> 
> 赞同：6
> 
> 时间：2012-09-28T12:04:21.863
> 
> 标签：c#, winforms, keyboard-events

我有一个用户控件。在用户控件中，有一个 PictureBox 用尽了整个屏幕空间 (Dock.Fill)。我想捕捉键盘事件（例如，用于实现粘贴功能的 Ctrl-V）。

但是，PictureBox 没有任何关键事件。PictureBox下的下一层（即用户控件）会得到KeyUp事件吗？如果我将 KeyUp 事件处理程序添加到用户控件，那会起作用吗？我知道 WPF 有路由事件的解决方案。这在winforms世界中是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T12:11:42.273

您可以在表单中接收事件。请参阅[Form.KeyPreview](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview.aspx)。

> 当此属性设置为 true 时，表单将接收所有 KeyPress、KeyDown 和 KeyUp 事件。在窗体的事件处理程序完成对击键的处理之后，击键被分配给具有焦点的控件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:08:03.053

您可以使用`MouseUp, MouseEnter, MouseDown or MouseHover ....`

关于鼠标按下的链接：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.mousedown.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousedown.aspx)

链接：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.aspx)

# iphone - 以编程方式在工具栏项按钮上添加图像

> ID：12639674
> 
> 赞同：2
> 
> 时间：2012-09-28T12:04:23.800
> 
> 标签：iphone, ios, cocoa, uitoolbar

我在工具栏上添加了一个圆形矩形按钮，并通过 xib 在按钮中放置一个图像，现在我必须以编程方式更改图像，我们如何在工具栏中以编程方式更改按钮图像，我在谷歌上搜索但还没有得到解决方案。

我想以编程方式更改按钮图像，请参见下图

![在此处输入图像描述](../Images/d61cce652dc8f044e118bfaeeb4146e7.png)

谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:19:20.147

设置您正在使用的`button` **IBOutLet**`BarButtonItem` ，然后以`button`编程方式更改您的图像。

```
[button setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:13:25.813

尝试为 UIBarButtonItem 创建一个 IBOutlet。然后尝试在代码中更改其背景图像属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:21:31.783

**图片确实只存在于自定义类型的 uibutton 上**。

所以创建自定义类型的 UIButton。

现在在**UIBarButtonItem的****自定义视图**中使用此按钮

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:27:32.133

创建一个带有图像的 UIBarButtonItem 并添加它..！？

例子：

```
UIBarButtonItem* item = [[UIBarButtonItem alloc] initWithImage: yourImage style: UIBarButtonItemStyleBordered target: nil action: nil]; 
```

如果您不希望按钮出现，请尝试使用：

```
UIBarButtonItem* item = [UIBarButtonItem initWithCustomView: yourImageView]; 
```**

# xml - Google Maps API V3 中的 ExtendedData 元素有什么用途？

> ID：12639679
> 
> 赞同：0
> 
> 时间：2012-09-28T12:04:34.693
> 
> 标签：xml, api, maps

使用 Google Maps API V3 时，它会在名为 ExtendedData 的对象中返回一个元素，我无法找出它的用途。

```
 ["ExtendedData"]=>
  object(SimpleXMLElement)#6 (1) {
    ["LatLonBox"]=>
    object(SimpleXMLElement)#8 (1) {
      ["@attributes"]=>
      array(4) {
        ["north"]=>
        string(10) "36.0408578"
        ["south"]=>
        string(10) "36.0228111"
        ["east"]=>
        string(12) "-115.0831446"
        ["west"]=>
        string(12) "-115.1151594"
      }
    }
  } 
```

查询发送纬度/经度，这是返回数据的一部分。其余的数据我可以看到目的，但无法弄清楚上面的目的是什么。也许是因为我不是地图专家。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:52:50.517

LatLonBox 是位置边界框的坐标。

# facebook - 在应用程序的 Facebook 帖子中标记朋友

> ID：12639680
> 
> 赞同：1
> 
> 时间：2012-09-28T12:04:35.903
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

是否可以在从我的应用程序创建的帖子中标记朋友？

我在某处看到它不适用于 facebook api..

请帮我 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:28:03.073

是的，这是可能的。阅读[Open Graph 文档](https://developers.facebook.com/docs/opengraph/mention_tagging/)

# perl - 在 perl 中查找重复的哈希键并在其中找到最大值

> ID：12639688
> 
> 赞同：1
> 
> 时间：2012-09-28T12:04:53.877
> 
> 标签：perl, hash, key, duplicates

我的数据在一个文件中，基本上像：

```
a
2
b
6
a
4
f
2
b
1
a
7 
```

我有这个哈希：

```
%hash = {
    a => 2,
    b => 6,
    a => 4,
    f => 2,
    b => 1, 
    a => 7,
}; 
```

我怎样才能找到重复的键以及它们之间的关系？我想要最有价值的那个。

期望的输出：

```
a-->7 
b-->6
f-->2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:27:39.920

如果您只想要特定键的最高值，则将逻辑添加到您对哈希的分配中。此时您将添加一个键和一个值，请执行以下操作：

```
unless (exists $hash{$key} and $hash{$key} >= $value)
{
   $hash{$key} = $value;
} 
```

如果您需要保留所有值，则使每个关键点指向一个值数组。这是您的作业的样子：

```
#Add an element to the array of values for this key.
push @{ $hash{$key} }, $value; 
```

这是在结果数组中为给定键找到最大值的好方法：

```
use List::Util qw/max/;

print max @{ $hash{$key} }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:37:20.283

因此，任务是两两阅读这些行。使用第一个作为键，第二个作为值，您必须跟踪每个键的最大值。

```
%info;

# A loop reading two lines.
while( my $key = <> ) {
    my $value = <>;

    # Handle the case where there are an odd number of lines.
    die "Odd number of lines" unless (defined $value);

    # Assuming only non-negative values, we just silently want to compare
    # keys not seen before as having value 0\. See 'perllexwarn' manual page
    no warnings 'uninitialized'; 

    $info{$key} = $value if $info{$key} <= $value;
}

# Dump the result
say "$_ --> $info{$_} for keys %info; 
```

但像往常一样，有不止一种方法可以做到这一点。尤其是一次读两行。此外，有些人可能更喜欢明确测试是否`$info{$key}`已经存在，而不是仅仅消除警告。

# c# - 将一张图片放在另一张图片下方

> ID：12639690
> 
> 赞同：1
> 
> 时间：2012-09-28T12:04:57.387
> 
> 标签：c#, gdi+, photos

我不擅长处理图片，我想要的是合并两张图片，但我需要第二张图片低于第一张。像

> [图 1]
> [图 2]

示例：我有两个大小为 320x240px 的图像。我想要一个 320x480px 的图像，上半部分是 Image1，下半部分是 Image2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-13T09:48:16.277

```
 Image image1 = GetFirstImage();

        Image image2 = GetSecondImage();

        var bitmapImage = new Bitmap(Math.Max(image1.Width, image2.Width), (image1.Height + image2.Height)); 
```

//.....

```
 using (Graphics g = Graphics.FromImage(bitmapImage))
        {
            g.DrawImage(image1, 0, 0);
            g.DrawImage(image2, 0, image1.Height);
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:37:27.620

此链接将带您了解您想要做什么的完整教程：[Web Archive - Combining Images with C#](http://web.archive.org/web/20130214003927/http://tech.pro/tutorial/921/combining-images-with-csharp)

在教程中，作者首先创建了一个图像对象列表，然后遍历该列表，将每个图像添加到一个新的合并图像中。对于您尝试做的事情来说，这有点矫枉过正，但它是一个完整的代码解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T12:42:29.257

我希望下面这个简单的代码对你有帮助。

```
// bitmap1 is a first image (320, 240).
// bitmap2 is a first image (320, 240).
// newBitmap is a final image (320, 480).

var newBitmap = new Bitmap(320, 480);
var newBitmapGraphics = Graphics.FromBitmap(newBitmap);
newBitmapGraphics.DrawImageUnscaled(bitmap1, 0, 0);
newBitmapGraphics.DrawImageUnscaled(bitmap2, 0, 240); 
```

# java - 从 javascript 错误调用公共 Java 方法

> ID：12639695
> 
> 赞同：0
> 
> 时间：2012-09-28T12:05:12.337
> 
> 标签：java, javascript, html, django

在我的 Django 网页中，我需要 Javascript 来调用 Java 小程序的公共方法。我想让 java 小程序 POST 一些数据到 DJango 网络服务器，但要做到这一点，我需要 cookie 来验证会话。考虑到这一点，我发现我可以从 JS 调用我的小程序的公共方法，所以我尝试了它，但它失败了。我不知道是哪个问题，或者我是否遗漏了什么。

这是代码。

HTML：

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.1.min.js"></script>

<applet name="mapGenerator"
    code="MapGenerator.class"
    archive="{{STATIC_URL}}java/MapGenerator.jar"
    width= 500 height = 300>

        <param name=numero_immagini value="{{floor.count}}">
        <param name=id value="{{building.id}}">
        {% for f in floor %}
            <param name=immagine{{forloop.counter0}} value="{{MEDIA_URL}}{{f.link.name}}">
            <param name=numero_piano{{forloop.counter0}} value="{{f.numero_di_piano}}">
        {%endfor%}
</applet>

<script type="text/javascript">
    function initialize() {
        document.mapGenerator.setCookie(document.cookie);
    }
</script>

<body onload="initialize()"> 
```

类地图生成器：

```
public class MapGenerator extends JApplet {

    //... variables

    public void init() {
        numero_immagini = Integer.parseInt(this.getParameter(N_IMMAGINI));
        id_building = Integer.parseInt(this.getParameter(ID_BUILDING));
        images = new BufferedImage[numero_immagini];
        floors = new int[numero_immagini];

        for(int i=0; i< numero_immagini; i++) {
            try {
                URL url = new URL(getCodeBase(), this.getParameter(IMMAGINE+i));
                    images[i] = ImageIO.read(url);
                    floors[i] = Integer.parseInt(this.getParameter(PIANO_IMMAGINE+i));
            } catch (IOException ioe) {ioe.printStackTrace();}
        }
    }

    public void setCookie(String cookie) {
        this.cookie = cookie;
        ed.cookie = cookie;
        System.err.println(cookie);
    }

    public void start() {

        ed = new Editor(this.getContentPane(), images, floors, id_building);                     
        this.add(ed.getPanel());
        Toolkit kit = this.getToolkit();
        Dimension dim = kit.getScreenSize();
        this.setBounds(dim.width/4, dim.height/4, dim.width/4, dim.height/4);
        this.setVisible(true);
        this.repaint();
    }
} 
```

当我打开这个网页时，这是 JS 控制台中的错误：

```
Uncaught TypeError: Object #<HTMLAppletElement> has no method 'setCookie' 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:29:29.460

我不敢相信这是这么愚蠢的事情……

我只需要把脚本

```
<script type="text/javascript">
    function initialize() {
        document.mapGenerator.setCookie(document.cookie);
    }
</script> 
```

在小程序之前...我要哭了...

# java - 将字符串更改为 byte[] - 无需实际转换

> ID：12639697
> 
> 赞同：3
> 
> 时间：2012-09-28T12:05:14.007
> 
> 标签：java, string, bytearray, byte, type-conversion

我有字符串：

```
String str = "KITTEN"; 
```

我想从中制作一个 byte[] ，但只是：

```
byte[] mybyte = new byte[] { 'K', 'I', 'T', 'T', 'E', 'N'} 
```

任何人都知道如何将字符串更改为该字节 []？我能找到的一切都是关于实际转换的——请注意，我不想用十六进制表示字符串。

PS。问题的标题可能是错误的——我很抱歉，不知道怎么写。

编辑：

```
byte[] myBytes = str.getBytes(); 
```

显示：

```
byte[] display = new byte[] { 0x00, 0, 0, 'K', 'I', 'T'}; 
```

工作，并显示：

```
byte[] display = new byte[] {  0x00, 0, 0, myBytes[0], myBytes[1], myBytes[2] }; 
```

不起作用。我尝试在通过 NFC 连接到 Android 手机的设备的屏幕上显示它。你知道是什么造成了问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T12:13:06.157

您*正在*转换，并且*必须*转换 - a`char`与 a 不同`byte`。

您可以使用“ISO-8859-1”作为传递给的编码`String.getBytes()`，这将使您每个字符一个字节，仅对 U+0000 到 U+00FF 有效（可能包括“孔”中的字符；字符'不是真的在 ISO-8859-1 中，但是嘿......）你会得到 '?' 的 ASCII 表示 但是对于不在该范围内的任何字符。

想要这样做可能表明你早些时候出错了。特别是，如果您试图取回一些您最初转换为字符串而不使用 base64 或类似的东西的任意二进制数据，您很可能已经丢失了数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:18:12.613

getBytes() 对我有用：

```
String str = "KITTEN";
byte[] bytes = str.getBytes();
for(byte b : bytes) {
    System.out.print("'" + (char) b + "' ");
}

'K' 'I' 'T' 'T' 'E' 'N' 
```

@Jon 写的其他所有内容仍然有效，因为[getBytes()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes%28%29)也在进行转换：

> 使用平台的默认字符集将此字符串编码为字节序列，并将结果存储到新的字节数组中。

由于使用 getBytes() 引入了一些平台依赖项，因此您最好显式传递适当的字符集：

```
byte[] bytes = str.getBytes(StandardCharsets.ISO_8859_1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T12:18:43.403

`byte`是一个关键字，因此您不能将其用作变量名：

```
byte[] byte = new byte[] { 'K', 'I', 'T', 'T', 'E', 'N'}; 
```

你可以使用：

```
byte[] myBytes = new byte[] { 'K', 'I', 'T', 'T', 'E', 'N'}; 
```

无论如何，你可以做一个直接的转换`String` `str`：

```
byte[] myBytes = str.getBytes(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:54:58.123

由于信息丢失，投影：char to byte 无效。char 是具有编码信息的 Unicode 字符。一个字节是一个数字。没有编码，字节数没有意义。

# javascript - 根据位置修改 Twitter Bootstrap 的工具提示颜色

> ID：12639708
> 
> 赞同：15
> 
> 时间：2012-09-28T12:05:52.277
> 
> 标签：javascript, css, twitter-bootstrap, tooltip

我正在尝试为工具提示输出各种颜色（编辑：来自 Twitter Bootstrap），但似乎我不太明白。更改默认颜色并不难，只需更改 .tooltip 及其相关定义的颜色即可。

但是假设我想更改正文中特定工具提示的颜色

```
<div id="users" class="row">
    <div id="photo_stack" class="span6 photo_stack">
        <img id="photo1" src="" width="400px" height="300px" alt="" rel="tooltip" data-placement="right" title="Other Color" /> 
```

一个简单的方法，如

```
#users .tooltip { background-color: #somecolor; } 
```

似乎不起作用。我想这与 DOM 有关，我需要将某种类附加到特定的工具提示中？还是我完全关闭了？谢谢 ：）

这是一个 JSFiddle：http: [//jsfiddle.net/rZxrm/](http://jsfiddle.net/rZxrm/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T12:44:08.247

Twitter bootstrap 没有内置此功能，但您可以添加自己的函数来执行此操作，如下所示：

```
$('#photo1').hover(function() {$('.tooltip').addClass('tooltipPhoto')}, function () {$('.tooltip').removeClass('tooltipPhoto')});​ 
```

然后你只需要`tooltipPhoto`在 CSS 中定义类以具有不同的背景颜色。

编辑：更新的解决方案：

```
function changeTooltipColorTo(color) {
    $('.tooltip-inner').css('background-color', color)
    $('.tooltip.top .tooltip-arrow').css('border-top-color', color);
    $('.tooltip.right .tooltip-arrow').css('border-right-color', color);
    $('.tooltip.left .tooltip-arrow').css('border-left-color', color);
    $('.tooltip.bottom .tooltip-arrow').css('border-bottom-color', color);
}

$(document).ready(function () {
    $("[rel=tooltip]").tooltip();
    $('#photo1').hover(function() {changeTooltipColorTo('#f00')});
    $('#photo2').hover(function() {changeTooltipColorTo('#0f0')});
    $('#photo3').hover(function() {changeTooltipColorTo('#00f')});
}); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-02T09:57:37.813

如果您使用工具提示，您可能希望使用内置主题颜色，即信息、成功、危险和警告。然而，Bootstrap 不支持工具提示主题（在撰写本文时为 V3），但我们可以添加几行 CSS 来实现这一点。

理想情况下，我们想要的是一组类`tooltip-info`，`tooltip-danger`等等`tooltip-success`，您可以将它们应用于您正在调用的元素`tooltip()`。我将在下面给出完全符合此要求的代码，并使用 Bootstrap 3.0 进行测试。

## 结果

![在此处输入图像描述](../Images/8f8edc788cee4427d559105f3803c5b6.png)

![在此处输入图像描述](../Images/50fdacc5896dc67291f763860d6b314c.png)

## 它是如何工作的

下面的代码基本上重用了警报组件的样式，因为它与工具提示非常相似。请注意，这样做几乎没有什么好处，包括不仅背景颜色会发生变化，而且文本颜色和边框颜色也会发生变化。此外，它使工具提示具有略微透明的光泽外观。工具提示中的箭头取决于边框颜色，因此可以通过继承警报组件的边框颜色来单独更改。

另请注意，这些不是全局更改。`tooltip-info`除非您像获得默认工具提示一样应用类。

## 用法

```
<span class="tooltip-info"  title="Hello, I'm dangerous">
    Hover here to see tooltip!
</span> 
```

请注意，默认情况下不激活引导工具提示，因此您需要像这样激活（请参阅[https://stackoverflow.com/a/20877657/207661](https://stackoverflow.com/a/20877657/207661)）

```
$(document.body).tooltip({ selector: "[title]" }); 
```

## 小提琴

在这里玩这个代码：http: [//jsbin.com/usIyoGUD/3/edit ?html,css,output](http://jsbin.com/usIyoGUD/3/edit?html,css,output)

## 更少的 CSS 源代码

```
//Import these from your own Bootstrap folder
@import  "js/ext/bootstrap/less/mixins.less";
@import  "js/ext/bootstrap/less/variables.less";

.tooltip-border-styles(@borderColor) {
    & + .tooltip {
        &.top .tooltip-arrow,
        &.top-left .tooltip-arrow,
        &.top-right .tooltip-arrow {
            border-top-color: @borderColor;
        }
        &.bottom .tooltip-arrow,
        &.bottom-left .tooltip-arrow,
        &.bottom-right .tooltip-arrow {
            border-bottom-color: @borderColor;
        }
        &.right .tooltip-arrow {
            border-right-color: @borderColor;
        }
        &.left .tooltip-arrow {
            border-left-color: @borderColor;
        }
    }
}

.tooltip-info {
  & + .tooltip .tooltip-inner {
    .alert-info;
  }
  .tooltip-border-styles(@alert-info-border);
}
.tooltip-danger {
  & + .tooltip .tooltip-inner {
    .alert-danger;
  }
  .tooltip-border-styles(@alert-danger-border);
}
.tooltip-warning {
  & + .tooltip .tooltip-inner {
    .alert-warning;
  }
  .tooltip-border-styles(@alert-warning-border);
}
.tooltip-success {
  & + .tooltip .tooltip-inner {
    .alert-success;
  }
  .tooltip-border-styles(@alert-success-border);
} 
```

## 编译的 CSS

如果你不使用 LESS 或者不想处理它，那么你可以直接使用下面编译的 CSS：

```
.tooltip-info + .tooltip .tooltip-inner {
  color: #31708f;
  background-color: #d9edf7;
  border-color: #bce8f1;
  background-image: -webkit-linear-gradient(top, #d9edf7 0%, #b9def0 100%);
  background-image: linear-gradient(to bottom, #d9edf7 0%, #b9def0 100%);
  background-repeat: repeat-x;
  border-color: #9acfea;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffd9edf7', endColorstr='#ffb9def0', GradientType=0);
}
.tooltip-info + .tooltip.top .tooltip-arrow,
.tooltip-info + .tooltip.top-left .tooltip-arrow,
.tooltip-info + .tooltip.top-right .tooltip-arrow {
  border-top-color: #bce8f1;
}
.tooltip-info + .tooltip.bottom .tooltip-arrow,
.tooltip-info + .tooltip.bottom-left .tooltip-arrow,
.tooltip-info + .tooltip.bottom-right .tooltip-arrow {
  border-bottom-color: #bce8f1;
}
.tooltip-info + .tooltip.right .tooltip-arrow {
  border-right-color: #bce8f1;
}
.tooltip-info + .tooltip.left .tooltip-arrow {
  border-left-color: #bce8f1;
}
.tooltip-danger + .tooltip .tooltip-inner {
  color: #a94442;
  background-color: #f2dede;
  border-color: #ebccd1;
  background-image: -webkit-linear-gradient(top, #f2dede 0%, #e7c3c3 100%);
  background-image: linear-gradient(to bottom, #f2dede 0%, #e7c3c3 100%);
  background-repeat: repeat-x;
  border-color: #dca7a7;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff2dede', endColorstr='#ffe7c3c3', GradientType=0);
}
.tooltip-danger + .tooltip.top .tooltip-arrow,
.tooltip-danger + .tooltip.top-left .tooltip-arrow,
.tooltip-danger + .tooltip.top-right .tooltip-arrow {
  border-top-color: #ebccd1;
}
.tooltip-danger + .tooltip.bottom .tooltip-arrow,
.tooltip-danger + .tooltip.bottom-left .tooltip-arrow,
.tooltip-danger + .tooltip.bottom-right .tooltip-arrow {
  border-bottom-color: #ebccd1;
}
.tooltip-danger + .tooltip.right .tooltip-arrow {
  border-right-color: #ebccd1;
}
.tooltip-danger + .tooltip.left .tooltip-arrow {
  border-left-color: #ebccd1;
}
.tooltip-warning + .tooltip .tooltip-inner {
  color: #8a6d3b;
  background-color: #fcf8e3;
  border-color: #faebcc;
  background-image: -webkit-linear-gradient(top, #fcf8e3 0%, #f8efc0 100%);
  background-image: linear-gradient(to bottom, #fcf8e3 0%, #f8efc0 100%);
  background-repeat: repeat-x;
  border-color: #f5e79e;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fffcf8e3', endColorstr='#fff8efc0', GradientType=0);
}
.tooltip-warning + .tooltip.top .tooltip-arrow,
.tooltip-warning + .tooltip.top-left .tooltip-arrow,
.tooltip-warning + .tooltip.top-right .tooltip-arrow {
  border-top-color: #faebcc;
}
.tooltip-warning + .tooltip.bottom .tooltip-arrow,
.tooltip-warning + .tooltip.bottom-left .tooltip-arrow,
.tooltip-warning + .tooltip.bottom-right .tooltip-arrow {
  border-bottom-color: #faebcc;
}
.tooltip-warning + .tooltip.right .tooltip-arrow {
  border-right-color: #faebcc;
}
.tooltip-warning + .tooltip.left .tooltip-arrow {
  border-left-color: #faebcc;
}
.tooltip-success + .tooltip .tooltip-inner {
  color: #3c763d;
  background-color: #dff0d8;
  border-color: #d6e9c6;
  background-image: -webkit-linear-gradient(top, #dff0d8 0%, #c8e5bc 100%);
  background-image: linear-gradient(to bottom, #dff0d8 0%, #c8e5bc 100%);
  background-repeat: repeat-x;
  border-color: #b2dba1;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffdff0d8', endColorstr='#ffc8e5bc', GradientType=0);
}
.tooltip-success + .tooltip.top .tooltip-arrow,
.tooltip-success + .tooltip.top-left .tooltip-arrow,
.tooltip-success + .tooltip.top-right .tooltip-arrow {
  border-top-color: #d6e9c6;
}
.tooltip-success + .tooltip.bottom .tooltip-arrow,
.tooltip-success + .tooltip.bottom-left .tooltip-arrow,
.tooltip-success + .tooltip.bottom-right .tooltip-arrow {
  border-bottom-color: #d6e9c6;
}
.tooltip-success + .tooltip.right .tooltip-arrow {
  border-right-color: #d6e9c6;
}
.tooltip-success + .tooltip.left .tooltip-arrow {
  border-left-color: #d6e9c6;
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-10T19:35:10.193

我为您的问题找到了另一种解决方案（我试图做同样的事情）。只需更改主 CSS 样式表中的颜色（只要您的样式表在文档头部的 bootstrap 之后列出，它就会覆盖 bootstrap）。

具体来说，这是您添加到主样式表的内容（例如）：

```
.tooltip-inner {
  background-color: #D13127;
  color: #fff;
}

.tooltip.top .tooltip-arrow {
  border-top-color: #D13127;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T19:41:54.103

请参阅[动态地将类添加到 Bootstrap 的“弹出框”容器](https://stackoverflow.com/questions/12170357/dynamically-add-a-class-to-bootstraps-popover-container)

她的修复通过用一行修改 bootstrap.js 来允许数据类选择器

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-31T19:56:46.887

这是我在 sass 中的做法

```
 .tooltip-inner
    color: #fff
    background-color: #111
    border: 1px solid #fff

  .tooltip.in
    opacity: .9 
```

和位置相关部分

```
 .tooltip.bottom .tooltip-arrow
    border-bottom-color: #fff 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-10T21:48:50.830

请参阅我对类似问题的回复：[更改引导工具提示颜色](https://stackoverflow.com/a/50788258/9921853)

它适用于现有和动态创建的元素的样式工具提示，使用 Bootstrap 3 或 Bootstrap 4。

`Bootstrap 3:`

```
$(document).on('inserted.bs.tooltip', function(e) {
    var tooltip = $(e.target).data('bs.tooltip');
    tooltip.$tip.addClass($(e.target).data('tooltip-custom-class'));
}); 
```

示例：
[对于 Bootstrap 3](https://www.bootply.com/UORR04ncTP)
[对于 Bootstrap 4](https://jsfiddle.net/nsmcan/naq530hx)

# visual-studio - Xamarin：VS2010 Ultimate 加载项或 MonoDevelop for Android - 智能感知和代码颜色提示不起作用

> ID：12639709
> 
> 赞同：0
> 
> 时间：2012-09-28T12:05:55.113
> 
> 标签：visual-studio, xamarin.android, monodevelop, xamarin

![在此处输入图像描述](../Images/cf5008e4cab9fb3b521c9954fd30ef31.png)我一直在寻找和搜索在 Mono 测试中发现的类似问题，但找不到任何东西。

**问题：** 我在 Visual Studio 或 Monodevelop 中的智能感知不起作用。如何解决这个问题？

除了我提到的问题外，我仍然可以完成这项工作，并且一切正常。无法输入 w/c 的所有内容，这会耗费我大量时间并且容易出现拼写错误。请帮忙。

**笔记：**

我已经下载了在 Xamarin 站点上找到的最新安装程序，w/c 已经一键拥有所有内容（所有先决条件和要求都打包在一起）

**然后...**单独卸载并重新安装它，但烦人的事情仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:14:55.877

对于为什么安装可能不适合您的任何建议，我无能为力 - 抱歉！

但看起来 Visual Studio 将其作为普通文本而不是 XML 或 AXML 打开。

对于 XML 编辑器，包括“android：”属性的自动完成，然后您可以从解决方案资源管理器中的文件右键菜单中选择“打开方式” - 在此选择“XML（文本）编辑器” - 还有在该对话框中将其设置为默认值的选项。

对于 Xamarin 视觉设计器 - 您将在其中看到设计表面，但不会看到 XML 智能感知 - 然后您应该能够从同一个“打开方式”尝试“Android Designer 的 Mono”。

# sql - 在 oracle 中对两个参数使用 decode

> ID：12639711
> 
> 赞同：-2
> 
> 时间：2012-09-28T12:06:01.737
> 
> 标签：sql, oracle

场景是：

```
decode(rslt1,
       'stores',('stores,dead store'),
       rslt1); 
```

解释：如果 my`rslt1`等于`stores`then`rslt`应该是`stores`and `dead store`。指两个论点反对一个论点。

如果有其他方法请告诉我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:51:08.273

您并没有对上下文过于慷慨，但我认为您的意思是在 WHERE 子句中使用它。

我可能会在这里使用 DECODE（或 CASE），但使用普通过滤器：

```
 select *
 from your_table     
 where ( ( rslt1 = 'stores' 
            and rslt = 'dead store') 
          or rslt =  rslt1 ) 
```

# c# - 如何获取 Skype 通话状态

> ID：12639713
> 
> 赞同：2
> 
> 时间：2012-09-28T12:06:10.637
> 
> 标签：c#, skype

我正在使用 Skype API。我必须获取 Skype API 返回的呼叫状态。

表示被叫用户改变通话状态（接听、未接、discard.onhold、转接等）。

或呼叫用户（呼叫方）取消或完成呼叫。我想在我的应用程序中获取呼叫状态

```
 switch (CurrentStatus)
        {
            case TCallStatus.clsBusy:
                //Do something
                break;
            case TCallStatus.clsCancelled:
                //Do something
                break;
            case TCallStatus.clsFailed:
                //Do something
                 break;
            case TCallStatus.clsFinished:
               //Do something
                break;
    ..........
    .......
   } 
```

任何帮助都是可取的

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:16:08.527

您可以使用`SKYPE4COMLib.Call.Status property`

```
if(yourInstance.Call.Status.Equals(TCallStatus.clsRinging)
{
  Console.WriteLine("Print status : {0}", Call.Status.ToString());
} 
```

# android - 2 android中的LinearLayout内的LinearLayout

> ID：12639714
> 
> 赞同：0
> 
> 时间：2012-09-28T12:06:12.643
> 
> 标签：android, android-layout, android-linearlayout

我必须开发一个可扩展列表视图 android 示例。我有一个设计问题。请帮我。我该如何解决这个错误？请参考此屏幕截图：[当前 o/p](http://screencast.com/t/LYfkXNiWs) 请参考我的屏幕截图并为此提供解决方案。![在此处输入图像描述](../Images/989a22396d4345de9ab9e8f3d354c311.png)

我希望应用这种格式：

```
* Order info
Payment_method:
      Payment_method
Subtotal
      Subtotal
* CustomerInfo
Firstname
      Firstname
Lastname
      Lastname
Phone
      Phone 
```

这里 * 提到了第一组（订单信息）和第二组（客户信息）。在这里，我希望单击第一组，这意味着应该显示 payment_method 和小计。

单击第二组时，应显示名字、姓氏和电话。但在这里我必须运行应用程序并单击第一组，然后成功显示 payment_method 和小计。之后，这里也显示了一些空格。然后我必须点击第二组意味着首先显示一些空格，然后只显示名字，姓氏和电话。我该如何解决这个错误？请给我详细解释。

这是我的布局文件代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="match_parent"
    android:orientation="vertical" >
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    >
   <TextView
    android:id="@+id/payment_method1"
     android:paddingLeft="5px"
     android:textSize="15dip"
     android:text="payment_method"
     android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/> 
   <TextView
    android:id="@+id/payment_method"
     android:paddingLeft="75px"
     android:textSize="15dip"
    android:textColor="#10bcc9"
    android:textStyle="bold"
     android:text="payment_method"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
   <TextView
    android:id="@+id/subtotal1"
      android:text="subtotal"
     android:paddingLeft="5px"
     android:textSize="15dip"

    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
   <TextView
    android:id="@+id/subtotal"
      android:text="subtotal"
     android:paddingLeft="65px"
     android:textSize="15dip"
    android:textColor="#10bcc9"
    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
    </LinearLayout>
       <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
     >
                  <TextView
    android:id="@+id/firstname1"
     android:paddingLeft="5px"
     android:textSize="15dip"

    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/> 
                   <TextView
    android:id="@+id/firstname"
     android:paddingLeft="65px"
     android:textSize="15dip"
    android:textColor="#10bcc9"
    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>

                  <TextView
    android:id="@+id/lastname1"

     android:paddingLeft="5px"
     android:textSize="15dip"

    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
                  <TextView
    android:id="@+id/lastname"

     android:paddingLeft="65px"
     android:textSize="15dip"
    android:textColor="#10bcc9"
    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
    <TextView
    android:id="@+id/phone1"
     android:paddingLeft="5px"
     android:textSize="15dip"

    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/> 
      <TextView
    android:id="@+id/phone"
     android:paddingLeft="65px"
     android:textSize="15dip"
    android:textColor="#10bcc9"
    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
      </LinearLayout>

       </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:51:21.523

为什么不使用 API 演示？

他们有一些很好的例子来说明如何做到这一点。

检查`views/expandandable lists/`类别。

当然，您可以按照自己的方式对其进行自定义...

可以在 上找到演示（如果您通过 sdk 管理器下载了它们）`SDK_MANAGER_PATH/samples/android-##/ApiDemos`，其中 SDK_MANAGER_PATH 是 sdk 管理器的安装路径，## 是示例的 android 目标版本（我通常使用最新的) .

# c# - 更新数据库行时通知进程/ASP.Net 应用程序

> ID：12639716
> 
> 赞同：0
> 
> 时间：2012-09-28T12:06:20.240
> 
> 标签：c#, asp.net, database, caching, notifications

我不知道这是否可能，或者它是否有意义。如果说有 2 台服务器用于 Web 应用程序，并且一台在服务器 1 上进行更新，则服务器 2 不会知道更新。这对于缓存来说尤其成问题，因为服务器 2 将拥有缓存项目的“陈旧”副本。

每当说数据库行被更新时，有什么方法可以“通知”两台服务器？使用的数据库是 MySQL。如果没有，关于如何进行此操作的任何想法/最佳实践？

我们正在寻求迁移到服务器场，这是目前我们发现的最成问题的问题之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:00:17.570

使用触发器：[http](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html) ://dev.mysql.com/doc/refman/5.0/en/create-trigger.html或 MySql 复制 [http://dev.mysql.com/doc/refman/5.0/en/replication.html](http://dev.mysql.com/doc/refman/5.0/en/replication.html) 这真的取决于你想要完成什么。有很多方法可以解决这个问题，包括代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:42:03.550

您不应该过多关注数据库中的更改。您的 c# 代码应该处理这个问题。您可以在设置新值的方法中触发一个事件，然后使用某些 wcf 服务与其他服务器通信，它必须清理它的缓存/更新它的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:46:46.363

看看这个

[http://dev.mysql.com/doc/refman/5.0/en/replication.html](http://dev.mysql.com/doc/refman/5.0/en/replication.html)

它简要介绍了MySql服务器中可用的复制功能。为此目的，它是 mysql 服务器的内置功能。

# nginx - 如何从 nGINX 代理传递到 WebSocket 服务器（龙卷风）

> ID：12639717
> 
> 赞同：1
> 
> 时间：2012-09-28T12:06:28.703
> 
> 标签：nginx, websocket, push, tornado

我正在开发 Django Web 服务。我正在尝试使用 WebSocket (ws://) 来使用 PUSH。到目前为止，nGINX 中不支持 ws。所以我使用 Tornado Server 来托管 WebSocket。许多（几乎所有）教程都有使用 Socket.io 的解决方案。我不想使用 Socket.io 因为它不是纯 WebSocket（根据我）。我只想使用 ws 而不是 Socket.io (Node.js)。

好吧，我的前端服务器应该是 nGINX 来服务 HTTP 请求。ws:// 请求应该被传递到 Tornado 服务器（或任何其他服务器，如果支持）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-15T04:17:10.047

这是 NGINX 配置片段

```
map $http_upgrade $connection_upgrade {
    default upgrade;
    '' close;
}

upstream websocket {
    server 192.168.100.10:8010;
}

server {
    listen 8020;
    location / {
        proxy_pass http://websocket;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $connection_upgrade;
    }
} 
```

更多细节可以在他们的博客[https://www.nginx.com/blog/websocket-nginx/中找到](https://www.nginx.com/blog/websocket-nginx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T15:48:29.700

*在撰写本文时，Nginx 不支持 websockets - 现在在 1.3.13 中支持（2013 年 2 月）*

问题是 nginx 不支持 websockets，因为它终止并将数据代理到下游服务。您需要将 HAProxy 放在您的 nginx 服务器前面，以按照您想要的方式路由流量。

这里有一个很好的例子——HAProxy [+ WebSocket Disconnection——](https://stackoverflow.com/questions/4360221/haproxy-websocket-disconnection)虽然他们在谈论 nodejs 作为后端服务，但本质上一切都是一样的。

# java - 解析大于 hdfs 块大小的 XmlInputFormat 元素

> ID：12639745
> 
> 赞同：2
> 
> 时间：2012-09-28T12:07:52.923
> 
> 标签：java, xml, hadoop

我是 Hadoop MapReduce 的新手（准确地说是 4 天），我被要求在集群上执行分布式 XML 解析。根据我在 Internet 上的（重新）搜索，使用 Mahout 的 XmlInputFormat 应该相当容易，但我的任务是确保系统适用于巨大的 (~5TB) XML 文件。

据我所知，发送到映射器的文件拆分不能大于 hdfs 块大小（或每个作业块大小）。[如果我错了，请纠正我]。

我面临的问题是一些 XML 元素很大（~200MB），一些很小（~1MB）

所以我的问题是：当 XmlInputFormat 创建的 XML 元素块大于块大小时会发生什么？它会将整个大文件（比如 200MB）发送到映射器还是将元素分成三个分割（64+64+64+8）发送？

我目前无法访问公司的 hadoop 集群（直到某个时候才能访问），所以我无法进行测试并找出答案。请帮帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T01:20:12.970

所以要澄清一些事情：

Mahout 的 XMLInputFormat 将处理 XML 文件并提取两个配置的开始/结束标记之间的 XML。因此，如果您的 XML 如下所示：

```
<main>
  <person>
    <name>Bob</name>
    <dob>1970/01/01</dob>
  </person>
</main> 
```

并且您已将开始/结束标签配置为`<person>`and `</person>`，那么您的映射器将通过以下`<LongWritable, Text>`对传递给它的 map 方法：

```
LongWritable: 10
Text: "<person>\n    <name>Bob</name>\n    <dob>1970/01/01</dob>\n  </person>" 
```

然后，您在映射器中如何处理这些数据取决于您。

关于拆分、`XmlInputFormat`扩展`TextInputFormat`，因此如果您的输入文件是可拆分的（即未压缩或使用可拆分的编解码器（如 snappy）压缩），则该文件将由一个或多个映射器处理，如下所示：

1.  如果输入文件大小（比如 48 MB）小于 HDFS 中的单个块（比如 64MB），并且您没有配置最小/最大拆分大小属性，那么您将获得一个单独的映射器来处理文件
2.  与上面一样，但是您将最大拆分大小配置为 10MB ( `mapred.max.split.size=10485760`)，那么您将获得 5 个地图任务来处理文件
3.  如果文件大于块大小，那么您将获得每个块的映射任务，或者如果配置了最大拆分大小，则文件的每个部分按该拆分大小划分的映射

当文件被分割成这些块或分割大小的块时，XmlInputFormat 将寻找块/分割边界的字节地址/偏移量，然后向前扫描，直到找到配置的 XML 开始标记或到达块的字节地址/分割边界。如果找到开始标签，它将使用数据，直到找到结束标签（或文件结尾）。如果它找到结束标记，一条记录将传递给您的映射器，否则您的映射器将不会收到任何输入。需要强调的是，当试图找到结束标签时，地图可能会扫描超过块/拆分的末尾，但只有在找到开始标签时才会这样做，否则扫描会在块/拆分的末尾停止。

所以（最终）回答你的问题，如果你没有配置一个映射器（并且正在使用默认值或识别映射器，因为它也是已知的），那么是的，XML块有多大（MB，GB , TB 的！）它将被发送到减速器。

我希望这是有道理的。

**编辑**

要跟进您的评论：

1.  是的，每个映射器都将尝试处理文件的拆分（字节范围）
2.  是的，无论您设置的最大拆分大小如何，您的映射器都将接收代表开始/结束标签之间（包括）之间数据的记录。person 元素无论其大小如何都不会被拆分（显然，如果在 start 和 end 元素之间存在 GB 的数据，您很可能会在尝试将其缓冲到 Text 对象中时耗尽内存）
3.  Continuing from the above, your data will never be split up between the start and end element, a person element will be sent in its entirity to a mapper, so you should always be ok using something like a SAX parser to further process it without fear that you're only seeing a portion of the person element.

# c++ - 仅使用 QSql 将所选值插入 SQLite 表

> ID：12639748
> 
> 赞同：1
> 
> 时间：2012-09-28T12:08:04.830
> 
> 标签：c++, sqlite, qt

我想在 SQLite 表中插入一些值。

查询是：

```
insert into TableName (field1,field2,field3) values (field1val, field2val, field3val) 
```

假设该表有 20 个字段。我想根据用户输入的这个值来选择应该插入哪个字段。其余字段应该没有值。

我目前的解决方案是：

```
QString valuesToInsertFieldNames("(");
QString valuesToInsert("(");
if(field1val != -1)
{
    valuesToInsertFieldNames+= "field1";
    valuesToInsert += QString("%1 ").arg(field1val);
}
if(field2val != -1)
{
    valuesToInsertFieldNames+= "field2";
    valuesToInsert += QString("%1").arg(field2val);
}
...
valuesToInsertFieldNames+= ")";
valuesToInsert += ")";
query.exec(QString("insert into TableName " + valuesToInsertFieldNames + 
                   "values" + valuesToInsert) 
```

有没有更好的方法呢？也许一些 QSql 功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:31:28.427

我会将名称和值保存在地图中，并在一个循环中构造查询：

```
//You hold the field names and the corresponding values here.
//The map's key is the field name, the map's value is the value. 
QVariantMap pairs;
//this will hold the values to compare with to decide whether to print the value
//or not
QVariantList compareWithMe;

QString fieldNames;
QString fieldValues;

int count = 0;
QVariantMap::iterator it = pairs.begin();
for( it; it != pairs.end(); it++ )
{
    if( it.value().toInt() == compareWithMe[count] )
    {
        count++;
        continue;
    }
    fieldNames.append( it.key() );
    fieldValues.append( it.value().toString() );
    //fieldValues.append( QString("%1").arg(it.value()) ); if you like it this way. 
    count++;
}

//Note that I've placed the opening and closing braces here, 
//saving you two lines of code:
//fieldNames.append(")");
//fieldValues.append(")");
query.exec(QString(
           "INSERT INTO TableName (" 
           + fieldNames 
           + ") VALUES (" 
           + fieldValues 
           + ")"
           )); 
```

# objective-c - 如果不使用属性“copy”，有没有办法显示 NSString 属性的警告？

> ID：12639749
> 
> 赞同：2
> 
> 时间：2012-09-28T12:08:13.693
> 
> 标签：objective-c, xcode

是不是真的对于任何具有可变子类的类的属性，最好用`copy`作为属性，所以对于`NSString`, an`NSMutableString`可以传入，并且`NSString`可以欣然接受，所以最好使用`copy`使得可变的string 不能改变`NSString 属性后面的内容？

如果是这样，是否有编译器警告设置可以发出这种情况的信号，说`copy`可能会用来代替`strong`or `assign`？

# azure - Azure 服务总线 - SubscriptionClient.AcceptMessageSession() 与 SubscriptionClient.BeginAcceptMessageSession()

> ID：12639751
> 
> 赞同：2
> 
> 时间：2012-09-28T12:08:21.240
> 
> 标签：azure, servicebus, azureservicebus

在 Azure 服务总线命名空间中，有一种`SubscriptionClient`类型，它具有以这种方式启动 MessageSession 的方法：-

```
MessageSession session = subscriptionClient.AcceptMessageSession(...); 
```

这是同步版本，它返回一个 MessageSession。该库还提供了一个异步版本，BeginAcceptMessageSession()。这个让我很吃惊，因为它调用了一个回调，传入一个 IAsyncResult 和你希望传递的任何状态对象。在我的例子中，我传递了 SubscriptionClient 实例，以便我可以在 SubscriptionClient 上调用 EndAcceptMessageSession()。BeginAcceptMessageSession() 的返回类型为 void。

如何访问通过 BeginAcceptMessageSession() 接受的 MessageSession？我在回调的结果参数中得到的只是我的 SubscriptionClient 实例，我需要它来通过 EndAcceptMessageSession() 终止 BeginAcceptMessageSession()。

MessageSession 引用无处可寻。该文档在这方面没有帮助。在 Google 上搜索仅显示很少的 3 页搜索结果，其中大部分只是来自 MSDN 的方法本身的在线描述。我查看了 AsyncManager.Parameters ，它也是空的。

有谁知道应该如何调用 BeginAcceptMessageSession() 以便我可以获得对由此创建的 MessageSession 的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:36:52.543

您应该像这样调用该方法：

1.  `IAsyncResult`使用接受和 的方法调用 begin 方法`SubscriptionClient`。
2.  在另一种方法中（在本例中为 AcceptDone）`EndAcceptMessageSession`，`IAsyncResult`调用`MessageSession`

您在这里看到的是异步编程模型的标准实现。

```
 private static void Do()
    {
        SubscriptionClient client = ...
        client.BeginAcceptMessageSession(AcceptDone, client);
    }

    public static void AcceptDone(IAsyncResult result)
    {
        var subscriptionClient = result.AsyncState as SubscriptionClient;
        if (subscriptionClient == null)
        {
            Console.WriteLine("Async Subscriber got no data.");
            return;
        }

        var session = subscriptionClient.EndAcceptMessageSession(result);
        ...

        subscriptionClient.Close();
    } 
```

# objective-c - iPad应用程序的自定义图表

> ID：12639752
> 
> 赞同：2
> 
> 时间：2012-09-28T12:08:23.040
> 
> 标签：objective-c, ios, cocoa-touch, charts

我必须为 iPad 应用程序绘制如下图所示的图表。是否有任何免费的本地图表 api 可用？

或者任何帮助绘制它...

![在此处输入图像描述](../Images/5a88b3145d9fc47168a25fb56bbfdc9e.png)

![在此处输入图像描述](../Images/996465ef62210d7d2482df2d0132f999.png)

![在此处输入图像描述](../Images/c47209d0a753a6175f675751053d9bd8.png)

任何帮助都是不言而喻的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T05:38:38.327

我想使用[Quartz 2D](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001066)。我不认为任何图书馆都会做你的交易。您需要创建自己的。这是我的想法。

对于一种图表，您可以了解速度计的工作原理。Eeww，我没有搜索链接，希望想法可以。您可以计算百分比的角度并相应地绘制弧线。这不会太难。

对于液滴，哎呀，会有点忙。但这里有一些逻辑：

我想你会有像图表一样的液滴中每个段的百分比。你可以为他们计算半径！希望下面的图片能更好地解释你的想法。我只是想分享逻辑而不是代码，因为 SO 并不是要给我代码之类的东西 :)

希望这可以帮助

![在此处输入图像描述](../Images/fa48e1295262bc3b49a4e7843dc8479c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T04:27:32.633

我在[GitHub 上](https://github.com/vikingosegundo/PlectrumView)有一个工作项目。

```
#import "PlectrumView.h"

@implementation PlectrumView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
    }
    return self;
}

-(void) drawPlectrumWithPercentage:(CGFloat) percentage color:(UIColor *)color
{
    CGFloat factor = self.frame.size.width ;
    percentage*=factor;
    UIBezierPath* plectrum = [UIBezierPath bezierPathWithRoundedRect: CGRectMake(0, factor - percentage, percentage,percentage)
                                                   byRoundingCorners: UIRectCornerTopLeft | UIRectCornerTopRight | UIRectCornerBottomRight
                                                         cornerRadii: CGSizeMake(percentage/2, percentage/2)];
    [color setFill];
    [plectrum fill];
}

- (void)drawRect:(CGRect)rect
{
    [self drawPlectrumWithPercentage:1.0 color:[UIColor colorWithWhite:.9 alpha:1]];
    [self drawPlectrumWithPercentage:.75 color:[UIColor colorWithRed:245.0/255.0 green:134.0/255.0 blue:122.0/255.0 alpha:1]];
    [self drawPlectrumWithPercentage:.61 color:[UIColor colorWithRed:171.0/255.0 green:212.0/255.0 blue:105.0/255.0 alpha:1]];
}

@end 
```

结果是

![在此处输入图像描述](../Images/0ee49867355373806acf60396bf3c010.png)

* * *

我改变拨片代码的方式是它的面积将代表百分比而不是它的宽度。感觉更自然。

![新拨片](../Images/74599aa074048b17c997135b6e935cef.png)

```
-(void) drawPlectrumWithPercentage:(CGFloat) percentage color:(UIColor *)color
{
    static CGFloat pi = 3.141592653589793;
    static CGFloat radius100percent = 50.0;

    static CGFloat area100percent;
    static CGFloat threeFouthPiPlusOne;
    area100percent= radius100percent * radius100percent * pi *3/4 + radius100percent*radius100percent;
    threeFouthPiPlusOne = (1 + (pi*(3.0/4.0)));
    CGFloat area = area100percent * percentage;

    CGFloat newRadius = sqrt(area / threeFouthPiPlusOne);
    percentage = newRadius/ 50.0;
    CGFloat factor = self.frame.size.width ;
    percentage*=factor;
    UIBezierPath* plectrum = [UIBezierPath bezierPathWithRoundedRect: CGRectMake(0, factor - percentage, percentage,percentage)
                                                   byRoundingCorners: UIRectCornerTopLeft | UIRectCornerTopRight | UIRectCornerBottomRight
                                                         cornerRadii: CGSizeMake(percentage/2, percentage/2)];
    [color setFill];
    [plectrum fill];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T20:11:06.110

有很多“图表”库：

查看[可可控件](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=chart)

或者这个：

[仪表视图](https://github.com/frankus/MeterView)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T20:19:55.780

您的示例图片实际上很容易使用[Quartz 2D](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001066)绘制。如果您不关心图表的具体外观，我建议您查看[已经](http://code.google.com/p/core-plot/wiki/PlotExamples) [存在](https://stackoverflow.com/questions/769749/is-there-a-good-charting-library-for-iphone)的内容。如果您需要图表看起来与您显示的完全一样（例如因为它们应该看起来类似于 Web 应用程序），我建议您自己绘制它们。绘制您展示的那种简单图表并不难：

*   对文本使用 UILabel
*   [使用CGPath](https://developer.apple.com/library/mac/documentation/graphicsimaging/Reference/CGPath/Reference/reference.html)为水滴形状创建图层。
*   使用每个图表的值移动和缩放图层。只需几行代码，它们甚至可以流畅地制作动画。

如果您想尝试并需要更多详细信息，请告诉我。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-10T19:49:14.000

如果您使用 SVG，您可以使用以下函数轻松创建形状：

```
/**
 * @param {SVGPathElement} aShape a SVG path element
 * @param {number} radius the radius of the plectrum's arc
 * @param {string} fillColor color in "#rrggbb" format
 */
function drawPlectrum(aShape, radius, fillColor) {

    // Creating a string which defines a path in SVG
    // M = moveto, A = line to, etc. See http://www.w3.org/TR/SVG/paths.html
    var ss="M "+parseInt(0)+" "+parseInt(0)+" ";         // moveto 0, 0
    ss+="L "+parseInt(0)+" "+parseInt(radius)+" ";       // lineto 0, R                
    ss+="A "+parseInt(radius)+" "+parseInt(radius)+" 0 0 0 "+parseInt(radius)+" "+parseInt(2*radius)+" ";// elliptic curve to R, 2*R
    ss+="A "+parseInt(radius)+" "+parseInt(radius)+" 0 0 0 "+parseInt(2*radius)+" "+parseInt(radius)+" ";// elliptic curve to 2*R, R
    ss+="A "+parseInt(radius)+" "+parseInt(radius)+" 0 0 0 "+parseInt(radius)+" "+parseInt(0)+" ";       // elliptic curve to R, 0
    ss+="Z";                                             // closepath

    // The d attribute of the path element holds the line information
    // In XML the element will essentially be <path d="*the created string*">
    aShape.setAttribute("d", ss);

    // Give the color                
    aShape.setAttribute("fill", fillColor);                
} 
```

连续的图纸看起来像这样：

```
 // Note that 3 different path elements are used to overlap the plectrums
    drawPlectrum(node, 100, "#aaaaaa");
    drawPlectrum(node2, 75, "#33dd33");            
    drawPlectrum(node3, 50, "#3333dd"); 
```

**编辑 1：** 在代码中添加了更多注释以便更好地理解

![拨片](../Images/c8e1c9e660af12bf60d627fbf11a2d1b.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-28T13:05:32.077

[下载这个项目](https://github.com/ReetuRaj/MIMChart-Library)并使用它，但他们正在使用 ARC。希望对您有所帮助！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-10T15:29:05.867

我认为以上所有可能都可以使用具有使用数学代码增加尺寸/直径的底层形状的透明图像来完成。

使用弧度百分比，您可以让刻度盘`(available area / 100) * Amount of Progress` ，然后让图像旋转一定量以使刻度盘就位，并从左到右以相同的量填充底层彩色正方形？这将节省很多绘图代码。

# ruby-on-rails - Rails 3.2.8、sqlite3、ActiveRecord 为什么排序方式不对？

> ID：12639762
> 
> 赞同：0
> 
> 时间：2012-09-28T12:08:57.617
> 
> 标签：ruby-on-rails, sorting, sqlite

我写了两个简单的关系助手：

*   `with_preferred_sort_order`返回一个关系
*   `all_on_page`返回`[pages_count, record_array]`

with_preferred_sort_order 奇怪地对记录进行排序：

```
1.9.3p194 :040 > Article.with_preferred_sort_order.
all_on_page(1).last.map{|a| puts a.title[0..20]};nil
  (0.5ms)  SELECT COUNT(*) FROM "articles" 
  Article Load (157.9ms)  SELECT "articles".* FROM "articles" 
ORDER BY title Desc LIMIT 50 OFFSET 0

“The Bar for Success 
method_missing in Jav
jQuery on Rails: A Fr
jQuery in Action (w00
jQuery in Action (w00
jQuery Selector Refca
jQuery Selector Refca
jQuery Selector Refca
jQuery 1.4 and Malfor
jQuery 1.4 and Malfor
What’s Wrong with “HT
What’s Up With All Th
What’s Up With All Th
What’s Up With All Th
What’s Up With All Th
What’s New in Bundler
Vibrant Ink Theme for
Using the New Gem Bun
Using the New Gem Bun
Using SproutCore 2.0 
Using SproutCore 2.0 
Using SproutCore 2.0 
Using >= Considered H
Understanding “Protot
Understanding JavaScr
Tokaido: My Hopes and
Tokaido Status Update
Today’s Dispatch: Wea
Threads (in Ruby): En
Threads (in Ruby): En
Threads (in Ruby): En
The Rails 3 Router: R
The Rails 3 Router: R
The Irony of the iPad
Textmate gem
Textmate Search in a 
Stop Watching Sophie’
Spinning up a new Rai
Spinning up a new Rai
Some of the Problems 
Simplifying Rails Blo
Search within a folde
Ruby 2.0 Refinements 
Ruby 2.0 Refinements 
Ruby 2.0 Refinements 
RailsConf Talk Recap
RailsConf Slides
RailsConf Slides
RailsConf Slides
RailsConf Europe Slid
 => nil 
1.9.3p194 :041 > 
```

这里是源

```
 def self.included recipient
    with recipient do
      scope :with_preferred_sort_order, 
        lambda { 
          #sort_by  = recipient.preferences.sort_by; 
          #asc_desc = recipient.preferences.asc_desc; 
          #recipient.order("%s %s"%[sort_by, asc_desc]) 
          sort_by  = preferences.sort_by; 
          asc_desc = preferences.asc_desc; 
          order("%s %s"%[sort_by, asc_desc]) 
        }
    end
  end 
```

还有一个

```
module ActiveRecord
  class Relation
    # Returns an array [ pages_range, items_array]
    #   pages_range is a range of pages, which starts from 1, e.g. 1..19
    #   items_array is an array which contains items of page_number page
    #
    def all_on_page page_number=1, items_per_page=nil
      def total_pages items_qty, items_per_page
        r = items_qty/items_per_page
        r == 0 ? 1 : items_qty % items_per_page !=0 ? r+1 : r
      end

      items_per_page ||= self.klass.respond_to?(:preferences) ? 
        self.klass.preferences.items_per_page.to_i : 10
      items_qty = self.count

      pages_range = 1..total_pages(items_qty, items_per_page)
      offset      = (page_number - 1)*items_per_page
      items_array = self.offset(offset).limit(items_per_page).all

      [ pages_range, items_array ]
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:09:47.473

这里有几个问题：

1.  第一个条目以非 ASCII 字符开头（不确定它到底是什么，但它不是标准的双引号）。我相信那些在标准 ASCII 字符之后排序。

2.  您似乎希望您的条目从 A 到 Z 排序，但您的 SQL 指定`ORDER BY title Desc`，它将从 Z 到 A 降序排序。您想要升序排序（`ORDER BY title ASC`或只是`ORDER BY title`）。这也是为什么上面的非 ASCII 字符出现在顶部而不是底部的原因。

3.  它没有指定，但听起来您可能期望排序不区分大小写。SQLite 中的标准整理顺序是 BINARY，它根据 ASCII 值进行排序。由于大写字母的 ASCII 值低于小写字母，因此所有以大写字母开头的标题将排在所有以小写字母开头的标题之前。

阅读[SQLite 关于排序序列的文档](http://www.sqlite.org/datatype3.html#collation)。为了使标题以不区分大小写的方式排序，您需要使用 NOCASE 整理序列，或者将其添加到 SELECT：

```
...ORDER BY title COLLATE NOCASE... 
```

或者通过将`COLLATE NOCASE`语句添加到表定义中的该列中。如果您想将非 ASCII 字符折叠到某处的序列中，您可能需要定义自定义整理序列。

# android - 启动可能从启动完成运行的服务活动

> ID：12639770
> 
> 赞同：1
> 
> 时间：2012-09-28T12:09:26.337
> 
> 标签：android, service, android-intent

我有一个在 AndroidManifest 中注册的 Service 的应用程序，可以在启动时启动。我通过 BOOT_COMPLETED 的 Intent Receiver 执行此操作，并且效果很好。但是，如果用户在安装后立即启动应用程序，我想从我的主 Activity 启动服务，因为它可能没有运行。

我不确定执行此操作的最佳方法。我知道我可以从活动中调用 startService() ，这很有效，但是我可以运行该服务的多个实例。我不想先停止服务，因为如果它正在运行，我只想让那个实例继续运行。该服务可能正在执行一项任务，我不希望它停止。

在活动中：

```
Intent serviceIntent = new Intent();
serviceIntent.setAction(MessageReceiverService.ClassName);
startService(serviceIntent); 
```

Android Manifest 注册意图：

```
<receiver android:name="com.app.proto1.service.StartupIntentReceiver" >
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />

        <category android:name="android.intent.category.HOME" />
    </intent-filter>
</receiver> 
```

我的服务重载方法：

```
@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    super.onCreate();

    Log.d(Tag, "onCreate()");
}

@Override
public void onDestroy() {
    super.onDestroy();
    Log.d(Tag, "onDestroy()");
}

@Override
public void onStart(Intent intent, int startId) {

    super.onStart(intent, startId);     
    Log.d(Tag, "onStart()");
    this.registerReceiver(new SmsReceiver(), new IntentFilter(SMS_ACTION));
} 
```

有没有一种方法可以检查服务是否已经在运行并且不再启动它，并且不会破坏现有的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:15:24.443

好吧，如果您的服务已经在运行并且您尝试再次启动服务，则不会为该服务创建新实例，它将仅考虑先前正在运行的实例。因此，在这种情况下没有什么可担心的。如果您在服务运行时调用它，`onStartCommand(Intent, int, int)`它将被调用而不是`onCreate()`。

# node.js - 使用requirejs解决节点中的循环依赖

> ID：12639772
> 
> 赞同：4
> 
> 时间：2012-09-28T12:09:28.790
> 
> 标签：node.js, requirejs, circular-dependency

我已经尝试了很多建议，我发现谷歌搜索 node 和 requirejs 中的循环依赖。不幸的是，我没有让它工作。接近解决方案的尝试（我认为）如下：

```
// run.js
var requirejs = require('requirejs');

requirejs.config({
  baseUrl: __dirname,
  nodeRequire: require
});

requirejs(['A'], function(A) {
  var a = new A.Go();
  console.log(a.toon())
});

// A.js
define(['B', 'exports'], function(B, exports) {

  exports.Go = function() {
    var b = new require('B').Ho();
    var toon = function() {
      return 'me tarzan';
    }; 

    return {
      b: b,
      toon: toon
    }
  };
});

// B.js
define(['A', 'exports'], function(A, exports) {

  exports.Ho = function() {
    var a = new require('A').Go();
    var show = function() {
      return 'you jane';
    }

    return {
      a: a,
      show: show
    }
  };
}); 
```

在节点中运行此代码会导致 RangeError: Maximum call stack size exceeded 我们从 A.js 中删除了 B 的依赖项，返回了“me tarzan”

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-24T14:08:30.657

循环引用很好，不一定是糟糕设计的症状。您可能会争辩说，拥有许多微小的模块可能同样有害，因为代码/逻辑是分散的。

为了避免这种可怕的情况`TypeError: Object #<Object> has no method`，您需要注意如何初始化 module.exports。我确信在 node 中使用 requirejs 时会出现类似的情况，但我没有在 node 中使用 requirejs。

问题是由于节点对模块的引用为空。通过在调用 require*之前*为导出分配一个值很容易修复它。

```
function ModuleA() {
}

module.exports = ModuleA;  // before you call require the export is initialized

var moduleB = require('./b');  //now b.js can safely include ModuleA

ModuleA.hello = function () {
  console.log('hello!');
}; 
```

此示例来自 [https://coderwall.com/p/myzvmg](https://coderwall.com/p/myzvmg)，其中提供了更多信息。

# r - R中的微分向量化

> ID：12639773
> 
> 赞同：0
> 
> 时间：2012-09-28T12:09:41.853
> 
> 标签：r, vectorization, differentiation

我有一个存储在 R 数据框中的表。

我想计算每列的一阶导数。列是测量变量，行是时间。

我可以矢量化这个函数吗？

```
df$C <- df$A + df$B 
```

原则上我想要类似的东西：

```
df$DiffA <- diff(df$A) 
```

问题是，我不知道如何向量化需要`A(n)` **和** `A(n+1)`的函数，其中**n**是数据框中的行（伪代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:00:51.807

根据评论：

```
df <- data.frame(n=1:100) 
df$sqrt <- sqrt(df$n)
df$diff <- c(NA,diff(df$sqrt,lag=1)) 
```

`diff`返回比输入向量中的值少一个的值（原因很明显）。您可以通过预先或附加一个`NA`值来解决这个问题。

一些时间安排：

```
#create a big data.frame
vec <- 1:1e6
df <- data.frame(a=vec,b=vec,c=vec,d=vec,e=vec,sqroot=sqrt(vec))

#for big datasets data.table is usually more efficient:
library(data.table)
dt <- data.table(df)

#benchmarks
library(microbenchmark)

microbenchmark(df$diff <- c(NA,diff(df$sqroot,lag=1)),
               dt[,diff:=c(NA,diff(sqroot,lag=1))])
Unit: milliseconds
                                            expr      min        lq    median        uq      max
1     df$diff <- c(NA, diff(df$sqroot, lag = 1)) 75.42700 116.62366 140.98300 151.11432 174.5697
2 dt[, `:=`(diff, c(NA, diff(sqroot, lag = 1)))] 37.39592  45.91857  52.21005  62.89996 119.7345 
```

`diff`速度很快，但对于使用 a 的大数据集`data.frame`效率不高。改为使用`data.table`。数据集越大，速度增益越明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:43:27.170

你可以试试`lag()`or`diff()`函数。他们似乎会做你想做的事。

# java - 如何在hibernate和Spring中加入两个表

> ID：12639775
> 
> 赞同：1
> 
> 时间：2012-09-28T12:09:58.743
> 
> 标签：java, spring, hibernate, spring-webflow

如何在休眠和 Spring 中加入两个表。下面是我的 suto java 代码，我需要在 objectA 上进行连接，其中名称字段等于 objectB 中的名称字段，但我将在 ObjectA ID 字段上进行搜索，但我需要返回。对象 A ID、对象 A 名称、对象 A 区域、对象 B 地址。

```
//
// CLASS OBJECT A
//
@Entity
@Table(name = "tableA")
public class ObjectA {

    @Id
    @Column(name = "id")
    private String id; 

    @Column(name = "name")
    private String name; 

    @Column(name = "region")
    private String region; 

}

//
// CLASS OBJECT B
//
@Entity
@Table(name = "tableB")
public class ObjectB {

    @Id
    @Column(name = "id")
    private String id; 

    @Column(name = "name")
    private String name; 

    @Column(name = "address")
    private String address; 

} 
```

有人可以告诉我如何在java代码中做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:13:53.483

将此添加到您的 A 类：

```
@OneToOne
@JoinColumn(name="name")
private ObjectB objectB; 
```

因此，当您检索 A 时，您将按名称进入相应的 B 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:56:24.383

在 where 子句中使用带有条件的交叉连接来限制连接。这是我所知道的唯一一个好方法（除了原生 sql），当两个对象之间没有映射关系时连接它们。

您可以使用 hql 查询轻松完成此操作

```
select a.id, a.name, a.region, b. address
from ObjectA a, ObjectB b
where a.id = b.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T14:00:44.950

您还可以使用内连接
select A.ID,A.Name,A.Regin,B.Address from ObjectA as A 内连接 ObjectB as B

# validation - XSD 具有选择的节点必须存在并选择特定类型的节点

> ID：12639778
> 
> 赞同：0
> 
> 时间：2012-09-28T12:10:12.550
> 
> 标签：validation, xsd, schema, choice

所以我有以下xsd类型

```
 <xs:complexType name="nodeType">
        <xs:sequence>
            <xs:choice>
                <xs:element name="c0" type="c0type"/>
                <xs:element name="c1" type="c1type"/>
                <xs:element name="c2" type="c2type"/>
                <xs:element name="c3" type="c3type"/>
            </xs:choice>
        </xs:sequence>
    </xs:complexType>

    <xs:element name="root">
      <xs:complexType>
        <xs:sequence>
            <xs:element name="nodes">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="node" type="nodeType" minOccurs="1" maxOccurs="unbounded"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
  </xs:element> 
```

现在我面临的问题是我需要“节点”元素在“根”元素中至少存在一次，并且选择的元素类型为“c0type”。

可以出现任意数量的组合，但必须`<node><c0 /></node>...<node><c3 /></node>`至少存在 1 个`<node><c0 /><node>`

是否可以通过 xsd 实现此验证？

谢谢

基兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:56:28.990

使用 XSD 1.0 是不可能的。

# javascript - 点击时 HTML5 / Android 覆盖

> ID：12639779
> 
> 赞同：1
> 
> 时间：2012-09-28T12:10:36.930
> 
> 标签：javascript, android, html, html5-canvas

好吧，这是我在这里的第一个问题，所以如果我做错了，请原谅我。

我正在编写我的第一个非常简单的 HTML5 手机游戏，但我遇到的问题是，在 Android（可能还有其他手机）上单击画布（内置浏览器）时会出现黄色覆盖。

在 Opera Mobile 12 上 - 有光覆盖。在 Firefox Nightly 18.01 上 - 未触发事件。

这是我原型上的链接：http: [//19th.tosteris.com/colo/](http://19th.tosteris.com/colo/)

我搜索并没有发现任何有用的东西。有人可以告诉我覆盖是什么，为什么它没有出现在这里：http: [//19th.tosteris.com/colo/2.html](http://19th.tosteris.com/colo/2.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:16:00.197

在我看来，这可能是一个默认样式问题，不同浏览器中激活元素的默认样式之间存在差异。为了解决这个问题，我总是链接一个 reset.css 样式表，它会清除所有默认样式行为作为我的第一个 css 表。

# php - FosUserBundle ：验证用户名或电子邮件

> ID：12639780
> 
> 赞同：2
> 
> 时间：2012-09-28T12:10:43.207
> 
> 标签：php, symfony, fosuserbundle

我通过电子邮件选项激活 FosUserBundle 登录。
现在我想验证 ProfileForm 上的两个字段（用户名或电子邮件）之一。
所以我创建了一个新的 ProfileForm、一个新的 Profile Class 和一个新的 Profile FormHandler ：

### ProfileFormType

```
public function buildForm(FormBuilder $builder, array $options)
{
    $child = $builder->create('user', 'form', array('data_class' => $this->class));
    $this->buildUserForm($child, $options);
    $builder
        ->add($child)
        ->add('new', 'repeated', array('type' => 'password'))
        ->add('send', 'checkbox', array(
            'label'     => 'Email',
            'required'  => false,
                    ))
                    ;
}

public function getDefaultOptions(array $options)
{
    return array(
        'data_class' => 'Tga\Bundle\UserManagementBundle\Form\Model\Profile',
        'intention'  => 'profile',
    );
}    

public function getName()
{
    return 'fos_user_profile';
}

/**
 * Builds the embedded form representing the user.
 *
 * @param FormBuilder $builder
 * @param array       $options
 */
protected function buildUserForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('username', 'text', array('required' => false))
        ->add('email', 'email', array('required' => false))
        ->add('enabled', 'checkbox', array('required' => false))
    ;
} 
```

### 轮廓

```
/*
 * This file is part of the FOSUserBundle package.
 *
 * (c) FriendsOfSymfony <http://friendsofsymfony.github.com/>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */

namespace Tga\Bundle\UserManagementBundle\Form\Model;

use FOS\UserBundle\Model\UserInterface;
use Symfony\Component\Validator\Constraints as Assert; 

class Profile
{
    /**
     * @var string
     */
    public $new;

    /**
     * @var boolean
     */
    public $send = true;    

    /**
     * User whose password is changed
     *
     * @var UserInterface
     */
    public $user;

    public function __construct(UserInterface $user)
    {
        $this->user = $user;
    }

    /**
     * @Assert\True(message = "Error for one of the two fields")
     */
    public function isEmailOrUsername()
    {
        return ($this->user->getUsername() == '' && $this->user->getEmail() == '') ? false : true;
    }        
} 
```

### ProfileFormHandler

```
/*
 * This file is part of the FOSUserBundle package.
 *
 * (c) FriendsOfSymfony <http://friendsofsymfony.github.com/>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */

namespace Tga\Bundle\UserManagementBundle\Form\Handler;

use Symfony\Component\Form\Form;
use Symfony\Component\HttpFoundation\Request;

use FOS\UserBundle\Model\UserInterface;
use FOS\UserBundle\Model\UserManagerInterface;
use FOS\UserBundle\Form\Model\CheckPassword;
use Tga\Bundle\UserManagementBundle\Form\Model\Profile;
use FOS\UserBundle\Mailer\MailerInterface;

use FOS\UserBundle\Form\Handler\ProfileFormHandler as BaseHandler;

class ProfileFormHandler extends BaseHandler
{
    protected $request;
    protected $userManager;
    protected $form;
    protected $mailer;    

    public function __construct(Form $form, Request $request, UserManagerInterface $userManager, MailerInterface $mailer)
    {
        $this->form = $form;
        $this->request = $request;
        $this->userManager = $userManager;
        $this->mailer = $mailer;
    }

    public function getNewPassword()
    {
        return $this->form->getData()->new;
    }    

    public function getSend()
    {
        return $this->form->getData()->send;
    }        

    public function process(UserInterface $user)
    {

        $this->form->setData(new Profile($user));
        if ('POST' === $this->request->getMethod()) {
            $this->form->bindRequest($this->request);
            if ($this->form->isValid()) {
                $this->onSuccess($user);

                return true;
            }

            // Reloads the user to reset its username. This is needed when the
            // username or password have been changed to avoid issues with the
            // security layer.
            $this->userManager->reloadUser($user);
        }

        return false;
    }

    protected function onSuccess(UserInterface $user)
    {
        $user->setPlainPassword($this->getNewPassword());
        //ici envoi des identifiants par mail
        if($this->getSend())
        {
            $this->mailer->sendIdPwdMessage($user, $this->getNewPassword());
        }
        $this->userManager->updateUser($user);
    }    
} 
```

我在处理过程功能上有这个错误，除非我填写用户名和电子邮件：

```
Fatal error: Allowed memory size" when $this->form->bindRequest($this->request) 
```

# php - 在本地服务器上使用 php json_encode 时遇到问题

> ID：12639784
> 
> 赞同：1
> 
> 时间：2012-09-28T12:11:06.780
> 
> 标签：php, encoding, utf-8, wamp, json

在我的控制器中，我从 Affilinet API 以 xml 的形式获取产品数据，并为产品列表创建一个 html 字符串。之后，我使用 php`json_encode`函数对包含该 html 的数组进行编码，例如

```
$data = array('listHtml' => $listHtml,'pagingHtml':$pagingHtml);
echo json_encode($data); 
```

在我的登台和实时服务器上，代码运行良好，但是使用相同的数据，代码在本地服务器上返回给我

```
{"listHtml":null,"pagingHtml":"some html"} 
```

$listHtml 包含一些德语字符。问题是在我的在线服务器上，代码将 $listHtml 视为 UTF-8 编码，但在本地服务器上它被视为其他内容。

除此之外，如果我打印出一个包含一些德语字符的字符串，它在在线服务器上运行良好，但德语字符在本地服务器上被弄乱了。那么如何配置我的本地服务器以将文本解释为 UTF-8 编码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:14:39.413

在实际使用HTML之前，您始终可以使用[utf8_encode对字符串进行 UTF-8 编码。](http://php.net/manual/en/function.utf8-encode.php)`json_encode`

```
$data = array('listHtml' => utf8_encode($listHtml),'pagingHtml' => utf8_encode($pagingHtml));
echo json_encode($data); 
```

发生这种情况的原因是，如果您的 HTML 具有不支持德语字符的 UTF-8 以外的其他编码，`json_encode`则可能无法解析给定的输入。

例如：

```
echo json_encode(array('a' => mb_convert_encoding('Üß', 'ISO-8859-1', 'UTF-8'))); 
```

`{"a":null}`由于 ISO-8859-1 编码字符串中的德语字符而返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:20:02.917

如果您使用 Apache，那么您可以更改 httpd.conf 文件并添加或更改（如果已经存在）：

```
 AddDefaultCharset utf-8 
```

# ios - 如何在 UITableView 中添加星级

> ID：12639785
> 
> 赞同：0
> 
> 时间：2012-09-28T12:11:09.087
> 
> 标签：ios, uitableview

这是我在尝试对 UITableView 实施星级评定时遇到的错误。2012-09-28 18:41:33.698 PlanMyDay[4533:c07] adssadgadf(

（“4.5”、“4.1”、4、“3.9”、“4.2”、“4.1”、“”、“4.3”、“3.9”、“4.4”、“”、4、“3.9”、“3.9” , "", 4, "3.2", "3.6", "3.3", "3.8")

> “2012-09-28 17:33:38.741 PlanMyDay[4211:c07] *** 由于未捕获的异常 'NSRangeException' 导致应用程序终止，原因：'*** -[__NSArrayM objectAtIndex:]：索引 1 超出范围 [0 .. 0]'
> 
> *** First throw call stack: (0x1873022 0x13e5cd6 0x185fd88 0x4da43 0x5e2c54 0x5e33ce 0x5cecbd 0x5dd6f1 0x586d42 0x1874e42 0x1ba9679 0x1bb3579 0x1b384f7 0x1b3a3f6 0x1b39ad0 0x184799e 0x17de640 0x17aa4c6 0x17a9d84 0x17a9c9b 0x1a897d8 0x1a8988a 0x548626 0x2b82 0x2af5) terminate called throwing an exception(lldb) "

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        static NSString *CellIdentifier = @"Cell";

        // if a cell can be reused, it returns a UITableViewCell with the associated identifier or nil if no such cell exists
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        // if no cell to reuse, then create a new one
        if (cell == nil)
        {

    NSDictionary *testrate =[ratings1 objectAtIndex:indexPath.row];
    NSString *str=[[NSString alloc]initWithFormat:@"%@",testrate];
    NSInteger n=[str intValue];
    NSLog(@"workrate:%@", str);

   if (n >=4)
        {

    CGRect starFrame = CGRectMake(65,60, 15, 15);
    //CGSize  starFrame = CGSizeMake(20,20);
    UIImageView *starImage = [[[UIImageView alloc] initWithFrame:starFrame] autorelease];
    starImage.image = [UIImage imageNamed:@"star.png"];
    starImage.backgroundColor=[UIColor clearColor];
    [cell.contentView addSubview:starImage];

    CGRect starFrame1 = CGRectMake(80,60, 15, 15);
    UIImageView *starImage1 = [[[UIImageView alloc] initWithFrame:starFrame1 ] autorelease];
    starImage1.image = [UIImage imageNamed:@"star.png"];
    starImage1.backgroundColor=[UIColor clearColor];
    [cell.contentView addSubview:starImage1];

    CGRect starFrame2 = CGRectMake(95,60, 15, 15);
    UIImageView *starImage2 = [[[UIImageView alloc] initWithFrame:starFrame2 ] autorelease];
    starImage2.image = [UIImage imageNamed:@"star.png"];
    starImage2.backgroundColor=[UIColor clearColor];
    [cell.contentView addSubview:starImage2];

    CGRect starFrame3 = CGRectMake(110,60, 15, 15);
    UIImageView *starImage3 = [[[UIImageView alloc] initWithFrame:starFrame3 ] autorelease];
    starImage3.image = [UIImage imageNamed:@"star.png"];
    starImage3.backgroundColor=[UIColor clearColor];
    [cell.contentView addSubview:starImage3];

    CGRect starFrame4= CGRectMake(125,60, 15, 15);
    UIImageView *starImage4 = [[[UIImageView alloc] initWithFrame:starFrame4 ] autorelease];
    starImage4.image = [UIImage imageNamed:@"star.png"];
    starImage4.backgroundColor=[UIColor clearColor];
    [cell.contentView addSubview:starImage4];

    }
    else if(n >=3&&n<=4)
    {
        CGRect starFrame = CGRectMake(65,60, 15, 15);
        //CGSize  starFrame = CGSizeMake(20,20);
        UIImageView *starImage = [[[UIImageView alloc] initWithFrame:starFrame] autorelease];
        starImage.image = [UIImage imageNamed:@"star.png"];
        starImage.backgroundColor=[UIColor clearColor];
        [cell.contentView addSubview:starImage];

        CGRect starFrame1 = CGRectMake(80,60, 15, 15);
        UIImageView *starImage1 = [[[UIImageView alloc] initWithFrame:starFrame1 ] autorelease];
        starImage1.image = [UIImage imageNamed:@"star.png"];
        starImage1.backgroundColor=[UIColor clearColor];
        [cell.contentView addSubview:starImage1];

        CGRect starFrame2 = CGRectMake(95,60, 15, 15);
        UIImageView *starImage2 = [[[UIImageView alloc] initWithFrame:starFrame2 ] autorelease];
        starImage2.image = [UIImage imageNamed:@"star.png"];
        starImage2.backgroundColor=[UIColor clearColor];
        [cell.contentView addSubview:starImage2];

    }

    return cell;
} 
```

请帮我完成我的项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:45:17.243

在方法 viewWillAppear 中正确初始化 ratigs1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:26:57.190

您的数组超出索引。也许您没有实例化它，或者您尝试访问此数组的空索引。. .

# clojure - Clojure tools.logging 不记录堆栈跟踪

> ID：12639788
> 
> 赞同：6
> 
> 时间：2012-09-28T12:11:23.300
> 
> 标签：clojure

在[tools.logging](https://github.com/clojure/tools.logging)的最新版本 (0.2.4) 中，使用 (error some-exception) 进行日志记录时，仅记录异常消息。我依赖于在记录异常时打印堆栈跟踪。将异常打印到 stderr 或 stdout 不是一种选择。

据我在[source](https://github.com/clojure/tools.logging/blob/master/src/main/clojure/clojure/tools/logging.clj)中看到的， (error ...) 确实将异常作为第一个参数。

```
 (log/error throwable error-message) 
```

记录时我可以做些什么来包含堆栈跟踪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:23:50.467

错误的签名是：

```
(defmacro error
  "Error level logging using print-style args."
  {:arglists '([message & more] [throwable message & more])}
  [& args]
  `(logp :error ~@args)) 
```

这意味着只有 1 个参数（如 中`(error some-exception)`），参数是消息（在您的情况下是`toString`某些异常的）。

如果要记录堆栈跟踪，则需要第二条参数消息，例如：

```
(def ex (RuntimeException. "ex"))
(error ex "Something broke!") 
```

或者

```
(error ex ex) 
```

# excel - 如何在 Excel VBA 中删除单词末尾的空格？

> ID：12639790
> 
> 赞同：2
> 
> 时间：2012-09-28T12:11:33.330
> 
> 标签：excel, vba

我有一个脚本，可以很好地根据两列创建文件夹，但由于某种原因，它的末尾有一个空格的文件夹。

这是代码：

```
Dim baseFolder As String, newFolder As String
    lastrow = wsJL.Cells(Rows.Count, "B").End(xlUp).Row
    wsJL.Range("S2:U2").Copy wsJL.Range("S3:U" & lastrow)
    Range("J3:M" & lastrow).Calculate
    Range("S3:U" & lastrow).Calculate
    baseFolder = wbBK1.path & Application.PathSeparator & "Photos" & Application.PathSeparator
     'folders will be created within this folder - Change to sheet of your like.

    If Right(baseFolder, 1) <> Application.PathSeparator Then _
     baseFolder = baseFolder & Application.PathSeparator

       For Each cell In Range("S3:S" & lastrow)   'CHANGE TO SUIT

           'Company folder - column S

           newFolder = baseFolder & cell.Value
           If Len(Dir(newFolder, vbDirectory)) = 0 Then MkDir newFolder

           'Part number subfolder - column T

           newFolder = newFolder & Application.PathSeparator & cell.Offset(0, 1).Value
           If Len(Dir(newFolder, vbDirectory)) = 0 Then MkDir newFolder

       Next

        End With 
```

现在它被赶上的是这个：

`"The Richmond Group "`我认为的原因是因为它在标题末尾有一个空格，并且在创建文件夹时不会转换为空格。

现在我在 S 和 T 中是这样的：

**小号**

`=SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE($C2,",","")," "," "),".",""),"/","-"),"""",""),"*","")`

**吨**

`=SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE($D2,",","")," "," "),".",""),"/","-"),"""",""),"*","")`

话虽如此，我想不出一种方法来删除名称末尾的结尾空格。

如果有人可以在那里提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:15:17.973

尝试修剪功能：

> 将 LResult 调暗为字符串
> 
> LResult = 修剪（“字母”）

[http://www.techonthenet.com/excel/formulas/trim.php](http://www.techonthenet.com/excel/formulas/trim.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T12:25:33.740

使用`Trim$`.

它是一个字符串函数，这意味着它比它的变体表亲更有效`Trim`

一个非常有用的参考[请不要变种](http://www.aivosto.com/vbtips/stringopt.html#variant)

# java - java.lang.IllegalArgumentException: No enum const 类的原因是什么，即使遍历 values() 工作得很好？

> ID：12639791
> 
> 赞同：68
> 
> 时间：2012-09-28T12:11:35.420
> 
> 标签：java, enums

这个问题基本上是我[之前问题](https://stackoverflow.com/questions/12639038/when-do-enum-instances-get-created)的延伸。我问了上一个问题，以确保在类加载时填充 Enum 常量。这是我的课，增加了一个简单的方法`getByName`：

```
public enum PropName {

  CONTENTS("contents"),
  USE_QUOTES("useQuotes"),
  ONKEYDOWN("onkeydown"),
  BROWSER_ENTIRE_TABLE("browseEntireTable"),
  COLUMN_HEADINGS("columnHeadings"),
  PAGE_SIZE("pageSize"),
  POPUP_TITLE("popupTitle"),
  FILTER_COL("filterCol"),
  SQL_SELECT("sqlSelect"),
  ;

  private String name;

  private PropName(String name) {
    this.name = name;
  }

  public String getName() {
    return name;
  }

  public static PropName getByName(String name){
    return   PropName.valueOf(name);
  }
} 
```

对该方法的调用`getByName("columnHeadings")`正在抛出`java.lang.IllegalArgumentException: No enum const class labware.web.component.limsgrid.PropName.columnHeadings`，但如果我用以下代码替换此方法，它就可以工作。

```
 public static PropName getByName(String name){
    for(PropName prop : values()){
      if(prop.getName().equals(name)){
        return prop;
      }
    }

    throw new IllegalArgumentException(name + " is not a valid PropName");
  } 
```

关于我在这里做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-09-28T12:14:50.370

`Enum.valueOf()`仅检查常量名称，因此您需要传递它`"COLUMN_HEADINGS"`而不是“columnHeadings”。您的`name`属性与 Enum 内部无关。

* * *

要解决评论中的问题/疑虑：

枚举的“内置”（隐式声明）`valueOf(String name)`方法将查找具有该确切名称的枚举常量。如果您的输入是“columnHeadings”，您有（至少）三个选择：

1.  暂时忘记命名约定，只需将常量命名为最有意义的名称：`enum PropName { contents, columnHeadings, ...}`. 这显然是最方便的。
2.  `valueOf`如果您真的喜欢命名约定，请在调用之前将您的 camelCase 输入转换为 UPPER_SNAKE_CASE 。
3.  实现您自己的查找方法而不是内置方法`valueOf`来查找输入的相应常量。如果同一组常量有多个可能的映射，这是最有意义的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-28T12:13:59.737

`name`那是因为您为枚举定义了自己的版本，并且`getByName`没有使用它。

`getByName("COLUMN_HEADINGS")`可能会工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-01T03:11:17.870

而不是定义：`COLUMN_HEADINGS("columnHeadings")`

尝试将其定义为： `COLUMNHEADINGS("columnHeadings")`

然后，当您调用 时`getByName(String name) method`，使用大写字符串调用它，如下所示：`getByName(myStringVariable.toUpperCase())`

我和你有同样的问题，这对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-11T09:12:05.993

当我试图传递我们从后端获得的**Nullable Enum时，我遇到了解析枚举问题。**当然，当我们获得价值时它正在工作，但是当 null 出现时它是问题。

> java.lang.IllegalArgumentException：没有枚举常量

另外问题是当我们在 Parcelize 读取时刻写一些*简短的 if*。

我的解决方案是

**1.用解析方法创建伴生对象。**

```
enum class CarsType {
    @Json(name = "SMALL")
    SMALL,
    @Json(name = "BIG")
    BIG;

    companion object {
        fun nullableValueOf(name: String?) = when (name) {
            null -> null
            else -> valueOf(name)
        }
    }
} 
```

**2.在Parcerable读取的地方这样使用**

```
data class CarData(
    val carId: String? = null,
    val carType: CarsType?,
    val data: String?
) : Parcelable {
    constructor(parcel: Parcel) : this(
        parcel.readString(),
        CarsType.nullableValueOf(parcel.readString()),
        parcel.readString()) 
```

# javascript - 仅当使用 JavaScript 的“tds”数量超过 X 时，才将 HTML 添加到表中

> ID：12639796
> 
> 赞同：2
> 
> 时间：2012-09-28T12:11:48.073
> 
> 标签：javascript, jquery, html

如果找到超过 3 个 td 元素，我正在尝试将 HTML 块添加到表中，如果表中的 td 元素少于 3 个，则不执行任何操作。我已经遍历了这些表，并且能够检查每个表中有多少个 td。

我试过使用 .filter(); 和 $.each() 但无法破解它。

所以： >> 我如何只将 HTML 添加到通过 if > 3 语句的表中？

我还在学习 JavaScript 和 jQuery，所以请多多包涵。

这是到目前为止的代码：

```
var tbls = $("body").find("table.responsive").length;   
var data = Array();

for(var index = 0; index < tbls; index++){ 
    $("table.responsive").each(function(i, v){
        data[i] = Array();
        $(this).find("td").each(function(ii, vv){
            data[i][ii] = $(this).text();
    }); 
  })
}

data.forEach(function(item) { 
    if(item.length > 3) {

      //here I want to add the HTML, but it is applied to all tables
      $("table.responsive").before("<div style='position:relative;'><span class='MobiScroll'></span></div>");
    return false;          
     } 
});​ 
```

这是一个演示：http: [//jsfiddle.net/design4lifeblog/gSPXu/15/](http://jsfiddle.net/design4lifeblog/gSPXu/15/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:15:35.730

您不需要从 body 元素开始遍历并为此创建一个数组，您可以计算每个函数中的 TD。

```
$("table.responsive").​each(function(){
    if ( $('td', this).length > 3) {
       $(this).before("<div style='position:relative;'><span class='MobiScroll'></span></div>");
    }
})​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:27:01.617

```
$(function(){
    $("table.responsive").each(function(){
    if ( $(this).find('td').length > 3) {
       $(this).before("<div style='position:relative;'><span class='MobiScroll'></span></div>");
        //alert($(this))
    }
})}); 
```

[演示](http://jsfiddle.net/gSPXu/20/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:26:17.983

```
$("table.responsive").each(function(){
  if($(this).find('td').size() > 3)
    $(this).before("<div style='position:relative;'><span class='MobiScroll'></span></div>");
}) 
```

[http://jsfiddle.net/pKWXZ/1/](http://jsfiddle.net/pKWXZ/1/)

# c# - 从未加载的程序集中获取类型

> ID：12639801
> 
> 赞同：3
> 
> 时间：2012-09-28T12:12:45.647
> 
> 标签：c#, asp.net, .net-4.0, silverlight-5.0

我需要枚举物理上位于 Silverlight dll 中的某个命名空间中的类型。但我必须在服务器（asp.net 应用程序）上进行。

我有 xap 文件，我可以用 zip 读取它并获取我需要的 dll。

但是，我不想将该程序集加载到内存中（我认为它可能不会加载，因为它是 Silverlight 应用程序），只要我记得加载的程序集不能被卸载（不想为了获得几个字符串而浪费服务器内存）。

有任何想法吗？

**编辑**：ReflectionOnlyLoad 不适用于 Silverlight 程序集。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:20:33.103

你应该使用：

```
Assembly.ReflectionOnlyLoad(string assemblyString) 
```

这将在特殊上下文中加载程序集（没有依赖关系）。您不能执行任何方法。您可以卸载此程序集，而无需卸载完整的 AppDomain。

[MSDN：Assembly.ReflectionOnlyLoad](http://msdn.microsoft.com/en-us/library/0et80c7k.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:04:20.850

您可以使用[Mono.Cecil](https://github.com/jbevain/cecil)从您的 .NET 应用程序中检查 Silverlight 程序集（或不同的 .NET 运行时程序集）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:18:01.223

试试 ReflectionOnlyLoad。您可以传递字符串（程序集文件的路径）或 byte[]（程序集的 COFF 图像 - 应该是解压缩程序集得到的结果 byte[]）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:20:08.570

您将需要加载它，尽管您需要将其加载到 silverlight 中并且需要 silverlight 代码来进行枚举。有利的一面是，由于您需要通过 COM 互操作加载它，因此在您拆除 SL 实例时应该清理它。

# linux - 确定 linux 端口是否在硬件中支持 cmpxchg

> ID：12639808
> 
> 赞同：1
> 
> 时间：2012-09-28T12:13:14.003
> 
> 标签：linux, compilation, linux-kernel

我正在编写一个 Linux 内核补丁，它使用 cmpxchg 来加速一些情况，除了修复一些语义问题，但是我注意到某些架构只支持 xchg 而不是 cmpxchg，我如何在编译时确定架构是否内核是否正在编译是否支持硬件中的 cmpxchg？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:15:12.783

怎么样`#ifdef __HAVE_ARCH_CMPXCHG`？

# wpf - 如何使用动态修改的系统颜色？

> ID：12639810
> 
> 赞同：1
> 
> 时间：2012-09-28T12:13:21.593
> 
> 标签：wpf, xaml, markup-extensions, dynamicresource, systemcolors

我有一个极端情况，其中动态资源（不允许转换器）和自定义标记扩展（仅评估一次）都无法解决问题。我想根据当前系统颜色的褪色变体创建渐变画笔。每当系统的颜色主题发生变化时，这些画笔都会自行更新，以便用户在切换到辅助功能主题时无需重新启动应用程序。

是否可以在 WPF 应用程序中在运行时检测系统颜色主题的变化？某种事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:39:18.417

您可能想查看 Microsoft.Win32.SystemEvents 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:22:06.667

According to [this](https://stackoverflow.com/a/6360771/773118) answer you should be able to use Windows Messages to change your brushes when the windows theme changes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:41:42.397

我在尝试检测 Visual Studio 2012 主题的变化时偶然发现了这个答案。我正在编写一个使用 WPF 用户控件的加载项，并且需要知道它何时处于深色与浅色主题中。感谢上面的 hbarck，我使用的系统事件是：

Microsoft.Win32.SystemEvents.UserPreferenceChanged += (s, e) => { DoSomething(); };

当用户在工具->选项中更改 VS 主题时单击确定时触发此事件。

# javascript - 如何在不运行 javascript 的情况下检测页面是否使用 javascript 重定向？

> ID：12639814
> 
> 赞同：0
> 
> 时间：2012-09-28T12:13:51.223
> 
> 标签：javascript, redirect

我想检查死链接。有些网站使用 javascript 进行重定向。我怎样才能找到网页？由于性能原因，我使用不运行 javascript 的 python 脚本对它们进行爬网。

一种想法是在 html 页面的正文中查找内容，如在[此处输入链接描述](http://ntt.cc/2008/01/21/5-ways-to-redirect-url-with-javascript.html)中所述。我不想让它变得复杂。我目前正在考虑运行一个正则表达式来尝试识别这些实例。还有什么想法吗？

# python - matplotlib：散点图和颜色条值

> ID：12639815
> 
> 赞同：0
> 
> 时间：2012-09-28T12:13:52.463
> 
> 标签：python, matplotlib

我有数据：

```
values = np.array( [0,1,2,3,4,5] ) 
```

我想用不同的尺寸和颜色来`values`绘制`pyplot.scatter`。另外，我想调整点的大小，使最小的点清晰可见。

如果我做：

```
sc = pyplot.scatter ( pos_x, pos_y, values )
pyplot.colorbar( sc ) 
```

然后我得到了正确的值和颜色，但是最小的点*太小了*。现在，如果我这样做：

```
values_scaled = (values * 2 + 1)
sc = pyplot.scatter ( pos_x, pos_y, values_scaled )
pyplot.colorbar( sc ) 
```

那么这些点的大小可以接受（虽然有点假），但是颜色条图例从 1 开始，到 11 结束，这是我不想要的。我只想缩放点的*大小*，而不是那里分配的*值。*怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:20:49.923

[matplotlib.pyplot.scatter](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.scatter)函数接受一个可选的关键字参数，`s`即*“以点为单位的大小^2。它是一个标量或与 x 和 y 长度相同的数组”*。因此，只需将您的`values_scaled`数组作为此参数的值传递，并将颜色数据（可选`c`关键字参数）保留为`values`，即：

```
sc = pyplot.scatter(pos_x, pos_y, c=values, s=values_scaled) 
```

# html - 不显示

> ID：12639823
> 
> 赞同：45
> 
> 时间：2012-09-28T12:14:14.940
> 
> 标签：html, css

我有一个`<hr>`没有显示。

HTML：

```
<div id="line"><hr /></div> 
```

CSS：

```
hr {
    border: 0;
    width: 96%;
    color: #FFFF00;
    height: 1px;
}

#line {
    float: left;
    width: 731px;
    height: 10px;
} 
```

任何想法为什么它没有显示？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-09-28T12:26:08.680

试试这个代码：

```
hr {
  border: 0;
  clear:both;
  display:block;
  width: 96%;               
  background-color:#FFFF00;
  height: 1px;
} 
```

JSFiddle 链接[http://jsfiddle.net/EXXrB/](http://jsfiddle.net/EXXrB/)

希望它能帮助您解决您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T12:19:56.320

`border: 0;`从 css 规则中删除`hr`

[演示](http://jsfiddle.net/yknEZ/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-12T04:21:22.537

获得最佳水平线的简单方法

```
. horizontalLine {  
    border: none; 
    border-bottom: 1px solid gainsboro;  
   } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T12:16:19.680

```
hr
{
border:solid 1px black;
width: 96%;
color: #FFFF00;
height: 1px;

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T14:43:34.993

如果您打算使用`border:0px;`，则设置`height:1px;`并设置`background:#FFFF00;`
(OR)
`border:1px solid #FFFF00;`和`height:0px;`

这可能会奏效！

要么坚持使用边框颜色以显示水平线，要么使用背景颜色**`<HR> tag`**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T12:15:36.170

试试这个

```
hr {
border: 0;
clear:both;
display:block;
width: 96%;
color: #FFFF00;
height: 1px;
} 
```

# .htaccess - htaccess - 重写规则

> ID：12639824
> 
> 赞同：0
> 
> 时间：2012-09-28T12:14:17.033
> 
> 标签：.htaccess, rewrite, http-status-code-404, rule

谷歌网站管理员工具提示我有 2 个内容完全相同的页面。

例如：

```
/airports/romania/115.php
/airports/romania/115.phphey1 
```

在 htacces 文件中，我有这个：

```
RewriteRule airports/(.*)/([0-9]{1,}).php airports_list.php?airport=$2&country_air=$1 
```

我已经检查并仔细检查并三重检查了 airports_list.php 中的所有代码以及服务器上的所有其他文件。我在任何地方都找不到“hey1”。

为了解决我的问题，我想我必须将 www.mydomain.com/airports/romania/115.phphey1 之类的链接重定向到 404 页面。

我怎么做 ？

以下内容也在我的 .htaccess 文件中工作：

```
ErrorDocument 404 http://www.mydomain.com/404.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:48:24.227

如果您在正则表达式的末尾放置一个美元符号，它会停止匹配，因此在“.php”的末尾会出现垃圾并转到 404。

```
RewriteRule airports/(.*)/([0-9]{1,}).php$ airports_list.php?airport=$2&country_air=$1 
```

# api - 当我们指定日期标准时，Reach 和 Social Reach 为零

> ID：12639825
> 
> 赞同：0
> 
> 时间：2012-09-28T12:14:20.607
> 
> 标签：api, ads, facebook-ads-api

我们尝试在 Facebook Ads API 上获取独特的统计数据，但我们有些难以获得。目前，我们只能将覆盖面 (unique_impressions) 和社交覆盖面 (social_unique_impressions) 拉出一天，否则当我们指定日期标准时，这些字段将返回为零。我们知道，独特的统计数据并不意味着汇总。如何检索这些值？你怎么计算的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T22:51:08.010

好的！我收到了 Facebook 团队的回复，无法通过我们自己的日期标准获得独特的统计数据。是极限！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:09:29.750

这是 Facebook 数据的限制，并在[广告统计文档](https://developers.facebook.com/docs/reference/ads-api/adstatistics/)中特别提到- 唯一统计数据仅在 Facebook 一方计算 1、7 或 28 天范围内：

> 查询唯一统计
> 
> 独特的统计数据可精确地用于 1、7 或 28 天的时间范围。

# django - Django 验证后端多个数据库

> ID：12639830
> 
> 赞同：3
> 
> 时间：2012-09-28T12:14:52.180
> 
> 标签：django, django-authentication

我正在重写一个为每个客户都有一个数据库的遗留应用程序。每个客户都有自己的身份验证和用户集。因此，我需要一个自定义身份验证后端，因为 django 的身份验证设置为仅使用默认值。我编写了中间件，在每个请求时检查 url 并在那里提取信息以在请求上设置 database_name。

如果我在处理我的自定义身份验证后端期间可以访问请求，我可以轻松地执行数据库调用，`user = User.objects.using(request.db).get(username=username)`但是，我认为没有简单的方法可以完成此操作。我在这里看到了一个答案：[从 backend.get_user 访问 request.session](https://stackoverflow.com/questions/1091593/django-access-request-session-from-backend-get-user)，但这似乎不是线程安全的，所以我不想走那条路。

我能看到的唯一仍然使用 django-auth 的解决方案是为每个客户设置一个身份验证后端，将数据库名称设置为类属性。然后，我将创建一个自定义登录函数，将 request.session['_auth_user_backend'] 设置为客户特定的后端。因此，当对每个请求调用 get_user(user_id) 时，它使用知道从哪个数据库请求的客户后端。

如果可能，我想避免为每个客户管理身份验证后端。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T12:21:21.820

由于 auth 后端没有调用 QuerySet 方法`using`，您可以使用带有[线程局部变量和一些中间件的](http://docs.python.org/library/threading.html#threading.local)[数据库路由器](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#database-routers)将变量设置为客户的数据库名称。中间件必须放在身份验证中间件之前。

线程局部变量是线程安全的。它创建一个线程局部全局变量。

如果您遵循请求的路径，它将执行以下操作：

1.  请求命中 django
2.  您的自定义中间件从 url 中获取数据库名称，并将其设置为线程局部全局变量。
3.  django 身份验证中间件通过运行查询启动并设置用户`User.object.get(id=user_id)`。这将使用您的数据库路由器，它只会返回在之前的中间件中设置的线程局部全局变量。

4.  请求继续到 django 堆栈的其余部分。

例如，您有以下模块：

my_app/middleware.py

```
from threading import local

my_local_global = local()

class CustomerMiddleware(object):
    def process_request(self, request):
        my_local_global.database_name = get_database_name(request) 
```

我的应用程序/路由器.py

```
from middleware import my_local_global

class MultiCustomerRouter(object):
    def db_for_read(self, model, **hints):
        return my_local_global.database_name 
```

设置.py

```
...
MIDDLEWARE_CLASSES = (
 'django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'my_app.middleware.CustomerMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
)

DATABASE_ROUTERS = ['my_app.routers.MultiCustomerRouter']
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T15:02:37.770

您可能可以使用[Django 数据库路由器](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)来控制它。如果您知道哪个用户点击了哪个数据库，您可以根据用户模型的逻辑简单地定义它。

# javascript - 为 HTML 输入元素中的每个实际更改触发一次处理程序

> ID：12639831
> 
> 赞同：1
> 
> 时间：2012-09-28T12:14:59.790
> 
> 标签：javascript, jquery, html, dom-events

我想在输入字段中的每个*实际更改触发**一次事件处理程序。*例如，要验证（每次按键）信用卡号的输入（*每次*更改都必须进行更改，因此去抖动/节流不是答案）。

 **我不能[`input`](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/input)单独使用，因为 IE9 不会从退格或剪切/删除触发此事件。

我不能`keyup`单独使用，因为它不能处理来自鼠标的更改（例如粘贴）。

我不能使用`change`，因为这只会触发`blur`.

我可以这样做`$('input').bind('input keyup', handler)`，但这在大多数情况下会触发两个单独的事件。假设处理程序很昂贵并且运行两次是不可接受的。

我可以包装处理程序，使其仅在当前值与上次检查的值不同时运行，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T13:04:11.390

您检查最后一个输入所做的就是您需要做的。

这是存储最后一个值的一种方法。

```
function handler(){ 
    var tb = jQuery(this);
    var currentValue = tb.val();
    if (tb.data("lastInput") !== currentValue) {
        tb.data("lastInput", currentValue);
        console.log("The current value is " + currentValue);
    } 
}
$('input').bind('input keyup', handler); 
```

[jsFiddle](http://jsfiddle.net/ZfQWr/)

如果你真的不想在你的函数中使用那个逻辑，你总是可以扩展 jQuery。这是一堆更多的代码，但是一种方法。

```
(function(){
    $.fn.oneinput = function(callback) {        
        function testInput(){ 
            var tb = jQuery(this);
            var currentValue = tb.val();
            if (tb.data("lastInput") !== currentValue ) {
                tb.data("lastInput",currentValue );
                if(callback) { 
                    callback.call(this) 
                };
            }
            return this;
        }    
        jQuery(this).bind("keyup input", testInput);
    };
}(jQuery));

$('input').oneinput( function(){ console.log(this.value); });
​ 
```

[jsfiddle](http://jsfiddle.net/ZfQWr/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:52:30.893

尝试这个

```
 $('input').bind('keyup cut paste', function (event) {
         console.log('value changed');
    }); 
```

小提琴[http://jsfiddle.net/sXvK2/1/](http://jsfiddle.net/sXvK2/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:37:33.877

如果您不需要处理程序返回值，则可以使其`return false`不会再次触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:45:21.953

我认为你必须用它`setInterval`来监控文本框中的变化

试试这个[演示](http://jsbin.com/agusiq/9/edit)

```
objTextBox = document.getElementById("trackChange");
oldValue = objTextBox.value;

console.log(oldValue);

function track_change()
   {
     if(objTextBox.value != oldValue)
     {
       oldValue = objTextBox.value;
       console.log("changed")
     }

   }

setInterval(function() { track_change()}, 100); 
```

**注意：**我个人认为这不是最好的解决方案。但我找不到更好的解决方案，至少它在任何情况下都可以肯定地工作键盘或鼠标；）

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-09-28T12:19:51.603

关于什么

```
$el.bind('input', handler);
$el.bind('keyup', handler);
... 
```**

# android - 从 jUnit 中的 Android 库返回？

> ID：12639832
> 
> 赞同：0
> 
> 时间：2012-09-28T12:15:00.757
> 
> 标签：android, android-activity, junit, gallery, robotium

我有一个应用程序，如果您单击一个按钮，它会打开 Android Gallery 应用程序。然后用户可以为我的应用程序选择一个图像。问题是，如果我在 JUnit 中单击该按钮，它会打开画廊，然后就坐在那里。我必须手动选择一张图片。我只是希望能够打开图库然后返回或者如果可能的话选择一张图片。

我尝试了几种选择，例如-

```
sendKeys(KeyEvent.KEYCODE_BACK)
Robotiums goBack(), goBackToActivity(), sendKey() functions
Robotiums clickOnScreen() function to click and select an image 
```

但这些似乎都不起作用。那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:21:23.063

我有同样的问题。您不能这样做，因为 Android Gallery 是另一个在其自己的沙箱中运行的应用程序，您无法从测试代码中访问该应用程序。

但是，我想出了以下解决方案。您可以构建自己的虚拟应用程序，为打开图像提供 Intent 过滤器。在这个应用程序中，您只需返回一个 ok 的意图。

现在，您只需在首次从测试应用程序打开图像时选择您的应用程序作为默认应用程序。之后，一切都应该自动运行。

完成测试后，您可以在 Android 设备的设置中重置默认意图过滤器。

我的解决方案的代码可以在这个讨论中找到：[如何为 Intent.ACTION_GET_CONTENT 提供内容](https://stackoverflow.com/questions/11933984/how-to-provide-content-for-intent-action-get-content/11940519#11940519)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:47:08.267

可以模拟从图库返回的响应。下面的代码片段完成了所有工作。

```
final Intent data = new Intent();
data.setData(Uri.parse("content://media/external/images/media/458")); // put here URI that you want select in gallery
Runnable runnable = new Runnable(){
    @Override
    public void run() {
        getActivity().onActivityResult(3333,-1, data);
        synchronized(this) {
            this.notify();
        }
    }
};
synchronized(runnable) {
    getActivity().runOnUiThread(runnable);
    runnable.wait();
} 
```

这种方法有两个缺点：

1.  您的活动的 onActivityResult 方法应该是公开的，它会阻止封装。
2.  测试实际上不会单击打开图库的按钮，并且不会执行 onClick 处理程序。

但是这种方法的好处是您不需要构建模拟应用程序并更改 android 设置中的任何默认值。

# c# - Crystal Report PrintToPrint方法安装软件后未连接打印机挂机？

> ID：12639844
> 
> 赞同：0
> 
> 时间：2012-09-28T12:15:40.403
> 
> 标签：c#, printing, crystal-reports, printers, printer-properties

在我的项目方法中，水晶报表的 PrintToPrint 工作正常，但是在打印机未连接到机器时安装软件后，此方法使我的软件进程挂起。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:00:29.623

我的解决方案是在调用打开水晶报表之前编写一个函数来确认打印机在线。

```
using System.Management;

public bool IsPrinterReady(string printerName)
        {

        bool bprinterOnline = false;       

        ManagementScope scope = new ManagementScope(@"\root\cimv2");
        scope.Connect();

        // Select Printers from WMI Object Collections
        ManagementObjectSearcher printerSearcher = new ManagementObjectSearcher("SELECT * FROM Win32_Printer");

        foreach (ManagementObject printer in printerSearcher.Get())
        {

            if (string.IsNullOrEmpty(printer["Name"].ToString()))
            {
                if (printer["Name"].ToString().ToLower().Equals(printerName.ToLower()))
                {

                    switch (printer["WorkOffline"].ToString().ToLower())
                    {
                        case "true":
                            bprinterOnline= true;
                            break;
                        case "false": 
                            bprinterOnline= false;
                            break;
                        default:
                            bprinterOnline= false;
                            break;
                    }
                    break;                     
                }
            }
        }
        return bprinterOnline;
    } 
```

# java - 如何在 GWT 客户端界面中调用 JAX-WS？

> ID：12639850
> 
> 赞同：2
> 
> 时间：2012-09-28T12:16:12.343
> 
> 标签：java, gwt, jax-ws

我正在 GWT（Google Web Toolkit）上开发项目，我需要调用 Web 服务（JAX-WS）。但问题是我不知道如何从 GWT 调用 Web 服务，所以我需要知道如何在 GWT 客户端访问该 JAX-WS？我正在 eclips 上开发我的项目，我的服务在 glassfish 服务器上运行。

请提供一些基本说明来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T07:23:39.893

调用外部非 gwt ws 的常规方法是通过 RequestBuilder 类，虽然这并不困难，但当您需要在应用程序中准备多个调用时可能会很乏味。

我建议您看一下 gwtquery aka gquery，它有一个 Ajax 类，允许以非常简单的方式调用 ws。看看[文档](http://code.google.com/p/gwtquery/wiki/Ajax)

这可能是 jax-ws 服务 json 响应的示例

```
 @BindingType(JSONBindingID.JSON_BINDING)
  public class MyService {
    public Book get(@WebParam(name="id") int id) {
      Book b = new Book();
      b.id = id;
      return b;
    }

    public static final class Book {
      public int id = 1;
      public String title = "Java";
    }
  } 
```

这可能是客户端的客户端调用

```
 import static com.google.gwt.query.client.GQuery.*;
 [...]

  post( //GQuery post static method (you have get, ajax, getJSONP, etc)
      "http://url_to_the_jax-ws.server/MyService", 
      $$("{get:{id:5}}"),                     // GQuery json parses the parameters
      new Function(){                         // Callback
        public void f() {
          Properties p = getDataProperties(); // JSON response
          alert("success " + p.get("title"));
        }
      }
  ); 
```

# url - Windows Server 2003 上的蛋糕路由中断 (%EF%BF%BD)

> ID：12639852
> 
> 赞同：0
> 
> 时间：2012-09-28T12:16:15.843
> 
> 标签：url, cakephp, windows-server-2003, backslash, apache2.2

刚刚将一个应用程序上传到运行 windows server 2003 的机器上。

任何用 a 指定的路由或链接都会`/`损坏 -`?`链接/地址栏中会出现一个带有 a 的黑色小圆圈，其值为`%EF%BF%BD`

```
$this->Html->link('Home', '/home'); // produces the problem

$this->Html->link('Home', array('action'=>'home')); // does not 
```

有解决办法吗？我不习惯在 Windows 服务器上工作；但它在 CentOS 机器和我的本地机器（Win 7）上运行、显示和工作正常，所以它表明它在服务器端配置不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:33:14.887

确保`mod_rewrite`已正确配置并运行：在 Apache 配置文件中，以下行应存在且未注释：

```
LoadModule mod_rewrite modules/mod_rewrite.so 
```

并看到你有`AllowOverride all`DocumentRoot

默认情况下， Apache for Windows`mod_rewrite`是禁用的，CakePHP 需要它来处理花哨的 URL。

# ruby - 在嵌套数组中查找重复项

> ID：12639854
> 
> 赞同：1
> 
> 时间：2012-09-28T12:16:18.217
> 
> 标签：ruby

我有一个哈希，其中包含一个哈希，其中包含许多数组，如下所示：

```
{ "bob" =>
    {  
       "foo" => [1, 3, 5],
       "bar" => [2, 4, 6]
    },
  "fred" =>
    {  
       "foo" => [1, 7, 9],
       "bar" => [8, 10, 12]
    }
} 
```

我想将这些数组与其他数组进行比较，然后提醒我它们是否重复。`hash["bob"]["foo"]`和有可能`hash["fred"]["foo"]`重复，但不能`hash["bob"]["foo"]`重复`hash["bob"]["bar"]`。与 相同`hash["fred"]`。

我什至不知道从哪里开始。我怀疑`inject`会涉及到某个地方，但我可能是错的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:44:26.667

```
h =  {
  "bob" =>
    {
       "foo" => [1, 3, 5],
       "bar" => [2, 4, 6]
    },
  "fred" =>
    {  
       "foo" => [1, 7, 9],
       "bar" => [1, 10, 12]
    }
}

h.each do |k, v|
  numbers = v.values.flatten
  puts k if numbers.length > numbers.uniq.length
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T14:00:01.397

此代码段将为每个键返回一组重复项。只能为相等的键生成重复项。

```
duplicates = (keys = h.values.map(&:keys).flatten.uniq).map do |key|
  {key =>  h.values.map { |h| h[key] }.inject(&:&)}
end 
```

这将返回`[{"foo"=>[1]}, {"bar"=>[]}]`表明该键`foo`是唯一一个包含`1`.

上面的代码片段假设`h`是您的哈希的变量名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:32:55.960

有很多方法可以做到这一点。这是一个应该易于阅读的内容。它适用于 Ruby 1.9。它使用 + 组合两个数组，然后使用 uniq! 算子来判断是否有重复号码。

```
h = { "bob" =>
{  
   "foo" => [1, 3, 5],
   "bar" => [2, 4, 6]
},
"fred" =>
{  
   "foo" => [1, 7, 12],
   "bar" => [8, 10, 12]
}
}

h.each  do |person|
    if (person[1]["foo"] + person[1]["bar"]).uniq! != nil  
        puts "Duplicate in #{person[1]}"
    end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T13:37:20.750

我不确定您到底在寻找什么。但是看看一个可能的解决方案，也许你可以重用一些东西。

```
outer_hash.each do |person, inner_hash|
  seen_arrays = Hash.new

  inner_hash.each do |inner_key, array|
    other = seen_arrays[array]
    if other
      raise "array #{person}/#{inner_key} is a duplicate of #{other}"
    end
    seen_arrays[array] = "#{person}/#{inner_key}"
  end
end 
```

# android - 仅限 SDK 版本 11 或更高版本的 Android 主屏幕小部件

> ID：12639858
> 
> 赞同：0
> 
> 时间：2012-09-28T12:16:34.113
> 
> 标签：android, android-layout, layout, android-widget

我正在使用应用程序最低 sdk 版本 3。我希望应用程序仅支持 OS 3.0(sdk - 11) 或更高版本的主屏幕小部件。即只有 OS 3.0 或更高版本的用户应显示在小部件中。如何做同样的事情？

我已经问了另外一个问题，让我知道它是否也可能。
[如何获取 RemoteView 中显示的记录数](https://stackoverflow.com/q/12559154/206809)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:44:54.587

**解决方案 1：**
发布 2 个 APK：

*   一个`android:minSdkVersion="11"`在你的清单和你的小部件实现中
*   另一个`android:minSdkVersion="3"`在您的清单中并且没有小部件实现

**解决方案 2：**
保留 minSdk 3 ( ) 并检查两个方法和扩展 AppWidgetProvider 的类中`android:minSdkVersion="3"`的 SDK 版本。只有在. 同样的，如果你有一个[App Widget Configuration Activity](http://developer.android.com/guide/topics/appwidgets/index.html#Configuring)，在 中执行以下操作：`onUpdate``onReceive``Build.VERSION.SKD_INT >= 11`
`onCreate()`

```
if (Build.VERSION.SDK_INT < 11) {
    setResult(RESULT_CANCELED);
    Toast.makeText(this, getString(R.string.widget_error_cannot_be_installed), Toast.LENGTH_LONG).show();
    finish();
} 
```

请记住，OS<3.0 的用户将在其小部件库中看到小部件，但无法添加它。因此，您可能会显示类似“您的 Android 操作系统版本太低而无法添加小部件”的 Toast。

如果您找到任何其他解决方案，请告诉我们。
谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T06:24:05.660

我面临同样类型的问题。

**解决方案：**

如果 android os 版本为 2.2 或更低，则制作数据的静态列表。

否则你必须实现 listview 并设置所有包含。

如果您发现任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T12:36:01.030

1）您可以使用 Build.VERSION.SDK_INT 检查操作系统版本，将其与[Build.VERSION_CODES](http://developer.android.com/reference/android/os/Build.VERSION.html)中定义的版本代码进行[比较](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)。

2) 请记住，在 2.0 之前的操作系统上（如果我没记错的话）ClassLoaders 对加载类的任何方法中提到的任何“不支持”的类或方法非常生气，即使您从未真正调用过这些方法。因此，请确保不要在将在 1.5 中使用的类中导入 1.5 上不可用的任何内容。

# excel - Excel VBA：在每奇数行之后插入2个空白行

> ID：12639859
> 
> 赞同：0
> 
> 时间：2012-09-28T12:16:44.627
> 
> 标签：excel, vba

我有一张已填充的 Excel 表格，我只需要在表格中的每个奇数行之后填充两个额外的空白行。如何执行此操作？我希望在单击按钮后完成此操作。建议一些答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:51:20.317

像这样的东西？

```
Sub extraRows()

i = 1
While Cells(i, 1) <> ""
        Range(Cells(i + 1, 1), Cells(i + 2, 1)).EntireRow.Insert
        i = i + 4
Wend

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:55:00.597

还是这样的？

```
Public Sub InsertRows()
  Dim i As Long
  Dim lngLastRow as long

  lngLastRow = 1000
  For i = 1 To lngLastRow Step 4
   ActiveSheet.Rows(i + 1).Insert xlShiftDown
   ActiveSheet.Rows(i + 2).Insert xlShiftDown
  Next i
End Sub 
```

要将其用作按钮，您需要将其粘贴到工作簿的模块中。如果没有，则必须创建一个。然后，您可以将此宏链接到按钮或快捷键。

# c# - c# Web服务排序结果

> ID：12639865
> 
> 赞同：0
> 
> 时间：2012-09-28T12:17:10.050
> 
> 标签：c#, linq, sorting

我正在尝试按 vehicle.DateRegistered 对这个选择进行排序，但这真的让我感到困惑，而且我似乎没有做任何事情。任何帮助将非常感激。

```
 var lookupValues = vehicles
            .Select(vehicle =>
                new LookupValue()
                {
                    Id = vehicle.Id,
                    Description = vehicle.RegistrationNumber + " " +vehicle.DateRegistered.ToString("dd/mm/yyyy"),
                    Data = Json.GetString(vehicle),
                    Active = true
                });
        return lookupValues; 
```

谢谢奥斯汀

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:20:05.570

使用[OrderBy](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderby.aspx)扩展方法：

```
var lookupValues = vehicles.OrderBy(v => v.DateRegistered).Select(.....); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:22:14.233

您可以尝试使用此代码 - 基于`OrderBy Linq`运算符

```
lookupValues.OrderBy(a=> a.DateRegistered); 
```

注意：在您的选择器中添加 DateRegistered

或者你也可以使用这个

```
var lookupValues = vehicles

                .OrderBy(a => a.DateRegistered) 
                .Select(vehicle =>
                new LookupValue()
                {
                    Id = vehicle.Id,
                    Description = vehicle.RegistrationNumber + " " +vehicle.DateRegistered.ToString("dd/mm/yyyy"),
                    Data = Json.GetString(vehicle),
                    Active = true
                });
        return lookupValues; 
```

注意：您定义顺序方向：降序或升序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T12:24:57.040

```
var lookupValues = vehicles
        .OrderBy(vehicle => vehicle.DateRegistered)
        .Select(vehicle =>
            new LookupValue()
            {
                Id = vehicle.Id,
                Description = vehicle.RegistrationNumber + " " +vehicle.DateRegistered.ToString("dd/mm/yyyy"),
                Data = Json.GetString(vehicle),
                Active = true
            });
    return lookupValues; 
```

# maven - 在为生产创建最终 jar 时忽略 jar

> ID：12639867
> 
> 赞同：0
> 
> 时间：2012-09-28T12:17:31.020
> 
> 标签：maven, maven-2

我正在使用一些像 junit 这样的罐子，它们仅用于测试目的。我正在使用 maven 依赖插件将所有 jar 复制到使用 maven 创建的最终 zip 文件中。有没有办法避免junit jars被复制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T14:04:15.883

在配置中放置 includeScope = runtime

```
 <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-dependency-plugin</artifactId>
                    <version>2.9</version>
                    <executions>
                        <execution>
                            <id>copy-dependencies</id>
                            <phase>package</phase>
                            <goals>
                                <goal>copy-dependencies</goal>
                            </goals>
                            <configuration>
                                <!-- exclude junit, we need runtime dependency only -->
                                <includeScope>runtime</includeScope>
                                <outputDirectory>${project.build.directory}/dependency-jar/</outputDirectory>
                            </configuration>
                        </execution>
                    </executions>
                </plugin> 
```

# regex - 自动机和正则表达式理论工具

> ID：12639874
> 
> 赞同：2
> 
> 时间：2012-09-28T12:17:51.520
> 
> 标签：regex, command-line, finite-automata, automata

早在 2000 年，当我还是一名学生时，我参加了自动机理论课程。在本课程的练习中，我们基本上重新编写了一个名为 Grail ( [http://www.csd.uwo.ca/Research/grail/](http://www.csd.uwo.ca/Research/grail/) ) 的 unix 命令行工具。Grail 允许您读取带有正则表达式或确定性/非确定性有限状态机的文件，并对它们应用典型的理论操作：最小化 FSM、检查空虚、反转、FSM 的乘积、FSM 到 RegEx 和 RegEx 到 FSM、应用输入字符串和模拟机器等等。

Grail 似乎可用，但显然自 2002 年以来尚未开发。因此我的问题是：有人知道仍在积极开发中的类似工具吗？（即现代圣杯？）今天的课堂使用什么？

我正在寻找的是一个命令行工具，它从标准输入读取 FSM 或 RegExes，应用操作，并将结果输出到标准输出，Unix 方式，以便您可以创建自己的管道。简单的 FSM 和 RegEx 就足够了，所以像下推自动机或 Büchi 自动机这样的东西并不是真正需要的。

如果没有命令行工具，是否有好的库或图形工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T20:31:50.523

Vaucanson 平台和 OpenFst 一样，提供了一个名为 TAFKit 的命令行工具，它完全符合您的要求：它从标准输入或已存储文件中读取 FSM 或 RegExp 以获取已计算的对象，并对它们执行操作（大约 70 个可用函数） ，并将结果输出到标准输出或文件中以供进一步处理。您可以通过管道传输和创建 shell 脚本。

如需下载 Vaucanson 1.4.1，请访问

[http://www.lrde.epita.fr/cgi-bin/twiki/view/Vaucanson/Vaucanson141](http://www.lrde.epita.fr/cgi-bin/twiki/view/Vaucanson/Vaucanson141)

您会在那里找到相当完整的用户手册。

欲了解更多信息，请随时给我发邮件。

```
 Jacques Sakarovitch
                   sakarovitch@enst.fr 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T06:42:48.903

[OpenFst](http://www.openfst.org)是一组用于操作有限状态转换器的命令行工具，还有一个配套的语法工具包 [OpenGrm](http://www.openfst.org/twiki/bin/view/GRM/Thrax)。这些机器可以使用 GraphViz 进行可视化。

[foma](http://code.google.com/p/foma/)是另一个支持正则表达式的传感器工具包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T08:55:35.640

查看[http://www.stanford.edu/~laurik/fsmbook/home.html](http://www.stanford.edu/~laurik/fsmbook/home.html)上的标记化和查找命令行工具。这些设计用于标记文本（将其分成单词）和查找单词的形态阅读，但更普遍适用。

对于基于 OpenFst 构建的 Thrax 语言，有一个可用的命令行工具，如下所示：

cat input1 bab babbab baba

猫输入1 | thraxrewrite-tester --far=testrewrite.far --rule=R1 | cut -f5 -d' ' bib bibbib biba

R1 在上下文 b_b 中用“i”代替“a”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T06:47:09.207

[jFlap](http://www.jflap.org/)是一个用 Java 编写的类似程序。最后一次更新是 2011 年 5 月

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-24T19:47:23.810

对于 java，我个人使用[http://www.brics.dk/automaton/](http://www.brics.dk/automaton/)，它不再真正处于积极开发中，但它仍然被广泛使用，非常稳定且非常快。可以将正则表达式转换为自动机并应用不同的操作，例如连接、交集、联合等。然而，唯一缺少的部分是将自动机反向翻译为正则表达式字符串。

我在 dk.brics 之上实现了一个库，它允许您通过状态消除从它们的自动机表示中派生正则表达式字符串。通过使用这个库，应该可以开发你上面描述的命令行工具。

如果您有兴趣，可以查看[https://github.com/julianthome/autorex](https://github.com/julianthome/autorex)。

最良好的祝愿和亲切的问候，朱利安

# gwt - 一台服务器中的 GWT 客户端文件和另一台服务器中的 GWT Servlet

> ID：12639875
> 
> 赞同：1
> 
> 时间：2012-09-28T12:17:55.810
> 
> 标签：gwt

我正在尝试分离 GWT 客户端和服务器。如果我没记错的话，GWT 客户端代码通过连接到我们在 GWT 项目的 web.xml 中提到的 servlet 来获得服务器响应。如果是这样，我可以将我的 GWT Servlet 托管在一个 Tomcat 服务器中并将 GWT 客户端代码托管在另一个 Tomcat 服务器中吗？

它会工作..吗？如果是这样怎么做，我已经尝试过在 GWT 客户端文件中使用 hosts.html 的东西。但它没有奏效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:50:07.823

是的，您可以在任何网络服务器中托管客户端文件，因为它们是静态的，实际上您需要选择 index.html、.nocache.js 和所有 *.cache.(js|html) 文件并放入它们在任何 Web 服务器（apache、nginx、iis、jetty 等）中。

您甚至可以用任何其他 html 生成器（如 php、jsp 等）替换 index.html。

当然，服务器端应该托管在一个 servlet 容器中。

您必须注意的是，当带有您的静态文件的服务器与 servlet 服务器位于不同的域中时，ajax 请求将由于安全限制而失败（请参阅 CORS）。

为了避免这种限制，gwt 中有很多方法（gwtquery-jsonp、gwt-xdm 等）。

我正在使用的是一个过滤器（参见上面的代码），它能够在收到选项请求时启用 CORS。

您还必须修改客户端代码以正确配置 servlet-container 的 url。这是使用 RequestFactory 更改 url 的示例。

RF的客户端代码：

```
myFactory = GWT.create(MyRFFactory.class);
DefaultRequestTransport transport = new DefaultRequestTransport();
transport.setRequestUrl("http://my.servletcontainer.com/gwtRequest");
myFactory.initialize(eventBus, transport); 
```

web.xml 配置

```
 <filter>
   <filter-name>CORSFilter</filter-name>
   <filter-class>my.namespace.CORSFilter</filter-class>
</filter>
<filter-mapping>
   <filter-name>CORSFilter</filter-name>
   <url-pattern>/*</url-pattern>
</filter-mapping> 
```

服务器过滤器

```
public class CORSFilter implements Filter {

  public void doFilter(ServletRequest servletRequest,
      ServletResponse servletResponse, FilterChain filterChain)
      throws IOException, ServletException {

    HttpServletRequest req = (HttpServletRequest) servletRequest;
    HttpServletResponse resp = (HttpServletResponse) servletResponse;

    String o = req.getHeader("Origin");
    if ("options".equalsIgnoreCase(req.getMethod())) {
      resp.setHeader("Allow", "GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS");
      if (o != null) {
        resp.addHeader("Access-Control-Allow-Origin", o);
        resp.addHeader("Access-Control-Allow-Methods", 
                       "POST, GET, OPTIONS");
        resp.addHeader("Access-Control-Allow-Headers",
                       "content-type,pageurl,x-gwt-permutation");
        resp.setContentType("text/plain");
      }
      resp.getWriter().flush();
      return;
    }

    if (o != null) {
      resp.addHeader("Access-Control-Allow-Origin", o);
    }

    if (filterChain != null) {
      filterChain.doFilter(req, resp);
    }
  }

  @Override public void destroy() {
  }

  @Override public void init(FilterConfig arg0) throws ServletException {
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:00:58.290

过去也有人问过同样的问题。

[gwt-拆分客户端和服务器](https://stackoverflow.com/questions/11240848/gwt-split-client-and-server-to-different-machines)

您可以做的是使用 servlet 作为另一个服务器的代理，您已经在其中实现了模型逻辑。

# javascript - Google 网站、iframe、解析 id

> ID：12639876
> 
> 赞同：0
> 
> 时间：2012-09-28T12:17:57.943
> 
> 标签：javascript

我在sites.google.com 上注册了一个页面。 [https://sites.google.com/site/redirre4/?id=3434343434](https://sites.google.com/site/redirre4/?id=3434343434) 我选择了一个 iframe widjet，感觉在我的链接中

> `http://92.63.106.195/test`
> 
> 索引.html

```
<head>
<script type="text/javascript">
function getUrlVars() {
     var vars = {};
     var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
          vars[key] = value;
     });
     return vars;
}
var id = getUrlVars()["id"];
var url = 'http://ya.ru/?flowid=545&code=ixynrgjgfdhnurl&id=';

       alert (url + id);
    top.location.href = (url + id);

 </script>
</head>

</html> 
```

但是我有一个问题，一个函数不能解析一个id。它出什么问题了？

# javascript - 在 iOS Safari 中禁用过度滚动

> ID：12639888
> 
> 赞同：7
> 
> 时间：2012-09-28T12:18:42.847
> 
> 标签：javascript, jquery, iphone, touch, mobile-safari

如何防止 Safari iOS 中的过度滚动？我会使用触摸手势在网站上导航，但我不能。

我试过这个：

```
$(window).on('touchstart', function(event) {

    event.preventDefault();

}); 
```

但是通过这种方式，我禁用了所有手势，事实上我无法通过捏合和捏合进行缩放。

有什么解决办法吗？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T22:12:47.530

这种方式将允许可滚动元素，同时仍然防止浏览器本身的过度滚动。

```
//uses document because document will be topmost level in bubbling
$(document).on('touchmove',function(e){
  e.preventDefault();
});
//uses body because jquery on events are called off of the element they are
//added to, so bubbling would not work if we used document instead.
$('body').on('touchstart','.scrollable',function(e) {
  if (e.currentTarget.scrollTop === 0) {
    e.currentTarget.scrollTop = 1;
  } else if (e.currentTarget.scrollHeight === e.currentTarget.scrollTop + e.currentTarget.offsetHeight) {
    e.currentTarget.scrollTop -= 1;
  }
});
//prevents preventDefault from being called on document if it sees a scrollable div
$('body').on('touchmove','.scrollable',function(e) {
  e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-16T05:02:53.807

这*应该*是完成此任务的最简单方法：

```
$(function() {
    document.addEventListener("touchmove", function(e){ e.preventDefault(); }, false);
}); 
```

希望这可以帮助。

最好的。

# android - MainActivity.java 问题启动一个新的 Android 项目

> ID：12639891
> 
> 赞同：0
> 
> 时间：2012-09-28T12:18:58.617
> 
> 标签：android

当我在 Eclipse 中启动一个新的 android 项目时，即使有提示，我也无法修复其中的错误。怎么可能？我使用 Mint 64 位和 Eclipse 64 位，我按照官方页面上的教程安装了我需要的所有内容。这是代码。问题出在 setContentView 和带有 R 类的 getMenuInflater 中。我不知道该怎么办，我在网上找不到解决方案...

```
package com.example.myfirstapp;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:24:31.297

可能你不导入 R 类。尝试添加：

```
import com.example.myfirstapp.R 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:23:39.203

R 类是在构建时创建的。问题可能是该项目还没有建成。在这种情况下，您应该构建（或重建）您的项目。
在 Eclipse 中，您可以选择 Project->Build automatically，以便编译器自动构建您的项目。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-21T16:30:29.650

如果您在 64 位系统上运行，请确保安装了 32 位库。运行 sudo apt-get install ia32-libs。重启eclipse/ADT。

# python - 数据库中的金字塔国际化 i18n 词？

> ID：12639896
> 
> 赞同：1
> 
> 时间：2012-09-28T12:19:11.607
> 
> 标签：python, internationalization, pyramid

是否可以翻译数据库中的单词？我想使用标准工具：python setup.py extract_messages 并使用文件 locale/fr/LC_MESSAGES/*.po 进行翻译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:00:08.620

有可能的。只需将从数据库返回的文本传递给 TranslationString。

您可以使用`TranslationStringFactory(domain)`来构建您的字符串并将其传递给本地化程序。您可能遇到的问题是从数据库中提取字符串。我不知道你是怎么做到的，但你可以通过一个提取器从数据库中提取消息。

另一种可能更好的方法是创建一个带有字符串的虚拟文件。将所有内容提取到格式为 gettext 的文件中。

您可以将其添加到修订中，当前的消息提取器将像往常一样获取文本

**编辑**

由于事物在数据库中的存储方式始终是非常定制的，因此据我所知没有这样的工具。但是应该很容易写。

它应该看起来像这样。

```
with open(registry.settings['db_locale_file'], 'w') as f:
    for result in my_query_results:
        f.writeline('_(u"%s")' % result.key_you_want) 
```

这是一个非常简单的例子，但它应该更复杂。您可以使用金字塔引导程序使其成为脚本，然后调用

```
your_script
python setup.py extract_messages
python setup.py update_catalog
????
python setup.py compile_catalog
????
#profit! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T14:58:26.863

是的，这是可能的。您应该实现一个脚本以在文件的行尾添加必须翻译的字段`locale/project_name.pot`

举个例子：

```
金字塔_i18n_howto/views.py:7
msgstr "我的 i18n 项目" #field_id 添加到模板中
msgstr "" # 要显示的标签

默认值：搜索文档
金字塔_i18n_howto/templates/mytemplate.pt:37
msgstr "search_documentation"
msgstr ""

```

您还将为文件中的每种语言添加它`locale/it/project_name.po`

有关详细信息，请参阅[此](http://danilodellaquila.com/blog/pyramid-internationalization-howto)

# c# - ClickOnce 和自动更新

> ID：12639898
> 
> 赞同：0
> 
> 时间：2012-09-28T12:19:14.400
> 
> 标签：c#, wpf, .net-4.0, clickonce, auto-update

在启用应用程序之前，我已使用自动更新将应用程序部署到服务器

```
<subscription>
  <update>
     <beforeApplicationStartup />
  </update>
</subscription> 
```

我在另一台机器上安装了这个应用程序。但是当我对项目进行一些更改并将其重新发布到同一台服务器时，另一台机器上安装的应用程序看不到更新并运行旧版本。每次重新发布时，我都会增加修订号。为什么该应用程序没有看到更新？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:26:52.917

你可以检查很多东西。

*   应用程序应检查更新（发布选项卡中的属性）
*   发布新版本时，您必须增加版本（从 1.0.0.0 到 1.0.0.1）
*   更新位置（URL 或 UNC pat）必须可供应用程序访问

# android - Android中的共享首选项？

> ID：12639899
> 
> 赞同：4
> 
> 时间：2012-09-28T12:19:19.887
> 
> 标签：android, login, sharedpreferences

我是一名新手 Android 开发人员，目前正在努力构建登录屏幕。

我需要找到将用户名和密码存储在一类中并从另一类中检索的最简单方法。见谷歌提供了几种方式：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

哪一个是最有效和最容易编码的？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:29:36.663

对于存储用户名和密码等登录屏幕任务，您可以使用共享首选项。在这里，我制作了使用共享首选项的自定义方法。调用`savePreferences()`方法并放置您的 Key 和 Value（`savePreferences()`基于 XML），同样使用您的 Key 调用 Load。最后不要忘记调用`deletePreferences()`LOGOUT。

```
/**
 *   Method used to get Shared Preferences */

public SharedPreferences getPreferences() 
{
    return getSharedPreferences(<PREFRENCE_FILE_NAME>, MODE_PRIVATE);
}
/**
 *  Method used to save Preferences */
public void savePreferences(String key, String value) 
{
    SharedPreferences sharedPreferences = getPreferences();
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString(key, value);
    editor.commit();
}
/**
 *  Method used to load Preferences */
public String loadPreferences(String key) 
{
    try {
        SharedPreferences sharedPreferences = getPreferences();
        String strSavedMemo = sharedPreferences.getString(key, "");
        return strSavedMemo;
    } catch (NullPointerException nullPointerException) 
    {
        Log.e("Error caused at  TelaSketchUtin loadPreferences method",
                ">======>" + nullPointerException);
        return null;
    }
}
/**
 *  Method used to delete Preferences */
public boolean deletePreferences(String key)
{
    SharedPreferences.Editor editor=getPreferences().edit();
    editor.remove(key).commit();
    return false;
} 
```

希望这对您有所帮助。不要忘记做+1。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T12:32:12.573

定义一些静态数据来存储首选项文件名和您要使用的键：

```
public static final String PREFS_NAME = "MyPrefsFile";
private static final String PREF_USERNAME = "username";
private static final String PREF_PASSWORD = "password"; 
```

然后，您将保存用户名和密码，如下所示：

```
getSharedPreferences(PREFS_NAME,MODE_PRIVATE)
.edit()
.putString(PREF_USERNAME, username)
.putString(PREF_PASSWORD, password)
.commit(); 
```

所以你会像这样检索它们：

```
SharedPreferences pref = getSharedPreferences(PREFS_NAME,MODE_PRIVATE);   
String username = pref.getString(PREF_USERNAME, null);
String password = pref.getString(PREF_PASSWORD, null);

if (username == null || password == null) {

//Prompt for username and password
} 
```

或者，如果您不想命名首选项文件，您可以使用默认值：

```
SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(this); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T12:22:41.427

出于您的目的，SQLite 数据库和 SharedPreferences 都可以使用。但我建议使用 SharedPreferences，因为它们非常易于使用。有些人喜欢创建一个类来保存这样的变量，但 SQLite 和 SharedPreferences 文件的好处是，即使应用程序进入后台并被破坏，用户登录名和密码信息也会随身携带。因此，当用户返回您的应用时，您可以再次登录，而无需输入密码。如果用户明确决定注销，您可以简单地从共享首选项文件中删除登录信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T12:25:59.863

从其他活动中检索登录信息的最简单方法是使用“SharedPreferences”。我强烈推荐这种方法来存储和检索用户名和密码。因为您可以从应用程序中的任何位置访问这些信息，而不会带来任何麻烦。登录信息可能必须在应用程序中重复使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T12:27:47.450

许多应用程序可以提供一种方法来捕获用户对特定应用程序或活动设置的偏好。为了支持这一点，Android 提供了一组简单的 API。

首选项通常是名称值对。它们可以跨应用程序中的各种活动存储为“共享首选项”（注意目前它不能跨进程共享）。或者它可能是需要存储特定于活动的东西。

共享首选项：共享首选项可由应用程序之外的所有组件（活动、服务等）使用。

活动处理的首选项：这些首选项只能在活动中使用，不能被应用程序的其他组件使用。

共享偏好：

共享首选项在 Context 类的 getSharedPreferences 方法的帮助下进行管理。首选项存储在默认文件 (1) 中，或者您可以指定用于引用首选项的文件名 (2)。

(1) 这里是指定文件名时如何获取实例

```
 public static final String PREF_FILE_NAME = "PrefFile";
  SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE); 
```

MODE_PRIVATE 是首选项的操作模式。这是默认模式，意味着创建的文件只能由调用应用程序访问。支持的其他两种模式是 MODE_WORLD_READABLE 和 MODE_WORLD_WRITEABLE。在 MODE_WORLD_READABLE 中，其他应用程序可以读取创建的文件但不能修改它。在 MODE_WORLD_WRITEABLE 的情况下，其他应用程序也对创建的文件具有写权限。

(2) 推荐的方式是使用默认模式，不指定文件名：

```
 SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context); 
```

最后，一旦有了首选项实例，您可以通过以下方式从首选项中检索存储的值：

```
 int storedPreference = preferences.getInt("storedInt", 0); 
```

要将值存储在首选项文件中，必须使用 SharedPreference.Editor 对象。Editor 是 SharedPreference 类的嵌套接口。

```
 SharedPreferences.Editor editor = preferences.edit();
   editor.putInt("storedInt", storedPreference); // value to store
   editor.commit(); 
```

编辑器还支持 remove() 和 clear() 等方法从文件中删除首选项值。

活动偏好：

其他应用程序组件可以使用共享首选项。但是，如果您不需要与其他组件共享偏好并希望拥有活动私人偏好。您可以在活动的 getPreferences() 方法的帮助下做到这一点。getPreference 方法使用 getSharedPreferences() 方法和活动类的名称作为首选项文件名。

以下是获取首选项的代码：

```
 SharedPreferences preferences = getPreferences(MODE_PRIVATE);
   int storedPreference = preferences.getInt("storedInt", 0); 
```

存储值的代码也与共享首选项的情况相同。

```
 SharedPreferences preferences = getPreference(MODE_PRIVATE);
   SharedPreferences.Editor editor = preferences.edit();
   editor.putInt("storedInt", storedPreference); // value to store
   editor.commit(); 
```

您还可以使用其他方法，例如将活动状态存储在数据库中。注意 Android 还包含一个名为 android.preference 的包。该包定义了实现应用程序首选项 UI 的类。

要查看更多示例，请查看开发人员网站上的 Android 数据存储帖子。

有关更多信息，请查看此链接：

[使数据在android中持久化](https://stackoverflow.com/questions/3310066/making-data-persistent-in-android)

# javascript - 使用 AppMobi 和事件

> ID：12639902
> 
> 赞同：0
> 
> 时间：2012-09-28T12:19:23.470
> 
> 标签：javascript, html, events, javascript-events, appmobi

我是新的 AppMobi 世界的新手，所以请大家帮帮我。

我创建了一个图像对象并将其绘制到舞台上。我的问题是我想向对象添加一个事件。

我已经使用以下方法设置了图像：

```
function objImage(imageURL,x,y,width,height) {
    this.imgCanvas = new Image();
    this.imageURL = imageURL;
    this.loaded = false;
    this.x = x;
    this.y = y;
    this.height = height;
    this.width = width;

    this.draw = function() {

        if (this.width == null || this.height == null)
        {
            ctx.drawImage(this.imgCanvas,this.x,this.y); 
        }
        else
        {
            ctx.drawImage(this.imgCanvas,this.x,this.y,this.width,this.height);         
        }
    }
} 
```

我已经把它画上了舞台：

```
var usercontrols_left = new objImage('images/left.png',10,HEIGHT-100,50,50);
usercontrols_left.draw(); 
```

**现在我想向“usercontrols_left”添加一个事件，例如检测用户何时触摸/单击它。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:17:57.670

我不知道你是否在使用 directCanvas。我相信这个解决方案应该可以工作。

捕获 touchstart 事件并通过其坐标感知它是否在您的左侧元素的位置。如果是，则执行需要触发的命令。

伪代码：

```
Canvas.addEventListener('touchstart', startTouch, false);

function startTouch(){
    if(touch.x<60&&touch.x>10&&touch.y<height-50&&touch.y>height-100)
     { handleLeftControl(); }
} 
```

**编辑* 改用 webview 的示例：** 在 webview 中，您将拥有：

```
<div id="Leftbutn" ontouchstart="AppMobi.canvas.execute('switchCommand(\'leftBTNdown\');')" ontouchend="AppMobi.canvas.execute('switchCommand(\'leftBTup\');')" ></div> 
```

然后在 directCanvas 端，您只需通过您想要在开关或函数中执行的操作来处理这些命令。

# c# - 无法加载 ClassDiagram.cd 不支持 URI 格式

> ID：12639904
> 
> 赞同：7
> 
> 时间：2012-09-28T12:19:30.613
> 
> 标签：c#, asp.net

当我在我的 ASP.NET 应用程序 C# 中创建一个新的类图时，它给了我一条错误消息，上面写着：

```
(Cannot load 'C:\Users\...\...\App_Code\ClassDiagram.cd': URI formats are not supported) 
```

我的 ASP.NET 项目中没有任何类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T14:29:19.007

```
string uri = "file:\\C:\Users\...\...\App_Code\ClassDiagram.cd";
string localPath = new Uri(uri).LocalPath; 
```

或者

```
@'C:\Users\...\...\App_Code\ClassDiagram.cd' 
```

或者

```
'C:\\Users\\...\\...\\App_Code\\ClassDiagram.cd' 
```

解决您问题的三种方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T20:38:03.127

[请在此处](https://stackoverflow.com/questions/18391113/cannot-load-classdiagram-cd-on-visual-studio-uri-formats-are-not-supported/28463971#28463971)查看我对 stackoverflow 相关帖子的完整回答，了解更多详细信息。

在“WEBSITE”下，选择“Use Visual Studio Development Server...”，然后尝试右键单击您的解决方案（或 App_Code 也适用于我）并再次选择“View Class Diagram”。

# javascript - Opera window.open 不更改 URL

> ID：12639914
> 
> 赞同：0
> 
> 时间：2012-09-28T12:20:06.760
> 
> 标签：javascript, opera

我正在使用 javascript 方法 window.open 来获取对我服务的其他窗口的引用。

主要思想是，如果我使用 window.open('', name ) 并且具有给定名称的窗口存在，那么我会得到对它的引用（如果它来自同一个域，我可以与它通信）。如果没有，新窗口的 URL 为“about:blank”。因此，如果它是关于：空白，我将关闭它。

这适用于除 Opera 之外的所有浏览器...当我在每个浏览器上使用空字符串作为第一个参数调用 window.open 时，如果存在具有此名称的窗口，我将获得对它的引用，仅此而已。但不是在 Opera 上 - 此窗口的 URL 将更改为 about:blank。

有没有办法在 Opera 上解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:59:09.490

我建议`window.focus('name');`:)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T11:30:30.640

我知道这是一个老问题，但仍然有 Presto Opera 用户，这里有一个解决方案（更多的是 hack）（是的，需要浏览器嗅探）：

`var popup = window.open("file:///D:/nonexistent_file", name);`

这样，您将在新窗口中获得窗口引用和无关紧要的安全异常（如果打开了带有`about:blank`url 的新窗口）。

# python - Python 编码风格换行

> ID：12639916
> 
> 赞同：5
> 
> 时间：2012-09-28T12:20:25.033
> 
> 标签：python

如 [http://docs.python.org/tutorial/controlflow.html](http://docs.python.org/tutorial/controlflow.html)所述：

*换行，使它们不超过 79 个字符。*

通常我在第 80 行使用断线，但有时我的函数需要很多参数，例如：

```
extractor.get_trigger_info(cur,con,env,family,iserver,version,login,password,prefix,proxyUser,proxyPass,proxyServer,triggerPage,triggerInfo) 
```

那么，可以给出什么样的建议来保持 Python 编码风格的指导方针？具有许多参数的函数的最佳实践是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T12:23:05.910

此类问题的权威参考是[PEP 8](http://www.python.org/dev/peps/pep-0008/#maximum-line-length)。PEP 8 让你可以自由地在任何你想要的地方中断（前提是你在二元运算符之后中断并在括号内使用隐含的行继续）。每当您换行时，通常下一行在左括号之后的列中开始：

```
def func_with_lots_of_args(arg1, arg2, arg3,
                           arg4, arg5): 
```

我个人的风格是尽量安排东西，使休息后每一行的东西长度大致相同。

```
def func(arg1, arg2, arg3,
         arg4, arg5, arg6,
         kwd='foobar'): 
```

而不是：

```
def func(arg1, arg2, arg3,
         arg4, arg5, arg6, kwd='foobar'): 
```

虽然 PEP8 并没有真正说你需要这样做。

* * *

附带说明一下，如果您有一个具有这么多位置参数的函数，您可能应该重新考虑您的程序设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:55:15.427

我建议：

1.  在 2 个自动化工具下保持代码整洁：pyflakes 和 pep8.py（有各种文本编辑器插件）

2.  选择你认为最好的方法，并在整个项目中坚持下去。如果已经有条理，坚持那个。

# java - 如何强制缓存我的所有 HTTP 响应？

> ID：12639922
> 
> 赞同：2
> 
> 时间：2012-09-28T12:20:38.143
> 
> 标签：java, android

我正在使用`DefaultHTTPClient`发出一些 HTTP GET 请求。我想强制将所有 HTTP 响应缓存一周。在浏览了文档和一些 SO 答案之后，我已经这样做了：

`HttpResponseCache`我通过`onCreate`我的主要活动的方法安装了一个。

```
 try {
        File httpCacheDir = new File(getApplicationContext().getCacheDir(), "http");
        long httpCacheSize = 10 * 1024 * 1024; // 10 MiB
        HttpResponseCache.install(httpCacheDir, httpCacheSize);
    } catch (IOException e) {
        Log.i("dd", "HTTP response cache installation failed:" + e);
    } 
```

我为我的 HTTP 客户端添加了一个自定义`HttpResponseInterceptor`，但我仍然没有得到缓存命中。这是我的响应拦截器，它解压缩 GZIPped 内容、剥离缓存标头并添加自定义标头：

```
class Decompressor implements HttpResponseInterceptor {

    public void process(HttpResponse hreResponse, HttpContext hctContext) throws HttpException, IOException {

        hreResponse.removeHeaders("Expires");
        hreResponse.removeHeaders("Pragma");
        hreResponse.removeHeaders("Cache-Control");
        hreResponse.addHeader("Cache-Control", "max-age=604800");

        HttpEntity entity = hreResponse.getEntity();

        if (entity != null) {
            Header ceheader = entity.getContentEncoding();
            if (ceheader != null) {
                HeaderElement[] codecs = ceheader.getElements();
                for (int i = 0; i < codecs.length; i++) {
                    if (codecs[i].getName().equalsIgnoreCase("gzip")) {
                        hreResponse.setEntity(new HttpEntityWrapper(entity) {
                            @Override
                            public InputStream getContent() throws IOException, IllegalStateException {
                                return new GZIPInputStream(wrappedEntity.getContent());
                            }

                            @Override
                            public long getContentLength() {
                                return -1;
                            }
                        });
                        return;
                    }
                }
            }
        }
    }

} 
```

以下是我提出请求的方式：

```
String strResponse = null;

HttpGet htpGet = new HttpGet(strUrl);
htpGet.addHeader("Accept-Encoding", "gzip");
htpGet.setHeader("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1");
DefaultHttpClient dhcClient = new DefaultHttpClient();
dhcClient.addResponseInterceptor(new Decompressor(), 0);
HttpResponse resResponse = dhcClient.execute(htpGet);
Log.d("helpers.network", String.format("Cache hit count: %d", HttpResponseCache.getInstalled().getHitCount()));

strResponse = EntityUtils.toString(resResponse.getEntity());

return strResponse; 
```

我似乎无法确定我做错了什么。你们有谁知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:08:47.050

不确定这是否回答了您的问题，但您是否考虑过使用 Android 自己的缓存目录简单地添加客户端缓存，而不是依赖 HTTP 服务器解释您的缓存控制标头？

我们在点火中所做的只是将服务器响应作为字节流写入磁盘，从而完全控制缓存（和过期缓存）。

[这里](https://github.com/kaeppler/ignition)有一个示例应用程序，但它需要您使用库的 HTTP API（不过，它只是 HttpClient 的一个瘦包装器。）或者只是看看缓存是如何工作的，然后从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:14:44.297

我失败了。根据 Android 文档，它特别提到了`HttpResponseCache`“*缓存对文件系统的 HTTP 和 HTTPS 响应，以便它们可以被重用，从而节省时间和带宽。这个类支持 HttpURLConnection 和 HttpsURLConnection；没有平台为 DefaultHttpClient 或 AndroidHttpClient 提供缓存。”*

所以就这样了。

现在 Apache 的 HTTP 客户端有一个`CachingHttpClient`新版本的 HTTP 客户端已经通过[这个项目](http://code.google.com/p/httpclientandroidlib/)移植到了 Android 上。当然，我可以使用这个。

我不想使用 Apache HTTP 客户端库的 hackish 版本，所以一个想法是从 HTTP 客户端蚕食与缓存相关的位并重新整理我自己的，但它的工作量太大了。

我什至考虑过按照建议转到推荐的`HttpURLConnection`课程，但我遇到了其他问题。该类似乎没有好的 cookie 持久性实现。

无论如何，我跳过了所有内容。我正在通过缓存减少加载时间，为什么不更进一步，因为我使用 jSoup 从页面中抓取记录并创建`ArrayList`一个自定义结构，我不妨`ArrayList`通过`Serializable`在我的结构体。现在我不必等待页面请求，也不必等待 jSoup 解析缓慢。赢。

# c++ - 多线程 mex 代码比单线程慢

> ID：12639926
> 
> 赞同：1
> 
> 时间：2012-09-28T12:20:49.693
> 
> 标签：c++, multithreading, matlab, mex

我正在 MATLAB 中编写 mex 代码来执行和操作（因为该操作使用 c++ 中的库）。mex 代码有一个部分，其中有一个函数在循环中以不同的参数值重复调用，并且每个函数调用都是独立的（即，1 个调用的计算不依赖于先前的调用）。因此，为了加快速度，我编写了创建多个线程的多线程代码 - 线程的确切数量等于循环迭代的数量，在我的示例中，此值为 10。每个线程计算循环中的函数以获得单独的值参数，线程返回并加入，完成更多计算并返回结果。所有这些理论上应该给我很好的加速，但我看到多线程代码比普通的单线程代码慢很多！我可以使用非常强大的 24 核机器，所以这完全令人困惑，因为我希望每个线程都被安排在一个单独的核心上。对导致这种情况的任何想法？导致这种情况的代码中有任何常见问题/错误吗？

任何帮助将不胜感激。

编辑：为了回答这里人们提出的解决方案中提出的许多疑问，我想分享一些关于我的代码的信息： 1\. 每个函数调用都需要几分钟，所以线程的同步和产生不应该是这里的开销（尽管如果有在这种情况下是否有任何缓解情况，任何有关此的信息都会非常有帮助！）

2.  每个线程都访问公共数据结构、数组、矩阵，但这些中的值根本不会被覆盖。所有对变量的写入都是对线程本地的变量、指针、数组等进行的。所以，我猜这里不应该有很多缓存未命中？

3.  我的代码中也没有互斥部分，因为没有线程写入任何公共内存位置。所有写入都写入线程本地的内存位置。

我仍在试图找出我的多线程实现不起作用的原因:(所以，任何指针/信息都会非常有帮助！

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:32:34.860

我认为您的问题根本不是 mex 特有的——这听起来像是为 SMP 编写多线程代码时常见的性能问题。

补充一点已经提到的潜在问题：

*   [错误的缓存行共享](http://en.wikipedia.org/wiki/False_sharing)：您可能认为您的线程独立工作，而实际上它们访问同一缓存行中的不同数据。简单的例子：

    ```
    /* global variable accessible by all threads */
    int thread_data[nthreads];

    /* inside thread function */
    thread_data[thrid] = some_value; 
    ```

*   内存带宽利用率低下。在 NUMA 系统上，您希望 CPU 访问它们自己的数据库。如果您没有正确分配数据，CPU 会向其他 CPU 请求内存。这意味着沟通，你不怀疑存在。

*   线程亲和性。有点与上面的点有关。您希望您的线程在整个计算期间都绑定到它们自己的 CPU。否则它们可能会被操作系统迁移，这会导致开销，并且它们可能会远离它们将访问的内存库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:08:04.243

鉴于您的问题的普遍性，一般的答案是可能有两种影响：

*   启动和停止线程（以及同步它们）有很大的开销，并且计算扩展不足以克服开销。每个函数调用的总次数将有助于解决这个问题。
*   线程可以相互竞争并降低总体性能。一种常见的机制是“缓存抖动”。由于多个内核共享相同的内存控制器和部分缓存层次结构，一个线程可以用它需要的信息填充缓存，只是让一些数据被另一个线程的需要驱逐，导致更多的主内存访问。由于主存访问如此昂贵，最终结果是速度变慢。

我会用不同数量的线程来测试这项工作。例如，可能会证明使用两个线程是有利的，但四个或更多则不是。要获得更详细的答案，请在问题中添加更多详细信息，例如计算类型、数据集大小等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T13:00:42.630

你没有描述你的代码做了什么，所以这只是猜测。

多线程不是灵丹妙药。有很多方法可以使单线程代码块的多线程处理比原来的要慢。产生、同步、加入和销毁线程会产生大量开销。

假设手头的任务是添加十对数字。如果您通过为每个添加生成一个线程然后在计算完成时加入和销毁来实现这个多线程，那么您的多线程版本将比原来的慢得多。线程不适用于持续时间很短的计算。生成、加入和销毁的成本将压倒您通过并行执行这些简单任务获得的任何加速。

另一种让事情变慢的方法是建立障碍以防止并行操作。例如，互斥体可防止多个写入者同时访问同一个对象。受保护的代码需要很小。让你的线程的整个主体在互斥锁的幌子下运行，你就相当于一个单线程应用程序，其中添加了一大堆线程开销。

即使您没有设置这些障碍，也可能存在阻止并行执行的障碍。其中一些障碍位于 C 标准库中。POSIX 要求大多数库函数是线程安全的。该标准仅列出了不必是线程安全的函数。如果您在这些计算中使用库函数，则最好保持单线程，因为您的代码本质上是单线程的。

# python - IIS 中的 Python CGI：urandom 函数的问题

> ID：12639930
> 
> 赞同：5
> 
> 时间：2012-09-28T12:21:01.393
> 
> 标签：python, cgi, iis-7.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T19:02:22.223

我`_urandom()`通过将 IIS 7.5 设置更改为`Impersonate User = yes`. 我不是 Windows 管理员，所以我无法详细说明。

之后`import cgi`在 python 脚本中工作得很好。

# jquery - 如何使用 jQuery 将 HTML 文本区域转换为 word:count 键值数组？

> ID：12639937
> 
> 赞同：1
> 
> 时间：2012-09-28T12:21:37.620
> 
> 标签：jquery, arrays, string, text

我有一个带有未过滤用户输入的文本区域，其中包括换行符、空格、标点符号等。我想获取所有不同的小写单词，它们的出现，按出现排序。当 strip() 字符串是可变的时，我还没有找到一种直接的方法来提取单词。任何想法如何实现这一目标？

例如：

> 字 1 字 2 字 1 字 1， ...字 2 您好
> ...。
> . 你好

会成为

```
val array = {
    word1 : 3,
    word2 : 2,
    hello : 2,
       hi : 1
}; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:42:46.197

这是一种可能的解决方案：

```
var result = {},
    value = $("textarea").val(),
    res = value.match(/\b([a-z0-9]+)\b/g) || [];

for (var i = 0; i < res.length; i++) {
    result[res[i]] = (value.match(new RegExp(res[i], "ig")) || []).length;
}

console.log(result);​ 
```

**演示：http:** [//jsfiddle.net/mmFgE/](http://jsfiddle.net/mmFgE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:43:31.207

**快速演示：http:** [//jsfiddle.net/ZaQqb/](http://jsfiddle.net/ZaQqb/)

**注意**：您将需要添加更多特殊字符转换等。

**代码：**

```
var t = $('textarea').val();
console.log('Original: ' + t);

// 1\. prepare your text
t = t.toLowerCase();
while(t.indexOf('.') != -1) t = t.replace('.', ' ');
while(t.indexOf(',') != -1) t = t.replace(',', ' ');
// TODO: add replcement for more spl characters here
while(t.indexOf('  ') != -1) {
    t = t.replace('  ', ' ');
}
console.log('Prepared: ' + t);

// 2\. split by ' '
t = t.split(' ');

// 3\. count
var counts = {};
for(var i in t) {
    counts[t[i]] = (counts[t[i]] == undefined) ? 1 : counts[t[i]]+1;
}

console.log(counts); 
```

# visual-studio-2008 - Using VFP/Neon for a Visual Studio 2008 application

> ID：12639940
> 
> 赞同：0
> 
> 时间：2012-09-28T12:21:57.353
> 
> 标签：visual-studio-2008, neon

I'm trying to specify the benchmarks of an ARM Cortex-A8 running Windows Compact 7\. I want to compare the performance using the VFP, the NEON and none of them.

I've seen the "-mfpu=xxx" option for GCC compilers but, What are the required compilation settings in Visual Studio 2008 to indicate the FPU used by the application?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:05:38.367

Visual Studio 2008 既不支持 VFP 也不支持 NEON。您应该使用程序集来使用 Windows Mobile/Windows Embedded 上的这些说明。

# javascript - Is there any jQuery plugin or Rails gem which gives full browser language?

> ID：12639943
> 
> 赞同：0
> 
> 时间：2012-09-28T12:22:07.567
> 
> 标签：javascript, jquery, ruby-on-rails, gem

I can get browser language using JavaScript

```
<script>
   navigator.language
</script> 
```

but I need to get FULL language name and returnt to user. For example

```
ru - Russian
en - English
etc. 
```

Is there any plugin or Rails gem, that can help me or should I do this on my own ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:45:03.110

您可以使用简单的 JSON 对象轻松创建它。

```
function getFullLanguage(){
  var fullLanguages = {
    "ru": "Russian"
  , "en": "English"
  }
  var lang = navigator.language.substring(0,2);
  return fullLanguages[lang] || "Unknown";
} 
```

这是语言的完整[列表](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)。

# scala - How do I find the min() or max() of two Option[Int]

> ID：12639944
> 
> 赞同：11
> 
> 时间：2012-09-28T12:22:08.500
> 
> 标签：scala, max, option, min

How would you find `minValue` below? I have my own solution but want to see how others would do it.

```
val i1: Option[Int] = ...
val i2: Option[Int] = ...
val defaultValue: Int = ...
val minValue = ? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T12:41:54.653

更新：我刚刚注意到我下面的解决方案和您答案中的解决方案的行为不同 - 我将您的问题读作*当有*两个值时要求两个值中的最小值，但在您的回答中，您实际上是在将`None`其视为包含一个大于 (for `min`) 或小于 (for `max`) 的值。

更具体地说：如果`i1`is`Some(1)`和`i2`is `None`，我的解决方案将返回默认值，而您的解决方案将返回 1。

如果您想要后一种行为，您可以使用默认的半群实例 for`Option[A]`和[热带半群](http://en.wikipedia.org/wiki/Tropical_geometry)for `Int`。例如，在 Scalaz 7 中，您可以编写：

```
import scalaz._, Scalaz._

optionMonoid(Semigroup.minSemigroup[Int]).append(i1, i2) getOrElse defaultValue 
```

或以下简写：

```
Tags.Min(i1) |+| Tags.Min(i2) getOrElse defaultValue 
```

它不像下面的应用函子解决方案那么干净，但如果这是你的问题，那就是你的问题。

* * *

这是一种不涉及创建额外列表的更惯用的方式：

```
(for { x <- i1; y <- i2 } yield math.min(x, y)) getOrElse defaultValue 
```

或者，等效地：

```
i1.flatMap(x => i2.map(math.min(x, _))) getOrElse defaultValue 
```

您正在做的是将两位函数 ( `min`) “提升”为应用函子 ( `Option`)。[Scalaz](http://code.google.com/p/scalaz/)使用其适用的构建器语法使这变得简单：

```
import scalaz._, Scalaz._

(i1 |@| i2)(math.min) getOrElse defaultValue 
```

在这种情况下，标准库解决方案并没有那么优雅，但这是一个有用的抽象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-29T18:12:12.907

我使用以下方法解决了类似的问题。当两个选项都有值时，我们处理一种特殊情况，否则我们使用 API 方法`Option.orElse`。

```
val a: Option[Int]  = Some(10)
val b: Option[Int] = Some(20)
val c: Option[Int] = (a, b) match {
  case (Some(x), Some(y)) => Some(x min y)
  case (x, y) => x orElse y
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T05:23:20.030

我想这就是你所追求的：

```
val minValue = List(i1, i2).flatten match {
  case Nil => defaultValue
  case xs => xs.min
} 
```

我会避免`sorted`，因为排序需要比简单地找到最大值或最小值更多的处理（尽管在这种情况下它可能没有太大区别）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-28T12:22:08.500

```
val minValue: Int = List(i1, i2).flatten.sorted.headOption getOrElse defaultValue 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-08T20:21:18.793

您可以在 for 表达式中使用模式，与模式不匹配的值将被丢弃。

```
(for (Some(x) <- List(None, Some(3))) yield x) max 
```

虽然不如 List.flatten 方法好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-28T16:22:46.700

如果您想避免使用 scalaz 和 map/for/getOrElse，您可以执行以下操作：

```
val minValue = (i1, i2) match {
  case (Some(x), Some(y)) => math.min(x, y)
  case _ => defaultValue
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-23T23:04:41.893

我们可以将 2 `Option`s 组合为`Iterable`with运算符，这允许我们使用（很好地处理由 case 形成的空迭代的情况）并在必要时回退到默认值：`Option`[`++`](https://www.scala-lang.org/api/current/scala/Option.html#++[B%3E:A,That](that:scala.collection.GenTraversableOnce[B])(implicitbf:scala.collection.generic.CanBuildFrom[Repr,B,That]):That)[`minOption`](https://www.scala-lang.org/api/2.13.x/scala/collection/Iterable.html#minOption:Option[A])`None/None``getOrElse`

```
(optionA ++ optionB).minOption.getOrElse(-1)
// None and None       => -1
// Some(5) and None    => 5
// None and Some(5)    => 5
// Some(5) and Some(3) => 3 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-09T06:48:24.513

另一个没有提到的选项是使用`reduceLeftOption`（交换`math.max`和`math.min`根据需要）：

```
val min = (first ++ second).reduceLeftOption(math.min).getOrElse(defaultValue) 
```

* * *

```
scala> val first = Some(10)
first: Some[Int] = Some(10)

scala> val second: Option[Int] = None
second: Option[Int] = None

scala> val defaultMin = -1
defaultMin: Int = -1

scala> (first ++ second).reduceLeftOption(math.min).getOrElse(defaultMin)
res7: Int = 10

scala> val first: Option[Int] = None
first: Option[Int] = None

scala> (first ++ second).reduceLeftOption(math.min).getOrElse(defaultMin)
res8: Int = -1

scala> val first = Some(10)
first: Some[Int] = Some(10)

scala> val second = Some(42)
second: Some[Int] = Some(42)

scala> (first ++ second).reduceLeftOption(math.min).getOrElse(defaultMin)
res9: Int = 10 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-08T14:40:17.903

## tl;博士

**您可以使用自定义猫** `Semigroup`实例来完成您需要优雅的操作：

```
import cats.kernel.Semigroup
import cats.instances.option._ // this import is for cats std option combiner
import cats.syntax.semigroup._

object Implicits {
 implicit val intMinSemigroup: Semigroup[Int] =
   (x: Int, y: Int) => math.min(x, y)

 implicit val intMaxSemigroup: Semigroup[Int] =
   (x: Int, y: Int) => math.max(x, y)
}

import Implicits.intMinSemigroup
// these are results for minSemigroup
// List((Some(1),Some(1),Some(2)), (Some(1),Some(1),None), (None,Some(2),Some(2)), (None,None,None))
//import Implicits.intMaxSemigroup
// these are results for maxSemigroup
// List((Some(1),Some(2),Some(2)), (Some(1),Some(1),None), (None,Some(2),Some(2)), (None,None,None))

for {
 maybeA <- Seq(Some(1), None)
 maybeB <- Seq(Some(2), None)
} yield (maybeA, maybeA |+| maybeB, maybeB) 
```

如果要替换`None`为默认值，可以使用 combine 两次：

```
val defaultValue: Int = 3
val optionMin = for {
  maybeA <- Seq(Some(1), None)
  maybeB <- Seq(Some(2), None)
} yield (maybeA |+| maybeB) |+| Some(defaultValue)
// List(Some(1), Some(1), Some(2), Some(3)) 
```

## 这个怎么运作

简而言之，`Semigroup[A]`是*typeclass*用于**将**相同类型的两个值组合`A`成 type 的一个值`A`。这里我们使用标准猫`OptionMonoid`（它扩展`Semigroup[Option[A]]`）这里的源代码：

```
class OptionMonoid[A](implicit A: Semigroup[A]) extends Monoid[Option[A]] {
  def empty: Option[A] = None
  def combine(x: Option[A], y: Option[A]): Option[A] =
    x match {
      case None => y
      case Some(a) =>
        y match {
          case None    => x
          case Some(b) => Some(A.combine(a, b))
        }
    }
} 
```

我们看到它需要他自己进行选项匹配，我们应该给他工作的一切都是`implicit A: Semigroup[A]`. 在我们的案例中，我们为`min`,`max`案例编写了两个不同的组合器：

```
object Implicits {
 implicit val intMinSemigroup: Semigroup[Int] =
   (x: Int, y: Int) => math.min(x, y)

 implicit val intMaxSemigroup: Semigroup[Int] =
   (x: Int, y: Int) => math.max(x, y)
} 
```

因此，我们导入组合器（即`import Implicits.intMinSemigroup`）并仅`cats.syntax.semigroup`用于使用**组合**函数作为运算符`|+|`：

`maybeA |+| maybeB`.

总之，您可以为*任何类型*（不仅）定义自定义**半**组，并在导入一些**猫***语法*和*实例后***组合**此类型的选项。*`Int`*

# c# - dynamic sql generation is not supported against multiple base tables

> ID：12639946
> 
> 赞同：2
> 
> 时间：2012-09-28T12:22:10.613
> 
> 标签：c#, sql-server, ado.net

I tried to add a new row to a Table in an SQL DB, but I had a problem :

> dynamic sql generation is not supported against multiple base tables

this is the code I tried :

```
private MyClass myClass = new MyClass();
private SqlDataAdapter adapter;
private SqlDataAdapter adapter2;

private void GestionCollections_Load(object sender, EventArgs e)
{
     adapter = new SqlDataAdapter("select Id_Collection ID, Libelle_Collection Collection,Libelle_Editeur Editeur from Collection_ left join Editeur on Id_Editeur = Collection_.Id_Editeur_Editeur", myClass.cnx);
     adapter.Fill(myClass.ds, "Collection_");

     adapter2 = new SqlDataAdapter("Select Id_Editeur ID,Libelle_Editeur Editeur from Editeur", myClass.cnx);
     adapter2.Fill(myClass.ds, "Editeur");
}

private void AjouterBarButton_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
{
    String newKeyWordCollectionName = ajoutCollection.KeyWordCollectionName;
    String newKeyWordAEditeurName = ajoutCollection.KeyWordEditeurName;        
    DataRow row = myClass.ds.Tables["Collection_"].NewRow();
    row[1] = newKeyWordCollectionName;

    foreach(var myRow in myClass.ds.Tables["Editeur"].AsEnumerable())
    {
         if (newKeyWordAEditeurName == myRow[1] as String)
              row[2] = (int)myRow[0];
    }
     myClass.ds.Tables["Collection_"].Rows.Add(row);
     SqlCommandBuilder builder = new SqlCommandBuilder(adapter);
     adapter.Update(myClass.ds, "Collection_");

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-15T08:03:03.493

更改您的选择查询并添加不同的内部联接。

例如有两个查询，您可以从中了解我想告诉您的内容

错误查询

```
select iop.pob_id, iop.pob_product_id, iop.pob_qty, iop.pob_unit_id
    , iop.pob_rate, iop.pob_value, iop.pob_fiscalyear_id
    , **p.product_desc** as orderBy from inv_product_open_balc iop
left join inv_product p on iop.pob_product_id = p.product_id
where p.product_desc like 'Air Freshner%' and iop.pob_fiscalyear_id = 3 
```

正确查询

```
select distinct iop.pob_id, iop.pob_product_id, iop.pob_qty
    , iop.pob_unit_id, iop.pob_rate, iop.pob_value, iop.pob_fiscalyear_id
    , **(select Product_desc from** inv_product p where p.product_id = iop.pob_product_id )as orderBy
from inv_product_open_balc iop
inner join inv_product p on iop.pob_product_id = p.product_id
where p.product_desc like 'Air Freshner%' and iop.pob_fiscalyear_id = 3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T13:52:16.940

你不能在[`SqlCommandBuilder`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)这里使用：

> 自动生成单表命令，用于协调对 DataSet 所做的更改与...

这里的关键词是“单表”。它无法从`SELECT`语句中逆向工程应该如何应用特定更新（例如，如果您`NULL`从左连接右侧的所有列，它应该删除该行，还是将每列设置为空。

您需要在 SqlDataAdapter 上编写适当的插入、更新和删除命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:31:04.947

有了`SqlCommandBuilder` 你可以生成`CRUD operation on entity`

使用要求是`Select command before inserting`在选择命令中定义并包含您的`primary Key`.

链接： http: [//msdn.microsoft.com/fr-fr/library/system.data.sqlclient.sqlcommandbuilder (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.data.sqlclient.sqlcommandbuilder(v=vs.80).aspx)

MSDN 定义：自动生成 Transact-SQL 语句进行更新`single table`

注意：在您的更新 selectCommand 中，您定义了左连接查询，因此您可以创建左连接查询，将此查询替换为仅选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-02T11:22:59.493

使用内部联接在您的选择语句中添加 DISTINCT。

这将解决问题。

比如选择不同的员工.Ecode，......

# sql - SQL NVARCHAR and VARCHAR Limits

> ID：12639948
> 
> 赞同：103
> 
> 时间：2012-09-28T12:22:11.823
> 
> 标签：sql, sql-server, sql-server-2008, variables, string-concatenation

All, I have a large (unavoidable) dynamic SQL query. Due to the number of fields in the selection criteria the string containing the dynamic SQL is growing over 4000 chars. Now, I understand that there is a 4000 max set for `NVARCHAR(MAX)`, but looking at the executed SQL in Server Profiler for the statement

```
DELARE @SQL NVARCHAR(MAX);
SET @SQL = 'SomeMassiveString > 4000 chars...';
EXEC(@SQL);
GO 
```

Seems to work(!?), for another query that is also large it throws an error which is associated with this 4000 limit(!?), it basically trims all of the SQL after this 4000 limit and leaves me with a syntax error. Despite this in the profiler, it is showing this dynamic SQL query in **full**(!?).

What exactly is happening here and should I just be converting this @SQL variable to VARCHAR and get on with it?

Thanks for your time.

Ps. It would also be nice to be able to print out more than 4000 chars to look at these big queries. The following are limited to 4000

```
SELECT CONVERT(XML, @SQL);
PRINT(@SQL); 
```

is there any other cool way?

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2012-09-28T12:23:26.190

> 我知道最大设置为 4000`NVARCHAR(MAX)`

你的理解是错误的。`nvarchar(max)`最多可存储（有时甚至超过）2GB 数据（10 亿双字节字符）。

从在线书籍中的[nchar 和 nvarchar](http://msdn.microsoft.com/en-us/library/ms186939.aspx)语法是

```
nvarchar [ ( n | max ) ] 
```

该`|`字符表示这些是替代品。即您指定*其中一个* `n`或文字`max`。

如果您选择指定特定`n`值，则该值必须介于 1 到 4,000 之间，但使用`max`将其定义为大对象数据类型（[`ntext`](http://msdn.microsoft.com/en-us/library/ms187993.aspx)不推荐使用替换）。

事实上，在 SQL Server 2008 中，对于一个*变量*来说，2GB 的限制似乎可以无限期地超出，前提是有足够的空间`tempdb`（[如图所示](https://stackoverflow.com/q/7611394/73226)）

关于你问题的其他部分

## 连接时的截断取决于数据类型。

1.  `varchar(n) + varchar(n)`将截断 8,000 个字符。
2.  `nvarchar(n) + nvarchar(n)`将截断 4,000 个字符。
3.  `varchar(n) + nvarchar(n)`将截断 4,000 个字符。`nvarchar`具有更高的优先级，因此结果是`nvarchar(4,000)`
4.  `[n]varchar(max)`+`[n]varchar(max)`不会截断（对于 < 2GB）。
5.  `varchar(max)`+`varchar(n)`不会截断（对于 < 2GB），结果将输入为`varchar(max)`.
6.  `varchar(max)`+`nvarchar(n)`不会截断（对于 < 2GB），结果将输入为`nvarchar(max)`.
7.  `nvarchar(max)`+`varchar(n)`将首先将`varchar(n)`输入转换为`nvarchar(n)`然后进行连接。**如果 `varchar(n)`字符串的长度大于 4,000 个字符，则强制转换为 to`nvarchar(4000)`并发生截断**。

## 字符串文字的数据类型

如果您使用`N`前缀并且字符串的长度 <= 4,000 个字符，则将键入字符串的长度在`nvarchar(n)`哪里。`n`所以`N'Foo'`将作为`nvarchar(3)`例子来对待。如果字符串长度超过 4,000 个字符，它将被视为`nvarchar(max)`

如果您不使用`N`前缀并且字符串长度为 <= 8,000 个字符，则将键入字符串的长度在`varchar(n)`哪里。`n`如果更长`varchar(max)`

对于上述两种情况，如果字符串的长度为零，则`n`设置为 1。

## 较新的语法元素。

**1.**函数在`CONCAT`这里没有帮助

```
DECLARE @A5000 VARCHAR(5000) = REPLICATE('A',5000);

SELECT DATALENGTH(@A5000 + @A5000), 
       DATALENGTH(CONCAT(@A5000,@A5000)); 
```

以上两种连接方法都返回 8000。

**2.**小​​心`+=`

```
DECLARE @A VARCHAR(MAX) = '';

SET @A+= REPLICATE('A',5000) + REPLICATE('A',5000)

DECLARE @B VARCHAR(MAX) = '';

SET @B = @B + REPLICATE('A',5000) + REPLICATE('A',5000)

SELECT DATALENGTH(@A), 
       DATALENGTH(@B);` 
```

退货

```
-------------------- --------------------
8000                 10000 
```

注意`@A`遇到截断。

## 如何解决您遇到的问题。

您正在截断，因为您将两个非`max`数据类型连接在一起，或者因为您将一个`varchar(4001 - 8000)`字符串连接到一个`nvarchar`类型化的字符串（甚至`nvarchar(max)`）。

为了避免第二个问题，只需确保所有字符串文字（或至少那些长度在 4001 - 8000 范围内的字符串）都以`N`.

为了避免第一个问题，将分配从

```
DECLARE @SQL NVARCHAR(MAX);
SET @SQL = 'Foo' + 'Bar' + ...; 
```

至

```
DECLARE @SQL NVARCHAR(MAX) = ''; 
SET @SQL = @SQL + N'Foo' + N'Bar' 
```

这样 an`NVARCHAR(MAX)`从一开始就参与连接（因为每个连接的结果也将是`NVARCHAR(MAX)`this 将传播）

## 查看时避免截断

确保您选择了“结果到网格”模式，然后您可以使用

```
select @SQL as [processing-instruction(x)] FOR XML PATH 
```

SSMS 选项允许您为`XML`结果设置无限长度。该`processing-instruction`位避免了字符问题，例如`<`显示为`&lt;`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-28T12:41:51.463

好的，所以如果**稍后**问题是您有一个大于允许大小的查询（如果它不断增长，可能会发生这种情况），您将不得不将它分成块并执行字符串值。因此，假设您有一个如下所示的存储过程：

```
CREATE PROCEDURE ExecuteMyHugeQuery
    @SQL VARCHAR(MAX) -- 2GB size limit as stated by Martin Smith
AS
BEGIN
    -- Now, if the length is greater than some arbitrary value
    -- Let's say 2000 for this example
    -- Let's chunk it
    -- Let's also assume we won't allow anything larger than 8000 total
    DECLARE @len INT
    SELECT @len = LEN(@SQL)

    IF (@len > 8000)
    BEGIN
        RAISERROR ('The query cannot be larger than 8000 characters total.',
                   16,
                   1);
    END

    -- Let's declare our possible chunks
    DECLARE @Chunk1 VARCHAR(2000),
            @Chunk2 VARCHAR(2000),
            @Chunk3 VARCHAR(2000),
            @Chunk4 VARCHAR(2000)

    SELECT @Chunk1 = '',
           @Chunk2 = '',
           @Chunk3 = '',
           @Chunk4 = ''

    IF (@len > 2000)
    BEGIN
        -- Let's set the right chunks
        -- We already know we need two chunks so let's set the first
        SELECT @Chunk1 = SUBSTRING(@SQL, 1, 2000)

        -- Let's see if we need three chunks
        IF (@len > 4000)
        BEGIN
            SELECT @Chunk2 = SUBSTRING(@SQL, 2001, 2000)

            -- Let's see if we need four chunks
            IF (@len > 6000)
            BEGIN
                SELECT @Chunk3 = SUBSTRING(@SQL, 4001, 2000)
                SELECT @Chunk4 = SUBSTRING(@SQL, 6001, (@len - 6001))
            END
              ELSE
            BEGIN
                SELECT @Chunk3 = SUBSTRING(@SQL, 4001, (@len - 4001))
            END
        END
          ELSE
        BEGIN
            SELECT @Chunk2 = SUBSTRING(@SQL, 2001, (@len - 2001))
        END
    END

    -- Alright, now that we've broken it down, let's execute it
    EXEC (@Chunk1 + @Chunk2 + @Chunk3 + @Chunk4)
END 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-18T07:32:35.773

您也必须使用 nvarchar 文本。这意味着你必须在你的大弦之前简单地有一个“N”，就是这样！不再有限制

```
DELARE @SQL NVARCHAR(MAX);
SET @SQL = N'SomeMassiveString > 4000 chars...';
EXEC(@SQL);
GO 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-09T13:51:59.623

接受的答案对我有帮助，但我在连接涉及案例陈述的 varchars 时被绊倒了。我知道 OP 的问题不涉及 case 语句，但我认为这对于像我这样在努力构建涉及 case 语句的长动态 SQL 语句时最终来到这里的其他人来说会有所帮助。

当使用带有字符串连接的 case 语句时，接受的答案中提到的规则独立地适用于 case 语句的每个部分。

```
declare @l_sql varchar(max) = ''

set @l_sql = @l_sql +
case when 1=1 then
    --without this correction the result is truncated
    --CONVERT(VARCHAR(MAX), '')
 +REPLICATE('1', 8000)
 +REPLICATE('1', 8000)
end

print len(@l_sql) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-23T08:18:27.670

```
declare @p varbinary(max)
set @p = 0x
declare @local table (col text)

SELECT   @p = @p + 0x3B + CONVERT(varbinary(100), Email)
 FROM tbCarsList
 where email <> ''
 group by email
 order by email

 set @p = substring(@p, 2, 100000)

 insert @local values(cast(@p as varchar(max)))
 select DATALENGTH(col) as collen, col from @local

result collen > 8000, length col value is more than 8000 chars 
```

# c++ - Winrt C++ - 在头文件中包含名称空间使用？

> ID：12639959
> 
> 赞同：2
> 
> 时间：2012-09-28T12:22:39.753
> 
> 标签：c++, windows-8, windows-runtime, c++-cx

> **可能重复：**
> [C++ 头文件中的“使用命名空间”](https://stackoverflow.com/questions/5849457/using-namespace-in-c-headers)

我是 WPF 领域的 ac# 开发人员，但我决定在 C++ 中完成我所有的 Winrt 开发。

我感到困惑的一件事是`using`在头文件中使用（或不使用）语句（而不是输入完全限定的类型名称）。

`using`在头文件中包含语句要容易得多。许多 Microsoft Winrt 示例`using`在标头中包含语句，使代码清晰易读。但是，我一直在浏览 John Petzolds 新书预览中的 c++ 示例，他要求标题中不要包含所有`using`语句。

我不明白赞成和反对的观点，当我用谷歌搜索时，我得到了很多反对意见。

谁能给我一个明确的解释这个问题，因为它与 Winrt 世界有关（我对其他环境中的 c++ 不感兴趣）

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T12:31:35.203

在 C++ 中，出于多种原因，非常习惯于`using`在头文件中避免命名空间。

与 C# 不同，C++ 没有一个整洁的模块系统。您在标题中所做的任何事情都会影响包含它的每个文件。因此，如果一个标头具有`using namespace`, if 不仅会污染头文件本身，还会污染包含它的所有文件。这可能会导致令人惊讶的名称冲突。

所以在 C++ 中，最常见的约定是：*永远不要放入`using namespace`标题。在源文件中，您可以根据需要执行此操作，但即使在源文件中也有很多人避免使用它*。

另一个原因是这实际上可以提高可读性：

如果我指的是 a `vector<int>`，那并不是很清楚那*是*什么。它可以是在我包含的任何标头中的任何位置定义的任何矢量类。

但如果我写`std::vector<int>`，那么我知道*这是标准库头*。它告诉我类型来自哪里。我认为这使代码更清晰，更易于阅读。

当然，如果您经常引用某些类型，或者某些命名空间有长而冗长的名称，您可以使用一些技巧来使其更易于管理。

长命名空间名称可以有别名：

```
namespace foo = VeryLongNamespaceName; 
// now I can do foo::bar instead of VeryLongNamespaceName::bar 
```

或者可以从命名空间导入单个名称：

```
using std::cout; 
// now I can refer to `cout` without the std prefix 
```

当然，C++ 开发人员倾向于使用平面命名空间层次结构和短命名空间名称并非巧合。

几乎所有的 C++ 标准库都在`std`命名空间中，这比 .NET 等价物更容易键入。（`std::vector<T>`对`System.Collections.Generic.List<T>`）。简短的名称和扁平的层次结构意味着您实际上可以在没有`using namespace`陈述的情况下生活。

> 谁能给我一个明确的解释这个问题，因为它与 Winrt 世界有关（我对其他环境中的 c++ 不感兴趣）

在这种情况下，没有“WinRT 世界”之类的东西。如果您在 WinRT 应用程序中编写 C++ 代码，那么您应该遵循 C++ 惯例和最佳实践。如果您在 WinRT 应用程序中编写 C# 代码，那么您应该遵循 C# 最佳实践，依此类推。

WinRT 指南在任何地方都没有声明“请忽略您通常使用您使用的语言所做的一切”。WinRT 是一种 API，而不是一种语言。

As for why Microsoft's samples do otherwise: they're samples. Their goal is to illustrate specific concepts and give you a starting point, and not to teach you to write good code in general. It is assumed that you can take the concepts they illustrate, and fit it into your own code without copying the various shortcuts taken in the samples. Many samples also omit error handling code for the same reason. It's irrelevant for the purposes of the sample, but certainly not irrelevant in a real application.

# tfs - TFS 构建，它将项目文件复制到测试服务器

> ID：12639963
> 
> 赞同：0
> 
> 时间：2012-09-28T12:22:56.137
> 
> 标签：tfs, continuous-integration, tfsbuild

我想创建 TFS 构建，成功构建后会将源文件复制到我的服务器。我的项目是基于 ASP.NET 站点的，所以它不是 Web 应用程序，我只想将文件复制到我的远程服务器。

我使用的是 tfspreview 版本，所以我没有完全访问服务器的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:08:49.280

我不确定 tfspreview 的限制，但通常我会更改构建中使用的模板并添加 CopyDirectory 活动以将保存构建解决方案的目录移动到网络上的另一个位置。

XAML 存储在源代码控制中，您可以通过复制您正在引用的现有 XAML 然后使用 Visual Studio 中的工作流编辑器添加活动并对其进行配置来创建一个新 XAML。

# c# - 如何为库 (dll) 添加 Intellisense 工具提示支持

> ID：12639967
> 
> 赞同：15
> 
> 时间：2012-09-28T12:23:15.163
> 
> 标签：c#, intellisense

如何提供我在我的类（在库中）中为智能感知创建的 XML 注释？

我在每个方法中添加了 XML 注释，例如：

```
 /// <summary>
    /// Do some connection request...
    /// </summary>
    /// <param name="val">Required for xyz...</param>
    public void Connect(int val)
    {
        // Some code...
    } 
```

然后，我标记了创建“XML 文档文件”的复选框，并将其命名为“MyAssembly.xml”。重建我的解决方案（创建一个 dll 和一个 XML 文件）。将 dll 添加到另一个 c# 项目，但那里的智能感知没有显示我的 XML 注释......我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T16:14:25.457

我能够复制您的错误的唯一方法是为 XML 文件指定一个与实际生成的程序集不同的名称。

您能否确认您的程序集名称和 XML 名称之间的唯一区别是文件扩展名？最简单的方法是在创建 EXE 或 DLL 的输出文件夹中。

这是用 C# 和 VS2010 测试的。我希望它有所帮助。

# php - 从客户端在专用服务器上执行 exe

> ID：12639979
> 
> 赞同：-3
> 
> 时间：2012-09-28T12:23:49.130
> 
> 标签：php, asp.net, ftp

> **可能重复：**
> [在服务器上启动 exe](https://stackoverflow.com/questions/12636890/starting-an-exe-on-the-server)

我想在服务器和任何 asp.net 网页或 php 页面上 ftp 一个 exe，最终将在被调用时运行该 exe。该exe将在服务器上安装一个应用程序并开始运行并占用服务器上的一个端口来监听一些客户端。

是否可以不更改服务器配置？如果可能，它是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:26:55.603

您可以使用该`exec()`函数在服务器上运行`.exe`文件：

```
<?php

    exec("file.exe");

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:26:30.837

[http://uk.php.net/manual/en/function.exec.php](http://uk.php.net/manual/en/function.exec.php)

如果您想在没有任何安全层的情况下公开此 URL，那么它显然不安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:27:45.860

A. 我想在服务器上 ftp 一个 exe

是的，您可以使用`exec`或`system`

B. 有保障？？取决于你从哪里得到你的论点 .. 但使用`escapeshellarg` or`escapeshellcmd`将有助于降低风险

# xcode - UIActivityViewController 根据选定的活动自定义文本

> ID：12639982
> 
> 赞同：34
> 
> 时间：2012-09-28T12:24:11.107
> 
> 标签：xcode, ios6, sharing

我想为相同的信息自定义文本，但是当我在 Facebook 上分享它时，我不想使用 twitter 哈希标签或@username 方案......

如何根据将使用的共享服务使文本多样化以进行共享？

当然我正在使用 UIActivityViewController：

```
UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:@[shareText, shareURL] applicationActivities:nil]; 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-12T16:59:07.297

我接受了这个答案并为它做了一个简单的类。默认消息将通过 Twitter 以外的共享渠道看到，并且对于 hashWords 数组中的 Twitter 单词，如果它们出现在默认消息中，则它们将与散列一起出现。我想我会把它分享给任何需要它的人。谢谢克里斯托弗！

用法：

```
TwitterHashActivityItemProvider *twit = [[TwitterHashActivityItemProvider alloc] initWithDefaultText:@"I really like stackoverflow and code"
                                                                                           hashWords:@[@"stackoverflow", @"code"]];
NSArray *items = @[twit];
UIActivityViewController *act = [[UIActivityViewController alloc] initWithActivityItems:items applicationActivities:nil]; 
```

标题：

```
@interface TwitterHashActivityItemProvider : UIActivityItemProvider

- (id)initWithDefaultText:(NSString*)text hashWords:(NSArray*)hashItems;

@property (nonatomic,strong) NSArray *hashItems;

@end 
```

执行：

```
#import "TwitterHashActivityItemProvider.h"

@implementation TwitterHashActivityItemProvider

- (id)initWithDefaultText:(NSString*)text hashWords:(NSArray*)hashItems;
{
    self = [super initWithPlaceholderItem:text];
    if ( self )
    {
        self.hashItems = hashItems;
    }
    return self;
}

- (id)item
{
    if ( [self.placeholderItem isKindOfClass:[NSString class]] )
    {
        NSString *outputString = [self.placeholderItem copy];

        // twitter gets some hash tags!
        if ( self.activityType == UIActivityTypePostToTwitter )
        {
            // go through each potential hash item and augment the main string
            for ( NSString *hashItem in self.hashItems)
            {
                NSString *hashed = [@"#" stringByAppendingString:hashItem];
                outputString = [outputString stringByReplacingOccurrencesOfString:hashItem withString:hashed];
            }
        }

        return outputString;
    }

    // else we didn't actually provide a string...oops...just return the placeholder
    return self.placeholderItem;
}

@end 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-30T02:42:51.937

不要将文本字符串传递给`initWithActivityItems`调用，而是传递您自己的类的子[`UIActivityItemProvider`](https://developer.apple.com/reference/uikit/uiactivityitemprovider)类，当您实现该`itemForActivityType`方法时，它将作为“activityType”参数提供共享服务。

然后，您可以从此方法返回自定义内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-12T11:31:25.290

UIActivityItemProvider 子类的 Swift 实现示例。复制选项将仅使用密码，其他活动类型将使用完整的共享文本。应该很容易针对不同的用例进行定制。感谢 Cristopher & NickNack 的回答。

```
class PasswordShareItemsProvider: UIActivityItemProvider {

    private let password: String

    private var shareText: String {
        return "This is my password: " + password
    }

    init(password: String) {
        self.password = password
        // the type of the placeholder item is used to
        // display correct activity types by UIActivityControler
        super.init(placeholderItem: password)
    }

    override var item: Any {
        get {
            guard let activityType = activityType else {
                return shareText
            }

            // return desired item depending on activityType

            switch activityType {
            case .copyToPasteboard: return password
            default: return shareText
            }
        }
    }
} 
```

用法：

```
let itemProvider = PasswordShareItemsProvider(password: password)
let activityViewController = UIActivityViewController(activityItems: [itemProvider], applicationActivities: nil) 
```

# c - 两个共享库实现相同的 API

> ID：12639985
> 
> 赞同：0
> 
> 时间：2012-09-28T12:24:35.357
> 
> 标签：c, linux, shared-libraries, shared

我有两个共享库。A lib 使用`dlopen`.

它们实现了相同的 API 集。

我的客户端在同一系统上运行，当它尝试访问它要加载的库的 API 时？

或者这是一件无效的事情？我必须使 B 成为静态库。

我的目标是让客户端只能访问 lib A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:14:01.133

您是否可以控制客户端（即，您可以重新编译它）？如果是这样，您可以在链接时指定库 A；那么这将是 A 对`dlopen`B的关心。

如果您试图劫持`foo`B 中的函数调用，那么您的客户端正在尝试加载库 B。您可以使用`LD_PRELOAD`它来强制它加载库 A。然后客户端将发出一个调用`foo()`，A 将应答它，A 将能够`foo()@B`在修改、更改和/或记录输入值和返回值之后将调用路由到。

你打电话给你的客户，`LD_PRELOAD=B.so ./client`而不是`./client`。

# java - 方法实现的切入点

> ID：12639986
> 
> 赞同：0
> 
> 时间：2012-09-28T12:24:38.003
> 
> 标签：java, spring, aspectj, spring-aop

我创建了一个带有注释方法的切入点的 Aspect。我得到的`JoinPoint`是来自接口的方法声明而不是方法实现。因此，当我想获取带注释的方法参数时，我必须在接口中添加注释而不是在实现中。

```
@AfterReturning(value = "@annotation(pl.styall.scylla.security.authorization.acl.AclSecure) && @annotation(aclSecure)", argNames = "jp,aclSecure,retVal", returning = "retVal")
public void addObjectAndEntry(JoinPoint jp, AclSecure aclSecure,
        Object retVal) {
    System.out.println(jp.toLongString());
    MethodSignature signature = (MethodSignature) jp.getSignature();
    Method method = signature.getMethod();
    Annotation[][] methodAnnotations = method.getParameterAnnotations(); 
```

`methodAnnotations`如果在方法实现中添加它们，则没有注释。什么是正确的切入点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:52:39.683

```
final String methodName = pjp.getSignature().getName();
final MethodSignature methodSignature = (MethodSignature)pjp.getSignature();
Method method = methodSignature.getMethod();
if (method.getDeclaringClass().isInterface()) {
    method = pjp.getTarget().getClass().getDeclaredMethod(methodName, method.getParameterTypes());    
} 
```

来源：[Spring AOP：如何获取建议方法的注解](https://stackoverflow.com/questions/2559255/spring-aop-how-to-get-the-annotations-of-the-adviced-method)

# ios - IOS：通过 MFMailComposeController 发送消息后如何获取消息正文、主题和收件人

> ID：12639990
> 
> 赞同：0
> 
> 时间：2012-09-28T12:24:53.827
> 
> 标签：ios, mfmailcomposeviewcontroller, messageui

我通过以下方法发送电子邮件：

```
-(void) sendEmailOpenControllerWithSubject:(NSString *)subject messsageBody:(NSString *) message
{
    MFMailComposeViewController* controller = [[MFMailComposeViewController alloc] init];
    controller.mailComposeDelegate = self;
    [controller setSubject:subject];
    [controller setMessageBody:message isHTML:NO];
    [controller setToRecipients:[[NSArray alloc] initWithObjects:currentProspect.email, nil]];
    if (controller) [self presentModalViewController:controller animated:YES];
} 
```

我正在设置邮件正文主题和收件人，但用户可能会在 MailComposer 中更改这些属性。

**我需要的：**

所以我想在发送电子邮件后获取消息正文、主题和收件人等内容。因为用户可能通过邮件编辑器更改了这些内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:56:12.280

从 iOS 5 开始，您可以注册以收到有关短信发送可用性更改的通知。

```
A userInfo dictionary key for the MFMessageComposeViewControllerTextMessageAvailabilityDidChangeNotification

NSString *const MFMessageComposeViewControllerTextMessageAvailabilityKey; 
```

[在此处](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCAQFjAA&url=http%3A%2F%2Fdeveloper.apple.com%2Flibrary%2Fios%2FDocumentation%2FMessageUI%2FReference%2FMessageUI_Framework_Reference%2FMessageUI_Framework_Reference.pdf&ei=W51lUPSvM8WqrAfhwoHQCQ&usg=AFQjCNFf675WGr7DDeMV-oLNk7nz9fZxAg)参考有关消息 UI 框架的更多信息

# visual-studio-2010 - 如何在 VC++ 的 DataGridview 单元格中只允许数值

> ID：12639991
> 
> 赞同：1
> 
> 时间：2012-09-28T12:24:55.543
> 
> 标签：visual-studio-2010, visual-c++, datagridview

我有一个 Winform 的 DataGridView。而且我只想在特定列中允许数值。我也在互联网上搜索过，但没有得到有关它的相关信息。

谁能告诉我如何只为 dataGridview 列提供数字功能。

谢谢

# javascript - 使用 Jquery Mobile 多页模板使用 Javascript 将页面重定向到 div

> ID：12639999
> 
> 赞同：1
> 
> 时间：2012-09-28T12:25:34.490
> 
> 标签：javascript, android, cordova, jquery-mobile

我有一个 android 应用程序，我想添加一个功能来检查用户是否连接到互联网。如果不是，我会显示一个警报，然后想将它们重定向到“页面”之外。然而，问题是我使用的是 Jquery Mobile Multi-Page 模板。所以从技术上讲，我不是重定向到一个页面，它是一个 div。我的代码如下：

```
networkState = navigator.network.connection.type; 
```

if (networkState == Connection.NONE) { alert('未检测到互联网连接'); window.location.href = "#seconddiv" };

但是，这不起作用，如果我将其设置为 index.html，它会立即回到应用程序的开头，这是不可接受的。有谁知道如何让它重定向到一个div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T14:07:53.257

试试这个`$.mobile.changePage`功能：http: [//jquerymobile.com/test/docs/api/methods.html](http://jquerymobile.com/test/docs/api/methods.html)

```
$.mobile.changePage($("#seconddiv")); 
```