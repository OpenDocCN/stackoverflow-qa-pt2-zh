# StackOverflow 问答 13381000-13381999

# iphone - 将活动指示器连接到原型单元？

> ID：13381002
> 
> 赞同：0
> 
> 时间：2012-11-14T14:42:49.950
> 
> 标签：iphone, ios, cocoa-touch, cocoa, tableview

嘿伙计们，我想将一个活动指示器连接到我的原型单元，但后来我收到一条错误消息，上面写着“连接活动指示器不能将原型对象作为目标”。是否可以将活动指示器添加到原型单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:48:04.667

我在 tableviewController 中有一个连接到我的活动指示器的插座。断开插座后，不会出现错误消息。

# ruby-on-rails - rake db:reset 由于 postgresql_adapter.rb 而失败

> ID：13381003
> 
> 赞同：0
> 
> 时间：2012-11-14T14:42:50.670
> 
> 标签：ruby-on-rails, postgresql, rake

我正在使用 postgresql 在 debian 服务器上部署我的第一个 railsapp。

Rails 3.2.9 Ruby 1.9.3-p327 pg 0.14.1

部署后，当我做一个

`bundle exec rake db:reset`

它失败并出现以下错误：

```
/var/www/opf/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:1208: [BUG] Segmentation fault 
```

以及一长串错误消息。

虽然我的 database.yml 在我的开发工作中正常工作：

我找不到 postgresql_adapter 导致错误的原因。

- - 更新

如果我输入错误的数据库名、用户名和密码，结果是一样的。我用 psql my_db my_user 测试了数据库连接，它可以工作。如果我做一个

`bundle exec rake db:reset RAILS_ENV=production`

我收到一个错误：

```
undefined method `sass' for #<Rails::Application::Configuration:0x00000000dea738> 
```

虽然**sass**，**sass-rails**和**haml-rails** gem 存在于我的 /var/www/opf/shared/bundle/ruby/1.9.1/gems

====== 更新 =======

这是我的 database.yml ：

```
development:
  host: localhost
  port: 5432
  adapter: postgresql
  encoding: utf8
  database: mydevdb
  pool: 5
  username: myuser
  password: mypass

test:
  host: localhost
  port: 5432
  adapter: postgresql
  encoding: utf8
  database: mytestdb
  pool: 5
  username: myuser
  password: mypass

production:
  host: localhost
  port: 5432
  adapter: postgresql
  encoding: utf8
  database: myproddb
  pool: 5
  username: myuser
  password: mypass 
```

这是我的 Gemfile ：

```
source 'https://rubygems.org'

gem 'rails', '~>3.2'
# Ressource : https://github.com/ged/ruby-pg
gem 'pg', '>= 0.14'
# https://github.com/indirect/haml-rails
gem 'haml-rails', '~> 0.3'

group :developpement do
  # Ressource : https://github.com/rspec/rspec-rails
  gem 'rspec-rails', '>= 2.11'
  # Ressource : https://rvm.io//integration/capistrano/
  gem 'capistrano', '>= 2.12'
  # Ressource : https://github.com/btelles/faker
  gem 'faker', '>= 1.0'
  # Ressource : https://rvm.io//integration/capistrano/
  gem 'rvm-capistrano'
end

group :test do 
  gem 'rspec', '>= 2.11'
  gem 'webrat', '>= 0.7'
  gem 'spork-rails', '>= 3.2'
  gem 'factory_girl_rails', '>= 4.0'
end

group :assets do
  # Faciliter la rédaction de feuilles de style CSS
  # Ressource : http://sass-lang.com/
  gem 'sass-rails',   '>= 3.2.3'
  gem 'coffee-rails', '>= 3.2.1'
  # Ressource : http://compass-style.org/
  gem 'compass-rails', '>= 1.0'

  # See https://github.com/sstephenson/execjs
  #readme for more supported runtimesa
  # execjs and therubyracer are ncessary for compass-rails gem to work properly
  gem 'execjs'
  gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
# Ressource : https://github.com/ctran/annotate_models
gem 'annotate'
# Ressource : https://github.com/asanghi/excel_rails
gem 'excel_rails', '~> 0.3'
# Ressource : https://github.com/voraz/spreadsheet
gem 'spreadsheet', '~> 0.7'
# Ressource : https://github.com/lomba/schema_plus
gem 'schema_plus', '~> 0.4'
# Resource : https://github.com/tchandy/octopus
gem 'ar-octopus', '~> 0.3'
# Resource : https://github.com/ernie/squeel
gem 'squeel', '~> 1.0'
# Resource : https://github.com/plataformatec/devise
gem 'devise', '~> 2.1'
# Resource : https://github.com/martinrehfeld/role_model
gem 'role_model'
# Resource : https://github.com/stffn/declarative_authorization
gem 'declarative_authorization'
# Resource : https://github.com/francesc/rails-translate-routes
gem 'rails-translate-routes', '~> 0.1' 
```

我做了更多的测试，并意识到问题来自初始化过程。在某些时候，我的应用程序的初始化会使 Ruby 解释器崩溃。我删除了我的 config/application.rb 的一些行。结果至少将崩溃变成了关于“未初始化的常量设计”的错误。我用谷歌搜索，发现我在 application.rb 中添加了一个“需要'设计'”。所以我做了，但错误和 Ruby 崩溃又来了。

这个问题似乎与资产管道和初始化有关。我注意到以下行使我的初始化使 Ruby 解释器崩溃，因此我对其进行了评论：

```
Bundler.require(*Rails.groups(:assets => %w(development test))) 
```

我的 config/application.rb ：

```
require File.expand_path('../boot', __FILE__)

# Pick the frameworks you want:
require "active_record/railtie"
require "action_controller/railtie"
require "action_mailer/railtie"
require "active_resource/railtie"
require "sprockets/railtie"
# require "rails/test_unit/railtie"

# Without this I got a "unitialized Constant Devise" error
require 'devise'

# THIS ALL STUFF MAKES CRASH RAILS INITIALIZATION, so I commented it.
if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  #Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end

module Opf
  class Application < Rails::Application
    # Settings in config/environments/* take precedence over those specified here.
    # Application configuration should go into files in config/initializers
    # -- all .rb files in that directory are automatically loaded.

    # Custom directories with classes and modules you want to be autoloadable.
    # config.autoload_paths += %W(#{config.root}/extras)

    # Only load the plugins named here, in the order given (default is alphabetical).
    # :all can be used as a placeholder for all plugins not explicitly named.
    # config.plugins = [ :exception_notification, :ssl_requirement, :all ]

    # Activate observers that should always be running.
    # config.active_record.observers = :cacher, :garbage_collector, :forum_observer

    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
    # Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
    # config.time_zone = 'Central Time (US & Canada)'

    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
    # Pour utiliser la traduction française des messages d'erreur standards
    config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
    config.i18n.default_locale = 'fr'

    # Configure the default encoding used in templates for Ruby 1.9.
    config.encoding = "utf-8"

    # Configure sensitive parameters which will be filtered from the log file.
    config.filter_parameters += [:password]

    # Enable escaping HTML in JSON.
    config.active_support.escape_html_entities_in_json = true

    # Use SQL instead of Active Record's schema dumper when creating the database.
    # This is necessary if your schema can't be completely dumped by the schema dumper,
    # like if you have constraints or database-specific column types
    config.active_record.schema_format = :sql

    # Enforce whitelist mode for mass assignment.
    # This will create an empty whitelist of attributes available for mass-assignment for all models
    # in your app. As such, your models will need to explicitly whitelist or blacklist accessible
    # parameters by using an attr_accessible or attr_protected declaration.
    config.active_record.whitelist_attributes = true

    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0'

    # =======  DEBUG : without this, Capistrano Assets:precompile crash ========
    config.assets.initialize_on_precompile = false
    # ==============================================================

   # Make crashing Initialization, so I commented
#    config.generators do |g|
#      g.test_framework :rspec
#      g.fixture_replacement :factory_girl
#      g.stylesheets false
      # cette option ne doit pas être activée car elle est géré (et activée) par la gem 'haml-rails'
#      # g.template-engine :haml
#    end

#    config.sass.preferred_syntax = :sass

    # To replace 'div' by 'span' within error-feedbacks
    config.action_view.field_error_proc = Proc.new do |html_tag, instance|
      # Ressources : http://stackoverflow.com/questions/5267998/rails-3-field-with-errors-wrapper-changes-the-page-appearance-how-to-avoid-t
      # Ressources : Railcast : http://railscasts.com/episodes/39-customize-field-error?autoplay=true
      class_attr_index = html_tag.index('class="')
      if class_attr_index
        html_tag.insert class_attr_index+7, 'field_with_errors '
      else
        html_tag.insert html_tag.index('>'), ' class="field_with_errors"'
      end
    end
  end
end 
```

myapp 的成功测试总结：

*   Postgresql 数据库用户访问和等于 database.yml = WORK
*   @global gemset 中的宝石存在 = CHECK
*   直接在服务器上从头开始创建一个“测试”应用程序 = WORK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:44:48.017

好的，经过一些非常长时间的研究和测试，我找出了问题的原因。

有几个错误：

*   为了 execjs gem 正常工作，

    `gem 'therubyracer', :platforms => :ruby`

必须在生产组或 Gemfile 中的任何组之外

*   为了对嵌套的 SASS-CSS 资产进行预编译`rake assets:precompile`（ )，并且[我必须添加以下行](https://stackoverflow.com/questions/15555714/why-does-rake-assetsprecompile-produce-an-empty-css-stylesheet)：

    `@import screen.css.sass`

在我的 app/assets/stylesheets/application.css.sass 文件中。

*   为了使捆绑器正常工作，我在“gem install bundler”期间收到一条消息，`$PATH:`要求在服务器端添加我的 /etc/profile 和 /root/.bashrc 文件。

*   为了 capistrano deploy:update 任务正常工作，不要忘记添加`require 'rvm/capistrano'`config/deploy.rb 文件，以便 capistrano 可以找到（并执行）`bundle`命令。

但是通过所有这些修复，我仍然遇到与 postgresql 相同的错误：

```
/var/www/opf/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:1208: [BUG] Segmentation fault 
```

因为我正在使用这个特殊[配方](http://www.simonecarletti.com/blog/2009/06/capistrano-and-database-yml/)以避免将 database.yml 存储在 github 上。并使用此[解决方案](https://stackoverflow.com/questions/5365950/require-in-capistrano-deploy-rb-cannot-find-file)命令 capistrano 找到我的食谱文件。我为这个食谱构建了一个 database.yml 模板，但不知何故我意识到问题出在我的模板上。

我必须删除每个数据库上的这两行，以便 rails 初始化正常工作：

```
 host: localhost
  port: 5432 
```

也许生成的 database.yml 已损坏，我没有测试重新添加这些（更正）两行。我已经在这上面花了几个星期...

--- 一般建议 ---

现在，我向那些迫切希望找到解决问题的开发人员（就像我一样）提供一些建议：在大量寻找解决方案之后，停止它。

只需使用`rails new newapp --database=postgresql`（`rails new -h`用于此命令的数据库参数的帮助）构建一个新的非常基本的 rails 应用程序，然后使用`rails generate scaffold mymodel mycolumn`.

`git init`在您的应用程序目录中，使用和 Capistrano初始化 Git`capify .` 然后只需为您的数据库添加 gem（例如 postgresql 的 pg），运行捆绑安装。然后用你自己的基本 database.yml 将它连接到你的数据库，让你测试它是否可以在你的开发工作站上运行。提交并推送到您的 Git 存储库，然后使用 capistrano 进行部署并检查它是否在服务器端运行。

然后逐步将（宝石、迁移和您自己的个人库）添加到您的新应用程序中，直到它不起作用。

同时，将 newapp 的工作位添加到服务器端失败的应用程序中，直到它工作为止（不要在开发工作站端的应用程序上更改任何内容）。

这迟早会引导你找到解决方案。

# static-analysis - FlexeLint 和 boost::bimap

> ID：13381007
> 
> 赞同：0
> 
> 时间：2012-11-14T14:43:08.577
> 
> 标签：static-analysis, lint

我对使用 boost::bimap 的燧石代码片段有疑问。我有一个简单的 bimap.cpp，如下所示：

```
#include <boost/bimap.hpp>

typedef boost::bimap<int, double> TestBimap;

int main()
{
    TestBimap flintTest;
    return 0;
} 
```

我知道，这不是完美的，但这只是一个例子。我在上面运行燧石：

```
flint --i../flexelint_cfg/ --i/home/rat/boost/1.45.0/include ../flexelint_cfg//co-gcc.lnt  bimap.cpp 
```

并且燧石返回大量错误。从上到下的几个是：

```
 --- Module:   bimap.cpp (C++)$
    $
      While instantiating boost::bimaps::bimap<int,double> at File bimap.cpp line 7$
      While instantiating boost::bimaps::detail::bimap_core<int,double,mpl_::na,mpl_::na,mpl_::na>$
        at File /boost/1.45.0/include/boost/bimap/bimap.hpp$
        line 137$
      While instantiating struct boost::bimaps::detail::manage_bimap_key<int> at$
        File /boost/1.45.0/include/boost/bimap/detail/bimap_core.hpp$
        line 90$
      While instantiating struct boost::bimaps::set_of<int> at File$
        /boost/1.45.0/include/boost/bimap/detail/manage_bimap_key.hpp$
        line 69$
      While instantiating struct boost::concepts::requirement_<void$
        (*)(boost::AssignableConcept<int>)> at File /boost/1.45.0/include/boost/bimap/set_of.hpp$
        line 130$
      While instantiating struct boost::AssignableConcept<int> at File$
        /boost/1.45.0/include/boost/concept/detail/general.hpp$
        line 54$
      While instantiating struct boost::Assignable<int> at File$
        /boost/1.45.0/include/boost/concept_check.hpp$
        line 137$
      While instantiating struct boost::concepts::requirement_<void$
        (*)(boost::concepts::usage_requirements<boost::Assignable<int>>)> at File$
        /boost/1.45.0/include/boost/concept_check.hpp$
        line 139$
      While instantiating struct boost::mpl::if_<boost::concepts::not_satisfied<boost::concepts::usage_requirements<boost::Assignable<int>$
    >>,boost::concepts::constraint<boost::concepts::usage_requirements<boost::Assignable<int>>>,boost::concepts::requirement<boost::concepts::f$
    ailed ************usage_requirements::************>> at File$
        /boost/1.45.0/include/boost/concept/detail/general.hpp$
        line 56$
      While instantiating struct boost::concepts::not_satisfied<boost::concepts::usage_requirements<boost::Assignable<int>$
    >> at File /boost/1.45.0/include/boost/mpl/if.hpp$
        line 63$
                           _$
        TestBimap flintTest;$
    /boost/1.45.0/include/boost/concept/detail/has_constraints.hpp $
        44  Error 1015: Symbol 'constraints' not found in class$
    bimap.cpp  7  Info 831: Reference cited in prior message$
    /boost/1.45.0/include/boost/bimap/bimap.hpp $
        137  Info 831: Reference cited in prior message$
    /64bit/boost/1.45.0/include/boost/mpl/if.hpp $
        63  Info 831: Reference cited in prior message$
    /boost/1.45.0/include/boost/bimap/detail/bimap_core.hpp $
        90  Info 831: Reference cited in prior message$
    /boost/1.45.0/include/boost/concept_check.hpp $
        137  Info 831: Reference cited in prior message$
   /boost/1.45.0/include/boost/concept_check.hpp $
        139  Info 831: Reference cited in prior message$
    /boost/1.45.0/include/boost/concept/detail/general.hpp $
        54  Info 831: Reference cited in prior message$
    /boost/1.45.0/include/boost/concept/detail/general.hpp $
        56  Info 831: Reference cited in prior message$
    /boost/1.45.0/include/boost/bimap/detail/manage_bimap_key.hpp $
        69  Info 831: Reference cited in prior message$
    /boost/1.45.0/include/boost/bimap/set_of.hpp $
        130  Info 831: Reference cited in prior message$ 
```

我的 FlexeLint 版本是：

```
FlexeLint for C/C++ (Unix) Vers. 9.00i, Copyright Gimpel Software 1985-2012 
```

我花了几个小时试图让它工作，但没有运气。有人遇到同样的问题并有解决方案吗？这是错误配置吗 - 如果需要，我可以发布我的配置。

我将非常感谢您的帮助

最好的祝福！

PS：请使用flexelint标签；>？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:29:22.347

对于那些和我遇到同样问题的人。我直接向 Gimepl 支持人员询问了这个问题，他们回答说这是 FlexeLint 不处理 c++11 可变参数模板的问题。因此，目前，唯一的解决方法是通过 -elib 和 -e 选项抑制这些警告。

# javascript - jquery mobile中的动态地图大小

> ID：13381012
> 
> 赞同：0
> 
> 时间：2012-11-14T14:43:19.760
> 
> 标签：javascript, jquery, google-maps, jquery-mobile

如何为使用 jquery mobile 的页面上的地图设置 100% 的大小？到目前为止，我尝试设置高度：100%，但这没有效果，而且我仍然有滚动条。

如果我使用 height:auto，我的地图不会显示

```
<div id="map_canvas" style="width:100%; height:90%; position:absolute; top:121px;"  ></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:24:00.617

由于正文边缘，您正在滚动。只需将其设为 0。我已经在 Firefox 中测试了以下内容

```
<html>
<body style="margin:0;">
     <div id="map_canvas" style="height:100%; background-color: black;"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:55:24.327

100% 大小的常见问题是百分比是父元素的，所以它也需要有一个大小（它可以是 100%）。请参阅Mike Williams 的 v2 教程的[此页面](http://econym.org.uk/gmap/basic19.htm)（相同的概念适用于 v3）。

您没有在地图 div 上方提供任何上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:58:10.787

你为什么不直接获得设备的高度并使用它......

```
var viewportHeight = $(window).height(); 
```

# c# - 将缺少的 XML 属性反序列化为 Nullable 类型

> ID：13381016
> 
> 赞同：1
> 
> 时间：2012-11-14T14:43:27.360
> 
> 标签：c#, xml-serialization

**在 SO 上序列化** 类型有多种解决方案，`Nullable`但我需要的是**反序列化为**可空类型的解决方案。Specified 和 ShouldSerailise 技术似乎不适用于反序列化。

因此，如果我的 XML 文档缺少一个属性，我希望类中的 int 为 null 而不是 0。

不幸的是，您不能直接序列化为可为空的 int，因为序列化会引发反射错误。

所以在下面的例子中，我想`result2.SomeInt`为 null 并且`result1.SomeInt = 12`

```
class TestProgram
{
    public static void Main(string[] args)
    {
        XmlSerializer deserializer = new XmlSerializer(typeof(Result));

        Stream xmlStream = new MemoryStream(Encoding.ASCII.GetBytes(docWithVal().InnerXml));
        var result1 = (Result)deserializer.Deserialize(xmlStream);

        Stream xmlStream2 = new MemoryStream(Encoding.ASCII.GetBytes(docWithoutVal().InnerXml));
        var result2 = (Result)deserializer.Deserialize(xmlStream2);
    }

    public static XmlDocument docWithoutVal()
    {
        var doc = new XmlDocument();
        doc.LoadXml(@"<Result/>");
        return doc;
    }

    public static XmlDocument docWithVal()
    {
        var doc = new XmlDocument();
        doc.LoadXml(@"<Result SomeInt = ""12""/>");
        return doc;
    }
}

[Serializable]
public class Result
{
    [XmlAttribute]
    public int? SomeInt { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:05:00.690

您实际上可以在反序列化后使用指定的技术。以这种方式修改您的`Result`课程：

```
[Serializable]
public class Result
{
    [XmlAttribute]
    public int SomeInt { get; set; }

    [XmlIgnore]
    public bool SomeIntSpecified;
} 
```

`Nullable`现在在反序列化类型后使用此逻辑：

```
var value = SomeIntSpecified ? SomeInt : null; 
```

* * *

或者你也可以`IXmlSerializable`在你的`Result`类中实现：

```
[Serializable]
public class Result : IXmlSerializable
{
    public int? SomeInt { get; set; }

    #region IXmlSerializable members

    public void WriteXml(XmlWriter writer)
    {
        if (SomeInt != null) { writer.WriteValue(writer); }
    }

    public void ReadXml(XmlReader reader)
    {
        int result;
        if (int.TryParse(reader.GetAttribute("SomeInt"), out result))
            SomeInt = result;
    }

    public XmlSchema GetSchema()
    {
        return (null);
    }

    #endregion
} 
```

参考：[使用 XmlSerializer 反序列化为 Nullable](http://alexscordellis.blogspot.com/2008/11/using-xmlserializer-to-deserialize-into.html)

# java - 获取 TypeElement 内部和注释处理器的类名

> ID：13381023
> 
> 赞同：5
> 
> 时间：2012-11-14T14:43:58.797
> 
> 标签：java, annotations, javac, processor

我正在编写一个在 javac 中运行的注释处理器。它扫描带注释的类并生成一个包含类名的资源文件。这些名称将在运行时使用以得到`Class<?>`感谢`Class.forName(String)`。

如何从`javax.lang.model.element.TypeElement`.

**提示：**我既不需要简单名称（例如 Bar），也不需要限定名称（例如 pgk1.pkg2.Foo.Bar）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T14:43:58.797

注释处理器由编译器初始化并接收一个`ProcessingEnvironment`实例。

该方法`Name ProcessingEnvironment.getElementUtils().getBinaryName(TypeElement)`返回一个二进制名称，以后可用于实例化该类。

# symfony-1.4 - Composer 在 AWS Ubuntu 服务器上不工作，在本地工作正常

> ID：13381032
> 
> 赞同：2
> 
> 时间：2012-11-14T14:44:13.767
> 
> 标签：symfony-1.4, php, composer-php

Composer install 命令在我的计算机上本地运行良好：

*   使用包信息加载作曲家存储库
*   从锁定文件安装依赖项
*   无需安装或更新
*   生成自动加载文件

当我通过 ssh 连接到 ubuntu 服务器并运行相同的命令时，我得到了这个。

```
PHP Fatal error:  Class 'Composer\Installers\Installer' not found in phar:///usr/local/bin/composer/src/Composer/Installer/InstallerInstaller.php on line 102

Fatal error: Class 'Composer\Installers\Installer' not found in phar:///usr/local/bin/composer/src/Composer/Installer/InstallerInstaller.php on line 102 
```

我遵循了两台机器的说明： [https ://github.com/composer/composer/blob/master/README.md](https://github.com/composer/composer/blob/master/README.md)

我在这里缺少一些依赖项？我不知道为什么会出现这个错误。

**编辑**：这是.json（项目是symfony 1.4，也添加了标签）

```
{
  "minimum-stability": "dev",
  "require"     : {
    "snappy/sfSnappyPlugin": "*"
  },
  "repositories": [
    {
      "type": "git",
      "url": "https://github.com/FloranBrutel/sfSnappyPlugin.git"
    }
  ]
} 
```

**Edit2**：AWS 服务器上 php -v 的输出

```
PHP 5.3.10-1ubuntu3.4 with Suhosin-Patch (cli) (built: Sep 12 2012 18:59:41) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies 
```

在我的机器上，我有：

```
PHP 5.3.6-13ubuntu3.9 with Suhosin-Patch (cli) (built: Sep 12 2012 19:00:27) 
Copyright (c) 1997-2011 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2011 Zend Technologies
with Xdebug v2.1.0, Copyright (c) 2002-2010, by Derick Rethans 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T23:56:07.823

我设法复制了您的问题。在您运行 composer 的目录中，您应该有如下路径：

```
vendor/composer/installers/src/Composer/Installers 
```

在这个目录中应该存在一个`Installer.php`文件。通过删除该文件，我设法得到了与您相同的错误。

所以我相信一个解决方案是简单地完全删除你的`vendor`和`plugins`目录并尝试`composer install`再次运行，强制重新下载你的所有供应商`composer.json`。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:16:22.070

您运行的确切命令是什么？

你应该做什么：

*   运行`rm -rf vendor/*`以擦除所有可能的作曲家数据（它使用 vendor/.composer 作为缓存）
*   运行`composer self-update`以将 Composer 更新到最新版本。这行得通吗？
*   尝试`composer -V`
*   确保您在服务器上有 openSsl（因为您需要通过 https）
*   在 cli 上将 APC 切换为 false`apc.enable_cli=0`

# java - 2个类，按降序排列到ArrayList中

> ID：13381034
> 
> 赞同：1
> 
> 时间：2012-11-14T14:44:16.670
> 
> 标签：java, arraylist, comparator

我有一个类（Card），它声明了扑克牌的枚举（花色和等级）。第二个类（Deck）从枚举创建卡片组，将它们打乱并将它们插入到 ArrayList 中。

在第一堂课中，我有这个类/方法：

```
 public static abstract class descendingCards implements Comparator{
           public static ArrayList<Card> sortDescending(ArrayList<Card> cardList){
               Comparator<Card> c = Collections.reverseOrder();
               Collections.sort(cardList, c);
               return cardList;
    }
} 
```

我的主要方法类包含以下内容：

```
 System.out.print(Deck.newDeck());
    System.out.print("After Sorting to desending: " + "\n");
    System.out.print(Card.descendingCards.sortDescending(Deck.newDeck())); 
```

最初我在第一堂课中创建甲板，并且该方法运行良好。由于我已将甲板创建移至第二类，我认为该方法仅返回一个空的 ArrayList。我有点困惑。我确定它是我忽略的小东西。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:57:24.990

解决方案非常简单，您不调用**Deck**构造函数，您只是创建一个空的 ArrayList。甲板由构造函数填充，由于您没有调用构造函数，所以甲板保持为空。

# erlang - Erlang 中 process_flag(priority, Level) 的正确用法是什么？

> ID：13381036
> 
> 赞同：1
> 
> 时间：2012-11-14T14:44:17.780
> 
> 标签：erlang, scheduling

我想使用 process_flag(priority, Level) 来设置进程的优先级。我对它应该在我的代码中的位置感到有点困惑，似乎找不到一个例子。

我可以看到的两个选项是：

(1) 在产生进程之前设置标志：

```
process_flag(priority, max),
register(myprocess, spawn(fun() -> myprocess() end)), 
```

(2) 生成后在函数内设置标志：

```
myprocess() ->
process_flag(priority, max),
%do stuff 
```

另外，如果选项 1 是正确的，我是否需要在生成`normal`其他进程之前将标志重置为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:37:35.070

选项 2 是正确的。正如[文档](http://www.erlang.org/doc/man/erlang.html#process_flag-2)所说，`process_flag/2`“为调用此函数的进程设置某些标志”。我认为任何进程标志都不会继承到衍生进程。

该文档还建议不要使用`max`优先级：

> `max`优先级保留供 Erlang 运行时系统内部使用，不应被*其他*人使用。

# objective-c - 横向嵌入 YouTube 视频

> ID：13381037
> 
> 赞同：5
> 
> 时间：2012-11-14T14:44:19.243
> 
> 标签：objective-c, ios, youtube, youtube-api

我的应用程序中有一个嵌入的 YouTube 视频。整个应用程序被锁定为仅以纵向运行，但我希望在用户点击缩略图上的播放按钮后以横向播放视频。这是嵌入式 YouTube 视频的代码。

```
//
//  YouTubeView.h
//  KFBNewsroom
//
//  Created by KFB on 11/8/12.
//  Copyright (c) 2012 com.kfb. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface YouTubeView : UIViewController
{
    IBOutlet UIWebView *thumbnailView;
}
@property (nonatomic, retain) IBOutlet UIWebView *thumbnailView;

@end

//
//  YouTubeView.m
//  KFBNewsroom
//
//  Created by KFB on 11/8/12.
//  Copyright (c) 2012 com.kfb. All rights reserved.
//

#import "YouTubeView.h"

@interface YouTubeView ()

@end

@implementation YouTubeView
@synthesize thumbnailView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = @"Monthly Video";
    // Do any additional setup after loading the view from its nib.
    // webView is a UIWebView, either initialized programmatically or loaded as part of a xib.

    NSString *htmlString = @"<html><head><meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 280\"/></head><body style=\"background:#F00;margin-top:0px;margin-left:0px\"><div><object width=\"280\" height=\"218\"><param name=\"movie\" value=\"http://www.youtube.com/embed/videoseries?list=PL0B9BF37A24840E28&amp;hl=en_US""></param><param name=\"wmode\" value=\"transparent\"></param><embed src=\"http://www.youtube.com/embed/videoseries?list=PL0B9BF37A24840E28&amp;hl=en_US""type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"280\" height=\"218\"></embed></object></div></body></html>";

    [thumbnailView loadHTMLString:htmlString baseURL:[NSURL URLWithString:@"http://www.youtube.com/playlist?list=PL0B9BF37A24840E28&feature=plcp"]];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T11:53:56.497

要接收设备旋转的通知，您需要将项目配置设置为也使用横向模式。然后，如果您有 UIViewController 类，则需要实现旋转以忽略除肖像之外的所有内容。在您拥有视频的控制器中，您只需覆盖它以接受横向。

# ios - iOS：地图上的放大和缩小效果

> ID：13381040
> 
> 赞同：3
> 
> 时间：2012-11-14T14:44:23.913
> 
> 标签：ios, objective-c, ios5, mapkit, zooming

我已经创建了[这个链接](http://www.edumobile.org/iphone/iphone-programming-tutorials/mapkit-example-in-iphone/)上显示的地图，并且它工作得很好。

但问题是，它只能以一种方式放大（只会变大）。我怎样才能让它以任何一种方式工作？

可能就像我们在[谷歌地图上](https://maps.google.com/)的一样（加号 - 左边的棒子）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:01:37.617

对于放大

```
-(void)zoomIn
{
    region.span.latitudeDelta = region.span.latitudeDelta/4 ;
    region.span.longitudeDelta = region.span.longitudeDelta/4;

    region.center.latitude = mapView.centerCoordinate.latitude ;
    region.center.longitude = mapView.centerCoordinate.longitude ;
    [mapView setRegion:region animated:YES];
} 
```

对于缩小

```
-(void)zoomOut
{
    region.span.latitudeDelta = region.span.latitudeDelta*4 ;
    region.span.longitudeDelta = region.span.longitudeDelta*4;

    region.center.latitude = mapView.centerCoordinate.latitude ;
    region.center.longitude = mapView.centerCoordinate.longitude ;
    [mapView setRegion:region animated:YES];
} 
```

> **您使用此结构中的增量值来指示地图的所需缩放级别，较小的增量值对应于较高的缩放级别。**

请参阅此[链接](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKitDataTypesReference/Reference/reference.html)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-31T20:01:36.777

这是 Midhun VP 和 Slavco Petkovski 的答案的修订版，当设置 latitudeDelta 太大时，它避免了 zoomOut 中“无效区域”的 NSInvalidArgumentException。放大似乎没有任何问题 - 一旦达到极限，它就不再放大了。

```
- (void)zoomIn {
    MKCoordinateRegion region = [self.mapView region];
    region.span.latitudeDelta = region.span.latitudeDelta/4;
    region.span.longitudeDelta = region.span.longitudeDelta/4;
    region.center.latitude = self.mapView.centerCoordinate.latitude;
    region.center.longitude = self.mapView.centerCoordinate.longitude;
    [self.mapView setRegion:region animated:YES];
    //NSLog(@"zoomIn: center %lf, %lf; spanDelta %lf, %lf, upper left %lf, %lf; lower right %lf %lf", region.center.latitude, region.center.longitude, region.span.latitudeDelta, region.span.longitudeDelta, region.center.latitude + region.span.latitudeDelta / 2, region.center.longitude - region.span.longitudeDelta / 2, region.center.latitude - region.span.latitudeDelta / 2, region.center.longitude + region.span.longitudeDelta / 2);
}

- (void)zoomOut {
    MKCoordinateRegion region = [self.mapView region];
    region.span.latitudeDelta = region.span.latitudeDelta*4;
    region.span.longitudeDelta = region.span.longitudeDelta*4;
    region.center.latitude = self.mapView.centerCoordinate.latitude;
    region.center.longitude = self.mapView.centerCoordinate.longitude;

    // The region upper latitude must not exceed 90.0 degrees, and the region lower latitude must not fall below -90.0.
    double upperLatitude = region.center.latitude + region.span.latitudeDelta / 2.0;
    double lowerLatitude = region.center.latitude - region.span.latitudeDelta / 2.0;
    if ( upperLatitude > 90 || lowerLatitude < -90 ) {
        region.center.latitude = 0.0;
        double spanRatio = region.span.latitudeDelta / region.span.longitudeDelta;
        region.span.latitudeDelta = 180;
        region.span.longitudeDelta = 180 / spanRatio;
    }
    [self.mapView setRegion:region animated:YES];
    //NSLog(@"zoomOut: center %lf, %lf; spanDelta %lf, %lf, upper left %lf, %lf; lower right %lf %lf", region.center.latitude, region.center.longitude, region.span.latitudeDelta, region.span.longitudeDelta, region.center.latitude + region.span.latitudeDelta / 2, region.center.longitude - region.span.longitudeDelta / 2, region.center.latitude - region.span.latitudeDelta / 2, region.center.longitude + region.span.longitudeDelta / 2);
} 
```

# java - 如何使用 selenium webdriver 根据值确定单选按钮选择？

> ID：13381041
> 
> 赞同：0
> 
> 时间：2012-11-14T14:44:22.567
> 
> 标签：java, selenium, radio-button, webdriver

我试图确定选择了两个单选按钮中的哪一个，并基于该选择另一个。我正在使用Java和硒。

我的 HTML 是：

```
<div class="row span-670px">
<h3>Turn on</h3>
<div class="field-row">
    <div class="field-wrap radio-row clearfix ">
        <input type="radio" name="choosePaymentModel" value="QUOTEHOLD" checked="checked" />
        <label>
            ...
        </label>
    </div>
</div> 
```

```
<div class="row last span-670px">
<h3>Turn off</h3>
<div class="field-row">
    <div class="field-wrap radio-row clearfix ">
        <input type="radio" name="choosePaymentModel" value="BASIC"  />
        <label>
            ...
        </span>
        </label>
    </div>
</div> 
```

唯一不同的是 value 属性。选中的属性将根据选中的属性而改变，因此区分两者的唯一明确方法是通过值。我似乎找不到正确的语法来获取正确的单选按钮。在使用 IDE 时，元素标识符会根据选择相互交换，因此没有什么是唯一的。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:40:24.630

I had to use:

```
element = driver.findElement(By.xpath("//input[@name='choosePaymentModel' and @value='QUOTEHOLD']")); 
```

and

```
element = driver.findElement(By.xpath("//input[@name='choosePaymentModel' and @value='BASIC']")); 
```

to determine which was selected, but unfortunately the click methods did not work on them.

When playing with the IDE was lucky enough to find two separately bizzare elements to click on, which were not in fact elements that contained the "isSelected" values.

In either case, looks like I found the answer to my own problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T02:10:04.487

```
String tempvalue[]=object.split(Concrete.VALUE_SPLIT);
//here I am splitting the values passed through data sheet against radio buttons                
String Val_radio =Browser.driver.findElement(By.xpath(OR.getProperty(tempvalue[0])+data+OR.getProperty(tempvalue[1]))).getAttribute("value");
System.out.println(Val_radio);
Boolean radio = Browser.driver.findElement(By.xpath("//input[@name='radio' and @value="+"'"+Val_radio+"'"+"]")).isSelected();
if(radio.booleanValue()==true){

//do something here

} 
```

# entity-framework - Entity framework: Manually maintained mappings

> ID：13381044
> 
> 赞同：0
> 
> 时间：2012-11-14T14:44:28.087
> 
> 标签：entity-framework, ef-model-first

I've been using EF for a while (4 with model first) and so far I've not created any mapping manually. Whenever I need more entities/tables, I add an entity and the associations (all foreign key) and click "update database from model", which, as is well known, doesn't update any database from the model (although it does need a database connection for reasons I don't know). What it does is generating a storage model and the appropriate mappings to it, which are all stored back to the same edmx xml file.

So far, that has always been enough for me but I'm wondering what the workflow would be if one is to tweak the mappings and storage model manually. "Update database from model" overwrites all manual customization - so how is one to fix *most* of the mappings and storage model? Because I clearly don't want to do it all by hand - in fact I couldn't even figure out how to actually create a table in the storage model other than by editing the edmx in the xml.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:02:27.863

我也有同样的问题。我只是使用多种方法。如果我向数据库添加一个字段，我只需将该字段添加到模型文件中。如果我进行重大重组，我会删除该表并通过从数据库生成它来重新创建它。有时，我实际上将 edmx 编辑为 XML 以更改或添加内容。您只需要弄清楚哪种流程最适合您。通过使用 T4 模板或更改数据库并重新生成，我设法避免了 edmx 中的大量定制。

# liferay - Is it always necessary to have companyID and groupID in Liferay Service Builder?

> ID：13381047
> 
> 赞同：2
> 
> 时间：2012-11-14T14:44:34.343
> 
> 标签：liferay

I'm developing a liferay portlet. I use Service Builder. The question is that do I have to use companyID and groupID in my entity fields? What should I do if I don't want to have these fields? If I don't use them how can I use resourceLocalService.addResources() method?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T17:49:27.380

它们不是必需的，但使用起来很方便。

Liferay 有许多附加服务可供您使用，例如权限、用户、文档库。这些服务几乎总是限定在门户实例范围内，例如，用户的范围限定为由`companyId`. 有些被限制在文档库之类的组中。

因此，根据您计划使用的 Liferay 服务以及这些服务在什么范围内运行，将这些值也存储起来很方便，以便在您调用您正在使用的服务时轻松查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-08T13:03:00.410

请注意，DBA 团队**没有在表中指定这两个外键字段，**但您还是添加了它们。您这样做是因为 DBA 在设计表格时并不了解 Liferay 的内部工作原理。

这些字段是 Liferay 内部的，用于非实例化 portlet 中的上下文目的。CompanyId 对应用户导航到的门户实例，groupId 对应用户导航到的社区或组织。

因为您将在所有查询中使用这些字段值作为参数，所以 portlet 将在不同的门户、社区和组织中具有不同的数据。

# android - Check existance of a file to unlock app

> ID：13381048
> 
> 赞同：0
> 
> 时间：2012-11-14T14:44:34.670
> 
> 标签：android

I wish to create a file on my device somewhere (I don't mind where or what the file contains, my only concern is the name of the file), then have my app look for the existence of that file. The idea is to have a mechanism to secretly unlock some features of my app to anyone I tell about the file.

My only problem is that I have never written any code to read/write files outside of my own app's space before, so I'm not sure how to do it. Can someone give me some pointers.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:54:55.000

您可以使用 File.exists() 方法来确定文件是否存在。

```
 File testfile = new File(Environment.getExternalStorageDirectory()
                + File.separator ,
                "myfile");
        if (testfile.exists()) {
            //file exists. enable your features
        } 
```

# css - Google API iFrame for cross browser compatibility

> ID：13381049
> 
> 赞同：0
> 
> 时间：2012-11-14T14:44:36.893
> 
> 标签：css, html, google-chrome, browser

This is a quick question. I'm developing a website, and it looks amazing in google chrome, not so much in firefox, and internet explorer is terrible. I was speaking to a friend and he said that there is a chrome iframe, which if I put the contents of my website inside, it will behave like chrome on all browsers. Does anybody know of this?

# javascript - Trying to make a click animation repeatable

> ID：13381050
> 
> 赞同：0
> 
> 时间：2012-11-14T14:44:37.433
> 
> 标签：javascript, jquery

I'm trying to make a bar that slides horizontally. If it's positioned left, it will slide right. If it's positioned right, it will slide left. Eventually this will contain multiple bars side by side that will slide out of the way to reveal different images.

right now it would work fine except i can't seem to figure out how to get it to fire more than once. I'm not a javascript guy by any stretch of the imagination, so just a little push in the right direction would be appreciated.

Thanks
Luke

```
 <!DOCTYPE html>
    <html>
    <head>
    <script src="jquery.js"></script>
    <script>
    var x=1;
    $(document).ready(function(){
      if( x==1 )
      {
        x=2;
        $("#block").click(function()
         {
          $("#block").animate({right:'20px'});
         });
        return;
      }

      if( x==2 )
      {
        x=1;
        $("#block").click(function()
         {
          $("#block").animate({left:'20px'});
         });
        return;
      }

    });
    </script>
    </head>

    <body>

    <p> This block should slide right if it's positioned left, and slide left if it's positioned right. It should repeat this behavior indefinitely. Right now it's being very naughty indeed!</p>

    <div id=block style="background:#98bf21;height:100px;width:16px;position:absolute;">
    </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:47:16.647

将事件绑定到 if 语句中，并将条件放在附带事件中。

**[现场演示](http://jsfiddle.net/rajaadil/tVEuu/1/)**

```
$(document).ready(function(){
    var x=1;           
    $("#block").click(function()
    {
       if( x==1 )
       {
           x=2;
           $("#block").animate({right:'20px'});
       }
       else
       {
           x=1;
           $("#block").animate({left:'20px'});
       }
     });
 }); 
```

要保持规则循环，您可能需要更改代码，如下所示

**[现场演示](http://jsfiddle.net/rajaadil/tVEuu/)**

```
$(document).ready(function() {
    var x = 1;
    $("#block").click(function() {
        if (x == 1) {
            x = 2;
            $("#block").animate({
                right:  '20px',
                 left: '0px'
            });
        }
        else {
            x = 1;
            $("#block").animate({
                left: '20px',
                 right:  '0px'
            });
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:54:24.963

您不能轻松地为 and 设置动画`left`，`right`因为当您更改`left: 0`为`right: 0`. 您可以做的是自己计算并`left`仅使用。其他一些事情是：

*   使用布尔值而不是数字来翻转
*   不要决定绑定哪个事件处理程序，而是决定调用处理程序时应该发生什么
*   用于`$(this)`当前元素

[http://jsfiddle.net/HZRWJ/](http://jsfiddle.net/HZRWJ/)

```
$(document).ready(function(){
    var isLeft = true;
    $("#block").click(function() {
        var fullWidth = $(document).width();
        var elemWidth = $(this).width();
        if(isLeft) {
            $(this).animate({ left: fullWidth - elemWidth });
        } else {
            $(this).animate({ left: 0 });
        }
        isLeft = !isLeft;
     });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:19:13.963

如果您将有多个条形图，则将值存储在 jQuery 对象中可能会更容易。

```
$(document).ready(function(){

   $("#block").each( function( ) {

       // associate data with each element. At the moment there should 
       // only be one but if this is implemented as a class there may
       // be more
       $(this).data("x", 0);

   });

   $("#block").click( function( ) {

       // 0 will push it to the right as 0 => false
       if( $(this).data("x") ) { 

           $(this).data("x", 0 );

           // removing the css property allows you to use left & right
           $(this).css("right","").animate({left:'20px'});

       } else {

           $(this).data("x", 1 );

           $(this).css("left","").animate({right:'20px'});

       }
     });
   }); 
```

演示[在这里](http://jsbin.com/iqohon/1/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:00:55.590

这是否与您想要的类似？

[**小提琴演示**](http://jsfiddle.net/RxCHQ/)

```
$("#block").data('position', 'left');
$("#block").click(function() {
    var elem = $(this);
    resetElementPosition(elem);
    switch (elem.data('position')) {
        case 'left': elem.animate({ right: '20px' }); elem.data('position', 'right'); break;
        case 'right': elem.animate({ left: '20px' }); elem.data('position', 'left'); break;
        }
});

function resetElementPosition(element)
{
    element.css({ 'left' : 'auto', 'right' : 'auto' });
} 
```

# c# - EMGU 2.4.0 BruteForceMatcher KNNMATCH not working?

> ID：13381052
> 
> 赞同：4
> 
> 时间：2012-11-14T14:44:46.077
> 
> 标签：c#, image-processing, opencv, emgucv

Here is a snapshot of my code,

```
Matrix<byte> mask;
int k = 2;
VectorOfKeyPoint modelKeyPoints;
VectorOfKeyPoint observedKeyPoints;
SURFDetector surfCPU = new SURFDetector(500, false);
modelKeyPoints = surfCPU.DetectKeyPointsRaw(modelImage, null);
Matrix<float> modelDescriptors = surfCPU.ComputeDescriptorsRaw(modelImage, null, modelKeyPoints);
observedKeyPoints = surfCPU.DetectKeyPointsRaw(observedImage, null);
Matrix<float> observedDescriptors = surfCPU.ComputeDescriptorsRaw(observedImage, null, observedKeyPoints);
BruteForceMatcher<float> matcher = new BruteForceMatcher<float>(DistanceType.L2);
matcher.Add(modelDescriptors);
indices = new Matrix<int>(observedDescriptors.Rows, k);
using (Matrix<float> dist = new Matrix<float>(observedDescriptors.Rows, k))
{
      matcher.KnnMatch(observedDescriptors, indices, dist, k, null);
} 
```

I always get the following exception at KnnMatch()

**Emgu.CV.Util.CvException occurred Message: OpenCV: queryDescriptors.type() == trainDescCollection[0].type()**

I have tried so hard to get rid of this exception and no hope :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:47:21.313

我终于找到了这个问题的原因

它是 modelKeyPoints 或observedKeyPoints null 之一:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T18:29:51.173

与 Zaher 的回答非常相似 - 我的 modelKeyPoints 不是空的，而是空的（modelKeyPoints.Size == 0）。

使用不同的模型图像会有所帮助。

# build - 在 Visual Studio 上的 AfterBuild 之后执行 PostBuildEvent

> ID：13381053
> 
> 赞同：0
> 
> 时间：2012-11-14T14:44:51.893
> 
> 标签：build, msbuild

如何在 AfterBuild 完成后执行 postbuildevent？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:04:01.307

解决方案是添加：

```
 <Target Name="AfterBuild">
        <Exec Command="$(PostBuildEvent)" />
    </Target> 
```

我实际上正在使用 Costura VS Package，我希望它能够自动执行此操作。无论如何，我已经修改了 Costura VS Package 源代码并对其进行了更改，以便它自动将其添加到 Web.Config。

谢谢。

# java - 如何向这个通用列表添加元素？

> ID：13381058
> 
> 赞同：2
> 
> 时间：2012-11-14T14:45:09.443
> 
> 标签：java, generics

我有一个声明如下的列表，我打算在其中添加对象。

```
List<RecursableAction<Recursable, AbstractContext>> actions = new ArrayList<>(); 
```

我有一个`IdGeneratorItemAction`如下所示：

```
public class IdGeneratorItemAction implements RecursableAction<Item, IdGeneratorContext> {
    private IdGeneratorContext context;

    @Override
    public void act(Item recursable) {
    }
} 
```

界面`RecursableAction`如下所示：

```
public interface RecursableAction<R extends Recursable, C extends AbstractContext> {
    void act(R recursable);
} 
```

我尝试创建一个实例`IdGeneratorItemAction`并将其添加到`actions`列表中，如下所示：

```
RecursableAction<Recursable, AbstractContext> action = new IdGeneratorItemAction();
actions.add(action); 
```

当我尝试这样做时，我收到以下编译错误：

```
RecursableAction<Recursable, AbstractContext> action = new IdGeneratorItemAction();
                                                       ^
Type mismatch: cannot convert from IdGeneratorItemAction to RecursableAction<Recursable,AbstractContext> 
```

我试图将声明更改`actions`为

```
List<RecursableAction<? extends Recursable, ? extends AbstractContext>> actions = new ArrayList<>(); 
```

但是当我这样做时，我不再能够在`actions`.

```
for (RecursableAction<? extends Recursable, ? extends AbstractContext> action : actions) {
    action.act(recursable);
    ^
    The method act(capture#1-of ? extends Recursable) in the type RecursableAction<capture#1-of ? extends Recursable,capture#2-of ? extends AbstractContext> is not applicable for the arguments (Recursable)
} 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T15:43:57.993

在不了解上下文的情况下，很难给出建议。显然，您不能将 a 添加`IdGeneratorItemAction`到 a`List<RecursableAction<Recursable, AbstractContext>>`因为`IdGeneratorItemAction`是 a`RecursableAction<Item, IdGeneratorContext>`并且它们不兼容（就像您不能将 a 分配给`List<String>`期望 a 的变量一样`List<Object>`）。但同样你不能调用`act(recursable)`a`RecursableAction<? extends Recursable, ? extends AbstractContext>`因为你不知道`Recursable`它期望什么样的。

例如，如果您处于知道所有操作都兼容的环境中，那么您就可以了

```
public static <R extends Recursable> void doStuff(
      List<? extends RecursableAction<R, ?>> actions, R recursable) {
  for(RecursableAction<R, ?> action : actions) {
    action.act(recursable);
  }
}

public static void main(String[] args) {
  List<RecursableAction<Item, IdGeneratorContext>> actions = new ArrayList<>();
  actions.add(new IdGeneratorItemAction());
  doStuff(actions, new Item());
} 
```

但如果不是，那么我认为如果没有某个地方或其他地方的演员，你就无法实现你想要的。

# facebook - Facebook API post to friends wall

> ID：13381063
> 
> 赞同：3
> 
> 时间：2012-11-14T14:45:22.220
> 
> 标签：facebook, codeigniter, facebook-graph-api

I'm building application to post statuses from authenticated users like [that one](http://www.facebook.com/tarekhassan410/posts/366730226754110).

The problem is the application posting from my profile on friends wall who authenticated the application from my profile.

I'm using Facebook API with CodeIgniter.

the code

```
 $userId = $this->facebook->getUser();
        $IDs = $this->facebook_data->get_IDs();
        if(isset($_POST['link'])){
            $args = array(
                'from'  => array('name'=>'Resala','id'=>'294357147348261'),
                'application'=>array('name'=>'XXXX','id'=>'XXXXX'),
                'name'  =>'XXXX',
                'message'   => $_POST['status2'],
                'link'      => $_POST['link']
            );
        }else{
            $args = array(
                'from'  => array('name'=>'Resala','id'=>'294357147348261'),
                'application'=>array('name'=>'Resala','id'=>'XXXXX'),
                'name'  =>'XXXX',
                'message'   => $_POST['status1']
            );
        }
        foreach($IDs->result() as $row){
            $ID=$row->user_id;
            $this->facebook->api("/$ID/feed", "post", $args);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:56:34.943

创建帖子的正确文档是：http:
[//developers.facebook.com/docs/reference/api/user/#posts](http://developers.facebook.com/docs/reference/api/user/#posts)

在那里您可以看到参数“来自”和“应用程序”不存在以及“名称（只有在指定链接时才能使用）”。

不能以应用的名义发帖。您只能以页面的名称（可能与应用程序相关联）发帖。因此，您必须使用页面访问令牌而不是用户访问令牌。请参阅：http: [//developers.facebook.com/docs/reference/api/page/#page_access_tokens](http://developers.facebook.com/docs/reference/api/page/#page_access_tokens)

# json - GXT JsonReader（使用 AutoBeans）能否在一个请求中解析复杂的 JSON 结构？

> ID：13381064
> 
> 赞同：1
> 
> 时间：2012-11-14T14:45:23.220
> 
> 标签：json, parsing, gxt

我需要处理从服务返回的数据，该服务具有比 GXT 文档中提供的示例更复杂的 JSON 结构，到目前为止，我找不到任何说明或示例来说明如何实现这一点。

JSON 包含多个键/值对，但其中一些键/值对是集合。我可以在一次调用中以适当的结构从服务返回给我的所有数据，但似乎没有一种方法可以将数据解析为单独的实体。在我的特殊情况下，我正在尝试配置一个加载器，它将处理其中一个集合，但我还需要来自同一消息的其他键/值对（让加载器进行一次调用然后再调用一次是不行的相同的数据并检索其他键/值对）。有没有办法使用 GXT3 来完成这个？

示例：假设我可以从服务器发出请求，该服务器返回 JSON，其中包含作者姓名以及作者所写书籍的集合。我想在列出书籍的网格上方显示作者的姓名。我只想向服务器发出一个请求，然后让我的视图在一个组件中显示作者，并在网格中显示书籍列表。假设我需要一个加载器而不仅仅是一个商店，因为网格可能需要进行额外的调用（例如，如果它是一个分页网格、livegrid 等）。

示例 JSON：（返回的一条 JSON 消息与作者元素以及书籍元素的集合一起返回 - 我已缩进 JSON 以说明结构）

```
{ "returnData" : 
  {"author" : "AuthorName"}, 
  {"books" : 
     {"id" : "1", "name" : "Book1"},{"id" : "2", "name" : "Book2"}
  }
} 
```

使用 JsonReader 的示例（有关示例，请参见 javadoc），我可以接收请求并使用 AutoBeans 将链接解析为集合。当我需要在加载器中检索和解析这些内容时，这可以正常工作。但是，如果我这样做，那么其他属性将被忽略。我目前看不到任何方法可以解析同一请求中的其他值，以便它们可以在其他地方使用。我的收集处理示例代码如下：

```
// this is the root JSON object, the AuthorRecord
public interface AuthorRecord {
  @PropertyName(value="author")
  String getAuthor();
  @PropertyName(value="author")
  void setAuthor(String author);
  @PropertyName(value="books")
  List<Book> getBooks();@
  @PropertyName(value="books")
  void setBooks (List<Book> books);
}

// models the book objects returned
public interface Book {
 @PropertyName(value="id")
 String getId();
 @PropertyName(value="id")
 void setId(String id);
 @PropertyName(value="name")
 String getName();
 @PropertyName(value="name")
 void setName(String name);
}

public interface ReturnData {
  AuthorRootObject getAuthorRoot();
}

public interface LibraryAutoBeanFactory extends AutoBeanFactory {
  AutoBean<ReturnData> authorRecord();
 AutoBean<ListLoadConfig> loadConfig();
}

public class ReturnDataJsonReader extends JsonReader<ListLoadResult<Book>, 
  ReturnData> {
    public ReturnDataJsonReader(AutoBeanFactory factory, 
      Class<ReturnData> rootBeanType) {
        super(factory, rootBeanType);
    }

    @Override
    protected ListLoadResultBean<Book> createReturnData(Object loadConfig, 
      ReturnData incomingData) {
        return new ListLoadResultBean<Book>(incomingData.getBooks());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:37:17.997

我遇到的问题是我需要一个视图，其中包含一个列出书籍的网格（分页网格等），同时让作者的名字位于网格上方。我想通过对服务器的一个请求来获取所有这些信息（或至少是结果的第一页），因为 JSON 消息包含我完成此操作所需的所有信息。问题是加载器发出请求并接收响应，它期望它将使用的读取器将处理一个集合。就我而言，我需要加载器来处理书籍的集合，但还要填充另一个数据字段。我找到的解决方案是创建一个任意集合以传递给加载器，然后实现我自己的加载处理程序以根据需要处理返回对象。

1.返回的JSON实际上只是ReturnData类型的一个对象。扩展的 JsonReader 可以使用 AutoBeans 来处理这个，但是如果读取器用于加载器，它需要返回一个集合。因此，重写 createReturnData() 方法以返回一个对象的集合。

```
public class ReturnDataJsonReader extends JsonReader<ListLoadResult<AuthorRecord>, 
  ReturnData> {

  public ReturnDataJsonReader(AutoBeanFactory factory, Class<ReturnData> rootBeanType) 
  {      
    super(factory, rootBeanType);   
  }    

  @Override   
  protected ListLoadResultBean<AuthorRecord> createReturnData(Object loadConfig,
      ReturnData incomingData) {       

    List<AuthorRecord> authorDataCollection = new ArrayList<AuthorRecord>();
    authorDataCollection.add(incomingData);
    return authorDataCollection;    
  }
} 
```

2\. 示例中使用的 LoadHandler 将 ListStore 作为输入，并使用加载程序的结果填充它。由于返回对象不是我们想要填充加载器的对象，并且由于我们需要填充视图上的另一个属性，因此创建您自己的 LoadHandler 以将所需的对象作为输入并填充它们：

查看类示例：

```
public class ExampleViewClass {
 // truncating most of the code in here for brevity
 // note some of the objects referenced here reference objects in the question
 private String authorName;
 private ListStore<Book> bookList;

 // IMPORTANT - create your own LoadHandler
 private class LibraryLoadResultistStoreBinding<C, M, D extends
    ListLoadResult<AuthorRecord>> implements LoadHandler<ListLoadConfig, 
    ListLoadResult<AuthorRecord>> {

      private final ListStore<Book> bookStore;
      private final String authorName;

      public LibraryLoadResultistStoreBinding(ListStore<Book> books, String author) {
          this.bookStore = books;
          this.authorName = author;
      }

      @Override
      public void onLoad(LoadEvent<ListLoadConfig, ListLoadResult<AuthorRecord> event) 
      {
        // the response object
        AuthorRecord response = event.getLoadResult().getData().get(0);  
        bookStore.replaceAll(response.getBooks());
        author = response.getAuthor();
      }
   }

   // example uses an HttpProxy but that's not required
   public void populateView() {
     LibraryAutoBeanFactory factory = GWT.create(LibraryAutoBeanFactory.class);
     ReturnDataJsonReader reader = new ReturnDataJsonReader(factory, ReturnData.class);
     String path = "http://path.to.resource/getinfo";
     RequestBuilder builder = new RequestBuilder(RequestBuilder.GET, path);
     HttpProxy<ListLoadConfig> proxy = new HttpProxy<ListLoadConfig>(builder);

     final ListLoader<ListLoadConfig, ListLoadResult<AuthorRecord>> loader = new       
       ListLoader<ListLoadConfig, ListLoadResult<AuthorRecord>> (proxy, reader);

     loader.useLoadConfig(ReturnDataAutoBeanFactory.instance.loadConfig().as();

     loader.addLoadHandler(new LibraryLoadResultistStoreBinding<ListLoadConfig, 
       AuthorRecord, ListLoadResult<AuthorRecord>>(bookList, authorName);  
     // pass in the objects to be populated

     loader.load();  // fire the loader
   } 
```

# jsf - EL解析bean名称

> ID：13381066
> 
> 赞同：0
> 
> 时间：2012-11-14T14:45:31.923
> 
> 标签：jsf, jsf-2, el, cdi

拥有一个@Named Bean：`HelloBean`

在 JSF 页面中，为什么这个引用是正确的：

```
#{helloBean.var1} 
```

这似乎不是：（IDE警告：“无法解析变量名称”）

```
#{HelloBean.var1} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:56:47.893

来自 Oracle 的[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/gjbak.html)：

> @Named 限定符允许您使用 bean 名称访问 bean，第一个字母小写。

同样的规则也适用于[ManagedBean](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ManagedBean.html)注解：

> 如果 name 属性的值未指定或为空字符串，则 managed-bean-name 派生自全限定类名的非限定类名部分并将第一个字符转换为小写

# java - SimpleStringProperty 和 SimpleIntegerProperty TableView JavaFX

> ID：13381067
> 
> 赞同：14
> 
> 时间：2012-11-14T14:45:36.780
> 
> 标签：java, tableview, javafx

因此，我正在尝试学习如何使用 JavaFx Tableview，并且偶然发现了本教程：

[Oracle 表视图教程](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)

在本教程中，他们展示了为了填充 tableView，你必须用字符串填充它，但不仅仅是任何字符串，你必须将你格式化`String`为`SimpleStringProperty`

我尝试不使用格式，结果是没有任何信息会显示！

我还发现，如果要向`Integer`表中添加一个，则必须将其声明为`SimpleIntegerProperty`

现在我对 JavaFx 还是很陌生，但这是否意味着当我创建一个对象时，我必须格式化所有整数和字符串才能填充我的 TableView？这似乎很愚蠢，但也许有更高的目的？或者有没有办法避免它？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-14T18:48:10.637

您不需要在表数据对象中使用属性来显示它们，尽管在某些情况下使用属性是可取的。

下面的代码将显示一个基于 Person 类的人员表，该类只有字符串字段。

```
import javafx.application.Application;
import javafx.collections.*;
import javafx.geometry.Insets;
import javafx.scene.*;
import javafx.scene.control.*;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.layout.VBox;
import javafx.scene.text.Font;
import javafx.stage.Stage;

public class ReadOnlyTableView extends Application {
  private TableView<Person> table = new TableView<Person>();
  private final ObservableList<Person> data =
    FXCollections.observableArrayList(
      new Person("Jacob", "Smith", "jacob.smith@example.com"),
      new Person("Isabella", "Johnson", "isabella.johnson@example.com"),
      new Person("Ethan", "Williams", "ethan.williams@example.com"),
      new Person("Emma", "Jones", "emma.jones@example.com"),
      new Person("Michael", "Brown", "michael.brown@example.com")
    );

  public static void main(String[] args) { launch(args); }

  @Override public void start(Stage stage) {
    stage.setTitle("Table View Sample");
    stage.setWidth(450);
    stage.setHeight(500);

    final Label label = new Label("Address Book");
    label.setFont(new Font("Arial", 20));

    TableColumn firstNameCol = new TableColumn("First Name");
    firstNameCol.setMinWidth(100);
    firstNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>("firstName"));

    TableColumn lastNameCol = new TableColumn("Last Name");
    lastNameCol.setMinWidth(100);
    lastNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>("lastName"));

    TableColumn emailCol = new TableColumn("Email");
    emailCol.setMinWidth(200);
    emailCol.setCellValueFactory(new PropertyValueFactory<Person, String>("email"));

    table.setItems(data);
    table.getColumns().addAll(firstNameCol, lastNameCol, emailCol);

    final VBox vbox = new VBox();
    vbox.setSpacing(5);
    vbox.setPadding(new Insets(10, 0, 0, 10));
    vbox.getChildren().addAll(label, table);

    stage.setScene(new Scene(new Group(vbox)));
    stage.show();
  }

  public static class Person {
    private String firstName;
    private String lastName;
    private String email;

    private Person(String fName, String lName, String email) {
      this.firstName = fName;
      this.lastName = lName;
      this.email = email;
    }

    public String getFirstName() { return firstName; }
    public void setFirstName(String fName) { firstName = fName; }
    public String getLastName() { return lastName; }
    public void setLastName(String lName) { lastName = lName; }
    public String getEmail() { return email; }
    public void setEmail(String inMail) { email = inMail; }
  }
} 
```

*解释*

使用 Properties 和 ObservableLists 的目的是这些是可监听的元素。使用properties时，如果datamodel中某个property属性的值发生变化，TableView中item的view会自动更新以匹配更新后的datamodel值。例如，如果一个人的电子邮件属性的值设置为一个新值，则该更新将反映在 TableView 中，因为它会侦听属性更改。相反，如果使用纯字符串来表示电子邮件，则 TableView 不会刷新，因为它不知道电子邮件值的变化。

[PropertyValueFactory](http://docs.oracle.com/javafx/2/api/javafx/scene/control/cell/PropertyValueFactory.html)文档详细描述了这个过程：

> 如何使用这个类的一个例子是：
> 
> ```
> TableColumn<Person,String> firstNameCol = new TableColumn<Person,String>("First Name");
> firstNameCol.setCellValueFactory(new PropertyValueFactory<Person,String>("firstName")); 
> ```
> 
> 在此示例中，“firstName”字符串用作对 Person 类类型（它是 TableView 项目列表的类类型）中假定的 firstNameProperty() 方法的引用。此外，此方法必须返回一个 Property 实例。如果找到满足这些要求的方法，则使用此 ObservableValue 填充 TableCell。此外，TableView 会自动为返回值添加一个观察者，这样任何触发的更改都会被 TableView 观察到，从而导致单元格立即更新。
> 
> 如果不存在与此模式匹配的方法，则支持尝试调用 get() 或 is()（即上面示例中的 getFirstName() 或 isFirstName()）。如果存在与此模式匹配的方法，则从此方法返回的值包装在 ReadOnlyObjectWrapper 中并返回给 TableCell。但是，在这种情况下，这意味着 TableCell 将无法观察 ObservableValue 的变化（就像上面第一种方法中的情况一样）。

**更新**

这是第一个示例的对比示例，它演示了 TableView 如何根据对其 ObservableList 项目的更改和基于属性的项目属性值的更改来观察和自动刷新。

```
import javafx.application.Application;
import javafx.beans.property.*;
import javafx.collections.*;
import javafx.event.*;
import javafx.geometry.Insets;
import javafx.scene.*;
import javafx.scene.control.*;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.layout.VBox;
import javafx.scene.text.Font;
import javafx.stage.Stage;

public class PropertyBasedTableView extends Application {
  private TableView<Person> table = new TableView<Person>();
  private final ObservableList<Person> data = FXCollections.observableArrayList();
  private void initData() {
    data.setAll(
      new Person("Jacob", "Smith", "jacob.smith@example.com"),
      new Person("Isabella", "Johnson", "isabella.johnson@example.com"),
      new Person("Ethan", "Williams", "ethan.williams@example.com"),
      new Person("Emma", "Jones", "emma.jones@example.com"),
      new Person("Michael", "Brown", "michael.brown@example.com")
    );
  }

  public static void main(String[] args) { launch(args); }

  @Override public void start(Stage stage) {
    initData();

    stage.setTitle("Table View Sample");
    stage.setWidth(450);
    stage.setHeight(500);

    final Label label = new Label("Address Book");
    label.setFont(new Font("Arial", 20));

    TableColumn firstNameCol = new TableColumn("First Name");
    firstNameCol.setMinWidth(100);
    firstNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>("firstName"));

    TableColumn lastNameCol = new TableColumn("Last Name");
    lastNameCol.setMinWidth(100);
    lastNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>("lastName"));

    TableColumn emailCol = new TableColumn("Email");
    emailCol.setMinWidth(200);
    emailCol.setCellValueFactory(new PropertyValueFactory<Person, String>("email"));

    table.setItems(data);
    table.getColumns().addAll(firstNameCol, lastNameCol, emailCol);
    table.setPrefHeight(300);

    final Button setEmailButton = new Button("Set first email in table to wizard@frobozz.com");
    setEmailButton.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent event) {
        if (data.size() > 0) {
          data.get(0).setEmail("wizard@frobozz.com");
        }  
      }
    });

    final Button removeRowButton = new Button("Remove first row from the table");
    removeRowButton.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent event) {
        if (data.size() > 0) {
          data.remove(0);
        }  
      }
    });

    final Button resetButton = new Button("Reset table data");
    resetButton.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent event) {
        initData();
      }
    });

    final VBox vbox = new VBox(10);
    vbox.setPadding(new Insets(10, 0, 0, 10));
    vbox.getChildren().addAll(label, table, setEmailButton, removeRowButton, resetButton);

    stage.setScene(new Scene(new Group(vbox)));
    stage.show();
  }

  public static class Person {
    private final StringProperty firstName;
    private final StringProperty lastName;
    private final StringProperty email;

    private Person(String fName, String lName, String email) {
      this.firstName = new SimpleStringProperty(fName);
      this.lastName = new SimpleStringProperty(lName);
      this.email = new SimpleStringProperty(email);
    }

    public String getFirstName() { return firstName.get(); }
    public void setFirstName(String fName) { firstName.set(fName); }
    public StringProperty firstNameProperty() { return firstName; }
    public String getLastName() { return lastName.get(); }
    public void setLastName(String lName) { lastName.set(lName); }
    public StringProperty lastNameProperty() { return lastName; }
    public String getEmail() { return email.get(); }
    public void setEmail(String inMail) { email.set(inMail); }
    public StringProperty emailProperty() { return email; }  // if this method is commented out then the tableview will not refresh when the email is set.
  }
} 
```

# java - Italian stemming library in java

> ID：13381069
> 
> 赞同：8
> 
> 时间：2012-11-14T14:45:49.910
> 
> 标签：java, nlp, stemming, snowball

i'm searching a java library or something to do stemming of italian strings of words.

The goal is to compare italian words. In this moment words like "attacco", "attacchi","attaccare" etc., are considered different, instead I want returned a true comparison.

I found something like Lucene, snowball.tartarus.org, etc. Is there something else useful, or how can I use them in java?

Thanks for answers.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T15:24:53.313

**[在此处](http://snowball.tartarus.org/dist/libstemmer_java.tgz)**下载适用于 Java 的[Snowball](http://snowball.tartarus.org/index.php)。

它包括一个名为`org.tartarus.snowball.ext.italianStemmer`extends的类`SnowballStemmer`。

要使用 a`SnowballStemmer`请查看以下动词`attaccare`现在时的测试代码：

```
import org.junit.Test;
import org.tartarus.snowball.SnowballStemmer;
import org.tartarus.snowball.ext.italianStemmer;

public class SnowballItalianStemmerTest {

    @Test
    public void testSnowballItalianStemmerAttaccare() {

        SnowballStemmer stemmer = (SnowballStemmer) new italianStemmer();

        String[] tokens = "attacco attacchi attacca attacchiamo attaccate attaccano".split(" ");    
        for (String string : tokens) {
            stemmer.setCurrent(string);
            stemmer.stem();
            String stemmed = stemmer.getCurrent();
            Assert.assertEquals("attacc", stemmed);
            System.out.println(stemmed);
        }

    }

} 
```

输出：

```
attacc
attacc
attacc
attacc
attacc
attacc 
```

另一个使用示例参见`TestApp.java`包含在同一个 tgz 文件中。

用 Java 编写的 Lucene 使用 Snowball 进行词干提取，例如作为[SnowballFilter](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/contrib-snowball/org/apache/lucene/analysis/snowball/SnowballFilter.html)中的过滤器。

# php - json_decode keeps returning null

> ID：13381070
> 
> 赞同：0
> 
> 时间：2012-11-14T14:45:53.283
> 
> 标签：php, json

I'm trying to convert some JSON to an associate array in PHP. For some reason, the result of `json_decode()` is always NULL.

I guess my JSON must be malformed, but I don't know *why*. What's malformed about it?

```
<?php

$json = '{ markers:{ marker:[ { lat:50.30644, lng:18.03125, title:"Some name with accented characters ÅÄÖ", zoom:13, center:"false", street:"Dalahästvägen 56", zip:{ }, city:"117 58 MALMÖ", country:"SE", phone:"070-880 60 14", www:"domain.se/" }, { lat:59.5306, lng:18.08521, title:"ACME INC", zoom:13, center:"false", street:"ELFSBORGSVÄGEN 9", zip:{ }, city:"186 41 SIGTUNA", country:"SE", phone:"08-511 700 70", www:"acmegiantslingshots.se" }]}}' ;

$arr = json_decode($json, true);
print_r($arr); 
```

Is it because some of the object properties have no value?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T14:47:05.903

所有字符串和键必须使用`"`（双引号）引用以符合 JSON 规范。

[当您遇到破坏 JSON 解析器的东西时， http://jsonlint.com](http://jsonlint.com)通常是一个很好的工具。

# node.js - 全局变量表示 node.js

> ID：13381079
> 
> 赞同：5
> 
> 时间：2012-11-14T14:46:22.693
> 
> 标签：node.js, variables

我正在尝试获取可以在代码中随处可见的变量我找到了一个解决方案，但这不是很干净

```
//environment.js    
module.exports.appName = "appName"; 
```

和我的 app.js

```
var express = require('express')
, routes = require('./routes/main')
, user = require('./routes/user')
, http = require('http')
, path = require('path');

var app = express();

environment = require('./environment');

app.configure(function(){
app.set('port', process.env.PORT || 3000);
app.set('views', __dirname + '/views');
app.set('view engine', 'jade');
app.use(express.favicon());
app.use(express.logger('dev'));
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(express.cookieParser('your secret here'));
app.use(express.session());
app.use(app.router);
app.use(require('stylus').middleware(__dirname + '/public'));
app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.home);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

这样我的 var 工作，我可以在任何地方访问 environment.appName，但是 Y 会有更好的解决方案

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T15:02:56.693

node.js 中有一个全局范围。

在主文件（你放在`node`命令行后面的那个）中，所有定义的变量都在全局范围内。

```
var x = 100;
// which global.x === 100 
```

而在作为模块加载的其他文件中，范围不是`global`本地沙箱对象，因此您需要在主文件`global.x`中访问相同的内容。`x`

似乎它看起来比使用`require()`.

# html - Mouse over and off XHTML/HTML5

> ID：13381080
> 
> 赞同：0
> 
> 时间：2012-11-14T14:46:24.157
> 
> 标签：html, animation, xhtml

I am looking at creating a simple animation in where if you move the mouse open the button opens and you see a word, if you move off of it, the button closes.

What I want though is a reverse order of it opening, so when the mouse moves from the button it slowly closes instead of snapping shut, just like how it opened.

Is there a way to make this possible using only XHTML or HTML5?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:15:08.020

如果我正确理解您的要求，这就是您想要的：

```
<div id="button">
    <span>This is your Text</span>

</div>

<style>
    #button{
        height: 20px;
        width: 100px;
        background-color: blue;
        color: white;
        transition: height 0.25s linear 0.25s;
    }

    #button span{
        opacity: 0;
        transition: opacity 0.1s linear;
    }

    #button:hover{
        height: 50px;
        transition: height 0.25s linear;
    }

    #button:hover span{
        opacity: 1;
        transition: opacity 0.1s linear 0.25s;
    }
</style> 
```

此代码段创建了一个 100x20 像素的按钮，并且在悬停时（当您将鼠标悬停在上方时）它会变大并显示文本。

# windows-8 - libspotify Windows 8 RT ARM

> ID：13381083
> 
> 赞同：3
> 
> 时间：2012-11-14T14:46:29.427
> 
> 标签：windows-8, spotify

是否会为 Windows 8 RT 开发人员发布 ARM 版本的 libspotify？

[Libspotify](https://developer.spotify.com/technologies/libspotify/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:14:30.017

不幸的是，目前这个问题没有答案。不过，我们知道需要一个，这是我们正在调查的事情。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-14T15:31:58.667

我已经在几个缺乏官方 Spotify 支持（Linux PPC、Linux ARM 等）的架构上构建了 despotify，也许这可以让您在专有库发布之前快速启动。

# jquery - jQuery datepicker - 克隆元素上的日期

> ID：13381085
> 
> 赞同：3
> 
> 时间：2012-11-14T14:46:32.427
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

> **可能重复：**
> [克隆 jQuery UI 日期选择器时出现问题](https://stackoverflow.com/questions/2441061/problem-when-cloning-jquery-ui-datepicker)

我对 jQuery 有疑问`datepicker`。我有一个`div`我克隆的。它`div`包含一个附加`input`了 jQuery 的元素。`datepicker`

当我简单地克隆这个元素时，`datepicker`它不能处理克隆的元素。为了解决这个问题，我必须`hasDatepicker`从克隆的输入元素中删除该类并重新初始化该`datepicker`方法。

现在日期选择器显示在克隆的元素上，但是每当我选择一个日期时，日期就会被放置在“原始”输入字段中，而不是打开`datepicker`...

任何人都知道我该如何解决这个问题..？

这是一个演示是问题：http: [//jsfiddle.net/4VQkg/](http://jsfiddle.net/4VQkg/)

只需克隆元素并尝试从克隆的`input`字段中选择一个日期。您会看到数据不会放在所需的`input`字段中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T14:54:36.613

试试这个，

演示：http: [//jsfiddle.net/4VQkg/3/](http://jsfiddle.net/4VQkg/3/)

**代码：**

```
function initGui()
{
    $('.date-iso8601').datepicker();
}

$(function() {
    initGui();

    $('.clone').click(function() {
        var clone = $('.datepicker').clone();

        var cloneObj = clone.find('.date-iso8601');
        cloneObj.removeClass('hasDatepicker').removeAttr('id');

        clone.appendTo('.elements');

        $(cloneObj).datepicker();
    });
}); 
```

# drupal - omega theme, file node--type.tpl.php

> ID：13381087
> 
> 赞同：0
> 
> 时间：2012-11-14T14:46:40.297
> 
> 标签：drupal, drupal-7, drupal-theming

I'm using the theme of Omega 3\. I would like to review the layout of certain fields inside my content type "video". I made so the file: node--video.tpl.php:

```
<? php print render ($ content ['body']); ?> 
```

yet even this simple statement does not work. Does anyone know the reason? No review of the design of the node with omega 3?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:53:21.063

为了更好的调试，尝试安装[开发模块](http://drupal.org/project/devel)和[主题开发模块](http://drupal.org/project/devel_themer)。

在您解决此问题之前，两者都可以成为您最好的朋友。

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:18:22.813

我明白为什么它不起作用。向上：结构-> 内容类型-> 管理显示，我想用隐藏的 php 打印的字段。让它们在“预告片”上都可见，“默认”一切正常。

# indexing - 使用 SQL Server 2012 进行全文索引而不存储文件

> ID：13381091
> 
> 赞同：2
> 
> 时间：2012-11-14T14:46:45.883
> 
> 标签：indexing, full-text-search, sql-server-2012

我想知道，是否可以在不将文档存储在数据库中的情况下使用 SQL Server 2012 的全文搜索？我知道有几种服务提供文件索引而不存储您的文件，但只提供索引数据；可以这样使用 SQL Server 2012 吗？

法比奥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:23:38.447

不，截至今天，全文索引是根据表格内容动态修改的。因此，如果您要删除保存数据的行，则索引将更新以反映更改的表。

我假设您已经查看了像[Filestream](http://msdn.microsoft.com/en-us/library/gg471497.aspx)这样的解决方案来在文件系统上存储非结构化数据，而是正在考虑完全摆脱索引文档。

# ms-access - 向 VBA 访问中的查询添加自动日期范围

> ID：13381093
> 
> 赞同：1
> 
> 时间：2012-11-14T14:46:59.407
> 
> 标签：ms-access, vba

这是我的第一个问题，请善待。我正在编写一个宏访问，我希望一系列报告一个接一个地运行。问题是所有报告都有一个需要输入的日期范围。有些是前一周的，有些是上个月的。

VBA 或宏创建器中是否有办法自动计算上个月或前一周的日期范围并填充该字段以完全自动化该过程，而无需每次手动输入日期范围。

我是 VBA 的新手。任何帮助都会很棒，只要指出我正确的方向。祝你有美好的一天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:52:45.947

此查询是使用 MS Access 中的查询设计窗口创建的，然后从 SQL 视图中剪切。它将在 table1 中显示上周的记录，其中 ww 是周数

```
SELECT Table1.AKey, Table1.atext, Table1.ADate, 
       Format([ADate],"ww") AS Week, Month([ADate]) AS [Month], 
       Year([ADate]) AS [Year]
FROM Table1
WHERE (((Format([ADate],"ww"))=Format(Date(),"ww")-1)
AND ((Year([ADate]))=Year(Date()))); 
```

您会注意到有一列称为月。您可以使用它来设置上个月，方法与设置前一周类似。例如，上周和上个月：

```
SELECT Table1.AKey, Table1.atext, Table1.ADate, 
       Format([ADate],"ww") AS Week, Month([ADate]) AS [Month], 
       Year([ADate]) AS [Year]
FROM Table1
WHERE (((Format([ADate],"ww"))=Format(Date(),"ww")-1) 
AND ((Year([ADate]))=Year(Date()))) 
OR (((Month([ADate]))=Month(Date())-1) 
AND ((Year([ADate]))=Year(Date()))); 
```

SQL 可以写得更整洁，但您也可以从查询设计窗口开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:53:18.363

我猜日期在您打开的数据库中有一个自己的字段，
然后您可以执行类似的操作

```
strSQL = "SELECT * FROM reports WHERE Date >= " & now() -7
rs.open(strSQL)
' for the last week

strSQL = "Select * FROM reports WHERE Date >= " & now() - 30
rs.open(strSQL)
' for the last month 
```

但是您需要将 now() 格式化为与表中相同的格式，这只是最原始的代码。我不得不处理类似的事情，结果很好

# java - SuiteClasses 语法的 Java JUnit 类数组

> ID：13381095
> 
> 赞同：1
> 
> 时间：2012-11-14T14:47:03.620
> 
> 标签：java, generics, junit

目前我有以下代码来测试我的课程......

```
@RunWith(Suite.class)
@SuiteClasses( { MyClass.class, MyNewClass } )
public class AllTests {
    public static void suite() {        
    }
} 
```

我想做的是以下内容，但它在语法上不正确 - 正确的格式是什么？...

```
 Class<?>[] classArray = new Class<?>[] {
        MyClass.class, MyNewClass.class
  };

 @RunWith(Suite.class)
    @SuiteClasses( classArray  )
    public class AllTests {
        public static void suite() {        
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T14:51:22.117

不幸的是你不能。注释需要采用编译时常量，因此您必须使用 `{ MyClass.class, MyNewClass.class }`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:53:59.757

来自“SCJP 学习指南”的 K.Sierra： *“请记住，通配符只能用于引用声明（包括参数、变量、返回类型等）。它们不能用作类型参数“你创建了一个新的类型化集合。考虑一下——虽然引用可以是抽象的和多态的，但创建的实际对象必须是特定类型的。”*

```
List<?> foo = new ArrayList<? extends Animal>(); 
```

问题：您不能在对象创建中使用通配符表示法。所以新的 ArrayList() 不会编译。

编辑：@artbristol 指出了另一个问题，即传递给注释的编译时常量。查看此线程中的响应，它们可能会有所帮助。其中一个建议将 ENUM 作为一种解决方法。 [如何在注解中使用数组常量](https://stackoverflow.com/questions/1387928/how-to-use-an-array-constant-in-an-annotation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:56:00.267

- - 更新 - -

问题似乎源于注释。注释需要编译时常量，这意味着您不能以可能让您重新分配数组或在带注释的方法可以访问它之前对其进行修改的方式“构建一个数组”类。

感谢 artbristol 指出了显而易见的事实。最初我走错了路，试图找出你的数组在我的 1.7 环境中编译的原因。

*实际上，当考虑到 Annotations 旨在通过声明性*方式扩展 java 编程时，对 Annotations 的编译时间常数限制非常有意义。

--- 原帖 ---

不要尝试使用通配符，而是使用

```
 Class<Object>[] classArray = new Class<Object>[] { .... }; 
```

它半破坏了泛型的目的，因为一切都从`Object`; 但是，它将满足您需要的“将任何东西推入其中”的要求。

# git - GIT 钩子以防止将实验分支推送到发布或主分支

> ID：13381105
> 
> 赞同：1
> 
> 时间：2012-11-14T14:47:51.200
> 
> 标签：git, githooks, git-push

我们的工作流程中有三个主要分支。

TEST（实验性）、RELEASE（下一个版本的功能）和 MASTER（仅发布）

我们从 RELEASE 中获取特性分支，首先将特性分支合并到 TEST，如果它们没问题，将那些批准的特性分支合并到 RELEASE。

我的问题是：由于 TEST 分支包含一些我们永远不会发布的提交/功能，我们不希望它错误地（或有意地）合并到 RELEASE 或 MASTER 中。

我在某处读到，阻止本地存储库中的合并是不可能或不可行的，我认为这不会解决我的问题。

因此，当新的引用在其提交日志中包含 TEST 分支的特定提交 ID 时，最好防止更新主存储库中的 MASTER 或 RELEASE 分支引用（通过推送到源）。

所以我将只对 TEST 分支进行特定的提交，并记录其提交 ID。

每当有人想要推送到 master 或 release 分支时，我会检查该推送是否会将我的 refs/heads/master 或 refs/heads/RELEASE 更新为在其历史记录中包含错误提交 ID 的提交 ref 并中止。

由于我不是 BASH 或 GIT 大师，有没有人有这样的更新钩子可以应用到我们的主存储库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:14:49.307

这是一个应该适用的更新挂钩。你可以通过给它们提供标签来指定不应该被允许进入你的 RELEASE 或 MASTER 分支的提交`forbidden/junk`或`forbidden/debugging`。如果发现禁止提交，则标签名称将包含在拒绝消息中。

```
refname="$1"
oldrev="$2"
newrev="$3"
case "$refname" in
  refs/heads/RELEASE|refs/heads/MASTER)
    for forbidden in $(git tag -l 'forbidden/*'); do
      if [ $(git merge-base "$forbidden" $newrev) = $(git rev-parse "$forbidden") ]; then
        echo "Push to $refname contains commit $forbidden" >&2
        exit 1
      fi
    done
    ;;
esac
exit 0 
```

请注意，如果您的分支包含多个问题提交，则必须`forbidden`为最早的提交创建一个标签，而不仅仅是该系列中的最终提交。因此，如果像下面这样的历史记录 where `B`, `C`, and`D`都被禁止，只是标记`D`为禁止不会阻止`E`被合并并`B`随之而来。

```
A---B----C----D
     \
      ---E 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:05:49.523

这个问题需要作为管理问题来解决，而不是自动化问题。问题是 TEST 可能也包含来自其他两个分支的大部分提交。因此，您将无法有效识别来自 TEST 的提交。例如，在我们的环境中，我们会定期使用来自主分支的更新提交来更新实验分支。

您需要有人充当发布经理，以确保如果确实有不好的东西被合并到 master 中，那么在问题解决之前它不会被部署。问题本身不一定是糟糕的合并。问题是部署了错误的合并。

您可能会发现一个有用的工具是[Bitbucket.org](https://bitbucket.org/)，在那里他们有一个基本的提交批准机制。它只是建议性的，但可能有助于您跟踪哪些提交已被批准，哪些可能已被错误地合并。

# ios - 在 iOS 上转义特殊字符（如 é）的百分比

> ID：13381117
> 
> 赞同：0
> 
> 时间：2012-11-14T14:48:35.860
> 
> 标签：ios, nsstring

我目前正在努力解决 iOS 上特殊字符的百分比转义问题，例如查询参数值中包含的“é”。

我正在使用 AFNetworking，但问题并非特定于它。

“é”字符应该被百分比转义为“%E9”，但结果是“%C3%A9”。原因是“é”在 UTF8 中表示为这 2 个字节。

实际的百分比转义方法是众所周知的方法，我将 UTF8 作为字符串编码传递。字符串本身是@"é"。

```
static NSString * AFPercentEscapedQueryStringPairMemberFromStringWithEncoding(NSString *string, NSStringEncoding encoding) 
{
    static NSString * const kAFCharactersToBeEscaped = @":/?&=;+!@#$()~";
    static NSString * const kAFCharactersToLeaveUnescaped = @"[].";

    return (__bridge_transfer  NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (__bridge CFStringRef)string, (__bridge CFStringRef)kAFCharactersToLeaveUnescaped, (__bridge CFStringRef)kAFCharactersToBeEscaped, CFStringConvertNSStringEncodingToEncoding(encoding));
} 
```

我曾希望传入 UTF16 字符串编码可以解决它，但事实并非如此。在这种情况下，结果是“%FF%FE%E9%00”，它包含“%E9”，但我必须遗漏一些明显的东西。

不知怎的，我无法理解它。任何指针都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:00:17.397

[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)解释说，除非您正在编码的字符属于未保留的 US-ASCII 范围，否则约定是将字符转换为（在本例中为 UTF8 编码的）字节值，并将该值用作百分比编码基础。

你看到的行为是正确的。

为 UTF-8 与 UTF-16 给出的编码值之间的差异是由几个因素造成的。

**编码差异**

首先，实际定义各个编码的方式有所不同。UTF-16 将始终使用两个字节来表示其字符，并且本质上将高位字节与低位字节连接以定义代码。（这些字节的顺序将取决于代码是编码为 Little Endian 还是 Big Endian。）另一方面，UTF-8 使用动态数量的字节，这取决于字符在 Unicode 代码页中的位置。UTF-8 关联它将使用多少字节的方式是通过在第一个字节本身中设置的位。

因此，如果我们查看 C3 A9，则可以转换为以下位：

```
1100 0011 1010 1001 
```

查看[RFC 2279](http://www.ietf.org/rfc/rfc2279.txt)，我们看到以 '0' 结尾的 '1' 的开始集合表示将使用多少字节 - 在这种情况下，2\. 剥离初始`110`元数据，我们`00011`从第一个字节开始: 表示实际值的最左边的位。

对于下一个字节 ( `1010 1001`)，我们再次从 RFC 中看到，对于每个后续字节，`10`将是实际值的“前缀”元数据。去掉它，我们就剩下`101001`.

连接实际值位，我们最终得到`00011 101001`，它`233`以 10 为底，或`E9`以 16 为底。

**编码识别**

UTF-16 值 ( ) 中要特别考虑的另一件事`%FF%FE%E9%00`来自原始 RFC，其中提到在编码值本身中没有明确定义所使用的编码。所以在这种情况下，iOS 是在“作弊”，告诉你使用的是什么编码。 `FF FE`是 UTF-16 编码文件中使用的众所周知的字节排序标记，表示 UTF-16 是使用的编码。至于`E9 00`，如前所述，UTF-16 总是使用两个字节。在这种情况下，由于它的所有数据都可以用 1 个字节表示，因此另一个只是空的。

# optimization - 未定义变量多变量 fminsearch

> ID：13381119
> 
> 赞同：1
> 
> 时间：2012-11-14T14:48:47.460
> 
> 标签：optimization, fminsearch

这是我的方程：（只有偏转和 M（矩）方程很重要）

```
M=@(x,F) -(w/2)*(x.^2) + F*x + Fb*(x-L/2).*heaviside(x-L/2); 
deflection=@(x,c1,c2,F) (1/EI)*(-w*(x.^4)/24 + F*(x.^3)/6 + (1/6)*Fb*((x-L/2).^3).*heaviside(x-L/2) + c1*x + c2); 
```

我写了一个目标函数来找到 c1 和 c2 常数和 F 值来优化我的弯矩。

```
OB1=@(c1,c2,F)(deflection(0,c1,c2,F)).^2 + (deflection(L,c1,c2,F)).^2 + (deflection(L/2,c1,c2,F)).^2;

[c] = fminsearch(@(c,F)OB1(c(1),c(2),c(3)),[-0.5 0 1]);
C1=c(1);
C2=c(2);
f=c(3); 
```

给我错误信息：'f' undefined。我认为问题出在 OB 函数和 fminsearch 上。

有人可以帮忙吗？

# sql-server - 从 Microsoft 软件堆栈外部连接到 SQL Server

> ID：13381122
> 
> 赞同：1
> 
> 时间：2012-11-14T14:49:12.773
> 
> 标签：sql-server, odbc

我是一家微软主导的公司的软件工程师，有时在大型项目之间，我被要求为这些大型项目提供支持。这几乎总是涉及某种形式的数据库交互，并且由 Microsoft 技术主导，我们选择的数据库当然是 Microsoft SQL Server。这使得以非 Microsoft 语言开发支持应用程序成为一个真正的问题。

我看过 Smalltalk、Go、Scheme 和 Factor，我总是得出相同的结论，即不可能或不值得付出努力，因为 ODBC 对这些语言的支持太脆弱而无法使用。

我研究了通过 Web 服务创建数据访问层的可能性。但是，这并不总是理想的情况，并且在大量数据的情况下，这可能会成为瓶颈。

我可以克隆数据并将其导入更开放的数据库系统，然后用我选择的语言进行开发。这似乎是一个非常不必要的步骤，也意味着我不再使用原始数据。

其他 C# .Net 开发人员如何以非 Microsoft 语言开发严重依赖 Microsoft 堆栈的支持应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:47:06.827

您可以考虑使用您选择的任何语言的本机驱动程序，而不是采用 ODBC 路线。这可能会更好地“适合”该语言的方法。例如，Python 有[pymssql](http://code.google.com/p/pymssql/)和 cx_oracle，它们每个都更符合语言的约定，而不是试图强迫它成为 ODBC 的最小公分母。我不熟悉您列出的语言（不清楚您是否将这个问题仅限于这些语言），但我怀疑那里存在类似的情况。

[FreeTDS](http://freetds.schemamania.org/)在 SQL Server 访问的讨论中也出现了很多，但主要是从 Linux 的角度来看。

另一个变体：如果您使用使用 .Net DLR 的东西，例如[IronPython](http://ironpython.net/)或[IronRuby](http://www.ironruby.net/)，您可以使用 .Net Framework 和它的 ADO.NET 库，同时仍然应用新的语言方法。

# c++ - 内存竞技场和内存分配器有什么区别？

> ID：13381123
> 
> 赞同：5
> 
> 时间：2012-11-14T14:49:19.020
> 
> 标签：c++, memory, memory-management

这更像是一个语义问题而不是编码问题......

内存竞技场和内存分配器有什么区别？

我在 C++ 中工作，我看到一些内存管理库使用“内存竞技场”、“内存分配器”等概念，有时两者都在同一个库中。

我知道分配器是什么；我只是不确定内存领域是什么，如果它不仅仅是分配器的另一个词。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T14:51:44.687

“Memory arena”通常是指一个大的内存块（或块的集合），从中分配较小的块。“池”这个词也常用于这样的事情。

“内存分配器”通常是指确定如何从竞技场分配内存的软件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T14:52:08.967

严格来说，“内存竞技场”是“内存分配器”从中分配内存的内存池。但是看到“memory arena”被用作“memory allocator”的同义词，我不会感到惊讶。

# jsoup - 使用 Jsoup 从任何网页中提取文本

> ID：13381125
> 
> 赞同：1
> 
> 时间：2012-11-14T14:49:32.070
> 
> 标签：jsoup

我正在尝试从网页[http://www.zomato.com/mumbai/starbucks-coffee-fort](http://www.zomato.com/mumbai/starbucks-coffee-fort)中提取文本，包括原始中的任何换行符、空格。[为此，我在Jsoup](https://stackoverflow.com/questions/10177867/jsoup-extracting-text)的答案的帮助下编写了以下代码- 提取文本：

```
Document doc = Jsoup.connect("http://www.zomato.com/mumbai/starbucks-coffee-fort").get();
Elements div = doc.select("div");
for (Element d : div) {
  for (Node nd : d.childNodes()) {
    System.out.println(nd.toString());
  }
} 
```

但它没有按预期工作。实际上它应该打印所有子节点的文本以及文本。此外，我希望此代码有点通用化，以便它可以从任何网页中提取文本。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T22:25:15.757

Jsoup 是用于从任何网页抓取文本的通用工具；）

这种情况的解决方案：

```
Document doc = Jsoup.connect("http://www.zomato.com/mumbai/starbucks-coffee-fort").get();
Elements div = doc.select("div.res-review-body > div > p");
for (Element paragraph : div) {
    System.out.println(paragraph.text());
} 
```

结果：

```
Firstly I would say it was tough to even start writing a review for a brand like 'Starbucks'.
(...) 
```

# java - JTextPane - 在没有 JScrollPane 的情况下滚动可见文本

> ID：13381126
> 
> 赞同：0
> 
> 时间：2012-11-14T14:49:39.913
> 
> 标签：java, swing, jtextpane

因此，在我的应用程序中，我使用了一个自定义组件，它是 JTextPane 的扩展。我需要扩展它的样式。我已经设法关闭自动换行，因为该组件旨在充当 JTextField，即不是多行。

然而，我面临的问题是，如果文本跨越可见区域之外，则当不在 JScrollpane 内使用时，JTextPane 似乎不能很好地处理非文字包装的文本。可见区域之外的文本不能像使用 JTextField 时那样移动。

我不想使用 JScrollpane，因为我有很多假定 JTextComponent 的遗留代码。

所以我的问题是，有没有办法使可见区域与插入符号位置保持一致，以便在键入到达可见边缘或尝试选择跨越可见区域的文本时，该文本会像 JTextField 那样移动到视图中。

下面是我的问题的一个工作示例。它在 JTextPane 上方显示了一个 JTextField。如果您在文本字段中键入内容，您会看到可见区域随着文本移动。如果您在文本窗格中键入，则不会发生这种情况。

另外，我在 java 7 中这样做。

提前致谢。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.text.*;

public class NoAutoScroll {
    public NoAutoScroll() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JTextField textField = new JTextField();
        textField.setText("This text field can show the text outside the visible area.");
        textField.setPreferredSize(new Dimension(150, 30));

        JTextPane textPane = new JTextPane();
        textPane.setEditorKit(new MyEditorKit());
        textPane.setText("This text pane cannot show the text outside the visible area.");
        textPane.setPreferredSize(new Dimension(150, 30));
        textPane.setBorder(textField.getBorder());

        JPanel mainPanel = new JPanel(new GridBagLayout());
        GridBagConstraints constraints = new GridBagConstraints();
        constraints.gridx = 0;
        constraints.gridy = 0;
        mainPanel.add(new JLabel("JTextField"), constraints);
        constraints.gridx = 1;
        constraints.gridy = 0;
        mainPanel.add(textField, constraints);
        constraints.gridx = 0;
        constraints.gridy = 1;
        mainPanel.add(new JLabel("JTextPane"), constraints);
        constraints.gridx = 1;
        constraints.gridy = 1;
        mainPanel.add(textPane, constraints);

        frame.add(mainPanel);
        frame.pack();
        frame.setVisible(true);
    }

    public class MyViewFactory implements ViewFactory {

        private final class NonBreakingLabelView extends LabelView {
            private NonBreakingLabelView(Element elem) {
                super(elem);
            }

            @Override
            public int getBreakWeight(int axis, float pos, float len){
                return BadBreakWeight;
            }
        }

        @Override
        public View create(final Element elem) {
            String kind = elem.getName();
            if (kind != null) {
                if (kind.equals(AbstractDocument.ContentElementName)) {
                return new NonBreakingLabelView(elem);
                } else if (kind.equals(AbstractDocument.ParagraphElementName)) {
                    return new ParagraphView(elem);
                } else if (kind.equals(AbstractDocument.SectionElementName)) {
                return new BoxView(elem, View.Y_AXIS);
                } else if (kind.equals(StyleConstants.ComponentElementName)) {
                return new ComponentView(elem);
                } else if (kind.equals(StyleConstants.IconElementName)) {
                return new IconView(elem);
                }
            }

            // default to text display
            return new LabelView(elem);
        }
    }

    @SuppressWarnings("serial")
    public class MyEditorKit extends StyledEditorKit {

        @Override
        public ViewFactory getViewFactory() {
            return new MyViewFactory();
        }
    }

    public static void main(String[] args) {
        new NoAutoScroll();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:57:01.387

正确的方法

*   没有就不可能`JScrollPane`，你可以隐藏两者`JScrollBars`

肮脏的黑客

*   持有两个`Document`s, second 和 visible 只会`ScrollIncrememt`从添加到 的鼠标事件中生成`JTextPane`，但是没有理由使用`JTextPane`,`JLabel`而是使用,

# c# - 防止Winform被最大化？

> ID：13381127
> 
> 赞同：10
> 
> 时间：2012-11-14T14:49:41.453
> 
> 标签：c#, .net, windows, winforms

我想防止我的桌面应用程序被最大化。它不应该以任何方式最大化 - 通过双击标题栏，或通过单击键盘上的 Windows + 向上箭头等

-> 我禁用了**MaximizeBox**和**MinimizeBox**。
-> 我还为我的 WinForm 设置了**MaximumSize**和**MinimumSize**

当我按下**Windows + 向上**箭头时，我的 win 表单移动到屏幕的左上角，我的意思是它被最大化了。所以请告诉我有什么方法可以防止这种事情发生......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T11:54:30.110

这里实际上有两个完全不同的问题在起作用。诚然，从功能的角度来看，它们看起来基本相同，但从实现模型的角度来看（正如 Windows 本身自然会使用的那样），它们是不相关的。

[`MaximizeBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.maximizebox.aspx)正如其他人回答的那样，您可以通过将其属性设置为来防止表单最大化`false`。这将删除窗体底层窗口上的[`WS_MAXIMIZEBOX`样式](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632600.aspx)，从而阻止窗口管理器允许窗口最大化。它禁用窗口标题栏上的最大化框（最小化框和关闭框之间的那个），禁用窗口/系统菜单上的“最大化”选项，以及我可能忘记的任何其他最大化窗口的方法。

`Win`但是，这与+键盘快捷键无关`↑`，它调用[Aero Snap](http://windows.microsoft.com/en-us/windows7/products/features/snap)就像将窗口拖动到位于屏幕边缘的神奇位置一样。窗口管理器，无论是由于错误还是 Aero Snap 的功能，仍然允许您有效地“最大化”不应最大化的窗口。设置`MaximizeBox`属性不会影响这一点，所以如果你真的想阻止用户以这种方式改变窗口的大小，你需要禁用 Aero Snap 对窗口的影响。

不幸的是，没有任何方法（至少据我所知）以编程方式在每个窗口或每个进程的基础上禁用 Aero Snap（另请参阅[此相关问题](https://stackoverflow.com/questions/2470685/how-do-you-disable-aero-snap-in-an-application)）。如果用户启用了 Aero Snap，您可以假设他们希望该行为和应用程序不应该篡改它。您唯一能做的就是完全禁用调整窗口大小。在 WinForms 中，您可以通过将[`FormBorderStyle`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formborderstyle.aspx)属性设置为下列之一来做到这一点：`FormBorderStyle.FixedSingle`、`FormBorderStyle.Fixed3D`或`FormBorderStyle.FixedDialog`. 如果您仍希望以其他方式调整窗口大小，则需要编写代码来手动处理，这不是一件特别容易的事。

因此，我鼓励您非常仔细地考虑这是否真的有必要。所有其他不可最大化的窗口只需通过设置`MaximizeBox`属性（或在其 UI 框架中执行等效操作）即可完成此操作，这意味着它们仍然可以通过 Aero Snap 有效地最大化。如果这适用于其他所有人的窗口，包括那些属于 Windows 本身的窗口，那么它可能对您有用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-14T14:51:43.833

该表单有一个名为`MaximizeBox`- 将其设置为 false 的属性。

关于您的第二个问题，请查看[此问题及其](https://stackoverflow.com/questions/400113/best-way-to-implement-keyboard-shortcuts-in-winforms)在 WinForms 中实现键盘快捷键的最佳方法的答案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-14T15:55:20.773

```
this.FormBorderStyle = FormBorderStyle.FixedSingle; 
```

That line of code will prevent the user from re-sizing the Window.

In addition to that you hide/disable the maximize box and that should do what you asked.

To disable the maximize box use this

```
this.MaximizeBox = false; 
```

To hide the maximize box use this as well

```
this.MinimizeBox = false; 
```

If Maximize and Minimize are set to false the buttons disappear.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-10T03:42:47.600

将 MaximumSize 设置为等于 Size（或某个大小）至少可以阻止窗口全屏显示。它仍然捕捉到左上角，但至少它仍然是一个窗口并且看起来正确 - 就像它是 Windows 而不是你的程序是愚蠢的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-23T16:59:26.503

您可以通过设置防止窗口对齐到左上角：

```
private void toolbox_Move(object sender, EventArgs e)
{
    this.WindowState = FormWindowState.Normal;
} 
```

在表单的移动事件中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-14T15:06:06.867

表单类有一个名为“MaximumBox”的属性，您必须在表单的属性窗口中设置 False...这实际上将禁止以任何方式最大化表单...此外，如果您想控制您的表单您可以使用诸如“MinimumSize、MaximumSize”之类的属性来自行设置它们的值或为MaximumSizeChanged 和MinimumSizeChanged 事件创建事件处理程序...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-26T14:58:58.333

如果您的窗口或应用程序已激活，您可以尝试 RegisterHotKey Win+Up，如果已停用，则取消注册此热键。您必须捕获热键并返回适当的值以防止进一步处理。

看`WM_ACTIVATEAPP`，`WM_ACTIVATE`和`WM_NCACTIVATE`。如果您想为所有窗口禁用 Win+UP，则可以使用第一个。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-08T04:35:06.023

将 formborderstyle 设置为 fixedsingle

```
Maximizebox=false 
```

将maximumsize设置为winform默认大小的大小

例如：如果 size(646,385) 则设置 maximumsize(646,385)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-01T02:00:30.743

您可以做的一件事是将MaximumSize 和MinimumSize 设置为相同的值，但不是0,0。

# jquery - 菜单垂直手风琴jQuery列表更改项目的

> ID：13381130
> 
> 赞同：0
> 
> 时间：2012-11-14T14:49:45.327
> 
> 标签：jquery, menu, accordion

我有一个垂直菜单手风琴，它会展开并在悬停时显示子项，如下面的标记所示：

```
<ul>
    <li><a href=""></a>
        <ul>
            <li><a href=""></a></li>
            <li><a href=""></a></li>
            <li><a href=""></a></li>
        </ul>
    </li>
    <li><a href=""></a>
        <ul>
            <li><a href=""></a></li>
            <li><a href=""></a></li>
            <li><a href=""></a></li>
        </ul>
    </li>
    <li><a href=""></a>
        <ul>
            <li><a href=""></a></li>
            <li><a href=""></a></li>
            <li><a href=""></a></li>
        </ul>
    </li>
</ul> 
```

这是一个例子：http: [//jsfiddle.net/A8CPd/](http://jsfiddle.net/A8CPd/)

问题是当您将鼠标悬停在孩子身上时，它不会保持悬停状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:06:01.907

那么如何附加悬停侦听器存在问题。您仅将侦听器附加到列表项中的锚点。然后，当您尝试悬停其中一个子菜单项时，您将不可避免地离开锚元素，从而导致菜单再次折叠。

相反，我相信这就是您要寻找的：

```
$("#accordion > li").hover(function(){
    $(this).find("ul").slideToggle(300);
}); 
```

现在我们将侦听器附加到整个 li 元素，其中还包含子菜单项。因此，当您将其悬停时，菜单也将保持打开状态。

也更新了你的小提琴：http: [//jsfiddle.net/A8CPd/32/](http://jsfiddle.net/A8CPd/32/)

# function - 按位移位/旋转的方向与符号

> ID：13381131
> 
> 赞同：1
> 
> 时间：2012-11-14T14:49:51.917
> 
> 标签：function, language-agnostic, arguments, bit-shift

对于按位移位（或旋转、循环）操作，我们通常有一个**运算符**，我的意思是其中两个，例如

```
x << n
x >> n 
```

用于按位**左移**或**右移**。`x``n`

我们要定义一个**函数**

```
bitshift(x, n) 
```

在此之前，我们必须确定，正负使用哪个移位——**每个****移位** `n`（或旋转）方向的“符号”是什么。

对此有定义或约定吗？

*（请注意，这个问题与有符号/无符号类型无关）*

### 更新

*另请注意，我不是在询问此功能的实现细节，即使它可能有些相关..*

*在类似 scheme/lisp 的语言中也有类似的功能，例如[ash](http://practical-scheme.net/wiliki/schemexref.cgi?ash)，它们为正数进行左移`n`*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:52:43.047

由于右移*k***位**等于乘以2 **^-k**，而*左移*等于乘以**2^k**，我认为这应该给你一个提示。

**注意：**我之所以支持这种看待方式的原因是，在某种意义上，通常认为乘法比除法*更基本的运算*，尽管您当然可以反过来争论。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T15:00:16.467

您可以使用负数作为参数

例如

x << n

因此，如果您想左移两个位置，则传递 n=2；如果您想右移两个位置，则传递 n=-2。

# scala - scala.concurrent.Promise 的用例是什么？

> ID：13381134
> 
> 赞同：97
> 
> 时间：2012-11-14T14:50:15.513
> 
> 标签：scala, concurrency

我正在阅读[SIP-14](http://docs.scala-lang.org/sips/pending/futures-promises.html)，这个概念`Future`非常有意义且易于理解。但是有两个问题`Promise`：

1.  SIP 说`Depending on the implementation, it may be the case that p.future == p`。怎么会这样？是不是两种不同的类型`Future`？`Promise`

2.  我们什么时候应该使用`Promise`? 示例`producer and consumer`代码：

    ```
    import scala.concurrent.{ future, promise }
    val p = promise[T]
    val f = p.future

    val producer = future {
        val r = produceSomething()
        p success r
        continueDoingSomethingUnrelated()
    }
    val consumer = future {
        startDoingSomething()
        f onSuccess {
            case r => doSomethingWithResult()
        }
    } 
    ```

很容易阅读，但我们真的需要这样写吗？我试图只用 Future 而没有像这样的 Promise 来实现它：

```
val f = future {
   produceSomething()
}

val producer = future {
   continueDoingSomethingUnrelated()
}

startDoingSomething()

val consumer = future {
  f onSuccess {
    case r => doSomethingWithResult()
  }
} 
```

这个和给定的例子有什么区别，是什么让 Promise 成为必要的？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-11-14T22:39:15.623

承诺和未来是互补的概念。Future 是一个值，可以在未来的某个时间被检索到，当事件发生时你可以用它做一些事情。因此，它是计算的读取或输出端点——它是您从中检索值的东西。

以此类推，Promise 是计算的写入端。您创建了一个 Promise，您将在其中放置计算结果，并从该 Promise 中获得一个未来，该未来将用于读取放入 Promise 的结果。当你通过失败或成功完成一个 Promise 时，你将触发所有附加到相关 Future 的行为。

关于您的第一个问题，对于我们的承诺 p 怎么可能`p.future == p`。你可以把它想象成一个单项缓冲区——一个最初是空的容器，你可以在后面存储一个值，该值将永远成为它的内容。现在，根据您的观点，这既是承诺也是未来。对于打算将值写入缓冲区的人来说，这是一个承诺。对于等待将该值放入缓冲区的人来说，这是一个未来。

具体来说，对于 Scala 并发 API，如果您在[这里](https://github.com/scala/scala/blob/70a72beffc128fd5ba5783d92045034f95923e04/src/library/scala/concurrent/Promise.scala)查看 Promise trait，您可以看到 Promise 伴随对象中的方法是如何实现的：

```
object Promise {

  /** Creates a promise object which can be completed with a value.
   *  
   *  @tparam T       the type of the value in the promise
   *  @return         the newly created `Promise` object
   */
  def apply[T](): Promise[T] = new impl.Promise.DefaultPromise[T]()

  /** Creates an already completed Promise with the specified exception.
   *  
   *  @tparam T       the type of the value in the promise
   *  @return         the newly created `Promise` object
   */
  def failed[T](exception: Throwable): Promise[T] = new impl.Promise.KeptPromise[T](Failure(exception))

  /** Creates an already completed Promise with the specified result.
   *  
   *  @tparam T       the type of the value in the promise
   *  @return         the newly created `Promise` object
   */
  def successful[T](result: T): Promise[T] = new impl.Promise.KeptPromise[T](Success(result))

} 
```

现在，可以在[这里](https://github.com/scala/scala/blob/70a72beffc128fd5ba5783d92045034f95923e04/src/library/scala/concurrent/impl/Promise.scala)找到那些承诺的实现，DefaultPromise 和 KeptPromise 。它们都扩展了一个恰好具有相同名称的基本小特征，但它位于不同的包中：

```
private[concurrent] trait Promise[T] extends scala.concurrent.Promise[T] with scala.concurrent.Future[T] {
  def future: this.type = this
} 
```

所以你可以看到他们的意思`p.future == p`。

`DefaultPromise`是我上面提到的缓冲区，而`KeptPromise`是一个缓冲区，其值是从其创建过程中输入的。

关于您的示例，您在那里使用的未来块实际上在幕后创建了一个承诺。让我们看看[这里](https://github.com/scala/scala/blob/70a72beffc128fd5ba5783d92045034f95923e04/src/library/scala/concurrent/package.scala)`future`的定义：

```
def future[T](body: =>T)(implicit execctx: ExecutionContext): Future[T] = Future[T](body) 
```

通过遵循方法链，您最终会进入[impl.Future](https://github.com/scala/scala/blob/70a72beffc128fd5ba5783d92045034f95923e04/src/library/scala/concurrent/impl/Future.scala)：

```
private[concurrent] object Future {
  class PromiseCompletingRunnable[T](body: => T) extends Runnable {
    val promise = new Promise.DefaultPromise[T]()

    override def run() = {
      promise complete {
        try Success(body) catch { case NonFatal(e) => Failure(e) }
      }
    }
  }

  def apply[T](body: =>T)(implicit executor: ExecutionContext): scala.concurrent.Future[T] = {
    val runnable = new PromiseCompletingRunnable(body)
    executor.execute(runnable)
    runnable.promise.future
  }
} 
```

因此，如您所见，您从生产者区块中获得的结果被注入到一个承诺中。

**稍后编辑**：

关于现实世界的使用：大多数时候你不会直接处理承诺。如果您将使用执行异步计算的库，那么您将只使用库方法返回的期货。在这种情况下，Promise 是由库创建的——你只是在阅读这些方法的作用。

但是，如果您需要实现自己的异步 API，则必须开始使用它们。假设您需要在 Netty 之上实现一个异步 HTTP 客户端。然后你的代码看起来有点像这样

```
 def makeHTTPCall(request: Request): Future[Response] = {
        val p = Promise[Response]
        registerOnCompleteCallback(buffer => {
            val response = makeResponse(buffer)
            p success response
        })
        p.future
    } 
```

# html - 我需要让我的网站适合屏幕

> ID：13381137
> 
> 赞同：0
> 
> 时间：2012-11-14T14:50:27.860
> 
> 标签：html, css, screen-resolution

我将我的网站创建为固定布局，宽度为 1600 像素，但较小分辨率的网页看起来太大。我应该怎么做才能使它在每个分辨率中看起来都不错？

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:54:20.140

使用相对度量，例如`width: 100%`. 您可以使用`min-width`and来进一步限制这一点`max-width`。

除此之外，您可以[`CSS media queries`](http://cssmediaqueries.com/)用来制作仅在满足某些条件时才适用的样式，例如最小或最大宽度。如果您使用它，您可以更改网站的整体外观和感觉，例如通过在较小的设备上隐藏部分或在较小的设备上从 2 列更改为 1 列文本呈现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:53:03.460

基于百分比的宽度会根据屏幕大小改变宽度，但您也应该使用它`min-width`来确保页面不会变得太薄而破坏您的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:59:16.027

您的选择：

*   使用较窄的固定宽度。保持在 1,000 像素以下是相当安全的，但并不完美
*   改为使用百分比作为页面宽度，但如果您需要为子元素设置宽度以使其看起来正确，这很困难
*   **结合上述方法并在您的 CSS 中使用媒体查询来使您的网站具有响应性。它适合您指定的每个屏幕宽度，并且您可以在每个触发点完全控制布局。**

这是了解响应式网站的绝佳资源 - 这是构建现代网站的方式，因此尽管看起来令人困惑，但您花在上面的每一分钟都是值得的。

[http://bradfrost.github.com/this-is-responsive/resources.html](http://bradfrost.github.com/this-is-responsive/resources.html)

祝你好运。

# eclipse - rcp 应用程序看不到插件

> ID：13381138
> 
> 赞同：0
> 
> 时间：2012-11-14T14:50:36.277
> 
> 标签：eclipse, plugins, rcp

我有一个用 Eclipse 编写的插件，它曾经在给定的 rcp 应用程序上工作，只需将 .jar 文件添加到我的 rcp 应用程序的“plugin”文件夹即可。现在我有一台新机器（win7 64 位，JRE 1.6），并在对项目进行微小更改后尝试导出新的 .jar。现在我的 rcp 应用程序不能再“看到”我的插件了。曾经有 JRE 1.5 amd 的旧机器是 32 位的。如果有人能给我一个提示，我将不胜感激。我一直在尝试解决这个问题 5 天，但没有取得多大成功。非常感谢！问题可能出在午餐配置或 JRE 上！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:19:02.583

可能您需要使用 deltapack 更新 eclipse 以支持 64 位/32 位平台相关 jar。

例子：

[http://archive.eclipse.org/eclipse/downloads/drops/R-3.7.2-201202080800/#DeltaPack](http://archive.eclipse.org/eclipse/downloads/drops/R-3.7.2-201202080800/#DeltaPack)

# facebook - 将打开的图形应用程序与现有页面合并

> ID：13381143
> 
> 赞同：1
> 
> 时间：2012-11-14T14:50:42.447
> 
> 标签：facebook, facebook-like, facebook-opengraph

修复了几个网站上我们的“Like”按钮的一些问题，因为显然您需要从 11 月 7 日起通过 Open Graph 应用程序发布它们？

其中一个要求似乎是为您的应用程序创建一个页面，但我们已经为我们的博客创建了一个 Facebook 页面。无论如何我可以合并它们吗？我认为在我们的默认页面旁边保留一个单独的应用页面没有用吗？

# c - 有一个弹出菜单显示/创建一个对话框？Windows32 编程

> ID：13381151
> 
> 赞同：1
> 
> 时间：2012-11-14T14:51:12.680
> 
> 标签：c, winapi, dialog, popupmenu

到目前为止，我已经看了大约 2 个小时的 MSDN，但我仍然对如何使用对话框感到非常困惑。我试过在谷歌上阅读几个例子，只是更加困惑。

目前我有一个弹出菜单，它的选项只是被选中和取消选中，我在菜单上的最后一项是显示一个对话框，在对话框内我将有一个用于一些单选按钮的组框，但我'我**不确定在哪里创建一个对话框或创建什么样的对话框以由弹出菜单显示。**
它是在 WM_CREATE 消息中制作的吗？我认为它可能就像创建一个窗口一样简单，但它看起来不像？或者它是在我触发弹出菜单项的 WM_COMMAND 中制作的。 **ID_TOOL_TOOLBOX 是应该调用对话框以显示或创建的位置。但我不确定是否要在那里创建它，甚至不确定要制作什么样的对话框。**

或者其他完全不同的地方？

```
case WM_COMMAND:

    case ID_TOOL_POLYGON:
        CheckMenuItem(hMenu, Selection, MF_UNCHECKED);
        Selection = LOWORD(wParam);
        CheckMenuItem(hMenu, Selection, MF_CHECKED);
        if (GetMenuState(hMenu, Selection, MF_BYCOMMAND) == MF_CHECKED)
        {
                MessageBox(hwnd, L"Polygon does nothing this is a test popup msgbox.", L"Works", MB_OK);
        }
        break;

    case ID_TOOL_SELECT:
        CheckMenuItem(hMenu, Selection, MF_UNCHECKED);
        Selection = LOWORD(wParam);
        CheckMenuItem(hMenu, Selection, MF_CHECKED);
        break;

    case ID_TOOL_TOOLBOX: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:02:50.997

这是我们搜索“win32 ShowDialog”时出现的第一个点击：

[http://www.functionx.com/win32/Lesson04.htm](http://www.functionx.com/win32/Lesson04.htm)

> 使用 DialogBox 函数创建一个对话框。它的语法是：
> 
> INT_PTR 对话框（HINSTANCE hInstance，LPCTSTR lpTemplate，HWND hWndParent，DLGPROC lpDialogFunc）；
> 
> 此函数的第一个参数是使用对话框的应用程序的句柄。
> 
> lpTemplate 指定对话框模板。
> 
> hWndParent 是拥有此对话框的父窗口的句柄。
> 
> lpDialofFunc 必须是一个负责创建此对话框的过程。
> 
> 因此，您必须定义一个 CALLBACK 过程，其语法为：
> 
> INT_PTR CALLBACK DialogProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam);

# google-chrome - Chrome 下载页面而不是显示

> ID：13381152
> 
> 赞同：1
> 
> 时间：2012-11-14T14:51:13.290
> 
> 标签：google-chrome, github, download, content-type, bitbucket

我在 github 和 bitbucket 上有一个奇怪的问题。Chrome 偶尔会下载一个页面而不是显示它。如果我取消下载并再次单击，它可以工作。我有一种预感，可能是因为内容类型是 application/x-gzip... 有没有人有类似的经历或解决方案？提前致谢！

**[编辑]：** @genkev：响应 mimetype 是 application/x-gzip。我不知道为什么它以这种方式发送，或者为什么它没有定期显示但要求浏览器下载文件。我不会说它既不是浏览器问题也不是服务器问题，但无论如何它都是（我的）问题。

```
{
  "startedDateTime": "2012-11-29T08:27:08.503Z",
  "time": 3,
  "request": {
    "method": "GET",
    "url": "https://github.com/LearnBoost/socket.io/wiki",
    "httpVersion": "HTTP/1.1",
    "headers": [
      {
        "name": "Accept-Encoding",
        "value": "gzip,deflate,sdch"
      },
      {
        "name": "Accept-Language",
        "value": "de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4"
      },
      {
        "name": "Cookie",
        "value": "uninteresting cookie"
      },
      {
        "name": "Connection",
        "value": "keep-alive"
      },
      {
        "name": "Accept-Charset",
        "value": "ISO-8859-1,utf-8;q=0.7,*;q=0.3"
      },
      {
        "name": "Host",
        "value": "github.com"
      },
      {
        "name": "User-Agent",
        "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11"
      },
      {
        "name": "Accept",
        "value": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
      },
      {
        "name": "Referer",
        "value": "https://github.com/LearnBoost/socket.io/issues"
      }
    ],
    "queryString": [],
    "cookies": [
      "some cookies"
    ],
    "headersSize": 1678,
    "bodySize": 0
  },
  "response": {
    "status": 200,
    "statusText": "OK",
    "httpVersion": "HTTP/0.9",
    "headers": [],
    "cookies": [],
    "content": {
      "size": 0,
      "mimeType": "application/x-gzip",
      "compression": 0
    },
    "redirectURL": "",
    "headersSize": 19,
    "bodySize": 0
  },
  "cache": {},
  "timings": {
    "blocked": 0,
    "dns": -1,
    "connect": -1,
    "send": 0,
    "wait": 0,
    "receive": 1,
    "ssl": -1
  },
  "pageref": "page_2"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T09:34:09.793

绝对是扩展问题。对我来说，造成这种情况的是“Hover Zoom 4.11.3”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:31:48.673

我已经解决了这个问题！它是由 Google Chrome 的 Webbug 1.2.3 FirePHP 扩展引起的。不知道这个插件的未来版本是否也有这个错误。

# postgresql - 使用 PostgreSQL 时的棘手问题

> ID：13381153
> 
> 赞同：11
> 
> 时间：2012-11-14T14:51:18.430
> 
> 标签：postgresql, scala, slick

我在 scala 项目中使用[slick](http://slick.typesafe.com)来查询一些表。

```
 //define table
object Addresses extends Table[Address]("assetxs.address") {
  def id = column[Int]("id", O.PrimaryKey)
  def street = column[String]("street")
  def number = column[String]("number")
  def zipcode = column[String]("zipcode")
  def country = column[String]("country")
  def * = id ~ street ~ number ~ zipcode ~ country <> (Address, Address.unapply _)
} 
```

如果我使用此表的任何查询，它都不起作用（它说它找不到我的表）所以我更进一步并打印出如下查询：

```
implicit val session = Database.forURL("jdbc:postgresql://localhost:5432/postgres", driver = "org.postgresql.Driver", user="postgres", password="postgres").createSession()
      session.withTransaction{
        val query = Query(Addresses)
        println("Addresses: " + query.selectStatement)
} 
```

我注意到 schema.table 的名称出现在`""`所以语句是：

```
select x2."id", x2."street", x2."number", x2."zipcode", x2."country"
from "assetxs.address" x2 
```

这当然不起作用（我尝试在 PostgreSQL 工具中运行它，我需要`""`从**表名**中删除才能让它工作。

您能否告诉我`""`在使用表名时是否有任何不包含在任何查询中的巧妙选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T09:33:20.633

最后我能够解决这个问题。

我只指定表名：

`object Addresses extends Table[Address]("address")`

并在搜索时更改我的 postgresql conf 以包含我的模式（似乎 slick`public`只在模式上查找）：

`search_path = '"$user",assetxs,public'`

现在它可以工作了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T15:21:10.520

您已将架构放入表名中。包含点字符的（带引号的）表名在 SQL 中是有效的，但这不是您想要的。您必须单独指定架构：

```
object Addresses extends Table[Address](Some("assetxs"), "address") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-25T01:22:43.863

我想使用 liquibase 和 slick 同时使用 H2（测试）和 Postgres（生产）时找到的解决方案。

*   在您的 Slick Table 对象中坚持使用小写字母

> 类 MyTable(tag: Tag) 扩展 Table[MyRecord](tag, Some("my_schema"), "my_table")

*   在您的 H2 url 配置中，您需要指定 DATABASE_TO_UPPER=false （这可以防止表和列名被大写）并在 INIT 模式周围加上引号（这可以防止模式被大写）

> url = jdbc:h2:mem:test;MODE=PostgreSQL;DATABASE_TO_UPPER=false;INIT=如果不存在则创建模式 \"my_schema\"\;SET SCHEMA \"my_schema\""

*   在 liquibase 脚本中指定模式名称时，还必须引用它，以便 H2 不会尝试将其大写。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-08T22:46:03.227

由于这个问题仍然困扰着 Scala 新手（比如我），我进行了一些小型研究，发现这样的问题`application.conf`在 Slick 3.1.1 和 PostgreSQL 9.5 上是成功的：

```
postgres.devenv = {
  url = "jdbc:postgresql://localhost:5432/dbname?currentSchema=customSchema"
  user = "user"
  password = "password"
  driver = org.postgresql.Driver
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-14T17:43:29.747

您只是使用了错误的驱动程序，请检查您的导入

导入 scala.slick.driver.PostgresDriver.simple._

# javascript - 在 While 循环中嵌套 if/else

> ID：13381154
> 
> 赞同：0
> 
> 时间：2012-11-14T14:51:19.140
> 
> 标签：javascript, loops

我正在尝试制作一个程序来确定输入的成绩是通过还是失败。当用户输入 -1 时它会停止。一旦用户输入-1，它必须打印出通过分数的平均值和总分数。虽然它并没有真正正常工作。我究竟做错了什么？

```
var countTotal=0;   //variable to store total grades.
var countPassing=0; //variable to store total passing scores.
var x= 0;       //variable to contain sum of all passing scores.
var grade=parseInt(prompt("Please enter a grade."));

while (grade != (-1*1)) 
{
    if (grade > 65) {
        grade=parseInt(prompt("Please enter a grade."));
        document.write(grade + " is passing.<br>");
        x=x+grade;
        countPassing++;
    }
    else {
        grade=parseInt(prompt("Please enter a grade."));
        document.write(grade + " is failing.<br>");
    }

    countTotal++;
}

//Loop ends

document.write("Total # of grades: " + countTotal);         //Prints out total # of passing scores.
document.write("Passing average: " + ((x)/(countPassing))); //Prints out average of all passing scores. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:03:44.210

尝试手动完成它。用户进入第一级。然后循环开始。立即，你要求一个新的成绩，丢弃第一个。如果将提示向下移动到循环的末尾，它应该可以工作。像这样：

```
while (grade != (-1*1)) 
{
    if (grade > 65) {
        document.write(grade + " is passing.<br>");
        x=x+grade;
        countPassing++;
    }
    else {
        document.write(grade + " is failing.<br>");
    }

    grade=parseInt(prompt("Please enter a grade."));
    countTotal++;
} 
```

# javascript - 用 JavaScript 从字符串中去除 div 和所有子元素替换 RegEx

> ID：13381155
> 
> 赞同：2
> 
> 时间：2012-11-14T14:51:19.540
> 
> 标签：javascript, jquery, html, regex, replace

我有一个 HTML 块存储在一个名为 的变量中`address_form`，在我想要删除或替换它的一部分的那个 HTML 块中。我要替换的部分是一个 ID 为`address_container`.

我的 RegEx 显然有问题，我正在使用 replace 函数，因为它不起作用：

`var tempStr = address_form.replace('/\<div id=\"#address_container\"\>.*<\/div\>/', '');`

我只是想在一个字符串中替换一个字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:55:13.090

既然你已经用 jQuery 标记了你的问题，那么我建议你使用 jQuery 来完成这项任务。就像是：

```
var tempStr = jQuery(address_from).remove('#address_container').html(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:15:30.223

你的正则表达式是错误的。改用这个：

```
address_form.replace(/<div id=["-]#address_container["-]>.*<\/div>/,''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:55:07.143

不要那样做，只需获取 div 的内容并将该 div 的父级替换为内容即可。

所以

```
var tempStr = $('#address_container').html(); // or text()
$('#parent_of_address_container').html(tempStr); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T11:31:15.507

来自@RidgeRunner

> 使用单个 JavaScript 正则表达式正确匹配 DIV 元素（其本身可能包含其他 DIV 元素）是不可能的。这是因为 js 正则表达式引擎不支持匹配嵌套结构。

# java - SQLException: 用户 ' ' JAVA 登录失败

> ID：13381159
> 
> 赞同：1
> 
> 时间：2012-11-14T14:51:33.687
> 
> 标签：java, sql-server, jdbc, login

我正在尝试连接 MS SQL 数据库，但每次尝试时都会出现此错误：

> SQLException: 用户 '' 登录失败。用户未与受信任的 SQL Server 连接关联。ClientConnectionId：86b1da77-8eff-4c3f-badb-5ab75efcbab4 SQLState：S0001 VendorError：18452

我已经在登录设置中配置了“SQL Server 身份验证”和“启用”。如果有人能解决这个问题，我将不胜感激。

这是我的代码：

```
public static void main(String[] args) {
    String database="sisqualPONTO";
String connectionUrl = "jdbc:sqlserver://localhost:40000"+";DatabaseName=" + database+ ";integratedSecurity=true;";
String pass="****";
String user="sa";

try {
  Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
  Connection conn = DriverManager.getConnection(connectionUrl,user,pass);
  System.out.println("Success");
}
catch (SQLException ex) {
  System.out.println("SQLException: " + ex.getMessage());
  System.out.println("SQLState: " + ex.getSQLState());
  System.out.println("VendorError: " + ex.getErrorCode());
}
catch (Exception e) {
  System.out.println("Error: " + e);
}
} 
```

}

提前致谢。肿块

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T14:54:46.587

`'integratedSecurity=true'`从您的连接 URL 中删除。

# c# - c#中的监控工具拆分gui和后端代码

> ID：13381160
> 
> 赞同：4
> 
> 时间：2012-11-14T14:51:35.643
> 
> 标签：c#, visual-studio-2010

我有一个监视某些设备的应用程序。我可以向设备发送一个字符串，并从设备接收文本。

我需要的是制作一个记录设备发送/接收的所有数据的日志文件（只是 .txt）。这应该在应用程序中实时显示。

目前我所做的是将日志写入富文本框并从那里写入文件。但我想从 gui 中拆分后端代码（与设备交互并创建日志文件）。这使得与设备的通信接口更加便携。

在我思考这个过程时，我面临一个问题：如何更新我的应用程序中的日志？我可以想到这个选项：制作一个计时器并按时间间隔进行 gui 更新。但这并不可怕。在两者之间有一个缓冲区会很好，如果缓冲区已更改，则更新 gui。

有关如何正确执行此操作的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:55:04.703

也许你可以让你的日志内容[IObservable](http://msdn.microsoft.com/en-us/library/dd990377.aspx)并让你的 UI 订阅它的变化？

另一种选择是实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)并使用 PropertyChangedEventHandler 来通知更改。

这是一个代码片段，向您展示如何使用 NotifyPropertyChanged 进行操作：

```
using System.ComponentModel;
public class YourClass : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

    protected void AddLogLine(String log)
    {
        // do your process
        NotifyPropertyChanged("Log");
    }
} 
```

要注册更改，您只需执行以下操作（在您的 UI 构造函数中）：

```
YourClassInstance.PropertyChanged += new PropertyChangedEventHandler(MyFunctionToHandleLogChanges); 
```

注意：如果您更改 YourClassInstance，请确保正确删除并再次添加处理程序

然后更新您的 UI，再次在您的 UI 类中：

```
void MyFunctionToHandleLogChanges(object sender, PropertyChangedEventArgs e)
{
    if (e.PropertyName == "Log")
    {
        // Update UI
    }
} 
```

# xls - 使用 XLS 文件存储 JBehave 故事

> ID：13381165
> 
> 赞同：0
> 
> 时间：2012-11-14T14:51:44.193
> 
> 标签：xls, jbehave

我的新项目基于 etsy 示例中的 JBehave、Selenium、Maven 和 Spring：[https ://github.com/jbehave/jbehave-tutorial/tree/master/etsy-selenium/java-spring](https://github.com/jbehave/jbehave-tutorial/tree/master/etsy-selenium/java-spring)

我对 JBehave 真的很陌生，我想知道是否有办法让它从 XLS 文件中读取故事？

我认为与返回故事名称的 String[] storyPaths() 方法有关，但我不知道 JBehave 如何管理它们的内容。

非常感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:10:58.670

我需要更改 storyPaths() 方法才能阅读故事标题。

我也有我的答案：我需要从 org.jbehave.core.io.LoadFromClasspath 或 org.jbehave.core.io.LoadFromURL 类扩展来获取故事内容。

# javascript - 使用 PhoneGap/JavaScript 获取文件 mime 类型

> ID：13381167
> 
> 赞同：1
> 
> 时间：2012-11-14T14:52:01.773
> 
> 标签：javascript, android, cordova, mime-types

使用 PhoneGap 是否可以在本地文件系统中获取文件的 mime 类型？

我的应用程序的一部分从我们服务器上的远程 URL 下载文件并将其保存到 Android 下载文件夹。然后，我使用 WebIntent 插件打开文件，但这需要的选项之一是 mime 类型。

[除了这里](http://www.html5rocks.com/en/tutorials/file/dndfiles/ "这里")，我在 API 文档或 Google 中找不到任何东西，但这与表单更相关。

有没有人尝试过这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:53:59.380

像这样的东西可以在 Android 上运行，但 YMMV 可以在其他平台上运行：

```
var medFile = new MediaFile("empty.txt", "file:///mnt/sdcard/empty.txt");
console.log("file path = " + medFile.fullPath);
medFile.getFormatData(function(metadata) {
    console.log("mimeType = " + metadata.type);
}, function() {
    console.log("fail");
}); 
```

metadata.type 将是您的 mime 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-11T12:48:35.307

```
 function getType(file_URI) {
        window.resolveLocalFileSystemURI(file_URI, function(fileEntry) {
            fileEntry.file(function(filee) {
                alert(filee.type); //THIS IS MIME TYPE
            }, function() {
                alert('error getting MIME type');
            });

        }, onError);
    } 
```

# build - 递归/嵌套构建系统？

> ID：13381169
> 
> 赞同：1
> 
> 时间：2012-11-14T14:52:06.033
> 
> 标签：build, makefile

是否存在具有以下标准的现有构建系统？

*   可嵌套/递归。即，没有像 CMake 或（非递归）make 或几乎所有其他构建系统那样的“顶级”构建文件。
*   源内构建。这是构建系统完全可嵌套/递归所必需的。
*   多种语言的自动依赖扫描
*   具有声明式而非命令式语法的配置文件
*   配置文件语法支持添加任意自定义构建规则
*   没有 IDE 项目生成膨胀
*   跨平台实施没有阻碍
*   基于哈希的更改检测（或至少〜某事）比时间戳更好
*   免费软件

基本上，我想要的东西能够胜任在系统范围内管理软件构建依赖项的任务，但仍然是极简且高效的。我想要一个精神上的继任者，让它被大多数开源世界所采用。什么最接近？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:03:17.860

Tup看起来很有趣...

[http://gittup.org/tup/](http://gittup.org/tup/)

和 djb 重做：

[https://github.com/apenwarr/redo/](https://github.com/apenwarr/redo/)

并摇动：

[http://hackage.haskell.org/package/shake](http://hackage.haskell.org/package/shake)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:26:30.490

ninja 基础设施看起来很有趣。它不是一个独立的构建系统，但也许它会促使某人编写一个非常优雅的前端。也许支持它作为后端的 CMake 会加速它的采用。

[http://martine.github.com/ninja/](http://martine.github.com/ninja/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:02:36.023

Makepp 接近了，我已经使用它了。不过，由于某种原因，它没有太大的吸引力……潜在的缺点：

*   用 perl 而不是系统编程语言实现，所以对破解它感兴趣的开发人员更少？
*   不合适，所以很难认真对待
*   从 Make 继承语法；并没有真正执行一种正确的做事方式
*   缓慢的构建
*   子目录不从父目录继承信息

# php - 包含 {{calendar}} 的字符串，但需要它来调用 calendar.php

> ID：13381170
> 
> 赞同：0
> 
> 时间：2012-11-14T14:52:06.977
> 
> 标签：php, preg-replace, preg-match, preg-replace-callback

我将 HTML 内容存储在具有文本数据类型的 MySQL 字段中，并且我使用 ckeditor 作为 WYSIWYG 编辑器来创建存储在 MySQL 中的 HTML。我正在寻找一种方法让用户放置某种我可以查找并替换为调用包含文件的字符串。例如：

```
// This string contains the text pulled from mysql
$pageContent = "<p>This page contains a calendar of events</p> {{calendar}} <p>Choose a date or scroll through days to view events.</p>";

// Function needed that changes {{calendar}} to bring in my script calendar.php like include('calendar.php');
// Note that in this example I want to call my script that does the calendar stuff, but maybe I have a script to do a photo gallery which could be {{photogallery}}, or news {{news}}, or whatever...

// Print the $pageContent including the calendar.php contents here
print $pageContent; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:03:35.333

这里有一个小东西，它将获取您的文本（在本例中为`$pageContent`）和一组参数（即 array('calendar' => 'calendar.php')）并包含必要的文件。它目前未经测试，但应该让您朝着正确的方向前进。

```
function parseTemplate($templateText, $params)
{
    foreach ($params as $key => $value)
    {
        ob_start();
        include($value);
        $includeContents = ob_get_contents();
        ob_end_clean();
        $templateText = str_replace('{{'.$key.'}}', $includeContents, $templateText);
    }
    return $templateText;
} 
```

在您的情况下，用法如下：

```
// This string contains the text pulled from mysql
$pageContent = "<p>This page contains a calendar of events</p> {{calendar}} <p>Choose a date or scroll through days to view events.</p>";

$params = array('calendar' => 'calendar.php');
$pageContent = parseTemplate($pageContent, $params);

// print the $pageContent including the calendar.php contents here
print $pageContent; 
```

您也可以使用相同的想法来简单地替换文本而不是包含文件：

```
function parseTemplateText($templateText, $params)
{
    foreach ($params as $key => $value)
    {
        $templateText = str_replace('{{'.$key.'}}', $value, $templateText);
    }
    return $templateText;
} 
```

# sql - 获取由最小值和最大值标识的组中的连续值

> ID：13381173
> 
> 赞同：5
> 
> 时间：2012-11-14T14:52:16.303
> 
> 标签：sql, sql-server, sql-server-2008, group-by

我正在尝试从表中获取连续值组。我一直试图找到一个关于这个的例子，但我无法在我的案例中使用它。

这是我的一张桌子的一小部分。

```
 CardID      CardSerial                  CardStateID AssignUserID Denomination
    ----------- --------------------------- ----------- ------------ -------------
    2685680     214026002                   3           81           10
    2685681     214026003                   3           81           10
    2685682     214026004                   3           81           10
    2685683     214026005                   3           81           10
    2685684     214026006                   3           81           10
    2685778     214026100                   3           81           10
    2685779     214026101                   3           81           10
    2685780     214026102                   3           81           10
    2685781     214026103                   3           81           10
    2685782     214026104                   3           81           10
    2685878     214026200                   3           81           10
    2685879     214026201                   3           81           10
    2685880     214026202                   3           81           10
    2685881     214026203                   3           81           10
    2685882     214026204                   3           81           10
    2685883     214026205                   3           81           10
    2685884     214026206                   3           81           10 
```

我期待的结果是：

```
 min value       max value       cant     Den
    --------------- --------------- -------- ----
    214026002       214026006        5        10
    214026100       214026104        5        10
    214026200       214026206        7        10 
```

对我来说，困难的部分是获得一个组值来进行类似的查询

```
select min(cardSerial), max(cardSerial), count(*), Den
from Cards
group by Den, GROUPING_VALUE_GENERATED 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:57:09.530

假设这`cardSerial`是一个 INT 或其他数字数据类型......

```
WITH
  sequenced AS 
(
  SELECT
    ROW_NUMBER() OVER (PARTITION BY Denomination ORDER BY cardSerial) AS sequence_id,
    *
  FROM
    Cards
)
SELECT
  min(cardSerial),
  max(cardSerial),
  count(*),
  Denomination
FROM
  Sequenced
GROUP BY
  Denomination,
  cardSerial - sequence_id
ORDER BY
  Denomination,
  cardSerial - sequence_id 
```

如果它不是数字数据类型，请在查询中将其转换为适当大的数字数据类型以允许`cardSerial - sequence_id`工作。

计算如何`cardSerial - sequence_id`给出有意义的分组...

```
214026002 - 01 = 214026001
214026003 - 02 = 214026001
214026004 - 03 = 214026001
214026005 - 04 = 214026001
214026006 - 05 = 214026001
214026100 - 06 = 214026094
214026101 - 07 = 214026094
214026102 - 08 = 214026094
214026103 - 09 = 214026094
214026104 - 10 = 214026094
214026200 - 11 = 214026189
214026201 - 12 = 214026189
214026202 - 13 = 214026189
214026203 - 14 = 214026189
214026204 - 15 = 214026189
214026205 - 16 = 214026189
214026206 - 17 = 214026189 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-11T15:39:04.653

这个查询非常有用。我们可以针对各个组更新最小值吗？

表中的示例为“Min_CardSerial”，该列的更新值为“214026002”，用于 214026002 和 214026006 之间的行，214026100 用于 214026100 和 214026104 之间的行，依此类推。

# sitecore - Sitecore 存储表单字段标签的最简洁方式

> ID：13381174
> 
> 赞同：0
> 
> 时间：2012-11-14T14:52:16.073
> 
> 标签：sitecore

我正在研究一个 Sitecore 实施，其中整个网站有许多表单（在你问之前，WFFM 是不可能的！）。

我的问题是，存储表单标签的最佳方式是什么？我目前的想法是使用字典结构并按键访问表单字段标签。这种方法的问题是当编辑者想要改变同一字段的标签时；例如，在表单 X 上，名字字段是“First Name”，然后在其他地方可能是“Forename”，或者它可能是一个地方的必填字段（带星号），另一个地方是可选的。我真的不想开始使用名为“FirstNameWithAsterisk”和“FirstNameWithoutAsterisk”等的字典项目。

我的另一个想法是将表单标签简单地存储在名称值列表字段中。然后可以使用名称/值来填充该字段，并且编辑者可以自由使用他们喜欢的任何表单标签，而不会无意中编辑在其他地方使用的字典条目。

在页面模板上有表单字段之前，我一直在走这条路，但恕我直言，这是一个非常糟糕的解决方案，所以我不会有兴趣再次走这条路。

**编辑**

为了确认，此站点的表格数量有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:49:40.403

我会采用字典方法。如果您的论点是它可能会有所不同，那么这就是在逻辑上将它们分开的原因。因此，听起来您有自定义表单和要构建的有限表单集（请确认）。也就是说，像这样构建你的字典，例如

*   表格1
    *   Form1-名字
*   表格2
    *   Form2-名字

或其他对您有意义的命名约定。

从逻辑上讲，它是每个唯一表单的“名字字段”，但从技术上讲，它们是两个独立的不相关的东西，因此您需要两个字典项。您可以通过您提到的命名约定来做到这一点，但不要根据内容命名它们（因为该值会更改！），而是根据它适用于/使用它的位置命名它，因为您的代码将静态参考钥匙。

所以我会说`FirstNameWithAsterisk`and`FirstNameWithoutAsterisk`是坏名字，因为它们与内容以及它是否有星号有关。取而代之的是，通过它适用的形式或内容的其他一般概念来命名它。

**编辑**：由于可以将相同的表单组件添加到多个页面，因此这是[该演示组件的数据源的](http://firebreaksice.com/using-the-datasource-field-with-sitecore-sublayouts/)完美案例。只需为所有表单字段创建一个模板，然后创建任意数量的实例，并为绑定到页面的每个表单，将其数据源指向具有所需字段值的相应项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T23:06:34.513

您知道 Sitecore 中有一个内置的字典，对吧？看一下系统/字典。然后通过调用 Sitecore.Globalization.Translate.Text() 从中获取值。

如果您确定不支持多种语言......那么您可以想象选择此功能并使字典项目的不同语言版本实际上成为您想要的字段标签的不同值。

# android - Android avd 管理器根本不工作

> ID：13381177
> 
> 赞同：3
> 
> 时间：2012-11-14T14:52:26.837
> 
> 标签：android

我最近想我会尝试创建一个 android 应用程序我下载了 Android sdk 包并将其解压缩到我的 c: 驱动器（但我没有安装它的安装屏幕）然后打开 eclipse 并单击 sdk 管理器Android软件包这一切都很好，按照推荐下载了所有软件包，早在2.2姜饼，但这就是我的问题开始的地方我试图打开模拟器管理器来创建模拟器但什么也没发生它没有说错误或任何事情只是什么也没做，所以我什至无法尝试创建模拟器任何建议都会非常感谢，因为我说 sdk 管理器工作正常，但 avd 管理器根本不会做任何事情

# maven - 使用配置文件来控制构建哪些 Maven 模块

> ID：13381179
> 
> 赞同：43
> 
> 时间：2012-11-14T14:52:35.973
> 
> 标签：maven, profiles

我的 maven POM.xml 中有以下 XML：

```
<profiles>
  <profile>
     <id>default</id>
     <activation>
        <activeByDefault>true</activeByDefault>
        <property>
           <name>default</name>
           <value>!disabled</value>
        </property>
     </activation>
     <modules>
        <module>m1</module>
        <module>m2</module>
        <module>m3</module>
     </modules>
  </profile>
  <profile>
     <id>x</id>
     <modules>
        <module>m1</module>
     </modules>
  </profile>
</profiles> 
```

我想要实现的是：

1.  当我运行时`mvn install`，我希望它构建 m1、m2 和 m3 项目。

2.  当我运行时`mvn install -Px`，我希望**它只**构建 m1。

我目前的问题是，使用上面的代码，选项 2 构建了所有 m1、m2 和 m3。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-14T16:36:29.490

找到解决方案的人，首先定义“x”配置文件和“默认”，它工作正常（疯狂的 Maven ！！）。这是最终结果：

```
 <profiles>
      <!-- DO NOT CHANGE THE *ORDER* IN WHICH THESE PROFILES ARE DEFINED! -->
      <profile>
         <id>x</id>
         <modules>
            <module>m1</module>
         </modules>
      </profile>
      <profile>
         <id>default</id>
         <activation>
            <activeByDefault>true</activeByDefault>
         </activation>
         <modules>
            <module>m1</module>
            <module>m2</module>
            <module>m3</module>
         </modules>
      </profile>
   </profiles> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T14:54:30.897

`runByDefault`您可以从命令行禁用已设置为 true 的 Maven 配置文件，如下所示：

`mvn install -P !default`

注意，这需要 Maven 版本 2.0.10。

* * *

## 回答 #3

> 赞同：-12
> 
> 时间：2015-02-20T04:40:41.057

只需在 -P 之后添加一个空格，该命令的语法为

```
mvn install -P x 
```

不像你正在使用

```
mvn install -Px 
```

看一看[Maven——profiles 简介](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)

# xml - 如何通过 xslt 转换 xml -> JXML？

> ID：13381185
> 
> 赞同：1
> 
> 时间：2012-11-14T14:52:46.580
> 
> 标签：xml, xslt, xslt-1.0, jsonx

我必须使用 xsl 进行转换以生成数组、对象、json 字符串。我无法生成数组。实际上我的要求是我必须将 XML 转换为 JXML 并将 JXML 转换为 json 。我有通用的xslt for jxml to json..现在我需要将 XML 转换为 JXML 的通用解决方案。作为参考，我正在生成示例 xml 的 .. IP

```
<planexml>        
    <def/>
    <xyz>
        <Number>123</Number>
        <name>sen</name>
        <c>
            <type/>
        </c>
        <c>
            <type/>
        </c>
        <e>
            <wsx/>
        </e>
        <e>
            <wsx/>
        </e>
    </xyz>
        <xyz>
        <Number>123</Number>
        <name>sen</name>
        <c>
            <type/>
        </c>
        <c>
            <type/>
        </c>
        <e>
            <wsx/>
        </e>
        <e>
            <wsx/>
        </e>
    </xyz>
<planexml> 
```

结果应该是

```
<json:object xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
    <json:object name="planexml">
        <json:string name="def"/>
        <json:array name="xyz">
            <json:object>
                <json:string name="number"/>
                <json:string name="name"/>
                <json:array name="c">
                    <json:object>
                        <json:string name="type"/>
                    </json:object>
                    <json:object>
                        <json:string name="type"/>
                    </json:object>
                </json:array>
                <json:array name="e">
                    <json:object>
                        <json:string name="wsx"/>
                    </json:object>
                    <json:object>
                        <json:string name="wsx"/>
                    </json:object>
                </json:array>
            </json:object>
            <json:object>
                <json:string name="number"/>
                <json:string name="name"/>
                <json:array name="c">
                    <json:object>
                        <json:string name="type"/>
                    </json:object>
                    <json:object>
                        <json:string name="type"/>
                    </json:object>
                </json:array>
                <json:array name="e">
                    <json:object>
                        <json:string name="wsx"/>
                    </json:object>
                    <json:object>
                        <json:string name="wsx"/>
                    </json:object>
                </json:array>
            </json:object>
        </json:array>
    </json:object>
</json:object> 
```

需要尽快解决.. :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:52:36.787

您的示例输出会排除字符串的值（如果存在）。我假设这是不正确的，因为您可能希望在转换为 JSON 时保留这些值。如果你不想要它们，你可以修改下面的字符串模板。

### XML 到 JXML XSL

```
<xsl:template match="/" mode="#default">
    <json:object>
        <xsl:apply-templates/>
    </json:object>
</xsl:template>

<xsl:template match="*" mode="#default">
    <xsl:param name="display-name" select="true()" />
    <json:object>
        <xsl:if test="$display-name">
            <xsl:attribute name="name" select="name()" />
        </xsl:if>
        <xsl:apply-templates select="*[not(*)]" mode="string"/>            
        <xsl:for-each select="*[*]">
            <xsl:variable name="name" select="name()"/>
            <xsl:if test="not(preceding-sibling::*[name() eq $name])">
                <xsl:apply-templates select="." mode="array"/>
            </xsl:if>
        </xsl:for-each>
    </json:object>
</xsl:template>

<xsl:template match="*[not(*)]" mode="string">
    <json:string name="{name()}">
        <xsl:value-of select="."/>
    </json:string>
</xsl:template>

<xsl:template match="*" mode="array">
    <xsl:variable name="array-name" select="name()"/>
    <json:array name="{$array-name}">
        <xsl:for-each select=".|following-sibling::*[name() eq $array-name]">
            <xsl:apply-templates mode="#default" select=".">
                <xsl:with-param name="display-name" select="false()"/>
            </xsl:apply-templates>
        </xsl:for-each>
    </json:array>
</xsl:template> 
```

### 输出

```
<?xml version="1.0" encoding="UTF-8"?>
<json:object xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
    <json:object name="planexml">
        <json:string name="def"/>
        <json:array name="xyz">
            <json:object>
                <json:string name="Number">123</json:string>
                <json:string name="name">sen</json:string>
                <json:array name="c">
                    <json:object>
                        <json:string name="type"/>
                    </json:object>
                    <json:object>
                        <json:string name="type"/>
                    </json:object>
                </json:array>
                <json:array name="e">
                    <json:object>
                        <json:string name="wsx"/>
                    </json:object>
                    <json:object>
                        <json:string name="wsx"/>
                    </json:object>
                </json:array>
            </json:object>
            <json:object>
                <json:string name="Number">123</json:string>
                <json:string name="name">sen</json:string>
                <json:array name="c">
                    <json:object>
                        <json:string name="type"/>
                    </json:object>
                    <json:object>
                        <json:string name="type"/>
                    </json:object>
                </json:array>
                <json:array name="e">
                    <json:object>
                        <json:string name="wsx"/>
                    </json:object>
                    <json:object>
                        <json:string name="wsx"/>
                    </json:object>
                </json:array>
            </json:object>
        </json:array>
    </json:object>
</json:object> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:37:27.130

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        <xsl:element name="json:object">
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="*[*]">
        <xsl:param name="nodeName" select="name()"/>
        <xsl:variable name="firstNodeName" select="name(*[1])"/>
        <xsl:choose>
            <xsl:when test="count(../*[name(current()) = name()]) &gt;1">
                <xsl:variable name="el" select="name()"/>
                <xsl:if test="not(following-sibling::*[name()=$el])">
                    <json:array name="{name()}">
                        <xsl:for-each select="../*[name()=$el]">
                            <xsl:if test="position()!=1">
                                <json:object>
                                    <xsl:choose>
                                        <xsl:when test="not(child::node())">
                                            <xsl:text>null</xsl:text>
                                        </xsl:when>
                                        <xsl:otherwise>
                                            <xsl:apply-templates>
                                                <xsl:with-param name="nodeName" select="''"/>
                                            </xsl:apply-templates>
                                        </xsl:otherwise>
                                    </xsl:choose>
                                </json:object>
                            </xsl:if>
                            <xsl:if test="position()=1">
                                <json:object>
                                    <xsl:choose>
                                        <xsl:when test="not(child::node())">
                                            <xsl:text>null</xsl:text>
                                        </xsl:when>
                                        <xsl:otherwise>
                                            <xsl:apply-templates>
                                                <xsl:with-param name="nodeName" select="''"/>
                                            </xsl:apply-templates>
                                        </xsl:otherwise>
                                    </xsl:choose>
                                </json:object>
                            </xsl:if>
                        </xsl:for-each>
                    </json:array>
                </xsl:if>
            </xsl:when>
            <xsl:otherwise>
                <json:object name="{name()}">
                    <xsl:apply-templates/>
                </json:object>
            </xsl:otherwise>
        </xsl:choose>
        <!--</xsl:element>-->
    </xsl:template>
    <xsl:template match="*[not(*)]">
        <xsl:element name="json:string">
            <xsl:attribute name="name"><xsl:value-of select="name()"/></xsl:attribute>
            <xsl:value-of select="text()"/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

这也提供了预期的输出

# android-sqlite - RuntimeException 从 SQLite 数据库中检索数据

> ID：13381186
> 
> 赞同：1
> 
> 时间：2012-11-14T14:52:49.663
> 
> 标签：android-sqlite

我已经将一个数据库导入到 SQLite (testing.sqllite) 中，该数据库是在 Firefox 插件的 SQLliteManager 中创建的。我把它放在data/data//databases/中。

当我尝试从数据库中检索数据时，我遇到了运行时异常。这是我的代码...

**数据库助手.java**

```
import java.io.FileOutputStream;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DataBaseHelper extends SQLiteOpenHelper{

       public static final String KEY_ROWID = "keyno";
       public static final String DESTINATION = "Destination";
       public static final String CITY = "City";
       public static final String COUNTRY = "Country";
       public static final String IMG1 = "Img1";

    //The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/com.world.destinations/databases/";

    private static String DB_NAME = "testing";

    private static String DATABASE_TABLE = "Master";

    private DataBaseHelper ourHelper;

    private SQLiteDatabase myDataBase; 

    private final Context myContext;

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     */
    public DataBaseHelper(Context context) {

        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }   

  /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }else{

            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();

            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    public DataBaseHelper open() throws SQLiteException {

        ourHelper = new DataBaseHelper(myContext);
        myDataBase = ourHelper.getWritableDatabase();
        return this;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }
    public String getData() {
        // TODO Auto-generated method stub
        String[] columns = new String[]{KEY_ROWID, DESTINATION, CITY, COUNTRY, PERIOD, TYPE, CURRENCY, ELEVATION, BRIEF, HIGHLIGHTS, IMG_MAIN};
        Cursor c = myDataBase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String result = "";
        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(DESTINATION);
        int iCity = c.getColumnIndex(CITY);
        int iCountry = c.getColumnIndex(COUNTRY);
        int iImgmain = c.getColumnIndex(IMG1);

        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + c.getString(iRow) + " " + c.getString(iName) + " " + c.getString(iCity) + " " + c.getString(iCountry) + " " + c.getString(iImgmain) + "\n";

        }

        return result;
    } 

} 
```

这是我的**ShowData.java**

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class ShowData extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.showdata);
        TextView tv = (TextView)findViewById(R.id.textView1);
        DataBaseHelper info = new DataBaseHelper(this);
        info.open();
        String data = info.getData();
        info.close();
        tv.setText(data);

    }

} 
```

这是一个例外......

```
11-14 20:19:29.099: E/AndroidRuntime(933): FATAL EXCEPTION: main
11-14 20:19:29.099: E/AndroidRuntime(933): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.world.destinations/com.world.destinations.ShowData}: android.database.sqlite.SQLiteException: no such table: Master (code 1): , while compiling: SELECT keyno, Destination, City, Country, Img_Main FROM Master
11-14 20:19:29.099: E/AndroidRuntime(933):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-14 20:19:29.099: E/AndroidRuntime(933):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-14 20:19:29.099: E/AndroidRuntime(933):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-14 20:19:29.099: E/AndroidRuntime(933):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-14 20:19:29.099: E/AndroidRuntime(933):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-14 20:19:29.099: E/AndroidRuntime(933):  at android.os.Looper.loop(Looper.java:137)
11-14 20:19:29.099: E/AndroidRuntime(933):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-14 20:19:29.099: E/AndroidRuntime(933):  at java.lang.reflect.Method.invokeNative(Native Method)
11-14 20:19:29.099: E/AndroidRuntime(933):  at java.lang.reflect.Method.invoke(Method.java:511)
11-14 20:19:29.099: E/AndroidRuntime(933):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 
```

有人可以帮我解决我哪里出错了。非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:36:42.633

您正在尝试查询一个空数据库。

从堆栈跟踪：

> SQLiteException: no such table: Master (code 1): , while compile: SELECT keyno, Destination, City, Country, Img_Main FROM Master

我的猜测是您将文件放在 sd 卡上的错误目录中，并且 SQLite 在其他地方创建了一个空数据库。

# java - 从另一个包访问文件

> ID：13381187
> 
> 赞同：1
> 
> 时间：2012-11-14T14:52:54.463
> 
> 标签：java, package, inputstreamreader

我的情况如下：我有包，`packA`我`classA`有`file.txt`。`packB.resources`在`classA`我使用它来访问`file.txt`：

```
InputStreamReader in = new InputStreamReader(new FileInputStream("/packB/resources/file.txt"), "UTF-8"); 
```

但不幸的是，它向我展示了一个例外：

> java.io.FileNotFoundException : \packB\resources\file.txt（未找到指定路径）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:01:07.507

FileInputStream 类根据文件系统路径打开文件系统中的文件。

但是您显然想要做的是打开通过类路径定位的资源。你应该使用`Class.getResourceAsStream(String)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:01:51.687

如果您`file.txt`与应用程序打包在一起，则根本不应该使用文件系统进行访问。应用程序可能被打包到 jar 中，因此文件不在文件系统中。您应该将其作为资源访问：

```
InputStreamReader in = new InputStreamReader(getClass().getResourceAsStream("/packB/resources/file.txt"), "UTF-8")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:00:58.470

使用类似下面的东西。注意，/ 用作包名前的前缀。假定 YourClass 在 packA 中。

```
InputStream stream = YourClass.class.getResourceAsStream("/packB/resources/file.txt"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:08:40.573

`/`您应该从文件路径中删除尾随并使用`classA.class.getClassLoader().getResourceAsStream("packB/resources/file.txt")`.

# php - JQuery Mobile：提交表单

> ID：13381188
> 
> 赞同：0
> 
> 时间：2012-11-14T14:52:57.947
> 
> 标签：php, jquery-mobile, form-submit

我用 Jquery Mobile 开发了一个移动网站。我有一个[发送邮件的表格](https://www.dropbox.com/s/wt6j0c5o43yo9ls/bug_jquery_mobile2.png "图 1")。点击“发送”，弹出加载页面。此弹出窗口不会消失。 [图 2](https://www.dropbox.com/s/ybjxuktgz3lq8yl/bug_jquery_mobile1.png "图 2") 但邮件已发送。我不明白如何解决这个问题。感谢你们对我的帮助。

编辑：链接图片2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:59:52.113

$("#myPopupDiv").popup("关闭")

请参阅 jQueryTutorial 文档：http: [//jquerymobile.com/test/docs/pages/popup/index.html](http://jquerymobile.com/test/docs/pages/popup/index.html)

# c# - 使用不同的配置调试同一项目的 2+ 个实例

> ID：13381189
> 
> 赞同：2
> 
> 时间：2012-11-14T14:52:59.260
> 
> 标签：c#, visual-studio, debugging, visual-studio-2012, visual-studio-debugging

我正在编写一个分布式应用程序，并且测试要求我一次运行多个实例。

是否可以调试同一个项目的两个或多个不同的实例（最简单，传递不同的命令行选项）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:55:11.353

是的，附加到两个进程（调试-> 附加到进程）。它们将出现在进程调试窗口下，并且它们的线程将在线程窗口中按进程分组/引导。

# java - 从 Java 服务器到浏览器的实时音频流 (Flash,HTML5)

> ID：13381193
> 
> 赞同：3
> 
> 时间：2012-11-14T14:53:07.407
> 
> 标签：java, audio, streaming

对于一个项目，我需要能够将实时音频从 Java 服务器流式传输到客户端上的浏览器。我的第一个猜测是使用带有 Flash 播放器的 RTMP，第二个猜测是使用 HTML5 音频标签。但到目前为止，我还没有找到任何有用的东西（比如图书馆），那么有人对如何做到这一点有任何指示吗？

设置如下：声音来自 VoIP 服务器作为一堆 PCM 样本。从那里，它必须到达客户端，而通常只有一个客户端监听一个流。所以我需要能够向多个客户端发送许多 VoIP 流，一种简单的身份验证形式也很好（比如流所在的令牌或秘密 URL）。

到目前为止，我已经查看了 Red5（在我看来只是一对多流）并搜索了基于 Java 的 RTMP 库。任何帮助将不胜感激！

# php - 加载给定菜单的标题及其链接？

> ID：13381198
> 
> 赞同：-2
> 
> 时间：2012-11-14T14:53:19.697
> 
> 标签：php, joomla

我已经阅读了这个输出所有菜单及其属性的[问题。](https://stackoverflow.com/a/3788975/1052402)如何获取一个特定菜单（我有三个）的所有标题及其链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:18:46.873

```
// Get default menu - JMenu object
$name='blah'; //Name of your menu alias here
$menu = JFactory::getApplication()->getMenu($name);

// Get menu items - array with menu items
$items = $menu->getMenu();

// Look through the menu structure, once you understand it
// do a loop and find the link that you need.
var_dump($items); 
```

希望这可以帮助

# .net - 域中映射网络驱动器的 IIS8 权限

> ID：13381202
> 
> 赞同：0
> 
> 时间：2012-11-14T14:53:49.860
> 
> 标签：.net, iis, permissions

在我的 PC (Windows 8) 上，我以域用户身份登录，我的 PC 上没有本地用户。我安装了 IIS8、Visual Studio 2012 等来开发 .NET Web 应用程序。

我已经使用默认设置设置了 IIS；.NET v4.5 DefaultAppPool 以 ApplicationPoolIdentity 作为标识。

我的项目在 V: 上，这是一个映射的网络驱动器。我设置了一个指向 V:\Website1 的网站，打开此网站时收到错误消息：

```
HTTP 500 Cannot read configuration file; \\?\V:\Website1\web.config 
```

哪个用户需要 V:\Website1 目录的读取权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:59:07.060

添加用户：IIS AppPool\[AppPoolName]

请参阅此链接：[http ://www.iis.net/learn/manage/configuring-security/application-pool-identities](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T08:04:26.560

您是否尝试过使用 unc 路径？ [http://forums.iis.net/t/1189399.aspx](http://forums.iis.net/t/1189399.aspx)

# windows-installer - NetBeans 平台 (RCP) 应用程序安装程序，设置到期日期？

> ID：13381204
> 
> 赞同：1
> 
> 时间：2012-11-14T14:53:59.750
> 
> 标签：windows-installer, rcp, netbeans-platform

是否可以为 NetBeans 平台生成的应用程序安装程序（windows - exe）设置到期日期？例如，我希望安装程序在创建之日起 30 天后无法使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:00:25.837

您可以更改安装程序向导。

打开项目

```
\program files\NetBeans{yourversion}\harness\nbi\stub\ext\components\products\HelloWorld 
```

吉尔卡

# mysql - 我刚刚修复了一个 mysql 管理库并获取了信息页面，当它重定向到登录页面时，它在第 33 行给了我一个解析错误

> ID：13381206
> 
> 赞同：1
> 
> 时间：2012-11-14T14:54:14.653
> 
> 标签：mysql, parsing

```
33.}if (!function_exists("GetSQLValueString")) {
34.function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue 35.= "") 
36.{
37\.  if (PHP_VERSION < 6) {
38\.    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
39\.  } 
```

# c# - 通过 Web url 启动 ClickOnce 应用程序在 Windows 8 中不起作用

> ID：13381207
> 
> 赞同：2
> 
> 时间：2012-11-14T14:54:16.890
> 
> 标签：c#, windows-8, clickonce

我们有一个应用程序套件，它通过启动器启动子应用程序。启动器通过带有查询字符串的 ClickOnce Url 调用其他应用程序。我们这样做的方式是通过以下代码：

```
 WebBrowser webBrowser1 = new WebBrowser();
 webBrowser1.Navigate(url); 
```

我们使用以下代码在客户端应用程序中使用查询字符串：

```
 string url = AppDomain.CurrentDomain.SetupInformation.ActivationArguments.ActivationData[0];
            if (!isNetworkDeployed)
            {
                return false;
            }
            string queryString = (new Uri(url)).Query; 
```

在 Windows 8 中，queryString 似乎总是为空。

然后根据 MSDN 我做了以下更改来获取查询字符串：

```
 private NameValueCollection GetQueryStringParameters()
    {
        NameValueCollection nameValueTable = new NameValueCollection();

        if (ApplicationDeployment.IsNetworkDeployed)
        {
            string queryString = ApplicationDeployment.CurrentDeployment.ActivationUri.Query;
        }
        return (nameValueTable);
    } 
```

当我通过浏览器（Internet Explorer）调用应用程序时，这似乎正在工作。但是当通过 Web 浏览器控件调用相同的 url 时，它会给出 clickonce 错误。

对此有什么想法吗？

谢谢，阿尼夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:25:28.790

我在使用 WebBrowser 类并尝试导航到 Windows 8 上的 clickonce .application 文件时看到了同样的问题。.application 文件将下载然后在本地运行，导致找不到文件错误。在 Windows 7 及更低版本中，.application 文件在服务器上执行，运行良好。

解决方法是在部署 clickonce 包时向 mage 添加 -ProviderURL 参数。ProviderURL 的值是 .application 文件的完全限定路径。

# api - 在 Aptana 3 网页上映射 Rest Services GIS API 未实现

> ID：13381209
> 
> 赞同：1
> 
> 时间：2012-11-14T14:54:20.943
> 
> 标签：api, rest, service, aptana, arcgis

我正在使用 Aptana Studio 3 创建地图，我将函数 init 地址替换为链接到我想要表示的地图所需的适当地址。当我在 Aptana Studio 3 上运行它时，它让我看到了一个未完成的构建，其中没有地图，只有地图区域的轮廓，以及底部的说明性用途。我尝试使用 ArcGIS 资源中心的其他示例，如果我通过 Aptana 或通过根目录实现它，则只能获得相同的结果。

> 创建地图
> 
> ```
> <script type="text/javascript" src="http://serverapi.arcgisonline.com/jsapi/arcgis/?v=3.2"></script>
> <script type="text/javascript">
>   dojo.require("esri.map");
> 
>   function init() {
>     var map = new esri.Map("map");
> 
>     var imageParameters = new esri.layers.ImageParameters();
>     imageParameters.format = "jpeg";  //set the image type to PNG24, note default is PNG8.
>     //Takes a URL to a non cached map service.
>     var dynamicMapServiceLayer = new esri.layers.ArcGISDynamicMapServiceLayer("http://maps.nbtexas.org/ArcGIS/rest/services/Maps/NewBraunfelsBaseMap/MapServer", 
> ```
> 
> {"不透明度":0.5, "imageParameters":imageParameters}); map.addLayer(dynamicMapServiceLayer); }
> 
> ```
>  dojo.addOnLoad(init);
> </script>   </head>   <body class="claro">
> <div id="map" style="width:900px; height:600px; border:1px solid #000;"></div>
> Creates a map and adds an ArcGISDynamicMapServiceLayer.<br />
> Map navigation using mouse:
> <ul>
>   <li>Drag to pan</li>
>   <li>SHIFT + Click to recenter</li>
>   <li>SHIFT + Drag to zoom in</li>
>   <li>SHIFT + CTRL + Drag to zoom out</li>
>   <li>Mouse Scroll Forward to zoom in</li>
>   <li>Mouse Scroll Backward to zoom out</li>
>   <li>Use Arrow keys to pan</li>
>   <li>+ key to zoom in a level</li>
>   <li>- key to zoom out a level</li>
>   <li>Double Click to Center and Zoom in</li>
> </ul>   </body> </html> 
> ```

# javascript - 访问函数在单独的 .js 文件中与 .js 文件定义

> ID：13381210
> 
> 赞同：1
> 
> 时间：2012-11-14T14:54:23.383
> 
> 标签：javascript, function, loading

我已经看到了很多关于将 .js 文件加载到 HTML 文件中的问题，我知道该怎么做。但是，假设我有文件“classlist.js”。如何在另一个 javascript 文件中使用该 javascript 文件中定义的类？我不断看到建议使用的答案

```
<script type="text/javascript" src="filepath"></script> 
```

句法。但是，当在 .js 文件中使用时，它会在“<”上引发语法错误，因此我认为此代码无效。

那么，如何利用在单独的 .js 文件中定义的 .js 文件中的函数……有效且高效（如果有的话）？

编辑：我将为将来澄清一些事情，因为我对 Javascript 还是很陌生，而且看起来还有许多我什至不知道的其他因素在起作用。

我有两个 .js 文件，其中一个声明的类是另一个文件中类的扩展。我想在网页中使用扩展类，我想我必须将原始类加载到第二个 .js 文件中，然后将该 .js 文件加载到 HTML 文件中。我没有完全在 HTML 之外进行编程。

很抱歉有任何误解，希望这个帖子对将来的其他人有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:55:45.450

假设您在 Web 浏览器中讨论 javascript，所有 js 文件都加载到 html 文件中，通常是 index.html。您需要使用脚本标签以正确的顺序**在该 html 文件中**加载 javascript ，而不是在 javascript 文件中。所以如果文件B需要文件A中的东西，你需要先加载文件A，这意味着将加载文件A的脚本标签放在加载文件B的脚本标签之前。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T15:00:03.980

两个答案：

### 非浏览器

如果您在非浏览器环境（NodeJS、RingoJS、SilkJS、Rhino 或其他任何一种）中使用 JavaScript，答案取决于环境——但其中许多使用[CommonJS`require`机制](http://wiki.commonjs.org/wiki/Modules/1.1)。例如：

```
// Get access to public symbols in foo.js
var foo = require("foo.js");

// Use the `bar` function exported by foo.js
foo.bar(); 
```

### 浏览器

**如果**您在浏览器中使用 JavaScript，您可以将`script`标签与您在 HTML 中引用的标签一样，按照它们应该被处理的顺序放置（因此，依赖于其他脚本中定义的内容的脚本应该包含在它们依赖的脚本之后在）。

如果您想在页面加载时间方面最大化效率，请在服务器上将脚本组合在一起（可能还缩小/压缩/打包它们）并仅使用一个`script`标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:57:17.097

您必须在需要它的`classlist.js`任何其他元素之前将引用放在您的 HTML 文件（而不是 Javascript 文件）中。`SCRIPT`例如，在“head”元素中：

```
<html>
<head>
  <script src="testclass.js"></script>
  <script src="file_using_testclass.js"></script>
  <script>
    var tc = new TestClass();
  </script>
</head> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:00:58.257

The answers posted above should do the trick however since you mentioned doing it efficiently you can consider taking a look at javascript module based loaders like require js( [http://requirejs.org/](http://requirejs.org/) ) based on AMD

# python - 保存我多次使用的列表的长度会更好吗？

> ID：13381213
> 
> 赞同：2
> 
> 时间：2012-11-14T14:54:33.827
> 
> 标签：python, list

我知道内联，并且从我检查的内容来看，它不是由 Python 的编译器完成的。

我的问题是：python的编译器是否有任何优化可以转换：

```
print myList.__len__()
for i in range(0, myList.__len__()):
    print i + myList.__len__() 
```

到

```
l = myList.__len__()
print l
for i in range(0, l):
    print i + l 
```

那么它是由编译器完成的吗？
如果不是：自己做值得吗？

奖金问题（不那么相关）：我喜欢有很多函数（更好的可读性恕我直言）......就像Python中没有内联一样，这是要避免的事情（很多函数）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T14:57:25.763

不，没有。`dis`您可以通过使用模块将代码编译为字节码来检查 Python 的功能：

```
>>> def test():
...     print myList.__len__()
...     for i in range(0, myList.__len__()):
...         print i + myList.__len__()
... 
>>> import dis
>>> dis.dis(test)
  2           0 LOAD_GLOBAL              0 (myList)
              3 LOAD_ATTR                1 (__len__)
              6 CALL_FUNCTION            0
              9 PRINT_ITEM          
             10 PRINT_NEWLINE       

  3          11 SETUP_LOOP              44 (to 58)
             14 LOAD_GLOBAL              2 (range)
             17 LOAD_CONST               1 (0)
             20 LOAD_GLOBAL              0 (myList)
             23 LOAD_ATTR                1 (__len__)
             26 CALL_FUNCTION            0
             29 CALL_FUNCTION            2
             32 GET_ITER            
        >>   33 FOR_ITER                21 (to 57)
             36 STORE_FAST               0 (i)

  4          39 LOAD_FAST                0 (i)
             42 LOAD_GLOBAL              0 (myList)
             45 LOAD_ATTR                1 (__len__)
             48 CALL_FUNCTION            0
             51 BINARY_ADD          
             52 PRINT_ITEM          
             53 PRINT_NEWLINE       
             54 JUMP_ABSOLUTE           33
        >>   57 POP_BLOCK           
        >>   58 LOAD_CONST               0 (None)
             61 RETURN_VALUE 
```

如您所见，`__len__`每次都会查找并调用该属性。

Python 无法知道给定方法在调用之间会返回什么，该`__len__`方法也不例外。如果 python 试图通过*假设*调用之间返回的值相同来优化它，你会遇到无数不同的问题，我们甚至还没有尝试使用多线程。

请注意，您最好使用`len(myList)`，而不是直接调用`__len__()`钩子：

```
print len(myList)
for i in xrange(len(myList):
    print i + len(myList) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:59:24.093

不，您询问的优化不是由 CPython 编译器完成的。事实上，CPython 编译器几乎没有进行任何优化。

亲自查看，`import dis`并使用您所询问的代码反汇编一个函数：`dis.dis(func)`.

没有优化的原因是，一个属性（甚至是类似的方法`__len__`）在下次访问时完全有可能成为一个完全不同的对象。当然，这种情况很少发生，但 Python 支持它。

属性访问确实会消耗时间，因此存储对您将重复使用的属性的引用（尤其是在局部变量中）可以使您的代码运行得更快。但是，它会降低可读性，所以我会等到您知道给定的代码段是瓶颈后再应用它。在您的情况下，打印所花费的时间很容易压倒属性访问。

归根结底，如果性能是最重要的，那么您首先会使用 Python 以外的东西，不是吗？

# erlang - Erlang 代码来测量执行操作所花费的时间？

> ID：13381218
> 
> 赞同：9
> 
> 时间：2012-11-14T14:54:42.097
> 
> 标签：erlang

有人可以向我指出一些 erlang 代码，它可以让我计算运行某些代码需要多长时间吗？

我还没有看到可用的 erlang 库？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-14T15:13:16.353

您可以使用该[`erlang:statistics`](http://www.erlang.org/doc/man/erlang.html#statistics-1)功能。

这在 Joe Armstrong 的 Programming Erlang 书 (p141) 中使用。

例如

```
yourfun() ->

    statistics(runtime),
    statistics(wall_clock),

    % your code here

    {_, Time1} = statistics(runtime),
    {_, Time2} = statistics(wall_clock),
    U1 = Time1 * 1000,
    U2 = Time2 * 1000,
    io:format("Code time=~p (~p) microseconds~n",
    [U1,U2]). 
```

在此示例`U1`中是 CPU 时间，并且`U2`是总经过时间（挂钟时间）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-14T15:03:09.407

有[定时器](http://www.erlang.org/doc/man/timer.html)库；检查[tc/[1-3]](http://www.erlang.org/doc/man/timer.html#tc-1)。

您还可以使用[erlang:now/0](http://erlang.org/doc/man/erlang.html#now-0)收集时间戳，然后计算持续时间（[now_diff/2](http://www.erlang.org/doc/man/timer.html#now_diff-2)对此非常有用）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-14T14:58:28.740

```
 Take a look at timer:tc(Module, Function, Arguments) 
```

# cocoa-touch - TextView - “编辑开始时清除”选项在哪里？

> ID：13381221
> 
> 赞同：1
> 
> 时间：2012-11-14T14:54:45.950
> 
> 标签：cocoa-touch, textview, textfield

TextFields 有这个非常有用的选项，“编辑开始时清除”，但似乎在 TextViews 中找不到。有没有等价物？如果不是，那么批准的解决方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:45:21.783

然后你应该创建一个自定义 TextView 子类。你可以在[这里找到一个。](https://stackoverflow.com/questions/1328638/placeholder-in-uitextview)

# html - bgcolor 属性是如何计算的？

> ID：13381226
> 
> 赞同：42
> 
> 时间：2012-11-14T14:54:57.097
> 
> 标签：html, colors

> **可能重复：**
> [为什么 HTML 认为“chucknorris”是一种颜色？](https://stackoverflow.com/questions/8318911/why-does-html-think-chucknorris-is-a-color)

财产是如何`bgcolor`计算的？

当我使用以下 html 代码时...

```
<body bgcolor="#Deine Mutter hat eine Farbe und die ist grün."></body> 
```

...我得到的是以下颜色。

![#Deine Mutter hat eine Farbe und die ist grün。](../Images/6c5b4fe801535d1ed1aaa671e530ec4e.png)

顺便说一句：当我尝试在 CSS 中使用它时，它不会工作并且会应用标准颜色：

```
body{
    color: #IchwillGOLD;
} 
```

为什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-14T15:37:40.020

我的第一次尝试是对错误的一点尝试，虽然我发现了系统的一些有趣的特性，但这还不足以形成一个答案。接下来，我将注意力转向了标准。我认为这是标准的原因是我在三种不同的浏览器上测试了它，它们实际上都做了同样的事情。使用标准我发现会发生什么：

1.  所有不是十六进制的字符都被零替换（所以只剩下零、1-9 和 ae）
2.  字符串在末尾补零为三的倍数
3.  然后将字符串分成三个相等的部分，每个部分代表一种颜色
4.  如果结果字符串超过 8 个字符，则取每个字符串的最后 8 个字符
5.  只要每个字符串都以零开头，就会从每个字符串中删除第一个字符（此特定字符串不会发生，因为它以`De`
6.  前两个字符取自这些字符串中的每一个，并转换为一个数字，用作颜色的组成部分之一

这样你会看到你`00FA00`得到`Deine Mutter hat eine Farbe und die ist grün.`

html5 标准更准确地描述了该过程，实际上在这里描述了更多案例：http: [//www.w3.org/TR/html5/common-microsyntaxes.html#colors](http://www.w3.org/TR/html5/common-microsyntaxes.html#colors)在“解析旧颜色值的规则”下

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-14T16:30:24.207

正如我在评论中所说，HTMLParser 将其添加为 CSS 属性，并且正如 Jasper 已经回答的那样，它是由规范。

**执行**

Webkit 解析 HTMLParser.cpp 中的 html，如果 Parser 是 inBody，它会将 bgColor 属性添加为 HTMLBodyElement.cpp 中的 CssColor

```
// Color parsing that matches HTML's "rules for parsing a legacy color value"
void HTMLElement::addHTMLColorToStyle(StylePropertySet* style, CSSPropertyID propertyID, const String& attributeValue)
{
    // An empty string doesn't apply a color. (One containing only whitespace does, which is why this check occurs before stripping.)
    if (attributeValue.isEmpty())
        return;

    String colorString = attributeValue.stripWhiteSpace();

    // "transparent" doesn't apply a color either.
    if (equalIgnoringCase(colorString, "transparent"))
        return;

    // If the string is a named CSS color or a 3/6-digit hex color, use that.
    Color parsedColor(colorString);
    if (!parsedColor.isValid())
        parsedColor.setRGB(parseColorStringWithCrazyLegacyRules(colorString));

    style->setProperty(propertyID, cssValuePool().createColorValue(parsedColor.rgb()));
} 
```

您很有可能以这种方法结束：

```
static RGBA32 parseColorStringWithCrazyLegacyRules(const String& colorString) 
```

我认为它是为了支持这样的传统颜色：body bgcolor=ff0000（[Mozilla Gecko Test](http://code.metager.de/source/xref/mozilla/firefox/browser/components/thumbnails/test/background_red.html)）。

1.  跳过前导 #
2.  抓取前 128 个字符，将非十六进制字符替换为 0\. 1120
3.  非 BMP 字符被替换为“00”，因为它们在字符串中显示为两个“字符”。
4.  如果没有数字返回颜色黑色
5.  将数字分成三个部分，然后搜索每个部分的最后 8 位。

[Webkit/HTMLElement.cpp:parseColorStringWithCrazyLegacyRules](http://code.metager.de/source/xref/WebKit/Source/WebCore/html/HTMLElement.cpp#parseColorStringWithCrazyLegacyRules)的代码：

```
static RGBA32 parseColorStringWithCrazyLegacyRules(const String& colorString)
{
    // Per spec, only look at the first 128 digits of the string.
    const size_t maxColorLength = 128;
    // We'll pad the buffer with two extra 0s later, so reserve two more than the max.
    Vector<char, maxColorLength+2> digitBuffer;
    size_t i = 0;
    // Skip a leading #.
    if (colorString[0] == '#')
        i = 1;

    // Grab the first 128 characters, replacing non-hex characters with 0.
    // Non-BMP characters are replaced with "00" due to them appearing as two "characters" in the String.
    for (; i < colorString.length() && digitBuffer.size() < maxColorLength; i++) {
        if (!isASCIIHexDigit(colorString[i]))
            digitBuffer.append('0');
        else
            digitBuffer.append(colorString[i]);
    }

    if (!digitBuffer.size())
        return Color::black;

    // Pad the buffer out to at least the next multiple of three in size.
    digitBuffer.append('0');
    digitBuffer.append('0');

    if (digitBuffer.size() < 6)
        return makeRGB(toASCIIHexValue(digitBuffer[0]), toASCIIHexValue(digitBuffer[1]), toASCIIHexValue(digitBuffer[2]));

    // Split the digits into three components, then search the last 8 digits of each component.
    ASSERT(digitBuffer.size() >= 6);
    size_t componentLength = digitBuffer.size() / 3;
    size_t componentSearchWindowLength = min<size_t>(componentLength, 8);
    size_t redIndex = componentLength - componentSearchWindowLength;
    size_t greenIndex = componentLength * 2 - componentSearchWindowLength;
    size_t blueIndex = componentLength * 3 - componentSearchWindowLength;
    // Skip digits until one of them is non-zero, 
    // or we've only got two digits left in the component.
    while (digitBuffer[redIndex] == '0' && digitBuffer[greenIndex] == '0' 
        && digitBuffer[blueIndex] == '0' && (componentLength - redIndex) > 2) {
        redIndex++;
        greenIndex++;
        blueIndex++;
    }
    ASSERT(redIndex + 1 < componentLength);
    ASSERT(greenIndex >= componentLength);
    ASSERT(greenIndex + 1 < componentLength * 2);
    ASSERT(blueIndex >= componentLength * 2);
    ASSERT(blueIndex + 1 < digitBuffer.size());

    int redValue = toASCIIHexValue(digitBuffer[redIndex], digitBuffer[redIndex + 1]);
    int greenValue = toASCIIHexValue(digitBuffer[greenIndex], digitBuffer[greenIndex + 1]);
    int blueValue = toASCIIHexValue(digitBuffer[blueIndex], digitBuffer[blueIndex + 1]);
    return makeRGB(redValue, greenValue, blueValue);
} 
```

# xml - 为什么 Node.ChildNodes.FindNode() 失败但 Node.ChildNodes[] 成功？

> ID：13381241
> 
> 赞同：3
> 
> 时间：2012-11-14T14:55:34.183
> 
> 标签：xml, delphi, dom

谁能解释为什么 ChildNodes.FindNode('') ( *1* ) 失败但 ChildNodes[''] ( *2* ) 成功？==>

代码：

```
const
   cNodeSOAPEnvelope  = 's:Envelope';
   cNodeSOAPBody      = 's:Body';
   cNodeSOAPBodyFault = 's:Fault';
   cNodeSOAPHeader    = 's:Header';
   cNodeFaultCode     = 'faultcode';
   cNodeFaultString   = 'faultstring';

procedure TFrmXMLParsingTests.BtnTestClick(Sender: TObject);
var
   SoapBodyNode,
   SoapBodyFaultNode,
   SoapHeaderNode,
   FaultCodeNode,
   FaultTextNode,
   RootNode: IXmlNode;
begin
   RootNode := XMLDoc.DocumentElement;
   Assert(RootNode.NodeName = cNodeSOAPEnvelope,'Root node is not SOAP envelope');
   SoapBodyNode := RootNode.ChildNodes[cNodeSOAPBody];
   SoapBodyFaultNode := SoapBodyNode.ChildNodes[cNodeSOAPBodyFault];
   if SoapBodyFaultNode <> nil then
   begin
//      FaultCodeNode := SoapBodyFaultNode.ChildNodes.FindNode(cNodeFaultCode);     (*1*)
//      FaultTextNode := SoapBodyFaultNode.ChildNodes.FindNode(cNodeFaultString);   (*1*)
      FaultCodeNode := SoapBodyFaultNode.ChildNodes[cNodeFaultCode];                (*2*) 
      FaultTextNode := SoapBodyFaultNode.ChildNodes[cNodeFaultString];              (*2*) 
      Exit; // Nothing more to do
   end; { fault in body }
   SoapHeaderNode := RootNode.ChildNodes.FindNode(cNodeSOAPHeader);
   Assert(SoapHeaderNode <> nil,'SOAP Header not found');
end; 
```

XML:

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <s:Fault>
         <faultcode xmlns:a="http://schemas.microsoft.com/exchange/services/2006/types">a:ErrorSchemaValidation</faultcode>
         <faultstring xml:lang="nl-NL">The [snip] value.</faultstring>
         <detail>
            <e:ResponseCode xmlns:e="http://schemas.microsoft.com/exchange/services/2006/errors">ErrorSchemaValidation</e:ResponseCode>
            <e:Message xmlns:e="http://schemas.microsoft.com/exchange/services/2006/errors">The request failed schema validation.</e:Message>
            <t:MessageXml xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">
               <t:LineNumber>10</t:LineNumber>
               <t:LinePosition>30</t:LinePosition>
               <t:Violation>The [snip] value.</t:Violation>
            </t:MessageXml>
         </detail>
      </s:Fault>
   </s:Body>
</s:Envelope> 
```

谢谢
简

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:39:21.817

[阅读文档](http://docwiki.embarcadero.com/Libraries/XE2/en/Xml.XMLIntf.IXMLNodeList.Nodes)。当您访问请求不存在节点的属性时，如果在父 XMLDocument 的属性中启用了该标志`ChildNodes[]`，则将自动创建一个新节点，否则将引发异常。`doNodeAutoCreate``Options``EXMLDocError`

**更新**`ChildNodes[]`：由于您的文档中包含多个 XML 命名空间，因此在使用属性和方法时需要考虑命名空间`FindNode()`。您的代码未正确找到`<faultcode>`and`<faultstring>`节点的原因是它们具有与标记不同的命名空间（实际上，它们根本没有任何命名空间）`<Fault>`，但`ChildNodes[]`属性和 1 参数`FindNode()`方法期望它们具有与其父节点相同的命名空间。当您在命名空间节点中搜索具有不同命名空间的子节点时，您必须在搜索中包含子节点的命名空间才能正确找到子节点。

试试这个：

```
uses
  ..., XmlIntf, XMLDom, XmlDoc;

const
  cSoapEnvelopeNS    = 'http://schemas.xmlsoap.org/soap/envelope/';
  cExchangeErrorsNS  = 'http://schemas.microsoft.com/exchange/services/2006/errors';
  cExchangeTypesNS   = 'http://schemas.microsoft.com/exchange/services/2006/types';

  cNodeSOAPEnvelope  = 'Envelope';
  cNodeSOAPBody      = 'Body';
  cNodeSOAPBodyFault = 'Fault';
  cNodeSOAPHeader    = 'Header';
  cNodeFaultCode     = 'faultcode';
  cNodeFaultString   = 'faultstring';
  cNodeDetail        = 'detail';
  cNodeResponseCode  = 'ResponseCode';
  cNodeMessage       = 'Message';
  cNodeMessageXml    = 'MessageXml';
  cNodeLineNumber    = 'LineNumber';
  cNodeLinePosition  = 'LinePosition';
  cNodeViolation     = 'Violation';

procedure TFrmXMLParsingTests.BtnTestClick(Sender: TObject);
var
   RootNode,
   SoapBodyNode,
   SoapBodyFaultNode,
   SoapHeaderNode,
   FaultCodeNode,
   FaultTextNode,
   DetailNode,
   ResponseCodeNode,
   MessageNode,
   MessageXmlNode,
   LineNumberNode,
   LinePositionNode,
   ViolationNode: IXMLNode;
begin
   RootNode := XMLDoc.DocumentElement;
   Assert(NodeMatches(RootNode.DOMNode, cNodeSOAPEnvelope, cSoapEnvelopeNS), 'Root node is not SOAP envelope');

   // these have the same namespace as <Envelope>
   SoapBodyNode := RootNode.ChildNodes[cNodeSOAPBody];
   SoapBodyFaultNode := SoapBodyNode.ChildNodes.FindNode(cNodeSOAPBodyFault);

   if SoapBodyFaultNode <> nil then
   begin
      // these have a different namespace than <Fault>!
      FaultCodeNode := SoapBodyFaultNode.ChildNodes.FindNode(cNodeFaultCode, '');
      FaultTextNode := SoapBodyFaultNode.ChildNodes.FindNode(cNodeFaultString, '');
      DetailNode := SoapBodyFaultNode.ChildNodes.FindNode(cNodeDetail, '');

      if DetailNode <> nil then
      begin
        // these have different namespaces than <detail>!
        ResponseCodeNode := DetailNode.ChildNodes.FindNode(cNodeResponseCode, cExchangeErrorsNS);
        MessageNode := DetailNode.ChildNodes.FindNode(cNodeMessage, cExchangeErrorsNS);
        MessageXmlNode := DetailNode.ChildNodes.FindNode(cNodeMessageXml, cExchangeTypesNS);

        if MessageXmlNode <> nil then
        begin
          // these have the same namespace as <MessageXml>
          LineNumberNode := MessageXmlNode.ChildNodes.FindNode(cNodeLineNumber);
          LinePositionNode := MessageXmlNode.ChildNodes.FindNode(cNodeLinePosition);
          ViolationNode := MessageXmlNode.ChildNodes.FindNode(cNodeViolation);
        end;
      end;
      Exit;
   end;

   // this has the same namespace as <Envelope>
   SoapHeaderNode := RootNode.ChildNodes.FindNode(cNodeSOAPHeader);
   Assert(SoapHeaderNode <> nil,'SOAP Header not found');
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:55:54.930

编写自己的函数：

```
function SearchChilds(StartNode: IXMLNode; Nodename: string): IXMLnode;
var i: Integer;
begin
   Result := nil;
   for i := 0 to StartNode.ChildNodes.Count-1 do
   begin
      if (StartNode.ChildNodes[i] <> nil) and (StartNode.ChildNodes[i].LocalName = Nodename) then
      begin
         Result := StartNode.ChildNodes[i];
         break;
      end;
      if StartNode.ChildNodes[i].HasChildNodes then
      begin
         Result := SearchChilds(StartNode.ChildNodes[i], Nodename);
         if Result<>nil then break;
      end;
   end;
end; 
```

# asp.net - 全文检索

> ID：13381242
> 
> 赞同：0
> 
> 时间：2012-11-14T14:55:43.527
> 
> 标签：asp.net, sql-server-2008

我有一个允许用户搜索多个列的应用程序（prod_name，prod_desc）

所以我使用了如下的全文搜索，但它没有返回所有记录，例如，我试图在 2 列（prod_name，prod_desc）中找到 'o' 字符，但它无法找到某些记录。此外，当我不使用通配符作为 'o' 字符时，它在包含 %o% 之类的意思时找不到任何东西。我对全文搜索有点困惑。

请帮忙看看是什么问题。

```
CREATE FULLTEXT CATALOG catalog_crashcourse3;

CREATE FULLTEXT INDEX ON products(prod_name,prod_desc)
KEY INDEX pk_products ON catalog_crashcourse3;

SELECT prod_name, prod_desc
FROM products
WHERE CONTAINS((prod_name,prod_desc), '"*o*"'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:26:46.823

SQL Server FTS 是一个基于单词的搜索过程。当您在列上创建全文索引时，索引引擎会爬取内容并将其分解为单个单词，该过程称为标记化。然后索引存储了单词、找到它的行的主键以及单词在内容中的位置（即 is 是字段中的第一个单词、第 57 个单词或其他任何内容）。

当您指定一个 CONTAINS 谓词时，例如

```
CONTAINS((prod_name,prod_desc), '"o"'); 
```

SQL Server FTS 引擎在其索引中查找标记为“o”的标记（即单词）。如果您的内容中没有“o”一词（可能没有），则不会找到匹配项。

正如您所指出的，您可以进行通配符搜索，在其中尝试匹配索引词中的模式。例如，如果您指定一个谓词，例如

```
CONTAINS((prod_name,prod_desc), '"o*"'); 
```

然后搜索将返回索引内容中以字母“o”开头的所有单词

当您要在索引内容中搜索词组时，最好使用 FTS。它可以进行复杂的词干提取（例如在指定“run”时搜索“ran”和“running”）。它还提供搜索结果内容的排名，以便您找到最佳匹配。如果你只是想在你的内容中搜索一个指定的词，并且你的内容不是太大，你可能不需要 FTS。正如 MikeSmithDev 在评论中指出的那样，您也许可以摆脱 LIKE 子句。

**补充说明：**针对您的评论，如果您有一个包含 8 列的表，您想使用 FTS 进行搜索，那么您将在每个列上创建全文索引并按如下方式搜索它们：

```
CONTAINS(*, '"Word"') 
```

其中星号表示表中的所有 8 个索引列都应包含在搜索中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T18:00:03.243

你有两个问题：

1.  您正在使用`*o`Sql Server FTS 无法使用的前缀通配符。它仅适用于后缀通配符，如`word*`.

2.  您正在使用单字符搜索词。FT 索引中默认排除单字符词，这是一件好事。除非另有指定，否则 SQL Server在创建索引时默认**关联**系统全文非索引字表。

要查看您的数据库在背后使用的默认停止列表，请使用此查询

```
Select SysStop.stopword, Langs.name
From sys.fulltext_system_stopwords SysStop
    Inner Join sys.fulltext_languages Langs
    On Langs.lcid = SysStop.language_id; 
```

如果您真的想搜索单个字符，您可以使用选项删除并重新创建 FT 索引`WITH STOPLIST OFF`，但要为大量噪音做好准备。请参阅[创建全文索引](http://msdn.microsoft.com/en-us/library/ms187317.aspx)。

# sql - 将 SQL 查询转换为关系代数 - 无法弄清楚

> ID：13381244
> 
> 赞同：0
> 
> 时间：2012-11-14T14:55:51.950
> 
> 标签：sql, relational-algebra

有人可以帮我算出这两条 SQL 语句的关系代数吗。我无法理解它

```
SELECT EMP.*
     , DEPT.DEPTNAME
     , DEPT.BUILDING
     , MANAGER.NAME DEPT_MANAGER
  FROM DEPT DEPARTMENT
     , EMPLOYEES EMP
     , EMPLOYEES MANAGER
 WHERE DEPT.DEPTMANAGERID = MANAGER.EMPID
   AND EMP.DEPTNO = DEPT.DEPTNO; 
```

和：

```
SELECT rep.repname SalesRep
     , prod.productno ProdID
     , prod.productname Name
     , prod.productdesc ProdDesc
     , prod.units Unit
     , prod.productprice Price
     , paint.*
     , chem.*
     , feed.*
     , sup.repname Supervisor
  FROM products prod
     , salesreps rep
     , salesreps sup
     , paintproducts paint
     , chemicalproducts chem
     , animalfeedproducts feed
 WHERE rep.salesrepid = prod.productsalesrepid
   AND rep.supervisor = sup.salesrepid (+)
   AND prod.productno = paint.productno (+)
   AND prod.productno = chem.productno (+)
   AND prod.productno = feed.productno (+); 
```

我为第一个尝试了这个：

```
π emp.*, dept.deptname, dept.building, manager.name (Department |×| deptmanagerid = empid Employees) X (Employee |×| Emp.Deptno = Dept.DeptNo Department) 
```

（抱歉不知道如何更改布局，所以它看起来可读）不知道那是否甚至远程正确，至于第二个我只是不知道从哪里开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:04:49.070

对于您的第一个查询，接缝就像您正在寻找经理的信息一样，您告诉我我是否理解错了，但是这个怎么样：

```
SELECT MANAGER.*
 , DEPT.DEPTNAME
 , DEPT.BUILDING
 , DEPT_MANAGER
FROM DEPT DEPARTMENT
 , EMPLOYEES MANAGER
WHERE DEPT.DEPTMANAGERID = MANAGER.EMPID
AND MANAGER.DEPTNO = DEPT.DEPTNO; 
```

如果你想要经理的员工，你必须首先使用你想要的两张表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:05:13.213

SQL 查询块和关系代数之间的转换很简单：`from`子句是笛卡尔积，`where`子句列出限制（也称为选择），`select`子句是投影，按照我刚才描述的顺序应用。这种关系查询在文献中称为 SPJ（选择项目连接）或 SPC。

带有外连接的查询和关系代数之间的转换没有意义：与[维基百科 RA 页面](http://en.wikipedia.org/wiki/Relational_algebra#Left_outer_join_.28.E2.9F.95.29)相反，外连接（更不用说用 oracle 专有的易错语法编写的连接）不是标准关系代数的一部分。

PS Latex 将使您的关系代数查询可读。

# android - 适用于 Android 的 Mobclix

> ID：13381245
> 
> 赞同：0
> 
> 时间：2012-11-14T14:55:52.450
> 
> 标签：android, mobclix

我有 MyApp_240x320.apk 和 MyApp_480x800.apk。我将 Mobclix 集成到 240x320 版本，按预期工作。但是对于 480x800 显示和广告的相同集成，控制台中也没有错误。可能是什么问题？

# java - 从没有扩展名的文件夹中输出文件

> ID：13381253
> 
> 赞同：0
> 
> 时间：2012-11-14T14:56:39.467
> 
> 标签：java

帮助做这个，下面的代码在文件夹中找到txt文件，以及如何让它列出不带扩展名的文件名。这是代码：

```
String list[] = new File("C:\\Users\\Eric\\Desktop\\txt\\").list(new FilenameFilter() {
    public boolean accept(File dir, String name) {
        return name.endsWith(".txt");
    }
});
for (int i = 0; i < list.length; i++){
    if(myName.equals(list[i])) {
        InputStreamReader reader  = null;
        try{
            File file =  new File("C:\\Users\\Eric\\Desktop\\txt\\" + list[i]);
            reader =  new InputStreamReader(new FileInputStream(file), "UTF-8"); 
```

如您所见，就在这里：

```
if(myName.equals(list[i])) 
```

这是文件列表与 myname 的值进行比较，所以你能帮忙给比较表和 myName 和 list[i]，文件扩展名没有考虑），例如程序显示该文件夹具有以下布局： indeks.html hi.html，用户输入了indeks.html，比较好，但是如何创建一个，让用户输入了代码，程序还和目录中的文件列表进行比较呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:13:34.483

如果我理解正确，您想列出文件夹中的所有文件，而不管它们的扩展名。在这种情况下，请使用：

```
String list[] = new File("C:\\Users\\Eric\\Desktop\\txt\\").list(new FileFilter() {
    public boolean accept(File file) {
        return file.isFile();
    }
}); 
```

**编辑：**好的，我没有正确理解你。您想从 if 语句中的文件名中去除扩展名。您可以`substring`结合使用`lastIndexOf`：

```
String name = list[i];
String nameWithoutExtension = name.substring(0, name.lastIndexOf(".")); 
```

或者，由于您的所有扩展名都是“.txt”，因此以下内容也可以使用：

```
String nameWithoutExtension = name.substring(0, name.lastIndexOf(".txt")); 
```

# html - 使用 Bootstrap 固定表格行宽

> ID：13381255
> 
> 赞同：4
> 
> 时间：2012-11-14T14:56:42.067
> 
> 标签：html, css, twitter-bootstrap

我在我的网站上使用引导程序（[链接](http://twitter.github.com/bootstrap/index.html)），但我对表格的使用有点困惑。在 bootraps 之前，我所有的表格 TD 单元格都有动态宽度，所以如果内容是一个长句子，则 TD 具有更大的宽度，如果它只有 11 个字符长的文本输入，则它的宽度更小。但是现在我所有的 TD 元素都有相同的宽度，我找不到方法，如何改变它......

这是我的桌子：

```
<table id="table1" style="padding-top:10px;">
    <tr>
        <td colspan="6" style="text-align:center;">TITLE</td>
    </tr>
    <tr>
        <td colspan="3" style="text-align:center;">SUBTITLE 1</td>
        <td colspan="3" style="text-align:center;">SUBTITLE 2</td>
    </tr>
    <tr>
        <td style="text-align:left;"><b>A.</b></td>
        <td>Data title 1</td>
        <td><input type="text" maxlength="11" size="11" name="input_a"></td>
        <td style="text-align:left;"><b>D.</b></td>
        <td>Data title 2</td>
        <td><input type="text" maxlength="11" size="11" name="input_b"></td>
    </tr>
...
</table> 
```

所以我想让“数据标题X”单元格的宽度更大，因为输入文本字段更小。如果我手动给他们 style="width:xyzpx;" 属性它没有改变任何东西。

可以以某种方式完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-05T13:11:32.987

尝试在表格元素（或任何需要的地方，例如输入）上使用 span1、span2... span12 类：

```
<table id="table1">
    <thead>
        <tr>
            <th colspan="6">TITLE</th>
        </tr>
        <tr>
            <th colspan="3">SUBTITLE 1</th>
            <th colspan="3">SUBTITLE 2</th>
        </tr>
    </thead>
    <tr>
        <td class='span1'><b>A.</b>
        </td>
        <td class='span4'>Data title 1</td>
        <td class='span1'>
            <input type="text" maxlength="11" size="11" name="input_a" class="span1" />
        </td>
        <td class='span1'><b>D.</b>
        </td>
        <td class='span4'>Data title 2</td>
        <td class='span1'>
            <input type="text" maxlength="11" size="11" name="input_b" class="span1" />
        </td>
    </tr>
</table> 
```

这是[jsFiddle](http://jsfiddle.net/MgcDU/6446/)

ps：bootstrap3中有**col-** (col-4, col-lg-4...)类前缀

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:59:39.603

`<td width="10%">`在 Twitter 引导程序上使用对我有用。或者您可以向 td 添加一个类并在样式表中设置宽度`td.column{ width: 10% !important;}`

此外，您可能希望使您的表格如下所示以获得更有效的标记：

```
<table>
<thead>
<tr>
<td>Title 1</td>
...
</tr>
</thead>
<tbody>
<tr>
<td></td>
...
</tr>
</tbody>
</table> 
```

将宽度属性添加到`<tr>`所有 6 个`<td>`元素。

# java - 使用另一个类的 JButton 更改卡片

> ID：13381257
> 
> 赞同：1
> 
> 时间：2012-11-14T14:56:49.670
> 
> 标签：java, swing, jbutton, cardlayout

我正在一步一步地到达那里，但遇到**了另一个障碍**。

标题是不言自明的，我想知道如何使用带有 ActionListener 的 JButton“注销”来交换我的主 LoginScreen.class 中的卡？

我打了几下，但无济于事。也欢迎任何关于改进我的编码和格式的提示。提前致谢。

这是我的代码：

LoginScreen.class

```
 /*Login Screen class for allowing
multiple levels of access and security*/

//Imports library files
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import java.io.*;
import java.util.*;

//Creates a LoginScreen class that extends the JFrame library class
class LoginScreen extends JFrame {

    //Creates a swing components and CardLayout for organising JPanels
    JPanel cardScreen;
    JPanel screen = new JPanel();
    Image ProgramIcon = Toolkit.getDefaultToolkit().getImage("imageIco.png");
    ImageIcon logo = new ImageIcon ("Logo.png");
    JLabel icon = new JLabel(logo);
    JLabel username = new JLabel("Username");
    JLabel password = new JLabel("Password");
    JTextField user = new JTextField(18);
    JPasswordField pass = new JPasswordField(18);
    JButton login = new JButton("Login");
    JLabel errorInfo = new JLabel("");
    int WIDTH = 800;
    int HEIGHT = 500;
    int currentPanel = 1;

     public static void main(String[] args){
     //Sets the GUI (Look and Feel) to the NimROD theme
        try {UIManager.setLookAndFeel("com.nilo.plaf.nimrod.NimRODLookAndFeel");}
        catch (UnsupportedLookAndFeelException e){ JOptionPane.showMessageDialog(null, "GUI Load Error: Unsupported");}
        catch (ClassNotFoundException e) { JOptionPane.showMessageDialog(null, "GUI Load Error: NimROD Missing");} 
        catch (InstantiationException e) { JOptionPane.showMessageDialog(null, "GUI Load Error: Instantiation Missing");} 
        catch (IllegalAccessException e) { JOptionPane.showMessageDialog(null, "GUI Load Error: Illegal Access"); } 

    //Creates a new LoginScreen via the LoginScreen method
        LoginScreen LS = new LoginScreen();
    }

    public LoginScreen(){
    //Adds the JPanel to the JFrame and set the JFrame's properties
    //Sets the main JPanel to CardLayout platform and adds other JPanels it
        final CardLayout cardL = new CardLayout();
        cardScreen = new JPanel();
        cardScreen.setLayout(cardL);
        cardScreen.add(screen, "1");;
        BaseScreen base = new BaseScreen();
        cardScreen.add(base, "2");
        this.setIconImage(ProgramIcon);
        this.setTitle("Login");
        this.setSize(WIDTH,HEIGHT);
        this.setResizable(false);
        this.add(cardScreen);
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);

     //Place the components on the JPanel and set their absolute posistions
        screen.setLayout(null);
        screen.add(username);
        screen.add(password);
        screen.add(user);
        screen.add(pass);
        screen.add(login);
        screen.add(icon);
        Dimension iconSize = icon.getPreferredSize();
        Dimension usernameSize = username.getPreferredSize();
        Dimension passwordSize = password.getPreferredSize();
        Dimension loginSize = login.getPreferredSize();
        Dimension userSize = user.getPreferredSize();
        Dimension passSize = pass.getPreferredSize();
        username.setBounds(252,170,usernameSize.width,usernameSize.height);
        password.setBounds(495,170,passwordSize.width,passwordSize.height);
        user.setBounds(180,200,userSize.width,userSize.height);
        pass.setBounds(420,200,passSize.width,passSize.height);
        login.setBounds(375,250,loginSize.width,loginSize.height);
        icon.setBounds(250,50,iconSize.width,iconSize.height);

        this.setVisible(true);

        login.addActionListener(new ActionListener() { 
            public void actionPerformed(ActionEvent ae) { 

                //Checks if both the user and pass text fields are empty
                if((user.getText().equals("")) && (pass.getText().equals(""))){

                    //Displays an error in the form of a label and adds it to the JPanel
                    errorInfo.setText("Please enter username and password");
                    screen.add(errorInfo);
                    errorInfo.setForeground(Color.RED);
                    Dimension errorInfoSize = errorInfo.getPreferredSize();
                    errorInfo.setBounds(300,300,errorInfoSize.width,errorInfoSize.height);
                }

                if((user.getText().equals("admin"))&&(pass.getText().equals("password"))){
                    cardL.show(cardScreen,"2");
                }
            }
        }); 
    }
} 
```

BaseScreen.class

```
//Basescreen class

import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

class BaseScreen extends JPanel{

    JPanel screen = this;
    JButton logout = new JButton("Logout");
    ImageIcon title = new ImageIcon("title.png");
    JLabel header = new JLabel(title);

    public BaseScreen(){

        screen.setLayout(null);
        screen.add(logout);
        screen.add(header);
        Dimension headerSize = header.getPreferredSize();
        Dimension logoutSize = logout.getPreferredSize();
        logout.setBounds(720,440,logoutSize.width,logoutSize.height);
        header.setBounds(0,0,headerSize.width,headerSize.height);
        screen.setVisible(true);
    }
} 
```

如果您想知道为什么我要竭尽全力将 JPanel 分离到另一个类中，这是因为我想使用我的 BaseScreen 类来被许多其他 JPanel 类继承，并将每个类添加为卡片所以能够在其中一个类中使用 JButton 对于程序结构的工作至关重要。希望我没有以完全错误的方式解决这个问题，并且不需要完全重写程序。

**-Zalx**

# c# - HttpHandler 在发送文件之前写入重定向页面

> ID：13381263
> 
> 赞同：0
> 
> 时间：2012-11-14T14:57:14.367
> 
> 标签：c#, jquery, file, httphandler, response.write

我似乎永远无法在 .net 上找到任何文档，而官方文档（当它们正确时）是一个无望的迷宫。

我将使用 jQuery 的用户重定向到新页面上的 HttpHandler，我在该页面上即时构建和发送 html 表（并将其称为 excel 文件）。多亏了堆栈器，我可以毫不拖延地构建和发送文件（即使是巨大的文件）。

我想在新页面上告诉用户我正在构建文件等，因为正在构建和发送文件。

当我在发送我的 excel 标头之前执行 context.response.write 时，我得到：

```
“/”应用程序中的服务器错误。

发送 HTTP 标头后，服务器无法附加标头。
```

有什么方法可以实现我想要的吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:25:47.497

你到底想达到什么目的？据我了解，您正在构建某种 excel 表并将其发送给客户。我假设为了让客户将您的内容识别为 Excel 表格，您尝试发送一些响应标头（例如 mime 类型）。

尽管您必须始终在正文之前发送任何类型的标头，但您将无法在显示给用户的响应流中写入通知，因为用户还将您的通知*保存*到 excel 文件中。

因此，我认为您将需要一个带有通知的新登录页面以及某种 javascript 或元重定向（或超链接或按钮）到强制创建和下载 excel 的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:31:31.093

您需要的是一个重定向到下载页面的临时登陆页面。

在临时页面上，您可以有您的消息和一个小脚本将用户发送到下载。

```
<body>
<div> Your file is getting created... Please wait patiently.
</div>
<script>
    window.location.href = 'http://yoursite.com/documentpage/blah/foo/bar';
</script>
</body> 
```

# xml - 操作文件后无法写入xml

> ID：13381269
> 
> 赞同：0
> 
> 时间：2012-11-14T14:57:29.937
> 
> 标签：xml, asp-classic

首先，我用经典的 ASP 编写 XML 文件。然后我可以根据需要进行读取、写入和修改。然后我想将文件复制到另一个目录以供另一个系统使用。如果我移动文件，它可以工作。如果我复制并粘贴该文件，它会告诉我“访问被拒绝”。我可以阅读它们，但不能写入文件。有什么帮助或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:14:44.897

你的xml文件是只读的吗？查看您创建的 xml 的权限。尝试用不同的名称编写另一个 xml 并跟踪问题是否仍然相同。

# linq - Linq 到实体外连接，然后是内连接

> ID：13381270
> 
> 赞同：2
> 
> 时间：2012-11-14T14:57:31.223
> 
> 标签：linq, linq-to-entities

我有这个代码：

```
var query = (from p in dc.GetTable<Person>()
join pa in dc.GetTable<PersonAddress>() on p.Id equals pa.PersonId into tempAddresses
from addresses in tempAddresses.DefaultIfEmpty()
select new { p.FirstName, p.LastName, addresses.State }); 
```

这很好用，作为具有（可选）地址的人的外部连接。

现在我想通过内部连接将地址类型加入到这个查询中，因为每个地址都只有一个地址类型。所以对于每个人，获取地址，如果有地址，也获取地址类型。

所以我创建了这个（将内部连接添加到地址类型）：

```
var query = (from p in dc.GetTable<Person>()
join pa in dc.GetTable<PersonAddress>() on p.Id equals pa.PersonId into tempAddresses
from addresses in tempAddresses.DefaultIfEmpty()
join at in dc.GetTable<AddressTypes>() on pa.addresstypeid equals at.addresstypeid
select new { p.FirstName, p.LastName, addresses.State, at.addresstype }); 
```

现在，当此人没有地址时，我在 pa.addresstypeid 上得到一个空引用错误....

有没有办法在 linq 中创建它？

上面的代码在行为上与我的代码完全相同，但我的代码有不同的实体，但我不允许显示实际代码......

编辑：

这是我的代码中实际有效的示例：（用 foo/bar 替换表）

```
from foo in foos
join bar in new barRepository(SessionTicket).GetList()
    on foo.barId equals bar.barId
join barpersonbar in new barPersonbarRepository(SessionTicket,personId).GetList().Where(z=>z.PersonId == personid)
    on bar.barId equals barpersonbar.barId
    into outerbarpersonbar
from barpersonbar in outerbarpersonbar.DefaultIfEmpty() 
```

是不是和你的评论一样，'pa'超出范围，这不是代码中的'bar'吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:03:07.420

`pa`使用后不在范围内`into`

改变

```
on pa.addresstypeid equals 
```

至

```
on addresses.addresstypeid equals 
```

# notepad++ - 使用 NP++ 的双引号自动完成

> ID：13381271
> 
> 赞同：1
> 
> 时间：2012-11-14T14:57:50.637
> 
> 标签：notepad++

当我编写代码时，我讨厌必须双重输入“某物”。有没有办法像 TextMate 那样做？它会自动关闭“”。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:37:10.997

该插件`XBrackets Lite`可以做到这一点。它还可以做一些其他方便的自动完成。

[http://sourceforge.net/projects/npp-plugins/files/XBrackets%20Lite/](http://sourceforge.net/projects/npp-plugins/files/XBrackets%20Lite/)

# php - 将增加的排名映射到减少但非负的点

> ID：13381277
> 
> 赞同：0
> 
> 时间：2012-11-14T14:58:38.590
> 
> 标签：php, function, math, business-logic

我需要创建一个业务逻辑或 php 函数来计算以下内容：给定一些输入`$rank`（这是 alexa 排名），我需要以`$points`这样一种方式计算一些，`$points`对于排名靠前的网站来说将很高，并且会随着`$rank`价值的增加而减少。

我想象这样的事情：

```
function($rank)
{
    $points = x*$rank;
    return $points;
} 
```

我怎样才能`$points`以这样的方式得到

*   如果排名为 1，则返回的点数为最大值（例如 10000）。
*   如果 rank 为 2 则`$points`返回 9500 或附近。
*   如果 rank 为 4 则`$points`返回 6000 或附近。
*   如果排名为 200，则`$points`返回 2 或函数返回的任何值。

规则：如果`$rank`少则`$points`应该多。的最大值`$points`是 10000，即`$rank=1`.

现在随着`$rank`增加，`$points`值应该相应减少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:20:38.283

```
 function getPoints($rank)
{
    $returnValue =  -0.005 * $rank * $rank - 0.035 * $rank + 100.040;
    if ($returnValue < 0) $returnValue = 0;
    return $returnValue;
} 
```

这是我的想法。

函数不会为大值分叉：它应该至少为大排名提供一些小的值......比如如果排名是 2000000，那么点数将是 2。Thnx btw

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:39:52.517

有许多公式可以满足您的要求。

# 嵌套权力

一种可能：

```
$points = 10000 * pow(0.993575964272119, pow($rank, 3.16332422407427) - 1) 
```

这将为您提供以下[结果](http://ideone.com/bgtj7f)：

```
f(1) = 10000
f(2) = 9500
f(4) = 6000
f(9) = 12.065
f(10) = 0.84341
f(200) = 0 
```

因此，您固定的三个值（1、2 和 4）都满足，但 200 的结果表明这可能不是您要寻找的。曲线如下所示：

![功能图](../Images/1f5a99ea149f8f0b684128720e8f65d7.png)

顺便说一句，我使用 python 和 mpmath 发现了这一点，方法是固定公式的形式并确定具有多位数字的数字：

```
>>> import mpmath
>>> print(mpmath.findroot((lambda a,b: 10000*a**(2**b - 1) - 9500,
...                        lambda a,b: 10000*a**(4**b - 1) - 6000),
...                       (0.995, 2.7)))
[0.993575964272119]
[ 3.16332422407427] 
```

如果您决定使用不同形式的函数，则可能会采用这种方法。

# 多项式的 Exp

具有所需属性的可能的不同形式是：

```
$points = exp(9.14265175282929 + $rank*(0.127179575914116 - $rank*0.0594909567672230)) 
```

这不会像上面的那样迅速减少：

```
f(  1) = 10000
f(  2) =  9500
f(  4) =  6000
f( 13) =     2.1002
f( 14) =     0.47852
f(200) =     0 
```

它是通过求解这个方程组得到的：

```
a +  b +   c = log(10000)
a + 2b +  4c = log( 9500)
a + 4b + 16c = log( 6000) 
```

以获得多项式的系数*a*到*c*。也可以添加另一个度数来匹配`f(200)=2`，但在这种情况下，最后一个系数将变为正数，这意味着对于非常大的等级，分数将随着等级开始增加。

如果你也想匹配它`f(200)=2`，你可以使用

```
$points = exp(max(8.86291000469285 - $rank*0.0408488141206645,
    9.14265175282929 + $rank*(0.127179575914116 - $rank*0.0594909567672230))) 
```

虽然这会导致你的曲线弯曲。

将这些替代方案与上述方案进行比较：

![功能比较](../Images/2da6d182d1ffee22b998802a6e1d853a.png)

# php - XML / PHP / 变量

> ID：13381279
> 
> 赞同：0
> 
> 时间：2012-11-14T14:58:43.270
> 
> 标签：php, xml

我正在使用以下 XML 文件：

[http://xml.nordicbet.com/football.xml](http://xml.nordicbet.com/football.xml)

```
 $xml = simplexml_load_file('http://xml.nordicbet.com/football.xml');

    foreach ($xml as $gameinfo):
    $kodate=$gameinfo->GameStartTime;
    $status=$gameinfo->Status;
    $id=$gameinfo->EventID;
    $league=$gameinfo->LeagueID;
    $hometeam=$gameinfo->Participant[0];
    $awayteam=$gameinfo->Participant[1];
    $region=$gameinfo->Region;
    $sport=$gameinfo->Sport;
    $season=$gameinfo->Season;
    $livebet=$gameinfo->LiveBet; 
```

这些变量工作正常，但正如您在代码中看到的，有很多 OutcomeSet 标签，我该如何获取信息？

```
 <OutcomeSet type="Result" id="50001643467" name="FC Seoul - Ulsan Hyundai Horang-I">
    <Outcome odds="1.75" id="50069765963" name="1">
    <Participant info="Football" id="10000020100">FC Seoul</Participant></Outcome>
    <Outcome odds="3.4" id="50069765964" name="X"/>
    <Outcome odds="4.05" id="50069765965" name="2"> 
```

在上面的代码中，我想提取 3 个“赔率” - 所以 1.75、3.4 和 4.05 - 作为单独的变量，我可以像其他变量一样使用

这是我所追求的任何类型为“结果”的 OutcomeSet 标签中的信息

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:19:55.593

在 foreach 中你可以调用 $gameinfo 变量的 getName 方法，它将返回当前 XML 元素的名称

此代码打印出赔率值

```
foreach ($xml as $gameinfo) {
    if ("Outcome" == $gameinfo->getName()) {
        echo $gameinfo->odds . "\n";
    }
} 
```

# reporting-services - 摆脱组图标而不隐藏列

> ID：13381280
> 
> 赞同：0
> 
> 时间：2012-11-14T14:58:50.503
> 
> 标签：reporting-services, report, ssrs-2008, reporting

我们有一个由存储过程填充的报告。在数据表中，我们有一列“RowType”，设置为 1、2 或 3。

1：普通数据行
2：重要数据行（在图片中这是第一行数据，粗体）
3：分隔符行。这些是我们遇到问题的行。它们是图像底部的两行灰色背景。

整个报表的样式由“RowType”值或数据表中的某些其他项设置。

**问题：**
我们决定更改我们的报表以使用分组，而不是向下钻取报表。我不打算讨论这个决定的原因。
分组的行的左侧都有一个小图标（由报表服务器生成），用于查看该行的详细信息。（很抱歉，您肯定知道这一切）。
我已将“展开图标”编码为隐藏在没有详细/分组数据的行上，但这给我留下了灰色列现在也将被隐藏的问题，这给我留下了**空白**而不是灰色细胞。
显然，这使我的报告看起来很糟糕。有没有办法在不将 Hidden 属性设置为 True 的情况下删除特定行的图标？

如果没有，有没有办法让报告行用定义的颜色填充隐藏单元格的背景？

右下角包含一个示例，说明其中一个灰色单元格被隐藏时的外观。左下角显示带有灰色单元格中不需要的图标的报告
![提到的图像。](../Images/01390f85852f02974dea47f1ecbd0951.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:40:42.170

我想你可以把你当前的文本框剪掉（带有+-图标的那个，然后将工具箱中的一个矩形添加到该单元格中，然后将你的文本框粘贴回去。这样，texbox 就成为了矩形的子项。然后你可以将您的灰色格式移动到永远不会隐藏的矩形。

# html - Jmeter给xpath带来问题

> ID：13381283
> 
> 赞同：0
> 
> 时间：2012-11-14T14:59:06.153
> 
> 标签：html, xpath, jmeter

我一直在尝试使用 JMeter 的 XPath 提取器一段时间，但根本无法提取任何东西。

我一直在使用`Firebug`通过右键单击给我一个链接的 XPath，`a->Copy XPath`它给了我以下 `/html/body/div[4]/div/div[4]/div/div[2]/div/div[3]/div/a`.

我一直`/html/body/div[4]/div/div[4]/div/div[2]/div/div[3]/div/a/@href`在 Firefox 中测试这个（），`XPath Checker`它成功地返回了页面上的所有链接。

我相当确定我的问题出在 JMeter，而不是我的 XPath 语法等。
还有其他人有类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:41:56.247

**1.** **首先：* * 因为您使用 XPath Extractor 来解析 HTML（不是 XML）响应，请确保选中**Use Tidy（容错解析器）**选项（在[XPath Extractor 的控制面板](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)中）。

**2.**像你上面的 XPath 查询 ( `/html/body/div[4]/div/div[4]/div/div[2]/div/div[3]/div/a/@href`) 看起来不是很准确。假设您可以尝试使用以下内容：

```
//a[@id="..."][@name="..."][text()="..."]/@href 
```

# sql-server - 通过向主键不是最小值的列添加 1 来更新列

> ID：13381287
> 
> 赞同：0
> 
> 时间：2012-11-14T14:59:11.150
> 
> 标签：sql-server, sql-update

我基本上只是想在主键不是最小值的表的每一行中添加 1。我把代码放在下面。有人可以帮我解释一下逻辑吗？

```
 UPDATE MyTable
SET LineNumber = (case when TableID != min(TableID) then LineNumber + 1)
FROM MyTable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:03:15.000

你在找这样的东西吗？

```
 update MyTable
    set LineNumber = LineNumber + 1
  where
    TableID > (SELECT MIN(TableID ) FROM MyTable) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:03:30.403

```
UPDATE  mt
SET     LineNumber = LineNumber + 1
FROM    MyTable mt
WHERE   TableID <> 
        (
        select  min(TableID) 
        from    MyTable
        ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:02:50.773

关于什么

```
UPDATE MyTable SET LineNumber = LineNumber +1 WHERE TableID != MIN(TableID) FROM MyTable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:11:38.840

您应该在[Andomar 的](https://stackoverflow.com/a/13381371/119477)答案中执行此操作，但如果您真的想使用 case 语句，您可以执行此操作

```
UPDATE
  MyTable
SET LineNumber = 

  CASE WHEN TableID = (SELECT MIN(TableID) MinID FROM MyTable) 
       THEN LineNumber
       ELSE LineNumber+ 1
  END
FROM
  MyTable; 
```

[演示](http://sqlfiddle.com/#!3/1909f/12)

# jquery - JQuery Draggable, Droppable, & Sortable with different items

> ID：13381292
> 
> 赞同：1
> 
> 时间：2012-11-14T14:59:37.120
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable, jquery-ui-droppable

我有以下 JQuery 设置将项目从列表拖放到不同的列表中：

```
// Set what items are draggable
$(".widgetListItems").draggable(
{
    cursor: "move",
    opacity: 0.5,
    scroll: false,
    revert: "invalid",
    connectToSortable: "#dropList",
    stop: function (event, ui) { if (deleteItem) { ui.helper.remove(); deleteItem = false; } }
});

// Set what items can have objects dropped into them.
$(".dropableArea").droppable(
{
    accept: ".widgetListItems",
    tolerance: "touch",
    drop: function (event, ui)
    {
        deleteItem = true;

        var item = $(ui.draggable).text();
        item = $.trim(item);

        switch (item)
        {
            case "Preventative Care":
                $(this).append($("#panelPreventative"));
                $("#panelPreventative").show(1000);
                break;
            case "Medical Claims":
                $(this).append($("#panelMedicalClaims"));
                $("#panelMedicalClaims").show(1000);
                break;
            case "Capitation":
                $(this).append($("#panelCapitation"));
                $("#panelCapitation").show(1000);
                break;
        }
    }
});

$(".dropableArea").sortable(
{
    cursor: "move",
    connectWith: ".dropableArea",
    update: function (event, ui)
    {
        $(ui.item).css("margin", "30px 0px");
    }
}); 
```

我有一个`<li>`类“widgetListItems”，用户可以将其拖到屏幕上。接下来，droppable 是一个`<ul>`类“dropableArea”。我希望用户拥有的体验是，一旦他们将项目放入列表中，他们丢弃的项目就会被删除，并且会显示一个带有类“loadedWidgetPanel”的小部件。这就是我在“drop”事件中所做的。我也想要这个列表，用户可以将内容放入可排序的列表中。使用我拥有的代码，用户可以将项目放入列表中，显示小部件，并且一旦它们在页面上，他们就可以对小部件进行排序。

我想知道的是，是否可以对该列表进行排序，以便当用户将元素放入列表时，小部件会插入到用户放置它的位置，而不是在末尾附加。我知道它被附加是因为我在“drop”事件中所做的事情，但我想不出另一种方法来插入不同的项目。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:11:05.287

在你的`drop: function() {}`this 中，当一个项目被删除时触发的回调，在你执行你已经拥有的逻辑之后，你可以添加一个对排序例程的调用。一些快速而肮脏的[jquery 字母排序](https://stackoverflow.com/questions/1134976/how-may-i-sort-a-list-alphabetically-using-jquery)示例。

# c# - 跨组件的持续管理

> ID：13381295
> 
> 赞同：2
> 
> 时间：2012-11-14T14:59:44.907
> 
> 标签：c#, constants

我的团队正试图找出在我们的自定义程序集中管理集中常量（可能是只读静态变量）的最佳方法。我们构建了一个处理架构，其中程序集被动态加载到运行时中。当数据通过我们的系统时，一些程序集将信息写入字典，然后将其传递给另一个程序集，该程序集将读取数据并对其进行处理。随着我们产品的成熟和我们的客户需要不同的处理能力，我们将需要添加将被写入/读取的新数据字段。到目前为止，我们已经在核心 dll 中定义了常量，但这不会长期有效，因为当我们获得一条新数据时，我们将不得不重新编译核心 dll，在这样做的过程中，我们的测试团队将不得不对整个应用程序进行全面的回归测试，而不仅仅是测试新程序集提供的新功能。试图找出一种方法来添加新常量并知道正在写入什么数据，而无需重新编译/部署我们绝对不需要的任何东西。

我们考虑了两种选择：

1.  创建一个常量 dll，它只保存常量。当我们需要新字段时，我们将它们添加（从不删除）到 dll 中。不利的一面是对 dll 的更改仍然会影响整个系统，因此可能需要进行完整的回归测试。

2.  让每个程序集公开它读取/写入的所有字段，然后在开发人员集成期间查找名称不匹配。例如，Assembly1 写入 (Field1, Field2)，Assembly2 读取 (field1, Filed2)，由于字典键区分大小写，导致 (Field1 与 field1) 不匹配。这将阻止我们使用常量程序集，但它需要一些额外的代码来验证不匹配，并且似乎会导致一些耦合。

注意：当我说常量时，我​​并不是说常量。根据我们最终使用的解决方案，我们可能会使用只读静态。

如果有人做过这样的事情，或者对实现这一点的方法有任何想法，我将不胜感激您的意见。我们的基本目标是能够通过仅部署新程序集来提供新功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:41:06.770

Based on your comment, this really sounds like you should be using DTO classes. Rather than a dictionary with values

```
dict["PrimaryAddress"] = "123 Someroad St."; 
dict["Name"] = "John Doe";` 
```

you should have an object

```
public class Address
{
    public string PrimaryAddress { get; set; }
    public string Name { get; set; }
}
....
new Address { 
    PrimaryAddress = "123 Someroad St.",
    Name = "John Doe",
}; 
```

For convenience, you can create a base class in your core library which defines some standard behavior for all the classes (for example, `public Dictionary<string, string> ConvertToDictionary()` for legacy use), and then each assembly can inherit from that to create their own objects. Then the assembly that consumes them can either reference the generating assembly and treat it as the specific type, or it can just treat it as the base form and use the base functionality.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:26:59.737

您可以做的是创建一个被整个流程中的所有其他程序集引用的程序集。（请注意，我假设您的应用程序中实际上只有一个进程）。这个程序集将公开一个类来保存这些“常量”。让我们称之为会话。这是我们在一个项目中使用的实现：

```
//Defined in Dll appshared.dll    
public static class MyApplication
{
    static AppSession appSession = new AppSession();
    public interface IAppSession
    {
        Object this[string key]
        {
            get;
            set;
        }
    };
    sealed class AppSession : IAppSession
    {

        Dictionary<String, Object> _session = new Dictionary<string, object>();
        public AppSession()
        {
        }
        public Object this[string key]
        {
            get
            {
                Object ret = null;
                lock (_session)
                {
                    _session.TryGetValue(key, out ret);
                }
                return ret;
            }
            set
            {
                if (key == null)
                    throw new ArgumentNullException();
                try
                {
                    lock (_session)
                    {
                        if (value != null)
                            _session[key] = value;
                        else
                            _session.Remove(key);
                    }
                }
                catch (Exception eX)
                {
                }
            }
        }
    };

    public static IAppSession Session
    {
        get
        {
            return appSession;
        }
    }

}; 
```

您可以按如下方式使用它：

```
//In Dll A referencing appshared.dll   
MyApplication.Session["Const1"] = 1.0;//Set a global value

//In Dll B referencing appshared.dll    
double const1 = (double)MyApplication["Const1"];//Read a global value - const1 will have the value set by Dll A

//In Dll C referencing appshared.dll
MyApplication.Session["Const1"] = null;//Delete a global value; 
```

您当然可以存储您想要的任何类型的数据。您可以轻松地将其修改为不区分大小写。

我们还有一个更复杂的会话对象，它可以将值与配置文件同步，因此“常量”可以跨执行存储。但是，由于您没有提到您需要这种能力，所以这个简单的类应该对您很好。

# c# - Windows 窗体作为非托管应用程序的子窗口

> ID：13381298
> 
> 赞同：7
> 
> 时间：2012-11-14T14:59:49.850
> 
> 标签：c#, c++, winapi, clr

我正在寻找一种将用 C# 编写的 Windows 窗体应用程序嵌入到 C++ Windows 应用程序中的方法。本机应用程序主窗口被细分为几个窗格。C# 应用程序应该出现在这些窗格之一中，即 C# 组件的根窗口（最外层窗体）必须是主应用程序的子窗口。

这可以做到吗？如果是这样，怎么做？

一些额外的背景：据我所知，有两种方法可以解决这个问题。首先，使用 .net 托管 API（ICLRRuntimeHost 等）在本机应用程序中托管 CLR。其次，通过将 Windows 窗体放在 ActiveX 控件中来承载 CLR。

关于第一种方法，我设法启动了 CLR 并加载了 C# 程序集（主要感谢[Mattias Högström](http://www.codeproject.com/Articles/416471/CLR-Hosting-Customizing-the-CLR)）。我遇到障碍的地方是，我看不到如何告诉我在 CLR 中运行的组件它需要是从 C++ 端传入的窗口的子级。

我还尝试了第二种方法（使用 ActiveX 并感谢[Daniel Yanovsky](http://www.codeproject.com/Articles/42965/How-to-Integrate-C-Window-in-C-Project)）。它几乎，但只是几乎，适用于我的目的。我可以让任意 Windows 窗体组件在本机应用程序的子窗格中运行。但它们总是在主应用程序的主线程上运行。这意味着他们使用主应用程序的 Windows 消息循环。MSDN 说这不会可靠地工作，因为标准的 Windows 消息循环不满足 Windows 窗体的要求（我想在这里发布到 MSDN 的链接，但已经用完了我的新用户两个链接分配）。

根据 MSDN、Internet Explorer 和 MFC 应用程序，消息循环问题的例外情况。我作为主机使用的本机应用程序绝对不是 Internet Explorer。此外，它使用由 wxWidgets 包装的 Windows API，因此 MFC 不是（或至少不是受欢迎的）选项。

Microsoft 提出的解决方案包括让 C# 组件在它们自己的线程上运行在它们自己的消息循环中。至少据我所知，这必然会导致回到上面提到的第一种方法。所以我回到了让 Windows 窗体在传入的父窗口下工作的问题。

同样，我对澄清子窗口问题的任何输入感兴趣，与我在这里提到的方法无关。但根据上下文，我可以将一般问题简化为两个具体问题（我只需要回答其中一个问题）：

*   给定一个托管在 ActiveX 控件中的 Windows 窗体，我如何允许窗体在其自己的线程上以自己的消息循环运行？

或者

*   给定在本机应用程序托管的 CLR 中运行的 Windows 窗体，如何使窗体成为本机应用程序中窗口的子窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:29:15.983

是的，可以做到。几年前我们也做过同样的事情。这是我们的做法：.NET 控件也有原生窗口句柄，我们通过 C++/CLI 获取这些句柄并将它们传递给 Win32，并将这些句柄添加为原生窗口的子窗口。因此，.NET 控件在主应用程序的主线程上运行，有问题的部分是消息循环，正如您在问题中提到的那样。如果需要，我们需要在国家和 .NET 窗口之间路由消息。我记得，我们修复了很多与此相关的错误，但仍然有一些我们没有弄清楚的神秘问题。

还有另一种方法：使用 WPF 互操作。 [http://msdn.microsoft.com/en-us/library/ms742522.aspx](http://msdn.microsoft.com/en-us/library/ms742522.aspx)。根据 MS 的说法，这应该可以解决消息问题，但我们没有尝试这种方法。您可以只使用 Win32 来托管 WPF，然后使用 WPF 来托管 Winform。

所以对于你的最后两个问题：

1.  你不能。只有一个消息循环。
2.  使用手柄。这篇文章讲的是Windows Forms的句柄：http: [//blogs.msdn.com/b/jfoscoding/archive/2004/11/24/269416.aspx](http://blogs.msdn.com/b/jfoscoding/archive/2004/11/24/269416.aspx)

# php - 来自留言簿的 PHP 脚本不会添加到 MySQL

> ID：13381303
> 
> 赞同：0
> 
> 时间：2012-11-14T15:00:09.063
> 
> 标签：php, mysql

当我通过 php 表单提交留言簿详细信息时，它以“成功”结尾，但是当我查看 MySQL 数据库时，它只是创建了新条目，但除了自动 ID 和日期之外，没有任何详细信息。

这是表格：guestbook.php

```
 <form id="form1" name="form1" method="post" action="addguestbook.php">
 <td><input name="name" type="text" id="name" size="40" /></td>
 <td><input name="email" type="text" id="email" size="40" /></td>
 <td><textarea name="comment" cols="40" rows="3" id="comment"></textarea></td>
 <td><input type="submit" name="Submit" value="Submit" /> <input type="reset" 
 name="Submit2" value="Reset" /></td> 
```

这是脚本：addguestbook.php

```
 $host="address"; // Host name 
 $username="username"; // Mysql username 
 $password="password"; // Mysql password 
 $db_name="guestdb"; // Database name 
 $tbl_name="guestbook"; // Table name 

// Connect to server and select database.
 mysql_connect("$host", "$username", "$password")or die("cannot connect server "); 
 mysql_select_db("$db_name")or die("cannot select DB");

 $datetime=date("y-m-d h:i:s"); //date time

 $sql="INSERT INTO $tbl_name(name, email, comment, datetime)VALUES('$name', '$email',     
'$comment', '$datetime')";
 $result=mysql_query($sql);

//check if query successful 
 if($result){
 echo "Successful";
 echo "<BR>";

// link to view guestbook page
 echo "<a href='viewguestbook.php'>View guestbook</a>";}

 else {
 echo "ERROR";}
 mysql_close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:03:14.300

在准备 sql 查询 ( `$sql`) 之前，您必须使用数据填充`$name`,`$email`和`$comment`vars `$_POST`。

```
<?php

// ..

$name    = $_POST['name'];
$email   = $_POST['email'];
$comment = $_POST['comment'];

$sql = "INSERT INTO $tbl_name(name, email, comment, datetime)VALUES('$name', '$email',     
'$comment', '$datetime')";
$result = mysql_query($sql);

// .. 
```

**奖励：**使用[PDO](http://www.php.net/manual/en/pdo.prepared-statements.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:03:47.903

我可以看到，你还没有定义你的变量..在上面添加这个`$datetime=da...`。

```
$name = isset($_POST['name']) ? $_POST['name'] : false;
$email = isset($_POST['email']) ? $_POST['email'] : false;
$comment = isset($_POST['comment']) ? $_POST['comment'] : false; 
```

除此之外：

*   请使用[mysqli_*](http://www.php.net/manual/en/book.mysqli.php)查询或 PDO
*   使用 mysql*_real_escape_string[创建合法的 SQL 字符串](http://php.net/manual/en/mysqli.real-escape-string.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:06:12.177

这可能有多种原因。

我建议将您的查询更改为：

```
INSERT INTO $tbl_name set name='$name', email='$email', comment='$comment', datetime='$datetime' 
```

# javascript - 正则表达式 - 德语分词

> ID：13381310
> 
> 赞同：0
> 
> 时间：2012-11-14T15:00:29.110
> 
> 标签：javascript, expression

我需要帮助处理有关德语过去分词的正则表达式：它们中的大多数以“ge”开头并以“en”或“t”结尾，除非它们被拒绝，在这种情况下会有一个或两个额外的字符. 有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:42:52.083

The following Regex will capture the undeclinated verbs starting with *ge-* and ending with *-t* or *-en* and the declinations ending with *-te*, *-ene*, *-tem*, and *-enem*

```
^ge[a-z]+(t|en)(e*)(m*)$ 
```

[Rubular link](http://rubular.com/r/fADO2XPWDn)

# c# - ExecutenonQuery 不起作用

> ID：13381318
> 
> 赞同：4
> 
> 时间：2012-11-14T15:01:05.943
> 
> 标签：c#, sql, sql-server-2008, executenonquery

我存储的过程如下：

```
ALTER PROC pr_Update_Users_Nomination
(
      @UserID AS VARCHAR(100),  
      @Nominated AS BIT
)
AS

UPDATE User
SET isNominated = @Nominated
WHERE 
EMPID = @UserID; 
```

我想从 c# 代码调用这个过程：下面是我正在尝试的代码：

```
void OpenConnection()
{
string Nominated = "False";
    //Connection String
        string sConnString = System.Configuration.ConfigurationManager.ConnectionStrings["ConString1"].ConnectionString;
        SqlConnection mySqlCon = new SqlConnection(sConnString);
        SqlCommand mySqlCom = mySqlCon.CreateCommand();

        //Call the stored proc and provide in parameters
        mySqlCom.CommandText = "EXECUTE pr_Update @UserID @Nominated";
        mySqlCom.Parameters.Add("@UserID", SqlDbType.VarChar, 20).Value = UserID;
        mySqlCom.Parameters.Add("@Nominated", SqlDbType.Bit).Value = Nominated;

        mySqlCon.Open();
        mySqlCom.ExecuteNonQuery();
        mySqlCon.Close();
} 
```

我收到一条错误消息

```
Incorrect Syntax near @Nominated 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:02:54.133

首先，当执行带有参数（*s*）的过程时，用逗号分隔参数

```
EXECUTE pr_Update @UserID, @Nominated 
```

其次，将您的代码修改为此，

```
 string sConnString = System.Configuration.ConfigurationManager.ConnectionStrings["ConString1"].ConnectionString;
    using(SqlConnection mySqlCon = new SqlConnection(sConnString))
    {
        using(SqlCommand mySqlCom = new SqlCommand())
        {
            mySqlCom.Connection = mySqlCon;
            mySqlCom.CommandText = "pr_Update";
            mySqlCom.CommandType = CommandType.StoredProcedure;
            mySqlCom.Parameters.Add("@UserID", SqlDbType.VarChar, 20).Value = UserID;
            mySqlCom.Parameters.Add("@Nominated", SqlDbType.Bit).Value = Nominated;
            try
            {
                mySqlCon.Open();
                mySqlCom.ExecuteNonQuery();
            }
            catch(SqlException ex)
            {
                // do something with the exception
                // don't hide it
            }

        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T15:02:44.503

您在参数之间缺少逗号 (,)。

它应该是

```
mySqlCom.CommandText = "EXECUTE pr_Update @UserID, @Nominated";
mySqlCom.Parameters.Add("@UserID", SqlDbType.VarChar, 20).Value = UserID;
mySqlCom.Parameters.Add("@Nominated", SqlDbType.Bit).Value = Nominated; 
```

或者，由于您所做的只是调用存储过程，您可以这样做：

```
mySqlCom.CommandType = CommandType.StoredProcedure ;
mySqlCom.CommandText = "pr_Update"; //no need to specify parameter names
mySqlCom.Parameters.Add("@UserID", SqlDbType.VarChar, 20).Value = UserID;
mySqlCom.Parameters.Add("@Nominated", SqlDbType.Bit).Value = Nominated; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T15:03:01.383

只给出存储过程的名称，因为您在之后的语句中添加参数。还要设置 CommandType。

```
 mySqlCom.CommandText = "pr_Update";
 mySqlCom.CommandType = CommandType.StoredProcedure; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T15:06:16.963

您正在调用错误的 SQL。您应该将命令的命令文本设置为`pr_Update`仅：

```
mySqlCom.CommandText = "pr_Update"; 
```

并将 type 命令类型设置为存储过程：

```
mySqlCom.CommandType = CommandType.StoredProcedure; 
```

有关更多信息，请参阅[MSDN 页面](http://msdn.microsoft.com/en-us/library/ms171921%28v=vs.80%29.aspx)。

# android - Android广播启动完成不工作

> ID：13381326
> 
> 赞同：0
> 
> 时间：2012-11-14T15:01:27.197
> 
> 标签：android, broadcastreceiver, bootcompleted

我在 Android 中的 BROADCAST 接收器有问题。所有接收器都运行良好，但无法正常运行 RECEIVED_BOOT_COMPLETED。有什么想法？

**清单文件：**

```
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />

<receiver
android:name="telint.sms.appClass.SMSReceiver"
android:enabled="true" >
<intent-filter android:priority="2147483647" >
    <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    <action android:name="android.provider.Telephony.RECEIVE_BOOT_COMPLETED" />
    <action android:name="android.intent.action.ACTION_SHUTDOWN" />
    <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
    <action android:name="android.intent.action.PHONE_STATE" />
</intent-filter>
</receiver> 
```

**代码：**

```
public class SMSReceiver extends BroadcastReceiver {
private static final String ACTION_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
private static final String ACTION_BOOT = "android.provider.Telephony.RECEIVE_BOOT_COMPLETED";
private static final String ACTION_INTERNET = "android.net.conn.CONNECTIVITY_CHANGE";
private static final String ACTION_SHUTDOWN = "android.intent.action.ACTION_SHUTDOWN";
     @Override
public void onReceive(Context context, Intent intent) {

     if (intent.getAction().equals(ACTION_BOOT)){
        **//NOT WORKING HERE.**
     }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:06:50.813

我认为你的动作名称是错误的。

只需更换

```
<action android:name="android.provider.Telephony.RECEIVE_BOOT_COMPLETED" /> 
```

经过

```
<action android:name="android.intent.action.BOOT_COMPLETED" /> 
```

并且

```
private static final String ACTION_BOOT = "android.provider.Telephony.RECEIVE_BOOT_COMPLETED"; 
```

经过

```
private static final String ACTION_BOOT = "android.intent.action.BOOT_COMPLETED"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-10T10:33:11.307

要完成启动，需要在 AndroidManifest 文件中添加两件事：

*   内部广播“接收者”的“意图过滤器”

    <action android:name="android.intent.action.BOOT_COMPLETED"/>

*   也获得许可

    < 使用权限 android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

# sql - 如何使用 SQL grant 命令限制 Access 数据库中的访问列和行

> ID：13381329
> 
> 赞同：1
> 
> 时间：2012-11-14T15:01:47.787
> 
> 标签：sql, grant

我是这个主题的初学者和自学。我认为这是基本的，但我在我正在使用的电子书中找不到它。我不知道这是否与其他人有关，因为当我搜索此站点时，所有问题都向我提出。所以作为一个初学者，我想再问一次，因为上次我的问题因为不相关和不充分的研究而被丢弃。我尽力在网上找到答案，但没有找到答案。

这是桌子`INVENTORY (BOOK_CODE, BRANCH_NUM, ON_HAND)`

授予`INVENTORY`Mark 更新，这是它在 pdf 中解释的唯一方法。

这是我想回答的问题。用户 Chambers 必须能够更改 2 号分店的现有书籍单位，但不能访问任何其他分店的数据。

这就是我的想法。

```
GRANT UPDATE ON(ON_HAND WHERE BRANCH_NUM = ‘2’) ON BRANCH TO CHAMBERS 
```

它是否正确？

如果您认为这与您的社区无关，请丢弃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:26:20.783

我想说（在任何 RDBMS 上）执行此操作的最佳方法是创建要授予访问权限的列的视图，然后授予对该视图的读取访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:04:47.720

我不知道任何允许在该级别定义访问的数据库引擎。我怀疑没有一个。这种类型的微逻辑通常由前端应用程序处理，该应用程序具有一些比数据库提供的更精细的安全模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:13:19.670

正如 Hogan 所提到的，您需要先创建一个视图，然后针对该视图为用户分配更新权限，所以......

```
create view branch2_inventory as select book_code, on_hand from inventory where branch_num = 2;

grant update on branch2_inventory to chambers; 
```

# html - 让背景图像从 div 向左延伸

> ID：13381331
> 
> 赞同：0
> 
> 时间：2012-11-14T15:01:51.683
> 
> 标签：html, css

我的问题的简单说明：

![我的问题的插图](../Images/009538dceaa59bb6096a457057a35877.png)

我正在尝试构建具有特定宽度的页面，但我希望标题图像向网站其余部分的左侧延伸 50px。

忍受我一点。

下面的代码片段显示了我当前的 html 和 css：

```
<body>
  <div id="header">
  </div>
</body>

body: {
  background-color: #FDFBDC;
}
#header {
  background: transparent url('images/headerforweb.png') no-repeat -50px 0;
  margin-left: auto;
  margin-right: auto;
} 
```

我想要实现的是让图像在#header div 左侧扩展 50px。但是，我希望#header 居中，所以我必须将左右边距设置为自动。另外，我不知道标有“？”的距离，因为它取决于客户端的屏幕尺寸。

问题是，通过我的方法，将图像设置为#header 的背景，多余的 50px 被剪裁了。我环顾四周，发现背景图像不能超出其元素的大小。

我还尝试将#header 包含在一个包装器div 中，它延伸到页面的整个宽度，并将图像设置为背景。但是，在那种情况下，我需要知道“？”，将其设置为图像背景的左边距，但不可能知道。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:04:38.197

您可以通过使图像成为标题的子图像，然后使用负边距来做到这一点。

像这个[jsfiddle](http://jsfiddle.net/DRdhX/)

```
<div id="header">
  <div id="image">
  </div>
</div>​

#header { 
    margin: 0 auto;
    width: 400px;
    background: red;
    height: 80px;
}

#image {
    margin-left: -50px;
    background: blue;
    width: 300px;
    height: 50px;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:04:44.560

在标题中包含另一个跨度并将背景图像传递给该跨度。添加位置：相对于#header。和 position:absolute;left:-50px;top:0 到新创建的跨度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:59:00.023

或者只是使用 position:relative 在包含您的图像的封闭 div 上。

```
body: {background-color: #FDFBDC;}
#header {
color:#ccc;
width:800px;
height:600px;
margin-left: auto;
margin-right: auto;
}

div.header_image { position:relative; left:-50px; top:0px;      background:url(images/headerforweb.png) 0 0  no-repeat;}

<div id="header">
<div class="header_image"> 
<h1>CONTENT</h1>
<h2>MORE CONTENT</h2>
<h3>MORE CONTENT</h3>
</div>
</div> 
```

# python - 通过网络 IO 和数据库查询改进多线程

> ID：13381333
> 
> 赞同：2
> 
> 时间：2012-11-14T15:02:06.350
> 
> 标签：python, multithreading, multiprocessing, mysql-python, pycurl

我正在编写一个脚本：

1.  从数据库中获取 url 列表（大约 10000 个 url）
2.  下载所有页面并将它们插入数据库
3.  解析代码
4.  如果（某些条件）在数据库中进行其他插入

我有一个带有超线程的 Xeon 四核，所以总共有 8 个线程可用，我在 Linux（64 位）下。

我`cStringIO`用作缓冲区，`pycurl`获取页面，`BeautifulSoup`解析它们并`MySQLdb`与数据库交互。

我试图简化下面的代码（删除所有的try/except、解析操作……）。

```
import cStringIO, threading, MySQLdb.cursors, pycurl

NUM_THREADS = 100
lock_list = threading.Lock()
lock_query = threading.Lock()

db = MySQLdb.connect(host = "...", user = "...", passwd = "...", db = "...", cursorclass=MySQLdb.cursors.DictCursor)
cur = db.cursor()
cur.execute("SELECT...")
rows = cur.fetchall()
rows = [x for x in rows]  # convert to a list so it's editable

class MyThread(threading.Thread):
    def run(self):
        """ initialize a StringIO object and a pycurl object """

        while True:
            lock_list.acquire()  # acquire the lock to extract a url
            if not rows:  # list is empty, no more url to process
                lock_list.release()
                break
            row = rows.pop()
            lock_list.release()

            """ download the page with pycurl and do some check """

            """ WARNING: possible bottleneck if all the pycurl
                connections are waiting for the timeout """

            lock_query.acquire()
            cur.execute("INSERT INTO ...")  # insert the full page into the database
            db.commit()
            lock_query.release()

            """do some parse with BeautifulSoup using the StringIO object"""

            if something is not None:
                lock_query.acquire()
                cur.execute("INSERT INTO ...")  # insert the result of parsing into the database
                db.commit()
                lock_query.release()

# create and start all the threads
threads = []
for i in range(NUM_THREADS):
    t = MyThread()
    t.start()
    threads.append(t)

# wait for threads to finish
for t in threads:
    t.join() 
```

我使用`multithreading`所以如果某些请求将因超时而失败，我不需要等待。该特定线程将等待，但其他线程可以自由地继续使用其他 url。

[这](http://i48.tinypic.com/aw2a2p.png)是一个截图，除了脚本什么都不做。似乎有 5 个核心很忙，而其他的则没有。所以问题是：

*   我应该创建与线程数一样多的游标吗？
*   我真的需要锁定查询的执行吗？如果一个线程执行*cur.execute()*而不是*db.commit()*并且另一个线程通过另一个查询*执行执行 + 提交，会发生什么？*
*   我读到了[Queue](http://docs.python.org/2/library/queue.html)类，但我不确定我是否理解正确：我可以使用它而不是*lock + extract a url + release*吗？
*   使用`multithreading`我会遇到 I/O（网络）瓶颈吗？使用 100 个线程时，我的速度不会超过 ~500Kb/s，而我的连接速度会更快。如果我搬到这里，`multiprocess`我会看到这方面的一些改进吗？
*   同样的问题，但对于 MySQL：使用我的代码，这方面可能存在瓶颈？所有这些*锁定+插入查询+释放*都可以通过某种方式改进吗？
*   如果要走的路是`multithreading`，100个线程数很高吗？我的意思是，由于这些操作的互斥，太多的线程执行 I/O 请求（或 DB 查询）是无用的？或者更多的线程意味着更高的网络速度？

# javascript - Javascript 继续滑块

> ID：13381334
> 
> 赞同：0
> 
> 时间：2012-11-14T15:02:16.860
> 
> 标签：javascript, html

我正在编写一个简单的图像滑块，我的问题是当它到达滑块的末端时它会停止。我需要的是在滑块的末尾继续，它将显示滑块中的第一个图像并继续滑动直到 onKeyup 事件触发......

任何帮助表示赞赏:)

这是我的代码：

```
 var second_array = new Array();
function LoadImageList() {
    var s = "";
    var ia = 0;
    var std = "";
    var etd = "";
    var paths = FSO.OpenTextFile("bin\\Tlist.txt")

    while (!paths.AtEndOfStream) {
    var tot = ia++;
    content = paths.ReadLine();
    var newNameN = content.split(";");
    var curID = "t"+tot
    var forID = "t"+parseFloat(tot+1)
    var bacID = "t"+parseFloat(tot-1)

        second_array[tot] = "<td nowrap style=\"padding:10px;\"><font style=\"display:none;\">"+newNameN[0]+"</font><img src=\""+newNameN[2]+"\\folderS.jpg\" id=\""+curID+"\" tabindex=\""+tot+"\" style=\"width:217px; height:322px; border:solid 5px silver; border-radius:10px; box-shadow: 0 0 15px #fff; cursor: pointer;\" onMouseOver=\"this.style.border='solid 5px red';\" onMouseOut=\"this.style.border='solid 5px silver';\"></td>";

    }
    second_array.sort();
        var tempList = second_array.join("");
            thumb.innerHTML = "<table cellpadding=0 cellspacing=0 border=0><tr>"+tempList+"</tr></table>";
}

var defaultStep=1;
var step=defaultStep;
var timerLeft;
var timerRight;

function scrollDivLeft(id) {
    document.getElementById(id).scrollLeft+=Math.round(step*100);
    timerLeft=setTimeout("scrollDivLeft('"+id+"')",1);
} 

function scrollDivRight(id) {
    document.getElementById(id).scrollLeft-=Math.round(step*100);
    timerRight=setTimeout("scrollDivRight('"+id+"')",1);
} 

document.body.addEventListener('keydown', function (e) {
if (e.keyCode=='37') {
    clearTimeout(timerRight);
    scrollDivRight("thumb");
    }
    else if (e.keyCode=='39') {
    clearTimeout(timerLeft);
    scrollDivLeft("thumb");
    }
})

document.body.addEventListener('keyup', function (e) {
    if (e.keyCode=='37') {
    clearTimeout(timerRight);
    }
    else if (e.keyCode=='39') {
    clearTimeout(timerLeft);
    }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:08:39.167

想象一下，您的可滚动图像列表是这样设置的，并且用户正在查看最后一项：

```
<li>Img 1</li> (out of view)
<li>Img 2</li> (out of view)
<li>Img 3</li> (out of view)
<li>Img 4</li> (Visible item) 
```

此时您有几个选项，具体取决于您希望滑块如何工作。最简单的方法是在用户单击下一步时滚动回第一个图像。这会给你一种“连续滚动”，但很清楚哪个项目是第一个，哪个是最后一个。

另一种选择是将第一个图像附加到列表的末尾。在这种情况下，当用户查看最后一张图片时，列表实际上看起来像这样：

```
<li>Img 2</li> (out of view)
<li>Img 3</li> (out of view)
<li>Img 4</li> (Visible item)
<li>Img 1</li> (Clone of first item appended to end of list, out of view) 
```

您可以处理与滚动逻辑分开克隆列表项的逻辑。这大致就是常用的 jQuery 滑块插件的处理方式。

在伪代码中，你可能有这样的东西：

```
 function scrollDivRight(id) {
        if ( current item position is 2nd to last ) {
            Clone & remove item1
            Append item1 to end
        }        
        scrolling logic
    } 
```

有关更多详细信息，我建议查看[jCarousel](http://sorgalla.com/jcarousel/)源代码。

如果您包含示例 Tlist.txt 文件，则可以更轻松地测试代码并提供更具体的答案。

# c# - 为不同类型生成随机值

> ID：13381338
> 
> 赞同：0
> 
> 时间：2012-11-14T15:02:32.043
> 
> 标签：c#, sql, sql-server-2008, casting, sql-types

我正在用 C# 生成脚本来测试**CRUD**操作。

为此，我以编程方式生成例如 INSERT 脚本，这些脚本取决于从***系统目录***返回的类型（例如 varchar (200)、binary、tinyint 等。）将生成随机值​​。我的*想法*如下：

*   列 1 (varchar(200))
*   Column2 (tinyint)
*   第 3 列（大整数）
*   ...
*   ColumnN (binary,int, sql_variant....)

在**C#**中，我生成一个随机数，将其转换为

123456 随机数产生

```
INSERT INTO table_test (Column1,Column2,Column3,...)
SELECT CAST(123456 as varchar(200)),CAST(123456 as tinyint) ,CAST(123456 as bigint) ,... 
```

显然，我的方法**不是****最好**的，因为有可能使文本中的算术溢出，而不是 varchar 的所有字符。你有什么建议而不用做所有的案子？

# android - 书签/收藏夹

> ID：13381349
> 
> 赞同：0
> 
> 时间：2012-11-14T15:02:45.523
> 
> 标签：android

我正在尝试制作一个仅包含文本的应用程序。每个页面（xml）都是不同的。现在我想为用户制作一个书签页面来为他/她的收藏夹添加书签。我成功制作了一个通过主屏幕上的按钮激活的书签页面，每个文本页面上都有一个书签按钮，但我不知道如何发送或显示书签上的书签页面/文本页。这就是我得到的，它不起作用：

```
package life.quotes;

/** Called when the activity is first created. */    
@Override    
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.page1);
    cb = (CheckBox)findViewById(R.id.favorites);
    b = (Button)findViewById(R.id.button_right);

    Button Page2 = (Button) findViewById(R.id.button_right);
    Page2.setOnClickListener(new View.OnClickListener() {
        public void onClick (View view) {
            Intent myIntent = new Intent(view.getContext(), Page2.class);
            startActivityForResult(myIntent, 0);
        }
    });

    cb.setOnClickListener(this);
}

private void savePrefs(String key, boolean value){
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    Editor edit= sp.edit();
    edit.putBoolean(key, value);
    edit.commit();
}

private void savePrefs(String key, String value){ 
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    Editor edit= sp.edit();
    edit.putString(key, value);
    edit.commit();
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    savePrefs("FAVORITES", cb.isChecked());
    savePrefs("QUOTE1", getString(R.string.quote1));
}
        ` 
```

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T01:20:43.697

好吧，如果每个页面都只是您所说的文本，您可以从 textview 获取文本并将它们添加到 SQLite db。

这是我的意思的一个例子，基于我做的一个应用程序。
**数据库连接器.java：**

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DatabaseConnector {

    private static final String DB_NAME = "WorldCountries";
    private SQLiteDatabase database;
    private DatabaseOpenHelper dbOpenHelper;

    public DatabaseConnector(Context context) {
            dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
    }

    public void open() throws SQLException {
       database = dbOpenHelper.getWritableDatabase();
    } 

    public void close() {
      if (database != null)
         database.close();
    }      

    public void insertContact(String name, String cap)  {
      ContentValues newCon = new ContentValues();
      newCon.put("name", name);
      newCon.put("cap", cap);

      open();
      database.insert("country", null, newCon);
      close();
    }

    public void updateContact(long id, String name, String cap) {
      ContentValues editCon = new ContentValues();
      editCon.put("name", name);
      editCon.put("cap", cap);

      open();
      database.update("country", editCon, "_id=" + id, null);
      close();
    }

    public Cursor getAllContacts() {
       return database.query("country", new String[] {"_id", "name"}, null, null, null, null, "name");
    }

    public Cursor getOneContact(long id) {
       return database.query("country", null, "_id=" + id, null, null, null, null);
    }

    public void deleteContact(long id) {
       open(); 
       database.delete("country", "_id=" + id, null);
       close();
    }
} 
```

**数据库OpenHelper.java：**

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseOpenHelper extends SQLiteOpenHelper {

    public DatabaseOpenHelper(Context context, String name,
            CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String createQuery = "CREATE TABLE country (_id integer primary key autoincrement,name, cap);";                 
        db.execSQL(createQuery);        
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

} 
```

现在这是包含添加到收藏夹或书签
**FavoriteList.java 的项目列表的活动：**

```
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.CursorAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.AdapterView.OnItemClickListener;

public class FavoriteList extends ListActivity {

    public static final String ROW_ID = "row_id";
    private ListView conListView;
    private CursorAdapter conAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        conListView=getListView();
        conListView.setOnItemClickListener(viewConListener);

        // map each name to a TextView
    String[] from = new String[] { "name" };
    int[] to = new int[] { R.id.countryTextView };
    conAdapter = new SimpleCursorAdapter(FavoriteList.this, R.layout.country_list, null, from, to);
    setListAdapter(conAdapter); // set adapter
    }

    @Override
    protected void onResume() {
       super.onResume();  
       new GetContacts().execute((Object[]) null);
    } 

    @Override
    protected void onStop() {
       Cursor cursor = conAdapter.getCursor();

       if (cursor != null) 
          cursor.deactivate();

       conAdapter.changeCursor(null);
       super.onStop();
    }    

    private class GetContacts extends AsyncTask<Object, Object, Cursor> 
    {
       DatabaseConnector dbConnector = new DatabaseConnector(FavoriteList.this);

       @Override
       protected Cursor doInBackground(Object... params) {
          dbConnector.open();
          return dbConnector.getAllContacts(); 
       } 

       @Override
       protected void onPostExecute(Cursor result) {
            conAdapter.changeCursor(result); // set the adapter's Cursor
            dbConnector.close();
       } 
    } 

    OnItemClickListener viewConListener = new OnItemClickListener() {
       public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {         
          Intent viewCon = new Intent(FavoriteList.this, ViewFav.class);
          viewCon.putExtra(ROW_ID, arg3);
          startActivity(viewCon);
       }
    };   

} 
```

这是查看收藏夹列表中每个项目的活动，带有一个用于从数据库
**ViewFav.java中删除条目的菜单项**

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.database.Cursor;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.TextView;

public class ViewFav extends Activity {

   private long rowID;
   private TextView nameTv;
   private TextView capTv;

   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_fav);

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(FavoriteList.ROW_ID); 
   }

   private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
   }

   @Override
   protected void onResume() {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask<Long, Object, Cursor> {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewFav.this);

      @Override
      protected Cursor doInBackground(Long... params) {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result) {
         super.onPostExecute(result);

         result.moveToFirst();
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu)  {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_fav_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) {
      switch (item.getItemId()) {
         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact() {
      AlertDialog.Builder alert = new AlertDialog.Builder(ViewFav.this);
      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 
      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()  {
            public void onClick(DialogInterface dialog, int button) {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewFav.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()  {
                     @Override
                     protected Object doInBackground(Long... params) {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result) {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }
} 
```

最后在您的活动/片段中放置一个最喜欢的按钮，当单击收藏夹按钮时，会在您的文本视图中获取内容并将它们添加为数据库中的条目，在这种情况下，数据库包含

```
 private long rowID; 
    private TextView nameEt;
    private TextView capEt;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout....);

         nameEt = (TextView) findViewById(R.id.textView1);
         capEt = (TextView) findViewById(R.id.textView2);

         //other stuff in OnCreate ......
    }

    private MenuItem itemfav;
    @Override
    public boolean  onCreateOptionsMenu(Menu menu) {
        itemfav = menu.add(0, 10, 10, "Favorite");
        itemfav.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            case 10:
                fav();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }

    }

    private void fav() {
        AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         Toast.makeText(Button2.this, "Item has been added to favorites", Toast.LENGTH_SHORT).show();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
    }

    private void saveContact() 
       {
          DatabaseConnector dbConnector = new DatabaseConnector(this);
              dbConnector.insertContact(nameEt.getText().toString(),capEt.getText().toString());

       } 
```

# ruby-on-rails-3 - 将远程 S3 载波图像克隆到另一个模型

> ID：13381353
> 
> 赞同：1
> 
> 时间：2012-11-14T15:02:51.997
> 
> 标签：ruby-on-rails-3, image, amazon-s3, carrierwave, fog

我有两个 ActiveRecord 模型都具有相同的 Carrierwave Uploader

```
Template < ActiveRecord:Base 
 mount_uploader :icon_image, ImageUploader
end

Profile < ActiveRecord:Base 
 mount_uploader :icon_image, ImageUploader
end 
```

图像远程存储在 Amazon S3 存储桶上，当我保存模板时。没问题。

我通过从模板克隆它来创建一个新的 Profile 对象。我还想克隆或复制与模板一起保存的远程图标，并将其远程保存在 S3 上以获取相关配置文件

注意'我认为这应该是一个副本，而不是对原始模板 url 的引用

在我的控制器中，我在视图中编辑然后保存之前克隆对象。我尝试了以下不起作用

```
profile.remote_icon_image_url = template.icon_image_url 
```

我也尝试了一些变化，例如

```
profile.icon_image = template.icon_image 
```

任何人都可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:03:25.550

在解决这个问题几个小时后，找到了一种解决方法，如果不是真正的解决方案的话。

该问题似乎是试图通过 HTTPS 下载图像。因此，我们的蛮力解决方案是将目标 URL 转换为 HTTP：

```
new_page.remote_header_image_url = self.header_image.url.gsub(/^https/i, 'http') 
```

# jquery - rails 3.2 和数据表示例

> ID：13381358
> 
> 赞同：0
> 
> 时间：2012-11-14T15:03:01.997
> 
> 标签：jquery, datatables

尝试使用我的 rails 3.2 应用程序进行简单的数据表实现。我有这个在 PHP 中工作的确切应用程序，并希望将其移植到 ruby​​。我不是一个只是学习它的 Ruby 专家。

我基本上遵循这个例子，但使用我的代码和数据库

[http://asciicasts.com/episodes/340-datatables](http://asciicasts.com/episodes/340-datatables)

*   我创建了我的表并给了它一个类和 ID

*   我添加了这个文件 - > /app/assets/javascripts/products.js.coffee 其中包含

    jQuery -> $('#run-table').dataTable

    ```
     sPaginationType: "full_numbers"
      bServerSide: true
      iDisplayLength: 4
      aaSorting:[] 
    ```

我在我的网页上看到的是一个格式正确的表格，其中列、排序图标、搜索过滤器文本框、分页号都正确。但它不起作用。

如果我做“bServerSide：true”，那么任何时候我与我得到的表交互

```
"NetworkError: 404 Not Found  - http://localhost:3000/null?sEcho=1&iColumns=11&sColumns=&iDisplayStart=0&iDisplayLength=4&... 
```

因此，如果我排序或添加搜索过滤器，我会收到该错误。

如果我将其更改为“bServerSide：false”，那么我会得到一个外观正确的表，其中加载了我的初始数据但什么也不做。没有排序，没有过滤，没有分页。

该示例代码中我没有做的部分是 -> /app/datatables/products_datatable.rb 因为我没有看到需要它。使用 PHP，我不使用服务器端及其大约 4 行代码来完成这项工作。

任何帮助都会很棒，如果需要，我可以提供更多代码片段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:54:26.333

如果您使用“bServerSide”=true，那么您应该为您自己的服务器端处理实现提供“sAjaxSource”，例如从数据库中检索数据，进行排序、过滤、分页查询。

否则，您所要做的就是使用与 jquery 数据表初始化中相同的 id 定义您的表，这就是为了让它与过滤、排序、分页一起工作。

没有服务器端，这样的初始化就足够了：

```
 jQuery ->
 $('#tableid').dataTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:48:57.677

这是视图中我的代码中的一个错误。我在循环中定义了 tbody，我需要将它移到循环上方。我花了几个小时盯着它看却没有看到它的愚蠢错误。

现在工作正常

```
 <tbody>

<% @run.each do |c| %>

    <tr>

    <td><%= link_to c.idRun, step_url(c.idRun) -%>  </td>

    <td> <%= c.run_name %></td> 
```

# c++ - 过零符号功能

> ID：13381359
> 
> 赞同：3
> 
> 时间：2012-11-14T15:03:04.020
> 
> 标签：c++, function, math, sign

我写了一个 Sign 函数，想知道它是否正确（愚蠢的问题，我知道！）我只是想知道这是否是解决这个特定任务的最佳方法：

```
template<typename T>
T sign(T n)
{
  if(n < 0) return -1;
  if(n > 0) return 1;
  return 0;
} 
```

这会为大型数据集提供足够准确的结果吗？任何人都可以看到一个问题，当我把它放到现实生活中时可能会出现这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:06:50.797

我会`return 0;`改为`return n;`. 如果`n`是`NaN`，`sign`应该返回`NaN`，不是`0`。

# filter - 这封电子邮件有什么垃圾邮件？

> ID：13381366
> 
> 赞同：0
> 
> 时间：2012-11-14T15:03:15.507
> 
> 标签：filter, html-email, spam

我正在构建一个电子邮件收据，在用户注册我们的一个网站上即将举行的活动后，该收据会返回给用户，但 gmail 始终将其发送到垃圾邮件文件夹。我已将此问题隔离到此 html 电子邮件的正文内容中：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Zzzzzzz Online PATHe Registration</title>
  </head>
  <body>

    <p>Dear <?php echo $data['f_name']; ?>,</p>

    <p>
    Thank you for registering for our upcoming open house.  We will be in
    touch shortly to arrange a meeting time on <?php echo $data['date'];?>.
    </p>

    <p>
    The open house will be given at our Zzzzzzz Avenue Campus located at 
    175 Zzzzzzz Ave, Zzzzzzz AL.
    Look up directions on <a href="<?php echo $gmaps;?>" target="_blank">
    Google Maps</a> or <a href="<?php echo $mapq;?>" target="_blank">Mapquest</a>.
    </p>

    <p>We look forward to meeting you,</p>

    <p>
    <a href="http://online.zzzzzzz.edu">Zzzzzzz College Online</a><br/>
    <a href="mailto:info@zzzzzzz.edu">info@zzzzzzz.edu</a><br/>
    (877)772-2265
    </p>

  </body>
</html> 
```

我试过这些东西：

*   具有完全验证的 doctype 的 Html
*   用全长 url 替换了地图站点的缩短 url
*   尝试了没有任何网址的电子邮件

所以我能想到的只是所使用的语言，但这是一个完全有效的回应。填写此表格的用户要求学院与他们联系，以便为他们选择的日期安排会议。我在这里想念什么？

编辑：以下内容通过垃圾邮件测试就好了。具有讽刺意味的是，我们从这个开始但重写了它，因为它太笼统了，并且没有为用户提供有关开放日位置的可操作信息：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Zzzzzz Online Open House Registration</title>
  </head>
  <body>

        <p>Dear Micah,</p>

        <p>Thank you for registering for our upcoming open house. We will be in touch
        shortly to arrange a time and to answer any questions you may have.</p>

        <p>For directions and more information, please visit out open house page at
        http://online.zzzzzzz.edu/open-house. In the meantime, if you have any
        questions or concerns that come up between now and the open house please feel
        free to contact us.</p>

        <p>We look forward to meeting you,</p>

        <p>Zzzzzz College Online</p>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:16:07.507

我不是该领域的专家，但在 Google 上快速搜索您收到的错误表明您应该同时包含 text/html MIME 类型和 text/plain MIME 类型，因为普通电子邮件将同时包含这两者，而SPAM 通常只包含 text/html 版本。

# mysql - 在 MySQL 中使用 IF 语句

> ID：13381367
> 
> 赞同：1
> 
> 时间：2012-11-14T15:03:20.727
> 
> 标签：mysql, sql, if-statement

我有以下 SQL 语句。我想做的是包含一个 IF 语句，以涵盖其中一列返回 0 或空白结果的可能性，没有 0 ID。在这种情况下，我试图涵盖`magez_cfv_nations`结果可能返回零或空白结果的可能性。

```
SELECT c.clan_name, n.nation_name, 
    CONCAT(r.rarity_shorthand, " - ", r.rarity_name) AS rarity_text, 
    t.trigger_name, s.skill_name
 FROM `magez_cfv_cards` AS cards
 JOIN `magez_cfv_clans` c ON cards.clan_id = c.clan_id
 JOIN `magez_cfv_nations` n ON cards.nation_id = n.nation_id
 JOIN `magez_cfv_rarity` r ON cards.rarity_id = r.rarity_id
 JOIN `magez_cfv_trigger` t ON cards.trigger_id = t.trigger_id
 JOIN `magez_cfv_skills` s ON cards.skill_id = s.skill_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:06:41.500

你需要一个[LEFT JOIN](http://www.w3schools.com/sql/sql_join_left.asp)

> LEFT JOIN 关键字返回左表 (table_name1) 中的所有行，即使右表中没有匹配项

试试这个

```
SELECT c.clan_name, n.nation_name, 
    CONCAT(r.rarity_shorthand, " - ", r.rarity_name) AS rarity_text, 
    t.trigger_name, s.skill_name
 FROM `magez_cfv_cards` AS cards
 JOIN `magez_cfv_clans` c ON cards.clan_id = c.clan_id
 LEFT JOIN `magez_cfv_nations` n ON cards.nation_id = n.nation_id
 JOIN `magez_cfv_rarity` r ON cards.rarity_id = r.rarity_id
 JOIN `magez_cfv_trigger` t ON cards.trigger_id = t.trigger_id
 JOIN `magez_cfv_skills` s ON cards.skill_id = s.skill_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:07:26.650

你应该使用的函数是`IIF()`，它的语法是

```
IIF([condition],[if true],[if false]) 
```

# jquery - 如何将字符串中的javascript块附加到html中？

> ID：13381368
> 
> 赞同：1
> 
> 时间：2012-11-14T15:03:20.600
> 
> 标签：jquery, html

我有一个 ajax 调用，它返回以下响应：

```
<div class="content">
    <script language="JavaScript">  
        function validate(){
            alert('validate is working');
        }
    </script>
    <div class="container">
        <a href="#" onclick="javascript:validate();">my button</a>
    </div>
</div> 
```

现在，我想将响应转换为 html 并将其附加到进行 ajax 调用的页面。

```
$.get('test.php', function(data) {
    $('#someTarget').append($(data).find('.content').html());
}); 
```

我已经尝试过上面的代码，但似乎这只是附加容器 div。有没有办法将 javascript 代码块附加到我现有的页面中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:41:34.020

在您的代码中有两个问题：

```
$('#someTarget').append($(data).find('content').html()); 
```

1.  `$(data)`在将脚本插入 DOM 之前，会解析*并执行脚本*

2.  假设你的意思`$(data).find('.content').html()`是 html() 返回内容的 innerHTML，你只需要`$(data)`.

试试这个：

```
<div class="content">
    <style type="text/javascript">  
        function validate(){
            alert('validate is working');
        }
    </style>
    <div class="container">
        <a href="#" onclick="javascript:validate();">my button</a>
    </div>
</div> 
```

现在有一个技巧：我`<style>`用来包装脚本，应该在解释并插入 DOM 之后执行。

```
$.get('test.php', function(data) {

    // parse HTML to DOM
    var $data = $(data);

    // take the scripts out
    var $inlineScripts = $('style[type="text/javascript"]', $data).remove();

    // Now append the DOM
    $('#someTarget').append($data);

    // And globalEval the scripts
    $inlineScripts.each(function () {
        $.globalEval(this.innerText);
    });
}); 
```

Okay for your simple validate function that gets called by a click handler, you currently don't need my trick for inline scripts, however you will need it, when you have active scripts, that should be executed after the HTML is parsed *and* inserted.

Update: If you don't want the '.content' to be inserted, don't use html() - because it returns a string, so you do parse the html twice. Use instead `.append( $(".container", $(data)) )` or `.append( $(data).find(".container") )`.

# javascript - 如何在jQuery中首先隐藏类并仅在悬停时显示？

> ID：13381369
> 
> 赞同：0
> 
> 时间：2012-11-14T15:03:22.613
> 
> 标签：javascript, jquery, css, jquery-ui

我有以下切换脚本：

```
 $('.edit_bg').on({
    mouseenter: function () {
      $(this).addClass('edit_bg');
    },
    mouseleave: function () {
      $(this).removeClass('edit_bg');
    }
  }); 
```

但这在我第一次悬停该 div 后有效。

我应该如何在开始时从 div 中删除所有`.edit_bg`类并能够在悬停时显示它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:08:05.293

在 on 功能之后，只需执行`removeClass`.

```
$('.edit_bg').on({
    mouseenter: function () {
        $(this).addClass('edit_bg');
    },
    mouseleave: function () {
        $(this).removeClass('edit_bg');
    }
}).removeClass('edit_bg'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:04:26.947

我了解您尝试使用 Javascript/jQuery 实现的目标，但您只需使用 css 即可实现：

```
.edit_bg
{
    background-color: blue;
}

.edit_bg:hover
{
    background-color: red;
} 
```

看，妈！没有javascript！[http://jsfiddle.net/adrianonantua/rv9ht/](http://jsfiddle.net/adrianonantua/rv9ht/)

# coffeescript - CoffeeScript 中的 @function 不像宣传的那样工作

> ID：13381370
> 
> 赞同：1
> 
> 时间：2012-11-14T15:03:28.853
> 
> 标签：coffeescript, ruby-on-rails-3.2

导轨 3.2.8。在将我的一些 JS 函数转换为 CoffeeScript 时，我遇到了几个问题，这些问题说像这样声明一个函数：

```
@foo = (bar) -> 
```

放入`foo`全局命名空间。但事实并非如此，因为我的函数调用了应用程序的其他地方，尤其是`.js.erb`文件中的函数。

以下是有效的方法：

```
foo = (bar) ->

window.foo = foo 
```

`.js.erb`这样，我在文件中的所有调用都可以正常工作。

`@foo =`符号不能像我预期的那样工作的原因是什么？这比必须记住添加额外的行以将函数公开给全局命名空间要容易得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:05:49.960

`@foo`翻译成`this.foo`

`foo`翻译成`var foo`

这两者之间有很大的不同。

* * *

例如：

```
bar = (baz) -> 
 @bar = 5
 lemon = @bar + baz

 @foo = (bar) ->
  lemon
 return @

Bar = new bar(12) 
```

转换为：

```
var Bar, bar;

bar = function(baz) {
  var lemon;
  this.bar = 5;
  lemon = this.bar + baz;
  this.foo = function(bar) {
    return lemon;
  };
  return this;
};

Bar = new bar(12); 
```

请参阅生成代码的小提琴演示：http: [//jsfiddle.net/maniator/rXWw2/](http://jsfiddle.net/maniator/rXWw2/)

[这是一个向您展示 CoffeeScript 及其生成代码的链接](http://coffeescript.org/#try%3abar%20%3D%20%28baz%29%20-%3E%20%0A%20%40bar%20%3D%205%0A%20lemon%20%3D%20%40bar%20%2B%20baz%0A%0A%20%40foo%20%3D%20%28bar%29%20-%3E%0A%20%20lemon%0A%20return%20%40%0A%0ABar%20%3D%20new%20bar%2812%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:12:57.090

我只是想添加一些对理解为什么初始 @foo = () -> "abc" 不添加到全局窗口对象很重要的内容。

Coffeescript wraps - 一旦编译，它将每个 .coffee 文件的所有内容包装到一个立即执行的周围匿名函数中。因此，明确地出于这个原因，全局命名空间没有被污染，从而隐含地保护开发人员不创建“邪恶的”全局变量。

因此，您的 foo 成为匿名包装函数的成员函数 - 无用的*gg* ...

我想无论如何你想要的是你的全局配置对象或其他东西，你只需添加你的定义——你肯定不是为了现在快速方便地访问而真正创建全局变量，是吗？:)

# objective-c - calloutAccessoryControlTabbed 委托没有被调用

> ID：13381373
> 
> 赞同：0
> 
> 时间：2012-11-14T15:03:37.767
> 
> 标签：objective-c, ios, ios6

它也没有给我任何错误或警告。我不知道我可以提供哪些其他相关信息或详细信息。如果还不够，请告诉我。

*   _mapView.delegate 设置为 self

设置 calloutAccessoryControl 的方法：

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

    NSLog(@"Enter viewForAnnotation delegate");

    static NSString *identifier = @"MyLocation";
    if ([annotation isKindOfClass:[MapViewAnnotation class]]) {

        MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [_mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
        if (annotationView == nil) {
            annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
        } else {
            annotationView.annotation = annotation;
        }

        annotationView.enabled = YES;
        annotationView.canShowCallout = YES;

        UIImageView *callOutButtonImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"arrow.png"]];
        annotationView.rightCalloutAccessoryView = callOutButtonImage;

        annotationView.image=[UIImage imageNamed:@"green-node.png"];

        return annotationView;
    }

    return nil;
} 
```

calloutAccessoryControl 选项卡：

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control{
    NSLog(@"Control Tabbed!");
    _scrollView.hidden = false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:11:30.723

以下来自`mapView:annotationView:calloutAccessoryControlTapped:`MKMapViewDelegate 协议参考文档中的讨论：

*附件视图包含自定义内容并位于注释标题文本的任一侧。如果您指定的视图是 UIControl 类的后代，则地图视图会在用户点击您的视图时调用此方法以方便使用。您可以使用此方法响应点击并执行与该控件相关的任何操作。例如，如果您的控件显示有关注释的附加信息，则可以使用此方法显示带有该信息的模式面板。*

我可以看到您已将 UIImage 添加到注释视图的右侧标注附件视图中。UIImage 对象不继承自 UIControl。UIButton 对象可以工作。

# php - PHP 显示数组元素

> ID：13381377
> 
> 赞同：0
> 
> 时间：2012-11-14T15:03:41.787
> 
> 标签：php, arrays

有数组

```
Array ( 
    [3] => 
    stdClass Object ( 
        [term_id] => 3 
        [name] => Lietuviu 
        [slug] => lietuviu 
        [term_group] => 0 
        [term_taxonomy_id] => 3 
        [taxonomy] => kalba 
        [description] => 
        [parent] => 0 
        [count] => 7 
        [object_id] => 135 
    ) 
) 
```

想要显示：[name] => Lietuviu，尝试`$var[3][name]`，但这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:06:48.947

那是因为 Array 实际上是一个对象。将 $var 放入此函数中：

```
function object_to_array($data) 
    {
      if(is_array($data) || is_object($data))
      {
        $result = array(); 
        foreach($data as $key => $value)
        { 
          $result[$key] = object_to_array($value); 
        }
        return $result;
      }
      return $data;
    } 
```

像这样：

```
$realArray = object_to_array($var); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:07:34.857

索引下的值`3`是一个 stdClass 对象，您必须使用箭头运算符`->`来获取它的值：

```
print $var[3]->name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:09:09.807

由于您的`$var[3]`元素是一个对象，因此您必须像这样访问它的属性：

```
echo $var[3]->name; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:12:12.147

您可以使用定义的 object_to_array 或通过以下方式访问该值： `$var[3]->name`

# ruby-on-rails - 为什么 ActiveRecord 只寻找 id = 1 的模型对象？

> ID：13381382
> 
> 赞同：0
> 
> 时间：2012-11-14T15:04:06.190
> 
> 标签：ruby-on-rails, activerecord

我正在尝试销毁属于类别模型的链接（通过我的浏览器）。我可以成功删除具有`id`of`1`和`category_id`of的链接`1`，但是当我尝试删除具有任何其他 id 的链接时，我会遇到：

```
ActiveRecord::RecordNotFound in LinksController#destroy
Couldn't find Link with id=1 [WHERE "links"."category_id" = 1] 
```

非常令人沮丧，因为我不想删除 id 为 1 的链接！但是我在请求参数中看到它总是试图删除带有 的链接`"category_id"=>"1", "id"=>"1"}`，无论我点击什么链接。查看我的开发数据库中的链接确认它们存在并且 ID 不是 1...

这是 LinksController#destroy 的代码：

```
class LinksController < ApplicationController

def destroy
    @category = Category.find(params[:id])
    @link = @category.links.find(params[:id])
    @link.destroy
    redirect_to category_url(@category)
end 
```

这是我试图删除这些讨厌的链接的视图的代码：

```
<h1><%= @category.category %></h1>
<p><%=  @category.description %></p> 
<ul>
    <% @category.links.each do |link| %>
    <li>
    <%= link_to link.title, link.url %> |
    <%= link_to "delete", category_link_path(@category), :method => :delete %>
    </li>
 <% end %> 
```

编辑：添加参数

```
{"_method"=>"delete",
 "authenticity_token"=>"[removed]",
 "category_id"=>"1",
 "id"=>"1"} 
```

编辑：添加 config/routes.rb：

```
LinkManager::Application.routes.draw do

  resources :categories do
    resources :links, only: [:create, :destroy]
  end

  root :to => 'categories#index' 
```

我在看什么？有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:18:46.920

你的电话`category_link_path`是省略了一些东西。也许它应该看起来像这样？

```
<%= link_to "delete", category_link_path(@category, link), :method => :delete %> 
```

看起来您正在`category_id`通过传入 来完成路线的一部分`@category`，但您还需要`link`提供`id`.

然后你需要修复你的`destroy`行为：

```
def destroy
  @category = Category.find(params[:category_id])
  @link = @category.links.find(params[:id])
  @link.destroy
  redirect_to category_url(@category)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:19:12.927

在您的 category_link_path 上，您应该传递您的类别和链接。就像是

`category_link_path(@category, link)`

此外，在您的控制器上，要找到您的类别，它应该看起来像`Category.find(params[:category_id]`

# html-editor - Plone 中的 TinyMCE 缺少工具栏

> ID：13381383
> 
> 赞同：1
> 
> 时间：2012-11-14T15:04:07.250
> 
> 标签：html-editor

当我想在 Plone 中添加页面时，TinyMCE wysiswyg 编辑器的文本区域中缺少工具栏。这是我收到的错误消息：

```
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module Products.CMFPlone.FactoryTool, line 453, in __call__
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module Products.CMFFormController.FSControllerPageTemplate, line 91, in __call__
  Module Products.CMFFormController.BaseControllerPageTemplate, line 28, in _call
  Module Products.CMFFormController.ControllerBase, line 231, in getNext
  Module Products.CMFFormController.Actions.TraverseTo, line 35, in __call__
ValueError: Unable to find update_version_before_edit 
```

（我第一次安装 Plone 后，工具栏确实显示在编辑器中。另一个所见即所得的编辑器 Kupu 工作正常）。

作为 Plone 的新手，我非常感谢在解决这个问题方面的任何帮助。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:26:11.300

看来您已经升级了 Plone 版本，并且缺少一些升级步骤。如果您的 Plone Site 未升级到文件系统版本，则可能会发生这种情况。

尝试在您的实际 Plone 站点中执行以下步骤（请先备份！）：

1.  转到您的 Plone 安装的 ZMI (site_url/manage)
2.  选择“portal_migration”工具
3.  如果您看到一个名为“升级”的按钮，请单击它，然后再次尝试添加主页。
    如果您看到“您的 Plone 实例是最新的”或升级后问题仍然存在，请按照以下步骤操作
4.  选择“portal_setup”工具
5.  选择“导入”选项卡
6.  在“选择配置文件或快照”中选择“CMFEditions”
7.  向下滚动并单击“导入所有步骤”

如果您的 Plone 安装正确并且没有版本冲突，那么您在同一个 Zope 实例中创建的任何新 Plone 站点都应该可以正常工作。此步骤可用于修复升级后创建的 Plone 站点。

# python - 在 Python 中使用 Openpyxl 修改现有 Excel 文件

> ID：13381384
> 
> 赞同：22
> 
> 时间：2012-11-14T15:04:11.987
> 
> 标签：python, csv, openpyxl

我基本上是在尝试从 CSV 文件中复制一些特定的列，然后使用 python 将它们粘贴到现有的 excel 文件[*.xlsx] 中。例如，您有一个这样的 CSV 文件：

```
 col_1   col_2   col_3  col_4
  1        2       3     4
  5        6       7     8
  9       10      11    12 
```

所以，我想复制 col_3 和 col_4 并将 col_8 和 col_9 中的它们粘贴到现有的 excel 文件中[这是一个 .XLSX 格式]。我已经尝试以各种方式解决这个问题，但找不到确切的方法。我试过这样的事情：

```
with open( read_x_csv, 'rb') as f:
    reader = csv.reader(f)
    for row in reader: 
            list1 = row[13] 
            queue1.append(list1)
            list2 = row[14] 
            queue2.append(list2)
            list3 = row[15] 
            queue3.append(list3)
            list4 = row[16] 
            queue4.append(list4) 
```

接着

```
 rb = open_workbook("Exact file path.....")
 wb = copy(rb)
 ws = wb.get_sheet(0) 

 row_no = 0

 for item in queue1:
    if(item != ""):
            ii = int(item)
            ws.write(row_no,12,ii) 
            row_no = row_no + 1
            #ws.write(item)
            print item
    else:

            ws.write(row_no,12,item) 
            row_no = row_no + 1

  wb.save("Output.xls") 
```

但这个解决方案的问题是它不允许我保存为 *.XLSX 格式，这是我严格要求的。

我尝试使用 Openpyxl，因为它可以处理 *.XLSX 格式，但找不到修改现有 excel 文件的方法。有人可以帮忙吗？

疑问：1）我们真的可以从 CSV 文件中读取一整列并使用 python 存储到数组/列表中吗？2）我们可以使用openpyxl或任何其他包修改现有的.XLSX格式的excel文件吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-14T15:50:05.717

您可以尝试以下实现

```
from openpyxl import load_workbook
import csv
def update_xlsx(src, dest):
    #Open an xlsx for reading
    wb = load_workbook(filename = dest)
    #Get the current Active Sheet
    ws = wb.get_active_sheet()
    #You can also select a particular sheet
    #based on sheet name
    #ws = wb.get_sheet_by_name("Sheet1")
    #Open the csv file
    with open(src) as fin:
        #read the csv
        reader = csv.reader(fin)
        #enumerate the rows, so that you can
        #get the row index for the xlsx
        for index,row in enumerate(reader):
            #Assuming space separated,
            #Split the row to cells (column)
            row = row[0].split()
            #Access the particular cell and assign
            #the value from the csv row
            ws.cell(row=index,column=7).value = row[2]
            ws.cell(row=index,column=8).value = row[3]
    #save the csb file
    wb.save(dest) 
```

*   我们真的可以从 CSV 文件中读取一整列并使用 python 存储到数组/列表中吗？*不，因为文件是按顺序读取的，所以 csv 阅读器无法将一列数据读取到一行。相反，您可以阅读全部内容并使用 izip 和 islice 来获取特定列。你也可以使用 numpy.array*

*   我们可以使用 openpyxl 或任何其他包修改现有的 .XLSX 格式的 excel 文件吗？*是的，看上面的例子*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2021-07-17T09:09:15.733

由于它是 2021 年，`get_sheet_by_name`因此已弃用并引发`DeprecationWarning`以下消息： `Call to deprecated function get_sheet_by_name (Use wb[sheetname]).`

为了不引发警告，可以使用以下代码段。

```
from openpyxl import load_workbook

file_path = 'test.xlsx'

wb = load_workbook(file_path)

ws = wb['SHEET_NAME']  # or wb.active

ws['G6'] = 123

wb.save(file_path) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-19T22:25:09.840

```
from openpyxl import load_workbook
# Class to manage excel data with openpyxl.

class Copy_excel:
    def __init__(self,src):
        self.wb = load_workbook(src)
        #self.ws = self.wb.get_sheet_by_name("Sheet1") # Deprecated
        self.ws = self.wb["Sheet1"]
        self.dest="destination.xlsx"

    # Write the value in the cell defined by row_dest+column_dest         
    def write_workbook(self,row_dest,column_dest,value):
        c = self.ws.cell(row = row_dest, column = column_dest)
        c.value = value

    # Save excel file
    def save_excel(self) :  
        self.wb.save(self.dest) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-26T18:40:06.107

### 打开现有的 excel 文件（使用`load_workbook(...)`）

就如此容易！

```
from openpyxl import load_workbook
wb = load_workbook('test.xlsx') 
```

请参阅文档：[https ://openpyxl.readthedocs.io/en/stable/tutorial.html#loading-from-a-file](https://openpyxl.readthedocs.io/en/stable/tutorial.html#loading-from-a-file)

### 在末尾追加数据（保留旧数据）

```
work_sheet = wb.active # Get active sheet
work_sheet.append(['John', 'Customer', 'He likes football']) 
```

### 将修改后的工作簿保存在`test.xlsx`

```
wb.save('test.xlsx') 
```

# javascript - 在随机位置写入文本

> ID：13381387
> 
> 赞同：1
> 
> 时间：2012-11-14T15:04:29.900
> 
> 标签：javascript

我对javascript相当陌生，我正在尝试创建一个界面，其中多个用户将一串文本输入到表单中，提交后，文本与以前的用户输入一起随机出现在页面上。有没有办法用javascript做到这一点？我主要在寻找一种将文本写入屏幕上特定位置的方法时遇到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:12:21.117

这个想法是你每次都创建一个新元素，并在其上设置以下 CSS 以便能够手动定位它：

```
position: absolute;
left: _px;
top: _px; 
```

哪里`_`可以通过`Math.random()`. 此函数返回一个介于 0 和 1 之间的十进制值，因此适当拉伸和舍入它以获得屏幕上的随机整数像素坐标：http: [//jsfiddle.net/6eTcD/2/](http://jsfiddle.net/6eTcD/2/)。

```
​document.querySelector("form").addEventListener("submit", function(e) {
    e.preventDefault();

    var fullWidth = window.innerWidth;
    var fullHeight = window.innerHeight;

    var text = this.querySelector("input[type='text']").value;

    var elem = document.createElement("div");
    elem.textContent = text;
    elem.style.position = "absolute";
    elem.style.left = Math.round(Math.random() * fullWidth) + "px";
    elem.style.top = Math.round(Math.random() * fullHeight) + "px";
    document.body.appendChild(elem);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:16:03.807

您可以尝试使用绝对定位的 div，如下所示：

在您的 html 代码中：我的文本

在你的 CSS #mydiv { position:absolute; 顶部：0；对：0；宽度：200px；}

你可以用jquery定位你的div

```
$('div.example').css('top', 100); 
```

参考：

1.  [分区样式](http://www.barelyfitz.com/screencast/html-training/css/positioning/)
2.  [jQuery改变风格](http://api.jquery.com/css/)

# java - 在控制器中使用多个 Spring JpaTransactionManager？

> ID：13381388
> 
> 赞同：0
> 
> 时间：2012-11-14T15:04:36.463
> 
> 标签：java, spring, transactions

我有一个使用 JPA 2 的 Spring MVC 应用程序。所有控制器都在类级别使用 @Transactional 进行注释。

是否可以将该注释保留在类级别并在方法级别使用另一个 @Transactional 注释简单地覆盖它？我有一种方法可以使 SERIALIZABLE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:31:01.330

您可以通过添加限定符来添加[多个事务管理器](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#tx-multiple-tx-mgrs-with-attransactional)，以区分应该使用哪一个，前提是它们已配置：

```
@Transactional("global")
public class SomeService {

    public void methodThatUsesTheGlobalTxManager() {
        // ...
    }

    @Transactional("special")
    public void methodThatUsesTheSpecialTxManager() {
        // ...
    }        
} 
```

# python - 如何在mako中引用多词词典键？

> ID：13381391
> 
> 赞同：0
> 
> 时间：2012-11-14T15:04:46.840
> 
> 标签：python, mako

我通过 将 csv 文件传递​​给 Mako `csv.DictReader`，并且字典使用行标题作为键。其中一些具有诸如“条目 ID”之类的名称。当我尝试在模板中引用这些多字键时，Mako 会抛出错误。具体来说，错误消息是`mako.exceptions.SyntaxException: (SyntaxError) invalid syntax (<unknown>, line 1)`。

以下代码演示了我遇到的问题：

```
from mako.template import Template

mydata = {'foo': 'bar', 'better foo': 'beach bar'}
working_template = Template("Let's go to the ${foo}")
fail_template = Template("Let's go to the ${better foo}")

# this works
print working_template.render(**mydata)
# this generates an Exception
print fail_template.render(**mydata) 
```

有没有办法为多字键转义空格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:04:46.840

我找到了一种可行的方法，但如果可能的话，我宁愿将字典作为 **kwargs 发送。这是工作解决方案：

```
from mako.template import Template

mydata = {'foo': 'bar', 'better foo': 'beach bar'}
working_template = Template("Let's go to the ${foo}")
fail_template = Template("Let's go to the ${mydata['better foo']}")

print working_template.render(**mydata)
print fail_template.render(mydata=mydata) 
```

# facebook - 广泛的目标类别

> ID：13381397
> 
> 赞同：1
> 
> 时间：2012-11-14T15:04:54.860
> 
> 标签：facebook, api, categories, ads

Facebook 将每个配置文件分类为类别（特别是广泛的目标类别），然后用于针对 Facebook 用户投放广告。是否可以检索用户的 BTC？非常感谢。阿尔诺

# jakarta-ee - 使用 jax-rs / resteasy 进行 Bean 验证 (jsr 303)

> ID：13381399
> 
> 赞同：4
> 
> 时间：2012-11-14T15:04:59.053
> 
> 标签：jakarta-ee, jax-rs, resteasy

执行验证的[resteasy 建议](http://docs.jboss.org/resteasy/docs/2.3.0.GA/userguide/html/Validation.html#d0e4058)`@ValidateRequest`是在您的 jax-rs 资源中使用注释：

```
@Path("resourcePath")
@ValidateRequest
public interface Resource {
   @POST
   @Path("insert")
   public String insert(@Valid FormBean form);
} 
```

但这会将**您的代码与特定的 jax-rs 实现联系起来**，这是我想避免的。是否有任何通用方法可以使用 JSR 303 注释来验证传入数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:27:00.770

试试[jcabi-aspects](http://www.jcabi.com/jcabi-aspects/jsr-303.html)，它在 AspectJ 的帮助下实现了 JSR-303。应该易于与 JAX-RS 结合使用。

# javascript - Javascript 库快速入门

> ID：13381401
> 
> 赞同：0
> 
> 时间：2012-11-14T15:05:00.443
> 
> 标签：javascript, jquery

我正在尝试构建一个 Javascript 库，该库将为我正在组合的 JQuery 插件提供一些功能。

我从网上搜索得到了以下骨架代码，虽然我不太确定它是如何工作的（我知道它是一个闭包）。我已经通过声明添加了我的函数。

```
(function(window, document, $) {

    function func_1(){
        return 1;
    }

    function func_2(){
        return 2;
    }

})(window, document, jQuery); 
```

所以我把上面的代码放在一个单独的 JS 文件中，然后在我的 HTML 页面中获取它，然后我运行尝试像这样运行函数（注意：我也设置了 JQuery）：

```
<script type="text/javascript">
        $(document).ready(function() {
            console.log(func_1());
        });
</script> 
```

但是，我似乎在 Firebug ( `ReferenceError: func_1 is not defined`) 中遇到了一些错误。

我有两个问题：

1.  我如何调用我的函数？！
2.  我希望能够以以下格式调用函数：`className.functionName()`. 我如何重组骨架代码以使我能够做到这一点，例如，像这样调用我的函数：`Device.func_1()`？

感谢您的预期帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:11:58.637

闭包用于对其余代码隐藏内部函数。您需要显式公开库的公共功能：

```
var Device = (function(window, document, $) {
    function func_1(){
         return 1;
    }

    function func_2(){
        return 2;
    }

    var internalDevice = {
        func_1: func_1,
        func_2: func_2
    };
    return internalDevice; // expose functionality to the rest of the code
})(window, document, jQuery); 
```

该`(function(window, document, $) {})(window, document, jQuery);`部分称为立即调用函数表达式 (IIFE)。它用于避免将所有库函数泄漏到全局范围内。否则，如果其他一些库有一个`func_1`函数，它将被覆盖或覆盖你的库的`func_1`.

函数的参数用于控制库如何影响代码的其他部分并依赖它。例如，有人可能会覆盖 window.$ 库，这样 $ 在代码中的任何地方都不再可用。但是由于您在闭包中有本地引用，您仍然可以访问它。

除了使用上面的代码 - 返回一个对象 - 您还可以将您的库直接分配给全局范围：

```
(function(window, document, $) {
    ...
    window.Device = internalDevice; // expose functionality to the rest of the code
})(window, document, jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:10:15.910

我只能回答第二个问题，但你可以这样做：

```
var Device = {
function func_1()
{
// your first function
},
function func_2()
{
// your second function
}
}; 
```

这样你就可以调用：

```
Device.func_1(); 
```

跳有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:12:32.410

当某个东西在一个闭包内时，它的作用域就变成了那个闭包。`func_1`并且`func_2`只能在调用它们的匿名函数内部和下面看到。

# c++ - 随机分配给 boost::ptr_vector

> ID：13381406
> 
> 赞同：0
> 
> 时间：2012-11-14T15:05:36.200
> 
> 标签：c++, pointers, boost, vector, ptr-vector

我想随机分配给 boost::ptr_vector。使用正常的 STL 向量我会这样做：

```
class A{

};

A* a1 = new A();
A* a2 = new A();

vector<A*> normal_vec;
normal_vec.resize(2);
normal_vec[1] = a1;
normal_vec[0] = a2; 
```

我正在尝试对 boost::ptr_vector 做同样的事情：

```
A* a1 = new A();
A* a2 = new A();

ptr_vector<A> boost_vec;
boost_vec.resize(2);

boost_vec[1] = a1;
boost_vec[0] = a2; 
```

但我收到以下错误：

```
no match for ‘operator=’ in ‘v.boost::ptr_vector<A>::<anonymous>.boost::ptr_sequence_adapter<T, VoidPtrSeq, CloneAllocator>::operator[] [with T = A, VoidPtrSeq = std::vector<void*, std::allocator<void*> >, CloneAllocator = boost::heap_clone_allocator, boost::ptr_sequence_adapter<T, VoidPtrSeq, CloneAllocator>::reference = A&, boost::ptr_sequence_adapter<T, VoidPtrSeq, CloneAllocator>::size_type = long unsigned int](1ul) = a1’ 
```

但我很难理解这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:09:15.750

您应该使用`ptr_vector<T>::replace`而不是`operator[]`. `operator[]`返回而`T&`不是`T*&`，因此您只能分配值而不是指针。

另请注意，当第二个`new`for `a2`throws`a1`未在下面的代码中删除时，您会发生内存泄漏：

```
A* a1 = new A();
A* a2 = new A(); 
```

考虑使用`std::unique_ptr`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:14:17.373

另请注意您的程序有错误。索引从 0 而不是 1 开始。

# jquery - 调试 getScript()

> ID：13381408
> 
> 赞同：0
> 
> 时间：2012-11-14T15:05:38.400
> 
> 标签：jquery, google-chrome, getscript

使用 Google Chrome (Chromium)，是否可以观看/查看`$.getScript()`将外部脚本加载到您的网页中？

基本上，我根据用户偏好将许多脚本动态加载到我的网页中，这会导致问题，我想检查是否插入了特定脚本，如果它被插入，我想知道它是否是插入一次或多次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:08:28.577

您可以在开发者控制台的网络选项卡中看到它们。按 F12 并转到 Network 选项卡，您将看到该页面上加载的所有资源。（打开后需要刷新。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T15:44:34.200

我同意……失败了……

在 Firefox 中，您可以使用 !textToSearch 搜索任何声明，它也会在 $.getScript() 加载的隐藏文件中搜索。这边走

在 Chrome 中它不起作用......但您可以添加一个 Workspace 文件夹并将其链接到您的源。只需右键单击服务器（在源选项卡中）和“将文件夹添加到工作区”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-27T20:35:06.963

> 使用谷歌浏览器，是否可以观看/看到 $.getScript() 将外部脚本加载到您的网页中？

是的，如前所述，您按下`F12`以访问`Developer console`并转到`Network`选项卡。

红色矩形内的文件已加载`$.getScript()`

[![Chrome 中的网络标签](../Images/7fb11a8e9ab728df2749c7b7c91db007.png)](https://i.stack.imgur.com/ictl1.jpg)

# jquery - 无法通过 JQuery ping Web 服务

> ID：13381411
> 
> 赞同：0
> 
> 时间：2012-11-14T15:05:44.317
> 
> 标签：jquery, ajax

我正在尝试编写一些 JavaScript 来调用我创建的 Web 服务。此 Web 服务是另一个 Web 服务的一部分

```
function ping() {
  $.ajax({
    url: "http://myserver/OtherSite/ping?$format=json",
    dataType: "jsonp",
    type: "GET",
    success: ping_Succeeded,
    error: ping_Failed
  });
}

function ping_Succeeded(result) {
  alert("success");
}

function ping_Failed(e1, e2, e3) {
  console.log(e1 + "\n" + e2 + "\n" + e3);
} 
```

当我执行此代码时，我在 Fiddler 中注意到我对 Web 服务的请求很好。返回 200。我期待的 JSON 就在那里。但是，在 JavaScript 控制台中，我看到一条错误消息：“Uncaught SyntaxError: Unexpected Token:”。

在查看控制台时，我注意到以下内容：“消息：“未调用 jQuery18209005181000102311_1352904505837”。

我不明白我做错了什么。有人可以告诉我我的代码有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:17:06.777

看起来您缺少将 JSON 包装到回调调用中。因为`dataType:"jsonp"`jquery 会向这样的 URL 发送请求：

```
OtherSite/ping?$format=json&callback=jQuery18204326352379284799_1352906037982&_=1352906037995 
```

因此，您必须从回调中获取名称并像这样（在服务器上）包装您的响应：

```
 jQuery18204326352379284799_1352906037982({ "d":{ "result":"Test 37" } }) 
```

或者您可以尝试替换`dataType:"jsonp"`为`dataType:"json"`

# c# - 在 C++ 中使用 COM/ATL 接口时 C# 对象未销毁

> ID：13381413
> 
> 赞同：1
> 
> 时间：2012-11-14T15:05:47.373
> 
> 标签：c#, c++, com, atl

最近我正在做一个涉及 DLL 模块（用 C# 创建）并且我需要在我的应用程序中使用（用非托管 C++ 编写）的小项目。为此，我使用了 ATL/COM。

我注意到，即使我在 C++ 应用程序中使用[_com_ptr_t](http://msdn.microsoft.com/en-us/library/417w8b3b%28v=vs.80%29.aspx)来处理我的核心 COM 接口，C# 对象的析构函数也仅在我的应用程序关闭时才被调用。

让我给你一些资料，让事情更清楚一点：

我的一些 C# 代码：

```
[ComVisible(true)]
[InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIDispatch)]
public interface ITestCOM
{
    [DispId(1)]
    void Connect([In, MarshalAs(UnmanagedType.U2)] ushort value);
}

[ComVisible(true)]
[ClassInterface(ClassInterfaceType.None)]
[ComSourceInterfaces(typeof(ITestCOMEvents))]
public partial class TestCOM : ITestCOM
{
   ...
   ~TestCOM()
   {
      MessageBox.Show("DESTRUCTOR");
   }
   ...
   public void Connect(ushort value)
   {
      ...
   }
} 
```

我正在使用以下内容创建 .tlb 文件：“ **RegAsm.exe TestCOM.dll /tlb:Test.tlb /codebase** ”

在我的 C++ 头文件中，我有：

```
#import "C:\...\mscorlib.tlb"
#import "......\TestCOM.tlb" named_guids exclude("ISupportErrorInfo")

#include <afxdisp.h>
#include <atlcom.h>

class Unit : public ::IDispEventSimpleImpl<0, Unit, &__uuidof(TestCOM::ITestCOMEvents)>
{
public:
   BEGIN_SINK_MAP(Unit)
      SINK_ENTRY_INFO(0, __uuidof(TestCOM::ITestCOMEvents), 0x1, OnEventCallback, &OnEventCallbackDef)
   END_SINK_MAP()

   ...

private

   TestCOM::ITestCOMPtr mTestCOM;
   // NOTE: This would be the same as "_com_ptr_t<_com_IIID<TestCOM::ITestCOM,  &__uuidof(TestCOM::ITestCOM)> > mTestCOM;"
} 
```

我的 C++ 源文件创建了我的“mTestCOM”，如下所示：

```
mTestCOM.CreateInstance(TestCOM::CLSID_TestCOM) 
```

基本上就是这样。我可以像这样使用我的任何 C#“TestCOM”对象的函数：

```
mTestCOM->Connect(7); 
```

问题是：为什么我的 C# TestCOM 对象的析构函数仅在我的应用程序关闭时调用，而不是在我的 C++“单元”对象被销毁时调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:19:31.177

虽然我不熟悉 C# 和 COM 集成，但我知道 C# 中的析构函数与 C++ 中的析构函数的工作方式*非常*不同。AC# 对象是内存管理和垃圾收集的。这意味着在对象停止被它所属的应用程序引用并变得“不可访问”之后的某个时刻，垃圾收集器将销毁它。

所以第一件重要的事情是，一个对象被放弃和垃圾收集器销毁它之间的延迟是不确定的……它会“在未来的某个时候”发生，这很可能是在应用程序终止的时候。

其次，垃圾收集器并不总是在运行。有“内存压力”的概念，当您的应用程序正在分配大块内存并且可用的内存快用完时......此时，垃圾收集器将启动以摆脱旧的、无法访问的对象。如果您的应用程序没有分配大量内存，它将不会受到任何内存压力，垃圾收集器也不需要运行。

如果您想确定性地清理一些托管对象的资源，您将需要使用`IDisposable`接口之类的东西并显式调用该`Dispose`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:22:36.363

This is entirely normal and a side-effect of the garbage collector. Which only collects garbage, and runs the finalizer, when a managed app allocates enough memory to fill up a generation and trigger a collection. If you don't allocate enough then this won't happen until the app terminates.

This should not be a problem, make sure that you don't use the finalizer to do anything other than release unmanaged resources that were not disposed. Writing a finalizer is the wrong thing to do in 99.9% of all cases, finalizers are implementation details of .NET framework classes. Like the SafeHandle classes. There is otherwise no way to let deterministic destruction in the client app produce deterministic disposal in the managed code. If you do need to dispose members then you'll need to expose a method that the client code can call.

# java - Maven/Eclipse 插件：让新的 Maven 项目依赖于遗留的非 Maven 项目的最简单方法？

> ID：13381441
> 
> 赞同：2
> 
> 时间：2012-11-14T15:06:56.963
> 
> 标签：java, eclipse, maven

我在 Eclipse 中创建了一个新的 Maven 项目。在我需要将依赖项添加到另一个 Eclipse 项目（一个遗留实用程序项目，它没有 pom.xml 并且没有典型的 Maven 项目的目录结构之前）这一直很好。（它具有典型 Eclipse Java 项目的目录结构）。这个其他项目与 Maven 项目位于同一个 Eclipse 工作区中。

在查看其他帖子时，似乎通常的解决方案是为其他项目构建 jar 并将其安装在 Maven 中。但是我在 Maven 项目中编写代码时正在积极修改实用程序项目中的代码，所以我不能只安装一次 jar 来满足依赖关系。

处理这个问题的最简单方法是什么，以便我可以在两个项目中同时编码，并且还可以让 Maven 干净地构建？（当然 Eclipse 只需一个项目依赖项就可以很好地构建。）

**更新**

使用 Build Helper 插件将实用程序项目源文件夹添加到我的 pom 是解决方案的可行路径，但是我需要将实用程序项目的所有依赖项更新到我的新 Mavne 项目中，这也开始了整个过程耗时（也不是我想要的依赖链）。我认为如果我添加了所有依赖项，那么 Build Helper 建议就会奏效。

现在，我构建了实用程序项目 jar 并将其安装到 maven 中。结果证明这是最快的解决方案。我将尝试 Mavenize 实用程序项目，而不修改其结构（如下面的 FrVaBe 建议），然后看看我是否可以链接 pom。

我将保持这个问题开放，直到我有一个可以报告的完整解决方案，因为我认为这是其他人会遇到的问题（尝试将遗留项目与新的 maven 项目集成）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:13:49.890

对于开发时间，您可以将依赖项添加为[System Dependency](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#System_Dependencies)。在这种情况下，它将通过文件路径（可以是您正在开发的实用程序.jar 文件的路径）来解析。

它是按照上面链接中的描述添加的，例如：

```
 <dependencies>
    <dependency>
      <groupId>my-utility</groupId>
      <artifactId>my-utility</artifactId>
      <version>1.0</version>
      <scope>system</scope>
      <systemPath>${somewhere}/lib/my-utility.jar</systemPath>
    </dependency>
  </dependencies> 
```

系统依赖项的 maven 处理有时很特殊。例如，它们不会包含在战争包中！因此，当您完成后，我强烈建议您将实用程序库安装到 maven 存储库或将其部署到存储库管理器（Nexus/Artifactory）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:18:08.293

您可以将实用程序项目的 src 文件夹添加到 Eclipse 中的工作项目中。为您的开发目的。

```
right click on Working project
go to properties and choose java build path
go to source tab
Add your utility project src folder to that. 
```

稍后您可以将您的 jar 安装为 maven 依赖项。

# google-app-engine - 从 windows 主机访问 virtualbox guest ubuntu localhost:8080。拥有 NAT 和 Host-Only 适配器

> ID：13381444
> 
> 赞同：1
> 
> 时间：2012-11-14T15:07:05.403
> 
> 标签：google-app-engine, ubuntu, virtualbox

我在 virtualbox 上运行 Ubuntu，在其上运行谷歌应用程序引擎，它在 localhost:8080 上启动服务器。现在我想使用我的主机 Windows 浏览器对其进行测试（我在没有 GUI 的情况下运行 Ubuntu，并希望继续这种方式）。

我有一个配置了静态 IP 192.168.56.101 的仅主机适配器。我也有一个 NAT 适配器。

现在我假设我可以通过 192.168.56.101:8080 从我的主机 Windows 访问在我的来宾 ubuntu localhost:8080 上运行的应用引擎服务器。不过似乎不起作用。

有人可以告诉我我做错了什么吗？

# google-sheets - 具有两个条件的 VLOOKUP

> ID：13381446
> 
> 赞同：0
> 
> 时间：2012-11-14T15:07:10.723
> 
> 标签：google-sheets, google-sheets-formula, gs-vlookup

我有两张表，采购和销售：

购买：

SKU SID NID 成本
001 A1 9A $1.07
001 A2 4A $1.07
002 A1 5B $2.24

销售量：

SKU SID NID 销售
001 A2 10.99 美元
001 A1 9.99 美元

所以，我想在销售的“NID”列中做一个 VLOOKUP，以从“购买”表中获取“NID”，其中“SKU”和“SID”从“购买”表中匹配“SKU”和“SID”在销售单。

我可以匹配两者之一。例如，我可以这样做来单独匹配 SKU：

```
VLOOKUP(A2,Purchases!$A:$D,3,FALSE) 
```

但是，我还需要匹配“SID”，因为基于“SKU”和“SID”组合的“NID”有不同的值。如果有比 VLOOKUP 更好的选择，那也没关系。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:06:45.713

要在没有帮助列的情况下实现这一点：

`=INDEX(Purchases!C:C;MATCH(1;(Purchases!A:A=A2)*(Purchases!B:B=B2);0))`

（您需要在 Excel 中使用 Ctrl+Shift+Enter 确认这一点；在 Google 表格中，由于 INDEX 函数本身支持数组计算，因此它将“按原样”工作。）

或特定于 Google 表格的解决方案：

`=INDEX(FILTER(Purchases!C:C;Purchases!A:A=A2;Purchases!B:B=B2);1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:25:57.837

Vlookup 很好。只需在两个表中创建一个额外的列，它是 2 个字段的组合，并使用它进行 Vlookup。你可以称之为“SKUSID”：

```
SKUSID
001A1
001A2
002A1 
```

（如果该列在视觉上不吸引人，您也可以将其隐藏起来。计算仍然有效。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:27:46.477

```
=IF(AND(Sales!A3=Purchases!A3,Sales!B3=Purchases!B3),Purchases!C3,"NO MATCH") 
```

- 如果您不关心下面的评论，我会在那里回答。

您可以按照[此](http://spreadsheets.about.com/od/lookupfunction1/ss/2011-03-03-excel-2010-vlookup-multiple-values-sbs-tutorial.htm)实用教程进行操作。它使用匹配和索引来解决问题。

问候

# javascript - 强制检索脚本文件以阻止

> ID：13381448
> 
> 赞同：0
> 
> 时间：2012-11-14T15:07:14.557
> 
> 标签：javascript, greasemonkey

我正在编写一个greasemonkey 脚本，该脚本将一段代码注入到页面中。然后，该代码使用以下代码创建一个指向第 3 方源的脚本标签：

```
function injectThis(){
    var s = document.createElement("script");
    s.src = "http://site.com/file.js";
    s.head.appendChild(s);

    // other code to be executed once the above file has finished downloading

} 
```

有没有办法让引擎阻塞，直到脚本的检索和处理完成？

几点注意事项：
1：同步的 xhr 是不可能的 b/c 它是跨域的
2：gm_xhr 是不可能的，因为我正在处理的脚本的目的
3：在 file.js 中添加一个事件/回调到指示加载不是解决方案，原因与 #2 不是相同的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:13:59.200

为什么不听`onload`script 标签的，然后再触发你的其他东西呢？
如果您需要旧版 IE 支持，您也可以收听`onreadystatechange`.

导致同步加载的唯一方法是使用`.innerHTML`，或者更糟糕的是，`document.write`.

更好的是设置`script.onload = function () { callOtherStuff(); };`.

# sql - 非常简单的 SQL 不是 GROUP BY 表达式 - Oracle

> ID：13381451
> 
> 赞同：0
> 
> 时间：2012-11-14T15:07:19.227
> 
> 标签：sql, oracle, group-by

我试图从其他一些帖子中阅读 not a group by expression 错误，但他们都提到了组函数，例如 MAX、MIN 等。我没有使用任何一个，它是一个非常简单的查询，返回这种错误.

```
SELECT * 
FROM   ad_voarnet_atendimento_pista 
WHERE  is_closed = 0 
GROUP  BY prefixo 
ORDER  BY prefixo 
```

我在这里做错了什么？

编辑：

预期的结果与 MySQL 通过此查询给我的结果相同。它将排除列 PREFIXO 的每个重复值。我只想要提到的列中每个值的 1 条记录。错误信息是这样的：

```
[Err] ORA-00979: not a GROUP BY expression 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:09:39.890

除了可能对行进行重复数据删除之外，在聚合函数（如 ）的`GROUP BY`上下文之外， 没有用处。`MIN() MAX() SUM() COUNT()`只需将其删除。如果您希望对结果进行重复数据删除，请`DISTINCT`改用。如果您使用，除非您更具体地了解列表中的列（不包括主键列），`DISTINCT`否则它不会有太大价值。`SELECT`

```
SELECT
  DISTINCT * 
FROM 
  AD_VOARNET_ATENDIMENTO_PISTA 
WHERE IS_CLOSED = 0
ORDER BY PREFIXO 
```

`GROUP BY`有时与`ORDER BY`. 你已经有一个`ORDER BY PREFIX0`，

# java - 弹簧安全 3.1

> ID：13381452
> 
> 赞同：5
> 
> 时间：2012-11-14T15:07:21.280
> 
> 标签：java, spring-mvc, spring-security

当我尝试在 Spring Security 中使用自定义登录表单时，无论我是否输入了正确的凭据，它都会不断将我返回到 /admin/login 页面。当我使用空`<form-login />`时，安全检查工作正常。但是，一旦我添加了一个自定义，`<form-login login-page="/admin/login" />`我就会一直返回到同一页面。我尝试添加一个`default-target-url="admin/forSale" />`，但我仍然返回到登录页面。在提供正确的凭据并返回登录页面后，我尝试访问受保护的 url，然后再次返回登录页面，因此我 99% 确定根本没有执行安全检查。

在`action="<c:url value='j_spring_security_check' />"`我的 jsp 中创建了一个指向`http://localhost:8080/sharleepark/admin/j_spring_security_check`. 我认为过滤器仍然应该选择它并相应地处理安全性？

我确信我的控制器或 JSP 中存在一个我没有发现的简单错误。我也在使用 Tiles2 模板，这可能是问题的一部分吗？我在这上面花了几天时间，并尝试了所有我能找到的春季安全教程，但都无济于事，非常感谢您的帮助。

spring-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd  
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd ">

    <!-- Scans packages to auto declare the beans we require -->
    <context:component-scan base-package="au.com.sharleepark.controller" />
    <context:component-scan base-package="au.com.sharleepark.service" />
    <context:component-scan base-package="au.com.sharleepark.hibernate" />
    <context:component-scan base-package="au.com.sharleepark.helper" />

    <mvc:annotation-driven /> 
    <tx:annotation-driven />

    <!-- Map our static resources to a friendly URL -->
    <mvc:resources location="/static/" mapping="/static/**" />

    <!-- Specify the view resolver that we wish to use -->
    <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView" />
    </bean>

    <!-- Tell the tiles configurator where our tiles configuration files are located -->
    <bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
        <property name="definitions">
            <list>
                    <value>/WEB-INF/tiles.xml</value>
            </list>
        </property>
    </bean>

    <!-- Our datasource -->
    <!-- Defines our connection to the database -->
    <bean id="dataSource"
    class="org.springframework.jdbc.datasource.SingleConnectionDataSource"
    destroy-method="destroy">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://blah blah" />
        <property name="username" value="" />
        <property name="password" value="" />
        <property name="suppressClose" value="true" />
        <property name="autoCommit" value="true" />
    </bean>

    <!-- Session Factory -->
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="au.com.sharleepark.domain" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.hbm2ddl.auto">validate</prop>
                <prop key="show_sql">true</prop>
            </props>
        </property>
    </bean>

    <!-- Data Access Objects -->
    <!-- <bean id="hibernateDAO" class="au.com.sharleepark.hibernate.HibernateDaoImpl">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean> -->

    <!-- Transaction management -->
    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <!-- Spring exception translation post processor for the DAO layer -->
    <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>

</beans> 
```

弹簧安全.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                http://www.springframework.org/schema/security 
                http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http pattern="/static/**" security="none" />

    <http use-expressions="true">
        <intercept-url pattern="/admin/login" access="permitAll" />
        <intercept-url pattern="/admin/**" access="isAuthenticated()" />
        <intercept-url pattern="/**" access="permitAll" />
        <form-login login-page="/admin/login" />
        <logout /> <!-- Not there is currently a logout link anyway -->
    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="rod" password="koala" authorities="supervisor, teller, user" />
            </user-service>
        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
id="WebApp_ID" version="3.0" metadata-complete="true">

    <display-name>Sharlee Park</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring-security.xml
            /WEB-INF/spring-servlet.xml
        </param-value>
    </context-param>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app> 
```

adminLoginController.java（控制器）

```
package au.com.sharleepark.controller.admin;

import org.apache.log4j.Logger;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;

/**
 * Controller class for the administration login
 * @author Steve 
 * @version 1.00
 * 
 * Change History
 * 08/11/12 - Created
 */
@Controller
@RequestMapping(value="admin")
public class AdminLoginController {

    private static final Logger logger = Logger.getLogger(AdminLoginController.class);

    @RequestMapping(value="/login")
    public ModelAndView doView(@RequestParam(value="error", required=false) boolean error) {
        logger.info("processing Login");

        ModelAndView mav = new ModelAndView();
        mav.setViewName("admin/login");

        if (error) {
            logger.error("Invalid Credentials");
            mav.addObject("error", "Invalid login credentials");
        }
        return mav;
    }
} 
```

adminLogin.jsp

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<div id="login">
    <div id="loginContent">
        <div class="error">${error}</div>
        <form name='sharleeParkLoginForm' action="<c:url value='j_spring_security_check' />" method='POST'>
            <fieldset>
                <ul class="fieldUL">
                    <li>
                        <label class="inputLabel" for="j_username">Username</label>
                        <span> 
                            <input class="inputField" type="text" tabindex="1" id="j_username" name="j_username" size="25" maxlength="25">
                        </span>
                    </li>
                </ul>
                <ul class="fieldUL">
                    <li>
                        <label class="inputLabel" for="spPassword">Password</label>
                        <span> 
                            <input class="inputField" type="password" tabindex="2" id="j_password" name="j_password" size="25" maxlength="25">
                        </span>
                    </li>
                </ul>
                <ul class="fieldUL">
                    <li><input name="submit" type="submit" value="Login"></li>
                </ul>
            </fieldset>
        </form>
        </div>
</div> 
```

瓷砖.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE tiles-definitions PUBLIC
   "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
   "http://tiles.apache.org/dtds/tiles-config_2_0.dtd">

<tiles-definitions>
    <definition name="base.definition" template="/WEB-INF/jsp/layout.jsp">
        <put-attribute name="title" value="" />
        <put-attribute name="header" value="/WEB-INF/jsp/header.jsp" />
        <put-attribute name="body" value="" />
    </definition>

....

    <!-- ADMIN PAGES -->
    <definition name="admin/login" extends="base.definition">
        <put-attribute name="title" value="Administration Login" />
        <put-attribute name="body" value="/WEB-INF/jsp/admin/adminLogin.jsp" />
    </definition>
....

</tiles-definitions> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T18:19:09.570

尝试使用`<http auto-config="true" use-expressions="true">`.

从有关`http` `auto-config`属性的文档中：

> 自动注册登录表单、BASIC 身份验证、匿名身份验证、注销服务、remember-me 和 servlet-api-integration。如果设置为“true”，则会添加所有这些功能（尽管您仍然可以通过提供相应的元素来自定义每个功能的配置）。如果未指定，则默认为“false”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:45:33.383

我敢打赌你的安全配置有问题。

为什么在 http 声明中使用**use-expressions="true" ？**我没有看到您使用 Spring-EL 表达式...尝试将其删除并查看是否有变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:27:54.127

通常我们不处理`/login`控制器中的映射。Spring security 处理登录身份验证并指向成功的 Url。您可以像这样在 spring-config.xml 中指定登录页面的视图名称。

```
<mvc:view-controller path="/login" view-name="login"/> 
```

您可以在控制器类中处理成功的 url 映射。在这种情况下，如果您指定`default-target-url="admin/forSale"`然后编写一个方法来处理`/forSale`映射。

我认为因为您正在处理控制器中的“/登录”映射，所以它被定向到登录页面以获得成功和失败。

```
ModelAndView mav = new ModelAndView();
mav.setViewName("admin/login"); 
```

但相反，如果没有错误，那么视图应该不同`mav.setViewName("admin/forSale")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T18:22:29.120

我已经解决了。解决问题的方法是将`login-processing-url="/admin/j_spring_security_check"`属性添加到`<form-login>`标签中。我之前没有使用过 Spring Security，我想我只是假设过滤器会神奇地找到`j_spring_security_check`并相应地处理。`j_spring_security_check`如果来自应用程序的根 URI（即 /sharleepark/j_spring_security_check），过滤器可能会选择它？我从来没有看到需要`login-processing-url`在我一直在看的任何教程中指定。再次感谢大家的意见。

# tomcat - 如何更改tomcat中的会话cookie？

> ID：13381457
> 
> 赞同：1
> 
> 时间：2012-11-14T15:07:37.427
> 
> 标签：tomcat, session-cookies

当用户注销（或登录，就此而言）时，我想确保用户会话 cookie 的值已更改。我怎样才能做到这一点？如果我只是这样做，`session.invalidate()`tomcat 不会返回会话 cookie 标头，因为没有活动会话，因此 cookie 保持不变。如果我`session.invalidate(); request.getSession()`创建一个新会话，新会话将获得相同的 sessionId，因此 cookie 也保持不变。

（我想更改会话 cookie 值，因为我们有几个共享一个 sessionId 的 WAR，而且我也不能轻易地使其他 WAR 中的会话无效。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:32:42.840

看来您必须通过[将过期版本的 cookie 添加](https://stackoverflow.com/q/9821919/21499)到响应中来手动删除 cookie。也就是说，您在 中找到 cookie `request.getCookies()`，将其 maxAge 设置为 0 并执行`response.addCookie(..)`。您还需要使会话无效，并注意不要根据该请求重新创建会话。这意味着您不能直接显示“您现在已注销”页面，而是必须执行客户端重定向到这样的页面 - 现在将被分配一个新的会话 cookie。

# php - php 创建文件的所有权

> ID：13381458
> 
> 赞同：0
> 
> 时间：2012-11-14T15:07:41.470
> 
> 标签：php, linux, wordpress, filesystems

关于由 Wordpress 创建的文件的权限，我遇到了一个恼人的问题。

当我使用 wordpress 下载插件或上传图像时，即使 php 脚本创建了一个目录/文件，它也会将此文件夹的权限放入不同的用户/组中。

我的用户在我自己的 ftp 帐户下无法访问此文件/文件夹。

有没有办法将 apache/php/wordpress 创建的文件/文件夹所有权更改为我的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:09:40.913

如果您使用的是 Ubuntu（我不知道其他发行版中的文件是否位于同一位置），您可以编辑位于 /etc/apache2 中的文件 envvars 并重新启动 Apache。

如果您可以使用 ACL，这是比更改 Apache 用户更好的解决方案，更多信息：[https ://help.ubuntu.com/community/FilePermissionsACLs](https://help.ubuntu.com/community/FilePermissionsACLs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:14:42.570

如果要更改 php 脚本的权限，可以使用[chown()](http://php.net/manual/en/function.chown.php)函数

# android - 为什么 Jenkins Android 模拟器插件会在每个构建中重新创建我的模拟器快照？

> ID：13381460
> 
> 赞同：17
> 
> 时间：2012-11-14T15:07:53.140
> 
> 标签：android, android-emulator, jenkins, hudson, android-emulator-plugin

我使用 Jenkins 来构建我的一个项目。Android Emulator Plugin 会自动启动具有以下配置的模拟器：

![模拟器配置](../Images/b3294286ad2b9cb64673c47ce9f014ea.png)

模拟器插件的配置：

![模拟器插件配置](../Images/683bfa0da67e274ac1876736e264349f.png).

每次作业运行时，我都会得到以下输出：

```
Erasing existing emulator data... $
/ci/home/tools/android-sdk//tools/emulator -no-boot-anim -ports
64470,64471 -prop persist.sys.language=de -prop persist.sys.country=DE
-avd hudson_de-DE_240_480x720_Google_Inc._Google_APIs_8 -no-snapshot-load -no-snapshot-save -wipe-data

.
.

shell input keyevent 4 [android] Giving the system some time to settle
before creating initial snapshot... $

.
.

localhost:64471 shell log -p v -t Jenkins "Creating snapshot..."
[android] Creating snapshot... $ 
```

完整日志如下。

似乎该插件每次都在创建一个新的模拟器并且没有使用快照。这需要 2 到 4 分钟，具体取决于模拟器配置。

该插件在作业文件夹内的 .android/avd 目录中创建 .avd 和 .ini 文件。运行过程后不会删除 avds。

如果我禁用使用快照配置，模拟器需要不到一分钟的时间来启动。

这是模拟器插件的问题还是因为我的配置而无法创建快照？

我希望使用快照能大大加快我的构建过程。

* * *

完整日志：

```
$ /ci/home/tools/android-sdk//tools/android list target [android]
Using Android SDK: /ci/home/tools/android-sdk/ [android] Adding 200M
SD card to AVD 'hudson_de-DE_240_480x720_Google_Inc._Google_APIs_8'...
[android] Setting hardware properties:  hw.ramSize: 512
$ /ci/home/tools/android-sdk//platform-tools/adb start-server
$ /ci/home/tools/android-sdk//tools/emulator -snapshot-list -no-window -avd hudson_de-DE_240_480x720_Google_Inc._Google_APIs_8
[android] Starting Android emulator and creating initial snapshot
[android] Erasing existing emulator data...
$ /ci/home/tools/android-sdk//tools/emulator -no-boot-anim -ports 64470,64471 -prop persist.sys.language=de -prop persist.sys.country=DE -avd hudson_de-DE_240_480x720_Google_Inc._Google_APIs_8 -no-snapshot-load -no-snapshot-save -wipe-data
* daemon not running. starting it now on port 64472 *
* daemon started successfully *
$ /ci/home/tools/android-sdk//platform-tools/adb connect localhost:64471
[android] Waiting for emulator to finish booting...
$ /ci/home/tools/android-sdk//platform-tools/adb -s localhost:64471 
shell getprop dev.bootcomplete error: device offline
$ /ci/home/tools/android-sdk//platform-tools/adb connect localhost:64471
$ /ci/home/tools/android-sdk//platform-tools/adb -s localhost:64471 shell getprop dev.bootcomplete
$ /ci/home/tools/android-sdk//platform-tools/adb connect localhost:64471
$ /ci/home/tools/android-sdk//platform-tools/adb -s localhost:64471 shell getprop dev.bootcomplete
$ /ci/home/tools/android-sdk//platform-tools/adb disconnect localhost:64471
$ /ci/home/tools/android-sdk//platform-tools/adb connect localhost:64471
$ /ci/home/tools/android-sdk//platform-tools/adb -s localhost:64471 shell getprop dev.bootcomplete
$ /ci/home/tools/android-sdk//platform-tools/adb connect localhost:64471
$ /ci/home/tools/android-sdk//platform-tools/adb -s localhost:64471 shell getprop dev.bootcomplete
$ /ci/home/tools/android-sdk//platform-tools/adb connect localhost:64471
$ /ci/home/tools/android-sdk//platform-tools/adb -s localhost:64471 shell getprop dev.bootcomplete
$ /ci/home/tools/android-sdk//platform-tools/adb -s localhost:64471 logcat -v time
$ /ci/home/tools/android-sdk//platform-tools/adb connect localhost:64471
[android] Attempting to unlock emulator screen
$ /ci/home/tools/android-sdk//platform-tools/adb -s localhost:64471 shell input keyevent 82
$ /ci/home/tools/android-sdk//platform-tools/adb -s localhost:64471 shell input keyevent 4
[android] Giving the system some time to settle before creating initial snapshot...
$ /ci/home/tools/android-sdk//platform-tools/adb connect localhost:64471
$ /ci/home/tools/android-sdk//platform-tools/adb -s localhost:64471 logcat -c
$ /ci/home/tools/android-sdk//platform-tools/adb -s localhost:64471 shell log -p v -t Jenkins "Creating snapshot..."
[android] Creating snapshot...
$ /ci/home/tools/android-sdk//platform-tools/adb connect localhost:64471
[android] Emulator is ready for use (took 158 seconds) 
```

* * *

示例作业的构建文件：

```
<?xml version='1.0' encoding='UTF-8'?>
<project>
  <actions/>
  <description></description>
  <keepDependencies>false</keepDependencies>
  <properties/>
  <scm class="hudson.plugins.git.GitSCM">
    <configVersion>2</configVersion>
    <userRemoteConfigs>
      <hudson.plugins.git.UserRemoteConfig>
        <name></name>
        <refspec></refspec>
        <url>git@project...</url>
      </hudson.plugins.git.UserRemoteConfig>
    </userRemoteConfigs>
    <branches>
      <hudson.plugins.git.BranchSpec>
        <name>master</name>
      </hudson.plugins.git.BranchSpec>
    </branches>
    <disableSubmodules>false</disableSubmodules>
    <recursiveSubmodules>false</recursiveSubmodules>
    <doGenerateSubmoduleConfigurations>false</doGenerateSubmoduleConfigurations>
    <authorOrCommitter>false</authorOrCommitter>
    <clean>false</clean>
    <wipeOutWorkspace>false</wipeOutWorkspace>
    <pruneBranches>false</pruneBranches>
    <remotePoll>false</remotePoll>
    <ignoreNotifyCommit>false</ignoreNotifyCommit>
    <useShallowClone>false</useShallowClone>
    <buildChooser class="hudson.plugins.git.util.DefaultBuildChooser"/>
    <gitTool>default</gitTool>
    <submoduleCfg class="list"/>
    <relativeTargetDir></relativeTargetDir>
    <reference></reference>
    <excludedRegions></excludedRegions>
    <excludedUsers></excludedUsers>
    <gitConfigName></gitConfigName>
    <gitConfigEmail></gitConfigEmail>
    <skipTag>false</skipTag>
    <includedRegions></includedRegions>
    <scmName></scmName>
  </scm>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>true</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>true</blockBuildWhenUpstreamBuilding>
  <triggers class="vector">
    <hudson.triggers.SCMTrigger>
      <spec>*/5 * * * *</spec>
    </hudson.triggers.SCMTrigger>
  </triggers>
  <concurrentBuild>false</concurrentBuild>
  <builders>
    <hudson.tasks.Ant>
      <targets>clean debug install</targets>
      <antName>(Default)</antName>
    </hudson.tasks.Ant>
    <hudson.tasks.Ant>
      <targets></targets>
      <antName>(Default)</antName>
      <buildFile>checkstyle-ant.xml</buildFile>
    </hudson.tasks.Ant>
    <hudson.tasks.Shell>
      <command>os_opts=&quot;-Djava.awt.headless=true&quot; lint --xml lint-results.xml .</command>
    </hudson.tasks.Shell>
    <hudson.plugins.android__emulator.monkey.MonkeyBuilder>
      <packageId>de....</packageId>
      <eventCount>1000</eventCount>
      <throttleMs>10</throttleMs>
      <seed>timestamp</seed>
    </hudson.plugins.android__emulator.monkey.MonkeyBuilder>
    <hudson.tasks.Shell>
        ... distribution script
    </hudson.tasks.Shell>
  </builders>
  <publishers>
    <org.jenkinsci.plugins.android__lint.LintPublisher>
      <healthy></healthy>
      <thresholdLimit>low</thresholdLimit>
      <pluginName>[android-lint] </pluginName>
      <defaultEncoding></defaultEncoding>
      <canRunOnFailed>false</canRunOnFailed>
      <useStableBuildAsReference>false</useStableBuildAsReference>
      <useDeltaValues>false</useDeltaValues>
      <thresholds>
        <unstableTotalAll></unstableTotalAll>
        <unstableTotalHigh></unstableTotalHigh>
        <unstableTotalNormal></unstableTotalNormal>
        <unstableTotalLow></unstableTotalLow>
        <unstableNewAll></unstableNewAll>
        <unstableNewHigh></unstableNewHigh>
        <unstableNewNormal></unstableNewNormal>
        <unstableNewLow></unstableNewLow>
        <failedTotalAll></failedTotalAll>
        <failedTotalHigh></failedTotalHigh>
        <failedTotalNormal></failedTotalNormal>
        <failedTotalLow></failedTotalLow>
        <failedNewAll></failedNewAll>
        <failedNewHigh></failedNewHigh>
        <failedNewNormal></failedNewNormal>
        <failedNewLow></failedNewLow>
      </thresholds>
      <shouldDetectModules>false</shouldDetectModules>
      <dontComputeNew>false</dontComputeNew>
      <doNotResolveRelativePaths>false</doNotResolveRelativePaths>
      <pattern></pattern>
    </org.jenkinsci.plugins.android__lint.LintPublisher>
    <hudson.plugins.checkstyle.CheckStylePublisher>
      <healthy></healthy>
      <unHealthy></unHealthy>
      <thresholdLimit>low</thresholdLimit>
      <pluginName>[CHECKSTYLE] </pluginName>
      <defaultEncoding></defaultEncoding>
      <canRunOnFailed>false</canRunOnFailed>
      <useStableBuildAsReference>false</useStableBuildAsReference>
      <useDeltaValues>false</useDeltaValues>
      <thresholds>
        <unstableTotalAll></unstableTotalAll>
        <unstableTotalHigh></unstableTotalHigh>
        <unstableTotalNormal></unstableTotalNormal>
        <unstableTotalLow></unstableTotalLow>
        <failedTotalAll></failedTotalAll>
        <failedTotalHigh></failedTotalHigh>
        <failedTotalNormal></failedTotalNormal>
        <failedTotalLow></failedTotalLow>
      </thresholds>
      <shouldDetectModules>false</shouldDetectModules>
      <dontComputeNew>true</dontComputeNew>
      <doNotResolveRelativePaths>false</doNotResolveRelativePaths>
      <pattern></pattern>
    </hudson.plugins.checkstyle.CheckStylePublisher>
    <hudson.plugins.warnings.WarningsPublisher>
      <healthy></healthy>
      <unHealthy></unHealthy>
      <thresholdLimit>low</thresholdLimit>
      <pluginName>[WARNINGS] </pluginName>
      <defaultEncoding></defaultEncoding>
      <canRunOnFailed>false</canRunOnFailed>
      <useStableBuildAsReference>false</useStableBuildAsReference>
      <useDeltaValues>false</useDeltaValues>
      <thresholds>
        <unstableTotalAll></unstableTotalAll>
        <unstableTotalHigh></unstableTotalHigh>
        <unstableTotalNormal></unstableTotalNormal>
        <unstableTotalLow></unstableTotalLow>
        <failedTotalAll></failedTotalAll>
        <failedTotalHigh></failedTotalHigh>
        <failedTotalNormal></failedTotalNormal>
        <failedTotalLow></failedTotalLow>
      </thresholds>
      <shouldDetectModules>false</shouldDetectModules>
      <dontComputeNew>true</dontComputeNew>
      <doNotResolveRelativePaths>true</doNotResolveRelativePaths>
      <parserConfigurations/>
      <consoleParsers>
        <hudson.plugins.warnings.ConsoleParser>
          <parserName>Java Compiler (Eclipse)</parserName>
        </hudson.plugins.warnings.ConsoleParser>
      </consoleParsers>
    </hudson.plugins.warnings.WarningsPublisher>
    <hudson.plugins.analysis.collector.AnalysisPublisher>
      <healthy></healthy>
      <unHealthy></unHealthy>
      <thresholdLimit>low</thresholdLimit>
      <pluginName>[ANALYSIS-COLLECTOR] </pluginName>
      <defaultEncoding></defaultEncoding>
      <canRunOnFailed>false</canRunOnFailed>
      <useStableBuildAsReference>false</useStableBuildAsReference>
      <useDeltaValues>false</useDeltaValues>
      <thresholds>
        <unstableTotalAll></unstableTotalAll>
        <unstableTotalHigh></unstableTotalHigh>
        <unstableTotalNormal></unstableTotalNormal>
        <unstableTotalLow></unstableTotalLow>
        <failedTotalAll></failedTotalAll>
        <failedTotalHigh></failedTotalHigh>
        <failedTotalNormal></failedTotalNormal>
        <failedTotalLow></failedTotalLow>
      </thresholds>
      <shouldDetectModules>false</shouldDetectModules>
      <dontComputeNew>true</dontComputeNew>
      <doNotResolveRelativePaths>true</doNotResolveRelativePaths>
      <isCheckStyleDeactivated>false</isCheckStyleDeactivated>
      <isDryDeactivated>true</isDryDeactivated>
      <isFindBugsDeactivated>true</isFindBugsDeactivated>
      <isPmdDeactivated>true</isPmdDeactivated>
      <isOpenTasksDeactivated>true</isOpenTasksDeactivated>
      <isWarningsDeactivated>false</isWarningsDeactivated>
    </hudson.plugins.analysis.collector.AnalysisPublisher>
    <hudson.plugins.android__emulator.monkey.MonkeyRecorder>
      <failureOutcome>FAILURE</failureOutcome>
    </hudson.plugins.android__emulator.monkey.MonkeyRecorder>
    <hudson.plugins.cigame.GamePublisher/>
    <hudson.tasks.Mailer>
      <recipients></recipients>
      <dontNotifyEveryUnstableBuild>false</dontNotifyEveryUnstableBuild>
      <sendToIndividuals>true</sendToIndividuals>
    </hudson.tasks.Mailer>
  </publishers>
  <buildWrappers>
    <hudson.plugins.locksandlatches.LockWrapper>
      <locks>
        <hudson.plugins.locksandlatches.LockWrapper_-LockWaitConfig>
          <name>AndroidEmulator</name>
        </hudson.plugins.locksandlatches.LockWrapper_-LockWaitConfig>
      </locks>
    </hudson.plugins.locksandlatches.LockWrapper>
    <hudson.plugins.android__emulator.AndroidEmulator>
      <osVersion>Google Inc.:Google APIs:8</osVersion>
      <screenDensity>240</screenDensity>
      <screenResolution>480x720</screenResolution>
      <deviceLocale>de_DE</deviceLocale>
      <sdCardSize>200M</sdCardSize>
      <hardwareProperties>
        <hudson.plugins.android__emulator.AndroidEmulator_-HardwareProperty>
          <key>hw.ramSize</key>
          <value>512</value>
        </hudson.plugins.android__emulator.AndroidEmulator_-HardwareProperty>
      </hardwareProperties>
      <wipeData>false</wipeData>
      <showWindow>true</showWindow>
      <useSnapshots>true</useSnapshots>
      <deleteAfterBuild>false</deleteAfterBuild>
      <startupDelay>0</startupDelay>
      <commandLineOptions></commandLineOptions>
    </hudson.plugins.android__emulator.AndroidEmulator>
  </buildWrappers>
</project> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-12T13:46:36.243

SDK Tools r20[中引入](http://b.android.com/34233)了一个错误，尝试列出可用快照（通过`emulator -snapshot-list`命令）会导致崩溃。

由于该命令在未列出可用快照的情况下崩溃，Android Emulator Plugin 认为没有现有快照，这会导致在每个构建中创建一个新快照。

我发现这些崩溃只发生在[某些版本](http://b.android.com/34233#c57)的`emulator`应用程序中，即有可能避免崩溃。

值得庆幸的是，Jenkins 插件允许您选择`emulator`要运行的二进制文件。

因此，您可以通过进入作业配置、按下`Advanced…`模拟器配置并选择“ `emulator-arm`”（或其他）二进制文件来解决此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-14T19:24:13.237

除了[Christopher Orr 的回答](https://stackoverflow.com/a/17067187/168740)之外，还有另一个可能的原因。在我的环境中，`emulator -snapshot-list`将我的快照大小列为“1.0G”。截至 2014 年 1 月 14 日，与 Android 模拟器插件中的快照匹配的模式匹配整数兆字节值。

我提交了一个[拉取请求](https://github.com/jenkinsci/android-emulator-plugin/pull/31)来解决这个问题。

# python - 如何优雅地停止python unittest？

> ID：13381466
> 
> 赞同：3
> 
> 时间：2012-11-14T15:08:05.007
> 
> 标签：python, unit-testing

我正在使用 python unittest 框架来测试外部设备。在这个特殊的用例中，我实际上希望让 python 做一个需要几天时间的耐力测试。（一次测试只需要几分钟，但会经常重复。）

在这种情况下，我希望能够优雅地停止测试并稍后恢复或重新启动它。我可以忍受稍后重新启动它，但现在我无法优雅地停止。

通过优雅的停止，我设想如下：按下 后`Ctrl-C`，最后一次测试完成并返回结果。

有没有内置的方法来实现这一点？如果没有，我如何实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:54:50.780

查看 unittest[命令行文档](http://docs.python.org/2/library/unittest.html#command-line-options)。

> **测试运行期间的Control-C**等待当前测试结束，然后报告到目前为止的所有结果。第二个 control-C 引发正常的 KeyboardInterrupt 异常。

`KeyboardInterrupt`因此，您可以在报告到目前为止的结果后捕获异常以将下一个测试放入睡眠循环。然后，睡眠循环可以等待进一步的按键以中止整个测试或继续。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T15:49:05.813

我通过仔细查看 unittest 文档找到了解决方案：通过调用：

```
unittest.installHandler() 
```

安装了 Ctrl-C 的信号处理程序，并且所有结果：

```
unittest.registerResult(result) 
```

在 Ctrl-C 的情况下将正常退出。这正是我所需要的。

# c# - 从字符串转换为任何基本类型

> ID：13381468
> 
> 赞同：8
> 
> 时间：2012-11-14T15:08:09.127
> 
> 标签：c#

我有一个`string`和一个`Type`，我想返回`string`转换为那个的值`Type`。

```
public static object StringToType(string value, Type propertyType)
{
    return Convert.ChangeType(value, propertyType, CultureInfo.InvariantCulture);
} 
```

这将返回一个`object`我可以在属性集值调用中使用的：

```
public static void SetBasicPropertyValueFromString(object target,
                                                   string propName,
                                                   string value)   
{
  PropertyInfo prop = target.GetType().GetProperty(propName);
  object converted = StringToType(value, prop.PropertyType);
  prop.SetValue(target, converted, null);
} 
```

这适用于大多数基本类型，但可为空的除外。

```
[TestMethod]
public void IntTest()
{ //working
    Assert.AreEqual(1, ValueHelper.StringToType("1", typeof (int)));
    Assert.AreEqual(123, ValueHelper.StringToType("123", typeof (int)));
}

[TestMethod]
public void NullableIntTest()
{ //not working
    Assert.AreEqual(1, ValueHelper.StringToType("1", typeof (int?)));
    Assert.AreEqual(123, ValueHelper.StringToType("123", typeof (int?)));
    Assert.AreEqual(null, ValueHelper.StringToType(null, typeof (int?)));
} 
```

`NullableIntTest`第一行失败：

> System.InvalidCastException：从 'System.String' 到 'System.Nullable`1[[System.Int32，mscorlib，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089]] 的无效转换。

我很难确定类型是否可以为空并改变`StringToType`方法的行为。

我追求的行为：

如果 string 为 null 或为空，则返回 null，否则按照不可为 null 的类型进行转换。

**结果**

就像基里尔的回答一样，只有一个`ChangeType`电话。

```
public static object StringToType(string value, Type propertyType)
{
    var underlyingType = Nullable.GetUnderlyingType(propertyType);
    if (underlyingType != null)
    {
        //an underlying nullable type, so the type is nullable
        //apply logic for null or empty test
        if (String.IsNullOrEmpty(value)) return null;
    }
    return Convert.ChangeType(value,
                              underlyingType ?? propertyType,
                              CultureInfo.InvariantCulture);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T15:18:59.433

您不能在可为空的类型上使用 Convert.ChangeType，因为它不是从 IConvertible 继承的。你应该重写你的方法。

```
public static object StringToType(string value, Type propertyType)
{
   var underlyingType = Nullable.GetUnderlyingType(propertyType);
   if(underlyingType == null)
          return Convert.ChangeType(value, propertyType,  CultureInfo.InvariantCulture);
   return String.IsNullOrEmpty(value)
          ? null
          : Convert.ChangeType(value, underlyingType, CultureInfo.InvariantCulture);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T15:15:23.417

```
public static object StringToType(string value, Type propertyType)
{
   var underlyingType = Nullable.GetUnderlyingType(propertyType);
   return underlyingType == null ? Convert.ChangeType(value, propertyType, CultureInfo.InvariantCulture) : Convert.ChangeType(value, underlyingType, CultureInfo.InvariantCulture);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T15:11:01.117

试试这个：

```
prop.IsGenericType && Nullable.GetUnderlyingType(prop) == value.GetType() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T15:25:26.603

这里的问题是 的返回值`ChangeType`以及您的方法是`object`. 当您将任何可空类型装箱时`object`，它不会将可空类型装箱。如果该值在运行时实际上为 null ，则将 a 框`null`起来，如果它有值，则将实际的底层值（而不是可为 null 的版本）框起来。

```
int? i = 5;
object o = i;
Type t = o.GetType();//will be `int`, not `Nullable<int>` 
```

这在任何其他类型的一般情况下都不会发生；`Nullable<T>`有特殊的编译器支持来做到这一点。您基本上还需要`Nullable`在代码中使用特殊情况；如果您的方法传递了一个`Nullable`类型，您需要首先检查对象是否`null`存在 ，如果没有 `null`，请改用底层类型`Nullable`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T16:24:40.237

借助 Kirill Bestemyanov 片段的代码：

```
public static object StringToType<T>(string value)
{
   return StringToType(value, typeof(T));
}

public static object StringToType(string value, Type propertyType)
{
   var underlyingType = Nullable.GetUnderlyingType(propertyType);
   if(underlyingType == null)
     return Convert.ChangeType(value, propertyType, CultureInfo.InvariantCulture);
   return String.IsNullOrEmpty(value)
     ? null
     : Convert.ChangeType(value, underlyingType, CultureInfo.InvariantCulture);
} 
```

和使用（`WL`只是写入控制台）。你是对的，泛型方法不能`int?`用作泛型参数。

```
WL(StringToType("1", typeof (int?))); // -> 1
WL(StringToType<int>("1"));           // -> 1
WL(StringToType<int?>("1"));          // error, not compilable
WL(StringToType<Nullable<int>>("1")); // -> 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T15:17:18.577

您必须为要支持的每种类型使用适当的转换方法。

```
int parsedInt;
int.TryParse("1", out parsedInt);

double parsedDouble;
double.TryParse("0.0d", out parsedDouble); 
```

编译器不可能根据字符串的内容来确定类型。有关从字符串类型转换为标量类型的更多信息，请参阅以下链接：http: [//msdn.microsoft.com/en-us/library/bb397679.aspx](http://msdn.microsoft.com/en-us/library/bb397679.aspx)和[http://msdn.microsoft.com/en-us/library /bb384043.aspx](http://msdn.microsoft.com/en-us/library/bb384043.aspx)。

# php - PHP HTML，需要有关如何在表单提交上传递与复选框相关的数据的帮助

> ID：13381470
> 
> 赞同：0
> 
> 时间：2012-11-14T15:08:26.440
> 
> 标签：php, checkbox

有一个表格，表格有 3 列，动态填充。Col1 和 Col2 从数据库填充，col3 填充有复选框，根据从数据库返回的行数动态生成，用于填充 Col1 和 Col2。

## 表中每一行的含义在 Column3 中有一个复选框。

我想知道如何根据为行/s选择的复选框将值从 Col1 和 Col2 传递到下一页？

如果选中 Row1 和 Row3 中的复选框，则在下一页上需要 Row1 和 Row3 的 col1 和 col2 的详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:11:52.987

您可以使用 javascript，更好的 jquery 库在表单提交之前将该列数据分配给一些隐藏的输入，就像这样

```
$("#formId").submit(function(e) {

    var col1 = $(".col1").html();
    var col2 = $(".col2").html();

     $("#hidCol1").val(col1);
     $("#hidCol2").val(col2);

     return true;
});

  <FORM METHOD="post" ACTION="form2.php">
     <input id="hidCol1" type="hidden" name="col1">
     <input id="hidCol2" type="hidden" name="col2">
 <table>
   <tbody>
    <tr/>
      <td class="col1">Col1</td>
      <td class="col2">Col2</td>
      <td >Col3</td>
    </tr>
 <?php while ($row = mysql_fetch_array($res)) { ?>
   <tr>
       <td><?php  echo $row["name"]; ?> </td>
       <td><?php $row["model"]; ?></td>
       <td> <input type="checkbox" name="chkbxs[]" value="checked" /></td>
   </tr>
  <?php } ?>
     </tbody>
 </table>

    <INPUT TYPE="submit" VALUE="Continue...">
 </FORM> 
```

当您提交表单时，您的隐藏输入将包含`col1`和`col2`值。我建议不要使用`echo`通常的 html 标签，你可以像往常一样使用它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:53:39.970

如果您使用的是 FORM，请使用带有`input=readyonly` CSS 的 Col1 和 Col2 列并删除输入的边缘

尝试：

```
<style>
input.readonly{border: none; background: transparent;}
</style>

<td><input class="readonly" name="col1" value="content col1" readonly="readonly"></td>
<td><input class="readonly" name="col2" value="content col2" readonly="readonly"></td> 
```

这样就不需要 javascript 让您的网站更易于访问

或者尝试隐藏（不需要css）：

```
<td><input name="col1" value="content col1" type="hidden">content col1</td>
<td><input name="col2" value="content col2" type="hidden">content col2</td> 
```

# css - 提供浏览器兼容性问题的内联 div

> ID：13381476
> 
> 赞同：0
> 
> 时间：2012-11-14T15:08:46.457
> 
> 标签：css, html, alignment, inline

我正在构建具有以下功能的自定义搜索栏：

*   数据的实时类型过滤（数据当前是硬编码的）
*   通过下拉列表向上/向下箭头
*   具有过滤器更改的固定宽度搜索框（ID/创建者/描述/等）
*   搜索按钮 onclick 事件拉取搜索框数据

它应该如下所示：

![在此处输入图像描述](../Images/153848a88508d5730a2612fdc4881003.png)

* * *

这是它在 IE 中的样子：

![在此处输入图像描述](../Images/7ea106c19f5748326ba35e2d9a5e188e.png)

火狐：

![在此处输入图像描述](../Images/ef69ff394b1378ce2a42b48764a890fb.png)

铬合金：

![在此处输入图像描述](../Images/6712b0a73b0023108dc3aa80554aae9d.png)

* * *

它在[**我服务器的沙箱中**](http://jonathonmoore.com/proto/)，所以你可以在那里查看代码。不过，这里是 HTML/CSS。我试图通过向左浮动来“伪造”内联，但我得到了一些奇怪的行为。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Solr Search Prototype</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
        <script type="text/javascript" src="scripts.js"></script>
        <link href='style.css' rel='stylesheet' type='text/css' />
    </head>

    <body>
        <div id='container'>
            <div class='inline' id='refine'>Creator<div class="arrow-down"></div></div>
            <input class='inline' id='search' type='text' size='30' />
            <div class='inline' id='submit'>Search</div>
            <div id='refineDropdown'><ul id='refineList'></ul></div>
            <div id='dropdown'><ul id='list'></ul></div>
            <ul id='hidden'></ul>
            <br class="clearBoth" />
        </div>
    </body>
</html> 
```

* * *

```
body {
    margin:50px;
    font-family:Arial, sans-serif;
    font-size:13px;
}
div.inline { float:left; }
.clearBoth { clear:both; }
#refine {
    margin-right:-3px;

    overflow:hidden;
    white-space:nowrap;

    background: rgb(238,238,238); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(238,238,238,1) 0%, rgba(204,204,204,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(238,238,238,1)), color-stop(100%,rgba(204,204,204,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#cccccc',GradientType=0 ); /* IE6-9 */

    border-top-left-radius:4px;
    border-bottom-left-radius:4px;
    border:1px solid #AAA;
    height:12px;
    padding:6px 6px 6px 6px;
    text-align:center;
    font-size:11px;
    font-family:Helvetica, sans-serif;
    color:#666;
    text-shadow:0px 1px 0px #e8eae5;
}
#refine:hover { 
    background: rgb(238,238,238); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(238,238,238,1) 0%, rgba(221,221,221,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(238,238,238,1)), color-stop(100%,rgba(221,221,221,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#dddddd',GradientType=0 ); /* IE6-9 */

    cursor:pointer;
}
#submit {
    margin-right:-1px;

    overflow:hidden;
    white-space:nowrap;

    background: rgb(238,238,238); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(238,238,238,1) 0%, rgba(204,204,204,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(238,238,238,1)), color-stop(100%,rgba(204,204,204,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#cccccc',GradientType=0 ); /* IE6-9 */

    border-top-right-radius:4px;
    border-bottom-right-radius:4px;
    border:1px solid #AAA;
    height:12px;
    padding:6px 6px 6px 6px;
    text-align:center;
    font-size:11px;
    font-family:Helvetica, sans-serif;
    color:#666;
    text-shadow:0px 1px 0px #e8eae5;
}
#submit:hover { 
    background: rgb(238,238,238); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(238,238,238,1) 0%, rgba(221,221,221,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(238,238,238,1)), color-stop(100%,rgba(221,221,221,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(238,238,238,1) 0%,rgba(221,221,221,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#dddddd',GradientType=0 ); /* IE6-9 */
    cursor:pointer;
}
.refineClicked {
    background:white !important;
    border-bottom-left-radius:0px !important;
    border-bottom:none !important;
}
.arrow-down {
    margin:0 0 1px 7px;
    width: 0; 
    height: 0; 
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 5px solid #666;
}
#search {
    margin-right:-5px;
    padding:4px;
    border:1px solid #AAA; 
    color:#444;    
}
#search:focus { outline:none }
#refineDropdown {
    position:relative;
    margin-top:-3px;
    padding:3px;
    width:150px;
    max-height:200px;
    background:#fff;
    border-left:1px solid #AAA;
    border-right:1px solid #AAA;
    border-bottom:1px solid #AAA;
    word-wrap:normal;
    overflow:auto;
}
#hidden { display:none }
#dropdown {
    margin-top:-1px;
    margin-left:50px;
    padding:3px;
    width:213px;
    max-height:200px;
    background:#fff;
    border-left:1px solid #CCC;
    border-right:1px solid #CCC;
    border-bottom:1px solid #CCC;
    word-wrap:normal;
    overflow:auto;
}
ul {
    list-type:none;
    margin:0;
    padding:0;    
}
li {
    padding:5px 10px 5px 10px;
}
li:hover {
    margin:-1px;
    background:#E5F3FF;
    border:1px solid #3366FF;
    cursor:pointer;  
}
.selected {
    margin:-1px;
    background: #E5F3FF;
    border:1px solid #3366FF;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:08:31.670

在您的测试服务器上尝试过并且运行良好。我稍微更改了 html 标记。

**html**

```
<div id='container'>
<div class='inline' id='refine'>Long test blah
    <div class="arrow-down"></div>
</div>

<input class='inline' id='search' type='text' size='30' />
<div class='inline' id='submit'>Search</div>

<div class="hidden" id='refineDropdown'>
    <ul id='refineList'></ul>
</div>

<div class="hidden" id='dropdown'>
    <ul id='list'></ul>
</div>
<ul class='hidden'></ul>
<br class="clearBoth" /> 
```

​</p>

[代码](http://jsfiddle.net/agriboz/gjnE3/3/)/[现场示例](http://jsfiddle.net/agriboz/gjnE3/3/embedded/result/)

我希望它适合你的需要。

# .htaccess - 更改了部分路径，需要将旧的重定向到新的

> ID：13381478
> 
> 赞同：0
> 
> 时间：2012-11-14T15:08:50.120
> 
> 标签：.htaccess, mod-rewrite

我已经更新了基本路径中的国家/地区代码，我正在尝试重定向用户，最终将访问：**www.example.com/uk/etc1/etc2/etc** ..

www.example.com/gb/etc1/etc2/etc .. **_**

但有时也 www.example.com/ **uk** #etc

我认为这在 mod_rewrite 中是相当微不足道的，我无法得到任何工作。

我觉得我最接近的是以下规则，但是当我登陆英国时什么都没有发生。

```
<IfModule mod_rewrite.c>
    Options +FollowSymLinks
    RewriteEngine on

    RewriteRule .* index.php [L] #this is active already on the page

    RewriteRule   ^/uk(.*) /gb(.*) [R]
</IfModule> 
```

编辑：

这似乎更接近，但我陷入了无限循环：

`RewriteRule ^uk(.*) /gb$1 [R]`

编辑 2 / **(3) 答案**：

这似乎正确重定向（正确）：

```
RewriteRule ^uk(.*)$ /gb$1 [R=302,L]

RewriteRule .* index.php [L] 
```

但是页面上的格式被破坏了，看起来像一些循环问题。

但是格式不正确，如果我交换两个 RewriteRules 格式是正确的，但是 uk => gb 转换似乎根本没有被调用。

### 回答

小心 Rewriteconditions，我没有注意到它们的重要性，我删除了它们以用于原始 index.php 重写，这意味着它无法找到任何媒体。我没有注意到申请原始 index.php 的重写条件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:59:35.367

这应该可以解决问题：

```
Options +FollowSymLinks

DirectoryIndex index.php

RewriteEngine on        
RewriteRule   ^/uk(.*) /gb$1 [R=301,L] 
```

# spring - Spring Integration - 未考虑邮件入站通道适配器的延迟轮询器

> ID：13381485
> 
> 赞同：2
> 
> 时间：2012-11-14T15:09:34.860
> 
> 标签：spring, email, integration

我已经配置了一个入站通道适配器来接收邮件，并设置了一个固定延迟 = 15000 的轮询器。
当 max-messages-per-poll 设置为低值时（小于邮箱文件夹中的邮件数)，触发器每 15 秒正确触发一次。
但如果 max-messages-per-poll 设置为较高值，则每隔大约 2 秒调用一次 Pop3MailReceiver 并且不考虑固定延迟或 cron 设置。
我的错在哪里？
在此先感谢您的帮助。

```
<util:properties id="javaMailProperties">
    <prop key="mail.pop3.socketFactory.class">javax.net.ssl.SSLSocketFactory</prop>
    <prop key="mail.pop3.socketFactory.fallback">false</prop>
    <prop key="mail.store.protocol">pop3s</prop>
</util:properties>

<mail:inbound-channel-adapter id="mailAdapter"
              store-uri="pop3s://xxxxxxxxxx%40xxxxxxxxx.xxxxx:xxxxxxxxx@xxxxxxx:xxx/inbox"
              channel="receiveEmailChannel"
              should-delete-messages="false"
              java-mail-properties="javaMailProperties"
              auto-startup="false">
        <int:poller max-messages-per-poll="10" fixed-delay="15000"/>
</mail:inbound-channel-adapter>

<int:control-bus input-channel="receiveEmailChannel"/>

<int:channel id="receiveEmailChannel">
    <int:interceptors>
        <int:wire-tap channel="logger"/>
    </int:interceptors>
</int:channel>

<int:logging-channel-adapter id="logger" level="DEBUG"/>

<int:service-activator input-channel="receiveEmailChannel" ref="mailNotificationDetector" method="receive"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:31:05.260

从[文档](http://static.springsource.org/spring-integration/reference/htmlsingle/#channel-adapter-namespace-inbound)来看，这听起来像是预期的行为，轮询将重复进行，直到满足 max-messages-per-poll 数量。

So when you had a low max-messages-per-poll, this number was satisfied by a few polling calls which probably got completed fairly quickly and you could see a clean fixed-delay call. When you had a high max-messages-per-poll, it took probably quite a few poll calls to satisfy the max-messages-per-poll call.

# c# - 在 C# 中更改 DateTime 变量的格式，而不是字符串输出

> ID：13381488
> 
> 赞同：0
> 
> 时间：2012-11-14T15:09:50.960
> 
> 标签：c#, asp.net, datetime, stored-procedures, datetime-format

如何将 C# DateTime 变量的格式从转换`d/M/yyyy HH:mm:ss`为`yyyy/M/d HH:mm:ss`
我不想更改字符串输出，而是更改 DateTime 变量本身。

我有一个带有`@date`日期时间参数的存储过程。现在我试图将一个 DateTime 变量`Today`从 C# 传递给这个存储过程。C# DateTime 变量是格式`d/M/yyyy HH:mm:ss`，但存储过程需要格式`yyyy/M/d HH:mm:ss`。

我尝试使用 LINQ to SQL：代码：

```
public static object SP_SelectSalesPriceItem()
{
    var query = dc.SP_SalesPrice(DateTime.Now);
    return query;
} 
```

存储过程：

```
ALTER PROCEDURE [dbo].[SP_SalesPrice]
    @Date datetime
AS
BEGIN
    SET NOCOUNT ON;

    select SalesPrice.[Item No_]
    from Sales Price 
    where [Starting Date] < @Date and ([Ending Date] > @Date 
```

这是我在 asp.net 中得到的错误： **Specified cast is not valid。**

> 堆栈跟踪：
> 
> [InvalidCastException：指定的转换无效。]
> System.Data.SqlClient.SqlBuffer.get_Int32() +5002837
> System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i) +38
> Read_SP_SalesPriceResult(ObjectMaterializer 2.MoveNext() +32 System. Web.UI.WebControls.ListView.CreateItemsWithoutGroups(ListViewPagedDataSource dataSource, Boolean dataBinding, InsertItemPosition insertPosition, ArrayList keyArray) +222 System.Web.UI.WebControls.ListView.CreateChildControls(IEnumerable dataSource, Boolean dataBinding) +1040 System.Web.UI. WebControls.ListView.PerformDataBinding（IEnumerable 数据）+44 System.Web.UI.WebControls.DataBoundControl.OnDataSourceViewSelectCallback（IEnumerable 数据）+128`1 ) +1477
> System.Data.Linq.SqlClient.ObjectReader`
> 
> System.Web.UI.DataSourceView.Select(DataSourceSelectArguments 参数，DataSourceViewSelectCallback 回调) +33
> System.Web.UI.WebControls.DataBoundControl.PerformSelect() +143
> System.Web.UI.WebControls.ListView.PerformSelect() +113
> System. Web.UI.WebControls.BaseDataBoundControl.DataBind() +74
> System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +66
> System.Web.UI.WebControls.ListView.CreateChildControls() +55
> System.Web.UI.Control .EnsureChildControls() +102
> System.Web.UI.Control.PreRenderRecursiveInternal() +42
> System.Web.UI.Control.PreRenderRecursiveInternal() +175
> System.Web.UI.Control.PreRenderRecursiveInternal() +175
> System.Web.UI.Control.PreRenderRecursiveInternal() +175
> System.Web.UI.Control.PreRenderRecursiveInternal() +175
> System.Web.UI.Page.ProcessRequestMain（布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）+2496

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:11:32.037

`DateTime` **由于 a没有格式**，您所要求的内容是不可能的。

格式是 a 的**字符串**表示形式`DateTime`。

存储过程应该使用一个`DATETIME`参数`@date`- 如果不是，那么你做错了什么。

如果您使用的是 a`NVARCHAR`或此类类型，则需要在添加参数值之前以正确的格式在 C# 中`ToString`调用。`DateTime`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:13:11.237

你不能 - 如何`DateTime`存储的内部结构不是可以改变的。它实际上是自给定日期以来的“滴答声”数量。

> 时间值以 100 纳秒为单位，称为滴答声，特定日期是公历中自 0001 年 1 月 1 日午夜 12:00 以来的滴答声数（不包括闰秒添加的滴答声） . 例如，刻度值 31241376000000000L 表示日期，即 0100 年 1 月 1 日星期五午夜 12:00:00。

如果您必须将其作为字符串而不是 a传递，`datetime`则应该将其转换并将其`ToString("yyyy/M/d HH:mm:ss")`传递给您的参数。根据您在问题中所说的，这几乎肯定是现在内部发生的事情，仅使用默认`ToString()`格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:15:13.313

正如其他人所说，a`DateTime`没有“格式”，在 .NET 或 T-SQL 中都没有。`DateTime`是一种强烈表示日期和时间的 .NET 类型。

无论您在做什么，请确保日期的存储过程参数是 T-SQL 类型`datetime`（或其朋友之一），而不是`varchar`或类似的。

# mysql - 数据库大于 RAM 的 MySQL 上的“innodb_buffer_pool_size”

> ID：13381489
> 
> 赞同：4
> 
> 时间：2012-11-14T15:09:53.067
> 
> 标签：mysql, innodb, ram

我有一台运行 MySQL 的 Linux 服务器，其中：

```
-12 Gb RAM 
-4 x Intel(R) Xeon(R) CPU E6510  @ 1.73GHz
-CentOS release 6.3
-MySQL 5.1.61 
```

由于一些技术问题，我们不得不将服务器的 RAM 内存减少到 8 GB，目前我们无法拥有任何内存。现在，正因为如此，我们的服务器上出现了很多性能问题。这是我们数据库的大小：

```
+--------+--------------------+---------+--------+--------+------------+---------+
| tables | table_schema       | rows    | data   | idx    | total_size | idxfrac |
+--------+--------------------+---------+--------+--------+------------+---------+
|     43 | XXXXXXXX           | 142.81M | 10.52G | 13.31G | 23.83G     |    1.27 |
|     44 | Test_XXXXXXXX      | 55.20M  | 3.57G  | 4.77G  | 8.33G      |    1.34 |
|     34 | XXXXXXXXXXXXXXXX   | 23.04M  | 1.39G  | 1.84G  | 3.24G      |    1.32 |
|     23 | mysql              | 0.00M   | 0.00G  | 0.00G  | 0.00G      |    0.16 |
|     28 | information_schema | NULL    | 0.00G  | 0.00G  | 0.00G      |    NULL |
+--------+--------------------+---------+--------+--------+------------+---------+ 
```

这是 /etc/my.cnf 的内容：

```
[mysqld]

max_allowed_packet = 1024M
sort_buffer_size = 512M
max_connections=500

query_cache_size = 512M
query_cache_limit = 512M
query-cache-type = 2

table_cache = 800

thread_cache_size=8
key_buffer_size = 512M
read_buffer_size=64M
read_rnd_buffer_size=64M
myisam_sort_buffer_size=64M

innodb_flush_log_at_trx_commit=2
innodb_buffer_pool_size=7000M
innodb_additional_mem_pool_size=100M

... 
```

我不知道我是否能够真正确定大小和 RAM 之间的关系。但情况是，当我有 12GB RAM 时，一切正常。“innodb_buffer_pool_size”值为10000M，性能非常好。但是现在，做同样的操作要多4倍。

我们的应用程序基本上是一个 DB 导出器，主要访问一个表，它有 72,314,541 个寄存器。

```
+--------+---------+--------+--------+------------+---------+
| tables | rows    | data   | idx    | total_size | idxfrac |
+--------+---------+--------+--------+------------+---------+
|      9 | 159.12M | 11.07G | 15.87G | 26.94G     |    1.43 |
+--------+---------+--------+--------+------------+---------+ 
```

目前我们正在测试更改“innodb_buffer_pool_size”的值，但看起来我们不会获得更多性能。现在，问题是，我们可以做些什么来提高 MySQL 的性能？

```
-Put more RAM (obviously)
-Change more variables on /etc/my.cnf?
-MySQL Partitioning for Performance
-... 
```

欢迎所有的想法和贡献，

提前致谢

**编辑：添加了表和查询的所有信息**

DB的结构是一个从一些传感器接收信息并存储它的系统。

测量表：我们从传感器接收到的测量值。

```
+--------------------+------------+------+-----+---------+----------------+
| Field              | Type       | Null | Key | Default | Extra          |
+--------------------+------------+------+-----+---------+----------------+
| id                 | bigint(20) | NO   | PRI | NULL    | auto_increment |
| version            | bigint(20) | NO   |     | NULL    |                |
| counter            | char(2)    | YES  |     | NULL    |                |
| datemeasurement_id | datetime   | NO   | MUL | NULL    |                |
| datereal_id        | datetime   | NO   | MUL | NULL    |                |
| delayed            | bit(1)     | NO   |     | NULL    |                |
| frequency          | tinyint(4) | YES  |     | NULL    |                |
| measuringentity_id | bigint(20) | NO   | MUL | NULL    |                |
| real               | bit(1)     | NO   |     | NULL    |                |
| tamper             | bit(1)     | NO   |     | NULL    |                |
| value              | float      | NO   |     | NULL    |                |
+--------------------+------------+------+-----+---------+----------------+ 
```

测量实体表：一个传感器可以测量多个事物（温度、湿度）。这些就是实体。

```
+--------------+------------+------+-----+---------+----------------+
| Field        | Type       | Null | Key | Default | Extra          |
+--------------+------------+------+-----+---------+----------------+
| id           | bigint(20) | NO   | PRI | NULL    | auto_increment |
| version      | bigint(20) | NO   |     | NULL    |                |
| household_id | varchar(4) | NO   | MUL | NULL    |                |
| operative    | bit(1)     | NO   |     | NULL    |                |
| type         | char(20)   | NO   |     | NULL    |                |
| unit         | char(3)    | NO   |     | NULL    |                |
| interval     | float      | YES  |     | NULL    |                |
+--------------+------------+------+-----+---------+----------------+ 
```

sensor_measuring_entity：一个传感器可以关联多个实体。

```
+--------------------+------------+------+-----+---------+-------+
| Field              | Type       | Null | Key | Default | Extra |
+--------------------+------------+------+-----+---------+-------+
| sensor_id          | bigint(20) | NO   | PRI | NULL    |       |
| measuringentity_id | bigint(20) | NO   | PRI | NULL    |       |
| version            | bigint(20) | NO   |     | NULL    |       |
+--------------------+------------+------+-----+---------+-------+ 
```

传感器表：传感器的信息，与上表中的测量实体相关。

```
+---------------------+-------------+------+-----+---------+----------------+
| Field               | Type        | Null | Key | Default | Extra          |
+---------------------+-------------+------+-----+---------+----------------+
| id                  | bigint(20)  | NO   | PRI | NULL    | auto_increment |
| version             | bigint(20)  | NO   |     | NULL    |                |
| battery             | bit(1)      | NO   |     | NULL    |                |
| identifier          | char(6)     | NO   |     | NULL    |                |
| installationdate_id | datetime    | NO   | MUL | NULL    |                |
| lastreceiveddate_id | datetime    | YES  | MUL | NULL    |                |
| location_id         | bigint(20)  | NO   | MUL | NULL    |                |
| operative           | bit(1)      | NO   |     | NULL    |                |
| tampererror         | smallint(6) | NO   |     | NULL    |                |
+---------------------+-------------+------+-----+---------+----------------+ 
```

位置表：放置传感器的位置。

```
+------------+------------+------+-----+---------+----------------+
| Field      | Type       | Null | Key | Default | Extra          |
+------------+------------+------+-----+---------+----------------+
| id         | bigint(20) | NO   | PRI | NULL    | auto_increment |
| version    | bigint(20) | NO   |     | NULL    |                |
| height     | tinyint(4) | YES  |     | NULL    |                |
| operative  | bit(1)     | NO   |     | NULL    |                |
| place      | char(15)   | NO   | MUL | NULL    |                |
| room       | char(15)   | NO   |     | NULL    |                |
| typesensor | char(15)   | NO   |     | NULL    |                |
| formaster  | bit(1)     | YES  |     | NULL    |                |
+------------+------------+------+-----+---------+----------------+ 
```

这是查询（针对所有房屋和所有传感器）：

```
for (int z = 0; z < allHouses.length; z++) {
for (int j = 0; j < sensorlist.length; j++) {

sql.eachRow ("SELECT m.datemeasurement_id, s.identifier, me.type, m.value"
+ " FROM measurement as m"
+ " JOIN measuring_entity as me ON m.measuringentity_id = me.id"
+ " JOIN sensor_measuring_entity as sme ON sme.measuringentity_id = me.id"
+ " JOIN sensor as s ON sme.sensor_id = s.id"
+ " WHERE me.id = $actualmeid"
+ " AND me.household_id = '$mHouse'"
+ " AND m.datemeasurement_id >= '$cons_startDate'"
+ " AND m.datemeasurement_id <= '$cons_endDate'"
+ " AND m.datemeasurement_id > '$startDate'"
+ " AND m.datemeasurement_id < '$endDate'"
+ " ORDER BY datemeasurement_id")
{
}} 
```

PD：一切都是一个 Grails 应用程序的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-26T22:34:05.037

您分配了太多 RAM 并进入交换。交换比缩小设置差得多。

对于*您的*8GB，建议进行这些更改

innodb_buffer_pool_size = 5000M query_cache_size = 50M

如果您说您使用的是 MyISAM 还是 InnoDB，我会给您更多提示。

# gwt - 总重量。马文。GWT 模块 在项目来源或资源中找不到

> ID：13381493
> 
> 赞同：4
> 
> 时间：2012-11-14T15:10:08.463
> 
> 标签：gwt, maven, multi-project, gwt-maven-plugin

我有一个 Maven 多模块项目。其中一个模块（编译为`.jar`）仅包含域对象，这些对象将在客户端和服务器端使用（我将此`.jar`作为依赖项添加到我的其他模块）。

我知道 GWT 模块，其中将使用 shared 的对象`.jar`，还必须有源文件才能成功编译。所以我试图添加到我的`pom.xml` 两者中：

```
 <resources> 
            <resource>
              <directory>src/main/java/<path></directory> 
              <includes> 
                <include>**/*.java</include> 
                <include>**/*.gwt.xml</include> 
              </includes> 
            </resource> 
        </resources> 
```

和

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>gwt-maven-plugin</artifactId>
    <versionRange>[${gwt.version}]</versionRange>
    <goals>
        <goal>resources</goal>
    </goals>
 <plugin> 
```

但结果`.jar`不包含 GWT 模块源（即`gwt.xml`）。域类的所有源也被添加（在根目录`.jar`），但`ModuleName.gwt.xml`不是。

问题出在哪里？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:45:28.023

如果您的`.gwt.xml`文件在其中，那么如果您指定为资源路径`src/main/resources/`，它将不会被复制...`src/main/java/`

您可能应该省略该`<resource>`部分，让 GWT 插件在 jar 中包含源代码或至少有两个部分，一个用于`.gwt.xml`文件（`src/main/resources`或您放置它的位置），另一个用于源代码（就像您现在拥有的那样）。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T01:06:44.860

我今天正在解决这个错误，所以我只是发布我的修复：

使用 maven gwt 插件构建的多模块 gwt 项目需要在 pom.xml 中添加一个条目，例如：

```
 <modules>
        <module>../theothermodule</module>
  </modules> 
```

为了编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T13:51:45.893

这个错误有多种解释。检查清单：

*   如果您引用的是 gwt 模块，则需要以`*.gwt.xml`点表示法指向文件，而不需要文件扩展名。eg`com.example.ThirdParty`指`com/example/ThirdParty.gwt.xml`模块
*   要导入第 3 方模块，请添加`<inherits name="com.example.ThirdParty" />`到您的`*.gwt.xml`文件中
*   `ThirdParty.gwt.xml`应该包含一个或多个`source`指向可翻译代码的元素。例如`<source path='shared' />`。
*   所有可翻译的代码都`ThirdParty.jar`需要包含纯文本`*.java`源。例如`com/example/shared/Widget.class`和`com/example/shared/Widget.java`都存在
*   在`ThirdParty.jar`你的类路径上

笔记：

*   如果`ThirdParty`gwt 模块没有入口点，则不需要使用 gwt 编译器进行编译
*   gwt 编译器不需要额外的配置来包含`ThirdParty`模块，只要它的 jar 在类路径上并且你`*.gwt.xml`继承`ThirdParty.gwt.xml`；这同样适用于 gwt maven 插件

# c# - 时间：2019-01-03 标签：c#windows store app授予使用的dll-s的能力

> ID：13381494
> 
> 赞同：1
> 
> 时间：2012-11-14T15:10:08.907
> 
> 标签：c#, microsoft-metro

我想在我的 Windows 应用商店项目中使用 TagLib。TagLib 是作为参考导入的，它的 dll (taglib-sharp.dll) 我可以访问我的音乐文件夹中的任何文件，因为它已被检查功能。但是，当我打电话时

```
TagLib.File file = TagLib.File.Create(soundFilePath, TagLib.ReadStyle.None); 
```

它引发以下错误：

```
System.UnauthorizedAccessException was unhandled by user code
HResult=-2147024891
Message=Access to the path 'C:\Users\Gabor\Music\_FIFA 2010 soundtracks\01\. Meine Stadt - Auletta.mp3' is denied.
Source=taglib-sharp
StackTrace:
   at TagLib.File.Create(IFileAbstraction abstraction, String mimetype, ReadStyle propertiesStyle)
   at TagLib.File.Create(String path, String mimetype, ReadStyle propertiesStyle)
   at TagLib.File.Create(String path, ReadStyle propertiesStyle) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T23:11:58.610

您可以使用 TagLibSharp 通过创建 StreamFileAbstraction 并将其传递给 File.Create 来加载标签。这不会使用任何被禁止的 API。

```
public void ExampleCall(StorageFile storageFile)
{
    IRandomAccessStreamWithContentType f = await storageFile.OpenReadAsync();
    var file = File.Create(new StreamFileAbstraction(storageFile.Name, f.AsStream()));
}

public class StreamFileAbstraction : File.IFileAbstraction
{
    public StreamFileAbstraction(string name, Stream stream)
    {
        Name = name;
        ReadStream = stream;
        WriteStream = stream;
    }

    public void CloseStream(Stream stream)
    {
        stream.Flush();
    }

    public string Name { get; private set; }
    public Stream ReadStream { get; private set; }
    public Stream WriteStream { get; private set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:28:09.717

不能这样做。改用 MusicProperties，然后使用 lastfm api 来获取所需的信息.. 可惜它在 Win8 c# 中如此困难在普通 C# 中很容易

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T22:32:59.347

对于 WinRT，您接下来需要：

```
var task = await StorageFile.GetFileFromApplicationUriAsync(uri);
var stream = await task.OpenStreamForReadAsync();
 using (var info = File.Create(new StreamFileAbstraction(Path.GetFileName(uri.LocalPath), stream, stream)))
 {
      Album = info.Tag.Album;
      Comment = info.Tag.Comment;
      // more properties
 } 
```

你需要添加 NuGet 包 - TagLib# Portable

# javascript - 在 Google 地图上绘制区域中的矩形

> ID：13381497
> 
> 赞同：5
> 
> 时间：2012-11-14T15:10:22.537
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我正在使用 Geometry API 在 Google 地图上绘制一个区域。我想知道是否可以在大小动态的区域上绘制重复元素？

例如，如果我将我的区域绘制成如下所示：

![在此处输入图像描述](../Images/5e939bef442aa718c340faf038beb2dc.png)

然后我希望能够点击“下一步”并看到类似的东西，在该区域绘制矩形，但前提是它们适合。即，它们必须是“完整”矩形，而不是部分矩形：

![在此处输入图像描述](../Images/5dff9bad2bc1d9b0fb3d32a41a4ca645.png)

唯一的问题是，我不完全确定如何去做。我会使用 HTML5 `<canvas>`，但不幸的是，这需要尽可能对浏览器友好，但如果必须`<canvas>`如此，那就这样吧！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T01:09:07.653

虽然我没有使用canvas，但是这段代码呢？

```
function onPolygonComplete(polygon) {
  var bounds, paths, sw, ne, ystep, xstep,
      boxH, boxW, posArry, flag, pos,
      x, y, i, box, maxBoxCnt;

  //Delete old boxes.
  boxes.forEach(function(box, i) {
    box.setMap(null);
    delete box;
  });

  //Calculate the bounds that contains entire polygon.
  bounds = new google.maps.LatLngBounds();
  paths = polygon.getPath();
  paths.forEach(function(latlng, i){
    bounds.extend(latlng);
  });

  //Calculate the small box size.
  maxBoxCnt = 8;
  sw = bounds.getSouthWest();
  ne = bounds.getNorthEast();
  ystep = Math.abs(sw.lat() - ne.lat()) / maxBoxCnt;
  boxH = Math.abs(sw.lat() - ne.lat()) / (maxBoxCnt + 1);
  xstep = Math.abs(sw.lng() - ne.lng()) / maxBoxCnt;
  boxW = Math.abs(sw.lng() - ne.lng()) / (maxBoxCnt + 1);

  for (y = 0; y < maxBoxCnt; y++) {
    for (x = 0; x < maxBoxCnt; x++) {
      //Detect that polygon is able to contain a small box.
      bounds = new google.maps.LatLngBounds();
      posArry = [];
      posArry.push(new google.maps.LatLng(sw.lat() + ystep * y, sw.lng() + xstep * x));
      posArry.push(new google.maps.LatLng(sw.lat() + ystep * y, sw.lng() + xstep * x + boxW));
      posArry.push(new google.maps.LatLng(sw.lat() + ystep * y + boxH, sw.lng() + xstep * x));
      posArry.push(new google.maps.LatLng(sw.lat() + ystep * y + boxH, sw.lng() + xstep * x + boxW));
      flag = true;
      for (i = 0; i < posArry.length; i++) {
        pos = posArry[i];
        if (flag) {
          flag = google.maps.geometry.poly.containsLocation(pos, polygon);
          bounds.extend(pos);
        }
      }

      //Draw a small box.
      if (flag) {
        box = new google.maps.Rectangle({
          bounds : bounds,
          map : mapCanvas,
          strokeColor: '#00ffff',
          strokeOpacity: 0.5,
          strokeWeight: 1,
          fillColor: '#00ffff',
          fillOpacity : 0.5,
          clickable: false
        });
        boxes.push(box);
      }
    }
  }
} 
```

这段代码就像这张图片一样工作。 ![在此处输入图像描述](../Images/acb5b2587fd8c89e66aa4d33d14f351a.png)

我写了一个解释代码的页面。 [http://googlemaps.googlermania.com/google_maps_api_v3/en/poly_containsLocation.html](http://googlemaps.googlermania.com/google_maps_api_v3/en/poly_containsLocation.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-26T04:31:59.810

@约书亚M

抱歉让您久等了。好的，新代码如下。您可以在以下位置指定小框尺寸`var boxSize = new google.maps.Size(10, 20);`

* * *

```
<!DOCTYPE html>
<html>
  <head>
    <script src="http://maps.googleapis.com/maps/api/js?sensor=false&libraries=geometry"></script>
    <script type='text/javascript'>
      var mapCanvas, boxes = new google.maps.MVCArray();
      function initialize() {
        var mapDiv = document.getElementById("map_canvas");
        mapCanvas = new google.maps.Map(mapDiv, {
          center : new google.maps.LatLng(37.422191,-122.084585),
          mapTypeId : google.maps.MapTypeId.SATELLITE,
          zoom : 19,
          tilt : 0
        });

        //Encoded path
        var encodedPath = "eblcFnuchVv@D@q@P?a@eD]AC~@b@DCz@a@A";
        var points = google.maps.geometry.encoding.decodePath(encodedPath);

        //Draw a polygon
        var polygonOpts = {
          paths : points,
          strokeWeight : 6,
          strokeColor : "#FF0000",
          strokeOpacity : 1,
          //fillColor : "blue",
          fillOpacity : 0,
          map : mapCanvas,
          editable : true
        };
        var poly = new google.maps.Polygon(polygonOpts);

        var proc = function() {
          onPolygonComplete(poly);
        };
        google.maps.event.addListener(mapCanvas, "projection_changed", proc);
        google.maps.event.addListener(poly.getPath(), 'insert_at', proc);
        google.maps.event.addListener(poly.getPath(), 'remove_at', proc);
        google.maps.event.addListener(poly.getPath(), 'set_at', proc);
      }

      function onDrawMgr_complete(polygon) {
        var path = polygon.getPath();
        console.log(google.maps.geometry.encoding.encodePath(path));
      }

      function onPolygonComplete(polygon) {
        var bounds, paths, sw, ne, ystep, xstep, boxH, boxW, posArry, flag, pos, x, y, i, box;

        //Delete old boxes.
        boxes.forEach(function(box, i) {
          box.setMap(null);
          delete box;
        });

        //Calculate the bounds that contains entire polygon.
        bounds = new google.maps.LatLngBounds();
        paths = polygon.getPath();
        paths.forEach(function(latlng, i) {
          bounds.extend(latlng);
        });

        var projection = mapCanvas.getProjection();
        var zoom = mapCanvas.getZoom();
        var powBase = Math.pow(2, zoom);

        //Calculate the small box size.
        sw = bounds.getSouthWest();
        ne = bounds.getNorthEast();
        var swPoint = projection.fromLatLngToPoint(sw);
        var nePoint = projection.fromLatLngToPoint(ne);
        var boxSize = new google.maps.Size(10, 20); //in pixels.
        boxSize.width /= powBase;
        boxSize.height /= powBase;
        var maxX = Math.floor(Math.abs((swPoint.x - nePoint.x)) / boxSize.width);
        var maxY = Math.floor(Math.abs((swPoint.y - nePoint.y)) / boxSize.height);

        for ( y = 0; y < maxY; y++) {
          for (x = 0; x < maxX; x++) {
            //Detect that polygon is able to contain a small box.
            bounds = new google.maps.LatLngBounds();
            posArry = [];
            posArry.push(new google.maps.Point(swPoint.x + boxSize.width * x, swPoint.y - boxSize.height * y));
            posArry.push(new google.maps.Point(swPoint.x + boxSize.width * x, swPoint.y - boxSize.height * (y + 1)));
            posArry.push(new google.maps.Point(swPoint.x + boxSize.width * (x + 1), swPoint.y - boxSize.height * y));
            posArry.push(new google.maps.Point(swPoint.x + boxSize.width * (x + 1), swPoint.y - boxSize.height * (y + 1)));

            var flag = true;
            for (var i = 0; i < posArry.length; i++) {
              pos = projection.fromPointToLatLng(posArry[i]);
              if (flag) {
                flag = google.maps.geometry.poly.containsLocation(pos, polygon);
                bounds.extend(pos);
              }
            }

            if (flag) {
              box = new google.maps.Rectangle({
                bounds : bounds,
                map : mapCanvas,
                strokeColor : 'green',
                strokeOpacity : 1,
                strokeWeight : 1,
                fillColor : 'yellow',
                fillOpacity : 0.5,
                clickable : false
              });
              boxes.push(box);
            }
          }
        }
      }

      google.maps.event.addDomListener(window, "load", initialize);
    </script>
    <style type="text/css">
      window,html,#map_canvas{
        width : 700px;
        height : 500px;
      }
    </style>
  </head>
  <body>

    <div id="map_canvas"/>
  </body>
</html> 
```

![在此处输入图像描述](../Images/0581bd6cb23b63d54de4fe5574bd556a.png)

# distributed-computing - 原子广播和原子多播有什么区别？

> ID：13381500
> 
> 赞同：2
> 
> 时间：2012-11-14T15:10:36.567
> 
> 标签：distributed-computing, terminology, broadcast, multicast

我不清楚为什么有些论文使用一个或另一个术语。我认为它们是同一件事：也许原子多播实际上是使用 IP 多播（如环 Paxos）实现的原子广播。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:27:26.560

在分布式系统理论中，它与使用 IP 多播或任何其他实现细节无关。实际上，大多数时候这是作者个人喜好的问题，您可以放心地假设它们的含义相同。

详细地说，严格地说，当您说多播时，您假设并非所有进程都必须接收所有消息。当您说广播时，您假设所有进程都是所有消息的目标。歧义产生如下：由于多播算法通常位于成员管理之上，因此在视图上下文中向所有成员多播的抽象协议与向系统模型中的所有进程广播的协议几乎没有区别。因此，您可以将其描述为多播或广播。这真的取决于上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-25T15:27:58.133

[原子广播](https://en.wikipedia.org/wiki/Atomic_broadcast)一词与**单个中央实体**更相关，通常称为***定序器***，它执行和发送一组完全有序的消息，通常称为***事件流***。它如何发送消息（广播、多播、单播、tcp 等）不是它的主要特征，或者至少不应该是。除了@jop 所说的，在 TCP/IP 协议方面，UDP 广播和 UDP 多播之间存在很大的技术差异。例如：

*   组播可以跨子网传播，广播不能
*   组播通常需要[IGMP](https://en.wikipedia.org/wiki/Internet_Group_Management_Protocol)，广播不需要
*   大多数内核绕过网卡将加速多播，但不会广播

这并不意味着永远不应该使用 UDP 广播。有些网络可能不支持多播，但会支持广播。理想情况下，消息传递系统将支持多种传输机制：

*   UDP组播
*   UDP单播
*   UDP广播
*   TCP
*   记忆
*   共享内存
*   双（TCP + UDP）

对于不依赖于任何特定传输机制的原子广播消息系统的示例，您可以查看[CoralSequencer](http://www.coralblocks.com/index.php/state-of-the-art-distributed-systems-with-coralmq/)。

**免责声明：**我是 CoralSequencer 的开发者之一。

# web-services - 如何使用 Web 服务自动填充防止 Word 2003 中的小数截断

> ID：13381502
> 
> 赞同：1
> 
> 时间：2012-11-14T15:10:52.680
> 
> 标签：web-services, vbscript, word-2003

我有一个通过外部 Web 服务自动填充的文档模板。传入的数据以货币形式存在（例如 3.10），但是当它被传递到 Word 文档模板时，变量会被截断以删除任何尾随的 0。我需要数字始终以 2 位小数出现，即使它们都是 0。

这是 2003 版的 Word，我没有测试过其他版本，因为我们所有的文档模板都需要使用该版本的 Word 生成。

我觉得这可以通过宏或 VB 脚本来完成，但我的时间非常少，并且没有使用这些工具的经验 - 非常感谢任何帮助！

# node.js - 在 TypeScript 中导入节点模块

> ID：13381503
> 
> 赞同：5
> 
> 时间：2012-11-14T15:10:59.040
> 
> 标签：node.js, module, npm, typescript

如何导入位于 TypeScript 的 node_modules 文件夹中的节点模块？

当我尝试编译以下 TypeScript 代码时，我收到一条错误消息（**名称 ''async'' 在当前范围内不存在）：**

```
// Converted from: var async = require('async');
import async = module('async'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:26:38.393

您需要创建一个定义文件并包含以下内容：

```
module "async" {} 
```

然后在您的 TypeScript 代码中添加对此定义文件的引用

```
///<reference path='definition-file.d.ts' />

import async = module('async'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-15T05:43:51.483

打字稿中的标准“import blah = require('x')”语义完全不适用于节点模块。

解决此问题的最简单方法是显式定义、接口和使用 require，而不是导入：

```
// You can put this in an external blah.d file if you like; 
// remember, interfaces do not emit any code when compiled.
interface qOrm {
    blah:any;
}

declare var require:any;
var qOrm:qOrm = require("../node_modules/q-orm/lib/q-orm");

var x = qOrm.blah; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-28T05:01:41.983

```
npm install --save-dev @types/async
npm install --save async 
```

和语法：

```
import * as async from "async" 
```

# sqlite - 休眠事务和单元测试

> ID：13381506
> 
> 赞同：2
> 
> 时间：2012-11-14T15:11:05.200
> 
> 标签：sqlite, nhibernate, testing, transactions

我有一段看起来像这样的代码：

```
public void Foo(int userId)
{
    try {
        using (var tran = NHibernateSession.Current.BeginTransaction())
        {
            var user = _userRepository.Get(userId);
            user.Address = "some new fake user address";
            _userRepository.Save(user);
            Validate();
            tran.Commit();
        }
    }
    catch (Exception) {
        logger.Error("log error and don't throw")
    }
}

private void Validate()
{
    throw new Exception();
} 
```

我想对验证是否正确进行单元测试。我使用 nunit 和 SQLLite 数据库进行测试。这是测试代码：

```
protected override void When()
{
    base.When();
    ownerOfFooMethod.Foo(1);
    Session.Flush();
    Session.Clear();
}

[Test]
public void FooTest()
{
    var fakeUser = userRepository.GetUserById(1);
    fakeUser.Address.ShouldNotEqual("some new fake user address");
} 
```

我的测试失败了。
在调试时，我可以看到抛出了异常，但尚未调用 Commit。但是我的用户在地址属性中仍然有“一些新的假用户地址”，尽管我期待它会被回滚。
当我查看 nhibernate profiler 时，我可以看到 begin transaction 语句，但它后面既没有提交也没有回滚。
更重要的是，即使我将 try-catch 块放在那里并在 catch 中显式执行 Rollback，我的测试仍然失败。
我认为测试环境存在一些问题，但对我来说一切似乎都很好。

有任何想法吗？

编辑：我添加了重要的 try-catch 块（一开始我已经简化了太多代码）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:30:06.513

如果在 NH 将更改刷新到数据库之前发生异常，并且如果您继续使用该会话而不驱逐/清除对象并且由于某种原因稍后发生刷新，则更改仍将保持不变，因为对象仍然是脏的根据NHibernate。回滚事务时，您应该立即关闭会话以避免此类问题。

另一种说法：回滚不会回滚您对持久实体所做的内存更改。

此外，如果会话是常规会话，则不需要调用 Save()，因为该实例已由 NH 跟踪。

# mysql - 文件排序查询，有索引，但不使用它

> ID：13381507
> 
> 赞同：0
> 
> 时间：2012-11-14T15:11:11.870
> 
> 标签：mysql

为什么下面的查询使用story_keywords 表中的索引story_id 失败？

```
mysql> EXPLAIN SELECT `stories`.*
    -> FROM (`stories`)
    -> JOIN `story_keywords` ON `story_keywords`.`story_id` = `stories`.`id`
    -> WHERE `image_full_url` != ''
    -> AND `order` != 0
    -> AND `news_type` IN ('movie', 'movie_review') 
    -> AND `keyword` IN ('topnews', 'toptablet') 
    -> GROUP BY `stories`.`id`
    -> ORDER BY `created` DESC, `order` DESC
    -> LIMIT 5 ;
+----+-------------+----------------+--------+---------------+---------+---------+---------------------------------------+------+----------------------------------------------+
| id | select_type | table          | type   | possible_keys | key     | key_len | ref                                   | rows | Extra                                        |
+----+-------------+----------------+--------+---------------+---------+---------+---------------------------------------+------+----------------------------------------------+
|  1 | SIMPLE      | story_keywords | ALL    | story_id      | NULL    | NULL    | NULL                                  |   42 | Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | stories        | eq_ref | PRIMARY       | PRIMARY | 767     | entertainment.story_keywords.story_id |    1 | Using where                                  |
+----+-------------+----------------+--------+---------------+---------+---------+---------------------------------------+------+----------------------------------------------+
2 rows in set (0.00 sec)

mysql> show create table stories;
+---------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table   | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
+---------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stories | CREATE TABLE `stories` (
  `id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `news_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `title` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created` datetime DEFAULT NULL,
  `author` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `author_title` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `image_caption` text COLLATE utf8_unicode_ci,
  `image_credit` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `image_full_url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `body` text COLLATE utf8_unicode_ci,
  `summary` text COLLATE utf8_unicode_ci,
  `external_url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `order` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci |
+---------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> show create table story_keywords;
+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table          | Create Table                                                                                                                                                                                                                                                                                                                      |
+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| story_keywords | CREATE TABLE `story_keywords` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `story_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `keyword` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  KEY `story_id` (`story_id`)
) ENGINE=MyISAM AUTO_INCREMENT=85 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci |
+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:17:04.240

这可能是因为 MySQL 认为从 story_keywords 表中获取所有行并将它们加入而不是使用索引更便宜。一开始听起来很奇怪，但是，你看，如果你必须对一个表执行 100 次索引查找，而这个表只有大约 100 行——读取所有行的成本会更低。解释很简单：索引查找（对于 BTREE 索引）是 O(ln N)，而读取 N 行是 O(N)。显然，O(N) < N * O(ln N)。

为了证明这一点 - 尝试从故事中仅选择 1 行（我的意思是一行，而不是对整个表格进行排序并限制结果；），就像：

```
SELECT `stories`.*
FROM (`stories`)
JOIN `story_keywords` ON `story_keywords`.`story_id` = `stories`.`id`
WHERE `stories`.id = SOMETHING 
```

此查询更有可能转向 story_keywords 上的索引。

希望这能回答你的问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:34:20.867

安东走在正确的轨道上，但我相信问题还有更多。正如我对 OP 的评论所说，id 列很可能是`INT`类型。如解释所示，主键的长度`stories`为 767。通常对于`INT`类型，长度为低个位数，但由于列是 a `VARCHAR`，因此长度非常长。

回到主要问题，由于, 或上没有索引`stories.news_type`，优化器决定对 进行全面扫描，因为它将产生最小的初始结果集。如果其中一列有索引，它可能会首先使用它。如果您添加查询可以使用的索引，则不需要进行全表扫描。`stories.order``story_keywords.story_keywords``story_keywords`

# dart - Dart 语言方向键事件

> ID：13381508
> 
> 赞同：3
> 
> 时间：2012-11-14T15:11:17.897
> 
> 标签：dart, dartium

我正在尝试在 dart 中开发一个简单的应用程序，并且我想捕捉箭头键按下事件，我尝试添加一个 onKeyPress 事件：

```
window.on.keyPress.add(myKeyDownEvent);

void myKeyDownEvent(Event event){
  query("#text").text = event.type.toString();  
} 
```

它适用于所有按键，除了箭头键有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:31:08.350

具有**WontFix**状态[的 chrome](http://code.google.com/p/chromium/issues/detail?id=2606)存在问题。评论 5 说：

 **> 这样做是为了匹配 IE。keypress 事件只应该为插入字符的键触发。请注意，keydown/keyup 会触发箭头键。

使用`window.on.keyDown`代替`window.on.keyPress`对我有用。**

# php - Smarty 3 在 foreach 循环中输出当前位置。

> ID：13381510
> 
> 赞同：0
> 
> 时间：2012-11-14T15:11:26.907
> 
> 标签：php, smarty, smarty3

代替：

```
{foreach $rows as $row}
    <li class="item{if $row@first} item-first{elseif $row@last} item-last{/if}">{$row.title}</li>
{/foreach} 
```

有没有办法做这样的事情？

```
{foreach $rows as $row}
    <li class="item item-{$row@position}">{$row.title}</li>
{/foreach} 
```

这可以输出：

> item-first item-last

我想如果只有 1 行那么它需要输出以上两个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:00:10.517

您可以尝试在循环外描述条件并使用[@iteration](http://www.smarty.net/docs/en/language.function.foreach.tpl#foreach.property.iteration)属性。例如：

在您的 PHP 文件中：

```
$lastIteration = count($rows);
$smarty->assign('classMapping', array(
    1 => 'item-first', // iteration always starts at one
    $lastIteration => 'item-last',
)); 
```

在您的模板中：

```
{foreach $rows as $row}
    <li class="item {$classMapping[$row@iteration]}">{$row.title}</li>
{/foreach} 
```

但是我认为您的代码（带有`if`语句）还不错。

* * *

**更新**

这是 Smarty 3`foreach`函数的源代码：http: [//smarty-php.googlecode.com/svn/trunk/distribution/libs/sysplugins/smarty_internal_compile_foreach.php](http://smarty-php.googlecode.com/svn/trunk/distribution/libs/sysplugins/smarty_internal_compile_foreach.php)

查看类`Smarty_Internal_Compile_Foreach`和方法`complile()`（这是此方法的“缩短”版本，描述了它如何使用`@first`修饰符）：

```
public function compile($args, $compiler, $parameter)
{                
    $ItemVarName = '$' . trim($item, '\'"') . '@';

    // evaluates which Smarty variables and properties have to be computed
    if ($has_name) {
        $usesSmartyFirst = strpos($tpl->source->content, $SmartyVarName . 'first') !== false;                        
    } else {
        $usesSmartyFirst = false;            
    }        

    $usesPropFirst = $usesSmartyFirst || strpos($tpl->source->content, $ItemVarName . 'first') !== false;

    return $output; // output - is a result of the compilation process
} 
```

因此，只有在更改 Smarty 核心类之后，您才能创建自己的内部`foreach`修饰符（`@position`例如）。

# asp.net - Visual Studio 2012 HTML 编辑器 - “转到定义”

> ID：13381511
> 
> 赞同：1
> 
> 时间：2012-11-14T15:11:28.210
> 
> 标签：asp.net, visual-studio-2012, html-editor

在使用 Visual Studio HTML 编辑器时，是否有一种简单的方法可以“转到定义”ASP.Net 控件事件？

```
<asp:Button runat="server" Text="Create New Employer" ID="btnCreateNewEmployer" OnClick="btnCreateNewEmployer_Click" /> 
```

我想在后面的代码中访问 btnCreateNewEmployer_Click 方法，而不必滚动浏览它或执行 ctrl-F 来找到它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:17:30.980

您可以将此扩展用于 VS 2012，它是免费提供的：

它使您能够`Make ctrl+click perform a "Go To Definition" on the identifier under the cursor.`

[转到定义](http://visualstudiogallery.msdn.microsoft.com/4b286b9c-4dd5-416b-b143-e31d36dc622b)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:15:09.597

我能想到的唯一方法是将焦点放在按钮上并按键盘的“F4”按钮或单击“属性”菜单，然后转到具有此定义的事件选项卡。否则，您始终可以转到设计视图并双击按钮本身。

希望这可以帮助！！

# android - 如何制作旋转菜单

> ID：13381515
> 
> 赞同：12
> 
> 时间：2012-11-14T15:11:32.033
> 
> 标签：android, menu, rotation, animated

我有一个关于在 android 中旋转菜单的问题。我想让动画菜单像枪筒一样移动。

![http://i.imgur.com/COb8a.png](../Images/ee840a3a6e9b0fd4b7818891a3b26893.png)

其中 1-6 是 ImageButtons，按钮顺时针或逆时针旋转，具体取决于您触摸屏幕的方式。我知道如何放置 ImageButtons 等，但我从未制作过动画菜单，总是静态的。如果你能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-19T05:34:10.660

我认为你可以通过使用来做到这一点

1）这里是旋转菜单库[https://github.com/dmitry-zaitsev/CircleLayout](https://github.com/dmitry-zaitsev/CircleLayout)

2）使用轮播视图并根据您的要求设置z深度[http://www.codeproject.com/Articles/146145/Android-3D-Carousel](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)

3）按照这个[在android中创建一个圆形视图](https://stackoverflow.com/questions/6857505/creating-a-circular-view-in-android)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-01T08:05:54.800

我实施的最好的是[Circle Menu](https://github.com/szugyi/Android-CircleMenu)。这个用于 Android 应用程序的圆形菜单的简单实现类似于以下屏幕截图...

[![在此处输入图像描述](../Images/fafe6c8a703416bbfa60adbbecdb990b.png)](https://i.stack.imgur.com/40VKq.png)

要下载软件包...

Maven回购：

```
<dependency>
    <groupId>com.github.szugyi</groupId>
    <artifactId>Android-CircleMenu</artifactId>
    <version>2.0.0</version>
</dependency> 
```

或摇篮：

```
compile 'com.github.szugyi:Android-CircleMenu:2.0.0' 
```

Android-CircleMenu 需要 Android 4.0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:20:54.273

我自己也在考虑类似的事情。

查看视图翻转器，它可用于通过滑动手势在视图之间切换，也许有一种方法可以为视图的进入/退出动画添加旋转。

[http://developingandroid.blogspot.co.uk/2009/09/implementing-swipe-gesture.html](http://developingandroid.blogspot.co.uk/2009/09/implementing-swipe-gesture.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T22:22:20.300

创建您自己的扩展[ViewGroup](http://developer.android.com/reference/android/view/ViewGroup.html)的布局并覆盖 OnMeasure 和 OnLayout 方法。在那里你可以自己定位你的按钮。在您的自定义布局中侦听触摸事件并在上述方法中处理此信息。

看看[FlowLayout](http://nishantvnair.wordpress.com/2010/09/28/flowlayout-in-android/)的实现。这不是您要寻找的，但是它应该让您开始了解您实际需要做什么 OnLayout 和 OnMeasure。

祝你好运。

# java - 为什么 Eclipse 不断地在我的工作区中重建项目？

> ID：13381519
> 
> 赞同：3
> 
> 时间：2012-11-14T15:11:53.047
> 
> 标签：java, eclipse, jrebel

我们正在使用 JRebel 将 Java 代码更改快速重新加载到我们的 JVM 中。这很好用！

但是，我们也使用 Eclipse 作为 IDE。并且由于某种原因，Eclipse 可以真正在我的工作区中重建整个项目，仅仅因为我添加了一个注释，我删除了一个方法，或者任何其他小的代码更改......因为这个重建阶段，所有的类都被重新生成并且是必需的由 JRebel 重新加载。

有*什么*方法可以调试为什么 Eclipse 总是为我们的项目重新构建我们的项目，即使是一个愚蠢的小代码更改？我正在使用 Eclipse 靛蓝。

谢谢，乔臣

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:12:32.983

您需要禁用（或）取消选中`Build Automatically`。

转到项目菜单--->取消选中自动构建。

注意：这会禁用自动构建。但正如 JesperE 评论的那样，它可能会影响你 JRebel 的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T10:39:47.573

禁用自动构建选项不会破坏 JRebel。JRebel 依赖于编译的结果，所以如果你禁用自动构建，你将不得不自己编译更改的类，仅此而已。

您可以尝试设置一个 VM 参数**-Drebel.check_class_hash=true**，它将在重新加载类之前检查校验和。它可能会将重新加载时间从几毫秒减慢到几毫秒。但这仍然比必须重新加载所有项目类的情况要好。

# java - JPA 与附加列的多对多自引用关系

> ID：13381520
> 
> 赞同：3
> 
> 时间：2012-11-14T15:11:53.593
> 
> 标签：java, database, hibernate, jpa, many-to-many

我正在使用 JPA 并使用 Hibernate 作为我的 SQL Server 数据库的提供程序。

我需要一个多对多的自引用关系，它有一个附加列甚至更多附加列。

那是我当前的代码。我收到 Hibernate 的异常：

```
@Entity
public class Person {
  @OneToMany(cascade = CascadeType.ALL, mappedBy = "person", fetch = FetchType.EAGER)
  private Set<Relation> relations;

  @OneToMany(cascade = CascadeType.ALL, mappedBy = "relPerson", fetch = FetchType.EAGER)
  private Set<Relation> inverseRelations;
}

@Entity
public class Relation implements Serializable {
  @Id
  @ManyToOne(cascade = CascadeType.ALL, optional = false, fetch = FetchType.EAGER)
  @PrimaryKeyJoinColumn(name = "PersonID", referencedColumnName = "id")
  private Person person;

  @Id
  @ManyToOne(cascade = CascadeType.ALL, optional = false, fetch = FetchType.EAGER)
  @PrimaryKeyJoinColumn(name = "RelPersonId", referencedColumnName = "id")
  private Person relPerson;
} 
```

在运行时，我从休眠中得到一个异常：

```
org.hibernate.TransientObjectException: object references an unsaved transient instance 
```

有什么方法可以更智能和更好地实现这一点？没有得到那个例外。

谢谢， ihrigb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:20:15.233

如果一个对象不与 a 关联`Hibernate Session`，则该对象将是`Transient`。

当您保存时，列表的一个实例`Relation`可能是`Transient`（通常，该实例没有标识符值）`Person`。

[这](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html)是理解对象状态的更好方法。

# windows - 如何理解 tcp windows 服务器连接问题？

> ID：13381525
> 
> 赞同：1
> 
> 时间：2012-11-14T15:12:05.650
> 
> 标签：windows, sockets, networking, tcp

所以，我使用 telnet 连接到主机和端口。但是在我连接主机后立即关闭连接。所以，我得到了握手

```
[SYN]
[SYN,ACK]
[ACK] 
```

然后，我得到：

```
[FIN,ACK] 
```

我的问题是这种连接问题的诊断是什么？

我不确定它是否因为最初的握手而拒绝连接。连接被拒绝？防火墙？另一种类型的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:57:35.267

这意味着服务器已关闭连接，这可能是由于多种原因，包括正常操作。

# svn - svn propset 是否仍设置在带有 --force 标志选项的 svn 导出上？

> ID：13381527
> 
> 赞同：2
> 
> 时间：2012-11-14T15:12:18.667
> 
> 标签：svn, version-control, repository, svn-propset

svn propset 是否仍设置在 svn 导出上？或者导出是否也删除了任何 propset 设置？据我了解，带有 --force 标志的导出会删除所有 .svn 目录，但 propset 设置是否仍然适用？

是否有保留和/或删除这些的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:15:27.683

我相信他们迷失了所有与 SVN 相关的数据。如果您正在导出，则不会创建工作副本。属性只是 Subversion 使用的元数据。属性在导出方案中没有意义。

# php - 将类函数插入mysql

> ID：13381531
> 
> 赞同：-3
> 
> 时间：2012-11-14T15:12:23.783
> 
> 标签：php, mysql

我有输出网站排名的课程

```
$urlInfo->getUrlInfo(); 
```

这是用于排名的 alexa amazon aws。out 将是域的排名。我需要将等级插入数据库，但除非我将其设置为变量，否则我不能。

我能做些什么？

我试过了：

```
 mysql_query("INSERT INTO rank (date, domain, rank) VALUES ('$date','$domain','".$urlInfo->getUrlInfo()."')") 
```

但等级为空。

这就是 geturlinfo 函数的样子

```
 public function getUrlInfo() {
    $queryParams = $this->buildQueryParams();
    $sig = $this->generateSignature($queryParams);
    $url = 'http://' . self::$ServiceHost . '/?' . $queryParams . 
        '&Signature=' . $sig;
    $ret = self::makeRequest($url);
    //echo "\nResults for " . $this->site .":\n\n <br>";
    self::parseResponse($ret);
} 
```

然后脚本将函数的数组定义为结果

```
 public static function parseResponse($response) {
        $xml = new SimpleXMLElement($response,null,false,
                                    'http://awis.amazonaws.com/doc/2005-07-11');
        if($xml->count() && $xml->Response->TrafficHistoryResult->Alexa->count()) {
            $info = $xml->Response->TrafficHistoryResult->Alexa;
            $nice_array = array(

//                 'City'           => $info->ContactInfo->PhysicalAddress->City,
//                 'State'          => $info->ContactInfo->PhysicalAddress->State,
//                 'Postal Code'    => $info->ContactInfo->PhysicalAddress->PostalCode,
//                 'Country'        => $info->ContactInfo->PhysicalAddress->Country,
//                 'Links In Count' => $info->ContentData->LinksInCount,
//                 'Rank'           => $info->TrafficData->Rank,
//                 'Usage'          => $info->TrafficData->UsageStatistics
                    'Rank'          => $info->TrafficHistory->HistoricalData->Data->Rank

            );
        }

                   foreach($nice_array as $k => $v) 
                    {
                        echo $k.': ' . $v ."\n <br>";
                    }

    } 
```

**更新：**这有效。我现在可以把它放在一个 href=XX 但仍然更新到 mysql 显示空白

```
 $accessKeyId1 = "XXX";
    $secretAccessKey1 = "XXX";
    $site1 = $_GET['domain'];
    $StartNum1 = $_GET['currentdate']; 

    //$url = $urlInfo->getUrlInfo();
    //echo "URL : ".$url;  

    function Rank($accessKeyId, $secretAccessKey, $site, $StartNum)
    {$urlInfo = new UrlInfo($accessKeyId, $secretAccessKey, $site, $StartNum); $urlInfo->getUrlInfo();}
    echo "test url:<a href='/";
    $test = Rank($accessKeyId1, $secretAccessKey1, $site1, $StartNum1);

    //$testing = mysql_query("UPDATE rank SET rank = '".Rank($accessKeyId1, $secretAccessKey1, $site1, $StartNum1)."' WHERE domain = '4shared.com'") or die(mysql_error());
echo $test."'>test</a>"; 
```

对于 UPDATE 我尝试了 Rank($accessKeyId1, $secretAccessKey1, $site1, $StartNum1) 和 $test.

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:12:51.460

尝试，而不是在`$urlinfo->geturlinfo()`上面再做一个准备好的声明，命名为`$url = $urlinfo->geturlinfo()`，然后在声明中`'$url'`这样：

```
mysql_query("INSERT INTO rank (date, domain, rank) VALUES ('$date','$domain','$url')"); 
```

我认为你遇到的主要问题是引号，它将语句分成两部分，这意味着语句不完整（不要引用我的话）

最后，您实际上有一个名为 rank 的表吗？因为听起来您将其称为列/行。

我只是在完成自己的思考过程，我希望这有效/有帮助=]

* * *

在评论中我说你应该这样做->

```
$rank = $this->url->getNewValue();
$url = $this->$rank->getUrlInfo();

mysql_query("INSERT INTO rank (date, domain, rank) VALUES ('$date','$domain','$url')"); 
```

* * *

虽然我会查看下面的链接，`SQL Injection`但它有助于保护您的应用程序免受黑客攻击。

[SQL 注入：信息](https://security.stackexchange.com/questions/10974/sql-injection-information)
[SQL 注入：预防](https://security.stackexchange.com/questions/1257/sql-injection-prevention)

# css - Verdana字体在IE9中是随机高度

> ID：13381532
> 
> 赞同：1
> 
> 时间：2012-11-14T15:12:26.507
> 
> 标签：css, internet-explorer-9

我有一系列简单的 div，其跨度包含“零宽度字符”（#8203）和文本跨度。

在 IE9 中渲染时，高度或外部跨度的偏移量有 1px 差异。什么样的优化可能会导致这种情况？

是否有任何 css/javascript 解决方法来禁用它？

```
...
<p>.</p>
<div class="wrap">
    <span class="outer">
        <span class="inner">&#8203;</span>
    </span>
    <span class="outer">
        <span class="inner">8203820382038203820382038203820382038203</span>
    </span>
</div>
<p>.</p>
... 
```

[http://jsfiddle.net/srfCR/](http://jsfiddle.net/srfCR/)

![在此处输入图像描述](../Images/df4e21f6444363fcd69e96a261556d56.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:24:40.160

这是一个棘手的问题。我将从实际的解决方案开始：

`&#8203;`使用`<wbr>`标签代替零宽度空间 U+200B, 。它没有已知的缺点，只是它可能会激怒那些以标准发誓的人。但是由于某些浏览器中的一些[问题](http://www.cs.tut.fi/~jkorpela/html/nobr.html#zwsp)，它并不总是具有预期的效果（允许直接换行），并且似乎要涵盖几乎所有浏览器，您需要这个：

```
<wbr><a class=wbr></a> 
```

使用 CSS 代码

```
.wbr:after { content: "\00200B"; } 
```

另一种方法是将零宽度空间包装在具有减小字体大小的元素中，例如

```
<span style="font-size: 0.8em">&#8203;</span> 
```

或者，更简单，

```
<small>&#8203;</small> 
```

然后是解释。该问题似乎只出现在 IE 9 的 Quirks 模式下。我的假设是，在 Quirks 模式下，IE 对字体管理应用了更原始的方法。

当它在 Verdana 文本中遇到零宽度空格时，它会注意到 Verdana 没有该字符（[与大多数其他常见字体不同](http://www.fileformat.info/info/unicode/char/200b/fontsupport.htm)），并且可能会从浏览器默认字体中选择它。这意味着默认为 Times New Roman。在该字体中，零宽度空间比 Verdana 字符高，导致增加了高度要求。这听起来令人难以置信（它毕竟是零宽度，因此不可见），但事实是如果我将默认字体（在 IE 设置中）更改为 Arial，问题就会消失。

人们可能会认为这会`font-family: Verdana, Arial`有所帮助。它没有，显然是因为 Quirks Mode IE 在处理字体方面非常原始：它不检查`font-family`列表而是回退到其默认字体。

让你的页面避免[Quirks Mode](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)可以避免 IE 9 上的问题，但我担心一些旧版本的 IE 可能仍然存在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:19:05.953

您可以创建一个特定的 css 文件来解决此问题：

```
<!--[if IE 9]>
<link rel="stylesheet" href="css/ie9.css"/>
<![endif]--> 
```

# android - 在另一个 Intent 中发送 Intent

> ID：13381535
> 
> 赞同：9
> 
> 时间：2012-11-14T15:12:38.377
> 
> 标签：android, serialization, android-intent, android-widget

也许我这样做是错误的，但我想在我自己的应用程序中响应我的 Android AppWidget 的点击事件并启动一个活动。在我设置时，`PendingIntent`我有另一个`Intent`我想在单击时启动。我`onStartCommand`使用这条线：

```
final Intent mLaunchIntent = (Intent) intent.getParcelableExtra(Widget.EXTRA_INTENT); 
```

当我打电话时，`setOnClickPendingIntent`我有这条线：

```
mSendingIntent.putExtra(Widget.EXTRA_INTENT, (Parcelable) mLaunchIntent); 
```

因此，即使在两行中都`mLaunchIntent`有效`Intent`，但第一行缺少大量数据。然后调用`startActivity`失败，因为`Intent`无效。

我想知道是否有可能以及如何在不严格调用的情况下发送另一个`Intent`内部，因为该方法简单地将额外内容从一个添加到下一个。我想将这两个分开并易于访问。`Intent``putExtras``Intent`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T17:55:14.050

我实际上想通了，解决方案很简单。`mLaunchIntent`不应强制转换`Parcelable`或数据丢失。

```
mSendingIntent.putExtra(Intent.EXTRA_INTENT, mLaunchIntent); 
```

这就是我需要`Intent`通过另一个发送一个`Intent`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-08-03T12:58:03.817

您可以通过以下方式将 Intent 放入 Intent：

```
Intent intent = new Intent();
intent.putExtra(Intent.EXTRA_INTENT, new Intent()); 
```

要从 Intent 中检索 Intent（从 Activity 中），您可以执行以下操作：

```
Intent intent = getIntent().getParcelableExtra(Intent.EXTRA_INTENT); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:39:37.947

你不能使用 a`service`来解析 Intent 吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T16:17:02.083

您可以通过多种方式将意图/对象从源传递到目标，反之亦然。一种不使用捆绑包或附加功能的方法是使用带有变量（getter 和 setter）的常用类方法。使用方法传递对象。另一种方法是使用类变量。前任：

```
public class ClassB  extends Activity{
    public static Object myObject;
    ...
}

public class ClassA extends Activity{
    ...
    @override
    protected void onCreate(Bundle savedInstanceState){
        Object myObject = ClassB.myObject;
    }
} 
```

# windows - 如何从字体文件中获取字体名称？

> ID：13381537
> 
> 赞同：3
> 
> 时间：2012-11-14T15:12:52.247
> 
> 标签：windows, delphi, fonts

我想枚举所有文件`C:\Windows\Fonts\`

首先我`FindFirst&FindNext`用来获取所有文件

代码：

```
Path := 'C:\Windows\Fonts';
  if FindFirst(Path + '\*', faNormal, FileRec) = 0 then
    repeat

      Memo1.Lines.Add(FileRec.Name);

    until FindNext(FileRec) <> 0;
  FindClose(FileRec); 
```

它得到一些这样的名称`tahoma.ttf`，显示 `Tahoma regular`在 Windows 字体文件夹中。

但我怎么能得到呢？

其次我为什么不能通过`C:\Windows\Fonts\`shell枚举文件

代码 ：

```
var
  psfDeskTop : IShellFolder;
  psfFont : IShellFolder;
  pidFont : PITEMIDLIST;
  pidChild : PITEMIDLIST;
  pidAbsolute : PItemIdList;
  FileInfo : SHFILEINFOW;
  pEnumList : IEnumIDList;
  celtFetched : ULONG;
begin
  OleCheck(SHGetDesktopFolder(psfDeskTop));
  //Font folder path
  OleCheck(SHGetSpecialFolderLocation(0, CSIDL_FONTS, pidFont));
  OleCheck(psfDeskTop.BindToObject(pidFont, nil, IID_IShellFolder, psfFont));
  OleCheck(psfFont.EnumObjects(0, SHCONTF_NONFOLDERS or SHCONTF_INCLUDEHIDDEN
    or SHCONTF_FOLDERS, pEnumList));
  while pEnumList.Next(0, pidChild, celtFetched ) = 0 do
  begin
   //break in here
    pidAbsolute := ILCombine(pidFont, pidChild);
    SHGetFileInfo(LPCTSTR(pidAbsolute), 0, FileInfo, SizeOf(FileInfo),
    SHGFI_PIDL or SHGFI_DISPLAYNAME );
    Memo1.Lines.Add(FileInfo.szDisplayName);
  end;
end; 
```

我知道 use`Screen.Fonts`可以获取字体列表，但它的显示不同于`C:\Windows\Fonts\`;

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T16:05:53.493

未**记录**的函数可以从字体文件中获取字体的名称。[`GetFontResourceInfo`](http://www.undocprint.org/winspool/getfontresourceinfo)

 **试试这个样本

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  Windows,
  SysUtils;

function GetFontResourceInfo(lpszFilename: PChar; var cbBuffer: DWORD; lpBuffer: PChar; dwQueryType: DWORD): DWORD; stdcall; external 'gdi32.dll' name 'GetFontResourceInfoW';

procedure ListFonts;
const
  QFR_DESCRIPTION  =1;
var
  FileRec : TSearchRec;
  cbBuffer : DWORD;
  lpBuffer: array[0..MAX_PATH-1] of Char;
begin
  if FindFirst('C:\Windows\Fonts\*.*', faNormal, FileRec) = 0 then
  try
    repeat
      cbBuffer:=SizeOf(lpBuffer);
      GetFontResourceInfo(PWideChar('C:\Windows\Fonts\'+FileRec.Name), cbBuffer, lpBuffer, QFR_DESCRIPTION);
      Writeln(Format('%s - %s',[FileRec.Name ,lpBuffer]));
    until FindNext(FileRec) <> 0;
  finally
    FindClose(FileRec);
  end;
end;

begin
  try
   ListFonts;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

关于你的第二个问题替换这一行

```
 while pEnumList.Next(0, pidChild, b) = 0 do 
```

和

```
 while pEnumList.Next(0, pidChild, celtFetched) = 0 do 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-03T14:01:38.327

我从德国德尔福论坛得到这个。它适用于 Delphi 7 Enterprise。

```
function GetFontNameFromFile(FontFile: WideString): string;
type
  TGetFontResourceInfoW = function(Name: PWideChar; var BufSize: Cardinal;
    Buffer: Pointer; InfoType: Cardinal): LongBool; stdcall;
var
  GFRI: TGetFontResourceInfoW;
  AddFontRes, I: Integer;
  LogFont: array of TLogFontW;
  lfsz: Cardinal;
  hFnt: HFONT;
begin
  GFRI := GetProcAddress(GetModuleHandle('gdi32.dll'), 'GetFontResourceInfoW');
  if @GFRI = nil then
    raise Exception.Create('GetFontResourceInfoW in gdi32.dll not found.');

  if LowerCase(ExtractFileExt(FontFile)) = '.pfm' then
    FontFile := FontFile + '|' + ChangeFileExt(FontFile, '.pfb');

  AddFontRes := AddFontResourceW(PWideChar(FontFile));
  try
    if AddFontRes > 0 then
      begin
        SetLength(LogFont, AddFontRes);
        lfsz := AddFontRes * SizeOf(TLogFontW);
        if not GFRI(PWideChar(FontFile), lfsz, @LogFont[0], 2) then
          raise Exception.Create('GetFontResourceInfoW failed.');

        AddFontRes := lfsz div SizeOf(TLogFont);
        for I := 0 to AddFontRes - 1 do
          begin
            hFnt := CreateFontIndirectW(LogFont[I]);
            try
              Result := LogFont[I].lfFaceName;
            finally
              DeleteObject(hFnt);
            end;
          end; // for I := 0 to AddFontRes - 1
      end; // if AddFontRes > 0
  finally
    RemoveFontResourceW(PWideChar(FontFile));
  end;
end;

procedure TMainForm.btnFontInfoClick(Sender: TObject);
begin
  if OpenDialog1.Execute then
    MessageDlg(Format('The font name of %s is'#13#10'%s.', [OpenDialog1.FileName,
      GetFontNameFromFile(OpenDialog1.FileName)]), mtInformation, [mbOK], 0);
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-11T02:53:08.280

这是对 RRUZ 答案的改编，其好处是您可以枚举并查找任何目录中的字体名称，而不必只是 C:\Windows 中已安装的字体。诀窍是在使用 GetFontResourceInfoW 处理每个字体文件之前（和之后）调用 AddFontResource：

```
program font_enum;

{$APPTYPE CONSOLE}
{$R *.res}

uses
  Windows,
  System.SysUtils;

const
  QFR_DESCRIPTION = 1;

var
  p: String;
  F: TSearchRec;
  cbBuffer: DWORD;
  lpBuffer: array [0 .. MAX_PATH - 1] of Char;

function GetFontResourceInfo(lpszFilename: PChar; var cbBuffer: DWORD; lpBuffer: PChar; dwQueryType: DWORD): DWORD;
  stdcall; external 'gdi32.dll' name 'GetFontResourceInfoW';

begin
  try
    { TODO -oUser -cConsole Main : Insert code here }

    p := ParamStr(1);

    if (p = EmptyStr) then
      p := ExtractFilePath(ParamStr(0))
    else if (not DirectoryExists(p)) then
    begin
      Writeln('Directory specified is not valid.');
      Exit;
    end;

    p := IncludeTrailingPathDelimiter(p);

    if (FindFirst(p + '*.ttf', faAnyFile - faDirectory, F) = 0) then
    begin

      repeat
        AddFontResource(PWideChar(p + F.Name));

        cbBuffer := SizeOf(lpBuffer);
        GetFontResourceInfo(PWideChar(p + F.Name), cbBuffer, lpBuffer, QFR_DESCRIPTION);
        Writeln(Format('%s = %s', [F.Name, lpBuffer]));

        RemoveFontResource(PWideChar(p + F.Name));

      until (FindNext(F) <> 0);

    end;

    FindClose(F);

    if (FindFirst(p + '*.fon', faAnyFile - faDirectory, F) = 0) then
    begin

      repeat
        AddFontResource(PWideChar(p + F.Name));

        cbBuffer := SizeOf(lpBuffer);
        GetFontResourceInfo(PWideChar(p + F.Name), cbBuffer, lpBuffer, QFR_DESCRIPTION);
        Writeln(Format('%s = %s', [F.Name, lpBuffer]));

        RemoveFontResource(PWideChar(p + F.Name));

      until (FindNext(F) <> 0);

    end;

    FindClose(F);
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;

end. 
```**

# node.js - 使用 socket.io，如何处理非浏览器客户端的身份验证？

> ID：13381540
> 
> 赞同：3
> 
> 时间：2012-11-14T15:12:56.430
> 
> 标签：node.js, websocket, socket.io

我正在尝试使用*socket.io*验证 WebSocket 连接。

我的 Web 套接字既可以接收来自浏览器的连接，也可以接收来自 Python 或 Node.js 客户端的连接。

在第一种情况下（浏览器），用户通过我的*Express.js*服务器进行身份验证，我可以只[使用会话 cookie](https://stackoverflow.com/questions/2701373/websockets-authentication)，所以没问题。

但是，在第二种情况下（随机客户端），我需要自己处理身份验证。

我从*socket.io*文档中发现，在握手阶段有一个用于授权连接[的钩子。](https://github.com/LearnBoost/socket.io/wiki/Authorizing)但是，客户端似乎无法添加自定义标头。看起来添加自定义数据的唯一方法是[在 url 查询字符串](https://github.com/LearnBoost/socket.io/pull/337)中。

这对我来说似乎并不安全，因为 url 是一个常见的记录，因此也会记录凭据。

另外，我想知道即使在握手期间连接是否安全，或者如果握手没有超过 ssl，那么这样做是一个主要的安全问题。

嗯......基本上是安全问题。有人知道这样做的正确方法是什么吗？我真的必须在 url 中输入凭据吗，这样安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:55:47.353

为此，您需要将 expressID 挂钩到 socketIO 连接的 sessionID。对于快递 3，这是一个完全不同的故事，通常并不那么容易。几个月前，我找到了一种方法。

```
//directories
var application_root = __dirname,

//general require
var express = require('express'),
 connect = require('connect'),
 http = require('http');

//create express app
var app = express();

//create sessionStore
var sessionStore = new connect.session.MemoryStore();

//setup sessionKey
var secretKey = 'superdupersecret';

//configure express
app.configure(function() {

    //use body parser
    app.use(express.bodyParser());

    //override methods
    app.use(express.methodOverride());

    //cookies and sessions
    app.use(express.cookieParser(secretKey));
    app.use(express.session({
        store: sessionStore,
        secret: secretKey,
        key: 'express.sid'
    }));

    //router
    app.use(app.router);
});

//create the http server link to the new data http object of express 3
server = http.createServer(app);

//make server listen to 8080 and localhost requests
server.listen(8080, 'localhost', function() {
    console.log('Express Server running and listening');
});

//bind socket.io to express server by listening to the http server object
var io = require('socket.io').listen(server);

//set the authorization through cookies 
io.set('authorization', function(data, accept) {

//check if header data is given from the user
if (!data.headers.cookie) {

        //return false if no cookie was given
        return accept('Session cookie required!', false);
    }

    //parse cookie into object using the connect method
    //NOTE: this line is a hack, this is due to the fact
    //that the connect.utils.parseCookie has been removed
    //from the current connect module and moved to an own
    //instance called 'cookie'.
    data.cookie = connect.utils.parseSignedCookies(require('cookie').parse(decodeURIComponent(data.headers.cookie)), secretKey);

    //save session id based on exress.sid
    data.sessionID = data.cookie['express.sid'];

    //get associated session for this id
    sessionStore.get(data.sessionID, function(err, session) {
        if (err) {
            //there was an error
            return accept('Error in session store.', false)
        } else if (!session) {
            //session has not been found
            return accept('Session not found', false);
        }

        //successfully got the session, authed with known session
        data.session = session;

        //return the accepted connection
        return accept(null, true);
    });

});

//connection handler for new io socket connections
io.sockets.on('connection', function(socket) {

    //parse handshake from socket to io
    var hs = socket.handshake;

    //show session information
    console.log('New socket connection with sessionID ' + hs.sessionID + ' connected');

});

//handle user disconnect and clear interval
io.sockets.on('disconnect', function() {

    //show disconnect from session
    console.log('Socket connection with sessionID ' + hs.sessionID + ' disconnected');

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:44:23.917

所以看起来唯一的解决方案是在 url 查询字符串中添加您的身份验证数据。有一个允许其他可能性的[开放票](https://github.com/LearnBoost/socket.io-client/issues/344)，但看起来开发人员倾向于只使用查询字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:47:13.730

这对我有用：[https](https://gist.github.com/jfromaniello/4087861) ://gist.github.com/jfromaniello/4087861 。我不得不更改 socket.io-client package.json 以使用允许设置 cookie 标头的 xmlhttprequest 版本 1.5.0。我还必须更改使用 socket.io xmlhttprequest 的两个要求：

```
require('socket.io-client/node_modules/xmlhttprequest') 
```

代替

```
require ('xmlhttprequest'); 
```

# objective-c - iOS 应用防火墙内容过滤

> ID：13381542
> 
> 赞同：2
> 
> 时间：2012-11-14T15:13:02.260
> 
> 标签：objective-c, ios, filter, html5-video, firewall

我们有一个本地 iOS 应用程序，全国各地的学校都在使用。我们遇到了一些用户无法访问远程视频内容的情况。我真的没有任何关于似乎阻止我们视频内容的学校网络的详细信息，所以我想我的问题本质上更笼统。

某些防火墙是否可以阻止从本机 iOS 应用程序中请求的远程 mov、m4v、mp4、mp3 内容？据我们所知，在应用程序中接收视频和音频内容有困难的学校可以在使用 Safari 浏览时访问相同的内容。这让我相信，防火墙可能设置了针对本机应用程序与 Safari 的不同规则集。

我可能可以提供更详细的信息，但我只是不确定为了解决这个问题我需要知道什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:17:54.363

是的，从带有 iOS 应用程序的服务器检索的内容的访问方式与浏览器相同。通过 HTTP 协议。如果需要，您可以在无法检索视频时将视频嵌入应用程序作为后备。

# javascript - Android 上嵌入的固定位置 Youtube 的渲染问题

> ID：13381543
> 
> 赞同：0
> 
> 时间：2012-11-14T15:13:02.390
> 
> 标签：javascript, android, responsive-design, css-position

**我在使用 Android 浏览器时遇到了最奇怪的渲染问题之一**（**到目前为止 Galaxy Tab 10.1 和 S3** .. 尚未在 iPhone 或其他移动浏览器上测试过）。

**我正在网页上动态嵌入一个固定位置的响应式 Youtube 视频**。您单击 Javascript 中的一个按钮 - 它会创建一个黑色背景（也是固定位置）和一个嵌入了 id 的 Youtube，因此我可以控制不同屏幕尺寸的属性。到现在为止还挺好。这顺利进行。我在 Chrome、Firefox 甚至 IE 中查看了它，我并不感到失望。然而。

我在我的 Android 手机（Galaxy S3-股票浏览器）上查看了它，**看起来视频很难理解它应该在哪里呈现**。我注意到至少有 3 次重新定位，然后它才固定在一个位置。有时我很幸运地看到部分元素出现在屏幕上。大多数其他时候，就没有那么幸运了。代码没有改变，浏览器大小肯定没有改变；只是渲染了。

更糟糕**的是，似乎元素实际上放置在正确的位置，但渲染不正确**。如果我点击中心（或足够靠近它），视频就会播放！渲染显示它在不断重新渲染时播放，仍然不确定它应该在哪里。

我知道这个问题听起来超级疯狂，甚至诊断（更不用说调试）可能是一个棘手的问题，所以我尽可能多地包含与整个操作相关的代码。非常感谢您的帮助！

**创建和嵌入视频**

```
donModal.addEventListener("click", function(e) {

        e.preventDefault();

        var donPreview = document.createElement("iframe");
        donPreview.src = "http://www.youtube.com/embed/oeZgLFsglcc";
        donPreview.frameborder = "0";
        donPreview.allowfullscreen = "allowfullscreen";
        donPreview.id = "donModalVideo";

        document.body.appendChild(donPreview);

        sfx.toggleBackdrop(donPreview);         
    });
} 
```

**视频风格**

```
#donModalVideo {
  position: fixed;
  width: 40%;
  height: 50%;
  top: 25%;
  left: 30%;
  z-index: 95;
} 
```

**测试网址**

*现在不能摆弄..希望这没关系...*

[http://openheavens.designbymobius.ca/artistes#donmoen](http://openheavens.designbymobius.ca/artistes#donmoen)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:12:57.427

**解决了！！！**

造成这个问题的因素有很多。

1.  没有为它**设置高度**（或者它的父元素）。
2.  **固定位置在移动设备上出现故障**

有了这些知识，我：

1.  将位置属性更改为静态。
2.  编写了一个小函数来将高度设置为宽度的固定比率（我使用 0.5625），每次调整窗口大小时都会触发。现在视频大小是灵活的，它完美地保持了它的比例。
3.  编写了第二个函数将顶部值设置为`(viewport height - video height) / 2`+ `window.pageYOffset`。每当您滚动页面时都会触发它。

最终结果是一个静态位置视频，它动态调整宽度，同时保持其比例以及模拟位置效果：固定。

最终结果可以在[这里](http://openheavenstoronto.com/artistes)看到。点击观看艺术家预览视频 :)

# php - 原则 2：了解实体如何与原则 2 一起工作

> ID：13381544
> 
> 赞同：2
> 
> 时间：2012-11-14T15:13:02.190
> 
> 标签：php, symfony, doctrine-orm

我有 3 个实体：Person、Affiliation 和 PersonAffiliation。

在我的表格中，我会将每个从属关系显示为选中的复选框。

现在，当用户取消选中复选框并单击提交时，应该从 PersonAffiliation 表中删除此从属关系。

问题是，当我在没有取消选中的情况下提交时，我的数据是重复的。示例：aff1 和 aff2。当检查并提交时，我会得到 aff1 aff1 aff2 aff2。同样，如果我取消选中 aff2，我将拥有 aff1 aff1。

错误可能在使用该学说的某个地方：

以下是我的管理方式：

*   实体 Persom

    ```
    @ORM\OneToMany(targetEntity="PersonAffiliation", mappedBy="person", cascade={"persist", "remove"})
    protected $affiliations; 
    ```

*   实体隶属关系：

    ```
    @ORM\OneToMany(targetEntity="PersonAffiliation", mappedBy="affiliation")
    protected $person_affiliations; 
    ```

*   实体 PersonAffiliation

    ```
    @ORM\ManyToOne(targetEntity="Person", inversedBy="affiliations")
    @ORM\JoinColumn(name="person_id", referencedColumnName="id")
    protected $person;

    @ORM\ManyToOne(targetEntity="Affiliation", inversedBy="person_affiliations")
    @ORM\JoinColumn(name="affiliation_id", referencedColumnName="id")
    protected $affiliation; 
    ```

关于如何解决这个问题的想法？

谢谢你。

编辑：

控制器部分：

```
foreach( $enquiry->getAffiliations() as $aff )
    {
    $pAff   = new PersonAffiliation();
    $pAff->setPersonId( $person->getId() );
    $pAff->setAffiliationId( $aff->getAffiliation()->getId() );
    $pAff->setPerson( $person );
    $pAff->setAffiliation( $aff->getAffiliation() );
    $em->persist($pAff);
    $em->flush();
} 
```

表格部分：

```
 public function buildForm(FormBuilder $builder, array $options)
{

    $person = $this->person;
    $user   = $this->user;

    $builder->add('firstname', 'text');
    $builder->add('middlename', 'text', array('required'=>false));
    $builder->add('lastname', 'text');
    $builder->add('sex', 'choice', array( 'choices'   => array('m' => 'Male', 'f' => 'Female'),
                                          'required'  => true, 
                                          'multiple'  => false,
                                          'expanded'  => true));
    $builder->add('email', 'text', array('required'=>false));

    if( $this->addAffiliations ) {
        $builder->add('affiliations', 'entity', array(
            'label' => 'Athor\'s affiliations',
            'class' => 'SciForumVersion2Bundle:PersonAffiliation',
            'query_builder' => function($em) use ($person, $user){
            return $em->createQueryBuilder('pa')
                ->where('pa.person_id = :pid')
                ->setParameter('pid', $person->getId());
        },
            'property'    => 'affiliation',
            'multiple' => true,
            'expanded' => true,
        ));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:38:12.500

在 Person 实体中：

```
/**
* @ORM\ManyToMany(targetEntity="Affiliation", inversedBy="people")
* @ORM\JoinTable(name="PersonAffiliation")
*/
protected $affiliations; 
```

在附属实体中：

```
/**
* @ORM\ManyToMany(targetEntity="Person", mappedBy="affiliations")
*/
protected $people; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:47:29.633

您`$em->flush()`在 foreach 的每次迭代中都做了一个。它应该在 foreach 结束后完成，不是吗？

另外，也可以使用`ManyToMany`关系。

# java - 枚举的通用类，值的数量

> ID：13381547
> 
> 赞同：2
> 
> 时间：2012-11-14T15:13:20.037
> 
> 标签：java, generics, enums

在此示例中，我如何找出我的枚举有多少个值：

```
public class Analyser<C extends Enum<C>>{
  private long[] dist;
  public Analyser() {
    super();
    dist = new long [C.getEnumConstants().length];
  }
} 
```

最后一行不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T15:18:59.960

您需要传入枚举的类文字：

```
public Analyser(Class<C> enumType) {
    super();
    dist = new long [enumType.getEnumConstants().length];
}

...

Analyser<MyEnum> analyser = new Analyser(MyEnum.class); 
```

这是因为[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)`C`在运行时没有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:24:15.427

我猜最后一行无法编译。您需要`Class`实例来执行此操作。这是您的代码的修改版本：

```
public class Analyser<C extends Enum<C>>{
  private long[] dist;
  public Analyser(Class<C> clazz) {
    super();
    dist = new long [clazz.getEnumConstants().length];
  }
} 
```

但是，我无法完全理解您为什么要从`Enum`. 如果您在开发时知道枚举类，您可以说`MyEnum.values().length`.

如果您想编写通用代码来检查任何枚举有多少值，您可以编写一个实用方法，例如：

```
 public static int enumSize(Class<C extends Enum<C>> clazz) {
    return clazz.getEnumConstants().length];
  } 
```

# php - 如何从字符串中删除重复序列 - php

> ID：13381552
> 
> 赞同：0
> 
> 时间：2012-11-14T15:13:37.953
> 
> 标签：php

我有一个由其他人编写的函数，它返回客户的地址。此功能并不像您想象的那么简单。有充分的理由编写它以便返回变量通过：

```
eval("\$address_out = \"$fmt\";"); 
```

第一的。尽管快速浏览了手册，但它的作用对我来说还是个谜。所以问题是像这两个例子一样返回地址（注意有 3 个重复`<br/>`s 和其他 4 个）

```
ginger rogers<br /> hollywood<br /> California<br /> <br /> <br /> United states

ginger rogers<br /> hollywood<br /> <br /> <br /> <br /> United states 
```

我认为将重复`<br/>`的 s 去掉会更快，但我很困惑，因为它们的数量可能不同，并且它们由空格分隔。

有人有什么想法吗？

编辑：我应该说，我想
在地址的每一位之间保留一个，这是有多重
我想摆脱除一个之外的所有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:16:26.087

`$addr = str_replace( array( '<br/>', '<br>', '<br />', "\r", "\n" ), '', $addr );`将删除`<br/>`中断，加上换行符和回车符。

保持一个`<br/>`静止：

```
while ( strpos( $addr, '<br /> <br />' ) !== false ) { 
    // while two adjoining <br />'s still exist in the variable
    // replace two with one <br /> break
    $addr = str_replace( '<br /> <br />', '<br />', $addr );
} 
```

# mysql - 限制结果集中的元素数量

> ID：13381556
> 
> 赞同：0
> 
> 时间：2012-11-14T15:14:00.763
> 
> 标签：mysql, sql

我试图通过对我的 sql 逻辑设置限制来限制结果集中的元素数量。我有两个单独的功能来实现我想要的。第一个有一个我手动设置的限制，例如 0、X。第二个函数有两个额外的参数，即 min 和 max，它们被设置为限制。但是当最小值和最大值为 7、14 时，它给了我比 7 更多的元素。结果集中没有重复，因为我在每个元素上都有唯一的 id 并且它们检查出来。传递给 sql 函数的整数也具有正确的间隔。

我究竟做错了什么？

```
"SELECT table1.*, table2.user_id FROM table1 LEFT JOIN table2 ON table1.col1 = table2.col2 
    WHERE table1.col1 = :param1 AND table1.col2 = 1 AND table1.col3 = 0 ORDER BY table1.col4 DESC LIMIT $min, $max"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:18:32.873

语法是[SELECT](http://dev.mysql.com/doc/refman/5.5/en/select.html)**语法**不是

 **```
limit min, max 
```

但

```
limit offset, row_count 
```

所以，`limit 7, 14`说在偏移量 7 处检索 14 行。**

# postmessage - postMessage() 的使用是否仅限于 HTML5 文档？

> ID：13381557
> 
> 赞同：1
> 
> 时间：2012-11-14T15:14:02.703
> 
> 标签：postmessage

我们正在开发一个 webapp，我们正在使用 xhtml 文档。我们遇到了同源策略问题，现在我们想知道 postMessage() 是否可以满足我们的需求？

无论如何，我们将无法切换到 HTML5！我们可以使用 postMessage() 吗？

# jruby - 如何在 jruby 中启用 irb tab 补全

> ID：13381560
> 
> 赞同：2
> 
> 时间：2012-11-14T15:14:14.450
> 
> 标签：jruby, irb

我已经尝试了我能想到的一切来解决这个问题，但我无法在 Windows 上的 jRuby 的 irb 中完成选项卡完成工作。如果我 ssh 到 linux 机器，irb 会按预期工作，但在 Windows 中我只是得到标签。

我尝试将以下内容添加到我的 .irbrc 中（取自关于 SO 的旧问题）：

```
#require 'irb/completion'
#ARGV.concat [ "--readline", "--prompt-mode", "simple" ]

#IRB.conf[:AUTO_INDENT] = true
#IRB.conf[:USE_READLINE] = true
#IRB.conf[:LOAD_MODULES] = []  unless IRB.conf.key?(:LOAD_MODULES)
#unless IRB.conf[:LOAD_MODULES].include?('irb/completion')
#  IRB.conf[:LOAD_MODULES] << 'irb/completion'
#end

#require 'irbtools'

#require 'bond' 
```

这些东西都不起作用。我已经确认 .irbrc 正在工作。我已经尝试过常规控制台和 powershell。我现在将此归咎于 Windows，但老实说，我不知道到底发生了什么或如何解决它。

我正在使用 jRuby 1.7 和 Win7 x64，如果其中任何一个有所不同的话。

## 额外的

花了更多时间玩它。我现在尝试了 ansicon、pry 和 ConEmu，但没有成功。我开始认为问题可能出在 jRuby 1.7 上——接下来要尝试的是看看我在 1.6.8 上是否有同样的问题——但这已经超出了我现在所能解决的范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T03:42:30.357

这是 JRuby 1.7.0 的一个错误 - 在 JRuby 1.6.8 中，一旦我完成，选项卡完成就可以正常工作`require 'irb/completion'`

[在http://jira.codehaus.org/browse/JRUBY-6996](http://jira.codehaus.org/browse/JRUBY-6996)下记录了错误

# api - Google OAuth 2.0 API 有速率限制吗？

> ID：13381562
> 
> 赞同：7
> 
> 时间：2012-11-14T15:14:22.467
> 
> 标签：api, oauth-2.0

我正在考虑使用[https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)来获取用户的电子邮件地址，我已经在 Google 自己的文档和其他指南中看到了很多关于如何做到这一点的示例互联网。

但是，我无法找到有关速率限制是什么的任何信息，或者是否有任何速率限制。Google API 控制台列出了许多不同 API 的礼貌限制，但没有提及 OAuth 2.0 API。

有谁知道是否有任何限制，如果有，它们是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T00:56:55.387

我可以相当肯定地说**，Google 的任何授权 API 都没有限制**。

我知道这一点，因为它没有在授权 API 的服务条款中的任何地方说明任何限制。事实上，[服务条款本身](https://developers.google.com/accounts/terms)非常简单：

> Google 帐户身份验证 API 服务条款
> 
> 最后修改日期：2012 年 4 月 20 日 使用此 API，即表示您同意遵守这些条款以及[https://developers.google.com/terms](https://developers.google.com/terms)上的 Google API 服务条款（“API ToS”） 。弃用政策
> 
> 如果我们打算停止或对此 API 或服务进行向后不兼容的更改，Google 将宣布。在 2015 年 4 月 20 日之前，我们将尽商业上合理的努力继续运行 Google 帐户身份验证 API（OAuth 2.0 除外）而不进行这些更改，除非（按照 Google 的合理善意判断）：
> 
> 法律或第三方关系（包括适用法律或关系发生变化）的要求，或者这样做可能会造成安全风险或重大的经济或材料技术负担。此弃用政策不适用于标记为“实验性”的版本、特性和功能。
> 
> 2015 年 4 月 20 日之后，此弃用政策将不再适用。

如果有限制，谷歌通常必须将它们放在 ToS 中，所以我可以肯定地说没有限制。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-05-30T18:57:04.720

这是一个老问题，所以自最初的回复以来情况可能已经发生了变化，但谷歌现在有[“基于风险级别的配额限制”](https://support.google.com/cloud/answer/9028764?hl=en)（无论这意味着什么）：

> 为了保护用户和 Google 系统免受滥用，使用 OAuth 和 Google 身份的应用程序根据应用程序使用的 OAuth 范围的风险级别具有某些配额限制。这些限制包括：
> 
> *   一个新的用户授权速率限制，它限制您的应用程序获得新用户的速度。
> *   一个全新的用户上限。要了解更多信息，请参阅未[验证的应用](https://support.google.com/cloud/answer/7454865) 页面。
> 
> 当应用程序超过速率限制时，`Error 403: rate_limit_exceeded`向用户显示

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-25T18:19:39.007

我认为 google oauth api 端点是有限制的。我正在构建一个浏览器扩展并在测试时留下了一个递归循环。提出了太多要求并得到了这个-

```
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "dailyLimitExceededUnreg",
    "message": "Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup.",
    "extendedHelp": "https://code.google.com/apis/console"
   }
  ],
  "code": 403,
  "message": "Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup."
 }
} 
```

但这个限制似乎是在最终用户级别。当我查询其他用户的信息时，我收到的响应很好。

# c# - 如何为 Lua（forWindows）创建可加载的自定义 .NET dll？

> ID：13381565
> 
> 赞同：5
> 
> 时间：2012-11-14T15:14:25.303
> 
> 标签：c#, .net, lua, luainterface

我们正在 .NET 框架中做一个项目，并希望稍后将其大部分功能用于 Lua 脚本。我想我可以在 LuaInterface 的帮助下编译一个 dll 并将其加载到 Lua 脚本中。但不知何故，它不起作用。

DID 的工作如下：

```
require 'luanet' 
luanet.load_assembly("System.Windows.Forms")
Form = luanet.import_type("System.Windows.Forms.Form")
Button = luanet.import_type("System.Windows.Forms.Button")
form1 = Form()
button1 = Button() 
```

如您所见，这里我正在加载标准程序集和类型，这并没有造成太大问题。但是，如果我在 .NET 4.0 下编译了自己的 dll 'LuaTest' 并尝试在 LUA 中加载它。那没起效。我写了类似的东西，

```
require 'luanet'
luanet.load_assembly("LuaTest")
PlanetarySystem = luanet.import_type("LuaTest.PlanetarySystem")
solarSystem = PlanetarySystem() 
```

其中 'PlanetarySystem' 是 LuaTest 中的一个类。如果我运行这段代码，解释器会说：尝试调用全局“PlanetarySystem”（一个 nil 值）。

我还尝试了另一种加载 dll 的方法：

```
package.path = package.path .. ";" .. "/?.dll"
require 'luanet'
require 'LuaTest' 
```

运行后，解释器抛出： lua: error loading module 'LuaTest' from file '.\LuaTest.dll': The specified procedure could not be found。

我是 .NET 框架和 LuaInterface 的新手。也许我做错了什么。请帮助我。非常感谢！

编辑：也许我应该在我的 dll 中有一个 Lua 的“入口点”，以表明这个 dll 是 LUA 可加载的？？？

编辑：Lua 不是 LUA。对讲葡萄牙语的人没有冒犯。我使用的 Lunanet 必须与 .NET 4.0 兼容，否则第一段代码将无法运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-08T03:06:49.380

我相信您将程序集名称与您尝试导入的类型的完全限定名称的必需部分混淆了。该错误表明 PlanetarySystem 类是“零值”，这意味着它可能无法找到具有该完全限定名称的类。我会确定你的班级所在的命名空间。

其次，如果我的第一个建议不起作用，您可能需要使您的类 ComVisible 以便 Lua 引擎可以看到您的类。

[http://msdn.microsoft.com/en-us/library/ms182157.aspx](http://msdn.microsoft.com/en-us/library/ms182157.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T13:53:09.573

[试试这个链接。我发布了一个效果很好的解决方案！](https://stackoverflow.com/questions/13450086/mapping-c-sharp-classes-to-lua-functions-via-dll/29533013#29533013) 如果您的电脑准备充分（例如安装了 lua 和 C#2010），则将 C# 代码复制到 dll 项目并构建它。然后确保您的 dll 位于您的 lua 环境的注册目录中，并执行同一篇文章中显示的 lua 脚本。

给您的附加说明：我需要使用 .NET 3.5 框架。使用 .NET 4.0 LuaInterface 对我不起作用。

# android - 在透明的 ActionBar 后面部分显示 ImageView

> ID：13381567
> 
> 赞同：36
> 
> 时间：2012-11-14T15:14:35.800
> 
> 标签：android, actionbarsherlock

Google Maps 应用程序有一个透明的ActionBar，通过它可以看到地图。

![在此处输入图像描述](../Images/0f29be78ba1136dd2ad80fa06a03f680.png)

我可以使用以下方法设置 ActionBar 的透明度：

```
<style name="Theme.MyTheme" parent="android:style/Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/ActionBar</item>
</style>

<style name="ActionBar" parent="@android:style/Widget.Holo.ActionBar">
    <item name="android:background">#64000000</item>
</style> 
```

但是如何在 ActionBar 后面显示我的 ImageView？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-14T15:25:09.940

您可以启用`ActionBar`. 为此，您必须将`(android:)windowActionBarOverlay`主题中的项目设置为`true`.

```
<style name="MyTheme" parent="Theme.Sherlock">
    ...
    <item name="windowActionBarOverlay">true</item> <!-- for ActionBarSherlock -->
    <item name="android:windowActionBarOverlay">true</item>
</style> 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-14T15:38:39.570

您也可以在运行时设置它：

```
requestWindowFeature(Window.FEATURE_ACTION_BAR_OVERLAY); 
```

这将使ActionBar 成为一个半透明的浮动条。

像 any 一样`requestWindowFeature...`，这应该在添加内容之前调用。

之后`setContentView`，您可以`Drawable`使用以下命令设置背景：

```
getActionBar().setBackgroundDrawable(getResources().getDrawable(R.drawable.actionbar_bg)); 
```

更改`getActionBar`为`getSupportActionBar`ActionBarSherlock

`actionbar_bg.xml`与*shape*的根元素：

```
<solid android:color="#64000000" /> 
```

尽管我发现*Tomik 的*解决方案很棒，但这对于一些活动的一次性案例而不是全面的风格很有用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-07-24T15:36:13.653

如果有人需要透明栏，但仅用于某些活动，而在其余活动中使用实心栏，则可能值得创建两种不同的样式并使用清单来控制它：

```
<style name="MyThemeOverlay" parent="Theme.Sherlock">
    ...
    <item name="windowActionBarOverlay">true</item> <!-- for ActionBarSherlock -->
    <item name="android:windowActionBarOverlay">true</item>
    <!-- any stuff common here, colours, etc -->

    <!-- define the style for native ActionBar for Android 4 and higher -->
    <item name="android:actionBarStyle">@style/myActionbarTransparent</item>
    <!-- define the style for ActionBarSherlock -->
    <item name="actionBarStyle">@style/myActionbarTransparent</item>
</style>

<style name="MyThemeNoOverlay" parent="MyTheme">
    <item name="windowActionBarOverlay">false</item> <!-- for ActionBarSherlock -->
    <item name="android:windowActionBarOverlay">false</item>
    <!-- any stuff specific for no overlay activity action bars -->

    <!-- define the style for native ActionBar for Android 4 and higher -->
    <item name="android:actionBarStyle">@style/myActionbar</item>
    <!-- define the style for ActionBarSherlock -->
    <item name="actionBarStyle">@style/myActionbar</item>
</style>

<style name="myActionbar" parent="@android:style/Widget.Holo.ActionBar">
    <item name="android:background">@color/white</item>
</style>
<style name="myActionbarTransparent" parent="@android:style/Widget.Holo.ActionBar">
    <item name="android:background">@color/transparent</item>
</style> 
```

然后在您的中，`AndroidManifest.xml`您可以通过执行以下操作将其中一个用作默认值，将另一个用于某些特定活动：

```
<application
    ...
    android:theme="@style/MyThemeOverlay">
    ...
    <activity
      android:name=".Activity1"       
      />
    <activity
      android:name=".Activity2"    
      android:theme="@style/MyThemeNoOverlay"   
      />
    <activity
      android:name=".Activity3"       
      />
    <activity
      android:name=".Activity4"       
      android:theme="@style/MyThemeNoOverlay"
      /> 
```

...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-14T22:47:08.160

[![在此处输入图像描述](../Images/8ac126e1a7f7511c2aa165ab7ba96ebc.png)](https://i.stack.imgur.com/LEN1w.jpg)

在样式.xml 中：

```
<style name="AppTheme.AppBarOverlay" parent="ThemeOverlay.AppCompat.Dark.ActionBar">
    <item name="colorPrimary">@color/semiTransparent5</item>
</style>

<style name="AppTheme.PopupOverlay" parent="ThemeOverlay.AppCompat.Light" >
    <item name="windowActionBarOverlay">true</item>
</style> 
```

在activity_main.xml 中：

```
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
android:layout_width="match_parent"
android:layout_height="match_parent">

<com.google.android.material.appbar.AppBarLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:theme="@style/AppTheme.AppBarOverlay">

    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="match_parent"
        android:layout_height="?attr/actionBarSize"
        app:layout_scrollFlags="scroll|enterAlways"
        app:popupTheme="@style/AppTheme.PopupOverlay" />

</com.google.android.material.appbar.AppBarLayout>

<include layout="@layout/content_main" /> 
```

# wpf - XAML ListView 项目已启用

> ID：13381572
> 
> 赞同：0
> 
> 时间：2012-11-14T15:14:48.910
> 
> 标签：wpf, xaml, listview, isenabled

我有以下 XAML：

```
 <Grid Grid.Row="3" Margin="8,8">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

    <!-- Setting 'UsingItems' here -->
                <CheckBox Grid.Row="0"
                    IsChecked="{Binding Path=UsingItems}" 
                    Content="{Binding Path=IncludeItemsText}" />

                <!-- This works as expected -->
                <CheckBox Grid.Row="1"
                    IsEnabled="{Binding Path=UsingItems}"/>

                <!-- This doesn't! Even though the ListView becomes enabled the Items aren't and the Checkboxes are not checkable! -->
                <ListView Grid.Row="2" IsEnabled="{Binding Path=UsingItems}"
                    VerticalAlignment="Stretch"
                    ItemsSource="{Binding Path=SortedItems}">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <CheckBox
                                    IsChecked="{Binding Path=.IsSelected}"
                                    Margin="0,2" Click="CheckBox_Click" />
                                <TextBlock
                                    Text="{Binding Path=.Item.ItemDescription}"
                                    Margin="4,0,0,0" 
                                    VerticalAlignment="Top">
                                </TextBlock>
                            </DockPanel>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Grid> 
```

如果属性“UsingItems”= false，我想禁用 ListView 中的所有项目。'UsingItems' 是使用第 0 行中的复选框设置的，我已经确认这是通过在第 1 行中有一个虚拟复选框来工作的 - 'IsEnabled' 属性按预期设置。

但是，当 'UsingItems' = true 时，ListView 项目保持禁用状态，即使 ListView 已启用（并且项目 'look' 已启用）。

我曾假设 IsEnabled 属性会向下过滤树 - 但这不会发生在这里。

我哪里错了？

谢谢

乔

# php - PHP Static v Singleton 类 - ConnectionFactory 解释

> ID：13381573
> 
> 赞同：3
> 
> 时间：2012-11-14T15:14:54.060
> 
> 标签：php, static, singleton

我是这个级别的 PHP 编程新手，我一直在阅读一篇关于单例和静态类的文章。我正在编写一个有助于我的数据库连接的类。

我遇到了 Jon Raphaelson 的以下代码（[这里](https://stackoverflow.com/questions/130878/global-or-singleton-for-database-connection)）：

```
class ConnectionFactory
{
    private static $factory;
    public static function getFactory()
    {
        if (!self::$factory)
            self::$factory = new ConnectionFactory(...);
        return self::$factory;
    }

    private $db;

    public function getConnection() {
        if (!$this->db)                 // this line was modified due to comment
            $this->db = new PDO(...);       // this line was modified due to comment
        return $db;
    }
}

function getSomething()
{
    $conn = ConnectionFactory::getFactory()->getConnection();
    .
    .
    .
} 
```

似乎我找到了我要找的东西，但是我有几个问题。

1.  `self::$factory = new ConnectionFactory(...);`- 我在这个类中没有看到构造函数。我是否只是创建此构造函数并传入数据库详细信息（'dbname'、'user'、'pass'等）？
2.  该`getSomething()`函数，我假设目的是将所有将检索数据的实际函数放入 ConnectionFactory 类中 - 这就是该函数位于此类中的原因。否则，我会期望这个函数在另一个类中。[编辑] 跳过这个问题，我没有看到一个括号。
3.  当两个用户登录站点并请求数据库连接（都在进行更新等）时会发生什么？这是一个单身人士会有问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:05:47.177

*这主要是为了扩展我在问题下的评论......*

更好的“单例”模式是这样的：

```
class ConnectionFactory {

    protected static $connection;

    public function getConnection() {
        if (!self::$connection) {
            self::$connection = new PDO(...);
        }
        return self::$connection;
    }

} 
```

这个工厂的用户应该期待它的一个*实例*，而不是自己调用它：

```
class Foo {

    protected $connectionFactory;

    public function __construct(ConnectionFactory $factory) {
        $this->connectionFactory = $factory;
    }

    public function somethingThatNeedsAConnection() {
        $connection = $this->connectionFactory->getConnection();
        ...
    }

}

$foo = new Foo(new ConnectionFactory); 
```

这允许`Foo`在需要时自行获取连接，但也允许您将一些替代连接注入到`Foo`中，例如用于测试目的。

作为一种便利措施并减少实例化复杂性，这种模式也很好：

```
class Foo {

    protected $connectionFactory;

    public function __construct(ConnectionFactory $factory = null) {
        if (!$factory) {
            $factory = new ConnectionFactory;
        }
        $this->connectionFactory = $factory;
    }

    ...

} 
```

这仍然允许注入和覆盖依赖项，但它不需要您每次实例化时都注入工厂`Foo`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:27:28.313

1.  一个类不需要显式构造函数就可以用`new ClassName()`. 但是，如果该类应该是一个单例（在这种情况下看起来像），那么该模式的全部意义在于使此类实例化无法从类外部进行，这就是为什么我认为应该使用声明的构造函数`private`关键词。

2.  get`getSomething()`是一个“独立”函数，带有使用您的类的示例。

3.  不可以。多个用户使用多个 PHP 实例来处理您的脚本，并且他们之间没有共享任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:20:21.550

工厂是单身，因为您不想要多个工厂。

1.  您不需要构造函数，您可以通过 getFactory() 方法设置工厂所需的任何状态。getFactory() 函数没有得到连接，所以不要在这里做任何与连接相关的设置，而不是连接对象本身。工厂“构建实例”供您使用，因此您可以使用 getConnection() 方法设置状态并构造工厂应该生成的连接对象。
2.  getSomething() 不是 ConnectionFactory 类中的方法，它只是使用工厂类获取工厂，然后获取连接的示例。

我个人讨厌 PHP 中的方法链。getSomething() 中真正发生的事情是：

```
function getSomething()
{
   $factory = ConnectionFactory::getFactory();
   $conn = $factory->getConnection();
   .
   .
   . 
} 
```

# python - OpenCV 2.4.3 和 Python

> ID：13381574
> 
> 赞同：13
> 
> 时间：2012-11-14T15:14:56.163
> 
> 标签：python, opencv

几天前，我开始寻找一种制作简单计算机视觉系统的好方法。OpenCV 库是我需要的东西，但事实证明它很难用 Python 学习，尤其是在 OpenCV 2.4.3 更新后，它有非常薄的 Python 相关文档。所以我现在明白 OpenCV 有很多变化，例如

```
import cv 
```

就是现在

```
import cv2 
```

还有很多模块丢失了。我的意思是，是的，有一些新的 python-opencv 语法的例子，但它非常狭窄并且被证明很难理解。例如：Python 代码官方文档中的示例

```
cv2.cvtColor(src, code[, dst[, dstCn]]) 
```

我知道这段代码的含义以及如何使用它，至少我想我知道。但是编写源代码和颜色代码并没有给我任何帮助：

```
 Traceback (most recent call last):
  File "C:\FILEFOLDER\tut.py", line 11, in <module>
    cv.cvtColor('proba.jpg', 'CV_RGB2GRAY')
TypeError: an integer is required 
```

或者，如果我尝试编写变量之类的代码：

```
Traceback (most recent call last):
  File "C:\FILEFOLDER\tut.py", line 11, in <module>
    cv.cvtColor('proba.jpg', CV_RGB2GRAY)
NameError: name 'CV_RGB2GRAY' is not defined 
```

那么，是否有任何与 Python 相关的最新 OpenCV 参考文档/教程/书籍/指南，以及不会将像我这样的新手与不需要的 C++ 或 Java 代码示例混淆的基本解释？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T19:14:05.793

我认为你正在采取相反的方式。

实际上，有了新模块，OpenCV 与旧界面`cv2`相比变得更加简单。`cv`由于 Numpy 的支持，不仅简单，而且非常快速且高效。唯一的问题是，我们应该知道如何正确使用它。

在这里，您应该使用如下功能：

```
img = cv2.imread('pic.jpg')
gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY) 
```

我希望您访问一个 SOF，它显示了两个模块之间的一些比较：[所有这些 OpenCV Python 接口之间有什么不同？](https://stackoverflow.com/questions/10417108/what-is-different-between-all-these-opencv-python-interfaces/10425504)

另一个 SOF 在这里，这是一个关于如何使用 Numpy 支持加速代码的简单演示：[OpenCV-Python 接口的性能比较，cv 和 cv2](https://stackoverflow.com/questions/9357696/a-query-on-performance-comparison-of-opencv-python-interfaces-cv-and-cv2)

尽管 C++ 是官方语言，但您无需学习 C++ 或 C 即可使用 OpenCV。尽管如此，Python-OpenCV 还是有很好的支持。一旦掌握了如何使用 OpenCV，您将能够自己将 C++ 代码转换为 Python。然后你也可以从 C++ 教程中学习 OpenCV。例如，我从完全使用 C++ 的 Gary Bradsky 的“Learning OpenCV”开始学习 OpenCV。那个时候只有`cv`界面。

正如您在评论中提到的，opencvpython.blogspot.com 有一些介绍性教程。我开始关注 OpenCV 中的新手。

此外，请查看此 SOF 以获取更多教程：[OpenCV 和 Python 书籍？](https://stackoverflow.com/questions/10677317/books-for-opencv-and-python/10677748)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T02:05:56.813

从另一个角度来看，并允许您使用新的 OpenCV 安装版本运行旧代码......

首先，从 cv 到 cv2 的转变与使用不同数据结构的库有关。判断函数是否在 cv2 和 cv 之间发生变化的最简单方法是 cv 函数以大写字母开头。重新设计的 cv2 函数的首字母似乎总是小写。因此，如果您使用的是旧书或旧示例，您仍然可以使用旧版 cv。cv 现在简单地嵌入在 cv2 中。只需在脚本顶部使用以下内容

```
 import cv2
    import cv2.cv as cv #required for old code not to be changed 
```

这使您可以简单地运行旧代码而无需更改它。我将在这里演示您的函数调用。你有过...

```
 cv.cvtColor('proba.jpg', 'CV_RGB2GRAY') 
```

我注意到的第一件事是您的函数可能被错误地调用。（给定函数的第一个字母是小写的，它应该以 cv2 而不是 cv 开头）。其次是您传递函数的“代码”。“代码”是 cv2 和 cv 的成员（在这里编码新手，如果我的一些词汇不准确，请原谅我），但并不总是相同。你有'CV_RGB2GRAY'。首先，没有引号。这是一个 cv“代码”而不是 cv2。你也错过了“简历”。在前。在这里演示一下我认为应该如何为旧 cv 版本调用您的函数：

```
 cv.CvtColor('proba.jpg', cv.CV_RGB2GRAY) #Assuming you used listed imports
    cv2.cv.CvtColor('proba.jpg', cv2.cv.CV_RGB2GRAY) #Assuming you skipped second import 
```

现在 cv2...

```
 cv2.cvtColor('proba.jpg', cv2.COLOR_RGB2GRAY) 
```

你去吧，我希望这会有所帮助。请记住，给定 python 运行脚本，您可以将任何不确定的内容直接输入命令行。这对帮助我建立理解确实很神奇（我 5 天前第一次使用 python）。例如，如果您想知道为什么在您的函数中需要一个整数，那么当您键入

```
 cv.CV_RGB2GRAY 
```

直接进入python命令行，它会向你吐出'7'（方便的是它是一个int）。cv2 版本吐出“7L”。请记住以某种形式不时使用 WaitKey() 函数，否则在某些情况下，highgui 可能没有所需的时间来处理某些命令。好吧，这就结束了。抱歉，如果我涵盖了一些已经涵盖或引用的内容。如果我确实可以随意删除它，管理员。

# asp.net-mvc - MVC3 中的下拉列表错误

> ID：13381581
> 
> 赞同：0
> 
> 时间：2012-11-14T15:15:16.907
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

将类添加到 html.dropdownlist 后，我​​面临以下错误。

**错误：** “System.Web.Mvc.HtmlHelper”不包含“DropDownList”的定义和最佳扩展方法重载“System.Web.Mvc.Html.SelectExtensions.DropDownList(System.Web.Mvc.HtmlHelper, string, string )' 有一些无效的参数

```
<li>
                    @Html.LabelFor(m => m.BuildType)
                    @Html.DropDownList("BuildType", new { @class = "BuildType" })
                    @Html.ValidationMessageFor(m => m.BuildType)
                </li>
                <li>@Html.LabelFor(m => m.BuildMode)
                    @Html.DropDownList("BuildMode", new { @class = "BuildMode" })
                    @Html.ValidationMessageFor(m => m.BuildMode) </li>
                <li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:21:35.853

您的列表选项在哪里？您需要通过`IEnumerable<SelectListItem>`对象提供选项列表（请参阅[此重载](http://msdn.microsoft.com/en-us/library/dd470329%28v=vs.108%29.aspx)）。

所以你的模型会有这样的东西：

```
public IEnumerable<SelectListItem> BuildModeOptions { get; set; } 
```

您的视图会将列表传递给助手：

```
@Html.DropDownList("BuildMode", Model.BuildModeOptions, new { @class = "BuildType" }) 
```

或者，由于您在`For`其他助手上使用类型安全版本，因此也可以`DropDownListFor`在此版本上使用：

```
@Html.DropDownListFor(m => m.BuildMode, Model.BuildModeOptions, new { @class = "BuildType" }) 
```

但请记住，Model.BuildMode 是您选择的值——Model.BuildModeOptions 用于您的下拉选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:24:38.460

第二个参数应该是您要在下拉列表中显示的项目列表。

所以它看起来像：

```
 @Html.DropDownListFor("BuildType", m.yourListofItems, new { @class = "BuildType" }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:32:15.803

You can use:

```
@Html.DropDownListFor(m => m.BuildType, (SelectList)Viewbag.YourSelectList, "Select Build type", new { @class = "BuildType" }) 
```

or

```
@Html.DropDownListFor(m => m.BuildType, Model.YourSelectList, "Select Build type", new { @class = "BuildType" }) 
```

When you use `@Html.DropDownList`, you specify a name for the dropdownlist... but you are missing the SelectList itself. I think that out of the box, the helper will try to use the name of the DropDownList (in your case "BuildType") to search in the ViewData collection for the SelectList.

When you use a `@Html.DropDownListFor` you don't use a name, but a lamda expression `m => m.BuildType` that will help you in same cases to not have harcoded names.

Your `SelectList` (the second parameter) can be grabbed from `Viewbag` or from a property in your `Model`.

# git - 如何使用git获取修改代码的显示代码

> ID：13381582
> 
> 赞同：1
> 
> 时间：2012-11-14T15:15:17.597
> 
> 标签：git

我有在本地提交的项目，现在我想用修改后的代码查看项目中所做的更改，我希望输出如下：

```
 commit 54576760f3437ta3s457999d3ef606
  Author: Rajesh
  Date:   Tue Nov 13 1:40:55 2012 +0100

   class myFile {
      ....
      //modified code should getdisplayed
   } 
```

我可以使用什么命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:17:32.433

看到[这个](https://stackoverflow.com/questions/436362/shorthand-for-diff-of-git-commit-with-its-parent)。

```
git show 54576760f3437ta3s457999d3ef606 
```

# php - 从函数中提取此 xml 文件并使用 php 保存在本地磁盘上

> ID：13381583
> 
> 赞同：0
> 
> 时间：2012-11-14T15:15:18.410
> 
> 标签：php, xml

我有以下代码，我想将该 xml 文件保存在磁盘上，我该怎么做？

```
<?php

// CAPTURE THE BUFFERED OUTPUT AND WRITE A FILE
$rss = ob_get_clean();
file_put_contents('my_rss.xml', $rss);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T17:00:16.447

据我了解，Kaveh 要求将文件保存到本地磁盘、用户计算机，但是

> file_put_contents

PHP 语句将文件保存到使用脚本的 Web 服务器上的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:15:42.610

file_put_contents() 直接写入文件。这意味着当您使用此功能时，您的文件将被“保存”。此外，如果文件名不存在，则创建它。话虽如此，函数的第一个参数应该是文件的路径。现在，它只是将 my_rss.xml 保存在与您的 php 文件相同的目录中。

如果文件没有被创建，您可能有权限问题或其他问题。确保您打开了 php 错误以查看它。

# inno-setup - 我如何知道 InnoSetup 脚本中是否需要重新启动？

> ID：13381595
> 
> 赞同：4
> 
> 时间：2012-11-14T15:16:19.110
> 
> 标签：inno-setup, restart

**TL;DR 版本：**

在 InnoSetup 脚本中，如何检测是否因为正在使用的文件而需要重新启动？

**更详细的版本：**

我有一个具有以下特征的 Inno Setup 脚本：

*   该`ShouldSkipPage`功能的实现是为了跳过所有页面（欢迎页面除外），除非选中欢迎页面上的自定义“高级选项”复选框：

    ```
    function ShouldSkipPage(PageID: Integer): Boolean;
    begin
        if ((PageID = wpSelectDir) or
            (PageID = wpSelectProgramGroup) or
            (PageID = wpSelectTasks) or
            (PageID = wpFinished) or
            (PageID = wpReady)) then
        begin
            Result := not advancedCheckBox.Checked;
        end;
    end; 
    ```

*   `CloseApplications`and`RestartApplications`设置为`false`(*)，并且某些文件具有`restartreplace`and`uninsrestartdelete`标志，因此如果文件正在使用中，则需要重新启动才能完成安装

现在，如果需要重新启动，无论“高级选项”复选框的状态如何，我都想显示“已完成”页面，因为我不想在不提示用户的情况下导致重新启动。所以我的代码会是这样的：

```
 function ShouldSkipPage(PageID: Integer): Boolean;
    begin
        if ((PageID = wpSelectDir) or
            (PageID = wpSelectProgramGroup) or
            (PageID = wpSelectTasks) or
            (PageID = wpReady)) then
        begin
            Result := not advancedCheckBox.Checked;
        end
        else if ((PageID = wpFinished)) then
        begin
            Result := (not advancedCheckBox.Checked) and (not IsRestartNeeded);
        end
    end; 
```

不幸的是，没有`IsRestartNeeded`函数（`NeedRestart`存在，但它是一个事件函数）。我花了很长时间查看文档，但没有找到任何可以为我提供此信息的函数。

我能想到的唯一选择是`HKLM\System\CurrentControlSet\Control\Session Manager\PendingFileRenameOperations`查看它是否包含我的任何文件，但这是一个相当丑陋的解决方案......

* * *

(*) 我要替换或删除的文件是 shell 扩展和此扩展使用的一些 DLL。我不依赖重新启动管理器的原因是它似乎无法使用`explorer.exe`：该过程立即重新启动，并且我的文件再次被锁定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T06:24:30.043

通常的建议是[`MakePendingFileRenameOperationsChecksum`](http://www.jrsoftware.org/ishelp/index.php?topic=isxfunc_makependingfilerenameoperationschecksum)在安装过程开始时调用，然后在您想检查是否需要重新启动时再次调用。只要它一直返回相同的值，就不需要重新启动。

请注意，这不会考虑“强制重启”，例如。来自您实现`NeedRestart`并返回 true 或来自标有`restart`标志的组件；你应该能够自己解决这个问题，因为你可以控制它。

# javascript - 为什么我的 javascript 正则表达式测试功能不起作用？

> ID：13381596
> 
> 赞同：3
> 
> 时间：2012-11-14T15:16:20.430
> 
> 标签：javascript, regex

我有一个 Javascript 函数，它测试一个正则表达式，我打算验证正小数，精度为 2：

```
function isPositiveDecimalPrecisionTwo(str) {
    return /^\d*(\.\d{1,2}$)?/.test(str);
} 
```

当我从代码中调用它时，我没有得到我期望的结果。

例如：

```
var a = isPositiveDecimalPrecisionTwo("1");         //   expect t, returns t
var b = isPositiveDecimalPrecisionTwo("1.2");       //   expect t, returns t
var c = isPositiveDecimalPrecisionTwo("1.25");      //   expect t, returns t
var d = isPositiveDecimalPrecisionTwo("1.257");     // * expect f, returns t *
var e = isPositiveDecimalPrecisionTwo("1.2575");    // * expect f, returns t *
var f = isPositiveDecimalPrecisionTwo(".25");       // * expect t, returns f *
var g = isPositiveDecimalPrecisionTwo("d");         //   expect f, returns f
var h = isPositiveDecimalPrecisionTwo("d1");        //   expect f, returns f
var i = isPositiveDecimalPrecisionTwo("1d");        // * expect f, returns t *
var j = isPositiveDecimalPrecisionTwo("1d1");       // * expect f, returns t *
var k = isPositiveDecimalPrecisionTwo("-1");        //   expect f, returns f
var l = isPositiveDecimalPrecisionTwo("-1.5");      //   expect f, returns f 
```

存在三个问题：

1.  验证“1.257”或“1.2575”返回true，但我会返回false，因为`\d{1,2}`
2.  验证“.25”返回false，我认为它会返回true，因为`^\d*`
3.  验证“1d”或“1d1”返回真。`\.`当它看起来像是一个正确转义的“。”时，它看起来就像任何字符一样阅读。（点）。

但是，当我使用像 regexpal.com 这样的工具时，相同的正则表达式似乎正在验证我期望的方式：

> [http://regexpal.com/?flags=g®ex=%5E%5Cd%2B(%5C.%5Cd%7B1%2C2%7D%24)%3F&input=](http://regexpal.com/?flags=g&regex=%5E%5Cd%2B(%5C.%5Cd%7B1%2C2%7D%24)%3F&input=)

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T15:21:22.680

问题是你`$`在括号内。你希望它在小组*之后*。

```
/^\d*(\.\d{1,2})?$/ 
```

这应该按您期望的方式工作。

在`$`内部，它匹配以数字开头的所有内容，因为字符串 ( `$`) 的结尾是“可选的”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:16:03.983

您也可以不分组小数部分，只需`?`在转义小数点后添加 a

```
^\d*\.?\d{1,2}$ 
```

# asp.net - 面向 Framework 3.5 的 ASP.NET 网站编译为 Framework 4.0 临时 ASP.NET 文件

> ID：13381599
> 
> 赞同：2
> 
> 时间：2012-11-14T15:16:35.823
> 
> 标签：asp.net, .net-4.0, .net-3.5

当我从本地计算机上的 Visual Studio 构建并运行针对 .NET Framework 3.5 的网站时，构建文件将进入 4.0 Framework 文件夹下的 Temporary ASP.NET 文件，然后网站未加载全部。我不记得在安装 4.0 Framework 之前遇到过这个问题，但我已经有一段时间没有访问现有的应用程序了。希望有一个完全合乎逻辑的解释和解决方案。这是我的设置。

1.  Windows 7 上的 IIS，具有所有 .NET 框架（最高 .NET 4.0）
2.  网站项目和类库都针对 3.5
3.  主机文件配置，debug.website.com 指向 127.0.0.1
4.  带有 2.0 应用程序池的 IIS 网站 debug.website.com 指向代码文件夹。
5.  指向自定义 debug.website.com 起始页的网站起始属性/
6.  网站使用带有 cookie 的 IIS 重写模块和表单身份验证。

有趣的注意点：如果我直接进入 Internet Explorer 并输入 debug.website.com，首先删除所有临时 ASP.NET 文件并完全清除浏览历史，网站编译，文件进入 2.0 Framework 临时 ASP.NET文件夹，它的工作原理。如果我然后关闭 IE，取消选中“退出时删除浏览历史记录”，然后返回 IE，则网站不会加载。

任何正确方向的帮助或指示将不胜感激。

* * *

**更新**

这就变得陌生了。我使用 aspnet_regiis -u 注销了 Framework 4.0，从 2.0 文件夹中删除了所有临时 ASP.NET 文件，从 IE 和 Chrome 浏览器中清除了整个浏览历史记录，然后执行以下操作。

1.  直接进入 Chrome 中的 URL - 站点编译为 2.0 文件夹并且可以工作。
2.  试图在 IE 中打开 URL - 站点刚刚挂起。
3.  试图从 Visual Studio 直接启动到 URL- 站点刚刚挂起。

我真的希望对这里可能发生的事情有一些简单的解释。

# winforms - WinForm 按钮单击方法正在更新。带有按钮 onclick_1

> ID：13381600
> 
> 赞同：0
> 
> 时间：2012-11-14T15:16:46.103
> 
> 标签：winforms, buttonclick

我刚刚完成了我的 winforms 应用程序。突然当我改变gridview的背景颜色时。当我启动我的应用程序进行最终测试时，按钮不起作用。我检查了他们的点击代码，它是正确的。然后我双击它创建新按钮 onClick_1 方法的按钮。所以现在所有的按钮都在做:(我不知道该怎么做。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:42:08.000

看起来您的事件不再与您的代码耦合。

对每个按钮执行此操作：

*   打开你的设计师
*   点击你的按钮
*   打开您的属性选项卡
*   在此菜单中，单击事件按钮
*   你会找到你的“点击”事件。

单击箭头并选择正确的事件。

# terminal - 我可以在服务器的共享驱动器上显示本地机器时区吗？

> ID：13381604
> 
> 赞同：0
> 
> 时间：2012-11-14T15:17:03.470
> 
> 标签：terminal, timezone, timestamp, citrix

我有一个网络设置，其中我有一个带有共享驱动器的应用程序服务器，用户通过终端服务器访问共享驱动器。我在一家全球性公司工作，因此在文件时间戳方面时区会有所不同。有什么办法可以在共享驱动器上修改文件时显示用户本地机器时间戳？

我们使用的是 windows server 2008 R2 64 位，终端服务器使用的是 citrix xenapp 6.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:49:10.797

XenApp 和 RDS 支持时区重定向，您需要为此设置策略。也就是说，我正在研究不遵守这些政策的 JAVA 应用程序的问题，所以你仍然可能不走运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:00:43.167

不，文件服务器不知道终端服务器客户端的时区。

# c - 计算C中注释行中的字符数

> ID：13381607
> 
> 赞同：3
> 
> 时间：2012-11-14T15:17:17.260
> 
> 标签：c, counting

我需要计算作为标准输入提供的 C 程序注释中的字符。这是我的功能，但由于某种原因，它算不上正确。你能帮我吗？

```
int characters(FILE *file)
{
     int i=0;
     char ch[500], *p;
     while (fgets(ch, sizeof(ch),file)!=NULL)
     {
        p=ch;
        while (*p)
        { 
           if (*p=='/')
           { 
              p++;
              if (*p=='*')
              {
                 p++;
                 while (*p!='*' && *(p++)!='/')
                 {
                    i++;
                    p++;
                 }
              }
           }
           else
              p++;

         }

   return i;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:21:33.853

我认为问题出在最里面的循环中：

```
while (*p!='*' && *(p++)!='/') 
```

应该

```
while (*p!='*' && *(p+1)!='/') 
```

但是如果它看到这样的东西就会中断：

```
/* comment * */ 
```

因为条件的第一部分`*p!='*'`在第一个星号处为假，所以你可以这样做：

```
while (!(*p=='*' && *(p+1)=='/')) {
   p++;
   i++;
} 
```

注意：如果线路断开，您将收到分段错误：

```
 /* comment * \n
    */ 
```

你仍然需要处理它，但你应该添加`*p`到内部循环：

```
while (*p && !(*p=='*' && *(p+1)=='/')) {
   p++;
   i++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:24:57.307

我怀疑这是你的问题：

```
while (*p!='*' && *(p++)!='/') 
```

请记住，`p++`计算为增量`p` *之前的值；*实际上，测试是

```
while (*p != '*' && *p != '/') 
```

因此，如果`*p`评估为`*`，则测试将失败。将其更改为

```
while (*p != '*' && *(++p) != '/') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:51:52.980

你的代码吓到我了。

有很多指针和嵌套循环。

那里的逻辑很容易出错，如果您需要进行更改，代码很难扩展。

我可以建议一个不同的解决方案吗？

[状态](https://en.wikipedia.org/wiki/Finite-state_machine)机！

我们将在文件中一次读取一个字符并跟踪机器所处的状态。然后我们将使用它来决定我们是否在评论中。

```
#include <cstdio>
#define S_CODE          1
#define S_ONESLASH      2
#define S_LINECOMMENT   3
#define S_BLOCKCOMMENT  4
#define S_BLOCKSTAR     5

int characters(FILE *file){
    int ccount=0;
    char ch;
    int state=S_CODE;
     while ((ch=fgetc(file))!=EOF){
        switch(state){
            case S_CODE:
                if (ch=='/')
                    state=S_ONESLASH;
                break;

            case S_ONESLASH:
                if (ch=='/')
                    state=S_LINECOMMENT;
                else if (ch=='*')
                    state=S_BLOCKCOMMENT;
                else
                    state=S_CODE;
                break;

            case S_LINECOMMENT:
                if (ch=='\n')
                    state=S_CODE;
                else
                    ccount++;
                break;

            case S_BLOCKCOMMENT:
                if (ch=='*')
                    state=S_BLOCKSTAR;
                ccount++;
                break;

            case S_BLOCKSTAR:
                if (ch=='/')
                    state=S_CODE;
                else if (ch=='*')
                    state=S_BLOCKSTAR;
                else
                    state=S_CODE;
                ccount++;
                break;
        }
    }
    return ccount;
}

int main(int argc, char **argv){
    FILE *fin=fopen(argv[1],"r");
    printf("%d\n",characters(fin));
} 
```

请注意我们如何使用字符`/`和标记机器不同状态之间的转换，以及在某些状态下我们如何增加注释字符计数器，但在其他状态下则不会`*`。`\n`我认为跟踪这里发生的事情要容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:33:06.753

如前所述，问题在这种情况下是一致的，仅当第一部分“触发”时才评估`while (*p!='*' && *(p++)!='/')` 语句 () 的第二部分，因此如果找到星号则递增。`*(p++)!='/'``p`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T15:42:03.917

似乎有效

```
int characters(FILE *file)
{
    int i = 0;
    char ch[500], *p;
    fread(ch, sizeof(char), 500, file);
    p = ch;
    while (*p)
    {
        if (*p=='/' && *(p+1) == '*')
        { 
            while (*p && (*p != '*' && *(p+1) != '/')) 
                ++p;
            ++i;
        }
        ++p;
    }
    return i;
} 
```

# php - php mssql多个连接，错误connect1记录更新连接2甚至connection2正确关闭

> ID：13381611
> 
> 赞同：2
> 
> 时间：2012-11-14T15:17:18.727
> 
> 标签：php

应用程序是 PHP + MSSQL。在多个连接中错误地更新。我有两个连接。

1.  打开连接1。
2.  做一些过程。
3.  开放连接2。（注意：要打开 connection2，我们需要 connection1 数据库。）
4.  在连接 2 中进行一些更新。
5.  关闭连接2。
6.  在connection1中更新和插入过程。但系统错误地更新到 connection2 数据库而不是 connection1。

应该如何处理多个连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:46:58.047

您可能没有在查询调用中指定连接处理程序。mssql（如 mysql）库默认使用最后打开的连接作为默认值。

所以，在伪代码中：

```
$con1 = mssql_connect("blah blah blah");
$result = mssql_query("SELECT blah blah blah");
$con2 = mssql_connect("blah blah blah"); <-- last opened, new default
$result2 = mssql_query("SELECT blah blah", $con1); 
                                           ^^^^^---force using original connection 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T16:34:59.797

我从[论坛帖子](http://forums.devshed.com/ms-sql-development-95/connect-databases-php-script-203074.html)中找到了我自己的解决方案。

评论如下。我对它的理解是：如果两个数据库具有相同的主机和用户名 mssql connect 只是使用这些参数返回上一个连接。愚蠢，但这就是正在发生的事情。

> 使用相同参数多次调用 mysql_connect 只会导致创建一个资源/连接。一旦创建了第一个，对 mysql_connect 的后续调用将返回相同的连接。
> 
> 调用 mysql_select_db 后，两个连接都将指向同一个数据库。在我的开发中，我通过在一个 mysql_connect 中使用 IP 作为服务器名，在第二个调用中使用 localhost 来解决这个问题。这创建了两个单独的连接，但限制了您可以在同一台服务器上使用的单独数据库的数量。
> 
> 在一个脚本中，解决此问题的另一种方法是将数据库名称包含在 select 语句中，或者在 select 之前使用 mysql_select_db 在数据库之间切换。
> 
> 我需要两个不同的连接，因为我不想在我的其他类中调用 mysql_select_db。

# google-app-engine - 使用 memcached 服务中的增量调用创建的 memcached 计数器的超时时间是多少？

> ID：13381612
> 
> 赞同：1
> 
> 时间：2012-11-14T15:17:28.623
> 
> 标签：google-app-engine, memcached

使用以下调用创建的值何时会超时？

后续调用增量是否会更新到期？

```
MemcacheService cacheService;
cacheService.increment(key, delta, initialValue); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:27:06.503

Memcache 是[文档](https://developers.google.com/appengine/docs/java/memcache/overview#How_Cached_Data_Expires)中指出的[LRU](http://en.wikipedia.org/wiki/Cache_algorithms#Least_Recently_Used)缓存。

如果您不设置 experiration，则行为如下：

> 默认情况下，存储在 memcache 中的值会尽可能长时间地保留。如果缓存内存不足，则在将新值添加到缓存时，可能会从缓存中逐出值。当值由于内存压力而被驱逐时，最近最少使用的值首先被驱逐。

如果您确实设置了过期时间：

> 该值将在此时间之前被驱逐，尽管它可能因其他原因被驱逐。

# logging - 在 ibm websphere 中禁用 Trace/Track 方法

> ID：13381613
> 
> 赞同：1
> 
> 时间：2012-11-14T15:17:30.843
> 
> 标签：logging, websphere

如何在 IBM WebSphere 中禁用 Trace/Track 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:19:14.300

只需将跟踪级别设置为`*=info`.

这是通过转到**日志记录和跟踪**> **server_name** >**诊断跟踪服务**>**更改日志详细信息级别**> 选择“配置”选项卡并将日志级别详细信息设置为`*=info`并应用来完成的。

如果您需要即时更改日志级别详细信息，您应该在相应的“运行时”选项卡字段中设置相同的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-03T16:49:12.723

在 WAS 控制台 >> 故障排除 >> 日志和跟踪 >> 您的服务器名 > 诊断跟踪服务 >> 附加属性 >> *=info

应用并保存。

重新启动服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-13T14:43:44.870

你的意思是HTTP方法吗？像 GET、POST 等？

如果是这样，您可以使用 IHS 禁用传入请求：

禁用 HTTP TRACE 方法 [http://publib.boulder.ibm.com/httpserv/ihsdiag/http_trace.html](http://publib.boulder.ibm.com/httpserv/ihsdiag/http_trace.html)

在 WebSphere 本身上，这是不可能的，因为 Servlet 规范要求任何符合 Java EE 的 Web 容器都接受 HTTP 协议

# solr - 使用 ReversedWildcardFilterFactory 和 KeywordTokenizerFactory 查询以结尾的单词

> ID：13381617
> 
> 赞同：1
> 
> 时间：2012-11-14T15:18:01.877
> 
> 标签：solr, wildcard

我在我的 Solr 架构（.xml）中声明了“text_general_rev”字段类型，如下所示：

```
<fieldType
    name="text_general_rev"
    class="solr.TextField"
    positionIncrementGap="100">
    <analyzer type="index">
       <tokenizer class="solr.KeywordTokenizerFactory" />
       <filter
            class="solr.ReversedWildcardFilterFactory"
            withOriginal="true"
            maxPosAsterisk="2"
            maxPosQuestion="2"
            maxFractionAsterisk="1.0" />
        <filter class="solr.LowerCaseFilterFactory" />                
    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.KeywordTokenizerFactory" />
        <filter class="solr.LowerCaseFilterFactory" />
    </analyzer>
</fieldType> 
```

我有 2 个 Solr 文档，其中“艺术家”字段设置为“text_general_rev”，如下所示：

*Document1 艺术家是“Jimmy Jones Tim Coco Mimi”*

*Document2 艺术家是“Jones Jimmy Tim Bobo Mimi”*

如果我进行“从某事开始”的搜索，它们会按照我的意愿工作：

`+artist:(J*)`返回文档 1 和 2

`+artist:(Jim*)`返回文件 1

`+artist:(Jimmy Jo*)`返回文件 1

另一方面，类似的查询，但类型为“以某些东西结尾”的工作方式不同：

`+artist:(*Mimi)`返回文档 1 和 2（没关系）

`+artist:(*Coco Mimi)`返回 0 个结果（这是不行的）

`+artist:("*Coco Mimi")`返回 0 个结果（这是不行的）

`+artist:(*co Mimi)`返回 0 个结果（这是不行的）

`+artist:("*co Mimi")`返回 0 个结果（这是不行的）

我的问题是为什么会这样？这是否正常，如果是，我错过了什么？我尝试了 maxFractionAsterisk 的多个值（如 0、0.5、1 等。这是我不完全理解的 ReversedWildcardFilterFactory 的唯一配置参数）。

# apache-camel - Camel、Bindy 和组合字段

> ID：13381620
> 
> 赞同：1
> 
> 时间：2012-11-14T15:18:06.463
> 
> 标签：apache-camel, unmarshalling

我正在尝试解组具有组成字段的 csv。例如，在以下示例中

> "order1","foo@email.com","(test1;45),(test2;89)"

第三个属性将表示两个项目的列表（但列表的大小是可变的），每个项目都有一个名称和一个价格。@Link 注释仅适用于一对一注释，因此它不是一个选项。csv 中的 @OneToMany 注释仅适用于书写，因此不是一个选项。

csv 是由非技术人员编写的，因此也不能选择复杂的格式。

是否可以管理此要求？

在这种情况下，要实例化的 java 类是这样的：

```
public class Order {
  private String name;
  private String email;
  private List<Item> items;
}

public class Item {
  private String name;
  private int price;
} 
```

提前谢谢了

# c# - 更改 VS2010 中突出显示的按钮颜色

> ID：13381624
> 
> 赞同：1
> 
> 时间：2012-11-14T15:18:13.717
> 
> 标签：c#, winforms, visual-studio-2010, user-interface

我正在使用 Visual Studio 2010 中的 C# 构建 GUI。我想更改一些按钮的颜色，我可以在按钮的属性中执行此操作，但彩色部分的边缘周围仍然有一个小边框的按钮。当按钮被单击或聚焦时，此边框将变为默认的蓝色。像这样：

![在此处输入图像描述](../Images/a8df4abcfa53508d4a88d55dbbbf0faf.png)

如何更改按钮的突出显示颜色？此外，有没有办法在保持默认（水平划分的两色调）外观的同时更改按钮的颜色？

谢谢你的帮助，

戴夫

# javascript - 如何对jsonparse的对象进行排序（反向）？

> ID：13381625
> 
> 赞同：5
> 
> 时间：2012-11-14T15:18:14.623
> 
> 标签：javascript, jquery, json

我有对象`{"5":"5","4":"4","3":"3","2":"2","1":"1","-1":"P1",-2":"P2"}` 并使用此函数来解析元素：

```
function floormake(inobj) {
    var levels = '';
    var obj = JSON.parse(inobj);
    levels += '<ul>';
    Object.keys(obj).sort(-1).forEach(function (key) {
        levels += '<li>' + obj[key] + '</li>';
    });
    levels += '</ul>';
    return levels;
} 
```

但结果总是按数字排序：-1、-2、1、2 等。但我需要**反向排序**：5、4、3、2、1、sort(-1) - 不起作用

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T15:20:49.363

考虑`.reverse()`改用。

```
Object.keys(obj).sort().reverse().forEach( .... 
```

[反向文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/reverse)

*编辑注意：正如@Shmiddty 所提到的，reverse() 方法实际上并没有排序。数组将需要排序然后反转。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T15:39:08.083

该`Array.sort`方法不接受整数作为唯一的可选参数。它接受对返回`-1`、`0`或的函数的引用`1`，详细信息可在此处找到：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)

以下是如何根据数字进行排序的示例：

[http://jsfiddle.net/3HFN5/1/](http://jsfiddle.net/3HFN5/1/)

```
var a = ["5", "9", "1", "399", "23", "21"];

function sorter(b, c) {
    return (+b < +c ? 1 : -1);
}

alert(a.sort(sorter)); 
```

或者更简单/更好的东西：

[http://jsfiddle.net/3HFN5/2/](http://jsfiddle.net/3HFN5/2/)

```
var a = ["5", "9", "1", "399", "23", "21"];

function sorter(b, c) {
    return c - b;
}

alert(a.sort(sorter)); 
```

并将其与您的实际示例结合起来：

[http://jsfiddle.net/3HFN5/3/](http://jsfiddle.net/3HFN5/3/)

```
var a = {"2":"2","4":"4","-2":"P2","3":"3","300":"4","1":"1","5":"5","-1":"P1"};

function sorter(b, c) {
    return c - b;
}

alert(Object.keys(a).sort(sorter)); 
```

我混合了对象中的项目并添加了一个以证明它的分类准确/完整。

# sql - SQL Downselect 基于字段重复的查询结果

> ID：13381632
> 
> 赞同：0
> 
> 时间：2012-11-14T15:18:37.553
> 
> 标签：sql, oracle, join, union

我正在寻找有关 SQL 查询的一点帮助。（我正在使用 Oracle。）

我有一个查询是 2 个不同的选择语句的联合。生成的数据如下所示：

```
Col1     Col2     Col3
XXX      ValA     Val1
XXX      ValB     Val2
YYY      ValA     Val1
YYY      ValA     Val2 
```

在此设置中，Col1 = XXX 是默认值，Col1 = YYY 是实际值。实际值 (YYY) 应优先于默认值。实际值通过第 2 列和第 3 列定义。

我希望将这些结果缩减为以下内容：

```
Col1     Col2     Col3
XXX      ValB     Val2
YYY      ValA     Val1
YYY      ValA     Val2 
```

请注意，第一行已被删除......这是因为有一个实际值（第 3 行中的 YYY）优先于默认值（XXX）。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:28:19.407

您想过滤掉 col2 和 col3 以 XXX 和另一个值出现的所有行。

您可以通过使用分析函数在子查询中进行适当的计数来实现此过滤器：

```
select col1, col2, col3
from (select t.*,
             count(*) over (partition by col2, col3) as numcombos,
             sum(case when col1 = 'XXX' then 1 else 0 end) over (partition by col2, col3) as numxs
      from t
     ) t
where numcombos = numxs or (col1 <> 'xxx') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:08:56.503

我的直觉是使用分析函数：

```
select distinct 
       first_value(col1) 
          over (partition by col2, col3 
                order by case col1 
                when 'XXX' then 1 
                else 0 end asc) as col1,
       col2, 
       col3 
from table1 
```

但是，如果表很大并且有索引，最好使用完全外连接来解决这个问题（这是可能的，因为只有两个可能的值）：

```
select coalesce(rl.col1, dflt.col1) as col1, 
       coalesce(rl.col2, dflt.col2) as col2,
       coalesce(rl.col3, dflt.col3) as col3
from (select * from table1 where col1 = 'XXX') dflt
full outer join (select * from table1 where col1 <> 'XXX') rl
on dflt.col2 = rl.col2 and dflt.col3 = rl.col3; 
```

[[SQLFiddle 中的解决方案]](http://sqlfiddle.com/#!4/2e502/7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:27:09.873

我认为您可以使用这样的技巧：

```
select
  case when
  max(case when col1<>'XXX' then col1 end) is null then 'XXX' else
  max(case when col1<>'XXX' then col1 end) end as col1, 
  col2,
  col3
from
  your_table
group by col2, col3 
```

我将默认值转换为 null，然后按 col3 分组。null 和 value 之间的最大值是您要查找的值。这适用于您的示例数据，但它可能不完全是您正在寻找的，这取决于您的真实数据如何。

# php - 带时间戳的php日期函数

> ID：13381635
> 
> 赞同：-1
> 
> 时间：2012-11-14T15:18:46.810
> 
> 标签：php, timestamp

我的时间戳有点问题。当我尝试获取当前日期时

```
$datestring = date("Y-m-d"); 
```

我得到正确的日期为 2012-11-14。

但是有了这个小脚本

```
$timestamp = mktime(0, 0, 0, date("Y"), date("m"), date("d"));
echo $timestamp . "<br />";
echo gmdate("Y-m-d", $timestamp); 
```

最后我得到 2182-08-10。有任何想法吗？

**后续问题**

和

```
$timestamp = mktime(0, 0, 0, date("m"), date("d"), date("Y"));
echo $timestamp . "<br />";
echo gmdate("Y-m-d", $timestamp); 
```

我现在得到 2012-11-13。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:20:10.653

函数签名是：

```
mktime ([ int $hour = date("H") [, int $minute = date("i") [, int $second = date("s") [, int $month = date("n") [, int $day = date("j") [, int $year = date("Y") [, int $is_dst = -1 ]]]]]]] ) 
```

顺序是时、分、秒、**月、日、年**，而不是年、月、日。

耶美国公约（？）。

# c++ - 内置功能查找距离

> ID：13381636
> 
> 赞同：8
> 
> 时间：2012-11-14T15:18:51.440
> 
> 标签：c++, c

c++ 或 c 库中是否有任何内置函数可用于查找二维空间中两点之间的距离

PS：我知道如何自己实现它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T15:24:23.443

好吧，您可以对[复数](http://en.cppreference.com/w/cpp/numeric/complex)使用算术：

```
using point_t = std::complex<int>;

double distance(point_t a, point_t b) {
    return std::abs(b - a);
} 
```

我意识到这并不能*完全*满足您不编写自己的函数的要求，而是在[`std::norm`函数](http://en.cppreference.com/w/cpp/numeric/complex/norm)中实现了实际的距离逻辑。它只返回距离的平方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-23T22:32:12.863

在 C++11 中，该[`hypot`](https://en.cppreference.com/w/cpp/numeric/math/hypot)函数已添加到标准库中。它计算`sqrt(x^2 + y^2)`，并提供一些防止溢出的保护。这是查找两点之间的欧几里得距离的便捷方法：

```
#include <cmath>
#include <iostream>

struct Point{double x; double y;};

int main()
{
  Point a{0.0, 0.0};
  Point b{3.0, 4.0};

  double distance = std::hypot(a.x-b.x, a.y-b.y);

  std::cout << distance << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:19:59.773

不，因为 2D 向量不是语言的类型部分。

根据您的需要，可以使用许多数学/游戏/模拟库来实现 2D 坐标对象，并为您提供查找这些点之间距离的函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T15:24:14.563

好吧，我认为这很容易找到：

3D 空间中两点之间的线性距离。

> d = sqrt( ( x2 - x1 )^2 + ( y2 - y1 )^2 + ( z2 - z1 )^2 )

曼哈顿距离不同，在 2D 游戏中非常常用：

> d = | ( x2 - x1 ) | + | ( y2 - y1 ) |

```
typedef struct {
    float x, y, z;
} point_t;

typedef struct {
    int x, y;
} point2d_t;

double distanceFinder( point_t a, point_t b )
{
    return sqrt( pow( a.x-b.x, 2.0 ) + pow( a.y-b.y, 2.0 ) + pow( a.z-b.z, 2.0 ) );
}

int manhattanFinder( point2d_t a, point2d_t b)
{
   /* Considering the points have integer coordinates and is a 2D game */
   return abs( a.x - b.x ) + abs( a.y - b.y );
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T15:27:21.107

没那么多。

2D 距离是一个数学函数，如果我们查看 C/C++ 中可用的数学函数，我们会发现它们对数字进行运算。

但这不是特定的：我们实际发现的是函数具有不同的名称（在 C 中）或被重载（在 C++ 中）以对不同类型的数字（int、float、double 等）进行操作。要么执行此操作，要么执行铸造。

幸运的是，数字类型有限，因此有通用库来做这种事情是有意义的。

现在，我们可以像构造数学函数一样构造二维距离函数吗？您会立即发现它更加困难，因为有很多方法可以表示点。例如，笛卡尔与径向、xy 与 ij、double 与 float 与 int。我们一般的 2D 距离需要涵盖所有这些可能性。

大多数具有 2D 距离函数的库都会附带点结构以减少可能性的数量。

但是，至少有一种数据结构可以存储一个点并用于使用标准库查找 2D 距离：复数！

```
// norm example
#include <iostream>
#include <complex>
using namespace std;

int main ()
{
  complex<double> mycomplex (3.0,4.0);

  cout << "The norm of " << mycomplex << " is " << norm(mycomplex) << endl;

  return 0;
} 
```

但这假设您正在谈论欧几里得距离。您还可以谈论曼哈顿距离或更奇特的指标。语言设计者没有尝试考虑我提到的所有可能性，而是选择不实现此功能。（或许多其他功能中的任何一个，例如人们可能合理地提出这个问题的）。

**编辑**：或者您可以减去点并使用`hypot`C99 标准中的函数。见[这里](http://www.kernel.org/doc/man-pages/online/pages/man3/hypot.3.html)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-14T15:31:28.483

[Boost.Geometry](http://www.boost.org/doc/libs/1_52_0/libs/geometry/doc/html/geometry/quickstart.html)声称具有笛卡尔和非笛卡尔距离的功能。

# jquery - 如何在点击下拉菜单时制作 CSS 下拉菜单

> ID：13381640
> 
> 赞同：3
> 
> 时间：2012-11-14T15:19:05.417
> 
> 标签：jquery, css, drop-down-menu

如何使以下css下拉菜单只接受点击下拉菜单？例如，现在当鼠标悬停“请选择”时。第二层出现。我想更改为单击“请选择”时，出现第二层。点击事件也应该适用于第二层菜单。

这是一个[小提琴](http://jsfiddle.net/donli/panzd/#base)

我正在使用 jquery，但不知道该怎么做。

html代码

```
 <ul class="dropdown">
        <li><a href="#">Please select</a>
            <ul class="sub_menu">
                 <li>
                     <a href="#">Artificial Turf</a>
                     <ul>
                        <li><a href="#">Indoor</a></li>
                        <li><a href="#">Outdoor</a></li>
                    </ul>                    
                </li>
                 <li>
                    <a href="#">Batting Cages</a>
                    <ul>
                        <li><a href="#">Indoor</a></li>
                        <li><a href="#">Outdoor</a></li>
                    </ul>
                 </li>
            </ul>
        </li>
    </ul​ 
```

CSS 代码

```
/* 
    LEVEL ONE
*/
ul.dropdown                         { position: relative; }
ul.dropdown li                      { font-weight: bold; float: left; zoom: 1; background: #ccc; }
ul.dropdown a:hover                    { color: #000; }
ul.dropdown a:active                { color: #ffa500; }
ul.dropdown li a                    { display: block; padding: 4px 8px; border-right: 1px solid #333;
                                       color: #222; }
ul.dropdown li:last-child a         { border-right: none; } /* Doesn't work in IE */
ul.dropdown li.hover,
ul.dropdown li:hover                { background: #F3D673; color: black; position: relative; }
ul.dropdown li.hover a              { color: black; }

/* 
    LEVEL TWO
*/
ul.dropdown ul                         { width: 220px; visibility: hidden; position: absolute; top: 100%; left: 0; }
ul.dropdown ul li                     { font-weight: normal; background: #f6f6f6; color: #000; 
                                      border-bottom: 1px solid #ccc; float: none; }

                                    /* IE 6 & 7 Needs Inline Block */
ul.dropdown ul li a                    { border-right: none; width: 100%; display: inline-block; } 

/* 
    LEVEL THREE
*/
ul.dropdown ul ul                     { left: 100%; top: 0; }
ul.dropdown li:hover > ul             { visibility: visible; }​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:21:50.810

# c++ - 如何将编译后的扩展为函数或循环

> ID：13381649
> 
> 赞同：1
> 
> 时间：2012-11-14T15:19:29.493
> 
> 标签：c++, performance, compiler-construction, build

我有一个带有循环的函数，我可以在 c++ 代码中得到循环的扩展开发。我也有一个我想要得到的递归函数。

我需要的一个例子：

```
for (i = 0; i <4; i++)
{
      printf ("%d", "example");
} 
```

应该导致我需要

```
printf ("%d", "example");
printf ("%d", "example");
printf ("%d", "example");
printf ("%d", "example"); 
```

这是一个简单的例子。但是对于更复杂的功能，我需要这样做。对于我使用它的价值`visual c++`。我不知道是否有一个构建选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:26:30.173

如果你使用 GCC 来编译你的代码，那么你可以使用`-funroll-loop`选项来解开这个循环。

[文件](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)说，

> *   **-funroll-loops**
>     展开循环，其迭代次数可以在编译时或进入循环时确定。-funroll-loops 意味着 -frerun-cse-after-loop。此选项使代码更大，并且可能会或可能不会使其运行得更快。

还有另一个（类似的）选项：

> *   **-funroll-all-loops**
>     展开所有循环，即使在进入循环时它们的迭代次数不确定。这通常会使程序运行得更慢。-funroll-all-loops 意味着与 -funroll-loops 相同的选项，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:37:54.850

Visual C++ 没有用于循环展开的显式选项。但是，如果您打开优化，则优化器循环会根据启发式展开。循环展开是一种权衡 - 它可能会或可能不会导致性能提高。

这是关于Visual C++ 中循环展开的[讨论。](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/d0b225c2-f5b0-4bb9-ac6a-4d4f61f7cb17)

# cocoa-touch - iOS – 检查哪些应用程序可以访问 Facebook

> ID：13381651
> 
> 赞同：0
> 
> 时间：2012-11-14T15:19:34.113
> 
> 标签：cocoa-touch, ios6, facebook-ios-sdk

有没有办法在 iOS6 中检查哪些应用程序可以访问 Facebook？例如，如果**Calendar.app**有权访问，或者**Contacts.app**是否有权访问？

我正在开发一个访问内置 Calendar.app 以提取事件的应用程序（通过 EventKit）。

我还鼓励用户连接 Facebook，以便我们可以检索用户的 Facebook 事件。

这非常有效，只有一个问题是当用户允许 Calendar.app 访问 Facebook 时，我将通过 EventKit 和 Facebook iOS SDK 提取 Facebook 事件，因此我将拥有重复的数据......

如果用户不允许 Calendar.app 访问 Facebook，那么当然不会有任何问题。

# tsql - SELECT Columns WHERE 一列是不同的？

> ID：13381654
> 
> 赞同：0
> 
> 时间：2012-11-14T15:19:36.840
> 
> 标签：tsql, oledbcommand

谁能帮我查询？

我尝试了以下方法，但出现错误

```
SELECT Column1, Column2, Column3 FROM Table WHERE [Column1] NOT IN 
(SELECT [Column1] FROM Table GROUP BY [Column1] HAVING COUNT([Column]) > 1) 
```

子查询 [Column1] 中的 MEMO、OLE 或超链接对象无效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:23:25.597

使用`Group By`with`Having`子句：

```
SELECT Column1, MIN(Column2)AS Column2, MIN(Column3)AS Column3
FROM dbo.Table
GROUP BY Column1
HAVING ( COUNT(Column1) = 1 ) 
```

应该可以工作，因为每个“组”只有一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:03:07.057

您的原始查询应该可以工作，您只有 column 而不是 column1。

```
 SELECT Column1, Column2, Column3 FROM TableName WHERE [Column1] NOT IN 
(SELECT [Column1] FROM TableName GROUP BY [Column1] HAVING COUNT(Column1) > 1) 
```

见：[http ://sqlfiddle.com/#!3/d99a8/5/0](http://sqlfiddle.com/#!3/d99a8/5/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:29:39.697

据我所知，您需要 [Column1] 唯一的所有数据（仅出现一次）

```
DECLARE @x TABLE (col1 INT, col2 INT, col3 INT)

INSERT INTO @x
        ( [col1], [col2], [col3] )
VALUES  ( 1, 2, 3  )
        ,( 1, 4, 5 )
        ,( 2, 6, 7 )

SELECT * FROM @x

SELECT col1, col2 , col3 FROM @x
WHERE col1 NOT IN 
    ( SELECT [col1]  FROM @x GROUP BY [col1] HAVING  COUNT(*) > 1 ) 
```

# google-apps-script - Google Apps 脚本 UIApp：无法在仪表板表格中创建可点击的行？

> ID：13381655
> 
> 赞同：1
> 
> 时间：2012-11-14T15:19:45.447
> 
> 标签：google-apps-script

我是一名编程初学者，我使用 Google Apps Script UIApp 为我的 Google Apps 网站制作了一个仪表板（由电子表格填充），但我找不到在 tableChart 中创建可点击行的方法（我想打开一个单击每一行，链接到之前存储在云端硬盘中的共享文档）。在这个 UiApp 中使用 Google Visualization APi 似乎是不可能的。我试图创建一个处理程序，但我无法将它与 tableChart 链接...我错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:51:46.053

图表用于显示数据，而不是创建交互式 UI 元素。您可能想考虑使用 UiApp 的[FlexTable](https://developers.google.com/apps-script/class_flextable)类来实现您的目标。

# c# - Asp.net 创建 ActionResult 参数字典包含参数的空条目

> ID：13381660
> 
> 赞同：0
> 
> 时间：2012-11-14T15:20:00.257
> 
> 标签：c#, asp.net-mvc

我没有改变我曾经可以工作的代码，我什至用项目的早期版本澄清了这一点。但是，我现在收到此错误：

参数字典包含“BareCupboard.Controllers.RecipeStepController”中方法“System.Web.Mvc.ActionResult Create(Int32, BareCupboard.Models.RecipeStep)”的不可为空类型“System.Int32”的参数“recipeID”的空条目'。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

我的代码是：

```
[HttpPost]
    public ActionResult Create(int recipeID, RecipeStep newRecipeStep)
    {
        try
        {
            var recipe = db.Recipes.Single(r => r.recipeID == recipeID);
            recipe.RecipieSteps.Add(newRecipeStep);
            db.SaveChanges();
            return RedirectToAction("Index", "Recipe");
        }
        catch
        {
            return View();
        }
    } 
```

我试过：int？recipeID，但这不起作用。我所看到的任何可能发生的想法都是神秘主义在这里发挥作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:29:18.237

为什么您发布的数据中的 recipeID 为空？这是您的问题， `var recipe = db.Recipes.Single(r => r.recipeID == recipeID)`无法获得`recipeID=null`，因为`r.recipeID`不可为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:39:28.160

检查您的视图代码以了解参数的顺序。模型绑定器需要它以正确的顺序出现。那里很容易出错。

**更新**

这是解决此问题的一种方法。创建一个视图模型如下：

```
 public class RecipeViewModel
    {
       public int RecipeId { get; set; }
       public RecipeStep RecipeStep { get; set; }
    } 
```

在控制器中，您将拥有以下内容：

```
 public ActionResult Create()
    {
        var recipeId = 10 // however you want to select that Id

        var recipeViewModel = new RecipeViewModel {RecipeId = 10}

        return View(recipeViewModel);
    }

  [HttpPost]
  public ActionResult Create(int recipeID, RecipeStep newRecipeStep)
  {
     //your code
  } 
```

在视图中，您可以执行以下操作：

```
@model MvcApplication3.Models.RecipeViewModel

@using (Html.BeginForm(null,null,FormMethod.Post))
{

 <div>
    <p>@Html.HiddenFor(x=>x.RecipeId) </p>
    <p>@Html.TextBox("RecipeStepData1")</p>
     <p>@Html.TextBox("RecipeStepData2")</p>
    <p>@Html.TextBox("RecipeStepData3")</p>
</div>
<input type="submit" value="Submit"  id="btn" /> 
} 
```

注意顺序。我先放了 id，然后是其余的配方步骤数据，以便正确绑定。

对于开始表单，您不必在同一页面上发布帖子时指定操作和控制器。如果你放在那里，它不会受伤。

希望这可以帮助... ：）

# windows-8 - 使用 FilePicker 访问隐藏文件夹

> ID：13381661
> 
> 赞同：1
> 
> 时间：2012-11-14T15:20:06.317
> 
> 标签：windows-8, microsoft-metro

我试图访问用户 AppData 文件夹中的文件。我已经接受了这样一个事实，即我必须使用 FilePicker 和 FutureAccess 来完成这项工作。我的问题是 FilePicker 不会显示隐藏文件夹。有人对此有解决方案吗？

干杯罗斯

# css - 添加其他 div 时，标题 div 会更改其位置

> ID：13381662
> 
> 赞同：1
> 
> 时间：2012-11-14T15:20:08.050
> 
> 标签：css, html, web

我在使用网页标题时遇到了一些问题。它有几页，其中一页有几张大图。在那个特定的页面中，我观察到标题 div 向左移动了几个像素，这在页面之间切换时非常令人讨厌。

我知道当我删除第一张图片 (id="problem1") 或其中一个带有两张图片的 div ((id="problem2" 和 "problem3")) 时问题消失了，但我不知道是什么正在发生。

我正在使用这个 css 代码来生成两个列：

```
.contenedor { overflow: auto; }

.div1 { float:left; width:440px;}
.div2 { float:right; width:440px;} 
```

这是标题：

```
#header {
    height: 100px;
    background: #0072b8;
    font-family: Arial;
    font-size: 16px;
    color: white;

} 
```

这是神奇地改变其位置的标题：

```
<div id="header">
        <a href="home.html"><img src="http://placekitten.com/237/100" width="237px" height="100px" border="0" style="padding: 0 3.5em; float: left;"></a>
    </div> 
```

这是定义具有两个列的 div 之一的代码：

```
<div class="contenedor">
    <div class="div1">
      <a href="http://placekitten.com/300/305" class="lightbox"><img src="http://placekitten.com/300/305" width="300px" height="305px"/></a>         
    </div>
    <div class="div2">
       <a href="http://placekitten.com/300/305" class="lightbox"><img src="http://placekitten.com/300/305" width="300px" height="305px"/></a>
    </div>
</div> 
```

您可以在此处查看其余代码及其结果： [JSFiddle](http://jsfiddle.net/NyYDm/)

最让我困惑的是，如果我只留下2个有问题的元素，div位置是正确的，与所有其他没有这些图片的页面中的位置相同，但是当我添加第三个时移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:42:31.163

发生这种情况是因为您在某些页面上有滚动条，但在其他页面上没有滚动条，并且您的 DIV 元素设置为“自动”，因此它们扩展了可用的浏览器空间（我确信您知道在调整浏览器大小时会发生变化，或者在此滚动条的存在改变了可用空间的情况）。

要解决这个问题，最简单的方法是设计页面

```
html {
overflow-y:scroll;
} 
```

这将确保滚动条始终在页面上，并且页面大小不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:24:57.183

我相信问题在于您在问题页面上有一个滚动条。您的内容长于浏览器窗口的高度。当您的内容高于窗口时，页面会添加一个滚动条。这是不可避免的。

# jquery - 根据权限删除 Sharepoint QuickLaunch

> ID：13381663
> 
> 赞同：0
> 
> 时间：2012-11-14T15:20:09.397
> 
> 标签：jquery, sharepoint-2010, master-pages, sharepoint-branding

我目前正在第一次处理一些 SharePoint 品牌。我正在使用 SharePoint Foundation 2010。我试图为不在“管理员”组内的每个人从页面中删除快速启动部分。现在，我尝试使用以下 c# 代码编写功能或 Web 部件来执行此操作：

```
SPWeb web = SPContext.GetContext(this.Context).Web.ParentWeb;
web.AllowUnsafeUpdates = true;
web.QuickLaunchEnabled = false;
web.Update(); 
```

这并没有删除实际面板本身并将主要内容移到左侧。我决定从 Jquery 路线尝试这个。我的代码复制如下。但是，当我在母版页中尝试此操作时，页面完全加载，然后面板被删除。我希望这发生在页面实际加载之前，这样用户就不会看到页面弹出然后更改。我不是 100% 确定 JQuery 是要走的路，请帮助我，因为我正在努力解决这个问题。

```
$(document).ready(function(){
     $().SPServices({
     operation: "GetGroupCollectionFromUser",
     userLoginName: $().SPServices.SPGetCurrentUser(),
     async: false,
     completefunc: function(xData, Status) {
        if($(xData.responseXML).find("Group[Name='Administrator']").length == 1)
        {}
        else{

         var quicklaunchpanel = document.getElementById('s4-leftpanel');  
    quicklaunchpanel.style.display="none";
    var maincontent = document.getElementById('MSO_ContentTable');
    maincontent.style.cssText = "margin-left:0px;";

        }
      } 
```

});

注意：我也尝试了 $(document).load() 和 $('#s4-leftpanel').load() 但这都没有导致任何动作。

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:13:30.207

沉，

您是否考虑过构建自定义导航控件？这听起来可能很激进，但可能正是您想要的。

看看[http://blogs.msdn.com/b/modonovan/archive/2008/05/30/custom-navigation-in-sharepoint-the-full-monty.aspx](http://blogs.msdn.com/b/modonovan/archive/2008/05/30/custom-navigation-in-sharepoint-the-full-monty.aspx)，尤其是选项 5 和 6。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:59:32.907

我能够使用 SPSecurityTrimmedControl 来完成此操作：

我最初将 s4-leftpanel 的 display 属性设置为“none”，然后在这个面板之后有这段代码：

```
<Sharepoint:SPSecurityTrimmedControl runat="server" Permissions="FullMask">
        <script type="text/javascript">
            document.getElementById("s4-leftpanel").style.display = "block";
        </script>
        </Sharepoint:SPSecurityTrimmedControl> 
```

我还对 MSO_ContentTable 的边距执行了相同的操作。我将其设置为 0px，然后在该 div 之后运行此代码：

```
 <Sharepoint:SPSecurityTrimmedControl runat="server" Permissions="FullMask">
        <script type="text/javascript">
            document.getElementById("MSO_ContentTable").style.marginLeft = "155px";
        </script>
        </Sharepoint:SPSecurityTrimmedControl> 
```

# javascript - 串行异步 XmlHTTPRequest

> ID：13381664
> 
> 赞同：0
> 
> 时间：2012-11-14T15:20:10.333
> 
> 标签：javascript

这是进行串行异步调用的更好方法吗？

[http://ajaxian.com/archives/serial-async-xhr](http://ajaxian.com/archives/serial-async-xhr)

```
function run() { 
    request1(function () { 
        request2(function () { 
            request3(function () { 
                done(); 
            }); 
        }); 
    }); 
} 
```

这会导致回调地狱问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:42:14.167

This is *not* bulletproof and just to give you an example.

```
function ajax(url, callback) { 
    var req = new XMLHttpRequest(); 
    req.open("GET", url, true); 
    req.onreadystatechange = function () { 
        if (this.readyState == 4 && this.status == 200) { 
            if(callback)
            {
                callback(this.responseText);
            }
        } 
    }; 
    req.send(); 
} 
```

as a wrapper, so you end up doing something like

```
function loadIndex()
{
    ajax('/', function(data){
        alert(data);
        loadIndexAgain();
    });
}

function loadIndexAgain()
{
    ajax('/', function(data){
        alert('more stuff happened');
    });
}

loadIndex(); 
```

and your statements will be chained.

[fiddle](http://jsfiddle.net/emosaurusrex/qQh5S/1/).

# git-svn - 如何在 tortoisegit dcommit 上设置用户名？

> ID：13381669
> 
> 赞同：1
> 
> 时间：2012-11-14T15:20:19.047
> 
> 标签：git-svn, tortoisegit

我设置了一个 svn 服务器`svnserve`来测试 svn-git 的工作原理。

当我尝试`dcommit`遇到乌龟 gui 没有提供选择用户名的选项的问题时，它只是提示输入密码：

[http://img1.uploadscreenshot.com/images/orig/11/31810164510-orig.png](http://img1.uploadscreenshot.com/images/orig/11/31810164510-orig.png)

最初，提示显示的用户名曾经是 Windows 身份验证用户 (Razvan)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:27:26.347

将此作为临时解决方案发布，如果有更好的解决方案，我会接受：

一种解决方案是`dcommit`从命令提示符设置用户名：

```
git svn dcommit --username desiredusername 
```

TortoiseGit 将记住用户名和密码以供将来 dcommits 使用。

# c++ - gcc c++11 limits for user defined constants and template parameter packs

> ID：13381678
> 
> 赞同：13
> 
> 时间：2012-11-14T15:21:03.183
> 
> 标签：c++, c++11, gcc4.7

I've been playing with user defined constants in gcc 4.7.2 and ran into some sort of size limiting factors which I do not quite understand.

The idea was to define a constexpr operator "" for fixed point decimal type. I want to avoid casting from double but rather parse mantissa and exponent at compilation time using variadic templates. The mantissa parsing proved a bit tricky.

When I enable any of the 3 disabled lines at the bottom of the code below, gcc falls into infinite loop and hangs there. I noticed the same max size for floating point literal and explicit instantiation of the variadic template but slightly larger size for integer literal.

I used command: g++ -std=c++11 -Wall -g -o literal_value literal_value.cpp

Using -ftemplate-depth-128 makes no difference.

```
#include <iostream>
#include <cstdint>

typedef std::uint64_t value_type;

template<value_type Temp, char... List> struct literal_parser;

template<value_type Temp, char Head, char... List>
struct literal_parser<Temp, Head, List...>
{
    static const value_type value = Head == '.' ?
        literal_parser<Temp, List...>::value :
        literal_parser<Temp * 10 + Head - '0', List...>::value;
};

template<value_type Temp, char Last>
struct literal_parser<Temp, Last>
{
    static const value_type value = Last == '.' ?
        Temp : Temp * 10 + Last - '0';
};

template<char... List>
inline constexpr value_type operator"" _value() noexcept
{
    return literal_parser<0U, List...>::value;
}

int main()
{
    std::cout << "value 1: " << 123456789012345678_value << std::endl;
    std::cout << "value 2: " << 1.23456789012345_value << std::endl;
    std::cout << "value 3: " << literal_parser<0U, '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5'>::value << std::endl;

#if 0
    std::cout << "value 4: " << 1234567890123456789_value << std::endl;
    std::cout << "value 5: " << 1.234567890123456_value << std::endl;
    std::cout << "value 6: " << literal_parser<0U, '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5', '6'>::value << std::endl;
#endif
} 
```

Is that a bug in gcc or am I missing something?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:21:22.537

I must say that you found some nice corner case that makes compilers crazy :-) For me gcc 4.7.2 and 4.8 crashed during compilation. However clang (top version) compiled whole code fine but was using 2.4GB RAM. The problem seems to be connected to ternaty operator for '.' check. If you remove it and comment real number tests in main() everything compiles fine like a blast.

So answering your question you probably do not miss anything and gcc and clang need to probably revise their implementaion based on your case.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:47:14.300

Based on Mateusz's answer I redefined the literal_parser template using constexpr function to parse single digit and everything is looking perfect now. Thanks a lot for your help!

```
#include <iostream>
#include <cstdint>

typedef std::uint64_t value_type;

template<value_type Temp, char... List> struct literal_parser;

inline constexpr value_type parse_digit(value_type value, char digit) noexcept
{
    return digit == '.' ? value : value * 10 + digit - '0';
}

template<value_type Temp, char Head, char... List>
struct literal_parser<Temp, Head, List...>
{
    static const value_type value =
        literal_parser<parse_digit(Temp, Head), List...>::value;
};

template<value_type Temp, char Last>
struct literal_parser<Temp, Last>
{
    static const value_type value = parse_digit(Temp, Last);
};

template<char... List>
inline constexpr value_type operator"" _value() noexcept
{
    return literal_parser<0U, List...>::value;
}

int main()
{
    std::cout << "value 1: " << 123456789012345678_value << std::endl;
    std::cout << "value 2: " << 1.23456789012345_value << std::endl;
    std::cout << "value 3: " << literal_parser<0U, '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5'>::value << std::endl;

    std::cout << "value 4: " << 1234567890123456789_value << std::endl;
    std::cout << "value 5: " << 1.2345678901234567890_value << std::endl;
    std::cout << "value 6: " << literal_parser<0U, '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5', '6'>::value << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T06:28:39.123

```
static const value_type value = Head == '.' ?
    literal_parser<Temp, List...>::value :
    literal_parser<Temp * 10 + Head - '0', List...>::value; 
```

This is going to make the compilation time completely explode because the compiler has to evaluate both sides of the conditional (making the whole thing exponential over the number of digits). Try changing the expression to something like `literal_parser<Head == '.' ? Temp : Temp * 10 + Head - '0', List...>::value`.

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-14T17:05:06.063

I think that the problem lies in how you are composing your command

```
g++ -std=c++11 -Wall -g -o literal_value literal_value.cpp 
```

It's probably a good idea to never put the source files at the end, infact this compiles fine with g++ 4.7.2 under MinGW under Windows

```
g++ -std=c++11 -Wall -g literal_value.cpp -o literal_value 
```

in general terms it's a good idea to reserve the last part of the line for linking specs and nothing else.

# jquery - “9”之后的 HTML5 输入类型编号奇怪的行为

> ID：13381679
> 
> 赞同：1
> 
> 时间：2012-11-14T15:21:03.617
> 
> 标签：jquery, forms, html, input

[我的小提琴](http://jsfiddle.net/aleation/sfGBV/)

所以我有 2 个领域，浴室和（浴室）套房。

我对其进行了限制，因此套间区域永远不会大于浴室，如果您降低浴室的价值，它会改变套间价值，使其保持不变。

该脚本实际上很简单并且效果很好，但我注意到如果我在浴室编号上设置一个等于或大于 9 的值，它就会开始表现得很奇怪。例如，如果浴室是 15，则套间会直接从 1 跳到 15，如果你降低浴室它不再起作用，它实际上就像 20 或 2000 = 2，忽略其余数字并取值只有第一个数字。

html:

```
<label for="fbathrooms">Bathrooms</label><input id="fbathrooms" name="fbathrooms" type="number" min="0"/><br/>
<label for="fensuite" style="display:none">En Suite</label><input id="fensuite" name="fensuite" type="number" min="0" style="display:none;"/>​ 
```

代码：

```
function bathroomsTrigger(){
    if($('#fbathrooms').val() > 0){
        $('#fensuite').slideDown('fast');
        $('label[for="fensuite"]').slideDown('fast');
    } else {
        $('#fensuite').slideUp('fast');
        $('label[for="fensuite"]').slideUp('fast');
        $('#fensuite').val(0);
    }

    if($('#fensuite').val() > $('#fbathrooms').val()){
        $('#fensuite').val($('#fbathrooms').val());
    }
}

function ensuiteTrigger(){
    if($('#fensuite').val() > $('#fbathrooms').val()){
        $('#fensuite').val($('#fbathrooms').val());
    }
}

$('#fbathrooms').keyup(bathroomsTrigger);
$('#fbathrooms').change(bathroomsTrigger);

$('#fensuite').keyup(ensuiteTrigger);
$('#fensuite').change(ensuiteTrigger);​ 
```

快把我逼疯了，已经调整了好几个小时了 xD

帮助将不胜感激。

（可能是 html5 错误？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:27:23.353

问题出在您的套间触发器中，您尚未将字符串值解析为整数以进行大于比较。

改变：

```
$('#fensuite').val() > $('#fbathrooms').val() 
```

到：

```
parseInt($('#fensuite').val()) > parseInt($('#fbathrooms').val()) 
```

# php - php quiz 未定义的偏移量错误

> ID：13381683
> 
> 赞同：-2
> 
> 时间：2012-11-14T15:21:19.737
> 
> 标签：php

```
 <?php
    $connection=mysql_connect('localhost','root',"");
    if(!$connection)
    {
        die("database connection failed".mysql_error());
    }
    $db_select=mysql_select_db("db",$connection);
    if(!$db_select)
    {
        die("database connection failed".mysql_error());
    }
    if(!isset($_POST['submit']))
    {
        echo "<form method=\"post\" action=\"test1.php\">";
        $sub_result=mysql_query("SELECT * from test where tid='1' order by rand() limit 0,2",$connection);
        if(!$sub_result)
        {
            die("database query failed". mysql_error());
        }

        while ($sub_row=mysql_fetch_array($sub_result))
        {
            $id=$sub_row["qno"];
            $ques=$sub_row["ques"];
            $opt1=$sub_row["opt1"];
            $opt2=$sub_row["opt2"];
            $opt3=$sub_row["opt3"];
            $opt4=$sub_row["opt4"];
            $ans=$sub_row["ans"];

            echo "<h3>Q".$id." :".$ques."</br></h3>";   
            echo"</br>
                $opt1
                <input type= radio name=\"{$id}\" value=\"{$opt1}\" >
                </br>
                $opt2
                <input type= radio name=\"{$id}\" value=\"{$opt2}\">
                </br>
                $opt3
                <input type= radio name=\"{$id}\" value=\"{$opt3}\">
                </br>
                $opt4
                <input type= radio name=\"{$id}\" value=\"{$opt4}\">
                </br></br>";
        }
        echo"<input type='submit' value='see how you did it' name='submit'>";
        echo"</form>";

    }

        if(isset($_POST['submit']))
        {

        $total=0;
        $answer=mysql_query("select qno,ans from test",$connection);

        while($ans=mysql_fetch_assoc($answer))
        {
            if($_POST[$ans['qno']] === $ans['ans'])
            {
                $total++;
            }
            else
            {
            }
        }
        echo"<p align=center><b>I Got $total</b>";
        }
 ?> 
```

**出现错误“第 60 行中的未定义偏移量，我正在这里验证答案。”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:26:52.857

问题是变量#set in`$ans['qno']`不作为数组中的对存在`$_POST`（`$_POST`数组值比#set in 少`$ans['qno']`）

将第 60 行从：

`if($_POST[$ans['qno']] === $ans['ans']) {`

至：

`if( isset( $_POST[$ans['qno']] ) && ( $_POST[ $ans['qno'] ] === $ans['ans'] ) ) {`

我们使用`isset()`首先确保`$_POST[x]`存在，并且仅当它存在时，将其与`$ans['ans']`.

# python - 在 Python 中从矩阵中提取行并将该行用作 Matplotlib 中的颜色

> ID：13381685
> 
> 赞同：1
> 
> 时间：2012-11-14T15:21:23.793
> 
> 标签：python, matplotlib

这应该很容易，但我还没有掌握 Python 语法的窍门。我创建一个这样的数组：

```
colors = [ [(17.0/256.0), (15.0/256.0), (48.0/256.0)],  #Dark blue  (#110F30)
         [(239.0/256.0), (83.0/256.0), (25.0/256.0)]    #Orange     (#EF5319)
         ] 
```

我想使用第一行或第二行作为绘图语句中的颜色输入：

```
ax1.plot(time, temp - 273, color=colors[0,:], label=temp_axis_label) 
```

但是，这不起作用（显然）。从颜色矩阵中提取行的正确语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:26:02.797

简单地 ：`ax1.plot(time, temp - 273, color=colors[0], label=temp_axis_label)`

问题在于颜色是列表列表，而不是 numpy 矩阵：

```
colors = np.array([ [(17.0/256.0), (15.0/256.0), (48.0/256.0)],  #Dark blue  (#110F30)
         [(239.0/256.0), (83.0/256.0), (25.0/256.0)]    #Orange     (#EF5319)
         ])
ax1.plot(time, temp - 273, color=colors[0,:], label=temp_axis_label) 
```

也可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:27:14.887

放下`,:`...

```
color = colors[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:28:25.347

只需这样做：

```
ax1.plot(time, temp - 273, color=colors[0], label=temp_axis_label) 
```

如果您熟悉 matlab 并想使用 Python 执行科学计算，您也可以考虑使用 numpy：[http ://numpy.scipy.org/](http://numpy.scipy.org/)

# javascript - IndexedDB InvalidStateError，Windows 8

> ID：13381686
> 
> 赞同：1
> 
> 时间：2012-11-14T15:21:33.263
> 
> 标签：javascript, windows-8, microsoft-metro, indexeddb

我正在编写一个 JavaScript/HTML5 Windows 8 应用程序。在写入 IndexedDB 时，我偶尔会收到 InvalidStateError。我的功能在下面，它发生在第一行。有没有办法确保状态正确？

**newEncryptedInfo 是一个带有 2 个字符串参数的 JSON 对象（暂时）。它是正确形成的。

```
function loadData(evt) {
   var transaction = EncryptedDB.db.transaction("data", "readwrite");
   var encryptStore = transaction.objectStore("data");
   var addResult = encryptStore.add(newEncryptedInfo);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:07:12.080

如果您在创建事务时收到 InvalidStateError，那么原因通常是因为数据库连接已关闭。单击[此处](http://www.w3.org/TR/IndexedDB/#widl-IDBDatabase-transaction-IDBTransaction-any-storeNames-DOMString-mode)了解有关它的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T18:08:13.000

根据 MDN 和 WC3，是因为 objectstore 已被删除或删除或不可用。

MDN

[https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore?redirectlocale=en-US&redirectslug=IndexedDB%2FIDBObjectStore](https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore?redirectlocale=en-US&redirectslug=IndexedDB%2FIDBObjectStore)

WC3

[http://www.w3.org/TR/IndexedDB/#widl-IDBDatabase-transaction-IDBTransaction-any-storeNames-DOMString-mode](http://www.w3.org/TR/IndexedDB/#widl-IDBDatabase-transaction-IDBTransaction-any-storeNames-DOMString-mode)

我发现在大多数情况下还没有创建对象库。

# javascript - Cancel next event when field has incorrect value in javascript

> ID：13381697
> 
> 赞同：1
> 
> 时间：2012-11-14T15:21:50.283
> 
> 标签：javascript, jquery, validation, event-handling

Having the following case: [http://jsfiddle.net/kzzy9/](http://jsfiddle.net/kzzy9/)

```
<html><head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo</title>

  <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>

  <link rel="stylesheet" type="text/css" href="/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="/css/result-light.css">

  <style type="text/css">
    .inputerror {
    color: #B94A48;
    border-color: #EE5F5B;
    background-color: #FFE1E0;
}
  </style>

<script type="text/javascript">//<![CDATA[ 

function validarcampoimporte(sender) {
    var importe = sender.value;
    if (!(/^\d*(?:\,\d{0,2})?$/.test(importe))) {
        $(sender).focus().select();
        $(sender).addClass("inputerror");
        //prevent any other event that caused the focusout until the user corrects the value
        return false;
    } else {
        $(sender).removeClass("inputerror");
        return true;
    }
}
//]]>  

</script>

<style type="text/css"></style></head>
<body>
  <select name="ddlMes" id="ddlMes">
        <option value="1">Enero</option>
        <option value="2">Febrero</option>
        <option value="3">Marzo</option>
        <option value="4">Abril</option>
        <option value="5">Mayo</option>
        <option value="6">Junio</option>
        <option value="7">Julio</option>
        <option value="8">Agosto</option>
        <option value="9">Septiembre</option>
        <option value="10">Octubre</option>
        <option selected="selected" value="11">Noviembre</option>
        <option value="12">Diciembre</option>

    </select>
        <input class="" id="name" size="15" type="text" onblur="return validarcampoimporte(this);">
<input type="submit" value="Buttonx" onclick="alert('i got clicked')">
</body>
</html> 
```

What jQuery function can i call to prevent/cancel any other event that caused the focusout when the value is not correct? Return false doesnt work.

(For example if the user is in the validated field and inputs "100a" when he clicks in the select, the options are not shown, or if he clicks in the button the alert is not shown" [cancel the event])

PS: I know someone will tell me about usability problems, form validation at submit, etc but this is the case i have been imposed to do, so thanks beforehand but i need to solve it this way specifically...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:39:24.093

您可以通过这种方式更改您的代码。

HTML（监听 onkeyup 事件）

```
<select name="ddlMes"  id="ddlMes" >
        <option value="1">Enero</option>
        <option value="2">Febrero</option>
        <option value="3">Marzo</option>
        <option value="4">Abril</option>
        <option value="5">Mayo</option>
        <option value="6">Junio</option>
        <option value="7">Julio</option>
        <option value="8">Agosto</option>
        <option value="9">Septiembre</option>
        <option value="10">Octubre</option>
        <option selected="selected" value="11">Noviembre</option>
        <option value="12">Diciembre</option>

    </select>
        <input class="" id="name" size="15" type="text" onkeyup="return validarcampoimporte(this);" />
<input type="submit" value="Buttonx" onclick="alert('i got clicked')"> 
```

// JS（验证）

```
function validarcampoimporte(sender) {
    var importe = sender.value;
    if (!(/^\d*(?:\,\d{0,2})?$/.test(importe))) {
        $(sender).focus().select();
        $(sender).addClass("inputerror");

        $('input[type="submit"]').attr('disabled', 'disabled');
        $('select').attr('disabled', 'disabled');
        return false;
    } else {
        $(sender).removeClass("inputerror");
        $('input[type="submit"]').removeAttr('disabled');
        $('select').removeAttr('disabled');
        return true;
    }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:45:55.850

See here: [http://jsfiddle.net/kzzy9/6/](http://jsfiddle.net/kzzy9/6/)

Instead of attaching events inline, you should attach them with javascript. I'm re-focusing the "sender" after a timeout. What was happening when you click outside of the input is that the blur event is called, then another element is focused (through perhaps a click event).

```
$("#name").blur(validarcampoimporte);

function validarcampoimporte(e) {

    var importe = this.value;
    var me = $(this);
    if (!(/^\d*(?:\,\d{0,2})?$/.test(importe))) {
        setTimeout(function(){me.focus();}, 20);

        $(this).addClass("inputerror");
        e.preventDefault();
        return false;
    } else {
        $(this).removeClass("inputerror");
        return true;
    }

}​ 
```

# java - 将 xml 文档作为参数传递给 xsl

> ID：13381698
> 
> 赞同：4
> 
> 时间：2012-11-14T15:21:57.407
> 
> 标签：java, xml, xslt, saxon, xalan

我已经阅读了很多帖子并尝试了很多东西，但仍然无法让 xsl 在参数中找到值。我从 java 的 sun xalan 开始，但从未让它工作，所以我改用撒克逊语无济于事。我想用 xls 将两个 xml 文档合二为一。永远不会在文件系统上，这是用于构建 xml 字符串/文档的 Web 应用程序。我尝试将 DTMAxisIterator、DomSource、Doc 传递给在 xsl、字符串中设置的节点。它在带有 xsl document() 的 NotePad++ 中运行良好，但我不想将 xml 保存在系统上。

XSL

```
<xsl:param name="RsXml" select="/"/>

<xsl:template match="/policy/vehicles">
<vehicle type="DP" type_code="DP"/>

        <xsl:for-each select="$RsXml/InsuranceSvcRs /com.csc_PolicyOrderCurrentCarrierInqRs/PersVeh">

            <vin>
                <xsl:value-of select="VehIdentificationNumber"/>
            </vin>
            <veh_year>
                <xsl:value-of select="ModelYear"/>
            </veh_year>
            <make>
                <xsl:value-of select="Manufacturer"/>
            </make>
            <model>   
                <xsl:value-of select="Model"/>
            </model>
            <costnew>               
                <xsl:value-of select="CostNewAmt/Amt"/>
            </costnew>
            <symbol>
                <xsl:value-of select="VehSymbolCd"/>
            </symbol>
            <wheregaraged></wheregaraged>
            <liabilityonly></liabilityonly>
            <collision></collision>
            <comprehensive></comprehensive>
            <rentalreimbursement></rentalreimbursement>
            <towing></towing>
            <altered></altered>
            <title></title>
            <enginesize>
                <xsl:value-of select="NumCylinders"/>
            </enginesize>
            <trailertype/>
            <trtonnage/>
            <mctype/>
            <mcenginecc/>
            <vehicleuse></vehicleuse>
            <mhawnings></mhawnings>
            <vseat15></vseat15>
            <vseat15text/>
            <extraequipment></extraequipment>
            <mcsidecar></mcsidecar>
            <atvwheels/>
            <damage/>
            <endorsements/>
            <avtotal/>
            <v_underwriting>
                <altered></altered>
                <alteredlist/>
                <alteredexplain/>
                <businessuse></businessuse>
                <haulstudents></haulstudents>
                <pulltrailers></pulltrailers>
                <trailerendorsement/>
            </v_underwriting>
            <driverid></driverid>
            <gen_classcode></gen_classcode>
            <classcode></classcode>
            <primary_veh></primary_veh>
            <rates>
                <bi></bi>
                <pd></pd>
                <med></med>
                <ubi></ubi>
                <upd></upd>
                <comp></comp>
                <coll></coll>
                <comm></comm>
                <rr></rr>
                <tl></tl>
            </rates>
            <xferdis></xferdis>
            <atv_young_dr></atv_young_dr>
            <mrcd_date/>
            <hasdamage></hasdamage>
            <comp_symbol></comp_symbol>
            <str_legal></str_legal>
            <addresses/>

        </xsl:for-each>     
<xsl:apply-templates/> 
```

XML一

```
 <?xml version="1.0" encoding="UTF-8"?>
               <policy id="1735">       
              <vehicles>        
              </vehicles>
                </policy> 
```

XML 二

```
 <ACORD>
     <InsuranceSvcRs>
      <com.csc_PolicyOrderCurrentCarrierInqRs>
        <PersVeh id="001">
            <ItemIdInfo>
                <InsurerId>001</InsurerId>
            </ItemIdInfo>
            <Manufacturer>FORD</Manufacturer>
            <Model>WINDSTAR</Model>
            <ModelYear>1999</ModelYear>
            <VehBodyTypeCd>ES</VehBodyTypeCd>
            <CostNewAmt>
                <Amt>23660</Amt>
            </CostNewAmt>
            <NumDaysDrivenPerWeek />
            <EstimatedAnnualDistance>
                <NumUnits />
                <UnitMeasurementCd />
            </EstimatedAnnualDistance>
            <FullTermAmt>
                <Amt />
            </FullTermAmt>
            <TerritoryCd />
            <VehIdentificationNumber>1</VehIdentificationNumber>
            <NumCylinders>6</NumCylinders>
            <VehSymbolCd />
            <AntiLockBrakeCd>4-WHEEL STD</AntiLockBrakeCd>
            <DaytimeRunningLightInd />
            <DistanceOneWay>
                <NumUnits />
                <UnitMeasurementCd>MI</UnitMeasurementCd>
            </DistanceOneWay>
            <AntiTheftDeviceCd>PASS-KEY</AntiTheftDeviceCd>
            <VehPerformanceCd />
            <VehUseCd />
            <AirBagTypeCd>BOTH</AirBagTypeCd>
            <com.csc_VehBodyTypeFreeformInd />
        </PersVeh>          
    </com.csc_PolicyOrderCurrentCarrierInqRs>
    </InsuranceSvcRs>
   </ACORD> 
```

班级

```
 public String transformResultXML(String xmlSource, Templates xsl,String policyXml ) {
       String result = "";  

    try {

          StringWriter writer = new StringWriter();
          StringReader reader2 = new StringReader(policyXml);

          XmlHelper xh = new XmlHelper();
          Document xmlSrc = xh.loadDoc(xmlSource);
          DOMSource source = new DOMSource(xmlSrc);

          ByteArrayInputStream byteStream = new  ByteArrayInputStream(xmlSource.getBytes());
          StringReader reader = new StringReader(xmlSource);
          SAXSource source2 = new SAXSource(new XMLFilterImpl(), new  InputSource(reader));

          TransformerFactory transFact = new com.icl.saxon.TransformerFactoryImpl();

          Transformer transformer = transFact.newTransformer();

          transformer.setParameter("RsXml",source2);
         // transformer.setParameter("RsXml",xmlSrc);
          transformer.setOutputProperty(OutputKeys.INDENT, "yes");
          transformer.transform(new javax.xml.transform.stream.StreamSource(reader2),
                  new javax.xml.transform.stream.StreamResult(writer));
          result = writer.toString();
          System.out.println(result);

    } catch( Exception e ) {
        e.printStackTrace();
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:42:44.950

我能够让它与撒克逊人一起工作，见下面的代码。我认为关键是 document.getDocumentElement() as parm

```
 public String transformResultXML(String xmlSource, Templates xsl,String policyXml )    {
       String result = "";  

    try {

          StringWriter writer = new StringWriter();
          StringReader reader2 = new StringReader(policyXml);

          DocumentBuilderFactory dfactory =
                  DocumentBuilderFactory.newInstance( "com.icl.saxon.om.DocumentBuilderFactoryImpl",null);

          dfactory.setNamespaceAware(true);

          DocumentBuilder docBuilder = dfactory.newDocumentBuilder();

          org.w3c.dom.Document document = docBuilder.parse(new InputSource(new StringReader(xmlSource)));

          Transformer transformer = xsl.newTransformer();

          transformer.setParameter("RsXml", document.getDocumentElement());

          transformer.setOutputProperty(OutputKeys.INDENT, "yes");
          transformer.transform(new javax.xml.transform.stream.StreamSource(reader2),
                  new javax.xml.transform.stream.StreamResult(writer));
          result = writer.toString();
          System.out.println(result);

    } catch( Exception e ) {
        e.printStackTrace();
    } 
```

XSL 片段

```
 <xsl:param name="RsXml" />

<xsl:template match="/policy/vehicles">

        <xsl:for-each select="$RsXml/InsuranceSvcRs/com.csc_PolicyOrderCurrentCarrierInqRs/PersVeh"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T17:32:36.617

当您使用 JAXP 接口时，您可以为参数提供的值未在 API 规范中定义，并且 Saxon 的支持可能与 Xalan 的不同。一般来说，我想你会发现 Saxon 的 s9api 接口更容易使用。当然，它提供参数的方法是强类型的，你可以提供什么更清楚。如果你想提供一个节点，它应该是 XdmNode 的一个实例，你可以通过使用 s9api DocumentBuilder 解析词法 XML 或包装一个 DOM 节点来创建一个 XdmNode。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:56:16.923

当您将参数传递给 XSL 样式表时，该值是一个字符串并且不会被解析为 DOM。目前这在标准 XSLT 中是不可能的。可能有一个扩展可以做到这一点，但我不知道有一个。

# jquery - 在 jQuery 中切换 p.class 但它一直在标签之外抓取图像

> ID：13381699
> 
> 赞同：0
> 
> 时间：2012-11-14T15:22:08.220
> 
> 标签：jquery, html, css, image, toggle

我有一系列 p 标签，我想在 jQuery 中切换。我在 p 标签之外有一个图像。当我编写切换函数并执行它时，动画会切换声明的 p 标签和 p 标签之外的图像。

这是一个小提琴：

[http://jsfiddle.net/nF5qU/1/](http://jsfiddle.net/nF5qU/1/)

这是代码：

HTML

```
<div class="toggle" id="toggleIt"><a>CLICK ME</a></div>
<div class="nav">
    <div class="One">
        <img src="pipeline/img/right.png" class="imgFunc"> 
        <p class="hideMe">Suspendisse cursus dapibus luctus knowing. 
            <br />
        <span>website.com</span></p>
    </div> 
    <!-- -->
<div class="nav">
    <div class="One">
        <img src="pipeline/img/right.png" class="directionalImg"> 
        <p class="hideMe">Suspendisse cursus dapibus luctus knowing. 
            <br />
        <span>website.com</span></p>
    </div> 
```

CSS

```
.directionalImg{
position: absolute;
padding-right: 10px;
margin-left: 10px;
}
.One{
margin-top: 125px;
}
.One p{
font-size: 9pt;
margin-left: 22px;
}
.One p span{
font-style: italic;
color: #999;
padding-right: 10px;
}
.toggleIt{
margin-top: 98px;
position: absolute;
font-size: 20pt;
} 
```

​</p>

jQuery

```
$("#toggleIt").click(function() {
$(".hideMe").toggle(500);
$("#toggleIt").animate({
    "left": "400px"
}, 0);
$(".nav").animate({
    "left": "400px"
}, 0);
});​ 
```

关于可能导致这种情况的任何想法？是因为我的形象是“绝对的”吗？我尝试将函数编写为 p.hideMe 而不是 .hideMe 并且没有任何反应。任何帮助是极大的赞赏。

***编辑：对不起，我写得很快，忘记关闭标签并放置一个“。” 在hideMe面前。我没有复制和粘贴，所以我向你保证所有标签都在实际文档中关闭。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:27:25.817

缺少引号导致 html 被破坏

```
<div id="slideFunction> <-- 
```

而你的你错过了类选择器的时期

```
$("#slideFunction").click(function () {
    $(".hideMe").toggle(500); // <-- you were missing the period
}); 
```

[http://jsfiddle.net/Y6NjX/](http://jsfiddle.net/Y6NjX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:25:16.117

您是否尝试过关闭图像标签？

```
<img src="images/pic.png" class="imgOne" /> 
```

而且你没有正确关闭你的第一个 div 标签

```
<div id="slideFunction"> 
```

小提琴：http: [//jsfiddle.net/gS7DB/1/](http://jsfiddle.net/gS7DB/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:26:48.020

除了你的 html 问题，比如在你的 div 类上缺少引号：

```
<div id="slideFunction">click here to hide paragraph</div> <!-- instead of: <div id="slideFunction>click here to hide paragraph</div> --> 
```

缺少 img 标签中的结束标签，

```
<img src="images/pic.png" class="imgOne"/>  <!-- instead of <img src="images/pic.png" class="imgOne"> --> 
```

您没有使用这行代码选择任何内容：

```
$("hideMe").toggle(500); 
```

应该是：

```
$(".hideMe").toggle(500); 
```

# java - Javascript 不更新 h:inputHidden 的值

> ID：13381701
> 
> 赞同：1
> 
> 时间：2012-11-14T15:22:16.383
> 
> 标签：java, javascript, jsf

我的 javascipt 函数没有在 bean 中设置 inputHIdden 的值。也许有人知道这个问题的原因？

爪哇

```
public String test = "";
//getter and setter 
```

jsf

```
<h:inputHidden id="myInputHidden" value="#{bean.test}"/>
<p:commandButton value="Apply" actionListener="#{bean.filter}" onclick="set();"/> 
```

javascript

```
 function set() {
        var str="test"
        $("#myForm\\:myInputHidden").val(str);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:37:36.963

也许你可以试试：

```
<p:commandButton value="Apply" actionListener="#{bean.filter}" onclick="#{bean.test}"/> 
```

这样就不需要 JS 功能了。如果您希望它动态更新，请添加 Ajax 调用，例如：

```
<f:ajax event="valueChange" render="@form" /> 
```

或者

```
<f:ajax event="click" render="@form" /> 
```

# ide - HTML / CSS Editor with tabs on both sides

> ID：13381702
> 
> 赞同：1
> 
> 时间：2012-11-14T15:22:22.963
> 
> 标签：ide, code-editor

I have searched high and low but never found something like this, so I have to ask!

When I edit an HTML or CSS file (say `index.html`) I usually try to take advantage of other people's ideas (I am a perpetual newbie-amateur), so I also open someone else's `index.html` to get ideas from (read copy-paste!).

Now I have two `index.html` files side by side and must take care NOT to inadvertently change the "other" file (that I'm copying from). Most editors allow you to show the full pathname to each file but for good reasons this is not always the best solution.

Things get worse when I edit several HTML and CSS files...

A good solution would be to be able to drag the "read-only" tabs to the right and leave the "working" tabs on the left side.

Is there an editor that can be configured this way?

# javascript - 使用 JavaScript 定位图像 alt

> ID：13381709
> 
> 赞同：1
> 
> 时间：2012-11-14T15:22:55.597
> 
> 标签：javascript, jquery

我正在使用响应式幻灯片，它仅使用数字作为图像下方的导航。我需要用文本替换数字。我目前将文本作为图像替代，但我在定位文本时遇到了很多麻烦。我对JS知之甚少，我猜这是问题所在：）

这是寻呼机代码：

```
 //pager
 if (settings.pager) {
      var tabMarkup = [];
      $slide.each(function (i) {
        var n = i + 1;

        var images = $("#slider2 li img");

        tabMarkup +=
          "<li>" +
          "<a href='#' class='" + slideClassPrefix + n + "'>" + images.eq(i).attr("alt") + "</a>" +
          "</li>";
      });
      $pager.append(tabMarkup);

      $tabs = $pager.find("a");

      // Inject pager
      if (options.controls) {
        $(settings.controls).append($pager);
      } else {
        $this.after($pager);
      }

      // Select pager item
      selectTab = function (idx) {
        $tabs
          .closest("li")
          .removeClass(activeClass)
          .eq(idx)
          .addClass(activeClass);
      };
    } 
```

以下是图片：

```
 <ul class="rslides" id="slider2">
  <li><img src="1.jpg" alt="Alt Sample" /></li>
  <li><img src="2.jpg" alt="Unlock Your Potential" /></li>
  <li><img src="3.jpg" alt="Enable Your Brand" /></li>
  <li><img src="4.jpg" alt="Lean On Our Expertise" /></li>
</ul> 
```

我在导航中添加了“位”，所以我可以找到它:) n 正在拉取正确数量的图像。显然我需要取出“Bit”并将“n”替换为图像alt。有什么建议么？

* * *

更新：

我正在使用[这个](https://github.com/viljamis/ResponsiveSlides.js)插件（希望我能自己写这样的东西！）。我尝试添加针对 alt 属性的变量，但它们都返回未定义。也许我把它放在错误的地方？

* * *

最终更新：我修改了原始代码以显示更改。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:26:17.520

只需删除 n 并通过使用获取 alt 属性[`.attr(name)`](http://api.jquery.com/attr/)。在`$(this)`你的`.each`循环中引用当前项目，使用它来获取属性：

```
 // ...
 $slides.each(function() () {
     var n = $(this).attr('alt');

     // ...
 });
 // ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:28:31.867

你有一个数组但连接字符串

[演示](http://jsfiddle.net/mplungjan/xygc5/)

```
 var tabMarkup = []; // an array
  var images = $("#slider2 li img");
  $slide.each(function (i) { // assuming $slide is a collection
    tabMarkup.push(
      "<li>" +
      "<a href='#' class='" + slideClassPrefix + (i+1) + "'>" + 
      (i+1) +":" +images.eq(i).attr("alt") +"</a>" +
      "</li>");
  });
  $pager.append(tabMarkup.join("")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:39:33.177

你的选择器可能是这样的： `$('img[alt="Enable Your Brand"]')`

# c++ - 运算符重载错误

> ID：13381712
> 
> 赞同：0
> 
> 时间：2012-11-14T15:23:03.883
> 
> 标签：c++, operator-overloading

我有两个不同的运算符重载。由于某种原因，它给出了错误。如果我删除其中一个，则它不会显示任何错误。我可以知道为什么吗？

我可以将两者结合起来吗？

这用于在屏幕上打印。

```
ostream& operator<<(ostream &out, const Point &p) {
return out << "[" << setw(4) << p.getX() << setw(1) << "," << setw(4) << p.getY() << "]   " << setprecision(3) << p.getScalarValue() << endl;
} 
```

这用于在文本文件上打印。

```
ofstream& operator<<(ofstream &out, const Point2D &p){
return out << "[" << setw(4) << p.getX() << setw(1) << "," << setw(4) << p.getY() << "]   " << setprecision(3) << p.getScalarValue() << endl;
} 
```

错误：

> Point.cpp:91:147：错误：从类型“std::basic_ostream::__ostream_type {aka std::basic_ostream}”的表达式中对类型“std::ofstream& {aka std::basic_ofstream&}”的引用无效初始化< /p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:26:31.200

您不需要第二个版本。您可以使用第一个：

```
Point p;
std::ofstream pointsFile("points.txt");
pointsFile << p << "\n"; 
```

首先，`std::ostream& operator<<`写入文件以及写入标准输出或 stderrt 的工作

其次，假设`Poind2D`继承自`Point`，将 a 传递给接受引用`Point2D`的函数或运算符也可以。`Point`

# git - 为什么人们分叉然后不改变任何东西？

> ID：13381713
> 
> 赞同：2
> 
> 时间：2012-11-14T15:23:02.307
> 
> 标签：git, version-control, github

我是 GitHub ( [https://github.com/TimotheeJeannin](https://github.com/TimotheeJeannin) ) 的新用户，但不明白一件事。

为什么人们分叉回购然后不对那个回购做任何改变？

例如 ：

*   [https://github.com/JakeWharton/StickyListHeaders](https://github.com/JakeWharton/StickyListHeaders)
*   [https://github.com/donnfelker/node-native-zip](https://github.com/donnfelker/node-native-zip)
*   [https://github.com/kevinsawicki/flurfunk-camelbot](https://github.com/kevinsawicki/flurfunk-camelbot)
*   [https://github.com/gorillamania/htmlParser](https://github.com/gorillamania/htmlParser)
*   [https://github.com/shama/faster-than-c](https://github.com/shama/faster-than-c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:00:34.503

实际上，我怀疑真正的原因是分叉（字面意思是一键式）比事后删除要容易得多（而且许多人不愿意删除他们意外分叉的存储库）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:10:22.640

另一个可能的原因是进行克隆的人想要冻结存储库，因为它在克隆时是他们自己的标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:29:18.940

他们可能会这样做，以防止存储库被删除。他们也可能打算做出改变，但从未真正做到。

# c++ - 优化rcpp代码

> ID：13381714
> 
> 赞同：2
> 
> 时间：2012-11-14T15:23:04.850
> 
> 标签：c++, r, rcpp

我开始尝试使用`rcpp`来提高 R 中 for 循环的速度，其中每次迭代都取决于前一次（即不容易矢量化）。我当前的代码（如下）比 R 快一点，但几乎没有我想象的那么快。有人可以发现以下代码中的任何明显的低效率吗？任何一般（或具体）的建议都会有所帮助。

```
UpdateInfections <- cxxfunction(signature(pop ="data.frame",inds="integer",alpha="numeric",t="numeric"), '
DataFrame DF(pop);
IntegerVector xinds(inds);
NumericVector inf_time = DF["inf.time"];
IntegerVector loc = DF["loc"] ;
IntegerVector Rind = DF["R.indiv"] ;
NumericVector infector = DF["infector"] ;
IntegerVector vac = DF["vac"] ;
NumericVector wts(loc.size());
double xt = Rcpp::as<double>(t);
double xalpha = Rcpp::as<double>(alpha);

RNGScope scope;         // Initialize Random number generator
Environment base("package:base");
Function sample = base["sample"];
int n = loc.size();
int i;int j;int k;
int infsize = xinds.size();

for (i=0;i<infsize;i++) {
   int infpoint = xinds[i]-1;
    NumericVector inf_times_prop(Rind[infpoint]);
    NumericVector inf_me(Rind[infpoint]);

for (j=0; j<n;j++){
  if (j == infpoint){
wts[j] = 0.0;
  } else if (loc[j] == loc[infpoint]){
    wts[j] = 1.0;
  } else {
wts[j] = xalpha;
  }
}

inf_me = sample(n,Named("size",Rind[infpoint]),Named("prob",wts));
//Note that these will be shifted by one

for (k=0;k<Rind[infpoint];k++){
  inf_times_prop[k] = floor(::Rf_rlnorm(1.6,.6) + 0.5 + xt);
  if (inf_times_prop[k] < inf_time[inf_me[k]-1] && vac[inf_me[k]-1] == 0){
    inf_time[inf_me[k]-1] = inf_times_prop[k];
    infector[inf_me[k]-1] = inf_me[k];
  }
}
}

// create a new data frame
Rcpp::DataFrame NDF =
Rcpp::DataFrame::create(Rcpp::Named("inf.time")=inf_time,
                        Rcpp::Named("loc")=loc,
                        Rcpp::Named("R.indiv")=Rind,
                        Rcpp::Named("infector")=infector,
                        Rcpp::Named("vac")=vac);
return(NDF);
' , plugin = "Rcpp" ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:05:43.617

我们现在实际上正在为 RcppArmadillo 开发一个纯 C++ 示例函数。看看这里[http://permalink.gmane.org/gmane.comp.lang.r.rcpp/4179](http://permalink.gmane.org/gmane.comp.lang.r.rcpp/4179)或这里[http://permalink.gmane.org/gmane.comp.lang.r.rcpp](http://permalink.gmane.org/gmane.comp.lang.r.rcpp)以获取更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T15:30:56.760

您正在回拨 R。这不能像纯 C++ 解决方案那样快。

你的例子也很长，太长了。我建议分析和优化各个部分。唉，仍然没有完全免费的午餐。

# php - 如何更改表格字体大小和颜色、Php、Html

> ID：13381717
> 
> 赞同：-3
> 
> 时间：2012-11-14T15:23:12.807
> 
> 标签：php, html-table

我正在尝试增加字体大小并为第一个单元格添加蓝色背景，但我无法管理它。

```
// sending query
$result = mysql_query("SELECT `UserName`,`UserScore` FROM {$table} ORDER BY `UserScore` DESC");
if (!$result) {
    die("Query to show fields from table failed");
}

$fields_num = mysql_num_fields($result);

echo "<table border='1' align='center'><tr>";
// printing table headers
//for($i=0; $i<$fields_num; $i++)
//{
  //  $field = mysql_fetch_field($result);
    echo "<td>Name &nbsp;&nbsp;&nbsp;&nbsp;</td>";
    echo "<td>Score &nbsp;&nbsp;&nbsp;&nbsp;</td>";
//}
echo "</tr>\n";
// printing table rows
while($row = mysql_fetch_row($result))
{
    echo "<tr>";

    // $row is array... foreach( .. ) puts every element
    // of $row to $cell variable
    foreach($row as $cell)

        echo "<td>$cell</td>";

    echo "</tr>\n";
}
mysql_free_result($result); 
```

如何增加字体大小并为上表中的第一个单元格添加蓝色背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:51:32.013

希望这可以帮助！

```
<?php
$result = mysql_query("SELECT `UserName`,`UserScore` FROM {$table} ORDER BY `UserScore` DESC");
if (!$result) {
    die("Query to show fields from table failed");
}

$fields_num = mysql_num_fields($result);

echo "<table border='1' align='center'><tr>";
// printing table headers
//for($i=0; $i<$fields_num; $i++)
//{
  //  $field = mysql_fetch_field($result);
    echo "<td>Name &nbsp;&nbsp;&nbsp;&nbsp;</td>";
    echo "<td>Score &nbsp;&nbsp;&nbsp;&nbsp;</td>";
//}
echo "</tr>\n";
// printing table rows
while($row = mysql_fetch_row($result))
{
    echo "<tr>";

    // $row is array... foreach( .. ) puts every element
    // of $row to $cell variable
    $i = 0;
    foreach($row as $cell)
    {
       if($i == 0)
           $class = "class = 'backg'";
       else
           $class = "class = ''";
        echo "<td ".$class.">$cell</td>";

     $i++;
    }
    echo "</tr>\n";
}
mysql_free_result($result);
?> 
```

这里的风格

```
<style>
.backg{background:blue;font-size:18px;}
</style> 
```

# mercurial - 水银结账

> ID：13381718
> 
> 赞同：0
> 
> 时间：2012-11-14T15:23:15.113
> 
> 标签：mercurial

您好，我正在使用 Mercurial 对我的所有项目进行版本控制。我的项目有这样的文件夹结构。

```
www.Project.com
    01 – Consultancy(excluded)
    02 – Information Architecture
    03 – Content
    04 – Branding
        Fonts (excluded)
        Guidelines
        Logo
    05 – Design
        Graphics
        Stock Photography
    06 – Code WP-Content
        Plugins
        Themes
    07 – Marketing
        Email
        SEO
        Social Media 
```

完成静态 HTML 后，我喜欢设置一个 Wordpress 主题。但我不喜欢在我的 web 目录中有整个文件夹结构。有没有办法只将插件和主题文件夹推送到 Wordpress 而没有其他目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:32:53.817

感谢你的回答。

我决定通过在我的网络服务器上为 *www.Project.com/06 – Code WP-Content*路径创建别名来解决这个问题，其余部分保持不变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:44:26.333

尝试使用 .hgignore 功能 - 请参见[此处](https://www.mercurial-scm.org/wiki/.hgignore)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:58:45.577

您应该为`06 – Code WP-Content`. 这样你就可以单独推动它。如果所有内容都在一个存储库中，则您必须推送所有内容。

# java - 使用集合时的java无限循环

> ID：13381720
> 
> 赞同：0
> 
> 时间：2012-11-14T15:23:32.773
> 
> 标签：java, collections, linked-list, stack-overflow, infinite-loop

请建议我解决以下无限循环。类对象包含相同类型对象的集合。在转换为 String 时，该对象调用集合中每个对象的 toString。因此它导致无限循环。请不要使用任何静态变量。

```
import java.util.LinkedList;

/**
 *
 * @author ranga
 */
public class MyList  {
    LinkedList<Object> l1,l2;

    MyList() {
        l1 = new LinkedList<Object>();
        l2 = new LinkedList<Object>();
        l2.add(l1);
        l1.add(l2);
    }

    @Override
    public String toString() {
        return l1.toString();
    }

    public static void main(String ...args) {
        MyList m = new MyList();
        System.out.println(m);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:26:06.380

不要将链表添加到自身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:02:03.717

我将假设您*有意*创建了一个循环数据结构作为示例，并且您确实*希望*能够生成循环图的字符串渲染。

答案并不简单。

首先，您需要在不进入循环的情况下执行（可能）循环图的遍历。基本算法是这样的：

```
public void traverse(List<?> graph) {
    doTraverse(graph, new IdentityHashMap<?, ?>());
}

private void doTraverse(List<?> graph, IdentityHashMap<?, ?> visited) {
    if (visited.get(graph) == null) {
        visited.put(graph, graph);
        for (Object element : graph) {
            if (element instanceof List<?>) {
                doTraverse((List<?>) element, visited);
            }
        }
    }
} 
```

该`visited`地图允许遍历不访问它已经访问过的节点。

* * *

问题的第二部分是修改代码以进行渲染。在这一点上，您必须决定*如何*在图形中呈现循环......在输出是字符序列的上下文中。

显而易见的方法是给事物贴上标签。例如，我们可以写一个渲染`l1`为

```
1: [2: [1] ] 
```

（每个列表都表示为a `[ ... ]`，`n:`表示后面的东西有一个“标签” `n`。当我们遇到一个我们已经看到的“节点”时，我们使用一个标签；例如`1`上面的第二个指的是我们标记的列表作为`1`。）

给定这样的表示，我们可以修改`doTravers`方法以获取额外的`StringBuilder`参数，并更改`IdentityHashMap`以将标签字符串保存为值。其余的非常简单。

这种方法的问题是：

*   渲染不是很可读......尤其是对于更大和/或更复杂的图形结构。
*   该算法需要知道如何对所涉及的特定类型进行遍历和渲染。很难以通用的、独立于数据结构的方式实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:31:12.220

是我还是递归调用 ToString() 方法总是递归调用自己，并且没有一个递归调用可以停止的情况？如果是这样，您需要一些条件来退出递归调用自身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:46:27.147

There is nothing wrong with the `toString()` method. By default, it prints all elements in a collection by iterating over them (look in the implementation of [AbstractCollection.toString()](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractCollection.html#toString%28%29)). The problem that you are having is that by adding a list as an element to the other (and the other way around). When `l1` is printed, it calls the `toString()` method of `l2` (because that it is first element), which in turns prints the element one by one, and since `l2`'s first element is `l1` it calls the `toString()` method of it, and so on...

In short, don't short-circuit lists by adding them as elements to each other.

# python - 重叠、密集绘制的图表的透明度问题

> ID：13381724
> 
> 赞同：1
> 
> 时间：2012-11-14T15:24:11.520
> 
> 标签：python, matplotlib

我正在为多核服务器生成每个核心的 cpu 利用率基本 matplotlib 线图。每个连续数据系列的线图相互叠加，因此要绘制的第一个系列的图形通常隐藏在其他系列的后面。

我已经设法通过逐步减少我正在绘制的每个系列的 alpha 来改进情节，但问题是通常后面的系列非常“忙”。同一条线在相同的像素上重复绘制，因此即使 alpha 较低，它仍然会掩盖其后面的所有数据。

理想情况下，每条线的颜色和 alpha 应该只应用于每个像素一次，无论该线实际穿过像素的频率如何。我想做的是像在一个单独的“层”上绘制每个系列，然后一次性将 alpha 应用到整个层，所以在任何给定像素上绘制一条线的频率无关紧要。我希望这是有道理的。有任何想法吗？

# admin - 管理菜单中的自动链接

> ID：13381729
> 
> 赞同：0
> 
> 时间：2012-11-14T15:24:19.583
> 
> 标签：admin, opencart

我已经按照这个小教程做了我需要的东西： [Stackoverflow - 自定义管理页面](https://stackoverflow.com/questions/10700761/how-to-create-a-custom-admin-page-in-opencart)

但是现在我需要在管理菜单中放置一个链接，当我将文件上传到服务器时会自动...

我该怎么做？:s 用谷歌搜索它，但我想我找不到答案 :s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:54:50.597

当您将文件上传到服务器时，这无法自动完成。您需要创建一个 vQmod 来编辑管理头文件以插入它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:38:38.507

您应该告诉我们您使用的是什么版本的 opencart，您是否有 vqmod（您是否打算使用它），以及您希望该页面链接显示在管理面板的哪个位置。

您需要安装[vqmod](http://code.google.com/p/vqmod/)（按照说明进行操作）

创建 .xml 文件，将其保存到 vqmod XML 文件夹并将其放入其中

```
<modification>
    <id>Add a link</id>
    <version>1.5.4</version>
    <vqmver>0.1</vqmver>
    <author>Jeffrey Murdock</author>

    <!-- edit header controller -->
    <file name="admin/controller/common/header.php">
    <!-- create link to your page -->   
        <operation error="log">
            <search position="after"><![CDATA[$this->data['setting'] = $this->url->link('setting/store', 'token=' . $this->session->data['token'], 'SSL');]]></search>
            <add><![CDATA[
            $this->data['hello_world'] = $this->url->link('custom/helloworld', 'token=' . $this->session->data['token'], 'SSL');
            ]]></add>
        </operation>
    <!-- / -->
    </file>

    <!-- edit header template -->
    <file name="admin/view/template/common/header.tpl">
    <!-- add link to your page -->  
        <operation error="log">
            <search position="before" offset="1"><![CDATA[<ul class="right">]]></search>
            <add><![CDATA[
            <li><a class="top">Your link</a>
                <ul>
                    <li><a href="<?=$hello_world;?>">Hello World</a></li>
                </ul>
            </li>
            ]]></add>
        </operation>
    <!-- / -->
    </file> 

</modification> 
```

如果你正确安装了 vqmod，并且有 opencart 1.5.4 版本，这应该会在你的管理员顶部菜单中显示链接。

# java - @使用多个键缓存

> ID：13381731
> 
> 赞同：16
> 
> 时间：2012-11-14T15:24:25.700
> 
> 标签：java, spring, caching, methods

我有一个接受 DTO 并返回一些结果的服务：

```
@Override
public int foo(Bar bar) {
    ....
} 
```

条形如下（简化）：

```
public class Bar {
    public int id;
    public String name;
    public String baz;

    @Override
    public int hashCode() {
        //this is already being defined for something else
        ...
    }

    @Override
    public boolean equals(Object o) {
        //this is already being defined for something else
        ...
    }
} 
```

我想在 foo 方法上使用 @Cacheable；但是，我想对 id 和 name 属性进行哈希处理，而不是 baz。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-06-12T20:19:09.177

您也可以使用这种方法

```
@Override
@Cacheable(key="{#bar.name, #bar.id}")
public int foo(Bar bar) {
    ....
} 
```

建议不要在多个方法参数上使用 hashcode 作为键 [@Cacheable 键](https://stackoverflow.com/questions/14072380/cacheable-key-on-multiple-method-arguments)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-14T15:51:11.210

是的，您可以按照以下几行指定使用 Spring-EL 表达式：

```
@Override
@Cacheable(key="#bar.name.concat('-').concat(#bar.id)")
public int foo(Bar bar) {
    ....
} 
```

或在 bar 上定义修改后的 hashCode 并调用：

```
@Override
@Cacheable(key="#bar.hashCodeWithIdName")
public int foo(Bar bar) {
    ....
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-20T10:19:49.140

您可以使用 Spring SimpleKey 类

```
@Cacheable(value = "barCache", key = "new org.springframework.cache.interceptor.SimpleKey(#bar.id, #bar.name)") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-23T14:33:11.170

@Biju 和 @vsingh 的两个答案都是正确的；`Bar`但如果您尝试缓存的对象很复杂，或者该`foo`方法包含大量参数，使用 SpEL 可能不是生成密钥的最理想解决方案，我想再添加一个替代方案。

或者，您可能要考虑`keyGenerator`.

例子：

```
@Override
@Cacheable(value="barCahceKey", keyGenerator="barKeyGenerator")
public int foo(Bar bar) {
  ....
}

@Component
public class BarKeyGenerator implements KeyGenerator {
@Override
public Object generate(Object o, Method method, Object... objects) {
      // TODO logic to generate unique key
      return "Bar_Key_Generator_With_Params_etc";
    }
} 
```

使用这种方法，您可以完全灵活地构建密钥。

[密钥生成器 API](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/cache/interceptor/KeyGenerator.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-02-28T05:32:32.573

来自同一个Object的keys，可以使用object.hashCode()，所以不需要一一指定特定keys

```
@Override
@Cacheable(key="#bar.hashCode()")
public int foo(Bar bar) {
    ....
} 
```

或者，如果您有一个对象和另一个键

```
@Override
@Cacheable(key="{#bar.hashCode(), #anotherKey}")
public int foo(Bar bar) {
    ....
} 
```

我认为这是一个更好的解决方案。

# c# - 将一个简单的布尔值从 javascript 发送到 ac# web 服务

> ID：13381736
> 
> 赞同：0
> 
> 时间：2012-11-14T15:24:42.600
> 
> 标签：c#, asp.net, web-services, umbraco

[我意识到这似乎是一个愚蠢的问题，但我迷路了。]

使用 umbraco 4.9 我有一个多语言站点，我在其中创建了一个事件处理程序，将内容节点复制到所有语言，因为它们是在后台创建的所有语言。我现在正在尝试将其附加到自定义上下文菜单项（umbraco.interfaces.IAction），以便为创建者提供选择。

在上下文菜单项中，只能将 javascript 函数作为字符串调用。我不应该触摸 umbraco 代码本身，那么如何将值传递给 Web 服务？我在哪里包含参考？

这就是我目前所拥有的：

```
public string JsSource
{
     get 
     { 
         return "function AddItem(){" +
                 "var multiLang = confirm('Create for all languages?');" +
                  //"$.ajax({" +
                  //"type: 'Post'," +
                  //"url: 'TryAgain.aspx/' + SendMultiVal" +
                  //"data: multiLang})" +
                  //"PageMethods.SendMulti(multiLang);}" +
                  string.Format("{0}.actionNew()", ClientTools.Scripts.GetAppActions)+"};"; 
     }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:53:07.660

因此，您需要做的第一件事是将布尔值存储在一个名为 boolvalue 的变量中，然后在获得该值后调用 callservice 函数。例如：

```
 CallService("POST", "YourServiceUrl",boolvalue,
        function (data) {
            alert("Service Call Success");
        },
        function (result) {
            alert('Service call failed: ' + result.status + '' + result.statusText);
        }); 
```

如果它返回一些数据，这将进行服务调用并从服务中获取数据。

```
 CallService = function (method, serviceUrl, value, successHandler, errorHandler) {
    $.ajax({
        type: method,
        url: serviceUrl,
        contentType: "application/text; charset=utf-8",
        dataType: "json",
        data:JSON.stringify(value),
        success: successHandler,
        error: errorHandler
    });
}; 
```

根据您从服务发送和接收的数据类型修改 dataType 和 dataType 字段。如果您需要更多信息，请查看：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

让我知道这是否适合您。

# c# - 我无法使用实体框架保存数据

> ID：13381738
> 
> 赞同：2
> 
> 时间：2012-11-14T15:24:49.790
> 
> 标签：c#, asp.net, database, objectcontext

我使用此代码将一项添加到`SpareParts`我的数据库中的表中。

```
try
{
    Database1Entities _db = new Database1Entities();

    SparePart sparePart = new SparePart();
    sparePart.manufactureID = 2;
    sparePart.name = "detail";

    _db.SpareParts.AddObject(sparePart);

    int changesNumber = _db.SaveChanges(System.Data.Objects.SaveOptions.AcceptAllChangesAfterSave);

    int count = _db.SpareParts.Count();
    int i = 8 + 1;
}
catch (Exception e)
{
    Console.WriteLine(e.Message);
} 
```

我试过了`_db.SaveChanges()`。那没有帮助。

我没有任何例外。如果我开始调试 4 次，我会看到 count = 4。我可以遍历我的所有项目。但是如果我等待 1 分钟并再次开始调试，我会看到 count = 1。所以看来我的更改仍然不在数据库中。

# cmake - cmake 在安装期间排除可执行文件

> ID：13381742
> 
> 赞同：5
> 
> 时间：2012-11-14T15:25:02.063
> 
> 标签：cmake

如何配置/破解 cmake 以构建使用 add_executable() 添加的特定可执行文件但不安装它？

可执行文件是一个单元测试，最终将使用 add_test 处理，但现在我只想从版本中剥离测试二进制文件，尽可能少地接触。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-19T21:57:56.723

由于 EXCLUDE_FROM_ALL[与 INSTALL 结合使用时具有未定义的行为](http://www.cmake.org/cmake/help/v2.8.11/cmake.html#command:install)（cmake 会尝试警告您，是否设置了 OPTIONAL 无关紧要），保证工作的解决方案更加复杂。

你应该：

*   [删除“安装”目标对“全部”目标的依赖](http://www.cmake.org/Wiki/CMake_Useful_Variables#Various_Options)（一次，在主 CMakeLists.txt 中）：

    `set(CMAKE_SKIP_INSTALL_ALL_DEPENDENCY true)`

*   将 OPTIONAL 添加到测试库中的 INSTALL 语句。请注意我[在此处报告的 CMake 可能存在的错误](https://stackoverflow.com/a/17201375/2436175)

*   [根据正在构建的整个项目，](https://stackoverflow.com/questions/6372150/cmake-add-custom-target-depending-on-whole-project-being-built/17180923#17180923)分别收集要包含在自定义“all_but_tests”CMake add_custom_target 中的所有目标 （最困难的步骤）

*   创建一个[自定义 all_but_tests 目标](http://www.cmake.org/cmake/help/v2.8.11/cmake.html#command:add_custom_target)：

    `add_custom_target(all_but_tests DEPENDS <<list of targets>>)`

*   将目标安装的依赖项添加到 all_but_tests

    `add_dependency(install all_but_tests)`

    （对不起，这个我没试过，欢迎反馈）

*   创建[自定义测试目标](http://www.cmake.org/cmake/help/v2.8.11/cmake.html#command:add_custom_target)：

    `add_custom_target(my_tests DEPENDS <<list of tests>>)`

然后（假设您使用的是 make，但也适用于忍者）：

*   您可以调用`make install`，它会触发`make all_but_tests`，并在构建完成后安装。

*   您可以调用`make my_tests`, 然后`make install`, 在这种情况下它将安装所有内容。您可以像这样连接命令

    `make my_tests && make install`

    或者，因为在这种情况下没有区别：

    `make [all] && make install`

我被这个问题所吸引是因为我最近不得不面对一个类似的问题：[Installing only one target and its dependencies](https://stackoverflow.com/q/17164731/2436175)

**编辑：**

`add_dependency(install all_but_tests)`可能[行不通](https://stackoverflow.com/questions/9163176/cmake-add-depedency-to-the-install-target)。

因此，要么[使用适当的解决方法](https://stackoverflow.com/a/8643015/2436175)，要么调用

`make all_but_tests && make install`

每次你想安装“all_but_tests”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T15:48:25.330

如果您将函数应用到它，CMake 只会安装一个可执行目标`install`，即：

```
 install(TARGETS ExecutableTest RUNTIME DESTINATION "bin") 
```

要防止安装`ExecutableTest`for`Release`构建，请添加`CONFIGURATIONS`限制：

```
 install(TARGETS ExecutableTest RUNTIME DESTINATION "bin" CONFIGURATIONS Debug) 
```

或者，您可以创建`ExecutableTest`一个默认不构建的可选目标：

```
add_executable(ExecutableTest EXCLUDE_FROM_ALL ${ExecutableTestFiles}) 
```

然后可选地仅安装`ExecutableTest`它是否已明确构建：

```
 install(TARGETS ExecutableTest RUNTIME DESTINATION "bin" OPTIONAL) 
```

所有可选的测试目标都可以集中在一个超级目标中，以便一步构建它们：

```
add_custom_target(MyTests DEPENDS ExecutableTest ExecutableTest2 ExecutableTest3) 
```

# asp.net-mvc-3 - 根据选择的另一个网格值过滤 kendoui 网格

> ID：13381744
> 
> 赞同：0
> 
> 时间：2012-11-14T15:25:06.183
> 
> 标签：asp.net-mvc-3, kendo-ui

```
I have grid in index page and i have another grid in Data page. 
```

在索引页面上的网格上，我单击单击查看记录，然后重定向到也包含网格的数据页面。我的问题是如何根据索引页面中网格中的选定记录过滤数据页面中的网格。

如您所见，在 GetAllList 方法中，我尝试使用来自索引页面上的网格的 rListID 过滤网格。

请告知我如何实现这一目标。谢谢

```
Index page (View)

    @(Html.Kendo().Grid<HApp.Models.SModel>()

        .Name("Grid")
        .HtmlAttributes(new { @Style = "align:center; font-size:10.5px; length:100%" })
        .Columns(columns =>
        {

            columns.Bound(p => p.RListID).Visible(false);
            columns.Bound(p => p.TListID).Visible(false);
            columns.Command(commands => commands.Edit()).Width(175);
            columns.Command(command => command.Custom("View").Click("OnshowDetails")).Width(150);

        })

        .Selectable(s => s.Mode(Kendo.Mvc.UI.GridSelectionMode.Single))
        .Pageable()
        .Scrollable()
        .DataSource(dataSource => dataSource
            .Ajax()//bind with Ajax instead server bind
            .PageSize(10)
            .ServerOperation(true)
                .Model(model => model.Id(p => p.RListID))

            .Read(read => read.Action("GetCData", "CDetails").Type(HttpVerbs.Get))

        )
        //.Events(events => events
        //                        .Change("change"))

    )

    <script type="text/javascript">

        function OnshowDetails(e) {
           var grid = $('#Grid').data('kendoGrid');   //get a reference to the grid data 
           var record = grid.dataItem(grid.select()); //get a reference to the currently selected row
           var rListID = record.RListID;

           window.location.href = "@Url.Action("Data ", "CDetails")" + "/?rListID =" + rListID ; 

        }
    </script>

Data Page View

@(Html.Kendo().Grid<HApp.Models.SListsModel>()

    .Name("SList")
    .HtmlAttributes(new { @Style = "align:center; font-size:10.5px; length:100%" })
    .Columns(columns =>
    {
        columns.Bound(p => p.RListID).Visible(false);
        columns.Bound(p => p.CCID);

        columns.Command(commands => commands.Edit()).Width(175);      
    })

    .Pageable()
    .Selectable(s => s.Mode(Kendo.Mvc.UI.GridSelectionMode.Single))
    .Scrollable()
    .DataSource(dataSource => dataSource
        .Ajax()//bind with Ajax instead server bind
        .PageSize(5)
        .ServerOperation(true)
        .Model(model => model.Id(p => p.CID))

        .Read(read => read.Action("GetListData", "CDetails").Type(HttpVerbs.Get))

    )
    .Events(events => events
                            .Change("change"))

)

Controller:

    public ActionResult Index()
    {

                return View();

    }

    public ActionResult Detail()
    {

            return View();
    }

/// <summary>
        /// Bind to GetListData
        /// </summary>
        /// <param name="request"></param>
        /// <returns></returns>
        public ActionResult GetListData([DataSourceRequest] DataSourceRequest request)
        {
            Response.Cache.SetCacheability(HttpCacheability.NoCache);
            return Json(GetAllList().ToDataSourceResult(request), JsonRequestBehavior.AllowGet);
        }

         private static IEnumerable<SListsModel> GetAllList(Guid rListID)
        {

            var context = new HEntities();

            return context.SLists
                .Where(filter => filter.RListID== rListID)
                .Select(s_list => new SessionListsModel
                {

                    RListID = s_list.RListID,
                    CCID = s_list.CCID,

                });

        }

 public ActionResult GetCData([DataSourceRequest] DataSourceRequest request)
        {
            Response.Cache.SetCacheability(HttpCacheability.NoCache);
            return Json(GetAllComList().ToDataSourceResult(request), JsonRequestBehavior.AllowGet);
        }

        /// <summary>
        /// Get all available session from Session table
        /// </summary>
        /// <returns></returns>
        private static IEnumerable<SModel> GetAllComList()
        {
            var context = new HEntities();

            return context.SM
                .Select(com_list => new SModel
                {
                    RListID = com_list.RListID,
                    PortID = com_list.PortID ,

                });

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:33:03.133

要设置 Grid 的初始过滤，我建议您使用 DataSource 配置器对象的**Filter**方法。

```
.DataSource(dataSource => dataSource
            .Ajax()                
            .Filter(flt=>flt.Add(c=>c.RListID).EndsWith(rListIDValuePassedFromController)) 
```

# shell - tr [:upper:] [:lower:] 带有西里尔文字

> ID：13381746
> 
> 赞同：16
> 
> 时间：2012-11-14T15:25:07.077
> 
> 标签：shell, unicode, tr

我正在尝试从俄罗斯短篇小说中提取单词列表。

```
#!/bin/sh

export LC_ALL=ru_RU.utf8

sed -re 's/\s+/\n/g' | \
sed 's/[\.!,—()«»;:?]//g' | \
tr '[:upper:]' '[:lower:]' | \
sort | uniq 
```

但是，该`tr`步骤不是将西里尔大写字母小写。我以为我很聪明地使用了可移植的字符类！

```
$ LC_ALL=ru_RU.utf8 echo "Г" | tr [:upper:] [:lower:]
Г 
```

如果它是相关的，我通过从 Chrome 浏览器窗口复制粘贴到 Vim 来获得俄语文本。它在屏幕上看起来很正确（Putty 终端）。这是在 Cygwin 的 bash shell 中——它应该与 Linux 上的 Bash 相同（应该！）。

什么是在管道中小写 unicode 文本的便携、可靠的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T16:40:14.657

这是我在[Wikipedia](http://en.wikipedia.org/wiki/Tr_%28Unix%29)上找到的（但没有任何参考）：

> 大多数版本`tr`，包括`GNU tr`经典的 Unix `tr`，都对单字节字符进行操作，并且不兼容 Unicode。一个例外是[Heirloom Toolchest](http://en.wikipedia.org/wiki/Heirloom_Project)实现，它提供基本的 Unicode 支持。

此外，[这](http://www.mail-archive.com/bug-coreutils@gnu.org/msg16642.html)是旧的但相关的。

正如我在评论中提到的，`sed`似乎有效（`GNU sed`至少）：

```
$ echo 'СТЭК' | sed 's/[[:upper:]]*/\L&/'
стэк 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-19T10:29:41.770

这对我有用：

```
echo ЫЕРУНКЫКТ | sed -e 's/\(.*\)/\L\1/' 
```

# windows-phone-8 - 使用 LongListSelector 进行连续分页

> ID：13381752
> 
> 赞同：6
> 
> 时间：2012-11-14T15:25:26.243
> 
> 标签：windows-phone-8

当我的 LongListSelector 滚动到底部时，我想自动从 Web 服务加载更多数据。就像商店应用一样。我的问题是我找不到任何事件来触发加载更多操作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T17:28:41.180

Microsoft 的建议是使用 LongListSelector.ItemRealized 事件，检查它是否是列表中要“实现”的最后一项（或第 N 个最后一项），如果是，它将开始获取新记录。在 UX 方面，最好当时在 SystemTray 上显示 ProgressIndicator，不要尝试用内联微调器模仿 iOS。

LongListSelector.ItemRealized 实际上是一个非常有趣的事件，因为它会在 Item 数据绑定到虚拟化 ListBoxItem 时触发。这意味着 LongListSelector 虚拟化逻辑认为它需要准备 FrameworkElement 以显示在屏幕上。ListBoxItem 可能尚未出现在屏幕上，也可能尚未出现，但这是一个很好的迹象，表明它正在到达那里。

有关代码示例，请参阅 @ [http://code.msdn.microsoft.com/wpapps/TwitterSearch-Windows-b7fc4e5e](http://code.msdn.microsoft.com/wpapps/TwitterSearch-Windows-b7fc4e5e)

```
 void resultListBox_ItemRealized(object sender, ItemRealizationEventArgs e)
    {
        if (!_viewModel.IsLoading && resultListBox.ItemsSource != null && resultListBox.ItemsSource.Count >= _offsetKnob)
        {
            if (e.ItemKind == LongListSelectorItemKind.Item)
            {
                if ((e.Container.Content as TwitterSearchResult).Equals(resultListBox.ItemsSource[resultListBox.ItemsSource.Count - _offsetKnob]))
                {
                    Debug.WriteLine("Searching for {0}", _pageNumber);
                    _viewModel.LoadPage(_searchTerm, _pageNumber++);
                }
            }
        }
    } 
```

# android - 进度对话框的dismiss() 方法不起作用

> ID：13381755
> 
> 赞同：0
> 
> 时间：2012-11-14T15:25:44.357
> 
> 标签：android, progressdialog, dismiss

您之前可能遇到过同样的问题，对此我很抱歉，但我真的需要问这个问题。我正在尝试显示进度对话框，然后将其关闭，但我无法做到。我进行了很多搜索并尝试了很多方法，但无法真正通过。我从图库中挑选后上传图片。在上传期间我想显示对话框，上传对话框后应该关闭这是我的代码。

```
public class FaceActivity extends Activity {
 private static int RESULT_LOAD_IMAGE = 1;
 private Button upbtn;
 public Bitmap bm;
 public ByteArrayOutputStream bos;
 public byte[] bitmapdata;
 public String picturePath;
 private ProgressDialog pd;
 private BitmapFactory.Options options;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_face);

    //pd = new ProgressDialog(FaceActivity.this);

    upbtn = (Button) findViewById(R.id.buttonLoadPicture);
    upbtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            Intent i = new Intent(
                    Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

            startActivityForResult(i, RESULT_LOAD_IMAGE);

        }
    });
}
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);

            if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
                Uri selectedImage = data.getData();
                String[] filePathColumn = { MediaStore.Images.Media.DATA };

                Cursor cursor = getContentResolver().query(selectedImage,
                        filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                picturePath = cursor.getString(columnIndex);
                cursor.close();

                options = new BitmapFactory.Options();
             // will results in a much smaller image than the original
                options.inSampleSize = 8;

                upload();

            }

            }

    public void upload(){

   // Here I am showing the dialog 
        pd = ProgressDialog.show(FaceActivity.this, "Please Wait", "Loading...", true, false);
        bm = BitmapFactory.decodeFile(picturePath);
        bos = new ByteArrayOutputStream(); 
        bm.compress(Bitmap.CompressFormat.JPEG, 40 , bos);
        bitmapdata = bos.toByteArray();

        ParseFile file = new ParseFile("pic.jpg", bitmapdata);
        file.saveInBackground();

        ParseObject po = new ParseObject("Images");       
        po.put("Images", file);
        po.saveInBackground();

        ImageView imageView = (ImageView) findViewById(R.id.targetimage);

        imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath,options));
// want to dismiss dialog here 
        pd.dismiss();
        Toast.makeText(this, "Image Uploaded Successfully", Toast.LENGTH_LONG).show();
    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_face, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:37:48.153

尝试在 asyc 任务中执行此操作。

```
private class asynUpload extends AsyncTask<String, Void, Integer> {
protected Integer doInBackground(String... params) {
try {
     runOnUiThread(new Runnable() {
            public void run() {
                pd = ProgressDialog.show(FaceActivity.this, "Please Wait", "Loading...", true, false);
        }
       });

bm = BitmapFactory.decodeFile(picturePath);
    bos = new ByteArrayOutputStream(); 
    bm.compress(Bitmap.CompressFormat.JPEG, 40 , bos);
    bitmapdata = bos.toByteArray();

    ParseFile file = new ParseFile("pic.jpg", bitmapdata);
    file.saveInBackground();

    ParseObject po = new ParseObject("Images");       
    po.put("Images", file);
    po.saveInBackground();

    ImageView imageView = (ImageView) findViewById(R.id.targetimage);

    imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath,options));

} catch (Exception e) {             
        return 0;
}
return 1;
}

protected void onPostExecute(Integer result) {
     try {
              runOnUiThread(new Runnable() {
        public void run() {
                       pd.dismiss();
        }
       });

    } catch (Exception e) {}

      super.onPostExecute(result);
}
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:04:33.717

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) 

{

   super.onActivityResult(requestCode, resultCode, data);

   if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) 

      {

         Uri selectedImage = data.getData();

         String[] filePathColumn = { MediaStore.Images.Media.DATA };

         Cursor cursor = getContentResolver().query(selectedImage,filePathColumn, null, null, null);
         cursor.moveToFirst();

         int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
         picturePath = cursor.getString(columnIndex);
         cursor.close();

          options = new BitmapFactory.Options();
          // will results in a much smaller image than the original
          options.inSampleSize = 8;

          // use the task here 
          new asynUpload().execute();

      }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:55:29.747

You can look here for the idea you've been looking for implementing a background process: [doInBackground not working in Android fragment](https://stackoverflow.com/questions/13379456/doinbackground-not-working-in-android-fragment)

# selenium - 使用名称在 selenium 中选择下拉值

> ID：13381762
> 
> 赞同：1
> 
> 时间：2012-11-14T15:26:04.633
> 
> 标签：selenium, selenium-rc, selenium-webdriver, selenium-ide

下面是我的代码。

这是我的组合框/下拉框

```
<TR id="oldcontent" bgcolor="#D0D0D0">
<TD ALIGN="left" id="oldcontent">
<select name="status" style="width=150" id="newcontentformat">
<option value="15">Approved1</option>
<option value="16">Approved2</option>
<option value="17">Approved3</option>
</TD>
</TR> 
```

我如何选择 Approved2 的值？有人可以帮我处理 xpath 吗？

我尝试了以下..但它不起作用

```
selenium.select("//select[@name='status']",Approved2);
selenium.select("status",Approved2); 
```

我也有多个，我需要首先选择存在的组合框。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:58:44.910

该方法的第二个参数必须是一个字符串。尝试：

```
selenium.select("//select[@name='status']", "Approved2"); 
```

# java - 如何扩展列表中包含的对象？

> ID：13381774
> 
> 赞同：2
> 
> 时间：2012-11-14T15:26:32.233
> 
> 标签：java, generics, inheritance

我有一个名为 resourceItems 的列表，其中包含 ResourceItem 对象。

```
 public class ResourceItem {
        private Long id;
        private String name;
        public ResourceItem(Long id, String name) {
            this.id = id;
            this.name = name;
        }
        // getters and setters...
    }

    public class SomeClass {
        private List<ResourceItem>  resourceItems = FindAllResourcesWebSerbice();
    } 
```

我想扩展列表中的对象以包含一个名为 selected 的布尔字段。

我尝试了几种扩展 ResourceItem 的类的变体（见下文），包括使用泛型的选项，但都没有成功。我想要一个使用泛型进行重用的解决方案。

```
 public class ExtendedResourceItem extends ResourceItem {
        private boolean selected = false;
        public ExtendedResourceItem() {
        }

        public boolean isSelected() {
            return selected;
        }

        public void setSelected(boolean selected) {
            this.selected = selected;
        }
    }

    public class SomeClass {
        private List<ResourceItem>  resourceItems = FindAllResourcesWebSerbice();
        private List<ExtendedResourceItem> extendedResourceItem = resourceItems;
    } 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:44:29.417

假设`ResourceItem`实现`equals`并且`hashCode`正确，为什么不保留一组被选中的：

```
Set<ResourceItem> selectedResourceItems = new HashSet<ResourceItem>(); 
```

然后，您可以在选择时将[`add`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#add%28E%29)一个项目添加到集合中，在取消选择时将其添加到集合中，并在您需要知道它是否被选中时[`remove`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#remove%28java.lang.Object%29)检查是否集合。[`contains`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#contains%28java.lang.Object%29)

此解决方案与[Michael Myers](https://stackoverflow.com/questions/13381774/how-to-extend-objects-contained-in-a-list/13382114#comment18274953_13381774)关于使用`Map<ResourceItem, Boolean>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:18:56.877

是泛型限制令人困惑吗？尝试使用[上界通配符](http://docs.oracle.com/javase/tutorial/java/generics/upperBounded.html)，例如

```
public class SomeClass {
    private List<ExtendedResourceItem> extendedResourceItems = FindAllResourcesWebSerbice();
    private List<? extends ResourceItem> resourceItems = extendedResourceItems;
} 
```

或者：

```
public class SomeClass {
    private List<? extends ExtendedResourceItem> extendedResourceItems = FindAllResourcesWebSerbice();
    private List<? extends ResourceItem> resourceItems = extendedResourceItems;
} 
```

有关通配符[通配符和子类型](http://docs.oracle.com/javase/tutorial/java/generics/subtyping.html)的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:53:21.137

但是使用您的代码段：

```
private List<ResourceItem> resourceItems = ... \\ some assignment;
private List<ExtendedResourceItem> extendedResourceItems = resourceItems; 
```

是绝对错误的。由于没有任何 ResourceItem 保证也是 ExtendedResourceItem。（resourceItems 列表可以包含属于 ResourceItem 但不是 ExtendedResourceItem 的对象）。

我看不到您想要达到的目的，但是如果您想将 resourceItems 转换为具有`selected`属性的 resourceItems 列表，那么这个概念呢：

```
public class ExtendedResourceItem {
    private ResourceItem item = null;
    private boolean selected = false;

    public ExtendedResourceItem(ResourceItem item, boolean selected) {
        this.item = item;
        this.selected = selected;
    }

    // ... getters and setters
}

public class SomeClass {
    private List<ResourceItem> resourceItems = FindAllResourcesWebSerbice();

    private List<ExtendedResourceItem> extendedResourceItems = new ArrayList<ExtendedResourceItem>();
    for (ResourceItem item: resourceItems) {
        extendedResourceItems.add(new ExtendedResourceItem(item, false));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:49:44.800

您应该在这里使用组合，而不是继承。根据您的描述，它听起来像是`ResourceItem`一个域对象，但在屏幕上，您应该将其包装起来

```
class ScreenResourceItem {
    ResourceItem item;
    boolean selected;
} 
```

创建一个新列表`ScreenResourceItem`并将所有包装`ResourceItem`的 s 放入其中。

泛型和列表协方差在这里不相关。

# asp.net-mvc-4 - 捆绑从 CDN 提供的多个 CSS？

> ID：13381780
> 
> 赞同：14
> 
> 时间：2012-11-14T15:26:48.477
> 
> 标签：asp.net-mvc-4, cdn, bundling-and-minification

我们正在研究**ASP.NET MVC 4的新****捆绑**功能，并想知道捆绑**从 CDN 提供的****CSS 文件**是否有任何优势？

 ******有没有办法在 ASP.NET MVC 4 中捆绑从 CDN 提供的多个文件？这不起作用：

```
var cdnCssPath = "http://MyCdn/css/";    
bundles.Add(new StyleBundle("~/Content/css", cdnCssPath)
            .Include("~/Content/site.css")
            .Include("~/Content/Test1.css")
            .Include("~/Content/Test2.css")
            .Include("~/Content/Test3.css")
            ); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-27T11:22:48.943

首先，这取决于您是否有权访问可以上传自己的文件的 CDN，或者您是否使用例如 google 的 CDN 来获取 jQuery 等外部库。

如果您从 CDN 提取文件并捆绑它们，您将失去使用 CDN 的优势，除非您能够将新捆绑的文件上传到 CDN。

例如，如果您从 google 的 CDN 获取 jQuery 和 jQuery UI 并将它们捆绑，您将不再使用 google 的 CDN，而是提供本地资源（创建的捆绑包）。您可能已经减少了请求的数量，但是谷歌的 CDN（很有可能已经被用户浏览器缓存）不是 2 个请求，而是对您的服务器的一个请求（不太可能被缓存）。

所以简而言之，我会说将来自 CDN 的文件捆绑在一起没有任何优势，但是将捆绑的文件上传到 CDN 是另一回事。

请注意，可以将使用 CDN 用于捆绑：查看本文的“使用 CDN”[部分](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

编辑：这里有一篇文章解释了何时使用 CDN 以及为什么，比我的回答更深入一点[http: //www.kendoui.c​​om/blogs/teamblog/posts/13-11-07/know-when- to-cdn.aspx](http://www.kendoui.com/blogs/teamblog/posts/13-11-07/know-when-to-cdn.aspx)******

# regex - 来自dos窗口的带有“或”的grep命令行（gnu grep）

> ID：13381783
> 
> 赞同：1
> 
> 时间：2012-11-14T15:26:53.250
> 
> 标签：regex, windows, command-line, grep, gnu

我正在尝试使用 GNU Grep（为 Win32 目标编译的 grep）为 windows7 创建一个 .bat 文件。我在使用 | 的表达式的语法上遇到问题 （或），因为 DOS 命令认为我将其用作管道/重定向。这是一个示例输入 foo.txt：

```
aaa
bbb
ccc
aaa bbb ccc 
```

所以我尝试了一个简单的测试：

```
grep aaa foo.txt 
```

结果：

```
aaa
aaa bbb ccc 
```

到现在为止还挺好。但我确实需要提取aaa OR bbb，所以我使用这个表达式：(aaa|bbb) ex：

```
grep (aaa|bbb) 
```

给我：

```
'bbb)' is not recognized as an internal or external command,
operable program or batch file. 
```

我尝试了各种报价，但还没有找到正确的组合。我需要保护字符串免受 DOS 解释器的影响，但它仍然对 grep 有用。我阅读了手册页和网络文档，似乎没有什么适合我想要做的。

有谁知道如何完成这项工作？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:29:25.583

需要引号并使用以下命令转义管道`\`：

```
grep "aaa\|bbb" foo.txt 
```

* * *

```
$ cat foo.txt
aaa
bbb
ccc
aaa bbb ccc

$ grep "aaa\|bbb" foo.txt
aaa
bbb
aaa bbb ccc 
```

# scala - Scala参数化特征类型 - 默认为mixin超类型？

> ID：13381785
> 
> 赞同：0
> 
> 时间：2012-11-14T15:27:07.643
> 
> 标签：scala, types

嗨，我想创建一个参数化特征`trait Foo[T] // Foo[T]???`，这样，在：

```
class Bar extends Foo 
```

或者

```
val b = new Bar() with Foo 
```

“T”将自动成为“Bar”，因为它是混入其中的类型。不知道我会怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:02:25.960

根据我对您的问题的理解，我想说不要进行`Foo`参数化，而只是使用`this.type`您`T`在课堂上使用的地方`Foo`。请参阅[如何使用 Scala 的 this 类型、抽象类型等来实现 Self 类型？](https://stackoverflow.com/questions/4313139/how-to-use-scalas-this-typing-abstract-types-etc-to-implement-a-self-type)使用示例。

但是我必须补充一点，在实践中，咬紧牙关并明确表示通常更实际：

```
class Bar extends Foo[Bar] 
```

这种模式甚至有一个名字：*Curiously Recurring Template Pattern*（主要来自 C++ 文献）。请参阅[定义方法以返回扩展它的类的类型以](https://stackoverflow.com/questions/5331722/define-method-to-return-type-of-class-extending-it)获取 scala 中的示例

# windows-8 - 哪些规则管理 Windows 8 商店 appId？它们是否跨版本/重命名持久？

> ID：13381789
> 
> 赞同：4
> 
> 时间：2012-11-14T15:27:09.797
> 
> 标签：windows-8, winjs, windows-store-apps

[CurrentApp.appId 的 MSDN 页面在这里。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.currentapp.appid)

在典型的应用程序中，属性以 格式返回`00000000-0000-0000-0000-000000000000`，如果您运行的应用程序不在 Windows 应用商店中，则正是该数字。

一旦进入 Windows 商店，它就会得到一个实数，我的问题是：**有什么东西会导致 appId 发生变化吗？**也许随着应用程序版本的更新，或者应用程序被重命名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:12:16.043

除非您删除现有应用并重新发布，否则 AppId 不会更改。

我没有这方面的来源，但它与 Windows Phone Marketplace/Store 的过程相同。很多地方都会用到这个ID。

*   指向您的应用的直接链接 (URL)
*   由商店应用程序用于识别哪些应用程序有更新
*   Visual Studio 在创建/上传包时使用
*   ...

更改全局唯一标识符完全违背了 GUID 的观点。如果它改变了，很多东西都会坏掉。更新应用程序时 ID 不会更改，它保持不变。

# scala - 按类型过滤 Scala 列表

> ID：13381797
> 
> 赞同：52
> 
> 时间：2012-11-14T15:27:26.897
> 
> 标签：scala

我有这样的班级结构

```
abstract class A
class B extends A
class C extends A
class D extends A
class E extends A 
```

我收集了各种实例，例如：

```
val xs = List(new D, new B, new E, new E, new C, new B) 
```

我的问题是，有没有一种优雅的方法可以从列表中过滤掉一些子类？

假设我想要除 B 和 C 之外的所有实例。我可以用一堆 isInstanceOf 来做到这一点，或者像这样使用 collect：

```
val ys = (xs collect {
    case b: B => None
    case c: C => None
    case notBorC => notBorC
}).filter(_ != None).asInstanceOf[List[A]] 
```

这可行，但感觉很尴尬，主要是因为过滤器和演员表。有没有更优雅的方式？更少的代码是首选，如果我添加更多 A 的子类，我希望有一个不需要更新的解决方案。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2015-07-10T18:39:42.077

`collect`可用于过滤定义函数的值：

获取类型 A 的所有值：

```
xs.collect { case a: A => a } 
```

获取除 B 和 C 之外的所有值：

```
xs diff xs.collect { case x@(_: B | _: C) => x } 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-11-14T15:44:21.330

`flatMap`那个狗屎！（[正如他们所说](https://stackoverflow.com/q/8559537/334519)）：

```
scala> val ys = xs flatMap {
     |   case _: B | _: C => None
     |   case other => Some(other)
     | }
ys: List[A] = List(D@7ecdc97b, E@2ce07e6b, E@468bb9d1) 
```

在您的情况下，您得到 a`List[ScalaObject]`因为是,和`ScalaObject`的最小上限。`None``D``E`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T15:41:14.947

将问题表述为问题似乎是解决它们的一种很好的方法:) 我的问题实际上提供了答案 - 只需按子类型过滤：

```
val ys = xs filterNot(List(classOf[B], classOf[C]) contains _.getClass) 
```

# python - cumtrapz 有一个意外的关键字参数“初始”

> ID：13381798
> 
> 赞同：1
> 
> 时间：2012-11-14T15:27:27.693
> 
> 标签：python, scipy

[在这里](http://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.cumtrapz.html#scipy.integrate.cumtrapz)我找到了一个使用integrate.cumtrapz()的例子，但它对我不起作用——当我尝试设置initial=0时

```
y_int = integrate.cumtrapz(y, x, initial=0) 
```

我收到一个错误

```
TypeError: cumtrapz() got an unexpected keyword argument 'initial' 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:05:15.310

你正在运行什么版本的 scipy？我有 scipy 0.10.1，关键字`initial`也无法识别。此外，文档字符串也没有它，而 scipy 0.11 的源代码（您链接的）有它。这让我猜测它是在 v 0.11 中添加的。

确实：

```
>>> import scipy.integrate as si
>>> si.__file__
'/usr/local/lib/python2.6/dist-packages/scipy/integrate/__init__.pyc' 
```

然后检查源（在 中`quadrature.py`）---签名是

```
 def cumtrapz(y, x=None, dx=1.0, axis=-1): 
```

要检查 scipy 版本，请执行以下操作：

```
>>> scipy.__version__
'0.10.1' 
```

# c# - 如何在 C# 中启动线程

> ID：13381803
> 
> 赞同：-3
> 
> 时间：2012-11-14T15:27:33.950
> 
> 标签：c#, multithreading

在 Java 中我可以扩展`Thread`或实现`Runnable`，C# 中的等价物是什么？我发现只有一些看起来有点像可运行的工具，但没有什么用处。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T15:29:06.810

不，您不`Thread`使用 C# 进行扩展 - 通常也不应该使用 Java。（您应该只实现`Runnable`接口。）

相反，如果您想开始一个新线程，您可以创建`ThreadStart`委托或`ParameterizedThreadStart`委托的实例，并将其传递给`Thread`.

这是一个简短但完整的示例：

```
using System;
using System.Threading;

class Test
{
    public static void Main(string[] args)
    {
        ThreadStart action = Count;
        Thread thread = new Thread(action);
        thread.Start();
        for (int i = 0; i < 5; i++)
        {
            Console.WriteLine("Main thread...");
            Thread.Sleep(1000);
        }
    }

    static void Count()
    {
        for (int i = 0; i < 20; i++)
        {
            Console.WriteLine("Secondary thread...");
            Thread.Sleep(300);
        }        
    }
} 
```

有关代表的更多信息，请参阅[我关于该主题的文章](http://csharpindepth.com/Articles/Chapter2/Events.aspx)。

有关线程的更多信息，请参阅[Joe Albahari 的线程教程](http://www.albahari.com/threading/)。

老实说，这些天您通常应该`System.Threading.Tasks.Task`改用 - 尝试使用更高级别的抽象，而不仅仅是原始线程。

# facebook - 如何使用omniauth、devise和facebook处理rails中的身份验证

> ID：13381808
> 
> 赞同：0
> 
> 时间：2012-11-14T15:27:46.913
> 
> 标签：facebook, ruby-on-rails-3, devise, omniauth

根据这个railscast，我已经在我的rails应用程序中使用devise和omniauth实现了facebook身份验证：[http](http://railscasts.com/episodes/236-omniauth-part-2) ://railscasts.com/episodes/236-omniauth-part-2我的问题是如何处理身份验证对象。

如果我理解正确，当我使用 facebook 登录时，令牌会在一段时间内有效并保存到身份验证表中。过期是怎么处理的？更重要的是，如果我注销身份验证将保留在表中。所以当我再次登录时，它会找到旧的身份验证模型。如果用户发出声音，不应该清除身份验证表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:40:50.207

The facebook is the one who handles the expiration of authentication in the `facebook`.

What you can control in your rails applicaitons is how devise will expire your authentication. When this happen the user will be prompted to login in facebook again, if it is already logged then he will be redirected authenticated back to your page.

So what you have to control is your settings in devise.

If you want to access the facebook graph, here is a good tutorial to do that: [Facebook Integration With Omniauth and Devise on Rails 3](http://blog.assimov.net/blog/2010/11/21/facebook-integration-with-omniauth-and-devise-on-rails-3/)

Regards, Felipe Lopes.

# java - 获取文件夹中文件的名称

> ID：13381810
> 
> 赞同：0
> 
> 时间：2012-11-14T15:27:49.907
> 
> 标签：java

决定换个方式问问题，假设我们有一个file-test，里面有很多不同的文件，有些是indeks.html、kiki.tht、lololo.bin等类型，来获取里面所有文件的名字一个文件夹，您可以使用以下代码：

```
File folder = new File("C:\\test\\");
File[] listOfFiles = folder.listFiles();

    for (int i = 0; i < listOfFiles.length; i++) {
      if (listOfFiles[i].isFile()) {
        System.out.println(listOfFiles[i].getName());
      }
    } 
```

但是如何只显示没有扩展名的文件名呢？indeks.html looolo.tht 不像（只记得文件中的很多，没有重名），还有index和looolo）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:31:35.763

```
String fileName = listOfFiles[i].getName();
int index = fileName.lastIndexOf('.');
if (index >= 0) {
    fileName = fileName.substring(0,  index);
}
System.out.println(fileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:30:33.727

```
String fullName = file.getName();
String nameWithoutExtension = fullName();
int lastDot = fullName.lastIndexOf(".");
if (lastDot >= 0) {
    nameWithoutExtension = nameWithoutExtension.substring(0, lastDot);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:31:27.693

您可以获取文件的名称并使用拆分字符串

```
String[] file = filename.Split("\\.");' 
```

`file[0]`保存基本名称，而`file[1]`保存扩展名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:32:37.973

你有没有尝试过：

```
 listOfFiles.get(index).getName() 
```

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T15:36:02.730

Apache Commons IO 有一个名为 的类`FilenameUtils`，它提供了方法[`getBaseName(String)`](http://commons.apache.org/io/api-release/org/apache/commons/io/FilenameUtils.html#getBaseName%28java.lang.String%29)。只需提交参数的文件路径即可。

# z-index - z-index 问题 - 相对位置

> ID：13381813
> 
> 赞同：-1
> 
> 时间：2012-11-14T15:28:00.003
> 
> 标签：z-index

我在 z-index 方面遇到了一些问题，我似乎无法解决。我已确保将相关位置属性设置为相对，但我的元素无法很好地发挥作用。

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>

</head>

<body>

<div class="container" id="top">
<h1>Top</h1>
    <div class="slideshow">
        <ul class="nav">
            <li class="prev"><a href="#">Previous</a></li>
            <li class="next"><a href="#">Next</a></li>
        </ul>

        <ul class="slides" id="slides">
            <li><img src="images/top_blue.gif" alt="Harley Davidson Sportster" /></li>
            <li><img src="images/top_brown.gif" alt="Harley Davidson Sportster" /></li>
            <li><img src="images/top_vanilla.gif" alt="Harley Davidson Sportster" /></li>
        </ul>
    </div>

</div>

</body>
</html> 
```

这里是我的 CSS：

```
body, h1, ul, li {
    margin: 0; padding: 0; border: 0;
}

.container {
    width: 800px; margin: auto;
    position: relative;
}

.slideshow {
    width: 800px; height: 50px;
    position: relative;
}

.slideshow ul.nav {
    list-style: none;
    position: relative;
    z-index: 100;
}
    .slideshow ul.nav li.prev {
        float: left;
        }
    .slideshow ul.nav li.next {
        float: right;
    }
    .slideshow ul.nav li a {
        display: block; width: 32px; height: 48px; text-indent: -9999px;
    }
        .slideshow ul.nav li.prev a {
            background: url(images/arrow_prev.gif);
        }
        .slideshow ul.nav li.next a {
            background: url(images/arrow_next.gif);
        }

    .slideshow ul.slides {
        list-style: none;
        position: relative;
        top:0px;
        height:50px;
    } 
```

​​</p>

这是我的 JSFiddle：http: [//jsfiddle.net/XPsn7/1/](http://jsfiddle.net/XPsn7/1/)

基本上，下面的主图像的 z-index 为 5，箭头图像应位于幻灯片的前面，z-index 为 15。但是，导航箭头会导致幻灯片图像向右移动以为它们腾出空间。这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:31:16.573

问题是你的相对定位。如果您创建一个包含绝对定位的子元素的相对容器，您应该能够按预期浮动图像。

# python - python csv文本文件到数组[i，j]

> ID：13381815
> 
> 赞同：5
> 
> 时间：2012-11-14T15:28:02.010
> 
> 标签：python, arrays, csv, matrix

我刚开始学习python，所以我需要一些帮助。

我有 closeparams.txt 文件，它具有 CSV 结构：

```
3;700;3;10;1
6;300;3;20;1
9;500;2;10;5 
```

我需要将此文件读入二维数组。a[i,j] 其中 i - 是行， j - 是列

我搜索但没有找到确切的样本。我将像这样使用这个巨大的：

```
i=0
j=3
print a(i,j) 
```

我想那个显示：

```
10 
```

或者

```
i=2
j=1
print a(i,j) 
```

我想那个显示：

```
500 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:36:02.453

`numpy`如果你想处理数组，我建议使用。在你的情况下：

```
import numpy

a = numpy.loadtxt('apaga.txt', delimiter=';')

print a[0,3] 
```

您没有具体说明数组结构对您来说有多重要，但 Numpy 对于复杂的任务非常非常强大，并且可以非常精简地以紧凑、快速和可读的方式执行更小、更快速的任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T15:34:42.437

```
display_list = []

with open('closeparams.txt') as data_file:
   for line in data_file:
      display_list.append(line.strip().split(';'))

print(display_list[0][3]) # [i][j] 
```

编辑 - python3 print()

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-03T13:15:29.520

How about:

```
import csv
sheet = list(csv.reader(open(source_path)))
print sheet[0][0] 
```

Just typecast the opened csv to a list!

# javascript - 检测脚本是否已经加载

> ID：13381821
> 
> 赞同：8
> 
> 时间：2012-11-14T15:28:30.307
> 
> 标签：javascript, jquery, google-chrome, internet-explorer-8, getscript

似乎`helloworld.js`根据我单击的次数多次加载`#load`。我这样说是因为当我查看 Google Chrome 开发者工具网络选项卡时，它显示`helloworld.js`的次数与我单击的次数一样多`#load`。

```
$(document).ready(function() {

    $("#load").click(function(){
        $.getScript('helloworld.js', function() {
            hello();
        });
    });

}); 
```

该`hello()`函数如下所示：

```
function hello(){
    alert("hello");
} 
```

是否可以检测是否`helloworld.js`已经加载？

因此，如果尚未加载，请加载它，如果已加载，则不要加载它。

`#load`如果我单击该按钮 4 次，这就是开发人员工具当前向我显示的内容：

![在此处输入图像描述](../Images/4fd8c96dcc0d27949bd663671ad7029e.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T15:41:16.970

文件加载成功时设置一个标志。如果设置了标志，则再次跳过文件加载。

试试这个代码，

```
 var isLoaded = 0; //Set the flag OFF 

    $(document).ready(function() {

        $("#load").click(function(){
            if(isLoaded){ //If flag is ON then return false
                alert("File already loaded");
                return false;
            }
            $.getScript('helloworld.js', function() {
                isLoaded = 1; //Turn ON the flag
                hello();

            });
        });

    }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-14T15:43:21.570

那么为什么不只像这样触发一次事件：

```
$("#load").one("click", function() {
   $load = $(this);
   $.getScript('helloworld.js', function() {
       hello();
       // bind hello to the click event of load for subsequent calls
       $load.on('click', hello); 
   });
}); 
```

这将防止后续加载并避免使用全局

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-14T15:55:19.387

另一种选择是让它`.getScript()`运行，但让它从浏览器的缓存中获取脚本，这样你就不会每次都重新加载它。

为此，请添加以下代码：

```
$.ajaxSetup({
    cache: true
}); 
```

这取自[文档页面](http://api.jquery.com/jQuery.getScript/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-14T15:43:36.377

您可以创建一个辅助函数：

```
var getScript = (function() {
  var loadedFiles = {};
  return function(filename, callback) {
    if(loadedFiles[filename]) {
      callback();
    } else {
      $.getScript(filename, function() {
        loadedFiles[filename] = true;
        callback();
      });
    }
  };
})(); 
```

# tfs - tfs 中的服务器错误

> ID：13381823
> 
> 赞同：0
> 
> 时间：2012-11-14T15:28:35.970
> 
> 标签：tfs

我无法使用以下 URL 访问 TFS 2010。我收到以下错误消息。

```
[HttpException (0x80004005): Unable to validate data.]

test:8080/tfs/ 
```

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:34:01.797

1.  在 App Tier 服务器上，转到 C:\Program Files\Microsoft Team Foundation Server 2010\Application Tier\Web Access\Web。（请制作 Web.config 的副本，以备日后需要原始文件时使用。）
2.  在记事本中编辑 Web.config 文件。
3.  在 Web.config 文件中搜索“machineKey”。
4.  用下面的文字替换该部分。

    ```
    <machineKey validationKey="AutoGenerate,IsolateApps" decryptionKey="AutoGenerate,IsolateApps" validation="3DES" decryption="3DES"/> 
    ```

5.  保存 Web.config 文件。
6.  重新启动 Microsoft Internet 信息服务 (IIS) 服务。

[来源](http://nvn-sharma.blogspot.com/2012/10/tfs-webaccess-error-httpexception.html)

# c - 将连字符插入换行函数

> ID：13381827
> 
> 赞同：1
> 
> 时间：2012-11-14T15:28:59.670
> 
> 标签：c, function, word-wrap, hyphen

初学者在这里。我正在用 C 编写一个 wrap 函数，如果我传递的字符串中的所有单词都小于我定义的行的大小，则该函数可以正常工作。例如：如果我想在 20 个字符后换行并传递一个 21 个字符的单词，它不会换行。

如果我传递一个长单词（比定义的行大小长）并继续下一行，我实际上想要做的是在行尾添加一个连字符。我研究并发现了很多具有换行功能的网站，但没有一个显示如何插入连字符，所以你们能帮帮我吗？你能告诉我一个插入连字符的例子，或者请给我指出正确的方向吗？提前致谢！

我的包装功能：

```
int wordwrap(char **string, int linesize)
{
    char *head = *string;
    char *buffer = malloc(strlen(head) + 1);
    int offset = linesize;
    int lastspace = 0;
    int pos = 0;

    while(head[pos] != '\0')
    {
        if(head[pos] == ' ')
        {
            lastspace = pos;
        }
        buffer[pos] = head[pos];
        pos++;

        if(pos == linesize)
        {
            if(lastspace != 0)
            {
                buffer[lastspace] = '\n';
                linesize = lastspace + offset;
                lastspace = 0;
            }
            else
            {
                //insert hyphen here?
            }
        }
    }
    *string = buffer;
    return;
} 
```

我的主要功能：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    char *text = strdup("Hello there, this is a really long string and I do not like it. So please wrap it at 20 characters and do not forget to insert hyphen when appropriate.");

    wordwrap(&text, 20);

    printf("\nThis is my modified string:\n'%s'\n", text);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:43:09.093

您可能需要 malloc 一块内存并从您的字符串复制到新区域。当您到达要添加中断的位置时，只需插入换行符。请记住，需要释放新的内存块，否则您将发生内存泄漏并最终耗尽内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:22:18.783

对于 realloc 问题，一个很好的解决方案是*gap buffer*。

您最初在数据前面分配了 4Kb 间隙。

```
[____________string start here... ]  
[str____________ing start here... ]  
[string\n___________start here... ]   <-- here I just decided to insert line break 
```

当您删除空格或字符时，差距会变得更大。当您添加连字符和换行符时，间隙会缩小。在任何情况下，您只需将每个角色从间隙的末端移动到间隙的开头一次。

可能的第一遍是在缓冲区的末尾插入间隙并向后工作以删除额外的空格或换行符，或者计算字长。

当然，如果下一个单词太长，可以随时*向前看并计算。*

# android - 是否可以通过我的 android 应用程序执行 adb 命令？

> ID：13381828
> 
> 赞同：36
> 
> 时间：2012-11-14T15:28:59.780
> 
> 标签：android, adb

谁能说，是否`adb`可以通过我的android应用程序执行命令。如果可以执行，如何执行？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-14T15:32:02.483

**你可以这样做：**

```
Process process = Runtime.getRuntime().exec("your command");
BufferedReader bufferedReader = new BufferedReader(
new InputStreamReader(process.getInputStream())); 
```

不要忘记用 try and catch 语句包围它。

**编辑：**

@Phix 是对的，使用[ProcessBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)会更好。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-04-10T10:14:09.510

普通安卓应用程序对通过 启动的进程具有不同的权限`adb`，例如，`adb`允许通过 启动的进程捕获屏幕，而普通应用程序则不允许。因此，您可以通过 执行应用程序中的命令`Runtime.getRuntime().exec()`，但它们不会拥有与您从`adb shell`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-11-26T11:04:14.453

我发现这篇文章是为了寻找一个不同的查询，但我之前专门`input`在 android 上工作过，所以我想澄清一下这个问题。

之所以

```
Runtime.getRuntime().exec("adb shell input keyevent 120"); 
```

不工作，是因为你没有删除

```
adb shell 
```

该`ADB`部分仅用于您的计算机上，如果您没有正确安装 ADB，该命令实际上是您计算机上 adb.exe 文件的路径，如下所示

```
C:\XXXX\ADB Files\adb.exe shell 
```

或
C:\XXXX\ADB Files\adb shell

该`shell`部分告诉您计算机上的 ADB 程序访问设备外壳，因此您的设备也不知道外壳是什么......

Using`sh /path/to/commandList.sh`将执行 commandList.sh 中列出的命令，因为它是一个 shell 脚本（Windows 上的 .batch 文件类似）

您要使用的命令是

```
Runtime.getRuntime().exec("input keyevent 120"); 
```

但是，这将导致环境为空且工作目录为空，您可以通过将命令写入 shell 脚本（ .sh 文件）然后运行脚本来绕过此问题

```
Runtime.getRuntime().exec("sh path/to/shellScript.sh"); 
```

有时`sh`不需要，但我只是使用它以防万一。

我希望这至少能解决一些问题:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-26T10:07:42.137

在 Runtime.getRuntime().exec 中调用的 adb shell 未在 shell 用户下运行。它提供 shell 但具有相同的进程所有者用户（如 u0_a44）。这就是所有命令都不起作用的原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-05T20:43:47.570

这就是我在 Kotlin 中所做的，我也得到命令响应

```
fun runShellCommand(command: String) {
    // Run the command
    val process = Runtime.getRuntime().exec(command)
    val bufferedReader = BufferedReader(
        InputStreamReader(process.inputStream)
    )

    // Grab the results
    val log = StringBuilder()
    var line: String?
    line = bufferedReader.readLine()
    while (line != null) {
        log.append(line + "\n")
        line = bufferedReader.readLine()
    }
    val Reader = BufferedReader(
        InputStreamReader(process.errorStream)
    )

    // if we had an error during ex we get here
    val error_log = StringBuilder()
    var error_line: String?
    error_line = Reader.readLine()
    while (error_line != null) {
        error_log.append(error_line + "\n")
        error_line = Reader.readLine()
    }
    if (error_log.toString() != "")
        Log.info("ADB_COMMAND", "command : $command $log error $error_log")
    else
        Log.info("ADB_COMMAND", "command : $command $log")
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-04T12:41:26.183

执行

```
Runtime.getRuntime().exec("adb shell input keyevent 120"); 
```

我收到以下错误：java.io.IOException：无法运行程序“adb”：错误=13，权限被拒绝。

执行

```
Runtime.getRuntime().exec("adb shell input keyevent 120"); 
```

没有错误，但同时，我的截屏请求没有得到处理。

我发现这在早期版本的 android 中工作，但后来它被删除了。虽然我无法在这里提供它为什么不起作用的来源。

希望这可以帮助像我这样尝试使用这种方法在应用程序不在前台时截取屏幕截图的人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-30T09:07:00.103

```
Process process = Runtime.getRuntime().exec("su");
DataOutputStream os = new DataOutputStream(process.getOutputStream());
string cmd = "/system/bin/input keyevent 23\n";
os.writeBytes(cmd); 
```

手机必须root。在这里，我执行了 adb 命令“input keyevent 23”。请记住，当您通过 su 执行 adb 命令时，您不需要添加“adb shell input keyevent 23”

# sql-server - 使用 T-SQL 创建索引返回索引存在错误

> ID：13381830
> 
> 赞同：0
> 
> 时间：2012-11-14T15:29:04.117
> 
> 标签：sql-server, sql-server-2008, tsql, indexing

我想要做的是使用 SELECT INTO 语句制作表的副本。

创建表后，我也想复制索引。

所以我使用的代码如下：

```
SELECT * INTO TableCopy FROM Table 
```

然后：

```
ALTER TABLE TableCopy ADD CONSTRAINT pkGUID PRIMARY KEY ([GUID])
CREATE INDEX ixIndexName ON TableCopy (CountryCode) 
```

当我执行索引 SQL 时，我收到索引已存在于目录中的错误。我不认为索引名称必须是唯一的，我认为它们可以在不同的表中重复。

你瞧，如果我通过管理工作室创建索引，它会接受索引名称。

我在这里想念什么？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T15:31:02.910

> 我不认为索引名称必须是唯一的，我认为它们可以在不同的表中重复。

不，它们在表/视图中必须是唯一的。

当您在 SSMS 中执行时，它**会删除**现有索引并创建一个新索引。

来自MSDN 上[的 CREATE INDEX (Transact-SQL) ：](http://msdn.microsoft.com/en-us/library/ms188783.aspx)

> index_name - 是索引的名称。**索引名称在表或视图中必须是唯一的，**但在数据库中不必是唯一的。

（强调我的）

* * *

但是，`pkGUID`它不是索引 - 它是一个**约束**，并且这些在数据库中必须是唯一的。

# jsf - 在 Rich:tab 的 actionListener 方法上，ApplicationScoped Bean 为空

> ID：13381832
> 
> 赞同：0
> 
> 时间：2012-11-14T15:29:15.233
> 
> 标签：jsf, jsf-2, richfaces

我正在使用 JSF 2.0 和 Richfaces 3.3.2。我的一个页面有问题。

首先，我有一个主页，其中包含一个rich:tabPanel 和几个rich:tabs，在它们之间切换没问题。

在我页面的第一个选项卡上，我有另一个带有其他选项卡的 tabPanel。它们都有一个 actionListener，它将调用 ViewScoped ManagedBean 来编辑一些数据，这些数据将显示在单击的选项卡上。编辑数据的方法调用正确注入的 ApplicationScoped Bean 上的方法（它适用于其他选项卡）。在第二层切换选项卡并调用操作方法时，ApplicationScoped Bean 为空。这只发生在我切换选项卡时（所以它不会发生在默认显示的第一个选项卡上）所以我认为它与 actionListener 有关，但我不知道为什么。不幸的是，我无法提供实际代码，但这是我页面的粗略结构。

主页面.xhtml

```
...
<rich:tabPanel>
    <rich:tab>
        <ui:include src="tabs/tab1.xhtml" />
    </rich:tab>
    otherTabs
</rich:tabPanel>
... 
```

tab1.xhtml

```
...
<rich:tabPanel>
    <rich:tab actionListener="#{viewScopedBean.method}">
        <ui:include src="subtabs/subtab1.xhtml" /> 
    </rich:tab>
    <rich:tab actionListener="#{viewScopedBean.method2}">
        <ui:include src="subtabs/subtab2.xhtml" /> 
    </rich:tab>
</rich:tabPanel> 
```

ViewScopedBean.java

```
@ManagedBean
@ViewScoped
public class ViewScopedBean {
    @ManagedProperty(value="#{applicationBean}")
    private ApplicationBean applicationBean;

    private Data data;

    public void init() {
        ...
        data = applicationBean.retrieveData();
        ...
    }

    public void method(ActionEvent e) {
        ...
        data = applicationBean.retrieveData();
        ...
    }

    public void method2(ActionEvent e) {
        ...
        data = applicationBean.retrieveData();
        ...
    }
    // getters/setters
} 
```

应用程序Bean.java

```
@ManagedBean
@ApplicationScoped
public class applicationBean {
     public Data retrieveData() {
           ...
     }
 } 
```

单击 subtab2 时，我在 data = applicationBean.getData() 行收到 NullPointerException，因此 applicationBean 为空。每次在我切换到的每个选项卡上都会发生这种情况，但绝不会在 init() 方法中发生，因此 applicationBean 不应为空。我找不到有关此问题的任何解决方案或提示，希望有人有想法。

提前致谢

# c++ - winapi C++ 处理重点

> ID：13381836
> 
> 赞同：3
> 
> 时间：2012-11-14T15:29:20.310
> 
> 标签：c++, winapi, setfocus, wndproc

我正在开发一个 C++ winapi 应用程序，我正在努力`SetFocus()`为我工作。我创建主窗口，`WS_OVERLAPPEDWINDOW | WS_VISIBLE`然后在其中创建它的子窗口（几个按钮和我自己的编辑控件版本的开头）`WS_CHILD | WS_VISIBLE`，除了焦点问题之外，它们都工作正常。

在我的搜索中，我一直在努力寻找有关如何处理 Focus 的内容。当所有窗口都被创建时，它们会单独接收`WM_SETFOCUS`消息，我通过创建插入符号在我的编辑控件中处理此消息，但是似乎孩子们从未收到`WM_KILLFOCUS`消息，因此插入符号永远不会被破坏。

这就是我的问题所在：我希望主父窗口最初具有焦点，并且在我的编辑控件中没有插入符号，然后当单击子编辑控件时它具有焦点，然后当主窗口单击它应该然后再次获得焦点，依此类推。

所以我最初的想法是`SetFocus()`在处理消息时将焦点设置到主窗口，`WM_CREATE`但这似乎不起作用：孩子没有收到`WM_KILLFOCUS`消息。

我的下一个想法是，也许父母必须处理传递`WM_KILLFOCUS`给适当的孩子，所以我写了一个方法来为我做这件事，但孩子们仍然没有收到`WM_KILLFOCUS`消息。

所以我最好的猜测是我没有在我的 WndProc 中正确处理消息。

我创建了自己的 Window 类，并通过以下 WndProc 将消息分发到适当的类：

```
LRESULT CALLBACK CBaseWindow::stWinMsgHandler(
    HWND hwnd, 
    UINT uMsg, 
    WPARAM wParam,  
    LPARAM lParam)
{
    CBaseWindow* pWnd;

    if (uMsg == WM_NCCREATE)
    {       
        SetWindowLong(hwnd, GWL_USERDATA, (long)((LPCREATESTRUCT(lParam))->lpCreateParams));
    }

    pWnd = GetObjectFromWindow(hwnd);

    if (pWnd)
        return pWnd->WinMsgHandler(hwnd, uMsg, wParam, lParam);
    else
        return DefWindowProc(hwnd, uMsg, wParam, lParam);
 } 
```

然后每个类都有自己的 WndProc，当消息进来时我会在其中处理它们。

那么有人对我有什么想法吗？

如果我打算这样做是完全错误的方式，或者如果我没有遵循最佳实践，请说出来，我这样做是为了学习，所以开枪。

[更新]

好的，这里有一些代码来演示这个问题：

## 主文件

```
#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include "MainWnd.h"

int WINAPI WinMain(
    HINSTANCE hInstance, 
    HINSTANCE hPrevInstance, 
    LPSTR lpCmdLine, 
    int nCmdShow)
{       
    MainWnd wnd(hInstance);

    MSG msg;
    while(GetMessage(&msg, NULL, 0, 0 ) > 0)
    {       
        TranslateMessage(&msg); 
        DispatchMessage(&msg);
    }   
    return 0;
} 
```

## BaseWindow.cpp

```
 #include "BaseWindow.h"

 //...

 LRESULT CALLBACK CBaseWindow::stWinMsgHandler(
       HWND hwnd, 
       UINT uMsg, 
       WPARAM wParam, 
       LPARAM lParam)
 {
       CBaseWindow* pWnd;

       if (uMsg == WM_NCCREATE)
       {        
             SetWindowLong(hwnd, 
                  GWL_USERDATA, 
                  (long)((LPCREATESTRUCT(lParam))->lpCreateParams));
   }

        pWnd = GetObjectFromWindow(hwnd);

       if (pWnd)
             return pWnd->WinMsgHandler(hwnd, uMsg, wParam, lParam);
       else
             return DefWindowProc(hwnd, uMsg, wParam, lParam);
 }

 BOOL CBaseWindow::Create(DWORD dwStyles, RECT* rect)
 {  
      m_hwnd = CreateWindow(        
           szClassName, 
           szWindowTitle, 
           dwStyles, 
           rect->left, 
           rect->top, 
           rect->right - rect->left, 
           rect->bottom - rect->top, 
           NULL, 
           NULL, 
           hInstance, 
           (void *)this);   

     return (m_hwnd != NULL);
 } 
```

## MainWnd.cpp

```
#include "MainWnd.h"
#define WIDTH 400
#define HEIGHT 400

MainWnd::MainWnd(HINSTANCE hInst): CBaseWindow(hInst), hInstance(hInst)
{
     SetWindowTitle(_T("Main Window"));

     WNDCLASSEX wcx;
     FillWindowClass(&wcx);                 

     if(RegisterWindow(&wcx))
     {      
         RECT rc;
     BuildRect(&rc);

         if(Create(WS_OVERLAPPEDWINDOW | WS_VISIBLE, &rc))
         {          
               customTextBox = new CustomTextBox(hInst, m_hwnd);            
         }
     }  
 }

 void MainWnd::FillWindowClass(WNDCLASSEX *wcx)
 {
      wcx->cbSize = sizeof(WNDCLASSEX);
      wcx->style = CS_HREDRAW | CS_VREDRAW | CS_DROPSHADOW;                     
      wcx->lpfnWndProc = CBaseWindow::stWinMsgHandler;          
      wcx->cbClsExtra = 0;                                      
      wcx->cbWndExtra = 0;                                      
      wcx->hInstance = hInstance;                                   
      wcx->hIcon = LoadIcon(NULL, IDI_APPLICATION);             
      wcx->hCursor = LoadCursor(NULL, IDC_ARROW);
      wcx->hbrBackground = CreateSolidBrush(RGB(255,255,255));      
      wcx->lpszMenuName = NULL;                                 
      wcx->lpszClassName = _T("MainWindow");
      wcx->hIconSm = LoadIcon(NULL, IDI_APPLICATION);
 }

 LRESULT CALLBACK MainWnd::WinMsgHandler(
       HWND hwnd, 
       UINT uMsg, 
       WPARAM wParam, 
       LPARAM lParam)
 {          
       switch (uMsg)
       {
       case WM_DESTROY:
            delete customTextBox;
            PostQuitMessage(0);     
            break;
       case WM_LBUTTONUP:
            SetFocus(hwnd);
            break;
       default:
            return DefWindowProc(hwnd, uMsg, wParam, lParam);
       }
       return 0;
 } 
```

## 自定义文本框.cpp

```
 #include "CustomTextBox.h"

 CustomTextBox::CustomTextBox(
      HINSTANCE hInst, 
      HWND hParent): CBaseWindow(hInst), 
                 hParent(hParent),
 {  
      WNDCLASSEX wcx;
      CreateWndClassEX(wcx);
      if(RegisterWindow(&wcx))
      {
           RECT clientRect;
           CreateClientRect(clientRect);
           CreateChild(WS_VISIBLE | WS_CHILD | WS_BORDER | WS_TABSTOP, &clientRect, hParent);       
      }
 }

 void CustomTextBox::CreateWndClassEX(WNDCLASSEX& wcx)
 {
      wcx.cbSize = sizeof(WNDCLASSEX);
      wcx.style = CS_HREDRAW | CS_VREDRAW;    
      wcx.lpfnWndProc = CBaseWindow::stWinMsgHandler;
      wcx.cbClsExtra = 0;                                           
      wcx.cbWndExtra = 0;
      wcx.hInstance = hInstance;
      wcx.hIcon = LoadIcon(NULL, IDI_APPLICATION);
      wcx.hCursor = LoadCursor(NULL, IDC_ARROW);
      wcx.hbrBackground = CreateSolidBrush(RGB(255,255,255));
      wcx.lpszMenuName = NULL;
      wcx.lpszClassName = _T("Edit Control");
      wcx.hIconSm = LoadIcon(NULL, IDI_APPLICATION);
 }

 LRESULT CALLBACK CustomTextBox::WinMsgHandler(
      HWND hwnd, 
      UINT uMsg, 
      WPARAM wParam, 
      LPARAM lParam)
 {
      switch(uMsg)
      {
      /* Handling the caret */
      case WM_SETFOCUS:
           CreateCaret(hwnd, NULL, 0, nWindowY); 
           SetCaretPos(GetEndOfLinePoint(), nCaretPosY * nCharY); 
           ShowCaret(hwnd); 
           return 0;    
      case WM_MOUSEACTIVATE:
           SetFocus(hwnd);
           return MA_ACTIVATE;
      case WM_KILLFOCUS:
           DestroyCaret();
           return 0;
      default:
           return DefWindowProc(hwnd, uMsg, wParam, lParam);
      }         
 } 
```

## 发现

在编写此代码时，我遇到了问题的原因之一：在我的实际应用程序中，我没有标题栏，因此要将发送`WM_NCLBUTTONDOWN`到主窗口的窗口移动到`WM_LBUTTONDOWN`：

`SendMessage(hwnd, WM_NCLBUTTONDOWN, HTCAPTION, NULL);`

然后我`SetFocus()`在这之后有了我的，这不起作用，但如果我切换它们并处理第`SetFocus()`一个，那么点击确实会改变焦点。

但是，最初设置焦点仍然存在问题。在启动应用程序后的那一刻，自定义编辑控件仍然显示插入符号，即使它没有焦点，您需要单击它以使其获得焦点，从而它将接收键盘输入。之后，焦点按需要工作：如果我点击主窗口，它就有焦点；如果我点击自定义编辑，它有焦点等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:53:19.910

好的，事实证明我的整个问题都在于那条线`SendMessage(hwnd, WM_NCLBUTTONDOWN, HTCAPTION, NULL);`一旦我切换了：

```
case WM_LBUTTONDOWN:                        
    SendMessage(hwnd, WM_NCLBUTTONDOWN, HTCAPTION, NULL);       
    SetFocus(hwnd);
break; 
```

到：

```
case WM_LBUTTONDOWN:                        
    SetFocus(hwnd);
    SendMessage(hwnd, WM_NCLBUTTONDOWN, HTCAPTION, NULL);
break; 
```

一切都走到了一起。

# c# - 在 Windows 8 中获取已安装的 Windows 应用商店应用程序的本地化名称

> ID：13381837
> 
> 赞同：14
> 
> 时间：2012-11-14T15:29:24.430
> 
> 标签：c#, .net, vb.net, windows-8

我想`ListBox`用 Windows 8 桌面应用程序中所有已安装的 Windows 应用商店应用程序的本地化显示名称填充 a。我试过这个：

```
string Apps = Interaction.Environ("ProgramFiles") + "\\WindowsApps";
foreach ( App in IO.Directory.GetDirectories(Apps)) {
            XmlDocument xml = new XmlDocument();
            xml.LoadXml(My.Computer.FileSystem.ReadAllText(App + "\\AppxManifest.xml"));
            lbApps.Items.Add(xml.GetElementsByTagName("DisplayName")(0).InnerText);
 } 
```

但它会添加`ms-resource`字符串和已卸载的默认应用程序。

编辑：我发现所有已安装的应用程序都有它们的快捷方式，`%LocalAppData%\Microsoft\Windows\Application Shortcuts`但这些快捷方式没有本地化名称，并且在打开时不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T04:36:05.117

我认为没有 Windows 运行时 API 可以将此特定信息公开回应用程序。应用程序的所有者有责任首先向 Appx Manifest 提供信息。无论你可以在那里看看 - [ [http://msdn.microsoft.com/en-us/library/Hh446622](http://msdn.microsoft.com/en-us/library/Hh446622) ] 希望对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T07:20:33.287

你试过了吗：http: [//marcominerva.wordpress.com/2012/12/17/localizing-app-name-in-windows-store-apps/](http://marcominerva.wordpress.com/2012/12/17/localizing-app-name-in-windows-store-apps/)

如果您在 AppDevCenter 上正确设置了 AppPackage Name，那么您在客户端的 appx 将返回本地化名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T17:39:56.080

不要直接解析 AppxManifest 文件，而是使用`PackageManager`该类。

在 MSDN 上，有很多示例演示了如何收集有关已安装应用程序包的各种内容，包括[按用户 SID 枚举应用程序包示例](http://code.msdn.microsoft.com/windowsdesktop/Package-Manager-Inventory-5bee970a)。

# c# - Silverlight & Dynamics CRM 2011 - 检查日期字段时应用程序失败

> ID：13381839
> 
> 赞同：0
> 
> 时间：2012-11-14T15:29:26.037
> 
> 标签：c#, silverlight, dynamics-crm-2011

我的一个 CRM 仪表板中有一个 silverlight 应用程序，它需要检查指定日期是否等于记录上的日期，它还需要检查记录上的一个字段是否是一个空字符串：

```
private void SearchContacts(Nullable<DateTime> date)
{
    try
    {
         DateTime UpdatedTime = date ?? DateTime.Now;
         DataServiceQuery<myentity> query = (DataServiceQuery<myentity>)_context.myentitySet.AddQueryOption("$filter", "((my_ForMonthEnding eq '" + UpdatedTime.ToString() + "') and (my_ActionDetails eq ''))");
         query.BeginExecute(OnMyEntitySearchComplete, query);
    }
    catch (SystemException ex)
    {
         _syncContext.Send(new SendOrPostCallback(showErrorDetails), ex);
    }
} 
```

此代码生成以下错误：

> 运算符“eq”与操作数类型“System.Nullable”不兼容

这对我来说似乎很奇怪，因为我正在将可为空的 DateTime 转换为标准 DateTime，所以我一定遗漏了一些东西。有人可以解释一下这里需要做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:23:51.120

这是我使用的有效查询：

```
DataServiceQuery<myentity> query = (DataServiceQuery<myentity>)_context.myEntitySet.Where(c => c.my_ForMonthEnding == date && c.my_ActionDetails.Equals(null));
                query.BeginExecute(OnContactSearchComplete, query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:44:26.687

以前从未使用过 Silverlight 或 DataServiceQuery，所以这可能是在黑暗中刺伤，但`my_ForMonthEnding` 会是一种`nullable`类型。您可以尝试将其更改为`my_ForMonthEnding.Value`吗？

## 编辑 1

好的，看起来您正在使用 DataServiceQuery 生成 OData URL。这是我使用 LinqPad 创建的示例过滤器：

```
$filter=(CreatedOn eq datetime'2012-11-14T11:18:38.4769698-05:00') and (my_name eq '') 
```

CreatedOn 是一个`DateTime?`，这很好用。您可以尝试在字符串日期前添加日期时间并删除外括号吗？

```
 DataServiceQuery<myentity> query = (DataServiceQuery<myentity>)_context.myentitySet
            .AddQueryOption("$filter", "(my_ForMonthEnding eq datetime'" + UpdatedTime.ToString() + "') and (my_ActionDetails eq '')");
        query.BeginExecute(OnMyEntitySearchComplete, query); 
```

# chef-infra - 如何在 Chef 客户端上设置节点属性？

> ID：13381843
> 
> 赞同：3
> 
> 时间：2012-11-14T15:29:56.770
> 
> 标签：chef-infra

我正在使用[chef-client 食谱](https://github.com/opscode/cookbooks/tree/master/chef-client)将机器配置为 chef client 。创建此客户端时如何配置节点属性？

我不想做`knife node edit`。我的目标是在创建此节点时设置一些节点属性，可能是通过向 JSON 文件添加一些内容。

更新：

我正在创建数百个节点，这些节点将使用这个脚本（[参见要点](https://gist.github.com/4076949)）来引导厨师客户端。脚本中的 Node_name 对于每个节点都是不同的。同样，我想为将它们组合在一起的节点设置一个自定义属性。

例如，我想将属于特定项目的所有节点组合在一起。我在想我会给节点添加一个属性“project_id”。这样我以后可以搜索属于一个项目的所有节点。这对于部署特别有用 - 在尝试找出属于特定项目的所有 db_master 角色/webserver 角色/memcached 角色时。

所以我想要做的是：脚本中应该有一些占位符（您在要点中看到），我可以在其中添加自定义属性，如 project_id 或其他任何到节点。那可能吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:52:48.730

上述两种方法都可以，或者您可以使用类似的方法在食谱中创建它们

```
Node[attribute_name] 
```

为了与您的 json 功能保持一致，您可以利用属性或标签

要添加属性，请在您生成的 json 文件中使用类似的内容。属性名称和值可以通过参数或 csv/xml 输入在您的脚本中生成

```
{

    "test_attribute" : "testvalue"
} 
```

在您链接到的示例中，他们在厨师客户哈希下设置属性

```
"chef_client": {
 "server_url": "http://ec2-23-20-173-176.compute-1.amazonaws.com:4000",
 "interval": "20"
} 
```

`node["chef_client"]["interval"]`这些属性被创建为普通节点属性，例如可以访问。

那有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:42:48.243

要么给客户端一个角色并在那里添加属性，要么使用 chef-client 的 -j 参数传递一个包含节点数据的 .json 文件。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-07-31T17:07:27.413

假设您想将配方鼠标添加到您的节点 target1。

```
knife node run_list add target1 "recipe[mouse]" 
```

它应该适用于所有属性。

# javascript - JavaScript IE8“this”总是“对象窗口”

> ID：13381848
> 
> 赞同：2
> 
> 时间：2012-11-14T15:30:07.137
> 
> 标签：javascript, internet-explorer-8

> **可能重复：**
> [如何使用 attachEvent 引用调用者对象（“t​​his”）](https://stackoverflow.com/questions/4590122/how-to-reference-the-caller-object-this-using-attachevent)

我对旧版本 IE 中“this”的行为感到困惑。

警报（这个）；总是返回 [对象窗口]。我意识到答案是“使用 JQuery”，但不幸的是我不允许这样做。

我在一个页面上有多个表单，它们是由 cgi 脚本生成的。

当我尝试将侦听器放在输入按钮上时，就会出现问题。监听器会做一些边界检查，然后提交表单。

```
 if (inputs[b].name === "Submit") {
     form = document.forms[f];
     form.attachEvent("onclick", function () {
         submit_valid();
     });
 } 
```

我希望能够从“submit_valid”提交表单。

```
function submit_valid (form) {
    alert(this);
    this.submit();
} 
```

调试器显示“对象不支持这个属性或方法”，所以显然“这个”没有做我认为它应该做的事情。:-)

“this”在 <= IE8 中是否有用？我应该怎么做才能提交表格？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-14T15:36:30.457

它与版本无关

当您以这种方式调用 submit_valid() 时，它的上下文将始终是窗口对象，您可以通过两种方式更改函数上下文：

```
form.attachEvent("onclick", function () { submit_valid.apply(this); }); 
```

或者

```
form.attachEvent("onclick", function () { submit_valid.call(this); }); 
```

这样，函数的上下文将是表单本身，如果你想更深入地理解它，你可以点击它我会推荐这篇文章来阅读[http://odetocode.com/blogs/scott/archive/2007/07/05 /function-apply-and-function-call-in-javascript.aspx](http://odetocode.com/blogs/scott/archive/2007/07/05/function-apply-and-function-call-in-javascript.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T15:36:37.460

在 submit_valid 函数中，您调用的是未定义的 this.submit。你需要做的是调用 form.submit();

```
function submit_valid (form) {

    form.submit();
} 
```

并在事件处理程序创建中附加 submit_valid 作为处理程序。

```
form.attachEvent("onclick", submit_valid); 
```

# android - 无法将项目作为库添加到我的项目

> ID：13381851
> 
> 赞同：0
> 
> 时间：2012-11-14T15:30:17.823
> 
> 标签：android

我正在尝试在我的项目中使用 ABS 库。我将库项目添加到我的工作区，检查了此状态（“Is Library”在项目设置中为真），将此项目添加到我的一个“Java 构建路径”->“项目”中。但我不能将此项目标记为库（属性中的“Android”->“库”）。我已经添加了，但是当我再次打开它时，我看到该项目尚未添加。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:33:02.090

撤消此步骤：

> 将此项目添加到我的一个“Java 构建路径”->“项目”中。

只需要在属性中的Android -> Libraries 下添加一个库项目项目

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T15:56:17.047

Check your files to see if they are read-only, especially build.properties.

If you use source control, they will tend to be set to read-only and Eclipse doesn't seem to provide any warnings when it needs to write to these files and can't -- you'll check the box, it looks good, then you exit and reload and it's unchecked!

# python - 使用 FreeTDS 查询 MS SqlServer 时，Python 在 255 个字符处截断

> ID：13381854
> 
> 赞同：2
> 
> 时间：2012-11-14T15:30:23.203
> 
> 标签：python, pyodbc, freetds

我想我在 Debian 机器上的 FreeTDS 上使用 pyodbc 的 python 查询中遗漏了一些东西。我不能超过前 255 个字符。

如果我尝试按此处描述的 CAST SQL 数据：[MS SQL Server 上的 ODBC 查询仅在 PHP PDO (FreeTDS) 中返回前 255 个字符](https://stackoverflow.com/questions/2409851/odbc-query-on-ms-sql-server-returning-first-255-characters-only-in-php-pdo-free)： `SELECT CAST(myText as TEXT) FROM mytable` 我得到空/零长度字符串，

我也进行了测试，但没有成功：使用下面的配置更改大小，我只得到前 255 个字符（例如，在我的 Win 框中 pyodbc 可以得到 279 个字符）。

这是一个示例查询：

```
SET TEXTSIZE 2147483647;
SELECT [id], myText , LEN(myText)
FROM    mytable 
```

这是我的`/etc/freetds/freetds/conf`:( ; @ 行首的含义是什么？）

```
[global]
    # TDS protocol version
;   tds version = 4.2

#!!!added by me
client charset = UTF-8
text size = 4294967295 
#!!!/added by me

    # Whether to write a TDSDUMP file for diagnostic purposes
    # (setting this to /tmp is insecure on a multi-user system)
;   dump file = /tmp/freetds.log
;   debug flags = 0xffff

    # Command and connection timeouts
;   timeout = 10
;   connect timeout = 10

    # If you get out-of-memory errors, it may mean that your client
    # is trying to allocate a huge buffer for a TEXT field.  
    # Try setting 'text size' to a more reasonable limit 
    #!!!changed by me
    #text size = 64512 
```

其他的conf文件是：

```
> cat /etc/odbc.ini #/etc/odbc.ini is empty! is it ok?
> cat /etc/odbcinst.ini
[FreeTDS]
Description=TDS driver (Sybase/MS SQL)
Driver=/usr/lib/odbc/libtdsodbc.so
Setup=/usr/lib/odbc/libtdsS.so
CPTimeout=
CPReuse= 
```

我的 SQL 服务器已打开`192.168.1.2`，我使用以下方式连接：

```
cnstr = 'DRIVER={FreeTDS};SERVER=192.168.1.2;DATABASE=MyDBName;UID=MyUID;PWD=MYPASSWD'
cursor = cnxn.cursor()
cursor.execute(SQL)
# etc. 
```

谢谢你的帮助，

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:06:46.957

> 是什么意思; @ 行首？

它开始评论。 **man freetds.conf**是你的朋友。:-)

> 我不能超过前 255 个字符。

我怀疑您使用的是协议版本 4.2，因为您使用的是无 DSN 连接并且没有提及设置默认值。还因为 TDS 4.2 将 VARCHAR 列限制为 255 个字符。

您可以将协议版本添加到连接字符串，参见。[http://www.freetds.org/userguide/odbcconnattr.htm](http://www.freetds.org/userguide/odbcconnattr.htm)。

# sql-server - XP_FileExists 不适用于网络驱动器

> ID：13381857
> 
> 赞同：1
> 
> 时间：2012-11-14T15:30:36.977
> 
> 标签：sql-server, sql-server-2008, tsql

我能够在我的 SQL Server 实例的本地驱动器上成功运行 xp_fileexists 命令。如果文件存在，则输出为 1。如果文件不存在，则输出为 0。当我在 SQL Server 机器上映射的网络驱动器上运行相同的命令时，输出始终为 0。

例如，如果我有一个 URL 为“\\10.188.20.5\myfolder\myfile.txt”的文件。我会跑

```
SET @MYFILE = '\\10.188.20.5\myfolder\myfile.txt'
EXEC MASTER.DBO.XP_FILEEXIST @MYFILE, @MYOUTPUT OUT
PRINT @MYOUTPUT 
```

结果将返回 0。

如果我在同一个 URL 上运行批量插入命令，文件将被成功导入

```
BULK INSERT #mytable
FROM '\\10.188.20.5\myfolder\myfile.txt' 
```

是什么导致 xp_fileexists 在网络驱动器上出现故障？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:33:51.787

问题出在用于运行 SQL Server 的管理员帐户密码上。密码已更改，但 SQL Server 继续运行。只是因为密码冲突，'MASTER.DBO.XP_FILEEXIST' 不起作用，但其他 SQL Server 函数起作用。一旦我更改了与用于运行 SQL Server 的管理员帐户关联的密码，该功能就按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:36:43.493

它取决于服务通常本地系统的凭据，该系统没有网络访问权限

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-16T13:27:55.737

转到 >> Sql Server 配置管理器 >> 在左侧面板上转到 SQL Server 服务 >> 选择您自己的实例 (MyPc\Sqlexpress) 并输入帐户名、用户名和密码。

现在它应该可以工作了

# python - 类范围内的闭包

> ID：13381861
> 
> 赞同：5
> 
> 时间：2012-11-14T15:30:46.610
> 
> 标签：python, class, scope

据我了解，函数和类作用域的行为几乎相同：

```
>>> def x():
...     a = 123
...     print (locals())
... 
>>> x()
{'a': 123}

>>> class x():
...     a = 123
...     print (locals())
... 
{'a': 123, '__module__': '__main__'} 
```

然而，当我定义一个闭包时，行为是不同的。正如预期的那样，函数只是返回本地绑定：

```
>>> def x():
...     a = 123
...     t = lambda: a
...     return t
... 
>>> x()()
123 
```

而在一个类中，绑定似乎丢失了：

```
>>> class x():
...     a = 123
...     t = lambda self: a
... 
>>> x().t()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in <lambda>
NameError: global name 'a' is not defined 
```

谁能解释这种差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:37:30.270

类作用域是一个*临时*作用域，它只在执行类定义主体时存在。结果`dict`用于创建类的命名空间，`__dict__`即类的。

就类中定义的函数而言，下一个“向上”范围是`class`定义本身的范围。

以下工作正常：

```
>>> def foo():
...     spam = 'eggs'
...     class Bar(object):
...         def baz(self): return spam
...     return Bar()
... 
>>> foo().baz()
'eggs' 
```

这记录在[pep 227](http://www.python.org/dev/peps/pep-0227/)中：

> 类范围内的名称不可访问。名称在最里面的封闭函数范围内解析。如果类定义出现在嵌套范围链中，则解析过程会跳过类定义。

并在[`class`复合语句文档](http://docs.python.org/2/reference/compound_stmts.html#class-definitions)中：

> 然后使用新创建的本地名称空间和原始全局名称空间在新的执行框架中执行该类的套件（请参阅[*命名和绑定部分）。*](http://docs.python.org/2/reference/executionmodel.html#naming)（通常，套件只包含函数定义。）当类的套件完成执行时，**它的执行帧被丢弃，但它的本地命名空间被保存**。[[4]](http://docs.python.org/2/reference/compound_stmts.html#id8)然后使用基类的继承列表和属性字典的保存的本地名称空间创建一个类对象。

强调我的；执行框架是临时范围。

# java - 连接两个 WAV 文件失败

> ID：13381862
> 
> 赞同：3
> 
> 时间：2012-11-14T15:30:50.783
> 
> 标签：java, javasound, javax.sound.sampled

我有这个简单的代码来连接两个 wav 文件。它非常简单，代码运行没有任何错误。但是输出文件有问题。生成的输出文件没有播放，令人惊讶的是它的大小只有 44 个字节，而我的输入文件“a.wav”和“b.wav”的大小都超过了 500Kb。

这是我的代码：

```
import java.io.File;
import java.io.IOException;
import java.io.SequenceInputStream;
import javax.sound.sampled.AudioFileFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;

public class WavConcat {
    public static void main(String[] args) {
        String wFile1 = "./sounds/a.wav";
        String wFile2 = "./sounds/b.wav";

        try {
            AudioInputStream clip1 = AudioSystem.getAudioInputStream(new File(wFile1));
            AudioInputStream clip2 = AudioSystem.getAudioInputStream(new File(wFile2));

            AudioInputStream appendedFiles = 
                            new AudioInputStream(
                                new SequenceInputStream(clip1, clip2),     
                                clip1.getFormat(), 
                                clip1.getFrameLength() + clip2.getFrameLength());

            AudioSystem.write(appendedFiles, 
                            AudioFileFormat.Type.WAVE,new File("./sounds/ab.wav"));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:43:12.007

试试这种结构。这对我有用

```
List audioInputStreamList = new ArrayList();

    String wFile1 = "./sounds/a.wav";
    String wFile2 = "./sounds/b.wav";

 AudioInputStream audioInputStream1 = AudioSystem.getAudioInputStream(new File(wFile1));
 AudioInputStream audioInputStream2 = AudioSystem.getAudioInputStream(new File(wFile2));

 audioInputStreamList.add(audioInputStream1);
 audioInputStreamList.add(audioInputStream2);

 AudioFormat audioFormat = audioInputStream1.getFormat(); // audioInputStream2 format also same

 AudioInputStream udioInputStream = new SequenceAudioInputStream(audioFormat,audioInputStreamList);

 AudioSystem.write(audioInputStream, AudioFileFormat.Type.WAVE,new File("./sounds/ab.wav")); 
```

**更新**

检查[SequenceAudioInputStream](http://www.jsresources.org/examples/SequenceAudioInputStream.java.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:57:37.233

> `clip1.getFormat()`返回-->

```
MPEG2L3 24000.0 Hz, unknown bits per sample, mono, unknown frame size, 41.666668 frames/second 
```

> `clip2.getFormat()`返回-->

```
MPEG2L3 24000.0 Hz, unknown bits per sample, mono, unknown frame size, 41.666668 frames/second 
```

这是一种奇怪的格式。我可以想象“每个样本的未知位”会导致问题，但也会导致问题，`MPEG2L3`因为 JavaSound 没有内置的 MP3 编码器。似乎它们没有正确编码。尝试将它们加载到声音编辑软件中并将它们保存为 Java Sound 可以“开箱即用”理解的 WAV 或 AU 类型。希望编辑软件：

1.  能听懂破碎的MP3，和..
2.  将写入有效的 WAV 或 AU。

如果您可以在转换过程中将它们转换为 8 位单声道和 8KHz，它可能会将`byte[]`大小减少 6 到 1 倍。8KHz 被认为足以理解语音，为此您需要提供组合的字节对浏览器发出声音 - 所以减小它的大小是至关重要的。

# javascript - 如何在不丢失复选框信息的情况下向转发器添加新行

> ID：13381866
> 
> 赞同：0
> 
> 时间：2012-11-14T15:30:59.863
> 
> 标签：javascript, asp.net, checkbox, repeater

我有一个简单的中继器，每行包含一个复选框和一个全名。此外，我还有一个“添加名称”按钮，可以为数据库添加一个新的全名。

假设用户选中了几个复选框并决定添加另一个名称，我希望能够向转发器添加一个新名称，而不会丢失已选中的复选框中的信息。

我了解一些 javascript 代码可能会解决问题，问题是如何处理它？我该怎么办？

提前致谢

ps 我很高兴听到任何建议，而不是关于 js 的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:26:34.980

这取决于你如何处理它。您是否在 Ajax 更新面板中使用 asp.net 中继器？如果是这种情况，您可以在每次单击事件中保存复选框值，这样当您添加新项目时，控件将与更新的值重新绑定。

如果您喜欢使用客户端 javascript，thie 帖子可以帮助您： [How to add rows to a repeater in client](https://stackoverflow.com/questions/3446166/how-to-add-rows-to-a-repeater-in-client-side)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:04:32.467

这是快速解决方案，不是很漂亮，但可以完成工作。希望能给你一些新的想法

默认.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace RepeaterCheckbox
{
    public partial class _Default : System.Web.UI.Page
    {
        [Serializable]
        public class Person
        {
            public int Id { get; set; }
            public string Name { get; set; }
        }

        List<Person> personsFromDatabase
        {
            get { return (List<Person>)ViewState["persons"]; }
            set { ViewState["persons"] = value; }
        }

        //here we will store our person selection state
        Dictionary<int,bool> personSelectionState
        {
            get { return (Dictionary<int, bool>)ViewState["data"]; }
            set { ViewState["data"] = value; }
        }

        protected override void OnLoad(EventArgs e)
        {
            if (!IsPostBack)
            {
                #region Test data
                personsFromDatabase = new List<Person>{
                    new Person { Id = 1, Name = "Paul", },
                    new Person { Id = 2, Name = "Tom", },
                };
                #endregion

                Bind(false);
            }
            base.OnLoad(e);
        }

        void Bind(bool isPostback)
        {
            if (!isPostback)
            {
                //initialize person selection mapping
                personSelectionState = new Dictionary<int, bool>();
                foreach (Person person in personsFromDatabase)
                personSelectionState.Add(person.Id, false);
            }

            //map persons to anonymous type that will help us define necessary values
            rpPersons.DataSource = personsFromDatabase.Select(x => new
            {
                Id = x.Id,
                Name = x.Name,
                //get stored selection state for person
                Selected = personSelectionState[x.Id],
            });
            rpPersons.DataBind();
        }

        protected void btnAddPerson_Click(object sender, EventArgs e)
        {
            //update selection states
            UpdateSelectionStatuses();

            if (!String.IsNullOrEmpty(txbName.Text))
            {
                //add new person
                personsFromDatabase.Add(new Person
                    {
                        Id = personsFromDatabase.Count +1,
                        Name = txbName.Text,
                    });

                //add status mapping for new person so there is no error on postback binding
                personSelectionState.Add(personsFromDatabase.Count, false);

                //Refresh data on page, to see new person
                Bind(true);
            }
        }

        void UpdateSelectionStatuses()
        {
            //loop through all items
            for (int i = 0; i < rpPersons.Items.Count; ++i)
            {
                RepeaterItem repeaterItem = rpPersons.Items[i];

                //find checkbox for item
                var checkbox = (CheckBox)repeaterItem.FindControl("chbSelected");
                if (checkbox != null)
                {
                    //get our custom attribute
                    int id = int.Parse(checkbox.Attributes["personId"]);

                    //update stored checkbox status
                    personSelectionState[id] = checkbox.Checked;
                }
            }
        }

        protected void rpPersons_ItemDataBound(object sender, RepeaterItemEventArgs e)
        {
            if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
            {
                var item = e.Item.DataItem;

                var checkbox = (CheckBox)e.Item.FindControl("chbSelected");
                if (item != null && checkbox != null)
                {
                    //get person id from our helper anonymous type
                    System.Reflection.PropertyInfo[] anonymousTypeProperties = item.GetType().GetProperties();
                    int id = (int)anonymousTypeProperties.Where(x => x.Name == "Id").FirstOrDefault().GetValue(item, null);

                    //set custom attribute on checkbox to map checkbox with person
                    checkbox.Attributes["personId"] = id.ToString();
                }
            }
        }
    }
} 
```

默认.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="RepeaterCheckbox._Default" %> 
```

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <asp:Repeater runat="server" ID="rpPersons" OnItemDataBound="rpPersons_ItemDataBound" >
                <ItemTemplate>
                    <p>
                        <asp:CheckBox ID="chbSelected" runat="server" AutoPostBack="false" Checked='<%# DataBinder.Eval(Container.DataItem, "Selected") %>' />
                        <asp:Label ID="lblName" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "Name") %>' />
                    </p>
                </ItemTemplate>
            </asp:Repeater>
            <div>
                <asp:TextBox ID="txbName" runat="server" />
                <asp:Button ID="btnAddPerson" runat="server" Text="Add person" OnClick="btnAddPerson_Click" />
            </div>
        </div>
    </form>
</body>
</html> 
```

# c# - C# - 连接到 (RAS) VPN 时如何获取 IP 地址

> ID：13381871
> 
> 赞同：2
> 
> 时间：2012-11-14T15:31:18.823
> 
> 标签：c#, c#-4.0, network-programming, ip-address

下午好，

当本地计算机通过 VPN (RAS) 连接到远程 Windows 域网络时，任何人都可以举例说明如何获取本地计算机的 IP 地址吗？即我需要VPN 地址而不是远程用户的本地网络地址。

例如，我的服务器端 Windows 服务与我的客户端应用程序通信，需要创建所有连接用户及其 IP 地址的日志。

在本地网络上使用计算机时，此解决方案非常简单，但我想知道如何获取通过 VPN 连接到服务器的用户的 IP 地址。请注意，IP 地址**获取**方法将在客户端执行并发送到服务器。

**这是我当前的代码，仅在本地连接到域网络时才有效：**

```
public static string GetLocalIPv4()
{
    string ipv4Address = String.Empty;

    foreach (IPAddress currrentIPAddress in Dns.GetHostAddresses(Dns.GetHostName()))
    {
        if (currrentIPAddress.AddressFamily.ToString() == System.Net.Sockets.AddressFamily.InterNetwork.ToString())
        {
            ipv4Address = currrentIPAddress.ToString();
            break;
        }
    }

    return ipv4Address;
} 
```

我们的内部网络由 Windows SBS 控制并使用诸如 mycompany.local 之类的域。

非常感谢您抽出宝贵的时间，我期待着阅读您的回复。

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:40:48.387

正如@MarcB 的评论所指出的那样，想不出一个很好的理由为什么你可能想要这些信息......所以如果你能出于好奇而在应用程序中解释它的用途会很有趣。

但是，这里和网上有很多关于使用 Dns.GetHostAddresses 枚举机器 IP 地址的错误答案。似乎大多数人都没有意识到在配置的 DNS 解析器中查找机器名称与枚举机器地址之间的区别。这些是非常不同的事情，虽然在许多情况下它似乎返回了正确的结果，但这绝对是错误的做法，因为它们不是一回事。例如，请参阅此处指向文章的链接，其中原始发帖人将不正确的响应标记为答案，但正确的响应在 @StephanCleary 下方。请参阅： [获取 IPv4 地址](https://stackoverflow.com/a/6668909/964043)

不同之处在于您要查看机器配置并枚举您有兴趣从机器自己的 TCPIP 堆栈中定位的任何 IP 地址。上面的代码和许多不正确的响应尝试在 DNS 解析器中查找名称。一旦该部分正确，那么您应该能够根据网络适配器（通过名称或其他属性）确定 VPN 连接。

# bash - 替换环境变量的命令行工具

> ID：13381872
> 
> 赞同：2
> 
> 时间：2012-11-14T15:31:20.753
> 
> 标签：bash, environment-variables, sh, substitution

如果有一个 UNIX 工具可以用环境变量的实际值替换`$VAR`or `${VAR}`（对于环境中的所有现有变量，而不仅仅是一个），我很感兴趣。此替换位于纯文本文件中，而不是 bash 脚本中；一个“穷人的模板引擎”之类的。

我知道我能做到

`(echo 'echo -n "'; sed -e "s/\"/\"'\"'\"/g" infile; echo '"') | sh -s >outfile`

（事实上​​，我确实这样做了），但如果有一个众所周知的工具，我宁愿使用它而不是聪明的`sh`技巧。

编辑：@glennjackman 建议使用`eval`，因此该行更短且没有子外壳：

`eval echo -n \""`sed -e 's/"/\\\\\\\"/g' infile`"\" >outfile`

这很短（虽然不是专用工具，但如果没有就足够了）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:54:39.817

一个例子`eval`

```
tmpl='Hello $x'
x=world
eval str=\"$tmpl\"
echo $str   # => Hello world 
```

如果您的模板嵌入了双引号，这将变得混乱。

# xcode - Objective-C：在球体上绘制多边形

> ID：13381881
> 
> 赞同：1
> 
> 时间：2012-11-14T15:31:49.543
> 
> 标签：xcode, uiview, geometry, draw

我有二维空间 [x,y] 中的多边形坐标（例如 5 个点），我想在球体/曲面上绘制相同的形状。

最好的方法是什么？

例如如何在从 UIView 派生的对象中实现自定义绘图功能...

先感谢您！阿尔多

# javascript - dragBoundFunc 中的鼠标位置

> ID：13381882
> 
> 赞同：3
> 
> 时间：2012-11-14T15:31:50.017
> 
> 标签：javascript, canvas, kineticjs

我正在使用[kineticjs](http://kineticjs.com/)在画布上绘制一些小部件。这个小部件是 600px 宽，由几个矩形组成（默认为 24​​ 个）。在这个矩形上可以拖动另一个矩形，我们称之为“光标”。

我希望光标仅在鼠标足够远时才跳转到其他矩形，而不是平滑拖动（如果您愿意，可以像步进拖动一样）。

例如，如果光标位于 0,0 并且我总共有 24 个矩形，我希望我的光标仅在鼠标位于 25,0（600px / 24 个矩形 = 25px）时移动到下一个矩形。

为此，我实施了：

```
cursor.setDragBoundFunc(function(pos){
    var caseSize = WIDTH / caseNum;
    var posX = Math.round(pos.x/caseNum) * caseSize;
    if(posX > (WIDTH - caseSize)) {
        posX = WIDTH - caseSize;
    }

    if(posX < 0 ) {
        posX = 0;
    }

    return {
        x: posX, 
        y: cursor.getAbsolutePosition().y
    }
}); 
```

问题`pos.x`不代表画布中的鼠标位置，而是从拖动事件开始的鼠标位置（即使我从画布中间开始拖动，pos 也将为 0,0）。

这是问题的一个例子：http: [//jsfiddle.net/H9rpz/](http://jsfiddle.net/H9rpz/)

如何在画布中获取鼠标位置`setDragBoundFunc()`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T06:56:30.893

这个确切的功能已在 KineticJS 手动测试中实现。这是您要查找的代码：

[https://github.com/ericdrowell/KineticJS/blob/master/tests/js/manualTests.js#L1004](https://github.com/ericdrowell/KineticJS/blob/master/tests/js/manualTests.js#L1004)

试试看 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:34:46.717

除了@Jan 的回答，你的数学有点偏离：

```
cursor.setDragBoundFunc(function(pos, event){
    var posX = event.offsetX;
    posX = Math.floor(posX/WIDTH * caseNum) * caseWidth;
    ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:13:26.580

该`setDragBoundFunc`函数似乎接受两个参数，第二个是一个`event`可能包含您所追求的对象：

```
cursor.setDragBoundFunc(function(pos, event){
   var posX = event.offsetX;
   ....
}); 
```

在函数的开头还有一个数学逻辑错误。它应该是：

```
cursor.setDragBoundFunc(function(pos, event){
   var caseSize = WIDTH / caseNum;
   var posX = event.offsetX;
   posX = Math.floor(posX /  caseSize) *  caseSize; // This right here
   ...
}); 
```

工作示例：http: [//jsfiddle.net/H9rpz/3/](http://jsfiddle.net/H9rpz/3/)

# c# - 如何对调用 Response.AppendToLog 的方法进行单元测试？

> ID：13381884
> 
> 赞同：2
> 
> 时间：2012-11-14T15:31:51.337
> 
> 标签：c#, unit-testing, httpcontext

我正在编写一个将数据写入其中的公共函数，`HttpContext.Current.Response.AppendToLog`有没有办法为此编写单元测试？

我尝试创建`HttpContext`并分配给的模拟/自定义对象，`HttpContext.Current`但如何断言 AppendToLog 写入的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:38:47.343

制作一个接口并用一个实现包装 HttpContext。

```
public interface IHttpContext
{
    void AppendToResponseLog(/*parmas go here*/);
}

public class HttpContextWrapper : IHttpContext
{
    private HttpContext _httpContext = HttpContext.Current; //or constructor param

    public void AppendToResponseLog(/*parmas go here*/)
    {
        _httpContext.Response.AppendToLog(/*params*/);
    }  
} 
```

现在让你的类依赖于`IHttpContext`而不是`HttpContext.Current`. 至于测试，您现在可以模拟`IHttpContext`.

注意：对您希望能够测试/模拟的所有 .NET Framework 依赖项使用相同的方法。

# html - UIWebView 从包中加载 html 文件，并提供文件信息？

> ID：13381886
> 
> 赞同：0
> 
> 时间：2012-11-14T15:31:53.003
> 
> 标签：html, objective-c, uiwebview, error-handling

我有兴趣复制 Mobile Safari 的“无法打开页面”StandardError 页面。

为了做到这一点，我一直在研究加载页面并打开位于应用程序包中的 html 文件时移动 safari 句柄如何出错。

在该包中，文件：StandardError.html 已加载，并在显示移动 safari 图标时产生错误。我遇到的一件事是了解错误如何从 webview 传递到 html 文件。

在 html 文件的正文中，有一个带有 %@ 的变量。我假设 %@ 指示 Apple 提供导致 webview 加载失败的错误的位置。我想知道的是如何为 html 文件提供标题和错误，类似于 Mobile Safari 应用程序包中的 StandardError.html 文件。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:30:29.600

A`UIWebView`可以从字符串加载 HTML，因此您可以这样做：

```
NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"StandardError" ofType:@"html"];
NSString* errorHTML = [NSString stringWithContentsOfFile:htmlFile encoding:NSUTF8StringEncoding error:nil];
NSString *htmlString = [NSString stringWithFormat:errorHTML, weberror.localizedDescription];
[self.webView loadHTMLString:htmlString baseURL:nil]; 
```

或类似的东西。

# input - 如何将具有相似数据的行组合成pentaho中的集合

> ID：13381889
> 
> 赞同：0
> 
> 时间：2012-11-14T15:32:01.237
> 
> 标签：input, row, pentaho

我有一个 SQL 视图步骤 1，它为我提供表单中的数据

```
Pool ID | Pool Alias Name
-----------------------
   1    | pool alias 1   
   1    | pool alias 2   
   2    | pool alias 2-1 
```

现在我想在下一步，即第2步将数据组合成一个xml字符串

```
 <POOL>
    <POOLID>1</POOLID>
    <LIST>
      <POOLALIASNAME>pool alias 1</POOLALIASNAME>
      <POOLALIASNAME>pool alias 2</POOLALIASNAME>
    </LIST>
    </POOL> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:21:37.327

您是否使用 PDI/Kettle 即 ETL 工具？我假设你是这样；正在谈论步骤..

您的数据是否已经按池 ID 和池别名排序？如果是这样，您不需要额外的“排序行”步骤。因此，您现在需要的只是 XML 输出步骤。

你试过这个吗？你有什么问题？

# c# - 在 IRC 上回复“没有 Ident 回复”

> ID：13381895
> 
> 赞同：0
> 
> 时间：2012-11-14T15:32:18.247
> 
> 标签：c#

我正在用 c# 编写一个 IRC 客户端，但我总是收到“No ident response”消息并且它只是断开连接。

代码

```
TcpClient client = new TcpClient(args[0], port); 
sock.Connect(serverEndPoint);

NetworkStream stream = client.GetStream();
NetworkStream streamw = client.GetStream();

System.IO.StreamReader reader = new System.IO.StreamReader(stream);
System.IO.StreamWriter writer = new System.IO.StreamWriter(streamw);

writer.WriteLine("loaloaloa");
IPEndPoint rep = (IPEndPoint)sock.LocalEndPoint;

        while (true)
        {
            string bytes = reader.ReadLine();
            Console.WriteLine("Received: {0}", bytes);

            if (String.IsNullOrEmpty(bytes))
                break;
        } 
```

这是消息

```
:kornbluth.freenode.net NOTICE * :*** Looking up your hostname...
:kornbluth.freenode.net NOTICE * :*** Checking Ident
:kornbluth.freenode.net NOTICE * :*** Found your hostname
:kornbluth.freenode.net NOTICE * :*** No Ident response
ERROR :Closing Link: 127.0.0.1 (Connection timed out) 
```

我发现我必须在端口 113 上侦听才能获取消息，然后以相同的消息和更多信息进行响应。

所以我的问题是我如何开始监听端口 113，我将如何接受消息并响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:39:35.373

由于 @Miserable_Variable 已经链接到，您需要一个在 tcp:113 上运行的 ident 服务

在该端口上，您将收到来自 IRCd 的连接，该连接将为您提供类似

"xxxxx, 6667" 其中 xxxxx 是您这边 IRC 连接的端口号，显然 6667 是 IRCd 那边的端口号 ...

如果您回复“xxxxx, 6667 : USERID: UNIX: yyyyy”，其中 yyyyy 代表您的用户名，xxxxx 代表请求的端口号，IRCd 应该接受您的连接（除非您自己被禁止...）

# mysql - 带有“:references”的 Rails 列——混乱

> ID：13381896
> 
> 赞同：0
> 
> 时间：2012-11-14T15:32:18.330
> 
> 标签：mysql, ruby-on-rails, activerecord

我有一个用户表“belongs_to :user_category”和 user_category “has_many :users”。我正在尝试将类型设置为“：references”，就像这样......

```
class AddUserCategoryToUsers < ActiveRecord::Migration
  def change
    add_column :users, :user_category, :references, :default => 1
  end
end 
```

但它似乎没有工作：

```
==  CreateUsers: migrating ====================================================
-- create_table(:users)
   -> 0.0114s
==  CreateUsers: migrated (0.0115s) ===========================================

==  CreateUserCategories: migrating ===========================================
-- create_table(:user_categories)
   -> 0.0118s
==  CreateUserCategories: migrated (0.0119s) ==================================

==  AddUserCategoryToUsers: migrating =========================================
-- add_column(:users, :user_category, :references, {:default=>1})
rake aborted!
An error has occurred, all later migrations canceled:

Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'references DEFAULT 1' at line 1: ALTER TABLE `users` ADD `user_category` references DEFAULT 1

Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

这是完整的跟踪：

```
-- add_column(:users, :user_category, :references, {:default=>1})
rake aborted!
An error has occurred, all later migrations canceled:

Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'references DEFAULT 1' at line 1: ALTER TABLE `users` ADD `user_category` references DEFAULT 1
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:245:in `query'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:245:in `block in execute'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:245:in `execute'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/connection_adapters/mysql2_adapter.rb:211:in `execute'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:461:in `add_column'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:466:in `block in method_missing'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:438:in `block in say_with_time'
/Users/jakebuob/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/benchmark.rb:280:in `measure'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:438:in `say_with_time'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:458:in `method_missing'
/Users/jakebuob/Sites/pears/db/migrate/20121114033751_add_user_category_to_users.rb:3:in `change'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:407:in `block (2 levels) in migrate'
/Users/jakebuob/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/benchmark.rb:280:in `measure'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:407:in `block in migrate'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:123:in `with_connection'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:389:in `migrate'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:528:in `migrate'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:720:in `block (2 levels) in migrate'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:777:in `call'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:777:in `ddl_transaction'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:719:in `block in migrate'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:700:in `each'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:700:in `migrate'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:570:in `up'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/migration.rb:551:in `migrate'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:153:in `block (2 levels) in <top (required)>'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/jakebuob/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/bin/rake:19:in `load'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286@global/bin/rake:19:in `<main>'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/bin/ruby_noexec_wrapper:14:in `eval'
/Users/jakebuob/.rvm/gems/ruby-1.9.3-p286/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:migrate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:37:40.223

该`:references`类型不存在。您需要创建真正的列。

```
class AddUserCategoryToUsers < ActiveRecord::Migration
  def change
    add_column :users, :user_category_id, :integer, :default => 1
  end
end 
```

创建索引也是一个好主意。

```
class AddUserCategoryToUsers < ActiveRecord::Migration
  def change
    add_column :users, :user_category_id, :integer, :default => 1
    add_index :users, :user_category_id
  end
end 
```

该`.references`方法仅作为表定义的一部分存在（[这是一个示例](https://stackoverflow.com/questions/493777/add-column-for-references-rails)）

```
class AddUserCategoryToUsers < ActiveRecord::Migration
  def change
    change_table :users do |t|
      t.references :user_category, :default => 1
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:36:26.567

“参考”不是列类型。您可以在创建/修改表时使用 references 方法，但 Rails 所做的只是为您添加一个整数列。相反，您想要添加一个名为 user_category_id 的列，输入整数，然后确保在模型中正确设置关联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-06T13:05:27.117

要在迁移中添加引用，您可以使用：

```
class AddUserCategoryToUsers < ActiveRecord::Migration
  def change
    add_reference :users, :user_category, :default => 1
  end
end 
```

# c# - 无论如何要并行产量c#

> ID：13381897
> 
> 赞同：9
> 
> 时间：2012-11-14T15:32:27.737
> 
> 标签：c#, c#-4.0, parallel-processing

我有多个枚举器来枚举平面文件。我最初在 Parallel Invoke 中有每个枚举器，每个 Action 都添加到 a`BlockingCollection<Entity>`中，并且集合返回 ConsumingEnumerable();

```
public interface IFlatFileQuery
{
    IEnumerable<Entity> Run();
}

public class FlatFile1 : IFlatFileQuery
{
    public IEnumerable<Entity> Run()
    {
        // loop over a flat file and yield each result
        yield return Entity;
    }
} 

public class Main
{
    public IEnumerable<Entity> DoLongTask(ICollection<IFlatFileQuery> _flatFileQueries)
    {
            // do some other stuff that needs to be returned first:
            yield return Entity;

            // then enumerate and return the flat file data
        foreach (var entity in GetData(_flatFileQueries))
        {
            yield return entity;
        }
    }

    private IEnumerable<Entity> GetData(_flatFileQueries)
    {
        var buffer = new BlockingCollection<Entity>(100);

        var actions = _flatFileQueries.Select(fundFileQuery => (Action)(() =>
        {
            foreach (var entity in fundFileQuery.Run())
            {
                buffer.TryAdd(entity, Timeout.Infinite);
            }
        })).ToArray();

        Task.Factory.StartNew(() =>
        {
            Parallel.Invoke(actions);

            buffer.CompleteAdding();
        });

        return buffer.GetConsumingEnumerable();
    }
} 
```

然而，经过一些测试后发现，下面的代码更改速度提高了大约 20-25%。

```
private IEnumerable<Entity> GetData(_flatFileQueries)
{
    return _flatFileQueries.AsParallel().SelectMany(ffq => ffq.Run());
} 
```

代码更改的问题在于，它要等到所有平面文件查询都被枚举出来，然后才会返回可以枚举和生成的全部内容。

是否有可能在上面的代码中以某种方式让步以使其更快？

我应该补充一点，所有平面文件查询的组合结果最多可能只有 1000 个左右的实体。

**编辑**：将其更改为以下内容不会对运行时间产生影响。（R# 甚至建议回到原来的样子）

```
private IEnumerable<Entity> GetData(_flatFileQueries)
{
        foreach (var entity in _flatFileQueries.AsParallel().SelectMany(ffq => ffq.Run()))
        {
            yield return entity;
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:52:28.440

> 代码更改的问题在于，它要等到所有平面文件查询都被枚举出来，然后才会返回可以枚举和生成的全部内容。

让我们通过一个简单的例子来证明它是错误的。首先，让我们创建一个`TestQuery`在给定时间后将产生单个实体的类。其次，让我们并行执行几个测试查询并测量产生结果所需的时间。

```
public class TestQuery : IFlatFileQuery {

    private readonly int _sleepTime;

    public IEnumerable<Entity> Run() {
        Thread.Sleep(_sleepTime);
        return new[] { new Entity() };
    }

    public TestQuery(int sleepTime) {
        _sleepTime = sleepTime;
    }

}

internal static class Program {

    private static void Main() {
        Stopwatch stopwatch = Stopwatch.StartNew();
        var queries = new IFlatFileQuery[] {
            new TestQuery(2000),
            new TestQuery(3000),
            new TestQuery(1000)
        };
        foreach (var entity in queries.AsParallel().SelectMany(ffq => ffq.Run()))
            Console.WriteLine("Yielded after {0:N0} seconds", stopwatch.Elapsed.TotalSeconds);
        Console.ReadKey();
    }

} 
```

此代码打印：

> 1 秒
> 后输出 2 秒
> 后输出 3 秒后输出

您可以看到此输出`AsParallel()`将在每个结果可用时立即产生，因此一切正常。请注意，根据并行度的不同，您可能会得到不同的时序（例如并行度为 1 的“2s、5s、6s”，有效地使整个操作根本不并行）。此输出来自 4 核机器。

如果线程之间没有共同的瓶颈（例如共享锁定资源），您的长时间处理可能会随着内核数量的增加而扩展。您可能想要分析您的算法，以查看是否有可以使用[dotTrace](http://www.jetbrains.com/profiler/)等工具改进的慢速部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:24:15.283

我认为您的代码中的任何地方都没有危险信号。没有令人发指的低效率。我认为这归结为多个较小的差异。

PLINQ 非常擅长处理数据流。在内部，它比将项目逐个添加到同步列表更有效。我怀疑您的呼叫`TryAdd`是一个瓶颈，因为每个呼叫都需要在内部至少进行两次`Interlocked`操作。这些会给处理器间内存总线带来巨大的负载，因为所有线程都将竞争相同的高速缓存行。

PLINQ 更便宜，因为它在内部进行了一些缓冲。我确定它不会一个接一个地输出项目。可能它将它们分批并以这种方式将同步成本摊销到多个项目上。

第二个问题是`BlockingCollection`. 100不是很多。这可能会导致很多等待。等待代价高昂，因为它需要调用内核和上下文切换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-20T06:00:17.607

我做了这个在任何情况下都对我有用的替代方案：

这对我有用：

*   在 ConcurrentQueue 中的 Parallel.Foreach 队列中的任务中，转换为要处理的项目。
*   该任务有一个继续标记该任务结束的标志。
*   在同一个执行线程中，任务结束一段时间出队并产生

对我来说快速而出色的结果：

```
Task.Factory.StartNew (() =>
{
    Parallel.ForEach<string> (TextHelper.ReadLines(FileName), ProcessHelper.DefaultParallelOptions,
    (string currentLine) =>
    {
        // Read line, validate and enqeue to an instance of FileLineData (custom class)
    });
}).
ContinueWith 
(
    ic => isCompleted = true 
);

while (!isCompleted || qlines.Count > 0)
{
    if (qlines.TryDequeue (out returnLine))
    {
        yield return returnLine;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-08T01:53:17.603

默认情况下，[`ParallelQuery`](https://docs.microsoft.com/en-us/dotnet/api/system.linq.parallelquery)该类在处理`IEnumerable<T>`源时采用称为“块分区”的分区策略。使用这种策略，每个工作线程每次都会抓取越来越多的项目。这意味着它有一个输入缓冲区。然后将结果累积到一个输出缓冲区中，该缓冲区的大小由系统选择，然后才可供查询的使用者使用。您可以使用配置选项[`EnumerablePartitionerOptions.NoBuffering`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.enumerablepartitioneroptions)和[`ParallelMergeOptions.NotBuffered`](https://docs.microsoft.com/en-us/dotnet/api/system.linq.parallelmergeoptions).

```
private IEnumerable<Entity> GetData(ICollection<IFlatFileQuery> flatFileQueries)
{
    return Partitioner
        .Create(flatFileQueries, EnumerablePartitionerOptions.NoBuffering)
        .AsParallel()
        .AsOrdered()
        .WithMergeOptions(ParallelMergeOptions.NotBuffered)
        .SelectMany(ffq => ffq.Run());
} 
```

这样，每个工作线程一次只会抓取一个项目，并在计算结果后立即传播结果。

> **NoBuffering：**创建一个分区器，它一次从可枚举的源中获取项目，并且不使用可以被多个线程更有效地访问的中间存储。此选项提供对低延迟的支持（项目将在源可用时立即处理）并为项目之间的依赖关系提供部分支持（线程不能死锁等待线程本身负责处理的项目）。

> **NotBuffered：**使用没有输出缓冲区的合并。计算出结果元素后，立即将该元素提供给查询的使用者。

# sql - 如何解决 SQL0418N 错误

> ID：13381898
> 
> 赞同：6
> 
> 时间：2012-11-14T15:32:31.280
> 
> 标签：sql, db2, upsert

我正在使用下面的语句将一些数据更新/插入到表中，如果我在没有参数的情况下运行它，那很好。但是，一旦我尝试使用它抛出的参数执行它：

**SQL0418N - 语句包含对无类型参数标记、DEFAULT 关键字或无效空值的使用**。

我已阅读[此处](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.messages.sql.doc/doc/msql00418n.html)的错误信息，但我仍在为为什么我的语句无法执行而苦苦挣扎。

```
--This statement works
MERGE Into AB.Testing_Table A
USING (VALUES('TEST', 'P')) B(TEST_ID, "ACTION")
ON (A.TEST_ID = B.TEST_ID)
WHEN NOT MATCHED THEN
INSERT (TEST_ID, "ACTION")
VALUES ('TEST', 'P')
WHEN MATCHED THEN
UPDATE SET TEST_ID = 'TEST'
,"ACTION" = 'P';

--This statement fails with error SQL0418N
MERGE Into AB.Testing_Table A
USING (VALUES(@TEST, @ACTION)) B(TEST_ID, "ACTION")
ON (A.TEST_ID = B.TEST_ID)
WHEN NOT MATCHED THEN
INSERT (TEST_ID, "ACTION")
VALUES (@TEST, @ACTION)
WHEN MATCHED THEN
UPDATE SET TEST_ID = @Test
,"ACTION" = @Action; 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T15:48:49.870

基本上，DB2 不知道您在这些参数上发送什么数据类型。我猜您使用的是旧版本的 DB2（Linux/Unix/Windows 上小于 9.7，或者使用旧于 10.1 的大型机版本），它不会进行大量的“自动”类型转换。或者您正在发送`NULL`值（仍然必须“输入”，这听起来很奇怪）。

您可以通过将参数标记创建为类型化参数来解决问题（我在这里假设数据类型，使用合适的）：

```
MERGE INTO AB.TESTING_TABLE A
USING (VALUES (
          CAST(@TEST AS CHAR(4))
         ,CAST(@ACTION AS CHAR(1))
       )) B(TEST_ID, "ACTION")
   ON (A.TEST_ID = B.TEST_ID)
 WHEN NOT MATCHED THEN
     INSERT (TEST_ID, "ACTION")
     VALUES (B.TEST_ID, B.ACTION)
WHEN MATCHED THEN
     UPDATE SET "ACTION" = B.ACTION 
```

此外，由于您使用的是`MERGE`，因此您不必在`UPDATE`or`INSERT`部分中使用参数，您可以参考`USING`您传入的表中的值。此外，由于您匹配 on `TEST_ID`，因此您不需要将其包含在您的`UPDATE`声明中，因为无论如何它都不会更新。

# jquery - jQuery for 循环遍历 HTML 字符串中的嵌入元素

> ID：13381901
> 
> 赞同：2
> 
> 时间：2012-11-14T15:32:37.397
> 
> 标签：jquery, html

我有一个存储 HTML 内容的基本字符串变量。

字符串中的 html 是一个复杂的列表，如下所示：

```
<ul>
<li>One
  <ul>
    <li>a</li>
    <li>b</li>
    <li>c</li>
  </ul>
</li>
<li>Two
  <ul>
    <li>d</li>
    <li>e</li>
    <li>f
      <ul>
        <li>g</li>
        <li>h</li>
        <li>i</li>
      </ul>
    </li>
  </ul>
</li>
<li>Three</li> 
```

上面是一个简化的示例，但正如您所见，列表元素的数量是未知的。一个列表元素可以包含另一个列表。存在未知数量的级别（列表元素可以有未知的（可能最多 9 个）父级`<ul>`。

现在，当我将此字符串转换为 HTML 时，我会执行以下操作：

```
var obj = $(myHTMLString); 
```

但是，这仅返回列表元素的第一级 - 因此在下面的 for 循环中，仅搜索第一级。我知道如何搜索子元素（在代码的 else 部分），但我需要对列表的所有级别执行此操作 - 这是未知的。

```
for (var i=0; i<obj.length;i++) {
    if ( obj[i].id == someOtherVariable ) {
        //we have found it
    }
} 
```

有没有办法在我的 html 变量（obj）中搜索所有列表元素？

当我`console.log( $(myHTMLString) );`看起来像这样时，我想补充一点：

![截屏](../Images/6ee2449abf0f8858177d6cfe1461ec98.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:34:53.850

是的：

```
var lis = $(myHTMLString).find("li"); 
```

遍历它们：

```
lis.each(function(index, li){
   //do your thing. i is the index in the array, li is the li element
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:36:23.577

您可以像往常一样使用选择器，只需将 HTML 字符串用作上下文。尝试这个：

```
$('li', $(myHTMLString)).each(function() {
    // do something with the li
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:44:20.893

以及它不仅仅是`li`元素我想我会沿着子节点走

```
function searchli(object){
for each element in $(this).children()
{
if $(this) is li
{
add to selection;
}
call searchli($('this'));
}
next element;
return selection;
};

call searchli($('#list')) 
```

我会通过分配类选择或属性选择并再次在“main”中查询来选择。所以这基本上是一个遍历初始选择的每个子节点的递归函数，即使它很可能不会完全那样工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:34:45.150

`li`您可以在列表中找到所有内容：

```
var liElements= $(myHTMLString).find('li'); 
```

# r - 如何左对齐图形？

> ID：13381906
> 
> 赞同：1
> 
> 时间：2012-11-14T15:32:52.200
> 
> 标签：r, knitr

对于以下块，左对齐不起作用。生成的地图仍然具有与没有相同的左边界`fig.align='left'`

```
\documentclass[a4paper, oneside, british]{book}
\begin{document}
<<chunk.maps, fig.height=12, fig.width=21, out.width="6in", fig.align='left'>>=
library(knitr)
library(maptools)
data(wrld_simpl)
plot(wrld_simpl)
box()
@
\end{document} 
```

我将不胜感激任何帮助！

谢谢，格瑞特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:21:05.660

不是因为`fig.align="left"`不工作；正如@joran 在评论中所说，如果你把情节变小，它确实有效。有两个问题导致了工件：

1.  `par(mar)`左边距默认不为0；见`?par`；set`par(mar = c(0, 0, 0, 0))`解决了这个问题
2.  情节被写成一个段落，在 LaTeX 中默认有一定的缩进 ( `\parindent`)

要使绘图触及左边距，请尝试以下操作：

```
\documentclass{book}
\setlength{\parindent}{0pt}
\begin{document}
<<chunk.maps, fig.height=12, fig.width=21, out.width="6in", fig.align='left'>>=
library(maptools)
data(wrld_simpl)
par(mar = c(0, 0, 0, 0))
plot(wrld_simpl)
box()
@
\end{document} 
```

如果你对设置为 0 感到不舒服`\parindent`，你可以在块之后恢复它。

# mysql - 从 CloudBees 部署的 Java 应用程序以编程方式将 sql 文件导入 mysql

> ID：13381910
> 
> 赞同：0
> 
> 时间：2012-11-14T15:33:21.627
> 
> 标签：mysql, cloudbees

`.sql`从部署在 CloudBees 中的 Java 应用程序将完整文件（带有 DDL 和 DML 语句）导入 mysql 数据库的最佳方法是什么？

我是否应该尝试获取运行时进程并查看类似的方法是否有效

```
 Runtime rt = Runtime.getRuntime();
  Process pr = rt.exec("mysql -p -h ServerName DbName < dump.sql"); 
```

[（上一个问题](https://stackoverflow.com/questions/1955268/importing-a-mysql-database-dump-programmatically-through-java)中针对自托管环境的推荐解决方案，不确定在 CloudBees 托管应用程序中是否可以执行访问 mysql 的进程）？

有更好的解决方案吗？（同样，要从应用程序中执行它，`.sql`要导入的文件将由用户提供，作为他与 Web 应用程序交互的一部分）。

我真的很想避免解析`.sql`文件并通过jdbc一一发送句子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:49:12.497

我自己没有尝试过，但[Flyway](http://flywaydb.org/)似乎可以让您在 CloudBees 上初始化应用程序期间导入 SQL 文件。

Flyway 试图将流行的 Ruby[数据库迁移](http://guides.rubyonrails.org/migrations.html)概念引入 Java。Flyway 将允许您将 .sql 文件放在应用程序的类路径中，然后您可以根据需要使用一些 Java 代码来更新您的数据库。

根据他们的[迁移文档](http://flywaydb.org/documentation/migration/migrationSql.html)，您应该能够将 .sql 文件作为名为 V1__Initial_version.sql 的文件放入类路径上的 /db/migration/ 目录中。然后，您将使用[以下代码](http://flywaydb.org/documentation/api.html)在应用程序启动时触发迁移：

```
import com.googlecode.flyway.core.Flyway;
...

Flyway flyway = new Flyway();
flyway.setDataSource(...);
flyway.migrate(); 
```

我注意到[Flyway 常见问题解答](http://flywaydb.org/documentation/faq.html#Can_multiple_nodes_migrate_in_parallel?)解释说数据库在迁移期间被锁定，因此即使您在 CloudBees 上扩展应用程序以使用多个实例（非常好！！），这种方法也应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:30:19.690

试一试我猜。mysql cmd 工具可能在也可能不在主机上。如果不是，我们可能会添加它们。

另一种选择是使用 Jenkins 工作来完成。您可以公开一个 jenkins 调用并加载数据库的 api。

# matlab - 根据给定向量呈指数下降的值矩阵

> ID：13381911
> 
> 赞同：0
> 
> 时间：2012-11-14T15:33:24.063
> 
> 标签：matlab, vector, matrix

我有一个水体的太阳辐射测量向量，我想计算到达水柱中特定深度的辐射。这可以从比尔定律计算出来，我已将其应用于我的测量的第二个深度：

```
rad = 1+(30-1).*rand(365,1);
depth = 1:10;

kz = 0.4;
rad(:,2) = rad(:,1).*exp(-kz.*depth(2)); 
```

我如何将它应用于向量“深度”中指定的所有深度？即，我将如何生成一个具有 365 行和 10 列的矩阵，其中每列指的是到达该特定深度的辐射。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:51:38.247

由于散射和吸收引起的辐射衰减是一个简单的单位深度损失百分比，因此您可以从初始辐射很容易地计算出结果：

```
initialRad = 1+(30-1).*rand(365,1);
depth = 0:10; %# start with zero so that the first column is your initial radiation

kz = 0.4;
rad = bsxfun(@times, initialRad, exp(-kz*depth) ); 
```

请注意，正如@Rasman 指出的那样，您可以使用向量乘法而不是`bsxfun`，因为将 m×1 数组与 1×n 数组相乘会产生 m×n 数组。该`bsxfun`解决方案可能更稳健，因为它也适用于数组具有额外维度（例如，如果您进行多个测试，则为 m×1×k 和 1×n×k），或者如果向量是转置（例如 1×m 和 n×1）。下面的解决方案很好地展示了良好的线性代数技能，尽管您可能想添加一个注释，为什么您不使用两个向量`initialRad`和- 语句的点乘法`exp`。

```
rad = initialRad * exp(-kz * depth); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T15:40:08.540

你应该使用循环，

在这里你可以阅读关于它们的教程，以及如何使用它们，

[http://www.mathworks.com/help/distcomp/for.html](http://www.mathworks.com/help/distcomp/for.html)

基本上你需要的是一个包含 i 作为主要参数的 for 循环。应该为哪个

```
i=1 .. 9 
```

你的主要任务将变成

```
rad(:,i+1) = rad(:,i).*exp(-kz.*depth(2)); 
```

更准确地说

```
for i = drange(1:9)
   rad(:,i+1) = rad(:,i).*exp(-kz.*depth(2));
end 
```

我不知道主题，但此功能将逐列扫描您的矩阵，使用第 1 列开始分配第 2 列并一直持续到第 10 列。

# ios - 由于非本机按钮和功能，Apple App 被拒绝

> ID：13381912
> 
> 赞同：1
> 
> 时间：2012-11-14T15:33:25.147
> 
> 标签：ios, cordova, appstore-approval

在开发在 ios/android 和 bb v6+ 上运行的 phonegap 智能手机应用程序时，我使用网络服务调用谷歌地图并使用标签在应用程序中导航。我收到了来自苹果的回复，其中包含以下拒绝消息：

> 我们发现您的应用程序的用户界面存在以下问题： - 不包含 iOS 功能。例如，使用原生 iOS 按钮和 iOS 功能是合适的。需要额外的用户交互功能。

我的应用有 2 个按钮，一个用于搜索，一个用于查看搜索结果，这两个按钮都是非原生的，html <button> 标签。

是否可以在 phonegap 项目中使用本机 iOS 按钮，即使用搜索按钮（下方带有“搜索”字样的放大镜）和插件？

我的应用程序是否有可能因使用 Google 地图网络服务调用而被拒绝？如果是这样的话，我想拒绝消息将类似于上一篇文章中看到的拒绝[消息](https://stackoverflow.com/questions/10425065/app-rejection-due-to-google-map-branding)

任何想法/建议/指南都会很棒，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:55:50.370

您可以实现[NativeControls](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/NativeControls)插件。从您的屏幕截图来看，iOS 选项卡栏应该与您的应用程序配合良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:51:04.007

不使用本机控件本身不是问题。但是，您的应用程序与标准 iOS 设置页面的外观太接近，这意味着任何不完全匹配的东西都会让人感觉很糟糕。

# javascript - FancyBox：下一个/上一个刷新页面？

> ID：13381913
> 
> 赞同：0
> 
> 时间：2012-11-14T15:33:32.510
> 
> 标签：javascript, jquery, ajax, html, fancybox

我在我的 wordpress 上安装了一个 fancybox Gallery，但我试图弄清楚如何在显示新图像时刷新页面。如果您查看这个网站[这个网站](http://blankreferrer.com/u/screenrant.com/galleries/the-amazing-spider-man-pics/)，您可以看到当您单击下一个、上一个或实际图像时，图像会刷新广告。是否可以将其添加到 FancyBox？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:02:15.867

我假设您使用的是最新的fancybox。如果您查看文档，在回调选项卡 ( [http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs) ) 中，您会看到一堆您可以定义的回调。

对于您的特定问题，请查看此 jsfiddle：http: [//jsfiddle.net/xW5gs/](http://jsfiddle.net/xW5gs/)

```
$(".fancybox").fancybox({
    afterLoad: function(current, previous) {
        // current is the current content
        // previous the previous one
        // you can access the "Available options" displayed in the docs
    }
});​ 
```

每次在fancybox中加载内容时都会调用afterLoad回调（实际图像，下一个和上一个图像）

# actionscript-3 - 用户控制的旋转矩形上的滚球帮助 AS3

> ID：13381915
> 
> 赞同：1
> 
> 时间：2012-11-14T15:33:37.057
> 
> 标签：actionscript-3, flash

我正在使用 as3 在 Flash 中创建游戏。这是我的问题。游戏的第一部分是将球在木板上保持 x 秒。我已经能够让球在木板上滚动，但无法弄清楚如何考虑球的 y 值......这是我的代码。

```
function ballRollLeft(event:Event):void{
    ball.x=ball.x+plank.rotation;
    //ball.y++;
    if(ball.x<332.7){
        var yVel:Number = plank.rotation;
        var yAcc:Number = plank.rotation;

        ball.addEventListener(Event.ENTER_FRAME, move3);
        function move3(event:Event):void{
            ball.y-=yVel;
            yVel+=yAcc;
            }
    }
}

function ballRollRight(event:Event):void{
    ball.x=ball.x+plank.rotation;
    //ball.y=ball.y-plank.rotation;
    if(ball.x>572.7){
        var yVel:Number = plank.rotation;
        var yAcc:Number = plank.rotation;

        ball.addEventListener(Event.ENTER_FRAME, move3);
        function move3(event:Event):void{
            ball.y+=yVel;
            yVel+=yAcc;
            }
        }
} 
```

它可以使球左右滚动，但 y 值不会改变，当球接近边缘时，它会飞下来并向下飞行。

对此的任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:30:44.683

跟踪 ball.y、yVel 和 yAcc 并确保它们不是 NaN 或 0。在 yVel 和 yAcc 的初始化中强制一个值。

# .net - 4.5 中的 CallerMemberName 属性是否“可以伪造”？

> ID：13381917
> 
> 赞同：26
> 
> 时间：2012-11-14T15:33:39.943
> 
> 标签：.net, wpf, .net-4.5

所以 .NET 4.5 引入了 .NET 4.5 `CallerMemberNameAttribute`，这对于任何使用 WPF 并实现的人来说似乎都是天赐之`INotifyPropertyChanged`物——我的问题是：该属性是~~4.5~~ 5.0 编译器本质上绑定/支持的，还是它更像是环境的语法糖助手，就像一个人可以通过声明`ExtensionAttribute`自己的、神奇地打开 LINQ 语法来伪造 Visual Studio？

编辑：（对不起，乔恩！）我想我是在问是否可以`CallerMemberNameAttribute`通过在适当的命名空间中重新声明属性来“启用”.NET 4.0 中的功能，就像可以在.NET 中“启用”LINQ 查询语法一样2.0 通过正确声明`ExtensionAttribute`类。我强烈的怀疑是没有，自然……

换句话说：我想知道我是否可以`CallerMemberName`从不升级到 .NET 4.5/5的功能中受益

希望这更清楚...

NinjaEdit #2：叹息...版本编号约定令人困惑！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-14T15:51:46.460

是的，正如您所说，您可以使用 LINQ 和 .NET 2。我在带有 VS2012 编译器的 .NET 4.0 项目中成功使用了以下内容：

```
namespace System.Runtime.CompilerServices {

    [AttributeUsage(AttributeTargets.Parameter, AllowMultiple = false, Inherited = true)]
    public sealed class CallerMemberNameAttribute : Attribute {
    }

} 
```

要*非常*小心，项目中的每个人都在使用 VS2012，否则他们会得到无声的错误，因为`CallerMemberNameAttribute`没有做任何事情并且`null`作为参数默认值传递。

**编辑 2013-06-28：**考虑安装为 .NET 4 和 Silverlight提供（以及 .NET 4.5 中的一些其他类）的[Microsoft.Bcl](http://nuget.org/packages/Microsoft.Bcl/)`CallerMemberNameAttribute` NuGet 包，而不是手动安装。

# visual-studio-2010 - Visual Studio 2010 C++ 智能感知

> ID：13381925
> 
> 赞同：1
> 
> 时间：2012-11-14T15:34:22.370
> 
> 标签：visual-studio-2010, visual-c++, intellisense

有人知道如何激活用 c++ 编译的 Visual Studio 2010 的智能感知吗？当我编写代码时，类中的函数永远不会出现，这使编程变得非常困难。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:38:36.227

使您的项目成为纯本机 C++ 项目（无 CLR）。Visual Studio 2010 中删除了对 C++/CLI 的 Intellisense 支持，因此仅在绝对必须的地方使用 C++/CLI。

下面的几个参考：

*   [Visual Studio vNext 中的 C++/CLI IntelliSense（VS 团队博客）](http://blogs.msdn.com/b/vcblog/archive/2011/03/03/10136696.aspx)
*   [Visual Studio 2010 中没有用于 c++/cli 的 IntelliSense？](https://stackoverflow.com/q/2681999/94928)

# c# - 如果包含两个值中的任何一个，Linq 在 c# 中查询一个字符串数组？

> ID：13381930
> 
> 赞同：6
> 
> 时间：2012-11-14T15:34:27.970
> 
> 标签：c#, string, linq

我有一个字符串数组

```
string[] tmp = foo(); 
```

如果 foo 中没有任何字符串包含“bar”或“baz”，我想执行一些代码。这是查询此对象的正确方法吗？

```
if(!tmp.Any(p => p.ToLower().Contains("bar") || p.ToLower().Contains("baz"))
 doSomething(); 
```

|| 看起来很傻。我应该在这里使用正则表达式还是有更好的方法来做到这一点？***还要注意 tmp 中的值`"bar=someValue"`就像一个查询字符串。这段代码工作正常，但我确信它可以写得更好。感谢您提供任何反馈提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:44:28.153

好点？我不知道，但应该工作。

```
if(!tmp.Select(x => x.Split('=')[0])
                    .Intersect(new[] { "foo", "baz" }, 
                               StringComparer.InvariantCultureIgnoreCase).Any())
    doSomething(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:16:49.597

您可以使用嵌套`Any`的`StringComparison`重载`IndexOf`：

```
string[] source = { "hi=there", "hello=world", "foo=bar" };
string[] exclude = { "baz", "bar" };

if (!source.Any(src => 
        exclude.Any(exl =>  
            src.IndexOf(exl, StringComparison.InvariantCultureIgnoreCase) >= 0))) 
    doSomething(); 
```

或者打包为扩展方法：

```
public static class StringExtensions {
    public static bool ContainsAny(
        this IEnumerable<string> source,
        IEnumerable<string> target,
        StringComparison comparisonType = StringComparison.InvariantCultureIgnoreCase) {
        return source.Any(xsource => target.Any(
                xtarget => xsource.IndexOf(xtarget, comparisonType) >= 0));
    }
}

// Later ...
if (!source.ContainsAny(exclude))
    doSomething(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:26:09.607

我认为您现有的代码没有任何问题；虽然可以*稍微*修改以避免额外的`ToLower()`调用：

```
var exists = tmp.Any(p => 
{ 
    var s = p.ToLower(); 
    return s.Contains("bar") || s.Contains("baz");
});
if(!exists) doSomething(); 
```

如果您的搜索词可能很多，那么这样的方法可能会更好：

```
var terms = new string[] {"bar", "baz", "foo", "boo", ...};
var exists = tmp.Any(p => terms.Any(t => p.ToLower().Contains(t)));
if(!exists) doSomething(); 
```

# c# - c#如果特定文本框为空，如何更改其颜色？

> ID：13381931
> 
> 赞同：0
> 
> 时间：2012-11-14T15:34:33.877
> 
> 标签：c#, error-handling, colors, textbox

我正在尝试更改空文本框的颜色，此表单上有多个文本框，我希望在用户单击提交时突出显示空文本框。在检查所有文本框是否都有值之后，我已经编写了下面的循环，该循环位于我的 btnSubmit 函数中。谁能帮我完成这个循环？

```
foreach (Control txtbxs in this.Controls)
{
    if (txtbxs is TextBox)
    {
        var TBox = (TextBox)txtbxs;
        if (TBox.Text == string.Empty)
        {
            TBox.ForeColor = Color.Red;
        }
    }

}
lblTopError.Text = "Please fill in the missing billing information";
pnlTopError.Visible = true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:44:19.317

如果这是您想要做的，您是否考虑过使用错误提供程序？这将帮助您向用户发出信号并提示他们输入信息。

```
 errorProvider= new  System.Windows.Forms.ErrorProvider();
        errorProvider.BlinkRate = 1000;
        errorProvider.BlinkStyle = System.Windows.Forms.ErrorBlinkStyle.AlwaysBlink;

private void TextValidated(object sender, System.EventArgs e)
    {
       var txtbox = Sender as TextBox;

        if(IsTextValid(txt))
        {
            // Clear the error, if any, in the error provider.
            errorProvider.SetError(txtbox, String.Empty);
        }
        else
        {
            // Set the error if the name is not valid.
            errorProvider.SetError(txtbox, "Please fill in the missing billing information.");
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:37:33.120

当您的字符串为空时，更改`ForeColor`将无济于事，因为您没有 Text 以红色显示。考虑使用`BackColor`并记住在输入文本时有一个事件将其切换回适当的`BackColor`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:41:15.520

You can apply any CSS you want like this:

```
TBox.Attributes.Add("style", "color: red; border: solid 1px #FC3000") 
```

I would use this instead of:

```
TBox.ForeColor = Color.Red; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T16:39:27.140

好吧，因为这种形式的文本框不多，所以我走的是简单的路线，它奏效了，代码如下：

```
List<TextBox> boxes = new List<TextBox>();
if (string.IsNullOrWhiteSpace(txtFname.Text))
{
    //highlightTextBox= txtFname;
    boxes.Add(txtFname);
}
if (string.IsNullOrWhiteSpace(txtLname.Text))
{
    //highlightTextBox = txtLname;
    boxes.Add(txtLname);
}
if (string.IsNullOrWhiteSpace(txtAddOne.Text))
{
    //highlightTextBox = txtAddOne;
    boxes.Add(txtAddOne);
}
if (string.IsNullOrWhiteSpace(txtTown.Text))
{
    //highlightTextBox = txtTown;
    boxes.Add(txtTown);
}
if (string.IsNullOrWhiteSpace(txtPostCode.Text))
{
    //highlightTextBox = txtPostCode;
    boxes.Add(txtPostCode);
}

foreach (var item in boxes)
{
    if (string.IsNullOrWhiteSpace(item.Text))
    {
        item.BackColor = Color.Azure;
    }
}
lblTopError.Text = "Please fill in the missing billing information highlighted below";
pnlTopError.Visible = true; 
```

# java - 带有 android 和 java 源的 intellij 模块/项目

> ID：13381932
> 
> 赞同：1
> 
> 时间：2012-11-14T15:34:37.357
> 
> 标签：java, android, intellij-idea

我在整理资源时遇到了烦人的问题。我们有一个客户端服务器应用程序，服务器用 java 和 android 编写作为客户端。存储库包含一个文件夹中的所有服务器文件，以及顶层另一个文件夹中的所有 android 特定内容。然而，Android 文件夹并不完整，因为它需要服务器文件夹中存在的一些文件。我需要一种方法将所有必要的文件从我的 repo 中的 2 个单独的文件夹中全部下拉到一个 Intellij 模块/项目中。

我使用 eclipse 的同事能够通过创建一个 android 项目、从 repo 下载 android 源文件然后使用添加到构建路径 > 链接源功能来解决这个问题。这在 android 项目中创建了指向服务器文件夹中必要文件的符号链接，以便 android 可以编译。

我如何在 Intellij 中实现这一点？我希望这很清楚，但很难解释。谢谢。

另外，如果这很重要，我正在使用 SVN。

# javascript - 使用纹理图集和 EaselJs

> ID：13381934
> 
> 赞同：3
> 
> 时间：2012-11-14T15:34:40.163
> 
> 标签：javascript, html, canvas, easeljs

我知道 EaselJS 有一种很棒的方式来管理他们的精灵，但是有没有可能让它更容易呢？

以下链接说服我使用纹理图集：[http ://www.altdevblogaday.com/2012/09/17/building-an-html5-game-dont-shrug-off-atlases/](http://www.altdevblogaday.com/2012/09/17/building-an-html5-game-dont-shrug-off-atlases/)

很少有人指出为什么我如此想要这个：

*   Flash CS6 生成 Spritesheet 功能可创建可供使用的 TextureAtlas
*   提高加载时间
*   节省带宽
*   更好的开发时间

我不知道如何开始这个，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:16:45.013

好的，我会稍微扩展一下我的评论。

当你在 EaselJS 中创建一个显示元素时，你给它一个源图像：

```
srcImage = new Image();
srcImage.src = "http://whatever.com/image.png";
...
sprite1 = new Bitmap(srcImage); 
```

默认情况下，Bitmap 的实例是整个图像。但是，您可以将位图精确定位到该图像的某个区域。例如，假设图像包含一行 32x32 的图块：

```
sprites = [];
for(i=0; i<8; i++) {
  sprites[i] = new Bitmap(srcImage);
  sprites[i].sourceRect = { x:i*32, y:0, width:32, height:32 };
} 
```

您现在有八个精灵，每个精灵都指向源图像的不同 32x32 区域。

您还可以动态更改它：

```
sprCursor = new Bitmap(srcImage);
sprCursor.sourceRect = ( x:0, y:0, width:32, height:32 };
...
if(cursorOverButton) {
  sprCursor.sourceRect = { x:32, y:0, width:32, height:32 };
  // or more efficiently, sprCursor.sourceRect.x = 32;
} 
```

我想这就是 EaselJS 在幕后处理动画精灵的方式。

# android - 如何使用 SimpleCursorAdapter 将 multipleChoice ListView 中的 CheckBox 绑定到布尔值？

> ID：13381938
> 
> 赞同：1
> 
> 时间：2012-11-14T15:34:46.890
> 
> 标签：android, listview, simplecursoradapter, multiple-choice

我有一个带有 android:choiceMode="multipleChoice" 的 ListView。我通过 SimpleCursorAdapter 从 Cursor 填充这个 ListView。真的没有办法将ListView的CheckedTextView布局的“CheckBox”直接绑定到光标的布尔值吗？

目前，如果值为 true，我会遍历调用 ListView.setItemChecked() 的游标：

```
private void showMyData(long myId) {
    // fill the list
    String[] fromColumns = { "myTextColumn" };
    int[] toViews = { android.R.id.text1 };
    Cursor myCursor = _myData.readData(myId);
    CursorAdapter myAdapter = new SimpleCursorAdapter(this,
        android.R.layout.simple_list_item_multiple_choice,
        myCursor, fromColumns, toViews);
    ListView myListView = (ListView) findViewById(R.id.myListView);
    myListView.setAdapter(myAdapter);
    // mark items that include the object specified by myId
    int myBooleanColumnPosition = myCursor
        .getColumnIndex("myBooleanColumn");
    for (int i = 0; i < myCursor.getCount(); i++) {
        myCursor.moveToPosition(i);
        if (myCursor.getInt(myBooleanColumnPosition ) == 1) {
            myListView.setItemChecked(i, true);
        }
    }
} 
```

这就是工作。但我想要这样的代码：

```
String[] fromColumns = { "myTextColumn", "myBooleanColumn" };
int[] toViews = { android.R.id.text1, android.R.id.Xyz }; 
```

并且没有循环。我在这里遗漏了什么还是Android？

**编辑：** 我按照 Luksprog 的建议尝试了这个：

```
public boolean setViewValue(View view, Cursor cursor,
        int columnIndex) {
    CheckedTextView ctv = (CheckedTextView) view;
    ctv.setText(cursor.getString(cursor
            .getColumnIndex("myTextColumn")));
    if (cursor.getInt(cursor.getColumnIndex("myBooleanColumn")) == 1) {
        ctv.setChecked(true);
        Log.d("MY_TAG", "CheckBox checked");
    }
    return true;
} 
```

这记录了检查 CheckBox 但实际上并没有这样做。也许这是我这边的一个错误。虽然它比最初的循环更复杂，但至少感觉就像是在使用框架，而不是在对抗它。所以感谢 Luksprog 的回答。

但总结一下：Android 实际上缺少直截了当的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:43:52.447

[`SimpleCursorAdapter.ViewBinder`](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.ViewBinder.html#setViewValue%28android.view.View,%20android.database.Cursor,%20int%29)在适配器上使用 a 。确保`Cursor`其中有布尔值列，然后：

```
String[] fromColumns = { "myTextColumn" };
int[] toViews = { android.R.id.text1 };
Cursor myCursor = _myData.readData(myId);
CursorAdapter myAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_multiple_choice, myCursor, fromColumns, toViews);
myAdapter.setViewBinder(new ViewBinder() {
       public boolean setViewValue (View view, Cursor cursor, int columnIndex) {
          // set the text of the list row, the view parameter (simple use cursor.getString(columnIndex))
          // set the CheckBox status(the layout used in the adapter is a CheckedTextView)
          return true;
       }
}); 
```

# asp.net - 划分一个 Linq to SQL 查询

> ID：13381940
> 
> 赞同：3
> 
> 时间：2012-11-14T15:34:52.880
> 
> 标签：asp.net, sql, linq, linq-to-sql

如何在 SQL 中为这段代码形成一个 Linq to sql 查询，我尝试了几件事。这是我的基本代码：

```
List<Movie> movies =
(from item in db.Movies select item).ToList<Movie>();
return movies; 
```

这就是我想要的结果。

```
select (Won/Total) as 'rankPercentage'
from dbo.Filmranking
order by rankPercentage desc 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:52:59.397

```
item.Won / db.Awards.Count 
```

计数是属性吗？我觉得是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:04:31.827

```
var movies =
    (from items in db.Movies
    select new { RankPercentage = item.Won / item.Total })
    .ToList(); 
```

此时，电影将是`List<T>`其中 T 是浮点数或整数，具体取决于底层 SQL 类型（我无法从您的问题中辨别出）。如果您真的想将其投影为`List<Movie>`，则需要按如下方式进行投影，但您的结果不太可能与您的 SQL 表匹配。

```
List<OtherMovieType> movies = 
    (from items in db.Movies 
     select new OtherMovieType() {
         Name = item.Name,
         RankPercentage = item.Won / item.Total
         })
       .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:48:51.833

你需要一个叫做投影的东西，像这样：

```
var result = db.Movies
             .Select(x => new { title=x.Title, rank = (x.Won/x.Total) })
             .OrderBy(x => x.rank); 
```

***编辑***也许你想要标题来识别你的记录:)

# jquery - 停止 .load 加载

> ID：13381943
> 
> 赞同：1
> 
> 时间：2012-11-14T15:35:07.297
> 
> 标签：jquery

我有一个文件可以从 document.ready 上的另一个文件加载内容，并且我有一个链接可以将不同的内容加载到同一个容器中。我想在单击超链接时停止 .load 准备好的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:37:34.563

创建一个条件来检查链接事件是否被触发，然后

```
 .abort(); 
```

杀死函数

# javascript - 使用 Google Chrome 扩展程序编辑页面源

> ID：13381945
> 
> 赞同：2
> 
> 时间：2012-11-14T15:35:16.080
> 
> 标签：javascript, html, css, google-chrome, google-chrome-extension

我想制作一个 Chrome 扩展程序，它将像这样获取源代码：

```
document.getElementsByTagName('html')[0].innerHTML 
```

这可能不是最好的方法......然后更改搜索并替换源中的文本......就像页面中出现“酷”这个词，然后用其他东西替换它并向用户显示修改后的页面. 我该怎么做？

此外，不仅仅是文本，我需要编辑源代码，而不仅仅是显示的文本。

我的目标是编辑页面源链接，例如样式表和其他源。我需要更改`https://`- 如果是一个 - 并将其替换为`http://`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:02:49.023

尝试[http://api.jquery.com/clone/](http://api.jquery.com/clone/)或`var element = $0;`（返回根元素）

例如：获取标签名称描述的代码：

```
var getElementReference = function() {

    var element = $0;
    var tagName = element.tagName;
    var dictionary = {
        a: "Defines an anchor",
        abbr: "Defines an abbreviation",
        acronym: "Defines an acronym",
        address: "Defines contact information for the authorowner of a document",
        applet: "Deprecated. Defines an embedded applet",
        area: " Defines an area inside an image-map",
        b: "Defines bold text",
        base: " Defines a default address or a default target for all links on a page",
        basefont: " Deprecated. Defines a default font, color, or size for the text in a page",
        bdo: "Defines the text direction",
        big: "Defines big text",
        blockquote: "Defines a long quotation",
        body: "Defines the document's body",
        br: " Defines a single line break",
        button: "Defines a push button",
        caption: "Defines a table caption",
        center: "Deprecated. Defines centered text",
        cite: "Defines a citation",
        code: "Defines computer code text",
        col: " Defines attribute values for one or more columns in a table ",
        colgroup: "Defines a group of columns in a table for formatting",
        dd: "Defines a description of a term in a definition list",
        del: "Defines deleted text",
        dfn: "Defines a definition term",
        dir: "Deprecated. Defines a directory list",
        div: "Defines a section in a document",
        dl: "Defines a definition list",
        dt: "Defines a term (an item) in a definition list",
        em: "Defines emphasized text ",
        fieldset: "Defines a border around elements in a form",
        font: "Deprecated. Defines font, color, and size for text",
        form: "Defines an HTML form for user input",
        frame: "  Defines a window (a frame) in a frameset",
        frameset: "Defines a set of frames",
        h1: " Defines HTML headings",
        h2: " Defines HTML headings",
        h3: " Defines HTML headings",
        h4: " Defines HTML headings",
        h5: " Defines HTML headings",
        h6: " Defines HTML headings",
        head: "Defines information about the document",
        hr: "  Defines a horizontal line",
        html: "Defines an HTML document",
        i: "Defines italic text",
        iframe: "Defines an inline frame",
        img: " Defines an image",
        input: " Defines an input control",
        ins: "Defines inserted text",
        isindex: "Deprecated. Defines a searchable index related to a document",
        kbd: "Defines keyboard text",
        label: "Defines a label for an input element",
        legend: "Defines a caption for a fieldset element",
        li: "Defines a list item",
        link: " Defines the relationship between a document and an external resource",
        map: "Defines an image-map ",
        menu: "Deprecated. Defines a menu list",
        meta: " Defines metadata about an HTML document",
        noframes: "Defines an alternate content for users that do not support frames",
        noscript: "Defines an alternate content for users that do not support client-side scripts",
        object: "Defines an embedded object",
        ol: "Defines an ordered list",
        optgroup: "Defines a group of related options in a select list",
        option: "Defines an option in a select list",
        p: "Defines a paragraph",
        param: " Defines a parameter for an object",
        pre: "Defines preformatted text",
        q: "Defines a short quotation",
        s: "Deprecated. Defines strikethrough text",
        samp: "Defines sample computer code",
        script: "Defines a client-side script",
        select: "Defines a select list (drop-down list)",
        small: "Defines small text",
        span: "Defines a section in a document",
        strike: "Deprecated. Defines strikethrough text",
        strong: "Defines strong text",
        style: "Defines style information for a document",
        sub: "Defines subscripted text",
        sup: "Defines superscripted text",
        table: "Defines a table",
        tbody: "Groups the body content in a table",
        td: "Defines a cell in a table",
        textarea: "Defines a multi-line text input control",
        tfoot: "Groups the footer content in a table",
        th: "Defines a header cell in a table",
        thead: "Groups the header content in a table",
        title: "Defines the title of a document",
        tr: "Defines a row in a table",
        tt: "Defines teletype text",
        u: "Deprecated. Defines underlined text",
        ul: "Defines an unordered list",
        xmp: "Deprecated. Defines preformatted text"
    };

    var result = {
        tag: tagName,
        description: dictionary[tagName.toLowerCase()],
        __proto__: null
    };

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:46:23.107

The best way is:

1.  Add jquery to your options.html
2.  Than use jquery to solve your problems like

    $('#searchfield').val('TEST'); // and so on...

Hopefully it helps.

PS.: I wrote an chrome-extension as well maybe it could help you to start (https://github.com/marcofrancke/AmazonExtended)

# c# - 分离后无法将行为重新附加到依赖对象

> ID：13381947
> 
> 赞同：1
> 
> 时间：2012-11-14T15:35:32.893
> 
> 标签：c#, wpf, silverlight, blend

当我在运行时生成它时，我将行为（Blend SDK 中的行为）附加到 UIElement。我还有两个按钮来触发**Detach()**和**Attach()** - 基本上是启用或禁用该行为。

问题是：在我**Detach()**行为之后，**Attach()**未能将行为恢复到依赖对象，然后保持无行为：

```
// Declare the dependency object and behavior at class scope 
MyControl c = new MyControl();
MyBehavior b = new MyBehavior();

// Function that generate UI Controls with behavior attached
b.Attach(c);

// Function that detach behavior from dependency object
b.Detach();

// Function that re-attach behavior to the same object after it has been detached
b.Attach(c); // <-- Do not see the behavior... 
```

为什么行为没有重新附加？是否有解决方案或解决方法来打开或关闭行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:36:01.797

看来问题是特定于您的行为逻辑的。在以下测试中，行为重新附加没有问题：

```
public class ColorBehavior : Behavior<Border>
{
    public Brush OriginalBrush { get; set; }

    protected override void OnAttached()
    {
        base.OnAttached();

        this.OriginalBrush = this.AssociatedObject.Background;
        this.AssociatedObject.Background = Brushes.CadetBlue;
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
        this.AssociatedObject.Background = this.OriginalBrush;
    }
}

public partial class MainWindow : Window
{
    private ColorBehavior behavior = new ColorBehavior();
    private bool isAttached;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        if (!this.isAttached)
        {
            this.behavior.Attach(this.Border);
            this.isAttached = true;
        }
        else
        {
            this.behavior.Detach();
            this.isAttached = false;
        }
    }
}

<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:local="clr-namespace:WpfApplication1"
    Title="MainWindow"
    Width="525"
    Height="350">
<Grid>
    <Border x:Name="Border" Background="Red" />
    <Button Width="50"
            Height="20"
            Click="Button_Click"
            Content="Hey" />
</Grid> 
```

# java - 宣布用于调整输出的文档

> ID：13381948
> 
> 赞同：0
> 
> 时间：2012-11-14T15:35:35.830
> 
> 标签：java, web-services, annotations, enunciate

我发现 ennuciate 擅长记录我们的 JAXB REST Web 服务，但似乎很少有关于如何调整生成的输出的文档。

是否有一个明确的注释列表，我们可以使用它来描述 Web 服务的参数和可接受值的列表。

目前尚不清楚文档生成代码如何将类拆分为**数据类型**和**数据元素**

谢谢

戈登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T18:19:21.227

Enunciate 遵循[JAXB](https://jaxb.java.net/)和[JAX-RS](https://jax-rs-spec.java.net/)注释来自定义参数和模型。使用这些注释来自定义输出。要了解“数据类型”与“数据元素”，请参阅[本指南](http://www.xfront.com/ElementVersusType.html)（提示：这是 XML 类型和 XML 元素之间的区别）。

# c++ - 在多线程应用程序中使用 ptrace

> ID：13381949
> 
> 赞同：5
> 
> 时间：2012-11-14T15:35:39.180
> 
> 标签：c++, c, linux, multithreading, ptrace

我想用来`ptrace`检查我的程序生成的程序的系统调用是什么。我从[本教程开始，正如我在](http://www.linuxjournal.com/article/6100?page=0,1)[上一个问题](https://stackoverflow.com/questions/13343058/preventing-processes-to-execute-certain-system-calls)的答案中所解释的那样。我修改了代码，使其适应我正在使用的平台（SLES 11 64 位），并将以下测试代码放在一起，打印出生成的进程进行的每个系统调用：

```
#include <sys/ptrace.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>
#include <stdio.h>
#include <sys/reg.h>
#include <sys/syscall.h>   /* For SYS_write etc */

pid_t child;

void run()
{
    long orig_eax;
    int status;

     while(1) {
          int pid = wait(&status);
          if (pid == -1) {
              perror("wait");
              kill(child, SIGKILL);
              return;
          }
          printf("Got event from %d.\n", pid);
          if(WIFEXITED(status))
              break;
          orig_eax = ptrace(PTRACE_PEEKUSER,
                     pid, 8 * ORIG_RAX, NULL);
          if (orig_eax == -1) {
              perror("ptrace");
              kill(child, SIGKILL);
              return;
          } else {
              printf("Syscall %ld called.\n", orig_eax);
          }
            ptrace(PTRACE_SYSCALL,
                   pid, NULL, NULL);
    }
}

int main(int /*argc*/, char* argv[])
{

    child = fork();
    if(child == 0) {
        ptrace(PTRACE_TRACEME, 0, NULL, NULL);
        execl(argv[1], argv[1], NULL);
    }
    else {
        printf("Child process id = %d.\n", child);
        run();

    }
    return 0;
} 
```

它工作得很好：它打印程序进行的系统调用的 id（实际上它打印每个两次，一次在进入时，一次在退出时，但现在没关系）。但是，我的程序除了检查系统调用之外还需要做其他事情，所以我决定将检查移到一个单独的线程中（我对 C++ 比对 C 更舒服，所以我用 C++ 的方式来做，但是我不要认为这很重要）。当然在这个最新的程序中，我只是启动线程然后加入它。

```
#include <sys/ptrace.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>
#include <stdio.h>
#include <sys/reg.h>
#include <sys/syscall.h>   /* For SYS_write etc */

#include <boost/thread.hpp>

pid_t child;

void run()
{
    long orig_eax;
    int status;

     while(1) {
          int pid = wait(&status);
          if (pid == -1) {
              perror("wait");
              kill(child, SIGKILL);
              return;
          }
          printf("Got event from %d.\n", pid);
          if(WIFEXITED(status))
              break;
          orig_eax = ptrace(PTRACE_PEEKUSER,
                     pid, 8 * ORIG_RAX, NULL);
          if (orig_eax == -1) {
              perror("ptrace");
              kill(child, SIGKILL);
              return;
          } else {
              printf("Syscall %ld called.\n", orig_eax);
          }
            ptrace(PTRACE_SYSCALL,
                   pid, NULL, NULL);
    }
}

int main(int /*argc*/, char* argv[])
{

    child = fork();
    if(child == 0) {
        ptrace(PTRACE_TRACEME, 0, NULL, NULL);
        execl(argv[1], argv[1], NULL);
    }
    else {
        printf("Child process id = %d.\n", child);
        boost::thread t(run);
        t.join();
    }
    return 0;
} 
```

这次我收到一条错误消息：

```
Child process id = 24682.
Got event from 24682.
ptrace: No such process 
```

为什么是这样？我试图寻找答案，但没有找到这样的答案。我发现`ptrace`不会跟踪子进程启动的线程，但这是另一件事需要稍后处理。甚至可以从不同的therad检查子进程吗？

另一个奇怪的事情是，在我的实际应用程序中，我基本上做同样的事情（但来自更复杂的上下文：类、互斥体等），但我得到了另一种错误。而不是`ptrace`返回错误，`wait`甚至不返回子进程的系统调用（并且子进程甚至不会停止）。另一方面，`wait`当子进程退出时按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:46:11.890

据我所知，`ptrace`每个进程只允许一个跟踪器。这意味着如果您尝试附加，您可以尝试使用 强制它`PTRACE_ATTACH`，您将收到一个错误，告诉您`ptrace`无法附加到指定的进程。

因此，您的错误出现是因为您的线程未附加到子进程，这样，当您尝试`ptrace`它时，它会失败并发送`-ESRCH`代码。

此外，您可以在[此处查看此帖子](https://stackoverflow.com/questions/1010520/can-you-use-multiple-threads-to-ptrace-an-application?rq=1)，它可能会回答您可能遇到的其他一些问题。

# c# - WPF MVVM 组合框标签选择

> ID：13381950
> 
> 赞同：8
> 
> 时间：2012-11-14T15:35:49.167
> 
> 标签：c#, wpf, mvvm, combobox

我有一个 ComboBox，它有一个声明的 ComboBox.Items 列表（换句话说，不是通过 ItemsSource 动态绑定的）。我使用 ComboBoxItem.Content 作为显示名称，使用 ComboBoxItem.Tag 作为对应的 Id，如下所示。

如何获取所选项目返回的标签而不是内容？我试过`SelectedItemValuePath="Tag"`了，但这不起作用。

```
 <ComboBox Visibility="{Binding Path=ShowOutpatientFields, Converter=   
        {StaticResource   
            boolTovisConverter}}" Grid.Row="5" Grid.Column="2" Margin="0,2,0,2"  
        Text="{Binding Path=NewCase.ServiceType, ValidatesOnDataErrors=true,  
        NotifyOnValidationError=true}" SelectedValuePath="Tag">
          <ComboBox.Items>
             <ComboBoxItem Content="Hospice" Tag="33" />
             <ComboBoxItem Content="Hospital Outpatient" Tag="36" />
             <ComboBoxItem Content="Hospital Inpatient Extension" Tag="128" />
             <ComboBoxItem Content="Maternity" Tag="52" />
          </ComboBox.Items>
    </ComboBox> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T16:01:20.847

如果您的 ViewModel 类中有此属性：

```
 private string _serviceType;
 public string ServiceType
 {
     get { return _serviceType; }
     set { _serviceType = value; }
 } 
```

当然，您可以拥有 int 类型的属性，它也可以工作。

试试这个绑定：

```
<ComboBox VerticalAlignment="Center" Margin="0,2,0,2"  
                SelectedValue="{Binding ServiceType}"
                SelectedValuePath="Tag">
            <ComboBox.Items>
                <ComboBoxItem Content="Hospice" Tag="33" />
                <ComboBoxItem Content="Hospital Outpatient" Tag="36" />
                <ComboBoxItem Content="Hospital Inpatient Extension" Tag="128" />
                <ComboBoxItem Content="Maternity" Tag="52" />
            </ComboBox.Items>
        </ComboBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-11T14:21:42.233

给组合框命名“ x:Name = "abcComboBox" 然后在代码端字符串 tag = (abcComboBox.SelectedItem as ComboBoxItem).Tag.ToString();

# java - 使用 Spring、IText、水印创建 pdf

> ID：13381957
> 
> 赞同：2
> 
> 时间：2012-11-14T15:36:12.317
> 
> 标签：java, spring, pdf, itext

我有一个使用 Java、Spring 和 IText 创建 PDF 文件的应用程序。

我想在pdf中添加水印。

我发现了很多向已保存的 PDF 添加水印的示例。我想在保存 PDF 之前添加水印。

我找到了一个使用 ITextSharp 做我想做的事情的例子，但是，它适用于 .NET。我在我的班级中使用以下代码来创建 pdf 文档。

```
protected void buildPdfDocument(Map model, Document document, PdfWriter writer, HttpServletRequest request,
            HttpServletResponse response) throws Exception {

    response.setContentType("application/pdf");
    ProgramCmd programCmd = (ProgramCmd) request.getSession().getAttribute("programCmd ");
    List<Courses> list = programCmd.getCoursesList();
    List<Events> eventsList = programCmd.getEventsList();
    FONT_SIZE_16_BOLD.setColor(232, 177, 0);
    // Print Header
    Paragraph paragraph = new Paragraph("Title",FONT_SIZE_16_BOLD);
    paragraph.setAlignment(Element.ALIGN_CENTER);
    document.add(paragraph);
    paragraph = new Paragraph("***This is Not Official***",FONT_SIZE_12_BOLD);
    paragraph.setAlignment(Element.ALIGN_CENTER);
    document.add(paragraph);
    paragraph = new Paragraph("Create Date: " + todaysDate,FONT_SIZE_12_BOLD);
    paragraph.setAlignment(Element.ALIGN_CENTER);
    document.add(paragraph);
} 
```

如果您希望我发布其他代码，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:22:59.677

[《iText in Action》](http://www.manning.com/lowagie/)这本书的第一版在第 14 章中有一个示例“WatermarkExample.java”。您可以在[Manning 的网站上](http://www.manning.com/lowagie/)下载示例的源代码，当然，我也鼓励您购买这本书！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:42:12.810

感谢您宣传我的书 GreyBeardedGeek（值得一票）。

让我详细说明一下这个问题：

目前尚不清楚您是要在创建文档*时*添加水印（通过页面事件完成），还是*在*创建文档之后（通过 完成`PdfStamper`）。

这些是两个选项的示例：

1.  在[http://itextpdf.com/examples/iia.php?id=105](http://itextpdf.com/examples/iia.php?id=105)我们扩展`PdfPageEventHelper`并实现了该`onEndPage()`方法。如文档所述，您不应向 Document 类添加任何内容，也不应使用 onStartPage() 方法添加内容。（更多信息在[iText in Action - Second Edition 中](http://www.manning.com/lowagie2/)）。
2.  在[http://itextpdf.com/examples/iia.php?id=119](http://itextpdf.com/examples/iia.php?id=119)`PdfStamper`中，我们使用和为现有 PDF 添加背景`PdfReader`。您无需在磁盘上有文件即可创建`PdfReader`实例。您可以首先在内存中创建文件（例如使用 a `ByteArrayOutputStream`）并将字节传递给`PdfReader`构造函数。

# python - Flask : understanding POST method to transmit data

> ID：13381959
> 
> 赞同：2
> 
> 时间：2012-11-14T15:36:19.697
> 
> 标签：python, http, post, flask

my question is quite hard to describe, so I will focus on explaining the situation. So let's say I have 2 different entities, which may run on different machines. Let's call the first one *Manager* and the second one *Generator*. The manager is the only one which can be called via the user.

The manager has a method called `getVM(scenario_Id)`, which takes the ID of a scenario as a parameter, and retrieve a BLOB from the database corresponding to the ID given as a parameter. This BLOB is actually a XML structure that I need to send to the Generator. Both have a Flask running.

On another machine, I have my generator with a `generateVM()` method, which will create a VM according to the XML structure it recieves. We will not talk about how the VM is created from the XML.

Currently I made this :

**Manager**

```
# This method will be called by the user
@app.route("/getVM/<int:scId>", methods=['GET']) 
def getVM(scId):
    xmlContent = db.getXML(scId)  # So here is what I want to send
    generatorAddr = sgAdd + "/generateVM"   # sgAdd is declared in the Initialize() [IP of the Generator]

    # Here how should I put my data ? 
    # How can I transmit xmlContent ? 

    testReturn = urlopen(generatorAddr).read()
    return json.dumps(testReturn) 
```

**Generator**

```
# This method will be called by the user
@app.route("/generateVM", methods=['POST']) 
def generateVM():
    # Retrieve the XML content...
    return "Whatever" 
```

So as you can see, I am stuck on how to transmit the data itself (the XML structure), and then how to treat it... So if you have any strategy, hint, tip, clue on how I should proceed, please feel free to answer. Maybe there are some things I do not really understand about Flask, so feel free to correct everything wrong I said.

Best regards and thank you

PS : Lines with routes are commented because they mess up the syntax coloration

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:41:17.677

unless i'm missing something couldn't you just transmit it in the body of a post request? Isn't that how your `generateVM` method is setup?

```
@app.route("/getVM/<int:scId>", methods=['GET']) 
def getVM(scId):
    xmlContent = db.getXML(scId)  
    generatorAddr = sgAdd + "/generateVM"   

xml_str = some_method_to_generate_xml()
data_str = urllib.urlencode({'xml': xml_str})
urllib.urlopen(generatorAddr, data=data_str).read()
return json.dumps(testReturn) 
```

[http://docs.python.org/2/library/urllib.html#urllib.urlopen](http://docs.python.org/2/library/urllib.html#urllib.urlopen)

# objective-c - 调度异步与块 exc_bad_access 非 ARC 项目

> ID：13381960
> 
> 赞同：0
> 
> 时间：2012-11-14T15:36:21.413
> 
> 标签：objective-c, xcode, objective-c-blocks, grand-central-dispatch

我有一个非弧项目。我正在尝试使用 dispatch_async 从服务器获取数据并将其保存在 sqlite 中。dispatch_async 发生在带有回调的方法内。在调用该方法时，应用程序因访问错误而崩溃。这是我实现代码的方式。

```
- (void) HandleData:(const char*) receivedData WithSuccess:(void(^)(BOOL finishing))completed
{
dispatch_queue_t fetchQ = dispatch_queue_create("Refreshing", NULL);
dispatch_async(fetchQ, ^{

   [self write_data_in_sqlite]//    **<--crash happens here in the method which is called here**
    }
    dispatch_sync(dispatch_get_main_queue(), ^{
            completed(YES);
    });
});
dispatch_release(fetchQ);
} 
```

我将方法称为如下：

```
HandleResponse *handleResponse = [[[HandleResponse alloc] init] autorelease];
                [handleResponse HandleData:aData WithSuccess:^(BOOL finishing) {
                 if(finishing)
                 {
                 //update the UI here
                 }
                 }]; 
```

如果我删除 dispatch_async 那么它不会崩溃，但是我的 UI 在写入 sqlite 时被阻塞。

我究竟做错了什么？

**编辑**：删除块并使用 dipatch_async 会产生相同的 exc_bad_access 崩溃。

**编辑2：** 我尝试了下面给出的示例答案，它仍然崩溃。

我想复制它然后自动释放它。它仍然崩溃，但经常崩溃。我要检查内存泄漏。我会报告的。

```
HandleResponse *handleResponse = [[[HandleResponse alloc] init] autorelease];
        [handleResponse HandleData:aData WithSuccess: [[^(BOOL finishing) {
         if(finishing)
         {
         //update the UI here
         }
         } copy] autorelease]; 
```

**编辑3：**

即使 xml 内容在 xmlResopnse 中，也会在 strlen 中发生崩溃。但是为什么这发生在调度而不是没有它

```
xmlDocPtr xml= xmlParseMemory(xmlResopnse, strlen(xmlResponse); 
```

**编辑 4：** 如下面的回答，建议不要在异步调度中使用 c 对象。所以我将 xmlResponse 从 const char* 转换为 nsstring 并且它不会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:16:26.350

就块和内存管理而言，您所展示的一切似乎都还可以。它一定是别的东西。

我注意到您传入了一个`receivedData`未使用的 C 字符串（char 指针）。如果您没有向我们展示真正的代码，并且您实际上是`receivedData`在块中使用变量，那么这可能是一个问题，因为块只是捕获 char 指针，但不管理指针后面的字符串的内存（它不是一个 Objective-C 对象）。因此，C 字符串有可能只在调用范围内（异步操作之前）有效，而在异步操作运行时不再有效。您关于某些事情正在崩溃的陈述`strlen`支持了某些 C 字符串有问题的想法。您应该尝试使用 NSString 对象，因为作为对象，它们由块正确管理内存。

# c# - 列表 字典查找特定项目的值

> ID：13381964
> 
> 赞同：-1
> 
> 时间：2012-11-14T15:36:29.913
> 
> 标签：c#, list, dictionary, key-value

我有一个字典，列表中有 5 个不同的双打。我知道列表中每个项目的顺序。我正在尝试找到一段代码，我可以在给定键的情况下在列表中查找特定值。

所以像：

```
double myDbl = myDict["key"][value[3]]; 
```

这样的事情可能吗，我在任何地方都找不到。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:42:03.723

正如其他人所说，如果这是一个`Dictionary<string, List<double>>`你*可以*使用

```
double value = myDict["key"][3]; 
```

但是，这一行：

> 我知道列表中每个项目的顺序。

让我觉得*实际上*你应该重组你的代码。如果您知道第一项总是代表一个数据（例如体重），下一项总是代表另一个（例如身高）等，那么您应该使用这些属性创建一个新类型。使用 a`List<double>`会使代码更难维护......它不会自然地*揭示*有关每个值的含义的信息。

将其更改为 a 后，`Dictionary<string, Person>`您可以使用：

```
double height = myDict["key"].Height; 
```

这明显更清楚。

当然，我引用的那句话可能是您的意思……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:39:32.080

假设您有一个定义为的字典

```
Dictionary<string,List<double>> 
```

并假设字典元素已正确初始化，您可以执行以下操作：

```
myDbl = myDict["key"][3]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:39:58.777

它可能应该是这样的：

```
double myDbl = myDict["key"][3]; 
```

当您从结果列表中查找索引 3 时`key`

通过了解运算符的执行顺序，您可以看到`myDict["key"]`它将返回您的值类型，这里假定为`List<double>`. 从这个返回值中，您想要获取第 4 个对象（基于 0），以便`[3]`在最后使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:41:56.280

鉴于：

```
Dictionary<string, List<double>> l_dict = new Dictionary<string, List<double>>();
l_dict.Add( "key", new List<double>( new double[]{ 1, 2, 3, 4, 5 } ); 
```

然后：

```
List<double> l_valueCollection = l_dict["key"];
double l_value = l_valueCollection[3]; 
```

或者，更简洁（你想要的“单线”）：

```
double l_value = l_dict["key"][3]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T15:42:25.663

如果您的收藏看起来像这样：

```
Dictionary<string,List<double>> myDictionary; 
```

然后以下将起作用：

```
double myDouble = myDictionary["key"][3]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T15:46:36.493

创建一个这样的方法来返回您的值，无论您传入什么键。

```
 private double GetValue(Dictionary<string, double> dict, string key)
    {
        return (from pair in dict where pair.Key == key select pair.Value).FirstOrDefault();
    } 
```

请记住，这是使用 LINQ，并且仅适用于 .Net Framework 3.5

# c# - 从测试单元显示 WPF 窗口

> ID：13381967
> 
> 赞同：5
> 
> 时间：2012-11-14T15:36:40.997
> 
> 标签：c#, wpf

我正在运行一个测试单元（并了解它们）。很简单，我的单元创建一个列表并将其传递给我的 MainWindow。

我遇到的问题是在`show()`主窗口结束后单元方法结束。我希望在关闭 MainWindow 之前该单元不会完成。这就是我所做的（见下文） - 它显然不起作用并且感觉我在这里走错了路。我怎样才能正确地做到这一点？

```
 [TestClass]
    public class Logging
    {
        bool continueOn = true;
        [TestMethod]
        public void ShowLogs()
        {
            ShowResults(createLogList());
        }

        private void ShowResults(List<Log> logList)
        {
            MainWindow mw = new MainWindow(logList);
            mw.Closed += mw_Closed;  
            mw.Show();

            while (continueOn)
            { }
        }

        void mw_Closed(object sender, EventArgs e)
        {
            this.continueOn = false;
        }

        private List<Log> createLogList()
        {
            List<Log> listLog = new List<Log>();
            //logic 
            return listLog;            
        } 
```

也许我必须把它放到后台工作线程上并监控它 - 老实说我不知道​​，在我浪费时间之前，我会很感激一些指导。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-14T16:18:17.363

必须在支持 WPF 窗口基础结构（消息泵送）的线程上创建并显示 WPF 窗口。

```
[TestMethod]
    public void TestMethod1()
    {
        MainWindow window = null;

        // The dispatcher thread
        var t = new Thread(() =>
        {
            window = new MainWindow();

            // Initiates the dispatcher thread shutdown when the window closes
            window.Closed += (s, e) => window.Dispatcher.InvokeShutdown();

            window.Show();

            // Makes the thread support message pumping
            System.Windows.Threading.Dispatcher.Run();
        });

        // Configure the thread
        t.SetApartmentState(ApartmentState.STA);
        t.Start();
        t.Join();
    } 
```

注意：

*   必须在新线程中创建并显示窗口。
*   You must initiate a dispatcher (System.Windows.Threading.Dispatcher.Run()) before the ThreadStart returns, otherwise the window will show and die soon after.
*   The thread must be configured to run in STA apartment.

For more information, visit [this link](http://eprystupa.wordpress.com/2008/07/28/running-wpf-application-with-multiple-ui-threads/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-24T15:00:14.057

Of course, since it is only for testing, using

```
ShowDialog() 
```

may be an option instead of 'Show()'

# extjs - 在组合框选择上过滤存储

> ID：13381971
> 
> 赞同：3
> 
> 时间：2012-11-14T15:36:57.767
> 
> 标签：extjs, combobox, grid, extjs4, extjs4.1

我尝试了这种不同的方法，但仍然无法让过滤器工作。我的 ext 应用程序允许用户从组合框中选择单个状态，下面的网格会显示有关所选“值”=状态的更多数据。在选择时，组合框会触发一个过滤网格存储并更新存储的函数...这是我的网格商店...

```
var store = Ext.create('Ext.data.Store', {
        autoLoad: true,
        id: 'OurData',
        pageSize: 20,
        pageNumber: 1,
        remoteSort: true,
        fields: [
    { name: 'States' },
    { name: 'FullName' },
    { name: 'Capital' },
    { name: 'Population' }
    ],
        proxy: {
            type: 'ajax',
            url: 'GetState/getS',
            reader: {
                type: 'json',
                root: 'myTable',
               idProperty: 'States',
                totalProperty: '@count'
            }
        }
    });
    store.loadPage(1); 
```

这是我的组合框

```
xtype: 'combo',
                    id: 'iccombo',
                    scope: this,
                    store: this.Combostore,
                    fieldLabel: 'Short State',
                    displayField: 'States',
                    valueField: 'States',
                    typeAhead: true,
                    triggerAction: 'all',
                    queryMode: 'remote',
                    name: 'State',
                    labelWidth: 125,
                    anchor: '95%',
                    listeners: {
                        scope: this,
                        select: this.fireFilter
                    } 
```

这就是过滤器应该发生的地方......

```
fireFilter: function (value) {

    // Get passed value
    this.selectedC = value.getValue();
    console.log('selectedValue: ' + this.selectedC);

    // Clear existing filters
    this.store.clearFilter(false);

    // Build filter

    var myfilter = Ext.create('Ext.util.Filter', {
        scope: this,
        filterFn: function (item) {
            var fieldNames = item.fields.keys;

            for (var j = 0; j < fieldNames.length; j++) {
                var fieldName = fieldNames[j];
                if (item.data[fieldName] != null) {
                    var stringVal = item.data[fieldName].toString();
                    if (stringVal != null && stringVal.toLowerCase().indexOf(value.toLowerCase()) != -1) {
                        return true;
                    }
                }
            }
            return false;
        }

    });
    // Apply filter to store
    this.store.filter(myfilter);
} 
```

当我运行代码时，它会显示网格中的所有数据，并且在选择组合框时，它仍然显示相同的数据。由于某种原因，代码永远不会通过 filterFn 运行...因为我的 console.log 没有显示这是我在萤火虫的回应中得到的

```
_dc     1352902173425
filter  [{"property":null,"value":null}]
limit   20
page    1
start   0 
```

如您所见，选定的“值”为空，但我的“console.log”打印了选定的值...我认为我获取传递值和应用过滤器的方式不正确...有人可以请看看...谢谢

更新...我能够进入函数内部，并且我的 console.log 显示所有字段...但是一旦我到达最后一个 if 语句...我收到此错误

> TypeError：value.toLowerCase 不是函数

我在这里做错了什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T07:44:15.820

除了 dbrin's anwser 我也无法理解你为什么使用`remoteSort`但不使用`remoteFilter`？使用`this`.

无论如何，我建议您扩展一种新的组合类型，以便在需要时也可以清除过滤器。这是我为自己使用而编写的扩展。注意过滤本身需要在`onSearch`方法中实现，可以是远程排序也可以是本地排序。

```
Ext.define('Ext.ux.form.field.FilterCombo', {
    extend: 'Ext.form.field.ComboBox',
    alias: 'widget.filtercombo',
    /**
    * @cfg {string} recordField
    * @required
    * The fieldname of the record that contains the filtervalue
    */

    /**
    * @cfg {string} searchField
    * @required
    * The fieldname on which the filter should be applied
    */

    /**
    * @cfg {boolean} clearable
    * Indicates if the clear trigger should be hidden. Defaults to <tt>true</tt>.
    */
    clearable: true,

    initComponent: function () {
        var me = this;

        if (me.clearable)
            me.trigger2Cls = 'x-form-clear-trigger';
        else
            delete me.onTrigger2Click;

        me.addEvents(

            /**
            * @event clear
            *
            * @param {Ext.ux.form.field.FilterCombo} FilterCombo The filtercombo that triggered the event
            */
            'clear',
            /**
            * @event beforefilter
            *
            * @param {Ext.ux.form.field.FilterCombo} FilterCombo The filtercombo that triggered the event
            * @param {String/Number/Boolean/Float/Date} value The value to filter by
            * @param {string} field The field to filter on
            */
            'beforefilter'
        );

        me.callParent(arguments);
        // fetch the id the save way
        var ident = me.getId();

        me.on('select', function (me, rec) {
            var value = rec[0].data[me.recordField],
                field = me.searchField;
            me.fireEvent('beforefilter', me, value, field)
            me.onShowClearTrigger(true); 
            me.onSearch(value, field);
        }, me);
        me.on('afterrender', function () { me.onShowClearTrigger(); }, me);
    },

    /**
    * @abstract onSearch
    * running a search on the store that may be removed separately
    * @param {String/Number/Boolean/Float/Date} val The value to search for
    * @param {String} field The name of the Field to search on
    */
    onSearch: Ext.emptyFn,

    /**
    * @abstract onFilterRemove
    * removing filters from the the
    * @param {Boolean} silent Identifies if the filter should be removed without reloading the store
    */
    onClear: Ext.emptyFn,

    onShowClearTrigger: function (show) {
        var me = this;
        if (!me.clearable)
            return;
        show = (Ext.isBoolean(show)) ? show : false;
        if (show) {
            me.triggerEl.each(function (el, c, i) {
                if (i === 1) {
                    el.setWidth(el.originWidth, false);
                    el.setVisible(true);
                    me.active = true;
                }
            });
        } else {
            me.triggerEl.each(function (el, c, i) {
                if (i === 1) {
                    el.originWidth = el.getWidth();
                    el.setWidth(0, false);
                    el.setVisible(false);
                    me.active = false;
                }
            });
        }
        // Version specific methods
        if (Ext.lastRegisteredVersion.shortVersion > 407) {
            me.updateLayout();
        } else {
            me.updateEditState();
        }
    },

    /**
    * @override onTrigger2Click
    * eventhandler
    */
    onTrigger2Click: function (args) {
        this.clear();
    },

    /**
    * @private clear
    * clears the current search
    */
    clear: function () {
        var me = this;
        if (!me.clearable)
            return;
        me.onClear(false);
        me.clearValue();
        me.onShowClearTrigger(false);
        me.fireEvent('clear', me);
    }
}); 
```

这是您的组合的未经测试的实现。请注意，我清理了你的`filterFn`，但我没有做任何进一步的检查。

```
{
    xtype: 'filtercombo',
    id: 'iccombo',
    scope: this,
    store: this.Combostore,
    fieldLabel: 'Short State',
    displayField: 'States',
    valueField: 'States',   
    typeAhead: true,
    triggerAction: 'all',
    queryMode: 'remote',
    name: 'State',
    labelWidth: 125,
    anchor: '95%',
    // begin new parts
    recordField: 'States',
    searchField: '',
    clearable: false,
    onSearch: function (me, value, field) {

        // New part!
        var store = Ext.StoreMgr.lookup('YourStoreIdName');

        // Clear existing filters
        store.clearFilter(false);

        // Build filter
        var myfilter = Ext.create('Ext.util.Filter', {
        scope: this,
        filterFn: function (item) {
            var fieldNames = item.fields.keys,
                fieldName, stringVal,
                len = fieldNames.length,
                j = 0;

            for (; j < len; j++) {
                fieldName = fieldNames[j];
                if (item.data[fieldName] != null) {
                    stringVal = item.data[fieldName].toString();
                    if (stringVal != null && stringVal.toLowerCase().indexOf(value.toLowerCase()) != -1) {
                        return true;
                    }
                }
            }
            return false;
        }
    });
        // Apply filter to store
        store.filter(myfilter);
    }
} 
```

我想这也应该工作

```
var myfilter = Ext.create('Ext.util.Filter', {
            scope: this,
            filterFn: function (rec) {
                var fieldValue = rec[this.fieldName];
                if (fieldValue && fieldValue === this.value)
                      return true;
            return false;
            }
        }); 
```

我`this`在两个变量之前设置了将它们标记为来自外部范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T04:57:24.470

我看到 2 个问题

1.  商店应该`remoteFilter: true`设置

2.  在 JavaScript 中，所有变量声明都被挑选出来并提升到函数的开头。所以在循环中声明的任何变量都应该被取出并在函数的顶部声明。JS 没有块作用域（如 Java）。

# php - 使用 Yii 在网格中显示来自 2 个模型的数据

> ID：13381972
> 
> 赞同：-1
> 
> 时间：2012-11-14T15:37:04.400
> 
> 标签：php, mysql, yii

我正在尝试从两个表中选择数据并在分页网格视图中显示该数据。问题是 Yii 正在使用 SQL 连接来连接数据（因为我告诉它这样做），因此它没有显示每页正确的项目数。

为了清楚起见，我从`topics`和中选择`messages_in_topics`，然后加入

`$criteria->together = true;`

这使得 MySQL 为每条消息（和相关主题）返回一行。例子：

```
id_topic    topic    id_messages    message

1           topic1   1              message1_in_topic1
1           topic1   2              message2_in_topic1
1           topic1   3              message3_in_topic1
2           topic2   4              message1_in_topic2
2           topic2   5              message2_in_topic2 
```

只有 2 个主题，但 Yii 的分页器*认为*有 5 个。

“解决”这个问题的最快方法是按 id_topic 字段分组，无论如何，我不能这样做，因为有一个 where 条件可以使用`like`语句进行搜索。

谢谢

编辑：

这是我的操作代码：

```
$criteria = new CDbCriteria;

$get_s = Yii::app()->request->getQuery('s', '');
if( $get_s ){
    $criteria->compare("topic_title", $get_s, true);
    $criteria->compare("message_text", $get_s, true, 'OR');
}

$criteria->with = array('messages');
$criteria->addCondition(array( ......  )); <--- some rules like if the topic is validated...

$dataProvider = new CActiveDataProvider('Topics', array(
    'criteria'=>$criteria,
    'pagination=>array('pageSize'=>15)
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:35:14.573

实际上，发生的情况是显示的信息与您的消息有关。重复的主题值是因为这些主题是消息对应的相关数据。

您可以尝试告诉您的查询在结果中使用 GROUP BY ...

```
SELECT t.id_topic, t.topic, COUNT(m.id_messages)
  FROM topics t LEFT JOIN messages m ON t.id_topic = m.id_topic
GROUP BY t.id_topic 
```

这样，您或多或少可以显示每个主题的消息数。如果您向我们展示您的 SQL，我可以为您提供更多帮助。

**编辑**：看到你的代码后，这是我的猜测： $criteria = new CDbCriteria;

```
$get_s = Yii::app()->request->getQuery('s', '');
if( $get_s ){
    $criteria->compare("topic_title", $get_s, true);
    $criteria->compare("message_text", $get_s, true, 'OR');
}

$criteria->with = array('messages');
$criteria->addCondition(array( ......  )); <--- some rules like if the topic is validated...

$dataProvider = new CActiveDataProvider('Topics', array(
    'criteria'=>$criteria,
    'pagination=>array('pageSize'=>15)
)); 
```

你可以通过只使用 CDbCriteria 的三个基本属性来确保查询不会被 yii 的格式复杂化：

1.  **$criteria->select**正是您要选择的列的列表。
2.  **$criteria->condition**正是 WHERE 条件，老实说，我更喜欢使用字符串而不是数组，因为使用字符串允许我使用我在这里输入的确切条件。
3.  **$criteria->join**紧跟在您在 CActiveDataProvider 构造函数中指定的 $model->tableName() 之后。
4.  **$criteria->group**添加在查询的末尾，您只需要指定分组列。

此外，您还可以确保直接设置这些属性，因此您实际上将查询分解为 CDbCriteria 对象。例如：

```
SELECT t.id_topic, t.topic, COUNT(m.id_messages)
  FROM topics t LEFT JOIN messages m ON t.id_topic = m.id_topic
GROUP BY t.id_topic 
```

会是这样的

```
/*1*/ $criteria->select = 't.id_topic, t.topic, COUNT(m.id_messages)';
/*2*/ $criteria->condition = 't.topic_title LIKE %'.$get_s.'% OR ...';/* add your conditions here*/
/*3*/ $criteria->join = 'LEFT JOIN messages m ON t.id_topic = m.id_topic'; //Full join statement here, including the nature of the join.
/*4*/ $criteria->group = 't.id_topic'; 
```

**重要提示**：请注意，由于您将`Topics`类名传递给`CActiveDataProvider`构造函数，因此下面的表`Topics`将被称为`t`. 任何其他表也必须在连接条件中指定（非常像`messages m`or `messages AS m`），否则您可能会收到`column xxxx is ambiguous`警告。

不要错过关注[CDbCriteria](http://www.yiiframework.com/doc/api/1.1/CDbCriteria)和[CActiveDataProvider](http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider)的任何问题的机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:15:48.673

问题不在于分页器，而在于您查询。如果您运行查询：

```
SELECT *
FROM topics as t
INNER JOIN messages_in_topics as mt
    ON mt.topics_id = t.id
INNER JOIN messages as m
    ON m.id = mt.messages_id 
```

您将获得 5 个结果，如上面的示例所示。

所以更重要的是，你想做什么？

此外，您的表显示了 MANY_MANY 关系（message1 有 2 个主题，topic1 有 3 条消息），您的数据库设置是否正确，您的模型关系是否相应配置？

您是否试图在一行中显示每个主题中的所有消息？

您是否尝试显示所有主题并列出包含该主题的每条消息？

假设您正确设置了关系，您可以使用：`$messages=$topics->messages;`并获取一个包含所有列出消息的数组。

相反，你可以做得到`$topics=$messages->topics;`主题。

# c++ - 了解通过 RInside 将犰狳矩阵传递给 R 函数

> ID：13381975
> 
> 赞同：4
> 
> 时间：2012-11-14T15:37:19.373
> 
> 标签：c++, r, rcpp, armadillo, rinside

我正在尝试通过 RInside 在 C++ 中使用 R。我无法将犰狳矩阵传递给 R 并返回结果。下面我能够从 R 库函数返回结果，但是我得到了错误的结果。我正在使用时刻包中的偏度函数作为示例，它在 R 中应该可以正常工作。我检查了 RInside 中的示例，但我仍然不确定如何使用 RcppArmadillo。如何正确地将 C++ 中的犰狳矩阵传递给 R？

```
 #include <RInside.h>                   
    #include <RcppArmadillo.h>

    using namespace std;
    using namespace arma;

    int main(int argc, char *argv[]) {
        RInside R(argc, argv);  

        string R_libs = "suppressMessages(library(moments));";

        R.parseEvalQ(R_libs);

        mat A = randu<mat>(5,5);

        R["A"] = A;

        string R_skewness = "B <- skewness(A);";
        //this fails
        mat B = Rcpp::as<mat>(R.parseEval(R_skewness)); //terminate called after throwing an instance of 'Rcpp::not_a_matrix'   

        //this works but wrong
        mat B = Rcpp::as<vec>(R.parseEval(R_skewness)); // returns only 1 number, should be 5 ( 1 for each columnn), same result if i change mat B to vec B
        exit(0);
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:03:46.050

我们实现的方式`as<mat>`要求您传递的 R 对象是一个矩阵。在您的示例`B`中是一个向量：

```
> A <- matrix( runif(25), ncol = 5)
> A
           [,1]      [,2]       [,3]       [,4]      [,5]
[1,] 0.19215339 0.5857249 0.14345222 0.32154176 0.6162155
[2,] 0.95753898 0.9618379 0.06239842 0.06200197 0.7044018
[3,] 0.33575790 0.1372804 0.03027635 0.62662467 0.9778451
[4,] 0.16504957 0.1919765 0.49176372 0.94841456 0.2914772
[5,] 0.01570709 0.8055231 0.51218581 0.79562809 0.6939380
> B <- skewness( A )
> B
[1]  1.15196587 -0.04547576  0.32186257 -0.30788111 -0.29251009 
```

为了转换为`arma::vec`我不会重现您看到的行为。有`arma::vec`3个元素：

```
require( RcppArmadillo )    ## and make sure you have Rcpp 0.10.0 or later

sourceCpp( code = '
// [[Rcpp::depends("RcppArmadillo")]]

#include <RcppArmadillo.h>

using namespace arma ; 
using namespace Rcpp ;

// [[Rcpp::export]]
List foo( NumericVector x){
    vec B = Rcpp::as<vec>(x); 

    return List::create( 
        _["nrows"] = B.n_rows,
        _["ncols"] = B.n_cols
    ) ;

}
')
foo( c(1, 2, 3 ) )
# $nrows
# [1] 3
# 
# $ncols
# [1] 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T15:53:18.063

您正在尝试涉及多个大量模板化库的复合表达式。那可能会出错。我建议分段进行：

1.  确保你有`A`你期望传递给嵌入式 R的矩阵

2.  确保函数调用正常，检查结果。

3.  重要提示：检查结果类型。矩阵应该可以正常返回。

4.  将结果返回给 C++。

5.  把它送到 Rcpp。

6.  使用 RcppArmadillo 编组到达 Armadillo。

原则上，这应该有效。魔鬼在细节中，一如既往。

# maven - 在 Java 堆空间异常上运行 Cucumber 测试后，Jenkins 构建失败

> ID：13381977
> 
> 赞同：2
> 
> 时间：2012-11-14T15:37:21.763
> 
> 标签：maven, jenkins, cucumber

使用 Jenkins 构建时出现以下异常。运行 Cucumber 测试后会引发此异常。

谁能说出在 java 堆空间上失败的确切位置？

您知道可以做些什么来解决它吗？

一些背景知识：我在 Cucumber 测试期间有一个 Java 堆空间，在我增加内存后，Cucumber 测试通过，但之后我得到了这个 Java 堆空间。

谢谢，

里奥

```
mojoSucceeded org.apache.maven.plugins:maven-surefire-plugin:2.9(default-test)
[JENKINS] Recording test results
mavenExecutionResult exceptions not empty
message : Java heap space
Stack trace : 
java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOfRange(Arrays.java:3209)
    at java.lang.String.<init>(String.java:215)
    at com.sun.org.apache.xerces.internal.xni.XMLString.toString(XMLString.java:185)
    at com.sun.org.apache.xerces.internal.util.XMLAttributesImpl.getValue(XMLAttributesImpl.java:537)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser$AttributesProxy.getValue(AbstractSAXParser.java:2319)
    at org.dom4j.tree.AbstractElement.setAttributes(AbstractElement.java:543)
    at org.dom4j.io.SAXContentHandler.addAttributes(SAXContentHandler.java:916)
    at org.dom4j.io.SAXContentHandler.startElement(SAXContentHandler.java:249)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:501)
    at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:179)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:377)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2756)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:647)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at org.dom4j.io.SAXReader.read(SAXReader.java:465)
    at org.dom4j.io.SAXReader.read(SAXReader.java:264)
    at hudson.tasks.junit.SuiteResult.parse(SuiteResult.java:112)
    at hudson.tasks.junit.TestResult.parse(TestResult.java:227)
    at hudson.tasks.junit.TestResult.parse(TestResult.java:163)
    at hudson.maven.reporters.SurefireArchiver.postExecute(SurefireArchiver.java:141)
    at hudson.maven.Maven3Builder$MavenExecutionListener.recordMojoEnded(Maven3Builder.java:421)
    at hudson.maven.Maven3Builder$MavenExecutionListener.mojoSucceeded(Maven3Builder.java:403)
    at org.jfrog.build.extractor.maven.BuildInfoRecorder.mojoSucceeded(BuildInfoRecorder.java:241)
    at org.apache.maven.lifecycle.internal.DefaultExecutionEventCatapult.fire(DefaultExecutionEventCatapult.java:87)
    at org.apache.maven.lifecycle.internal.DefaultExecutionEventCatapult.fire(DefaultExecutionEventCatapult.java:42)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:228)
channel stopped 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:53:08.787

进入 Jenkins 设置并将环境变量添加`MAVEN_OPTS`到`-Xmx512m -XX:MaxPermSize=256m`. 看起来在您的测试完成后，它正在尝试解析结果，但 XML 文件太大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:00:21.683

我不确定您的 CI 环境是什么样的，但如果您将 Jenkins 作为 Windows 服务运行，您也可以尝试增加可用的堆大小。

为此，请在 ${JENKINS_HOME}\jenkins.xml 中找到文件并适当地更新命令行参数。（即，将“-Xmx256m”更改为更大的值，例如“-Xmx512m”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T18:36:55.730

我会首先尝试分析黄瓜产量较长的原因。就我而言，这是黄瓜报告的相同堆栈跟踪，用于太多测试。

# tomcat - 进入 Liferay 6.1 的管理门户

> ID：13381978
> 
> 赞同：2
> 
> 时间：2012-11-14T15:37:23.010
> 
> 标签：tomcat, liferay, admin, portal

大家好，

我用 Tomcat 7 全新安装了 Liferay 6.1，我需要进入管理门户。

文档说“test@liferay.com”，密码为“test”。显然，这些长期以来一直是“bruno@7cogs.com”和“bruno”。

没有任何效果。

有人有芝麻吗？

谢谢你。

尼古拉斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:51:45.980

对于 Liferay，安装完成后，您需要使用用户名和密码注册为管理员用户。事实上，您注册的第一个用户将成为管理员用户，之后您可以添加任意数量的用户，并且可以为新用户设置不同的访问级别。

# c# - 升级 XML 文件的序列化程序

> ID：13381979
> 
> 赞同：4
> 
> 时间：2012-11-14T15:37:25.197
> 
> 标签：c#, .net, xmlserializer

我正在对用于`XmlSerializer`将 XML 文件序列化/反序列化为类的旧应用程序进行修改。要求是在新的应用程序版本中更改某个属性，以便可以像以前一样加载旧文件，但是下次应该保留升级的（更通用的）属性。然后在下次保存时放弃旧属性。

为了更好地解释它，这是文件的外观：

```
<Data>
   <ImportantAnalysisResults>
        <ImportantAnalysisResult>...</ImportantAnalysisResult>
        <ImportantAnalysisResult>...</ImportantAnalysisResult>
        <ImportantAnalysisResult>...</ImportantAnalysisResult>
   </ImportantAnalysisResults>
</Data> 
```

新的应用程序版本应该正确加载文件，并在下次保存时用新的元素名称替换元素名称：

```
<Data>
   <Results>
        <Result>...</Result>
        <Result>...</Result>
        <Result>...</Result>
   </Results>
</Data> 
```

该`<Data>`元素具有更多属性，但这是需要更改的属性。此外，`ImportantAnalysisResult`继承自`Result`.

在我的`Data`课堂上，我尝试做这样的事情：

```
class Data 
{ 
    [Obsolete("Used for backward compatibility. Use Results instead.")]
    [XmlArrayItem("ImportantAnalysisResult", typeof(Result))]
    public List<Result> ImportantAnalysisResults
    {
        get { return _results; }
    }

    public List<Result> Results 
    {
        get { return _results; }
    }
} 
```

但这仍然会将旧属性保存回新文件中。`ImportantAnalysisResults`下次保存时消失的最佳方法是什么 ？

**`Results`有没有办法在加载时简单地将旧属性“映射”到新属性？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:02:43.680

一种方法是使用[XmlAttributeOverrides](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeoverrides.aspx)。它可以帮助您覆盖 xml 序列化。希望能帮助到你。

```
XmlAttributeOverrides xmlAttributeOverrides = new XmlAttributeOverrides();

//Add overrides to xmlAttributeOverrides, use sample from internet

XmlSerializer serializer = new XmlSerializer(typeof(Data), XmlAttributeOverrides); 
```

# insert - HSQLDB如何插入100万条记录

> ID：13381980
> 
> 赞同：0
> 
> 时间：2012-11-14T15:37:24.753
> 
> 标签：insert, hsqldb

我正在开发一个 GWT 应用程序。

为了测试我的 DataGrid，我创建了一个按钮来调用我的服务器。当我点击它时，应将 100 万条记录插入数据库。

我创建了一个别名

```
CREATE FUNCTION PUBLIC.GENERATENAME() RETURNS VARCHAR(32768) SPECIFIC GENERATENAME_10073 LANGUAGE JAVA NOT DETERMINISTIC NO SQL CALLED ON NULL INPUT EXTERNAL NAME 'CLASSPATH:com.package.sql.Helper.generateName' 
```

并创建了一个存储过程

```
CREATE PROCEDURE PUBLIC.GENERATE() SPECIFIC GENERATE_10073 LANGUAGE SQL NOT DETERMINISTIC MODIFIES SQL DATA NEW SAVEPOINT LEVEL BEGIN ATOMIC DECLARE VAL_P BIGINT;TRUNCATE TABLE PUBLIC.CONTACT;SET VAL_P=1;LOOP_LABEL:WHILE VAL_P<=1000 DO INSERT INTO PUBLIC.CONTACT VALUES VAL_P,PUBLIC.GENERATENAME(),PUBLIC.GENERATENAME();SET VAL_P=VAL_P+1;END WHILE LOOP_LABEL;END 
```

我的桌子很简单

```
CREATE MEMORY TABLE PUBLIC.CONTACT(CONTACT_ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,FIRST_NAME VARCHAR(10) NOT NULL,SECOND_NAME VARCHAR(10) NOT NULL) 
```

我测试并意识到我不能一次插入 1M 行，或者我可以吗？

插入如此大量数据的最佳方法是什么？

我正在使用 HSQLDB 2.2.4 版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:38:29.670

因为您使用 CREATE MEMORY TABLE，所以所有数据都存储在内存中。您可能必须增加 Java 堆分配来存储数据。

对于文件数据库，您可以使用 CREATE CACHED TABLE 来减少内存使用。

# neo4j - Neo4J 在聚合查询上的性能

> ID：13381989
> 
> 赞同：0
> 
> 时间：2012-11-14T15:37:44.310
> 
> 标签：neo4j, cypher

给定以下架构：（对不起，它是歪的）

![架构](../Images/d0e0c1acff842b164a0eefec873b099b.png)

我试图取回一个地方的活动列表，并计算在那个地方有多少人参加了该特定活动。

```
start root = node(0)
> match root-[:HAS_PLACE]->place-[:CAN_PLAY]->activity<-[:CAN_PLAY]-place2<-[?:PLAYS_AT]-user
> where place.Id = 1307
> return activity, count(user)
==> +---------------------------------------------------+
==> | activity                            | count(user) |
==> +---------------------------------------------------+
==> | Node[5]{Name->"Swimming",Id->5}     | 0           |
==> | Node[3]{Name->"Kick Boxing",Id->3}  | 0           |
==> | Node[12]{Name->"Basketball",Id->22} | 0           |
==> | Node[13]{Name->"Handball",Id->23}   | 0           |
==> | Node[6]{Name->"Racquetball",Id->6}  | 0           |
==> | Node[2]{Name->"Aerobics",Id->2}     | 0           |
==> +---------------------------------------------------+
==> 6 rows, 21403 ms 
```

虽然我认为上述内容符合我的要求，但花 21 秒并不是一件好事。我相信这是由于可选关系甚至回溯，但是我怎样才能做出更好的查询呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T18:18:00.087

尝试：

```
start root = node(0)
match root-[:HAS_PLACE]->place-[:CAN_PLAY]->activity, user-[?:PLAYS_AT]->place
where place.Id = 1307
return activity, count(user) 
```

或在placenodes上使用索引并执行以下操作：

```
start place = node:places(Id=1307)
match place-[:CAN_PLAY]->activity, user-[?:PLAYS_AT]->place
return activity, count(user) 
```

# javascript - 在 dayclick 回调中访问 fullCalendar JSON customData

> ID：13381992
> 
> 赞同：3
> 
> 时间：2012-11-14T15:37:49.370
> 
> 标签：javascript, jquery, json, fullcalendar

对不起这个最有可能简单的问题。我想`JSON`向 fullCalendar 添加一些自定义数据并在我的 dayClick 回调函数中使用它。更具体地说，我想在 dayClick 中访问和更改 customData 上的元素。但是我不知道该怎么做。是否可以不更改 fullcalendar 源代码？

提前非常感谢 Jens

```
$('#calendar').fullCalendar({
    ....
    firstDay: 1,
    customData: { foo: 'bar', more: 'baz' },
    dayClick: function(date, allDay, jsEvent, view) {
        // Within the callback function, this is set to the <td> of the clicked day.
        var t = $(this);
        var foo = customData.foo; // does not work
        customData.more = 'foo'; // does not work

        // Change the day's background color
        if (t.hasClass('badge-important') && foo == 'bar') {
            t.removeClass('badge-important');               
        } else {
            t.addClass('badge-important');              
        }
    },
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:40:40.200

问题是您**没有**在任何地方定义 customData 变量。以下创建变量来存储 JSON 的方法将解决您的问题。检查下面的代码：

```
var customData = {"foo":"bar"};

$('#calendar').fullCalendar({
....
firstDay: 1,
customData: customData,
dayClick: function(date, allDay, jsEvent, view) {
    // Within the callback function, this is set to the <td> of the clicked day.
    var t = $(this);
    var foo = customData.foo; // will now work
    customData.more = 'foo' // will work too

    // Change the day's background color
    if (t.hasClass('badge-important') && foo == 'bar') {
        t.removeClass('badge-important');               
    } else {
        t.addClass('badge-important');              
    }
},
}); 
```

我希望它有所帮助。干杯