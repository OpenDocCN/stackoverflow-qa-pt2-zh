# StackOverflow 问答 16103000-16103999

# c# - 返回一个由孩子的联合组成的基础集合

> ID：16103000
> 
> 赞同：1
> 
> 时间：2013-04-19T10:55:37.640
> 
> 标签：c#, collections

我正在尝试根据孩子的总和来检索父 obj 的集合。例如：3级

```
Animal,  
Dog:Animal,  
Cat:Animal 
```

让我们尝试用一些代码来解释：

```
Class something{  
    public List <Dog> DogList{get; set;};  
    public List <Cat> CatList{get; set;};

    Public List <Animal> getAnimals{
        get{ return DogList+CatList; }  
    }  
} 
```

`getAnimals`应该返回 2 个子列表的总和

```
Public List <Animal> getAnimals{
    get{
        List<Animal> AnimalList = new List<Animal>();

        foreach (Animal child in DogList)
            AnimalList.add(child);

        foreach(Animal child in CatList)
            AnimalList.add(child);

        return AnimalList;
        }
    } 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:00:41.207

希望这是您正在寻找的：

```
public List<Animal> getAnimals()
{
    return DogList.Concat<Animal>(CatList)
                  .ToList();
} 
```

或者如果您想退回独特的猫和独特的狗：

```
public List<Animal> getAnimals()
{
    return DogList.Union<Animal>(CatList)
                  .ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:01:16.600

我想你可能是指这种方法，[ `Enumerable.Concat<T>`][1]。它是 any 的扩展方法`IEnumerable<T>`，`List<T>`它允许您获取两个集合，并生成一个`IEnumerable<T>`“包含”两个原始集合内容的新集合。

请注意，这`Concat`不是复制值的集合，它将是您只能枚举的集合（如 with `foreach`），当您这样做时，它将枚举两个原始集合并生成所有元素。

```
public List<Animal> getAnimals() 
{
    return DogList.OfType<Animal>().Concat(CatList).ToList()
} 
```

# jquery - 无法从 JSON 读取/访问数据。？

> ID：16103001
> 
> 赞同：1
> 
> 时间：2013-04-19T10:55:43.820
> 
> 标签：jquery, json

尝试从中访问/读取数据`JSON`，这给了我未定义的值。

有一个字符串，使用`JSON`.parse 将其转换为对象

```
str = '{"content":[{"newstitle":"a","newsdesc":"a","newsimage":"a"}],"leftnav":[{"navtitle":"b","navdesc":"b","navimage":"b"}]}'

var finalobj = JSON.parse(str);
alert(finalobj.leftnav.navtitle); 
```

所以警报输出应该是值“b”，但它返回“未定义”。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:57:06.953

你必须使用`[]`，因为leftnav在数组（对象数组）中......并且`[0]`因为`navtitle`在数组的0索引中

尝试这个

```
alert(finalobj.leftnav[0].navtitle); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:58:05.257

它应该是

```
alert(finalobj.leftnav[0].navtitle); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T10:58:29.393

```
alert(finalobj.leftnav[0].navtitle); 
```

# php - 如何保护我的代码免受 HTML 注入？

> ID：16103003
> 
> 赞同：0
> 
> 时间：2013-04-19T10:55:52.767
> 
> 标签：php, html, string, code-injection, entities

这是我的代码，如何防止人们在注释和名称字段中注入 HTML 或类似内容？我读了一些关于 html 实体和剥离标签的东西，但我不知道该怎么做:(

```
 <?php
error_reporting (E_ALL ^ E_NOTICE); 
require('connect.php');
$name=$_POST['name'];
$comment=$_POST['comment'];
$submit=$_POST['submit'];
if($submit)
{
   if($name&&$comment)
   {
   $query=mysql_query("INSERT INTO comment (id,name,comment) VALUES ('','$name','$comment')");
   header("Location: success.php");
   }
   else
   {
       echo "Please fill out all the fields.";
   }
}
?>
<html>
<head>
 <title>Family Travels - Lanzarote</title>
       <link rel="stylesheet" href="layout2.css" title="style1" media="screen" />   
</head>

<body>

<div id="title">

 <img src="images/banner.png" alt="Title">

</div> <!-- title -->
<div id="container">

<div id="content">
<h2>Share your experience:</h2>

<form action="comment.php" method="POST">
<label>Name:  </label><br /><input type="text" name="name" value="<?php echo "$name" ?>" /><br /><br />
<label>Comment:  </label><br /><textarea style="width:350px;height:130px" name="comment" cols="25" rows="7"></textarea><br /><br /><br />
<input type="submit" name="submit" value="Comment" /><br />
<div style="height:600px;width:500px;overflow:auto;white-space:pre-line;word-wrap:break-word;">
</form>
<hr width="500px" size="3px" />

<?php
require('connect.php');
$query=mysql_query("SELECT * FROM comment ORDER BY id DESC");
 while($rows=mysql_fetch_assoc($query))
    {
    $id=$rows['id'];
    $dname=$rows['name'];
    $dcomment=$rows['comment'];
    $linkdel="<a href=\"delete.php?id=" . $rows['id'] . "\">Delete Comment</a>";
    echo '<font color="white">Name:</font>  ' . $dname . '<br />' . '<br />' . '<font color="white">Comment:</font>  ' . '<br />' . '<br />' . $dcomment . '<br />' . '<br />' . $linkdel . '<br />' . '<br />' . 
    '<hr size="3px" width="500px" />' ;  

   }
?>  
</div>
 </div> <!-- content --> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T10:58:28.073

我想你正在寻找这个`strip_tags()`功能

[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

它将从字符串中删除所有 html 和 php 标签

# python - 将关系插入到一个表中，该表使用 SQLALchemy 连接 3 个具有多对多关系的表 - python

> ID：16103009
> 
> 赞同：2
> 
> 时间：2013-04-19T10:56:20.130
> 
> 标签：python, insert, sqlalchemy, many-to-many, foreign-key-relationship

下面你可以看到我的数据库的一些表是如何相关的。

![图表](https://i.stack.imgur.com/y6iwp.jpg)

如您所见，中间的表连接了 3 个具有多对多关系的表......

1.  一种基因可以在多个器官中表达并在多个实验中进行研究
2.  在一个器官中，可以表达多个基因，并且可以在多个实验中研究一个器官。
3.  在一项实验中，可以研究多个基因和器官

我正在使用 SQLAlchemy 插入数据。我知道如何与连接 2 个表的表添加多对多关系，并且或多或少我是这样做的：

```
def add_data():
    session=Session()
    gene = "BRCA2"
    gene_to_add = Gene(gene_name = gene)
    session.add(gene_to_add)

    experiment = "experiment1"
    experiment_to_add = Experiment(experimentAccession = experiment)
    gene_to_add.experiment_rel.append(experiment_to_add)

    organ = "brain"
    organ_to_add = Organ(organName = organ)

    session.commit()
    session.close() 
```

但我不知道如何添加新的关系（在这种情况下是器官表）。我尝试使用扩展而不是附加，但它不起作用......

有谁知道如何解决这种情况？也许数据库的结构应该改变......任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:58:05.473

您始终可以使用[关联对象](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#association-object)：

```
class Genes2Experiments2Organs(Base):
    __tablename__ = 'genes2experiments2organs'
    gene_id = Column(Integer, ForeignKey('genes.id'), primary_key=True)
    experiment_id = Column(Integer, ForeignKey('experiments.id'), primary_key=True)
    organ_id = Column(Integer, ForeignKey('organs.id'), primary_key=True)
    # relationships
    gene = relationship("Gene", backref="map") 
    experiment = relationship("Experiment", backref="map") 
    organ = relationship("Organ", backref="map") 

class Gene(Base):
    __tablename__ = 'genes'
    id = Column(Integer, primary_key=True)
    gene_name = Column(String)

class Experiment(Base):
    __tablename__ = 'experiments'
    id = Column(Integer, primary_key=True)
    experimentAccession = Column(String)

class Organ(Base):
    __tablename__ = 'organs'
    id = Column(Integer, primary_key=True)
    organName = Column(String)

###########################################
def add_data():
    session = Session()
    gene = "BRCA2"
    gene_to_add = Gene(gene_name = gene)
    #session.add(gene_to_add)

    experiment = "experiment1"
    experiment_to_add = Experiment(experimentAccession = experiment)
    #session.add(experiment_to_add)

    organ = "brain"
    organ_to_add = Organ(organName = organ)
    #session.add(organ_to_add)

    #gene_to_add.experiment_rel.append(experiment_to_add)
    assoc_obj_to_add = Genes2Experiments2Organs(
        gene = gene_to_add,
        experiment = experiment_to_add,
        organ = organ_to_add,
        )

    session.add(assoc_obj_to_add)

    session.commit()
    session.close()

add_data() 
```

# apache - 如何在模糊匹配搜索结果之前显示 Solr 搜索完全匹配？

> ID：16103012
> 
> 赞同：3
> 
> 时间：2013-04-19T10:56:24.597
> 
> 标签：apache, solr

使用 Solr Apache。我想先显示精确匹配，然后在搜索 reault 中显示模糊匹配。

例如，我尝试查找世界**测试**，但是在响应中，我得到了世界之类的结果，例如**cast，latest** before results，其中首先包含实际的单词**test**。

我尝试了这样的查询：`test^100 OR test~^5`但这并没有改变结果的顺序，也许查询的这个改变是不正确的。

我的 Solr 配置：

```
solrconfig.xml
<requestHandler name="/select" class="solr.SearchHandler">
  <lst name="defaults">
    <str name="echoParams">explicit</str>
    <str name="defType">edismax</str>
    <int name="rows">10</int>
    <str name="df">text</str>
    <str name="wt">php</str>
    <str name="sort">score desc</str>
    <str name="fl">*, score</str>

   <!-- Highlighting defaults -->
   <str name="hl">on</str>
   <str name="hl.fl">*</str>
   <str name ="hl.snippets">10</str>
   <str name="hl.fragsize">250</str>
   <str name="tie">0.1</str> 
   <str name="hl.simple.pre">&lt;b style="color:black;background-color:#888888"&gt;</str>
   <str name="hl.simple.post">&lt;/b&gt;</str>
   <str name="hl.usePhraseHighlighter">true</str>
   <str name="hl.highlightMultiTerm">true</str>
   <str name ="hl.useFastVectorHighligher">true</str>
   <str name ="hl.maxAnalyzedChars">200000</str>
   <str name="f.title.hl.alternateField">title</str>
   <str name="f.description.hl.alternateField">description</str>
   <str name="spellcheck">true</str>
 </lst> 
```

```
schema.xml  
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>
      <filter class="solr.NGramFilterFactory" minGramSize="3" maxGramSize="50"/>
      <filter class="solr.StandardFilterFactory"/>
      <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true"/>
      <filter class="solr.LowerCaseFilterFactory"/>
      <filter class="solr.TrimFilterFactory" />
      <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      <filter class="solr.StandardFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
      <filter class="solr.StandardFilterFactory"/>
      <filter class="solr.LowerCaseFilterFactory"/>
      <filter class="solr.PorterStemFilterFactory"/>
      <filter class="solr.PhoneticFilterFactory" encoder="DoubleMetaphone" inject="true"/>
      <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
  </analyzer>
</fieldType> 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-23T06:03:31.190

我一直在寻找相同问题的解决方案。在浏览了一些文档和邮件论坛之后，我意识到 solr 中没有内置方法可以直接实现这一点。虽然这种方法不是一种非常干净和有效的方法，但我是这样解决这个问题的：

创建查询的副本并在每个单词的末尾附加“~”（波浪号），保留不带波浪号的查询副本并将其提高。结果的数量保持不变，只有完全匹配的排名更高。

```
For e.g: (bangalore)^20 (bangalore~)10 
```

然而，这种方法可能不如普通搜索有效，因为每个词都有两个需要搜索的标记，但如果相关性比效率优先级更高，那么可以这样做。此外，查询中的额外术语不会像人们预期的那样减慢搜索速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-07T14:21:51.947

一种方法是使用“提升排名术语”，通过创建一个布尔查询，其中主要查询部分标记为强制，排名术语标记为高提升可选。

您的查询应类似于以下内容之一：

```
+(basequery) rankingterm1^100
+(basequery) rankingterm1^10000 rankingterm2^100 
```

例如：

```
+(test OR test~) test^100 
```

这样，由于加号`+`，括号之间的内容是强制性的，而在高提升的情况下，括号之间的内容是可选的，因此如果文档同时匹配两个术语（basequery 和rankingterm/s），它将获得比仅匹配的文档更高的排名查询的强制部分（basequery）

你可以在这里阅读更多相关信息：[https ://cwiki.apache.org/confluence/display/solr/SolrRelevancyCookbook#SolrRelevancyCookbook-BoostingRankingTerms](https://cwiki.apache.org/confluence/display/solr/SolrRelevancyCookbook#SolrRelevancyCookbook-BoostingRankingTerms)

# java - 缓存（EHCache）回退机制

> ID：16103020
> 
> 赞同：2
> 
> 时间：2013-04-19T10:56:51.200
> 
> 标签：java, caching, memcached, ehcache, cache-control

我有一个应用程序，它有 2 种服务方法暴露给 3rd 方访问，即搜索和预订订​​单。当第 3 方用户发送搜索请求时，我的应用程序将执行搜索操作并将所有结果 bean 对象存储在缓存（EHCache）中，并针对唯一的搜索 ID。当第 3 方用户发送图书订购请求时，所有结果 bean 对象都从缓存中获取并用于图书订购流程。在这里，缓存所有结果数据对象是强制性的。

让我们假设第 3 方用户已完成搜索，现在他们已发送图书订购请求。但是在两个用户调用之间，我的缓存应用程序在搜索数据存储在缓存中后由于缓存中的某些问题或某些问题而崩溃。现在，当第 3 方用户向我的应用程序发送图书订购请求时，由于所需的数据不在缓存中，因此不会处理图书订购。

如何处理上述场景的缓存回退机制。

任何人都可以建议对此进行任何阅读。

# wpf - WPF ComboBox 与 CheckBoxes 绑定到标志枚举 TwoWay

> ID：16103022
> 
> 赞同：1
> 
> 时间：2013-04-19T10:56:58.223
> 
> 标签：wpf, binding, combobox, enums, checkbox

我正在创建 WPF 实用程序库，但我坚持如何创建一个易于使用的枚举转换器，这将有助于将任何枚举绑定到 ComboBox 控件，并且当使用 [Flags] 属性声明枚举时，ComboBox 将包含绑定到它的复选框数据。解决方案需要是通用的，以便它易于用于任何枚举，我想它需要经验丰富的 WPF 开发人员的新眼睛。

到目前为止，我已经提出了 ObjectDataProvider 作为枚举项的来源和 2 个转换器的组合，一个用于 ItemsSource，另一个用于 SelectedValue。我使用 CollectionView 作为 ItemsSource 的基类来使用 CurrentChanged，但它不起作用，因为我在收到有关在未执行转换器的 ConvertBack 的情况下检查任何 CheckBox 的通知集合后试图引发 OnCurrentChanged 。

问题是 ComboBox SelectedValue 属性绑定到的数据绑定属性不会更新，除非我更改所选项目（不勾选复选框）。我已经设置了 IsSynchronizedWithCurrentItem 但它没有帮助。

如何从数据绑定对象强制更新 SelectedValue？我有选择的自由，因此解决方案可能涉及自定义附加属性，从 ComboBox 继承等。作为 WPF 的新手，我认为尽管该解决方案几乎是正确的，因为它几乎可以工作，但可以有一种更简单的方法来实现它。

另一个问题是如何自定义 ComboBox 上显示的文本，使其包含选中复选框的聚合选择。

[我在这里](http://www.opamo.com/CheckComboTest.7z)上传了 VS2012 项目。项目的结构类似于具有单独保存资源的真实应用程序（在 App.xaml 中为简单起见）。

抱歉，我没有包含任何代码，但涉及到很多代码。

下面是绑定到标准枚举的 CheckBox 的 XAML 声明（尽管使用的枚举与 [Flags] 一起使用），它可以正常工作并且进一步将 CheckBox 绑定到 [Flags] 枚举。

```
<ComboBox ItemsSource="{Binding Source={StaticResource someItemsSource}}"
              SelectedValue="{Binding BindToSomeItems}"
              Style="{StaticResource enumComboBox}"/>
<ComboBox ItemsSource="{Binding BindToSomeItems, Converter={local:LocalizedFlagsEnumConverter}}"
              IsSynchronizedWithCurrentItem="True"
              SelectedValue="{Binding BindToSomeItems, Mode=TwoWay, Converter={local:SelectedFlagsEnumConverter}}"
              Style="{StaticResource flagsComboBox}"
    /> 
```

和资源（解释价值转换器的使用）：

```
<Application.Resources>
    <Style x:Key="enumComboBox" TargetType="{x:Type ComboBox}">
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=.,Mode=OneWay, Converter={local:LocalizedEnumConverter}}" Style="{x:Null}"/>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="flagsComboBox" TargetType="{x:Type ComboBox}">
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <CheckBox IsChecked="{Binding Path=Checked,Mode=TwoWay}"/>
                        <TextBlock Text="{Binding Path=Name,Mode=OneWay}"/>
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Application.Resources> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-26T19:15:31.587

我使用自定义复选框来执行此操作。它完美而简单地工作。请参阅课程顶部的评论以了解如何使用它。

希望能帮助到你...

```
using System;
using System.Windows;
using System.Windows.Controls;

namespace HQ.Wpf.Util.MyControl
{
    /// <summary>
    /// Usage: Bind EnumFlag and Two way binding on EnumValue instead of IsChecked
    /// Example: <myControl:CheckBoxForEnumWithFlagAttribute 
    ///                 EnumValue="{Binding SimulationNatureTypeToCreateStatsCacheAtEndOfSimulation, Mode=TwoWay}" 
    ///                 EnumFlag="{x:Static Core:SimulationNatureType.LoadFlow }">Load Flow results</myControl:CheckBoxForEnumWithFlagAttribute>
    /// </summary>
    public class CheckBoxForEnumWithFlagAttribute : CheckBox
    {
        // ************************************************************************
        public static DependencyProperty EnumValueProperty =
            DependencyProperty.Register("EnumValue", typeof(object), typeof(CheckBoxForEnumWithFlagAttribute), new PropertyMetadata(EnumValueChangedCallback));

        public static DependencyProperty EnumFlagProperty =
            DependencyProperty.Register("EnumFlag", typeof(object), typeof(CheckBoxForEnumWithFlagAttribute), new PropertyMetadata(EnumFlagChangedCallback));

        // ************************************************************************
        public CheckBoxForEnumWithFlagAttribute()
        {
            base.Checked += CheckBoxForEnumWithFlag_Checked;
            base.Unchecked += CheckBoxForEnumWithFlag_Unchecked;
        }

        // ************************************************************************
        private static void EnumValueChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
        {
            var checkBoxForEnumWithFlag = dependencyObject as CheckBoxForEnumWithFlagAttribute;
            if (checkBoxForEnumWithFlag != null)
            {
                checkBoxForEnumWithFlag.RefreshCheckBoxState();
            }
        }

        // ************************************************************************
        private static void EnumFlagChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
        {
            var checkBoxForEnumWithFlag = dependencyObject as CheckBoxForEnumWithFlagAttribute;
            if (checkBoxForEnumWithFlag != null)
            {
                checkBoxForEnumWithFlag.RefreshCheckBoxState();
            }
        }

        // ************************************************************************
        public object EnumValue
        {
            get { return GetValue(EnumValueProperty); }
            set { SetValue(EnumValueProperty, value); }
        }

        // ************************************************************************
        public object EnumFlag
        {
            get { return GetValue(EnumFlagProperty); }
            set { SetValue(EnumFlagProperty, value); }
        }

        // ************************************************************************
        private void RefreshCheckBoxState()
        {
            if (EnumValue != null)
            {
                if (EnumValue is Enum)
                {
                    Type underlyingType = Enum.GetUnderlyingType(EnumValue.GetType());
                    dynamic valueAsInt = Convert.ChangeType(EnumValue, underlyingType);
                    dynamic flagAsInt = Convert.ChangeType(EnumFlag, underlyingType);

                    base.IsChecked = ((valueAsInt & flagAsInt) > 0);
                }
            }
        }

        // ************************************************************************
        private void CheckBoxForEnumWithFlag_Checked(object sender, RoutedEventArgs e)
        {
            RefreshEnumValue();
        }

        // ************************************************************************
        void CheckBoxForEnumWithFlag_Unchecked(object sender, RoutedEventArgs e)
        {
            RefreshEnumValue();
        }

        // ************************************************************************
        private void RefreshEnumValue()
        {
            if (EnumValue != null)
            {
                if (EnumValue is Enum)
                {
                    Type underlyingType = Enum.GetUnderlyingType(EnumValue.GetType());
                    dynamic valueAsInt = Convert.ChangeType(EnumValue, underlyingType);
                    dynamic flagAsInt = Convert.ChangeType(EnumFlag, underlyingType);

                    dynamic newValueAsInt = valueAsInt;
                    if (base.IsChecked == true)
                    {
                        newValueAsInt = valueAsInt | flagAsInt;
                    }
                    else
                    {
                        newValueAsInt = valueAsInt & ~flagAsInt;
                    }

                    if (newValueAsInt != valueAsInt)
                    {
                        object o = Enum.ToObject(EnumValue.GetType(), newValueAsInt);

                        EnumValue = o;
                    }
                }
            }
        }

        // ************************************************************************
    }
} 
```

# android - Android 我无法从 url 获取 xml

> ID：16103025
> 
> 赞同：0
> 
> 时间：2013-04-19T10:57:06.283
> 
> 标签：android, xml, http-get

我正在尝试从 url 获取 xml，但我在 HttpResponse 中有一个错误。

URL例如如下：

[http://maps.googleapis.com/maps/api/directions/xml?origin=43.364876,-5.8654205&destination=43.545686,-5.664482&sensor=true](http://maps.googleapis.com/maps/api/directions/xml?origin=43.364876,-5.8654205&destination=43.545686,-5.664482&sensor=true)

我的代码是：

```
public String getXML (String url){

            String result = null;
            try {
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpGet httpPost = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                result = EntityUtils.toString(httpEntity);
            } catch (Exception ex) {
                Toast errorToast =
                        Toast.makeText(getApplicationContext(),
                                "Error reading xml", Toast.LENGTH_LONG);
                errorToast.show();
            }
            return result;
} 
```

我已经在清单中设置了互联网权限。错误在该行中：

`HttpResponse httpResponse = httpClient.execute(httpPost);`

并显示错误：

android.os.NetworkOnMainThreadException

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:50:57.123

您应该创建一个新线程，因为获取数据可能需要很长时间，从而阻塞 UI 线程。这就是你得到`android.os.NetworkOnMainThreadException`.

尝试这个，

```
new Thread(new Runnable() {

        @Override
        public void run() {
            // Your code here.

        }
    }).start(); 
```

该解决方案的替代方案是使用 android 中提供的 AsyncTask。它具有`doInBackground`在后台线程上运行的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:12:36.803

您无需直接调用 `getXML();`，而是在 main 方法中编写此代码段：

```
 {
            ...
            String[] params = new String[]{url}; 
            AsyncPostData apd = new AsyncPostData ();
            apd.execute(params);
            ...        
    } 
```

如下定义您的异步任务：

```
private class AsyncPostData extends AsyncTask<String, Void, Void> {

    @Override
    protected Void doInBackground(String... params) {
        getXML (params[0])
        return null;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:05:53.127

```
I think we have a same query here 
```

[无法从android中的URL获取xml文件](https://stackoverflow.com/questions/5842219/cant-get-xml-file-from-an-url-in-android)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T12:37:04.780

具有 4 个以上操作系统版本的 Android 设备不允许从主要活动调用 Web 服务。你有活动的HTTP请求，所以你有“android.os.NetworkOnMainThreadException”

我建议您选择 AsyncTask 解决方案。这是一种运行请求或任何其他后台任务并使用具有最新操作系统版本的设备调用 Web 服务的简单直接的方法，您必须使用 AsyncTask。

如果您需要在运行请求时显示某种进度条，它也很容易实现，例如 onProgressUpdate。

```
private class YourTask extends AsyncTask<URL, Integer, Long> {
 protected Long doInBackground(URL... urls) {
    //call your methods from here
         //publish yor progress here..
        publishProgress((int) ((i / (float) count) * 100));
 }

 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
    //action after execution success or not
 }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T12:16:41.883

我只是从今天早些时候提出的另一个问题重新发布这个：

您正在尝试在主 UI 线程上运行网络请求。自 3.0 以来，Android 不允许您这样做（我相信）。这样做会导致您的 UI 锁定直到请求完成，从而在执行请求期间使您的应用程序无用。

您必须在 new`Thread`或, 中运行您的请求`ASyncTask`，以承担 UI 线程的负载。您可以在此处找到有关如何使用多个线程的更多信息[。](http://developer.android.com/guide/components/processes-and-threads.html)

# grails - 自定义插件和war文件之间的Grails依赖关系

> ID：16103027
> 
> 赞同：0
> 
> 时间：2013-04-19T10:57:07.247
> 
> 标签：grails, plugins, war

我创建了一个自定义 Grails 插件，这个插件需要另外两个 war 文件才能正常工作。有人可以告诉我如何使该插件取决于那些战争文件吗？我应该在 BuildConfig.groovy 中放入什么？谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:48:37.660

如果我问你问题，你需要的是一起构建应用程序、插件和战争。你可以使用 Maven、Gradle 或 Gant。

这是一个类似的问题：[How to setup a multiproject Grails using Gradle?](https://stackoverflow.com/questions/6610158/how-to-set-up-a-multiproject-grails-using-gradle)

# xslt - xsl:if 或 xsl:applytemplate 哪个具有更好的内存使用率

> ID：16103034
> 
> 赞同：0
> 
> 时间：2013-04-19T10:57:43.483
> 
> 标签：xslt, xslt-2.0

可以说我有如下输入。

```
<country>
    <name>countryname</name>
    <capital>captialname</capital>
    <population>19000</population>
</country> 
```

我正在将元素名称转换为使用 xsl 说上层代码。有时可能不会出现国家的子元素。所以我可以如下写我的转换。

```
<xsl:template match="country">
    <xsl:element name="COUNTRY">
        <xsl:apply-templates select="name" />
        <xsl:apply-templates select="capital" />
        <xsl:apply-templates select="population" />
    </xsl:element>
</xsl:template>

<xsl:template match="name">
    <xsl:element name="NAME">
        <xsl:value-of select="." />
    </xsl:element>
</xsl:template>

<xsl:template match="capital">
    <xsl:element name="CAPITAL">
        <xsl:value-of select="." />
    </xsl:element>
</xsl:template>

<xsl:template match="population">
    <xsl:element name="POPULATION">
        <xsl:value-of select="." />
    </xsl:element>
</xsl:template> 
```

或者我可以这样做。

```
<xsl:template match="country">
<xsl:element name="COUNTRY">
    <xsl:if test="name">
        <xsl:element name="NAME">
            <xsl:value-of select="." />
        </xsl:element>
    </xsl:if>
    <xsl:if test="capital">
        <xsl:element name="CAPITAL">
            <xsl:value-of select="." />
        </xsl:element>
    </xsl:if>
    <xsl:if test="population">
        <xsl:element name="POPULATION">
            <xsl:value-of select="." />
        </xsl:element>
    </xsl:if>
</xsl:element> 
```

我想知道哪种方式会使用更少的内存。我拥有的实际代码在模板内部大约有七个级别。所以我需要知道的是，如果我不使用简单元素的模板，是否会提高内存使用率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:56:49.717

根据我的理解，第一个很好。只是改变：

```
<xsl:apply-templates select="name" />
        <xsl:apply-templates select="capital" />
        <xsl:apply-templates select="population" /> 
```

**至**

```
<xsl:apply-templates/> 
```

仅当子元素不来时不必担心，有时 XSLT 会处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:41:31.497

我认为你是从错误的方式接近。您当前的 XSLT 模板不是很灵活。您将不断修改它以添加新元素。

相反，您应该使用身份转换，并包括一个模板来匹配任何通用元素，将名称输出为大写。

试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="@*|node()[not(self::*)]">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*">
    <xsl:element name="{upper-case(local-name())}">
      <xsl:apply-templates select="@*|node()"/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

请注意以下模板匹配任何元素并将名称转换为大写

```
<xsl:template match="*"> 
```

而其他模板匹配将匹配属性或元素以外的任何其他节点，并按原样复制它们

```
<xsl:template match="@*|node()[not(self::*)]"> 
```

请注意，如果 XML 定义了名称空间，则此解决方案将不起作用，但无需进行太多调整即可使其应对。

# c++ - 检查向量的可用性（性能问题）

> ID：16103036
> 
> 赞同：-4
> 
> 时间：2013-04-19T10:57:45.633
> 
> 标签：c++, performance, vector

我想检查一个向量，看看它是否至少有一个元素。哪个更快？

```
if (vec.size()) {
  ...
} 
```

或者

```
if (vec) {
  ...
} 
```

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:02:59.663

使用 just `vector::empty`，因为它专门用于此特定任务。

```
 std::vector<int> myvector;

  for (int i=1;i<=10;i++) myvector.push_back(i);

  while (!myvector.empty())
  {
     sum += myvector.back();
     myvector.pop_back();
  } 
```

# html - 在 Pinnacle 购物车中实施 Wordpress 网站/自定义设计模板的 HTML

> ID：16103042
> 
> 赞同：0
> 
> 时间：2013-04-19T10:58:19.880
> 
> 标签：html, wordpress, pinnacle-cart

我们在 wordpress 中为客户建立了一个网站。现在他想用 pinnacle cart 制作它，以便销售一些产品。我们进行了很多搜索，但找不到令人信服的方法来实现它。我们所发现的只是编辑现有文件的可能性，但这似乎不能满足我们的需要。在从普通 HTML 模板/wordpress 转变为巅峰购物车时，是否有人有一些我们可以遵循的信息或指导方针。我还阅读了一些关于其中使用的 smarty 引擎的信息。我们只想将 pinnacle cart 的功能插入到我们的设计中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T12:07:03.300

我几乎在一个月后回答了这个问题，到这个时候你可能已经找到了解决方案，但我想这可能对其他人有帮助。

Pinnacle 推车的设计集成非常简单。

它在包含主题的内容文件夹中有皮肤文件，管理员可以从管理员端激活主题。

# 巅峰推车设计集成的步骤。

1.  在皮肤文件夹中创建一个新文件夹。
2.  在其中创建一个文件`skin.xml`（您可以从其他示例主题中复制）
3.  in`skin.xml` `name` **应与您的文件夹名称相同**
4.  创建一个包含所有主题相关图像的文件夹 images。
5.  创建一个文件夹样式，其中包含与主题相关的样式表。
6.  在样式内部创建一个文件 theme-default.css 并将您的样式放入其中。
7.  在皮肤文件夹中创建另一个包含页面结构的文件夹模板。
8.  请参考 pinnacle cart 提供的示例主题，并在此基础上创建您的主题。
9.  我认为最重要的是 - pinnacle 购物车中有三个地方包含设计文件：

    一种。内容\引擎\设计
    b. 内容\皮肤\皮肤名称
    c. 内容\皮肤\_custom\皮肤

所有这些文件夹都包含同名的文件夹和文件，它们做同样的事情。但是有一个偏好 - 所以考虑网站的标题部分，与之对应的文件将是`templates\layouts\zones\header.html`.

所以 pinnacle 购物车会首先查看`content\skins\_custom\skin\templates\layouts\zones\header.html`

如果文件不存在，那么它会寻找`content\skins\skin_name\templates\layouts\zones\header.html`

如果文件不存在，那么它会寻找`content\engine\design\templates\layouts\zones\header.html`

如果它仍然不存在，它会抛出一个错误。

并且不要忘记从管理员端激活此皮肤 :)

# xml - 使用 XSLT 从 XML 中获取不同的价值

> ID：16103044
> 
> 赞同：0
> 
> 时间：2013-04-19T10:58:26.367
> 
> 标签：xml, xslt, xslt-1.0

我的xml是这样的

```
 <syddata lastUpdated="19.04.2013 12:40 ">
  <data itemnumber="ln1044-wh-36" variant1="White" variant2="Size 36" variant1group="Farver" variant2group="Størrelser" var1code="wh" var2code="36" estocklevel="0,000000000000" sortering="0"></data>
  <data itemnumber="ln1044-wh-38" variant1="White" variant2="Size 38" variant1group="Farver" variant2group="Størrelser" var1code="wh" var2code="38" estocklevel="0,000000000000" sortering="0"></data>
  <data itemnumber="ln1044-wh-40" variant1="White" variant2="Size 40" variant1group="Farver" variant2group="Størrelser" var1code="wh" var2code="40" estocklevel="0,000000000000" sortering="0"></data>
  <data itemnumber="ln1044-wh-42" variant1="White" variant2="Size 42" variant1group="Farver" variant2group="Størrelser" var1code="wh" var2code="42" estocklevel="0,000000000000" sortering="0"></data>
  <data itemnumber="ln1044-wh-44" variant1="White" variant2="Size 44" variant1group="Farver" variant2group="Størrelser" var1code="wh" var2code="44" estocklevel="0,000000000000" sortering="0"></data>
</syddata> 
```

我有一个 for each 循环

```
<xsl:for-each select="$variants/syddata/data">
     <xsl:value-of select="@variant1"/>
</xsl:for-each> 
```

这将输出5次白色。但我只想说一次。意味着我想获得不同的价值。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:14:22.457

通过确保前面没有具有匹配属性的兄弟元素，仅`data`使用每个属性值的第一个元素：`@variant1`

```
<xsl:for-each select="$variants/syddata/data">
  <xsl:if test="not(preceding-sibling::data[@variant1 = current()/@variant1])">
     <xsl:value-of select="@variant1"/>
  </xsl:if>
</xsl:for-each> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:15:59.610

尝试这样的事情：

```
 <xsl:for-each select="data">
        <xsl:variable name="variant1" select="@variant1"/>
        <xsl:if test="not(following-sibling::data[@variant1= $variant1])">
            <xsl:value-of select="@variant1"/>
        </xsl:if>
    </xsl:for-each> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-16T17:31:37.840

如果您需要在 XSLT 1.0 中获取不同的值，最有效的方法之一是使用`xsl:key`. （[孟奇人分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)。）

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:key name="variant1" match="data" use="@variant1"/>

    <xsl:template match="/syddata">
        <distinct-values>
            <xsl:for-each select="data[count(.|key('variant1',@variant1)[1])=1]">
                <value><xsl:value-of select="@variant1"/></value>
            </xsl:for-each> 
        </distinct-values>
    </xsl:template>

</xsl:stylesheet> 
```

工作示例：http: [//xsltransform.net/bdxtqU](http://xsltransform.net/bdxtqU)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T11:46:11.250

当在您的输入 XML 上运行以下转换时，将获得所需的输出

```
<?xml version='1.0'?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>
<xsl:template match="/">
<xsl:for-each-group select="syddata/data" group-by="@variant1">
<xsl:value-of select="distinct-values(@variant1)"/>
</xsl:for-each-group>
</xsl:template>
</xsl:stylesheet> 
```

# gcc - 有没有办法找到构建 mingw 构建的开关？

> ID：16103048
> 
> 赞同：2
> 
> 时间：2013-04-19T10:58:38.087
> 
> 标签：gcc, mingw

有没有办法找到一个特定的 gcc 构建，它是用哪些开关构建的？
我听说在从其源代码构建 gcc 构建时，有几个开关决定了某些特定功能是否可用，例如有`Thread_posix`和/或`Win32_thread`用于构建`MingW`的开关`Windows`，第一个允许使用 std::线程和另一个不会，或者`sjlj`构建与`dwarf`处理异常的构建（我什至不知道它们的用途！我只知道`sjlj`构建在所有情况下都会慢 15％！）
所以有没有我可以要了解这些以及这方面的更多信息吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T11:24:23.323

是的。的输出`gcc -v`显示你想知道的一切。

例外情况如下：

*   矮人：`--enable-dw2-exceptions`
*   sjlj：`--enable-sjlj-exceptions`对于 4.8 之前的 64 位 MinGW-w64 GCC，或者什么都没有。
*   seh：`--enable-seh-exceptions`对于 GCC 4.8+ 64 位 MinGW-w64 GCC，或者什么都没有。

这些可以从 libgcc DLL 名称中推断出来，该名称始终包含`sjlj`、`dw2`或`seh`.

libgcc 中使用的线程实现：

*   win32：默认，可选`--enable-threads=win32`
*   正则表达式：`--enable-threads=posix`

据我所知，这些不能从文件名中推断出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-12T12:53:37.043

在 Windows 上，使用最新的 GCC 版本（4.8 后），情况如下：

1.  对于异常处理模型`dwarf/sjlj/seh`：

    *   win32 目标构建
        1.  为了`dwarf2`
            *   `--with-dwarf2`应指定
        2.  为了`sjlj`
            *   `--enable-sjlj-exceptions`应指定
            *   `--disable-sjlj-execptions`如果您想强制禁用`sjlj`异常处理，也可以使用
    *   win64 目标构建
        1.  为了`seh`
            *   无需指定任何内容。`sjlj`如果不使用，这是默认设置。
        2.  为了`sjlj`
            *   `--enable-sjlj-exceptions`应指定
            *   `--disable-sjlj-execptions`如果您想强制禁用`sjlj`异常处理，也可以使用
        *   **注意：**`win64`如果没有将异常处理参数传递给配置脚本，则默认值为`seh`异常
2.  对于线程模型`win32/posix`：

    1.  为了`win32`
        *   `--enable-threads=win32`应指定
        *   **注意**：`win32`如果没有将线程相关的参数传递给配置脚本，则为默认线程模型
    2.  为了`posix`
        *   `--enable-threads=posix`应指定

找出已经构建的 MinGW GCC 的异常处理模型：

1.  如果正在查看的 MinGW GCC 是使用`--enable-shared`
    *   该`bin`文件夹将`libgcc`作为 DLL
    *   `libgcc`DLL 将有一个前缀指示正在使用的异常处理模型，该模型将是`dw2/seh/sjlj`
2.  如果正在查看的 MinGW GCC 是使用 构建的`--disable-shared`，它会变得有点复杂，您可以使用以下方法之一：
    1.  手动使用`strings`和`grep`命令的组合从静态中找出来，这时候它`libgcc.a`不会`<GCC_buildroot>/lib/gcc/<target>/<version>/libgcc.a`有异常处理模型前缀
        *   `strings <GCC_buildroot>/lib/gcc/<target>/<version>/libgcc.a | grep personality`输出将包括以下内容之一：
            1.  `sjlj`：`__gcc_personality_sj0`
            2.  `dwarf2`：`__gcc_personality_v0`
            3.  `seh`：`__gcc_personality_seh0`
    2.  手动检查 GCC 定义的指示异常处理模型的宏**（不喜欢）**
        *   `g++ -dM -E -x c++ - < /dev/null`应存在以下其中一项
            1.  `sjlj`：`#define __USING_SJLJ_EXCEPTIONS__ 1`
            2.  `seh`：`#define __SEH__ 1`
            3.  `dwarf2`：（`#define __GCC_HAVE_DWARF2_CFI_ASM 1` **不太确定这个）**

# java - 我如何判断 JMeter 是否需要更多堆来产生“正确”的结果？

> ID：16103056
> 
> 赞同：1
> 
> 时间：2013-04-19T10:59:01.387
> 
> 标签：java, garbage-collection, jmeter

这是我刚刚想到的一个理论问题。

通常在运行 JMeter 负载测试时，我发现默认堆设置就足够了。

有时在运行密集的 JMeter 负载测试时，JMeter 会抛出 OutOfMemory 异常，表明它需要更多堆（通常）。

我担心这两者之间的情况。如果 JMeter*没有*抛出 OutOfMemory，有没有办法让自己确信垃圾收集（在 JMeter 方面）不会对结果产生不利影响？每次运行 JMeter 时都必须监控 gc 日志吗？

我想这更实际的一面是；我可以比较两个单独的 JMeter 测试的输出，其中 Jmeter 使用不同的堆大小？

编辑：我注意到的一件事是，Jmeter UI 有一个图标来指示 GC 开销限制已被违反。但这来自 JVM，并在 98% 的 CPU 时间用于执行 GC 时触发，我认为我的结果在达到这一点之前很久就会出现偏差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:07:41.943

> 如果 JMeter 没有抛出 OutOfMemory，有没有办法让自己确信垃圾收集（在 JMeter 方面）不会对结果产生不利影响？每次运行 JMeter 时都必须监控 gc 日志吗？

确定堆大小是否影响结果的简单方法是使用更大的堆大小再次运行测试，看看是否有任何不同。这同样适用于您正在测试的应用程序和 JMeter JVM。

如果确实有证据表明存在问题，则可以更改 JMeter JVM 设置以使用低暂停收集器。这可能会减少明显的“异常”请求时间的数量......如果它们是由 JMeter 端 GC 暂停引起的。但它（理论上）也可以降低 JMeter JVM 的整体吞吐量，从而降低它可以发出请求的平均速率。

如果应用程序和 JMeter 在相同的硬件上运行，您可以尝试的另一件事是调整进程优先级以确保 JMeter 进程没有 CPU 不足。

# java - 如何在 MySQL 存储过程中传递字符串列表？

> ID：16103058
> 
> 赞同：6
> 
> 时间：2013-04-19T10:59:14.650
> 
> 标签：java, mysql, sql

我试图在 MySQL 存储过程中将数组作为字符串传递，但它不能正常工作。

这是我的 SQL 代码：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `search_equipment`(IN equip VARCHAR(100), IN category VARCHAR(255))
BEGIN
    SELECT *
        FROM Equipment
        WHERE e_description
        LIKE CONCAT("%",equip,"%")
            AND e_type IN (category)
END 
```

这就是我如何调用该程序：

```
String type = "'I.T. Equipment','Office Supply'";

CALL search_equipment('some equipment', type); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T11:43:06.690

我希望你的朋友是 FIND_IN_SET。我在这个问题中第一次遇到这种方法：也包括在这个问题中[MYSQL - Stored Procedure Utilizing Comma Separated String As Variable Input](https://stackoverflow.com/questions/12463001/mysql-stored-procedure-utilising-comma-separated-string-as-variable-input)

FIND_IN_SET 的 MySQL 文档在这里[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

所以你的程序将变成

```
CREATE DEFINER=`root`@`localhost` 
PROCEDURE `search_equipment`(
    IN equip VARCHAR(100), 
    IN category VARCHAR(255)
)
BEGIN
    SELECT *
    FROM Equipment
    WHERE e_description LIKE CONCAT("%",equip,"%")
    AND FIND_IN_SET(e_type,category)
END 
```

这依赖于类别字符串是逗号分隔的列表，因此您的调用代码变为

```
String type = "I.T. Equipment,Office Supply";

CALL search_equipment('some equipment', type); 
```

（ps修正了一个错字，在你的论点中你输入了categoy）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:43:03.523

您必须创建一个动态语句：

```
DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `search_equipment`(IN equip VARCHAR(100), IN category VARCHAR(255))
BEGIN
    SET @s = 
        CONCAT('SELECT *
            FROM Equipment
            WHERE e_description
            LIKE \'%',equip,'%\'
            AND e_type IN (',category,')');
    PREPARE stmt from @s;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt3;
END$$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T05:29:24.820

这有助于我做 IN 条件希望这会帮助你..

```
CREATE  PROCEDURE `test`(IN Array_String VARCHAR(100))
BEGIN
    SELECT * FROM Table_Name
    WHERE FIND_IN_SET(field_name_to_search, Array_String);

END//; 
```

来电：

```
call test('3,2,1'); 
```

# ios - CGContext 的 Apple Mach-O 链接器错误

> ID：16103063
> 
> 赞同：0
> 
> 时间：2013-04-19T10:59:31.210
> 
> 标签：ios, xcode, cgcontext, armv7

这个错误让我发疯，知道吗？

架构 armv7s 的未定义符号：

```
"_CGContextConcatCTM", referenced from:
  -[PopoViewController onClick:] in PopoViewController.o
"_CGContextTranslateCTM", referenced from:
  -[PopoViewController onClick:] in PopoViewController.o
"_CGContextSaveGState", referenced from:
  -[PopoViewController onClick:] in PopoViewController.o
"_CGContextRestoreGState", referenced from:
  -[PopoViewController onClick:] in PopoViewController.o 
```

`ld: symbol(s) not found for architecture armv7s clang: error: linker command failed with exit code 1 (use -v to see invocation)`

带有库的二进制文件是链接的。库搜索路径正确。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:50:12.810

将您的应用程序与 iPhoneOS 架构的 CoreGraphics.framework 链接。

# java - JUnit 测试挂起

> ID：16103071
> 
> 赞同：16
> 
> 时间：2013-04-19T10:59:51.107
> 
> 标签：java, eclipse, junit, junit4

我有以下问题：我的一个 JUnit 测试卡在 eclipse 中什么也不做，但表示该测试当前正在运行的蓝色箭头仍然存在。

我的代码中绝对没有任何无限循环，并且测试方法中卡住的所有内容都在以下`for`循环中：

```
for (int i = 0; i < this.length(); i += 3) {
    // do some stuff
} 
```

此外，在调试时，该方法会正确终止并且不会让我再一步。

在`setUp()`我正在初始化我的字段和被测类。

这似乎是一些奇怪的 JUnit/Eclipse 错误。我正在使用 oracle-java-7 在 Ubuntu 12.04 下运行 Eclipse 3.7.2 和 JUnit 4。

任何提示如何解决此问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-19T11:21:56.313

如果测试仍在运行，您可以查看`debug`选项卡中的活动线程并通过按暂停按钮暂停它们。这将告诉您测试卡在哪里。

# android - 如何设置 ListView 项目高度

> ID：16103074
> 
> 赞同：11
> 
> 时间：2013-04-19T10:59:58.360
> 
> 标签：android, android-listview, android-activity

我有一个 ListActivity 我想更改项目高度参考设备高度

```
public class MainActivity extends ListActivity
{
            .
            .
            .
            setListAdapter(new ArrayAdapter<String>(MainActivity.this,
                android.R.layout.simple_list_item_1,mainMenuItems));
} 
```

它是我在 Galaxy nexus S 上的 ListActivity ：

![在此处输入图像描述](https://i.stack.imgur.com/92mXE.png)

在 Galaxy Nexus 7 上： ![在此处输入图像描述](https://i.stack.imgur.com/6BHC8.png)

我应该如何定义列表视图项目的高度？？？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-19T11:04:24.167

`ListView`项目高度是项目布局内容的高度，例如高度`android.R.layout.simple_list_item_1`。如果您想要不同的高度，请创建一个 xml 文件并放置一个`android:layout_height`or`android:minHeight`属性。

这是一个修改过的`simple_list_item_1`，指的是你的价值

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceListItemSmall"
    android:gravity="center_vertical"
    android:paddingStart="?android:attr/listPreferredItemPaddingStart"
    android:paddingEnd="?android:attr/listPreferredItemPaddingEnd"
    android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
    android:paddingRight="?android:attr/listPreferredItemPaddingRight"
    android:minHeight="@dimen/your_defined_minumum_height"/> 
```

在你的 dimen.xml

```
<dimen name="your_defined_minumum_height">48dp</dimen> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-22T03:25:44.940

```
ListView lvLogs = new ListView(this);
lvLogs.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, logs) {

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view = super.getView(position, convertView, parent);
            TextView textView = ((TextView) view.findViewById(android.R.id.text1));
            textView.setMinHeight(0); // Min Height
            textView.setMinimumHeight(0); // Min Height 
            textView.setHeight(44); // Height
            return view;
        }
    }); 
```

**注意：MinHeight 和 MinimumHeight 是必需的！！！**

将最小高度设置为 0~20（或更高）：`setMinHeight(?)`+`setMinimumHeight(?)`

那么ListView中的TextView就会有一个正常的高度（小于ListView的默认高度）

如果要以像素为单位指定高度，请使用`setHeight(?)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T11:02:36.710

您需要为 ListView 中的每个项目创建自己的自定义布局文件。在那里你可以编辑任何你想要的东西，你可以获得很多好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-04T02:06:32.597

`ListView`使用 screenHeight (H) 的信息为您定制一个适配器。假设您希望屏幕显示 9 列（项目），您可以将每列的高度指定为 H/9。通过这样做，您可以精确控制您`ListView`在所有设备上的外观。

# permissions - 为什么WHMCS在应用其安全提示后显示权限错误，即使权限是777？

> ID：16103076
> 
> 赞同：0
> 
> 时间：2013-04-19T10:59:59.483
> 
> 标签：permissions, compiler-errors, whmcs

我已经在我的托管空间上安装了 WHMCS，并针对[其文档](http://docs.whmcs.com/Further_Security_Steps)做了安全提示。我将 templates_c、下载和附件移到 public_html 上一层（我正在使用 DirectAdmin 控制面板）并将它们的权限设置为 777。之后，我将这些行放在**configuration.php**文件中：

```
$templates_compiledir = "/home/mysite.com/templates_c/";
$attachments_dir = "/home/mysite.com/attachments/";
$downloads_dir = "/home/mysite.com/downloads/"; 
```

但是现在，当我想打开 WHMCS 时，我收到了这个错误：

> 权限错误模板编译目录'/home/mysite.com/templates_c/'必须是可写的（CHMOD 777）才能继续。如果显示的路径不正确，您可以在 configuration.php 文件中更新它。

我也测试了 configuration.php 文件的以下格式，但它们不起作用：

*   /domains/mysite.com/templates_c/
*   /home/domains/mysite.com/templates_c/

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T16:03:51.710

DirectAdmin 高于 public_html 的级别：

```
/home/[USERNAME]/domains/[mysite.com]/ 
```

在 configuration.php 文件中插入此 DirectAdmin 代码：

```
$templates_compiledir = '/home/[USERNAME]/domains/[mysite.com]/templates_c/';
$attachments_dir = '/home/[USERNAME]/domains/[mysite.com]/attachments/';
$downloads_dir = '/home/[USERNAME]/domains/[mysite.com]/downloads/'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-11T17:20:27.600

我搜索并搜索了所有关于此的答案，最终弄清楚了。至少在我的 WHMCS（Rackspace 云站点）服务器环境中，您需要输入文件的绝对路径，而不是文件的相对路径，如 WHCMS 示例中所示。

# jquery - 查询。突出显示表格单元格

> ID：16103077
> 
> 赞同：0
> 
> 时间：2013-04-19T11:00:03.837
> 
> 标签：jquery, css, html-table

在 HTML 表格上，当鼠标悬停在单元格 (TD) 上时，我想：

1.  将 css 类“Highlight_TR_TH”添加到单元格的行。

2.  将 css 类“Highlight_TD”添加到同一行的所有单元格

3.  将 css 类“Highlight_This_Cell”添加到单元格本身。

基本上，我希望更改这些元素的背景颜色。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:04:16.213

```
$('td').hover(function(){
    var $this = $(this);
    $this.addClass('Highlight_TD Highlight_This_Cell');
    $this.siblings().addClass('Highlight_TD');
    $this.closest('tr').addClass('Highlight_TR_TH');
},function(){
    var $this = $(this);
    $this.removeClass('Highlight_TD Highlight_This_Cell');
    $this.siblings().removeClass('Highlight_TD');
    $this.closest('tr').removeClass('Highlight_TR_TH');
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/J28he/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:05:30.390

```
$('td').hover(function(){
  $(this).addClass('highlight_this_cell');
  $(this).parent().addClass('highlight_tr');
  $(this).parent().find('td').addClass('highlight_td');
},function(){
  $(this).removeClass('highlight_this_cell');
  $(this).parent().removeClass('highlight_tr');
  $(this).parent().find('td').removeClass('highlight_td');
}
); 
```

`.hover()`有两个函数，第一个在 mouseover 上执行，第二个在 mouseleave 上执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:03:44.080

```
$("td").mouseover(function() {
  $(this).parent().addClass("Highlight_TR_TH");
  $(this).siblings("td").addClass("Highlight_TD");
  $(this).addClass("Highlight_This_Cell");
}); 
```

您可以链接这些方法调用，只是以这种方式显示它们以提高可读性。如果您以后想删除这些类，您可以使用`mouseleave`上面相同的结构来完成它。

（虽然我相信纯CSS可以做你想做的）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T11:06:28.713

尝试这个：

```
$('td').each(function() {
    $(this).mouseover(function() {
        $(this).addClass('Highlight_This_Cell').siblings('td').addClass('Highlight_TD');
        $(this).parent().addClass('Highlight_TR_TH');
    });
}); 
```

# php - PHP shell_exec - 如果连接关闭，如何终止进程？

> ID：16103082
> 
> 赞同：1
> 
> 时间：2013-04-19T11:00:24.323
> 
> 标签：php, shell-exec, terminate

我有一个使用 shell_exec 的工作 php 脚本来执行一个大约需要 30 秒才能完成的外部程序。问题是，如果用户关闭浏览器或连接由于某种原因关闭，使用 shell_exec 执行的程序将继续运行，因为它的输出无法再发送给用户。

有没有办法在连接关闭后立即终止这个进程？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T09:05:09.137

终于我解决了！

我已经使用 PHP 函数`connection_aborted()`来检查客户端是否断开连接。 [http://us2.php.net/manual/en/function.connection-aborted.php](http://us2.php.net/manual/en/function.connection-aborted.php)

算法如下（伪代码）

```
shell_exec("script");//script is a shell script that launch the program in another thread thus this return immediately
$task_completed=false;
while(!$task_completed){
    if(connection_aborted()==1){
        kill_the_process();//this will kill the running process launched by script
        die();
    }
    $task_completed=...;//true if the task completed
    sleep(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:32:11.950

您可以使用获取所有正在运行的进程的列表

```
$res = shell_exec('ps -x');
$res = explode("\n",$res);
print_r($res); 
```

并使用它来杀死具有给定**ProcessID的进程**

```
shell_exec('kill -KILL ProcessID'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:16:49.030

您可以创建一个运行/执行/停止正在运行的 php 脚本的管理器。该脚本将不断运行（可能作为守护进程）并检查脚本/进程的状态、用户状态，如果用户离开则关闭脚本。我认为你可以用 Sockets 很好地做到这一点。
[如何在 JavaScript\HTML 中使用套接字？](https://stackoverflow.com/questions/1736382/how-to-use-sockets-in-javascript-html)
[http://php.net/manual/en/book.sockets.php](http://php.net/manual/en/book.sockets.php)

# php - 将新表行推送到浏览器的最佳方式是什么？

> ID：16103083
> 
> 赞同：0
> 
> 时间：2013-04-19T11:00:26.310
> 
> 标签：php, mysql, apache, push-notification, real-time

我有一个 MySQL 数据库，每隔几分钟和几小时就会插入代表新新闻项目的新行。打开的浏览器如何接收这些新的新闻项目并放置在 HTML 表格的顶部？

在 HTML 表的顶部，它可以显示“x 个新项目”（x 会随着新项目的插入而定期更改），当单击时，新项目将作为新行放置在表的顶部。这就像大多数其他实时网络应用程序一样：twitter 搜索、disqus 评论、YT 评论、hckrnews。

我正在运行 LAMP 设置并乐于使用 HTML5、Jquery，但希望让事情变得简单、容易和无处不在。我不介意轮询服务器以获取更新，理想情况下希望用户可以选择打开或关闭轮询（或推送）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:11:39.113

您可以每 X 秒或每分钟使用一次[Ajax调用。](http://api.jquery.com/jQuery.ajax/)然后使用 jQuery，您可以将新数据插入到现有表中。

伪代码：

*   设置间隔 X 秒/分钟的 JavaScript 计时器。

*   在每个间隔之后，使用 Ajax 向服务器发送一个请求。您可能需要一个参数，如 last id、last datetime 或类似的东西来告诉服务器哪些记录已经显示。

*   获取响应并在表顶部动态插入新行，并使用`responseData.length`某处写入“X new items”。

更复杂的 Ajax 替代方案是实现 Comet，但我听说 PHP 和 Apache 有点困难（没有尝试）。

* * *

**未经测试的例子：**

```
setInterval(function() {
    var currentRowsCount = $('#tableId tr').length - 1; // or ID or Date
    var table = $('#tableId');

    $.ajax({
        type: "POST",
        url: "some.php",
        data: { rows: currentRowsCount },
        dataType: "json"
    }).done(function( response ) {
        var data = $.parseJSON(response);

        $(data).each(function(key, value) {
            // add the new rows using any of the append, prepend, before or after methods
        })
    });
}, 60000); // 1 min 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:24:36.530

我在 jquery 中这样做是为了消息警报，但可以对其进行修改以轻松更新表行，将其用作在不逐行复制的情况下开发的概念。

```
<script>
        var messages = {
        endpoint: 'endpoint.php',
        interval: 5, // polling interval, seconds

        poll: function(){
            $.ajax({
                type: 'POST',
                url: messages.endpoint,
                data: {
                    'method': 'messages-poll'
                },
                success: function(data){
                    $(data).each(function(){
                        //Your table update functionality here
                    });

                    setTimeout(function(){
                        messages.poll();
                    }, messages.interval * 1000);
                },
                dataType: 'json'
            });
        }
    };

    messages.poll();
</script> 
```

# asp.net-mvc - 使所有其他用户会话无效

> ID：16103084
> 
> 赞同：0
> 
> 时间：2013-04-19T11:00:31.050
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在使用 ASP .NET MVC 4 开发一个网站，我使用 SimpleMembership 进行身份验证。我需要限制用户使用他的帐户进行不超过特定数量的会话。在用户达到他的限制后，我想使他最旧的经过身份验证的会话无效。计数会话可以在 global.asax 的 session_start 和 session_end 方法中实现，但我真的不确定如何进行失效。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T10:00:51.440

派对有点晚了，但我是这样做的。

*   当用户登录时，我将 asp.net 会话保存在缓存中
*   一个属性 (OneSessionPerUser) 检查用户是否已登录并且他的当前会话等于缓存的会话
    *   如果缓存的会话 <> 当前会话 --> logout()

我创建了一个属性和一个静态 void（用于获取和设置缓存值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:01:11.583

对于您的问题，我将从会话中获取密钥，然后删除最旧的密钥。

```
 var keys = Context.Session.Keys;  //get the keys
 Context.Session.Remove(keys[0]; // remove first key in the list. 
```

# html - 如何使用具有 100% 宽度和固定高度的图像 - 并且它们不会扭曲？

> ID：16103087
> 
> 赞同：0
> 
> 时间：2013-04-19T11:00:43.800
> 
> 标签：html, css, image, width

谷歌没有给我任何有用的东西:(

我正在寻找一种让图像具有 100% 宽度和固定高度，例如 400 像素，而不是可怕地拉伸，而不是拉伸，放大的方法？

我想我追求的东西与 backstretch 所做的没有什么不同，但不适用于全屏背景。
我认为这段视频在某些情况下显示了我所追求的（我认为鹰图片显示了我正在寻找的东西）[http ://www.teehanlax.com/resources/img/story/medium/prototypes/feature-header.mp4](http://www.teehanlax.com/resources/img/story/medium/prototypes/feature-header.mp4)

100% 宽度图片，这是一个固定高度，显示裁剪图像，并随浏览器缩放

[。http:// /jsfiddle.net/XcYfS/2/](http://jsfiddle.net/XcYfS/2/)

```
<style>
    img {
        width: 100%;
        height: 400px; }

    h1, p {
        width: 80%;
        padding-left: 10%; }
</style>

<img src="http://placekitten.com/200/300" alt="">

<h1>Interesting Title!</h1>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Placeat magnam culpa obcaecati numquam iusto recusandae totam voluptatibus temporibus ipsum quasi. Nesciunt maiores sequi quis consectetur labore asperiores eaque hic ipsa!</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:09:33.343

为了避免失真，我认为最好使用 jQuery。

您可以为此使用**[jQuery Supersized](http://buildinternet.com/project/supersized/)**插件。它是最著名的插件之一，主要用于场地覆盖 100% 宽度的网站。

这是该网站的链接 - [http://buildinternet.com/project/supersized/](http://buildinternet.com/project/supersized/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:13:12.843

试试这个。[点击这里预览](http://jsfiddle.net/XcYfS/4/)

我已经编辑了您的示例代码

HTML：

```
<div class="wrapper">
    <img src="http://placekitten.com/200/300" alt="" />
</div>
<h1>Interesting Title!</h1>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Placeat magnam culpa obcaecati numquam iusto recusandae totam voluptatibus temporibus ipsum quasi. Nesciunt maiores sequi quis consectetur labore asperiores eaque hic ipsa!</p> 
```

CSS：

```
div.wrapper{
    display: inline-block;
    width:500px;
    height:400px;
    border:1px solid red;
    overflow:hidden;
}

img {
    width: 100%;
    height: auto;
}

h1, p {
    width: 80%;
    padding-left: 10%; 
} 
```

您的图像的父元素应该是`display:inline-block;`，宽度将是您的`img`.

如果你想定位图像，假设你想显示图像的中心，只需`margin-top`在 img 中添加一个负片。[点击这里预览](http://www.jsfiddle.net/XcYfS/5)

```
img {
    width: 100%;
    height: auto;
    margin-top:-100px;
} 
```

# coldfusion - 使用 ObjectLoad(ObjectSave()) 时出现 NULL POINTER 错误

> ID：16103089
> 
> 赞同：2
> 
> 时间：2013-04-19T11:00:51.603
> 
> 标签：coldfusion, nullpointerexception, coldfusion-9, cfc, railo

**更新** 这已作为 ColdFusion 中的错误提交，[https: //bugbase.adobe.com/index.cfm?event=bug&id=3546237](https://bugbase.adobe.com/index.cfm?event=bug&id=3546237)

我一直遇到 CF9 和 NULL POINTER 错误问题，这在 Railo 中似乎不是问题。我创建了一个简单的 CFC 和关联的 mxunit 单元测试来确认这一点。

在 Railo (4.0.4) 上，两个单元测试都通过了。在 Coldfusion (9.0.1) 上，单元测试 getMetaDataBeforeMethodInvocation 失败，并在 GetMetaData 调用上出现 NULL POINTER 错误。

目前我只能推测 CF9 在调用该组件中的方法之前无法访问 ObjectLoad 之后的完整元数据。与确保在执行 getMetaData 之前调用对象中的方法相比，是否有人能够更清楚地说明这个问题，和/或提供更好的解决方案？

这里是 CFC

```
// NullError.cfc
component {
    public NullError function init() {
        variables.uuid = CreateUUID();
        return this;
    }
    public string function getUUID() {
        return uuid;
    }
} 
```

和相关的单元测试

```
// NullErrorTest.cfc
component extends='mxunit.framework.TestCase' {
    private any function setupTheTests() {
        var o = new NullError();
        debug(o.getUUID());
        // Dump meta data
        debug(GetMetaData(o));
        // Save and load it, and return
        return ObjectLoad(ObjectSave(o));
    }

    public void function getMetaDataBeforeMethodInvocation() {
        var o = setupTheTests();
        // Get meta data, and then get uuid, expecting this to ERROR (NULL POINTER)
        debug(GetMetaData(o)); // CF FAILS HERE, RAILO DOES NOT
        debug(o.getUUID());
    }

    public void function getMetaDataAfterMethodInvocation() {
        var o = setupTheTests();
        // Get uuid, and then get meta data, expecting this to be ok
        debug(o.getUUID());
        debug(GetMetaData(o));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:29:01.677

我可以在 CF 9.0.2 和 10.0.9 中确认这种错误行为。

如果我是你，我会提出一个错误。

复制案例可以从您拥有的内容中简化很多：

```
// C.cfc
component {}

<!--- test.cfm --->
<cfscript>
o1 = new C();
writeDump(getMetaData(o1)); // OK

o2 = objectLoad(objectSave(o1));
writeDump(getMetadata(o2)); // breaks
</cfscript> 
```

我不知道通过变通方法建议什么，因为它是如此明显和根本上被破坏了。

# java - Parcelable 泛型和字符串

> ID：16103092
> 
> 赞同：2
> 
> 时间：2013-04-19T11:01:04.020
> 
> 标签：java, android, string, generics, parcelable

我希望制作一个通用类 Parcelable。
似乎很容易。使用元组作为一个简单的例子（只是一个例子，不要评论这个特定的类，我的一些将来自库），我可以扩展我所拥有的：

```
public class Pair<O1, O2> implements Serializable {
    public O1 first;
    public O2 second;
    public Pair(O1 first, O2 second){
        this.first = first;
        this.second = second;
    }
} 
```

并做到这一点：

```
public class PPair<O1 extends Parcelable, O2 extends Parcelable> extends Pair<O1, O2>
        implements Serializable, Parcelable {
    public O1 first;
    public O2 second;
    public PPair(O1 first, O2 second){
        super(first, second);
    }
    // Parcelable stuff
    public PPair(Parcel in){
        super((O1)in.readParcelable(null), (O2)in.readParcelable(null));
    }
    @Override
    public int describeContents(){
        return 0;
    }
    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeParcelable(first, flags);
        dest.writeParcelable(second, flags);
    }
    public static final Parcelable.Creator CREATOR = new Parcelable.Creator() {
        public PPair createFromParcel(Parcel in) {
            return new PPair(in); 
        }
        public PPair[] newArray(int size) {
            return new PPair[size];
        }
    };
} 
```

但是，虽然我可以使用`PPair<Uri, Uri>`，但它不适用于`PPair<String, String>`.
有人忘记将 String 类设为 Parcelable。

扩展 String 似乎很荒谬，添加简单的 parcelability，只是为了它可以在 parcelable 泛型类中使用。
同样，如果其他人要使用我的类，删除`extends Parcelable`from 参数（并依赖`instanceof`内部等）似乎是个坏主意。
有没有更好的方法让该类同时接受 String 和任何 Parcelable，并且至少在与其他任何东西一起使用时发出警告？

# javascript - 编辑#each 块中的一行

> ID：16103096
> 
> 赞同：0
> 
> 时间：2013-04-19T11:01:20.100
> 
> 标签：javascript, meteor, handlebars.js

我有模板：

```
{{#each action_log}}
  <div>
     {{Name}}

     {{#if editing_score}}
        <input type="text" id="set_score" parm="{{_id}}" value="" />
     {{else}}
        <div class="score" id="{{_id}}">{{Score}} .</div>   
     {{/if}}

   </div>
{{/each}} 
```

我有一个javascript代码：

```
Session.set('editing_score', false);

Template.today_list.editing_score = function() {
    return Session.equals('editing_score', true);
  };

Template.today_list.events({
 'click .score': function(e, t) {
      Session.set('editing_score', true);      
      Session.set('editing_score_id', e.target.id);
      Meteor.flush();
    }
}); 
```

因此，用户可以看到操作列表，想要单击其中一个并编辑一些值。但是现在，如果用户单击操作，代码会显示所有操作的文本框。

如何仅针对一项操作显示文本框？

我在会话中有操作 ID：

```
Session.set('editing_score_id', e.target.id); 
```

但我不能这样做：

```
{{#if editing_score && editing_score_id == _id}} 
```

或者

```
{{#if editing_score(_id)}} 
```

最好的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:14:37.340

使用您的模板：

```
{{#if editing_score id}} 
```

与您的助手一起：

```
Template.today_list.editing_score = function(id) {
  return Session.equals('editing_score_id', id);
}; 
```

但是，我会稍微重构一下，以便您只有一个 Session 变量——不需要两个。

此外，您的“点击 .score”传递了上下文，因此您可以从中获取 ID——`this`我发现这比在您传递的事件中胡乱处理更可靠。

# openerp - 类型错误：map() 的参数 2 必须支持迭代

> ID：16103098
> 
> 赞同：0
> 
> 时间：2013-04-19T11:01:23.920
> 
> 标签：openerp, typeerror

我收到错误消息：类型错误：map() 的参数 2 在尝试保存时必须支持迭代。视图正确渲染，所有计算都是我想要的方式。但是当我点击保存时，我得到了提到的错误。我相信问题出在我传递给写入的对象类型上。有人可以建议我应该对以下代码进行哪些更改以解决此问题吗？

下面是我的代码：

```
class export_rebate(osv.osv):
    _name = 'export.rebate'

    def _cal_difference(self, cr, uid, ids, field_names, arg=None, context=None):
        res = {}
        for item in self.browse(cr, uid, ids, context=context):
            res[item.id] = item.rebate_amount or 0.0 - item.amount_received or 0.0
        return res

    def _get_quantity (self, cr, uid, ids, field_names, arg=None, context=None):
        res = {}
        for line in self.browse(cr,uid,ids,context=context):
            qty = 0.0
            invoice = line.invoice_id
            if invoice and invoice.invoice_line:
                for invline in invoice.invoice_line: 
                    qty += invline.quantity
                res[line.id] = qty
        return res       

    def onchange_invoice_id(self, cr, uid, ids, invoice_id):
        print 'on_change called'
        res = {}
        if invoice_id:
            inv = self.pool.get('account.invoice').browse(cr, uid, invoice_id)
            res['date_invoice'] = inv.date_invoice or False
            res['form_e_num'] = inv.form_e_num or False
            res['form_e_date'] = inv.form_e_date or False        
            res['invoice_line'] = [x.id for x in inv.invoice_line or []]
        return {'value': res}

    _columns = {
            'invoice_id': fields.many2one('account.invoice', 'Invoice No.'),
            'type': fields.char('Type', size=64, readonly=True, select=True),
            'state': fields.char('Status', select=True, readonly=True),
            'date_invoice': fields.related('invoice_id', 'date_invoice', string='Invoice Date', relation='account.invoice', type='date', readonly=True),                
            'form_e_num': fields.related('invoice_id', 'form_e_num', string='Form E No.', relation='account.invoice', type='char', readonly=True),
            'form_e_date': fields.related('invoice_id', 'form_e_date', string='Form E Date', relation='account.invoice', type='date', readonly=True),
            'invoice_line': fields.related('invoice_id', 'id', relation='account.invoice.line', type='one2many', readonly=True),
            'quantity': fields.function(_get_quantity, type='float', digits=(16,2), string='Quantity', store=True, readonly=True),

            'rebate_file_num': fields.char('Rebate File No.', size=64, states={'draft': [('readonly', False)], 'sent': [('readonly', False)]}),
            'claim_file_date': fields.date('Claim File Date', select=True, states={'draft': [('readonly', False)], 'sent': [('readonly', False)]}),
            'rebate_amount': fields.float('Rebate Amount', digits=(16,2), states={'draft': [('readonly', False)], 'sent': [('readonly', False)]}),
            'rebate_rate': fields.float('Rebate Rate', digits=(16,2), states={'draft': [('readonly', False)], 'sent': [('readonly', False)]}),
            'gd_num': fields.char('G.D. No.', size=64, states={'draft': [('readonly', False)], 'sent': [('readonly', False)]}),
            'gd_date': fields.date('G.D. Date', select=True, states={'draft': [('readonly', False)], 'sent': [('readonly', False)]}),
            'prc_date': fields.date('PRC Date', select=True, states={'draft': [('readonly', False)], 'sent': [('readonly', False)]}),
            'claim_sbmt_date': fields.date('Claim Submission Date', select=True, states={'draft': [('readonly', False)], 'sent': [('readonly', False)]}),

            'cheque_num': fields.char('Cheque No.', size=64, states={'draft': [('readonly', False)], 'sent': [('readonly', False)]}),
            'cheque_date': fields.date('Cheque Date', select=True, states={'draft': [('readonly', False)], 'sent': [('readonly', False)]}),
            'amount_received': fields.float('Amount Received', digits=(16,2), states={'draft': [('readonly', False)], 'sent': [('readonly', False)]}),                                
            'Net_amt_rcvd': fields.float('net Amount Received', digits=(16,2), states={'draft': [('readonly', False)], 'sent': [('readonly', False)]}),
            'difference': fields.function(_cal_difference, type='float', digits=(16,2), string='Difference', store=True, readonly=True)                
            }
    _default = {
            'quantity': 0.00
            }

export_rebate() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:08:38.030

我认为问题出在`onchange_invoice_id`方法上。

这似乎有点可疑`res['invoice_line'] = [x.id for x in inv.invoice_line or []]`。在评论此行后尝试。

# magento - Change store view programmatically using magento event observer

> ID：16103103
> 
> 赞同：3
> 
> 时间：2013-04-19T11:01:50.470
> 
> 标签：magento

I am catching the following event to do the further logic:

```
core_block_abstract_prepare_layout_before 
```

and in the Observer class I am doing this:

`Mage::app()->setCurrentStore($storeView);`

`Mage::run($storeCode, "store");`

but this throws an exception:

> Mage registry key "application_params" already exists

basically what I am trying to do is "changing the Language (store view) according to the current IP" and I am trying to achieve this through magento custom module.

I want to be able to change the default store view of magento, programmatically using magento event observer? and would it be possible to do so without redirecting to the selected store I mean by setting the values for store view before page load?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-29T12:10:53.290

This is how I solved my problem. I have installed GeoIP extension. From this we are able to get the country code based on IP. I have added a function in the observer and this will be triggered only once on the page loads with the event `controller_action_predispatch` and in the observer, I use a switch case to switch between the stores. Here is my function & switch case.

```
public function getLocationInfoByIp($observer) {

        $geoIP = Mage::getSingleton('geoip/country');
        $cnCode =  $geoIP->getCountry(); 

        switch ($cnCode) {

            case "US": {
                  Mage::app()->setCurrentStore('en');
                  break;
            }
            case "IN": {
                Mage::app()->setCurrentStore('de');
                break;
            }
            default: {
                Mage::app()->setCurrentStore('en');
                break;
            }
       }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:39:27.757

U can redirect to the store view with the ip. No need to use Mage::run

```
 switch(trim($countryCode))  
                 {  
                       case 'CH':  
                                $url = $siteurl . '?___store=german';  
                                header( 'Location:' . $url);die;  
                       break;  
                       case 'DE':  
                                     $url = $siteurl . '?___store=german';  
                                     header( 'Location:' . $url);die;  
                       break;  
                       case 'IN':  
                                 $url = $siteurl . '?___store=english';  
                                 header( 'Location:' . $url);die;  
                       break;  
                       default:  
                       $url = $siteurl . '?___store=usa';  
                                 header( 'Location:' . $url);die;  
                       break;  
                 } 
```

# java - -Djava.library.path 是否适用于 UNIX JVM？

> ID：16103106
> 
> 赞同：1
> 
> 时间：2013-04-19T11:02:07.917
> 
> 标签：java, linux, java-native-interface, aix

我有一个 Java 应用程序，它依赖于一些用 C 编写的遗留代码，它通过 JNI 访问这些代码。本机库存储在一个子目录中（实际上，有两个子目录：一个是 32 位库，一个是 64 位库）。

在 Windows 中，以下命令行形式可以正常工作：

```
java -Djava.library.path=nativelib64 -classpath myapp.jar;jni_lib.jar MyApplication 
```

但是 AIX 和 Linux 上的等价物（基本上将类路径中的分号替换为冒号）因 UnsatisfiedLinkErrors 而失败 - 我不得不在调用之前明确设置 LIBPATH 或 LD_LIBRARY_PATH，因为我没有尝试过将 -Djava.library.path 设置为（例如“nativelib64”、“./nativelib64”、“/full/path/to/myappdir/nativelib64”）似乎有效。

JVM 的 UNIX 版本不支持从命令行设置 java.library.path 属性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:58:16.723

见[http://kalblogs.blogspot.co.uk/2009/01/java.html](http://kalblogs.blogspot.co.uk/2009/01/java.html)：

> java.library.path 仅用于解析您在代码中加载的**直接本机库。**

如果此直接库依赖于其他库（在由 定义的同一路径中`java.library.path`，或在不同位置），则这些其他库将通过操作系统的标准机制加载。在这种情况下，也需要进行`LD_LIBRARY_PATH`相应的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:22:16.043

您需要使用“LD_LIBRARY_PATH”变量。

> LD_LIBRARY_PATH：本机代码库（在 Linux 上，除了此变量的值之外，查找路径通常包含 /usr/local/lib、/usr/lib、/lib 和其他一些）。LD 这个名字来自动态加载器，将库加载到动态链接的可执行文件中的系统组件。

编辑：

检查此链接： http: [//www.chilkatsoft.com/java-loadLibrary-Linux.asp](http://www.chilkatsoft.com/java-loadLibrary-Linux.asp)

# django - 删除字符串中的字符 Django python

> ID：16103109
> 
> 赞同：1
> 
> 时间：2013-04-19T11:02:24.333
> 
> 标签：django, templates

当我从我的页面发布一个值时，会创建一个额外的字符串，我想删除'pattern =“'是否有一个标签我可以使用或替换我可以用来删除模式 = 和结尾的函数。请查找下面的场景：

`pattern = "apple"`

期望的输出

`apple`

我尝试使用但没有成功。有没有另一种方法可以在 django python 中使用新手。

`{{ pattern|split }}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:20:10.797

编写自定义[模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)并使用[正则表达式](http://docs.python.org/2/howto/regex.html)（捕获组可以解决问题）来替换所需的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:54:15.703

如果在提交表单时将引号添加到字符串中，则可以在访问 POST 数据时使用 .strip() 方法。您还可以指定要删除的字符。在这里查看：http: [//docs.python.org/2/library/stdtypes.html](http://docs.python.org/2/library/stdtypes.html)

# drupal - Drupal 7 - privatemsg 模块 - 自动完成自定义

> ID：16103112
> 
> 赞同：0
> 
> 时间：2013-04-19T11:02:35.223
> 
> 标签：drupal, private-messaging

我在 Drupal 7 中有一个 privatemsg 模块，它在“To”字段中使用自动完成（Do 是波兰语翻译）。它看起来很没有吸引力，不幸的是我看不到定制它的选项！我检查了代码并尝试修改它，但它不起作用：o

```
<input type="text" id="edit-recipient" name="recipient" value="" size="50" maxlength="128" class="form-text required form-autocomplete" />

<input type="hidden" id="edit-recipient-autocomplete" value="http://niemiecki.dogadajsie.pl/messages/autocomplete" disabled="disabled" class="autocomplete" /> 
```

我们可以看到自动完成有 id="edit-recipient-autocomplete" 和 class="autocomplete"。当我修改它时，它根本不起作用。当我尝试搜索对此 id 或类的引用时，我什么也没找到。有人可以告诉我如何自定义它吗？

实际上它看起来像这样：

[http://i.stack.imgur.com/r6Gej.png](http://i.stack.imgur.com/r6Gej.png)

亲切的问候，迈克尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:30:02.797

您要使用该字段修改什么？您可以使用 hook_form_alter 来修改该字段。添加自动完成类是因为它明确设置为自动完成。

# haskell - 使用 Haskell 自动化网站表单

> ID：16103117
> 
> 赞同：0
> 
> 时间：2013-04-19T11:02:47.820
> 
> 标签：haskell, webautomation

是否有一些不错的库（如果有，它们是什么）用于使用 Haskell 自动进行网站查询。

基本上我想得到一个表格，填写一些值并得到结果（当然，重复这样做）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:54:57.630

我不确定您是在寻找网络抓取工具还是只是一种发出 GET/POST 请求的方法。在后一种情况下，有[Network.HTTP](http://hackage.haskell.org/packages/archive/HTTP/4000.0.9/doc/html/Network-HTTP.html)或[Haskell `libcurl`bindings](http://www.haskell.org/haskellwiki/Network.Curl)。在前者中，您可以查看[HandsomeSoup](https://github.com/egonSchiele/HandsomeSoup)或其他[HTML 解析库](http://www.haskell.org/haskellwiki/Web/Libraries/XML_and_HTML)之一（我自己从未真正使用过这些，所以我不能推荐一个特定的）。

# asp.net-mvc - 数据注释不适用于复选框

> ID：16103118
> 
> 赞同：1
> 
> 时间：2013-04-19T11:02:53.680
> 
> 标签：asp.net-mvc, validation, asp.net-mvc-4, data-annotations

自定义属性

```
public class BooleanMustBeTrueAttribute : ValidationAttribute
{
    public override bool IsValid(object propertyValue)
    {
         return propertyValue != null
             && propertyValue is bool
             && (bool)propertyValue;
     }
} 
```

模型

```
[MetadataType(typeof(ProductMeta))]
public partial class Product
{
   public virtual bool ItemOwner { get; set; }
}

public class ProductMeta
{
[Required]
[BooleanMustBeTrue(ErrorMessage = "Please tick")]
public virtual bool ItemOwner { get; set; }
} 
```

看法

```
@Html.CheckBoxFor(m=>m.ItemOwner)
@Html.ValidationMessageFor(m=>m.ItemOwner) 
```

我的代码中上面的所有内容看起来都正确，但复选框验证仍然不起作用。以上验证甚至不适用于控件。

我的应用程序在 MVC4 中。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T10:30:03.593

试试下面的代码

```
public class EnforceTrueAttribute : ValidationAttribute, IClientValidatable
{
    public override bool IsValid(object value)
    {
        if (value == null) return false;
        if (value.GetType() != typeof(bool)) throw new InvalidOperationException("can only be used on boolean properties.");
        return (bool)value == true;
    }

    public override string FormatErrorMessage(string name)
    {
        return "The " + name + " field must be checked in order to continue.";
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        yield return new ModelClientValidationRule
        {
            ErrorMessage = String.IsNullOrEmpty(ErrorMessage) ? FormatErrorMessage(metadata.DisplayName) : ErrorMessage,
            ValidationType = "enforcetrue"
        };
    }
} 
```

然后将以下代码添加到您的 javascript 文件中。

```
jQuery.validator.addMethod("enforcetrue", function (value, element, param) {
    return element.checked;
});
jQuery.validator.unobtrusive.adapters.addBool("enforcetrue"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T12:56:36.497

您可以从这个答案中得到一些想法：[How to handle Booleans/CheckBoxes ...](https://stackoverflow.com/questions/2245185/how-to-handle-booleans-checkboxes-in-asp-net-mvc-2-with-dataannotations?rq=1)。特别是来自 43 票赞成的答案。

很可能您的解决方案就在这里：逻辑：使用 CheckBoxFor 和代码示例[检查所需的复选框：](http://goo.gl/ongqC) [MVC 模型需要 true](https://stackoverflow.com/questions/4730183/mvc-model-require-true)，这与第一个答案没有太大区别。如果为其他人工作，也必须为你工作。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T05:12:09.140

这个怎么样？

```
 public override bool IsValid(object value)
        {
            if (value == null) return false;
            if (value.GetType() != typeof(bool)) throw new InvalidOperationException("can only be used on boolean properties.");

            return (bool) value == true;
        } 
```

# mysql - 如何将一个表值显示为表行并从另一个表中显示此值

> ID：16103125
> 
> 赞同：0
> 
> 时间：2013-04-19T11:03:21.383
> 
> 标签：mysql, pivot

我正在尝试组合并显示我的 2 个表格，如下所示，我的第一个表格结构是，![在此处输入图像描述](https://i.stack.imgur.com/Yxt7F.png)

我的第二张桌子是，![在此处输入图像描述](https://i.stack.imgur.com/4HE0B.png)

我的预期结果是，![在此处输入图像描述](https://i.stack.imgur.com/Pr2aF.png)

我试过这样但无法得到结果

```
select t2.field_value as t2.name
from content_fields t1
Join content_fields_type_richtext_data t2 ON t1.id = t2.field_id; 
```

我的表结构是否有任何错误。如何得到这个结果。请帮助任何人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:15:14.750

MySQL 没有 PIVOT 函数，但您可以使用带有`CASE`表达式的聚合函数将行数据转换为列：

```
select t2.object_id,
  max(case when t1.frontend_name = 'Bride Photo' then t2.field_value end) as `Bride Photo`,
  max(case when t1.frontend_name = 'BrideGroom Photo' then t2.field_value end) as `BrideGroom Photo`,
  max(case when t1.frontend_name = 'Bride Description' then t2.field_value end) as `Bride Description`,
  max(case when t1.frontend_name = 'Groom Description' then t2.field_value end) as `Groom Description`,
  max(case when t1.frontend_name = 'Wishes' then t2.field_value end) as `Wishes`
from content_fields t1
inner join content_fields_type_richtext_data t2 
  on t1.id = t2.field_id
group by t2.object_id; 
```

如果您有未知或动态数量的值，那么您将需要使用准备好的语句来获取结果：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(CASE WHEN t1.frontend_name = ''',
      frontend_name,
      ''' THEN t2.field_value END) AS `',
      frontend_name, '`'
    )
  ) INTO @sql
FROM content_fields;

SET @sql 
  = CONCAT('SELECT t2.object_id, ', @sql, ' 
            from content_fields t1
            inner join content_fields_type_richtext_data t2 
              on t1.id = t2.field_id
            group by t2.object_id');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# kendo-ui - 单击模板或项目时，kendoAutoComplete 显示 [object object]

> ID：16103127
> 
> 赞同：1
> 
> 时间：2013-04-19T11:03:21.710
> 
> 标签：kendo-ui, kendo-grid

此代码在快照中返回以下结果。

单击模板而不是单击模板时，如何使用 FirstName 和 LastName 填充文本字段`[object object]`？

```
function forAutoComplete(FieldName){
        var autoCompleteUsers = $("#employees").kendoAutoComplete({
            minLength: 1,
            dataTextField: FieldName,

            template: '<div style="border-bottom: 1px solid DARKGRAY; padding:10px 0; clear:both;">' +
                      '<img  style="float:left; margin-right:20px;" width=\"127\" height=\"127\" src=\"<?php echo base_url() ?>/user_uploads/employee_images/${data.Photo}\" alt=\"${data.Photo}\"/>'+
                      '<div style="display: inline-block;"><p>${ data.FileNo}</p>' +
                      '<h3>${ data.FirstName } ${ data.LastName }</h3></div>'+
                      '<div style="clear: both; "></div></div>',

            dataSource: {
                serverFiltering: true,
                transport: {
                    read: {
                        type: "GET",
                        dataType: "json",
                        contentType:'application/json; charset=utf-8',
                        url: "<?php echo base_url() ?>index.php/hr_management/manage_hr/search_employee/",
                        data: function (arg){
                            return {FieldName : autoCompleteUsers.data("kendoAutoComplete").value()};
                        }
                    }
                }
            },
            height: 300,
            change: onChangeAutoComplete
        });
    } 
```

![在此处输入图像描述](https://i.stack.imgur.com/SPPWV.png)

![在此处输入图像描述](https://i.stack.imgur.com/bu7xR.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T18:09:03.663

该问题可能与您设置的值有关`dataTextField`。

进行某种逆向工程，我猜您返回的 JSON 数据类似于：

```
[
    {data: { FileNo: "0001", FirstName: "OnaBai", LastName: "it's me", Photo: "https://si0.twimg.com/profile_images/2648375258/7f7e451f0de1eb467fe35f4f481d7bf7_bigger.jpeg" } },
    {data: { FileNo: "0002", FirstName: "Burke", LastName: "Holland", Photo: "https://si0.twimg.com/profile_images/3342899483/51e933d69222ce8ad8cd14e655116959.jpeg" } },
    {data: { FileNo: "0003", FirstName: "Todd", LastName: "Anglin", Photo: "https://si0.twimg.com/profile_images/1478082886/todd-anglin-close-up_illustrated.png" } }
] 
```

如果是这样，您应该将其定义为`data.FirstName`.

如果您将其定义为：

```
[
    { FileNo: "0001", FirstName: "OnaBai", LastName: "it's me", Photo: "https://si0.twimg.com/profile_images/2648375258/7f7e451f0de1eb467fe35f4f481d7bf7_bigger.jpeg" },
    { FileNo: "0002", FirstName: "Burke", LastName: "Holland", Photo: "https://si0.twimg.com/profile_images/3342899483/51e933d69222ce8ad8cd14e655116959.jpeg" },
    { FileNo: "0003", FirstName: "Todd", LastName: "Anglin", Photo: "https://si0.twimg.com/profile_images/1478082886/todd-anglin-close-up_illustrated.png" }
] 
```

那么它应该只是`FirstName`。

第一种方法的示例在[这里](http://jsfiddle.net/OnaBai/XzR7p/6/)，而第二种方法在[这里](http://jsfiddle.net/OnaBai/XzR7p/)

如果您`dataTextField: "data",`为 JSON 定义并使用第一种方法，那么您将获得`[object Object]`. 看[这里](http://jsfiddle.net/OnaBai/XzR7p/3/)

# xcode - 从 Xcode 启动的应用程序总是在所有其他应用程序之后启动？

> ID：16103128
> 
> 赞同：1
> 
> 时间：2013-04-19T11:03:23.180
> 
> 标签：xcode, xcode4

我已经从事了一段时间的特定项目突然间会显示应用程序 - 当通过Xcode 4的“**运行”启动时 -***在*所有其他正在运行的应用程序之后，特别是在 Xcode IDE 之后。

无论*调试工作流*设置如何，都会发生这种情况。将其更改为*Xcode always behind*只会导致 Xcode 也隐藏在其他正在运行的应用程序后面。很奇怪。

我找不到改变应用程序行为的方案设置，从构建文件夹中删除所有内容也没有效果。直接通过 Finder 启动应用程序就可以正常工作并将其置于最前面。

**编辑＃1：**

删除应用程序的首选项、用户和系统缓存，使用 Onyx 的一般清理根本没有帮助 - 在所有应用程序中，这个特定的应用程序一直在所有其他正在运行的应用程序后面启动。

毫无头绪。

# java - Sbt 包管理器无法在 Heroku 解决

> ID：16103129
> 
> 赞同：2
> 
> 时间：2013-04-19T11:03:23.180
> 
> 标签：java, heroku, playframework-2.0, bonecp

大家好，我正在尝试在 heroku 上向我的 play framework 2.0.4 应用程序添加一个新的 bonecp 版本，但我得到了

```
[info] downloading http://oss.sonatype.org/content/groups/public/com/jolbox/bonecp/0.8.0-rc2-SNAPSHOT/bonecp-0.8.0-rc2-20130128.135547-1.jar ...
       [info]   [SUCCESSFUL ] com.jolbox#bonecp;0.8.0-rc2-SNAPSHOT!bonecp.jar(bundle) (367ms)
       [warn]   [NOT FOUND  ] com.google.guava#guava;13.0.1!guava.jar (10ms)
       [warn] ==== Typesafe Releases Repository: tried
       [warn]   http://repo.typesafe.com/typesafe/releases/com/google/guava/guava/13.0.1/guava-13.0.1.jar
       [info] downloading http://repo.typesafe.com/typesafe/releases/org/slf4j/slf4j-api/1.7.2/slf4j-api-1.7.2.jar ...
       [info]   [SUCCESSFUL ] org.slf4j#slf4j-api;1.7.2!slf4j-api.jar (60ms)
       [warn]   ::::::::::::::::::::::::::::::::::::::::::::::
       [warn]   ::              FAILED DOWNLOADS            ::
       [warn]   :: ^ see resolution messages for details  ^ ::
       [warn]   ::::::::::::::::::::::::::::::::::::::::::::::
       [warn]   :: com.google.guava#guava;13.0.1!guava.jar
       [warn]   ::::::::::::::::::::::::::::::::::::::::::::::
       [error] {file:/tmp/build_16vgl6xi6x33j/}theapp/*:update: sbt.ResolveException: download failed: com.google.guava#guava;13.0.1!guava.jar
       [error] Total time: 8 s, completed Apr 19, 2013 10:37:35 AM
 !     Failed to build app with sbt
 !     Heroku push rejected, failed to compile Play 2.x - java app 
```

它似乎无法在 typesafe 中找到 google guava。

我在本地工作，但不在heroku。解析器可能有问题，但我不知道是什么。

这是我的 Build.scala 配置：

```
val appDependencies = Seq(
                "com.google.api.client" % "google-api-data-youtube-v2" % "1.0.6-alpha",
                "com.google.gdata" % "core" % "1.47.1",
                "org.apache.commons" % "commons-io" % "1.3.2",
                "org.reflections" % "reflections" % "0.9.8",
                "mysql" % "mysql-connector-java" % "5.1.24",
                "org.scribe" % "scribe" % "1.3.2",
                "com.github.mumoshu" %% "play2-memcached" % "0.2.3-SNAPSHOT",
                "com.amazonaws" % "aws-java-sdk" % "1.3.11",
                "com.google.code.gson" % "gson" % "2.2.2",
                "com.rabbitmq" % "amqp-client" % "2.8.7",
                "com.google.javascript" % "closure-compiler" % "rr2079.1",
                "com.restfb" % "restfb" % "1.6.11",
                "com.typesafe" %% "play-plugins-mailer" % "2.0.4",
                "com.jolbox" % "bonecp" % "0.8.0-rc2-SNAPSHOT"
    )

val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
    resolvers += "Sonatype OSS Snapshots Repository" at "http://oss.sonatype.org/content/groups/public",
    resolvers += "Spy Repository" at "http://files.couchbase.com/maven2" // required to resolve `spymemcached`, the plugin's dependency.
) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T10:49:52.607

现在可以修复了。几个小时前它在我身上失败了，但现在它可以工作了

# sql-server-2008 - 使用数字字符对 varchar 数据类型进行排序

> ID：16103133
> 
> 赞同：1
> 
> 时间：2013-04-19T11:03:39.573
> 
> 标签：sql-server-2008

我有一`varchar`列需要按其中包含的数字进行排序。数据类似于：

```
Group 1
Group 10
Group 11
Group 12
Group 13
Group 14
Group 15
Group 16
Group 17
Group 18
Group 19
Group 2
Group 20
Group 3
Group 4
Group 5
Group 6
Group 7
Group 8
Group 9
Test Group 
```

我想要这样的输出，其中值按数字排序。

```
Group 1
Group 2
Group 3
Group 4
Group 5….. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T11:13:15.920

尝试如下，它会帮助你..

```
SELECT ColumnName FROM TableName 
ORDER BY CONVERT(INT, Replace(ColumnName, 'Group','')) 
```

**SQL小提琴：** [http ://sqlfiddle.com/#!3/e14a6/7](http://sqlfiddle.com/#!3/e14a6/7)

*另一种方式*

```
SELECT ColumnName FROM TableName 
ORDER BY LEN(ColumnName),ColumnName 
```

**SQL小提琴：** [http ://sqlfiddle.com/#!3/e14a6/6](http://sqlfiddle.com/#!3/e14a6/6)

*另一种方式*

```
SELECT ColumnName FROM TableName order by 
case when 
    PATINDEX('%[^0-9]%',ColumnName) = 0 
THEN 
    data
ELSE
    cast(Left(ColumnName,PATINDEX('%[^0-9]%',ColumnName)-1) as int) 
END 
```

**SQL小提琴：** [http ://sqlfiddle.com/#!3/14eb5/2](http://sqlfiddle.com/#!3/14eb5/2)

*另一种方式*

在这里，我使用[**公用表表达式**](http://msdn.microsoft.com/en-IN/library/ms190766%28v=sql.105%29.aspx)添加了另一个解决方案试试这个......

```
with tempCTE(Data, pos)
as
(select data, Patindex('%[0-9]%', data)  from sample),
tempCTE2(name, num)
as
(select SUBSTRING(data, 0, pos) name , cast(SUBSTRING(data, pos , LEN(data)) as int) num from tempCTE)
select name + CAST(num as varchar(10)) num1 from tempCTE2 order by name, num asc 
```

**SQL小提琴：** [http ://sqlfiddle.com/#!3/14eb5/3](http://sqlfiddle.com/#!3/14eb5/3)

# python - TKinter 无法在 ARM 上运行

> ID：16103134
> 
> 赞同：1
> 
> 时间：2013-04-19T11:03:40.450
> 
> 标签：python, linux, tkinter, arm

我已经为 arm 编译了 python 2.6.6，并且它在 arm 上工作。但是当我导入 tkinter 时，我遇到了错误。

```
import _tkinter # If this fails your Python may not be configured for Tk
ImportError: /usr/lib/python2.6/lib-dynload/_tkinter.so: cannot open shared object file: No such file or directory 
```

我在这里做错什么了吗？还是我需要做其他事情。我的主机没有使用 x11，而是 eglfs 在这里有什么影响吗？

谢谢 brijesh

# php - 在 PHP 中加入两个表

> ID：16103137
> 
> 赞同：-1
> 
> 时间：2013-04-19T11:03:47.603
> 
> 标签：php, mysql, join

我有两张桌子

表 1 类别

```
Id    name      img   
1   appliances   
2   books 
```

表2产品

```
ID  name des  price  cataegory sub  img
1  TV    lcd  125     1        tv 
```

我正在尝试加入表 2 中类别中的两个表，直到从表 1 中获取名称

这是我的代码

```
 $sql = "SELECT p.id, 
                   p.name,
                   p.description, 
                   p.price,
                   c.name,
                   p.sub
            FROM products p
            JOIN category c on products p = c.id
            ORDER by p.id
            ";

    if($query =  mysql_query($sql) or die())
    {
        while($result = mysql_fetch_assoc($query))
        {   echo "<tr id='id'>";
            //echo "<td>".$result['img']."</td>";
            echo "<td>".$result['name']."</td>";
            echo "<td>".$result['description']."</td>";
            echo "<td>".$result['price']."</td>";
            echo "<td>".$result['category']."</td>";
            echo "<td>".$result['sub']."</td>";
            echo "</tr>";
        }
    }       "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:07:48.743

将类别名称添加到选择查询返回的列中：

```
$sql = "SELECT p.id, 
                   p.name,
                   p.description, 
                   p.price,
                   c.name,
                   p.sub,
                   c.name AS category_name       -- Category name
            FROM products p
            JOIN category c on p.category = c.id
            ORDER by p.id
            "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:07:57.683

重命名输出中的字段名称：

```
$sql = "SELECT p.id, 
                   p.name,
                   p.description, 
                   p.price,
                   c.name AS OTHER_NAME,
                   p.sub
            FROM products p
            JOIN category c on p.category = c.id
            ORDER by p.id"; 
```

然后获取**OTHER_NAME**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:05:34.610

```
$sql = "SELECT p.id, 
                   p.name,
                   p.description, 
                   p.price,
                   c.name,
                   p.sub
            FROM products p
            JOIN category c on p.cataegory = c.id
            ORDER by p.id
            "; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T11:09:28.687

您的查询应该是这样的

```
SELECT
  p.id,
  p.name,
  p.description,
  p.price,
  c.name,
  p.sub
FROM products p
  INNER JOIN c.category
    on products p.cataegory = c.id
ORDER by p.id 
```

对特定结果使用内连接

# .net - 在 IIS 8 64 位下运行可执行文件？

> ID：16103138
> 
> 赞同：3
> 
> 时间：2013-04-19T11:03:48.400
> 
> 标签：.net, iis, web-applications, webserver, iis-8

我开发了一个 Web 应用程序，需要在服务器端运行 .exe 来执行某些任务。我在 Visual Studio 的内置 Web 服务器下工作得很好，但是在将它移到 IIS 8（64 位）时它会失败，因为 .exe 没有运行。

我了解，默认情况下，应用程序池在无法生成桌面窗口的用户帐户下运行，因此我在服务器计算机上创建了一个帐户以供应用程序运行，但这没有任何效果。

我还检查了“处理程序映射”部分下的“编辑功能权限”，并确保它具有“执行”权限。

这在 IIS 6 下很简单，在 IIS7/8（64 位）中发生了什么变化？如果它有助于我的应用程序是基于 .NET 的并且可执行文件是使用“Process.Start”运行的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:34:50.723

我终于找到了为什么这不起作用，并且有一个简单的解决方案。基本上在 AppPool 高级设置中有一个“启用 32 位应用程序”选项，需要按照以下设置为 True 才能运行 32 位控制台应用程序：

![高级设置](https://i.stack.imgur.com/2XobU.png)

# php - 如何将文本文件导入sql

> ID：16103139
> 
> 赞同：1
> 
> 时间：2013-04-19T11:03:50.567
> 
> 标签：php, mysql, sql, import

我有以下具有 48.891 个名称的文本文件。我想将它们导入到 mySQL 数据库。我需要带有性别和名称的前 3 个字符。其余的应该被忽略。

```
M  Aad                                  4                                             $
M  Aadam                                          1                                   $
F  Aadje                                1                                             $
M  Ådne                      +                 1                                      $
M  Aadu                                           12                                  $
?F Aaf                                  1                                             $
F  Aafke                                4                                             $
?  Aafke                                 1                                            $
F  Aafkea                                1                                            $
M  Aafko                                1                                             $
M  Aage                                       761                                     $
M  Åge                       +                56                                      $
F  Aagje                              1 2                                             $
F  Aagot                                       1                                      $
F  Ågot                      +                 2                                      $
F  Aagoth                                      1                                      $
F  Ågoth                     +                 1                                      $
M  Åke                       +                118                                     $
M  Aalbert                              1                                             $
M  Aalderich                             1                                            $
M  Aalderk                               1                                            $ 
```

数据库处理不是我的问题。问题是如何只过滤文本文件中的性别和姓名。感谢提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:05:59.610

只有在 SQL 中才能做到这一点，你可以看到`LOAD DATA INFILE`或者你可以用一个小程序来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T03:22:46.077

我发现[Pentaho 的 ETL 软件 Kettle](http://kettle.pentaho.com/)可以很容易地将文本文件导入 mysql（特别是如果您没有最专业的技术背景。文档有点稀疏，而且这个软件远非完美，但是我发现我通常可以在为一个特定文件编写脚本所花费的时间的一小部分时间内导入数据。您可以选择文本文件输入并指定分隔符、固定宽度等...然后只需直接导出到您的 SQL 服务器（它们支持 MySql、SQLite、Oracle 等）。拖放界面非常适合不想每次运行导入时都编写代码的任何人。

# perl - 使用 Perl 读取文本文件的每一行并存储到 CSV 文件的列中

> ID：16103140
> 
> 赞同：-1
> 
> 时间：2013-04-19T11:03:55.517
> 
> 标签：perl

我有一个文本文件，其中文件内容在开头有分隔符作为空格。它如下所示：

*   第一行开头没有任何空格。
*   第二行有 2 个空格。
*   第三行开头有 4 个空格。
*   第四行开头有 6 个空格。

再次以随机方式重复此模式直到文件末尾，如下面的文本文件所示。

我想从文本文件中读取这些行并将这些行保存为模式：

*   第一列没有空格。
*   在第二列中有 2 个空格。
*   第三列有 4 个空格。
*   CSV 文件的第四列中有 6 个空格。

文本文件结构为（用# 表示空格）：

```
ABC
##EFG"123"
####<HIJK> 22: test file
######LMNOP "Test"
######sssstt"123"
QRS
##TU"223"
####<www> 32: test2 file
######yz test1
####<www> 88: test3 file
######rreeeww
######oooiiiii
##PP
##ss
####<qqq> 89: test6 file
######hhhhggg
######bbbbaaa
######cccczzz
######uu test3 
```

预期的输出图像： ![输出](https://i.stack.imgur.com/etpXb.png)

我是 Perl 的新手，我知道如何打开文件并通读行，但我不明白如何将这种结构存储在 CSV 列中。

```
my $file = 'C:\\outputfile.txt';
open(my $fh, '<:encoding(UTF-8)', $file) or die "Could not open file '$file' $!"; 
while (my $row = <$fh>) { # reading each row till end of file
    chomp $row;  
    //what should be done here ?
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:44:00.240

如果你对代码有任何疑问，我会说：是的，我可以回答，但这并不是 Perl 代码的好例子。只是快写。

```
my $previous_count = "-1"; #beginning, we will think, that no spaces.
my $current_count = "0";  #current default value
my $maximum_count = 3; #u say so
my $to_written = "";
my $delimiter_between_columns = ",";
my $newline_separator = ";";
my $symbol_at_the_beginning = "#"; #input any symbol. But I suppose, you want "\s" <- whitespace' symbol class. input it like this: $var = "\s";
my @aggregate_array_of_ports=();
while(my $row = <DATA>){
#ok, read.    
chomp($row);    
#print "row is : $row\n";
if($row =~ m/^([$symbol_at_the_beginning]*)/){
   #print length($1);
   $current_count = length($1) / 2; #take number of spaces divided by 2
   $row =~ s/^[$symbol_at_the_beginning]+//;
   #hint here, we can get counts as 0,1,2,3 <-see? 
   #if you take first and third word, you need to add 2 separators.
   #OR if you take count with LESSER then previous count, it mean, that you need output       
   #print"prev : $previous_count   and    curr : $current_count\n  ";
   #print"I will write: $to_written\n";
   #print "\n PREV: $previous_count --> CURR: $current_count \n";
   if($previous_count>=$current_count){
      #output here
      print "$to_written".$newline_separator."\n";
      $previous_count = 0;
      $to_written = "";
   }
   $previous_count = 0 if($previous_count==-1);   

   #print "$delimiter_between_columns x($current_count-$previous_count)\n";
   #print "current: $current_count previous: $previous_count \n";
   $to_written .= $delimiter_between_columns x ($current_count - $previous_count + (($current_count-$previous_count)==3?2:0) )."$row";
   if ($current_count==($maximum_count-1)){
    #print "I input this!: $to_written\n";
    $to_written = prepare_to_input_four_spaces($to_written, $delimiter_between_columns);    
    }
   $previous_count = $current_count;
   #print"\n";
}
}
  #print "$to_written".$newline_separator."\n";
sub prepare_to_input_four_spaces{
    my $str = shift; #take string
    my $delim = shift;
    if ($str=~ m/(.+?[>])\s+(\d+)[:]\s+(.+?)$/){
    #here I want to find first capture group before [>] (also it includes) |(.+?[>])|
    #next, some spaces |\s+| and I want to catch port |(\d+)|.
    #next, |[:]| symbol and some spaces again |\s+| before the tail of the string.
    #and will catch this tail: |(.+?)$|.
    #where $ mean the right "border" of the string (really - end of the string)
        $str = $1.$delim.$2.$delim.$3;
        }
        return $str;
    }

=pod
__DATA__
ABC
  EFG"123"
    HIJK (12345)
      LMNOP "Test"
      sssstt"123"
QRS
  TU"223"
    vwx"55"
    www"88"
      yz:test1
__END__
=cut
__DATA__
ABC
##EFG"123"
####<HIJK> 22: test file
######LMNOP "Test"
######sssstt"123"
QRS
##TU"223"
####<www> 32: test2 file
######yz test1
####<www> 88: test3 file
######rreeeww
######oooiiiii
##PP
##ss
####<qqq> 89: test6 file
######hhhhggg
######bbbbaaa
######cccczzz
######uu test3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:21:21.680

可能这对你来说没问题：我只是跳过了放置标题并将分隔符放置为“|”。你可以改变它。

```
> perl -lne 'if(/^[^\#]/){if($.!=1){print "$a"};$a=$_;}else{s/^#*//g;$a.="|$_";}END{print $a}' temp
ABC|EFG"123"|HIJK (12345)|LMNOP "Test"|sssstt"123"
QRS|TU"223"|vwx"55"|www"88"|yz:test1 
```

# asp.net-mvc - 将数据库（实体框架）中的数据显示到 _Layout.cshtml

> ID：16103146
> 
> 赞同：1
> 
> 时间：2013-04-19T11:04:06.697
> 
> 标签：asp.net-mvc, razor

我正在 MVC3 asp.net 上开发一个网站，我使用实体框架作为数据库：我想在 _Layout.cshtml 上显示数据库中的徽标，并且我想将数据库中的文本显示到我的主页中。这是我的模型

```
 public class Theme
 {
    [Required(ErrorMessage = "ID is required.")]
    public string ThemeID { get; set; }
    public string path { get; set; }  
    [AllowHtml]
    [Required(ErrorMessage = "Text is required.")]
    public string texte { get; set; }
} 
```

我把 _Layout.cshtml

```
@Html.Partial("~/Views/Shared/_Header.cshtml") 
```

这是我的 ThemeController.cs

```
[ChildActionOnly]
    public ActionResult Header(string id)
    {
        var model = db.Themes.ToList();

        return View("~/Views/Shared/_Header.cshtml", model);            
    } 
```

这是 _Header.cshtml

```
@model ICollection<DSClient.Models.Theme>
@{
    <img src="@Href( @Model.ElementAt(@Model-1).path )"  />
} 
```

当我输入 Theme/index 的 url 时没关系，但问题是当我加载其他页面时，我有这个异常对象引用未设置为对象的实例。拜托我需要你的帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:20:45.767

`Html.Partial`用于包含局部视图。因此，当您包含`_Header.cshtml`并且 Model 不是 a`ICollection<DSClient.Models.Theme>`时，您就有麻烦了。

由于您使用属性创建了一个方法`Childaction`，我假设您可能想要使用`Html.Action`而不是`Html.Partial`. 这将执行控制器的子动作，该动作输出`_Header.cshtml`适当的数据。

删除`string`Header 操作中的参数（未使用），在 中`_Layout.cshtml`，您可以这样称呼它：

```
@Html.Action("Header", "Theme") 
```

# linux - 从linux运行windows命令

> ID：16103147
> 
> 赞同：0
> 
> 时间：2013-04-19T11:04:09.013
> 
> 标签：linux, windows, command

编辑：

准确地说，我想从 Linux 命令行控制 Windows 主机。就像在 windows 下通过 ssh session 或 telnet 从 linux 执行命令一样。

Windows 没有像 linux 这样的内置 sshd 服务器。所以我想知道这是否可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:06:49.840

您可以通过`winexe` 查看[winexe](http://sourceforge.net/projects/winexe/)来做到这一点。

该页面说它能够在 Windows NT/2000/XP/2003 系统上运行来自 GNU/Linux 的命令（也可能来自其他能够构建 Samba 4 软件包的 Unices）。

我还可以告诉你，正确配置 Windows 防火墙后，它也可以在 Windows 7 和 Windows Server 2008 上运行。

# java - 再次检查一个列表中的所有内容，导致堆栈溢出

> ID：16103149
> 
> 赞同：1
> 
> 时间：2013-04-19T11:04:13.970
> 
> 标签：java, android, stack-overflow

基本上，我正在尝试检查一个数字数组列表与另一个数字数组列表，因为我想查看我的 TempPositionList 中是否有任何内容在我的访问过的单词列表中，但是因为访问过的单词列表可能小于或大于临时列表，我得到堆栈溢出异常。

我该如何解决这个问题？

```
private void Checker(AdapterView<?> arg0, List<Integer> TempPositionList, boolean checked) {
    if (checked) {
        // its a word
        for (int i = 0; i < TempPositionList.size(); i++) {
            VisitedWords.add(TempPositionList.get(i));
        }

    } else {
        boolean check = false;
        for (int i = 0; i < TempPositionList.size(); i++) {
            for (int j = 0; j < TempPositionList.size(); j++) {
                if (VisitedWords.size() > 0) {
                    if (TempPositionList.get(i).equals(VisitedWords.get(j))) {
                        check = true;
                        break;
                    }
                }
            }
            if (!check) {
                arg0.getChildAt(TempPositionList.get(i)).setBackgroundColor(Color.BLACK);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:13:37.643

我认为这应该做你试图实现的目标：

```
for (Integer tempInt : TempPositionList) {
    if (!VisitedWords.contains(tempInt)) {
        arg0.getChildAt(tempInt).setBackgroundColor(Color.BLACK);
    }
} 
```

该`contains()`方法使您不必遍历第二个列表，并且`foreach`在我看来，使用循环更容易阅读，它使您无需明确担心列表的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:19:44.747

[如果您使用contains](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#contains%28java.lang.Object%29)方法检查对象是否在visitedwords 中，也许会更好。这样，您将避免使用两个 for 循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:38:03.090

如果您只想要两个列表中共有的元素，您可以这样做。

```
tempPositionList.retainAll(VisitedWords); 
```

在执行该语句后，tempPositionList 中只会保留公共元素。

# ant - 蚂蚁部署到 tomcat 7

> ID：16103155
> 
> 赞同：1
> 
> 时间：2013-04-19T11:04:29.387
> 
> 标签：ant, tomcat7

我已将我的 Tomcat 服务器从版本 6 更改为 7，现在我的 ant deploy 失败了。

起初，我的 ant 构建如下所示，但出现 403 错误

```
<taskdef resource="org/apache/catalina/ant/catalina.tasks" classpathref="x.classpath" />

<target name="tomcatdeploy" depends="tomcatundeploy,war">
  <deploy url="http://localhost/manager/html" username="x" password="x" path="/xx" war="file:x.war"/>                   
</target> 
```

我在互联网上找到了几个来源，并将其更改`manager/html`为`manager/text`并添加了角色`manager-script`和`admin-script`tomcat-user 文件。

我现在得到的错误是

```
 java.net.HttpRetryException: cannot retry due to server authentication, in streaming mode 
```

我发现这可能是因为我部署的 .war 文件的大小约为 250M，但我没有找到如何将其从 ant 部署到 tomcat 7 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:50:40.453

我终于找到了一篇关于这个问题的综合帖子：http: [//paulgrenyer.blogspot.co.at/2011/11/catalina-ant-for-tomcat-7.html](http://paulgrenyer.blogspot.co.at/2011/11/catalina-ant-for-tomcat-7.html)

# javascript - 获取 .html() 和 .text() 中突出显示的文本位置

> ID：16103157
> 
> 赞同：8
> 
> 时间：2013-04-19T11:04:42.787
> 
> 标签：javascript, jquery, string, text

我正在使用以下脚本来获取突出显示的文本的位置：

```
function getSelectionCharOffsetsWithin(element) {
    var start = 0, end = 0;
    var sel, range, priorRange;
    if (typeof window.getSelection != "undefined") {
        range = window.getSelection().getRangeAt(0);
        priorRange = range.cloneRange();
        priorRange.selectNodeContents(element);
        priorRange.setEnd(range.startContainer, range.startOffset);
        start = priorRange.toString().length;
        end = start + range.toString().length;
    } else if (typeof document.selection != "undefined" &&
        (sel = document.selection).type != "Control") {
        range = sel.createRange();
        priorRange = document.body.createTextRange();
        priorRange.moveToElementText(element);
        priorRange.setEndPoint("EndToStart", range);
        start = priorRange.text.length;
        end = start + range.text.length;
    }
    return {
        start: start,
        end: end
    };
  }

function alertSelection() {
    var mainDiv = document.getElementById("detailBoxParagraph");
    var sel = getSelectionCharOffsetsWithin(mainDiv);
    alert(sel.start + ": " + sel.end);
} 
```

现在，如果我在 上使用它`$('p').text()`，其中包含

> Lorem ipsum dolor **sit** amet，consetetur sadipscing elitr。

一切正常。但我还需要在 $ 中获得由于标签`('p').html()`而明显不同的位置`<b>`

```
Lorem ipsum dolor `<b>sit</b>` amet, consetetur sadipscing elitr. 
```

我如何防止或改变这种情况？

**编辑：**

我忘了说，我的第一个想法是计算标签出现的次数，然后使用该值来计算新位置，但这在某种程度上是愚蠢的。

我的第二种方法是用星号替换标签`.text()`

**编辑#2**

这是一个显示问题的凌乱小提琴。如果您用鼠标突出显示文本，然后单击该按钮，第一次将正确设置为粗体。第二次将无法正常工作。

我会尽快清理小提琴

[http://jsfiddle.net/UpLaw/2/](http://jsfiddle.net/UpLaw/2/)

**编辑#3**

我玩了一下下面提到的高亮插件，但我无法限制该功能只影响标记的字符串。它将突出显示所有匹配的单词或仅突出显示第一个出现的单词。任何人都可以帮忙吗？

这是必要的代码：

```
jQuery.fn.highlight = function(pat) {
this.length = 1 ;

function innerHighlight(node, pat) {

    var skip = 0;
    if (node.nodeType == 3) {
        var pos = node.data.toUpperCase().indexOf(pat);
        if (pos >= 0) {
            var spannode = document.createElement('span');
            spannode.className = 'highlight';
            var middlebit = node.splitText(pos);
            var endbit = middlebit.splitText(pat.length);
            var middleclone = middlebit.cloneNode(true);
            spannode.appendChild(middleclone);
            middlebit.parentNode.replaceChild(spannode, middlebit);
            skip = 1;
        }
    }
    else if (node.nodeType == 1 && node.childNodes && !/(script|style)/i.test(node.tagName)) {

        for (var i = 0; i < 1; ++i) { // So it will highlight only the first occurence. 
            i += innerHighlight(node.childNodes[i], pat);
        }
    }
    return skip;
}
return this.length && pat && pat.length ? this.each(function() {
    innerHighlight(this, pat.toUpperCase());

}) : this;
}; 
```

**编辑#4**

好的，我试图理解那个 javscript。据我所知，这是无法做到的，因为 highlight() 是用一个简单的字符串作为参数调用的。它不能知道这个字符串的位置。我可以/应该解析该位置，然后尝试从该位置搜索，突出显示第一次出现，然后中止吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:29:14.760

根据您的评论，这就是您想要完成的。

> 我会尽力解释这一点。英语不是我的母语，所以很抱歉造成混乱。我想在突出显示的文本之前和之后插入一个 html 标记。为了实现这一点，我必须得到文本的开头和结尾。

假设**坐**是您要处理的突出显示的选择。

您可以使用 .wrap() 或 .after() 和 .before() 来完成此操作。

```
function alertSelection() {
    $("b", $('#detailBoxParagraph')).wrap('<i/>'); // make the  highlighted section inside a tag.

    $("b", $('#detailBoxParagraph')).before('<u>Content inserted before </u> '); // insert an html before highlighted selections.

    $("b", $('#detailBoxParagraph')).after(' <u>Content inserted after </u>'); // insert an html after highlighted selections.
}

$(function () {
    alertSelection();
}) 
```

在这里，我将突出显示的文本设为斜体。

请参阅[jsFiddle中的示例](http://jsfiddle.net/LgCjT/)

参考

*   [。裹（）](http://api.jquery.com/wrap/)
*   [。前（）](http://api.jquery.com/before/)
*   [。后（）](http://api.jquery.com/after/)

* * *

如果你想完成选中的文本高亮，你可以使用[jQuery highlight](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)插件。

请参阅[jsFiddle 中的示例。](http://jsfiddle.net/LgCjT/1/)

```
function getSelectionText() {
    var text = "";
    if (window.getSelection) {
        text = window.getSelection().toString();
    } else if (document.selection && document.selection.type != "Control") {
        text = document.selection.createRange().text;
    }
    return text;
}

$(function () {
    $('#detailBoxParagraph').mouseup(function (e){
        $(this).removeHighlight();
        $(this).highlight(getSelectionText());
   });
}); 
```

# html - 定制和 elements I have a select element: <div class="select"> <select id="relationship" name="relationship"> <option value="">one</option> <option value="">two</option> <opt

> ID：16103158
> 
> 赞同：0
> 
> 时间：2013-04-19T11:04:47.593
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:40:37.633

提到的两个块确实具有相同的宽度。它只是让你在你的父 div(.select) 中有填充，并且在“选择”上没有边框，这使得它“看起来”更大了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:09:22.843

除了您拥有的其他 CSS 之外，为了确保选择及其选项的宽度相同，您应该在以下行中添加一些内容：

```
select, select option {
   width: 200px; /* change as needed */
} 
```

# php - 如何从 Android 手机向网站发送通知？

> ID：16103162
> 
> 赞同：1
> 
> 时间：2013-04-19T11:05:08.363
> 
> 标签：php, android, apk

我目前正在从事我的项目，例如家长控制。我正在尝试找到一种方法，如果有任何程序或方法可以在 android 手机发送/接收 SMS 并拨打/接听电话时将通知从 android 手机发送到网站。在网站上，将为这些通知维护一个数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:12:42.367

我认为您甚至想维护基于移动设备的数据库。您可以创建 API 调用，在移动设备上发生任何活动时将数据发送到数据库。该 api 将在 DB 上存储通知。

在网络上，您可以创建 AJAX 调用来检查数据库，如果有任何新通知出现，如果找到新记录，您可以在网站上显示它。

这是我认为最好的方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:12:53.247

您可以向网站发送获取请求或发布请求。
[在 Android Android 中发送 POST 数据](https://stackoverflow.com/questions/2938502/sending-post-data-in-android)
[- 发送 HTTPS 获取请求](https://stackoverflow.com/questions/9968114/android-sending-https-get-request)

只是一些例子。您可能正在寻找一个宁静的 api。我还没有读过这个，但它看起来可行：
[http ://www.9lessons.info/2012/05/create-restful-services-api-in-php.html](http://www.9lessons.info/2012/05/create-restful-services-api-in-php.html)

# ruby-on-rails - 如何按值对哈希进行排序

> ID：16103164
> 
> 赞同：2
> 
> 时间：2013-04-19T11:05:21.563
> 
> 标签：ruby-on-rails, ruby

我试图按值对特定哈希进行排序。我遇到了一种使用方法的方法`sort_by`。但即使我调用`sort_by`哈希，它也会返回一个数组，即：

```
a = {}
a[0] = "c"
a[1] = "b"
a[2] = "a"
a.sort_by{|key, value| value}
# => [[2, "a"], [1, "b"], [0, "c"]] 
```

如果我尝试将结果转换为散列，我最终会得到一个按键排序的散列，因此`sort_by`失去了整个目的。IE：

```
a = {}
a[0] = "c"
a[1] = "b"
a[2] = "a"
Hash[*a.sort_by{|key, value| value}.flatten]
# => {0=>"c", 1=>"b", 2=>"a"} 
```

有没有一种方法可以按值对哈希进行排序，然后以哈希的形式返回结果？

我正在使用 1.8.6 红宝石

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:32:14.970

> 哈希是键值对的集合。它类似于数组，除了索引是通过任何对象类型的任意键完成的，而不是整数索引。**您通过键或值遍历哈希的顺序可能看起来是任意**的，并且通常不会在插入顺序中。

来源：[Ruby 1.8.7 文档](http://ruby-doc.org/core-1.8.7/Hash.html)

> *   哈希保持顺序。它列举了它的元素

来源：[Ruby 1.9.1 变更日志](http://svn.ruby-lang.org/repos/ruby/tags/v1_9_1_0/NEWS)

如果你想在 Ruby 1.8 中使用有序哈希，你应该看看 ActiveSupport 的[OrderedHash](https://github.com/rails/rails/blob/cb534524389bb4f407fc268a0bb7a7cffb6785a9/activesupport/lib/active_support/ordered_hash.rb)

您不需要在 Rails 项目中，只需在项目中包含 ActiveSupport。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:52:39.927

您可以[`ActiveSupport::OrderedHash`](http://api.rubyonrails.org/classes/ActiveSupport/OrderedHash.html)用于 Ruby 1.8：

> `ActiveSupport::OrderedHash`实现保留插入顺序的哈希，如 Ruby 1.9

我没有运行 1.8.6，但这应该可以工作：

```
a = {}
a[0] = "c"
a[1] = "b"
a[2] = "a"

ordered = ActiveSupport::OrderedHash[*a.sort_by{|k,v| v}.flatten]
ordered.keys
# => [2, 1, 0], this order is guaranteed 
```

正如上面引用的 Ruby 1.9 中的哈希*“按照插入相应键的顺序枚举它们的值”中所述*，所以这只需要 Ruby 1.8。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-19T11:11:30.027

你的描述是错误的。

```
a = {}
a[0] = "c"
a[1] = "b"
a[2] = "a"
Hash[*a.sort_by{|key, value| value}.flatten] 
```

给出：

```
{
  2 => "a",
  1 => "b",
  0 => "c"
} 
```

这是按值排序的。顺便说一句，您的代码是多余的。一个更好的方法是：

```
Hash[a.sort_by{|_, value| value}] 
```

或者

```
Hash[a.sort_by(&:last)] 
```

**看到你的编辑后** 你正在使用一个没有有序哈希的版本。您无法控制元素的顺序。你不能用它做任何事情。

# javascript - Google Maps API，信息窗口仅显示数组中的最后一个元素

> ID：16103168
> 
> 赞同：-1
> 
> 时间：2013-04-19T11:05:39.540
> 
> 标签：javascript, google-maps, google-maps-api-3

好的，所以过去几天我一直在研究这个问题，但似乎仍然无法让它工作:(

我有一组属性，如下所示：

```
var map_markers = [
    ['London Road, Amesbury, SP4 7ER <br/> 2nd Line', 'London Road, Amesbury,', 1],
    ['Countess Court, Amesbury, SP4 7ER <br/> 2nd Line', 'Countess Court, Amesbury,', 2],
    ['Windsor Road, Salisbury, SP2 7NF <br/> 2nd Line', 'Windsor Road, Salisbury,', 3],
    ['Bishopdown Road, Salisbury, SP1 3DT <br/> 2nd Line', 'Bishopdown Road, Salisbury,', 4],
    ['Gainsborough Close, Salisbury, SP2 9HD <br/> 2nd Line', 'Gainsborough Close, Salisbury,', 5],
]; 
```

现在，我想要的是在用户单击标记时弹出一个信息窗口。我可以让标记代码正常工作，但我在将信息绑定到标记时遇到问题，无论我在哪里或如何设置内容，它似乎只能获取最后一个元素。这是我目前的代码减去代码点击监听器，因为这是我需要帮助的。

我想在我的信息窗口中显示的内容是每个属性的数组中的第一个元素：

```
function init_map(map_id, center_address, markers) {

    geocoder = new google.maps.Geocoder();

    geocoder.geocode( { 'address': center_address, 'region': 'uk' }, function(results, status) {

    if (status == google.maps.GeocoderStatus.OK) { 

         //Init Map Options
         var mapOptions = {
            zoom: 11,
            center: results[0].geometry.location,
            mapTypeId: google.maps.MapTypeId.ROADMAP
         }

         var map = new google.maps.Map(document.getElementById(map_id), mapOptions);

         setMarkers(map, markers);
         infowindow = new google.maps.InfoWindow({content: "loading..."});

      } else {

        alert("Unable to find address: " + status);

      }

  });

}

function setMarkers(map, markers) {

        for (var i = 0; i < markers.length; i++) {
            var locations = markers[i];
            var address = markers[i][1];

            geocoder.geocode( { 'address': address , 'region': 'uk' }, function(results, status) { 

             if (status == google.maps.GeocoderStatus.OK) { 

                marker = new google.maps.Marker({
                    position: new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng()),
                    map: map,
                    title: address
                });

                } else {
                    alert("There was a issue getting the property information.")
                }       
        });
      }
   } 
```

我知道那里有很多教程，但这些似乎都不适用于我的代码，这段代码是因为标记是在地理编码函数中分配的？？？这是必需的，因为我的数据不包含 Lng/Lat 值。

请注意，我是一个完整的 JS 菜鸟，所以示例编码将不胜感激 :)

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:00:27.767

它适用于数组中的最后一个元素这一事实向我表明，您可能正在引用未在循环内声明的变量，或者您正在将循环计数器变量传递给另一个函数。

在您的地理编码回调函数中，您使用没有声明的变量标记`var`，这将导致`marker`创建一个名为的全局变量，回调的所有后续执行都将覆盖该变量。完成地理编码后，`marker`将引用最后添加的标记。

我也可能会在创建标记的同时绑定标记的单击，例如：

```
function setMarkers(map, markers) {
    for (var i = 0; i < markers.length; i++) {
        var locations = markers[i];
        var address = markers[i][1];
        // store the infowindow content for this marker
        var infocontent=locations[0];
        geocoder.geocode( { 'address': address , 'region': 'uk' }, function(results, status) { 
            if (status == google.maps.GeocoderStatus.OK) { 
                // use var to stop our marker getting overwritten
                var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng()),
                    map: map,
                    title: address
                });
                // bind to the click event of the marker
                google.maps.event.addListener(marker, 'click', function() {
                    var infwin=new google.maps.InfoWindow({content: infocontent});
                    infwin.open(marker);
                });

            } else {
                alert("There was a issue getting the property information.")
            }       
        });
    }
} 
```

# android - 如何在 Gridview 中进行自动 onClick 和更新标记图像

> ID：16103169
> 
> 赞同：2
> 
> 时间：2013-04-19T11:05:47.083
> 
> 标签：android, gridview, checkbox, onclick, imageview

我遇到的第一个问题是我从 Internet MarkableImageView 类下载了一个标记到我已经选择的图像。课程如下：

```
public class MarkableImageView extends ImageView {
// Por defecto falso
private boolean checked = false;

public MarkableImageView(Context context) {
    super(context);
}

public MarkableImageView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public MarkableImageView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public void setChecked(boolean checked) {
    this.checked = checked;
    invalidate();
}

public boolean isChecked() {
    return checked;
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    if(checked) {
        Bitmap check = BitmapFactory.decodeResource(
                getResources(), R.drawable.checkbox_on_background);
        int width = check.getWidth();
        int height = check.getHeight();
        //int margin = 15;
        int marginWidth = (int)(canvas.getWidth()/15);
        int marginHeight = (int)(canvas.getHeight()/20);
        int x = canvas.getWidth() - width - marginWidth;
        //int y = canvas.getHeight() - height - margin;
        int y = marginHeight;
        canvas.drawBitmap(check, canvas.getWidth()-check.getWidth(), 1, new Paint());
    }
}
} 
```

我使用 Gridview 来显示我所有的照片，并且我想标记一些。我使用 BaseAdapter 来加载数据，这是我的方法 getView()：

```
public View getView(int position, View convertView, ViewGroup parent) {
    MarkableImageView imageView;
    if(convertView == null) {
        imageView = new MarkableImageView(mContext);

        imageView.setLayoutParams(new GridView.LayoutParams((int)(Preferencias.anchoPantalla/3.5), (int)(Preferencias.altoPantalla/4)));

        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);

    } else {
        imageView = (MarkableImageView) convertView;
    }
    if(nivel == -1) {

        if(!Preferencias.getIdsImagenesSeleccionadasJuegoMemoria().isEmpty()) {
            if(Preferencias.getIdsImagenesSeleccionadasJuegoMemoria().size() > position) {
                imageView.setImageResource(
                    Preferencias.imagenesTodas[Preferencias.getIdsImagenesSeleccionadasJuegoMemoria().get(position)]);
            }
        }
    } else if(nivel == 0) {
        if(!listaIdsDescubiertas.isEmpty()) {
            if(listaIdsDescubiertas.size() > position) {
                imageView.setImageResource(Preferencias.imagenesTodasPequeñas[listaIdsDescubiertas.get(position)]);
            }       
        }
    } else { 
        switch(nivel) {
            case 1:
                imageView.setImageResource(Preferencias.imagenesNivel1[position]);
                break;
            case 2: 
                imageView.setImageResource(Preferencias.imagenesNivel2[position]);
                break;
        }

        if(!listaIdsDescubiertas.isEmpty()) {
            for(Integer pos : listaIdsDescubiertas) {
                if(calcularPosicion(position, nivel) == pos) {
                    imageView.setChecked(true);
                }

            }
        }
    }

    return imageView;
} 
```

一切正常，但问题是，当我开始在屏幕上移动时，我想停止播放的照片中看起来像是品牌，但某些位置的屏幕标记被删除了。然后再次触摸屏幕再次出现。我怎样才能让它永远出现？

我的第二个问题是我生成了一个网格，其中每个图像都是一个名为 TileJuegoMemeria 的类，它扩展了 ImageView。

```
for (int r = 0; r < rows; r++) {
        LinearLayout row = new LinearLayout(this);
        row.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
                LayoutParams.WRAP_CONTENT));
        row.setGravity(Gravity.CENTER);
        for (int c = 0; c < columns; c++) {
            TileJuegoMemoria tile = new TileJuegoMemoria(this, tilebackResource,
                    tilesImagenesRepetidas.get(position), position, sideLength, sideLength);

            tile.setClickable(true);
            tile.setId(position);
            tile.setOnClickListener(tileOnClickListener);

            row.addView(tile);
            position++;
        }
        memoryBoardLayout.addView(row);
    } 
```

我将每个对象添加到侦听器以单击它。Listener 有它的 onClick () 方法，如下所示：

```
tileOnClickListener = new OnClickListener() {

        @Override
        public void onClick(View v) {

            TileJuegoMemoria tempTile = (TileJuegoMemoria) v;

            if (tempTile.getVisibility() == TileJuegoMemoria.INVISIBLE || (!tempTile.isBackVisible)) {
                return;
            }
            int move = gameEngine.doMove(tempTile);
            if (move == -1) {
                return;
            }
            gameEngine.selectedTile = tempTile;
            gameEngine.selectedTile.flipOver();

            if (move == 2) {
                final Handler handler = new Handler();
                Timer t = new Timer();
                t.schedule(new TimerTask() {
                    public void run() {
                        handler.post(new Runnable() {
                            public void run() {             
                                TileJuegoMemoria precedentMoveselectedTile = gameEngine.movesArray[0];

                                if (gameEngine.selectedTile.tileFace.equals(precedentMoveselectedTile.tileFace)) {   
                                    if(eliminarAcertados) {
                                        gameEngine.selectedTile.hide();
                                        precedentMoveselectedTile.hide();
                                    }

                                } else {
                                    gameEngine.selectedTile.flipOver();
                                    precedentMoveselectedTile.flipOver();

                                    turnoJugador1 = !turnoJugador1;

                                }

                                gameEngine.clearMoveArray();
                            }
                        });
                    }
                }, 1000);
            }
        }
};
} 
```

该游戏适用于 2 名玩家，他们轮流玩两个变化的屏幕图像。我的问题是，在轮到玩家 1 之后，它是如何做到的，是计算机点击了两个随机图像。凡想到性别的图像保存在一个列表中，每个图像的坐标到PerformClick()就可以了。我可以做什么？谢谢！

# svn - SVN Log :: 如何通过 grepping 评论中存在的特定模式来提取 svn 日志

> ID：16103170
> 
> 赞同：2
> 
> 时间：2013-04-19T11:05:47.930
> 
> 标签：svn, unix

当开发人员在 svn 中签入代码时，他/她会在评论字段中输入为其交付修复的票号。现在我只想提取这张票#的 svn 日志。谁能告诉我如何修改 svn log 命令，以便我可以获得使用该票签入的所有文件的列表#

PFB 虚拟示例：

```
svn log <svn url>
o/p::

r1000 | author | 2013-04-19 11:48:16

    A abc.txt``
    M def.txtD ``
      pqr.txt``

    ticket#::filescheckedin 
```

现在，如果我 grep `ticket#`，我不会得到在它之下修改的文件的列表。好心劝告。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-05T23:03:52.213

使用 GNU awk 可以很容易地做到这一点：

```
svn log ... | gawk 'BEGIN { RS = "----*\n" }
/ticketnumber/ { print $0 }' 
```

其中ticketnumber 是您要搜索的字符串。

这通过将输入记录分隔符设置为 svn 在日志记录之间打印的破折号行，并且只匹配您想要的记录。

请注意，您需要 gawk 而不是 awk 才能使其工作。

# sql-server - SQL Server：排序规则不区分大小写时的不明确排序顺序

> ID：16103176
> 
> 赞同：4
> 
> 时间：2013-04-19T11:06:01.463
> 
> 标签：sql-server

我在两台计算机上有两个 SQL Server 数据库实例（相同版本）。数据库排序规则设置为**不区分大小写**。例如，我有：表中有 3 条记录`name`。

*SQL Server 实例 1*

```
> select name from table1 order by name

name 
-----
Adam 
adam 
Adam 
```

*SQL Server 实例 2*

```
> select name from table1 order by name

name 
-----
Adam 
Adam 
adam 
```

为什么在同一个 sql server 数据库的两个实例上排序不明确？为什么会这样？什么是排序算法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:30:09.617

如果排序规则不区分大小写，则所有三个值都被明确视为相同，并且无法保证相同有序行的顺序；不可能，因为没有任何决定可以依据，没有“自然”顺序。

观察到的顺序应该被认为是随机的，并且与服务器内部有关，例如读取/缓冲区缓存中可用的数据、IO 队列等。

# windows - 在命令提示符中使用参数调用 exe 文件时在 windows 2008 r2 服务器中出现错误

> ID：16103177
> 
> 赞同：0
> 
> 时间：2013-04-19T11:06:02.273
> 
> 标签：windows, command-line, windows-server-2008, command-line-arguments, command-prompt

我正在调用 .exe 文件并提供目录。该目录包含三个文件，我的 .exe 正在执行这三个文件。在命令提示符下，一切都在我的计算机中完美运行。命令是：c:\myfolder\myexe.exe "c:\users\administrator\desktop\proj"

'proj' 是我的文件夹，其中包含三个文件。

但是当我使用 windows 2008R2 时，这个命令不起作用。Windows 2008 R2 有特殊命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T01:15:36.190

Have you tried to run as administrator? right click and "run as admin", give that a shot and let me know

# c# - 了解 C# 中的调度程序

> ID：16103178
> 
> 赞同：3
> 
> 时间：2013-04-19T11:06:04.477
> 
> 标签：c#

我正在观看有关异步 C# 5 的视频，在示例中他有一个异步方法和一个 lambda 回调函数。由于 lambda 回调函数在单独的线程上执行，因此尝试更改其中的 UI 会导致异常。

为了缓解这种情况，他使用`Dispatcher.RunAsync(...)`

但是我对此感到困惑。我创建了一个新的 .NET 4.5 项目并试图找到 Dispatcher 类，但我无法在任何地方找到它。谷歌告诉我它在 System.Windows.Threading 命名空间中，但我的电脑上没有这个 dll，只有 System.Windows

我也不太明白它是如何工作的 - 查看 MSDN 文档，我无法真正看到 Dispatcher（可能处理所有线程）将如何在 UI 线程上执行操作 - RunAsync 方法没有指定线程该操作执行。

我认为也许调度程序只是在用于创建调度程序的线程上运行东西，但是由于上述问题我无法在本地尝试这个，我很茫然。

谁能指导我解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:21:01.717

您提到的[视频](http://channel9.msdn.com/Events/Build/2012/3-011)是关于使用 Windows 运行时和 .NET Framework 4.5 开发 Windows 应用商店应用程序的，他使用 CoreDispatcher 的[RunAsync](http://msdn.microsoft.com/en-us/library/windows/apps/br208211.aspx)方法，这是新 Windows API 的一部分，位于命名空间 Windows.UI.Core 中。

00:20:21 停下来看看 IntelliSense

# java - ArrayList 访问类中的方法

> ID：16103182
> 
> 赞同：0
> 
> 时间：2013-04-19T11:06:36.927
> 
> 标签：java, class, arraylist

是否可以创建一个包含类的新实例的 ArrayList，然后使用该 ArrayList 访问给定类中的方法？这是一个更清楚的例子：

```
ArrayList<myOtherClassName> myClassObjects= new ArrayList<myOtherClassName>();
myClassObjects.add(new myOtherClassName());
myClassObjects.indexOf(1).methodInOtherClass(); 
```

然而，这行不通！有没有办法实现我想要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:13:06.437

采用：

```
ArrayList<myOtherClassName> class1 = new ArrayList<myOtherClassName>();
class1.add(new myOtherClassName());
class1.get(0).methodInOtherClass(); 
```

你需要：

*   调用 .get() 方法而不是 .indexof()

indexof 方法返回索引，而不是列表中的值/对象。

另外，总是写

```
List<myOtherClassName> class1 = new ArrayList<myOtherClassName>(); 
```

代替

```
ArrayList<myOtherClassName> class1 = new ArrayList<myOtherClassName>(); 
```

ArrayList 是 List 的实现，您应该始终创建接口类型的对象，而不是实现类的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:17:38.630

不要使用类作为变量。

`indexOf()`将返回一个整数。`get()`改为使用

```
ArrayList<myOtherClassName> mylist = new ArrayList<myOtherClassName>();
mylist.add(new myOtherClassName());
mylist.get(0).methodInOtherClass(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:30:22.610

@奥利弗-R ...

```
Try Below Code 

ArrayList<myOtherClassName> myClassObject = new ArrayList<myOtherClassName>();
myClassObject.add(new myOtherClassName());
myClassObject.get(0).methodInOtherClass();

the method methodInOtherClass() return type is void it will not return any thing other 
```

# sharepoint - 按字母顺序对“快速启动”进行排序 - SharePoint 2010

> ID：16103183
> 
> 赞同：1
> 
> 时间：2013-04-19T11:06:37.317
> 
> 标签：sharepoint, sharepoint-2010, quicklaunch

关于 SharePoint 2010 中的“快速启动”面板的快速问题

是否可以从快速启动面板中删除文档库？

是否可以按字母顺序对“快速启动”进行排序？

我已经完成了“外观”选项卡中的设置 - 一定有比手动选择顺序更好的方式来对文档库进行排序吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:38:01.463

您可以通过转到站点操作>站点设置然后导航来执行此操作。您会在导航编辑和排序部分看到，当前导航是快速启动导航。您可以自由删除每一项并使用您想要的链接更改它们。不幸的是，您无法立即按字母顺序排列它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-29T18:03:08.797

要在标题中按字母顺序对左侧导航进行排序（至少在 SP 2010 中）：

1.  单击**站点操作 > 站点设置**。
2.  在**外观**下，单击**导航**。
3.  在**排序**部分中，单击**自动排序**。将出现**自动排序**部分。
4.  在“**自动排序**”部分中，设置所需的排序选项。
5.  单击**确定**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T17:44:09.137

相信我，您可以通过重新排列数字来对它们进行排序。请按照以下步骤操作：站点操作 - 站点设置 - 快速启动 - 在页面顶部的菜单中选择更改顺序。

在那里，您也可以对您想要的列表顺序进行编号。

# mysql - 使用 JOIN 的 SQL 删除语句

> ID：16103184
> 
> 赞同：0
> 
> 时间：2013-04-19T11:06:37.823
> 
> 标签：mysql

我需要从基于 JOIN 的 MySQL 表中删除行。

表 1 - 球员

```
id      gang
--------------
1       5
2       8
3       0 
```

表 2 - 行动

```
id      player
----------------
1       2
2       1 
```

我需要（伪代码）

```
DELETE FROM 'actions' WHERE player=(SELECT id FROM players WHERE gang=5) 
```

所以它检查动作表，如果它找到一个在 gang 5 中的玩家，它会删除该条目。

对不起，如果我没有意义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:08:26.830

试试这个，

```
DELETE  a
FROM    Actions a
        INNER JOIN Players b
            ON a.player = b.ID
WHERE   b.gang = 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:12:31.340

```
DELETE FROM 'actions' WHERE player IN (SELECT id FROM players WHERE gang=5) 
```

# c# - 在c#中将时间戳字符串转换为DateTime对象

> ID：16103186
> 
> 赞同：5
> 
> 时间：2013-04-19T11:06:40.423
> 
> 标签：c#, datetime, windows-phone-8

我有以下格式的时间戳字符串`5/1/2012 3:38:27 PM`。如何在 c# 中将其转换为 DateTime 对象

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T11:14:45.130

```
var date = DateTime.ParseExact("5/1/2012 3:38:27 PM", 
    "M/d/yyyy h:mm:ss tt",
    CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-19T11:09:28.463

您输入的字符串看起来像`en-us`格式，即`M/d/yyyy h/mm/ss tt`. 解析时必须使用正确的`CultureInfo`实例：

```
var ci = System.Globalization.CultureInfo.GetCultureInfo("en-us");

var value = DateTime.Parse("5/1/2012 3:38:27 PM", ci); 
```

或者

```
var ci = new System.Globalization.CultureInfo("en-us"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-19T11:17:25.110

尝试使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)类似的方法；

```
string s = "5/1/2012 3:38:27 PM";
DateTime date = DateTime.ParseExact(s, "M/d/yyyy h:mm:ss tt", CultureInfo.InvariantCulture);
Console.WriteLine(date); 
```

> 使用指定的格式和特定​​于区域性的格式信息将日期和时间的指定字符串表示形式转换为其等效的 DateTime。**字符串表示的格式必须与指定的格式完全匹配。**

输出将是；

```
01.05.2012 15:38:27 
```

***请注意***，此输出可能会根据您使用的文化而改变。由于 my`Culture`is`tr-TR`，日期运算符是`.`我们的文化。

这是一个[`DEMO`](http://ideone.com/Jixshl).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T11:07:14.140

尝试[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T11:45:14.057

[http://www.codeproject.com/Articles/14743/Easy-String-to-DateTime-DateTime-to-String-and-For](http://www.codeproject.com/Articles/14743/Easy-String-to-DateTime-DateTime-to-String-and-For)
这可能对你有帮助。在那里您可以找到 ParseExact 参数的详细说明。

# python - 函数不会从“for”循环返回所有结果

> ID：16103187
> 
> 赞同：4
> 
> 时间：2013-04-19T11:06:43.420
> 
> 标签：python, for-loop

我制作了一个简单的函数，可以根据您决定使用的数字打印出时间表图表。由于我对语言的基本理解，我遇到的问题是为什么它只返回第一个循环而不返回其他任何内容。

```
def timestables(number):
  for a in range(1, number+1):
    b = a*a
    c = a
    return (str(c) + " * " + str(c) + " = " + str(b))

print(timestables(5)) 
```

我得到答案..

```
1 * 1 = 1 
```

我试图通过使用 print 而不是 return 来纠正这个问题，但这最终也会导致出现 None 。

```
def timestables(number):
  for a in range(1, number+1):
    b = a*a
    c = a
    print (str(c) + " * " + str(c) + " = " + str(b))

print(timestables(5)) 
```

我得到答案..

```
1 * 1 = 1
2 * 2 = 4
3 * 3 = 9
4 * 4 = 16
5 * 5 = 25
None 
```

如何从 for 循环返回所有给定结果以避免出现 None 错误？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-19T11:11:44.037

[`yield`](http://wiki.python.org/moin/Generators)他们。

```
def timestables(number):
  for a in range(1, number+1):
    yield '%s + %s = %s' % (a, a, a*a )

for x in timestables(5):
  print x 
```

这会将您的函数变成生成器函数，并且您需要对结果进行迭代，即结果不是列表，而是可迭代的。

如果您需要一个列表，最简单的方法是显式创建一个：

```
res = list(timestables(5)) 
```

但同样，如果你不这样做，你就不会。

恕我直言，这是最pythonic的方式。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-19T11:08:35.347

您正在循环`return`中`for`- 函数一旦遇到`return`语句就会立即停止执行。

要解决此问题，您可以使用列表来存储这些值，然后返回该列表。

```
def timestables(number):
    lst = []
    for a in range(1, number+1):
        b = a*a
        c = a
        lst.append(str(c) + " * " + str(c) + " = " + str(b))
    return lst 
```

作为旁注，您应该使用[*字符串格式*](http://docs.python.org/2/library/string.html#formatstrings)来构建字符串，就像这样。

```
lst.append('{a} * {a} = {b}'.format(a=a, b=a*a)) 
```

现在我们可以摆脱所有这些中间变量（`b`和`c`），而可以使用[*列表*](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)推导式。

```
def timestables(number):
    return ['{a} * {a} = {b}'.format(a=a, b=a*a) for a in range(1, number+1)] 
```

如果您不希望该函数返回一个列表，而是一个多行字符串，您可以使用[`str.join`](http://docs.python.org/2/library/stdtypes.html#str.join)：

```
def timestables(number):
    return '\n'.join('{a} * {a} = {b}'.format(a=a, b=a*a) for a in range(1, number+1)) 
```

现在我们可以测试这个功能：

```
>>> print(timestables(5))
1 * 1 = 1
2 * 2 = 4
3 * 3 = 9
4 * 4 = 16
5 * 5 = 25 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:10:43.023

您可以返回一个数组：

```
def timestables(number):
    out = []
    for a in range(1, number+1):
        b = a*a
        c = a
        out.append( str(c) + " * " + str(c) + " = " + str(b))

    return out
print(timestables(5)) 
```

# mongodb - MongoDB FindAndModify 极慢

> ID：16103193
> 
> 赞同：3
> 
> 时间：2013-04-19T11:06:52.490
> 
> 标签：mongodb, spring-data, spring-data-mongodb, findandmodify

我正在使用 mongodb 并且在速度方面遇到了一些问题。我的收藏变得更大，现在包含大约 7.000.000 件物品。因此，findAndModify 查询大约需要 3 秒。我在查询字段上有一个索引（在我的例子中是“链接”，它是一个数组）。有没有人看到一个大失败或低效的代码（见下文）。

```
public Cluster findAndLockWithUpsert(String url, String lockid) {
   Query query = Query.query(Criteria.where("links").in(Arrays.asList(url)));
   Update update = new Update().push("lock", lockid).push("links", url);
   FindAndModifyOptions options = new FindAndModifyOptions();
   options.remove(false);
   options.returnNew(true);
   options.upsert(true);
   Cluster result = mongo.findAndModify(query, update, options, Cluster.class, COLLECTION);

   return result;
} 
```

先感谢您！

# windows-phone-8 - 应用内购买正在创建错误

> ID：16103194
> 
> 赞同：0
> 
> 时间：2013-04-19T11:06:54.073
> 
> 标签：windows-phone-8, in-app-purchase

我正在创建一个应用程序，该应用程序需要添加应用程序内购买选项来购买选定的视频，并在购买时发送请求以将其下载到带有收据的其他服务器上；我正在尝试使用以下代码获取可用选项列表 -

```
try
{
    ListingInformation ProdList = await CurrentApp.LoadListingInformationAsync();
    lbProductsList.Items.Clear();
    string t = "";

    foreach (var item in ProdList.ProductListings)
    {
        t = string.Format("{0}, {1}, {2},{3}, {4}",
                            item.Key,
                            item.Value.Name,
                            item.Value.FormattedPrice,
                            item.Value.ProductType,
                            item.Value.Description);

        lbProductsList.Items.Insert(0, t);
    }
}
catch (Exception ex)
{
    MessageBox.Show("Error: " + ex.Message);

} 
```

代码行-ListingInformation ProdList = await CurrentApp.LoadListingInformationAsync(); 它的创建问题和控制转到显示错误消息的捕获块 -

> 显式事务已被强制取消。（来自 HRESULT 的异常：0x8032000F）

并且在使用已注册的产品 ID 时，它会显示错误的错误--

```
System.Exception: Exception from HRESULT: 0x805A0194 
```

在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess（任务任务） 在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification（任务任务） 在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult() 在 IAP.MainPage.d__1.MoveNext ()

请任何人告诉它有什么问题。我正在使用注册的 App Id 来加载信息，但不能

任何帮助对我都有好处。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T21:39:32.270

您可以使用 DevCenter 发布的应用程序 guid 中的 guid 检查 WMAppManifest.xml 文件中的应用程序 guid 吗？如果没有，请确保您应该使用 devcenter 的 guid 更新您的 WMAppManifest.xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T01:54:28.397

您是否在开发中心中创建了与您的应用相关的任何应用内产品？确保产品 ID 与 Dev Center 中引用这些应用内产品的主应用的产品 ID 匹配。0x805A0194 是如果应用程序无法获取与应用程序关联的产品并且您有互联网连接时您将遇到的异常错误之一。

# windows-phone-8 - 如何在 Windows Phone 8 上使用保留的 URI 方案“xbls:”？

> ID：16103195
> 
> 赞同：0
> 
> 时间：2013-04-19T11:06:58.137
> 
> 标签：windows-phone-8

我想使用保留的URI方案“xbls：”（如下）来启动Xbox游戏页面，但它只显示一个黑屏，什么都没有，你能告诉我为什么吗？

```
await Launcher.LaunchUriAsync(new Uri("xbls:")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T05:51:21.707

您是否要覆盖 xbls url 方案？如果是这样，那是不可能的。因为我们不能为我们自己的应用程序使用保留的 URL 方案。

如果您想在此处使用该 URL 方案打开游戏，那么这里是该方案。xbls://game/?gameid=[GAME_ID]

示例 URL xbls://game/?gameid=474607D1

我从这个链接[http://windowsphone.xbox.com/en-IN/MOW/gamesloft_publisher_sale_2013_8得到了这个 URL 选项](http://windowsphone.xbox.com/en-IN/MOW/gamesloft_publisher_sale_2013_8)

我不知道如何获得 GAME_ID。

# c++ - g 编译器错误与地图 ::迭代器

> ID：16103201
> 
> 赞同：0
> 
> 时间：2013-04-19T11:07:16.460
> 
> 标签：c++, g++

使用 Visual Studio 2012 时，以下代码编译没有错误（T 是模板参数）：

```
pair<map<T, int>::iterator, bool> ret; 
```

但是，当我使用 g++ 时，它会抛出错误消息

```
error: type/value mismatch at argument 1 in template parameter list for template<class _T1, class _T2> struct std::pair 
```

由于某种原因，它不能识别`map<T, int>::iterator`为一种类型。我应该如何为 g++ 解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T11:09:55.970

您需要告诉编译器限定的 id`map<T, int>::iterator`确实是一种类型（*它可以是静态成员*）

```
pair<typename map<T, int>::iterator, bool> ret;
     ^^^^^^^^ 
```

似乎VS总是~~比~~g ++~~做得更好。~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:11:32.100

默认情况下假定从属名称不是类型，除非您明确说明。

使用它来做到这一点：

```
typename map<T, int>::iterator 
```

# c# - C# 错误，执行存储过程，存储过程不可用

> ID：16103208
> 
> 赞同：1
> 
> 时间：2013-04-19T11:07:44.553
> 
> 标签：c#, mysql, stored-procedures

我有一个问题，我在我的 MySQL 数据库中存储了一个名为 sp_insertSupplier 的过程。此方法在 mysql 数据库中执行时有效。

我在保存按钮中使用了这个语法

```
private void btn_supplier_save_Click(object sender, EventArgs e)
{
    string connections = Connection.mysqlconnectionbuilder();
    using (MySqlConnection conn = new MySqlConnection(connections))
    {
        using (MySqlCommand cmd = new MySqlCommand()) 
        {
            //make connection
            cmd.Connection = conn;
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "call sp_insertSupplier(@KD,@NM,@AL,@EM,@TLP);";
            cmd.Parameters.AddWithValue("@KD", createCode()); 
            cmd.Parameters.AddWithValue("@NM", txtsuppliernama.Text); 
            cmd.Parameters.AddWithValue("@AL", txtsupplieralamat.Text); 
            cmd.Parameters.AddWithValue("@EM", txtsupplieremail.Text); 
            cmd.Parameters.AddWithValue("@TLP",txtsuppliernotelp.Text);
            try
            {
                conn.Open();
                int result = cmd.ExecuteNonQuery();
                //check the result status
                if (result.Equals(1))
                {
                    DialogResult results = MessageBox.Show("Data berhasil ditambahkan! \n Apakah anda ingin input data lainnya? ", "Sukses!", MessageBoxButtons.OKCancel);
                    //cek apabila ingin menambahkan data lagi.
                    if (results.Equals(DialogResult.OK))
                    {
                        reset();
                    }
                    else if (results.Equals(DialogResult.Cancel))
                    {
                        this.Close();
                    }
                }
            } //end TRY
            catch (Exception exe)
                {
                    MessageBox.Show("Terjadi Kesalahan", "Perhatian!", MessageBoxButtons.OK, MessageBoxIcon.Error);
                    StreamWriter _writer = new StreamWriter("E899911823.log");
                    _writer.WriteLine(exe.ToString());
                    Console.WriteLine(exe.ToString());
                } //END CATCH
            finally 
                {
                    conn.Clone();
                } //END FINALLY
        }
    }
} 
```

但是，当我执行语法时，它显示一个错误：

```
MySql.Data.MySqlClient.MySqlException (0x80004005): Procedure or function '`call sp_insertSupplier(@KD,@NM,@AL,@EM,@TLP)`' cannot be found in database XXXXX 
```

我认为连接管理器或创建@KD 的随机方法没有任何问题。

我仍然有同样的问题，控制台显示：

```
MySql.Data.MySqlClient.MySqlException (0x80004005): Procedure or function '`call sp_insertSupplier`' cannot be found in database '`XXXXX`'.
at MySql.Data.MySqlClient.ProcedureCache.GetProcData(MySqlConnection connection, String spName)
at MySql.Data.MySqlClient.ProcedureCache.AddNew(MySqlConnection connection, String spName)
at MySql.Data.MySqlClient.ProcedureCache.GetProcedure(MySqlConnection conn, String spName, String cacheKey)
at MySql.Data.MySqlClient.StoredProcedure.GetParameters(String procName, DataTable& proceduresTable, DataTable& parametersTable)
at MySql.Data.MySqlClient.StoredProcedure.CheckParameters(String spName)
at MySql.Data.MySqlClient.StoredProcedure.Resolve(Boolean preparing)
at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()
at SerbaManisInventory.SupplierAdd.btn_supplier_save_Click(Object sender, EventArgs e) 
```

我只是重写代码，使代码如下：

```
using (MySqlCommand cmd = new MySqlCommand()) 
{
    cmd.Connection = conn;
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.CommandText = "call sp_insertSupplier";
    cmd.Parameters.AddWithValue("@KD", createCode()); 
    cmd.Parameters.AddWithValue("@NM", txtsuppliernama.Text);
    cmd.Parameters.AddWithValue("@AL", txtsupplieralamat.Text); 
    cmd.Parameters.AddWithValue("@EM", txtsupplieremail.Text);
    cmd.Parameters.AddWithValue("@TLP",txtsuppliernotelp.Text); 
    try
        {
            ... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-22T00:14:31.217

确保您的数据库名称在连接字符串中全部使用小写字母！我也遇到了这个错误，并通过使用[这个错误报告](http://bugs.mysql.com/bug.php?id=49352)来解决它，将我的数据库名称更改为所有小写字母。似乎这种行为不依赖于目标系统类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:09:21.697

```
cmd.CommandType = CommandType.StoredProcedure;
cmd.CommandText = "call sp_insertSupplier(@KD,@NM,@AL,@EM,@TLP);"; 
```

如果`CommandType`是 a `StoredProcedure`，则无需全部编写。写吧：

```
cmd.CommandText = "sp_insertSupplier"; 
```

并像你一样提供参数。

确实没有命名的过程/函数`call sp_insertSupplier(@KD,@NM,@AL,@EM,@TLP);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T11:09:43.530

只需在 CommandText 中写入存储过程的名称即可

```
 cmd.CommandText = "sp_insertSupplier"; 
```

在您编写 CommandText 的方式中，您强制提供程序搜索名称由“call sp_insertSupplier ......”组成的存储过程，显然没有该名称的过程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T11:23:20.727

只需在命令文本中写入存储过程的名称 cmd.CommandText = "sp_insertSupplier"; 你不需要“呼叫”部分

# javascript - 如何使单选按钮在字段集中水平

> ID：16103213
> 
> 赞同：0
> 
> 时间：2013-04-19T11:07:58.737
> 
> 标签：javascript, jquery, html, css, jquery-mobile

在表单里面我有两个单选按钮，比如

```
 <fieldset data-role="controlgroup">
                <legend>
                    Choose a pet:
                </legend>
                <input type="radio" name="radio-choice-1" id="radio-choice-1" value="choice-1" checked="checked" />
                <label for="radio-choice-1"><img src="../static/images/Dog.png" />Dog</label>

                <input type="radio" name="radio-choice-1" id="radio-choice-2" value="choice-2"  />
                <label for="radio-choice-2"><img src="../static/images/Cat.png" />Cat</label>
            </fieldset> 
```

（我正在使用jquery mobile）。如何使这两个按钮水平而不是垂直（此时狗按钮在猫上方，我需要排成一行）。怎么做横版？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:12:37.530

在字段集中试试这个

```
<fieldset data-role="controlgroup" data-type="horizontal" > 
```

来源[http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-radiobuttons.html](http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-radiobuttons.html)

形成这个站点验证部分**水平单选按钮集**

# angularjs - 微风js createEntity 未定义

> ID：16103214
> 
> 赞同：0
> 
> 时间：2013-04-19T11:08:04.307
> 
> 标签：angularjs, breeze, angularjs-directive

在 AngularJS 指令中，我为范围变量分配了一个新值：

```
$scope.myPerson = { TiersId: 105191, Name: "John Smith" }; 
```

最初 $scope.myPerson 是从 BreezeJS 实体创建的。

分配新值会触发 AngularJS 的 $scope.apply()，然后被 BreezeJS 拦截。那是它变得复杂的时候。

**[编辑]**

好的，我发现我需要使用我在 dataContext 中注册的 EntityManager：

```
$scope.myPerson =  myDataContext.createPerson({ TiersId: 105191, Name: "John Smith" });

  function createPerson(person) {
        return manager.createEntity("AccountOwner", person);
  } 
```

现在，它在以下代码中失败：

```
 proto.createEntity = function (typeName, initialValues, entityState) {
    entityState = entityState || EntityState.Added;
    var entity = this.metadataStore
        ._getEntityType(typeName)
        .createEntity(initialValues);
    if (entityState !== EntityState.Detached) {
        this.attachEntity(entity, entityState);
    }
    return entity;
}; 
```

实体类型是已知的，但 createEntity(initialValues) 函数未定义。怎么来的 ？

**[编辑]**

为了让事情更清楚，这里是相关的 EF 映射以及模型类：

```
public class MandateMappings : EntityTypeConfiguration<Mandate>
{
    public MandateMappings()
    {
        Property(m => m.IBAN).HasMaxLength(34).IsFixedLength().IsUnicode(false);

        Property(m => m.AccountOwner.Name).HasMaxLength(70);  
        Property(m => m.AccountOwner.City).HasMaxLength(500); 

        Property(m => m.CreatedBy).HasMaxLength(30);
        Property(m => m.UpdatedBy).HasMaxLength(30);
    }
}

public class Mandate : Audit
{  
    public string IBAN { get; set; }

    public AccountOwner AccountOwner { get; set; }

}

public class AccountOwner
{
    public string Name { get; set; }
    public string City { get; set; }
}

public abstract class Audit
{
    public DateTime CreatedDate { get; set; }
    public string CreatedBy { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:31:53.563

## 编辑：从 v 1.3.1 起，Breeze 现在支持继承。

如果没有更多上下文，我无法确定，但我猜问题是 Breeze 还没有关于您的 entityType 的元数据。通常这是通过您的第一个查询完成的，但如果您在第一个查询之前创建实体，那么替代方法是在执行任何 createEntity 调用之前调用*EntityManager.fetchMetadata()方法。*fetchMetadata方法是异步的，即返回一个promise，因此您需要在promise 的'then' 部分内执行createEntity 调用*。*最近还有其他一些与此类似的“微风”帖子，其中包含更多详细信息和示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:36:06.870

让我澄清一下我[在 User Voice](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/suggestions/3083057-support-inheritence-in-the-object-model)上说 Breeze 支持一种继承形式但不支持“数据库继承”时的意思。

**我的意思是，今天，当且仅当该链对客户端不可见时，**服务器端的类才能成为继承链的一部分。

以下是与该警告一致的一些条件：

*   只有链中的“终端”类（最派生类）映射到数据库表。

*   超类的属性是非公开的（例如，内部的）或显式未映射的（例如，用`[System.ComponentModel.DataAnnotations.Schema.NotMapped]`.

*   方法可能出现在任何级别的任何类中，因为它们永远不会传输给客户端。

下面是一个`TodoItem`继承自 a 的类的示例`baseClass`：

```
公共类基类
{
    公共无效 DoNothing() {}
    内部字符串 Foo { get; 放; }
}
公共类 TodoItem :baseClass
{
    公共 int ID { 获取；放; }                   

    [必需，字符串长度（最大长度：30）]   
    公共字符串描述 { 获取；放; }       

    公共 System.DateTime CreatedAt { get; 放; }
    公共布尔 IsDone { 得到；放; }              
    公共布尔 IsArchived { 获取；放; }          
}

```

这在服务器上工作正常。在控制器中设置断点：执行`DoNothing()`和获取/设置`Foo`属性将毫无问题。

这是可行的，因为**这种结构没有客户端结果**。派生后的元数据与`baseClass`以前没有什么不同。`Foo`属性和`DoNothing`方法对客户端是不可见的……完全符合此**服务作者**的意图。

这种安排在现实世界中非常常见，其中业务模型的许多类通过基类共享功能。

**这不是故事的结局，也不是​​我们认为人们要求“继承”时所要求的。**

我们认为人们想要我所说的“数据库继承”，我的意思是继承链中的两个或多个类映射到不同的表。

Breeze 今天还没有处理这个问题……部分原因是 Breeze 还不能理解描述继承层次结构的元数据。

### 解决方法

如果您有一个类层次结构，其中数据属性定义在不同的类级别上怎么办？您可以通过提供从客户端的角度扁平化层次结构的元数据描述来解决当前的障碍。

例如，假设您有一个`Person`带有`FirstName`and的类型`LastName`。并`Person`派生自`entityBase`其中定义`createdBy`。

如果您将*Person* *EntityType* 定义为具有 [ `FirstName`、`LastName`和`createdBy`] 属性 - 本质上是扁平化层次结构 - 一切都会好起来的。

### 自动展平层次结构

当然，这是一个 PITA。我们可以采用的一种继承方法是，当您要求 Breeze 在服务器上生成元数据时，为您执行此扁平化。

我很好奇：这就够了吗？或者您真的需要在 JavaScript 客户端上知道该`createdBy`属性属于基类。如果你真的需要知道，请告诉我为什么。

# java - 如何减慢缓冲区发送java的速度

> ID：16103215
> 
> 赞同：0
> 
> 时间：2013-04-19T11:08:04.853
> 
> 标签：java, sockets, tcp, buffer, java-server

我有一台服务器，出于某些原因和实验，我想减慢它的速度

```
long length = fileToSend.length();
            byte [] longBytes = new byte[8];
            ByteBuffer bbuffer = ByteBuffer.wrap(longBytes);
            bbuffer.putLong(length);
            connectionSocket.getOutputStream().write(longBytes);

            BufferedOutputStream bout = new BufferedOutputStream(connectionSocket.getOutputStream());
            BufferedInputStream bain = new BufferedInputStream(new FileInputStream(fileToSend));

            byte buffer [] = new byte [1024];
            int i = 0;
            while((i = bain.read(buffer, 0, 1024)) >= 0){

                bout.write(buffer, 0, i);

            }
            System.out.println("chunk sended");
            bout.close();
            bain.close(); 
```

我有一些想法使用线程睡眠之类的东西！但我现在不知道它是否足够和好的解决方案！有人可以指导我如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:22:15.237

使用 thread.sleep(0.500); 似乎工作正常！但是还有其他好的解决方案来测试它吗？或者其他东西可能会更好？

# android - Android IAB V3 查询拥有的项目返回正数，但使用返回项目不拥有

> ID：16103223
> 
> 赞同：2
> 
> 时间：2013-04-19T11:08:47.487
> 
> 标签：android, in-app-billing

我在我的应用程序中使用了 android IAB V3。在购买和消费物品后立即查询拥有的物品时，IABHelper 返回我仍然拥有该物品。但是在调用消费时，它会返回该项目不属于自己。我在下面给出我的 logcat 输出。

```
04-19 15:57:43.668: D/IabHelper(2757): Starting async operation: refresh inventory
04-19 15:57:43.678: D/IabHelper(2757): Querying owned items...
04-19 15:57:43.688: D/IabHelper(2757): Package name: com.games.mygame
04-19 15:57:43.688: D/IabHelper(2757): Calling getPurchases with continuation token: null
04-19 15:57:43.728: D/IabHelper(2757): Owned items response: 0
04-19 15:57:43.758: D/IabHelper(2757): Sku is owned: com.games.pack1
04-19 15:57:43.768: D/IabHelper(2757): Continuation token: null
04-19 15:57:43.768: D/IabHelper(2757): Querying SKU details.
04-19 15:57:43.838: D/IabHelper(2757): Got sku details: SkuDetails:{"title":"Coin Pack 1 (My Game)","price":"Rs. 105.69","type":"inapp","description":"Pack of 50000 coins.","productId":"com.games.pack1"}
04-19 15:57:43.838: D/IabHelper(2757): Ending async operation: refresh inventory
04-19 15:57:46.931: D/IabHelper(2757): Ending async operation: 
04-19 15:57:46.931: D/IabHelper(2757): Starting async operation: consume
04-19 15:57:46.931: D/IabHelper(2757): Consuming sku: com.games.pack1, token: wykaaffjpwmehhfdkgmzsbpb.AO-J1OxWZjidethjntgfks3C1tpo6TfiMgWyAc8ycTZWsr7UcaHidKIFRaH-K6L_aa2SYGFc3mq8kLBVajj3mtXQcw8oy8-GAT8aSBLJA_aP3AsnjEKSQ1Ot0OqTBDKJWRduiz
04-19 15:57:47.642: D/IabHelper(2757): Error consuming consuming sku com.games.pack1\. 8:Item not owned
04-19 15:57:47.642: D/IabHelper(2757): Ending async operation: consume 
```

我必须等待几分钟才能再次购买此商品。这是因为谷歌播放的本地缓存。有没有人遇到过这个问题。谁能告诉我可能出了什么问题以及如何解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T04:29:23.237

答案在应用内计费文档 [http://developer.android.com/google/play/billing/api.html#consume](http://developer.android.com/google/play/billing/api.html#consume)

这是由本地缓存引起的。由于 Google Play 客户端现在在设备本地缓存应用内结算信息，因此您可以使用版本 3 API 更频繁地查询此信息，例如通过 getPurchases 调用。与以前版本的 API 不同，许多第 3 版 API 调用将通过缓存查找而不是通过与 Google Play 的网络连接来提供服务，这显着加快了 API 的响应时间。这就是为什么他们建议根据消费功能的响应而不是根据拥有的物品来奖励购买的物品。

# java - 包含逗号输入到 csv 文件的字符串

> ID：16103224
> 
> 赞同：8
> 
> 时间：2013-04-19T11:08:52.600
> 
> 标签：java, csv

我正在尝试输入 csv 文件。
我的输入如下所示
String string="hi,this is user";
但是当我输入 csv 文件时，逗号被视为分隔符，它被写入两个单元格。一个单元格中的“hi”和另一个单元格中的“this is user”。
但我希望整个字符串都在一个单元格中。
我怎样才能做到这一点。
请帮我。

```
FileWriter writer = new FileWriter("D:/Workspace/Sample2.csv");
PrintWriter out = new PrintWriter(writer);

String names="[hasds,jash.jahd,jash]";
    out.append(names);
    out.flush();
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-19T11:11:50.367

由于您正在编写一个`csv`带有`comma`分隔符的文件，并且您的文本也恰好包含`comma`在其中，因此您需要将文本包含在**双引号**中。

```
String names = "\"hi,this is user\""; 
```

**请注意**，要将文本包含在双引号中，您还需要转义双引号！

**更新：-**一个示例代码片段，用于将您的字符串包含在双引号中。

```
public static void main(String[] args) {

    String test = "abcd";
    System.out.println(test); // prints abcd
    test = appendDQ(test);
    System.out.println(test); // prints "abcd"

}

private static String appendDQ(String str) {
    return "\"" + str + "\"";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:32:56.947

您必须确保正确转义数据。逗号和双引号需要特殊处理。我强烈建议使用库来处理为您正确转义 csv 数据的所有细节。看看[opencsv](http://opencsv.sourceforge.net/)。

# android - 在android中创建自定义后退按钮

> ID：16103225
> 
> 赞同：6
> 
> 时间：2013-04-19T11:08:57.373
> 
> 标签：android, android-ui, android-button

我有一个具有菜单的应用程序，根据您在菜单中按下的按钮，会打开一个新活动。我想在每个屏幕上都有一个后退按钮，可以将您带到上一个屏幕，所以我想知道我该怎么做？

这是我使用的一些有效的代码：

```
backButton = (ImageButton) findViewById(R.id.back_button);
        backButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                finish();

            }
        }); 
```

然而，将这段代码放在我所有的活动中对我来说并不是一个好的编程习惯。如何创建某种堆栈来保存所有查看过的页面并使用它返回上一页？

我必须在我的应用程序中放置一个后退按钮，所以我不能使用 ActionBar 中的现有按钮。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T11:14:35.100

只是一个想法

创建一个扩展 Activity 的 baseClass。在那里声明

```
 @Override
    public void onClick(View v) {
         super.onBackPressed(); // or super.finish();
    } 
```

在所有活动中扩展这个基类。并在按钮的每个布局中放置

```
 android:onClick="onClick" 
```

为了使按钮的 xml 设计可重用，请在单独的 xml 中创建它。并使用添加它`<include/>`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-19T11:16:48.953

您是否尝试过在活动中使用操作栏？在每一个活动中使用

```
ActionBar actionBar = getSupportActionBar();
if(actionBar != null){
    actionBar.setTitle(getResources().getString(R.string.app_name));
    actionBar.setDisplayHomeAsUpEnabled(true);
    actionBar.setIcon(R.drawable.app_icon);
} 
```

并处理

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            finish();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-19T11:40:01.197

I would suggest against having a custom back button. Android has a hardware back button. Pressing the haradware back button will navigate to the previous.

I don't think you need a custom back button. I don't think its a good programming practice to override the default behaviour.

You create a backbutton in your activity and implementing the functionality as you have done above. Still the user can use the hardware back button for the same functionality. So you would be providing the same functionality which is redundant.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T11:15:10.927

所有 android 设备上都有一个硬件后退按钮，它完全按照您的代码行执行，除非被覆盖以执行其他操作。

你也可以参考[这个答案](https://stackoverflow.com/a/3190973/1882855)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-17T21:09:40.380

我在使用后退按钮“取消”和主屏幕“homeActivity”时遇到了类似的问题。我最终用这个解决了它：

```
CancelButton = (Button) findViewById(R.id.cancel_button);
        CancelButton.setOnClickListener(new OnClickListener() {

             public void onClick(View view) {
                 Intent homeActivity = new Intent(getApplicationContext(), DeviceListActivity.class);

                 startActivity(homeActivity);
                 finish();  
            }
        }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-08T11:44:46.487

在科特林

```
 backButton!!.setOnClickListener(View.OnClickListener {
 onBackPressed()
  }) 
```

# android - 删除 GridView 上的 FadingEdge。安卓蜂窝

> ID：16103226
> 
> 赞同：2
> 
> 时间：2013-04-19T11:08:59.717
> 
> 标签：android, android-layout, gridview, android-3.0-honeycomb

我需要从我的网格视图中删除褪色边缘。我做了一些研究，目前下面是我的 gridview 的样子，问题是没有任何效果。有什么方法可以禁用/删除/隐藏褪色边缘？

```
 <GridView
        android:id="@+id/shop_grid_cart_items"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#C4C4C4"
        android:fadingEdge="none"
        android:fadingEdgeLength="0px"
        android:numColumns="1"
        android:overScrollMode="never"
        android:padding="20dp"
        android:scrollbarStyle="outsideInset"
        android:verticalSpacing="3dip"
        android:requiresFadingEdge="none"  
        android:cacheColorHint="@android:color/transparent"          
        tools:listitem="@layout/shop_cart_grid_item" /> 
```

创建视图： `cartItems.setVerticalFadingEdgeEnabled(false);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-19T06:49:25.830

你可以试试这个：

安卓：overScrollMode="从不"

还有这里的答案： [有没有办法禁用/编辑列表视图边缘的褪色？](https://stackoverflow.com/questions/4130461/is-there-a-way-to-disable-edit-the-fading-that-a-list-view-has-at-its-edges)

# javascript - 如何找到被调用的函数？

> ID：16103233
> 
> 赞同：1
> 
> 时间：2013-04-19T11:09:23.107
> 
> 标签：javascript, google-chrome-devtools, ace-editor

我正在尝试编辑 ace 编辑器。

例如，当我键入时`>`，它会自动在 html 模式中放置`</element>`一个`>`。

我通过查看 JS 发现是这个函数`var HtmlBehaviour = function () {...`

现在我如何找到这个行为的 te 函数？

-当我们输入一个单词，并且当前行的空间不足时，整个单词被移到下一行。如何使用 chrome 调试器找到行尾新字符的键盘事件触发的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:08:27.767

您可以为 keyup 事件设置事件侦听器断点并跟踪代码以找到您正在寻找的功能/行为。

![事件监听器断点](https://i.stack.imgur.com/9w9kO.png)

# java - Java switch 双重重复的情况

> ID：16103236
> 
> 赞同：6
> 
> 时间：2013-04-19T11:09:29.420
> 
> 标签：java, switch-statement

我正在用java创建一个国际象棋游戏。

如您所知，当您开始国际象棋游戏时，每个“队长”都有两个（抱歉，我不确定这个术语是什么）我创建了以下开关盒来创建图形的图形布局：

```
 switch (j) {
            case 1 || 8 : Rook tower = new Rook(""); return tower.getBrik();
            case 2 || 7 :
            case 3 || 6 : Bishop bishop = new Bishop(""); return bishop.getBrik();
            case 4      : King king = new King(""); return king.getBrik();
            case 5      : Queen queen = new Queen(""); return queen.getBrik();
 } 
```

其中 getBrik() 方法是一个返回图像视图的节点。

现在你可以看到我的案例 2 和 3 是我尝试将两个案例合二为一的失败尝试。

这甚至可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-19T11:12:16.350

由于*失败*（执行继续到下`case`一条语句，除非你把 a`break;`放在最后，或者当然，就像你的情况一样， a `return`），你可以把这些案例放在一起：

```
...
case 1:
case 8:
    Rook tower = new Rook("");
    return tower.getBrik();
case 3:
case 6:
    Bishop bishop = new Bishop("");
    return bishop.getBrik();
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:26:55.167

我假设您尝试通过放置 || 进行 OR，但在 switch case 语句中您不能使用此运算符。因此，您只需使用 if

```
if(j==1 || j==8){
 Rook tower = new Rook("");
            return tower.getBrik();
}else if(j==2 ||j==7 || j==6 || j==7){

Bishop bishop = new Bishop("");
            return bishop.getBrik();
}
.
.
. 
```

# python - Pandas Timedelta 以天为单位

> ID：16103238
> 
> 赞同：52
> 
> 时间：2013-04-19T11:09:34.510
> 
> 标签：python, numpy, timestamp, pandas

我在 pandas 中有一个名为“munged_data”的数据框，其中包含两列“entry_date”和“dob”，我已使用 pd.to_timestamp 将其转换为时间戳。我试图弄清楚如何根据“之间的时间差”计算人的年龄entry_date' 和 'dob' 并且要做到这一点，我需要得到两列之间的天数差异（这样我就可以像 round(days/365.25) 一样做一些事情。我似乎无法找到一种方法使用矢量化操作执行此操作。当我执行 munged_data.entry_date-munged_data.dob 时，我得到以下信息：

```
internal_quote_id
2                    15685977 days, 23:54:30.457856
3                    11651985 days, 23:49:15.359744
4                     9491988 days, 23:39:55.621376
7                     11907004 days, 0:10:30.196224
9                    15282164 days, 23:30:30.196224
15                  15282227 days, 23:50:40.261632 
```

但是，我似乎无法将天数提取为整数，以便我可以继续计算。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2015-03-06T13:50:33.917

使用自 v0.15.0 起可用的 Pandas 类型[`Timedelta`](http://pandas.pydata.org/pandas-docs/dev/timedeltas.html)，您还可以执行以下操作：

```
In[1]: import pandas as pd
In[2]: df = pd.DataFrame([ pd.Timestamp('20150111'), 
                           pd.Timestamp('20150301') ], columns=['date'])
In[3]: df['today'] = pd.Timestamp('20150315')
In[4]: df
Out[4]: 
        date      today
0 2015-01-11 2015-03-15
1 2015-03-01 2015-03-15

In[5]: (df['today'] - df['date']).dt.days
Out[5]: 
0    63
1    14
dtype: int64 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-19T12:26:04.357

你需要 0.11 （0.11rc1 出来了，下周最后的问题）

```
In [9]: df = DataFrame([ Timestamp('20010101'), Timestamp('20040601') ])

In [10]: df
Out[10]: 
                    0
0 2001-01-01 00:00:00
1 2004-06-01 00:00:00

In [11]: df = DataFrame([ Timestamp('20010101'), 
                          Timestamp('20040601') ],columns=['age'])

In [12]: df
Out[12]: 
                  age
0 2001-01-01 00:00:00
1 2004-06-01 00:00:00

In [13]: df['today'] = Timestamp('20130419')

In [14]: df['diff'] = df['today']-df['age']

In [16]: df['years'] = df['diff'].apply(lambda x: float(x.item().days)/365)

In [17]: df
Out[17]: 
                  age               today                diff      years
0 2001-01-01 00:00:00 2013-04-19 00:00:00 4491 days, 00:00:00  12.304110
1 2004-06-01 00:00:00 2013-04-19 00:00:00 3244 days, 00:00:00   8.887671 
```

你最后需要这个奇怪的应用程序，因为还没有完全支持 timedelta64[ns] 标量（例如，我们现在如何使用时间戳记 datetime64[ns]，在 0.12 中）

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-07-02T18:02:02.603

不确定你是否还需要它，但在 Pandas 0.14 中我通常使用 .astype('timedelta64[X]') 方法 [http://pandas.pydata.org/pandas-docs/stable/timeseries.html](http://pandas.pydata.org/pandas-docs/stable/timeseries.html)（变频）

```
df = pd.DataFrame([ pd.Timestamp('20010101'), pd.Timestamp('20040605') ])
df.ix[0]-df.ix[1] 
```

回报：

> ```
> 0   -1251 days
> dtype: timedelta64[ns] 
> ```

```
(df.ix[0]-df.ix[1]).astype('timedelta64[Y]') 
```

回报：

```
 0   -4
 dtype: float64 
```

希望这会有所帮助

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-02-11T03:15:30.143

让我们指定您有一个名为 time_difference 的熊猫系列，其类型为 numpy.timedelta64[ns]

仅提取一天（或任何所需属性）的一种方法如下：

```
just_day = time_difference.apply(lambda x: pd.tslib.Timedelta(x).days) 
```

使用此函数是因为 numpy.timedelta64 对象没有“天”属性。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-05-29T00:13:30.377

要将任何类型的数据转换为天，只需使用 Timedelta().days：

```
pd.Timedelta(1985, unit='Y').days
84494 
```

# onclick - nvd3.js：无法将 onClick 事件与 svg 中的数据点绑定

> ID：16103244
> 
> 赞同：13
> 
> 时间：2013-04-19T11:09:56.433
> 
> 标签：onclick, d3.js, nvd3.js

我正在尝试将数据点与 onclick 事件绑定，以便我可以显示一个带有一些附加详细信息和链接的覆盖框。我正在使用`.nv-point`该类来访问数据点。问题是我无法将 onclick 事件注册到这些数据点。

这是代码：

```
d3.selectAll(".nv-point").on("click",function(){
    alert("clicked");
    //do something more
}); 
```

这是[jsFiddle中的演示](http://jsfiddle.net/lkshminarayanan/7anP9/5/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-14T14:18:57.213

您可以轻松地将单击处理程序附加到“圆”或 lineChart 上的节点点，如下所示：

```
 chart.lines.dispatch.on('elementClick', function(e) {
     alert("You've clicked on " + e.series.key + " - " + e.point.x);
 }); 
```

在上面的示例中，这将显示（行的）键和您单击的节点的确切 x 值。我发现在警报行设置断点非常有帮助，并使用 Chrome/FF/etc 开发人员工具检查`e`对象，以便您可以准确查看可用数据以及如何访问它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-05T12:01:01.687

经过一番折腾，这似乎对我有用：

```
d3.select("#mainGraph svg").selectAll(".nv-point").style("pointer-events", "all").on("click", function( e ) { console.log( JSON.stringify( e ) ); }); 
```

基本上，我所做的与您最初尝试的区别只是重置覆盖样式表以打开指针事件，即 style("pointer-events", "all")。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T11:54:42.470

线图由 svg 线制成，具有 nv-line 类。您原来的 jsFiddle 的一个分支在这里：http: [//jsfiddle.net/pnavarrc/qzwkn/1/](http://jsfiddle.net/pnavarrc/qzwkn/1/)

```
d3.selectAll(".nv-line").on("click", function () {
    alert("clicked");
}); 
```

如果你想看看 nvd3 的源代码：

*   [https://github.com/novus/nvd3/blob/master/src/models/lineChart.js](https://github.com/novus/nvd3/blob/master/src/models/lineChart.js)
*   [https://github.com/novus/nvd3/blob/master/src/models/line.js](https://github.com/novus/nvd3/blob/master/src/models/line.js)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-14T16:03:49.307

您可以只添加参数，将其链接到数据点。就我而言，我试图为每个数据点建立超链接。参数已传递值，可用于根据要求更新超链接。

```
d3.selectAll(".nv-point").on("click", function (e) {    

alert(e[0].values[0]);
}); 
```

# mongodb - Mongo C# 驱动程序不支持集合计数吗？

> ID：16103246
> 
> 赞同：1
> 
> 时间：2013-04-19T11:09:59.410
> 
> 标签：mongodb, mongodb-.net-driver

我正在使用 MongoDb C# 驱动程序，并且我有下面显示的集合。我想在 LINQ 查询中按 Rating.Count 排序，但我收到了同样的错误：

***无法确定表达式的序列化信息：a.Rating.Count。***

Mongo C# 驱动程序不支持集合计数吗？

```
activities => activities.OrderByDescending(a => a.Rating.Count)

    {
      "_id" : "5171243a3814fe1fb0bfbad6",
      "Verb" : "post",
      "Url" : null,
      "Title" : "posted a new question",
      "Content" : "mongodb and redis",
      "Icon" : null,
      "Tags" : ["mongodb", "redis"],
      "Rating" : [{
          "UserId" : "516be7913814fe2b0cc123c4",
          "Value" : 1
      }]
} 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T21:46:32.207

很遗憾，错误信息并没有更多帮助，但根本原因是 MongoDB 不支持按数组字段的大小对返回的文档进行排序。

我们正在开发新版本的 LINQ 支持。新版本的主要目标是支持将 LINQ 查询映射到聚合框架管道，但另一个目标是改进错误消息。

# firefox - 火狐。如果需要太多时间，请停止响应

> ID：16103247
> 
> 赞同：0
> 
> 时间：2013-04-19T11:10:23.580
> 
> 标签：firefox, selenium

我正在使用 Selenium WebDriver 2.31.2.0 和 FireFox 19.0.2。在我的测试中，某些页面需要花费太多时间来加载所有资源（图片）。在创建测试所需的所有 dom 元素后加载图片。所以我需要一些机制来防止硒等待完整的页面加载。我试着用

```
firefoxProfile.SetPreference("webdriver.load.strategy", "unstable"); 
```

但是测试变得太不稳定了。所以我的问题是：如果响应时间超过指定的超时时间，firefox 配置中是否有任何选项可以结束长响应或至少返回 HTTP 错误。

# java - 如何将Resultset rs对象作为参数传递给Thread

> ID：16103251
> 
> 赞同：0
> 
> 时间：2013-04-19T11:10:45.903
> 
> 标签：java, jdbc

我是java线程的新手。我的问题是：

我们可以将Resultset rs 对象作为参数传递给线程吗？

我在谷歌搜索，我得到了如何传递字符串，int。但我没有得到如何使用对象参数。

我的示例程序是：

```
public class dataimport
{
    public dataimport()
    {
        connect(); //this function will connect to database and execute query
    }   

    private void connect()
    {
        /* Connect database
        str="SELECT * FROM tablename"; 
        rs1=statement.executeQuery(str);

        while (rs1.next())
        { 
            /* here each record will pass to each thread run() method*/ 
        }   
    }
} 
```

请任何人都可以帮我一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:16:11.783

在线程创建时在构造函数中设置您的对象：

```
public class MyThreadClass implements Runnable {

   public MyThread(Object parameter) {
       // store parameter 
   }

   public void run() {
   //...
   }
} 
```

# sql-server-2008 - Sql 查询以获取所需的输出

> ID：16103252
> 
> 赞同：0
> 
> 时间：2013-04-19T11:10:53.783
> 
> 标签：sql-server-2008

我有一张桌子

```
EmpName | Bonus
Rohit   | 20
Steve   | 35
Rohit   | 9
Johnson | 15 
```

现在我想要奖金<30的不同员工的用户名和奖金总和。答案应该是；

```
EmpName | Sum(Bonus)
Rohit   | 29
Johnson | 15 
```

得到这个输出的查询是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:12:50.997

您可以使用聚合函数`sum()`来获取每个人的总奖金`empname`，然后使用`HAVING`子句返回`empname`总奖金小于 30 的那个：

```
select empname, sum(bonus) TotalBonus
from yt
group by empname
having sum(bonus) < 30; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c00e5/2)

或者，如果您只想合计那些`bonus`小于 30 的行，您可以使用：

```
select empname, sum(bonus) TotalBonus
from yt
where bonus < 30
group by empname; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c00e5/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:13:49.157

```
SELECT EmpName,
       SUM(Bonus) AS SumBonus
FROM dbo.Table1
WHERE Bonus < 30
GROUP BY EmpName 
```

[**演示**](http://sqlfiddle.com/#!3/670ba/3/0)

# facebook - “在全球范围内打开和关闭共享” - 允许在 cookie 中存储设置和操作 ID？

> ID：16103253
> 
> 赞同：0
> 
> 时间：2013-04-19T11:10:53.803
> 
> 标签：facebook, cookies, facebook-opengraph

`"turn[ing] sharing on and off globally"`是否允许在不使用额外数据库/后端的情况下将设置存储在 cookie 中？我能看到的唯一问题是当 cookie 不再存在（被用户删除或 cookie 过期）时，用户必须再次手动打开/关闭它。

同样的问题也适用于 Open Graph 活动，例如读取操作。是否允许它们（ID）存储在 cookie 中，以便用户稍后将其删除？这将解决要求

> 允许用户删除您发布到 Facebook 的任何已读故事，并在您托管文章的同一页面上包含此选项

简单地说：我可以在没有后端的情况下使用 Facebook Open Graph 吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:31:53.680

至于共享开/关——如果您将默认设置设为“关闭”，那么如果 cookie 不存在，用户必须再次打开它，但对于没有 cookie 的用户来说，不会出现不需要的共享。

并且已经发布的OG分享动作的ID可以从API中读取，无需存储。

# ruby - 使用 ruby -smpp 获取不可读的符号

> ID：16103258
> 
> 赞同：3
> 
> 时间：2013-04-19T11:11:07.647
> 
> 标签：ruby, smpp, ruby-smpp

我正在使用 ruby​​-smpp 发送 ussd 请求，现在一切都可以使用 ISO-8859-1 符号正常工作，除了 Cyrllic。

```
optionals = {0x0501 => Smpp::OptionalParameter.new(0x0501, '\u0011')}
send_mt("055012", "066012", "Привет", {optional_parameters: optionals, data_coding: 8}) 
```

**submit_sm.rb**

```
@short_message = short_message.encode("UTF-16BE").force_encoding("BINARY") 
```

但无论如何得到不可读的符号，这可能是运营商问题吗？

ps 也尝试了这个提交：[https://github.com/kubum/ruby-smpp/commit/72eb124c45df962a5412f7a821ccb02cccdabe60](https://github.com/kubum/ruby-smpp/commit/72eb124c45df962a5412f7a821ccb02cccdabe60)，但没有成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:23:30.187

不知何故，我与之合作的 USSDC 使用了`data_coding: 72`。解决。

# c# - C# Winforms - 数据绑定或列表

> ID：16103261
> 
> 赞同：2
> 
> 时间：2013-04-19T11:11:28.147
> 
> 标签：c#, winforms, list

我在一个名为 PurchaseOrder 的类中有一个方法。在这里，我曾经`List<string>`检索供应商列表并将这些列表填充到组合框中。代码确实有效，但随着我在 SQL Server 数据库中添加越来越多的供应商，我在加载表单时遇到了一些缓慢的问题。我怎样才能优化这样的速度？

下面是两组代码，来自 PurchaseOrderClass.cs 的方法 PopulateSuppliers() 和一个 Form_Load 事件。

```
 public object PopulateSuppliers()
    {
        //Create an instance of a List of Strings.
        List<string> ListOfSuppliers = new List<string>();

        string sqlString = "SELECT CompanyName FROM tbl_suppliers WHERE Archived = 'False';";

        SqlConnection sqlConnection = new SqlConnection(connectionString);
        SqlCommand sqlCommand = new SqlCommand(sqlString, sqlConnection);

        sqlConnection.Open();
        sqlReader = sqlCommand.ExecuteReader();

        while (sqlReader.Read())
        {
            ListOfSuppliers.Add(sqlReader["CompanyName"].ToString());
        }

        sqlReader.Close();
        sqlConnection.Close();

        return ListOfSuppliers;
    }

    private void frmPurchaseOrderEditor_Load(object sender, EventArgs e)
    {
        ...

        //Populate a list of suppliers.
        cboSuppliers.DataSource = PurchaseOrder.PopulateSuppliers();

        ...
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:22:23.073

也许在存档列上创建索引可能会有所帮助.. 但是您的代码看起来不错。但是，如果供应商列表继续增长，请考虑用分页数据网格替换您的组合的机会。

此外，在使用 DDBB 时始终使用 finally 块，并在那里释放 Commands 和 Connection 类以释放非托管资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:36:43.550

我认为您的代码非常好...但是如果表中的数据太多，那么我认为组合框不是您的最佳选择..尝试其他替代方案...例如 GridView、ListView、Repeater ...而且总是有客户端。

当使用任何资源，如 SqlReader、File 等（所有使用 IDisposable 接口的类库类型）时，您应该使用“using”语句来处理资源的分配和处置......

单击[此处](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)了解有关使用语句的更多信息

# mongodb - mongodb循环收集+保存，对象多次返回

> ID：16103268
> 
> 赞同：2
> 
> 时间：2013-04-19T11:11:41.930
> 
> 标签：mongodb

我正在编写一个相当大的迁移并且有这个代码（coffeescript）：

```
db.users.find().forEach (user)->
  try
    #some code changing the user depending on the old state
    db.users.save(user)
    print "user_ok: #{user._id}"
  catch error
    print "user_error: #{user._id}, error was: #{error}" 
```

发生了一些错误。但它们发生在已处理的用户身上：

```
 user_ok: user_1234
 #many logs
 user_error: user_1234 ... 
```

***循环如何获取已处理的对象？***

我最终做了：

```
backup = { users: [] }
db.users.find().forEach (user)->
  try
    #some code changing the user depending on the old state
    backup.users.push user
    print "user_ok: #{user._id}"
  catch error
    print "user_error: #{user._id}, error was #{error}"
#loop backup and save 
```

现在效果很好，但看起来真的很奇怪。请问这一切背后的意义何在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:23:59.593

当您修改一个对象时，它可能会被数据库移动。数据库需要额外注意记住哪些对象已经被访问过。此功能称为[快照](http://docs.mongodb.org/manual/reference/operator/snapshot/)，您可以使用快照查询

```
db.collection.find().snapshot() 
```

但是，即使这样也不能保证在游标迭代期间插入或删除的对象。文档链接中解释了更多注意事项。

另一种选择是`$orderby`在不变的唯一索引上执行。理想情况下，该索引也是单调的，因此如果您使用 ObjectIds 作为主键，那么该`_id`字段非常方便，例如

```
db.collection.find().sort({"_id" :1}); 
```

# asp.net - System.Data.SqlClient.SqlException：用户“ASPHOST166\IWAM_plesk（默认）”登录失败

> ID：16103273
> 
> 赞同：3
> 
> 时间：2013-04-19T11:12:05.073
> 
> 标签：asp.net, entity-framework

有人可以帮我吗？在 Visual Studio 中一切正常，但在远程服务器上却不行。我在登录和注销时尝试访问该页面，但遇到了同样的错误。错误：“System.Data.SqlClient.SqlException：用户 'APHOST166\IWAM_plesk(default)' 登录失败。”

网络配置：

```
 <?xml version="1.0" encoding="utf-8"?>
 <!--
    For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
 -->
 <configuration>
 <connectionStrings>
    <add name="ConnectionString" connectionString="Data Source=ASPHOST166\SQL2008R2,778; Initial Catalog=Rennoz_DATABASEMDF; User ID=Rennoz_Admin; Password=*****" providerName="System.Data.SqlClient"/> 
    <add name="ApplicationServices" connectionString="Data Source=ASPHOST166\SQL2008R2,778; Initial Catalog=Rennoz_DATABASEMDF; User ID=Rennoz_Admin; Password=*****" providerName="System.Data.SqlClient" />
    <add name="DatabaseEntities" connectionString="metadata=res://*/App_Code.Model.csdl|res://*/App_Code.Model.ssdl|res://*/App_Code.Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=ASPHOST166\SQL2008R2,778; Initial Catalog=Rennoz_DATABASEMDF; User ID=Rennoz_Admin; Password=*****;Integrated Security=True;User Instance=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
<system.web>
 <compilation debug="false" targetFramework="4.0">
   <assemblies>
     <add assembly="System.Security, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
     <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
     <add assembly="System.Data.Entity.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
    </assemblies>

  <buildProviders>
    <add extension=".edmx" type="System.Data.Entity.Design.AspNet.EntityDesignerBuildProvider" />
  </buildProviders>
</compilation>
  <customErrors mode="Off"></customErrors>
  <trace mostRecent="true" enabled="true" requestLimit="1000" pageOutput="false" localOnly="true"/>
 <authentication mode="Forms" />
 <membership>
   <providers>
     <clear />
     <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
   </providers>
 </membership>
 <profile>
  <providers>
    <clear />
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
   </providers>
 </profile>
 <roleManager enabled="true">
   <providers>
     <clear />
     <add connectionStringName="ApplicationServices" applicationName="/"
      name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" />
    <add applicationName="/" name="AspNetWindowsTokenRoleProvider"
      type="System.Web.Security.WindowsTokenRoleProvider" />
   </providers>
 </roleManager>
</system.web>
<system.webServer>
 <modules runAllManagedModulesForAllRequests="true" />
</system.webServer>
 <location path="Moderation">
     <system.web>
        <authorization>
            <allow roles="Admin" />
                <deny users="*" />
            </authorization>

        </system.web>

    </location>
 </configuration> 
```

页面后面的代码（插入）：

```
 protected void EntityDataSource1_Inserting1(object sender, EntityDataSourceChangingEventArgs e)
 {
     Good pic = (Good)e.Entity;
     //pic.PhotoAlbumId = photoalbumid;
     FileUpload fileupload1 = (FileUpload)ListView1.InsertItem.FindControl("FileUpload1");
     string virtualFolder = "~/pics/";
     string fizfolder = Server.MapPath(virtualFolder);
     string filename = Guid.NewGuid().ToString();
     string extension = System.IO.Path.GetExtension(fileupload1.FileName);

     fileupload1.SaveAs(System.IO.Path.Combine(fizfolder, filename + extension));
     pic.ImageURL = virtualFolder + filename + extension;
     pic.Date = System.DateTime.Today;

 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T11:30:14.240

看起来您的应用程序在 SQL Server 中不存在的帐户下运行。因此，您在实体框架的连接字符串中指定了登录名和密码，我认为您需要`Integrated Security=True;`从此实体框架连接字符串中删除：

```
<add name="DatabaseEntities" 
     connectionString="metadata=res://*/App_Code.Model.csdl|res://*/App_Code.Model.ssdl|res://*/App_Code.Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=ASPHOST166\SQL2008R2,778; Initial Catalog=Rennoz_DATABASEMDF; User ID=Rennoz_Admin; Password=*****;Integrated Security=True;User Instance=True;MultipleActiveResultSets=True&quot;" 
     providerName="System.Data.EntityClient" /> 
```

更新：根据您的错误消息，您的 SQL Server 版本不支持用户实例登录标志。所以也删除`User Instance=True;`参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T11:28:02.203

您的`DatabaseEntities`连接字符串指定`User ID`and`Password`但也`Integrated Security=true`（优先）。删除后者以使用指定的 SQL 帐户。

同时删除`User Instance=true`- 它仅在动态附加 MDF 文件时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-08T05:18:41.540

我有一个类似的问题。

我让 Plesk 处理我的连接字符串，然后将其从我的 web.config 文件中删除，但这取决于您。

1) 我使用 Windows 身份验证在登录名下创建了用户“CT11881\IWAM_plesk(default)”。

2) 授予用户在“Server Rolls”和“Securables”中的完全访问权限

[http://forums.asp.net/t/1954164.aspx?Windows+2008+VPS+w+Plesk+11+x+SQL+connection+issues](http://forums.asp.net/t/1954164.aspx?Windows+2008+VPS+w+Plesk+11+x+SQL+connection+issues)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-03T08:49:22.437

如果您的 SQL Server 位于不同的计算机上，则必须使用 IntegratedSecurity，您应该在 SQL Server 中允许的相同凭据下运行您的站点。

1.  如果您的 Web 计算机不在域中，您应该在两台计算机（Web 和 SQL）上创建具有相同凭据的相同用户。在“SQL Server Management Studio”中，添加此用户并设置所需的权限。
2.  在 IIS 中，转到您的应用程序池，单击“高级设置”并在“身份”属性中设置凭据（对于您创建的用户或域用户）。
3.  在 IIS 中，在您的站点中，转到“高级设置”并在“物理路径凭据”属性中设置凭据（对于您创建的用户或域用户）。
4.  在“ConnectionString”中，如果您在“源”属性中使用“localhost”，请在 UNC 地址上更改它，该地址位于您的 SQL 服务器。
5.  如果无法建立连接，请确保在“SQL Server 配置管理器”中为使用的 SQL 实例启用了 TCP/IP 协议（​​更改后需要重新启动实例），即[防火墙](https://msdn.microsoft.com/en-us/library/ms175043.aspx)允许 TCP 端口 1443在您的 SQL 机器上。您可以借助“Paping”实用程序 - “paping YourSqlMachine -p 1433 -c 4”从 Web 机器 ping 此[端口](http://www.antepedia.com/Detail/p/paping.html)。

# c++ - 需要使用容器作为查找表的类。它们应该是全局变量还是静态成员？

> ID：16103277
> 
> 赞同：0
> 
> 时间：2013-04-19T11:12:16.320
> 
> 标签：c++, class, static, containers, global

如果我提前违反本网站的任何规则，我深表歉意。我只是注册问这个。

假设我上课。它将有几个用于数据成员的字符串和一些用于处理这些字符串的函数。

在进行处理时，希望将 std::map 容器用作查找表。这个想法是，地图只会根据表格的内容从一个字符串转换为其他字符串。

我的问题基本上是，最好的方法是什么？我不希望班级的用户甚至知道表格；它们完全隐藏在类的实现中。这就是为什么我认为我应该将它们设为私有静态成员，但我不确定。

我不知道是否允许这样做。换句话说，我将在哪里填充地图？我猜可能在 .cpp 文件中。

无论如何，任何指导将不胜感激。再说一次，如果这个问题在其他地方，或者我在这个站点上做错了什么，请让某人删除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:18:56.573

将地图包装在您的类中，一个简单的示例：

```
class YourClass
{
    std::map<std::string, std::string> m;
public:

    const std::string &get(const std::string &s) const
    {
        return m.at(s);
    }

    void put(const std::string &s1, const std::string &s2)
    {
        m.insert(std::make_pair(s1, s2));
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:18:05.820

如果`map`将包含 的所有实例的相同数据，`class`则 a`private const std::map<std::string, std::string>`是合理的，并且可以在 的`.cpp`实现文件中初始化`class`：

```
// .h
class map_holder
{
public:
    std::string get(std::string const& a_name) const
    {
        auto i(m_.find(a_name));
        if (i != m_.end()) return i->second;
        return "";
    }
private:
    static const std::map<std::string, std::string> m_;
};

// .cpp
const std::map<std::string, std::string> map_holder::m_
    { { "one", "1" },
      { "two", "2" }
    }; 
```

如果 C++11 不可用，请使用[`boost::assign::map_list_of`](http://www.boost.org/doc/libs/1_35_0/libs/assign/doc/index.html#map_list_of)：

```
const std::map<std::string, std::string> map_holder::m_ =
    boost::assign::map_list_of( "one", "1" )( "two", "2" ); 
```

# database - CodeIgniter SQLite where field IN 数组条件

> ID：16103278
> 
> 赞同：0
> 
> 时间：2013-04-19T11:12:22.057
> 
> 标签：database, sqlite, codeigniter, pdo, where

我在尝试使用 SQLite 在 CodeIgniter 中设置“WHERE field IN ...”子句时遇到了一些麻烦。我得到了一个名为 $conditions 的所有 where 子句条件的数组，并以这种方式添加了 WHERE IN 子句：

```
$this->browse_model->conditions['username IN'] = "(SELECT like_to FROM likes WHERE like_from = '".$this->user->username."')"; 
```

在我的 browse_model 中，我使用以下代码运行查询：

```
$get = $this->db->get_where('users', $this->conditions, 6, $_SESSION['browse_page']*6); 
```

但不知何故，当我使用上面写的条件时，它给了我以下错误：

> 致命错误：在第 193 行的 ../www/system/database/drivers/pdo/pdo_driver.php 中的非对象上调用成员函数 execute()

就我而言，SQLite 中也允许使用“field IN array”语句，所以我真的不知道为什么这不起作用。有谁知道如何使这项工作？

提前致谢！

问候，Skyfe。

编辑：尝试以下列方式设置条件，但没有得到错误，但也没有任何结果：

```
$this->browse_model->conditions['username'] = "IN (SELECT like_to FROM likes WHERE like_from = '".$this->user->username."')"; 
```

所以我想这仍然不是正确的方法..

EDIT2：“修复”它，不知何故它没有重复字段 => value 为 IN 语句正确注释 where 子句的方式，因此在自定义字符串中定义它：

```
$this->browse_model->custom_condition = username IN (SELECT like_to FROM likes WHERE like_from = '".$this->user->username."') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:38:13.567

他们是格式化 IN 子句的一些问题，

```
SELECT * FROM users WHERE gender = 'f' AND gender_preference = 'm' AND username IN (SELECT like_to FROM likes WHERE like_from = 'testtest') 
```

# android - 使用 Google Maps Android API v2 缩放时标记移动

> ID：16103281
> 
> 赞同：6
> 
> 时间：2013-04-19T11:12:31.993
> 
> 标签：android, google-maps-markers, google-maps-android-api-2

使用 Google Maps Android API v2 在地图上添加一些标记时，标记没有设置到正确的位置，并且在缩放时会移动。

放大时，它们会更接近正确的位置，就好像它们被与缩放相关的因素平移了一样。

怎么了？

放大示例：

![在此处输入图像描述](https://i.stack.imgur.com/Tz2xx.png) ![在此处输入图像描述](https://i.stack.imgur.com/oNMsf.png) ![在此处输入图像描述](https://i.stack.imgur.com/nw1WY.png)

**分段**

```
public class CenterMapFragment extends Fragment {

    private GoogleMap mMap;
    private List<Center> mCenterList;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        return inflater.inflate(R.layout.center_map_fragment, container, false);
    }

    @Override
    public void onActivityCreated (Bundle savedInstanceState){

        super.onActivityCreated(savedInstanceState); 

        mMap = ((SupportMapFragment) getActivity().getSupportFragmentManager().findFragmentById(R.id.map))
                .getMap();

        if (mMap != null) {

            mCenterList = MyApplication.dbHelper.getAllCenter();

            for(Center center : mCenterList){

                mMap.addMarker(new MarkerOptions().position(new LatLng(center.lat, center.lng)).icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.myicon)));

            }
        }

    }

} 
```

**布局**

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T12:29:31.450

对于自定义标记，您还需要使用

`MarkerOptions.anchor(float u, float v)`

它描述了标记上的指针点在哪里。默认情况下，该点位于图像的中底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:54:29.147

要显示窗口信息，您必须在“mMap”上使用 setInfoWindowAdapter 或为标记设置标题。

关于图标，缩小时它似乎在移动，但锚点始终指向地图上的同一位置。如果您使用的图像不遵循 Google 的图标模式（锚点位于图像底部的中间），您可以设置锚点。为此，您必须使用[MarkerOptions 的方法 anchor(u,v)](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/MarkerOptions?hl=pt-PT#anchor%28float,%20float%29)

# android - 当我检查系统中是否存在 GPS 传感器时应用程序崩溃？

> ID：16103282
> 
> 赞同：1
> 
> 时间：2013-04-19T11:12:31.953
> 
> 标签：android, gps

我遵循了[如何检查是否存在 GPS 传感器？](https://stackoverflow.com/q/5031895/1713415)
并据此进行了更改，但在所有情况下我的应用程序都崩溃了。我用了

```
PackageManager pm = getPackageManager();
boolean hasGps = pm.hasSystemFeature(PackageManager.FEATURE_LOCATION_GPS); 
```

然后我再次修改了我的代码并使用了

```
LocationManager lm = (LocationManager)getSystemService(LOCATION_SERVICE);
if (lm.getProvider(LocationManager.GPS_PROVIDER) == null) {
    Toast.makeText(getApplicationContext(), 
                       "GPS sensor is not available", Toast.LENGTH_LONG).show();
} 
```

但在这两种情况下，我的应用程序都会崩溃。请告诉我我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:23:35.427

我在我的代码中发现了错误并进行了必要的更改。
最初我的代码是

```
if((ProvidePreference.equalsIgnoreCase("BestAvailable")) {
//start both gps and network
     this.LocationMngr.requestLocationUpdates(
                   LocationManager.GPS_PROVIDER,captureFrequencey, 100, this); 
     this.LocationMngr.requestLocationUpdates(
                   LocationManager.NETWORK_PROVIDER,captureFrequencey, 0, this);
} 
```

然后我将代码更改为

```
if((ProvidePreference.equalsIgnoreCase("BestAvailable") && 
             LocationMngr.getProvider(LocationManager.GPS_PROVIDER) != null)) {
//start both gps and network
     this.LocationMngr.requestLocationUpdates(
                 LocationManager.GPS_PROVIDER,captureFrequencey, 100, this); 
     this.LocationMngr.requestLocationUpdates(
                 LocationManager.NETWORK_PROVIDER,captureFrequencey, 0, this);
} else {
//start network 
     this.LocationMngr.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER,captureFrequencey, 0, this);
} 
```

注意 - 如果提供程序在系统中不可用，则不应尝试启动它。

# android - 使用 SurfaceView 移动位图很慢

> ID：16103283
> 
> 赞同：1
> 
> 时间：2013-04-19T11:12:35.820
> 
> 标签：android, performance, surfaceview

我正在为安卓开发游戏。在阶段之间，我想显示带有路线的地图的一部分，并将其从一个城市移动到另一个城市（舞台到舞台）。

首先我想在我的手机上做，这是三星 Galaxy Y，240x320 Qvga ldpi。

所以我有jpg格式的地图文件。这张图片是 2463x602，这是一张世界地图。我做到了，一切都完成了，除了一件事。这个“动画”对我来说很慢。

当我从这个开始时，我想，它会很快，我会用 Thread.sleep(); 但问题是，它并不快。

我怎样才能让它更快呢？这是我的代码：

```
package hu.mycompany.myproject;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.media.AudioManager;
import android.media.SoundPool;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class MapActivity extends Activity {

    DrawView drawView;
    SoundPool soundPool;
    int soundId;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setVolumeControlStream(AudioManager.STREAM_MUSIC);
        soundPool = new SoundPool(1, AudioManager.STREAM_MUSIC, 0);
        soundId = soundPool.load(this, R.raw.airplane, 1);
        drawView = new DrawView(this);
        setContentView(drawView);
    }

    public void playSound() {
        soundPool.play(soundId, 1f, 1f, 1, 0, 1f);
    }

    @Override
    public void onResume() {
        super.onResume();
        playSound();
        drawView.resume();
    }

    @Override
    public void onPause() {
        super.onPause();
        drawView.pause();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_map, menu);
        return true;
    }

    public class DrawView extends SurfaceView implements Runnable {
        Bitmap gameMap = null;
        Thread gameLoop = null;
        SurfaceHolder surface;
        Rect rect;
        volatile boolean running;
        volatile boolean moved;

        public DrawView(Context context) {
            super(context);
            moved = false;
            surface = getHolder();
            gameMap = BitmapFactory.decodeResource(getResources(),
                    R.drawable.map);

        }

        public void resume() {
            running = true;
            gameLoop = new Thread(this);
            gameLoop.start();
        }

        public void pause() {
            running = false;
            while (true) {
                try {
                    gameLoop.join();
                } catch (InterruptedException e) {

                }
            }
        }

        @Override
        public void run() {
            Rect canvasSize = new Rect(0, 0, 240, 320);
            Paint paint = new Paint();
            paint.setAntiAlias(true);
            while (running) {
                if (!surface.getSurface().isValid()) {
                    continue;
                }
                if (!moved) {
                    int i;
                    for (i = 80; i <= 830; i++) {
                        Canvas canvas = surface.lockCanvas();
                        rect = new Rect(i, 250, (i + 240), 570);
                        canvas.drawBitmap(gameMap, rect, canvasSize, paint);
                        surface.unlockCanvasAndPost(canvas);
                    }
                    moved = true;
                }
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:19:47.067

1-尝试通过在 photoshop 中将其导出为 web 并选择 png 作为扩展类型来减小图片大小 2-您应该创建两个类，一个用于处理线程，另一个用于渲染和游戏逻辑。线程将在系统渲染时通过锁定画布来管理它。看看这个链接 [http://android-er.blogspot.com/2010/05/android-surfaceview.html](http://android-er.blogspot.com/2010/05/android-surfaceview.html)

# android - 很遗憾 已经停止

> ID：16103284
> 
> 赞同：0
> 
> 时间：2013-04-19T11:12:36.120
> 
> 标签：android, http, post

我有一个应用程序，用户在其中提交一些数据，然后将其发送到服务器。我正在平板电脑和 Android 智能手机 (Galaxy S2) 上对其进行测试。在平板电脑上，只要我单击“提交”，应用程序就会停止工作，并显示“不幸的是已停止工作”消息。这个问题在手机或模拟器上都看不到，这让我很困惑。

应用程序中还有另一个屏幕，用户可以选择重新提交相同的凭据。在那里也遇到了同样的问题。该应用程序的其余部分工作正常。这使我得出结论，问题可能在于我将数据发送到服务器的方式。该代码片段如下：

```
//code to send to server should begin here.
        HttpClient hc = new DefaultHttpClient();
        HttpPost hp = new HttpPost("http://www.mywebsite.com/takeDetails.php");

        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            String val = "new";
            nameValuePairs.add(new BasicNameValuePair("mode", val));
            nameValuePairs.add(new BasicNameValuePair("name", name));
            nameValuePairs.add(new BasicNameValuePair("number", number));
            nameValuePairs.add(new BasicNameValuePair("email", emailID));
            Log.v(this.toString(), "Email = " + emailID);
            hp.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            // Execute HTTP Post Request
            HttpResponse response = hc.execute(hp);

            //Toast.makeText(getApplicationContext(), "Attempting to register.", Toast.LENGTH_LONG).show();

            String responseBody = EntityUtils.toString(response.getEntity());
            if(responseBody.contains("Success")) {
                Toast.makeText(getApplicationContext(), "Thank you for registering! You will receive an email with your username and password shortly.", Toast.LENGTH_LONG).show();
            } else {
                Toast.makeText(getApplicationContext(), "Attempt to register failed.", Toast.LENGTH_LONG).show();
            }
            Log.v(this.toString(), "HTTP Response = " + responseBody);

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        } 
```

日志输出：

```
V/com.sriram.htmldisplay.htmlDisplay@4107bef0( 3766): Line read = Name: jguyjfhf
V/com.sriram.htmldisplay.htmlDisplay@4107bef0( 3766): Line read = Number: 668895898
V/com.sriram.htmldisplay.htmlDisplay@4107bef0( 3766): Line read = Email ID:jvjhfhc@ccf.mkj
V/com.sriram.htmldisplay.htmlDisplay@4107bef0( 3766): User details gleaned = Name = jguyjfhf
V/com.sriram.htmldisplay.htmlDisplay@4107bef0( 3766): 668895898
V/com.sriram.htmldisplay.htmlDisplay@4107bef0( 3766): jvjhfhc@ccf.mkj
V/com.sriram.htmldisplay.htmlDisplay@4107bef0( 3766): Email = jvjhfhc@ccf.mkj
D/AndroidRuntime( 3766): Shutting down VM
W/dalvikvm( 3766): threadid=1: thread exiting with uncaught exception (group=0x409f11f8)
E/AndroidRuntime( 3766): FATAL EXCEPTION: main
E/AndroidRuntime( 3766): android.os.NetworkOnMainThreadException
E/AndroidRuntime( 3766):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
E/AndroidRuntime( 3766):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
E/AndroidRuntime( 3766):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
E/AndroidRuntime( 3766):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
E/AndroidRuntime( 3766):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
E/AndroidRuntime( 3766):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
E/AndroidRuntime( 3766):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
E/AndroidRuntime( 3766):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
E/AndroidRuntime( 3766):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
E/AndroidRuntime( 3766):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
E/AndroidRuntime( 3766):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
E/AndroidRuntime( 3766):    at com.sriram.htmldisplay.htmlDisplay.writeSendDetails(htmlDisplay.java:200)
E/AndroidRuntime( 3766):    at com.sriram.htmldisplay.htmlDisplay.access$10(htmlDisplay.java:127)
E/AndroidRuntime( 3766):    at com.sriram.htmldisplay.htmlDisplay$1.onClick(htmlDisplay.java:110)
E/AndroidRuntime( 3766):    at android.view.View.performClick(View.java:3511)
E/AndroidRuntime( 3766):    at android.view.View$PerformClick.run(View.java:14105)
E/AndroidRuntime( 3766):    at android.os.Handler.handleCallback(Handler.java:605)
E/AndroidRuntime( 3766):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime( 3766):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 3766):    at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime( 3766):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 3766):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 3766):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime( 3766):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime( 3766):    at dalvik.system.NativeStart.main(Native Method)
D/dalvikvm( 3766): GC_CONCURRENT freed 290K, 7% free 6697K/7175K, paused 4ms+6ms
W/ActivityManager( 1268):   Force finishing activity com.sriram.htmldisplay/.htmlDisplay
D/TabletStatusBar( 1340): hiding the MENU button
W/ActivityManager( 1268): Activity pause timeout for ActivityRecord{41406c60 com.sriram.htmldisplay/.htmlDisplay 
```

我的问题：
1\. 有没有更好的方法来处理来自 HTTPClient 的错误？
2\. 任何关于可能导致平板电脑出现故障的想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:31:12.677

您正在尝试在主 UI 线程上运行网络请求。自 3.0 以来，Android 不允许您这样做（我相信）。这样做会导致您的 UI 锁定直到请求完成，从而在执行请求期间使您的应用程序无用。

您必须在 new`Thread`或, 中运行您的请求`ASyncTask`，以承担 UI 线程的负载。您可以在此处找到有关如何使用多个线程的更多信息[。](http://developer.android.com/guide/components/processes-and-threads.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:31:14.000

您正在从主线程进行网络操作，这是一个非常非常糟糕的主意。您至少应该在[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T11:37:54.857

发生此问题是因为您没有使用无痛线程。所有高于 3.0 的 android 操作系统版本都不会支持 oncreate 中的任何互联网访问作品（http 连接）。所以你应该使用 ASYNCTask 。请查看此链接以了解此内容。

[http://samir-mangroliya.blogspot.in/p/android-asynctask-example.html](http://samir-mangroliya.blogspot.in/p/android-asynctask-example.html)

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T11:31:41.717

**NetworkOnMainThreadException：**当应用程序尝试在其主线程上执行网络操作时引发的异常。

## 在 onCreate 中添加此代码

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

StrictMode.setThreadPolicy(policy); 
```

* * *

## 或将 HTTP 调用代码添加到`AsyncTask`

```
class RetreiveFeedTask extends AsyncTask<String, Void, RSSFeed> {

        private Exception exception;

        protected RSSFeed doInBackground(String... urls) {
            try {

                // add your all code here

            } catch (Exception e) {
                this.exception = e;
                return null;
            }
        }

        protected void onPostExecute(RSSFeed feed) {
            // TODO: check this.exception 
            // TODO: do something with the feed
        }
     } 
```

执行 AsyncTask：

```
new RetreiveFeedTask().execute(urlToRssFeed); 
```

希望您在 android manifest 文件中添加了以下权限

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# php - 重写的 URL 显示 404 错误

> ID：16103289
> 
> 赞同：0
> 
> 时间：2013-04-19T11:12:52.950
> 
> 标签：php, apache, mod-rewrite, url-rewriting

`website.com?id=1`我已经从to重写了我的 URL ，`website.com/1`并且在尝试访问该页面时遇到 404 错误，并且想不出解决方案。我目前正在开发链接缩短器。这是必需的，因此用户将能够访问他们的短链接。

这是我当前的 .htaccessfile

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /(index\.php)?\?id=([0-9]+)([^\ ]*)
RewriteRule ^ /%3?%4 [L,R=301]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([0-9]+)/?$ /?id=$1 [L,QSA] 
```

我无法弄清楚这是否与 .htaccess 文件有关，或者我是否需要在我的 php 代码中添加其他内容。

有人会有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:25:29.470

您需要`index.php`在第二条规则中明确地重写回。在处理重写规则时，该`DirectoryIndex`指令已经被处理（或者可能永远不会被处理 - 这在一定程度上取决于您的虚拟主机配置以及`DirectoryIndex`声明指令的范围）。

这样做的最终结果是您需要将请求显式重写为要处理请求的脚本，而不能仅将其重写到目录的根目录。尝试将您的第二个重写规则更改为：

```
RewriteRule ^([0-9]+)/?$ /index.php?id=$1 [L,QSA] 
```

* * *

就个人而言，看到其他人使用这种方法来解决这个问题很有趣`%{THE_REQUEST}`，这是我自己最近才提出的一个想法，尽管我可能不是第一个这样做的人。为了将来的访问者的利益，这里有一篇[相关的帖子](https://codereview.stackexchange.com/questions/25205/automatically-redirect-index-php-to-directory-or-root-with-htaccess)，解释了为什么会出现这个要求以及它背后的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:18:25.987

我认为您编写了错误的重写规则。

它们必须是这样的：

为`example.com/website.php?id=x`..

```
 RewriteEngine On
  RewriteCond %{QUERY_STRING} ^id=([^/]+)$
  RewriteRule ^website\.php$ %1/ [L] 
```

如此处所述：[https ://stackoverflow.com/a/4951918/2274209](https://stackoverflow.com/a/4951918/2274209)

希望这能解决您的疑问。

# git - 对同一存储库上的多个 Git 远程使用单独的用户

> ID：16103294
> 
> 赞同：0
> 
> 时间：2013-04-19T11:13:03.750
> 
> 标签：git, git-remote, git-config, multiple-users

有没有办法克隆存储库，添加第二个遥控器，但在推/拉时自动为第二个遥控器使用不同/单独的用户？

我的用例是让远程“原点”仅用于与“用户 A”一起拉动（实际上是签出）更改，并让远程“我的第二远程”与“用户 B”一起拉动和推送。

有没有办法为每个遥控器设置一个单独的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:23:30.993

不，这在 Git 中是不可能的。姓名和电子邮件嵌入在提交中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:13:30.160

您是指用于对每个遥控器进行身份验证的用户吗？然后是的——只需将用户名嵌入到[遥控器的 URL](https://www.kernel.org/pub/software/scm/git/docs/git-fetch.html#URLS)中。

# c# - Xbox360 ADK 错误

> ID：16103295
> 
> 赞同：0
> 
> 时间：2013-04-19T11:13:05.730
> 
> 标签：c#, adk, xbox

我编译了我的代码并得到了这个错误。

> C:\Program Files (x86)\MSBuild\Microsoft\Xbox 360 ADK\Microsoft.Xbox360.Adk.targets(1372,5)：错误：不支持的程序集引用：System.ComponentModel.DataAnnotations.dll;System.Windows .Controls.Data.Input.dll

在主页添加一些文本框和标签后，我收到此错误。尝试进行全部重建，重新启动 xbox 等，但没有一个对我有用。

编辑：即使删除页面后，我也无法摆脱此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:15:49.713

我不知道 adk 是什么，但它看起来需要以下引用“System.ComponentModel.DataAnnotations.dll;System.Windows.Controls.Data.Input.dll”，如错误所示。

xbox 的 XNA 库针对 .net 框架的简化版本，并且似乎不包含/支持这些库。您当然不能在针对 Xbox 的 xna 项目上使用 Windows 控件。

xna 框架不支持这些库，这就是导致错误的原因。你应该删除它们，但你必须修复/重新编码任何依赖它们的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T04:35:24.027

从“C:\Program Files (x86)\Microsoft SDKs\Silverlight\v4.0\Libraries\Client”中删除它。我对 System.Windows.Controls.dll 有类似的问题，但从库中删除它不起作用。我通过添加它的引用、删除它并重建项目来修复错误。

# css - 卡在媒体查询上

> ID：16103299
> 
> 赞同：2
> 
> 时间：2013-04-19T11:13:16.933
> 
> 标签：css, media-queries

我一直在尝试扩展几个媒体查询。

我有一个基于最大宽度的查询和一个基于最小宽度的查询，如下所示：

```
@media only screen and (max-width: 600px) {
/* styling goes here */
}

@media only screen and (min-width: 600px) {
/* styling goes here */
} 
```

我想扩展第一个查询以使其在任何识别为纵向的设备上启用，并同样扩展第二个查询以在设备不处于纵向模式时触发。

无论设备宽度如何，第二个媒体查询（基于最小宽度）都不应在纵向模式下应用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:15:49.123

您可以添加`and (orientation:portrait)`或添加`and (orientation:landscape)`到您的媒体查询。

例如：

```
@media only screen and (max-width: 600px) and (orientation:portrait) {
   /* styling goes here */
}

@media only screen and (min-width: 600px) and (orientation:landscape) {
   /* styling goes here */
} 
```

***已编辑*** 根据您的 JS Bin 示例，尽管我仍然不能 100% 确定您的问题是什么，但您可以通过从第二个查询中删除 (orientation: Landscape) 来删除您得到的“空白间隙”。我怀疑第一个没有在您的 ipad 中触发，因为 max-width 是错误的，我相信 ipad 应该是 768px（请参阅[The Responsinator](http://www.responsinator.com/)以获取指南）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:05:48.227

我认为您不是在寻找`AND`运算符，而是`OR`在 CSS 世界中只是一个逗号的运算符。因此，您可以执行以下操作：

```
@media only screen and (max-width: 600px),
screen and (orientation:portrait) {
     /* styling goes here */
} 
```

However, in order to achieve the result you wish you would have to invert the order of your queries so that they can **cascade correctly**. This is because, for example, in the iPad, even in *portrait* orientation you are going to have a `min-width: 600px`, evaluating one of the two statements to true and hence triggering the media query.

By putting the `portrait` media query below the `landscape` one, you will actually make sure that when the `orientation` query evaluates to `TRUE` you will be overriding the previous styling.

You can see a modified working version of your JSBin here:

`[**Working example**](http://jsbin.com/ikovud/3)`

Try this with the iPad. Though being larger than 600px in portrait mode, it will still display: *small-screen*.

# jquery - jquery选项卡旁边的浮动元素不起作用

> ID：16103301
> 
> 赞同：1
> 
> 时间：2013-04-19T11:13:18.370
> 
> 标签：jquery, html

我有一个浮动在`jquery's`选项卡左侧的 div。

这是浮动元素的 css ：

```
#twitter{
    width: 200px;
    height: 300px;
    border: 1px solid black;
    text-align: center;
    float: left;
} 
```

这是html结构：

```
<body>
    <div id="header">
        <img src="<? echo base_url();?>image/header.jpg">
    </div>
    <div id="twitter"> 
        <h1>TWITER</h1>
    </div>
    <div id="tabs">
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#gallery">Gallery</a></li>
            <li><a href="#about">About Me</a></li>
            <li><a href="#book">All About Love</a></li>
        </ul>
    <div id="home">
        <p><?php echo $home; ?></p>
    </div>
    <div id="gallery">
        <p><?php echo 'Gallery'; ?></p>
    </div>
    <div id="about">
        <?php echo $about; ?>
    </div>
    <div id="book"></div>
    </div>
</body> 
```

这就是我从上面的代码中得到的：

![在此处输入图像描述](https://i.stack.imgur.com/bbCMZ.png)

我应该怎么做才能使 div ( `#twitter`) 浮动**在**选项卡的左侧？

**编辑**

这是我添加 float:left 到选项卡后发生的事情：

![在此处输入图像描述](https://i.stack.imgur.com/92zrw.png)

感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:17:57.527

如果您将标签（#tabs）向左浮动，那就足够了。

# perl - 在多个输出中拆分文件

> ID：16103306
> 
> 赞同：0
> 
> 时间：2013-04-19T11:13:37.747
> 
> 标签：perl, unix, split, truncate

我试图将一个大文件分成不同的文件，其中包含文件中每个变量的单个信息。

我的**输入**文件如下所示：

```
#CHROM  POS     ID      REF     ALT     QUAL    FILTER  INFO    FORMAT  PID008SM

...info here 1.....

#CHROM  POS     ID      REF     ALT     QUAL    FILTER  INFO    FORMAT  CL001-SC

....info here 2....

#CHROM  POS     ID      REF     ALT     QUAL    FILTER  INFO    FORMAT  CL001-SC

....info here 3....        

#CHROM  POS     ID      REF     ALT     QUAL    FILTER  INFO    FORMAT  PID008SM

....info here 4.... 
```

在这种情况下，我想创建两个输出文件（一个用于 PID008SM 和 CL001-SC），其中包含与每个文件相关的信息。

**CL001-SC 的输出：**

```
#CHROM  POS     ID      REF     ALT     QUAL    FILTER  INFO    FORMAT  CL001-SC

....info here 2...

....info here 3... 
```

**PID008SM 的输出**

```
#CHROM  POS     ID      REF     ALT     QUAL    FILTER  INFO    FORMAT  PID008SM
....info here 1....

....info here 4.... 
```

我使用的脚本在 Perl 中，但任何建议都非常受欢迎。先感谢您。

代码：

```
#!/usr/bin/perl;
use strict;
use warnings;

my $file1 = $ARGV[0] ;
my $file2 = $ARGV[1];

open (F1, $file1); #Opens first .vcf file for comparison
open (F2, $file2); #2nd for comparison

my %file;

## Create the hash key with each line of the file2
while (<F2> ) {
        #chomp;
        $file{$_}='';
}

## Print the line , if key   exist in the hash ;       

foreach my $string (<F1>) {

        if ( exists $file{$_}) and ($string =~ /(#)(.+?)(#)/s) {
                print $string;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:04:42.920

大概是这样的？

```
use strict;
use warnings;

open my $fh, '<', 'chrom.txt' or die $!;

my %fh;

while (<$fh>) {

  if ( /^#CHROM/ ) {

    my $name =  (split)[-1];

    if ($fh{$name}) {
      select $fh{$name};
      next;
    }

    my $file = "$name.txt";
    open $fh{$name}, '>', $file or die qq{Unable to open "$file" for output: $!};
    print STDOUT qq{Created file "$file"\n};
    select $fh{$name};
  }

  print;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:03:46.400

```
awk '/^#CHROM/{typ=$10;a[$0]++} a[$0]<2{print >> typ}' inputFile 
```

这个 awk 脚本似乎可以工作 +

# jquery - jquery 验证引擎总是在 ajax 验证上得到相同的响应

> ID：16103307
> 
> 赞同：0
> 
> 时间：2013-04-19T11:13:44.733
> 
> 标签：jquery, ajax, coldfusion, jquery-validation-engine

我有 jquery 验证引擎验证表单。例如，检查 mobileno 的代码已经存在于数据库中：

```
MobileNumber/Login Id : 
<input type="text"  class="k-textbox validate[required,custom[phone],ajax[ajaxMobileCallCfm]]  text-input" value="" name="mobileno"  id="mobileno"/> 
```

并调用验证引擎

```
jQuery(document).ready(function()
{
            jQuery("#register").validationEngine();

}); 
```

语言文件中的内联验证规则(jquery.validationEngine-en)

```
"ajaxMobileCallCfm": {
                    "url": "checkmobileno.cfm",
                    "alertTextOk": "* This username is available",
                    "alertText": "* This user is already taken",
                    "alertTextLoad": "* Validating, please wait"
                } 
```

和 checkmobileno.cfm

```
<cfset mobileno=#mobileno#>
<cfset arrayToJs = ArrayNew(2)>
  <cfif #mobileno# eq "8888888888">
    <cfset arrayToJs[1][1]="mobileno">
    <cfset arrayToJs[1][2]=true>
    <cfset arrayToJs[1][3]='This user is available'>
 <cfelse>
        <cfset arrayToJs[1][1]="mobileno">
        <cfset arrayToJs[1][2]=false>
        <cfset arrayToJs[1][3]='This user is already taken'>
  </cfif>

 <cfset theJSON = #SerializeJSON(arrayToJs)#>

<cfoutput> 
 #theJSON#
</cfoutput> 
```

现在，检查移动设备是否可用于 blur 或 keyup 事件。

当我尝试使用数字时，它总是显示*** 此用户已被占用**。请帮助我解决问题所在。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:02:43.283

正如西蒙所说，

```
<cfif mobileno eq "8888888888">
    <cfset arrayToJs[1][1]="mobileno">
    <cfset arrayToJs[1][2]=true>
    <cfset arrayToJs[1][3]='This user is available'>
<cfelse> 
```

表示唯一可用的号码是 8888888888

我认为您的意思是 `<cfif mobileno neq "8888888888">`或尚未采用任何数字列表。我假设最终产品会检查数据库并且看起来更像`<cfif not qUsedNumbers.recordCount>`

还...

```
<cfset mobileno=#mobileno#> <!--- is redundant--->

<!--- and you don't need so many pound signs. --->
<cfset mobileno=#mobileno#> 
<!--- should be --->
<cfset mobileno=mobileno> 

<cfif #mobileno# eq "8888888888"> 
<!--- should be --->
<cfif mobileno eq "8888888888">

<cfset theJSON = #SerializeJSON(arrayToJs)#> 
<!--- should be --->
<cfset theJSON = SerializeJSON(arrayToJs)> 
```

# android - 如何为 android 项目构建 JAR

> ID：16103308
> 
> 赞同：0
> 
> 时间：2013-04-19T11:13:47.953
> 
> 标签：android, maven

我正在做一个小项目以允许 cookie 持久存在。我想将该项目制作为 JAR，以便其他开发人员可以在该项目中使用它。目前我可以将项目构建为 APKLIB，但这似乎没有必要，因为不需要资源。如果我将包装更改为 JAR，我会在构建时收到以下错误

结果 ：

> 测试错误：
> shouldAddCookie(com.doward.persistantcookietest.PersistantCookieStoreTest): java.lang.ClassNotFoundException: 在获取 com.doward.persistantcookies.R 的类文件时捕获异常
> shouldClearAllCookies(com.doward.persistantcookietest.PersistantCookieStoreTest): java. lang.ClassNotFoundException：在获取 com.doward.persistantcookies.R 的类文件时
> 捕获异常。持久cookies.R

POM 看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.doward</groupId>
    <artifactId>persistantcookiestore</artifactId>
    <version>1</version>
    <packaging>jar</packaging>
    <name>persistantcookies</name>

    <dependencies>
        <dependency>
            <groupId>org.json</groupId>
            <artifactId>json</artifactId>
            <version>20090211</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.pivotallabs</groupId>
            <artifactId>robolectric</artifactId>
            <version>1.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>android</groupId>
            <artifactId>android</artifactId>
            <version>4.2.2_r2</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.3.2</version>
                <configuration>
                    <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                    <sdk>
                        <platform>17</platform>
                    </sdk>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
                <extensions>true</extensions>
            </plugin>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:23:07.747

如果您只想从文件构建一个 JAR 文件`.class`而没有资源，例如没有与布局、值、颜色等相关的 XML 文件，那么您可以从命令行执行此操作：

`jar -cvf <filenameorjar.jar> <files to be included>`

例子：

`jar -cvf cookiepersist.jar com/*`

这将在当前工作目录中创建一个 jar 文件，并将`.class`该目录中的所有文件包含`com`在当前工作目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:26:36.873

如果您有一个 andorid 项目并且希望在另一个项目中使用它，您可以将该项目作为库项目并在另一个 Android 项目中引用它。这也可以包括您的资源。

[http://developer.android.com/tools/projects/projects-eclipse.html](http://developer.android.com/tools/projects/projects-eclipse.html)

您导出不引用​​ android 中资源的实用程序类，即纯 java 类。如果你使用 eclipse 你可以看看下面的教程

[http://androiddevelopement.blogspot.in/2011/01/creating-jar-file-in-eclipse.html](http://androiddevelopement.blogspot.in/2011/01/creating-jar-file-in-eclipse.html)

# sql-server - 使用链接服务器时 MSSQL 是否总是复制表

> ID：16103313
> 
> 赞同：0
> 
> 时间：2013-04-19T11:13:55.687
> 
> 标签：sql-server, linked-server

在谷歌搜索并查看链接服务器上的 MS 文档 ( [http://msdn.microsoft.com/en-us/library/ms188279.aspx](http://msdn.microsoft.com/en-us/library/ms188279.aspx) ) 后，我仍然无法得到以下问题的明确答案。我正在考虑链接 2 个 SQL Server，以便可以从源数据库创建数据子集并将其插入输出数据库（在插入之前进行重复检查），但我不知道 MSSQL 如何处理使用链接数据库的查询。

据我所知，以下查询将导致 LocalServer 下载 FarAwayTable 然后在本地执行查询（在我的情况下这会影响性能）：

```
SELECT 
    f.* 
FROM 
    FarAwayServer.FarAwayDB.dbo.FarAwayTable f, 
    LocalServer.LocalDb.dbo.LocalTable l
WHERE
    f.ID = l.ID 
```

我的问题是，MSSQL 会为以下查询做同样的事情，还是只下载结果（在 FarAwayServer 上执行整个查询）：

```
SELECT 
    * 
FROM 
    FarAwayServer.FarAwayDB.dbo.FarAwayTable f
WHERE
    f.ID = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:22:15.980

它的行为仍然相同（将下载*FarAwayTable表并在本地执行查询）。*如果你想在*FarAwayServer*上执行查询，你应该使用[OPENQUERY](http://msdn.microsoft.com/en-us/library/ms188427.aspx)：

```
SELECT * FROM OPENQUERY([FarAwayServer], 'SELECT * FROM FarAwayDB.dbo.FarAwayTable f WHERE f.ID = 1') 
```

# map - 使用通过关键字从地图中提取的值创建 Clojure 向量

> ID：16103317
> 
> 赞同：1
> 
> 时间：2013-04-19T11:13:57.443
> 
> 标签：map, vector, clojure, key-value

我有一个 Clojure 映射向量用作查找表：

```
(def data 
  [{map1},{map2},...,{nth-map}]) 
```

向量中的每个映射都包含两个键/值对：

```
{:key1 "Value1", :key2 "Value2"} 
```

所以整个结构看起来是这样的：

```
(def data
  [{:key1 "Value1-1", :key2 "Value2-1"}, ; map1
   {:key1 "Value1-2", :key2 "Value2-2"}, ; map2
                     |
                     |
                     V
   {:key1 "Value1-n", :key2 "Value2-n"}]) ; nth-map 
```

我想将其迁移到数据库表中。我已经有一个将值插入表行的函数。它需要一个向量，向量中的每个项目代表行中的一列：

```
(defn insert-row [column1-value column2-value]
  (sql/with-connection (System/getenv "DATABASE_URL")
    (sql/insert-values
      :table                           ; table name
      [:column1 :column2]              ; table column names
      [column1-value column2-value]))) ; values to be inserted into row 
```

我需要的是一个函数，它遍历整个地图向量，并为每个地图创建一个仅包含该地图值的向量：

```
[Value1 Value2] 
```

我想我可以使用我现有的数据库函数`insert-row`作为参数`map`：

```
(map insert-row values-from-map) 
```

其中`values-from-map`表示包含原始向量中每个映射的内部向量（每个都包含其各自的值）的外部向量：

```
[[Value1-1 Value2-1]
 [Value1-2 Value2-2]
 [Value1-n Value2-n]] 
```

这将获取创建的每个向量并将其传递给`insert-values`函数。

我可以创建一个包含一个关键字的所有值的向量：

```
user=> (vec (map :key1 data))      
["Value1" "Value2" ... "nth=Value"] 
```

如何创建包含所有内部向量的外部向量？

```
[[Value1-1 Value2-1][Value1-2 Value2-2]...[Value1-n Value2-n]] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T11:34:15.337

```
user=> (vec (for [m data] ((juxt :key1 :key2) m)))
[["Value1-1" "Value2-1"] ["Value1-2" "Value2-2"]] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T11:27:54.717

假设您仍然将地图矢量定义为“数据”：

```
(into [] (map #(into [] (vals %)) data)) 
```

# mongodb - 有没有办法在 Pentaho Kettle 的 MongoDB 输出步骤中使用动态键？

> ID：16103320
> 
> 赞同：1
> 
> 时间：2013-04-19T11:14:16.243
> 
> 标签：mongodb, pentaho, kettle

使用 - Pentaho Kettle 4.4

基本上我想要来自 TABLE INPUT 步骤的列中的值，作为 mongo 文档的键。

请告诉问题是否不清楚，我需要添加一个示例。

# windows - windows什么时候释放线程？

> ID：16103321
> 
> 赞同：0
> 
> 时间：2013-04-19T11:14:23.990
> 
> 标签：windows, debugging, resources, windbg

我们的产品会消耗大量的windows资源，比如socket句柄、内存、线程等等。通常有 700-900 个活动线程，但在某些情况下产品可以快速创建新线程并做一些工作，然后关闭它。我遇到了我们产品的崩溃内存转储。使用**~*** windbg 命令，我可以看到 817 个活动线程，但是当我运行*!handle*命令时，它会打印出以下摘要：

```
类型计数
无 15
事件 2603
第 13 条
文件 705
目录 4
突变体 32
窗口站 2
信号量 789
钥匙 208
过程 1
线程 5766
桌面 1
IO完成308
定时器 276
键控事件 1
TpWorkerFactory 48

```

因此，实际上进程拥有 5766 个线程。那么，我的问题是，Windows 何时真正释放进程的句柄？是否有可能出现某种延迟或兑现？有人可以解释这种行为吗？我不认为我们有处理泄漏，但我们在系统的遗留部分有奇怪的行为，为小任务快速创建和关闭线程。另外我想指出，我们不太可能同时运行超过 1000 个线程，我对此非常确定。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:11:19.187

当您说`So, actually process holds 5766 threads.`时，您真正的意思是该进程拥有 5766 个*线程句柄*。

即使线程可能不再运行，无论是调用[`ExitThread()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682659%28v=vs.85%29.aspx)/[`TerminateThread()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686717%28v=vs.85%29.aspx)或从 . 返回的结果[`ThreadProc`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686736%28v=vs.85%29.aspx)，该线程的任何句柄都将保持有效。这使得在已完成其工作的线程的句柄上调用[GetExitCodeThread()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683190%28v=vs.85%29.aspx)之类的事情成为可能。

不幸的是，这意味着您必须[记住调用`CloseHandle()`](https://stackoverflow.com/questions/3959473/must-i-closehandle-on-a-thread-handle)而不是让它泄漏。[创建线程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682516%28v=vs.85%29.aspx)的 MSDN 示例在某种程度上涵盖了这一点。

我要注意的另一件事是，在不超过 1000 个运行线程的地方，您可能会[耗尽可用于 32 位进程的虚拟地址空间量，](https://blogs.msdn.com/b/oldnewthing/archive/2005/07/29/444912.aspx?Redirected=true)因为默认情况下每个线程为其堆栈保留 1MB 的地址空间。

# ios - 混合 iOS UIKit 和 Cocos2d

> ID：16103322
> 
> 赞同：7
> 
> 时间：2013-04-19T11:14:25.800
> 
> 标签：ios, uiview, cocos2d-iphone, uikit

是否可以使用 Cocos2D 视图开发应用程序混合`UIViewController`和 iOS 特定 API 元素？

Cocos2D 应用程序在 a 上运行`UIView`，因此我想可以在一个视图 (Cocos2D) 和另一个视图 (iOS) 之间切换，这是正确的吗？有没有这样做的应用程序的好例子？

核心思想是使用 Cocos2D 开发一些图形动画，而另一些则使用 UIKit。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-21T13:13:10.177

也许考虑使用 SpriteKit，因为它不会增加应用程序的占用空间并且已经处于非常可用的状态。它使用与 cocos2d 相同的概念，如果您已经了解 cocos2d，这对您来说非常容易。它也更适合 UIKit 环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-01T19:00:54.127

实际上，您可以`CCDirector.sharedDirector().view`随时在 Cocos2D 运行的应用程序中添加任何 UIView 作为子视图。

我敢打赌，你真正应该混合使用 Cocos2D 和 UIKit 的唯一原因是在 UIKit 中创建菜单和其他 UI 并使用 Cocos2D 运行游戏场景。为此，您可以简单地找到一个初始化 Cocos2D 的地方，并将其替换为您自己的 UIKit 东西，然后您可以在任何您想要的地方使用您替换的代码运行 Cocos2D 场景。如果你想这样做，你正在寻找的方法是

```
- (void) setupCocos2dWithOptions:(NSDictionary*)config 
```

# wifi - 如何计算 IEEE 802.11 CRC-32 FCS？

> ID：16103328
> 
> 赞同：4
> 
> 时间：2013-04-19T11:14:50.487
> 
> 标签：wifi, checksum, crc

这是来自 IEEE Std 802.11-2012 Clause 8.2.4.8 FCS 字段：

![在此处输入图像描述](https://i.stack.imgur.com/slGsf.png)

我无法理解最后两段：

1.  “除法的初始余数预设为全1”是什么意思，为什么我们需要这样做？

2.  “......计算字段和FCS的串行输入位......”是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T01:05:52.553

1.  将 CRC 初始化为全 1 避免了任何长度的零字符串给出零 CRC 的问题。

2.  阅读[罗斯威廉姆斯 CRC 教程](http://zlib.net/crc_v3.txt)。

# c# - 触发器和visualStateManager之间的WPF模板差异

> ID：16103330
> 
> 赞同：7
> 
> 时间：2013-04-19T11:15:06.510
> 
> 标签：c#, wpf, triggers, visualstatemanager

我想知道触发器和visualStateManager有什么区别。我正在制作 ComboBox 模板，在 MSDN 官方网站 ( [http://msdn.microsoft.com/en-us/library/ms752094.aspx](http://msdn.microsoft.com/en-us/library/ms752094.aspx) ) 上，他们使用 VisualStateManager 更改选定组合框项的颜色。但是你可以对触发器做同样的事情。
有什么区别吗？？例如 VisualStateManager 将“更快”或者我不知道。我想知道什么更好用。

我是模板的菜鸟，我不太了解它，所以我现在可以使用的是触发器（我理解），但 VisualStateManager 和一些故事板现在对我来说还很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T12:49:45.790

由于我们的编程世界试图分离人们之间的关注点，我们可以得出结论，VisualStateManager 是一个非常有用的工具，可以清晰地分离职责。

有明显的职责分离：控件作者指定控件的视觉状态，并确定控件何时进入每个视觉状态；模板作者指定控件在每个视觉状态下的样子。

[看这篇文章](http://blogs.msdn.com/b/wpfsdk/archive/2009/02/27/the-visualstatemanager-and-triggers.aspx)

# node.js - 有没有nodejs模板引擎支持像PHP Smarty这样的模板继承功能？

> ID：16103334
> 
> 赞同：3
> 
> 时间：2013-04-19T11:15:25.807
> 
> 标签：node.js, smarty, template-engine, template-inheritance

有没有nodejs模板引擎支持像PHP Smarty这样的模板继承功能？

```
{block name=head}
default layout content
{/block}

{block name=head}
if page have customize the content it display the customize content, otherwise display the layout content
{/block} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:03:42.350

试试dust.js的LinkedIn分支：[https ://github.com/linkedin/dustjs](https://github.com/linkedin/dustjs)

它看起来像这样：

> {+head}默认布局内容{/head}

dust.js 还支持以下内容： - 异步/流式操作 - 浏览器/节点兼容性 - 扩展 Mustache/ctemplate 语法 - 干净的低级 API - 高性能 - 可组合模板

# php - 从数据库 symfony2 中删除一个实体

> ID：16103338
> 
> 赞同：0
> 
> 时间：2013-04-19T11:15:47.560
> 
> 标签：php, symfony

我想删除与另一个实体的一对一关系相关的实体。但我总是失败。这是我尝试过的代码：

```
$adminid=$centrex->getDefadmin()->getId();
$defadmin = $em->getRepository('TelnOperatorBundle:Defadmin')->find($adminid);
$em->remove($defadmin);
    $em->flush(); 
```

有人可以帮助我吗？问题如下：

```
An exception occurred while executing 'DELETE FROM DefAdmin WHERE id = ?' with params {"1":"5"}:

SQLSTATE[23000]: Integrity constraint violation: 1451 Cannot delete or update a parent row: a foreign key constraint fails (`symfony`.`centrex`, CONSTRAINT `FK_63C80A4692343E35` FOREIGN KEY (`defadmin_id`) REFERENCES `defadmin` (`id`)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:21:35.093

请查看教义文档。关于与协会合作：

[http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html)

特别是删除时的级联您会感兴趣，请参阅链接文档上的第 8.6 点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:36:19.370

`onDelete=Cascade`将此添加到您的实体上

# android - Canvas 上的 Android 文本大小与 TextView 中的文本大小不同

> ID：16103344
> 
> 赞同：5
> 
> 时间：2013-04-19T11:15:59.057
> 
> 标签：android, textview, surfaceview

我有一个 SurfaceView 和 TextView，我在其上绘制文本

```
Paint p = new Paint();
p.p.setTextSize(14);
canvas.drawText(....
TextView  text =...
text.setTextSize(14); 
```

在某些设备上，两个文本看起来完全一样。但在模拟器和三星 Galaxy III 上，画布上的文本要小两倍。为什么？如何在所有设备上获得相同的尺寸？

SurfaceView 和 TextView 同时出现在屏幕上。TextView 位于几个 Layers 上，并覆盖在 SurcafeView 的 Canvas 上。

此致

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T11:25:03.880

您必须在 android 中使用与设备无关的像素（dp/dip）才能在所有设备上获得相同的尺寸。如果是文本，则存在与比例无关的像素（sp）。查看更多关于这些的信息以便更好地理解。

> 要将像素值转换为 dp，请使用以下代码：

```
public static float convertPixelsToDp(float px,Context context){

  DisplayMetrics metrics = context.getResources().getDisplayMetrics();
  float dp = px / (metrics.densityDpi / 160f);
  return dp;

} 
```

> 要将 dp 值转换为像素，请使用以下代码：

```
public static float convertDpToPixel(float dp,Context context){

  DisplayMetrics metrics = context.getResources().getDisplayMetrics();
  float px = dp * (metrics.densityDpi/160f);
  return px;

} 
```

只需根据您的要求调用您想要的任何方法。

# cordova - iPhone上的Phonegap + Jquery Mobile changePage总是在登陆所需页面之前发出白色闪烁

> ID：16103345
> 
> 赞同：2
> 
> 时间：2013-04-19T11:16:01.040
> 
> 标签：cordova, jquery-mobile

我有一个使用 jquery mobile 1.3.1 制作的 cordova 2.4.0 应用程序。

问题在于，在每次更改页面时，使用 changePage 会在切换到新页面之前显示白色背景 1-2 秒。

我只在 iPhone 上得到这种行为（尚未在 iPad 上测试过），但在 android 2.1 手机和 android 4.0.3 平板电脑上都可以正常工作。

我为每个页面使用单独的文件，例如 index.html、login.html、register.html。我什至尝试将页面 div 放入 index.html 并使用 $('#page-id') 参数调用 changePage，但白色背景问题仍然存在。

到目前为止我没有成功的尝试：

*   $.mobile.defaultPageTransition = '无';
*   .ui-page{ 背面可见性：隐藏；-webkit-backface-visibility：隐藏；/* Chrome 和 Safari */ -moz-backface-visibility:hidden; /*火狐*/}
*   将 defaultPageTransition 设置为 'slide' 会使白色背景效果不那么尖锐，但它会使整个页面过渡变得非常缓慢，并且有时会出现奇怪的行为。
*   我尝试使用 data-prefetch="true" 预取页面，但仍然没有解决方案

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T06:22:42.657

`data-position="fixed"`我建议您从 HTML中删除所有内容。我有同样的问题，这解决了“白色闪烁”问题。

阅读更多： [https ://github.com/jquery/jquery-mobile/issues/4024](https://github.com/jquery/jquery-mobile/issues/4024)

# java - 为什么空正则表达式和空捕获组正则表达式返回字符串长度加一个结果

> ID：16103346
> 
> 赞同：2
> 
> 时间：2013-04-19T11:16:01.090
> 
> 标签：java, regex, string

您如何解释空正则表达式和空捕获组正则表达式返回字符串长度加一个结果？

代码

```
public static void main(String... args) {
    {
        System.out.format("Pattern - empty string\n");
        String input = "abc";
        Pattern pattern = Pattern.compile("");
        Matcher matcher = pattern.matcher(input);
        while (matcher.find()) {
            String s = matcher.group();
            System.out.format("[%s]: %d / %d\n", s, matcher.start(),
                    matcher.end());
        }
    }
    {
        System.out.format("Pattern - empty capturing group\n");
        String input = "abc";
        Pattern pattern = Pattern.compile("()");
        Matcher matcher = pattern.matcher(input);
        while (matcher.find()) {
            String s = matcher.group();
            System.out.format("[%s]: %d / %d\n", s, matcher.start(),
                    matcher.end());
        }
    }
} 
```

输出

```
Pattern - empty string
[]: 0 / 0
[]: 1 / 1
[]: 2 / 2
[]: 3 / 3
Pattern - empty capturing group
[]: 0 / 0
[]: 1 / 1
[]: 2 / 2
[]: 3 / 3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T11:19:51.080

正则表达式引擎被硬编码以在零长度匹配时前进一个位置（否则为无限循环）。您的正则表达式匹配零长度子字符串。每个字符之间都有零长度的子字符串（想想“每个字符之间的间隙”）；此外，正则表达式引擎还考虑字符串有效匹配位置的开始和结束。因为一个长度的字符串`N`包含`N+1`字母之间的间隙（计算开始和结束，正则表达式引擎会这样做），你会得到`N+1`匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T11:21:34.503

正则表达式引擎也会考虑字符前后的位置。您可以从以下事实中看出这一点：它们具有`^`（字符串开头）、`$`（字符串结尾）和`\b`单词边界之类的内容，它们在某些位置匹配而不匹配任何字符（因此在字符之间/之前/之后）。因此，我们有必须考虑的字符之间的 N-1 个位置，以及第一个和最后一个位置（因为`^`和`$`将分别匹配那里），这为您提供了 N+1 个候选位置。所有这些都匹配一个完全不受限制的空模式。

所以这里是你的比赛：

```
" a b c "
 ^ ^ ^ ^ 
```

对于 N 个字符，这显然是 N+1。

您将获得与其他允许零长度匹配并且实际上在您的模式中找不到更长匹配的模式相同的行为。例如，尝试`\d*`. 它在您的输入字符串中找不到任何数字，但`*`很乐意返回零长度匹配项。

# node.js - 仅重命名模板时无法在 node.js ejs 模板中查找视图

> ID：16103348
> 
> 赞同：5
> 
> 时间：2013-04-19T11:16:10.043
> 
> 标签：node.js, ejs

我在 ejs 3 模板中有一个 node.js 应用程序渲染。假设 - 有一个模板 course.ejs，它曾经在 node.js 中运行良好。

```
res.render('course', locals); 
```

但是，今天当我尝试更改内容时，比如说-course.ejs，它没有生效，node.js应用程序没有错误，传递给模板的数据也可以。

我什至复制粘贴了这个模板的内容，并使用不同的名称制作了一个新模板 - course1.ejs。并将我的代码更改为

```
res.render('course1', locals); 
```

然后当应用程序再次运行时，它会弹出一个错误说

## 错误：无法查找视图“course1”模板。

node.js 和模板中的代码都没有问题，应该可以按照上面的方式工作。为什么现在不行了。我有我的 ejs 版本 0.8.3，而 express 在 3.1.0 和 node.js 在 0.10.0

这是我的应用程序配置。

```
app.configure(function(){
    app.engine('.html', require('ejs').__express);
    app.set('view engine', 'html');
    app.set('views',__dirname+'/views');

    app.use(express.favicon(__dirname + '/public/favicon.ico'));

  app.use(express.compress({
    filter: function (req, res) {
      return /json|text|javascript|css/.test(res.getHeader('Content-Type'));
    },
    level: 9
  }));  

    app.use(express.bodyParser({uploadDir:__dirname+'/public/uploads',keepExtensions: true,limit: '50mb'}));
    app.use(express.methodOverride());
    app.use(express.cookieParser());
    app.use(express.session({ 
                      cookie: { maxAge: 24 * 60 * 60 * 1000 }
                      ,store: sessionStore
                      ,secret: config.sessionSecret
                      ,key: 'express.sid'
                      ,clear_interval: 3600
    }));

    app.use(express.csrf()); 
    app.use(function(req, res, next){
      res.locals.token = req.session._csrf;
      next();
    });

    app.use(express.static(__dirname+'/public'));   

} 
```

### 我的静态文件在公共文件夹中，所有模板都在视图文件夹中。

我想知道以前有没有人遇到过这种问题

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T11:39:33.320

`.ejs`如果您的模板具有扩展名 ，我认为此配置不起作用：

```
app.engine('.html', require('ejs').__express);
app.set('view engine', 'html'); 
```

使用该配置，Express 将`TEMPLATENAME.html`在您调用时查找`res.render('TEMPLATENAME', ...)`，而不是`TEMPLATENAME.ejs`. 为此，您需要：

```
app.engine('ejs', require('ejs').renderFile);
app.set('view engine', 'ejs'); 
```

这就是`course1`解决的部分：Express 正在寻找`course1.html`，它找不到，所以它会产生你得到的错误（`Failed to lookup view...`）。

但是，我看不出渲染是如何`course.ejs`工作的。也许您有另一条路线正在处理您正在测试的请求？或者你`course.html`在views文件夹中有一个（除了`course.ejs`）？

# typo3 - tt_news template_latest 删除 标签

> ID：16103351
> 
> 赞同：1
> 
> 时间：2013-04-19T11:16:20.907
> 
> 标签：typo3, typoscript, tt-news

我在我的页面中使用 Typo3 和 tt_news，我有两个视图来显示新闻，一个是 ###TEMPLATE_LATEST###，一个是 ###TEMPLATE_SINGLE###。我编辑了我的 tt_news_v3_template，所以它显示为我想要的

两者在模板中都有相同的代码，但 ###NEWS_CONTENT### 有不同的行为，在单个显示中，内容显示良好，他的所有`<p>`标签都在编辑器中生成，但最新的新视图有一个问题，它会删除所有`<p>`标签，所以我的文本格式不正确

有人知道如何解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:56:45.317

使用以下排版：

```
plugin.tt_news.general_stdWrap.parseFunc < lib.parseFunc_RTE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T08:59:51.747

在根的模板脚本中添加以下行

在常量中：

`content.RTE_compliant = 0`

在设置中：

`tt_content.stdWrap.dataWrap >`
`lib.parseFunc_RTE.nonTypoTagStdWrap.encapsLines>`

# django - RichTextContent 中的 Feincms MediaFile

> ID：16103352
> 
> 赞同：6
> 
> 时间：2013-04-19T11:16:38.217
> 
> 标签：django, tinymce, ckeditor, feincms

是否有将 feincms MediaFile 插入 RichTextContent 表单元素（ckeditor 或 tinyMCE）的标准解决方案？我无法在文档中找到任何内容...现在用户需要在 medialib 中复制粘贴一个 url，然后移至页面并粘贴...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:10:21.420

您必须为此创建自己的实现。覆盖dismissRelatedLookupPopup 有点hackish，但Django 似乎缺乏对更好解决方案的支持。

更新：这张[票](https://code.djangoproject.com/attachment/ticket/16260/16260-admin-popup-callback.diff)描述了弹出问题。

在“ckeditor”所在的静态文件夹中，创建一个插件，例如

```
/app/
    /static/
        /app/
            /js/
                /ckeditor/
                    /plugins/
                        /feincms/
                            /images/
                                mediaFile.png
                            plugin.js 
```

插件.js

```
/**
 * Basic sample plugin inserting a feincms mediaFile into the CKEditor editing area.
 */

// Register the plugin with the editor.
// http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.plugins.html
CKEDITOR.plugins.add( 'feincms',
{
    // The plugin initialization logic goes inside this method.
    // http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.pluginDefinition.html#init
    init: function(editor)
    {
        // Define an editor command that inserts a feincms. 
        // http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#addCommand
        editor.addCommand( 'insertMediaFile',
            {
                // Define a function that will be fired when the command is executed.
                // http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.commandDefinition.html#exec
                exec : function(editor)
                {
                    // Define your callback function
                    function insertMediaFile(imageUrl) {
                        // Insert the imageUrl into the document. Style represents some standard props.
                        // http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#insertHtml
                        editor.insertHtml('<img src="/media/' + imageUrl + '" style="float:left;margin-right:10px;margin-bottom:10px;width:200px;" />');
                    }

                    var imageUrl;
                    window.dismissRelatedLookupPopup = function (win, chosenId) {
                        imageUrl = $(win.document.body).find('#_refkey_' + chosenId).val();
                        insertMediaFile(imageUrl);
                        var name = windowname_to_id(win.name);
                        var elem = document.getElementById(name);
                        if (elem) {
                            if (elem.className.indexOf('vManyToManyRawIdAdminField') != -1 && elem.value) {
                                elem.value += ',' + chosenId;
                            } else {
                                document.getElementById(name).value = chosenId;
                            }
                        }
                        win.close();
                    };

                    var win = window.open('/admin/medialibrary/mediafile/?pop=1', 'id_image', 'height=500,width=800,resizable=yes,scrollbars=yes');
                    win.focus();
                }
            });
        // Create a toolbar button that executes the plugin command. 
        // http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.ui.html#addButton
        editor.ui.addButton( 'feincms',
        {
            // Toolbar button tooltip.
            label: 'Insert MediaFile',
            // Reference to the plugin command name.
            command: 'insertMediaFile',
            // Button's icon file path.
            icon: this.path + 'images/mediaFile.png'
        } );
    }
} ); 
```

确保将插件添加到 ckeditor 初始化脚本，例如

```
{ name: 'insert', items : [ 'feincms','HorizontalRule','SpecialChar' ] }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:08:41.937

从来没听说过。如果您总是（或有时）需要与 RichTextContent 关联的 MediaFile，请编写您自己的内容类型：

```
from feincms.module.medialibrary.fields import MediaFileForeignKey
from feincms.content.richtext.models import RichTextContent

class RichTextAndMFContent(RichTextContent):
    mf = MediaFileForeignKey(MediaFile)

    class Meta:
        abstract = True

    def render(self, **kwargs):
        ... 
```

# tfs - TF Build 2010 试图访问我的 System32 目录

> ID：16103353
> 
> 赞同：0
> 
> 时间：2013-04-19T11:16:42.087
> 
> 标签：tfs, continuous-integration, tfsbuild

我正在运行 TF Build 2010。我在机器上授予了“VS Team Foundation Build Service Host”服务管理员权限（用于测试目的）。

我使用的是未修改的默认构建模板，并且我有一个简单直接的解决方案（没有构建前或构建后的东西，也没有单元或集成测试）。该解决方案是 .NET 4.5 和 C++/CLI 项目的混合。

每次我构建时，构建都会报告“一半成功”，因为它无法访问 C:\Windows\system32[some directory] ​​上的某个目录

1.  如果我在此目录上明确设置服务帐户（运行构建服务的帐户）对该文件夹具有管理员权限（用于测试），则问题仍然存在。
2.  如果我从 system32 中删除目录（再次测试！），TF Build 将报告 system32 中的另一个目录。
3.  重新启动机器没有帮助。

1 个错误，0 个警告 对路径“C:\WINDOWS\system32\config”的访问被拒绝。

**我不确定为什么 TF Build 2010 尝试访问 system32，因为日志没有帮助，我不确定为什么当它具有本地管理员权限时它仍然拒绝访问。**

一些日志如下：

```
For Each TestSpec in TestSpecs
Initial Property Values
Values = Run tests in assemblies matching **\*.Test.Unit.dll;**\*.Test.Integration.dll

00:00
Try Run Tests

00:00
Run MSTest for Test Assemblies

00:00
Assign spec to testAssembly
Initial Property Values
Value = Run tests in assemblies matching **\*.Test.Unit.dll;**\*.Test.Integration.dll
Final Property Values
To = Run tests in assemblies matching **\*.Test.Unit.dll;**\*.Test.Integration.dll
Value = Run tests in assemblies matching **\*.Test.Unit.dll;**\*.Test.Integration.dll

00:00
Find Test Assemblies
Initial Property Values
MatchPattern = D:\Builds\2\Applications\Main Build\Binaries\**\*.Test.Unit.dll;**\*.Test.Integration.dll
There were no matches for the search pattern D:\Builds\2\Applications\Main Build\Binaries\**\*.Test.Unit.dll
Final Property Values
MatchPattern = D:\Builds\2\Applications\Main Build\Binaries\**\*.Test.Unit.dll;**\*.Test.Integration.dll
Result = 

00:00
Handle MSTest Exception

00:00
If testException is NOT TestFailureException
Initial Property Values
Condition = True
 Access to the path 'C:\WINDOWS\system32\config' is denied.
Final Property Values
Condition = True 
```

# javascript - 是否可以在javascript函数中传递它

> ID：16103356
> 
> 赞同：0
> 
> 时间：2013-04-19T11:16:51.937
> 
> 标签：javascript

我是 javascript 的新手。在 javascript 中，我正在创建一个 html 复选框并插入到指定的 div 中。在复选框 html 中调用了 onclick 函数。我必须将整个`this`函数传递给函数，或者只传递函数`checked`中的属性。为了更清楚，这是我的代码

```
childrens = childrens + "<div class='span4'><input type='checkbox' class='checkcheck' onclick = 'fillin("+this+");' name='"+name+"' alt='"+fromwhere+"' title='"+key+"'>&nbsp;&nbsp;"+name+"</input></div>";<br>

<script>
    function fillin(test)
    {
        alert(test);
    }
</script> 
```

我在正确的路径上吗？我必须检查复选框是否被选中。

> PS: fromwhere,key,name 动态变化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:18:31.447

可以传入`this`一个 javascript 函数（它只是一个对象）。

```
onclick ="filling(this);" 
```

应该可以工作，它将输入元素传递给函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:20:04.313

不，单击`this`时应引用复选框元素。所以你需要嵌入`this`到字符串中：

```
... onclick="fillin(this);" ... 
```

虽然检查`checked`可以这样做：

```
function fillin(test) {
    if (test.checked) { ... }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T11:24:51.117

改变 -

```
childrens = childrens + "<div class='span4'><input type='checkbox' class='checkcheck' onclick = 'fillin("+this+");' name='"+name+"' alt='"+fromwhere+"' title='"+key+"'>&nbsp;&nbsp;"+name+"</input></div>"; 
```

至 -

```
childrens = childrens + "<div class='span4'><input type='checkbox' class='checkcheck' onclick = 'fillin(this)' name='"+name+"' alt='"+fromwhere+"' title='"+key+"'>&nbsp;&nbsp;"+name+"</input></div>"; 
```

复选框元素将传递给`fillin()`函数。请注意，我已将“this”从 srstring 外部移到其中。

# typescript - WebStorm 中的 TypeScript AMD。烦人的“指定表达式类型”错误

> ID：16103364
> 
> 赞同：5
> 
> 时间：2013-04-19T11:17:20.237
> 
> 标签：typescript, amd, webstorm

我正在 JetBrains WebStorm 中试用 TypeScript。

我在“person.ts”中有一个非常简单的类：

```
export class Person {
  constructor(public name:string, public age:number) {
  }
    toString() {
    return this.name + ", " + this.age;
  }
} 
```

然后，在我的 app.ts 上，我尝试像这样导入它：

```
import nsp = module("person");

export class App {
    start() {
        var my_user:nsp.Person;
        my_user = new nsp.Person("Julian", 111);
        console.log( my_user.toString() );
    }
} 
```

这似乎有效。我可以使用**tsc**编译为 javascript：

```
tsc --module AMD .\public\script\app.ts 
```

我还在 WebStorm 中为 TypeScript 设置了 FileWatcher。没关系。

但是我收到了这个烦人的错误/警告：**“分配的表达式类型人不可分配给类型 export.Person”**

![问题](https://i.stack.imgur.com/xNaxB.png)

有任何想法吗？难道我做错了什么？这是 WebStorm 中的错误吗？

这是我在 GitHub 上的项目：[https](https://github.com/JulianG/typescript-modularization-demo/) ://github.com/JulianG/typescript-modularization-demo/ ，如果您想尝试一下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T11:36:53.267

此错误已在下一个 WebStorm 版本中修复，但同时您可以忽略错误或将表达式组合成一行，看看类型推断是否有帮助：

```
var my_user = new nsp.Person('Julian', 111); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:07:45.050

Fix will be included in the next minor release also (6.0.2). Probably this was caused by [WEB-7117](http://youtrack.jetbrains.com/issue/WEB-7117).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-07T13:42:24.470

文件 -> 设置：搜索“类型不匹配”，您将看到可以禁用它们的检查。

# serialization - 修改 ServiceStack 的 JSON 输出

> ID：16103365
> 
> 赞同：2
> 
> 时间：2013-04-19T11:17:21.237
> 
> 标签：serialization, customization, servicestack

我必须用 ServiceStack 构建一个 REST 服务；响应必须具有特定格式。JSON 和 XML 都将被支持。标准序列化程序不会以我需要的格式返回响应。对于 JSON，包装结果就足够了，例如，如果一个函数返回 Site 对象的列表，JSON 序列化程序会给我 [{...}, ...]，但我需要 {"Sites": [{ ...}，...]}。在这种情况下，请求的内容类型将是“Sites+json”。对于其他功能，“站点”将被其他内容替换。我怎样才能做到这一点？

编辑：XML 必须是 JSON 的直接“翻译”，例如 <Sites>...</Sites> 而不是 {"Sites":...}。标准 XML 序列化的工作方式不同，它也总是放入数据类型。有谁知道如何做到这一点？我想我必须编写自己的 XML 序列化程序并将我所有的 XML 类型（如 Sites+xml，...）映射到它？

# angularjs - AngularJS 引用父控制器

> ID：16103373
> 
> 赞同：0
> 
> 时间：2013-04-19T11:17:43.123
> 
> 标签：angularjs, angularjs-scope

我正在尝试实现以下行为。我正在使用 ng-inculde 包含一个模板，我正在做这样的事情：{{something}}

我希望那个**“东西”**与父控制器范围内的另一个变量具有双重绑定，并能够设置父控制器范围的属性名称。因此，在一个包含中，某些内容将引用一个苹果，而在另一个包含上，某些内容将引用一个橙色。

我所做的是，我编写了一个自定义控制器，它有一个`lookAt(v)`方法，我在使用 ng-include 和 ng-controller 的 div 的 ng-init 中调用此方法。在这种方法中，我试图设置绑定但它不起作用。我假设，父范围已经定义了该变量。

这是我的代码：

```
mod.controller('FooController', ['$scope', function($scope) {
    $scope.lookAt = function (variable) {
        $scope.something=$scope[variable];
    }
}]); 
```

感谢您提供有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:33:41.960

在使用 ng-include 引入的模板中，而不是`{{something}}`use `something()`，其中`something`方法是在父控制器上定义的。

如果需要，您仍然可以初始化变量名称：

```
mod.controller('FooController', ['$scope', function($scope) {
    $scope.initMethod = function(variable) {
       $scope.variable = variable;
    }
    $scope.something = function () {
        return $scope[$scope.variable];
    }
}]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T15:39:48.417

当使用 Controller As Syntax 时，您不能只`$scope.$parent`在消费者（子构造函数）中做，您需要像这样处理父数据对象：`$scope.$parent.vmParent`.

# java - 编译（反编译）到单个 .java 文件

> ID：16103374
> 
> 赞同：-8
> 
> 时间：2013-04-19T11:17:43.843
> 
> 标签：java, jar

是否可以将整个项目（或 .jar）编译为单个 .java 文件？没有必要让它变得漂亮和可读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T11:20:10.330

单个 Java 源文件将施加以下限制：

*   不使用 ( **`public`**) 接口¹．
*   没有 bean 的要求（它们本身必须是公共类）。
*   最大大小的限制（Java 类文件有大小限制 - 每个类文件从内存中大约 65Kb）。

> 1.  @gustafc 接口不必是公开的。

所以我会说，一般不会。

# php - 如何从 phpMyAdmin 获取数据并使用该数据？

> ID：16103381
> 
> 赞同：0
> 
> 时间：2013-04-19T11:18:12.693
> 
> 标签：php, html, database

我必须从 phpMyAdmin 的数据库中获取数据并在一些计算中使用它。我相信我的计算是正确的，但我需要知道如何从数据库中检索数据。我正在尝试获取每个国家/地区获得的金牌，银牌和铜牌的数量，这些数量位于名为 Country 的表格中。我以为我可以使用 for 循环，但数据数量非常多。我想过做

```
for ($i=0;$i>0;$i++){
} 
```

但不确定这是否会永远持续下去并一遍又一遍地在桌子上循环。
*任何帮助表示赞赏。非常感谢*

我已经得到了sql：
`$sql="SELECT country_name, gdp, population, gold, silver, bronze FROM Country ";`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:34:48.363

> 我必须从 phpMyAdmin 的数据库中获取数据

不，你没有。

*PhpMyAdmin 是一个访问*mysql 数据库的工具——数据不在**phpMyAdmin 中**。

> 我需要知道如何从数据库中检索数据

[学习/使用 SQL](http://www.w3schools.com/sql/)

如果您想将数据投影到 HTML 中，那么有很多方法可以做到这一点 - PHP 是一个非常好的解决方案 - 但您仍然需要将查询编写为 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:20:20.840

```
SELECT SUM('gold_medals') as 'sum_gold' ...
//fetch results, iterate through them
echo $row['sum_gold']; 
```

这边走？SUM() 或 COUNT() 应该可以工作，具体取决于您存储数据的方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:26:45.173

对于 PHP 4.* 访问[http://php.net](http://php.net)并学习以下函数： mysql_connect() mysql_select_db() 和 mysql_query() 对于 PHP 5.* 使用 mysqli_connect() 和相关函数

# php - 这是 mcrypt 的安全实现吗？

> ID：16103382
> 
> 赞同：0
> 
> 时间：2013-04-19T11:18:15.613
> 
> 标签：php, encryption, security

我的 Web 应用程序需要连接到多个 FTP 服务器，并且我不希望 FTP 密码以纯文本形式存储。散列不是一种选择，因为我需要双向加密。

这就是我基于 mcrypt 文档用 PHP 编写以下类的原因。它使用 mcrypt 来加密和解密纯文本。密码输入字段用作 $password 变量的输入。

当我使用 50 个字符的强密码加密文本时，我可以认为这种加密是安全的吗？

先感谢您。

```
class Crypto
{
    private $_iv_size, $_iv;

    function __construct()
    {
        $this->_iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_CBC);
        $this->_iv = mcrypt_create_iv($this->_iv_size, MCRYPT_RAND);
    }

    function encrypt($plaintext, $password)
    {       
        $key = pack('H*', hash("SHA512", $password, true));
        $plaintext_utf8 = utf8_encode($plaintext);
        $ciphertext = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key,
        $plaintext_utf8, MCRYPT_MODE_CBC, $this->_iv);
        $ciphertext = $this->_iv . $ciphertext;
        $ciphertext_base64 = base64_encode($ciphertext);

        return $ciphertext_base64;
    }

    function decrypt($ciphertext_base64, $password)
    {
        $key = pack('H*', hash("SHA512", $password, true));
        $ciphertext_dec = base64_decode($ciphertext_base64);
        $iv_dec = substr($ciphertext_dec, 0, $this->_iv_size);
        $ciphertext_dec = substr($ciphertext_dec, $this->_iv_size);
        $plaintext_utf8_dec = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key,
        $ciphertext_dec, MCRYPT_MODE_CBC, $iv_dec);

        return $plaintext_utf8_dec;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:30:43.467

是的，AFAICS(1) 代码应该保护有效载荷。

由于您是从密码中获取用于加密的密钥，因此在您的代码中只实现一次会更简洁（即使它只有一行）。但明显的 WTF 是您通过所有这些麻烦来保护以明文形式发送到 FTP 服务器的 FTP 密码！

1 - 无法*证明*代码是安全的或没有错误的

# android - 隐藏和显示片段？

> ID：16103387
> 
> 赞同：1
> 
> 时间：2013-04-19T11:18:31.513
> 
> 标签：android, android-fragments, show-hide, detach

![在此处输入图像描述](https://i.stack.imgur.com/G1Nro.jpg)

我创建了**Activity-A的****fragment-A**部分，在这里我**隐藏了 fragment-A**并启动了**fragment-B**，工作正常。现在我分离了**fragment-B**，所以**Fragment-A**如何知道现在是时候**唤醒**了，即**SHOW**。

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:05:29.853

使用类`addToBackStack`方法`FragmentTransaction`。交易将被记住，当您在 Fragment B 处于活动状态时按下返回按钮时，将显示 Fragment A。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:31:40.797

覆盖 Fragment B 的 onDetach() 方法以取消隐藏 Fragment A。

如果您需要，这是关于如何让片段/活动相互交互的一个很好的指南：http: [//developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)******

# jsp - 根据从使用 jsp 显示在主页上的用户名网格中选择的用户名编辑配置文件

> ID：16103398
> 
> 赞同：-1
> 
> 时间：2013-04-19T11:19:08.883
> 
> 标签：jsp

我是新手`jsp`。我有一个应用程序，其中有一个主页，顶部有 3 个按钮`new`，`edit`，和一个显示表中所有记录的名字的网格。如果我通过单击它来选择名字，我应该得到一个页面，其中所有与该用户名对应的字段将从数据库中检索并显示并且应该是可编辑的。`delete``newuser`

谁能帮我解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:24:14.033

请参考下面的链接，其中包含一些示例。

[http://www.roseindia.net/jsp/crud-application.shtml](http://www.roseindia.net/jsp/crud-application.shtml)

[http://danielniko.wordpress.com/2012/04/17/simple-crud-using-jsp-servlet-and-mysql/](http://danielniko.wordpress.com/2012/04/17/simple-crud-using-jsp-servlet-and-mysql/)

谢谢。

# android - Infinity PagerAdapter 问题

> ID：16103403
> 
> 赞同：0
> 
> 时间：2013-04-19T11:19:22.050
> 
> 标签：android, android-layout, android-viewpager

我为自己设计了无限适配器`PagerAdapter`，还扩展`ViewPager`了类并自定义`ViewPager`了实现幻灯片机制。

有两个问题：

1-当我实现无限视图时，我失去了平滑滚动`setCurrent(page, smooth scroll)`，这是行不通的！！！

2-`ViewPager` `setPageMargin()`方法对不同的显示密度有不同的结果。

任何建议将不胜感激...

# javascript - 我可以使用像小部件库这样的预编译模块吗？

> ID：16103406
> 
> 赞同：0
> 
> 时间：2013-04-19T11:19:26.107
> 
> 标签：javascript, gwt, compilation, pre-compilation

我将开发一个生成 gwt 应用程序的系统。这些应用程序共享很多小部件，编译时间对我来说非常重要。我想知道我是否可以准备一组小部件，将它们包装在没有入口点的模块中，只编译一次，然后在其他模块从它继承的其他项目中重用编译后的代码。

*   ModuleA（仅共享小部件）
*   Module1（app1 的其余部分，继承自 ModuleA）。
*   Module2（app2 的其余部分，继承自 ModuleA）。

我可以在每次生成新应用程序时编译 Module2 而不重新编译 ModuleA 吗？

我还使用了 superDevMode 和所有编译优化，但这已成为一个原则问题 :)

我不关心 GWT 优化。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:49:52.950

不使用 jsni 就不能编译模块并从其他模块调用它们。

即使使用 jsni，你也不能在模块之间传递除了`primitive`和`Overlay`类型之外的对象。

[我看到的最佳解决方案是您可以使用gwt-exporter](http://code.google.com/p/gwt-exporter/)将小部件从 ModuleA 导出到 javascript ，我前段时间编写的本[教程可以帮助您。](http://code.google.com/p/gwtchismes/wiki/Tutorial_ExportingGwtLibrariesToJavascript_en)

但是在将 ModuleA 导出为 javascript API 之后，您必须在 GWT 中使用 jsni 包装此 api，以便从 ModuleB 和 ModuleC 调用它。

恕我直言，当您排除 ModuleA 时，在编译 ModuleB 时节省时间是不值得的。

想想当你导出 ModuleA 时，你必须编译所有东西，尽管它没有在 ModuleB 中使用。如果您必须使用原始类型和覆盖类型与 ModuleA 交换信息，您在 ModuleB 中的代码将是一团糟。还有很多其他问题。

# jquery - 使用 jQuery 在 iframe 中获取 HTML

> ID：16103407
> 
> 赞同：47
> 
> 时间：2013-04-19T11:19:34.813
> 
> 标签：jquery, iframe

这是我的情况。

我有一个名为 的文件`iframe.html`，其中包含图像幻灯片的代码。代码有点像

```
<html>
  <head>
    <!-- Have added title and js files (jquery, slideshow.js) etc. -->
  </head>

  <body>
    <!-- Contains the images which are rendered as slidehow. -->
    <!-- have hierarchy like 'div' inside 'div' etc. -->
  </body>
</html> 
```

用户可以使用嵌入代码将幻灯片添加到他们的博客或网站（可以来自不同的域）。假设用户必须将幻灯片嵌入其中`index.html`，他们可以通过添加以下行来添加：

```
<iframe id="iframe" src="path_to_iframe.html" width="480" height="320" scrolling="no" frameborder="0"></iframe> 
```

这会将完整的 HTML 代码从`iframe.html`带到`index.html`，现在我需要一种方法来访问 iframe 中的元素来调整它们的一些属性。

就像在代码中一样，iframe 的宽度和高度由用户设置为一些固定尺寸。我想将幻灯片（和包含的图像）的大小调整为 iframe 容器的大小。做这个的最好方式是什么？

`index.html`我尝试通过类似的方式访问 iframe 组件但没有成功

```
$('#iframe').contents(); 
```

但得到错误：

> TypeError：无法调用 null 的方法“内容”

所以，我认为实现`iframe.html`幻灯片应该检查父级的宽度和高度并相应地设置其高度的逻辑。

我很困惑，希望我的问题对大多数人来说都有意义。请随时询问进一步的解释。感谢您的帮助。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-19T11:22:26.300

此行将检索框架的整个 HTML 代码。通过使用其他方法而不是`innerHTML`您可以遍历内部文档的 DOM。

```
document.getElementById('iframe').contentWindow.document.body.innerHTML 
```

要记住的是，这仅在帧源位于同一域时才有效。如果它来自不同的域，跨站点脚本 (XSS) 保护将启动。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-04-19T11:23:44.327

试试这个代码：

`$('#iframe').contents().find("html").html();`

这将返回 iframe 中的所有 html。而不是`.find("html")`你可以使用任何你想要的选择器，例如：`.find('body')`, `.find('div#mydiv')`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-19T11:22:17.957

```
var iframe = document.getElementById('iframe');
  $(iframe).contents().find("html").html(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-06T06:04:57.387

```
$(editFrame).contents().find("html").html(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-23T06:27:05.497

这对我有用，因为它在 ie8 中运行良好。

```
$('#iframe').contents().find("html").html(); 
```

但是如果你喜欢在 jquery 之外使用 javascript，你可以像这样使用

```
var iframe = document.getElementById('iframecontent');
var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
var val_1 = innerDoc.getElementById('value_1').value; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-26T06:31:51.947

如果您在一个***iframe***中有如下的***Div***

 *```
 <iframe id="ifrmReportViewer" name="ifrmReportViewer" frameborder="0" width="980"

     <div id="EndLetterSequenceNoToShow" runat="server"> 11441551 </div> Or

     <form id="form1" runat="server">        
       <div style="clear: both; width: 998px; margin: 0 auto;" id="divInnerForm">          

            Some Text

        </div>
     </form>
 </iframe> 
```

然后您可以使用以下代码找到那些***Div的文本***

```
var iContentBody = $("#ifrmReportViewer").contents().find("body");
var endLetterSequenceNo = iContentBody.find("#EndLetterSequenceNoToShow").text();

var divInnerFormText = iContentBody.find("#divInnerForm").text(); 
```

我希望这会对某人有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-02T00:06:11.167

仅供参考。这是使用 JQuery 执行此操作的方法（例如，当您无法按元素 id 查询时很有用）：

```
$('#iframe').get(0).contentWindow.document.body.innerHTML 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-16T05:55:23.900

如果在 iframe.html 中加载 jquery，这可能是另一种解决方案。

```
$('#iframe')[0].contentWindow.$("html").html() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-15T11:38:44.110

为什么不试试 Ajax，检查代码第 1 部分或第 2 部分（使用注释）。

```
$(document).ready(function(){ 
	console.clear();
/*
    // PART 1 ERROR
    // Uncaught SecurityError: Failed to read the 'contentDocument' property from 'HTMLIFrameElement': Sandbox access violation: Blocked a frame at "http://stacksnippets.net" from accessing a frame at "null".  Both frames are sandboxed and lack the "allow-same-origin" flag.
	console.log("PART 1:: ");
	console.log($('iframe#sandro').contents().find("html").html());
*/
	// PART 2
	$.ajax({
		url: $("iframe#sandro").attr("src"),
		type: 'GET',
		dataType: 'html'
	}).done(function(html) {
		console.log("PART 2:: ");
		console.log(html);
	});

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<html>
<body>
<iframe id="sandro" src="https://jsfiddle.net/robots.txt"></iframe>
</body>
</html>
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2015-02-25T09:30:05.063

```
$('#iframe').load(function() {
    var src = $('#iframe').contents().find("html").html();
    alert(src);
}); 
```*

# ejb-3.0 - 父抽象类上的 CDI 注入失败

> ID：16103408
> 
> 赞同：0
> 
> 时间：2013-04-19T11:19:39.857
> 
> 标签：ejb-3.0, java-ee-6, cdi, ejb-3.1

在父抽象类中注入名为组件的会话范围是否有问题？

这是设置：我有一个界面：

```
@Qualifier
@Retention(RetentionPolicy.RUNTIME)
@Target({ ElementType.METHOD, ElementType.FIELD, ElementType.PARAMETER, ElementType.TYPE })
public @interface CurrentTeacher { } 
```

我用来产生当前学生（在会话范围内）：

```
@Named
@SessionScoped
public class CurrentStudentBean implements Serializable {
    @Produces
    @Named("currentTeacher")
    @currentTeacher
    public Teacher getCurrentTeacher() {
        //...
        return currentTeacher;
    }
} 
```

我如何按顺序注入它的相当令人困惑的部分。

page.xhtml->UserBean.java

page.xhtml：

```
<p:commandButton action="userBean.deleteSubject()" value="delete" /> 
```

包含删除主题的操作。

```
@Named
@ConversationScoped
public class StudentBean.java extends BaseBean {
  @Inject
  StudentService studentService;
}

public abstract class BaseBean { 
  @Inject
  @CurrentTeacher
  private Teacher currentTeacher; //injection OK    

  public void deleteSubject() { 
    getService().deleteSubject();
    //returns studentService from UserBean and calls BaseService.deleteSubject();
  }
}

@Stateless
@LocalBean
public class StudentService extends BaseService {
}

public abstract class BaseService {
  @Inject
  @CurrentTeacher
  private Teacher currentTeacher; //injection FAILED, currentTeacher always null

  public void deleteSubject() {
    if(currentTeacher != null) { //do something }
  }

  public Student getTeacher() {
    return currentTeacher;
  }
} 
```

# mobile - 在 J2ME 中拦截传入的文本 SMS

> ID：16103409
> 
> 赞同：1
> 
> 时间：2013-04-19T11:19:43.227
> 
> 标签：mobile, java-me, sms

有没有办法拦截传入的 SMS 消息（在 J2ME 中），然后在进入收件箱之前对其进行修改（或从中获取数据）。

建议一些方法（或代码）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:05:42.283

JavaME 是不可能的。

[接收短信 j2me](https://stackoverflow.com/questions/7781332/receiving-sms-j2me)

[监听短信，在 j2me 应用程序中没有任何端口号发送](https://stackoverflow.com/questions/13269017/listening-to-sms-which-is-sent-without-any-port-number-in-j2me-app)

[https://stackoverflow.com/questions/13082810/listen-for-incoming-sms-while-the-application-closed-in-blackberry](https://stackoverflow.com/questions/13082810/listen-for-incoming-sms-while-the-application-closed-in-blackberry)

您只能接收在特定端口上发送的 SMS - 而标准 SMS 不会以这种方式发送。

# performance - HornetQ 吞吐量限制为 4000 TPS，无持久性

> ID：16103411
> 
> 赞同：3
> 
> 时间：2013-04-19T11:19:49.520
> 
> 标签：performance, jboss, jboss6.x, hornetq, throughput

我正在使用嵌入在 JBoss 6.1 应用服务器中的 HornetQ。我的应用程序（一个客户端应用程序，产生消息，以及使用它们的 JBoss 应用程序）在 CPU 仍处于 60% 空闲状态时无法在服务器上处理超过 4000 TPS。我试图删除持久性以检查我是否受磁盘限制，但它并没有提高吞吐量。

看来问题出在生产者方面。至少在监控队列大小时，它保持非常小，这意味着消费者不是瓶颈。

我应该使用多个队列来提高效率吗？我已经阅读了 HornetQ 的性能调整文档，但找不到原因。或者可能是因为我使用的是 AUTO_ACKNOWLEDGE 模式？我正在为生产者运行几个线程，这不会产生太大影响。无论如何，生产者 JVM 不能使用超过 1 个 CPU 线程。我什至尝试运行我的生产者应用程序的几个实例，但速度并不快。网络带宽很高（1 Gbps），我的消息非常小（< 1 KB）。此外，生产者和消费者应用程序在同一台服务器上运行。HornetQ 配置在 2 个服务器的 JBoss 集群中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:21:09.073

我能够通过使用几个队列来解决这个问题。通过使用 JProfiler，我可以看到我的队列上的锁，并且所有线程都在等待这些锁。我尝试了 2 个队列，我可以将性能提高一倍。所以现在我正在设置一组队列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T16:06:28.117

您也许可以尝试 2.3.0。我已经删除了一些将消息附加到队列的锁定。也许它会在 2.3.0.Final 上使用单个队列进行扩展。

（在我写这篇文章的时候，2.3.0.Final 即将发布。2.3.0.CR2 没有我所说的这个变化）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T15:47:20.303

您是否增加了客户的发送窗口大小？

```
<connection-factory name="ConnectionFactory">
  <producer-window-size>1000</producer-window-size>
... 
```

此参数限制每个客户端的未完成消息。它不适用于单个生产者线程，但适用于所有组合，因此如果达到该限制，添加线程将无济于事。网络往返延迟使您很快就能到达。

见： [http ://docs.jboss.org/hornetq/2.2.14.Final/user-manual/en/html/flow-control.html#d0e4005](http://docs.jboss.org/hornetq/2.2.14.Final/user-manual/en/html/flow-control.html#d0e4005)

# c++ - 从内存中绘制位图

> ID：16103417
> 
> 赞同：2
> 
> 时间：2013-04-19T11:20:03.633
> 
> 标签：c++, c, winapi, bitmap, bmp

我需要创建 HBITMAP。

问题就在这里。我在内存中有 bmp 文件的内容。

如果位图作为资源，我知道如何创建 HBITMAP。但由于它在内存中，我不知道该怎么做。

我这样做（如果在资源中）：[链接](http://www.functionx.com/win32/Lesson14.htm)

```
 hDC = BeginPaint(hWnd, &Ps);

    // Load the bitmap from the resource
    bmpExercising = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_EXERCISING));
    // Create a memory device compatible with the above DC variable
    MemDCExercising = CreateCompatibleDC(hDC);
         // Select the new bitmap
         SelectObject(MemDCExercising, bmpExercising);

    // Copy the bits from the memory DC into the current dc
    BitBlt(hDC, 10, 10, 450, 400, MemDCExercising, 0, 0, SRCCOPY);

    // Restore the old bitmap
    DeleteDC(MemDCExercising);
    DeleteObject(bmpExercising);
    EndPaint(hWnd, &Ps); 
```

如果它是内存资源，请指导我如何操作。不知何故`char img[10000]`变成了资源？这里，`img`是限制位图内容的内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:39:08.167

首先，让我们删除一个小问题：

```
hDC = BeginPaint(hWnd, &Ps);

// Load the bitmap from the resource
bmpExercising = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_EXERCISING));
// Create a memory device compatible with the above DC variable
MemDCExercising = CreateCompatibleDC(hDC);
     // Select the new bitmap
HOBJECT oldbmp = SelectObject(MemDCExercising, bmpExercising); //<<<<save it for later ...

// Copy the bits from the memory DC into the current dc
BitBlt(hDC, 10, 10, 450, 400, MemDCExercising, 0, 0, SRCCOPY);

// Restore the old bitmap
SelectObject(MemDCExercising, oldbmp); //<<<... DeleteDC will leak memory if it holds a resource
DeleteDC(MemDCExercising);
DeleteObject(bmpExercising);
EndPaint(hWnd, &Ps); 
```

现在，HBITMAP（从概念上讲）是一个指向内部结构的指针，该结构持有指向您无法访问的 GDI 内存空间的“指针”（实际上更像是一个流）。

“内存位图”不会在您的程序中表示为属于您的程序的内存缓冲区，而是作为...使用[CreateCompatibleBitmap](http://msdn.microsoft.com/en-us/library/dd183488%28v=vs.85%29.aspx)获得的 HBITMAP ，其中 HDC 参数 id 位图必须与 DC 兼容。（通常是屏幕、窗口或绘画 DC）。

您可以通过包含初始数据的缓冲区创建初始化位图，或使用[CreateBitmap](http://msdn.microsoft.com/en-us/library/dd183485%28v=vs.85%29.aspx)或[GetBitmapBits](http://msdn.microsoft.com/en-us/library/dd144850%28v=vs.85%29.aspx)获取位图保存的数据。

无论如何，这些是位图数据的本地副本，而不是 GDI 绘制的“实时位图”。

还要注意，这些数据的内部结构取决于位图需要具有的格式（在多少个平面上每个像素有多少位，有无调色板），并且为了避免 Blit 过程中的性能损失，它必须与您的屏幕设置使用的格式一致。

这不一定与保存到“bmp”文件中的位图相同。

# php - 根据会话数组选择查询不起作用

> ID：16103422
> 
> 赞同：0
> 
> 时间：2013-04-19T11:20:20.500
> 
> 标签：php, database, arrays, session, select

我有两个问题，我需要紧急解决

1）使用会话数组选择查询，问题是当我使用`implode`或`join`打开时`$pid = join(',',$_SESSION['pid']);` ，它仅`array array array`在我使用`var_dump`时显示，它显示的值在`session pid`？

2) 我如何通过两个不同的方式选择多个 mywishlist id，`PIDS`并且该功能将在 Page3 上使用？

3）当我`($pid)`在选择查询中使用它时显示错误

**身份证问题

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ')' 附近使用正确的语法**

**第1页创建会话PID的位置**

```
$_SESSION['pid']=array();   
$_SESSION['pid'][]= implode (",",$_POST['pid']); 
```

**第2页我想在哪里使用选择查询**

```
$pid = join(',',$_SESSION['pid']); 
$result=mysql_query("SELECT id AS wid FROM mywishlist where pid IN (pid)")
while($row=mysql_fetch_array($result)){
    <input type="text" name="wid[]" value="<?php echo $row['wid']//[$j]; ?>" />
<?php  }?> 
```

**第3页我想在哪里使用Wid**

```
$max=count($_REQUEST['wid']);
for($a=0; $a<$max; $a++){
    $query = mysql_query("UPDATE mywishlist SET     
        cusername='".$_SESSION['username']."',uid='".$_SESSION['id']."', 
        email='".$email."'  where id='".$_REQUEST['wid'][$a]."'") 
    or die ("Cart Email Query");
} 
```

**数据库图像**

![在此处输入图像描述](https://i.stack.imgur.com/09Ol4.png)

**Page2 实时图像**

![在此处输入图像描述](https://i.stack.imgur.com/TybvI.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:28:59.213

设置成这样。会话中的关键 pid 将是一个数组

```
$_SESSION['pid']= implode (",",$_POST['pid']); 
```

tretrieve 并像这样分配它

```
$pid = $_SESSION['pid']; 
```

现在像这样使用它

```
$query  =   "SELECT id AS wid FROM mywishlist where pid IN ($pid)";
$rec    =   mysqli_query($query); 
```

# azure - Azure SQL 中的用户“PHX\XXXXXXXXXXXX$”登录失败

> ID：16103424
> 
> 赞同：0
> 
> 时间：2013-04-19T11:20:21.957
> 
> 标签：azure

我们已经开始从托管在 Azure 中的一个站点收到此错误。这不是我们的连接字符串中指定的用户 ID，它似乎是某种内部 Azure 域登录。该网站一直运行良好，直到今天晚上，还没有更新。

网络上的其他帖子表明这可能是内部 SQL Azure 问题，但不确定如何解决。Azure 服务仪表板不指示任何中断。

# c# - 如何以编程方式从签名文件安装数字证书？

> ID：16103425
> 
> 赞同：0
> 
> 时间：2013-04-19T11:20:30.847
> 
> 标签：c#, c++, import, installation, digital-certificate

如果您有一个数字签名文件，您可以打开该文件的属性，然后通过单击详细信息 -> 显示证书 -> 安装证书来安装该文件已签名的证书。如何以编程方式执行此操作（例如在.net 或非托管 c++ 中）？

是否可以从可执行文件本身读取和安装证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:41:56.317

证书包含在 PE（和其他一些）文件的 Authenticode 签名中。如果您有 Authenticode 阅读器类，则可以提取证书。拥有它们后，您可以将它们安装到 Windows 证书存储中。

[我们的SecureBlackbox](http://www.eldos.com/sbb/net-pki.php)产品支持 Authenticode ，证书管理和 Windows 证书存储操作也是如此。

使用 CryptoAPI，这可以使用[WinVerifyTrust](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382384%28v=vs.85%29.aspx)函数和[CertAddCertificateContextToStore](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376009%28v=vs.85%29.aspx)函数来完成。但是 CryptoAPI 很麻烦。

# javascript - 在 Google 地图上以特定经度和纬度绘制三角形

> ID：16103426
> 
> 赞同：0
> 
> 时间：2013-04-19T11:20:35.997
> 
> 标签：javascript, google-maps-api-3

我正在尝试在特定的纬度和经度处绘制一个以米为单位的三角形。[Google 给出](https://developers.google.com/maps/documentation/javascript/overlays#Polygons)的示例在如何绘制多边形方面非常明显，但是它使用经度和纬度来指定多边形的点。

有没有办法在特定的经度/纬度处绘制三角形/多边形，但以米为单位指定点？就像您如何使用 API 在 long/lat 点绘制一个圆，但以米为单位指定半径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:46:50.270

您可以在赤道将度数转换为 1° ~ 111 公里的米。

当您走向极点时，经度线会聚，您需要使用下表来弥补这一点。

```
Degrees     Lat         Lng
0° Equator  110.574 km  111.320 km
15°         110.649 km  107.551 km
30°         110.852 km  96.486 km
45°         111.132 km  78.847 km
60°         111.412 km  55.800 km
75°         111.618 km  28.902 km
90° Pole    111.694 km  0.000 km 
```

# c++ - “this”指针总是常量吗？

> ID：16103427
> 
> 赞同：1
> 
> 时间：2013-04-19T11:20:36.973
> 
> 标签：c++, constants, member, const-correctness, member-functions

让我们`X`成为一个具有成员函数的类`f()`。

`this`是 的隐含参数`f()`，它的类型是`X* const`。

然后，如果`f() const`是 const 成员函数，则`this`指针的类型是 now `const X* const`。

`this`在这两种情况下，指针的类型似乎都是`const`. 那么为什么允许在函数`f()`定义中修改类的任何数据成员`X`？我们不应该总是`const_cast`求助于

```
void X::f() {        
       const_cast <int&> (member) = 1;    
} 
```

如果`f() const`是 const，那么这是这样做的方法：

```
void X::f() const{        
       const_cast <int&> (member) = 1;    
} 
```

（或者你也可以让成员可变）

但是为什么这有效

```
void X::f() {  
       member = 1;    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:25:09.330

> `this`是 的隐含参数`f()`，它的类型是`X* const`。

不完全（它实际上是type的*右值*`X*`），但对于这个问题来说已经足够接近了。

> 在这两种情况下，这个指针的类型似乎都是 const。那么为什么允许在函数 f() 定义中修改类 X 的任何数据成员？

因为如果*指针*是`const`（如`X* const`），则无法更改*指针*。您可以更改它指向的任何内容。如果它是一个指向 const 的指针（如 中`const X*`），那么您无法更改它所指向的内容。

所以你永远不能修改`this`自己；你不能写`this = &some_other_object`。在成员函数中，您也不能修改没有 dodgy`const`的（非可变）成员。`*this``const_cast`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:24:56.867

这个指针是一个右值。它不能被赋值，所以这个指针是 const 指针没有关系。

如果`f()`是非 const 成员函数，则此指针指向非 const `X`，因此可以修改 X 的数据成员。

但是如果`f() const`是一个 const 成员函数，这个指针指向 const `const X`，所以不能修改 X 的数据成员。然后，如果想要在`f() const`定义中修改它，则需要数据成员是可变的或 const_cast 。

对于 const_cast，我们可以这样做，

```
void X::f() const{        
       const_cast <int&> (member) = 1;    
} 
```

如果`member`是对非 const int 的引用，则编译器接受赋值并具有所需的行为。如果`member`是对 const int 的引用，则行为是不可预测的。比较这些：

```
const int a = 10;
const int* b = &a;
int* c = const_cast<int*>(b);
// *c = 20; 
```

c 是指针 a 为 const 的 const int* 的 const_cast。行为未定义。

```
int a1 = 10;
const int* b1 = &a1;
int* c1 = const_cast<int*>(b1);
*c1 = 20; 
```

c1 是指针 a 为 const 的 const int* 的 const_cast。这是有效的，您可以自由地为 c1 指向的 int 分配新值。

已知 const 成员函数不能改变数据成员的值。我们说她是因为这样，这个指针的指针是 const。

# objective-c - 向下滚动并返回时，UITableViewCell 中的 UITextField 文本会自动重置吗？

> ID：16103433
> 
> 赞同：0
> 
> 时间：2013-04-19T11:20:57.057
> 
> 标签：objective-c, xcode, uitableview, uitextfield

我有一个带有多单元格的 uitableview。其中包含文本文件，当我在文本字段上输入文本并滚动表格视图时，输入的文本正在擦除我的代码是

```
 static NSString *CellIdentifier = @"Cell";

        ComplaintsCustomCell *cell=(ComplaintsCustomCell*)[tableView dequeueReusableCellWithIdentifier:nil];        
        if(cell==nil){
            NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"ComplaintsCustomCell" owner:self options:nil];

            for(id currentObject in topLevelObjects){

                if([currentObject isKindOfClass:[UITableViewCell class]]){
                    cell = (ComplaintsCustomCell *) currentObject;
                    break;
                }
            }
        }
        cell.selectionStyle=UITableViewCellSelectionStyleNone;

        NSDictionary *dict=[array1 objectAtIndex:indexPath.row];
        cell.complaintID_label.text=[dict valueForKey:@"ProblemName"];

        if(cell.notesView!=nil)
        cell.notesView.text=[dict valueForKey:@"Notes"];
           [cell.notesView setTag:indexPath.row +6000];

        cell.durationFld.text=[dict valueForKey:@"Duration"];
        [cell.durationFld setTag:indexPath.row + 5000];
        cell.durationFld.delegate=self; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:03:33.143

您的类还需要成为每个文本字段的代表，检测每个文本更改并更新关联的模型对象（您的字典数组）。

# autocomplete - 结合 Places Autocomplete 和 Google Time Zone API

> ID：16103436
> 
> 赞同：8
> 
> 时间：2013-04-19T11:21:00.270
> 
> 标签：autocomplete, timezone, google-places-api

我需要一个类似于 Places Autocomplete 的 api，但在响应中包含地方时区。我可以使用 Places Autocomplete api 从响应中获取地点参考，而不是使用 Place Details api 来获取经度和纬度，最后使用 Google Time Zone API 来获取地点时区。我可以通过一个 HTTP 调用来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:46:36.567

如果您只需要当前的 UTC 偏移量以便知道该地点的时间，您通常会在 Details API 的结果中找到它。从[文档中](https://developers.google.com/places/documentation/details)：

> **`utc_offset`**包含此地方的当前时区与 UTC 偏移的分钟数。例如，对于夏令时期间澳大利亚悉尼的地方，这将是 660（距 UTC +11 小时），而对于夏令时以外的加利福尼亚地方，这将是 -480（距 UTC-8 小时）。

然而，正如一些人所评论的那样，[正如这里所讨论](https://stackoverflow.com/q/19717327/634824)的，地点详细信息 API 并不*总是*返回时区偏移量。

如果未返回，或者当您需要位置的完整 IANA/Olson 时区 ID 时，您将需要按照您的描述调用时区 API。

您可能还对[此处列出](https://stackoverflow.com/q/16086962/634824)的从某个位置获取时区的其他方法之一感兴趣。

# twitter-bootstrap - 在行流体中引导多行跨度

> ID：16103438
> 
> 赞同：3
> 
> 时间：2013-04-19T11:21:03.770
> 
> 标签：twitter-bootstrap, fluid-layout, grid-layout

[这个问题](https://stackoverflow.com/questions/11179524/twitter-bootstrap-fluid-spans-broke-template)非常相似，尽管它没有回答我的问题。

[像这样的答案](https://stackoverflow.com/questions/14318677/multiple-spans-per-row-in-twitter-bootstrap)会很好，只要它适用于响应式布局，例如`.row-fluid`，它目前不适用。

在 Bootstrap 中是否有可能在该行中有一个流动的行和多行，如下所示：

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
        </div>
        <div class="span12">
        </div>
        <div class="span12">
        </div>
    </div>
</div> 
```

没有第二行跨度有一个奇数的左边距？

[单击此处查看 JSFiddle 示例](http://jsfiddle.net/nwhQf/9/)

本质上，我需要的是在 a 内有多行跨度，`.row-fluid`而在第一次破坏布局后没有行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T12:39:59.473

那么位移是由margin-left引起的。

这并不理想，但您始终可以覆盖 CSS：

```
.container-fluid .row-fluid [class*="span"] {
    margin-left:0px;
} 
```

但实际上，错误似乎在于您声明了 12 个 span3 DIV，总共有 36 个。12 是流体容器的限制，因此您需要创建这些 span1：

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span1">1
        </div>
        <div class="span1">2
        </div>
        <div class="span1">3
        </div>
        <div class="span1">4
        </div>
        <div class="span1">5
        </div>
        <div class="span1">6
        </div>
        <div class="span1">7
        </div>
        <div class="span1">8
        </div>
        <div class="span1">9
        </div>
        <div class="span1">10
        </div>
        <div class="span1">11
        </div>
        <div class="span1">12
        </div>
    </div>
    <div class="row-fluid">
        <div class="span3">
            1
        </div>
        <div class="span3">
            2
        </div>
        <div class="span3">
            3
        </div>
        <div class="span3">
            4
        </div>
    </div>
    <div class="row-fluid">
        <div class="span3">
            1
        </div>
        <div class="span3">
            2
        </div>
        <div class="span3">
            3
        </div>
        <div class="span3">
            4
        </div>
    </div>
</div> 
```

看这里：

[http://jsfiddle.net/7Lu43/51/](http://jsfiddle.net/7Lu43/51/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-17T15:01:37.893

在引导程序 3 中，可以在同一行中插入多个 (.span)。我发现最有趣的是，不会破坏布局并且可以提高响应能力。在引导程序 2 中，您必须遵守每行 12 列的限制。如果超出此限制，则其他列中包含的边距会妨碍布局。

对于我的情况，我只为右列清理了列边距并插入了边距：

> 示例 - 布局 2 列

```
.myDiv{
  .span6{
    margin-left:0;
    &:nth-child(even){
      margin-left: 2.127659574468085%;
    }
  }
} 
```

> 和响应式 767px

```
@media  (max-width: 767px) {
  .myDiv{
    .span6{
      margin-left:0;
      &:nth-child(even){
        margin-left: 0;
      }
    }
  }
} 
```

# etl - 如何在 Scriptella etl 中使用 janino 脚本？

> ID：16103439
> 
> 赞同：0
> 
> 时间：2013-04-19T11:21:08.613
> 
> 标签：etl, scriptella, janino

我有一个 Scriptella etl 文件，我在其中解析 csv 文件并使用示例 janino 脚本。尽管我在 libs 文件夹中找到了未找到 scriptella 的驱动程序，但我总是遇到异常。

## etl.xml

```
<!DOCTYPE etl SYSTEM "http://scriptella.javaforge.com/dtd/etl.dtd">
<etl>
<description>
    Queries CSV data from from file and store the results in a DB and other CSV file.
</description>
<connection id="in" driver="csv" url="input.csv"/>
 <connection id="out" driver="csv" url="output.csv">
  #Use empty quote to turn off quoting
    quote=
</connection>
<connection id="java" driver="janino" classpath="../lib/janino.jar"/>
   <script connection-id="out"><!--Writing header if necessary-->
   Name,Age,VIP
   </script>
<query connection-id="in">
    <!--Empty CSV query means select all-->
    <script connection-id="java">
      import java.io.*;
       String ntteCode;
    Object o = get("Age");
    if (o == null)
        ntteCode = "";
    else
        ntteCode = o.toString().trim();
        system.out.println("-----------"+ntteCode);
    </script>
</query>
</etl> 
```

这是我从命令提示符运行 etl.xml 时遇到的异常。

```
E:\scriptella-1.0>java -jar scriptella.jar jstack_etl.xml
Apr 19, 2013 4:44:07 PM <INFO> Execution Progress.Initializing properties: 1%
Apr 19, 2013 4:44:07 PM <INFO> Execution Progress.Connection id=in, CsvConnection,            Dialect{CSV 1.0} registered: 2%
Apr 19, 2013 4:44:07 PM <INFO> Execution Progress.Connection id=out, CsvConnection,   Dialect{CSV 1.0} registered: 3%
Apr 19, 2013 4:44:07 PM <SEVERE> Script E:\scriptella-1.0\jstack_etl.xml execution failed.
Unable to initialize driver for ConnectionParameters{properties={}, url='null',   user='null', password='null', schema='null', catalog='null'}
:Unable to instantiate driver for class scriptella.driver.janino.Driver
Janino provider exception: Janino not found on the class path. Check if connection    classpath attribute points to janino.jar
Error codes: []
Driver exception: java.lang.ClassNotFoundException: org.codehaus.janino.ScriptEvaluator 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:17:28.263

您需要在此处下载 janino 驱动程序：http: [//dist.codehaus.org/janino/changelog.html](http://dist.codehaus.org/janino/changelog.html)

将以下库复制到 scriptella/lib 目录：

*   commons-compiler.jar
*   janino.jar
*   commons-compiler-jdk.jar

尝试使用 bin 目录中的脚本启动 scriptella：

*   脚本文件
*   脚本文件

该脚本会将库添加到类路径中。您也可以使用以下命令手动添加库：

```
java -classpath lib/commons-compiler.jar;lib/janino.jar;lib/commons-compiler-jdk.jar -jar scriptella.jar jstack_etl.xml 
```

# javascript - 控制在输入字段中开始输入的位置

> ID：16103441
> 
> 赞同：0
> 
> 时间：2013-04-19T11:21:33.090
> 
> 标签：javascript, jquery

是否可以控制输入输入中从焦点开始的位置？

例如

```
<input type="text" value="(+44)" id="phone_number" /> 
```

我需要用户在现有值之后开始输入，但保留退格和删除选项。

就像是：

```
$(document).ready(function(){
 $('#phone_number').focus(function(){
  //place type start after whatever value already exists
 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:27:55.907

这也可以帮助您保持格式化的输入字段

[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

```
 jQuery(function($){
    $("#phone_number").mask("(+44)999999");
 }); 
```

我使用 9 仅添加数字值，否则您可以 * 添加任何内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:36:37.570

如果你想使用 jQuery，你可以这样做：

```
$("input").focus(function () {
    var val = this.value;
    var $this = $(this);
    $this.val("");
    setTimeout(function () {
        $this.val(val);
    }, 1);
}); 
```

取自这个[原始答案](https://stackoverflow.com/a/8805277/1479606)。

**[演示](http://jsfiddle.net/jJZuh/)**

# python - 此处不允许映射值...在 foo.py

> ID：16103447
> 
> 赞同：9
> 
> 时间：2013-04-19T11:22:09.533
> 
> 标签：python, google-app-engine

我有这个 GAE python 代码

在文件 foo.py

```
import webapp2

class MainPage(webapp2.RequestHandler):

         def get(self):
                self.response.headers['Content-Type'] = 'text/plain'
                self.response.write('Hello Foo')

app = webapp2.WSGIApplication([('/', MainPage)], debug = True) 
```

* * *

在文件 app.yaml

```
application: foo
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: foo.app 
```

* * *

我得到这个错误指向文件 foo.py ( class MainPage(webapp2.RequestHandler): ) Obs 中的第三行。从邮件末尾开始阅读

```
...
line 172, in _HandleEvents
    for event in events:
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/yaml_listener.py", line 212, in _GenerateEventParameters
    raise yaml_errors.EventListenerYAMLError(e)
google.appengine.api.yaml_errors.EventListenerYAMLError: mapping values are not allowed here
  in "foo.py", line 3, column 39 
```

* * *

我将不胜感激

谢谢山姆

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-03T10:18:11.407

如果您以错误的方式启动应用程序，则会发生这种错误：`dev_appserver.py foo.py`. 您需要一个目录，例如，和`foo`然后从父目录启动程序，或在目录本身中`foo/foo.py``foo/app.yaml``dev_appserver.py foo/``dev_appserver.py .`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:00:22.277

您的代码没有任何问题。我将这两个文件复制并粘贴到文件中，并使用 App Engine SDK 版本在我的 Win7 系统上运行它们：“1.7.7”，它提供的页面没有错误。

您可能对文件或设置有疑问。

您是否尝试过 File->Creating New Application 菜单选项？它将创建一个名为 engineapp 的新应用程序，该应用程序将显示“Hello world！”。在 localhost 机器上浏览时。

# javascript - 如何使用户文本字段值在html中浮动

> ID：16103449
> 
> 赞同：1
> 
> 时间：2013-04-19T11:22:13.247
> 
> 标签：javascript, jquery, html

我有一个输入框，我希望当用户输入 3 时，当他输入数据时它在文本中显示 3.00 而不是 3。我们通常对最多 2 位的变量进行固定，但如何显示如果用户输入任何数据 4 那么它应该是在文本字段 4.00

假设用户输入任何数字的数据，但它应该在相同的文本字段中显示为浮点数意味着 3 到 3.00 5 到 5.00 像这样

```
<HTML>
<body>

 <input type="text" value=""/>

 <script>
  var a =4
 </script>
</body>
</html> 
```

那么它应该在像 4.00 这样的文本字段中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:30:35.640

```
$("input[type='text']").blur(function() {
  var value = parseInt($(this).attr("value"));
  $(this).attr("value", value.toFixed(2));
}); 
```

我假设用户在移除文本字段的焦点（点击等）时完成了输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:31:52.983

您可以使用以下方法快速执行此操作：

```
$('input').change(function(){
   this.value = parseFloat(this.value).toFixed(2); 
}); 
```

**[这是关于 jsFiddle 的演示。](http://jsfiddle.net/zrMxy/)**

# ios - 将文本添加到您无法删除的 UITextField

> ID：16103453
> 
> 赞同：4
> 
> 时间：2013-04-19T11:22:16.793
> 
> 标签：ios, objective-c, cocoa-touch, uitextfield

我想做的是在开头添加一些`UITextField`无法删除的文本。当用户像这样点击时，我会添加此文`UITextField`本：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField{

    if (textField.text.length == 0) {
        textField.text = @"myText";
    }

    return YES;
} 
```

如何防止用户以正常方式删除此文本？（例如，*无需*`UILabel`在 TextField 顶部添加单独的）。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:29:56.010

`shouldChangeCharactersInRange`您可以在委托方法中实现此代码。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if (textField.text.length == 1 && [string isEqualToString:@""]) {//When detect backspace when have one character. 
        textField.text = @"myText";
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:27:51.203

[签出UITextFieldProtocolReference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)中的 shouldChangeCharactersInRange

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

> 每当用户在文本字段中键入新字符或删除现有字符时，文本字段都会调用此方法。

因此，您可以控制文本是否实际发生更改，以便您可以在该委托回调中插入自定义逻辑，以执行有关可以更改内容的任何规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:33:43.843

用这个

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if ([[textField text] length]==LENGTH_OF_TEXT && [string isEqualToString:@""])
    {
        return NO;
    }
else 
return YES;
} 
```

希望它可以帮助你。

# iphone - 在通过 PhoneGap 创建的 iPhone 应用程序中使用 Google 地图

> ID：16103454
> 
> 赞同：4
> 
> 时间：2013-04-19T11:22:16.913
> 
> 标签：iphone, google-maps, cordova

我需要一些关于使用`Google map`创建正在创建的 iPhone 应用程序的指导`Phonegap`。我听说谷歌地图可以在没有互联网连接的情况下使用`Google map API`。

```
My question is how to apply that functionality? 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T09:48:36.973

Google maps api can not be used offline due to the terms of service. If you cache the tiles it will be a terms violation. It can be done if you purchase the enterprise edition. Check [this](https://stackoverflow.com/questions/6109369/how-to-cache-google-map-tiles-for-offline-usage) for more information on the subject. You might have to use something else if you absolutely must have that functionality.

You should check out openlayers. That might be of help.

# php - 从客户端 IP 获取 XML 提要

> ID：16103457
> 
> 赞同：0
> 
> 时间：2013-04-19T11:22:21.727
> 
> 标签：php, javascript, jquery, xml

我需要集成来自外部源的 XML 提要，并且我需要发送以获取 xml 的参数之一是 IP。

当我使用 PHP 时，我发送服务器 IP 并且它工作正常。问题是，XML 是由我发送的 IP 自定义的，所以我需要实际发送客户端 IP。这带来了一个问题，因为如果 XML 提要检测到源 IP 与我发送的 IP 不同，它不会给我答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:31:44.987

我现在不确定我是否完全理解问题，但找出运行浏览器的计算机的公共 IP 地址的唯一方法是从服务器读取它。然后，您可以将其提供给 JavaScript 代码：

```
<script type="text/javascript"><!--
var clientAddress = <? echo json_encode($_SERVER['REMOTE_ADDR']); ?>;
//--></script> 
```

当然，如果用户有一个代理在每个请求上更改他的 IP 地址，这将中断。

# joomla2.5 - 如何添加多个表单 Joomla 2.5 组件

> ID：16103461
> 
> 赞同：3
> 
> 时间：2013-04-19T11:22:27.817
> 
> 标签：joomla2.5, custom-component

我正在开发一个 joomla 网站，它需要一些自定义组件来集成管理投资组合、用户配置文件等。我们下载了 joomla 2.5 的 hello_world MVC 组件之一[http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/简介]并做了必要的定制。第一个组件运行良好。但是现在我们需要一个新组件，它需要集成多种形式。例如：存储一个表单的类型，存储另一个表单的详细信息，通过另一个表单管理国家/州。在具有管理一种表单[添加/编辑/删除/查看]选项的默认组件中。在这里，我尝试修改/复制，但失败了。任何人都可以建议架构/示例代码来管理 joomla 2.5 组件创建中的多个表单 [添加/编辑/删除/查看]。任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T22:43:37.023

假设您说的是存储在模型/表单文件夹中的表单......您应该尝试覆盖模型中的 getForm() 函数，以调用正确的表单。您应该在调用页面时传递一个“布局”，然后在模型构造函数中获取它。

可能是这样：

```
class YourComponentModelYourModel extends JModelAdmin{

           public function __construct($config = array()){
                switch(JRequest::getVar('layout')){
                        case 'firstlayout' : $this->form='firstform';
                        break;
                        case 'secondlayout' : $this->form='secondform';
                        break;
                        default : $this->form='defaultform';
                        }
             parent::__construct($config);
             } 
```

...

```
public function getForm($data = array(), $loadData = true) 
    {
        // Get the form.
        $form = $this->loadForm('com_yourcomponent.'.$this->form,$this->form,
                                array('control' => 'jform', 'load_data' => $loadData));

        if (empty($form)){return false;}
        return $form;
    } 
```

您必须在 views/YourView/tmpl 文件夹中为每个表单放置一个布局，并且表单声明也必须调用布局：

```
<form action="<?php echo JRoute::_('index.php?option=com_yourcomponent&layout=firstlayout&id='.(int) $this->item->id); ?>"
      method="post" name="adminForm" id="draw-form"> 
```

# xml - 如何在 xsl 中指定图像的相对路径

> ID：16103463
> 
> 赞同：1
> 
> 时间：2013-04-19T11:22:35.573
> 
> 标签：xml, xslt, xslt-1.0

我正在使用以下 xsl 来显示图标

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output method="html"/>
<xsl:template match="/">
    <img src="file:///c:/view.png" alt=""/>
</xsl:template>
</xsl:stylesheet> 
```

使用绝对路径，当我们指定绝对路径和“file:///”时，这是有效的，但是当我们使用像“file:///./icon/view.png”这样的相对路径时，它不起作用（没有图像以 html 显示）。所需图标位于 xml 文件夹的子文件夹“图标”中。为了。前任。xml 文件夹位置是“C:\1\2\3\4\result.xml”，图标位于“C:\1\2\3\4\icons”。如何指定访问图标文件夹下图像的相对路径。试过“file:///../icons/view.png”但没有成功。有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:26:11.663

**我尝试了以下转换：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="html"/> <xsl:template match="/"> <html>
<img><xsl:attribute name="src">./icons/EQ1.png</xsl:attribute></img>
</html>
</xsl:template>
</xsl:stylesheet> 
```

并得到输出：

```
<html><img src="./icons/EQ1.png"></html> 
```

此外，我将 EQ1.png 放在了图标文件夹中，该文件夹位于我的 html 文件本身的文件夹中。我在 Firefox 中查看了 HTML，并且可以查看图像。

# c# - RadnumericTextbox 舍入问题

> ID：16103465
> 
> 赞同：5
> 
> 时间：2013-04-19T11:22:40.397
> 
> 标签：c#, telerik

编码 ：

```
<telerik:RadNumericTextBox ShowSpinButtons="False"  DisplayText="Infinite" 
                  ID="MaximumAmount_tb" runat="server"  IncrementSettings-InterceptArrowKeys="true">
                <ClientEvents OnFocus="OnMAximumAmounttbFocus" />
                </telerik:RadNumericTextBox>

 function OnMAximumAmounttbFocus(sender, args) {
    //alert(sender.get_displayValue());
    if (sender.get_displayValue() == "Infinite") {
        sender.set_value("9,999,999,999,999.99999");

    }
    else
    {return false; }

} 
```

我总是得到这个数字作为焦点的结果：10000000000000 为什么？以及如何解决我的问题以显示：9999999999999.99999？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T15:40:00.377

正如文档（[http://www.telerik.com/help/aspnet-ajax/input-numerictextbox-basics.html](http://www.telerik.com/help/aspnet-ajax/input-numerictextbox-basics.html)）所说，“RadNumericTextBox 不支持幅度大于 +/- 2^46 的最大值和最小值。” -- 所以它基本上可以包含大约 14 个有效数字。您正在尝试设置 18 位有效数字，这对它来说太多了。

# jquery - 显示隐藏 li 元素 jQuery

> ID：16103468
> 
> 赞同：0
> 
> 时间：2013-04-19T11:22:48.157
> 
> 标签：jquery

如何显示 li 元素然后隐藏它们。我在下面隐藏了我不想显示的列表项，当我单击 a.show-button 链接时它会显示所有列表项，但我也想在更改其后单击相同的链接来隐藏列表项班级。似乎无法让它提醒你好。我查了一下，课程发生了变化。我究竟做错了什么？

```
$('ul.artists li:gt(27)').hide();

$('a.show-button').click(function(e) {
e.preventDefault();
    $('ul.artists li:gt(27)').show();
    $(this).addClass('hide-button').removeClass('show-button');
});

$('a.hide-button').on('click', function(e) {
e.preventDefault();
    alert("Hello");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:26:54.597

不要更改类名来显示和隐藏，而是尝试使用切换。

```
$('ul.artists li:gt(27)').hide();

$('a.buttonClass').click(function(e) {
  e.preventDefault();
  $('ul.artists li:gt(27)').toggle();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:41:16.410

这里*不是*关于如何去做，而是关于你做错了什么。

当您将单击操作绑定到 时`$('a.hide-button')`，您将其绑定到具体元素。如果新元素开始适合此选择器，则该元素不会自动绑定该单击操作。

# php - 在不单击提交按钮的情况下显示文件上传进度条

> ID：16103469
> 
> 赞同：0
> 
> 时间：2013-04-19T11:22:49.957
> 
> 标签：php, javascript, ajax, jquery

我正在尝试编写文件上传过程。当我单击浏览按钮时，文件将上传到服务器并显示该文件内容，而无需单击提交按钮。当我上传大文件时，上传会花费更多时间，所以我需要实现一个进度条。

我提到了以下有用的链接：

[http://malsup.com/jquery/form/progress.html](http://malsup.com/jquery/form/progress.html)

[http://malsup.com/jquery/form/#file-upload](http://malsup.com/jquery/form/#file-upload)

我希望在单击浏览按钮时自动显示进度条。我不知道如何调用进度条功能，当我在浏览窗口中选择文件时，没有点击提交按钮。

我使用了以下代码。

**文件：index.php**

```
 <!doctype html>
        <head>
        <title>File Upload Progress Demo #1</title>
        <style>
        body { padding: 30px }
        form { display: block; margin: 20px auto; background: #eee; border-radius: 10px; padding: 15px }

        .progress { position:relative; width:400px; border: 1px solid #ddd; padding: 1px; border-radius: 3px; }
        .bar { background-color: #B4F5B4; width:0%; height:20px; border-radius: 3px; }
        .percent { position:absolute; display:inline-block; top:3px; left:48%; }
        </style>
        </head>
        <body>

                <form action="upload.php" method="post" enctype="multipart/form-data" id="hello">
                <input type="file" name="uploadedfile" ><br>
                <input type="submit" value="Upload File to Server" >

            </form>

            <div class="progress">
                <div class="bar"></div >
                <div class="percent">0%</div >
            </div>

            <div id="status"></div>

        <script src="jquery.js"></script>
        <script src="jquery.form.js"></script>
        <script>
        (function() {

        var bar = $('.bar');
        var percent = $('.percent');
        var status = $('#status');

        $('#hello').ajaxForm({
            beforeSend: function() {
                status.empty();
                var percentVal = '0%';
                bar.width(percentVal)
                percent.html(percentVal);
            },
            uploadProgress: function(event, position, total, percentComplete) {
                var percentVal = percentComplete + '%';
                bar.width(percentVal)
                percent.html(percentVal);

            },
            complete: function(xhr) {
             bar.width("100%");
            percent.html("100%");
                status.html(xhr.responseText);
            }
        }); 

        })();       
        </script>

        </body>
        </html> 
```

**文件：upload.php**

```
 <?php
        $target_path = "upload/";

        $target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

        if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
            echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
            " has been uploaded";
        } else{
            echo "There was an error uploading the file, please try again!";
        }
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:30:33.100

您使用的 jQuery 插件似乎不支持您想要的行为。这让您有两个选择：

*   破解插件，选择文件后立即开始上传。
*   使用上传的替代方法，让您可以更好地控制上传控制，例如[http://www.plupload.com/](http://www.plupload.com/)。

# javascript - jQuery在当前行的div上添加行号作为类

> ID：16103475
> 
> 赞同：0
> 
> 时间：2013-04-19T11:23:12.480
> 
> 标签：javascript, jquery, html, css

我需要让 jquery 填充布局中的所有行作为小提琴中的第一行

不确定我是否解释得足够好，但小提琴应该清楚我想要什么。前五个 div 的宽度发生了一些变化以确保该行被填充，但我不能让其余的行填充容器

基本上我想通过增加它们的宽度来证明所有 div 的合理性

[http://jsfiddle.net/SG9Vx/](http://jsfiddle.net/SG9Vx/)

到目前为止，我有这个函数，从这里修改：[jQuery Find number of items per row in floated li's](https://stackoverflow.com/questions/11539113/jquery-find-number-of-items-per-row-in-floated-lis)：

```
var lisInRow = 0;

$('#posts div').each(function() {
if($(this).prev().length > 0) {
    if($(this).position().top != $(this).prev().position().top) return false;
    lisInRow++;
    $(this).addClass("row1");   
}
else {
       lisInRow++;  
       $(this).addClass("row1");    
   }
});

var itemNumber = $(".row1").length
var widthRow = 0;
$('.row1').each(function() {
    widthRow += $(this).outerWidth( true );
});
var widthContainer = $("#posts").width();
var remaining = widthContainer - widthRow;
leftMargin = Math.floor(remaining / itemNumber);
$(".row1").each(function(){ 
    var addedwidth = $(this).width() + leftMargin;
    $(this).width(addedwidth);
}); 
```

我对第一行所做的是计算容器的剩余部分，将其除以行上的项目数，然后将结果添加到行上每个项目的宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:10:18.490

如果我理解你想要做什么，我对代码做了一些小的改动

```
 var lisInRow = 0;
                    var lisInRow2 = 0;
                    var row =  0;
                    $('div div').each(function() {
                        if($(this).prev().length > 0) {
                            if($(this).position().top != $(this).prev().position().top) row++;
                            lisInRow++;
                            $(this).addClass("row"+row);    
                            //console.log($(this).prev().length)
                        }
                        else {
                            lisInRow++;  
                            $(this).addClass("row0");   
                        }
                    });
for(var i=0;i<=row;i++){
                    var itemNumber = $(".row"+i).length
                    console.log(row);
                    var widthRow = 0;
                    $(".row"+i).each(function() {
                        widthRow += $(this).outerWidth( true );
                    });
                    var widthContainer = $("#posts").width();
                    var remaining = widthContainer - widthRow;
                    leftMargin = Math.floor(remaining / itemNumber);
                    $(".row"+i).each(function(){ 
                        var addedwidth = $(this).width() + leftMargin;
                        $(this).width(addedwidth);
                        $(this).find("img").width(addedwidth);
                    }); 
} 
```

**在这里你有它：**

[http://jsfiddle.net/SG9Vx/3/](http://jsfiddle.net/SG9Vx/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:53:45.700

这是我认为您要实现的目标的简化版本：

```
var lisInRow = 0;
$('div div').each(function() {
  if($(this).prev().length > 0) {
    if($(this).position().top != $(this).prev().position().top){
      lisInRow++;
    }                   
   $(this).addClass("row" + lisInRow);  
 }
}); 
```

小提琴：http: [//jsfiddle.net/568mP/](http://jsfiddle.net/568mP/)

# ruby-on-rails - 如何在没有javascript的情况下跟踪rails中的唯一访问者和页面浏览量？

> ID：16103482
> 
> 赞同：1
> 
> 时间：2013-04-19T11:23:36.503
> 
> 标签：ruby-on-rails

如何在没有 javascript 的情况下在 rails 中跟踪唯一访问者及其页面浏览量？一般来说，我只需要计算它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T12:02:41.283

设置一个 PageViews-Model 并创建如下跟踪内容：

```
class ApplicationController < ActionController::Base
  after_filter  :pageview

  def pageview
    PageView.create :user_id              => ...
                    :referer              => request.referrer,
                    :session              => request.session_options[:id],
                    :ip_address           => request.remote_ip,
                    :user_agent           => request.env["HTTP_USER_AGENT"],
                    :created_at           => Time.current
  end
end 
```

当您将新 ip 与已保存的 ip 进行比较时，可以达到唯一性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:25:31.977

用于`request.remote_ip`跟踪用户 IP，然后应用您的规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:28:40.777

我猜您不想使用 cookie 但想在后端跟踪唯一身份访问者？

使用 remote_ip 跟踪 IP 并使用脚本获取 adobe 全局 id 并将其存储在数据库中。

案例可以是：超过 1 台 PC 使用 IP（像办公室一样共享互联网），因此将获得相同的 IP 但不同的 adobe id。

不同的IP，不同的Adobe

相同或不同的 IP 且没有 adobe id（默认为 0）

在所有情况下都可以将唯一字符串保留为两者的组合

# ruby-on-rails-3.2 - style.css.erb 预编译资产为 nil:NilClass 错误提供未定义的方法“[]”

> ID：16103487
> 
> 赞同：1
> 
> 时间：2013-04-19T11:23:52.877
> 
> 标签：ruby-on-rails-3.2, asset-pipeline

我在 rails 应用程序的 stylesheets 文件夹中为字体创建了一个文件

```
@font-face {
 font-family: 'MuseoSans500';
 src: url("<%= asset_path('museosans_500-webfont.eot?')%>") format('embedded-opentype');
 font-weight: normal;
 font-style: normal;
 }

@font-face {
 font-family: 'MuseoSans500';
 src: url("<%= asset_path('museosans_500-webfont.woff')%>") format('woff'),
   url("<%= asset_path('museosans_500-webfont.ttf')%>") format('truetype'),
   url("<%= asset_path('museosans_500-webfont.svg#MuseoSans500')%>") format('svg');
font-weight: normal;
font-style: normal;
} 
```

现在，当我预编译资产时.. 它在 style.css.erb 页面上给了我错误。我一直在跟踪路径的链轮，我得到了这个文件。错误是

```
paths  subpath /home/new_app/app/assets/stylesheets/app-theme/themes/default/style.css.erb
rake aborted!
undefined method `[]' for nil:NilClass 
```

（在/home/hbror/applications/survey/app/assets/stylesheets/application.css）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:06:59.483

例如，您应该将字体放在新的资产目录中，`app/assets/fonts`并将其包含在资产目录中，方法是将其放在您的`application.rb`:

```
# Add the fonts path
config.assets.paths << Rails.root.join('app', 'assets', 'fonts')

# Precompile additional assets
config.assets.precompile += %w( .svg .eot .woff .ttf ) 
```

然后它应该可以正常工作。

# erlang - YAWS 如何处理并发用户

> ID：16103488
> 
> 赞同：2
> 
> 时间：2013-04-19T11:23:54.937
> 
> 标签：erlang, yaws

我想知道每次新客户端使用其 Web 服务器时在 YAWS 中正​​在执行哪些代码......

首先，我试图了解 YAWS 如何处理并发用户......并尝试以下 .yaws 页面：

```
io:format("~nProcess Identifier: ~p  Port: ~p  Client: ~p  YAWS pid: ~p ~n",[self(), A#arg.clisock, A#arg.client_ip_port, A#arg.pid]). 
```

它应该返回每个客户端的 Pid 、端口和 ip ......我在同一个浏览器（Firefox）上打开了这个页面并打开了两个不同的选项卡......这是打印的：

```
Process Identifier: <0.65.0>  Port: #Port<0.1211>  Client: {{127,0,0,1},60451}  YAWS pid: <0.65.0> 

Process Identifier: <0.65.0>  Port: #Port<0.1211>  Client: {{127,0,0,1},60451}  YAWS pid: <0.65.0> 
```

由于某种原因，返回了相同的端口和 pid（因此，YAWS 没有为每个客户端创建新端口或新 pid）。

当我在 Chrome 上尝试这个时，打印出来的是：

```
Process Identifier: <0.71.0>  Port: #Port<0.2998>  Client: {{127,0,0,1},60543}  YAWS pid: <0.71.0> 

Process Identifier: <0.71.0>  Port: #Port<0.2998>  Client: {{127,0,0,1},60543}  YAWS pid: <0.71.0> 
```

因此，为什么 YAWS 没有为同一浏览器上的每个选项卡打开新的端口或 pid？另外，回到最初的问题，YAWS 在哪里以及哪些代码会产生一个新的 PID 或打开一个新的端口？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T16:01:19.430

除非您确定您的浏览器会为每个选项卡打开新的 HTTP 连接，否则您并没有真正测试您认为正在测试的内容。相反，请从命令行尝试：

```
curl http://yaws_host:yaws_port/path/to/your/yaws/page.yaws
curl http://yaws_host:yaws_port/path/to/your/yaws/page.yaws 
```

是的，运行两次，因为这保证使用两个单独的连接。然后你会看到 Yaws 使用两个不同的 Erlang 进程和 TCP 连接来处理这两个请求：

```
Process Identifier: <0.59.0>  Port: #Port<0.1181>  Client: {{127,0,0,1},64977}  YAWS pid: <0.59.0>
Process Identifier: <0.64.0>  Port: #Port<0.3268>  Client: {{127,0,0,1},64978}  YAWS pid: <0.64.0> 
```

至于处理连接的 Yaws 代码在哪里，您可以查看[yaws_server.erl](https://github.com/klacke/yaws/blob/master/src/yaws_server.erl)，特别是`acceptor/1`启动进程以接受连接的`do_listen/2`函数和打开套接字进行侦听的函数。

# c# - 列表框项目没有移动到asp，net中的其他列表框

> ID：16103491
> 
> 赞同：0
> 
> 时间：2013-04-19T11:24:02.877
> 
> 标签：c#, asp.net, listboxitems, aspbutton

我有两个列表框，其中一个是源，另一个是目标。

我想在按钮单击事件后将所选项目传输到目标列表框。

我在互联网上搜索并从[这里](http://geekswithblogs.net/dotNETvinz/archive/2009/02/24/moving-listitems-between-two-listbox--server-side-approach.aspx)找到了样本。但就我而言，它不起作用。

我的 ASP 源文件是：

```
<asp:Table ID="tbvl" Width="100%" runat="server">
    <asp:TableRow>
        <asp:TableCell Width="45%">
            <asp:ListBox ID="lstsource" CssClass="uppercase" runat="server" Width="100%"  Height="140" SelectionMode="Multiple"></asp:ListBox>
        </asp:TableCell>
        <asp:TableCell Width="10%" HorizontalAlign="Center" Height="100%">
            <asp:Table ID="Table1" runat="server" Height="100%">
                  <asp:TableRow>
                        <asp:TableCell Height="25%"><asp:Button ID="btnsd" CssClass="button" runat="server"  Text=">>" Width="40" /></asp:TableCell>
                  </asp:TableRow>
                  <asp:TableRow>
                        <asp:TableCell Height="25%"><asp:Button ID="btnds" runat="server" CssClass="button" Text="<<" Width="40" /></asp:TableCell>
                  </asp:TableRow>
                  <asp:TableRow>
                        <asp:TableCell Height="25%"><asp:Button ID="btnallsd" runat="server" CssClass="button" Text=">" Width="40" /></asp:TableCell>
                  </asp:TableRow>
                  <asp:TableRow>
                        <asp:TableCell Height="25%"><asp:Button ID="btnallds" runat="server" CssClass="button" Text="<" Width="40" /></asp:TableCell>
                  </asp:TableRow>
              </asp:Table>
          </asp:TableCell>
          <asp:TableCell Width="50%">
               <asp:ListBox ID="lstdestination" runat="server" CssClass="uppercase" Width="100%" Height="140" SelectionMode="Multiple"></asp:ListBox>                            
          </asp:TableCell>
       </asp:TableRow>

</asp:Table> 
```

我的`Click()`事件是；

```
void btnallsd_Click(object sender, EventArgs e)
{
    for (int i = lstsource.Items.Count - 1; i >= 0; i--)
    {
        if (lstsource.Items[i].Selected)
        {
            lstdestination.Items.Add(lstsource.Items[i]);
            lstdestination.ClearSelection();
            lstsource.Items.Remove(lstsource.Items[i]);
        }
    }
} 
```

当我单击按钮页面时只会刷新但项目不会添加到目标列表框中。

我应该怎么做才能获得正确的输出。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:31:34.043

您必须首先确保`ListBoxes`不会在回发时进行数据绑定。否则，您将始终使用其默认项目填充它们，并且它们将再次被取消选择。

所以使用该`IsPostBack`属性，例如：

```
protected void Page_Load(Object sendeer, EventArgs e)
{
    if(!IsPostBack)
    {
        DataBindListBoxes();
    }
} 
```

您还必须使按钮单击事件处理程序至少受到保护，**并将事件处理程序添加**到 aspx 标记（或以编程方式在代码隐藏中）：

代码隐藏：

```
protected void btnallsd_Click(object sender, EventArgs e){//...} 
```

aspx：

```
<asp:Button ID="btnallsd" OnClick="btnallsd_Click" .... 
```

要查找所选项目，您还可以使用 Linq：

```
protected void btnallsd_Click(object sender, EventArgs e)
{
    var selected = lstsource.Items.Cast<ListItem>()
                   .Where(li => li.Selected);
    while (selected.Any())
    {
        var item = selected.First();
        lstdestination.Items.Add(item);
        lstsource.Items.Remove(item);
    }
    lstdestination.ClearSelection();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T10:42:28.827

**尝试这个**

```
protected void moveRight_Click(object sender, EventArgs e)
   {
   for (int i = 0; i < lbFirst.Items.Count; i++)
   {
   if (lbFirst.Items[i].Selected)
   {
   lbSecond.Items.Add(lbFirst.Items[i]);
   lbFirst.Items.Remove(lbFirst.Items[i]);
   }
   }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:33:23.057

嗯试试这个：

```
 private void MoveListBoxItems(ListBox source, ListBox destination)
            {        
                ListBox.SelectedObjectCollection sourceItems = source.SelectedItems;
                foreach (var item in sourceItems)
                {
                    destination.Items.Add(item);
                }
                while (source.SelectedItems.Count > 0)
                {
                    source.Items.Remove(source.SelectedItems[0]);
                }
            } 
```

使用：在您从 1 移动到 2 按钮的单击事件中：

```
MoveListBoxItems(listBox1, listBox2); 
```

# ios - 嵌套的 UIScrollViews 和事件路由

> ID：16103492
> 
> 赞同：13
> 
> 时间：2013-04-19T11:24:04.403
> 
> 标签：ios, uiscrollview, nested, hittest, touchesbegan

我有 2 个滚动视图，这两个视图都应该垂直滚动。外部滚动视图（红色）包含一个搜索栏和内部滚动视图（蓝色）。内部滚动视图应该无限滚动（它包含图像/项目并具有无限滚动实现）。

我希望这个控制器工作的方式如下：

当我向下滚动时，外部滚动视图应该首先滚动并且搜索栏应该消失（滚动出内容区域）。只有在那之后，内部滚动视图才应该开始滚动。向上滚动时，内部滚动视图应一直滚动到其顶部。只有这样，外部滚动视图才应该接受滚动事件并最终向上滚动以使搜索栏再次可见。

如果我只是将它们嵌套在 IB 中而不进行任何修改，则内部滚动视图会捕获所有滚动事件，并且它会以相反的方式工作。

*请记住，我在这里使用内部滚动视图作为简化隐喻。在我的应用程序中，我实际上有一个控件，它有一个带有嵌套表格视图的滚动视图（滚动视图让我水平翻页，表格视图让我垂直滚动）。*

![在此处输入图像描述](https://i.stack.imgur.com/Slbxw.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T03:01:42.143

如果可以的话，在 2 个滚动视图上设置一个通用的 UIScrollViewDelegate，并实现以下内容：

```
- (void) scrollViewDidScroll: (UIScrollView*) scrollView
{
  if (scrollView == self.mainScrollView)
  {
    /* Handle instances when the main scroll view is already at the bottom */
    if (   scrollView.contentOffset.y
        == scrollView.contentSize.height - scrollView.bounds.size.height)
    {
      /* Stop scrolling the main scroll view and start scrolling the
       * inner scroll view
       */
      self.innerScrollView.scrollEnabled = YES;
      self.mainScrollView.scrollEnabled = NO;
    }
    else
    {
      /* Start scrolling the main scroll view and stop scrolling the
       * inner scroll view
       */
      self.innerScrollView.scrollEnabled = NO;
      self.mainScrollView.scrollEnabled = YES;
    }
  }
  else if (scrollView == self.innerScrollView)
  {
    /* Handle instances when the inner scroll view is already at the top */
    if (self.innerScrollView.contentOffset.y == 0)
    {
      /* Stop scrolling the inner scroll view and start scrolling the
       * main scroll view
       */
      self.innerScrollView.scrollEnabled = NO;
      self.mainScrollView.scrollEnabled = YES;
    }
    else
    {
      /* Start scrolling the inner scroll view and stop scrolling the
       * main scroll view
       */
      self.innerScrollView.scrollEnabled = YES;
      self.mainScrollView.scrollEnabled = NO;
    }
  }
} 
```

请注意，我没有对此进行测试，但逻辑可能有点像这样（您设置启用滚动或禁用用户交互，或其他）。很可能这还不够您想要的解决方案，但我确信一个常见的 UIScrollViewDelegate 是您问题的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T09:47:00.480

我给出了一个滚动视图的示例，你必须创建一个滚动视图并根据动态高度和内容大小添加它才能工作。

> // .h 文件

```
@property (nonatomic, strong) UIScrollView *scrlSearch; 
```

> // .m 文件 // ViewDidLoad

```
scrlSearch = [[UIScrollView alloc] init];

// For first scroll screen height was ((total screen height / 100 )* 10% )
// For Second scroll screen height was ((total screen height / 100 )* 90% )
scrlSearch.frame = CGRectMake(0, 0, (YourScreenWidth), (YourScreenHeight));

// YourVIEW = add any view to scrollbar
[scrlSearch addSubview:YourVIEW];

CGSize contentSize = scrlSearch.frame.size;
// YourContentHeight = dynamic content or static content height
contentSize.height = YourContentHeight;

// set the ContentHeight for scrolling
[scrlSearch setContentSize:contentSize];
// add the scrollview into delegate
[scrlSearch setDelegate:self]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:41:02.343

我不确定您拥有并想要实施的结构..

我做了一个测试项目发现[这里做了一个测试项目](https://dl.dropboxusercontent.com/u/78701794/TestScroller.zip)

但是该项目肯定会帮助您一起管理不同的滚动视图..

该应用程序可能并不完美，但会给您一些实现解决方案的想法。

希望能帮助到你..

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T12:17:32.003

只使用一个 scrollView 并为搜索栏设置 contentInset/contentOffset。沿着这条线的东西：

```
 UIEdgeInsets oldEdgeInset = [[self scrollView] contentInset];
  CGRect f = [[self searchBar] frame];
  UIEdgeInsets newEdgeInset = UIEdgeInsetsMake(CGRectGetMaxY(f), 0, 0, 0);
  CGPoint offset = [[self scrollView] contentOffset];
  offset.y += oldEdgeInset.top - newEdgeInset.top;
  [[self scrollView] setContentOffset:offset];
  [[self scrollView] setContentInset:newEdgeInset];
  [[self searchBar] setFrame:f]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-29T13:33:18.033

为您的最顶层视图（在所有滚动视图之上，在您的视图控制器的视图上）创建一个滑动手势识别器，并使其识别`UISwipeGestureRecognizerDirectionUp`.

然后，您需要在外部滚动视图滚动时通知您的控制器。向下滚动后，添加手势识别器。当它再次到达顶部时（outerScrollView.contentOffset == (0,0)），移除手势识别器。

手势应该在它存在时“吃掉”所有滑动事件，使您的内部滚动视图不会接收到触摸事件，因此不会滚动

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T08:11:20.940

您应该在外部滚动视图上添加内部滚动视图，但内部滚动视图的“y”位置应该是外部滚动视图集的内容，例如......

```
innerScrollView.frame = CGRectMake(10, outerScrollView.contentSize.height, 300, 440); 
```

在此之后，您可以在此 innerScrollView 上添加任何视图，您可以为 innerScrollView 设置 contentOffset 等。

最后，您应该增加外部滚动视图的 contentSize。

```
outerScrollView.contentSize = CGSizeMake(320, innerScrollView.frame.size.height+actualContentSizeOfOuterScroolView); 
```

我觉得对你有帮助！

# fancybox - 根据图像宽度更改fancybox上的填充

> ID：16103496
> 
> 赞同：1
> 
> 时间：2013-04-19T11:24:21.260
> 
> 标签：fancybox, width, padding, dimensions

我是 javascript 和 jQuery 的新手，正在尝试使用 Fancybox 制作幻灯片。问题是我希望图像显示在相同大小的盒子上，无论它们是纵向还是横向图像。我的图像都是横向的 700 X 525 或纵向的 525 X 700。

我的方式是横向图像加载如下图顶部所示，纵向图像加载如下图所示，我希望纵向图像加载如下图所示，框带有与风景相同的尺寸：

![在此处输入图像描述](https://i.stack.imgur.com/kJe4x.jpg)

我认为我应该做的是根据图像尺寸更改左侧填充，但我不知道如何。

提前谢谢你的帮助。

我正在使用 Fancybox 版本：2.1.4，并且我已将默认值设置为：

```
 padding : 15,
        margin  : 20,

        width     : 800,
        height    : 600,
        minWidth  : 100,
        minHeight : 100,
        maxWidth  : 9999,
        maxHeight : 9999,

        autoSize   : true,
        autoHeight : false,
        autoWidth  : false,

        autoResize  : true,
        autoCenter  : !isTouch,
        fitToView   : true,
        aspectRatio : false,
        topRatio    : 0.5,
        leftRatio   : 0.5, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T05:55:28.880

我知道这篇文章已有 11 个月的历史，但我想我会分享我的解决方案，以防它在未来对其他人有所帮助。

基本上我在fancybox元素上设置了一个最小宽度css属性，并将其与当前图像宽度进行比较，如果它更小，我将向fancybox元素添加填充，以便fancybox元素保持相同的宽度，但里面的图像是水平居中。

第 1 步：在你的 css 中为 fancybox 元素设置一个最小宽度。这是无论图像宽度如何，您都希望您的 fancybox 元素保持的宽度。

> .fancybox-wrap { 最小宽度：1120px; }

第二步：调用fancybox时添加afterLoad函数

```
$(".fancybox").fancybox({ 
    afterLoad: function(current) {
        var $el = $(".fancybox-wrap").eq(0);    // grab the main fancybox element
        var getcurrwidth = current.width;       // grab the currrent width of the element
        var getdesiredwidth = $el.css('min-width'); // grab our min-width that we set from the css

        var currwidth = Number(getcurrwidth);
        var desiredwidth = Number(getdesiredwidth.replace('px', ''));

        if (currwidth < desiredwidth)
        {
            var custompadding = (desiredwidth - currwidth) * 0.5; // if the width of the element is smaller than our desired width then set padding amount
            this.skin.css({'padding-left': custompadding+'px', 'padding-right': custompadding+'px' }); // add equal padding to the fancybox skin element 
        }
    }
}); 
```

# c# - 处理包含同一类的派生的类，这些派生需要以不同的方式表现

> ID：16103499
> 
> 赞同：1
> 
> 时间：2013-04-19T11:24:32.773
> 
> 标签：c#, polymorphism, derived-class

我有一个 Command 类，它在执行时会对 IScriptable 对象执行命令

```
[
    XmlInclude(typeof(CommandPositionSettings)),
]
public abstract class CommandSettings
{
    public List<Command> Parameters = new List<Command>(4);

    public abstract Command Load();
}

public abstract class Command
{
    public List<Command> Parameters = new List<Command>(4);

    public Command(CommandSettings settings) 
    {
        Parameters = settings.Parameters;
    }

    public abstract void Execute(IScriptable scriptableObject);
    public abstract int GetArgumentCount();
    public abstract CommandSettings Write();
} 
```

这适用于某些命令，例如位置

```
public class CommandPosition : Command
{
    public CommandPosition(CommandPositionSettings settings)
        :base(settings = settings == null ? new CommandPositionSettings() : settings)
    {
        if (settings == null)
        {
            settings = new CommandPositionSettings();
        }
    }

    public override void Execute(IScriptable scriptableObject)
    {
        Vector3 position = new Vector3();
        position.X = Parameters[0].Execute();
        position.Y = Parameters[1].Execute();
        position.Z = Parameters[2].Execute();

        scriptableObject.Position = position;
    }

    public override int GetArgumentCount()
    {
        return 3;
    }

    public override CommandSettings Write()
    {
        CommandPositionSettings settings = new CommandPositionSettings();

        settings.Parameters.AddRange(Parameters);

        return settings;
    }
} 
```

直到我尝试执行只需要返回一个值而不需要 IScriptable 的不同类型的命令。在上面的代码中，这将是获取位置的 X、Y 和 Z 值的地方。

此时可以将每个参数存储为浮点数，但有时我希望做一些比返回值更复杂的事情。例如，每次执行命令时在两个值之间随机化。

```
public class CommandRandom : Command
{
    public CommandRandom(CommandRandomSettings settings)
        : base(settings = settings == null ? new CommandRandomSettings() : settings)
    {
        if (settings == null)
        {
            settings = new CommandRandomSettings();
        }
    }

    public override float Execute()
    {
        return ToolBox.Random.NextFloat(Parameters[0], Parameters[1]);
    }

    public override int GetArgumentCount()
    {
        return 2;
    }

    public override CommandSettings Write()
    {
        CommandPositionSettings settings = new CommandPositionSettings();

        settings.Parameters.AddRange(Parameters);

        return settings;
    }
} 
```

该命令只需要返回一个随机浮点数，不直接影响 IScriptable 对象。

我目前从同一个类派生它们的另一个原因是，当解释命令行字符串时，它会为每个匹配形式的*Command(para0, para1...paraN)*创建一个新命令。

一个命令也可以嵌套在另一个命令中。

所以*Command(para0, para1...paraN)*其中： para1 = *Command(para0, para1...paraN)*

那么如何区分只需要返回值的嵌套命令和直接影响 IScriptable 对象本身的命令呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:19:16.967

您可以使用以下泛型类型来解决它：

```
public interface IScriptable
{
    Vector3 Position;
}

public abstract class CommandSettings<T>
{
    public List<Command<T>> Parameters = new List<Command<T>>(4);

    public abstract Command<T> Load();
}

public class CommandRandomSettings : CommandSettings<float>
{
    public Command<float> Load()
    {
        return null;
    }
}

public class CommandPositionSettings : CommandSettings<object>
{
    public Command<object> Load()
    {
        return null;
    }
}

public abstract class Command<T>
{
    public List<Command<T>> Parameters = new List<Command<T>>(4);

    public Command(CommandSettings<T> settings)
    {
        Parameters = settings.Parameters;
    }

    public abstract T Execute(IScriptable scriptableObject);
    public abstract int GetArgumentCount();
    public abstract CommandSettings<T> Write();
}

public class CommandRandom : Command<float>
{
    public CommandRandom(CommandRandomSettings settings)
        : base(settings = settings == null ? new CommandRandomSettings() : settings)
    {
        if (settings == null)
        {
            settings = new CommandRandomSettings();
        }
    }

    public override float Execute()
    {
        return 0.0f;
    }

    public override int GetArgumentCount()
    {
        return 2;
    }

    public override CommandSettings<float> Write()
    {
        CommandRandomSettings settings = new CommandRandomSettings();

        settings.Parameters.AddRange(Parameters);

        return settings;
    }
}

public class CommandPosition : Command<object>
{
    public CommandPosition(CommandPositionSettings settings)
        : base(settings = settings == null ? new CommandPositionSettings() : settings)
    {
        if (settings == null)
        {
            settings = new CommandPositionSettings();
        }
    }

    public override object Execute(IScriptable scriptableObject)
    {
        Vector3 position = new Vector3();
        position.X = Parameters[0].Execute();
        position.Y = Parameters[1].Execute();
        position.Z = Parameters[2].Execute();

        scriptableObject.Position = position;
    }

    public override int GetArgumentCount()
    {
        return 3;
    }

    public override CommandSettings<object> Write()
    {
        CommandPositionSettings settings = new CommandPositionSettings();

        settings.Parameters.AddRange(Parameters);

        return settings;
    }
} 
```

不幸的是，在这种情况下，您不能`void`作为类型参数传递。在上面的示例中，我使用了对象。该`Execute(IScriptable scriptableObject)`方法可以简单地返回`null`。

# python - 逐行拆分句子文件并使用 findall 提取某些参数

> ID：16103504
> 
> 赞同：0
> 
> 时间：2013-04-19T11:24:49.980
> 
> 标签：python, findall

我正在尝试浏览一个句子文件并在这些句子中逐行提取大写字母。

这是我正在处理的数据文件：

```
the dog_SUBJ bit_VERB the cat_OBJ
the man_SUBJ ran_VERB
the cat_SUBJ ate_VERB the cheese_OBJ 
```

本质上，我希望程序为每一行输出“SUBJ”、“VERB”和“OBJ”。但是，对于我现在正在处理的脚本的每一行，输出是文件中每一行的所有大写字母，而不仅仅是该行中的大写字母。

这是我现在得到的输出：

第 0 行：`the dog_SUBJ bit_VERB the cat_OBJ`

```
['SUBJ', 'VERB', 'OBJ', 'SUBJ', 'VERB', 'SUBJ', 'VERB', 'OBJ'] 
```

第 1 行：`the man_SUBJ ran_VERB`

```
['SUBJ', 'VERB', 'OBJ', 'SUBJ', 'VERB', 'SUBJ', 'VERB', 'OBJ'] 
```

第 2 行：`the cat_SUBJ ate_VERB the cheese_OBJ`

```
['SUBJ', 'VERB', 'OBJ', 'SUBJ', 'VERB', 'SUBJ', 'VERB', 'OBJ'] 
```

例如，我希望程序输出第 0 行，'SUBJ'，'VERB'，'OBJ'，因为那是该行中的内容。

这是我目前正在使用的脚本：

```
import re, sys
f = open('findallEX.txt', 'r')
lines = f.readlines()
ii=0

for l in lines:
    sys.stdout.write('line %s: %s' %(ii, l))
    ii = ii + 1
    results = []
    for i in lines:
        results += re.findall(r'[A-Z]+', i) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:33:16.600

您无缘无故地重复行列表两次。尝试这个：

```
import re
with open('findallEX.txt', 'r') as f:

    for ii, line in enumerate(f):
        print 'line %s: %s' % (ii, line)
        results = re.findall(r'[A-Z]+', line)
        print results 
```

（我还让事情变得更加 Pythonic；您应该使用上下文管理器来打开文件（使用`with`），并且应该避免手动控制循环变量。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:18:23.857

没有正则表达式：

```
from itertools import chain, groupby
with open('text.txt') as f:
    print [''.join(g) for k, g in 
           groupby(chain.from_iterable(f), key=str.isupper) if k] 
```

* * *

```
['SUBJ', 'VERB', 'OBJ', 'SUBJ', 'VERB', 'SUBJ', 'VERB', 'OBJ'] 
```

# java - UnMarshalling content-type=application/x-www-form-urlencoded 使用 Jaxb2Marshaller 抛出错误“Prolog 中不允许内容”

> ID：16103506
> 
> 赞同：0
> 
> 时间：2013-04-19T11:24:52.053
> 
> 标签：java, spring, rest, unmarshalling

我正在尝试设置一个处理 content-type=application/x-www-form-urlencoded 请求的休息服务。我目前正在使用 Jaxb2Marshaller 来解组请求。然而，在解组时，它会抛出错误“[org.xml.sax.SAXParseException: Content is not allowed in prolog.]”。

我将 xml 请求检查为字符串。它的 url 编码形式为：%3C%3Fxml+version=%221.0%22+encoding%3D%22UTF-8%22+standalone%3D%22yes%22%3F%3E%3Cxrsi%。

似乎这个编码的 xml 字符串请求导致了错误。有没有比解组先解码请求的方法？

以下是我的上下文设置：

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
        <property name="maxUploadSize" value="100000000" />
    </bean>

    <bean id="xstreamMarshaller" class="org.springframework.oxm.xstream.XStreamMarshaller">
        <property name="autodetectAnnotations" value="true" />
        <!-- Set some properties to make the outputted xml look nicer -->
    </bean>

    <mvc:annotation-driven>
        <mvc:message-converters>
            <!-- Configure the XStream message converter -->
            <bean class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
                <property name="marshaller" ref="jaxbMarshaller2" />
                <property name="unmarshaller" ref="jaxbMarshaller2" />

                <property name="supportedMediaTypes">
                    <list>
                        <bean class="org.springframework.http.MediaType">
                            <constructor-arg index="0" value="application" />
                            <constructor-arg index="1" value="xml" />
                        </bean>
                        <bean class="org.springframework.http.MediaType">
                            <constructor-arg index="0" value="application" />
                            <constructor-arg index="1" value="x-www-form-urlencoded" />
                        </bean>
                    </list>
                </property>
            </bean>
        </mvc:message-converters>
    </mvc:annotation-driven>

    <bean id="jaxbMarshaller2" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">

        <property name="classesToBeBound">
            <list>
                <value>com.auto.server.schema.ReceiveRequest</value>
                <value>com.auto.server.schema.ReceiveReply</value>

            </list>

        </property>
    </bean>

    <bean name="viewResolver" class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">

        <property name="ignoreAcceptHeader" value="true" />
        <property name="favorParameter" value="true" />
        <property name="favorPathExtension" value="true" />
        <!-- if no content type is specified, return json. -->
        <property name="defaultContentType" value="application/x-www-form-urlencoded" />

        <property name="mediaTypes">
            <map>
                <entry key="xml" value="application/x-www-form-urlencoded" />
            </map>
        </property>
        <property name="defaultViews">
            <list>
                <bean class="org.springframework.web.servlet.view.xml.MarshallingView">
                    <constructor-arg ref="jaxbMarshaller" />
                    <property name="modelKey" value="responseObject" />
                </bean>
            </list>
        </property>
    </bean>

    <!-- REST API controllers -->
    <context:component-scan base-package="com.auto.server.schema" />

Here is the controller part

@ResponseBody
    @RequestMapping(value = "/heartbeat", method = RequestMethod.POST, headers = { "content-type=application/x-www-form-urlencoded" }, consumes = "application/x-www-form-urlencoded;charset=UTF-8")
    public Object heartBeat(@RequestBody ReceiveRequest request) {

        ReceiveReply reply = new ReceiveReply();        
        return reply;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T14:40:03.103

如果您总是要以 URL 编码样式获取数据，即`content-type="application/x-www-form-urlencoded"`

然后，当您通过以下代码收到它时，您可以在 bean 中简单地对其进行解码：

```
String decodedString = java.net.URLDecoder( inputString, "UTF-8" ); 
```

# c++ - 在派生类初始化器列表中初始化基类成员

> ID：16103510
> 
> 赞同：0
> 
> 时间：2013-04-19T11:24:59.090
> 
> 标签：c++, oop

我有一门课，我必须实例化很多次。是这样的：

```
class A
{
  public:

  A() : a1(0.0f), a2(-1) {}

  float a1;
  int   a2;
};

class B : public A
{
  B();
  float b;
}; 
```

我有两种方法来实现 B 的 ctor：

```
B(): A(), b(0.0f) {} // Using the base class ctor.

B(): b(0.0f) { a1 = 0.0f; a2 = -1; } // Not using the base class ctor. Ugly but maybe faster? 
```

其中哪个更快？

我的成员类型在基类和继承类中都是基本的（int、float、double ...）。

编译器：英特尔和 LLVM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:37:04.043

第一种方式是您唯一的选择。您的第二个“选项”将不起作用，因为`a1`and`a2`是在基类中声明的，因此无法在`B`.

原因是它们属于`A`，因此初始化它们是 的责任，`A`并且将在 的构造函数中完成`A`，这是在任何其他初始化发生之前`B`。无论你做什么，总会有一个被调用的构造函数作为构造对象`A`的第一步。`B`即使您以某种方式可以避免这种情况并直接从 初始化成员`B`，也没有现实的理由期望性能得到实际改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:37:17.243

不能在派生类的初始化列表中初始化基类的成员。第二个不会编译。

您必须选择`A`将调用哪个构造函数；如果您没有提及，`A()`则会自动调用默认值。没有办法不调用基类构造函数。

# jquery - Jquery ui droppable 包含来自数据库的元素不起作用

> ID：16103511
> 
> 赞同：0
> 
> 时间：2013-04-19T11:25:02.403
> 
> 标签：jquery, jquery-ui-draggable, jquery-ui-droppable

**更新：JSFIDDLE 正在工作：@ 而不是我在我的项目中：@ 可能是我在重新创建的代码中做错了什么**

我有一个关于 droppables 的简单问题

这是链接[http://jqueryui.com/droppable/#photo-manager](http://jqueryui.com/droppable/#photo-manager)

如果您将项目拖到垃圾箱，它将附加它..这很好用，但是如果垃圾箱中有从包含附加html的数据库中获取的元素，即

```
<ul class="gallery ui-helper-reset"><li class="ui-widget-content ui-corner-tr ui-draggable" style="display: list-item; width: 48px;">
        <h5 class="ui-widget-header">High Tatras 2</h5>
        <img width="96" height="72" alt="The chalet at the Green mountain lake" src="images/high_tatras2_min.jpg" style="display: inline-block; height: 36px;">
        <a class="ui-icon ui-icon-zoomin" title="View larger image" href="images/high_tatras2.jpg">View larger</a>

    <a class="ui-icon ui-icon-refresh" title="Recycle this image" href="link/to/recycle/script/when/we/have/js/off">Recycle image</a></li></ul>**strong text** 
```

现在他们甚至不拖，如果我想回收它们以便他们可以回去，我不能那样做......

[http://jsfiddle.net/shobz/Wr8mt/2/](http://jsfiddle.net/shobz/Wr8mt/2/)我已经添加了我正在工作的示例链接......你会看到添加了 ul li 的垃圾，现在我希望它像其他 droppables 一样工作......

请帮帮我...谢谢:)

# asp.net-mvc-4 - Membership.CreateUser() 给出此错误“不支持指定的方法”

> ID：16103516
> 
> 赞同：1
> 
> 时间：2013-04-19T11:25:15.343
> 
> 标签：asp.net-mvc-4, asp.net-membership

当我使用注册新用户时

`Membership.CreateUser(model.UserId, model.Password, model.Email, null, null, true, null, out createStatus)`

我收到以下错误：

> 不支持指定的方法

请帮忙

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            MembershipCreateStatus createStatus;
            Membership.CreateUser(model.UserId, 
                                  model.Password, 
                                  model.Email, 
                                  null, 
                                  null, 
                                  true, 
                                  null, 
                                  out createStatus);

            if (createStatus == MembershipCreateStatus.Success)
            {

                UpdateUserInfo();
                /* "False" for createPersistentCookie: */
                FormsAuthentication.SetAuthCookie(model.UserId, false);
                return RedirectToAction("Index", "Home");
            }
            else
            {
                ModelState.AddModelError("", ErrorCodeToString(createStatus));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T14:44:51.013

您现在必须使用`WebSecurity.CreateUserAndAccount(...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T12:40:41.837

如果您尝试为 MVC4 使用 ASP.NET Membership Provider（这很公平 - 您可能必须访问您无法控制的旧版 Membership Provider 数据库），您需要关闭 SimpleMembership（即MVC4 的默认值）。

只需将以下行添加到 Web.config 中的“appSettings”：

```
<add key="enableSimpleMembership" value="false" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-15T03:09:03.513

您在方法调用中添加了一个额外的 null 。

该方法应如下所示：

```
Membership.CreateUser(model.UserId, model.Password, model.Email, null, null, true, out createStatus); 
```

这是方法签名：

```
public static MembershipUser CreateUser(string username, string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, out MembershipCreateStatus status); 
```

希望这会有所帮助！

# c# - 实体框架代码优先TPH继承-不同的子类可以共享一个字段吗？

> ID：16103518
> 
> 赞同：5
> 
> 时间：2013-04-19T11:25:16.267
> 
> 标签：c#, entity-framework, ef-code-first, table-per-hierarchy

我有一个使用 Entity Framework Code First 创建的实体框架模型，它使用 Table Per Hierarchy 继承，其中结构看起来有点像这样：

```
public abstract class BaseState 
{
    public int Id { get; set; }

    public string StateName { get; set; }

    // etcetera
}

public class CreatedState : BaseState
{
    public User Owner { get; set; }

}

public class UpdatedState : BaseState
{
    public User Owner { get; set; }
} 
```

现在，创建的内容在我`BaseStates`拥有`Owner_Id`并`Owner_Id1`存储的表中。但是鉴于没有一个类会同时是 a`CreatedState`和 an`UpdatedState`似乎`Owner_Id`对两者都使用一个是合乎逻辑的。这也将使跟踪数据库变得更容易。

我的基本问题是：Code First EF4 可以做到这一点吗？

我试图映射列：

```
public class CreatedState : BaseState
{
    [Column("OwnerId")]
    public User Owner { get; set; }

}

public class UpdatedState : BaseState
{
    [Column("OwnerId")]
    public User Owner { get; set; }
} 
```

那似乎没有任何效果。

然后我尝试创建一个共享父类，无论如何这可能是更正确的OO：

```
public abstract class OwnedState : BaseState
{
     public User Owner { get; set; }
}

public class CreatedState : OwnedState
{

}

public class UpdatedState : OwnedState
{

} 
```

再次，没有骰子。或者，更令人担忧的是，这似乎在某些情况下有效，而在其他情况下则无效（显然我的实际配置稍微复杂一些），而我可以准确地看到它工作的类之间没有区别。

编辑以获取有关失败的更多详细信息：我有两个字段的行为方式与我上面描述的方式相同，我们可能会调用关联的类`OwnedState`和`ActivityState`，我已按照上一个示例中所示的方式将它们创建为抽象类。`OwnedState`有两个派生自它的类，`ActivityState`有三个。在我的数据库中，`ActivityState_Id`还有.`OwnedState_Id``OwnedState_Id1`

除了它们引用的类型（其他实体）之外，我看不出`OwnedState`和`ActivityState`类之间没有任何区别，但在数据库中，似乎 EF 以某种方式对它们进行了不同的解释——我不太了解 EF 内部结构知道它是如何做出这个决定的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T07:38:04.663

如果你想让一个 Owner_ID 同时引用 CreatedState 和 UpdatedState，那么 User Owner 应该放在 BaseState 中。

我不知道您要对此做什么，但从逻辑上讲，您不会将 CreatedState 和 UpdatedState 作为类，而是使用更多的 State 属性值（或数据库中的列）来保存状态（Created 或 Updated ）。但是，再一次，也许你正在尝试其他的东西......我猜。

# android - 在自定义 listView 中交换 imageView 和 textView 使应用程序强制关闭

> ID：16103520
> 
> 赞同：1
> 
> 时间：2013-04-19T11:25:22.707
> 
> 标签：android

我刚刚通过本[教程创建了一个带有图像的自定义列表，](http://theopentutorials.com/tutorials/android/listview/android-custom-listview-with-image-and-text-using-arrayadapter/)并且进展顺利，（顺便说一句，我将自定义列表的布局更改为线性布局，这是它的代码：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <TextView
            android:id="@+id/desc"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

    </LinearLayout> 
```

但我想要的是交换imageView（id = icon）和textView（id = title）的位置，像这样：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <ImageView
            android:id="@+id/icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:id="@+id/desc"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

    </LinearLayout> 
```

问题是我只是在运行应用程序时强制关闭。我知道java代码中的convertView有问题，但我不知道它是什么。谢谢帮助

这是我的 LogCat：

```
04-19 12:06:19.121: I/Process(747): Sending signal. PID: 747 SIG: 9
04-19 12:06:27.611: D/AndroidRuntime(773): Shutting down VM
04-19 12:06:27.621: W/dalvikvm(773): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-19 12:06:27.621: E/AndroidRuntime(773): Uncaught handler: thread main exiting due to uncaught exception
04-19 12:06:27.651: E/AndroidRuntime(773): java.lang.ClassCastException: android.widget.ImageView
04-19 12:06:27.651: E/AndroidRuntime(773):  at com.myapp.adapters.CustomListViewAdapter.getView(CustomListViewAdapter.java:43)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.widget.AbsListView.obtainView(AbsListView.java:1274)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1147)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.widget.ListView.onMeasure(ListView.java:1060)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.view.View.measure(View.java:7964)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:888)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:350)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:278)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.view.View.measure(View.java:7964)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.view.View.measure(View.java:7964)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:464)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:278)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.view.View.measure(View.java:7964)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.view.View.measure(View.java:7964)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.view.ViewRoot.performTraversals(ViewRoot.java:763)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.os.Looper.loop(Looper.java:123)
04-19 12:06:27.651: E/AndroidRuntime(773):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-19 12:06:27.651: E/AndroidRuntime(773):  at java.lang.reflect.Method.invokeNative(Native Method)
04-19 12:06:27.651: E/AndroidRuntime(773):  at java.lang.reflect.Method.invoke(Method.java:521)
04-19 12:06:27.651: E/AndroidRuntime(773):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-19 12:06:27.651: E/AndroidRuntime(773):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-19 12:06:27.651: E/AndroidRuntime(773):  at dalvik.system.NativeStart.main(Native Method)
04-19 12:06:27.671: I/dalvikvm(773): threadid=7: reacting to signal 3
04-19 12:06:28.071: I/dalvikvm(773): Wrote stack trace to '/data/anr/traces.txt'
04-19 12:06:29.661: I/Process(773): Sending signal. PID: 773 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:50:47.520

问题不是因为布局更改，请尝试更改您的代码，如下所示，只需交换 RowItem 类中的参数，如

```
public RowItem(int imageId, String title, String desc) { 
```

到

```
public RowItem(String title, int imageId, String desc) { 
```

在 ImageTextListViewActivity 类中

```
rowItems = new ArrayList<RowItem>();
for (int i = 0; i < titles.length; i++) {
    RowItem item = new RowItem(images[i], titles[i], descriptions[i]);
    rowItems.add(item);
} 
```

到

```
rowItems = new ArrayList<RowItem>();
for (int i = 0; i < titles.length; i++) {
    RowItem item = new RowItem(titles[i], images[i], descriptions[i]);
    rowItems.add(item);
} 
```

**更新：**如果您使用的是 eclipse，请删除您的 R.java，重建项目，运行它

# objective-c - 使用 AFNetworking 在 Google 上搜索和寻址

> ID：16103521
> 
> 赞同：0
> 
> 时间：2013-04-19T11:25:24.607
> 
> 标签：objective-c, xcode, json, afnetworking, geocode

我一直在尝试在 google 上搜索地址并返回该地址的纬度和经度。我快到了=D

问题是.. 我得到了一个巨大的 json，但我不知道如何只得到纬度和经度。

我正在使用 AFNetworking。

```
//Build the string to Query Google Maps.
        NSMutableString *urlString = [NSMutableString stringWithFormat:@"http://maps.google.com/maps/api/geocode/json?address=%@&sensor=false", address];

        //Replace Spaces with a '+' character.
        [urlString setString:[urlString stringByReplacingOccurrencesOfString:@" " withString:@"+"]];

        NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlString]];

        AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

            //NSLog(@"minha location %@", JSON);
            //NSLog(@"minha url %@", urlString);

            NSArray *resul = [[NSArray alloc] init];
            resultado = [JSON objectForKey:@"results"];
            NSLog(@"Resultado: %@", result); 
```

使用这个我得到这个：

```
2013-04-19 08:04:57.092 XePop[7011:907] Result: (
        {
        "address_components" =         (
                        {
                "long_name" = 379;
                "short_name" = 379;
                types =                 (
                    "street_number"
                );
            },
                        {
                "long_name" = "Rua Domingos Ol\U00edmpio";
                "short_name" = "R. Domingos Ol\U00edmpio";
                types =                 (
                    route
                );
            },
                        {
                "long_name" = Centro;
                "short_name" = Centro;
                types =                 (
                    sublocality,
                    political
                );
            },
                        {
                "long_name" = Sobral;
                "short_name" = Sobral;
                types =                 (
                    locality,
                    political
                );
            },
                        {
                "long_name" = "Cear\U00e1";
                "short_name" = CE;
                types =                 (
                    "administrative_area_level_1",
                    political
                );
            },
                        {
                "long_name" = "Rep\U00fablica Federativa do Brasil";
                "short_name" = BR;
                types =                 (
                    country,
                    political
                );
            },
                        {
                "long_name" = "62011-140";
                "short_name" = "62011-140";
                types =                 (
                    "postal_code"
                );
            }
        );
        "formatted_address" = "Rua Domingos Ol\U00edmpio, 379 - Centro, Sobral - CE, 62011-140, Rep\U00fablica Federativa do Brasil";
        geometry =         {
            bounds =             {
                northeast =                 {
                    lat = "-3.6878671";
                    lng = "-40.35096009999999";
                };
                southwest =                 {
                    lat = "-3.6878797";
                    lng = "-40.35097349999999";
                };
            };
            location =             {
                lat = "-3.6878797";
                lng = "-40.35097349999999";
            };
            "location_type" = "RANGE_INTERPOLATED";
            viewport =             {
                northeast =                 {
                    lat = "-3.686524419708497";
                    lng = "-40.3496178197085";
                };
                southwest =                 {
                    lat = "-3.689222380291502";
                    lng = "-40.35231578029149";
                };
            };
        };
        types =         (
            "street_address"
        );
    }
)

How Can I get only the Location Part, which has:

location =             {
                lat = "-3.6878797";
                lng = "-40.35097349999999";
            }; 
```

我试过 [JSON objectForKey:@"location"]，但它返回 null。

请帮帮我。

谢谢您的考虑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-26T18:29:14.810

所需字段位于：

`[JSON valueForKeyPath:@"geometry.location"];`

# android - 如何在指定时间播放声音？（在我的应用程序中模拟录音）

> ID：16103526
> 
> 赞同：0
> 
> 时间：2013-04-19T11:25:32.833
> 
> 标签：android, soundpool

我想在我的钢琴应用程序中实现录音。为此，我节省了播放每个声音的时间以及在 LinkedList 中播放的声音。要用这个时间和声音播放录制的音乐（声音序列），我们应该在指定的时间播放每个声音。这是怎么做的？这是我的一个声音代码的一部分（注）：

```
public class MainActivity extends Activity {

double StartTime;
double millis;
sound_pool snd;
LinkedList<list> rec_list = new LinkedList<list>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // Create an instance of our sound manger
    snd = new sound_pool(getApplicationContext());
    // Set volume rocker mode to media volume
    this.setVolumeControlStream(AudioManager.STREAM_MUSIC);

    Button btn = (Button) findViewById(R.id.button1);       
    Date dt=new Date();
    long mil=dt.getTime();

    btn.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            if (event.getAction() == MotionEvent.ACTION_DOWN ) 

               {
                snd.play_s_r_1();                   
                Date dt=new Date();
                long mil=dt.getTime();                  
                rec_list.add(new list(mil,"s_r_1"));        
               }
             return true;                   
        }
    });  // end of ontouch listener 

} //end of oncreate
} //end of activity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:38:52.980

只需尝试以下代码 public CountDownTimer (long millisInFuture, long countDownInterval) millisInFuture - 从调用 start() 到倒计时完成并调用 onFinish() 的未来毫秒数。因此 onFinish() 将在 1 秒（1000 毫秒 = 1 秒）后被调用。

```
 player = MediaPlayer.create(getApplicationContext(), R.raw.beepsound);
 player.start();

CountDownTimer timer = new CountDownTimer(1000, 1000) {

@Override
public void onTick(long millisUntilFinished) {
   // Nothing to do
}

@Override
public void onFinish() {
    if (player.isPlaying()) {
         player.stop();
         player.release();
    }
}
};
timer.start(); 
```

参考： http: [//developer.android.com/reference/android/os/CountDownTimer.html#CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html#CountDownTimer(long) (long , long)

# mysql - 无法创建表，不确定要做什么（错误：150）

> ID：16103527
> 
> 赞同：0
> 
> 时间：2013-04-19T11:25:37.650
> 
> 标签：mysql, create-table

我一次创建了几个表，我不断收到错误（150）：

> #1005 - 无法创建表“waget.tour”（错误号：150）

尽管我知道错误是什么，但我根本无法修复它。表“tour”中的所有表引用都存在并且存在，其中引用了外键的键。我已经检查了很多次，根本找不到任何东西。谁能看到我做错了什么？

（创建表“tours”时出错）

```
CREATE TABLE IF NOT EXISTS tourPayment(
    tourPaymentNumber int,
    tourCost int(7),
    PRIMARY KEY (tourPaymentNumber),
    KEY (tourCost)
);

CREATE TABLE IF NOT EXISTS hotel(
    hotelID int AUTO_INCREMENT,
    hotelName varchar(30),
    PRIMARY KEY (hotelID),
    KEY (hotelName)
);

CREATE TABLE IF NOT EXISTS salutation(
    salutationID int AUTO_INCREMENT,
    salutation varchar(4),
    KEY (salutation)
);

CREATE TABLE IF NOT EXISTS customer(
    custID int AUTO_INCREMENT,
    custSalutation varchar(4),
    custLname varchar(30),
    custAdd varchar(100),
    custPcode varchar(4),
    custState varChar(20),
    custPhone varchar(10),
    custHotel varchar(30),
    PRIMARY KEY (custID),
    FOREIGN KEY (custHotel) REFERENCES hotel(hotelName),
    FOREIGN KEY (custSalutation) REFERENCES salutation(salutation)
);

CREATE  TABLE IF NOT EXISTS bus(
    busID int AUTO_INCREMENT,
    busMake varchar(30),
    busSeats varchar(3),
    PRIMARY KEY (busID)
);

CREATE TABLE IF NOT EXISTS busDriver(
    driverID int AUTO_INCREMENT,
    driverName varchar(20),
    driverEmail varchar(40),
    busID int,
    PRIMARY KEY (driverID),
    FOREIGN KEY (busID) REFERENCES bus(busID)
);

CREATE TABLE IF NOT EXISTS tour(
    DailyTourID int AUTO_INCREMENT,
    NoOfPeople int(3),
    tourDate DATE,
    tourTime TIME,
    tourName varchar(30),
    tourCost int(7),
    tourDriverID varchar(20),
    PRIMARY KEY (DailyTourID),
    FOREIGN KEY (tourDriverID) REFERENCES busDriver(driverID),
    FOREIGN KEY (tourCost) REFERENCES tourPayment(tourCost)
);

CREATE TABLE IF NOT EXISTS TourCustLink(
    TourCustLinkID int AUTO_INCREMENT,
    TourID int,
    custID int,
    PRIMARY KEY (TourCustLinkID),
    FOREIGN KEY (TourID) REFERENCES tour(DailyTourID),
    FOREIGN KEY (custID) REFERENCES customer(custID)
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:31:33.153

这是你的问题：

```
FOREIGN KEY (tourDriverID) REFERENCES busDriver(driverID) 
```

引用一个 INT 但被声明为 varchar(20)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:29:53.513

AUTO_INCREMENT 字段都需要是 PRIMARY KEY 的，所以尝试将称呼改为

```
CREATE TABLE IF NOT EXISTS salutation(
    salutationID int AUTO_INCREMENT,
    salutation varchar(4),
    PRIMARY KEY (salutationID),
    KEY (salutation)
); 
```

此外，在游览中，您的 tourDriverID 数据类型错误，它应该是 INT 以匹配引用的键

```
CREATE TABLE IF NOT EXISTS tour(
    DailyTourID int AUTO_INCREMENT,
    NoOfPeople int(3),
    tourDate DATE,
    tourTime TIME,
    tourName varchar(30),
    tourCost int(7),
    tourDriverID INT,
    PRIMARY KEY (DailyTourID),
    FOREIGN KEY (tourDriverID) REFERENCES busDriver(driverID),
    FOREIGN KEY (tourCost) REFERENCES tourPayment(tourCost)
); 
```

完整的 SQL 小提琴示例可以在这里找到：[http ://sqlfiddle.com/#!2/840b9](http://sqlfiddle.com/#!2/840b9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:29:54.993

实际上，尝试一张一张地创建表格很容易，您会收到更好的错误消息。您的问题是表格`salutation`，因为您必须定义 AUTO_INCREMENT 字段（在您的情况下是`salutationID) as KEY and not the field`称呼`

```
CREATE TABLE IF NOT EXISTS salutation(
   salutationID int AUTO_INCREMENT,
   salutation varchar(4),
   KEY (salutationID) -- here is your error
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T11:30:24.943

这是你运行的代码吗？如果是这样，则错误是关于需要成为键的 AUTO_INCREMENT。

```
CREATE TABLE IF NOT EXISTS salutation(
    salutationID int AUTO_INCREMENT,
    salutation varchar(4),
    KEY (salutation)
); 
```

尝试：

```
CREATE TABLE IF NOT EXISTS salutation(
    salutationID int AUTO_INCREMENT,
    salutation varchar(4),
    KEY (salutationID)
); 
```

并根据需要制作其他外键。

干杯。

# c# - C# 和 VB.Net 之间的表达式树差异

> ID：16103529
> 
> 赞同：49
> 
> 时间：2013-04-19T11:25:57.863
> 
> 标签：c#, vb.net, expression-trees

我有一个处理表达式树的库。该库需要同时使用 C# 和 VB.Net

注意到语言之间在如何构建表达式树方面的一些差异

*   字符串比较
    `() => "a" == "b"`变成了（我明白为什么VB.Net`Expression.Equals("a", "b")`
    `Function() "a" = "b"`在`Expression.Equals(Expression.Call(CompareString, "a", "b"), 0)`
    这里使用CompareString）

*   字符串连接
    `() => "a" + "b"`变成`Expression.Add("a", "b", String.Concat)`
    `Function() "a" & "b"`了`Expression.Call(String.Concat, "a", "b")`

*   优化？
    `() => !(1 == 2)`变成`Expression.Not(Expression.Equals(1, 2))`
    `Function() Not (1 = 2)`变成`Expression.NotEqual(1, 2)`

我的图书馆处理所有这些差异，但**我需要注意更多差异吗？**

**编辑** 对我的代码所做的一些解释。

我使用的系统对您指定的文档有一个过滤器，如下所示：

```
var filter = document.Filter;
filter.LeftParanthesis();
filter.Column(columnNumber);
filter.Equals();
filter.Value("abc");
filter.RightParanthesis();
filter.And();
filter.LeftParanthesis();
...
document.Refresh(); 
```

为了更容易使用过滤器，我的代码允许您将过滤器指定为`Expression<Func<bool>>`lambda。

```
Expression<Func<bool>> filter = () => (123.AsStringColumn() == "abc") && (...);
filter.Apply(document); 
```

然后我的代码迭代表达式树并调用上面指定的文档过滤器方法。该过滤器不支持您可以放入 lambda 的所有内容。方法调用是最明显的一种。

由于 VB.Net 在 C# 不需要的某些情况下会生成方法调用，因此我需要拦截它们并以不同方式处理它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-05T08:37:49.447

`/`除法运算符在 C# 和 VB 中的工作方式不同。在 C# 中，它适应所使用的数据类型，而 VB 总是将操作数转换为浮点值：

`() => 1 / 2`变成`Expression.Divide(1, 2)`
`Function() 1 / 2`变成`Expression.Divide(Expression.Convert(1, Double), Expression.Convert(2, Double))`

在 VB 中，您需要使用`\`运算符进行整数除法和`/`浮点除法，以与`/`C# 中的运算符相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-10T14:06:42.660

我不得不经常使用与我的项目相关的 C# 和 VB.Net，以及我在 VB.Net 处于不安全模式时看到的大部分差异。即，如果我们使 VB.Net 类型安全（选项严格打开，选项显式打开...选项全部打开），它将像 C# 一样工作。

# grails - 在不访问会话的情况下获取 sessionId

> ID：16103531
> 
> 赞同：0
> 
> 时间：2013-04-19T11:26:04.110
> 
> 标签：grails, spring-security

在我的 grails 应用程序中，我使用的是 spring security core 插件。是否有任何方法只需提供用户名和密码即可返回给定用户的 jsessionid

像这样的 jsessionid：

```
def myjsessionid = getJessessionidFromUser("username1", "password1") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:34:49.823

我对 grails 不熟悉，但是 Spring Security 本身提供了[并发会话控制](http://static.springsource.org/spring-security/site/docs/current/reference/ns-config.html#ns-concurrent-sessions)，可以维护一个`SessionRegistry`. 此注册表将包含有关您可以查询的所有用户会话的信息，例如用于获取给定主体的 sessoin id。

用于[`SessionRegistry.getAllSessions()`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/session/SessionRegistry.html)获取[`SessionInformation`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/session/SessionInformation.html)与给定主体/用户相关的 s 列表，然后获取`getSessionId()`这些对象。

并发控制功能通常用于限制用户可能拥有的会话数，但可以将其配置为不强制执行此类限制（只需维护注册表）。[在会话管理一章](http://static.springsource.org/spring-security/site/docs/current/reference/session-mgmt.html#list-authenticated-principals)中查看更多相关信息。

# java - 新应用未在 openshift 上显示

> ID：16103535
> 
> 赞同：0
> 
> 时间：2013-04-19T11:26:24.883
> 
> 标签：java, web-applications, war, openshift

我已经使用 Windows 上的 rhc 客户端收费在 openshift tomcat 容器上部署了一个 Java webapp (.war) 文件。然后应用部署成功（我将应用命名为 ROOT.war）。我的应用地址是（[http://easytravelapp-easytravel.rhcloud.com/](http://easytravelapp-easytravel.rhcloud.com/)）。但是，当我打开地址时，我得到了相同的默认网页，即“欢迎使用 OpenShift”。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:50:15.773

你的 repo 的根目录中应该有一个 README。在“有关布局和部署选项的详细信息”部分中，有运行“git remove -r src/pom.xml”以及添加您的战争和运行 git add/commit/push 的说明。这应该删除示例应用程序的来源。

# android - Never call on Create when process is killed

> ID：16103540
> 
> 赞同：2
> 
> 时间：2013-04-19T11:26:37.493
> 
> 标签：android, android-lifecycle

I'm building an app that works on my Nexus 7 without any problems and also on my Galaxy S2\. Now I've tested it on a Galaxy S3, but somehow the memory management is far more agressive. If I press the home button and wait a few minutes, OnCreate gets called again, so I assume the process has been killed. But if the process gets killed, for this particular application, I want it to start another activity.

I could use overriding onStop and onPause, but that would cause some unwanted behaviour, looking at the Activity Lifecycle. If the process isn't killed it is fine to return to the activity.

Is there a solution for this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:35:47.947

By pressing the home button your activity can be destroyed if the system has determined it needs to free some resources.

This can happen either because the activity is finishing (someone called finish() on it, or because the system is temporarily destroying this instance of the activity to save space. You can distinguish between these two scenarios with the isFinishing() method.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:31:58.617

You can use `savedInstanceState` in your `onCreate` like this:

```
if( savedInstanceState != null ) {
            //Toast.makeText(this, savedInstanceState.getString("message")+"--> ", Toast.LENGTH_LONG).show();
            Intent intent = new Intent(First.this, Second.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return;
        } 
```

# c++ - 返回指向缓存在 std::map 中的项目的指针

> ID：16103541
> 
> 赞同：1
> 
> 时间：2013-04-19T11:26:42.160
> 
> 标签：c++, boost, c++98

我有一个充当缓存的类。它有以下私有成员：

```
std::map<std::string, Foo> _cache; 
```

我需要为此缓存编写一个 getter，它返回一个引用、指针、迭代器或智能指针，指向存储在缓存中的 Foo 对象。如果需要，我希望客户端能够通过 getter 更新 Foo 对象。

但是，如果在缓存中找不到该项目，我不希望 getter 抛出。相反，客户端应该测试返回的值以确定是否找到了该项目。但是，如果您推荐这种方法，我可以说服我投掷。

你会为我的 getter 推荐什么返回类型？

我正在使用 boost 和 C++98。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T12:48:51.073

听起来您需要一个`boost::optional<Foo&>`返回值（[可选引用](http://www.boost.org/doc/libs/1_53_0/libs/optional/doc/html/boost_optional/optional_references.html)）。您的代码应如下所示：

```
class YourCache {
    std::map<std::string, Foo> _cache;
public:
    boost::optional<Foo&> FooByName(const std::string& name)
    {
        std::map<std::string, Foo>::iterator itr = _cache.find(name);
        if(_cache.end() == itr)
            return boost::none;
        return boost::optional<Foo&>(itr->second);
    }
}; 
```

*   吸气剂不扔:)
*   尊重 _cache 的现有实现（您不必更改它来存储智能指针 - 或一般的指针）
*   不能直接访问客户端代码中的内存（如返回 Foo* 会）
*   以最佳方式表达意图（“返回值是可选的/可能丢失”）
*   在客户端代码中提供显式和自然的接口：

例如：

```
// client code:
if (boost::optional<Foo&> result = YourCache.FooByName("FOO")) {
    // only run if result is in cache
    result->bar();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T12:17:27.497

在您的情况下，由于返回空指针的可能性，引用是没有问题的。迭代器也是不行的，因为您无法测试它是否实际上指向一个元素而无法访问缓存的 .end() 函数，该函数是私有成员。除非你提供一个接口来测试是，但这是一个矫枉过正。

唯一的其他选择是返回一个指针。但是，这样你就必须保证指针在调用者使用它的整个过程中保持有效。一种方法是实现共享指针的映射，即：

```
std::map<std::string, boost::shared_ptr<Foo> > _cache; 
```

这样，即使对象被抛出缓存，调用者仍然会得到一个有效的指针。并且 shared_ptr 可以进行布尔测试，因此如果在缓存中找不到项目，您可以返回一个空的 shared_ptr。

但是对于缓存的上下文知之甚少，无法告诉您更多信息（例如，是否需要同步等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T12:25:55.200

使用 [boost::optional](http://www.boost.org/doc/libs/1_53_0/libs/optional/doc/html/index.html) 持有 Foo 引用作为 getter 的返回值。

# c++ - C++：main() 退出后如何打印一些文本？

> ID：16103549
> 
> 赞同：3
> 
> 时间：2013-04-19T11:27:11.597
> 
> 标签：c++, main

```
#include <iostream>
#include <fstream>
#include <cstdio>
    using namespace std;

class Derived
{

public:
    Derived()
    {
        cout<< "Initialize...\n";
    }
    ~Derived()
    {
        cout<< "Finalize...\n";
    }

};
static Derived *obj=new Derived();
int main()
{
    cout<<"Main Started::\n";

} 
```

我正在尝试将输出设为： **Initialize MainStarted Finalize**

但是得到： **初始化 MainStarted**

我试图调试，但它没有进入析构函数。所以我无法解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:30:49.887

你需要使用

```
static Derived obj; 
```

代替

```
static Derived *obj=new Derived(); 
```

现在您使用 new 创建对象，并且永远不会调用 delete，因此永远不会正确删除对象。
或者，`boost::scoped_ptr`如果出于某种原因需要堆分配对象，则可以使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T11:31:14.923

```
static Derived *obj=new Derived(); 
```

这是一个泄漏 - 该对象具有动态存储持续时间（因为您已经使用 创建了它`new`），并且没有任何内容会删除它，因此它永远不会被销毁。

如果您希望它自动销毁，则给对象静态存储持续时间：

```
static Derived obj; 
```

或者，您可以使用`std::atexit`注册任意函数以在程序退出时调用，而不是使用析构函数定义类：

```
#include <iostream>
#include <cstdlib> // for atexit

void goodbye() {std::cout << "Goodbye\n";}

int main() {
    std::atexit(goodbye);
    std::cout << "Hello\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:35:16.450

不要使派生对象成为指针。由于 C++ 不是 java，因此`new`在您的情况下几乎不需要。但是*如果*你`Derived`在堆上创建，你必须确保它被正确地销毁，通过使用 RAII，即一个智能指针。在您的代码中，您有内存泄漏，`*obj`永远不会调用析构函数。
如何正确操作的示例：

```
static Derived obj; //non-heap version

//C++03 auto_ptr, now deprecated:
static std::auto_ptr<Derived> obj(new Derived());

//C++11 smart pointers:
static std::unique_ptr<Derived> obj(new Derived());
static auto obj = std::make_shared<Derived>();

//Boost smart pointers, C++03 compatible:
static boost::shared_ptr<Derived> obj = boost::make_shared<Derived>();
static boost::scoped_ptr<Derived> obj(new Derived()); 
```

选择一个（最好是第一个）。

**编辑：**但在你做任何这些之前，你应该给出一个使用该全局变量的很好的理由。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T12:14:32.540

您正在使用`static Derived *obj=new Derived()`，但不是使用，而是`static Derived obj1`根据您的要求打印。

# java - 在 Java 中读取智能卡并捕获数据

> ID：16103550
> 
> 赞同：0
> 
> 时间：2013-04-19T11:27:20.457
> 
> 标签：java, smartcard-reader

我正在使用java为POS设备开发一个软件。现在我正在研究读卡器功能。我有一个通过USB连接到POS设备的读卡器，当我刷卡时我在记事本中获取了卡数据。

当我刷卡时，我想将卡数据获取到我的应用程序中。但我不知道在我的应用程序上实现这一点。

我非常感谢您对任何代码示例的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T19:58:47.943

如果设备充当键盘，您可以使用任何接受键盘输入的控制台应用程序或 GUI 应用程序。这似乎是合乎逻辑的，那么您是否有任何特定点可以获得“结构”？

# android - é=é：需要按原样显示

> ID：16103554
> 
> 赞同：1
> 
> 时间：2013-04-19T11:27:45.443
> 
> 标签：android, utf-8, special-characters

我从服务器收到一些文本格式的响应，它工作正常，但在某些情况下我没有得到字符串。

说明：- 我的数据库有一个名称，例如 cupcaké，但是当我解析数据时它显示给我`cupcak&eacute;`。我想展示它的样子`cupcaké`。

我在他们的帮助下尝试`URL.Encode`并`URL.Decode`发挥作用，`utf-8`但他们都没有帮助。我需要适用于所有特殊字符的通用解决方案，而不仅仅是这个字符。
这是我的 jsonparser 类，我需要在这个文件中进行更改吗？或某处？

```
HttpURLConnection conn = null;
    StringBuilder jsonResults = new StringBuilder();
    try {
        URL url = new URL(str);
        conn = (HttpURLConnection) url.openConnection();
        InputStreamReader in = new InputStreamReader(conn.getInputStream());

        // Load the results into a StringBuilder
        int read;
        char[] buff = new char[1024];
        while ((read = in.read(buff)) != -1) {
            jsonResults.append(buff, 0, read);
        }
        json = jsonResults.toString();         
    } catch (MalformedURLException e) {
        Log.e(LOG_TAG, "Error processing Places API URL", e); 
```

我怎样才能在我的屏幕上显示它？
请给我任何参考或提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:29:52.213

经过长时间的搜索，我找到了一个很好的答案。这些是 html 实体，可以使用以下代码显示：

```
Html.fromHtml(Html.fromHtml((String) yourstring).toString()); 
```

现在每个 html 实体都转换为实际的字符串。您可以[在此处](http://developer.android.com/reference/android/text/Html.html)找到更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:33:40.870

请注意，当您输入`cupcak&eacute;`问题时（在我编辑之前），浏览器将其显示为`cupcaké`（再次出现，检查答案来源：cupcaké）。这些是“html实体”，您可以要求您喜欢的编程语言将它们解码为相应的字符。在 php 中，您将使用`html_entity_decode()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:45:44.637

You need to work on Sms Encoding Concept . Try some refrence: [http://www.codeproject.com/Tips/470755/Encoding-Decoding-7-bit-User-Data-for-SMS-PDU-PDU](http://www.codeproject.com/Tips/470755/Encoding-Decoding-7-bit-User-Data-for-SMS-PDU-PDU)

# c++ - OpenCV c++模板识别

> ID：16103559
> 
> 赞同：0
> 
> 时间：2013-04-19T11:27:58.843
> 
> 标签：c++, templates, opencv, matching

我有一个模板，我想知道该模板是否存在于图像中。好吧，我用谷歌搜索了很多，得出的结论是我需要使用`cvMatchTemplate`and `cvMinMaxLoc`。

这是我的代码：

```
image = cvLoadImage("C:/images/flower.jpg",1);
templat = cvLoadImage("C:/images/flo.jpg",1);
image2=cvCreateImage( cvSize(image->width, image->height), IPL_DEPTH_8U, 1 );
result=cvCreateImage( cvSize(image->width, image->height), IPL_DEPTH_8U, 1 );
cvZero(result);
cvZero(image2);
cvCvtColor(image,image2,CV_BGR2GRAY);
cvMatchTemplate(image2, templat,result,CV_TM_CCORR_NORMED);

double min_val=0, max_val=0;
CvPoint min_loc, max_loc;
cvMinMaxLoc(result, &min_val, &max_val, &min_loc, &max_loc);

cvRectangle(image, max_loc, cvPoint(max_loc.x+templat->width,  
max_loc.y+templat->height), cvScalar(0), 1);

cvShowImage( "src", image );
cvShowImage( "result image", result);
cvWaitKey(0); 
```

我的问题是当我运行上面的代码时，会显示一个消息框：

```
Unhandled exception at 0x747d812f in matching.exe: Microsoft C++ exception: cv::Exception at memory location 0x001ff6ec.. 
```

在黑屏中有一条消息：

```
OpenCV Error: Sizes of input arguments do not match <image and template should have the same type> in unknown function, file..\..\..\..\ocv\opencv\scr\cv\cvtempl.cpp, line 356. 
```

请注意，这`flower.jpg`是彩色图像，`flo.jpg`是该图像的灰度。

对正在发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:07:36.260

您需要将两者都转换`flower.jpg`为`flo.jpg`单通道图像。即使`flo.jpg`是灰度，您也将其加载为三通道图像。图像也`result`应该`IPL_DEPTH_32F`是`IPL_DEPTH_8U`.

这是正确的代码（未经测试）：

```
IplImage* image    = cvLoadImage("C:/images/flower.jpg", 1);
IplImage* templat  = cvLoadImage("C:/images/flo.jpg", 1);
IplImage* image2   = cvCreateImage(cvSize(image->width, image->height), IPL_DEPTH_8U, 1);
IplImage* templat2 = cvCreateImage(cvSize(templat->width, templat->height), IPL_DEPTH_8U, 1); 

cvCvtColor(image, image2, CV_BGR2GRAY);
cvCvtColor(templat, templat2, CV_BGR2GRAY);

int w = image->width - templat->width + 1;
int h = image->height - templat->height + 1;
result = cvCreateImage(cvSize(w, h), IPL_DEPTH_32F, 1);
cvMatchTemplate(image2, templat, result, CV_TM_CCORR_NORMED);

double min_val, max_val;
CvPoint min_loc, max_loc;
cvMinMaxLoc(result, &min_val, &max_val, &min_loc, &max_loc);

cvRectangle(image, max_loc, cvPoint(max_loc.x+templat->width, 
max_loc.y+templat->height), cvScalar(0), 1);

cvShowImage("src", image);
cvShowImage("result image", result);
cvWaitKey(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:28:32.990

模板匹配假定两者`image`具有`template`相同数量的通道和通道深度。最简单的方法是以灰度加载它们：

```
Mat I = imread("lena.png", 0);
Mat T = imread("template.png", 0); 
```

注意：我会命令使用 OpenCV2.0 C++ 接口。所以而不是`cvLoadImage`使用`imread`. 旧界面不再开发。

# windows-phone-8 - Windows phone 中的应用内购买

> ID：16103562
> 
> 赞同：0
> 
> 时间：2013-04-19T11:28:08.197
> 
> 标签：windows-phone-8, in-app-purchase

我正在开发一个具有 In App purchase 功能的应用程序，但应用程序在 falloling 代码上崩溃

var List = 等待 CurrentApp.LoadListingInformationAsync();

它向我展示了

显式事务已被强制取消。（来自 HRESULT 的异常：0x8032000F）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:43:55.210

您应该在开发应用程序时使用 CurrentAppSimulator，在部署到生产环境时使用 CurrentApp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:39:48.570

我认为 CurrentAppSimulator 类用于 Windows Store 应用程序，它不适用于 Windows Phone-8 应用程序。

# webkit - Web 渲染引擎如何处理不可见的对象？

> ID：16103563
> 
> 赞同：0
> 
> 时间：2013-04-19T11:28:08.783
> 
> 标签：webkit, browser, gecko, webpage-rendering

我有一个 CSS 样式表，它为许多对象定义了一些带有过渡状态的动画。一次只能看到这些对象中的一个；由于诸如`left:-1000px`css样式的线条，所有其他的都位于可见区域之外。

我不愿意仅在需要时才使用 JavaScript 来激活动画（换句话说：我更喜欢纯 CSS 解决方案），但另一方面我担心渲染引擎即使绘制动画也会给 cpu 带来压力当前不可见的所有对象。是这种情况吗？

# python - 我不明白为什么这个 Python 代码会这样执行！[欧拉计划]

> ID：16103565
> 
> 赞同：-1
> 
> 时间：2013-04-19T11:28:14.510
> 
> 标签：python

我刚刚完成 Project Euler，没有问题。1 for Python ...链接如下：

[http://projecteuler.net/problem=1](http://projecteuler.net/problem=1)

我在python中提出了以下解决方案...

```
#!/usr/bin/env python

def main():
    print("The answer will be calculated shortly...")

if __name__ == "__main__":
    main()

n = 1000
n=-1

def isMultiple(i):
    if (i % 3 == 0) or (i % 5 == 0):
        if (i % 3 == 0) and (i % 5 == 0):
            return False
        else:
            return True

sum = 0
for i in range(3, n):
    if isMultiple(i):
        sum+=1
    print("The answer is... ", sum) 
```

但是，运行此解决方案时给出的所有内容是：

```
[arch@archlinux Project Euler]$ python 1000-multi3or5.py
The answer will be calculated shortly...
[arch@archlinux Project Euler]$ 
```

我真的不明白出了什么问题，你能帮我解释一下为什么吗？非常感谢您花时间阅读本文，特别是如果您愿意帮助我。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:30:40.900

因为循环永远不会发生：

```
n = 1000
n=-1 
```

然后在最后：

```
for i in range(3, n): 
```

您正在运行从 3 到 -1 的范围。

```
In [4]: range(3, -1)
Out[4]: [] 
```

将行更改为：

```
n -= 1 
```

它应该工作：

```
In [9]: n = 20 # Just to show a smaller output - your n would be 999 obviously
   ...: sum = 0
   ...: for i in range(3, n):
   ...:     if isMultiple(i):
   ...:         sum+=1
   ...:     print("The answer is... ", sum)
   ...:     
('The answer is... ', 1)
('The answer is... ', 1)
('The answer is... ', 2)
('The answer is... ', 3)
('The answer is... ', 3)
('The answer is... ', 3)
('The answer is... ', 4)
('The answer is... ', 5)
('The answer is... ', 5)
('The answer is... ', 6)
('The answer is... ', 6)
('The answer is... ', 6)
('The answer is... ', 6)
('The answer is... ', 6)
('The answer is... ', 6)
('The answer is... ', 7)
('The answer is... ', 7) 
```

# jquery - 向这个 .on 函数添加淡入淡出

> ID：16103567
> 
> 赞同：1
> 
> 时间：2013-04-19T11:28:25.437
> 
> 标签：jquery, fadein

有没有办法可以将 .fadein 方法添加到以下 jQuery 代码中？

目前，当您将鼠标悬停在 .button div 上时，它会显示另一个具有相应 ID 的 div，但更改是即时的，而且看起来有点生涩，所以我想在每个过渡之间添加一个漂亮的小淡入淡出

```
$(".button").on("mouseover",function(){
    $('div.tagline').hide();
    $('#tag-' + this.id).show();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:30:05.213

尝试改变

```
 $('div.tagline').hide();
 $('#tag-' + this.id).show(); 
```

和

```
 $('div.tagline').fadeOut();
 $('#tag-' + this.id).fadeIn(); 
```

以这种形式编写的fadeIn和fadeOut将同时执行（并行）：如果你想结束fadeOut然后执行fadeIn只需写

```
 var self = this;
 $('div.tagline').fadeOut(function() {
     $('#tag-' + self.id).fadeIn();
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:29:49.660

试试这样：

```
$(".button").on("mouseover",function(){
    $('div.tagline').stop().fadeOut();
    $('#tag-' + this.id).stop().fadeIn();
}); 
```

如果它闪烁，您可能需要添加[stop()方法。](http://api.jquery.com/stop/)

# google-app-engine - 为什么我的存储实体使用默认值？

> ID：16103571
> 
> 赞同：2
> 
> 时间：2013-04-19T11:28:38.273
> 
> 标签：google-app-engine, go

我在说

```
data := Thing {
    date:     time.Now().UnixNano()   
    name:     "foo",
    value:    5,
}
_, err := datastore.Put(c, datastore.NewIncompleteKey(c, "stuff", nil), &data)
if err != nil {
    http.Error(w, err.Error(), http.StatusInternalServerError)
    return
} 
```

正在存储的是`{0, "", 0}`. 我希望看到类似的东西`{1366370653722376000, "foo", 5}`。我究竟做错了什么？

注意：我使用的是开发应用服务器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T11:32:56.673

您必须导出希望在包外可见的名称。要实现这一点，您必须使用任何 Unicode 大写字母类（其中 ASCII 大写字母是子集）作为其首字母，例如`Date`代替`date`，`Name`代替`name`等。

没有那个`datastore.Put`就不能“看到”（使用反射）这些领域。

# php - 捆绑产品的新产品类型图像 - 儿童产品价格未插入表 sale_flat_quote_item 和 sale_flat_order_item

> ID：16103579
> 
> 赞同：0
> 
> 时间：2013-04-19T11:29:01.477
> 
> 标签：php, magento

我创建了捆绑产品的新产品类型图像，除了儿童产品无法将价格插入数据库表 salt_flat_quote_item 和 sale_flat_order_item 之外，一切正常。原来，这在后端的订单中出现了一些问题，无法显示该产品的儿童价格。我必须调用一个函数来获取我的孩子的价格吗？

* * *

这是我的配置文件

```
<catalog>
  <product>
    <type>
      <formula translate="label" module="bank">
        <label>Formula Product</label>
        <model>bank/product_type_formula</model>
        <composite>1</composite>
        <allowed_selection_types>
          <simple/>
          <virtual/>
        </allowed_selection_types>
        <price_model>bank/product_type_formula_price</price_model>
        <index_data_retreiver>bank/catalogIndex_data_formula</index_data_retreiver>
        <index_priority>40</index_priority>
      </formula>
    </type>
    <options>
      <formula>
         <types>
            <select translate="label" module="bank">
               <label>Drop-down</label>
            </select>
            <radio translate="label" module="bank">
               <label>Radio Buttons</label>
            </radio>
            <checkbox translate="label" module="bank">
               <label>Checkbox</label>
            </checkbox>
            <multi translate="label" module="bank">
               <label>Multiple Select</label>
            </multi>
         </types>
      </formula>
    </options>
  </product>        
</catalog> 
```

我是否必须创建更多配置或任何东西来扩展捆绑产品。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:43:48.210

价格由 getPrice 和 getFinalPrice 计算得出

如果它是捆绑产品，它将搜索捆绑产品的总功能并计算价格

当您创建了一个新产品时，您是否为此创建了一个总模型，即 Mage_Catalog_Model_Product_Type_Configurable_Price

向我们提供您的代码详细信息以获取更多信息

# objective-c - 使用 UIGestureRecognizer 从表格视图中获取视频 url

> ID：16103585
> 
> 赞同：0
> 
> 时间：2013-04-19T11:29:24.980
> 
> 标签：objective-c, uitableview, uitapgesturerecognizer

我的目标是列出库中的视频，并在点击每个项目时获取 url。

我设法从照片库中获取所有视频，并将 textLabel 设置为 url。但是，当我点击视频时，所有视频都会 NSLog 输出最后一个单元格中视频的 url。我怎样才能真正获得每个视频的网址？我不知道是什么问题。

这是我的`(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`方法的一些关键行：

```
 static NSString *CellIdentifer = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifer];
    if (cell == nil) {
        cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifer];
    }

    if (tableView.tag==0)
    {
        ALAsset *asset = [videoLibrary objectAtIndex:indexPath.row];
        videoURL = [[asset defaultRepresentation] url];
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
        tap.numberOfTapsRequired = 1;
        //here I am trying to print out the urls
        NSLog(@"-------- the url is: ---------");
        NSLog(@"%@", videoURL);
        [cell.textLabel setText:[NSString stringWithFormat:@"%d. %@", indexPath.row+1, videoURL]];
        [cell.imageView setImage:[UIImage imageWithCGImage:[asset thumbnail]]];
        //where the cells get the gesturerecognizer
        [cell addGestureRecognizer:tap];
    }
    else
    {
        [cell.textLabel setText:@"Show Resume"];
    }
    return cell; 
```

这是我的处理方法：

```
- (void)handleTap:(UITapGestureRecognizer *)sender
{
    [super self];
    if (sender.state == UIGestureRecognizerStateEnded) {
        NSLog(@"clicked! I can get url: [%@] here!", videoURL);
    }
} 
```

我的代码有什么问题？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:41:12.637

请将您的方法更改`- (void)handleTap:(UITapGestureRecognizer *)sender`为：

```
- (void)handleTap:(UITapGestureRecognizer *)sender
{
    if (sender.state == UIGestureRecognizerStateEnded) {
        UITableViewCell* cell = (UITableViewCell*)sender.view;
        NSLog(@"clicked! I can get url: [%@] here!", cell.textLabel.text);
    }
} 
```

# python - 使用 NetworkX 向节点添加多级属性

> ID：16103588
> 
> 赞同：2
> 
> 时间：2013-04-19T11:29:33.257
> 
> 标签：python, networkx, gephi

我正在尝试导出带有一些可视化规范的图形文件。我不知道如何添加多级属性。

```
Import networkx as nx
#Create the Graph 
g = nx.Graph()
g.add_edge('Andre',   'Beverly')
g.add_edge('Andre',   'Diane')
g.add_edge('Andre',   'Carol')
g.add_edge('Andre',   'Fernando')
g.add_edge('Beverly', 'Diane')
nx.draw(g) 
```

# 向节点添加属性

我想做的是添加位置但使用特定属性（名称和结构）

```
# compute position 
pos = nx.spring_layout(g)

# add attribute 
g.node["Andre"]["viz"]["position"]["x"]= pos["Andre"][0]
g.node["Andre"]["viz"]["position"]["y"]= pos["Andre"][1] 
```

### 这不起作用

我实际上有两个问题：

1.  如何添加多级属性
2.  有没有办法在迭代中做到这一点（我仍然可以编写一个函数，但我想知道是否有一种我没有见过的从 networkx 做的方法）

对于信息：我真正追求的是一种将网络图导出到 gexf 文件的方法，我可以使用[gexf-js](https://github.com/raphv/gexf-js)打开该文件，而无需通过[gephi。](https://gephi.org/)

PS：我有[这个问题](https://stackoverflow.com/questions/7591154/)和其他与此相关的问题，但据我所知，他们并没有解决我所追求的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:43:53.583

计算出 中的位置后`spring_layout()`：

```
for node in g.nodes():
    g.node[node]["viz"] = {'position': {'x': pos[node][0],
                                        'y': pos[node][1]
                                        }
                           }

print g.nodes(data=True) 
```

结果是：

```
[('Beverly',
  {'viz': {'position': {'x': 0.00089466691490215525,
     'y': 0.69872879243427066}}}),
 ('Andre',
  {'viz': {'position': {'x': 0.55837798068966304, 'y': 0.47862178288009244}}}),
 ('Carol', {'viz': {'position': {'x': 1.0, 'y': 0.95632397309056527}}}),
 ('Diane', {'viz': {'position': {'x': 0.0, 'y': 0.25644757276893704}}}),
 ('Fernando', {'viz': {'position': {'x': 0.9957995595107102, 'y': 0.0}}})] 
```

然后你就可以`nx.write_gexf(g, 'somefile.gexf')`开始工作了:-)

# c++ - QDesktopServices::openUrl() 无法在 Windows 上的 chrome 中打开页面。解决方法？

> ID：16103589
> 
> 赞同：3
> 
> 时间：2013-04-19T11:29:36.520
> 
> 标签：c++, windows, qt, google-chrome

```
QDesktopServices::openUrl(QUrl("http://google.com")); 
```

如果默认浏览器 ie9、ie8、firefox 或 opera 则有效

如果默认浏览器是 chrome，则没有任何反应

QtCreator 调试器日志我可以看到类似的行

```
ModLoad: 00000000`05250000 00000000`05308000   iexplore.exe 
```

或者

```
ModLoad: 00000000`04db0000 00000000`04ef8000   chrome.exe 
```

所以它确实有效，但即 ff 等打开具有指定 url 的新选项卡而 chrome 没有

我想这是错误

前段时间它工作得很好

我的系统（ENV vars 等）可能有问题吗？

请帮助解决方法

我更喜欢跨平台，但在 Windows 上正常工作具有最高优先级

可能的解决方案（winapi SHELLEXECUTE） - 真的很讨厌丑陋的#ifdef，但可以选择

PS：抱歉英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:16:03.463

我不认为这真的是您的应用程序的问题。我认为这更多的是关于 Chrome 如何处理此类调用。在你的位置上，我会选择 winpai SHELLEXECUTE 解决方案。与将默认浏览器调用移至操作系统而不是 Qt 库的好处相比，#ifdef 并不难看。

# ios - iPhone 上的退格键

> ID：16103594
> 
> 赞同：0
> 
> 时间：2013-04-19T11:29:49.750
> 
> 标签：ios, iphone, objective-c, uisearchbar

在我的 iPhone 应用程序中，我有 UISearchBar 元素。有时当我单击退格按钮时，它会删除多个符号，有时只删除一个。如何设置逐个删除符号，而不是按组？

我认识到了这个问题，它只在单击一次后发生，并且在我首先启动应用程序后发生：

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{
    NSLog(@"*******%@***********", searchText);
    if(!searchBar.text.length){        
        searchIsActive = false;        
        [searchBar resignFirstResponder];
        [self.tableView reloadData];
    }
} 
```

在 colsole 我看到：

" ****** *1* ***** ***** "

“ ****** *12* ***** ***** ”

在我点击键盘上的退格按钮后，我看到：“ ***** ** *** ** *** *** ”

所以这意味着 searchBar.text.length 返回 NO

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:37:03.787

退格元素是系统元素。操作系统处理该事件 this event 而不是您的应用程序 textfield 。您只能将您的文本字段设置为第一响应者来为其启用键盘。由于您没有为在文本字段上显示字符做任何事情，因此您无法删除它。我认为问题可能出在其他地方。或者您在键盘上敲错了。

# php - php连接两个表

> ID：16103601
> 
> 赞同：-1
> 
> 时间：2013-04-19T11:30:06.667
> 
> 标签：php, mysql, join, store

我有两张桌子

表 1 类别

```
Id    name      img   
1   appliances   
2   books 
```

表2产品

```
ID  name des  price  cataegory sub  img
1  TV    lcd  125     1        tv 
```

我正在尝试加入表 2 中类别中的两个表，从表 1 中获取名称

它将显示为

```
ID  name des  price  cataegory sub  img
1  TV    lcd  125  appliances    tv 
```

这是我的代码

```
 $sql = "SELECT p.id, 
                   p.name,
                   p.description, 
                   p.price,
                   c.name,
                   p.sub
            FROM products p
            JOIN category c on products p = c.id
            ORDER by p.id
            ";

    if($query =  mysql_query($sql) or die())
    {
        while($result = mysql_fetch_assoc($query))
        {   echo "<tr id='id'>";
            //echo "<td>".$result['img']."</td>";
            echo "<td>".$result['name']."</td>";
            echo "<td>".$result['description']."</td>";
            echo "<td>".$result['price']."</td>";
            echo "<td>".$result['category']."</td>";
            echo "<td>".$result['sub']."</td>";
            echo "</tr>";
        }
    }       "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:31:50.710

```
FROM products p
        JOIN category c on products p = c.id 
```

它应该是`ON p.id = c.id`或匹配的参数是什么，即`p.cataegory = c.id`

# php - 如何获取点击的div jquery的id

> ID：16103610
> 
> 赞同：1
> 
> 时间：2013-04-19T11:30:26.173
> 
> 标签：php, javascript, jquery

我一直在尝试获取单击`div`的**相同类**但具有**不同 ID**的 id 。我尝试了我所知道的一切。

这是我尝试过的一个代码**（在这个代码中，`.click function()`不起作用**..编辑：这意味着它似乎在单击时根本没有运行代码！）：-

```
$(".u_search").click(function() {
    var attr_u_search = $(this).attr('id');
    var dataString = '&u_search=' + $(".u_search").attr('id');
    alert(dataString);

    $.ajax({
    type: "POST",
    url: '/script/profile.php',
    data: dataString,
    cache: false,
    success: function(data) {
          $('#ui_profile').show();
          $('#ui_profile').html(data);
          location.hash = 'profile' + 'id=' + dataString;
          $(".searchbox").val('');
          $("#usr_suggest").hide();

    }
  });
}); 
```

PHP:-

```
echo "<tr id='" . $id . "' class='u_search' height='40px'><td width='40px'><img class='avatar' src='$avater' /></td><td>" . $fname_ . " " . $lname_ . "</td></tr>";
}} 
```

* * *

这是我尝试过的另一种代码组合（**这个错误**：假设我有 5 `divs`，即使我点击了第二个 div 或第三个 div，它也只捕获第一个`div`[ `div`1] 的 id 而不是点击的`div`。我想要能够**捕获点击的ID`div`**。）： -

```
$(".u_search").click(function() {
    var attr_u_search = $(".u_search").attr('id');
    var dataString = '&u_search=' + $(".u_search").attr('id');
    alert(dataString);

    $.ajax({
    type: "POST",
    url: '/script/profile.php',
    data: dataString,
    cache: false,
    success: function(data) {
          $('#ui_profile').show();
          $('#ui_profile').html(data);
          location.hash = 'profile' + 'id=' + dataString;
          $(".searchbox").val('');
          $("#usr_suggest").hide();

    }
  });
}); 
```

PHP:-

```
echo "<tr id='" . $id . "' class='u_search' height='40px' onclick='javascript:op_prof(1)'><td width='40px'><img class='avatar' src='$avater' /></td><td>" . $fname_ . " " . $lname_ . "</td></tr>";
}} 
```

**编辑：当我使用第一个代码（带有`.click function()`的代码）时，代码似乎根本没有运行！.. 我正在使用 jquery 库版本 1.9.1**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:46:27.210

Inside your function change

```
$('.u_search').attr('id') 
```

To

```
$(this).attr('id') 
```

The quotes are important, but this is not inside quotes ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:35:55.400

```
 $("div").on("click",function(){
     var id = this.id; //returns id
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:36:13.997

```
var attr_u_search = $(this).attr('id');
var dataString = '&u_search=' + $(".u_search").attr('id'); 
```

您再次选择每个 u_search div 来构建您的数据字符串，而不是使用已经获取的 id：

```
var attr_u_search = $(this).attr('id');
var dataString = '&u_search=' + attr_u_search; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T11:52:29.243

```
$('body').delegate('.u_search', 'click', function() {
    var attr_u_search = $(this).attr('id');
    var dataString = '&u_search=' + attr_u_search;
    alert(dataString);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T11:41:25.183

尝试这个 ：

```
$('body').on('click', '.u_search', function() {
  var attr_u_search = $(this).attr('id');
  var dataString = '&u_search=' + attr_u_search;
  alert(dataString);
  // REST OF CODE
}); 
```

（经过测试并可以正常工作，如果仍然无法正常工作，则问题可能出在其他地方）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T11:33:11.247

我认为是： `$(this).attr('id')` 您需要使用 $(this) 来获得单击的对象..

```
var attr_u_search = $(this).attr('id');
var dataString = '&u_search=' + attr_u_search; // it's better ! 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T11:33:17.987

当你这样做

```
$(".u_search").click(function() {... 
```

您的回调函数现在有一个名为`this`. 您可以使用它来获取您单击的实际对象。所以在这种情况下，如果你想获取被点击对象的 ID，只需这样做：

```
var the_id = $(this).attr("id"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-19T11:33:56.837

在函数内部，您可以使用 $(this) 引用活动的 jquery 对象

```
$(".u_search").click(function() {
 ...
 //get ID of button being clicked upon
//Jquery Solution
 $(this).attr('id');

//Or Javascript
  this.id;
 ...
} 
```

# java - JTable 渲染器慢？

> ID：16103612
> 
> 赞同：1
> 
> 时间：2013-04-19T11:30:28.087
> 
> 标签：java, performance, swing, jtable, tablecellrenderer

当我使用 JTable 自定义渲染器和编辑器将 jpanel 添加到表格的单元格时，我注意到渲染变慢并且在上下滚动时 jtable 导航变得不可能......正如您将在下面看到的，我的渲染器类包含一个对象 TransactionUnit （jpanel），每次调用 getTableCellRendererComponent() 时，它都会将 Transaction 传递给 TransactionUnit 面板，该面板将使用该 Transaction 的数据填充字段并将自身返回给渲染器。

我的渲染器类：

```
package gui.transaction;

import baseclasses.Transaction;
import java.awt.Component;
import javax.swing.JTable;
import javax.swing.table.TableCellRenderer;

public class RegistreRenderer implements TableCellRenderer{

TransactionUnit t;
public RegistreRenderer(){
    t = new TransactionUnit(null);
}

@Override
public Component getTableCellRendererComponent(JTable table, Object value, boolean     isSelected, boolean hasFocus, int row, int column) {
    return t.getComponent((Transaction) value);
}

} 
```

getComponent(Transaction t) 方法返回带有事务数据的 jpanel。

我的编辑类：

```
package gui.transaction;

import baseclasses.Transaction;
import java.awt.Component;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import javax.swing.AbstractCellEditor;
import javax.swing.JTable;
import javax.swing.table.TableCellEditor;

public class RegistreEditor extends AbstractCellEditor implements TableCellEditor, ItemListener {

TransactionUnit t;
public RegistreEditor(){
t = new TransactionUnit(null);
}

@Override
public Object getCellEditorValue() {
   return null;
}

@Override
public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
    if(isSelected) {

        return t.getComponent((Transaction) value);
    }
    else {
        return null;
    }
}

} 
```

我的表模型类：

```
public class Model extends AbstractTableModel{

    @Override
    public int getRowCount() {
       return list.size();
    }

    @Override
    public int getColumnCount() {
       return 1;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        return list.get(rowIndex);
    }

    @Override
    public Class<?> getColumnClass(int columnIndex) {
        return TransactionUnit.class;
    }

    @Override
    public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
       list.insertElementAt((Transaction) aValue, rowIndex);
       fireTableCellUpdated(rowIndex, columnIndex);
    }

    @Override
    public String getColumnName(int column) {
        return "Registre";
    }

    public void supprimer(Transaction unit){
        list.remove(unit);
        fireTableDataChanged();
    }
    public void ajouter(Transaction unit){
        list.add(unit);
        fireTableDataChanged();
    }
    public void vider(){
        list.clear();
        fireTableDataChanged();
    }

    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
        return true;
    }

    public void setList(Vector<Transaction> l){
        list = l;
    }

} 
```

与列表 = 交易列表 ...

所以，我正在寻求帮助，我希望我能找到它:)，我尝试了很多解决方案，就像我使用面板列表而不是事务列表时一样，jtable 变得流畅，但程序需要很多内存，我遇到超过 100 行的表的内存泄漏......

# asp.net-mvc - ASP.NET MVC。路由和 URL 构建

> ID：16103621
> 
> 赞同：2
> 
> 时间：2013-04-19T11:30:41.197
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, helpers

有没有人知道如何在 url 中隐藏一些参数？

例如，您有一个 url 参数“culture”。它可以是“en, fr, it”。默认情况下，您的网站以“en”文化呈现，我们不会在 URL 中显示默认文化，但在其他文化的情况下，参数“culture”必须出现在 URL 中。

```
http://myrendersite.net/barbikueue
http://myrendersite.net/fr/barbikueue 
```

这是不同文化中的相同页面。基于默认的asp.net mvc路由系统怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:20:56.250

这将有助于：

[ASP.NET mvc、本地化路由和用户的默认语言](https://stackoverflow.com/questions/3683404/asp-net-mvc-localized-routes-and-the-default-language-for-the-user)

[asp.net mvc 本地化](https://stackoverflow.com/questions/660872/asp-net-mvc-localization/661126#661126)

[在 ASP.Net MVC 应用程序中设置文化](https://stackoverflow.com/questions/1560796/set-culture-in-an-asp-net-mvc-app)

您必须注册两条路线：

```
routes.MapRoute(
            name: "DefaultLang",
            url: "{language}/{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
            constraints: new { language = "[a-z]{2}"}
        );

routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

创建一个`Attribute`继承`ActionFilterAttribute`：

```
public class LanguageActionFilterAttribute : ActionFilterAttribute
    {

        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            var routeDataKey = "language";
            var defaultLang = "en";
            var defaultCulture = "EN";

            // if no language route param received
            if (filterContext.RouteData.Values[routeDataKey] == null /* && currentCulture != "en-EN" */)
            {
                // change culture to en-EN
                Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo(string.Format("{0}-{1}", defaultLang, defaultCulture));
                Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo(string.Format("{0}-{1}", defaultLang, defaultCulture));
            }
            else
            {
                 /*if (currentCulture != "whatever")
                 { 
                    //set culture to whatever
                 }*/
            }

            base.OnActionExecuting(filterContext);
        }
    } 
```

之后`BaseController`使用之前创建的属性创建一个：

```
[LanguageActionFilter]
public abstract class BaseController : Controller
{

} 
```

你所有的`Controllers`遗嘱现在都继承`BaseController`了，而不是`Controller`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:43:22.203

以下 RouteConstraint 可能会有所帮助，

```
public class CultureConstraint : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values,
                      RouteDirection routeDirection)
    {
        if (routeDirection == RouteDirection.UrlGeneration)
        {
            return values[parameterName] != null &&
                   (route.Defaults[parameterName] == null ||
                    values[parameterName].ToString().ToLower() != route.Defaults[parameterName].ToString().ToLower());
        }
        return true;
    }
} 
```

将其用作，

```
routes.MapRoute(
    name: "Culture",
    url: "{culture}/{controller}/{action}/{id}",
    defaults: new {culture = "en", controller = "Home", action = "Index", id = UrlParameter.Optional},
    constraints: new {culture = new CultureConstraint()}
);

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new {controller = "Home", action = "Index", id = UrlParameter.Optional}
); 
```

此处约束仅适用于出站 url，并在路由信息中的“文化”等于默认值时丢弃候选路由。

我使用了最简单的实现，因为你没有发布你的路由代码，但这个想法应该可行。

希望这可以帮助。

# javascript - CSS首选高度和最大高度

> ID：16103625
> 
> 赞同：3
> 
> 时间：2013-04-19T11:30:55.320
> 
> 标签：javascript, html, css

我有一个`div`应该有一个最大高度和一个首选高度。在下面发布的示例中，我`#test`的背景为黑色，最大高度为`800px`. 当浏览器视口有足够的可用空间时，它应该占用`800px`. 如果可用空间较少（即移动设备），则应使用最大数量的可用空间。最好仅使用 CSS 来实现这一点？

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Prototype</title>
        <style>
            body, html {
                margin: 0;
                height: 100%;
                width: 100%;
            }

            #test {
                background-color: black;
                background-position: center;
                background-repeat: no-repeat;
                max-height: 600px;
                max-width: 800px;
            }
        </style>
    </head>
    <body>
        <div id="test"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:34:50.013

还包括以下属性`#test`：

```
height: 100%;
width: 100%; 
```

小提琴链接在这里：http: [//jsfiddle.net/Nx5Zb/](http://jsfiddle.net/Nx5Zb/)

嵌入整页结果：http: [//jsfiddle.net/Nx5Zb/embedded/result/](http://jsfiddle.net/Nx5Zb/embedded/result/)

# kendo-grid - 我在剑道网格过滤器上的数字文本框显示无穷大值

> ID：16103626
> 
> 赞同：1
> 
> 时间：2013-04-19T11:31:07.960
> 
> 标签：kendo-grid

我的应用程序中有剑道网格。在我的网格中，可过滤是真的。在网格中，过滤器中的一行有数字文本框，当我们单击微调器时，它显示无穷大值。所以我想给数字文本一些限制-过滤器中的框。如何对网格过滤器中的数字文本框进行一些限制。？我的网格代码是

```
 var grid = $("#grid").kendoGrid({
        dataSource: {
            type           : "odata",
            transport      : {
                read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
            },
            schema         : {
                model: {
                    fields: {
                        OrderID  : { type: "number" },
                        Freight  : { type: "number" },
                        ShipName : { type: "string" },
                        OrderDate: { type: "date" },
                        ShipCity : { type: "string" }
                    }
                }
            },
            pageSize       : 10
        },
        filterable: true,
        sortable  : true,
        pageable  : true,
        columns   : [
            {
                field     : "OrderID",
                filterable: false
            },
            "Freight",
            {
                field : "OrderDate",
                title : "Order Date",
                width : 100,
                format: "{0:MM/dd/yyyy}"
            },
            {
                field: "ShipName",
                title: "Ship Name",
                width: 200
            },
            {
                field: "ShipCity",
                title: "Ship City"
            }
        ]
    }).data("kendoGrid"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T09:19:22.630

一旦尝试这个

```
filterMenuInit: function(e) {
  var numeric = e.container.find("[data-role=numerictextbox]").data("kendoNumericTextBox");
  if (numeric) {
    numeric.min(0);
  }
} 
```

# android - 从 Java 端调用的 Android 原生方法

> ID：16103632
> 
> 赞同：1
> 
> 时间：2013-04-19T11:31:20.047
> 
> 标签：android, native-code, android-audiorecord

如何在 Android 中访问从 Java 端调用的本机方法？我的问题与 Android Media 包中的 AudioRecord 类特别相关。我阅读了 AudioRecord.java 的源代码。我发现大部分工作都是通过本机方法执行的，例如：

native_setup(...), native_start(...), native_stop(...), native_read_in_byte_array(...), native_read_in_direct_buffer(...)

我下载了 Android 源代码，但无法使用这些方法。而且我实际上不知道如何到达他们。我在源代码目录中找到的库中寻找这些方法，但没有成功。如果有人有想法，我将不胜感激。谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:25:37.260

I think I found them. After using the Linux command

grep -r "native_read_in_direct_buffer" ./ANDROID_SOURCE/.*

I found the corresponding cpp files.

AudioRecord.cpp is located in: ~/ANDROID_SOURCE/frameworks/av/media/libmedia/ directory,

android_media_AudioRecord.cpp is located in ~/ANDROID_SOURCE/frameworks/base/core/jni directory.

I wanted to share it as a reference to other possible programmers willing to reach the same/similar source files.

# java - 如何使用数据库中的最后一个查询并以答案的形式排列？

> ID：16103633
> 
> 赞同：0
> 
> 时间：2013-04-19T11:31:23.343
> 
> 标签：java, android, sqlite

我有 2 列，左右各有 10 个按钮。现在，我使用资产文件夹中导入的数据库中的术语将文本设置为每个按钮，然后将它们随机播放。并且用户需要连接正确的术语（例如名字和姓氏）。无论如何，这很好用。这是我的问题：如何在游戏结束时提供正确答案...如何将文本排列到按钮上，使按钮 A1 和 B1 成为一对，A2 和 B2 成为第二对，依此类推？我希望你能理解我……游戏结束了，用户得到了一些正确的答案，有些没有，现在我需要向他展示所有正确的答案。我的数据库中有这样的列：_ID，QUESTION，A1，B1，A2，B2，A3，B3.....A10，B10。这是我为按钮设置问题和术语的代码（我删除了一些代码并放置了点）：

```
public void nextQuestion() {

        TestAdapter mDbHelper = new TestAdapter(this);
        DataBaseHelper myDbHelper = new DataBaseHelper(this);

        if(!myDbHelper.checkDataBase()){
        mDbHelper.createDatabase();
        }

        try{ 

            mDbHelper.open();

            Cursor c = mDbHelper.getSpojnice(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            ArrayList<MyStruct> labelsA = new ArrayList<MyStruct>();
            ArrayList<MyStruct> labelsB = new ArrayList<MyStruct>();

            labelsA.add(new MyStruct(c.getString(2), "1"));
            labelsB.add(new MyStruct(c.getString(3), "1"));
            labelsA.add(new MyStruct(c.getString(4), "2"));
            labelsB.add(new MyStruct(c.getString(5), "2"));
            labelsA.add(new MyStruct(c.getString(6), "3"));
            labelsB.add(new MyStruct(c.getString(7), "3"));
          .
          .
          .
          .

            Collections.shuffle(labelsA);
            Collections.shuffle(labelsB);

            pitanje.setText(c.getString(1));

            a1.setText(labelsA.get(0).label);
            a1.setTag(labelsA.get(0).tag);
            a1.setOnClickListener(clickListener);
            b1.setText(labelsB.get(0).label);
            b1.setTag(labelsB.get(0).tag);
            b1.setOnClickListener(clickListener);
            a2.setText(labelsA.get(1).label);
            a2.setTag(labelsA.get(1).tag);
            a2.setOnClickListener(clickListener);
            b2.setText(labelsB.get(1).label);
            b2.setTag(labelsB.get(1).tag);
            b2.setOnClickListener(clickListener);
            a3.setText(labelsA.get(2).label);
            a3.setTag(labelsA.get(2).tag);
            a3.setOnClickListener(clickListener);
            b3.setText(labelsB.get(2).label);
            b3.setTag(labelsB.get(2).tag);
            b3.setOnClickListener(clickListener);
          .
          .
          .
          .
          .
            }
        }

        finally{
            mDbHelper.close();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:02:36.987

来回答我自己。我已经创建了 String 变量，同时我从我的 sqlite 数据库中获取数据，我在我的代码中使用它并将它存储在我的 String 变量中。游戏结束后，我只需使用变量中的数据将其呈现为正确的结果。以防万一其他人需要这样的东西。

```
String str1, str2, str3, str4, str5, str6, str7, str8, str9, str10, str11, str12, str13, str14, str15, str16;

str1 = c.getString(2);
            str9 = c.getString(3);
            str2 = c.getString(4);
            str10 = c.getString(5);
            str3 = c.getString(6);
            str11 = c.getString(7);
            str4 = c.getString(8);
            str12 = c.getString(9);
            str5 = c.getString(10);
            str13 = c.getString(11);
            str6 = c.getString(12);
            str14 = c.getString(13);
            str7 = c.getString(14);
            str15 = c.getString(15);
            str8 = c.getString(16);
            str16 = c.getString(17); 
```

# ios - AVPlayer 在多次寻找视频时提供错误的当前时间和持续时间 iOS？

> ID：16103641
> 
> 赞同：2
> 
> 时间：2013-04-19T11:31:44.040
> 
> 标签：ios, objective-c, avplayer

我使用 AVPlayer 来实现自定义播放器。

一些视频 playerItem 提供了当前时间和错误的持续时间。搜索时间后使用幻灯片多次搜索时间。调用API
寻零时，有些视频无法精确寻到。

```
 [self.player seekToTime:CMTimeMakeWithSeconds(time, NSEC_PER_SEC)
      toleranceBefore:CMTimeMake(1, 1)
      toleranceAfter:CMTimeMake(1, 1)
      completionHandler:^(BOOL finished) {
         if (finished) {
             IVCLogV(@"seek finish!");
         }
         else
         {
             IVCLogV(@"seek interrupted");
         }
         if (completionHandle) {
             completionHandle(finished);
         }
     }]; 
```

我根据 mediaTime.timeScale 更改代码。现在我发现视频流在几次播放后**改变了视频持续时间和当前时间。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:44:16.930

确保正在播放的媒体的时间刻度与您的时间刻度相匹配。我可以看到您使用 NSEC_PER_SEC 作为时间刻度。您可能必须将您的 CMTime 输入缩放到 seelTo 方法。

```
CMTime timeAccordingToMediaTimescale = CMTimeConvertScale(time, mediaTime.timescale, CMTimeRoundingMethod); 
```

# sql-server - 这张桌子怎么了？也许是一个开放的交易锁？

> ID：16103648
> 
> 赞同：0
> 
> 时间：2013-04-19T11:32:09.423
> 
> 标签：sql-server

当我尝试运行 drop table 命令时，MSSQL 只是挂起，并且永远说“执行命令”我认为这与锁有关吗？

如何检查此类查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:41:55.797

MSSQL 有 sp`sp_lock`来查找锁表。尝试一下。

参考：[http ://www.sqlhub.com/2009/07/find-table-being-locked-in-sql-server.html](http://www.sqlhub.com/2009/07/find-table-being-locked-in-sql-server.html)

# asp.net-mvc - 具有剃刀语法的 html 助手重载

> ID：16103649
> 
> 赞同：0
> 
> 时间：2013-04-19T11:32:10.983
> 
> 标签：asp.net-mvc, razor, html-helper

```
 @Html.TextBox("displayName", ViewData["cusDispName"], new { @class = "k-textbox", id = "CusMainDispName", disabled = "disabled" }) 
```

我需要帮助来理解上面带有剃刀语法的代码行。

尤其是这行代码的一部分。

`new { @class = "k-textbox", id = "CusMainDispName", disabled = "disabled" })`

这与CSS有关，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:39:56.790

如果你给`@Html.TextBox("displayName", ViewData["cusDispName"], new { @class = "k-textbox", id = "CusMainDispName", disabled = "disabled" })`，当在你的页面上创建 texbox 元素时，它将具有以下 HTML 属性：

```
class = "k-textbox"
id = "CusMainDispName"
disabled = "disabled"
value = (Whatever you have passed in ViewData["cusDispName"])
name = "displayName" 
```

如果你只给`@Html.TextBox("displayName", ViewData["cusDispName"])`：

```
id = "displayName"
name = "displayName"
value = (Whatever you have passed in ViewData["cusDispName"]) 
```

第三个参数是一个包含键值对的字典。键将是您要设置的 html 属性，值将是属性的值。

# android - 在居中和缩放的 ImageView 中触摸坐标

> ID：16103652
> 
> 赞同：1
> 
> 时间：2013-04-19T11:32:24.270
> 
> 标签：android, touch, imageview

我有一个经典`ImageView`，它被调整大小以适应其父级`match_parent`在两个轴上并且`scaleType`是`fitCenter`.

![截屏](https://i.stack.imgur.com/eLCAO.png)

然而，我从事件中得到的坐标`onTouch`是相对于`ImageView`. 如何将它们转换为相对于图像本身的边界？

**更新**

我最终手动执行此操作。这是在 Scala 中，但可能很容易翻译成 Java：

```
// Long press on the screen adds a new interaction at that position
screenView onTouch {
  (v: View, ev: MotionEvent) => {
    // Create the image transformation matrix
    val m = screenView.getImageMatrix
    val d = screenView.getDrawable
    val drawableRect = new RectF(0, 0, d.getIntrinsicWidth, d.getIntrinsicHeight)
    val viewRect = new RectF(0, 0, screenView.getWidth, screenView.getHeight)
    m.setRectToRect(drawableRect, viewRect, Matrix.ScaleToFit.CENTER)
    m.invert(m)

    // Convert the points inside the image
    val points = Array(ev.getX, ev.getY)
    m mapPoints points

    // Compute normalized coordinates
    current_x = points(0) / d.getIntrinsicWidth
    current_y = points(1) / d.getIntrinsicHeight

    // Only continue if we touched inside the image
    !(current_x >= 0 && current_x <= 1 &&
      current_y >= 0 && current_y <= 1)
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:36:13.003

你可以用数学方法计算它。

计算图像的高度和宽度之间的比率，然后计算显示的图像的实际宽度。

从图像视图的宽度中减去图像的实际宽度，然后除以 2。

这将为您提供图像左侧灰色区域的宽度。只需从你得到的 X 坐标中减去这个数字，你就会从实际图像中得到相对 X 位置。

# c# - C# 本地 SQL 行返回 if 语句

> ID：16103653
> 
> 赞同：3
> 
> 时间：2013-04-19T11:32:32.777
> 
> 标签：c#, .net, sql-server, sql-server-ce, sqlcommand

我正在尝试让我的登录系统正常工作。目前，我认为除了 if 语句条件（如果返回行，则 if 语句为真，否则登录不成功）之外，我已经准备好让它工作的一切。我不确定如何读取返回的行数，我确实尝试使用 ExecuteReader 方法但无法让它工作。感谢任何帮助，谢谢。

代码：

```
private void btn_login_Click(object sender, EventArgs e)
{
    SqlCeConnection connection = new SqlCeConnection(@"Data Source=C:\\temp\\Project\\WindowsFormsApplication2\\Database.sdf");

    connection.Open();

    SqlCeCommand command = new SqlCeCommand("SELECT * FROM Technician WHERE Name = '" + txt_username.Text + "' AND Password = '" + txt_password.Text + "' ");
    SqlCeDataAdapter dataAdapter = new SqlCeDataAdapter(command);

    if ()
    {
        MessageBox.Show("Login Successful");
        System.Threading.Thread t = new System.Threading.Thread(new System.Threading.ThreadStart(MainMenuForm));
        t.Start();
        this.Close();
    }
    else
    {
        MessageBox.Show("Login Unsuccessful");
        return;
    }

    connection.Close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:38:32.290

I have changed your code to use a simpler ExecuteScalar that returns the first column of the first row obtained by your query

Of course, it is of extreme importance that you don't write your sql commands concatenating strings because this could fail in spectacular ways. (What if your textboxes contains a single quote and what if your user writes [malicious text like this](https://stackoverflow.com/questions/332365/how-does-the-sql-injection-from-the-bobby-tables-xkcd-comic-work)

```
using(SqlCeConnection connection = new SqlCeConnection(.....)) 
{
     connection.Open();
     string sqlText = "SELECT Count(*) FROM Technician WHERE Name = @name AND Password=@pwd"
     SqlCeCommand command = new SqlCeCommand(sqlText, connection);
     command.Parameters.AddWithValue("@name", txt_username.Text);
     command.Parameters.AddWithValue("@pwd", txt_password.Text);
     int result = (int)command.ExecuteScalar();
     if (result > 0)
     {
          MessageBox.Show("Login Successful");
          System.Threading.Thread t = new System.Threading.Thread(new System.Threading.ThreadStart(MainMenuForm));
          t.Start();
          this.Close();
     }
     else
     {
           MessageBox.Show("Login Unsuccessful");
           return;
     }
 } 
```

Notice also the using statement, in your previous code you exit from the procedure if no login is found but you forget to close the connection. This could become a big problem during lifetime of your application. The Using statement prevents this

Now I should start talking about the weakness of storing and trasmitting passwords in clear text, but that is another matter

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:36:19.683

该方法 `ExecuteNonQuery`将返回受影响的行数。

```
int rowsAffected = command.ExecuteNonQuery();
bool userExists = rowsAffected > 0;
if (userExists) // The user exists
{

} 
```

注意：但是您的应用程序容易受到 SQL 注入的攻击。即我可以进入`;DROP TABLE Technician`文本`txt_password`框。

您应该改用参数化查询或其他更安全的身份验证方法（例如 ASP.NET 成员资格）。

要使用参数化查询，您可以将其更改`CommandText`为：

```
 SqlCeCommand command = new SqlCeCommand("SELECT * FROM Technician WHERE Name=@username AND password=@password"; 
```

然后在via中添加参数：

```
 command.Parameters.AddWithValue("@username", txt_username.Text);  
    command.Parameters.AddWithValue("@password", txt_password.Text); 
```

[http://johnhforrest.com/2010/10/parameterized-sql-queries-in-c/](http://johnhforrest.com/2010/10/parameterized-sql-queries-in-c/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T11:37:34.893

```
 a=1;
    b=1;

 if a=b
    {
    a=c;
    } 
 else
    {
    a=b;
    }

else if
{
MessageBox.Show("Login Unsuccessful");
return i; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T14:42:17.167

私人无效btn_login_Click（对象发送者，EventArgs e）{

```
SqlConnection connection = new SqlConnection(@"Data Source=C:\\temp\\Project\\WindowsFormsApplication2\\Database.sdf");

connection.Open();

SqlCommand command = new SqlCommand("SELECT * FROM Technician WHERE Name = '" + txt_username.Text + "' AND Password = '" + txt_password.Text + "' ");
int row=command.ExecuteNonQuery();

if (row>0)
{
    MessageBox.Show("Login Successful");
    System.Threading.Thread t = new System.Threading.Thread(new System.Threading.ThreadStart(MainMenuForm));
    t.Start();
    this.Close();
}
else
{
    MessageBox.Show("Login Unsuccessful");
    return;
}

connection.Close(); 
```

}

# c# - 关闭 WebBrowser 表单在标准浏览器中打开 URL

> ID：16103656
> 
> 赞同：2
> 
> 时间：2013-04-19T11:32:51.190
> 
> 标签：c#, webbrowser-control

`this.Close();`在我在 C# 中使用的一些操作之后，应该使用 WebBrowser 元素关闭表单。但是在关闭它后，我的标准安装浏览器（Chrome）会打开 WebBrowser 元素的最后一个 URL。我怎样才能避免这种情况？我正在使用的代码

```
public Vk_connect()
    {
        string url = "https://oauth.vk.com/authorize?client_id=" + appID + "&scope=friends,photos,audio,video,docs,notes,wall,messages&redirect_uri=https://oauth.vk.com/blank.html&display=popup&response_type=token";
        this.Text = "Connect to VK";
        InitializeComponent();
        this.vkconnect.Navigate(url);
        vkconnect.Navigated += vkconnect_Navigated;
    }

    void vkconnect_Navigated(object sender, WebBrowserNavigatedEventArgs e)
    {
        token = vkconnect.Url.ToString();
        if (token.Contains("#access_token"))
        {
            token = token.Split('#')[1];
            id = token.Split('=')[3];
            token = token.Split('&')[0];
            token = token.Split('=')[1];
            config.token = token;
            config.userid = id;
            vkconnect.Stop();
            this.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-03T12:56:52.627

我正在检查浏览器是否通过查看`webBrowser1.StatusText`.

```
private void webBrowser1_Navigated(object sender, WebBrowserNavigatedEventArgs e)
{
    if (webBrowser1.StatusText.Equals("Done"))
    {
        this.Close();
    }
} 
```

# paypal - IPN 呼叫连接超时，尤其是对于 sandbox.paypal.com

> ID：16103659
> 
> 赞同：2
> 
> 时间：2013-04-19T11:32:55.977
> 
> 标签：paypal, paypal-sandbox, paypal-ipn

以下是示例代码：

```
$req = "122";
$header = "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Host: www.sandbox.paypal.com\r\n";
$header .= "Connection: close\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);
if(!$errno)
{
var_dump($fp);
}
else
{
    echo "ERROR: $errno, $errstr";
} 
```

当我连接到沙盒时，它会产生一个连接超时错误：错误：110，连接超时

所以我调试了这个问题，发现它与SSL有关，并验证了服务器中openssl的存在和可访问性。

使用以下内容测试了服务器上的 openssl 和连接性

```
"openssl s_client -connect www.sandbox.paypal.com:443" 
```

我明白了

```
"Socket: Connection Timed out" 
```

我检查了 iptables 并且端口 443 没有阻塞

所以我再次尝试检查 paypal.com 的案例，如下所示：

$fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);

它立即起作用。

所以我在我的另一台服务器上进行了尝试，我能够连接到 sandbox.paypal.com，但无法连接到我需要演示和测试付款的服务器上。

我的托管服务提供商一无所知，我在这里拉头发。

我很感激这方面的任何帮助。

是的，当然我在 Stackoverflow 上的第一个问题 :)

# hibernate - 数据库 ID 递增超过 1

> ID：16103662
> 
> 赞同：0
> 
> 时间：2013-04-19T11:33:04.487
> 
> 标签：hibernate, grails

为了将我的 grails 数据库保存到文件而不是内存中，我刚刚将 grails 应用程序中的数据源更改为：

```
development {
    dataSource {
        dbCreate = "update" // one of 'create', 'create-drop', 'update', 'validate', ''
        url = "jdbc:h2:devDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
    }
} 
```

如在线教程所示。

但是，当我创建一个`User`对象并将其保存到数据库时，它可能会`id`说，`1`. 如果我做一些其他的操作，那么创建另一个`User`对象会被赋予`ID`诸如`14`，但从不`2`。

我知道这可能与 Hibernate 为对象创建 ID 而与域类无关？

有没有办法让 id 对域来说是唯一的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:46:55.173

正如 Elias 所说，如果您使用数据库序列，您可能无法保证它们绝对是连续的。`NOCACHE`在某些数据库（如 Oracle）中，您可以通过对序列进行设置或其他设置来稍微控制它。这仍然不能保证没有间隙，如果你有很多插入，它会影响性能。

您还可以为您关心此行为的域类设置不同的顺序。

```
class User {
    static mapping = {
        id generator: 'sequence', params:[sequence:'seq_user']
    }
} 
```

# c# - 在方法中应用开/关原则

> ID：16103665
> 
> 赞同：2
> 
> 时间：2013-04-19T11:33:12.397
> 
> 标签：c#, design-patterns, solid-principles

嗨，我的任务是重构一部分代码，以使其符合开放/封闭原则。我设法在两种方法中应用了策略模式，但在一种方法中，我不知道应该如何进行。

```
public ProductPriceCalculator(Product product)
{
    this.product = product;
    buyerStrategy = new BuyerStrategy();
    discountStrategy = new DiscountStrategy();
}

public Price CalculatePrice()
{
    price = new Price();

    decimal productPrice = product.BasePrice + 
                           (product.BasePrice * product.Addition);
    decimal TVA = CalculateTVA();
    price.ProductPrice = productPrice*TVA;
    decimal discount = CalculateDiscount(price.ProductPrice);
    price.Discount = price.ProductPrice * discount;
    price.ProductPriceWithDiscount = price.ProductPrice - price.Discount;
    price.TransportPrice = product.Transport.GetTransportPrice();
    price.TotalPrice = price.ProductPriceWithDiscount + price.TransportPrice;

    return price;
} 
```

在这种情况下，此方法通过使用类中的方法初始化对象。就目前而言，此方法不会关闭以进行修改，因为如果在某些时候我必须向 Price 添加另一个属性，我将不得不回到这里来初始化它。

如何正确构建此代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:55:28.530

一种可能的解决方案如下：

```
 public class ProductPriceCalculator
 {
    private readonly Product _product;
    private readonly BuyerStrategy _buyerStrategy;
    private readonly DiscountStrategy _discountStrategy;
    private readonly Price _price;

    public ProductPriceCalculator(Product product,BuyerStrategy buyerStrategy,DiscountStrategy discountStrategy,Price price)
    {
        _product = product;
        _buyerStrategy = buyerStrategy;
        _discountStrategy = discountStrategy;
        _price = price;
    }

    public Price CalculatePrice()
    {
        decimal productPrice = _product.BasePrice + (_product.BasePrice * _product.Addition);
        decimal TVA = CalculateTVA();
        decimal discount = CalculateDiscount(productPrice * TVA);
        decimal transportPrice = _product.Transport.GetTransportPrice();

        return _price.CalculatePrice(productPrice*TVA,discount,transportPrice);
    }

    ...

 }

public class Price
{
    ...

    public virtual Price CalculatePrice(decimal productPrice, decimal discount, decimal transportPrice)
    {
        Price price = new Price();

        price.ProductPrice = productPrice;
        price.Discount = ProductPrice * discount;
        price.ProductPriceWithDiscount = ProductPrice - Discount;
        price.TransportPrice = transportPrice;
        price.TotalPrice = ProductPriceWithDiscount + TransportPrice;

        return price;
    }

    ...

} 
```

最好将依赖项（例如`buyerStrategy`, `discountStrategy`, `price`）放在构造函数中，而不是通过 IoC 容器或其他东西填充它们，而不是在构造函数本身中创建它们。引入`_price`字段后，您可以将填充价格的属性委托给`Price`类本身。方法`Price.CalculatePrice`可以称为`Price`类的 Fabric 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:38:17.677

如果不了解更多关于周围代码的信息，很难说 - 但我想也许[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)可以解决这个问题？！所以在你的例子中，也许是这样的：

```
public abstract class BaseProduct
{
    public decimal BasePrice { get; set; }
    public decimal Addition { get; set; }
    public Transport Transport { get; set; }

    public abstract void CalculatePrice(decimal discount);
}

public class Product : BaseProduct
{
    public BasePrice Price { get; set; }

    public Product(BasePrice price)
    {
        this.Price = price;
    }

    public override void CalculatePrice(decimal discount)
    {
        this.Price.CalculatePrice(this.BasePrice, this.Addition, discount);
    }
}

public abstract class BasePrice
{
    public abstract void CalculatePrice(decimal basePrice, decimal additional, decimal discount);
}

public class Price : BasePrice
{
    public decimal ProductPrice { get; set; }
    public decimal Discount { get; set; }
    public decimal ProductPriceWithDiscount { get; set; }
    public decimal TransportPrice { get; set; }
    public decimal TotalPrice { get; set; }

    public override void CalculatePrice(decimal basePrice, decimal additional, decimal discount)
    {
        this.ProductPrice = basePrice + (basePrice * additional);
        this.Discount = this.ProductPrice * discount;
        this.ProductPriceWithDiscount = this.ProductPrice - this.Discount;
        this.TotalPrice = this.ProductPriceWithDiscount + this.TransportPrice;
    }
} 
```

使用此方法，您可以在添加新属性时创建 BasePrice 的新具体实现，并且仍然支持封闭原则，因为您不需要更改原始类中的计算逻辑，只需在更改时添加新的具体实现即可。澄清一下——*产品*是组件，*价格*是装饰器。

希望我做对了——欢迎任何反馈！同样，希望它有所帮助！:)

# php - PHP 正则表达式拆分文本以插入 HTML

> ID：16103668
> 
> 赞同：1
> 
> 时间：2013-04-19T11:33:17.573
> 
> 标签：php, regex

非常（！）正则表达式的新手，但是......

我从 $title 变量中输出了以下文本字符串：

```
A. This is a title
B. This is another title 
```

ETC...

我追求以下内容：

```
<span>A.</span> This is a title
<span>B.</span> This is another title 
```

ETC...

目前我有以下代码：

```
$title = $element['#title'];
if (preg_match("([A-Z][\.])", $title)) {
  return '<li' . drupal_attributes($element['#attributes']) . ">Blarg</li>\n";
} else {
  return '<li' . drupal_attributes($element['#attributes']) . '>' . $output . $sub_menu . "</li>\n";
} 
```

这用 Blarg 替换了 A. 到 Z. 的任何内容，但是我不确定如何进行？

在 Text Wrangler 应用程序中，我可以将正则表达式括在括号中并输出每个参数，如下所示：

```
argument 1 = \1
argument 2 = \2 
```

ETC...

我知道我需要添加一个额外的正则表达式来获取文本字符串的其余部分。

也许正则表达式大师可以帮助和新手！

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:41:23.637

尝试

```
$title = 'A. This is a title';
$title = preg_replace('/^[A-Z]\./', '<span>$0</span>', $title);
echo $title;
// <span>A.</span> This is a title 
```

`m`如果字符串包含换行符和其他标题，请在结束分隔符后添加修饰符。

如果正则表达式不匹配，则不会进行替换，因此不需要该`if`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:43:23.190

它是否总是只有 2 个字符（“A.”、“B.”、“C.”、...），因为这样你就可以使用子字符串而不是正则表达式。只需选择链接的前 2 个字符并将跨度包裹在子字符串周围

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:43:32.947

试试这个（未经测试）：

```
$title = $element['#title'];

if (preg_match("/([A-Z]\.)(.*)/", $title, $matches)) {
  return '<li' . drupal_attributes($element['#attributes']) . "><span>{$matches[0]</span>{$matches[1]}</li>\n";
} else {
  return '<li' . drupal_attributes($element['#attributes']) . '>' . $output . $sub_menu . "</li>\n";
} 
```

此处的更改是首先添加`/`到字符串的开头和结尾（表示它是一个正则表达式），然后删除句点周围的`[`和，因为它本身只是一个文字字符，然后添加另一个与其余部分匹配的分组的字符串。我还添加了一个to以将这两个匹配项放入 to 中以供以后使用，我们在下辈子会这样做。`]``.``$matches``preg_match()`

**注意：**您也可以这样做：

```
$title = preg_replace('/^([A-Z]\.)/', "<span>$1</span>", $title); 
```

这将简单地将 AZ 后跟字符串开头的句点（用`^`字符表示）替换为`<span>`、该字符（用括号括起来）和`</span>`。

同样，这没有经过测试，但应该给你一个先机:)

# c - 如何限制C中的执行时间

> ID：16103674
> 
> 赞同：3
> 
> 时间：2013-04-19T11:33:34.810
> 
> 标签：c, time, limit, execution

我不是 C 语言专家，这就是我问这个（可能）简单问题的原因。我有一个用 C 编写的脚本，我想通过输入来限制执行时间。

像：./script.c input1 input2 input3 input4

Input4 必须是以秒为单位的时间限制。

在 php 中，它会是这样的：

```
$_GET['time'] = $time; 
```

`max_execution_time($time);`或者`set_time_limit($time)` 然后我会像这样运行它：[http ://domain.com/script.php?time=60](http://domain.com/script.php?time=60)

我认为这`init_rand(time(NULL));`应该适用于时间限制，但我怎样才能从“GET”（input4）中获取变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:51:26.210

可能您可以将该程序作为另一个程序的子程序运行。

```
if ((pid = fork()) < 0) {
    exit(1);
} else if (pid == 0) {
    execvp("this prog", argv);
} else  {
    sleep(atoi(argv[4]);
    kill(pid, SIGTERM);
} 
```

或者您可以使用 bash 脚本来完成这项工作。

```
./thisprog $1 $2 $3 &
sleep $4 
kill $! 2>/dev/null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:51:37.633

好吧，如果您在 Linux 中使用`GCC`如下方式进行编译，

```
gcc ./a.out input1 input2 input3 input 4 
```

您可以使用该功能`setrlimit()`设置限制。

下面的代码直接`ulimit`从C程序调用命令，

```
system(ulimit -t TIME_LIMIT); 
```

如果您想设置用户定义的限制，那么以下代码可能会对您有所帮助，

```
int i;
char com[100];

i=atoi(argv[4]);

sprintf(com,"ulimit -t %d",i);
system(com); 
```

# android - 带有字符串+图片的下拉菜单

> ID：16103675
> 
> 赞同：0
> 
> 时间：2013-04-19T11:33:35.007
> 
> 标签：android, drop-down-menu

I am using a dropdown menu and i put inside it only a strings but i want when i click on the action bar on the drop down menu widget that when the list of choices drops i will see not only strings but pictures for each choice , i试图查找它，但我没有找到与如何做相关的东西。我正在谈论的示例是这个 [http://2.bp.blogspot.com/-mVQddiSMz0I/TzL2y2Ny5uI/AAAAAAAABKo/ikNPtWiPu4w/s1600/Screenshot_2012-02-08-14-01-21.png](http://2.bp.blogspot.com/-mVQddiSMz0I/TzL2y2Ny5uI/AAAAAAAABKo/ikNPtWiPu4w/s1600/Screenshot_2012-02-08-14-01-21.png)你能给我吗请举个例子和解释？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:40:32.657

Use ActionBar, see this documentation:

[Adding an Action Provider](http://developer.android.com/guide/topics/ui/actionbar.html#ActionProvider)

The ShareActionProvider is an extension of ActionProvider that facilitates a “share" action by showing a list of available share targets from the action bar.

![enter image description here](https://i.stack.imgur.com/g3stv.png)

With ActionProvider you can add menu and you can create custom your menu item. Here have how to create menu item xml documentation:

[Menu Resource](http://developer.android.com/guide/topics/resources/menu-resource.html)

And see example: [menu with photo](http://android-er.blogspot.com/2012/08/share-with-photo-using.html)

And here have how to add icon stream to inten for ShareIntent see: [ShareActionProvider with one icon - looking as simple actionitem](https://stackoverflow.com/questions/14745740/shareactionprovider-with-one-icon-looking-as-simple-actionitem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:50:57.143

如果您不需要使用 a `ShareActionProvider`，而只需使用`Spinner`带有图片和文本的 a ，您可以将子菜单添加到您的操作栏，如下所示： [https ://stackoverflow.com/a/8312985/626787](https://stackoverflow.com/a/8312985/626787)

或者，您可以将 a 添加`Spinner`为动作并用`CustomAdapter`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:25:14.513

正如@mbarrben 所说，您不需要`ShareActionProvider`. 您只需要一个 Spinner 并实现一个 CustomAdapter。下面你可以看到一个简单的例子（[完整的例子在这里](http://github.com/androidzin/android-examples)

在您的活动中，您应该拥有：

```
public class SpinnerIconActivity extends SherlockActivity implements OnNavigationListener{

private SpinnerAdapter mSpinnerAdapter;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_spinner_icon);

    ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

    List<SpinnerRow> options = new ArrayList<SpinnerRow>();
    options.add(new SpinnerRow("Droid 1", R.drawable.android01));
    options.add(new SpinnerRow("Droid 2", R.drawable.android02));
    options.add(new SpinnerRow("Droid 3", R.drawable.android03));
    mSpinnerAdapter  = new MySpinnerAdapter(getApplicationContext(),
            R.layout.spinner_row, R.id.text, options);

        actionBar.setListNavigationCallbacks(mSpinnerAdapter, this);
   }

   @Override
   public boolean onCreateOptionsMenu(Menu menu) {
        getSupportMenuInflater().inflate(R.menu.main, menu);
        return super.onCreateOptionsMenu(menu);
   }

   @Override
   public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    return false;
   }

} 
```

**最重要的是编写您的自定义适配器。**我选择使用 ArrayAdapter 因为使用它**我只需要覆盖一种方法**。

编写 customAdapter 的方法与创建可定制的 ListView 相同，但有一个基本区别，**而不是重写 getView 方法，您必须重写 getDropDownView**。

所以，下面是我的例子：

```
public class MySpinnerAdapter extends ArrayAdapter<SpinnerRow> {

private List<SpinnerRow> rows;
private int resource;

public MySpinnerAdapter(Context context, int resource,
        int textViewResourceId, List<SpinnerRow> objects) {
    super(context, resource, textViewResourceId, objects);
    rows = objects;
    this.resource = resource;
}

static class ViewHolder {

    TextView text;
    ImageView icon;
}

@Override
public View getDropDownView(int position, View convertView, ViewGroup parent) {
    ViewHolder  holder = new ViewHolder();
    if (convertView == null) {
        convertView = LayoutInflater.from(getContext()).inflate(resource,
                parent, false);

        holder.text = (TextView) convertView.findViewById(R.id.text);
        holder.icon = (ImageView) convertView.findViewById(R.id.icon);

        convertView.setTag(holder);

    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    SpinnerRow currentRow = rows.get(position);
    holder.text.setText(currentRow.toString());
    holder.icon.setImageDrawable(
            getContext().getResources().getDrawable(currentRow.getIconResourceId()));

    return convertView;
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T11:45:17.683

您的屏幕截图是 a`ListPopupWindow`使用的 a `ShareActionProvider`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T13:43:44.413

[请参阅 google => http://developer.android.com/guide/topics/ui/actionbar.html#ActionProvider](http://developer.android.com/guide/topics/ui/actionbar.html#ActionProvider)提供的链接

# jquery - 平滑滚动带有 id 的外部链接

> ID：16103678
> 
> 赞同：1
> 
> 时间：2013-04-19T11:33:48.593
> 
> 标签：jquery, smooth-scrolling, external-links

我发现了这个小提琴[http://jsfiddle.net/tovic/kw7LD/](http://jsfiddle.net/tovic/kw7LD/)，它展示了如何将平滑滚动应用于带有**class**的外部链接。我想知道是否可以使用**id**而不是**classes**应用相同的效果。

```
$(window).bind("load", function () {
var urlHash = window.location.href.split("#")[1];
$('html,body').animate({
    scrollTop: $('.' + urlHash).offset().top
}, 4000); 
```

});

PS我也发现了这个问题[单击锚链接时平滑滚动，](https://stackoverflow.com/questions/7717527/jquery-smooth-scrolling-when-clicking-an-anchor-link)但答案对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:37:41.527

尝试这个：

```
$(document).on("ready", function () {
    var urlHash = window.location.href.split("#")[1];
    $('html,body').animate({
        scrollTop: $('.' + urlHash).offset().top
    }, 4000);
}); 
```

# android - 在键盘上输入时获取事件android

> ID：16103679
> 
> 赞同：0
> 
> 时间：2013-04-19T11:33:50.293
> 
> 标签：android, keyboard-events

我正在为安卓开发一个聊天应用程序。我正在尝试实现打字功能，以便聊天伙伴知道其他网站是否正在打字。

为此，我需要在智能手机用户在软键盘上打字时得到通知。是否有一些键盘触摸事件的侦听器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:37:47.407

```
editText.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub              
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub      
            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
                status = "Typing"; // where status is a string you send to the other person      
            }
        }); 
```

# .net - 一键实现必填字段验证器

> ID：16103680
> 
> 赞同：1
> 
> 时间：2013-04-19T11:33:52.760
> 
> 标签：.net, c#-4.0

**如何仅通过一个按钮实现必填字段验证。？**

我在一个页面中应用它并且它可以工作，但是在我的页面中有 2 个按钮，并且两者都检查了这个验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:13:03.897

您可以使用`<asp:RequiredFieldValidator ControlToValidate=""/>`仅验证一个按钮。希望能帮助到你

# ruby - 使用 Ruby 程序。输入：句子 修改：单词 输出：修改后的句子

> ID：16103683
> 
> 赞同：3
> 
> 时间：2013-04-19T11:34:06.063
> 
> 标签：ruby, string

我是红宝石的新手。这是一个使用任何语言的编程面试问题。我正在尝试用 Ruby 来实现。

编写一个程序来输入给定的句子。用单词的 firstletter/#ofcharactersbetween1st&lastletter/lastletter 替换每个单词。不应更改所有非字母（数字、标点符号等）。

示例输入：2 只公鸡有 12 只鸡。

所需输出：T3e a1e 12 c6s f1r 2 r6s。

我有这个概念，但需要更好的方法以及如何将这些部分组合在一起的帮助：

```
 s="There are 12 chickens for 2 roosters." 
.. 
=> "There are 12 chickens for 2 roosters."
   a = s.split(" ")
=> ["There", "are", "12", "chickens", "for", "2", "roosters."]
   puts a.length
7
=> nil
   puts a[0].length
5
=> nil
   puts a[0].length-2
3
=> nil
   puts a[0][0]
84
=> nil
   puts a[0][0].chr
T
=> nil
   puts a[0].length-2
3
=> nil
   puts a[0][-1].chr
e
=> nil 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:49:01.277

尝试这个：

```
s = "There are 12 chickens for 2 roosters."
s.gsub(/([A-Za-z]+)/) { $1[0] + ($1.size - 2).to_s + $1[-1] } 
```

它使用[`gsub`](http://ruby-doc.org/core-2.0/String.html#method-i-gsub)which 替换匹配正则表达式模式的字符串的所有部分。

在这种情况下，模式是`/([A-Za-z]+)/`对 AZ 和 az 范围内的一个或多个字符的出现进行分组。

`{ $1[0] + ($1.size - 2).to_s + $1[-1] }`是每次出现时执行的块。`$1`是模式中匹配的第一组。`$1[0]`该块用它的第一个字符、它的长度-2 到字符串`($1.size - 2).to_s`和它的最后一个字符来替换出现`$1[-1]`。

# ios - Restkit GET 调用没有被异步发送？

> ID：16103684
> 
> 赞同：3
> 
> 时间：2013-04-19T11:34:07.603
> 
> 标签：ios, asynchronous, restkit, grand-central-dispatch, rkobjectmapping

我`Restkit`在我的 iOS 应用程序中使用来`GET`调用我的服务器。我能够让调用正常工作，除了它应该是异步的并且它阻塞了我的主线程。我基本上是使用他们的确切样本从他们的 github 页面发出请求，如下所示：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://mywebapi.com/Article"]];
RKObjectRequestOperation *operation = [[RKObjectRequestOperation alloc] initWithRequest:request responseDescriptors:@[responseDescriptor]];
[operation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *result) {
    Article *article = [result firstObject];
    NSLog(@"Mapped the article: %@", article);
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    NSLog(@"Failed with error: %@", [error localizedDescription]);
}];
[operation start]; 
```

这会阻止所有主线程执行（例如我的转换），直到调用成功块。将此调用包装在 a`dispatch_queue`中确实可以解决问题，但我的理解是，此方法本身应该是异步的。

我是否缺少一些配置`RKObjectRequestOperation`，或者我应该为异步调用调用不同的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T17:46:18.430

我在这里找到了这个问题的答案：

[RestKit 使 UI 无响应](https://stackoverflow.com/questions/13885295/restkit-makes-ui-unresponsive)

基本上，您确实需要将其添加到 NSOperationQueue，否则它将在主线程上运行调用。

# dns - 发现机器默认 DNS

> ID：16103685
> 
> 赞同：0
> 
> 时间：2013-04-19T11:34:10.723
> 
> 标签：dns, network-programming, network-protocols

我正在编写一个小型 DNS 代理。它侦听端口上的传入 UDP 消息并使用指定的 DNS（例如 google 的 DNS 8.8.8.8）解析它们并将响应发送回客户端。

我希望能够检测机器使用的默认 DNS。每个操作系统都可以选择自动获取 DNS 服务器地址。我想知道这是怎么做到的。在 UDP 或 TCP 之上是否有协议，或者完全是其他协议？

我正在使用 C#，但语言并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:43:22.567

查找当前计算机默认使用的 DNS 很大程度上取决于您使用的操作系统和使用的语言。如果您使用 Java 或 .NET 或其他独立于平台的语言，您可能不需要担心操作系统位。

客户端计算机通常“自动发现”在来自 DHCP 服务器的 DHCP 响应中使用哪个 DNS。也就是说，当他们收到他们的 IP 地址时，他们也会获得要使用的 DNS 服务器。他们还可能获得 WINS 服务器的地址和大量自定义选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:32:21.960

您可以通过在 coand 提示符下键入 ipconfig/all 来找到 DNS 服务器。这将为您提供 DNS 服务器的地址。

# android - Android EditText OnFocusChangeListener

> ID：16103686
> 
> 赞同：2
> 
> 时间：2013-04-19T11:34:11.153
> 
> 标签：android, input, focus, android-edittext

有谁知道是否可以从 EditText 中清除 OnFocusChangeListener？

我的情况是这样的：

1.  我为 EditText 设置 OnFocusChangeListener
2.  过了一会儿我需要改变它的行为，但是第二次调用 setOnFocusChangeListener 没有影响

谁能帮我解决这个问题？

# javascript - 从每一行表单域中获取总和

> ID：16103698
> 
> 赞同：0
> 
> 时间：2013-04-19T11:35:11.973
> 
> 标签：javascript, sum

我试图计算一些行（输入字段），但它对我来说很难:(。我
的 html 代码如下所示：

```
<table>
<tr>
    <td>
    <input name="Field_Price_1" id="Field_Price_1" value="20.55" type="text">
    <input name="Field_Amount_1" id="Field_Amount_1" type="text">
    <input name="Field_SubTotal_1" id="Field_SubTotal_1" type="text">
    </td>
</tr>
<tr>
    <td>
    <input name="Field_Price_2" id="Field_Price_2" value="17.55" type="text">
    <input name="Field_Amount_2" id="Field_Amount_2" type="text">
    <input name="Field_SubTotal_2" id="Field_SubTotal_2" type="text">
    </td>
</tr>
<tr>
    <td>
    <input name="Field_Price_3" id="Field_Price_3" value="94.20" type="text">
    <input name="Field_Amount_3" id="Field_Amount_3" type="text">
    <input name="Field_SubTotal_3" id="Field_SubTotal_3" type="text">
    </td>
</tr>
<tr>
    <td>
    <input name="Field_Price_4" id="Field_Price_4" value="12.10" type="text">
    <input name="Field_Amount_4" id="Field_Amount_4" type="text">
    <input name="Field_SubTotal_4" id="Field_SubTotal_4" type="text">
    </td>
</tr>
<tr>
    <td>
    <input name="Field_Price_5" id="Field_Price_5" value="7.45" type="text">
    <input name="Field_Amount_5" id="Field_Amount_5" type="text">
    <input name="Field_SubTotal_5" id="Field_SubTotal_5" type="text">
    </td>
</tr> 
```

因此，我将通过从每个 Field_Amount_ 触发“keyup”，将所有输入字段“Field_Price_”的总和放入以下范围。

```
<table>
<tr>
    <td><span id="PrintSum">0.00</span></td>
</tr> 
```

以下我试过：

```
var total = 0;
var Price = $('input[id^=Field_Price_]').val();
   $.each($(Price), function(){
      total += $(this).val();
   });
$('#PrintSum').text(total); 
```

所以这行不通。
有谁知道是什么问题？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:40:25.983

I guess you should be parse the input value to an float.

```
var total = 0;
var Price = $('input[id^=Field_Price_]').val();
   $.each($(Price), function(){
      total += parseFloat($(this).val());
   });
$('#PrintSum').text(total); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:30:59.327

这个解决方案怎么样：

```
var $prices  = $('input[id^=Field_Price_]'),
    $amounts = $('input[id^=Field_Amount_]');

$prices.add($amounts).on('keyup', function() {
    var total = 0;
    $prices.each(function() {
        total += $(this).val() * $(this).next().val() || 0;
    });
    $('#PrintSum').text(total.toFixed(2));
})
.trigger('keyup'); 
```

[http://jsfiddle.net/UFSvF/](http://jsfiddle.net/UFSvF/)

此处更改价格和金额会触发重新计算总价格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:49:13.167

试试这样的东西，[小提琴](http://jsfiddle.net/rajesh007/r5Xqp/1/)

```
var total = 0;
var Price = $('input[id^=Field_Price_]');
   $.each($(Price), function(){
      total += parseInt($(this).val());
   });
$('#PrintSum').text(total); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T11:42:50.833

在[jsfiddle 上](http://jsfiddle.net/Xotic750/5qVvF/)，一个不使用 jquery 的示例，但您可以修改以在那里进行测试

```
var prices = document.querySelectorAll("[id^=Field_Price]"),
    ammounts = document.querySelectorAll("[id^=Field_Amount]"),
    subTotals = document.querySelectorAll("[id^=Field_SubTotal]"),
    printSum = document.getElementById("PrintSum");

function sumIt() {
    var total = 0;

    Array.prototype.forEach.call(prices, function (price, index) {
        var subTotal = (parseFloat(price.value) || 0) * (parseFloat(ammounts[index].value) || 0);

        subTotals[index].value = subTotal.toFixed(2);
        total += subTotal;

    });

    printSum.textContent = total.toFixed(2);
}

Array.prototype.forEach.call(prices, function (input) {
    input.addEventListener("keyup", sumIt, false);
});

Array.prototype.forEach.call(ammounts, function (input) {
    input.addEventListener("keyup", sumIt, false);
});

sumIt(); 
```

这是上面的 jquery 版本，在[jsfiddle](http://jsfiddle.net/Xotic750/WFJnK/)

```
var prices = $("input[id^=Field_Price_]"),
    amounts = $("input[id^=Field_Amount_]"),
    subTotals = $("input[id^=Field_SubTotal_]"),
    printSum = $("#PrintSum");

function sumIt() {
    var total = 0;

    prices.each(function(index, price) {
        var subTotal = (parseFloat(price.value) || 0) * (parseFloat(amounts.eq(index).val()) || 0);

        subTotals.eq(index).val(subTotal.toFixed(2));
        total += subTotal;
    });

    printSum.text(total.toFixed(2));
}

prices.on("keyup", sumIt);

amounts.on("keyup", sumIt);

sumIt(); 
```

~~我将很快修改我的纯 javascript 版本，向您展示如何实现进一步的提问，而不需要包含 jquery~~。

它现在已经更新，所以你可以看到它是如何工作的

还有一个[jsperf](http://jsperf.com/jq-vs-js-sum1)展示了两者的构建性能

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T12:02:36.080

使用这个 javascript

```
$(':input[id^="Field_Price_"]').keyup(function() {
    var total = 0;
    var $inputs = $(':input[id^="Field_Price_"]');
    $inputs.each(function (index)
         {
           total += parseFloat($(this).val());
         });
    alert(total);
    $('#PrintSum').text(total);  
}); 
```

[jsFiddle](http://jsfiddle.net/pradkumar_n/PLzT4/6/)

# c# - 仅记录一次或以较低频率记录重复消息

> ID：16103702
> 
> 赞同：0
> 
> 时间：2013-04-19T11:35:29.553
> 
> 标签：c#, logging, log4net

我正在使用 log4net 来满足我们的应用程序日志记录需求。该应用程序基于 .NET 3.5 构建。这个应用程序是一个数据驱动的引擎，它评估数据变化的某些计算。例如，当 x 或 y 发生变化时，将评估诸如 x/y 之类的简单计算。如果 y 为零并且 x 以每秒 1000 的速率不断变化，我们每秒记录 1000 条错误消息。

因此，我需要一种方法来仅记录一次消息或以较低的频率（例如每分钟一次）记录消息。

```
public class MessageDetails
{
   public string Message { get; set; }
   public DateTime TimeStamp { get; set; }
} 
```

我正在考虑使用 HashSet`<MessageDetails>`来存储记录的消息及其时间戳。为简单起见，我们不必担心这个 HashSet 的大小。在记录新消息之前，我可以检查之前是否记录了此消息。然后我可以决定是否记录此消息。

这是实现我想要实现的目标的好方法吗？你们有什么替代方法或改进建议吗？

# mongodb - 使用索引时 MongoDB 排序不正确

> ID：16103705
> 
> 赞同：2
> 
> 时间：2013-04-19T11:35:34.740
> 
> 标签：mongodb

这是查询：

```
db.posts.find({"project.id":5,"project.sections":6,"reading":0,"publicate":1},{"date":1}).sort({"date":-1}).limit(20) 
```

这是它的输出：

```
{ "_id" : ObjectId("51342351b6f8f38564000001"), "date" : ISODate("2013-03-05T12:38:41.731Z") }
{ "_id" : ObjectId("510ff98da80f733357000002"), "date" : ISODate("2013-02-04T19:20:25.618Z") }
{ "_id" : ObjectId("50fe4bafb6f8f3a14d000002"), "date" : ISODate("2013-01-22T08:45:16.590Z") }
{ "_id" : ObjectId("50fada8ea80f737202000039"), "date" : ISODate("2013-01-19T19:16:23.294Z") }
{ "_id" : ObjectId("50e0101fa80f73d664000002"), "date" : ISODate("2012-12-30T09:58:33.881Z") }
{ "_id" : ObjectId("50dd54d4b6f8f3923d000014"), "date" : ISODate("2012-12-30T09:52:30.993Z") }
{ "_id" : ObjectId("50ccd4a0a80f73b742000008"), "date" : ISODate("2012-12-15T20:58:18.946Z") }
{ "_id" : ObjectId("50c0e38eb6f8f32121000018"), "date" : ISODate("2012-12-06T18:35:43.098Z") }
{ "_id" : ObjectId("50314562b6f8f3f844000000"), "date" : ISODate("2012-08-22T07:06:54.822Z") }
{ "_id" : ObjectId("502012f3b6f8f3df3a000001"), "date" : ISODate("2012-08-06T19:23:10.586Z") }
{ "_id" : ObjectId("4fe6ea5ab6f8f39f59000000"), "date" : ISODate("2012-06-24T10:25:32.969Z") }
{ "_id" : ObjectId("516bbcb2a80f73a55a000000"), "date" : ISODate("2013-04-15T10:36:32.688Z") }
{ "_id" : ObjectId("516a5f62a80f733e60000000"), "date" : ISODate("2013-04-14T09:00:19.459Z") }
{ "_id" : ObjectId("515e3f2ca80f738536000003"), "date" : ISODate("2013-04-05T03:07:53.960Z") }
{ "_id" : ObjectId("5155b7c4b6f8f3ad15000001"), "date" : ISODate("2013-03-29T16:18:44.228Z") }
{ "_id" : ObjectId("514009e8a80f73f429000001"), "date" : ISODate("2013-03-29T12:31:01.898Z") }
{ "_id" : ObjectId("515566d5a80f73437d000005"), "date" : ISODate("2013-03-29T10:10:15.113Z") }
{ "_id" : ObjectId("514572cbb6f8f36525000001"), "date" : ISODate("2013-03-17T07:39:33.738Z") }
{ "_id" : ObjectId("51432a77b6f8f3024d000000"), "date" : ISODate("2013-03-15T14:07:46.648Z") }
{ "_id" : ObjectId("513d4afcb6f8f3727b000000"), "date" : ISODate("2013-03-11T17:46:21.183Z") } 
```

如您所见，顺序是错误的，好像排序以某种奇怪的方式工作。这是该查询的 explain() 输出：

```
"cursor" : "BtreeCursor project.id_1_project.sections_1_reading_1_publicate_1_date_-1",
"nscanned" : 929,
"nscannedObjects" : 915,
"n" : 8,
"millis" : 23,
"nYields" : 0,
"nChunkSkips" : 0,
"isMultiKey" : true,
"indexOnly" : false,
"indexBounds" : {
...} 
```

但是，如果我禁用索引，它会很好：

```
db.posts.find({"project.id":5,"project.sections":3,"reading":0,"publicate":1},{"date":1}).hint({$natural:1}).sort({"date":-1}).limit(20)

{ "_id" : ObjectId("51475ee4b6f8f3526f000004"), "date" : ISODate("2013-04-16T10:51:04.962Z") }
{ "_id" : ObjectId("5166e61fa80f73b658000001"), "date" : ISODate("2013-04-11T16:58:11.848Z") }
{ "_id" : ObjectId("514afc12a80f735162000000"), "date" : ISODate("2013-03-25T02:51:18.309Z") }
{ "_id" : ObjectId("513db351b6f8f3d601000006"), "date" : ISODate("2013-03-11T10:49:27.585Z") }
{ "_id" : ObjectId("5105ff74a80f739704000006"), "date" : ISODate("2013-02-19T11:19:57.448Z") }
{ "_id" : ObjectId("5121de84b6f8f3b20c000009"), "date" : ISODate("2013-02-18T07:58:40.779Z") }
{ "_id" : ObjectId("511dbc4ab6f8f3a550000006"), "date" : ISODate("2013-02-15T04:51:39.767Z") }
{ "_id" : ObjectId("51053aafa80f73ae74000002"), "date" : ISODate("2013-01-27T14:44:48.931Z") }
{ "_id" : ObjectId("50f1c7c4b6f8f3ed2e000003"), "date" : ISODate("2013-01-12T20:48:04.451Z") }
{ "_id" : ObjectId("50ec5111b6f8f3180e000034"), "date" : ISODate("2013-01-09T10:25:50.736Z") }
{ "_id" : ObjectId("50d36076b6f8f3707400000f"), "date" : ISODate("2012-12-20T19:14:40.412Z") }
{ "_id" : ObjectId("50b4f7b6b6f8f3d261000003"), "date" : ISODate("2012-11-27T17:52:24.675Z") }
{ "_id" : ObjectId("50a0b83eb6f8f30a74000001"), "date" : ISODate("2012-11-12T09:14:04.652Z") }
{ "_id" : ObjectId("5092746eb6f8f3c92d000000"), "date" : ISODate("2012-11-06T12:02:21.634Z") }
{ "_id" : ObjectId("50926d48b6f8f31d15000000"), "date" : ISODate("2012-11-01T13:11:40.107Z") }
{ "_id" : ObjectId("508a471cb6f8f33568000000"), "date" : ISODate("2012-10-26T19:41:50.516Z") }
{ "_id" : ObjectId("508998c5b6f8f3b977000000"), "date" : ISODate("2012-10-26T07:59:18.278Z") }
{ "_id" : ObjectId("5088c043b6f8f3442b000003"), "date" : ISODate("2012-10-25T05:08:12.372Z") }
{ "_id" : ObjectId("50857833b6f8f37770000001"), "date" : ISODate("2012-10-22T17:06:37.667Z") }
{ "_id" : ObjectId("507e2f0ab6f8f34c2d000000"), "date" : ISODate("2012-10-17T04:32:10.337Z") } 
```

我尝试使用 db.bla.reIndex() 为整个集合重建索引，但没有帮助。同一集合上使用相同索引的所有其他查询都可以正常工作。

MongoDB 2.0.9

这种行为背后的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T18:28:27.433

您正在按日期排序。然后限制输出。MongoDB 正在根据排序日期的查询获取文档。然后切割前 20 条记录。现在 MongoDb 有 20 条先前排序的 ObjectID 记录。MongoDB 展示了这 20 套没有顺序的东西。因为最后一个“限制”行创建了一组文档，并且 find 命令获取集合中的任何内容而无需排序。您必须像这样链接另一个排序命令：

```
db.posts.find({"project.id":5,"project.sections":6,"reading":0,"publicate":1},{"date":1}).sort({"date":-1}).limit(20).sort({"date":-1})) 
```

它可能看起来很尴尬，但它实际上是自然有序的。假设您想按自然顺序获取文档列表，但只需要前 20 个具有最近日期的文档。您的查询就是这样做的。但是如果你想要一个按日期排序的文档列表，你应该在查询结束时再使用一个排序命令来做到这一点。

# hive - 可以采取哪些措施来防止 Hive 中的数据意外删除？

> ID：16103706
> 
> 赞同：0
> 
> 时间：2013-04-19T11:35:35.573
> 
> 标签：hive

今天不小心将一个表声明为非外部表然后drop掉了，导致底层数据被删除。我可以做些什么来防止做这样的事情（除了备份，我们这样做）？

我们几乎只使用外部表，所以如果我们可以完全关闭非外部表功能，或者在声明一个等时需要一个像 FORCE 这样的标志，那就太好了。

注意：我们使用 Hive 0.8 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:32:42.203

我认为您的用例没有很好的解决方案。

一个快速而肮脏的解决方案是更改仓库目录的权限，使其无法写入。这将阻止创建内部表，但 HDFS 超级用户除外。您可以授予用户/组权限，以便如果您需要创建内部表，您可以通过切换用户。此解决方案可能会产生意想不到的后果，但只要您完全远离托管表，我就不会想到任何事情。

更困难和更高维护的解决方案是修补 Hive 源以禁止在没有 EXTERNAL 关键字的情况下创建表/使 EXTERNAL 成为默认值/需要 FORCE 关键字来创建托管表/无论您想要的确切行为是什么。

我能想到的最后一个解决方案是非常小心地将所有表设为外部。显然不是一个完美的解决方案，否则你不会问这个问题，但它会是我使用的那个。您最有能力决定其他解决方案的风险和成本是否值得收益。

# c# - WiX - 通过 CustomAction [C#] 动态设置安装目录

> ID：16103712
> 
> 赞同：2
> 
> 时间：2013-04-19T11:36:03.790
> 
> 标签：c#, wix, windows-installer, wix3.5, wix3.6

我即将创建一个安装程序，现在我必须根据操作系统设置安装目录。我的目录树：

```
<Property Id="TARGETDIR" Value="C:\" />
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="TARGETDIRECTORY" Name="MyApplication">
    <Directory Id="CONFIG" Name="Config">
      <Directory Id="FOLDER2" Name="Folder2" />
    </Directory>
  </Directory>
</Directory> 
```

如果我在 c#-custom-action 中设置 TARGETDIRECTORY，则目标目录设置正确，但 CONFIG/FOLDER2 只有旧链接。我怎样才能强迫他们将它们调整到新的路径？因为他们是 TARGETDIRECTORY 的孩子，我想他们应该自动执行此操作。我不想在 CustomAction 中自己设置它，因为还有更多文件夹即将到来

这里来自日志文件：

```
Property(S): FOLDER2 = C:\MyApplication\Config\Folder2\
Property(S): CONFIG = C:\MyApplication\Config\
Property(S): TARGETDIRECTORY = C:\Documents and Settings\MyApplication\
Property(S): TARGETDIR = C:\ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:16:47.213

可以解决 SetProperty 的问题：

```
<Property Id="TARGETDIRECTORY" Value="C:\Win7\" />
<SetProperty Id="TARGETDIRECTORY" Before="CostFinalize" Value="C:\WinXP\">
  <![CDATA[VersionNT = 501]]>
</SetProperty> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:56:15.727

如果您在 CostFinalize 之前更改安装路径，则可能会发生这种情况。如果是这种情况，您需要[使用不同的自定义操作来设置路径](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367852%28v=vs.85%29.aspx)，从而允许 Windows 安装程序收到有关更改的通知并更新子目录。

# android - Android - 是否可以使用 USB 连接以编程方式将文件从笔记本电脑读取到应用程序中？

> ID：16103713
> 
> 赞同：4
> 
> 时间：2013-04-19T11:36:09.457
> 
> 标签：android, usb

我需要使用 USB 连接从笔记本电脑读取文件。

是否可以从我们的应用程序中读取并使用它？

我检查了 UsbManager 类，但没有任何示例代码可以做到这一点。

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:43:40.600

> 是否可以从我们的应用程序中读取并使用它？

不，对不起。

# ios - 字符串长度目标 C

> ID：16103716
> 
> 赞同：-3
> 
> 时间：2013-04-19T11:36:14.133
> 
> 标签：ios, objective-c, nsstring

作为强制性验证，我通过此方法检查我的文本字段是否为空：

```
- (NSString *) clean: (NSString *) str
{
    return [str stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
} 
```

并在插入数据库时​​：

```
if([self clean:textfield.text].length == 0)
{
//Error
} 
```

我想知道我是否必须使用 <= 0 ？以防止以后出现某种可疑的错误/错误。就像我们在网站中一样（SQL 注入和其他）。有人可以在 iOS APP 的文本字段中插入负长度字符串吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:39:47.117

```
NSSTring *text = [textfield.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

 if ([text length] == 0 )
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:@"Please    enter text." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

    [alert show];

} 
```

**IT will check whether the textfield is empty or not !!!!!!!**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:46:40.040

According to apple documentation, the prototype of length method is :

```
- (NSUInteger)length 
```

Handle the negative values is then not necessary (you have an unsigned return value), so " == 0" is ok for testing.

# facebook - 应用程序冻结在 Windows Phone 设备中的 facebook 登录

> ID：16103723
> 
> 赞同：0
> 
> 时间：2013-04-19T11:36:43.373
> 
> 标签：facebook, windows-phone

我已经在我的应用程序中集成了 Facebook。我正在使用 webbrowser 在 facebook 上对用户进行身份验证，我们正在使用 facebook api 来访问用户 facebook 凭据。

如果我们在 Facebook->settings->Privacy Settings->Security 中启用安全浏览和登录通知

然后我们在登录后遇到 Facebook 冻结问题。

如果我们禁用上述（安全浏览和登录通知）设置，那么应用就可以了。

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:16:59.583

尝试在用于验证用户身份的 WebBrowser 上设置**IsScriptEnabled="true" 。**那应该这样做。

我最近在 Facebook 上遇到了类似的问题，就是因为这个。

# android - 渲染脚本限制数组大小

> ID：16103730
> 
> 赞同：2
> 
> 时间：2013-04-19T11:37:09.797
> 
> 标签：android, arrays, matrix, parallel-processing, renderscript

我在 Renderscript 中做矩阵乘法。我有准备所有数组的 java 文件。在我的 Renderscript 中，我有将由 java 文件设置的全局变量。但我看到有一个限制。如果我想与 37x37 矩阵相乘，结果仍然正确。如果我进行 38x38 矩阵乘法，则结果不再正确。在最终结果的第一行之后，计算结果不正确。我想有一个限制。37*37 = 1369

```
int vectorcol[1369];
int matrixA[1369];
int matrixB[1369]; 
```

我现在在 Java 和 RenderScript 中进行了动态数组分配。这工作正常，但它仍然是同样的问题。直到矩阵大小为 37 它工作正常。从 matrixsize 38 开始，它不会返回正确的结果。我不知道问题出在哪里。

如何在 Renderscript 中执行此操作？

[1] [http://docs.eoeandroid.com/guide/topics/renderscript/advanced.html#mem-allocation](http://docs.eoeandroid.com/guide/topics/renderscript/advanced.html#mem-allocation)

# sql - 列在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中

> ID：16103735
> 
> 赞同：0
> 
> 时间：2013-04-19T11:37:38.577
> 
> 标签：sql, sql-server, group-by

我正在尝试按名称选择最新日期和分组并保留其他列。

例如：

```
 name  status  date
        -----------------------
         a    l       13/19/04
         a    n       13/09/05
         a    dd      13/18/03
         b    l       13/01/01
         b    dd      13/01/02
         b    n       13/01/03 
```

我想要这样的结果：

```
 name status date
        -----------------
          a    n      13/09/05
          b    n      13/01/03 
```

这是我的代码

```
SELECT
    Name,
    MAX(DATE) as Date,
    Status
FROM
    [ST].[dbo].[PS_RC_STATUS_TBL] 
GROUP BY 
    Name 
```

我知道我应该输入 max(status) 因为在每种情况下都有很多可能性，并且查询中的任何内容都没有明确说明为每个组中的状态选择哪个值。反正有使用内部联接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T05:47:57.133

我不清楚你想要最大或最小状态。相反，在我看来，您希望某个日期的名称和状态是确定的。也就是说，您需要每个名称具有最新日期的行。所以要求：

```
select * from PS_RC_STATUS_TBL as T
where exists (
      select 1 from PS_RC_STATUS_TBL
      where name = T.name
      group by name
      having max(date) = T.date
) 
```

另一种思考方式是

```
select T.* 
from PS_RC_STATUS_TBL as T
join (
      select name, max(date)  as date
      from PS_RC_STATUS_TBL
      group by name
) as D
on T.name = D.name
and T.date = D.date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:40:33.407

It just means that you need to put all *non-aggregated* columns in the `GROUP BY` clause, so in the case you need to put the other one

```
Select  Name , 
        MAX(DATE) as Date ,
        Status
FROM    [ST].[dbo].[PS_RC_STATUS_TBL] PS
Group   by Name, Status 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-05T22:28:20.943

SQL Server 需要知道如何处理未分组的行（它在 1 行上显示多行 - 那么如何？）。如果您对它们进行了聚合（`MIN`、`MAX`、`AVG`等），那么您就是在告诉它如何处理这些行。如果不是，它将不知道该怎么做 - 并且会给您一个错误，就像您得到的错误一样。

不过，从您所说的来看-听起来您**不想**按状态分组。听起来你对那个专栏根本不感兴趣。让我知道这个假设是否错误。

```
SELECT
    Name,
    MAX(Date) AS 'Date',
FROM
    PS_RC_STATUS_TBL
GROUP BY
    Name 
```

如果您确实想要该状态，但不想对其进行分组 - 试试这个：

```
SELECT 
    MyTable1.Name,
    MyTable2.Status,
    MyTable1.Date
FROM
   (SELECT Name, MAX(Date) AS 'Date' FROM PS_RC_STATUS_TBL GROUP BY Name) MyTable1
     INNER JOIN 
   (SELECT Name, Date, Status FROM PS_RC_STATUS_TBL) MyTable2
     ON MyTable1.Name = MyTable2.Name 
    AND MyTable1.Date = MyTable2.Date 
```

这给出了您所要求的确切结果 - 下面使用 CTE 的方法也是如此。

或者

```
WITH cte AS (
    SELECT Name, MAX(Date) AS Date 
      FROM PS_RC_STATUS_TBL
  GROUP BY Name)

SELECT cte.Name,
       tbl.Status,
       cte.Date
  FROM cte INNER JOIN 
     PS_RC_STATUS_TBL tbl ON cte.Name = tbl.Name 
                         AND cte.Date = tbl.Date 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!6/f708d/7)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T01:24:35.370

这是 SQL 聚合场景中文本字段的常见问题。在字段列表中使用 MAX(Status) 或 MIN(Status) 是一种解决方案，通常是 MAX(Status) 因为词法排序：

```
"" < " " < "a" 
```

如果您确实需要更详细的订购：

*   在主查询中加入 StatusOrder 关系**（*Status，OrderSequence）**；
*   在聚合查询中选择**Max(OrderSequence)**；和
*   加入 OrderSequence 上的 StatusOrder 关系**以**选择正确的 Status 值进行显示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-24T04:03:33.027

除了聚合函数之外，您选择的任何字段都需要在 group by 子句中提及。

```
SELECT 

gf.app_id,
ma.name as name,
count(ma.name) as count

FROM [dbo].[geo_fen_notification_table]  as gf 
inner join dbo.mobile_applications as ma on gf.app_id = ma.id

GROUP BY app_id,name 
```

这里我在 select 中访问 app_id 和 name，所以我需要在 group by 子句之后提及。否则会抛出错误。

# php - jQuery函数不适用于同一类的所有字段

> ID：16103740
> 
> 赞同：0
> 
> 时间：2013-04-19T11:37:51.563
> 
> 标签：php, jquery

当值为空时，我有以下 jQuery 代码来禁用表单中的提交按钮。该代码适用于所有条目，除了`.action_manager`（这是`textarea`在表中动态生成的），其中仅填充第一行，启用按钮。我希望在重新激活之前填写所有字段`submitbutton`。**只有一个**实例`action_manager`就足以启用按钮（这**不是**我想要的）

```
 $('document').ready(function(){

        var submitButton = $('input[name="store_values"]');
        checkValues();

        $('select.actuallevel').on('change',function(){
            checkValues();
        });
        $('select.targetlevel').on('change',function(){
                checkValues();
            });
        $('select.quarter_manager').on('change',function(){
            checkValues();
        });
        $('select.year_manager').on('change',function(){
            checkValues();
        });

        $(".action_manager").each(function()
        {
           $(this).on('change',function(){
                checkValues();
          });
        });

        function checkValues(){
            submitButton.prop('disabled',$(".actuallevel > option:selected[value=''],.actuallevel:empty").length > 0 ||
                $(".targetlevel > option:selected[value=''],.targetlevel:empty").length > 0 ||
                $(".quarter_manager > option:selected[value=''],.quarter_manager:empty").length > 0 ||
                $(".year_manager > option:selected[value=''],.year_manager:empty").length > 0 ||
                !$.trim($(".action_manager").val())

            );
            //submitButton.prop('disabled',$(".targetlevel > option:selected[value=''],.targetlevel:empty").length > 0);
        }
    }); 
```

textarea 字段如下：

```
echo "<td><textarea class='action_manager' id='action-".$inf['Competence_ID']."' name='acto-".$inf['Competence_ID']."'>";if (isset($inf['actiontext'])){echo $inf['actiontext'];}echo "</textarea></td>";
    echo"<td>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:42:38.967

鉴于您已动态插入 .action_manager 文本区域，因此在加载文档时它们不存在。因此，您附加到 .action_manager textareas 的事件对于新的 textareas 将无效。

这是将事件附加到新旧 .action_manager 文本区域的正确方法：

```
 $(document).on('change','.action_manager',function(){
        checkValues();
  }); 
```

编辑答案：

请改用以下函数

```
 function checkValues(){
            var action_managerfilled = true;
            $(".action_manager").each(function(){
               if (!$.trim($(this).val())){
                    action_managerfilled = false;
                    return false;
               } 
            });
            submitButton.prop('disabled',$(".actuallevel > option:selected[value=''],.actuallevel:empty").length > 0 ||
                $(".targetlevel > option:selected[value=''],.targetlevel:empty").length > 0 ||
                $(".quarter_manager > option:selected[value=''],.quarter_manager:empty").length > 0 ||
                $(".year_manager > option:selected[value=''],.year_manager:empty").length > 0 ||
                !action_managerfilled
            );
            //submitButton.prop('disabled',$(".targetlevel > option:selected[value=''],.targetlevel:empty").length > 0);
        } 
```

似乎 $('.action_manager').val() 在所有情况下都只返回第一个 textarea 的值，而不是检查类 '.action_manager' 的每个 textarea 的值；因此上面的 .each() 函数可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:40:42.953

您需要**对动态生成的元素**`on`使用委托事件..并且**您不需要****在这里使用循环，选择器选择以该类开头的所有元素**...****`$.each`****

 **```
$(document).on('change','.action_manager',function(){
     checkValues();
}); 
```

但是，建议使用文档中存在的最接近的静态父级而不是`document`自身**

# postgresql - Postgresql - 两列之间的值

> ID：16103747
> 
> 赞同：2
> 
> 时间：2013-04-19T11:38:16.797
> 
> 标签：postgresql, range

我有一长串六位数字（例如 123456）

在我的 postgresql 数据库中，我有一个包含两列 start_value 和 end_value 的表。该表具有起始值和结束值的行，长度为 9 位，代表一个数字范围，即 start_value 可能是 123450000，end_value 可能是 123459999。

我需要将六位数字中的每一个与它在其范围内的 DB 表中的行进行匹配。

对于我列表中的许多数字，我可以简单地运行以下命令

```
SELECT * FROM table WHERE start_value=(number + 000) 
```

但是，这不包括落在某个范围内但不匹配此模式的数字。

我一直在尝试以下陈述：

```
SELECT * FROM table WHERE start_value > (number + 000) AND end_value < (number + 999) 
```

但这不起作用，因为某些行覆盖的范围比 xxxxx0000 到 xxxxx9999 更大，因此上面的语句可能返回 20 行或没有。

任何积分都将受到欢迎！

编辑：列的数据类型是数字（25）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T11:57:36.743

假设`number`是数字：

```
select *
from table
where number * 1000 between start_value and end_value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:58:01.310

好的，所以如果我理解正确，首先您需要将搜索值填充到 9 位。你可以用这个 - `12345 * (10 ^ (9 - length(12345::text)))`。 `length(12345::text)`获取您当前拥有的位数，然后从 9 中减去该位数，并将您的搜索值乘以 10 的结果的幂。然后，您只需将其放入搜索中即可。结果查询看起来像这样 -

`SELECT * FROM table WHERE (12345 * (10 ^ (9 - length(12345::text)))) > start_value AND (12345 * (10 ^ (9 - length(12345::text)))) < end_value`

您也可以使用`BETWEEN`运算符，但它是包容性的，与您拥有的示例查询不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-05T06:44:43.180

**PostgreSQL 后**

**有时我们陷入数据类型转换问题和空值异常。**

```
SELECT *
FROM TABLE
WHERE COALESCE(number::int8, 0::int8) * 1000 BETWEEN start_value::int8 AND end_value::int8
; 
```

`number::int8`类型转换为整数

`start_value::int8`类型转换为整数

`COALESCE(number::int8, 0::int8)` 如果值为空，则返回数字或零以避免异常

# hadoop - Hadoop : How to compute actual file size?

> ID：16103748
> 
> 赞同：0
> 
> 时间：2013-04-19T11:38:22.547
> 
> 标签：hadoop, hdfs

I am using hadoop to store files. I want to know the actual file size.

```
getFileSystem().getContentSummary(new Path(fileName)).getLength(); 
```

It returns the compressed file size. I am using default hadoop codec compression.

How can I compute the actual file size?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:31:14.337

除非压缩编解码器支持将未压缩的大小存储在压缩文件的页眉/页脚中，否则无法计算出未压缩的大小（除了执行流解压缩并通过 dd 之类的东西运行或计算 java 中的字节数）。

例如 GZip - 文件的最后 4 个字节是以字节为单位的未压缩大小（假设它不超过 4 个字节可以表示）

# java - Confusion related enum object allocation in JVM

> ID：16103751
> 
> 赞同：2
> 
> 时间：2013-04-19T11:38:34.597
> 
> 标签：java

This might be a stupid question, but I am really confused after Googling.

We have a very big Java EE application. Now when it's time to go to production, there are a number of performance related problems raised. I am trying to get to the bottom of a memory leak issue. When I was looking through JProfiler, I found some enum variables that will not be garbage collected.

Just an example:

The application has one session factory, which is a kind of map i.e. `Map<SessionKey, Object>`. When the user is logged in that map will fill up and it will be cleared when that user logs out.

But with JProfiler I encountered some strange behavior. It shows `SessionKey` memory allocation increasing with the number of logins. When I'm logged in for the first time it shows **106 difference** and after the second login it shows **206 difference** in JProfiler. So this means the difference is increasing and increases more frequently.

**is it enum never eligible for garbage collection?**

I could not get it that what is wrong in it. Or I understand wrong. Let me know for more detail.

```
public enum SessionKey{
    LOGGEDIN_USER, DOCUMENT_ID, LOGGEDIN_USER_POSTS, LOGGEDIN_USER_PRIVILEGE, NORM_ID, DOCUMENT_REF_NO,DOCUMENT_STATUS, DOCUMENT,APPLICANT_USER, 
    NORM, CLIENT_SESSION_EXPIRED,  
    GININJECTOR, SCHEDULE_ID, DOCUMENT_ENTITY_TYPE,SOURCE_DOCUMENT_ID, CONFIGURATION_LIST, LOGGEDIN_USER_ID, 
    SOURCE_NORM_ID, MASKING_PANEL, IS_ETOKEN, 
    LOGGEDIN_USER_PRIVILEGE_NAMES, LOGGEDIN_USER_PRIVILEGE_IDS, IPADDRESS, AUTO_COMPLETE_SCHEDULER,
    MESSAGES, DEFAULT_CERTIFICATE, DOCUMENT_FORM_MAP,DOCUMENT_FORM_FCM_MAP,DOCTYPELIST,ACCESS_RIGHT,LOGGEDIN_USER_DEFAULT_POST,LAST_LOGIN_DETAILS, DOC_STATUS_ENUM_MASTERS
    ,MODULE_RIGHT_ENUM_MASTERS,MODULE_RIGHT, LOGGEDIN_USER_DEFAULT_PORTAL,
    LOGGEDIN_USER_DEFAULT_POST_MAP,HISTORY_CLEAR,DOC_DETAILS_PORTAL,ORGANIZATION_ID, DOCUMENT_DETAILS_FROM_JSP,PORTAL_MAP,ORGANIZATION,
    CONFIGURATION_MAP, DEFAULT_SIGN_CERTIFICATE,SYSTEM_VERSION,
    IS_LOGGEDIN_IN_ORGANIZATION, SUPPLIER_PORTAL_BASED_ON_URL, SUPPLIER_ORGANIZATION_BASED_ON_URL, BEFORE_LOGIN, USER_LANGUAGE, SERVER_DATE_TIME,DOCUMENTTYPE_CONFIG_TABLE;
} 
```

SessionFacory code:

```
public class SessionFactory {
    private static HashMap session;
    public static HashMap getClientSessionInstance() {
        if (session == null) {
            session = new HashMap();
        }
        return session;
    }

    public static Object getValue(SessionKey key) {
        return getClientSessionInstance().get(key);
    }

    public static void putValue(SessionKey key, Object value) {

        getClientSessionInstance().put(key, value);
    }

    public static void remove(SessionKey key) {
        getClientSessionInstance().remove(key);
    }

    public static void clear() {
        getClientSessionInstance().remove(SessionKey.LOGGEDIN_USER);
        getClientSessionInstance().remove(SessionKey.LOGGEDIN_USER_PRIVILEGE);
        getClientSessionInstance().remove(SessionKey.LOGGEDIN_USER_ID);
        getClientSessionInstance().remove(SessionKey.LOGGEDIN_USER_POSTS);
        getClientSessionInstance().remove(SessionKey.CONFIGURATION_LIST);
        getClientSessionInstance().remove(SessionKey.DOCUMENTTYPE_CONFIG_TABLE);
        getClientSessionInstance().remove(SessionKey.SERVER_DATE_TIME);
        getClientSessionInstance().remove(SessionKey.USER_LANGUAGE);
        getClientSessionInstance().remove(SessionKey.SUPPLIER_ORGANIZATION_BASED_ON_URL);
        getClientSessionInstance().remove(SessionKey.SUPPLIER_PORTAL_BASED_ON_URL);
        getClientSessionInstance().remove(SessionKey.IS_LOGGEDIN_IN_ORGANIZATION);
        getClientSessionInstance().remove(SessionKey.DEFAULT_SIGN_CERTIFICATE);
        getClientSessionInstance().remove(SessionKey.CONFIGURATION_MAP);
        getClientSessionInstance().remove(SessionKey.ORGANIZATION);
        getClientSessionInstance().remove(SessionKey.LOGGEDIN_USER_DEFAULT_PORTAL);

        getClientSessionInstance().remove(SessionKey.ACCESS_RIGHT);
        getClientSessionInstance().remove(SessionKey.DOC_STATUS_ENUM_MASTERS);
        getClientSessionInstance().remove(SessionKey.IS_ETOKEN);

        getClientSessionInstance().remove(SessionKey.ORGANIZATION_ID);

        getClientSessionInstance().remove(SessionKey.LAST_LOGIN_DETAILS);
        getClientSessionInstance().remove(SessionKey.LOGGEDIN_USER_DEFAULT_POST);
        getClientSessionInstance().remove(SessionKey.MODULE_RIGHT);
        getClientSessionInstance().remove(SessionKey.MASKING_PANEL);
        getClientSessionInstance().remove(SessionKey.GININJECTOR);
        getClientSessionInstance().remove(SessionKey.MODULE_RIGHT_ENUM_MASTERS);
        getClientSessionInstance().remove(SessionKey.LOGGEDIN_USER_DEFAULT_POST_MAP);

        clearDocumentSession();

    }

    public static void clearDocumentSession() {
        getClientSessionInstance().remove(SessionKey.DOCUMENT_ID);
        getClientSessionInstance().remove(SessionKey.DOCUMENT_REF_NO);
        getClientSessionInstance().remove(SessionKey.DOCUMENT_STATUS);
        getClientSessionInstance().remove(SessionKey.DOCUMENT);
        getClientSessionInstance().remove(SessionKey.APPLICANT_USER);
        getClientSessionInstance().remove(SessionKey.NORM);
        getClientSessionInstance().remove(SessionKey.NORM_ID);
        getClientSessionInstance().remove(SessionKey.SCHEDULE_ID);
        if(getClientSessionInstance().containsKey(SessionKey.SOURCE_DOCUMENT_ID))
            getClientSessionInstance().remove(SessionKey.SOURCE_DOCUMENT_ID);
        if(getClientSessionInstance().containsKey(SessionKey.SOURCE_NORM_ID))
            getClientSessionInstance().remove(SessionKey.SOURCE_NORM_ID);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:44:55.900

枚举对象就像应用程序的静态变量。它们不是垃圾收集的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:11:01.310

枚举定义的条目是定义枚举的静态实例。

以更清晰的方式，Java 编译器生成与以下代码匹配的字节码：

```
public class SessionKey {
    public static final SessionKey LOGGEDIN_USER = new SessionKey();
    .....
} 
```

所以，枚举的实例永远不会被垃圾收集器收集，因为是静态实例，而且你的枚举“SessionKey”的实例数量在你正在运行的虚拟机的整个生命周期中都不会改变，可能问题与枚举无关有时分析器只给出实例状态的样本。

要完成，只有一次可以卸载枚举实例，并且是当枚举的类加载器卸载枚举时；）像所有静态实例一样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:39:26.910

枚举不应该是你的问题。正如其他答案所解释的那样，它们只被实例化一次。或者你正在用类加载器做一些奇怪的事情？

问题可能来自您的会话 HashMap。由于它是静态的，并且您只能使用 getClientSessionInstance() 访问它，因此应用程序中应该只有一个（尽管它不是线程保存）。可能出现的一个问题是应用程序中的某个地方 getClientSessionInstance() 被调用，并且在地图中插入了一些东西。由于您的 HashMap 没有键入，任何内容都可以作为键插入，而您的 clear() 函数不会删除它。为什么不在 HashMap 上调用 clear()？我建议使用 EnumMap 或至少使用 HashMap 并将您的 getClientSessionInstance() 函数设为私有。

我感兴趣的事情：您不想为每个用户创建一个会话映射，还是在客户端 jvm 上运行？

# c# - 在 Linq 中按 Group by 获取总记录

> ID：16103753
> 
> 赞同：0
> 
> 时间：2013-04-19T11:38:46.690
> 
> 标签：c#, .net, linq, entity-framework

我在 SQL 中有一个查询，想将其转换为 Linq。我的查询是：

```
select count(tbs.tbsid) as CNTSeats,tbm.BusNo
from tdp_tourpackageschedule tps
join tdp_tourpackage tp on tp.TourID = tps.FK_TourID
join tdp_tourbusseats tbs on tbs.tbsid = tps.fk_tbsid
join tdp_tourbusmaster tbm on tbm.tbid = tbs.fk_tbid
where fk_tdid = @FKTDID and fk_TourID = @FKTourID and IsOpen = 1
group by tbm.BusNo 
```

我试过这个代码：

```
var tourAvail = (from ts in entities.tdp_TourPackageSchedule
                 join tp in entities.tdp_TourPackage on ts.FK_TourID equals tp.TourID
                 join tbs in entities.tdp_TourBusSeats on ts.FK_TBSID equals tbs.TBSID
                 join tb in entities.tdp_TourBusMaster on tbs.FK_TBID equals tb.TBID
                 where ts.FK_TDID == TDID && ts.FK_TourID == TourID && ts.IsOpen == 1
                 group tb by tb.BusNo into cnt
                 select new
                 {
                     //BusNo = cnt.bu
                     //Count = cnt.Select(x => x.tdp_TourBusSeats).Distinct().Count()
                 }); 
```

我不知道如何获得记录数，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:47:23.517

做 ：

```
var tourAvail = (from ts in entities.tdp_TourPackageSchedule
                 join tp in entities.tdp_TourPackage on ts.FK_TourID equals tp.TourID
                 join tbs in entities.tdp_TourBusSeats on ts.FK_TBSID equals tbs.TBSID
                 join tb in entities.tdp_TourBusMaster on tbs.FK_TBID equals tb.TBID
                 where ts.FK_TDID == TDID && ts.FK_TourID == TourID && ts.IsOpen == 1
                 group tb by tb.BusNo into cnt
                 select new
                 {
                     BusNo = cnt.Key,
                     Count = cnt.Count()
                 }).ToList(); 
```

# twitter-bootstrap - Input not focusing on click in bootstrap modal

> ID：16103754
> 
> 赞同：1
> 
> 时间：2013-04-19T11:38:49.003
> 
> 标签：twitter-bootstrap, input, modal-dialog

I'm in front of a problem i can't solve by myself. I'm using a jquery colorpicker (spectrum) in a bootstrap modal box, but, when i do so, the input in the colorPicker can't be focused on when i click on it. The mouse cursor appears, but nothing happens, so i can't change the input value.

When it is not in a modal box, it works perfectly.

Here's a url to test the problem : [http://www.fgtechs.fr/widget-app/](http://www.fgtechs.fr/widget-app/)

Why can't i select the input when it's in the modal box, and how can i solve it ?

Thank's for all ;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-10T14:34:32.563

通过添加以下脚本（.coffee），它将解决问题。

```
$(document).on 'focusin', '.sp-container', (e) ->
  e.stopImmediatePropagation() 
```

# wcf - WCF 测试客户端重新分发

> ID：16103757
> 
> 赞同：0
> 
> 时间：2013-04-19T11:39:01.707
> 
> 标签：wcf

我正在开发一种提供 WebServices 的产品，客户端通常需要一些简单的客户端来测试它们。WCFTestClient 工具非常适合这个目的。

将 Visual Studio 中的 WCFTestClient 工具作为产品安装的一部分包含在内是否合法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:53:24.073

转到[MS 用户条款](http://www.microsoft.com/legal/useterms.)：搜索 Visual Studio（您拥有的版本），并检查它的 EULA（以 pdf 格式提供）。

编辑：对于我的 VS2012 Pro 发现这个：

额外的许可要求和/或使用权利。

...

湾。实用程序。该软件包含在位于 go.microsoft.com/fwlink/?LinkId=247624 的实用程序列表中标识的某些组件。根据软件的特定版本，您随软件收到的实用程序文件数量可能不等于实用程序列表中列出的实用程序数量。**您可以将随软件一起收到的实用程序复制并安装到其他第三方机器上。这些实用程序只能用于调试和部署您使用该软件开发的程序和数据库。当您完成调试或部署程序后，您必须在 (i) 中较早的时间内删除安装在第三方机器上的所有实用程序；(ii) 实用程序安装到该机器后三十 (30) 天。**

**但，**

该列表 ( )中没有`WcfSvcHost`/ 。我假设您可以不受任何限制地分发两者`TestClient``go.microsoft.com/fwlink/?LinkId=247624`

# windows-phone-7 - phonegap(cordova) not working on Windows phone 7

> ID：16103760
> 
> 赞同：1
> 
> 时间：2013-04-19T11:39:12.993
> 
> 标签：windows-phone-7, cordova

Hey I have just started with windows phone development for phonegap. I have followed all the instructions in the getting started guide and created a phonegap application in visual studio. But when I run the simulator the index.html is never displayed. I have even tried to redirect from MainPAge.xaml to index.html but no use. Also I have searched a lot of forums but most of them have inadequate information.

Could someone tell me why this is happening? I'm using VS 2010 and phoneGap 2.5.

Any kind of help will be appreciated.

# java - Should repository layer always be encapsulated by a service layer?

> ID：16103761
> 
> 赞同：5
> 
> 时间：2013-04-19T11:39:17.003
> 
> 标签：java, spring, jakarta-ee, spring-mvc

In the repository layer I define normal data operations such as inserting, finding and so on. I am using Spring and I have the `@Repository` annotation above the class. Is it bad to use this class directly in the `@Controller` class for instance? Should all repositories always have a service layer that just delegate to the repository layer?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:46:27.247

It totally depends on your choice. In Spring Roo, you don't just skip the Repository or Service layer, but use a Rich Domain Model where you have the data access logic in the domain itself. Frameworks like Groovy on Grails use a single Repository layer. So i think its OK to use it directly in the Controller.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:37:59.290

我同样问[过 EJB 有什么用](https://stackoverflow.com/questions/5579890/what-use-are-ejbs)？[一个答案是](https://stackoverflow.com/a/5580104/545127)这样说的：

> 您的 [服务层] 通常会编排业务逻辑的应用程序，但通常不会实际执行它，它通常是一个非常薄的包装器。

服务层方法可以定义作为事务的操作，因此具有注释以自动为您添加 AOP 事务支持。另请参阅[相关问题](https://stackoverflow.com/questions/997600/aop-spring-and-transaction-scoping)[的答案](https://stackoverflow.com/a/999164/545127)，其中说：

> Spring 的习惯用法会建议有一个了解工作单元的服务接口和一个处理关系数据库的持久性接口。服务接口中的方法应该与您的用例密切相关。服务实现了解实现用例目标所需的所有模型和持久性包和类。

# linux - Tracking file descriptor activity on Linux

> ID：16103763
> 
> 赞同：0
> 
> 时间：2013-04-19T11:39:32.543
> 
> 标签：linux, file, race-condition

I'm facing an issue where my epoll descriptor is getting closed from underneath me. It's a huge code base and I've tried to trace the activities on the descriptor in the code, but to no avail. Is there a way to track the activities on a file descriptor (on Linux) and generate a call trace leading upto the point?

Any other suggestions to track the offending piece of code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T12:04:52.707

使用`strace`，例如`strace -p your_process_pid_here`。

# php - 从 MYSQL 数据库随机输出行项目

> ID：16103766
> 
> 赞同：0
> 
> 时间：2013-04-19T11:39:37.107
> 
> 标签：php, mysql, facebook

我有一个包含以下字段和示例的数据库表：

```
QuestionID
Question
AnswerA
AnswerB
AnswerC
AnswerD
CorrectAnswer 
```

例子：

```
QuestionID: 1
Question: What is 2 + 2?
AnswerA: 1
AnswerB: 2
AnswerC: 3
AnswerD: 4
CorrectAnswer: 4 
```

如果我的数据库中有 20 个问题，我将如何得到它，以便不仅问题以随机顺序出现，而且答案出现在不同的单选按钮上（以防止用户记住正确答案的位置）。这将被集成到 Facebook 应用程序中。下面是我的 SQL 查询：

```
$sql="SELECT DISTINCT Question, QuestionID, AnswerA, AnswerB, AnswerC, AnswerD FROM miniproj ORDER BY rand() LIMIT 1"; 
```

这是`while`我正在使用的语句（我理解`mysql_fetch_array`已弃用，但我可以再次排序）：

```
while ($myrow = mysql_fetch_array($result))
        {
            $answers = array($myrow['AnswerA'], $myrow['AnswerB'], $myrow['AnswerC'], $myrow['AnswerD']);
            shuffle($answers);
            echo("<form action='question.php' method='POST'>\n");
            echo("<h1>");
            echo("Q: ");
            echo($myrow['Question']);
            echo("</h1>");
            echo("<input type='radio' name='comments' value='A'>\n");
            echo($myrow['AnswerA']);
            echo("<p>");
            echo("<input type='radio' name='comments' value='B'>\n");
            echo($myrow['AnswerB']);
            echo("<p>");
            echo("<input type='radio' name='comments' value='C'>\n");
            echo($myrow['AnswerC']);
            echo("<p>");
            echo("<input type='radio' name='comments' value='D'>\n");
            echo($myrow['AnswerD']);
            echo("<p>");
            echo("<br />");
            echo("<input type='submit' value='Submit'>\n");
            echo("</form>\n");
        } 
```

任何提示都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:45:23.457

您需要在 PHP 脚本的开头添加以下函数（感谢***Jon Stirling***的[解决方案](https://stackoverflow.com/questions/7463671/php-how-to-jumble-randomize-order-of-associative-array-while-keeping-key-valu)）：

```
<?php
function shuffle_keys(&$array){
    $keys = array_keys($array);

    shuffle($keys);

    $result = array();

    foreach($keys as $key){ $result[$key] = $array[$key]; }

    $array = $result;
}
?> 
```

然后，当您处理结果集时，我建议您这样做：

```
<?php
while($myrow = mysql_fetch_array($result))
    {
        $answers = array(
            'A' => $myrow['AnswerA'],
            'B' => $myrow['AnswerB'],
            'C' => $myrow['AnswerC'],
            'D' => $myrow['AnswerD']
        );

        shuffle_keys($answers);

        echo "<form action='question.php' method='POST'>",
             PHP_EOL,
             "<h1>Q: {$myrow['Question']}</h1>";

        foreach($answers as $key => $value){
            echo "<p><input type='radio' name='comments' value='{$key}'>{$value}</p>";
        }

        echo "<input type='submit' value='Submit'>",
             PHP_EOL,
             "</form>",
             PHP_EOL;
    }
?> 
```

**PS：** [本主题](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)建议您避免使用 ***mysql_**** 函数。这是旧的和不推荐使用的扩展。请改用 ***mysqli_**** 或 ***PDO_****。

# brunch - 将不同的 sass 文件连接到对应的 css 文件

> ID：16103770
> 
> 赞同：2
> 
> 时间：2013-04-19T11:39:54.600
> 
> 标签：brunch

在我的`app/styles/`目录中，我有以下文件

*   application_blue.scss
*   application_red.scss

我想将这些文件分别连接到`public/stylesheets/application_blue.css`和`public/stylesheets/application_red.css`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:41:25.030

```
stylesheets:
  defaultExtension: 'scss'
  joinTo: 
    'stylesheets/application_blue.css': /^app\/styles\/application_blue/
    'stylesheets/application_red.css': /^app\/styles\/application_red/ 
```

好的，我找到了解决方案，可能对其他人有帮助

# android - phonegap android assets code is viewable - want to convert it as unreadable

> ID：16103778
> 
> 赞同：1
> 
> 时间：2013-04-19T11:40:08.993
> 
> 标签：android, cordova

I am developing sample app for android using Phonegap. In assets/www/ folder all the html,css, js codes are readable when I extract .apk file. Is there any way to convert it as unreadble while being build as .apk.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:43:32.130

JavaScript、CSS 和 HTML 都是客户端语言，你不能真正通过“编译”使它们不可读。充其量，您可以在将代码打包成 apk 之前使用任何混淆服务来混淆代码。这只会将变量名称更改为无意义的东西，并删除缩进和间距以降低代码可读性，但这是您可以为这些语言做的最好的事情。

# asp.net - 确保登录用户只能看到他们的数据的最佳方法

> ID：16103780
> 
> 赞同：5
> 
> 时间：2013-04-19T11:40:13.767
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, security

这听起来像是一个愚蠢的问题，但我只是想知道我是否在任何地方错过了一个技巧。

场景是，我有一个使用 Simple Memebership 的 Web 应用程序，用户可以注册使用它（例如发票程序）。

但是，他们应该只能查看/更新/删除他们自己添加到数据库/Web 应用程序的信息。

确保用户只能访问其信息的最佳方法是什么？

是否为每个表添加一个用户名字段，例如：

```
public class Invoice
{
     public int InvoiceId { get; set; }
     public int CustId { get; set; }
     public string UserName { get; set; }
}

public class Item
{
   public int ItemId { get; set; }
   public int InvoiceId { get; set; }
   public string UserName { get; set; }
} 
```

...然后在任何访问数据的控制器中，只需在每个查询中添加对用户名的检查，例如：

```
var Inv = db.Invoices.Where(x => x.UserName = User.Identity.Name);
var Itm = db.Items.Where(y => y.UserName = User.Identity.Name); 
```

这就是我目前正在使用的，但想知道这是否是**最佳实践**？或者如果现在我们进入 MVC4 有更简单的方法？

最好使用**UserProfile**表中的**UserName**或**UserId**，还是有关系？

 ****更新以在评论后添加清晰度**

因此，已有 10 个用户注册 - 并且都创建了自己的发票。我不希望任何用户看到任何其他用户的发票。

感谢您的任何建议。

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:14:20.657

我会做的事情是：

1.  避免在发布/查询字符串中传递任何形式的用户 ID/凭据，将其保存在安全的地方，例如在 cookie 中加密，并在构建查询时始终使用它

2.  如果您将 Id 作为编辑的一部分传回程序，请确保这些值没有被篡改，如果您在隐藏字段中输出 id，请确保它在返回时与输出时相同（这就是所谓的直接引用攻击）

3.  如果您的应用程序请求编辑，例如 client/edit/4，请始终确保 id 4 属于该用户，然后再显示它。

这里有一些关于前 10 个漏洞的好读物：[https ://www.owasp.org/index.php/Top_10_2010-Main](https://www.owasp.org/index.php/Top_10_2010-Main)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T12:26:05.093

如果您正确设置数据库关系，您应该能够参考例如用户的发票，如下所示：

```
var invoices = dbContext.Users.first(u=>u.id == idParam).Invoices; 
```

您可以通过测试验证发票是否属于用户

```
if(dbContext.Invoices.Any(i=>i.invoiceID))//invoice exists?
{
    //Invoice belongs to user?
    bool invoiceBelongsToUser = dbContext.Users.first(u=>u.id == idParam)
    .Invoices.Any(i=>i.invoiceID == invoiceIDParam);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:54:28.720

您可以将[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)过滤器添加到 global.asax 文件中，以保护每个控制器的每个操作方法。

控制器无需授权：

```
 [AllowAnonymous]
 public ActionResult LogOn() 
```

[保护您的 asp-net-mvc-3-应用程序](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)**

# c++ - Pythagorean triplets whose sum is 1000?

> ID：16103781
> 
> 赞同：1
> 
> 时间：2013-04-19T11:40:18.057
> 
> 标签：c++, pythagorean

Project Euler problem 9\. I tried to solve it, infact I get triplets which are not Pythagorean triplets and their sum is 1000, Why? I made sure they were Pythagorean triplets. Here is my long and not so optimized code:

```
#include <iostream>
#include <math.h>

using namespace std;

int main()
{
    int a,b,c; //Decalring the triplets...
    a=1; //First triplet starts with 3
    b=1;
    int c2;//c square

    while(true)
    {
        for(b=1;b<a;b++){
        c2 = a*a+b*b;
        c = sqrt(c2);
        if(c*c == c2 && a+b+c==1000)
        {
            cout<<a<<","<<b<<","<<c<<"\n";
        }
        a++;
        }
        b++;
    }
} 
```

Final working code:

```
#include <iostream>
#include <math.h>

using namespace std;

int main()
{
    int x,y,z,a;
    for(x=1;x<=1000;x++)
    {
        for(y=1;y<=1000;y++)
        {
            a = x*x+y*y;
            z=sqrt(a);
            if(z*z==a && x+y+z==1000 && x<y){
            cout<<x<<","<<y<<","<<z<<"."<<"\n";
            cout<<"So the product of all of the three triplets is "<<x*y*z;
            }
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:04:54.500

您的循环条件已关闭。`c`对应于当前的和`a`在循环*内*`b`计算。因此，您不能测试循环迭代的值，因为它是旧的。从条件中删除，重新测试 的完整性，您就有了解决方案。*`c``c``sqrt(c2)`*

 ***编辑**

您似乎试图通过或多或少的随机代码更改来获得结果。那*不会*让你到任何地方。

首先用简单的人类语言清楚地制定你的算法。然后将其改写为匹配 C++ 代码概念的（仍然是简单的人类语言）结构。然后对这些概念进行编码。

像这样的东西：

步骤 1\. 在毕达哥拉斯三元组中，第三个成员`c`完全由前两个决定。因此，我将检查 和 的所有可能值`a`，`b`如果它们形成一个毕达哥拉斯三元组，则测试它的总和为 1000。

第 2 步。对于每个`a`，我将测试所有大于`b`小于1000 的 s。我将计算并查看它是否是正方形。如果是这样，我将测试三元组的总和。`a``a + b``c2`

步骤 3。

```
#include <cmath>
#include <iostream>

int main()
{
  for (int a = 3; a < 1000; ++a) {
    for (int b = a + 1; a + b < 1000; ++b) {
      int c2 = a * a + b * b;
      int c = std::sqrt(c2);
      if (c * c == c2) {
        if (a + b + c == 1000) {
          std::cout << "Found triplet " << a << ", " << b << ", " << c << '\n';
        }
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:43:47.100

您应该检查以确保它`c2`实际上是一个正方形。这样做的一种方法是检查是否`c*c == c2`在取平方根之后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-02T15:55:49.943

```
//My brute force solution works fine
since i<j<k
start j loop from i+1 and k loop from j+1
whenever the condition satisfies print the product of triplet

#include<iostream>
using namespace std;
int main()
{
    for(long long i=1;i<=1000;i++)
    {
        for(long long j=i+1;j<=1000;j++)
        {
            for(long long k=j+1;k<=1000;k++)
            {
                if((i+j+k)==1000 && i*i+j*j==k*k)
                {
                cout<<i*j*k<<endl;
                }
            }
        }
    }
} 
```*

# code-generation - Ecore model to Xtext

> ID：16103783
> 
> 赞同：2
> 
> 时间：2013-04-19T11:40:22.730
> 
> 标签：code-generation, xtext, emf, eclipse-emf-ecore

I have a complete EMF-Metamodell (ecore) created. Now I want to try Code-Generation with Xtext2, because I found somewhere that xtext2 is better for code generation than xpand.

I created a new Project with Eclipse and imported my existing ecore-model. I use the new Project with Xtend to do the code-generation.

1.  I dont like the default convertion to xtext. To many curly braces and other stuff. Can I define somehow how I want it converted?
2.  When I change my Meta-Model (ecore) how can I enforce an update of the xtext file?
3.  Is there a better way to achieve my goals?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:15:18.667

如果您选择 xtext 作为您的模型到测试生成技术，为什么不使用它也从 ecore 模型生成 xtext 源？这是一种标准的模板方法。

至于在您的分数源更改时强制重新生成，请创建一个 Eclipse 构建器并配置您的 ecore 项目以在项目中的任何资源更改时调用构建。

# php - 带有 file_get_content 的不需要的文件路径

> ID：16103789
> 
> 赞同：-1
> 
> 时间：2013-04-19T11:40:38.313
> 
> 标签：php

我有这个代码：

```
<?php 
$file1 = file_get_contents('http://www.mydomain.com/admin/config/main.txt');
echo "<a href='$file1' >";
?> 
```

这给了我一个超链接如下：

www.mydomain.com/admin/config/'main.txt 的内容'

我想要的只是创建一个包含“main.txt 内容”的链接

我尝试了以下方法：

```
$file1 = file_get_contents('http://www.mydomain.com/admin/config/main.txt', false); 
```

但它只是给了我同样的回报。

我不知道如何在没有路径的情况下只给我文件中的任何内容。

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T11:49:18.550

去掉你不想在链接中看到的部分。

```
<?php 
$file1 = file_get_contents('http://www.mydomain.com/admin/config/main.txt');

$file1_pruned = str_replace('www.mydomain.com/admin/config/','',$file1);

echo "<a href='$file1_pruned' >";

/* When I have this kind of unexpected results, I like to compare 
** the original with the modified result. So you might also show 
** both after the link just to compare.
**/
echo "Checking output.<br><br>file1: $file1<br>file1_modified: $file1_modified";
?> 
```

# html - 在控制器中生成链接以通过电子邮件发送

> ID：16103793
> 
> 赞同：1
> 
> 时间：2013-04-19T11:41:05.830
> 
> 标签：html, asp.net-mvc-4, hyperlink, asp.net-core-2.0, asp.net-mvc-routing

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T12:03:50.603

可以通过属性`UrlHelper`在控制器中使用`Url`，它可以做同样的事情，那就是为你构建一个 url。因此，您可以为您的电子邮件发件人提供包含链接的文本，这就是您构建电子邮件该部分的方式：

```
var link = "<a href='http://www.mysite.com/" 
    + @Url.Action("ResetPassword","Account", new{id=184, t=token}) 
    +"'>Click here to reset your password</a>"
// where token is your single-use crypto-secure 
```

如果您希望域是动态的，那么您可以将其更改为：

```
var link = "<a href='" 
    + Request.Url.Scheme + "://"
    + Request.Url.Authority
    + @Url.Action("ResetPassword","Account", new{id=184, t=token}) 
    +"'>Click here to reset your password</a>"
// where token is your single-use crypto-secure 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-08T08:47:44.903

# c# - 如何使用对第三方系统的摘要身份验证创建 WCF 客户端

> ID：16103796
> 
> 赞同：1
> 
> 时间：2013-04-19T11:41:23.190
> 
> 标签：c#, wcf, digest-authentication

我已经获得了一个用于外部系统（不是基于 .Net）的 wdsl，并且我已经使用 svcutil 为其创建了一个客户端/代理。外部单元需要摘要身份验证才能与它交谈，并且支持 http 和 https。

几个问题：

1.  不涉及证书。在这种情况下使用 https 会导致问题吗？

2.  我知道我可以像这样指定传输级摘要身份验证：

    ```
     var binding = new WSHttpBinding();
            binding.Security.Mode = SecurityMode.Transport;
            binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Digest; 
    ```

但是，如何创建凭据并将它们与我的绑定/代理一起使用？

我可以很容易地在网上找到很多关于创建 WCF 服务的信息，但是客户端对非基于 .Net 的服务的实现......没有那么多。

感谢您的任何见解！

# wamp - 在 WAMP 中设置多个站点

> ID：16103800
> 
> 赞同：0
> 
> 时间：2013-04-19T11:41:37.257
> 
> 标签：wamp

我以前在 WAMP 中安装过 Drupal。它仍然在我的 www 文件夹中。

我想在另一个（Wordpress）网站上开始工作。我在 WAMP 中创建了一个新文件夹并将 Drupal 文件夹设置为 Drupal.old 以便它不会使用它，但我仍然可以将它保留在那里。

现在，当我在 WAMP 中访问 PHP My Admin 时，它只会显示 404 错误。

我究竟做错了什么？我只需要在我的本地机器上安装 WP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T10:49:28.680

弗朗西斯卡，

你永远不应该把你的任何东西放在 www 文件夹中。这属于 WAMP，基本上是 localhost 站点。因此，通过重命名它，您已经删除了 loclahost 站点，因此 phpmyadmin 是您现在丢失的 localhost 站点的别名。

您应该在 www 文件夹下为您的网站创建子文件夹，例如

```
c:\wamp\www\drupal1
c:\wamp\www\wordpress1 
```

但这不是最好的解决方案。最好为每个站点创建一个虚拟主机，即虚拟主机。

跳到WAMPSERVER[论坛](http://forum.wampserver.com/list.php?2)

在“Vistual Host HOWTO”上进行搜索，您应该会找到有关如何设置它们的教程。

# bash - 将变量保存到文件时换行 - bash

> ID：16103804
> 
> 赞同：1
> 
> 时间：2013-04-19T11:41:47.797
> 
> 标签：bash

我在一个变量中有多个 ip 地址。

```
ActiveIPs=192.168.0.1 192.168.0.2 192.168.0.3 
```

我想将它们保存到这样的文件中，由换行符分隔

```
192.168.0.1
192.168.0.2
192.168.0.3 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:03:13.340

```
$ ActiveIPs="192.168.0.1 192.168.0.2 192.168.0.3"

$ awk '1' RS=' ' <<< "$ActiveIPs"
192.168.0.1
192.168.0.2
192.168.0.3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:58:44.353

使用参数扩展将所有空格字符更改为换行符：

```
$ foo='abc def ghi'
$ echo "${foo// /$'\n'}"
abc
def
ghi 
```

使用参数扩展完全避免了创建新进程，甚至没有内置命令。

如果可以，最好将值保存到数组中：

```
$ input=( 192.168.0.100 10.0.0.1 192.168.0.101 ) 
```

这样，您可以完全控制 shell 如何拆分单词，并且您仍然不必调用外部命令。

```
$ SAVE_IFS="$IFS"
$ IFS=$'\n'
$ echo "${input[*]}"
192.168.0.100
10.0.0.1
192.168.0.101 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T11:53:37.573

`printf`将根据需要重复一个模式。

```
ActiveIPs="192.168.0.1 192.168.0.2 192.168.0.3"
printf "%s\n" $ActiveIPs > file.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T11:55:12.623

```
for ip in $ActiveIPs; do
    echo $ip >> file
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T11:45:55.683

Maybe too basic, but this works:

```
echo "ActiveIPs= 192.168.0.1 192.168.0.2 192.168.0.3" | cut -d= -f2 | awk '{for (i=1;i<=NF;i++) print $i}' 
```

Output:

```
192.168.0.1                                                                                                                                                                                                                                                                    
192.168.0.2                                                                                                                                                                                                                                                                    
192.168.0.3 
```

**To everyone**: is there a better way to print a new line between each field in `awk`? Tried with `OFS='\n'` but did not work.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T11:54:37.170

注意 - 在`\`命中换行符之后立即：

```
echo $ActiveIPs | sed 's/ /\
/g' 
```

# java - 如何访问jar文件中的另一个jar？

> ID：16103807
> 
> 赞同：0
> 
> 时间：2013-04-19T11:41:55.670
> 
> 标签：java, jar

我有一个 Java 项目说“JarProject”。

让我们描述一下项目结构：

```
JarProject
   -src          // first folder within "JarProject"
     -package1
      -mainProgram.java         // which has to execute myLocalJar.jar

   -Jar      // another folder within "JarProject"
     -myLocalJar.jar 
```

从上述结构中，“mainProgram.java”必须执行 myLocalJar.jar 文件，该文件位于“Jar”文件夹中。

如何访问项目中的“Jar”文件夹？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:52:02.380

如果它是一个可执行文件`.jar`，那么我建议你使用[`ProcessBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html).

# git - 强制我的本地主人成为原产地/主人

> ID：16103810
> 
> 赞同：41
> 
> 时间：2013-04-19T11:42:04.197
> 
> 标签：git, github, branch

我让 master 和 origin/master 被困在场边，并且不再对该分支上的更改感兴趣。

我按照这些说明让我的本地 master 指向正确的地方 [使当前的 git 分支成为 master 分支](https://stackoverflow.com/questions/2763006/change-the-current-branch-to-master-in-git)

```
 git checkout better_branch
 git merge --strategy=ours master    # keep the content of this branch, but record a merge
 git checkout master
 git merge better_branch             # fast-forward master up to the merge 
```

除了 git status 之外，它工作得很好

```
C:\data\localprojects\Beko2011Azure [master]> git status

# On branch master
# Your branch and 'origin/master' have diverged,
# and have 395 and 2 different commits each, respectively.
#
nothing to commit, working directory clean 
```

那么我现在如何说服origin/master（github）反映我的主人。任何在 origin/master 上孤立的东西都可以安全地丢弃。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-04-19T11:48:01.923

与`origin/master`以下内容相同`master`：

```
git push -f origin master:master 
```

参数讨论：

*   `-f`是**力**旗。通常，在允许推送到分支之前会应用一些检查。该`-f`标志关闭所有检查。

*   `origin`是要推送的遥控器的名称（您可以在一个 repo 中有多个遥控器）

*   `master:master`意思是：将我的本地分支推`master`送到远程分支`master`。一般形式是`localbranch:remotebranch`。当您想删除远程分支时，知道这一点特别方便：在这种情况下，您将一个空的本地分支推送到远程，从而将其删除：`git push origin :remote_branch_to_be_deleted`

可以找到更详细的参数描述[`man git-push`](https://www.kernel.org/pub/software/scm/git/docs/git-push.html)

* * *

**相反的方向：**如果您想丢弃所有更改`master`并希望它与以下内容完全相同`origin/master`：

```
git checkout master
git reset --hard origin/master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-09T04:42:30.083

如果`git checkout -B master origin/master`不适合您（当您这样做时，`git pull`您的本地`master`仍然停留在较旧的`origin/master`分支上），您可以尝试以下操作：

```
git remote prune origin

git pull 
```

它应该重置您的本地`master`以跟踪最新的`origin/master`.

# facebook - 当您从 Facebook 注销时，Facebook 应用程序仍将处于登录状态，如何？

> ID：16103811
> 
> 赞同：1
> 
> 时间：2013-04-19T11:42:12.013
> 
> 标签：facebook, api, codeigniter

我正在开发 facebook 应用程序，当我从 facebook 注销时遇到问题，我的 facebook 应用程序仍将登录。请任何人帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T12:30:05.860

这可能是因为您的应用程序的 Facebook 会话没有被破坏。您的应用程序的会话与 Facebook 的会话分开维护。您还可以在您的应用程序上添加注销按钮，以便您可以显式注销。

# android - In App Billing Item Unavailable 用户没有资格购买此项目

> ID：16103813
> 
> 赞同：0
> 
> 时间：2013-04-19T11:42:12.840
> 
> 标签：android, in-app-billing

我在进行inapp android购买时遇到问题。在开始时我面临一个问题

**应用程序错误**

![应用程序错误](https://i.stack.imgur.com/54vYw.png)

我在我的 Google Play 控制台上上传项目时解决了这个问题现在我遇到了另一个问题

**项目不可用**

![项目不可用](https://i.stack.imgur.com/mBDSB.png)

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T23:10:00.360

通过转到**设置 > 许可证测试 > 具有测试访问权限的 Gmail 帐户**并在那里添加您的电子邮件地址，将您用作测试员帐户的帐户添加到应用程序。

# css - 使用百分比来操作 div 的高度 jQuery Mobile

> ID：16103815
> 
> 赞同：2
> 
> 时间：2013-04-19T11:42:21.787
> 
> 标签：css, jquery-mobile

我想在 jQuery mobile 中创建一个内容页面，其中我在 jquery mobile 的内容区域中有 2 个 div 一个在另一个之上。问题是当屏幕尺寸发生变化时，下部 div 会位于上部 div 之上。我想要的是，当屏幕尺寸发生变化时，它会保持一个在另一个之上的相同 div 结构。我想知道我是否可以使用网格，但不确定网格是否适用于 1 列但 2 行？

我的代码如下：

**CSS**

```
 #songName {
    text-align:center;
    width: 100%;
    height: 20px;
}

#songPicture {
    text-align:center;
    width: 100%;
    height: 50%;
} 
```

**HTML**

```
<div data-role="content" style="height: 100%">
    <div id="songName"></div>
    <div id="songPicture"></div>
</div> 
```

请注意，div 的内容来自 JSON，虽然 id songName 是纯文本，但 id songPicture 内容如下所示：

```
<img src='"image url+"' style='position: absolute; left: 50%; margin-left: -128px; top: 50%; margin-top: -171px; width: 256px; height: 256px;' /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:36:42.233

`ui-grid-solo`为每个 div使用类。

```
<div class='ui-grid-solo'>
 Contents 
</div> 
```

**参考**：http: [//jquerymobile.com/demos/1.2.0-beta.1/docs/content/content-grids.html](http://jquerymobile.com/demos/1.2.0-beta.1/docs/content/content-grids.html)

# siebel - 需要一种在 Siebel 中设计浮动窗口的方法

> ID：16103820
> 
> 赞同：0
> 
> 时间：2013-04-19T11:42:48.787
> 
> 标签：siebel, escript

我正在使用 Siebel HTIM 应用程序 v8.0。

我需要一个浮动窗口，这不应该是一个弹出窗口。使用弹出窗口，无法编辑数据主窗口。用户应该能够在主窗口和浮动窗口中编辑数据，而无需关闭浮动窗口。并且主窗口和浮动窗口中的数据不是来自同一个BC。他们只是联系在一起。

我尝试`ShowPopup()`了方法，但这给了我一个弹出窗口。如果有人知道如何在 Siebel 应用程序中设计浮动窗口。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:23:16.623

据我所知，这在 Siebel 中甚至是不可能的。至少，不容易。

您可以添加到 Siebel 视图的唯一内容是小程序。在小程序中，您可以嵌入“高级”控件，如 ActiveX 对象、Java 小程序、外部网页……但它们不会具有浮动窗口的外观和行为。

通过服务器脚本，您可以打开弹出窗口、引发错误文本，仅此而已。在浏览器脚本中，您有更多选项（警报、确认等），但对您的要求没有任何用处。

也许你可以调整 webtemplate 文件并在那里插入你的浮动窗口 HTML 代码......并使用浏览器脚本来显示/隐藏/控制窗口。但是，您可能只有 HTML，您将无法向其中添加字段。此外，让它工作起来会很痛苦，而且从一开始就是维护的噩梦。

如果您使用的是 Siebel 8.1+，您可以尝试新的 OpenUI，而不是标准的 ActiveX 界面。它基于 CSS 和 jQuery，因此应该更容易调整外观。但它仅适用于 Siebel 8.1+。

你**真的**需要一个浮动窗口吗？为什么不只使用带有两个小程序的父子视图？

# sql - SQL 条件连接，数据继承

> ID：16103823
> 
> 赞同：0
> 
> 时间：2013-04-19T11:42:59.623
> 
> 标签：sql, join, conditional

我需要实现一个基于动态树的数据继承逻辑，固定深度为 3。

```
Output 1
--Output 1.1
--Output 1.2
----Ouptut 1.2.1
----Output 1.2.2
--Output 1.3
Ouput 2
-- Output 2.1
-- Output 2.2
-- etc. 
```

所以我有一个对象定义如下：

```
Object
-id
-createdAt 
```

以及附加到对象的数据

```
ObjectData
-owner_id (fk to the object)
-output_id (fk to the output)
-name (this is the real data) 
```

我想要做的是检索对象列表，内部加入基于 owner_id/ouput_id 的 ObjectData，但如果不存在具有给定 output_id 的 ObjectData，则加入父输出的 ObjectData。

目前，使用我的基本 SQL 查询，如果 object_data 没有具有给定输出的条目，则不会返回它，这就是 INNER JOIN 的工作原理。

```
SELECT c.*, d.name FROM object c
INNER JOIN object_data d ON c.id = d.owner_id AND d.ouput_id = ? 
```

我想要实现的是避免在完全继承数据时创建新的 object_data 条目，优化存储大小，并在添加新输出时避免大量插入。

我还必须能够对 object_data 字段进行查询。

谢谢 ！

编辑：感谢Gordon Linoff，我认为coalesce 是我的问题的解决方案，但根据mysql doc，coalesce 将返回第一个非空值。就我而言，如果该行存在，我想返回它的值，无论它是否为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:17:50.380

我想我明白你想要什么。以下 SQL 同时加入对象数据和父对象数据，然后在`select`语句中在它们之间进行选择：

```
select o.*, coalesce(od.name, od_parent.name)
from object o left outer join
     objectdata od_o
     on od_o.id = o.id left outer join
     objectdata od_parent
     on od_parent.id = o.parent_id 
```

这对数据库引擎来说似乎是不必要的努力。但是大多数引擎都针对将表连接在一起进行了高度优化，因此性能可能不是问题——特别是如果您在表上有正确的索引。

# c# - 如何同时将图像和串行端口添加到组合框？

> ID：16103824
> 
> 赞同：0
> 
> 时间：2013-04-19T11:43:00.133
> 
> 标签：c#, wpf, combobox

我使用此代码

```
foreach (string ports in System.IO.Ports.SerialPort.GetPortNames())
                cmbComPort.Items.Add(ports);
            cmbComPort.SelectedIndex = 2; 
```

为组合框添加串口。但我想用这样的串口名称同时添加图像：

![](https://i.stack.imgur.com/hrBt9.jpg).

我怎样才能做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:06:02.177

使用 ComboBox 的 ItemTemplate-Property 来设计您的 ComboBox-Items：

```
<ComboBox
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding}" /> 
                <Image Source="pack://application:,,,/Folder/PictureName.Format"
            </StackPanel >
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

# android - 打开sqlite数据库失败android

> ID：16103831
> 
> 赞同：1
> 
> 时间：2013-04-19T11:43:26.327
> 
> 标签：android, sqlite, database-design

我有几个要插入数据库的表，并为每个文件创建了单独的 java 类。我是 sqllite 的新手。SO有以下查询。请根据您的专业知识提供帮助

1）当我运行创建并打开数据库时，它会捕获异常，但是当我更改版本号时，它会正常运行。这个版本是什么意思？？

2）对于新表的每次创建，我是否必须增加版本？

3）另外，如果我必须为同一个数据库创建表，那么我必须在我创建的所有类中保持数据库名称、助手名称相同？

4）我可以删除一个版本，以便我可以重复使用它们吗？或者完全删除这个数据库？？这样我就可以从头开始重新创建所有内容？

5）最后我在哪里可以看到数据库文件？许多论坛建议它将位于 data/.. 文件夹中，但我的 data/.. 文件夹始终为空。

请分享您的专业知识和义务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T17:00:21.757

1) 版本号表示数据库的较新版本，即对其模式的修改。

2) 新表的创建改变了数据库模式，所以你应该增加版本。

4) 根据我的经验，您可以使用“adb uninstall your package”删除数据库，如果您有内容提供商，这将特别有用。卸载还会删除内容提供程序。如果您想从给定点重新启动并说将表添加到数据库并重新测试直到正确为止，您将执行 adb uninstall ...并将起始数据库的副本放在项目资产文件夹中，然后使用如果数据库不存在，则提供用于重新创建数据库的代码。

5) 您可以通过多种方式查看数据库文件。在我的 Windows 7 平台上使用过 2 个独立程序；SQLite 数据库浏览器 2.0 b1 和 sqlitestudio。如果你使用 eclipse 你并添加插件 SQLLIteManager，com.questoid.sqlitemanager_1.0.0.jar。

希望这可以帮助。

这是我的 dbhelper 的源代码，如果项目不存在，我会在其中复制项目的数据库。

```
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class TDAdbHelper extends SQLiteOpenHelper {

     private static String DATABASE_PATH;
 private static final String DATABASE_NAME = "tda.db";
 private static final int DATABASE_VERSION = 1;
 private Context context;
 private SQLiteDatabase db;

 TDAdbHelper(Context context) {
  super(context, DATABASE_NAME, null, DATABASE_VERSION);
  this.context = context;
  String packageName = context.getPackageName();
  DATABASE_PATH = String.format("//data//data//%s//databases//", packageName);
  Log.i(this.getClass().toString(), "... before calling openDatabase ");
openDataBase();
  Log.i(this.getClass().toString(), "... after return openDatabase ");
 }

 @Override
 public void onCreate(SQLiteDatabase db) {
     Log.i(this.getClass().toString(), "... Starting TDAdb.onCreate ");
  TDAdb.onCreate(db);
 }

 @Override
 public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
  TDAdb.onUpgrade(db, oldVersion, newVersion);
 }
 //Performing a database existence check
 private boolean checkDataBase() {
     Log.i(this.getClass().toString(), "... Starting checkDatabase ");
     SQLiteDatabase checkDb = null;
     try {
         String path = DATABASE_PATH + DATABASE_NAME;
         checkDb = SQLiteDatabase.openDatabase(path, null,
                       SQLiteDatabase.OPEN_READONLY);
     } catch (SQLException e) {
         Log.e(this.getClass().toString(), "Error while checking db");
     }
     //Android doesn’t like resource leaks, everything should 
     // be closed
     if (checkDb != null) {
         checkDb.close();
     }
     return checkDb != null;
 }

 //Method for copying the database
 private void copyDataBase() throws IOException {
     //Open a stream for reading from our ready-made database
     //The stream source is located in the assets
     Log.i(this.getClass().toString(), "... in copyDataBase ");
     InputStream externalDbStream = context.getAssets().open(DATABASE_NAME);

      //Path to the created empty database on your Android device
     String outFileName = DATABASE_PATH + DATABASE_NAME;

      //Now create a stream for writing the database byte by byte
     OutputStream localDbStream = new FileOutputStream(outFileName);

      //Copying the database
     byte[] buffer = new byte[1024];
     int bytesRead;
     while ((bytesRead = externalDbStream.read(buffer)) > 0) {
         localDbStream.write(buffer, 0, bytesRead);
     }
     //Don’t forget to close the streams
     localDbStream.close();
     externalDbStream.close();
 }
 //This piece of code will create a database if it’s not yet created
 public void createDataBase() {
     Log.i(this.getClass().toString(), "... in createDataBase ");
     boolean dbExist = checkDataBase();
     if (!dbExist) {
         this.getReadableDatabase();
         try {
             copyDataBase();
         } catch (IOException e) {
             Log.e(this.getClass().toString(), "Copying error");
             throw new Error("Error copying database!");
         }
     } else {
         Log.i(this.getClass().toString(), "Database already exists");
     }
 }

 public SQLiteDatabase openDataBase() throws SQLException {
     String path = DATABASE_PATH + DATABASE_NAME;
     Log.i(this.getClass().toString(), "Starting openDatabase " + path);
     if (db == null) {
        createDataBase();
        db = SQLiteDatabase.openDatabase(path, null,
             SQLiteDatabase.OPEN_READWRITE);
     }

     return db;  
}

} 
```

注意我在 db.java 中所做的修改

*

```
/*   private static final String DATABASE_CREATE =
      "CREATE TABLE if not exists " + CHAPTER_TABLE + " (" +
       KEY_ROWID + " integer PRIMARY KEY autoincrement," +
       COL_CHAPTER + "," +
       COL_CHAPTERTITLE + "," +
    //   KEY_CONTINENT + "," +
       " UNIQUE (" + COL_CHAPTER +"));"; */

     public static void onCreate(SQLiteDatabase db) {
          Log.i(LOG_TAG, "onCreate");
     }

     public static void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
      Log.w(LOG_TAG, "Upgrading database from version " + oldVersion + " to "
        + newVersion + ", which will destroy all old data");
      onCreate(db);
     }
} 
```

*

# jquery - 在 JQuery / CC 选择器的事件处理代码中获取属性值

> ID：16103833
> 
> 赞同：6
> 
> 时间：2013-04-19T11:43:29.737
> 
> 标签：jquery, css

我有一个带有一些简单事件处理的 JQuery 选择器。

```
jQuery('.ui-jqgrid-sdiv td[aria-describedby*="SUM"]').click(function(event) {alert('SUM=')}); 
```

现在，我想找到该`aria-describedby`属性的确切值。这可以说

```
SUM_1
SUM_2
SUM_3
SUM_4 
```

任何提示我如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T11:45:48.997

By using [**.attr()**](http://api.jquery.com/attr/) you can get it

try this

```
$('.ui-jqgrid-sdiv td[aria-describedby*="SUM"]').click(function(event){
   alert($(this).attr('aria-describedby'));
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T11:45:35.900

if you need that inside the click event then use `$(this)` and `.attr()`

try this

```
jQuery('.ui-jqgrid-sdiv td[aria-describedby*="SUM"]').click(function(event){
   alert($(this).attr('aria-describedby'));
}); 
```

# android - Android中的“堆”是什么意思？

> ID：16103837
> 
> 赞同：0
> 
> 时间：2013-04-19T11:43:37.280
> 
> 标签：android, android-emulator

有时我的应用程序在模拟器中崩溃，说堆内存太低。这个堆是什么意思？我的应用程序使用本地数据库和 ksoap 服务。堆问题并非每次都发生。背后的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T11:51:57.090

堆是内存管理器用来跟踪内存的。它由一个或多个未使用的内存区域以及所有已用内存块组成。

当堆变得太低时，这意味着没有足够的可用内存，因为应用程序试图使用比可用内存更多的内存。这可能有几个具体原因，例如：

*   您的应用程序使用了太多内存。

*   其他应用程序正在使用大量内存，而为您的应用程序留下的内存更少。

*   您的应用程序正在分配大块内存，但可用内存被分割成更小的块，因此无法使用。

尝试减少内存使用量，并确保正确释放不再使用的内存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T11:47:15.113

堆是您的应用程序在 RAM 中的 Dalvik 虚拟机中分配用于存储数据的空间量。

当您尝试加载太多东西以至于超出给您的堆空间时，您会遇到异常。

您可以通过仅加载您需要的内容来解决它，并在加载图像时缩小图像大小，这样您就不会加载比显示所需更大的尺寸。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T11:47:40.457

在编程中，为运行时（即程序实际执行时）创建的数据保留的内存区域。相反，堆栈是用于存储数据的内存区域，其大小可以在程序编译时确定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T11:53:52.833

所有对象的静态变量都存储在堆上。dalvik 虚拟机将为每个应用程序分配一定数量的堆空间。当堆大小增长并且您的应用程序需要内存时，垃圾收集器会启动以释放内存。当垃圾收集发生时，应用程序会暂停。堆大小越大，垃圾收集越频繁，这会增加暂停时间。

局部变量存储在堆栈中。

垃圾收集通过标记和清除工作。它使用标记和扫描算法来释放内存空间。

您可以使用 MAT Analyzer 来查找内存泄漏的原因。

检查下面的链接谈话是关于内存管理的

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)

编辑：

关于算法如何工作的更多信息

[http://www.brpreiss.com/books/opus5/html/page424.html](http://www.brpreiss.com/books/opus5/html/page424.html)

[Android垃圾收集器的技术细节](https://stackoverflow.com/questions/4818869/technical-details-of-android-garbage-collector)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T11:51:04.990

（`heap`在 Java 中）存储动态分配的`variables`，例如`objects`当堆内存不足时，`JVM`将运行垃圾收集。

`Garbage collection`使用处理周期，这会减慢您的手机速度。

如果您想知道，内存中存储东西的另一个地方称为堆栈，它存储参数和参数。

欲了解更多信息，请访问[此 SO 答案](https://stackoverflow.com/a/10679174/1405983)。

# count - 计算Lua的行数

> ID：16103840
> 
> 赞同：0
> 
> 时间：2013-04-19T11:43:46.113
> 
> 标签：count, lua

我正在做一个涉及文件读取的项目，我需要知道文件中的确切行数。有谁知道如何计算文件中的行数而不必读取整个文件？我的意思是在 Lua 中有一个内置函数吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T12:21:00.367

Lua 有内置的文件行迭代器。
很方便。
推荐使用。:-)

```
local ctr = 0
for _ in io.lines'filename.txt' do
  ctr = ctr + 1
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:23:25.560

没有内置功能。唯一的方法是读取整个文件，例如 Egor 的答案。

# android - 验证生日的日期选择器对话框

> ID：16103847
> 
> 赞同：3
> 
> 时间：2013-04-19T11:44:01.337
> 
> 标签：android

```
public void onClick(View view) {
    Calendar c = Calendar.getInstance();

    int cyear = c.get(Calendar.YEAR);
    int cmonth = c.get(Calendar.MONTH);
    int cday = c.get(Calendar.DAY_OF_MONTH);        
    DatePickerDialog dialog = new DatePickerDialog(Students.this,new OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {

            String date_selected = String.valueOf(dayOfMonth)+" /"+String.valueOf(monthOfYear+1)+" /"+String.valueOf(year);
            dateFieldTextBox.setText(date_selected);
            //                              CampusNewsISActivity.showLog("dateFieldTextBox selected");
        }
    },cyear,cmonth,cday);
    //          dialog.setCancelable(false);
    dialog.show();
} 
```

想要为 bday 验证 datepickerdialof，即。它不应该接受 1985 年 1 月 1 日之前的生日

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T05:57:33.743

```
package com.example.pickerdate;

import java.util.Calendar;

import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.DatePicker.OnDateChangedListener;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    private TextView mDateDisplay;
    private int mYear;
    private int year1;
    private int mMonth;
    private int mDay;
    private int month;
    private int day;
    static final int DATE_DIALOG_ID = 1;
    Button pickDate;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mDateDisplay = (TextView) findViewById(R.id.dateDisplay);
        pickDate = (Button) findViewById(R.id.pickDate);
        pickDate.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                System.out.println("hello3");
                showDialog(DATE_DIALOG_ID);

            }
        });

        System.out.println("hello1");
        final Calendar c = Calendar.getInstance();
        mYear = c.get(Calendar.YEAR);
        mMonth = c.get(Calendar.MONTH);
        mDay = c.get(Calendar.DAY_OF_MONTH);
        updateDisplay();
        year1 = mYear;
        month = mMonth;
        day = mDay;
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        DatePickerDialog _date = null;
        switch (id) {

        case DATE_DIALOG_ID:
            _date = new DatePickerDialog(this, mDateSetListener, mYear, mMonth,
                    mDay) {
                @Override
                public void onDateChanged(DatePicker view, int year,
                        int monthOfYear, int dayOfMonth) {
                    System.out.println("----------onDateChanged()-----------"
                            + mYear + "--" + year);
                    System.out.println("----------onDateChanged()-----------"
                            + mMonth + "--" + monthOfYear);
                    System.out.println("----------onDateChanged()-----------"
                            + mDay + "--" + dayOfMonth);

                    /*
                     * These lines of commented code used for only setting the
                     * maximum date on Date Picker..
                     * 
                     * if (year > mYear && year) view.updateDate(mYear, mMonth,
                     * mDay);
                     * 
                     * if (monthOfYear > mMonth && year == mYear )
                     * view.updateDate(mYear, mMonth, mDay);
                     * 
                     * if (dayOfMonth > mDay && year == mYear && monthOfYear ==
                     * mMonth) view.updateDate(mYear, mMonth, mDay);
                     */

                    // these below lines of code used for setting the maximum as
                    // well as minimum dates on Date Picker Dialog..

                    if ((mYear > year)
                            || ((mMonth > monthOfYear) && (mYear == year))
                            || ((mDay > dayOfMonth) && (mYear == year) && (mMonth == monthOfYear))) {
                        view.updateDate(year1, month, day);

                    }

                }
            };

        }
        System.out.println("hello5");
        return _date;
    }

    protected void onPrepareDialog(int id, Dialog dialog) {
        switch (id) {

        case DATE_DIALOG_ID:
            System.out.println("hello6");

            ((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);
            break;
        }
    }

    private void updateDisplay() {
        System.out.println("hello2");
        mDateDisplay.setText(new StringBuilder()
                // Month is 0 based so add 1
                .append(mMonth + 1).append("-").append(mDay).append("-")
                .append(mYear).append(" "));
    }

    private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            System.out.println("hello7");

            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;
            System.out.`enter code here`println("year=" + year);
            System.out.println("month=" + monthOfYear);
            System.out.println("day=" + dayOfMonth);
            updateDisplay();
        }
    };
} 
```

# javascript - 通过 CollectionView (Marionette / Backbone) 传递布局（和操作区域）

> ID：16103851
> 
> 赞同：4
> 
> 时间：2013-04-19T11:44:31.277
> 
> 标签：javascript, backbone.js, marionette, backbone-views

我正在尝试将布局传递给 CollectionView，然后操作其中的区域。

现在，我成功地将布局发送到 CollectionView （在它自己的区域中），如下所示：

```
main_layout.main_region.show(new CollectionView({
   itemView: ALayout,
   collection : someCollection
})); 
```

然后我可以看到布局正在渲染。但是，我想不出一种方法来修改（甚至触摸）“ALayout”中的区域。有没有办法做到这一点？最后，我试图获得一组“窗格”，其中每个窗格的布局都具有相同的区域，并以某种方式绘制这些区域。

此外，我最初只是将一个 ItemView 传递给 CollectionView，但我可以想办法将区域添加到该 ItemView 中。如果可能，我想在传递给它的文件中控制这些区域（无论是布局还是 ItemView）。

有人对这个有经验么？

* * *

**编辑：** 好的，所以我找到了使用 Marionette 附带的 Backbone.BabySitter 的提示——从这个文档中讨论了 CollectionView 的[孩子](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.collectionview.md#collectionviews-itemvieweventprefix)。所以现在我的代码看起来像这样。

```
var collectionViewToUse = new CollectionView({
    itemView: ALayout,
    collection : someCollection
});

main_layout.main_region.show(collectionViewToUse);

collectionViewToUse.children.each(function(view) {
  console.log(view);
  //This fails.
  view.regionManagers.someRegion.show('HHHHHH');
  //So does this, if I run it instead
  view.someRegion.show('Anything');
}); 
```

主干视图实例正在被记录，所以我想我在这里做点什么。谁能告诉我如何从这一步操作区域？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T12:33:40.157

好的，我想我有这个问题的答案。希望这对将来的其他人有所帮助！

答案是使用 BabySitter。您基本上实例化一个 CollectionView，然后使用 BabySitter 循环遍历它并对每个视图执行一些操作。因此，如果您将布局传递给它：

```
var collectionViewToUse = new CollectionView({
    itemView: ALayout,
    collection : someCollection
});

main_layout.main_region.show(collectionViewToUse);

collectionViewToUse.children.each(function(view) {
   view.someRegion.show(new SomeView({model : view.model });
}); 
```

因此，基本上，您可以将 Collection 视图传递给 Layout 而不是 ItemView，然后循环遍历“视图”并将新视图传递到区域中。

请评论任何改进，或者如果这对其他人有任何帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T08:26:09.027

通过将逻辑封装在集合本身内部而不是从外部修改它，我发现了对这种模式的轻微修改。

```
var collectionViewToUse = new CollectionView({
    itemView: ALayout,
    collection : someCollection,

    onBeforeItemAdded: function(view) {
        view.on('show', function() {

            view.someRegion.show(
                new SomeView({
                    model : view.model // view.model is model of Layout
                })
            );

        });
    }
});

main_layout.main_region.show(collectionViewToUse); 
```

所有发布的答案都受到`model`附加到模型的影响，`Layout`而模型只能传递给其中一个子视图。

# sql - 从带有逗号记录分隔符和冒号分隔的名称-值对的字符串中插入 SQL 行

> ID：16103852
> 
> 赞同：0
> 
> 时间：2013-04-19T11:44:35.317
> 
> 标签：sql, database, sql-server-2005

我们收到的数据格式如下：

```
'1:0,2:1,3:1,4:0' 
```

值用逗号分隔：冒号前的值为 studentId，冒号后为位值。

我想将这些值存储在临时表中：

```
studentID   |   BitValue
1           |    0
2           |    1
3           |    1
4           |    0 
```

如何在 SQL Server 2005 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:56:59.027

这适用于**MS SQL Server 2008**。

```
IF OBJECT_ID('tempdb..#TempTable') IS NOT NULL 
drop table #TempTable

create table #TempTable (studentID int, BitValue int)
declare @var nvarchar(max)
set @var='1:0,2:1,3:1,4:0'

set @var='insert into #TempTable values ('+REPLACE(REPLACE(@var,',','),('), ':', ',')+')'
exec (@var)

select * from #TempTable

drop table #TempTable 
```

对于**MS SQL Server 2005**，请尝试：

```
IF OBJECT_ID('tempdb..#TempTable') IS NOT NULL 
drop table #TempTable

create table #TempTable (studentID int, BitValue int)
declare @var nvarchar(max)
set @var='1:0,2:1,3:1,4:0'

--set @var=REPLACE(@var,',','),(')
set @var='insert into #TempTable values ('+REPLACE(REPLACE(@var,',','); insert into #TempTable values('), ':', ',')+')'
exec (@var)

select * from #TempTable

drop table #TempTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:09:41.610

尝试这个

```
DECLARE @param NVARCHAR(MAX)

SET @param = '1:0,2:1,3:1,4:0'

;WITH Split_Col 
AS
(
    SELECT CONVERT(XML,'<table><col>' + REPLACE(ColName,':', '</col><col>') + '</col></table>') AS xmlcol
    FROM
    (
        SELECT Split.a.value('.', 'VARCHAR(100)') AS ColName  
        FROM  
        (
             SELECT CAST ('<M>' + REPLACE(ColName, ',', '</M><M>') + '</M>' AS XML) AS ColName  
             FROM  (SELECT @param AS ColName) TableName
         ) AS A CROSS APPLY ColName.nodes ('/M') AS Split(a)
    ) TableName
)

 SELECT      
 xmlcol.value('/table[1]/col[1]','varchar(100)') AS studentID,    
 xmlcol.value('/table[1]/col[2]','varchar(100)') AS BitValue
 FROM Split_Col 
```

**编辑**

假设您的学生表有列 StudentId、Name。查找更新后的查询加入学生表

```
SELECT ST.Name,SP.studentID,SP.BitValue FROM 
(
  SELECT   
 xmlcol.value('/table[1]/col[1]','varchar(100)') AS studentID,    
 xmlcol.value('/table[1]/col[2]','varchar(100)') AS BitValue
 FROM Split_Col
) SP
INNER JOIN Student ST on SP.studentID = ST.studentID 
```

*   [**SQLFiddle 演示**](http://www.sqlfiddle.com/#!3/e7f95/1)

# java - Java中通过TCP Socket发送图像

> ID：16103856
> 
> 赞同：0
> 
> 时间：2013-04-19T11:44:58.460
> 
> 标签：java, sockets, tcpclient, tcpserver, tcpsocket

我正在尝试制作一个客户端服务器应用程序，其中服务器列出可用图像的名称，客户端选择其中一个进行下载，例如这里：

**服务器中的线程**

```
 public void run()
     {

          try {

            in = new DataInputStream (server.getInputStream());
            out = new DataOutputStream(server.getOutputStream());
            out.writeUTF("To List images write list");
            out.writeUTF("To Exit write 2");
            out.flush();
            while((line = in.readUTF()) != null && !line.equals("2")) {

                if(line.equalsIgnoreCase("list"))
                {
                    String [] images= processor.listImages();
                     for ( int i=0;i<images.length;i++) {
                         out.writeUTF((+1)+"-"+images[i]);
                         out.flush();
                         line = "";
                     }
                     out.writeUTF("-1");
                     line = in.readUTF();

                     if(line.equalsIgnoreCase("2"))
                     {
                         break;
                     }else
                     {
                                        BufferedImage img =processor.processInput(line);

                                        boolean cc = ImageIO.write(img,"JPG",server.getOutputStream());
                         if(!cc)
                         {
                                            out.writeUTF("The entered image is not avaliable !");
                         }else
                         {
                                             System.out.println("Image Sent");
                         }
                     }

                }else if(line.equalsIgnoreCase("2")){
                    break;
            }
            }
                try{
                    in.close();
                    out.close();
                    server.close();
                }catch(Exception e){
                     System.out.println("Error : "+ e.getMessage());
                }

          } catch (IOException e) {
            System.out.println("IOException on socket listen: " + e.getMessage());
          }

     } 
```

**客户 ：**

```
public void start() throws IOException
    {
        String line="";

                while(true)
                {
                    try{

                       line = inputFromStream.readUTF(); 
                       System.out.println(line);
                       line = inputFromStream.readUTF(); 
                       System.out.println(line);
                       line = readFromConsol.readLine();

                       writeToStream.writeUTF(line);

                       if(line.equalsIgnoreCase("2")){
                           break;
                       }else if(line.equalsIgnoreCase("list")){
                           boolean check=true;
                           while(check){
                               line = inputFromStream.readUTF();
                               System.out.println(line);
                               if("-1".equals(line)) {
                                   check=false;
                               }
                           }
                           line = readFromConsol.readLine(); 
                           if(line.equalsIgnoreCase("2")) {
                               break;
                           }else
                           {
                             writeToStream.writeUTF(line);
                            BufferedImage img=ImageIO.read(
                                    ImageIO.createImageInputStream(client.getInputStream()));
                            File f = new File("E:/MyFile.png");
                            f.createNewFile();
                            ImageIO.write(img, "PNG", f);
                             //process.saveImage(tmp);
                            System.out.println("Saved");
                           }

                       }
                    }catch(Exception e)
                    {
                        System.out.println(e);
                     break;
                    }
                }
                try{
                    inputFromStream.close();
                    readFromConsol.close();
                    writeToStream.close();
                    this.client.close();
                }catch(Exception e){
                    System.out.println("Error : "+e.getMessage());
                }
    } 
```

问题是所有命令都成功提交，直到图像接收图像停止在那里不动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-06T13:54:23.197

尝试在发送套接字上刷新外流，然后关闭套接字。

问题似乎是，在套接字被刷新并关闭之前，接收`IOImage.read()`将等待认为流中有更多图像。

# c# - 使用自定义参数选择构建 LambdaExpression

> ID：16103857
> 
> 赞同：1
> 
> 时间：2013-04-19T11:45:02.693
> 
> 标签：c#, lambda, expression-trees, iqueryable

我的扩展方法的完整定义首先出现。

```
static IQueryable<TResult> WithTicketNumbers<T, TResult>(
    this IQueryable<T> q,
    Expression<Func<T, Ticket>> ticketSelector,
    Expression<Func<T, string, TResult>> resultSelector,
    int digitsCount) 
```

我有这个`IQueryable<T> q`序列，这是扩展的目标。

`q`此方法通过以下方式获取票证`ticketSelector`：

```
var tickets = q.Select(ticketSelector); 
```

接下来，也是该方法的主要目标，是`string`从类中获取一些 -linq-supported-info`Ticket`并将两者`Ticket`和`string`info 投影到序列旁边：

```
var tickets2 = tickets.Select(W => new { Ticket = W, Info = W.Name + "123"}); 
```

最后，我希望我的方法返回一个`IQueryable`将选择用户想要的内容`resultSelector`。这个结果选择器同时选择票证和信息参数，并产生用户希望它产生的结果。我有点坚持`Expression`上课来创造适当的表达。

到目前为止，我得到了我的两个参数：

```
ParameterExpression tParameter = Expression.Parameter(typeof(T));
ParameterExpression stringParameter = Expression.Parameter(typeof(string)); 
```

另外，我认为，最终的 lambda：

```
Expression<Func<T, string, TResult>> lambda =
    Expression.Lambda<Func<T, string, TResult>>
    (/* ? */, tParameter, stringParameter); 
```

但是，我无法弄清楚身体。

我可以`Expression.Property`通过反射获得两个属性`Ticket`和`Info`，但是需要一个类型，并且我在那里有匿名类型，在`tickets2`.

接下来，（我猜）我需要在`lambda`内部使用它`tickets2`来生成方法 result `IQueryable<TResult>`。

那么我应该如何构建最终表达式呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:58:43.803

我不确定你想要什么 - 但这至少可以帮助你开始（也检查其他答案，建议 - 即`dynamic linq`）
（我仍然建议你使用适当的工具 - [http://nuget .org/packages/DynamicLINQ/](http://nuget.org/packages/DynamicLINQ/) )

> 这是我之前做过的一篇文章（更多的是练习）：
> [Converting List<string> to EntityFramework column/field list](https://stackoverflow.com/questions/15922548/converting-liststring-to-entityframework-column-field-list/15990676#15990676)

它所做的是基于字符串构造表达式 - 对于`Select`. 你可以像...一样使用它

```
public static IEnumerable<object> 
    SelectAsEnumerable(this IQueryable entitySet, params string[] propertyPath)
{
    return entitySet.SelectDynamic(propertyPath) as IEnumerable<object>;
}
var list = db.YourEntity.SelectAsEnumerable("Name", "ID", "TestProperty.ID").ToList(); 
```

你需要做更多的工作才能得到你想要的——例如添加更好`parsing`和更多的功能等（这也适用于`Select`——不是`OrderBy`等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T14:40:54.730

解决了：

```
/// <summary>
/// Returns a queryable sequence of TResult elements which is composed through specified property evaluation.
/// </summary>
public static IQueryable<TResult> WithInfo<TItem, TProperty, TResult>(this IQueryable<TItem> q, Expression<Func<TItem, TProperty>> propertySelector, Expression<Func<TItem, TProperty, TResult>> resultSelector)
{
    ParameterExpression param = Expression.Parameter(typeof(TItem));
    InvocationExpression prop = Expression.Invoke(propertySelector, param);

    var lambda = Expression.Lambda<Func<TItem, TResult>>(Expression.Invoke(resultSelector, param, prop), param);
    return q.Select(lambda);
} 
```

# c# - 无法执行“向 Sitecore 内容编辑器功能区添加按钮以调试任何数据库中的任何项目”

> ID：16103862
> 
> 赞同：1
> 
> 时间：2013-04-19T11:45:19.250
> 
> 标签：c#, asp.net, debugging, sitecore, sitecore6

我尝试创建一个调试按钮，如下所示，参考底部的[链接#3](http://books.google.co.in/books?id=MsBa3LXXYY0C&pg=SA4-PA124&lpg=SA4-PA124&dq=sitecore+john+west+Sitecore.Shell.Framework.Commands.System.Debug&source=bl&ots=lmdT-S1Slt&sig=FrEnDhP8S2__0m6bKIHlyMkBEuk&hl=en&sa=X&ei=ZiFxUeGRL4GTrgejkIGIBA&ved=0CC4Q6AEwAA#v=onepage&q=sitecore%20john%20west%20Sitecore.Shell.Framework.Commands.System.Debug&f=false)，我已经编译并配置了核心数据库中的按钮并配置了 Commands.config，但是当我单击时，我在主数据库上收到错误消息功能区和 sitecore 管理客户端已重新启动。我没有得到错误消息指向的内容..！

## 功能区按钮屏幕

![在调试器中打开](https://i.stack.imgur.com/XcEba.png)

## 错误消息文本

> 控制“系统”在表单上不存在。在 Sitecore.Shell.Framework.Commands.CommandManager.GetMethodCommand(String command) 在 Sitecore.Shell.Framework.Commands.CommandManager.GetDispatchCommand(String command) 在 Sitecore.Web.UI.Sheer.ClientPage.Dispatch(String command) 在 Sitecore .Web.UI.Sheer.ClientPage.RaiseEvent() 在 Sitecore.Web.UI.Sheer.ClientPage.OnPreRender(EventArgs e)

## 错误信息屏幕

![错误信息屏幕](https://i.stack.imgur.com/VYPdy.png)

[底部提到的链接#2](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2013/04/Add-Debug-Command-to-Content-Editor-in-the-Sitecore-ASPNET-CMS.aspx)的另一件事似乎不包含 John 在[此处的博客文章](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/11/Add-a-Button-to-the-Sitecore-Content-Editor-Ribbon-to-Debug-Any-Item-in-Any-Database.aspx)中所说的“资源部分中可用的原型 zip” .. 任何人都可以看到如果我没记错吗？

PS：[链接#1](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/11/Add-a-Button-to-the-Sitecore-Content-Editor-Ribbon-to-Debug-Any-Item-in-Any-Database.aspx)是[链接#2的旧帖子](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2013/04/Add-Debug-Command-to-Content-Editor-in-the-Sitecore-ASPNET-CMS.aspx)

## Debug.cs 代码

```
using System;

namespace SitecoreDemo.Shell.Framework.Commands.System
{
    [Serializable]
    // implements the debug command on the Sitecore menu of the desktop
    // and in the ribbon of the Content Editor
    public class Debug : Sitecore.Shell.Framework.Commands.System.Debug
    {
        public override void Execute(Sitecore.Shell.Framework.Commands.CommandContext context)
        {
            // validate arguments and processing context
            Sitecore.Diagnostics.Assert.ArgumentNotNull(context, "context");
            Sitecore.Diagnostics.Assert.IsNotNull(Sitecore.Context.ClientPage, "ClientPage");
            Sitecore.Diagnostics.Assert.IsNotNull(Sitecore.Context.ClientPage, "ClientResponse");

            // ensure the new browser window authenticates as the current CMS user
            // (in case the user formerly previewed as another user)
            Sitecore.Publishing.PreviewManager.RestoreUser();

            // open the new browser window
            Sitecore.Web.UI.Sheer.SheerResponse.Eval("window.open('" + this.GetDebuggingUrl(context) + "', '_blank');");
        }

        // construct a URL to launch the debugger
        private string GetDebuggingUrl(Sitecore.Shell.Framework.Commands.CommandContext context)
        {
            // whether to use the sc_lang query string parameter to specify the language
            bool includeLanguage = Sitecore.Links.LinkManager.LanguageEmbedding != Sitecore.Links.LanguageEmbedding.Never;

            // URL of the debugging window defaults to home page of managed site
            Sitecore.Text.UrlString url = new Sitecore.Text.UrlString("/");

            // enable all debugging options
            url.Add("sc_debug", "1"); // enable the debugger
            url.Add("sc_prof", "1"); // enable profiling
            url.Add("sc_trace", "1"); // enable tracing
            url.Add("sc_ri", "1"); // enable rendering information

            // if the user has selected an item, ensure they have saved,
            // then debug the item in the database and language associated with that item
            if (context != null && context.Items != null && context.Items.Length > 0 && context.Items[0] != null)
            {
                Sitecore.Context.ClientPage.ClientResponse.CheckModified(false);

                Sitecore.Data.Items.Item item = context.Items[0];
                url.Add("sc_database", item.Database.Name);
                url.Add("sc_itemid", item.ID.ToString());

                if (includeLanguage)
                {
                    url.Add("sc_lang", item.ID.ToString());
                }
            }

            // if the user has not selected an item,
            // if there is a content database, debug that database
            // using the content language
            else if (Sitecore.Context.ContentDatabase != null)
            {
                url.Add("sc_database", Sitecore.Context.ContentDatabase.Name);
                if (includeLanguage)
                {
                    url.Add("sc_lang", Sitecore.Context.ContentLanguage.Name);
                }
            }

            // return a URL to open the debugger
            return url.GetUrl();
        }

        public override Sitecore.Shell.Framework.Commands.CommandState QueryState(Sitecore.Shell.Framework.Commands.CommandContext context)
        {
            // if the user has selected at least one item
            if (context.Items != null && context.Items.Length > 0 && context.Items[0] != null)
            {
                // if that item does not specify a layout for any device, disable this command
                if (!this.HasLayoutForAnyDevice(context.Items[0]))
                {
                    return Sitecore.Shell.Framework.Commands.CommandState.Disabled;
                }
            }
            return base.QueryState(context);
        }

        // returns true if the item specifies a layout for any device
        protected bool HasLayoutForAnyDevice(Sitecore.Data.Items.Item item)
        {
            Sitecore.Diagnostics.Assert.IsNotNull(item, "item");

            // evaluate each device in the database containing the item
            foreach (Sitecore.Data.Items.DeviceItem compare in item.Database.Resources.Devices.GetAll())
            {
                // if the item specifies layout details for that device, return true
                if (item.Visualization.GetLayout(compare) != null)
                {
                    return true;
                }
            }

            // layout details for the item do not specify a layout for any device
            return false;
        }
    }
} 
```

## 参考链接：

1.  [向 Sitecore 内容编辑器功能区添加一个按钮以调试任何数据库中的任何项目](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/11/Add-a-Button-to-the-Sitecore-Content-Editor-Ribbon-to-Debug-Any-Item-in-Any-Database.aspx)
2.  [更新：将调试命令添加到 Sitecore ASP.NET CMS 中的内容编辑器](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2013/04/Add-Debug-Command-to-Content-Editor-in-the-Sitecore-ASPNET-CMS.aspx)
3.  [专业 Sitecore 开发 - Google 图书](http://books.google.co.in/books?id=MsBa3LXXYY0C&pg=SA4-PA124&lpg=SA4-PA124&dq=sitecore+john+west+Sitecore.Shell.Framework.Commands.System.Debug&source=bl&ots=lmdT-S1Slt&sig=FrEnDhP8S2__0m6bKIHlyMkBEuk&hl=en&sa=X&ei=ZiFxUeGRL4GTrgejkIGIBA&ved=0CC4Q6AEwAA#v=onepage&q=sitecore%20john%20west%20Sitecore.Shell.Framework.Commands.System.Debug&f=false)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:55:10.317

原型链接有一个 zip 文件并包含 Debug.cs 文件。下面的代码

```
using System;

namespace Sitecore.Sharedsource.Shell.Framework.Commands.System
{
  [Serializable]
  public class Debug : Sitecore.Shell.Framework.Commands.Command
  {
    public override void Execute(
      Sitecore.Shell.Framework.Commands.CommandContext context)
    {
      Context.ClientPage.ClientResponse.CheckModified(false);
      Sitecore.Data.Database contentDatabase = Context.ContentDatabase;

      if ((context.Items != null) && (context.Items.Length == 1))
      {
        Sitecore.Data.Database database = context.Items[0].Database;
      }

      Sitecore.Text.UrlString webSiteUrl = 
        Sitecore.Sites.SiteContext.GetWebSiteUrl();
      webSiteUrl.Add("sc_debug", "1");

      if ((context.Items != null) && (context.Items.Length == 1))
      {
        Sitecore.Data.Items.Item item = context.Items[0];

        if (item.Visualization.Layout != null)
        {
          webSiteUrl.Add("sc_itemid", item.ID.ToString());
        }

        webSiteUrl.Add("sc_lang", item.Language.ToString());
      }

      if (contentDatabase != null)
      {
        webSiteUrl.Add("sc_database", contentDatabase.Name);
      }

      webSiteUrl.Add("sc_prof", "1");
      webSiteUrl.Add("sc_trace", "1");
      webSiteUrl.Add("sc_ri", "1");
      Context.ClientPage.ClientResponse.Eval(
        "window.open('" + webSiteUrl + "', '_blank')");
    }
  }
} 
```

让我知道此代码是否对您有帮助，如果我找到更多信息会回复您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:00:21.353

博客文章[更新：在 Sitecore ASP.NET CMS 中将调试命令添加到内容编辑器中](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2013/04/Add-Debug-Command-to-Content-Editor-in-the-Sitecore-ASPNET-CMS.aspx)提供的解决方案原型解决[了](http://www.sitecore.net/~/media/Community/Technical%20Blogs/West%20blog/2013/Apr2013/DebugCommandCode.ashx "下载解决方案原型 zip")我的问题，我在命令中配置了自己的类文件，并将文件从指定的文件夹位置复制在帖子中（也在下面提到），它现在正在工作。`Debug.cs``Debug.item``solution prototype zip`

![出于我的目的，将“调试项目”菜单添加到上下文项目中](https://i.stack.imgur.com/Ak4V4.png)

对于将来的参考，请查看博客文章中显示的步骤，以配置对我有帮助的解决方案原型。

使用序列化文件创建命令定义项：

1.  [将 Debug.item 文件从本](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2013/04/Add-Debug-Command-to-Content-Editor-in-the-Sitecore-ASPNET-CMS.aspx)博 文末尾的资源部分中提供的原型 zip 复制到`/data/serialization/core/sitecore/content/Applications/Content Editor/Ribbons/Chunks/Publish`您的 Sitecore 解决方案的子目录，该`/data`文件夹通常是该文件夹的同级 `Website`文件夹。
2.  以管理员身份登录 Sitecore 桌面。
3.  单击右下角的数据库图标，然后从出现的菜单中选择 Core（如 Sitecore Client Configuration Cookbook 中所述）。
4.  打开内容编辑器，导航到 `/sitecore/content/Applications/Content Editor/Ribbons/Chunks/Publish` 项目（将该路径复制到剪贴板，将其粘贴到内容树上方的搜索框中，按 Enter，选择第一个结果）。
5.  在 Developer 选项卡上的 Serialize 组中，单击 Revert Tree。如果您右键单击`/sitecore/content/Applications/Content Editor/Ribbons/Chunks/Publish`内容树中的项目，然后从出现的子菜单中单击刷新，则应该会出现一个新的调试项目。
6.  请记住使用数据库图标来选择主数据库。

*PS：但是，当我自己在核心数据库的内容编辑器中创建调试项目时，它不起作用，不知道为什么。*

# jquery - 如果突出显示文本，则 JQuery 禁用按键代码

> ID：16103865
> 
> 赞同：1
> 
> 时间：2013-04-19T11:45:23.643
> 
> 标签：jquery, keyboard-events

我有这个代码，所以当用户按下键盘上的一个键时，它会重定向到页面。有很多，但这里有一个想法：

```
$('body').bind('keyup', function(event) {
    if ( $("*:focus").is("textarea, input") ) return;
    if(event.keyCode==66){ window.location = "page1.php"; }
    if(event.keyCode==71){ window.location = "page2.php"; }
    }); 
```

我想要做的是让它在它们突出显示文本时不会重定向（如复制/粘贴/其他）。当他们想要复制文本时会触发 C 按键重定向，这很烦人。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T22:24:49.070

你可以检查是否`event.ctrlKey`是真的。它将指示用户在按键时是否按住控制键。

[jsFiddle 演示](http://jsfiddle.net/sHHNN/)

# java - Open Perspective in background from Eclipse Plugin

> ID：16103866
> 
> 赞同：2
> 
> 时间：2013-04-19T11:45:24.183
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp, perspective

I hava a piece of Code, that can only be executed, when a given perspective is already loaded/open.

I can use `PlatformUI.getWorkbench().showPerspective("perspectiveID",PlatformUI.getWorkbench().getActiveWorkbenchWindow());` (from a Gui-Thread) to forcefully show the Perspective, but that is not good manner.

I want to show a similiar Dialog to the "Do you want to open the Debug-Perspective now", but with the difference, that i allways *open* the Perspective, but only *bring it to the front*, if the user wishes to.

For completeness: This is the result of a user-context-menu click and the user might not know, what has happened to him when i change the perspective without him knowing. (The RCP-Application did not made use of perspectives before)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:23:50.460

与其投入大量精力处理尴尬的用户交互，不如投入精力修复代码只能在打开某个视角时运行的错误。

Eclipse 中没有“打开一个透视图，但不把它放在前面”的概念。

# solr - Solr：如何使用 Java API 获取分组查询的结果总数

> ID：16103868
> 
> 赞同：5
> 
> 时间：2013-04-19T11:45:35.677
> 
> 标签：solr, grouping

我有以下内容：

在 Solr 中索引的 43 个文档

如果我使用 Java API 进行没有任何分组的查询，例如：

```
SolrQuery query = new SolrQuery("*:*");
query.setRows(10); 
```

然后我可以获得匹配元素的总数，如下所示：

```
solrServer.query(query).getResults().getNumFound(); //43 in this case 
```

该`getResults()`方法返回一个`SolrDocumentList`包含该值的实例。

但是，如果我使用分组，例如：

```
query.set("group", "true");
query.set("group.format", "simple");
query.set("group.field", "someField"); 
```

然后上面用于检索查询结果的代码没有记录器工作（抛出 NPE），我必须改用：

```
List<GroupCommand> groupCommands = solrServer.query(query).getGroupResponse().getValues();
List<Group> groups = groupCommand.getValues();
Group group = groups.get(groupIndex); 
```

我不明白如何使用这部分 API 来获取匹配文档的总数（上面非分组查询中的 43 个）。首先我认为分组不再可能得到它，但我注意到如果我在 Solr 管理控制台中执行类似的查询，使用相同的分组和所有内容，它返回与 Java API 完全相同的结果*和也* `numFound=43`。所以很明显，即使在使用分组时，用于控制台的代码也有一些方法可以检索该值：

![在此处输入图像描述](https://i.stack.imgur.com/qMUj0.png)

我的问题是，如何使用通过 Solr Java API 执行的分组来获得匹配文档的总数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T17:17:29.033

在查看从您的调用返回的[Group](http://svn.apache.org/viewvc/lucene/dev/branches/lucene_solr_4_2/solr/solrj/src/java/org/apache/solr/client/solrj/response/Group.java?view=markup)`groups.get(groupIndex)`的源时，它有一个返回[SolrDocumentList](http://svn.apache.org/viewvc/lucene/dev/branches/lucene_solr_4_2/solr/solrj/src/java/org/apache/solr/common/SolrDocumentList.java?view=markup)的 getResults() 方法。SolrDocumentList 有一个 getNumFound() 方法应该返回总数，我相信......

所以你应该能够得到这个如下：

```
 int numFound = group.getResults().getNumFound(); 
```

希望这可以帮助。

**更新：**我相信正如 OP 所说， group.getResults().getNumFound() 只会返回组中的项目数。但是，在[GroupCommand](http://svn.apache.org/viewvc/lucene/dev/branches/lucene_solr_4_2/solr/solrj/src/java/org/apache/solr/client/solrj/response/GroupCommand.java?view=markup)上有一个 getMatches() 方法，它可能是所需的相应计数。

```
 int matches = groupCommands.getMatches(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-24T20:30:48.707

如果将 ngroups 参数设置为 true（默认为 false），这将返回组数。

例如：

`solrQuery.set("group.ngroups", true);`

[https://cwiki.apache.org/confluence/display/solr/Result+Grouping](https://cwiki.apache.org/confluence/display/solr/Result+Grouping)

然后可以从您的响应 GroupCommand 中检索到：

`int numGroups = tempGroup.getNGroups();`

至少那是我的理解？

# java - Java Swing client server synchronization and not reinventing the wheel to keep consistency

> ID：16103871
> 
> 赞同：0
> 
> 时间：2013-04-19T11:45:38.427
> 
> 标签：java, synchronization

I need to implement a proof of concept application Swing application where there's a server having a list of users and several clients which connect to the server and do CRUD operations on the database and hence on the list of users.

![client application example](https://i.stack.imgur.com/RW6M4.png)

I have an obvious synchronization dilemma of keeping all clients lists updated so that if one client removed a user another one who still has it in his list cannot change its name. Now I know a protocol in which before updating a user the client asks the server whether it still exists would work.

However this is just a simple example but in the real application I might have junction tables and complex references between objects which need always to be kept consistent and I don't want to reinvent the wheel.

What I'm wondering if there's some ready made solutions or some library which does this job which doesn't require me to change database or load extremely complex dependencies.

I did some research on Google but nothing seems to fit and the most similar example of client server synchronization I found was "chat programs", however chat programs are inherently simple because a message is never modified or deleted and all you have to keep consistent is the chronological order. I would need something more involved than that or some useful hints on the subject.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:12:42.140

您需要的是服务器和客户端之间的某种消息传递。客户端要么长轮询服务器，请求更新，要么订阅服务器上的某些流媒体端点。

您可以查看[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)模型、长轮询本身、[websockets](http://en.wikipedia.org/wiki/WebSocket)等。

或者 - 有几个数据管理服务 - [BlazeDS](http://livedocs.adobe.com/blazeds/1/blazeds_devguide/index.html)、[GraniteDS](http://www.graniteds.org/confluence/pages/viewpage.action?pageId=16875660)或任何类似目的的解决方案。您可以将其中之一集成到您的应用程序中并用于完整的数据管理周期。

# linux-kernel - Linux driver DMA transfer to a PCIe card with PC as master

> ID：16103872
> 
> 赞同：8
> 
> 时间：2013-04-19T11:45:41.610
> 
> 标签：linux-kernel, linux-device-driver, fpga, dma, pci-e

I am working on a DMA routine to transfer data from PC to a FPGA on a PCIe card. I read DMA-API.txt and LDD3 ch. 15 for details. However, I could not figure out how to do a DMA transfer from PC to a consistent block of iomem on the PCIe card. The dad sample for PCI in LDD3 maps a buffer and then **tells the card** to do the DMA transfer, but I need the PC to do this.

What I already found out:

1.  Request bus master

    ```
    pci_set_master(pdev); 
    ```

2.  Set the DMA mask

    ```
    if (dma_set_mask(&(pdev->dev), DMA_BIT_MASK(32))) {
        dev_err(&pdev->dev,"No suitable DMA available.\n");
        goto cleanup;
    } 
    ```

3.  Request a DMA channel

    ```
    if (request_dma(dmachannel, DRIVER_NAME)) {
        dev_err(&pdev->dev,"Could not reserve DMA channel %d.\n", dmachannel);
        goto cleanup;
    } 
    ```

4.  Map a buffer for DMA transfer

    ```
    dma_handle = pci_map_single(pci_dev, buffer, count, DMA_TO_DEVICE); 
    ```

**Question:**

What do I have to do in order to let the **PC** perform the DMA transfer instead of the card?

Thank your for your help!

* * *

First of all thank you for your replies. Maybe I should put my questions more precisely:

1.  In my understanding the PC has to have a DMA controller. How do I access this DMA controller to start a transfer to a memory mapped IO region in the PCIe card?
2.  Our specification demands that the PC's DMA controller initiates the transfer. However, I could only find examples where the device would do the DMA job (DMA_mapping.txt, LDD3 ch.15). Is there a reason, why nobody uses the PC's DMA controller (It still has DMA channels though)? Would it be better to request a specification change for our project?

Thanks for your patience.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:25:18.583

Look up DMA_mapping.txt. There's a long section in there that tells you how to set the direction ('DMA direction', line 408).

**EDIT**

Ok, since you edited your question... your specification is wrong. You *could* set up the system DMA controller, but it would be pointless, because it's too slow, as I said in the comments. Read [this thread](http://www.pcisig.com/reflector/msg01281.html).

You must change your FPGA to support bus mastering. I do this for a living - contact me off-thread if you want to sub-contract.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:48:44.113

What you are talking about is not really a DMA. The DMA is when your device is accessing memory and the CPU itself is not involved (with an exception of PC's memory controller, which is usually embedded into the PC's CPU these days). Not all devices can do it, and if you are using FPGA, then you surely need some sort of DMA controller in your design (i.e. [Expresso DMA Core](http://nwlogic.com/products/docs/Expresso_DMA_Core.pdf) or alike). In your case, you just have to write to the mapped memory region (i.e. one that you obtain with `ioremap_nocache`) using `iowrite` calls (i.e. `iowrite32`) followed by write memory barriers `wmb()`. What I/O bar and address you have to write to entirely depends on your device.

Hope it helps. Good Luck!

# objective-c - NSSegmentedControl remove blue highlight - just make it pressing state

> ID：16103873
> 
> 赞同：0
> 
> 时间：2013-04-19T11:45:44.687
> 
> 标签：objective-c, macos

How to remove blue highlight from NSSegmentedControl (which is currently in NSToolBar as item) so I make it work like NSPopupButton with pressed state. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:06:25.873

感谢活动的家伙。我应该从我是 macOS 开发的新手开始我的问题，所以这很容易 - 只需更改 NSSegmentedControl 的样式。

# jquery - jQuery appendTo 不追加

> ID：16103875
> 
> 赞同：-1
> 
> 时间：2013-04-19T11:45:46.000
> 
> 标签：jquery, html

这是我的 HTML：

```
<table id="ParamTbl">
<tbody>
    <tr id="ParamRow">
        <td><label for="paramname[]">Name: </label><input type="text" name="paramname[]" class="paramname"></td>
        <td><label for="paramval[]">Value: </label><input type="text" name="paramval[]"></td>
        <td><label for="paramtype[]">Type: </label><select name="paramtype[]">
                <option selected="true">String</option>
                <option>Double</option>
                <option>Object</option>
            </select></td>
        <td><div id="clrList">X</div></td>
        <td><div id="addrow">Add Param</div></td>
    </tr>
</tbody>
</table> 
```

这是我的 jQuery：

```
function addParam(ParamName){
    $('#ParamTbl').css('background-color','yellow');
    var clone = $('#ParamTbl').closest("tr").clone();
    clone.appendTo('#ParamTbl').find(":input").val(ParamName);
    $('#ParamTbl').closest("td").remove();
} 
```

`css('background-color','yellow');`是出于调试目的，我也有几个`alerts()`，函数调用ok，ParamName交给它ok。所以，问题是：为什么我的行没有附加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:50:23.143

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

`Description: For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.`

请尝试`find`：

`var clone = $('#ParamTbl').find("tr:first").clone();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:53:27.967

彻底的重新设计

HTML

```
<table id="ParamTbl">
    <tbody>
        <tr>
            <td><label for="paramname[]">Name: </label><input type="text" name="paramname[]" class="paramname"/></td>
            <td><label for="paramval[]">Value: </label><input type="text" name="paramval[]"/></td>
            <td><label for="paramtype[]">Type: </label><select name="paramtype[]">
                <option selected="true">String</option>
                <option>Double</option>
                <option>Object</option>
                </select></td>
            <td><div class="clrList">X</div></td>
            <td><div class="addrow">Add Param</div></td>
        </tr>
    </tbody>
</table> 
```

JS

```
$(function(){
    var $table = $('#ParamTbl');

    $('#ParamTbl').on('click', '.addrow', function(){
        $table.css('background-color','yellow');

        var tr = $(this).closest('tr');

        var clone = tr.clone();
        clone.appendTo($table).find('input[name="paramval[]"]').val('');
        $(this).remove();
    })

    $('#ParamTbl').on('click', '.clrList', function(){
        $(this).closest('tr').remove()
    })
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/zTFqv/6/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T11:49:33.137

Try changing:

```
var clone = $('#ParamTbl').closest("tr").clone(); 
```

to:

```
var clone = $('#ParamTbl').find("tr#ParamRow").clone(); 
```

since [closest()](http://api.jquery.com/closest/) traversing up through its ancestors in the DOM tree.

# c# - ASP.Net Linq 获取列名和数据

> ID：16103880
> 
> 赞同：1
> 
> 时间：2013-04-19T11:45:55.990
> 
> 标签：c#, asp.net, linq, entity-framework

我正在尝试创建一个系统如下 -

1.  UI 层 - 带有用于过滤要显示的数据的选项的下拉菜单

2.  中间层——“.cs”类来操作数据

3.  后层 - 在这里数据被过滤并返回到类（EDMX 文件和类）

但是我的实现不起作用......错误显示为“不同上下文的参考”..

```
protected void Page_Load(object sender, EventArgs e)
{
    inc = (IQueryable<Incident_Raw_Data>)Session["INC"];
    AppInfo = (IQueryable<Application_Info>)DbData.GetDBData().AppInfo;
    RespConfg = (IQueryable<Response_Config>)DbData.GetDBData().RespConfig;
    ResolConfg = (IQueryable<Resolution_Config>)DbData.GetDBData().ResolConfig;

    DTbl = QueryRslt(xyz, abc);
    Data = GetData();
    Cols = Col();
} 
```

别介意缺少任何退货声明；；

```
public DataTable QueryRslt(string Type, string Value)
{
    if (!string.IsNullOrEmpty(Type))
    {
        var str = (from IR in inc
                   join AI in AppInfo on IR.CI equals AI.Application_Name
                   join RC in RespConfg on AI.Service_Level_Categoty equals RC.Category
                   where (RC.Tkt_Type == "Incident" && IR.Priority == Value)
                   select new
                   {
                       ID = IR.Incident_ID,
                       CI = IR.CI,
                       Status = IR.Status,
                       BenchMark_Response_Time = RC.Days_Benchmark,
                       SLMDeviation = ((EntityFunctions.DiffHours(IR.Incident_Reported_Date, IR.Incident_Responded_Date) / 24.0) - RC.Days_Benchmark),
                       Priority = IR.Priority,
                       ReportedDate = IR.Incident_Reported_Date,
                       RespondDate = IR.Incident_Responded_Date,
                       AssigneeGroup = IR.Assignee,
                       AssignedGroup = IR.Assigned_Group
                   }).ToList();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:47:26.150

看起来您正在尝试加入不同的数据上下文。这是不支持的。

您还应该在需要时实例化数据上下文对象，而不是将其存储在会话中，因为我猜您正在使用“INC”。

inc，APPInfo 和 RestConf 不能从数据上下文的不同实例中收集。

# javascript - Javascript调用网络服务错误

> ID：16103881
> 
> 赞同：1
> 
> 时间：2013-04-19T11:45:58.810
> 
> 标签：javascript, asp.net

我正在尝试调用一个简单的 Web 服务并发送一个电子邮件地址作为参数，并且我收到此错误消息“无法识别请求格式，因为 URL 意外以 '/IsPreUsedEmail' 结尾”。

任何想法？

谢谢。

客户端：

```
function GetIsPreUsedEmail(sEmail) 
{
    var Url = "http://localhost:52476/MyShul/Services/GetData.asmx/IsPreUsedEmail";
    xmlHttp = new XMLHttpRequest();
    xmlHttp.open("GET", Url, false);
    xmlHttp.send('jbjkb@kjbk');
    var xmldoc;
    xmldoc = new ActiveXObject("Msxml2.DOMDocument.3.0");
    xmldoc.loadXML(xmlHttp.responseXML.xml);
    if (xmldoc.parseError.errorCode != 0) {
         alert("DOM Not Loaded")
    }            
    return xmlHttp.responseXML.xml;
 } 
```

服务器端：

```
[WebMethod]
public bool IsPreUsedEmail(string sEmail) 
{
    return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:10:05.103

将网址更改为，

```
var Url = "http://localhost:52476/MyShul/Services/GetData.asmx/IsPreUsedEmail?sEmail=example@example.com"; 
```

# sql - how to use many LIKE conditions in SQL easily?

> ID：16103882
> 
> 赞同：6
> 
> 时间：2013-04-19T11:46:03.583
> 
> 标签：sql, sql-like

I want to use many LIKE conditions in my query. I couldn't find a practical solution. I tried CONTAINS but it doesn't work.

Instead of using this

```
where EIO.DigiAddress like '%abc@abc.com%'
or EIO.DigiAddress like '%def@def.com%'
or EIO.DigiAddress like '%ghi@ghi.com%' 
```

I want to use something like this:

```
CONTAINS(EIO.DigiAddress,'%abc@abc.com%', '%def@def.com%', '%ghi@ghi.com%') 
```

OR

```
EIO.DigiAddress IN ('%abc@abc.com%', '%def@def.com%', '%ghi@ghi.com%') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T11:55:49.877

**尝试这个：**

创建临时表：

```
CREATE TEMPORARY TABLE temp (
    alternate VARCHAR(20)
); 
```

然后：

```
INSERT INTO temp
VALUES ('%abc@abc.com%'), ('%def@def.com%'), ('%ghi@ghi.com%'); 
```

选择：

```
SELECT t.*
FROM tbl t JOIN temp p ON (t.col LIKE p.alternate); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:49:03.840

我认为使用 LIKE 没有任何问题。但是如果你不喜欢 LIKE 然后使用这个（对于 MS SQLSERVER）

```
where PATINDEX('%abc@abc.com%', EIO.DigiAddress) >0 OR
      PATINDEX('%def@def.com%', EIO.DigiAddress) >0 OR
      PATINDEX('%ghi@ghi.com%', EIO.DigiAddress) >0 
```

注意：您必须根据您使用的数据库对 PATINDEX 使用相关的字符串函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T11:56:55.953

您可以使用正则表达式执行此操作：

```
where EIO.DigiAddress regexp '[a-c|e-g|g-i]{3}@{1}[a-c|e-g|g-i]{3}.com' 
```

# c# - ASP.NET MVC: Data Annonations and Validation Summary

> ID：16103891
> 
> 赞同：0
> 
> 时间：2013-04-19T11:46:33.640
> 
> 标签：c#, asp.net-mvc-3

I have a Model with a couple of properties and I implemented Darin's answer from my previous question: [ASP.NET MVC: Custom Validation by DataAnnotation](https://stackoverflow.com/questions/16100300/asp-net-mvc-custom-validation-by-data-annonation). This enabled me to validate 4 properties at once (because I needed them together not to exceed a certain length).

The problem is, when I Annonate only 1 of the 4 properties with this custom validator, only that textbox's backgroundcolor will turn red when validation failed. When I annonate all 4 properties all 4 textboxes will turn red, but the error message will be displayed 4 times. Which is ugly. So I set @Html.ValidationSummary(false) so the error messages go in the summary, but all 4 error messages will be summarized (which is logical).

How can I make sure the error message will be displayed only once, while having all 4 textboxes turn red?

Thanks in advance for helping this MVC noob. Appreciate it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:43:47.333

我没有测试过，但我认为解决方案可能是将“成员”列表传递给`ValidationResult`被`IsValid`覆盖的方法：

[我以你之前的[问题为例]](https://stackoverflow.com/questions/16100300/asp-net-mvc-custom-validation-by-data-annonation)

```
public class CombinedMinLengthAttribute: ValidationAttribute
{
    public CombinedMinLengthAttribute(int minLength, params string[] propertyNames)
    {
        this.PropertyNames = propertyNames;
        this.MinLength = minLength;
    }

    public string[] PropertyNames { get; private set; }
    public int MinLength { get; private set; }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        var properties = this.PropertyNames.Select(validationContext.ObjectType.GetProperty);
        var values = properties.Select(p => p.GetValue(validationContext.ObjectInstance, null)).OfType<string>();
        var totalLength = values.Sum(x => x.Length) + Convert.ToString(value).Length;
        if (totalLength < this.MinLength)
        {
            List<string> props = this.PropertyNames.ToList();
            props.Add(validationContext.MemberName);
            return new ValidationResult(this.FormatErrorMessage(validationContext.DisplayName), props);
        }
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:46:03.300

似乎`ValidationResult.MemberNames`尚未针对 MVC 实现，请参阅[this](http://www.devtrends.co.uk/blog/the-complete-guide-to-validation-in-asp.net-mvc-3-part-2)。

> 在某些情况下，您可能很想使用 ValidationResult 的第二个构造函数重载，它接受成员名称的 IEnumerable。例如，您可能决定要在要比较的两个字段上显示错误消息，因此您将代码更改为：
> 
> ```
> return new ValidationResult(
>     FormatErrorMessage(validationContext.DisplayName), new[] { validationContext.MemberName, OtherProperty }); 
> ```
> 
> 如果你运行你的代码，你会发现完全没有区别。这是因为尽管此重载存在并且可能在 .NET 框架的其他地方使用，但 MVC 框架完全忽略了 ValidationResult.MemberNames。

# responsive-design - 如何使用 Susy 在断点处应用跨度列？

> ID：16103899
> 
> 赞同：0
> 
> 时间：2013-04-19T11:46:55.127
> 
> 标签：responsive-design, susy-compass

现在，我几乎有了一个响应式标题，因为我最初的问题是[如何使标题响应式？](https://stackoverflow.com/questions/16048134/how-to-make-a-header-responsive). 我仍然有点坚持正确的元素宽度。

我正在使用以下 Susy-Compass 设置：

```
.mod-header
  @include container ($total-columns, $mobile-to-medium, $medium-to-large)  
  border: 2px red solid
  +rem('height', 70px)

  @include susy-grid-background

  @include at-breakpoint($mobile-to-medium $columns-medium $medium-to-large)
    @include susy-grid-background

  @include at-breakpoint($medium-to-large)
    @include susy-grid-background

   .logo
     float: left
     border: 1px red solid
     +rem('margin', 20px 0)
     +data-uri-bg('logo.png')

   nav
     float: right
     +rem('margin', 20px 0)
     font-weight: 600
     @include at-breakpoint($mobile-to-medium $columns-medium)
       border: 1px blue solid
       @include span-columns(2)
       .tour
         display: none

       .action
         border: 1px green solid
         @include span-columns(1) 
```

这映射到以下呈现的布局：

![在此处输入图像描述](https://i.stack.imgur.com/TUYD6.png)

现在， 的效果`span-columns`似乎没有生效，以及从`.logo`到的间距`nav`。我想在右边有一个宽度为 1 列`.action`的标签，而左边有一个固定的宽度。有任何想法吗？`.find``.logo`

**编辑：**

Susy 的屏幕设置是：

```
$mobile-to-medium: 400px
$medium-to-large:  800px

$columns-small:    1
$columns-medium:   8
$columns-large:    12

$column-width   : 3em            // each column is 4em wide
$gutter-width   : 0.4em            // 1em gutters between columns
$grid-padding   : 0              // grid-padding equal to gutters

$total-columns: $columns-small 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:34:22.320

我认为您需要在断点处重置列。我不知道你的 , , 和 的`mobile-to-medium`价值`columns-medium`是`medium-to-large`多少`total-columns`。这是上面未列出的重要信息。但是你可能想检查这个[Change from 4 to 3 columns with omega with Susy failed](https://stackoverflow.com/questions/15938785/changing-from-4-to-3-columns-with-omega-with-susy-fails)，我认为这与你的问题有关。

# php - 删除文件名和扩展名，只显示文件夹名

> ID：16103902
> 
> 赞同：0
> 
> 时间：2013-04-19T11:47:32.553
> 
> 标签：php, .htaccess, hide

如何显示文件夹名称而不是文件名？

例如，www.example.com/home/index.php -> www.example.com/home

我知道当我浏览 www.example.com/home 时会得到结果，但这不是我想要的，因为它会在文件夹名称后面添加 /（例如 www.example.com/home/）。

我想要的是没有 / 后面的文件夹，当用户浏览 www.example.com/home/index.php 时，页面会将用户重定向到未找到的页面。我这样做的目的是隐藏我使用的语言并使链接更具可读性和记忆力。

我在 .htaccess 文件中发现了类似重写规则的东西，但我是 php 新手，所以我不知道如何制作它。任何人都可以给我建议或提供一些关于此的教程。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:59:18.573

要删除斜线，您必须先禁用[`DirectorySlash`](http://httpd.apache.org/docs/current/mod/mod_dir.html#directoryslash)

```
DirectorySlash Off
DirectoryIndex disabled 
```

可以用[`R=404`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)状态码回答直接访问 PHP 文件

```
RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteRule \.php$ - [R=404,L] 
```

然后，您可以重写指向目录并包含`index.php`

```
RewriteCond %{REQUEST_FILENAME}/index.php -f
RewriteRule ^.*$ /$0/index.php [L] 
```

这`RewriteCond`看起来，如果请求的 URL 是一个目录，并且`index.php`这个目录中是否有一个。如果是这种情况，则`index.php`执行 。

把所有的放在一起

```
DirectorySlash Off
DirectoryIndex disabled

RewriteEngine on

# prevent direct access to PHP files
RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteRule \.php$ - [R=404,L]

# rewrite requests for a directory to index.php
RewriteCond %{REQUEST_FILENAME}/index.php -f
RewriteRule ^.*$ /$0/index.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:00:27.500

Htaccess 与 PHP 没有任何共同之处。htaccess 是 Apache 的配置文件，所以你需要使用 htaccess 来实现你想要的。另一方面，您的解决方案将非常肮脏。了解 MVC 和 FrontController 以使您的结构更清晰。

# php - PHP：将数字转换为固定长度的编码字符串

> ID：16103905
> 
> 赞同：0
> 
> 时间：2013-04-19T11:47:41.193
> 
> 标签：php, string, encoding

我有很多数字..有些是一位数，有些是多位数字。我需要为每个数字创建一个字符串。该字符串的长度必须为 8 个字符（始终）。

我尝试使用 base64encode，它为每个数字提供了一个不错的字符串……但对于一位数字，我只有 3 个字符。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:55:35.270

```
$substitutes = range('a', 'j');
$formatted   = sprintf('%010d', $number);
$string      = preg_replace_callback('/./', function ($m) use ($substitutes) {
                   return $substitutes[$m[0]];
               }, $formatted);

echo $string; 
```

这实际上是“蛮力”版本，我相信还有更快的方法可以做到这一点。我会让你把这些和解码算法一起弄清楚。

# android - 如何编写android屏幕独立图形-具体解决方案

> ID：16103906
> 
> 赞同：0
> 
> 时间：2013-04-19T11:47:41.417
> 
> 标签：android, screen, screen-resolution

是否可以对所有屏幕密度使用通用 hdpi 文件夹？我有很多图像。如果我将特定副本复制到文件夹 drawable-hdpi、drawable-ldpi、drawable-xhdpi ……但它需要大量数据（背景、位图）。

是否可以为所有设备仅设置一个可绘制文件夹，然后以编程方式根据特定设备重新缩放？

我考虑这段代码来获取屏幕的显示大小：

```
Display display = getWindowManager().getDefaultDisplay();
width = display.getWidth();
height = display.getHeight(); 
```

然后我将获得设备的显示密度，如下所示：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
density = metrics.density; // 1 - 1,5 - 2 ..... 
```

我将用密度重新计算 imageview 的大小：

```
ImageView logo = (ImageView)findViewById(R.id.logo);
LinearLayout.LayoutParams logo1 = (LinearLayout.LayoutParams) logo.getLayoutParams();
logo1.width = (int)(logo.getWidth()*density);
logo1.height = (int)(logo.getHeight()*density);
logo1.leftMargin=(int)(logo1.leftMargin*density);   // for margin
logo1.topMargin=(int)(logo1.topMargin*density);   // for margin
logo1.rightMargin=(int)(logo1.rightMargin*density);   // for margin
logo1.bottomMargin=(int)(logo1.bottomMargin*density);   // for margin 
```

我的主要问题是我需要在所有设备上拥有相同比例的图形。这意味着我必须根据屏幕尺寸重新计算 imageViews。

这是获得密度独立屏幕的正确方法吗？如果只有 hdpi 文件夹包含文件，android 如何在其他设备上工作。它是否从该文件夹中获取文件？我可以将一个通用的可绘制文件夹设置为所有密度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:00:14.783

我强烈（***强烈***）建议不要这样做。但是，如果您希望系统重新调整您的图像资产，请将它们设计为`mdpi`（基线密度）并将它们放入`drawable/`.

也就是说，您至少需要 mdpi 和 hdpi 才能获得合理的缩放（因为 hdpi 是 1.5 倍 mdpi，缩放算法产生的结果比其他转换更差`mdpi`）。

在开始处理资源之前，请确保您已阅读并理解[提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html)和[支持多个屏幕。](http://developer.android.com/guide/practices/screens_support.html)

PS 由于几个原因，布局解决方案是错误的（例如，设置边距而不是大小），但它也是完全错误的做法。不要这样做！

# sql - 计算唯一书籍的存储过程

> ID：16103907
> 
> 赞同：-1
> 
> 时间：2013-04-19T11:47:44.780
> 
> 标签：sql, stored-procedures

我正在使用`SQL Server 2012`并想要计算所有唯一的 Book 实体的数量（因此，如果一本书有 3 个链接（同一本书但具有其他名称/字段），它将只计算一次）。![表结构](https://i.stack.imgur.com/kCDIf.jpg)

假设，下一个来源：

> **书**：{Id：1，描述：'书 1'}；{2, 'B00k 1'}; {3, 'Book1'}; {4, '书 2'}; {5, 'B00k 2'}; {6, '书 3'}
> 
> **链接**：{Id：1，ParentBook：**1**，LinkedBook：**2** }；{2, **2,1** }; {3, **2,3** }; {4, **3,2** }; {5, **4,5** }; {6, **5,4** }

[脚本](http://sqlfiddle.com/#!6/6c6e2/2/0)

我想在结果中看到：**3**（这是许多独特的书籍，其中 2 是 Id:1 和 Id:4 与其他书籍有链接，1 没有链接 Id:6）

我如何通过使用存储过程只返回一个数字来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:51:57.523

我认为您需要在这里稍微改变一下逻辑，而不是将所有父书链接到链接书，然后将书链接回父书，只需选择父书一次，然后像这样链接它们：

```
Link: {Id:1,ParentBook:1,LinkedBook:2}; {2,1,3}; {3,1,1}; {4,4,5}; {5,4,4}; {6,6,6} 
```

但是您必须将其链接到自身。为查询找出不同的。

我[在 sqlfiddle 上](http://sqlfiddle.com/#!6/34a11/1)创建了一个示例，检查这是否是您想要的。
这是我所做的：

```
SELECT COUNT(DISTINCT(l.ParentBook)) as total_books
FROM BOOK b, LINKED l
WHERE b.Id = l.ParentBook 
```

它将计算不同的父书。

# php - 来自 php 的 SQL 查询不使用 mysql 缓存

> ID：16103908
> 
> 赞同：1
> 
> 时间：2013-04-19T11:47:45.677
> 
> 标签：php, mysql, caching

Mysql服务器设置为缓存：

```
query_cache_size = 1G
query_cache_type = 1 
```

当我第一次从 phpmyadmin 执行查询时，查询耗时 2 秒，第二次耗时 0.0001 秒。

所以缓存确实有效。但是在 php 脚本中，查询每次都需要 2 秒。

```
php version 5.4.14
mysql 5.5.30 
```

脚本：

```
<?php
    $db = new mysqli("localhost", "user", "pass", "search");
    $t = microtime(true);
    $res = $db-> query("SELECT 
                            i.page_id, 
                            SUM(i.weight) as w 
                        FROM
                            search.search_index i 
                        INNER JOIN 
                            search.word_full w1 
                            ON w1.word=i.word 
                        INNER JOIN 
                            search.word_full w2 
                            ON w1.word_base=w2.word_base 
                        WHERE 
                            w2.word = 'api' 
                        GROUP BY 
                            i.page_id 
                        ORDER BY NULL");
    print($res->num_rows."\n");
    print(microtime(true) - $t);
?>

<?php
    $link = mysql_connect("localhost", "root", "pass");
    mysql_select_db("search");

    $t = microtime(true);
    $res = $db-> query("SELECT 
                            i.page_id, 
                            SUM(i.weight) as w 
                        FROM
                            search.search_index i 
                        INNER JOIN 
                            search.word_full w1 
                            ON w1.word=i.word 
                        INNER JOIN 
                            search.word_full w2 
                            ON w1.word_base=w2.word_base 
                        WHERE 
                            w2.word = 'api' 
                        GROUP BY 
                            i.page_id 
                        ORDER BY NULL");
    print(mysql_num_rows($res)."\n");
    print(microtime(true) - $t);
?> 
```

如果我试试这个：

```
 $t = microtime(true);
    $res = $db-> query("SELECT 
                            i.page_id, 
                            SUM(i.weight) as w 
                        FROM
                            search.search_index i 
                        INNER JOIN 
                            search.word_full w1 
                            ON w1.word=i.word 
                        INNER JOIN 
                            search.word_full w2 
                            ON w1.word_base=w2.word_base 
                        WHERE 
                            w2.word = 'api' 
                        GROUP BY 
                            i.page_id 
                        ORDER BY NULL");
    print(mysql_num_rows($res)."\n");
    print(microtime(true) - $t."\n");

    $t = microtime(true);
    $res = $db-> query("SELECT 
                            i.page_id, 
                            SUM(i.weight) as w 
                        FROM
                            search.search_index i 
                        INNER JOIN 
                            search.word_full w1 
                            ON w1.word=i.word 
                        INNER JOIN 
                            search.word_full w2 
                            ON w1.word_base=w2.word_base 
                        WHERE 
                            w2.word = 'api' 
                        GROUP BY 
                            i.page_id 
                        ORDER BY NULL");
    print(mysql_num_rows($res)."\n");
    print(microtime(true) - $t."\n");
?> 
```

脚本返回

```
235899
1.8554458618164
235899
1.8542320728302 
```

Mysql缓存也不起作用。

表结构：

```
CREATE TABLE IF NOT EXISTS `search_index` (
  `page_id` varchar(32) NOT NULL,
  `word` varchar(32) NOT NULL,
  `weight` int(11) NOT NULL,
  PRIMARY KEY (`word`,`page_id`),
  KEY `page_id` (`page_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `word_full` (
  `word` varchar(32) NOT NULL,
  `word_base` varchar(32) NOT NULL,
  PRIMARY KEY (`word`,`word_base`),
  UNIQUE KEY `word_base` (`word_base`,`word`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:50:21.547

PHP 中的每个调用都是一个新实例，与前一个无关。除非你明确声明它。

看看查询缓存： http: [//php.net/manual/en/mysqlnd-qc.quickstart.caching.php](http://php.net/manual/en/mysqlnd-qc.quickstart.caching.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:07:50.800

phpmyadmin 修改查询

```
SELECT 
    i.page_id, 
    SUM(i.weight) as w 
FROM
    search.search_index i 
INNER JOIN 
    search.word_full w1 
    ON w1.word=i.word 
INNER JOIN 
    search.word_full w2 
    ON w1.word_base=w2.word_base 
WHERE 
    w2.word = 'api' 
GROUP BY 
    i.page_id 
ORDER BY NULL 
```

至

```
SELECT 
    i.page_id, 
    SUM(i.weight) as w 
FROM
    search.search_index i 
INNER JOIN 
    search.word_full w1 
    ON w1.word=i.word 
INNER JOIN 
    search.word_full w2 
    ON w1.word_base=w2.word_base 
WHERE 
    w2.word = 'api' 
GROUP BY 
    i.page_id 
ORDER BY NULL
LIMIT 0, 30 
```

在查询结束时添加**LIMIT 0,30 。**

查询大小 > query_cache_limit

我将 query_cache_limit 增加到 10M。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:58:49.393

我在这里假设`word_full.word_base`并且`word_full.word`都是 VARCHAR 列。如果不是这种情况，请提供完整的表结构，包括 search_index 和 word_full 表的键。

我会

1.  将 wordID 列添加到 word_full (INT UNSIGNED AUTO_INCREMENT NOT NULL) 并使其成为主键
2.  在 word_full.word 上添加唯一键
3.  将 word_base 更改为引用 wordID（所以现在 wordID 和 word_base 都是数字）
4.  向 word_full.word_base 添加一个键
5.  将 search_index.word 更改为 search_index.wordID
6.  向 search_index.wordID 添加一个键

更改单词以使用数字键将允许 MySQL 更有效地使用索引。目前（我假设）您正在加入一个 varchar 列两次，然后搜索一个 varchar 列。这是相当低效的。

最后，将 WHERE 移动到 JOIN 中可能会允许它减少不同点的行，因此可能会更优化。这给出了最终查询

```
SELECT 
    i.page_id, 
    SUM(i.weight) as w 

FROM search.search_index i 

INNER JOIN search.word_full w1 
    ON w1.wordID = i.wordID

INNER JOIN search.word_full w2 
    ON w1.wordID_base = w2.wordID_base 
    AND w2.word = 'api' 

GROUP BY i.page_id 
ORDER BY NULL 
```

# java - 具有空值的 smartgwt SelectItem

> ID：16103912
> 
> 赞同：1
> 
> 时间：2013-04-19T11:47:57.340
> 
> 标签：java, smartgwt

我有一个 SelectItem，它从数据库中获取数据。我需要在我的选择项中添加一个 emptyField。

我的代码看起来像这样，而且效果很好。

```
SelectItem editor = new SelectItem(...);    
editor.setOptionDataSource(new DataAllowableValuesDS('data id for database request')); 
```

但是在我将其更改为下面的代码后，HttpServletRequest 中的 start_row 和 end_row 字段已更改为“-1”。我该如何解决？

```
SelectItem editor = new SelectItem(...);
editor.setAllowEmptyValue(true);
editor.setOptionDataSource(new DataAllowableValuesDS('data id for database request'));

public DataAllowableValuesDS(String id) {        
    DataSourceField nameField = new DataSourceTextField("name", null, 2000);
    nameField.setPrimaryKey(true);
    setFields(nameField);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:29:16.520

您是否为 SelectItem设置了`valueField (="name")`和？ 这些属性允许 DataSource 将结果映射到 SelectItem。`displayField`

我在您的代码中注意到的一件事是，从未使用过在 DataAllowableValuesDS 构造函数中传递给“id”的值。

此外，结果应该同时具有键/值对。

尝试将 SelectItem 和 DataAllowableValuesDS 更改为

```
SelectItem editor = new SelectItem(...);
editor.setAllowEmptyValue(true);
editor.setValueField("key");
editor.setDisplayField("value");

public DataAllowableValuesDS(String id) {        
    DataSourceField keyField = new DataSourceTextField("key", "Key");
    DataSourceField valueField = new DataSourceTextField("value", "Value");

    setFields(keyField, valueField);
} 
```

其他选项

*   使用[DataArrivedHandler](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/form/fields/SelectItem.html#addDataArrivedHandler%28com.smartgwt.client.widgets.form.fields.events.DataArrivedHandler%29)添加一个空值
*   尝试从服务器端发送空值作为结果的一部分

如果可能，请发布您的`DataAllowableValuesDS`代码。

# codeigniter - Codeigniter 驱动程序：无法从子类访问父方法

> ID：16103913
> 
> 赞同：0
> 
> 时间：2013-04-19T11:48:00.240
> 
> 标签：codeigniter

我正在尝试编写驱动程序，并且某些方法由子类共享。我想在父类中实现这些方法。

我在[这里](http://kevinphillips.co.nz/news/codeigniter-drivers-tutorial/)读到过，每个设置为 public/protected 的属性或功能都可以被子类访问。

所以，在`Driver_name`我设置`method_one`为受保护的父类中，当我尝试通过`Driver_name_subclass_one`错误日志访问它时显示“没有这样的方法'method_one'”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T00:09:00.017

您必须公开该方法。驱动程序不使用标准的类继承，例如`class Cache_dummy extends Cache`，这是您习惯它的工作方式并且可能期望的方式。相反，它使用[反射](http://us2.php.net/manual/en/book.reflection.php)从父级中查找公共方法，并通过使用魔术方法将它们提供给各个驱动程序`__call()`。

这是在 CI 中如何完成的片段，位于第 136 行附近`system/libraries/Driver.php`的类中：`CI_Driver`

```
$r = new ReflectionObject($parent);

foreach ($r->getMethods() as $method)
{
    if ($method->isPublic())
    {
        $this->methods[] = $method->getName();
    }
} 
```

父级的属性也是如此，例如`$CI`- 将它们公开，否则它们不能被子驱动程序“继承”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-19T11:12:39.127

你好，很抱歉我迟到的回答。
你试过用这个：
`$this->_parent->method_one();`

如果您想访问父方法甚至兄弟方法，这很有用。检查以下示例：

```
class Driver_name extends CI_Driver_library
{
    public $ci;
    public $valid_drivers;

    public function __construct()
    {
        $this->ci =& get_instance();
        $this->valid_drivers = array('child_one', 'child_two');
    }

    public function parent_method() {}
} 
```

我们有两个孩子：

```
// Child one
class Driver_name_child_one extends CI_Driver
{
    public function method_of_child_one() {}
}

// Child two
class Driver_name_child_two extends CI_Driver
{
    public function method_of_child_two() {}
} 
```

很明显，如果你要从 parent 访问 child 的方法，你只需要这样做：

```
$this->child_one->method_of_child_one();
$this->child_two->method_of_child_two(); 
```

要从孩子访问父方法，该方法需要是`public`，并且有两种访问方式：

```
// Option 1
$this->parent_method();

// Option 2
$this->_parent->parent_method(); 
```

如果你想访问兄弟方法，你必须`_parent`像这样使用属性：

```
// Child_one access Child_two method (inside Driver_name_child_one.php).
$this->_parent->child_two->method_of_child_two();

// Child two access Child_one method (inside Driver_name_child_two.php).
$this->_parent->child_one->method_of_child_one(); 
```

# c# - 从 .dat 文件中删除或更改文本

> ID：16103914
> 
> 赞同：1
> 
> 时间：2013-04-19T11:48:00.443
> 
> 标签：c#

我有一个程序可以将个人信息（姓名、姓氏、出生日期等）保存到名为 Records.dat 的 .dat 文件中。从文件中删除一个人的信息并将其替换为“已删除”或完全删除信息的理想方法是哪种？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:33:30.420

虽然我不确定你为什么不使用数据库（这真的没关系，所以这没什么大不了的）我会推荐一个**逻辑**删除（即不要真正删除它）。在平面文件的情况下，我建议在该行前面加上，`DELETED|`因为在读取要列出和/或搜索的行时很容易解析出来。所以，如果你在内存中有这条线，它可能看起来像这样：

```
var line // you've already assigned this
line = string.Format("DELETED|{0}", line); 
```

然后您需要将其写`line`回文件。我不确定您是如何写入文件的，但假设您知道该记录在此示例的文件中的位置：

```
int startIndex // you have already assigned this somewhere
               // it's the starting index of this line

using (FileStream fs = new FileStream("path to file", FileMode.Create, FileAccess.Write))
{
    using (BinaryWriter bw = new BinaryWriter(fs))
    {
        bw.Position = startIndex
        bw.Write(Encoding.Default.GetBytes(line), 0, line.Length);
    }
} 
```

# delphi - 从 TObject 派生时是否需要调用基方法？

> ID：16103916
> 
> 赞同：10
> 
> 时间：2013-04-19T11:48:06.173
> 
> 标签：delphi, inheritance

我有一个继承自的类`TObject`，如果我不调用父方法，是不是很糟糕？我问是因为在看`TObject.Create`/时`Destroy`，他们什么都不做。

这就是我们自己覆盖/暴露它们的原因。

没有代码示例，我只是想确定一下。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-19T11:53:06.913

最常见的行为是调用`inherited`. 因此，如果我明确不想要继承的行为，我不会调用`inherited`. 否则，我会。如果继承的行为是类似的无操作`TObject.Create/Destroy`，我仍然调用`inherited`.

另请注意，构造函数和析构函数的情况可能与其他方法略有不同。您需要跳过对继承方法的调用非常罕见。我想不出一个例子。构造函数总是在创建和销毁其他对象，那么你怎么能考虑跳过它呢？

我知道有些作者编写的代码`inherited`在直接从 派生时会省略`TObject`，因为他们知道其中的实现`TObject`什么也不做。我不喜欢那样做，对我来说这样做是错误的。的实现细节`TObject`不应该泄漏到派生类中。

我很确定这`TObject.Create/Destroy`将永远是无操作的。如果 Embarcadero 改变了这一点，那么就会有很多代码被破坏。但是你的一门课呢。假设您有一个派生自`TObject`. 然后你有另一个派生出来的类：

```
TMyClass1 = class
  ....
end;

TMyClass2 = class(TMyClass)
  ....
end; 
```

你没有构造函数，`TMyClass1`它的构造函数`TMyClass2`看起来像这样：

```
constructor TMyClass2.Create;
begin
  // no need to call inherited, it's a no-op
  FMyObj := TBlahBlah.Create;
end; 
```

然后有一天你修改`TMyClass1`构造函数来做某事。现在`TClass2`坏了。所以，我永远不会忽略一个调用，`inherited`因为那个调用什么都不做。

普通实例方法的情况略有不同。您想忽略基类实现并提供全新的实现更合理。但是根据派生类想要做什么而不是超类是否具有该方法的空实现来做出决定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T11:49:46.593

`inherited`如果您希望祖先的代码执行，您只需要调用。有时您需要该代码，有时您不需要。您也可以使用条件`inherited`语句，并且仅在满足某些条件时才调用，并且您可以选择*何时*执行（方法开始，方法结束，...）。

因此，这一切都取决于情况。

[这是](https://stackoverflow.com/a/15114776/282848)一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T17:42:05.540

尽管`TObject`'s Create/Destroy 方法在当前版本中没有做任何事情，但它们可能在未来的某个版本中（不太可能，但仍然可能）。那么它现在对你来说是必须的吗？不，因为它不会完成任何事情，而只是因为当前父级没有添加任何功能。

如果您希望您的后代对象始终向其父对象添加功能，那么始终调用`inherited`.

# nuget - 项目目录中有多个 .nuspec 文件？

> ID：16103919
> 
> 赞同：6
> 
> 时间：2013-04-19T11:48:12.183
> 
> 标签：nuget, nuspec

是否可以在同一个项目的单个目录中拥有多个 nuspec 文件，并且仍然能够合并项目和指定的 nuspec 文件。

我想知道这样的事情是否可能：

```
nuget pack MyProject.csproj MyProject-x86.nuspec -prop Configuration=Release;Platform="x86"
nuget pack MyProject.csproj MyProject-AnyCpu.nuspec prop Configuration=Release 
```

我需要能够使用多个构建配置发布我的项目，因此我需要创建不同的包。

我非常非常最后的手段是在构建时复制 csproj 文件，例如将其重命名为“MyProject-x86.csproj”，运行 nuget 包，然后将其删除。我不想这样做，我正在寻找替代品。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T13:21:06.827

调用时`NuGet pack`，您不能传递多个 csproj 或 nuspec 文件。注意命令行帮助中的管道（表示其中一个）：

```
usage: NuGet pack <nuspec | project> [options] 
```

您可以创建另一个 csproj，将其简化为仅对主 csproj（即您在 Visual Studio 中工作的 csproj）的一个导入元素，根据需要覆盖属性组项的值，和/或具有匹配的 .nuspec 文件。

# c - C：使用 8 位 char 作为完整的 int

> ID：16103920
> 
> 赞同：0
> 
> 时间：2013-04-19T11:48:13.023
> 
> 标签：c, bit-manipulation, bit

我正在尝试将 char 的 8 位转换为 int 的最低有效位。我知道从`char`to的转换`int`很容易通过

```
int var = (int) var2; 
```

其中 var2 是类型`char`（甚至没有 put `(int)`）。

但我想知道，如果我编写上面的代码，剩下的最高有效位（32-8=）`int`是随机的 24 位还是设置为 0？

示例：假设`var2`，`00001001`如果我编写上面的代码，`var`那么是`00000000 00000000 00000000 00001001`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T11:50:13.840

> ### C11 (n1570), § 6.5.4 转换运算符
> 
> 在表达式前面加上带括号的类型名称会将表达式的值转换为指定类型。

因此，其余的`var`设置为 0。

顺便说一句，显式演员表是不必要的。从`char`to的转换`int`是*隐式*的。

> ### C11 (n1570), § 6.3.1.1 布尔值、字符和整数
> 
> 如果 an`int`可以表示原始类型的所有值（受宽度限制，对于位域），则该值将转换为`int`; 否则，将其转换为`unsigned int`. 这些被称为整数促销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T12:06:28.390

AC/C++ 编译器可以选择`char`有符号或无符号类型。

如果您的编译器定义`char`为有符号，则在转换为`int`. 也就是说，它们要么全为零，要么全为 1，具体取决于 的符号位的值`var2`。例如，如果`var2`有值`-1`（十六进制，即`0xff`），`var`也将`-1`在赋值之后（`0xffffffff`在 32 位机器上表示）。

如果您的编译器定义`char`为无符号，则高位将全为零。例如，如果`var2`有值`255`（再次`0xff`），则值`var`将是`255`（`0x000000ff`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T11:49:52.967

用于将`char`名为的变量`c`转换为`int`：

*   如果`c`是正数，例如 24，则`c`=`00011000`并且在转换后它将被**零**填充：

    `00000000 00000000 00000000 00011000`

*   如果`c`是负数，例如 -24，则`c`=`11101000`并且在转换后它将被**填充**：

    `11111111 11111111 11111111 11101000`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T12:36:48.347

> 我正在尝试将 char 的 8 位转换为 int 的最低有效位

A`char`不保证为 8 位。可能更多。此外，正如其他人所提到的，它可能是有符号整数类型。在下面的代码中，负值`char`将转换为负值。`int`

> `int var = (int) var2;`

符号位被认为是最重要的，所以这段代码没有做你想做的事。也许您的意思是转换 from `char`to `unsigned char`（使其成为正数），然后 to `int`（通过隐式转换）：

```
int var = (unsigned char) var2; 
```

如果您预计`CHAR_BIT`在您的用例场景中超过 8，您可能需要考虑使用模运算符来减少它：

```
int var = (unsigned char) var2 % 256; 
```

> 但我想知道，如果我编写上面的代码，int 的剩余最高有效位（32-8=）24 位是随机的还是设置为 0？

当然，赋值将分配*整个*值，而不仅仅是它的一部分。

> 示例：设 var2 为 00001001，如果我写上面的代码，那么 var 是否为 00000000 00000000 00000000 00001001？

从语义上讲，是的。C 标准要求`int`能够存储介于 -32767 和 32767 之间的值。您的实现可以选择表示更大的范围，但这不是必需的。从技术上讲，an*至少为 16*`int`位。要时刻铭记在心。

 *但是，对于`var2`负值（例如`10000001`二进制表示法），符号位将被扩展。`var`最终将是`10000000 00000001`（以二进制表示）。*

# c# - SplitContainer 中的 FixedPanel 导致忽略大小

> ID：16103921
> 
> 赞同：4
> 
> 时间：2013-04-19T11:48:17.543
> 
> 标签：c#, .net, winforms

我有以下代码将第一个面板的宽度设置为我需要的宽度（出于某种原因，我需要将 expectedWith 除以 2 以使实际宽度成为我的 expectedWith - 不知道为什么）。

```
splitContainer1.SplitterDistance = expectedWith / 2; 
```

我需要的下一件事是第一个面板是固定的，这意味着如果您调整窗口大小，只有第二个面板变大而第一个面板保持大小不变​​。为此，我使用以下行：

```
splitContainer1.FixedPanel = FixedPanel.Panel1; 
```

现在的问题：FixedPanel 属性似乎完全忽略了第一个面板的大小。如果我使用 FixedPanel 线，我将 SplitterDistance 属性设置为哪个值并不重要。它总是一样的。即使我在表单设计器中设置 SplitterDistance 也没关系。

有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T12:15:38.193

我可以回答我自己的问题。仅当相应面板的内容在其 Dock 属性中使用 DockStyle.Fill 时才会发生这种情况。解决方案是在设置 FixedPanel 之后立即设置 DockStyle.Fill 值。这也是问题中解释的“除以二”行为的原因。

感谢约翰威廉斯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-16T17:50:50.413

我遇到了同样的问题，并且很想使用原始海报的建议，只需将所需的 SplitterDistance 除以二，因为它似乎总是（几乎但不完全）是我要求的宽度的两倍。

在设置 SplitterDistance 之前，我尝试将两个面板的子项的 DockStyle 更改为 None，但在我的情况下，它对问题没有任何影响。

我通过更改 SplitterDistance 的设置时间解决了这个问题。最初我在调用 Form.Show() 之前在面板上设置了 SplitterDistance。在显示表单后设置 SplitterDistance 似乎可以治愈它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T15:45:14.823

这`DockStyle.None`是朝着正确方向迈出的一步。但它需要 3-6 次迭代（摇动拆分器），直到 Panel-Window 具有预期的尺寸。奇怪的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T14:57:38.843

由于您只想要一个固定的第一个面板和一个动态的第二个面板，您不能使用 TableLayoutPanel 代替 SplitContainer 吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-03T10:08:14.660

我已经想通了。我需要打开一个页面并从注册表加载拆分器位置，但对我设置的手表显示它一直回到控件的设计时间设置的方式感到非常沮丧。

要修复它，您只需将“FixedPanel”的属性从“None”更改为 panel1 或 panel2。这取决于你。只有当最小设置不够小和/或当您在另一个相当大的容器中有一个拆分容器时，它才会真正发挥作用。固定面板保持固定。两个面板都可以根据您的选择使用鼠标调整大小，因此固定这个词在这方面有点模棱两可。

所以采取设计时间控制。把它放在表格上。调整它的大小以适应您的要求并根据需要锚定它。除了固定其中一个面板之外别无其他。有一个名为“IsSplitterFixed”的属性不要触摸它，这是该控件变得不稳定且必须保持为假的原因之一，panel.minsize 属性应在设计时根据要求设置，您将始终需要注意他们的价值观。

从此过上幸福的生活！

# c++ - Qt 视觉问题 - 鼠标悬停时的描述

> ID：16103922
> 
> 赞同：2
> 
> 时间：2013-04-19T11:48:20.710
> 
> 标签：c++, qt

我想在下面的[链接](http://i.stack.imgur.com/zSubn.png)中实现图片中显示的相同行为。当光标在按钮上停留几秒钟时，可以看到一些描述。我如何在 Qt4 中实现它？谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:54:34.453

`QPushButton`有`void setToolTip(const QString &)`方法，正是这样做的。如果您对它的效果不满意，您可以通过重新实现`onMouseEnter`事件来绘制自己的工具提示小部件（带有 Qt::Tooltip 标志的 QWidget）和子类 QPushbutton。希望有帮助。

# android - Android 服务崩溃行为

> ID：16103924
> 
> 赞同：0
> 
> 时间：2013-04-19T11:48:32.170
> 
> 标签：android, service

我知道服务崩溃行为在 android 中很常见，如果发生崩溃，服务将自动重启。

我有三个在启动时运行的服务（A、B、C），一个服务（A）启动另外两个服务（B 和 C）。所以我的问题是，如果一项服务崩溃，那么其他两项服​​务同时崩溃是否会产生影响？

当我测试这些服务时，80% 的时间如果我的服务 A 崩溃，那么其他两个服务也会崩溃，而 20% 的时间，一次只有一个服务（A/B/C）崩溃。

此服务崩溃时的正确行为是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T15:20:34.963

当 Android 操作系统的内存不足时，它首先关闭后台占用内存的所有内容 - 这是已定义的行为。

您应该使用“START_STICKY”启动您的服务，这样操作系统将在它再次拥有内存时重新启动您的服务（这可能不会发生），如下所示：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.i("LocalService", "Received start id " + startId + ": " + intent);
    // We want this service to continue running until it is explicitly
    // stopped, so return sticky.
    return START_STICKY;
} 
```

请参阅此详细答案： [如何强制重新启动服务？](https://stackoverflow.com/questions/7257378/android-how-to-force-restart-of-a-service-os-killing-on-low-memory-behavior)

您可以在此处阅读有关服务的更多信息：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T15:25:49.127

**“我的问题是，如果一项服务崩溃，那么其他两项服​​务同时崩溃是否会产生影响？”**

不，不会的。

**“我有三个服务（A、B、C）在启动时运行，一个服务（A）启动另外两个服务（B 和 C）。”**

这没有什么问题，但我建议在启动时独立启动每项服务。为什么？因为它会减少服务之间不必要的聚合。

**“这些服务在崩溃时的正确行为是什么？”**

系统会根据自己的意愿杀死服务以获取内存。

没有“正确”或固定的顺序可以杀死您的服务，这完全取决于谁获得了更多的内存来释放并且正在做不太重要的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-12T11:11:59.340

如果服务 A 依赖于服务 B/c。不仅会导致破坏，否则不会。

例如，如果您的应用使用 FirebaseAuth 服务。在 gms 更新时，FirebaseAuth 服务将被终止并重新启动，您的应用服务也将被终止并重新启动。

# java - 检查字符串中的特定字符

> ID：16103927
> 
> 赞同：-3
> 
> 时间：2013-04-19T11:48:43.403
> 
> 标签：java, string, bufferedreader, parseint

我有以下代码读取一个文件，该文件具有单个数字或 x/y 格式的 3 个整数，其中 x 和 y 一样是 int。

我正在尝试读取文件，然后在每个空白处拆分，以隔离字符串的每个部分，最终使用“parseInt”将它们变成整数。到目前为止我有

```
BufferedReader br = new BufferedReader(new FileReader("input1.txt"));

            String line = br.readLine();

            while (line != null){
                String[] lines = line.split(" "); 
```

我假设在此之后它应该看起来像这样作为一个例子

行[0] = 4

行[1] = 4/2

看着这个，我假设我可以使用 lines[1] 等解析每个部分

所以我的问题是如何检查“/”，因为如果它有破折号，我将无法使用 parseInt。我假设像and if语句，如果行有“/”等......但我不确定语法，

任何帮助，将不胜感激，

问候，

詹姆士

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:53:29.230

行数组中的 foreach 元素使用该`String.Contains()`方法检查字符串是否包含“/”。如果返回 true，则使用“/”作为分隔符执行另一个拆分。然后，您将拥有一个可以解析为整数的 x 和 y 值数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:56:16.653

您可以使用`contains`方法检查该行是否包含“/”，如果找到它，您可以使用“/”分割该行，如下所示：

```
String s = "4/2";
if (s.contains("/")) {
   String[] split = s.split("/");
   int x = Integer.parseInt(split[0]);
   int y = Integer.parseInt(split[1]);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:51:16.897

有这个方法可以帮助你：[String.indexOf()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29)

```
 int slashIndex = line.indexOf('/');
    if (slashIndex != -1) {
        double x = Double.parseDouble(line.substring(0, slashIndex));
        double y = Double.parseDouble(line.substring(slashIndex + 1));
        double value = x / y;
        System.out.println(line + " = " + value); // or else...
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T11:53:57.900

尝试这个：

```
String line ="";

while ((line=br.readLine())  != null){
    if(line.contains("/")){
        String[] lines = line.split("/");
        //parse 
    }
    else{ 
        String[] lines = line.split(" ");
        //parse 
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T11:54:46.697

你不需要检查你可以直接使用[replace 或 replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)：

```
str.replaceAll("/", ""); 
```

顺便说一句，您的循环不会按原样工作，您需要`br.readLine()`为每一轮调用：

```
while ((line = br.readLine()) != null){
  for (String ln: line.split(" ")){
    try{
      anyIntVar = Integer.parseInt(ln.replaceAll("/", ""));
      // ...
    }catch (NumberFormatException nfe){
      // handle exception
    }
  }
} 
```

# shell - 从线中剪切第一个出现的图案

> ID：16103929
> 
> 赞同：0
> 
> 时间：2013-04-19T11:48:50.977
> 
> 标签：shell, unix

我有一个文件说 abc 包含以下记录：

```
$cat xyz
    ABC
    ABCABC
    ABCABCABC 
```

我想剪切第一个模式，所以结果应该是这样的：

```
AC
ACABC
ACABCABC 
```

我正在尝试使用 awk 切割模式，例如：

```
$ cat xyz|awk -F 'B' '{print $1,$2}'
A CA
A CA
A CA 
```

当然，B 是分隔符，所以我得到了以上结果。我怎么能这样做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:59:36.537

我了解您想`B`在每一行中先删除。如果是这样，这将起作用：

```
sed 's/B//' xyx 
```

输出：

```
AC
ACABC
ACABCABC 
```

如果要替换文件，请添加`-i`

```
sed -i 's/B//' xyx 
```

* * *

我看到您[尝试编辑我的答案以添加新问题](https://stackoverflow.com/review/suggested-edits/1955058)- 请注意，您必须更新您的答案或在评论中写下。

> 谢谢，如果我还有一个案例，我只想在我有多个重复模式时删除第一个模式，例如：
> 
> ```
> $cat xyz
> ABC
> ABCABC
> ABCABCABC 
> ```
> 
> 输出应该是：
> 
> ```
> ABC
> ACABC
> ACABCABC
> $cat xy 
> ```

这可以是一种方法：

```
while read line
do
  if [ `echo $line | grep -o "B" | wc -l` -ge 2 ]
  then
     echo $line | sed 's/B//'
  else
     echo $line
  fi
done < xyz 
```

输出：

```
ABC
ACABC
ACABCABC 
```

# scrapy - 使用 Scrapy 抓取多个 URL

> ID：16103938
> 
> 赞同：2
> 
> 时间：2013-04-19T11:49:19.587
> 
> 标签：scrapy, web-crawler

如何使用 Scrapy 抓取多个 URL？

我是否被迫制作多个爬虫？

```
class TravelSpider(BaseSpider):
    name = "speedy"
    allowed_domains = ["example.com"]
    start_urls = ["http://example.com/category/top/page-%d/" % i for i in xrange(4),"http://example.com/superurl/top/page-%d/" % i for i in xrange(55)]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        items = []
        item = TravelItem()
        item['url'] = hxs.select('//a[@class="out"]/@href').extract()
        out = "\n".join(str(e) for e in item['url']);
        print out 
```

蟒蛇说：

```
NameError: name 'i' is not defined 
```

但是当我使用一个 URL 时它工作正常！

```
start_urls = ["http://example.com/category/top/page-%d/" % i for i in xrange(4)"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:34:43.383

您的 python 语法不正确，请尝试：

```
start_urls = ["http://example.com/category/top/page-%d/" % i for i in xrange(4)] + \
    ["http://example.com/superurl/top/page-%d/" % i for i in xrange(55)] 
```

如果您需要编写代码来生成启动请求，您可以定义一个[start_requests()](http://doc.scrapy.org/en/latest/topics/spiders.html#scrapy.spider.BaseSpider.start_requests)方法而不是使用 start_urls。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T12:15:48.223

`start_urls`您可以在方法中初始化`__init__.py`：

```
from scrapy.item import Item, Field
from scrapy.selector import HtmlXPathSelector
from scrapy.spider import BaseSpider

class TravelItem(Item):
    url = Field()

class TravelSpider(BaseSpider):
    def __init__(self, name=None, **kwargs):
        self.start_urls = []
        self.start_urls.extend(["http://example.com/category/top/page-%d/" % i for i in xrange(4)])
        self.start_urls.extend(["http://example.com/superurl/top/page-%d/" % i for i in xrange(55)])

        super(TravelSpider, self).__init__(name, **kwargs)

    name = "speedy"
    allowed_domains = ["example.com"]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        items = []
        item = TravelItem()
        item['url'] = hxs.select('//a[@class="out"]/@href').extract()
        out = "\n".join(str(e) for e in item['url']);
        print out 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-10T05:51:02.110

Python 中只有四个范围：`LEGB`，因为`class`定义的局部范围和 的局部范围`list derivation`不是嵌套函数，所以它们不构成封闭范围。因此，它们是两个独立的局部范围，不能从每个范围访问其他。

**所以，不要同时使用“for”和类变量**

# php - 如何在 Zend Lucene 上获得一个字段的分数

> ID：16103942
> 
> 赞同：0
> 
> 时间：2013-04-19T11:49:25.433
> 
> 标签：php, zend-framework, search, lucene, zend-search-lucene

我有类似于以下代码的内容：

```
[...]
while($result=mysql_fetch_assoc($query)){
    //Build a doc
    $doc = new Zend_Search_Lucene_Document();

    [...]

    $doc->addField(Zend_Search_Lucene_Field::text('category', sanitize($result["category"])));
    $all_values=explode(',',$result["value"]);
    $i=0;
    foreach ($all_values as $value) {
        $doc->addField(Zend_Search_Lucene_Field::text('value_'.($i++), urlencode($value)));
    }

    [...]

    //Add to doc
    $index->addDocument($doc);
}
[...] 
```

现在我想只显示`value_...`搜索后得分较高的字段。

我怎么能做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:15:51.587

在对此进行了更多思考之后，我找到了解决问题的方法。

Zend Lucene 按分数对结果进行排序，因此，我需要为每个循环创建一个文档`$value`，`foreach`然后为我当前结果的 ID（称为`res_id`）创建一个索引，该索引位于 foreach 内部。这样，我可以`res_id`在搜索后以编程方式仅显示一个结果。

所以我的代码变成：

```
[...]
while($result=mysql_fetch_assoc($query)){
    $all_values=explode(',',$result["value"]);
    //Create a Doc foreach value of $all_values and gave them the same category of the result of the query
    foreach ($all_values as $value) {
        //Build a doc
        $doc = new Zend_Search_Lucene_Document();

        [...]

        //Added res_id just to help grouping the results
        $doc->addField(Zend_Search_Lucene_Field::unIndexed('res_id', sanitize($result["id"])));

        $doc->addField(Zend_Search_Lucene_Field::text('category', sanitize($result["category"])));
        //Renamed the field to value
        $doc->addField(Zend_Search_Lucene_Field::text('value', urlencode($value)));

        [...]

        //Add to doc
        $index->addDocument($doc);
    }
}
[...] 
```

现在，当我进行搜索时，我只显示第一次出现的`res_id`（得分更高的那个）。

这是我在控制器上的代码，它向视图发送一个包含项目和找到的总项目的数组：

```
[...]
public function indexAction()
{
    $this->view->query=urldecode($this->_getParam("query"));
    if ($this->view->query){
        //open the index
        $index = new Zend_Search_Lucene('path/to/lucene/index');
        $hits = $index->find($this->view->query);
        $executed_ids=array();
        $total=0;
        $this->view->items=array();
        foreach ($hits as $hit) {
            //Pass item to view only if it is not listed yet on $executed_ids
            if (!$executed_ids[$hit->res_id]){
                $this->view->items[]=$hit;
                $executed_ids[$hit->res_id]=true;
                $total++;
            }
        }
        $this->view->total_hits=$total;
    }
}
[...] 
```

# android - 如何使用 Tizen 的 ACL

> ID：16103944
> 
> 赞同：0
> 
> 时间：2013-04-19T11:49:32.910
> 
> 标签：android, compatibility, porting, tizen

我是 Tizen 的新手。

提前搜索已经开发的 Android 应用程序可以在 Tizen 上运行，我发现 Tizen 可以使用应用程序兼容层 (ACL) 运行 Android/Bada 应用程序

有人可以说明我如何使用它在 Tizen 上运行我的 Android 应用程序吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:55:25.837

您只需将您的应用程序提交给 Nexva，它是 AppMall 的内容合作伙伴。任何具有 ACL（=Dalvik 克隆）的 Tizen 设备都与 Android 设备相同。顺便说一句，Infraware 的 Polaris App Generator (PAG) 几乎是相同的概念

# android - Jelly Bean 和 Froyo 的 ImageView match_parent 不同

> ID：16103950
> 
> 赞同：1
> 
> 时间：2013-04-19T11:49:47.330
> 
> 标签：android, android-4.2-jelly-bean, android-2.2-froyo

我有一个简单的布局，但遇到了 Jelly Bean 和 Froyo 之间的区别。在 Jelly Bean 上，我已按高度`ImageView`匹配其父级 ( )。`FrameLayout`但在 Froyo 上却不是。请看一下布局结构：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <FrameLayout
        android:id="@+id/fl"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <ImageView
            android:id="@+id/image_view"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/profile_data_background_im"
            android:scaleType="fitXY"/>

        <LinearLayout
            android:id="@+id/ll"
            android:layout_height="match_parent"
            android:layout_width="match_parent"
            android:orientation="vertical">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Test text"/>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Test text"/>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Test text"/>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Test text"/>

        </LinearLayout>

        </FrameLayout>

</LinearLayout> 
```

所以我在 Jelly Bean 上拥有的东西（正如预期的那样）：

![在此处输入图像描述](https://i.stack.imgur.com/56cRy.png)

这是我在 Froyo 上的内容：

![在此处输入图像描述](https://i.stack.imgur.com/N7IxH.png)

请告知如何`ImageView`填充其父级，因为它适用于 Jelly Bean。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:25:56.667

我最近才遇到同样的现象。在查看了 Android 源代码和子类视图（例如查看`FrameLayout`将传递给其子级的值）之后，很明显这是一个错误。

有关完整的[描述](https://stackoverflow.com/q/15780884/1856738)和[解决方法](https://stackoverflow.com/a/15793790/1856738)，请参见此处。

元注释：感谢 StackOverflow 审阅者投票*支持*将我的原始答案转换为评论，然后*反对*将此问题标记为重复。现在这就是你得到的。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:56:52.630

将您`FragmentLayout`的设置`layout_height`为`match_parent`.

您的 XML 代码应如下所示

```
<FrameLayout
        android:id="@+id/fl"
        android:layout_width="match_parent"
        android:layout_height="match_parent"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:59:22.503

你为什么不把它`profile_data_background_im` `Drawable`作为你的背景`@+id/ll` `LinearLayout`？无论如何，奇怪的布局组合。

# python - python：https下载多个文件和文件夹

> ID：16103954
> 
> 赞同：0
> 
> 时间：2013-04-19T11:50:06.220
> 
> 标签：python, https, download

我需要一个文件下载器，我尝试编写它，但我无法通过 https 连接下载文件。通过 http 下载文件很容易，但对于 https 连接，我有用户名和密码。我通常在 Firefox 中使用这行代码连接到网站：

```
https://username:password@site.com/path 
```

我想在那里下载每个文件+（子）文件夹。我怎样才能做到这一点？这是我在 Firefox 中连接时的样子：

```
http://img543.imageshack.us/img543/6355/52961177.png
http://img713.imageshack.us/img713/624/55225462.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:53:20.953

*   你需要 Python 吗？使用命令行工具作为*curl*应该完成的工作。

*   [http://docs.python-requests.org/en/latest/user/quickstart/](http://docs.python-requests.org/en/latest/user/quickstart/)是一个很好的实现 HTTP 客户端的库。

# r - 用于查找差异表达基因的 Limma 软件包

> ID：16103955
> 
> 赞同：0
> 
> 时间：2013-04-19T11:50:10.983
> 
> 标签：r, bioinformatics, bioconductor, limma

我以以下方式设计了我的矩阵，我将其命名为 mat1：

```
 Probes  sample1  sample1 sample2 sample2 sample3 sample3 sample4 sample4  
         rep1      rep2    rep1   rep2    rep1    rep2    rep1    rep2
 ------------------------------------------------------------------------
   gene1   5.098   5.076   5.072  4.677  7.450   7.456   8.564   8.555
   gene2   8.906   8.903   6.700  6.653  6.749   6.754   7.546   7.540
   gene3   7.409   7.398   5.392  5.432  6.715   6.724   5.345   5.330
   gene4   4.876   4.869   5.864  5.981  4.280   4.290   4.267   4.255
   gene4   3.567   3.560   3.554  3.425  8.500   8.564   6.345   6.330 
   gene5   2.569   2.560   8.600  8.645  5.225   5.234   7.345   7.333 
```

我使用 limma 包来查找 DEG

```
Group <- factor(c("p1", "p1", "p2", "p2","p3", "p4","p4")
design <- model.matrix(~0 + Group)
colnames(design) <- gsub("Group","", colnames(design))
fit <- lmFit(mat1[,1:4],design)
contrast.matrix<-makeContrasts(p1-p2,levels=design)
fit2<-contrasts.fit(fit,contrast.matrix)
fit2<-eBayes(fit2)
sel.diif<-p.adjust(fit2$F.p.value,method="fdr")<0.05
deg<-mat1[,1:4][sel.diif,] 
```

那么“deg”只会给我那些在样本一与二中显着的基因。我对那些仅在第一个样本中差异表达但在第二个样本中没有差异表达的基因感兴趣，我不确定这是否是正确的方法。

或者我应该尝试这样的事情：

```
contrast.matrix<-makeContrasts(contrasts="p1"-("p2"+"p3"+"p4")/3,levels=design) 
```

我不确定我应该如何设置对比矩阵以仅从样本 1 中获取 DEG，但在其他三个中则不然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:59:08.143

您的示例不可重现，即我无法重现结果。但是，这里有一些评论：

1.  你是正确的关于`deg`. 它将寻找两个样本之间不同的基因。
2.  对比矩阵：

    ```
    makeContrasts(contrasts="p1-(p2+p3+p4)/3", levels=design) 
    ```

    是我（可能）如何解决这个问题。但是，这可能会抵消影响。例如，如果`p2`是高和`p3`低。

3.  或者，你可以有类似的东西：

    ```
    makeContrasts(contrasts=c("p1-p2", "p1-p3", "p1-p4"), levels=design) 
    ```

    并查看重叠的基因。

# jquery - 单击按钮时，清除 jqgrid 并重新加载数据

> ID：16103956
> 
> 赞同：4
> 
> 时间：2013-04-19T11:50:13.500
> 
> 标签：jquery, jqgrid

我有一个不在 document.ready 中的 jqgrid。只有当我单击一个按钮时才会触发它。

```
 function getData{
    DataHandler.getTasks(locName,{callback:function(data){
    jQuery("#TaskTable").jqGrid(
                {
    datatype : "local",
    data : resultSet,
    height : 250,
    width : 960,
    sortable : false,
    ignoreCase : true,
    sortorder : "desc",
        //rest of the table contents like colname and colmodel
     });

    }, errorHandler:function(){

        },async:false

    }); 
```

我想在每次单击按钮时清除网格，以便删除已经存在的数据并重新加载。这样做有什么帮助吗？我应该在哪里准备好文档内的清晰网格或单击按钮？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T15:18:01.117

假设标记：

```
 <table id='myGrid' /> 
```

您可以使用以下代码从服务器清除和加载新数据：

```
function loadTable() {
$('#myGrid').jqGrid('GridUnload');  //this does the work of clearing out the table content and loading fresh data
$('myGrid').jqGrid({
    url: 'url goes here',
    dataType: 'json',
    jsonReader: {
        root: 'Data',
        page: 'CurrentPage',
        total: 'TotalPage',
        records: 'TotalRecords',
        repeatitems: false
    },
    onSelectRow: editRow
}); 
```

}

您还可以查看以下[链接](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods&s%5B%5D=gridunload)以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:57:16.433

所以这可以作为按钮的点击事件处理程序的一部分来完成

重置 jqGrid 中上一篇文章中保存的参数

```
var postData = grid.jqGrid('getGridParam', 'postData');
    $.extend(postData, { filters: "" }); 
```

重置过滤结果的搜索框

```
 $('#gbox_SearchResults').find('[id^="gs"]').val(''); 
```

触发重新加载

```
grid.jqGrid().trigger('reloadGrid', [{ page: 1}]); 
```

# php - jQuery .load() 函数阻止我调用 HTML 文件中的脚本

> ID：16103962
> 
> 赞同：0
> 
> 时间：2013-04-19T11:50:26.563
> 
> 标签：php, javascript, jquery, html, ajax

我的 login.html 文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="lv">
<head>
<?php require_once 'inc/metahead.php'; ?>
<title>Logg inn</title>
<script type="text/javascript"      src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js">
</script>
<script type="text/Javascript" src="functions.js">
</script> 

</head>
<body>
    <div id="content">
        <center>
            <form>
                <label for="epost"></label> <input type="text"   name="epost" id="epost"
                    placeholder="Epost/Bruker" /></br> </br> <label
                    for="passord"></label> <input type="password"   name="passord" id="passord"
                    placeholder="Passord" /></br> </br> <input
                    type="button" onclick="login()" value="Logg inn">
            </form>
            <br /> <a href="forgot_pass.php">Glemt passord?</a>
        </center>
    </div>
</body>
</html> 
```

这段代码来自我的 header.php 文件：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
function loginNow(){
    $(document).ready(function() {
         $("#content").load("login.html");
    });
}
</script> 
```

如果我直接进入 login.html - 它调用该函数没有问题。但是，如果我浏览我的索引文件并单击“Logg inn”，那么上面的脚本就会运行，login.html 中的脚本永远不会被调用。

我试图提醒一些事情而不是调用我的脚本 - 那行得通。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:56:57.723

我认为您有两个加载了不同版本的 jquery 文件，这导致了冲突

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"> 
```

在 login.html 中

另一个是

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

在 header.php 中

所以要么你使用[noConflict()](http://api.jquery.com/jQuery.noConflict/) .. 要么删除其中一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:52:47.180

这里函数名不同

```
 onclick="login()" // you are calling login()

 function loginNow(){ // but declaring loginNow() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:58:38.237

不要使用`onlick=""`. 由于您使用的是 jQuery，因此将事件挂钩到您的输入元素：

```
 $(document).ready(function(){
     $('input[type=button]').click(loginNow);
 }); 
```

最终给按钮 an`id`或 a`name`并将其用作 jQuery 中的选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T11:53:07.650

您的 HTML 代码：...

```
<input type="password"   name="passord" id="passord"
                    placeholder="Passord" /></br> </br> <input
                    type="button" **onclick="login()"** value="Logg inn"> 
```

...

您的 Javascript 代码：

```
function **loginNow()**{
    $(document).ready(function() {
         $("#content").load("login.html");
    });
} 
```

检查随附的部分 - 不同的函数名称；）

# java - 对具有重复条目的数组进行排序后获取唯一索引

> ID：16103974
> 
> 赞同：2
> 
> 时间：2013-04-19T11:51:11.960
> 
> 标签：java, sorting, indexing

我需要对数组进行排序并获取链接到未排序数组的索引。问题是如果未排序的数组包含重复的条目，即`[1,1,1,2,2,]`，那么这些条目的索引是相同的。例如`[3,5,5,3,3,]`，索引将是`[0,1,1,0,0]`. 但我需要获得以下索引`[0,3,4,1,2]`。这该怎么做？

```
ArrayList<Double> nfit = new ArrayList<Double>();
ArrayList<Double> nfit_copy = new ArrayList<Double>(nfit);

// Fill nfit

Collections.sort(nfit);

int[] ind = new int[nfit.size()];

for (int n = 0; n < nfit.size(); n++){
    ind[n] = nfit_copy.indexOf(nfit.get(n));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:12:58.893

这是因为`nfit_copy.indexOf(nfit.get(n));` 如果您有重复的号码，您使用 which 会给您相同的索引

例如

`[3,5,5,3,3,]`----> 每次你使用 :`nfit.indexOf(3)`时，都会给你索引`0`

所以，您可能需要更改此值或将其设置为空（不要删除它，因为它会更改索引），以允许您获取下一个重复数字

试试这个：

```
ArrayList<Integer> nfit = new ArrayList<Integer>();
ArrayList<Integer> nfit_copy = new ArrayList<Integer>(nfit);

// Fill nfit 

  nfit.add(3);
  nfit.add(5);
  nfit.add(5);
  nfit.add(3);
  nfit.add(3);

  nfit_copy = (ArrayList<Integer>) nfit.clone();

  Collections.sort(nfit);

  int[] ind = new int[nfit.size()];

  for (int n = 0; n < nfit.size(); n++) {
         ind[n] = nfit_copy.indexOf(nfit.get(n));
         nfit_copy.set(nfit_copy.indexOf(nfit.get(n)), null);
   }
   for (int i = 0; i < ind.length; i++) {
         int j = ind[i];
         System.out.println(j);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:22:54.400

```
public static void main(String[] args) {
        Integer[] input = new Integer[]{1,2,2,1,5,6,2,3,2,3,4,5,6,1};
        List<Integer> mappedIndexes = new ArrayList<Integer>();

        List<Integer> sorted = new ArrayList<Integer>();
        for (int num : input) {
            sorted.add(num);
        }       
        Collections.sort(sorted);

        for (int number : input) {
            System.out.println("finding for input -> " + number);
            for (int i = 0; i < sorted.size(); i++) {
                int sortedNumber = sorted.get(i);
                if (number == sortedNumber) {
                    if (mappedIndexes.contains(i)) {
                        continue;
                    } else {
                        System.out.println("setting index as -> " + i);
                        mappedIndexes.add(i);
                        break;
                    }
                }
            }
        }
        System.out.println(mappedIndexes);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T12:28:44.177

这是我使用`Set`和`HashMap`结构的解决方案。请阅读代码注释以获取更多信息。

```
int[] input = { 45, 3, 4, 9, 2, 1, 45, 3 };
// Backup the initial array for later use.
int[] originalArray = Arrays.copyOf(input, input.length);    
Arrays.sort(input);

// Determine all occurences with a set.
Set<Integer> set = new HashSet<Integer>();
for (int i : input) {
    set.add(i);
}

// Populate a hashmap for keeping <value,index> pairs.
HashMap<Integer, Integer> map = new HashMap<Integer, Integer>();
int counter = 0;
for (int i : set) {
    map.put(i, counter++);
}

// Populate the output array.
int[] output = new int[input.length];
for (int i = 0; i < output.length; i++) {
    output[i] = map.get(originalArray[i]);
} 
```

就这样。如果将内容打印`output`到控制台，可以看到结果。

# iphone - 我们如何让 NSTimer 在 iOS 中为我 的音频播放器在后台运行

> ID：16103976
> 
> 赞同：0
> 
> 时间：2013-04-19T11:51:14.177
> 
> 标签：iphone, objective-c, ios6

我正在 iOS 中制作音频播放器，并且制作了音频播放器，并且我正在使用 NSTimer 更新当前播放歌曲的持续时间，但问题是如果我的应用程序进入后台，计时器将停止。

有什么方法可以让我在后台运行我的 NSTimer，以更新当前播放的歌曲当前持续时间。苹果如何在后台运行他们的音频播放器？

MPMediaPlayer 和 AVQueuePlayer 进度滑块，显示剩余时间和经过的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:32:33.803

如果您的应用程序在后台，那么无论如何都不会有人看到更新。

只要确保在应用程序进入前台时再次启动计时器，就可以了。

# c - __attribute__((OS_main)) 在 AVR 中导致奇怪的行为

> ID：16103979
> 
> 赞同：1
> 
> 时间：2013-04-19T11:51:19.180
> 
> 标签：c, attributes, avr, avr-gcc

我不知道如何准确描述我看到的错误。如果我在 main() 中设置我的端口寄存器，一切都会按预期工作。但是，如果我尝试在函数中执行此操作，程序会停止。

主.c：

```
__attribute__((OS_main)) int main(void);
int main(void) {                                           
    DDRD = 0xF0;
    PORTD = 0xF0;
    led( LED_GREEN, true );
    while( true );
} 
```

这会打开绿色 LED。但是，如果我将端口设置移动到单独的函数，则不会发生任何事情，如下所示：

```
__attribute__((OS_main)) int main(void);
int main(void) {                                           
    hwInit();  
    led( LED_GREEN, true );
    while( true );
} 
```

罪魁祸首似乎是**属性**行，因为如果我将其注释掉，第二个示例将按预期工作。我的问题是理解为什么，因为据我了解， OS_main 属性应该只告诉编译器它不应该*在*进入或退出函数时存储任何寄存器。这不正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:05:47.340

以下是在 ArchLinux 下使用 avr-gcc 4.8.0 编译的。分发应该与情况无关，但是编译器和编译器版本可能会产生不同的输出。编码：

```
#include <avr/io.h>

#define LED_GREEN PD7
#define led(p, s) { if(s) PORTD |= _BV(p); \
                else PORTD  &= _BV(p); }

__attribute__((OS_main)) int main(void);
__attribute__((noinline)) void hwInit(void);

void hwInit(void){
    DDRD = 0xF0;
}

int main(void){

    hwInit();
    led(LED_GREEN, 1);

    while(1);
} 
```

生成：

```
000000a4 <hwInit>:
  a4:   80 ef           ldi r24, 0xF0   ; 240
  a6:   8a b9           out 0x0a, r24   ; 10
  a8:   08 95           ret

000000aa <main>:
  aa:   0e 94 52 00     call    0xa4    ; 0xa4 <hwInit>
  ae:   5f 9a           sbi 0x0b, 7 ; 11
  b0:   ff cf           rjmp    .-2         ; 0xb0 <main+0x6> 
```

当编译 `avr-gcc -Wall -Os -fpack-struct -fshort-enums -std=gnu99 -funsigned-char -funsigned-bitfields -mmcu=atmega168 -DF_CPU=1000000UL -MMD -MP -MF"core.d" -MT"core.d" -c -o "core.o" "../core.c"`并相应地链接时。

`__attribute__((OS_main)) int main(void);`来自上述来源的评论对生成的程序集没有影响。然而，奇怪的是，`noinline`从中删除指令`hwInit()`具有编译器将函数内联到 main 中的效果，正如预期的那样，但函数本身仍然作为最终二进制文件的一部分存在，即使使用`-Os`.

这使我相信您的编译器版本/编译器参数正在生成一些不正确的程序集。如果可以的话，能把相关区域的拆解贴出来做进一步检查吗？

后期编辑添加了两个贡献，其中第二个解决了手头的问题： Hanno Binder 指出：“为了从二进制文件中删除那些‘未使用’的函数，你还需要 -ffunction-sections -Wl,--gc-sections。 "

Asker 补充道 [paraphrased]：“我遵循的教程忽略了`avr-objcopy`创建 hex 文件的步骤。我认为为正确的目标编译和链接项目就足够了（出于某种原因，这是为了基本功能）。之后添加了一个`avr-objcopy`生成文件的步骤，一切正常。”

# javascript - 动态删除一个动态添加的输入（type=file）

> ID：16103980
> 
> 赞同：1
> 
> 时间：2013-04-19T11:51:19.953
> 
> 标签：javascript, jquery, forms

我有一个表单，用户可以在其中添加要上传的文件。该输入上的更改事件会添加相同类型的新输入，依此类推。但是新的输入必须有“X”字符并附加点击事件才能删除输入字段和 X 字符。

表格：

```
 <form id="upload_form">
     <div class="p_file">
        <p class="icon">X</p>
        <input type="file" name="userfile1" size="40"  class="required"  />
     </div>
  </form> 
```

和 JavaScript：

```
 $('#upload_form input[type="file"]').change(function(){
       addUploadField($(this));
   });  

   function addUploadField($field)
   {
       $current_count = $('#upload_form input[type="file"]').length
       $next_count = $current_count + 1;
       $field.parent('p').after('
            <div class="p_file" >
                <p class="icon">X</p>
                <input type="file" name="userfile'+$next_count+'" size="40" />
            </div>
        ');
        $field.unbind('change');
        $nextField = $('#upload_form input[type="file"]').last(); 
        $nextField.bind('change',function(){
        addUploadField($(this));
     });

     $("#upload_form .icon").on('click',function(){
         removeUploadField($field);
     });
   }

 function removeUploadField($field)
 {
     $field.parent('p').remove();
 } 
```

上面的代码删除了单击“X”字符后的所有字段。我想要做的是只删除下一个输入字段。

我试图[在 jsFiddle 中准备这个示例](http://jsfiddle.net/cBrQX/1/)，但我无法完成这项工作。无论如何，这可能会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:25:13.210

将“div”标签放在“p”标签内是主要问题

* * *

在此代码中更正了删除

注意：在您的 html 代码中，“ **div** ”被添加到“ **p** ”标签内，这是无效的做法

HTML：

```
<form id="upload_form">
    <div class="p_file">
        <div class="icon">X</div>
        <input type="file" name="userfile1" size="40"  class="required"  />
    </div>
</form> 
```

脚本：

```
$('body')
    .delegate('#upload_form input[type="file"]', 'change', inputChanged)
    .delegate('#upload_form .icon', 'click', removeField);

function inputChanged() {

    $current_count = $('#upload_form input[type="file"]').length;
    $next_count = $current_count + 1;
    $(this).closest('.p_file').after(
            '<div class="p_file" ><div class="icon">X</div>' +
            '<input type="file" name="userfile'
            + $next_count + '" size="40" /></div>');
}

function removeField(){
    $(this).closest('.p_file').remove();
    return false;
} 
```

链接：http: [//jsfiddle.net/cBrQX/2/](http://jsfiddle.net/cBrQX/2/)

# javascript - 使地址栏在窗口中只读

> ID：16103982
> 
> 赞同：1
> 
> 时间：2013-04-19T11:51:26.143
> 
> 标签：javascript, jquery, html

我打开一个窗口如下：

```
window.open(url, "_blank", 'toolbar=yes,menubar=no,dialog=yes,maximize=no,top=20,left=165,scrollbars=yes,width=' + width + ',height=' + height + "'"); 
```

在这里，我需要将地址栏设置为只读。我正在查看[这个答案](https://stackoverflow.com/questions/1788564/hide-addressbar)，但这会禁用地址栏。但是我希望它只读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:57:17.833

您不能在任何浏览器中这样做，而是使用会话将值从一个页面传递到另一个页面，这样任何人都无法修改它。

或者你也可以实现 CrossPagePostback 概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-26T03:18:45.280

它可以在现代浏览器中完成。当位置设置为 0 时，Modern 不再隐藏 URL 栏。相反，它们将其呈现为只读。

[此处](https://stackoverflow.com/a/1788601/5407188)的答案说明了 IE7 对此的行为，

> 在 IE7 及更高版本中， location=no 只是隐藏后退/前进/停止导航按钮，并使地址栏只读。

Firefox 也有同样的行为。这是[官方文档](https://developer.mozilla.org/en-US/docs/Web/API/Window/open#Toolbar_and_chrome_features)，

> 在 Firefox 3 中，dom.disable_window_open_feature.location 现在默认为 true，从而强制显示位置栏，就像在 IE7 中一样。有关详细信息，请参阅错误 337344。

我也用 Chrome 进行了测试，它的行为也一样。

所以简短的回答是“设置位置 = 0，您可以将 URL 栏设为只读”。

# php - JS表单发布并获得答案

> ID：16103992
> 
> 赞同：-2
> 
> 时间：2013-04-19T11:52:07.223
> 
> 标签：php, javascript, jquery, json, forms

对不起我的英语，这不是我的国语。

我的问题是下一个：

我想将表单的所有输入的值发布到 php 文件并获得答案并将其写入 div。

例如：

我有一个前面有空白 div 的表单：

```
<div id="msg" name="msg"></div>

<form method="???" action="???">
<input type="text" name="login" id="login" value="" />
<input type="password" name="passwd" id="passwd" value="" />
<input type="submit" value="send" />
</form> 
```

当我单击“发送”时，它应该将所有输入值发送到，例如，register.php，没有页面刷新，并且 id 为“msg”的 div 应该得到什么 php 答案。比如回答“账号注册成功”，就出现在这个div中。我怎样才能做到这一点？（希望使用 jQuery）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:01:04.823

向表单添加`name`属性，在您的提交按钮上调用 ajax 函数以动态提交数据`register.php`并成功替换`innerHtml`div 中的消息。

如需帮助，请参阅以下链接：

[https://stackoverflow.com/a/8820803/1687983](https://stackoverflow.com/a/8820803/1687983)

[使用提交按钮提交 Ajax 表单](https://stackoverflow.com/q/8869341/1687983)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:54:39.023

使用应该使用 jQuery ajax 功能 [http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/) [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

看到这个问题：[使用 jQuery 提交表单](https://stackoverflow.com/questions/1200266/submit-a-form-using-jquery)

还有这个问题：[Submit form using AJAX and jQuery](https://stackoverflow.com/questions/425095/submit-form-using-ajax-and-jquery)

已经有足够多的文档可用了。您是否甚至寻找过解决方案？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:01:35.043

您应该使用 jQuery 事件 : submit 来解释提交，如下所示：

```
$('form#regForm').submit( function() {
   $.post( 'register.php', $('form#regForm').serialize(), function(data) {
       //Use the data to understand how the registration went.
       $("#msg").html("Good/Bad");
   }
   return false;
);
}); 
```

的HTML：

```
<div id="msg" name="msg"></div>
<form id="regForm" method="post" action="register.php">
    <input type="text" name="login" id="login" value="" />
    <input type="password" name="passwd" id="passwd" value="" />
    <input type="submit" value="send" />
</form> 
```