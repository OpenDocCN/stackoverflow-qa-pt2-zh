# StackOverflow 问答 13010000-13010999

# c - 在这个 for 循环中发生了什么

> ID：13010004
> 
> 赞同：-2
> 
> 时间：2012-10-22T10:58:43.870
> 
> 标签：c, arrays, for-loop

我正在尝试别的东西，但突然卡住了这个无限循环。请提出一个答案，并解释下面的 for 循环中发生的事情

```
#include<stdio.h>

int main()
{
 int x=0;
 int i;
 int array[5];
 for(i=0;i<=5;i++)
 {
  array[i]=x;
  printf("#%d value set in index %d\n",x,i);
 }

 return 0;
} 
```

当我删除循环`=`条件中的符号时，它工作正常。`for`

但是当我把它放到无限循环时，为什么？访问数组中的额外元素（超过其限制）是未定义的行为还是什么？任何帮助将不胜感激。提前致谢。

~

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:00:26.950

您正在将 6 个整数写入一个空间为 5 的数组。第 6 次写入超出了数组的范围，因此其效果是不可预测的。在您的情况下，它写入`sizeof(int)`堆栈的下一个字节。这是用于`i`循环计数器的内存，它被重置为 0。

正如您在问题中所说，解决此问题的方法是将`<=`for 循环的退出条件替换为`<`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T10:59:40.110

未定义的行为发生在`i==5`. `array`具有有效索引`0..4`- C 中的数组从 0 开始。

如果替换`<=`为`<`，则迭代有效索引。

> 访问数组中的额外元素（超过其限制）是未定义的行为还是什么？

是的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T11:09:55.693

为避免轻易导致此类错误，这里有两个`for`在实际（本地）数组上编写循环的好规则：

1.  迭代从索引 0 开始，因为 C 的数组是从 0 开始的。
2.  始终使用`<`。从不`<=`。
3.  不要重复大小，让编译器使用`sizeof array / sizeof *array`. 注意第二项中的星号。

所以，这个循环应该是这样写的：

```
for(i = 0; i < sizeof array / sizeof *array; i++) 
```

然后你就安全了。

请注意，这仅适用于大小可见的“真实”数组`sizeof`，如果您让数组“折叠”成指针，它将不起作用。

另请注意，这`sizeof`不是一个函数，因此`()`在这种情况下，它的参数周围不需要 s。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T12:19:50.527

在这种特定情况下，为什么要进入无限循环实际上很容易理解，请查看堆栈中的地址：

```
int main( ) 
{
    int x = 0;
    int i;
    int array[5];
    printf("&x = %#x, &i = %#x, array = %#x, array+4 = %#x\n", &x, &i, array, array+4); 
```

结果`printf()`将显示变量的地址以及数组的开始和结束：

```
&x = 0xbfac9cec, &i = 0xbfac9ce8, array = 0xbfac9cd4, array+4 = 0xbfac9ce4 
```

所以按顺序，你的堆栈看起来像：

```
 var        address
***********************
array[0]    0xbfac9cd4
array[1]    0xbfac9cd8
array[2]    0xbfac9cdc
array[3]    0xbfac9ce0
array[4]    0xbfac9ce4
  i         0xbfac9ce8
  x         0xbfac9cec 
```

现在您的循环正在写入 0-5（6 个元素），数组中只有 5 个元素，因此写入第 6 个元素实际上会覆盖堆栈中的下一个元素，`i`在这种情况下。这使得这条线：

```
array[i]=x; 
```

和写这个一样：

```
i = x; 
```

这会将 0（在您的情况下）存储到 i，然后重新启动循环，因此您将看到它永远循环并打印“0 存储到索引 0”，然后打印“索引 1”、2、3、4 然后重新启动当你再次设置`i=x;`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T11:20:45.047

您试图在大小为 5 的数组中存储 6 个 int 值，这是非法的。

因此，当您尝试在数组的第 6 个位置写入时，您正在写入`i`值为`x`(0) 的变量。现在在你的下一次迭代中，因为`i`是 0，它小于`for`循环中指定的条件。这会导致您的循环一次又一次地运行！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T11:00:31.843

您的 for 循环应该从 0 变为 4，因为您的数组有 5 个元素

```
#include<stdio.h>

int main()
{
 int x=0;
 int i;
 int array[5];
 for(i=0;i<5;i++)
 {
  array[i]=x;
  printf("#%d value set in index %d\n",x,i);
 }

 return 0;
} 
```

# android - 动画适用于 4.0.3 但不适用于 2.3

> ID：13010006
> 
> 赞同：1
> 
> 时间：2012-10-22T10:58:44.570
> 
> 标签：android

我正在尝试在我的应用程序中放置一些动画。我正在使用 ImageView 并将我的 xml 动画设置为背景。在我使用的活动中

```
ImageView iv = (ImageView)findViewById(R.id.its_party_time_view);
AnimationDrawable ad = (AnimationDrawable) iv.getBackground();
ad.start(); 
```

开始动画。

它在运行 4.0.3 的 HTC Evo 3D 上运行良好，但在运行 2.3.3 的三星 Galaxy 上它只显示一张图像。正如我所看到的，我使用的所有函数都应该从 API 1 开始工作。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:18:18.393

这篇文章似乎表明这是早期版本中的一个错误，您可以通过在新线程中调用 ad.start() 来解决它。

[https://stackoverflow.com/a/11385114/603412](https://stackoverflow.com/a/11385114/603412)

# javascript - JS 等价于 Python str() 方法

> ID：13010007
> 
> 赞同：2
> 
> 时间：2012-10-22T10:58:46.660
> 
> 标签：javascript, python

在 Python 2.7.3 中，有一个方法`str()`可以将所有数据类型转换为字符串。我想知道 JavaScript 中是否有这样的字符串方法，如果有，它的语法是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T11:01:11.473

[javascript中的字符串函数](http://www.w3schools.com/jsref/jsref_string.asp)

```
<script>

var test1 = new Boolean(1);
var test2 = new Boolean(0);
var test3 = new Boolean(true);
var test4 = new Boolean(false);
var test5 = new Date();
var test6 = new String("999 888");
var test7 = 12345;

document.write(String(test1)+ "<br />");
document.write(String(test2)+ "<br />");
document.write(String(test3)+ "<br />");
document.write(String(test4)+ "<br />");
document.write(String(test5)+ "<br />");
document.write(String(test6)+ "<br />");
document.write(String(test7)+ "<br />");

</script> 
```

上面代码的输出将是：

```
true
false
true
false
Mon Oct 22 2012 16:30:10 GMT+0530 (India Standard Time)
999 888
12345 
```

也检查这个功能

```
var iNum1 = 10;
var fNum2 = 10.0;
var iNum = 10;

alert(iNum1.toString(2)); //outputs “1010”

alert(iNum1.toString(8)); //outputs “12”

alert(iNum1.toString(16)); //outputs “A” 
```

# tortoisesvn - Tortoise 的非递归提交是如何工作的？

> ID：13010012
> 
> 赞同：120
> 
> 时间：2012-10-22T10:58:54.253
> 
> 标签：tortoisesvn, commit, non-recursive

我已经在本地签出了我从不同分支（具有完全不同的文件夹结构）合并到的 SVN 分支（我的分支）的副本。所以基本上有很多删除（旧文件）和添加（新文件）。

当我尝试将合并提交到存储库（到我的分支）时，Tortoise 说

> 此提交不是递归的，并且为提交选择了移动/重命名的文件夹。此类移动/重命名始终在存储库中递归执行。你还是要承诺吗？

可以继续进行此提交吗？如果没有，我应该怎么做才能没有问题？

另外，对于我添加的一些文件，我在添加后进行了更改（如果这会影响性质）。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2014-03-07T08:04:40.767

谷歌发现如何修复它：在提交窗口中按 F5（不在“警告弹出窗口”中）

有关详细信息，请参阅[http://tortoisesvn.tigris.org/ds/viewMessage.do?dsForumId=757&dsMessageId=2831045](http://tortoisesvn.tigris.org/ds/viewMessage.do?dsForumId=757&dsMessageId=2831045)。

> 在 26.08.2011 22:39，Ryan J Ollos 写道：
> 
> > 几个月以来，我一直看到启动提交时出现以下对话框。尝试在合并后提交时经常发生这种情况。
> > 
> > 然而，我最近注意到的是，如果我取消然后手动刷新文件列表 (F5)，我在第二次启动提交时不会再次看到该消息。提交似乎成功了，没有进一步的问题。
> 
> 提交对话框在后台线程中监视工作副本以获取更改通知。此类通知由操作系统发送，以防文件被修改/移动/重命名/...如果收到此类通知，提交对话框首先会进行一些检查，以便删除其中的大部分。如果通知表明未检查且在提交对话框中不可见的文件以某种方式发生了更改，则它会切换回非递归提交。这是因为如果您在另一个编辑器中打开了一个文件并在提交对话框打开时保存您的更改，那么即使您没有在提交对话框中检查它（它不会显示），该文件也会被提交直到您使用 F5 刷新对话框）。
> 
> 因此，如果您经常看到该警告对话框，请检查是否有另一个正在运行的工具/应用程序会修改您的工作副本中的文件。
> 
> 正如您所注意到的：如果您按 F5，则“非递归标志”将被重置，因为刷新后，您会再次看到所有文件 - 甚至是您在启动对话框后修改的文件。
> 
> 斯特凡

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-05-30T09:12:56.423

我有同样的问题，但通过恢复对我标记为“ignore-on-commit”的文件的更改来解决它

一旦我恢复了这些文件，tortoisesvn 就能够提交合并中的所有其他文件

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-27T05:29:46.270

> 如果我继续这个提交可以吗？

不，您的提交将忽略 WC-tree 中的所有更改并仅反映根级别的更改（损坏的合并）。

最初签出非递归时出错。您可以**尝试**使用 `--depth infinity`CLI 中的参数执行良好的完整提交，或者在 TortoiseSVN GUI 中找到此开关。

```
svn commit --depth infinity . -m "Merge" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-15T23:02:04.107

看起来 TortoiseSVN 在调用提交之前执行了某种有效性检查。很好，但错误信息非常不清楚。

当我遇到这个问题时，我又回到使用 svn 命令行来提交。由于其中一个文件夹不是最新的，提交失败。仅更新该文件夹后，我再次运行“svn commit”并通过了。

编辑： PS：在您使用之前尝试一下，请确保您没有任何标记为“提交时忽略”的文件。“提交时忽略”是特定于乌龟的，SVN 提交也会选择这些更改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-11T08:15:41.957

只是想我会发布这个，因为它对我有用......

发生这种情况的原因是因为我部分重命名了我创建的一个新项目，并且由于某种原因，它们在提交屏幕上都显示为“缺失”。

在我删除项目和文件夹（SVN 打勾）并再次将其作为新项目放回后，突然所有的“丢失”都变成了“添加”并且提交运行良好而没有警告我任何事情.

希望这可以帮助！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-02T14:27:14.280

我看到了这个问题，原因是一些添加的文件没有明显的原因没有添加状态。即使父文件夹正确显示为“添加”，它们也是“正常的”。我恢复了那些“正常”的变化，然后手动重新做了。这使得每个添加的项目在提交列表中出现两次，但它解决了错误，现在一切似乎都处于正常工作状态。

它与另一个答案中的忽略提交没有任何关系，它似乎只是 TortoiseSVN 中的一个错误。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-03T09:31:08.940

> 另外对于一些我添加了 SVN 的文件，我在添加后进行了更改（如果这会影响性质）。

在我的情况下，这正是导致消息出现的原因，即使我取消选择这些文件进行提交。

丑陋的解决方案，只有在只有几个文件受到影响时才能安全工作：

1.  创建更改文件的副本
2.  还原更改的文件
3.  提交合并/重新集成
4.  将更改的文件复制回原始位置

提醒自己：只有在目标（主干）干净时才重新整合分支。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-07-20T13:40:19.693

我只是有同样的问题。我没有选择所有文件，而是单击了版本控制，一切正常。就我而言，版本化选项选择了所有文件，所以现在一切正常。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-30T14:24:28.853

问题可能是，您的合并信息被某人或自动删除，因为信息在树中向上移动。如果你要再次合并它们，它会暂时起作用。但是所有其他人都会遇到他们未合并的分支的问题。SVN 会丢失一些代码并再次合并已经提交的代码。

因此，恢复这些文件并再次更改它们可能会起作用，但您不应该只提交更改。

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2012-10-26T21:04:58.017

我不知道 tortoisesvn 的选项，但你可以使用命令行

```
svn commit --non-recursive [folder] 
```

这就是你喜欢的工作，就像你喜欢工作一样

# c# - 将图像从 Ajax 控件工具包编辑器保存到 SQL 数据库

> ID：13010013
> 
> 赞同：0
> 
> 时间：2012-10-22T10:59:00.137
> 
> 标签：c#, asp.net, sql-server-2008

我正在使用使用 ajax 控件工具包提供的默认文本编辑器，我需要将用户可以粘贴到编辑器中的图像保存到数据库中。数据库中的列是 varbinary(MAX) 但是当我尝试保存时出现以下错误

> 不允许从数据类型 nvarchar(max) 到 varbinary(max) 的隐式转换。使用 CONVERT 函数运行此查询

然后我后来像这样将内容转换为字节

```
var subgrantdesc = Convert.ToByte(grantdescription_editor.Content); 
```

然后在参数定义中我有这个

```
var param0 = new SqlParameter();
param0.ParameterName = "@desc";
param0.SqlDbType = System.Data.SqlDbType.VarBinary;
param0.Value = subgrantdesc;
sql.Parameters.Add(param0); 
```

但是我得到了错误：

> System.FormatException：输入字符串的格式不正确。在 System.Number.StringToNumber....

上面的错误指向我要转换到的代码行`Byte`。我想知道如何将通过编辑器控件输入的数据（图像和文本）保存到 SQL 服务器数据库中。我也想知道是否会保留 HTML 格式。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:01:38.793

应该有两种方法来解决这个问题。一：提供字节var的长度。从[这里](https://stackoverflow.com/questions/1064121/how-do-i-insert-a-byte-into-an-sql-server-varbinary-column)

```
using(SqlCommand cmd = new SqlCommand("INSERT INTO mssqltable(varbinarycolumn) VALUES (@binaryValue)", conn))
{
    // Replace 8000, below, with the correct size of the field
    cmd.Parameters.Add("@binaryValue", SqlDbType.VarBinary, 8000).Value = arraytoinsert;
    cmd.ExecuteNonQuery();
} 
```

二：使用BitConverter

```
string data = "0x" + BitConverter.ToString(subgrantdesc).Replace("-", ""); 
```

# javascript - 将几个 json 文件合并为一个

> ID：13010021
> 
> 赞同：1
> 
> 时间：2012-10-22T10:59:29.740
> 
> 标签：javascript, json, backbone.js

在谷歌上搜索了几天后，我终于强迫自己在这里问这个问题。

我的`json`文件很少。

```
localhost/feed01.json
localhost/feed02.json
localhost/feed03.json 
```

所有`json`与此类似的文件结构。但随机数据包括随机、id、日期类型等...

```
[
        {
            "id":1,
            "date": "12/12/2011",
            "type": "Run",
            "distance": "3 miles",
            "comments": "This was really hard",
            "minutes": 36
        },
        {
            "id":2,
            "date": "12/11/2011",
            "type": "Bike",
            "distance": "6 miles",
            "comments": "All down hill...felt like nothing",
            "minutes": 30
        },
        {
            "id":3,
            "date": "12/10/2011",
            "type": "Walk",
            "distance": "2.5 miles",
            "comments": "Shouldn't have taken the dog",
            "minutes": 45
        }
] 
```

现在我想将所有这些 json 文件合并到一个文件中，并默认按**日期**排序（在初始化时）。`backbone.js`使用集合进行合并和排序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:37:44.070

Backbone 允许您通过选项覆盖一些backbone.sync

*   您可以将目标 url 作为选项传递`collection.fetch`以覆盖默认 url
*   并传递`add: true`将模型附加到集合而不是重置它

这意味着您可以使用

```
var c = new Backbone.Collection();
c.fetch({
    url: ('localhost/feed01.json'),
    add: true
});
c.fetch({
    url: ('localhost/feed02.json'),
    add: true
});
... 
```

要在所有获取完成后调用回调，您可以构建一个[jQuery 延迟对象](http://api.jquery.com/category/deferred-object/)

```
var files = ['localhost/feed01.json', 'localhost/feed02.json', 'localhost/feed03.json'];
var c=new Backbone.Collection();
var dfds = [], dfd, i, l;
for (i=0, l=files.length; i<l;i++) {
    dfd = c.fetch({
        url: (files[i]),
        add: true
    });
    dfds.push(dfd);
}

$.when.apply(null, dfds).done(function() {
    console.log(c.pluck('id'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:50:51.833

要合并数据，只需创建一个集合和所有带有 json 对象/模型表示的数组到这个集合。要实现该功能，您可以覆盖 fetch 方法并使其执行 3 次 ajax 调用并使用 jquery deferreds 等到所有三个都已解决并将返回的数据添加到集合中，然后再解决 fetch 请求。

要更改排序逻辑，您需要覆盖集合[比较器](http://backbonejs.org/#Collection-comparator)方法以根据您的数据进行排序。

您可以将其指定为例如 this

```
comparator: function(model) {
    return +new Date(model.get('date'));
} 
```

它会按日期排序。

如果您出于某种原因在将模型添加到集合后指定比较器，则需要调用 sort 方法，以便根据比较器指定的规则对模型进行排序

# wpf - 将 XAML 触发器包含到 ControlTemplate

> ID：13010024
> 
> 赞同：2
> 
> 时间：2012-10-22T10:59:33.423
> 
> 标签：wpf, xaml, triggers, controltemplate, resourcedictionary

我对 WPF 很陌生，并且正在做一些自定义控制的东西......我的问题是一个文件中的代码将会很多，所以我想将代码拆分为单独的文件，所以其他人在看代码不会被淹没。

好的，我的问题...我有一个 ResourceDictionary...“Generic.xaml” 在这个文件中，我得到了一个 DataGrid 的模板：

```
 <Style TargetType="{x:Type local:BADataGrid}">
    <Style.Setters>
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:BADataGrid">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" 
                        BorderThickness="{TemplateBinding BorderThickness}"
                        Background="{TemplateBinding Background}" 
                        Padding="{TemplateBinding Padding}" 
                        SnapsToDevicePixels="True">

           <!-- *SOME TEMPLATE CODE* -->

                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="GridStyle" Value="CUSTOMER">
                            <Trigger.Setters>
                                <Setter Property="ColumnHeaderStyle">
                                    <Setter.Value>
                                        <Style TargetType="{x:Type DataGridColumnHeader}">
                                            <Setter Property="Background">
                                                <Setter.Value>
                                                    <ImageBrush>
                                                        <ImageBrush.ImageSource>
                                                            <Binding  Path="HeaderBackground" RelativeSource="{RelativeSource AncestorType=local:BADataGrid}">
                                                                <Binding.TargetNullValue>
                                                                    <ImageSource>
                                                                        headerBack.png
                                                                    </ImageSource>
                                                                </Binding.TargetNullValue>
                                                            </Binding>
                                                        </ImageBrush.ImageSource>
                                                    </ImageBrush>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Setter.Value>
                                </Setter>
                            </Trigger.Setters>
                        </Trigger>
                    </ControlTemplate.Triggers>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style.Setters>
</Style> 
```

现在我想要另一个 .XAML 文件中的上述代码的“ControlTemplate.Triggers”部分。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:44:40.410

又是我。对不起，我花了这么长时间才回答。我现在领先了几步......我在一个额外的 ResourceDictionary 中获得了触发器，如果​​我在实现控件的“Window.Resources”中实现它，一切都会正常工作。

我现在的问题是......我不想在“Window.Resources”中实现 ResourceDictionary，而是在我的自定义控件的“ControlTemplate.Resources”中实现。但是当我这样做时，它告诉我：

**“无法将‘Microsoft.Expression.Markup.DocumentModel.DocumentCompositeNode’类型的对象转换为‘System.Windows.ResourceDictionary’类型。**

```
 <ControlTemplate.Resources>
                        <ResourceDictionary>
                            <ResourceDictionary.MergedDictionaries>
                                <ResourceDictionary
                                Source="Customer.xaml" />
                            </ResourceDictionary.MergedDictionaries>
                        </ResourceDictionary>
                    </ControlTemplate.Resources> 
```

如果我将 Customer.xaml ResourceDictionary 中的代码复制到 ControlTemplate.Resources 中，它可以工作......但我希望它在一个附加文件中......

有任何想法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:08:16.527

查看[资源字典](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/03/creating-and-consuming-resource-dictionaries-in-wpf-and-silverlight.aspx)。这应该允许您跨文件拆分样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:40:09.147

用一个讨厌的解决方法做到了......我将与你分享。

我刚刚实现了一个在加载 DataGrid 时触发的事件。在这种情况下，我加载了我想添加到 ResourceDictionary 对象中的控件模板的 ResourceDictionarys。然后我遍历 ResourceDictionary 对象中的所有条目，并将每个单独的条目添加到 ControlTemplate 的资源中......这是代码：

```
void DataGridLoaded(object sender, RoutedEventArgs e)
    {
        BADataGrid dg = (BADataGrid)VisualTreeHelper.GetParent((DependencyObject)sender);

        List<string> resourceList = new List<string>();
        resourceList.Add(Properties.Resources.Customer);

        foreach (string s in resourceList)
        {
            System.Xml.XmlReader xmlReader = new System.Xml.XmlTextReader(new System.IO.StringReader(s));
            ResourceDictionary resource = (ResourceDictionary)XamlReader.Load(xmlReader);

            foreach (System.Collections.DictionaryEntry item in resource)
            {
                dg.Resources.Add(item.Key, item.Value);
            }
        } 
```

# php - 使用字段扩展的共同朋友的语法是什么？

> ID：13010030
> 
> 赞同：1
> 
> 时间：2012-10-22T10:59:49.143
> 
> 标签：php, facebook, api

使用字段扩展，对于前3个朋友，我想找到所有共同的朋友。我该怎么做？

我应该改变什么？

[https://graph.facebook.com/me?fields=friends.limit(3).fields(mutualfriends)&access_token=AAA](https://graph.facebook.com/me?fields=friends.limit(3).fields(mutualfriends)&access_token=AAA) ...

使用单个图表，我可以使用 /mutualfriend/userid 获取数据

但我不知道如何使用字段扩展传递用户 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:16:17.373

[https://graph.facebook.com/me?fields=friends.limit(3).fields(mutualfriends.user(1234567](https://graph.facebook.com/me?fields=friends.limit(3) ) ) **_**

我认为这对您有用，其中 1234567 是您朋友的用户 ID。

# apache2 - 我们如何重置 apache2

> ID：13010036
> 
> 赞同：7
> 
> 时间：2012-10-22T11:00:07.953
> 
> 标签：apache2

我错误地应用了命令，

```
sudo rm -rf /etc/init.d/apache2 restart 
```

之后我无法运行 apache2

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-02-28T10:26:04.950

执行以下操作：

```
sudo apt-get purge apache2

sudo apt-get install apache2

sudo service apache2 start 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:04:48.647

如果 Apache2 是作为系统包的一部分安装的（例如使用 Debian apt-get），那么您应该能够通过删除并重新安装包来取回它（我不敢说使用例如重新安装选项，因为我不认为涉及配置文件）。您还可以获取源包并在其中找到 init.d 文件并将其复制回来。

# objective-c - 当我尝试在 iOS 6 中运行时，我的代码会引发 Sen 测试框架错误。为什么？

> ID：13010038
> 
> 赞同：2
> 
> 时间：2012-10-22T11:00:11.467
> 
> 标签：objective-c, ios, ios-simulator, ios6, xcode4.5

我有一个正在开发的项目，`iOS 5.0`现在我需要将我的项目更新为`iOS 6.0`. 这样做时，我`xcode 4.5`会抛出如下错误...

```
dyld: Library not loaded: @rpath/SenTestingKit.framework/Versions/A/SenTestingKit
  Referenced from: /Users/developer/Library/Application Support/iPhone Simulator/6.0/Applications/6EFF12B6-DA80-4DD8-B3CF-B217C5EA63DF/XxxxXxxx.app/xxxxXxxxXxx
  Reason: image not found 
```

它仍然可以在`iOS 5`设备中运行并完美运行，我正在尝试在其中运行此应用程序`iphone Simulator iOS 6.0`会引发该错误...任何人对此都有任何想法...在此先感谢...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-11T11:26:01.953

![在此处输入图像描述](../Images/4112934c8a6c67899f9c049accc690fa.png)

它的工作......将 SentestingKit.framework 设置为可选

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T14:31:19.263

@fry 从这里复制了他的答案：

[http://www.cocoabuilder.com/archive/xcode/260066-sentesttingkit-framework-runtime-failure.html](http://www.cocoabuilder.com/archive/xcode/260066-sentesttingkit-framework-runtime-failure.html)

我发现那里有更多信息对解决这个问题很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T11:25:00.403

尝试删除派生的数据，然后清理项目并重新启动 Xcode。如果它仍然不起作用，请检查库的目标依赖项。

它看起来像是 armv7s 架构存在问题，请在框架的 Buildsettings 中检查！

# ubuntu - 如何正确使用 Tomcat 7 新别名？

> ID：13010043
> 
> 赞同：2
> 
> 时间：2012-10-22T11:00:34.303
> 
> 标签：ubuntu, static, resources, tomcat7, aliases

Tomcat 7 提供了新的别名，允许在 WAR 文件之外存储静态内容。[我在http://www.developer.com/java/web/article.php/3904871/Top-7-Features-in-Tomcat-7-The-New-and-the-Improved](http://www.developer.com/java/web/article.php/3904871/Top-7-Features-in-Tomcat-7-The-New-and-the-Improved.htm)中找到了一些说明如何做到这一点[.htm](http://www.developer.com/java/web/article.php/3904871/Top-7-Features-in-Tomcat-7-The-New-and-the-Improved.htm)第 4 部分。

但这对我不起作用。

我有两个上下文 XML 文件。一个用于我的应用程序 (admin.xml)，另一个用于我的静态资源 (uploads.xml)。

我做了本教程中提到的所有事情，但 Tomcat 在 WAR 文件之外看不到任何静态资源。

我的静态资源结构：

```
/home/user/admin-images/-
                   -234bF5_image/image.jpg
                   -572d44_otherImage/otherImage.jpg
                   -12A4uR_otherImage/otherImage.jpg 
```

管理员.xml：

```
<Context path="/admin" 
        docBase="path/to/application/target" reloadable="false">
    <WatchedResource>WEB-INF/web.xml</WatchedResource>
    <Manager pathname="admin" />
</Context> 
```

上传.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context path="/admin" aliases="/images=/home/user/admin-images">

</Context> 
```

上下文部署图像后无法访问：

```
http://localhost:8080/admin/images/234bF5_image/image.jpg 
```

当我尝试达到这一点时，我收到无法显示图像的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T07:12:39.923

我没有设法让它工作。但我找到了另一种在 Web 应用程序之外提供静态图像的解决方案。

您需要在 Tomcat 配置中的 server.xml 中定义上下文：

server.xml（这必须进入“主机”标签）：

```
...
...
<Host>
    ...
    ...
    <Context docBase="/home/user/admin-images/" path="/images" />
    ...
    ...
</Host>
...
... 
```

这样我就可以得到这样的静态图像：[http://localhost:8080/admin/images/234bF5_image/image.jpg]

我的新问题是： **这种共享静态资源的方式安全吗？它有什么缺点吗？**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T09:32:56.853

我设法得到别名来处理这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context aliases="/the_alias_path=/path/to/a/file/or/folder/on/your/disk,another_alias_path=/path/to/another/file/or/folder/on/your/disk" antiJARLocking="true" path="/your/app/context"/> 
```

# mysql - Mysql多表UPDATE第一条记录

> ID：13010046
> 
> 赞同：0
> 
> 时间：2012-10-22T11:00:46.273
> 
> 标签：mysql, join, sql-update

我在两个对象（用户=>公司）之间有一个权限系统，带有`permissions`用于链接的表。现在我需要`firms`使用第一权限用户 ID 更新表。我做了这个查询：

```
UPDATE parim_firms, parim_permissions
SET parim_firms.firm_user_id = parim_permissions.permission_a_id
WHERE parim_firms.firm_user_id = 0
    AND parim_firms.firm_id = parim_permissions.permission_b_id 
```

现在，如果*一个公司散列多个链接用户*，那么它将与第一个或最后一个匹配的用户一起更新吗？

我的逻辑说在第一次更新后`firm_user_id != 0`，该行不再更新。

但我不确定，也许它是否对所有连接行运行查询，最后一行将保留。

如果没有，那么我如何修改查询以仅使用**第一个**匹配的结果进行更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:24:08.237

```
 UPDATE parim_firms 
 SET parim_firms.firm_user_id = 
  ( 
    select  parim_permissions.permission_a_id from parim_permissions 
    WHERE   parim_firms.firm_id = 0 
    AND parim_firms.firm_id = parim_permissions.permission_b_id 
 ) 
```

或者

```
update parim_firms  a
set a.firm_user_id  = b.permission_a_id 
from  parim_permissions  b
WHERE   parim_firms.firm_id = 0 
    AND parim_firms.firm_id = parim_permissions.permission_b_id 
```

# excel - Excel VBA Vlookup 问题

> ID：13010049
> 
> 赞同：1
> 
> 时间：2012-10-22T11:00:59.843
> 
> 标签：vba中设计的字符串方法。, excel, ssis, vba

我是 Excel VBA 的完整初学者。

以下是我编写的代码，它应该遍历工作表中的列，通过引用左侧的列值填充值并引用同一工作簿中的另一个工作表来查找正确的对应值应该是什么。

我使用了一个`While`循环，因此我可以将此`VLOOKUP`宏应用于列中的每个单元格（只有查找值会发生变化，这应该是表示左侧列的变量）：

```
Dim result As String
Dim sheet As Worksheet
Dim rownum As Integer
Dim iterator As Integer
Dim lookup_value As String
Dim vlookupString1 As String

Set sheet = ActiveWorkbook.Sheets("datasheet")
rownum = sheet.Range("A1").End(xlDown).Row
Set iterator = 3

While iterator < rownum

lookup = "M" & iterator
vlookup1String = "=VLOOKUP(" & lookup & ",'GICS Sub-industry codes'!$A$2:$B$155,2,FALSE)"
With ActiveSheet.Cells
       Range("N" & iterator).Select
       Selection.Value = vlookup1String
End With
iterator = iterator + 1

End While 
```

我在说“预期如果或选择或子...”时收到错误@end

1）我犯了语法错误吗？
2）我的方法是否正确。我只在另一个地方观察到了这种`VLOOKUPS`在[vba中设计的字符串方法。](/questions/tagged/vba "显示标记为“vba”的问题")它似乎最适合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:16:44.317

**修复你的代码**你不
应该使用你的循环。`Wend``End While`

**更清洁的替代方案**
但您可以一次填充整个范围，如下所示

1.  最好从底部“循环”一个范围，而`End(xlup)`不是向下看`End(xlDown)`（不依赖空格）
2.  您几乎不需要`Select`在 VBA中使用

*进一步说明*

1.  `rng1`*设置从工作表数据表*中 A 列中最后使用的单元格 到 A3的工作范围
2.  `rng1.Offset(0, Range("N1").Column - 1)`表示将 rng1（即 A 列）偏移 13 列以使用 N 列（即 OFFSET A by 14-1）进行公式插入
3.  我使用宏记录器在第 N 列中获取了此部分所需的代码`"=VLOOKUP(RC[-1],'GICS Sub-industry codes'!R2C1:R155C2,2,FALSE)"`。
4.  IN `R1C1`speak，`RC[-1]`意思是指同一行中的单元格，但在左边一列。因此在 中`N3`，公式将以 开头`=VLOOKUP(M4..)`，因此在 中`N30`，公式将以 `=VLOOKUP(M30..) 等开头

**建议代码**

```
Sub QuickFill()
Dim ws As Worksheet
Dim rng1 As Range
Set ws = Sheets("datasheet")
Set rng1 = ws.Range(ws.[a3], ws.Cells(Rows.Count, "A").End(xlUp))
rng1.Offset(0, Range("N1").Column - 1).FormulaR1C1 = "=VLOOKUP(RC[-1],'GICS Sub-industry codes'!R2C1:R155C2,2,FALSE)"
End Sub 
```

# phpunit - ZF2 单元测试相册模块返回路由问题

> ID：13010051
> 
> 赞同：2
> 
> 时间：2012-10-22T11:01:11.077
> 
> 标签：phpunit, zend-framework2

我正在尝试 Zf2 专辑模块中的 phpunit。我遇到了一个关于路由的错误。

下面是调试信息。它说'找不到名称为“专辑”的路由'，但是当我检查相册模块文件夹中的 module.config.php 时，我看到设置正确，并且在浏览器中重定向到该路由工作正常。

```
Album\Controller\AlbumControllerTest::testDeleteActionCanBeAccessed
Zend\Mvc\Router\Exception\RuntimeException: Route with name "album" not found
D:\www\zend2\vendor\zendframework\zendframework\library\Zend\Mvc\Router\SimpleRouteStack.php:292
D:\www\zend2\vendor\zendframework\zendframework\library\Zend\Mvc\Controller\Plugin\Url.php:88
D:\www\zend2\vendor\zendframework\zendframework\library\Zend\Mvc\Controller\Plugin\Redirect.php:54
D:\www\zend2\module\Album\src\Album\Controller\AlbumController.php:80
D:\www\zend2\vendor\zendframework\zendframework\library\Zend\Mvc\Controller\AbstractActionController.php:87
D:\www\zend2\vendor\zendframework\zendframework\library\Zend\EventManager\EventManager.php:468
D:\www\zend2\vendor\zendframework\zendframework\library\Zend\EventManager\EventManager.php:208
D:\www\zend2\vendor\zendframework\zendframework\library\Zend\Mvc\Controller\AbstractController.php:108
D:\www\zend2\tests\module\Album\src\Album\Controller\AlbumControllerTest.php:35
C:\wamp\bin\php\php5.4.3\phpunit:46 
```

我知道 AlbumController.php 第 80 行中的问题是

```
return $this->redirect()->toRoute('album'); 
```

但不确定为什么它不起作用。有人遇到并克服过这样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:37:40.193

为避免重复代码，您可以从模块配置加载路由：

```
$module = new \YourNameSpace\Module();
$config = $module->getConfig();

$route = \Zend\Mvc\Router\Http\Segment::factory($config['router']['routes']['Home']['options']);

$router = new \Zend\Mvc\Router\SimpleRouteStack();
$router->addRoute('Home', $route); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:24:13.517

我希望它能节省大约。在zend framework 2代码中搜索30分钟：

```
class AlbumControllerTest extends PHPUnit_Framework_TestCase
{

//...

    protected function setUp()
    {
        $bootstrap        = \Zend\Mvc\Application::init(include 'config/application.config.php');
        $this->controller = new AlbumController();
        $this->request    = new Request();
        $this->routeMatch = new RouteMatch(array('controller' => 'index'));
        $this->event      = $bootstrap->getMvcEvent();

        $router = new \Zend\Mvc\Router\SimpleRouteStack();
        $options = array(
                    'route'    => '/album[/:action][/:id]',
                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'id'     => '[0-9]+',
                    ),
                    'defaults' => array(
                        'controller' => 'Album\Controller\Album',
                        'action'     => 'index',
                    ),
            );
        $route = \Zend\Mvc\Router\Http\Segment::factory($options);

        $router->addRoute('album', $route);

        $this->event->setRouter($router);
        $this->event->setRouteMatch($this->routeMatch);
        $this->controller->setEvent($this->event);
        $this->controller->setEventManager($bootstrap->getEventManager());
        $this->controller->setServiceLocator($bootstrap->getServiceManager());
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:15:31.110

实际上，简单的方法是从服务管理器获取配置数据：

```
$config = $serviceManager->get('Config'); 
```

该函数的完整代码`setUp()`：

```
protected function setUp() {
    $serviceManager = Bootstrap::getServiceManager();
    $this -> controller = new AlbumController();
    $this -> request = new Request();
    $this -> routeMatch = new RouteMatch(
        array(
            'controller' => 'index',
        )
    );
    $this -> event = new MvcEvent();
    $config = $serviceManager->get('Config');
    $routerConfig = isset($config['router']) ? $config['router']  : array();
    $router = HttpRouter::factory($routerConfig);
    $this -> event -> setRouter($router);
    $this -> event -> setRouteMatch($this -> routeMatch);
    $this -> controller -> setEvent($this -> event);
    $this -> controller -> setServiceLocator($serviceManager);
} 
```

# objective-c - 如何在编译时强制本地化或在运行时更好

> ID：13010054
> 
> 赞同：0
> 
> 时间：2012-10-22T11:01:18.290
> 
> 标签：objective-c, ios, localization

我有一个 IOS 项目，根据语言显示许多不同的图像，我找不到在运行时强制加载正确图像的方法（而不是将语言切换到另一种语言）。实际上，似乎在 AppDelegate 有机会干预之前加载了文件。

如果我在 appDelegate (didFinishLaunchingWithOptions:) 中这样做：

```
[[NSUserDefaults standardUserDefaults] setObject: [NSArray arrayWithObjects: @"es", @"en", nil] forKey:@"AppleLanguages"]; 
```

已经太晚了，图像已经以错误的语言加载。因此，为了实现这一点，我将 NSUserDefaults 移到了 main() 调用中，这个技巧很有效。但我的问题是：Apple 会拒绝我的应用程序吗？有没有更好、更干净的方法在编译时同步语言（或使用 plist 或类似的东西）？

**更新**

似乎只是替换 [[NSUserDefaults standardUserDefaults] setObject: forKey:]，在调用我的 nib 文件之前的进一步步骤就可以了。这就像 [NSUserDefaults standardUserDefaults] 被异步调用。因此，也许在我的 nib 文件加载后实际评估了 setter 方法。但是我可以通过 info.plist 更改本地化设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:44:33.880

您可以本地化 Info.plist (InfoPlist.strings)，这样您就可以为每种语言设置 Default.png。

# jenkins - 无法在詹金斯的执行外壳中访问构建参数

> ID：13010055
> 
> 赞同：2
> 
> 时间：2012-10-22T11:01:20.460
> 
> 标签：jenkins

我正在尝试通过 Jenkins 参数化构建中的执行 shell 步骤调用 python 脚本。问题是我需要将构建参数传递给不会发生的 python 脚本。这是我在执行 shell 中调用 python 脚本的方式：

```
python2.7 C:\test\my_script.py  -m $module 
```

`$module`作为空字符串传递。

我试过用 Execute Windows 批处理命令，`%module%`效果很好。但我需要在执行 shell 而不是 Windows 批处理命令上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:45:50.717

看起来您在 Windows 上运行（“ **C:\test\my_script.py ...** ”），因此“执行 shell”将无法正常工作。

应该使用**执行 Windows 批处理命令**或将您的作业移动到 Unix/Linux 机器（可以使用 Jenkins-Agent）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-11T18:25:34.023

尝试这个

```
python2.7 C:\test\my_script.py  -m $MODULE 
```

从[文档](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build)

> 注意，由于windows和unix环境变量区分大小写的不同，参数添加的环境变量**都是大写的**。

因此，请尝试使用`$MODULE`而不是`$module`

# django - “Todos.user”必须是“UserProfile”实例

> ID：13010064
> 
> 赞同：1
> 
> 时间：2012-10-22T11:01:56.340
> 
> 标签：django, django-models, django-forms, django-views

出现错误“Todos.user”必须是“UserProfile”实例。有人可以解释为什么吗？我希望 Todos 中的用户应该指向 UserProfile 并且我在 Todos 中保存的任何内容都应该显示在 /profile/ 中？

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    birth =models.DateField()
    name = models.CharField(max_length=100)
    def __unicode__(self):
        return self.name

class Todos(models.Model):
    user     = models.ForeignKey(UserProfile)
    title    = models.CharField(max_length=100)
    created  = models.DateField()
    start_time     = models.TimeField()
    end_time     = models.TimeField()
    def __unicode__(self):
            return unicode(self.user) 
```

形式

```
class todosform(ModelForm):
    title       = forms.CharField(label=(u'Todo'))
    created     = forms.DateField(label=(u'Date'))
    start_time        = forms.TimeField(label=(u'Start Time'))
    end_time        = forms.TimeField(label=(u'End Time'))
    #user        = forms.CharField(label=(u'username')
    class Meta:
        model = Todos
        exclude=('user',)

#url todo url(r'^todo/$', 'registration.views.todo'), 

def todo(request):
    if request.user.is_authenticated(): 
        Todos.objects.filter(user=request.user)
    if request.method == 'POST':
        form =formtodos(request.POST)
       if form.is_valid():# All validation rules pass
           todoss = form.save(commit=False)
           todoss.user = request.user
           form.save()
           return HttpResponseRedirect('/profile/')
    else:
        form = formtodos() 

    context = {'form':form}
    return render_to_response('todo.html', context, context_instance=RequestContext(request))

#url profile url(r'^profile/$', 'registration.views.Profile'),

@login_required # decorator to check if request login
def Profile(request):
    if not request.user.is_authenticated(): #if user not logged in
        return HttpResponseRedirect('/login/') 
    #model = request.user.todos_set.all().order_by('created')[:7]
    #u = Todos.objects.filter(created_by = request.user).get(pk=user)
    registration = request.user.get_profile
    context = {'registration':registration }
    return render_to_response('profile.html',context,context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:05:26.617

您的`user`字段`Todos`是 ForeignKey `UserProfile`，而不是`User`。`request.user`是 的一个实例`User`。你可以这样做：

```
todoss.user = request.user.get_profile() 
```

# jquery - 在父 html 中使用 jquery 在 IE8 中呈现 Rgraph 时面临问题

> ID：13010065
> 
> 赞同：1
> 
> 时间：2012-10-22T11:01:59.267
> 
> 标签：jquery, rgraph

我有 2 个 html 一个调用另一个。使用 jquery.ready 第二个 JSP 实际上有图形的代码。在 Firefox、Chrome、Safari 中一切正常。和 IE9

但是使用 jquery 的 ready 方法在 IE8 中无法正常工作是我直接访问 line.htm 它在 IE8 上也可以正常工作

* * *

```
<html>
<head>
<script src="htmls/js/RGraph.line.js" charset="UTF-8"></script>
<!--[if lt IE 10]><script src="http://www.rgraph.net/excanvas/excanvas.js"  charset="UTF-8"></script><![endif]-->
<script>
$(document).ready(function() {
alert('parent');
$("#Graphvisualization").load('line.htm');});
</script>
</head>
<body>
<div id="Graphvisualization"></div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:26:33.117

这不起作用：

src="http://www.rgraph.net/excanvas/excanvas.js"

将文件复制到您自己的服务器并从那里使用它。

# macos - 在 IKImageView 中缩放大图像

> ID：13010067
> 
> 赞同：4
> 
> 时间：2012-10-22T11:02:10.210
> 
> 标签：macos, osx-mountain-lion, ikimageview

我在 NSScrollView 中有一个 IKImageView。现在，我有两个问题：

1.  当我显示一个大图像并对其进行缩放时，动画会变得非常糟糕。有没有办法让它更流畅地切换图像？

2.  当图像放大到比 IKImageView 大时，缩放 - 左侧的 centerPoint 锁定 - IKImageView 的底部。如何设置缩放 - centerPoint？

谢谢

f91kdash

# flash - 循环上的圆形计数器不更新

> ID：13010068
> 
> 赞同：1
> 
> 时间：2012-10-22T11:02:16.083
> 
> 标签：flash, loops, actionscript, counter

我正在尝试做一些相对简单的事情，但似乎我有一个星期一。我有一个循环“numLoops”，它控制着我的 Flash 测验中的绝大多数脚本。在每个问题结束时 numLoops 触发器，我试图获得它的视觉表示。我有一个名为“questioncounter”的动态文本框，可以成功显示“roundcounter”。然而，我的问题是文本似乎不会在 numLoops 触发时更新，它只是保持在 1。

目前我有

```
var roundcounter:Number = 1;

questioncounter.text = roundcounter.toString();

function addround():void{
    numLoops ++;
    var roundcounter:int = roundcounter ++;
    trace("Round updated")
    } 
```

任何建议将不胜感激

谢谢

编辑：我的“跟踪”也没有出现，所以我的功能显然没有触发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:07:16.310

问题是您正试图将 Number 实例化为 int。这可能是可能的，但您必须为整数创建另一个变量。但简单的解决方法是：

```
var roundcounter:int = 1;

questioncounter.text = roundcounter.toString();

function addround():void{
    numLoops ++;
    roundcounter ++;
    trace("Round updated")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:16:00.337

设法使用我的 numLoops 变量进一步修剪它

```
function addround():void{
    numLoops;
    questioncounter.text = (numLoops + 1).toString();
    trace("Round updated")
}
addround(); 
```

感谢您的帮助，您的回答给了我这个想法！

# php - 如何通过 ajax 用 php 回显 javascript 脚本

> ID：13010072
> 
> 赞同：0
> 
> 时间：2012-10-22T11:02:42.650
> 
> 标签：php, javascript, ajax

我希望在条件为真时回显一个javascript脚本，另一个页面通过ajax调用该脚本所在的文件，并且由于某种原因它不会回显该`<script>...</script>`部分。如果我在那里放置一个常规字符串，它可以工作，但它不会回显 javascript。

```
$max = $int + 10;
  if($max >= $num_rows){
    $end = "<script>var end=1</script>";
  } else {
    $end = "<script>var end=0</script>";
  }

 echo $end; 
```

ajax: function onScroll(event) { // 检查我们是否在 broser 窗口底部边缘的 100 像素内。var closeToBottom = ($(window).scrollTop() + $(window).height() > $(document).height() - 100);

```
 if(closeToBottom) {

            if(end==0){
             // GET THE 10 NEXT ITEMS;
              if (window.XMLHttpRequest)
                 {// code for IE7+, Firefox, Chrome, Opera, Safari
                 xmlhttp=new XMLHttpRequest();
                 }
               else
                 {// code for IE6, IE5
                 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                 }
               xmlhttp.onreadystatechange=function()
                 {
                 if (xmlhttp.readyState==4 && xmlhttp.status==200)
                   {
                   //document.getElementById("tiles").innerHTML=xmlhttp.responseText;

                         $('#tiles').append(innerHTML=xmlhttp.responseText);
                         int = int+10;
                         // Clear our previous layout handler.
                         if(handler) handler.wookmarkClear();

                         // Create a new layout handler.
                         handler = $('#tiles li');
                         handler.wookmark(options);

                         $(function() {
                            // Select all links whose attribute rel starts with lightbox
                            $('a[rel^=lightbox]').lightBox();
                         });

                           FB.XFBML.parse();

                   }

                 }
            } 
               $.extend({
                    getUrlVars: function(){
                      var vars = [], hash;
                      var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
                      for(var i = 0; i < hashes.length; i++)
                      {
                        hash = hashes[i].split('=');
                        vars.push(hash[0]);
                        vars[hash[0]] = hash[1];
                      }
                      return vars;
                    },
                    getUrlVar: function(name){
                      return $.getUrlVars()[name];
                    }
                  });

                  var request = $.getUrlVar('item');

                  if(request!=null){
                    var allR = "?int="+int+"&item="+request;
                  } else {
                    var allR = "?int="+int;
                  }

               xmlhttp.open("GET","tiles.php"+allR,true);
               xmlhttp.send();

             }

        }; 
```

谁能解决这个问题？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:13:33.483

在 javascript 中使用 eval() 来加载 javascript。只需查看以下示例

```
 var div = document.getElementById("tiles");
   div.innerHTML =xmlhttp.responseText;
   var x = div.getElementsByTagName("script"); 
   for(var i=0;i<x.length;i++)
   {
       eval(x[i].text);
   } 
```

这是您应该在收到响应的地方注入的一小段代码。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:14:18.657

问题是您必须检查通过 Ajax 下载的文档位的 DOM 树，并使用 手动评估它`eval`，因为出于安全原因，浏览器不会自动解析和运行通过远程调用嵌入的 JavaScript 代码。

你可以这样做：

```
var scripts = domElement.getElementsByTagName("script");
for (var i = 0; i < scripts; i ++) {
    eval(scripts[i].text);
} 
```

# android - 如何在 webView 上播放 youtube 视频（youtube 嵌入 url）

> ID：13010073
> 
> 赞同：3
> 
> 时间：2012-10-22T11:02:51.690
> 
> 标签：android, webview, youtube

我无法播放 youtube 视频。当我点击播放按钮时，视频只显示黑屏。有人知道我的代码有什么问题吗？

我试过这个

```
WebView content = new WebView(MainActivity.this);
content.getSettings().setJavaScriptEnabled(true);
content.getSettings().setPluginState(PluginState.ON);
content.setWebChromeClient(new WebChromeClient() {
});
String mimeType = "text/html";
String encoding = "UTF-8";
String html = "<iframe class=\"youtube-player\" type=\"text/html\" src=\"http://www.youtube.com/embed/vS6mwyHNacA?rel=0\" frameborder=\"0\"></iframe>";
content.loadDataWithBaseURL("", html, mimeType, encoding, "");
rootLinearLayout.addView(content); 
```

还有这个

```
WebView content = new WebView(MainActivity.this);
content.getSettings().setJavaScriptEnabled(true);
content.getSettings().setPluginState(PluginState.ON);
content.setWebChromeClient(new WebChromeClient() {
});
String url = "http://www.youtube.com/embed/vS6mwyHNacA?rel=0";
content.loadUrl(url);
rootLinearLayout.addView(content); 
```

还是不会玩。需要闪存吗？我不想使用 Flash 进行播放

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:20:26.573

试试这个

```
Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse(IDryIceWebConstants.YOUTUBE_EMBED_BASE_URL+video.getYoutube_code()));
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:24:45.203

事实证明，我用于测试的 android 设备需要 flash 才能使其工作。该代码适用于 android 4.0 或更高版本。我需要做的就是检查 sdk 版本。如果是 4.0 或更高版本，请在 webview 上播放，如果不是，请使用 youtube 意图

# jquery - 在 jqGrid 子网格中获取自定义 rowId

> ID：13010075
> 
> 赞同：0
> 
> 时间：2012-10-22T11:02:59.803
> 
> 标签：jquery, mysql, spring, jqgrid

当我尝试展开一行父表以显示子网格时，正在传递的 ID 是由 javascript 生成的。因此，父表的第一行的 rowid 为 1，第二行的 rowid 为 2。因此，当我单击展开每个子网格时，调用的 URL 是`myurl.html?q=1`and `myurl.html?q=2`。我正在使用`q=?`查询的一部分来获取子网格的行。

但是，问题是我的父行以唯一的 id 存储在数据库中，这不是`1 2 3 etc.`Mysql 自动生成的 id。

**问题**

如何更改 parentGrid 或 subGrid 的行为，以便在展开子网格时，而不是自动生成，`1, 2, 3, etc.`我得到父行的实际 ID，因为它在数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:47:46.767

您写了有关“自动生成的 1、2、3 等”的文章。它表明您以不正确的方式填充网格。从服务器返回的数据应该包含`id`用作`id`行 ( `<tr>`) 并经常命名为 rowid。只有当 jqGrid 在输入数据中没有找到任何有关 rowid 的信息时，才会默认使用值 1、2、3 等。

*如果您有来自数据库的本机*ID 和网格行，那么这种行为不仅是不好的。更糟糕的是，如果页面上有多个作为一个网格，或者如果您有带有子网格的网格，您可能会收到 id 重复。

所以你应该遵循两条规则：

1.  当 id 存在时，从数据库返回包含本机 id 的数据。
2.  `idPrefix`如果您使用子网格或者页面上有多个网格，请使用。

我建议您阅读[答案](https://stackoverflow.com/a/10247633/315935)和[这个](https://stackoverflow.com/a/10514809/315935)。[另一个答案](https://stackoverflow.com/a/9698470/315935)对您来说也可能很有趣。

# php - 类的对象无法转换为字符串

> ID：13010076
> 
> 赞同：0
> 
> 时间：2012-10-22T11:03:07.253
> 
> 标签：php

我有这个代码：

```
class int64(){
    var $h; var $l;
    function int64(){
        $this->$h=$h;
        $this->$l=$l;
    }
}

function int64copy($dst,$src){
    $dst.$h = $src.$h;
    $dst.$l = $src.$l;
} 
```

在调用函数时`int64copy`它的说法`Catchable Fatal Error: object of the class int64 could not be converted to string in line`

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:05:44.627

您不能在对象上使用 doc 表示法 - 它试图连接对象，因此它调用 int64::__toString() - 它失败了。

编辑：更好的例子：

```
class int64 {

    public $h; 
    public $l;

    function __construct($h, $l) {
        $this->h = $h;
        $this->l = $l;
    }

    public function __toString()
    {
        return sprintf('h: %s, l: %s', $this->h, $this->l);
    }

}

$a = new int64(1, 2);
$b = clone $a;

echo $a; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:13:31.320

访问属性的符号是`$obj->prop`. 那是 a`->`后面没有 a `$`。这在课堂内外都使用。

`.`是字符串连接运算符。

加上其他一些小修复应该会给你：

```
class int64 {

    public $h,
           $l;

    public function int64(){
        $this->h = $h;
        $this->l = $l;
    }

}

function int64copy($dst, $src){
    $dst->h = $src->h;
    $dst->l = $src->l;
} 
```

`$h`里面的and`$l`变量仍然会有问题`int64::int64()`。那些应该来自哪里？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:15:18.157

您所需要的只是[克隆](http://php.net/manual/en/language.oop5.cloning.php)：*创建具有完全复制属性的对象的副本并不总是需要的行为。*

```
class int64 {
    public $h;
    public $l;

    function __construct() {
    }
}

$src = new int64();
$src->h = "h";
$src->l = "l";

$dst = clone $src ;
echo $dst->h , " " , $dst->l ; 
```

# jquery - 使用 jQuery 在表单上添加和删除类

> ID：13010087
> 
> 赞同：0
> 
> 时间：2012-10-22T11:03:37.893
> 
> 标签：jquery, forms

我有两个区域，一个区域用于启用项目，另一个用于禁用项目。用户可以单击添加将内容发送到启用区域。

问题是，当我更改表单的类以使其删除而不是添加时，什么也没有发生。

我已经解决了这个问题。您应该能够来回切换您希望的次数，而不仅仅是一次。

您可以在源代码中看到类名实际上正在更改，但似乎我的 jQuery 函数无法识别更改。

请参阅下面的 jsfiddle 示例：

[http://jsfiddle.net/crW9m/7/](http://jsfiddle.net/crW9m/7/)

这是我的 HTML 标记：

```
<div class="added">
<form class="add">
<h3>One item </h3>
 <input type="submit" value="Add" />
</form>
    </div>

 <div class="deleted">
    <form class="delete">
        <h3>Second item </h3>    
         <input type="submit" value="Delete" />
    </form>
    </div>

    <div id="destination">
        <p>Destination for added items</p>
    </div>
    <div id="destination2">
        <p>Destination for deleted items</p>
    </div> 
```

这是随之而来的 jQuery 代码：

```
 $(document).ready(function() {
    $(".add").click(function(event){

    var $form = $(this),           
        $inputs = $form.find("input, select, button, textarea"),            
        serializedData = $form.serialize();

            $form.removeClass("add").addClass("delete");
        $inputs.val('Delete');
            $form.appendTo("#destination");

    // prevent default posting of form
    event.preventDefault();
    });

       $(".delete").click(function(event){        
        var $form = $(this),        
        $inputs = $form.find("input, select, button, textarea"),

        serializedData = $form.serialize();

            //var submit = $form.find(":submit").hide();
            $form.removeClass("delete").addClass("add");
            $inputs.val('Add');
            $form.appendTo("#destination2");

    // prevent default posting of form
    event.preventDefault();
    });     

  });
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:14:03.213

我已经创建了您的脚本的更新版本。

[http://jsfiddle.net/crW9m/9/](http://jsfiddle.net/crW9m/9/)

我唯一的改变是使用委托（jQuery 函数[on](http://api.jquery.com/on/)）而不是你的点击事件。当脚本运行时（通常在页面加载时），click 事件被添加到与选择器匹配的实际元素中。如果稍后添加其他元素，它们将不受事件的影响，因为事件被添加到特定元素而不是一般选择器。委托通过检查实际事件中的匹配元素来解决此问题。

```
// $(".delete").click(function(event){ /*...*/ }); // Replace this with:
$(document).on('click', '.delete', function(event){ /*...*/ });

// $(".add").click(function(event){ /*...*/ }); // And replace this with:
$(document).on('click', '.add', function(event){ /*...*/ }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T11:18:56.663

The problem is that binding to click events is made at document load, and just changing element class won't affect this bindings. Use jQuery `live()` method, instead of bindings.

```
$(".add").live("click", function(event){ 
```

instead of

```
$(".add").click(function(event){ 
```

Here is the jsfiddle: [http://jsfiddle.net/crW9m/8/](http://jsfiddle.net/crW9m/8/)

# android - 如果在android中使用runnable，确定线程是否正在运行

> ID：13010090
> 
> 赞同：0
> 
> 时间：2012-10-22T11:03:58.233
> 
> 标签：android, multithreading

我在android中创建了一个用于多线程的程序。

当我点击其中一个按钮时，它的线程启动并将值打印到 EditText 现在我想确定该线程是否正在运行，以便我可以在单击时停止线程（如果它正在运行）并启动一个新线程（如果它没有在此处运行）是亩代码：

```
public void startProgress(View view) {
        final String v;
        if(view == b1)
        {
            v = "b1";
        }
        else
        {
            v = "b2";
        }
        // Do something long
        Runnable runnable = new Runnable() {
            @Override
            public void run() {
                //for (int i = 0; i <= 10; i++) {
                while(true){
                    if(v.equals("b1"))
                    {
                        i++;
                    }
                    else if(v.equals("b2"))
                    {
                        j++;
                    }

                    try {
                        if(v.equals("b1"))
                        {
                            Thread.sleep(3000);
                        }
                        else if(v.equals("b2"))
                        {
                            Thread.sleep(1000);
                        }

                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            //  progress.setProgress(value);
                            if(v.equals("b1"))
                            {
                                String strValue = ""+i;
                                t1.setText(strValue);
                            }
                            else
                            {
                                String strValue = ""+j;
                                t2.setText(strValue);
                            }

                            //t1.setText(value);
                        }
                    });
                }
            }
        };
        new Thread(runnable).start();
    }

@Override
    public void onClick(View v) {
        if(v == b1)
        {
            startProgress(b1);
        }
        else if(v == b2)
        {
            startProgress(b2);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:05:50.273

在您的线程中使用静态 AtomicBoolean 并相应地翻转其值。如果布尔值为 true，则您的线程已经在运行。如果为真则退出线程。在退出线程之前将值设置回 false。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:10:18.313

代替那些凌乱的代码，[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)将完成您需要的工作，并增加了可读性......

它甚至有一个`getStatus()`功能[可以告诉你它是否还在运行](http://developer.android.com/reference/android/os/AsyncTask.Status.html)。

环顾四周，你会发现大量的例子（这里不再写一个）。我将简单地从上面链接的文档中复制一个：

* * *

## 用法

AsyncTask 必须子类化才能使用。子类将覆盖至少一种方法（doInBackground(Params...)），并且通常会覆盖第二种方法（onPostExecute(Result)。）

下面是一个子类化的例子：

```
 private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     }
 } 
```

一旦创建，任务就会非常简单地执行：

```
new DownloadFilesTask().execute(url1, url2, url3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:10:00.630

有一些方法可以检查线程属性

您可以通过以下方式检查 Thread is Alive()

`Thread.isAlive()`方法它返回布​​尔值。

您可以找到运行的线程

```
Thread.currentThread().getName() 
```

谢谢

# vba - vba中的错误1004

> ID：13010093
> 
> 赞同：1
> 
> 时间：2012-10-22T11:04:09.767
> 
> 标签：vba, excel

您好，我有一些代码用于选择最接近用户值的值，即

```
Private Sub CommandButton1_Click() 
Dim col As Integer 
col = Me.TextBox1.Value
ActiveCell.FormulaR1C1 = "=SMALL($A$1:$EN$1,COUNTIF($A$1:$EN$1,""<" & col & """)+1)"
End Sub 
```

但我收到 RUNTIME ERROR 1004 任何人请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:26:42.917

您调用 R1C1 样式公式属性，但提供 A1 样式公式。试试这个：

```
ActiveCell.Formula = "=SMALL($A$1:$EN$1,COUNTIF($A$1:$EN$1,""<" & col & """)+1)" 
```

即`ActiveCell.Formula`代替`ActiveCell.FormulaR1C1`.

# sharepoint-2010 - SharePoint 2010 工作流与 Windows WF4

> ID：13010094
> 
> 赞同：0
> 
> 时间：2012-10-22T11:04:10.687
> 
> 标签：sharepoint-2010, workflow, workflow-foundation-4

我们被要求查看 SharePoint 2010 Standard（我们目前在 SP2007 上有一个小型 Intranet），旨在构建许多自定义工作流解决方案。

我对 SP2010 没有太多经验，但从一段时间的学习/测试来看，它似乎是一个非常繁琐的系统，更适合允许个人/团队为特定目的创建自己的网站？

我还看到了一些关于 WF4 的博客——我的经验更少！WF4 可以“独立”使用还是需要 SP2010？

根据变量，工作流程的范围从非常基本到相当复杂。例如“路由到链中的下一个人”，“基于值路由到团队”。

所以我的问题是：有人可以帮助我决定尝试构建工作流程的路线吗？我什至不确定要问他们每个人的问题！我很欣赏这是主观的，但我敢肯定有人对两者都有经验吗？

我的经验是 C#.Net/MVC 和 WCF - 简单地设置和配置 SP2010 开发环境的开销已经让我对 SP2010 保持警惕！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:07:48.857

I can´t tell you much about SharePoint other than that SharePoint 2010 still uses WF3 for its workflow engine. In SP2013 they upgraded to WF4 so if you are looking to run WF4 style workflows you will need to use that instead.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:17:02.180

Windows Workflow Foundation 独立于 SharePoint。您可以创建自己的工作流主机和持久层。APress 有一本很棒的书，[WF 基础，](http://www.apress.com/9781590597187)它很好地介绍了 .net 3.5 中的工作流。

SharePoint 2010 基于 .net 3.5 SP1 并使用旧的/原始的工作流引擎。它实现了自己的主机和持久性，因此它完全是自己的野兽。SP2007 和 SP2010 中有大量可用于 Workflow 的信息，这很好，因为其中列出了警告、例外和“您需要知道这一点，否则它会咬到您”的案例。此外，SharePoint 2010 允许以多种方式创建工作流：通过 Visual Studio（类似于“真正的”WF 项目）、通过 SharePoint Designer 和通过 Visio（后两者受到限制）。

WF4 是 Microsoft 在 .net 4.0 中引入的新工作流引擎。**SharePoint 2010不**支持它，但下一版本 - SharePoint 2013 - 基于 .net 4.5，理论上应该提供对 WF4 的支持。我还没有验证这一点。

# objective-c - 使用 xcode 进行调试时，我们如何快速知道视图的框架（或其他信息）？

> ID：13010095
> 
> 赞同：0
> 
> 时间：2012-10-22T11:04:13.833
> 
> 标签：objective-c, xcode, debugging, uiview

这困扰了我好几次。

例如，我正在调试一个自定义子视图。

我想知道我的自定义子视图具有的子视图类型。

我输入：

```
(lldb) po self.subviews
error: property 'subviews' not found on object of type 'BGBaseOfAllUIView *'
error: 1 errors parsing expression
(lldb) 
```

这是愚蠢的，因为 self 具有 UIView 作为祖先并且支持 .subviews 属性。

我打字

```
(lldb) po self
(BGDetailBusinessViewController *) $2 = 0x088d01f0 <BGDetailBusinessViewController: 0x88d01f0> 
```

这不是很多信息。它没有解释框架是什么或事情的去向。

所谓的变量视图也无济于事。

![在此处输入图像描述](../Images/0f110ad9e132c3058b9393d56241f400.png)

假设我想知道一些简单的信息。什么是 self.subviews？什么是self.frame？

为什么做这么简单的事情这么难？

如何做到这一点的唯一方法是从我的朋友那里借一个代码并添加

```
#define CLog( s, ... ) NSLog( @"<%p %@:(%d)> %@", self, [[NSString stringWithUTF8String:__FILE__] lastPathComponent], __LINE__, [NSString stringWithFormat:(s), ##__VA_ARGS__] )
#define PO(x) CLog(@#x ": %@", x) 
```

但这不是实时的。我必须先修改程序并插入东西才能获得简单的信息。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:14:46.300

请避免在你的问题中抱怨——人们必须阅读大量“它不能按照我想要的方式工作”才能解决任何真正的问题——这就是我们来这里不是为了听你发泄你的挫败感.

首先要注意的是：`BGDetailBusinessViewController`是 viewController 而不是视图 - 所以不，它没有子视图，但它管理视图层次结构。根视图将是名为`view`.

因此，要获得子视图，您需要执行类似的操作

```
po [self.view subviews] 
```

# web-hosting - PHP文件不写入当前目录？

> ID：13010105
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:53:52.670
> 
> 标签：web-hosting, php, apache

> **可能重复：**
> [PHP 文件未写入当前目录？](https://stackoverflow.com/questions/13008850/php-file-doesnt-write-to-current-directory)

我在网络主机上有一个 PHP 文件，如下所示：

```
<?php

file_put_contents('test.txt','TEST');    
echo 'OK';

?> 
```

但是`test.txt`当我从浏览器执行页面时，不会创建该文件。为什么不？是权限问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:08:12.970

这很可能是文件夹中的权限错误。您需要确保该文件夹作为 PHP 运行用户的写入权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:15:12.500

我在这种情况下看到的，你总是有权限问题。玩 777, 770 ,760。您将自己解决问题。

# java - 在 Java 中调用 ArrayList.get() 时出现 NullPointerException？

> ID：13010108
> 
> 赞同：0
> 
> 时间：2012-10-22T11:05:03.443
> 
> 标签：java, sockets, nullpointerexception

所以我有一个聊天室，它曾经可以工作，但我稍微更改了代码以尝试一些事情但它们没有工作，所以我试图恢复到我的原始代码，但我不确定我做错了什么，因为现在它正在抛出 NullPointerException。我的代码有一个 PrintWriters 的 ArrayList 和一个 showAll() 方法，正如它所说的那样；向聊天室中的所有人发送消息。所以基本上我想知道的是我怎么会得到例外？

```
 //This is the main code, used to add printwriters to the arraylist and to connect to clients
    //The Communicate thread is used to get input from users and use the showAll() method with that input
    public void listen() {
        listWriters = new ArrayList<PrintWriter>();
        try {
            scanner = new Scanner(System.in);
            portnum = getPortNumber(scanner);
            System.out.println("Listening on " + portnum);
            serverSocket = new ServerSocket(portnum);
            while(true) {
                clientcommunicate = serverSocket.accept();
                System.out.println("Connection accepted: " + clientcommunicate.toString());

                PrintWriter client = new PrintWriter(clientcommunicate.getOutputStream(), true);
                listWriters.add(client);
                Thread t = new Thread(new Communicate(clientcommunicate));
                t.start();
            }
        } catch (IOException ioe) {
            System.err.println(ioe);
            System.err.println("Error.");
            System.exit(1);
        }
    }

    //This uses a printwriter obtained in the Communicate thread; the thread initializes a socket in it with the socket obtained in the constructor
    public void showAll(String msg, PrintWriter printwriter) {
        for(int i = 0; i < listWriters.size(); i++) { //this is where the exception is thrown
            if(!listWriters.get(i).equals(printwriter)) { //if I change the paramater listWriters.size() to a regular integer like 3, and only create 2 clients or even less, the exception is thrown here instead
                listWriters.get(i).println(msg);
            }
        }
    } 
```

编辑：

好的，所以我不再收到错误消息，但现在我似乎无法发送消息。如果我从客户端发送消息，则没有错误，但消息不会显示在任一客户端上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T11:07:39.147

你被`NullPointerException`抛出是因为你试图取消引用（即调用方法，或从中读取字段），一个变量是`null`.

在这种情况下，很明显它`listWriters`是 null （因为它是唯一在发生异常的行上被取消引用的变量 - 查找`.`字符）。由于这是在您的方法中分配的`listen()`，因此我猜如果您在调用`showAll()` *之前*调用会收到此错误`listen()`。

一个非常简单的字段是在其声明中分配`listWriters`给一个空列表，这样它就永远不会为空：

```
private List<PrintWriter> listWriters = new ArrayList<PrintWriter>(); 
```

根据您的应用程序的并发要求，您可能需要做一些更详细的事情，但一般原则是您必须在尝试读取`listWriters` **之前进行初始化。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:08:10.757

您必须在`showAll`方法之前调用`listen`方法。在您的方法之前，您没有`ListWriters`在您的方法中初始化。`listen``showAll`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:08:28.480

那可能是因为，您已经初始化了您的`listWriters`内部`listen()`方法。

因此，如果您的`showAll()`方法在方法之前被调用`listen()`，它将`null`为您获得一个值`listWriters`（假设您已声明`listWriters`为实例变量，并且本身尚未在那里初始化）。

您可以在您声明它的地方尝试`initializing`它。

```
private List<PrintWriter> listWriters = new ArrayList<PrintWriter>(); 
```

# java - 上传 CSV 文件并在数据网格中显示预览

> ID：13010111
> 
> 赞同：0
> 
> 时间：2012-10-22T11:05:16.283
> 
> 标签：java, jquery, ajax, json, struts2

我想将 csv 文件异步上传到后端并在同一页面中显示预览数据，而无需刷新/重新加载页面。所以我想用 AJAX 来做。

我想知道我们如何使用 Ajax 和 Jquery 来做到这一点。我正在使用struts2。struts2 有没有可用的插件？

非常感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:33:19.580

查看[Struts2-jQuery-Plugin](http://code.google.com/p/struts2-jquery/)。然后只需这样做：

```
<s:form action="process-csv">
    <s:file name="fileName"/>
    <sj:submit targets="csvDiv"/>
</s:form>
<sj:div id="csvDiv"/> 
```

在您的 Action`process-csv`中，您应该读取上传的文件，并将其输出，然后它将显示在 div 中`id="csvDiv"`。

请尝试一下，如果您还有其他问题，请再次发布。

**更新**
表格：

```
<s:form action="process-csv">
    <s:file name="fileName"/>
    <sj:submit targets="csvDiv"/>
</s:form>
<sj:div id="csvDiv"/> 
```

动作类：

```
public class ProcessCsv {
    private File fileName;//getter + setter
    private String content;// getter + setter
    public String execute(){
        content = parseCsv(fileName);
        return SUCCESS;
    }
} 
```

您可以使用[OpenCsv 之](http://opencsv.sourceforge.net/)类的库`parseCsv()`
在您的`test.jsp`.

```
<textarea><s:property value="%{content}"/></textarea> 
```

# android - 在android中获取本地化字符串

> ID：13010116
> 
> 赞同：0
> 
> 时间：2012-10-22T11:05:39.520
> 
> 标签：android, localization

我需要以本地化形式获取`phone`and`email`字符串（字符串，而不是联系人的内容）。如何从 android 默认的联系人应用程序或我可以访问的任何其他方式获取本地化字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:07:09.987

您可以尝试查看它是否定义在`android.R.string`. 如果它不存在，则意味着它不是公共字符串，因此不应由您的应用程序使用。

顺便说一句，您不应该对“默认联系人应用程序”做出任何假设，因为制造商经常修改它（例如在三星手机上）。

# grid - 选择 CSS 网格/框架

> ID：13010117
> 
> 赞同：5
> 
> 时间：2012-10-21T19:40:49.397
> 
> 标签：grid, css-frameworks

有许多网格和框架可供选择。谷歌搜索 CSS 框架将返回十几篇文章，这些文章本身列出了许多可供选择的框架。

在选择一个时，如果对所有这些都没有深入了解，很容易迷失方向。

选择 CSS 框架的主要因素是什么，这些选择将如何映射到某些框架？

更一般地说，**如何选择 CSS 框架？**

注意 1：我在这里几乎可以互换使用“网格”和“框架”，但我可能应该使用其中一个。欢迎对此进行更正。

注 2：我很清楚某些选择将取决于品味，因此，这个问题可以变成“最佳”竞赛/主观主题。我试图让它尽可能地负责，因为我很确定很多人都有选择框架的问题/问题，而对此的答案将使社区受益。因此，欢迎对这个问题进行改进，而不仅仅是关闭它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:59:23.953

选择框架时，请考虑以下问题：

**语言**：一些框架是用 SASS 编写的。其他的则用 LESS 编写。还有一些是用纯 CSS 编写的。选择一个用你最熟悉的语言编写的框架。

**特点**：一些框架只提供一个网格。其他人添加排版。还有一些人添加了一大堆自定义 UI 元素。选择一个与您想要的功能最匹配的框架。您不想要一个功能太少或臃肿且包含许多您从未打算使用的功能的框架。

**模块化**：您不想用自己的自定义代码覆盖框架输出的 50%。如果您确实选择了一个功能比您需要的功能更多的框架，请确保它的模块化程度足以轻松摆脱大部分代码膨胀。

**响应性**：如果您希望页面具有响应性，请选择响应式网格。

**跨浏览器支持**：如果您的项目需要支持较旧的浏览器，请确保您选择的框架支持您需要支持的所有浏览器。

我构建了自己的框架[Cascade Framework](http://jslegers.github.com/cascadeframework/)，因为没有一个框架能以我希望的方式回答这些问题。随意检查一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T07:33:22.793

首先要了解您的 Web 项目的要求和目标。

**1\. 您是否只针对移动受众？**

如果你想要一个 Web 应用程序，你需要的不仅仅是 CSS 框架，这是一个移动框架，它通过 Javascript 将特定目标设备的 UI 的外观与功能元素相结合。下一个决定将是该框架是否更好地支持更小的智能手机屏幕、平板电脑屏幕或两者兼而有之。

如果您不需要功能更强大的 Web-App 方法，那么可以选择响应式框架。您必须专注于如何在不同的屏幕分辨率上排列和排序某些页面元素，以及在较小的分辨率下可以关闭哪些页面元素。（这有时会导致利益相关者围绕什么（更）重要和什么不重要展开政治辩论）。

**2\. 您是否同时针对移动和桌面受众？**

您需要一个支持响应式或流畅布局的框架，以最大程度地支持您的受众客户。如果您必须制作的图形设计更加静态，则响应式路线更适合，因为它可以更轻松地在断点内的不同阶段进行规划。目前大多数设计师都遵循灵活的方法，轻量级、优雅、展示性、不那么像门户，这也允许流畅的实现（允许某些或所有页面元素根据客户端/浏览器视口拉伸或增长）。

**3\. 您是否只针对传统受众？**

然后只需选择您确信它允许最简单实施的框架。设计师是否使用了网格？那么也许 CSS 框架适合它。一些 CSS 框架为 Gimp、Photoshop、Illustrator 和其他人提供了各种各样的设计模板，所以也许设计可以基于模板预先实现，这样可以实现最好的实现。

*另外两个考虑：*

**A. 没有平面设计**

如果您从没有明确的设计模板开始，我会选择一个允许轻松集成排版的框架，提供大量示例、用例、预定义的页面元素或组件（按钮、导航、拇指...）。

**B. 时间限制**

没时间？一些框架带有自己的或第三方的自定义脚本或向导。选择您需要的元素或组件，打开或关闭某些 JS 库，重置样式表等，然后下载最终包。而已。

一些框架非常成熟并且经过了很好的测试，因此缺乏一个充满活力的社区可能不会告诉你那么多。根据您的技能，可能不需要大量支持（甚至是一个不好的迹象：网格/框架应该简单并且不会妨碍您。可能出现的问题应该是通常的 CSS 问题常见的，即使没有底层框架的细节也可以回答）。

**两个示例来说明两种方法（更多网格 <-> 更具响应性）：**

[http://960.gs/](http://960.gs/)

一定要看看。按照“查看幻灯片”链接阅读不错的背景信息。真正的网格系统。它还链接到支持流畅和弹性外观的衍生产品。

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

现代，不错的炒作。很多组件。可定制。反应灵敏。

网络应用程序：

[http://jquerymobile.com/](http://jquerymobile.com/)和[http://www.sencha.com/products/touch](http://www.sencha.com/products/touch)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T04:22:53.850

大多数网格有 95% 相同：它们定义列的宽度 + 包括一个 clearfix。

如果您愿意，您甚至可以制作自己的网格。因此，如果我们了解大多数网格本质上是相同的，那么最好使用哪一个？

1) 仅通过下载网格来自定义[Twitter Bootstrap](http://twitter.github.io/bootstrap/customize.html)。这是一个不错的选择，因为大多数人都熟悉“span1、span2、span3”约定。此外，它可以作为固定宽度和流体（即响应式）使用。

2) [960.gs](http://www.960.gs)可能是最常用的固定宽度网格。 [Unsemantic](http://unsemantic.com/)是 960 的响应式继承者。两者都是由 Nathan Smith 开发的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T04:22:20.167

您可以立即提出的一个问题是：

我是否希望框架具有响应性？

该问题的答案将删除您列表中的许多选项。

我要问的另一个主要问题是该项目背后有什么样的社区支持。根据我的经验，投入到一个特定的项目中，然后让它死掉，得不到任何支持是一件痛苦的事。拥有关键支持者和大量追随者的东西真是太好了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T09:13:34.843

考虑到来自 Twitter 的 UI 设计师制作了 Bootstrap，我不会只是把它称为围绕该框架的炒作。它是优秀的代码和最完整的框架。960.gs 是一个网格系统，boostrap 称为脚手架。Bootstrap 也是智能手机友好的。因此，有人必须将 jquerymobile、jquery、960.gs 以及他们需要的所有插件一起破解。Bootsrap 已经捆绑了很多东西，可以让你开始使用并在所有浏览器和手机/平板电脑上运行。

# android - Android SeekBar：当 setProgress 然后 SeekBar 进度跳到开头/中间/结尾

> ID：13010127
> 
> 赞同：1
> 
> 时间：2012-10-22T11:06:00.303
> 
> 标签：android, seekbar

当我点击 setProgress 时，我有一个问题，即如何设置 seekbar 以使其正常工作。进度跳到开头/中间/结尾取决于我单击它的位置。怎么可能解决？

我的尝试：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_video_player);

    getWindow().setFormat(PixelFormat.TRANSLUCENT);
    videoPath = getIntent().getExtras().getString("videoPath");
    videoView = (VideoView) findViewById(R.id.vvPlayer);
    seekBar = (SeekBar) findViewById(R.id.seekBar);
    seekBar.setOnSeekBarChangeListener(this);
        ....
}

 @Override
    public void onPrepared(MediaPlayer mp) {
    // TODO Auto-generated method stub
    seekBar.setMax(mp.getDuration());
    System.out.println("curpos" + mp.getCurrentPosition());
    new Thread(new Runnable() {
        public void run() {
        try {
            while (mPlayer != null && mPlayer.getCurrentPosition() < mPlayer.getDuration()) {
            seekBar.setProgress(mPlayer.getCurrentPosition());
            Message msg = new Message();
            int millis = mPlayer.getCurrentPosition();

            msg.obj = millis / 1000;

            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                e.printStackTrace();
                System.out.println("interrupt exeption" + e);
            }
            }
        } catch (Exception e) {
            e.printStackTrace();
            System.out.println("my Exception" + e);
        }
        }
    }).start();
    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    // TODO Auto-generated method stub
    if (fromUser) {
        Log.e("onProgressChanged: ", Integer.toString(progress));
        mPlayer.seekTo(progress);
    }

    } 
```

**完整代码：**

```
public class VideoPlayerActivity extends Activity implements Callback, OnSeekBarChangeListener, OnTouchListener, OnErrorListener, OnCompletionListener, OnPreparedListener {

    MediaPlayer mPlayer;
    AssetFileDescriptor afd;
    VideoView videoView;
    SurfaceHolder holder;
    MediaController mController;
    String videoPath;
    SeekBar seekBar;
    ImageButton mPlay, mStop, mPause;
    TextView mCurDuration, mDuration;
    int position = 0;
    Handler handler = new Handler();
    Runnable r;
    boolean controlsVisibility = true;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_video_player);

    getWindow().setFormat(PixelFormat.TRANSLUCENT);
    mDuration = (TextView) findViewById(R.id.tvDuration);
    mCurDuration = (TextView) findViewById(R.id.tvCurDuration);
    videoPath = getIntent().getExtras().getString("videoPath");
    videoView = (VideoView) findViewById(R.id.vvPlayer);
    seekBar = (SeekBar) findViewById(R.id.seekBar);
    seekBar.setOnSeekBarChangeListener(this);
    seekBar.setFocusable(false);
    videoView.setOnTouchListener(this);
    mPlay = (ImageButton) findViewById(R.id.play);
    mPause = (ImageButton) findViewById(R.id.pause);
    mStop = (ImageButton) findViewById(R.id.stop);
    mController = new MediaController(this);
    videoView.setMediaController(mController);
    holder = videoView.getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    mPlay.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
        Log.e("Play:", " is Pressed!");
        if (mPlayer == null)
            playVideo();
        mPlayer.start();
        }
    });
    mPause.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
        Log.e("Pause:", " is Pressed!");
        if (mPlayer != null) {
            handler.removeCallbacks(r);
            controlsVisibility=true;
            AutoHideControls();
            Log.e("mPlayer status: ", "Not Null");
            if (mPlayer.isPlaying())
            Log.e("mPlayer status: ", "Not Null");
            mPlayer.pause();
        }
        }
    });

    mStop.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
        Log.e("Stop:", " is Pressed!");
        if (mPlayer != null) {
            handler.removeCallbacks(r);
            controlsVisibility=true;
            AutoHideControls();
            seekBar.setProgress(0);
            mPlayer.stop();
            mPlayer.release();
            mPlayer = null;
        }
        }
    });
    }

    private void playVideo() {
    try {
        if (afd != null && mPlayer != null) {
        mPlayer.start();
        return;
        }
        Log.e("VideoPath:", videoPath);
        if (videoPath != "") {
        afd = getAssets().openFd(videoPath);
        // "videos/start.mp4"
        mPlayer = new MediaPlayer();
        mPlayer.setOnErrorListener(this);
        mPlayer.setOnCompletionListener(this);
        mPlayer.setOnPreparedListener(this);
        mPlayer.setWakeMode(getApplicationContext(), PowerManager.PARTIAL_WAKE_LOCK);
        mPlayer.setScreenOnWhilePlaying(true);
        mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mPlayer.setDisplay(holder);
        mPlayer.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength());
        mPlayer.prepare();
        mPlayer.start();
        handler.removeCallbacks(r);
        controlsVisibility=true;
        AutoHideControls();
        }
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }

    public void surfaceCreated(SurfaceHolder holder) {
    runOnUiThread(new Runnable() {
        public void run() {
        playVideo();
        }
    });
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
    // TODO Auto-generated method stub

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub

    }

    @Override
    public boolean onError(MediaPlayer mp, int what, int extra) {
    Log.e("Debug:", "onError---> what:" + what + "   extra:" + extra);
    if (mPlayer != null) {
        mPlayer.stop();
        mPlayer.release();
        mPlayer = null;
    }
    return true;
    }

    @Override
    public void onCompletion(MediaPlayer mp) {
    mPlayer.release();
    finish();
    }

    public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        if (mPlayer != null) {
        mPlayer.stop();
        mPlayer.release();
        }
        finish();
        return true;
    }
    return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {

    if (controlsVisibility) {
        controlsVisibility = false;
        mPlay.setVisibility(View.GONE);
        mPause.setVisibility(View.GONE);
        mStop.setVisibility(View.GONE);
        seekBar.setVisibility(View.GONE);
        handler.removeCallbacks(r);
    } else {
        controlsVisibility = true;
        mPlay.setVisibility(View.VISIBLE);
        mPause.setVisibility(View.VISIBLE);
        mStop.setVisibility(View.VISIBLE);
        seekBar.setVisibility(View.VISIBLE);
        AutoHideControls();
    }

    return false;
    }

    public void AutoHideControls() {

    r = new Runnable() {
        public void run() {
        controlsVisibility = false;
        mPlay.setVisibility(View.GONE);
        mPause.setVisibility(View.GONE);
        mStop.setVisibility(View.GONE);
        seekBar.setVisibility(View.GONE);
        }
    };
    handler.removeCallbacks(r);
    handler.postDelayed(r, 4000);
    }

    @Override
    public void onPrepared(MediaPlayer mp) {
    seekBar.setMax(mp.getDuration());
    new Thread(new Runnable() {
        public void run() {
        int currentPosition = 0;
            int total = mPlayer.getDuration();
            seekBar.setMax(total);
            while (mPlayer != null && currentPosition < total) {
                try {
                    Thread.sleep(1000);
                    currentPosition = mPlayer.getCurrentPosition();
                } catch (InterruptedException e) {
                    return;
                } catch (Exception e) {
                    return;
                }
                seekBar.setProgress(currentPosition);
            }
        }
    }).start();
    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    // TODO Auto-generated method stub
    if (fromUser) {
        Log.e("onProgressChanged: ", Integer.toString(progress));
        mPlayer.seekTo(progress);
    }

    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

    }

} 
```

相同但彻底的 AsyncTask （但结果相同 - 仍在跳跃）：

```
@Override
    public void onPrepared(MediaPlayer mp) {
    seekBar.setMax(mp.getDuration());
    new Async().execute();
    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    // TODO Auto-generated method stub
    if (fromUser) {
        Log.e("onProgressChanged: ", Integer.toString(progress));
        mPlayer.seekTo(progress);
        seekBar.setProgress(progress);
        Log.e("SeekedProgressTime: ", Integer.toString(mPlayer.getCurrentPosition()));
        Log.e("SeekedProgressTime: ", Integer.toString(seekBar.getProgress()));
    }

    }

    class Async extends AsyncTask<Void, Integer, Void> {

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        int currentPosition = 0;
        int total = mPlayer.getDuration();
        seekBar.setMax(total);
        while (mPlayer != null && currentPosition < total) {
        Log.e("Current mPlayer time in Thread: ", Integer.toString(mPlayer.getCurrentPosition()));
        Log.e("Current seekBar time in Thread: ", Integer.toString(seekBar.getProgress()));
        try {
            Thread.sleep(1000);
            currentPosition = mPlayer.getCurrentPosition();
        } catch (InterruptedException e) {
        } catch (Exception e) {
        }
        seekBar.setProgress(currentPosition);
        }
        return null;
    }
    } 
```

也许，我在 AsyncTask 中做错了什么，我不明白这个 seekBar 有什么问题。当您单击搜索栏上的某个位置时，检查它的实际位置，一切都正确，但在某一时刻，它的位置值会以某种方式覆盖。

# asp.net-mvc - 使用 Windows 身份验证的 mvc 应用程序的 IIS 设置

> ID：13010130
> 
> 赞同：0
> 
> 时间：2012-10-22T11:06:31.787
> 
> 标签：asp.net-mvc, iis-7.5

我开发了一个已成功部署到 IIS 的 MVC Intranet 应用程序。

我已启用 Windows 身份验证并拒绝访问匿名用户，但是，只有域中的某些帐户能够访问应用程序。

我已经检查了这些帐户，我可以看到它们并没有什么特别之处。

第一个安全检查是域用户，每个人都是其中的成员。

系统会提示所有其他用户登录，但它无法识别他们的凭据。

我收到 401.1 - 未经授权的错误

不知道还有什么可以尝试的。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:15:41.160

解决方案：我的 wwwroot 上的文件夹权限 - 域用户没有读取权限。

==================================================== ================================

检查内核模式身份验证是否打开：站点>身份验证>Windows身份验证>高级设置

检查授权规则没有阻止用户：站点>授权规则

我会先测试（允许所有用户），这是否允许用户通过？

# nginx - 为什么 NGINX 想要使用 ./logs/error.log 作为默认值？

> ID：13010131
> 
> 赞同：4
> 
> 时间：2012-10-22T11:06:33.713
> 
> 标签：nginx, osx-lion

我目前想在我的 Rails 设置中使用 NGINX。我已将配置文件放在目录中`RAILS_ROOT/config/nginx`。这是我放置命名`development.conf`的配置文件和`mime.types`-file。

我想将我的日志放在 -`RAILS_ROOT/log`目录中。

这是我的`development.conf`：

```
worker_processes  1;

events {
    worker_connections  1024;
}

http {
  include       mime.types;
  default_type  application/octet-stream;

  # main access log
  access_log log/nginx.access.log;

  # main error log
  error_log log/nginx.error.log debug;

  sendfile      on;

  keepalive_timeout  65;

  server {
    listen 9001; #omg!
    server_name local.woman.dk;

    rewrite ^/(.*)/$ /$1 last;

    proxy_set_header  X-Real-IP  $remote_addr;
    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_max_temp_file_size  0;

    location / {
      ssi on;
      proxy_pass http://127.0.0.1:3000;
    }
  }
} 
```

我使用以下命令从我的 RAILS_ROOT 启动 NGINX：

```
nginx -p . -c config/nginx/development.conf 
```

我收到以下错误：

```
nginx: [alert] could not open error log file: open() "./logs/error.log" failed (2: No such file or directory) 
```

我的版本是这样的：

```
[(master)]=> nginx -v
nginx version: nginx/1.2.4 
```

我做错什么了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T22:05:34.677

[http://nginx.org/en/docs/ngx_core_module.html#error_log](http://nginx.org/en/docs/ngx_core_module.html#error_log)表示：

1.  默认值为`error_log logs/error.log error;`
2.  为了调试日志记录工作，nginx 需要使用 --with-debug 构建。`

发生的事情是您正在使用默认值，我没有发现任何语法错误，所以我的猜测是您的 nginx 没有使用 --with-debug 编译。

你可以检查一下`nginx -V`（注意：这是大写的V）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-14T08:03:50.587

在**MAC**上它在

```
/usr/local/logs/error.log 
```

我在运行后发现了这个：

```
nginx -V 
```

配置参数：**--prefix=/usr/local** --with-cc-opt=-Wno-deprecated-declarations --with-http_ssl_module --add-module=../nginx-rtmp-module/

# android - 如何在不使用意图的情况下拨打电话

> ID：13010135
> 
> 赞同：1
> 
> 时间：2012-10-22T11:06:40.600
> 
> 标签：android, phone-call

如何在没有/有用户交互的情况下拨打电话。

我在互联网上找到了这个意图`Intent.ACTION_CALL`，但是我想编写一个程序来响应这个意图发起呼叫，这可能吗？如果这是可能的，那么我该怎么做呢？

我不想启动对话来拨打电话，我想在我的应用程序内部拨打电话。

有没有可以用于此目的的 java 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:08:33.227

使用意图。这就是它被设计为在 Android 中工作的方式：

```
try {
   startActivity(new Intent(Intent.ACTION_CALL, 
                     Uri.parse("tel:PHONE_NUMBER_HERE" )));
} catch (Exception e) {
   e.printStackTrace();
} 
```

这将开始拨号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:38:13.707

That is not possible from an SDK application.You have to use Intent.ACTION_CALL.

# asp.net - 在 ASP.Net 运行时更改母版页的母版页

> ID：13010136
> 
> 赞同：1
> 
> 时间：2012-10-22T11:06:41.757
> 
> 标签：asp.net

有谁知道如何在运行时更改母版页的母版页。对于 Page，有一个 PreInit 事件，我们可以在其中动态更改母版页。母版页不存在此类事件。我还尝试更改基类的构造函数中的母版页，这也不起作用。

非常感谢，阿伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:17:45.037

在您的 BasePage 覆盖`OnPreInit`方法中并分配母版页的母版页，如下所示

`this.Page.Master.MasterPageFile = "~/SuperSitem.master";`

# c# - 将文件上传控制作为参数传递给方法

> ID：13010137
> 
> 赞同：2
> 
> 时间：2012-10-22T11:06:41.607
> 
> 标签：c#, file-upload, parameter-passing

我想用 C# 编写一个通用的文件上传函数。我的网站有 20 多个列，分为由近 8 到 10 个文件上传控件组成的选项卡。我想编写一个通用方法，我可以将文件上传控件传递到其中，发布文件和要保存的位置。如何将文件上传控件传递给方法？

```
public string uploadMethod(HttpPostedFile file, <fileUpload control>, string saveLocation)
{
  //saving code
}

protected void btnSubmit_Click(object sender, EventArgs e)
{
    uploadMethod(FileUpload1.PostedFile, <fileUpload control>, saveFolder)
} 
```

我知道如何保存路径，但不知道如何将文件上传控件作为参数传递给方法。将不胜感激您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:22:05.307

玩了一会儿我得到了答案。以下是解决方案...

```
private void uploadDoc(HttpPostedFile httpPostedFile, int filesize, string saveLocation, System.Web.UI.WebControls.FileUpload FileUpload1)
{
  //code for saving the file
} 
```

这就是我们将参数传递给函数的方式......

```
uploadDoc(FileUpload1.PostedFile, filesize, saveLocation, FileUpload1); 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:13:31.043

你在寻找这样的东西吗？

```
public string uploadMethod(HttpPostedFile file, FileUpload FU, string saveLocation)
{
string path = FU.FileName;
} 
```

# c# - 声音的 FFT 频率

> ID：13010141
> 
> 赞同：1
> 
> 时间：2012-10-22T11:06:53.200
> 
> 标签：c#, .net, fft, naudio

在某个时间在麦克风上，开始流动声音定义频率（500hz）。我怎么知道信号什么时候开始传到麦克风？为了解决这个问题，我知道我需要使用 FFT（快速傅里叶变换）。但是我不明白，FFT频率后我应该怎么取？我在 C# 上使用 NAudio。我的麦克风缓冲区是字节数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:24:21.903

为此使用 FFT 是多余的，而且不是特别合适。此类问题（音调检测/起始检测）的一个更简单的解决方案是[Goertzel 滤波器](http://en.wikipedia.org/wiki/Goertzel_algorithm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:14:10.503

确定何时将信号采样到缓冲区是一个程序问题。

这与确定采样信号的频率内容是什么（使用 FFT）无关。其他问题见我的回复...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T05:49:49.867

窄 IIR 带通滤波器后接包络检波器可能是一种可能的尝试方法。如果您知道音调爆发的上升时间，另一件要尝试的事情可能是与匹配滤波器的互相关。您还必须校准音频输入信号路径的延迟。

# javascript - 如何隐藏 wysihtml5 编辑器？

> ID：13010149
> 
> 赞同：0
> 
> 时间：2012-10-22T11:07:42.463
> 
> 标签：javascript, jquery, wysihtml5

我需要根据事件隐藏和显示编辑器。

我启动编辑器。然后，我尝试使用代码隐藏：

```
$('#textare').hide(); 
```

但它不起作用，因为我认为它会启动 iframe

那么如何显示和隐藏编辑器

**更新：**很抱歉忘记添加编辑器名称。我使用**wysihtml5**。我认为编辑器的工作方式是隐藏文本区域并制作 iframe，因此上述文本无法隐藏编辑器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:24:12.287

textarea 应该已经隐藏了，因为它只会用作后备。编辑器本身包含在一个带有 class 的 iframe 中`wysihtml5-sandbox`。所以这应该切换编辑器

```
$(".wysihtml5-sandbox").hide() 
```

# meteor - Meteor中的输入文本返回事件

> ID：13010151
> 
> 赞同：20
> 
> 时间：2012-10-22T11:07:47.583
> 
> 标签：meteor

`type="text"`我想捕获用户在填写表单时在输入上按 Enter 的事件。这是在整个网络上完成的，但我没有找到答案。

这是我到目前为止所拥有的：

在 html 文件中，我有一个像这样的文本输入：

```
<input type="text" size=50 class="newlink"> 
```

在 Javascript 文件中，我试图捕捉用户按下回车键以有效提交表单。然后我从输入中获取文本并将其存储在数据库中：

```
 Template.newLink.events = {
    'submit input.newLink': function () {
      var url = template.find(".newLink").value;
      // add to database
    }
  }; 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-22T12:05:51.840

该`submit`事件是从表单发出的，而不是单个输入元素。

流星的内置事件地图记录在这里：[http](http://docs.meteor.com/#eventmaps) ://docs.meteor.com/#eventmaps 。

您必须监听键盘事件 ( `keydown, keypress, keyup`)。在事件处理程序中，检查它是否是返回/输入键（Keycode `13`），并继续成功。

```
Template.newLink.events = {
  'keypress input.newLink': function (evt, template) {
    if (evt.which === 13) {
      var url = template.find(".newLink").value;
      // add to database
    }
  }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-10T12:23:26.117

您可以在[todos](http://meteor.com/examples/todos)示例 ( [client/todos.js](https://github.com/meteor/meteor/blob/master/examples/todos/client/todos.js) ) 中查看这是如何实现的。

它对输入字段使用通用事件处理程序（如下所示）。您可以浏览其余代码以供使用。

```
////////// Helpers for in-place editing //////////

// Returns an event map that handles the "escape" and "return" keys and
// "blur" events on a text input (given by selector) and interprets them
// as "ok" or "cancel".

var okCancelEvents = function (selector, callbacks) {
  var ok = callbacks.ok || function () {};
  var cancel = callbacks.cancel || function () {};

  var events = {};
  events['keyup '+selector+', keydown '+selector+', focusout '+selector] =
    function (evt) {
      if (evt.type === "keydown" && evt.which === 27) {
        // escape = cancel
        cancel.call(this, evt);

      } else if (evt.type === "keyup" && evt.which === 13 ||
                 evt.type === "focusout") {
        // blur/return/enter = ok/submit if non-empty
        var value = String(evt.target.value || "");
        if (value)
          ok.call(this, value, evt);
        else
          cancel.call(this, evt);
      }
    };

  return events;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T12:14:23.927

我曾经使用过这个js函数来抑制用户使用文本字段中的返回键来提交表单数据。也许你可以修改它以适应捕获？

```
function stopRKey(evt) { // Stop return key functioning in text field.
    var evt  = (evt) ? evt : ((event) ? event : null);
    var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);
    if ((evt.keyCode == 13) && (node.type=="text")) { return false; } 
}
document.onkeypress = stopRKey; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-12T09:10:53.113

你也可以使用`event.currentTarget.value`

```
Template.newLink.events = {
  'keypress input.newLink': function (evt) {
    if (evt.which === 13) {
      var url = event.currentTarget.value;
      // add to database
    }
  }
}; 
```

# loops - 通过父 bat 文件运行文件夹中的 bat 文件

> ID：13010152
> 
> 赞同：1
> 
> 时间：2012-10-22T11:07:49.197
> 
> 标签：loops, batch-file, directory

我想知道如何创建一个 bat 文件来执行在特定目录中找到的所有其他 bat 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T11:14:33.307

单程

```
for %%f in (c:\xxx\*.bat) do (
   call %%f
) 
```

（要从同一个文件夹运行它，您需要排除正在执行的文件）

```
if %%f neq %0.bat (
    call %%f
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:12:51.907

这很简单

希望这有助于导航到您的目录，然后只需编写批处理文件的名称

Abc.bat

```
cd dirwhereBATCHfileLies
batch1
batch2
batch3 
```

# .htaccess - mod_rewrite 使用 .htaccess 重写 url

> ID：13010153
> 
> 赞同：1
> 
> 时间：2012-10-22T11:07:52.080
> 
> 标签：.htaccess, mod-rewrite, rewrite, rule

我在谷歌和这里搜索了一个教程来帮助我重写我的网址。我希望有人解释我必须写什么以及为什么。

我有这个网址：

```
http://iescup.eu/tournaments.php?tourney[id]=1
http://iescup.eu/tournaments.php?tourney[id]=2
http://iescup.eu/tournaments.php?tourney[id]=3 
```

等等

我想要这个网址：

```
http://iescup.eu/#!/tourneys/1
http://iescup.eu/#!/tourneys/2
http://iescup.eu/#!/tourneys/3 
```

等等

真诚的符文 纳德鲁普达尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:12:18.040

因此，您输入`http://iescup.eu/tournaments.php?tourney[id]=1`浏览器的 URL 地址栏。请求`/tournaments.php?tourney[id]=1`被发送到服务器**iescup.eu**。在该服务器上，文档根目录中的 htaccess 文件中的这些规则：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^tourney\[id\]=([0-9]+)$ [NC]
RewriteRule ^/?tournaments.php$ /#!/tourneys/%1? [L,R=301,NE] 
```

变量被匹配，`%{QUERY_STRING}`数字 ID 被分组并由**%1**反向引用。规则的目标`?`末尾有一个用于删除查询字符串的`NE`标志，并且使用了该标志，因此`#`不会对其进行编码。

该规则将浏览器重定向到`http://iescup.eu/#!/tourneys/1`从而更改 URL 地址栏。然后浏览器向 iescup.eu 发送另一个**请求**`/`。请注意，`#!/tourneys/1`片段*永远不会发送到服务器*。片段仅是客户端，用于确定应如何处理内容（也由 javascript 使用）。

# magento-1.7 - Magento 1.7 肥皂 API cart.order

> ID：13010158
> 
> 赞同：2
> 
> 时间：2012-10-22T11:08:17.137
> 
> 标签：magento-1.7

```
Fatal error: Uncaught SoapFault exception: [1002] Can not make operation because quote is not exists. 
```

我已经使用 cart.create 创建了一个购物车，成功添加了客户、产品、运输方式和付款方式，我尝试打印所有上述调用的结果，它显示了正确的结果。

但是当我尝试调用 cart.create 时，我得到了上述致命错误。

谁能帮助我这里可能是什么问题。

谢谢

# sharepoint - 在 SharePoint 2010 中将列表项添加到列表时出错

> ID：13010159
> 
> 赞同：0
> 
> 时间：2012-10-22T11:08:20.163
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer, sharepoint-deployment

```
One or more field types are not installed properly. 
Go to the list settings page to delete these fields 
```

将项目添加到列表时出现上述错误，我没有任何查找列，并且我还删除了关系列表。

请帮助....！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:52:23.157

似乎您正在通过代码添加项目。只需验证列名拼写是否正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:09:48.047

每当事件被处理时。它们中的大多数用于给出列名，因为它在列表/库中。但我建议在提供列之前确保列名称及其内部名称相同。

您可以使用[**SharePoint 管理器工具获取列内部名称**](http://spm.codeplex.com/)

# android - SQLite 光标在第一次调用时冻结约 10 秒

> ID：13010160
> 
> 赞同：1
> 
> 时间：2012-10-22T11:08:25.710
> 
> 标签：android, sqlite, cursor, android-cursor

我有 10 mb 的数据库和这段代码：

```
cursor = mDatabase.query(CitySQLiteHelper.TABLE_CITIES, ALL_COLUMNS, null, null, null, null, "name DESC", "20");
if (cursor.getCount() > 0) {
//
} 
```

执行在 if 语句处冻结大约 10 秒。我尝试了 getCount 和 moveToFirst - 它在两种情况下都会冻结。第一次调用后查询和对游标的所有调用（getString() 等）工作正常。为什么？

更新：架构

```
sqlite> .schema cities
CREATE TABLE cities (region text, name text, latitude float, longitude float);
sqlite> select count(*) from cities;
130070 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:26:15.763

当您第一次从数据库中读取数据时，您只是试图读取数兆字节的数据。随后的数据库访问将受益于缓存。如果您的数据库存储在 SD 卡上，请尝试将其移至内部存储。否则，请尝试在应用程序启动时（在后台线程中）从数据库中进行初始读取，以“准备”它以供以后快速访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:48:01.120

创建了唯一索引，这有帮助。谢谢！

# asp.net-mvc - 如果为 NULL，则分配默认值

> ID：13010162
> 
> 赞同：1
> 
> 时间：2012-10-22T11:08:32.127
> 
> 标签：asp.net-mvc, ef-code-first

我有一个 MVC 应用程序，用户可以在其中选择公司的好处，有 10 种不同的好处，他们最多可以有 10 种好处。在我看来，我列出了十个单选按钮来指示它们是否是必需的。控制器中还执行了一个计算，将所有值加在一起得出一个总数。

作为我的控制器中的一个例子 -

```
newuser.LifeAssurance.LifeAssuranceRequired = viewModel.LifeAssuranceRequired;    
newuser.LifeAssurance.LifeAssuranceSchemeName = viewModel.LifeAssuranceSchemeName;
newuser.LifeAssurance.LifeAssuranceProviderName = viewModel.LifeAssuranceProviderName;
newuser.LifeAssurance.LifeAssuranceBenefitLevel = viewModel.LifeAssuranceBenefitLevel;
newuser.LifeAssurance.LifeAssuranceEmployerCost = viewModel.LifeAssuranceEmployerCost;
newuser.LifeAssurance.LifeAssuranceEmployeeCost = viewModel.LifeAssuranceEmployeeCost; 
```

由于用户可能决定不选择此好处，如果他们没有在视图模型中进行选择，是否可以将成本分配为 0？我可以检查它是否为空并在这种情况下添加 0 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T12:13:42.303

您可以使用`??`运算符（请参见[此处](http://msdn.microsoft.com/en-us/library/ms173224%28VS.80%29.aspx)）
像这样使用它：

```
string someString = null;
string someOtherString = someString ?? "0"; 
```

如果 someString（或任何其他对象）不为空，则使用它，否则使用运算符右侧的任何内容`??`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:19:18.943

Maybe set your values as `nullable` by add `?` to type, and then you can check it is null by:

```
var someValue = (nullableValue.HasValue) ? nullableValue.Value : 0; 
```

# haskell - Haskell，创建结构化数据类型

> ID：13010163
> 
> 赞同：0
> 
> 时间：2012-10-22T11:08:32.517
> 
> 标签：haskell, functional-programming

我想创建一个名为*Structured*的结构数据类型，可用于表示*String、Int*和*List*。例如，结构类似于：[ *Int* , *String* , *Int* ,[ *Int* ]]。

问题1：如何创建这个数据类型？

```
data Structured = ... 
```

问题2：一个叫做*Confirm*的函数，它确认输入满足一个限制，并且签名类型为*confirm:: Restriction -> Structure ->Maybe Bool*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T11:17:11.063

```
data Structured = Structured Int String Int [Int] 
```

会工作。

```
confirm :: (Structured -> Bool) -> Structured -> Bool 
```

似乎是一个更明智的类型，但有一个微不足道的实现，如`id`.

我认为您不需要`Maybe Bool`从评估函数中返回 -`Maybe a`当您通常返回时很有用`a`，但有时不需要。（这对于非常简单的错误处理很有用，例如 -`Nothing`如果有错误，请给出。）在这种情况下，您始终可以得出关于您的输入是否有效的结论，因此您可以随时回馈`True`或`False`- 不需要`Maybe`.

也许你可以有类似的东西

```
confirm :: (String -> Bool) -> (Int -> Bool) -> Structured -> Bool
confirm okString okInt (Structured int1 string int2 ints) =
       all okInt (int1:int2:ints) && okString string 
```

这`int1:int2:ints`是`int1`前面`int2`的列表`ints`。

定义结构化的稍微好一点的方法是：

```
data Structured = Structured {
           length ::Int,
           name   ::String,
           width  ::Int,
           somenumbers :: [Int]} 
```

那么你会有

```
confirm :: (String -> Bool) -> (Int -> Bool) -> Structured -> Bool
confirm okString okInt s =
       all okInt (length s:width s:somenumbers s) && okString (name s) 
```

它与第一个数据声明的工作相同，但为您提供了获取内部信息的功能。

# c# - 防止最大化的应用程序流过我的应用程序

> ID：13010166
> 
> 赞同：0
> 
> 时间：2012-10-22T11:08:47.517
> 
> 标签：c#, winforms

> **可能重复：**
> [如何使窗口始终保持在 .Net 的顶部？](https://stackoverflow.com/questions/683330/how-to-make-a-window-always-stay-on-top-in-net)
> [创建一个“停靠”到屏幕一侧并在最大化时限制其他窗口大小的 .NET 应用程序](https://stackoverflow.com/questions/8510065/creating-a-net-app-that-docks-to-the-side-of-the-screen-and-limits-other-wind)

我有一个 C# Winforms 应用程序，其运行类似于 Mac 上的菜单栏。它只有 24 像素高，是屏幕的全宽，位于顶部，应该是最顶部的应用程序。

但是，当我运行其他应用程序并最大化它们时，它们会在我的应用程序下，我看不到它们的控制栏（图标、名称、最小化、最大化和关闭按钮）。我想要的是其他最大化的应用程序最大化到我的应用程序下方，所以我仍然可以看到其他应用程序控制栏。

有没有办法阻止其他应用程序这样做，并让它们在我的应用程序下最大化？

谢谢，卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:17:32.943

这是[创建一个“停靠”到屏幕一侧并在最大化时限制其他窗口大小的 .NET 应用程序](https://stackoverflow.com/questions/8510065/creating-a-net-app-that-docks-to-the-side-of-the-screen-and-limits-other-wind)的副本。请注意，指向 C# 版本代码的链接已失效。以下是相关的工作链接：

[http://www.codeproject.com/Articles/6741/AppBar-using-C](http://www.codeproject.com/Articles/6741/AppBar-using-C)

[http://msdn.microsoft.com/en-us/library/windows/desktop/cc144177(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144177(v=vs.85).aspx)

# android - 地图不显示在 Android 4 模拟器中

> ID：13010168
> 
> 赞同：0
> 
> 时间：2012-10-22T11:08:57.910
> 
> 标签：android, google-maps

1.  这是清单文件

    ```
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library  android:name="com.google.android.maps"/>
        <activity
            android:name=".MapTestActivity"
            android:label="@string/title_activity_map_test" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
    ```

2.  这是xml布局文件

    ```
    <LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="horizontal">

        <Button 
            android:id="@+id/zoom_in"
            android:layout_width="37dp"
            android:layout_height="wrap_content"
            android:text="+"
            android:onClick="mapHandler" />

        <Button 
            android:id="@+id/zoom_out"
            android:layout_width="37dp"
            android:layout_height="wrap_content"
            android:text="-"
            android:onClick="mapHandler" />

        <Button 
            android:id="@+id/satelite"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Satelite"
            android:onClick="mapHandler" />

        <Button 
            android:id="@+id/traffic"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Traffic"
            android:onClick="mapHandler" />

        <Button 
            android:id="@+id/norm"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Normal"
            android:onClick="mapHandler" />

    </LinearLayout>

    <com.google.android.maps.MapView
        android:id="@+id/map_view"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:enabled="true"
        android:clickable="true"
        android:apiKey="sorry for hiding app id" /> 
    ```

3.  这是java文件

    ```
    package com.example.maptest;
    import com.google.android.maps.MapActivity;
    import com.google.android.maps.MapView;

    import android.os.Bundle;
    import android.view.Menu;
    import android.view.View;

    public class MapTestActivity extends MapActivity {

        private MapView mapView;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_map_test);

            mapView = (MapView) findViewById(R.id.map_view);
            mapView.setBuiltInZoomControls(true);
        }

        public void mapHandler(View view) {
            switch(view.getId()){
            case R.id.zoom_in:
                mapView.getController().zoomIn();
                break;
            case R.id.zoom_out:
                mapView.getController().zoomOut();
                break;
            case R.id.satelite:
                mapView.setSatellite(true);
                break;
            case R.id.traffic:
                mapView.setTraffic(true);
                break;
            case R.id.norm:
                mapView.setSatellite(false);
                mapView.setTraffic(false);
                break;
            }
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_map_test, menu);
            return true;
        }

        @Override
        protected boolean isRouteDisplayed() {
            // TODO Auto-generated method stub
            return false;
        }
    } 
    ```

4.  在输出中只有按钮是 display 。我的网络连接也很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:13:28.220

您确定放置在布局 xml 中的地图 API 密钥与您用于签署应用程序的证书匹配吗？即使在通过 Eclipse 运行时，也会使用证书——并且该证书必须与 API 密钥匹配。如果没有，地图视图将起作用，但实际上不会显示任何地图图形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:01:19.060

您需要授予权限`ACCESS_MOCK_LOCATION`。否则应用程序将不接受您发送的模拟位置。此外，在应用程序接收到某个位置之前，地图不会显示，即您需要使用某些工具（例如，Eclipse 中集成的工具）输入一个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T07:27:58.023

也许线性布局挡住了整个屏幕！？您将参数设置为：

```
android:layout_width="match_parent"
android:layout_height="match_parent" 
```

所以它可能会阻止整个父母。你介意在没有按钮和线性布局的情况下尝试吗？也许您可以按照本教程进行操作：[http ://www.javacodegeeks.com/2011/02/android-google-maps-tutorial.html](http://www.javacodegeeks.com/2011/02/android-google-maps-tutorial.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:16:32.400

我在使用 Open Street Maps 时遇到了这个问题。为了解决这个问题，我不得不将 SD 卡放入设备/模拟器中。不确定谷歌地图是否需要相同的。

# php - 强制 URL 小写 PHP/htaccess

> ID：13010170
> 
> 赞同：-2
> 
> 时间：2012-10-22T11:09:05.343
> 
> 标签：php, mysql, .htaccess

我有以下我想全部小写的...

```
echo '<a href="/people/' . $row["Location_County"] . '/' . $row["First_Name"] . '-' . $row["Surname"] . '/' . $row["ID"] . '">View Profile</a>'; 
```

每个县都大写以及他们的名字，他们是我可以强制全部小写的一种方式吗？使用 htaccess 是否可以做到这一点，或者我可以使用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:10:39.267

您必须手动使用[`strtolower()`](http://php.net/strtolower)：

```
echo '<a href="/people/' . strtolower($row["Location_County"]) . '/' . strtolower($row["First_Name"]) . '-' . strtolower($row["Surname"]) . '/' . $row["ID"] . '">View Profile</a>'; 
```

而这个问题根本就**没有**关系`mod_rewrite`，因为它在请求被处理**之前就起作用了。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:10:48.740

使用[`strtolower`](http://php.net/manual/en/function.strtolower.php)：

```
strtolower($yourString); 
```

请在提问之前阅读文档。它涵盖了 99% 的基本问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:11:19.663

见[http://php.net/manual/en/function.strtolower.php](http://php.net/manual/en/function.strtolower.php)

例子 ：

> echo strtolower("你的字符串");

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T11:11:32.360

```
echo '<a href="/people/' . strtolower($row["Location_County"]) . '/' . strtolower($row["First_Name"]) . '-' . strtolower($row["Surname"]) . '/' . $row["ID"] . '">View Profile</a>'; 
```

使用 strtolower(); 功能

这是 Strlower() 函数[http://www.php.net/manual/en/function.strtolower.php](http://www.php.net/manual/en/function.strtolower.php) 如果你愿意，你也可以大写[http://www.php.net/manual/en/function .strtoupper.php](http://www.php.net/manual/en/function.strtoupper.php)

您真的应该在[http://php.net/](http://php.net/)上查看这些内容，它们是基本功能。

# java - 为什么我的变量不会自动装配？

> ID：13010177
> 
> 赞同：4
> 
> 时间：2012-10-22T11:09:39.717
> 
> 标签：java, spring, web, annotations, autowired

由于某种原因，我尝试使用 @Autowired 实例化的对象指针从未实例化。我试过看几个例子，但似乎没有任何效果！这是我的代码：

测试.java

```
package com.example.core.service.integration;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;

@ContextConfiguration(locations={"/app-context.xml"})
public class Testing {

@Autowired
private IntegrationRestService integrationRestService;

public static void main(String args[])  {
    Testing t = new Testing();
    t.checkNull();
}

private void checkNull() {
    if(integrationRestService == null) System.err.println("FAIL...");
    else System.out.println("SUCCESS!");
}

} 
```

集成测试服务.java

```
public interface IntegrationRestService {

public  FindSomething getFindSomethingResponse(String a, int b, int c);

public  FindSomethingElse getFindSomethingElseResponse(String urlToRead);
} 
```

IntegrationRestServiceImpl.java

```
@Service
@Path("/test")
public class IntegrationRestServiceImpl implements IntegrationRestService {

    public IntegrationRestServiceImpl() {
        super();
     }
   ...
} 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:mvc="http://www.springframework.org/schema/mvc"     xmlns:p="http://www.springframework.org/schema/p"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
default-autowire="constructor"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd">

<!-- JSR-303 support will be detected on classpath and enabled automatically -->
<context:annotation-config/>

<context:component-scan base-package="com.example.core"/>

<bean id="IntegrationRestService" class="com.example.core.service.integration.IntegrationRestServiceImpl" />
<bean id="Testing" class="com.example.core.service.integration.Testing" />

</beans> 
```

任何想法我做错了什么？

# 回答：

测试.java

```
@Service
public class Testing {

@Autowired
private IntegrationRestService integrationRestService;

public static void main(String args[])  {
    ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("/META-INF/spring/app-context.xml");
    Testing testing = (Testing) context.getBean(Testing.class);
    testing.checkNull();
}

private void checkNull() {
    if(integrationRestService == null) System.err.println("FAIL...");
    else System.out.println("SUCCESS!");
}

} 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:p="http://www.springframework.org/schema/p"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
default-autowire="constructor"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd">

<!-- JSR-303 support will be detected on classpath and enabled automatically -->
<context:annotation-config/>

<context:component-scan base-package="com.example.core"/>

<bean id="testing" class="com.example.core.service.integration.Testing"/>

<bean id="integrationRestService" class="com.example.core.service.integration.IntegrationRestServiceImpl" />

</beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:20:27.200

试试这个：

```
@Service
public class Testing {

@Autowired
private IntegrationRestService integrationRestService;

public static void main(String args[])  {
    final AbstractApplicationContext context = new ClassPathXmlApplicationContext("/app-context.xml");
    Testing t = context.getBean(Testing.class);
    t.checkNull();
}

private void checkNull() {
    if(integrationRestService == null) System.err.println("FAIL...");
    else System.out.println("SUCCESS!");
}

} 
```

@Autowired 仅适用于弹簧豆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:22:34.023

您的对象不是 Spring bean，因为您是自己创建的。

您没有任何代码来初始化您的 applicationContext。 `@ContextConfiguration`，AFAIK，仅用于单元测试。

Spring 并不神奇，您需要在它工作之前调用它。

如果使用 main 方法，则需要自己创建 applicationContext，然后从中获取 bean。

```
ApplicationContext ctx = new ClasspathXmlApplicationContext("/app-context.xml");
Testing testing = (Testing) ctx.getBean("testing"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:20:15.297

bean 只会被注入到 spring 管理的实例中。由于您正在创建一个`Testing`使用`new`运算符的实例，因此它不会被`integrationRestService`注入。

你能做的是

*   `testing`从应用程序上下文中获取实例。

    ```
    ClassPathXmlApplicationContext context = 
        new ClassPathXmlApplicationContext("Spring.xml");
    Testing testing = (Testing) context.getBean(Testing.class); 
    ```

*   在类上使用[`@Configurable`](http://vikdor.blogspot.com/2012/08/using-configurable-to-inject-resources.html)注释，`Testing`以便使用`new`运算符创建的实例也将被弹簧管理。但这是一个相当繁琐的过程。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-08T16:44:05.887

```
ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("Spring.xml");
Testing testing = (Testing) context.getBean(Testing.class); 
```

干得好！

但是，使用

```
@Autowired
private Testing testing; 
```

是失败。

# vim - Vim：从行尾拉出，包括最后一个字符

> ID：13010178
> 
> 赞同：3
> 
> 时间：2012-10-22T11:09:44.117
> 
> 标签：vim

我是 Vim 的新手。假设我正在编辑文档并在行尾添加了一些单词。我仍处于编辑模式，光标位于行尾。

然后我决定要复制光标前的 4 个单词并将它们粘贴到下面一行的末尾。如果我使用`esc``y``4``b`我会错过最后一个字符。

有经验的 vim 用户如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:08:06.987

我会用`Aadd some words to end<esc>`then just do`j.`来重复插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:21:15.427

我会用这个：

`ESC``v``4``b``y`

或者：

`ESC``4``b``y``$`

对于这种特定情况，您的 curosr 位于行尾。

# html - ipad2 safari 显示质量差的 jpg

> ID：13010181
> 
> 赞同：0
> 
> 时间：2012-10-22T11:09:55.917
> 
> 标签：html, css, ipad

我在让大 jpg 在 ipad 2 上正确显示时遇到了一些困难。该文件为 9577x600 像素，并设置为 div 上的背景图像。我已`-webkit-background-size`在该 div 上定义并将其设置为与图像相同的尺寸。我还将我的视口元标记设置为：

```
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/> 
```

我的CSS是：

```
#content { position: relative; background: url(../images/infographic.jpg) left top no-repeat; width: 9577px; height: 600px; -webkit-background-size: 9577px 600px; } 
```

这是我在 ipad 上看到的内容与我在桌面上看到的内容的屏幕截图：

![在此处输入图像描述](../Images/362330e62f41baafe2fb76b584c6d1b1.png)

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:21:39.423

对于手机和 ipad 等设备，您应该始终使用双倍尺寸图像（高清图像）。

例如您的显示图像尺寸为 200*200，那么您应该取 400*400 尺寸的原始图像并使用`max-width`或`width`属性设置图像的原始尺寸。

阅读这篇[**文章**](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Explained/Explained.html)了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:44:03.690

您是否尝试过没有`meta`标语行和/或没有`-webkit-background-size`属性？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:39:31.283

问题解决了 - 我不得不将大图像分成两部分，并将它们作为背景图像放在两个不同的 div 上。ipad 一定是在大像素尺寸的问题上苦苦挣扎。

# google-drive-api - 上传的文件有时不会出现在 Google 云端硬盘网页上

> ID：13010191
> 
> 赞同：2
> 
> 时间：2012-10-22T11:10:22.020
> 
> 标签：google-drive-api

当我通过调用 Google Drive API 将多个文件连续上传到 Google Drive 时，我观察到了 Google Drive 的奇怪行为。

一切似乎工作正常，我可以从 API 获得正确的响应，例如文件 ID 和 URL。但是当我通过网络浏览器查看上传文件的文件夹时，文件有时会丢失。

此问题可以通过访问以下 URL 来解决，这不是必需的。

```
https://docs.google.com/file/d/<file ID>/edit 
```

会不会是 Google Drive 的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T23:50:07.673

如果您将文件上传到文件夹中，那么这可能会导致问题。确保您上传的文件存在父文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:58:04.090

我有同样的问题。通常文件会在一段时间后出现。但有时根本没有！我还注意到 Web UI 中显示的文件与我 PC 上 Google Drive 目录中显示的文件之间存在差异。我会将其归结为 Drive 的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T21:03:59.480

谷歌驱动器仍然这样做。

文件可能需要很长时间才能显示在 Web gui 上。同样被删除的文件可以在 web gui 上保留很长时间（如果单击它们会出现错误）。

我真的很喜欢一种让驱动器响应更快的方法。

# php - 将内容排列到表格中

> ID：13010197
> 
> 赞同：2
> 
> 时间：2012-10-22T11:10:45.740
> 
> 标签：php

我有 2 个数组。第一个是

```
 $people = array(
    'person1' => array('name' => 'Ted', 'Year' => '68'),
    'person2' => array('name' => 'Jane', 'Year' => '72'),
    'person3' => array('name' => 'James', 'Year' => '46'),
    'person4' => array('name' => 'Tim', 'Year' => '44'),
    'person5' => array('name' => 'Ann', 'Year' => '39'),
    'person6' => array('name' => 'Leyla', 'Year' => '45'),
    'person7' => array('name' => 'Lucy', 'Year' => '41'),
    'person8' => array('name' => 'Diana', 'Year' => '28'),
    'person9' => array('name' => 'Tony', 'Year' => '10'),
    'person10' => array('name' => 'Jane', 'Year' => '20'),
    'person11' => array('name' => 'Alex', 'Year' => '30'),
    'person12' => array('name' => 'Jane', 'Year' => '3'),
    'person13' => array('name' => 'Ted', 'Year' => '27'),
    'person14' => array('name' => 'Alex', 'Year' => '1'),
); 
```

第二个是

```
 $genTree = array(
    'families' => array(
        array(
            "mother" => 'person2',
            "father" => 'person1',
            'children' => array(
                'person3',
                'person4',
                'person5'
            )
        )
    ),
    'nextGeneration' => array(
        'families' => array(
            array(
                'mother' => 'person6',
                'father' => 'person3',
                'children' => array(
                    'person8',
                 ),
            ),
            array(
                'mother' => 'person7',
                'father' => 'person4',
                'children' => array(
                    'person9',
                    'person10'
                )
            ),
       ),
       'nextGeneration' => array(
           'families' => array(
                array(
                    'mother' => 'person8',
                    'father' => 'person11',
                    'children' => array(
                        'person12'
                    )
                ),
                array(
                    'mother' => 'person10',
                    'father' => 'person13',
                    'children' => array(
                        'person14'
                    )
                )
            ),
        ),
   ),
); 
```

我需要在新表数据中获取每一代的每个家庭，因此应该将其排列为家谱

我尝试下一步做，但不是我需要的

```
 function nameValues($array){
    global $people; echo "<table border=1>";
    foreach($array as $key=>$value)
    {

        echo "<tr>";
        if(is_array($value))
        {
            nameValues($value);
        }else{

             echo "<td>".$key." ".$people[$value]['name']."</td>";echo "</tr>";

        }
    }
    echo "</table>";

} 
```

感谢您的帮助和解释

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:13:08.107

我希望这个能帮上忙

```
echo nameValues($genTree);

function nameValues($array){
    global $people;

    $table = '<table border="1">';
    foreach($array as $key => $value){
        if($key == 'families'){
            $table .= '<tr>';
            foreach($value as $familyKey => $familyValue){
                $table .= '<td>';
                $table .= '<table border="1">';
                $table .= '<tr>';
                $table .= '<td>Mother: </td><td>'.$people[$familyValue['mother']]['name'].'</td>';
                $table .= '<td>Age: </td><td>'.$people[$familyValue['mother']]['Year'].'</td>';
                $table .= '</tr>';
                $table .= '<tr>';
                $table .= '<td>Father: </td><td>'.$people[$familyValue['father']]['name'].'</td>';
                $table .= '<td>Age: </td><td>'.$people[$familyValue['father']]['Year'].'</td>';
                if(is_array($familyValue['children'])){
                    foreach($familyValue['children'] as $childrenKey => $childrenValue){
                        $table .= '<tr>';
                        $table .= '<td>Child: </td><td>'.$people[$childrenValue]['name'].'</td>';
                        $table .= '<td>Age: </td><td>'.$people[$childrenValue]['Year'].'</td>';
                        $table .= '</tr>';
                    }
                }
                $table .= '</tr>';
                $table .= '</table>';
                $table .= '</td>';
            }
            $table .= '</tr>';
        }else{
            $table .= nameValues($value);
        }
    }
    $table .= '</table>'; 
    return $table;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:43:34.173

试试这样：

```
function printfam($genarray,$people)
{
    if(count($genarray['families']>0))
    {
        for($temp=0;$temp<count($genarray['families']);$temp++)
        {

            $famarray=$genarray['families'][$temp];

            echo "<table>";
            echo "<tr><th>Father</th><td>".$people[$famarray['father']]['name']." (".$people[$famarray['father']]['Year'].")"."</td></tr>";
            echo "<tr><th>Mother</th><td>".$people[$famarray['mother']]['name']." (".$people[$famarray['mother']]['Year'].")"."</td></tr>";
            if(count($famarray['children'])>0)
            {

                $childrenarr=array();
                foreach($famarray['children'] as $ch)
                {
                    $childrenarr[]= $people[$ch]['name']." (".$people[$ch]['Year'].")";
                }
                echo "<tr><th>Childrens</th><td>".implode(", ",$childrenarr)."</td></tr>";
            }

            echo "</table><br />";
            if(isset($genarray['nextGeneration']))
            printfam($genarray['nextGeneration'],$people);

        }
    }
}

printfam($genTree,$people); 
```

# android - 将 Android 项目与 Team Foundation Server 2010 和分支一起使用。有没有更简单的方法？

> ID：13010200
> 
> 赞同：4
> 
> 时间：2012-10-22T11:10:52.523
> 
> 标签：android, eclipse, team-explorer-everywhere

这就是我所做的。如果有更好的方法请回复。

*   确保所有开发者都在相同的路径中安装了 Android SDK 和工具。
*   安装来自 Microsoft 的 Eclipse TFS 插件。
    撰写本文时的链接是：[http ://www.microsoft.com/en-us/download/details.aspx?id=25125](http://www.microsoft.com/en-us/download/details.aspx?id=25125)

以下是我遵循的步骤：

*   我在一个随机文件夹（工作区）中启动了我的 Android 项目并进行了初步开发。
*   然后我想将项目移到我的开发分支下`$root/Development/MyBranch/Android`
*   Android 文件夹不存在，所以我创建的是使用 TFS。如果您从资源管理器手动执行此操作，则 TFS 将不允许您在服务器端创建它。
*   从我执行“导出”->“常规|首选项”的原始项目工作区到某个文件夹。
*   然后我做了“切换工作区”->“其他”我指定了本地路径`$root/Development/MyBranch/Android`
*   现在我得到一个空的工作区。
*   然后我做了“导入”->“项目设置”并指定了我之前导出的文件。
*   然后我用“将项目复制到工作区”做了“导入”->“常规|现有项目到工作区”。
*   令人惊讶的是，我从新位置启动并运行了我的项目，像往常一样遇到了一些小问题。
*   然后我做了“团队|共享项目...”
*   我跟着向导。
*   有一个关于创建新工作区的疯狂屏幕。只需单击 EDIT 并确保 TFS 根映射正常。
*   完成向导，至此您就完成了。
*   当您运行项目时，该插件还会将 gen 和 bin 文件夹添加到 TFS。不要试图与之抗争，只需检查它们。稍后会详细说明。
*   此时，我已签入所有内容，因此我合并到 Main。
*   在这一步我想将项目合并到另一个开发人员的分支。
*   过程类似。
*   使用 TFS 创建 $root/Development/OtherDev/Android 文件夹。
*   在开发人员的 PC 上启动 Eclipse 并执行“切换工作区”->“其他”
*   指定 $root/Development/OtherDev/Android 的本地路径
*   现在你得到一个空的工作区。
*   然后“导入”->“项目设置”并指定之前导出的首选项文件（我将其包含在 TFS 中以供参考）。
*   然后 "Import" --> "General|Existing Projects into Workspace" 和 "Copy Projects into Workspace" 并从 $root/Main/Android 的本地文件夹中复制项目
*   然后执行“Team|Share Project...”以将项目与 TFS 连接起来。
*   现在关闭 Eclipse。
*   合并`$root/Main/Android`到`$root/Development/OtherDev/And`
*   报到`$root/Development/OtherDev/Android`

猜猜看，看起来你已经完成了。除非我做错了什么，但到目前为止它“适用于我们的 PC”。

特别注意：由于 Eclipse/TFSPlugin 总是会尝试将 gen+bin 目录添加到源代码控制中，因此只需将它们始终签出，即使您在某个时候签入它们，也不要将它们合并回主目录。合并这些文件只是浪费 TFS 上的磁盘空间。

这个方法太复杂了，感觉不太对劲。有没有更好的方法来获得相同的结果？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:57:31.937

至于 bin/gen 目录... TFS 2010 SP1 和更新版本有一个忽略选项。Bin 应该自动添加，但 gen 不是。要添加，右键单击文件夹，然后选择团队，然后单击忽略。之后您可能需要在 TFS 中删除这些文件夹，但它们将不再与 TFS 同步。

# ember.js - ContainerView 未正确连接子视图和控制器

> ID：13010202
> 
> 赞同：2
> 
> 时间：2012-10-22T11:11:05.130
> 
> 标签：ember.js

我在下面定义了一个容器视图

```
app.MainView = Ember.ContainerView.extend({
    childViews: ['navigationView', 'gutterView', 'mainView'],
    elementId: 'master',
    navigationView: app.NavView,
    gutterView: app.GutterView,
    mainView: Ember.View.create({
        elementId: 'content',
        template: Ember.Handlebars.compile('{{outlet contentOutlet}}')
    })
});
app.NavView = Ember.View.extend({
    elementId: 'main-menu',
    classNames: ['navigationPanel'],
    template: Ember.Handlebars.compile('{{controller}}')
});
app.NavController = Ember.ArrayController.extend({
    content: [],
}); 
```

这里的问题是，当我这样定义它时，app.NavView (app.NavController) 的控制器没有连接到视图。如果我通过模板查看 NavView 的 {{controller}}，我会得到 ApplicationController。

但是当我这样定义它时：

```
 app.MainView = Ember.ContainerView.extend({
    childViews: ['navigationView', 'gutterView', 'mainView'],
    elementId: 'master',
    navigationView: Ember.View.extend({
        elementId: 'nav',
        template: Ember.Handlebars.compile('{{outlet navOutlet}}')
    }),
    gutterView: app.GutterView,
    mainView: Ember.View.create({
        elementId: 'content',
        template: Ember.Handlebars.compile('{{outlet contentOutlet}}')
    })
}); 
```

并通过路由器中的 connectOutlet 连接 NavView

```
router.get('applicationController').connectOutlet('navOutlet', 'nav'); 
```

我知道 NavView 中连接的控制器是 NavController，这是正确的！

**问题是，我在这里缺少什么？我不想在这里有一个插座，而是希望通过 mainView 创建它。为什么当我使用 ContainerView 时，Ember 没有正确连接 View 和 Controller？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:50:17.937

视图和控制器之间的“连接”并不像您想象的那样“自动”。使用通过调用完成的网点

```
router.get('applicationController').connectOutlet('aOutlet', 'nav'); 
```

如果您浏览[https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/system/controller.js#L102](https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/system/controller.js#L102)的代码，您会看到它正在通过命名检索控制器约定，然后将刚刚创建的视图连接到它。

如果您不想在这里使用插座，我建议您手动将控制器交给视图。

编辑：为了准确说明为什么 NavView 的控制器在第一种情况下是 Application：

直接使用 NavView 类作为 mainView 的子项，不会自动将 NavController 绑定到它。因此，当您尝试获取它的控制器时，它会回退到其 parentView 的控制器。

# regex - 比较两个 URL

> ID：13010203
> 
> 赞同：1
> 
> 时间：2012-10-22T11:11:18.177
> 
> 标签：regex, perl

我需要比较 Perl 中的两个 URL。

仅由 DOMAIN 或 DOMAIN/（根 URL 以斜杠结尾）组成的 URL 是等效的。

也就是说，以下字符串应该相等：“http://example.com”和“http://example.com/”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:15:09.017

[比较](http://lwp.interglacial.com/ch04_01.htm)

```
To compare two URLs, use the eq( ) method:    
if ($url_one->eq(url_two)) { ... }

For example:

use URI;
my $url_one = URI->new('http://www.example.com');
my $url_two = URI->new('http://www.example.com/');

if ($url_one->eq($url_two)) {
  print "The two URLs are equal.\n";
}
The two URLs are equal. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:20:52.873

You could do:

```
my $url_1 = 'http://www.example.com';
my $url_2 = 'http://www.example.com/';

if ( $url_1 =~ m/\A$url_2\/\z/ || $url_2 =~ m/\A$url_1\/\z/ ) {
    print "URLs are the same\n";
} 
```

Well given that they are really valid URLs. The regex only checks that if you add the "/" at the end, it's still the same URL

So if you add "/" at the end of $url_1, it will be 'http://www.example.com/' which will make the second condition in the if true.

# c# - 如何在 WPF 中的 ViewModel 中设置 Combobox 的 SelectedId 并以特定格式设置 Textbox 的文本

> ID：13010206
> 
> 赞同：0
> 
> 时间：2012-10-22T11:11:25.977
> 
> 标签：c#, .net, wpf, combobox, textbox

我正在我的 wpf 应用程序中处理文本框和组合框。我很抱歉标题很奇怪。好吧，这是场景：

**xml:**

```
<ComboBox ItemsSource="{Binding PortModeList}" SelectedItem="{Binding SelectedPortModeList, Mode=OneWayToSource}" SelectedIndex="0" Name="PortModeCombo" />

<TextBox Grid.Column="1" Text="{Binding OversampleRateBox}" Name="HBFilterOversampleBox" /> 
```

**视图模型类：**

```
public ObservableCollection<string> PortModeList
    {
        get { return _PortModeList; }
        set
        {
            _PortModeList = value;
            OnPropertyChanged("PortModeList");
        }
    }

    private string _selectedPortModeList;
    public string SelectedPortModeList
    {
        get { return _selectedPortModeList; }
        set
        {
            _selectedPortModeList = value;                
            OnPropertyChanged("SelectedPortModeList");
        }
    }

    private string _OversampleRateBox;
    public string OversampleRateBox
    {
        get
        {
            return _OversampleRateBox;
        }

        set
        {
            _OversampleRateBox = value;
            OnPropertyChanged("OversampleRateBox");
        }
    } 
```

这里我有三个要求：

1.  通过`SelectedId`在 xaml 中使用，我可以选择 id，但我想从 viewmodel 类中设置我的组合框的 selectedid。即 `int portorder = 2 PortModeList->SetSelectedId(portOrder)`。我怎么能做这样的事情？还是他们有其他方法？

2.  我需要将文本框中的条目数限制为 4。即在文本框中输入 1234，它不应让用户超过 4 位。

3.  我想将文本格式设置`OversampleRateBox`为：0x__。即，如果用户想在变量中输入 23，那么我将文本设置为 0x23。基本上 0x 应该出现在开头。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:17:41.423

我会使用（就像你正在做的那样）的`SelectedItem`属性`ComboBox`，但是进行双向绑定。然后，您可以在视图模型中设置您的`SelectedPortModeList`（应该称为`SelectedPortMode`）。

```
<ComboBox ItemsSource="{Binding PortModeList}" 
       SelectedItem="{Binding SelectedPortMode}" ... 
```

在视图模型中：

```
// Select first port mode
this.SelectedPortMode = this.PortModeList[0]; 
```

如果要限制 a 中的字符数`TextBox`，请使用以下`MaxLength`属性：

```
<TextBox MaxLength="4" ... /> 
```

如果您想为 添加前缀`OversampleRateBox`，一个选项是在 setter 中测试 this 是否存在`OversampleRateBox`，如果不存在，则在分配给您的私有字段之前添加它。

**更新**

将您绑定`TextBox`到字符串属性：

```
<TextBox Grid.Column="1" Text="{Binding OversampleRateBox}" ... /> 
```

在您的属性的设置器中，在设置您的私有字段之前检查输入是否有效：

```
public string OversampleRateBox
{
    get
    {
        return _OversampleRateBox;
    }

    set
    {
        // You could use more sophisticated validation here, for example a regular expression
        if (value.StartsWith("0x"))
        {
            _OversampleRateBox = value;
        }

        // Now if the value entered is not valid, then the text box will be refreshed with the old (valid) value
        OnPropertyChanged("OversampleRateBox");
    }
} 
```

因为绑定是双向的，所以您也可以从视图模型代码中设置值（例如在视图模型构造函数中）：

```
this.OversampleRateBox = "0x1F"; 
```

# groovy - groovy++怎么了？

> ID：13010207
> 
> 赞同：4
> 
> 时间：2012-10-22T11:11:27.027
> 
> 标签：groovy, programming-languages, jvm-languages, groovy++

我只是偶然发现了 groovy++，发现它很有趣。

不幸的是，它似乎没有进一步发展？

*   根据 github，最后一次提交是一年多前。
*   邮件列表完全处于非活动状态，最后一条消息是在 4 月返回的。
*   最近没有关于它的消息。

该项目是否已搬迁并现在有另一个名称？它是否因为对 groovy 的改进而过时了？还是刚刚停产？

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:17:38.383

Groovypp 大约一年前停止更新，应该被视为停止更新。

静态编译现在被添加到 Groovy 2.0（通过`@CompileStatic`and`@TypeChecked`注释）。

这里有一些关于[Groovy 新特性](http://www.infoq.com/articles/new-groovy-20)的描述，还有一个性能比较（对于它的价值）[这里](http://java.dzone.com/articles/groovy-20-performance-compared)

相关的SO问题：

*   [静态编译的 Groovy 2.0 性能如何](https://stackoverflow.com/q/11344412/6509)

# linqpad - 在 Linqpad 中重新运行查询之间保存什么状态？

> ID：13010210
> 
> 赞同：5
> 
> 时间：2012-10-22T11:11:34.887
> 
> 标签：linqpad

在 Linqpad 中重新运行查询之间保存什么状态？我假设没有，所以如果你运行一个脚本两次，两次都会得到相同的结果。

但是，在同一个 Linqpad 选项卡中运行下面的 C# 程序两次。您会发现第一次它打印一个空列表，第二次打印一个带有消息“嘿”的列表。这是怎么回事？

* * *

```
System.ComponentModel.TypeDescriptor.GetAttributes(typeof(String)).OfType<ObsoleteAttribute>().Dump();  
System.ComponentModel.TypeDescriptor.AddAttributes(typeof(String),new ObsoleteAttribute("hey")); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T14:35:54.173

LINQPad 在查询之间缓存应用程序域，除非您在编辑 | 中另有请求。首选项（或按 Ctrl+Shift+F5 清除应用程序域）。这意味着存储在静态变量中的任何内容都将在查询之间保留，假设类型在数值上相同。这就是您在代码中看到附加类型描述属性的原因，也解释了为什么您经常在后续查询运行中看到性能优势（因为许多东西以一种或另一种方式缓存在静态变量中）。

您可以使用 LINQPad 的 Cache 扩展方法显式利用这一点：

```
var query = <someLongRunningQuery>.Cache();
query.Select (x => x.Name).Dump(); 
```

Cache() 是一个透明的扩展方法，如果在之前的查询中没有看到输入，它会准确地返回它所输入的内容。否则，它返回上一个查询的枚举结果。

因此，如果您更改第二行并重新执行查询，则查询将快速执行，因为将从缓存中提供，而不必重新执行。

# c# - .NET 设置项目启动条件自定义消息框

> ID：13010216
> 
> 赞同：0
> 
> 时间：2012-10-22T11:12:13.677
> 
> 标签：c#, .net, windows-installer

我想知道，如果“启动条件”被评估为假，是否有办法自定义显示的消息框？我正在使用“MSI 设置项目”。用一个例子订阅这个：

如果我要求在目标机器上安装 .NET 4 但它没有安装，则会出现一个消息框，告诉用户他需要安装 .NET 4 才能安装我的程序。我可以告诉 .NET 消息框应该是什么样子吗？（包括图片等......）

# php - Drupal 侧边栏导航链接

> ID：13010222
> 
> 赞同：2
> 
> 时间：2012-10-22T11:12:34.977
> 
> 标签：php, drupal, menu, drupal-7, drupal-theming

我正在设计一个 Drupal 7 网站。

我想在 drupal 平台版本 7 上创建如图所示的侧边栏菜单。

菜单必须是动态的，所以如果我添加一个新的菜单项，我可以很容易地做到这一点，也可以添加小图像图标。

![模板图像](../Images/2a41013097c9d55be7a5e04c66ac4e10.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:12:55.210

模块[menu_attributes](http://drupal.org/project/menu_attributes)允许您为每个菜单项设置`ID`or属性。`CLASS`希望这是你需要的:)

# jquery - IE7 在使用 jquery/jquery UI 时改变了我的风格和

> ID：13010223
> 
> 赞同：0
> 
> 时间：2012-10-22T11:12:34.673
> 
> 标签：jquery, jquery-ui, internet-explorer-7, hide, show

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:21:34.530

处理 IE 问题总是很棘手。我所做的是在开始时使用 css 重置，有助于消除所有与边距和填充有关的问题。如果您还没有，您可以尝试这种方法。

此外，当您说内容 div 时，您能否具体说明您的意思（如 html 代码中的哪一部分）

# cassandra - 为什么很多人将 Cassandra 称为面向列的数据库？

> ID：13010225
> 
> 赞同：70
> 
> 时间：2012-10-22T11:12:44.923
> 
> 标签：cassandra, nosql, data-modeling, column-oriented, wide-column-store

在互联网上阅读了几篇论文和文档，我发现了许多关于 Cassandra 数据模型的相互矛盾的信息。有许多人将其识别为面向列的数据库，其他人将其识别为面向行的数据库，然后将其定义为两者的混合方式。

根据我对 Cassandra 如何存储文件的了解，它使用 *-Index.db 文件访问 *-Data.db 文件的正确位置，其中存储了布隆过滤器、列索引，然后是所需的行。

在我看来，这是严格面向行的。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2016-08-05T16:24:40.230

*   如果您查看[Apache Cassandra git repo的](https://github.com/apache/cassandra)**自述**文件，它会说，

> Cassandra 是一个分区的行存储。行被组织成具有所需主键的表。
> 
> 分区意味着 Cassandra 可以在应用程序透明的情况下将您的数据分布在多台机器上。Cassandra 将在集群中添加和删除机器时自动重新分区。
> 
> 行存储意味着像关系数据库一样，Cassandra 按行和列组织数据。

*   面向列或列式数据库按列存储在磁盘上。

    **例如**`Bonuses`：表表

    ```
     ID         Last    First   Bonus
      1          Doe     John    8000
      2          Smith   Jane    4000
      3          Beck    Sam     1000 
    ```

*   在**面向行的**数据库管理系统中，数据将像这样存储： `1,Doe,John,8000;2,Smith,Jane,4000;3,Beck,Sam,1000;`

*   在**面向列的**数据库管理系统中，数据将像这样存储：
    `1,2,3;Doe,Smith,Beck;John,Jane,Sam;8000,4000,1000;`

*   Cassandra 基本上是一个**列式**存储

*   Cassandra 会将上述数据存储为，

```
 "Bonuses" : {
           row1 : { "ID":1, "Last":"Doe", "First":"John", "Bonus":8000},
           row2 : { "ID":2, "Last":"Smith", "First":"Jane", "Bonus":4000}
           ...
     } 
```

*   **此外，每行中的列数不必相同。一行可以有 100 列，而下一行只能有 1 列。**

*   阅读[本文](http://dbmsmusings.blogspot.com/2010/03/distinguishing-two-major-types-of_29.html)了解更多详情。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-10-22T21:28:12.147

是的，“面向列”的术语有点令人困惑。

Cassandra 中的模型是行包含列。要访问最小的数据单元（一列），您必须首先指定行名（键），然后是列名。

因此，在一个名为的列族中，`Fruit`您可以具有类似于以下示例的结构（有 2 行），其中水果类型是行键，并且每个列都有一个名称和值。

```
apple -> colour  weight  price variety
         "red"   100     40    "Cox"

orange -> colour    weight  price  origin
          "orange"  120     50     "Spain" 
```

与基于表的关系数据库的一个区别是可以随时省略列（橙色没有变化），或随时添加任意列（橙色有来源）。您仍然可以将上面的数据想象成一个表格，尽管它是一个稀疏的表格，其中许多值可能为空。

但是，“面向列”的模型也可以用于列表和时间序列，其中每个列名都是唯一的（这里我们只有一行，但我们可以有数千或数百万列）：

```
temperature ->  2012-09-01  2012-09-02  2012-09-03 ...
                40          41          39         ... 
```

这与关系模型完全不同，在关系模型中，必须将时间序列的条目建模为`rows`not `columns`。这种类型的用法通常被称为“宽行”。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-07-24T15:09:21.623

你们都提出了很好的观点，这可能会令人困惑。在示例中

```
apple -> colour  weight  price variety
         "red"   100     40    "Cox" 
```

apple 是键值，column 是数据，包含所有 4 个数据项。从所描述的情况来看，听起来所有 4 个数据项都作为单个对象存储在一起，然后由应用程序解析以提取所需的值。因此，从 IO 的角度来看，我需要阅读整个对象。恕我直言，这本质上是基于行（或对象）的，而不是基于列的。

基于列的存储在仓储中变得很流行，因为它为全表扫描 (DW) 提供了极大的压缩和减少了 IO，但是当您需要拉取每一列时，它会以增加 OLTP 的 IO 为代价（选择 *）。大多数查询不需要每一列，并且由于压缩，对于仅针对几列的全表扫描，IO 可以大大减少。让我举个例子

```
apple -> colour  weight  price variety
         "red"   100     40    "Cox"

grape -> colour  weight  price variety
         "red"   100     40    "Cox" 
```

我们有两种不同的水果，但都有一种颜色 = 红色。如果我们将颜色与重量、价格和品种分开存储在单独的磁盘页面（块）中，那么唯一存储的就是颜色，那么当我们压缩页面时，由于大量的重复数据删除，我们可以实现极端压缩。我们可以存储 10,000 种颜色，而不是在一个页面中存储 100 行（假设）。现在要读取红色的所有内容，它可能是 1 个 IO 而不是数千个 IO，这对仓储和分析非常有用，但如果我需要更新整行，则对 OLTP 不利，因为该行可能有数百列和一个更新（或插入）可能需要数百个 IO。

除非我遗漏了一些我不会称之为基于柱状的东西，否则我会称之为基于对象。目前尚不清楚对象在磁盘上的排列方式。多个对象是否放置在同一个磁盘页面中？有什么方法可以确保具有相同元数据的对象放在一起？一种水果可能包含与另一种水果不同的数据，因为它只是元数据或 xml 或您想要存储在对象本身中的任何内容，有没有办法确保将某些匹配的水果类型存储在一起以提高效率？

拉里

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-05-10T00:05:13.483

我遇到的最明确的术语是**宽列商店**。

它是一种**二维键值存储**，您使用行键和列键来访问数据。

该模型与关系模型（面向行和面向列）的主要区别在于**列信息是数据的一部分**。

这意味着数据可以是**稀疏**的。这意味着不同的行不需要共享相同的列名或列数。这启用了半结构化数据或无模式表。

您可以将宽列存储视为可以容纳无限数量的列的表，因此是宽的。

这里有几个链接来支持这一点：

*   [这篇 mongodb 文章](https://www.mongodb.com/nosql-explained)
*   [这篇 Datastax 文章](https://academy.datastax.com/planet-cassandra/what-is-nosql)也提到了它，尽管它将 Cassandra 归类为键值存储。
*   [这篇 db-engines 文章](https://db-engines.com/en/article/Wide+Column+Stores)
*   [这篇 2013 年的文章](http://www.buckenhofer.com/2013/11/high-level-overview-of-some-columnar-stores/)
*   [维基百科](https://en.wikipedia.org/wiki/Wide_column_store)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-09-24T04:17:05.147

Column Family 并不意味着它是面向列的。Cassandra 是列族，但不是面向列的。它将行及其所有列族存储在一起。

Hbase 是列族，并且以面向列的方式存储列族。不同的列族分别存储在一个节点中，甚至可以驻留在不同的节点中。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-12-27T12:06:35.103

IMO 这是用于 Cassandra 的错误术语。**相反，将其称为行分区**存储更为合适。让我为您提供一些详细信息：

***主键、分区键、聚类列和数据列：***

*每个表**都必须有一个具有唯一约束的主键**。*

```
Primary Key = Partition key + Clustering Columns

# Example
Primary Key: ((col1, col2), col3, col4)     # primary key uniquely identifies a row
                                            # we need to choose its components partition key
                                            # and clustering columns so that each row can be
                                            # uniquely identified
Partition Key: (col1, col2)                 # decides on which node to store the data
                                            # partitioning key is mandatory, and it
                                            # can be made up of one column or multiple
Clustering Columns: col3, col4              # decides arrangement within a partition
                                            # clustering columns are optional 
```

***分区键**是主键的第一个组成部分。其散列值用于**确定存储数据的节点**。分区键可以是由**多列**组成的复合键。我们想要**几乎相等的数据分布**，我们在选择主键时牢记这一点。*

*主键中分区键之后列出的任何字段都称为**聚类列**。这些**在分区内按升序存储数据**。聚类列组件还有助于确保每行的主键是唯一的。*

*您可以使用任意数量的聚类列。不能在 SELECT 语句中乱序使用集群列。您可以选择在 SELECT 语句中省略使用聚类列。没关系。请记住在使用 SELECT 语句时按顺序起诉他们。但请注意，在您的 CQL 查询中，如果您没有使用其他定义的集群列，则不能尝试访问列或集群列。例如，如果主键是`(year, artist_name, album_name)`并且您想`city`在查询的`WHERE`子句中使用列，那么只有当您的`WHERE`子句使用作为主键一部分的所有列时，您才能使用它。*

***代币：***

Cassandra 使用**令牌**来确定哪个节点拥有什么数据。令牌是一个 64 位整数，Cassandra 将这些令牌的范围分配给节点，以便每个可能的令牌都归一个节点所有。向集群中添加更多节点或删除旧节点会导致在节点之间重新分配这些令牌。

行的**分区键**用于使用给定的分区器（用于计算分区键的令牌的哈希函数）计算令牌，以确定哪个节点拥有该行。

***Cassandra 是行分区存储：***

*行是 Cassandra 中存储相关数据的最小单位。*

*不要把 Cassandra 的**列族（也就是表）**看成是 RDBMS 表，而是把它看成 a **`dict`of a`dict`**（这里`dict`是类似于 Python 的数据结构`OrderedDict`）：*

*   **外部`dict`**由行键（主键）键控：这决定了哪个分区和分区中的哪一行
*   内部由列键（数据列）键控：这是以**列`dict`**`dict`名作为键的数据
*   两者`dict`都是有序的（按键）并排序：外部`dict`按主键排序

*此模型允许您随时**省略列**或添加**任意列**，因为它允许您为不同的行拥有不同的数据列。*

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-09-12T06:00:15.727

Cassandra 有一个列族（table）的概念，最初来自 BigTable。但是，正如您所提到的，将它们称为面向列的确实是一种误导。在每个列族中，它们将一行中的所有列连同一个行键一起存储，并且它们不使用列压缩。因此，Bigtable 模型仍然主要是面向行的。

# javascript - 每 10 秒更改一个变量值

> ID：13010230
> 
> 赞同：-3
> 
> 时间：2012-10-22T11:13:10.593
> 
> 标签：javascript, variables

我有一组数组。

```
var markers = [
    { lat: 1.55851, lng: 103.63217, name: "Bus A" },
    { lat: 1.56525, lng: 103.63487, name: "Bus B" },
    { lat: 1.55843, lng: 103.64669, name: "Bus C" },
]; 
```

如何每 10 秒更改一次 lat 和 lng 值？也许我从另一组数组中获取值并每 10 秒分配给 lat 和 lng。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:20:01.347

您的答案的关键是使用`setInterval`，它会定期运行一段代码。

在您的情况下，您可能会执行以下操作：

```
setInterval(function() {
    // Get your new lat and lng values from somewhere
    val newLat = someOtherArray[0].lat

    // Now set them on the markers array (this is a very brief example)
    markers[0].lat = newLat;
}, 10 * 1000 /* interval is in milliseconds */ ); 
```

这将每 10 秒调用一次函数。因此，您需要为函数编写一个主体，它将您的`markers`值更改为您想要的任何值（可能是根据“另一组数组”的当前值）。然后这将起作用，因为您的函数将定期运行并保持`markers`最新状态。

# installation - WiX SetProperty - 之前/之后属性的可能值是什么

> ID：13010235
> 
> 赞同：26
> 
> 时间：2012-10-22T11:13:25.477
> 
> 标签：installation, wix, setup-project

不知道为什么，但我发现很难找出哪些标准值可用于 WiX`SetProperty`声明的 Before 或 After 属性。

我知道以下两个，但我正在寻找一个更详尽的列表。

> *   应用搜索
> *   成本最终确定

这是它的一个使用示例：

```
<SetProperty Id="INSTALLFOLDER.WEBSITECLIENT" Value="[INETPUBWWWROOT]\[VIRTUAL_DIR_VAL]" Before="Install" /> 
```

[手册/文档页面](http://wix.sourceforge.net/manual-wix3/wix_xsd_setproperty.htm)上没有任何内容。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-22T12:59:02.920

此链接将为您提供建议的安装执行顺序，您可以使用任何您想要的。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa372038%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372038%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:21:08.297

您无需调用`<SetProperty>`即可设置 Web 应用的安装路径。[`Directory`](http://wix.sourceforge.net/manual-wix3/wix_xsd_directory.htm)而是使用 < > 元素映射目标目录。

这篇[文章](http://blogs.planetsoftware.com.au/paul/archive/2011/02/25/creating-a-web-application-installer-with-wix-3.5-and-visual-yet-again.aspx)可以帮助入门。

```
<Directory Id='TARGETDIR' Name='SourceDir'>
  <Directory Id="IISMain" Name='inetpub'>
    <Directory Id="WWWMain" Name='wwwroot'
               ComponentGuidGenerationSeed='CA19CA4A-C69B-4CDB-BCBD-6C3C5E9A3EDC'>
      <Directory Id='INSTALLLOCATION' Name='!(loc.ProductName)'>
      </Directory>
    </Directory>
  </Directory>
</Directory> 
```

# java - 使用 Jsoup 进行抓取

> ID：13010237
> 
> 赞同：0
> 
> 时间：2012-10-22T11:13:28.487
> 
> 标签：java, jsoup

我需要从这个页面[http://bulbapedia.bulbagarden.net/wiki/List_of_Pok%C3%A9mon_by_National_Pok%C3%A9dex_number](http://bulbapedia.bulbagarden.net/wiki/List_of_Pok%C3%A9mon_by_National_Pok%C3%A9dex_number)收集数据，但问题是我需要的是每个口袋妖怪的链接，所以对于第一个，“ /wiki/Bulbasaur_(Pok%C3%A9mon)”（之后我需要做的就是在前面添加“bulbapedia.bulbagarden.net”，但我不知道如何获得所有这些。我看过一些例子但我在这里没有看到任何对我有帮助的东西。我见过的那些通过在 div 中获取数据来使用循环，但这些链接似乎不是任何 div 的一部分，除了主要的大一个。

那么有谁知道我怎么能刮掉这个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:27:24.230

这是一个解决方案：

```
Document doc = Jsoup.connect("http://bulbapedia.bulbagarden.net/wiki/List_of_Pok%C3%A9mon_by_National_Pok%C3%A9dex_number").get();

for( Element element : doc.select("td > span.plainlinks > a") )
{
    /* 
     * You can do further things here - for this example we 
     * only print the absolut url of each link.
     */
    System.out.println(element.absUrl("href"));
} 
```

这已经为您提供了每个 pokemon 链接的**绝对URL：**

```
http://bulbapedia.bulbagarden.net/wiki/Bulbasaur_(Pok%C3%A9mon)
http://bulbapedia.bulbagarden.net/wiki/Ivysaur_(Pok%C3%A9mon)
http://bulbapedia.bulbagarden.net/wiki/Venusaur_(Pok%C3%A9mon)
http://bulbapedia.bulbagarden.net/wiki/Charmander_(Pok%C3%A9mon)
... 
```

但是，如果您需要**相对**URL，您只需替换`element.absUrl("href")`为`element.attr("href")`.

结果：

```
/wiki/Bulbasaur_(Pok%C3%A9mon)
/wiki/Ivysaur_(Pok%C3%A9mon)
/wiki/Venusaur_(Pok%C3%A9mon)
/wiki/Charmander_(Pok%C3%A9mon)
... 
```

有关这一点的解释，请参阅：[Jsoup Selector API](http://jsoup.org/cookbook/extracting-data/selector-syntax)。一些很好的例子可以在这里找到：[Jsoup Codebook](http://jsoup.org/cookbook/)。

# javascript - Javascript 提交点击

> ID：13010242
> 
> 赞同：1
> 
> 时间：2012-10-22T11:13:34.727
> 
> 标签：javascript, javascript-events

我试图在单击提交按钮时显示 div，但是当我提交时，div 会暂时显示，直到页面重新加载。页面重新加载后，div 消失了。我需要停止该褪色。如何在 javascript 中执行此操作。代码如下：

## 所有

链接 记录总数

搜索

```
 <div class="child" id="p2" style="display:none" data-dojo-type="dijit/TitlePane" data-dojo-props="title: 'Result'">
      <%     String a1=fa.getsrc();
            String name=request.getParameter("sel");
            String src=request.getParameter("linkrec");%>
            The Selected source is ---><%=name %><br><br>
        <b>The Selected operation is--><%=src %></b><br>
        <b>The Source <%=name%> Has <%=src%>---><%=a1%></b>

        </div> 
```

```
 function check()
      {
          usersrc=document.getElementById("sel").value;
          userselect=document.getElementById("linkrec").value;

         if(usersrc=="<---Select the Sources--->"|| userselect=="<---Select The Operation--->")
              {
              alert("Select src and records");
              }
        else if (usersrc=="All" && userselect=="Linkages")
             {
             document.getElementById('p2').style.display ='';
             }</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:22:39.737

只需将**return false**添加到您的 onSubmit

```
<input type="submit" name="submit" value="Save" onclick="return showdiv();"/> 
```

** 在 JavaScript 中**

```
function showdiv()
{
     var error = false;
    //validate your form.
    if(error == true){ return true;}
    else
    {
       //show div
       return false;
    }
} 
```

# java - printf 将空格附加到字符串的末尾

> ID：13010243
> 
> 赞同：2
> 
> 时间：2012-10-22T11:13:36.350
> 
> 标签：java, command-line, formatting, printf

在 Java 中，有什么方法可以使用 printf 在字符串末尾添加空格，以确保所有字符串在命令行中的长度相同。

我有一个返回记录的程序，但我需要这样显示它们......

```
 Bob          27     007895
 Christopher  32     007856 
```

本质上，我希望每个名称占用 30 个字符，以便所有列对齐。目前我在字符串末尾使用选项卡来创建列，但是有些名称会导致所有列都未对齐（克里斯托弗就是其中之一）....所以我假设有更好的方法去做这个？

```
System.out.print(Bob.getName() + "\t");
System.out.print(Bob.getAge() + "\t");
Sstem.out.print(Bob.getRegnumber() + "\t");
System.out.print(Chris.getName() + "\t");
System.out.print(Chris.getAge() + "\t");
Sstem.out.print(Chris.getRegnumber() + "\t"); 
```

我不使用 GUI 输出到命令行。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T11:26:16.223

这是一个[备忘单，总结了各种 printf 符号](http://alvinalexander.com/blog/post/software-dev/cheat-sheet-reference-printf-format-specifier-syntax)以及如何使用它们。

您想为每个字段指定一个特定的最大大小，以确保所有字段都对齐。如果您没有指定最大尺寸，那么您将再次出现错位。

所以需要类似下面的格式："%-30.30s %8d %8d\n"

如果最后一个字段是字符串而不是整数，您将需要类似“%-30.30s %8d %10.10s\n”的内容。

"%-30.30s" 将打印左对齐最多 30 个字符。"%10.10s" 将打印最多 10 个字符的右对齐。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T11:17:21.750

```
System.out.printf( "%30s %d %d", Bob.getName(), Bob.getAge(), Bob.getRegnumber() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:19:20.130

You should find the max no. of chars, the name column should have.

Before printing you can get all the values, find the largest length and make the width accordingly.

# unix - 如何从unix中的文件中删除特定行？

> ID：13010245
> 
> 赞同：7
> 
> 时间：2012-10-22T11:13:55.733
> 
> 标签：unix, sed

我有一个非常大的文件，我需要从中删除特定的行（行号 941573 ）

我对这个环境有点陌生，但我一直在谷歌搜索这个问题无济于事。

我已经尝试过使用 sed 命令，但它似乎不起作用

```
sed -e '941572,941574d' filenameX > newfilenameY 
```

我也试过

```
sed -e '941573d' filenameX > newfilenameY 
```

然而，“newfilenameY”文件和原始文件“filenameX”都仍然包含我要删除的行。这是一个 fastq 文件，虽然我不明白这会有什么不同。就像我说我是 unix 新手，所以也许我弄错了 sed 命令

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T11:15:02.097

[`d`](https://www.gnu.org/software/sed/manual/html_node/Common-Commands.html#Common-Commands)删除一行/行。所以你的第二种方法有效。

```
$ sed '941573d' input > output 
```

**长示例：**

```
% for i in $(seq 1000000)
do
echo i >> input
done
% wc -l input
1000000 input
% sed '941573d' input > output
% wc -l output
999999 output
% diff -u input output                                      :(
--- input       2012-10-22 13:22:41.404395295 +0200
+++ output      2012-10-22 13:22:43.400395358 +0200
@@ -941570,7 +941570,6 @@
 941570
 941571
 941572
-941573
 941574
 941575
 941576 
```

**简短的例子：**

```
% cat input
foo
bar
baz
qux
% sed '3d' input > output
% cat output             
foo
bar
qux 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:16:34.800

以下是如何从文件中删除一行或多行。

*句法：*

```
sed '{[/]<n>|<string>|<regex>[/]}d' <fileName>      
sed '{[/]<adr1>[,<adr2>][/]d' <fileName>
/.../=delimiters
n = line number
string = string found in in line
regex = regular expression corresponding to the searched pattern
addr = address of a line (number or pattern )
d = delete 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:06:11.880

我生成了一个包含 1000000 行的测试文件并尝试了你的`sed -e '941573d' filenameX > newfilenameY`，它在 Linux 上运行良好。

也许我们还有一些其他的误解。行号从 1 开始计数，而不是从 0 开始。如果您从零开始计数，您会发现缺少第 941572 行。

你试过`diff filenameX newfilenameY`吗？这将突出任何意想不到的变化。

我对 FASTQ 格式了解不多，但您确定我们谈论的是文本文件行号，而不是序列号吗？

一般行长度限制为 4096 字节，您的任何行是否超过该长度？（这不太可能，但我认为值得提出这个问题）。

# php - 如何将搜索表单生成的查询字符串转换为没有查询字符串的新 URL？

> ID：13010249
> 
> 赞同：2
> 
> 时间：2012-10-22T11:14:20.193
> 
> 标签：php, .htaccess, search, redirect, query-string

我有一个搜索表单，在提交时会生成类似这样的 url：

```
http://mydomain.com/index.php?find=some+text 
```

我的目标是让它看起来像：

```
http://mydomain.com/find/some+text 
```

如何使用 .htaccess 做到这一点？

到目前为止，我有这个：

```
RewriteCond %{REQUEST_URI}  ^/index\.php$
RewriteCond %{QUERY_STRING} &?find=(.*)&?
RewriteRule ^index.php$ find/%1? [R=301,L]

RewriteRule ^find/(.*)$ index.php?find=$1 [L] 
```

如果查询（即我搜索的内容）仅包含数字、字母或下划线，则此方法有效，但我想让它能够搜索包括空格和其他字符在内的任何内容！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:33:48.100

因此，似乎 404 错误是由于 Web 服务器中的某些配置不允许 URL 具有 +（加号）而引起的。它会在第一个 + 处中断并尝试以该名称查找文件。

整理好重写规则后是这样的：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /*.index\.php\?find=([^&\.]+)?\sHTTP
RewriteRule ^/?index.php$ /find/%1? [L,R=301]
RewriteRule ^/?find/(.*)$ /index.php?find=$1 [L,NC] 
```

谢谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:41:18.967

不应该这样的工作吗？

```
RewriteRule ^find/([^/]*)$ /index.php?find=$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:19:49.133

您需要匹配实际请求而不是 URI，因为 URI 是通过您的第二条规则重写的。这会导致重定向循环。

重定向浏览器：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\?find=([^&\.]+)(&([^\ ]+))?
RewriteRule ^/?index.php$ /find/%1?%3 [L,R=301] 
```

内部重写

```
RewriteRule ^/?find/(.*)$ /index.php?find=$1 [L,QSA] 
```

# flash - 如何在 WebView 中启用 GoogleTV 上的 Flash

> ID：13010251
> 
> 赞同：0
> 
> 时间：2012-10-22T11:14:25.560
> 
> 标签：flash, webview, android-webview, google-tv

Google TV (Sony NSZ-GS7, OS 3.2) 上的 WebView 是否支持 Flash？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:14:06.057

Android WebView（包括 Google TV）不支持 Flash。

# c - 如何查找 pthread 是否有挂起的取消请求

> ID：13010257
> 
> 赞同：4
> 
> 时间：2012-10-22T11:14:48.003
> 
> 标签：c, linux, multithreading, pthreads

我想查找线程是否`pthread_cancel`已被调用。

我不想使用一些表并维护它。有没有可用的库函数？我不想使用一些取消点函数来取消线程，如果有任何挂起的取消请求会取消线程，我只想知道是否有任何挂起的取消请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T15:17:45.547

即使您调用`pthread_cancel`，它也不会立即执行。处理器需要自己的时间来取消线程。但是，这里只是提一下：不建议使用异步取消或立即取消。当使用 pthread_setcanceltype() 作为 PTHREAD_CANCEL_ASYNCHRONOUS 时，我遇到了一个问题，即我的应用程序在取消期间崩溃。我真的找不到原因。据我所知，甚至在调试崩溃场景时我已经搜索了很多相同的内容，我们没有方法来确认线程在什么时候被取消。

# c# - 将实体映射到 EF 4.5 中的多对多联结表

> ID：13010263
> 
> 赞同：0
> 
> 时间：2012-10-22T11:15:02.983
> 
> 标签：c#, database, entity-framework, fluent-interface

目前，我正在通过 Fluent Api 将现有的数据库表映射到新的 EF 4.5 模型。我有一个关于如何将以下数据库结构映射到类的问题。

```
Students(pk Id...)
Courses (pk Id...)
Students_Courses (pk Id, fk StudentId, fk CourseId)
Comments (pk Id, fk Students_Courses Id, comment, dateposted...) 
```

这个想法是每个 student_course 对我可能有很多评论。在这种情况下代表我的班级的最佳方式是什么？这里的问题是我可能需要将 Comment 实体映射到 Students_Courses 表，并以某种方式确定该评论属于哪个学生和课程（就课程而言）。对设计有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:01:22.583

也许您想使用[Entity Framework Power Tools](http://blogs.msdn.com/b/adonet/archive/2012/04/09/ef-power-tools-beta-2-available.aspx)将您的数据模型反向工程为带有`DbContext`API 的“代码优先”模型。

您将看到`StudentCourse`将生成类似于类的东西，如下所示：

```
public class StudentCourse
{
    public StudentCourse()
    {
        this.Comments = new List<Comment>();
    }

    public int StudentCourseId { get; set; }
    public int StudentId { get; set; }
    public int CourseId { get; set; }
    public virtual ICollection<Comment> Comments { get; set; }
    public virtual Course Course { get; set; }
    public virtual Student Student { get; set; }
} 
```

`Comment`看起来像这样：

```
public class Comment
{
    public int CommentId { get; set; }
    public int StudentCourseId { get; set; }
    public virtual StudentCourse StudentCourse { get; set; }
    ...
} 
```

所以评论通过以下方式与学生和课程相关`StudentCourse`

# objective-c - 根据 Font/Size 改变 NSTextField 的高度

> ID：13010264
> 
> 赞同：3
> 
> 时间：2012-10-22T11:15:04.717
> 
> 标签：objective-c, cocoa, size, nstextfield, nsfont

**好的，这是我的情况：**

*   我有一个`NSTextField`，设置为**多行文本标签**
*   `NSTextField`应该只包含一行文本（即使它是多行的）
*   `NSTextField`有一个固定的**高度**。
*   **字体**和**字体大小**由用户更改

**问题 ：**

*   根据使用的字体和大小，**文本的底部会丢失**（因为它超出了`NSTextField`的边界

**我想要的是 ：**

*   根据选择（字体和字体大小）获取**文本高度**`NSTextField`，并相应地设置高度。

* * *

我知道这听起来可能很复杂，但我也知道可以做到。

有任何想法吗？有什么可以指点我的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-02T07:39:13.057

如前所述，NSTextField 和 UITextField 是非常不同的对象（与它们的名字所暗示的相反）。具体来说，对于 NSTextField，您可以使用涉及 NSLayoutManager 的优雅解决方案。NSLayoutManager 对象协调保存在 NSTextStorage 对象中的字符的布局和显示。它将 Unicode 字符代码映射到字形，在一系列 NSTextContainer 对象中设置字形，并在一系列 NSTextView 对象中显示它们。

您所需要的只是创建一个 NSLayoutManager、一个 NSTextContainer 和一个 NSTextStorage。它们以类似的方式包装在一起：

```
.-----------------------.
|     NSTextStorage     | 
|  .-----------------.  |
|  | NSLayoutManager |  |
|  '-----------------'  |
|  | NSTextStorage   |  |
|  '-----------------'  |
|                       |
'-----------------------' 
```

也就是说，您可以使用 layoutManager 方法`usedRectForTextContainer:`来估计包含所需文本的正确大小。

以下应该适用于您的问题：

```
- (float)heightForStringDrawing:(NSString *)aString withFont:(NSFont *)aFont andWitdh:(float)myWidth
{
    NSTextStorage *textStorage = [[NSTextStorage alloc] initWithString:aString];
    NSTextContainer *textContainer = [[NSTextContainer alloc] initWithContainerSize:NSMakeSize(myWidth,CGFLOAT_MAX)];

    NSLayoutManager *layoutManager = [[NSLayoutManager alloc] init];
    [layoutManager setTypesetterBehavior:NSTypesetterBehavior_10_2_WithCompatibility];
    [layoutManager addTextContainer:textContainer];
    [textStorage addLayoutManager:layoutManager];

    [textStorage addAttribute:NSFontAttributeName value:aFont
                        range:NSMakeRange(0,[textStorage length])];
    [textContainer setLineFragmentPadding:0.0];

    NSRange glyphRange = [layoutManager glyphRangeForTextContainer:textContainer];
    [layoutManager drawGlyphsForGlyphRange: glyphRange atPoint:NSMakePoint(0, 0)];

    return [layoutManager usedRectForTextContainer:textContainer].size.height;
} 
```

有关此主题的详尽 Apple 文档：

[https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/TextLayout/Tasks/StringHeight.html#//apple_ref/doc/uid/20001809-CJBGBIBB](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/TextLayout/Tasks/StringHeight.html#//apple_ref/doc/uid/20001809-CJBGBIBB)

此外，一些老手前段时间在 Apple Mailing List 上剖析过这个问题：

[http://lists.apple.com/archives/cocoa-dev/2006/Jan/msg01874.html](http://lists.apple.com/archives/cocoa-dev/2006/Jan/msg01874.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-07T15:52:20.990

`CGContextGetFontRenderingStyle: invalid context 0x0\. If you want to see the backtrace, please set CG_CONTEXT_SHOW_BACKTRACE environmental variable.`正如@valvoline 所说，这是可行的，但是如果您在drawRect 之外执行此操作，您会收到很多CGContext 警告。最好的解决方案是不使用 drawGlyphsForGlyphRange：作为苹果文档[https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/TextLayout/Tasks/StringHeight.html#//apple_ref/doc/uid/20001809- CJBGBIBB](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/TextLayout/Tasks/StringHeight.html#//apple_ref/doc/uid/20001809-CJBGBIBB)告诉我们。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-22T11:28:56.363

您可以获取字符串的大小，然后相应地更改高度

```
NSString *text = // your string
CGSize constraint = CGSizeMake(210, 20000.0f);
CGSize size = [text sizeWithFont:[UIFont fontWithName:@"Helvetica-Light" size:14] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

UITextField *cellTextLabel = [[UITextField alloc] initWithFrame:CGRectMake(70, 9, 230, size.height)];
cellTextLabel.lineBreakMode = UILineBreakModeWordWrap;
cellTextLabel.numberOfLines = 50;
cellTextLabel.backgroundColor = [UIColor clearColor];
cellTextLabel.text = text;
cellTextLabel.font = [UIFont fontWithName:@"HelveticaNeue-Light" size:14];
[self.view addSubview:cellTextLabel];
[cellTextLabel release]; 
```

# mysql - 更改root密码后PHPMyAdmin无法连接

> ID：13010268
> 
> 赞同：7
> 
> 时间：2012-10-22T11:15:28.587
> 
> 标签：mysql, configuration, phpmyadmin, xampp, change-password

我安装了 Xampp（适用于 Windows）。我很高兴使用它的所有功能。

然后我想更改MySql密码。我设置了一个随机生成的密码（rCZ4Xnz78zbLY2Vh）。然后PHPMyAdmin停止登录。它开始给出以下错误消息，此后一直如此：

```
Error

MySQL said:
Cannot connect: invalid settings.

phpMyAdmin tried to connect to the MySQL server, and the server rejected the connection.
You should check the host, username and password in your configuration and make sure that
they correspond to the information given by the administrator of the MySQL server. 
```

然后我编辑了PHPMyAdmin的“config.inc.php”文件，其内容如下：

```
<?php

/* Servers configuration */
$i = 1;
$cfg['Servers'][$i]['host']         = '127.0.0.1';
$cfg['Servers'][$i]['port']         = '3306';
$cfg['Servers'][$i]['ssl']          = FALSE;
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['extension']    = 'mysql';
$cfg['Servers'][$i]['compress']     = FALSE;
$cfg['Servers'][$i]['controluser']  = 'root';   
$cfg['Servers'][$i]['controlpass']  = 'rCZ4Xnz78zbLY2Vh';
$cfg['Servers'][$i]['auth_type']    = 'config';
$cfg['Servers'][$i]['user']         = 'root';
$cfg['Servers'][$i]['password']     = 'rCZ4Xnz78zbLY2Vh';
$cfg['Servers'][$i]['nopassword']   = TRUE;

/* rajk - for blobstreaming */
$cfg['Servers'][$i]['bs_garbage_threshold']     = 50;
$cfg['Servers'][$i]['bs_repository_threshold']  = '32M';
$cfg['Servers'][$i]['bs_temp_blob_timeout']     = 600;
$cfg['Servers'][$i]['bs_temp_log_threshold']    = '32M';

/* Other settings */
$cfg['blowfish_secret'] = '';
$cfg['DefaultCharset']  = 'utf-8';
$cfg['UploadDir']       = '';
$cfg['SaveDir']         = '';

?> 
```

但是我能够通过命令行使用相同的密码连接到 MySql 服务器。

```
C:\Users\hkBattousai>mysql.exe --user=root --password=rCZ4Xnz78zbLY2Vh
mysql.exe: Unknown OS character set 'cp857'.
mysql.exe: Switching to the default character set 'latin1'.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 21
Server version: 5.5.27 MySQL Community Server (GPL)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> 
```

然后我通过命令行界面删除了密码：

![删除用户密码](../Images/122c8041212fbaae39a6c9cfe50d364d.png)

我还从`config.inc.php`文件中删除了密码。该文件中的相关行现在是：

```
$cfg['Servers'][$i]['controluser']  = 'root';
$cfg['Servers'][$i]['controlpass']  = '';
$cfg['Servers'][$i]['user']         = 'root';
$cfg['Servers'][$i]['password']     = ''; 
```

目前，这很奇怪，但是我可以用我删除的密码连接，但我不能用空密码连接：

```
C:\Users\hkBattousai>mysql.exe --user=root --password=rCZ4Xnz78zbLY2Vh  // Connects
C:\Users\hkBattousai>mysql.exe --user=root --password=                  // Error given 
```

我想为这个用户分配另一个随机密码，并且我想通过 PHPMyAdmin 访问我的数据库，就像我之前在全新的 Xampp 安装中所做的那样。我该怎么办？我真的很困惑，我需要你的帮助。

就像`config.inc.php`文件内容被忽略一样。我从模板文件中复制了它`config.sample.inc.php`并更改了它的内容。它现在位于目录中`\Xampp\phpmyadmin\`。

* * *

版本：

```
Xampp   : 3.1.0
MySQL   : 5.5.27
PHP     : 5.4.7
Apache  : 2.4
Windows : 7 Ultimate x64 SP1 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-09-11T05:26:07.080

您需要编辑 phpMyAdmin 目录（可能是 C:\xampp\phpMyAdmin）中的 config.inc 文件，并更改此行以匹配您在 phpMyAdmin 中为 root 输入的密码。

> $cfg['Servers'][$i]['password'] = ' ';

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-19T07:16:13.610

如果您已经安装了 WAMP，请转到 [wamp root]\apps[phpmyadmin 安装] 并找到文件 config.inc.php。然后您将以下条目更改为 root 用户的新密码。

$cfg['服务器'][$i]['密码']

保存文件，不要忘记重新启动 WAMP 服务。现在它应该作为一个魅力:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:07:57.663

您需要指定实际密码。配置文件中未加密的密码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-17T11:08:05.490

这是 Windows 机器的解决方案：当您将根密码更改为假设`admin`时，现在当您访问**[http://localhost/phpmyadmin](http://localhost/phpmyadmin)**时，您会看到以下屏幕 [![在此处输入图像描述](../Images/52b6156c2cd1aecfde4ce50dfe232d05.png)](https://i.stack.imgur.com/4AWeW.png)

打开**XAMPP_SETUP/phpMyAdmin/config.inc.php**文件更改`config`并`cookie`添加密码。 再次访问 **[http://localhost/phpmyadmin](http://localhost/phpmyadmin)**！！[![在此处输入图像描述](../Images/633b6e11d0b147b7b5ed6026b8ffea78.png)](https://i.stack.imgur.com/gdbpT.png) [![在此处输入图像描述](../Images/7db0303448b4aa151fb6c7742c69f32f.png)](https://i.stack.imgur.com/tI7Ex.png)

# php - 无法通过 SSH 通过 PHP 执行 sphinx - 连接失败 errno 111

> ID：13010275
> 
> 赞同：0
> 
> 时间：2012-10-22T11:15:50.317
> 
> 标签：php, ssh, full-text-search, sphinx

我已经在 Linux 服务器上设置了 spinx - 索引已通过 SSH 工作我现在正在尝试将 sphinx 连接到网站“前端”上的 PHP

这是我尝试使用的 search.php 文件 [http://pastebin.com/Q27dK6Kq](http://pastebin.com/Q27dK6Kq)

每次我从命令行运行 php search.php 时，我都会收到以下错误：查询失败：连接到 195.xxx.xxx.xxx:3312 失败（errno=111，msg=Connectioned denied）。任何想法如何解决这一问题？

下面是我的狮身人面像配置文件

狮身人面像配置文件

#

# 最小的 Sphinx 配置示例（干净、简单、实用）

#

源文章 { 类型 = mysql

```
 sql_host                = localhost
    sql_user                = username
    sql_pass                = randompassword
    sql_db                  = my_database
    sql_port                = 3306  # optional, default is 3306

    sql_query               = SELECT ID, Title, Description from articles

    # sql_attr_uint         = group_id
    # sql_attr_timestamp    = date_added

    sql_query_info          = SELECT * FROM articles WHERE ID=$id 
```

}

index test1 { source = 文章路径 = data/test1 docinfo = extern charset_type = sbcs }

索引 testrt { 类型 = rt rt_mem_limit = 32M

```
 path                    = data/testrt
    charset_type            = utf-8

    rt_field                = Title
    rt_field                = Description 
```

}

索引器 { mem_limit = 32M }

searchd { 听 = 9312 听 = 3312:mysql41 日志 = /var/log/searchd.log query_log = /var/log/query.log }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:29:46.710

已修复 - 由于某种原因，安装已损坏并且缺少一个文件。＃诡异的

# ios - iOS SDK6：UIViewController 有时不显示

> ID：13010280
> 
> 赞同：3
> 
> 时间：2012-10-22T11:16:31.597
> 
> 标签：ios, objective-c, uiviewcontroller, uitableview, viewdidappear

自从我们遇到 XCode 4.5.x 和 SDK 6 以来，我的 iOS 应用程序 (iPhone) 出现了一个奇怪的问题。问题是视图控制器大部分时间都显示，但有时不显示。我已经检查过在所有情况下都调用了`viewDidLoad`,`viewWillAppear`和`viewDidAppear`委托方法，但这似乎并不影响视图是否显示。

```
BroadcastOptionsViewController *tmpView = [[BroadcastOptionsViewController alloc] init]; 
[self.navigationController pushViewController:tmpView animated:YES]; 
```

我们从多个地方调用这个视图控制器（应用程序使用 a`UITabBarController`并且这段代码是从两个不同的选项卡调用的，它们都有自己的导航控制器）并且无论通过哪个路径完成，错误似乎都会表现出来，这导致我怀疑视图控制器本身，或者可能是内存损坏。

我们已经在多个设备（iOS 5.x 和 6、iPhone 4/3GS、iPod touch）上测试了该应用程序，它似乎是相当随机地发生的（例如在“冷启动”之后以及在使用该应用程序一段时间之后）。

最后，我曾经`BroadcastOptionsViewController`是 a 的子类`UITableViewController`。我得到了一个建议，让它成为一个`UIViewController`并使用一个成员`UITableView`。这似乎减少了问题的发生，但仍然没有解决它。

**编辑：** 该视图控制器曾经有一个 XIB（未使用），但已被删除。我已经关闭了 XCode，从设备中删除了应用程序，清除了`~/Library/Developer/XCode/DerivedData/*`（显然是 XCode 4+ 中的已知错误）。

根据要求，这里有更多代码：

```
-(id) init {
    NSLog(@"BroadcastOptionsViewController:init");

    self = [super init];

    if (self) {
        // Some scalar members initialized
    }

    return self;
}

-(void) viewDidLoad {
    NSLog(@"BroadcastOptionsViewController:viewDidLoad");

    [super viewDidLoad];

    int navBarHeight = self.navigationController.navigationBar.frame.size.height;

    tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, self.view.bounds.size.height) style:UITableViewStyleGrouped];
    [tableView setFrame:CGRectMake(0, 0, 320, self.view.bounds.size.height - navBarHeight)];

    [tableView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"background.png"]]];
    [tableView setDelegate:self];
    [tableView setDataSource:self];
    [tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];
    [self.view addSubview:tableView];

    self.title = NSLocalizedString(@"Title", nil);
    self.navigationController.navigationBar.tintColor = [LookAndFeel defaultColor];

    tableView.allowsSelection = YES;

    UIBarButtonItem *btn_cancel = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancel)];
    self.navigationItem.leftBarButtonItem = btn_cancel;
    [btn_cancel release];

    UIBarButtonItem *btn_action =
    [[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"Go", nil)
                                     style:UIBarButtonSystemItemDone
                                    target:self
                                    action:@selector(doAction)];
    self.navigationItem.rightBarButtonItem = btn_action;
    [btn_action release];
}

-(void) viewWillAppear:(BOOL) animated {
    NSLog(@"BroadcastOptionsViewController:viewWillAppear");

    [super viewWillAppear:animated];

    [[UIApplication sharedApplication] setStatusBarHidden:NO];

    // WORKAROUND: Navigation bar hiding below status bar
    [self.navigationController setNavigationBarHidden:YES animated:NO];
    [self.navigationController setNavigationBarHidden:NO animated:NO];

    // Events
    [self subscribeToApplicationEvents];
}

-(void) viewDidAppear:(BOOL)animated {
    NSLog(@"BroadcastOptionsViewController:viewDidAppear");
    // Always properly called, independent of whether view actually appears
} 
```

# javascript - Jquery keyup 更改键中设置的值

> ID：13010282
> 
> 赞同：0
> 
> 时间：2012-10-22T11:16:32.937
> 
> 标签：javascript, jquery, html, coffeescript

我有一个选择标签。该下拉菜单的 ON keydown 我正在设置一些从选项中选择一些值作为

```
$(this).find("option[value='11']").attr('selected', 'selected') 
```

但它显示`12`在下拉列表中，而检查下拉列表显示选项`11`被选中

```
<option value="11" selected="selected">11</option> 
```

任何想法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:18:39.813

`select`您可以直接通过 val()从 中选择一个元素`select`：

```
$(this).val('11'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:27:20.827

```
$(this).find("option[value='11']").attr('selected', 'selected') 
```

你只是错过了**]**。

我不明白你实际上需要什么？

如果您添加一些描述，我们可以帮助您..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:26:06.597

如果您所做的只是尝试使用箭头键来更改值，那么您实际上只需要创建一个`change`事件处理程序

```
$('select').change(function(){
   alert ($(this).val())

}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:54:38.970

根据以下演示，您可以区分`keydown`和`keyup`事件。

注意：根据定义，keydown 事件发生在按键上的任何其他事件之前。

**`keydown`选择 12的行为**

```
$('#ddwon').on('keydown', function(){
    var value = $(this).val('11');
    $(value ).attr('selected', 'selected')   
}); 
```

[**演示**](http://jsfiddle.net/nPSja/)

**`keyup`选择 11的行为**

```
$('#ddwon').on('keyup', function(){
    var value = $(this).val('11');
    $(value ).attr('selected', 'selected')   
}); 
```

[**演示**](http://jsfiddle.net/nPSja/1/)

# ms-access - 访问 2007 VBA 错误 2467 函数

> ID：13010289
> 
> 赞同：2
> 
> 时间：2012-10-22T11:16:51.447
> 
> 标签：ms-access, vba, runtime-error

有一个非常奇怪的问题。我有一个在表单字段获得焦点时调用的函数。该函数传递四个参数，其中三个是来自表单字段的值，第四个是在表单加载时设置的全局变量。该函数使用这些变量来计算调用该函数的字段的值。这个函数在两个不同的地方被调用。一切工作正常，现在突然从一个地方调用该函数而从另一个地方调用时该函数工作，产生 2467 运行时错误，“您输入的表达式指的是一个关闭或不存在的对象'。我检查了传递的参数值是否正确，函数存在正常，所以不明白为什么会出现这个错误。有人有什么想法吗？

```
Private Sub cboFinalStage_GotFocus()
  'lookup stage based on TNM values
  cboFinalStage = FindStage(cboFinalStageT, cboFinalStageN, cboFinalStageM, gblCancer)
End Sub

Public Function FindStage(cboT As ComboBox, cboN As ComboBox, cboM As ComboBox,  
  strCancer As String) As String
  'use the TNM values entered to find the correct stage for the site and return it
  'error handling
  If gcfHandleErrors Then On Error GoTo PROC_ERR

  'declare variables
  Dim strTemp As String
  Dim strTable As String
  Dim db As DAO.Database
  Dim rs As DAO.Recordset
  Dim strQuery As String
  Dim strSite As String
  Dim strSiteFull As String
  Dim strT As String
  Dim strN As String
  Dim strM As String

  'initialise variables - if there are no values entered in the 3 comboboxes, exit 
  'load tumour first in case it isn't already loaded
  Forms!frmContainer.subTumour.SourceObject = "fsubTumour"
  If Not IsNull(Forms!frmContainer.subTumour.Form!txtICD10) Then
    strSite = Left(Forms!frmContainer.subTumour.Form!txtICD10, 3)
    strSiteFull = Forms!frmContainer.subTumour.Form!txtICD10
  End If
  If Not IsNull(cboT.Value) Then
    strT = cboT.Value
    Debug.Print "T is " & strT
  End If
  If Not IsNull(cboN.Value) Then
    strN = cboN.Value
    Debug.Print "N is " & strN
  End If
  If Not IsNull(cboM.Value) Then
    strM = cboM.Value
    Debug.Print "M is " & strM
  End If
  If (IsNull(strT) Or IsNull(strN) Or IsNull(strM)) Then
    Debug.Print "null so exiting"
    Exit Function
  End If

  'identify the correct AJCC lookup table by cancer site
  Select Case [strCancer]
    Case "bla"
        strTable = "lkp_AJCC_bladder"
    Case "bre"
        strTable = "lkp_AJCC_breast"
    ...
  End Select
  Debug.Print "AJCC table is " & strTable

  'query the AJCC lookup table for the stage
  strQuery = "SELECT c_stage FROM " & strTable & " WHERE (((t_value)='" & strT & "')
   AND ((n_value)='" & strN & "') AND ((m_value)='" & strM & "'))"
  Debug.Print "query is " & strQuery
  Set db = CurrentDb
  Set rs = db.OpenRecordset(strQuery)
  If Not rs.EOF Then
    strTemp = rs.Fields(0).Value
    Debug.Print "result is " & strTemp
  End If
  rs.Close
  db.Close

  'return stage
  FindStage = strTemp

'error handling
PROC_EXIT:
  Exit Function
PROC_ERR:
  If (Err.Number = 2467) Then
    MsgBox "Unable to evaluate the stage", vbOKOnly, "Processing error"
    Resume PROC_EXIT
  Else
    MsgBox "Error: (" & Err.Number & ") " & Err.Description, vbCritical
    Resume PROC_EXIT
  End If
End Function 
```

# node.js - NodeJS + Mongo：如果不存在则插入，否则 - 更新

> ID：13010290
> 
> 赞同：26
> 
> 时间：2012-10-22T11:16:54.340
> 
> 标签：node.js, mongodb, insert, exists, updates

我的 mongodb 集合中有一个对象。它的架构是：

```
{
    "instruments": ["A", "B", "C"],
    "_id": {
        "$oid": "508510cd6461cc5f61000001"
    }
} 
```

我的收藏可能有这样的对象，但可能没有。我需要检查是否存在带有键“instruments”的对象（**请注意，我现在不知道“instrument”是什么值，它可能包含任何值或数组**），如果存在 - 执行更新，否则– 插入一个新值。我怎样才能做到这一点？

```
collection.find( {  "instruments" : { $exists : true } }, function(err, object){
    if (object) {
        //update
    } else {
        //insert
    }
}); 
```

不起作用（（

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-22T12:22:46.717

如果要插入一个文档，如果没有找到，可以使用方法`upsert`中的选项`update()`：

```
collection.update(_query_, _update_, { upsert: true }); 
```

[有关upsert](https://docs.mongodb.com/manual/reference/method/db.collection.update/#upsert-behavior)行为，请参阅文档。

运营商的一个例子`$exists`。

假设您的收藏中有 6 个文档：

```
> db.test.find()
{ "_id": ObjectId("5495aebff83774152e9ea6b2"), "a": 1 }
{ "_id": ObjectId("5495aec2f83774152e9ea6b3"), "a": [ ] }
{ "_id": ObjectId("5495aec7f83774152e9ea6b4"), "a": [ "b" ] }
{ "_id": ObjectId("5495aecdf83774152e9ea6b5"), "a": [ null ] }
{ "_id": ObjectId("5495aed5f83774152e9ea6b7"), "a": [ 0 ] }
{ "_id": ObjectId("5495af60f83774152e9ea6b9"), "b": 2 } 
```

并且您想查找具有特定字段的文档`"a"`），您可以使用`find()`带有[$exists](http://docs.mongodb.org/manual/reference/operator/query/exists/)运算符（[节点文档](http://mongodb.github.io/node-mongodb-native/markdown-docs/queries.html?highlight=exists#special-query-operators)）的方法。注意：这还将返回字段为空数组的文档。

```
> db.test.find( { a: { $exists: true } } )
{ "_id": ObjectId("5495aebff83774152e9ea6b2"), "a": 1 }
{ "_id": ObjectId("5495aec2f83774152e9ea6b3"), "a": [ ] }
{ "_id": ObjectId("5495aec7f83774152e9ea6b4"), "a": [ "b" ] }
{ "_id": ObjectId("5495aecdf83774152e9ea6b5"), "a": [ null ] }
{ "_id": ObjectId("5495aed5f83774152e9ea6b7"), "a": [ 0 ] } 
```

# android - ontouchlistner 和 onlongclicklistner 之间的冲突应用于 android 中的同一视图

> ID：13010298
> 
> 赞同：1
> 
> 时间：2012-10-22T11:17:15.240
> 
> 标签：android

我已添加`onLongclickListner`和`onTouchListner`。`LinearLayout`在`onTouch()`函数中，我必须返回 true，因为我在`onGestureDetecter`内部添加了`ontouchListner`用于捕获单击和双击。`onTouchListner`并且`OnGestureListner`工作正常但`onLongclickListner`不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:04:34.003

通常`OnTouchListener`拦截所有的触摸事件（也包括点击、点击等）。当`OnTouchListener`拦截事件时，他在`onTouch()`方法上返回 true。

因此，您应该`false`在`onTouch()`适当的情况下返回。然后调用android框架`onLongClick`()中`OnLongClickListener`。

或`OnClickListener`改用`OnTouchListener`

# javascript - 加载表格后将滚动条置于顶部

> ID：13010303
> 
> 赞同：0
> 
> 时间：2012-10-22T11:17:29.597
> 
> 标签：javascript, html, jsp, position, scrollbar

这是一个有些人可能会觉得有点简单的请求（我必须承认我对 JavaScript 没有太多经验）。

当表格`id=abcd_tags`值很大时，会出现一个垂直滚动条。这是html代码：

```
<tr>
    <td height=100%>
        <div id="section" style="display:none">
            <div id="r">
                <div id="h">
                    <table>
                        <tr>
                        ...
                        </tr>
                        <tbody id="abcd_tags"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </td>
</tr> 
```

该表位于弹出窗口中。你知道是否有办法将滚动条光标强加到表格列表的顶部而不是在页面加载时的底部？（不是浏览器滚动条..弹出窗口内的那个）

# git - git merge 忽略合并分支上存在的已删除文件（重命名文件）

> ID：13010305
> 
> 赞同：7
> 
> 时间：2012-10-22T11:17:34.310
> 
> 标签：git, merge

我有树枝`feature1`和`master`.
然后在`feature1`我将一个文件重命名`dir/file.txt`为`dir2/file2.txt`.
之后我修改了文件，`master`一周后`feature1`也修改了文件。

我在整个项目中更改了 40 个文件。
当我尝试合并时**`master`，`feature1`**我使用的是低重命名阈值。大多数文件都已正确自动合并。提供一些文件用于手动解决冲突。

但是一些具体的文件**既不会在`merge`响应中显示为自动合并，
也不会正确合并**。在*适当*的情况下，我希望我可以解决以下两种结果之一：
1.它不会检测到重命名，只是将另一个添加`dir/file.txt`到`feature1`分支中。
2\. 它会检测重命名并让我手动解决冲突。

当我查看它们时有很多变化
`git difftool master:dir/file.txt feature1:dir2/file2.txt`

因此，我假设 git 识别重命名并决定保留我的版本而不通知我发生了什么。我该如何解决它/调试它？

**这是我使用的命令**

```
git config merge.renameLimit 9999999999
git merge --no-ff -Xrename-threshold=20 -Xignore-space-change master 
```

# 更新1

在使用`feature1`分支时，我删除了`dir/file.txt`.
也许 git 假设这个文件应该被删除，因此忽略它在`master`.
重命名检测失败，尽管保留了文件的相似性（levenshtein 距离小于内容长度的 2%）
[另一个讨论](https://stackoverflow.com/questions/1407638/git-merge-removing-files-i-want-to-keep)建议“手动合并”将文件从一个分支复制到另一个分支。

# 更新2

其他一些文件被正确解析
`CONFLICT (rename/delete): images/ab.gif deleted in master and renamed in HEAD. Version HEAD of cdn/img/ab.gif left in tree.`
被删除`master`和合并到的文件被正确`feature1`解析。`feature1` 合并时无法识别已删除（或移动）的文件。
**建议？**

# 更新3

目前我正试图以相反的方式合并。合并`feature1`并`master`查看正在添加和删除哪些文件。这样，我将列出 git 无法识别为重命名并诉诸手动​​合并的文件列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:53:27.287

如果您正在从您的存储库中删除文件 - git 正在跟踪此删除，并且合并在确定要做什么时正在考虑这一点。

这可能不是您所做的全部，但它是其中的一部分。您可以再次尝试 git add'ing 它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-27T21:10:48.260

> 因此，我假设 git 识别重命名并决定保留我的版本而不通知我发生了什么。

Git 2.13（2017 年第二季度）实际上会告诉你更多关于正在发生的事情：

> 当“ `git merge`”检测到在一个历史记录中重命名的路径而另一个历史记录删除（或修改）它时，**它现在报告两个路径以帮助用户了解正在合并的两个历史记录中发生了什么**。

请参阅[Matt McCutchen (](https://github.com/mattmccutchen) [)的](https://github.com/mattmccutchen)[提交 b26d87f](https://github.com/git/git/commit/b26d87f2da22a5970b15bebe588bcd6ccac98e9b)（2017 年 1 月 28 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([74aabf4 提交中](https://github.com/git/git/commit/74aabf41cee31f7937f9445a99597403da50585b))^(，2017 年 2 月 27 日）)[`mattmccutchen`](https://github.com/mattmccutchen)
^([`gitster`](https://github.com/gitster))

> ## 合并递归：使“冲突（重命名/删除）”消息显示两个路径
> 
> 当前由“ `git merge-recursive`”打印的有关重命名/删除冲突的消息是这样的：

```
CONFLICT (rename/delete): 
new-path deleted in HEAD and renamed in other-branch. 
Version other-branch of new-path left in tree. 
```

> To be more helpful, the message should show both paths of the rename and state that the deletion occurred at the old path, not the new path. So change the message to the following format:

```
CONFLICT (rename/delete): 
old-path deleted in HEAD and renamed to  new-path in other-branch.  
Version other-branch of new-path left in tree. 
```

> Since this doubles the number of cases in handle_change_delete (modify vs. rename), refactor the code to halve the number of cases again by merging the cases where o->branch1 has the change and o->branch2 has the delete with the cases that are the other way around.

# php - 如何在 cgridview 中选中某些复选框？

> ID：13010310
> 
> 赞同：2
> 
> 时间：2012-10-22T11:17:45.307
> 
> 标签：php, yii, yii-extensions, cgridview

问：如何在 cgridview 中选中一些复选框？

状态：我用复选框做了一个gridview。但我不知道如何预先检查一些复选框。$current_reviewers 是一个数组。我想与 $current_reviewers 和复选框匹配以在 gridview 进行预检查。

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'acc-recei-grid',
    'dataProvider'=>$model->search_reviewerlist(),
    'filter'=>$model,
    'columns'=>array(
        array(
            'class' => 'CCheckBoxColumn',
            'selectableRows' => 2,
            'checkBoxHtmlOptions' => array(
                'name' => 'userids[]',
            ),
            'value'=>'$data->id',
            'checked'=>'(in_array($data->id, $current_reviewers) ? 1 : ""',
         ),
        'username',
        array(
            'type'=>'raw',
            'value'=>'$data->id',
            //'filter'=>array('style'=>'visible:none'), 
            //'headerHtmlOptions'=>array('style'=>'width:0px; display:none; border:none; textdecoration:none'),
            'htmlOptions'=>array('style'=>'display:none; border:none;', 'class'=>'user-id'),  
            //'header'=>false,
            //'filter'=>false,
        ),

    ),
)); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:55:19.267

问题在于`$current_reviewers`变量，在作为值传递的 php 表达式中无法访问它`checked`。为此，您可以使用匿名函数并使用外部变量，请使用`use`关键字：

```
'checked'=>function($data, $row) use ($current_reviewers){
                return in_array($data->id, $current_reviewers);
} 
```

检查[`use`关键字](http://www.php.net/manual/en/language.namespaces.php#104136 "http://www.php.net/manual/en/language.namespaces.php#104136")的使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:34:33.010

试试这个：

```
array(
            'id'=>'id',
            'class'=>'CCheckBoxColumn',
            'selectableRows' => '50',   
            'checked'=>'($data->id==$current_reviewers)?(1):(0)',   

        ), 
```

# javascript - 从 facebook 获取用户详细信息

> ID：13010311
> 
> 赞同：0
> 
> 时间：2012-10-22T11:17:47.670
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我正在构建一个小型内部社交媒体数据共享应用程序。一群用户登录我的应用程序（网页）并授权我的应用程序访问他们的喜欢/个人资料信息等。稍后，我希望这些用户中的任何一个通过我的自定义报告应用程序查看其他用户的信息'我建了。

如果用户是 a) 自己登录到 facebook b) 与其他用户成为朋友，则最后一部分工作得很好。

我曾假设，由于他们在登录时都授予了我的应用程序访问权限，因此我应该能够按需为仅使用我的应用程序 ID 和 javascript sdk 的任何人提取详细信息。

这是代码：

```
 window.fbAsyncInit = function() {
        FB.init({
            appId      : 'myappid',
        });         
    };                                      
    // Load the SDK Asynchronously
    (function(d){
       var js, id = 'facebook-jssdk', ref =d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
     }(document));

    function fbDetails()
    {
        var profilepic = "";    
        FB.api(
            {
                method: 'fql.query',
                query: 'SELECT uid,name,pic,about_me,movies,tv,books,games,work,education,friend_count FROM user WHERE uid="userid which i store from the first login"'
            },
            function(response) {
                       Do some stuff here;
                       });
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:23:48.937

您只能获取正在积极使用您的应用程序的用户的当前数据。在用户未登录您的应用程序时获取数据需要权限“offline_access”（已弃用）。他们更改了名称及其使用方式，但尝试使用 facebook graph api explorer，您可以在那里测试您的请求。

# javascript - 如何在“Bootstrap：折叠插件”转换完成后触发 JavaScript 函数

> ID：13010315
> 
> 赞同：14
> 
> 时间：2012-10-22T11:17:53.747
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在尝试在 Bootstrap:插件转换完成后重新调整`iframe`高度。`collapse`Click 事件不起作用，因为过渡尚未完成，JavaScript 获取错误的高度信息。任何想法来解决这个问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-22T11:23:46.067

您需要处理折叠插件上的隐藏事件。

[来自文档](https://getbootstrap.com/docs/4.0/components/collapse/)

> hidden - 当折叠元素对用户隐藏时触发此事件（将等待 css 转换完成）​​。

```
$('#myCollapsible').on('hidden', function () {
  // do something…
}) 
```

正如@Francesc 在对 Bootstrap 3.0 的评论中指出的那样，我们必须使用

```
$('#myCollapsible').on('hidden.bs.collapse', function () {
  // do something…
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-26T17:19:59.477

如果您使用的是 bootstrap 3.0，它非常容易。shown.bs.collapse 是当元素显示转换完成时触发的事件。我相信你正在寻找这样的东西。

```
$('#myCollapsible').on("shown.bs.collapse", function(){
 //trigger content change
 //this code will be triggered when the collapse transition is completed 
 //that is your myCollapsible element will have 'in' in your class
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T11:24:13.403

我从未使用过折叠插件，但在文档中它说有一个名为“隐藏”的回调，一旦元素转换完成就应该调用它：

```
$('#myCollapsible').on('hidden', function () {
    // do something…
}); 
```

# heroku - Heroku：在 Cedar 上创建一个简单的静态单页网站

> ID：13010317
> 
> 赞同：1
> 
> 时间：2012-10-22T11:18:00.287
> 
> 标签：heroku, cedar

我正在尝试使用 Heroku 上传一个简单的单页网页。

我以前用的是Play！框架，但对于带有一些 javascript 的单个页面来说似乎有点过分了。

```
+ project/
 + public/
  + css/
   ...
  + img/
   ...
  + js/
   ...
 index.html 
```

如何将一组基本的静态文件上传到 Heroku？他们的网站上似乎没有关于如何执行此操作的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:27:24.853

Heroku 的目的不是托管静态网站。但是，您仍然可以这样做，但您必须创建一个 Ruby on Rails、Play 等项目，在文件夹中添加 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T02:09:15.427

Heroku 并不真正支持静态网页，它支持应用程序。但是，静态网页可以通过添加虚拟 index.php 轻松“增强”为 PHP 应用程序。

因此，如果您想将文件 foo.html 作为 Heroku 应用程序 Foo 托管，那么： 1\. 在 Heroku 上创建 Foo。2\. [克隆空仓库到本地目录] git clone git@heroku.com:Foo.git -o heroku 3\. touch index.php 4\. [add foo.html] 5\. git add . 6\. git commit -m 'test' 7\. git push heroku master

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-14T13:46:29.983

Heroku 有使用 Rack 执行此操作的指南：[https ://devcenter.heroku.com/articles/static-sites-ruby](https://devcenter.heroku.com/articles/static-sites-ruby)

基本上，用一个文件创建一个简单的 Rack 应用程序`config.ru`：

```
use Rack::Static,
  :urls => ["/images", "/js", "/css"],
  :root => "public"

run lambda { |env|
  [
    200,
    {
      'Content-Type'  => 'text/html',
      'Cache-Control' => 'public, max-age=86400'
    },
    File.open('public/index.html', File::RDONLY)
  ]
} 
```

一个`Gemfile`：

```
source "https://rubygems.org"
gem 'rack' 
```

和一个公用文件夹，其中包含`index.html`其他资产的文件和文件夹，结构如下：

```
my_site/config.ru
my_site/Gemfile
my_site/public/index.html
my_site/public/css
my_site/public/images
my_site/public/js 
```

有人创建了一个网站，可以为您生成所有必要的文件：http: [//herokustaticmagico.herokuapp.com/](http://herokustaticmagico.herokuapp.com/)

# google-news - Limit Google News RSS to specific country

> ID：13010323
> 
> 赞同：1
> 
> 时间：2012-10-22T11:18:32.827
> 
> 标签：google-news

This may well be documented somewhere obvious, but I'm not seeing it. I'm parsing Google News results from RSS, but I'm struggling to get the RSS feed to match what I'm seeing online, with results limited to my country.

I'm in South Africa. To see SA news on a topic, I search for the topic in Google News, then select "Pages from South Africa" in the left menu. Although that option is under "The web", it does limit the news results as well.

However, the RSS link in the page footer goes to the generic (ie: not region-specific) news results as if I hadn't selected "pages from..." at all. I've been playing with the parameters in the feed URL, but I haven't found any way to get it to restrict the RSS results to my region. (Similarly: can't find an option to limit a CSE - custom search engine - the same way).

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:08:34.213

更新：看起来无法完成 - RSS URL 不遵守与常规搜索相同的规则（“&cr=countryZA”）。操纵查询字符串以获取结果并将结果刮掉，这违反了 Google 的 Ts&Cs。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-04-01T09:28:34.783

可以这样做：[https ://news.google.com/news/feeds?country=AU?geo=2000](https://news.google.com/news/feeds?country=AU?geo=2000)

上述 URL 会将 RSS 输出限制为澳大利亚悉尼的新闻。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-09T01:45:11.293

您可以使用`&geo=usa`甚至使用邮政编码，例如`&geo=99553`

# php - curl 与多个代理在本地服务器上工作但不在实时服务器上

> ID：13010325
> 
> 赞同：2
> 
> 时间：2012-10-22T11:18:40.547
> 
> 标签：php, curl, proxy

我有这段代码可以在我的本地服务器上正常工作，但不能在实时服务器上工作。
我正在尝试报废而不被阻止。

如果代理被远程服务器阻止，那么它如何在我的本地服务器上工作？

```
function curl_se($set_url,$proxy){

    $ch = curl_init($set_url);
    //set options
    $header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,"; 
    $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5"; 
    $header[] = "Cache-Control: max-age=0"; 
    $header[] = "Connection: keep-alive"; 
    $header[] = "Keep-Alive: 300"; 
    $header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7"; 
    $header[] = "Accept-Language: en-us,en;q=0.5"; 
    $header[] = "Pragma: "; //browsers keep this blank.
    //set options
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
    curl_setopt($ch, CURLOPT_USERAGENT,"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.3) Gecko/20100401 Firefox/3.6.3");
    curl_setopt($ch, CURLOPT_ENCODING, 'gzip,deflate'); 
    curl_setopt($ch, CURLOPT_HTTPHEADER, $header); 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, 0);
    curl_setopt($ch, CURLOPT_PROXY, $proxy);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    $result = curl_exec($ch);
    echo "<pre>";
    print_r(curl_getinfo($ch));
    echo "</pre>";
    if(curl_errno($ch))
        return false;
    else
        return $result; 
} 
```

在每个 curl 请求上循环一个代理。

```
$proxy = array(
    "91.83.216.186:8081",
    "190.116.88.11:8080",
    "117.102.9.116:8080",
    "188.165.4.38:3128",
    "187.120.209.10:8080",
    "190.186.50.32:3128",
    "190.108.83.30:8080",
    "190.130.230.149:8080",
    "130.180.18.24:8275",
    "178.33.181.120:8080"
); 
```

在实时服务器上，我收到 curl 错误 7 (CURLE_COULDNT_CONNECT)

我被卡住了，相同的代码相同的 URL 在本地工作正常。

**更新：**我发现这与代理有关。我尝试了数百个，但没有一个在实时服务器上运行，出现 curl 错误 7；也尝试了不同的网站 URL。虽然相同的代理和 URL 在我的本地服务器上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:11:21.793

尝试工作代理。在此处检查 (codepad.viper-7.com/xzm8Au) 您的服务器运行良好。
当您使用匿名代理时，远程（目标）服务器无法看到或阻止您的真实 IP。

# regex - Notepad++ regular expression replacement for mixed characters

> ID：13010326
> 
> 赞同：5
> 
> 时间：2012-10-22T11:18:48.827
> 
> 标签：regex, notepad++

Please, help me to write a regular expression for this kind of text in Notepad

I have a text with mixed russian and german sentences and words, and I need to insert before a sentence in russian tag **<"RUSSIAN">** and before a sentence in german tag **<"GERMAN">**. Like this:

**INPUT:**

```
Текст на русском, раз два три, german text - русский текст: german text - some other german text русский текст = еще русский текст. Длинный текст на русском. A long text on german 
```

**OUTPUT:**

```
<"RUSSIAN">Текст на русском, раз два три, <"GERMAN">german text - <"RUSSIAN">русский текст: <"GERMAN">german text - some other german text <"RUSSIAN">русский текст = еще русский текст. Длинный текст на русском. <"GERMAN">A long text on german 
```

I guess it could be done somehow by searching

cyrillics characters like "А,а,Б,б,В,в,Г,г,Д,д,Е,е,Ё,ё,Ж,ж,З,з,И,и,Й,й,К,к,Л,л,М,м,Н,н,О,о,П,п,Р,р,С,с,Т,т,У,у,Ф,ф,Х,х,Ц,ц,Ч,ч,Ш,ш,Щ,щ,Ъ,ъ,Ы,ы,Ь,ь,Э,э,Ю,ю,Я,я"

and german characters like "A,a,B,b,C,c,D,d,E,e,F,f,G,g,H,h,I,i,J,j,K,k,L,l,M,m,N,n,O,o,P,p,Q,q,R,r,S,s,T,t,U,u,V,v,W,w,X,x,Y,y,Z,z,A,a,O,o,U,u,?"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:46:42.850

标点符号和数字使这有点不确定，但是您可以匹配任何西里尔字符并捕获直到拉丁字符；

查找： `([А-я].+?)([a-z])`
替换为：`<ru>\1</ru>\2`

然后另一种语言介于`</ru>`和之间`<ru>`。

# sql - TSQL Number of reads significantly different after query and stored procedure execution

> ID：13010328
> 
> 赞同：1
> 
> 时间：2012-10-22T11:18:54.450
> 
> 标签：sql, sql-server, tsql, stored-procedures, query-optimization

After query optimization I got results that are ok and I wanted to alter stored procedure, but got much worst results after SP execution, than it was after query execution!

Firstly, I think at number of reads. What can be reason for so different results?

Query is identical like in SP, only difference is that in query I declared parameter, but in SP that was input parameter. Value that is set to parameter is also same. To avoid 'recorded data' first I recompiled SP and after that done DROP and CREATE, but results were also much different.

Query is like this (table and column names are changed because of simplification, and number of columns is reduced):

```
DECLARE @Var1 varchar(20)    
SET @Var1 = @Var1 + '%'       

DECLARE @Var2 TIMESTAMP    
SELECT @Var2 = CONVERT(TIMESTAMP, ID, 0)    
FROM    
 X_TIMESTAMPS (NOLOCK)    
WHERE    
 TABLE = 'T1'     

declare @Var3 varbinary(8)    
SELECT @Var3 = max(IdTimeStamps)    
FROM    
 T1 (NOLOCK)     

SELECT o.c1  
  , o.c2   
  , o.c3    
  , v.c4    
  , v.c5   
  , p.c6    
  , p.c7    
  , va.c8    
  , isnull(s.c9, '') AS c9    
  , CASE o.c10    
     WHEN 1 THEN    
      0    
     ELSE    
      1    
    END c10   
  , o.c11    
FROM    
 T1 o (NOLOCK)    
 JOIN T2 p (NOLOCK)    
  ON o.c1 = p.c12    
 JOIN T3 i (NOLOCK)    
  ON (o.c13 = i.c14)    
 JOIN T4 v (NOLOCK)    
  ON (v.c4 = i.c15)    
 LEFT JOIN T5 s (NOLOCK)    
  ON (o.c16 = s.c17)    
 JOIN T6 va (NOLOCK)    
  ON o.c11 = va.c18    
WHERE    
 o.c1 LIKE @Var1    
 AND o.c2 > @Var2 
```

And procedure is like this:

```
CREATE PROCEDURE [dbo].[SP1] @Var1 varchar(20) ='' 
WITH RECOMPILE  
AS        
BEGIN

    PREVIOUS QUERY WITHOUT DECLARATION FOR @Var1

END 
```

TnX in advance!

Nemanja

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:19:18.127

这几乎可以肯定是[参数嗅探](http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx)问题。就个人而言，我喜欢使用虚拟变量选项来解决此问题，并且（仅当我遇到此问题时）创建设置为传入参数值的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:26:30.957

这是因为不同的执行计划用于带常量的查询和带参数的 sp。你可以尝试一些技巧

创建内联表函数并尝试

```
create function sf_test
(
    @param1 int
)
returns table
as
return
    your query using @in_param1 
```

或者

像这样在您的过程中声明其他参数

```
create procedure sp_test
(
    @param1 int
)
as
begin
    declare @in_param1 int

    select @in_param1 = @param1

    your query using @in_param1
end 
```

您也可以尝试`with recompile`在您的过程中使用选项，或使用动态 SQL

# artificial-intelligence - 使用遗传编程来估计概率

> ID：13010338
> 
> 赞同：3
> 
> 时间：2012-10-22T11:19:39.393
> 
> 标签：artificial-intelligence, probability, genetic-algorithm, genetic-programming

我想使用遗传程序（gp）来估计“事件”中“结果”的概率。为了训练 nn，我使用了遗传算法。

因此，在我的数据库中，我有许多事件，每个事件都包含许多可能的结果。

我将为 gp 提供一组与每个事件中的每个结果相关的输入变量。

我的问题是-gp中的适应度函数应该是什么？？？？

例如，现在我给 gp 一组输入数据（结果输入变量）和一组目标数据（如果结果确实发生，则为 0，如果结果未发生，则为 0，适应度函数为均方输出和目标的误差）。然后，我对每个结果取每个输出的总和，并将每个输出除以总和（给出概率）。但是，我确信这不是正确的做法。

为了清楚起见，这就是我目前这样做的方式：

我想估计一个事件中发生 5 种不同结果的概率：

```
Outcome 1 - inputs = [0.1, 0.2, 0.1, 0.4] 
Outcome 1 - inputs = [0.1, 0.3, 0.1, 0.3] 
Outcome 1 - inputs = [0.5, 0.6, 0.2, 0.1] 
Outcome 1 - inputs = [0.9, 0.2, 0.1, 0.3] 
Outcome 1 - inputs = [0.9, 0.2, 0.9, 0.2] 
```

然后我将计算每个输入的 gp 输出：

```
Outcome 1 - output = 0.1 
Outcome 1 - output = 0.7 
Outcome 1 - output = 0.2 
Outcome 1 - output = 0.4 
Outcome 1 - output = 0.4 
```

此事件中每个结果的输出总和为：1.80。然后，我将通过将输出除以总和来计算每个结果的“概率”：

```
Outcome 1 - p = 0.055 
Outcome 1 - p = 0.388 
Outcome 1 - p = 0.111 
Outcome 1 - p = 0.222 
Outcome 1 - p = 0.222 
```

在你开始之前 - 我知道这些不是真实的概率，而且这种方法不起作用！我只是把它放在这里，以帮助您了解我想要实现的目标。

谁能给我一些关于如何估计每个结果的概率的指示？（另外，请注意我的数学不是很好）

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:41:02.007

我理解你问题的第一部分：你描述的是一个分类问题。您正在了解您的输入是否与是否观察到结果（1）相关（0）。

但第二部分有困难。如果我理解正确，您将原始 GP 输出用于某行输入（例如 0.7）并将其视为概率。你说这显然行不通。在 GP 中，您可以通过引入一个阈值来划分您的类别来进行分类。如果它大于 0.3，则结果应该是 1，如果它更小，它应该是 0。这个阈值不一定是 0.5（同样它只是一个数字，而不是概率）。

我认为如果你想获得一个概率，你应该尝试学习多个模型，这些模型都能很好地解释你的分类问题。我不希望你有一个完美的模型来完美地解释你的数据，如果你有你无论如何都不想要一个概率。您可以将这些模型打包在一起（创建一个集合），对于每个结果，您可以观察有多少模型预测为 1，有多少模型预测为 0。预测 1 的模型数量除以模型数量可以解释为概率这个结果将被观察到。如果模型都同样好，那么您可以忘记它们之间的权衡，如果它们的质量不同，您当然可以将这些因素纳入您的决定。在其训练集上质量较低的模型不太可能有助于进行良好的估计。

因此，总而言之，您应该尝试应用 GP，例如 10 次，然后使用训练集上的所有 10 个模型来计算它们的估计值（0 或 1）。但是，不要强迫自己只使用 GP，有很多分类算法可以给出很好的结果。

作为旁注，我是一个名为[HeuristicLab](http://dev.heuristiclab.com)的软件开发团队的一员，该软件在 Windows 下运行，您可以使用该软件运行 GP 并创建此类集合。该软件是开源的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:53:38.087

人工智能就是复杂的算法。想想看，不利的一面是，这些算法经常变成黑匣子。因此，与 NN 和 GA 等算法相反的是，它们本质上是不透明的。如果您想让汽车自动驾驶，这就是您想要的。另一方面，这意味着您需要工具来查看黑匣子。

What I'm saying is that GA is probably not what you want to solve your problem. If you want to solve AI types of problems, you first have to know how to use standard techniques, such as regression, LDA etc.

So, combining NN and GA is usually a bad sign, because you are stacking one black box on another. I believe this is bad design. An NN and GA are nothing else than non-linear optimizers. I would suggest to you to look at principal component analysis (PDA), SVD and linear classifiers first (see wikipedia). If you figure out to solve simple statistical problems move on to more complex ones. Check out the great textbook by Russell/Norvig, read some of their source code.

To answer the questions one really has to look at the dataset extensively. If you are working on a small problem, define the probabilities etc., and you might get an answer here. Perhaps check out Bayesian statistics as well. This will get you started I believe.

# git - git - recommended way to work with remote repo and live site

> ID：13010339
> 
> 赞同：0
> 
> 时间：2012-10-22T11:19:39.557
> 
> 标签：git, version-control

I'm trying to improve my workflow and hoping for some pointers. This is what I currently do - use a remote git repository (codebasehq), work locally on a couple of machines and push changes to the remote repo. This is currently fine, but I want to also pull from the remote repo to a live or staging site. What's the best practice for doing this? Just checking out a copy to the web root or something more advanced than this? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:46:44.877

[Hudson/Jenkins](http://hudson-ci.org/)是一个很好的构建自动化工具，具有可靠的 git 支持。这是您需要运行的另一台服务器。您可以根据时间或事件触发器在 Hudson 上配置各种作业以部署到一台或多台服务器。

您可以将其视为连接 cron、git 提交挂钩和 bash 脚本以执行任意部署任务的便捷方式。

作为示例工作流程，我与其他十名开发人员一起工作。我们每个人都在私有分支上工作，并在我们的功能经过测试和工作时合并到 master 中。当任何人推送到 master 时，Hudson 将拉取 master，运行所有测试并将最新的应用程序战争部署到 JBoss 服务器以进行内部验收测试。

同样，我们将 Hudson 作业配置为每 12 小时部署到另一个 JBoss 实例。我们将此实例用于客户演示，因此我们希望它的波动性比真正的持续集成/验收测试服务器要小一些。

除了运行性能测试，我们还有一些工作，构建某些项目模块等。这是一个非常灵活的平台，有许多插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:44:52.017

将副本签出到 Web 根目录很好，但您也可以考虑使用[Capistrano](https://github.com/capistrano/capistrano)等部署工具。设置好后，您只需`cap deploy`从一台本地机器发出，它会负责在实时服务器上检查新副本、启动应用程序等。

# css - CSS：当父级已经是 100% 时，将内部 div 的高度设为 100%

> ID：13010344
> 
> 赞同：4
> 
> 时间：2012-10-22T11:19:48.643
> 
> 标签：css, html

我自己尝试了这么长时间，到目前为止我阅读和谷歌搜索的所有帖子都没有帮助我，所以我希望你们中的一个能给我一个提示：

我有一个由页眉、页脚和内容组成的布局。这种布局在整个页面的高度上延伸（我已经花了一段时间才弄清楚）。到现在为止还挺好。但现在我想`content-div`尽可能地向下拉伸，一直到页脚的开头。无论我做什么，它都不起作用，它要么保持文本的长度，要么变成整个窗口的大小，隐藏页脚并生成滚动条。我读到了一个解决方案`position:absolute`，但我不想要那个。

这是示例：http: [//jsfiddle.net/N9Gjf/1/](http://jsfiddle.net/N9Gjf/1/)

你真的会帮我的！

这是CSS：

```
html, body {
    height:100%;
    text-align:center;
}

#wrapper {
    min-height:100%;
    height:100%
    overflow: hidden;
    width:800px;
    margin: 0 auto;
    text-align: left;
    background-color:lightblue;
}   

#footer {
    background-color: silver;
    height:1.5em;
    width:800px;
    margin: -1.5em auto;
}

#header {
    background-color: orange;
    height:100px;
}

#content {
    background-color: limegreen;
}

* {
    margin:0;
    padding:0;
} 
```

这是html：

```
<div id="wrapper">

    <div id="header">
        <p>Header</p>
    </div>
    <div id="content">
    INHALT  
    </div>

</div>

<div id="footer">
    <p>Footer</p>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:26:02.277

[http://jsfiddle.net/calder12/CprV7/](http://jsfiddle.net/calder12/CprV7/)

包装器中的高度后缺少一个分号。您还想将内容的高度和最小高度设置为 100%。

```
#wrapper {
min-height:100%;
height:100%;
overflow: hidden;
width:800px;
margin: 0 auto;
text-align: left;
background-color:lightblue;
}

#content {
background-color: limegreen;
height:100%;
min-height:100%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:45:14.787

我认为相对绝对定位是最好的解决方案（我承认我无法找到使高度总和达到 100% 的方法）。这是您需要做的：

[**演示#1**](http://jsfiddle.net/salman/N9Gjf/4/)

1.  使包装器位置相对
2.  将所有 div 放入包装器中
3.  使用绝对定位来定位和调整内容和页脚；使用以下方法之一：
    1.  不要指定`height`div；指定`top`和`bottom`
    2.  指定一个`top`或`bottom`两个，但不能同时指定；指定`height`

另一种方法是使用负边距。这可能是一个脑筋急转弯，但一旦你掌握了这个想法，它就会变得比定位更简单。这是您需要做的：

[**演示#2**](http://jsfiddle.net/salman/N9Gjf/7/)

1.  为页眉和页脚分配高度
2.  为内容分配 100% 高度
3.  在内容上使用负边距，以便 (i) 内容将自身推到页眉之上 (ii) 将页脚拉到自身之上
4.  使用 z-index 定位将标题放在内容的“前面”
5.  使用填充 div 将内容推送到标题下方的内容 div 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:27:32.587

```
#wrapper {
    min-height:100%;
    height:100%; /*missed the semicolon here*/
    overflow: hidden;
    width:800px;
    margin: 0 auto;
    text-align: left;
    background-color:lightblue; position:relative
} 
```

现在它工作**[演示](http://jsfiddle.net/N9Gjf/3/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:28:43.680

包装器有错误：

```
#wrapper {
    min-height:100%;
    height:100%;
    overflow: hidden;
    width:800px;
    margin: 0 auto;
    text-align: left;
    background-color:lightblue;
} 
```

你忘了把 a`;`放在`height:100%`.

试试看，你会发现它会起作用

# azure - TFS 预览：如何设置托管构建控制器

> ID：13010352
> 
> 赞同：1
> 
> 时间：2012-10-22T11:20:26.240
> 
> 标签：azure, visual-studio-2012, tfsbuild

我已阅读 Microsoft 宣布构建服务和托管构建控制器，如下图所示。我已经使用这篇[文章](https://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/)设置了 TFS 预览。

**但是当我尝试连接我的云服务时，它说没有找到托管控件。你能告诉我如何设置托管构建控制器。**

[宣布 Team Foundation Service 的构建服务](http://blogs.msdn.com/b/bharry/archive/2012/03/27/announcing-a-build-service-for-team-foundation-service.aspx)

![在此处输入图像描述](../Images/e53aa497aefd994ee8789884b9b2b479.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:45:59.563

Hosted Build Controller 应该默认可用。你不应该做任何事情来“设置它”。

这是我在 TFS 预览帐户中看到的内容。

![在此处输入图像描述](../Images/13e45c6799c6f0100321163314892584.png)

尽管 TFS Preview 最近遇到[了一些问题](http://blogs.msdn.com/b/tfservice/archive/2012/10/19/hosted-build-issues-10-19-2012-update.aspx)。周五，排队的构建在被选中进行编译和部署之前，在排队状态中停留了很长时间。

在此处检查状态 - [http://tfspreview.com/en-us/support/current-service-status/](http://tfspreview.com/en-us/support/current-service-status/)

# javascript - 分块 WebSocket 传输

> ID：13010354
> 
> 赞同：48
> 
> 时间：2012-10-22T11:20:30.207
> 
> 标签：javascript, node.js, websocket, specifications

因为我在更常规的基础上使用 WebSocket 连接，所以我对事情如何在幕后工作很感兴趣。因此，我研究了无休止的规范文档一段时间，但到目前为止，我真的找不到任何关于*分块传输流本身的*信息。

WebSocket 协议称其为*数据帧*（描述的是纯数据流，因此也称为*非控制帧*）。据我了解规范，没有定义的最大长度和没有定义的 MTU（最大传输单元）值，这反过来意味着单个 WebSocket 数据帧可能包含，通过规范（！），无限量的数据（如果我在这里错了，请纠正我，我仍然是这方面的学生）。

读完之后，我立即设置了我的小型*Node* WebSocket 服务器。由于我拥有丰富的*Ajax*历史（也在流媒体和 Comet 方面），我最初的期望是，“*在传输数据时必须有某种交互模式来读取数据*”。但我错了，不是吗？

我一开始很小，只有*4kb*的数据。

**服务器**

```
testSocket.emit( 'data', new Array( 4096 ).join( 'X' ) ); 
```

就像预期的那样，这作为一个数据块到达客户端

**客户**

```
wsInstance.onmessage = function( data ) {
    console.log( data.length ); // 4095
}; 
```

所以我增加了有效负载，实际上我再次期待，在某些时候，客户端`onmessage`处理程序将重复触发，有效地分块传输。但令我震惊的是，它从未发生过（*node-server*，在*firefox*、*chrome*和*safari*客户端测试）。我最大的有效载荷是**80 MB**

```
testSocket.emit( 'data', new Array( 1024*1024*80 ).join( 'X' ) ); 
```

它仍然到达客户端的一个大数据块中。当然，即使您的连接非常好，这也需要一段时间。这里的问题是

*   *是否有可能将这些流分块，类似于 XHR readyState3 模式*？
*   *单个 ws 数据框是否有大小限制*？
*   *websockets不应该传输如此大的有效载荷吗？（这让我再次想知道为什么没有定义的最大尺寸）*

我可能仍然从错误的角度看待 WebSockets，可能不需要发送大量数据，您应该在发送之前自己逻辑地分块/拆分任何数据？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-10-22T12:13:32.400

首先，您需要区分*浏览器*中的 WebSocket*协议*和 WebSocket *API*。

 *WebSocket 协议的帧大小限制为 2^63 个八位字节，但 WebSocket 消息可以由无限数量的帧组成。

浏览器中的 WebSocket API 不公开基于帧或流式 API，而仅公开基于消息的 API。传入消息的有效负载在提供给 JavaScript 之前总是被完全缓冲（在浏览器的 WebSocket 实现中）。

其他 WebSocket 实现的 API 可以提供对通过 WebSocket 协议传输的有效负载的基于帧或流的访问。例如，[AutobahnPython](http://autobahn.ws)就可以。您可以在此处的示例中阅读更多内容[https://github.com/tavendo/AutobahnPython/tree/master/examples/twisted/websocket/streaming](https://github.com/tavendo/AutobahnPython/tree/master/examples/twisted/websocket/streaming)。

披露：我是 Autobahn 的原作者，为 Tavendo 工作。

更多注意事项：

只要浏览器JS WebSocket API中没有frame/streaming API，就只能接收/发送完整的WS消息。

单个（普通）WebSocket 连接不能交错多条消息的负载。因此，即如果您使用大消息，这些消息将按顺序传递，并且您将无法在大消息仍在运行时在其间发送小消息。

有一个即将推出的 WebSocket 扩展（扩展是扩展协议的内置机制）：WebSocket 多路复用。这允许在单个底层 TCP 连接上拥有多个（逻辑）WebSocket 连接，这具有多个优点。

*另请注意：您现在*可以从单个 JS/HTML 页面打开到单个目标服务器的多个 WS 连接（通过不同的底层 TCP）。

另请注意：您可以在应用程序层自己“分块”：以较小的 WS 消息发送您的东西，然后自己重​​新组装。

我同意，在理想的世界中，您将在浏览器中拥有消息/帧/流 API 以及 WebSocket 多路复用。这将提供所有的权力和便利。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-24T12:44:52.993

> [RFC 6455 第 1.1 节](https://www.rfc-editor.org/rfc/rfc6455#section-1.1)：

> **这就是 WebSocket 协议所提供的： [...] HTTP 轮询的替代方案，用于从网页到远程服务器**的双向通信。

如前所述，WebSockets 用于网页和服务器之间的通信。*请注意网页*和网络*浏览器*之间的区别。正在使用的示例是浏览器游戏和聊天应用程序，它们交换了许多小消息。

如果您想在一条消息中发送许多 MB，我认为您没有按照预期的方式使用 WebSocket。如果您想传输文件，请使用普通旧 Http 请求执行此操作，并回答`Content-Disposition`让浏览器下载文件。

因此，如果您解释为什么要发送如此大量的数据，也许有人可以帮助提出比使用 WebSockets 更优雅的解决方案。

此外，客户端或服务器可能会拒绝太大的消息（尽管没有明确说明它将*如何*拒绝）：

> [RFC 6455 第 10.4 节](https://www.rfc-editor.org/rfc/rfc6455#section-10.4)：

> 从多个帧重新组装后，对于帧大小或总消息大小具有实现和/或平台特定限制的实现必须保护自己不超过这些限制。（例如，恶意端点可以通过发送单个大帧（例如，大小为 2**60）或通过发送长的小帧流来尝试耗尽其对等方的内存或发起拒绝服务攻击。是分段消息的一部分。）这样的实现应该对帧大小和从多个帧重组后的总消息大小施加限制。*

# c# - Find Current monitor's Size (Height and Width)

> ID：13010357
> 
> 赞同：0
> 
> 时间：2012-10-22T11:20:40.520
> 
> 标签：c#, .net, wpf

I am using dual monitor and I want to find the Current(where my application is active) monitor's height and width (note : not resolution). How can i achieve this. My WPF application display screen size options based on current screen size.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-05T03:47:51.237

如果您喜欢冒险，请查看注册表项。特别是 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\DISPLAY 并循环显示显示器（或者更好地只是活动显示器）并使用[EDID](http://en.wikipedia.org/wiki/Extended_display_identification_data)信息来获取显示器的屏幕宽度和高度（根据毕达哥拉斯定理，对角线长度）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T06:22:37.300

这个答案有两个部分 - 请不要判断。新的我很不确定，但会给你更好的结果。我敢肯定，较旧的会以某种方式工作。

## *新答案*

我认为您在[所查看的一个问题](https://stackoverflow.com/questions/6363752/acquire-monitor-physical-dimension/6363874)中错过了一个非常重要的答案。有一个答案是使用`Graphics.DpiX`和`Graphics.DpiY`分别将它们除以像素分辨率的 x 和 y 值。[在这里](https://stackoverflow.com/questions/6363752/acquire-monitor-physical-dimension/6363874#6363874)阅读！不要忘记阅读评论。

因为不同显示器的一英寸像素数量不同，所以这个家伙发现这`Graphics.DpiX`是制作一英寸所需的 X 轴上的像素数量。这同样适用于`Graphics.DpiY`显然将每英寸像素指向 y 轴。为了从分辨率中找到英寸，您将这两者相除。[您可以在此处](https://msdn.microsoft.com/en-us/library/system.drawing.graphics%28v=vs.110%29.aspx)和[此处](https://stackoverflow.com/questions/20057959/system-drawing-graphics-dpix-always-return-96)阅读有关用法的更多信息。第二个链接在 Visual Basic 中，但假设您有以前的 C# 知识，您将能够弄清楚语法。

***请注意 - 我还没有尝试过以下任何一种方法！***

从引用开始`System.Drawing`。

接下来，理论上（我之前没有尝试过，所以如果可以的话，请纠正我）你需要创建一个新的 Graphics 类。

`Graphics DesktopGraphics = Graphics.FromHdc(GetDC(IntPtr.Zero));`

现在，使用引用相关显示器的新 Graphics 类，我们获取 DPI 和屏幕分辨率，然后将屏幕分辨率除以 DPI 以获得屏幕的英寸数。

`SystemInformation.PrimaryMonitorSize.Width / Graphics.DpiX`宽度和`SystemInformation.PrimaryMonitorSize.Height / Graphics.DpiY`高度。您需要将这两个分配给它们各自的变量，瞧！屏幕的宽度和高度 - 以英寸为单位。

再次，如果我做错了什么，请告诉我。我仍然是一个新手程序员，所以如果我做错了什么，请不要抨击我或抨击我——如果我这样做了，你能建议适当的代码吗？

## 

* * *

*旧答案*

写信的人；*尝试`System.Windows.Forms.Screen.PrimaryScreen.WorkingArea.Height`它在我的情况下工作。*实际上，它告诉你的是以像素为单位的高度。您需要做的是将此整数转换为英寸。

一英寸等于 96 个像素（或者更准确地说是 96.0000000000011）。因此，编写以下代码；

```
 //Height
    Int MonitorHeightinInches = System.Windows.Forms.Screen.PrimaryScreen.WorkingArea.Height / 96;
    //Width
    Int MonitorWidthinInches = System.Windows.Forms.Screen.PrimaryScreen.WorkingArea.Width / 96; 
```

现在，您可以在应用程序中尽可能多地重用代码。这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:49:56.750

您会发现很难获得显示器的物理尺寸。您可能能够获得分辨率和 DPI 并从那里计算出来，但这并不一定会给您正确的答案。想象一下投影仪——您可能知道它的分辨率和 DPI，但显示图像的物理尺寸将取决于到屏幕的距离。不过，这不仅仅是投影仪。例如，每台显示器的制造过程可能会导致数字略有偏差。

我很想删除对物理尺寸的任何引用，并根据显示器的分辨率和 DPI 功能进行适当调整大小的流畅布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:24:20.200

尝试

```
 System.Windows.Forms.Screen.PrimaryScreen.WorkingArea.Height 
```

它在我的情况下工作。

# joomla - Display page title for an article

> ID：13010358
> 
> 赞同：0
> 
> 时间：2012-10-22T11:20:41.267
> 
> 标签：joomla, joomla2.5

I have an article which is included in a page with anchor tag. It is not associated with any menu. My problem is when I visit that page , it is not showing article title as page title. Please help me. Im using joomla 2.5

Thanks in advance iijb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:35:10.690

我想这会对你有所帮助。

创建一个菜单项为`innermenu`. 管理员->菜单->菜单管理器->添加新菜单。

在以下菜单项中，您必须创建一个带有 的菜单并将文章包含到以下菜单中。

然后复制文章的url，保存菜单过程。然后为菜单生成一个itemid。将itemid包含在里面，运行url，就会显示页面标题。

# asp.net - asp.net linq .contains "string"

> ID：13010365
> 
> 赞同：0
> 
> 时间：2012-10-22T11:21:01.137
> 
> 标签：asp.net, linq

I have a field in a dataset and im querying using Linq my code is

```
 var countriesQry = from a in countTbl.AsEnumerable()
                               where a["CountryId"].ToString().Contains(countryId)
                               orderby a["CountryId"] 
```

my problem is that in the "CountryId" field there can be a countryid of 1,22,13 (its a varchar field) so something can be a few countries. as you can guess its returning 1 and 13 if the "Countryid" = 1 can anyone tell how I can correct it

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:23:52.993

只需更改`Contains`为`Equals`

```
var countriesQry = from a in countTbl.AsEnumerable()
                           where a["CountryId"].ToString().Equals(countryId)
                           orderby a["CountryId"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:26:27.043

尝试使用 Any() 而不是包含。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:24:02.573

```
var countriesQry = from a in countTbl.AsEnumerable()
                           where a["CountryId"].ToString().Equals(countryId)
                           orderby a["CountryId"] 
```

# android - n level Expandable Listview

> ID：13010366
> 
> 赞同：9
> 
> 时间：2012-10-22T11:21:03.043
> 
> 标签：android

How to display n- level of expandable list view android, I am getting only examples for 3-Levels expandable.

Referring this :[link](http://www.allappsdevelopers.com/TopicDetail.aspx?TopicID=c991d70a-4570-4e4b-8378-2191a4247a84)

Please guideline or share me suitable example for Multi-level expandable display in android.

Thanks,

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T11:32:24.370

根据这个[例子](http://www.allappsdevelopers.com/TopicDetail.aspx?TopicID=c991d70a-4570-4e4b-8378-2191a4247a84)。

```
 public View getChildView(int groupPosition, int childPosition,

                   boolean isLastChild, View convertView, ViewGroup parent) {

             CustExpListview SecondLevelexplv = new CustExpListview(Vincent_ThreeelevellistActivity.this);

             SecondLevelexplv.setAdapter(new SecondLevelAdapter());

             SecondLevelexplv.setGroupIndicator(null);

             return SecondLevelexplv;

      } 
```

这里`getChildView`方法通过类创建一个新的适配器，`CustExpListview` 并将其设置为适配器。
同样的方法，你可以创建一个新的 Class 并在Class方法`BaseExpandableListAdapter`中设置它。`CustExpListview``getChildView`

# iphone - 将参数传递给新的视图控制器

> ID：13010374
> 
> 赞同：1
> 
> 时间：2012-10-22T11:21:17.067
> 
> 标签：iphone, ios, xcode, segue

当我选择一个新的 viewController 时，a 想传递一个参数，让我们说“turnId”给一个新的`ViewController`. 我知道我可以在`prepareForSegue`方法中做到这一点，但是如何将参数传递给`prepareForSegue`方法本身？我怎样才能从发件人那里得到这个？发件人是`didSelectRowAtIndexPath`，但该值不在单元格中，而只是声明为`didSelectRowAtIndexPath`：

```
String *turnId = @"123"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:34:16.917

我不会在发件人信息中传递它。

在`didSelectRowAtIndexPath`做你的`[self performSegueWithIdentifire:@"blah"]`，然后在`prepareForSegue`做这样的事情......

```
- (void)prepareForSegue:... //blah cant remember the name
{
    if ([segue.identifier isEqualToString:@"blah"]) {
        NewViewController *controller = segue.destinationViewController;

        NSIndexPath *selectedIndexPath = [self.tableView indexPathForSelectedRow];

        //get the object associated with that row and set a variable like...
        NSString *selectedString = tableObject.name;

        //Then pass the string into the controller...
        controller.stringProperty = selectedString;
    }
} 
```

然后在`NewViewController.h`设置一个`@property`接受这个...

```
@property (nonatomic, strong) NSString *stringProperty; 
```

然后您可以从中访问该值，`NewViewCongtroller.m`并将该值传递给它。

# java - 奇怪的 Java 递归代码

> ID：13010376
> 
> 赞同：1
> 
> 时间：2012-10-22T11:21:30.130
> 
> 标签：java, recursion

我有一段代码，并且很难理解这种递归模式。

```
private void indexDirectory(IndexWriter indexWriter, File dataDirectory,
                            String suffix) throws IOException {

    System.out.println("Data directory before: " + dataDirectory.getName());
    File[] files = dataDirectory.listFiles();

    for (File file : files) {
        System.out.println("File name : " + file.getName());
        if (file.isDirectory()) {
            indexDirectory(indexWriter, file, suffix);
        } else {
            indexFileWithIndexWriter(indexWriter, file, suffix);
        }
    }
    System.out.println("Data directory : " + dataDirectory.getName());
} 
```

dataDirectory 包含一个目录的路径，其中包含多个子目录和文件。

所以 files[] 数组看起来像，

```
C:\projects\test\.classpath, 
C:\projects\test\.project, 
C:\projects\test\.settings, 
C:\projects\test\build, 
C:\projects\test\build.xml, 
C:\projects\test\dist, 
C:\projects\test\src, 
C:\projects\test\WebContent 
```

**.classpath**和**.project**是文件，而**.settings**是一个包含 4 个文件的目录。因此，当第三次迭代**.settings**目录被调用时，其中包含 4 个文件。因为 .settings 是一个目录，**所以 file.isDirectory**是**真实** 的，并且相同的方法 (indexDirectory) 将使用最新的参数值调用。所以**dataDirectory**值被**.settings**取代。当代码执行进入循环时，它将转到**else**部分，因为它在**.settings**目录中找到了文件。

一旦它迭代了 4 次（因为它只有 4 个文件），它应该完成循环。

但奇怪的**是 dataDirectory**值被它所拥有的旧值替换，并且它开始调用数组中先前存在的下一项（即**构建**目录）。

有人可以解释我为什么会这样，而没有完成循环..我希望我解释清楚，如果没有请问我。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:30:49.020

当方法`indexDirectory`第一次被调用时，它里面有 8 个文件（包括目录）。

因此，您的 for 循环`for (File file : files) {`将至少迭代 8 次。**（一个）**

现在，在 8 个文件中，找到了**.settings**目录。并且您正确理解它会`indexDirectory`使用 dataDirectory = .settings 进行递归调用。此时，状态**(A)有 5 次迭代待处理**

当递归调用完成时，控件到达状态**(A)**，第 4 次迭代以 dataDirectory = build 开始。

堆栈帧如下：

![在此处输入图像描述](../Images/1aeadb722141594aa4e70817b9ac30fa.png)

在第 2 帧完成后，第 1 帧将恢复执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:32:05.987

这就是递归的工作原理。在遍历顶级目录时，一切正常，直到循环遇到一个目录。当它遇到一个目录时，它会进入一个更深的循环，但它知道它还没有完成外循环。一旦它完成了内循环（以及它内部的任何进一步的内循环），它就会返回并完成外循环。

想象一下，你在一个有很多门的房间里。当您转动门上的旋钮时，会弹出一面旗帜。其中一些门通向其他房间（屋内更深处），但大多数只是挂在墙上。您必须转动每个门把手上的旋钮。如果它打开到另一个房间，你也必须转动每个门上的旋钮。当内室的所有旗帜都升起时，您可以回到外间并完成旋转旋钮，直到所有旗帜都升起。当所有的旗帜都升起并且你回到最外面的房间时，你的工作就完成了。

hth

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:34:45.677

您正在递归调用 indexDirectory。因此，在完成更深的目录（在此示例中为 .settings ）后，它将继续完成循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:29:57.163

> 一旦它迭代了 4 次（因为它只有 4 个文件），它应该完成循环。
> 
> 但奇怪的是 dataDirectory 值被它所拥有的旧值替换，并且它开始调用数组中先前存在的下一项（即构建目录）。

这正是递归*应该*如何工作的。

您在某种程度上是对的，一旦调用`indexDirectory(?, ".settings", ?)`已经看到四个文件，它应该停止循环并终止该方法。就是这样，事实上*这就是发生的事情*。该方法在此时完成，控制权返回给它的调用者。

然而，呼叫者是另一个`indexDirectory`“更高”级别的呼叫。 *此*调用正在遍历 中的项目`C:\projects\test\`，并且刚刚完成`.settings`对它遇到的项目的处理。因此，一旦该方法返回，它就会从它（递归地）调用之前的位置`indexDirectory`继续`.settings`。

因此，正如人们所期望的那样，它随后被编入索引`C:\projects\test\build`，依此类推。

为了进一步澄清，价值`dataDirectory`并没有完全被*替换*。实际发生的是这个参数同时有两个副本——两个嵌套方法调用中的每一个都有一个。内在。递归方法有值`.settings`，外层方法有`test`。一旦内部方法访问了它的四个文件并返回，控制权就返回到外部方法——它（仍然）有一个值`test`for `dataDirectory`。

# php - 如何解析 OOP PHP 中的链接？

> ID：13010383
> 
> 赞同：-1
> 
> 时间：2012-10-22T11:21:50.623
> 
> 标签：php

嗨，我在 php 中有以下代码：

```
 class parser {
    public function __construct($link)
    {
    $xml = @simplexml_load_file($link);
    if (!$xml) {
        echo 'Error while parsing the document';
        exit;
    }
    }
$file = urldecode($_REQUEST['ftitle']);
$obj = new parser($file); 
```

我得到了部分提到的错误`if`。

但是如果我以简单的方式尝试它意味着我尝试使用无类方法，那么整段代码可以准确地工作而没有任何问题..请告诉我我的面向类的方法中是否有任何错误。提前谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:23:49.723

您的课程无效，您`}`最后错过了....并且`@`不建议使用来抑制错误

`!$xml`会是真的，所以改用这个

```
 if ($xml === false) { 
```

我是什么意思？？？

```
$xml = simplexml_load_string("<body />");

var_dump(!$xml); // returns true
var_dump($xml);  // return object(SimpleXMLElement)[1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:26:18.370

试试这个，我认为这会对你有所帮助，因为它在我的本地主机上可以正常工作

```
class parser {
    public function __construct($link)
    {
    $xml = @simplexml_load_file($link); // replace it with the following line.
    $xml =new SimpleXMLElement($link, NULL, TRUE);
    if (!$xml) {
        echo 'Error while parsing the document';
        exit;
    } //if end
    } //constructor end
    } //class end
$file = urldecode($_REQUEST['ftitle']); //replace it with the following line.
$file = $_REQUEST['ftitle'];
$obj = new parser($file); 
```

# mysql - 以下查询有什么区别。哪种执行方式最有效？

> ID：13010385
> 
> 赞同：0
> 
> 时间：2012-10-22T11:21:53.133
> 
> 标签：mysql

一种。

```
SELECT * 
FROM `photo` 
      INNER JOIN `photo_comment` 
          ON `photo`.id = `photo_comment`.photo_id 
LIMIT 0,2 
```

B.

```
SELECT * 
FROM (SELECT * FROM `photo_comment`) AS T,`photo` 
WHERE T.photo_id = `photo`.id 
LIMIT 0,2 
```

C。

```
SELECT * 
FROM `photo_comment`,`photo` 
WHERE `photo`.id=`photo_comment`.photo_id 
LIMIT 0,2 
```

以下查询有什么区别。哪种执行方式最有效？

在此先感谢您的帮助和启发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:26:46.543

第一个查询和第三个查询是一样的。第一个查询使用`ANSI SQL-92`格式，而第三个查询（*旧的*）使用`SQL-89`格式。

第二个查询较慢（*但并非完全较慢*），因为它扫描第`photo_comment` 一个并将其与另一个表连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:24:38.867

第一个和第三个查询类似。第二个是最慢的，因为使用临时表来存储内部选择的结果。

# c# - 将 Knockout 与 MVC4 结合使用：使用按钮切换表格中的列。

> ID：13010389
> 
> 赞同：2
> 
> 时间：2012-10-22T11:22:09.423
> 
> 标签：c#, knockout.js, asp.net-mvc-4

现在我有以下代码：

```
@model IEnumerable<MvcAuction.Models.Furniture>
@{
    ViewBag.Title = "Search";
}
<hgroup class="title">
    <h1>@ViewBag.Title.</h1>
</hgroup>
@using (Html.BeginForm("SearchIndex", "Furniture", FormMethod.Get))
{    
    <p>
        Description: @Html.TextBox("SearchString")
        <input type="submit" value="Search" /></p> 
}
<table class="searchResults">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Description) &nbsp
        </th>
        <th>
            @Html.DisplayNameFor(model => model.EndingDate) &nbsp
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Category) &nbsp;
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Price) &nbsp;
        </th>
        <th>
        </th>
    </tr>
    @foreach (var item in Model)
    {
          <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.EndingDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Category)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Price)
            </td>
            <td>
                <button data-bind="click: toggleBidInput ">
                    <span data-bind="text: bidCancel"></span>
                </button>
            </td>
            <td>
                <input data-bind="visible: bidInputVisible" />
                <button data-bind="visible: bidInputVisible">
                    Submit</button>
            </td>
        </tr>
    }
</table>
@section Scripts{
@Scripts.Render("~/Scripts/knockout-2.1.0.js")
<script type="text/javascript">
    function ViewModel() {
        var self = this;
        self.bidInputVisible = ko.observable(false);
        self.bidCancel = ko.observable("Bid");
        self.toggleBidInput = function () {
            self.bidInputVisible(true);
            self.bidCancel("Cancel");
        };
    }
    ko.applyBindings(new ViewModel());

</script>
} 
```

因此，使用此代码，我在表格每一行的末尾都有一个“投标”。当我单击它时，它会重命名为“取消”，并且旁边会出现一个文本输入和另一个“提交”按钮（在所有行中）。

我想分开每个“投标”按钮，所以当我点击它时，只有该特定行中的那个按钮会更改为取消，并且只有在该行中才会出现文本输入和“提交”按钮。

我似乎无法为每一行分开按钮的效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:13:22.053

KnockoutJS 本质上是一个“客户端库”。我不确定您是否可以通过将“客户端代码”与您提到的“mvc4 服务器端代码”混合来实现您的期望。

使用 KnockoutJS，当您将表的行（如您的示例）绑定到集合中的项目列表时，“单击”命令可用于绑定到的每个项目。

因此，从我在您的示例中可以看到，我将进行以下更改：

1) 将每个 Model.item 放入 ViewModel 中的集合中。前任：`self.items = ko.observable([])`

有很多方法可以实现这一点，但为了这个例子，简单地试试这个：

```
self.items = ko.observableArray([
   {
      itemDescription: 'desc 1', 
      itemEndingDate: '2012.01.01', 
      itemCategory: 'abc', 
      itemPrice : 123
   },
   {
      itemDescription: 'desc 2', 
      itemEndingDate: '2012.01.02', 
      itemCategory: 'bcd', 
      itemPrice : 234
   }
]) 
```

2）将“toggleBidInput”，“bidCancel”和“toggleBidInput”放入每个项目中。

3) 将表的 tbody 绑定到该集合。前任：

```
<tbody data-bind="foreach:items">..</tbody> 
```

4) 将行的单元格绑定到适当的项目。前任：

```
 <tr>
    <td>
        <span data-bind="text:itemDescription"></span>
    </td>
    <td>
        <span data-bind="text:itemEndingDate"></span>
    </td>... 
```

当 Knockout 遍历项目（foreach..）时，单击按钮将绑定到每个项目。

对于第1点）（将数据从服务器传递到客户端），有很多方法：

1) 使用 MVC 的实用程序生成 JSON 字符串并将该字符串放入变量“模型数据”中。使用这个“模型数据”来创建包含额外可观察对象和函数的项目。

2）使用ajax异步“获取”数据。并根据从服务器返回的值填充项目。Web API 实际上对此非常有用。请参阅 John Papa 的精彩文章：[http ://www.johnpapa.net/2forfree/](http://www.johnpapa.net/2forfree/)

希望这可以帮助。

# phpunit - 连接到 AlbumTable 时使用 ZF2 专辑模块进行 Phpunit 测试失败

> ID：13010390
> 
> 赞同：0
> 
> 时间：2012-10-22T11:22:11.800
> 
> 标签：phpunit, zend-framework2

我正在按照在线 ZF2 教程尝试 Zf2 专辑模块中的 phpunit。下面是调试信息。

```
Album\Model\AlbumTableTest::testFetchAllReturnsAllAlbums
Argument 1 passed to Album\Model\AlbumTable::__construct() must be an instance of Zend\Db\Adapter\Adapter, instance of Mock_TableGateway_fb3537df given, called in D:\www\zend2\tests\module\Album\src\Album\Model\AlbumTableTest.php on line 26 and defined 
```

使用的功能是

```
public function testFetchAllReturnsAllAlbums()
{
    $resultSet        = new ResultSet();
    $mockTableGateway = $this->getMock('Zend\Db\TableGateway\TableGateway',
                                       array('select'), array(), '', false);
    $mockTableGateway->expects($this->once())
                     ->method('select')
                     ->with()
                     ->will($this->returnValue($resultSet));

    $albumTable = new AlbumTable($mockTableGateway);

    $this->assertSame($resultSet, $albumTable->fetchAll());
} 
```

而调试信息中提到的第26行是

```
$albumTable = new AlbumTable($mockTableGateway); 
```

在 Album\Model\AlbumTable::__construct() 中调用以下函数

```
public function __construct(Adapter $adapter)
    {
        $this->adapter = $adapter;
        $this->resultSetPrototype = new ResultSet();
        $this->resultSetPrototype->setArrayObjectPrototype(new Album());
        $this->initialize();
    } 
```

非常感谢任何帮助克服这个失败的测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:13:17.580

解决了。我碰巧看到 Zend Framework2 教程中给出的 Album 模块已经更改。我再次按照它来更正更改的代码。现在上述问题已经解决。

# vb.net-2010 - 如何在不知道 X 和 Y 位置的情况下在图片框中的文本之后拉绳？

> ID：13010392
> 
> 赞同：0
> 
> 时间：2012-10-22T11:22:12.217
> 
> 标签：vb.net-2010, vb6-migration

我在一个 VB6 到 VB.NET 迁移项目中工作。在 VB6 中，我在运行时有一个图片框，使用 Graphics 设计一个表单。假设当我们在图片框上鼠标按下时，我有两个标签 lbl1 和 lbl2 就在右边用于输入文本的文本框。输入的文本在文本框中的 LostFocus 之后可见。在 VB6 中，保存数据并重新打开相同的表单后，保存的文本正确位置显示在标签的右侧。

在 VB.NET 中没有发生。在 VB6 中，他们只写了

```
picture1.Print "Hi". 
```

但是在 VB.NET 中，我们还需要编写提供位置。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:37:34.807

Atlast 我解决了我的问题，如下所示。

测量标签宽度，如下所示

```
 Dim stringSize As New SizeF

                Dim labelText as String=lbl.Text
                stringSize = eventArgs.Graphics.MeasureString(labelText,Font.TimeNewRoman 
```

# objective-c - UITextView 中的 RTL 和 LTR（双向）

> ID：13010396
> 
> 赞同：3
> 
> 时间：2012-10-22T11:22:18.787
> 
> 标签：objective-c, uitextview, bidi

我正在尝试保存 UITextView 的内容，其中包含 RTL 和 LTR 格式的文本行。问题是 UITextView 只检查第一个字符来格式化方向。假设我处于“编辑”模式并编写此文本（*_* _ 表示空格）：

```
text1_______________________________________
____________________________________________אקסא      
text2_______________________________________ 
```

保存后，我们失去了**אקסא**的 RTL 。现在我想再次编辑这个文本，现在看起来像：

```
text1_______________________________________
אקסא      
text2_______________________________________ 
```

我无法在一个 UITextView 中将 \u200F 与 \u200E 方向字符混合。如何管理这个并从 UITextView 正确保存双向文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-02T11:37:25.547

这是一个快速的概念证明，使用[`NSAttributedString`](https://developer.apple.com/reference/foundation/nsattributedstring)：
- 将文本拆分为段落
- 对于每个段落，检测主要语言
- 为相应范围创建具有正确对齐方式的属性文本

```
// In a subclass of `UITextView`

+ (UITextAlignment)alignmentForString:(NSString *)astring {
    NSArray *rightToLeftLanguages = @[@"ar",@"fa",@"he",@"ur",@"ps",@"sd",@"arc",@"bcc",@"bqi",@"ckb",@"dv",@"glk",@"ku",@"pnb",@"mzn"];

    NSString *lang = CFBridgingRelease(CFStringTokenizerCopyBestStringLanguage((CFStringRef)astring,CFRangeMake(0,[astring length])));

    if (astring.length) {
        if ([rightToLeftLanguages containsObject:lang]) {
            return NSTextAlignmentRight;
        }
    }

    return NSTextAlignmentLeft;
}

- (void)setText:(NSString *)str { // Override
    [super setText:str];

    // Split in paragraph
    NSArray *paragraphs = [self.text componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];

    // Attributed string for the whole string
    NSMutableAttributedString *attribString = [[NSMutableAttributedString alloc]initWithString:self.text];

    NSUInteger loc = 0;
    for(NSString *paragraph in paragraphs) {

        // Find the correct alignment for this paragraph
        NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc]init];
        [paragraphStyle setAlignment:[WGTextView alignmentForString:paragraph]];

        // Find its corresponding range in the string
        NSRange range = NSMakeRange(loc, [paragraph length]);

        // Add it to the attributed string
        [attribString addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:range];

        loc += [paragraph length];
    }

    [super setAttributedText:attribString];
} 
```

另外，我建议阅读[Unicode BiDi 算法](http://unicode.org/reports/tr9/#Basic_Display_Algorithm)来管理更复杂的用例。

# java - java.net BalloonTip 没有出现

> ID：13010397
> 
> 赞同：1
> 
> 时间：2012-10-22T11:22:22.307
> 
> 标签：java, swing, jtable, tooltip, listselectionlistener

我在 java.net 上看到了[BallonTip](http://balloontip.java.net/)，并尝试将其集成到我的应用程序中，以便在用户单击表格单元格时显示。单击表格单元格时，BalloonTip 会按预期显示，但是当您将其滚动出当前视口时，您可以单击另一个单元格而不显示 BalloonTip。当您滚动表格时，会再次显示 BallonTip。

这是一个例子：

```
import java.awt.Color;
import java.awt.Dimension;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

import net.java.balloontip.BalloonTip;
import net.java.balloontip.TablecellBalloonTip;
import net.java.balloontip.styles.EdgedBalloonStyle;

public class TableTest2 extends JFrame {

static final int LENGTH = 40;
TablecellBalloonTip tip;
JTable mainTable;
JPanel main;
JLayeredPane layeredPane;
JScrollPane mainScroll;

TableTest2() {
    mainTable = new JTable(LENGTH, LENGTH);
    CustomListSelectionListener clsl = new CustomListSelectionListener(mainTable);
    mainTable.getColumnModel().getSelectionModel().addListSelectionListener(clsl);
    mainTable.getSelectionModel().addListSelectionListener(clsl);
    mainTable.setTableHeader(null);
    mainTable.setColumnSelectionAllowed(true);
    mainScroll = new JScrollPane(mainTable);
    add(mainScroll);

    tip = new TablecellBalloonTip(mainTable, new JLabel("Hello World!"), -1, -1, new EdgedBalloonStyle(Color.WHITE,
            Color.BLUE), BalloonTip.Orientation.LEFT_ABOVE, BalloonTip.AttachLocation.ALIGNED, 5, 5, false);

    setPreferredSize(new Dimension(500, 400));
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    pack();

}

public static void main(String[] args) {
    new TableTest2();
}

protected class CustomListSelectionListener implements ListSelectionListener {
    private int row, column, lead, anchor;
    private JTable table;

    public CustomListSelectionListener(JTable table) {
        this.table = table;
    }

    @Override
    public void valueChanged(ListSelectionEvent evt) {
        if (evt.getSource() == table.getSelectionModel() && table.getRowSelectionAllowed()) {
            // row selection changed
            row = table.getSelectedRow();
            column = table.getSelectedColumn();
            tip.setCellPosition(row, column);
            tip.refreshLocation();
        } else if (evt.getSource() == table.getColumnModel().getSelectionModel()
                && table.getColumnSelectionAllowed()) {
            // column selection changed
            lead = table.getColumnModel().getSelectionModel().getLeadSelectionIndex();
            anchor = table.getColumnModel().getSelectionModel().getAnchorSelectionIndex();
            if (lead <= anchor) {
                column = anchor;
            } else {
                column = lead;
            }
            row = table.getSelectedRow();
            tip.setCellPosition(row, column);
            tip.refreshLocation();
        }
    }
}
} 
```

单击表格中的单元格后，如何强制显示 BalloonTip？我认为有一个侦听器，它正在侦听滚动事件并管理 BallonTip 的绘制，但我不知道它是哪一个。

最好的问候 htz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:25:55.203

根据[这个邮件列表](http://java.net/projects/balloontip/lists/users/archive/2012-10/message/0)，BallonTip 1.2.1 版中有一个错误。现在，在 1.2.3 版本中，此问题已得到修复。

# javascript - 仅动态删除特定元素中的字母，并将其包装在 SPAN 中

> ID：13010399
> 
> 赞同：1
> 
> 时间：2012-10-22T11:22:27.673
> 
> 标签：javascript, mootools, html, dynamically-generated, letters

如果我有这样的元素：

```
<a href="javascript:void(0);" id="updates_toggle">0 Updates</a> 
```

我可以只动态删除字母吗？是否可以将其包装在 SPAN 中？

我需要它是这样的：

```
<a href="javascript:void(0);" id="updates_toggle"><span>0</span></a> 
```

而且我不想使用 jQuery，只使用 Mootools 或纯 JS。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:27:54.663

获取元素中的内容，替换掉任何不是数字的内容，然后将其重新包装在一个跨度中：

```
var el = document.getElementById('updates_toggle');
el.innerHTML = '<span>' + el.innerHTML.replace(/\D/g, '') + '</span>'; 
```

# django - 使用“Content-Type:application/json”在 curl 中发布 HTTP/1.1 400 BAD REQUEST

> ID：13010400
> 
> 赞同：2
> 
> 时间：2012-10-22T11:22:29.817
> 
> 标签：django, api, curl, http-post, django-piston

当我使用以下内容发出发布请求时

```
curl -i -d "username=rock&password=rock" http://my_VM_IP/api/1.1/json/my_login/ 
```

它生成所需的响应，生成这样的令牌（删节）：

```
HTTP/1.1 200 OK
Date: Mon, 22 Oct 2012 08:37:39 GMT
Vary: Authorization,Accept-Language,Cookie,Accept-Encoding
Content-Type: text/plain
Transfer-Encoding: chunked
OK{"success": {"my_token": "required_token"}} 
```

但是当我尝试相同的方法时，包括标题：

```
curl -i -H "Content-Type:application/json" -d "username=rock&password=rock" http://my_VM_IP/api/1.1/json/my_login/ 
```

它给了我以下错误：

```
HTTP/1.1 400 BAD REQUEST
Date: Mon, 22 Oct 2012 11:12:04 GMT
Vary: Authorization,Accept-Language,Cookie,Accept-Encoding
***Content-Type: text/plain***
Content-Language: en-us
Connection: close
Transfer-Encoding: chunked
Bad Request 
```

我不明白为什么会这样。还有***为什么 content-Type 显示 text/plain***，我还尝试查看其他一些问题，例如[为什么设置 POST Content-type:"Application/Json" 会导致 REST WebService 出现“错误请求”？](https://stackoverflow.com/questions/11724547/why-setting-post-content-typeapplication-json-causes-a-bad-request-on-rest?rq=1). 它也解决了我遇到的同样的问题。按照答案，我尝试以各种格式提供数据

```
{"username":"rock", "password":"rock"} 
```

但没有成功。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:02:53.383

通过使用`-H "Content-Type:application/json"`您正在`Content-Type`为您的*请求*设置标头。*响应*仍将返回您的视图告诉它返回的任何内容。

要返回带有 Content-Type 的响应`application/json`，请使用以下内容：

```
import json
from django.http import HttpResponse

def json_response(return_vars):
    'JSON-encodes return_vars returns it in an HttpResponse with a JSON mimetype'
    return HttpResponse(json.dumps(return_vars), content_type = "application/json")

#Usage: return json_response({'admin_token': admin_api_token.token}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:39:31.340

您很接近，但您需要通过以下方式将其作为 JSON 格式发送`curl`：

```
curl -i -H "Content-Type:application/json" -d '{"username":"rock", "password":"rock"}' 
```

（`"password","admin"`应该是`"password":"admin"`）

* * *

如果这不起作用，请尝试：

```
curl --dump-header - -H "Accept:application/json" -H "Content-Type:application/json" -X POST --data '{"username": "admin", "password": "admin"}' http://my_VM_IP/api/1.1/json/my_login/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:07:07.140

当您设置`-H`curl 命令的参数时，您指定请求的内容类型。您在响应中看到的响应内容类型是在服务器上设置的。`'content-type'`在 WSGI 应用程序中，您需要`'content-length'`手动指定。一些框架提供实用方法来返回 JSON 响应（例如，`jsonify`Flask 中的方法）。

# php - 无法从 json 格式的 php 向 jqGrid 添加数据

> ID：13010403
> 
> 赞同：0
> 
> 时间：2012-10-22T11:22:33.337
> 
> 标签：php, javascript, jqgrid

你好 StackOverFlow 国家。我正在尝试向 jqGrid 添加信息，该信息是从 MySQL 数据库中检索的。我有两个文件 => index.html 和 data.php （都在同一个目录中）

index.html 来源 =>

```
<script type="text/javascript">
$(function(){
    $("#jqGrid_tb").jqGrid({
        url: "data.php",
        datatype: "json",
        sortable: true,
        height: "auto",
        colNames: ["Name","Surname","Birth Year","Famous Film"],
        colModel: [
            {name: "name", index: "name", width: "150"},
            {name: "surname", index: "surname", width: "150"},
            {name: "b_year", index: "year", width: "150"},
            {name: "film", index: "film", width: "200"}
        ],
        rowNum: 5,
        rowList: [5,10,15],
        viewrecords: true,
        pager: $("#pager"),
        caption: "Famous Actors",
    }).navGrid("#pager");
});
</script>

<div id="grid">
    <table id="jqGrid_tb"></table>
    <div id="pager"></div>
</div> 
```

data.php 源 =>

```
include ("JSON.php");

$json = new Services_JSON();

$con = new mysqli("host","user","pswd","db");

if (!$con->connect_errno){
    if ($r = $con->query("SELECT * FROM actors")){
        while ($row = $r->fetch_assoc()){
            $info[] = array(
                "name" => $row[name],
                "surname" => $row[surname],
                "b_year" => $row[b_year],
                "film" => $row[film],
            );
        }
        $r->free();
    }
}

echo $json->encode($info);

if (isset($con)){
    $con->close();
} 
```

jqGrid在index.html文件中显示没有任何信息，打开data.php文件信息时也成功编码成JSON格式，有什么问题我不明白。请帮忙，谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:57:18.357

你应该包括

```
jsonReader: {
    repeatitems: false,
    root: function (obj) { return obj; },
    page: function (obj) { return 1; },
    total: function (obj) { return 1; },
    records: function (obj) { return obj.length; }
} 
```

作为 jqGrid 的附加选项，您不想更改输入数据的格式。此外，您应该指定哪些值应该将 jqGrid 分配为`id`行的属性。您可以包含附加`id`属性作为每个返回项目的附加属性，也可以将属性添加到包含唯一值`key: true`的列 (in )。`colModel`例如，如果您可以保证来自的值`"name"`已经是唯一的，那么您可以在列`key: true`的定义中包含属性`"name"`。

此外，您可以考虑使用`loadonce: true`jqGrid 选项。在这种情况下，网格的全部数据将一次加载，数据的排序、分页和搜索（过滤）将由*客户端*的 jqGrid 实现，而无需在服务器端实现一些额外的代码。如果网格中有大量行（数百或数千行），则不应使用该选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:32:43.773

您的回复格式错误。您可以转到[jqGrid Demos页面，在展开](http://www.trirand.com/blog/jqgrid/jqgrid.html)**Loading Data**然后选择**JSON Data**后，您将在其中找到 PHP/MySQL 的示例。

正确的数据格式应如下所示：

```
{
    "total": "1",
    "page": "1",
    "records": "2",
    "rows": [
        { "name": "Robert", "surname": "De Niro", "b_year": "1943", "film": "Once Upon A Time In America" },
        { "name": "Al", "surname": "Pacino", "b_year":"1971", "film": "Scent Of A Woman"}
    ]
} 
```

在哪里：

*   `total`--> 总页数
*   `page`--> 当前页码
*   `records`--> 记录总数
*   `rows`--> 数据行

此外，如果您希望行成为对象，则需要`repeatitems`在 jqGrid`jsonReader`选项中禁用：

```
$("#jqGrid_tb").jqGrid({
    ...
    jsonReader: { repeatitems: false }
}); 
```

还建议行具有唯一性`id`以供以后参考。

# c# - 当我点击c#中的按钮时如何播放音乐

> ID：13010406
> 
> 赞同：-2
> 
> 时间：2012-10-22T11:22:44.777
> 
> 标签：c#, visual-studio, button

这是按钮单击方法....但是代码给出了错误

```
“当前上下文中不存在 axWindowsMediaPlayer1”
```

:(
请帮帮我。我想在单击按钮时播放音乐。

```
 private void button8_Click_1(object sender, EventArgs e)
        {
            axWindowsMediaPlayer1.Visible = false;
            axWindowsMediaPlayer1.URL = (@"C:\Users\DELL\Downloads\ringtones\Twilight Piano.m4r");
            axWindowsMediaPlayer1.Ctlcontrols.play();

        }

 private void axWindowsMediaPlayer1_Enter(object sender, EventArgs e)
        {
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:34:30.510

看起来您正在尝试使用您需要先创建它的 MediaElement。您可以像这样将其添加到您的 xaml 中： `<MediaElement Name="axWindowsMediaPlayer1" Visibility="Hidden" />`

然后你需要声明你将控制播放

```
axWindowsMediaPlayer1.LoadedBehavior = MediaState.Manual; 
```

然后你可以加载你想要的任何 url，设置音量，甚至在音乐停止时进行回调。将以下代码放入您的 button.click 事件处理程序中：

```
Uri noise = new Uri(System.IO.Directory.GetCurrentDirectory().ToString() + @"\sounds\something.wav"); //Loads from the sounds directory within the project
       axWindowsMediaPlayer1.Source = noise;
       axWindowsMediaPlayer1.Volume = .5;
       axWindowsMediaPlayer1.MediaEnded += new RoutedEventHandler(axWindowsMediaPlayer1_MediaEnded);
       axWindowsMediaPlayer1.Play(); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:25:54.960

看来你还没有申报`axWindowsMediaPlayer1`。在表格的开头写下以下内容：

```
private axWindowsMediaPlayer axWindowsMediaPlayer1 = new axWindowsMediaPlayer(); 
```

如果这不是问题，请检查您是否拥有所有程序集引用，以及`using`顶部的 。

[这个网站一步一步解释了如何使用 axWindowsMediaPlayer](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564585%28v=vs.85%29.aspx)

# java - 也可序列化对象属性

> ID：13010407
> 
> 赞同：4
> 
> 时间：2012-10-22T11:22:47.130
> 
> 标签：java, serializable, object-serialization

当我`Serializable`在课堂上时，我需要添加`Serializable`到课堂内的所有对象吗？

例如，

```
public class User implements Serializable{

private List<Role> role;
private Task task;
} 
```

我也需要添加`Serializable`到`Role`and`Task`吗？

```
public class Task implements Serializable{
    // ...
}

public class Role implements Serializable{
    // ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T11:24:19.203

是的你是; 如果您的类`Task`不是`Role`，`Serializable`如果`java.io.NotSerializableException`您尝试序列化`User`.

当然，如果`Task`或`Role`包含其他非原始、非瞬态字段，它们也必须`Serializable`如此，等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T11:25:03.243

这是最简单的选择。

另一种选择是使这些字段瞬态并“覆盖” writeObject 和 readObject 以实现您自己的这些类的序列化。这不太可能值得付出额外的努力。

顺便说一句：如果您有一个嵌套类，则外部类需要是可序列化的，并且即使您不使用嵌套类，它也会隐含地引用它。`static`出于这个原因和其他原因，我建议尽可能制作嵌套类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:24:43.133

简短的回答：**是**的。可序列化类中的每个对象都必须自己可序列化。否则无法恢复所有属性或其他任何内容。

此外，您在尝试序列化此对象时也会遇到异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T11:25:02.937

[可序列化](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Serializable.html) 是的，因为：

```
Classes that do not implement this interface will not have any of their state
serialized or deserialized. All subtypes of a serializable class are themselves 
serializable. The serialization interface has no methods or fields and serves 
only to identify the semantics of being serializable. 
```

如果您尝试序列化实现 Serializable 的类的对象，但该对象包含对非 Serializable 类的引用，`NotSerializableException`则将在运行时抛出a

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T11:27:00.297

来自文档

> 未实现此接口的类将不会对其任何状态进行序列化或反序列化。

所以是的。

[请阅读](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Serializable.html)

# ajax - 有人可以解释 ajax 的工作原理（概念上不是代码）吗？

> ID：13010410
> 
> 赞同：1
> 
> 时间：2012-10-22T11:22:56.567
> 
> 标签：ajax

我已经使用 ajax 多年了，但真的从来不明白它是如何在后台工作的。

XMLHTTPRequest 只是具有不同格式的普通 HTTPRequest 吗？服务器可以同时处理多少个 XMLHTTPRequest？确切地说，请求的异步部分是什么？

那么问题可能...

你能解释或指出一个好的资源来阅读吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:31:56.380

异步部分意味着您可以向服务器发出请求并接收数据，而无需重新加载整个网页。

多少请求取决于您的服务器。

# php - Symfony2 - 强制文件下载

> ID：13010411
> 
> 赞同：61
> 
> 时间：2012-10-22T11:23:01.717
> 
> 标签：php, symfony, header, download

当用户单击下载链接时，我正在尝试下载文件。

在控制器中：

```
 $response = new Response();
    $response->headers->set('Content-type', 'application/octect-stream');
    $response->headers->set('Content-Disposition', sprintf('attachment; filename="%s"', $filename));
    $response->headers->set('Content-Length', filesize($filename));

    return $response; 
```

这是打开对话框以保存文件，但它说文件是 0 字节。并将其更改为：

```
 $response = new Response();
        $response->headers->set('Content-type', 'application/octect-stream');
        $response->headers->set('Content-Disposition', sprintf('attachment; filename="%s"', $filename));
        $response->headers->set('Content-Length', filesize($filename));
        $response->headers->set('Content-Transfer-Encoding', 'binary');
        $response->setContent(readfile($filename));

        return $response; 
```

我得到一堆奇怪的字符而不是文件下载对话框。

最后，将“setContent”行切换为：

```
 $response->setContent(file_get_contents($filename)); 
```

它返回一个 PHP 错误：

> 致命错误：允许的内存大小...

关于如何实现这一目标的任何线索？我以前在 PHP 中做过（没有 MVC），但我不知道通过 Symfony2 做这件事会缺少什么......

也许解决方案是在 PHP.INI 中设置 memory_limit，但我想这不是最佳实践......

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2015-12-03T12:13:07.753

最舒服的解决方案是

```
use Symfony\Component\HttpFoundation\BinaryFileResponse;
use Symfony\Component\HttpFoundation\ResponseHeaderBag;

$response = new BinaryFileResponse($file);
$response->setContentDisposition(ResponseHeaderBag::DISPOSITION_ATTACHMENT);

return $response; 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-10-23T07:19:04.987

我终于在没有 X-SendFile 的情况下解决了这个问题（这可能是最佳实践）。无论如何，对于那些无法让 X-Sendfile apache 模块工作（共享主机）的人，这里有一个解决方案：

```
// Generate response
$response = new Response();

// Set headers
$response->headers->set('Cache-Control', 'private');
$response->headers->set('Content-type', mime_content_type($filename));
$response->headers->set('Content-Disposition', 'attachment; filename="' . basename($filename) . '";');
$response->headers->set('Content-length', filesize($filename));

// Send headers before outputting anything
$response->sendHeaders();

$response->setContent(file_get_contents($filename));

return $response; 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-22T11:29:05.340

您不应该使用 PHP 来下载文件，因为这是 Apache 或 Nginx 服务器的任务。最好的选择是使用 X-Accel-Redirect（在 Nginx 的情况下）/X-Sendfile（在 Apache 的情况下）头文件下载。

以下操作片段可以与配置的 Nginx 一起使用以从 Symfony2 下载文件：

```
return new Response('', 200, array('X-Accel-Redirect' => $filename)); 
```

**UPD1：**配置了 mod_xsendfile 的 apache 代码：

```
return new Response('', 200, array(
    'X-Sendfile'          => $filename,
    'Content-type'        => 'application/octet-stream',
    'Content-Disposition' => sprintf('attachment; filename="%s"', $filename))
); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-22T21:13:15.283

不知道能不能帮上忙，但`application/octet-stream`没用`application/octect-stream`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-01-03T14:02:17.340

从 Symfony 3.2 开始，您可以使用[file() 控制器助手](https://symfony.com/doc/current/controller.html#file-helper)，它是创建 a 的快捷方式，`BinaryFileResponse`如前一个答案中所述：

```
public function fileAction()
{
    // send the file contents and force the browser to download it
    return $this->file('/path/to/some_file.pdf');
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-02-04T06:39:16.803

+1 亚历山大回应。

但是如果不能使用X-Sendfile，则应该使用2.2中添加的BinaryFileResponse：http: [//symfony.com/doc/current/components/http_foundation/introduction.html#serving-files](http://symfony.com/doc/current/components/http_foundation/introduction.html#serving-files)

在我的项目中，结果是

```
$response = new \Symfony\Component\HttpFoundation\BinaryFileResponse($dir .DIRECTORY_SEPARATOR. $zipName);

$d = $response->headers->makeDisposition(
    ResponseHeaderBag::DISPOSITION_ATTACHMENT,
    $zipName
   );

$response->headers->set('Content-Disposition', $d);

return $response; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-03-01T19:50:32.970

对于那些没有设置标题选项的人：

该`download`属性可能会有所帮助，具体取决于您需要支持的浏览器：

`<a href="{file url}" download>`

或者

`<a href="{file url}" download="{a different file name}">`

并非所有旧版浏览器都支持此功能。有关浏览器支持，请参阅此页面：

[https://www.w3schools.com/tags/att_a_download.asp](https://www.w3schools.com/tags/att_a_download.asp)

# web-services - 在线广播作为网络服务

> ID：13010412
> 
> 赞同：0
> 
> 时间：2012-10-22T11:23:11.167
> 
> 标签：web-services, amazon-web-services, streaming

启动在线收音机时，我的问题是我不想一直在我的计算机上本地运行程序。相反，我想编写一个**网络服务，它会自动随机播放来自在线数据库的 mp3**。这样一来，在线广播就可以 24/7 不间断地运行。

是否有任何您知道的框架，或者是否已经有用于此的开源 Web 服务？更一般地说，您将如何处理这个项目？

感谢您的任何想法和建议！迪特马尔

# ruby - 按给定键对哈希数组进行分组并累积值

> ID：13010416
> 
> 赞同：-1
> 
> 时间：2012-10-22T11:23:29.220
> 
> 标签：ruby

来源（已正确订购）：

```
rows = [{"key"=>[2012, 10]}, {"key"=>[2012, 9]}, {"key"=>[2011, 7]}] 
```

期望的结果：

```
[[2012, [10, 9]], [2011, [7]]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:11:35.927

由于数据是预先订购的，我们可以使用`chunk`代替`group_by`：

```
rows.chunk { |h| h.values.first[0] }.map do |year, hs| 
  [year, hs.map { |h| h.values.first[1] }]
end
#=> [[2012, [10, 9]], [2011, [7]]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:53:21.270

```
rows.map {|row| row.values.flatten}.inject({}) {|h,r| h[r[0]].nil? ? h[r[0]] = [r[1]] : h[r[0]] << r[1];h }.to_a
# [[2012, [10, 9]], [2011, [7]]] 
```

或者

```
rows.map {|row| row.values.flatten}.inject({}) {|h,r| h[r[0]] ||= []; h[r[0]] << r[1];h }.to_a
# [[2012, [10, 9]], [2011, [7]]] 
```

# xslt - 汇总所有产品的总数及其各自订购的数量 XSL

> ID：13010417
> 
> 赞同：0
> 
> 时间：2012-10-22T11:23:41.853
> 
> 标签：xslt, xpath

当前在 XSLT 中出现 NaN 错误。我想获得所有产品及其订购数量的总价值或收入。

XML:

```
<customers>
<customer>
<customername>John</customername>
</customer>
<invoices>
 <invoice>
  <invoicenumber>01</invoicenumber>
  <products>
   <product>
    <productname>candy bar</productname>
    <productamount>6</productamount
    <productcost>2</productcost>
   </product>
  </products>
 </invoice>
 <invoice>
  <invoicenumber>02</invoicenumber>
  <products>
   <product>
    <productname>choco bar</productname>
    <productamount>3</productamount
    <productcost>1</productcost>
   </product>
  </products>
 </invoice>
</invoices>
<customer>
<customername>Fritz</customername>
</customer>
<invoices>
 <invoice>
  <invoicenumber>01</invoicenumber>
  <products>
   <product>
    <productname>Soda</productname>
    <productamount>3</productamount
    <productcost>2</productcost>
   </product>
  </products>
 </invoice>
 <invoice>
  <invoicenumber>02</invoicenumber>
  <products>
   <product>
    <productname>lollipop</productname>
    <productamount>5</productamount
    <productcost>1</productcost>
   </product>
  </products>
 </invoice>
</invoices> 
```

而且我试图适应递归模板。

XSL：

```
Total:  
<xsl:call-template name="sumProducts">
<xsl:with-param name="pNodes" select="customers/customer/invoices/invoice/products"/>
<xsl:with-param name="pName1" select="././././././productamount"/>
<xsl:with-param name="pName2" select="././././././productcost"/>
</xsl:call-template>

<xsl:template name="sumProducts">
<xsl:param name="pNodes"/>
<xsl:param name="pName1"/>
<xsl:param name="pName2"/>
<xsl:param name="pAccum" select="0"/>
<xsl:choose>
<xsl:when test="not($pNodes)">
<xsl:value-of select="$pAccum"/>
</xsl:when>
<xsl:otherwise>
<xsl:call-template name="sumProducts">
<xsl:with-param name="pNodes" select="$pNodes[position() > 1]"/>
<xsl:with-param name="pName1" select="$pName1"/>
<xsl:with-param name="pName2" select="$pName2"/>
<xsl:with-param name="pAccum" select="$pAccum + $pNodes[1]/*[name()=$pName1] 
* pNodes[1]/*[name()=$pName2]"/>
</xsl:call-template>
</xsl:otherwise>
</xsl:choose>
</xsl:template> 
```

期望的结果是 Total = 26

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:09:33.113

我可以看到您的 XSLT 存在一些问题。首先**pNodes**参数设置不正确

```
<xsl:with-param name="pNodes" select="customers/customer/invoices/invoice/products"/> 
```

从查看您的 XML 来看，它需要如下所示

```
<xsl:with-param name="pNodes" select="customers/invoices/invoice/products/product"/> 
```

即**invoices**元素不在样本中的**customer**元素中，此外，您还希望将各个**产品**元素相加。

接下来，正如 Ian Roberts 所提到的，**pName1**和**pName2**看起来应该设置为元素名称。目前，您只是将它们设置为这些元素第一次出现的值。

```
<xsl:with-param name="pName1" select="'productamount'"/>
<xsl:with-param name="pName2" select="'productcost'"/> 
```

最后是**pAccum**参数的设置错误。您目前正在执行此操作...

```
<xsl:with-param name="pAccum" 
   select="$pAccum + $pNodes[1]/*[name()=$pName1] * pNodes[1]/*[name()=$pName2]"/> 
```

**但是您在第二个pNodes**变量之前错过了 $ 。应该是这样的：

```
<xsl:with-param name="pAccum" 
   select="$pAccum + $pNodes[1]/*[name()=$pName1] * $pNodes[1]/*[name()=$pName2]"/> 
```

这是完整的 XSLT，它应该给你 26

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:template match="/">
      <xsl:call-template name="sumProducts">
         <xsl:with-param name="pNodes" select="customers/invoices/invoice/products/product"/>
         <xsl:with-param name="pName1" select="'productamount'"/>
         <xsl:with-param name="pName2" select="'productcost'"/>
      </xsl:call-template>
   </xsl:template>

   <xsl:template name="sumProducts">
      <xsl:param name="pNodes"/>
      <xsl:param name="pName1"/>
      <xsl:param name="pName2"/>
      <xsl:param name="pAccum" select="0"/>
      <xsl:choose>
         <xsl:when test="not($pNodes)">
            <xsl:value-of select="$pAccum"/>
         </xsl:when>
         <xsl:otherwise>
            <xsl:call-template name="sumProducts">
               <xsl:with-param name="pNodes" select="$pNodes[position() &gt; 1]"/>
               <xsl:with-param name="pName1" select="$pName1"/>
               <xsl:with-param name="pName2" select="$pName2"/>
               <xsl:with-param name="pAccum" select="$pAccum + $pNodes[1]/*[name()=$pName1]  * $pNodes[1]/*[name()=$pName2]"/>
            </xsl:call-template>
         </xsl:otherwise>
      </xsl:choose>
   </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:49:00.267

您的递归模板看起来不错，我认为问题出在您的初始值`pName1`和`pName2`参数值上。尝试

```
<xsl:with-param name="pName1" select="'productamount'"/>
<xsl:with-param name="pName2" select="'productcost'"/> 
```

您的模板期望这些参数是包含相关元素*名称*的字符串，这就是为什么您需要在双引号`select`属性中使用单引号的原因。

# ios - 添加 OpenGL 视图时视图转换减慢

> ID：13010418
> 
> 赞同：0
> 
> 时间：2012-10-22T11:23:41.843
> 
> 标签：ios, opengl-es, uiviewanimation, uiviewanimationtransition

我们在应用程序中使用 OpenGL 视图来执行一些自定义动画，遇到了一个非常非常奇怪的问题。一旦将 Open GL View 添加到项目中，所有原生 View 动画都会变慢。减速并不意味着帧速率下降。动画没有卡顿，除了比正常慢得多（比如有人在模拟器中启用了“切换慢速动画”）。

这仅影响视图转换动画，例如：transitionFromView b. presentViewController（iOS6，或者更早的presentModalViewController）

虽然常规的 UIView 动画、CABasicAnimation 等以常规速度进行。

我还没有见过这样的事情，老实说，必须看到结果才能相信。:) 但是知道问题可能是什么（我不确定哪段代码可以帮助您调试，不幸的是我无法分享屏幕截图或视频）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:29:51.963

似乎动画在加载 OpenGL 视图时卡住了，调试生命周期方法，如 loadView、viewWillLoad。loadview 等发生在过渡动画中，也许您可​​以通过将大部分加载代码发送到您在 viewdidload 或 viewdidappear 中调用的自定义方法来解决慢速动画。

它不会中断任何其他动画，因为那是队列中的全新动作。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T22:20:45.813

几天后无意中找到了解决方案。

事实证明这个问题更加愚蠢和无关。碰巧的是，如果您有一个未正确关闭的 UIView beginAnimation 块，未来的动画就会变得很不稳定。这个错误编码的动画恰好在 OpenGL 视图初始化的同时触发，这导致我错误地认为 OpenGL 视图是其根源。

谢谢您的帮助！

# bash - Bash 忽略错误并获取返回码

> ID：13010420
> 
> 赞同：9
> 
> 时间：2012-10-22T11:23:45.980
> 
> 标签：bash

我`set -e`用来中止错误。

但是对于特定的一个函数，我想忽略错误，并且在错误时我想返回函数的代码。

例子：

```
do_work || true 
 if [ $? -ne 0 ] 
  then
   echo "Error"
  fi 
```

但这不是工作返回码总是正确的，因为|| 真的

如何在错误时获取 do_work 的返回码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-08-18T22:41:26.943

这里给出的几个答案是不正确的，因为它们会导致对一个变量进行测试，如果`do_work`成功，该变量将是未定义的。

我们还需要覆盖成功的案例，所以答案是：

```
set -eu
do_work && status=0 || status=1 
```

发帖人的问题有点模棱两可，因为它在文本中说“错误时我想要返回码”，但代码暗示“我总是想要返回码”

为了说明，这里是有问题的代码：

```
set -e

do_work() {
    return 0
}

status=123

do_work || status=$?
echo $status 
```

在这段代码中，打印的值是 123，而不是我们希望的 0。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-22T11:57:27.690

您可以使用 subshel​​l 快捷方式：

```
( set +e; do_work )
 if [ $? -ne 0 ]
  then
   echo "Error"
  fi 
```

希望这会有所帮助=)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-22T15:17:26.883

```
do_work || {
    status=$?
    echo "Error"
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-22T12:42:14.167

一种方法是使用管道，`-e`只查看管道最右边的结果：

```
set -e

do_work | true

retn=${PIPESTATUS[0]}
if (( $retn != 0 ))
then   
    echo "Error $retn"
fi     
echo Ending 
```

我写了一个简单`do_work`的方法，`exit 42`得到了以下输出：

```
Error 42
Ending 
```

该`PIPESTATUS`数组由 Bash 维护，每个元素给出管道每个部分的返回码。我们需要立即捕获它（因此`$retn`），因为它在每个命令中都会被覆盖。

当然，如果您`do_work`包含管道本身，这可能会出现问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T15:33:44.547

```
do_work || status=$?
if [ $status -ne 0 ]
then
    echo "Oh no - Fail whale $status has arrived"
fi 
```

# silverlight - 设置 MapMode 后地图不会平移或缩放

> ID：13010424
> 
> 赞同：0
> 
> 时间：2012-10-22T11:23:55.460
> 
> 标签：silverlight, windows-phone-7, windows-phone

根据用户偏好，我在 page_loaded 事件中设置 MapMode 如下：

```
if (Singleton.Instance.appSettings.MapMode)
{
    Microsoft.Phone.Controls.Maps.Core.MapMode mode = new Microsoft.Phone.Controls.Maps.AerialMode();
    this.map1.SetMode(mode, true);
}
else
{
    Microsoft.Phone.Controls.Maps.Core.MapMode mode = new Microsoft.Phone.Controls.Maps.RoadMode();
    this.map1.SetMode(mode, true);
} 
```

如果我评论这种情况，地图会完美地平移和缩放。如果我保持这个条件，地图会相应地改变模式，但不会平移或缩放（如果我启用缩放栏，当我按下按钮时它会缩放，但再次不会平移）。

任何帮助表示赞赏;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:32:00.530

好的，想通了。

做一个

map1.Mode = 模式；

而不是 map1.SetMode 调用。

SetMode 似乎挂起平移/缩放。

不知道为什么。如果我得到任何关于为什么我会告诉你的更新。

但至少你知道如何绕过它。

卡佩电话！希利

# c# - 网页 2 的含义是什么？

> ID：13010427
> 
> 赞同：1
> 
> 时间：2012-10-22T11:24:00.313
> 
> 标签：c#, asp.net, visual-studio-2012

我阅读了一些关于 Visual Studio 2012 和新功能的小文章。

但我真的对这个概念感到困惑：

`Web Pages 2`

我想知道这是什么意思，为什么这个坏名字？

例如。[_](http://www.asp.net/web-pages/overview/whats-new/top-features-in-web-pages-2#mobile)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:32:41.433

> ASP.NET 网页，正式称为 Web 窗体，是应用程序开发的主要构建块。Web 表单包含在扩展名为“.aspx”的文件中；这些文件通常包含静态 (X)HTML 标记，以及定义服务器端 Web 控件和用户控件的标记，开发人员在其中放置网页的所有 rc 内容。另外，在服务器上运行的动态代码可以放在一个页面中的一个块<%--动态代码--%>内，这与PHP、JSP、ASP等其他Web开发技术类似。在 ASP.NET Framework 2.0 中，Microsoft 引入了一种新的代码隐藏模型，该模型允许静态文本保留在 .aspx 页面上，而动态代码保留在 .aspx.vb 或 .aspx.cs 或 .aspx.fs 文件中（取决于关于所使用的编程语言）。

数字是指版本。

阅读[维基](http://en.wikipedia.org/wiki/ASP.NET)

# php - curl -X POST -H 'Content-Type: application/json' -d to PHP

> ID：13010433
> 
> 赞同：8
> 
> 时间：2012-10-22T11:24:18.377
> 
> 标签：php, curl

我需要发出一个 curl 请求，我有这一行“curl -X POST -H 'Content-Type: application/json' -d”并且需要“翻译”为 PHP curl。问题是我不知道“-X”、“-H”和“-d”是什么意思。

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
        'Accept: application/json',
        'Content-Type: application/json',
        'Content-Length: '. strlen($itemJson))
    ); 
```

我在标题（`$itemJson`是一个 JSON 字符串）上尝试了类似的东西，但我得到了错误 400。

我认为我以错误的方式提出请求。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T11:33:09.017

您可以尝试如下

```
$data = array("name" => "Hagrid", "age" => "36");                                                                    
$data_string = json_encode($data);                                                                                   

$ch = curl_init('http://somedomain.com/test.php');                                                                      
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                     
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);                                                                  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                                                                      
curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
    'Content-Type: application/json',                                                                                
    'Content-Length: ' . strlen($data_string))                                                                       
);                                                                                                                   

$result = curl_exec($ch); 
```

# python - 生菜：断言后继续测试

> ID：13010436
> 
> 赞同：0
> 
> 时间：2012-10-22T11:24:25.320
> 
> 标签：python, lettuce

测试失败后如何继续测试？

```
Feature: some feature
  Scenario Outline: some scenario outline
    Given I prepare everything
    Then there is a test that could fail
    And some other test I still want to run 
```

我希望“我仍然想运行其他一些测试”运行，即使“有一个可能失败的测试”失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:49:29.760

在 Python 原生支持的单元测试框架中，该框架将运行所有测试并给出输出，例如 8/10 已通过。因此，例如，您可以编写 20 个测试场景并针对测试编写代码，从而达到覆盖范围。测试框架通常应该运行所有测试（除非它们需要很长时间，通常情况并非如此）。

看看：[http ://docs.python.org/library/unittest.html](http://docs.python.org/library/unittest.html)

# android - 地图/卫星菜单隐藏在 Android 4 Google 地图上的地图下

> ID：13010439
> 
> 赞同：0
> 
> 时间：2012-10-22T11:24:32.010
> 
> 标签：android, html, google-maps

我有一个问题，即在 Android 4 手机上的网页（或本机应用程序）上加载的普通 Google 地图具有隐藏在地图下的地图/卫星和街景菜单选项。它适用于较旧的 Android 版本以及我能看到的其他任何地方！

有没有其他人看到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:23:20.520

我终于通过添加以下 CSS 规则找到了解决此问题的方法：

```
.gmnoprint { -webkit-transform:translate3d(0,0,0); } 
```

# javascript - 禁用 jQuery 删除 javascript 标签

> ID：13010443
> 
> 赞同：0
> 
> 时间：2012-10-22T11:24:38.940
> 
> 标签：javascript, jquery

最好的，

我正在尝试调试我们的 CMS（主要是 AJAX），但 jQuery 删除了所有脚本标签，是什么让我无法调试 JavaScript，如何禁用此行为？

我以为我会在简单的谷歌搜索后找到它，但没有成功:(

谢谢，

**编辑**

我之前的页面：

```
 <script>
    jQuery(function(){
        inter = null;
    jQuery('#parse').click(function(){
        jQuery('#answer').load(f(),{"POST":jQuery("#POST").val(),"start":((jQuery('#start').val()-1)*10)},function(){
            alert("Burrrnnnnnnn")
            console.log("Laten we is kijken: " + inter);
                clearInterval(inter);
            });
        inter = setInterval(function(){
            jQuery.getJSON("/googlemonster/backend/status-test",function(json){
                setProgressBar(json);
            });

        },200);
        return false;
    });

    });
     function

     function setProgressBar(obj){
        var g;
        jQuery("#progress-bar,#progress-text-alt-wrapper").animate({"width":(((g=obj["%"])==0?1:g)*2) + "px"},{queue:false});
        jQuery("#progress-text,#progress-text-alt").text(obj["%"] + "% " + obj["status"]);
    }
    </script>
    <style>
    #progress-text-alt-wrapper {
        height: 30px;
        position: absolute;
        z-index: 2;
        width: 1%;
        overflow: hidden;
    }

    #progress {
        border: solid black 1px;
        padding: 1px;
        text-align: center;
        height: 20px;
        width: 200px
    }

    #progress-bar {
        background-color: green;
        width: 1%;
        height: 100%;
    }

    .progress-bar-text {
        padding-top: 3px;
        text-align: center;
        width: 200px;
        position: absolute;
    }

    #progress-text {
     color:green;
    }
    #progress-text-alt {
        color:#eee;
    }
    </style>
     Query:
    <input id="POST" type="text" />
    <br>
    Pagina
    <input value="1" id="start"
        type="number" />
    <br>
    <button id="parse">Look</button>
    <div>
        <div id="progress">
            <div id="progress-text-alt-wrapper">
                <div class="progress-bar-text" id="progress-text-alt">0% Nothing</div>
            </div>
            <div class="progress-bar-text" id="progress-text">0% Nothing</div>
            <div id="progress-bar"></div>
        </div>
    </div>
    <div id="answer"></div> 
```

之后的页面

```
<style>
#progress-text-alt-wrapper {
    height: 30px;
    position: absolute;
    z-index: 2;
    width: 1%;
    overflow: hidden;
}

#progress {
    border: solid black 1px;
    padding: 1px;
    text-align: center;
    height: 20px;
    width: 200px
}

#progress-bar {
    background-color: green;
    width: 1%;
    height: 100%;
}

.progress-bar-text {
    padding-top: 3px;
    text-align: center;
    width: 200px;
    position: absolute;
}

#progress-text {
 color:green;
}
#progress-text-alt {
    color:#eee;
}
</style>
 Query:
<input id="POST" type="text">
<br>
Pagina
<input value="1" id="start" type="number">
<br>
<button id="parse">Look</button>
<div>
    <div id="progress">
        <div id="progress-text-alt-wrapper">
            <div class="progress-bar-text" id="progress-text-alt">0% Nothing</div>
        </div>
        <div class="progress-bar-text" id="progress-text">0% Nothing</div>
        <div id="progress-bar"></div>
    </div>
</div>
<div id="answer"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:20:23.047

经过一些研究，感谢这里的人，我最终可以解决问题，

我为它制作了一个 jQuery 小插件，现在脚本标签没有被删除，而是被执行。

```
(function($){

    $.fn.loadDebuggable = function(url){

        data = typeof(arguments[1]) == "object"?arguments[1]:{};
        success = arguments[2]||typeof(arguments[1]) == "function"?arguments[1]:function(){};
        return $.ajax(url,{
            "context":this,
            "success":[function(data){
                var div = document.createElement('DIV');
                div.innerHTML = data;
                this[0].innerHTML = "";
                while (div.firstChild) 
                 {
                    this[0].appendChild(div.firstChild);
                    div.removeChild(div.firstChild);
                 };

            },success],
            "type":"GET",
            "data":data
            });
    }
})(jQuery); 
```

谢谢，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:38:45.620

你是对的 – 去除脚本标签是 jQuery 的一个特性。您需要改用基本的 JavaScript 方法。

请参阅：[无法附加 <script> 元素](https://stackoverflow.com/questions/610995/jquery-cant-append-script-element)

> 脚本将首先被评估，然后被丢弃。

[http://api.jquery.com/append/](http://api.jquery.com/append/)

# ruby-on-rails - 在 windows 中设置 Curb

> ID：13010444
> 
> 赞同：4
> 
> 时间：2012-10-22T11:24:40.750
> 
> 标签：ruby-on-rails, curl, rubygems, curb, feedzirra

我正在尝试在 Windows 7[上将 feedzirra](https://github.com/pauldix/feedzirra)与 Rails 3 一起使用，但在安装 Curl 和 Curb 时遇到了实际问题。我发现这个问题[Install Ruby Curb gem in windows XP](https://stackoverflow.com/questions/1511865/install-ruby-curb-gem-in-windows-xp)这使我能够成功安装 gem，但是现在当我尝试启动我的 rails 服务器时，我收到以下错误：

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/curb-0.8.1/lib/curb.rb:1:in `require': 193: %1 is not a valid Win32 application.   - C:/Ruby193/lib/ruby/gems/1.9.1/gems/curb-0.8.1/lib/curb_core.so (LoadError)
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/curb-0.8.1/lib/curb.rb:1:in `<top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/feedzirra-0.0.24/lib/feedzirra.rb:4:in `require'
    ... 
```

文件 curl_core.so 确实存在，但 windows 不知道如何打开它并说它不是有效的 Win32 应用程序。有什么想法可以让它发挥作用吗？或者有没有人知道任何其他不使用 Curb 的优秀 RSS 阅读器？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T23:37:28.563

本，

不确定您是否还在寻找使用 Feedzirra，但为了让它在我的机器（Windows 7）上运行，我必须将两者都复制`libcurl.dll`到`libidn-11.dll`Ruby`bin`目录中。之后它就没有问题了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T06:46:28.020

尝试将 libcurl.dll 从 curl 安装复制到 ruby​​ /bin 目录。为我解决了这个问题。

# xcode - 在 XCode 4.5 中运行较旧的模拟器版本

> ID：13010447
> 
> 赞同：2
> 
> 时间：2012-10-22T11:24:50.280
> 
> 标签：xcode, ios-simulator, osx-mountain-lion

我已将我的 mac mini 升级到山狮 10.8 版本。和 XCode 到 4.5 但现在我没有看到除 ios6 以外的模拟器版本。但是我想在多个平台上运行应用程序。我该怎么做？因为当我尝试从 XCode -> Preferences -> Downloads 下载模拟器版本时，我看到“没有可用的组件”。

# java - 如何配置 JVM 仅在真正需要时才分配内存？

> ID：13010448
> 
> 赞同：0
> 
> 时间：2012-10-22T11:24:50.557
> 
> 标签：java, memory-management, jvm, jvm-arguments

我有一个可以在我使用 jvm 命令时执行的应用程序`-Xmx65m`。虽然它运行良好，但我想让应用程序消耗更多内存，因为它有一些需要它的功能。问题是，如果我增加该`-Xmx`选项，JVM 将分配更多内存来运行它仅用 65 MB 就可以处理的功能。

是否可以将 JVM 配置为仅在 SO 用完选项并且即将抛出 OutOfMemoryError 时才向 SO 请求更多内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:29:55.083

请添加 min ， max 内存设置。这样 JVM 可以从所需的最小内存开始，并在需要时继续分配更多内存。

**-Xms65m -Xmx512m**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:28:05.037

JVM 在启动时将最大堆大小保留为虚拟内存，但它只使用它需要的数量（即使您设置了最小大小，它也可能不会使用那么多）如果它使用大量内存但不需要它它可以再回馈给操作系统（但通常不会 AFAIK）

也许您没有看到逐渐增加，因为您的最大值是如此之小。尝试使用最大值`-mx1g`并查看`jvisualvm`最大堆大小如何增长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T13:47:41.483

> 是否可以将 JVM 配置为仅在 SO 用完选项并且即将抛出 OutOfMemoryError 时才向 SO 请求更多内存？

随着 JVM 接近最终耗尽空间，它运行 GC 的频率越来越高，应用程序吞吐量（就每 CPU 秒完成的有用工作而言）急剧下降。如果你能避免它，你不希望这种情况发生。

您可以使用一种 GC 调整选项来阻止 JVM 增大堆。该`-XX:MinHeapFreeRatio`选项设置“GC 后堆空闲的最小百分比以避免扩展”。如果您将其从默认值 40% 降低到（例如）20%，GC 将不那么急于扩展堆。

不利的一面是，如果您减少`-XX:MinHeapFreeRatio`，整个 JVM 将花费更大比例的时间来运行垃圾收集器。走得太远，影响可能会非常严重。（就个人而言，我根本不建议更改此设置...）

# wpf - 如何在 wpf 中动态更改资源字典源名称？

> ID：13010450
> 
> 赞同：3
> 
> 时间：2012-10-22T11:24:57.910
> 
> 标签：wpf, resourcedictionary

```
<Application x:Class="CustControls.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         StartupUri="MainWindow.xaml">
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/ControlLibrary;component/Styles/ControlResource.xaml"/>
            <ResourceDictionary Source="StringLocalization/Dictionary_fr-FR.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

现在我想将 ResourceDictionary 的源名称**Source="StringLocalization/Dictionary_fr-FR.xaml"**更改为 Source="StringLocalization/Dictionary_en-US.xaml"

我该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:45:20.467

[MSDN 文档](http://msdn.microsoft.com/en-us/library/aa350178.aspx)解释说，

> “在代码中，您不设置 Source 属性。相反，您必须通过创建一个或加载一个来获取 ResourceDictionary 对象。加载现有 ResourceDictionary 的一种方法是在具有 ResourceDictionary 的现有 XAML 文件流上调用 XamlReader.Load root，然后将 XamlReader.Load 返回值转换为 ResourceDictionary。”

看起来您只能通过创建一个或加载一个来获得 ResourceDictionary。

了解您使用 ResourceDictionaries 的目的也很重要。如果您打算将它们用作“共享资源”，则无法使用“嵌入式资源”操作构建字典。确保它们被标记为“内容”并正确链接到它们的路径位置。此外，了解合并字典在选择哪个资源而不是其他资源方面的行为也很重要（取自[MSDN-documentation](http://msdn.microsoft.com/en-us/library/aa350178.aspx)）：

> 合并字典中的资源在资源查找范围中占据一个位置，该位置位于它们合并到的主资源字典的范围之后。尽管资源键在任何单独的字典中必须是唯一的，但一个键可以在一组合并字典中多次存在。*在这种情况下，返回的资源将来自在 MergedDictionaries 集合中按顺序找到的最后一个字典。*如果 MergedDictionaries 集合是在 XAML 中定义的，则集合中合并字典的顺序是标记中提供的元素的顺序。如果在主字典和合并的字典中定义了键，则返回的资源将来自主字典。这些范围规则同样适用于静态资源引用和动态资源引用。

查看您的代码，您似乎只想将另一个 ResourceDictionary 加载到您的应用程序中。如果这就是您想要的，那么可能将其添加到 MergedDictionaries 集合中可能已经足够了。

如果您想在运行时加载一个，您可以使用以下代码（或类似代码）。只要确保你没有嵌入你的资源：

```
 try
    {
        string path = @".\Themes\Dictionary1.xaml";
        var xmlTextReader = new XmlTextReader(path);
        var resourceDictionary = (ResourceDictionary)XamlReader.Load(xmlTextReader);
        Application.Current.Resources.MergedDictionaries.Clear();
        Application.Current.Resources.MergedDictionaries.Add(resourceDictionary);
    }
    catch (Exception exception)
    {
        Debug.WriteLine(exception.Message);
    } 
```

这是您需要的[代码。](http://sdrv.ms/Sh78Td)让我知道这是否有帮助。

# wpf - 用户控件初始化时日历控件宽度过大

> ID：13010455
> 
> 赞同：0
> 
> 时间：2012-10-22T11:25:03.523
> 
> 标签：wpf, calendar, width

I have used calendar control and its display mode is year when my user control is loads then calender width s too large and doesn't appear when width is set .but when is select any month then width is set as it should im not getting what它背后的问题是任何人都可以快速帮助我吗？？？

这是我的代码，选择的月份将出现在文本框的文本属性中，并且在按钮的单击事件中，我的日历控件设置为可见

```
 <StackPanel Grid.Row="0" Grid.Column="0" Orientation="HorizontalHorizontalAlignment="Left "Margin="4">
      <Label Content="Month: " HorizontalAlignment="Right" VerticalAlignment="Top" FontSize="15" FontWeight="DemiBold" Margin="4"/>
                <TextBox Height="23" HorizontalAlignment="Stretch" Name="SelectedMonthTextBox" VerticalAlignment="Top" Width="130" Margin="4" LostFocus="SelectedMonthTextBox_LostFocus" SelectionBrush="#FF767879"/>
                <Button Content=".." Height="20" Width="20" Margin="4" Name="button" Click="button_Click" />
            </StackPanel>
            <Calendar Grid.Row="1" Grid.Column="0" Margin="50,-8" Panel.ZIndex="100"  Name="calendar1" DisplayModeChanged="calendar1_DisplayModeChanged" DisplayDateChanged="calendar1_DisplayDateChanged" HorizontalAlignment="Left" DisplayMode="Year" Style="{StaticResource CalendarStyle}" Focusable="False" HorizontalContentAlignment="Left" VerticalAlignment="Top" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:35:40.713

我看了你的代码，从你到目前为止提供的信息来看，你描述的没有任何变化。我认为您应该检查以下内容：

1.  calendar1_DisplayModeChanged 发生了什么
2.  如何定义你的风格：StaticResource CalendarStyle

如果可能，请将它们张贴在这里。我会尽快提供帮助:)

# xamarin.ios - 如何在模拟器中为 MonoTouch 应用程序生成 .dSYM？

> ID：13010458
> 
> 赞同：2
> 
> 时间：2012-10-22T11:25:12.913
> 
> 标签：xamarin.ios, instruments, xamarin, dsym

我想在**没有 iPad**的 Instruments 中分析 MonoTouch 应用程序。我可以分析为模拟器编译的应用程序，但没有符号就没有乐趣：

![缺少符号](../Images/cdc17197431b5f7b7ad56b30f5e175e9.png)

在项目构建设置中没有使用 dSYM 生成 IPA 的选项——看起来它们仅在为设备编译时可用。

![无法生成 dSYM](../Images/a165567339138dd54f6f7c8273abba57.png)

我想要的只是一个MonoTouch-aware dSYM for Simulator。
这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:33:02.903

不幸的是，这是不可能的，因为在模拟器中我们 JIT 管理代码。这意味着在执行过程之前不可能知道方法将在内存中的位置，并且 Instruments 不支持 MonoTouch 在运行时通知 JIT ed 方法所需的机制 [1]。

[1] 请参阅此处对响应的最后评论：[是否可以在 Mac OS X 上通知 DTrace 动态生成的代码？](https://stackoverflow.com/questions/9214948/is-it-possible-to-notify-dtrace-on-mac-os-x-of-dynamically-generated-code)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T22:49:52.447

看看这个 - miguel 最近写了一篇博客文章来编译 aot 以在 mac 上进行分析 - 我认为这会给你你正在寻找的东西：

[使用 Instruments 分析使用 Mono 构建的 Mac 应用程序](http://tirania.org/monomac/archive/2013/Jan-03.html)

# asp.net - 在 .net 中获取 Paypal 帐户的总余额

> ID：13010461
> 
> 赞同：1
> 
> 时间：2012-10-22T11:25:31.370
> 
> 标签：asp.net, paypal, paypal-sandbox

如何获取我的 PayPal 账户的（总）余额？我想显示“我的 PayPal 账户余额”

我想在.Net中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:59:34.107

使用[PayPal 的 GetBalance API](https://www.x.com/paypal-apis-getbalance-php-5.3/nvp)。您可以选择调用 SOAP API 或通过名称值对选项

# javascript - 选择日期后避免重新打开日期选择器

> ID：13010463
> 
> 赞同：12
> 
> 时间：2012-10-22T11:25:48.277
> 
> 标签：javascript, jquery, jquery-ui, internet-explorer, datepicker

仅在带有此代码的 IE 中

```
$('#datepicker').datepicker({
    onSelect : function(x, u){
     $(this).focus();   
    }
}); 
```

当我选择一个日期时，日期选择器会重新打开，因为我添加`$(this).focus();`了`onSelect`. 我该如何解决这个问题？（[例](http://jsfiddle.net/VZts7/61/)）

我正在使用 jquery 1.8.2 和 jquery-ui 1.9

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-23T16:22:16.263

我今天遇到了这个问题，并为我提供了不同的解决方案。我的场景是我的 DatePicker 在一个 jQuery UI 对话框弹出窗口中。在 Chrome 中一切正常，但在 IE 中，日历总是会在选择日期后重新出现。

事实证明，在 jQuery 1.10.1 中有一个开放的错误：http: [//bugs.jqueryui.com/ticket/9125](http://bugs.jqueryui.com/ticket/9125)

还有一个[JSFiddle](http://jsfiddle.net/R9AT2/1/)链接到它演示了 IE 中的错误。有两种方法可以让它在 IE 中工作：

1.  设置`modal`为`false`
2.  选择日期后立即关注另一个元素

我选择了#2，这是一个修复示例（仅更新 JSFiddle 代码）：

标记：

```
<div id="dialog">
    <input id="datepicker" />
    <input type='button' value='save' id='btnSave'/>    
</div> 
```

JS：

```
$( "#datepicker" ).datepicker({onSelect: function() { $('#btnSave').focus(); }});
$( "#dialog" ).dialog({ modal: true }); 
```

希望这对将来的人有所帮助！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-22T13:14:28.117

这是我能得到的最好的解决方法：

（受此[链接](http://www.objectpartners.com/2012/06/18/jquery-ui-datepicker-ie-focus-fix/)启发）

[jsFiddle](http://jsfiddle.net/hv77F/)

```
$('#datepicker').datepicker({
            /* fix buggy IE focus functionality */
            fixFocusIE: false,    
            onSelect: function(dateText, inst) {
                  this.fixFocusIE = true;
                        $(this).change().focus();
            },
            onClose: function(dateText, inst) {
                  this.fixFocusIE = true;
                  this.focus();
            },
            beforeShow: function(input, inst) {
                  var result = $.browser.msie ? !this.fixFocusIE : true;
                  this.fixFocusIE = false;
                  return result;
            }
}).click(function(){$(this).focus()}); 
```

请注意您在问题中的建议，我使用的是 jquery-UI 1.9.0。在您的示例中，您使用的是 jquery-ui 1.8.15，已知它在某些事件上存在错误（例如，IE 上的 beforeShow()）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-24T17:55:27.567

我将它用于 IE，它也会停止日期选择器重新打开

查询：

```
 onSelect: function(){ 
        $("#focusfix").focus();
    }, 
```

HTML（对话框 div 的第一行）：

```
<input class="ui-helper-hidden-accessible" id="focusfix" type="text"autofocus/> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-18T09:35:14.770

由于`.browser`在 jQuery 1.9 之后被删除，我不得不稍微修改代码。这对我有用：

```
$('#datepicker').datepicker({
    /* fix buggy IE focus functionality */
    fixFocusIE: false,    
    onSelect: function(dateText, inst) {
          this.fixFocusIE = true;
                $(this).change().focus();
    },
    onClose: function(dateText, inst) {
          this.fixFocusIE = true;
          this.focus();
    },
    beforeShow: function(input, inst) {
          var result = true;
          if (navigator.appName == 'Microsoft Internet Explorer') {
            result = !this.fixFocusIE;
          }
          this.fixFocusIE = false;
          return result;
    }
}).click(function(){$(this).focus()}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-14T19:43:50.013

IE <= 9 中 jQuery > 1.9 的解决方案

```
{fixFocusIE: false},    
        {onSelect: function(dateText, inst) {
              this.fixFocusIE = true;
              $(this).change().focus();

            }
        },
        {onClose: function(dateText, inst) {
              this.fixFocusIE = true;
              this.focus();

            }
        },
        {beforeShow: function(input, inst) {
              var result = isIE ? !this.fixFocusIE : true;                      
              this.fixFocusIE = false;                      
              return result;
         }

function isIE() {
        var ua = window.navigator.userAgent;
        var msie = ua.indexOf("MSIE ");

        if (msie > 0)      
           return true;
        else                 

        return false;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T12:40:35.257

尝试这个：

```
$('#datepicker').datepicker({
onSelect : function(x, u){
 $(this).focus(); 
   $(this).datepicker("hide");     
},
onClose: function(e){
e.preventDefault();
}
}); 
```

这是小提琴[http://jsfiddle.net/VZts7/69/](http://jsfiddle.net/VZts7/69/)

或者对于**IE8**：

```
$('#datepicker').datepicker({
onSelect : function(x, u){
 $(this).focus();     
},
onClose: function(e){
(this).datepicker("hide");   
}
}); 
```

即使这不是一个完美的解决方案，请参阅工作小提琴[http://jsfiddle.net/hv77F/2/](http://jsfiddle.net/hv77F/2/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-01T14:32:37.740

死灵术。
我有同样的问题，除了这里提到的答案都没有奏效。
这可能是因为我必须处理的代码适用于 iframe，但我现在不确定。
最重要的是，我无法更新到最新版本，因为它会破坏与我必须处理的项目的其余部分的兼容性。
所以这就是为我解决的问题：

```
initDatePicker: function ()
{
    // Initialize datepicker 
    var qs = document.getElementsByClassName("datepick");
    for (var i = 0; i < qs.length; ++i)
    {
        $(qs[i]).datepicker(
        {
            // showOn: "button"
            // showOn: "both"
              showOn: "focus"
            , buttonImage: "../images/cal.gif"
            , buttonImageOnly: true
            //, buttonImageOnly: false
            , dateFormat: 'dd.mm.yy'
            , changeMonth: true
            , changeYear: true
            , showWeek: false // true
            , firstDay: 1
            , showOtherMonths: true //false 
            , selectOtherMonths: true
            , showButtonPanel: true

            //,onSelect : function(x, u){
            //    // $(this).focus(); 

            //    window.setTimeout(function () { $("#txtSchulungsTyp").focus(); $(this).datepicker("hide"); }, 300);
            //},
            //onClose: function(e){
            //    // e.preventDefault();
            //    e.preventDefault ? e.preventDefault() : e.returnValue = false;
            //    return false;
            //}

            , onSelect: function ()
            {
                $(this).datepicker('disable');
            }
            , onClose: function ()
            {
                window.setTimeout(function (e)
                {
                    $(e).datepicker('enable')
                }.bind(undefined, this), 500)
            }

        })
        ; // End datepicker

        // console.log(mGlobalLanguage);

        // $(qs[i]).datepicker("option", $.datepicker.regional['de']);  
        // $(qs[i]).datepicker("option", $.datepicker.regional['FR']);
    } // Next i 
} 
```

# javascript - iAd Producer 中的 Javascript

> ID：13010466
> 
> 赞同：1
> 
> 时间：2012-10-22T11:25:59.063
> 
> 标签：javascript, ios, iad

我真的很难在 iAd 制作人中找到 Javascript 的文档。如果有人有链接，将不胜感激。

我需要在图像上注册点击事件并替换不可见的图层、从库中导入资产或将项目从屏幕外移到舞台中。有没有人有我可以使用的任何代码示例？

我还需要检测设备的方向，以便我可以从舞台上移动资产。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:03:52.647

我正在自己学习它，并希望做与你正在做的事情相似的事情。但是您是否一直将其用作资源？

[https://developer.apple.com/library/iad/navigation/index.html](https://developer.apple.com/library/iad/navigation/index.html)

我在几个地方看到了有关设备方向的信息，但我不是 100% 确定这正是您正在寻找的：

[https://developer.apple.com/library/iad/#documentation/iAdJS/Reference/iAd.DeviceClassRef/iAd/iAd.html#//apple_ref/doc/uid/TP40012111](https://developer.apple.com/library/iad/#documentation/iAdJS/Reference/iAd.DeviceClassRef/iAd/iAd.html#//apple_ref/doc/uid/TP40012111)

[https://developer.apple.com/documentation/webkitjs/deviceorientationevent#//apple_ref/doc/uid/TP40010526](https://developer.apple.com/documentation/webkitjs/deviceorientationevent#//apple_ref/doc/uid/TP40010526)

# c# - C#在datagridview中导入csv文件

> ID：13010471
> 
> 赞同：1
> 
> 时间：2012-10-22T11:26:09.843
> 
> 标签：c#, winforms

> **可能重复：**
> [非常简单的 C# CSV 阅读器](https://stackoverflow.com/questions/1375410/very-simple-c-sharp-csv-reader)

在我的应用程序中，用户可以从 datagridview 导出和导出 csv 文件，这可以正常工作，但存在一些小问题。

如您所知，csv 文件使用逗号分隔项目。

有时其中一个单元格有一个逗号，例如（2,5 小时）。

导入 csv 时，它认为 2,5 之间的逗号符号是分隔符，因此它会将 2 放在一个单元格中，将 5 放在下一个单元格中。

我该如何解决这个问题。

这是我用于导入 csv 的 csv

```
dataGridView1.Rows.Clear();
        try
            {
                if (openFileCsv.ShowDialog() == DialogResult.OK)
                {
                    string csvPath = openFileCsv.FileName;

                    if (System.IO.File.Exists(csvPath))
                    {
                        System.IO.StreamReader fileReader = new System.IO.StreamReader(csvPath, false);

                        //Reading Data
                        while (fileReader.Peek() != -1)
                        {
                            fileRow = fileReader.ReadLine();
                            fileDataField = fileRow.Split(',');
                            dataGridView1.Rows.Add(fileDataField);
                        }
                        fileReader.Dispose();
                        fileReader.Close();
                    }
                    else
                    {
                        MessageBox.Show("CSV Bestand niet gevonden.");
                    }
                }

                DataLoaded = true;

            } 
```

这是我导出 csv 的代码。

```
if (saveFileCsv.ShowDialog() == DialogResult.OK)
            {
                string CsvFpath = saveFileCsv.FileName;

                try
                {
                System.IO.StreamWriter csvFileWriter = new System.IO.StreamWriter(CsvFpath, false);

            int countColumn = dataGridView1.ColumnCount - 1;

            int iColCount = dataGridView1.Columns.Count;

            foreach (DataGridViewRow dataRowObject in dataGridView1.Rows)
            {
                //Checking for New Row in DataGridView
                if (!dataRowObject.IsNewRow)
                {
                    string dataFromGrid = "";

                    dataFromGrid = dataRowObject.Cells[0].Value.ToString();

                    for (int i = 1; i <= countColumn; i++)
                    {
                        dataFromGrid = dataFromGrid + ',' + dataRowObject.Cells[i].Value.ToString();
                    }

                    //Writing Data Rows in File
                    csvFileWriter.WriteLine(dataFromGrid);
                }
            }

            csvFileWriter.Flush();
            csvFileWriter.Close();
        }
        catch (Exception exceptionObject)
        {
            MessageBox.Show(exceptionObject.ToString());
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T11:56:32.693

尝试使用分号分隔符，或带逗号 (",") 的引号：

```
fileRow = fileReader.ReadLine();
fileDataField = fileRow.Replace("\",\"", "\r").Split('\r');
dataGridView1.Rows.Add(fileDataField); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:30:25.460

您可以使用除逗号以外的其他字符来分隔变量，也可以将值括在引号中。

看看[这个](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)。

# php - Symfony autoload.php 错误

> ID：13010473
> 
> 赞同：1
> 
> 时间：2012-10-22T11:26:11.857
> 
> 标签：php, symfony

我正在尝试访问`Symfony/web/app_dev.php`，但它会产生以下错误：

> 致命错误：在第 35 行的 /var/www/wowddds.com/public_html/Symfony/app/autoload.php 中找不到类 'Doctrine\Common\Annotations\AnnotationRegistry'

请指导我。

是的，它是新鲜的，安装！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T14:29:30.153

这个错误可能是由某些版本的 php 造成的，例如 php 5.4.4，但从 5.4.9 开始，这个错误就消失了。

我建议您将 php 更新到最新版本。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-19T08:17:43.240

在 symfony3 上，这是由于缺少供应商造成的。尝试`composer install`或`composer update`;)

# python - 你能在 Python 中创建传统的固定长度和类型数组吗？

> ID：13010474
> 
> 赞同：8
> 
> 时间：2012-10-22T11:26:11.730
> 
> 标签：python

我正在剑桥考试委员会教授 A Level 教学大纲。实用论文中的一个典型问题是：

> 在您选择的编程语言中，声明一个由十个整数组成的数组，然后对其进行初始化。

我有这个：

```
myArray = []        #create the array

for i in range(10): # initializes to 0
    myArray.append(0) 
```

我相信这是大多数人在 Python 中会做的事情？然而，与 Pascal 等不同，它并没有严格回答这个问题，因为 Python 中的列表本质上是动态数组，增加了不限制每个元素的数据类型的问题。我可以像在 Pascal 中那样声明一个特定大小的数组和类型，而不是一个空的动态列表，没有任何类型的循环并限制数组的类型吗？

类似的东西（伪代码）：

```
myArray[10] : integer 
```

这是一个非商业问题，而是一个教育问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T11:33:49.293

您可以尝试使用该[`array`模块](http://docs.python.org/library/array.html)来指定数组的类型：

```
import array
a = array.array('i') # Define an integer array. 
```

然后，您可以将所需的元素添加到数组中。不过，我不确定您是否可以预定义数组应具有的大小。如果你想要一个由十个整数元素组成的数组，每个元素都为零，你可以这样做：

```
a = array.array('i', [0]*10) 
```

如文档中所述，`'i'`强制数组的元素为整数。`DeprecationWarning`如果您尝试在整数数组中插入浮点数，Python 2.6 将抛出 a ，但会将浮点数转换为 int：

```
>>> a[0]=3.14159
>>> a
>>> array('i', [3, 0, 0, 0, 0, 0, 0, 0, 0, 0]) 
```

* * *

或者，您可以使用[`numpy`package](http://docs.scipy.org/doc/numpy/reference/)，它允许您定义数组的大小和类型。

```
import numpy as np
a = np.empty(10, dtype=int) # Define a integer array with ten elements 
```

只是在`np.empty`内存中为数组保留了一些空间，并没有对其进行初始化。如果你需要一个 0 的数组，你可以这样做：

```
a[:] = 0 
```

或直接使用该[`np.zeros`功能](http://docs.scipy.org/doc/numpy/reference/generated/numpy.zeros.html)：

```
a = np.zeros(10, dtype=int) 
```

同样，在整数数组中插入浮点数会默默地将浮点数转换为整数。

请注意 numpy 和 : 之间的区别，`array`一旦在 中定义了一个数组`numpy`，就不能在不重新创建数组的情况下更改其大小。从这个意义上说，它满足了您对“10 个且只有 10 个整数”的要求。相比之下，一个`array.array`对象可以看作是一个具有固定元素类型的列表：数组是动态的，可以增加它的大小。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T11:32:42.150

你可以使用[数组模块](http://docs.python.org/library/array.html)

```
a = array.array('i',(0 for _ in xrange(10))) 
```

数组要求所有元素都是相同的类型，如创建时指定的那样。然而，它们仍然可以附加到

如果你真的下定了决心，你可以使用[ctypes](http://docs.python.org/library/ctypes.html#arrays)模块来构建一个 C 数组。但是，这可能不是很pythonic，因为它迫使你做更多低级的事情。

```
import ctypes
intArray10 = ctypes.c_int * 10
myArray = intArray10(*(0 for _ in xrange(10))) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-22T11:30:12.743

这是一种更 Pythonic 的初始化列表的方法：

```
>>> l = [0] * 10
>>> l
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
>>> l[1] = 1
>>> l
[0, 1, 0, 0, 0, 0, 0, 0, 0, 0] 
```

当然，这并没有回答如何创建像受限元素列表这样的非 Python 事物的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T12:03:58.247

正如已经提到`l = [0] * 10`的，用 10 个零初始化一个列表。

虽然可以添加更多元素，但不能误操作。

```
>>> l = [0] * 10
>>> l[10] = 1

Traceback (most recent call last):
    l[10] = 1
IndexError: list assignment index out of range 
```

如果要*追加*到列表中，则需要调用`.append()`或添加新元素的其他方法。因此，您不能意外添加元素，您需要**明确**说明。

在许多其他语言中，您可以将数组替换为具有不同大小的数组。重点是，您通常可以找到绕过这些限制的方法，我认为最好使用最简单且易于理解的方法。

对我来说，那将是

```
>>> l = [0] * 10 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T11:38:33.880

```
class myTypedArray:

    def __init__(self,mytype):
        self._internalList =    []
        self._internalType =    mytype

    def add(self,x):
       if type(x) == self._internalType:
            self._internalList.append(x)
       #else raise an Error to warn User of typedArray                                                   

    def __str__(self):
       s = ""
       for x in self._internalList:
            s+=str(x)
       return s

x = myTypedArray(int)

x.add(1)
x.add("xyz") # will not be added

print x # output: 1 
```

如果要限制大小，可以跟踪大小并抛出异常。因此，如您所见，在 Python 中扩展类型非常容易。诸如 C 之类的静态类型语言的全部意义在于更接近硬件。这个例子 myTypedArray 效率不高，所以通常没有理由使用静态类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-18T15:01:21.763

您可以使用[数组](https://docs.python.org/3/library/array.html)模块来做到这一点。array 模块是 python 标准库的一部分：

```
from array import array
from itertools import repeat

a = array("i", repeat(0, 10))
# or
a = array("i", [0]*10) 
```

[重复](https://docs.python.org/3/library/itertools.html?highlight=itertools%20repeat#itertools.repeat)函数将 0 值重复 10 次。它比 [0]*10 更节省内存，因为它不分配内存，而是重复返回相同的数量 x 次。

# c# - C# XAML Metro Image 动态源 - 更多源

> ID：13010480
> 
> 赞同：1
> 
> 时间：2012-10-22T11:26:22.730
> 
> 标签：c#, xaml, winrt-xaml

我以前有关于[C# XAML Metro Image 动态源的问题](https://stackoverflow.com/questions/12930661/c-sharp-xaml-metro-image-dynamic-source)

一切都很好，但是当我使用 3 个“缓冲区”并切换它们时，我看到闪烁。

```
public Dictionary<int, BitmapImage>[] SpritesBuffer = new Dictionary<int,BitmapImage>[3];

(...)

image.Source = SpritesBuffer[0][0]; //first time use

(...)

timer = new DispatcherTimer();
timer.Interval = new TimeSpan(0, 0, 0, 0, 16);
timer.Tick += SwitchImageSource;

timer.Start(); 
```

在 SwitchImageSource() 中，我使用 foreach 从 1\. 缓冲区循环图像，在某些操作中，我将缓冲区切换到 2。并从缓冲区 2 循环图像，等等。

但是当我已经遍历缓冲区 1、2 和 3 时，一切正常，图像不会闪烁。但是在第一个循环中，我看到闪烁。

我尝试在使用以下方式显示图像之前切换源：

```
foreach (Dictionary<int, BitmapImage> dic in SpritesBuffer)
            {
                foreach (KeyValuePair<int, BitmapImage> keyVal in dic)
                {
                    image.Source = keyVal.Value;
                }
           } 
```

但它不起作用。

请问我该如何解决这个问题？谢谢！

# qt - 如何刷新 QWidget 绘画缓存？

> ID：13010489
> 
> 赞同：0
> 
> 时间：2012-10-22T11:26:51.903
> 
> 标签：qt, qt4, qdialog, qmessagebox, qstyle

我正在开发一个自定义样式的 QMessageBox。在我的自定义 QStyle 类中的方法 Polish() 中，我调用：

```
if( (pDialog = qobject_cast<QDialog*>( pWidget )) != NULL )
{
    pDialog->setWindowFlags( pDialog->windowFlags() | Qt::FramelessWindowHint );
    // Allow QStyle draw widget background
    pDialog->setAttribute( Qt::WA_StyledBackground, true );

    // Set window background transparent
    QPalette oPalette = pDialog->palette();
    oPalette.setBrush( QPalette::Window, QBrush(Qt::transparent) );
    pDialog->setPalette( oPalette );
} 
```

这很好用，除非我们使用半透明边框：半透明部分在每次重绘时变得越来越暗（例如，当多次按下“显示详细信息”/“隐藏详细信息”时）。

更新：我刚刚意识到，当移动消息框时，“*太暗的半透明内容*”也会被移动。因此，我想刷新 QWidget 绘画缓存 - 如果存在这样的东西（后备存储？？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:29:59.867

解决方案来自第 268 行的 src/gui/dialogs/qdialog.cpp：

```
#ifdef Q_WS_S60
if (S60->avkonComponentsSupportTransparency) {
    bool noSystemBackground = testAttribute(Qt::WA_NoSystemBackground);
    // also sets WA_NoSystemBackground
    setAttribute(Qt::WA_TranslucentBackground);
    // restore system background attribute
    setAttribute(Qt::WA_NoSystemBackground, noSystemBackground); 
}
#endif 
```

如果只设置 Qt::WA_NoSystemBackground 我意识到，根本没有绘制背景 - 甚至不是由 Qt::WA_NoSystemBackground 触发的背景！

这是由 QWidget::setAttribute() 方法引起的，该方法在设置 Qt::WA_TranslucentBackground 时将 Qt::WA_NoSystemBackground 设置为 true。上面的解决方法（它是官方的 Qt 代码！！）解决了这个问题。

# eclipse-rcp - Is there a way to either remove or disable the "X" close button shown on a Editor part?

> ID：13010492
> 
> 赞同：0
> 
> 时间：2012-10-22T11:27:03.423
> 
> 标签：eclipse-rcp

I want to hide "X" close button from editor part in my eclipse rcp application. Is there any way to hide close button ?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:25:47.823

For a possible solution see [How do I stop an Eclipse Editor from closing in an RCP](https://stackoverflow.com/questions/2157016/how-do-i-stop-an-eclipse-editor-from-closing-in-an-rcp).

Hiding the "X" is not possible (without modifying the framework or writing your own presentation).

# javascript - Ajax获取元素的ID，其中有多个元素链接

> ID：13010495
> 
> 赞同：3
> 
> 时间：2012-10-22T11:27:21.533
> 
> 标签：javascript, ajax

以下代码是我目前用来尝试将帖子 ID 提供给 vote.php 的代码，但是这当前返回 [object Object]。单击链接时如何传递正确的ID？

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
        $.ajax({  
        type: "POST",  
        data: "id=" + $(this).attr("href", "id"), 
        url: "vote.php"
        });  
</script>

<a href="javascript:;" id="1"><div id="button">Like!</div></a>
<a href="javascript:;" id="2"><div id="button">Like!</div></a>
<a href="javascript:;" id="3"><div id="button">Like!</div></a> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:32:20.297

您需要将 ajax 调用绑定到单击处理程序：

```
$(document).on("click","a",function(e){
    $.ajax({  
    type: "POST",  
    data: "id=" + $(this).attr("id"), 
    url: "vote.php"
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:32:32.307

您应该考虑将其更改为：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
    function vote(_obj) {    
      $.ajax({  
        type: "POST",  
        data: "id=" + $(_obj).attr("href", "id"), 
        url: "vote.php"
        });  
    }
    $(document).ready(function() {
        $('.vote').click(function() {
            vote(this);
            return false;
        });
    });
</script>

<a id="1" class="vote"><div>Like!</div></a>
<a id="2" class="vote"><div>Like!</div></a>
<a id="3" class="vote"><div>Like!</div></a> 
```

一些注意事项：

1.  不要在一个页面上使用多个具有相同 ID 的元素
2.  仅在您的 DOM 加载并准备好之后绑定事件，即在 domready 事件上或之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:32:42.830

在您的代码中，您正在分配`"id"`没有多大意义的链接的href...并且您应该使用事件处理程序进行点击...

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
        $(document).ready(function(){
            $('a.likeBTN').click($.ajax({  
                type: "POST",  
                data: "id=" + $(this).attr("id"), 
                url: "vote.php"
        }))});  
</script>

<a href="javascript:;" class="likeBTN" id="1"><div id="button">Like!</div></a>
<a href="javascript:;" class="likeBTN" id="2"><div id="button">Like!</div></a>
<a href="javascript:;" class="likeBTN" id="3"><div id="button">Like!</div></a> 
```

# svn - SVN 在两个存储库之间移动带有历史记录的代码

> ID：13010496
> 
> 赞同：10
> 
> 时间：2012-10-22T11:27:23.653
> 
> 标签：svn, svnadmin, svnsync, svndump, svndumpfilter

我必须在两个存储库上工作，并且希望在两个存储库之间移动一个包含代码的目录，同时保留修订历史。

我在这里阅读了一些关于 SO 的问题，但仍然不确定该走哪条路。我们的存储库是**巨大**的（文件（orkingcopy）不包括修订>几个GB），因为所有内容都已签入（代码+设计数据+ ...）。

到目前为止我看到的解决方案是：

1.  **svnadmin 转储 + 过滤器 + 导入：**由于存储库大小，不是一个选项
2.  **svnsync：**我们已经在第二个存储库中有数据（存储库已经很大了，我认为合并它们不是一个好主意，除了决定这不是我的工作），根据我收集的信息，这需要第二个存储库空的。
3.  **[第三方解决方案](http://kennethxu.blogspot.de/2012/01/svn2svn-copy-and-sync-between-svn.html)**：反复崩溃，因为它无法删除文件，因为“另一个进程打开了文件”（尽管我可以通过操作系统删除文件，并且它是由脚本创建的）

是否有其他解决方案、方法，或者我错过了其中一个解决方案的一些内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T15:05:58.463

svnadmin 转储 + 过滤器 + 导入甚至适用于大型存储库。

为了提高性能，您需要做一些事情。找出第一个创建要复制的文件夹的版本。然后检查日志以找到修改该文件夹中任何内容的最后一个修订。您只需要转储该范围内的修订。

使用 --incremental 标志来 svndump。

不要尝试将 Deltas 标志与 SVN Dump 一起使用。SvnDumpFilter 不适用于使用“deltas”创建的转储。不要尝试将大量转储保存到文件并在文件上运行 SvnDumpFilter。而是使用管道一步完成。

如果您的起始修订版是 10000 并且您的最终修订版是 20000 并且您要复制的路径是项目/源，则该命令应如下所示

```
svnadmin dump --incremental -r10000:20000 YourRepoPath | svndumpfilter include projects/source --drop-empty-revs --renumber-revs > source.dump 
```

随后是 svnadmin load 命令将转储加载到您的其他存储库中。

# c++ - getchar_unlocked 在 windows 中未声明

> ID：13010505
> 
> 赞同：4
> 
> 时间：2012-10-22T11:28:04.960
> 
> 标签：c++, scanf

这是我的代码：

```
#include <stdio.h>

void scan(int* i)
{
    int t=0;
    char c;
    bool negative=false;
    c=getchar_unlocked();
    while(c<'0'&&c>'9')
    {
        if(c=='-')
            negative=true;
        c=getchar_unlocked();
    }
    while(c>'0'&&c<'9')
    {
        t=(t<<3)+(t<<1)+c-'0';
        c=getchar_unlocked();
    }
    if(negative)
        t=~(t-1); //negative
    *i=t;
}

int main(int argc, char const *argv[])
{
    int i;
    scan(&i);
    return 0;
} 
```

我知道这里定义的函数 as比编程竞赛`scan`更快`scanf`并且非常有用。但由于某种原因，这段代码不能在 Windows 上运行，而是在 Linux 上运行。我该怎么做才能让它在 Windows 上运行？我正在使用`g++`Dev-C++ 的编译器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:38:06.087

`getchar_unlocked` is not a C or C++ standard function and therefore it's no surprise that it doesn't work on Windows. It is a POSIX standard I think, but Windows compilers don't support all POSIX functions.

If you replaced `getchar_unlocked` with `getchar`, it would kind of work, although the algorithm doesn't seem quite right.

You could do this with conditional compilation, like this for instance

```
#ifdef _WINDOWS
// no getchar_unlocked on Windows so just call getchar
inline int getchar_unlocked() { return getchar(); }
#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-11T23:06:22.567

Windows 具有等效的_getchar_nolock，它是特定于Windows 的。

请参阅此链接：

[https://msdn.microsoft.com/en-us/library/4y2e9z0c.aspx](https://msdn.microsoft.com/en-us/library/4y2e9z0c.aspx)

因此，如果您对非线程安全版本感到满意并且希望获得最佳性能，您可以执行以下操作：

```
#ifdef WIN32
// no getchar_unlocked on Windows so call _getchar_nolock
inline int getchar_unlocked() { return _getchar_nolock(); }
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-09T18:37:24.357

`getchar_unlocked()`主要用于竞争性编程，但是，如果您想在其他地方使用它，只需确保一次只有 1 个线程在使用它。同样适用于 putchar_unlocked() 函数。它是 POSIX 等价物，因此 Windows 编译器不支持它。但是，您可以使用以下两种中的任何一种-

1.  正常的速度

    int getchar_unlocked() { return getchar(); } 无效 putchar_unlocked(char _c) { putchar(_c); }

2.  速度快

    int getchar_unlocked() { return _getchar_nolock(); } 无效 putchar_unlocked(char _c) { _putchar_nolock(_c); }

# asp.net-mvc-3 - 如何使用 distinct 关键字过滤对象

> ID：13010511
> 
> 赞同：0
> 
> 时间：2012-10-22T11:28:32.703
> 
> 标签：asp.net-mvc-3, nhibernate

我有一个项目列表，我可以在其中获取有关项目的所有详细信息。在项目类中，我在项目中有客户对象，我只想根据客户过滤该列表。我怎样才能做到这一点 。

```
public ICollection<Project> GetProjectBasicDetailsByProjectTypeCustomerID(ProjectType projectType, string custName, string cordinatorName, string projectName)
    {
        oLog.Debug("Started");
        ISession session = DataAccessLayerHelper.OpenReaderSession();
        ITransaction transaction = null;
        ICollection<Project> projectList = null;
        try
        {
            transaction = session.BeginTransaction();
            ICriteria criteria = session.CreateCriteria(typeof(Project),"Project")
                .CreateAlias("Project.customer","customer",NHibernate.SqlCommand.JoinType.InnerJoin)
                .CreateAlias("Project.Coordinator", "Coordinator", NHibernate.SqlCommand.JoinType.InnerJoin)
                .Add(Restrictions.Eq("Project.ProjectType", projectType));

            projectList = criteria.List<Project>().ToList();

            session.Flush();
            transaction.Commit();
        }
        catch (Exception ex)
        {
            if (transaction != null && transaction.IsActive)
                transaction.Rollback();
            oLog.Error(ex);
        }
        finally
        {
            if (transaction != null)
                transaction.Dispose();

            if (session != null && session.IsConnected)
                session.Close();
        }
        oLog.Debug("End");
        return projectList;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:50:14.630

如果我对您的理解正确，您想从您的项目中获得不同的客户吗？

在这种情况下，我认为这样的事情应该可以工作（这应该为您提供来自此标准的 dictinct 项目 ID - 也许有一种方法可以直接获取项目 - 但我现在无法测试：

```
ICriteria criteria = session.CreateCriteria(typeof(Project),"Project")
                .SetProjection(Projections.Distinct(Projections.Property("project.Id")))
                .CreateAlias("Project.customer","customer",NHibernate.SqlCommand.JoinType.InnerJoin)
                .CreateAlias("Project.Coordinator", "Coordinator", NHibernate.SqlCommand.JoinType.InnerJoin)
                .Add(Restrictions.Eq("Project.ProjectType", projectType)); 
```

# c++ - 将函数从 wchar_t 数组转换为 long int

> ID：13010515
> 
> 赞同：0
> 
> 时间：2012-10-22T11:28:50.223
> 
> 标签：c++, c, unicode, encoding

我正在编写一个将`wchar_t`数组转换为`long integer`值的函数（该函数忽略空格 beetwen 数字）。看我的代码：

```
long wchartol(wchar_t *strArray, long retVal = 0) {
  wchar_t *firstArray = strArray;
  long pow;
  int count, i;
  count = 0;
  i = 0;
  pow = 1;
  while(*firstArray != L'\0') {
    //firstArray++;
    if(*firstArray++ == L' ')continue;
    count++;
  }
  firstArray--;
  while(i < count) {
    if(*firstArray != L' ') {
      retVal += (*firstArray - L'0') * pow;
      pow*=10;
      i++;
    }
    firstArray--;
  }
  return retVal;
} 
```

我还有一个有趣的问题：当我从某个文件复制数字数据（它包含空格）并将其粘贴到函数的参数中时，我得到了函数返回的错误数据；但是当我用键盘输入的空格替换这些空格时，一切都很好。什么原因？我以这种方式调用该函数：

```
std::wcout << wchartol(L"30 237 740") << std::endl; 
```

读取使用`outputstream.imbue(std::locale::global(std::locale("")));`Maybe编写的文件是原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:49:32.250

您的代码假定输入字符串仅由数字和空格组成，以空字符结尾。文件中的管道可能会以换行符结束字符串，然后为空。因此，您将 '\r' 和 '\n' 算作数字，从中减去 '0' 并相应地增加 pow。

请尝试`std::wcout << wchartol(L"30 237 740\r\n") << std::endl;`查看它是否产生相同的错误值。

编辑：这是一些不对字符串做任何假设的代码，它只会在连接字符串中的第一个整数时忽略任何空格（如果有的话）。它将指针设置到第一个既不是数字也不是空格的字符之后的位置，并将所有数字从那里连接到字符串的开头：

```
// move pointer to position after last character to be processed
while( (*firstArray >= L'0' && *firstArray <= L'9')* ||
        *firstArray == L' ')
  firstArray++;

// process all digits until start of string is reached
while(firstArray > strArray) {
  firstArray--;
  if(*firstArray >= L'0' && *firstArray <= L'9') {
    retVal += (*firstArray - L'0') * pow;
    pow*=10;
  }
} 
```

（免责声明：我没有测试此代码，因此使用风险自负）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:50:51.407

这个循环是错误的

```
while(*firstArray != L'\0')
{
    firstArray++;
    if(*firstArray == L' ')continue;
    count++;
} 
```

因为你在测试之前递增，所以不会找到字符串开头的空格。我想你的意思是这个

```
while(*firstArray != L'\0')
{
    if(*firstArray++ == L' ')continue;
    count++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:46:21.273

为什么不直接使用 wstringstream？

```
wifstream in(...);
wstringstream ss;

wchar_t ch;
in >> ch;
while (in)
{
    if (ch != L' ')
        ss << ch;

    in >> ch;
}

long number;
ss >> number; 
```

至于文件的问题，可能是文件的编码不是Unicode。尝试使用文本编辑器打开文件并告诉它以 Unicode 格式存储文件。

# ios - GET 请求 iOS 中的 POST 数据

> ID：13010519
> 
> 赞同：0
> 
> 时间：2012-10-22T11:29:00.783
> 
> 标签：ios, rest, asihttprequest

有没有办法使用 ASIHTTPRequest 或 iOS 中的任何其他网络库在 GET 请求中发送 POST 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:37:47.047

Adding POST data to a GET request doesn't really make that much sense - some proxies won't like it and some webservers won't accept it or will mangle the data on the way in. however, I guess there's a few places to start if you're confident it will work with your server :

Searching for the word POST in the [ASI docs](http://allseeing-i.com/ASIHTTPRequest/How-to-use) will show you how using the `ASIHTTPRequest` object. However, ASI is deprecated and other solutions should be used.

Searching stack overflow gives you [this question](https://stackoverflow.com/questions/6148900/append-data-to-a-post-nsurlrequest) which shows you how to add POST data to `NSURLRequest`

# .net - 在 c# .net 中调用存储过程

> ID：13010523
> 
> 赞同：0
> 
> 时间：2012-10-22T11:29:07.437
> 
> 标签：.net, int

我编写了一个存储过程并在查询中执行，在 MSSQL Server 上没有任何问题：

```
 USE [DivaReportTest]
GO

DECLARE @return_value int

EXEC    @return_value = [dbo].[PR_DAILY]
        @Start = N'2012-10-16 01:00:00.000',
        @Finish = N'2012-10-18 01:00:00.000',
        @TimeRange = 1

SELECT  'Return Value' = @return_value

GO 
```

在 .NET 中调用此过程：

```
private DataSet GetPR_DAILY(DateTime StartTime, DateTime FinishTime, int TimeRange)
        {
            DataSet ds = new DataSet();
            SqlCommand cmd = new SqlCommand("PR_DAILY", connection);
            cmd.CommandType = CommandType.StoredProcedure;

            cmd.Parameters.AddWithValue("@Start", SqlDbType.DateTime).Value = StartTime;
            cmd.Parameters.AddWithValue("@Finish", SqlDbType.DateTime).Value = FinishTime;
            cmd.Parameters.AddWithValue("@TimeRange", SqlDbType.Int).Value = TimeRange;

            da = new SqlDataAdapter();
            da.SelectCommand = cmd;
            da.Fill(ds);
            return ds;
        } 
```

这可能是 SqlDbType.Int 中的问题，因为它只返回一行 int 这个函数，但是当我在查询中执行时它返回 3 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:32:33.447

您通过 UI 传递的日期格式似乎具有不同的格式。您能否通过 SQL 探查器调试您的？

# cocos2d-iphone - Cocos2d第二次播放动画导致崩溃

> ID：13010524
> 
> 赞同：0
> 
> 时间：2012-10-22T11:29:08.227
> 
> 标签：cocos2d-iphone

我使用 cocos2d 2.0，观察到精灵动画切换时崩溃。这是代码

```
@interface PPActor : CCSprite
{
    CCRepeatForever *pirateIdleAnim;
    CCSequence      *mPirateDashAnim;
    CCRepeatForever *mPirateRocketAnim;

} 
```

//情况一：玩第二次就崩溃了

```
-(void)loadAnim
{

   CCAnimate *AnimActions  = [CCAnimate actionWithAnimation:animation];
   id calFun = [CCCallFunc actionWithTarget:self selector:@selector(dashAnimDone)];                                        
   mPirateDashAnim = [CCSequence actions:AnimActions, calFun, nil];
   mPirateDashAnim.tag = kTagDashAnim;
}

-(void)runDashAnim
{
       [self stopActionByTag: kTagDashAnim];
       [self runAction:mPirateDashAnim];
} 
```

//案例2：没有crash，但是显示内存泄漏...（使用retain）

```
-(void)loadAnim
{

   CCAnimate *AnimActions  = [CCAnimate actionWithAnimation:animation];
   id calFun = [CCCallFunc actionWithTarget:self selector:@selector(dashAnimDone)];                                     
   mPirateDashAnim = [[CCSequence actions:AnimActions, calFun, nil] retain];
   mPirateDashAnim.tag = kTagDashAnim;
}

-(void)runDashAnim
{
       [self stopActionByTag: kTagDashAnim];
       [self runAction:mPirateDashAnim];
} 
```

//案例3：再次观察到崩溃

```
-(void)loadAnim
{

   CCAnimate *AnimActions  = [CCAnimate actionWithAnimation:animation];
   id calFun = [CCCallFunc actionWithTarget:self selector:@selector(dashAnimDone)];                                     
   mPirateDashAnim = [CCSequence actions:AnimActions, calFun, nil];
   mPirateDashAnim.tag = kTagDashAnim;
}

-(void)runDashAnim
{
       [self stopActionByTag: kTagDashAnim];
       [self runAction:[mPirateDashAnim copy]];
} 
```

如何克服这种崩溃和内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:41:02.037

你总是在 runDashAnim 之前调用 loadAnim 吗？因为动作是一次性的对象。当动作完成时，它会释放自己。您必须再次创建操作。

请不要遵循建议保留操作的上述“最佳实践”。这是不好的做法，因为除非您知道操作的内部行为（即代码），否则存在造成内存泄漏或崩溃的风险，因为并非所有操作都可以以这种方式重用。

# algorithm - 一组 [low, high] 值对的加权随机

> ID：13010525
> 
> 赞同：1
> 
> 时间：2012-10-22T11:29:10.130
> 
> 标签：algorithm, random, weighted

我有一个 {keyword: [low, high], keyword1: [low1, high1], keyword2: [low2, high2] ... } 的列表，我想在它上面运行一个加权随机算法来选择一个关键字每一个请求。无论如何，直接的算法会扭曲结果吗？

谢谢，拉贾。

# streaming - 通过 MP4 直播

> ID：13010530
> 
> 赞同：36
> 
> 时间：2012-10-22T11:29:32.733
> 
> 标签：streaming, h.264, mp4, mpeg, mpeg-4

我正在开发在线电视服务。目标之一是在没有任何其他浏览器插件（Flash 除外）的情况下播放视频。

我决定使用 MP4，因为大多数 HTML5 浏览器和 Flash（作为后备）都支持它。这些视频由 FFMpeg 在服务器上从 ASF 转码。

但是，我发现 MP4 不能实时流式传输，因为它有一个 moov atom 用于必须指定长度的元数据。FFMpeg 不能直接将 mp4 流式传输到标准输出，因为它将 moov 放在文件末尾。（[MP4 的实时转码和流式传输在 Android 中有效，但在 Flash 播放器中失败并出现 NetStream.Play.FileStructureInvalid 错误](https://stackoverflow.com/questions/11616979/live-transcoding-and-streaming-of-mp4-works-in-android-but-fails-in-flash-player)）

当然，MPEG-TS 是存在的，但它不受 HTML5 支持`<video>`。

我想到的是一种将流实时转码为 MP4 的方法，并且在每个新的 HTTP 请求上，首先发送一个 moov 指定一个非常长的视频长度数字，然后开始发送其余的MP4 文件。

是否可以以这种方式使用 MP4 进行流式传输？

经过一些研究和av501的回答，我明白必须知道框架的大小才能工作。

可以将 mp4 文件分割成更小的部分以便进行流式传输吗？

当然，切换到另一种容器/格式是一种选择，但与 Flash 和 HTML5 兼容的唯一格式是 mp4/h264，所以如果我必须同时支持两者，我必须转码两次。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-28T08:37:18.620

您可以使用分段的 MP4。一个分段的 MP4 文件构建如下：

```
moov [moof mdat]+ 
```

然后 moov 框仅包含有关轨道的基本信息（有多少、它们的类型、编解码器初始化等），但不包含有关轨道中样本的信息。关于样本位置和样本大小的信息在 moof 框中，每个 moof 框后面都有一个 mdat，其中包含前面 moof 框中所述的样本。通常人们会选择 (moof, mdat)-pair 的长度在 2,4 或 8 秒左右（没有关于此的规范，但这些值对于大多数用例来说似乎是合理的）。

这是一种构建永无止境的 MP4 流的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T19:42:56.390

这是我的想法，伙计们，其中一些可能在其他人的路上是正确的。我恳求无知，因为没有人真正完整地记录了这个过程，这都是有根据的猜测。

AvAssetWriter 仅编码为文件，似乎没有办法将编码的视频存储到内存中。在从后台线程写入文件时读取文件以说套接字会产生一个基本流，这本质上是一个 m4v，它是一个带有 h264/acc mdata 的容器，但没有 moov 原子。（换句话说，没有标题）没有苹果提供的播放器可以播放此流，但基于 ffplay 的修改后的播放器应该能够解码和播放流。这应该可行，因为 ffplay 使用可以解码基本流的 libavformat，一个警告，因为没有文件长度信息，有些事情必须由播放、DTS 和 PTS 确定，而且播放器也无法在文件中查找。

或者，m4v 流中的原始 naul 可用于构建 rtmp 流。

如果您想进一步讨论，您可以直接与我联系。

你如何获得数据。

由于无论如何你都必须在接收端重建文件，我想你可以对它进行分段，Steve Mcfarin 写了一个小 appleSegmentedEcorder 你可以在他的 github 页面上找到，这解决了 moov atom 的一些问题，因为你拥有所有文件信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T09:11:14.970

不，这不仅仅是很长的长度..您需要知道每一帧的确切大小才能在 mp4 中创建标题。[这就是为什么它最终由各种编码器创建的原因]。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:00:00.463

只看问题的第二段（“视频是由 ffmpeg 在服务器上从 ASF 转码的。”），您提到您正在使用 ffmpeg 对服务器上的视频进行转码。

使用 qt-faststart 或 MP4Box 将 MOOV atom 放在文件的开头。（您还要确保使用 H264 视频和 AAC 音频编解码器来获得普遍支持）

希望这对您有所帮助。

# c - 在C中留下一个无限的while循环

> ID：13010531
> 
> 赞同：4
> 
> 时间：2012-10-22T11:29:33.570
> 
> 标签：c, while-loop

我有一个不断从我的串口读取的循环。循环是无限的，所以我知道停止程序的唯一方法是使用`Ctrl+C`. 这个解决方案的问题是，我怀疑它也会导致其他问题，当我使用 时`Ctrl+C`，我的程序会突然结束。在程序结束时，我关闭了与我正在访问的串行端口的文件描述符的连接，但我认为我的程序永远不会到达那个位置，因为我使用了该`Ctrl+C`命令，这只是将程序准确地停止在它所在的位置.

有没有办法让我创建无限的while循环，并在我想要的时候退出，但同时保持执行它下面的代码的能力？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T11:38:04.457

试试这个，看看会发生什么：

```
#include <unistd.h>
#include <stdio.h>
#include <signal.h>

volatile sig_atomic_t stop;

void
inthand(int signum)
{
    stop = 1;
}

int
main(int argc, char **argv)
{
    signal(SIGINT, inthand);

    while (!stop)
        pause();
    printf("exiting safely\n");

    return 0;
} 
```

Ctrl-C 向您的进程发送一个信号 (SIGINT)。进程的默认操作是在收到信号时退出，但您可以改为捕获信号并优雅地处理它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T11:37:00.917

你可以这样做：

```
sig_atomic_t volatile g_running = TRUE;

void sig_handler(int signum)
{
  if (signum == SIGINT)
    g_running = FALSE;
}

int main()
{
  signal(SIGINT, &sig_handler);
  while (g_running)
  {
    //your code
  }
  //cleanup code
} 
```

这将捕获`SIGINT`通过按 CTRL-C 生成的信号并通过设置`g_running`为来中断循环`FALSE`。然后执行您的清理代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:34:08.770

使用控制 while 循环的变量，例如`while(running)`. 只需将此变量异步设置为 false 即可退出循环。

例子：

```
volatile int running = 1;
while(running) {
    /* Your code */
} 
```

所以另一个代码，比如说一个回调函数，就是这样做的

```
running = 0; 
```

您可以将此回调设置为拦截 SIG_TERM（默认为 Ctrl-C）或您选择的任何信号（不发送到进程的 SIG_KILL 除外）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:34:23.153

而不是无限的while循环，创建一个while循环来监听/读取特定文件中的布尔值。您可以编辑文件以退出循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T11:34:26.830

使用 ctrl + C 实际上会中断您的程序。为了避免这种情况

1）使用变量并在每次循环迭代中检查其状态。

```
int  shouldExit  = 0;

----
----
---
while (your_condition){
  if(shouldExit == 1) {
     break;
  }

  // Your loop logic here
} 
```

然后异步设置变量

```
shouldExit = 1 
```

当你想退出时。

# php - php邮件表单发送虚假邮件

> ID：13010532
> 
> 赞同：1
> 
> 时间：2012-10-22T11:29:34.310
> 
> 标签：php, forms, email

我是 php 新手，我有一个表格需要获取信息并通过邮件发送给我。问题是有时我收到的电子邮件只包含一个 IP 地址而没有其他内容。我尝试按下“发送”而不在字段中输入任何内容，我收到一封电子邮件，其中包含除问题答案之外的所有其他内容，因此看起来并非如此。我的问题是为什么我会收到只包含 IP 地址的电子邮件？谢谢！

```
<?php
    $to = "mail@gmail.com";
    $subject = "energiebio contact form: {$_POST['ams']['Destination']} ";
    $from = $_POST['ams']['E-mail'];
    $valid=1;
    $message ='';

    foreach ($_POST['mas'] as $k=>$v){
        if (trim($v)=='')$valid=0;
        $k = str_replace('_',' ',$k);
        $message .="$k : $v<br>";
    }

    $message .="<hr />IP: {$_SERVER['REMOTE_ADDR']}";

    function sndmail($from,$to,$subject,$message){
        $headers = "MIME-Version: 1.0\r\n";
        $headers .= "Content-type: text/html; charset=iso-8859-1\r\n";
        $headers .= "From:".$from ."\r\n";
        mail($to, $subject, $message, $headers);
    }

    if ($valid=='1') {
        sndmail($from,$to,$subject,$message);
        header( 'Location: http://site.ro/danke.html' ) ;
    }else header( 'Location: http://site.ro/error.html' ) ;
?> 
```

我发现它是同一个 IP，而且我无法在其上获得相同的“whois”：92.85.174.105

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:08:24.403

我会说一些东西，例如谷歌机器人或垃圾邮件机器人，在不使用您的表单的情况下点击您的电子邮件脚本。如果你有这样的 HTML：

```
<form action="postmail.php">
<!-- stuff --> 
```

a script can just hit your "postmail.php" without using the send button. Then body content would be empty, and you'd get an empty email containing nothing but the senders ip.

# flash - AS2 - 如何拆分一串文本以生成函数和变量

> ID：13010542
> 
> 赞同：0
> 
> 时间：2012-10-22T11:30:14.333
> 
> 标签：flash, actionscript, actionscript-2

好的，所以我有一个正在为 Flash 游戏开发的调试系统，并且我有一个 Switch(case) 块，这就是我目前所拥有的。

```
switch (fstring){

case "player.getname":
var pname = _global.heroVars.playerName;
target.feedback.text +=  (ct + pname + "\r\n");
target.inputt.text = "";
break;

case "player.getlevel":
var plevel = _global.heroVars.userLevel;
target.feedback.text += (ct + plevel + "\r\n");
target.inputt.text = "";
break;

default:
target.feedback.text += (ct + "\"" + inp + "\"" + " is not a valid function\r\n");
target.inputt.text = "";
} 
```

我的问题是如何制作一个这样的“设置”功能。例如
“player.setlevel NUMBERHERE”或“player.setname STRINGHERE”等。并取字符串的第二部分并使用所述数字或字符串来设置变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:15:01.157

了解如何做到这一点。

以这个字符串“ **_player.addlevels 2** ”的例子作为 var **inputFunc**

```
var mystring:String = inputFunc; // sets it to a new var to not mess up the original
var sepString:Array = mystring.split(" "); // splits "_player.addlevels" and "2"
var func:String = sepString[0]; // sets this string to "_player.addlevels"
var inputVar:String = sepString[1]; // sets this string to "2" which can be anything and cast into another var type

switch(func){ // takes our variable with the string "_player.addlevels"
    case "_player.addlevels":
        _global.playerLevel += int(inputVar); //since they are using this function we know that they are using and integer and thus cast the string to an int
    break;
} 
```

不知道我以前怎么没有看到它，但我最终解决了自己的问题。如果有人好奇，那就有答案了

# c++ - 排列组合生成算法

> ID：13010543
> 
> 赞同：0
> 
> 时间：2012-10-22T11:30:17.173
> 
> 标签：c++, algorithm, set, permutation, combinations

我想写下一个算法来打印给定“<>”对的所有可能组合，我试图开发一种算法来解决这个问题，但我认为这是不正确的，因为我确实意识到这个问题是相关的到排列 [nPr] 假设给定输入 5 它应该创建 120 个组合（5P5=120），但我的代码只生成 81 个。

`In my code have tried to generate all possible combinations by placing every element at every place one by one, but now I am little confused about how correct this approach is?`

事情很可能无法掌握“制作子集/组合/排列”的真正概念（尽管理论上我知道它们是什么以及如何计算它们）

我不是在寻找一个完整的最终“勺子代码”，而是可以解释我“我应该做什么”的东西，我可以从中提取步骤，理解概念并开发自己的。

`If possible something extending or tweaking my current coding to achieve the right result would be easier for me to understand.`

```
void permute()
{
    string str=”&lt;><><>”;
    char buck=' ';
for(int a=0;a<str.length()-1;a++)
    {
        for(int b=0;b<str.length()-1;b++){
            cout<<str<<endl;
            buck=str[b];
            str[b]=str[b+1];
            str[b+1]=buck;
        }
    }
} 
```

我一直在努力了解我应该做什么，但我仍在努力，任何帮助或指导都会非常有帮助。谢谢

* * *

`From 'all combinations' i mean printing out all the possible ways given set of characters can be arranged, lets say for 2 pairs '<><>' it should be like: <><>,><<>,><<>,><><,<<>>,>><< ... ... ...`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T23:48:49.420

根据我的测试，它有 42 个解决方案：

```
 function placeBrackets(n)
    {
        var placeBracketsRecur = function(prefix, remainingOpen, remainingClosed)
        {
            if(remainingClosed == 0)
            {
                document.write(prefix + "<br/>");
                return;
            }

            if(remainingOpen > 0)
            {
                placeBracketsRecur(prefix + "(",  remainingOpen - 1, remainingClosed);
            }

            if(remainingOpen < remainingClosed)
            {
                placeBracketsRecur(prefix + ")",  remainingOpen, remainingClosed - 1);
            }
        }

        placeBracketsRecur("", n, n);
    } 
```

///输出

```
((((()))))
(((()())))
(((())()))
(((()))())
(((())))()
((()(())))
((()()()))
((()())())
((()()))()
((())(()))
((())()())
((())())()
((()))(())
((()))()()
(()((())))
(()(()()))
(()(())())
(()(()))()
(()()(()))
(()()()())
(()()())()
(()())(())
(()())()()
(())((()))
(())(()())
(())(())()
(())()(())
(())()()()
()(((())))
()((()()))
()((())())
()((()))()
()(()(()))
()(()()())
()(()())()
()(())(())
()(())()()
()()((()))
()()(()())
()()(())()
()()()(())
()()()()() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:58:27.453

C++ 规定`bool std::next_permutation(Iterator first, Iterator last)`将 (first, last) 的内容修改为序列中的下一个排列，如果有更多排列则返回 true，如果这是最后一个排列则返回 false。列表需要首先排序（使用`std::sort(Iterator first, Iterator last)`），排序后的列表形成第一个排列。

`str.begin()`您可以使用和与这些算法进行交互`str.end()`。

**注意：**由于您的数据集包含重复项，因此并非所有排列都是可能的（有些可能与其他条目重复）。那是：

```
string : permutations
-------:-------------
abcd   : 24
<><>   : 6
abcdef : 720
<><><> : 20 
```

如果你真的想要所有排列（包括重复），你可以有一个数组，你可以在上面运行`int indices = { 0, 1, 2, 3, 4, 5 };`排列，然后为每个排列打印。`str[indices[0]]``str[indices[5]]`

这可以让您深入了解您的算法以及出了什么问题。也就是说，它可以作为比较您的算法的参考。

# php - 将一个结果集与另一个表 zf2 连接

> ID：13010545
> 
> 赞同：0
> 
> 时间：2012-10-22T11:30:31.890
> 
> 标签：php, zend-db, zend-framework2

我做了以下功能，它工作正常。

```
public function getLatestCurrencyRates(){
        $sql = new Sql($this->adapter);

        $subselect2 = $sql->select();
        $subselect2->from(array('r1' =>'currency_rates'))
                    ->columns(array('max_c_rate_id' => new Expression('MAX(c_rate_id)')))
                    ->group("currency_id");

        $statement = $sql->prepareStatementForSqlObject($subselect2);
        $result = $statement->execute();
        $rows = array_values(iterator_to_array($result));
        return $rows;
    } 
```

我将使用同一张表加入上面的 select 语句。谁能建议如何做到这一点？我目前的实现如下。其实还没有完成。因为缺乏实施它的知识。

```
public function getLatestCurrencyRates(){
        $sql = new Sql($this->adapter);

        $subselect2 = $sql->select();
        $subselect2->from(array('r1' =>'currency_rates'))
                    ->columns(array('max_c_rate_id' => new Expression('MAX(c_rate_id)')))
                    ->group("currency_id");

        $subselect3 = $sql->select();
        $subselect3->from("currency_rates")
                    ->join(array('r2'=>$subselect2), 'r2.max_c_rate_id = currency_rates.c_rate_id', array('c_rate_id', 'currency_id', 'buy_rate', 'sell_rate'));

        $statement = $sql->prepareStatementForSqlObject($subselect3);
        $result = $statement->execute();
        $rows = array_values(iterator_to_array($result));
        return $rows;
    } 
```

我将在这里实现的 SQL 查询如下。

```
 select r1.c_rate_id, r2.currency_id, r2.buy_rate, r2.sell_rate 
 from 
 (select max(c_rate_id)as c_rate_id from currency_rates group by currency_id) as r1
 inner join 
 currency_rates as r2
 on 
 r1.c_rate_id = r2.c_rate_id; 
```

任何人都可以提供良好的反馈，会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:28:38.000

最后我做到了。

```
public function getLatestCurrencyRates(){
        $sql = new Sql($this->adapter);

        $subselect2 = $sql->select();
        $subselect2->from(array('r1' =>'currency_rates'))
                    ->columns(array('max_c_rate_id' => new Expression('MAX(c_rate_id)')))
                    ->group("currency_id");

        $subselect3 = $sql->select();
        $subselect3->from(array('r2' => $subselect2))
                    ->join("currency_rates", 'max_c_rate_id = currency_rates.c_rate_id', array('c_rate_id', 'currency_id', 'buy_rate', 'sell_rate'));    

        $statement = $sql->prepareStatementForSqlObject($subselect3);
        $result = $statement->execute();
        $rows = array_values(iterator_to_array($result));
        return $rows;
    } 
```

我已经像这样传递了 $select->from() 的关联数组；

```
$subselect3->from(array('r2' => $subselect2))
                    ->join("currency_rates", 'max_c_rate_id = currency_rates.c_rate_id', array('c_rate_id', 'currency_id', 'buy_rate', 'sell_rate')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:57:45.533

ZF2 `Zend\Db\Sql\Select`- 在我写这篇文章的那一刻 - 缺乏对`$select->join()`. 您只能在`$select->columns()`&中使用它们`$select->where()`（带有表达式）。

**编辑**：

只是`$select->join()`缺少子查询的支持，`$select->from()`接受它。这意味着整个子查询现在被引用为标识符 - 可能它会在某些 2.0.* 版本中得到修复。

# java - OutOfMemoryError 读取一个巨大的 ZipFile

> ID：13010546
> 
> 赞同：2
> 
> 时间：2012-10-22T11:30:32.807
> 
> 标签：java, android, zip, out-of-memory, zipfile

我正在尝试使用`java.util.zip`API 在 Android 中打开一个大（大约 1 GiB）的 zip 文件并收到以下错误：

```
java.lang.OutOfMemoryError
at java.util.HashMap.makeTable(HashMap.java:555)
at java.util.HashMap.doubleCapacity(HashMap.java:575)
at java.util.HashMap.put(HashMap.java:405)
at java.util.zip.ZipFile.readCentralDir(ZipFile.java:366)
at java.util.zip.ZipFile.<init>(ZipFile.java:132)
at java.util.zip.ZipFile.<init>(ZipFile.java:103)
at com.foo.bar.zip.archive.ZipArchive.<init>(ZipArchive.java:44) 
```

我完全理解文件的大小大大超出了内存限制，但是有什么解决方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T11:34:26.550

我怀疑问题不在于文件的大小，而是在缓存 Zip 表条目时失败的条目数。

您自己的选择是；

*   分解 Zip，使其中没有太多文件。
*   获得更多内存
*   编写自己的库来阅读 ZIP。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T11:37:14.463

Do you need to be able to extract particular entries from the zip file by name, or can you just read through the whole file once from top to bottom? If the latter you could try using `ZipInputStream` rather than `ZipFile`, as that doesn't need to parse the central directory up front - you can read one entry, do something with it, discard it, read the next entry, ...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T11:35:40.480

Java 类`ZipFile`不能`ZipEntry`包含超过 613 MB 内存的任何内容。

最好按照您自己的建议实施某种批处理。例如，您可以将每个 ZIP 条目的解压缩大小相加，并在每次总大小超过 100 MB 时上传文件。

看看：[http ://truezip.java.net/](http://truezip.java.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:33:21.480

您可以尝试以字节数组读取文件并对其进行部分处理。仍然取决于您要对文件做什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T11:39:30.963

请参阅下面的链接以下载和解压缩 zip 文件，它将解决您的问题。

下载 Zip 文件：-

[下载压缩文件](http://www.java-samples.com/showtutorial.php?tutorialid=1521)

对于提取 Zip 文件：-

[提取压缩文件](http://www.jondev.net/articles/Unzipping_Files_with_Android_%28Programmatically%29)

并且 zip 文件仅使用 winrar 软件制作，否则这会给您带来错误。

# python - 从二进制文件中读取 2 的补码（32 位整数）

> ID：13010551
> 
> 赞同：1
> 
> 时间：2012-10-22T11:31:28.907
> 
> 标签：python, windows, struct, python-3.x, binary

好的，首先，大家好 :) 我正在运行 Python 3.2 x86 @ windows

所以我有一个具有以下结构的二进制文件（6 412字节）：

```
header: 256 bytes
maxZ: 4 bytes (1 32-bit word)
Zvalues: 2048 bytes (512 32-bit words)
maxX: *same as maxZ*
Xvalues: *same as Zvalues*
maxY: *same as maxZ*
Yvalues: *same as Zvalues* 
```

我知道（由于格式规范）数字存储为 32 位整数，写为 2 的补码

假设我不需要读取标题，这就是我要做的（我有 1539 个 4 字节样本要读取）：

```
import struct
file = open('C:/02.adb', 'rb')
file.seek(256)
fmt = '<i'
nbytes = 4
for i in range(1539):
    packed_data = file.read(nbytes)
    unpacked_data = struct.unpack(fmt, packed_data)
    print('Sample: ',i,'Value: ',unpacked_data[0])
file.close() 
```

它读取文件并将其内容打印到标准输出，但标志有问题。我想我不是在这里读数字作为 2 的补码......我该如何改进脚本？

tnx 引起注意

补充（23.10.12）：

我意识到，通过编写一个更大的外部脚本的简短版本，我刚刚解决了主要问题本身——我自己的无意识。

可以从文件头读取的样本数不是存储在其中的确切样本总数，而是 ZXY 值组合的数量，不包括存储在每个通道数据块的第一个字中的那些最大幅度。

这是脚本的最终简短版本及其输出（是的，有符号整数的 python 表示是“2 的补码”）：

```
import struct
file = open('C:/02.adb', 'rb')
file.seek(256)
transfer_ratio = 31446.540881
fmt = '<i'
nbytes = 4
samples = []
for i in range(1539):
    packed_data = file.read(nbytes)
    unpacked_data = struct.unpack(fmt, packed_data)
    samples.append(int(unpacked_data[0])/transfer_ratio)
for i in range(32):
    print('Ch1_val: ',samples[i+1],' Ch2_val: ',samples[i+1+513],' Ch3_val: ',samples[i+1+(513*2)])
file.close() 
```

输出：

```
Ch1_val:  42.20127119933322  Ch2_val:  36.47237399942374  Ch3_val:  -3.4996535999447054
Ch1_val:  41.37017819934635  Ch2_val:  36.64441199942102  Ch3_val:  -4.35822179993114
Ch1_val:  42.43585979932951  Ch2_val:  34.9874729994472  Ch3_val:  -4.125827399934812
Ch1_val:  44.08278179930349  Ch2_val:  34.42912859945602  Ch3_val:  -4.1604257999342655
Ch1_val:  44.50289159929685  Ch2_val:  35.507053199438985  Ch3_val:  -3.092836199951133
Ch1_val:  43.69110119930968  Ch2_val:  35.53335179943857  Ch3_val:  -2.613991799958699
Ch1_val:  42.73662419932476  Ch2_val:  34.1708807994601  Ch3_val:  -5.254886399916972
Ch1_val:  42.14097839933417  Ch2_val:  34.08460739946146  Ch3_val:  -8.582724599864394
Ch1_val:  41.982105599336684  Ch2_val:  35.58544019943775  Ch3_val:  -8.84688719986022
Ch1_val:  42.503816399328436  Ch2_val:  36.06170879943022  Ch3_val:  -6.777056999892922
Ch1_val:  43.17568679931782  Ch2_val:  35.291926199442386  Ch3_val:  -4.984618199921243
Ch1_val:  42.4303583993296  Ch2_val:  36.03750899943061  Ch3_val:  -4.502275799928864
Ch1_val:  39.92264219936922  Ch2_val:  38.354075399394006  Ch3_val:  -6.050744999904398
Ch1_val:  37.65501599940505  Ch2_val:  38.48181599939198  Ch3_val:  -9.010943399857627
Ch1_val:  37.04642759941466  Ch2_val:  35.152642199444585  Ch3_val:  -9.89107199984372
Ch1_val:  36.571876199422164  Ch2_val:  32.21988719949093  Ch3_val:  -7.850465999875962
Ch1_val:  34.488403799455085  Ch2_val:  32.62164839948458  Ch3_val:  -7.712485799878142
Ch1_val:  32.00259779949436  Ch2_val:  34.05570119946192  Ch3_val:  -11.215064999822802
Ch1_val:  31.132422599508107  Ch2_val:  33.44755799947153  Ch3_val:  -12.461179799803112
Ch1_val:  31.245853199506314  Ch2_val:  31.730771399498654  Ch3_val:  -8.723057999862176
Ch1_val:  30.40820939951955  Ch2_val:  31.03355639950967  Ch3_val:  -6.433076399898357
Ch1_val:  28.474165199550107  Ch2_val:  30.714824999514704  Ch3_val:  -9.730672799846255
Ch1_val:  26.481449999581592  Ch2_val:  29.53720739953331  Ch3_val:  -13.227496199791005
Ch1_val:  24.79611359960822  Ch2_val:  28.60448159954805  Ch3_val:  -12.1075955998087
Ch1_val:  23.74938479962476  Ch2_val:  28.95253259954255  Ch3_val:  -9.411305399851301
Ch1_val:  23.92663799962196  Ch2_val:  29.24305739953796  Ch3_val:  -8.856490799860067
Ch1_val:  24.37285559961491  Ch2_val:  28.72398599954616  Ch3_val:  -9.611549999848137
Ch1_val:  23.155774199634138  Ch2_val:  29.22521759953824  Ch3_val:  -10.701304199830918
Ch1_val:  20.822671799671003  Ch2_val:  31.46641799950283  Ch3_val:  -12.57088979980138
Ch1_val:  20.15302739968158  Ch2_val:  32.95071479947938  Ch3_val:  -13.581175799785417
Ch1_val:  21.440195999661245  Ch2_val:  32.28628559948987  Ch3_val:  -11.66643419981567
Ch1_val:  21.51502139966006  Ch2_val:  31.7910959994977  Ch3_val:  -8.843802599860268 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:11:45.797

我相当确定 Python 使用[二进制补码表示](http://en.wikipedia.org/wiki/Two%27s_complement)有符号整数。一个常见的问题是[字节顺序](http://en.wikipedia.org/wiki/Endianness)。规范应该提到数字是小端还是大端。`<i`在 Python 中，您可以使用和加载`>i`。

# sql - 如何在不同状态下为一个字段获得三个功能

> ID：13010552
> 
> 赞同：-2
> 
> 时间：2012-10-22T11:31:29.047
> 
> 标签：sql

我有一张`product`桌子，我想得到不同状态的数量总和

这是我的桌子...

```
kind|  qty  
1   |  150
8   |  122
1   |  177
3   |  60
8   |  66
... 
```

我怎样才能得到这个声明

```
select sum(qty) when kind=1, sum(qty) when kind=8, sum(qty) when kind=3, 
sum1+sum2-sum3 from mytable 
```

我想在我的 sql 中从此语句中获取 calc 字段的最后一行

```
sum1+sum2-sum3 from mytable 
```

结果将是

```
sum1 , sum2, sum3, calc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:34:46.190

```
SELECT  kind1, kind8, kind3, (kind1 + kind8 - kind3) totalResult
FROM
(
    SELECT  SUM(CASE WHEN kind = 1 THEN qty ELSE 0 END) kind1,
            SUM(CASE WHEN kind = 8 THEN qty ELSE 0 END) kind8,
            SUM(CASE WHEN kind = 3 THEN qty ELSE 0 END) kind3
    FROM tableName
) x 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/41dbc/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:34:19.217

```
select
    sum(case when kind in (1) then qty else 0 end) as sum1,
    sum(case when kind in (8) then qty else 0 end) as sum2,
    sum(case when kind in (3) then qty else 0 end) as sum3,
    sum(case when kind in (1, 8) then qty else -qty end) as calc
from mytable
where kind in (1, 3, 8) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:35:53.140

你可以这样做：

```
SELECT 
sum(CASE kind WHEN 1 THEN qty ELSE 0 END) kind1, 
sum(CASE kind WHEN 0 THEN qty ELSE 0 END) kind8, 
sum(CASE kind WHEN 3 THEN qty ELSE 0 END) kind3, 
sum(CASE kind WHEN 1 THEN qty ELSE 0 END) 
+ sum(CASE kind WHEN 0 THEN qty ELSE 0 END) 
+ sum(CASE kind WHEN 3 THEN qty ELSE 0 END) Total, 
FROM 
    mytable 
```

# jquery - jQuery if li a hasClass

> ID：13010553
> 
> 赞同：2
> 
> 时间：2012-10-22T11:31:39.300
> 
> 标签：jquery

我有一个显示/隐藏菜单。效果很好。但默认情况下，菜单是关闭的，在导航到页面之前这也很好。

当页面导航到使用“活动”类构建的锚点时，我想要检查菜单是否存在“活动”并基于此显示该块。所以至少有一个菜单总是打开的。

我当前的 jQuery 如下：

```
 $('.sub_menu').hide();
$('.clickable').toggle(function(){
    $(this).next('ul').slideToggle();
    $(this).css('background-position','0px -12px');
}, function()
{
    $(this).next('ul').slideToggle();
    $(this).css('background-position','0px 5px');       
});

if ($('ul.sub_menu li a').hasClass('active')) {
    $(this).css('display','block');
} 
```

我也做了一个[jsFiddle](http://jsfiddle.net/Gs2vS/)

所以我的目标是ul.sub_menu li a = active，如果它显示sub_menu。

但没有任何运气。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:44:09.477

```
$('.sub_menu').hide();
$('.clickable').toggle(function(){
    $(this).next('ul').slideToggle();
    $(this).css('background-position','0px -12px');
}, function()
{
    $(this).next('ul').slideToggle();
    $(this).css('background-position','0px 5px');        
});

if ($('ul.sub_menu li a').hasClass('active')) {

    $('.sub_menu').css('display','block');
} 
```

仅当只有一个 sub_menu..else 您可以使用时才有效`$(this).parent().parent().css()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T11:48:45.753

只需`display:none`从您的中删除，`ul.sub_menu`您就可以做一个简单的

```
$('ul.sub_menu li a:not(.active)').css('display', 'none'); 
```

[**演示**](http://jsfiddle.net/Gs2vS/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T12:07:45.423

最简单的方法是检查 ul.sub_menu 是否包含 a.active。如果是这样，则设置 display: block。这可以通过以下代码完成。

```
$('.sub_menu').hide();
$('.clickable').toggle(function (){
    $(this).next('ul').slideToggle();
    $(this).css('background-position', '0px -12px');
}, function (){
        $(this).next('ul').slideToggle();
        $(this).css('background-position', '0px 5px');
});

$('ul.sub_menu').has('a.active').css('display', 'block'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T11:45:26.330

如果其中一个孩子的课程处于活动状态，您需要显示该列表。

```
$('ul.sub_menu li a.active').parents('ul').show(); // This would replace your if statement 
```

该代码执行以下操作： 1\. 选择所有类活动的链接。2\. 找到链接是子元素的列表元素。3\. 显示列表。

一个完整的例子：[演示](http://jsfiddle.net/h8TNw/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T11:39:30.803

请注意，`this`最后一个`if`块中的 the 并不是您认为它所指的内容。此外，为了显示列表项和链接，您还需要显示包含`ul`. [试试这个](http://jsfiddle.net/sveinatle/Gs2vS/1/)：

```
$('.sub_menu').hide();
$('.clickable').toggle(function(){
    $(this).next('ul').slideToggle();
    $(this).css('background-position','0px -12px');
}, function() {
    $(this).next('ul').slideToggle();
    $(this).css('background-position','0px 5px');        
});

$('.active').css('display','block'); 
```

并且，请确保您也将其设置`ul`为`active`。

* * *

顺便说一句，如果您不想在 上管理`active`班级，请`ul`添加此内容以自动显示任何`.sub_menu`包含以下内容的孩子`.active`：

```
$('.active').closest('.sub_menu').css('display','block'); 
```

[更新了小提琴。](http://jsfiddle.net/sveinatle/Gs2vS/6/)

# javascript - Javascript 引用的值未更新？

> ID：13010554
> 
> 赞同：3
> 
> 时间：2012-10-22T11:31:52.427
> 
> 标签：javascript, node.js

我基本上有一个对象，但是这个对象只有在用户输入后才会被填充。但是其他类也在使用这个对象。但是在我用真实对象填充对象之后，它不会在其他类中更新。

例子 ：

```
var x = {
  text: null
}
var y = {
  text: x.text
}

x.text = 'trlalala';

console.log(y.text);
console.log(x.text); 
```

但是当我运行它时， y.text 将打印出 null。但是该值应该已经更新。我的一位朋友告诉我这是因为 y.text 复制了 x.text 的结构而不是引用。卡了一段时间。:\

任何输入将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T11:35:41.757

`text: x.text`查看`x.text`（对 的引用`null`）的值并设置`y.text`为该值。

当您说 时`x.text = 'trlalala'`，您会更改 的值`x.text`（因此它是对不可变字符串的引用`'trlalala'`），但 的值`y.text`仍然是对 的引用`null`。

如果您想共享这样的数据，您将需要一个可以引用的中间对象。（从那时起您将处理对对象的引用）

```
var x = {
  data: { text: null }
};
var y = {
  data: x.data
};

x.data.text = 'trlalala';

console.log(y.data.text);
console.log(x.data.text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:38:53.310

当您定义时`y`，您定义的是一个属性（即一个常量值）而不是一个方法。并且您定义`text`to的值`x.text`- 这意味着在*定义时*，`x.text`查找 的值并将其用作 的（常量）值`y.text`。

如果您希望更改`x.text`反映在 中`y`，那么您可以定义`y.text`为一个*函数*，以便在每次调用该方法时按需查找该值。这可能看起来像这样：

```
var y = {
   text: function() {
      return x.text;
   }
}; 
```

现在，无论何时更新`x.text`，后续调用`y.text()`都会产生新值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:37:21.703

In JavaScript a string is a [primitive value](https://developer.mozilla.org/en-US/docs/JavaScript/Glossary#primitive), which can not be referenced (directly), but is just copied like in your case.

So your friend is right: With the command `text: x.text` just the current value of `x.text` is copied, which here is `null.

The reassignment of `x.text` has no influence on `y.text` as this is just a copy and no reference!

# c# - CA1305：指定文化时的冗长

> ID：13010555
> 
> 赞同：6
> 
> 时间：2012-10-22T11:31:53.587
> 
> 标签：c#, .net, localization, code-analysis

当存在需要的重载`IFormatProvider`但代码中未使用此重载时，将引发[CA1305 。](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SPECIFYIFORMATPROVIDER%29;k%28VS.ERRORLIST%29;k%28SOLUTIONITEMSPROJECT%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29&rd=true)

例如，以下代码会引发此警告：

```
string.Format("{0} - {1}", id, name); 
```

摆脱此警告的明显方法是指定要使用的文化：

```
string.Format(CultureInfo.InvariantCulture, "{0} - {1}", id, name); 
```

但是，我认为这太冗长了。

存在哪些替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:48:46.080

几乎唯一可以减少冗长同时仍然保留显式格式提供程序传递的替代方法是使用特定于文化的外观方法。幸运的是，一种通常仅用于 InvariantCulture 和 CurrentCulture 的格式，因此每个底层格式化方法只需要两种外观方法。

示例代码的典型外观方法可能具有如下签名：

```
public static string FormatForInvariantCulture(this string template, params object[] substitutions) 
```

并被如下调用：

```
"{0} - {1}".FormatForInvariantCulture(id, name); 
```

组织外观方法的另一种方法是使用 IoC 技术注入特定于文化的格式化程序类型。例如，可以为格式化定义如下接口：

```
public interface IFormatter
{
    string Format(string template, params object[] substitutions);
} 
```

然后可以将特定于文化的实例注入到需要使用如下构造函数执行格式化的类型中：

```
public SomeClass(IFormatter systemFormatter, IFormatter uiFormatter)
{
    // ...
} 
```

无论外观方法的打包方式如何，重要的是要考虑到 CA2241 ( [ProvideCorrectArgumentsToFormattingMethods](http://msdn.microsoft.com/en-us/library/ms182361.aspx) ) 不会检查方法的使用，因此考虑添加自定义规则来这样做可能是值得的。

# wordpress - WordPress - 禁用新用户电子邮件确认/验证（单次安装）

> ID：13010560
> 
> 赞同：2
> 
> 时间：2012-10-22T11:32:05.557
> 
> 标签：wordpress, email-validation

**我不希望新用户在注册 WordPress 时必须通过电子邮件确认他们的帐户！**简单的。

我已经为此苦苦挣扎了几个小时，以调整这个相当简单的问题。电子邮件确认很重要，但当您有愚蠢/不精通的用户时可能会导致很多问题。*当谈到 WPMU 时，全世界*似乎都有解决方案，但我找不到任何关于普通 WordPress 的东西。

这是一个投票类型的网站，我们只想要一个人在 WP 用户帐户上的详细信息，然后让他们在几秒钟后开始投票。

# c# - 使用带有 async/await 的 ThreadStatic 变量

> ID：13010563
> 
> 赞同：38
> 
> 时间：2012-10-22T11:32:13.980
> 
> 标签：c#, multithreading, synchronization, async-await

使用 C# 中的新 async/await 关键字，现在对使用 ThreadStatic 数据的方式（和时间）产生了影响，因为回调委托在与`async`操作开始的线程不同的线程上执行。例如，以下简单的控制台应用程序：

```
[ThreadStatic]
private static string Secret;

static void Main(string[] args)
{
    Start().Wait();
    Console.ReadKey();
}

private static async Task Start()
{
    Secret = "moo moo";
    Console.WriteLine("Started on thread [{0}]", Thread.CurrentThread.ManagedThreadId);
    Console.WriteLine("Secret is [{0}]", Secret);

    await Sleepy();

    Console.WriteLine("Finished on thread [{0}]", Thread.CurrentThread.ManagedThreadId);
    Console.WriteLine("Secret is [{0}]", Secret);
}

private static async Task Sleepy()
{
    Console.WriteLine("Was on thread [{0}]", Thread.CurrentThread.ManagedThreadId);
    await Task.Delay(1000);
    Console.WriteLine("Now on thread [{0}]", Thread.CurrentThread.ManagedThreadId);
} 
```

将输出以下内容：

```
Started on thread [9]
Secret is [moo moo]
Was on thread [9]
Now on thread [11]
Finished on thread [11]
Secret is [] 
```

我也尝试过使用`CallContext.SetData`and`CallContext.GetData`并得到了相同的行为。

在阅读了一些相关的问题和主题后：

*   [CallContext 与 ThreadStatic](https://stackoverflow.com/questions/273301/callcontext-vs-threadstatic)
*   [http://forum.springframework.net/showthread.php?572-CallContext-vs-ThreadStatic-vs-HttpContext&highlight=LogicalThreadContext](http://forum.springframework.net/showthread.php?572-CallContext-vs-ThreadStatic-vs-HttpContext&highlight=LogicalThreadContext)
*   [http://piers7.blogspot.co.uk/2005/11/threadstatic-callcontext-and_02.html](http://piers7.blogspot.co.uk/2005/11/threadstatic-callcontext-and_02.html)

似乎像 ASP.Net 这样的框架显式地跨线程迁移 HttpContext ，但不是，所以使用and关键字`CallContext`可能在这里发生同样的事情？`async``await`

考虑到 async/await 关键字的使用，存储与可以（自动！）在回调线程上恢复的特定执行线程关联的数据的最佳方式是什么？

谢谢，

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-22T12:39:54.277

您*可以*使用`CallContext.LogicalSetData`and ，但我建议您不要使用，因为当您使用简单并行 ( / )`CallContext.LogicalGetData`时，它们不支持任何类型的“克隆” 。`Task.WhenAny``Task.WhenAll`

我打开了一个[UserVoice 请求](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2698599-add-an-async-compatible-logical-call-context-)以获得更完整的`async`兼容“上下文”，在[MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/async/thread/ea21ca57-5340-439c-8ee9-f0185b5787a1#a6d5ce0e-53bb-47e3-a3ee-d84d6f062dcb)中进行了更详细的解释。似乎不可能自己建造一个。Jon Skeet 有一篇关于这个主题的[很好的博客文章](http://codeblog.jonskeet.uk/2010/11/08/the-importance-of-context-and-a-question-of-explicitness/)。

因此，我建议您使用参数、lambda 闭包或本地实例 ( `this`) 的成员，如 Marc 所述。

是的，*不会*在s 中`OperationContext.Current`保留。*`await`*

 ***更新：** .NET 4.5 确实支持代码`Logical[Get|Set]Data`。[我的博客上的](http://blog.stephencleary.com/2013/04/implicit-async-context-asynclocal.html)`async`详细信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-22T11:39:13.597

基本上，我会强调：不要那样做。`[ThreadStatic]`永远不会很好地处理在线程之间跳转的代码。

但你不必这样做。A`Task`已经携带状态 - 事实上，它可以通过两种不同的方式进行：

*   有一个明确的状态对象，它可以容纳你需要的一切
*   lambdas/anon-methods 可以在状态上形成闭包

此外，编译器无论如何都会在这里完成您需要的一切：

```
private static async Task Start()
{
    string secret = "moo moo";
    Console.WriteLine("Started on thread [{0}]",
        Thread.CurrentThread.ManagedThreadId);
    Console.WriteLine("Secret is [{0}]", secret);

    await Sleepy();

    Console.WriteLine("Finished on thread [{0}]",
        Thread.CurrentThread.ManagedThreadId);
    Console.WriteLine("Secret is [{0}]", secret);
} 
```

无静态；线程或多个任务没有问题。它*只是工作*。请注意，`secret`这里不仅仅是“本地”；编译器已经工作了一些巫术，就像它对迭代器块和捕获的变量一样。检查反射器，我得到：

```
[CompilerGenerated]
private struct <Start>d__0 : IAsyncStateMachine
{
    // ... lots more here not shown
    public string <secret>5__1;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-06-30T13:15:32.740

[AsyncLocal<T>](https://docs.microsoft.com/en-us/dotnet/api/system.threading.asynclocal-1?view=netframework-4.8)支持维护范围为特定异步代码流的变量。

将变量类型更改为 AsyncLocal，例如，

```
private static AsyncLocal<string> Secret = new AsyncLocal<string>(); 
```

给出以下所需的输出：

```
Started on thread [5]
Secret is [moo moo]
Was on thread [5]
Now on thread [6]
Finished on thread [6]
Secret is [moo moo] 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-22T12:06:45.347

让任务继续在同一线程上执行需要同步提供程序。这是一个昂贵的词，简单的诊断是通过查看调试器中 System.Threading.SynchronizationContext.Current 的值。

该值在控制台模式应用程序中将为**空。**没有提供程序可以使代码在控制台模式应用程序的特定线程上运行。只有 Winforms 或 WPF 应用程序或 ASP.NET 应用程序将具有提供程序。并且只在他们的主线程上。

这些应用程序的主线程做了一些非常特别的事情，它们有一个调度程序循环（又名消息循环或消息泵）。它实现了[生产者-消费者问题](http://en.wikipedia.org/wiki/Producer-consumer_problem)的一般解决方案。正是调度程序循环允许处理线程执行一些工作。这样的工作将是等待表达式之后的任务继续。该位将在调度程序线程上运行。

WindowsFormsSynchronizationContext 是 Winforms 应用程序的同步提供程序。它使用 Control.Begin/Invoke() 来分派请求。对于 WPF，它是 DispatcherSynchronizationContext 类，它使用 Dispatcher.Begin/Invoke() 来分派请求。对于 ASP.NET，它是 AspNetSynchronizationContext 类，它使用不可见的内部管道。他们在初始化时创建各自提供者的实例并将其分配给 SynchronizationContext.Current

控制台模式应用程序没有这样的提供程序。主要是因为主线程完全不合适，它不使用调度程序循环。您将创建自己的，然后还创建自己的 SynchronizationContext 派生类。很难做到，你不能再像 Console.ReadLine() 这样调用，因为这会完全冻结 Windows 调用的主线程。您的控制台模式应用程序不再是控制台应用程序，它将开始类似于 Winforms 应用程序。

请注意，这些运行时环境具有同步提供程序是有充分理由的。他们**必须**有一个，因为 GUI 从根本上说是线程不安全的。控制台没有问题，它是线程安全的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-10T11:41:26.447

看看这个[线程](https://stackoverflow.com/questions/18086235/initializing-threadstatic-field-still-causes-nullreferenceexception)

在标有 ThreadStaticAttribute 的字段上，初始化只发生一次，在静态构造函数中。在您的代码中，当创建 ID 为 11 的新线程时，将创建一个新的 Secret 字段，但它为空/null。在等待调用后返回“开始”任务时，任务将在线程 11 上完成（如您的打印输出所示），因此字符串为空。

您可以通过在调用 Sleepy 之前将 Secret 存储在“Start”内的本地字段中来解决您的问题，然后在从 Sleepy 返回后从本地字段中恢复 Secret。您也可以在调用“await Task.Delay(1000);”之前在 Sleepy 中执行此操作 这实际上会导致线程切换。*

# php - 在 iis 上监视文件夹

> ID：13010570
> 
> 赞同：1
> 
> 时间：2012-10-22T11:32:39.903
> 
> 标签：php, iis

我在 IIS 上运行 PHP（无法更改），每次将文件添加到监视文件夹时都需要运行 php 脚本。此外，我需要所说的脚本来知道文件的名称。

经过一段时间的斗争，我目前已经通过使用 Transform Manager 解决了它，然后通过通知发送信息。虽然我确实做到了这一点，但它也删除了文件。

所以我的问题是：如何阻止它删除我的文件，或者是否有更好的方法来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:37:55.320

One solution would be to have a long-running script with a `while` loop to check either the contents or the last-modified time of the folder.

# c++ - 编译 glm 时 OpenGL 重新定义错误与 Windows SDK 文件冲突

> ID：13010575
> 
> 赞同：0
> 
> 时间：2012-10-22T11:32:46.553
> 
> 标签：c++, windows, opengl, redefinition

当我将一个模块（使用`OpenGL`and `glm`）（作为一个单独的程序测试和编译好的）添加到一个大程序中时。在项目中编译glm时出现错误：

```
1>d:\program files (x86)\microsoft visual studio 9.0\vc\include\glm\core\type_gentype.hpp(48) : error C2332: “class”: missing tag name
1>d:\program files (x86)\microsoft visual studio 9.0\vc\include\glm\core\type_gentype.hpp(48) : error C2011: “&lt;unnamed-tag>”: “enum” type redefinition
1>        c:\program files\microsoft sdks\windows\v6.0a\include\shlobj.h(3599) : see declaration of '<unnamed-tag>' 
```

[我搜索了谷歌，在这里](http://forums.codeguru.com/showthread.php?406674-Template-problems-while-porting-to-VC8.)发现了类似的问题。答案说头文件序列有问题，但我不知道如何解决。

中的代码，[glm](http://glm.g-truc.net/)`type_gentype.hpp`中的代码。

```
namespace glm
{
    enum profile
    {
        nice,
        fast,
        simd
    };

namespace detail
{
    template
    <
        typename VALTYPE, 
        template <typename> class TYPE   //**The error indicator pointing at here**
    >
    struct genType
    {
    public:
        enum ctor{null};

        typedef VALTYPE value_type;
        typedef VALTYPE & value_reference;
        typedef VALTYPE * value_pointer;
        typedef VALTYPE const * value_const_pointer;
        typedef TYPE<bool> bool_type;

        typedef sizeType size_type;
        static bool is_vector();
        static bool is_matrix();

        typedef TYPE<VALTYPE> type;
        typedef TYPE<VALTYPE> * pointer;
        typedef TYPE<VALTYPE> const * const_pointer;
        typedef TYPE<VALTYPE> const * const const_pointer_const;
        typedef TYPE<VALTYPE> * const pointer_const;
        typedef TYPE<VALTYPE> & reference;
        typedef TYPE<VALTYPE> const & const_reference;
        typedef TYPE<VALTYPE> const & param_type;

        //////////////////////////////////////
        // Address (Implementation details)

        value_const_pointer value_address() const{return value_pointer(this);}
        value_pointer value_address(){return value_pointer(this);}

    //protected:
    //  enum kind
    //  {
    //      GEN_TYPE,
    //      VEC_TYPE,
    //      MAT_TYPE
    //  };

    //  typedef typename TYPE::kind kind;
    };

    template
    <
        typename VALTYPE, 
        template <typename> class TYPE
    >
    bool genType<VALTYPE, TYPE>::is_vector()
    {
        return true;
    } 
```

`enum`中的重新定义部分`c:\program files\microsoft sdks\windows\v6.0a\include\shlobj.h(3599)`

```
enum
{   // **The error indicator pointing at here**
    BMICON_LARGE = 0,
    BMICON_SMALL
};

#undef  INTERFACE
#define INTERFACE   IBanneredBar
// the rest of the shlobj.h file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:12:08.110

关于 BMICON_LARGE，这听起来好像已经有一个该名称的预定义常量/枚举值。最好的解决方案是简单地使用不同的名称。如果您绝对需要该确切名称，请将其放入您自己的命名空间；或者您可以使用已经定义的值。

# linq-to-sql - 将 Pervasive ADO.NET 提供程序与 Linq to SQL 一起使用

> ID：13010580
> 
> 赞同：0
> 
> 时间：2012-10-22T11:32:55.257
> 
> 标签：linq-to-sql, ado.net, pervasive

我下载并安装了`Pervasive ADO.NET SDK v3.5`它，并且正在使用它附带的驱动程序从 Visual Studio 2010 中连接到数据库。

但是，当我创建我的 Linq to SQL 类并尝试将表拖到其中时，它说我使用了不受支持的提供程序。有谁知道有办法解决这个问题或解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:49:22.687

此驱动程序仅支持**实体框架**

# php - 使用 restler 创建密码保护 Web 服务

> ID：13010581
> 
> 赞同：0
> 
> 时间：2012-10-22T11:32:57.177
> 
> 标签：php, api, rest, restler

我已经使用[restler](http://luracast.com/products/restler/)框架成功开发了 Web 服务。如果我访问 URL，我可以看到这些方法是可访问的。

但是，如果有人知道该 URL，他可以访问我的数据，那么我的问题就来了——

如何使用 restler 添加受用户名/密码保护的 Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:59:58.090

如果是 Restler 3，实现 API 密钥真的很容易。请参阅： [http ://restler3.phpfogapp.com/examples/_005_protected_api/readme.html](http://restler3.phpfogapp.com/examples/_005_protected_api/readme.html)

# rotation - IOS6 mapkit框架中如何设置MkAnnotationview自定义图片的旋转中心

> ID：13010586
> 
> 赞同：0
> 
> 时间：2012-10-22T11:33:14.353
> 
> 标签：rotation, mapkit, mkannotationview

使用 mapkit 框架，我想显示一个箭头并根据用户的查看方向旋转它。

我的问题是旋转中心在图像的左下角。

我读了这篇关于设置旋转中心的文章`MkAnnotationViews`：

[如何设置 MKAnnotationView 的旋转中心](https://stackoverflow.com/questions/11629940/how-to-set-the-rotation-center-of-an-mkannotationview/13009437#13009437)

他们说我可以`annotationView.layer.anchorPoint`用来设置视图的旋转中心，但启动 IOS6 mapkit 框架，该`MkAnnotationView.layer`属性似乎是只读的，你根本无法访问`annotationView.layer.anchorPoint`。我什至不会编译。

还有其他方法吗？

# shell - 删除所有以 | 开头的行 在使用 shell 的文本文件中

> ID：13010590
> 
> 赞同：-1
> 
> 时间：2012-10-22T11:33:25.683
> 
> 标签：shell

我需要删除所有以符号 | 开头的行 使用 shell 我有一个文本文件，其中有一些以 | 开头的行 我需要使用外壳将其删除

示例文件

```
Example
Example of txt file

|I need to remove this
|I need to remove this too 
```

我是 shell 新手，任何人都可以告诉我如何做到这一点或给我一些教程来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:05:22.113

ugurarpaci 的方法很好，但存在根本缺陷：

```
sed '/^|/d' filename 
```

将产生您想要的输出，但您不能简单地将其重定向回文件。你可以做几件事：

```
sed '/^|/d' filename > new-file
sed -i '/^|/d' filename  # If your sed supports -i and you don't care
                         # about breaking hard links
sed '/^|/d' filename > tmp-file && mv tmp-file filename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:16:13.210

```
sed '/^|/d' filename > filename 
```

# c++ - c++ 中的 sntp 客户端用于时间/日期

> ID：13010593
> 
> 赞同：1
> 
> 时间：2012-10-22T11:33:36.183
> 
> 标签：c++, c, ntp

> **可能重复：**
> [是否有任何 C/C++ 库可以与远程 NTP 服务器连接？](https://stackoverflow.com/questions/9326677/is-there-any-c-c-library-to-connect-with-a-remote-ntp-server)

我正在寻找从服务器（ntp.belnet.be）获取时间和日期的 c/c++ 中的工作代码。它适用于 UDP 并使用端口 123。

有人可以帮忙吗？

```
//sending pakket
memset(&sntp_msg_header, 0, sizeof sntp_msg_header);
sntp_msg_header.flags = 27;
sntp_msg_header.originate_timestamp_secs = time(NULL);

// Get data in rxmsg
...
...

// print time
timeval = ntohl(rxmsg.transmit_timestamp_secs) - ((70ul * 365ul + 17ul) * 86400ul);
printf("%s", ctime(&timeval)); 
```

这就是我到目前为止所拥有的。但我无法从中获得正确的数据。我希望这是更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T12:04:32.917

这是linux中的代码片段。希望这会有所帮助。我不知道如何将其转换为 C++。

```
 * This code will query a ntp server for the local time and display
 * it.  it is intended to show how to use a NTP server as a time
 * source for a simple network connected device.
 * This is the C version.  The orignal was in Perl
 *
 * For better clock management see the offical NTP info at:
 * http://www.eecis.udel.edu/~ntp/
 *
 * written by Tim Hogard (thogard@abnormal.com)
 * Thu Sep 26 13:35:41 EAST 2002
 * Converted to C Fri Feb 21 21:42:49 EAST 2003
 * this code is in the public domain.
 * it can be found here http://www.abnormal.com/~thogard/ntp/
 *
 */
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <time.h>
#include <string.h>

void ntpdate();

int main() {
    ntpdate();
    return 0;
}

void ntpdate() {
char    *hostname="tick.usno.navy.mil";
int portno=123;     //NTP is port 123
int maxlen=1024;        //check our buffers
int i;          // misc var i
unsigned char msg[48]={010,0,0,0,0,0,0,0,0};    // the packet we send
unsigned long  buf[maxlen]; // the buffer we get back
//struct in_addr ipaddr;        //  
struct protoent *proto;     //
struct sockaddr_in server_addr;
int s;  // socket
int tmit;   // the time -- This is a time_t sort of

//use Socket;
//
//#we use the system call to open a UDP socket
//socket(SOCKET, PF_INET, SOCK_DGRAM, getprotobyname("udp")) or die "socket: $!";
proto=getprotobyname("udp");
s=socket(PF_INET, SOCK_DGRAM, proto->p_proto);
if(s) {
    perror("asd");
    printf("socket=%d\n",s);
}
//
//#convert hostname to ipaddress if needed
//$ipaddr   = inet_aton($HOSTNAME);
memset( &server_addr, 0, sizeof( server_addr ));
server_addr.sin_family=AF_INET;
server_addr.sin_addr.s_addr = inet_addr(hostname);
//argv[1] );
//i   = inet_aton(hostname,&server_addr.sin_addr);
server_addr.sin_port=htons(portno);
//printf("ipaddr (in hex): %x\n",server_addr.sin_addr);

/*
 * build a message.  Our message is all zeros except for a one in the
 * protocol version field
 * msg[] in binary is 00 001 000 00000000 
 * it should be a total of 48 bytes long
*/

// send the data
printf("sending data..\n");
i=sendto(s,msg,sizeof(msg),0,(struct sockaddr *)&server_addr,sizeof(server_addr));

// get the data back
i=recv(s,buf,sizeof(buf),0);
printf("recvfr: %d\n",i);
//perror("recvfr:");

//We get 12 long words back in Network order
/*
for(i=0;i<12;i++)
    printf("%d\t%-8x\n",i,ntohl(buf[i]));
*/

/*
 * The high word of transmit time is the 10th word we get back
 * tmit is the time in seconds not accounting for network delays which
 * should be way less than a second if this is a local NTP server
 */

tmit=ntohl((time_t)buf[10]);    //# get transmit time
//printf("tmit=%d\n",tmit);

/*
 * Convert time to unix standard time NTP is number of seconds since 0000
 * UT on 1 January 1900 unix time is seconds since 0000 UT on 1 January
 * 1970 There has been a trend to add a 2 leap seconds every 3 years.
 * Leap seconds are only an issue the last second of the month in June and
 * December if you don't try to set the clock then it can be ignored but
 * this is importaint to people who coordinate times with GPS clock sources.
 */

tmit-= 2208988800U; 
//printf("tmit=%d\n",tmit);
/* use unix library function to show me the local time (it takes care
 * of timezone issues for both north and south of the equator and places
 * that do Summer time/ Daylight savings time.
 */

//#compare to system time
printf("Time: %s",ctime(&tmit));
i=time(0);
//printf("%d-%d=%d\n",i,tmit,i-tmit);
printf("System time is %d seconds off\n",i-tmit);
} 
```

# xpath - 使用 Selenium RC 时 assertXpathCount() 返回 0

> ID：13010597
> 
> 赞同：1
> 
> 时间：2012-10-22T11:33:56.550
> 
> 标签：xpath, selenium, selenium-rc, selenium-ide

我正在尝试使用`assertXpathCount()`来获取表中可用的行数。

我正在使用`<tr>`元素浏览器给出的 Xpath。但我仍然得到 0 作为输出。

有什么特别的事情需要我记住吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:32:22.727

一个猜测

*   安装[Firebug](https://getfirebug.com/)和[Firefinder](https://addons.mozilla.org/en-US/firefox/addon/firefinder-for-firebug/)
*   使用要通过 Selenium RC 验证的表打开您的测试站点
*   加载页面后，将您正在使用的 xpath 插入 firefinder
*   看看你得到了多少结果

简而言之：我一直有类似的问题，因为我一直很愚蠢并且对用于查找元素的 Xpath 做错了什么。这样您就可以验证 xpath。可能是，它确实显示找到零个元素，这是正确的，因为提供了错误的 Xpath...

更好的主意：如果您切换到 Webdriver aprroach，您可以使用命令`findElements`返回`List`找到的所有元素。然后通过调用`getLength()`该列表上的函数，您找到了许多元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:13:58.627

尝试为表格的第一行查找定位器并确认它存在于页面上，例如

```
\\some id or name\blah-blah\table\tr 
```

然后在 getXpathCount 中保持相同的定位器。它会给你正确的结果。如果你仍然得到结果为 0，那么编写你自己的函数来使用循环或任何你喜欢的东西来获取 xpath 计数。这就是我遇到此类问题时所做的。

# ios - 结合使用 Frank 和 RestKit 头文件

> ID：13010601
> 
> 赞同：3
> 
> 时间：2012-10-22T11:34:04.940
> 
> 标签：ios, restkit, frank

我刚刚开始在我的 iOS 项目中使用 Frank for BDD。我正在使用带有`"$(BUILT_PRODUCTS_DIR)/../../Headers"`标头搜索路径的 RestKit。执行`frank build`命令时，Frank 似乎没有以正确的方式解释头搜索路径，因为它找不到正确的头文件。这会导致编译期间失败。

是否有一些我需要设置的设置，`Frank/frankify.xcconfig`例如在文件中？

```
/Users/Thijs/Development/CE-App/CE-App/CL-App-Prefix.pch:13:9: fatal error: 'RestKit/CoreData.h' file not found
#import <RestKit/CoreData.h>
        ^
1 error generated.

** BUILD FAILED **

The following build commands failed:
    ProcessPCH /var/folders/w_/mt3n3wgs3xs7819j4nmymn_80000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders/CL-App-Prefix-cnfscskocfnirmdnriqzouhitmle/CL-App-Prefix.pch.pth CE-App/CL-App-Prefix.pch normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
(1 failure) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:21:31.517

我的第一直觉似乎是正确的。修改`Frank/frankify.xcconfig`文件对我有用。

由于 Frank 没有将构建放在派生数据文件夹中，而是在项目文件夹本身中，您需要将 Frank 指向相对于项目构建文件夹的 RestKit 头文件。

我这样做的方法是使用默认设置在 Xcode 中使用项目设置 > 构建 > 高级... > 自定义（相对于工作区）更改项目构建位置。

然后我将以下行添加到`Frank/frankify.xcconfig`

```
HEADER_SEARCH_PATHS = $(inherited) $(FRANK_HEADER_SEARCH_PATHS) "$(BUILT_PRODUCTS_DIR)/../../Headers" "$(BUILT_PRODUCTS_DIR)/../Headers" 
```

由于相对构建路径，您只需要一个`../`而不是两个。通过`$(inherited)`在 Xcode 中使用构建不受影响。

也许这种做事方式会导致构建目录混乱，但它确实有效。

# c# - 与超级按钮共享文本时添加换行符

> ID：13010605
> 
> 赞同：0
> 
> 时间：2012-10-22T11:34:16.167
> 
> 标签：c#, windows-8, charms-bar

对于 Windows 8 应用程序，在 C#/Xaml 中，我使用魅力栏来分享一些内容。

我的问题是我没有在要在共享应用程序中共享的文本中看到回车。

例如我想分享：

```
 Hello,

 Read this article about blablabla

 GoodBye 
```

并且在魅力栏中的电子邮件应用程序上显示：

```
 Hello,Read this article about blablabla GoodBye 
```

我尝试放置一些 \n 或 %0d%0a 或 Environment.NewLine，但没有任何成功...

我怎么解决这个问题 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:40:46.433

如果您要发送电子邮件，则可以使用`HTML`.

```
string message = "<p>Hello,</p><p>Read this article about blablabla</p>
                                                             <p>GoodBye</p>";
string htmlMessage = HtmlFormatHelper.CreateHtmlFormat(message);
request.Data.SetHtmlFormat(htmlMessage); 
```

当然，作为`HTML`，您可以使用更高级的格式，还可以包含图像。[在MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh973055%28v=win.10%29.aspx)上有一个使用 HTML 格式的完整示例。

# java - 带有枚举的 Java 工厂模式

> ID：13010617
> 
> 赞同：0
> 
> 时间：2012-10-22T11:34:40.997
> 
> 标签：java, design-patterns

我必须将工厂模式与单例一起使用。我的工厂类根据枚举类型创建两个不同的对象。

返回正确对象的最佳方法是什么。

解决方案 1：通过工厂中的 if-else 决定：

```
if(enumType == "objectA") return new objectA() 
```

解决方案2：枚举类有返回函数：

```
enum ObjectType{ ObjectA{ .. return new ObjectA()..}} 
```

谢谢，迈克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T11:36:04.207

在枚举上写一个函数。这样，当你添加一个新的枚举时，你就不会忘记在你的工厂方法中添加一个子句。

作为一项规则，对于几乎任何解决方案，我都倾向于多态性和方法实现而不是`if`/等序列。`else if`它更不容易出错，并且问题将在编译时而不是运行时被发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:36:50.950

如果你只能有一个类的两个实例，我会使用 Enum，除非它需要另一个类作为超类。

# android - android 设备中的绝对射频频道号 (ARFCN)

> ID：13010618
> 
> 赞同：1
> 
> 时间：2012-10-22T11:34:44.053
> 
> 标签：android

我想获取 android 的绝对射频频道号 (ARFCN)。据我所知；-绝对射频频道编号 (ARFCN) 是 GSM 中每个无线电频道的唯一编号。ARFCN 可用于计算无线电信道的准确频率。

任何人都可以帮助我。锄头得到这个。

是否有可用的 API 或某些库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:50:09.233

在 Android 中使用公共 API 检索 ARFCN 似乎是不可能的。请参阅有关 android 平台 Google 群组的[讨论。](https://groups.google.com/forum/?fromgroups=#!topic/android-platform/tVyNMnXtcEI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:08:33.887

这里是您可以获取信息的地方 如何在您的 android 手机[上获取 arfcn 如何获取 arfcn](https://stackoverflow.com/questions/13917049/telephony-parameters-not-available-through-framework-apis/15656995#15656995)

# ruby-on-rails - 如何配置 munin 在 nginx 而不是 apache 上运行

> ID：13010622
> 
> 赞同：0
> 
> 时间：2012-10-22T11:34:55.863
> 
> 标签：ruby-on-rails, ubuntu, nginx, monitoring, munin

我有几个生产 ubuntu 10.04 ec2 实例，它们使用 NGINX 在 Rails Web 应用程序上运行 ruby​​。我需要为生产服务器部署 munin 来监控它。但问题是我尝试了谷歌建议的几个例子。我的 DNS 停在 Route 53。那么如何启用 munin 进行监控以及如何通过 HTTP 获取图表。

我的另一个问题是有什么方法可以使用 munin 监控我的 AWS MYSQL RDS。如果是的话给我抬头。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:46:37.900

Munin 生成一组静态 HTML 文件，通常为`/var/cache/www/munin`. 您可以将 nginx 设置为指向该目录或设置一个静态子域，并将其根设置为该域：

```
server {
    listen       *:80;
    server_name  munin.yourdomain.com;

    root   /var/cache/munin/www;

    [...other options go here...]

} 
```

对于第二个问题，您当然可以像监控任何其他 mysql 实例一样监控 RDS 实例。只需使用您选择的 mysql 插件（例如[munin-mysql](https://github.com/kjellm/munin-mysql/)插件集）并将插件的连接字符串指向您的 RDS 实例（如果是 munin-mysql，这应该放在 mysql.conf 中）。通常，这些插件也已经作为一个包提供给您的发行版。还要确保您运行插件的服务器允许连接到 RDS 并具有可用的必要数据库权限。

# qt - 如何在 addItem 或 itemChange 上从 QGraphicsScene 获取通知？

> ID：13010629
> 
> 赞同：12
> 
> 时间：2012-10-22T11:35:32.603
> 
> 标签：qt, notifications, signals, qgraphicsitem, qgraphicsscene

在我的项目中，我`QGraphicsScene`在整个代码中使用并添加/删除项目。

现在，我想`QGraphicsItem`在添加或删除 a 时得到通知。许多 Qt 类具有通知信号或至少是在此类更改时调用的虚拟函数。我试图避免在许多地方添加多行代码，这不仅麻烦而且不安全（现在或将来忘记插入/删除）。

我需要一个适用于任何`QGraphicsItem`.

这是不起作用的事情的列表：

*   连接到`QGraphicsScene` ^(（如`QAbstractItemModel::rowsInserted()`）)的信号-> 没有。
*   继承`QGraphicsScene`并重载一个虚拟通知函数^(（如`QTabWidget::tabInserted()`）) -> 没有。
*   继承和重载`addItem()`，自己发送通知^(（如中`QMdiArea::addSubWindow()`）) ->`addItem`不是虚拟的，而是从`QGraphicsItems`.
*   在新添加的设备上安装事件过滤器`QGraphicsItems`-> 不知道如何获取新添加的项目，并且它`sceneEventFilter`只能安装在其他`QGraphicsItems`.
*   连接到`itemChange()`of `QGraphicsItem`->`itemChange`不是一个信号并且重载`QGraphicsItem`不是一个选项。
*   wrap `QGraphicsScene`（将场景作为私有成员）并且只公开函数`addItem`和`removeItem`-> 但`QGraphicsItems`在那个场景中仍然可以通过`scene()`函数访问它，所以这个解决方案不够安全。

**如何获得有关项目更改的通知？**

如果有一种我只是错过的简单方法，请指出我。否则，我非常感谢您对此的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:49:25.757

我认为你能做的最好的就是连接到[`QGraphicsScene::changed()`](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html#changed)信号。

它不会告诉您更改/添加/删除了哪些项目，因为它旨在`QGraphicsView`更新显示。但是您应该能够使用提供的区域找出答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-22T20:51:06.663

I realize one of the requirements of the OP is to not subclass the item, but I hope this still helps others who end up here. Qt is sending events to do this, it just requires extending the `itemChange` method to "get notified". You can then hook in a callback method like the example here, or provide signals, or whatever you need.

*This is in Python but I'm sure it is the same pattern in C++:*

```
def itemChange(self, change, value):
    """
    Runs if this item has the `ItemSendsGeometryChanges` flag set.

    This doesn't "accept" any of the changes, it is only to add hooks.
    """
    if change == QtWidgets.QGraphicsItem.ItemSceneChange:
        # The value for this event is the scene. None means the item was removed.
        if value:
            self.onAddedtoScene(value)
        else:
            self.onRemovedFromScene()

    return super(SceneNodeBase, self).itemChange(change, value) 
```

# c# - 如何使用 Asp.Net WebAPI 进行路由？

> ID：13010632
> 
> 赞同：1
> 
> 时间：2012-10-22T11:35:40.317
> 
> 标签：c#, asp.net, routing, asp.net-web-api

我正在制作一个 Restful 服务，其中我有一个项目列表，可以这样查询：

```
 GET Api/Items 
```

其中列出了所有项目。但当然，我还需要将这些项目列为“最受欢迎”、“属于用户 x”或“属于 Y 类”

在查看 stackoverflow 2.0 api 以了解他们如何解决此问题时，他们将其 URL 命名如下：

```
 GET Api/Items/MostPopular 
```

我想采用这种方法，因为它似乎很有意义并且看起来不错。

但是，如何配置 Web-API 以允许此 URL 语法？默认路由如下：

```
config.Routes.MapHttpRoute(
     name: "DefaultApi",
     routeTemplate: "api/{controller}/{id}",
     defaults: new { id = RouteParameter.Optional }
); 
```

所以我猜我需要在它前面添加我的额外路由。我可以这样做：（如果这甚至可行）

```
config.Routes.MapHttpRoute(
      name: "SpecializedApi",
      routeTemplate: "api/{controller}/MostPopular",
      defaults: new { id = RouteParameter.Optional }
); 
```

但是它会为我所有不喜欢的控制器添加 MostPopular 位。

这样的事情有用吗？

```
 config.Routes.MapHttpRoute(
      name: "SpecializedApi",
      routeTemplate: "api/Items/MostPopular",
      defaults: new { id = RouteParameter.Optional }
 ); 
```

当我的路由表很快变得非常大并且可能无法维护时，这真的是要走的路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:52:15.953

最好的办法是添加另一个 get 操作并配置通用`route`而不是`specific`路由。

首先添加最流行的动作

```
// add action for Most Popular
[ActionName("MostPopular")]
public MyResult GetMostPopular()
{
     return null;
} 
```

设置路由来处理操作。

```
// Controller with ID
// To handle routes like `/api/Items/1`
config.Routes.MapHttpRoute(
    name: "ControllerAndId",
    routeTemplate: "api/{controller}/{id}",
    defaults: null,
    constraints: new { id = @"^\d+$" } // Only integers 
);

// Controllers with Actions
// To handle routes like `/api/Items/MostPopular`
config.Routes.MapHttpRoute(
    name: "ControllerAndAction",
    routeTemplate: "api/{controller}/{action}"
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:52:37.203

如果您不偏离默认设置，这可能是最好的可维护性，但是您应该在路由中指定控制器和操作，如下所示：

```
config.Routes.MapHttpRoute( 
    name: "SpecializedApi", 
    routeTemplate: "api/Items/MostPopular/{id}", 
    defaults: new { controller = "wheretogo",
                    action = "wichactiontotake",
                    id = RouteParameter.Optional 
                  } 
); 
```

或者这也有效：

```
config.Routes.MapHttpRoute( 
    name: "SpecializedApi", 
    routeTemplate: "api/test/{action}/{id}.html",
    defaults: new { controller = "test" } 
); 
```

在使用假文件配置 IIS 时查看此链接：http: [//haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)

# iphone - UIImagePickerController 检查用户是否编辑了图像

> ID：13010635
> 
> 赞同：2
> 
> 时间：2012-10-22T11:35:43.263
> 
> 标签：iphone, objective-c, ios, cocoa-touch, cocoa

我正在使用`UIImagePickerController`属性`allowsEditing`设置为`YES`.

当用户完成选择图像时，我想知道用户是否编辑了他选择的图像（例如，他是否缩放了图像）。这种方法：

```
UIImage *editedImage = [info objectForKey:@"UIImagePickerControllerEditedImage"]; 
```

即使用户将图片原样保留，也始终返回一个对象。有什么方法可以检查用户是否编辑了图像？例如，我可以检查`UIImagePickerControllerEditedImage`and`UIImagePickerControllerOriginalImage`是否以某种方式不同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T11:46:49.347

**在didFinishPickingMediaWithInfo**中试试这个，因为我不确定：

```
 UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

 UIImage *editedimage = [info objectForKey:UIImagePickerControllerEditedImage];

 if ([UIImagePNGRepresentation(image) isEqualToData:UIImagePNGRepresentation(editedimage)])
  //not edited
 else
  //edited 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:49:47.343

```
UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

 UIImage *editedimage = [info objectForKey:UIImagePickerControllerEditedImage];
if(editedimage.length>0){
//then got the edited image
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:16:51.217

你不能只获取和比较图像的 CGSize 吗？

```
BOOL sizeChanged = FALSE;

// get current size of image
CGSize originalSize = [image size];

//After the user hase made the action, get the new size
CGSize currentSize = [image size];

// if the dimensions have been editied the condition is true
if ( originalSize.width  != currentSize.width ||
     originalSize.height != currentSize.height
   )
    sizeChanged = TRUE;
else
    sizeChanged = FALSE; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:54:24.357

看一下这个：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html#//apple_ref/doc/uid/TP40007069](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html#//apple_ref/doc/uid/TP40007069)

这是 ImagePicker Delegate 的文档。如您所见，当用户选择并图像时，这被称为：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

info - 是一个字典，其中包含有关发生的事情和选择的数据的数据。如果 allowediting 设置为 YES，则 info 包含原始图像和编辑后的图像。检查我给你的链接

编辑信息键

那里有一堆常量可以为您提供所需的数据！

从这里开始查看整个机制：http: [//developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instp/UIImagePickerController/allowsEditing](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instp/UIImagePickerController/allowsEditing)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-01T17:57:10.310

我知道这是一个非常古老的问题，一段时间内没有任何活动，但这是谷歌搜索中出现的问题，据我所知，这个问题仍未得到令人满意的回答。

无论如何，判断图像是否已被编辑的方法是：

在 didFinishPickingMediaWithInfo: 中，您可以检查 CropRect 的宽度和原始图像的宽度。如果 CropRect.width == originalImage.width+1，那么它没有被编辑。这是因为要编辑图像，用户必须捏合和缩放，这会缩放图像并更改 CropRect 的大小。简单地移动图像是行不通的，因为它会反弹回来，除非它被缩放。

```
NSValue *pickerCropRect = info[UIImagePickerControllerCropRect];
CGRect theCropRect = pickerCropRect.CGRectValue;

UIImage *originalImage = info[UIImagePickerControllerOriginalImage];
CGSize originalImageSize = originalImage.size;

if (theCropRect.size.width == originalImageSize.width+1) {
    NSLog(@"Image was NOT edited.");
} else {
    NSLog(@"Image was edited.");
} 
```

据我所知，这适用于 6S 和 6+ 的 iOS 9。我看不出它不应该在其他地方工作的真正原因。

# ruby-on-rails - Rails Tutorial Ch 12 - follow!() method not working

> ID：13010638
> 
> 赞同：2
> 
> 时间：2012-10-22T11:35:54.100
> 
> 标签：ruby-on-rails, model, associations

I'm new to Rails, and thought I'd managed to get right through Michael Hartl's tutorial (RoR3 ed1) without asking for help, but I'm finally stumped. Can anyone offer any suggestions?

My problem is with the follow!() method of the Users model in section 12.1\. When I pass a user to the method and try to store the foreignID in the relationship it comes through as nil.

```
1.9.2p290 :023 > user1=User.find(1)
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
 => #<User id: 1, name: "Example User", email: "example@railstutorial.org", created_at: "2012-10-20 18:48:38", updated_at: "2012-10-20 18:48:38", encrypted_password: "cd8e8ad53b1157789cb004de14bc14112786981004b51bd1576...", salt: "d947c9bcb6563fd8c70d3d1c64c9d82507a89b936ea0cbfd3e4...", admin: false> 
1.9.2p290 :024 > user2=User.find(4)
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 4]]
 => #<User id: 4, name: "Mrs. Carmelo Witting", email: "example-2@railstutorial.org", created_at: "2012-10-20 18:48:38", updated_at: "2012-10-20 18:48:38", encrypted_password: "c0f2c8f998bc1b9bf76c9196176828dc543ceeb2a28f7b81c2d...", salt: "3c134e8fd391db0b9b21f0e08ddda7bfd8d16b3abe6726d517d...", admin: false> 
1.9.2p290 :025 > user1.follow!(user2)
  SQL (1.9ms)  INSERT INTO "relationships" ("created_at", "followed_id", "follower_id", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Mon, 22 Oct 2012 11:16:38 UTC +00:00], ["followed_id", nil], ["follower_id", 1], ["updated_at", Mon, 22 Oct 2012 11:16:38 UTC +00:00]]
 => #<Relationship id: 8, follower_id: 1, followed_id: nil, created_at: "2012-10-22 11:16:38", updated_at: "2012-10-22 11:16:38"> 
```

Here are the relevant bits of the user model. What might be causing this?

```
class User < ActiveRecord::Base
.
.
  has_many :relationships, :foreign_key => "follower_id",
                           :dependent => :destroy
  has_many :following, :through => :relationships, :source => :followed
.
  def follow!(followed)
    relationships.create!(:followed_id => followed.id)
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:27:59.757

解决了。我在关系模型中为 follow_id 编写了 attr_accessor 而不是 attr_accessible。

多哈

# java - Why does an int kept on adding non stop

> ID：13010639
> 
> 赞同：0
> 
> 时间：2012-10-22T11:35:59.513
> 
> 标签：java, int

I'm developing a game. I'm really new in java and researched google: why does an int when added, keeps on adding java

Most of the times, it always adds even:

```
STOP_DAMAGE+=1; 
```

Even sometimes, it subtract till negative. I'm annoyed. Sometimes it doesn't add too much. I do not understand. Here is my code:

```
if(isPressed==true) {
    if(STOP_DAMAGE<=5) {
        if(WAIT_DAMAGE>=3000) {
            ENEMY_SHIP_HEALTH-=SHIP_DAMAGE_ENEMY;
        STOP_DAMAGE+=1;
        }
    }
}
for(;WAIT_DAMAGE>=3003;) {
    WAIT_DAMAGE-=WAIT_DAMAGE;//time is deducted
} 
```

`//WAIT_DAMAGE is a time int`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:41:39.337

**int：** int 数据类型是一个 32 位有符号二进制补码整数。它的最小值为 -2,147,483,648，最大值为 2,147,483,647（含）。对于整数值，此数据类型通常是默认选择，除非有理由（如上述）选择其他内容。这种数据类型很可能对于您的程序将使用的数字足够大，但如果您需要更广泛的值，请改用 long。

```
 int n =  2147483647;
 System.out.print( n+ 1); 
```

以上会给你一个负值..

因此，一旦它达到最大值，由于位移，它从 -ve 值开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:38:31.543

The line

```
 STOP_DAMAGE+=1; 
```

always adds one unless you have an overflow, which would be surprising.

It is far more likely you need to use your debugger to get a better understanding of what your program is really doing.

BTW

```
for(;WAIT_DAMAGE>=3003;)
    {

        WAIT_DAMAGE-=WAIT_DAMAGE;//time is deducted
    } 
```

is the same as

```
if (WAIT_DAMAGE>=3003)
    WAIT_DAMAGE = 0; 
```

# r - GoogleVis, Geomap Plot error

> ID：13010642
> 
> 赞同：1
> 
> 时间：2012-10-22T11:36:27.063
> 
> 标签：r, map

When I want to create the map using the gvisGeoMap() from googleVis, I get error:

```
## Using the google visualization API with R
library(googleVis)
input<- read.csv("data.csv")

select<- input[which(input$Subgroup=="Total 5-14"),]
select<- input[which(input$Subgroup=="Total 5-14 yr"),]

Map<- data.frame(select$Country.or.Area, select$Value)
names(Map)<- c("Country", "Percentage")
Geo=gvisGeoMap(Map, locationvar="Country", numvar="Percentage",
options=list(height=350, dataMode='regions'))

plot(Geo)
#starting httpd help server ... done
#Error in ifelse(interactive(), getOption("browser"), "false") : 
#replacement has length zero 
```

The above is the error in the "RGui". The error message in "RStudio" is differet:

```
#object of type 'closure' is not subsettable 
```

and the browser does not fire at all. The HTTP server works fine since I can simply call help pages.( for example ?googleVis will fire up the browser and give the help page). The "Geo" object in the code above is fine and contains the html code only that the plot() does not do what it is supposed to do (I can manually run the html file in the temp folder and see the results). The example above is available [here](http://spatialanalysis.co.uk/2011/02/using-r-to-map-with-google-chart-tools/).

I would appreciate your clues.

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:16:50.637

这是与包的作者对应的结果。似乎有一个错误阻止了情节正常工作。发布了一个新版本。您可以在下面找到链接。TQ

.....昨天晚上我意识到，在 googleVis 0.3.0 版本中，不幸的是，我在 Windows 上的 RStudio 和 R 中引入了一个错误。该错误已经修复，我们的项目站点（[这里是链接](http://code.google.com/p/google-motion-charts-with-r/downloads/list)）提供了一个新版本（0.3.1），但还没有在 CRAN 上。

我已经在我的博客上写了一个注释（[这里是链接](http://lamages.blogspot.com)）以通知其他人。

我希望这有帮助。

此致

马库斯

# java - 在android中解压缩时发生java.io.FileNotFoundException

> ID：13010646
> 
> 赞同：1
> 
> 时间：2012-10-22T11:36:43.100
> 
> 标签：java, android, java-io

我正在尝试解压缩一个 zip 文件。该文件包含其他几个文件。我使用的方法是：

```
private void unzipFile(String inputFileName,String outputDirName){
    int dataCount=0;
    byte[] dataArr=null;
    File inputZipFile=null,targetDir=null,unzipFile=null;
    ZipInputStream zipIPStream=null;
    ZipEntry zipEntry=null;
    BufferedOutputStream bfrOPStream=null;
    FileOutputStream unzipOPStream=null;
    try{
        inputZipFile=new File(inputFileName);
        targetDir=new File(outputDirName);
        zipIPStream=new ZipInputStream(new BufferedInputStream(new FileInputStream(inputZipFile)));
        while((zipEntry=zipIPStream.getNextEntry())!=null){
            dataArr=new byte[2048];
            // zipEntry=zipIPStream.getNextEntry();
            System.out.println("ZipEntry:"+zipEntry.getName());
            unzipFile=new File(targetDir.getAbsolutePath()+"/"+zipEntry.getName());
            System.out.println("Checking the path:"+unzipFile.getPath());
            if(!unzipFile.getParentFile().exists()){
                unzipFile.getParentFile().mkdirs();
            }
            unzipOPStream=new FileOutputStream(targetDir.getPath()+"/"+zipEntry.getName());
            bfrOPStream=new BufferedOutputStream(unzipOPStream,2048);
            while((dataCount=zipIPStream.read(dataArr,0,2048))!=-1){
             unzipOPStream.write(dataArr,0,dataCount);
            }
            unzipOPStream.flush();
            unzipOPStream.close();
        }
    }catch(IOException ioe){
        ioe.printStackTrace();
    }catch(Exception e){
        e.printStackTrace();
    }finally{
        if(zipIPStream!=null){
            try{
                zipIPStream.close();
            }catch(Exception e){

            }
        }
    }
} 
```

该方法抛出以下错误

```
10-22 13:33:09.896: W/System.err(446): java.io.FileNotFoundException: /mnt/sdcard/iR/testbook/Caterpillar-Insect-Animal-Macro-HD-600x375.jpg (Not a directory) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:48:36.783

请参阅下面的链接以下载和解压缩 zip 文件，它将解决您的问题。

下载 Zip 文件：-

[下载压缩文件](http://www.java-samples.com/showtutorial.php?tutorialid=1521)

对于提取 Zip 文件：-

[提取压缩文件](http://www.jondev.net/articles/Unzipping_Files_with_Android_%28Programmatically%29)

有关解决此问题的更多信息，请参见下面的链接。

[在 Android 中下载和提取 Zip 文件](https://stackoverflow.com/questions/9324103/download-and-extract-zip-file-in-android)

并且 zip 文件是使用 winrar 软件制作的，否则这会给你上面的错误。

# api - 面向服务与面向 API

> ID：13010649
> 
> 赞同：3
> 
> 时间：2012-10-22T11:36:55.790
> 
> 标签：api, architecture, service

我已经看到几个围绕 SO 主题的问题，但没有一个真正让我满意的答案。

我试图用语言表达我的感受，但我总是无法清楚地表达它们以说服我周围的人。可能是我错了。可能是我的理解不够深入，无法找到合适的论据。

**您如何对比根据“面向服务的方法”而不是“传统的”API 方法开发应用程序？**

***让我们在这里完全清楚，我所说的服务并不一定是指 Web 服务。***

以下是我看到的一些差异。如果我错了，请纠正我：

*   根据给定的明确协议，服务是您可以与之交谈的“[生物”。](http://vasters.com/clemensv/CommentView,guid,0339fe35-2328-44be-93e6-f004bd869a84.aspx)服务有自己的运行时，而库使用应用程序的运行时。你可以把那个“活的东西”移动到任何你想要的地方
*   库允许基于代码的集成，而服务传统上使用基于消息的集成（但是，没有什么能真正阻止您编写基于交换消息的库）
*   服务是可发现的
*   合同是明确的并在运行代码“外部”表达
*   服务是自治的（但在这里，您可以编写自治 API，不是吗？）
*   界限是明确的

我在这里想念什么？还有什么真正将服务与高级 API 区分开来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:24:21.517

你已经涵盖了最重要的观点。我会添加一个：

通常，服务是无状态的。每个服务请求都是独立的。这与库接口相反，您可以按顺序进行某些调用以获得所需的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T05:47:13.403

面向服务的架构意味着暴露的接口不在客户端运行的同一主机上，服务与客户端代码完全解耦（松散耦合）。您可以通过在同一节点上加载必要的库并执行代码来轻松调用 API。面向服务的架构不是定义 API，而是专注于功能，很多时候您可以使用不同的协议访问相同的功能。

如果有任何东西可以区分 SOA 和 AOA，我会选择松散的代码耦合。

# c#-4.0 - AsyncCallback with completed event

> ID：13010650
> 
> 赞同：1
> 
> 时间：2012-10-22T11:36:57.273
> 
> 标签：c#-4.0, facebook-c#-sdk

I am Creating a library using Facebook C# SDK for windows phone.Facebook SDK Library version is 6.0.10.0\. Facebook C# SDK contains asynchronous function calls only. In which there is a postCompleted event handler which takes object and FacebookApiEventArgs as arguments and return type is void.

I am using two classes one is UI class and other is Businesslogic class. from UI i want to call the BusinessLogic class(s) PostWall function which will simply return the last message id.

I want to create a function something like this

```
public string PostWall(string accessToken, string message)
{
    var fb = new FacebookClient(accessToken);

            fb.PostCompleted += (o, args) =>
            {
                if (args.Error != null)
                {                        
                    return;
                }
                var result = (IDictionary<string, object>)args.GetResultData();
                _lastMessageId = (string)result["id"];                        
            };

            var parameters = new Dictionary<string, object>();
            parameters["message"] = message;

            fb.PostAsync("me/feed", parameters);
} 
```

I do not know how to implement this. Is this functionality achievable or not.

Any help appreciated Thanks in Advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:25:07.010

[您可以在https://github.com/facebook-csharp-sdk/facebook-windows-phone-sample](https://github.com/facebook-csharp-sdk/facebook-windows-phone-sample)查看 wp7 示例。

你所做的已经是正确的。

# objective-c - 从仅横向转到仅纵向

> ID：13010655
> 
> 赞同：2
> 
> 时间：2012-10-22T11:37:19.800
> 
> 标签：objective-c, xcode, ipad, orientation, segue

我的应用程序中有两个“页面”。一个应该在两种横向模式之间旋转但不允许纵向模式，另一个应该在两种纵向模式之间旋转但不允许横向模式。

如何设置它以便在两个视图之间切换时正确限制方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:22:29.087

如果我是您，我将编写我的`own`segue，并在`perform`您的自定义方法中设置目标视图的方向，`UIStoryboardSegue`并且还将设置我希望在`shouldAutorotateToInterfaceOrientation`目标视图控制器中允许的方向。您可以查看我前段时间询问的与自定义 segue 相关的这个[问题，以了解如何实现自定义 segue。](https://stackoverflow.com/questions/9466231/how-do-you-perform-a-customized-segue-modal-segue-from-a-uibutton-in-storyboar)

# c# - How do i loop thourgh XPathNodeIterator and randomize its children?

> ID：13010657
> 
> 赞同：2
> 
> 时间：2012-10-22T11:37:20.877
> 
> 标签：c#, xslt, xpath, xpathnavigator, xpathnodeiterator

As per title, i need to create a method in C#/.NET 4 that can jumble the order a XPathNodeIterator object. The method needs to loop though all the child items ("/*") to randomly reorder the children.

I need some help to some to get started - All i have is the method stub:

```
public XPathNodeIterator RandomizeXPathNodeIterator(XPathNodeIterator iterator) 
```

Any help is appreciated! Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:43:27.230

您可以将 XPathNodeIterator 迭代为：

```
 XPathNavigator[] positions = new XPathNavigator[iterator.Count];
    int i = 0;

    while (iterator.MoveNext())
    {
        XPathNavigator n = iterator.Current;
        positions[i] = n;

        i++;
    } 
```

然后，打乱数组

# php - Git code on server

> ID：13010658
> 
> 赞同：0
> 
> 时间：2012-10-22T11:37:28.047
> 
> 标签：php, git

I have one private repository at Bitbucket that I use to push my php code. I would like to know if the best to have the code in my server Amazon EC2\.

I cloned the repository on my server and update the code using 'git pull'.

There is a better way to do that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:47:17.193

看看 capistrano 甚至一些部署构建软件。 [http://guides.beanstalkapp.com/deployments/deploy-with-capistrano.html](http://guides.beanstalkapp.com/deployments/deploy-with-capistrano.html)

您不必使用 ruby​​ 来部署 capistrano

# python - 在漂亮的汤标签上使用正则表达式

> ID：13010659
> 
> 赞同：1
> 
> 时间：2012-10-22T11:37:37.577
> 
> 标签：python, regex, python-2.7, beautifulsoup

我最近一直在使用美丽的汤 4，我一直在努力理解这方面的一些基础知识（出于某种原因，我对 bs3.x 非常满意）。因此，例如，让我们从做一些简单的事情开始，例如：

```
data=soup.find_all('h2') 
```

这给我带来了类似的东西：

```
<h2><a href=\"/accurate-data/210-0023.prd?pageLevel=&amp;skuId=210-0023\">more-accurate-data</a></h2> 
```

这很好。但是当我想对上面的字符串进行正则表达式时，使用一些类似的东西（假设上面存储在“temp”中）：

```
t=str(re.compile(r"""<h2><a href=\\"/accurate(.*?)\\">""").search(str(temp)).group(1)) 
```

我得到：

```
AttributeError: 'NoneType' object has no attribute 'group' 
```

我觉得很奇怪 - 因为，当我在 python 解释器上做时，类似：

```
k=r"""<h2><a href=\"/accurate-data/210-0023.prd?pageLevel=&amp;skuId=210-0023\">more-accurate-data</a></h2>""" 
```

然后使用上面的正则表达式，一切正常。我想知道为什么 bs4 生成的“标签”类型似乎不可正则表达式。现在我觉得也许我在做一些愚蠢的事情，或者在我不知道的 bs3.x 和 bs4 之间发生了一些变化。对此的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:46:05.453

您应该尝试查看`repr`字符串的：

```
>>> a=r"""<h2><a href=\"/accurate-data/210-0023.prd?pageLevel=&amp;skuId=210-0023\">more-accurate-data</a></h2>"""
>>> print repr(a)
'<h2><a href=\\"/accurate-data/210-0023.prd?pageLevel=&amp;skuId=210-0023\\">more-accurate-data</a></h2>' 
```

正则表达式适用于这种表示：

```
>>> regex = re.compile(r"""<h2><a href=\\"/accurate(.*?)\\">""")
>>> regex.match(a)
<_sre.SRE_Match object at 0x20fbf30> 
```

问题是美丽汤的结果是不同的，因为你没有打印它的 repr。在处理正则表达式时，最好检查所`repr`涉及的字符串以避免这样的事情。

# java - Generics, setting ArrayList to ArrayList

> ID：13010660
> 
> 赞同：1
> 
> 时间：2012-10-22T11:37:39.000
> 
> 标签：java, generics

I have this pseudo code :

```
Example A
Interface Option
Class OptionImplementer implements Option
ArrayList<ArrayList<? extends Option>> test = new ArrayList<ArrayList<OptionImplementer>>(); <-- Fails? 
```

Why does it fail? Child does implement Option, and I've also tried Super keyword instead of extends.

As "bonus" question, these constructor signatures are postulated to have same erasure:

```
 Example B
    public void test(ArrayList<ArrayList<? extends Option>> test) {

}
public void test(ArrayList<ArrayList<OptionImplementer>> test) {

} 
```

Example A or B should work. A fails so be B should work...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:42:47.860

你确定它失败了吗？它不应该，当我尝试这个时它不会：

```
interface Option {}
class Child implements Option {}

public class Example {
    public static void main(String[] args) {
        ArrayList<? extends Option> list = new ArrayList<Child>();
    }
} 
```

`list`但是请注意，如果您这样编写，则无法添加任何内容。为什么你不能添加到这样的列表之前已经被问过很多次了，例如：

*   [<? 超级 E> 和 <? 为列表扩展 E>](https://stackoverflow.com/questions/1906677/super-e-and-extends-e-for-list)
*   [Java泛型中的“超级”和“扩展”有什么区别](https://stackoverflow.com/questions/1910892/what-is-the-difference-between-super-and-extends-in-java-generics)
*   [< 和有什么区别？超级 E> 和 <? 扩展 E>?](https://stackoverflow.com/questions/1368166/what-is-a-difference-between-super-e-and-extends-e)
*   [<? 之间的区别 超级 T> 和 <? 在 Java 中扩展 T>](https://stackoverflow.com/questions/4343202/difference-between-super-t-and-extends-t-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:23:49.940

这是因为一个

```
ArrayList<ArrayList<? extends Option>> 
```

可以包含两个类型的条目`ArrayList<Option>`，`ArrayList<OptionImplementer>`虽然

```
ArrayList<ArrayList<OptionImplementer>>() 
```

只能包含第二种类型的条目。在第一种情况下，允许以下情况：

```
test.add(new ArrayList<Option>());
test.add(new ArrayList<OptionImplementer>()); 
```

关于你的第二个问题，它是不相关的，但这只是意味着如果你删除所有通用信息，这些方法将具有相同的签名，这是不允许的。

# html - Underflow on transparent fixed header

> ID：13010661
> 
> 赞同：1
> 
> 时间：2012-10-22T11:37:42.397
> 
> 标签：html, css

I have built a page with a fixed header that always stays on top of the page. The page has a background picture and the header is transparent.

My basic layout:

```
<div id="header-container">

    <header class="wrapper">
        <h1 id="title">Headline</h1>
    </header>
    <nav id="main-navigation" class="wrapper">
        <ul>
            <li><a href="#">Nav Item</a></li>
        </ul>
    </nav> <!-- #main-navigation -->

</div> <!-- #header-container -->

<div id="main-container" class="wrapper">

    <article id="main">    
            <section class="content">
                <h2>some headline</h2>
                <p>content stuff</p>
            </section>
    </article> <!-- #main -->

    <footer id="footer">
            footer stuff
    </footer><!-- #footer -->

</div> <!-- #main-container -->​ 
```

And this is the most important css:

```
#main-container {
    margin-top: 150px;
}    

#header-container{
    height: 150px;
    top: 0;
    position: fixed;
    right: 0;
    left: 0;
    z-index: 1030;
} 
```

Here my jsfiddle: [http://jsfiddle.net/0xsven/RBnHt/](http://jsfiddle.net/0xsven/RBnHt/)

When I scroll the site down I want the #main-container's underflow (below the header-container) to be hidden (somehow like a reversed overflow:hidden).

How do I accomplish that without changing too much on the layout side?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:17:03.063

问题是透明标题。

如果它是透明的，那么你会看到身体在里面滚动……

背景图像适用于整个文档，而不仅仅是标题。

你真的应该分割你的图像，一个 150px 的图像作为标题，一个没有前 150px 的图像作为其余部分。

看看这个：http: [//jsfiddle.net/tTjVe/1/](http://jsfiddle.net/tTjVe/1/)

```
#header-container{
    ...
    ...
    background: url("http://www.webdesign.org/img_articles/20024/110.jpg") no-repeat top center fixed;
    background-size: 100% 150px;
} 
```

小提琴也为标题和正文使用了相同的整个背景图像......只需将其分成两部分，你会没事的。

# iphone - iPhone Map application ipa crashing on iOS6

> ID：13010665
> 
> 赞同：1
> 
> 时间：2012-10-22T11:37:51.837
> 
> 标签：iphone, ios6, mapkit

My Map application is on iTune market which runs good on iOS 4 and iOS 5\. I have developed this application using Xcode 3.2, iPhone sdk 4.2 on Mac mini having Mac OS 10.6.8.

This application .ipa file is crashing after launching on iOS 6\. I am developing app on MacMini and I could not able to run xcode 4.5 to rectify the crash. I am pasting some code which runs on launching. If there is some deprecated methods which causes crash then please help because I am not able to check this code without Mac OS 10.7(Lion)..

```
 - (void)viewDidLoad {
if([appDelegate.markers count] == 0 && [mapView.annotations count] == 0 && UserId.data == 0)
{
[self performSelector:@selector(launchActivity) withObject:nil afterDelay:1.0];
}
}

- (void) launchActivity {
 Reachability *r = [Reachability reachabilityWithHostName:@"www.google.com"];
 NetworkStatus internetStatus = [r currentReachabilityStatus];

if ((internetStatus != ReachableViaWiFi) && (internetStatus != ReachableViaWWAN))
{
UIAlertView *myAlert = [[UIAlertView alloc] initWithTitle:@"No Internet  Connectivity!" message:@"This app require an internet connection via WiFi or cellular  network to work." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [myAlert show];
    [myAlert release];
}
else
{
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
    [locationManager startUpdatingLocation];

    if([self.mapView.annotations count] == 1) 
    { 

    } 

    if (locationManager.location == nil)
    {

    }
    else
    {
        // Change map region using span (degrees)...
        MKCoordinateSpan span = MKCoordinateSpanMake(0.001, 0.001);
        MKCoordinateRegion region = MKCoordinateRegionMake
        (locationManager.location.coordinate, span);
        [mapView setRegion:region animated:YES];

    }
    mapView.showsUserLocation = YES;

    BOOL locationAllowed = [CLLocationManager locationServicesEnabled];

    if (locationAllowed==NO)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Location Service Disabled" 
                                                        message:@"To re-enable, please go to Settings and turn on Location Service for this app." 
                                                       delegate:nil 
                                              cancelButtonTitle:@"OK" 
                                              otherButtonTitles:nil];
        [alert show];
        [alert release];
        return;
    }
    else
    {

    [NSThread detachNewThreadSelector:@selector(updateFilterProgress) toTarget:self withObject:nil];   //NSthread not taken because Default.png stay while loading the results

          //==========================================================================================  ==================================
        //Searching Showroom Locations withing the radius

        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        appDelegate = (HettichLocatorAppDelegate *)[[UIApplication sharedApplication] delegate];

        CLLocationCoordinate2D location;

    NSString *url = [[NSString alloc] initWithFormat:@"http://www.company.com.au/directory/phpsqlsearch_genxml.php?lat=%f&lng=%f&radius=5",locationManager.location.coordinate.latitude,locationManager.location.coordinate.longitude];
        radiusinurl.text = @"5km";
        NSURL *URL = [NSURL URLWithString:url];
        NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:URL];
        //Initialize the delegate.
        XMLParser *parser = [[XMLParser alloc] initXMLParser];
        //Set delegate
        [xmlParser setDelegate:parser];
        //Start parsing the XML file.
        BOOL success = [xmlParser parse];

        [parser release];
        [xmlParser release];
        //[URL release];
        [url release];

        if(success)

        {                   
annobjs = [[NSMutableArray array] retain];
            if([appDelegate.markers count] == 0)
            {
                //some logic
            }

            else
            {

for (int i = 0; i < [appDelegate.markers count]; i++)
{

marker *aMarker = [appDelegate.markers objectAtIndex:i];
location.latitude = [aMarker.lat floatValue];
location.longitude =[aMarker.lng floatValue];
AddressAnnotation *annobj = [[AddressAnnotation alloc] initWithCoordinate:location];

    annobj.title = aMarker.name;
annobj.subtitle = aMarker.address;
[annobjs addObject:annobj];
[mapView addAnnotation:annobj];

CLLocationCoordinate2D ausLoc = {location.latitude,location.longitude};         //for zoom in the showroom results region
MKCoordinateSpan ausSpan = MKCoordinateSpanMake(0.108889, 0.169922);
MKCoordinateRegion ausRegion = MKCoordinateRegionMake(ausLoc, ausSpan);
                    mapView.region = ausRegion;
    [annobj release];
    [_tableView reloadData];
    }

   }
 }
else
{
UIAlertView *myAlert = [[UIAlertView alloc] initWithTitle:@"" message:@"Unable to  find the results." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [myAlert show];
            [myAlert release];
        }
        [pool release]; 
    }

}
}
 } 
```

# php - Google Drive API 访问令牌和重定向 url 问题

> ID：13010680
> 
> 赞同：2
> 
> 时间：2012-10-22T11:38:52.543
> 
> 标签：php, redirect, google-api, google-drive-api, access-token

1 - 是否可以使用始终相同的访问令牌将文件上传/下载到 google Drive API，这是我网站所有用户的一种共享主机，他们可以在其中直接上传和下载文件？如果是的话怎么做？只是在 php 客户端创建/授权中使用“静态”访问令牌变量？

2 - 为什么我在启用 Gdrive api 的 google api 控制台上设置了我的 Web 应用程序项目，但它仍然告诉我我的重定向 url 不匹配？我在 2/3 小时前创建了关于 mmm 的应用程序。需要再等吗？我检查了 url，它们在我的脚本和控制台 api 中都匹配。

3- 正如我从 api 控制台看到的，是否可以要求更多配额达到每天 50 万个请求，它是如何工作的？这需要计费吗？我还能要求多少配额以及在哪些情况下？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:45:47.067

1）您应该使用[Service Accounts](https://developers.google.com/accounts/docs/OAuth2ServiceAccount) ，而不是共享某人的凭据。请记住，访问令牌会在一小时后过期，因此您的方法仍然需要注意刷新这些令牌。

2) 在 API 控制台中配置凭据的时间与它们生效的时间之间没有延迟。请仔细检查您的重定向 URL 是否与 API 控制台中的完全匹配，包括尾部斜杠和 http/https。

3) 如果您需要更多配额，您必须填写一份表格，说明您需要什么。如果授予额外配额，则无需计费。

# c# - 带有集合的 MVVM

> ID：13010686
> 
> 赞同：3
> 
> 时间：2012-10-22T11:39:08.030
> 
> 标签：c#, mvvm

如果我有一个模型应该包含一个集合，例如 book -> authors

我是怎么做到的

像：

```
public class Book
{
    public string Title { get; set; }
    public List<Author> Authors { get; set; }
} 
```

或者更像：

```
public class Book
{
    public string Title { get; set; }
    public List<AuthorViewModel> Authors { get; set; }
} 
```

这两者中哪一个是更常见的方法，我如何从 ViewModel 中获取视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T17:10:55.567

这个肯定是错的：

```
public class Book
{
    public string Title { get; set; }
    public List<AuthorViewModel> Authors { get; set; }
} 
```

但这没关系：

```
public class BookViewModel
{
    public string Title { get; set; }
    public List<AuthorViewModel> AuthorModels { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:48:48.467

根据 MV-VM，低层不应该知道高层。View 知道 ViewModel 和数据绑定到它的属性。ViewModel 知道模型（并公开与其相关的属性），但不知道 View。

同样，Model 也不知道 ViewModel。因此，a`Book`拥有`Author`s，而 a`BookViewModel`可以知道`Book`s、`Author`s，甚至可以（通过中介）调用`AuthorViewModel`s。但是a`Book`根本不应该知道任何`ViewModel`事情。

hth

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:43:33.263

这取决于您的模型是否包含足以呈现视图的属性。如果您需要使用特定于视图的代码来扩充它们，并且您不想用这些附加属性污染您的模型，那么您将创建一个视图模型。

如果您愿意，您可以将模型 ( `Book`) 公开为视图模型 ( `BookViewModel`) 的属性，尽管纯粹主义者会说您应该创建一个包装器属性，该属性代表每个模型属性的模型。

我不确定“如何从视图模型中获取视图”是什么意思，但是[如果您使用的是 MVVM 设计模式，那么您应该使用 MVVM 框架](http://www.lhotka.net/weblog/CommentView,guid,c61fd797-16f7-4f5f-a6fc-226f235b132a.aspx)。以[Caliburn.Micro](http://caliburnmicro.codeplex.com/)为例，如果您首先使用视图模型，那么您将实例化您的视图模型并使用 Caliburn.Micro 定位视图并将两者绑定在一起。

# android - 如何在 android 的 aChartEngine 的折线图中正确格式化 XAxis 值

> ID：13010687
> 
> 赞同：2
> 
> 时间：2012-10-22T11:39:10.820
> 
> 标签：android, achartengine, linechart

如何正确制作 achartEngine 格式的 XAxis？我希望它只有在 X 轴上正确间隔的日期值和日期值，但我似乎无法让它正常工作。

这是我尝试过的：

```
 XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
     dataset.addSeries(series);

     XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
     mRenderer.setBackgroundColor(Color.BLACK);
     mRenderer.setApplyBackgroundColor(true);
     mRenderer.setGridColor(Color.LTGRAY);
     mRenderer.setXLabels(0);
    // mRenderer.setMargins(new int[]{0, 20, 0, 0});

     XYSeriesRenderer renderer = new XYSeriesRenderer();
     //renderer.setDisplayChartValuesDistance(1);
     renderer.setColor(Color.GREEN);

     mRenderer.setXLabels(10);
        if(date_value.length < 10){ //date_value is a large array of dates for the X-Axis

            for(int i = 0; i < date_value.length; i++){
                mRenderer.addXTextLabel(i+1, date_value[i]);    
            }

        }

        else if(date_value.length > 10){

            int mod = date_value.length  %  10;
            int add_mod = mod;
            int last = date_value.length;

            mRenderer.addXTextLabel(0, date_value[0]);

            for(int i=0; i < 10; i++){
                mRenderer.addXTextLabel(i, date_value[mod]);

                     mod+=add_mod; 

            }
            mRenderer.setXLabelsAngle(90);
            //mRenderer.addXTextLabel(date_value.length, date_value[last]);

        }
    /*get the last elements in the array and parse as double to set the maximum range for X*/
        Calendar ist = Calendar.getInstance();
        Calendar last = Calendar.getInstance();
        ist.setTime(formatter.stringToDateReport(date_value[0]));
        last.setTime(formatter.stringToDateReport(date_value[date_value.length-1]));

    mRenderer.setXAxisMin(ist.get(Calendar.DATE));
     mRenderer.setXAxisMax(last.get(Calendar.DATE));
     mRenderer.addSeriesRenderer(renderer); 
     chartView = ChartFactory.getLineChartView(context, dataset, mRenderer);

return chartView; 
```

这就是我得到的：

![在此处输入图像描述](../Images/8105748928542b3942af4738bfbc575e.png)

如您所见，它们的间距不正确，它们位于 x 轴线上并且具有不需要的值，例如 10、15、20 .. 我该如何纠正这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:14:06.140

乍一看，您应该删除该行

```
mRenderer.setXLabels(10); 
```

如您所愿，`setXLabels(0)`您已在另一行中。我认为该代码告诉 AChartEngine 尝试打印 10 个标签以及您的文本标签。

编辑：您还需要`addXTextLabel()`使用您希望标签所在的 x 位置的参数进行调用。所以`renderer.addXTextLabel(date_value_that_should_have_a_string, date_value_string)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:02:33.777

以下代码是在记录（PCM 16bit）数据的正负值显示记录图表.....

```
 public void onDraw(Canvas canvas)
    {       

                paint.setColor(Color.WHITE);
                canvas.drawLine(width/16+(width/8)+(width/100)-1,0,width/16+(width/8)+(width/100)-1,height, paint);
                canvas.drawLine(0,height/2,width,height/2, paint);

                canvas.drawText("32767",(width/20),height/30, paint); 
                canvas.drawText("0",(width/12),(height/2)+(height/80)-(height/2)/2, paint); 
                canvas.drawText("-32767",(width/25),height/2-height/50, paint); 

                canvas.drawText("32767",(width/20),height/2+height/50, paint); 
                canvas.drawText("0",(width/12),(height/2)+(height/80)+(height/2)/2, paint); 
                canvas.drawText("-32767",(width/25),height-height/30, paint); 

                paint.setColor(Color.GREEN);

         for (i=0; i < second.par_second_data ; i++)
         { 

             if (i >= 1)
             {  
                canvas.drawLine(width/16+second.final_width-1+(width/8)+(width/100),(float) (height/2-(height/4)-(height/2*(second.audioData[i-1]-1200)/second.graph_y)),width/16+second.final_width+(width/8)+(width/100),(float) (height/2-(height/4)-(height/2*(second.audioData[i]-1200)/second.graph_y)), paint);
                canvas.drawLine(width/16+second.final_width-1+(width/8)+(width/100),(float) (height/2+(height/4)-(height/2*(second.fftArray[i-1].re())/second.graph_z)),width/16+second.final_width+(width/8)+(width/100),(float) (height/2+(height/4)-(height/2*(second.fftArray[i].re())/second.graph_z)), paint);

                //canvas.drawLine(width/16+second.final_width+(width/8)+(width/100),height/2-(height/4),width/16+second.final_width+(width/8)+(width/100),(float) (height/2-(height/4)-(height/2*(second.audioData[i]-1200)/second.graph_y)), paint);
                //canvas.drawLine(width/16+second.final_width+(width/8)+(width/100),height/2+(height/4),width/16+second.final_width+(width/8)+(width/100),(float) (height/2+(height/4)-(height/2*(second.fftArray[i].re())/second.graph_z)), paint);
            }
                second.final_width=second.final_width+1;
        }
        second.final_width=0;

    } 
```

# android - XML 文件中的相对布局

> ID：13010689
> 
> 赞同：0
> 
> 时间：2012-10-22T11:39:15.643
> 
> 标签：android, android-layout

我的 XML 文件中有以下代码：

```
 <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="60dip"
        android:layout_marginLeft="13dp"
        android:layout_marginRight="13dp"
        android:layout_marginTop="20dp"
        android:background="@color/white"
        android:orientation="vertical" >

        <RelativeLayout
            android:id="@+id/name_view"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/pic"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_marginLeft="6dp" />

            <EditText 
                android:id="@+id/name"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="15dp"
                android:layout_alignRight="@id/pic" />          
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/phone_view"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/phone_pic"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_marginLeft="6dp"
                android:layout_weight="0.15" />

            <EditText 
                android:id="@+id/phone_number"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="15dp"
                android:layout_alignRight="@id/phone_pic" />            
        </RelativeLayout>

    </LinearLayout> 
```

我想要里面的`ImageView`and字段和右边的E字段。但是，当我检查图形布局时，and被放置在以及. 我做错了什么以及如何纠正这个问题？`EditText``RelativeLayout``EditText``ImageView``EditText``ImageView``RelativeLayout``LinearLayout`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:47:57.367

你为什么不把你的换成`RelativeLayout`水平的`LinearLayout`

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="60dip"
    android:layout_marginLeft="13dp"
    android:layout_marginRight="13dp"
    android:layout_marginTop="20dp"
    android:background="@color/white"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/name_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/pic"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_marginLeft="6dp" />

        <EditText 
            android:id="@+id/name"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dp" />          
    </LinearLayout>

    <LinearLayout
        android:id="@+id/phone_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/phone_pic"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_marginLeft="6dp"
            android:layout_weight="0.15" />

        <EditText 
            android:id="@+id/phone_number"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dp" />            
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:56:00.983

这将帮助你......

```
 <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:src="@drawable/ic_launcher" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
         android:layout_centerVertical="true"
        android:layout_toRightOf="@+id/imageView1"
        android:ems="10" >

        <requestFocus />
    </EditText>

</RelativeLayout> 
```

![在此处输入图像描述](../Images/8f95b6ed01200fea768af9da74c98c47.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:52:59.483

尝试使用属性`android:layout_toRightOf`

> 将此视图的左边缘定位到给定锚视图 ID 的右侧。容纳此视图的左边距和锚点视图的右边距。

所以试试这个：

```
 <RelativeLayout
        android:id="@+id/name_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/pic"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_marginLeft="6dp" />

        <EditText 
            android:id="@+id/name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dp"
            android:layout_toRightOf="@+id/pic" />          
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/phone_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/phone_pic"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_marginLeft="6dp"
            android:layout_weight="0.15" />

        <EditText 
            android:id="@+id/phone_number"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dp"
            android:layout_toRightOf="@+id/phone_pic" />            
    </RelativeLayout>

</LinearLayout> 
```

* * *

如果您想通过一个示例更好地理解，这里有一个适合您。而且还有源代码可以测试。[http://www.mkyong.com/android/android-relativelayout-example/](http://www.mkyong.com/android/android-relativelayout-example/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:59:06.823

你可以试试这段代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="60dp"
android:layout_marginLeft="13dp"
android:layout_marginRight="13dp"
android:layout_marginTop="20dp"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/name_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/pic"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:src="@drawable/ic_launcher" />

    <EditText
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:layout_toRightOf="@id/pic" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/phone_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/phone_pic"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:src="@drawable/ic_launcher" />

    <EditText
        android:id="@+id/phone_number"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:layout_toRightOf="@id/phone_pic" />

</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T12:01:10.623

正如 rogcg 先生所说，尝试 android:layout_toRightOf 它会起作用。但是，您还必须对线性布局属性进行某些更改。您已指定 android:layout_height="60dip"

这导致连续的相对布局被隐藏。使其填充父级并设置 layout_toRightOf。它会起作用的。

同样为图像视图分配一个 src 如下 android:src="@drawable/someimage"

谢谢和问候， Rajamanickem.S

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-22T11:45:29.623

在布局中更改这些代码行这是错误的

```
android:layout_alignRight="@id/phone_pic" 
android:layout_alignRight="@id/pic" 
```

在下面写下这些

```
android:layout_alignRight="@+id/phone_pic"
  android:layout_alignRight="@+id/pic" 
```

# java - webdriver 导入 setSelected

> ID：13010691
> 
> 赞同：0
> 
> 时间：2012-10-22T11:39:21.913
> 
> 标签：java, selenium, webdriver, testng, selenium-webdriver

如何在 selenium Web 驱动程序中导入 setSelected 和切换命令。我需要使用该命令来选择一个复选框（我不能使用元素。单击此处）我正在使用 Java 和 testNG 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:11:36.283

这些命令在 Selenium WebDriver API 中很久以前就被弃用了。没有办法“导入”它们并使它们正常工作。更改复选框值的正确方法是使用`.click()`方法。您说此方法对您不可用，这通常表示当您尝试单击复选框时该复选框不可见或未启用。在这种情况下，正确的做法是使复选框可见或启用，但您网站的用户会这样做。您还可以选择使用 JavaScript 更改复选框的值，但这意味着您可能会绕过您网站的某些代码。

# .net - Double Convert.ToDecimal 控制十进制数字

> ID：13010695
> 
> 赞同：2
> 
> 时间：2012-10-22T11:39:30.963
> 
> 标签：.net

我正在尝试使用 Convert.ToDecimal 函数将双精度数转换为十进制数。问题是 .net 以某种方式根据原始双变量的大小选择省略十进制数字。

举个例子：

```
 double d = 2999247013.972682;
        decimal convDecimal = Convert.ToDecimal(d);
        decimal realDecimal = 2999247013.972682M;

        Console.WriteLine(d);
        Console.WriteLine(convDecimal);
        Console.WriteLine(realDecimal); 
```

产生以下输出：

```
2999247013,97268  // comments: (actual value 2999247013,972682)
2999247013,97268  // comments: (actual value 2999247013,97268)
2999247013,972682 // comments: (actual value 2999247013,972682) 
```

(',' 是当前语言环境的小数分隔符)

我想要实现的是使用 Convert.ToDecimal(d) 并获得十进制数 2999247013,972682。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:47:42.493

这是因为`Decimal`返回的值最多只能有 15 个有效数字。来自[MSDN](http://msdn.microsoft.com/en-us/library/a69w9ca0.aspx)。

> 此方法返回的[Decimal](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)值最多包含 15 个有效数字。如果 value 参数包含超过 15 个有效数字，则使用舍入到最接近的方式对其进行舍入。下面的示例说明 Convert.ToDecimal(Double) 方法如何使用舍入到最接近来返回具有 15 个有效数字的[Decimal](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)值。

因此，如果有效数字超过 15 个，它将被四舍五入，这就是您的情况，因为`double`您传递的值有 16 个有效数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:49:54.603

正如这里提到[的](http://msdn.microsoft.com/en-us/library/678hzkk9(v=VS.71).aspx)，.net 中的双重数据类型有 15-16 位，我猜在你的情况下它是 15，所以它省略了最后一位。你为什么首先使用双精度？您可以阅读[double vs decimal](https://stackoverflow.com/questions/1165761/decimal-vs-double-which-one-should-i-use-and-when)以了解有关这些类型及其用法的更多信息。

# java - 延迟初始化 - 测试 CardLayout 是否添加了特定面板

> ID：13010701
> 
> 赞同：1
> 
> 时间：2012-10-22T11:39:52.223
> 
> 标签：java, swing, awt, layout-manager, cardlayout

我有一个带有字符串列表的列表框。根据选择的字符串，我需要在下面显示一组文本框。我的方法是为每组文本框创建一个 JPanel，然后将所有这些 JPanel 放入卡片布局中。当用户选择一个特定的字符串时，我将翻转卡片布局以显示带有文本框的适当面板。但是，我不想事先创建所有面板，因为用户可能永远不会选择一些列表值。因此，仅当用户选择列表值时，我想检查卡片布局是否添加了此卡片（或面板），如果没有，则创建新面板（带有文本框）并将其添加到卡片布局中。

但是我在 CardLayout 类中看不到任何 API，它可以让我测试是否已将特定面板添加到卡片布局中。只有

> void addLayoutComponent（字符串名称，组件组合）

这不会返回任何内容来测试成功将面板添加到卡 laout。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T12:08:24.097

布局管理器使用了一个`Hashtable`（甚至没有`HashMap`），`CardLayout`但这仅在内部使用，不对外公开。

这里有两种可能的解决方案：

1.  您可以单独保留一个`HashMap<String, JPanel>`以说明您创建的面板。
2.  在添加到接收容器之前，您可以保留`JPanel`参考列表并检查和实例化。`null`

# php - 只是一个关于 access_token 的查询

> ID：13010705
> 
> 赞同：-1
> 
> 时间：2012-10-22T11:40:19.217
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

> **可能重复：**
> [如何访问 fb 访问令牌表单服务器运行程序（python）](https://stackoverflow.com/questions/12758961/how-to-access-fb-access-token-form-server-running-program-python)

我制作了一个应用程序，允许我登录并存储 fbuid 和其他一些东西，因为我只是在测试。我已经开始制作一个 php 命令行程序，它也像我的 web 应用程序一样使用 php-sdk。唯一的问题是，当 php 命令行程序在浏览器之外运行时，它无法访问会话来获取 access_token，这使得程序为 getuser 显示 0。我认为将 access_token 存储在数据库以及其他数据库中，并从数据库中获取并设置它，然后程序应该显示用户并可以访问 Graph API。那么，如果我没有通过 Web 应用程序登录，它如何检查 access_token 是否已更改，由于没有与命令程序的身份验证交互，它无法更改 access_token。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:58:39.313

拥有 access_token 并不意味着 PHP SDK 可以自动从中提取用户 ID。如果你想让你的命令行脚本知道用户，你必须先请求`/me`使用访问令牌。（在那之后，getUser 仍然无法工作，但您知道用户 ID 并且可以在必要时将其手动放入您的 API 调用中。）

要检查 access_token 的有效性，请参阅[https://developers.facebook.com/docs/howtos/login/debugging-access-tokens/#step1](https://developers.facebook.com/docs/howtos/login/debugging-access-tokens/#step1)

# hive - 将时间分区添加到表的最佳实践

> ID：13010711
> 
> 赞同：0
> 
> 时间：2012-10-22T11:40:54.407
> 
> 标签：hive, emr, hiveql

有一个事件表，按时间（年、月、日、小时）分区想要在配置单元脚本中加入一些事件，这些事件将年、月、日、小时作为变量，你如何添加例如所有 6 小时的事件在我没有“恢复所有……”的情况下之前

10倍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:08:32.690

所以基本上我需要的是一种使用 Hive 脚本作为参数接收的日期并在该日期之前 3 小时和之后 3 小时添加所有分区的方法，而不恢复所有分区并在每个 Where 子句中添加特定时间。

没有找到在 hive 脚本中执行此操作的方法，因此我编写了一个快速的 python 代码，该代码获取日期和表名，以及从之前/之后添加多少小时。当尝试在 Hive 脚本中运行它时： !python script.py tablename ${hivecond:my.date} 3 我很惊讶变量替换不会发生在以 ! 开头的行中。

我的解决方法是使用以下内容获取 hive 脚本从机器中的日志文件中收到的日期：'cat /mnt/var/log/hadoop/steps/ `ls /mnt/var/log/hadoop/steps/ |sort -r|head -n 1`/stdout'，然后您可以从那里解析每个 hive 参数python 代码而不通过 Hive 传递它。

# jquery - 在 textarea 输入上增加 div 的宽度和高度

> ID：13010715
> 
> 赞同：0
> 
> 时间：2012-10-22T11:41:10.957
> 
> 标签：jquery, html, textarea

我试图得到答案。google 也搜到了。但遗憾的是无法得到答案。我有一个带有 textarea 的 div。在 keyup 我希望 div 随着输入的文本而增加，并且在输入时按 div 高度应该根据字体大小增加。当我按下回车键时，宽度会从停止的位置继续增加。检查这个小提琴并帮助我解决功能。 **演示**：http: [//jsfiddle.net/shabbirrangwala/NkRYY/8/](http://jsfiddle.net/shabbirrangwala/NkRYY/8/)

```
$('textarea').keyup(function(e) {

if ((e.keyCode || e.which) == 13) {
$('.EDetailInset').css('height', ((this.value.length + 1) * 3) + 'px');

}
else 
{
$('.EDetailInset').css('width', ((this.value.length + 1) * 11) + 'px');

}
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:45:30.990

您可以将 +=15 作为参数传递给 css 函数。尝试这个：

```
$('textarea').keyup(function(e) {

    if ((e.keyCode || e.which) == 13) {
        $('.EDetailInset').css('height', "+=30");
    }
    else {
        $('.EDetailInset').css('width', "+=30");
    }
}); 
```

如果你想做更高级的事情，我建议你[阅读这篇文章。](http://api.jquery.com/css/#example-1-4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:57:06.570

试试这个，它就像你希望它改变`textarea`为 a一样工作`div` ，我使用 div 的高度和宽度来保持正确的高度/宽度[http://jsfiddle.net/NkRYY/9/](http://jsfiddle.net/NkRYY/9/)

# cruisecontrol.net - 发生源代码管理异常时，Cruise Control .NET 不会失败构建

> ID：13010716
> 
> 赞同：1
> 
> 时间：2012-10-22T11:41:11.333
> 
> 标签：cruisecontrol.net

当发生源代码控制异常时，Cruise Control .NET 不会失败构建，这是非常意外的，因为在托盘图标中显示构建状态成功。我尝试使用 modifyDelaySeconds、maxSourceControlRetries、sourceControlErrorHandling、stopProjectOnReachingMaxSourceControlRetries 块而没有任何结果。我还尝试在预构建和发布者块中检查与 svn 服务器的连接，但是预构建块在源代码控制块之后执行，因此它永远不会发生，并且发布者块不能失败构建......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:39:03.473

这里有问题吗？

如果您说巡航控制将源代码控制失败报告为成功构建，那么是的，我相信我理解您的意思。

巡航控制将报告最后一次构建的状态。由于源代码控制失败不会产生构建，因此它无法显示最后的构建状态。

# three.js - 将场景渲染到其他场景中的平面

> ID：13010717
> 
> 赞同：0
> 
> 时间：2012-10-22T11:41:17.263
> 
> 标签：three.js

我想在其他场景中渲染一个场景到平面，谁知道怎么做？事实上，我想创造一个世界，并且有一个电视，用户可以在电视中的世界进行互动，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:46:09.507

此示例显示如何将场景渲染为纹理：
[http ://stemkoski.github.com/Three.js/Camera-Texture.html](http://stemkoski.github.com/Three.js/Camera-Texture.html)

# javascript - Phonegap 应用程序上的黑莓内存不足问题

> ID：13010721
> 
> 赞同：0
> 
> 时间：2012-10-22T11:41:26.810
> 
> 标签：javascript, cordova, jquery-mobile, blackberry

我正在为 BlackBerry 6.0+ 设备开发 JQM + Phonegap 应用程序。在应用程序中，我需要以 Base64 编码格式将图像上传到服务器。

我正在使用 HTML5 画布元素执行此操作。当应用程序尝试执行上述操作时，我得到一个内存不足的错误，在此之后应用程序立即退出。应用程序图标也在此之后发生变化。我正在使用 WebWorks SDK 2.3 和 phonegap 1.7 版。

我浏览过黑莓论坛，内存问题似乎是一个已知的问题。有没有其他方法可以执行此操作以避免此错误？

此问题特定于 6.0 BB 设备。相同的应用程序在 7.0 设备上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:32:04.913

尝试

1.  从您的配置文件中删除此代码（包括开始和结束标记）

    > 边缘：导航模式=“焦点”
    > 
    > 功能 id="blackberry.ui.dialog"

2.  动态加载脚本并在脚本加载并准备好时执行回调函数以上传图像，这种行为最可能的原因是您包含在 html 页面中的资源在应用程序关闭时没有释放。黑莓的警戒线插件也是一个巨大的资源，所以它应该占用大量内存。

    ```
    function loadScript(url, callback)
    {
        // adding the script tag to the head as suggested before
        var head = document.getElementsByTagName('head')[0];
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src=url;
        // then bind the event to the callback function 
        // there are several events for cross browser compatibility
        script.onreadystatechange = callback;  // not working on OS5
        script.onload = callback;  // not working on OS5
        // fire the loading
        head.appendChild(script);
    } 
    ```

3.  如果您的应用程序在安装或卸载应用程序时未清除设备存储或本地存储或设备存储，则您必须对此进行编码（对于 iOS 和 android 应用程序自动完成）。

以上三项降低了低设备内存错误的概率。

从最终用户的角度来看，如果应用程序不使用嵌入式媒体，请取消勾选或取消选择“使用嵌入式媒体”

如果与服务器进行通信，您可能希望重构代码以减少执行代码的平均时间，并采用一些压缩算法来减少网络过载。

# objective-c - 使用 Box2D 在 Cocos2D 中缩放精灵的正确方法是什么？

> ID：13010725
> 
> 赞同：1
> 
> 时间：2012-10-22T11:41:41.150
> 
> 标签：objective-c, cocos2d-iphone, box2d, box2d-iphone

我正在使用 PhysicsSprite 类

我已经更改了这段代码：

```
transform_ = CGAffineTransformMake( c,  s,
                                   -s,  c,
                                   x,   y ); 
```

在`nodeToParentTransform`方法上：

```
transform_ = CGAffineTransformMake( c * scaleX_,  s * scaleX_,
                                   -s * scaleY_,  c * scaleY_,
                                   x,   y ); 
```

问题是物理体放错了位置，正如您在此屏幕截图中看到的那样（在调试图中启用了 e_shapeBit）：

![方形僵尸](../Images/9d0677e51710ae2d67f7c4ad707998b2.png)

实体创建如下：

```
 b2BodyDef bodyDef;
    bodyDef.type = b2_dynamicBody;
    bodyDef.position.Set(brick.sprite.position.x/PTM_RATIO, brick.sprite.position.y/PTM_RATIO);
    bodyDef.userData = brick.sprite;
    b2Body *body = world->CreateBody(&bodyDef);
    body->SetGravityScale(0);
    brick.sprite.userData = body;

    b2PolygonShape dynamicBox;
    dynamicBox.SetAsBox(levelObj.brickScale * .5f, levelObj.brickScale * .5f);

    b2FixtureDef fixtureDef;
    fixtureDef.shape = &dynamicBox;
    fixtureDef.density = 1.0f;
    fixtureDef.friction = 0.3f;
    body->CreateFixture(&fixtureDef);

    body->SetType(b2_dynamicBody);
    brick.sprite.userObject = brick;
    [brick.sprite setPhysicsBody:body]; 
```

**编辑：** 对不起，我说得不够清楚：通过缩放我的意思是自然的 Cocos2D 构造，类的实例`brick.sprite.scale = 0.5f`在哪里。不修改它根本没有效果。砖块精灵是 32x32px，它提供 1x1m 的物理尺寸，因此是 SetBox 参数。`brick.sprite``PhysicsSprite``nodeToParentTransform``PTM_RATIO = 32`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:57:38.777

您不必修改*nodeToParentTransform*方法来支持缩放。你可以初始化你的身体的形状来匹配你的精灵的尺寸：

```
dynamicBox.SetAsBox(brick.sprite.contentSize.width/PTM_RATIO * brick.sprite.scaleX * .5f, brick.sprite.contentSize.height/PTM_RATIO * brick.sprite.scaleY * .5f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T10:27:05.043

最好的方法是在精灵高度和重量的帮助下创建身体。

# php - PHP cURL 在 10 个请求后设置延迟

> ID：13010726
> 
> 赞同：0
> 
> 时间：2012-10-22T11:41:43.980
> 
> 标签：php, web-scraping, curl-multi

我正在使用 PHP 和 cURL 来抓取单个网站页面的 html。通过实验，我发现我的代码仅在我指定 10 个或更少的 URL 时才有效`$nodes array`（参见代码示例）。我需要一次抓取大约 100 页并将源代码保存到文件中。这可以使用 cURLS 内置函数之一来完成吗？

这是我目前正在使用的代码：

```
function getHTML(){

$nodes = array(

'http://www.example.com/page1.html',
'http://www.example.com/page2.html',
'http://www.example.com/page3.html',
'http://www.example.com/page4.html',
'http://www.example.com/page5.html',
'http://www.example.com/page6.html',
'http://www.example.com/page7.html',
'http://www.example.com/page8.html',
'http://www.example.com/page9.html',
'http://www.example.com/page10.html',
'http://www.example.com/page11.html',
'http://www.example.com/page12.html',
'http://www.example.com/page13.html',
'http://www.example.com/page14.html',
'http://www.example.com/page15.html',
'http://www.example.com/page16.html',
'http://www.example.com/page17.html',
'http://www.example.com/page18.html',
'http://www.example.com/page19.html',
'http://www.example.com/page20.html' ...and so on...

);

$node_count = count($nodes);

$curl_arr = array();
$master = curl_multi_init();

for($i = 0; $i < $node_count; $i++)
{
    $url =$nodes[$i];
    $curl_arr[$i] = curl_init($url);
    curl_setopt($curl_arr[$i], CURLOPT_RETURNTRANSFER, true);
    curl_multi_add_handle($master, $curl_arr[$i]);
}

do {
    curl_multi_exec($master,$running);
} while($running > 0);

echo "results: ";
for($i = 0; $i < $node_count; $i++)
{
    $results = curl_multi_getcontent  ( $curl_arr[$i]  );
    echo( $i . "\n" . $results . "\n");
echo 'done';

file_put_contents('SCRAPEDHTML.txt',$results, FILE_APPEND);

}
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:11:42.517

我尝试在我的项目中滚动 curl 库。我希望它可能会有所帮助。

[http://code.google.com/p/rolling-curl/source/browse/trunk/RollingCurl.php](http://code.google.com/p/rolling-curl/source/browse/trunk/RollingCurl.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:01:15.990

我认为是超过了php执行时间。您可以尝试插入“set_time_limit(300);” 在包含函数 getHTML 的 php 文件的顶部。数字“300”表示这个 php 执行时间是 300 秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:46:19.040

将数组分成 10 个块，然后`curl_multi`多次执行循环

```
$perRequest = 10;
for($i = 0; $i < count($nodes); $i += $perRequest)
{
    $currentNodes = array_slice($nodes, 0, $perRequest);

    // Normal curl_multi code using $currentNodes
} 
```

# ios - 操作无法完成。（可可错误 512。）Coredata Iphone。文件文件夹中不能复制任何文件

> ID：13010731
> 
> 赞同：4
> 
> 时间：2012-10-22T11:42:04.983
> 
> 标签：ios, iphone, sqlite, core-data

我正在为 ios 5.1 开发一个 xcode 4.3 版本的 coredata 项目。我创建了一个 ARC 空项目，选中了 CoreData 复选框，遵循 xcode 添加的方法来管理模型并由我按照将预填充 sqllite db 复制到我的应用程序的教程进行修改，预填充 db 位于项目文件夹内的资源组中并且具有相同的模型和项目名称。

```
- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
            // Replace this implementation with code to handle the error appropriately.
            // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
         } 
     }
}

#pragma mark - Core Data stack

// Returns the managed object context for the application.

// If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.

- (NSManagedObjectContext *)managedObjectContext
{
    if (_managedObjectContext != nil) {
         return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        _managedObjectContext = [[NSManagedObjectContext alloc] init];
        [_managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return _managedObjectContext;
}

// Returns the managed object model for the application.
// If the model doesn't already exist, it is created from the application's model.

- (NSManagedObjectModel *)managedObjectModel
{
    if (_managedObjectModel != nil) {
        return _managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Prova1" withExtension:@"momd"];

NSLog(@"modelURL %@",modelURL);

    _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return _managedObjectModel;
}

// Returns the persistent store coordinator for the application.
// If the coordinator doesn't already exist, it is created and the application's store added to it.

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

NSString *storePath = [[[self applicationDocumentsDirectory] absoluteString] stringByAppendingPathComponent:@"Prova1.sqlite"];
 NSLog(@"storePath %@",storePath);

 NSURL *storeURL = [NSURL fileURLWithPath:storePath];
 NSLog(@"storeURL %@",storeURL);

 // Put down default db if it doesn't already exist
 NSFileManager *fileManager = [NSFileManager defaultManager];
 if (![fileManager fileExistsAtPath:storePath]) {
     NSString *defaultStorePath = [[NSBundle mainBundle] pathForResource:@"Prova1" ofType:@"sqlite"];
     if (defaultStorePath) {
          [fileManager copyItemAtPath:defaultStorePath toPath:storePath error:NULL];
     }
}/**/

/*NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Prova1.sqlite"];*/

NSError *error = nil;
_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
    /*
     Replace this implementation with code to handle the error appropriately.

     abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 

     Typical reasons for an error here include:
     * The persistent store is not accessible;
     * The schema for the persistent store is incompatible with current managed object model.
     Check the error message to determine what the actual problem was.

     If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

     If you encounter schema incompatibility errors during development, you can reduce their frequency by:
     * Simply deleting the existing store:
     [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

     * Performing automatic lightweight migration by passing the following dictionary as the options parameter:
     @{NSMigratePersistentStoresAutomaticallyOption:@YES, NSInferMappingModelAutomaticallyOption:@YES}

     Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.

     */
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}    

return _persistentStoreCoordinator;
}

#pragma mark - Application's Documents directory
// Returns the URL to the application's Documents directory.

- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
} 
```

在这里，viewcontroller 的实现带有一些与 db 交互的字段。

```
@implementation ALCViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    self.textfied1 = [[UITextField alloc] initWithFrame:CGRectMake(200, 50, 300, 30)];
    self.textfied1.borderStyle = UITextBorderStyleRoundedRect;
    self.textfied1.delegate = self;
    [self.view addSubview:self.textfied1];

    self.textfied2 = [[UITextField alloc] initWithFrame:CGRectMake(200, 100, 300, 30)];
    self.textfied2.borderStyle = UITextBorderStyleRoundedRect;
    self.textfied2.delegate = self;
    [self.view addSubview:self.textfied2];

    self.salvaButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [self.salvaButton setFrame:CGRectMake(200, 150, 100, 20)];
    [self.salvaButton setTitle:@"salva" forState:UIControlStateNormal];
    [self.salvaButton addTarget:self action:@selector(salva:) forControlEvents:UIControlEventTouchDown];
    [self.view addSubview:self.salvaButton];

    self.cercaButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [self.cercaButton setFrame:CGRectMake(200, 200, 100, 20)];
    [self.cercaButton setTitle:@"Elenca" forState:UIControlStateNormal];
    [self.cercaButton addTarget:self action:@selector(cerca:) forControlEvents:UIControlEventTouchDown];
    [self.view addSubview:self.cercaButton];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    UIToolbar *toolbar = [[UIToolbar alloc] init];
    [toolbar setBarStyle:UIBarStyleBlackTranslucent];
    [toolbar sizeToFit];
    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(doneClicked:)];

    if ([textField isEqual:self.textfied1]) {
        [doneButton setTag:1];
    }
    if ([textField isEqual:self.textfied2]) {
        [doneButton setTag:2];
    }

    [toolbar setItems:[NSArray arrayWithObjects:/*flexibleSpaceLeft,*/ doneButton, nil]];
    [textField setInputAccessoryView:toolbar];
    [textField setText:@""];
    [textField setTextColor:[UIColor blackColor]];
    [textField setFont:[UIFont systemFontOfSize:16]];/**/
    return YES;
}

- (void)doneClicked:(id)sender {
    UIButton *bSender = (UIButton *)sender;

    switch ([bSender tag]) {
    case 1: {
        [self.textfied1 resignFirstResponder];
    }
    break;
    case 2: {
        [self.textfied2 resignFirstResponder];
    }
    break;
    default:
    break;
    }
}

- (void)salva:(id)sender {
    ALCAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];

    NSManagedObject *newContact;
    newContact = [NSEntityDescription insertNewObjectForEntityForName:@"Stica" inManagedObjectContext:context];
    [newContact setValue:self.textfied1.text forKey:@"nome"];
    [newContact setValue:self.textfied2.text forKey:@"sfiga"];

    self.textfied1.text = @"";
    self.textfied2.text = @"";

    NSError *error;
    [context save:&error];
    //status.text = @”Contact saved”;
}

- (void)cerca:(id)sender {
    ALCAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    NSEntityDescription *entityDesc = [NSEntityDescription entityForName:@"Stica" inManagedObjectContext:context];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entityDesc];

    /*NSPredicate *pred = [NSPredicate predicateWithFormat:@"(name = %@)", name.text];
 [request setPredicate:pred];*/

    NSError *error;

    NSArray *objects = [context executeFetchRequest:request error:&error];

    if ([objects count] == 0) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Risultati" message:@"Vuoto" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];
    } 
    else {
        for (NSManagedObject *object in objects) {
            NSMutableString *string = [[NSMutableString alloc] initWithFormat:@"%@ - %@",[object valueForKey:@"nome"],[object valueForKey:@"sfiga"]];
            NSLog(@"%@",string);
        }
    }
}

@end 
```

当我尝试查看存储在数据库中的记录时，问题就来了，实际上是按下名为“Elenca”的按钮的错误，xcode 给了我这个错误：

```
Unresolved error Error Domain=NSCocoaErrorDomain Code=512 
"The operation couldn’t be completed. (Cocoa error 512.)" 
UserInfo=0x6e7a120 {
    reason=Failed to create file; code = 2
}, 
{
    reason = "Failed to create file; code = 2";
} 
```

我也尝试输出一些变量：

**storePath**文件：/localhost/Users/winimac01/Library/Application%20Support/iPhone%20Simulator/5.1/Applications/7733DC6C-CE52-4EB4-9A60-26962F7AEDD9/Documents/Prova1.sqlite

**storeURL**文件：/localhost/Users/winimac01/Library/Application%2520Support/iPhone%2520Simulator/5.1/Applications/7733DC6C-CE52-4EB4-9A60-26962F7AEDD9/Documents/Prova1.sqlite -- file://localhost/

**型号网址**attributeType 700 , attributeValueClassName NSString, defaultValue (null)\";\n nome = \"(), name nome, isOptional 1, isTransient 0, entity Meco, renamingIdentifier nome, 验证谓词 (\n), 警告 (\n), versionHashModifier (null)\n userInfo {\n}, attributeType 700, attributeValueClassName NSString, defaultValue (null)\";\n relationship = \"(), name 关系, isOptional 1, isTransient 0, entity Meco, renamingIdentifier 关系, 验证谓词 (\n), 警告 (\n), versionHashModifier (null)\n userInfo {\n}, 目标实体 Stica, inverseRelationship 关系, minCount 1, maxCount 1, isOrdered 0, deleteRule 1\";\n}, 子实体(null), userInfo {\n}, versionHashModifier (null)"; Stica = "() 名称 Stica, managedObjectClassName NSManagedObject, renamingIdentifier Stica, attributeType 700 , attributeValueClassName NSString, defaultValue (null)\";\n}, subentities (null), userInfo {\n}, versionHashModifier (null)"; }, 获取请求模板 { }

而且我不知道为什么**storeURL**有这种形式，字符串末尾的“--file://localhost/”是什么？为什么不能创建 .sqlite 文件？什么是解决问题的正确方法？我已经尝试重置模拟器并且路径是正确的......

提前致谢

**编辑1：** 我学过的就是[这个](http://www.raywenderlich.com/980/core-data-tutorial-how-to-preloadimport-existing-data)

**edit2：** 一个可行的解决方案是更改这段代码：

```
NSString *storePath = [[[self applicationDocumentsDirectory] absoluteString] stringByAppendingPathComponent:@"Prova1.sqlite"];
NSURL *storeURL = [NSURL fileURLWithPath:storePath];

 // Put down default db if it doesn't already exist
 NSFileManager *fileManager = [NSFileManager defaultManager];
 if (![fileManager fileExistsAtPath:storePath]) {
     NSString *defaultStorePath = [[NSBundle mainBundle] pathForResource:@"Prova1" ofType:@"sqlite"];

     if (defaultStorePath) {
         [fileManager copyItemAtPath:defaultStorePath toPath:storePath error:NULL];
     }
 }/**/ 
```

和：

```
NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Prova1.sqlite"];

// Put down default db if it doesn't already exist
NSFileManager *fileManager = [NSFileManager defaultManager];
if (![fileManager fileExistsAtPath:storePath]) {
    NSURL *defaultStoreURL = [[NSBundle mainBundle] URLForResource:@"Prova1" withExtension:@"sqlite"];

    if (defaultStoreURL) {
        [fileManager copyItemAtURL:defaultStoreURL toURL:storeURL error:NULL];
    }
}/**/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T13:41:03.407

`absoluteString`in的用法

```
NSString *storePath = [[[self applicationDocumentsDirectory] absoluteString] stringByAppendingPathComponent:@"Prova1.sqlite"]; 
```

是不正确的。它创建一个字符串

```
file:/localhost/Users/winimac01/... 
```

其中“file:”实际上是字符串的一部分，所以这个文件肯定不存在。

改用`path`应该可以解决问题：

```
NSString *storePath = [[[self applicationDocumentsDirectory] path] stringByAppendingPathComponent:@"Prova1.sqlite"]; 
```

# c# - 如何更换证书的密钥对

> ID：13010732
> 
> 赞同：1
> 
> 时间：2012-10-22T11:42:26.160
> 
> 标签：c#, certificate

我有一个从 Web 服务收到的 X509 证书。获取证书时未使用证书请求 (PKCS10)，而是使用了用户特定的传输密钥。在我的 C# 应用程序中，我从这样的文件中读取证书：
`X509Certificate cert = new 509Certificate2(X509Certificate2.CreateFromCertFile(certificatePath));`
证书的 PrivateKey 字段为空，但 PublicKey 不是（这正常吗？）

现在我想让这个证书使用我自己的密钥对。到目前为止，我已经尝试过：
`openssl rsa -out keypair.pem 2048`<- 创建新的公钥/私钥对
`openssl pkcs12 -export -out a.pfx -inkey keypair.pem -in cert.pem`<- 使用新的密钥对创建证书

第一个命令似乎工作正常，但第二个命令打印此消息：`No certificate matches private key`. 这是解决这个问题的正确方法吗？我需要证书的私钥，因为需要私钥来签署 Web 服务中的其他请求。如何用我自己的私钥替换证书的密钥对？

# jquery - Jstree 在回发后失败

> ID：13010738
> 
> 赞同：0
> 
> 时间：2012-10-22T11:43:22.597
> 
> 标签：jquery, asp.net-mvc-3, jstree

我正在使用 Jstree 在我的 MVC3 项目中生成树结构。

它在加载时工作正常，但是当发生回发/提交时，树将不会呈现。它以“正常”的 Ul/li 方式简单地显示列表。

据我所知，Jstree normalle 附加到 Ul/Li 的类在回发后没有附加。

我的 Jquery 是这样的.. 非常基本

```
jQuery(document).ready(function($) {
    $("#testTree").bind("loaded.jstree", function(event, data) {

    }).jstree({
        themes: {
            theme: "default",
            dots: false,
            icons: false
        },
        core: {
            animation: 200,
            open_parents: false
        },
        cookies: {
            cookie_options: {
                path: '/'
            }
        },
        plugins: ["themes", "html_data", "cookies"]
    });
}); 
```

似乎只有当我在页面上有 jquery.mobile 1.2 (http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js") 时才会出现问题。如果我删除这一切正常。

任何输入将不胜感激

# nosql - 如何获得最终的一致性

> ID：13010740
> 
> 赞同：1
> 
> 时间：2012-10-22T11:43:27.617
> 
> 标签：nosql, consistency, eventual-consistency

> **可能重复：**
> [最终一致性](https://stackoverflow.com/questions/348939/eventual-consistency)

我是 Nosql 的新手，我阅读了很多关于它的文档，它们都只谈论最终的一致性，并没有解释：它是如何工作的。

那么，谁能帮我解释一下：如何获得最终的一致性？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:35:40.157

一旦您拥有数据项的多个副本，一致性就会成为一个问题，尤其是在分布式系统中。

[CAP 定理](http://en.wikipedia.org/wiki/CAP_Theorem)说你不能同时拥有一致性、可用性和分区容限这三者。

如果你选择 A 和 P，那么你必须放弃 Consistency（在某种程度上）。这意味着系统的不同部分可能具有不同的数据项值。系统的不同部分将不断尝试通过通信保持彼此的一致性，但这可能需要一点时间（因此是“最终”一致性）。

[在这个相关问题](https://stackoverflow.com/questions/2038282/are-there-any-general-algorithms-for-achieving-eventual-consistency-in-distribut?rq=1)的答案中描述了一些实现一致性的机制/协议。

因此，谈论“如何获得最终一致性”是没有意义的——最终（或没有）一致性是您在分布式系统中默认获得的，除非您非常小心（并至少牺牲可用性和分区容限之一）。完全一致的系统必须更加努力地确保所有副本都正确同步。

# html - CSS 不会覆盖其他语句

> ID：13010744
> 
> 赞同：1
> 
> 时间：2012-10-22T11:44:03.197
> 
> 标签：html, css

我在网站底部做了一个控制栏。现在我想在这个栏的外部顶部有一个小箭头。但我不能把它放在外面！这是我的问题的一个例子：http: [//jsfiddle.net/HHcwb/2/](http://jsfiddle.net/HHcwb/2/)

和代码： HTML：

```
<div id="control">
<p title="Show Bar" id="show">]</p> 
```

​</p>

CSS：

```
#control{
    position:absolute;
    bottom:0px;
    background:rgba(51, 51, 51, 0.7);
    width:30%;
    height: 75px;
    text-align:center;
    left:35%;
    border-top-left-radius:100px 50px;
    border-top-right-radius:100px 50px;
}
#control p{
    position:absolute;
    margin:0;
    cursor:pointer;
    font-family:'WebSymbolsRegular';
    color:#bbb;
    font-size:16px;
    top:1px;
    transition:color 0.3s ease;
    -webkit-transition:color 0.3s ease;
    -moz-transition:color 0.3s ease;
    -o-transition:color 0.3s ease;
}
#control p:hover{
    color:#E4DBBF;
}
#show{
    left:49%;
    top:-20px;
}​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T11:48:22.237

`#show`由“一个 id 选择器”组成。

`#control p`由“一个 id 选择器和一个类型选择器”组成

后者更[具体](http://www.w3.org/TR/CSS21/cascade.html#specificity)，因此它赢得了级联。

改为使用`#control #show`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:49:04.863

您可以使用 !important，但这可能会导致将来出现问题。问题本身是由特异性问题引起的。如果你更换

```
#show{
left:49%;
top:-20px ;
}​ 
```

和

```
#control #show{
left:49%;
top:-20px ;
}​ 
```

它也可以工作，这是因为您通过提供 2 个 id 作为选择器提高了特异性，这意味着浏览器将这些规则解析为更重要

# ruby-on-rails - 测试自定义设计控制器时的 ActionController::RoutingError

> ID：13010749
> 
> 赞同：0
> 
> 时间：2012-10-22T11:44:12.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec2, rspec-rails

我正在尝试向 Devise 的注册控制器添加一个自定义操作，该操作允许用户更改他们的密码（我不能使用默认值`registrations#edit`，因为我需要一个仅更改密码而不是电子邮件/用户名的表单）。我在下面编写的实现在开发模式下工作，但是当我测试控制器时出现此错误。

```
Failure/Error: get 'password'
ActionController::RoutingError:
  No route matches {:controller=>"registrations", :action=>"password"} 
```

有我的代码（我试图跳过不相关的部分）

`spec/controllers/registrations_controller_spec.rb`

```
describe RegistrationsController do
  include Devise::TestHelpers

  before :each do
    request.env["devise.mapping"] = Devise.mappings[:users]
  end

  describe "GET 'password'" do
    it "..." do
                     # The problem is here,
      get 'password' # it raises ActionController::RoutingError
    end
  end
end 
```

`app/controllers/registrations_controller.rb`

```
class RegistrationsController < Devise::RegistrationsController
  # ...
  def password
  end
end 
```

* * *

`config/routes.rb`

```
devise_for :users, path: 'account', 
  controllers: { registrations: 'registartions' }, 
  skip: [:registartions, :sessions]

devise_scope :user do
  # ...
  scope '/account' do
    get 'password' => 'devise/registartions#password', as: "change_password
  do
end 
```

`spec_helper.rb`

```
# ...
RSpec.configure do |config|
  # ...
  config.include Devise::TestHelpers, :type => :controller
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:52:23.140

您是否使用以下内容设置了 config/routes.rb。

```
devise_for :users do
    get 'logout' => 'devise/sessions#destroy'
    get 'changepassword' => 'devise/registrations#edit'
    get 'access' => 'homepages#access'
    get 'history' => 'policies#history'
    get 'future' => 'policies#future'
  end
  devise_for :users, :controllers => { :sessions => :sessions }
  resources :users 
```

我也有同样的问题。我设置了路线，然后它对我有用:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:03:21.343

我通常会为此添加评论，但我包含了一个代码块，它在评论中变得混乱。

似乎您正在尝试执行 a `GET`on`/password`而不是 on `/account/password`。

根据我正在阅读的内容，您有一个映射`/account/password`：

```
devise_scope :user do # used to remove /users/ part from devise URLs
  # ...
  scope '/account' do # adds /account to URLs
    get 'password' => 'devise/registartions#password', as: "change_password"  
    # this will match /account/passwordAnswer

  do
end 
```

因此，您应该删除范围，或者将测试中的 get 请求替换为：

```
get "/account/password", :user => @user 
```

或这个

```
get change_password_path(@user) 
```

`@user`a`User`的模拟在哪里。

运行`rake routes`确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T06:27:56.047

我不喜欢`get "/account/password"`在我的规范中使用或路径。看起来很hacky。我通过在我的 routes.rb 文件中使用更好的语法解决了类似的问题：

1.  使用`path: 'account'`选项`devise_for`
2.  明确设置我的自定义控制器`controllers: {registrations: 'registrations'}`

所以我的 routes.rb 看起来像这样：

```
devise_for  :users, 
            path: 'account', 
            path_names: {sign_in: 'login', sign_out: 'logout', sign_up: 'register'},                 
            controllers: {registrations: 'registrations'},
            skip: [:passwords] 
```

然后我可以`get :new`在我的测试中使用。干净多了。

希望这对其他人有帮助。

我正在使用设计 3.0。

# node.js - nodejs响应数据相乘

> ID：13010753
> 
> 赞同：1
> 
> 时间：2012-10-22T11:44:17.710
> 
> 标签：node.js, socket.io

我用socket.io制作了一个应用程序。我的问题是当我关闭节点并再次打开服务器响应计数时。第一次1 resutlset发送但第二次2和第三次3等等？问题是什么

客户端代码是

```
<script>
var socket = io.connect('http://10.0.0.192:8888');

socket.on('connecting', function () {
    console.log('connecting');
});

socket.on('connect', function(s){
    console.log('connect');
    socket.emit('Baglan');
    console.log('emit-Baglan');
    socket.on('guncelle',function(data){
        console.log(new Date().getMilliseconds());
        console.dir(data);
    });
});

socket.on('reconnecting', function () {
    console.log('reconnecting');
});

socket.on('reconnect', function () {
    console.log('reconnect');
});

socket.on('reconnect_failed', function () {
    console.log('reconnect_failed');
});
</script> 
```

和服务器

```
function getDataForClients() {
var d = new Array();
d.push({records:res});
//console.log(d);
return d;}
function onRequest(request, response) {
    var pathname = url.parse(request.url).pathname;
    //console.log("Request for " + pathname + " received.");
    route(handle, pathname, response, request);
}
server = http.createServer(onRequest);
io = require('socket.io').listen(server);
io.set('log level', 1);
io.sockets.on('connection', function (client) {
    //console.log(client);
    client.on("Baglan",function(){
        //console.log("user connected");
        __sockets.push(client);
        client.room="weather";
        client.records=[];
        client.join(client.room);
        if(!res)
            guncelle(false,client);
        else
            client.emit("guncelle",getDataForClients());
    });
    client.on('disconnect', function(){
        var i = __sockets.indexOf(client);
        __sockets.splice(i,1);
        client.leave(client.room);
        //console.log("user leave");
    }); 
});

server.listen(8888);
  function guncelle(v,c) {
//console.log("update");
var db = mysql.createClient({
    user: 'user',
    password: '***',
});
db.query('USE '+TEST_DATABASE);
db.query(
    "select * from table",
    function selectCb(err, results, fields) {
        if (err) {
            throw err;
        }
        res = results;
        var _data = getDataForClients();
        if(v)
            io.sockets.emit("guncelle",_data);
        else
            c.emit("guncelle",_data);
        db.end();
    }
); 
```

}

15 毫秒之间有 5 个结果。

抱歉，我无法发布图片。

# c# - C# 创建分层对象

> ID：13010754
> 
> 赞同：0
> 
> 时间：2012-10-22T11:44:19.887
> 
> 标签：c#, class

我正在创建一个日志系统。学习创建类是非常基础的一个很好的练习。但是，我被困住了，并且已经坚持了一周。

该项目是一个复制和粘贴项目（一个备份解决方案），对于它复制的每个文件，我想保存以下内容：标题、状态和更多详细信息（所有类型的字符串）。

我想查看文件的标题和根级别的状态，但我想更深入地查看更多详细信息。我希望下面的“文字图”能帮助说明我的观点。

```
-logFile
-0
      Title         Value
      Status        Value
     +MoreDetails
-1
      Title         Value
      Status        Value
     +MoreDetails
-2
      Title         Value
      Status        Value
     +MoreDetails 
```

请注意，我不想将其写入文件/数据库，因为我想将其保存在内存中 - 我知道这可能不是一个好主意，但目前这是一个练习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:14:34.243

根据OP的评论，TI回答了使用[复合模式](http://www.dofactory.com/Patterns/PatternComposite.aspx)

![在此处输入图像描述](../Images/26765ec61d5bc43b889468105b8487e9.png)

# c# - 如何初始化 AttributeCollection 的实例？

> ID：13010758
> 
> 赞同：2
> 
> 时间：2012-10-22T11:44:32.180
> 
> 标签：c#

我正在尝试初始化一个，`AttributeCollection`但我似乎没有从谷歌得到[这个搜索](https://www.google.se/search?num=20&hl=sv&newwindow=1&safe=off&q=how+to+initialize+%2Battributecollection+componentmodel&oq=how+to+initialize+%2Battributecollection+componentmodel&gs_l=serp.3...97143.97143.0.98116.1.1.0.0.0.0.72.72.1.1.0...0.0...1c.1.s5nIKbZ4zQ8)的好建议。

我也愿意使用专门的构造函数创建对象，该构造函数采用[MSDN 上](http://msdn.microsoft.com/en-us/library/system.componentmodel.attributecollection.aspx)`Attribute`描述的类型数组，但我也找不到任何示例。

我可以通过单独添加每个属性来解决问题，如下所示，但这不如直接初始化它好。

```
bzzz["prop1"] = "val_1";
bzzz["prop2"] = "val_2";
...
bzzz["prop8"] = "val_8";
bzzz["prop9"] = "val_9"; 
```

是里面的课`System.ComponentModel`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T13:51:19.413

这是完全合法的：

```
var attributes = new AttributeCollection();
attributes.Add("key1", "value1");
attributes.Add("key2", 2);
attributes.Add("key3", new EntityReference("contact", Guid.NewGuid()));

var entity = new Entity(){ Attributes = attributes }; 
```

## 编辑

您可以在一个 C# 语句中完成所有操作，曾经我认为它的可读性较差，但现在我发现它更具可读性，因此实际上归结为选择现有标准或个人选择：

```
var entity = new Entity()
{
    Attributes = new AttributeCollection() { 
            { "key1", "value1" },
            { "key2", 2 },
            { "key3", new EntityReference("contact", Guid.NewGuid())}
        }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:57:55.443

假设我有一个简单的属性

```
public class SimpleAttribute : Attribute
{
    public SimpleAttribute(String val)
    {
        value = val;
    }
    protected String value;    
} 
```

我会添加`Attributes`这样的`AttributeCollection`。

```
AttributeCollection attrColl = new AttributeCollection(
   new SimpleAttribute("value1"), new SimpleAttribute("value2")); 
```

唯一的构造函数参数声明为`params`，因此您可以在构造集合时传递多个属性（用逗号分隔）。

# html - Phonegap iOS 输入和 contenteditable 错误

> ID：13010759
> 
> 赞同：3
> 
> 时间：2012-10-22T11:44:35.040
> 
> 标签：html, ios, cordova, contenteditable

单击具有属性 contenteditable 的 div 时：

```
<div contenteditable>Try typing here</div> 
```

或任何输入，键盘出现，但用户无法键入。

这是 Phonegap 2.1.0 中的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-31T14:45:49.260

这段 Css 配合 Cordova v5.1.1 效果更好

```
*[contenteditable] {
    -webkit-user-select: auto !important;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T09:36:28.183

通过删除 CSS 中的默认行来解决此问题：

```
* {
    -webkit-user-select: none;
} 
```

# javascript - 发送没有 ssl 的应用请求

> ID：13010762
> 
> 赞同：0
> 
> 时间：2012-10-22T11:44:46.007
> 
> 标签：javascript, facebook, ssl, facebook-javascript-sdk, apprequests

我正在使用它来邀请 facebook 的朋友加入我的应用程序：

```
 function invite(id) {
        FB.ui({
          method: 'apprequests',
          message: 'mytext',
          title: 'mytitle',
          to: id, 
        }, function(response){
                if (typeof response.error_message != 'undefined') {
                    console.log(response.error_message);            
                }else{
                    if(response!=null){
                        var invitados = id.split(',');
                        for( i=0; i<invitados.length; i++){
                             $('#friend_'+invitados[i]).addClass('invited');

                        }
                    }
                }
        });
} 
```

问题是我的服务器中还没有 ssl 证书（而且我知道这应该通过安装它来解决。由于 facebook 转向安全登录，我们只需要 ssl 就可以在 facebook 的网站上显示我们的网站）

一些用户从 facebook 收到 501 错误：

```
(net::ERR_INSECURE_RESPONSE): 
```

有没有办法强制在我的网站而不是 facebook（在 ifame 内）中打开请求（可能在 _blank 中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:53:44.603

> 有没有办法强制在我的网站而不是 facebook（在 ifame 内）中打开请求（可能在 _blank 中）？

没有。

[https://developers.facebook.com/docs/requests/](https://developers.facebook.com/docs/requests/)：

> 用户对用户请求仅适用于 Canvas 应用程序，而不是网站，因为接受请求会将用户定向到发送请求的应用程序的 Canvas 页面 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:20:28.947

检查此链接[Apprequests from a Website](https://stackoverflow.com/questions/8473739/apprequests-from-a-website)。您应该能够从您的网站调用邀请请求。虽然接受请求将指向 Canvas 页面 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:22:33.113

在画布应用中，您可以尝试将“display”参数设置为“page”或“popup”：

```
FB.ui({
  display: 'page',
  method: 'apprequests',
  message: 'mytext',
  title: 'mytitle',
  to: id, 
}, callback) 
```

本页底部记录了不同的显示模式：http: [//developers.facebook.com/docs/reference/dialogs/](http://developers.facebook.com/docs/reference/dialogs/)

# xna - XNA Framework 游戏配置文件 HiDef / Reach

> ID：13010765
> 
> 赞同：1
> 
> 时间：2012-10-22T11:45:01.680
> 
> 标签：xna, profile

您之前看到过这个问题，但我无法理解这个问题。

在我格式化我的电脑之前，我的显卡正在处理 HiDef 配置文件。我使用带有 HiDef 配置文件的 XNA Game Studio 4.0 创建了一个简单的 2D 游戏。该游戏仍然存在于[http://sourceforge.net/directory/os:windows/freshness:recently-updated/?q=survival-zombie](http://sourceforge.net/directory/os:windows/freshness:recently-updated/?q=survival-zombie)。

格式化我的电脑后，我当然安装了图形驱动程序，我安装了 VS2010 和 XNA 框架，但现在我的电脑无法处理 Hidef 配置文件，即使是我之前开发的游戏。

我正在使用 Windows 7 Ultimate x64、英特尔 4 系列高速芯片组系列显卡。

编辑：我安装了 XNA Game Studio 4.0 而不是框架。框架自带。

已解决：以前的驱动程序工作正常并解决了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:02:33.643

**错误**：“找不到合适的显卡。”

**解决方案**：如果您 100% 确定您安装了正确的驱动程序

*   重新安装驱动程序
*   重新启动计算机
*   确保您的计算机已确认已安装的驱动程序
*   执行您的 XNA 4.0 游戏

# javascript - Magento Rotator 中的 CDATA 问题

> ID：13010766
> 
> 赞同：1
> 
> 时间：2012-10-22T11:45:03.903
> 
> 标签：javascript, magento, cdata, static-block

所以我目前正在开发一个 Magento 网站。我使用此处找到的代码设置了一个旋转器：

[http://www.magentocommerce.com/wiki/4__-_themes_and_template_customization/cms_and_home_page/javascript_banner_rotator_for_home_page](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/cms_and_home_page/javascript_banner_rotator_for_home_page)

如果我将代码放入主页，它会按预期工作。但是，如果我将代码放在静态块中，CDATA 会强制自己进入代码，从而破坏它。我无法删除 CDATA，因为它不断自我替换。下面的代码：

```
<script type="text/javascript">// <![CDATA[
var imgs1 = new Array("{{media url="wysiwyg/rotator-1-1.jpg"}}","{{media url="wysiwyg/rotator-1-2.jpg"}}","{{media url="wysiwyg/rotator-1-3.jpg"}}");
var lnks1 = new Array("http://www.example.com/","http://www.example.com/","http://www.example.com/");
var alt1 = new Array("That Looks Nice","That Looks Nice","That Looks Nice");
var currentAd1 = 0;
var imgCt1 = 3;
function cycle1() {
  if (currentAd1 == imgCt1) {
    currentAd1 = 0;
  }
var banner1 = document.getElementById('adBanner1');
var link1 = document.getElementById('adLink1');
  banner1.src=imgs1[currentAd1]
  banner1.alt=alt1[currentAd1]
  document.getElementById('adLink1').href=lnks1[currentAd1]
  currentAd1++;
}
  window.setInterval("cycle1()",4000);
// ]]></script>
<p><a id="adLink1" target="_top"> <img id="adBanner1" src="{{media url="wysiwyg/rotator-1-1.jpg"}}" alt="" width="235" height="250" border="0" /></a></p> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:49:58.523

您正在评论 javascript 结束`</script>`标记，请尝试`</script>`在 CDATA 行结束之后放置。不确定这一点，但值得一试。

# javascript - 带有变量函数名的 addEventListener 语法

> ID：13010769
> 
> 赞同：2
> 
> 时间：2012-10-22T11:45:16.600
> 
> 标签：javascript, firefox-addon, addeventlistener

在我的 Firefox 扩展中，我动态地创建了一个弹出菜单。最初，我在每个菜单项上都使用了这一行：

`menuFunc.setAttribute("oncommand","MainExtension.MyPlugin." + functionName + "();");`

where`functionName`是一个字符串，其中包含要为该菜单项调用的函数的名称。这工作得很好。当我将我的扩展上传到 Mozilla Addons 页面时，自动代码验证程序标记了这一行，并说使用 setAttribute 以这种方式设置 oncommand 是不安全的，应该使用 addEventListener 代替。我切换到这种语法：

`menuFunc.addEventListener("oncommand",function() {MainExtension.MyPlugin[functionName]},false);`

但是现在当我单击菜单项时什么也没有发生。

是我的语法关闭还是有其他问题？我不认为问题是常见的“this”引用错误。我尝试从其中一个函数中删除“this”的所有用法，但它仍然不起作用。似乎根本没有调用这些函数。也没有产生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:19:52.117

**更新**：

该`command`动作是使用 just 附加的`command`，而不是`oncommand`：

```
menuFunc.addEventListener("command", MainExtension.MyPlugin[functionName], false); 
```

* * *

你应该能够做到：

```
menuFunc.oncommand = MainExtension.MyPlugin[functionName]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:17:59.093

只是一个猜测：使用`true`而不是`false`作为第三个参数来捕获事件是否有帮助？

# javascript - 通过 id 更改 span 的内容

> ID：13010772
> 
> 赞同：10
> 
> 时间：2012-10-22T11:45:21.863
> 
> 标签：javascript, innerhtml

我想把约翰换成迈克。我不知道为什么它不起作用。

```
<span id="user">John</span> 
```

我正在尝试这个但不工作我不知道为什么不工作。

```
function set() {
    document['getElementById']('user')['value'] = Owner; 
    // owner value is mike
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T11:46:52.917

如果要更改 id，请使用

```
 document['getElementById']('user').id = 'mike'; 
```

或者，更经典的，

```
 document.getElementById('user').id = 'mike'; 
```

如果要替换“John”（不是 ID 而是跨度的内容），请执行

```
 document.getElementById('user').innerHTML = 'mike'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T11:50:39.137

```
function set() {
    document.getElementByID('user').innerHTML = Owner; 
    // owner value is mike
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T11:48:13.907

尝试：

```
function set() {
    document.getElementById('user').innerText= Owner; 
    // owner value is mike
} 
```

在哪里`Owner`声明，它在你的函数范围内有效吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T11:51:02.327

你可以试试这个

```
function set()
{
  var elem = document.getElementById('user'); 

  elem.innerHTML = "Owner";
}

if you want to add an **id** you can use **setAttribute()**
eg:

 document.getElementById('user').setAttribute('id','owner'); 
```

**笔记**

```
 **value** attribute only work with input, text area,button etc.. 
```

例如：

```
 <input type="text" id="inid" value=""/>

 document.getElementById('inid').value = "Something";  // this will work 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-05T07:30:20.533

对于现代浏览器

```
document.getElementById("span_id_here").textContent="yourtext"; 
```

# css - 如何将此 CSS3 动画转换为 Sass mixin？

> ID：13010776
> 
> 赞同：2
> 
> 时间：2012-10-22T11:45:45.260
> 
> 标签：css, sass

我有以下动画代码...

```
.a {
    background: url(../Images/experience-1.jpg) center center no-repeat red;
    z-index: 7;

    -webkit-animation-delay: 3s;
    -webkit-animation-duration: 5s;
    -webkit-animation-name: fadeout;
    -webkit-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    -moz-animation-delay: 3s;
    -moz-animation-duration: 5s;
    -moz-animation-name: fadeout;
    -moz-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    -o-animation-delay: 3s;
    -o-animation-duration: 5s;
    -o-animation-name: fadeout;
    -o-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    animation-delay: 3s;
    animation-duration: 5s;
    animation-name: fadeout;
    animation-fill-mode: forwards; /* this prevents the animation from restarting! */
}

.b {
    background: url(../Images/experience-2.jpg) center center no-repeat yellow;
    z-index: 6;

    -webkit-animation-delay: 18s;
    -webkit-animation-duration: 5s;
    -webkit-animation-name: fadeout;
    -webkit-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    -moz-animation-delay: 18s;
    -moz-animation-duration: 5s;
    -moz-animation-name: fadeout;
    -moz-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    -o-animation-delay: 18s;
    -o-animation-duration: 5s;
    -o-animation-name: fadeout;
    -o-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    animation-delay: 18s;
    animation-duration: 5s;
    animation-name: fadeout;
    animation-fill-mode: forwards; /* this prevents the animation from restarting! */
}

.c {
    background: url(../Images/experience-3.jpg) center center no-repeat pink;
    z-index: 5;

    -webkit-animation-delay: 33s;
    -webkit-animation-duration: 5s;
    -webkit-animation-name: fadeout;
    -webkit-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    -moz-animation-delay: 33s;
    -moz-animation-duration: 5s;
    -moz-animation-name: fadeout;
    -moz-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    -o-animation-delay: 33s;
    -o-animation-duration: 5s;
    -o-animation-name: fadeout;
    -o-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    animation-delay: 33s;
    animation-duration: 5s;
    animation-name: fadeout;
    animation-fill-mode: forwards; /* this prevents the animation from restarting! */
}

.d {
    background: url(../Images/experience-4.jpg) center center no-repeat green;
    z-index: 4;

    -webkit-animation-delay: 48s;
    -webkit-animation-duration: 5s;
    -webkit-animation-name: fadeout;
    -webkit-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    -moz-animation-delay: 48s;
    -moz-animation-duration: 5s;
    -moz-animation-name: fadeout;
    -moz-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    -o-animation-delay: 48s;
    -o-animation-duration: 5s;
    -o-animation-name: fadeout;
    -o-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    animation-delay: 48s;
    animation-duration: 5s;
    animation-name: fadeout;
    animation-fill-mode: forwards; /* this prevents the animation from restarting! */
}

.e {
    background: url(../Images/experience-5.jpg) center center no-repeat orange;
    z-index: 3;

    -webkit-animation-delay: 63s;
    -webkit-animation-duration: 5s;
    -webkit-animation-name: fadeout;
    -webkit-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    -moz-animation-delay: 63s;
    -moz-animation-duration: 5s;
    -moz-animation-name: fadeout;
    -moz-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    -o-animation-delay: 63s;
    -o-animation-duration: 5s;
    -o-animation-name: fadeout;
    -o-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    animation-delay: 63s;
    animation-duration: 5s;
    animation-name: fadeout;
    animation-fill-mode: forwards; /* this prevents the animation from restarting! */
}

.f {
    background: url(../Images/experience-6.jpg) center center no-repeat purple;
    z-index: 2;

    -webkit-animation-delay: 78s;
    -webkit-animation-duration: 5s;
    -webkit-animation-name: fadeout;
    -webkit-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    -moz-animation-delay: 78s;
    -moz-animation-duration: 5s;
    -moz-animation-name: fadeout;
    -moz-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    -o-animation-delay: 78s;
    -o-animation-duration: 5s;
    -o-animation-name: fadeout;
    -o-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

    animation-delay: 78s;
    animation-duration: 5s;
    animation-name: fadeout;
    animation-fill-mode: forwards; /* this prevents the animation from restarting! */
} 
```

...而我想做的是让将来更容易改变价值观。

只是为了解释每个类都应用于`div`具有背景图像的图像，并且每个类`div`都绝对位于彼此之上。因此，淡出顶部`div`将显示其`div`下方的另一个。

初始动画延迟为 3 秒，然后每个的持续时间`div`始终为 5 秒。

但是对于每个班级，我将动画延迟与前一个动画完成所需的时间相同。

因此 .b{} 类设置为延迟 18 秒。解决方法是：第一个动画有 3 秒延迟 + 5 秒持续时间，这等于总共 8 秒 + 10 秒额外时间，让用户正确看到下一张图像。

因此 c.{} 类设置为延迟 33 秒。同样的算法是：第二个动画有 18 秒的延迟 + 5 秒的持续时间，这等于总共 23 秒 + 10 秒额外的时间让用户正确地看到下一张图像。

所以这是动画的前提，我需要弄清楚如何通过 Sass 自动化它（以防客户说“你知道吗，我现在希望持续时间为 10 秒”）。

提前感谢您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T20:12:12.073

## 步骤 1\. 将其包装在 mixin 中，使用变量跟踪持续时间

对于初学者，您可以将整个块包装在一个 mixin 中并使用一些变量（全局的，所以要小心）来跟踪总持续时间和动画索引：

```
$queue-max-z-index: 7;
$queue-total-delay: 0;
$queue-index: 0;

@mixin queue-animation($class, $color, $delay: 0, $duration: 5s, $viewing-time: 10s) {
    .#{$class} {
        background: url(../Images/experience-#{$queue-index + 1}.jpg) center center no-repeat $color;
        z-index: $queue-max-z-index - $queue-index;

        -webkit-animation-delay: $queue-total-delay + $delay;
        -webkit-animation-duration: $duration;
        -webkit-animation-name: fadeout;
        -webkit-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

        -moz-animation-delay: $queue-total-delay + $delay;
        -moz-animation-duration: $duration;
        -moz-animation-name: fadeout;
        -moz-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

        -o-animation-delay: $queue-total-delay + $delay;
        -o-animation-duration: $duration;
        -o-animation-name: fadeout;
        -o-animation-fill-mode: forwards; /* this prevents the animation from restarting! */

        animation-delay: $queue-total-delay + $delay;
        animation-duration: $duration;
        animation-name: fadeout;
        animation-fill-mode: forwards; /* this prevents the animation from restarting! */

        $queue-total-delay: $queue-total-delay + $delay + $duration + $viewing-time;
        $queue-index: $queue-index + 1;
    }
} 
```

现在您可以像这样设置动画：

```
@include queue-animation(a, red, 3s);
@include queue-animation(b, yellow);
@include queue-animation(c, pink);
@include queue-animation(d, green);
@include queue-animation(e, orange);
@include queue-animation(f, purple); 
```

函数默认值表示您可以为单个动画覆盖的全局默认值。另请注意，它会自动跟踪设置的动画的计数（索引）和所述动画的总持续时间，因此您可以更改任何动画的持续时间或延迟，并且所有后续动画都将更新。

## 步骤 2\. 清理这些前缀

要进行更多重构，您可以包含一个我用于供应商前缀属性的小助手：

```
// Apply common prefixes to a property.
@mixin prefix($property, $value, $apply-to: property, $prefixes: -webkit -khtml -moz -ms -o) {

    @if $apply-to == property {
        @each $prefix in $prefixes {
            #{$prefix}-#{$property}: $value;
        }

    } @else if $apply-to == value {
        @each $prefix in $prefixes {
            #{$property}: $prefix + -$value;
        }

    } @else if $apply-to == both {
        @each $prefix in $prefixes {
            #{$prefix}-#{$property}: $prefix + -$value;
        }
    }

    #{$property}: $value;
} 
```

现在你的函数看起来像这样：

```
@mixin queue-animation($class, $color, $delay: 0s, $duration: 5s, $viewing-time: 10s) {
    .#{$class} {
        background: url(../Images/experience-#{$queue-index + 1}.jpg) center center no-repeat $color;
        z-index: $queue-max-z-index - $queue-index;

        @include prefix(animation-delay, $queue-total-delay + $delay);
        @include prefix(animation-duration, $duration);
        @include prefix(animation-name, fadeout);
        @include prefix(animation-fill-mode, forwards); /* this prevents the animation from restarting! */

        $queue-total-delay: $queue-total-delay + $delay + $duration + $viewing-time;
        $queue-index: $queue-index + 1;
    }
} 
```

## 步骤 3\. 使用`animation`速记

更进一步，您可以[使用`animation`简写](http://www.w3.org/TR/css3-animations/#animation)：

```
@mixin queue-animation($class, $color, $delay: 0s, $duration: 5s, $viewing-time: 10s) {
    .#{$class} {
        background: url(../Images/experience-#{$queue-index + 1}.jpg) center center no-repeat $color;
        z-index: $queue-max-z-index - $queue-index;

        @include prefix(animation, fadeout $duration ($queue-total-delay + $delay) forwards);

        $queue-total-delay: $queue-total-delay + $delay + $duration + $viewing-time;
        $queue-index: $queue-index + 1;
    }
} 
```

## 谦虚的免责声明

我对 Sass 还比较陌生，所以我的建议是主观的，可能不符合最佳实践。不过，这取决于您对这一点的满意程度，因此请随意忽略或修改任何让您感到不舒服的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:41:21.973

不要打扰，有一个[Compass 插件](http://github.com/ericam/compass-animation)可以为你做这件事。完全相同的代码将被拉入 Compass Core 的[下一个版本](http://beta.compass-style.org/reference/compass/css3/animation/)，所以很快你甚至不需要使用插件。您将获得额外的优势，即其他人将帮助您的动画代码保持最新。当您使用它时，您可以拉入[Dan Eden 的 Animate.css](http://daneden.me/animate/)的[Compass 端口](https://github.com/ericam/compass-animate)。

# python - Python 列表理解转换

> ID：13010778
> 
> 赞同：0
> 
> 时间：2012-10-22T11:45:54.957
> 
> 标签：python, list-comprehension

所以我有一个这样的脚本

```
for key, Value in mydictionary.iteritems():
    if 'Mammal' in Value[1]: 
    #because the value is a list of 2 items and I want to get at the second one
        Value[1] = Value[1].strip('Mammal') 
```

此代码有效地从 Value 列表中第二项的开头删除了 Mammal。现在我想用列表理解来制作这个更好看的python，所以我想出了这个但显然是错误的......有什么帮助吗？

```
Value[1] = [Value[1].strip('Mammal') for Key, Value in mydictionary.iteritems() if 'Mammal' in Value[1] ] 
```

此外，在同一行上，列表推导列出了该字典中的所有键。我很难想出那个。

我想出了：

```
for key, Value in mydictionary.iteritems():
Templist.append(key) 
```

但作为一个列表理解我在想....但它不起作用:(

```
alist = [key for Key, Value in mydictionary.iteritems()] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:00:13.057

```
mydictionary = {
    1: [4, "ABC Mammal"],
    2: [8, "Mammal 123"],
    3: [15, "Bird (Not a Mammal)"]
}

mydictionary = {key: ([value[0], value[1].strip('Mammal')] if 'Mammal' in value[1] else value) for key, value in mydictionary.iteritems()}
print mydictionary 
```

输出：

```
{1: [4, 'ABC '], 2: [8, ' 123'], 3: [15, 'Bird (Not a Mammal)']} 
```

虽然我不会客观地称这为“更好看”，但迭代方法可能更可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:56:34.300

**列表理解创建一个新列表**

如果您能够使用*strip()*，那么*Value[1]*是一个字符串 - 而不是一个列表

您可以仅使用字典方法*keys()*进行第二部分- 您的两次尝试都是多余的。

```
alist = mydictionary.keys() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:03:56.147

您不应该仅仅使用列表推导来产生副作用。你可以，但它被认为是不好的做法，你应该坚持`for`循环。

无论如何，由于您正在使用字典，因此您可能正在寻找[字典理解](http://www.python.org/dev/peps/pep-0274/)：

```
mydictionary = {'foo': ['unknown', 'Mammal is great'],
                'bar': ['something', 'dont touch me']}

mydictionary = {k: [a, b.replace('Mammal', '', 1)] for k, [a, b] in mydictionary.iteritems() if b.startswith('Mammal')} 
```

另请注意，如果使用 dict 理解，则创建一个新字典而不是替换旧字典中的值。

* * *

```
...
Value[1] = Value[1].strip('Mammal')
... 
```

> 此代码有效地从 Value 列表中第二项的开头删除了 Mammal。

不，不是的。它替换该项目开头和结尾的所有出现的`M`、`a`和。最好使用该方法将第一次出现的 替换为空字符串。`m``l``replace``Mammal`

* * *

```
alist = [key for Key, Value in mydictionary.iteritems()] 
```

你这里有一个错字。它应该是：

```
alist = [key for key, value in mydictionary.iteritems()] 
```

要不就

```
alist = mydictionary.keys() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:03:59.400

```
mydict = {'a':['Mammal','BC','CD'],
        'b':['AB','XY','YZ'],
        'c':['Mammal','GG','FD'],}

print [x for x,y in mydict.items() if y[0]=='Mammal'] 
```

# php - 使用 PHP 进行递归 XML 解析

> ID：13010779
> 
> 赞同：0
> 
> 时间：2012-10-22T11:45:58.603
> 
> 标签：php, xml

我正在使用 php 进行 XML 数据提取，遇到了两个需要处理的具有挑战性的问题......我一直在尝试解决这个问题，但无法解决。

我有类别列表页面，其中我根据我的 XML 中的“ProductRange”字段从我的 XML 文件中提取所有产品范围，其中可能包含如下数据：

*Phones;TopRatedProducts* （表示产品将同时属于两个产品范围：Phones & TopRatedProducts）

*电话；配件*（意味着产品将属于两个产品范围：电话和配件）

*PSP;TopRatedProducts*（意味着产品将属于两个产品范围：电话和 TopRatedProducts）

我的 XML 中有属于两个不同产品范围的产品，用分号标识。

**问题#1：**如何隐藏其中包含分号(;) 的产品范围 (ProductRange)，使其不会与其他产品范围重复出现，例如 Phones 和 TopRatedProducts 等？

这是列出所有类别的 PHP 代码：

***产品范围页面代码：***

```
 <?
   $id=urldecode($this->uri->segment(3)); // $id consists of urldecoded "WebCategory"
   $list = groupBy(file_get_contents('XML/products.xml'), "WebCategory");
   foreach ( $list[$id] as $product )
   {
    $results[]=$product->ProductRange;
   } 
  ?>

   <?   
    $product_range = array_unique($results);
    foreach ($product_range as $range)
    {
      $try=mysql_real_escape_string($range);   
    ?>
    <a class="item" href="/subcategories/listings/<?=$range?>">
    <span><? print("{$range}\n\n");?></span>
    </a>
    <?}?>

   <?
   function groupBy($xml, $categoryName)
  {
   $xml = new \SimpleXMLElement($xml);
   $category = array();
   foreach ( $xml as $row ) 
      {
        $attr = $row->attributes();
        if (! isset($attr->$categoryName))
        {
        trigger_error("$categoryName does not exist in XML");
          break;
         }

    $category[(string) $attr->$categoryName][] = $attr;
      }
    return $category;
   }
     ?> 
```

**注意：** 这段代码给了我这样的输出：

*   电话；顶级产品
*   电话；配件
*   顶级产品
*   配件
*   PSP;顶级产品

但我想要的输出应该是这样的：

*   电话
*   配件
*   游戏机
*   顶级产品

我需要分隔分号产品范围，以便我可以为相关产品单独显示它们。

**问题2：**

如何列出属于两个 ProductRanges 的我的产品，即我想将 ProductRange="Phones;TopRatedProducts" 视为两个单独的产品范围，以列出所有属于“Phones”、“TopRatedProducts”等的产品，并像这样的 mysql产品范围：

*"从 ProductRange='Phones' 的产品中选择 *";*

和

*"select * from products where ProductRange='TopRatedProducts'";* ?

编码 ：

// 此代码根据 Product Range 列出所有产品

```
 $id=urldecode($this->uri->segment(3)); // $id consists of urldecoded ProductRange
    $list = groupBy(file_get_contents('XML/products.xml'), "ProductRange");

     foreach ($list[$id] as $product ) {
     $img=getImageDirectory($product->Code); ?>
    <h3><a href="#"><?=$product->Name?></a></h3>
        <p><?=$product->WebDescription?></p>
     <img class="" src="<?=$img?>"/>

  <?}?>

      function getImageDirectory($iId) {
      $oDirectory = new RecursiveDirectoryIterator("/var/www/Wha/images/categories/");
      $oIterator = new RecursiveIteratorIterator($oDirectory);
       foreach($oIterator as $oFile) {
         if ($oFile->getFilename() == $iId.'.jpg') {
           return $oFile->getFilename();
          }
   }
   }

      ?> 
```

这是我的 XML：

产品.xml

```
<?xml version="1.0" standalone="yes"?>
<Rows> 
 <Row Code="23000" Name="HTC Wildfire S-A510E " ProductRange="Phones;TopRatedProducts"    ProductSubRange="HTC" WebCategory="Mobiles" WebDescription="Available in black and white.lightweight."   Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
 <Row Code="34001" Name="Iphone 4" ProductRange="Phones;Accessories" ProductSubRange="Apple" WebCategory="Mobiles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
  <Row Code="45002" Name="Samsung Galaxy S3" ProductRange="Phones;TopRatedProducts" ProductSubRange="Samsung" WebCategory="Mobiles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
   <Row Code="10010" Name="Samsung Galaxy earphone" ProductRange="Accessories" ProductSubRange="Samsung" WebCategory="Mobiles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
   <Row Code="10011" Name="PSP 3000" ProductRange="PSP;TopRatedProducts" ProductSubRange="Sony" WebCategory="Consoles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
    <Row Code="10012" Name="Sony Erricsson Satio" ProductRange="Phones" ProductSubRange="Sony Ericsson" WebCategory="Mobiles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
    <Row Code="10012" Name="Sony Playstation 4" ProductRange="TopRatedProducts" ProductSubRange="Sony" WebCategory="Consoles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />

      </Rows> 
```

我不知道如何相应地过滤我的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:30:33.913

您可以使用

```
// Display XML with ProductRange Phones
$list = groupBy(file_get_contents('1.xml'), "ProductRange", array("show" => true,"delimiter" => ";","name" => "Phones"));

// Do NOT XML with ProductRange Phones and shwo the rest
$list = groupBy(file_get_contents('1.xml'), "ProductRange", array("show" => false,"delimiter" => ";","name" => "Phones"));

// Display XML with ProductRange TopRatedProducts
$list = groupBy(file_get_contents('1.xml'), "ProductRange", array("show" => true,"delimiter" => ";","name" => "TopRatedProducts"));

// Display XML with ProductRange only TopRatedProducts
$list = groupBy(file_get_contents('1.xml'), "ProductRange", array("only" => "TopRatedProducts")); 
```

您修改后的功能

```
function groupBy($xml, $categoryName, $options = array()) {
    $xml = new \SimpleXMLElement($xml);
    $category = array();
    foreach ( $xml as $row ) {
        $attr = $row->attributes();
        if (! isset($attr->$categoryName)) {
            trigger_error("$categoryName does not exist in XML");
            break;
        }

        if (empty($options)) {
            $category[(string) $attr->$categoryName][] = $attr;
        } else {
            if (isset($options['only'])) {
                if ($attr->$categoryName == $options['only']) {
                    $category[(string) $attr->$categoryName][] = $attr;
                }
            } else {
                switch ($categoryName) {
                    case 'ProductRange' :
                        $name = strtolower($options['name']);
                        $parts = explode($options['delimiter'], strtolower($attr->$categoryName));
                        $condition = $options['show'] ? in_array($name, $parts) : ! in_array($name, $parts);
                        if ($condition) {
                            $category[(string) $attr->$categoryName][] = $attr;
                        }
                        break;
                }
            }
        }
    }

    return $category;
} 
```

# java - java.lang.UnsupportedOperationException：缓存桶没有沙发端口

> ID：13010784
> 
> 赞同：1
> 
> 时间：2012-10-22T11:46:33.823
> 
> 标签：java, memcached, couchbase

如果我尝试为 memcached 存储桶创建一个 couchbase 客户端，我会得到以下异常。

```
java.lang.UnsupportedOperationException: No couch port for cache buckets
at com.couchbase.client.vbucket.config.CacheConfig.getCouchServers(CacheConfig.java:152)
at com.couchbase.client.CouchbaseClient.<init>(CouchbaseClient.java:232) 
```

但是，如果我将桶类型更改为 couchbase，它工作正常。

我想使用 Memcached 存储桶而不是 couchbase。请帮忙。

Couchbase 版本 = 2.0 和 couchbase java sdk 版本 = 1.1.dp3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:24:52.407

正如 Michael Nitschinger 在#libcouchbase 上所说，这个问题很快就会得到解决。这是 jira 票[http://www.couchbase.com/issues/browse/JCBC-121](http://www.couchbase.com/issues/browse/JCBC-121)

# nlp - 意大利语命名实体识别

> ID：13010788
> 
> 赞同：3
> 
> 时间：2012-10-22T11:46:45.097
> 
> 标签：nlp, stanford-nlp, opennlp

我想使用 NLP 工具从**意大利语**文本中提取名称和数字。

遗憾的是，[The Standford NLP](http://nlp.stanford.edu/software/CRF-NER.shtml#Download)和[Apache OpenNLP](http://opennlp.sourceforge.net/models-1.5/)都没有为意大利语提供模型。

我能找到一个，还是找到训练数据来制作一个？（至少 15,000 句）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T12:17:57.157

[Italian Content Annotation Bank](http://ontotext.fbk.eu/icab.html)有一些 NER 注释数据。不过，不确定大小。至于数字，我认为一个简单的基于规则的方法可以解决问题。

# ruby - 如何获得“超级”的arity？

> ID：13010795
> 
> 赞同：7
> 
> 时间：2012-10-22T11:47:16.150
> 
> 标签：ruby

假设您要覆盖具有不同数量的子类中的方法：

```
class A
  def foo(arg)          # arity is 1
    # doing something here
  end
end

class B < A
  def foo(arg1, arg2)   # arity is 2
    super(arg1)         # <- HERE
  end
end 
```

有没有办法`super`在这里获得在线的arity？

（真正的用例：我打电话`super`知道超类不接受任何参数。但是，如果超类实现（在 gem 中）发生变化，我想发出警告。）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T12:32:17.730

关于您的真实用例：无需自己检查参数。打电话

```
super(arg1) 
```

`ArgumentError`如果参数计数不匹配，Ruby 将引发一个。

### 更新

由于一些downvotes，我想我应该回答你最初的问题。

> 如何获得“超”的丰富度？

从 Ruby 2.2 开始，有[`Method#super_method`](http://ruby-doc.org/core-2.2.0/Method.html#method-i-super_method)和[`UnboundMethod#super_method`](http://ruby-doc.org/core-2.2.0/UnboundMethod.html#method-i-super_method)：

```
class A
  def foo(arg)
  end
end

class B < A
  def foo(arg1, arg2)
  end
end

B.instance_method(:foo).arity #=> 2
B.instance_method(:foo).super_method.arity #=> 1 
```

从内部`B#foo`，你可以写：

```
class B < A
  def foo(arg1, arg2)
    method(__method__).super_method.arity #=> 1
  end
end 
```

# drupal - 编写视图样式插件 -error - 显示“大师”有一个无效的样式插件

> ID：13010796
> 
> 赞同：0
> 
> 时间：2012-10-22T11:47:19.543
> 
> 标签：drupal, drupal-7, drupal-views

我正在写一个视图显示插件，我在 mymodule.views.inc 中定义如下

```
function mymodule_views_plugins() {
  $plugins['style']['mymodule_articles_list'] = array(
    'title' => t('mymodule Articles Listing'),
    'help' => t('Display Articles using citation'),
    'path' => drupal_get_path('module', 'mymodule'),
    'handler' => 'mymodule_articles_list_style_plugin',
    'uses row plugin' => TRUE,
    'uses options' => TRUE,
    'uses grouping' => FALSE,
    'type' => 'normal',
    'use pager' => FALSE,
    'use ajax' => FALSE,
    'theme' => 'mymodule_articles_list'
  );
  return $plugins;
} 
```

我创建了类和主题功能。当我在创建视图时选择“mymodule 文章列表”时出现错误

> 显示“大师”有一个无效的样式插件。显示“页面”的样式插件无效。

**更新 1**

在开发中运行时执行php

```
$style_plugin = views_get_plugin('style','mumodule_articles_list'); 
```

不返回任何东西，这意味着定义有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:42:33.627

第一个错误是从[views_plugin_display::validate()](http://api.drupalize.me/api/drupal/function/views_plugin_display%3a%3avalidate/7)返回的，它执行以下代码。

```
$style = $this->get_plugin();
if (empty($style)) {
  $errors[] = t('Display "@display" has an invalid style plugin.', array('@display' => $this->display->display_title));
} 
```

[views_plugin_display::get_plugin()](http://api.drupalize.me/api/drupal/function/views_plugin_display%3a%3aget_plugin/7)在无参数调用时执行的代码实际上是以下代码。

```
$name = $this->get_option('style_plugin');
$plugin = views_get_plugin('style', $name);

if (!$plugin) {
  return;
} 
```

当[views_get_plugin()](http://api.drupalize.me/api/drupal/function/views_get_plugin/7)找不到插件定义时，该代码将失败`$name`，这可能在它找不到包含处理程序的文件时发生，或者从[views_plugin_display::get_option()](http://api.drupalize.me/api/drupal/function/views_plugin_display%3a%3aget_option/7)返回的名称错误。

# ios - 核心数据对象错误 - NSManagedObject 属性返回 nil

> ID：13010799
> 
> 赞同：3
> 
> 时间：2012-10-22T11:47:29.467
> 
> 标签：ios, core-data

最近我遇到了这种情况的问题：

1.  在我的`NSManagedObject`存储中，我存储了 longName 属性，称为保存`NSManagedObjectContext`，过了一会儿我关闭了应用程序。保存结束，没有错误。
2.  我重新启动应用程序，获取对象并尝试获取`[object longName]`. 返回的值为零。当我用断点停在那里并尝试通过`po [object longName]`正确的值显示值时，返回并打印。ALL 接下来调用`[object longName]`正确的来源。每当我不使用断点时，值总是`nil`.

我想我最近在其他应用程序中遇到了同样的问题。我获取了包含航班对象的 NSSet 的用户对象。当我尝试使用`[[flight validFrom] intValue]`它时返回数字 0，但是当我尝试使用`@"%@"`格式打印它时，我得到了`(null)`. 奇怪的是，并不是每个对象都发生了问题。

# android - Android 操作栏标签栏分隔线

> ID：13010803
> 
> 赞同：6
> 
> 时间：2012-10-22T11:47:43.710
> 
> 标签：android, styles, themes, tabbar, divider

我在为分隔线设置可绘制对象时遇到问题。我的 style.xml 看起来像这样：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="HCLTheme" parent="android:Theme.Holo.Light">
        <item name="android:actionBarStyle">@style/HCLActionBarStyle</item>
        <item name="actionBarStyle">@style/HCLActionBarStyle</item>
        <item name="android:actionBarTabBarStyle">@style/HCLActionBarTabBarStyle</item>
        <item name="android:actionBarTabStyle">@style/HCLActionBarTabStyle</item>
    </style>

    <style name="HCLActionBarStyle" parent="android:style/Widget.Holo.ActionBar">
        <item name="android:background">@drawable/hcl_actionbar_drawable</item>
        <item name="background">@drawable/hcl_actionbar_drawable</item>
        <item name="android:titleTextStyle">@style/HCLActionBarTitle</item>
    </style>

    <style name="HCLActionBarTabBarStyle" parent="@android:style/Widget.Holo.ActionBar.TabBar">
        <item name="android:showDividers">middle</item>
        <item name="android:divider">@drawable/divider</item>
        <item name="android:dividerPadding">0dp</item>
    </style>

    <style name="HCLActionBarTabStyle" parent="@android:style/Widget.Holo.ActionBar.TabView">
        <item name="android:background">@drawable/action_bar_tab_style</item>
    </style>

    <style name="HCLActionBarTitle" parent="@android:style/TextAppearance.Holo.Widget.ActionBar.Title">
        <item name="android:textColor">@android:color/white</item>
    </style>

</resources> 
```

在 HCLActionBarTabBarStyle 中，我将 @drawable/divider 设置为选项卡分隔符。这个drawable是一个9patch图像，一条垂直的黑线。

在我在 xml 中设置可绘制的分隔线之前，我得到了正常的白色分隔线，如下所示：

![https://dl.dropbox.com/u/93667096/a.png](../Images/16cc05582766c7e936fa8c407df08508.png)

在styles.xml中设置drawable后，我得到了这个：

![https://dl.dropbox.com/u/93667096/b.png](../Images/084d94edf63c2597acbd4c39150b0e58.png)

所以你可以看到分隔线变宽了，而不是 9patch 图像中的黑色垂直线。我什至不确定分隔线的可绘制对象必须是什么？图片或图层列表，或者它可以是一种颜色？事实上，我尝试了所有这 3 个，但没有成功。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T03:21:12.730

在自定义样式上使用“actionBarDivider”的属性。

像下面的东西

```
<style name="AppTheme" parent="AppBaseTheme">
     <!-- You app specific customization -->
     <item name="android:actionBarStyle">@style/MyActionBar</item>
     <item name="android:actionMenuTextColor">@color/menu_state_list</item>
     <item name="android:actionBarTabStyle">@style/tabStyle</item>
     <item name="android:actionBarTabTextStyle">@style/tabTextColor</item>

     <!-- Set it like this -->
     <item name="android:actionBarDivider">@drawable/verticle_marker_thin</item>
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-06T09:01:59.957

创建标签分隔线图片

在样式中添加如下所示的项目

```
<item name="android:actionBarTabBarStyle">@style/customTabBar</item> 
```

操作栏选项卡指示器中的分隔符代码

```
<style name="customTabBar" parent="@style/Widget.AppCompat.ActionBar.TabBar">
<item name="android:showDividers">middle</item>
<!-- give your divider here -->
<item name="android:divider">@drawable/tabindicator</item>
<item name="android:dividerPadding">0dp</item> 
```

其中@drawble/tabindicator 是drawble 中的图片

# wordpress - 仅列出当前类别中的 wordpress 帖子

> ID：13010805
> 
> 赞同：6
> 
> 时间：2012-10-22T11:47:43.863
> 
> 标签：wordpress, get, posts

我正在尝试在我的 wordpress 网站上创建第二个导航菜单。

我希望它只显示当前类别中所有帖子的链接。

我一直在尝试使用 get_posts 函数，但正在努力寻找如何动态选择当前类别。即在这里放置什么**category=x**

任何帮助是极大的赞赏

这是我一直在使用的模板代码

```
<ul id="catnav">

     <?php
     global $post;
     $myposts = get_posts('numberposts=5&category=1');
     foreach($myposts as $post) :
     ?>
        <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
     <?php endforeach; ?>

    </ul> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T10:49:13.870

最后用这里的代码解决了这个问题：[http ://www.snilesh.com/resources/wordpress/wordpress-recent-posts-from-current-same-category/](http://www.snilesh.com/resources/wordpress/wordpress-recent-posts-from-current-same-category/)

修改它以包括当前页面和列表升序

```
<ul id="catnav">
<?php
global $post;
$category = get_the_category($post->ID);
$category = $category[0]->cat_ID;
$myposts = get_posts(array('numberposts' => 5, 'offset' => 0, 'category__in' => array($category), 'post_status'=>'publish', 'order'=>'ASC' ));
foreach($myposts as $post) :
setup_postdata($post);
?>
<li>
<a href="<?php the_permalink(); ?>">
<?php the_title(); ?></a>
</li>
<?php endforeach; ?>
<?php wp_reset_query(); ?>
<li><a href="?p=46">Why Us?</a></li>

</ul> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T12:00:24.527

```
<!--Insted Of this-->
$myposts = get_posts('numberposts=5&category=1');
<!--Use This-->
$cat_ID = get_query_var('cat');
query_posts('cat='.$cat_ID.'&showposts=5&order=ASC'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-15T10:05:16.140

```
$args=array(
'cat' => get_query_var('cat'),
  'orderby' => 'title',
  'order' => 'ASC',
  'posts_per_page'=>-1,
  'caller_get_posts'=>1
);
$my_query = new WP_Query($args); 
```

它对我有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T10:01:10.500

So I found this bit of code which works great in showing all posts in the current category.

```
 <ul id="catnav">

 <?php
foreach( ( get_the_category() ) as $category ) {
$the_query = new WP_Query('category_name=' . $category->category_nicename . '&showposts=5&order=ASC');
while ($the_query->have_posts()) : $the_query->the_post();
?>
            <li>
                <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a>
            </li>
<?php endwhile; ?>
<?php
}
?>

</ul> 
```

But I have several categories I wish to exclude. Some posts exist in two categories I want to exclude showing the post in categories 8,9 and 11\.

Any ideas?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T11:40:32.070

我认为最好从类别 id 而不是类别名称中获取帖子，这样您就可以编写 if else 条件，并且可以排除 id 为 8、9、11 的帖子

# javascript - 在 ExtJS MVC 中的会话期间存储用户信息的正确方法

> ID：13010809
> 
> 赞同：0
> 
> 时间：2012-10-22T11:47:53.240
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

在 ExtJS MVC 应用程序中，我在哪里存储用户特定（会话）信息？

定义一个可以包含具有用户特定信息的对象并在应用程序中使用它的自定义基本控制器是否正确？

例子：

```
Ext.define("MyApp.controller.BaseController", {
    extend:  "Ext.app.Controller", 

    session:  Ext.create("MyApp.lib.UserSession"),

    init: function() {
      var me = this;

      me.session.init();

      /** some code **/
    },

    doSomething: function() {
      var me = this;

      var counter = me.session.get("counter"); 
    }

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T22:08:29.683

如果您需要在页面刷新后保留数据，您可以使用 Ext.state.Manager。

**在应用程序启动期间使用***Cookie*或*LocalStorage*提供程序设置状态管理器：

 **```
Ext.state.Manager.setProvider(new Ext.state.CookieProvider());

// Shortcut for quick reference across the project, if MyApp.user is null - user is not authorized.
MyApp.user = Ext.state.Manager.get('user'); 
```

在授权或其他操作后保存您需要为当前用户保留的数据：

```
Ext.state.Manager.set('user', {
  first_name: 'John'
  last_name: 'Doe'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:24:04.033

我已经完成了一些不同的应用程序，这些应用程序涉及用户在首次启动应用程序时从他们的会话中提取的特定权限设置。

我用几种不同的方法来做这件事，但我开始认识到用户权限数据都最适合 MVC 的模型上下文。考虑到这一点，我决定把它全部放在商店里。

这很好。如果您按照 MVC 指南创建商店，您始终可以从应用程序中的任何位置调用用户会话数据`Ext.getStore('SessionStoreId')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:13:11.277

根据应用程序目标，我有两种方法。

我的首选方法是为我想要在本地保存的模型使用 LocalStorage 代理，这样我在应用程序中与它们交互的方式没有任何变化，并且在重新启动应用程序以在没有数据库调用的情况下进行设置时更加方便.

或者，我在启动应用程序时创建了一个全局变量。在启动功能内部做这样的事情。

```
var app = Ext.application({
    name: 'MyApp',
    launch: function() {     
        MyApp.model.User.load('profile', {
            scope: this,
            success: function(user) {
                // Setup the app space under your Application namespace
                // so you don't conflict with anything the the ExtJS framework has set
                MyApp.app.user = user;
            }
        }
    }
} 
```

这样，在整个应用程序中，您将可以通过变量访问当前用户的模型，`MyApp.user`因此可以在应用程序的所有区域中使用它

```
var currentUserName = MyApp.app.user.get('name'); 
```

这样做的缺点是您正在引入一个全局变量，当它可以避免时，它被认为是不好的做法。

我认为像您建议的那样构建基本控制器没有任何问题，但是如果您这样做纯粹是为了访问要存储的会话变量，我建议这可能有点矫枉过正。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:22:12.243

我几乎总是为这类事情创建一个状态管理器类。您还可以使用自己的自定义代码创建单例类，并将其包含在您的应用程序中，如下所示：

```
Ext.Loader.setPath('MyApp.Util', 'app/util'); 
```

并像这样做一个要求：

```
Ext.require('MyApp.Util.Class') 
```

类本身应该是这样的：

```
Ext.define("MyApp.Util.Class", {
  singleton : true,
  options : {},

  myFunction: function(){}
}); 
```

这样，您可以将所有非 ExtJS 类的功能放在单独的类中。**

# sharepoint - 在 SharePoint 中进行模拟时出现共享点的 ULS 日志异常

> ID：13010813
> 
> 赞同：0
> 
> 时间：2012-10-22T11:48:02.717
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

这是我的代码：

```
SPWeb oWeb = SPContext.Current.Web;
SPUserToken token = oWeb.AllUsers[@"SHAREPOINTSYSTEM"].UserToken;
using (SPSite elevatedSite = new SPSite(oWeb.Site.ID, token))
 {
    using (SPWeb elevatedweb = site.OpenWeb())
     {

     }
 } 
```

我成功了。但我在共享点的 ULS 日志中看到，有以下例外：“不要处理对象网络”。我想当我对进程使用“使用”时，SPSite 和 SPWeb 会自动释放内存。

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:20:38.293

使用 SPDisposeCheck 工具来确定这段代码中是否存在内存泄漏。 [http://archive.msdn.microsoft.com/SPDisposeCheck](http://archive.msdn.microsoft.com/SPDisposeCheck)

您能否粘贴 ULS 日志条目以及您如何确定它与您的代码绝对相关？

你的代码：是吗

`using (SPWeb elevatedweb = site.OpenWeb())`或者

`using (SPWeb elevatedweb = elevatedSite.OpenWeb())`?

你能粘贴完整的代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:01:41.257

根据[SPDisposeCheck 规则 120](http://blogs.msdn.com/b/rogerla/archive/2008/02/12/sharepoint-2007-and-wss-3-0-dispose-patterns-by-example.aspx#SPDisposeCheckID_120)，[SPSite.OpenWeb](http://msdn.microsoft.com/en-us/library/ms473155.aspx)应该被处置，所以我认为你的错误与`elevatedweb`. 您可能想要检查代码的其他区域。一定要确保它`oWeb`没有被丢弃。

# facebook - http 工作 https 在 facebook 中不工作

> ID：13010820
> 
> 赞同：0
> 
> 时间：2012-10-22T11:48:22.233
> 
> 标签：facebook, https

我在 FB 有一个应用程序，它在 http url 中运行良好，但在 https url 中不起作用，

[http://www.facebook.com/testappisha/app_453043998071644](http://www.facebook.com/testappisha/app_453043998071644)

[https://www.facebook.com/testappisha/app_453043998071644](https://www.facebook.com/testappisha/app_453043998071644)

我可以在普通浏览器中加载 https 实时编码模式，但它不能在 facebook 中加载，如果有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:52:42.457

检查您的应用设置。我认为页面标签 URL 不存在。“pagelet_app_runner” div 元素必须包含一个 iframe，其中包含您的代码，但在您的 pagetab 中它是空的。

对不起我的英语不好。

# c# - 从哈希表中删除重复行

> ID：13010822
> 
> 赞同：0
> 
> 时间：2012-10-22T11:48:38.523
> 
> 标签：c#, datatable, key, duplicates, hashtable

您好，我有一个网格，其中填充了他们参加的教育课程的用户结果。对于每个用户，他们都有自己的网格，显示他们完成的每门课程以及他们每次尝试课程时的状态。例如：

课程名称 | 状态
Excel, 不完整的
肢体语言, 完整的
肢体语言, 放弃的
肢体语言, 不完整的
肢体语言, 完成的
肢体语言, 完成

删除重复项后，表格应如下所示：

课程名称 | 状态
Excel, 不完整的
肢体语言, 完整的
肢体语言, 放弃的
肢体语言, 不完整

我试图这样做：

公共静态数据表 RemoveDuplicateRows(DataTable dTable, string colName, string colTitle) { Hashtable hTable = new Hashtable(); ArrayList duplicateList = new ArrayList();

```
 foreach (DataRow drow in dTable.Rows)
    {

        if (hTable.Contains(drow[colName]) && hTable.Contains(drow[colTitle]))
        {
            duplicateList.Add(drow);
        }
        else
            hTable.Add(drow[colName], drow[colTitle]);
    }

    foreach (DataRow dRow in duplicateList)
        dTable.Rows.Remove(dRow);

    return dTable;
} 
```

但是这种方式给了我一个错误：项目已经添加。在字典中键入：'不完整'c#

我现在知道在键值对中不能有重复的键。有谁知道解决这个问题的方法或我可以用来解决这个问题的不同方法。抱歉忘了补充，这需要添加到数据表中。

干杯，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:07:22.220

尝试使用 Dictionnary 或 Dictionnary 而不是 Hashtable。

如果要保留所有状态，请使用 Dictionary>。关键是课程，您将在值部分（列表）中获得状态列表。

如果我采用您的代码，它将是这样的：

```
Dictionary<string, List<string>> values = new Dictionary<string, List<string>>();
        foreach (DataRow drow in dTable.Rows)
        {

            if (values.ContainsKey(drow[colName]))
            {
                if(values[row[colName]] == null)
                    values[row[colName]] = new List<string>();

                if (!values[row[colName]].Contains(drow[colTitle]))
                    values[row[colName]].Add(drow[colTitle]);
            }
        }

        return values; 
```

希望这可以帮助。

# mysql - 内部联接与联接表上的条件

> ID：13010833
> 
> 赞同：1
> 
> 时间：2012-10-22T11:49:08.593
> 
> 标签：mysql, sql

我正在尝试使用以下方法收集数据`query`：

```
SELECT * 
FROM `table1` AS `t1` 
INNER JOIN `table2` AS `t2` 
  ON `t1`.`id`=`t2`.`id` 
WHERE  `t2`.`name`='myname' 
```

看起来`WHERE`条件被忽略了。是否可以`WHERE`在连接表上应用条件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:52:57.143

在这种情况下也不应忽略“Where”子句。

如果要排除 where 条件，可以通过将条件写为 ON 子句的一部分来实现。

```
SELECT * 
FROM `table1` AS `t1` 
INNER JOIN `table2` AS `t2` 
  ON `t1`.`id`=`t2`.`id`  
    and `t2`.`name`='myname' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:52:03.240

在搜索字符串前后使用带有“%”符号的[LIKE](http://msdn.microsoft.com/en-us/library/ms179859.aspx)关键字来解决问题总是一个好主意：

```
-- This would match the following:
-- ' myname'
-- 'myname '
-- Wow! Who put that space in there?.. :)
WHERE t2.name LIKE '%myname%' 
```

此外，表上可能设置了[区分大小写的排序规则](http://msdn.microsoft.com/en-us/library/ms143515%28v=sql.105%29.aspx)。要使查询不区分大小写，您可以使用[Collat​​e](http://msdn.microsoft.com/en-us/library/ms184391.aspx)关键字：

```
-- Case doesn't matter now
WHERE t2.name COLLATE Latin1_General_CI_AS = 'mYnAmE' 
```

关于结合条件...

> ## [MSDN：使用内部联接](http://msdn.microsoft.com/en-us/library/ms190014%28v=sql.105%29.aspx)
> 
> 在 ISO 标准中，可以在 FROM 或 WHERE 子句中指定内部连接。这是 ISO 在 WHERE 子句中支持的唯一连接类型。WHERE 子句中指定的内连接称为旧式​​内连接。

因此，组合条件如下所示：

```
SELECT *
FROM table1 AS t1
INNER JOIN table2 AS t2
  ON t1.id = t2.id AND t2.name = 'myname'
  -- No 'where' clause required 
```

[这](https://stackoverflow.com/questions/354070/sql-join-where-clause-vs-on-clause)是关于 stackoverflow 的类似帖子：[SQL 连接：where 子句与 on 子句](https://stackoverflow.com/questions/354070/sql-join-where-clause-vs-on-clause)。

# msbuild - MSBuild ItemGroup 有条件

> ID：13010851
> 
> 赞同：9
> 
> 时间：2012-10-22T11:50:07.483
> 
> 标签：msbuild, msbuild-task, msbuild-4.0, msbuildcommunitytasks, msbuildextensionpack

我不知道是否`ItemGroup`是正确的类型。我会得到 4 个不同的布尔值，根据选择是真还是假。

我想`ItemGroup`根据真假填充这个“字符串”。这是可能的还是我应该使用什么？

例子

```
Anders = true
Peter = false
Michael = false
Gustaf = true 
```

我`ItemGroup`应该有安德斯和古斯塔夫。

这是可能的还是我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T13:08:29.367

由于您有一堆项目，最好`ItemGroup`从一开始就将它们存储在一个中，因为毕竟这就是它的用途，它还允许转换等。例如，这可以实现您想要的：

```
<ItemGroup>
  <Names Include="Anders">
    <Value>True</Value>
  </Names>
  <Names Include="Peter">
    <Value>False</Value>
  </Names>
  <Names Include="Michael">
    <Value>False</Value>
  </Names>
  <Names Include="Gustaf">
    <Value>True</Value>
  </Names>
</ItemGroup>

<Target Name="GetNames">

  <ItemGroup>
    <AllNames Include="%(Names.Identity)" Condition="%(Names.Value)==true"/>
  </ItemGroup>

  <Message Text="@(AllNames)"/>  <!--AllNames contains Anders and Gustaf-->
</Target> 
```

但是，如果它们必须是属性，我认为除了手动枚举它们之外没有其他方法：

```
<PropertyGroup>
  <Anders>True</Anders>
  <Peter>False</Peter>
  <Michael>False</Michael>
  <Gustaf>True</Gustaf>
</PropertyGroup>

<Target Name="GetNames">

  <ItemGroup>
    <AllNames Include="Anders" Condition="$(Anders)==true"/>
    <AllNames Include="Peter" Condition="$(Peter)==true"/>
    <AllNames Include="Michael" Condition="$(Michael)==true"/>
    <AllNames Include="Gustaf" Condition="$(Gustaf)==true"/>
  </ItemGroup>

  <Message Text="@(AllNames)"/>
</Target> 
```

# android - 安装 .apk 时出现模拟器超时错误消息

> ID：13010854
> 
> 赞同：3
> 
> 时间：2012-10-22T11:50:22.773
> 
> 标签：android, android-emulator, timeout, apk, adb

> **可能重复：**
> [Android 错误：无法在设备上安装 *.apk *：超时](https://stackoverflow.com/questions/4775603/android-error-failed-to-install-apk-on-device-timeout)

当我尝试使用 android 启动任何移动应用程序时，不断收到错误消息。这些错误是不可预测的——有时（比如十次中的一次）奇迹会发生并且一切正常。但大多数时候我得到这个错误：

`[ERROR] C:\Program Files\Titanium Developer\android-sdk-windows\tools\adb.exe error: protocol fault (no status)`

稍后出现此错误：

`[DEBUG] Waiting for device to be ready ... [TRACE] adb devices returned 0 devices/emulators ...... [ERROR] Timed out waiting for emulator to be ready, you may need to close the emulator and try again`

模拟器启动，我得到锁定的屏幕，但不知何故与它的连接丢失了。

在我打开 ti 开发人员之前，我尝试按照其他人的建议将模拟器与批处理文件分开启动，但我得到了同样的错误。

即使它运行一次正确，如果我进行更改并想要重新启动（不停止或关闭模拟器），我总是会收到上述错误。我认为一旦模拟器启动并运行，我们应该能够继续重复使用它，但对我来说，它从来没有那样工作过。

当我尝试从 Eclipse 运行时，它曾经给出以下消息`Failed to install Demo.apk on device 'emulator-5554': timeout`

我想在不杀死 adb 服务器或不再次关闭模拟器的情况下运行相同的应用程序。

请任何帮助将不胜感激！！！！！！！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T11:58:34.523

这是因为默认的 ADB 空闲超时为 5000 毫秒。

采取`Window -> Preferences -> Android -> DDMS.`增加你的亚行超时。这将解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:56:47.017

关闭eclipse和模拟器后，从用户的主文件夹中删除.android文件夹，然后重新启动并尝试。它应该可以解决您的问题。删除后，您必须设置 adt 插件的 sdk。

# javascript - 是否有具有 Outlook.com（地铁）“外观”和功能的 javascript 控件库？

> ID：13010855
> 
> 赞同：1
> 
> 时间：2012-10-22T11:50:25.027
> 
> 标签：javascript, web-controls

我正在寻找 outlook.com 的 javascript web 控件库。我的意思是构建 Outlook.com 的 Yahoo UI 或 Google GWT 的类库。我正在寻找这样一个 js 控件库，它可以帮助我构建 Metro 风格的 js Web 应用程序。有这样的事吗？

这些控件是来自 system.ui.web.webcontrols 命名空间还是只是 Ajax 控件工具包？我认为是因为outlook.com 页面以aspx 结尾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:01:09.957

搜索*JavaScript Metro Interface*时在 google 上的第一个结果似乎就是您要找的。
[源代码可以在 github 上找到](https://github.com/olton/Metro-UI-CSS)
[这可能也值得一看](http://www.noupe.com/css/metro-ui-css-own-tiled-website-71225.html)（第二个结果）
[MSDN 也有一些关于此的页面](http://msdn.microsoft.com/en-us/library/windows/apps/hh465165.aspx)- 还没有看过这些

# ios - NSDate 的表格视图

> ID：13010856
> 
> 赞同：0
> 
> 时间：2012-10-22T11:50:29.950
> 
> 标签：ios, xcode, uitableview, nsdate

我有一个简单的问卷调查应用程序，我需要在其中保存按调查日期显示的调查历史记录。它必须像这样工作 - 在表格视图中，用户首先可以看到日期，点击日期后他可以看到调查的答案。我将使用 NSUserDefaults 作为历史记录。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:02:44.570

*   如果只有少量数据，您可以使用[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)。
*   如果有大量数据，那么您应该使用[SQLite3](http://www.techotopia.com/index.php/An_Example_SQLite_based_iOS_4_iPhone_Application)数据库
*   您也可以使用[core data](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)，这比其他两个更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:33:35.940

如果您要使用`NSUserDefaults`，您可以保留所有调查，`NSMutableDictionary`而您的密钥将只是`NSDate`字符串。

然后要获得排序的调查数组，您可以使用以下代码：

```
NSArray *sortedKeys = [[surveysTaken allKeys] sortedArrayUsingSelector: @selector(compare:)];
NSMutableArray *sortedValues = [NSMutableArray array];
for (NSString *key in sortedKeys)
    [sortedValues addObject: [surveysTaken objectForKey: key]]; 
```

结果你会得到`sortedValues`数组。

# php - 使用 Yii 框架和 facebook 注册插件创建注册表单

> ID：13010858
> 
> 赞同：0
> 
> 时间：2012-10-22T11:50:30.090
> 
> 标签：php, facebook, yii

如果用户有 facebook 帐户，我将使用 facebook 注册插件来注册用户，如果他们没有 fb 帐户，则使用默认注册表单。

我在 yii 框架中创建了默认的注册表单，使用模型将数据存储到数据库中。

我还编写了使用 iframe 使用 facebook 注册插件的代码。

问题是如何将数据保存在填写 fb 注册插件表单的数据库中，以及在 redirect-uri 中提到什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:34:57.377

在 facebook 对用户进行身份验证并授予您的应用程序权限后，您可以通过调用 api 方法“/me”使用 facebook sdk（php 或 js）获取用户数据。

使用 php sdk 的示例：

```
$user = $facebook->getUser();
if ($user) {
  try {
    $user_profile = $facebook->api('/me');
    //Now using the the facebook data we create 'our' user
    $model = new User;
    $model->username = $user_profile['fullname'];
    //and so on..
    $model->save();
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
} 
```

[官方php sdk repo](https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php)中的更多详细信息

返回 URL 必须指向您的应用程序页面，即您在 facebook 上[创建应用程序时配置的页面](http://developers.facebook.com/docs/guides/appcenter/#creating)

# c# - 字符串的顺序是明智的。

> ID：13010859
> 
> 赞同：-1
> 
> 时间：2012-10-22T11:50:34.987
> 
> 标签：c#, asp.net, loops

我有一个函数可以给我 12 位字符串。

例如。

```
AA 01 201 210 22
AA 02 201 210 22
.
.
AA 99 201 210 22
AB 01 201 210 22
& so on. . . 
```

* * *

```
public string GetPersonalId(int n)
{
    char letter1 = (char)('A' + ((n / 10 / 26 / 26) % 26));
    char letter2 = (char)('A' + ((n / 10 / 10 ) % 26));
    char digit1 = (char)('0' + ((n / 10) % 10));
    char digit2 = (char)('0' + ((n) % 10));

    string dateString = string.Format("{0:yyyyMMdd}", DateTime.Today)
        .Insert(6, " ")
        .Insert(3, " ");

    return string.Format("{0}{1} {2}{3} {4}",
        letter1, letter2, digit1, digit2, dateString);
} 
```

现在的问题是，第二天这个序列应该从 AA 01 201 210 23 重新开始。

谁能帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:09:20.183

*   无论你在哪里存储，在它旁边`n`存储一个 DateTime 。`dt`
*   每次递增`n`时，检查是否`dt`等于`Datetime.Today`
    *   `n`如果是这样，请像以前一样传递。
    *   如果不是，则设置`n`为零（或可能为一）并设置`dt`为`DateTime.Today`.

（我也会传入`dt`而`GetPersonalId`不是`DateTime.Today`在函数内部使用，以防万一 . 的两种用法之间的日期变化`DateTime.today`。）

例如，如果你有

```
int currentN = 0;

...

string GetNextPersonalId()
{
    currentN += 1;
    return GetPersonalId(currentN);
} 
```

更改为类似

```
int currentN = 0;
DateTime currentDay = DateTime.Today;

...

string GetNextPersonalId()
{
    if (DateTime.Today == currentDay)
    {
        currentN += 1;
    }
    else
    {
        currentN = 0; // or 1
        currentDay = DateTime.Today;
    }
    return GetPersonalId(currentN);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:14:15.267

想法是：每天您需要将“n”值重置为 1。

使此功能按预期工作的最简单方法：

1.  保留前一天生成的最后一个ID（-s）或从数据库中获取它；主要条件 - 最新而非今天
2.  将“n”作为当前 ID 与步骤 1) 中的 ID 之间的差值传递；

# http - 在 Blackberry 上的特定端口上打开 http 连接

> ID：13010861
> 
> 赞同：1
> 
> 时间：2012-10-22T11:50:39.550
> 
> 标签：http, blackberry, java-me

我知道在 Blackberry 中编程时可以打开与 URL 的连接，但是否可以在特定端口上打开连接？例如，我想向服务器的 echo 端口发送一些数据以检查它是否处于活动状态并测量 ping 时间。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:06:11.153

尝试这样的事情；

```
// Create ConnectionFactory
ConnectionFactory factory = new ConnectionFactory();

// use the factory to get a connection descriptor
ConnectionDescriptor conDescriptor = factory.getConnection("socket://www.abc.com:portnumber"); 
```

您可以在指定打开连接的 url 时指定端口号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:53:35.940

试试这个代码： -

```
String host  = "Your address" ;

new Thread()
{
    run()
    {
        try {
            SocketConnection connection = (SocketConnection)Connector.open("socket://" + host + ":80");
            OutputStream out = connection.openOutputStream();
            InputStream in = connection.openInputStream();
            // Standard HTTP GET request all in text
            // Only the required Host header, no body
            String request = "GET / HTTP/1.1\r\n" +
                "Host:" + host + "\r\n" +
                "\r\n" +
                "\r\n";
            out.write(request.getBytes());
            out.flush();
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            int firstByte = in.read();
            if (firstByte >= 0) {
                baos.write((byte)firstByte);
                int bytesAvailable = in.available();
                while(bytesAvailable > 0) {
                    byte[] buffer = new byte[bytesAvailable];
                    in.read(buffer);
                    baos.write(buffer);
                    bytesAvailable = in.available();
                }
            }
            baos.close();
            connection.close();
            final_OP(new String(baos.toByteArray()) );
        } catch (IOException ex) {
            final_OP(ex.getMessage());
        }
    }
}.start();

public void final_OP(final String message) {
    UiApplication.getUiApplication().invokeLater(new Runnable() {
        public void run() {
            Dialog.alert("Output" + message);
        }
    });
} 
```

# c# - C#中的连接

> ID：13010870
> 
> 赞同：2
> 
> 时间：2012-10-22T11:51:08.920
> 
> 标签：c#, string, concat

我有以下代码：

```
byte [] bytes;
string one_simbol;

bytes = BitConverter.GetBytes (n.GetPixel (x, y). R + n.GetPixel (x, y). G + n.GetPixel (x, y). B);
one_simbol = Encoding.GetEncoding (1251). GetString (bytes, 0, bytes.Length);

// Always in one_simbol any one character
// We do the following

full_text + = one_simbol + one_simbol + one_simbol; 
```

无论我添加多少这些字符，即使它们不同，最终也只能存储在变量 full_text 中的 1 个字符，即已添加的第一个字符

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T11:53:42.960

你*绝对*不应该这样使用`Encoding`。您的字节数组*不是*编码文本 - 那么为什么要假装它是呢？你有任意二进制数据，所以你应该使用类似 base64（或者可能是十六进制）的东西来确保往返：

```
string text = Convert.ToBase64String(bytes); 
```

这样你就可以反转数据，我认为这就是你想要的。

现在至于为什么您的连接据说不起作用：我强烈怀疑它*是*，但是由于文本中的控制字符等，您无法正确看到它。尝试打印出来`full_text.Length`，我怀疑它会相等`one_simbol.Length * 3`。

# html - 具有多个不同放置目标、dropEffect、多选等的 HTML5 拖放

> ID：13010872
> 
> 赞同：2
> 
> 时间：2012-10-22T11:51:10.903
> 
> 标签：html, drag-and-drop

我目前正在试验 HTML5 Drag and Drop API。现在我有几个问题：

1\. 我是对的，不能将可拖动元素与放置区域连接起来吗？

示例：您希望能够拖放 2 种不同类型的元素：文件和文本标签。现在，如果我给一些 div 一个 DragOver-Handler 和一个 Drop-Handler 它将同时响应文件和文本标签。我正在寻找一种仅响应特定类型的可拖动项目的简单可能性。

一个相关的问题是 dropEffect 光标样式：目前我在 DragStart-Handler 中启用所有可能的放置目标并在 DragEnd-Handler 中禁用所有它们（我的意思是“禁用”，我删除所有 DragOver- 和丢弃处理程序）。如果我不这样做，看起来如果您可以将文件放在只对文本标签作出反应的元素上。

2\. dropEffect 光标样式一团糟。在 Firefox 中我根本没有得到它们，在 Chrome 中它会给我一个大的“加号”图标（即使我已经从元素中删除了 DragOver-和 Drop-Handlers）

3\. 我正在寻找的最后一个功能是多选：选择多个文本标签，然后一次拖动它们。这可能吗？我的第一个想法是创建一个新的 div 并将所有选定的元素移动到该 div 内，然后拖动新创建的 div。看起来很hackish，看起来很丑;-)

我希望你们能给我一些答案。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:34:05.717

我不认为 HTML5 拖放（和朋友）应该替代常用的“拖放”Javascript 库（尽管在某些情况下可以使用它来代替它们）。这个名字具有误导性。

现代操作系统包括允许跨应用程序通信的 API：剪贴板和拖放。由于特定的挑战，这两个 API 非常相似，并且需要非常低级：

*   数据必须跨进程发送，因此必须以某种方式序列化，
*   发送者必须有一种方法以多种格式（例如 text/plain 和 text/html）提供数据，而接收者必须能够选择它最喜欢的格式，
*   发送者和接收者可能生活在不同的进程中，因此他们永远无法相互了解（他们甚至可能是来自不同平台、GUI 框架、编程语言等的实体），唯一的通信渠道是数据本身，

当前的 HTML5 APIS，与 - 比如说 - JQueryUI 可拖动对象相反 - 并不是要让程序员严格控制拖动过程的外观，而是允许与本机系统范围内的机制紧密集成。这可能是也可能不是程序员需要的。

所以回答问题：

1.  您不能“将可拖动元素与放置区域连接”，因为您的可拖动元素甚至可以来自浏览器外部。但是您可以创建一个拒绝某些类型数据的区域（这是用户对原生拖放的期望）。
2.  “div”和“multiselect”不是操作系统可以理解的（我们没有原生的多剪贴板或多文本选择）。如果您使用可切换的内部 div（例如，按住 shift 时单击），您可以实现此类功能。当有人试图拖动外部潜水时，制作一个传输对象，说明选择了哪些内部 div（您甚至可以创建一个显示它们的图像）。

如果上述解决方案听起来有点低级，那是因为它们是。当您开发桌面游戏或工具时，您不依赖原生拖放来在棋盘上移动棋子或在 GUI 中移动滑块。我认为 JavaScript 也会如此。JQueryUI Draggables 不会去任何地方。

# jsf-2 - 如何在扩展 UIOutput 的自定义组件中获取标准 styleClass 属性

> ID：13010873
> 
> 赞同：1
> 
> 时间：2012-10-22T11:51:12.363
> 
> 标签：jsf-2, attributes, custom-component

我正在使用以下自定义组件在我的页面中显示某种指导。我被要求传递`text`和`styleClass`属性给这个组件。但不幸`styleClass`的是，当该组件在页面中呈现时，单独的属性不会被应用。因此，我在我的标签组件中进行了硬编码。这一次的风格得到了正确的应用。不知道为什么。任何人都可以建议吗？

我可以看到`styleClass`来自 css 的属性正在正确地传递给标记组件。正如我上面提到的，组件在没有应用传递的样式类的情况下被渲染。

如果我将我的风格硬编码如下，那么它就可以工作。

```
writer.writeAttribute("style", "background-color: #F1F5F2;font-size: 80%;left: 52em;position: absolute;text-align: left;width: 13.25em;z-index: 5;", null); 
```

这是如何引起的，我该如何解决？

自定义组件使用如下

```
<mytags:guidanceBox text="#{FindPersonProps.MY_GUIDANCE_TEXT}" styleClass="guidance_css" /> 
```

源代码如下：

```
@FacesComponent(value="tags.guidanceBox")
public class GuidanceTag extends UIOutput {

    @Override
    public String getFamily() {
        return "javax.faces.NamingContainer";
    }

    public GuidanceTag() {
    }

    @Override
    public void encodeBegin(FacesContext context) throws IOException {

        String guidanceText=(String) getAttributes().get("text");
        //String styleClass=(String) getAttributes().get("styleClass");
        //System.err.println("Text ["+guidanceText+"] Style ["+styleClass+"]");

        ResponseWriter writer=context.getResponseWriter();
        String clientId=getClientId(context);
        writer.startElement("p", this);
        writer.writeAttribute("style", "background-color: #F1F5F2;font-size: 80%;left: 52em;position: absolute;text-align: left;width: 13.25em;z-index: 5;", null);
        writer.writeAttribute("name", clientId, "clientId");

        writer.startElement("b", null);
        writer.writeText("Guidance:", null);
        writer.endElement("b");

        writer.startElement("br", null);
        writer.endElement("br");

        writer.writeText(guidanceText, null);

        writer.endElement("p");

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:37:22.963

您应该实现 TagHandler，即将属性传递给组件本身的实现。像这样的东西：

```
public class GuidanceTagHandler extends ComponentHandler {

    public GuidanceTagHandler(ComponentConfig config) {
        super(config);
    }

    @Override
    protected void onComponentCreated(FaceletContext ctx, UIComponent c, UIComponent parent) {
        super.onComponentCreated(ctx, c, parent);

        TagAttribute styleClassAttribute = getRequiredAttribute("styleClass");
        c.getAttributes().put("styleClass", styleClassAttribute);
    }
} 
```

在 taglib.xml 你应该有你的组件的签名：

```
<tag>
    <tag-name>guidanceTag</tag-name>
    <component>
        <component-type>guidance</component-type>
        <handler-class>yourpackages.GuidanceTagHandler</handler-class>
    </component>
</tag> 
```

最后在 faces.config 中（它将绑定到`component-type`属性

```
<component>
    <component-type>guidance</component-type>
    <component-class>yourpackages.GuidanceTag</component-class>
</component> 
```

我希望这个答案对您有所帮助，因为我曾经遇到过同样的问题。所以这就是我想出的解决方案。

# symfony - Symfony2 探查器 - 我在哪里可以找到表单数据？

> ID：13010877
> 
> 赞同：0
> 
> 时间：2012-10-22T11:51:26.813
> 
> 标签：symfony, profiler

我有一个我想在 symfony2 中制作的表格。当我尝试提交它时，它显示“此字段不能为空”错误，但没有字段，因为每个字段都已填写。在 symfony1.4 中，调试面板中有一个部分显示了有关表单的所有内容，包括未验证的原因。我可以在 Symfony2 分析器中找到类似的东西，还是它只是充满了不可用的请求数据、日志和损坏的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:59:33.037

可以在请求面板上找到表单数据。

但是，您很可能正在发布表单并重定向到其他地方，并且当您直接从工具栏访问 Profiler 时，您只会在发布请求之后查看请求。

最快的方法是进入 Profiler，点击顶部的“查看全部”，然后找到处理表单提交的 POST 请求。

替代方案，您可以启用`intercept-redirects`：

> 当intercept-redirects 设置为true 时，Web Profiler 会拦截重定向并让您有机会在执行重定向之前查看收集的数据。

在此处查看更多信息：http: [//symfony.com/doc/2.0/book/internals.html#configuration](http://symfony.com/doc/2.0/book/internals.html#configuration)

# java - 将表达式的结果分配给基元

> ID：13010878
> 
> 赞同：2
> 
> 时间：2012-10-22T11:51:29.043
> 
> 标签：java, primitive, scjp

K.Sierra 在她的《SCJP 学习指南》一书中提到*“我们知道文字整数始终是 int，但更重要的是，涉及任何 int 大小或更小的表达式的结果始终是 int。”*

我已经开始试验，我对以下结果有点困惑：

```
byte a = 1; // correct
byte b = 1 + a; // incorrect (needs explicit casting)
byte c = 1 + 1; // correct (I expected it to be incorrect) 
```

谁能向我解释为什么最后一个示例不需要强制转换？为什么 Java 编译器会进行隐式强制转换？是因为有 2 个 int 文字吗？澄清非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:54:36.540

隐式类型转换仅在您的值`RHS`已知时才有效`compile-time`，意味着它们是`compile-time constants`。在其他情况下，您需要进行显式类型转换。

所以： -

```
byte c = 1 + 1; // Value of `1 + 1` is known at compile time. Implicit cast
byte c = 1 + a; // Value of `1 + a` is evaluated at runtime. Explicit cast needed 
```

另外，请注意，如果您将变量声明`a`为`final byte a = 1`，那么第二个赋值将编译，在这种情况下，您`a`将是一个编译时间常量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T11:53:44.107

是的，这是因为它们是文字，这意味着它们是编译时常量，编译器确保结果的大小确实是一个字节。如果超出字节范围，同样会失败。尝试将 128 分配给 c 或者，就此而言，`1 << 7`或任何其他大于 127 的编译时常量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:56:42.087

正如所说“涉及任何 int 大小或更小的表达式的结果始终是 int”

因此`byte b = 1 + a;` 返回一个 int 值，该值在编译时未评估。因此编译器无法检查结果是否在字节范围内，并希望我们进行显式转换。

# php - 如何在php中将具有公共元素的子数组删除到另一个子数组

> ID：13010879
> 
> 赞同：1
> 
> 时间：2012-10-22T11:51:30.467
> 
> 标签：php, multidimensional-array

> **可能重复：**
> [如何从 PHP 中的多维数组中删除重复值](https://stackoverflow.com/questions/307674/how-to-remove-duplicate-values-from-a-multi-dimensional-array-in-php)

抱歉写得太快了，我正在工作……对不起。现在我认为很好解释。我想删除子元素 [title] 常见的子数组，等于，我只想要一个元素，而不是重复，我该怎么做？我做到了，但我认为必须以一种更优雅的方式来做到这一点。我试过这段代码：

```
static function remove_duplicates_titles($deals){
       $result = array();
       $deal_repeated=false;
       foreach ($deals as $index=>$deal) {
           foreach ($deals as $deal_2) {
               //discover if the subarray has the element title repeated is repeated or not
               if ($deal['title'] == $deal_2['title']){ 
                    $deal_repeated=true;
                    unset($deal_2);  
               }
               else{ 
                    $deal_repeated=false;                          
                }

           }
          //if the array has no the element (title) repeated with another....
          if(!$deal_repeated){
                   $result[]=$deal;
           }
       }

       return $result; 
```

}

```
Array
(
[0] => Array
    (
        [id] => abc
        [title] => bbb
    )

[1] => Array
    (
        [id] => ghi
        [title] => aaa
    )

[2] => Array              //I should to remove this subarray (or the other, only one of both)
    (
        [id] => mno
        [title] => pql     //this is common
    )

[3] => Array
    (
        [id] => abc
        [title] => def
    )

[4] => Array
    (
        [id] => ghi
        [title] => mmm
    )

[5] => Array             //I should to remove this subarray (or the other), only one of both
    (
        [id] => mno
        [title] => pql   //this is common
    ) 
```

)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T13:00:44.163

此函数将保留它找到的 FIRSTS 元素，并根据您提供的键删除任何重复项

```
$arr = Array (
    Array ( 'id' => 'abc', 'title' => 'bbb' ),
    Array ( 'id' => 'ghi', 'title' => 'aaa' ),
    Array ( 'id' => 'mno', 'title' => 'pql' ),
    Array ( 'id' => 'abc', 'title' => 'def' ),
    Array ( 'id' => 'ghi', 'title' => 'mmm' ),
    Array ( 'id' => 'ere', 'title' => 'pql' )
);
function arrayUniqueFromKey(array $arr,$key)
{
    $titles = array();$ret = array();
    foreach ($arr as $v) {
        if (!in_array($v[$key],$titles)) {
            $titles[] = $v[$key];
            $ret[] = $v;
        }
    }
    return $ret;
}
print_r(arrayUniqueFromKey($arr,'title')); 
```

[http://codepad.org/Y3gsibRM](http://codepad.org/Y3gsibRM)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:34:38.327

```
 foreach($array as $key => $val) {
     if (is_array($val)) { 
      foreach($array as $key2 => $val2) {
       if($val['id']==$val2['id'] || $val['title']==$val2['title'])
       {
         unset($array[$key]);
         break;
       }
      }
    }
  } 
```

# php - 无需外部资源即可翻译 php 网站

> ID：13010888
> 
> 赞同：-3
> 
> 时间：2012-10-22T11:52:20.050
> 
> 标签：php

我有一个混合了 html 和 php 的 php 站点。前任：

```
<html>
hello <?=$username?> 
```

事实上，我需要保留文本。我不想要一个经典的解决方案，例如创建资源字符串并替换它们，例如：

```
<html>
<?=echo $helloString?> <?=$username?> 
```

实际上是一种“自动脚本”，它将在运行时替换所有文本资源。所以我保留现有的网站，并在开始时添加一些脚本。

```
<? include("translation_module.php?")?>
<html>
hello <?=$username?> 
```

并且这个 translation_module.php 会将“hello”替换为“bonjour”。

有什么线索可以实现吗？

**我不关心语法、货币、复数问题。**

*   我猜它应该像谷歌翻译一样工作：它应该自己执行，然后翻译然后输出文本，最后打印输出结果（当然我不知道它是如何做到的，它如何处理 $GET、$POST、$SESSION 变量.. .)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:55:25.550

从理论上讲，对于这种简单的情况，这可能是可能的，但在实践中却行不通。包含注入变量但仍需要翻译的字符串呢？例如：

```
You have <?= $inboxCount?> messages in your inbox 
```

这不能被翻译成语法要求例如“消息”必须出现在数字之前的任何语言。请记住，这只是一个简单的顶级示例；任何花费大量时间使用 i18n 的人都会告诉您，如果您想要一个适当的解决方案，您必须将*所有字符串*外部化，*彼此独立*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:01:51.710

语法方面，它不起作用，因为某些句子很复杂，无法通过翻译器正确翻译成主要语言，正如@Jon 所说，语法有时要求放置不同的值。

我建议你做的是，你用多种语言编写或翻译你的主要内容，当用户指定一种语言时，你的网站就会跳过，主要内容是明智的。我怀疑你是否有一个论坛，你希望每个人都用（例如）三种语言发表他们的帖子。

由于语法的原因，有些事情你可能也与 if else 语句有关。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-22T12:06:07.313

您可以通过使用 somes Objects 来实现这一点。

```
<?
class LocalizationFR{

     public function getHelloMessage(){
          return "bonjour";
     }
}

class LocalizationEN{

     public function  getHelloMessage(){
              return "Hello";
     }
}

class Localization{

     public function setHelloMessage(){
          array_push('messages', array('locale' => 'fr', 'message' => LocalizationFR::getHelloMessage()));
          array_push('messages', array('locale' => 'en', 'message' => LocalizationEN::getHelloMessage()));
     }

     public static function getHelloMessage($locale){
          return $this->messages[$locale];
     }

    } 
```

而且，在你的代码中，只是

```
<?php echo Localization::getHelloMessage('fr'); ?> 
```

正确的 ？

# android - Android：ClassCastException TextView 无法转换为 CalendarView

> ID：13010889
> 
> 赞同：1
> 
> 时间：2012-10-22T11:52:20.527
> 
> 标签：android, classcastexception

我对定制的日历视图有疑问。我有以下名为 calendar.xml 的 xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/next_month_button"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="Next" />

<Button
    android:id="@+id/prev_month_button"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Previous" />

<no.blopp.app.views.CalendarView
    android:id="@+id/calendarview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/next_month_button" />

<TextView
    android:id="@+id/month_of_year_textview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/prev_month_button"
    android:layout_alignBottom="@+id/prev_month_button"
    android:layout_centerHorizontal="true"
    android:text="September 2012"
    android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

当我尝试在活动中获取 CalendarView 时，我得到一个 classcastexception。这是Java代码：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.calendar);

    calendarView = (CalendarView) findViewById(R.id.calendarview);
    calendarView.setOnCellTouchListener(this);
    } 
```

（我已经在代码顶部声明了“private CalendarView calendarView”，但是当我尝试复制代码块时查看代码块时发生了一些奇怪的事情。我是新手，对此感到抱歉）。classcast 异常在以下位置引发：

```
calendarView = (CalendarView) findViewById(R.id.calendarView); 
```

我不知道我在这里做错了什么。我的 xml 文件有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:53:08.203

您可以尝试在 XML 文件中为您的自定义组件声明一个命名空间，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:mycomponent="http://schemas.android.com/apk/res/replaceWithStringFromPackageAttributeInManifest.xml"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

...

<mycomponent:no.blopp.app.views.CalendarView
    android:id="@+id/calendarview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/next_month_button" />

...

</RelativeLayout> 
```

# ruby-on-rails - Rails ActiveRecord - 清理相关记录

> ID：13010897
> 
> 赞同：0
> 
> 时间：2012-10-22T11:52:42.867
> 
> 标签：ruby-on-rails, activerecord

我的朋友帮我做了一些清理工作——但它看起来不像 Rails 的主动记录方式。

首先我是这样写的：

```
@count_users_approved = current_agent.users.map { |u| u.orders.where("created_at >= ? AND order_status_id = ?", DateTime.now.beginning_of_day, "3")}.count 
```

# 而不是计算记录，结果以这种方式显示：[0,0,1]

我的朋友通过这样写来修复它：

```
@count_users_approved = Order.where("created_at >= ? AND user_id IN (?) AND order_status_id = ?", DateTime.now.beginning_of_day, current_agent.users.map(&:id), 2).count 
```

我们能写出这么干净的 ActiveRocord 类型吗？

我的模型就是这样设计的。

```
class Agent < ActiveRecord::Base
  has_many :users
end

class User < ActiveRecord::Base
  belongs_to :agent
  has_many :orders
  has_many :support_histories
  has_one :card_info
end

class Order < ActiveRecord::Base
  belongs_to :user
  belongs_to :order_type
  belongs_to :order_status
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:07:50.823

我会这样：

```
@count_users_approved = Order.joins(:user).where("orders.created_at >= ?", DateTime.now.beginning_of_day).where(users: {agent_id: current_agent.id}, order_status_id: 2).count 
```

您正在加入用户表以测试用户是否已分配给当前代理。

也不需要映射 id，您可以只传递`current_agent.users`数组，Rails 在构建查询时为您提取对象的 id。

# r - 动态更改“SpatialGridDataFrame”中的数据槽

> ID：13010900
> 
> 赞同：1
> 
> 时间：2012-10-22T11:52:50.973
> 
> 标签：r, spatial

假设我有“SpatialGridDataFrame”。

```
grd <- GridTopology(c(0,0), c(10,10), c(10,20))

grdx = SpatialGridDataFrame(grd, d=data.frame(www)) 
```

其中 'www' 是 num [1:200] 1010 1010 1010 1009 1009 ...（200 个变量，共 1 个变量）

我想更改 g$www 并记住所有具有不同名称的实现。
例如，如果我使

```
r <- replicate(15,rnorm(10*20,mean=0,sd=3))   # matrix 200x15 with random numbers
m <-(matrix(nrow=200,ncol=15))
for (i in 1:15){
m [,i] <-  g[[1]] + r[,i]}    # matrix 200x15 with INPUT values for g$www 
```

最后我想拥有：

'SpatialGridDataFrame' g_1 与 g$www = m[,1];

'SpatialGridDataFrame' g_2 与 g$www = m[,2];

'SpatialGridDataFrame' g_3 与 g$www = m[,3]; 等等

谢谢！

# java - 购买项目 facebook 不起作用（as3）

> ID：13010906
> 
> 赞同：1
> 
> 时间：2012-10-22T11:53:07.833
> 
> 标签：java, facebook, flash

我试图开发系统以使用 as3（flash）在 Facebook 购买商品，但是当我测试应用程序时，我得到的响应是`"The app you are using is not responding. Please try again later.`“

我尝试了几个示例，包括 Facebook 开发者文档。这是我正在使用的代码。

```
 public function buyItens(event:MouseEvent):void {
        Facebook.api('/me?access_token='+access_token);
        var order_info:Object = { 
           title:'Test buy item.',
           description:'Item test',
           price:'10',
           item_id:'1a'
        };
        var obj:Object = {
           //method: 'pay',
           action: 'buy_item',
           order_info: order_info,
           dev_purchase_params: {'oscif': true}
        };
        Facebook.ui('pay',obj,callback);
    }

    private var callback=function(data) {
            dTrace(data['order_id']);
          if (data['order_id']) {
             dTrace("callback"+data['order_id']);
            return true;
          } else {
            //handle errors here
            dTrace("callback handle errors here");
            return false;
          }
        }; 
```

我是一名初学者 Facebook 开发人员。其他功能，例如购买积分和赚取积分，但购买物品不起作用。有什么问题？

# android - 滑动抽屉应用程序退出

> ID：13010907
> 
> 赞同：0
> 
> 时间：2012-10-22T11:53:12.250
> 
> 标签：android

对于我的应用程序，我需要为按钮组创建一个滑动抽屉，但是当我运行代码时，它会显示强制关闭警告。我的 Xml 看起来像

```
 <?xml version="1.0" encoding="utf-8"?>
  <FrameLayout
       android:visibility="visible"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent" 
       xmlns:android="http://schemas.android.com/apk/res/android">

  <com.measure.sizemesurment2.MyView
     android:id="@+id/DrawViewId"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent">
    </com.measure.sizemesurment2.MyView >

    <SlidingDrawer
      android:id="@+id/drawer"
       android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:handle="@+id/handle"
      android:content="@+id/content">

     <ImageView 
        android:id="@id/handle"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent" 
        android:src="@drawable/drawer"/>

   <RelativeLayout
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:orientation="horizontal"
       android:gravity="bottom">

  <ImageButton
        android:id="@+id/left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:onClick="ButtonOnClick"                    
        android:src="@drawable/left" />

    <ImageButton
        android:id="@+id/right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginLeft="40dp"
        android:onClick="ButtonOnClick"                    
        android:src="@drawable/right" />

   <ImageButton
        android:id="@+id/up"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginLeft="80dp" 
        android:onClick="ButtonOnClick"                                   
        android:src="@drawable/up" />

      <ImageButton
         android:id="@+id/down"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
         android:layout_marginLeft="120dp"   
         android:onClick="ButtonOnClick"                    
         android:src="@drawable/down" />

   <Button
        android:id="@+id/plus"
        android:layout_width="40dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginLeft="180dp"  
        android:textSize="20dp"  
        android:onClick="ButtonOnClick"              
        android:text="+" 
      />

   <Button
       android:id="@+id/minus"
       android:layout_width="40dp"
       android:layout_height="wrap_content"
       android:layout_alignParentBottom="true"
       android:layout_marginLeft="220dp"
       android:textSize="20dp"  
       android:onClick="ButtonOnClick"                    
       android:text="-" />

   <Button
      android:id="@+id/ok"
      android:layout_width="60dp"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_marginLeft="260dp"  
      android:textSize="20dp"  
      android:onClick="ButtonOnClick"                        
      android:text="OK" />
    </RelativeLayout>
  </SlidingDrawer>

  </FrameLayout> 
```

其中 MyView 类用于画布绘图..在上述 xml 文件的情况下是正确的......任何帮助将不胜感激......提前致谢......

这是我的日志猫

```
10-22 17:40:17.810: D/dalvikvm(6384): GC_EXTERNAL_ALLOC freed 1K, 44% free   3371K/5959K, external 1801K/1925K, paused 31ms
10-22 17:40:17.860: I/Camera(6384): handleMessage: 16
10-22 17:40:17.952: I/Camera(6384): handleMessage: 16
10-22 17:40:17.979: I/Sample::Activity(6384): onPause
10-22 17:40:17.979: I/Sample::SurfaceView(6384): releaseCamera
10-22 17:40:18.017: D/IPCThreadState(6384): [DN #5] BR_CLEAR_DEATH_NOTIFICATION_DONE cookie 0x1772a0
10-22 17:40:18.193: D/AndroidRuntime(6384): Shutting down VM
10-22 17:40:18.194: W/dalvikvm(6384): threadid=1: thread exiting with uncaught exception (group=0x4001b6a8)
10-22 17:40:18.200: E/AndroidRuntime(6384): FATAL EXCEPTION: main
10-22 17:40:18.200: E/AndroidRuntime(6384): java.lang.RuntimeException: Unable to start activity    ComponentInfo{com.measure.sizemesurment2/com.measure.sizemesurment2.MesureSizeActivity}: java.lang.IllegalArgumentException: The content attribute is must refer to an existing child.
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1740)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1759)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.app.ActivityThread.access$1500(ActivityThread.java:155)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:999)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.os.Handler.dispatchMessage(Handler.java:130)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.os.Looper.loop(SourceFile:351)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.app.ActivityThread.main(ActivityThread.java:3826)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at java.lang.reflect.Method.invokeNative(Native Method)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at java.lang.reflect.Method.invoke(Method.java:538)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:969)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:727)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at dalvik.system.NativeStart.main(Native Method)
10-22 17:40:18.200: E/AndroidRuntime(6384): Caused by: java.lang.IllegalArgumentException: The content attribute is must refer to an existing child.
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.widget.SlidingDrawer.onFinishInflate(SlidingDrawer.java:277)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:662)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:657)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.view.LayoutInflater.inflate(LayoutInflater.java:439)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.view.LayoutInflater.inflate(LayoutInflater.java:351)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.view.LayoutInflater.inflate(LayoutInflater.java:307)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:253)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.app.Activity.setContentView(Activity.java:1703)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at com.measure.sizemesurment2.MesureSizeActivity.onCreate(MesureSizeActivity.java:55)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1082)
10-22 17:40:18.200: E/AndroidRuntime(6384):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1704)
10-22 17:40:18.200: E/AndroidRuntime(6384):     ... 11 more
10-22 17:40:18.203: E/dalvikvm(6384): [DVM] mmap return base = 45374000
10-22 17:40:18.246: D/dalvikvm(6384): GC_CONCURRENT freed 442K, 48% free 3139K/6023K, external 1206K/1925K, paused 2ms+17ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:56:31.807

你需要声明

```
 android:id="@+id/content" 
```

用于您的 SlidingDrawer 中的 RelativeLayout。[您可以从此处](http://developer.android.com/reference/android/widget/SlidingDrawer.html)找到有关 SlidingDrawer 的更多信息。 如果它不起作用，请在此处发布 logcat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:08:22.357

还要确保在类 com.measure.sizemesurment2.MyView 你有以下构造函数

```
public MyView(Context context, AttributeSet attrs) {
super(context, attrs);
    //your code
} 
```

谢谢和问候， Rajamanickem.S

# python - 在 PyGame 中移动图像会隐藏所有其他图像

> ID：13010924
> 
> 赞同：1
> 
> 时间：2012-10-22T11:54:21.623
> 
> 标签：python, pygame

当我在 PyGame 屏幕上移动一个图像时，如果它碰巧越过了另一个图像，那些在下面的图像就会被隐藏起来，再也看不到了。为什么会这样？

我的代码是：

```
def main():
    screen = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))

    background = pygame.image.load('Background.png').convert()
    screen.blit(background, (0, 0))  # draw the background screen

    human1 = pygame.image.load('Human1.gif').convert()
    human1_position = pygame.Rect(10, BOTTOM_FLOOR, CHARACTER_WIDTH, CHARACTER_HEIGHT)
    screen.blit(human1, human1_position)  # draw the first human

    human2 = pygame.image.load('Human2.gif').convert()
    human2_position = pygame.Rect(100, BOTTOM_FLOOR, CHARACTER_WIDTH, CHARACTER_HEIGHT)
    screen.blit(human2, human2_position)  # draw the second human

    human3 = pygame.image.load('Human3.gif').convert()
    human3_position = pygame.Rect(190, BOTTOM_FLOOR, CHARACTER_WIDTH, CHARACTER_HEIGHT)
    screen.blit(human3, human3_position)  # draw the third human

    pygame.display.update()  # display all graphical elements

    move = STOP  # Variable to track what the current move is. Initially, stopped
    move_character = 1  # Variable to track which character is being moved

    while True:
        #
        # See what the user did...
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                sys.exit()
            elif event.type == pygame.KEYDOWN:

                # Check if there is a move currently happening. The program
                # will only do something if the previous move is stopped
                if move == STOP:
                    # Check which key was pressed...
                    if event.key == pygame.K_1:
                        # if key pressed is the '1' key, move first human (and check if moving from bottom to top or other way)
                        move_character = 1  # the first character is to be moved
                        if human1_position.top < 300:
                            # If the 'top' of the human's position is less 
                            # than 300 then it means the human is currenlty
                            # on the top half of the screen, and so
                            # the next move will be to move it downards
                            move = DOWN
                        else:
                            move = UP

                    # Check which key was pressed...
                    if event.key == pygame.K_2:
                        # if key pressed is the '2' key, move second human (and check if moving from bottom to top or other way)
                        move_character = 2 # the first character is to be moved
                        if human2_position.top < 300:
                            # If the 'top' of the human's position is less 
                            # than 300 then it means the human is currenlty
                            # on the top half of the screen, and so
                            # the next move will be to move it downards
                            move = DOWN
                        else:
                            move = UP

            screen.blit(background, human1_position, human1_position) # erase old position of first human
            if (move == UP):
                #they want to move up, so first check the lift is down with them.
                if (liftLoc == "down"):
                    #they are both down, they can be moved into the lift
                    if (human1_position.left <= 245):
                        human1_position = human1_position.move(2, 0)  # move first human
                        pygame.display.update()
                    else:
                        move = STOP
                else:
                    print "Wrong floor!" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T01:29:05.180

所以你遇到的问题是，你只是在开始时渲染/blitting你移动的图像，所以它们会“未渲染”或被渲染。为了摆脱这个问题，就像所有其他实时渲染引擎一样，你应该渲染你想让别人看到的一切，每一帧你想让事情发生。

我不会给你代码更正，而只是将`screen.blit`每个图像的移动到你的 while 循环中。它们的位置显然会影响渲染顺序。

# python - Reportlab 画布图像未显示

> ID：13010930
> 
> 赞同：1
> 
> 时间：2012-10-22T11:55:13.043
> 
> 标签：python, reportlab

**背景**

我正在编写一些代码来使用`SimpleDocTemplate`( `reportlab.platypus.SimpleDocTemplate`) 在 ReportLab 中设置共享文档“模板”[通用页眉和页脚]。下面的代码片段是一个函数，它将作为or参数`SimpleDocTemplate` `build(...)`的值传递给方法。`onFirstPage``onLaterPages`

```
def setup_header_and_footer(canvas, doc):
    """
    ...edited out...
    """
    canvas.line(0 * mm, 174 * mm, 297 * mm, 174 * mm)
    logo_filename = settings.STATIC_ROOT + os.sep + "images/huqas_logo.jpg"
    canvas.drawImage(logo_filename, 20 * mm, 45 * mm)

    canvas.drawRightString(287 * mm, 200 * mm, "<edited out>")
    canvas.drawString(20 * mm, 15 * mm, "Generated on %s" % datetime.now().strftime("%A %d %B %Y %I:%M:%S %p"))
    canvas.line(0 * mm, 20 * mm, 297 * mm, 20 * mm) 
```

**更多信息**

*   页面/画布已设置为 A4 横向尺寸
*   我已确认 logo_filename 是有效路径，并且图像存在于文件系统中的该位置
*   Reportlab 没有引发任何异常

**问题**

*   我的线条和字符串渲染正常，但图像在生成的 PDF 中不可见

我已经看过[这个问题](https://stackoverflow.com/questions/5356413/draw-images-with-canvas-and-use-simpledoctemplate)，但我仍然不明白为什么画布在调用时会“表现”例如`canvas.line(0 * mm, 174 * mm, 297 * mm, 174 * mm)`但在调用时失败`canvas.drawImage("file name", 20 * mm, 45 * mm)`。我也搜索了文档无济于事。我错过了什么？

**更新**

从 更改`canvas.drawImage(logo_filename, 20 * mm, 45 * mm)`为`canvas.drawInlineImage(logo_filename, 20 * mm, 45 * mm)`似乎“解决”了问题[不更改任何其他代码行]。我仍然对为什么`drawImage`没有工作感到困惑。

# android - 在 RelativeLayout 中同时使用 layout_alignBaseline 和 layout_alignBottom

> ID：13010933
> 
> 赞同：6
> 
> 时间：2012-10-22T11:55:23.263
> 
> 标签：android, layout, android-relativelayout

我试图得到一个看起来像这样的布局：

![相对布局示例](../Images/1a145995e95395ab0c22a6ffeb45a0ea.png)

那是：

1.  `TextView`与父级左侧和顶部对齐（带边距）。
2.  的`EditText`左侧的`TextView`， 的右侧`Button`和基线对齐的`TextView`。
3.  与`Button`父右侧对齐（只有右边距）。这是损坏的部分：底部对齐到`EditText`.

无论出于何种原因，它都不起作用。这是我希望工作的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="32dp"
        android:layout_marginTop="32dp"
        android:text="Text:" />

    <EditText
        android:id="@+id/edit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/text"
        android:layout_toLeftOf="@+id/button"
        android:layout_toRightOf="@+id/text"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignBottom="@+id/edit"
        android:layout_marginRight="32dp"
        android:text="Ok" />

</RelativeLayout> 
```

结果是这样的：

![损坏的相对布局](../Images/4b07b919404b0d81084ed73e0dde928b.png)

这是怎么回事？

# 编辑

抱歉，我不确定为什么要更改此示例，但在我的代码中，我实际上使用的是`ImageButton`, not `Button`，因此解决方案不能涉及与按钮的基线`EditText`对齐 - 必须与*底部*（或中间）对齐如果可能的话）的按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T11:59:51.690

尝试这个..

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="32dp"
    android:layout_marginTop="32dp"
    android:text="Text:" />

<EditText
    android:id="@+id/edit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/text"
    android:layout_toLeftOf="@+id/button"
    android:layout_toRightOf="@+id/text"
    android:ems="10" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/edit"
    android:layout_alignBottom="@+id/edit"
    android:layout_alignParentRight="true"
    android:layout_marginRight="30dp"
    android:text="Ok" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T00:36:36.417

似乎是一个影响 alignBaseline 被用作其他孩子的锚的错误。[https://code.google.com/p/android/issues/detail?id=73697&thanks=73697](https://code.google.com/p/android/issues/detail?id=73697&thanks=73697)

# asp.net - 在asp.net中动态地将多个系列添加到图表中

> ID：13010938
> 
> 赞同：2
> 
> 时间：2012-10-22T11:55:41.337
> 
> 标签：asp.net, c#-4.0

我想在图表中添加动态系列。

我有一个像日期这样的数据，总计。我想在图表上绘制这些点。

我从 sql 数据库中获取数据并绑定。

我想绘制数据表中的数据，这些数据将动态更新。

```
Series newSeries=new Series();
newseries.ChartType=SeriesChartType.Line;
newSeries.BorderWidth = 3;
Chart1.Series.Add(newSeries);
newSeries.XValueMember = "date1";
newSeries.YValueMembers = "total";
Chart1.DataBind(); 
```

这是在树视图的最后一个系列中绘制的。请帮我解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T12:17:32.237

```
 foreach(DataRow row in myDataSet.Tables["Query"].Rows)
    {
        // For each Row add a new series
        string seriesName = row["SalesRep"].ToString();
        Chart1.Series.Add(seriesName);
        Chart1.Series[seriesName].ChartType = SeriesChartType.Line;
        Chart1.Series[seriesName].BorderWidth = 2;

        for(int colIndex = 1; colIndex < myDataSet.Tables["Query"].Columns.Count; colIndex++)
        {
            // For each column (column 1 and onward) add the value as a point
            string columnName = myDataSet.Tables["Query"].Columns[colIndex].ColumnName;
            int YVal = (int) row[columnName];

            Chart1.Series[seriesName].Points.AddXY(columnName, YVal);
        }
    } 
```

# asp.net-mvc-3 - 在 mvc3 asp.net 中提交表单之前上传图片

> ID：13010939
> 
> 赞同：1
> 
> 时间：2012-10-22T11:55:48.537
> 
> 标签：asp.net-mvc-3, jquery, post, file-upload

我正在使用 asp.net MVC3

我想在提交表单之前上传图片。

下面是我的代码

```
 <div>
   @using (Html.BeginForm("SaveData", "Home", FormMethod.Post, new { @enctype =      "multipart/form-data" }))
   {
     <div> Image: 
           <input type="file" name="uploadFile" onchange="upload(this);" /></div>
     <div> Name: 
           @Html.TextBoxFor(model => model.Name)</div>
     <div> Address:  
           @Html.TextBoxFor(model => model.Address)</div>
     <div> Phone: 
           @Html.TextBoxFor(model => model.Phone)</div>

     <input type="submit" name="save" id="savedata" title="save" 
        value="save"  />
}         
</div>

<script type="text/javascript">
   function UploadFile(image) {
        //call controller action UploadFile
         $.ajax({
            type: "Post",
            url: "Home/UploadFile",
            data: image,       //This is wrong
            contentType: "application/json; charset=utf-8",
            dataType: "json"
        });
   }
</script> 
```

现在在控制器端

```
 public ActionResult UploadFile(HttpPostedFileBase uploadFile)
 {
     //save image
 } 
```

任何人都可以建议我如何在发布表单以保存数据之前上传图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:09:26.407

`$.ajax()`没有能力做到这一点。不过，有可用的 jQuery 插件，可以为您执行此操作。[这是一个](http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/)。[该线程](https://stackoverflow.com/questions/2320069/jquery-ajax-file-upload)还讨论了执行此操作的大量选项。请注意，通过 AJAX 上传文件是一项相对较新的功能，[并非所有浏览器都支持它](http://caniuse.com/#search=FormData)。

# android - 尝试从这里在 android 中实现 page curl 示例

> ID：13010941
> 
> 赞同：1
> 
> 时间：2012-10-22T11:55:59.143
> 
> 标签：android, animation, page-curl

我已经从[github](https://github.com/harism/android_page_curl)下载了源代码。它工作正常。我想实现这种类型的应用程序，但我的问题出在`PageProvider`它的类中：

```
private int[] mBitmapIds = { R.drawable.obama, R.drawable.road_rage,R.drawable.taipei_101, R.drawable.world } 
```

如果我从我的`drawable`文件夹中在此数组中添加更多图像，则在运行此代码时不会显示这些图像。

尝试为页面卷曲效果添加更多图像。并告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:51:39.477

你必须更换：

```
 @Override
    public int getPageCount() {
        return 5;
    } 
```

和：

```
 @Override
    public int getPageCount() {
        return mBitmapIds.length;
    } 
```

然后，修改对“loadBitmap”方法的调用（在“updatePage”方法中）用“index”变量替换最后一个参数（它有一个固定的数字）。此外，您可以摆脱整个开关并按照您的意愿配置页面（只需从您想要的开关案例中提取代码）。

**更新1**

使用此方法：

```
 @Override
    public void updatePage(CurlPage page, int width, int height, int index) {
        Bitmap front = loadBitmap(width, height, index);
        page.setTexture(front, CurlPage.SIDE_BOTH);
        page.setColor(Color.argb(127, 255, 255, 255), CurlPage.SIDE_BACK);
    } 
```

# vb.net - 如何将参数传递给存储过程

> ID：13010943
> 
> 赞同：0
> 
> 时间：2012-10-22T11:56:03.270
> 
> 标签：vb.net, stored-procedures, crystal-reports

使用 Crystal Report 9 和 VB.Net

报告正在通过存储过程运行，我想将数据传递给存储过程。

怎么做？

在VB6中，我确实喜欢这个。

```
Report.ReportFileName = REPPATH & "\Detail.rpt"
Report.StoredProcParam(0) = Did
Report.StoredProcParam(1) = Deed
Report.Action = 1 
```

如何在 vb.net 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:43:04.103

我认为类似以下的方法应该有效：

SetDataSource 有 4 个覆盖，它们都将 IEnumerable 类对象作为参数。但这已经在 VS 2010 的 CR 13 上完成了……我希望你能找到类似 CR 9 的东西。

```
 Dim report As New CrystalReport1
    Dim sqla = New SqlDataAdapter()
    sqla.SelectCommand.Connection = New SqlConnection(sConnectionString)
    sqla.SelectCommand = New SqlCommand("EXEC storedProcName @a, @b, @c")
    sqla.SelectCommand.Parameters.Add("@a", paramA)
    sqla.SelectCommand.Parameters.Add("@a", paramB)
    sqla.SelectCommand.Parameters.Add("@a", paramC)

    report.SetDataSource(sqla)
    //'If you do not have parameters, you may use :
    report.SetDataSource(New SqlDataAdapter("EXEC storedProcName ", sConnectionString))

    report.Refresh() 
```

**编辑：** `sqla.SelectCommand.Parameters.Add("@a", paramA)`在 CR13 版本中折旧。`sqla.SelectCommand.Parameters.AddWithValue("@a", paramA)`改为使用。

# objective-c - Objective-C 的图像压缩库

> ID：13010951
> 
> 赞同：3
> 
> 时间：2012-10-22T11:56:36.757
> 
> 标签：objective-c, macos, cocoa, compression, nsimage

好的，这就是我需要的：

*   **有损**和/或**无损**压缩*（所有选项都将被考虑，尽管无损压缩将受到青睐）*
*   **支持PNG**和**JPG**文件
*   **Cocoa 友好的**代码和易于集成

* * *

我过去使用过**[OptiPNG](http://optipng.sourceforge.net/)**，但我目前正在寻找替代方案。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T01:34:43.150

对于有损 PNG 压缩，请使用[libimagequant](http://pngquant.org/lib)（它将 RGB/RGBA 数据转换为调色板+alpha，比它小 3 倍）结合 lodePNG（它支持调色板+alpha 格式，与 Cocoa 的内置方法不同）。

# shell - 在 shell 脚本中输入 Y 表示是，N 表示否

> ID：13010952
> 
> 赞同：2
> 
> 时间：2012-10-22T11:56:38.143
> 
> 标签：shell

我在 ksh 中有一个 Shell 脚本，在输入输入后，脚本要求输入 Y 表示是，输入 N 表示否，以便检查输入并继续。下面是脚本的那部分：

```
echo ""

YN=""
while [ "x$YN" != "xn" -a "x$YN" != "xN" -a "x$YN" != "xy" -a "x$YN" != "xY" ]; do
   echo -n "Please confirm (y/n): "
   read YN
done

if [ "x$YN" = "xn" -o "x$YN" = "xN" ]; then
   exit 0
fi 
```

我无法理解

```
while [ "x$YN" != "xn" -a "x$YN" != "xN" -a "x$YN" != "xy" -a "x$YN" != "xY" ]; 
```

在这方面你能帮我吗..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:05:31.683

其实这应该写成：

```
while [ "$YN" != "n" -a "$YN" != "N" -a "$YN" != "y" -a "$YN" != "Y" ]; 
```

`$YN`但是对于某些 shell，如果变量为空，这将导致错误。因此，进行比较的安全方法是在比较两侧的双引号内附加一个虚拟字符（以便它们相互抵消），例如：

```
while [ "x$YN" != "xn" -a "x$YN" != "xN" -a "x$YN" != "xy" -a "x$YN" != "xY" ]; 
```

即使`$YN`是空的也不会中断。

# php - 使用多个下拉列表的 PHP 搜索表单过滤器

> ID：13010953
> 
> 赞同：0
> 
> 时间：2012-10-22T11:56:37.810
> 
> 标签：php, drop-down-menu, filter

这是修改后的代码。还是没有运气！请。帮助

```
<html>
<body>

<?php

 $mysqli = new mysqli("localhost", "root", "password", "test");

 $whereClauses = '';
 $numLocations = count($_POST['Locations']);
 $numJobs = count($_POST['Jobs']);
 $i = 0;
 if (! empty($_POST['Locations'])) {
  foreach ($_POST['locations'] as $location) {
    $whereClauses .="Locations='".mysql_real_escape_string($location)."'";
    if ($i++ == $numLocations) {
     $whereClauses .= " AND";
    }
  }
  }
  if (! empty($_POST['Jobs'])) {
  foreach ($_POST['Jobs'] as $job) {
    $whereClauses .="Jobs='".mysql_real_escape_string($job)."'";
  }
  if ($i++ == $numJobs) {
     $whereClauses .= " AND";
  }
   }
  $sql = "SELECT * FROM mytable '".$whereClauses."' ORDER BY id DESC '".$limit."'";

$result=mysql_query($sql);

while ($row = mysql_fetch_array($result)) {
echo $row['Locations'];
echo $row['Jobs'];
}

?>
 </body>
</html> 
```

================================================= 我创建了一个HTML 和 PHP 文件，用于根据多个下拉过滤器过滤 Web 表单数据。这是表格。当我运行表单和 PHP 时，我在浏览器中看不到任何结果。也没有错误。我正在研究另一个论坛成员发布的示例。请帮忙。提前致谢。

```
<form action="showJobs_new.php" method="post">
<select name="Locations">
<option value="" selected="selected">All Locations</option>
<option value="arizona">Arizona</option>
<option value="alaska">Alaska</option>
</select>
<select name="Jobs">
<option value="" selected="selected">All jobs</option>
<option value="Carpenter">Carpenters</option>
<option value="Plumbers">Plumbers</option>
</select>
<input type="submit" value="search jobs" />
</form>

showJobs_new.php:

<html>
<body>

<?php

$username="root";
$password="password";
$database="test";

mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");

$whereClauses = array(); 
if (! empty($_POST['Locations'])) $whereClauses[] ="Locations='".mysql_real_escape_string($_POST['Locations'])."'"; 
if (! empty($_POST['Jobs'])) $whereClauses[] ="Jobs='".mysql_real_escape_string($_POST['Jobs'])."'"; 
$where = ''; 
if (count($whereClauses) > 0) { $where = ' WHERE '.implode(' AND ',$whereClauses); } 

$sql = mysql_query("SELECT * FROM mytable ORDER BY id DESC $limit" .$where);  

$result=mysql_query($sql);
or die("Error: ".mysql_error()."<br />Query: ".$sql);

while ($row = mysql_fetch_assoc($result)) {
echo $row['Locations'];
echo $row['Jobs'];
}

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:12:11.133

将查询更改为

```
$sql = mysql_query("SELECT * FROM mytable " .$where." ORDER BY id DESC $limit"); 
```

查询的顺序似乎是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:12:17.980

嗨亲爱的你有两个查询错误。

1-这是因为您输入了错误的子句顺序。您需要了解查询中子句的优先级是什么。运行查询时，子句的顺序应如下所示

*   选择

*   从

*   在哪里

*   通过...分组

*   有

*   订购方式

*   限制

2-按照建议使用 mysql_query 两次`user1599669`

所以你的查询应该看起来像

```
 $sql = mysql_query("SELECT * FROM mytable $where ORDER BY id DESC $limit"); 
```

如需更多参考，请阅读[mysql dev](http://dev.mysql.com/doc/refman/5.0/en/select.html)。

# css - CSS：悬停影响

> ID：13010957
> 
> 赞同：0
> 
> 时间：2012-10-22T11:56:49.610
> 
> 标签：css

我必须创建一个悬停效果，其中当一个选项卡悬停时，选项卡的整个背景应该是白色的。但是从下面的 SS 中可以看出![低于 SS](../Images/f45813ad0f8e7c938053932bf72ff9d6.png)，悬停效果仅应用于文本部分。

我还附上了 Chrome Web 开发人员的 CSS。

![CSS](../Images/50cb6bb6ef9d2f7c25d2c51724a66c3d.png)

生成该选项卡的 HTML 代码是

```
<li>
  <a class="last_menu" href="#"></a>
</li> 
```

我试过用`padding`元素调整。但是，文本也随之移动。我希望文本位于中心并且仅悬停以扩展以占据整个选项卡空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:02:08.013

尝试将一个类应用于列表项本身，然后在悬停伪选择器下指定一个白色背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:08:06.593

安装[Web Developer Toolbar](http://chrispederick.com/work/web-developer/)转到`CSS > Display Style Information`或`<ALT+SHIFT+Y>`（它是工具栏中的魔杖）。将鼠标悬停在相关元素上，以详细了解其渲染方式。研究这个。让它成为你的朋友。

# java - 设置土耳其语和英语语言环境：将土耳其语字符翻译成拉丁语等价物

> ID：13010958
> 
> 赞同：21
> 
> 时间：2012-10-22T11:56:50.330
> 
> 标签：java, android, locale

我想在英语和土耳其语环境中将我的土耳其语字符串翻译成小写。我正在这样做：

```
String myString="YAŞAT BAYRI";
Locale trlocale= new Locale("tr-TR");
Locale enLocale = new Locale("en_US");

Log.v("mainlist", "en source: " +myString.toLowerCase(enLocale));
Log.v("mainlist", "tr source: " +myString.toLowerCase(trlocale)); 
```

输出是：

```
en source: yaşar bayri

tr source: yaşar bayri 
```

但我想要这样的输出：

```
en source: yasar bayri

tr source: yaşar bayrı 
```

这在Java中可能吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-22T12:07:03.723

如果您使用`Locale`构造函数，您可以并且必须将语言、国家和变体设置为单独的参数：

```
new Locale(language)
new Locale(language, country)
new Locale(language, country, variant) 
```

因此，您的测试程序使用“tr-TR”和“en_US”语言创建语言环境。对于您的测试程序，您可以使用`new Locale("tr", "TR")`和`new Locale("en", "US")`。

如果您使用的是 Java 1.7+，那么您还可以使用以下方法解析语言标签`Locale.forLanguageTag`：

```
String myString="YASAT BAYRI";
Locale trlocale= Locale.forLanguageTag("tr-TR");
Locale enLocale = Locale.forLanguageTag("en_US"); 
```

创建具有适合该语言的小写字母的字符串。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-22T12:05:43.953

我认为这是问题所在：

```
Locale trlocale= new Locale("tr-TR"); 
```

试试这个：

```
Locale trlocale= new Locale("tr", "TR"); 
```

这是用于指定国家和语言的构造函数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-16T11:43:13.400

你可以这样做：

```
Locale trlocale= new Locale("tr","TR"); 
```

第一个参数是您的语言，而另一个参数是您的国家。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-22T12:04:40.670

如果您只想要 ASCII 中的字符串，没有重音符号，则可以使用以下方法。首先，重音字符可能会被拆分为 ASCII 字符和组合的变音符号（零宽度重音）。然后只有那些重音可以通过正则表达式替换删除。

```
public static String withoutDiacritics(String s) {
    // Decompose any ş into s and combining-,.
    String s2 = Normalizer.normalize(s, Normalizer.Form.NFD);
    return s2.replaceAll("(?s)\\p{InCombiningDiacriticalMarks}", "");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T12:33:15.773

字符`ş`和`s`是不同的字符。更改语言环境不能帮助您将一种语言翻译成另一种语言。您必须创建土耳其语到英语的字符表并自己执行此操作。我曾经为有很多这样的字符的越南语做过这个。您必须处理 5 个中的 4 个，对吗？所以，祝你好运！

# c# - 从已填充匿名类型的 WPF 数据网格中获取单元格值

> ID：13010961
> 
> 赞同：0
> 
> 时间：2012-10-22T11:57:04.040
> 
> 标签：c#, wpf, datagrid, anonymous-types

[我有一个数据网格，我按照这个问题here](https://stackoverflow.com/questions/13009612/setting-wpf-datagrid-source-to-a-group-of-string-arrays/13009734#13009734)中概述的过程填充了2个字符串数组

现在，当我试图获取选定的单元格值时，我正在努力将单元格值拉回。

到目前为止，我有：

```
IList rows = dgMain.SelectedItems; 
```

它返回所选项目的列表，其中第一项包含具有用户名和密码的对象。

我的问题是如何访问用户名和密码？我想我需要将列表中的对象转换为允许我调用它`.UserName`的`.Password`东西？

如果您需要更多信息，请告诉我。

# jquery-ui - JQuery自动完成在某些页面中不起作用

> ID：13010963
> 
> 赞同：0
> 
> 时间：2012-10-22T11:57:07.113
> 
> 标签：jquery-ui, jquery

我对以下代码有一个奇怪的问题。

我正在使用以下代码使用 jQuery 自动完成功能。有时它可以很好地为我提供某些特定页面的自动完成列表中的搜索结果。

在那些特定页面之外的其他页面中，此功能不起作用。

```
$(document).ready(function() {

    $( "#userToSearch" ).autocomplete({
        minLength: 3,
        source: '${pageContext.request.contextPath}/searchUserAutocomplete.do'
    });
}); 
```

我用于 minLength 3 的上述代码和搜索来自 searchUserAutoComplete.do，它映射了一个弹簧控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-14T08:17:17.077

如果您重新加载它们，这些页面是否会自动完成。如果是这样，请使用 $route.reload 或 location.reload 重新加载这些页面，并让我们知道它是否有效

# jquery - 从 jqgrid 添加或删除的绑定行

> ID：13010964
> 
> 赞同：0
> 
> 时间：2012-10-22T11:57:07.410
> 
> 标签：jquery, jqgrid

在创建 jqgrid 之后。

在另一个 jquery 方法中，我想绑定事件以检查是否从 jqgrid 添加或删除行。

我想记录现有网格的变化。我怎么能这样做？

像这样的东西

```
 $(grid).bind('jqGridRowAdded', function () {
        alert('hello');
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:11:08.340

重要的是要知道将使用哪种方法来添加行。最常见的情况是`addRowData`直接或间接使用方法。所以你应该使用`jqGridAfterInsertRow`而不是不存在的事件`jqGridRowAdded`。[您可以在文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents#list_of_triggered_events_new_in_v4.3.2)中找到支持的事件的简短描述。文档中当前未描述事件的参数。所以我建议你在 jqGrid 的源代码中找到参数（例如见[该行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L2996)）。

# .net-4.0 - 我应该（可以）收集哪些数据来证明第三方软件中的 .net 错误？

> ID：13010968
> 
> 赞同：1
> 
> 时间：2012-10-22T04:39:06.623
> 
> 标签：.net-4.0

我们的用户经常使用第三方系统 - 用户可能整天都没有发生这种情况，其他日子他们可能会在 7 小时内看到它两次或三次 - 屏幕上会出现红色 x 而不是按钮，场或控制。

这不会伴随错误消息 - 至少不会出现在屏幕上向用户显示的消息。它只是一个红色的 x - 与控件一样大（因此有时几乎是整个屏幕，有时只是 25 个字符字段的大小）。

这是一个.net 系统。

在网上看，我可以看到这是一个 .net 错误。问题是，我们的开发人员没有编写它，供应商希望证明问题出在他们的系统上，而不是我们的 PC 上。

我们可以做些什么来收集有关此类问题的信息，以使我们能够向供应商提出我们的理由并让他们创建修复程序？我正在考虑要收集的数据——来自操作系统、内存的任何东西。.net 版本安装等。

但我也想了解错误记录——我确信可以记录第三方系统中发生的错误，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:12:35.590

首先，我会在事件查看器中的应用程序日志中查看与应用程序相关的任何异常日志。

如果供应商要求您提供证据，我会问供应商如何收集它。他们的应用程序可能有一个调试模式或一个日志文件，可用于帮助调试问题，但供应商最好在这方面为您提供建议。

# c# - 将语言从“En-Us”更改为控制面板中的任何全局语言后应用程序挂起

> ID：13010972
> 
> 赞同：0
> 
> 时间：2012-10-22T11:57:51.980
> 
> 标签：c#, winforms, cultureinfo

我使用 C# 创建了一个 WinForms 应用程序。当我尝试更改文化信息时，我的应用程序被挂起。

```
 Microsoft.Win32.SystemEvents.UserPreferenceChanged += new 
               Microsoft.Win32.UserPreferenceChangedEventHandler(SystemEvents_UserPreferenceChanged);

        void SystemEvents_UserPreferenceChanged(object sender, Microsoft.Win32.UserPreferenceChangedEventArgs e)
    {
        if (!PreviousInstance())
        {
            CultureInfo ObjCulture = new CultureInfo(CultureInfo.InvariantCulture.IetfLanguageTag, false);
            Thread.CurrentThread.CurrentCulture = ObjCulture;
            Application.CurrentCulture = ObjCulture;

        }
    }

        public void INIT()
        {
        CultureInfo objCultureInfo = null;
        try
        {
        objCultureInfo = new CultureInfo("en-US", false);
            objCultureInfo.NumberFormat.NumberDecimalSeparator = ".";
            objCultureInfo.NumberFormat.NegativeSign = "-";
            objCultureInfo.NumberFormat.NumberNegativePattern = 1; //1 stands for -100.
            Application.CurrentCulture = objCultureInfo;
        }
        } 
```

更改语言后......我的应用程序被挂起，当我尝试评估事物时我无法调试任何东西这个事件只调用了一次......但是如果在一个小应用程序中尝试它每次更改语言时都会出现......什么都没有也显示在 Eventviewer 中。我怎么解决这个问题？..

# asp.net - 如何从.net 中的 Web 应用程序将资金存入我的贝宝帐户

> ID：13010974
> 
> 赞同：0
> 
> 时间：2012-10-22T11:58:18.887
> 
> 标签：asp.net, paypal-sandbox

我想通过 .net 中的网络应用程序将钱存入我的贝宝帐户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:01:45.883

转到[https://www.paypal.com/cgi-bin/webscr?cmd=_donate-intro-outside](https://www.paypal.com/cgi-bin/webscr?cmd=_donate-intro-outside)并为您的网站创建自己的按钮。它将为您提供 html 代码以将其放置在您的网站中

# android - NDK 应用程序 onDestroy 清理 - 如何 DetachCurrentThread

> ID：13010976
> 
> 赞同：3
> 
> 时间：2012-10-22T11:58:22.740
> 
> 标签：android, c++, android-ndk, java-native-interface

所以如果我们附加我们必须在它完成后分离线程，对吧？

```
JNIEnv* get_jni_env()
{
JNIEnv* res;
JAVA_VM->GetEnv((void**) &res, JNI_VERSION_1_6);//Using cached JavaVM
JAVA_VM->AttachCurrentThread(&res, NULL);
return res;
} 
```

我从我的 Activity 类的**@Override protected void onDestroy()**调用下一个本机方法

```
 void free_jni_manager()
 {
   JNIEnv* env = get_jni_env();
   ... //Here i delete global refs (jclass)
  //JAVA_VM->DetachCurrentThread();
 } 
```

**错误：使用 interp 帧（计数 = 16）分离线程**- 主线程仍在运行，我们尝试分离它。

即使我们采用任何使用 JNIEnv 的函数（例如调用 java 方法），放置 DetachCurrentThread 也会导致相同的错误。

**如果在**pthread 函数中使用****DetachCurrentThread可以完美工作****

 ****```
static void* thread_func(void* arg)
{
 get_jni_env(); // attach new thread
 //Do thread stuff
 JAVA_VM->DetachCurrentThread();//thread done detached it with ok
 return NULL;
} 
```

我们是否需要分离主线程然后我们使用 JNI 完成，这样做吗？或者然后活动将被破坏，它会用JavaVM释放自己？我们是否需要调用 DestroyJavaVM()（如果使用 onDestroy 只会导致崩溃），免费缓存的 JavaVM 或垃圾清理器将如何处理这个问题？

PS 使用**AttachCurrentThreadAsDaemon()有什么好处**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:59:02.917

该`Activity.onDestroy()`方法在 UI 线程上调用。为什么要尝试从 UI 线程中分离 Java VM？该线程由系统管理，您既不应该将 Java VM 附加到它，也不应该从它分离 Java VM。

`JNIEnv*`可用于每个本机方法作为第一个参数。为什么首先需要`get_jni_env()`？

如果您需要工作线程上的 JNIEnv，那么您需要附加和分离（或从 Java 生成一个线程；这很容易）。

编辑：如果是重复附件，则无需分离。它不是一个引用计数系统。`AttachCurrentThread`记录为

> 尝试附加已附加的线程是无操作的。

而不是需要匹配的附加/分离调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-12T12:53:30.977

不要`JNI handler function`从 main调用`thread`。从主线程调用`JNI handler function`会导致崩溃。****

# scala - 我在哪里可以找到 scala.Any 和 scala.AnyRef 的定义？

> ID：13010984
> 
> 赞同：5
> 
> 时间：2012-10-22T11:58:57.333
> 
> 标签：scala

我想跳入 Any 的源代码，看看一些方法是如何实现的，但我发现它不包含在 scala-library-src 中，AnyRef 也不包含（然而，值类型和 Nothing 是）。我很好奇，Scala 对象基类型是如何以及在哪里实现的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T12:02:49.527

`/src/library-aux/scala/Any.scala`并`/src/library-aux/scala/AnyRef.scala`包含`trait Any`和`trait AnyRef`。

# mysql - 如何在mysql下面的结构化表中找到重复的条目

> ID：13010988
> 
> 赞同：-1
> 
> 时间：2012-10-22T11:59:14.673
> 
> 标签：mysql

如何在以下 MySQL 表中查找重复条目？我担心的是该表的大小为 500 MB，并且还在增长。

```
CREATE TABLE `phone_observations` (
`email_address` varchar(256) NOT NULL,
`phone_number` varchar(64) NOT NULL,
`phone_type` varchar(16) NOT NULL DEFAULT 'unknown',
`unix_time` int(10) unsigned NOT NULL,
`guid` int(10) unsigned NOT NULL,
`spammy` tinyint(1) NOT NULL DEFAULT '0',
KEY `phone_observations_phone_number` (`phone_number`),
KEY `phone_numbers_phone_type` (`phone_type`),
KEY `idx_spam` (`spammy`),
KEY `idx_guid_mail_time` (`guid`,`email_address`,`unix_time`)
`unique_phone_observations` (`email_address`,`phone_number`,`unix_time`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:03:48.330

您可以使用以下内容：

```
SELECT COUNT(*) AS `c`, `email_address`, `phone_number`, ... /* list all your columns here */
FROM `phone_observations`
GROUP BY `email_address`, `phone_number`, ... /* list all your columns here */
HAVING `c`>1 
```

# jquery - 通过 Jquery 进行表单验证

> ID：13010993
> 
> 赞同：0
> 
> 时间：2012-10-22T11:59:31.153
> 
> 标签：jquery, validation, radio-button, radio-group

我有很多广播组，你必须在每个组中选择至少 1 个。而且我不想使用html“必需”。

我用 jquery 写了一些东西，但它不起作用。

我只是想知道我哪里做错了。

```
$('#form1').submit(function(){

     $(".radiogrup").each(function(){

         var sel=$(this).find("input[type='radio']:checked").val();

    if(sel==null){
         alert("error msg"); return false;  

    }
    else {
        //submit form and do something.
    }

    });
}) 
```

但如果其中任何一个留空，则不应提交表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:17:52.053

替换这个：

```
var sel=$(this).find("input[type='radio']:checked").val();
if(sel==null){ /* Error */ } 
```

和

```
if($(this).find(':radio:checked').length == 0) { /* Error */ } 
```

[JsFiddle 演示](http://jsfiddle.net/bJa7a/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:18:58.447

尝试这样的事情

```
$('#form1').submit(function(){

 var sel= 'true';
 $(".myRadio").each(function(){
   if(this.checked){
      sel = 'false';
    }
 })

if(sel=='true'){
     alert("error msg"); return false;  

}
else {
    //submit form and do something.
   return true;
} 
```

})

# android - 如何在内部存储上备份 sqlite 数据库

> ID：13010995
> 
> 赞同：1
> 
> 时间：2012-10-22T11:59:32.793
> 
> 标签：android, android-intent, android-sdcard, android-sqlite

我正在使用下面的代码将我的数据库复制到内部存储，但它并没有帮助我并且总是出现这个错误。我经历了很多问题和答案，并尝试了很多博客文章，但无法使其发挥作用。我的手机是**HTC One X**

我还在清单文件中添加了一项权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

public static boolean backUpDataBase(Context context)
    {
        String packageName = "com.projectWork.mobile";
        try {
            File sd = Environment.getExternalStorageDirectory();
            File data = Environment.getDataDirectory();

            if (Environment.MEDIA_MOUNTED.equals(sd))
            {
                String currentDBPath = "//data//"+ packageName +"//databases//"+"appDb.db";
                String backupDBPath = "appDb.db";
                File currentDB = new File(data, currentDBPath);
                File backupDB = new File(sd, backupDBPath);

                FileChannel src = new FileInputStream(currentDB).getChannel();
                FileChannel dst = new FileOutputStream(backupDB).getChannel();
                dst.transferFrom(src, 0, src.size());
                src.close();
                dst.close();
                Toast.makeText(context, backupDB.toString(), Toast.LENGTH_LONG).show();

            }
        } catch (Exception e) {

            Toast.makeText(context, e.toString(), Toast.LENGTH_LONG).show();

        }

        return true;
    } 
```

这是我得到的错误

> java.io.FileNotFoundException：/mnt/sdcard/appDb.db：打开失败：EROFS（只读文件系统）

请指导，因为我想将我所有的错误存储在数据库中，以便我们以后分析它们。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:07:22.903

试试这个方法。它在我身边工作。

```
String currentDBPath = "\\data\\"+ packageName +"\\databases\\"+"appDb.db"; 
```

也关注[这个帖子](https://stackoverflow.com/questions/1995320/how-to-backup-database-file-to-sdcard-on-android)

谢谢。

# java - Java的ANFIS库？

> ID：13010996
> 
> 赞同：1
> 
> 时间：2012-10-22T11:59:34.883
> 
> 标签：java, artificial-intelligence, neural-network, fuzzy-logic

是否有可用于 Java 的即用型自适应神经模糊推理系统 (ANFIS) 库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:02:53.197

是的，NEFCLASS：[马格德堡大学的 NEFCLASS 网页](http://fuzzy.cs.uni-magdeburg.de/nefclass/nefclass-j/)

# javascript - jQuery 每个函数在 IE 上都不起作用

> ID：13010997
> 
> 赞同：-2
> 
> 时间：2012-10-22T11:59:43.057
> 
> 标签：javascript, jquery, internet-explorer, each

我在 Javascript 中有这段代码：

```
var len = 0;
$('#list > input').each(function() {
    if($(this).attr('checked')) len++;
});
if(!len) {
    alert("{$err.no_list_chosen}");
    return false;
}
return checkFormAdd(); 
```

它应该迭代复选框列表以确保至少选中一个，否则返回错误。所有这些都不适用于 Internet Explorer 8，也许也不适用于 7。有人可以帮我重写代码以使其适用于所有浏览器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:03:35.320

请只使用一行：

```
var amountOfChecked = $('#list > input:checked').length; 
```

它适用于所有浏览器，就像您的代码一样，但这没有意大利面条......