# StackOverflow 问答 15248000-15248999

# java - 使用脚本重构 java 代码

> ID：15248000
> 
> 赞同：5
> 
> 时间：2013-03-06T12:59:08.043
> 
> 标签：java, eclipse, refactoring, ltk

是否有基于 Eclipse 的解决方案来使用脚本重构 Java 代码？

我已经阅读过 Eclipse 语言工具包，但它似乎意味着创建一个插件，这对于一次性操作来说听起来有点过头了。

是否有某种与脚本语言的绑定，或者至少有一种从 java 调用重构代码但没有插件的方法？

示例用例：我有一个使用 castor 生成的类的项目，我想迁移到 JAXB 2。这意味着对现有代码进行大量重构，这不能通过搜索和替换来完成，也不能通过正则表达式来完成，因为上下文敏感性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:22:26.757

当重构复杂时，我通常使用[Recoder](http://sourceforge.net/apps/mediawiki/recoder/index.php?title=Main_Page)编写转换管道。这个工具的唯一缺点是它有时会破坏代码格式（例如移动注释，或添加/删除空格），但到目前为止，它已经足以满足我的要求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T13:06:44.720

Eclipse 提供了一些重构帮助。例如，如果您选择要重构的代码部分并右键单击，您将获得重构选项。您可以从中提取方法（我在重构时常用的方法）、提取接口、超类等。

您还可以检查这些：

[http://www.eclipse.org/articles/article.php?file=Article-Unleashing-the-Power-of-Refactoring/index.html](http://www.eclipse.org/articles/article.php?file=Article-Unleashing-the-Power-of-Refactoring/index.html)

[Eclipse：最有用的重构](https://stackoverflow.com/questions/1804839/eclipse-most-useful-refactorings)

# windows - 使用命令行创建在特定用户登录时运行的计划任务

> ID：15248001
> 
> 赞同：1
> 
> 时间：2013-03-06T12:59:11.177
> 
> 标签：windows, batch-file, cmd

我需要创建一个在特定用户登录时运行一次的计划任务。目的是仅为特定用户启动任务。

我知道我可以使用任务计划程序来创建带有触发器的任务**在登录时**和设置下，我指定了特定的用户。

但是，因为我需要在安装例程期间创建它，所以必须使用命令行自动创建它，例如使用*schtasks*命令。可以使用以下示例创建在登录时执行的任务：

```
schtasks /Create /TR executable.exe /RU user /TN name /SC ONLOGON 
```

但是我没有找到任何修饰符来为**ONLOGON**触发器指定特定用户。

资源：

*   [http://technet.microsoft.com/en-us/library/bb490996.aspx](http://technet.microsoft.com/en-us/library/bb490996.aspx)
*   [http://ss64.com/nt/schtasks.html](http://ss64.com/nt/schtasks.html)

你知道是否有任何未记录的开关吗？或者任何其他提供必要功能的命令行工具？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-19T01:43:13.950

将选项“/IT”添加到 schtasks /create 命令，例如：

```
schtasks /Create /TR executable.exe /RU user /TN name /SC ONLOGON /IT 
```

[正如在https://technet.microsoft.com/en-us/library/cc725744(v=ws.11).aspx](https://technet.microsoft.com/en-us/library/cc725744(v=ws.11).aspx)中提到的“/it 参数表示任务仅在（特定用户）登录时运行"

您应该忽略提到“在任何用户登录时”的任务计划程序 GUI，并实际尝试重新启动您的设备。您会发现特定命令仅在您使用（特定用户）的帐户登录时运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-22T05:53:11.763

最好的方法是通过 schtasks 命令行简单地导入 XML。这是一个在 bob 登录时以 bob 身份运行“calc.exe”的示例：

```
 <?xml version="1.0" encoding="UTF-16" ?> 
- <Task version="1.2" xmlns="http://schemas.microsoft.com/windows/2004/02/mit/task">
- <RegistrationInfo>
  <Date>2014-10-22T01:50:13</Date> 
  <Author>user</Author> 
  </RegistrationInfo>
- <Triggers>
- <LogonTrigger>
  <StartBoundary>2014-10-22T01:50:00</StartBoundary> 
  <Enabled>true</Enabled> 
  <UserId>WIN7BOX\bob</UserId> 
  </LogonTrigger>
  </Triggers>
- <Principals>
- <Principal id="Author">
  <UserId>bob</UserId> 
  <LogonType>InteractiveToken</LogonType> 
  <RunLevel>LeastPrivilege</RunLevel> 
  </Principal>
  </Principals>
- <Settings>
  <MultipleInstancesPolicy>IgnoreNew</MultipleInstancesPolicy> 
  <DisallowStartIfOnBatteries>true</DisallowStartIfOnBatteries> 
  <StopIfGoingOnBatteries>true</StopIfGoingOnBatteries> 
  <AllowHardTerminate>true</AllowHardTerminate> 
  <StartWhenAvailable>false</StartWhenAvailable> 
  <RunOnlyIfNetworkAvailable>false</RunOnlyIfNetworkAvailable> 
- <IdleSettings>
  <StopOnIdleEnd>true</StopOnIdleEnd> 
  <RestartOnIdle>false</RestartOnIdle> 
  </IdleSettings>
  <AllowStartOnDemand>true</AllowStartOnDemand> 
  <Enabled>true</Enabled> 
  <Hidden>false</Hidden> 
  <RunOnlyIfIdle>false</RunOnlyIfIdle> 
  <WakeToRun>false</WakeToRun> 
  <ExecutionTimeLimit>P3D</ExecutionTimeLimit> 
  <Priority>7</Priority> 
  </Settings>
- <Actions Context="Author">
- <Exec>
  <Command>calc.exe</Command> 
  </Exec>
  </Actions>
  </Task> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T19:28:36.803

我不知道有任何这样的选择。不幸的是，该`schtasks`命令并未涵盖 Task Scheduler 2.0 提供的所有功能。您可以使用 VBScript 使用[Task Scheduler Scripting Objects](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383607%28v=vs.85%29.aspx)来完成此操作，但是，我认为（ab）使用 Task Scheduler 来完成一些可以通过启动快捷方式更容易实现的事情，用户的[Run](http://msdn.microsoft.com/en-us/library/aa376977%28v=vs.85%29.aspx)键中的注册表项，或登录脚本。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-19T10:56:29.620

这行得通。

```
SchTasks /Create /SC DAILY /TN “abcMyTask” /TR “C:RunMe.bat” /ST 09:00 /IT /S /U testuser /P password@123 
```

创建一个新用户（这里我是`testuser`从本地 Windows 系统创建的）。在您的本地机器上它不起作用。尝试使用用户名`testuser`和密码从另一个 Windows 系统运行命令。它远程创建计划任务。

# git - Git将修补程序分支合并到功能分支，然后删除修补程序分支？

> ID：15248003
> 
> 赞同：3
> 
> 时间：2013-03-06T12:59:11.367
> 
> 标签：git, version-control, merge, branch

我对 Git 很陌生，但它提供的轻量级分支/合并给我留下了深刻的印象。

我的存储库中有三个分支：

```
master
1.1.0
1.0.x 
```

我已经在`1.0.x`分支中进行了快速修复，但我想知道是否应该立即将这些更改合并回`1.1.0`? 还是建议等到`1.1.0`分支准备好作为次要版本发布后再合并修补程序？

而且，在这张图片中：

![git-scm 分支](../Images/fdfe9a5b1e4381341175dc44bad70990.png)

我在假装`iss53 = 1.0.x`这个`master = 1.1.0`例子。一旦我的`1.0.x`修补程序分支中的更改被合并回`1.1.0`功能分支，我可以继续在该`1.0.x`分支上工作吗？

如果我在分支上工作时提交更改`1.0.x`，在上述合并之后，它会从假设的`C7`提交中创建一个新的水平链接（以视觉方式描绘它），有一个父级`C5`，还是有两个父级，`C5`并且`C6`？

git-book 的这一部分（[Git - Basic Branching and Merging](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)）也提到了在分支完成后删除它，但不幸的是它们*没有显示图表之后的样子。*当然，提交仍然存在 - 标签是否简单地删除了？（`iss53`在上面的例子中。）一旦该分支被删除，如果你发现问题 53 没有完全修复，*你可以继续工作*，`C5`创建另一个`iss53`分支，还是你必须给它一个不同的名字，比如`iss53_2`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:19:30.420

只要您确定更改是好的并且需要进入该分支，我就会合并它。无需手动操作，更早合并更有可能成功:)

如果您删除分支，树将保持完全相同，只有分支的标签消失。如果您的提交不再可以从任何标签访问，那么它们最终可能会被垃圾收集删除，但它会保留它们几周，而这里的情况并非如此，因为您的所有提交仍然可以在某个分支中访问。

您可以轻松地再次创建分支，只需执行“git checkout -b iss53 xxxxxx”，其中 xxxxx 是您要基于它的提交的提交十六进制代码。git reflog 有助于找到您需要的提交，因为它显示了所有最近的历史记录。

# c# - 修改方法以接受不同数量和类型的参数

> ID：15248006
> 
> 赞同：0
> 
> 时间：2013-03-06T12:59:18.430
> 
> 标签：c#, .net

我正在与其他一些大学合作开展这个项目。它建立在基础之上`Windows MDI forms`，并且由于客户的特定需求，我们有一个自定义方法来加载表单。

一开始，该方法只需要两个参数：

```
protected void LoadForm<T>(ToolStripButton formButton, string buttonText) where T : Base Form 
```

因为即使那是继承的代码，我们也继承了一些不需要传递任何参数的表单，所以我们有这个方法：

```
protected void LoadForm<T>()
{
    LoadForm<T>(null, null);
} 
```

然后我的大学需要传递另一个参数：`long? EntityId`为了不破坏现有代码，他将上述方法更改为：

```
protected void LoadForm<T>(long? loadEntityId = null) where T : BaseForm
{
    LoadForm<T>(null, null, loadEntityId);
} 
```

具有业务逻辑的实际方法变为：

```
protected void LoadForm<T>(ToolStripButton formButton, string buttonText, long? loadEntityId = null) where T : BaseForm 
```

现在我需要自己传递第四个参数，并且不破坏先前代码的问题是实际的。我以为我的逻辑是正确的，但似乎我没有。我需要传递一个布尔参数`bool IsClosingForm`，所以我用这样的业务逻辑制作了这个方法：

```
protected void LoadForm<T>(ToolStripButton formButton, string buttonText, long? loadEntityId = null, bool IsClosingForm= true) where T : BaseForm 
```

并添加新方法来处理需要传递 bool 参数的情况：

```
protected void LoadForm<T>(bool IsClosingForm= true) where T : BaseForm
{
    LoadForm<T>(null, null, null, IsClosingForm);
} 
```

并且还修改了我的colleges方法来调用一个四参数的方法：

```
protected void LoadForm<T>(long? EntityId = null) where T : BaseForm
{
    LoadForm<T>(null, null, EntityId, true);
} 
```

但它不是那样工作的，我得到的错误是：

> `protected void LoadForm<T>(long? EntityId = null)`and`protected void LoadForm<T>(bool IsClosingForm= true)`方法之间的调用不明确

很明显，我没有得到这里的逻辑，所以我有两个问题 - 如何修改代码以使其工作，如果可能的话，我希望有人指出导致我错误的原因，以便我可以得到这背后的逻辑。首先，这似乎很容易，但现在我想我错过了一些我不应该不理解的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:12:58.477

这是模棱两可的电话：

```
LoadForm<T>() 
```

该调用可以解释为以下两种方法之一：

*   `LoadForm<T>(long? EntityId = null)`
*   或作为`LoadForm<T>(bool IsClosingForm= true)`

由于您已为参数指定了默认值，因此当未提供参数时，编译器无法区分这两个重载。

也许您可以删除默认值并创建另一个不需要任何参数的重载。当不带参数调用 LoadForm 时，将使用这个新的重载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:10:28.197

您是否有可能传入 0 或 1 in 并且它对于它是 a`bool`或`long?`可能`long`在方法调用中将其强制转换为 a 以确保注册为`long`而不是 `bool`。

# sass - Grunt - DSS 插件

> ID：15248008
> 
> 赞同：0
> 
> 时间：2013-03-06T12:59:24.173
> 
> 标签：sass, gruntjs, dss, kss

我试图让这个 Grunt 插件工作：

[https://npmjs.org/package/dss](https://npmjs.org/package/dss)

具有讽刺意味的是，这个文档插件似乎缺少适当的文档。有人可以通过给我一个对他们有用的例子来帮助我。让我搞砸的主要是“your_target”属性。不知道应该去那里。

假设我在根目录的以下路径中有一个 SASS 文件：

**萨斯/main.scss**

默认情况下我的输出是什么？它会输出到哪里？还有它输出的格式是什么？

```
grunt.initConfig({
    DSS: {
        options: {
        // Task-specific options go here.
        },
        your_target: {
        // Target-specific file lists and/or options go here.
        },
    },
}) 
```

“ **your_target** ”属性是我的 sass 文件的路径还是我试图创建的文档文件的路径？会这样定义吗？

```
...
your_target: {
    // Target-specific file lists and/or options go here.
    sass: "sass/main.scss"
},
... 
```

我不知道属性名称应该是什么。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:42:30.363

```
dss: {
    docs: {
       options: {
       },
       files: {
           'api/': 'css/**/*.{css,scss,sass,less,styl}'
       }
    }
} 
```

# .htaccess - htaccess 301 将所有带有查询的网站页面重定向到/

> ID：15248012
> 
> 赞同：1
> 
> 时间：2013-03-06T12:59:36.123
> 
> 标签：.htaccess, mod-rewrite, rewrite, query-string

过去的网站充满了不同基础的页面。重新设计并采用新概念后，该网站仅包含一页。所以我需要将所有旧页面重定向到/。

页面例如：

```
http://domain.com/catalog/index.html?c_id=145 
http://domain.com/catalog/?c_id=116
http://domain.com/news/read.html?id=174
and so on. 
```

在 htaccess 中，我制定了如下几条规则：

```
RewriteRule ^catalog(.*)$ http://domain.com/ [L,R=301] 
```

但是这条规则并没有给出完全控制，结果并不令人满意：

```
http://domain.com/?c_id=145 
```

我怎样才能摆脱这个？我需要将所有此类链接重定向到`http://domain.com`不添加任何内容。我认为 {QUERY_STRING} 可以提供帮助，但我不知道如何正确执行此操作。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:33:05.647

您可以`?`在末尾添加一个以创建一个空白查询字符串：

```
#                       append "?" here ----v
RewriteRule ^catalog(.*)$ http://domain.com/? [L,R=301] 
```

# shell - 是否可以在远程 ssh 命令中使用变量？

> ID：15248021
> 
> 赞同：10
> 
> 时间：2013-03-06T12:59:58.663
> 
> 标签：shell, ssh, variable-assignment, nohup

我想在远程机器上依次执行几个命令，后面的一些命令依赖于前面的命令。在最简单的例子中，我得到了这个：

```
ssh my_server "echo this is my_server; abc=2;"
this is my_server
abc=2: Command not found.
ssh my_server "echo this is my_server; abc=2; echo abc is $abc"
abc: undefined variable 
```

对于一些背景信息，我真正想做的是拼凑一条路径并启动一个 java 应用程序：

```
ssh my_server 'nohup sh -c "( ( echo this is my_server; jabref_exe=`which jabref`; jabref_dir=`dirname $jabref_exe`; java -jar $jabref_dir/../jabref.jar` $1 &/dev/null ) & )"' &
jabref_dir: Undefined variable. 
```

这样，每当 jabref 在服务器上更新为新版本时，我就不必手动更新 jar 文件的路径。jabref 可执行文件不带参数，但使用它启动它`java -jar`，这就是为什么我必须稍微调整路径的原因。

目前我有一个单独的脚本文件中的命令列表并调用

```
ssh my_server 'nohup sh -c "( ( my_script.sh &/dev/null ) & )"' & 
```

这可行，但是由于 ssh 调用已经在一个脚本文件中，因此将所有内容放在一起会很好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T13:46:21.560

在这个例子中

```
ssh my_server "echo this is my_server; abc=2;" 
```

`abc`设置在远程端，所以应该清楚为什么它没有设置在本地机器上。

在下一个示例中，

```
ssh my_server "echo this is my_server; abc=2; echo abc is $abc" 
```

`$abc`您的本地 shell在将参数发送到远程主机之前尝试对其进行扩展。稍作修改将按您的预期工作：

```
ssh my_server 'echo this is my_server; abc=2; echo abc is $abc' 
```

单引号会阻止您的本地 shell 尝试扩展`$abc`，因此文字文本会将其发送到远程主机。

* * *

要最终解决您的真正问题，请尝试以下操作：

```
jabref_dir=$( ssh my_server 'jabref_exe=$(which jabref); jabref_dir=$(dirname $jabref_exe);
               java -jar $jabref_dir/../jabref.jar > /dev/null; echo $jabref_dir' ) 
```

这将在您的远程服务器上将引用的字符串作为命令运行，并仅输出一个字符串：`$jabref_dir`. 该字符串被捕获并存储在本地主机上的变量中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T13:27:47.323

在 chepner 的一些启发下，我现在有了一个可行的解决方案，但仅当从 bash shell 或 bash 脚本调用时。它不适用于 tcsh。

```
ssh my_server "bash -c 'echo this is \$HOSTNAME; abc=2; echo abc is \$abc;'" 
```

基于此，下面的代码是一个在远程服务器上运行 jabref 的本地脚本（尽管默认情况下使用 X 转发和无密码身份验证，用户无法判断它是远程的）：

```
#!/bin/bash
if [ -f "$1" ]
then
    fname_start=$(echo ${1:0:4})
    if [ "$fname_start" = "/tmp" ]
    then
        scp $1 my_server:$1
        ssh my_server "bash -c 'source load_module jdk; source load_module jabref; java_exe=\$(which java); jabref_exe=\$(which jabref); jabref_dir=\$(echo \${jabref_exe%/bin/jabref});eval \$(java -jar \$jabref_dir/jabref.jar $1)'" &
    else
        echo input argument must be a file in /tmp.
else
    echo this function requires 1 argument
fi 
```

这是 1 行脚本 load_module，因为 modulecmd 设置环境变量，如果不使用脚本，我无法弄清楚如何做到这一点。

```
eval `/path/to/modulecmd bash load $1`; 
```

我还查看了 heredocs，灵感来自[How to use SSH to run a shell script on a remote machine?](https://stackoverflow.com/questions/305035/how-to-use-ssh-to-run-shell-script-on-a-remote-machine) 和[http://tldp.org/LDP/abs/html/here-docs.html](http://tldp.org/LDP/abs/html/here-docs.html)。好的部分是它甚至可以从 tcsh 工作。我从命令行得到了这个工作，但不是在脚本中。这可能很容易解决，但我现在有一个解决方案，所以我很高兴:-)

```
ssh my_server 'bash -s' << EOF
echo this is \$HOSTNAME; abc=2; echo abc is \$abc;
EOF 
```

# scala - 我什么时候应该在 Scala 中使用隐式参数创建方法？

> ID：15248022
> 
> 赞同：5
> 
> 时间：2013-03-06T13:00:00.563
> 
> 标签：scala, playframework-2.0, implicit

我在 scala 中使用 play 框架编写了代码，如下所示：

```
object Application extends Controller {
  def hoge = Action( implicit request =>
    val username = MyCookie.getName.get
    Ok("hello " + username)
  }
}

object MyCookie {
  def getName( implicit request: RequestHeader ) = {
    request.cookies.get("name").map(_.value)
  }
} 
```

我从同事那里得到了代码审查。他说由于隐含参数，这段代码不可读。我无法回应他的意见。那么你能告诉我使用隐式参数的最佳方法是什么吗？什么时候应该使用隐式参数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T13:12:29.273

当几乎总是有一种“正确”的做事方式时，您应该使用隐式参数，并且您几乎总是想忽略这些细节；或者当经常*没有*办法做事情时，隐式为那些工作的事情提供了功能。

对于第一种情况的示例，在 中`scala.concurrent.Future`，几乎每个方法都采用隐含的`ExecutionContext`。你几乎从不在乎你`ExecutionContext`的电话是什么；你只是想让它工作。但是当您需要更改执行上下文时，您可以将其作为显式参数提供。

对于第二种情况的示例，请查看`CanBuildFrom`collections 库中的 s。你不能从任何东西中建造任何东西；`Vector[Option[String]]`提供了某些功能，并且缺少隐式，例如，让您将一堆s打包成 a`HashSet[Char]`是保持库强大和灵活但理智的一种主要方式。

你什么都没有做：显然你只是用它来节省在一个地方打字的时间，而牺牲了另一个地方。而且，在这种情况下，这样做会使事情的工作方式变得不那么明显，因为您必须到处寻找才能确定隐式请求实际使用的位置。如果你想节省打字，你最好使用短变量名，但要明确：

```
Action{ req => val name = MyCookie.getName(req).get; Ok("hello "+name) } 
```

# coldfusion - Coldfusion FTP的同步功能

> ID：15248026
> 
> 赞同：1
> 
> 时间：2013-03-06T13:00:13.923
> 
> 标签：coldfusion, cfml

我`cfftp`用来从 ftp 服务器获取图像。由于图像文件可能非常大。所以用户必须等待很长时间。

有没有办法为此 ftp 获取文件操作创建进度条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:47:35.093

如果您使用的是 CF9 或更高版本，则需要利用 cfprogressbar 标签。

[http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec19562-7fdf.html](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec19562-7fdf.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:09:21.860

我不相信有任何内置方式，但您可以模拟某种类型的完成跟踪。

首先运行： http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content= `cfftp action="listdir"` [Tags_f_16.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_f_16.html)

获取文件大小并开始或到数据库或其他变量存储中的表。

然后通过 ajax 脚本或 iframe 让另一个脚本连续运行： `cfdirectory action=list"` 在您的目标文件夹上。

比较您的文件大小，然后您可以以百分比、进度表等形式输出状态。

# javascript - jQuery - 调用一个 javascript 函数

> ID：15248035
> 
> 赞同：2
> 
> 时间：2013-03-06T13:00:47.133
> 
> 标签：javascript, jquery, function, call

```
function initiate()
{

    $("p").text("Hi", Hello());
}

function Hello()
{
    alert("Hello, you have called another function");
} 
```

HTML：

```
<p>This is a paragraph.</p>
<p>This is another paragraph.</p>
<button onclick="initiate()">Click me</button> 
```

现在脚本在单击按钮时调用函数initial()，然后调用另一个函数Hello()，同时将html中的所有段落更改为“Hi”。

我想要的是函数 Initiate() 将使用 jQuery 调用函数 Hello()，并且什么也不做。

（换句话说，我如何简单地使用 jQuery 调用函数？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:01:31.707

您无法将回调函数传递给[text()](http://api.jquery.com/text/)。`hello`更改文本后调用该方法。

**[现场演示](http://jsfiddle.net/hNqYB/)**

改变

```
$("p").text("Hi", Hello()); 
```

到

```
$("p").text("Hi");
Hello(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:04:44.390

如果您只想从 Initiate() 调用 Hello()，您只需按如下方式调用它：

```
function initiate()
{

    Hello();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T13:13:30.343

我会说你真的不需要 jquery，但如果你死心塌地使用它，你应该在这里重新评估你的逻辑。首先给你的按钮一个 id，你不需要它，但无论如何这样做是好的：

```
<button id="btnClickMe">Click Me<button> 
```

然后，用它来触发一个 jquery 事件，从而调用你的函数：

```
$('#btnClickMe').click(function() { //You can either link directly to a func here
alert('Whatever'); //Or you can write the code for your func directly into the handler here
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:07:28.033

> 我想要的是函数 Initiate() 将使用 jQuery 调用函数 Hello()，并且什么也不做。

您不需要使用 jQuery 调用该函数，只需调用它即可。

```
function initiate()
{

    $("p").text("Hi");
    Hello();
} 
```

所采用的函数参数`.text`不是第二个参数，也不是像您尝试做的那样调用该函数。它用于通过从传递的函数返回一个值来单独设置每个段落的文本。由于您希望在每个段落中都使用文本“Hi”，因此您可以使用`$("p").text("Hi")`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T13:10:57.070

这将附加一个在单击按钮时触发的事件处理程序。您将不再需要该`initialize`功能，也不需要在`p`. 我无法辨别您想要什么，但是我认为您可能只想通过简单地单击按钮来调用该函数。

```
$(document).ready(function(){
  $("button").click(function(){
     Hello();
  });
}); 
```

# entity-framework - 使用 EF 6 alpha3 Code First 和迁移创建 __MigrationHistory 表部署到 SQL Azure 时出错

> ID：15248037
> 
> 赞同：3
> 
> 时间：2013-03-06T13:01:01.990
> 
> 标签：entity-framework, azure-sql-database, entity-framework-6

我首先使用 EF 6 alpha 3 代码。当我尝试在运行 Update-Database 命令的 SQL Azure 上创建数据库时，出现以下错误：

此版本的 SQL Server 不支持没有聚集索引的表。请创建聚集索引并重试。

我将错误追踪到 __MigrationHistory 表创建 sql 命令。

```
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](255) NOT NULL,
    [ContextKey] [nvarchar](512) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY NONCLUSTERED ([MigrationId], [ContextKey])
) 
```

任何人都知道如何解决这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T22:17:53.383

这是 Alpha 3 中的一个[错误](http://entityframework.codeplex.com/workitem/936)- 给您带来的不便，我们深表歉意。

有一个非常简单的解决方法：

1) 创建自定义迁移 SQL 生成器：

```
public class AzureSqlGenerator : SqlServerMigrationSqlGenerator
{
    protected override void Generate(CreateTableOperation createTableOperation)
    {
        if ((createTableOperation.PrimaryKey != null)
            && !createTableOperation.PrimaryKey.IsClustered)
        {
            createTableOperation.PrimaryKey.IsClustered = true;
        }

        base.Generate(createTableOperation);
    }
} 
```

2) 在您的迁移配置中注册自定义生成器：

```
internal sealed class Configuration : DbMigrationsConfiguration<MyContext> 
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;

        SetSqlGenerator("System.Data.SqlClient", new AzureSqlGenerator());
    }

    protected override void Seed(MyContext context)
    {
    }
} 
```

# regex - 正则表达式匹配某些特殊字符

> ID：15248040
> 
> 赞同：1
> 
> 时间：2013-03-06T13:01:09.007
> 
> 标签：regex, actionscript-3

我需要做一个包含一些特殊字符的 reg 表达式匹配，比如

**( , ) , \ , / , $ , # , % , @ , ***

我想匹配所有可能的字符，所以我可以用空格删除它们。是否可以通过单个表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:05:36.540

您没有指定语言，这是您在 javascript 中的操作方式

```
var crazyString = "bla/$ bla @ me *";
var sanitized = crazyString.replace(/[()\\\/$#%@*]/g, ' '); 
```

在正则表达式`[]`中是一个字符集。它表示**以下集合中的任何字符**。还有一些特殊字符集，例如`[a-z]`表示从 a 到 z 的任何小写字符。您也可以使用`[3-9]`仅匹配 3 到 9 的数字范围的数字范围进行操作。

请注意，在这两个特殊字符集中，连字符是一个特殊字符，如果您想匹配，假设只有字母和连字符，您可以使用以下`[a-z-]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:06:54.100

替换`[()\\/$#%@*]`为`（空格）`

 ``[()\\/$#%@*]`是您正在寻找的正则表达式。`

# algorithm - 计算最大子段数的算法

> ID：15248044
> 
> 赞同：3
> 
> 时间：2013-03-06T13:01:22.470
> 
> 标签：algorithm

给定一个包含 n 个整数值段的向量，我正在寻找一个 O(n log n) 算法来计算包含大多数其他段的段。事实上，我只对这些段的数量感兴趣。

我尝试了段树和区间树的变体，但没有一个相关的。我遇到的真正问题来自偏序。如果顺序是全部的，那么通过直接计算包含树来解决问题会容易得多。

例子 ：`a = [4;11] b = [2;7] c = [5;8] d = [6;7] e = [3;9] f = [1;10] g = [10;42]`

这里我们有包含 ecb 的 f 和最大的 d。当然，g 要长得多，但不包含任何其他段，所以这不是最大段的问题。

我们可以显示顺序图（不显示传递弧）：

```
f -----> b  ---> d
  \-->e--->c-/
       a-/
g 
```

对我来说主要的问题是我不能排除一段时间处理段，因为在某些时候可能会出现不包含在 f 中的子段并构成最大的段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:34:26.217

我在 O(n log n) 中找到了直接解决方案。

使用字典顺序对段进行排序，首先按 x 坐标的升序，然后按 y 坐标的降序。鉴于此顺序，如果段 (a,b) > (a',b')，我们保证 a > a' 或 a=a' 但 b < b'。无论哪种方式，(a,b) 都不能包含 (a',b')。剩余段的数量是 n 减去该排序数组中段 k 的索引。让我们记下这些段。

在这些段中，我们可以使用相反的顺序（减少 y 然后增加 x），段 k 的索引等于 Sk 中不包含在段 k 中的段的数量。

这里的技巧是直接计算包含的段很难，但是计算左侧（或右侧）的包含段+非包含段很容易。

总结为伪代码：

```
segments as triples (low,high,id)
orderedXY = sort segments first inc. x then dec. y then inc. id
orderedYX = sort segments first dec. y then inc. x then inc. id
return max(n - orderedXY.find(id=k) - orderedYX.find(id=k) - 1, for every id k) 
```

这个算法是 O(n log n) 因为有两种排序。

编辑：要处理重复的段，我们必须对第三个键（段的 id）进行排序。这样排序是稳定的。

编辑'：为了确保每个段只计算一次，我们需要减去 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:17:33.300

O(n log n) 是可能的（我假设开放间隔并且没有端点重叠）

您将所有端点排序到一个排序列表（升序）中，并跟踪哪个区间（比如使用 id）以及某个特定点是区间的哪一端。

现在您维护一个支持以下内容的数据结构：

```
AppendAtEnd(interval_id)
int GetPosition(interval_id)
Value Remove(interval_id)
IncrementValuesLessThanPosition(j) 
```

这是一个结构，它采用键（intervals_ids）并维护它们的有序（按插入时间）列表，并带有一个附加值，最初为 0，我们用它来跟踪子间隔。

它允许您在末尾插入。使用 id 删除（并获取相应的值），获取 id 的位置（如果使用链表实现，则将其视为与头部的距离）并递增列表的特定前缀的所有值。

为了解决我们的问题，我们遍历上面的排序列表，每次看到一个区间的左端点，我们调用 AppendAtEnd。

每次我们看到一个区间的右端点，我们得到它的位置，我们移除它，并增加所有小于该位置的值（基本上所有将这个移除的区间作为子区间的区间）。

使用具有适当修饰信息（如子树总和和节点计数）的平衡树，这是可行的，因此每个操作都是 O(log n)。

# mysql - 使用 JDBC 驱动程序从 Scala 连接 mySQL

> ID：15248053
> 
> 赞同：2
> 
> 时间：2013-03-06T13:01:46.623
> 
> 标签：mysql, scala

我需要从我的 Scala 代码连接到 mySQL 数据库。我有下面的代码来建立连接。我正在导入 java 包以从 scala 连接到数据库，并且我正在使用 Drivermanager 进行连接。我已经在其中编写了一个类和一个方法来进行连接，并且我正在从我的对象中扩展和使用它。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Date;

class DBConnectionClass {
  val user = "root"
  val pass = "admin"
  val url = "jdbc:mysql://172.16.40.5/scalatest"
  def readDataBase() = {
   try {
        Class.forName("com.mysql.jdbc.Driver")
        val connection: Connection = DriverManager.getConnection(url, user, pass);

   } 
   catch {
      case _: Throwable => println("Could not connect to database")
  } 

} 
```

}

在我正在运行的 scala 对象中，

```
 object TestAppMain {
 def main(args: Array[String]){
    val DBconnObject = new DBConnectionClass
    DBconnObject.readDataBase
    println("Check DB Is connected or not")
}
} 
```

但它抛出了一个无法连接到数据库的异常..任何人都可以帮助我......提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:04:49.627

您最好打印堆栈跟踪而不是该消息。后者告诉你出了点问题；前者告诉你为什么。

我只能猜测没有“为什么”，但可能是 JDBC 驱动程序 JAR 不可用，从客户端看不到服务器，MySQL 侦听器不在端口 3306 上侦听，你们之间有防火墙以及不允许您访问的服务器。

您真的要以 root 身份登录吗？这对我来说似乎很危险和误导。

仔细[阅读本教程](http://dev.mysql.com/usingmysql/java/)，您将解决它。

# xslt - XSL：只是没有路径的文件名

> ID：15248057
> 
> 赞同：4
> 
> 时间：2013-03-06T13:01:57.807
> 
> 标签：xslt, substring, concat

我是 XSL 编程的新手，我想这是一个简单的问题：如何在没有路径的情况下获取文件名？目前我的代码看起来像这样，我得到了整个路径： **Result.xml：**

```
<?xml version="1.0" encoding="UTF-8" ?>
<All_Results>
    <Result>
      <id>1</id>
      <workid>144</workid>
      <rank>100000000</rank>
      <title>Test Dokument</title>
      <author_multival>Test</author_multival>
      <author>Test</author>
      <size>34185</size>
      <url>https://test.test.com/docs/globalit/Lists/Documents/Datumtest/Test.docx</url>
      <urlEncoded>https%3A%2F%2Ftest%2Etest%2Ecom%2Fdocs%2Fglobalit%2FLists%2FDocuments%2FDatumtest%2FTest%2Edocx</urlEncoded>
      <description></description>
      <write>5/3/2013</write>
      <sitename>https://test.test.com/docs/globalit/Lists/Documents/Datumtest</sitename>
      <collapsingstatus>0</collapsingstatus>
      <hithighlightedsummary>Noch mehr text Noch mehr text  <ddd /> </hithighlightedsummary>
      <hithighlightedproperties>
        <HHTitle>Test Dokument</HHTitle>
        <HHUrl>https://test.test.com/docs/globalit/Lists/Documents/Datumtest/Test.docx</HHUrl>
      </hithighlightedproperties>
      <contentclass>STS_ListItem_DocumentLibrary</contentclass>
      <isdocument>True</isdocument>
      <picturethumbnailurl></picturethumbnailurl>
      <serverredirectedurl>https://test.test.com/docs/globalit/_layouts/WordViewer.aspx?id=/docs/globalit/Lists/Documents/Datumtest/Test.docx&amp;DefaultItemOpen=1</serveedirectedurl> 
<doclanguage>German</doclanguage>
  <doctitle>Test</doctitle>
  <docauthor>Team</docauthor>
  <revisiondate>5/3/2013</revisiondate>
  <filename>Test.docx</filename>
  <fileextension>DOCX</fileextension>
  <imageurl imageurldescription="Microsoft Word">/_layouts/images/icdocx.png</imageurl>
</Result>
</All_Results> 
```

**结果.xsl**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ddwrt="http://schemas.microsoft.com/WebParts/v2/DataView/runtime" xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="TotalResults" />
  <xsl:template match="NumberOfResults" />

  <xsl:template name="DisplayString">
    <xsl:param name="str" />
    <xsl:if test='string-length($str) &gt; 0'>
      <xsl:value-of select="$str" />
    </xsl:if>
  </xsl:template>

  <xsl:template name="HitHighlighting">
    <xsl:param name="hh" />
    <xsl:apply-templates select="$hh"/>
  </xsl:template>

  <xsl:template name="ResultPreviewToolTip">
    <xsl:param name="contentclass" />
    <xsl:param name="picturethumbnailurl" />
    <xsl:param name="url" />
    <xsl:param name="title" />
    <xsl:param name="hithighlightedsummary" />
    <xsl:param name="description" />
    <xsl:param name="version" />

    <xsl:choose>
      <xsl:when test="$contentclass[. = 'STS_ListItem_PictureLibrary'] and $picturethumbnailurl[. != '']">
        <div>
          <a href="{$url}" title="{$title}">
            <img src="{$picturethumbnailurl}" alt="" />
          </a>
        </div>
      </xsl:when>
      <xsl:when test="contains( $url, 'jpg' ) or contains( $url, 'jpeg' ) or contains( $url, 'gif' ) or contains( $url, 'JPG' ) or contains( $url, 'JPEG' ) or contains( $url, 'GIF' )">
        <div>
          <img src="/_layouts/AssetUploader.aspx?Size=Medium&amp;ImageUrl={$url}" alt="" />
        </div>
      </xsl:when>
      <xsl:otherwise>
        <div>
          <xsl:choose>
            <xsl:when test="$hithighlightedsummary[. != '']">
              <b>Preview:</b>
              <br/>
              <xsl:call-template name="HitHighlighting">
                <xsl:with-param name="hh" select="$hithighlightedsummary" />
              </xsl:call-template>
            </xsl:when>
            <xsl:when test="$description[. != '']">
              <b>Preview:</b>
              <br/>
              <xsl:value-of select="$description"/>
            </xsl:when>
            <xsl:otherwise>
              No preview available
            </xsl:otherwise>
          </xsl:choose>
          <xsl:call-template name="DisplayString">
            <xsl:with-param name="str" select="$version" />
            <xsl:with-param name="text" select="'Version: '" />
            <xsl:with-param name="stringcolor" select="'#808080'" />
          </xsl:call-template>

        </div >
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="Result">
    <xsl:variable name="tdClass">
      <xsl:if test="(position() mod 2 = 0)">
        <xsl:value-of select="'even'" />
      </xsl:if>
      <xsl:if test="(position() mod 2 = 1)">
        <xsl:value-of select="'odd'" />
      </xsl:if>
    </xsl:variable>

    <tr>
      <td class="{$tdClass}">
        <a href="#" class="tooltip">
          <img>
            <xsl:attribute name="src">
              <xsl:value-of select="imageurl"/>
            </xsl:attribute>
          </img>
          <span>
            <xsl:call-template name="ResultPreviewToolTip">
              <xsl:with-param name="contentclass" select="contentclass" />
              <xsl:with-param name="description" select="description" />
              <xsl:with-param name="hithighlightedsummary" select="hithighlightedsummary" />
              <xsl:with-param name="picturethumbnailurl" select="picturethumbnailurl" />
              <xsl:with-param name="title" select="title" />
              <xsl:with-param name="url" select="url" />
              <xsl:with-param name="version" select="version" />
            </xsl:call-template>
          </span>
        </a>
      </td>
      <td>
        <a>
          <xsl:attribute name="href">
            <xsl:value-of select="url" disable-output-escaping="yes" />
          </xsl:attribute>
          <xsl:value-of select="filename"/>
        </a>
      </td>
      <td class="{$tdClass}">
        <a>
          <xsl:attribute name="href">
            <xsl:value-of select="url" disable-output-escaping="yes" />
          </xsl:attribute>
          <xsl:choose>
            <xsl:when test="doctitle != ''">
              <xsl:value-of select="doctitle"/>
            </xsl:when>
            <xsl:otherwise>
              <xsl:value-of select="title"/>
            </xsl:otherwise>
          </xsl:choose>
        </a>
      </td>      
      <td class="{$tdClass}">
        <xsl:choose>
          <xsl:when test="docauthor != ''">
            <xsl:value-of select="docauthor"/>
          </xsl:when>
          <xsl:otherwise>
            <xsl:value-of select="author"/>
          </xsl:otherwise>
        </xsl:choose>
      </td>
      <td class="{$tdClass}">
        <xsl:value-of select="revisiondate" />
      </td>
      <td class="{$tdClass}">
        <xsl:value-of select="doclanguage"/>
      </td>
      <td class="{$tdClass}">
        <a>
          <xsl:attribute name="href">
            <xsl:value-of select="sitename" disable-output-escaping="yes" />
          </xsl:attribute>
          <img src="/_layouts/images/breadcrumbbutton.png" style="border-style: none" />
        </a>
        <xsl:call-template name="ShowVersionHistory" />
      </td>
    </tr>

  </xsl:template>

  <xsl:template name="ShowVersionHistory">

    <!-- First, encode Url -->
    <xsl:variable name="EncodedUrl">
      <xsl:value-of disable-output-escaping="yes" select="ddwrt:UrlEncode(url)" />
    </xsl:variable>    

    <!--  does only work for office docuemnts -->
    <xsl:if test="string-length(serverredirectedurl) &gt; 0">

      <!-- get web url from office web app link -->
      <xsl:variable name="WebUrl">
        <xsl:value-of select="substring-before(serverredirectedurl, '_layouts')"/>
      </xsl:variable>

      <!-- create link -->
      <xsl:variable name="FinalLink">
        <xsl:value-of select="$WebUrl"/>
        <xsl:text>_layouts/Versions.aspx?FileName=</xsl:text>
        <xsl:value-of select="$EncodedUrl"/>
      </xsl:variable>

      <a href="{$FinalLink}" target="_blank" Title="Version History">
        <img src="/_layouts/images/versions.gif" style="border-style: none" />
      </a>
    </xsl:if> 

  </xsl:template>

  <xsl:template match="/">
    <table class="searchresult">
      <tr>
        <th width="18"></th>
        <th>Filename</th>
        <th>Title</th>
        <th>Author</th>
        <th>Revision Date</th>
        <th>Language</th>
        <th>Actions</th>
      </tr>
      <xsl:apply-templates />
    </table>
  </xsl:template>
</xsl:stylesheet> 
```

我只需要像 Test.dotx 或 Test.xlsx 一样获取它。我试过了，`<xsl:value-of select="substring-after-last($url, '/')" disable-output-escaping="yes" />`但出错了。

我能做些什么？我该如何解决我的问题？感谢您的支持。亲切的问候，马蒂亚斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T13:22:18.453

如果你被 XSLT 1.0 卡住了，你可以使用这样的递归模板：

### 样式表

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="text"/>

  <xsl:template name="substring-after-last">
    <xsl:param name="string"/>
    <xsl:param name="char"/>

    <xsl:choose>
      <xsl:when test="contains($string, $char)">
        <xsl:call-template name="substring-after-last">
          <xsl:with-param name="string" select="substring-after($string, $char)"/>
          <xsl:with-param name="char" select="$char"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$string"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="/">
    <xsl:call-template name="substring-after-last">
      <xsl:with-param name="string" select="'/var/log/tomcat'"/>
      <xsl:with-param name="char" select="'/'"/>
    </xsl:call-template>
  </xsl:template>

</xsl:stylesheet> 
```

### 输出

```
tomcat 
```

但是请注意，如果路径中的最后一个字符是 a ，则此模板可能不会执行您想要的操作`/`，因为它总是会返回 last 之后的内容`$char`。换句话说，对于`/var/log/tomcat/`（相对于`/var/log/tomcat`，没有尾部正斜杠），此模板将返回一个空字符串。

要在您自己的代码中使用它，您可以将上面的模板复制粘贴`substring-after-last`到您自己的代码中，而不是：

```
<xsl:attribute name="href">
  <xsl:value-of select="url" disable-output-escaping="yes" />
</xsl:attribute> 
```

你可以使用：

```
<xsl:attribute name="href">
  <xsl:call-template name="substring-after-last">
    <xsl:with-param name="string" select="url"/>
    <xsl:with-param name="char" select="'/'"/>
  </xsl:call-template>
</xsl:attribute> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:34:40.040

**这是一个简单的非递归 XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:variable name="vDoc" select="document('')"/>
 <xsl:variable name="vNodes" select="$vDoc//node()|$vDoc//@*|$vDoc//namespace::*"/>

 <xsl:template match="/*">
   <xsl:variable name="vLength" select="string-length()"/>
   <xsl:variable name="vCur" select="."/>
     <xsl:for-each select="$vNodes[not(position() > $vLength)]">
      <xsl:if test=
       "substring($vCur,$vLength - position()+1,1)='/'
       and not(contains(substring($vCur,$vLength - position()+2), '/'))
       ">
       <xsl:value-of select="substring($vCur,$vLength - position()+2)"/>
      </xsl:if>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>http://abc.com/seg1/seg2/seg3/seg4/seg5/filename.html</t> 
```

**产生了想要的正确结果：**

```
filename.html 
```

# asp.net - radgrid 编辑表单中控件的两种方式绑定，如果数据项是派生类型，则有条件地绑定

> ID：15248062
> 
> 赞同：1
> 
> 时间：2013-03-06T13:02:05.453
> 
> 标签：asp.net, data-binding, radgrid, table-per-type

我在下面遇到了经典的 can't use Bind in C# 问题。我不能使用 eval 因为我需要双向绑定。此文本框位于 rad 网格编辑表单中。

```
 <asp:TextBox ID="tbxTotalDepth" runat="server"
      Text='<%# (((GridEditFormItem)Container).DataItem is MS_Wells) 
      ? Bind("TotalDepth") : "" %>'  MaxLength="200"></asp:TextBox> 
```

同样，我知道我不能使用上述内容，并且知道它是因为 bind 是什么。不过，我必须做点什么。这是我的用例：

我正在使用 Table per Type 结构，并且想要一个网格作为基本类型的主列表。我在基类上工作了 crud，但无法在任何派生字段上进行数据绑定。更具体地说，如果它是 MS_Well 类型，则 bind 可以正常工作，如果它不是那种类型，则网格会崩溃，因为该列不存在。我知道我可以在后端做到这一点，但是一旦我为每个派生类型有 10 - 15 列......那会变得混乱。

我已经想到了几个选项，但不确定最干净的选项，或者如何真正做到这些。1.创建后加载一个新的editformtemplate，基本上为'派生细节'创建一个新的命令列2.编写一个函数，如果它们不是正确的类型，则从初始化中删除所有有问题的控件3.一些其他形式的条件绑定?

查看我的文本框，如果数据项不是 MS-Well，我什至根本不需要它，但可见和启用 = false 不会阻止它尝试绑定。

# java-3d - 使用 Java 3D 显示 3D 医学图像

> ID：15248066
> 
> 赞同：0
> 
> 时间：2013-03-06T13:02:14.577
> 
> 标签：java-3d, dicom

我有医学图像（.dcm 文件）。在 Eclipse 中使用 Java 3D API。我无法编写代码来显示 3D 图像。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:25:58.677

你的问题有很多未知数。首先，如果您有一个 3D 数据集，如 CT 或 MRI，它将由多个 DICOM 文件（系列）组成，而不仅仅是一个（但是有 3D DICOM 对象仅由一个文件组成，如 RTDOSE）。其次，您期待什么样的 3D 可视化？例如，CT 可以显示为一组切片，或三个视图（轴向、冠状和矢状）中的体素化和切片体积，或者它可以被镶嵌以显示 3D 表面，或在体积中进行射线追踪渲染。

为了阅读 Java 中的 DICOM，有许多开放库（例如[http://eviewbox.sourceforge.net/](http://eviewbox.sourceforge.net/)），只需选择您最喜欢的一个即可。

您也可以考虑使用 VTK 的 Java 包装器（[http://www.vtk.org](http://www.vtk.org)），这将允许您读取 DICOM 并可视化数据，但在这种情况下不涉及 Java3D。

# php - 从 PHP 5.2 升级到 PHP 5.3 - 向后不兼容的更改 - 如何轻松检测？

> ID：15248070
> 
> 赞同：4
> 
> 时间：2013-03-06T13:02:20.000
> 
> 标签：php, migration, detect, incompatibility

我希望将大型 PHP 网站从 5.2 升级到 5.3，之后可能会更高。

我正在处理的继承代码库非常大，超过 800,000 行代码，并且大部分都在查看向后不兼容的更改列表（[http://php.net/manual/en/migration53.incompatible.php](http://php.net/manual/en/migration53.incompatible.php)）使用代码的字符串搜索可以轻松搜索这些问题，但其他问题（例如引用和 API 更改）更难搜索。我已经使用代码嗅探器尝试识别代码的损坏区域，但代码嗅探器似乎没有找到所有内容（例如未找到引用和 API 问题）。

本质上，我所追求的是一种轻松识别代码嗅探器可能遗漏的受影响代码的方法，而无需运行所有代码或阅读所有代码。有没有一种工具可以基本上扫描代码并告诉我问题区域并为我节省数周/数月的时间？

有任何想法吗？如果这很重要，我忘了提到我们使用 IIS/Windows。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:55:19.737

通过寻找该页面上提到的特定功能，大多数显式向后不兼容的问题（如您链接的页面上列出的）都相当容易找到。这是一个相对较短的列表，并且更改都相当具体。浏览它们并不难，即使在大型代码库中也是如此，并且列出的大多数更改无论如何都是边缘情况，因此希望您不会对该列表有太多担心。

更大的问题在于[5.3 中已弃用的功能列表](http://www.php.net/manual/en/migration53.deprecated.php)。这包括您在问题中提到的传递引用功能。

仅通过搜索代码很难找到其中一些功能，尤其是对于大型代码库，如果代码已经存在了一段时间，那么您至少会与其中一些功能发生冲突的可能性非常高。

好消息是您可以在 5.3 中安全地运行您的代码，而无需触及已弃用的功能。这些功能已弃用；这意味着它们已被标记为不好，但它们实际上还没有从语言中删除（大多数都在 5.4 中），所以关于这些特性，你的软件仍然可以像以前一样运行，除了它会抛出警告消息。

因此，在代码中查找所有这些内容的最佳方法就是升级到 5.3，运行代码，然后捕获错误日志中出现的所有警告。

显然，您需要运行相当详尽的测试以确保您找到了所有内容，但这并不一定是坏事 - 事实上，坦率地说，如果您正在升级，无论如何都不这样做是愚蠢的这种规模的系统的语言版本。也许您可以借此机会开始编写那些您还没有设法解决的测试脚本。

# android - Android & iPhone 应用程序设计方法

> ID：15248072
> 
> 赞同：3
> 
> 时间：2013-03-06T13:02:28.443
> 
> 标签：android, iphone

在设计移动应用程序时，我通常会发现一些我必须处理的问题，虽然我已经找到了通用的指导方针，但我还没有找到具体的解决方案或方法论。

我的第一个问题是从哪里开始设计。我读过一个好主意是开始为 mdpi 设计，然后扩展到其他分辨率。但是我应该从什么决议开始呢？

在我投递资源的时候，我投递的图片是否也可以使用我投递的mdpi for iPhone app，而xhdpi (mdpi*2.0) 用于retina 版本，或者iPhone 版本应该介于mdpi 和hdpi 之间？

我想到的另一个问题是，如果我从 mdpi 开始设计，有时需要制作仅占用 1px 高度的图片，或者绘制仅占用 1px 高度的框的边框。当我必须交付到 ldpi (1px*0.75) 时会发生什么？在 Retina 版本的资源中拥有仅占用 1px 的东西是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:09:40.067

实际上，我发现使用最高分辨率的纹理开始设计会更好。并首先设计 xhdpi 设备（如三星 Galaxy S3）。并返回到较低分辨率的设备，例如 Galaxy S2 等等....

原因是更倾向于缩小纹理然后拉伸它们以获得更高的分辨率。所有这些都是在您所有设备只有一组纹理并且平台自动执行调整大小的情况下。

# c++ - 抽象类中的静态函数指针

> ID：15248073
> 
> 赞同：0
> 
> 时间：2013-03-06T13:02:37.300
> 
> 标签：c++, abstract-class, function-pointers

我正在实现一个抽象工厂类。在基础（抽象类）中，我定义了以下 typedef：

```
// Logging callback type.
typedef void (*LoggingCallBackFuncP)(const std::string&); 
```

并且有

```
static LoggingCallBackFuncP m_LogCallback; 
```

另外我希望抽象类有以下函数声明：

```
static void SetLog(LoggingCallBackFuncP callback); 
```

此函数将初始化`m_LogCallback` 以这种方式，我希望有机会仅初始化一次日志函数并将其用于所有派生类。这种方法可以吗？我应该何时/如何初始化`m_LogCallback`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:07:58.593

> 这种方法可以吗？

是的。

> 我应该何时/如何初始化 m_LogCallback？

由于`SetLog`是静态的，因此您可以随时调用它，而无需对象实例。

语法是`NameOfAbstractClass::SetLog( my_callback );`

# android - 将 SYSROOT 设置为 NDK

> ID：15248074
> 
> 赞同：1
> 
> 时间：2013-03-06T13:02:42.913
> 
> 标签：android, android-ndk

任何人都可以说如何为windows中的ndk-build手动设置**SYSROOT=$NDK/platforms/android-9/arch-arm**。任何人都可以帮助解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T06:43:24.583

您可以在文件 $NDK/build/core/add-application.mk 中将平台设置为 android-9，只需将 android-5 替换为 android-9

# eclipselink - 使用 JPA 在 Apache Derby 中创建表时出现 SQLSyntaxErrorException

> ID：15248076
> 
> 赞同：2
> 
> 时间：2013-03-06T13:02:43.293
> 
> 标签：eclipselink, derby

我使用 Eclipselink 作为 JPA 提供程序和嵌入式 Apache Derby 数据库。当我运行项目时，我得到如下异常：

> 内部异常：java.sql.SQLSyntaxErrorException：语法错误：在第 1 行第 31 列遇到“NOT”。
> 
> 错误代码：-1
> 
> 调用：创建表项（ID VARCHAR NOT NULL、CODE VARCHAR、EXCLUSIVETAX NUMBER(10,5)、NAME VARCHAR、UNITPRICE NUMBER(10,5)、PRIMARY KEY (ID)）
> 
> 查询：DataModifyQuery(sql="CREATE TABLE ITEM (ID VARCHAR NOT NULL, CODE VARCHAR, EXCLUSIVETAX NUMBER(10,5), NAME VARCHAR, UNITPRICE NUMBER(10,5), PRIMARY KEY (ID))")
> 
> [EL 警告]：2013-03-06 18:04:41.827--ServerSession(1650627452)--异常 [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions .DatabaseException
> 
> 内部异常：java.sql.SQLSyntaxErrorException：语法错误：在第 1 行第 71 列遇到“（”。
> 
> 错误代码：-1
> 
> 调用：CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT NUMBER(19), PRIMARY KEY (SEQ_NAME))
> 
> 查询：DataModifyQuery(sql="CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT NUMBER(19), PRIMARY KEY (SEQ_NAME))")
> 
> [EL 信息]：2013-03-06 18:04:41.856--ServerSession(1650627452)--尝试在事务之外执行读取查询时检测到通信失败。正在尝试重试查询。错误是：异常 [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException

persistence.xml 是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="StockKeeperPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>com.mycompany.entities.stock.Item</class>
    <properties>
      <property name="javax.persistence.jdbc.url" value="jdbc:derby:sampledb;create=true"/>
      <property name="javax.persistence.jdbc.password" value="app"/>
      <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver"/>
      <property name="javax.persistence.jdbc.user" value="app"/>
      <property name="eclipselink.ddl-generation" value="create-tables"/>
    </properties>
  </persistence-unit>
</persistence> 
```

这里有什么问题？是`NOT`不是允许在那个声明中？如果不允许，为什么查询被这样框定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:20:47.423

发生这种情况是因为 Eclipse Link 在不知道数据库的情况下生成查询，因此它们生成了大多数 DBMS 通用的查询。但是 Derby 没有 @Bryan 所说的 NUMBER 数据类型。

为了避免这种情况，我们需要通过在`persistance.xml`.

```
 <property name="eclipselink.target-database" value="Derby"/> 
```

还将平台类名称添加为

```
<property name="eclipselink.platform.class.name" value="org.eclipse.persistence.platform.database.DerbyPlatform"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:42:14.523

Derby 没有 NUMBER 数据类型。以下是 Derby 的数据类型：[http ://db.apache.org/derby/docs/10.9/ref/crefsqlj31068.html#crefsqlj31068](http://db.apache.org/derby/docs/10.9/ref/crefsqlj31068.html#crefsqlj31068)

也许你想要的是 DECIMAL 而不是 NUMBER。

# python - 我可以递归使用“%s”吗？

> ID：15248082
> 
> 赞同：0
> 
> 时间：2013-03-06T13:02:59.347
> 
> 标签：python, python-2.7, replace

我可以`%s`在 Python 2.7 中递归使用吗？我试过了（Python新手警报！）

```
spss.Submit('SAVE OUTFILE = "%s".')%os.path.join(wdir,"PrepareTableScript_%s.sav"%str(ver).zfill(2)) 
```

所以在替换 的字符串中`%s`，还有另一个`%s`. 我得到的错误是：

`TypeError: unsupported operand type(s) for %: 'NoneType' and 'str'`

但局部变量`ver`并`wdir`正确打印出来。我收到这个错误是因为我试图`%s`递归使用还是这个（尝试的）代码有其他问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T13:05:59.160

您在这里没有递归使用*任何东西*，您只是嵌套表达式（这很好）。

您的问题是您将*第一个* `%`接线员留在了`Submit()`通话之外。您不是将其应用于字符串，而是将其应用于此处的返回值，并`Submit()`返回`None`. 将其移到括号内：

```
spss.Submit('SAVE OUTFILE = "%s".' % 
    os.path.join(wdir, "PrepareTableScript_%s.sav" % str(ver).zfill(2))
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T13:06:11.850

你有这个：

```
spss.Submit('SAVE OUTFILE = "%s".') % os.path.join(...) 
```

应该是这样的：

```
spss.Submit('SAVE OUTFILE = "%s".' % os.path.join(...)) 
```

# php - 如何在 joomla 中为某些页面关闭组件块

> ID：15248083
> 
> 赞同：0
> 
> 时间：2013-03-06T13:03:08.640
> 
> 标签：php, joomla, joomla2.5, joomla-extensions

我有一个页面，它只包含模块。所以，我需要为某些页面关闭 joomla 中的组件块。是否有任何设置可以关闭后端组件？

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:58:06.443

不确定“组件块”是什么意思，但如果我理解正确，您需要的是[高级模块管理器](http://extensions.joomla.org/extensions/style-a-design/modules-management/10307)

它是免费的，允许您按所有者、页面、菜单、组件、日期、浏览器和列表继续分配事物......

# jquery - 检查图像映射内的元素位置

> ID：15248088
> 
> 赞同：1
> 
> 时间：2013-03-06T13:03:27.247
> 
> 标签：jquery, html, coordinates, imagemap

有什么简单的方法可以知道一个`DIV`元素是否位于多边形图像映射内？

我需要将可拖动元素放在图像的预定义位置，例如俄罗斯国家，我使用图像地图坐标 poly 来设置放置区域。

请注意，我必须这样做，因为我正在从已用于 Flash 的现有 XML 中提取数据，并且我希望不要改变它已经完成的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:13:32.307

[我想您可以使用 javascript ( http://wikicode.wikidot.com/check-for-polygon-polygon-intersection](http://wikicode.wikidot.com/check-for-polygon-polygon-intersection) )检查多多边形交集。第一个多边形 - 可移动 DIV，第二个 - 将 DIV 放置在地图上（或国家多边形列表）。在您需要放置在地图上的对象的“移动”事件上 - 检查交叉点，如果它是真的 - 做出相应的事情。

# asp.net - 如何在 asp.net 中将 URL 重写为子域而不实际在服务器上创建子域

> ID：15248094
> 
> 赞同：7
> 
> 时间：2013-03-06T13:03:38.017
> 
> 标签：asp.net, c#-4.0, url-rewriting, iis-7.5, subdomain

我希望这不是我第一次在 SO 上问这个问题。

我的网站中有 URL，并且正在使用`query string`值 例如： http: **[//foo.com/xyzPage.aspx?barvalue=yehaa](http://foo.com/xyzPage.aspx?barvalue=yehaa)**

到

**[http://yehaa.foo.com/](http://yehaa.foo.com/)**

请建议如何在***不实际在服务器上创建子域的情况下***完成它..

我在服务器机器上安装了***IIS 7.5并使用******Asp.net 4.0***。

非常感谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T15:47:18.217

**根据我们的评论进行编辑**：

要访问`http://foo.com/xyzPage.aspx?barvalue=yehaa`using `http://yehaa.foo.com/`，您必须使用以下规则：

```
<rules>
    <rule name="Rewrite subdomains">
        <match url="^/?$" />
        <conditions>
            <add input="{HTTP_HOST}" pattern="^(.+)\.foo\.com$" />
        </conditions>
        <action type="Rewrite" url="http://foo.com?barvalue={C:1}" />
    </rule>
</rules> 
```

它匹配每个以 a 结尾或不以 a 结尾的 url`/`并使用之前的`foo.com`内容，然后将其重写为之前输入`http://foo.com?barvalue={C:1}`的`{C:1}`任何值`foo.com`。

如果你想阻止人们直接访问`http://foo.com?barvalue={C:1}`，你可以使用下面的规则。

* * *

您可以通过在文件中添加以下规则来使用[IIS 的重写模块](http://www.iis.net/downloads/microsoft/url-rewrite)`web.config`：

```
<rewrite>
    <rules>
        <rule name="Redirect to Subdomains" stopProcessing="true">
            <match url="^xyzPage.aspx$" />
            <conditions>
                <add input="{QUERY_STRING}" pattern="^barvalue=(.+)$" />
            </conditions>
            <action type="Redirect" url="http://{C:1}.{HTTP_HOST}" appendQueryString="false" />
        </rule>
    </rules>
</rewrite> 
```

它检查 url 是否完全匹配`xyzPage.aspx`（之前或之后都没有）。
它检查查询字符串是否包含`barvalue`参数（并且只有这个参数）以及它的值是否不为空。
如果这两个条件都可以，它会触发`Redirect`to `http://barvalue.original.host`。

您的问题指定`Rewrite`，因此如果这确实是您想要做的，请将操作更改`type="Redirect"`为`type="Rewrite"`。

**重要提示**：您可能需要安装和设置[应用程序请求路由模块](http://www.iis.net/downloads/microsoft/application-request-routing)`Rewrite`，并启用代理模式到不同的域。

# c# - Linq To Xml - 从重复的 XML 创建字典

> ID：15248096
> 
> 赞同：2
> 
> 时间：2013-03-06T13:03:40.437
> 
> 标签：c#, xml, dictionary, linq-to-xml

我有一个这样的 XML 字符串：

```
<root>
  <name>Key</name>
  <value>Value</value>
  <name>Key</name>
  <value>Value</value>
  <name>Key</name>
  <value>Value</value>
</root> 
```

如何生成与此相对应的 C# 字典 - 即为每对名称和值创建一个字典项。（使用 Linq To XML）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:09:55.770

我会尝试这样的事情......

```
XDocument doc = XDocument.parse(... parse you XML here ...);
var nameElements = doc.Descendants("name");
var dictionary = nameElements.ToDictionary(el => el.Value,
                                           el => el.ElementsAfterSelf().First().Value); 
```

这首先找到所有`name`元素，然后将该数组投影到字典中。键选择器使用`el.Value`，这是`name`元素的值。值选择器采用元素的下一个兄弟元素，这将是您的`value`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:09:19.243

您可以使用[ToDictionary()](http://msdn.microsoft.com/en-us/library/bb548657.aspx)：

```
var dict = XElement.Parse(yourMarkup).Elements("name").ToDictionary(
    name => name.Value,
    name => name.ElementsAfterSelf("value").First().Value); 
```

# javascript - 在 Javascript 范围之外调用 ExtJS 函数

> ID：15248101
> 
> 赞同：3
> 
> 时间：2013-03-06T13:03:58.987
> 
> 标签：javascript, extjs

我是 ExtJS 的新手。尝试在应用程序中使用和自定义选项卡功能。

我想用Javascript Scope 的 ExtJs 范围内的**参数调用一个函数。**现在我可以在不传递参数的情况下调用函数而不会出现任何错误。当我通过传递参数（在代码中提到）调用相同的函数时，它给了我以下错误，因为函数没有获取任何值。

```
Uncaught TypeError: Cannot call method 'indexOf' of null 
```

此功能应将新选项卡添加到选项卡面板。

当我通过从 ExtJS 范围传递参数来调用相同的函数时，它会成功添加选项卡。但不是当函数通过传递参数从javascript范围调用时。帮助我理解并解决这个问题。

```
Ext.onReady(function() {
var currentItem;
var tabs = Ext.widget('tabpanel', {
    launch: function() {
      _myAppGlobal = this;
    },
    renderTo: 'tabs',
    resizeTabs: true,
    enableTabScroll: true,
    width: 850,
    defaults: {
        autoScroll: true,
        bodyPadding: 10
    }], 
    plugins: Ext.create('Ext.ux.TabCloseMenu', {
        extraItemsTail: [
            '-',
            {
                text: 'Closable',
                checked: true,
                hideOnClick: true,
                handler: function (item) {
                    currentItem.tab.setClosable(item.checked);
                }
            },
            '-',
            {
                text: 'Enabled',
                checked: true,
                hideOnClick: true,
                handler: function(item) {
                    currentItem.tab.setDisabled(!item.checked);
                }
            }
        ],
        listeners: {
            aftermenu: function () {
                currentItem = null;
            },
            beforemenu: function (menu, item) {
                menu.child('[text="Closable"]').setChecked(item.closable);
                menu.child('[text="Enabled"]').setChecked(!item.tab.isDisabled());

                currentItem = item;
            }
        }
    })
  });

  function addTab_inside(closeable, tabtitle, targetUrl) {
      tabs.add({
          title: tabtitle,
          iconCls: 'tabs',
          autoLoad: {url: targetUrl, callback: this.initSearch, scope: this},
          closable: closeable,
          autoScroll: true,
          nocache: true,
          discardUrl: false
      }).show();
  }
});

function addTab_Outside(){
   addTab_inside(true, 'Test', 'test.php');
} 
```

addTab_Outside 函数基于事件并在 xyz 元素上调用 onClick。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T07:17:53.033

没有 Ext 范围之类的东西。Ext 是一组 JS 对象和函数，不多不少。因此，适用于 JS 的所有内容都适用于 Ext。任何范围界定问题和复杂性都纯粹是 JavaScript 的问题，并且对于 Ext 与任何其他 JS 库或实用程序没有任何不同。

现在，让我们看看你做了什么：

1.  您使用一些参数调用了 Ext.onReady() 函数。
2.  您在全局范围（也称为窗口范围）中定义了一个函数 addTab_Outside()。

就这些。

现在让我们看看 addTab_Outside 函数。在此函数中，您正在调用另一个函数 addTab_inside。但是这个“内部”功能在哪里？JS应该去哪里找这个函数呢？由于您在全局范围内定义了'ouside'函数，那么JS将在同一范围内查找内部函数并且将无法找到它，因为它不是在全局范围内创建的。

那么“内部”函数是在什么范围内创建的呢？好吧，让我们回到您在这里做的第一件事：Ext.onReady() 函数调用。你调用了这个函数，传入了一个参数。该参数是一个匿名函数，具有 2 个局部变量`currentItem`和`tabs`. 您还创建了一个名为“addTab_inside”的本地函数。当我说“本地”时，这意味着变量对于在其范围内创建它们的函数是本地的。在您的情况下，父函数是匿名的，因此不可寻址。当然，该函数中的任何局部变量都可以相互访问，因为它们都在同一范围内。所以只要'tabs'引用'inside'函数或者`currentItem`你就可以了。

您的解决方案将起作用的唯一方法是将外部函数移动到大型匿名函数块中。但我怀疑你不想这样做，因为真的没有理由这样做。

尽管对范围的讨论很重要，但我的直觉是，无论您尝试做什么，都应该采用不同的方法。如果您正在构建一个完整的应用程序，那么我建议您使用 Sencha 指南中概述的应用程序结构，使用控制器和文件夹结构来分隔您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:44:21.753

`addTab_inside(true, 'Test', 'test.php');`将在 Ext.onReady 之前运行。所以，你的功能还不存在。将 addTab_inside 移动到 Ext.onReady 方法的底部。

**更新**

@dbrin 在这里解释了范围界定问题做得很好。如果你真的想让你的方法工作，你需要设置一些“命名空间”，如下所示。

```
//Namespace defined in Global scope
var myApp = {};

Ext.onReady(function(){ 
  //Some stuff... 

  myApp.addTab_inside = function(closeable, tabtitle, targetUrl){
    //do work
  }
});

function addTab_Outside(){
  myApp.addTab_inside(true, 'Test', 'test.php');
} 
```

正如我之前提到的，您仍然需要确保`addTab_inside`在 Ext 准备好之前不打电话。

综上所述，我建议您查看@dbrin 提到的有关[建议的 MVC 架构的教程。](http://www.sencha.com/learn/the-mvc-application-architecture/)

# python - audioop.ratecv 使用什么算法来转换采样率？

> ID：15248103
> 
> 赞同：1
> 
> 时间：2013-03-06T13:04:05.587
> 
> 标签：python, audio

Python 标准库包含[audioop 模块](http://docs.python.org/2/library/audioop.html)，该模块具有“对声音片段的一些有用操作”。这些功能之一是`audioop.ratecv`将音频从一种采样率转换为另一种采样率。

我的问题是：`audioop.ratecv`使用哪种算法从一种采样率转换为另一种？具体来说：当我们下采样时，是否会为输出中的每个样本从原始中的*多个*`ratecv`样本中获取信息？或者它只是做一个快速而肮脏的转换，它只是从原始文件中丢弃一些样本？

 *（最终我想知道是否`ratecv`“高质量”下转换。）

（另一个问题是：我在哪里可以找到源代码`audioop`？在我的 Ubuntu 系统上搜索`audioop`只会显示`/usr/lib/python2.7/lib-dynload/audioop.so`哪些不是源代码。）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:36:34.357

来源可以在[这里](https://github.com/python/cpython/blob/bb3e0c240bc60fe08d332ff5955d54197f79751c/Modules/audioop.c#L1315)找到。*

# javascript - 从具有动态内容的网页上的表格中下载数据

> ID：15248105
> 
> 赞同：0
> 
> 时间：2013-03-06T13:04:10.783
> 
> 标签：javascript, asp.net, firefox, automation, firebug

大家好，我想从 [http://www.bseindia.com/members/DirectoryOtherIntermediaries.aspx?expandable=2](http://www.bseindia.com/members/DirectoryOtherIntermediaries.aspx?expandable=2)下载表格 要导航到下一页，运行 java 脚本：例如：javascript:__doPostBack('ctl00$ContentPlaceHolder1$ grvMember','Page$2') 在我们单击第二页按钮时运行。我想从所有这些页面下载表格。我不知道如何从萤火虫下载它。目前是否有任何其他方法我正在搜索有关萤火虫选项但无法弄清楚的方法。

ps：在网页上选择中间商作为子代理选项，将子代理的名称命名为'a'。然后说提交，生成一个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:00:59.713

对于这样的事情，我在 Firefox 中使用 Scratchpad (Shift+F4)。

```
var page = 1;
setInterval(function(){
    //copy data here
    page ++;
    __doPostBack('ctl00$ContentPlaceHolder1$grvMember','Page$' + page);
}, 2000); 
```

计时器过去在 Scratchpad 中不起作用，但现在可以了，这很棒。如果您想真正花哨，则可以在页面准备好时挂钩。

# ios - 应用程序在 [NSIndexPath setTableViewStyle:] 上崩溃：无法识别的选择器发送到 ipad 中的实例

> ID：15248107
> 
> 赞同：4
> 
> 时间：2013-03-06T13:04:18.710
> 
> 标签：ios, ipad

```
2013-03-06 17:38:14.764 LiveiPad[506:607] -[NSIndexPath setTableViewStyle:]: unrecognized selector sent to instance 0x57ac40
2013-03-06 17:38:14.785 LiveiPad[506:607] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSIndexPath setTableViewStyle:]: unrecognized selector sent to instance 0x57ac40'
*** Call stack at first throw:
(
0   CoreFoundation                      0x3182564f __exceptionPreprocess + 114
1   libobjc.A.dylib                     0x30229c5d objc_exception_throw + 24
2   CoreFoundation                      0x318291bf -[NSObject(NSObject) doesNotRecognizeSelector:] + 102
3   CoreFoundation                      0x31828649 ___forwarding___ + 508
4   CoreFoundation                      0x3179f180 _CF_forwarding_prep_0 + 48
5   UIKit                               0x32a30a11 -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 552
6   UIKit                               0x32a3076b -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:] + 34
7   UIKit                               0x32a290cd -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 936
8   UIKit                               0x32a2827d -[UITableView layoutSubviews] + 140
9   UIKit                               0x329d45fb -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 26
10  CoreFoundation                      0x31792f03 -[NSObject(NSObject) performSelector:withObject:] + 22
11  QuartzCore                          0x361c5bb5 -[CALayer layoutSublayers] + 120
12  QuartzCore                          0x361c596d CALayerLayoutIfNeeded + 184
13  QuartzCore                          0x361cb1c5 _ZN2CA7Context18commit_transactionEPNS_11TransactionE + 212
14  QuartzCore                          0x361cafd7 _ZN2CA11Transaction6commitEv + 190
15  QuartzCore                          0x361c4055 _ZN2CA11Transaction17observer_callbackEP19__CFRunLoopObservermPv + 56
16  CoreFoundation                      0x317fca35 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 16
17  CoreFoundation                      0x317fe465 __CFRunLoopDoObservers + 412
18  CoreFoundation                      0x317ff75b __CFRunLoopRun + 854
19  CoreFoundation                      0x3178fec3 CFRunLoopRunSpecific + 230
20  CoreFoundation                      0x3178fdcb CFRunLoopRunInMode + 58
21  GraphicsServices                    0x365b241f GSEventRunModal + 114
22  GraphicsServices                    0x365b24cb GSEventRun + 62
23  UIKit                               0x329fdd69 -[UIApplication _run] + 404
24  UIKit                               0x329fb807 UIApplicationMain + 670
25  LiveiPad                    0x000024cb main + 158
26  LiveiPad                    0x00002428 start + 40
 )
 terminate called after throwing an instance of 'NSException' 
```

有谁知道为什么会崩溃？这是我在页面控件选择上使用的一些代码

```
 CGFloat pageWidth = self.svMinistatementTable.frame.size.width;
        int page = floor((self.svMinistatementTable.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
        self.pcMinistatementDetail.currentPage = page;

        CGRect Viewframe = CGRectMake((896*self.pcMinistatementDetail.currentPage), 0, 896, 235 );
        UIView *subview = [[UIView alloc] initWithFrame:Viewframe];
        subview.tag=self.pcMinistatementDetail.currentPage;
        CGRect frameTable= CGRectMake( 0, 0, 896, 235 );
        UITableView *tableView= [[UITableView alloc]initWithFrame: frameTable];
        tableView.tag=self.pcMinistatementDetail.currentPage;
        tableView.dataSource=self;
        tableView.delegate=self;

        if([strCallingView isEqualToString:@"Account"])
        {
            tableviewMiniStatement=tableView;

        }
        else if([strCallingView isEqualToString:@"CreditCard"])
        {
            tableviewCCUnbilledTransaction=tableView;

        }
        [subview addSubview: tableView];
        [self.svMinistatementTable addSubview:subview];
        [tableView reloadData];code here 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:17:02.737

UITableView 类中没有这样的方法调用

```
- (id)initWithFrame:(CGRect)frame 
```

您还需要指定样式，无论是普通的还是分组的，

正确的方法是`- (id)initWithFrame:(CGRect)frame style:(UITableViewStyle)style;`

`UITableView *tableView= [[UITableView alloc]initWithFrame:frameTable style:UITableViewStylePlain];`或分组

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T13:15:32.517

正如很多人所说，问题出在：

```
2013-03-06 17:38:14.764 LiveiPad[506:607] -[NSIndexPath setTableViewStyle:]: unrecognized selector sent to instance 0x57ac40 
```

你应该调用`setTableViewStyle:`一个`UITableView`对象，而不是一个对象`NSIndexPath`。

来自开发文档：

> 表格视图可以有两种样式之一，UITableViewStylePlain 和 UITableViewStyleGrouped。创建 UITableView 实例时，必须指定表格样式，并且该样式不能更改。

因此，问题很可能出在您创建`UITableView`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-28T10:22:18.577

我在使用表格视图制作自定义单元格时遇到了同样的错误

错误是我没有返回 CellForRowAtIndexPath 中的单元格：

尝试返回它，您的错误将得到解决。

# cloud-foundry - Cloudfoundry 集成本地应用程序

> ID：15248108
> 
> 赞同：0
> 
> 时间：2013-03-06T13:04:21.673
> 
> 标签：cloud-foundry

我目前正在撰写关于 PAAS 平台与本地应用程序集成的论文。谷歌应用引擎有他的安全数据连接器，Windows 有服务总线中继。

现在我正在 Cloud Foundry 中寻找相同的中间件。有谁知道 Cloud Foundry 是否有某种中间件来与本地应用程序通信？

谢谢托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:15:47.197

您是否正在寻找能够提供从 CF 到公司数据中心的安全连接以访问那里的资源的东西？

您可能在防火墙后面有一个数据库 - CF 应用程序如何访问它？好吧，它不能。

我还建议您在此处跟进对话：

[https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev](https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev)

# matlab - 如何在matlab中做（m，n，k）*（n，k）=（m，k）？

> ID：15248109
> 
> 赞同：0
> 
> 时间：2013-03-06T13:04:22.827
> 
> 标签：matlab, vectorization, matrix-multiplication

我发现了这个相关的问题： [Multiply columns of a matrix with 2d matrix slices of a 3d matrix in MatLab](https://stackoverflow.com/questions/8698456/multiply-columns-of-a-matrix-with-2d-matrix-slices-of-a-3d-matrix-in-matlab)

我有同样的问题，但在我的情况下`m`，每个切片可能会有所不同。有没有办法用[mtimesx](http://www.mathworks.com/matlabcentral/fileexchange/25977-mtimesx-fast-matrix-multiply-with-multi-dimensional-support)做到这一点？因为`m`变化，我的 3d 张量存储为一个单元格列表，每个单元格都包含一个矩阵。我的二维矩阵也是一个包含一个向量的单元格列表。

有没有一种方法可以在没有 for 循环的情况下进行这种乘法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:37:58.317

由于您的数据已经存储在单元阵列中，您可以使用[`cellfun`](http://www.mathworks.com/help/matlab/ref/cellfun.html)

```
res = cellfun( @(x,y) x*y, mnkCell, nkCell, 'UniformOutput', false ); 
```

# maven - 增强maven编译任务

> ID：15248112
> 
> 赞同：0
> 
> 时间：2013-03-06T13:04:31.800
> 
> 标签：maven, ant, javac

在 Maven 中，使用编译器插件，我们可以做到

```
mvn compile 
```

并编译项目。我需要的是编译项目并做一些其他的事情。

例如，在 ANT 中，我可以这样做：

```
public class Main extends Javac13 {
    @Override
    public boolean execute() throws BuildException {
        System.out.println("Main::execute");
        attributes.log("Using modern compiler", Project.MSG_VERBOSE);
        Commandline cmd = setupModernJavacCommand();

        try {
            int result = com.sun.tools.javac.Main.compile(cmd.getArguments());
            return result == 0;
        } catch (Exception ex) {
            if (ex instanceof BuildException) {
                throw (BuildException) ex;
            } else {
                throw new BuildException("Error starting modern compiler", ex, location);
            }
        }
    }

    @Override
    public void setJavac(Javac javac) {
        System.out.println("Main::setJavac " + javac);
        super.setJavac(javac);
    }
} 
```

以这种方式启动它：

```
 ant -Dbuild.compiler=com.moc.Main ... 
```

上面的类变成了编译器，我可以用 ANT 给我的命令行做任何我想做的事情。另外，最棒的是我不需要接触 build.xml 文件。我只需要设置一个系统属性。

Maven中有这样的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:16:24.633

你可以看看我前一阵子敲的[system-properties-maven-plugin 。](https://github.com/carlspring/system-properties-maven-plugin)它允许您在 pom.xml 中定义系统属性。查看[USAGE](https://github.com/carlspring/system-properties-maven-plugin/blob/master/USAGE)文件。

该插件有两个目标——一个用于设置属性（`set`），另一个用于将它们恢复到原来的状态（`reset`）。

# emacs - 如何使 slime-edit-definition 与非编译函数一起工作？

> ID：15248115
> 
> 赞同：1
> 
> 时间：2013-03-06T13:04:39.707
> 
> 标签：emacs, lisp, slime, clisp

我正在使用带有 clisp 的粘液。`M-.`如果我在文件从未被编译但仅被评估（通过 `slime-eval-last-expression' aka 的意思）时尝试在函数调用上使用，`C-x C-e`那么我会收到该错误消息作为回报：

> cond：没有已知的定义：myfoo（在 COMMON-LISP-USER 中）

虽然在编译函数后它似乎工作。在有可能浏览它之前编译文件/函数是否是一个先决条件？如果没有，如何使它工作？

# git - 将公共 master 上的 git 提交移动到现有分支

> ID：15248118
> 
> 赞同：1
> 
> 时间：2013-03-06T13:04:43.397
> 
> 标签：git, branching-and-merging, rebase

`master`我有一个带有公共和`develop`分支机构的 git 存储库。`master`当我应该承诺的时候，我承诺了`develop`。我知道我可以使用以下命令将提交`master`移至`develop`

```
git checkout develop
git cherry-pick 0123455678 # whatever the hash is I want to move
git checkout master
git rebase -i HEAD~2
git push -f 
```

但这与我对变基的理解相冲突，特别是

> 不要对已推送到公共存储库的提交进行变基。

[http://git-scm.com/book/en/Git-Branching-Rebasing#The-Perils-of-Rebasing](http://git-scm.com/book/en/Git-Branching-Rebasing#The-Perils-of-Rebasing)

其他开发人员会拉出这两个分支，那么我如何确保他们与重写的历史保持同步呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:13:55.967

您可能应该将提交添加到正确的分支，然后在 master 中[恢复它们。](https://www.kernel.org/pub/software/scm/git/docs/git-revert.html)Revert 只是向 master 添加了一个新的提交，它撤消了以前的错误更改。它在历史上可能看起来有点混乱，但对于已经拉取这些更新的任何人来说，它不会破坏任何东西。

# javascript - 替换函数内的空格单/双引号

> ID：15248125
> 
> 赞同：0
> 
> 时间：2013-03-06T13:04:58.483
> 
> 标签：javascript

我正在尝试从一串转义字符中删除单引号和双引号。它不适用于单引号`'`或双自动`"`。

请问有人可以帮忙吗？

```
var mysting = escapedStr.replace(/^%22/g, ' '); //doesnt remove the double quotes

var mysting = escapedStr.replace(/^%27/g, ' '); //doesnt remove the single quotes

var mysting = escapedStr.replace(/^%3A/g, ' '); //does remove the SEMI COLON %3A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:07:16.123

试试这个链式代码的片段：

```
escape(
 unescape( mysting ).replace( /['"]/g, "" )
) 
```

它很小，但应该做你需要它做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:07:29.483

这`^`是一个锚点，指示字符串的开始。也就是说，它只会在字符串以等*开头时*`%22`进行替换。从逻辑上讲，它只能以一件事开头（显然是分号）。我想你只是想删除`^`.

# php - 从凌乱的字符串中解析属性

> ID：15248126
> 
> 赞同：0
> 
> 时间：2013-03-06T13:05:01.127
> 
> 标签：php, parsing

我的问题很简单，我有一个像下面这样非常不规则的字符串：

> 包：name='com.adobe.reader' versionCode='77969' versionName='10.6.1' application-label:'Adobe Reader' application-label-da:'Adobe Reader' application-label-ja:'Adobe Reader 'application-label-de:'Adobe Reader' application-label-nl:'Adobe Reader' application-label-pl:'Adobe Reader' application-label-en:'Adobe Reader' application-label-ko:'Adobe Reader ' application-label-fr:'Adobe Reader' application-label-tr:'Adobe Reader' application-label-cs:'Adobe Reader' application-label-es:'Adobe Reader' application-label-it:'Adobe Reader 'application-label-pt:'Adobe Reader' application-label-ru:'Adobe Reader' application-label-sv:'Adobe Reader' application-label-zh_CN:'Adobe Reader' application-label-zh_TW:'Adobe Reader' application-icon-160:'res/drawable-mdpi/reader_app_android.png' application-icon-240:'res/drawable-hdpi/reader_app_android.png' application-icon -320：'res/drawable-xhdpi/reader_app_android.png' 应用程序：标签='Adobe Reader' 图标='res/drawable-mdpi/reader_app_android.png' 启动活动：名称='com.adobe.reader.AdobeReader' label='' icon='' sdkVersion:'8' uses-permission:'com.adobe.reader.provider.permission.READ' uses-permission:'android.permission.INTERNET' uses-permission:'android.permission. WRITE_EXTERNAL_STORAGE' 使用权限：'android.permission.ACCESS_NETWORK_STATE' 使用权限：'android.permission.READ_EXTERNAL_STORAGE'uses-implied-permission:'android.permission.READ_EXTERNAL_STORAGE','requested WRITE_EXTERNAL_STORAGE' uses-feature:'android.hardware.touchscreen' uses-implied-feature:'android.hardware.touchscreen','假设你需要一个触摸屏除非明确设为可选'主要其他活动其他服务支持屏幕：'小''正常''大''xlarge'支持-任何密度：'true'语言环境：'--_--''da'' ja''de''nl''pl''en''ko''fr''tr''cs''es''it''pt''ru''sv''zh_CN''zh_TW' 密度：' 160''240''320'本机代码：'armeabi''armeabi-v7a'android.permission.READ_EXTERNAL_STORAGE','requested WRITE_EXTERNAL_STORAGE' uses-feature:'android.hardware.touchscreen' uses-implied-feature:'android.hardware.touchscreen','假设您需要触摸屏，除非明确设为可选'主要其他-activities 其他服务支持-屏幕：'small' 'normal' 'large' 'xlarge' 支持-任何密度：'true' 区域设置：'--_--' 'da' 'ja' 'de' 'nl ''pl''en''ko''fr''tr''cs''es''it''pt''ru''sv''zh_CN''zh_TW' 密度：'160''240''320 ' 本机代码：'armeabi' 'armeabi-v7a'android.permission.READ_EXTERNAL_STORAGE','requested WRITE_EXTERNAL_STORAGE' uses-feature:'android.hardware.touchscreen' uses-implied-feature:'android.hardware.touchscreen','假设您需要触摸屏，除非明确设为可选'主要其他-activities 其他服务支持-屏幕：'small' 'normal' 'large' 'xlarge' 支持-任何密度：'true' 区域设置：'--_--' 'da' 'ja' 'de' 'nl ''pl''en''ko''fr''tr''cs''es''it''pt''ru''sv''zh_CN''zh_TW' 密度：'160''240''320 ' 本机代码：'armeabi' 'armeabi-v7a'请求的 WRITE_EXTERNAL_STORAGE' uses-feature:'android.hardware.touchscreen' uses-implied-feature:'android.hardware.touchscreen','假设您需要触摸屏，除非明确设为可选'主要其他活动其他服务支持屏幕: 'small' 'normal' 'large' 'xlarge' 支持任何密度：'true' 语言环境：'--_--' 'da' 'ja' 'de' 'nl' 'pl' 'en' ' ko' 'fr' 'tr' 'cs' 'es' 'it' 'pt' 'ru' 'sv' 'zh_CN' 'zh_TW' 密度：'160' '240' '320' 本机代码：'armeabi' 'armeabi-v7a'请求的 WRITE_EXTERNAL_STORAGE' uses-feature:'android.hardware.touchscreen' uses-implied-feature:'android.hardware.touchscreen','假设您需要触摸屏，除非明确设为可选'主要其他活动其他服务支持屏幕: 'small' 'normal' 'large' 'xlarge' 支持任何密度：'true' 语言环境：'--_--' 'da' 'ja' 'de' 'nl' 'pl' 'en' ' ko' 'fr' 'tr' 'cs' 'es' 'it' 'pt' 'ru' 'sv' 'zh_CN' 'zh_TW' 密度：'160' '240' '320' 本机代码：'armeabi' 'armeabi-v7a'uses-implied-feature:'android.hardware.touchscreen','假设你需要一个触摸屏，除非明确设为可选'主要其他活动其他服务支持-屏幕：'小''正常''大''xlarge'支持-任何密度：'true'语言环境：'--_--''da''ja''de''nl''pl''en''ko''fr''tr''cs''es' 'it' 'pt' 'ru' 'sv' 'zh_CN' 'zh_TW' 密度：'160' '240' '320' 本机代码：'armeabi' 'armeabi-v7a'uses-implied-feature:'android.hardware.touchscreen','假设你需要一个触摸屏，除非明确设为可选'主要其他活动其他服务支持-屏幕：'小''正常''大''xlarge'支持-任何密度：'true'语言环境：'--_--''da''ja''de''nl''pl''en''ko''fr''tr''cs''es' 'it' 'pt' 'ru' 'sv' 'zh_CN' 'zh_TW' 密度：'160' '240' '320' 本机代码：'armeabi' 'armeabi-v7a'small' 'normal' 'large' 'xlarge' 支持任何密度：'true' 语言环境：'--_--' 'da' 'ja' 'de' 'nl' 'pl' 'en' 'ko' 'fr' 'tr' 'cs' 'es' 'it' 'pt' 'ru' 'sv' 'zh_CN' 'zh_TW' 密度：'160' '240' '320' 本机代码：'armeabi' 'armeabi -v7a'small' 'normal' 'large' 'xlarge' 支持任何密度：'true' 语言环境：'--_--' 'da' 'ja' 'de' 'nl' 'pl' 'en' 'ko' 'fr' 'tr' 'cs' 'es' 'it' 'pt' 'ru' 'sv' 'zh_CN' 'zh_TW' 密度：'160' '240' '320' 本机代码：'armeabi' 'armeabi -v7a''320' 本机代码：'armeabi' 'armeabi-v7a''320' 本机代码：'armeabi' 'armeabi-v7a'

`versionCode`是否可以在 PHP中解析这个字符串中的一些值（例如 的值）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T21:56:12.617

您可以为此使用 preg_match。

**例如：**

```
<?php
$str = '...';

function parseStr($key, $str)
{
    $regex = '/(?:'.$key.'[=:]{1})\s?\'?([^\'\s]+)\'?\s/si';
    $str   = rtrim($str).' ';

    return preg_match($regex, $str, $matches) ? $matches[1] : false;
}

var_dump(parseStr('versionCode', $str)); // Use var_dump for debugging/testing, 
                                         // put the output in a var otherwise. 
```

这是它的作用：

```
Regex '/(?:'.$key.'\=)\'?([^\'\s]+)\'?\s/si':

  (?:               =>  excludes the key from the match
  '.$key.'[=:]{1})  =>  finds the key in the string
          [=:]{1}   =>  either = or : comes after the key
  \s?\'?            =>  a space or ' is optional at this point
  ([^\'\s]+)        =>  matches the desired value
  \'?\s             =>  again, ' is optional but a space is required
  /si               =>  s = single-line mode  and  i = case insensitive

rtrim($str) strips the last space (if any) of the string and .' ' adds it again.
This is done, because of the regex "\'?\s" part.

return $pr ? $match[1] : false; means, return the value or false if no match. 
```

试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T22:20:46.917

如果您想在 PHP 中执行此操作，您可以执行以下操作：

```
function find_var($key, $str) {
    $temp = substr($str, (strpos($str, $key)+(strlen($key)+1)));
    return substr($temp, 0, strpos($temp, "'"));
}

$val = "package: name='com.adobe.reader' versionCode='77969' versionName='10.6.1' application-label:'Adobe Reader' application-label-da:'Adobe Reader' application-label-ja:'Adobe Reader' application-label-de:'Adobe Reader' application-label-nl:'Adobe Reader' application-label-pl:'Adobe Reader' application-label-en:'Adobe Reader' application-label-ko:'Adobe Reader' application-label-fr:'Adobe Reader' application-label-tr:'Adobe Reader' application-label-cs:'Adobe Reader' application-label-es:'Adobe Reader' application-label-it:'Adobe Reader' application-label-pt:'Adobe Reader' application-label-ru:'Adobe Reader' application-label-sv:'Adobe Reader' application-label-zh_CN:'Adobe Reader' application-label-zh_TW:'Adobe Reader' application-icon-160:'res/drawable-mdpi/reader_app_android.png' application-icon-240:'res/drawable-hdpi/reader_app_android.png' application-icon-320:'res/drawable-xhdpi/reader_app_android.png' application: label='Adobe Reader' icon='res/drawable-mdpi/reader_app_android.png' launchable-activity: name='com.adobe.reader.AdobeReader' label='' icon='' sdkVersion:'8' uses-permission:'com.adobe.reader.provider.permission.READ' uses-permission:'android.permission.INTERNET' uses-permission:'android.permission.WRITE_EXTERNAL_STORAGE' uses-permission:'android.permission.ACCESS_NETWORK_STATE' uses-permission:'android.permission.READ_EXTERNAL_STORAGE' uses-implied-permission:'android.permission.READ_EXTERNAL_STORAGE','requested WRITE_EXTERNAL_STORAGE' uses-feature:'android.hardware.touchscreen' uses-implied-feature:'android.hardware.touchscreen','assumed you require a touch screen unless explicitly made optional' main other-activities other-services supports-screens: 'small' 'normal' 'large' 'xlarge' supports-any-density: 'true' locales: '--_--' 'da' 'ja' 'de' 'nl' 'pl' 'en' 'ko' 'fr' 'tr' 'cs' 'es' 'it' 'pt' 'ru' 'sv' 'zh_CN' 'zh_TW' densities: '160' '240' '320' native-code: 'armeabi' 'armeabi-v7a'";
echo find_var('versionCode=', $val); 
```

以上输出：**77969**

```
echo find_var('application-label:', $val); 
```

以上输出：**Adobe Reader**

*试一试：[在线运行 PHP](http://writecodeonline.com/php/)*

> 用伪解释函数：
> 
> *   在传递的字符串中找到位置**$key**加上 1 个字符 *（'）后创建一个字符串。*
> *   返回从临时字符串的开头到第一次出现**'的字符串**

# javascript - grunt.task.run() 不工作

> ID：15248128
> 
> 赞同：5
> 
> 时间：2013-03-06T13:05:07.833
> 
> 标签：javascript, node.js, express, gruntjs

我试图在我的快速应用程序中使用 grunt。

我有这样的事情：

```
var grunt = require('grunt');
require(process.cwd() + '/gruntfile.js')(grunt);
grunt.task.run('development'); 
```

但这项任务似乎并不奏效。（没有错误输出到控制台）但是如果我直接在控制台“grunt development”中运行它工作正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-24T20:08:11.487

`grunt.task.run`只需将任务添加到队列中，因此它可以在现有任务中工作，但不能在外部脚本中工作。这是我从`grunt/lib/grunt/cli.js`. 当心——它不是[官方 API](https://github.com/gruntjs/grunt/wiki/grunt)的一部分。[Grunt issue 687](https://github.com/gruntjs/grunt/issues/687)指出此功能需要官方 API。

```
var grunt = require('grunt');
process.chdir(__dirname);
var config = require('./Gruntfile');
config(grunt);
console.log('Minifying...');
grunt.tasks(['cssmin']); 
```

# xcode - 单击 NSTextField 时使 NSComboBox 出现

> ID：15248130
> 
> 赞同：0
> 
> 时间：2013-03-06T13:05:19.533
> 
> 标签：xcode, cocoa, nstextfield, nscombobox

单击 NSTextField 时，如何使 NSComboBox 消失？这是我正在使用的代码：

类组合框：（在界面生成器中用作我的 NSComboBox 的自定义类）comboBox.h：

```
#import <Cocoa/Cocoa.h>
@interface comboBox1 : NSComboBox
-(void)Hide;
@end 
```

组合框.m：

```
#import "comboBox1.h"
@implementation comboBox1
-(void)Hide
{
    [self setHidden:YES];
}
@end 
```

txtField 类：（在界面生成器中用作我的 NSTextField 的自定义类）txtField.h：

```
#import <Cocoa/Cocoa.h>
@interface txtField1 : NSTextField
@end 
```

txtField.m:

```
#import "txtField1.h"
#import "comboBox1.h"
@implementation txtField1
-(void)mouseDown:(NSEvent *)theEvent
{
    comboBox1 *obj = [[comboBox1 alloc] init];
    [obj Hide];
}
@end 
```

但它不起作用：单击 TextField 时没有任何反应。谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:57:23.310

您可以使用委托方法`NSTextfield`

```
 - (void)controlTextDidBeginEditing:(NSNotification *)obj;
 - (void)controlTextDidEndEditing:(NSNotification *)obj;
 - (void)controlTextDidChange:(NSNotification *)obj; 
```

更新

Apple 提供了[NSTrackingAreas 的文档和示例。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSTrackingArea_class/Reference/Reference.html)

```
- (void) viewWillMoveToWindow:(NSWindow *)newWindow {
    // Setup a new tracking area when the view is added to the window.
    NSTrackingArea* trackingArea = [[NSTrackingArea alloc] initWithRect:[textfield frame] options: (NSTrackingMouseEnteredAndExited | NSTrackingActiveAlways) owner:self userInfo:nil];
    [self addTrackingArea:trackingArea];
}

- (void) mouseEntered:(NSEvent*)theEvent {
    // Mouse entered tracking area.
}

- (void) mouseExited:(NSEvent*)theEvent {
    // Mouse exited tracking area.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:11:49.930

你的`mouseDown:`方法是这里的罪魁祸首。您每次都创建一个新的 comboBox1 实例并告诉该新实例“隐藏”，而不是在您的 NIB 中引用 comboBox1。除了在那里泄漏内存之外，您可能不希望每次单击 NSTextField 时都需要一个新的 comboBox1。

而是使用 NSTextField 的委托方法来获得你想要的。

```
- (void)controlTextDidBeginEditing:(NSNotification *)obj;
- (void)controlTextDidEndEditing:(NSNotification *)obj;
- (void)controlTextDidChange:(NSNotification *)obj; 
```

由于您使用的是 IB，我假设您有一个带有 txtField1 和 comboBox1 的 View- 或 WindowController。在您的 ViewController（或 WindowController）中，将 ViewController 设置为 NSTextField 的委托，并告诉 comboBox1 隐藏在委托方法之一中。

一个例子：

在您的 ViewController.h 首先声明两个对象：

```
@property (assign) IBOutlet comboBox1 *comboBox1;
@property (assign) IBOutlet txtField1 *txtField1; 
```

然后在您的实现中：

```
- (void)controlTextDidBeginEditing:(NSNotification *)obj {
    [comboBox1 hide];
} 
```

只是不要忘记将插座连接到 Interface Builder 中的 ViewController。`delegate`还将 txtField1的出口连接到您的 Viewcontroller。

# jsf-2 - h:inputText 与 onchange a4j:jsFunction 当光标仍在文本框中时在表单提交时引发 ajax 错误

> ID：15248136
> 
> 赞同：1
> 
> 时间：2013-03-06T13:05:36.483
> 
> 标签：jsf-2, input, ajax4jsf

我正在尝试使用 h:inputText 的 onchange 属性来调用 ajax 函数（a4j:jsFunction），该函数调用附加到 inputText 的侦听器。我面临的问题是当我在表单中更新 inputText 的值并且光标仍在文本框中时，我单击“确定”提交表单。

当表单提交时，出现 ajax 错误，试图调用我们指定的 ajax 函数。代码如下所示：

```
<form>
    ....
    <h:inputText value="#{somebean}" onchange="changeListener();"/>
    <a4j:jsFunction id="changeListener" name="listener" action="#{action}" limitRender="true" immediate="true" render="#{render}"/>
    ....
 </form> 
```

如果我通过单击选项卡或单击屏幕上其他地方的鼠标离开文本框，它绝对可以正常工作。

请让我知道，如果有办法解决这个问题。提前致谢。

# awk - AWK：如果在文件中找到密钥，则获取密钥的值

> ID：15248138
> 
> 赞同：0
> 
> 时间：2013-03-06T13:05:40.657
> 
> 标签：awk

我有以下文件1

```
30012516|Geralyn|test|1010029|9985|0029|50|00|OneTime|1227065|2013-03-04|||||||Code4
30013017|tamara|test|3440029|1114|029|41|00|OneTime|1239244|2013-03-04|||||||Code3
30015518|daniel|test|3140029L|6440|0029|99|00|OneTime|1239306|2013-03-03|||||||Code2
30050011|first|test|1240030|1745|030|96|00|OneTime|1284010|2013-02-22|||||||Code1
10010905|madhu|com|5230029|614|029|29|10|OneTime|1293016|2013-03-04|||||||Code5 
```

我想在file2下面搜索$18（即code{x}），如果找到匹配则输出file2的对应值

```
Code1=Results of code1
Code3=Results of code3 
Code2=Results of code2
Code5=Results of code5
Code6=Results of code6
Code4=Results of code4
Code7=Results of code7
Code8=Results of code8
Code9=Results of code9
Code10=Results of code10 
```

然后最终输出将是

```
Results of code4
Results of code3
Results of code2
Results of code1
Results of code5 
```

我试过下面的 grep 命令来获取对应键的值

```
"(grep '"$18"=' file2 | cut -d'=' -f2)" | getline result 
```

它工作正常，但对于几个键它没有返回正确的值。有没有其他方法可以获得正确的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:14:19.747

您可以尝试这种 awk 方法：

```
awk -F= 'NR==FNR{A[$1]=$2; next} $NF in A{print A[$NF]}' file2 FS=\| file1 
```

# c# - 控件在 Chrome 中不会变灰，但在 IE 中会变灰

> ID：15248141
> 
> 赞同：1
> 
> 时间：2013-03-06T13:05:49.683
> 
> 标签：c#, javascript, jquery, asp.net, browser

我正在使用这行代码禁用可排序：

```
$(".sorrtlist").sortable('enable'); 
```

在 IE 中它们是灰色的，但在 Chrome 中没有，我该怎么办？

我不能使用 ('disabled', 'disabled'); 因为 sortable 不支持它。

**编辑** 我知道 chrome 不喜欢变灰，并且还查看了您声称是重复的问题，但没有要求变灰的问题`".sortable"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:07:43.830

如果您使用的是 jquery 1.6+，请尝试使用 prop。有关更多信息，请参阅此答案。[attr 不能在 chrome 中工作](https://stackoverflow.com/questions/6048022/jquery-attrdisabled-disabled-not-working-in-chrome)

```
$('.class :input').prop('disabled',true); 
```

如果问题仍然存在。[按照 chrome 中这个禁用问题中](https://stackoverflow.com/questions/8412671/styling-of-disabled-input-elements-discrepancy-between-chrome-and-firefox)的说明设置 CSS

```
 -webkit-text-fill-color: black 
```

# python - 为非技术用户简化脚本的使用

> ID：15248142
> 
> 赞同：0
> 
> 时间：2013-03-06T13:05:50.330
> 
> 标签：python, user-interface

再会，

我有一个脚本，它从网站收集各种信息并在控制台中返回。然后我将信息的各个行复制到几个不同的报告中。这对我来说很好，但是普通用户可能会在打开脚本进行编辑、运行和在 IDLE 控制台中工作时感到困惑。但是，为了保持连续性，我正在寻找一种方法来简化非技术用户对脚本的使用。

一个重要的注意事项是我的技术限制。我工作的系统安装了 Python 2.6.5。该脚本必须从网络驱动器运行并且独立于系统（未安装）。我无法在开发测试平台上安装任何东西。

从理论上讲，我会更喜欢 GUI，因为这是大多数用户所熟悉的，但是，我研究过的流行的需要安装插件，而我不能这样做。

我考虑过将结果输出到文本文件，但我不确定如何自动打开文本文件供用户操作。

我不确定 Python 是否是此解决方案或完整解决方案的最佳解决方案，因此我正在寻找使用标准 Windows 功能且不需要任何类型的安装或管理员权限的想法。

部署系统是 Windows XP 和 Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:11:57.870

您担心用户“打开脚本进行编辑、运行并在 IDLE 控制台中工作”。他们为什么需要这样做？可能**是为了指定**要访问的网站，对吧？修改您的脚本以向用户询问网站，他们将能够运行该脚本：

```
website = raw_input("Please enter the name of a website to scrape ")
scrape_and_save(website) 
```

用户只需双击您的脚本，它就会弹出一个控制台窗口，询问 URL，运行并退出。（要防止控制台关闭，请添加`raw_input("press RETURN to exit ")`到脚本的末尾。）它看起来很难看，但它可以工作。但是，是的，将文本复制出 cmd 窗口并不容易。

**要在编辑器中显示结果，**您可以这样做：

```
import subprocess
subprocess.call(["start", "myoutput.txt"]) 
```

`myoutput.txt`当您双击`.txt`文件（可能是记事本）时，这会要求 Windows 使用它使用的任何编辑器打开。

*附录：*如果您的目标受众知道命令行，您可以将 URL 作为参数传递。像这样调用你的脚本

```
% python myscript.py http://example.com 
```

并且您的脚本可以在数组中找到该网站`sys.argv`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:07:41.223

您可以使用像[Bottle](http://bottlepy.org/docs/dev/)这样的微框架将信息输出到一个简单的网站。

除了单个 bottle.py 文件之外，您不需要任何其他东西来使用它，它适用于 Python 2.6

# label - JAWS 无法读取标题的 aria-label

> ID：15248154
> 
> 赞同：2
> 
> 时间：2013-03-06T13:06:23.883
> 
> 标签：label, wai-aria, screen-readers, heading, jaws-screen-reader

这是场景；我需要屏幕阅读器来读取标题的其他内容，而不是实际显示的内容。

显示“我的标题”，但屏幕阅读器显示“这是我的标题”

```
<div>  
  <div aria-hidden="true">My Heading</div>
  <div aria-label="This is my Heading" role="heading" aria-level="1" tabindex="0"></div>
</div> 
```

上面的代码在 VoiceOver 上实现了所需的行为，但我无法让 JAWS 做同样的事情。任何想法如何使它在 JAWS 中工作？

最终，我将寻找与 VoiceOver 和 JAWS 兼容的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T11:53:26.910

是的——我一直在尝试做类似的事情

```
<div >       
  <div id="entryLabel">This is My Label</div>
  <div tabindex="0" aria-labelledby="entryLabel">This My Value</div>
</div> 
```

如果在 div 元素上使用，Jaws 似乎不会阅读 aria-labelled by！可能是 JAWS - 但浏览器可能没有公开信息？

我注意到使用 aria-label 也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-07T11:47:14.037

我建议使用 aria-labelledby，它适用于大多数屏幕阅读器和浏览器，并且可以替代 aria-label。

示例代码

```
<div>  
  <div aria-hidden="true">My Heading</div>
  <div aria-labelledby="myheading" role="heading" aria-level="1" tabindex="0">
    <span id="myheading" style="visibility:hidden;">This is my Heading</span>
  </div>
</div> 
```

# facebook - 使用 Facebook 详细信息进行备用注册/登录

> ID：15248155
> 
> 赞同：0
> 
> 时间：2013-03-06T13:06:25.887
> 
> 标签：facebook, api, app-secret

我的论坛上的应用程序（备用注册信息）要求

脸书应用程序 ID；- 我有这个

脸书秘密；- 我有这个

Facebook页面网址；- 这是什么？

Facebook 插件默认语言；英语（英国）

站点域；- 这是什么？

当我尝试登录时，我得到 API 错误 191？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:11:56.083

您必须指定您的站点域以允许 Facebook 登录您的站点。您可以通过一个指定的域在您的应用程序中登录 Facebook。

如果您的应用程序 URL 是

> “ [http://www.EXAMPLE.com/myFbApp](http://www.EXAMPLE.com/myFbApp) ”

然后在 facebook 页面 url 中填写这个值，站点域将是

> “EXAMPLE.com”

# ios - 当我用颜色部分填充 TableView 单元格时，单元格中的文本出现问题

> ID：15248160
> 
> 赞同：2
> 
> 时间：2013-03-06T13:06:44.943
> 
> 标签：ios, text, colors, scroll, tableviewcell

在我的程序中，我有一个数据库，它由一个实体组成，该实体具有多个属性，例如书名、当前页和书的总页数。所以，我想根据阅读的页面用颜色填充表格视图单元格。例如，如果我将书读了一半，则单元格也会用一半的颜色填充（curPage/totalPage*widthCell）。这是我的`cellForRowAtIndexPath:`方法：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
        UITableViewCell *result = nil;
        static NSString *BookTableViewCell = @"BookTableViewCell";
        result = [tableView dequeueReusableCellWithIdentifier:BookTableViewCell];
        if (result == nil){ 
            result = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:BookTableViewCell];
            result.selectionStyle = UITableViewCellSelectionStyleNone;
        }
        Book *book = [self.booksFRC objectAtIndexPath:indexPath];
        float width = result.contentView.frame.size.width;
        double fill = ([book.page doubleValue]/[book.pageTotal doubleValue])*width;
        CGRect rv= CGRectMake(0, 0, fill, result.contentView.frame.size.height);
        UIView *v=[[UIView alloc] initWithFrame:rv];
        v.backgroundColor = [UIColor clearColor];
        v.backgroundColor = [UIColor yellowColor];
        [[result contentView] addSubview:v];
        result.textLabel.text = [book.name stringByAppendingFormat:@" %@", book.author];
        result.textLabel.backgroundColor = [UIColor clearColor];
        result.detailTextLabel.text =
        [NSString stringWithFormat:@"Page: %lu, Total page: %lu",(unsigned long)[book.page unsignedIntegerValue],(unsigned long)[book.pageTotal unsignedIntegerValue]];
        result.detailTextLabel.backgroundColor = [UIColor clearColor];
        result.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        result.textLabel.font = [UIFont systemFontOfSize:12];

        return result;
    } 
```

问题是当我滚动视图文本从我绘制的单元格的那部分消失时。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:20:06.530

您每次都添加视图“v”。当单元格为零时，您应该添加它。

```
if (result == nil)
{
    result = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle
                                   reuseIdentifier:BookTableViewCell];
    result.selectionStyle = UITableViewCellSelectionStyleNone;

    UIView *v=[[UIView alloc] init];
    v.tag = 1000;
    [[result contentView] addSubview:v];
    [v release];
}

UIView *v = [cell viewWithTag:1000];
//Set framme and color here..
//Do rest of the stuff 
```

# android - 想在我的应用程序中集成 Google 日历

> ID：15248162
> 
> 赞同：2
> 
> 时间：2013-03-06T13:06:55.933
> 
> 标签：android

我想开发一个我想在其中集成 Google 日历的 android 应用程序。这是我的第一个应用程序。N nm 没有从请帮助的地方开始......我在我的 xml 文件中包含了 calendarview，但它不能正常工作 n 抛出一个错误，说“找不到类”

# shell - 控制台不接受来自 shell 脚本的命令，当命令写入 (putty)console 时工作正常

> ID：15248166
> 
> 赞同：1
> 
> 时间：2013-03-06T13:06:58.283
> 
> 标签：shell, putty

我想知道我的 shell 脚本的问题。当我直接在腻子中编写以下命令时，它工作正常

```
module remove gcc/4.4.5 
```

但是，如果我将此命令打包到 shell 中，则会出现错误消息：

```
module: command not found 
```

我不明白为什么它不能在 shell 中工作并且在复制和粘贴时工作正常:(

在 shell 中使用它有什么建议吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:49:45.320

可能，模块是别名或函数。

尝试：

```
bash < myScript.sh 
```

将 bash 替换为您要使用的 shell :-)

* * *

可能是因为运行脚本时没有获取 .bashrc 。

尝试将`. ~/.bashrc`或`source ~/.bashrc`放在脚本的开头 - myScript.sh，就在该`#!/bin/bash`行之后

* * *

或者最坏的情况，试试这个。;-)（不推荐的选项。）

```
user@localhost $ `cat ./myScript.sh` 
```

代替

```
user@localhost $ bash ./myScript.sh 
```

# asp.net - Telerik Rad 编辑器 Css 无法正确渲染

> ID：15248168
> 
> 赞同：1
> 
> 时间：2013-03-06T13:07:08.940
> 
> 标签：asp.net, telerik

我正在使用 Telerik RadEditor，它在 Firefox 和 chrome 上运行良好，但在 IE 中它没有显示任何工具栏，我使用 radeditor 作为

```
 <telerik:radeditor skinid="DefaultSetOfTools" runat="server" id="txtNotes"
                            height="250px" width="95%"  toolsfile="~/RadTool.xml">

</telerik:radeditor> 
```

IE快照：

![IE 渲染这个编辑器如下图所示](../Images/f5c9a49391afb9b4fd684939a4c53eab.png)

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:11:30.567

Internet Explorer 的最大限制为 32 个 CSS 文件链接。我之前遇到过这个问题，通过合并它们并减少 CSS 文件请求的数量来解决。

看到[这个](http://blogs.telerik.com/blogs/posts/07-05-30/all-style-tags-after-the-first-30-style-tags-on-an-html-page-are-not-applied-in-internet-explorer-workaround.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:17:40.273

您需要确保在 IE 中正确加载了 ToolsFile，并确保 IE 中没有可能影响工具栏创建的 Javascript 错误（您可以使用 IE 开发人员工具的控制台窗口进行检查）。

参考这个 Telerik Demo 来[设置工具栏](http://demos.telerik.com/aspnet-ajax/editor/examples/editortoolbars/defaultcs.aspx)

# authentication - ServiceStack：如何查看当前请求的处理程序是否需要身份验证

> ID：15248169
> 
> 赞同：2
> 
> 时间：2013-03-06T13:07:11.743
> 
> 标签：authentication, servicestack

我有一个使用旧 API 的网络服务。几乎我所有的服务处理程序都需要身份验证，因此我在服务级别上使用了 Authenticate 属性。

我所有的服务都实现了一个自定义的基础服务，它使用 OnBeforeExecute 来填充一些与身份验证相关的属性。

有没有一种快速的方法来查看当前请求的处理程序是否需要在 OnBeforeExecute 方法中进行身份验证？

我宁愿不必使用反射来查看属性，因为我知道这是一个相当缓慢的操作。我还希望 ServiceStack 系统已经在其腹部某处拥有此信息 :)

* * *

**我最终做了什么**：

由于我的项目有服务，我使用 Authenticate 的 ApplyTo 参数来禁用某些处理程序的身份验证要求，我最终得到以下结果。

```
protected override void OnBeforeExecute(TRequestDto request)
{
    base.OnBeforeExecute(request);

    var attr = FilterAttributeCache.GetRequestFilterAttributes(request.GetType()).OfType<AuthenticateAttribute>().FirstOrDefault();
    if (attr != null)
    {
        ApplyTo reqmethod = base.Request.HttpMethodAsApplyTo();
        if ((attr.ApplyTo & reqmethod) == reqmethod)
        {
            //
            // do stuff that should only be done when 
            // the handler requires authentication
            //
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:33:00.260

[Authentication](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/AuthenticateAttribute.cs)请求过滤器属性没有什么特别之处，只是它的[优先级最低](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/RequestFilterAttribute.cs)，所以它首先被执行。

ServiceStack 确实维护了一个请求 DTO 具有的所有属性的[FilterAttributeCache](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/Utils/FilterAttributeCache.cs)，因此您可以使用此 API 来确定是否为特定服务定义了 AuthenticateAttribute，例如：

```
var hasAuth = FilterAttributeCache.GetRequestFilterAttributes(request.GetType())
   .OfType<AuthenticateAttribute>().FirstOrDefault() != null; 
```

# android - 谷歌地图 v2 安卓

> ID：15248171
> 
> 赞同：0
> 
> 时间：2013-03-06T13:07:14.083
> 
> 标签：android, google-maps-android-api-2

嗨，如果我在创建 api 密钥时将 SHA 密钥留空，它会起作用吗？我对这意味着所有应用程序都有效吗？我按照[https://developers.google.com/maps/documentation/android/start#obtaining_an_api_key](https://developers.google.com/maps/documentation/android/start#obtaining_an_api_key)中给出的代码在 手机上运行应用程序时出现错误 - 找不到片段类。我的手机是姜饼。我在我的项目中引用整个图书馆项目是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:13:18.953

不，它不会工作。这是 Google 识别应用程序是在生成密钥的同一设备上创建的方式。如果您不提供密钥，您将不会在应用程序中看到地图。

话虽如此，看来您的问题与 SHA1 密钥并没有真正的关系，而是认为错误使用了`MapFragment`. 我认为对于这个 Android 版本，您应该使用`SupportMapFragment`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:13:30.967

我认为它不起作用，当您`;com.example.android.mapexample`在谷歌地图控制台中请求 API 密钥时输入类似内容时，因为您的 SHA 密钥不能是`""`.

# python - .css 不会影响我在 django 中的模板

> ID：15248175
> 
> 赞同：0
> 
> 时间：2013-03-06T13:07:17.713
> 
> 标签：python, html, css, django, templates

我目前正在编写我的第一个 django-app 并且遇到了一些问题，正如预期的那样。

我目前正在努力解决的问题是将 css 链接到我的模板文件。我一直在搜索stackoverflow，但我发现的东西似乎都不起作用。

我目前正在运行 django 1.4.2

在我的设置中，我启用了 staticfiles 应用程序和 staticfiles_finders。我的 staticfiles_dirs 看起来像这样：

```
STATICFILES_DIRS = (
    '/home/user/project/static/',
) 
```

在我的静态文件夹中，我有一个 css 文件夹，用于存储我的 css 文件。在这种情况下，我的 css 文件的路径是这样的。

```
/home/user/project/static/css/index.css 
```

在我的应用程序模板中，我已经像这样链接到 css 文件。

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/index.css /> 
```

但是，css 似乎不会影响我的页面。但是，如果我直接在模板文件中编写 css 确实可以工作，所以我认为我链接错了？

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:09:57.570

姜戈 1.4+

```
{% static %}

<link rel="stylesheet" type="text/css" href="{% static 'css/index.css' %}"/> 
```

注意：如果此代码不起作用，您应该检查您的设置和 urlconf。而且我还注意到您的代码中有一些不好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:25:25.493

您可以尝试另一种方式：

**在文件settings.py**中编辑这些变量

 **```
PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))
STATIC_URL = os.path.join(PROJECT_URL, 'static') 
```

它们指的是系统上文件夹的绝对路径，例如：

*   PROJECT_ROOT --> /home/user/project
*   STATIC_URL --> /home/user/project/static

从 STATIC_URL 变量展开 url：

*   {{ STATIC_URL }} --> h ttp://(your_host)/static/
*   {{ STATIC_URL }}/css --> h ttp://(your_host)/static/css**

# php - 如何访问 Symfony 2 中的 bundle 实例？

> ID：15248177
> 
> 赞同：3
> 
> 时间：2013-03-06T13:07:27.223
> 
> 标签：php, symfony, bundle

我刚刚将我的 Symfony 应用程序分派成几个包。

其中一些具有共同的行为，所以我希望捆绑包实现一个接口：

```
class KnFModMapBundle extends Bundle implements ModuleBase 
```

但我的问题是：如何访问捆绑实例以调用另一个捆绑控制器中的已实现方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:02:30.757

您应该使用[Service Container](http://symfony.com/doc/2.1/book/service_container.html)使某些捆绑功能在全球范围内可用。然后您将可以通过控制器从控制器访问服务`$this->get('service.name');`

# django - Django：使用 show_table_form 自定义表格首选项

> ID：15248183
> 
> 赞同：2
> 
> 时间：2013-03-06T13:07:41.377
> 
> 标签：django, django-forms

我是 Django 新手，我搜索如何使用 show_table_form 更改表首选项（尤其是 td 宽度）？

在我使用的 html 页面`{% show_table_form db_form %}`中。`db-form`是一个`forms.ModelForm`带有覆盖标签的。标签太长了，我不想打破硬编码的线条，所以我想设置 td 宽度以强制自动换行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:32:32.057

您可以从表单类中设置每个字段属性。你可能想看看[这个讨论](https://stackoverflow.com/a/110414/1257959)

# azure - Windows Azure SDK 1.7 和 SDK 1.8 有什么区别？

> ID：15248188
> 
> 赞同：3
> 
> 时间：2013-03-06T13:07:47.387
> 
> 标签：azure

我正在使用 Windows Azure SDK1.8。我没有在 SDK1.7 上工作过。任何人都知道它们之间有什么区别。请分享

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:13:55.777

您可以在此处找到每个版本的发行说明，以比较更改的内容：

[http://msdn.microsoft.com/en-us/library/windowsazure/ff683673.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ff683673.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:18:31.797

我认为最大的两件事是：

*   能够使用 .NET 4.5 和 Windows Server 2012
*   使用服务器资源管理器连接到存储帐户

正如 JuneT 建议的那样，您始终可以在[http://msdn.microsoft.com/en-us/library/windowsazure/ff683673.aspx获得完整列表](http://msdn.microsoft.com/en-us/library/windowsazure/ff683673.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:42:03.687

我知道我最近必须安装它才能成功使用[Azure Plugin to Eclipse for Java](http://msdn.microsoft.com/en-us/library/windowsazure/hh690946.aspx)。

# spring - 使用 Spring Security 对 Resteasy 服务进行身份验证

> ID：15248190
> 
> 赞同：4
> 
> 时间：2013-03-06T13:07:51.543
> 
> 标签：spring, spring-security, resteasy, restful-authentication

我使用 RestEasy 开发了一个宁静的 Web 服务。

现在我想在客户端调用服务时向客户端添加一些身份验证功能。例如：他们应该先登录。

首先，我只想要非常基本的身份验证，我在 spring 上下文 xml 文件中硬编码用户名和密码。

反正有实现吗？谢谢。

# c - C - 从内核模块写入物理内存

> ID：15248191
> 
> 赞同：8
> 
> 时间：2013-03-06T13:07:52.207
> 
> 标签：c, memory, module, kernel, interrupt

在内核模块中，我需要通过向物理内存地址写入“零”来处理中断。

首先，我应该通过像“mmap”这样的函数来分配内存，但是对于内核模块；例如，ioremap。

```
static irqreturn_t int068_interrupt(int irq, void *dev_id)
{
    unsigned int *p;
    unsigned int address;
    unsigned int memsize;

    address = 0x12345678;
    memsize = 1024;

    p = ioremap(address, memsize);
    p[0]=0;

    printk("Interrupt was handled\n");

    return IRQ_HANDLED;
} 
```

但是，当中断来临时内核崩溃并且中断处理程序开始处理它（mm/vmalloc.c:nu​​mberofline 处的内核错误）

我对 ioremap 的使用似乎有问题，或者我应该使用另一个“mmap 的内核替代品”

请告诉我，如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:37:29.817

直接从 Linux `ioremap.c`：

> 如果您 iounmap 和 ioremap 一个区域，其他 CPU 在下一次上下文切换之前不会看到此更改。同时，（例如）如果中断进入需要引用新 ioremap 区域的其他 CPU 之一，则 CPU 将引用旧区域。

这明显要求避免`ioremap`在中断服务程序中调用。

# asp.net-mvc-3 - 带有pdf的mvc 3页面-滚动条/已加载

> ID：15248194
> 
> 赞同：3
> 
> 时间：2013-03-06T13:08:01.907
> 
> 标签：asp.net-mvc-3, pdf, scrollbar

我们希望有一个嵌入了 pdf 文件的页面，并且在用户已阅读该文件的确认按钮下方。

和

```
<object name="pdf" id="pdf" data="@Url.Action("GetPDF", Model)" type="application/pdf" width="850" height="650" >
    alt:
        <p>not found</p>
</object> 
```

显示pdf。

A) 如果无法从服务器加载 pdf，我可以禁用确认按钮吗？

B）我可以检查用户是否已将 pdf 向下滚动到最后？

我担心我无法控制 pdf，但也许有一个我没有找到的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T09:19:14.477

您可以使用 Ajax 检查文件是否存在。

**1.创建一个检查文件是否存在的函数**

```
function checkFileExists(){
    return $.ajax({
        url : @Url.Action("GetPDF", Model),
        type:'HEAD'
    });
} 
```

**2.使用jQuery[延迟对象](http://api.jquery.com/category/deferred-object/)检查文件是否存在并相应地启用/禁用您的按钮。**

```
$(function(){
    checkFileExists().done(function() {
        $("#myButton").attr("disabled", false);
    }).fail(function() {
        $("#myButton").attr("disabled", true);    
    });
}); 
```

查看[延迟对象](http://api.jquery.com/category/deferred-object/)了解更多信息

# git - 从 git 中删除并忽略文件，但不要全部删除

> ID：15248197
> 
> 赞同：1
> 
> 时间：2013-03-06T13:08:22.313
> 
> 标签：git, version-control

以下情况：

我们在 GIT 中有一些本地配置文件，应该将其删除。

如果我们只是做 a`git rm`并将其添加到 中`.gitignore`，则该文件将在每个开发人员的计算机上被删除。

但我们想避免这种情况——该文件不应再是 git 存储库，但也不应在拉取/合并时删除。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:40:01.203

没有办法精确地做你正在寻找的东西。但以下内容可能对您有用。

在对现已删除的答案的评论中，您表示您的目标是用该文件的模板替换要删除的文件。如果该模板文件是由删除旧文件的同一提交创建的，并且文件足够相似，那么 git 会将其检测为重命名（这实际上就是`git mv`这样做的）。

当其他开发人员随后尝试将该更改合并到他们的存储库中时，他们的副本将被重命名而不是被删除。如果很可能他们对文件进行了本地更改，这将阻止该提交被合并。那时，他们可以简单地将他们的文件版本复制到一个临时名称，并用于`git checkout HEAD <thefile>`放弃他们对原始文件的更改。这将允许合并继续进行，包括重命名。之后，他们可以将临时副本移回原始名称。

这确实需要在该存储库的每个非裸副本中进行一些工作，但在任何情况下都不应该导致工作被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:12:26.957

`git rm --cached`保留本地文件，但从 repo 中删除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:36:40.263

1）假设您在 master 分支中工作：

```
git rm dont-track-me.txt
git commit
git push origin master 
```

2）现在在开发者的盒子上：

```
git pull  # yep, this will delete the file
git checkout HEAD^ dont-track-me.txt
git reset # prevents restaging the file in the index 
```

'dont-track-me.txt' 现在作为未跟踪文件出现在开发人员的工作树中。这确实假设在步骤 (1) 和 (2) 之间没有发生其他活动；否则可能需要更多的摆弄。

# java - Java 加密扩展 (JCE) 是否与 JRE 捆绑在一起？

> ID：15248199
> 
> 赞同：0
> 
> 时间：2013-03-06T13:08:30.600
> 
> 标签：java, bundle, java-7, java-6, jce

我需要确定 jce 即使在开箱即用的 JRE 环境中也可用。经过激烈的谷歌搜索后，我才设法验证 jce 在 Java 1.4 之后与 JDK 捆绑在一起。jce 是否也与普通 JRE 下载捆绑在一起？

您能否指出您在哪里找到这些信息，以便我自己验证并知道我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:09:57.810

是的，jce 已包含在这些天的所有 java 版本中，[相关公告](http://docs.oracle.com/javase/1.4.2/docs/guide/security/jce/JCERefGuide.html#WhatsNew)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T13:13:05.140

你看过`$JRE_HOME/lib/jce.jar`吗？

```
 ~$ jar tvf jce.jar
 6399 Thu Jul 27 16:03:42 CEST 2006 META-INF/MANIFEST.MF
 6305 Thu Jul 27 16:03:42 CEST 2006 META-INF/JCE_RSA.SF
 2015 Thu Jul 27 16:03:42 CEST 2006 META-INF/JCE_RSA.RSA
    0 Thu Jul 27 16:03:26 CEST 2006 META-INF/
    0 Thu Jul 27 16:03:24 CEST 2006 javax/
    0 Thu Jul 27 16:03:24 CEST 2006 javax/crypto/
    0 Thu Jul 27 16:03:24 CEST 2006 javax/crypto/interfaces/
  210 Thu Jul 27 16:03:24 CEST 2006 javax/crypto/interfaces/DHKey.class
  330 Thu Jul 27 16:03:24 CEST 2006 javax/crypto/interfaces/DHPublicKey.class
 ...etc 
```

请注意，无限强度加密策略文件（仍然）是[单独下载](http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html)的。

干杯，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T13:15:21.427

如前所述，JCE 确实随 Java 的所有版本一起提供。

但是，如果您希望实现某些密钥大小，请注意您将需要[Java Unlimited Strength Policy 文件](http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html)。这是由于美国有关密钥大小的法律。

# mysql - 从两个表中选择和计数

> ID：15248203
> 
> 赞同：2
> 
> 时间：2013-03-06T13:08:47.173
> 
> 标签：mysql

如何使用 mysqli 查询循环从两个表中选择和计数。

这是表结构

```
table1 = categories 
id | catname
-------------
1  | cat1
2  | cat2
3  | cat3 
```

很快。

```
table2 =  articles
id | article | catid
---------------------
1  | art1    | 2
2  | art2    | 2
3  | art3    | 1
4  | art4    | 3 
```

我需要这样显示

```
cat 1 - 1 articles
cat 2 - 2 articles
cat 3 - 1 articles 
```

谁能指出我如何使用 mysqli 查询来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:11:47.053

如果您希望将其放在单个列中，则可以使用以下内容：

```
select 
  concat(c.catname, ' - ', a.Total, ' articles') list
from categories c
inner join
(
  select count(*) Total,
    catid
  from articles
  group by catid
) a
  on c.id = a.catid 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/81660/3)

或者您可以在没有子查询的情况下执行此操作：

```
select 
  concat(c.catname, ' - ', count(*), ' articles') list
from categories c
inner join articles a
  on c.id = a.catid
group by c.catname; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/81660/6)。结果是：

```
|              LIST |
---------------------
| cat1 - 1 articles |
| cat2 - 2 articles |
| cat3 - 1 articles | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:11:09.580

试试这个

```
SELECT 
    c.catname,
    COUNT(*)
FROM categories c
INNER JOIN articles a
    ON c.id = a.catid
GROUP BY 
    c.catname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:12:34.430

试试这个：

```
SELECT CONCAT(C.catname, ' - ', A.articles, ' Articles')
FROM   categories C
       INNER JOIN articles A
         ON C.id = A.catid
GROUP  BY A.catid
ORDER  BY C.catname 
```

# android - 操作栏徽标大小？

> ID：15248207
> 
> 赞同：30
> 
> 时间：2013-03-06T13:09:09.843
> 
> 标签：android, android-actionbar, size, graphical-logo

在 Google I/O 2012 Android 应用程序中，使用了操作栏徽标，而不是普通的应用程序图标。在开源项目中，我可以找到 340x72 的图像，并且只存在于这个维度中。我搜索了在操作栏中使用徽标是否有一些指定的大小，但我没有找到任何东西。你知道吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-24T17:21:10.210

我查看了 YouTube 应用程序的资源，因为它似乎是目前唯一使用操作栏徽标的官方 Google 应用程序（除了 I/O）。

它包含徽标的三个可绘制对象：

*   drawable- **mdpi** /ic_logo_wide.png (75 x **32** px)
*   drawable- **hdpi** /ic_logo_wide.png (112 x **48** px)
*   drawable- **xhdpi** /ic_logo_wide.png (149 x **64** px)

根据Android 设计指南中的[Iconography](http://developer.android.com/design/style/iconography.html#action-bar)，这些图像的高度符合操作栏图标的规范，即**32 x 32 dp**。

*   32 dp = **32**像素 (MDPI)
*   32 dp * 1.5 = **48**像素 (HDPI)
*   32 dp * 2 = **64**像素 (XHDPI)

您会注意到来自 I/O 应用程序的**72** px (XHDPI) 没有显示出来。我猜，他们只是想稍微增加一下标志的高度。

如果仅在 XHDPI 中提供可绘制对象，Android 会将其缩小，这比提供适当大小的图像的性能要差一些。我想，这只是被 I/O 应用程序的开发人员所接受。

# php - 将 foreach 获取值返回到 PHP 函数中

> ID：15248208
> 
> 赞同：1
> 
> 时间：2013-03-06T13:09:11.157
> 
> 标签：php, function, foreach

我正在创建一个 PHP 函数，但我遇到了一个问题......

我无法将 foreach 值设置为函数内的变量。

我的代码是这样的...

**数组：**

```
$baremos_precios = array(
/* [baremo (id)] => [kilos_precio] => [kilos_hasta($key) => precio($value)] */
1 => array('kilos_precio' => array(
        /* kilos hasta => precio (sin IVA) */
        5 => 6.6,
        10 =>  7.76,
        20 => 11.03,
        30 => 14.79,
        40 => 17.13,
        50 => 19.46,
        60 => 21.79,
        70 => 24.12,
        80 => 26.46,
        90 => 28.8,
        100 => 31.14,
        120 => 35.8,
        140 => 40.47,
        160 => 45.14,
        180 => 49.83,
        200 => 54.2,
        225 => 56.4,
        250 => 58.59,
        275 => 63.77,
        300 => 68.94,
        325 => 74.1,
        350 => 79.28,
        375 => 84.45,
        400 => 89.62,
        425 => 94.79,
        450 => 99.96,
        475 => 105.12,
        500 => 108.08,
        550 => 110.07,
        600 => 113.08,
        650 => 117.02,
        700 => 125.53,
        750 => 134.03,
        800 => 142.52,
        850 => 151.02,
        900 => 159.53,
        950 => 168.02,
        1000 => 176.53,
        1001 => 0.16 // precio por cada kilo apartir de >1000, ex: 1100kg => 0.16 * 1100 = 176€ + IVA
        )
    )

); 
```

和foreach的功能

```
function obtener_precio($baremo, $kg){
    $precio = 0;
    foreach($baremos_precios AS $key => $value){
        if($key == $baremo) {

            foreach ($value['kilos_precio'] as $secondkey => $secondvalue) {
                $kilos_array = [$secondkey];
                if($kilos_array[0] == $kg){
                    $precio = $secondvalue;
                }
            }
        }
    }
    return $precio;
} 
```

好的，我现在正在尝试这个...

```
echo obtener_precio(1, 200); 
```

并从中'我想得到结果 ===> 54.2，但我总是得到 0

**问题出在哪里，谢谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:11:13.357

那是因为你忘记了传递`$baremos_precios`给函数本身，没有它你不能从函数体内访问它（除非你使用肮脏的`global`技巧）。所以你应该有这个：

```
function obtener_precio($baremos_precios, $baremo, $kg){ 
```

并致电：

```
echo obtener_precio($baremos_precios, 1, 200); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:34:39.340

```
 You can pass array as argument

function obtener_precio($baremos_precios,$baremo, $kg){
    //global $baremos_precios;
    $precio = 0;
    foreach($baremos_precios AS $key => $value){
        if($key == $baremo) {

            foreach ($value['kilos_precio'] as $secondkey => $secondvalue) {

                if($secondkey  == $kg){
                    $precio = $secondvalue;
                }
            }
        }
    }
    return $precio;
}
echo obtener_precio($baremos_precios,1, 200);

or you can use global variable 
function obtener_precio($baremo, $kg){
    global $baremos_precios;
    $precio = 0;
    foreach($baremos_precios AS $key => $value){
        if($key == $baremo) {

            foreach ($value['kilos_precio'] as $secondkey => $secondvalue) {

                if($secondkey  == $kg){
                    $precio = $secondvalue;
                }
            }
        }
    }
    return $precio;
}
echo obtener_precio(1, 200); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:11:09.673

`$baremos_precios`未在函数中定义

利用 ：

`function obtener_precio($baremos_precios, $baremo, $kg){`

并称之为：

`echo obtener_precio($baremos_precios, 1, 200);`

==================================================== =========

而不是这个：

```
$kilos_array = [$secondkey];
if($kilos_array[0] == $kg){
   $precio = $secondvalue;
} 
```

利用 ：

```
if($secondkey == $kg){
   $precio = $secondvalue;
} 
```

更好的是，我建议您在这里更改完整的 foreach ：

```
foreach ($value['kilos_precio'] as $secondkey => $secondvalue) {
    $kilos_array = [$secondkey];
    if($kilos_array[0] == $kg){
        $precio = $secondvalue;
    }
} 
```

至 ：

```
if(array_key_exists($kg,$value['kilos_precio'])){
    $precio = $value['kilos_precio'][$kg];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:11:53.527

如果`$baremos_precios`是全局变量，请执行以下操作：

```
function obtener_precio($baremo, $kg){
  global $baremos_precios;
... 
```

# c# - 是否会出现垃圾收集器因异常而无法运行的情况？

> ID：15248212
> 
> 赞同：4
> 
> 时间：2013-03-06T13:09:27.603
> 
> 标签：c#, garbage-collection

出于好奇，我想知道是否存在垃圾收集器无法运行或根本不运行（可能是由于异常）的情况？

如果是，很可能会有 OutOfMemory/ Stackoverflow 异常。那么在这种情况下，只需查看异常消息、堆栈跟踪等，我们就可以确定 gc 无法运行的核心问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:58:46.233

正如其他人所提到的，有很多事情可以阻止 GC 运行。FailFast 快速失败；在建筑物被拆除之前，它不会停止倒垃圾。但是您专门询问了例外情况。

未捕获的异常会产生实现定义的行为，因此最终块是否运行、垃圾收集是否运行以及终结器队列对象是否在存在未捕获的异常时完成是实现定义的。发生这种情况时，允许 CLR 的实现做任何事情，“任何事情”包括“运行 GC”和“不运行 GC”。事实上，CLR 的实现已经随着时间的推移改变了它们的行为。在 CLR 的 v1.0 中，终结器线程上的未捕获异常取出了进程，在 v2.0 中，终结器线程上的未捕获异常被捕获，错误被记录，并且终结器继续运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:42:20.923

有四个感兴趣的问题：

*   有什么东西会导致程序完全死掉，而垃圾收集器没有机会运行吗

*   有什么东西可以阻止垃圾收集器运行而不导致系统完全死机

*   可以阻止对象的终结器运行而不导致系统完全死机吗

*   异常可以使对象在任意时间段内无法收集吗

关于第一个，答案是“肯定”。可能发生的方式有很多，这里没有必要一一列举。

关于第二个问题，答案是“一般不会”，因为垃圾收集器的故障会导致程序瘫痪；然而，在某些情况下，程序中不使用 GC 管理内存的部分可能能够继续运行，即使使用托管对象的部分可能会被无限期地阻塞。

关于第三个问题，以前在.net 中，finalizer 中的异常可能会干扰其他 finalizer 的操作，而不会杀死整个应用程序；自 .net 2.0 以来，此类行为已更改，因此终结器抛出的未捕获异常通常会杀死整个程序。然而，在编写不佳的终结器中抛出并捕获的异常可能会导致它无法清理它应该清理的所有内容，从而导致问题 #4。

关于第四个问题，对象在创建时建立对自己的长期（可能是静态的）引用，并在清理代码中销毁这些引用是很常见的。如果异常阻止清理代码按预期运行，则可能会导致对象变得无法收集，即使它们不再有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:17:02.133

是的，在 Java 中曾经有这样一种情况，即程序可能会在没有最后一次运行 GC 的情况下停止 - 在大多数情况下，这是可以的，因为当程序的堆被销毁时，所有内存都被清除了，但是你可以拥有对象没有运行它们的终结器的问题，这对您来说可能是也可能不是问题，这取决于这些终结器会做什么。

我怀疑您是否能够确定 GC 失败，因为该程序将以不干净的方式像鹦鹉一样死，因此您甚至可能不会获得堆栈跟踪。您也许可以对其进行事后调试（如果您打开了正确的 dbg 设置，那么 .NET 在与出色的 Windows 调试工具很好地配合使用时是非常糟糕的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:24:09.177

在某些边缘情况下`finally`块不会执行 - 调用[FailFast](http://msdn.microsoft.com/en-us/library/ms131100.aspx)是一种情况，其他情况请参见[此处](https://stackoverflow.com/questions/3216046/does-the-c-sharp-finally-block-always-execute)的问题。

鉴于此，我想在某些情况下（尤其是在`using`语句/`IDisposable`对象中），块中发生的资源清理/垃圾收集`finally`不会被执行。

更明确地说，是这样的：

```
try
{
    //new up an expensive object, maybe one that uses native resources
    Environment.FailFast(string.Empty);
}
finally
{
    Console.WriteLine("never executed");
} 
```

# .net - SqlCommand.ExecuteReader 持续时间小于 SQL Profiler 批处理持续时间

> ID：15248213
> 
> 赞同：2
> 
> 时间：2013-03-06T13:09:27.837
> 
> 标签：.net, sql-server, duration, executereader

与 SQL Profiler 中看到的 SQL 批处理本身相比，对 SqlCommand.ExecuteReader 的调用如何花费更少的时间来完成？

我在调用 SqlCommand.ExecuteReader 的控制台应用程序中运行以下简单代码，我使用 Stopwatch 对象计时：

```
var swQueryTime = new Stopwatch();

        var conn = new SqlConnection("Data Source=.;Initial Catalog=master;Trusted_Connection=True;");
        conn.Open();
        string sql = string.Format(@"select * from sys.dm_os_memory_clerks; select * from sys.dm_os_performance_counters ");

        for (int i = 0; i < 10; i++)
        {                
            var comm = new SqlCommand(sql, conn);
            swQueryTime.Restart();

            var dr = comm.ExecuteReader();

            swQueryTime.Stop();

            Console.WriteLine("ElapsedMilliseconds: {0}", swQueryTime.ElapsedMilliseconds);

            dr.Close();
            comm = null;
        } 
```

平均而言，SQL 批处理持续时间比 .Net 端报告的持续时间长 4 倍。

我检查了探查器是专门报告毫秒。

我没有使用 SqlCommand.ExecuteReader 的异步版本。

探查器持续时间不是我使用探查器开始和结束时间读取和验证的跨多个线程/内核的所有时间的总和。

想法赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:18:11.177

因为您只有从批次开始的时间。如果你也*使用*数据，时间可能会排成一行：

```
using(var dr = comm.ExecuteReader()) {
    do {
        while(dr.Read()) {}
    } while (dr.NextResult());
} 
```

顺便说一句，还有一些`SET`选项可以改变某些查询的性能 - 不确定是否应该适用于此，但它会显着影响具有计算+持久值的表：如果`SET`值与列时的设置不兼容已创建，它将需要重新运行每行的计算。如果您在该列上过滤，这对于计算+持久+索引列*尤其*明显 - 它必须执行表扫描（或类似）而不是索引扫描/索引搜索。

# php - PHP 和 PDO 类

> ID：15248214
> 
> 赞同：2
> 
> 时间：2013-03-06T13:09:30.703
> 
> 标签：php, mysql, pdo

我正在尝试学习 OOP，并决定制作一个使用 PDO 的课程。这里有一些我班上的代码。

```
class DB extends PDO {

public function _construct($dsn,$user,$pass,$options=""){
        $options = array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION);
        try {
              parent::__construct($dsn, $user,$pass,$options);
              $this->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        }
         catch(PDOException $e)
         {
              echo $e->getMessage();
         }
}

    public function run($query,$all="",$secure=""){
    if(empty($secure)){
        $qry=$this->query($query);
    }else{
        $qry=$this->prepare($query);
        $qry->execute($this->cleanup($secure));
    }
    if($all=="all"){
         return $qry->fetchAll(PDO::FETCH_ASSOC);
    }else{
         return $qry->fetch(PDO::FETCH_ASSOC);
    }
}

private function cleanup($secure) {
    if(!is_array($secure)) {
        if(!empty($secure))
            $secure = array($secure);
        else
            $secure = array();
    }
    return $secure;
}

public function rowCount($table,$extra=""){
    $query="Select count(*) from ".$table;
    if(!empty($extra)){
        $query="Select count(*) from ".$table." ".$extra;
    }
    $qry=$this->query($query)->fetchColumn();
    return $qry;
}

public function select($table,$extra=""){
    $query="Select * from ".$table;
    if(!empty($extra)){
        $query="Select * from ".$table." ".$extra;
    }
    return  $this->query($query);
}

} 
```

以下代码之间有什么区别，为什么我没有得到相同的结果？

```
//usage 1 (it doesnt work that way)
$return =$qry->fetchAll(PDO::FETCH_ASSOC);

return $return;

//usage 2 (it is exactly what i need but i want to learn the difference)
return $qry->fetchAll(PDO::FETCH_ASSOC); 
```

**编辑：**我真的不知道我做错了什么，但这些用法之间似乎没有区别。它们现在都可以工作。

这就是我使用我的方法的方式

```
$result=$db->run("my query","all");
foreach($result as $r){
    //
} 
```

在构造方法中，我使用 PDO 的查询方法将字符设置为 utf-8，但它不起作用。如果我在创建数据库对象后使用它就可以工作。

```
try {
    parent::__construct($dsn, $user,$pass,$options);
    $this->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
            $this->query("SET NAMES 'UTF8'");
            $this->query("SET CHARACTER SET UTF8");
} 
```

最后一个问题

```
 //what do u think about this usage.I didnt run accross some thing like this
            //all the pdo classes i checked use it just 
            // return $qry->fetchAll(PDO::FETCH_ASSOC);
            //do you think i need to separate "fetchAll"  and "fetch"
            if($all=="all"){
         return $qry->fetchAll(PDO::FETCH_ASSOC);
    }else{
         return $qry->fetch(PDO::FETCH_ASSOC);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:25:56.780

不要扩展 PDO，它在很多方面都是错误的。你应该像你的标题所暗示的那样使用它

```
class Database
{
     protected $pdoInstance;

     public function __construct($pdoInstance)
     {
          $this->pdoInstance = $pdoInstance;
     }

     public function query($query)
     {
         $preparedStatement = $this->pdoInstance->prepare();
         /* bla bla bla */
     }
} 
```

这段代码更有意义，是良好的面向对象编程的一个更好的例子。（它仍然让我畏缩，但这是一个好的开始）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:40:44.073

首先，这里很少能看到这么好的问题。
很少有人了解 PDO 上的抽象类的需求。

所以，这里有一些建议。

1.  不要做成`run`单一功能。为不同的结果类型使用单独的方法要方便得多。相比

    ```
    $data = $db->getAll($sql);
    $data = $db->run($sql,"all");

    $data = $db->getOne($sql);
    $data = $db->run($sql,"one");

    $data = $db->getCol($sql);
    $data = $db->run($sql,"col"); 
    ```

2.  您需要考虑函数名称。您的“清理”功能不会进行任何清理。
    我会改用 func_get_args() 。

3.  *以下代码之间有什么区别，为什么我没有得到相同的结果？*

    没有区别

    ```
    $return = $qry->fetchAll(PDO::FETCH_ASSOC);
    return $return; 
    ```

    应该管用。定义“它不起作用”。

4.  *在构造方法中，我使用 PDO 的查询方法将字符设置为 utf-8，但它不起作用。*

    虽然您应该在 DSN 中设置字符集，但这个也应该可以工作。定义“不工作”

5.  另外我建议在构造函数中创建 DSN，使配置文件更加熟悉。您可能还希望从我的[mysql 助手类](https://github.com/colshrapnel/safemysql)中获得一些想法。尽管它使用与准备好的语句不同的方法，但它比 PDO 更安全

# entity-framework - 如何刷新实体框架内部缓存中的数据

> ID：15248216
> 
> 赞同：0
> 
> 时间：2013-03-06T13:09:35.893
> 
> 标签：entity-framework, ef-code-first

我有一个应用程序，我首先使用实体​​框架代码。我对 EF 实现身份映射模式有疑问，EF 在内存中缓存了一些实体。我想要做的是向用户添加一个 newdesk。因此，当我使用添加了新闻台的用户登录时，他们将能够使用该应用程序。但这似乎不起作用。如果我手动刷新我的 localdb，我可以登录。

我试图刷新上下文，但我无法让它工作。这是我的 add newsdesk 方法的代码片段。不知道它是否有任何帮助，但我正在使用全球背景。如果有任何帮助，我将不胜感激。

```
 var user = DatabaseContext.Users.Single(u => u.Id == userid);
        var newsdesk = DatabaseContext.Newsdesks.Single(u => u.Id == newsdeskid);

        user.Newsdesk = newsdesk;

        DatabaseContext.SaveChanges();
        DatabaseContext.Reload(user);
        var objContext = ((IObjectContextAdapter)DatabaseContext).ObjectContext;
        objContext.Refresh(RefreshMode.StoreWins, user); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:58:03.683

根据您显示的`DatabaseContext`用作静态的代码，所以我猜您使用`DatabaseContext`的是单例，对吗？

您的代码中的问题是您的生命周期比`DbContext`预期的要长。在您的情况下，它将作为应用程序生命周期存在并导致问题：

1.  您遇到的问题，内部缓存中的数据已过时，因此您必须手动刷新。
2.  内部缓存暂时增加，最终会导致内存泄漏。

使用的最佳实践`DbContext`是：

1.  在 Web 应用程序中，保持生命周期`DbContext`是每个请求。
2.  在 win 应用程序中，保持生命周期`DbContext`是每个线程。

您可以使用 IoC 容器来完成这项工作。

# javascript - 将正方形放在其他正方形的前面

> ID：15248218
> 
> 赞同：0
> 
> 时间：2013-03-06T13:09:43.557
> 
> 标签：javascript, rotation, html5-canvas

这是我的代码：

```
//ct is a canvas context for drawing stuff
//bw is image width, bh is image height
function drawBox() {
    ct.translate(x, y)
    ct.rotate(rot)
    ct.drawImage(box, -bw/2, -bh/2)
    ct.fillRect((-bw/2) + (50 * Math.sin(rot)), (-bh/2) - (50 * Math.cos(rot)), 20, 20)
    ct.rotate(-rot)
    ct.translate(-x, -y)
} 
```

它应该画出方框，然后将矩形放在它前面 50 像素处。但是，它不起作用。每次图像旋转一次，矩形都会围绕图像旋转两次。

我做了一些实验，这段代码有效：

```
function drawBox() {
    ct.drawImage(box, x, y)
    ct.fillRect((x) + (50 * Math.sin(rot)), (y) - (50 * Math.cos(rot)), 20, 20)
} 
```

我已移除旋转并将坐标更改为`x`and `y`。如果上面的代码有效，为什么不旋转它然后执行此代码？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:55:51.583

我似乎已经解决了这个问题。我意识到问题是我在绘制另一个盒子时围绕错误的点旋转，所以我使用了这段代码：

```
function drawBox() {
    ct.translate(x, y)
    ct.rotate(rot)
    ct.drawImage(box, -halfbw, -halfbh)
    ct.rotate(-rot)
    ct.translate(-x, -y)
    if (sCount > 0) {
        sCount --
        ct.translate(x, y+halfbh)
        ct.rotate(rot+PI)
        ct.fillRect((halfbh * Math.sin(rot)), (halfbh * Math.cos(rot))+halfbh, 10, 50)
        ct.rotate(-rot-PI)
        ct.translate(-x, -y-halfbh)
    }
} 
```

（我添加了一些不相关的东西，比如`sCount`，但这本质上就是问题所在。）我不得不取消翻译和取消旋转，这样我才能重新翻译并旋转到第二个框在正确位置的位置.

# jquery - 使用 MVC JQUERY 建议创建动态控件

> ID：15248219
> 
> 赞同：0
> 
> 时间：2013-03-06T13:09:46.737
> 
> 标签：jquery, asp.net-mvc

我的**视图中有以下代码**

```
<tr id="tblNewContentRow">
       <td>
     @Html.TextBox("txtNewAttributes", "", new { @class = "alphaonly", style = "width: 155px;" })
       </td>
        <td>
      @{@Html.DropDownList("ddlNewValues", Model.OperandsMaxList, new { style = "height: 20px;" })
        }
       </td>
       <td colspan="2">
       @Html.TextBox("txtNewValues", "", new { @class = "numbersonly", style = "width: 250px;" })
    </td>
 </tr> 
```

我为用户**添加**了按钮，他们可以在其中动态添加他们在运行时想要的 TR（如上所示）。

目前正在使用以下代码使用 JQUERY动态生成**TR**

```
var txtNewAttributes = '<td><input type="text" name="txtNewAttributes' + (tblRows + 1) + '"  class="alphaonly" style = "width: 155px;" id="txtNewAttributes' + (tblRows + 1) + '" value="" /></td>';
    var ddlNewValues = '<td><select id="ddlNewValues' + (tblRows + 1) + '" style = "height: 20px;width:75px;" /></td>';
  var txtNewValues = '<td><input type="text" name="txtNewValues' + (tblRows + 1) + '" style = "width: 250px;" id="txtNewValues' + (tblRows + 1) + '" value="" /></td>';
  var repeatRow = txtNewAttributes + ddlNewValues + txtNewValues;
   $('#tblNewSearchAttribute tr:last').prev().after('<tr id="tblNewContentRow' + (tblRows + 1) + '">' + repeatRow + '</tr>'); 
```

但是在渲染这些动态行后，我有很多功能要完成。目前，这种使用 dataEntered 的方式有点令人困惑。

我的问题是

1.  有没有更好的方法可以处理这个问题，以便我可以轻松地将这些数据用于所有功能？
2.  实现上述方案的最佳方式是什么？

请分享您的建议。

我对 MVC 和 Jquery 都很陌生。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:50:17.720

这是对您的代码的一些改进，以使数据检索更容易：

*   使用class代替id，例如class='txtAttributes'
*   应该使用 css 进行样式化，尽可能避免样式化代码。

您的 addNewRow 函数应如下所示：

```
function addNewRow(){
   var txtNewAttributes = "<td><input type='text' class='txtNewAttributes' /></td>";
   var ddlNewValues = "<td><select class='ddlNewValues'></select></td>";
   var txtNewValues = "<td><input type='text' class='txtNewValues' /></td>";
   var repeatRow = txtNewAttributes + ddlNewValues + txtNewValues;

   $('#tblNewSearchAttribute tr:last').prev().after('<tr class="tblNewContentRow">' + repeatRow + '</tr>');   
} 
```

然后是数据检索函数：

```
function retrieveData(){
    var items = [];

    // loop for each row
    $("#tblNewSearchAttribute .tblNewContentRow").each(function(){
        var item = {
            txtNewAtribute: $(this).find(".txtNewAttributes").val(),
            ddlNewValues: $(this).find(".ddlNewValues").val(),
            txtNewValues: $(this).find(".txtNewValues").val()
        };
        items.push(item);
    });

    //  return the array of item, each item contains data for a table row
    return items;
} 
```

如果您需要处理一些事件，例如处理表中所有 txtNewValues 的更改事件，您会发现使用 class 而不是 id 更好：

```
$("'#tblNewSearchAttribute").on("change", ".txtNewValues", function(){
     // do something
}); 
```

关于CSS：

```
#tblNewSearchAttribute .txtNewAttributes {
    width: 155px;
}

#tblNewSearchAttribute .ddlNewValues{
    height: 20px;
    width:75px;
} 
```

# networking - NameError：名称“ip”未定义

> ID：15248226
> 
> 赞同：0
> 
> 时间：2013-03-06T13:09:59.013
> 
> 标签：networking, scapy

在 Windows 中安装 scapy 后，当我从命令行运行“scapy”命令以检查 scapy 是否安装成功时，它给出了以下几行：

```
welcome to Scapy(2.1.1-dev) 
>>>ip
Traceback (most recent call last):
File "<console>", line 1, in <module>
NameError: name 'ip' is not defined 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:29:39.983

尝试.. 这样做.. 这将创建一个 IP 对象并打印它

```
>>>> print IP() 
```

或者这里详细解释了填充 IP 选项：[http ://allievi.sssup.it/techblog/?p=631](http://allievi.sssup.it/techblog/?p=631)

```
>>> ip=IP(src="1.1.1.1", dst="8.8.8.8", options=IPOption('\x83\x03\x10')) 
```

# sql - 映射 null->false 的规范方法

> ID：15248227
> 
> 赞同：3
> 
> 时间：2013-03-06T13:10:00.467
> 
> 标签：sql

什么是以下的规范表达式：

```
NULL  -> false
false -> false
true  -> true 
```

我正在使用的是：

```
select (foo is not null and foo) 
```

这似乎工作正常，但我想知道是否有一个标准约定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:11:52.737

```
select coalesce(foo, false) from table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:15:14.303

我刚查了一下。`COALESCE()`是ansi SQL。所以`SELECT (foo, false)`会给foo或false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T13:15:36.767

如果使用规范意味着标准化方式，而不是依赖于 DBMS/供应商，则使用 CASE WHEN。

很`ANSI`简单：

```
SELECT CASE WHEN (foo is null) 
            THEN false 
            ELSE foo 
       END 
       AS YourStuff
... 
```

或`Coalesce`如其他答案所述。

他们的表现是一样的：[Coalesce vs Case](https://stackoverflow.com/questions/13174399/coalesce-vs-case)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:17:54.190

您可以使用[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349%28v=sql.90%29.aspx)或[`ISNULL`](http://msdn.microsoft.com/en-us/library/ms184325%28v=sql.90%29.aspx)

对于 MySQL，您还可以使用[`IFNULL`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)

* * *

```
SELECT COALESCE(foo,false) 
```

或者

```
SELECT ISNULL(foo,false) 
```

或者

```
SELECT IFNULL(foo,false) 
```

# scala - 用为其成员设置的值实例化案例类

> ID：15248230
> 
> 赞同：5
> 
> 时间：2013-03-06T13:10:02.387
> 
> 标签：scala, case-class

考虑这个案例类

```
case class sample(val s: String = { /*compiled code*/ })
{
  val name:String = { /*compiled code*/ }
  val no:Int = { /*compiled code*/ }
} 
```

我需要创建此类的实例，并将特定值设置为 name 和 no。但是我不能使用扩展这个类的另一个类。我必须传递相同的类实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:30:08.490

你的意思是有人费力地确定`name`并被`no`设定了一个特定的方式并且无法改变，你想让他们包含其他东西，这可能会违反各种假设？这不是一个好主意，JVM 会阻止你做如此愚蠢的事情（除非涉及到所有事情的自定义类加载器的荒谬困难的技巧）。

*如果您*只是想设置这些 val，但通常不必在构造函数中担心它们，那么有多种解决方案。一种是使用带有 setter 的惰性 val 和私有 var：

```
case class C(val s: String = "fish") {
  private var myN: Option[Int] = None
  def initializeN(n0: Int) {
    myN = Some(n0)
    if (n != n0) throw new Exception("Already initialized")
  }
  lazy val n: Int = myN.getOrElse(s.length)   // s.length is your code block
} 
```

像这样工作：

```
scala> C("salmon")
res0: C = C(salmon)

scala> res0.initializeN(2); res0.n
res1: Int = 2

scala> C("herring")
res1: C = C(herring)

scala> res1.n
res2: Int = 5

scala> res1.initializeN(2)
java.lang.Exception: Already initialized
    at C.initializeN(<console>:11)
        ... 
```

如果您想要初始化的编译时安全性，您可以使用各种其他技巧。后面的参数块可以引用较早的参数块，并且不显示为匹配参数：

```
case class D(val s: String = "fish")(val n: Int = s.length) {} 
```

您可以重载构造函数：

```
case class E(val s: String, n: Int) {
  def this(s: String) = this(s, s.length)
  def this() = this("fish")
} 
```

并且上述的各种混合物也是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:17:52.473

并且制作`name`和`no`构造函数参数不是一个选项？

```
case class Sample(s: String = { /*compiled code*/ },
                  name: String = { /*compiled code*/ },
                  no: Int = { /*compiled code*/ }) 
```

我假设`/* compiled code */`确定字段的默认值。您可以使用如下代码：

```
Sample()                   // all default values
Sample("some value for s") // default values for name and no
Sample("s", "name", 123)   // explicit values, no defaults 
```

# c# - 网站 PayPal 集成

> ID：15248236
> 
> 赞同：3
> 
> 时间：2013-03-06T13:10:36.760
> 
> 标签：c#, asp.net, paypal, payment

当我将用户重定向到此地址时：

[https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=sales@mycompany.com¤cy_code=AUD&amount=1.0&return=http://mycompany.com/paymentFinished.aspx](https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=sales@mycompany.com&currency_code=AUD&amount=1.0&return=http://mycompany.com/paymentFinished.aspx)？

并且用户付款，然后它会重定向到这样的事情：

[http://mycompany.com/paymentFinished.aspx?tx=GDUYSGUDYGYWUGU&st=Completed&](http://mycompany.com/paymentFinished.aspx?tx=GDUYSGUDYGYWUGU&st=Completed&) ...

现在我有了交易 ID 的 tx。如何检索有关我刚刚收到的 TransactionID 的信息以验证它不是假的并且由用户创建？

我不想在应用程序的其他部分进行更改！只需要知道如何检索给定事务 ID 的事务详细信息。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:03:48.303

您可以通过 PDT 验证此信息并确认它不是假的，或者您可以使用 TransactionSearch API 连接到您的 PayPal 帐户并验证交易。[您可以在此处](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/paymentdatatransfer)找到更多关于 PDT的信息。您也可以使用该站点上的一些示例脚本。如果您想使用 TransactionSearch API，您可以在[此处](https://www.x.com/sites/default/files/pp_nvpapi_developerguide.pdf)[和](https://www.x.com/developers/paypal/documentation-tools/api/transactionsearch-api-operation-nvp)第 189 页的开发人员指南中找到相关信息。

# python - Python 基本身份验证。得到一个饼干

> ID：15248237
> 
> 赞同：0
> 
> 时间：2013-03-06T13:10:37.070
> 
> 标签：python, ruby, jasperserver

我正在制作一个与 Jasper 报表服务器通信的小脚本，但现在我需要用 Python 阅读它。

这是我的 Ruby 脚本的一个片段：

```
def get_uuid_and_cookie
    body = ""
    cookie = ""
    puts "FULL URL: #{"#{REPORT_PATH}/reports/#{REPORT_GROUP}/#{REPORT_NAME}"}"
    uri = URI.parse("#{REPORT_PATH}/reports/#{REPORT_GROUP}/#{REPORT_NAME}")
    http = Net::HTTP.new(uri_put.host, uri_put.port)
    http.start do |http|
        req = Net::HTTP::Put.new(uri_put.path + "?RUN_OUTPUT_FORMAT=#{FORMAT}")
        puts "ACESSANDO: #{uri_put.path}?RUN_OUTPUT_FORMAT=#{FORMAT}"
        req.basic_auth(SERVER_USER, SERVER_PASSWORD)
        req.body = build_xml_request
        resp = http.request(req)
        body = resp.body
        puts "COOKIE RECEBIDO: #{resp['Set-Cookie']}"       
        cookie = resp['Set-Cookie']
    end 
```

这是我的 Python 脚本的一个片段

```
def get_uuid_and_cookie():
  handle = None
  req = urllib2.Request(REPORT_URI+"reports/"+REPORT_GROUP+"/"+REPORT_NAME+"/")
  base64string = base64.encodestring('%s:%s' % (SERVER_USER, SERVER_PASSWORD))[:-1]
  authheader =  "Basic %s" % base64string
  req.add_header("Authorization", authheader)
  req.get_method = lambda: 'PUT'
  req.data = build_xml_request()
  try:
      handle = urllib2.urlopen(req)
  except IOError, e:
      print "ERROR: "+str(e) 
```

在 Ruby 脚本中，a 可以获得这样的 COOKIE：

```
cookie = resp['Set-Cookie'] 
```

我怎样才能在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:31:35.080

伟大的！我为我的问题应试**者处理程序**结果找到了一个简单的答案

第一的

```
 print str(handle.__dict__)
     {
'fp': <socket._fileobject object at 0x7f0b44d534d0>, 
'fileno': <bound method _fileobject.fileno of <socket._fileobject object at 0x7f0b44d534d0>>, 
'code': 201, 
'read': <bound method _fileobject.read of <socket._fileobject object at 0x7f0b44d534d0>>,
'readlines': <bound method _fileobject.readlines of <socket._fileobject object at 0x7f0b44d534d0>>, 
'next': <bound method _fileobject.next of <socket._fileobject object at 0x7f0b44d534d0>>, 
'headers': <httplib.HTTPMessage instance at 0x7f0b44d6bef0>, 
'__iter__': <bound method _fileobject.__iter__ of <socket._fileobject object at 0x7f0b44d534d0>>, 
'url': 'http://127.0.0.1:8080/jasperserver/rest/report/reports/Athenas/protocolo/', 'msg': 'Created', 
'readline': <bound method _fileobject.readline of <socket._fileobject object at 0x7f0b44d534d0>>
} 
```

[在观察了httplib.HTTPMessage](http://docs.python.org/2/library/httplib.html)类型的变量**头**之后， 我发现我可以得到 Set-Cookie。

```
print handle.headers
Server: Apache-Coyote/1.1
Pragma: No-cache
Cache-Control: no-cache
Expires: Wed, 31 Dec 1969 16:00:00 PST
P3P: CP="ALL"
Set-Cookie: JSESSIONID=92826DC36E6DB54164C47744FE1605CB; Path=/jasperserver
Content-Type: text/xml;charset=UTF-8
Content-Length: 256
Date: Wed, 06 Mar 2013 13:19:26 GMT
Connection: close 
```

所以只需要这样做：

```
cookie =  handle.headers["Set-Cookie"] 
```

:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:31:15.870

这应该工作

```
import urllib2
from cookielib import CookieJar
cj = CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
response = opener.open(my_url)
    if  response.getcode() == 200:
        print 'now cj is the cookie'
        for c in cj:
            print c.name 
```

# javascript - JavaScript - 将鼠标 X 和 Y 位置存储在变量中，并随着鼠标移动不断更新它们

> ID：15248238
> 
> 赞同：2
> 
> 时间：2013-03-06T13:10:38.437
> 
> 标签：javascript, html5-canvas, coordinates, kineticjs, mousemove

我有一个 HTML5 画布，它显示了许多图像。其中一些图像是可拖动的，而有些则不是。我使用 KineticJS 库的本地副本添加了可拖动功能（我正在使用本地副本，因为我想稍微编辑一两个函数）。

我现在要做的是创建几个 JS 变量来存储光标在画布上的当前位置。我希望能够这样做的原因是，当用户拖动其中一个可拖动图像时，我可以检测光标所在的位置，并检查他们是否已将其拖动到正确的位置。

我编写了以下函数来执行此操作：

```
function getMousePosition(mouseX, mouseY){
    mouseX = e.clientX;
    mouseY = e.clientY;
    console.log("mouseX = " + mouseX);
    console.log("mouseY = " + mouseY);
} 
```

我从 KineticJS`_mousemove`函数中调用这个函数，所以这个函数现在看起来像这样：

```
_mousemove: function(evt) {
    this._setUserPosition(evt);
    var dd = Kinetic.DD;
    var obj = this.getIntersection(this.getUserPosition());
    getMousePostion(mouseX, mouseY);

    if(obj) {
        var shape = obj.shape;
        if(shape) {
            if((!dd || !dd.moving) && obj.pixel[3] === 255 && (!this.targetShape || this.targetShape._id !== shape._id)) {
                if(this.targetShape) {
                    this.targetShape._handleEvent('mouseout', evt, shape);
                    this.targetShape._handleEvent('mouseleave', evt, shape);
                }
                shape._handleEvent('mouseover', evt, this.targetShape);
                shape._handleEvent('mouseenter', evt, this.targetShape);
                this.targetShape = shape;
            }
            else {
                shape._handleEvent('mousemove', evt);
            }
        }
    }
    /*
     * if no shape was detected, clear target shape and try
     * to run mouseout from previous target shape
     */
    else if(this.targetShape && (!dd || !dd.moving)) {
        this.targetShape._handleEvent('mouseout', evt);
        this.targetShape._handleEvent('mouseleave', evt);
        this.targetShape = null;
    }

    // start drag and drop
    if(dd) {
        dd._startDrag(evt);
    }
} 
```

我遇到的问题是，当我在浏览器中查看页面并将光标移到画布上时，每次移动光标时都会出现 Firebug 控制台错误：“getMousePostion 未定义”。其中一些错误只是这样说，其中一些错误旁边有一个小“+”。

如果我展开其中一个带有“+”的错误，我会得到以下附加信息：

```
_mousemove()kinetic.js (line 3443)
evt = mousemove clientX=15, clientY=229
(?)()kinetic.js (line 3417)
evt = mousemove clientX=15, clientY=229 
```

每个可展开的错误都显示 和 的不同数字`clientX`，`clientY`这表明我的函数清楚地正在获取光标在画布上移动时的 x 和 y 坐标。所以我想知道的是为什么我得到的错误告诉我`getMousePosition`没有定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:23:48.147

您正在尝试获取不存在的对象的属性，即`e`. 您应该传递和事件对象，而不是将其传递给`mouseX`函数。`mouseY`

```
//you're passing parameters that don't exist in _mousemove
function getMousePosition(mouseX, mouseY){
    mouseX = e.clientX; //and trying to use e, which doesn't exist
    mouseY = e.clientY;
    //also passed parameters aren't meant to be used as local variables like this
    console.log("mouseX = " + mouseX);
    console.log("mouseY = " + mouseY);
} 
```

将您传递的参数更改为事件对象，并创建`mouseX`和`mouseY`作为局部变量，它应该可以工作。另一个非常大的问题是`_mousemove`您正在调用该函数`getMousePostion`。注意拼写。你忘了一个“我”。

```
function getMousePosition(e){
    var mouseX = e.clientX;
    var mouseY = e.clientY;
    console.log("mouseX = " + mouseX);
    console.log("mouseY = " + mouseY);
}

_mousemove: function(evt) {
    ...
    getMousePosition(evt);
    ... 
```

# c - CTRL-C 处理程序无法正常工作

> ID：15248242
> 
> 赞同：1
> 
> 时间：2013-03-06T13:10:55.217
> 
> 标签：c, windows-7, handler, interrupt

这个节目

```
#include <stdio.h> 
#include <signal.h>
#include <stdlib.h>
#include <windows.h>
#include <sys/types.h>
#include <unistd.h>
#include <string.h>
#include <fcntl.h>

void INThandler(int);             

int  main(void)
{
   signal(SIGINT, INThandler);    

   char data[128];

   int n;

   while((n=read(0, data, 128)) > 0)
   {
   if(data[n] = '\n') break;
   }

   data[n] ='\0';

   printf("%s", data);

   return 0;
}

void  INThandler(int sig)
{
     char  c;

     signal(sig, SIG_IGN);             
     printf("OUCH, did you hit Ctrl-C?\n"    
            "Do you really want to quit? [y/n] ");
     c = getchar();                     
     if (c == 'y' || c == 'Y')          
         exit(0);                      
     else
      signal(SIGINT, INThandler);
} 
```

不处理 ctrl-c，但在该输入处终止。如果我替换处理程序安装和返回之间的所有内容

```
while (1)                          
Sleep(1); 
```

处理程序函数被调用并且可以工作，但我想在那里有 read() 。

编辑：回顾这个程序，我注意到我有

```
if(data[n] = '\n') break; 
```

我写了'='而不是'=='，但是通过使用后者，它不能正常工作，我不明白为什么。不应该是检测'\n'的比较吗？另外，我弄乱了缓冲区，但是如果按 CTRL-C，我就无法保留输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:51:49.287

示例代码没有考虑两个问题：

1.  `read()`如果它的进程接收到一个信号，它将中止它的工作（参见`man 2 read`）
2.  仅保证少数函数可以从信号处理函数中保存调用（请参阅 参考资料`man 7 signal`）。`printf()`并且`getch()`不**属于**这组“保存”功能。

第一个问题可以使用更差异化的方式来处理`read()`. 我应该计算已经读取了多少数据，以及对传递给`read()`.

关于第二个问题，`read()`并且`write()`是执行信号处理程序的输入/输出的选择功能，因为上面提到的手册页将这些功能列为“保存”功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:28:48.820

这是因为`read(2)`您使用的实施不允许这样做。这是我在编译程序、执行它并按 ^C 时得到的结果：

```
$ ./program
^COUCH, did you hit Ctrl-C?
Do you really want to quit? [y/n] y
$ 
```

或者如果我回答 n 并输入一些数据：

```
$ ./program
^COUCH, did you hit Ctrl-C?
Do you really want to quit? [y/n] n
test
test
$ 
```

由于`read(2)`是系统调用，它取决于您使用的系统。我使用 Linux (3.2.0-4-686-pae)，它的行为正确。也许您应该考虑使用`scanf(3)`或`fread(3)`代替`stdio(3)`您正在使用的平台（我认为是[win32](https://en.wikipedia.org/wiki/Windows.h)）？或者也使用不同的实现，比如*Cygwin*或*MinGW*的那些？

# algorithm - 将字符串映射到唯一的 0..1 浮点值，同时保持顺序

> ID：15248251
> 
> 赞同：0
> 
> 时间：2013-03-06T13:11:09.927
> 
> 标签：algorithm, mapping, redis

我想使用 Redis 对字符串值进行排序（使用排序集），但我只能为此目的使用浮点数。我正在寻找一种算法来将字符串转换为浮点 0..1 值，同时保持顺序。

我的意思是 s1 < s2（按字母顺序）应该意味着 f(s1) < f(s2)。

有这样的算法吗？

**PS**我将使用这样的算法对用户名进行排序，在大多数情况下，得分匹配的玩家会有完全不同的用户名。所以在大多数情况下，任何一种方法都应该有效，但仍有碰撞的空间。另一方面，字符串将被正确排序，如果几乎相同的用户名排序不正确，这是可以接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:13:58.297

每个字符都可以映射到其[ASCII](http://en.wikipedia.org/wiki/ASCII)编号。如果您将每个字符串转换为连接所有 ASCII 数字的等效浮点数（最后在它们前面加上零，以便所有字符都映射到三个数字），您将继续排序。**但是**如果你的字符串很长，你的浮点数会很大并且你的映射可能不是唯一的（如果几个字符串以相同的字符开头，由于浮点数内部的舍入）。

例如：

```
'hello' -> 104101108108111 
```

如果您知道您的字符串包含哪些字符子集（例如，只有小写字母，或者只有大写字母和数字），您可以创建自己的映射以减少每个字符的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:00:36.277

从数学上讲，这样的算法存在并且很简单：只需在字符串前面放一个小数点（“.”）并将其解释为 base-256 数字（假设您的字符串使用 8 位字符）。类似地，如果您的字符串只有字符“0”到“9”，您会将其读取为十进制数字，例如字符串“58229”的 .58229。您正在做同样的事情，只是使用基数 256 而不是基数 10。

实际上，如果没有一组严格限制的潜在字符串或特殊的浮点软件，这是不可能的。由于典型的浮点对象具有有限大小，因此它具有有限数量的可能值。例如，一个 64 位的浮点对象最多有 2^(个 64)值，甚至忽略那些代表特殊概念（如 NaN）的值。相反，任意长度的字符串具有无限多个潜在值。即使您将字符串限制在当今计算机内存中合理的范围内，它也具有比普通浮点对象更多的潜在值。

要解决此问题，您必须减少潜在字符串的数量（通过限制其长度或以其他方式限制允许的字符串）或增加潜在浮点值的数量（可能通过使用特殊的任意精度浮点软件）。

# sql - 根据搜索值更新 Linq 数据库字段 - 密码更改

> ID：15248252
> 
> 赞同：0
> 
> 时间：2013-03-06T13:11:11.990
> 
> 标签：sql, database, vb.net, linq

我有一个允许用户输入电子邮件地址的 VB.net LINQ 程序。电子邮件地址根据名为“User_signon”的数据库表进行检查，该表具有“电子邮件（PK）”和“密码”字段。单击“btnPassword”时，将根据数据库检查电子邮件地址，并将随机生成的密码通过电子邮件发送到电子邮件地址。问题是我无法弄清楚如何获取新的随机密码以在数据库中更新以连接电子邮件地址。我有以下代码，但我缺少更新密码的方法。

'与数据库建立连接 Dim db As New DatabaseDataClassesDataContext()

```
 'initialise global variabel to take email string entered in text box
        GlobalVariables.SearchUserEmail = txtEmailAddress.Text

        'initialise global variable to hold email address retrieved from database
        GlobalVariables.CurrentEmailAddress = (From u In db.User_Signons
                                               Where u.Email = SearchUserEmail
                                               Select u.Email).First

       'calls generatepassword method
        Dim stNewPassword As String = GeneratePassword() 
```

请问那里有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:50:49.853

你可以这样做

```
Dim user= (From u In db.User_Signons Where     u.Email = SearchUserEmail Select u.Email).First;

user.password =stNewPassword
db.SaveChanges(); 
```

就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:53:15.817

不只是获取用户名，而是获取整个用户对象，然后设置密码并保存结果。看看以下是否有帮助：

```
 'initialise global variabel to take email string entered in text box
    GlobalVariables.SearchUserEmail = txtEmailAddress.Text

    'initialise global variable to hold email address retrieved from database
    Dim user = db.User_Signons.First(Function(u) u.Email = SearchUserEmail)
    GlobalVariables.CurrentEmailAddress = user.UserEmail

   'calls generatepassword method
    Dim stNewPassword As String = GeneratePassword()
    user.Password = stNewPassword
    db.SubmitChanges() 
```

# sql - 如何使此代码在 Sql Server CE 中工作？

> ID：15248262
> 
> 赞同：0
> 
> 时间：2013-03-06T13:11:31.347
> 
> 标签：sql, sql-server-ce

此代码是由其他人编写的，我很难实现它，因为我只能访问 SQl Server CE：

```
SELECT *
FROM Space AS S1
WHERE (Centre_Name = 'Sandton') AND (Revision_No =
 (SELECT        MAX(Revision_No)
 FROM            Spaces AS S2
 WHERE        (S2.Centre_Name = S1.Centre_Name) AND (S2.Space_No = S1.Space_No)
 GROUP BY S1.Centre_Name, S1.Space_No)) 
```

# android - 相机意图不适用于三星 Galaxy S3

> ID：15248265
> 
> 赞同：17
> 
> 时间：2013-03-06T13:11:35.527
> 
> 标签：android, android-camera

我有一个活动，我让用户可以选择单击相机中的图像，然后将此图像存储在字节数组和数据库中。但是我的代码似乎不适用于三星 Galaxy S3，下面是代码：

摄像头调用意图：

```
if (i == 0) {
    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
    startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST); 
} 
```

关于相机的 Activity 方法：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (requestCode == 1337 && resultCode == RESULT_OK) {
        Bundle extras = data.getExtras();
        if (extras != null) {   
            BitmapFactory.Options options = new BitmapFactory.Options();
            thumbnail = (Bitmap) extras.get("data");
            image(thumbnail);
        } else {
            Toast.makeText(CreateProfile.this, "Picture NOt taken", Toast.LENGTH_LONG).show();
        }

        super.onActivityResult(requestCode, resultCode, data);     
    }
} 
```

我的图像（位图缩略图）功能：

```
public void image(Bitmap thumbnail) {
    Bitmap photo = thumbnail; 
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    photo.compress(Bitmap.CompressFormat.PNG, 100, bos);
    b = bos.toByteArray();
    ImageView imageview = (ImageView)findViewById(R.id.imageView1);
    Bitmap bt = Bitmap.createScaledBitmap(photo, 100, 80, false);  
    imageview.setImageBitmap(bt);
} 
```

但是这不适用于三星 S3，我将代码更改为以下代码，现在它适用于三星 S3，但它不适用于任何其他设备。

相机意图：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); 
```

结果活动：

```
startActivityForResult(intent, CAMERA_IMAGE_CAPTURE);
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == CAMERA_IMAGE_CAPTURE && resultCode == Activity.RESULT_OK) {
        // Describe the columns you'd like to have returned. Selecting from the Thumbnails location gives you both the Thumbnail Image ID, as well as the original image ID
String[] projection = {
 MediaStore.Images.Thumbnails._ID,  // The columns we want
 MediaStore.Images.Thumbnails.IMAGE_ID,
 MediaStore.Images.Thumbnails.KIND,
 MediaStore.Images.Thumbnails.DATA};
 String selection = MediaStore.Images.Thumbnails.KIND + "="  + // Select only mini's
 MediaStore.Images.Thumbnails.MINI_KIND;

 String sort = MediaStore.Images.Thumbnails._ID + " DESC";

//At the moment, this is a bit of a hack, as I'm returning ALL images, and just taking the latest one. There is a better way to narrow this down I think with a WHERE clause which is currently the selection variable
Cursor myCursor = this.managedQuery(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, projection, selection, null, sort);

long imageId = 0l;
long thumbnailImageId = 0l;
String thumbnailPath = "";

try{
 myCursor.moveToFirst();
imageId = myCursor.getLong(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails.IMAGE_ID));
thumbnailImageId = myCursor.getLong(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID));
thumbnailPath = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails.DATA));
}
finally{myCursor.close();}

 //Create new Cursor to obtain the file Path for the large image

 String[] largeFileProjection = {
 MediaStore.Images.ImageColumns._ID,
 MediaStore.Images.ImageColumns.DATA
 };

 String largeFileSort = MediaStore.Images.ImageColumns._ID + " DESC";
 myCursor = this.managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, largeFileProjection, null, null, largeFileSort);
 String largeImagePath = "";

try{
 myCursor.moveToFirst();

//This will actually give yo uthe file path location of the image.
largeImagePath = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));
}
finally{myCursor.close();}
 // These are the two URI's you'll be interested in. They give you a handle to the actual images
 Uri uriLargeImage = Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, String.valueOf(imageId));
 Uri uriThumbnailImage = Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, String.valueOf(thumbnailImageId));

// I've left out the remaining code, as all I do is assign the URI's to my own objects anyways...
// Toast.makeText(this, ""+largeImagePath, Toast.LENGTH_LONG).show();
// Toast.makeText(this, ""+uriLargeImage, Toast.LENGTH_LONG).show();
// Toast.makeText(this, ""+uriThumbnailImage, Toast.LENGTH_LONG).show();

    if (largeImagePath != null) {
        // Toast.makeText(this, "" + largeImagePath, Toast.LENGTH_LONG).show();

        BitmapFactory.Options opts = new BitmapFactory.Options();
        opts.inSampleSize = OG;
        // thumbnail = (BitmapFactory.decodeFile(picturePath));
        thumbnail = BitmapFactory.decodeFile((largeImagePath), opts);
        System.gc();
        if (thumbnail != null) {
            Toast.makeText(this, "Success", Toast.LENGTH_LONG).show();
        }

        image(thumbnail);

    }

    if (uriLargeImage != null) {
        Toast.makeText(this, "" + uriLargeImage, Toast.LENGTH_LONG).show();
    } 

    if (uriThumbnailImage != null) {
        Toast.makeText(this, "" + uriThumbnailImage, Toast.LENGTH_LONG).show();
    }
} 
```

这是我的 image() 函数：

```
public void image(Bitmap thumbnail) {
    b = null;

    Bitmap photo = thumbnail; 
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    photo.compress(Bitmap.CompressFormat.PNG, 100, bos);
    b = bos.toByteArray();

    if (b != null) {
        Toast.makeText(this, "Success Yeah" + b, Toast.LENGTH_LONG).show();
    }
} 
```

虽然这三个 1)uriLargeImage 2)largeImagePath 3)uriThumbnailImage 返回我的路径或 URI，但我无法将创建的位图设置为我的 ImageView。然而，这仅适用于三星 S3，如果我在任何其他设备上运行上述编辑的代码，程序就会崩溃。

在我用过的清单中

```
android:configChanges="keyboardHidden|orientation" 
```

基于教程： http: [//kevinpotgieter.wordpress.com/2011/03/30/null-intent-passed-back-on-samsung-galaxy-tab/](http://kevinpotgieter.wordpress.com/2011/03/30/null-intent-passed-back-on-samsung-galaxy-tab/)

但是，如果我在横向模式下拍照，一切正常！我很困惑！！（在三星 S3 中）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-08T05:12:51.787

经过三天的挣扎，我终于设计了一个简单的机制来克服三星 S3 Saga。

下面是代码，代码的快速总结是我首先检查设备的制造商，并在此基础上调用相机的不同意图。

```
public class MainActivity extends Activity {

    private static int RESULT_LOAD_IMAGE = 1;
    private static final int PICK_FROM_GALLERY = 2;
    int CAMERA_PIC_REQUEST = 1337;
    Bitmap thumbnail = null;
    private static final int OG = 4;

    private static final int CAMERA_IMAGE_CAPTURE = 0;
    Uri u;
    ImageView imgview;
    // int z=0;
    String z = null;
    byte b[];
    String largeImagePath = "";
    Uri uriLargeImage;
    Uri uriThumbnailImage;
    Cursor myCursor;

    public void imageCam(Bitmap thumbnail) {
        Bitmap photo = thumbnail;
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        photo.compress(Bitmap.CompressFormat.JPEG, 70, bos);
        b = bos.toByteArray();
        ImageView imageview = (ImageView) findViewById(R.id.imageView1);
        imageview.setImageBitmap(photo);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button bt = (Button) findViewById(R.id.button1);
        bt.setOnClickListener(onBTN);
        if (savedInstanceState != null) {

            Bitmap Zatang;
            String B1 = savedInstanceState.getString("message");
            Toast.makeText(this, "SavedYeah" + B1, Toast.LENGTH_LONG).show();
            BitmapFactory.Options opts = new BitmapFactory.Options();
            opts.inSampleSize = OG;
            Zatang = BitmapFactory.decodeFile((B1), opts);
            System.gc();
            if (Zatang != null) {
                Toast.makeText(this, "Success Zatang" + B1, Toast.LENGTH_LONG)
                .show();
                imageCam(Zatang);
            }
        }
    }

    private View.OnClickListener onBTN = new View.OnClickListener() {
        public void onClick(View v) {
            openNewGameDialog();
        }
    };

    String[] B = { "Cam", "Gallery" };

    private void openNewGameDialog() {
        new AlertDialog.Builder(this).setItems(B,new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialoginterface,int i) {
                if (i == 0) {
                    String BX1 =  android.os.Build.MANUFACTURER;

                    if(BX1.equalsIgnoreCase("samsung")) {
                        Toast.makeText(getApplicationContext(), "Device man"+BX1, Toast.LENGTH_LONG).show();
                        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                        startActivityForResult(intent, CAMERA_IMAGE_CAPTURE);

                    } else {
                        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                        startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST); 
                    }
                } else if (i == 1) {
                    Intent intent = new Intent(Intent.ACTION_PICK);
                    intent.setType("image/*");
                    startActivityForResult(intent, RESULT_LOAD_IMAGE);
                }
            }).show();
        }

        protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
            super.onActivityResult(requestCode, resultCode, data);
            if(requestCode==CAMERA_IMAGE_CAPTURE && resultCode==Activity.RESULT_OK){

                // Describe the columns you'd like to have returned. Selecting from the Thumbnails location gives you both the Thumbnail Image ID, as well as the original image ID
                String[] projection = {
                        MediaStore.Images.Thumbnails._ID,  // The columns we want
                        MediaStore.Images.Thumbnails.IMAGE_ID,
                        MediaStore.Images.Thumbnails.KIND,
                        MediaStore.Images.Thumbnails.DATA};
                String selection = MediaStore.Images.Thumbnails.KIND + "="  + // Select only mini's
                        MediaStore.Images.Thumbnails.MINI_KIND;

                String sort = MediaStore.Images.Thumbnails._ID + " DESC";

                //At the moment, this is a bit of a hack, as I'm returning ALL images, and just taking the latest one. There is a better way to narrow this down I think with a WHERE clause which is currently the selection variable
                myCursor = this.managedQuery(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, projection, selection, null, sort);

                long imageId = 0l;
                long thumbnailImageId = 0l;
                String thumbnailPath = "";

                try {
                    myCursor.moveToFirst();
                    imageId = myCursor.getLong(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails.IMAGE_ID));
                    thumbnailImageId = myCursor.getLong(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID));
                    thumbnailPath = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails.DATA));
                } finally {
                    myCursor.close();
                }

                //Create new Cursor to obtain the file Path for the large image

                String[] largeFileProjection = {
                        MediaStore.Images.ImageColumns._ID,
                        MediaStore.Images.ImageColumns.DATA
                };

                String largeFileSort = MediaStore.Images.ImageColumns._ID + " DESC";
                myCursor = this.managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, largeFileProjection, null, null, largeFileSort);
                largeImagePath = "";

                try {
                    myCursor.moveToFirst();

                    //This will actually give yo uthe file path location of the image.
                    largeImagePath = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));
                } finally {
                    myCursor.close();
                }
                // These are the two URI's you'll be interested in. They give you a handle to the actual images
                uriLargeImage = Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, String.valueOf(imageId));
                uriThumbnailImage = Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, String.valueOf(thumbnailImageId));

                // I've left out the remaining code, as all I do is assign the URI's to my own objects anyways...
                // Toast.makeText(this, ""+largeImagePath, Toast.LENGTH_LONG).show();
                // Toast.makeText(this, ""+uriLargeImage, Toast.LENGTH_LONG).show();
                // Toast.makeText(this, ""+uriThumbnailImage, Toast.LENGTH_LONG).show();

                if (largeImagePath != null) {
                    Toast.makeText(this, "LARGE YES"+largeImagePath, Toast.LENGTH_LONG).show();

                    BitmapFactory.Options opts = new BitmapFactory.Options();
                    opts.inSampleSize = OG;
                    thumbnail = BitmapFactory.decodeFile((largeImagePath), opts);
                    System.gc();
                    if (thumbnail != null) {
                        Toast.makeText(this, "Try Without Saved Instance", Toast.LENGTH_LONG).show();
                        imageCam(thumbnail);
                    }
                }
                if (uriLargeImage != null) {
                    Toast.makeText(this, ""+uriLargeImage, Toast.LENGTH_LONG).show();
                }
                if (uriThumbnailImage != null) {
                    Toast.makeText(this, ""+uriThumbnailImage, Toast.LENGTH_LONG).show();
                }
            }
            if( requestCode == 1337 && resultCode== RESULT_OK){
                Bundle extras = data.getExtras();
                if (extras.keySet().contains("data") ){
                    BitmapFactory.Options options = new BitmapFactory.Options();
                    thumbnail = (Bitmap) extras.get("data");
                    if (thumbnail != null) {
                        Toast.makeText(this, "YES Thumbnail", Toast.LENGTH_LONG).show();
                        BitmapFactory.Options opt = new BitmapFactory.Options();
                        thumbnail = (Bitmap) extras.get("data");
                        imageCam(thumbnail);
                    }
                } else {
                    Uri imageURI = getIntent().getData();
                    ImageView imageview = (ImageView)findViewById(R.id.imageView1);
                    imageview.setImageURI(imageURI);

                    if(imageURI != null){
                        Toast.makeText(this, "YES Image Uri", Toast.LENGTH_LONG).show();
                    }
                }
                super.onActivityResult(requestCode, resultCode, data);  
            }
            if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
                Uri selectedImage = data.getData();

                String[] filePathColumn = { MediaStore.Images.Media.DATA };
                Cursor cursor = getContentResolver().query(selectedImage,filePathColumn, null, null, null);
                cursor.moveToFirst();
                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String picturePath = cursor.getString(columnIndex);
                cursor.close();
                BitmapFactory.Options opts = new BitmapFactory.Options();
                thumbnail = BitmapFactory.decodeFile((picturePath), opts);
                System.gc();
                imageCam(thumbnail);             
            }
        }
        @Override
        public void onSaveInstanceState(Bundle outState) {
            super.onSaveInstanceState(outState);
            outState.putString("message",largeImagePath );
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-25T05:30:13.210

```
Above ans with some correction for normal samsung device and orientaton issue problem

private void cameraIntent() {
        new AlertDialog.Builder(this).setItems(B,new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialoginterface,int i) {
                if (i == 0) {

                    String manufacturer_Type =  android.os.Build.MANUFACTURER;

                    if(manufacturer_Type.equalsIgnoreCase("samsung")) {
                        Toast.makeText(getApplicationContext(), "Device man"+manufacturer_Type, Toast.LENGTH_LONG).show();
                        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                        startActivityForResult(intent, CAMERA_IMAGE_CAPTURE);

                    } else {
                        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                        startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST); 
                    }
                } else if (i == 1) {
                    Intent intent = new Intent(Intent.ACTION_PICK);
                    intent.setType("image/*");
                    startActivityForResult(intent, RESULT_LOAD_IMAGE);
                }
            }
        }).show();

    }

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        super.onActivityResult(requestCode, resultCode, data);
        if(requestCode==CAMERA_IMAGE_CAPTURE && resultCode==Activity.RESULT_OK){

            // Describe the columns you'd like to have returned. Selecting from the Thumbnails location gives you both the Thumbnail Image ID, as well as the original image ID
            String[] projection = {
                    MediaStore.Images.Thumbnails._ID,  // The columns we want
                    MediaStore.Images.Thumbnails.IMAGE_ID,
                    MediaStore.Images.Thumbnails.KIND,
                    MediaStore.Images.Thumbnails.DATA};
            String selection = MediaStore.Images.Thumbnails.KIND + "="  + // Select only mini's
                    MediaStore.Images.Thumbnails.MINI_KIND;

            String sort = MediaStore.Images.Thumbnails._ID + " DESC";

            //At the moment, this is a bit of a hack, as I'm returning ALL images, and just taking the latest one. There is a better way to narrow this down I think with a WHERE clause which is currently the selection variable
            myCursor = CameraActivity.this.managedQuery(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, projection, selection, null, sort);

            long imageId = 0l;
            long thumbnailImageId = 0l;
            String thumbnailPath = "";

            try {
                int cursor_size = myCursor.getCount();
                if(cursor_size>0){
                    myCursor.moveToFirst();
                    imageId = myCursor.getLong(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails.IMAGE_ID));

                    thumbnailImageId = myCursor.getLong(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID));
                    thumbnailPath = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails.DATA));
                    myCursor.close();
                    //Create new Cursor to obtain the file Path for the large image

                    String[] largeFileProjection = {
                            MediaStore.Images.ImageColumns._ID,
                            MediaStore.Images.ImageColumns.DATA
                    };

                    String largeFileSort = MediaStore.Images.ImageColumns._ID + " DESC";
                    Cursor mCursor = CameraActivity.this.managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, largeFileProjection, null, null, largeFileSort);
                    largeImagePath = "";

                    try {
                        mCursor.moveToFirst();

                        //This will actually give you the file path location of the image.
                        largeImagePath = mCursor.getString(mCursor.getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));
                    }finally{
                        mCursor.close();
                    }

                    // These are the two URI's you'll be interested in. They give you a handle to the actual images
                    uriLargeImage = Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, String.valueOf(imageId));
                    uriThumbnailImage = Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, String.valueOf(thumbnailImageId));

                    // I've left out the remaining code, as all I do is assign the URI's to my own objects anyways...
                    // Toast.makeText(this, ""+largeImagePath, Toast.LENGTH_LONG).show();
                    // Toast.makeText(this, ""+uriLargeImage, Toast.LENGTH_LONG).show();
                    // Toast.makeText(this, ""+uriThumbnailImage, Toast.LENGTH_LONG).show();

                    if (largeImagePath != null) {
                        Toast.makeText(this, "LARGE YES"+largeImagePath, Toast.LENGTH_LONG).show();

                        BitmapFactory.Options opts = new BitmapFactory.Options();
                        opts.inSampleSize = OG;
                        thumbnail = BitmapFactory.decodeFile((largeImagePath), opts);
                        System.gc();
                        if (thumbnail != null) {
                            Toast.makeText(this, "Try Without Saved Instance", Toast.LENGTH_LONG).show();
                            Bitmap rotatedImage = exifImage(thumbnail, largeImagePath);
                            //                        imageCam(thumbnail);

                            if(imageview!=null){
                                imageview.setImageBitmap(rotatedImage);
                            }
                        }
                    }
                    if (uriLargeImage != null) {
                        Toast.makeText(this, ""+uriLargeImage, Toast.LENGTH_LONG).show();
                    }
                    if (uriThumbnailImage != null) {
                        Toast.makeText(this, ""+uriThumbnailImage, Toast.LENGTH_LONG).show();
                    }
                }else{
                    requestCode=CAMERA_SAMSUNG_NORMAL_PIC_REQUEST;
                    normalDeviceCamera(requestCode, resultCode, data);
                }
            } catch(Exception e){
                e.printStackTrace();

            }finally {
                if(!myCursor.isClosed()){
                    myCursor.close();
                }
            }

        }
        if( requestCode == CAMERA_PIC_REQUEST && resultCode== RESULT_OK){
            normalDeviceCamera(requestCode, resultCode, data);
        }

    }

    private void normalDeviceCamera(int requestCode, int resultCode, Intent data){
        if( requestCode == CAMERA_PIC_REQUEST && resultCode== RESULT_OK){
            Bundle extras = data.getExtras();
            if (extras.keySet().contain`enter code here`s("data") ){
                BitmapFactory.Options options = new BitmapFactory.Options();
                thumbnail = (Bitmap) extras.get("data");
                if (thumbnail != null) {
                    Toast.makeText(this, "YES Thumbnail", Toast.LENGTH_LONG).show();
                    /*  BitmapFactory.Options opt = new BitmapFactory.Options();*/
                    thumbnail = (Bitmap) extras.get("data");

                    if(imageview!=null){
                        imageview.setImageBitmap(thumbnail);
                    }
                }
            } else {
                Uri imageURI = getIntent().getData();
                //                ImageView imageview = (ImageView)findViewById(R.id.imgCam);
                if(imageview!=null){
                    imageview.setImageURI(imageURI);
                }
                if(imageURI != null){
                    Toast.makeText(this, "YES Image Uri", Toast.LENGTH_LONG).show();
                }
            }
            super.onActivityResult(requestCode, resultCode, data);  
        }
    } 
```

# java - 使用 Java 分离文件内容

> ID：15248271
> 
> 赞同：1
> 
> 时间：2013-03-06T13:11:56.593
> 
> 标签：java, logging

我在这里有一个模式，例如文件以“BeginText”之类的一段文本开头，并有另一个“EndText”之类的文本，我需要这两个文本/字符串中的文件内容。我如何在java中做到这一点，文件内容部分与 XML 混合，所以我不能在这里使用 XML/DOM 解析器，因为它包含普通文本和 XML。有没有办法在 Java 中做到这一点。

我在这里考虑使用 Java 扫描器。如果有其他想法，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:25:31.087

通过以下方式使用内置字符串方法的组合：“indexOf”和“subString”：

```
//read file to string using our utility method
String text = readFileContents("pathToTargetFile");

//find start index
int startIndex = text.indexOf("BeginText");

//find end index from start index.
int endIndex = text.indexOf("EndText",startIndex);

//grab the sub string of the text between these two values.
String targetText = text.subString(startIndex,endIndex);

//private utility method, reads file contents and returns as a string
private String readFileContents(String filePath){

BufferedReader reader = new BufferedReader( new FileReader (new File(filePath)));
String         line = null;
StringBuilder  stringBuilder = new StringBuilder();
String         ls = System.getProperty("line.separator");

while( ( line = reader.readLine() ) != null ) {
    stringBuilder.append( line );
    stringBuilder.append( ls );
}

return stringBuilder.toString();
} 
```

这应该会产生预期的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:16:56.070

如何使用`String.indexOf(String)`

```
int start = s.indexOf("BeginText");
int end = s.indexOf("EndText");
String content = s.substring(start + "BeginText".length(), end); 
```

`s`你的文件内容在哪里

您必须检查 start 是否在 end 之前以及两个值是否都不是`-1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:18:10.697

使用 java[模式匹配](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)和正则表达式来确定开始和结束字符的索引。一旦你有了这些，你就有了你的内容。

# python - 具有多个'if's的python列表理解

> ID：15248272
> 
> 赞同：55
> 
> 时间：2013-03-06T13:11:58.220
> 
> 标签：python, if-statement, list-comprehension

我们都知道python的

```
[f(x) for x in y if g(x)] 
```

句法。

然而，列表推导的 [AST](http://docs.python.org/2/library/ast.html#abstract-grammar)表示有多个“if”表达式的空间：

```
comprehension = (expr target, expr iter, expr* ifs) 
```

有人可以给我一个 python 代码的例子，它会产生一个带有多个“if”表达式的 AST 吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-03-06T13:13:35.473

将它们一个接一个地堆叠起来：

```
[i for i in range(100) if i > 10 if i < 50] 
```

产生 11 到 49 之间的整数，包括 11 和 49。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-03-06T13:16:37.057

该语法允许多个 if 语句，因为您可以在 for 循环之间混合使用它们：

```
[j for i in range(100) if i > 10 for j in range(i) if j < 20] 
```

理解组件应该被视为嵌套语句，上面转换为：

```
lst = []
for i in range(100):
    if i > 10:
        for j in range(i):
            if j < 20:
                lst.append(j) 
```

这也意味着您可以使用多个`if`语句`for`，中间没有循环：

```
[i for i in range(100) if i > 10 if i < 20] 
```

尽管没有意义（只需将那些使用`and`或与链式运算符结合起来），它仍然可以转换为合法的嵌套语句集：

```
lst = []
for i in range(100):
    if i > 10:
        if i < 20:
            lst.append(i) 
```

语法和解析器并没有明确*禁止*这种用法，就像 Python 不允许您嵌套`if`语句一样。

请注意，[PEP 202 – *List Comprehensions*](https://www.python.org/dev/peps/pep-0202/)（将这个特性添加到语言中的原始提案文档）实际上在示例部分包含了一个双重如果理解：

```
>>> print [(i, f) for i in nums for f in fruit if f[0] == "P" if i%2 == 1]
[(1, 'Peaches'), (1, 'Pears'), (3, 'Peaches'), (3, 'Pears')] 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-05-27T14:20:30.397

使用内置`all()`允许您将多个布尔表达式或函数放置在一个可迭代对象中并坚持您的理解。我认为这是一个相当不常用的内置工具，它保持了很高的可读性。

```
>>> [x for x in range(20) if all([1 < x < 10, not x & 1])]
[2, 4, 6, 8] 
```

或者

```
>>> [x for x in range(20) if all([foo(x), bar(x)])] 
```

`any()`如果只需要满足一个条件，内置也可以在这里很好地工作：

```
>>> [x for x in range(20) if any([1 < x < 10, not x & 1])]
[0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 14, 16, 18] 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-06T13:22:43.300

[语言参考](http://docs.python.org/2/reference/expressions.html#grammar-token-list_comprehension)对此提供了更好的想法：

```
list_comprehension  ::=  expression list_for
list_for            ::=  "for" target_list "in" old_expression_list [list_iter]
list_iter           ::=  list_for | list_if
list_if             ::=  "if" old_expression [list_iter] 
```

如您所见，列表推导`list_iter`式在末尾定义了一个可选的 - 一个`list_iter`. 现在，这`list_iter`可以是列表理解的另一个部分，也可以是 if 条件。if 条件本身再次以另一个 optional 结尾`list_iter`。这对于在同一个列表理解中使用可选的 if 条件链接多个 for-parts 是必不可少的。`.. if X if Y if Z`您也可以为 构建零件这一事实`list_iter`只是一个副作用。

因此，虽然不需要单独链接多个 if 条件的可能性，但它允许以这种方式定义整个语法。

# java - log4j 日志文件相对路径，CONSOLE APPLICATION(jar)

> ID：15248273
> 
> 赞同：0
> 
> 时间：2013-03-06T13:11:58.823
> 
> 标签：java, spring, log4j

我在控制台 java 应用程序中使用 Spring。我正在使用 PropertyPlaceholderConfigurer 来加载数据库详细信息，它可以完美运行：

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="file:/appdata/configs/myapplication/connection.properties" />  
</bean> 
```

所以根目录将相对于 jar 所在的位置。我需要与 log4j.properties 相同的功能

```
log4j.appender.file.File=/appdata/configs/myapplication/myapplication-log.log 
```

在不定义环境变量的情况下如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:34:24.260

只是这样尝试：

```
log4j.appender.file.File=\\appdata\\configs\\myapplication\\myapplication-log.log 
```

它工作正常。

# c# - 以动态类型和泛型回调作为参数调用泛型非静态方法

> ID：15248283
> 
> 赞同：0
> 
> 时间：2013-03-06T13:12:32.607
> 
> 标签：c#, generics, mono

使用 Xamarin/Mono 开发适用于 Android（和更高版本的 iOS）的应用程序。通常我使用这段代码来调用一个非静态的泛型方法，它工作得很好：

```
serverService.GetCustomListObject<T> (firstRequestInLine,
                                      null,
                                      onGetCustomListObjectFromThread<T>,
                                      onGetCustomListObjectFromThreadError); 
```

其中回调定义为：

```
private void onGetCustomListObjectFromThread<T> (List<T> list, 
                                                 RequestStateGen<T>.SuccessfullDelegateType successDel
{ ... } 
```

和

```
private void onGetCustomListObjectFromThreadError (String error,
                                                   WebRequest failedRequest)
{ ... } 
```

但是，现在我需要调用`GetCustomListObject<t>`where`t`动态设置。我对泛型很陌生，但尝试了其他示例中的以下代码但没有成功：

```
typeof(ServerService).GetMethod ("GetCustomListObject").MakeGenericMethod (t).Invoke (serverService, new object[] {
        firstRequestInLine,
        null,
        typeof(LocalServerService).GetMethod ("onGetCustomListObjectFromThread").MakeGenericMethod (t),
        typeof(LocalServerService).GetMethod ("onGetCustomListObjectFromThreadError")
        }); 
```

`LocalServerService`我的所有示例都在哪里，并且`serverService`是类型`ServerService`

我收到以下错误：

```
Error: Ambiguous matching in method resolution 
```

**编辑：** ServerService 中的 GetCustomListObject：

```
public void GetCustomListObject<T> (WebRequest request,
                                    RequestStateGen<T>.SuccessfullDelegateType successDelegate,
                                    RequestStateGen<T>.InternalSuccessDelegateType internalSuccessDelegate,
                                    RequestStateGen<T>.ErrorDelegateType errorDelegate) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:22:20.670

在您的原始代码中，您正在调用传递委托的方法。

在您的反射代码中，您似乎是在传递`MethodInfo`值 - 我不相信它们会自动转换为委托。

不幸的是，在不知道方法声明的情况下很难给出一个好的代码示例`GetCustomListObject`，但你想要这样的*东西*：

```
Type thirdArgType = typeof(Foo<>).MakeGenericGenericType(t);
MethodInfo thirdArgMethod = typeof(LocalServerService)
                                .GetMethod("onGetCustomListObjectFromThread",
                                           BindingFlags.Instance | BindingFlags.NonPublic)
                                .MakeGenericMethod(t);
Delegate thirdArg = Delegate.CreateDelegate(thirdArgType, this, thirdArgMethod);

MethodInfo fourthArgMethod = typeof(LocalServerService)
                                 .GetMethod("onGetCustomListObjectFromThreadError",
                                            BindingFlags.Instance | BindingFlags.NonPublic);
Delegate fourthArg = Delegate.CreateDelegate(typeof(Bar), this, fourthArgMethod);

MethodInfo method = typeof(ServerService).GetMethod("GetCustomListObject")
                                         .MakeGenericMethod (t);
method.Invoke(serverService,
    new object[] {firstRequestInline, null, thirdArg, fourthArg }); 
```

# java - 使用 poi ，如何将单元格类型设置为数字

> ID：15248284
> 
> 赞同：21
> 
> 时间：2013-03-06T13:12:33.900
> 
> 标签：java, apache-poi

我正在使用 poi 3.6

我能够正确创建excel。但是当我尝试将单元格类型设置为 number 时，它总是给我一般的单元格类型。

即在新创建的excel中，当我右键单击并转到格式单元格->那里我总是发现数字是将军。

我的代码是这样的

```
style.setAlignment(CellStyle.ALIGN_RIGHT);
dataCell.setCellValue(Float.parseFloat(value as String);
dataCell.setCellType(Cell.CELL_TYPE_NUMERIC);
dataCell.setCellStyle(style); 
```

你能建议这里缺少什么吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-06T13:28:56.917

您也可以尝试这种方法：

```
HSSFRow row = sheet.createRow(sheet.getLastRowNum());
HSSFCell cell = row.createCell(0);
HSSFCellStyle style = workbook.createCellStyle();
style.setDataFormat(HSSFDataFormat.getBuiltinFormat("0.00"));
cell.setCellStyle(style);
cell.setCellValue(Float.parseFloat("21.5")); 
```

当然，请查看有关[数据格式的](http://www.roseindia.net/java/poi/setdataformat.shtml)[文档](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFDataFormat.html)和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:20:03.597

如果我没记错的话，您正在寻找的方法称为“setNumericCellValue”。另外，在设置值之前尝试设置单元格类型。

# 3d - 如何展平选择的点

> ID：15248286
> 
> 赞同：2
> 
> 时间：2013-03-06T13:12:34.697
> 
> 标签：3d, maya

我需要在其 LOCAL 法线轴上展平选择的点。我假设如果法线是正确的，那么无论他们是否从对象的任何一侧选择点，这个轴都将始终相同？

为了直观地表示我想要实现的目标，我想把它变成：

![在此处输入图像描述](../Images/12d6ba70c483d3fa086405d797f6b72f.png)

以编程方式进入此：

![在此处输入图像描述](../Images/ce385538ea854a974b964d57061b2182.png)

如果我将缩放工具设置为“法线平均值”并手动缩放它们，我可以将点展平为平面，但是我需要通过代码计算或执行此操作。

我查看了[polyMoveFacet](http://download.autodesk.com/global/docs/maya2013/en_us/CommandsPython/index.html)命令，它有一个名为 localScaleZ 的标志，它的描述中甚至写有“扁平化”，但我没有运气。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:24:40.587

最简单的方法就是使用您手动执行的相同操作。在 mel 中执行此操作的代码如下所示：

```
{ // protect global namespace
     setToolTo Scale;
     manipScaleContext -e -mode 9 Scale;
     $oa = `manipScaleContext -q  -orientAxes Scale`;
     $p = `manipScaleContext -q  -position Scale`;
     scale -ws -r 
           -p ($p[0]) ($p[1]) ($p[2]) 
           -oa ($oa[0]+"rad") ($oa[1]+"rad") ($oa[2]+"rad") 
            0 1 1;
} 
```

和 Python：

```
cmds.setToolTo('Scale')
cmds.manipScaleContext("Scale", e=1, mode=9)
p = cmds.manipScaleContext("Scale", q=1, p=1)
oa = cmds.manipScaleContext("Scale", q=1, oa=1) 
cmds.scale(0,1,1, 
           p=(p[0],p[1],p[2]),
           oa=("%srad"%oa[0],"%srad"%oa[1],"%srad"%oa[2])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:57:54.767

我从未使用过 Maya，也不知道它使用什么脚本语言。因此，此答案仅处理该问题的数学/几何方法。代码在 python 中来演示这个概念，但你应该能够翻译。

请注意，我没有测试代码，但希望它至少可以为您提供解决问题的工具。

```
from math import sqrt

def point_average(points):
    l = len(points)
    return [(p.x/l,p.y/l,p.z/l) for p in points]

def find_normal(points):
    normal = point_average([p.normal for p in points])
    normal_length = sqrt(sum(c**2 for c in normal))
    normal = [c/normal_length for c in normal]
    return normal

def find_plane(points):
    normal = find_average_normal(points)
    center = point_average(points)
    # a point and a normal are enough to uniquely identify a plane
    # we anchor the plane to the farthest point from the center
    # that should be one of the corners
    dcenter = lambda p:sqrt((p.x-center.x)**2+(p.y-center.y)**2+(p.z-center.z)**2)
    points = [(dcenter(p),p) for p in points]
    points.sort()
    anchor = points[-1][1]
    return (anchor,normal)

def project_point_onto_plane(point, plane):
    anchor,normal = plane
    # kudos to http://stackoverflow.com/questions/9605556/how-to-project-a-3d-point-to-a-3d-plane
    # for the math behind this
    v = (point.x-anchor[0], point.y-anchor[1], point.z-anchor[2])
    dist = v[0]*normal[0] + v[1]*normal[1] + v[2]*normal[2]
    projected_point = (point.x-dist*normal[0],
                       point.y-dist*normal[1],
                       point.z-dist*normal[1])
    return projected_point 
```

# javascript - 在具有固定高度的容器内居中响应视频

> ID：15248291
> 
> 赞同：0
> 
> 时间：2013-03-06T13:12:52.543
> 
> 标签：javascript, css, video.js

我必须在 100% x 400px 的容器中嵌入视频

有没有办法通过 video.js 做到这一点？问题是视频必须垂直居中，不必要的顶部/底部部分应由容器 div 裁剪。

另外，我想在调整浏览器窗口大小时删除黑色视频区域。我的意思是，视频应该被拉伸 100% 宽度。

其实问题是：有可能吗？

这里的代码示例（非常简单）：http: [//jsfiddle.net/fNADc/1/](http://jsfiddle.net/fNADc/1/)

```
<div class="holder">
    <video id="example_video_1" class="video-js vjs-default-skin" width="100%" height="400" poster="http://video-js.zencoder.com/oceans-clip.jpg" data-setup="{}" controls>
          <source type="video/mp4" src="http://video-js.zencoder.com/oceans-clip.mp4">
    </video>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:59:30.367

您可以为 VIDEO 标签添加负边距

[在这里摆弄](http://jsfiddle.net/fNADc/2/)

CSS：

```
#example_video_1 {margin:-122px} 
```

# javascript - 注册脚本（HTML 和 Javascript）

> ID：15248292
> 
> 赞同：0
> 
> 时间：2013-03-06T13:12:53.203
> 
> 标签：javascript, html

我正在编写一个注册脚本，但我被卡住了。我有用户付费或免费会员资格的机会。当他们选择“支付”时，支付栏变得可见，但如果我之后选择“免费”，我会同时看到免费和支付栏。但我只希望看到一列而不是同时看到两列

Javascript

```
 <script type="text/javascript">
            function betal(value) {
                if (value == 'show') { document.getElementById('betalversion').style.display = 'block'; }
                else { document.getElementById('betalversion').style.display = 'none'; }
            }
        </script>

        <script type="text/javascript">
            function gratis(value) {
                if (value == 'show') { document.getElementById('gratisversion').style.display = 'block'; }
                else { document.getElementById('gratisversion').style.display = 'none'; }
            }
        </script> 
```

HTML

```
<div class="FormGroup">
                <h2 class="description">Vad skulle du vilja ha?</h2>
                <label class="choice">
                    <input id="gratisVersion" name="field_Payment" type="radio" value="Gratis" class="required" onclick="gratis('show');">
                    Gratis Version</label>
                <br />
                <label class="choice">
                    <input id="betalVersion" name="field_Payment" type="radio" value="Betal" class="required" onclick="betal('show');">
                    Betal Version</label>

                <br />
            </div>

            <div class="FormGroup" style="display: none" id="betalversion">
                <br />
                <h2 class="description">Fyll i dina uppgifter</h2>
                <br>
                <div class="explanation">Här är nåt</div>
                <input type="text" name="paypal_address" id="Text1" size="40">
            </div>

            <div class="FormGroup" style="display: none" id="gratisversion">
                <br />
                <h2 class="description">Fyll i dina uppgifter</h2>
                <br>
                <label for="name">Användarnamn</label><input type="text" name="name" id="name"/>
        <br />
                <label for="pass">Lösenord</label><input type="password" name="pass" id="pass" onkeyup="passwordStrength(this.value)" />
                <br />

                <p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:15:11.540

```
 <script type="text/javascript">

    function betal(value) {
           if (value == 'show') {
                 document.getElementById('betalversion').style.display = 'block';
                 document.getElementById('gratisversion').style.display = 'none';
           }
           else {
                  document.getElementById('betalversion').style.display = 'none';
                 document.getElementById('gratisversion').style.display = 'block';
            }
                }
       </script>

       <script type="text/javascript">
         function gratis(value) {
               if (value == 'show') {
                  document.getElementById('betalversion').style.display = 'none'; 
                  document.getElementById('gratisversion').style.display = 'block';
                }
                else {
                  document.getElementById('gratisversion').style.display = 'none';
                  document.getElementById('betalversion').style.display = 'block'; 
                }
          }
        </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:21:18.647

```
 <script type="text/javascript">
var beta=document.getElementById('betalversion');
var grati=document.getElementById('gratisversion');
            function betal(value) {
               beta.style.display = 'none';
               grati.style.display = 'none';
            if (value == 'show') { 
              beta.style.display = 'block'; }
            else { beta.style.display = 'none'; }
        }

    </script>

    <script type="text/javascript">
        function gratis(value) {
             beta.style.display = 'none';
               grati.style.display = 'none';
            if (value == 'show') { grati.style.display = 'block'; }
            else { grati.style.display = 'none'; }
        }
    </script> 
```

在切换时隐藏两个 div

# php - 使用 JavaScript 的变量冲突

> ID：15248295
> 
> 赞同：0
> 
> 时间：2013-03-06T13:13:01.917
> 
> 标签：php, javascript

我对javascript中的变量有疑问。我的情况是：

在 PHP 文件中，我有：

```
<div class="fd_text" onmouseover="zobraz_text('pom','1','1')" onmouseout="zobraz_text('pom','1','0')">something in</div> 
```

在 JS 文件中，我有：

```
var pom1 = "Some text1";
var pom2 = "Some text2";

function zobraz_text(firma, cislo, udalost){
    obsah_text = firma+cislo; //this is wrong and why I wrote lower in text under this code

    document.getElementById("bloks").innerHTML = document.getElementById("bloks").innerHTML + obsah_text; //this ID is correct
} 
```

`obsah_text`是变量，它必须添加来自`pom1`、`pom2`等的文本...我从PHP 文件中
获取的`pom1`位置和位置。`pom2``mouseover`

`zobraz_text`如果我从给定的函数中对前两个参数进行分组`pom1`，但这`pom1`与`pom1`我有文本的地方不同。在网络上我有文字`"pom1"`，但我必须有文字`"Some text1"`。

当我删除变量并像此示例代码一样 `obsah_text`简单地添加变量时，我的代码可以工作。`pom1`

这显示了来自变量的文本，这没关系，但是如果我添加变量，那么此代码仅适用于 300 种情况中的一种（因为我在函数中有第一个和第二个参数`zobraz_text()`）

```
document.getElementById("bloks").innerHTML = document.getElementById("bloks").innerHTML + pom1; 
```

我相信你理解并帮助我。我希望这对你们中的许多人来说很简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:18:25.203

您不能创建变量的变量。如果`pom1`并且`pom2`是全球性的，您可能会这样做`window[firma + cislo]`，但我不建议这样做。

相反，使用一个对象来存储 pom：

```
var poms = {
    "pom1": "Some text1",
    "pom2": "Some text2",
}
//snip
obsah_text = poms[firma + cislo]; 
```

# java - 将二维数组转换为列字符串的一维数组

> ID：15248301
> 
> 赞同：0
> 
> 时间：2013-03-06T13:13:09.930
> 
> 标签：java

我正在开发一个具有以下输入的java程序：

```
A V V V VV V V V
E F V E VF E V E
C D V C VD B V C
A A V A VA G V A
V D V V VD E V V
A V V A VV V V A 
```

和以下输出：

```
R
R

R
 R
R

R 
```

因此，`R`如果一列包含最少一个字母`A-G`，则必须打印一个，但如果该列中只有`V`'，则必须打印一个空格。我的代码是：

```
Scanner inputc2 = new Scanner (new File("internalc"));
int sss = 0;

for (int i = 0; i < n; i++) {
 for (int j = 0; j < m; j++) {
  try{
     matrix2[i][j] = inputc2.useDelimiter(" ").next().replaceAll(",", " ");
       System.out.println(matrix2[i][j]);
       temp2[sss] = matrix2[i][j];//change this

        if(temp2[sss].indexOf("N") >= 0){
         pc2.println(temp2[sss].replaceAll("N","R"));
        }
        if(temp2[sss].indexOf(' ') >= 0){
         pc2.println(temp2[sss]);
        } 
        sss++;

     }
     catch (java.util.NoSuchElementException e) {
         // e.printStackTrace();
     }
   }

} 
```

在当前程序中 temp2[sss] 与 matrix2[i][j] 完全相同，但它必须是列字符串。我希望你能帮助我。

亲切的问候，比约恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:25:36.540

您可以替换此行

```
temp2[sss] = matrix2[i][j]; 
```

经过

```
List<Integer> temp2 = new ArrayList<Integer>();
temp2.add(matrix2[i][j]);
int[] vector = new int[temp2.size()];
for (int i = 0; i < vector.length; i++) {
    vector[i] = temp2.get(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:54:38.683

这是我编写的示例程序，输出可能与您期望的不完全一样，请根据您的需要调整正则表达式

```
public static void main(String[] args) throws Exception {

    Pattern pattern = Pattern.compile("[A-G]+[A-G]{0,1}");
    Pattern pattern2 = Pattern.compile("[V]+[V]*");

    BufferedReader br = new BufferedReader(new FileReader(new File("test.txt")));
    String line;
    while ((line = br.readLine()) != null) {
        StringBuffer sf = new StringBuffer();

        //System.out.println(line);         
        String[] tempArr = line.split(" ");
        //System.out.println(tempArr.length);

        for(String s : tempArr){
            Matcher matcher = pattern.matcher(s);
            Matcher matcher2 = pattern2.matcher(s);
            if (matcher.find()) {
                sf.append("R");
            }else if(matcher2.find())   {
                sf.append(" ");
            }
        }
        System.out.println(sf);
    }
    br.close();
} 
```

**编辑 2**

给你

```
public static void main(String[] args) throws Exception {

    Pattern pattern = Pattern.compile("[A-G]+");
    Pattern pattern2 = Pattern.compile("[V]+");

    List<String[]> mat = new ArrayList<String[]>();
    String[] row1 = { "A", "V", "V", "V", "VV", "V", "V", "V" };
    String[] row2 = { "E", "F", "V", "E", "VF", "E", "V", "E", };
    String[] row3 = { "C", "D", "V", "C", "VD", "B", "V", "C" };
    String[] row4 = { "A", "A", "V", "A", "VA", "G", "V", "A" };
    String[] row5 = { "V", "D", "V", "V", "VD", "E", "V", "V" };
    String[] row6 = { "A", "V", "V", "A", "VV", "V", "V", "A" };

    mat.add(row1);
    mat.add(row2);
    mat.add(row3);
    mat.add(row4);
    mat.add(row5);
    mat.add(row6);

    int rowSize = 6;
    int colSize = 8;

    String[][] matrix = mat.toArray(new String[rowSize][colSize]);

    for (int i = 0; i < colSize; i++) {

        StringBuffer sf = new StringBuffer();
        for (int j = 0; j < rowSize; j++) {
            sf.append(matrix[j][i]);

        }

        Matcher matcher = pattern.matcher(sf.toString());
        Matcher matcher2 = pattern2.matcher(sf.toString());

        if (matcher.find()) {
            System.out.println("R");
        } else if (matcher2.matches()) {
            System.out.println(" ");
        }

    }

} 
```

**结果：**

```
R
R

R
R
R

R 
```

# ruby-on-rails - PDF (Prawn) : 不用 Prawnto 生成表格

> ID：15248304
> 
> 赞同：0
> 
> 时间：2013-03-06T13:13:25.217
> 
> 标签：ruby-on-rails, pdf-generation, ruby-on-rails-2, prawn, prawnto

由于某些权限限制，我无法将`prawnto`gem 安装到我的服务器上。我使用[http://blog.idyllic-software.com/blog/bid/204082/Creating-PDF-using-Prawn-in-Ruby-on-Rails](http://blog.idyllic-software.com/blog/bid/204082/Creating-PDF-using-Prawn-in-Ruby-on-Rails)的方法为我的对象生成 PDF。

但是，我使用该方法`pdf.table`生成表，并且该方法无法访问，因为我已经删除了`prawnto`.

有没有什么方法可以用`prawn`gem 轻松生成表格？

我的应用程序在 Rails 2.3.16 和`prawn`0.8.4 版本上。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:19:01.890

有什么理由使用 prawn 0.8.4 吗？如果没有，请尝试**升级到最新的虾**。

我正在使用 prawn 0.12.0，我可以在`pdf.table`没有`prawnto`gem 的情况下生成表。

# css - 从定制的复选框中删除框

> ID：15248325
> 
> 赞同：-1
> 
> 时间：2013-03-06T13:14:23.920
> 
> 标签：css, wordpress, checkbox, styles

我创建了如下所示的自定义样式复选框：

![](../Images/ed67105024230322a4df5da6989979eb.png)

我想要的是从复选框中删除框，并在单击时为按钮赋予新颜色，如下所示：

![](../Images/73e5b2b40100a63a6607b9c177f1b82a.png)

怎么可能做到这一点？使用纯 CSS？

**生成的html：**

```
<p>
    Huvudområden:
    <label><input class="{category: true}" type="checkbox" name="category[]" value="40" id="grade40">Musicerande</label>
    <label><input class="{category: true}" type="checkbox" name="category[]" value="42" id="grade42">Musikens sammanhang</label>
    <label><input class="{category: true}" type="checkbox" name="category[]" value="41" id="grade41">Musikens verktyg</label>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:24:28.273

您可以使用所谓的[复选框 hack](http://css-tricks.com/the-checkbox-hack/)。

如您所见，诀窍是使用这种定位隐藏复选框：

```
input[type=checkbox] {
   position: absolute;
   top: -9999px;
   left: -9999px;
} 
```

然后您使用`label`来切换复选框！

# postgresql - 如何在 Postgres 中“折叠”数组值？

> ID：15248331
> 
> 赞同：0
> 
> 时间：2013-03-06T13:14:55.613
> 
> 标签：postgresql

我是 Postgresql 新手，我想知道是否可以计算以下内容：

```
select T.result + 
    -- here I want to do the following:
    -- iterate through T.arr1 and T.arr2 items and add their values
    -- to the T.result using the rules:
    -- if arr1 item is 1 then add 10, if arr1 item is 2 or 3 then add 20,
    -- if arr2 item is 3 then add 15, if arr2 item is 4 then add 20, else add 30

from (
    select 5 as result, array[1,2,3] as arr1, array[3,4,5] as arr2
) as T 
```

因此对于这些数组，查询将产生：5+10+20+20+15+20+30 = 120。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:53:26.340

尝试类似：

```
SELECT SUM(CASE val 
           WHEN 1 THEN 10
           WHEN 2 THEN 20
           WHEN 3 THEN 20
           END)
FROM unnest(array[1,2,3]) as val 
```

得到数组的总和。

完整的查询将如下所示：

```
select T.result + 
       (SELECT SUM(CASE val 
               WHEN 1 THEN 10
               WHEN 2 THEN 20
               WHEN 3 THEN 20
               END)
        FROM  unnest(arr1) as val) +
       (SELECT SUM(CASE val 
               WHEN 3 THEN 15
               WHEN 4 THEN 20
               ELSE 30
               END)
        FROM  unnest(arr2) as val)   
from (
    select 5 as result, array[1,2,3] as arr1, array[3,4,5] as arr2
) as T 
```

[SQLFiddle](http://sqlfiddle.com/#!12/d41d8/563)

# uiviewcontroller - 如何在不使用导航栏或标签栏的情况下在情节提要中的视图之间导航

> ID：15248333
> 
> 赞同：2
> 
> 时间：2013-03-06T13:15:08.390
> 
> 标签：uiviewcontroller, uinavigationcontroller, uitabbarcontroller, uistoryboard, segue

我的故事板中有三个 UIView，如何在不使用**Navigationbar**或**Tab Bar**的情况下通过类似动画的**推送**在它们之间导航？我在视图上有自定义按钮。按住 Control 单击并拖动不适用于此错误：

 ****```
Terminating app due to uncaught exception 'NSGenericException', reason: 'Push segues can
only be used when the source controller is managed by an instance of UINavigationController. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:28:57.690

您可以在不使用导航控制器的情况下展示/关闭 VC。

请注意术语：push/pop 用于导航控制器堆栈上的 VC，present/dismiss 用于其他 VC（而不是导航控制器堆栈）上的 VC。

有几种方法可以在另一个 VC 之上呈现 VC，这取决于该 VC 是否也存在于您的 SB 上：

1- 如果您的 IB 中不存在 VC，而您只是以编程方式创建和展示 VC，您可以执行以下操作：

```
 MyUIViewControllerSubclass *myLittleSubclass=[[MyUIViewControllerSubclass alloc]init];
myLittleSubclass.view.frame=self.view.frame; //this is for exmaple only
[self presentViewController:myLittleSubclass animated:YES completion:nil]; 
```

有了上述内容，您显然必须首先将 MyUIViewControllerSubclass Objective C 类添加到您的项目中（使用添加文件）并将其导入到您放置上述代码的任何类中。

稍后要关闭它，您可以使用 MyUIViewControllerSubclass 类本身的以下代码。

```
 [self.parentViewController dismissViewControllerAnimated:YES completion:nil]; 
```

2- 如果您已经将 MyUIViewControllerSubclass Objective C 类添加到您的项目中（使用添加文件）但您打算使用 IB 来设计它并且您已经在 IB 中添加了 VC 并将其在 IB 中的类更改为 MyUIViewControllerSubclass，您然后可以使用此代码：

```
mySubclass *myLittleSubclass=[self.storyboard instantiateViewControllerWithIdentifier:@"theVC"];
[self presentViewController:myLittleSubclass animated:YES completion:nil]; 
```

您可以像上面一样解雇。确保在 SB 和身份检查器中单击 VC，将 SB ID 设置为“theVC”并选中“使用 SB ID”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:17:59.413

`UINavigationController`只有在父视图内部使用 a 时才支持推送动画。您可以将视图控制器嵌入到 IB 中的一个*编辑->嵌入->导航控制器*中，然后隐藏导航栏。这可能会提供您想要的功能。****

# amazon-ec2 - 关于使用 Java Api 的 AWS SES

> ID：15248337
> 
> 赞同：0
> 
> 时间：2013-03-06T13:15:14.303
> 
> 标签：amazon-ec2, amazon-ses, java

我是新的 AWS 用户。

我想通过 java api 使用 aws SES 功能。

当我尝试执行 EC2 java api 的示例 SES 代码时，它给了我以下异常：-

“**状态代码：400，
AWS 服务：AmazonSimpleEmailService，
AWS 请求 ID：191f7c11-8652-11e2-be1c-6dd0975de4df，
AWS 错误代码：RequestExpired ,
AWS 错误消息: Request timestamp: Wed, 06 Mar 2013 01:06:01 GMT expired.
It must be within 300 secs/ of server time.** "

为什么会出现这个异常？
请帮我解决这个问题。
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:19:51.703

[亚马逊论坛](https://forums.aws.amazon.com/)有几个帖子处理这个问题。请看一下[这个特定的线程](https://forums.aws.amazon.com/thread.jspa?messageID=222908&#222908)。
通常，您的服务器可能与 UTC 不同步，并且由于时间戳大不相同，亚马逊服务器不接受您的请求。

# php - codeigniter 检查复选框数组是否存在于数据库中

> ID：15248340
> 
> 赞同：0
> 
> 时间：2013-03-06T13:15:19.387
> 
> 标签：php, codeigniter

我有一个包含复选框数组的表单，如果存在某个复选框值，我正在尝试检查数据库，如果不存在，则将其插入数据库：

这是我当前的代码：

查看页面：

```
<form action="<?php echo site_url('test/post_form')?>" method="post">  
<input type="text" name="full_name">
<input type="checkbox" name="subject[]" value="Algebra" > 
<input type="checkbox" name="subject[]" value="Trigonometry" > 
<input type="checkbox" name="subject[]" value="Geometry" > 
<input type="submit" name="submit"> 
```

控制器页面：

```
public function post_form()
{
$post_data = array(
'subject'=>$this->input->post('subject'),
'full_name'=>$this->input->post('full_name'),
);  

$this->load->model('subject_model');  
if($this->subject_model->check_subject($post_data)===true)  
 {  
  $this->session->set_flashdata('msg', 'Already Exist');  
  redirect('test/error_page');  
 }
else  
{  
  insert to database
}
} 
```

型号页面：

```
public function check_subject($post_data=array())  
{
extract($post_data);  
foreach($post_data as $key=>$value)  
{  
$this->db->select('subject');
$this->db->where('subject',$value['subject']);
$this->db->where('full_name',$value['full_name']);
$this->db->from('subject_table');  
$query=$this->db->get();  

  if ($query->num_rows() > 0)  
  {
      return true;
  } 
  else  
  {
  return true;  
  }

} 
```

示例场景：

*   假设db中存在三角函数，
*   如果我选中所有复选框并提交，它仍然会插入三角函数。
*   但是，如果代数存在于 db 中，
*   我检查了所有的复选框，它说已经存在。
*   看起来只有第一个值正在检查重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:42:40.070

实际上，您的主题是作为数组发布的，因此您可以这样检查

```
public function check_subject($post_data=array())  
{
$val = " '". implode( "', '",$post_data['subject']) ."' " ;

$this->db->select('subject');
$this->db->where(" subject in {$val} ");
$this->db->where('full_name',$value['full_name']);
$this->db->from('subject_table');  
$query=$this->db->get();  

  if ($query->num_rows() > 0)  
  {
    return true;
  } 
  else  
  {
    return false;  
  }

} 
```

检查它我认为它会工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:26:15.110

我认为你必须在单独的数组中跟踪在数据库中找到的主题并返回结果，它可能看起来像你可以将它设置为`True FALSE`组合或任何适合你的东西

```
public function check_subject($post_data=array())  
{
extract($post_data); 
$subjects=array(); 
foreach($post_data as $key=>$value)  
  {  
$this->db->select('subject');
$this->db->where('subject',$value['subject']);
$this->db->where('full_name',$value['full_name']);
$this->db->from('subject_table');  
$query=$this->db->get();  

  if ($query->num_rows() > 0)  
      $subjects[$value['subject']]=true;
  else  
      $subjects[$value['subject']]=FALSE; 
  }
return $subjects;
} 
```

# c++ - boost enable_shared_from_this 特性是否给二进制文件增加了太多的大小？

> ID：15248341
> 
> 赞同：1
> 
> 时间：2013-03-06T13:15:19.833
> 
> 标签：c++, boost

我不知道这个问题是否适合 SO，但我们开始了：

启用 shared_from_this 时，是否会为可执行文件增加太多大小？解决 shared_from_this() 调用是否也需要太多时间？

环顾文档， enable_shared_from_this 是一个只添加两个函数的助手，所以我认为它不应该占用太多额外的大小。

**编辑**这个问题的更合适的标题应该是，它增加了多少尺寸？而不是询问它是否增加了太多的尺寸。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:21:24.070

> 启用 shared_from_this 时，是否会为可执行文件增加太多大小？

在*运行时*，它会将 a 的大小添加`weak_ptr`到每个实例化对象中，在当前版本的 boost 中，它是**2 个指针的大小。**

至于*可执行二进制文件本身*，很难预测更改源代码将如何影响该文件的大小。

> 解决 shared_from_this() 调用是否也需要太多时间？

您应该预计`shared_ptr`从 a构造 a 所需的时间`weak_ptr`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:21:16.297

您可以查看 boost 源文件。它仅添加`mutable weak_ptr<T> weak_this_;`到您的类中，该类本身仅包含指向实例的指针和指向 refcounter 的指针。

# powershell - 无法自动化 Internet Explorer

> ID：15248348
> 
> 赞同：-1
> 
> 时间：2013-03-06T13:15:51.940
> 
> 标签：powershell

我正在尝试将我的凭证放在一个网站上，以自动化我的一些任务。我正在尝试这段代码。什么也没有发生。

```
$Url = "https://srvdcvs05.fiep_pr.br:1311/"
$Ie = New-Object -Com InternetExplorer.Application
$Ie.Navigate( $Url )
$secLink = $Ie.Document.getElementsByTagName('A') | Where-Object {$_.innerText -eq 'Continue to this website (not recommended).'}
$secLink.click()
$Ie.Document.getElementsByType("input") | where { $.Name -eq "user" }.value = "myuser"
$Ie.Document.getElementsByName("input") | where { $.Name -eq "password" }.value = "mypassword"
$loginBtn = $Ie.Document.getElementsById('input') | Where-Object {$_.Type -eq 'button' -and $_.Value -eq 'LoginButton'}
$loginBtn.click() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:17:12.293

感谢重播。

关于它“$_.Property 而不是 $.Property”。打错字了，见谅。

但是..我最初的问题是这个功能：

$secLink = $Ie.Document.getElementsByTagName('A') | Where-Object {$_.innerText -eq '继续浏览本网站（不推荐）。'}

$secLink.click()

不要工作。该网站打开，但点击此消息没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:34:08.920

在不了解页面的情况下很难说。

话虽这么说：两个明显的错误可能是它的原因：

```
# Your code: $Ie.Document.getElementsByType("input") | where { $.Name -eq "user" }.value = "myuser"
($Ie.Document.getElementsByType("input") | where { $_.Name -eq "user" }).value = "myuser"
# Your code: $Ie.Document.getElementsByName("input") | where { $.Name -eq "password" }.value = "mypassword"
($Ie.Document.getElementsByName("input") | where { $_.Name -eq "password" }).value = "mypassword" 
```

所以：访问脚本块的属性没有意义（`{ }.value`）并且`where`需要`$_.Property`而不是`$.Property`.

# complexity-theory - 平均计算最坏情况、最佳情况和平均情况复杂度

> ID：15248351
> 
> 赞同：0
> 
> 时间：2013-03-06T13:16:16.267
> 
> 标签：complexity-theory, pseudocode, mean

以下计算平均值的函数的 (a) 最坏情况、(b) 最佳情况和 (c) 平均情况复杂度是多少

```
n=0
sum=0
input(x)
while x!=-999 do
    n=n+1
    sum=sum+x
    input(x)
end {while}
mean=sum/n 
```

你会如何证明复杂性的合理性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:22:05.533

`-999`你一被发现就停下来。

所以：

*   最好的情况是 O(1) ：你直接找到 -999
*   最坏的情况是 O(n) -n 是`input`- 的大小：你`-999`在最后发现`input`
*   在这种情况下，平均情况是 O(n / 2) = O(n)：你`-999`在中间找到

# java - 在 ZK 中如何在标签中显示 html 内容？

> ID：15248352
> 
> 赞同：1
> 
> 时间：2013-03-06T13:16:16.603
> 
> 标签：java, html, ckeditor, zk

谁能告诉我如何在 ZK 标签的帮助下显示 HTML 内容？就像我有这样的文字

```
<b> this is my test message </b> 
```

然后我必须在页面中用粗体显示这个内容..

**这是我的测试信息**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:24:16.667

看看下面的例子是否对你有帮助..

```
<window id="win" title="Html Demo" border="normal">
    <html><![CDATA[
        <h4>Hi, ${win.title}</h4>
        <p>It is the content of the html component.</p>
    ]]></html>
</window> 
```

在这里，他们在窗口内使用**html**标签来显示带有 html 标签的文本。

# audio - 使用 AudioToolbox 一个接一个地播放 2 个声音

> ID：15248354
> 
> 赞同：0
> 
> 时间：2013-03-06T13:16:22.093
> 
> 标签：audio, button, playback, audiotoolbox

使用 AudioToolbox 按一个按钮后，我会播放此声音。

```
-(void) onButtonPressSound {
    NSString *soundPath = [[NSBundle mainBundle] pathForResource:@"sound" ofType:@"m4a"];
SystemSoundID soundID;
AudioServicesCreateSystemSoundID((__bridge CFURLRef)[NSURL fileURLWithPath: soundPath], &soundID);
AudioServicesPlaySystemSound (soundID);

} 
```

按下此按钮后，如何让它播放 2 种声音而不是一种，一个接一个？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:23:32.723

有两种方法可以做到这一点：第一种：对于像我这样的懒惰的人 :) 取一个一个接一个地播放 2 个声音的声音。另一个：

```
SystemSoundID receiveMessageSound1;
SystemSoundID receiveMessageSound2;
NSString *sendPath1 = [[NSBundle mainBundle] pathForResource:@"Music1" ofType:@"wav"];
            CFURLRef baseURL = (__bridge CFURLRef)[NSURL fileURLWithPath:sendPath];
            AudioServicesCreateSystemSoundID(baseURL, &receiveMessageSound1);
            AudioServicesPlaySystemSound(receiveMessageSound1);
NSString *sendPath2 = [[NSBundle mainBundle] pathForResource:@"Music2" ofType:@"wav"];
            baseURL = (__bridge CFURLRef)[NSURL fileURLWithPath:sendPath2];
            AudioServicesCreateSystemSoundID(baseURL, &receiveMessageSound2);
            AudioServicesPlaySystemSound(receiveMessageSound2); 
```

希望这可以帮助。

# qt4 - QSplashScreen 点击关闭

> ID：15248359
> 
> 赞同：2
> 
> 时间：2013-03-06T13:16:51.320
> 
> 标签：qt4, pyqt4

首先，我将描述我的目标：我想在阻塞模式下通知用户有一些工作正在进行中。

我希望如果我在 QSplashScreen 中禁用点击隐藏，这将满足我的需要。在 C++ 中，它在 mousePressEvent 方法中处理：

```
void QSplashScreen::mousePressEvent(QMouseEvent *)

{
    hide();
} 
```

所以我希望只是覆盖这个方法会抑制隐藏，但我的代码不起作用：

```
from PyQt4 import QtGui, QtCore
import sys
import time

class MySplash(QtGui.QSplashScreen):
    def __init__(self):
        super(MySplash, self).__init__()
        self.setPixmap(QtGui.QPixmap("betting.gif"))

    def mousePressEvent(self, mouse_event):
        print('mousePressEvent', mouse_event)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    splash = MySplash()
    splash.show()
    QtGui.qApp.processEvents()
    print('Here I am')
    splash.showMessage('Here I am')
    time.sleep(2)
    print('Do some work')
    time.sleep(2)
    splash.close() 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T15:51:58.103

我发现的最简单的方法是利用 python 的松散函数指针。

这是我的做法（不必超载）。

```
from PyQt4.QtGui import QApplication, QPixmap, QSplashScreen
import sys

def MyMousePressEvent(event):
    print "I was clicked, and I have an event!"
    print "see its at", event

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    splash_image = QPixmap(":Images/MyImage.png")
    splash = QSplashScreen(splash_image)
    splash.mousePressEvent = MyMousePressEvent
    splash.show()
    ## need to check the for events on a regular interval!
    time.sleep(2)
    app.processEvents()
    print('Here I am')
    splash.showMessage('Here I am')
    time.sleep(2)
    QtGui.qApp.processEvents()
    print('Do some work')
    time.sleep(2)
    QtGui.qApp.processEvents()
    splash.close()
    return app.exec_() 
```

如果您希望单击与另一个对象通信，则将该方法添加到该对象并将其设置为 QSplashScreen.mousePressEvent

```
class MyCommClass(QMainWindow,splashscreen,parent): ## mainwindow used here but it could be whatever

    def __init__(self,splashscreen = None,parent = None):  ## Create Mainwindow Obj
        QMainWindow.__init__(self,parent) ## Call base class CTOR
        if(splashscreen is not None):
            splashscreen.mousePressEvent = self.SplashMousePressEvent
        ##instead of splash.mousePressEvent = MyMousePressEvent

    def SplashMousePressEvent(self,event):
        print "Splash screen was clicked!"
        ## self.DoWhatEverIWant() 
```

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:13:19.313

我最初的问题的答案很简单：`mousePressEvent`被声明为受保护的——这就是为什么不能覆盖它的原因！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:39:06.927

我仍然不知道为什么覆盖 mousePressEvent 方法不起作用（我仍然感兴趣）但我以其他方式解决了我的问题：

```
class BusyDialog(QtGui.QWidget):
    def __init__(self, parent = None):
        super(BusyDialog, self).__init__(parent)
        self.show()

class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent = None):
        super(MainWindow, self).__init__(parent)
        self.button = QtGui.QPushButton('Click me', self)
        self.button.clicked.connect(self.button_clicked)

    def button_clicked(self):
        print('clicked')
        dialog = BusyDialog()
        QtGui.qApp.processEvents()
        time.sleep(2)
        print('Here I am')
        time.sleep(2)
        print('Do some work')
        time.sleep(2)
        dialog.close()

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    main = MainWindow()
    main.show()
    sys.exit(app.exec_()) 
```

# ajax - Django 和骨干网 - 如何编写一个视图，该视图支持通过 ajax 和非 ajax 加载元素以禁用 javascript

> ID：15248367
> 
> 赞同：0
> 
> 时间：2013-03-06T13:17:05.503
> 
> 标签：ajax, django, backbone.js

我一直想知道如何开发一个 django 视图，它支持通过 json 加载对象，并且对于阻塞 js 的客户端，它应该支持非 js 后备 - 使用像 ObjectName.objects.filter() 这样的查询集

对于支持 json 动态数据加载以及不使用 json 获取对象的此类视图，最好的方法是什么？或者只是我的方法是完全错误的，我应该获得更多关于如何编写像[http://www.usatoday.com这样的 ajax 动态网站的信息](http://www.usatoday.com)

```
def index(request):
    q = Page.objects.all()
    return TemplateResponse(request, "orders/order_index.html",
                                {'object_list': q,},) 
```

如果您需要与我的问题相关的任何其他数据，请直接问我。

更新 1 - 示例：

索引呈现您进入网站时看到的初始页面 (example.com)

```
def index(request):
    q = Entry.objects.all().order_by('-id')
    return TemplateResponse(request, 'index.html', {'object_list': q, })

def detail(request, slug):
    q = get_object_or_404(Entry.objects.all(), slug=slug)
    return TemplateResponse(request, 'blog/templates/blog_detail.html', {'object': q, }) 
```

索引.html

```
{% extends "base.html" %}
{% load webdesign %}
{% load markup %}
{% load humanize %}
{% load endless %}
{% load i18n %}

{% block content %}
    {% paginate object_list %}
    {% for object in object_list %}
        <article>

            <h2>{{ object.title }}</h2>

            <div>

            </div>
            <hr>
            <p>
                {{ object.get_short_text|markdown }}
            </p>

            <div class="clearfix"></div>
            <div class="row">
                <div class="large-6 columns">
                    <span class="metadata"><i class="foundicon-clock"></i> {{ object.date_added|date:"j E Y" }} ({{ object.date_added|naturaltime }})</span>
                </div>
            </div>
            <a class="button expand read_more" href="{{ object.get_absolute_url }}">{% trans "Read more" %}</a>
            <hr>

        </article>
    {% endfor %}
    {% show_pages %}
{% endblock %} 
```

![在此处输入图像描述](../Images/ff7eb010b206ad8f0c3c67a389dd3582.png)

```
non ajax
[16/Mar/2013 15:16:52] "GET / HTTP/1.1" 200 2275
[16/Mar/2013 15:16:52] "GET /site_media/static/sass/style.css HTTP/1.1" 304 0
[16/Mar/2013 15:16:52] "GET /site_media/static/foundicons/foundation_icons_general/stylesheets/general_foundicons.css HTTP/1.1" 304 0
[16/Mar/2013 15:16:52] "GET /site_media/static/foundation/js/vendor/custom.modernizr.js HTTP/1.1" 304 0
[16/Mar/2013 15:16:52] "GET /site_media/static/foundation/js/vendor/zepto.js HTTP/1.1" 304 0
[16/Mar/2013 15:16:52] "GET /site_media/static/foundation/js/foundation.min.js HTTP/1.1" 304 0
[16/Mar/2013 15:16:52] "GET /site_media/static/img/logo.png HTTP/1.1" 304 0
[16/Mar/2013 15:16:52] "GET /site_media/static/img/navy_blue_min.png HTTP/1.1" 304 0
[16/Mar/2013 15:16:52] "GET /site_media/static/img/sub.png HTTP/1.1" 304 0
[16/Mar/2013 15:16:52] "GET /site_media/static/foundicons/foundation_icons_general/fonts/general_foundicons.woff HTTP/1.1" 304 0
[16/Mar/2013 15:16:52] "GET / HTTP/1.1" 200 14
index
ajax 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:46:46.317

这是一个简单的示例，说明如何利用`request.is_ajax()`它来返回不同类型的响应：

```
import json

from django.http import HttpResponse
from django.shortcuts import render

def your_view(request):
    data = {'foo': 'bar'}
    if request.is_ajax():
        return HttpResponse(json.dumps(data), mimetype='application/json')
    else:
        return render(request, 'some-template.html', data) 
```

# ruby-on-rails - Rails 生产 404,500 个等错误页面，其布局与其余网页相同

> ID：15248370
> 
> 赞同：1
> 
> 时间：2013-03-06T13:17:06.387
> 
> 标签：ruby-on-rails

我如何在生产模式下呈现我的错误页面，以便它们与其余页面的布局相同？例如，不是 404 作为标准

```
<h1>The page you were looking for doesn't exist.</h1>
    <p>You may have mistyped the address or the page may have moved.</p> 
```

没有任何布局，但我的布局中的这条消息（称为application.html.haml）？

这是真的吗？我需要写什么以及在哪里写？我用谷歌搜索，但对于自己的布局没有找到好的布局......

我使用 rails 3.2.8，ruby 1.9.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:01:40.090

一种解决方案是：

```
# In config/application.rb
config.exceptions_app = self.routes

# In routes
match "/404", to: "errors#not_found"
match "/500", to: "errors#server_error"

# app/controllers/errors_controller.rb

class ErrorsController < ApplicationController
  # Inherits layout from ApplicationController 

  def not_found
  end

  def server_error
  end
end

# app/views/errors/not_found.haml
%h1 Didn't find nothing!

# app/views/errors/server_error.haml
%h1 FUBAR! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:21:15.853

我使用这种方法，你应该在 Rails 3 中找到相同的方法

[http://henrik.nyh.se/2008/07/rails-404/](http://henrik.nyh.se/2008/07/rails-404/)

# iphone - 我想要 5 分钟 300kb 的音频文件大小

> ID：15248372
> 
> 赞同：1
> 
> 时间：2013-03-06T13:17:07.453
> 
> 标签：iphone, ios, objective-c, avaudioplayer, audio-recording

我附上了我为记录数据而实施的内容，它以`.wav`甲酸盐形式保存，但我的问题是文件占用了太多的大小（即 10 秒占用了 86kb），我想要 5 分钟 300kb 的大小，我试过了这么多方法，你能帮帮我吗？

```
- (IBAction) startRecording
{
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    NSError *err = nil;
    [audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
    if(err){
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }
    [audioSession setActive:YES error:&err];
    err = nil;
    if(err){
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }

recordSetting = [[NSMutableDictionary alloc] init];
    [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatLinearPCM] forKey:AVFormatIDKey];
[recordSetting setValue:[NSNumber numberWithFloat:8000.0] forKey:AVSampleRateKey];
[recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];
    [recordSetting setValue:[NSNumber numberWithInt:8] forKey:AVLinearPCMBitDepthKey];
    [recordSetting setValue:[NSNumber numberWithBool:NX_BigEndian == NXHostByteOrder()] forKey:AVLinearPCMIsBigEndianKey];
    [recordSetting setValue:[NSNumber numberWithBool:0] forKey:AVLinearPCMIsFloatKey];
recorderFilePath = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"abc.wav"] ;

    NSLog(@"recorderFilePath: %@",recorderFilePath);

    NSURL *url = [NSURL fileURLWithPath:recorderFilePath];

    err = nil;

    NSData *audioData = [NSData dataWithContentsOfFile:[url path] options: 0 error:&err];
    if(audioData)
    {
        NSFileManager *fm = [NSFileManager defaultManager];
        [fm removeItemAtPath:[url path] error:&err];
    }

    err = nil;
    recorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSetting error:&err];
    if(!recorder){
        NSLog(@"recorder: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        UIAlertView *alert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: [err localizedDescription]
                                  delegate: nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [alert show];
        }

    //prepare to record
    [recorder setDelegate:self];
    [recorder prepareToRecord];
    recorder.meteringEnabled = YES;

    BOOL audioHWAvailable = audioSession.inputIsAvailable;
    if (! audioHWAvailable) {
        UIAlertView *cantRecordAlert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: @"Audio input hardware not available"
                                  delegate: nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [cantRecordAlert show];

        return;
    }

    [recorder record];
 currentTimeUpdateTimer = [NSTimer scheduledTimerWithTimeInterval:0.5
                                                              target:self selector:@selector(updateAudioDisplay)
                                                            userInfo:NULL repeats:YES];

} 
```

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:36:45.797

将格式 ID 更改为**kAudioFormatAppleIMA4**或**kAudioFormatMPEG4AAC**。这些将产生更小的音频文件。评论中提到的 WAV 是一种未压缩的音频格式。所以音频文件会很大。

# wordpress - 如何使用 Screencast Video Embedder 在一个页面中添加多个视频？

> ID：15248376
> 
> 赞同：0
> 
> 时间：2013-03-06T13:17:38.923
> 
> 标签：wordpress

我是 WordPress 新手。我想知道如何使用“Screencast Video Embedder”插件在单个页面中使用多个截屏视频。

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:30:09.660

如果您使用的是[Screencast.com Video Embedder](http://wordpress.org/extend/plugins/screencastcom-video-embedder/)。

看起来该插件使用短代码`[screencast url="SCREENCAST SHORT URL" width="WIDTH" height="HEIGHT"]`，因此只需使用不同的截屏网址多次将其添加到您的页面。

# c - 来自 C 编程和系统命令调用的文件系统操作

> ID：15248379
> 
> 赞同：1
> 
> 时间：2013-03-06T13:17:40.667
> 
> 标签：c, filesystems

我需要像: `ls -r`, `mv`, `copy`, `delete`,这样的操作`rm -rf`来从 C 程序中调用。什么是最好的方法？通过调用`system()`调用或自己编写这些功能来调用这些命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:35:57.157

我会重新编码它们，因为我有兴趣学习如何做到这一点。但这比通过`system(3)`. 您还可以`rename(2)`根据需要使用和其他系统调用。

因此，如果您想快速完成，请使用`system(3)`; 否则，玩得开心:)

**编辑：**

我的建议：首先使用`system(3)`or `exec*(3)`（这样您就可以从已经实现的功能中受益，例如`-r`，从您使用的二进制文件中受益），当您完成程序的其余部分时，您可以享受改进它的乐趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:31:21.553

`execv`应该管用。

```
execv("ls", "-r", NULL); 
```

它也应该适用于其他命令（虽然未经测试）

[关联](http://support.sas.com/documentation/onlinedoc/sasc/doc/lr2/execv.htm)

# ios - 如何将 URL 文件“流式传输”转换为 Apple HLs 格式？

> ID：15248380
> 
> 赞同：1
> 
> 时间：2013-03-06T13:17:42.397
> 
> 标签：ios, objective-c, html, azure, http-live-streaming

在

*   iOS 应用
*   用于直播

我收到来自服务器的响应

像这样，（你可以检查）

**[http://4a75a0cce3694e29bc670b3d574fec92.cloudapp.net/push.isml/manifest](http://4a75a0cce3694e29bc670b3d574fec92.cloudapp.net/push.isml/manifest)**

**这是平滑流文件。**

如何在我的 ios 应用程序中播放此文件。

1.  是否有任何运行时转换器可以将此文件转换为 Apple HLS ？

2.  任何播放器* *（流畅流媒体）* * 喜欢

    *   适用于 iOS 的 OSMF 插件
    *   HTML5 播放器
    *   适用于 iOS 的 Silverlight 插件

实际上 ：

*   实际上，我们对 Azure 框架的尝试并不多。我们设置了 IIS 服务器并获得了直播。
*   在 Web 视图中通过 HTML5 视频标签播放流。通过以下链接 [http://www.hanselman.com/blog/CommentView.aspx?guid=86968cd5-feeb-47f2-b02e-1eb4fa556379#commentstart](http://www.hanselman.com/blog/CommentView.aspx?guid=86968cd5-feeb-47f2-b02e-1eb4fa556379#commentstart)

我们可以在我们的 iOS 设备上播放直播。

如果我可以配置 Windows AZure 框架来做同样的事情，我仍然很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:03:48.503

您可以使用 Windows Azure 媒体服务将 SmoothStreaming 媒体内容转换为 Apple HLS 内容。您可以使用[管理门户](https://manage.windowsazure.com/#Workspaces/MediaServicesExtension/MediaService)上传媒体资产，然后使用预设的“在 iOS 设备和 PC/MAC 上播放”对其进行编码，或者在运行时将 RE​​ST Api 用于 Windows Azure 媒体服务。

借助 REST API，您可以利用 Windows Media Packager 为 HLS 编码平滑流媒体内容。在此处查找[该任务的示例配置](http://msdn.microsoft.com/en-us/library/windowsazure/hh973635.aspx)。

# javascript - JSFiddle API 示例已损坏

> ID：15248383
> 
> 赞同：2
> 
> 时间：2013-03-06T13:17:46.843
> 
> 标签：javascript, highcharts

来自 API 文档： [http ://api.highcharts.com/highcharts#chart.alignTicks](http://api.highcharts.com/highcharts#chart.alignTicks)

单击对齐刻度线示例：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/chart/alignticks-true/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/chart/alignticks-true/)

不渲染图表。JS控制台出现如下错误：

```
Uncaught TypeError: Object [object Object] has no method 'highcharts' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:24:12.760

问题是.highchart。利用

```
var chart = new Highcharts.Chart({
    chart: {
        //alignTicks: false,
        type: 'line',
        renderTo: 'container'
    },
    ...
} 
```

问题是 HighCharts js 文件更新。在 highcharts 官方站点演示也不起作用。

[演示](http://jsfiddle.net/alirizaadiyahsi_44/LLExL/1107/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T16:35:58.820

.highcharts 机制是通过 JQuery 插件在 Highcharts 3.0 中引入的，如[Highcharts 3.0 发布公告](http://www.highcharts.com/component/content/article/2-news/54-highcharts-3-0-released)中所述。大概有问题的 JSFiddle 页面当时不工作包括旧版本的 Highcharts，直到我弄清楚为什么我自己的图表不工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T13:27:56.000

我更新了他们的[jsfiddle 图表](http://jsfiddle.net/wsdookadr/HzJUt/1/)。

现在可以了。问题在于，`highcharts`作为 jQuery 对象的方法并没有真正存在。

# javascript - jquery自动完成不适用于动态添加的输入框

> ID：15248384
> 
> 赞同：2
> 
> 时间：2013-03-06T13:17:48.257
> 
> 标签：javascript, jquery, html, css, google-maps-api-3

这是我正在尝试做的事情。我想将 jquery 自动完成添加到所有输入框中。最初我只有 2 个盒子，用户可以动态添加多个盒子。自动完成在前两个框中有效，但在动态添加的按钮中失败。

她的代码小提琴：http: [//jsfiddle.net/HG2hP/](http://jsfiddle.net/HG2hP/)

代码：

HTML：

```
<!doctype html>
<html>

    <head>
        <title>TakeMeHome</title>
        <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> -->
        <!--<script type="text/javascript" src="js/jquery-1.9.0.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.10.0.custom.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.10.0.custom.min.js"></script>-->
         <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
         <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
         <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
         <script type="text/javascript" src="js/app.js"></script>
         <link type="text/css" rel="stylesheet" href="css/design.css"/> 

    </head>

    <body>
        <center>
                Your Place:<input class="address" id="source" type="text"/><br/>
                <div id= "div1">Friend1:<input class="address" id="friend1" type="text"/></div><br/>
                <pre>
                <div id="button">Add!</div> <div id="button2">Remove</div></br>
            </pre>
            <div id="sumbit_button">GO!</div>
            <div id="map" style = "width: 500px; height: 500px"></div>

        </center>

    </body>

</html> 
```

JS

```
$(document).ready(function() {

var geocoder;
var map;
var marker;
var friends_cnt = 1;
var friends = [];
var distance = [];

$('#button').click(function() {
    if (friends_cnt < 11) {
        $('<div  id = div' + (friends_cnt + 1) + '>Friend' + (friends_cnt + 1) + ':<input type="text" class="address"  id="friend' + (friends_cnt + 1) + '"/></div>').insertAfter('#div' + friends_cnt);
        friends_cnt++;
    } else {
        console.log("Limit reached");
    }
});

$('#button2').click(function() {
    if (friends_cnt > 1) {
        $('#friend' + friends_cnt).remove();
        $('#div' + friends_cnt).remove();
        friends_cnt--;
    }
});

geocoder = new google.maps.Geocoder();

$(function() {
    $(".address").autocomplete({
        source : function(request, response) {
            geocoder.geocode({
                'address' : request.term
            }, function(results, status) {
                response($.map(results, function(item) {
                    return {
                        label : item.formatted_address,
                        value : item.formatted_address,
                        latitude : item.geometry.location.lat(),
                        longitude : item.geometry.location.lng()
                    }
                }));
            })
        },
    });
});

$('#sumbit_button').on("click", function() {
    console.log("button clicked");
    var a = [];
    a.push($("#source").val());
    for ( i = 1; i <= friends_cnt; i++) {
        a.push($("#friend" + i).val());
    }

    console.log("a :");
    console.log(a);

    var gurl = "http://maps.googleapis.com/maps/api/distancematrix/json";

    console.log("gurl :" + gurl);
    $.ajax({
        url : gurl,
        data : {
            origins : a.join('|').replace(/ /g, '+'),
            destinations : a.join('|').replace(/ /g, '+'),
            sensor : false
        },
        success : function(response) {
            console.log("response type :");
            console.log( typeof response);
            if ( typeof response == "string") {
                response = JSON.parse(response);
            }
            var rows = response.rows;
            for (var i = 0; i < rows.length; i++) {
                distance[i] = [];
                for (var j = 0; j < rows[i].elements.length; j++) {
                    distance[i][j] = rows[i].elements[j].distance.value;
                }
            }
        }
    });
    console.log("No.of friends is " + friends_cnt);
    console.log(distance);
}); 
```

});

CSS

```
input {
margin: 10px 4px;
}

#button, #button2 {

    width: 70%;
    margin: 0 auto;
}

.ui-autocomplete {
    background-color: white;
    width: 300px;
    border: 1px solid #cfcfcf;
    list-style-type: none;
    padding-left: 0px;
}

.ui-helper-hidden-accessible {
    display: none;
} 
```

当我使用类概念来添加自动完成时，我应该得到结果。

你能告诉我我错在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:24:02.953

在您的点击事件中：

```
$('#button').click(function ()... 
```

您应该在新添加的输入字段上设置自动完成，例如：

```
 $('#button').click(function () {
        if (friends_cnt < 11) {

        $('<div  id = div'+(friends_cnt+1)+'>Friend' + (friends_cnt+1) + ':<input type="text" class="address"  id="friend' + (friends_cnt+1) + '"/></div>').insertAfter('#div'+friends_cnt);

       $('div#div'+(friends_cnt+1)).autocomplete(...);

       friends_cnt++;

    }

    else {
        console.log("Limit reached");
    }

}); 
```

由于您的自动完成仅附加到当前 DOM，而不是动态添加的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:33:28.687

you must either re apply the auto complete to each element like Kapo suggested

```
 $('div#div'+(friends_cnt+1)).autocomplete(...); 
```

or use liveuery (see [this thread](https://stackoverflow.com/questions/3840149/jquery-live-event-for-added-dom-elements) for more details on that)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:42:52.903

当我得到答案时，代码中的这种更改对我有用：在`$('#button').click(function () {`函数中添加这个

```
$(function() {
   $("#friend"+(friends_cnt+1)).autocomplete({
      source: function(request, response) {  . .. . . 
```

这将在创建时为所有框添加自动完成功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:33:04.297

On pageload your autocomplete attaches to fields with class .address, however on page load you do not have any .address field, so nothing gets attached.

You need to run

```
$(".address").autocomplete({ 
```

Right after you add your new field to the dom, or better still, make the input an object, and you can attach events straight to it like:

```
$input = $('input')
            .attr('type', 'text')
            .attr('class', 'address')
            .attr('id', 'friend')
            .autocomplete({ etc 
```

# c# - COMException 远程连接到 Windows 8\Windows 2012 任务计划程序

> ID：15248388
> 
> 赞同：3
> 
> 时间：2013-03-06T13:17:55.887
> 
> 标签：c#, .net, windows-8, scheduled-tasks, windows-server-2012

我正在使用在 Windows Server 2008 系统上运行的 TaskService（COM 任务调度程序 1.1 类型库的互操作）类远程连接到另一个 Windows 服务器系统上的任务调度程序。相关代码片段如下：

```
var ts = new TaskService(IP address, userId, domain, password);
foreach (Task task in ts.RootFolder.Tasks)
{
    Console.Writeline(task.Definition.Principal.UserId);
} 
```

当目标是 Windows 2008 和 Windows 7 时，这很有效，但是对于 Windows server 2012 和 Windows 8，我得到以下 COM 异常：

“任务 XML 包含格式不正确或超出范围的值。（HRESULT 异常：0x80041318）”

我检查了上面返回的 Task 的 Xml 属性。我看到的唯一区别是 Windows 2012 的 Task version=\"1.4\"，但远程系统为 Windows 2008 或 Windows 7 时 Task version=\"1.3\" 或更低。"

属性访问器 task.Definition 抛出异常：

```
System.Runtime.InteropServices.COMException (0x80041318): The task XML contains
a value which is incorrectly formatted or out of range. (Exception from HRESULT:
 0x80041318)
   at TaskScheduler.IRegisteredTask.get_Definition() 
```

ITaskSchedulerService 接口使用 XML 来定义任务。在 Windows 8 和 Windows 2012 中，他们使用新的任务计划程序远程协议（1.4 版），它与使用 1.2-1.3 版的最旧的 Windows 操作系统不兼容。

有没有办法从 Windows 2008 系统远程定位 Win 2012 或 Win8 任务计划程序？

# jquery - 在循环中选择一个字段？

> ID：15248391
> 
> 赞同：-1
> 
> 时间：2013-03-06T13:18:04.267
> 
> 标签：jquery

```
var listItems = $("#questions .question");
    listItems.each(function(idx, li) {

        //get the question

    }); 
```

上面选择了每个 li，在每个 li 中我都有一个 id 为“questionField”的输入。我该如何选择它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:21:47.733

```
var listItems = $("#questions .question");
listItems.each(function(idx, li) {

    //get the question
    $qf = li.find('#questionField');

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:20:08.930

```
var listItems = $("#questions .question");
listItems.each(function(idx, li) {

     $(li).find("#questionField").text(); // return the question text

}); 
```

编辑：它也取决于**li**类型。如果是 jquery 对象或者简单的 dom。请添加更多详细信息

# clickonce - 手动更新 ClickOnce 应用程序

> ID：15248392
> 
> 赞同：1
> 
> 时间：2013-03-06T13:18:10.100
> 
> 标签：clickonce

前段时间我发布了一个使用 ClickOnce 安装程序的桌面应用程序。我将安装程序文件打包成一个 ZIP 文件，并将其上传到第三方网站，人们可以从那里下载它。它被配置为*不*自动检查更新。我现在想发布此应用程序的更新，因此我尝试再次通过 Visual Studio 的发布向导发布应用程序并运行新的安装程序。我现在收到无法运行安装程序的错误，因为该应用程序以前是从其他位置安装的。将我的安装程序放在之前的位置（我从安装程序提供给您的某个日志文件中检索到它）使其再次工作。

这是我不希望对下载新版本应用程序的人实施的限制。我有没有办法让他们下载更新的安装程序并从硬盘上的任何位置运行它来更新应用程序？

我意识到我可能以完全错误的方式使用了 ClickOnce，但是如果没有办法做我想做的事，你建议什么是更新我的应用程序的最佳行动方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-31T04:04:28.910

使用 //localhost/CD/ 作为您的更新位置。这将告诉 ClickOnce 设置在用户的本地“当前目录”中查找最新的清单。清单中的更改表明有更新。

在 Visual Studio 中，它位于项目属性 > 发布 > 更新...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-13T11:26:16.433

您可以将更新后的应用程序发布到新位置，然后发布一个完全不同的应用程序，要求用户卸载当前安装的应用程序并重新安装新的应用程序。

“完全不同”的应用程序将发布到当前更新文件夹。这样，您的用户将获得有关如何获取新发布的应用程序的说明。

# css - Webkit 渲染错误

> ID：15248396
> 
> 赞同：0
> 
> 时间：2013-03-06T13:18:15.867
> 
> 标签：css, google-chrome, webkit, css-transitions

所以我在悬停时得到了这种过渡缩放，但有时会出现这些奇怪的错误。 [http://i.imgur.com/us1iXgF.png](http://i.imgur.com/us1iXgF.png)
我读过一些关于放置 z-index 值的内容会修复它，但它没有。这出现在 Chrome 中。在Canary中查看时，没有出现错误，但是有人有临时解决方案吗？

```
.menu-item {
    transition: transform ease .25s;
}

.menu-item-wrap:hover .menu-item {
    transform: scale(1.1);
} 
```

# android - 安卓定时器？

> ID：15248398
> 
> 赞同：0
> 
> 时间：2013-03-06T13:18:25.557
> 
> 标签：android

有人可以帮我吗？我正在实现一个读取卡详细信息并返回字符串的刷卡应用程序。我想实现一个计时器来检查是否返回了这个字符串。有人可以告诉我如何找到调用 oncreate 方法后字符串是否包含值。我基本上想知道如何检查字符串是否包含某个时间（20 秒）内的值。如果在 20 秒内没有值被退回，我将显示一个弹出窗口.我是android编程的新手，任何帮助将不胜感激。以下是我在 oncreate 方法中尝试做的事情。

```
Timer timer = new Timer();
        TimerTask task = new TimerTask() {
            @Override
            public void run() {
               if(result.length()==0)
{
Log.e("TAG","No value received");
}
                }
        }
    };
    timer.schedule(task, 20000,1000); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:20:13.903

我建议使用[`Handler`](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29).

```
Handler h = new Handler();
h.postDelayed(new Runnable() {
 void run() {
   // your job to be done in delay seconds
 }, delay); 
```

# database - 按 T FS 用户故事/更改管理架构更改

> ID：15248399
> 
> 赞同：1
> 
> 时间：2013-03-06T13:18:28.523
> 
> 标签：database, tfs, schema, release-management

我们有多个功能需要开发，但管理层决定哪些功能进入 Live.. 这要求我们为每个用户故事/更改都有一个脚本。但是如何将数据库模式更改链接到 TFS 中的用户故事？

我们现在拥有的：

带有用户故事/任务 CC.net Buildserver 的 TFS

我已经为 SSDT 做过研究，看起来很棒！但是我怎样才能将它与 TFS 联系起来？

谢谢阅读，

安迪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:04:11.440

只要您的数据库脚本（或 SSDT 项目，如果您选择移动该方向）被检入到 TFS 版本控制中，`changesets`和`work items`. 在签入代码之前查看未决更改时，可以选择关联工作项（即用户故事或任务）。如果您使用的是 Visual Studio 2012，这就是关联工作项的样子：

![待定更改窗口上的相关工作项](../Images/f565fbfe96eb131ccd6b280b00514720.png)

如果您通过以下方式签入，这就是它的样子`Windows Explorer`：

![通过 Windows 资源管理器签入时关联工作项](../Images/1fd8536259f3ebe8c07e78c1f256e346.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:55:26.997

对彼此独立的系统进行更改可能会带来很多复杂性。我发现的最佳解决方案涉及创建“功能切换”，以便您在部署后启用或禁用功能。看看持续交付作为一个主题。Jez Humble 就这个主题写了一本很棒的[书](https://rads.stackoverflow.com/amzn/click/com/0321601912)。

在某些情况下，数据库架构更改可能比仅启用或禁用某个功能更复杂。我建议使用扩展/收缩模型。您可以提前将任何新结构添加到数据库中，并以非破坏性的方式将其部署到生产中。然后，当您启用依赖于该结构的功能时，它就已经存在了。如果您需要在删除某些内容后清理数据库模式，那么您可以使用其他软件更改进行带外“合同”循环，以减少测试的表面积。

# android - 电影上的彩色污渍，Droid 3

> ID：15248402
> 
> 赞同：0
> 
> 时间：2013-03-06T13:18:32.070
> 
> 标签：android, movie

我一直在 Droid 3 上创建一个录制电影的应用程序，不幸的是我有一个问题。当我用我的应用程序播放在我的 Droid 上录制的电影时，电影上有彩色污渍： 电影[上的彩色污渍 http://img41.imageshack.us/img41/4011/screenrwx.jpg](http://img41.imageshack.us/img41/4011/screenrwx.jpg)

但是，通常这些污渍主要是绿色，但在使用 Print Screen 后会变成橙色。这个问题对我来说很奇怪，因为我的应用程序在我的另外两部手机（三星和摩托罗拉）上录制电影没有问题。更重要的是，我注意到Android Market上的一堆应用程序，它们是电影录像机，和我的应用程序有同样的问题。但是，有一个名为 DailyRoads Voyager 的应用程序可以在我的 Droid 3 上正常运行，并且本机摄像头也可以。所以问题是——为什么会出现那些五颜六色的污渍？

如果您需要更多信息，这是一个下载 *.apk 文件的链接，以便您检查我的应用程序有什么问题：[http](http://www.speedyshare.com/vyEzB/Projekt.zip) ://www.speedyshare.com/vyEzB/Projekt.zip 。录制的电影以“videooutput.mp4”的形式保存在 sdcard 上。提前感谢您的帮助。

# javascript - 如何将 Javascript 字符串转换为 SQL LongText

> ID：15248404
> 
> 赞同：1
> 
> 时间：2013-03-06T13:18:35.360
> 
> 标签：javascript, sql, string, longtext

我`LongText`在 SQL 中的一列中面临一个小时左右的问题。我目前正在做一个网络项目，在某个时候我们有一个搜索表单，允许用户搜索多个字段。由于客户的用户被迫使用 IE 9，我们不得不创建一个 javascript... 脚本来解析整个表单，并且只获取所需的内容，以免超过 IE 的 2k 字符限制。

到目前为止一切顺利，脚本运行良好，直到我们添加了一个`textarea`代表`LongText`数据库中的列的字段。问题似乎来自 SQL 不会将`String`SQL 语句中的简单语句作为 LongText 的事实。

这是查询的样子：

```
SELECT * FROM SONORA.CF_CPR_CASE WHERE CASEFOLDERID != 2 
and CMF_VLM_APPLICATION like '%CPR%' and CPR_DESCRIPTION='rererere'
and CMF_TYPE_CASE_FK like '%LC_130125_074927_000001_60%' 
```

但我得到这个错误：

```
EJBException:; nested exception is: javax.ejb.EJBException: The data types ntext
and varchar are incompatible in the equal to operator.S_EXCP(204); nested
exception is: javax.ejb.EJBException: The data types ntext and varchar
are incompatible in the equal to operator.S_EXCP(204)

Found in FmsQuery: SELECT * FROM {{DBTABLEPREFIX}}CF_CPR_CASE WHERE
CASEFOLDERID != 2 and CMF_VLM_APPLICATION like '%CPR%' and 
CPR_DESCRIPTION='ztztztztz' and CMF_TYPE_CASE_FK like 
'%LC_130125_074927_000001_60%' 
```

我们正在使用 CASE360，它不太为人所知，但仍然无关紧要，我们正在通过 javascript 构建 SQL 语句的“where 子句”，然后将其发送到 CASE360 处理器，该处理器将接受所有这些并执行查询。这部分工作正常，只是 LongText 列让我很难过。

如果你们知道这个 SQL 查询应该是什么样子才能被成功解释，那么我会非常高兴！

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:28:46.930

您可以尝试`CAST`在列上使用 a `ntext`。我不清楚上面的错误是哪一列。例如，假设它是`CPR_DESCRIPTION`列：

```
SELECT *
FROM SONORA.CF_CPR_CASE
WHERE CASEFOLDERID != 2 
  and CMF_VLM_APPLICATION like '%CPR%'
  and CAST(CPR_DESCRIPTION as varchar(2000)) ='rererere'
  and CMF_TYPE_CASE_FK like '%LC_130125_074927_000001_60%'
; 
```

请记住，您需要为演员选择适当大`varchar`的尺寸，即使使用最大尺寸，也有可能丢失数据。

# java - Classloader 如何确定它可以加载哪些类？

> ID：15248405
> 
> 赞同：4
> 
> 时间：2013-03-06T13:18:41.123
> 
> 标签：java, classloader

我正在阅读 Java 中的类加载。

## 动机

假设我们有一个看起来像这样的类加载器层次结构，我知道加载的类`First`不能被加载的类直接访问`Second`（反之亦然）。

```
 Bootstrap
     |
   System
     |
   Common
   /    \
First Second 
```

我也知道类加载器会检查其父类加载器是否可以加载该类，如果是这种情况，则将加载委托给其父类。

## 问题

类加载器如何实际确定它们是否可以加载某个给定的类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T13:30:29.953

这取决于类加载器的实现。但是 ClassLoader 可以加载的所有类都由[ClassLoader.findClass(String)检索](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#findClass%28java.lang.String%29)

有许多实现，但最常见的是[URLClassLoader](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)，它从目录和 jar 文件加载类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:24:08.593

类加载器检查路径变量中的所有类*（java 类文件） 。*[`CLASSPATH`](http://en.wikipedia.org/wiki/Classpath_%28Java%29)如果在那里找到您的课程，则它存在，否则不存在。

因此，实际上，**您的`/src`目录和所有子目录（=packages）都会被扫描。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:31:57.317

类加载器将请求的类名转换为文件名，然后尝试从文件系统中找到该名称的“类文件”。正如@poitroae 所指出的，它使用 CLASSPATH 变量（如果已设置）作为起点。大多数 IDE 等都将其扩展为包含项目的工作目录。

# objective-c - Xcode 认为由于 if/else 语句中的返回，控制可能会到达非 void 函数的末尾

> ID：15248406
> 
> 赞同：4
> 
> 时间：2013-03-06T13:18:44.377
> 
> 标签：objective-c, if-statement, return

这是一个简单的问题：为什么以下代码会导致“控件可能到达非无效函数结束”警告？在什么情况下两个 return 语句之一不会被命中？`return`将第二条语句放在`else`块之外会是更标准的编码实践吗？这确实使警告静音，但我很好奇它为什么存在。

```
- (CGFloat) tableView: (UITableView *) tableView heightForRowAtIndexPath: (NSIndexPath *) indexPath
{
    NSString *lineToFit = [[self.fetchedResultsController objectAtIndexPath: indexPath] line];
    NSString *actorToFit = [[self.fetchedResultsController objectAtIndexPath: indexPath] actor];
    CGSize lineSize = [lineToFit sizeWithFont: [UIFont boldSystemFontOfSize: 12.0f] constrainedToSize: CGSizeMake(320, 800)];
    CGSize actorSize = [actorToFit sizeWithFont: [UIFont boldSystemFontOfSize: 12.0f] constrainedToSize: CGSizeMake(320, 800)];

    if (shouldDisplayExtra) {
        kExtraCellType cellType = [self cellIsGoingToContainExtraView];
        if (cellType != kExtraCellTypeNone) {
            [cellsToContainExtra setValue: [NSNumber numberWithInt: cellType] forKey: lineIDString];
            return lineSize.height + actorSize.height + 200;
        }
    } else {
        // Return the line height, actor height, plus a buffer.
        return lineSize.height + actorSize.height;
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T13:25:42.013

您确实有一个无法返回的条件：

如果`shouldDisplayExtra`存在，`cellType == kExtraCellTypeNone`则没有定义返回...

您应该在条件中添加一个 else 块：

```
 if (cellType != kExtraCellTypeNone) {
        [cellsToContainExtra setValue: [NSNumber numberWithInt: cellType] forKey: lineIDString];
        return lineSize.height + actorSize.height + 200;
    } else {
       // return something here
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-09T18:50:55.103

朋友很简单，如果我们声明 int 类型的函数，并且在 if,for..etc 语句中我们返回一个值，那么它会显示这个警告 bcz 如果不满足上述任何一个条件，那么它将返回什么，所以我们应该在结尾或 else 块中返回任何值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-01T16:46:50.167

返回零；为我工作。

```
-(UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section 
```

{

```
if(tableViewObj == tableView) //here u can make decision
{

UIView *footerView=[[UIView alloc]initWithFrame:CGRectMake(self.view.frame.origin.x,self.view.frame.origin.y, 320, 40)];

    UIButton *addcharity=[UIButton buttonWithType:UIButtonTypeCustom];

    [addcharity setTitle:@"Help" forState:UIControlStateNormal];
    [addcharity addTarget:self action:@selector(addCharity:) forControlEvents:UIControlEventTouchUpInside];

    [addcharity setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];

    addcharity.frame=CGRectMake(0, 0, 130, 30); //set some large width to ur title

    [footerView addSubview:addcharity];

    return footerView;
}

return nil; 
```

}

我希望它可以帮助某人...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:22:38.660

编译器会这样处理，因为“main”块中没有 return 语句。

尝试这样做，警告将消失：

```
- (CGFloat) tableView: (UITableView *) tableView heightForRowAtIndexPath: (NSIndexPath *) indexPath
{
    NSString *lineToFit = [[self.fetchedResultsController objectAtIndexPath: indexPath] line];
    NSString *actorToFit = [[self.fetchedResultsController objectAtIndexPath: indexPath] actor];
    CGSize lineSize = [lineToFit sizeWithFont: [UIFont boldSystemFontOfSize: 12.0f] constrainedToSize: CGSizeMake(320, 800)];
    CGSize actorSize = [actorToFit sizeWithFont: [UIFont boldSystemFontOfSize: 12.0f] constrainedToSize: CGSizeMake(320, 800)];

    if (shouldDisplayExtra) {
        kExtraCellType cellType = [self cellIsGoingToContainExtraView];
        if (cellType != kExtraCellTypeNone) {
            [cellsToContainExtra setValue: [NSNumber numberWithInt: cellType] forKey: lineIDString];
            return lineSize.height + actorSize.height + 200;
        }
    }
        // Return the line height, actor height, plus a buffer.
        return lineSize.height + actorSize.height;
} 
```

它将具有您想要的行为，并且没有警告。

# android - Windows Phone 中的 Android 片段模拟

> ID：15248407
> 
> 赞同：1
> 
> 时间：2013-03-06T13:18:51.600
> 
> 标签：android, windows-phone-7, windows-phone-8

我想在 Windows Phone 8 应用程序中使用类似 Android Fragment 的东西。

说明：在我的一个页面中，如果用户未经授权，我想更改 PanoramaItem 内容。你会怎么解决？

在 Android 中，我只是将另一个片段加载到 PanoramaItem 视图，但我对 WP 的经验很少，并且不知道相同问题的最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:58:08.830

在不知道该特定项目中将包含什么内容的情况下，我可能会在该全景项目中声明两个不同的 UI

```
 <Grid x:Name="_Authorised" Visibility="Collapsed">
   <!-- Put all UI stuff here that will show when authorised -->
 </Grid>

 <Grid x:Name="_NotAuthorised" Visibility="Visible">
   <!-- Put all UI stuff here that will show when authorised -->
 </Grid> 
```

然后在 OnNavigatedTo 事件中（或任何你认为合适的）

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
 {
    if (UserIsAuthorised)
    {
       _NotAuthorised.Visibity = Visibility.Collapsed;
       _Authorised.Visibility = Visibility.Visible;
    }
 } 
```

# javascript - DIV 交换 onclick

> ID：15248408
> 
> 赞同：0
> 
> 时间：2013-03-06T13:18:53.057
> 
> 标签：javascript, html

我目前正在尝试在我的网站上实施内容锁定系统，作为其中的一部分，我想锁定现场 mp3 播放器，直到用户完成报价。

因此，当页面加载时，它会显示播放器，但如果他们尝试点击它，它会弹出内容储物柜，一旦他们完成报价，它会将 DIV 交换为完全可用的播放器。

这是代码：

```
<div id="mobmp3">
    <div id="yoursecDiv" style="display:block; z-index: 999;">  <a href="javascript:void(0)" onclick="var fileref=document.createElement('script');fileref.setAttribute('type','text/javascript'); fileref.setAttribute('src', 'http://c.themixtapesite.com/locker.js?guid=0512eafd69b18d22');document.body.appendChild(fileref); setTimeout(yourFunction, 3000);"> 
                                            <iframe src="http://themixtapesite.com/wp-content/plugins/amazon-s3-cloud-mp3-player/html5/html5mob2.php?bucket=mixtape2" frameborder="0" marginheight="0" marginwidth="0" scrolling="no" width="97.4%" height="280" max-width="97.4%">
                                            </iframe>
                                    </a>

    </div>
</div>
<!-- Place the Real Link within yourfirDiv which is set to not display
until yourFunction has been executed. -->
<div id="yourfirDiv" style="display:none;">
    <iframe src="http://themixtapesite.com/wp-content/plugins/amazon-s3-cloud-mp3-player/html5/html5mob2.php?bucket=mixtape2"
    frameborder="0" marginheight="0" marginwidth="0" scrolling="no" width="97.4%"
    height="280" max-width="97.4%"></iframe>
</div> 
```

因此，如您所见，我正在尝试在`yoursecDiv`. 然后，一旦他们完成了报价，它就会重新加载`yourfirDiv`，这是同一个播放器，但没有内容储物柜。

我希望通过`<iframe>`在`<a>`标签中包装我可以实现这一点，但是唉，它不起作用。

所以我想我的问题是：有没有办法我可以在 iframe 上覆盖一个 div（或其他东西）作为打开内容储物柜的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:59:14.210

现在已经解决了......经过一点新鲜空气后，我的大脑开始工作，我只是使用了一个透明的 gif 覆盖在 div 上。然后将该gif设置为触发链接。

# .net - Winforms 按钮卡在 Enabled = false WS_Disabled 上？

> ID：15248410
> 
> 赞同：1
> 
> 时间：2013-03-06T13:18:58.113
> 
> 标签：.net, windows, winforms, winapi

在我们的“大”Winforms .Net 应用程序中，有几个按钮处于一种奇怪的状态。

在将容器面板设置为 Enabled = False 并将按钮设置为 Enabled = True 然后将面板设置为 Enabled = True 之后，按钮似乎不再对任何鼠标事件做出反应。它不会正确地绘制自己，并且仍然为按钮设置了 WS_Disabled 状态。

控件不会对鼠标悬停或按钮单击做出反应，而是像活动按钮一样绘制。（未变灰）。使用选项卡，我实际上可以聚焦控件，如果我在鼠标悬停在按钮上时通过它们进行选项卡，它们确实会选择或悬停它们。

一些滚动条似乎也卡住了，但它们托管的网格仍然是可编辑的。

是否有任何简单的方法来调试某些按钮卡住的方式和原因？使用 Spy++ 我已经看到他们将 WS_Disabled 设置为一种样式，但我不知道这是怎么发生的。

我们使用的是 12.2 版的 DevExpress 组件。但这也发生在以前的版本上。

# dart - 类型检查器不喜欢实现 noSuchMethod 的可调用对象

> ID：15248411
> 
> 赞同：3
> 
> 时间：2013-03-06T13:18:58.893
> 
> 标签：dart

以下代码有效：

```
typedef num MyFunc(num);

class ObjectThatIsLikeFunc {
  call(x) => x;
}

var obj = new ObjectThatIsLikeFunc();
MyFunc g = obj; //works 
```

但是，如果 ObjectThatIsLikeFunc 没有 call 方法，而是定义了 noSuchMethod，则它不起作用。

```
typedef num MyFunc(num);

class ObjectThatIsLikeFunc {
  noSuchMethod(InvocationMirror) => 100;
} 
```

我得到“不是'MyFunc'类型的子类型”。

我的问题：有没有办法告诉类型检查器带有 noSuchMethod 的 ObjectThatIsLikeFunc 可以充当 MyFunc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T05:49:52.857

简短的回答，我不知道。普遍的情况是，“我怎样才能让一个实现 noSuchMethod 的类像任何类型一样行动？” 我想我听到了一些关于 Dart 如何允许这样做的讨论，但我找不到它的参考。

# jquery - 这个有jquery插件吗？[点击时触发的上下文菜单]

> ID：15248415
> 
> 赞同：-3
> 
> 时间：2013-03-06T13:19:01.887
> 
> 标签：jquery, html, css, model-view-controller, menu

![在此处输入图像描述](../Images/cb86770d7bf4e27346d32d4bbe1e850a.png) ![在此处输入图像描述](../Images/b18dd3296339f9e823c13d0710b95f66.png)

我已经发布了两张我正在寻找的自我解释图片。这是上下文菜单。而且我发现了很多 jquery 上下文菜单插件。但它们都在右键单击时触发。我正在寻找一个上下文菜单插件，它可以在单击其他 html 元素时触发。

我不想手动做，因为我必须处理很多事情，比如，

*   默认情况下，方向应该在元素的右下方。
*   如果没有空间，它应该改变显示的方向......
*   以及完全开发的插件的所有良好功能

**只是在寻找布尔答案天气有什么东西或者我必须创建它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:31:00.627

通过 jquery.trigger(...) 触发点击事件，您可以模拟对任何元素的点击。这解决了问题，即从您想要将功能耦合到的任何内容中进行点击事件。

请参阅：有关 jquery.trigger() 的[文档](http://api.jquery.com/trigger)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:34:30.963

您不需要额外的插件来完成此任务。你可以自己创建这个非常简单的。这是一个示例代码，您可以根据需要设置样式。它会在单击“图标”时切换菜单，并且当单击上下文菜单中的链接时它也会隐藏自身：

**HTML**

```
<a id="link">Icon to open menu</a>

<nav id="menu">
    <ol>
        <li><a>Some link 1</a></li>
        <li><a>Some link 2</a></li>
    </ol>
</nav> 
```

**JavaScript**

```
var nav = $('#menu');

$('#link').click(function() {
    nav.fadeToggle(500);
});

nav.find('a').click(function() {
    nav.fadeOut(500);
}); 
```

**演示**

[http://jsfiddle.net/Vr6SN/](http://jsfiddle.net/Vr6SN/)

# shader - 如何将宏定义添加到 FX Composer

> ID：15248416
> 
> 赞同：1
> 
> 时间：2013-03-06T13:19:02.517
> 
> 标签：shader, nvidia, fxcomposer

我尝试使用 Project > HLSL/CG > Compiler Options 字段在我的项目设置中向 FX Composer 添加宏定义。在两个 HLSL 字段中，我有 /DMYPROJECT 和 Cg -DMYPROJECT。

编译 Cg 着色器时，这按预期工作，但我无法让它为 HLSL 工作。在 fxc.exe 的命令行中使用相同的选项有效。

这是我用来测试的代码片段；

```
#ifndef MYPROJECT
#error ABC
#endif 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T16:36:33.177

FX Composer appears to execute #error directives regardless of other preprocessor directives, at least for HLSL. If you try your test with some actual code, like setting the pixel color to black or something, I think you'll find that it works. It worked for me, anyway. Your question actually helped me figure out how to do this, although I ended up going to Assets, Effects, myeffect, myshader.fx, Properties, Compiler Options.

Also important: in the Compiler Options field, I entered the macro like MYPROJECT, not /DMYPROJECT and that worked. I'm using FX Composer 2.53.0524.1905 with a D3D9 HLSL shader.

# c# - 将图像从一个 ASP.net Web application1 页面发布到另一个 ASP.Net Webapplication Page 并将其存储在 Webapplication2 Image 文件夹中

> ID：15248419
> 
> 赞同：1
> 
> 时间：2013-03-06T13:19:06.327
> 
> 标签：c#, asp.net

我已经从位于我的 ASP.Net Web 应用程序文件夹中的图像创建了调整大小的图像。临时我已将此图像存储到我的应用程序的另一个图像文件夹中。但我不想将该图像存储到文件夹中。我想将该图像和图像名称直接发布到不同应用程序的另一个网页。

怎么做？

如果有人在当前页面（Default.aspx）上为我提供解决方案代码，需要从中发布调整大小的图像和目标页面（Testreceive.aspx）代码，那就太好了......

**Default.aspx**在 My **Webapplication1**和

**TestReceive.aspx**在我的**Webapplication2中**

我编写代码以在源页面上发布图像，如下所示...我不确定..如果代码正确，那么如何在目标页面上接收图像？？？？这里的**文件夹**包含它所在的文件的路径，**Fname**是图像文件的名称。

如果它是错误的，那么请帮助我解决这个问题......

提前致谢..

```
 ASCIIEncoding encoding = new ASCIIEncoding();

                string postImg = folder + Fname;

                byte[] data = encoding.GetBytes(postImg);

                HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create("http://localhost:51399/TestReceive.aspx");

                myRequest.Method = "POST";

                myRequest.ContentType = "application/x-www-form-urlencoded";

                myRequest.ContentLength = data.Length;

                Stream newStream = myRequest.GetRequestStream();

                newStream.Write(data, 0, data.Length);

                newStream.Close(); 
```

# ruby-on-rails - 如何在我的视图中显示嵌套属性的值？

> ID：15248428
> 
> 赞同：1
> 
> 时间：2013-03-06T13:19:54.010
> 
> 标签：ruby-on-rails, ruby, nested-attributes

我从 Ruby 开始，在我的视图中显示信息时遇到了一些问题。

这是我的代码：e *app/models/user.rb*

```
class User < ActiveRecord::Base

  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :encrypted_password, :meta_attributes

  has_one :meta
  accepts_nested_attributes_for :meta
end 
```

*app/controllers/users_controllers.rb*

```
 def index
    @users = User.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @users }
    end
  end 
```

*应用程序/视图/用户/index.html.rb*

```
<% @users.each do |user| %>
      <td><%= user.email %></td>
      <td><%= user.meta.last_name %></td>
    <tr>
      <td><%= link_to 'Show', user %></td>
      <td><%= link_to 'Edit', edit_user_path(user) %></td>
      <td><%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' } %></td>
    </tr>
  <% end %> 
```

你有没有预料到，它会返回一些错误：

```
undefined method `last_name' for nil:NilClass 
```

你有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:22:40.107

错误来自您使用的行

```
user.meta.last_name 
```

这意味着`user.meta`是`nil`。

如果您确定`meta`在创建每个用户时为每个用户添加了一个，则问题可能来自`meta`不在您的`attr_accessible`列表中的事实。

如果您并不总是`meta`为每个用户创建一个并且您不介意有一个空的`meta`，您可以向您的`User`模型添加一个回调：

```
before_create :add_meta

def add_meta
    if self.meta.nil?
        self.meta = Meta.create( put_your_default_attributes_here )
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-07T01:01:30.793

我很确定您已经解决了这个问题，但是我在这里遇到了同样的问题，并且解决了将“nil”方法放入条件中的问题。也许可以帮助有同样问题的人。

```
<td>
  <% if user.meta %>
    <%= user.meta.last_name %>
  <% end %>
</td> 
```

# windows-phone-8 - ListBox 不能用作控件

> ID：15248429
> 
> 赞同：0
> 
> 时间：2013-03-06T13:20:01.550
> 
> 标签：windows-phone-8, expression-blend

这很奇怪。我刚刚尝试将 ListBox-Control 添加到 Expression Blend 中的 XAML-Page，但 ListBox-Control 不可用？

我总共只有 15 个 silverlight-controls (Blend) 并且没有 ListBox？

这不正常吧？我能对他做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:19:42.973

如果您绝对必须使用 ListBox 控件，您可以通过右键单击控件表面上的某处，选择“查看源代码”，然后键入`<ListBox/>`代码来添加它。完成此操作后，只要 ListBox 在代码中保持选中状态，Expression Blend 将允许您像任何普通 ListBox 一样对其进行编辑

# java - 多线程 Java Web 服务器

> ID：15248430
> 
> 赞同：4
> 
> 时间：2013-03-06T13:20:01.767
> 
> 标签：java, multithreading, webserver

我正在尝试实现一个多线程的 Java 网络服务器。

这是我的主要内容：

```
import java.net.*;

public class Main {
    public static void main(String argv[]) throws Exception{

        ServerSocket welcomeSocket = new ServerSocket(6790);
        while(true){
            System.out.println("Waiting...");
            Socket cSock = welcomeSocket.accept();
            System.out.println("Accepted connection : " + cSock);

            Server a = new Server(cSock);
            a.start();

        }
    }
} 
```

这是我的线程类：

```
import java.io.*;
import java.net.*;
import java.util.Scanner;

public class Server extends Thread{
    Socket cSock;

    Server(Socket cSock){   //constructor
        this.cSock = cSock;
    }

    public void run(){
        try{
            String request;
            Scanner inFromClient = new Scanner(cSock.getInputStream());
            DataOutputStream outToClient = new DataOutputStream(cSock.getOutputStream());
            request = inFromClient.nextLine();
            System.out.println("Received: "+request);

            //trimming URL to extract file name
            String reqMeth = request.substring(0, 3);
            String reqURL = request.substring(5, (request.lastIndexOf("HTTP/1.1")));
            String reqProto = request.substring(request.indexOf("HTTP/1.1"));
            System.out.println("Request Method:\t" +reqMeth +"\nRequest URL:\t" +reqURL+ "\nRequest Protocol: " +reqProto);

            //passing file name to open
            File localFile = new File(reqURL.trim());
            byte [] mybytearray  = new byte [(int)localFile.length()];
            FileInputStream fis = new FileInputStream(localFile);
            BufferedInputStream bis = new BufferedInputStream(fis);
            bis.read(mybytearray,0,mybytearray.length);

            //sending file to stream
            System.out.println("Sending...");           
            outToClient.write(mybytearray,0,mybytearray.length);
            outToClient.flush();
            outToClient.close();

        }catch(Exception e){
            System.out.println(e);
        }
    }
} 
```

按照逻辑，服务器收到的每个请求都会创建一个新线程。每个线程都与一个特定的请求相关联。我的问题是当我请求文件（例如 index.html）时，服务器收到请求，但文件没有加载，浏览器继续加载。

我发现每个线程都已启动但未完成。

这是一个输出：

```
Waiting...
Accepted connection : Socket[addr=/192.168.0.10,port=58957,localport=6790]
Waiting...
Accepted connection : Socket[addr=/192.168.0.10,port=58958,localport=6790]
Waiting...
Received: GET /html/index.html HTTP/1.1
Request Method: GET
Request URL:    html/index.html 
Request Protocol: HTTP/1.1
Accepted connection : Socket[addr=/192.168.0.10,port=59093,localport=6790]
Waiting...
Received: GET /index.html HTTP/1.1
Request Method: GET
Request URL:    index.html 
Request Protocol: HTTP/1.1 
```

我究竟做错了什么？有没有更好的方法？请注意，我只做了一个线程来测试来自一个 IP 的请求，并且将在这个问题解决后继续构建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:29:43.063

您永远不会编写 HTTP 标头。

```
outToClient.write("HTTP/1.0 200 OK\r\n");
outToClient.write("Connection: Close\r\n");
outToClient.write("\r\n");
outToClient.write(mybytearray,0,mybytearray.length); 
```

如果您要实现自己的服务器，您应该阅读[RFC 2616](http://www.ietf.org/rfc/rfc2616.txt)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:31:14.480

如果要使用浏览器连接到服务器，它必须返回带有标头的 HTTP 响应。 [这](http://fragments.turtlemeat.com/javawebserver.php)是一个简单的 HTTP 服务器示例。或者更好地查看[这个](https://stackoverflow.com/questions/2717294/create-a-simple-http-server-with-java)已回答的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-04T15:37:55.117

希望这可以帮助

```
 import java.io.*;
 import java.net.*;
 import java.nio.file.Files;
 import java.awt.image.BufferedImage;

 import javax.imageio.ImageIO;

 public class TCPServer
 {
 public static void main(String[] argv) throws IOException//IOException
 {
    ServerSocket welcomeSocket = new ServerSocket(9080);

    while(true)
    {
        Socket connectionSocket = welcomeSocket.accept();
        BufferedReader inFromClient = new BufferedReader(new       InputStreamReader(connectionSocket.getInputStream()));
        DataOutputStream outToClient = new     DataOutputStream(connectionSocket.getOutputStream());

        Thread thread = new ClientHandler(connectionSocket, inFromClient,     outToClient);
        thread.start();
    }
} 
```

}

```
 class ClientHandler extends Thread{
   Socket connectionSocket;
   BufferedReader inFromClient;
   DataOutputStream outToClient;

  public ClientHandler(Socket connectionSocket, BufferedReader inFromClient,     DataOutputStream outToClient) {
    this.connectionSocket = connectionSocket;
    this.inFromClient = inFromClient;
    this.outToClient = outToClient;
  }

   public void run()
   {
      String clientSentence;
      try
      {

          System.out.println("A new client is connected : " + connectionSocket);
          clientSentence = inFromClient.readLine();
          System.out.println("Received: " + clientSentence);
          String[] tokens = clientSentence.split("\\s+");

          if(tokens[1].equals("/index.html") || tokens[1].equals("/"))
          {

              File file = new File(System.getProperty("user.dir")+"/index.html");
              Files.copy(file.toPath(), outToClient);
          }else if(tokens[1].equals("/RealIndex.html"))
          {
              File file = new     File(System.getProperty("user.dir")+"/RealIndex.html");
              Files.copy(file.toPath(), outToClient);
          }
          else if(tokens[1].equals("/hqdefault.jpg"))
          {
              File file = new     File(System.getProperty("user.dir")+"/hqdefault.jpg");
              BufferedImage image = ImageIO.read(file);
              outToClient.writeBytes("HTTP/1.1 200 OK\n\n");
              ImageIO.write(image,"JPG", outToClient);
          }
          else
          {
              File file = new     File(System.getProperty("user.dir")+"/404Error.html");
              Files.copy(file.toPath(), outToClient);
          }

          this.connectionSocket.close();
          this.outToClient.close();
          this.inFromClient.close();
      }catch (IOException e)
      {
          e.printStackTrace();
      }
  }
} 
```

# objective-c - 在 Objective C 中，为什么我可以在没有错误或警告的情况下将 NSArray 分配给 NSMutableArray？

> ID：15248437
> 
> 赞同：14
> 
> 时间：2013-03-06T13:20:20.273
> 
> 标签：objective-c, cocoa, clang

我对一种奇怪的行为感到不安，如下例所示：

```
NSMutableArray *a1 = [[NSMutableArray alloc] init]; // fine
NSMutableArray *a2 = [NSMutableArray array];        // fine, too

// compiler reports incompatible pointer types; good:
NSMutableArray *a3 = [[NSArray alloc] init]; 

// compiler says nothing and is happy to assign this!
NSMutableArray *a4 = [NSArray array]; 
```

和类的`init`和`array`方法都返回。但是，当我调用这些方法时的行为根本不一样，clang 让我愉快地为变量赋值！`NSArray``NSMutableArray``id``NSArray``NSMutableArray`

事实证明，[clang 会自动将某些方法（包括`init`family）的返回类型更改为`instancetype`](http://clang.llvm.org/docs/LanguageExtensions.html#objc_instancetype)，从而能够在编译时确定`[[NSArray alloc] init]`返回的是 an`NSArray *`而不是 an `NSMutableArray *`。但是此检查根本不适用于该`array`方法。

为什么？像我上一个示例这样的行不应该*至少*产生一个警告吗？为什么不将所有这些方法都声明为返回`instancetype`？未来会改变吗？

* * *

**更新**

好消息：从 iOS 7 开始，`[NSArray array]`返回`instancetype`，因此对上述的赋值`a4`也会产生警告。其他方法喜欢`arrayWithContentsOfFile:`或`arrayWithContentsOfURL`仍然返回`id`，但是......</p>

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T14:40:41.263

> 但是这个检查根本不适用于数组方法。为什么？

正如您链接的文档所描述的那样，这是因为`-array`没有产生公认的*相关结果类型*。ObjC 是非常动态的——编译器不能保证`+array`. 它确实对某些方法做出了这种假设，因为命名约定是明确定义的（例如`+alloc`, `-init`, `+new`,`-self`等）。所以这个实现只是诉诸命名约定。

编译器还会在您可能不期望的区域验证一些命名约定：

```
@implementation NSArray (DEMO)

- (id)initStr
{
    return [NSString new]; // << warning. RE: init prefix
}

@end 
```

> 像我上一个示例这样的行不应该至少产生一个警告吗？为什么不是所有这些方法都声明为返回实例类型？未来会改变吗？

`instancetype`大约是一年前推出的（从外观上看）。一些 API 是几十年前编写的。我怀疑它会*及时*发生——因为（如果使用正确）它可以指出现有代码中的很多问题。当然，这些更改会破坏现有的构建（同样，如果在正确的位置声明，通常是很好的更正）。

所以提交错误并给工具和库几年的更新时间。假设进行了更改，它可能会在主要的操作系统更新时发生。

最好将它作为可选警告启用一段时间（在系统标头的情况下）。当然，他们仍然可以为新 API 的旧编译器向后兼容使用它。

Also, this change could be retrofitted quite easily (not that earlier compilers would make sense of the semantic difference between `id` and `instancetype`) by a simple typedef. One problem with a typedef is that it is a global declaration -- a compiler could restrict a word/modifier/attribute to a given scope, without causing all the pain of simulating a keyword by adding a global typedef. Apple's GCC may never support `instancetype`, so the logical way to introduce it for Apple's GCC may be a global `typedef` of `id`, which could cause problems for some people (with no semantic benefit, if that route were taken). Note that similar breaking changes have been made by Apple in the past.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:05:02.573

事实证明，您不仅可以使用错误的数组类型，还可以使用*任何*带有返回`id`. 例如，编译时没有看到警告：

```
NSMutableArray *a4 = [NSDictionary dictionary]; 
```

这是用于选择退出类型安全的副作用`id`，并且正如您所注意到的，它应该被弃用并替换为 instancetype（以上述方式使用时会引发不兼容的类型警告）。

不幸的是，这不是一个错误。 `instancetype`作为一个相当新的关键字，它的采用还没有普及，在 Apple 的框架中开始使用它是一个大胆的举措。你永远不知道，下一个 SDK 总是有希望的！

# php - PHP 选项标签和数组

> ID：15248439
> 
> 赞同：0
> 
> 时间：2013-03-06T13:20:25.780
> 
> 标签：php, html, arrays, select, option

只是在做一个小型的大学项目来开发一个电子商务网站。我已经获得了一些代码，我正在根据自己的需要进行更改。

我目前在让一些数组在选项和选择标签中工作时遇到问题。不同之处在于这些数组中的每一个都有一个与之相关的动作，例如，移动到另一个页面。

问题似乎是选项标签中没有使用此操作。如此处可见[http://mkiddr.com/phptests/shopping/](http://mkiddr.com/phptests/shopping/)

这是我在编辑之前的原始代码：

```
<body>
<div id="wrapper">
<div id="header">
    <p><a href="index.php">Home</a> | Browse:
    <?php
        $q="SELECT c_id, c_name FROM sc_cat";
        $result = mysqli_query($_SESSION['conn'],$q);
        while ($row = mysqli_fetch_row($result)){
            echo "<a href='category.php?id=$row[0]'>$row[1]</a> ";
        }
        unset($q); //unset query variable
        mysqli_free_result($result); //free result
        ?>
</div>
<div id="content"><!-- note this is an opening tag --> 
```

这是我编辑的代码（不起作用）

```
<body>
<div id="wrapper">
<div id="header">
    <p><a href="index.php">Home</a> | Browse:

    <select>
    <?php
        $q="SELECT CategoryID, CategoryName FROM ProductCategories";
        $result = mysqli_query($_SESSION['conn'],$q);
        while ($row = mysqli_fetch_row($result)){

            echo "<option value='category.php?id=".$row[0]."'>".$row[1]."</a></option>";
            //display categories

            }
        unset($q); //unset query variable
        mysqli_free_result($result); //free result
    ?>
    </select>

</div>
<div id="content"><!-- note this is an opening tag --> 
```

如果有人能帮我们解决这个问题，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:25:18.633

问题是选项标签没有要执行的“动作”。您必须使用 javascript 将用户重定向到所选选项。将 SELECT 标记更改为

```
<select onchange="window.location = this.value;"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T13:25:41.970

尝试将您的 while 循环替换为以下内容：

```
 while ($row = $result->fetch_row()) {

        echo "<option value='category.php?id=".$row[0]."'>".$row[1]."</a></option>";
        //display categories

        } 
```

看看这是否应该工作

正如@Stormherz 提到的那样，要在选择时自动加载，您需要将 onclick 方法放置在 select 标签上的选项中；

# c# - 无法在 C# Windows 应用程序主程序中将当前线程单元设置为 STA

> ID：15248440
> 
> 赞同：1
> 
> 时间：2013-03-06T13:20:30.913
> 
> 标签：c#, multithreading, thread-safety, visual-studio-debugging, apartment-state

我在 Visual Studio 2010 中创建了一个小型 Windows 应用程序项目，我无法将主线程的单元属性设置为 STA，默认情况下它设置为 MTA，即使使用该属性`[STAThread]`或`[STAThreadAttribute]`在我的 main 方法上也是如此。当我显示表单并更改其控件属性时，这会导致引发异常。

这是我的应用程序入口点的屏幕截图，我在其中显示主线程`ApartmentSate`属性的值并尝试将其更改为 STA（我不在我的应用程序中执行此操作，它只是为了显示如果有人建议更改会发生什么情况它以语法方式）：

![主线程的 ApartmentState 属性设置为 MTA](../Images/a9756533e258b1d6287a099ba27d04f2.png)

下面是调试部分中我的应用程序属性的屏幕截图：

![我的应用程序的调试属性](../Images/26b9fd6c2cf9ff9cd76da2d182f5ba0c.png)

我不明白，因为我没有离开主线程。你知道这个问题的根源是什么以及我该如何解决它吗？

编辑：如果我禁用“启用 Visual Studio 托管进程”选项，则该`ApartmentSate`属性正确设置为 STA。这是避免问题的最佳方法，还是我可以用更好的解决方案解决这个问题？

谢谢

# iphone - 无法在 iPhone 上获取 Google Analytics 的实时数据

> ID：15248445
> 
> 赞同：3
> 
> 时间：2013-03-06T13:20:55.447
> 
> 标签：iphone, ios, google-analytics

**我在我的 iPhone 应用程序中集成了 Google Analytics(v2.0) api，但无法在Google Analytics Real Time**上获取实时数据。

已将调度间隔属性设置为 0

```
 self.tracker = [[GAI sharedInstance] trackerWithTrackingId:kTrackingId];
[GAI sharedInstance].debug = YES;
[GAI sharedInstance].dispatchInterval = 0;
[GAI sharedInstance].trackUncaughtExceptions = YES; 
```

*正确接收类别事件*，但无法接收实时数据。

是否可以从 iPhone 应用程序获取实时数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T13:31:37.890

通过实施视图跟踪解决了问题。只有实施视图跟踪才能看到实时数据。

演示代码：

HomeViewcontroller.h

```
#import "GAITrackedViewController.h"

@interface HomeScreenViewController : GAITrackedViewController 
```

HomeViewcontroller.m

```
//--- Add in viewDidLoad ---//
    self.trackedViewName = @"Home Screen"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:35:13.800

如果您已正确集成 API，您将获得实时数据，并且不要忘记`trackerWithTrackingId`为您在谷歌分析中注册的应用程序设置正确的数据，它以`UA`前缀开头

```
// Optional: automatically send uncaught exceptions to Google Analytics.
    [GAI sharedInstance].trackUncaughtExceptions = YES;
        // Optional: set Google Analytics dispatch interval to e.g. 20 seconds.
    [GAI sharedInstance].dispatchInterval = 20;
        // Optional: set debug to YES for extra debugging information.
    [GAI sharedInstance].debug = YES;
        // Create tracker instance.
    self.tracker = [[GAI sharedInstance] trackerWithTrackingId:@"UA-YOURAPPID"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T17:43:48.317

还有另一个 API - Google Real Time API 提供相同的功能。[https://developers.google.com/analytics/devguides/reporting/realtime/v3/devguide](https://developers.google.com/analytics/devguides/reporting/realtime/v3/devguide)

# c++ - 传递给 std::unordered_set::erase() 的无效迭代器的结果

> ID：15248450
> 
> 赞同：0
> 
> 时间：2013-03-06T13:20:59.260
> 
> 标签：c++, c++11, iterator, std

std::unordered_set::erase() 有 3 个重载：在一个引用中，传递一个“无效”值，即集合中不存在的值，简单地使 erase() 返回 0。但是呢？另外两个重载？

C++11 标准是否说明在这种情况下擦除（）应该做什么，或者它取决于编译器？它应该返回 end() 还是未定义的行为？

我在规范、cppreference.com、cplusplus.com 中找不到答案。在 IBM 网站上，他们说如果操作后没有元素剩余，它会返回 end()，但是如果操作本身由于无效的迭代器而失败会发生什么？

通常，在这些情况下，STL 容器的 erase() 方法是否只是具有未定义的行为？（所以我需要在将任何迭代器传递给擦除（）之前检查我的迭代器，或者使用 unordered_set::erase() 重载，它采用 value_type 引用，如果失败，它将简单地返回 0）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:23:53.070

尝试删除集合中未出现的值与尝试从无效迭代器中擦除之间存在很大的语义差异。

尝试使用无效的迭代器是未定义的行为，并且会以失败告终。

当您可能想要擦除无效的迭代器时，您是否有一个特定的用例？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:33:39.723

这是两种完全不同的情况。没有“无效值”，集合中不存在的值仍然有效。因此，您传递了一个不包含在集合中的有效值，因此返回 0 - 没有元素被删除。

其他重载则完全不同。该标准要求传递给擦除方法的迭代器分别为“有效且可取消引用”和“有效的迭代器范围”。否则行为未定义。

所以是的，迭代器必须是有效的。但是您无法以编程方式检查迭代器是否有效 - 您必须从您的程序逻辑中确保它们是有效的。

# php - PHP文件上传脚本产生模糊图像

> ID：15248461
> 
> 赞同：1
> 
> 时间：2013-03-06T13:21:21.937
> 
> 标签：php, file-upload

我做的文件上传脚本，上传的时候会上传模糊的图片！这是我目前的脚本，试着找出我做错了什么。该脚本将图像上传为 .png，其中用户名是当前登录用户的实际用户名。

请注意，原始图像是 17x22，所以这并不是让它变得模糊的原因。

```
<?php
include('../class/resize.php');
//error_reporting(0);
if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST"){
$path = "../files/cloaks/"; //set your folder path
$filename = $_FILES['photoimg']['tmp_name']; //get the temporary uploaded image name
$valid_formats = array("jpg", "png", "gif", "bmp", "jpeg","GIF","JPG","PNG", "JPEG"); //add the formats you want to upload

        $name = $_FILES['photoimg']['name']; //get the name of the image
        $size = $_FILES['photoimg']['size']; //get the size of the image
        if(strlen($name)) //check if the file is selected or cancelled after pressing the browse button. 
        {
            list($txt, $ext) = explode(".", $name); //extract the name and extension of the image
            if(in_array($ext,$valid_formats)) //if the file is valid go on.
            {
            if($size < 2098888) // check if the file size is more than 2 mb
            {
            $actual_image_name =  $_POST['fname']; //actual image name going to store in your folder
            $tmp = $_FILES['photoimg']['tmp_name']; 
            if(move_uploaded_file($tmp, $path.$actual_image_name)) //check the path if it is fine
                {   
                    move_uploaded_file($tmp, $path.$actual_image_name); //move the file to the folder
                    $dburl = ('../files/cloaks/'.$actual_image_name.'');
                    $image = new ZiResize();
                    $image->load($dburl);
                    $image->resize(22,17);
                    $image->save($path.$actual_image_name);
                    //display the image after successfully upload
                    echo "<img src='files/cloaks/".$actual_image_name."'  class='preview'> <input type='hidden' name='actual_image_name' id='actual_image_name' value='$actual_image_name' />";

                }
            else
                {
                echo "failed";
                }
            }
            else
            {
                echo "Error! Max image size is 2 MB!";                  
            }
            }
            else
            {
                echo "Error! Invalid image format!";    
            }
        }
        else
        {       
        echo "Error! No file selected!";
        }       
    exit;
    }
?> 
```

调整大小.php 代码

```
<?php
class ZiResize {

   var $image;
   var $image_type;

   function load($filename) {

      $image_info = getimagesize($filename);
      $this->image_type = $image_info[2];
      if( $this->image_type == IMAGETYPE_JPEG ) {

         $this->image = imagecreatefromjpeg($filename);
      } elseif( $this->image_type == IMAGETYPE_GIF ) {

         $this->image = imagecreatefromgif($filename);
      } elseif( $this->image_type == IMAGETYPE_PNG ) {

         $this->image = imagecreatefrompng($filename);
      }
   }
   function save($filename, $image_type=IMAGETYPE_JPEG, $compression=75, $permissions=null) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image,$filename,$compression);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image,$filename);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image,$filename);
      }
      if( $permissions != null) {

         chmod($filename,$permissions);
      }
   }
   function output($image_type=IMAGETYPE_JPEG) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image);
      }
   }
   function getWidth() {

      return imagesx($this->image);
   }
   function getHeight() {

      return imagesy($this->image);
   }
   function resizeToHeight($height) {

      $ratio = $height / $this->getHeight();
      $width = $this->getWidth() * $ratio;
      $this->resize($width,$height);
   }

   function resizeToWidth($width) {
      $ratio = $width / $this->getWidth();
      $height = $this->getheight() * $ratio;
      $this->resize($width,$height);
   }

   function scale($scale) {
      $width = $this->getWidth() * $scale/100;
      $height = $this->getheight() * $scale/100;
      $this->resize($width,$height);
   }

   function resize($width,$height) {
      $new_image = imagecreate($width, $height); 
      imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
      $this->image = $new_image;
   }      

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:37:53.490

保存图像时更改`compression`参数

`function save($filename, $image_type=IMAGETYPE_JPEG, $compression=75, $permissions=null)`

您使用的是 jpg 格式，在 php 中，您可以设置结果图像的质量，如果该质量低于原始图像，即使没有调整大小，图像也会看起来“模糊”。

你可以：

1.  更改压缩值 (`$image->save($path.$actual_image_name, NULL, 100);`
2.  将图像格式更改为不支持“压缩”的其他格式

由于您没有调整图像大小，因此可以替换它：

```
$image->resize(22,17);
$image->save($path.$actual_image_name); 
```

有了这个：

```
$image->save($path.$actual_image_name, NULL, 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:28:26.290

您将大小调整为 22 像素 x 17 像素。当您将图像缩小到该尺寸时，它总是看起来很模糊。您还应该使用`imagecreatetruecolor`它，因为它允许全色谱。imagecreate 的颜色有限，这是图像看起来模糊的另一个原因

# ios - 我不明白为什么当应用程序崩溃并且我收到此消息时……？

> ID：15248462
> 
> 赞同：0
> 
> 时间：2013-03-06T13:21:23.387
> 
> 标签：ios

警告：函数“void macosx_kill_inferior_safe()”中“/SourceCache/gdb/gdb-1708/src/gdb/macosx/macosx-nat-i​​nferior.c”的第 2184 行出错：(os/kern) 失败 (0x5x)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:43:36.890

这是调试器崩溃，而不是您的应用程序。该应用程序没有问题。可能是你内存不足。更新您的调试器工具可能会对您有所帮助。

# asp.net - 找不到由“IDofyourMeterRequird”的“ControlToValidate”属性引用的控件 ID“仪表的 ID”

> ID：15248466
> 
> 赞同：1
> 
> 时间：2013-03-06T13:21:29.270
> 
> 标签：asp.net

`register.aspx`添加一些字段后在 Visual Studio 中运行时出现此错误。字段是`id`、`meter`和`address`。

这是代码：

```
<tr>
    <td align="right">
        <asp:Label ID="Label1" runat="server" AssociatedControlID="ID of your Meter">ID of your Meter:</asp:Label>
    </td>
    <td>
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="ID of your Meter" ErrorMessage="ID is required." ToolTip="ID is required." ValidationGroup="RegisterUser">*</asp:RequiredFieldValidator>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:26:47.310

错误来是因为你有

```
AssociatedControlID="ID of your Meter"
ControlToValidate="ID of your Meter" 
```

并且您应该有要与之关联的控件的服务器 ID

例如，在您的情况下（您无论如何都应该考虑将命名更改为更具描述性）：

```
<tr>
    <td align="right">
        <asp:Label ID="Label1" runat="server" AssociatedControlID="TextBox1">ID of your Meter:</asp:Label>
    </td>
    <td>
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="TextBox1" ErrorMessage="ID is required." ToolTip="ID is required." ValidationGroup="RegisterUser">*</asp:RequiredFieldValidator>
    </td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:25:33.657

看起来您从教程中复制/粘贴了一些内容，并且从未将其更改为在您的代码中工作：

```
AssociatedControlID="ID of your Meter"
ControlToValidate="ID of your Meter" 
```

你的“仪表”是什么/在哪里？您需要将这些属性放入`ID`控件的服务器端属性中。

请注意您使用的服务器端控件如何具有`ID`属性：

```
ID="Label1"
ID="TextBox1"
ID="RequiredFieldValidator1" 
```

这些`ID`属性必须是唯一的，而这正是其他领域所寻求的。`ID`特定控件的唯一性。

旁注：您可能希望为您`ID`的 s 使用更有意义的名称。它使代码更容易支持和维护。

# jquery - 等到jquery ajax请求完成并返回值

> ID：15248467
> 
> 赞同：4
> 
> 时间：2013-03-06T13:21:37.213
> 
> 标签：jquery, ajax, return-value, file-exists

我想等到ajax调用完成并返回值。

```
function isFileExists(url) {
    var res = false;
    $.ajax({
        type: "GET",
        async: false,
        url: url,
        crossDomain: true,
        dataType: "script",
        success: function () {
            res = true;
        },
        error: function () {
            res = error;
        },
        complete: function () {

        }
    });
    return res; //It is always return false
} 
```

我想返回值“真/错误”

请帮我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T13:24:33.407

你不能这样做。这不是 ajax 的工作方式。您不能依赖在任何给定时间完成的 ajax 请求......或*永远*完成。您需要做的任何基于 ajax 请求的工作都***必须***在 ajax 回调中完成。

jQuery 使绑定回调变得容易（因为`jqXHR`jQuery 的 ajax 方法返回实现了[Deferred](http://api.jquery.com/jQuery.Deferred/)）：

```
var jqXHR = $.ajax({/* snip */});

/* millions of lines of code */

jqXHR.done(function () {
    console.log('true');
}).fail(function () {
    console.log('false');
}); 
```

* * *

`async`PS，如果您设置为，您可以做您想做的事情`false`，但是会在请求运行时锁定浏览器。不要这样做。然后你只有jax。

**编辑**：你不能结合`crossDomain: true`and `async: false`。跨域必须是异步的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:58:08.383

也许这对你有用：

```
function isFileExists(url, init) {
    var res = null;
    var _init = init || false;

    if (!_init) {
        _init = true;
        $.ajax({
             type: "GET",
             url: url,
             crossDomain: true,
             dataType: "script",
             success: function () {
                 res = true;
             },
             error: function () {
                 res = 'error';
             },
             complete: function () {

             }
        });
    }

    if (res==null) {
        setTimeout(function(){ isFileExists(url, _init); }, 100);
    } else {
        return res;
    }
} 
```

我对其进行了简单的测试，但没有跨域测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-28T13:49:19.553

试试这个代码。它对我有用。

```
 function getInvoiceID(url, invoiceId) {
        return $.ajax({
            type: 'POST',
            url: url,
            data: { invoiceId: invoiceId },
            async: false,
        });
    }
    function isInvoiceIdExists(url, invoiceId) {
        $.when(getInvoiceID(url, invoiceId)).done(function (data) {
            if (!data) {

            }
        });
    } 
```

# c# - 基于某些属性从 XML 中获取标签集合

> ID：15248472
> 
> 赞同：0
> 
> 时间：2013-03-06T13:21:55.433
> 
> 标签：c#, xml, linq, linq-to-xml

我有这个 xml 文件

```
<config>
  <PersonMapping>
    <Field>
      <Name>Id</Name>
      <Position>0</Position>
    </Field>
    <Field>
      <Name>FirstName</Name>
      <Position>1</Position>
    </Field>
    <Field>
      <Name>LastName</Name>
      <Position>2</Position>
    </Field>
    <Field>
      <Name insert='false' update='false'>Address1</Name>
      <Position>3</Position>
    </Field>
    <Field>
      <Name insert='false' update='false'>Address2</Name>
      <Position>4</Position>
    </Field>
  </PersonMapping>
</config> 
```

我必须根据此文件中的设置创建两个集合。根据用户的需要，某些“字段”标签可能有也可能没有“插入”和“更新”属性。

插入集合将包含所有具有 insert = 'true' 或不存在的标签 更新集合将包含所有具有 update = 'true' 或不存在的标签

对于没有其中任何一个的标签，它们默认为 true。

我为插入写了这个查询

```
propertiesToInsertFromXML = from nameTag in xml.Element("Config").Element("PersonMapping").Elements("Field")
                            let insert = nameTag.Element("Name").Attribute("insert")
                            let update = nameTag.Element("Name").Attribute("update")
                            where insert == null || (bool)insert  && update == null || (bool)update
                            select nameTag.Element("Name").Value; 
```

这给出了名字，名字，姓氏

有人可以在这里帮助我吗？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:27:37.510

您可以尝试将`where`部分更改为

```
where (insert == null || Convert.ToBoolean(insert.Value)) 
```

编辑不知道是否`<Name insert='fasle'`需要测试或拼写错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:37:40.733

将属性转换为可为空的布尔值。对于缺少的属性，您将获得空值。然后只需验证是否`insert`没有值（属性缺失）或它的值是否为`true`：

```
var insertTags = from name in xml.Descendants("Name")
                 let insert = (bool?)name.Attribute("insert") 
                 where !insert.HasValue || insert.Value
                 select (string)name; 
```

**备注：** `insert`变量有类型`Nullable<bool>`它不是`XAttribute`这里的类型。

* * *

与 XPath 相同：

```
var insertTags = xml.XPathSelectElements("//Name[@insert='true'or not(@insert)]")
                    .Select(n => (string)n); 
```

# eclipse - Zest 链接节点（2 个或更多源节点连接到 1 个目标）

> ID：15248481
> 
> 赞同：0
> 
> 时间：2013-03-06T13:22:15.837
> 
> 标签：eclipse, zest

我正在尝试使用 Eclipse Zest Visualization Toolkit 创建具有 5 个不同连接的图形。

以下论文概述了这 5 个连接（图 3。常见的基本参数结构）- [http://www.mit.edu/~irahwan/docs/JWS2008.pdf](http://www.mit.edu/~irahwan/docs/JWS2008.pdf)

开箱即用的 Zest 可以在我正在寻找的 5 个连接中创建 4 个。（除 ii 之外的所有 - 链接）

我正在寻找如何创建此连接的指针？

理论上我想选择多个节点作为源，并将连接（一个连接）绘制到目标节点。

我是否应该扩展 EntityConnectionData 对象以获取源列表。然后实现IConnectionStyleProvider，修改getRouter()返回我自己自定义的Connection Router？

在此先感谢，艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T11:57:42.373

创建您自己的内容提供商。

1.  如果您的输入由连接的元素组成，请使用`IGraphEntityContentProvider`. 您会注意到，在 的帮助下`getConnectedTo`，您可以返回传递实体的子代。

2.  如果您的输入包含元素之间的连接，请使用`IGraphEntityRelationshipContentProvider`. 在那里，您将收到`getSource`和`getDestination`API 中的每个连接。

无需扩展`EntityConnectionData`。

# c# - 强制 Entity Framework 5 使用 datetime2 数据类型

> ID：15248488
> 
> 赞同：23
> 
> 时间：2013-03-06T13:22:36.027
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5

是否可以全局设置实体框架`DbContext`以用于使用 Code-First 模型时`datetime2`的所有属性？`System.DateTime`

我可以通过使用`HasColumnType()`方法对每一列执行此操作，但对于现有代码库，我想要一个全局解决方案。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-07-17T21:50:12.420

由于 EF6 已经推出了很长一段时间，并且这个问题仍然出现在搜索中，因此这里是使用自定义约定来设置 SQL 类型的方法。在 DbContext 类的 OnModelCreating 方法中执行以下操作：

```
modelBuilder.Properties<DateTime>()
    .Configure(c => c.HasColumnType("datetime2")); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T13:45:44.130

不在 EF5 中，但在 EF6（当前为 alpha 版本）中允许使用[自定义约定](http://msdn.microsoft.com/en-us/data/jj819164)。对于 EF5，您将需要一些基于反射的自定义约定框架，该框架将`HasColumnType`通过反射添加对模型构建器的调用 - 检查例如[EF Code First Extras](http://efcodefirstextras.codeplex.com/)（它声称支持可插入约定）。

# macvim - MacVim，将 Alt 键重新映射为 Ctrl 键

> ID：15248495
> 
> 赞同：1
> 
> 时间：2013-03-06T13:22:46.743
> 
> 标签：macvim, vim

我是 MacVim 用户，我想知道是否可以将`Alt`-`Option`键设置为`Ctrl`键。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:23:15.953

我在 MacVim 中找不到这样做的方法，但**KeyRemap4Macbook**做到了。这是一款很棒的软件，文档非常好，我推荐给遇到困难映射情况的每个人。它允许您在可以从应用程序内部打开的 xml 文件中自定义每个应用程序的映射。这绝对是poka-yoke。对于我的情况，这是我在 private.xml 中写的：

```
<appdef>
<appname>MacVim</appname>
<equal>org.vim.MacVim</equal>
</appdef>

<item>
<name>Change Right Option key to Control</name>
<identifier>private.remap_rightOption_to_control</identifier>
    <only>MacVim</only>
<autogen>__KeyToKey__ KeyCode::OPTION_R, KeyCode::CONTROL_R</autogen>
</item> 
```

问题解决了！

# rubymotion - 如何在 ruby motion 的 tableView 中的单元格中添加另一个文本标签和按钮？

> ID：15248497
> 
> 赞同：0
> 
> 时间：2013-03-06T13:22:54.970
> 
> 标签：rubymotion

我使用以下方法创建一个单元格并在其中填充数据（改编自推文应用程序示例） 现在我想添加一个显示所选事件日期的新标签和一个将执行另一个操作的按钮。这里有2种方法：

```
def self.cellForEvent(event, inTableView:tableView)
    cell = tableView.dequeueReusableCellWithIdentifier(EventCell::CellId) || EventCell.alloc.initWithStyle(UITableViewCellStyleDefault, reuseIdentifier:CellId)
    cell.fillWithEvent(event, inTableView:tableView)
    cell.accessoryType =  UITableViewCellAccessoryDetailDisclosureButton
    cell
end 
```

将数据填充到单元格中

```
def fillWithEvent(event, inTableView:tableView)
    self.textLabel.text = event.name
    puts event.image
    unless event.image
      self.imageView.image = nil
      Dispatch::Queue.concurrent.async do
        event_image_data = NSData.alloc.initWithContentsOfURL(NSURL.URLWithString(event.image_url))
        if event_image_data
          event.image = UIImage.alloc.initWithData(event_image_data)
          Dispatch::Queue.main.sync do
            self.imageView.image = event.image
            tableView.delegate.reloadRowForEvent(event)
          end
        end
      end
    else
      self.imageView.image = event.image
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:47:52.310

railsdog 的推荐并非没有道理。您可以对要编辑的单元格进行@reference，然后再对其进行更改。但这有点危险——有很多陷阱：如果单元格被移出屏幕会发生什么？在其他地方重复使用？棘手。

相反，我建议将一些`fillWithEvent:inTableView`代码添加到`cellForEvent`方法中，这样您就可以调用`tableView.reloadRowsAtIndexPaths:withRowAnimation:`并且将调用该方法。这将我上面提到的复杂性转移到 Cocoa 框架的后面，这是*一件好事*:-)

不利的一面是您需要保持 indexPath 方便（或可计算），并始终记住`event`与单元格相关联是瞬态的，因为单元格被重用。您上面的代码似乎没有保留对 的引用`event`，这是一件好事！

```
# in fetchImageForEvent:tableView:
# ...
event.image = UIImage.alloc.initWithData(event_image_data)
Dispatch::Queue.main.sync do
  # instead of this:
  # self.imageView.image = event.image

  # tell the tableView to reload.  unfortunately, we don't have the index
  # path.  not sure how you're calculating it, but if you've got a list of
  # events, this should be easy.
  # I'm just assuming section 0, row 1 here.
  path = NSIndexPath.indexPathWithIndex(0).indexPathByAddingIndex(1)
  tableView.reloadRowsAtIndexPaths([path], withRowAnimation:UITableViewRowAnimationAutomatic)
end 
```

# html - 两个图像之间的文本

> ID：15248502
> 
> 赞同：1
> 
> 时间：2013-03-06T13:23:06.660
> 
> 标签：html, css

这个问题很容易解释，我只想知道如何使用 CSS 将文本放在两个图像之间。我试过`position: absolute;`了，但它没有居中，我试过了，`vertical-align: middle;`但它没有做任何事情。[这](http://www.epilepticdev.tk)是网站，希望对大家有所帮助。

如果你不明白这个问题，基本上我要问的是如何做到这一点：
-------webpage-------
[IMAGE] [TEXT] [IMAGE]
----- - 网页 - - - -

编辑：似乎人们没有看到我的网站链接，或者他们无法查看源代码。这是 HTML 的代码：

```
<html>
<head>
    <title>
        Epileptic Development
    </title>
    <link rel='stylesheet' type='text/css' href='style.css' />
</head>
<body>
    <div id='wrap'>
    <center>
        <div id="test">
            <img id='margin' src='ewd2.png' /><br />
            <img id='whale2' src='ewd.png' /><br />
            <div id="epileptic">
                <h1 id="header">
                    Epileptic<br /> Development
                </h1>
            </div>
            <div id='p'>
                <p>
                    Welcome to the official Epileptic Development website! <br />We'll be posting our news, games and projects here!                  
                </p>
                <p id='subreddit'>
                    <a href='http://www.reddit.com/r/sonl'>Our official sub reddit</a><br />
                </p>
                <p id='iTwitter'>
                    <a href='http://www.twitter.com/doorshaveknobs'>iPoisonxL's Twitter</a><br />
                </p>
                <p id='MTwitter'>
                    <a href='http://www.twitter.com/swagmaster63487'>MaXXik's Twitter</a><br />
                </p>
                <a href='/files/babyheadsmasher.zip'><img id='bhs' src='screen.png' title='Download BABY HEAD SMASHER!!' width='231' height='227' /></a>
                <a href='/files/sonl.zip'><img id='sonl' src='sonl.png' title='Download SoNL!!' width='231' height='227' /></a><br />
            </div>
        </div>
    </center>
    </div>
</body> 
```

这是图像/文本的 CSS 代码：

```
#p {
font-family: inc;
font-size: 18;
border: 5px solid black;
border-top: 3px solid black;
border-radius: 15px;
-moz-border-radius: 15px;
margin-top: 0px;
background-color: orange;
margin-bottom: 0px;
padding: 10px;
padding-bottom: 284px;
}
img#margin {
    float: left;
    margin-left: 40px;
    margin-top: 20px;
}
img#whale2 {
    float: right;
    margin-right: 40px;
}
#bhs {
    float: left;
    border-radius: 15px;
    border: 5px solid black;
    margin-left: 15px;
    filter: grayscale(100%);
    -webkit-filter: grayscale(100%);
    -moz-filter: grayscale(100%);
    -ms-filter: grayscale(100%);
    -o-filter: grayscale(100%);
}
#bhs:hover {
    filter: grayscale(0%);
    -webkit-filter: grayscale(0%);
    -moz-filter: grayscale(0%);
    -ms-filter: grayscale(0%);
    -o-filter: grayscale(0%);
}
#sonl {
    float: right;
    border-radius: 15px;
    border: 5px solid black;
    margin-right: 15px;
    filter: grayscale(100%);
    -webkit-filter: grayscale(100%);
    -moz-filter: grayscale(100%);
    -ms-filter: grayscale(100%);
    -o-filter: grayscale(100%);
}
#sonl:hover {
    filter: grayscale(0%);
    -webkit-filter: grayscale(0%);
    -moz-filter: grayscale(0%);
    -ms-filter: grayscale(0%);
    -o-filter: grayscale(0%);
}
#subreddit {
} 
```

注意：我只放了相关的CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:25:47.880

除非我误解了您的要求，否则我认为您可能太努力了。这有效：

HTML

```
<img id="img1" src="http://dummyimage.com/100X100/000/fff" />
<div id="div1">This is text</div>
<img id="img2" src="http://dummyimage.com/100X100/000/fff" /> 
```

CSS

```
#div1 {
    display:inline;
} 
```

结果：

![在此处输入图像描述](../Images/cb76efe597663990b459b2cbcf7eda35.png)

这是[一个工作小提琴](http://jsfiddle.net/znPP4/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:29:07.943

您可以通过设置`float:left`和`float:right`图像轻松完成此操作，并将文本作为容器的最后一个子项：

```
<div class="container">
    <img class="floatleft" src="http://www.epilepticdev.tk/screen.png" />
    <img class="floatright" src="http://www.epilepticdev.tk/sonl.png" />
    <div class="txt">
        <p>your text</p>
    </div>
</div>

.container {
    overflow: hidden;
}
.floatleft {
    float: left;
}
.floatright {
    float: right;
} 
```

[http://jsfiddle.net/6KwEZ/](http://jsfiddle.net/6KwEZ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T15:50:47.053

```
<div class="maindiv">
    <div class="element">IMAGE</div>
    <div class="element">TEXT</div>
    <div class="element">IMAGE</div>
</div>

//CSS Code
.maindiv{width:600px;}
.element{width:200px; float:left;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:28:05.107

试试这个 ：

html：

```
<div>
    <img src="http://placehold.it/32x32" alt=""/>Test of text<img src="http://placehold.it/32x32" alt=""/>
</div> 
```

CSS：

```
div {text-align:center}
div img {margin:0 5px;vertical-align:middle} 
```

示例[小提琴在这里](http://jsfiddle.net/NUyVn/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T13:28:53.350

请尝试以下代码并将内联 css 转换为您的 css。

```
<div>
    <div style="width:200px; float:left;">IMAGE</div>
    <div style="width:200px; float:left;">TEXT</div>
    <div style="width:200px; float:left;">IMAGE</div>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T14:22:21.197

当然，我只是想出了最简单的方法。有边距。我所要做的就是降低它`margin-top`以使其与文本对齐。感谢大家的帮助。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-06T13:26:36.280

将所有 3 个元素放在 DIV 中并浮动每个 div。应该解决你的问题。

# joomla - Joomla 1.5 SEO URL 不适用于多种语言——

> ID：15248504
> 
> 赞同：0
> 
> 时间：2013-03-06T13:23:24.083
> 
> 标签：joomla, joomla1.5

我有一个网站，它是用 joomla 1.5 构建的，有英语和阿拉伯语两种语言。我最近启用了 Joomla SEO URL，并使用自定义别名 URL 为所有文章添加别名。Alias 在英语版本（默认安装语言）上运行良好，但在阿拉伯语上运行良好。

有什么选项我可以为不同的语言指定单独的别名吗？还是我缺少任何配置？

请指教

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:28:59.610

翻译实际内容时，网站上未启用 SEO URL 选项。这导致组件忽略别名字段的翻译，并且“将原件复制到别名”选项也被禁用。

启用 SEO URLS 选项后，在翻译时确保您已翻译别名或将原件复制到翻译字段。无需付费插件！

这适用于除默认语言之外的所有语言的组件、文章和菜单项。

# java - Android 设备上的 GCM 演示

> ID：15248507
> 
> 赞同：1
> 
> 时间：2013-03-06T13:23:35.267
> 
> 标签：java, android, google-cloud-messaging

我正在关注 Android GCM 演示教程（[http://developer.android.com/google/gcm/demo.html](http://developer.android.com/google/gcm/demo.html)），并且我正在尝试让该应用程序在我的 Android 手机上运行，​​但是每当我运行该应用程序时我收到消息的电话：正在尝试（尝试 1/5）在演示服务器上注册设备

然后在 5 次尝试失败后，我收到错误消息： 5 次尝试后无法在演示服务器上注册设备

在尝试运行应用程序之前，我正在运行 GCM 服务器，而 GCM 服务器正在我的本地笔记本电脑上运行。以下服务器值已在 GCM-Demo-Client 项目的“app”文件夹中的“CommonUtilities”文件中设置。

```
SERVER_URL = "http://192.168.1.100:8080/gcm-demo";
SENDER_ID = "245619476079"; 
```

我知道这是一个内部 IP 地址，但是我在尝试在我的外部 IP 地址上运行服务器时遇到了其他问题，并且我的 Android 设备已连接到同一个 WI-FI 网络，所以我不确定为什么这行不通。

请帮忙 ：）。

PS 如果有人对如何让 GCM-Demo-Server 在我的外部 IP 地址上运行有任何建议，那就太好了！目前，我能为我的机器找到的唯一外部 IP 地址是无线调制解调器/路由器的 IP，它只允许我访问调制解调器/路由器选项（即使我让 GCM-Demo-Server 在该外部IP地址）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T08:08:28.770

```
SERVER_URL = "http://192.168.1.10:8080"; 
```

使用这个 url，它会在 page: 上注册 `http://192.168.1.10:8080/home`，而不是在 page 上 `http://192.168.1.10:8080/gcm-demo`，并且不能发送消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:33:54.877

终于设法解决了这个问题。不知道为什么，但在从 URL 末尾删除“/gcm-demo”后，我的设备能够成功连接到 GCM 服务器并接收消息。因此，在“CommonUtilities.java”文件中设置的最终“SERVER_URL”显示为：

```
SERVER_URL = "http://192.168.1.100:8080"; 
```

还要感谢尼克的提示，设法通过端口转发使其工作在我的外部 IP 地址上，使最终的 SERVER_URL 看起来像：

```
SERVER_URL = "http://<external_ip>:8080"; 
```

谢谢你们的帮助：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T09:42:21.823

确保在 php.ini中启用**curl 。**这个对我有用。

例如，对于**Ubuntu/Debian**服务器，您需要运行以下命令：

```
sudo apt-get install php5-curl 
```

之后，重新启动 Apache 服务器：

```
sudo /etc/init.d/apache2 restart 
```

使用**Windows**尝试从 wamp 设置启用。

有关启用 curl 的更多信息，请参阅[此](https://stackoverflow.com/questions/1347146/how-to-enable-curl-in-php-xampp)

# jquery - 是否有等效的 jquery Regex 以及如何使用它？

> ID：15248508
> 
> 赞同：1
> 
> 时间：2013-03-06T13:23:37.753
> 
> 标签：jquery, regex

基本上有一个 img src 我正在通过 DOM 检索，它看起来像这样

```
<img title="SAC PICOTIN HERMES" alt="SAC PICOTIN HERMES" id="bigpic" width="300" height="300" style="display: inline-block;" src="../198-thickbox/sac-picotin-hermes-beige-vintage.jpg"> 
```

正如您从 src 中看到的，它不是一个完整的 URL。我需要找到一种方法来删除第一个反斜杠之前的两个 .. ，以便我可以附加文件夹的完整 URL。

我目前的代码是：

```
var image = $('#window').contents().find('#primary_block #image-block img').attr('src');
var imageCheck =/../g;
var imageURL = image.replace(DO SOME REGEX HERE) 
```

如何从 URL 中替换和删除这两个 ..？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:26:29.320

你需要

```
var imageURL = image.replace(/^\.\./, '') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:30:41.547

如果总是有两个领先时期：

```
var imageURL = 'http://full-url-here' + image.substr(2); 
```

除此以外：

```
var imageURL = image.src.replace(/^\.*/, 'http://full-url-here'); 
```

# authentication - 在 twitter 上更改应用程序权限会导致身份验证对话框不重定向到回调 url

> ID：15248510
> 
> 赞同：2
> 
> 时间：2013-03-06T13:23:41.600
> 
> 标签：authentication, redirect, twitter, callback, twitter-oauth

当我更改 twitter 上的默认应用程序权限时，我无法通过 twitter 对我的应用程序进行身份验证。

以前，我将应用程序权限设置为只读。我进入 dev.twitter.com 上的应用程序并将我的默认权限更改为读/写。如果用户之前已授权该应用程序并拥有只读权限，然后尝试登录该应用程序，它会向他们显示身份验证对话框（这很有意义，因为它现在请求读/写）但问题是当您单击“登录”它不会重定向到回调 url，只是提交到[https://api.twitter.com/oauth/authenticate](https://api.twitter.com/oauth/authenticate) 并且没有任何反应。

如果我撤销应用程序然后登录，一切正常，以前没有 htis 应用程序只读授权的新用户也会被重定向。它仅适用于当前已获得应用程序授权但具有不同权限级别的用户。

我已经尝试通过更改 twitter 上的默认应用程序权限以及将 x_auth_access_type 参数修改为 request_token 调用，它们的行为方式相同。

知道这里出了什么问题吗？

# c# - 在现有文档中填充 XML 元素

> ID：15248511
> 
> 赞同：0
> 
> 时间：2013-03-06T13:23:47.480
> 
> 标签：c#, xml, linq-to-xml

我在文档中有这个 XML 元素字符串

```
<dmc><avee><modelic></modelic><sdc></sdc><chapnum></chapnum><section></section>
<subsect></subsect><subject></subject><discode></discode><discodev></discodev>
<incode></incode><incodev></incodev><itemloc></itemloc></avee></dmc> 
```

我现在需要做的是使用 Linq 用用户输入的变量填充这些元素。我目前有：

```
XDocument doc = XDocument.Load(sgmlReader);
doc.Element("modelic").Add(MI);
doc.Element("sdc").Add(sd);
doc.Element("chapnum").Add(sys);
doc.Element("section").Add(subsys);
doc.Element("subsect").Add(subsubsys);
doc.Element("subject").Add(unit);
doc.Element("discode").Add(dc);
doc.Element("discodev").Add(dcv);
doc.Element("incode").Add(infcode);
doc.Element("incodev").Add(infCV);
doc.Element("itemloc").Add(loc); 
```

（是的，我正在使用 sgmlReader，但这在我的其他领域的程序中运行良好）我显然缺少一些基本的东西，因为它给了我一个`NullReferenceException was unhandled - Object reference not set to an instance of an object`.

请问有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:29:36.430

这应该有效：

```
 var avee = dmc.Root.Element("avee");
        avee.Element("modelic").Value = MI;
        avee.Element("sdc").Value = sd; 
```

`chapnum`只需为剩余的每个元素（ ，`section`...）重复最后一行。

问题是首先您必须检索根元素 ( `dmc`)，然后`avee`是 ，然后您可以为 的子元素设置值`avee`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:30:05.013

[Element()](http://msdn.microsoft.com/en-us/library/system.xml.linq.xcontainer.element.aspx)方法只匹配容器的直接子级。

您可以将[Descendants()](http://msdn.microsoft.com/en-us/library/bb353813.aspx)链接到[First()](http://msdn.microsoft.com/en-us/library/bb291976.aspx)：

```
doc.Descendants("modelic").First().Add(MI); 
```

或者导航到要修改的元素的直接父级：

```
doc.Root.Element("avee").Element("modelic").Add(MI); 
```

# mysql - 内连接检查所 有行？

> ID：15248513
> 
> 赞同：1
> 
> 时间：2013-03-06T13:23:48.850
> 
> 标签：mysql, inner-join

表格1

```
id name
1  test
2  test2
3  test3
4  test4 
```

表2

```
id total
1   40%
4   80% 
```

如果我们对这些表使用内连接，连接是否检查所有行并最终返回匹配的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:26:10.100

INNER JOIN 匹配表 a 和表 b 中的结果

当两个表中至少有一个匹配时返回行

**这里是一个连接的例子**

![在此处输入图像描述](../Images/2cb6f4ba7c4186ce17ba3ca85f4ec2e4.png)

编辑 。

在您的示例中，使用**ineer join**

```
 select * from table1 t1
   inner join table2 t2
   on t1.id=t2.id 
```

你会得到结果：

```
 ID    NAME    TOTAL
   1    test    40%
   4    test4   80% 
```

通过使用**左连接**

```
 select * from table1 t1
    left join table2 t2
    on t1.id=t2.id 
```

结果是

```
 ID     NAME    TOTAL
  1     test    40%
  2     test2   (null)
  3     test3   (null)
  4     test4   80% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:26:26.853

简短的回答是的。这将获取例如 ( `join table2 using(id)`) test 40% 和 test4 80%)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:36:49.953

如果需要，可以使用外部联接：

```
1 test   40%
2 test1
3 test2
4 test3  80% 
```

即，您想在其 id 字段上加入表，但要查看两个表中的所有信息

# awk - 在 pdb 文件中使用 grep

> ID：15248515
> 
> 赞同：0
> 
> 时间：2013-03-06T13:23:51.887
> 
> 标签：awk, grep

我有一个 PDB 文件，简而言之，它看起来有点像这样

```
ATOM   1189  CA  ILE A 172       4.067   0.764 -48.818  1.00 19.53           C  
ATOM   1197  CA ATHR A 173       7.121   3.051 -48.711  0.50 17.77           C  
ATOM   1198  CA BTHR A 173       7.198   2.978 -48.704  0.50 16.94           C  
ATOM   1208  CA  ALA A 174       7.797   2.124 -52.350  1.00 16.85           C  
ATOM   1213  CA  LEU A 175       4.431   3.707 -53.288  1.00 16.47           C  
ATOM   1221  CA  VAL A 176       4.498   6.885 -51.185  1.00 13.92           C  
ATOM   1228  CA  ARG A 177       6.418  10.059 -51.947  1.00 20.28           C  
ATOM   1241  CA  GLN B  23     -15.516  -2.515  13.305  1.00 32.36           C  
ATOM   1250  CA  ASP B  24     -12.740  -2.653  10.715  1.00 22.25           C  
ATOM   1258  CA  PHE B  25     -12.476  -2.459   6.886  1.00 19.17           C  
ATOM   1269  CA  TYR B  26     -12.886  -6.243   6.470  1.00 14.87           C  
ATOM   1281  CA  ASP B  27     -16.276  -6.196   8.222  1.00 18.01           C  
ATOM   1289  CA  PHE B  28     -17.998  -4.432   5.309  1.00 15.39           C  
ATOM   1300  CA  LYS B  29     -19.636  -5.878   2.191  1.00 14.46           C  
ATOM   1309  CA  ALA B  30     -19.587  -4.640  -1.378  1.00 15.26           C  
ATOM   1314  CA  VAL B  31     -21.000  -5.566  -4.753  1.00 16.26           C 
```

我想去的是摆脱B并保留A，然后摆脱除第6排之外的所有东西

```
grep ^ATOM 2p31protein.pdb | grep ' CA ' | grep ' A ' | cut -c23-27 
```

这就是我尝试过的，用 ATOM 和 CA 获得我想要的一切，并获得我想要的行，但它并没有摆脱 B

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:27:22.780

这更适合`awk`：

```
$ awk '$1=="ATOM"&&$3=="CA"&&$5=="A"{print $6}' file
172
173
173
174
175
176
177 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:26:49.397

使用 awk 你可能会更容易：

```
awk '$1=="ATOM" && $3=="CA" && $5=="A"{print $6}' your.pdb 
```

# python - 没有数学模块python

> ID：15248516
> 
> 赞同：0
> 
> 时间：2013-03-06T13:23:52.020
> 
> 标签：python, math, module, compilation, xlwt

我在 SunOS2.10 中工作。我非常需要 python 中的 xlwt(xlrd) 模块（默认版本 2.4.6）。在管理员用户的一个文件夹中，我找到了 Python 2.7.1，所以如果我写完整路径我可以用它代替 2.4.6。我没有直接安装模块的权限，所以我使用了命令：

```
(path to ver 2.7)/python setup.py install --user 
```

并且模块 xlrd 安装没有问题。但在安装模块 xlwt 期间发生错误：

“ImportError：没有名为数学的模块”

我检查了帮助（'modules'），它列出了我的模块“math_failed”，据我所知应该只有数学。我也尝试使用 Python 2.4 安装这个模块（xlwt），但它给了我一个错误：

"选项 -- 用户无法识别",

所以据我了解，此 python 版本中不提供此选项（但数学模块在那里工作正常）。

我还尝试使用以下方法在本地安装整个 Python：

> > 。/配置
> > 
> > make altinstall 前缀=~ exec-prefix=~

但它也没有工作，因为在“配置”期间我收到错误：

“检查 C 编译器是否工作......不”

我不知道如何用编译器解决这个问题或如何在本地安装数学模块，因为我什至找不到下载它的地方。

如果有人有任何想法，请给我写信，因为我只是卡住了，不知道该怎么做。另外我不得不提一下，我是编程的初学者，如果我写了 smt，我很抱歉。愚蠢的:) 在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:04:36.783

听起来 Python 2.7 数学模块编译得很糟糕。也许没有正确包含 C 数学库。

在 Python 2.7 提示符下，尝试：

```
>>> import math
>>> math.__file__ 
```

然后，使用该文件名，在命令行（Python 之外）上，尝试

```
$ ldd <filename> 
```

（注意：我不知道`ldd`Sun OS 上是否存在；否则，我希望您知道等价物。）验证 libm 是否存在。例如，在我的 Linux 机器上，我看到

```
linux-vdso.so.1 =>  (0x00007fffaffff000)
libm.so.6 => /lib/libm.so.6 (0x00007f3326ccf000)
libpthread.so.0 => /lib/libpthread.so.0 (0x00007f3326ab3000)
libc.so.6 => /lib/libc.so.6 (0x00007f3326750000)
/lib64/ld-linux-x86-64.so.2 (0x00007f3327180000) 
```

如果您发现它丢失，请尝试在系统上找到它并将您的`LD_LIBRARY_PATH`或 Sun OS 设置为与所在目录等效`libm`，然后重试`ldd <filename>`。

如果这次可行，请尝试`xlwt`再次安装。请记住，您总是需要设置您的`LD_LIBRARY_PATH`或等效的设置（例如，通过 shell 源文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:17:58.110

作为替代方案，以下是在`xlwt`本地安装 Python 2.4 的方法：

```
python setup.py build
python setup.py install --prefix=${HOME}/.local 
```

请注意，该目录是Python 2.6/7 中选项`.local`使用的默认目录。`--user`

此安装`xlwt`，但不允许您运行它。现在，您需要`PYTHONPATH`正确设置：

```
export PYTHONPATH=${HOME}/.local/lib/python2.4/site-packages 
```

这假定一个`(ba)sh`类型外壳。

`python`由于每次在新 shell 中运行时都需要执行此操作，因此最好`PYTHONPATH`在 shell 源文件中进行设置。

而且，当然，如果已经`PYTHONPATH`有一套（`$ echo $PYTHONPATH`会告诉你），那就是

```
export PYTHONPATH=${PYTHONPATH}:${HOME}/.local/lib/python2.4/site-packages 
```

# database - 在 postgresql 数据库中从图像服务器检索到客户端

> ID：15248517
> 
> 赞同：0
> 
> 时间：2013-03-06T13:23:52.937
> 
> 标签：database, vb.net, postgresql

我正在使用`l_oid`（postgresql）存储图像。现在我想知道在前端（vb.net）中转换`l_oid`为图像`bytea``bytea`

[注意：[我不想使用`lo_import`，`lo_export`因为我在客户端服务器应用程序中需要它]](https://stackoverflow.com/questions/9312498/using-copy-with-binary-for-lo-export-in-postgresql-on-server-system)

任何人都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:50:52.693

使用 SQL 函数 loread( integer integer ) 将 BLOB 读取为 bytea。您可以使用 Npgsql 检索或插入 bytea 或编写 UDF 将 bytea 转换为 Base64 格式并将其作为文本返回

# jquery-ui - Jquery tabs ui 1.10 tabs refresh

> ID：15248519
> 
> 赞同：1
> 
> 时间：2013-03-06T13:23:57.753
> 
> 标签：jquery-ui

我正在使用 jquery 选项卡。想知道如何在单击选项卡时刷新内容。我正在使用带有 $(#TABS).TABS() 的文档就绪功能

```
$(document).ready(function(){
    $("#tabs").tabs();
      $("#tabs").bind("tabshow",function(event,ui){window.location.href=ui.tab;});}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:36:14.620

[请参阅此处](http://docs.jquery.com/UI/Tabs#event-select)的“选择事件”

它说：

> 单击选项卡时会触发此事件。代码示例

提供一个回调函数来处理选择事件作为一个初始化选项。

```
$( ".selector" ).tabs({
   select: function(event, ui) { ... }
}); 
```

按类型绑定到选择事件：tabsselect。

```
$( ".selector" ).bind( "tabsselect", function(event, ui) {
  ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:41:37.660

在 jQuery-UI 1.10 中，以下内容应该有所帮助：

```
$("#TABS").tabs("load", $("#TABS").tabs("option", "active")); 
```

**编辑：**更多代码细节：

```
$(function() {
    $("#TABS").tabs();
    $("#TABS").on('click','li',function(event,ui) {
        $("#TABS").tabs("load", $("#TABS").tabs("option", "active"));
    });            
}); 
```

这是[**jsfiddle 的链接**](http://jsfiddle.net/martyk/xaESY/3/)

# sql-server - 以选择为参数执行存储过程

> ID：15248520
> 
> 赞同：2
> 
> 时间：2013-03-06T13:23:59.560
> 
> 标签：sql-server, stored-procedures, exec

我在 sql server 上有一个存储过程，它需要 2 个参数。我想为选择返回的每一行运行 stp。

```
CREATE PROCEDURE stpMySTP @param1, @param2
AS BEGIN
   --select something from database regarding this parameters
END 
```

我想运行这个 stp 并传递一个`@param2`由 select 语句返回的参数列表。

就像是 ：

```
 EXEC stpMySTP '',(SELECT ....) 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:56:02.307

如果我正确地阅读了这个问题（我可能不是）:::

这是游标可能的解决方案之一。 **但是，游标通常是糟糕的解决方案。**

```
USE [Northwind]
GO

/*  uspCustomerGetSingleWithOrders 'SIMOB'  */

CREATE  PROCEDURE [dbo].[uspCustomerGetSingleWithOrders]  (
    @customerId varchar(12)
)

AS 

SET NOCOUNT ON 

Select 
    --CustomerID ,
    --ContactName , 
    --City
    CustomerID,CompanyName,ContactName,ContactTitle,Address,City,Region,PostalCode,Country,Phone,Fax
from 
    dbo.Customers

WHERE
    LTRIM(RTRIM(UPPER(CustomerID))) = LTRIM(RTRIM(UPPER(@customerId)))

Select 
    OrderID,CustomerID,EmployeeID,OrderDate,RequiredDate,ShippedDate,ShipVia,Freight,ShipName,ShipAddress,ShipCity,ShipRegion,ShipPostalCode,ShipCountry
from 
    dbo.Orders o
WHERE
    LTRIM(RTRIM(UPPER(o.CustomerID))) = LTRIM(RTRIM(UPPER(@customerId)))

SET NOCOUNT OFF

GO 
```

现在是一个光标（ :< ）

```
Use Northwind

GO

declare @PROC_fetch_status int

declare @CustomerID varchar(12)
declare @ContactName varchar(24)

--    Select * from Customers
DECLARE curCustomers CURSOR FAST_FORWARD FOR select CustomerID , ContactName
from Customers Order by ContactName
OPEN curCustomers

-- Perform the first fetch.
fetch curCustomers into @CustomerID , @ContactName

select @PROC_fetch_status = @@fetch_status

    IF @PROC_fetch_status <> 0
 begin
  print 'No Records'
 end

    WHILE @PROC_fetch_status = 0
    BEGIN

        print 'Current Customer  = ' + @CustomerID + '  :  ' + @ContactName
        print '------------------------------------'
        print ''
        EXEC dbo.uspCustomerGetSingleWithOrders @CustomerID
        print ''
        print ''

        FETCH NEXT FROM curCustomers INTO @CustomerID , @ContactName
        select @PROC_fetch_status = @@fetch_status

    END
CLOSE curCustomers
DEALLOCATE curCustomers 
```

但我建议阅读“基于集合”与“通过痛苦行来行”的哲学。如果您有兴趣，请留言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:06:59.983

我建议如下：

1.  如果您的参数列表相当简单，则使用字符串作为@param2。像'|1|2|100500|'。然后使用过程拆分字符串并使用这些参数
2.  如果您的程序返回一个值，则使用存储函数并在 SELECT 语句中使用函数调用
3.  使用专用表，您可以在其中推送感兴趣的值。像（SessionID，paramId，paramValue）。在 thios 情况下，您的 @param2 是这个额外表中的 SessionId

# c# - C# 基类还是模板类？

> ID：15248526
> 
> 赞同：1
> 
> 时间：2013-03-06T13:24:04.737
> 
> 标签：c#, inheritance, base-class

好的，所以我正在使用 XNA 制作游戏，我希望所有敌人都从一个名为“baseEnemy.cs”的基类扩展。例如，我想要一个僵尸有一个名为“zombie.cs”的类，但让它以“baseEnemy.cs”为结尾。

我想我记得有人告诉我它的布局如下：

```
class zombie : baseEnemy
{

} 
```

但我假设使用 get{} 和 set{} 将帮助我更改作为 baseEnemy.cs 的一部分存在的zombies.cs 中当前变量的值......如果这有意义吗？我不了解 get{} 和 set{} 的用法，但我在其他语言中看到过它（例如 minecraft 的代码），我认为它们的工作方式相似。

所以，假设我对敌人的速度有一个浮动......我不希望所有的敌人都以相同的速度移动（僵尸应该有低速等）。我如何从 baseEnemy.cs 中获取速度并将其设置为zombie.cs 中的速度。

还是在baseEnemy.cs中公开变量会更好吗？

抱歉，如果上述内容没有多大意义，我对 XNA 或使用的术语不太熟悉，因此我可能听起来像是在绕圈子：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:01:06.920

您正在寻找所谓的*抽象方法*或*抽象属性*。

```
abstract class Enemy
{
    public abstract float GetSpeed();
}

class Zombie : Enemy
{
    public override float GetSpeed()
    {
        return 10;
    }
} 
```

注意`abstract`类名和方法名前面的关键字。子类必须实现*所有*抽象成员，如果它本身不是抽象的。实现抽象成员时，`override`必须使用关键字。

`get` `set`您描述的语法称为*property*。它是一种特殊的 C# 构造，用于组织字段的 getter 和/或 setter，并将它们放在一个块中。与上面使用属性的示例相同：

```
abstract class Enemy
{
    public abstract float Speed { get; }
}

class Zombie : Enemy
{
    public override float Speed
    {
        get { return 10; }
    }
} 
```

# knockout.js - 当相关的 observable 发生变化时，我的 javascript 变量会发生变化

> ID：15248539
> 
> 赞同：0
> 
> 时间：2013-03-06T13:24:29.487
> 
> 标签：knockout.js

我正在学习 Knockout 并想了解一些东西。我有以下代码：

```
var vehicleModel = { "VehicleId": 0, "Category": "", "Brand": "", "Model": "", "Registration": "", "Available": "" };
self.searchCriteria = ko.observable(vehicleModel); 
```

如果我理解的话，vehicleModel 的值会受到 self.searchCriteria 的影响，对吧？在我看来，这个 searchCriteria 将是“可观察的”并且可以访问，对吧？

我不明白的是，当我在我的视图中更改 searchCriteria 的值时，vehicleModel 的值也会更改。

有人可以解释我吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T15:49:48.097

您可以将您的车辆模型更改为：

```
var vehicleModel = function(){
    this.VehicleId=0;
    this.Category="";
    this.Brand="";
    this.Model="";
    this.Resgitration="";
    this.Available="";
} 
```

然后做：

```
self.searchCriteria = ko.observable(new vehicleModel()); 
```

这样，vehicleModel 就像一个类，每次你都在实例化一个新对象： new vehicleModel()

# mysql - MYSQL 查询语法 - 未知列错误但列存在

> ID：15248541
> 
> 赞同：0
> 
> 时间：2013-03-06T13:24:37.260
> 
> 标签：mysql, sql

这个查询有什么问题：

```
SELECT * 
FROM families f JOIN family_histories fh ON f.id = fh.family_id
WHERE f.family_status_cat_id = 1422
AND (SELECT hst.created_at
     FROM family_histories hst 
     WHERE hst.family_history_cat_id = 1422 
     AND hst.new_value LIKE '%1422%')
BETWEEN '2010/2/13' AND '2013/3/6' 
```

我得到 -

> 'where 子句'中的未知列'hst.new_value'

. 但是专栏存在！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:55:12.857

试试这个查询 -

```
SELECT * FROM families f
  JOIN family_histories fh
    ON f.id = fh.family_id
WHERE
  f.family_status_cat_id = 1422 AND
  fh.created_at BETWEEN '2010-02-13' AND '2013-03-06' AND
  fh.family_history_cat_id = 1422 AND
  fh.new_value LIKE '%1422%' 
```

这是你想要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:36:43.077

如果列名是 new_val 那么你应该有以下查询

```
SELECT * FROM families f
JOIN family_histories fh
ON f.id = fh.family_id
WHERE
 f.family_status_cat_id = 1422 AND
 fh.created_at BETWEEN '2010-02-13' AND '2013-03-06' AND
 fh.family_history_cat_id = 1422 AND
 fh.new_val LIKE '%1422%' 
```

您将不需要您当前在查询中的第二次选择。它与 Devart 提到的查询相同。

# php - 使用 CURL 授权后使用 HTML DOM 解析页面

> ID：15248543
> 
> 赞同：1
> 
> 时间：2013-03-06T13:24:49.720
> 
> 标签：php, simple-html-dom

我正在寻找一种解决方案，如何在使用 CURL 授权后使用 Simple HTML DOM Parser 解析页面。

现在我有两个工作部分的代码：CURL 授权和简单的 HTML DOM 解析器

1) 使用 CURL 授权

```
$data = array();
$data['name'] = 'name';
$data['pass'] = 'pass';
$data['loginbtnUp'] = '1';
$data['submit_flag'] = '1';
$data['rand'] = microtime(true);
$data['formSubmitted']=1;

$post_str = '';
foreach($data as $key=>$val) {
    $post_str .= $key.'='.urlencode($val).'&';
}
$post_str = substr($post_str, 0, -1);
$cookie_file = "cookie.txt";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://login.page.com/' );
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_str);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file);
curl_setopt($ch, CURLOPT_AUTOREFERER, 1); 
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); 
$response = curl_exec($ch );

echo $response;

curl_close($ch); 
```

2) 和简单的 HTML DOM 解析器

```
include('simple_html_dom.php');

$context = stream_context_create(array('http' => array(
  'header' => 'User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.60 Safari/537.17'
)));
$html = str_get_html( file_get_contents('http://page.com/user1', false, $context) );

foreach($html->find('img[width="200"]') as $e)
    echo $e->src . '<br>'; 
```

我的问题是如何组合这些代码部分来解析只有授权用户才能访问的页面。我只需要登录一次，然后解析可供授权用户使用的不同页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:41:46.417

您已经使用 CURL 登录，这很好，但 CURL 现在将您的 cookie 保存在您的`CURLOPT_COOKIEJAR`文件中。

为了让站点继续为您提供受保护的内容，您需要继续使用它在登录后提供给您的会话 cookie 来提供它。

因此，您对受密码保护的页面的附加请求应该像您的登录过程那样使用 CURL（显然，您不需要`POST`，您可以`GET`）：

```
$ch = curl_init('https://login.page.com/protectedcontent');
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file);
curl_setopt($ch, CURLOPT_AUTOREFERER, true); 
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
$response = curl_exec($ch);
curl_close($ch);

$dom = str_get_html($response); 
```

# java - Java和win32游戏覆盖

> ID：15248544
> 
> 赞同：-3
> 
> 时间：2013-03-06T13:24:51.983
> 
> 标签：java, winapi, opengl, java-native-interface

我想为我的游戏创建一些叠加层（显示时间、一些基本信息等）。我怎么能接近这个？我应该使用什么工具？我还需要读取游戏内存来获取一些信息。

这甚至可以使用Java吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:44:54.663

我假设您要编写一个程序来修改另一个进程的窗口，因此需要读取该进程的内存。

**所以关于读取其他进程的内存：** 几乎所有语言都可以使用几乎任何语言，并且应该有可能使用 Java（编辑：[参见例如此处](http://trainers.deviatedhacking.com/index.php/topic/788-tutorial-on-coding-a-trainer-in-java-done-by-me/)）和一些巧妙地挂钩到 WinAPI 或您所针对的任何操作系统。但鉴于您提供的信息很少，我怀疑您是否有能力自己弄清楚所有事情。

那么如何使用 C 或 C++ 并遵循一些免费提供的教程（例如[这里](http://www.mpgh.net/forum/17-game-hacking-tutorials/7511-writing-your-own-c-trainer.html)）？如果要读取外部进程地址空间，则无论如何都必须学习如何管理内存。这是 Java 不会让事情变得更容易而是更困难的情况之一，因为该语言的“安全层”会妨碍您。

总结读取其他进程内存：没有理由使用Java来完成这样的任务。

*   使用它不会让事情变得更容易。
*   它减少了您可以遵循的文档/教程的数量。
*   无论如何，做这样的事情都不会是可移植的。

我会为**覆盖其他进程 OpenGL windows**提出几乎相同的论点。有一个[关于](https://stackoverflow.com/questions/925981/overlaying-on-a-3d-fullscreen-application)SO 处理这个的问题，也许你可以从那里开始。

# c# - 使用 Calendar1_SelectionChanged 创建 SqlParameter

> ID：15248546
> 
> 赞同：2
> 
> 时间：2013-03-06T13:24:52.630
> 
> 标签：c#, asp.net

我无法让我的 SqlParameter 在我的 SqlDataSource 选择命令中工作。I'm trying to run a query when a new calendar date on a calendar control is selected to filter the query by the date selected. 这是我在 C# 端的内容：

```
protected void Calendar1_SelectionChanged(object sender, EventArgs e)
{
    SqlParameter para1 = new SqlParameter("@mydate", SqlDbType.DateTime);
    para1.Value = Calendar1.SelectedDate;
    SqlDataSource1.SelectParameters.Add(para1);
} 
```

我/几乎/通过这个线程找到了我需要的东西： [如何设置 sqldatasource 参数的值？](https://stackoverflow.com/questions/988614/how-can-i-set-the-sqldatasource-parameters-value)

但最佳答案提供的解决方案为 SelectParameters.Add 行提供了以下错误：“最佳重载匹配......有一些无效参数。”

如何修复此错误并让参数在我的选择查询中工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:12:10.420

根据有关 Jon Skeet 在此链接上的回答的评论： [Setting DateTime as a SqlDataSource parameter for Gridview](https://stackoverflow.com/questions/8787303/setting-datetime-as-a-sqldatasource-parameter-for-gridview)，尝试将此行更改为

```
para1.Value = Calendar1.SelectedDate.ToString(); 
```

看看这是否有效。

**编辑** 来自 jadarnel27 的每条评论，请尝试以下操作：

```
SqlDataSource1.SelectParameters.Add("@mydate", SqlDbType.DateTime, Calendar1.SelectedDate.ToString()); 
```

与 `SQLParameter.Value`type一样`object`，重载可能会对 进行一些验证`Calendar1.SelectedDate.ToString()`以匹配`SQLDbType`

# rest - 黑莓 HttpConnection 和查询字符串

> ID：15248548
> 
> 赞同：2
> 
> 时间：2013-03-06T13:24:55.797
> 
> 标签：rest, blackberry, java-me, query-string, httpconnection

当我附加一个查询字符串时，我在连接到 uri 时遇到了一些问题......我总是返回 400 个 http 代码......但是当我尝试浏览器时，相同的 url，一切都很顺利......

这就是我所拥有的：

```
String query = "q=hello";
byte[] queryBytes = query.getBytes(); 
```

在我的代码中的某处，我使用这样的 queryBytes 打开一个 HttpConnection：

```
String uri = "https://www.google.co.ve/search" + "?" + new String(queryBytes);
HttpConnection request = (HttpConnection) Connector.open(uri);
request.getResponseCode(); 
```

如果我不使用字节进行连接，一切都可以正常工作：

```
String uri = "https://www.google.co.ve/search?q=hello"; 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:44:50.570

当我尝试这个时，我得到了 http 代码 200。

```
try {
    String httpURL = "https://www.google.co.ve/search?q=hello";
    HttpConnection httpConn;
    httpConn = (HttpConnection) Connector.open(httpURL);
    httpConn.setRequestMethod(HttpConnection.GET);
    DataOutputStream _outStream = new DataOutputStream(httpConn.openDataOutputStream());
    byte[] request_body = httpURL.getBytes();
    for (int i = 0; i < request_body.length; i++) {
        _outStream.writeByte(request_body[i]);
    }
    DataInputStream _inputStream = new DataInputStream(
    httpConn.openInputStream());
    StringBuffer _responseMessage = new StringBuffer();
    int ch;
    while ((ch = _inputStream.read()) != -1) {
        _responseMessage.append((char) ch);
    }
    String res = (_responseMessage.toString());
    String responce = res.trim();
    httpConn.close();

    Dialog.alert(responce);

} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

# php - google.maps.InfoWindow

> ID：15248550
> 
> 赞同：0
> 
> 时间：2013-03-06T13:25:00.850
> 
> 标签：php, javascript, html, google-maps, google-maps-api-3

我正在从 mysql 数据库中获取我的坐标，如下所示

```
(<?php echo $_Mylat?>, <?php echo $_Mylon?>)
(<?php echo $_Mylat2?>, <?php echo $_Mylon2?>) 
```

当我绘制地图时，它显示了两个点和方向，如下面的代码所示

```
 function initialize() {
    var mapOptions = {
    zoom: 13,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: center
    };

    map = new google.maps.Map(document.getElementById('map_canvas'),
          mapOptions);

    for (var i=0; i<a.length;i++)
    {
        marker = new google.maps.Marker({
        map:map,
        draggable:true,
        animation: google.maps.Animation.DROP,
        position: a[i]
       });

    }   
     var flightPlanCoordinates = [
         new google.maps.LatLng(<?php echo $_Mylat?>, <?php echo $_Mylon?>),
         new google.maps.LatLng(<?php echo $_Mylat2?>, <?php echo $_Mylon2?>)
    ]; 
```

例如，当我单击或将鼠标悬停在标记上时，我希望出现一个消息框，但它不起作用，有人可以帮我更正代码吗

```
 var contentstring = 'hey,this is my location'
     var infowindow = new google.maps.InfoWindow ({
    content:contentstring
    })

    google.maps.event.addListener(??????,'click',function(){
    infowindow.open(map,????????);}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:46:17.567

您必须为每个标记（在循环内）添加一个侦听器和信息窗口，所以它应该是这样的（未经测试）：

```
for (var i=0; i<a.length;i++) {

    var marker = new google.maps.Marker({
        map:map,
        draggable:true,
        animation: google.maps.Animation.DROP,
        position: a[i]
    });

    var contentstring = 'hey,this is my location'

    var infowindow = new google.maps.InfoWindow({
        content: contentString
    });

    google.maps.event.addListener(marker, 'click', function() {
        infowindow.open(map,marker);
    });

} 
```

如果您一次只想拥有一个信息窗口，您应该重用信息窗口，如此[处](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:48:33.177

通常，信息窗口带有标记。设置标记时，还要设置信息窗口和点击事件。

有关信息窗口使用的示例，请参阅[google 文档。](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)

不知道你从哪里得到 a.length，但我假设那是你飞行计划的两点。

```
for (var i=0; i<a.length;i++)
    {
        marker = new google.maps.Marker({
        map:map,
        draggable:true,
        animation: google.maps.Animation.DROP,
        position: a[i]
       });

    }

    var contentstring = 'hey,this is my location'
    var infowindow = new google.maps.InfoWindow ({
        content:contentstring
    })

    google.maps.event.addListener(marker,'click',function(){
        infowindow.open(map,marker);
    });
} 
```

# java - 无法重新录制 oni 文件

> ID：15248552
> 
> 赞同：0
> 
> 时间：2013-03-06T13:25:07.517
> 
> 标签：java, openni

我尝试用 Java 记录 oni 文件。当我录制一个文件时效果很好。但是当我想记录几个文件时，我遇到了问题。

这是一些测试代码：

```
package test;

import org.OpenNI.Context;
import org.OpenNI.DepthGenerator;
import org.OpenNI.GeneralException;
import org.OpenNI.ImageGenerator;
import org.OpenNI.OutArg;
import org.OpenNI.RecordMedium;
import org.OpenNI.Recorder;
import org.OpenNI.ScriptNode;

public class RecorderProblems {

    private static final String SAMPLE_XML_FILE = "KinectConfig.xml";
    private static final String TEST1_ONI_FILE = "Test1.oni";
    private static final String TEST2_ONI_FILE = "Test2.oni";

    public static void main(String[] args) {
        Context context = null;
        DepthGenerator depthGenerator = null;
        ImageGenerator imageGenerator = null;
        try {
            OutArg<ScriptNode> scriptNode = new OutArg<ScriptNode>();

            // Init Hardware
            System.out.println("Init Hardware");
            context = Context.createFromXmlFile(SAMPLE_XML_FILE, scriptNode);
            depthGenerator = DepthGenerator.create(context);
            imageGenerator = ImageGenerator.create(context);
            context.startGeneratingAll();

            // Record 1
            System.out.println("Start Record 1");
            Recorder recorder = Recorder.create(context, "oni");
            // Adding next line produces a corrupt file, but the program runs fine
//          context.createProductionTree(recorder.getInfo());
            recorder.setDestination(RecordMedium.FILE, TEST1_ONI_FILE);
            recorder.addNodeToRecording(depthGenerator);
            recorder.addNodeToRecording(imageGenerator);
            for (int i = 0; i < 100; i++) {
                context.waitOneUpdateAll(imageGenerator);
                recorder.Record();
            }
            recorder.removeNodeToRecording(depthGenerator);
            recorder.removeNodeToRecording(imageGenerator);
            recorder.dispose();

            // Record 2
            System.out.println("Start Record 2");
            recorder = Recorder.create(context, "oni");
            // Adding next line produces a corrupt file, but the program runs fine
//          context.createProductionTree(recorder.getInfo());
            recorder.setDestination(RecordMedium.FILE, TEST2_ONI_FILE);
            recorder.addNodeToRecording(depthGenerator);
            recorder.addNodeToRecording(imageGenerator);
            for (int i = 0; i < 100; i++) {
                context.waitOneUpdateAll(imageGenerator);
                recorder.Record();
            }
            recorder.removeNodeToRecording(depthGenerator);
            recorder.removeNodeToRecording(imageGenerator);
            recorder.dispose();
        } catch (GeneralException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            // End Hardware
            System.out.println("End Hardware");
            depthGenerator.dispose();
            depthGenerator = null;
            imageGenerator.dispose();
            imageGenerator = null;
            context.release();
            context.dispose();
        }
    }
} 
```

当我尝试为第二条记录设置目标时，我得到一个 StatusException“输入指针为空”。

如果我添加未注释的行，程序运行良好，但创建的 oni 文件不可读。（我不知道这条线到底是做什么的。）

我还尝试重新初始化上下文。起初这工作得很好，但是当我尝试记录几个文件时，我在重新初始化时也遇到了问题。这是一些示例代码：

```
package test;

import org.OpenNI.Context;
import org.OpenNI.DepthGenerator;
import org.OpenNI.GeneralException;
import org.OpenNI.ImageGenerator;
import org.OpenNI.OutArg;
import org.OpenNI.RecordMedium;
import org.OpenNI.Recorder;
import org.OpenNI.ScriptNode;

public class RecorderProblems {

    private static final String SAMPLE_XML_FILE = "KinectConfig.xml";

    public static void main(String[] args) {
        Context context = null;
        DepthGenerator depthGenerator = null;
        ImageGenerator imageGenerator = null;
        try {
            OutArg<ScriptNode> scriptNode = new OutArg<ScriptNode>();

            // Record 1
            for (int i = 0; i < 25; i++) {
                System.out.println("Run " + i);
                // Init Hardware
                System.out.println("Init Hardware " + i);
                context = Context
                        .createFromXmlFile(SAMPLE_XML_FILE, scriptNode);
                depthGenerator = DepthGenerator.create(context);
                imageGenerator = ImageGenerator.create(context);
                context.startGeneratingAll();

                System.out.println("Start Record " + i);
                Recorder recorder = Recorder.create(context, "oni");
                recorder.setDestination(RecordMedium.FILE, "test_" + i + ".oni");
                recorder.addNodeToRecording(depthGenerator);
                recorder.addNodeToRecording(imageGenerator);
                for (int j = 0; j < 100; j++) {
                    context.waitOneUpdateAll(imageGenerator);
                    recorder.Record();
                }
                recorder.removeNodeToRecording(depthGenerator);
                recorder.removeNodeToRecording(imageGenerator);
                recorder.dispose();

                System.out.println("End Hardware " + i);
                depthGenerator.dispose();
                depthGenerator = null;
                imageGenerator.dispose();
                imageGenerator = null;
                context.release();
                context.dispose();
            }

        } catch (GeneralException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

在第三次运行时，我得到了一个 StatusExcption “等待新数据时发生超时！”。

有没有人记录文件的经验？不知道是不是我用的库不对，还是OpenNI（用Java）的问题？

顺便说一句，我使用 OpenNI 1.5.2.23 和 Kinect 相机。XML 配置文件“KinectConfig.xml”是 OpenNI 示例附带的默认 XML 文件。我只是重命名了它。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:27:29.913

你为什么把事情搞得这么复杂？您可以为此**使用[Android 库](http://developer.android.com/guide/topics/media/audio-capture.html)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T17:07:11.940

我有读取 VGA 分辨率深度和 rgb 投注相同超时错误的问题。如果我将深度或 rgb 的分辨率降低到四分之一 vga，一切正常。

# android - 如何从 apk 扩展文件播放视频？

> ID：15248553
> 
> 赞同：2
> 
> 时间：2013-03-06T13:25:08.323
> 
> 标签：android, eclipse

我在 android 中创建开发应用程序，其中包含大约 500 mb 的视频，用于上传 apk 扩展文件方法我上传扩展并下载它，但现在我无法播放视频 [http://blogmobile.itude.com/2012/11/22/ expand-your-horizo​​ns-using-expansion-files-for-android/](http://blogmobile.itude.com/2012/11/22/expanding-your-horizons-using-expansion-files-for-android/) 我按照这个例子播放视频，但它不适用于我[http://ktakeda47.blogspot.com/2012/04/apk-expansion-files.html](http://ktakeda47.blogspot.com/2012/04/apk-expansion-files.html)我按照此链接下载扩展文件。现在请帮助我如何从扩展文件 Dir="/sdcard/Android/obb" 播放视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T08:26:00.550

我正在使用以下代码使用lib从 obb`APKexpansion`文件播放 mp4：`APKExpansionSupport`

```
ZipResourceFile expansionFile = null;
AssetFileDescriptor mAFD= null;
try {
    expansionFile = APKExpansionSupport.getAPKExpansionZipFile(this, 1, 0);
    mAFD = expansionFile.getAssetFileDescriptor(strVideoFile);
} catch (IOException e) {
    e.printStackTrace();
} catch (NullPointerException e) {
    e.printStackTrace();
}
    if (expansionFile==null || mAFD == null){
        Toast.makeText(this, "obb is not here or doesn't contain file: "+strVideoFile, Toast.LENGTH_LONG).show();
        return false;
    }
        mMediaPlayer.setDataSource(mAFD.getFileDescriptor(), mAFD.getStartOffset(), mAFD.getLength()); 
```

请记住 - 您必须在没有任何压缩级别的情况下打包 obb zip 存档。这个非常重要。它必须是没有压缩的 zip 存档 (level=0)。
[然而，`URI`在 APKES 文档中提到了一个（说到`VideoView`）](http://developer.android.com/google/play/expansion-files.html) ，但我无法获得如何`URI`从 APKES 获取的胶水。[最后我在这里找到了如何做到这一点](https://stackoverflow.com/questions/9623350/where-is-the-samplezipfileprovider-class) 所以要使用 URI，你必须`com.android.vending.expansion.zipfile.APEZProvider`像他的示例中那样扩展并对 Manifest 进行更改，它应该可以工作。

# java - 如何切换socketchannel的阻塞模式？

> ID：15248555
> 
> 赞同：1
> 
> 时间：2013-03-06T13:25:09.790
> 
> 标签：java, nio, socketchannel

我用来`SocketChannel`从客户端的服务器接收 TCP 流。例如：

```
Selector selector=Selector.open();
SocketChannel mychannel=SocketChannel.open(new InetSocketAddress(ip,port));
channel.configureBlocking(false);
SelectionKey channelkey=channel.register(selector,SelectionKey.OP_READ); 
```

然后，我可以使用该`selector.select()`方法来处理阅读问题。

```
while(true){
    if(selector.select()!=0){
       Iterator<SelectionKey> it=selector.selectedKeys().iterator();
       while(it.hasNext()){
         SelectionKey key=it.next();
         it.remove();
         if(key.isReadable()){
            if(key.equals(channelkey)){

               //concrete handle
               ...
            }
         }
       }
    }
} 
```

使用具体句柄，考虑到我想使用 InputStream（我想读取流线）从服务器端接收 tcp 流，有两种方法。一种是 using `channel.socket()`，另一种是使用 Channels。这里我使用`channel.socket()`，例如：

```
SocketChannel channel = (SocketChannel) key.channel();
key.cancel();
channel.configureBlocking(true);
InputStream ins = Channels.newInputStream(channel);
InputStreamReader is = new InputStreamReader(ins,"utf-8");
BufferedReader in = new BufferedReader(is);
String res = in.readLine();
while (!res.equals("")) {
    System.out.println(res);
    res = in.readLine();
}
       ......① 
```

好的，现在我读完了一次tcp流。为了继续使用选择器，我应该将通道阻塞模式设置为false。

```
 channel.configureBlocking(false); 
```

问题是，channel和selector组合的key被取消了，我想重新注册我的channel，怎么办？似乎如果我`mychannel.register(selector, SelectionKey.OP_READ)`在①上再次使用，它会抛出`Exception`.

我的 run() 方法代码如下：

```
try {
if (selector.select(getTimeout()) != 0) {
    Iterator<SelectionKey> it = selector.selectedKeys().iterator();
    while (it.hasNext()) {
        SelectionKey key = it.next();
        if (key.isReadable()) {
            SocketChannel channel = (SocketChannel) key.channel();
            key.cancel();
            channel.configureBlocking(true);
            InputStream ins = Channels.newInputStream(channel);
            InputStreamReader is = new InputStreamReader(ins,"utf-8");
            BufferedReader in = new BufferedReader(is);
            String res = in.readLine();
            while (!res.equals("")) {
                System.out.println("========" + res);
                res = in.readLine();
            }
            channel.configureBlocking(false);
            System.out.println(key.isValid());
            proxykey=channel.register(selector, SelectionKey.OP_READ);
        }
        it.remove();
    }
}
} catch (IOException ex) {
    ex.printStackTrace();
} 
```

它抛出的异常是：

```
 Exception in thread "Thread-0" java.nio.channels.CancelledKeyException
at sun.nio.ch.SelectionKeyImpl.ensureValid(Unknown Source)
at sun.nio.ch.SelectionKeyImpl.interestOps(Unknown Source)
at java.nio.channels.spi.AbstractSelectableChannel.register(Unknown Source)
at java.nio.channels.SelectableChannel.register(Unknown Source)
at AgentThread.run(AgentThread.java:185) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:09:53.663

`SelectionKey.cancel()``select()`由于各种神秘的原因，直到下一个才完全生效。您可以尝试`selectNow()`在取消后拨打电话，或者在重新注册之前拨打电话更好。

# php - PHP exec 运算符不执行特定命令

> ID：15248558
> 
> 赞同：0
> 
> 时间：2013-03-06T13:25:20.347
> 
> 标签：php, process, permissions, exec, shell-exec

尽管其他类似的行在工作，但我的其中一行 shell 命令没有执行。我正在使用基于 Ubuntu 12.04 的操作系统的 linux 机器上运行。我也试过用exec，还是不行。

实际上，我在某个时候遇到了这个问题，在那里我遇到了挂起的问题（等待命令输出），这就是我将输出重定向到 /dev/null 的原因。因此，在开发中的某些地方发生了一些变化。我们确实创建了一个要安装的 debian 包，并且我已经运行了该安装包，所以我想可能是在覆盖文件时权限发生了变化，所以我向所有用户/组/所有者添加了读/写/执行，但这也不起作用.

代码在这里：

```
if(isset($_POST['activateXML']))
{
    if (videoConsistencyCheck())
    {
        `cp {$fileXML} /apps/video/xml.xml`;
        `sudo /apps/video/vsss restart >/dev/null 2>&1 &`;
        systemUnvalidate();
        header('Location: index.php?app='.$_GET['app']);
        die();
    }
} 
```

我知道 if 语句中的第一行被执行。这行代码在实际终端中运行良好，所以这也不是问题。我做了很多谷歌搜索，我只能找到一个没有答案的问题，任何建议都会有所帮助。

编辑：所以看起来不起作用的实际上是按预期调用命令，但在 bash 脚本中我调用的启动-停止守护进程不起作用

编辑 2：我制作了一个测试 php 文件并从终端运行代码，通过在命令中添加 sudo 修复了 start-stop-daemon 错误，但它在我的代码中仍然不起作用。当按下提交按钮时，我正在调用此代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:21:00.477

问题在于调用 vsss 脚本中只能以 root 身份运行的二进制文件。我们不想让任何人都可以访问该二进制文件。我们提出的解决方案涉及在 vsss 脚本上调用 chmod +s，该脚本允许用户和组 ID 的权限，但保留其所有者权限。然后，我们使用 NOPASSWD 参数将 PHP 用户（即 www-data）添加到 sudoers 文件中。在我的 PHP 代码中，我使用了以下行：

```
exec('sudo /apps/video/vsss restart >/dev/null 2>&1 &') 
```

/ backticks`shell_exec()`不适用于此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:42:42.593

使用附加参数，尤其是输出： exec($command,$output); var_dump($输出); 以确定您的命令可能有什么问题。如果它不起作用，请向我们展示您使用 exec 的代码。

# javascript - javascript从数组中取值

> ID：15248559
> 
> 赞同：-2
> 
> 时间：2013-03-06T13:25:21.850
> 
> 标签：javascript, arrays, validation

```
form name="car" onsubmit="return validate()"
input type=text name=input[][] value...... 
```

如何从作为字段数组的字段输入中警报值？

```
 function validate(){
    alert("meee");
    var mycar = document.car.elements(input).value; // this line does NOT want to store value in mycar
    alert(mycar);
    } 
```

在这种情况下，会显示带有 mee 消息的警报框，但不会显示另一个应该显示值 mycar 的框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:26:34.377

好吧，只需使用方括号：

```
document.car.elements['input[][]'].value; 
```

# highcharts - Highstock Navigator 总是从 1970-1-1 开始

> ID：15248564
> 
> 赞同：9
> 
> 时间：2013-03-06T13:25:35.540
> 
> 标签：highcharts, highstock

在创建动态系列和数据时，Highstock 导航器总是将 1970-1-1 作为起点显示有问题……有人遇到过这个问题并有一些解决方法吗？

这是一个例子：http: [//jsfiddle.net/sokarovski/SRtvn/](http://jsfiddle.net/sokarovski/SRtvn/)

```
var $container = $('.canvas');
var chart = new Highcharts.StockChart({
    chart: {
        renderTo: $container[0]
    },
    xAxis: {
        type: 'datetime' , 
        ordinal: false 
    } 
});

chart.addSeries({
    data: [
        [Date.UTC(2013,1,1), 0],
        [Date.UTC(2013,1,5), 10],
        [Date.UTC(2013,1,15), 15],
        [Date.UTC(2013,2,5), 20],
        [Date.UTC(2013,2,28), 25],
        [Date.UTC(2013,3,3), 30],
    ]        
});

//I tried to fix it with this also but it does not help
chart.xAxis[0].setExtremes(Date.UTC(2013,1,1), Date.UTC(2013,3,3)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:16:21.627

这是因为当您尝试将系列/添加点添加到没有系列/数据的图表时，导航器无法正常工作。此处报告此错误：

[https://github.com/highslide-software/highcharts.com/issues/624](https://github.com/highslide-software/highcharts.com/issues/624)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:52:08.417

What we do is we pre-fetch our data we want to add to the chart and take the first point and create a series on the stock chart with just that one point. We then call the add data code to add the rest of the points such that the chart "plays".

Now, if you do not know what data you are going to get first (for example you let the user click a button to show data1 or data2 and you do not have a default) you can create your chart - but hide it. By using the loading [options](http://api.highcharts.com/highstock#Chart.showLoading%28%29). So, you create an empty chart and do not show it until such time the user has selected the data.

# cassandra - 我应该连接到哪个 Cassandra 节点？

> ID：15248570
> 
> 赞同：2
> 
> 时间：2013-03-06T13:25:54.697
> 
> 标签：cassandra, netflix

我可能在这里误解了一些东西，因为我不清楚我应该如何连接到 Cassandra 集群。我在 AWS 上有一个由 Priam 管理的 5 个节点的 Cassandra 1.2.1 集群。我想通过使用类似于以下代码的代码来使用 Astyanax 连接到该集群：

```
conPool = new ConnectionPoolConfigurationImpl(getConecPoolName())               .setMaxConnsPerHost(CONNECTION_POOL_SIZE_PER_HOST).setSeeds(MY_IP_SEEDS)
                .setMaxOperationsPerConnection(100) // 10000 
```

我应该使用什么作为 MY_IP_SEEDS？我应该使用以逗号分隔的所有节点的 IP 吗？还是应该只使用 1 台机器（种子机）的 IP？如果我只使用一台机器的 ip，我担心过多的请求会使这台机器过载。

我知道 Priam 有“get_seeds”REST api ( [https://github.com/Netflix/Priam/wiki/REST-API](https://github.com/Netflix/Priam/wiki/REST-API) )，它为每个节点返回一个 IP 列表，我也知道每个 RAC 有一个种子。但是，我不确定如果种子节点出现故障会发生什么......我在尝试建立新连接时需要连接到其他人，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:52:07.267

种子节点仅用于在节点启动时找到进入集群的方式 - 没有过载问题。

当然，其中一个节点必须在集群中可访问且已启动，才能使新节点启动并运行。

所以最好的方法是在启动节点之前从 Priam 更新种子列表。Priam 应该位于自动更新的 DNS 条目后面。

如果您的可用性最高，您应该定期存储来自 Priam 的当前种子列表并以镜像方式存储它们，就像您存储 puppet 或厨师配置一样，即使在 Priam 无法访问时也能够启动节点。

# php - 在 PHP 中的两个变量的值之间进行替换

> ID：15248571
> 
> 赞同：4
> 
> 时间：2013-03-06T13:25:55.517
> 
> 标签：php

我想知道是否可以在 PHP 中在两个变量的值之间进行**替换。**

我可以更好地解释它：

```
<?php
    $a = "Cat";
    $b = "Dog";

    // The strange/non-existent function I am talking about //
    MakeSubstitution($a, $b);

    // After this (non-existent) function the values of the variables should be:
        // $a = "Dog"
        // $b = "Cat"
?> 
```

那么，它存在吗？我进行了搜索，但没有找到任何结果。提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-06T13:27:41.130

尝试这个 ：

```
$a = "Cat";
$b = "Dog";

list($a,$b) = array($b,$a);

echo $a;
echo $b; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T13:31:06.130

在函数中通过引用处理它们，并交换它们的值：

```
function swap ( &$a, &$b ) {
    $t = $a; // Create temp variable with value of $a
    $a = $b; // Assign to $a value of $b
    $b = $t; // Assign to $b value of temp variable
}

$dog = "dog";
$cat = "cat";

swap($dog, $cat);

echo $dog; // Output 'cat' 
```

显然您也可以使用按位运算符，并避免创建临时函数/var/array 的开销：

```
$cat = "cat";
$dog = "dog";

$cat = $cat ^ $dog;
$dog = $cat ^ $dog;
$cat = $cat ^ $dog;

echo $cat . $dog; // Output 'dogcat' 
```

设法找到了按位方法的一个很好的例子：[https ://stackoverflow.com/a/528946/54680](https://stackoverflow.com/a/528946/54680)

# jqgrid - Jqgrid 错误代码：200 编辑时

> ID：15248573
> 
> 赞同：0
> 
> 时间：2013-03-06T13:25:57.370
> 
> 标签：jqgrid, edit

我有一个 jqgrid 问题。每当我在网格中编辑一行时，它都会完美地工作，因为它会更改数据库中的值，但在编辑窗口中我得到“解析器错误状态：'OK'。错误代码：200”。之后，我需要为页面充值才能看到所做的更改。这是代码：

```
 tableToGrid("#tabla",  
    {
        caption:'Lista de tramos',
        datatype:'json',
        mtype:'POST',
        loadonce:true,
        jsonReader:{repeatitems: false,  id:"0"},
        url:'json/TramosJQGrid.jsp',
        editurl:'json/operacionesTramos.jsp',        
        colNames:[
            'Codigo','AIC','Arqueta inicio','Latitud','Longitud','AFC','Arqueta fin','Latitud','Longitud','Comentario','Entidad' 
        ],

        colModel:[
            {name:'codigo',index:'codigo',hidden:true,editable:false,key:true,width:'100'},      
            {name:'elemReg1',index:'elemReg1',hidden:true,editable:false,editrules:{required:true}},
            {name:'elemReg1Nombre',index:'elemReg1Nombre',editable:false,editrules:{required:true}},
            {name:'elemReg1Lat',index:'elemReg1',editable:false,editrules:{required:true}},
            {name:'elemReg1Lon',index:'elemReg1',editable:false,editrules:{required:true}},
            {name:'elemReg2',index:'elemReg2',hidden:true,editable:false,editrules:{required:true}},
            {name:'elemReg2Nombre',index:'elemReg2Nombre',editable:false,editrules:{required:true}},
            {name:'elemReg2Lat',index:'elemReg2',editable:false,editrules:{required:true}},
            {name:'elemReg2Lon',index:'elemReg2',editable:false,editrules:{required:true}},
            {name:'comentario',index:'comentario',editable:true},
            {name:'entidad',index:'entidad',stype:'select',searchoptions:{dataUrl:'json/entidades.jsp',searchhidden:true},editable:true,edittype:'select',editoptions:{dataUrl:'json/entidades.jsp'}}

        ],

        sortable:true,        
        height:'auto',
        pager:jQuery('#navegacion'),
        viewrecords:true,
        rowNum:25,
        rowList:[10,15,20,25,50,75,100,150,200],           
        multiselect:'true',

    ondblClickRow:sacaMapaTramoUnico

});

//Definición de barra de navegación
    jQuery("#tabla").navGrid('#navegacion',
            {
                    searchtext:'Buscar',
                    refresh:true,
                    view:true,
                    add:false,
                    viewtitle:'Ver registro',
                    alertcap:'ATENCION',
                    alerttext:'No puede realizarse la operacion porque no ha seleccionado ninguna fila.'
            },
            {}, //edición
            {}, //nuevo
            {}, //borrado
            {closeAfterSearch:true, modal:true}, //buscar
            {} //ver registro
    );

        //Botón de eliminar selección
    jQuery("#tabla").navButtonAdd('#navegacion',
        {
            caption: "Eliminar selec.", buttonicon: "", position:"first",cursor:"pointer", title: "Eliminar selección",
            onClickButton: function() {                       
                $("#tabla").jqGrid('resetSelection');
            }
        });

                //Botón de seleccionar todo
jQuery("#tabla").navButtonAdd('#navegacion',
        {
            caption: "Selec. todos", buttonicon: "", position:"first",cursor:"pointer", title: "Seleccionar todo",
            onClickButton: function() {                       
                $("#tabla").jqGrid('resetSelection');
                var ids = $("#tabla").getDataIDs();
                for (var i=0, il=ids.length; i < il; i++) {
                    $("#tabla").jqGrid('setSelection',ids[i], true);
                }
            }
    });

                        //Botón de ver en mapa
jQuery("#tabla").navButtonAdd('#navegacion',
        {
            caption: "Ver en mapa", buttonicon: "ui-icon-image", position:"first",cursor:"pointer", title: "Ver en mapa",
            onClickButton: sacaMapaTramos
    });

$("#tabla").sortGrid('fecha'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T06:15:03.987

从编辑网址中定义的文件中获取响应：

```
int i=0;
    i=statement.executeUpdate("update jqgrid set name='"+name+"',contact='"+contact+"' where id='"+id+"'");
    if(i==0)
        {
        System.out.println("insertion failled");
        obj.put("res","insertion failled");
        }else
        {
        System.out.println("insertion succeed"+name+" "+contact);
        obj.put("res","insertion succeed");
        } 
```

毗婆娑

# android - Android：可以弯曲视图吗？

> ID：15248574
> 
> 赞同：2
> 
> 时间：2013-03-06T13:26:02.007
> 
> 标签：android, opengl-es

我想围绕圆柱体形式弯曲图像/视图。这将需要以某种方式转换 3d 模型中的视图并改变它以形成不同的形状。

这在android中甚至可能吗？如果是这样，大多数设计是否可以与此功能兼容？

# java - 如何在 javax.mail 中添加内联图像？

> ID：15248575
> 
> 赞同：1
> 
> 时间：2013-03-06T13:26:08.383
> 
> 标签：java, google-apps

在我的项目中，我想用一个内联图像发送邮件我如何在 googleapp 中设置内联图像。任何人都可以帮助我。在我的项目中，我正在使用 java 和 googleapp

# java - 如何在 Java 中转换为时间戳格式？

> ID：15248576
> 
> 赞同：0
> 
> 时间：2013-03-06T13:26:09.150
> 
> 标签：java, string, datetime, timestamp

我以“1/23/2013 6:57:17 AM”格式获取日期时间，需要将其转换为“2012-01-01T12:00:00”格式。我可以通过使用字符串函数并分离日期和时间并单独处理它们来解决这个问题。但问题是日期格式是 M/D/YYYY 甚至时间只有 h:mm:ss 这意味着我不能假设每个分隔符之前的字符数。我希望有人以前处理过这样的事情。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:27:33.453

不，`String`功能*不是*要走的路。

我建议使用两个`DateFormat`实例：一个用于源格式，另一个用于目标格式。

```
DateFormat source = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");
source.setLenient(false);
DateFormat target = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
target.setLenient(false);
String dateAsString = "1/23/2013 12:00:00 AM";
Date d = source.parse(dateAsString);
System.out.println(target.format(d)); 
```

# android - wpl_cli : 没有找到有根的 android 设备？

> ID：15248581
> 
> 赞同：1
> 
> 时间：2013-03-06T13:26:21.410
> 
> 标签：android, linux, wifi, wireless, android-wifi

我植根了我的android设备然后我去**adb shell**，然后`su`输入进入`wpa_cli`。
我很惊讶这出现了：`wpa_cli: not found`虽然我在输入时得到了信息：`wpa_supplicant`？

我知道`wpa_cli`从同一个图书馆`wpa_supplicant`？
从这个[链接](http://hostap.epitest.fi/wpa_supplicant/devel/dir_4b5a81f4cd4d61143d67145bf49b62e1.html)

安卓是基于linux的！！那么为什么在他们的内核中找不到这些命令呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T04:07:12.923

因为 wpa_supplicant 不是一个库，它是一个可执行文件。简介在这里：[http](http://en.wikipedia.org/wiki/Wpa_supplicant) ://en.wikipedia.org/wiki/Wpa_supplicant和源代码在这里：[https ://github.com/android/platform_external_wpa_supplicant](https://github.com/android/platform_external_wpa_supplicant)

是的，wpa_cli 是从相同的代码库构建的，但不包含在大多数手机上。Android 使用 wpa_crl.c/wpa_ctrl.h 接口，而不是命令行实用程序 wpa_cli。

内核不包含通过 shell 调用的命令和可执行文件。

# sql - SQL：使用另一个表中的旧值替换列中的文本值

> ID：15248582
> 
> 赞同：2
> 
> 时间：2013-03-06T13:26:25.747
> 
> 标签：sql, sql-server, tsql, replace, query-optimization

我有一个`table A`包含一个文本列。在我的存储过程中，我有一个临时表，其中包含两列 - 旧值和新值，有许多行。我需要用临时表中指定的新值替换所有出现的旧值，在我的`table A`.

表 A 中的文本字段与临时表中的旧值不同，因此我不能使用连接。文本列值可以是“那里什么都没有”。临时表中可能有一行 oldvalue='there' 和 newvalue='here'。最后，列值应替换为“here is nothing here”。这应该适用于 中列的所有行`table A`。

一种选择是遍历临时表（不推荐）。有没有更好/优雅/优化的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:28:29.173

这应该这样做。

```
;with r as (
  select 
    row_number() over(order by oldv) rn
    ,oldv
    ,newv
  from #replacevalues
)
,
res as (
  select 
    0 as ver
    ,txt as oldcte
    ,txt as newcte
  from tablea
  union all
  select 
    ver+1
    ,oldcte
    ,replace(newcte,oldv,newv)
  from res 
  join r 
    on r.rn=ver+1
)
update t
  set txt = res.newcte
from tablea t
join res on t.txt = res.oldcte
where res.ver = (select max(ver) from res) 
```

# java - 间歇性 404 错误 Eclipse + jsf + apache

> ID：15248585
> 
> 赞同：0
> 
> 时间：2013-03-06T13:26:28.710
> 
> 标签：java, apache, jsf

我正在使用 Eclipse、JSF 2.1 和 Apache 7.0 开发一个 JSF 项目。时不时地，当我对代码（例如托管 bean）进行一些更改并尝试运行项目时，会出现 404 错误。但这是一个间歇性错误。昨天我正常编码，一切正常。当我尝试运行该项目时，apache 给了我 404 错误。我试图关闭并打开 Eclipse，试图清理 tomcat 工作目录，重新启动我的电脑（它工作过一次），但没有任何效果。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:47:56.587

如果您对代码进行了一些更改（例如**托管 bean**），
您*必须*执行下一个

1.  构建你的项目
2.  确保您的项目已加载到本地服务器“tomcat”中
3.  清理本地服务器“tomcat 服务器”
4.  重新启动您的本地服务器“tomcat 服务器”
5.  运行你的项目

注意
如果您在页面中进行了一些更改（例如**XHTML**）
您*可以直接运行您的页面*而无需重新启动本地服务器
您将看到更改的效果

# c++ - 将文件中的数字读入数组

> ID：15248586
> 
> 赞同：0
> 
> 时间：2013-03-06T13:26:28.830
> 
> 标签：c++, arrays, file, root-framework

所以我有一个包含三列的文件，例如：

```
1 1 750 
```

这些是 x,y,强度值。

然后我尝试将这个长文件读入数组。这是到目前为止的代码：

```
using std::cout;
using std::endl;
using std::string;

string fOutFileName("gaintest.root"); 

int main()
{

  std::ifstream file1("data_p30.dat");

  double intensity;
  int i;
  int j ;
  double c[1000][1000];
if (file1.is_open()) {
    file1.seekg(0);
    while (!file1.eof()) {
      file1 >> i >> j >> intensity;
      c[i][j]=intensity;
      cout<<c[i][j]<<'/n'; 
    }
    file1.close();
  } else cout << "Error, cannot open file 1";
} 
```

所以最终我希望能够拥有一个与强度相关的二维数组。关于我为什么失败的任何想法？它编译得很好，但是当它运行时，它看起来像这样：

```
root [0] 
 *** Break *** segmentation violation

===========================================================
There was a crash.
This is the entire stack trace of all threads:
===========================================================
#0  0x0000003701098c05 in waitpid () from /lib64/libc.so.6
#1  0x000000370103c481 in do_system () from /lib64/libc.so.6
#2  0x00002b036f5ebc6a in TUnixSystem::StackTrace() ()
   from /batchsoft/root/root528-x86_64-slc5-43/lib/libCore.so
#3  0x00002b036f5eb63c in TUnixSystem::DispatchSignals(ESignals) ()
   from /batchsoft/root/root528-x86_64-slc5-43/lib/libCore.so
#4  <signal handler called>
#5  0x00002b0370acd515 in TRint::Run(bool) ()
   from /batchsoft/root/root528-x86_64-slc5-43/lib/libRint.so
#6  0x000000000040106d in main ()
===========================================================

The lines below might hint at the cause of the crash.
If they do not help you then please submit a bug report at
http://root.cern.ch/bugs. Please post the ENTIRE stack trace
from above as an attachment in addition to anything else
that might help us fixing this issue.
===========================================================
#5  0x00002b0370acd515 in TRint::Run(bool) ()
   from /batchsoft/root/root528-x86_64-slc5-43/lib/libRint.so
#6  0x000000000040106d in main ()
=========================================================== 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:37:31.630

在 C++ 中

```
double c[1000, 1000]; 
```

前 1000 个被丢弃，编译器生成以下代码：

```
double c[1000]; 
```

你写的 [1000, 1000] 是 Pascal 中的多维数组，但不是 C++。在 C++ 中，您将使用：

```
double c[1000][1000]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:18:56.377

您显示的错误是由 ROOT 生成的。由于这不是 ROOT 论坛，ROOT 是由 CERN 的科学家开发的 C++ 数据分析框架。对于好奇的人，他们的网站在[这里](http://root.cern.ch/drupal/)。但是，您的问题与 ROOT 无关。

二维数组由

```
double a[2][2]; 
```

这对你有用。

也许更安全的是使用模板类

```
std::vector<double> v; 
```

对于 2D 应用程序，这看起来像

```
std::vector<std::vector<double> > v2; 
```

这样做的好处是可以根据需要调整大小，

```
v.push_back(d); 
```

将在向量的末尾添加一个元素，并在必要时将其拉长。也可以使用数组语法访问元素，例如

```
v[1] 
```

或者

```
v2[1][2] 
```

# c# - 在 C# 中不接受空对象

> ID：15248593
> 
> 赞同：0
> 
> 时间：2013-03-06T13:26:33.873
> 
> 标签：c#, object, nullable, nullreferenceexception

当我运行我的代码时，它告诉我 adr 的对象为空，这是真的，但是为什么当它在相同方法的副本中工作时它不能工作，除了插入而不是选择。

代码如下所示：

```
public City doesExist(string postnr, string navn, City city, SqlConnection con)
{
    DatabaseConnection.openConnection(con);
    using (var command = new SqlCommand("select Id from [By] where Postnummer='" + postnr + "' and Navn='" + navn + "'", con))
    {
        command.Connection = con;
        SqlDataReader reader = command.ExecuteReader();
        if (reader.Read())
        {
            city.id = reader.GetInt32(0);
            city.postnr = postnr;
            city.navn = navn;
            reader.Close();

            return city;
        }

        reader.Close();
        return null;
    }
}

public City create(string postnr, string navn, City city, SqlConnection con)
{
    DatabaseConnection.openConnection(con);
    using (var command = new SqlCommand("insert into [By] (Postnummer, Navn) values ('" + postnr + "', '" + navn + "'); select @@identity as 'identity';", con))
    {
        object ID = command.ExecuteScalar();

        city.id = Convert.ToInt32(ID);
        city.postnr = postnr;
        city.navn = navn;
        return city;
    }
} 
```

调用如下所示：

```
City city = new City();
city = city.doesExist(zip, by, city, connection); // this works fine
if (city == null)
{
     // I know that city is null
     // tried inserting City city = new City(); same error
     city = city.create(zip, by, city, connection); // this is where the null error occours
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T13:29:32.687

是的，看：

```
if (city == null)
{
    // If we've got in here, we know that city is a null reference, but...
    city = city.create(...);
} 
```

您正在调用*绝对*为空的引用的方法。这保证会抛出一个`NullReferenceException`.

您几乎肯定想让您的`create`方法静态（并重命名它以符合正常的 .NET 命名约定），并将其称为

```
city = City.Create(...); 
```

您还需要`city`从方法调用中删除参数，而是*在*您的方法中创建一个新`City`对象。例如：

 *```
public static City Create(string postnr, string navn, SqlConnection con)
{
    DatabaseConnection.openConnection(con);
    using (var command = new SqlCommand
         ("insert into [By] (Postnummer, Navn) values (@postnr, @navn); "+
          "select @@identity as 'identity';", con))
    {
        command.Parameters.Add("@postnr", SqlDbType.NVarChar).Value = postnr;
        command.Parameters.Add("@navn", SqlDbType.NVarChar).Value = navn;
        object ID = command.ExecuteScalar();

        City = new City();
        city.id = Convert.ToInt32(ID);
        city.postnr = postnr;
        city.navn = navn;
        return city;
    }
} 
```

请注意我如何更改您的代码以使用参数化 SQL。你真的，真的，不应该像那样将值直接放入你的 SQL 语句中——它会使你的系统受到[SQL 注入攻击](http://bobby-tables.com)，并使各种转换变得混乱。

此外，我建议`SqlConnection`为每个数据库操作创建一个新的（并关闭它）。

坦率地说，作为一个实例方法也有点奇怪`doesExist`……再说一次，它需要一个`city`参数。

我建议更改此设计，以便您拥有一个`CityRepository`（或类似的）知道连接字符串并公开：

```
// I'd rename these parameters to be more meaningful, but as I can't work out what they're
// meant to mean now, it's hard to suggest alternatives.
public City Lookup(string postnr, string nav)

public City Create(string postnr, string nav) 
```

存储库将知道相关的连接字符串，并负责所有数据库操作。该`City`类型对数据库一无所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:31:15.743

您正在尝试调用尚未初始化/为空的对象类的方法。

您需要创建`City.create`一个静态成员。

```
public static City create(string postnr, string navn, City city, SqlConnection con)
{
    DatabaseConnection.openConnection(con);
    using (var command = new SqlCommand("insert into [By] (Postnummer, Navn) values ('" + postnr + "', '" + navn + "'); select @@identity as 'identity';", con))
    {
        object ID = command.ExecuteScalar();

        city.id = Convert.ToInt32(ID);
        city.postnr = postnr;
        city.navn = navn;
        return city;
    }
} 
```

并像这样使用它：

```
if(city==null) 
{
    City city = City.create(... );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:35:49.620

更好的方法：

```
 static public City create(string postnr, string navn, SqlConnection con)
 {
     DatabaseConnection.openConnection(con);
     using (var command = new SqlCommand("insert into [By] (Postnummer, Navn) values ('" + postnr + "', '" + navn + "'); select @@identity as 'identity';", con))
     {
         object ID = command.ExecuteScalar();

         City city = new City();
         city.id = Convert.ToInt32(ID);
         city.postnr = postnr;
         city.navn = navn;
         return city;
     }

     return null;
 } 
```

创建方法必须是静态的，并且不需要在参数中包含城市。调用它：

```
 if (city == null)
 {
      city = City.Create(.....);
 } 
```*

# image - Unix服务器上子文件夹中的图像未加载到网页上

> ID：15248600
> 
> 赞同：0
> 
> 时间：2013-03-06T13:26:50.117
> 
> 标签：image, .htaccess, unix

我有一个托管在 unix 服务器上的网站，其中包含我的 css 文件和 Images 文件夹的子文件夹。

图片不会加载，不是通过css，也不是通过浏览器直接调用。

通过浏览器调用时，我得到的只是图像不存在时得到的框，但是当我

调用同一文件夹中不存在的图像，它告诉我“未找到..”。

所以它知道有一个图像，但它拒绝加载它。我疯狂地环顾四周，发现

.htaccess 文件配置的建议。我想做的就是加载我的图像

从子文件夹。我的 css 文件加载，其他一切正常，只是不能加载图像。

我再说一遍，调用[http://www.mysite.com/Site/Design/Images/logo.png](http://www.mysite.com/Site/Design/Images/logo.png)不起作用。

而且我不会更改我的文件夹层次结构，解决方案必须保持当前结构。

期待您的建议，

谢谢

# android - 在 30 天内捕获日期操作

> ID：15248601
> 
> 赞同：0
> 
> 时间：2013-03-06T13:26:52.460
> 
> 标签：android, date

在捕获日期操作方面，我需要您的帮助。请注意，当您阅读所有提到的时间戳时，都是系统时间，而不是互联网时间，而且我不允许以任何方式使用互联网时间。

基本上我有两个时间戳（包括日期），一个是当前系统时间，第二个是从时间戳数据库中获取的日期，它是文件的下载时间戳。此外，我的应用程序需要每 30 天下载一次此文件

例如：来自数据库的时间戳或上次下载日期：25/02/2012 当前日期：15/03/2012 下一个下载日期将在：27/03/2012。

我的挑战是我想在这 30 天的窗口内停止/捕获对日期的操作，所以假设用户意识到应用程序将在 2012 年 3 月 27 日更新，他进入他/她的日期和时间设置并不断倒带时间是为了永远不允许日期从 2012 年 3 月 27 日开始，例如将当前日期（2012 年 3 月 15 日）倒回到 2012 年 3 月 3 日，这意味着他“回到了 12 天”。

有什么想法/建议吗？

任何帮助表示赞赏！

嗨 Class Stacker，下面是我创建计时器的尝试，但我有点不确定按照您的建议放置支票的位置。我已经将伪代码放在我认为应该在计时器中运行检查的地方。

这是我的 AlarmManagerActivity：

```
public class AlarmManagerActivity extends Activity {

 private AlarmManagerBroadcastReceiver alarm;
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        alarm = new AlarmManagerBroadcastReceiver();
    }

    @Override
 protected void onStart() {
  super.onStart();
 }

public void startRepeatingTimer(View view) {
     Context context = this.getApplicationContext();
     if(alarm != null){
      alarm.SetAlarm(context);
     }else{
      Toast.makeText(context, "Alarm is null", Toast.LENGTH_SHORT).show();
     }
 }
 } 
```

这是我的广播接收器：

```
public class AlarmManagerBroadcastReceiver extends BroadcastReceiver {

 final public static String ONE_TIME = "onetime";

 @Override
 public void onReceive(Context context, Intent intent) {
     PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
     PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "AlarmManagerBroadcastReceiver");
     //Acquire the lock
     wl.acquire();

     //You can do the processing here.
     Bundle extras = intent.getExtras();
     StringBuilder msgStr = new StringBuilder();

     if(extras != null && extras.getBoolean(ONE_TIME, Boolean.FALSE)){
      //Make sure this intent has been sent by the one-time timer button.
      msgStr.append("One time Timer : ");
     }
     Format formatter = new SimpleDateFormat("hh:mm:ss a");
     msgStr.append(formatter.format(new Date()));

     Toast.makeText(context, msgStr, Toast.LENGTH_LONG).show();

     // SHOULD THE CODE TO CHECK SYSTEM TIME AGAINST THE CORRECT TIME BE PLACED HERE ??
     // CURRENTLY I'M DISPLAYING A TOAST
     // THANKS FOR ANY HELP

     //Release the lock
     wl.release();
}

public void SetAlarm(Context context)
{
    AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
    Intent intent = new Intent(context, AlarmManagerBroadcastReceiver.class);
    intent.putExtra(ONE_TIME, Boolean.FALSE);
    PendingIntent pi = PendingIntent.getBroadcast(context, 0, intent, 0);
    //After after EVERY HR
    am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000 * 30 , pi);
} 
```

}

谢谢 ！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:34:39.647

您可能想通过[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)[`android.intent.action.DATE_CHANGED`](http://developer.android.com/reference/android/content/Intent.html#ACTION_DATE_CHANGED)进行监控，但是在玩了一会儿之后，我不会依赖它们——如果您的应用程序被移动到 SD 卡，它不会在启动后立即接收任何事件，直到例如，安装了 SD 卡。[`android.intent.action.TIME_SET`](http://developer.android.com/reference/android/content/Intent.html#ACTION_TIME_CHANGED)

通过运行计时器（例如每小时）[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)并将[`IntentService`](http://developer.android.com/reference/android/app/IntentService.html)预期时间与当前系统时间相匹配会更安全，特别是如果您只需要知道它*是否*发生。不过，我不会唤醒设备，因为您只需要知道在设备未休眠时时间是否设置为过去。

如果您发现系统时间大于预期时间，那是安全的。

只是我自发的想法。

# c++ - C++：变量声明初始化顺序

> ID：15248603
> 
> 赞同：15
> 
> 时间：2013-03-06T13:26:58.783
> 
> 标签：c++

当我定义一些这样的变量时：

```
int a = pop(), b = pop(), c = pop(); 
```

C++ 是否保证`a`先初始化，然后`b`再初始化`c`？还是没有定义顺序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T13:30:44.107

[dcl.decl]/3 说

> -3- 声明中的每个 init-declarator 都被单独分析，就好像它本身在声明中一样。

这意味着您的代码被视为：

```
int a = pop();
int b = pop();
int c = pop(); 
```

# c# - Windows Phone开发中如何引用ApplicationBar上的按钮

> ID：15248605
> 
> 赞同：2
> 
> 时间：2013-03-06T13:27:03.003
> 
> 标签：c#, windows-phone-7, windows-phone-8

在我的 Windows Phone 应用程序中，我的 ApplicationBar 上有一些按钮。在某些情况下按钮被隐藏，在某些情况下按钮被禁用，而在其他情况下所有按钮都是可见的。

我目前用来引用我的 ApplicationBar 上的按钮的方式（例如，如果我有需要禁用它的应用程序逻辑）如下：

```
ApplicationBar.Buttons[1] as ApplicationBarIconButton; 
```

我不喜欢这种方法，因为它指的是按钮的索引。如果按钮列表是相对动态的，那就是自找麻烦。

有没有人推荐引用 ApplicationBar 上的按钮的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:36:43.847

我通常做的是将感兴趣的按钮定义为类的属性，例如：

```
private ApplicationBarIconButton SaveButton { get; set; } 
```

加载页面后，我在构建应用程序栏（以编程方式）时保留对给定按钮的引用：

```
SaveButton = new ApplicationBarIconButton(new Uri(...)) { Text = "Save" };
ApplicationBar.Buttons.Add(SaveButton); 
```

这样，按钮始终可用于通过属性访问进行操作。

# java - 可重用于其他项目的核心 JSF2 项目 [JAR]

> ID：15248607
> 
> 赞同：1
> 
> 时间：2013-03-06T13:27:05.767
> 
> 标签：java, maven, jsf-2, composite-component

我创建了一个项目，其中包含许多要使用的抽象类和通用类以及一些复合组件。我将打包更改为 JAR，并将其用作其他项目的 maven 依赖项。

所以，服务器端的一切都在工作。Spring 注入了我的类和东西。但没有找到复合组件。我在 stackoverflow 周围搜索，发现一些引用 JAR 目录的错误。但我不知道我是否将复合组件放在核心项目的正确目录中。这是我添加它的路径（通常，就好像它是一个客户端项目）：

```
 - br
       - main
              - webapp
                     - resources
                              - myCompositeFolder 
```

这是正确的吗？如何更改 Maven 包装以使其工作？

我还想问另一件事......我必须从客户端项目中“注入”一些额外的代码来定制复合组件。为此，我在组件上做了这样的事情：

```
<ui:include src="/filters/extraFilters.xhtml" /> 
```

并且该文件（extraFilters）将位于客户端项目 webapp 文件夹中。我在同一个项目上进行了测试，它有效。只是不知道它是否可以从 JAR 加载！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:52:44.970

我让它在没有 WAR 的情况下工作。

感谢 Visola ( [http://bearprogrammer.com/](http://bearprogrammer.com/) )。解决方案是：但是父（核心）项目中的复合文件夹：

```
 src\resources\META-INF\resources 
```

并做了！都在一个罐子里！

感谢 BalusC、Visola 和 Jin！

# iphone - 将 Facebook 用户朋友的生日同步到我的 xcode 应用程序

> ID：15248615
> 
> 赞同：0
> 
> 时间：2013-03-06T13:27:25.393
> 
> 标签：iphone, facebook, friend

[当我在谷歌上搜索和学习Facebook SDK for iOS 入门](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)、[旧版 iOS 教程](https://developers.facebook.com/docs/tutorials/legacy-ios-sdk-tutorial/#implementsso)等教程时，有很多困惑的理解。当我使用 4.2 的 Xcode 版本时，我已经下载了 FacebookSDK-3.0，将 sdk 框架添加到我的 xcode 项目中，然后遵循[将](http://xcodenoobies.blogspot.in/2012/09/how-to-upload-photo-and-update-status.html)Facebook sdk 集成到 iphone 应用程序（如 Facebook 应用程序 ID）的每一步射击：

![在此处输入图像描述](../Images/1b85245f4262f3a45b087ecb72a70b1f.png)

**编辑**

**我已经成功实现了登录部分**

但我的要求是获取用户朋友的生日，我有一个“Facebook Sync”按钮。现在我已经搜索了符合/类似于我的要求的资源。但是我遇到了执行助手建议的答案（示例代码）的错误帖子。可以在[此处浏览示例问题](https://stackoverflow.com/questions/10323932/using-facebook-ios-sdk-to-retrieve-birthdays)

**错误屏幕截图：**

![在此处输入图像描述](../Images/bd9a70b7fab87a08c95ba3e2fea96e07.png)

![在此处输入图像描述](../Images/5f9c361ac8858279abd3a979e8a6fdf8.png)

我哪里错了？

任何人都可以指导我，非常感谢任何帮助！

提前谢谢大家:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:25:01.197

# c# - 分页 - 在 c# 中列出以前的一组值表单数据表

> ID：15248616
> 
> 赞同：0
> 
> 时间：2013-03-06T13:27:27.553
> 
> 标签：c#, datagridview, datatable, paging

我持有一个名为 temptable 的临时数据表，其中包含大约 22 行，并且它已在数据网格中显示在每页的 5 条记录中考虑我在第 3 页，如果我单击上一个按钮我需要显示现在只有 2 条记录上一组 (15-20) 5 个值，如果我再次单击上一个，它应该显示 (10-15) 5 个值，依此类推..

我在这里粘贴了我的代码..这里的问题是我只能检索前 5 个以前的值，我的意思是 15 - 20 ..我需要使它通用但无法理解

```
 private void PreviousSelect_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
      {
        TempTable.Clear();

  /* if Total_Temp_Table_rowCount is 22 int a  will be ' 2 ' and
     int b will return 20 */

        int  a = Total_Temp_Table_rowCount % 5;

        int  b = Total_Temp_Table_rowCount- a;

        for (int s = b-1 ; s >= b - 5; s--)
        {
            fieldLabel = (string)selectedFieldsTable.Rows[s]["Field Name"].ToString();
            fieldType = (string)selectedFieldsTable.Rows[s]["Field Type"].ToString();

            DataRow newRows = TempTable.NewRow();
            newRows["Field Name"] = fieldLabel;
            newRows["Field Type"] = fieldType;
            TempTable.Rows.Add(newRows);
            Console.WriteLine(selectedFieldsTable.Rows[s]["Field Name"].ToString());  
        }          
        dgvSelectedFieldsView.DataSource = TempTable;
    } 
```

任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:30:09.483

尽管您可以使用 DataPager，但是如果您手动实现它，则需要考虑一些事情。

*   页面大小
*   当前页面
*   总页数

仅从这些中，您可以跟踪要在 dataGridView 中填充的当前记录集。

请参阅下面的逻辑：您可能需要微调循环的起点和终点。但它应该给你一个想法。

```
public int currentPage =0;
public int totalPages=0;
public int pageSize=5;
public DataTable tempDt = new DataTable();

public void LoadGrid()
{
    //calculate the total number of pages..
    double result = (double)selectedFieldsTable.Rows.Count/pageSize;
    if(result>(selectedFieldsTable.Rows.Count/pageSize))
        ++result;
    totalPages = result;

         foreach (DataColumn col in selectedFieldsTable.Columns)
         {
            tempDt.Columns.Add(col);
         }
        BindGrid();
} 
```

在 Page 的 Page_Load 事件中调用 LoadGrid()

这是您之前的 LinkBut​​ton 事件

```
private void PreviousSelect_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
{
    currentPage--;
   if(currentPage<0)
   {
        (sender as LinkButton).Enabled=false;
   }    
   else
   {
        BindGrid();
    }
} 
```

这是您的下一个链接按钮事件

```
private void NextSelect_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
{
    currentPage++;
   if(currentPage>=PageSize)
   {
        (sender as LinkButton).Enabled=false;
   }    
   else
   {
        BindGrid();
    }
} 
```

这是你的 BindGrid()

```
pubilc void BindGrid()
{
    tempDt.Clear();
    for(int i=(currentPage*pageSize);i<(currentPage*pageSize)+pageSize; i++)
    {
        DataRow row =  tempDt.NewRow();
       foreach(DataColumn col in tempDt.Columns)
       {
          row[col] = selectedFieldsTable.Rows[i][col];
       } 
       tempDt.Rows.Add(row); 
    }
    dgvSelectedFieldsView.DataSource = tempDt;   
} 
```

CurrentPage * PageSize 为您提供起始记录编号， CurrentPage*PageSize + PageSize 为您提供最后记录编号。所以你插入所有包含的行并绑定到数据网格。测试它..看看它是否适合你，我远离开发机器。:)

# javascript - onclick 执行 javascript 函数并在 div 中返回结果

> ID：15248617
> 
> 赞同：1
> 
> 时间：2013-03-06T13:27:28.500
> 
> 标签：javascript, jquery, cookies

首先，如果这是重复的，让我道歉，但我的搜索都没有让我比现在更开明。也就是说，我目前正在尝试使用 JavaScript/Ajax/jQuery，但遇到了一点问题。

我想在我的主页上包含一个功能检查，用户可以在其中测试他们的浏览器是否配置为允许 JavaScript 和 cookie（如果用户的浏览器不允许 JavaScript 和 cookie，我不会过度担心使代码可降解）本网站仅供我们公司的客户使用，我们几乎规定了使用我们网站的条款和条件）。

现在，经过一些研究（GIYF 和所有这些），似乎最好的方法是让 JavaScript 设置 cookie，从而用一块石头杀死两只鸟。诚然，我们将无法将失败缩小到“一个或另一个”，但我试图让这个（对我来说）尽可能简单。即便如此，我不确定我是否以正确的方式去做这件事。这是我的 .js 文件中的代码：

```
function error_reporting (level) {
 // http://kevin.vanzonneveld.net
 // +   original by: Brett Zamir (http://brett-zamir.me)
 return this.ini_set('error_reporting', level);

}

var set = $(document).getUrlParam('set');

if(set !== 'yes') {

  var date = new Date();
  var midnight = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 23, 59, 59);

  $.cookie('candcptest', 'ok', {

    expire: midnight,
    path: '/',
    domain: 'candcp.rossdb.net',
    secure: false

  }, function() {

    window.document.reload();

  });

} else {

  var candcptest = $.cookie('candcptest');

  if(candcptest !== undefined) {
    var ccptresult = 'Thank you.  Your browser is configured to allow JavaScript and accept cookies.  You may proceed with login';
  } else {
    var ccptresult = 'Thank you.  Unfortunately, your browser is not configured correctly.  Please check your settings or contact the Dev Team for assistance';
  }
}; 
```

（我之前写了一个非常基本的测试来允许在 PHP 中使用 cookie，然后修改它来创建它，所以上面的内容可能与它本身的标记相去甚远）

现在，理想情况下，我想使用 jQuery，因为这似乎是一项非常适合它的任务，但显然，我不知道如何去做。这是我的 HTML 文件中的内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="styles/global.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.cookie.js"></script>
    <script type="text/javascript" src="js/jquery.getUrlParam.js"></script>
    <script type="text/javascript">
      $(function() {
        $('a#ccpt').click('js/candcptest',function() {
          $('div#ccptresult').append(result);
        });
      });
    </script>
  </head>

  <body class="body">
    <table width="1000" border="0" cellpadding="0" cellspacing="0" align="center" bgcolor="#FFFFFF">
      <tr>
        <td width="1000" height="545" align="center" valign="middle">
          <table border="0" align="center">
            <tr>
              <td width="750" height="150" align="center" class="text0down">
                This website makes use of JavaScript and cookies and it is essential that your browser is configured correctly in order for this website to work. If you are unsure if your browser is set up correctly, click <a href="#" class="text0down" id="ccpt">here</a> to test.
                <div id="ccptresult"></div>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </body>
</html> 
```

现在，这个想法（以防我的 js 太难以理解以至于你无法弄清楚我要做什么）是，当用户单击链接（a#ccpt）时，js 将执行并且结果（ var result) 将显示在 div (div#ccptresult) 中。

我认为不言而喻，测试页面绝对没有任何作用，所以有些事情严重不正确，但考虑到直到 7 天前，我从未编写过一行 js 代码，所以我的知识还差得很远也就不足为奇了足以弄清楚我自己哪里出错了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:32:58.580

if i have understood correctly

```
$(function() {
        $('a#ccpt').click(function() {
          //execute the js function here
          $('div#ccptresult').append(result);
        });
      }); 
```

# c# - 如何过滤推文中的链接和图片？

> ID：15248622
> 
> 赞同：0
> 
> 时间：2013-03-06T13:27:39.443
> 
> 标签：c#, windows-phone-7, twitter, tweetsharp

我正在使用 TweetSharp 开发 wp8 应用程序。推文中的所有链接都类似于 t.co/aBRaKadABra。部分链接 - 图片，其余部分 - 重定向到外部页面。那么，我怎样才能检测到该链接是图像？我想把它放进去`<Image>`，如果它只是链接放入`<HyperLink>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:36:56.023

HEAD 请求怎么样？

```
public static async Task<bool> IsUriImageAsync(Uri uri)
{
        try
        {
            System.Net.WebRequest wc = System.Net.WebRequest.Create(uri); 
            //masquerade as a browser
            ((HttpWebRequest)wc).UserAgent = 
              "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.19 (KHTML, like Gecko) Chrome/0.2.153.1 Safari/525.19";
            wc.Timeout = 1000;
            wc.Method = "HEAD";
            using(WebResponse res = await wc.GetResponseAsync())
            {
                return 
                  res.ContentType
                   .StartsWith("image/",StringComparison.InvariantCulture);
            }

        }
        catch (Exception ex)
        {
            return false;
        }   
} 
```

# asp.net-mvc - ASP MVC 代码优先列表 模型属性

> ID：15248625
> 
> 赞同：-2
> 
> 时间：2013-03-06T13:27:43.373
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

我相当确定这个问题的答案将是它无法完成，但无论如何我都会问以确保。

我正在尝试定义一个包含 List 属性的 ASP .Net MVC 模型，但 EF 在创建数据库模式时似乎忽略了它。

看看这个问题，[Entity Framework Code First List<string> Property Mapping](https://stackoverflow.com/questions/8317749/entity-framework-code-first-liststring-property-mapping)，解决方案似乎是创建一个新类以在列表中使用。显然，对于像字符串这样简单的东西来说，这似乎有点过头了，所以我想知道他们是否是另一种使用代码和实体框架来做到这一点的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:40:48.220

您需要告诉 EF 如何在数据库中表示它

字符串列表代表什么？您需要记住您正在定义如何将这些数据存储在数据库中。

这些是您需要定义模型的原因，如@Ladislav Mrnka[帖子中所示](https://stackoverflow.com/a/8325078/611288)

**更新**

为了避免混淆，我会完全按照@Ladislav Mrnka 的建议做：

```
public class Container
{
    public int Id { get; set; }
    public string Name { get; set; }   

    public virtual ICollection<User> Users
    {
        get;
        set;
    }
}

public class User
{
    public int Id { get; set; }
    public string Text { get; set; }
} 
```

# c# - c#: 脉冲并等待

> ID：15248627
> 
> 赞同：1
> 
> 时间：2013-03-06T13:27:52.780
> 
> 标签：c#, monitor

我有一个关于监视器类的脉搏和等待的问题。以下是代码的摘录。我的问题是代码会卡在

> **// <<-----------**

直到**储物柜**免费？

```
 {
        check = false;
        new Thread(pulseWaitFun).Start();

        Console.Writeline("Threading tutorial");

        lock (locker) // <<-----------
        {
            check = true;
            Monitor.Pulse(locker);
        }
        Console.ReadLine();
    }

    static void pulseWaitFun()
    {
        lock (locker)
        {
            if(check != true)
            {
                Thread.Sleep(20000);
                Monitor.Wait(locker);

            }
        }

        Console.WriteLine("Woken !!");
    } 
```

第二个问题，`Monitor.Pulse(locker);`接下来的执行顺序是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:48:51.530

> 我的问题是代码会一直停留在...直到储物柜免费？

是的，但是可以通过退出`lock() {}`块*或*输入`Wait()`.

> 在 Monitor.Pulse(locker) 之后；接下来的执行顺序是什么？

在您的代码中，序列很可能是：

1.  `Thread(pulseWaitFun).Start();`
2.  `lock (locker)`, 无争议，因此立即授予锁
3.  `Monitor.Pulse(locker);`，脉冲被浪费了，因为没有人在等待。
4.  `lock()`在 main 方法中退出
5.  第二个线程开始执行......

在启动 Thread 之后，您可能需要一个`Thread.Sleep(100)`内部 Main()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:03:04.003

您不能假设将首先调用哪个锁。让我们考虑两个选项：

*   首先达到锁定主要方法。检查设置为真。调用脉冲没有效果。下一个主线程释放锁，第二个线程可以在 pulseWaitFun 中获取它。
*   首先到达 lock in pulseWaitFun 方法。检查为假，因此线程处于睡眠状态，然后等待导致实现锁的信号。现在主线程获取锁和脉冲。然后释放锁。之后 pulseWaitFun 可以继续。

# c# - 将 FileUpload 中的选定文件保存到服务器时如何更改文件扩展名

> ID：15248635
> 
> 赞同：1
> 
> 时间：2013-03-06T13:28:21.987
> 
> 标签：c#, winforms, file-upload

```
string fileName = Path.GetFileName(FileUpload1.PostedFile.FileName);
FileUpload1.PostedFile.SaveAs(Server.MapPath("~/ProcessedFiles/" + fileName)); 
```

从 FileUpload1 抓取以保存在服务器上的文件是一个 .xls 文件（Excel 97-2003）

我想要的是在服务器上使用 .xlsx 扩展名（Excel 2007 及更高版本）保存它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:34:44.747

采用`Path.ChangeExtension`

```
string path = "C:\\SomePath\\Somefile.xls";
string newPath = Path.ChangeExtension(path, ".xlsx"); 
```

在您的情况下，可能是这样的（未经测试）：

```
string fileName = Path.GetFileName(FileUpload1.PostedFile.FileName);
fileName = Server.MapPath(Path.Combine("~/ProcessedFiles/", fileName));
FileUpload1.PostedFile.SaveAs(Path.ChangeExtension(fileName, ".xlsx")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:31:26.640

您可以检索不带原始扩展名的文件名，然后使用 向其附加新扩展名[`Path.GetFileNameWithoutExtension(String path)`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)，如下所示：

```
String filename = Path.GetFileNameWithoutExtension(FileUpload1.PostedFile.FileName) + ".xlsx";
FileUpload1.PostedFile.SaveAs(Server.MapPath("~/ProcessedFiles/" + filename)); 
```

再想一想，我完全忘记了`ChangeExtension()`，正如@Matt 所建议的那样。你应该使用他的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:35:57.133

您需要使用[Path.GetFileNameWithoutExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)方法而不是`Path.GetFileName`

```
string fileName = Path.GetFileNameWithoutExtension(FileUpload1.PostedFile.FileName) + "xlsx";
FileUpload1.PostedFile.SaveAs(Server.MapPath("~/ProcessedFiles/" + fileName)); 
```

# javascript - 如何使用 Jasmine 测试内部用途所需的内部功能

> ID：15248636
> 
> 赞同：2
> 
> 时间：2013-03-06T13:28:22.267
> 
> 标签：javascript, unit-testing, tdd, bdd, jasmine

```
(function(window,document){

  var _trimString = function( string ){
     var trimString;
     trimString = string.replace(/^\s+|\s+$/g,'');
     return trimString
  };

  var displayCorrectText = function( incorrecttext ){
     correctText = "."+incorrecttext;
     document.write( correctText );
  }

  var Circular = function(){};

  Circular.prototype.init = function( string ){
     displayCorrectText( _trimString( string ) );
  };

  var circular = new Circular();
  window.circular = circular;
})(window,document);

circular.init('asd.asd'); 
```

我有这个模块声明，我想使用 Jasmine测试**_trimString函数。**

我写了类似这样的代码

```
describe("Form Creator private function ", function(){
it("_trimString should trim string", function(){
    var _trimString = function( string ){
        var trimString;
        trimString = string.replace(/^\s+|\s+$/g,'');

        return trimString
    };
 expect(_trimString('   test text  ') ).toBe('test text');
}); 
```

});

我做得对，在测试中声明函数本身，还是有其他方法？如果我这样做了功能测试，我认为在源代码中复制实际功能是错误的。也许，有人可以向我展示在模块声明中使用“私有”函数的正确案例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:55:23.240

我同意 Andy Waite 的观点：一般来说，您应该只测试公共接口方法。

但是，如果您认为这个私有方法确实需要直接测试，这可能是问题的征兆。闻起来像这种方法做的工作太多（或者至少是你认为重要的工作）。如果是这种情况，请考虑将其逻辑提取到服务对象中并委托给它。这样很容易单独测试服务对象。

**编辑：**

在代码中：

```
var Circular = function(){
  this.trimmer = new Trimmer();
};

Circular.prototype.init = function( string ){
  this.displayText = this.trimmer.trim( string );
};

var circular = new Circular();
circular.init("  test  ").displayText // should be trimmed

...

// test trimmer separately 
describe("Trimmer", function(){
   it("trims string", function(){ ... }); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:46:25.583

一般来说，您应该只测试公共接口方法。

您的初始化程序正在调用`_trimString`，因此您可以通过它隐式测试它。

例如：

```
it("trims whitespace"), function(){
  var circular = Circular.new(' foo ')
  expect(circular.text).toBe('foo')
} 
```

您可能需要重组一些现有代码以使其更具可测试性。`displayCorrectText`目前有两个不同的职责 - 操作一些字符串和打印结果，这违反了单一职责原则。

# android - 如何从三星标签上的视频捕获活动中获取数据？

> ID：15248640
> 
> 赞同：1
> 
> 时间：2013-03-06T13:28:35.430
> 
> 标签：android

我在从三星 Galaxy 标签上的视频捕获活动中获取数据时遇到了一些问题。我读到这是三星的问题，但我需要一种方法来做到这一点。视频文件已正确保存。

所以，我称之为活动：

```
Uri outputFileUri = Uri.fromFile(path);
Intent i = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
i.putExtra(MediaStore.EXTRA_FINISH_ON_COMPLETION, true);
i.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri );
i.putExtra(MediaStore.EXTRA_VIDEO_QUALITY,1);
context.startActivityForResult(i, 500); 
```

在我的 onActivityResult() 中，只有当我在相机活动中按 BACK 时才会得到一些东西，这是一个 RESULT_CANCELED 结果。我无法获得 RESULT_OK，我认为是因为三星视频应用程序没有返回。

我需要得到结果意图。如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:47:33.527

> 视频文件已正确保存。

按下后退按钮后，您可以使用路径打开视频吗？

喜欢（伪代码）：

```
onActivityResult
{
  if(video exist)
  { 
     open video
  }else
     show message error 
```

# ios - 有没有办法在 IOS 中以编程方式在 rtf 文件中添加图像？

> ID：15248642
> 
> 赞同：0
> 
> 时间：2013-03-06T13:28:41.393
> 
> 标签：ios, image, rtf

你们能建议我如何在 iOS 中以编程方式在 rtf 文件中添加图像和文本吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:51:44.460

这是一个支持 rtf 的 github 项目。虽然这是一个旧项目，但它应该是一个很好的指南，知道如何去做。我尚未在 iOS 6 中对其进行测试，但我确信它可以修改为适用。作者说它是 uitextview 的一个很好的替代品，所以试一试，让我知道这是否适合你。

[https://github.com/enormego/EGOTextView](https://github.com/enormego/EGOTextView)

这是一个完整的项目，它执行以下操作：

*   粗体、斜体和下划线
*   突出显示（通过 UIMenuController）
*   字体大小调整
*   字体颜色调整
*   字体调整
*   撤消和重做
*   图像插入
*   可拖动的图像
*   自动更新显示当前状态的栏项目
*   奖金代码隐藏键盘附件视图
*   奖励代码隐藏 UIMenuController 中的所有其他项目

希望这可以帮助你。

[http://ios-blog.co.uk/tutorials/rich-text-editing-sample-project/](http://ios-blog.co.uk/tutorials/rich-text-editing-sample-project/)

# wpf - WPF 快速控件/任何创建

> ID：15248643
> 
> 赞同：2
> 
> 时间：2013-03-06T13:28:43.373
> 
> 标签：wpf, performance

我有一个**itemcontrol**，它有 3 个可能的数据模板。

```
<DataTemplate>

    <StackPanel>

        <TextBlock
            FontSize="25"
            FontWeight="Light"
            Margin="0,8,0,5"
            Text="{Binding Name}" >
        </TextBlock>
        <!-- Εδω τα items -->

        <ContentControl
            Content="{Binding Preferences}"
            Name="items" >
        </ContentControl>
    </StackPanel>

    <DataTemplate.Triggers>

        <DataTrigger
            Binding="{Binding Path=SelectionMode}"
            Value="1" >

            <Setter
                Property="ContentTemplate"
                TargetName="items"
                Value="{StaticResource SoloSelection}" />
        </DataTrigger>

        <DataTrigger
            Binding="{Binding Path=SelectionMode}"
            Value="2" >

            <Setter
                Property="ContentTemplate"
                TargetName="items"
                Value="{StaticResource MultiSelection}" />
        </DataTrigger>

        <DataTrigger
            Binding="{Binding Path=SelectionMode}"
            Value="3" >

            <Setter
                Property="ContentTemplate"
                TargetName="items"
                Value="{StaticResource MultiQuantitySelection}" />
        </DataTrigger>
    </DataTemplate.Triggers>

</DataTemplate> 
```

里面的东西是一个带有一些按钮的包装板。所以虚拟化似乎并不容易。我想要平滑滚动。问题是虽然按钮是一个边框和一个文本块，但它很慢。

我做了一个测试。

```
var sw = new Stopwatch();
sw.Start();
var vv = new SolidColorBrush(Colors.Red);
for (int i = 0; i < 150; i++)
{
    // here is the operation that fills the control
    var b = new Button();
    b.Height = 65;
    b.Width = 120;
    b.Content = "Gamiese";
    this.items.Items.Add(b);
}

this.Dispatcher.BeginInvoke(
        DispatcherPriority.Loaded,
        new Action(() =>
        {
            sw.Stop();
            MessageBox.Show("Took " + sw.ElapsedMilliseconds + " ms");
        }));
} 
```

这在我的电脑上大约需要 40-50 毫秒，但在慢速电脑上需要 200 多毫秒。所以对于所有其他的东西，而不是这个简单的例子，它可以高达 600-900 毫秒。所以触摸体验可能是缓慢而痛苦的。我将此归咎于 WPF，因为我使用 QT QML 进行了类似的测试，并为更重的 200 个按钮创建了它，它立即点亮并且滚动流畅。因此，WPF 在此方面表现不佳。有什么我能做的吗？即使缓存按钮也无济于事。因为填充树似乎是个问题。渲染不是问题，因为在所有计算机上滚动都非常快。自定义绘图可能会解决我的问题，但我为什么要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:18:09.220

您的 UI 方案可能需要重新设计。根据我从您的帖子中收集到的信息（不是很清楚），您正试图在堆栈面板中堆叠一堆按钮。

您在慢速机器上的测试显示 1.25 毫秒/按钮，这听起来很可接受……除非您滥用系统。

更好的方法是让自己成为一个 ListView 并将您感兴趣的项目添加为项目，这样您就可以让 ListView 的虚拟化确定何时实例化 UI 元素。

您的测试表明您正在尝试堆积超过 9000 像素高的按钮，即使对于具有超高分辨率的超大屏幕也是没有意义的。

# jquery - html + js 淡入淡出 文字评论

> ID：15248645
> 
> 赞同：0
> 
> 时间：2013-03-06T13:28:48.570
> 
> 标签：jquery, html, comments, fade

我有这段代码，效果很好，唯一的问题是在最后一个引号被使用后，它会在几秒钟内显示一个空的 div，然后再从头开始。所以，我的问题是如何在使用最后一个引号后直接跳回第一个引号。谢谢你。（您可以在 mapsbyphil dot com 上查看实际情况）。

```
<div id="container">
<div>
 <p><b>"The early days of GIS were very lonely. No-one knew what it meant."</b><br><a href="http://en.wikipedia.org/wiki/Roger_Tomlinson"  target="_blank">Roger Tomlinson</a>, Father of GIS</p>
</div>
<div>
 <p><b>“GIS is a form of digital mapping technology.  Kind of like Google Earth, but better.”&lt;/b><br><a href="http://en.wikipedia.org/wiki/Arnold_Schwarzenegger"  target="_blank">Arnold Schwarzenegger</a>, Conference on California's Future 2008</p>
</div>
<div>
 <p><b>“I am told there are people who do not care for maps, and I find it hard to believe.”&lt;/b><br><a href="http://en.wikipedia.org/wiki/Robert_Louis_Stevenson"  target="_blank">Robert Louis Stevenson</a></p>
</div>
<div>
 <p><b>“Everything is related to everything else, but near things are more related than distant things.”&lt;/b><br><a href="http://en.wikipedia.org/wiki/Tobler%27s_first_law_of_geography"  target="_blank">Tobler's First Law of Geography</a></p>
</div>
<div>
 <p><b>"It is not down in any map; true places never are."</b><br><a href="http://en.wikipedia.org/wiki/Herman_melville"  target="_blank">Herman Melville</a></p>
</div>
<div>
 <p><b>"They were maps that lived, maps that one could study, frown over, and add to; maps, in short, that really meant something.” </b><br><a href="http://en.wikipedia.org/wiki/Gerald_Durrell"  target="_blank">Gerald Durrell</a></p>
</div>
<div>
 <p><b>“I get to go to overseas places, like Canada.” </b><br><a href="http://en.wikipedia.org/wiki/Britney_Spears"  target="_blank">Britney Spears</a></p>
</div>
<div>
 <p><b>“I like geography. I like to know where places are.” </b><br><a href="http://en.wikipedia.org/wiki/Tom_Felton"  target="_blank">Tom Felton</a></p>
</div>
<div>
 <p><b>"I have no idea where Italy is on the map, but I do know what shape it is, and its like a boot." </b><br><a href="http://en.wikipedia.org/wiki/Snooki"  target="_blank">Snooki</a></p>
</div>
<script type="text/javascript">
function InOut(elem)
{
elem.delay()
 .fadeIn(600)
 .delay(5000)
 .fadeOut(600,
     function(){
        if(elem.next().length > 0) 
          { InOut(elem.next()); }
        else
          { InOut(elem.siblings(':first')); }

      }
    );
}

$('#container div').hide();
InOut($('#container div:first'));
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:52:45.713

我认为您实际上是在尝试展示它，`<script>`因为它是最后一个兄弟姐妹。您可能希望`<script>`将`<div id="container">`.

或者您可以将选择器传递`'div'`给[`next()`函数](http://api.jquery.com/next/)。

# performance - Actionscript 3 绘制大矩形会导致 FPS 大幅下降

> ID：15248648
> 
> 赞同：2
> 
> 时间：2013-03-06T13:28:52.453
> 
> 标签：performance, actionscript-3, flash, optimization

我会直奔主题

我需要绘制一个大尺寸的矩形（大约 5k 像素的宽度和高度，可能更多）

```
this.graphics.beginFill(0x555555,1);
this.graphics.drawRect(0, 0, 5000, 5000); 
```

现在我知道，一开始，它需要时间来生成这么大的矩形，但即使在之后，fps 也非常低，特别是如果舞台上有其他东西在移动，

我需要这个来玩游戏（它是地面），有没有更好的简单方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:05:24.577

如果您的应用程序的窗口仅为 800x600，则无需绘制 5000x5000 的图像。您可以做的是拥有 5000x5000 位图数据，然后将其子矩形复制到窗口上。`bitmapData.copyPixels`应该让你这样做，而且速度非常快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:50:46.873

您可以将一个大背景替换为多个小背景，并根据当前视图位置更改其位置。例如，dims 为 5000 的矩形可以拆分为 25 个“tile”，宽度和高度为 1000 px。您可以有两个将保存当前图块的 MovieClip。您需要 2 个持有人 - 一个持有当前视图，第二个持有将在当前瓦片离开屏幕时变得可见的瓦片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:10:52.983

Assuming the game area is not scaled and you will scroll the game, you won´t display the whole 5000 px rectangle, so you can create a ground with the same size of the stage area and place it in a layer that moves along the visible area. Just a simple parallax.

One layer with the one color ground. Other layer with things moving over it.

Anyway you should give more information about the game. Vector graphics? Bitmaps? game area scalable?

# backbone.js - 骨干js Todo应用程序_underscore.js _.without

> ID：15248652
> 
> 赞同：1
> 
> 时间：2013-03-06T13:28:58.600
> 
> 标签：backbone.js, underscore.js

我很难理解剩余函数在下面的代码中是如何工作的。

（注释来源：[http](http://documentcloud.github.com/backbone/docs/todos.html) ://documentcloud.github.com/backbone/docs/todos.html ）

我对 apply 的理解是第一个参数是上下文，其余参数是一个数组，作为参数传递给正在应用的函数。

```
var TodoList = Backbone.Collection.extend({
      model: Todo,
      localStorage: new Backbone.LocalStorage("todos-backbone"),
      done: function()
      {
        return this.filter(function(todo) { return todo.get('done'); });
      },
      remaining: function() 
      {
        return this.without.apply(this, this.done());
      },
}); 
```

所以：

this.without.apply(this, this.done()); --> 翻译为：

```
without(array of arguments as parameters to without function); 
```

without 将第一个参数作为数组和要从数组中删除的 2...n 个参数。

我不明白这个功能是如何做任何有用的事情的。对我所缺少的东西的解释会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:26:05.580

Backbone：混合每个 Underscore 方法作为 Collection#models 的代理

```
_.each(methods, function(method) {
    Collection.prototype[method] = function() {
      //convert arguments to array. Such as: args = [1, 2, 3]
      var args = slice.call(arguments);
      //add this.models at the begining of array. Such as: [['string'], 1, 2]
      args.unshift(this.models);
      //_[without].apply(_, [['string'], 1, 2])
      //_.without(['string'], 1, 2);
      return _[method].apply(_, args);
    };
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:43:02.233

> this.without.apply(this, this.done()); --> 翻译为：`without(array);`

并不真地。您知道的将数组作为第一个参数的下划线函数可以用作骨干集合*上的方法（如下划线链接包装器）。*让我们假设`this.done()`计算结果为`[x, y, z]`，然后[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)调用转换为

```
this.without(x, y, z); 
```

当然，更高效的方法是

```
return this.filter(function(todo) { return ! todo.get('done'); });
//                                         ^ 
```

# ruby-on-rails - 可能在路由中覆盖控制器的路径？

> ID：15248654
> 
> 赞同：0
> 
> 时间：2013-03-06T13:29:00.020
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在寻找一个建议，如何通过 routes.rb 中的 Rails::Engine 中的一些合适的匹配规则覆盖控制器的路径。

我想更换

```
/stub/category/ 
```

和

```
/category/ 
```

尝试过类似的东西

```
Rails::Engine.routes.prepend do
    match '/stub/category', :to => 'category#index', :as => '/category'
end 
```

但它似乎没有任何效果。

任何想法 ？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T14:26:10.277

尝试以下操作：

```
match 'stub/category' => 'category#index' :as => 'category' 
```

# javascript - 测试黄瓜中javascript的内容

> ID：15248660
> 
> 赞同：1
> 
> 时间：2013-03-06T13:29:09.317
> 
> 标签：javascript, google-maps, cucumber

我有一个使用 Cucumber 测试的应用程序 Rails。这个应用程序有一个谷歌地图，我想要一个 Cucumber-step 来测试该地图是否有一些“引脚”（标记）。据我所知，在 DOM 中找不到 pin，所以我想简单地测试一下页面是否`map.addMarker()`使用某些参数调用。

```
Then /^I should see the top 50 campings on the map$/ do
  Camping.geocoded.top(50).each do |camping|
    page.should have_content /map\.addMarker\(#{camping.latitude}, #{camping.longitude}, "#{camping.name}"\)/
  end
end 
```

该页面的底部有一个脚本标记，其中填充了一个`content_for`，来源有：

```
<script>
  $(document).ready(map.addMarker(51.7780246, 5.97571, "Bij Ons"))
</script>
</body> 
```

`map.addMarker`是一些自定义 JavaScript，它为地图添加了一个标记。

我不（真的）有兴趣测试我的自定义 JavaScript 和 Google 地图 API 是否真的将该调用转换为可见的 pin（尽管那会很整洁）；现在只需测试该 JavaScript 方法是否被调用就可以了。

如何测试是否`page`包含某些 JavaScript？上述步骤中的代码`Then`仅测试实际内容并省略`<script>`标签中的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:08:32.560

诀窍是不使用`have_content`，而是使用更通用的选择器，例如`have_xpath`：

```
page.should have_xpath "//script[contains(.,'map.addMarker(#{camping.latitude}, #{camping.longitude}, \"#{camping.name}\")')]" 
```

# mysql - 使用 MySQL 的 SUM() 函数错误

> ID：15248661
> 
> 赞同：0
> 
> 时间：2013-03-06T13:29:13.437
> 
> 标签：mysql, aggregate-functions

我想获得本月到未来 24 个月期间每种产品的数量。我的 sql 查询仅返回下个月的总和。

```
SELECT `products`, `date`, SUM(`quantity`)
FROM `my_table`
WHERE `date` 
BETWEEN CURDATE()
AND DATE_ADD(CURDATE(), INTERVAL 24 MONTH)
GROUP BY `products` 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:34:55.073

您需要分组，因为当前 MySQL从每个组`date`中选择一个（不确定） ：`date`

```
GROUP BY `products`, `date` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:42:55.817

用 MONTHS 而不是 MONTH 试试这个

```
 AND DATE_ADD(CURDATE(), INTERVAL 24 MONTHS) 
```

试试这个

```
SELECT `products`, `date`,quantity ,SUM(`quantity`)
FROM `my_table`
WHERE `date` 
BETWEEN CURDATE()
AND DATE_ADD(CURDATE(), INTERVAL 24 MONTHS)
GROUP BY `products` , `date` 
```

# ios - 在进程中停止 PerformRequestsWithTarget，当收到低内存警告时

> ID：15248662
> 
> 赞同：0
> 
> 时间：2013-03-06T13:29:27.740
> 
> 标签：ios, objective-c, cocoa-touch

上`ViewDidAppear`，

`[self performSelectorInBackground:@selector(generatePdf) withObject:nil];`

叫做。这会在加载视图后立即生成一个大 PDF。为了考虑内存不足的问题，我可以在启动后停止该进程吗？使用

`[NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(generatePdf) object:nil];`

不起作用，大概是因为视图一出现就已经调用了它。如果应用程序收到，我想停止这个过程，`didReceiveMemoryWarning`所以我正在寻找一种解决方案，可以在我的`- (void)didReceiveMemoryWarning`方法中完全停止它

```
- (void)viewDidAppear:(BOOL)animated
{

 LogCmd();
[super viewDidAppear:animated];
if (self.pdfData == nil) {

    // Generate PDF

    [self performSelectorInBackground:@selector(generatePdf) withObject:nil];
   }
}

 ....some code

- (void)didReceiveMemoryWarning {

[NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(generatePdf) object:nil];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:09:51.870

您不能停止正在运行的方法，但可以从中返回。

例如

```
- (BOOL)generatePdf{
    // some task

    if (memoryWarning){
        return NO;
    }

    // some Task

    if (memoryWarning){
        return NO;
    }

    //some Task

    if (memoryWarning){
        return NO;
    }

    //some Task

    //PDF has been successfully generated
    return YES;
} 
```

# php - 在 PHP 中将数据库日期格式转换为 yyyy-mm-dd 并返回到 dd-mm-yyyy

> ID：15248664
> 
> 赞同：0
> 
> 时间：2013-03-06T13:29:31.377
> 
> 标签：php, mysql

基本上我有一个用户选择的日期，其格式如下：

```
01-12-2013 (dd-mm-yyyy) 
```

我需要将其格式化为数据库的 yyyy-mm-dd 格式，作为它的日期类型，如下所示：

```
2013-12-01 
```

我将我的日期存储在一个变量中，让我们称之为`$date`

我尝试过像这样使用 createFromFormat 函数：

```
$processdate = DateTime::createFromFormat('dd-mm-yy', $date);
echo $processdate->format('yy-mm-dd'); 
```

但我收到一条错误消息：

```
Fatal error: Call to a member function format() on a non-object 
```

有人可以告诉我我是如何使用不正确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:33:16.667

[`createFromFormat`](http://www.php.net/manual/en/datetime.createfromformat.php)记录在失败时返回`false`，这正是这里发生的情况。当您尝试调用时程序会爆炸`format`，`false`这没有任何意义。

原因是您的格式字符串错误。对于给定的输入，正确的格式字符串是`"d-m-Y"`（格式字符串也记录在同一页面上）。

当然，这意味着您的输出格式字符串也是错误的：它应该是`"Y-m-d"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:32:54.777

MySQL 可以通过以下功能为您做到这一点[`STR_TO_DATE`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)：

```
SELECT STR_TO_DATE('01-05-2013','%d-%m-%Y'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:32:07.627

这就是我用来转换 SQL 日期和从 SQL 日期转换的方法

```
function human_date_to_sql($date) {
  if($date == '') return '';

  if(stristr($date, "-")) return $date;

  $date_parts = explode('/', $date);
  $sql_date = $date_parts[2] . "-" . $date_parts[1] . "-" . $date_parts[0];

  return $sql_date;
}

function sql_date_to_human($date) {
  if($date == '') return '';

  if(stristr($date, "/")) return $date;

  $date_parts = explode('-', $date);
  $human_date = $date_parts[2] . "/" . $date_parts[1] . "/" . $date_parts[0];

  return $human_date;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:33:06.157

试试这个：

```
 function dateInsert($Date, $In = '-', $Out = '-')
        {
            if ($Date)
                return implode($Out, array_reverse(explode($In, $Date)));
            else {
                return false;
            }
        }
$date = '01-12-2013';
echo dateInsert($date); 
```

您可以使用此功能更改日期。希望这会有所帮助。

# jquery - Google API Json Ajax/Jquery 调用

> ID：15248667
> 
> 赞同：0
> 
> 时间：2013-03-06T13:29:34.117
> 
> 标签：jquery, ajax, json, api

我正在尝试显示来自 Google API 的数据，但我的结果一直是“未定义”。这是我的代码：

```
$(document).ready(function() {
var url='https://www.googleapis.com/books/v1/volumes?q=harry+potter&maxResults=9'
    $('#button').click(function() {
        $.getJSON(url,function(data){
            $('#content').empty();
            $.each(data, function(entryIndex, entry){
                var html = '<div class="result">';                    
                html += '<h3>' + entry['id'] + '</h3>';
                html += '<div class="title">' + entry['title'] + '</div>';                  
                html += '<div class="author">' + entry['author'] + '</div>';                                        
                $('#content').append(html);
            });                        
        });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:56:58.290

您的代码应如下所示，以获取 API 所需的信息：

```
$(document).ready(function() {
var url='https://www.googleapis.com/books/v1/volumes?q=harry+potter&maxResults=9'
$('#button').click(function() {
    $.getJSON(url,function(data){
        $('#content').empty();
        $.each(data.items, function(entryIndex, entry){
            var html = '<div class="result">';                    
            html += '<h3>' + entry.id + '</h3>';
            html += '<div class="title">' + entry.volumeInfo.title + '</div>';                  
            html += '<div class="author">' + entry.volumeInfo.authors + '</div>';                                        
            $('#content').append(html);
        });                        
    });
    return false;
    });
}); 
```

问题是循环只计算一行。你需要得到它来计算列表中的项目数。这是通过放置“data.items”来处理的，以便能够获得准确的计数。很抱歉我没有早点发现这个。让我知道这是否能解决您的问题。

# sql - 使用可为空的外键查询表

> ID：15248680
> 
> 赞同：1
> 
> 时间：2013-03-06T13:30:08.503
> 
> 标签：sql, sql-server, optimization, normalization

假设我有一张表，上面有 5 个可以为空的外键。对于每一行，其中只有 1 个具有值。

现在，这个表已经增长了很多，并且包含了大约 220 万条记录。

在大多数情况下，我只对查询表 cq 的“部分”感兴趣，即某个可为空的外键具有值的那些记录。毫不奇怪，仅获取所需的子集需要很长时间，使用下面的查询：28 秒来获取一个特定子集的 1.7m 条记录。

> SELECT * FROM Table WHERE Col IS NOT NULL

我真的对如何加快速度非常感兴趣，尤其是在不更改数据模型的情况下是否可以实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:44:49.207

如果我无法更改基表，我将创建一个 VIEW 将五个非规范化列转换为两列：origin 和 value。所以假设你有这个：

```
Table notNormal (
primaryKey,
someValue,
foreignNotNormal01,
foreignNotNormal02,
foreignNotNormal03,
foreignNotNormal04,
foreignNotNormal05
) 
```

我会创建这个：

```
CREATE MATERIALIZED VIEW fixedThis AS
SELECT primaryKey, someValue, 'FKCOL01' AS foreignNotNormalOrigin, foreignNotNormal01 AS foreignNotNormalColValue
WHERE foreignNotNormal01 IS NOT NULL
UNION
 ...
 ...
SELECT primaryKey, someValue, 'FKCOL01' AS foreignNotNormalOrigin, foreignNotNormal05 AS foreignNotNormalColValue
WHERE foreignNotNormal05 IS NOT NULL 
```

然后我对 fixedThis 的 SELECTS 只显示外键列中的值的结果，无论它们可能是什么。

如果您只是想要一个简单的加速，那么索引是可行的方法，但实际上，您需要修复数据模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:34:22.227

唯一可以加速的东西

```
SELECT * FROM Table WHERE Col IS NOT NULL 
```

是上校的索引。

但是，将 170 万条记录从服务器传输到数据库客户端可能需要一段时间，尤其是通过网络传输时。您唯一能做的就是减少您发送的数据量，例如仅在 SELECT 中指定您需要的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:59:15.503

如果您要根据这些表是否为空来对数据进行分区，您可能会加快速度——所有数据`Col != NULL`都将位于一个分区中。当然，这假设这 5 列是该表中最重要的部分。

```
CREATE PARTITION FUNCTION MyCol1 (int)
AS RANGE LEFT FOR VALUES (NULL)

CREATE PARTITION SCHEME MySchemeForCol1
AS PARTITION MyCol1
TO Col1FileGroup 
```

不过，重构表会有所改善，而且我会在投入太多时间对数据进行分区之前先去那里。像这样的分区仍然会将事物保留在同一个表中，但会在磁盘上隔离......但是将表重构为一系列链接表*可能*会更划算。

但是，如果您对分区有任何运气，请让每个人都知道并发布解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T20:41:08.667

您是否尝试过将该表与相关外键引用的另一个表连接起来？这将删除外键为空的所有条目。
我希望加入运行非常缓慢，但您可能会感到惊喜。

另外，您是否有相关外键的索引？

# css - Chrome 中不可点击的链接 + 导航栏

> ID：15248683
> 
> 赞同：0
> 
> 时间：2013-03-06T13:30:14.370
> 
> 标签：css, google-chrome, firefox, twitter-bootstrap, hyperlink

我在顶部有一个固定的导航栏，在页脚中有一些链接（隐私、站点地图等）。当点击它们时没有任何反应。悬停和下拉有效，但未看到单击的链接。它适用于 Firefox (19)，但不适用于 Chrome。

有人可以帮忙吗？我使用标准的 bootstrap-css。

```
 <div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="containerr" align="center">
        <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>    
        </button>

      <table width="100%" border="0" cellpadding="0" cellspacing="2">
       <tr>
        ...
       </tr>
      </table>  

      <div class="nav-collapse">

        <ul class="nav">

          <li class="active"><a href="1.html" class="activator">1</a></li>
          <li class="divider-vertical"></li>
          <li><a href="2.html" class="activator">2</a></li>
          <li class="divider-vertical"></li>

          <li class="dropdown" id="iddropdown">

            <a href="3.html" class="dropdown-toggle activator" data-hover="dropdown" id="iddropdowninner">
            3 </a>
            <ul class="dropdown-menu">
              <li><a class="activator" href="3.html#collapseOne">3.1</a></li>                
              <li><a class="activator" href="3.html#collapseTwo">3.2</a></li>               
            </ul>
          </li>
          <li class="divider-vertical"></li>
          <li><a href="4.html" class="activator">4</a></li>            
        </ul>        

       </div><!-- /.nav-collapse -->
      </div><!-- /.container -->
     </div><!-- /.navbar-inner -->
    </div><!-- /.navbar --> 
```

[http://jsfiddle.net/Q2gj7/](http://jsfiddle.net/Q2gj7/)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T00:12:33.267

在 chrome 版本 32.0.1700.102 中，如果您使用 css `text-indent:-somebignumber;`隐藏文本，它会破坏链接

INSTEAD 根本不使用 text-indent 但确实使用`color:Transparent;` 了我也有`overflow:hidden;`

# c# - 给定单例缓存模式的缺点

> ID：15248686
> 
> 赞同：3
> 
> 时间：2013-03-06T13:30:24.340
> 
> 标签：c#, asp.net, caching, singleton

我正在使用给定的单例模式在 ASP.NET 中缓存一个类对象。谁能强调这种方法的缺点？

```
public class CacheManager
{
private static CacheManager _instance;

protected CacheManager(string key) { id = key; }
public static CacheManager getInstance(string key)
{
   if (HttpContext.Current.Cache[key] == null)
       HttpContext.Current.Cache.Insert(key, _instance = new CacheManger(key), null, System.Web.Caching.Cache.NoAbsoluteExpiration, TimeSpan.FromSeconds(120),CacheItemPriority.Default,new CacheItemRemovedCallback(ReportRemovedCallback));

   return (CacheManager)HttpContext.Current.Cache[key];
}

private static void ReportRemovedCallback(string CacheManager, object value, CacheItemRemovedReason reason)
{            
    _instance = null;
}

public string id { get; private set; }        
public string field1 { get; set; }
public string field2 { get; set; }
public string field3 { get; set; }        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:34:59.910

我看不出有任何理由让你把它变成单身人士。我只想为每个获取/设置值的属性编写一个包装器。这样，您可以更轻松地使用 IoC 容器注入它并提高可测试性。

就目前而言，您的代码不是线程安全的，这也可能导致问题。

# jquery - 如何在 JQuery Mobile 中从左到右移动复选框

> ID：15248691
> 
> 赞同：1
> 
> 时间：2013-03-06T13:30:35.893
> 
> 标签：jquery, jquery-mobile, mobile

我使用[http://jsfiddle.net/d8KNF/100/](http://jsfiddle.net/d8KNF/100/)在 jquery mobile 中呈现我的列表视图，但我想将此复选框向右移动....我无法使用 data-iconpos，我看看如何改变，但我想不出如何去做。当我使用 Chrome 检查元素并将动态生成的标签中的 btn-icon-left 类更改为 btn-icon-right 时，我没问题，但我无法添加此类，因为标签是动态生成的。

``*   ### advanced-customization-jquery-mobile-buttons

    Advanced Customization of the jQuery Mobile Buttons | Appcropolis

    *   ### adding many buttons to header in JQuery Mobile` 

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:53:51.510

尝试像这样定义字段集

```
<fieldset data-role="controlgroup" data-iconpos="right"> 
```

它来自 Jquery Mobile[官方文档](http://view.jquerymobile.com/1.3.0/docs/widgets/checkbox/)`

# html - 播放框架2在页面上显示视频

> ID：15248704
> 
> 赞同：0
> 
> 时间：2013-03-06T13:31:13.223
> 
> 标签：html, iframe, html-parsing, playframework-2.0

我有课文章：

```
@Entity
public class Article {  
@Id
public Long id;

@Constraints.Required
public String title;

@Formats.DateTime(pattern="yyyy-MM-dd")
    public Date added;

@Column(columnDefinition = "TEXT")
public String body; 
```

}

在我的视图文件的一部分中，我展示了文章的正文：

```
<div class = "article_body">
       <p>@article.body</p>
</div> 
```

我尝试将标签添加到正文，它像简单的文本一样显示在页面上。也许我需要编写一种解析器来在文本中查找标签，或者这种情况下是否存在任何标准函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:57:21.937

我只是在拍摄，你有 HTML 代码，`article.body`在页面上被转义了？在这种情况下，您需要对其进行转义：

```
<div class = "article_body">
    @Html(article.body)
</div> 
```

# php - PHP找不到动态库但它在磁盘上

> ID：15248706
> 
> 赞同：1
> 
> 时间：2013-03-06T13:31:14.263
> 
> 标签：php

我必须使用一个名为 ssh2 的 PHP 扩展：http: [//php.net/manual/en/book.ssh2.php](http://php.net/manual/en/book.ssh2.php)

我下载了源代码，并编译了它们。然后我将 .dll 复制到我的 php ext 目录中。然后我添加并`extension=php_ssh2.dll`重新`php.ini`启动了 Apache2，我收到以下错误：

> PHP 启动：无法加载动态库 'C:\xampp\php\ext\php_ssh2.dll' - 找不到指定的模块

这很奇怪，因为我在那条路径上有 php_ssh2.dll。也许我以错误的方式编译它？

顺便说一句，我正在使用 xampp。扩展的其余部分正确加载。

# java - php响应时出现JSON错误

> ID：15248711
> 
> 赞同：0
> 
> 时间：2013-03-06T13:31:17.783
> 
> 标签：java, android, json, arrays, jsonexception

我对 JSON 有疑问。

我有这个服务，它连接到 php 并以 json 格式向我发送数据。一切都很好（几个月前），但是今天我修改了一些东西并且不起作用。

我添加了一个调用函数来简单地比较 2 个 jSon 数组并创建另一个数组，其中的元素在一个数组中但在另一个数组中没有。

这是服务代码：

```
public class GroupsTaskAlarmChecker extends Service implements Runnable {

public void run() {
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("role", role));

try
{               
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://blablabla.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
        noInternet=false;

    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
            noInternet=true;
    }
    //convert response to string
    try{                
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
        }
        is.close();

        result=sb.toString();

    }catch(Exception e){
        Log.e("log_tag", "Error converting result "+e.toString());
        noInternet=true;
    }

    jArray2= result;
    mPrefs = getSharedPreferences(PREFS, 0);

if (jArray2.equals(groupList) || noInternet) {
    handler.sendEmptyMessage(NO_CHANGE);
}
else {
    if (!noInternet)
        {
            try {
                prepareForNewImage(jArray2);
            } catch (JSONException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }
    Editor e = mPrefs.edit();
    e.putString("groupList", jArray2);
    e.commit();
    handler.sendEmptyMessage(THERE_ARE_CHANGE);
}
}

public void prepareForNewImage(String j) throws JSONException {
    String gL = mPrefs.getString("groupList", null);
    Log.e("string j",j);
    String jA = "";
    jA=j;
    if(!gL.equals(null)) {
    JSONArray gL2 = new JSONArray(gL);
    JSONArray jA2 = new JSONArray(jA);
    boolean is = false;
    for(int i=0;i<jA2.length();i++){
        JSONObject json_data2 = jA2.getJSONObject(i);
        String gId_jA2=json_data2.getString("groupId");
        for(int k=0;i<gL2.length();k++){
            JSONObject json_data = gL2.getJSONObject(k);
            String gId_gL2=json_data.getString("groupId");
            if (gId_gL2.equals(gId_jA2))
                is=true;
        }
        if (!is)
        {
            is=false;
            newGroups.put(json_data2);          
        }
    Log.i("loop","end of first loop");
    }

        Editor e = mPrefs.edit();
        e.putString("newGroups", newGroups.toString());
        e.commit();
    }
    } 
```

这是我的新 logCat：

```
03-06 15:44:54.243: W/System.err(19868): org.json.JSONException: End of input at character 0 of 
03-06 15:44:54.253: W/System.err(19868):    at org.json.JSONTokener.syntaxError(JSONTokener.java:450)
03-06 15:44:54.253: W/System.err(19868):    at org.json.JSONTokener.nextValue(JSONTokener.java:97)
03-06 15:44:54.253: W/System.err(19868):    at org.json.JSONArray.<init>    (JSONArray.java:87)
03-06 15:44:54.253: W/System.err(19868):    at org.json.JSONArray.<init>(JSONArray.java:103)
03-06 15:44:54.253: W/System.err(19868):    at com.org.tfc_android.GroupsTaskAlarmChecker.prepareForNewImage(GroupsTaskAlarmChecker.java:162)
03-06 15:44:54.253: W/System.err(19868):    at com.org.tfc_android.GroupsTaskAlarmChecker.run(GroupsTaskAlarmChecker.java:139)
03-06 15:44:54.253: W/System.err(19868):    at java.lang.Thread.run(Thread.java:856) 
```

有人可以帮助我吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:38:20.430

你在这里弄错了你的索引检查：

`for(int k=0;i<gL2.length();k++){`
`------------^`

你应该使用`k`，而不是`i`。附带说明一下，您可能会从代码中收集到很多重复的代码（例如，对`mPrefs = getSharedPreferences(PREFS, 0);`.

# asp.net - 如何使用 JMeter 对实现视图状态的 ASP.net Web 应用程序进行负载测试

> ID：15248712
> 
> 赞同：4
> 
> 时间：2013-03-06T13:31:18.907
> 
> 标签：asp.net, jmeter, viewstate, load-testing

我是一名 .net 开发人员，之前没有 JMeter/压力测试方面的经验。我正在尝试对我使用 JMeter 开发的 ASP.net 网站进行负载测试。使用 JMeter 的原因是它是一个开源工具，具有很高的知名度和可信度。
我参考[这个链接](http://blog.technicallyworks.com/2009/06/load-testing-aspnet-sites-with-jmeter.html)是为了处理视图状态，这是 ASP.net 的一个典型特性。但是，我的要求并不像那里所说的那么简单。我正在尝试通过将用户名和密码发送到登录页面来加载测试我的网站，然后通过仅在登录成功时才允许浏览的其他页面进行测试。

下面列出了我为实现这一目标而采取的步骤。

1.  通过选择 WorkBench > Add > Non-Test Elements 创建 Http 代理服务器。
2.  将 Firefox 中的网络设置更改为 Http 代理服务器中定义的端口。
3.  `Thread Group`通过选择测试计划 > 添加 > 线程（用户）> 线程组来创建一个。
4.  `HTTP Request Defaults`通过选择线程组 > 添加 > 配置元素 > HTTP 请求默认值来创建。
5.  (a) 在 (b) 中输入我的远程服务器的 IP`Server Name or IP:`
    将我的登录页面的路径输入为`/MyWebApplication/login.aspx`
6.  `User Defined Variables`通过选择线程组 > 添加 > 配置元素 > 用户定义变量来创建。
7.  我的 login.aspx 页面非常简单，它从两个文本框中获取用户名和密码，并在数据库中匹配它们，如果成功，将它们重定向到 LoginSuccess.aspx 页面。
    我的 login.aspx 只有三个服务器控件，两个`asp:TextBox`用于接收登录 ID 和密码，一个`asp:Button`用于在 db 中检查它们。
    它们的 id分别是`txtLogin`, 。`txtPassword``btnLogin`

    在用户定义的变量（在步骤 6 中创建）中，我添加了 admin 和 123admin，它们是 db 中的真实登录，在 login.aspx 页面中进行检查，成功时重定向到 LoginSuccess.aspx 页面。

    用户定义的变量：

    ```
    Name:          Value    Description
    login          admin    
    password       123admin 
    ```

8.  我通过选择线程组 > 添加 > 后处理器 > 正则表达式提取器来添加两个正则表达式提取器。

9.  我已将第一个正则表达式提取器重命名为`View State Extractor`并向它们添加以下数据：

    ```
    Reference Name: viewstate
    Regular Expression: name="__VIEWSTATE" id="__VIEWSTATE" value="(.+?)"
    Template:$1$
    Match No.(0 for Random): 1
    Default Value: ERROR 
    ```

10.  同样，我将第二个正则表达式提取器重命名为`Event Validation Extractor`并向它们添加以下数据：

    ```
    Reference Name: eventValidation
    Regular Expression: name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="(.+?)"
    Template:$1$
    Match No.(0 for Random): 1
    Default Value: ERROR 
    ```

11.  在第 5 步中，我添加了以下数据

    ```
    Send Parameters With the Request:
        Name:             - Value
        txtLogin          - $(login)
        txtPassword       - $(password)
        __VIEWSTATE       - $(viewState)
        __EVENTVALIDATION - $(eventValidation) 
    ```

12.  现在我通过选择线程组 > 添加 > 配置元素 > HTTP Cookie 管理器添加了 HTTP Cookie 管理器。

13.  现在我通过选择 Thread Group > Add > Logic Controller > Recording Controller 添加了 Recording Controller。

14.  我启动了 HTTP 代理服务器，然后使用 firefox 输入了 login.aspx 页面的完整 URL，在两个文本框中输入了 admin 和 123admin，然后按下了 Login 按钮并在 LoginSuccess.aspx 上成功重定向。我停止了 HTTP 代理服务器并关闭了我的 Firefox 浏览器。

现在我已经保存了测试计划（包含记录的步骤，这里只有 2 个步骤，1 个用于 login.aspx，另一个用于 LoginSuccess.aspx）并运行测试并在返回 500 错误的 View Result Tree 中查看测试结果服务器。

我无法确定我在这里缺少什么成分，因此我无法成功使用 JMeter。我只更改了此处提到的那些值，对于我没有在这里写的所有内容，这些值都是默认类型，例如`No of thread:`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:41:56.710

1.  请至少添加更好的脚本架构。
2.  好吧，在上面的第 11 步中，你有`txtLogin = $(login)`, `txtPassword = $(password)`, ...
    引用变量值`$(VAR_NAME)`是不正确的，`${VAR_NAME}`应该使用。
    您能否确保您的问题是否只是拼写错误 - 或者您在脚本中是否有相同的拼写错误？
3.  使用例如[Debug Sampler](http://jmeter.apache.org/usermanual/component_reference.html#Debug_Sampler) / [Debug PostProcessor](http://jmeter.apache.org/usermanual/component_reference.html#Debug_PostProcessor)（在两个 RegEx Extractor 应用后插入）检查两者的值是否`viewstate`从`eventValidation`您的请求中提取，并且您的 regex 查询是否正常工作。
4.  在查看结果树结果中查看第二个 HTTP 请求采样器的请求面板，以确保所有具有正确值的已定义参数 ( `txtLogin`, `txtPassword`, `__VIEWSTATE`, `__EVENTVALIDATION`) 与请求一起发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T10:23:00.903

在第5步中，更改如下

```
Name:             - Value
txtLogin          - ${login}
txtPassword       - ${password}
__VIEWSTATE       - ${viewState}
__EVENTVALIDATION - ${eventValidation} 
```

还要验证，正则表达式提取器是否按要求工作。我的意思是检查它是否获取正确的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-19T07:56:14.520

我使用了[CSS/JQuery Extractor](http://jmeter.apache.org/usermanual/component_reference.html#CSS/JQuery_Extractor) ，它对我有用。使用视图状态 {viewState} 变量的正则表达式提取器被传递并得到视图状态损坏错误消息。

在 CSS/JQuery 提取器中设置的参数是：-

参考名称：viewState

CSS/JQuery 表达式：输入[id=__VIEWSTATE]

属性：值

我遵循的步骤是： -

1.  首先记录登录过程。
2.  在线程组中拖动所需的页面。
3.  在登录页面的获取请求中添加两个 CSS/JQuery 提取器，分别用于视图状态和事件验证。
4.  在登录页面的 post 请求中添加如下正文参数并运行批处理。

    名称： - 值

    txtLogin - ${登录}

    txtPassword - ${密码}

    __VIEWSTATE - ${viewState}

    __EVENTVALIDATION - ${eventValidation}

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-04-17T22:12:50.557

Http 500 是。服务器错误代码，所以不是你的脚本失败了必须做的是.aspx中的一个标签来禁用我几个月前遇到的安全性

# javascript - 如何将类添加到特定标签？

> ID：15248714
> 
> 赞同：0
> 
> 时间：2013-03-06T13:31:21.890
> 
> 标签：javascript, jquery

在从电子表格等菜单按钮编辑期间，我必须更改单元格样式。下面的代码无法正常工作。

```
$("#tab1 tr td:not(:first-child)").on("click", function (e) {          
    console.log(e);
    if(e.currentTarget.contentEditable != null){
         $(e.currentTarget).attr("contentEditable",true);
     }
     else{
         $(e.currentTarget).append("<input type='text'>");
     }
});
//Add bold text
$("#tab1 tr td:not(:first-child)").on("click", function () { 
   var mytd=this;
   $("#btn4 li a:eq(0)").on("click",function() {
     $(mytd).toggleClass("bold");
     $(this).toggleClass("bg");
   });
}); 
```

看一下代码的第二部分。它没有使当前单元格变为粗体。它使先前的粗体或任何其他单元格值变为粗体。

# java - JavaFX 2 事件分派到底层节点

> ID：15248716
> 
> 赞同：6
> 
> 时间：2013-03-06T13:31:26.163
> 
> 标签：java, event-handling, javafx-2, javafx

是否有正确的方法来解决两个同级窗格之间的事件传播问题？

例如，我们有内部有 2 个窗格的 StackPane。

```
StackPane p = new StackPane();
Region p1 = new Region();
Region p2 = new Region();
p.getChildren().addAll(p1, p2); 
```

此示例中的 p2 捕获鼠标事件，即使未消耗事件，p1 也无法对其做出反应。

如果事件不被 p2 消耗，是否有正确的方法将事件传播到 p1？

setMouseTransparent 不能解决我的问题，因为我需要两个子元素都对鼠标做出反应。

感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:59:16.467

默认情况下，事件只会向上传播层次结构并在根处终止。您可以采取一些方法来解决您的问题。

1.  创建您自己的事件实例。向触发共享事件实例的两个区域添加事件处理程序。将您希望跨区域通用的任何事件处理代码添加到共享实例。这是我从您给出的描述中采取的方法。
2.  从根本上捕获所有事件，而不是让它们死掉，而是创建一个每个人都可以注册的全局事件寄存器。
3.  在第一个区域创建一个事件处理程序并捕获事件并在第二个区域重新调度它们（使用`buildEventDispatchChain.dispatchEvent`）。然后在另一边做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-29T14:24:04.620

只需在事件处理程序中捕获事件并在其他组件上触发它：

```
top.addEventHandler(EventType.ROOT, event -> bottom.fireEvent(event)); 
```

您仍然可以在顶部组件上添加鼠标侦听器，并且效果很好。如果底部组件对事件做了更多花哨的事情，您可能需要克隆和调整它。这也适用于两个以上的孩子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:52:17.127

我的问题部分解决了。也许我不太正确地提出问题。我编写了类似图形编辑器的应用程序，并在带有指南、网格、选择工具等的 stackpane 上有工具层窗格，并且需要该层的子层可以处理鼠标，并且窗格本身对于鼠标事件是透明的。

问题已通过覆盖 pickNode 解决，而不是在公共 API 中，但它可以工作。也许可以帮助某人。

```
protected Node impl_pickNodeLocal(double localX, double localY) {
    if (containsBounds(localX, localY)) {
        ObservableList<Node> children = getChildren();
        for (int i = children.size()-1; i >= 0; i--) {
            Node picked = children.get(i).impl_pickNode(localX, localY);
            if (picked != null) return picked;
        }
        // hack to make pane itself transparent for mouse
        // if (contains(localX, localY)) return this;
    }
    return null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-01T01:33:44.913

试试这个也可以，

```
p1.setEventDispatcher(p2.eventDispatcherProperty().get()); 
```

[事件调度程序接口](https://docs.oracle.com/javase/8/javafx/api/javafx/event/EventDispatcher.html)

# css - 如何让父母无法点击和无法点击

> ID：15248718
> 
> 赞同：1
> 
> 时间：2013-03-06T13:31:27.843
> 
> 标签：css

我在这方面完全是新手，所以我希望我能弄清楚我在[http://test.lawsart.com/css3menu_2.html](http://test.lawsart.com/css3menu_2.html)上遇到的问题。css3menu 的人没有阅读我的问题。问题是，当您滚动顶级菜单项“投资组合”或三个子菜单之一并单击时，您将被发送到只有菜单的浏览器页面。在该页面上，投资组合和三个子菜单标题不可点击，这是应该的。您将在 html 标记中看到 href 引用是“#”，我认为这会起作用。有没有办法在 html 标记或 style.css 文件中执行此操作？如果没有，我该如何用 jQuery 修复它？如果答案是查询，请非常非常具体，因为我对 jQuery 或如何实现它知之甚少。谢谢。

这是html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>css3menu.com</title>
    <!-- Start css3menu.com HEAD section -->
    <link rel="stylesheet" href="../css3menuH/style.css" type="text/css" /><style type="text/css">._css3m{display:none}</style>
    <!-- End css3menu.com HEAD section -->

</head>
<body style="background-color:#">

<!-- Start css3menu.com BODY section -->
<ul id="css3menu1" class="topmenu">
    <li class="topmenu"><a href="http://test.lawsart.com/Home.html" style="width:48px;height:17px;line-height:17px;">Home</a></li>
    <li class="topmenu"><a href="http://test.lawsart.com/About.html" style="width:62px;height:17px;line-height:17px;">About Me</a></li>
    <li class="topmenu"><a href="#" style="width:64px;height:17px;line-height:17px;"><span>Portfolios</span></a>
    <ul>
        <li class="subfirst"><a href="#"><span>Horses</span></a>
        <ul>
            <li class="subfirst"><a href="http://test.lawsart.com/Horse.html">Horses I</a></li>
            <li><a href="http://test.lawsart.com/Home.html">Horses II</a></li>
            <li><a href="http://test.lawsart.com/Home.html">Horses III</a></li>
            <li><a href="http://test.lawsart.com/Home.html">Horses IV</a></li>
            <li><a href="http://test.lawsart.com/Home.html">Horses V</a></li>
            <li><a href="http://test.lawsart.com/Home.html">Horses VI</a></li>
            <li class="sublast"><a href="http://test.lawsart.com/Home.html">Horses VII</a></li>
        </ul></li>
        <li><a href="#"><span>Dogs</span></a>
        <ul>
            <li class="subfirst"><a href="http://test.lawsart.com/Dog.html">Dogs I</a></li>
            <li class="sublast"><a href="http://test.lawsart.com/Home.html">Dogs II</a></li>
        </ul></li>
        <li><a href="#"><span>People</span></a>
        <ul>
            <li class="subfirst"><a href="http://test.lawsart.com/People.html">People I</a></li>
            <li class="sublast"><a href="http://test.lawsart.com/Home.html">People II</a></li>
        </ul></li>
        <li class="sublast"><a href="http://test.lawsart.com/Stills.html">Stills</a></li>
    </ul></li>
    <li class="topmenu"><a href="http://test.lawsart.com/Order.html" style="width:47px;height:17px;line-height:17px;">Order</a></li>
    <li class="topmenu"><a href="http://test.lawsart.com/Contact.html" style="height:17px;line-height:17px;">Contact Me</a></li>
</ul><p class="_css3m"><a href="http://css3menu.com/">CSS3 Drop Down Menu Free Css3Menu.com</a></p>
<!-- End css3menu.com BODY section -->

</body>
</html> 
```

这是 style.css 文件：

```
ul#css3menu1,ul#css3menu1 ul{
    margin:0;list-style:none;padding:0;background-color:#018b01;background-image:-o-linear-gradient(-90deg,rgba(255,255,255,0.38),rgba(255,255,255,0.16)); background-image:-moz-linear-gradient(-90deg,rgba(255,255,255,0.38),rgba(255,255,255,0.16));   background-image:linear-gradient(180deg,rgba(255,255,255,0.38),rgba(255,255,255,0.16));  background-image:-webkit-linear-gradient(-90deg,rgba(255,255,255,0.38),rgba(255,255,255,0.16));background-repeat:repeat;border-width:1px;border-style:solid;border-color:#343434;-moz-border-radius:28px;-webkit-border-radius:28px;border-radius:28px;}
ul#css3menu1 ul{
    display:none;position:absolute;left:0;top:100%;-moz-box-shadow:1.4px 1.4px 2px #B1B1B1;-webkit-box-shadow:1.4px 1.4px 2px #B1B1B1;box-shadow:1.4px 1.4px 2px #B1B1B1;background-color:#018b01;background-image:-o-linear-gradient(-90deg,rgba(255,255,255,0.16),rgba(255,255,255,0)); background-image:-moz-linear-gradient(-90deg,rgba(255,255,255,0.16),rgba(255,255,255,0));   background-image:linear-gradient(180deg,rgba(255,255,255,0.16),rgba(255,255,255,0));  background-image:-webkit-linear-gradient(-90deg,rgba(255,255,255,0.16),rgba(255,255,255,0));border-radius:10px;-moz-border-radius:10px;-webkit-border-radius:10px;border-color:#000000;padding:0;}
ul#css3menu1 li:hover>*{
    display:block;}
ul#css3menu1 li{
    position:relative;display:block;white-space:nowrap;font-size:0;float:left;}
ul#css3menu1 li:hover{
    z-index:1;}
ul#css3menu1 ul ul{
    position:absolute;left:100%;top:0;}
ul#css3menu1{
    font-size:0;z-index:999;position:relative;display:inline-block;zoom:1;padding:1px 1px 1px 0;
    *display:inline;}
* html ul#css3menu1 li a{
    display:inline-block;}
ul#css3menu1>li{
    margin:0 0 0 1px;}
ul#css3menu1 ul>li{
    margin:1px 0 0;}
ul#css3menu1 a:active, ul#css3menu1 a:focus{
    outline-style:none;}
ul#css3menu1 a{
    display:block;vertical-align:middle;text-align:left;text-decoration:none;font:12px Arial;color:#E7E5E5;cursor:pointer;padding:2px 20px 2px 20px;background-color:;background-repeat:repeat;border-width:0;border-style:solid;border-color:transparent;}
ul#css3menu1 ul li{
    float:none;margin:0;}
ul#css3menu1 ul a{
    text-align:left;}
ul#css3menu1 li:hover>a,ul#css3menu1 li a.pressed{
    background-color:#7ACF27;border-color:#F8F8F8;border-style:solid;color:#333;background-image:-o-linear-gradient(-90deg,rgba(255,255,255,0.38),rgba(85,170,0,0.7)); background-image:-moz-linear-gradient(-90deg,rgba(255,255,255,0.38),rgba(85,170,0,0.7));   background-image:linear-gradient(180deg,rgba(255,255,255,0.38),rgba(85,170,0,0.7));  background-image:-webkit-linear-gradient(-90deg,rgba(255,255,255,0.38),rgba(85,170,0,0.7));text-decoration:none;filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr=#60FFFFFF,endColorstr=#B355AA00)}
ul#css3menu1 ul span{
    background-image:none;padding-right:2px;}
ul#css3menu1 li.topmenu>a{
    background-color:;border-width:1px 0 0 0;border-style:solid;border-color:;border-radius:16px;-moz-border-radius:16px;-webkit-border-radius:16px;font:bold 13px Arial;color:#E7E5E5;text-decoration:none;text-shadow:0 1px 1px #000000;}
ul#css3menu1 li.topmenu:hover>a,ul#css3menu1 li.topmenu a.pressed{
    background-color:#7dfa00;background-image:-o-linear-gradient(-90deg,rgba(255,255,255,0.77),rgba(85,170,0,0.7)); background-image:-moz-linear-gradient(-90deg,rgba(255,255,255,0.77),rgba(85,170,0,0.7));   background-image:linear-gradient(180deg,rgba(255,255,255,0.77),rgba(85,170,0,0.7));  background-image:-webkit-linear-gradient(-90deg,rgba(255,255,255,0.77),rgba(85,170,0,0.7));border-style:solid;border-color:#F8F8F8;color:#333;text-decoration:none;text-shadow:0 1px 0 #C5EAA1;filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr=#C6FFFFFF,endColorstr=#B355AA00)}
ul#css3menu1 li.subfirst>a{
    border-radius:9px 9px 0 0;-moz-border-radius:9px 9px 0 0;-webkit-border-radius:9px;-webkit-border-bottom-right-radius:0;-webkit-border-bottom-left-radius:0;}
ul#css3menu1 li.sublast>a{
    border-radius:0 0 9px 9px;-moz-border-radius:0 0 9px 9px;-webkit-border-radius:0;-webkit-border-bottom-right-radius:9px;-webkit-border-bottom-left-radius:9px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:19:33.283

您发布的 HTML 看起来不错，但在实时页面本身上存在导致链接处于活动状态的额外属性。这是现场网站上“马”的代码：

```
<li class="subfirst"><a href="#" target="_top"><span>Horses</span></a>
  <ul>
    <li class="subfirst"><a href="http://test.lawsart.com/Horse.html" target="_top">Horses I</a></li>
    <li><a href="http://test.lawsart.com/Home.html" target="_top">Horses II</a></li>
    <li><a href="http://test.lawsart.com/Home.html" target="_top">Horses III</a></li>
    <li><a href="http://test.lawsart.com/Home.html" target="_top">Horses IV</a></li>
    <li><a href="http://test.lawsart.com/Home.html" target="_top">Horses V</a></li>
    <li><a href="http://test.lawsart.com/Home.html" target="_top">Horses VI</a></li>
    <li class="sublast"><a href="http://test.lawsart.com/Home.html" target="_top">Horses VII</a></li>
  </ul>
</li> 
```

`target="_top"`属性是问题。看起来那段代码正在插入到实时 HTML 中。

一次可能的解决方案：替换`#`为`javascript: void(0)`. 这可以防止链接处于活动状态，并且即使使用`target="_top"`.

# java - 巡航控制批处理文件构建永远不会完成

> ID：15248722
> 
> 赞同：0
> 
> 时间：2013-03-06T13:31:31.857
> 
> 标签：java, tomcat, cruisecontrol

我正在使用巡航控制触发批量部署脚本，当前文件执行完美但巡航控制没有看到脚本结束。它一直在旋转（构建），并且永远持续下去。

我的脚本启动下载构建提取它，然后使用部署的应用程序启动 tomcat。该脚本还以以下结尾：

```
exit /B 0 
```

然而巡航控制没有看到脚本退出......

任何人都有一个想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:22:13.027

为了结束这个问题，巡航控制计划中的标签在批处理文件中是愚蠢的。如果批处理文件启动位于不同窗口中的应用程序，则构建过程将不会停止，直到这些程序的窗口停止。我使用的脚本是在自己的窗口中启动 tomcat，因为它是一个部署脚本。幸运的是，如果您从 vbs 文件而不是批处理启动窗口，则新窗口不会被视为子进程，这是我们希望巡航控制完成其构建的子进程。

# ios - 如何检测 IAPFree 和 IAPracker

> ID：15248724
> 
> 赞同：4
> 
> 时间：2013-03-06T13:31:35.880
> 
> 标签：ios, in-app-purchase

我正在寻找一种方法来检测在我的应用程序中使用 IAPracker 的人。

最近我发现这篇有用的帖子[如何检测“LocallAPStore” - 新的 iap 破解程序](https://stackoverflow.com/questions/13325924/how-to-detect-locallapstore-new-iap-cracker)并用它来保护我的一些应用内购买。

现在我发现了一个新的应用内破解来源——你知道的。所以我安装了这个名为 IAPFree 的新插件，这是一种破解 IAP 的新方法。我在一些应用程序和我自己的应用程序上对其进行了测试，它工作正常，这不好！

![在此处输入图像描述](../Images/11143d592446565babedc15c5c69f6d5.png)

我尝试通过与 IAPracker 相同的方式来检测它：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:@"/Library/MobileSubstrate/DynamicLibraries/iap.dylib"]){
    NSLog(@"IAP Cracker detected");
} 
```

但不幸的是，文件的名称被更改为“iapfree.core.dylib”（我打开IFile并在同一目录中找到该文件）。

现在我想我可以简单地替换目录。但是，它不起作用！我用这段代码以某种方式检测它：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:@"/Library/MobileSubstrate/DynamicLibraries/iapfree.core.dylib"]){
    NSLog(@"IAPfree detected");
}else{
NSLog(@"No IAPFree found");
} 
```

我认为这将是一个随机错误，我尝试使用同一目录中的其他文件。他们确实奏效了！

我无法弄清楚这个文件有什么问题。我认为这可能是由“.core.”引起的，但实际上我不知道。

您知道如何解决问题或以其他方式检测问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:03:43.677

解决问题的**最佳**方法（也是“Apple 批准”的唯一方法）是使用外部服务器检查应用内购买收据，而不是破解者！有很多第三方服务很容易做到这一点，有些甚至是免费的。

[作为替代方案，您可以按此处](http://ilmalvagiodottorprosciutto.tumblr.com/post/16467232458/howto-block-inappcracker-client-side-till-next)和[此处](http://ilmalvagiodottorprosciutto.tumblr.com/post/18552172799/update-new-version-of-inapp-cracker)所示在本地查看收据（完全披露，这是我的博客；））。它有一些优势（更简单，即使验证服务器离线或无法访问也能正常工作）但当然新的破解系统可能会欺骗它。

这里有一段代码：当你检查 paymentQueue（inApp 协议的回调）时，你可以这样做：

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions)
    {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
            case SKPaymentTransactionStateRestored:
            {
                [self checkReceipt:[_productIdentifierList objectAtIndex:0] transazione:transaction];
                [self finishPaymentTransaction:transaction];
            }

                break;

            case SKPaymentTransactionStateFailed:
            {
                [UIView msgBox:@"Transaction Error" title:@"Errore"];
                [self finishPaymentTransaction:transaction];
            }
                break;

            default:
                break;
        }           
    }
}

- (void) checkReceipt:(SKProduct *)prodotto transazione:(SKPaymentTransaction *)transaction
{
    NSString*ricevuta = [[NSString alloc] initWithData:transaction.transactionReceipt encoding:NSUTF8StringEncoding];

    NSRange hackTest = [transaction.transactionIdentifier rangeOfString:@"com.urus.iap"];   // ok if this not found
    NSRange hackTest2 = [transaction.transactionIdentifier rangeOfString:@"PUT HERE YOUR INAPP ID"];    // TODO: PUT HERE YOUR INAPP ID
    if (hackTest.location == NSNotFound && hackTest2.location == NSNotFound)
    {
        // it pass the local test: receipt is probably good
    }
    else
    {
        // invalid receipt, fake for sure, cancel buying...
    }
} 
```

请注意，您必须将您的 inApp 代码放入“hackTest2”检查中：因此，如果您有多个产品，您可能会创建一个循环...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-04T15:31:35.233

还要检查“IAPFreeService.dylib”

希望这可以帮助。

# iphone - 来自 NSString 的 NSDate 调整为设备时区

> ID：15248725
> 
> 赞同：-1
> 
> 时间：2013-03-06T13:31:39.157
> 
> 标签：iphone, ios, objective-c, nsdate

我有一个`NSString`这样的：

```
 NSString *playTime = @"20:45";// GMT 
```

我需要将此字符串转换为`NSDate`（仅小时和秒），然后调整为设备时区。

例子：

如果用户设备时区设置为**GMT**，我需要这样的结果：**@"20:45"**；

如果用户设备时区设置为**GMT + 2**，我需要这样的结果：**@"22:45"**；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:46:27.550

试试这个

```
NSString *gmtDateString = @"20:45";

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];
[dateFormatter setDateFormat:@"HH:mm"];

//Now you have date in GMT time zone by default dateFormatter timezone would be in local time zone
NSDate *date = [dateFormatter dateFromString:dateString];

//set to local time zone
[dateFormatter setTimeZone:[NSTimeZone localTimeZone]];

//Now you have string in localDate format
NSString *localDateString = [dateFormatter stringFromDate:date]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:41:35.973

根据您的要求使用此代码进行日期转换。

```
 NSDateFormatter *dateFormat = [NSDateFormatter new];
   [dateFormat setDateFormat:@"HH:mm"];
    [dateFormat setTimeZone:[NSTimeZone localTimeZone]];
    logDate = [dateFormat dateFromString:@"20:45"];
     NSLog(@"Date %@",[dateFormat stringFromDate:logDate]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:56:18.843

下面的代码将计算本地时区的时间。
假设我的时区是**`GMT+05:30`**这样，时间**`05:30`**会变成**`00:00`**.

```
NSString *playTime = @"20:45";
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"HH:mm";
NSDate *date = [formatter dateFromString:playTime];
NSLog(@"%@",date); 
```

**日志是：** `2000-01-01 15:15:00 +0000`

# c++ - 在 Qt 中调用 SetText() 后，QLineEdit 无法撤消

> ID：15248729
> 
> 赞同：0
> 
> 时间：2013-03-06T13:31:52.683
> 
> 标签：c++, qt

在我的应用程序中，我有很多`QLineEdit`小部件。用户可以编辑它们。我观察到，如果我将文本添加到一个`QLineEdit`通过`GUI`& 然后如果它`QLineEdit`有光标然后如果我按下`ctrl+z`然后它撤消文本，因此其中没有文本。现在，如果我按代码设置文本，则按`SetText("some text")`方法`undo`不起作用`ctrl+z`。即使我`undo`通过代码仍然无法清除文本。问题是什么？我错过了什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:56:28.323

`undo`可能认为您设置的值`SetText`应该被视为默认起始值​​，不需要`undo`ing。对我来说似乎是正常的行为。

这是`SetText()`定义：

此属性保存行编辑的文本。设置此属性会清除选择，清除撤消/重做历史，将光标移动到行尾并将修改的属性重置为 false。使用 setText() 插入文本时不会验证文本。文本被截断为 maxLength() 长度。默认情况下，此属性包含一个空字符串。调用 setText() 会将修改后的标志重置为 false。

也许如果你设置`setModified ( bool )`为 true，会为你解决这个问题

编辑：找到解决方法：`insert(QString text)`工作`undo()`得很好

# ios - 从横向到纵向的方向变化奇怪地工作

> ID：15248732
> 
> 赞同：0
> 
> 时间：2013-03-06T13:32:01.887
> 
> 标签：ios, objective-c, xcode, uiviewcontroller, uiinterfaceorientation

在横向模式下创建应用程序后。我在纵向视图中为我的应用程序添加菜单视图，
但是当我尝试从 xib 和以编程方式更改视图时，
视图发生了变化，但移动模拟器仍然显示为横向视图，同时显示了
我经历过的上一个视图背景许多关于方向的问题，但似乎对我没有任何帮助

这是应用程序的图片参考
![在此处输入图像描述](../Images/f9c05aa89d96d8f2326ad303ffe4816b.png)

创建按钮的代码很
简单按钮代码是

```
easee = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[easee addTarget:self 
            action:@selector(easy:)
  forControlEvents:UIControlEventTouchUpInside];
[easee setImage:[UIImage imageNamed:@"radioButtonDisabled.png"] forState:UIControlStateNormal];
easee.frame = CGRectMake(85.0, 86.0, 22.0, 22.0);
[self.view addSubview:easee]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:58:22.097

设备旋转时视图框不旋转。只有框架内的视图边界旋转。如果您的 UIView 对象在纵向和横向上的位置不同，并且您已经尝试过 struts 和 springs 但这还不够，那么您必须以编程方式对它们的位置进行编码。在这种情况下，使用边界。

```
easee.bounds = CGRectMake(85.0, 86.0, 22.0, 22.0); 
```

请记住，您需要为纵向和横向设置不同的代码（坐标），具体取决于视图中的对象位置和方向。

请阅读视图 PG：http: [//developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/WindowsandViews/WindowsandViews.html](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/WindowsandViews/WindowsandViews.html)

它会让你很好地理解视图、边界、框架等......

希望这可以帮助。

# php - filter_has_var 函数

> ID：15248736
> 
> 赞同：1
> 
> 时间：2013-03-06T13:32:13.883
> 
> 标签：php, filter

我在尝试使此功能工作很长时间时遇到了麻烦。之前，我在做

```
if ( !filter_has_var(INPUT_POST, 'email') ) {
    code here etc.
} 
```

但这从来没有奏效过，这是应该如何设置函数的正确格式。[参考](http://php.net/manual/en/function.filter-has-var.php)

然后在尝试让它发挥作用之后，我将'email'更改为'$email'，这就成功了。所以，现在我很困惑，这是一个小故障还是我顶部的代码不正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:01:39.080

通过这个例子我想你可以更好地理解

```
if ( !filter_has_var(INPUT_GET, 'email') ) {
    echo "Email Not Found";
} else {
    echo "Email Found";
} 
```

输出

```
 localhost/nanhe/test.php?email=1 //Email Found
    localhost/nanhe/test.php?email //Email Found
    http://localhost/nanhe/test.php //Email Not Found 
```

考虑第二个例子 [http://localhost/nanhe/test.php](http://localhost/nanhe/test.php)

```
$_GET['email']="info@nanhe.in";
if ( !filter_has_var(INPUT_GET, 'email') ) {
    echo "Email Not Found";
} else {
    echo "Email Found";
} 
```

但输出将是电子邮件未找到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:45:11.000

您可以使用：

```
if (isset($_POST['email']) && filter_var($_POST['email'], FILTER_VALIDATE_EMAIL))
{ 
   //Your Code here for valid email...
} 
else
{
   //Your Code here for invalid email...
} 
```

# ruby - Ruby：EventMachine 和单独的回调队列

> ID：15248739
> 
> 赞同：0
> 
> 时间：2013-03-06T13:32:26.833
> 
> 标签：ruby, multithreading, callback, eventmachine

EventMachine 在单独的线程中执行所有操作，并在一个主线程中执行此操作的所有回调。当您需要降低数据部分之间的数据处理竞争力时，它非常有用。您可以从网络并发接收数据并在队列中处理结果。但我需要走得更远。我的网站上有很多用户，并希望为每个用户创建单独的队列。因此，对于每个用户，它应该表现得像单个 EM。但我不能。EventMachine 是单调的。

```
Thread.new do
  EM.run
end

def request_from_user
  operation = Proc.new {
    # network request
  }
  callback = Proc.new {
    # some heavy data processing
    2*2
  }
  5.times do
    EM.defer(operation, callback)
  end
end

3.times do
  request_from_user
end 
```

所以我们在主线程队列中有回调混乱。一些数据将在队列末尾处理，一些在中间处理，这很糟糕。负载过重会扩大队列，一些用户会以非常大的延迟收到结果。如果我在单线程中运行 request_from_user，无论如何都会在一个 EM 主线程中执行回调。

那么我能用它做什么呢？是否可以为每个用户创建单独的回调队列并同时执行它？甚至可能没有 EventMachine。赛璐珞，随便...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:50:32.033

如果您可以监听不同的端口，那么每个用户可以拥有一个服务器/端口。如果不是，Ruby 确实有一个可能对您有用的 Queue 对象：[http](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/thread/rdoc/Queue.html) ://www.ruby-doc.org/stdlib-1.9.3/libdoc/thread/rdoc/Queue.html用于将进程输出到其他线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T03:15:26.213

为什么不将回调中的工作移至操作（因此，回调仅在您完成数据处理时触发）或 EM.defer 调用？您不想在主线程上进行繁重的数据处理，因为这会导致各种延迟。

# android - 如何克服 OutOfMemoryError

> ID：15248741
> 
> 赞同：-1
> 
> 时间：2013-03-06T13:32:27.750
> 
> 标签：android

我正在开发一个从服务器获取图像 url 的应用程序。我必须使用该网址并设置图像背景。每件事都在 15-20 分钟内运行良好。该应用程序崩溃后。

> 03-06 18:35:43.871: E/GraphicsJNI(22189): VM 不允许我们分配 93000 字节

发生此错误时，它会在 logcat 中显示此行。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:34:05.550

在你使用你`Bitmap`的 s 之后，你应该使用**`recycle()`**它们。此外，将所有位图包装到`WeakReference`s 中，让垃圾收集器更轻松地释放资源。

Android 应用程序有一个非常严格的内存限制，当使用`Bitmap`s 进行体操时很容易达到这个限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:35:25.790

发生这种情况的原因是您将巨大的图片设置为您`ImageView`的设备，直到您的设备内存不足。

您应该做的是创建此图片的缩略图版本并将它们应用到`ImageView`. `ImageView`并仅在单击或根本不显示时才显示完整图像。

您可以使用此方法从文件中获取图像的缩略图，但您必须先将设备上的图像保存到文件对象：

```
public static Bitmap decodeSampledBitmapFromFile(String path,
        int reqWidth, int reqHeight) { // BEST QUALITY MATCH

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(path, options);

    // Calculate inSampleSize
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        options.inPreferredConfig = Bitmap.Config.RGB_565;
        int inSampleSize = 1;

        if (height > reqHeight) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        }

        int expectedWidth = width / inSampleSize;

        if (expectedWidth > reqWidth) {
            //if(Math.round((float)width / (float)reqWidth) > inSampleSize) // If bigger SampSize..
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }

    options.inSampleSize = inSampleSize;

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;

    return BitmapFactory.decodeFile(path, options);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:15:34.653

您应该确保正确处理并且不使用太大或留在内存中的图像。请参阅 android 的此文档

[http://developer.android.com/reference/android/app/Application.html#onLowMemory%28%29](http://developer.android.com/reference/android/app/Application.html#onLowMemory%28%29)

您可以覆盖 onLowMemory() 方法来管理您的内存使用情况。

# android - AutoCompleteTextView suggestion is not popping

> ID：15248744
> 
> 赞同：2
> 
> 时间：2013-03-06T13:32:47.393
> 
> 标签：android, autocomplete, android-listview, listactivity

I am adding the View to the Header of ListView in the ListActivity, after inflating which has AutoCompleteTextView and not showing the suggestions on entering text. Though it works absolutely fine in normal case but not working fine when added to Header of ListView.

header_route.xml :

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        >
     <TextView
        android:id="@+id/lblride_From"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/txtFrom"
        android:layout_alignParentTop="true"
        android:text="@string/lblride_Route"
        />

    <AutoCompleteTextView
        android:id="@+id/txtFrom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/lblride_From"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="2dp"
        android:completionThreshold="1"
        android:ems="10"
        android:width="290dp"
        android:imeOptions="actionGo"
        android:popupBackground="@android:color/black" >

        <requestFocus />
    </AutoCompleteTextView>

    <Button
        android:id="@+id/hdbtnOkRoute"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/txtFrom"
        android:layout_below="@+id/txtFrom"
        android:layout_marginTop="2dp"
        android:minHeight="40dp"
        android:text="@string/txtBtnOk"
        android:width="290dp" />

 </RelativeLayout> 
```

```
public class BusRouteActivity extends ListActivity implements TextWatcher {

    AutoCompleteTextView actvFrom;
    Button buttonOK;
    TextView txtViewRouteItem;
    ListView lstViewRoute;
    ArrayAdapter<String> listAdapter;
    DataBaseHelper databaseHelper;
    TextView tvFooter;
    Context appContext;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setTitle(R.string.nameBusRouteActivity);
        appContext = getApplicationContext();
        lstViewRoute = getListView();
        LayoutInflater inflater = (LayoutInflater)appContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
        View view = inflater.inflate(R.layout.header_route, null);

        DataBaseHelper dbh = new DataBaseHelper(getApplicationContext());

        try {
            dbh.createDataBase();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();            
        }

        dbh.openDataBase();
        databaseHelper = dbh;

    actvFrom = (AutoCompleteTextView) view.findViewById(R.id.txtFrom);
        actvFrom.addTextChangedListener(this);
        actvFrom.setOnEditorActionListener(actionListener);
        ArrayAdapter<String> aroutes = new ArrayAdapter<String>(appContext, R.layout.routeitem, dbh.GetRoutes());
        actvFrom.setAdapter(aroutes);

        buttonOK = (Button)view.findViewById(R.id.hdbtnOkRoute);
        buttonOK.setOnClickListener(OkOnClickListener);

        tvFooter = new TextView(this);
        tvFooter.setTextAppearance(getApplicationContext(), R.style.footerStyle);
        String text = getResources().getString(R.string.footer);
        tvFooter.setText(Html.fromHtml(text));

        listAdapter = new ArrayAdapter<String>(getApplicationContext(), R.layout.routeitem);
        lstViewRoute.addHeaderView(view, null, false);
        lstViewRoute.addFooterView(tvFooter, null, true);
        lstViewRoute.setClickable(true);
        lstViewRoute.setSelected(true);
        lstViewRoute.setAdapter(listAdapter);
    } 
```

Please let me know if I am missing any setting? Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T06:43:16.787

这是一个可能对您有所帮助的代码！

[http://www.javatpoint.com/android-autocompletetextview-example](http://www.javatpoint.com/android-autocompletetextview-example)

# php - 从 PHP 匿名函数访问变量

> ID：15248745
> 
> 赞同：2
> 
> 时间：2013-03-06T13:32:52.363
> 
> 标签：php, anonymous-function

我有以下带有静态变量的类。如何从匿名 PHP 函数中访问类的静态函数？

```
class MyClass {
  public static function MyFunction(mylocalparam){
      MyStaticClass:MyStaticMethod(function(myparam) use(mylocalparam){
         MyClass::MyFunction2(mylocalparam);
   });
  }

  private static function MyFunction2(someobject){
  }
} 
```

我无法从匿名类中访问函数“MyFunction2”。您能否就如何纠正这个问题提出建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:34:44.397

不会发生。您需要制作静态功能`public`。匿名函数不在 的范围内运行`MyClass`，因此无法访问`private`其中包含的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:38:33.853

静态是不可能的，但如果你愿意，你可以通过 type 的参数传递你想调用的方法`callback`。

如果您将整个类更改为实例类（删除所有`static`关键字），那么您可以`$this`在匿名函数内部使用来调用您所在类的任何方法。

来自 PHP 手册：

> 闭包也可以从父作用域继承变量。

作为指定：

> 在 5.4.0 版本中，$this 可用于匿名函数。

```
class MyClass {
  public function MyFunction($mylocalparam){
      MyStaticClass:MyStaticMethod(function($myparam) use($mylocalparam){
         $this->MyFunction2($mylocalparam);
   });
  }

  private function MyFunction2($someobject){
  }
} 
```

# visual-studio - 如何选择使用建议提示

> ID：15248757
> 
> 赞同：0
> 
> 时间：2013-03-06T13:33:10.870
> 
> 标签：visual-studio, resharper

当我在没有指定完整命名空间的情况下键入一个类的名称并且该类不能通过 using 语句使用时，Visual Studio 会猜测我的意思是哪个类并在提示中显示完全命名空间的类名。

例如：

![例子](../Images/17da68c16051cc438ae9f60dc10a0b9c.png)

如果我单击它，它会添加必要的 using 语句。

如何使用键盘选择该提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:39:14.047

所以事实证明，这实际上是一个 ReSharper 功能（不是 Visual Studio 内置的功能），我可以按`Alt`+`Enter`来选择它。

# kml - Local images are not appearing in kmz

> ID：15248762
> 
> 赞同：1
> 
> 时间：2013-03-06T13:33:28.593
> 
> 标签：kml, google-earth, google-earth-plugin, kmz

I have information bubble in kml, which shows image along with some data.

That image is a local image which comes from respective folders. I have added a "file" addition before image src path , now i am able to see images on placemark in kml file.

But when I convert this kml file to kmz those images on bubbles are not appearing.

Can any one help me regarding this??

Cheers Praveen.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:28:54.250

这是一个[在 infowindow 中带有图像的示例 KMZ 文件](http://www.geocodezip.com/geoxml3_test/internalimage_testB_kmz.kmz)，它使用 Google Maps API v3 中的 KmlLayer 工作（似乎无法嵌入链接，所以它在下面）：

[公里层](http://www.geocodezip.com/v3_GoogleEx_layer-kml_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/internalimage_testB_kmz.kmz)

[geoxml3](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmztest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/internalimage_testB_kmz.kmz)

[![在此处输入图像描述](../Images/a1621cb05bb287ecb9402b26591e5c68.png)](https://i.stack.imgur.com/4gD5U.png)

~~并使用[谷歌地图](https://maps.google.com/maps?q=http:%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2Finternalimage_testB_kmz.kmz&hl=en&ll=45.000207,45&spn=0.001055,0.001725&sll=45.000268,45.000032&sspn=0.001055,0.001725&t=m&z=19&iwloc=lyrftr:kml:cjy5Wd1IV6vbsEDb7g4q2-_xmHHVRyKG8ivK_QQ,g89890df64c9bf213,,)~~（不再支持）

图像嵌入在 KMZ 中。

[KMZ 文档](https://developers.google.com/kml/documentation/kmzarchives#externalrefs)指出：

> 它们可以引用同一 KMZ 文件中的文件，或引用其他 KMZ 文件中包含的文件或存储在网络上其他位置的文件。

您的 File:/// 参考不是“在网络上”。

它还指出：

> 但是，如果您使用对本地文件的绝对引用，则在将文件移动到新系统时链接将中断。相对引用避免了这个问题。

# cassandra - Priam备份自动恢复

> ID：15248772
> 
> 赞同：1
> 
> 时间：2013-03-06T13:34:11.830
> 
> 标签：cassandra, netflix, priam

我有一个由 Priam 管理的 Cassandra 集群，有 3 个节点。我使用临时磁盘来存储我的 Cassandra 数据，所以当我启动 1 个节点时，Cassandra 数据目录是空的。

我已经正确配置了 Priam，并且可以看到备份保存在 Amazon S3 中。假设一个节点出现故障，然后我启动另一个节点。当节点再次启动时，Priam 是否知道如何从 S3 自动恢复备份？Cassandra 数据目录将开始为空，所以我假设 Priam 会给新节点与旧节点相同的令牌，它会恢复数据......对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-21T01:28:23.373

是的。我一直在 EC2 上运行独立的 Cassandra，在 EC2 上的 mesos 上运行小型 Cassandra 集群，在 EC2 上运行更大的 DataStax Enterprise 集群（使用 Cassandra）。

我一直在使用 Priam 3.x 分支。

在恢复时，它会计算 initial_token，更新 cassandra.yaml 文件，恢复快照和增量备份文件，然后重新启动 Cassandra。

根据 Priam/Netflix 约定，如果您有一个带有 Cassandra 的 3 节点集群，则您的节点应命名为 some_thing-other-things。每个节点都应该是名为 some_thing 的自动缩放组的一部分。每个节点还应使用名为 some_thing 的安全组。

创建一个 3 节点开发集群并使用您可以轻松重新创建的数据测试您的备份和恢复，您不必太在意这些数据。习惯于管理 Auto-scaling 组和 Priam。然后，在包含您关心的数据的测试集群上进行尝试。

# dynamic - 动态变化端点骆驼

> ID：15248776
> 
> 赞同：3
> 
> 时间：2013-03-06T13:34:17.593
> 
> 标签：dynamic, apache-camel, endpoint

是否可以以动态方式从端点更改？例如我想要改变

```
for(endpointFirst).routeId(ROUTEID).to(finishEndpoint); 
```

到

```
for(endpointSecond).routeId(ROUTEID).to(finishEndpoint); 
```

我尝试使用

```
camelContext.stopRoute(TestRoute.ROUTEID); 
```

将旧端点更改为新端点

```
camelContext.startRoute(TestRoute.ROUTEID); 
```

但我的努力无法正常工作。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T18:04:02.633

你需要

1.  停止路线
2.  删除路线
3.  改变端点
4.  添加路线
5.  开始路线

这允许您将 from 端点更改为您想要的任何东西（例如其他东西）

某些组件/端点确实允许更改选项并在运行时更新这些选项。例如，JMS 端点允许这样做，因此您可以

1.  停止路线
2.  更改 jms 端点上的选项
3.  开始路线

但是可能有一些组件不能做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:47:19.180

要更改`from`端点，您可以通过上下文 API 动态添加/删除路由，或者按照克劳斯的建议更改路由

要更改目标端点，请使用[收件人列表](http://camel.apache.org/recipient-list.html)EIP 和表达式根据消息头、变量、方法等动态确定端点...

```
from("direct:a")
     .recipientList(header("foo")); 
```

# android - 自动安装应用程序

> ID：15248781
> 
> 赞同：0
> 
> 时间：2013-03-06T13:34:28.460
> 
> 标签：android, installation, installation-package

一旦他按下下载链接，我想向某人发送 APK 的链接，apk 将自动下载并打开，就像在 Google Play 中发生的一样！

可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:38:05.560

欢迎您将 APK 文件的链接发送给某人。只要 Web 服务器使用正确的 MIME 类型 ( `application/vnd.android.package-archive`) 为该 APK 提供服务，当用户单击该链接时，它就应该下载该文件。然后用户通常需要做其他事情（例如，点击通知）来启动安装，尽管这可能因浏览器实现而异。

# c# - Asp.net MVC API 根据方法参数锁定一个函数

> ID：15248782
> 
> 赞同：2
> 
> 时间：2013-03-06T13:34:28.560
> 
> 标签：c#, asp.net-mvc, locking

我有一个帮助函数，它反序列化一个 XML 文件，并从中生成 c# 对象。

之后，对象被添加到服务器内存中。在服务器内存中添加内容的唯一方法就是通过这个函数。

```
public class DeserializeXmlHelper
{
    public void DeserializeXml(Guid xml_Id, decimal version)
    {
        // heavy process here which takes about 3 seconds
    }
} 
```

不同的客户端正在使用 API 方法（在 Asp.net MVC API 中制作）调用此函数。

调用 API 时，如果其他人已经用相同的参数调用了相同的函数，我可以阻止函数的执行吗？

像这样的东西，但我不知道这是否是一个好方法。

```
public class DeserializeXmlHelper
{
    private static readonly ConcurrentDictionary<string, object> _processes = new ConcurrentDictionary<string, object>();

    public void DeserializeXml(Guid xml_Id, decimal version)
    {
        string processKey = string.Format("{0}_v{1}", xml_Id, version.ToString("#0.0"));
        object processLocker = null;
        if (_processes.TryGetValue(processKey, out processLocker) == false)
        {
            processLocker = new object();
            _processes.TryAdd(processKey, processLocker);
        }

        lock (processLocker)
        {
            // heavy process here which takes about 3 seconds

            _processes.TryRemove(processKey);
        }
    }
} 
```

**已编辑 - 新版本**

蒂姆罗杰的回答是成功的。

但是，如果我只想在初始调用完成后返回，我可以这样做吗？（我用的是ConcurrentDictionary，因为我不知道怎么加锁，但是思路应该是一样的）

```
public class DeserializeXmlHelper
{
    private static readonly ConcurrentDictionary<string, string> _processes = new ConcurrentDictionary<string, string>();
    public void DeserializeXml(Guid xml_Id, decimal version)
    {
        string _processKey = string.Format("{0}_v{1}", xml_Id, version.ToString("#0.0"));
        string _processValue = null;
        if (_processes.TryGetValue(_processKey, out _processValue) == true)
        {
            // function already called with the same parameters
            do
            {
                System.Threading.Thread.Sleep(100);
            }
            while(_processes.TryGetValue(_processKey, out _processValue) == true)

            return;
        }

        try
        {
            _processes.TryAdd(_processKey, _processValue);

            var begin = "begin process";

            System.Threading.Thread.Sleep(10000);

            var end = "ending process";
        }
        finally
        {
            _processes.TryRemove(_processKey, out _processValue);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:47:45.177

您最初的解决方案并不遥远，但无论当前状态如何，您似乎总是在运行该进程。

即使您使用了并发字典，您也需要一个锁来在更新其状态时锁定整个字典，因为线程可能会在`TryGetValue`和之间中断`Add`。

```
private static readonly ConcurrentDictionary<string, object> _processes = new ConcurrentDictionary<string, object>();
private static readonly object _dictionaryLock = new object();

public void DeserializeXml(Guid xml_Id, decimal version)
{
    string processKey = string.Format("{0}_v{1}", xml_Id, version.ToString("#0.0"));
    object processLocker = null;
    bool needsExecuting = false;

    lock (_dictionaryLock)
    {
      if (_processes.TryGetValue(processKey, out processLocker) == false)
      {
          needsExecuting = true;
          processLocker = new object();
          _processes.Add(processKey, processLocker);
      }
    }

    lock (processLocker)
    {
        if (needsExecuting)
        {
          // heavy process here which takes about 3 seconds

          _processes.Remove(processKey);
        }
    }
} 
```

# java - Google Analytics 中的自定义维度/指标

> ID：15248784
> 
> 赞同：2
> 
> 时间：2013-03-06T13:34:31.587
> 
> 标签：java, android, google-analytics, custom-controls, google-analytics-api

我在 3 天前设置了以下代码。我想设置一个自定义变量以在`Google Analytics`. 3 天后，我仍然看不到变量`percentage`或`score`在我的 GA 帐户中（除非我只是不知道在哪里查看，但我认为我已经查看了每个可用区域）。

我在 GA 中看到了我所有的页面浏览量，但没有看到这些自定义变量。

这是还是不是在 GA 中设置自定义变量的方法？

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.results);

    EasyTracker.getInstance().activityStart(this);
    final Tracker tracker = EasyTracker.getTracker();       

    cAnswers = getIntent().getIntExtra("correctAnswers", -1);
    wAnswers = getIntent().getIntExtra("wrongAnswers", -1);
    score = getIntent().getLongExtra("score", -1);
    category = getIntent().getStringExtra("category");
    qs = getIntent().getParcelableArrayListExtra("queries");

    percentage = 10 * cAnswers;

    tracker.setCustomMetric(1, (long)percentage);
    tracker.setCustomMetric(2, score);
    tracker.sendView(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:38:31.607

您的代码与创建自定义指标[的文档相匹配。](https://developers.google.com/analytics/devguides/collection/android/v2/customdimsmets#custom-metrics)您是否手动检查`(long)percentage`并`score`返回适当的类型？

**编辑**
如果您的代码运行良好（看起来应该如此），自定义指标将通过 API、自定义报告和高级细分（[此处的文档](https://developers.google.com/analytics/devguides/platform/features/customdimsmets#reporting)）可用，但它们不会自动显示在任何默认报告中.

听起来您有兴趣通过 Web 界面查看指标，因此这里有一些关于[创建自定义报告](http://www.google.com/analytics/features/custom-reports.html)的信息。

# proxy - X-Forwarded-For头和Via头的区别

> ID：15248785
> 
> 赞同：7
> 
> 时间：2013-03-06T13:34:36.787
> 
> 标签：proxy, http-headers, http-via-header

我正在开发一个代理，并且一直在通过查看[W3 Guidelines](http://www.w3.org/TR/ct-guidelines/)来调查标头。我的代理将传入的 REMOTE-ADDR 添加到 X-FORWARDED-FOR 标头，但我不确定这与 Via 标头相比如何。我看过维基百科页面和这个列表

```
Via: 1.0 fred, 1.1 example.com (Apache/1.1) 
```

但我还没有找到任何关于如何建立它的说明。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T16:04:28.573

它们都是指示内容已通过代理的标头，并且可以包含两个标头。

标`Via`头用于协议版本（因此您知道连接是否已在任何时候降级）、代理的主机名和代理的可选产品/版本（如`User-Agent`代理）。它仅用于信息/调试或识别和解决有缺陷的代理（例如，如果您想使用请求流水线，您将观看该空间）。

`XFF`用于将客户端的原始IP转发到服务器。如果服务器信任代理（或代理链），它可以使用它而不是连接的 IP。

# oracle - 如何在 oracle 中运行带有一些日期操作 sql 的过程

> ID：15248787
> 
> 赞同：0
> 
> 时间：2013-03-06T13:34:39.327
> 
> 标签：oracle, date, stored-procedures, date-conversion

我在 oracle 中创建了一个过程，如下所示：

```
create or replace PROCEDURE SP_X_AVERAGE
(
    profile out SYS_REFCURSOR,
    rx out SYS_REFCURSOR,
)
as
BEGIN

  open profile for
        select
            avg(to_number(profile_netassets)) AS netassets
        from 
            fgp;

  open rx for
      select 
          avg(to_number(a_price)) as twr 
      from 
          r_x
      where 
            gq_date <= add_months(to_date(sysdate, 'mm/dd/yyyy'), -12);

END SP_X_AVERAGE; 
```

它没有运行，出现以下错误：

```
ORA-01843: not a valid month 
```

如果我删除第二个 sql 中的 where 条件，那么它会成功运行。

在同一过程中使用 sql 更改会话也不起作用。

请帮忙。

我在 sql-developer (ubuntu Oneiric 11) 中运行这个程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:40:02.203

SYSDATE 已经是一个 DATE，因此您不需要对其应用 TO_DATE()。但是，较新的 Oracle 版本可以容忍此类事情并优雅地处理它们。

所以剩下的问题是`r_x.gq_date`：那是什么数据类型？如果它是一个字符串，那么您可能有其中的值不会转换为日期，或者最终与您的默认 NLS_FORMAT 不匹配。

* * *

“我们必须将其保留为“VARCHAR2（40 BYTE）”，其中包含这样的日期：'1/2/2003'”

答对了。这和你的 NLS_DATE_FORMAT 一样吗？如果不是，您将需要转换列：

```
to_date(gq_date, 'mm/dd/yyyy')  <= add_months(sysdate, -12); 
```

如果列包含不是该格式的字符串，这可能无法解决您的问题。这是使用字符串来保存不是字符串的东西的常见副作用。

# java - 如何使用 SingleColumnValueFilter 通过 ColumnPrefixFilter 扫描并获取所有列？

> ID：15248793
> 
> 赞同：2
> 
> 时间：2013-03-06T13:34:44.473
> 
> 标签：java, hbase, database-scan

我们有 hbase 表，我需要扫描它。我必须找到一个特定列具有精确值并且存在具有精确前缀的另一列的所有行。就像是：

```
SingleColumnValueFilter filterA =
                new SingleColumnValueFilter(COLUMN_FAMILY, COLUMN_1, CompareFilter.CompareOp.EQUAL, Bytes.toBytes(2L));
Filter filterB = new ColumnPrefixFilter(COLUMN_2_PREFIX);

FilterList filterList = new FilterList(FilterList.Operator.MUST_PASS_ALL);
filterList.addFilter(filterA);
filterList.addFilter(filterB);
Scan scan = new Scan();
scan.setFilter(filterList); 
```

单独的过滤器工作完美。`filterA`返回`COLUMN_1`具有值的行`2L`。`filterB`返回`COLUMN_2`存在的行。但是他们在一起什么都没有。那么我可以将这些过滤器组合在一起吗？还是我做错了什么？

具有相同条件的第二个问题：我可以使用`ColumnPrefixFilter`并获取所有列。我的意思是找到`COLUMN_2`存在的行并获取所有其他列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T06:25:45.493

我发现部分决定。我可以使用`QualifierFilter`而不是`ColumnPrefixFilter`. 它有效：

```
Filter filterB = new QualifierFilter(CompareFilter.CompareOp.EQUAL, new BinaryPrefixComparator(COLUMN_2_PREFIX)); 
```

我得到一列的行`COLUMN_2`。但我仍然强烈需要获取所有列，而不仅仅是我过滤的一个。

# ios - 如何从 Titanium 移动项目资源文件夹下的 iOS Titanium 模块访问 pdf 文件？

> ID：15248798
> 
> 赞同：2
> 
> 时间：2013-03-06T13:34:55.440
> 
> 标签：ios, path, titanium

我正在创建一个钛移动应用程序，其中包含用于**PDF**编辑的 iOS 模块。我在钛项目（**Titanium Studio**）资源目录中有一个 pdf 文件。如何从 iOS 模块访问**PDF文件？**

我得到了文件路径`Titanium.Filesystem.getResourcesDirectory()+'filename.pdf';`

并将路径传递给 iOS 模块作为方法参数。

如何在 iOS 模块中获取文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:28:37.733

你可以使用 TiUtils 的方法“toUrl:proxy:”。文档中的示例如下，但它也适用于您从 JS 领域获取的 arg（只需将“路径”字符串替换为您自己的）：

```
NSString *path = [NSString stringWithFormat:@"modules/%@/foo.png",[self moduleId]];
NSURL *url = [TiUtils toURL:path proxy:self];
UIImage *image = [TiUtils image:url proxy:self]; 
```

*   [http://docs.appcelerator.com/titanium/3.0/#!/guide/iOS_Module_Development_Guide-section-29004946_iOSModuleDevelopmentGuide-ReturningFiles](http://docs.appcelerator.com/titanium/3.0/#!/guide/iOS_Module_Development_Guide-section-29004946_iOSModuleDevelopmentGuide-ReturningFiles)

“self”可以是您的模块，因为 TiModules 本身就是代理（换句话说，将其保留为 self 可能对您来说很好）。

想要一个更完整的例子吗？看看我前段时间写的 AirPrint 模块。"print:(id)args" 方法接受一个 { url: "whatever.pdf" }，将其转换为一个 URL，并在 UI 线程上用它做一些有趣的事情。

```
- (void)print:(id)args
{
    ENSURE_UI_THREAD(print,args);
    ENSURE_SINGLE_ARG(args,NSDictionary);

    NSURL* url = [TiUtils toURL:[args objectForKey:@"url"] proxy:self];
    if (url==nil) {
        NSLog(@"[ERROR] Print called without passing in a url property!");
        return;
    } 
```

*   [https://github.com/appcelerator/titanium_modules/blob/master/airprint/mobile/ios/Classes/TiAirprintModule.m](https://github.com/appcelerator/titanium_modules/blob/master/airprint/mobile/ios/Classes/TiAirprintModule.m)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:01:42.587

如果它在 Resources 目录中，那么只需将名称传递给模块，因为这意味着 PDF 位于主应用程序资产包中，请使用以下代码获取它的路径：

```
// The application assets can be accessed by building a path from the mainBundle of the application.
NSString *filePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"filename.pdf"]; 
```

[这是 Titanium 的 iOS 的 moddevguide 中对此的参考。](https://github.com/appcelerator/titanium_modules/blob/master/moddevguide/mobile/ios/Classes/TiModdevguideModule.m)

作为附录如果您发现自己试图将完整路径传递给 iOS 中的模块，则需要通过执行以下操作来[解析本机路径](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Filesystem.File-method-resolve)：

```
var file = Titanium.Filesystem.getResourcesDirectory()+'filename.pdf';
var actualPathToPassToModule = file.resolve(); 
```

# java - 产生线程后主线程停止？

> ID：15248799
> 
> 赞同：1
> 
> 时间：2013-03-06T13:34:55.510
> 
> 标签：java, multithreading

```
public void contextInitialized(final ServletContextEvent event) {   
    try {
        System.out.println("start thread");
        Thread thread = new Thread(new SerialReader(event, serialPort,mode));
        thread.start();
    } catch (Exception e1) {
        e1.printStackTrace();
    }

    System.out.println("thread engaged");
} 
```

即使很难运行此代码也不会出错；“线程接合”从不打印。什么会阻止主线程继续运行？

我已经通过将其替换为

```
 Thread thread = new Thread(new Runnable(){
                public void run(){
                    try {
                        Thread.sleep(1000);
                        System.out.println("OUTPUT");
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                };  

            }); 
```

完美无缺。

编辑：构造函数中唯一发生的事情是

```
private BlockingQueue<String> queue = new LinkedBlockingQueue<String>();
public SerialReader(ServletContextEvent event, String port, int mode) throws Exception {
   if (mode==1){
   System.out.println("**Mode 1**");
   } else {//mode is 1
   }
   event.getServletContext().setAttribute("serialPortData", queue);
} 
```

edit2：（servlet 上下文监听器）

```
 private static final String SHUTDOWN_REQ = "SHUTDOWN";
    public void attributeAdded(ServletContextAttributeEvent event) {

        queue = (BlockingQueue<String>) event.getServletContext().getAttribute("serialPortData");

        //we always get a null here on first try that's why I added null check
        if (queue == null){
            System.out.println("Queue is empty");
        } else {
            String item;
            try {
                //blocks while queue is empty
                while ((item = queue.take()) != SHUTDOWN_REQ) {
                    System.out.println("*******WEB*******"+item+"*******");
                    //TODO Broadcast message to connected clients
                }
            } catch (InterruptedException e) {
                System.out.println("queue error");
                //e.printStackTrace();
            }
        }       
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:14:36.497

您正在阻止自己的代码。这个表达式：

```
new SerialReader(event, serialPort,mode); 
```

请求`SerialReader`创建一个新的，但在构造函数中你这样做：

```
private BlockingQueue<String> queue = new LinkedBlockingQueue<String>();
event.getServletContext().setAttribute("serialPortData", queue); 
```

`event`一个在哪里`ServletContextEvent`。调用`setAttribute`它会触发对 servlet 上下文中所有属性侦听器的通知。您使用以下代码配置了这样的侦听器：

```
else {
    try {
        //blocks while queue is empty
        while ((item = queue.take()) != SHUTDOWN_REQ) 
```

***但是当执行此代码时，您的队列不为空，因此您在调用线程***上不断轮询队列以从中获取项目。这就是为什么您的构造函数永远不会返回的原因。

我不能 100% 确定您要通过侦听器完成什么，但您可能希望在其中生成消息发送线程*，*而不是像现在这样在外部生成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:03:27.227

这是什么：

```
(item = queue.take()) != SHUTDOWN_REQ 
```

为什么不

```
!(item = queue.take()).equals(SHUTDOWN_REQ) 
```

或者您可以进行流动，并继续使用 != / == 比较字符串：

```
private static final String SHUTDOWN_REQ = "SHUTDOWN".intern(); 
```

但这是一个肮脏的黑客

# html - 背景图像的加载速度是否比 HTML 中的嵌入图像更快？屏幕阅读器如何读取它们？

> ID：15248801
> 
> 赞同：2
> 
> 时间：2013-03-06T13:35:02.873
> 
> 标签：html, accessibility, screen-readers

如果背景图像和嵌入图像大小相同，它们在 HTML 页面上的加载时间是否相同？如果我要在一个页面中使用相同的图像两次——一次作为背景，一次作为普通嵌入图像，哪个加载速度更快？

为了使网站与屏幕阅读器兼容，包含图像的最佳方式是什么？屏幕阅读器是否可以很好地阅读背景图像，或者他们只是忽略了背景图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:50:54.790

> 如果背景图像和嵌入图像大小相同，它们在 HTML 页面上的加载时间是否相同？

我会说是的，但我认为这也取决于它们的加载方式。以前有一种做法叫图片预加载。我从来没有亲自做过速度测试来知道它是否真的有益。

> 为了使网站与屏幕阅读器兼容，包含图像的最佳方式是什么？屏幕阅读器是否可以很好地阅读背景图像，或者他们只是忽略了背景图像？

屏幕阅读器不会宣布`<body>`,`<div>`等附加了背景图像。`alt`在这种情况下，属性没有神奇的地方。您需要记住，您要在图像和文本颜色之间保持良好的对比。在我看来，WebAIM 有一个很棒的[颜色对比检查器。](http://webaim.org/resources/contrastchecker/)

如果您使用 CSS 将文本放置在用作背景的图像上，那么您可以给它一个`alt`，不要。`<img src="..." alt=""/>`无论如何，该图像可能应该有一个空 alt ( )。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:49:52.180

如果您将图像同时用作背景和图像（即两次使用相同的图像），您在技术上只需要加载该图像一次，假设您的图像已正确缓存......即一旦您加载了带有缓存标题的图像，或者该图像正在下载，浏览器将从缓存中加载它或等待该图像完成加载。

至于背景图像和嵌入图像是否需要大约相同的时间来加载。让我们了解一些上下文。根据谷歌：[https ://developers.google.com/speed/articles/browser-paint-events](https://developers.google.com/speed/articles/browser-paint-events)

> 最后，请注意每张图像本身是渐进式渲染的，因此用户在整个图像完成加载之前就开始看到图像内容。现代浏览器逐渐在 HTML 标签中呈现图像。相比之下，许多浏览器不会逐步渲染使用 CSS background-image 属性指定的图像。要启用图像的渐进式呈现，请使用 HTML 标记而不是 CSS background-image 属性。

因此，使用 <img> 标记的图像将加载更快，并且不会阻止 DOM 准备就绪，这与旧浏览器中的内联 css 背景图像可能会减慢速度不同。

但是，渐进式渲染 <img> 的注意事项是，如果在 widow.onload 事件触发时图像没有完全加载（对于大图像几乎总是如此），它会导致相当难看的渐进式渲染，因为当使用自动宽度和/或 100% 宽度将图像设置为响应式时，还会导致油漆回流。

为了使内联图像加载得更快、更好，我所做的是：

首先，在页面 <head> 的 AND 中极早地将它们作为 CSS 背景预加载。在解析 css 文件或正文之前，您也可以通过这种方式开始预加载部分或全部 css 图像。

其次，为了克服其他缺点，我使用 javascript lazy-load-ish 方法在窗口加载之前隐藏交互式事件上的图像。

最后，在调用 css 的图像完成加载后，将图像作为淡入显示。

您可以在以下位置看到一个实时示例：[http ://www.nptr.net/1614](http://www.nptr.net/1614)

因此，虽然嵌入图像是最好的。如果您关心页面加载的最佳速度，我强烈建议您尽早通过头部的 css 背景预加载大图像，特别是如果您必须立即将它们用作背景。

那是因为否则，你身体中的图像将不得不等到你的 css 文件和同步 javascript(s) 都被完全接收到，直到浏览器真正开始检索它们。这通常会导致 100 到 500 毫秒的延迟，最差的延迟是在第一页加载时。

# html - 如何创建固定大小的 twitter bootstrap 文本区域

> ID：15248804
> 
> 赞同：30
> 
> 时间：2013-03-06T13:35:11.383
> 
> 标签：html, css, twitter-bootstrap, textarea

我想创建一个无法拖动以更改大小的固定大小的文本区域。如何在`Twitter Bootstrap`. 它的大小如何固定？固定大小是指固定数量的列和行。

我浏览了[文档](http://twitter.github.com/bootstrap/base-css.html)，但没有得到任何线索。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-06T13:38:22.127

Add this to your CSS:

```
textarea { resize:none; } 
```

or this for fixed width (and keep vertical resizing):

```
textarea { resize:vertical; } 
```

Note that this is [not supported by opera and internet explorer](https://developer.mozilla.org/en-US/docs/Web/CSS/resize#Browser_compatibility).

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-06T13:41:24.167

您还可以设置 css 样式的宽度和最小宽度，例如高度和最小高度以及最大宽度和最大高度。只是另一个建议。

```
textarea{ 
  width: 200px; 
  min-width:200px; 
  max-width:200px; 

  height:200px; 
  min-height:200px;  
  max-height:200px;
} 
```

# java - 比较列表，直到在 java 中找到匹配项

> ID：15248806
> 
> 赞同：-5
> 
> 时间：2013-03-06T13:35:13.607
> 
> 标签：java, list, compare

我有 4 个列表

```
 A         B       C        D       E

 list1: 10         22      45       76      12  

 list2: 13         22      45       73      23  

 list3: 10         21      35       73      53 
```

我必须将这三个列表相互比较，直到任何两个列表的 B 和 C 列具有相同的值。

```
for(int i=0;i<6;i++){
Collection<String> listOne = Arrays.asList(A, B , C,  D  ,E);
Collection<String> listTwo = Arrays.asList(A, B , C,  D  ,E);
Collection<String> similar = new HashSet<String>( listOne );
similar.retainAll( listTwo );
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:43:40.830

你可以使用这个：

```
 list1.contains(list2); 
```

但是组合会增加:(

# c - atoi 为 alpha 十进制字符串给出错误的结果

> ID：15248811
> 
> 赞同：0
> 
> 时间：2013-03-06T13:35:26.477
> 
> 标签：c

我试图在以下字符串上调用 atoi()：“54”和“54df4”。虽然第一个输入给了我 54 的正确结果，但对第二个字符串的调用也给了我 54 的结果。我假设该函数正在尽可能地将字符串转换为十进制；相反，它根本不应该转换。为什么会这样？以下是我的代码：

```
cout << "Wrong: " << atoi("54df4") << endl; 
```

谢谢，拉克什。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:41:53.920

这`atoi`就是指定的工作方式。如果您不想转换包含非数字字符的字符串，则必须预先扫描字符串，或使用[`strtol`](http://en.cppreference.com/w/c/string/byte/strtol)可以返回第一个非数字字符位置的函数：

```
cons char *number = "54df4";
char *endp = NULL;

int value = strtol(number, &endp, 10);

if (endp != NULL && endp < (number + strlen(number)))
{
    printf("Stopped scanning in middle of string, it contains non-digit characters\n");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:38:40.227

来自[atoi 的文档](http://www.cplusplus.com/reference/cstdlib/atoi/)

> 字符串可以在构成整数的字符之后包含其他字符，这些字符将被忽略并且不会影响此函数的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T13:37:56.087

因为这`atoi`就是定义的方式。以[这个](http://linux.die.net/man/3/atoi)手册页为例：

> 该`atoi()`函数将指向的字符串的初始部分转换`nptr`为`int`。

或在 C 标准中：

> ### C11 (n1570), § 7.22.1.2 `atoi`、`atol`和`atoll`函数
> 
> 、和函数分别将 nptr 指向的字符串的初始部分转换为、`atoi`和表示。`atol``atoll``int``long int``long long int`

*   如果您想对要转换的字符串执行更复杂的操作，`strtol`请改用（例如，请参阅[此答案](https://stackoverflow.com/a/15229434/1126268)）。
*   如果您不同意这些规范，请编写您自己的函数！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T13:38:57.443

从以下有点武断地找到atoi的手册页......

[http://linux.die.net/man/3/atoi](http://linux.die.net/man/3/atoi)

* *atoi() 函数将 nptr 指向的字符串的初始部分转换为 int。**

简而言之，该功能完全按照它的定义工作。

# date - Highstock 起始/终止日期无效问题

> ID：15248814
> 
> 赞同：4
> 
> 时间：2013-03-06T13:35:35.750
> 
> 标签：date, highstock

我在尝试生成具有“价格”轴和“量”轴的图表时遇到问题，类似于Highstock 网站上[给出的示例。](http://www.highcharts.com/stock/demo/candlestick-and-volume)它可以很好地显示成交量轴，但不能显示价格。

在尝试确定问题的原因时，我禁用了音量，并且在这样做时，右上角的“From”和“To”矩形都表示“Invalid Date”，但它们的格式相同，以毫秒为单位的纪元，作为音量。

所以这是我的设置：

```
chart = new Highcharts.StockChart({
    chart: {
        renderTo: 'container',
        alignTicks: false
    },

    rangeSelector: {
        selected: 1
    },

    title: {
        text: 'Price Graph'
    },

    yAxis: [{
        title: {
            text: 'Prices'
        },
        height: 200,
        lineWidth: 2
    }],

    series: [
            seriesOptions
        ]
}); 
```

这是 seriesOptions 的“数据”：

```
[[1362434092000, 20.3],
[1362434093000, 13.1],
[1362434199000, 7.01],
[1362434200000, 9.4],
[1362434796000, 7.23],
[1362434797000, 22.4],
[1362434798000, 13.1],
[1362434835000, 9.9],
[1362435142000, 9.2],
[1362435399000, 6.4],
[1362435400000, 13.5],
[1362435401000, 24.8],
[1362435453000, 6.4]] 
```

**更新**

不确定这是否有帮助，但在第 292 行找到，它看起来在这里失败了：

```
this[a+"Input"].value=xa(c.inputEditDateFormat||"%Y-%m-%d",this[a+"Input"].HCTime); 
```

这里的 HCTime 是未定义的，所以在第 20 行，这里定义了这个函数：

```
xa=function(a,b,c){if(!s(b)||isNaN(b))return"Invalid date"; 
```

希望这可以帮助...

**更新 2**

使用变量中的信息`seriesOptions`，我尝试将事物归结为基础，并将系列更新为以下内容：

```
series : [{
lineWidth : 2,
marker : {
     enabled : true,
     radius : 2
},
shadow : true,
tooltip : {
     valueDecimals : 2
 },
type: 'line',
name : 'Test',
pointInterval : 15 * 1000,
data : [
        [[1362434092000, 20.3],
        [1362434093000, 13.1],
        [1362434199000, 7.01],
        [1362434200000, 9.4],
        [1362434796000, 7.23],
        [1362434797000, 22.4],
        [1362434798000, 13.1],
        [1362434835000, 9.9],
        [1362435142000, 9.2],
        [1362435399000, 6.4],
        [1362435400000, 13.5],
        [1362435401000, 24.8],
        [1362435453000, 6.4]
        ]]
 }] 
```

这有一点不同的结果，我希望可以帮助某人知道问题到底是什么——它也会产生一个空的图形空间，但是“From”和“To”都说“1970 年 1 月 1 日”。[当Epoch Converter 网站](http://www.epochconverter.com/)显示 2013 年 3 月 5 日星期二上午 8:54:52 的正确翻译时，对“无效日期”的改进对我来说仍然没有意义。 - 这是什么意思呢？

**更新 3**

这个问题已经提出了一段时间，我得到了一个肇事逃逸的-1分，我不知道为什么我应该得到这个分数。因此，为了帮助解释更多，我制作了以下两个屏幕截图：

*   [图形图像](http://www.logisofttech.com.au/test/Graph.png)
*   [带有值的 JS 断点](http://www.logisofttech.com.au/test/Values.png)

我希望这会有所帮助......这让我发疯了，我所做的研究表明只是为了确保纪元时间戳以毫秒为单位。

将非常非常感谢对这个谜语的帮助 - 我几乎完成了项目的这个阶段，而且已经很长时间了。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:40:35.063

问题解决了。

主要问题是`chart = new Highcharts.StockChart({`在脚本中被调用了两次，在每次尝试之前，都会`container`删除 的内容。在第一次迭代中，它有数据可以使用，第二次，它没有。因此，数据上的 NaN。

第二个问题，`seriesOptions`它本身就是一个数组，所以我愚蠢地制作了`series:`一个数组数组。

我确实有一个不寻常的问题是滑块与音量轴重叠，但我会弄清楚的。

# r - rgdal包安装

> ID：15248815
> 
> 赞同：113
> 
> 时间：2013-03-06T13:35:46.813
> 
> 标签：r, maps

这里的问题不完全是如何通过 R 绘制地图，因为我已经在[这里](http://rpsychologist.com/parsing-data-from-a-text-file-and-plotting-where-people-live-using-ggplot2-and-openstreetmaps/)找到了一个非常好的示例，而是如何使其工作。事实上，我无法加载库`rgdal`：

```
library(rgdal)
Error in library(rgdal) : there is no package called ‘rgdal’ 
```

但是，当我尝试手动安装上述软件包时，出现以下错误：

```
....
configure: error: proj_api.h not found in standard or given locations.
ERROR: configuration failed for package ‘rgdal’
* removing ‘/home/eualin/R/i686-pc-linux-gnu-library/2.15/rgdal’
Warning in install.packages : installation of package ‘/home/eualin/Downloads/rgdal_0.8-5.tar.gz’ had non-zero exit status 
```

欢迎任何输入！

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-03-06T13:42:54.960

如果您查看[CRAN 上的包页面](http://cran.r-project.org/web/packages/rgdal/index.html)，您将看到以下内容：

> SystemRequirements：用于从源构建：来自[http://trac.osgeo.org/gdal/wiki/DownloadSource的 GDAL >= 1.7.1 库和来自](http://trac.osgeo.org/gdal/wiki/DownloadSource)[http://trac.osgeo](http://trac.osgeo.org/proj/)的 PROJ.4 (proj >= 4.4.9) [.org/proj/](http://trac.osgeo.org/proj/)；由 William Kyngesburye 在[http://www.kyngchaos.com/](http://www.kyngchaos.com/)构建的 GDAL OSX 框架可用于 OSX 上的源代码安装。

由于您似乎在 Linux 下，您总是从源代码构建包，因此您必须在系统上安装相应的库。如果您使用 Mint、Ubuntu 或其他 Debian 衍生产品，您可以：

```
$ sudo apt-get install libgdal1-dev libproj-dev 
```

仍然在基于 Debian 的系统下，一个有用的技巧是安装`apt-file`软件包并运行：

```
$ sudo apt-file update 
```

然后，当您收到以下错误时：

```
configure: error: proj_api.h not found in standard or given locations. 
```

您可以使用以下命令查找必须安装哪个软件包才能获取丢失的文件：

```
$ apt-file search proj_api.h
libproj-dev: /usr/include/proj_api.h 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-11-10T03:09:19.297

如果你使用 OS X 和[Homebrew 包管理器](http://brew.sh)，并且通过[homebrew-science tap](https://github.com/Homebrew/homebrew-science)安装了 R ，你可以通过首先安装 gdal 来安装 rgdal。

```
brew install gdal 
```

你可能首先想在运行它之前列出可用的选项，以防你想要像 postgresql 支持这样的*花哨的东西。*查看可用选项类型

```
brew options gdal 
```

然后看中你可以输入

```
brew install --with-postgresql gdal 
```

过了一会儿你应该很好地使用依赖项，因为**proj**包括你需要的**proj_api.h**是依赖项！不幸的是，rgdal 现在仍然找不到 pro_api.h，因为它没有在 /usr/local/include 中查找。要在安装 rgdal 时解决此问题和其他可能的问题，请使用以下***R***命令安装 rgdal：

```
 > install.packages('rgdal', type = "source", configure.args=c('--with-proj-include=/usr/local/include','--with-proj-lib=/usr/local/lib')) 
```

除了 brew 步骤之外，这应该类似于[MacPorts](https://www.macports.org)所需的内容，并且您的库/头文件很可能分别位于“/opt/local/lib”和“/opt/local/include”下。

***注意：***如果您使用“--with-armadillo”作为 gdal 的选项来酿造升级程序，并将犰狳从 6 升级到 7。在升级/重新安装 rgdal 之前，您必须重新编译 gdal。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-04-28T00:24:17.203

On a Fedora 21 system using R-3.2.0, the following worked:

```
yum install gdal.x86_64 gdal-devel.x86_64 gdal-libs.x86_64
yum install proj.x86_64 proj-devel.x86_64
yum install proj-epsg.x86_64 proj-nad.x86_64 
```

Obviously this was the result of repeated tries to get:

```
install.packages("rgdal") 
```

to work. You can probably do it all in one install.

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-08-17T21:44:21.387

在 ubuntustudio 14.04 上（所有 debian 发行版都一样）：

```
sudo apt-get install libproj-dev libgdal-dev 
```

然后我可以安装包 rgdal

```
R info:
R version 3.0.2 (2013-09-25) -- "Frisbee Sailing"

Linux info:
Linux francois-K53SV 3.13.0-34-lowlatency #60-Ubuntu SMP PREEMPT Wed Aug 13 16:15:18 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2016-06-01T13:47:27.683

这是我在 Centos7 上所做的：

```
yum install gdal gdal-devel
yum install proj-devel
yum install proj-nad
yum install proj-epsg 
```

然后简单

`install.packages("rgdal")`

工作得很好，但根本不清楚。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-08-20T02:55:47.533

[在 OSX 中，我从http://www.kyngchaos.com/software/frameworks](http://www.kyngchaos.com/software/frameworks)下载 proj，然后在 R 中运行以下命令。

```
install.packages('rgdal', type = "source", configure.args=c('--with-proj-include=/Library/Frameworks/PROJ.framework/Headers', '--with-proj-lib=/Library/Frameworks/PROJ.framework/unix/lib')) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-08-14T15:53:20.263

这对我有用：

```
install.packages('rgdal',repos="http://www.stats.ox.ac.uk/pub/RWin") 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-12-14T11:55:37.513

对于 ubuntu 16.04 和 R 3.5.1，这工作得非常快：

```
sudo add-apt-repository -y ppa:ubuntugis/ubuntugis-unstable
sudo apt update
sudo apt install gdal-bin python-gdal python3-gdal libgdal1-dev 
```

然后;

```
sudo apt-get install libudunits2-dev libgdal-dev libgeos-dev libproj-dev 
```

最后在 CRAN；

```
install.packages("rgdal") 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-01-26T10:18:54.427

对我来说（Ubuntu 16.04，R 3.4.2），上述解决方案的混合工作：

```
sudo apt-get install libudunits2-dev libgdal-dev libgeos-dev libproj-dev 
```

然后简单地`rgdal`从 CRAN 安装。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-01-05T17:43:49.193

在我的系统上唯一有效的方法是从源代码编译 PROJ4，如此处所述[，](http://grasswiki.osgeo.org/wiki/Compile_and_Install_Ubuntu#Using_pre-compiled_dev_Packages_for_PROJ.4.2C_GEOS_and_GDAL "编译 PROJ.4")然后将 rgdal 包安装为

```
 install.packages("rgdal") 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-04-04T17:16:10.370

要解决此问题，您需要`install libgdal-dev:`

$`sudo apt install libgdal-dev`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-08-23T04:28:22.940

对于安装了多个版本的 proj（来自源）的多用户环境中的人，我使用的方法是：

```
install.packages('rgdal',configure.args="--with-proj-include=/sw/proj/4.9.2/include --with-proj-lib=/sw/proj/4.9.2/lib") 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-09-25T19:09:48.177

对于 Mac（OS.X 版本 10.12.6）用户，这对我有用。首先，转到命令行并使用 >> 安装*gdal*`brew install gdal` 其次，到 Rstuduio(R 控制台) 并使用安装包`install.packages("rgdal")`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-06-03T20:18:46.487

以上答案都不适合我（在 Linux Mint 17.1 上运行 R 3.5.1）。Ubuntu 存储库中的 GDAL 版本是 1.11.3，这会导致 rGDAL 安装失败。这是对我有用的解决方案（来自[本](https://jgommels.com/2016/09/18/installing-gdal-and-rgdal-on-linux-to-read-kml-files/)网站）：

```
sudo apt-get install libexpat1-dev 
```

下载并安装GDAL

```
wget http://download.osgeo.org/gdal/2.1.1/gdal-2.1.1.tar.gz
tar xvf gdal-2.1.1.tar.gz
cd gdal-2.1.1
./configure
sudo make
sudo make install 
```

验证版本

```
gdal-config --version 
```

然后我得到了这个错误：

```
** testing if installed package can be loaded
Error in dyn.load(file, DLLpath = DLLpath, ...) :
unable to load shared object '/usr/local/lib/R/site-library/rgdal/libs/rgdal.so':
libgdal.so.20: cannot open shared object file: No such file or directory
Error: loading failed
Execution halted
ERROR: loading failed 
```

这是通过更新绑定修复的：

```
sudo ldconfig 
```

然后`install.packages("rgdal")`在 R 中运行效果很好。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-08-16T16:56:16.030

无法正确安装 rgdal，我已经尝试了这里提到的所有建议和所有建议 [R 即使在安装包后也找不到包](https://stackoverflow.com/questions/19407092/r-not-finding-package-even-after-package-installation)

```
library(rgdal)
rgdal: version: 1.4-3, (SVN revision 828)
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 2.2.3, released 2017/11/20
Path to GDAL shared files: C:/Users/xxx/Documents/R/win-library/3.4/rgdal/gdal
GDAL binary built with GEOS: TRUE 
Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
Path to PROJ.4 shared files: C:/Users/xxx/Documents/R/win-library/3.4/rgdal/proj
Linking to sp version: 1.3-1 
Warning message:
package ‘rgdal’ was built under R version 3.4.4 
```

我已将我的 R 升级到 3.6.1

再试一次：

```
batch_gdal_translate(x, desc, outsuffix = "4.img", of = "HFA", co="TILED=YES")
NULL
Warning messages:
1: In gdal_setInstallation() :
No GDAL installation found. Please install 'gdal' before continuing:
    - www.gdal.org (no HDF4 support!)
    - www.trac.osgeo.org/osgeo4w/ (with HDF4 support RECOMMENDED)
    - www.fwtools.maptools.org (with HDF4 support)

2: In gdal_setInstallation() : If you think GDAL is installed, please run:
gdal_setInstallation(ignore.full_scan=FALSE) 
```

我试图从 Rstudio 和命令行 R 3.6.1 GUI 运行它。

每次我都尝试过这个，我得到了正在安装的库的积极结果。

```
library(raster)
Loading required package: sp
library(rgdal)
rgdal: version: 1.4-4, (SVN revision 833)
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 2.2.3, released 2017/11/20
Path to GDAL shared files: C:/Users/xxx/Documents/R/R-3.6.1/library/rgdal/gdal
GDAL binary built with GEOS: TRUE 
Loaded PROJ.4 runtime: Rel. 4.9.3, 15 August 2016, [PJ_VERSION: 493]
Path to PROJ.4 shared files: C:/Users/xxx/Documents/R/R-3.6.1/library/rgdal/proj
Linking to sp version: 1.3-1 
library(gdalUtils)
Registered S3 method overwritten by 'R.oo':
method        from       
throw.default R.methodsS3 
```

我要读取的文件是 dted 文件？

```
x <- list.files(path = src, pattern = ".dt", full.names = TRUE)
length(x)

batch_gdal_translate(x, desc, outsuffix = "4.img", of = "HFA", co="TILED=YES") 
```

我也用 GTIFF .tif 格式尝试了上述方法，但我得到了同样的错误。但我不是要读取 .hdf 文件，只是 .dt0、.dt1、.dt2

这将在我安装了 R 的另一台机器上工作，但是，我试图找出我在“这台”机器上的安装有什么问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-12-29T22:34:04.010

如果您使用`MacPorts`它应该可以工作：

1.  安装`gdal`（`proj6`将作为依赖安装）

    ```
    sudo port install gdal 
    ```

2.  安装`pkg-config`

    ```
    sudo port install pkgconfig 
    ```

3.  将`PKG_CONIFG_PATH`变量设置为指向带有`proj.pc`文件的目录。就我而言，这是：

    ```
    export PKG_CONFIG_PATH=/opt/local/lib/proj6/lib/pkgconfig 
    ```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-10-30T16:32:20.740

在 CFLAGS 中显式添加包含路径对我有用

```
install.packages('rgdal', type = "source", configure.args=c('CFLAGS=-I/apps/proj4/5.2.0/include')) 
```

# javascript - 无法使用 jquery clone 克隆地图的图像图块

> ID：15248826
> 
> 赞同：9
> 
> 时间：2013-03-06T13:36:28.113
> 
> 标签：javascript, jquery, css

处理开放街道地图和[折纸 CSS 动画](https://developer.cdn.mozilla.net/media/uploads/demos/m/r/mrflix/ce26be858cecaf2b60021f86401337a3/paperfold-css_1333213378_demo_package/index.html)。

我已经在

```
<section class="comment" style="height:250px;">
     <p> <div id="demoMap" style="height:250px;"></div></p>
</section> 
```

但它无法显示完整的地图。我不知道确切的原因，但我猜想在无法克隆地图图块的 js 库中。

```
createFold: function(j, topHeight, bottomHeight) {
    var offsetTop = -j * topHeight;
    var offsetBottom = -this.height + j * topHeight + this.foldHeight;

    return $('<div>') 
        .addClass('fold')
        .append(
            $('<div>')
                .addClass('top')
                .css('height', topHeight)
                .append(
                    $('<div>')
                        .addClass('inner')
                        .css('top', offsetTop)
                        .append(this.content.clone())
                )
                .add($('<div>')
                .addClass('bottom')
                .css('height', bottomHeight)
                .append(
                    $('<div>')
                        .addClass('inner')
                        .css('bottom', offsetBottom)
                        .append(this.content.clone())
                )
            )
        );
    }, 
```

那么有没有办法克隆地图的瓷砖或者我错了。如果是这样，我怎么能做到这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-06T12:13:43.827

只要您可以访问 tile 元素，您就可以克隆它们，但是（假设界面现在相同）它们似乎是绝对放置`img`在 OpenStreetMap 中的标签 - `div`s 已折叠，因此您需要`img`自己克隆元素（并使用不同的定位，假设它与库一起使用），或创建一个`div`，从图像中拉出 url 并将其应用为你的背景`div`。由于瓷砖是按逻辑编号的，如果你知道你想要的区域，你可以跳过这一步，也许是这样的：

```
var startX = 7,
    endX = 8,
    startY = 3,
    endY = 10,
    scale = 5,
    $parent = $('<div class="map"></div>');

for (var y = startY; y <= endY; y++) {
    var $row = $('<div class="tile-row"></div>');
    for (var x = startX; x <= endX; x++) {
        $row.append(
            $('<img />')
            .attr('src', 'http://path.to.images/'+scale+'/'+x+'/'+y'.png');
        );
        // or:
        // $('<div></div>')
        // .css('background-image', 'http://path.to.images/'+scale+'/'+x+'/'+y'.png');

    };
    $parent.append($fold);
}; 
```

OpenStreetMap 本身的原生格式可能不适合这个特定的库（尤其是其绝对定位的图像），所以我认为你需要用更多的`position: static`结构来模仿它的布局，避免绝对位置并将其拆分为包含可以折叠的行。

# javascript - 为什么我不能在 JS 中解析没有引号的 JSON？

> ID：15248827
> 
> 赞同：1
> 
> 时间：2013-03-06T13:36:31.677
> 
> 标签：javascript, json

为什么我无法解析 JSON 对象？我需要将它用引号括起来以便解析工作。

```
// JSON object
var foo = {"sayHi": {"nl":"hoi", "en":"hello"}};
alert(foo.sayHi.en);

// string       
var foo = '{"sayHi": {"nl":"hoi", "en":"hello"}}';      
alert(JSON.parse(foo).sayHi.nl); 
```

编辑：

```
// does not work
var foo = {"sayHi": {"nl":"hoi", "en":"hello"}};
alert(JSON.parse(foo).sayHi.nl); 
```

是的，两者都有效，但第一个 foo 不适用于 with 解析。而且我更喜欢第一个 foo，因为我不需要担心换行符、引号和加号。

编辑2：

我真的在寻找一种将 JSON 存储在变量中的好方法，而不是使用 ajax 调用来获取它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:39:08.270

因为这`{"sayHi": {"nl":"hoi", "en":"hello"}}`已经是 js 对象了

这`'{"sayHi": {"nl":"hoi", "en":"hello"}}'`只是一个字符串，包含任何内容，可能是 json

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:40:15.240

取决于“解析 JSON 对象”的含义（顺便说一句，这不是一件事；`JSON`是一个符号）。如果你想把它解析成一个对象，那么恭喜你，你完成了！ `JSON.parse`使用 JSON（表示法）获取字符串并将其转换为 JavaScript 中的对象（但许多其他语言也可以解析 JSON 并将其转换为相应的数据结构）。

不过，您的两个代码片段都按预期工作。

# r - 使用交叉验证计算岭回归参数

> ID：15248834
> 
> 赞同：0
> 
> 时间：2013-03-06T13:36:44.743
> 
> 标签：r

我在数据框中有 57 个特征（列）~4600 行数据集。为了计算一个好的岭回归参数，我想对其进行 10 倍交叉验证。有人可以告诉我如何在 R 中做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T14:04:34.463

[`ridge.cv()`](http://www.inside-r.org/packages/cran/parcor/docs/ridge.cv)包装中`parcor`的目的只是为了达到目的。

这是从手册中摘录的示例：

```
> n<-100 # number of observations
> p<-60 # number of variables
> X<-matrix(rnorm(n*p),ncol=p) 
> y<-rnorm(n)
> ridge.object<-ridge.cv(X,y)
> ridge.object
$intercept

0.01146743 

$coefficients
           X1            X2            X3            X4            X5            X6            X7           
 1.709387e-02  4.833916e-03  3.954463e-03 -9.671448e-03  4.507962e-03 -6.370366e-03 -4.655737e-02  
...
          X57           X58           X59           X60 
-2.119606e-03 -1.229390e-04 -1.912877e-03 -1.833788e-02 

$lambda.opt
[1] 540 
```

这里，`$lambda.opt`是使用十倍交叉验证获得的正则化参数的最佳值。

# c++ - 读取子文件夹中的许多文件时出错

> ID：15248837
> 
> 赞同：0
> 
> 时间：2013-03-06T13:36:49.527
> 
> 标签：c++

我在子文件夹中读取文件时遇到问题。我在不同的文件夹中有大约 6000 个不同的文件。我会阅读每个文件。但是如果我阅读了大约 2000 个文件，那么应用程序就没有问题。当我阅读 6000 个文件时，这意味着整个子文件夹。应用程序将显示问题“无法打开文件。”。但是如果我只访问未打开的文件夹，那么应用程序就没有问题。我不知道发生了什么？我想也许我读了很多文件和内存不够。你能帮我编辑吗？

```
//This is code to access subforder

static int
find_directory(
        const char *dirname)
{

    DIR *dir;
    char buffer[PATH_MAX + 2];
    char *p = buffer;
    const char *src;
    const char* folder_dir;
    char *end = &buffer[PATH_MAX];
    int ok;

    /* Copy directory name to buffer */
    src = dirname;

    printf("src=%s\n",src);
    while (p < end  &&  *src != '\0') {
        *p++ = *src++;
    }
    *p = '\0';

    /* Open directory stream */
    dir = opendir (dirname);
    if (dir != NULL) {
        struct dirent *ent;

        /* Print all files and directories within the directory */
        while ((ent = readdir (dir)) != NULL) {
            char *q = p;
            char c;

            /* Get final character of directory name */
            if (buffer < q) {
                c = q[-1];
            } else {
                c = ':';
            }

            /* Append directory separator if not already there */
            if (c != ':'  &&  c != '/'  &&  c != '\\') {
                *q++ = '/';
            }

            /* Append file name */
            src = ent->d_name;
            while (q < end  &&  *src != '\0') {
                *q++ = *src++;
            }
            *q = '\0';

            /* Decide what to do with the directory entry */
            switch (ent->d_type) {
                case DT_REG:
                    /* Output file name with directory */
                    {
                        printf ("FILE=%s\n", buffer);
                        OFBool check= readfile(buffer)
                    }
                    break;

                case DT_DIR:
                    /* Scan sub-directory recursively */
                    if (strcmp (ent->d_name, ".") != 0  
                            &&  strcmp (ent->d_name, "..") != 0) {

                        find_directory (buffer,opts);

                    }
                    break;

                default:
                    /* Do not device entries */
                    /*NOP*/;
            }

        }

        closedir (dir);
        ok = 1;

    } else {
        /* Could not open directory */
        printf ("Cannot open directory %s\n", dirname);
        ok = 0;
    }

    return ok;
}
OFBool readfile(const char* filepath)
{
    FILE *f=NULL; 
    OFBool ok = OFFalse;
    if( ( f = fopen( filepath, "rb" ) ) == NULL ) // checks to see if file  exists
    {
        ok = OFFalse;
        cout<<"can not read file"<<filepath<<endl;
        return ok; 
    }
    else
    {
        ok = true;
        cout<<" reading OK"<<endl;
        fclose(f); 
        return ok; 
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T11:12:12.740

也加入了 Joachim Pileborg 的回答。如果您正在使用大量子目录，则需要在 while 循环之后添加**closedir()调用。**这是因为一次可以打开的目录数量是有限制的。上面的示例在使用小文件夹时可以正常工作，但是在使用 2000 多个子文件夹时，您需要在打开另一个目录之前关闭该目录。

```
/*
* Recursively walk though a directory tree.
*
* Arguments:
*     path   - The root directory to start from
*     hidden - If non-zero, include hidden files and directories
*/
void recurse_directory(const char *path, const int hidden)
{
    DIR *dir = opendir(path);
    if (dir == NULL)
{
    perror("opendir");
    return;
}

struct dirent *ent;

while ((ent = readdir(dir)) != NULL)
{
    if (ent->d_type == DT_DIR)
    {
        if (strcmp(ent->d_name, ".") != 0 &&
            strcmp(ent->d_name, "..") != 0 &&
            (ent->d_name[0] != '.' || hidden))
        {
            char *newpath = malloc(strlen(path) + 1 + strlen(ent->d_name) + 1);
            strcpy(newpath, path);
            strcat(newpath, "/");
            strcat(newpath, ent->d_name);

            recurse_directory(newpath, hidden);

            free(newpath);
        }
    }
    else if (ent->d_type == DT_REG)
    {
        if (ent->d_name[0] != '.' || hidden)
        {
            char *newpath = malloc(strlen(path) + 1 + strlen(ent->d_name) + 1);
            strcpy(newpath, path);
            strcat(newpath, "/");
            strcat(newpath, ent->d_name);

            printf("File %s\n", newpath);
            /* readfile(newpath); */

            free(newpath);
        }
      }
   }
      closedir(dir); /* Add this <--- */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:51:22.000

像这样的东西怎么样：

```
/*
 * Recursively walk though a directory tree.
 *
 * Arguments:
 *     path   - The root directory to start from
 *     hidden - If non-zero, include hidden files and directories
 */
void recurse_directory(const char *path, const int hidden)
{
    DIR *dir = opendir(path);
    if (dir == NULL)
    {
        perror("opendir");
        return;
    }

    struct dirent *ent;

    while ((ent = readdir(dir)) != NULL)
    {
        if (ent->d_type == DT_DIR)
        {
            if (strcmp(ent->d_name, ".") != 0 &&
                strcmp(ent->d_name, "..") != 0 &&
                (ent->d_name[0] != '.' || hidden))
            {
                char *newpath = malloc(strlen(path) + 1 + strlen(ent->d_name) + 1);
                strcpy(newpath, path);
                strcat(newpath, "/");
                strcat(newpath, ent->d_name);

                recurse_directory(newpath, hidden);

                free(newpath);
            }
        }
        else if (ent->d_type == DT_REG)
        {
            if (ent->d_name[0] != '.' || hidden)
            {
                char *newpath = malloc(strlen(path) + 1 + strlen(ent->d_name) + 1);
                strcpy(newpath, path);
                strcat(newpath, "/");
                strcat(newpath, ent->d_name);

                printf("File %s\n", newpath);
                /* readfile(newpath); */

                free(newpath);
            }
        }
    }
} 
```

# javascript - 单击时整个文档中的多个图像更改

> ID：15248840
> 
> 赞同：-1
> 
> 时间：2013-03-06T13:36:56.700
> 
> 标签：javascript, jquery, css, background, multiple-instances

我有一个我正在构建的网站，它使用背景图像通过 CSS 在 div 中显示我想要的图片

我想创建一个图像，当按下“ON”时，为不同的类切换不同的背景图像。我也希望它在整个站点中保持不变，因此如果您更改页面，它不会恢复为“关闭”状态。

是否有可以轻松实现此目的的 aj 查询或 java 脚本？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:43:20.403

有关的 ：

*   [使用 jQuery 切换 DIV 背景图像](https://stackoverflow.com/questions/253689/switching-a-div-background-image-with-jquery)
*   [使用 jquery 更改背景图像](https://stackoverflow.com/questions/4578714/changing-background-image-using-jquery)
*   [jQuery更改背景图像](https://stackoverflow.com/questions/7832140/jquery-change-background-image)
*   [Jquery背景图像css更改不起作用](https://stackoverflow.com/questions/4874430/jquery-background-image-css-change-not-working)

    ```
    $(function() {
    $("img")
        .clic(function() { 
            $('.your-element1).css({'background-image':'url(images/your-new-image.jpg)'});
    }); 
    ```

# wpf - MVVM 中的命令

> ID：15248842
> 
> 赞同：5
> 
> 时间：2013-03-06T13:37:22.140
> 
> 标签：wpf, mvvm, command, msdn

我一直在看到人们在他们的代码中创建像 CanExecute 这样的方法的教程。我假设他们这样做是为了帮助读者了解它是如何工作的。当我查找 Command 和 ICommand 时，它会将我带到 MSDN 上用于 Windows Store 应用程序的 ICommand 类。WPF没有Command类吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T13:50:28.863

`ICommand`WPF 中的内置实现是[`RoutedCommand`](http://msdn.microsoft.com/en-us/library/system.windows.input.routedcommand.aspx)（及其兄弟`RoutedUICommand`）。`RoutedCommand`像这样工作：

> a 上的`Execute`and`CanExecute`方法`RoutedCommand`不包含命令的应用程序逻辑，就像典型 `ICommand`的`CommandBinding`. 附加到的事件处理程序`CommandBinding`包含命令逻辑。

这样做的问题是这些事件处理程序必须附加到您的*视图*的代码隐藏中，这正是您*不想*在 MVVM 中做的事情。

您在代码中看到`CanExecute`方法的教程（我们实际上是指实现之外的代码*）**正在`ICommand`*[`DelegateCommand`](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.commands.delegatecommand%28v=pandp.40%29.aspx)使用自定义命令实现，例如[`RelayCommand`](http://mvvmlight.codeplex.com/SourceControl/changeset/view/cf8d07c2ec3f#GalaSoft.MvvmLight/GalaSoft.MvvmLight%20%28NET35%29/Command/RelayCommand.cs)旨在将它们`CanExecute`/`Execute`逻辑“转发”到动态提供的函数；通常，这些是视图模型上公开命令的方法。

这些实现通常由 MVVM 框架提供（对于这两个示例，框架分别是 Prism 和 MVVM Light），但它们非常简单（都是开源的，获取代码并阅读它）并且没有什么可以阻止您复制/粘贴如果您不想要整个框架，请使用代码。

您可以将上述内容总结为“ WPF*中*内置了一个命令类，但在 MVVM 的上下文中它并不是真正有用”。

# java - 如何使用 GWT AutoBean 反序列化 BigDecimal？

> ID：15248844
> 
> 赞同：2
> 
> 时间：2013-03-06T13:37:30.627
> 
> 标签：java, json, gwt, autobean

我有来自服务器并代表 pojos 的 json。当我使用 AutoBean 反序列化为 json 时，有些工作有些不行！我发现那些不能反序列化的有 BigDecimal getter/setter。

**错误：**

> TypeError：无法读取 java_math_BigDecimal_$initFrom__Ljava_math_BigDecimal_2Ljava_lang_String_2 处未定义的属性“长度”

如何在使用 AutoBean 反序列化时将 BigDecimal 处理为 GWT？

ps：

嵌套问题是[这个](https://stackoverflow.com/questions/15247259/which-interfaces-representations-to-deserialize-from-json-to-autobean/15248423?noredirect=1#15248423)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:35:25.520

AutoBean 期望`BigDecimal`在 JSON 有效负载中作为字符串。

我们在[http://gwt-code-reviews.appspot.com/1601805/](http://gwt-code-reviews.appspot.com/1601805/)
进行了讨论， 尽管您可以随意提出问题，但该决定不是“否”而是“不是现在”。

# jquery - 通过jquery附加元素时分配功能

> ID：15248849
> 
> 赞同：1
> 
> 时间：2013-03-06T13:37:43.697
> 
> 标签：jquery, append

我正在动态附加一个元素，并且我为其 onFocus 属性分配了一个函数，但似乎该函数没有被调用

这是我的脚本

```
function add_new()
{
    var i=$('#total').val();
    $('#multi_upload').append('<p id="p_t_to'+i+'"><input type="text" name="t_to'+i+'" id="t_to'+i+'" onFocus="setAutoComplete(p_t_to'+i+',t_to'+i+', results'+i+', <?php echo base_url();?>autocomplete/search?part=)"/></a>');
    var i = parseInt(i);
    i=(i+1);
    $('#total').val(i);

} 
```

但是现在，当我在动态创建的元素上单击鼠标时，我的意思是将焦点设置在动态文本框上，然后函数没有被调用..我做错了什么？

setAutoComplete() 函数定义如下

```
// global variables
var acListTotal   =  0;
var acListCurrent = -1;
var acDelay       = 500;
var acURL         = null;
var acSearchId    = null;
var acResultsId   = null;
var acSearchField = null;
var acResultsDiv  = null;

function setAutoComplete(auto_id, field_id, results_id, get_url)
{
      alert(auto_id);

    // initialize vars
      auto  = "#" + auto_id
    acSearchId  = "#" + field_id;
    acResultsId = "#" + results_id;
    acURL       = get_url;

    // create the results div
    $(auto).append('<div id="' + results_id + '"></div>');

    // register mostly used vars
    acSearchField   = $(acSearchId);
    acResultsDiv    = $(acResultsId);

    // reposition div
    repositionResultsDiv();

    // on blur listener
    acSearchField.blur(function(){ setTimeout("clearAutoComplete()", 200) });

    // on key up listener
    acSearchField.keyup(function (e) {

        // get keyCode (window.event is for IE)
        var keyCode = e.keyCode || window.event.keyCode;
        var lastVal = acSearchField.val();

        // check an treat up and down arrows
        if(updownArrow(keyCode)){
            return;
        }

        // check for an ENTER or ESC
        if(keyCode == 13 || keyCode == 27){
            clearAutoComplete();
            return;
        }

        // if is text, call with delay
        setTimeout(function () {autoComplete(lastVal)}, acDelay);
    });
}

// treat the auto-complete action (delayed function)
function autoComplete(lastValue)
{
    // get the field value
    var part = acSearchField.val();

    // if it's empty clear the resuts box and return
    if(part == ''){
        clearAutoComplete();
        return;
    }

    // if it's equal the value from the time of the call, allow
    if(lastValue != part){
        return;
    }

    // get remote data as JSON
    $.getJSON(acURL + part, function(json){

        // get the total of results
        var ansLength = acListTotal = json.length;

        // if there are results populate the results div
        if(ansLength > 0){

            var newData = '';

            // create a div for each result
            for(i=0; i < ansLength; i++) {
                newData += '<div class="unselected">' + json[i] + '</div>';
            }

            // update the results div
            acResultsDiv.html(newData);
            acResultsDiv.css("display","block");

            // for all divs in results
            var divs = $(acResultsId + " > div");

            // on mouse over clean previous selected and set a new one
            divs.mouseover( function() {
                divs.each(function(){ this.className = "unselected"; });
                this.className = "selected";
            })

            // on click copy the result text to the search field and hide
            divs.click( function() {
                acSearchField.val(this.childNodes[0].nodeValue);
                clearAutoComplete();
            });

        } else {
            clearAutoComplete();
        }
    });
}

// clear auto complete box
function clearAutoComplete()
{
    acResultsDiv.html('');
    acResultsDiv.css("display","none");
}

// reposition the results div accordingly to the search field
function repositionResultsDiv()
{
    // get the field position
    var sf_pos    = acSearchField.offset();
    var sf_top    = sf_pos.top;
    var sf_left   = sf_pos.left;

    // get the field size
    var sf_height = acSearchField.height();
    var sf_width  = acSearchField.width();

    // apply the css styles - optimized for Firefox
    acResultsDiv.css("position","absolute");
    acResultsDiv.css("left", sf_left - 2);
    acResultsDiv.css("top", sf_top + sf_height + 5);
    acResultsDiv.css("width", sf_width - 2);
}

// treat up and down key strokes defining the next selected element
function updownArrow(keyCode) {
    if(keyCode == 40 || keyCode == 38){

        if(keyCode == 38){ // keyUp
            if(acListCurrent == 0 || acListCurrent == -1){
                acListCurrent = acListTotal-1;
            }else{
                acListCurrent--;
            }
        } else { // keyDown
            if(acListCurrent == acListTotal-1){
                acListCurrent = 0;
            }else {
                acListCurrent++;
            }
        }

        // loop through each result div applying the correct style
        acResultsDiv.children().each(function(i){
            if(i == acListCurrent){
                acSearchField.val(this.childNodes[0].nodeValue);
                this.className = "selected";
            } else {
                this.className = "unselected";
            }
        });

        return true;
    } else {
        // reset
        acListCurrent = -1;
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:39:38.633

在 jQUery 中使用 .on 来解决这个问题。

我认为你有一些语法问题。试试这个

```
setAutoComplete('p_t_to'+i+,'t_to'+i+, 'results'+i+',<?php echo base_url();?>autocomplete/search?part=) 
```

# c++ - 用另一个 QList 喂食

> ID：15248853
> 
> 赞同：0
> 
> 时间：2013-03-06T13:37:57.480
> 
> 标签：c++, qt, qlist

嗨，我正在尝试将 QList 作为参数发送到另一个类，但由于某种原因，我遇到了读取访问冲突......

**比较时间频道.h**

```
 class CompareTimeChannel : public IDataChannel
   public:

      // @brief The method used to receive the list
      void setData(const QList< QSharedPointer<core::ITrackSection> > & sections);

      // @brief The list
      QList< QSharedPointer<core::ITrackSection> > _sections;

 }; 
```

**比较时间通道.cpp**

```
 // @brief Empty constructor
 CompareTimeChannel::CompareTimeChannel()
 {
 }

 void CompareTimeChannel::setData(const QList< QSharedPointer<core::ITrackSection> > & sections)
 {
     //_sections = *new QList< QSharedPointer<core::ITrackSection> > ();
     _sections.clear();
     _sections.append(sections);
 } 
```

`Exception at 0x31cc78d, code: 0xc0000005: read access violation at: 0x4, flags=0x0`运行此代码将引发`_sections.clear();`

我尝试在之前初始化列表（注释行`_sections = *new QList<...>`），但抛出的异常相同。

一个答案将不胜感激......

**编辑**

好的，它已修复！

首先，就像@AndreasT 所说，我必须初始化默认的 QList 构造函数。

然后，根据@10WaRRioR01 的回答，问题出`CompareTimeChannel`在第一次调用该方法时没有初始化。固定使用：

```
 CompareTimeChannel* chan = static_cast<CompareTimeChannel*>(channel);
        Q_ASSERT(chan);
        if (chan) {
            chan->setData(sections);
        }
        else {
            qDebug() << "Dynamic cast failure";
        } 
```

谢谢大家，伙计们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:44:04.720

您应该在构造函数中初始化部分。注释行是非常错误的。

`new`在堆上构造 List，然后取消引用它，`*new`并且赋值隐式调用堆上新列表的复制构造函数并将其复制到实例中。不过，堆上的东西仍然存在，所以您刚刚创建了内存泄漏。

```
// @brief Empty constructor
 CompareTimeChannel::CompareTimeChannel()
:_sections()   // initialization default constructor.
 {
 } 
```

**关于评论的编辑：**

QList.clear() 方法调用列表中每个元素的析构函数。至少您的一个共享指针似乎没有正确初始化。如果您需要更多信息，请粘贴将内容放入_sections 的代码。

**编辑关于异常：** 正如我所说，问题很可能是共享指针没有设置为任何有趣的东西。当 SP 被销毁时，它会调用必须存在的内容的析构函数，否则会引发读取访问冲突，这将解释症状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:51:05.273

```
//_sections = *new QList< QSharedPointer<core::ITrackSection> > (); 
```

你不应该做这样的事情。这会在堆上创建一个新的 QList 实例，它永远不会被删除，所以你有内存泄漏
你应该这样做

```
_sections = QList< QSharedPointer<core::ITrackSection> > (); 
```

相反，这将是合法的。但最简单的方法是使用这样的复制分配

```
_sections = sections 
```

您遇到的问题很可能与您在_sections 中的数据有关。也许您在 null CompareTimeChannel 对象上调用您的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:27:07.273

这你展示的应该工作。你的问题出在其他地方。
这类问题可能是由许多不同的错误引起的，例如：`static_cast`c-style cast 错误或错误，使用动态库时二进制兼容性中断，表外写入，编译器缓存问题（这种情况经常发生因为在下面）。

首先我会尝试做的事情：

```
make clean
qmake
make 
```

这经常解决此类问题。如果我不能帮助您，您必须在您的代码中找到其他问题。

# ruby-on-rails - Rails 设计会话登录错误，然后重定向到某个页面（返回）

> ID：15248854
> 
> 赞同：2
> 
> 时间：2013-03-06T13:37:58.040
> 
> 标签：ruby-on-rails, session, devise

我如何更改标准设计 session_controller，例如，如果我输入了错误的密码，我将被重定向：返回（不是必需的），并查看我的错误...

我需要这个做什么？因为我只在模板中登录，该模板在所有页面的布局左块中呈现，而且我没有新的操作视图...

*那么如何通过验证消息错误将错误重定向到其他页面......？*

这是标准 session_controller （现在我没有创建它，它是“嵌套的”）：

```
class Devise::SessionsController < DeviseController
  prepend_before_filter :require_no_authentication, :only => [ :new, :create ]
  prepend_before_filter :allow_params_authentication!, :only => :create
  prepend_before_filter { request.env["devise.skip_timeout"] = true }

  # GET /resource/sign_in
  def new
    self.resource = build_resource(nil, :unsafe => true)
    clean_up_passwords(resource)
    respond_with(resource, serialize_options(resource))
  end

  # POST /resource/sign_in
  def create
    self.resource = warden.authenticate!(auth_options)
    set_flash_message(:notice, :signed_in) if is_navigational_format?
    sign_in(resource_name, resource)
    respond_with resource, :location => after_sign_in_path_for(resource)
  end

  # DELETE /resource/sign_out
  def destroy
    redirect_path = after_sign_out_path_for(resource_name)
    signed_out = (Devise.sign_out_all_scopes ? sign_out : sign_out(resource_name))
    set_flash_message :notice, :signed_out if signed_out && is_navigational_format?

    # We actually need to hardcode this as Rails default responder doesn't
    # support returning empty response on GET request
    respond_to do |format|
      format.all { head :no_content }
      format.any(*navigational_formats) { redirect_to redirect_path }
    end
  end

  protected

  def serialize_options(resource)
    methods = resource_class.authentication_keys.dup
    methods = methods.keys if methods.is_a?(Hash)
    methods << :password if resource.respond_to?(:password)
    { :methods => methods, :only => [:password] }
  end

  def auth_options
    { :scope => resource_name, :recall => "#{controller_path}#new" }
  end
end 
```

也是appcontroller中的方法

```
def after_sign_in_path_for(resource)      
    case resource
      when User then 
        user = User.find(current_user.id)
        total_markup_for_user = user.groups.map(&:markup).sum
        if current_cart.present?
          cart_id = current_cart.id
        else
          cart_id = nil
        end
        ***
        end
        if request.referrer.to_s.include? "users"
          root_path
        else
          request.referrer 
        end
      when Admin::Admin then :admin_mainpage
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:43:30.303

Devise 的文档向您展示了如何在此处覆盖其默认重定向：

[https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-in](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-in)

基本上你会进入你的 application_controller.rb ，例如写这样的东西

```
def after_sign_in_path_for(resource)
  request.env['omniauth.origin'] || stored_location_for(resource) || new_survey_path
end

def after_sign_out_path_for(resource_or_scope)
 root_path
end 
```

结尾

希望能帮助到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:41:55.917

尝试这样的事情，添加一个新的 respond_with 以防 sign_in 返回 false。

```
def create
  self.resource = warden.authenticate!(auth_options)
  set_flash_message(:notice, :signed_in) if is_navigational_format?
  if sign_in(resource_name, resource)
    respond_with resource, location: after_sign_in_path_for(resource)
  else
    respond_with resource, location: root_path
  end
end 
```

# javascript - 使用 value 属性为 Select 设置默认值

> ID：15248857
> 
> 赞同：1
> 
> 时间：2013-03-06T13:38:05.823
> 
> 标签：javascript, jquery, html, cgi

我有动态创建的选择（下拉）网页，由 shell CGI 脚本创建的网页：

```
while read line; do  
  textBoxValue=`printf "$line" | cut -d'        ' -f1`
  comboBoxValue=`printf "$line" | cut -d'       ' -f2`

echo "  
  <div id="divId$start_id">
    <input type="text" name="newTexdtBox$start_id" id="newTextBox" value='$textBoxValue' /> 
    <select name="newComboBox$start_id" id="newComboBox" value="$comboBoxValue">
      <option disabled>pls select</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="9">all</option>
    </select>
    <a href='javascript:void(0)' onclick='return removeThisElement($start_id)'>Remove This</a> 
  </div>
  <a href='javascript:void(0)' onclick='return getSelects()'>getSelects</a>

  "

  start_id=$((start_id+1))
  count=$((count + 1))
done < my_conf 
```

每个 Select 对象都有自己的属性 value=$comboBoxValue。我想在页面加载时将此值属性设置为选中状态。建议的解决方案是（[http://snipplr.com/view/67752/set-default-value-for-select-dropdown-lists-using-value-attribute/](http://snipplr.com/view/67752/set-default-value-for-select-dropdown-lists-using-value-attribute/)）但它似乎不起作用，因为 this.getAttribute("value" ) 不返回任何东西。

如何使用 value 属性为 Select（下拉列表）设置默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:39:49.583

尝试

```
<select name="newComboBox$start_id" id="newComboBox" value="$comboBoxValue">
      <option value="" selected='selected'>pls select</option>
      <option value="1">1</option> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:41:32.230

如果你想用 jQuery 解决它

```
$(function(){
    $('select[value]').each(function(){
        $('option[value="' + $(this).attr('value') + '"]', this).prop('selected', true);
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/CdWbD/)

但最佳解决方案是使用 html 标记本身来解决它。（我不知道 cgi 脚本），但类似

```
<select name="newComboBox$start_id" id="newComboBox">
    <option disabled>pls select</option>
    <option #if ($comboBoxValue == 1) { selected="selected"} value="1">1</option>
    <option #if ($comboBoxValue == 2) { selected="selected"} value="2">2</option>
    <option #if ($comboBoxValue == 3) { selected="selected"} value="3">3</option>
    ....
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:35:04.793

解决方案[http://snipplr.com/view/67752/set-default-value-for-select-dropdown-lists-using-value-attribute/](http://snipplr.com/view/67752/set-default-value-for-select-dropdown-lists-using-value-attribute/)工作正常，我只是在从 Shell 脚本渲染函数时忘记了 \ 符号（获取属性（\“值\”））。

这很好用（从 CGI Shell 脚本渲染时）：

```
\$(document).ready(function() {
  \$('select[value]').each(function(){  
    \$(this).val(this.getAttribute(\"value\"));        
  });                                                 
}); 
```

# c# - 如何使我的 Web 项目中的链接图像出现在我的本地开发 Web 服务器上？

> ID：15248861
> 
> 赞同：5
> 
> 时间：2013-03-06T13:38:09.660
> 
> 标签：c#, asp.net, web-applications

我最近开始参与（或者更确切地说，重新参与）我最初在 2000 年用 ASP 编写的 Web 项目。在过去的 13 年中，该项目在技术使用（ASP、ASP.NET 1.1、ASP.NET 3.5 和 ASP.NET 4.0）方面都在发展并变得相当复杂。我们现在正在使用 VS 2010。

在同一棵树中嵌套了多个不同的 Web 应用程序。这些项目中的每一个都有自己的样式和图像文件夹，导致图像和 css 文件存在大量冗余，这使我们的 GUI 开发人员有些疯狂地试图保持它们的完整性。

我正在努力收拾残局。我的意图是将这些冗余资源整合到一个“核心”项目文件夹中。我希望其他位于树下的项目将这些文件链接到他们的项目中，而不是拥有它们的副本。

我已经能够通过编辑下游 Web 项目并添加以下内容来完成此操作：

```
 <ItemGroup>
    <Content Include="..\..\Core\XXXXX.XXXXX.ASP.Web\Images\**\*.*">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      <Link>images\%(RecursiveDir)%(FileName)%(Extension)</Link>
    </Content>
  </ItemGroup> 
```

这导致图像被链接并且看起来正确： ![在此处输入图像描述](../Images/ce8a48774d9b38c32ed97eb7a897fab3.png)

当我构建项目时，文件最终会出现在 bin 文件夹中： ![在此处输入图像描述](../Images/298d9b8f509781a760c73b13913419ff.png)

我们使用 nant 构建我们的发布项目，我可以通过更新我的复制任务来确保图像包含在发布副本中，所以那里没有问题。

但是当我在本地运行项目时，图像拒绝出现在网页中（本地主机实例）：

![在此处输入图像描述](../Images/2e12d4759653d27d123b83939c77d27b.png)

它应该看起来像（开发服务器实例）：

![在此处输入图像描述](../Images/fec6b6955acc7d7eb830abb05faafc06.png)

当然，这不是关键任务 - 但是在本地运行项目并且看不到图像以及预期的页面布局确实很烦人。

如何使这些链接的图像在本地显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:09:18.777

您可能希望使用处理程序和/或根据环境重写图像路径，而不是复制图像。

# javascript - requirejs - usage in a non-SPA site

> ID：15248863
> 
> 赞同：3
> 
> 时间：2013-03-06T13:38:19.587
> 
> 标签：javascript, requirejs

I'm working on a site which, though not enormous, has enough JavaScript to make me feel that it'd benefit from requirejs. The modular way that we break the page up (and functionality) seems to support this too.

While there's plenty of examples of using requirejs in single page applications, I can't see many examples of use on a non-SPA site.

For example, I'm using jQuery UI Tabs, which I want to be run on every page. So I'd want to run something like `$('.tabs').tabs();` Would you just put this in your `main.js/app.js` (or whatever you specify for `data-main`)?

Second question. The page is built up using HTML/CSS modules. The CMS behind the site knows which HTML/CSS modules are on the page and so I can dynamically write the requirejs config so that I know which JavaScript modules to initialise. Is this a common approach? Although I may actually include all JavaScript files, I'm keen to optimise the code in `main.js` to ensure that it's only executing code for modules that are being used on the page. Has anyone done this?

Thanks very much,

James.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:40:00.340

您的要求的解决方案是不同的，

main.js 应该具有将在需求上调用的函数（不同的需求 - 不同的函数）

这将确保只运行所需的代码。

或者，如果您可以定义动态 JS >>，它将在每个新函数调用时重新创建。通过 CMS，其复杂但可能。就像基于浏览器类型和版本检查调用的动态 css。

--

在所有文件中调用js文件

如果您使用的是 PHP 或 APS 或 .NET（您可以使用一些头文件或主文件。调用该“js”文件一次，否则必须手动将 js 文件链接添加到每个文件以防静态文件，或者

您可以使用我们已经在所有文件中使用的其他 JS 文件来调用 JS 文件。

更新：尝试使用此 JS 代码`JS file`在需要的地方而不是在每个页面上动态添加..

```
$("head").append('<script type="text/javascript" src="global.js"></script>'); 
```

这将在调用的页面上动态添加脚本文件。因此，在使用的 JS 中或在`script`标签下的页面上添加这一行；并给出所需文件的路径，即这里`src="global.js"`

希望对你有帮助，如有问题，请回复:)

# ruby-on-rails - Devise Routes Not Working

> ID：15248864
> 
> 赞同：2
> 
> 时间：2013-03-06T13:38:20.367
> 
> 标签：ruby-on-rails, devise, routes

I am trying to get a simple Ruby/Rails application with Devise up and running. I have followed several devise guides and have gotten to the point where my homepage displays on localhost. I have two links, sign in and sign up. However, when I click on either of them, it just re-displays the homepage, even though the URL says its on the new page. I think it might be a routing problem, but I don't know what to do since I believe Devise handles that for me. When I do 'rake routes' I get:

```
Francis@RYAN-PC ~/Documents/SCHOOL STUFF/USF - Super Senior Year/Senior Project/logintest
$ rake routes
          home_index GET    /home/index(.:format)          home#index
    new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
        user_session POST   /users/sign_in(.:format)       devise/sessions#create
destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
       user_password POST   /users/password(.:format)      devise/passwords#create
   new_user_password GET    /users/password/new(.:format)  devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                     PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
   user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                     PUT    /users(.:format)               devise/registrations#update
                     DELETE /users(.:format)               devise/registrations#destroy
                root        /                              home#index 
```

From the screenshots I've seen, there is something wrong with this. For the 'new_user_session' route, for instance, the route should be something like `{:action=>"new", :controller=>"devise/sessions"}`. This could just be a different way of saying the same thing, but I'm not sure. The only other thing I could think of is I didn't supply the code for handling each of these routes, so it's just re-displaying the same webpage by default. However, I thought Devise handles all of that. I am running rails 3.2.11 and Devise 2.0.0 ('gem list' says I have Devise 1.1.rc0 also). I hope this is a simple misunderstanding and fix, but if anyone could help, that would be great. Thank you.

**EDIT 3/6/13 9:24AM**: Removed devise 1.1.rc0 and restarted rails server. Appears to have done nothing. Here is my routes file (with comments taken out):

```
LoginTest::Application.routes.draw do
get "home/index"

devise_for :users

root :to => 'home#index'
end 
```

**EDIT 3/6/13 2:27PM**: Here is my development log when I open a fresh tab to localhost and then click on sign-up:

**EDIT 3/6/13 9:58PM**: Updated logs to reflect route bugs I had. Functionality (or lack thereof) hasn't changed.

```
Started GET "/" for 127.0.0.1 at 2013-03-06 21:55:58 -0500
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.0ms)
Completed 200 OK in 34ms (Views: 34.0ms | ActiveRecord: 0.0ms)

Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2013-03-06 21:55:59 -0500
Served asset /home.css - 304 Not Modified (0ms)

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-03-06 21:55:59 -0500
Served asset /jquery.js - 304 Not Modified (0ms)

Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-03-06 21:55:59 -0500
Served asset /application.css - 304 Not Modified (0ms)

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-03-06 21:55:59 -0500
Served asset /jquery_ujs.js - 304 Not Modified (0ms)

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-03-06 21:55:59 -0500
Served asset /application.js - 304 Not Modified (6ms)

Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2013-03-06 21:55:59 -0500
Served asset /home.js - 304 Not Modified (0ms)

Started GET "/users/sign_up" for 127.0.0.1 at 2013-03-06 21:56:01 -0500
Processing by Devise::RegistrationsController#new as HTML
  Rendered c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/app/views/devise/shared/_links.erb (1.0ms)
  Rendered c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/app/views/devise/registrations/new.html.erb within layouts/application (16.0ms)
Completed 200 OK in 65ms (Views: 64.0ms | ActiveRecord: 0.0ms)

Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-03-06 21:56:01 -0500
Served asset /application.css - 304 Not Modified (0ms)

Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2013-03-06 21:56:01 -0500
Served asset /home.css - 304 Not Modified (0ms)

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-03-06 21:56:02 -0500
Served asset /jquery.js - 304 Not Modified (0ms)

Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2013-03-06 21:56:02 -0500
Served asset /home.js - 304 Not Modified (0ms)

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-03-06 21:56:02 -0500
Served asset /jquery_ujs.js - 304 Not Modified (0ms)

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-03-06 21:56:02 -0500
Served asset /application.js - 304 Not Modified (2ms) 
```

Thanks everyone for your help. Hopefully this log can help.

**EDIT 3/6/13 10:13PM**: Just figured out that I now have devise 2.2.3 along with 2.0.0\. Functionality hasn't changed.

**EDIT 3/7/13 3:08PM**: Still haven't figured it out. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:17:42.673

好的，我想通了。我的`<%yield%>`行没有`=`显示代码。现在它确实显示了。谢谢大家的时间。

# matlab - MatLab: Plotting nested structures. Does a more efficient way of plotting than for-loops exist?

> ID：15248869
> 
> 赞同：0
> 
> 时间：2013-03-06T13:38:30.380
> 
> 标签：matlab, plot, nested, structure

I would like to know if how I'm plotting my data is an efficient way to go about it. Is this the case? Or does a different way exist, where I create the Structs and then create the plots outside of the for-loop in one go?

### What I do:

Multiple plots per day per Rats. And I check for arrays which are not filled with zeroes, those arrays are not interesting. I have the values stored in a nested struct, which I build as follows:

```
for Rat = vecRat(1):vecRat(end)   
    for Day = UserDayArray 
        % I Build an array with Timediff here, which I left out for clarity
        Subject(Rat).day(Day). Timediff = Timediff;
        if isempty(Subject(Rat).day(Day).CumTimediff) == 0 && max((Subject(Rat).day(Day).CumTimediff)) ~= 0 && min((Subject(Rat).day(Day).CumTimediff)) ~=0
           stem(Subject(Rat).day(Day). Timediff)   %plots data
           end

        %Tells User that for this day no shaped trials were found.
        elseif isempty(Subject(Rat).day(Day).CumTimediff) == 0              
        fprintf(['****************** TSBP ', num2str(Rat), ' Day ', num2str(Day),'******************\n']);
        fprintf('No Shaping algorythm present/No Timechange detected\n');
        fprintf('No plots made\n');
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:37:27.787

结合“cellfun”、逻辑索引和结构取消引用，这就是我想出的。不知道您的确切数据结构，但这应该可行。

```
alldays=Subject(vecRat(1):vecRat(end)).day
AllCumTimediff={alldays(UserDayArray).CumTimediff}
%Use nested cellfun using the all and eq functions to check which plots can be made
%all([])=true so check for isempty to
plotsNotToUse=cellfun(@all,cellfun(@eq,AllCumTimediff,repmat({0},1,numel(AllCumTimediff)),'UniformOutput',false))
%Call your plotter and message functions
cellfun(@myplotter,AllCumTimediff(~plotsNotToUse))
cellfun(@myemptyMessage,AllCumTimediff(plotsNotToUse))

%%
function myplotter(CumTimediff)
figure; % create new figure
plot(CumTimediff);
%Whatever other commands 
```

# javascript - 在three.js中动态创建二维文本

> ID：15248872
> 
> 赞同：40
> 
> 时间：2013-03-06T13:38:37.840
> 
> 标签：javascript, html, three.js

我有在 three.js 中创建的 3D 模型。根据一些数据，我想创建一组由小文本标签装饰的箭头。这些标签应该是二维的。

似乎我有两种选择：要么使用单独的画布元素创建纹理，然后在 3D 模型中使用该纹理，或者在 3D 模型的画布元素顶部使用 HTML。

我想知道该怎么做。执行此操作的“正确”方法是哪种？非常欢迎任何建议和示例代码！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-06T20:54:13.777

如果您不介意文本始终位于顶部（例如，如果对象被其他东西挡住，它的文本标签仍然可见并且位于其他所有内容之上），并且文本不会受到任何影响像灯光/阴影等渲染，那么 HTML 是最简单的方法。

这是一些示例代码：

```
var text2 = document.createElement('div');
text2.style.position = 'absolute';
//text2.style.zIndex = 1;    // if you still don't see the label, try uncommenting this
text2.style.width = 100;
text2.style.height = 100;
text2.style.backgroundColor = "blue";
text2.innerHTML = "hi there!";
text2.style.top = 200 + 'px';
text2.style.left = 200 + 'px';
document.body.appendChild(text2); 
```

将 style.top 和 style.left 变量中的 200 替换为您希望放置文本的 y 和 x 坐标（分别）。它们将是正值，其中 (0,0) 是画布的左上角。有关如何从画布中的 3D 点投影到浏览器窗口中以像素为单位的 2D 点的一些指导，请使用如下代码片段：

```
function toXYCoords (pos) {
        var vector = projector.projectVector(pos.clone(), camera);
        vector.x = (vector.x + 1)/2 * window.innerWidth;
        vector.y = -(vector.y - 1)/2 * window.innerHeight;
        return vector;
} 
```

确保您事先调用了 camera.updateMatrixWorld()。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-05-24T13:24:37.837

查看 [**演示**](https://seregpie.github.io/aframe-text-sprite/)。

`TextGeometry`消耗大量内存，您需要加载一个字体，其中包含您将使用的每个字母的几何图形。如果我在一个场景中有超过 100 个文本网格，我的浏览器就会崩溃。

您可以在画布上绘制文本并通过`Sprite`. 它的问题是您需要计算字体大小。如果你有一个移动的相机，那么你需要定期计算字体大小。否则，如果您使用相机离文字太近，文字会变得模糊。

我编写了一个[TextSprite](https://github.com/SeregPie/THREE.TextSprite)类，它会根据到相机的距离和渲染器元素的大小自动计算可能的最佳字体大小。诀窍是使用[Object3D](https://threejs.org/docs/index.html#api/core/Object3D)`.onBeforeRender`类的回调，它接收相机和渲染器。

```
let sprite = new THREE.TextSprite({
  text: 'Hello World!',
  fontFamily: 'Arial, Helvetica, sans-serif',
  fontSize: 12,
  color: '#ffbbff',
});
scene.add(sprite); 
```

您还可以随时更改文本和字体。

```
sprite.text = 'Hello Stack Overflow!';
sprite.fontFamily = 'Tahoma, Geneva, sans-serif';
sprite.fontSize = 24; 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-03-12T21:54:22.253

如果您确实想将画布对象中的文本（或任何图像）作为 3D 场景的一部分，请查看以下示例代码： [http://stemkoski.github.com/Three.js/Texture-From-Canvas。 html](http://stemkoski.github.com/Three.js/Texture-From-Canvas.html)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-06-11T08:17:47.087

**更新**：此方法现在已弃用并且 CPU 很重，不要使用它。

我发现了另一个仅基于三个.js 的解决方案，

```
var textShapes = THREE.FontUtils.generateShapes( text, options );
var text = new THREE.ShapeGeometry( textShapes );
var textMesh = new THREE.Mesh( text, new THREE.MeshBasicMaterial( { color: 0xff0000 } ) ) ;
scene.add(textMesh);
// Example text options : {'font' : 'helvetiker','weight' : 'normal', 'style' : 'normal','size' : 100,'curveSegments' : 300}; 
```

现在要动态编辑此文本，

```
var textShapes = THREE.FontUtils.generateShapes( text, options );
var text = new THREE.ShapeGeometry( textShapes );
textMesh.geometry = text;
textMesh.geometry.needsUpdate = true; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-01-23T16:27:04.723

我在 NPM 上发布了一个模块，可以为你做到这一点：[https ://github.com/gamestdio/three-text2d](https://github.com/gamestdio/three-text2d)

它允许您在不手动处理画布的情况下拥有`Sprite`或呈现文本。`Mesh`

**例子：**

```
var Text2D = require('three-text2d').Text2D

var text = new Text2D("Hello world!", { font: '30px Arial', fillStyle: '#000000', antialias: true })
scene.add(text) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-03-08T15:16:41.910

您可以创建一个 2d 画布并使用 css 将其定位到 webgl 画布的顶部。然后，您可以使用 2d 画布上下文提供的`ctx.fillText(text,x,y)`或`ctx.strokeText(text,x,y)`方法在其上绘制文本。通过使用这种方法，您可以绘制除文本之外的其他内容，例如箭头和米。

您可以使用@kronuus 建议的方法将点从 3d 转换为 2d 空间。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-03-30T10:52:59.823

@LeeStemkoski 的回复非常有用。**然而，为了使文本跟随您的箭头**，需要对代码进行一些细微的更改，即以防箭头移动、旋转等。

看下一段代码

```
 var canvas1 = document.createElement('canvas');
                        var context1 = canvas1.getContext('2d');
                        context1.font = "Bold 10px Arial";
                        context1.fillStyle = "rgba(255,0,0,1)";
                        context1.fillText('Hello, world!', 0, 60);

                        // canvas contents will be used for a texture
                        var texture1 = new THREE.Texture(canvas1)
                        texture1.needsUpdate = true;

                        var material1 = new THREE.MeshBasicMaterial({ map: texture1, side: THREE.DoubleSide });
                        material1.transparent = true;

                        var mesh1 = new THREE.Mesh(
                            new THREE.PlaneGeometry(50, 10),
                            material1
                          );
                        mesh1.position.set(25, 5, -5);
                        mesh1.rotation.x = -0.9;
                        shape.add(mesh1);
                        // Note that mesh1 gets added to the shape and not to the scene

                       scene.add(shape) 
```

如您所见，诀窍是将文本 ( `mesh1`)添加**到`shape`**（您的“箭头”）**而不是将其添加到场景中**。

我希望这有帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-09T11:26:55.933

来自三个js的“几何/文本/形状”： [https ://threejs.org/examples/?q=text#webgl_geometry_text_shapes](https://threejs.org/examples/?q=text#webgl_geometry_text_shapes)

我简化了代码，只需要添加 2D 动态文本：

```
var loader = new THREE.FontLoader();
loader.load( 'assets/fonts/helvetiker_regular.typeface.json', function ( font ) {   
    var textPositions = [[1, 1, 1],
                         [2, 2, 2]];

    var textMessages = ['Text 1', 'Text 2'];

    var textSizes = [0.1, 0.2];

    var textName = ['text1', 'text2'];

    var textsNumber = textPositions.length;     

    for (var i = 0; i < textsNumber; i++) { 
```

> 'generateShapes' 方法允许在形状中创建文本

```
 var textsShapes = font.generateShapes( textMessages[i], textSizes[i] );
        var textsGeometry = new THREE.ShapeBufferGeometry( textsShapes );    
        var textsMaterial = new THREE.MeshBasicMaterial({color: 0xeeeeee});

        var text = new THREE.Mesh(textsGeometry, textsMaterial);
        text.position.set(textPositions[i][0], textPositions[i][1], textPositions[i][2]);
        text.name = textName[i]; 

        scene.add(text);
    }

}); 
```

# javascript - 如何在动态树的叶节点中显示复选框？

> ID：15248875
> 
> 赞同：0
> 
> 时间：2013-03-06T13:38:50.143
> 
> 标签：javascript, dynatree

我已经用 checkbox=true 实现了 dynatree。但我只想为叶节点显示复选框。如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:49:15.073

一种方法是`hideCheckbox: true`在不是叶子的节点上设置

看一下示例：[示例：选择和复选框](http://wwwendt.de/tech/dynatree/doc/sample-select.html)

# java - 确保在主应用程序崩溃时停止无限循环线程

> ID：15248885
> 
> 赞同：2
> 
> 时间：2013-03-06T13:39:09.033
> 
> 标签：java, multithreading

我创建了一个 Runnable 类，负责监视目录中的文件更改。

```
... imports ...

public class ExamplePathWatch implments Runnable {
    ...
    private boolean isRunning = true;
    ...

    @Override
    public void run() {
        while(isRunning) {
            [1]... wait for a file change ...
            [2]... notify listeners of file change (if any) ...
        }
    }

    public synchronized void stopPathWatch() {
        isRunning = false;
        ... interrupt [1] and allow the thred to exit immediately...
    } 
```

线程在**[1]**处暂停，直到发生文件更改，或者`stopPathWatch()`调用设置`isRunning = false`和中断当前在**[1]**处等待的方法。

就在主应用程序退出之前，`stopPathWatch()`调用它允许线程退出并且整个应用程序完全终止。

我的问题是，当应用程序崩溃时，主应用程序会终止，而不会`stopPathWatch()`被调用。因此，应用程序会在后台无限期地运行，直到它被操作系统杀死。

由于应用程序的开发非常活跃，并且并非所有异常都得到处理，因此无论主应用程序如何终止，是否有推荐的方法来确保子线程停止？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T13:42:21.387

您可以将其`ExamplePathWatch`作为守护线程运行。只有未标记为守护进程的线程才会阻止应用程序退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:44:29.560

您可以将其添加为关闭挂钩：

```
Runtime.getRuntime().addShutdownHook(new Thread() {
    public void run() {
        stopPathWatch();
    }
}); 
```

这段代码必须在你的程序中的某个地方。

# python - UWSGI 堆栈转储

> ID：15248886
> 
> 赞同：3
> 
> 时间：2013-03-06T13:39:12.547
> 
> 标签：python, linux, django, uwsgi

是否可以在 Linux 中进行 UWSGI 堆栈转储。

如果是，我该怎么做？

目的也是调查 CPU 峰值，

请帮助我，因为我对开源非常陌生

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:48:22.777

杀死-USR2 pid

其中 pid 是您感兴趣的工作人员的进程 ID

（我想你的意思是c stacktrace，如果你想在那里检查一下python：http: [//uwsgi-docs.readthedocs.org/en/latest/Tracebacker.html](http://uwsgi-docs.readthedocs.org/en/latest/Tracebacker.html)）

# php - PHP：如何检查 php 脚本是否已经在运行？

> ID：15248889
> 
> 赞同：2
> 
> 时间：2013-03-06T13:39:16.217
> 
> 标签：php

我正在使用 php 脚本来阅读应用程序退回地址收到的电子邮件并对其进行处理。该脚本计划与 cron 作业一起运行，但我无法控制它，并且我无权在服务器上写入文件（因此几乎消除了文件锁定机制）。是否有另一种方法可以确保在任何给定时间我只有一个脚本实例运行？服务器正在运行linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:41:15.807

我想你可以试试这个：

```
// we use ourselves as the lock file
if (false === ($f = fopen(__FILE__, 'r'))) {
    die("Could not open lock file");
}
if (false === flock($f, LOCK_EX)) {
    die("Could not obtain lock");
}
// do your stuff
flock($f, LOCK_UN);
fclose($f); 
```

您不需要写权限来使用咨询锁；这当然是假设`flock()`在您的配置中启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:41:28.630

它有点脏但是

```
if(file_exists("block.bin")) {
  //already running
}

file_put_contents("block.bin", 1);

 //do stuff

unlink("block.bin"); 
```

# java - 如何测量经过的时间

> ID：15248891
> 
> 赞同：44
> 
> 时间：2013-03-06T13:39:28.163
> 
> 标签：java, android

我有一个 10 和 20 的问题游戏。我需要计算用户完成游戏时经过了多少时间。

```
Timer T=new Timer();
T.scheduleAtFixedRate(new TimerTask() {         
    @Override
    public void run() {
        runOnUiThread(new Runnable()
        {                
            public void run()
            {
                countdown.setText(""+count);
                count++;                
            }
        });
    }
}, 1000, 1000); 
```

我用它来停止计数器：

```
T.cancel(); 
```

现在我需要两件事：

*   一种如何计算经过时间并将其存储在变量中的方法
*   我需要最终值是双倍的，例如最终得分是：15.49 秒。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-03-06T13:41:14.853

游戏开始时：

```
long tStart = System.currentTimeMillis(); 
```

游戏结束时：

```
long tEnd = System.currentTimeMillis();
long tDelta = tEnd - tStart;
double elapsedSeconds = tDelta / 1000.0; 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2013-09-01T03:12:28.607

根据 Android[文档](http://developer.android.com/reference/android/os/SystemClock.html) `SystemClock.elapsedRealtime()`是通用间隔计时的推荐基础。这是因为，根据文档， elapsedRealtime()`is guaranteed to be monotonic, [...], so is the recommend basis for general purpose interval timing.`

SystemClock[文档](http://developer.android.com/reference/android/os/SystemClock.html)很好地概述了各种时间方法及其适用的用例。

*   `SystemClock.elapsedRealtime()`并且`SystemClock.elapsedRealtimeNanos()`是计算通用经过时间的最佳选择。
*   `SystemClock.uptimeMillis()`并且`System.nanoTime()`是另一种可能性，但与推荐的方法不同，它们不包括深度睡眠时间。如果这是您想要的行为，那么它们可以使用。否则坚持`elapsedRealtime()`。
*   远离，`System.currentTimeMillis()`因为这将返回“墙上”时钟时间。这不适合计算经过的时间，因为挂钟时间可能会向前或向后跳跃。诸如 NTP 客户端之类的许多事情都可能导致挂钟时间跳跃和歪斜。这将导致经过时间的计算基于`currentTimeMillis()`不总是准确的。

游戏开始时：

```
long startTime = SystemClock.elapsedRealtime(); 
```

游戏结束时：

```
long endTime = SystemClock.elapsedRealtime();
long elapsedMilliSeconds = endTime - startTime;
double elapsedSeconds = elapsedMilliSeconds / 1000.0; 
```

此外，Timer() 是一个尽力而为的计时器，并不总是准确的。因此，在比赛期间会累积计时错误。要更准确地显示中间时间，请使用定期检查来`System.currentTimeMillis()`作为发送到的时间的基础`setText(...)`。

此外，`Timer`您可能想研究 using ，而不是 using [`TimerTask`](http://developer.android.com/reference/android/os/CountDownTimer.html)，这个类是为您想要做的事情而设计的。唯一的问题是它倒计时而不是倒计时，但这可以通过简单的减法来解决。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-07-24T00:27:09.340

甚至更好！

```
long tStart = System.nanoTime();
long tEnd = System.nanoTime();
long tRes = tEnd - tStart; // time in nanoseconds 
```

阅读有关 nanoTime()的[文档！](http://developer.android.com/reference/java/lang/System.html#nanoTime())

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-22T08:17:15.457

有很多方法可以实现这一点，但衡量经过时间的最重要考虑因素是使用`System.nanoTime()`和`TimeUnit.NANOSECONDS`作为时间单位。**我为什么要这样做？**嗯，这是因为`System.nanoTime()`方法返回一个高分辨率的时间源，以纳秒为单位，从某个参考点（即 Java 虚拟机的启动）开始。

> 此方法只能用于测量经过的时间，与系统或挂钟时间的任何其他概念无关。

出于同样的原因，建议避免使用`System.currentTimeMillis()`测量经过时间的方法。此方法返回`wall-clock`时间，该时间可能会因许多因素而变化。这将对您的测量结果不利。

> 请注意，虽然返回值的时间单位是毫秒，但值的粒度取决于底层操作系统，并且可能更大。例如，许多操作系统以几十毫秒为单位测量时间。

所以这里你有一个基于`System.nanoTime()`方法的解决方案，另一个使用[**Guava**](https://github.com/google/guava)的解决方案，最后一个[**Apache Commons Lang**](https://github.com/apache/commons-lang)

```
public class TimeBenchUtil
{
    public static void main(String[] args) throws InterruptedException
    {
        stopWatch();
        stopWatchGuava();
        stopWatchApacheCommons();
    }

    public static void stopWatch() throws InterruptedException
    {
        long endTime, timeElapsed, startTime = System.nanoTime();

        /* ... the code being measured starts ... */

        // sleep for 5 seconds
        TimeUnit.SECONDS.sleep(5);

        /* ... the code being measured ends ... */

        endTime = System.nanoTime();

        // get difference of two nanoTime values
        timeElapsed = endTime - startTime;

        System.out.println("Execution time in nanoseconds   : " + timeElapsed);
    }

    public static void stopWatchGuava() throws InterruptedException
    {
        // Creates and starts a new stopwatch
        Stopwatch stopwatch = Stopwatch.createStarted();

        /* ... the code being measured starts ... */

        // sleep for 5 seconds
        TimeUnit.SECONDS.sleep(5);
        /* ... the code being measured ends ... */

        stopwatch.stop(); // optional

        // get elapsed time, expressed in milliseconds
        long timeElapsed = stopwatch.elapsed(TimeUnit.NANOSECONDS);

        System.out.println("Execution time in nanoseconds   : " + timeElapsed);
    }

    public static void stopWatchApacheCommons() throws InterruptedException
    {
        StopWatch stopwatch = new StopWatch();
        stopwatch.start();

        /* ... the code being measured starts ... */

        // sleep for 5 seconds
        TimeUnit.SECONDS.sleep(5);

        /* ... the code being measured ends ... */

        stopwatch.stop();    // Optional

        long timeElapsed = stopwatch.getNanoTime();

        System.out.println("Execution time in nanoseconds   : " + timeElapsed);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-26T08:51:51.440

从 Java 8 开始，您可以尝试以下操作：

```
import java.time.*;
import java.time.temporal.ChronoUnit;

Instant start_time = Instant.now();
// Your code
Instant stop_time = Instant.now();

System.out.println(Duration.between(start_time, stop_time).toMillis());

//or

System.out.println(ChronoUnit.MILLIS.between(start_time, stop_time)); 
```

# jquery - 在循环内定位？

> ID：15248892
> 
> 赞同：0
> 
> 时间：2013-03-06T13:39:34.233
> 
> 标签：jquery

```
$("#questions .question").each(function() {} 
```

`.question`是一个 li，在`.question`li 内部是另一个带有 class 的列表`.answers`，每个列表都有一个 li 的 class `.answer`。

我已经尝试将它们定位在上述循环中，但没有运气：

```
$(this).$(".answer").each(function() {} 
```

有谁知道如何使用这个在循环中定位每个答案 li ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:40:54.247

`$(this).find('.answer')`或者`$('.answer', this)`

它们是等价的。来自 jQuery 源代码：

```
// HANDLE: $(expr, context)
// (which is just equivalent to: $(context).find(expr)
} else {
    return this.constructor( context ).find( selector );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:41:48.060

您可以传递上下文以应用选择器。在这种情况下，传递`this`将实现您想要的：

```
$("#questions .question").each(function() {
    $(".answer", this).each(function() { // Pass `this` as the context
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:46:11.593

```
$("#questions .question").each(function(index, element) {
    $(element).find('.answer').each(function(index, element) {
        /* do stuff */
    });
}); 
```

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:41:17.890

使用`$(this)`：

```
$("#questions .question").each(function() {
    console.log($(this)); // each .question li
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T13:41:35.057

```
$("#questions .question").each(function() {
    $(this).find(".answer").each( function() {
        //code here
    } );
} 
```

# javascript - 用 Javascript 计算固定费率和总计

> ID：15248894
> 
> 赞同：0
> 
> 时间：2013-03-06T13:39:40.317
> 
> 标签：javascript, jquery, html

我有一个表单，用户在其中输入信息，然后执行计算。

出于某种原因，固定汇率和我的总计没有在 html 中输出。

这是我的脚本。

```
function updateCost()
{
    var amount = $('#amount').val();
    var delivery = parseInt($('#delivery').val());
    var fixedrate =  parseInt($('#total').val() / 100 * 12.4);

    var total = parseInt(amount) + parseInt(delivery);
    $("#total").html(total);
    $("#amountdiv").html(amount);
    $("#deliverydiv").html(delivery);

    var grandtotal = parseInt(fixed) + parseInt(total);
    $("#grandtotal").html(grandtotal);
    $("#total").html(total);
    $("#fixedrate").html(fixedrate);   
}

$(document).ready(function(){
    $('#amount').change(function(){ updateCost(); });
    $('#delivery').change(function(){ updateCost(); });
    $('#grandtotal').change(function(){ updateCost(); });
}); 
```

HTML是这个..

```
Payment:
<div name="amount" id="amountdiv"></div>
Freight:   
<div name="delivery" id="deliverydiv"></div> 
Total Payment:
<div name="total" id="total"></div>
Due Date:    
<div name="date" id="date"></div>    
Fixed:    
<div name="fixed" id="fixedrate"></div>    
Grand Total:
<div name="grandtotal" id="grandtotal"></div> 
```

谢谢约拿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:43:04.543

线

```
var grandtotal = parseInt(fixed) + parseInt(total); 
```

应该是

```
var grandtotal = parseInt(fixedrate) + parseInt(total); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:48:45.293

我想你的意思是

```
 var grandtotal = parseInt(fixedrate) + parseInt(total); 
```

但也行

```
var fixedrate =  parseInt($('#total').val() / 100 * 12.4); 
```

获取 div的`$('#total').val()`空内容并从 parseInt 得到 0

以下是该函数的示例：

```
function updateCost()
{
    var amount = $('#amount').val();
    var delivery = parseInt($('#delivery').val());

    var total = parseInt(amount) + parseInt(delivery);
    $("#total").html(total);
    $("#amountdiv").html(amount);
    $("#deliverydiv").html(delivery);

    var fixedrate =  parseInt(total / 100 * 12.4);

    var grandtotal = parseInt(fixedrate) + parseInt(total);
    $("#grandtotal").html(grandtotal);
    $("#total").html(total);
    $("#fixedrate").html(fixedrate);  

} 
```

# c - 无法访问内存 0X.... C 程序 (Ubuntu 12.10)

> ID：15248896
> 
> 赞同：0
> 
> 时间：2013-03-06T13:39:48.070
> 
> 标签：c, memory

代码的目的：维护一个唯一的元素链接列表...UFID 是唯一的关键字

```
Structure declaration:

    struct sharedFiles
    {
      char UFID[50];
      int valid;                    //valid 1 if someone have this file in write mode
      int shared;                   //no of user's reading this file
      struct sharedFiles *next;     //pointer to next node
    }*sfstart,*sfend;               //sfstart points to the first node of linked list and efend to the last node of linked list so that it will be easy to just insert at the end without traversing the linked list 
```

错误描述：下面的代码在我第二次调用它时会出现分段错误。我尝试使用 GDB 进行调试，它说无法访问该位置

```
if(strcmp(sftemp->UFID,ufid)==0) 
```

在上面的行中，它无法访问**sftemp->UFID**

```
/*Function code*/

  int addShareList(char *ufid,int mode)      //mode=0 (read)  and mode=1 (Write request)
{
  struct sharedFiles *sftemp,*newnode;

  sftemp=sfstart;
   if(sfstart==NULL)   //if list is empty add first node
   {
       sfstart=(struct sharedFiles *) malloc(sizeof(struct sharedFiles));
       strcpy(sfstart->UFID,ufid);
       sfstart->valid=mode;
       sfstart->shared=1;
       sfstart->next=NULL;
       sfend=sfstart;             //this node will also be last node of Linked list
       return 0;
   }
   else                 //if list is not empty
   {

        while(sftemp->next != NULL)    //traverse till last node
        {
          if(strcmp(sftemp->UFID,ufid)==0)
          {
             //here if same node found some manupulation to the struct variables

          }
         sftemp=sftemp->next;
        } //while

  if(sftemp->next==NULL)  //procvess last node
       {

         if(strcmp(sftemp->UFID,ufid)!=0) //if last node not same add node at the end of   Linked list
         {
           newnode=(struct sharedFiles *) malloc(sizeof(struct sharedFiles));
           strcpy(newnode->UFID,ufid);
           newnode->valid=mode;
           newnode->shared=1;
            newnode->next=NULL;
           sftemp->next=newnode;
           sfend=newnode;
           return 0;
          }
          else //if last node is same
          {

                //some manipulations to struct variables 
          }
       } //if

   }

return -1;
}//addShareList 
```

上面的代码可以很好地插入第一个元素。当我调用相同的函数在链表中插入第二个节点时，它无法访问第一个节点，而在 if(strcmp(sftemp->UFID,ufid)==0 行中的comarision ）。希望现在代码的目的很明确。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:53:29.247

In the *while* you check if **sftemp!=NULL** so we can be sure that in the second iteration, after line **sftemp=sftemp->next;** the pointer contain allocated memory.

But, since I don't know how the list it structured, I can't be sure that the content contains another node of *sharedFiles* type, it could contain an **end-list node** which not contains *UFID* attribute.

So, check in your list how to control if the list is finished.

Another solution can be to change your check this way:

```
while(sftemp->next!=NULL)

...

if(sftemp->next==NULL) {
    //add the node in the right way, consider the end-list node
} 
```

EDIT:

Furthermore, change in the first **if** the line *sftemp->next = NULL;* to *sfnext->next = NULL;*.

And be sure to initialize **stnext** = NULL.

EDIT 2:

Now that you post struct declaration I still cannot see when you initialize **sfstart**. Try to do this:

```
Structure declaration:

struct sharedFiles
{
  char UFID[50];
  int valid;                    //valid 1 if someone have this file in write mode
  int shared;                   //no of user's reading this file
  struct sharedFiles *next;     //pointer to next node
}*sfstart = NULL,*sfend; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:49:59.173

Normally the answer for this is that the pointer is NULL, which in your case means `malloc` has failed because you're out of memory - you really should be checking the return value.

The most likely cause for your problem is that you have corrupted the heap, so that `sftemp` no longer points to a valid memory address. Check what it's value is that might give you some more clues.

# sql - SQL - 使用标准获取多个计数

> ID：15248901
> 
> 赞同：2
> 
> 时间：2013-03-06T13:40:06.720
> 
> 标签：sql, sql-server

我有三个存储客户、客户访问商店和商店评论的表：

**客户**
ID
BirthDate...等。

**CustomerVisits**
Customer_ID
Store_ID
VisitDate

**评论**
Store_ID
Customer_ID
Rating

我需要在一条（希望如此）一条 SQL 语句中获得每家商店的所有时间访客数、每家商店最近 30 天内的访客数、每家商店的平均顾客年龄和每家商店的平均评论分数。我需要能够使用像 where Store_ID IN (1,2,3) 这样的 IN 子句同时为多个商店执行此操作。我知道我可以创建一个临时表并循环通过 store_ids，运行多个选择，但如果可能的话，我宁愿在单个选择中执行此操作。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:50:55.803

您可以在子查询中执行每个计数，如下所示：

```
SELECT  Stores.Store_ID,
        review.AvgRating,
        cv.VisitsLast20days,
        cv.TotalVisits,
        cv.AvgCustomerAge
FROM    Stores
        LEFT JOIN
        (   SELECT  Store_ID, [AvgRating] = AVG(Rating)
            FROM    Reviews
            GROUP BY Store_ID
        ) review
            ON review.Store_ID = Stores.Store_ID
        LEFT JOIN
        (   SELECT  CustomerVisits.Store_ID,
                    [VisitsLast30Days] = COUNT(CASE WHEN CustomerVisits.VisitDate >= DATEADD(DAY, -30, CURRENT_TIMESTAMP) THEN 1 END),
                    [TotalVisits] = COUNT(*),
                    [AvgCustomerAge] = AVG(DATEDIFF(DAY, Customer.BirthDate, CURRENT_TIMESTAMP)) / 365.25
            FROM    CustomerVisits
                    INNER JOIN Customer
                        ON Customer.Customer_ID = CustomerVisits.Customer_ID
            GROUP BY CustomerVisits.Store_ID
        ) cv
            ON cv.Store_ID = Stores.Store_ID; 
```

我假设您有一个名为 stores 的表来执行此操作，并在假设并非每个商店都有访问或评论的情况下使用 LEFT JOIN。

我还使用了一种相当粗略的方法来计算客户的平均年龄，但考虑到它只是一个平均值，实际上并没有计算出个人的准确年龄，我怀疑它会对结果产生不利影响

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:06:48.880

尝试：

```
select s.Store_ID,
       count(distinct v.Customer_ID) all_time_visitors,
       count(distinct case when datediff(d, v.VisitDate, getdate()) <= 30 then v.Customer_ID end) 30day_visitors,
       avg(datediff(yy, c.BirthDate, getdate())) avg_customer_age,
       max(r.avg_rating) avg_rating
from Stores s
left join CustomerVisits v on s.Store_ID = v.Store_ID
left join Customers c on v.Customer_ID = c.Customer_ID
left join (select Store_ID, avg(Rating) avg_rating
           from Reviews
           group by Store_ID) r on s.Store_ID = r.Store_ID
where s.Store_ID in (1,2,3) /*amend as required*/
group by s.Store_ID 
```

# windows-phone-7 - jQuery Mobile changePage() 在 Windows Phone 中不起作用

> ID：15248911
> 
> 赞同：6
> 
> 时间：2013-03-06T13:40:54.483
> 
> 标签：windows-phone-7, cordova, jquery-mobile

我正在使用 Phonegap for Windows Phone 8 开发应用程序。

我使用 jQuery Mobile 进行界面设计。

不`$.mobile.changePage()`工作。页面没有被改变。

有没有其他方法可以改变页面？是否有任何其他框架来设计移动界面？

```
$("#btnSearch").bind('click', function() {
    showSpinner();
    $.mobile.changePage("#pageSearch");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T10:29:44.667

[我认为这个问题与此处](https://github.com/jquery/jquery-mobile/pull/5235 "这里")描述的 WP7 中的问题相同。

**检查路径问题：**

```
if($.mobile.path.getLocation("x-wmapp1:/app/www/index.html") != "x-wmapp1:/app/www/index.html")
{
    console.log('there is path problem');
}
else
{
    console.log('everything is OK with paths');
} 
```

**解决方案：**

如 github 所述，问题是 WP7 上的路径与其他平台不同。基本上在 WP7 getLocation 打印带有双斜杠的相对路径，这首先导致了这个问题。要修复，请打开*jquery.mobile-1.3.1.js*并重构以下内容：

```
-        var uri = url ? this.parseUrl( url ) : location,
-          hash = this.parseUrl( url || location.href ).hash;
+        var uri = this.parseUrl( url || location.href ),
+          hash = uri.hash; 
```

和：

```
-        return uri.protocol + "//" + uri.host + uri.pathname + uri.search + hash;
+        return uri.protocol + uri.doubleSlash + uri.host + uri.pathname + uri.search + hash; 
```

进行此更改后，检查应显示“一切正常”。

PS 这是在 WP7 上测试的，并且完全解决了我的 $.mobile.changePage() 问题。

PS2 这个问题在 jQuery 的 github 版本中得到了修复，虽然我刚刚检查了最新的稳定版本（[1.3.2](http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.js "1.3.2")），不幸的是它没有在那里修复。

问候，

赫里斯托·托多罗夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T17:25:26.320

我确实遇到了上面答案中提到的路径问题，但这并没有解决我的问题。经过大量试验和错误后，我发现是导致问题的 URL 开头的协议。

“mypage.html”的更改页面将发送一个 Ajax 请求

```
x-wmapp0://www/mypage.html 
```

它需要只是

```
www/mypage.html 
```

我对 jQuery Mobile 源代码进行了修改，以操纵字符串以切断协议，现在它可以完美运行。

要应用修复，在*未缩小的*jQuery Mobile js 文件中，搜索“$.ajax”并在其前面添加以下内容：

```
var parts = fileUrl.split("www/");
fileUrl = "www/" + parts[parts.length-1]; 
```

这实际上删除了“x-wmapp0://www/”并将“www/”重新打开。由于 jQuery Mobile 处理 url 的方式，仅删除“x-wmapp0://”并不总是有效，在某些情况下会导致“www/www/...”。

这已确认可与 Cordova 3.1 和 3.3 以及 jQuery Mobile 1.3.2 一起使用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-04T14:03:09.290

我认为该方法已重命名为“pagechange”

[http://jquerymobile.com/blog/2011/09/08/jquery-mobile-beta-3-released/#upgrade](http://jquerymobile.com/blog/2011/09/08/jquery-mobile-beta-3-released/#upgrade)

# svn - SVN : What's the difference between --non-interactive and --accept postpone ?

> ID：15248912
> 
> 赞同：8
> 
> 时间：2013-03-06T13:40:58.937
> 
> 标签：svn

I'm trying to understand the difference between those two option of the `svn update` command. I have, admittedly quickly, looked at the book but didn't find anything useful.

I also tried both with conflicts, and both display the same text, and so on (`svn version 1.6.12`). Nothing about that on the web.

Thanks a lot !

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T15:08:19.297

When you have a question about Apache Subversion refer to [SVNBook](http://svnbook.red-bean.com/en/1.7/).

*   [`--non-interactive`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.html#svn.ref.svn.sw.non_interactive) is a global option and means *"do no interactive prompting"*,

*   [`--accept postpone`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.html#svn.ref.svn.sw.accept) is a valid option of [`svn update`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.update.html) command and means *"take no resolution action at all and instead allow the conflicts to be recorded for future resolution".*

Global options apply to all svn.exe subcommands, even if they have no effect on some of them, see [http://svnbook.red-bean.com/en/1.7/svn.ref.svn.html#svn.ref.svn.sw](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.html#svn.ref.svn.sw):

> The svn command-line client usually exits quickly with an error if you pass it an option which does not apply to the specified subcommand. **But as of Subversion 1.5, several of the options which apply to all—or nearly all—of the subcommands have been deemed acceptable by all subcommands, even if they have no effect on some of them. (This change was made primarily to improve the client's ability to called from custom wrapping scripts.)** These options appear grouped together in the command-line client's usage messages as global options, as can be seen in the following bit of output.

# visual-studio-2010 - Qt 和 MSVS2010 - 项目不创建文件

> ID：15248915
> 
> 赞同：0
> 
> 时间：2013-03-06T13:41:13.740
> 
> 标签：visual-studio-2010, qt

我正在尝试在 MSVS2010 中创建 Qt 项目，但 VS 不会创建所有文件（没有调试和发布文件），所以我无法构建项目。

如何解决？

# postgresql - 在 postgresql 触发器上使用动态表名

> ID：15248916
> 
> 赞同：0
> 
> 时间：2013-03-06T13:41:13.903
> 
> 标签：postgresql

我有以下触发器，我想在多个表中使用。那么，我怎样才能让它工作，而不是为每个表设置一个触发器呢？

```
BEGIN
    IF (TG_OP = 'UPDATE') THEN
        UPDATE test_table set rel_label = (select SUBSTR(release, 1, 5)) where uid=OLD.uid;
        RETURN OLD;
    ELSIF (TG_OP = 'INSERT') THEN
        UPDATE test_table  set rel_label = (select SUBSTR(release, 1, 5)) where uid=OLD.uid;
        RETURN NEW;
    END IF;
    RETURN NULL; -- result ignored since is an AFTER TRIGGER
END; 
```

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:47:15.687

请参阅有关[EXECUTE](http://www.postgresql.org/docs/8.4/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)命令的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:15:08.027

刚刚想出了一个直接的解决方案。

```
BEGIN
    IF (TG_OP = 'INSERT') THEN
                NEW.rel_label = (select SUBSTR(NEW.release, 1, 5));
                RETURN NEW;
    ELSIF (TG_OP = 'UPDATE') THEN
                NEW.rel_label = (select SUBSTR(NEW.release, 1, 5));
                RETURN NEW;
    END IF;
            RETURN NULL;

END; 
```

# cucumber - 如何在运行maven集成测试时使用ant生成的cobertura.ser

> ID：15248924
> 
> 赞同：2
> 
> 时间：2013-03-06T13:41:30.393
> 
> 标签：cucumber, cobertura, integration-testing

我使用以下命令和 pom.xml 片段对黄瓜案例运行集成测试（例如：在功能文件中使用 tag@abc）-

pom.xml 片段：

```
...
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.11</version>
    <configuration>
        <skip>true</skip>
    </configuration>
    <executions>
        <execution>
            <phase>integration-test</phase>
            <goals>
                <goal>test</goal>
            </goals>
            <configuration>
                <skip>false</skip>
                <includes>
                    <include>**/*.class</include>
                </includes>
                <systemPropertyVariables>
                    <job.host.name>server-t10</job.host.name>
                    <job.email.notification>abc@abc.com</job.email.notification>
                    <cucumber.options>--format pretty --format
                        html:target/cucumber/cucumber-html</cucumber.options>
                </systemPropertyVariables>
            </configuration>
        </execution>
    </executions>
</plugin>
... 
```

mvn 命令运行测试用例： `mvn clean integration-test -Dcucumber.options="--format pretty --format html:target/cucumber/cucumber-html1 --tags @abc" -Djob.host.name=server-t10`

在执行案件并生成所有报告的情况下，每件事都可以正常工作。当我试图获得测试用例的覆盖率时，问题就出现了。

我尝试了所有可能的组合，以使用 cobertura-maven-plugin 和 version2.5.2（不使用 ant instrumnet/report）生成 cobertura 覆盖率报告，但它只是不创建任何报告，也不创建任何 .ser 文件或任何东西。只有日志说 - 没有要检测的文件并且什么都不做。

失败了，我终于下载了 cobertura (1.9.4.1) 并创建了自定义 cobertura.xml。当我为 ex 运行以下 ant 命令时 -

`ant -f cobertura.xml instrument mvn clean integration-test -Dcucumber.options="--format pretty --format html:target/cucumber/cucumber-html1 --tags @abc" -Djob.host.name=server-t10 ant -f cobertura.xml report`

幸运的是，它创建了所有的报告/.ser 文件等。但是，在运行所有这些文件之后，它在所有使用的类的最终覆盖率报告中显示为零覆盖率。这可能是因为（我认为） mvn 命令没有使用/操作由 ant instrument 创建的 cobertura.ser。

所以，请帮我解决这个问题，我在 pom.xml 中放置了什么内容和位置，以便当我运行 mvn 命令时，它使用检测文件（由 ant insturment 命令生成的输出）并更新它。这样我就可以使用该文件使用 ant 报告生成报告。我尝试将所有可能的条目放在 pom.xml 中。但它没有帮助。

注意：我正在寻找这个特殊的解决方案，因为我所有的努力都浪费在使 cobertura-maven-plugin 工作上。我不知道原因，但是这个插件不适用于我创建报告甚至运行案例。

# facebook-fql - 当 end_time 为当前日期时，Insights FQL 返回空

> ID：15248925
> 
> 赞同：0
> 
> 时间：2013-03-06T13:41:30.470
> 
> 标签：facebook-fql

我有这个查询：

```
SELECT metric,value FROM insights WHERE object_id=200829446624786 AND
metric IN("page_story_adds_unique","page_impressions_unique",
"page_impressions_organic_unique","page_impressions_paid_unique",
"page_impressions_viral_unique") AND (end_time=end_time_date('2013-03-06')) AND
period=period("days_28") 
```

但由于某种原因，查询返回一个空数组。我将日期更改为上个月 (2013-02-06)，它返回了一个数组，其中包含我要求的指标的值。

谁能解释为什么我在本月输入时没有值，而在前几个月中输入给了我足够的值？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:50:20.407

因为最新的数据总是几天前的。在我的页面上是 4 天。

# c - 我的 C 程序已停止工作

> ID：15248926
> 
> 赞同：0
> 
> 时间：2013-03-06T13:41:31.017
> 
> 标签：c, structure

我正在尝试在这里做作业，正在编写一个程序，该程序显示一定数量的点到 (0,0) 的距离。但是由于某些原因，一旦我的程序启动，Windows 就会说它已停止工作。我用两个不同的编译器尝试过，它们没有给我任何错误消息。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

struct point {
    int x;
    int y;
};

struct point getPoint();
void printPoint(struct point);
double distanceToO(struct point p);
void createArray(struct point, int);

int main() {

    int number, i;
    struct point coord[number];

    printf("Type the number of points you want to create: ");
    scanf("%d", &number);

    printf("\n\n");

    for(i=0;i<number;i++)
        coord[i]=getPoint();

    printf("\n\t\tPoint\tDistance to (0,0)\n");

    for(i=0;i<number;i++) {        
        printPoint(coord[i]);

        printf("\t%0.2lf", distanceToO(coord[i]));
    }

    system("pause"); 
    return 0;
}

struct point getPoint() {
    struct point p;

    printf("Type the x and the y-value for a point with a space in between: ");
    scanf("%d %d", &p.x, &p.y);

    return p;   
}

void printPoint(struct point p){
    printf("\n\t\t(%d,%d)",p.x,p.y);
}

double distanceToO(struct point p) {
    return sqrt((0-p.x)*(0-p.x)+(0-p.y)*(0-p.y));
} 
```

这就是详细要做的事情：

编写一个程序，首先询问应该创建多少点，然后询问用户点的 x 和 y 值。然后程序应该给出一个表格，显示点和到 (0,0) 的距离。必须创建/使用以下函数： “point getpoint()” - 要求输入坐标 “void printpoint(point p)” - 打印点的坐标 “double distanceToO(point p)” - 返回distance to (0,0) 创建一个结构点，它有两个成员，一个点的 x 坐标和 y 坐标。

有人可以提示我出了什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T13:43:37.250

```
int number, i;
struct point coord[number]; 
```

`number`尚未初始化，您正在使用它来声明`coord`数组的大小。您将在堆栈上生成一个有效随机大小的数组，这很可能会导致崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:43:34.300

`number`当用于指定数组中元素的数量时，该变量未初始化`coord`。然后访问该数组，并且不知道它们的数组中有多少元素。`number`在使用之前读取一个有效值并检查*是否*确实已读取了一个有效值：

```
/* scanf() returns number of assignments made. */
if (scanf("%d", &number) == 1)
{
} 
```

始终检查输入操作的结果，以确保后续代码正在处理具有有效值的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T13:43:47.677

```
int number;
struct point coord[number]; 
```

我看不到在哪里`number`初始化。如果你真的想使用 VLA，你应该在`coord`事后声明：

```
int number;

scanf("%d", &number);

struct point coord[number]; 
```

否则，由于 `number`具有自动存储期限，其值将是未定义的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T13:44:41.903

我很惊讶您没有收到警告/错误：

```
int number, i;
struct point coord[number]; 
```

您分配`struct point`一个大小等于未初始化变量的数组。

请注意，如果您使用 Visual Studio，它也不完全支持 C99 标准，因此**不允许**在声明之前有语句，如下所示：

```
int number;
number = some_number;
struct point coord; // Error, you have a statement above 
```

# java - Java（swing）有这样的按钮吗？

> ID：15248932
> 
> 赞同：6
> 
> 时间：2013-03-06T13:41:38.473
> 
> 标签：java, swing

例如，libre office 有带有下拉菜单的按钮，但它不是组合框：

![按钮快照](../Images/17685fa3351a7a8fab9815a31e5db435.png)

Swing 有模拟或类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:54:43.950

Java没有提供SplitButton实现。我在对潜在实现的评论中提供了指向该站点上另一个问题的[链接](https://stackoverflow.com/questions/11646290/splitbutton-in-java)，并补充说 Jidesoft 在其开源[JIDE Common Layer](https://github.com/jidesoft/jide-oss)中也有一个 SplitButton 的实现，请先检查许可证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:43:34.070

**不是直接的，但您可以通过将 ImageIcon 包装到 Button**中轻松实现它。（`arrow_down.png`是向下的，黑色箭头）

```
button = new JButton();  
button.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/icons/arrow_down.png")));  
button.setBorderPainted(false);  
button.setFocusPainted(false);  
button.setContentAreaFilled(false); 
```

# c# - ASP.NET 文件上传控件允许的最大文件大小

> ID：15248934
> 
> 赞同：6
> 
> 时间：2013-03-06T13:41:42.493
> 
> 标签：c#, asp.net, performance, file-upload

我在 ASP.Net 中使用文件上传控件，遵循以下博客方法。

[http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx](http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx)

machine.config 中设置了 4MB 默认值，但您可以在 web.config 中覆盖它。例如，要将上传限制扩大到 20MB，您可以这样做：

```
<system.web>
  <httpRuntime executionTimeout="240" maxRequestLength="20480" />
</system.web> 
```

**问题：** 如果我们允许用户上传 50-60 MB 的文件，我可以增加请求的长度到什么级别（最大大小）以及对网站的性能影响。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T13:46:41.197

该`maxRequestLength`字段的“理论”最大级别是带符号的 32 位整数数据类型 ( `Int32.MaxValue`) 的最大值。

但是，您将不得不测试上传以了解您的性能。

编辑：

来自[Microsoft 支持票证](http://support.microsoft.com/?id=295626)：

> 理论上，最大文件上传大小是相当大的。但是，由于 ASP.NET 健康监控，您无法在 ASP.NET 中上传非常大的文件。ASP.NET 工作进程具有 2 GB 的虚拟地址空间。但是，由于运行状况监控和内存碎片，ASP.NET 工作进程仅使用了 1 GB 多一点。
> 
> 在上传过程中，ASP.NET 将整个文件加载到内存中，然后用户才能将文件保存到磁盘。因此，由于 Machine.config 文件中 processModel 标记的 memoryLimit 属性，该进程可能会被回收。memoryLimit 属性指定 ASP.NET 工作进程在进程自动回收之前可以耗尽的物理内存百分比。回收可防止内存泄漏导致 ASP.NET 崩溃或停止响应。
> 
> 此外，其他因素也会影响可上传的最大文件大小。这些因素包括可用内存、可用硬盘空间、处理器速度和当前网络流量。对于上传的文件的常规流量，Microsoft 建议您使用 10 到 20 兆字节 (MB) 范围内的最大文件大小。如果您很少上传文件，则最大文件大小可能为 100 MB。
> 
> 注意您可以在 ASP.NET 中上传大于 100 MB 的文件。但是，Microsoft 建议您遵循本文中提到的最大文件上传大小。要确定更精确的文件大小，请在与生产中使用的计算机相似的计算机上执行压力测试。

# iphone - xcode 4.6 无法显示部署目标 4.2

> ID：15248937
> 
> 赞同：0
> 
> 时间：2013-03-06T13:41:48.550
> 
> 标签：iphone, ios-4.2, deployment-target

我有 xcode 4.6。它显示部署目标高达 4.3。我想使用 4.2 但它无法显示。

它的步骤是什么。

什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:00:09.287

Xcode 4.6 和 iOS 6 不支持 iOS 4.2 和/或 ARMv6。（ARMv6 设备是 iPhone 1st 和 3G 以及 iPod Touch 1g 和 2g）

由于所有具有 ARMv7 的设备都能够运行 iOS 5，因此您应该将最低版本设置为 4.3，或者如果可能的话，设置为 iOS 5.0。

# java - log4j如何从属性文件加载变量

> ID：15248939
> 
> 赞同：0
> 
> 时间：2013-03-06T13:41:54.260
> 
> 标签：java, log4j

我`log4j.properties`的项目中有（WEB-INF/classes/log4j.properties）。

![在此处输入图像描述](../Images/4cf338759e0c7529e0cb361f3563030b.png)

此文件包含我的日志目录的变量

```
LOG = D:/Logs/log4j 
```

如何在 Java 中加载这个变量？例如我想做：

```
public static String logFolder = //TODO: get...("LOG") 
```

注意：我在 log4j 上使用 slf4j。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:59:29.223

使用 java.util.Properties。一个最小的例子：

```
import java.util.Properties;

public class MyApp {

  public static void main(String[] args) throws IOException {
    Properties prop = new Properties();
    prop.load(MyApp.class.getClassLoader().getResourceAsStream("log4j.properties"));

    System.out.println("Value=" + prop.getProperty("LOG"));
  }
} 
```

# c++ - 函数模板的非依赖默认模板参数是否允许 SFINAE？

> ID：15248944
> 
> 赞同：11
> 
> 时间：2013-03-06T13:42:08.553
> 
> 标签：c++, templates, language-lawyer, sfinae

这里的“不依赖”是指“不依赖于该特定函数模板的任何其他模板参数”。

在回答[这个问题](https://stackoverflow.com/q/15232758/500104)时，我以为我找到了答案，但根据@Johannes（在我的答案的评论中），我在这里误解了标准。举个简单的例子：

```
#include <type_traits>

template<class T>
struct X{
  template<class U = typename T::type>
  static void foo(int){}
  static void foo(...){}
};

int main(){
  X<std::enable_if<false>>::foo(0);
} 
```

（[现场版。](http://liveworkspace.org/code/2hMZJv)）

**是否可以保证上述编译？**GCC 和 Clang 在这里不同意，正如在它们之间切换时可以在实时版本中看到的那样。有趣的是，GCC 接受了以下内容：

```
#include <type_traits>

template<class T>
struct X{
  template<bool = T::f()>
  static void foo(int){}
  static void foo(...){}
};

struct Y{
  static bool f(){ return true; }
};

int main(){
  X<Y>::foo(0);
} 
```

（[现场版。](http://liveworkspace.org/code/45Q6eT)）

`foo(int)`第二个片段只有在`T`包含`constexpr`静态函数时才会打印`f`。同样，有趣的是，如果您完全删除`f`（`Y`或者说通过`int`），GCC 会抱怨缺少成员，表明它不允许 SFINAE - 这与之前的观察相矛盾。Clang 接受所有变体并应用 SFINAE，我想知道这是否是标准所保证的。

（FWIW，带有 Nov CTP 的 MSVC 通常同意 Clang，但如果该功能存在，则在第二个片段上崩溃，可能是因为他们没有。我[在这里](https://connect.microsoft.com/VisualStudio/feedback/details/780779/)`constexpr`提交了错误报告。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:44:17.793

我认为有问题的代码是不正确的，因为当类模板被实例化时，所有成员声明都被实例化，除了成员函数和成员函数模板的定义部分和*默认参数。*该标准还定义了函数默认参数何时被精确实例化。

因此*默认模板参数*会立即实例化。*在我看来，此时默认参数*可能旨在包含*默认模板参数*的可能性非常小，因为没有描述稍后何时实例化此类参数。

这符合*“不应在出现在成员类之外的类模板成员的定义的模板参数列表中指定默认模板参数”的要求。*，因为在实例化周围的类模板时，不可能立即实例化这样的模板参数。

# sql - 如何从列名中获取所有值？

> ID：15248945
> 
> 赞同：-3
> 
> 时间：2013-03-06T13:42:15.650
> 
> 标签：sql, sql-server, database

例子：

SQL 数据库

```
 Firstname   Age
    Paul        14
    Andrea      15
    John        18
    Mary        20 
```

我想从“年龄”列中获取值，并将其全部添加。（我是 SQL 命令的新手），所以我的输出将是 67。这甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T13:43:22.540

```
select sum(age)
from dbo.YourTableName 
```

[http://msdn.microsoft.com/en-us/library/ms187810.aspx](http://msdn.microsoft.com/en-us/library/ms187810.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:43:16.023

您可以使用[SQL Sum 函数](http://msdn.microsoft.com/en-us/library/ms187810.aspx)来总结您的年龄列，例如：

```
Select Sum(Age) as TotalAge from yourtable; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T13:43:56.850

```
SELECT SUM(Age) FROM YourTable 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T13:44:01.293

您可以使用[`SUM()`](http://msdn.microsoft.com/en-us/library/ms187810.aspx)类似的功能

```
SELECT SUM(Age) as Total
FROM yourtable 
```

> 返回表达式中所有值的总和，或仅返回 DISTINCT 值。SUM 只能用于数字列。空值被忽略。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T13:44:19.560

使用以下 sql

```
SELECT SUM(Age) as AgeTotal from dbo.YourTableName 
```

# php - Magento 前端直到最后才渲染

> ID：15248960
> 
> 赞同：4
> 
> 时间：2013-03-06T13:43:03.253
> 
> 标签：php, apache, magento, magento-1.5

我有一个非常有趣的问题，这让我发疯。:)

我在 CentOS 6.3 系统上设置 Magento 1.5。Magento 后端正在工作，我有产品、用户，一切都设置好了。当我打开我的前端时，它似乎坏了。应用了 CSS，第一部分（标题、菜单、搜索栏）被正确渲染，但在那之后，什么都没有……我首先以为我在索引或缓存，所以我重新索引了所有内容，我也清除了缓存。它没有帮助，所以我继续调查。

Firebug 告诉我页面失败并显示 500（内部服务错误） - 奇怪的是 Magento 没有告诉我这个，前端 HTML 文件看起来还不错，更糟糕的是，Apache 和 Magento 日志都没有显示任何事物！！！我也用firebug发现服务器返回的HTML响应不完整，到这里就结束了：

```
<div class="category-products">

                        <ul class="products-grid">
                <li class="item first"><a href="http://...:8383/wobMagento/featured-products/item.html?___SID=U" title="Smoking" class="product-image"><img src=" 
```

就是这样，在 img src=" 部分之后，HTML 就完成了。似乎 Magento 正在抛出异常。

我认为这段代码导致了这个问题：

```
 <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
            <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a> 
```

我不知道该怎么做，我会列出我做了什么：

*   我清除了缓存
*   我已经重新索引了所有内容
*   我已经为我的整个 magento 目录添加了 777 个权限
*   我确保 apache 是我整个 magento 目录的所有者
*   我调整了 ${magento}/media 的 .htaccess 文件，尝试使用默认值，添加了一些选项，删除了一些选项，甚至删除了它，这些操作都没有做出任何改变（或者，我能做到的最好的就是完全屏蔽所有图片）

我可以确认在后端产品可用并且可以看到，并且不会发生这种 500 错误。我发现这个确切的产品失败了，我可以编辑它的标签，并且产品的图像显示在后端。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T15:45:40.333

检查您的服务器错误日志，它们可能包含与您的问题相关的有价值的信息。

由于所有分解的行输出产品图像，这些图像使用 GD 库调整大小，我假设没有安装 GD 库。

确保您的安装可以运行 GD 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:49:52.400

您是否为 magento 启用了开发人员模式以获取所有错误？ [http://www.blog.magepsycho.com/configuring-magento-for-development-debug-mode/](http://www.blog.magepsycho.com/configuring-magento-for-development-debug-mode/)

# ios - iframe 阻止 iScroll 在移动 Safari 上滚动

> ID：15248970
> 
> 赞同：11
> 
> 时间：2013-03-06T13:43:35.073
> 
> 标签：ios, html, iframe, scroll, iscroll

我在我的移动启用网站（在此处使用 iPhone）上使用 iScroll 在 div 内滚动。

在这个 div 中，我有一个固定高度的 iframe，如下所示：

```
<body>
  <div id="iscroller">
    <iframe id="theIframe"></iframe>
    Other stuff
  </div>
</body> 
```

**现在，在 div 内滚动时，一切都按预期工作，但是当滚动手势在 iframe 上开始**时我无法滚动。

这个问题在这里描述得很好：[https ://github.com/cubiq/iscroll/issues/41](https://github.com/cubiq/iscroll/issues/41)

因此，我通过应用`pointer-events:none`到 iframe 来使用该帖子中的 css 解决方法。

现在滚动效果很好**，但**我无法单击 iframe 中定义的任何链接，因为 iframe 上的所有点击/触摸事件似乎都被阻止了`pointer-events: none`。

所以我认为：

> “好的，当用户滚动时，我需要`pointer-events:none`。如果他没有滚动（而是点击），我必须设置`pointer-events:auto` 以让点击/触摸事件通过。”

所以我这样做了：

**CSS**

```
#theIframe{pointer-events:none} 
```

**JavaScript**

```
$("#theIframe").bind("touchstart", function(){
  // Enable click before click is triggered
  $(this).css("pointer-events", "auto");
});

$("#theIframe").bind("touchmove", function(){
  // Disable click/touch events while scrolling
  $(this).css("pointer-events", "none");
}); 
```

即使添加这个也不起作用：

```
$("#theIframe").bind("touchend", function(){
  // Re-enable click/touch events after releasing
  $(this).css("pointer-events", "auto");
}); 
```

无论我做什么：滚动不起作用或单击 iframe 内的链接不起作用。

不工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T11:10:18.663

我找到了完美的解决方案。在 iOS 和 Android 上运行良好。

基本思想是在 iframe 之上放置一个 div 层。这样滚动工作顺利。

如果用户想要点击/单击该 iframe 上的元素，我只需在图层上捕获该点击，保存 x 和 y 坐标并在这些坐标处触发 iframe 内容的点击事件：

**HTML：**

```
<div id="wrapper">
    <div id="layer"></div>
    <iframe id="theIframe"></iframe>
</div>
Other stuff 
```

**CSS：**

```
#layer{
    position:absolute;
    opacity:0;
    width:100%;
    height:100%;
    top:0;
    left:0;
    right:0;
    bottom:0;
    z-index:2
} 
```

**JavaScript：**

```
$('#layer').click(function(event){
    var iframe = $('#theIframe').get(0);
    var iframeDoc = (iframe.contentDocument) ? iframe.contentDocument : iframe.contentWindow.document;

    // Find click position (coordinates)
    var x = event.offsetX;
    var y = event.offsetY;

    // Trigger click inside iframe
    var link = iframeDoc.elementFromPoint(x, y);
    var newEvent = iframeDoc.createEvent('HTMLEvents');
    newEvent.initEvent('click', true, true);
    link.dispatchEvent(newEvent);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-08T16:34:18.320

我找到了一个解决方案，它恰好与其他人在 github 上已经提到的内容很接近，但这对于想要为这个问题找到快速解决方案的人来说可能很有用。

我假设一些事情，比如只有一个 iscroll 容器，这里表示为 ID。这没有经过适当的测试，需要重构。它在我的项目中工作，但我在这里稍微改变了它的例子，但我想你会很容易理解你需要做什么：

```
var $iscroll = $('#iscroll');

document.addEventListener('touchstart', function(e) {

if ($iscroll.find('iframe').length > 0){

    $.each($iscroll.find('iframe'), function(k,v){

        var $parent = $(v).parent().first();

        if ($parent.find('.preventTouch').length == 0){

            $('<div class="preventTouch" style="position:absolute; z-index:2; width:100%; height:100%;"></div>')
                .prependTo($parent);

        };

        $parent
            .css('position', 'relative').css('z-index', 1);

    });

    $iscroll.find('.preventTouch').on('click', function(e){
        e.preventDefault();
        e.stopPropagation();
        return false;
    });

};

};

document.addEventListener('touchend', function(e) {

if ($iscroll.find('iframe').length > 0){

    setTimeout(function(){

        var $iscroll = $('#iscroll');

        $iscroll.find('.preventTouch').remove();
        $iscroll.find('iframe').css('z-index', '');
        $iscroll.find('.preventTouch').off('click');

    }, 400);

};

}; 
```

感谢您的关注！

# .net - 查找一个类是否派生自另一个在 .NET 中通用的类？

> ID：15248971
> 
> 赞同：1
> 
> 时间：2013-03-06T13:43:36.130
> 
> 标签：.net, generics, inheritance, types

我有一个像这样的课程：

```
class A<T>
{

} 
```

我有另一个派生自上述类的类，例如：

```
class B : A<X>
{

} 
```

X之上是另一个类。

现在我可以有很多像 B 这样的类，在这些类中，泛型参数可以是其他类。

如何确定 B 类的任何实例是否派生自 A 类？

我试过：

```
if objB.GetType() is typeof(A<object>) //didn't work, gave false

if objB.GetType() == typeof(A<object>) //didn't work, gave false

if typeof(A<object>).IsAssignableFrom(obj.GetType()) //didn't work, gave false 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:47:53.717

有点误解了这个问题......这就是我在这种情况下会做的事情 - 但请注意，下面的示例只能工作 1 级深度。如果您认为或知道其他对象将从 B 派生，则循环直到 BaseType 为对象并使用当前类型名称。或者，您可以密封 B 使其无法派生。

```
 public class A<T>
    {

    }

    public class X
    {

    }

    public class B : A<X>
    {

    }

    void Test()
    {
        B obj = new B();

        if(b.GetType().BaseType.Name == "A`1")
        {
            Consosle.WriteLine(true);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:48:36.337

这是有问题的；`IsAssignableFrom`除非您已经知道，否则任何测试都不会在那里工作`X`。您必须执行以下操作：

```
static bool IsA(Type type) {
    do {
        type = type.BaseType;
        if(type.IsGenericType && type.GetGenericTypeDefinition() == typeof(A<>))
           return true;
    } while(type != null && type != typeof(object));
    return false;
} 
```

或者也得到`T`：

```
static bool IsA(Type type, out Type t)
{
    do
    {
        type = type.BaseType;
        if (type.IsGenericType && type.GetGenericTypeDefinition() == typeof(A<>))
        {
            t = type.GetGenericArguments()[0];
            return true;
        }
    } while (type != null && type != typeof(object));
    t = null;
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:05:18.423

哦，这对你来说是一些纯粹的邪恶……利用`dynamic`劫持反射；这里的关键是它`dynamic`内置了一些基于类型的缓存，所以它不会每次都做繁重的工作（每种类型只有一次）：

```
static void Main()
{
    Console.WriteLine(IsA("abc"));   // False
    Console.WriteLine(IsA(new B())); // True
    Console.WriteLine(IsA(123));     // False
    Console.WriteLine(IsA(new D())); // True - where D : B
}
public static bool IsA(object o)
{
    return (bool)EvilOnlyUseDynamicToCallThis((dynamic)o);
}

private static bool EvilOnlyUseDynamicToCallThis(object o)
{
    return false;
}
private static bool EvilOnlyUseDynamicToCallThis<T>(A<T> a)
{
    return true;
} 
```

# magento - 有没有办法在 Magento 中发送内部电子邮件？

> ID：15248980
> 
> 赞同：0
> 
> 时间：2013-03-06T13:43:51.577
> 
> 标签：magento, magento-1.7

我需要在 Magento 中发送内部电子邮件，即管理员用户给管理员用户。这是因为我们正在运行一个小型客户服务团队。

我还需要通知管理员订单失败等，如果可能的话，我希望这直接进入内部收件箱？

如果可能的话，我将不胜感激任何关于如何使用 Magento 做到这一点的扩展或教程。

谢谢是提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:46:01.483

是的，您可以在 magento 中进行阅读本教程[http://www.excellencemagentoblog.com/magento-advanced-transactional-email-templates](http://www.excellencemagentoblog.com/magento-advanced-transactional-email-templates)对于失败的订单，您可以使用 magento cron 检查失败的订单，并在成功通知后添加一个标志表示已检查此订单并已发送通知，因此希望将其用于下一次 cron 运行。

问候，

# cocos2d-iphone - 当我点击 AdView 时，CCMenuItem 响应

> ID：15248984
> 
> 赞同：0
> 
> 时间：2013-03-06T13:44:02.540
> 
> 标签：cocos2d-iphone, kobold2d, ccmenuitem, ccmenu

我正在使用 kobold2d v2.1.0 并根据 Google 的说明将 AdMob 中介 SDK 添加到我的项目中。

我创建`AdViewController`并将其视图添加到`rootViewController.view`.

AdViewController.m：

```
-(void)viewDidLoad
{
    [super viewDidLoad];

    // Initialize the banner at the bottom of the screen.
    CGPoint origin = CGPointMake(0.0,
                     self.view.frame.size.height -
                     CGSizeFromGADAdSize(kGADAdSizeBanner).height);

    // Use predefined GADAdSize constants to define the GADBannerView.
    self.adBanner = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner
                                               origin:origin];

    // before compiling.
    self.adBanner.adUnitID = AD_UNIT_ID;
    self.adBanner.delegate = self;
    [self.adBanner setRootViewController:self];
    [self.view addSubview:self.adBanner];
    self.adBanner.center =
    CGPointMake(self.view.center.x, self.adBanner.center.y);
    [self.adBanner loadRequest:[self createRequest]];
} 
```

AppDelegete.m

```
-(void) initializationComplete
{
    adViewController = [[AdViewController alloc] init];
    [self.rootViewController.view addSubview:adViewController.view];
}

-(id) alternateView
{
    // we want to be a dummy view the self.view to which we add the glView plus all other UIKit views
    KKAppDelegate* appDelegate = (KKAppDelegate*)[UIApplication sharedApplication].delegate;

    // add a dummy UIView to the view controller, which in turn will have the glView and later other UIKit views added to it
    CGRect bounds = [appDelegate.window bounds];
    UIView* dummyView = [[UIView alloc] initWithFrame:bounds];

    [dummyView addSubview:[CCDirector sharedDirector].view];

    return dummyView;
} 
```

当我在显示广告之前点击广告区域时，远程定位`CCMenuItem`被按下，就像我点击 一样`CCMenuItem`。

请看这个

![图片](../Images/657e3374d70fd192bd622919ab3a0978.png)

我认为这与[这个问题有关](https://stackoverflow.com/questions/14805334/ccmenu-responds-to-touches-when-touched-elsewhere)，但我不知道如何解决。

请让我知道如何防止`CCMenuItem`响应远程位置的点击。

对不起，我英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:27:46.077

我通过更改 CCMenu.m 中的 -(CCMenuItem *) itemForTouch: (UITouch *) touch 方法解决了这个问题。

```
-(CCMenuItem *) itemForTouch: (UITouch *) touch
{
    //CGPoint touchLocation = [touch locationInView: [touch view]];
    /*changed*/ CGPoint touchLocation = [touch locationInView: [CCDirector sharedDirector].view];
    touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];

    .......

} 
```

之前更改 [touch view] 是 AdView，所以 CCMenu 得到了错误的坐标。

我指的是[这个问题](https://stackoverflow.com/questions/2457380/uiscrollview-and-cocos2d)。

# html - 如何使横幅居中并保持边距？

> ID：15248985
> 
> 赞同：2
> 
> 时间：2013-03-06T13:44:04.097
> 
> 标签：html, css

这个横幅居中，但我仍然想要左边的边距。我希望它在重新调整窗口大小后缩进，以便在较低分辨率和手机上看起来更好。

```
<div id="banner">
   <center>
      <a target="banner" href="index.html" >
        <img src="images/banner.jpg" border="0" alt="GamerZone Banner">
      </a>
   </center>
</div> 
```

我也想使用 css 而不是 html center。谢谢。自从我一周前刚开始学习 HTML 以来，我不知道该怎么做。你能告诉我要尝试什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:56:40.943

您可以将填充添加到容器中，例如

```
#banner{
     padding:0 20px;
}
#banner img{
     display:block;
     margin:0 auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:49:51.317

**CSS：**

```
#banner{
    width: 500px;
    height: 300px;
    margin:auto;
    text-align:center; /*centers horizontally*/
    line-height:300px; /*same as height and for centering vertically*/
}

<div id="banner">
 <a target="banner" href="index.html" title="some">
  <img src="images/banner.jpg" border="0" alt="GamerZone Banner">
 </a>
</div> 
```

希望这有效。**检查这个jsfiddle：http:** [//jsfiddle.net/ACuKe/1/](http://jsfiddle.net/ACuKe/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T13:53:36.697

只需给出这种风格即可达到您的要求，

```
div#banner
{
  margin:0 auto;
  height: 100px;    //your own height
  width: 100px;    //your own width
} 
```

无论屏幕分辨率如何，这将使您的 div 始终处于中心位置。看[这里](http://jsbin.com/ofikaq/1/edit)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:12:00.807

```
<div id="banner" style="text-align:center; margin:0 auto;">
<a target="banner" href="index.html" style="display:block; text-indent:30px;"><img src="images/banner.jpg" border="0" alt="GamerZone Banner"></a></div> 
```

将元素的边距属性设置为“0 auto”（“margin-top:0; margin-right:auto; margin:bottom:0; margin-left:auto;”的简写）加上“text-align:center” .

然后你可以给元素一个固定的“文本缩进”（用于单行内容）或一个固定的“左边距”。

# java - 如何将数据从一个活动传递到当前可见/活动活动？这是一个共同的好模式吗？

> ID：15248988
> 
> 赞同：1
> 
> 时间：2013-03-06T13:44:19.327
> 
> 标签：java, android, android-asynctask

我想实现通用的 AsyncTasks 工厂，以免每次要运行异步操作时都编写大量重复代码。但是我有一个问题。

所以我想在 GlobalActivity 中定义这个工厂类，每个想要使用该 AsyncTasks 工厂的 Activity 都应该子类化，但是我需要在从 GlobalActivity 继承的每个活动 Activity 中使用 doInBackground 方法的结果。我的想法是在该类中定义一些方法 updateCurrentActivity() ，每个子类都必须覆盖该方法并对 doInBackground 结果进行一些操作（例如显示它）。但是如何处理这个结果我不知道。例如这里是工厂 onPostExecute 定义：

```
protected void onPostExecute(HashMap<String, Object> result)
    {  
        currentActivityData = result;
                   //How to pass that result to the current Active
                   //activity which is overriding this method?
        updateCurrentActivity();
    } 
```

创建这样的工厂是否是一个共同的好主意。或者最佳实践是`new AsyncTask...`每次我想使用 AsyncTask 时都编写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:29:11.333

您可以创建扩展 AsyncTask 的 MyTask 类，并从您想要执行任务的活动的构造函数中传递一个处理程序，例如

```
final Handler mHandler = new Handler() { 

  public void handleMessage(Message msg) 
  { 
       //get your data here
       int something = msg.arg1; 
  } 
}; 

public void myMethodInsideActivity{
    new MyTask(this, mHandler).execute();
} 
```

并像这样从您的任务的 pre、progressUpdate 或 post 中调用它

```
Message msg = new Message();
msg.arg1 = 1;
actHandler.sendMessage(msg); 
```

这样，您只有一个任务类和多个实例，每个实例都通过处理程序与其活动相关联

# yii - 全新 Phundament 安装后迁移期间出现致命错误

> ID：15248995
> 
> 赞同：1
> 
> 时间：2013-03-06T13:44:40.357
> 
> 标签：yii, phundament

第一次安装 Phundament 时，我被要求应用 12 次迁移

```
Total 12 new migrations to be applied:
rights: m110402_195158_init
p3widgets: m110518_000000_init
p3media: m110719_000000_init
user: m110805_153437_installYiiUser
user: m110810_162301_userTimestampFix
rights: m111013_235001_p3items
p3widgets: m111028_000000_meta
p3widgets: m120309_021733_translation
p3pages: m120312_182502_init
p3pages: m121011_160518_fk_delete_cascade
p3media: m121011_170518_fk_delete_cascade
p3widgets: m121011_180518_fk_delete_cascade 
```

我回答“是”并获得了这个错误：

```
Fatal error: Call to undefined function mb_strpos() in {myPathToP3}vendor/yiiext/migrate-command/EMigrateCommand.php on line 456 
```

这对我的安装状态意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:41:51.960

迁移未成功运行。您应该安装/启用[PHP mbstring 扩展](http://www.php.net/manual/en/mbstring.installation.php)，然后尝试再次运行迁移。

# magento-1.7 - 尝试使用 CSV 导入产品时在我的控制台中出现以下错误

> ID：15248997
> 
> 赞同：0
> 
> 时间：2013-03-06T13:44:43.130
> 
> 标签：magento-1.7

> **致命错误：在第****390**行的**/home/magentosite/public_html/store/app/code/core/Mage/ImportExport/Model/Import/Entity/Product.php**中的非对象上调用成员函数 getName()

 **我在 Magento 1.7.0.2 中使用 Magento 核心导入功能

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T22:50:48.970

您必须先加载产品

```
$mageProduct = Mage::getModel('catalog/product')->loadByAttribute('sku',$SKU); 
```

谢谢**

# javascript - 单击后更改图像

> ID：15248998
> 
> 赞同：0
> 
> 时间：2013-03-06T13:44:43.850
> 
> 标签：javascript, arrays, image, html, onclick

我无法创建简单的画廊照片。单击小图像后，我需要为主图像重新加载图像。

## 画廊.js

```
imgArray = [  
  '../images/1.jpg',
  '../images/2.jpg',
  '../images/3.jpg',
  '../images/4.jpg',
  '../images/5.jpg',
  '../images/5.jpg'
];

function changeImage(nameOfImage){        
  document.getElementById('mainImage').src = imgArray[nameOfImage.id];
} 
```

* * *

## html

```
<div align="center" class="mainImageDiv">
  <img id="mainImage" src="images/action/1.jpg" alt="1.jpg, 206kB" title="1" height="600" width="500">
</div>

<a href="#" id="1" onClick="changeImage(this)"><img src="images/action/min1.jpg" alt="min1.jpg, 18kB" title="min1" height="120" width="100" /></a>
<a href="#" id="2" onClick="changeImage(this)"><img src="images/action/min2.jpg" alt="min2.jpg, 18kB" title="min2" height="120" width="100" /></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:07:31.500

像这样的东西是你需要的代码：

[http://jsfiddle.net/M2BSu/](http://jsfiddle.net/M2BSu/)

```
var imgArray = [  
 'http://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/Brain_human_sagittal_section.svg/295px-Brain_human_sagittal_section.svg.png',
 'http://upload.wikimedia.org/wikipedia/commons/thumb/7/79/Solanum_muricatum_Flower_and_Fruit.jpg/220px-Solanum_muricatum_Flower_and_Fruit.jpg'
];

var counter = 0;
document.getElementById('my_button').onclick = function () {  
    document.getElementById('mainImage').src = imgArray[counter % imgArray.length]; 
    counter += 1;
} 
```

**编辑**看来我误解了这个问题。正如人们评论的那样，我猜错误是您的 id 不是有效的数组索引。您可以改用真实对象，如下所示：

```
<a href="#" id="a_full_name" onClick="changeImage(this)">

var images = {
    'a_full_name': 'path to image',
    'another_img_id': 'path to this image'
};

function changeImage(anchor_object){   ... } // what you are passing is not the name of the image 
```

这样你的代码就可以工作了。数组在 JavaScript 中不是很可靠（因为它们不是真正的数组）

**编辑**：一旦发现问题，我就会为您的问题提供这个简单的解决方案。一如既往，越简单越好。不要读取任何数组或任何东西，只需从小图像的路径中获取大图像的路径。您不必在 html 和数组的同时进行任何烦人的维护。您只需要在缩略图和大图之间保持一致的命名。

**html** 你真的不需要锚元素。如果您想要指针鼠标，请更改 CSS

```
<img onClick="changeImage(this)" src="images/action/min1.jpg" title="min1" /> 
```

**JavaScript**

```
function changeImage(image_clicked){   // you pass the image object     
    var min_path = image_clicked.src;

    // adapt the path to point to the big image, in this case get rid of the "min"
    var big_path = min_path.replace("min", "");

    document.getElementById('mainImage').src = big_path;
} 
```

把事情简单化。