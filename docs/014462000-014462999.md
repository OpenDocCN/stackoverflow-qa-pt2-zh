# StackOverflow 问答 14462000-14462999

# opencv - 移动设备中的指纹匹配（OpenCV 编码，Android 部署）

> ID：14462005
> 
> 赞同：1
> 
> 时间：2013-01-22T15:24:52.980
> 
> 标签：opencv

我打算在图像处理领域做我的主流项目。我的项目的目标是使用户能够在移动设备中使用指纹安全。它涉及：

1.  通过手机读取用户指纹。
2.  将获得的指纹图像与数据库中可用的指纹图像进行匹配。

我有兴趣在 OpenCV 中编写我的项目并在 Android 中进行部署。我需要澄清以下几点：

1.  这个项目可行吗？
2.  OpenCV 适合这个项目吗？（考虑使用 Matlab，但它不具备 Android 的可移植性）
3.  Eclipse还是Visual Studio？哪个会更合适（考虑在Android中部署）

我是初学者，需要学习OpenCV，所以请指导我如何开始我的项目（有哪些工具，参考书籍以及要使用的IDE，SDK？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:51:10.963

1.  是的，当然，但并不容易。
2.  开放式简历。很多东西： http: [//opencv.org/](http://opencv.org/)
3.  Eclipse，考虑到您将在 Android 上部署它。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T15:21:43.887

您可以轻松地使用 OpenCV。它并不难。

学习 Android 部分 - 对我来说是具有挑战性的部分。如果您想使用这种手指识别 - 您可以通过从前置摄像头捕获图像或也使用您的背部来实现（假设您将手指放在相机镜头上，同时拿着手机）。

现在使用这个功能来解锁你的手机——对我来说是一项艰巨的工作。它涉及更多的android。

首先-我建议您使用手指识别算法构建应用程序。它应该可以识别您的手指，并且可能会采取诸如显示您的名字之类的操作。

如果你能做到这一点.. 剩下的都是 android，以及你如何使用 android 来让它工作。

我希望这会有所帮助，并为您提供一个非常高水平的答案。

# java - TrayIcon显示消息在mac中弹出一个窗口

> ID：14462006
> 
> 赞同：0
> 
> 时间：2013-01-22T15:24:53.820
> 
> 标签：java, macos, notifications, system-tray

我正在创建一个创建 java 应用程序，其中我在系统托盘/通知栏中显示一个 Ballon 消息。它在窗口中正确显示气球消息（气球自动在几秒钟内消失）但在 Mac 机器上它显示一个窗口（必须由用户故意关闭）。如何在 Mac 上达到同样的效果？
**JAVA代码：**

```
trayIcon.displayMessage("Caption", "text", MessageType); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:52:23.627

您应该寻求与 Mac 上的通知中心集成，而不是使用旧的弹出式样式。您可以使用第三方 API 之一与[Growl](http://growl.info/)集成以允许您执行此操作。

# json - 在 Dart 中使用 JsonObject 库解析 JSON 列表

> ID：14462007
> 
> 赞同：3
> 
> 时间：2013-01-22T15:24:54.493
> 
> 标签：json, dart

我试图在 JsonOject 库的帮助下解析一些 JSON。我收到以下异常：

```
 Exception: type 'List' is not a subtype of type 'Map' of 'value'. 
```

我的代码：

```
class MyList extends JsonObject implements List { 
  MyList();

  factory MyList.fromString(String jsonString) {
    return new JsonObject.fromJsonString(jsonString, new MyList());
  }
}

class MyResult extends JsonObject { 
  num Dis;
  int Flag;
  MyProduct Obj;
}

class MyProduct extends JsonObject { 
  int ID;
  String Title;
} 
```

我这样称呼它：

```
var testJson = """
  [{"Dis":1111.1,"Flag":0,"Obj":{"ID":1,"Title":"Volvo 140"}},
  {"Dis":2222.2,"Flag":0,"Obj":{"ID":2,"Title":"Volvo 240"}}]
""";
MyList list = new MyList.fromString(testJson);
//I want to be able to do something like this.
//print(list[0].Obj.Title); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T15:48:12.683

我已经更新了我的[JsonObject github repo](https://github.com/chrisbu/dartwatch-JsonObject)来修复这个错误。我还添加了一个[通过单元测试](https://github.com/chrisbu/dartwatch-JsonObject/blob/master/test/test_list.dart)来重现这一点。

您需要运行`pub update`以获取最新版本的库。

以下代码现在可以工作：

```
import 'package:json_object/json_object.dart';

void main() {
  var testJson = """
      [{"Dis":1111.1,"Flag":0,"Obj":{"ID":1,"Title":"Volvo 140"}},
      {"Dis":2222.2,"Flag":0,"Obj":{"ID":2,"Title":"Volvo 240"}}]""";
  MyList list = new MyList.fromString(testJson);
  //I want to be able to do something like this.
  print(list[0].Obj.Title);  // <- now prints "Volvo 140"
}

class MyList extends JsonObject implements List { 
  MyList();

  factory MyList.fromString(String jsonString) {
    return new JsonObject.fromJsonString(jsonString, new MyList());
  }
} 
```

# ruby - 为什么 mocha 没有在我的 Rails 3 集成测试中存根此方法？

> ID：14462008
> 
> 赞同：0
> 
> 时间：2013-01-22T15:24:57.160
> 
> 标签：ruby, ruby-on-rails-3, minitest, ruby-mocha

我有以下内容：

```
 setup do
    Capybara.current_driver = Capybara.javascript_driver
    @project.user = @user
    @project.save
    Project.any_instance.stubs(:price_all)
  end 
```

然而我有一个测试失败，因为 Project.price_all 方法正在运行：

```
/Users/me/code/rails/myapp/app/models/project.rb:178:in `price_all' 
```

在我升级到 Capybara 2 和最新版本的 capybara-webkit 之前，这一直正常工作。

为什么该方法仍在运行？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:20:16.467

当您说“该`Project.price_all`方法正在运行”时，这是一个错字，还是`price_all`真的是一个类方法？如果它确实是一个类方法，你会想要使用`Project.stubs(:price_all)`而不是包含`any_instance`，所以存根直接在`Project`类上，而不是`Project`. 如果这不是您的问题，我不确定根据您提供的代码示例还有什么建议。

# angularjs - 角度分组过滤器

> ID：14462015
> 
> 赞同：12
> 
> 时间：2013-01-22T15:25:22.947
> 
> 标签：angularjs

在[ng-repeat 中的 angular.js 条件标记](https://stackoverflow.com/questions/14123307/angular-js-conditional-markup-in-ng-repeat)之后，我尝试编写一个自定义过滤器来进行分组。我遇到了关于对象身份和被监视更改的模型的问题，但我认为我终于解决了，因为控制台中不再出现错误。

原来我错了，因为现在当我尝试将它与其他过滤器（用于分页）结合起来时

```
<div ng-repeat="r in blueprints | orderBy:sortPty | startFrom:currentPage*pageSize | limitTo:pageSize | group:3">
      <div ng-repeat="b in r"> 
```

我得到了可怕的“达到了 10 个 $digest() 迭代。中止！” 再次出现错误信息。

这是我的组过滤器：

```
filter('group', function() {
  return function(input, size) {
    if (input.grouped === true) {
      return input;
    }
  var result=[];
  var temp = [];
  for (var i = 0 ; i < input.length ; i++) {
      temp.push(input[i]);
      if (i % size === 2) {
          result.push(temp);
          temp = [];
      }
  }
  if (temp.length > 0) {
      result.push(temp);
  }
  angular.copy(result, input);
  input.grouped = true;
  return input;
}; 
}). 
```

请注意输入中的使用`angular.copy`和`.grouped`标记，但无济于事:(我知道*例如* [“10 $digest() 迭代已达到。中止！”由于使用 angularjs 进行过滤，](https://stackoverflow.com/questions/13277542/10-digest-iterations-reached-aborting-due-to-filter-using-angularjs)但显然我没有得到它。

此外，我猜分组逻辑有点幼稚，但那是另一回事了。任何帮助将不胜感激，因为这让我发疯。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T16:22:10.853

看起来真正的问题是您正在更改输入，而不是创建新变量并从过滤器中输出。这将触发任何正在监视您输入的变量的监视。

确实没有理由在其中添加“grouped == true”检查，因为您应该完全控制自己的过滤器。但是，如果这对您的应用程序来说是必须的，那么您需要将“grouped == true”添加到过滤器的结果中，而不是输入中。

过滤器的工作方式是它们改变输入并返回不同的东西，然后下一个过滤器处理以前的过滤器结果......所以你的“过滤”检查`item in items | filter1 | filter2 | filter3`在 filter1 过滤项目，filter2 过滤 filter1 的结果和filter3 过滤过滤器 2 的结果...如果有意义的话。

这是我刚刚整理的东西。我不确定（还）它是否有效，但它给了你基本的想法。您将在一侧取出一个数组，然后在另一侧吐出一组数组。

```
app.filter('group', function(){
   return function(items, groupSize) {
      var groups = [],
         inner;
      for(var i = 0; i < items.length; i++) {
         if(i % groupSize === 0) {
            inner = [];
            groups.push(inner);
         }
         inner.push(items[i]);
      }
      return groups;
   };
}); 
```

HTML

```
<ul ng-repeat="grouping in items | group:3">
    <li ng-repeat="item in grouping">{{item}}</li>
</ul> 
```

* * *

**编辑**

也许在代码中看到所有这些过滤器会更好，但它看起来会导致问题，因为它经常需要在 $digest 上重新评估。所以我建议你做这样的事情：

```
app.controller('MyCtrl', function($scope, $filter) {
   $scope.blueprints = [ /* your data */ ];
   $scope.currentPage = 0;
   $scope.pageSize = 30;
   $scope.groupSize = 3;
   $scope.sortPty = 'stuff';

   //load our filters
   var orderBy = $filter('orderBy'),
       startFrom = $filter('startFrom'),
       limitTo = $filter('limitTo'),
       group = $filter('group'); //from the filter above

   //a method to apply the filters.
   function updateBlueprintDisplay(blueprints) {
        var result = orderBy(blueprints, $scope.sortPty);
        result = startForm(result, $scope.currentPage * $scope.pageSize);
        result = limitTo(result, $scope.pageSize);
        result = group(result, 3);
        $scope.blueprintDisplay = result;
   }

   //apply them to the initial value.
   updateBlueprintDisplay();

   //watch for changes.
   $scope.$watch('blueprints', updateBlueprintDisplay);
}); 
```

然后在您的标记中：

```
<ul ng-repeat="grouping in blueprintDisplay">
   <li ng-repeat="item in grouping">{{item}}</li>
</ul> 
```

...我确定那里有错别字，但这是基本思想。

* * *

**再次编辑：**我知道您已经接受了这个答案，但是我最近了解到还有另一种方法，您可能会更喜欢：

```
<div ng-repeat="item in groupedItems = (items | group:3 | filter1 | filter2)">
    <div ng-repeat="subitem in items.subitems">
    {{subitem}}
    </div>
</div> 
```

这将在您的 $scope 上创建一个名为 $scope.groupedItems 的新属性，它应该有效地缓存您过滤和分组的结果。

试一试，让我知道它是否适合你。如果没有，我想其他答案可能会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-19T20:24:02.280

> 无论如何，我仍然看到 $digest 错误，这令人费解：plnkr.co/edit/tHm8uYfjn8EJk3cG31DP – blesh 1 月 22 日 17:21

这是使用下划线的 memoize 功能修复 $digest 错误的[plunker ：http:](http://plnkr.co/edit/mwslK3gYi23v2uRlXVg9?p=preview) [//underscorejs.org/#memoize](http://underscorejs.org/#memoize)。

问题是 Angular 在每次迭代期间尝试将过滤后的集合作为不同的集合处理。要确保过滤器的返回始终返回相同的对象，请使用 memoize。

[http://en.wikipedia.org/wiki/Memoization](http://en.wikipedia.org/wiki/Memoization)

下划线分组的另一个示例：[Angular 过滤器有效，但导致“达到 10 个 $digest 迭代”](https://stackoverflow.com/questions/16507040/angular-filter-works-but-causes-10-digest-iterations-reached)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-30T10:22:22.367

您可以使用 angular.filter 模块的 groupBy 过滤器[，](https://github.com/a8m/angular-filter)并执行以下操作：
用法：`(key, value) in collection | groupBy: 'property'`或 `'propperty.nested'`
**JS：**

```
$scope.players = [
  {name: 'Gene', team: 'alpha'},
  {name: 'George', team: 'beta'},
  {name: 'Steve', team: 'gamma'},
  {name: 'Paula', team: 'beta'},
  {name: 'Scruath', team: 'gamma'}
]; 
```

**HTML：**

```
<ul ng-repeat="(key, value) in players | groupBy: 'team'" >
  Group name: {{ key }}
  <li ng-repeat="player in value">
    player: {{ player.name }} 
  </li>
</ul>
<!-- result:
  Group name: alpha
    * player: Gene
  Group name: beta
    * player: George
    * player: Paula
  Group name: gamma
    * player: Steve
    * player: Scruath 
```

# css - 在 Chrome 中启用透视 CSS 转换？

> ID：14462021
> 
> 赞同：4
> 
> 时间：2013-01-22T15:25:38.587
> 
> 标签：css, 3d, cross-browser, transform, webkit-transform

当我将这种风格与#board（灰色）一起使用时

```
-webkit-transform: perspective(500px) rotateX(45deg);
-moz-transform: perspective(500px) rotateX(45deg); 
```

它在 Firefox 中的外观：
![点我看图（对不起，我是新用户。）](../Images/d2396c2141c506be45e9f22297ce2297.png)

但在铬：
![点我看图片](../Images/83bb423a78befbe6c047974a519bdac3.png)

我们需要的是 Firefox 中的那个。那么我们应该怎么做才能在 chrome 中拥有相同的外观呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T17:42:38.423

通常，最好将 放置`perspective`在包含元素上，例如 the`body`或 wrapping `div`。

演示：http: [//jsfiddle.net/amustill/Qh8YV/](http://jsfiddle.net/amustill/Qh8YV/)

```
body {
    -webkit-perspective: 500px;
       -moz-perspective: 500px;
    }

div {
    ...
    -webkit-transform: rotateX(45deg);
       -moz-transform: rotateX(45deg);
    } 
```

# mysql - 保存后 ActiveRecord 的 `id` == nil

> ID：14462023
> 
> 赞同：2
> 
> 时间：2013-01-22T15:25:45.023
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

`id`ActiveRecord 的 仍然`nil`在 之后真的很尴尬`save`。

我在控制台中的命令如下：

```
irb(main):003:0> c = Comment.new
=> #<Comment id: nil, commentable_id: nil, commentable_type: nil, user_id: nil, content: "", del_flg: 0, created_at: nil>
irb(main):004:0> c.commentable = Moment.last
  Moment Load (0.2ms)  SELECT `moments`.* FROM `moments` ORDER BY `moments`.`id` DESC LIMIT 1
=> #<Moment id: 119583...
irb(main):005:0> c.user = User.find(119)
  User Load (0.2ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 119 LIMIT 1
=> #<User id: 119...
irb(main):006:0> c.save
   (0.2ms)  BEGIN
  SQL (0.6ms)  INSERT INTO `comments` (`commentable_id`, `commentable_type`, `content`, `created_at`, `del_flg`, `id`, `user_id`) VALUES (119583, 'Moment', '', '2013-01-22 15:19:05', 0, NULL, 119)
   (0.1ms)  COMMIT
=> true
irb(main):007:0> c
=> #<Comment id: nil, commentable_id: 119583, commentable_type: "Moment", user_id: 119, content: "", del_flg: 0, created_at: "2013-01-22 15:19:05">
irb(main):008:0> c.id
=> nil 
```

这就是我定义我的记录的方式：

```
class Comment < ActiveRecord::Base
  belongs_to :user
  belongs_to :commentable, polymorphic: true
end 
```

起初，我以为是我的 MySQL 数据库`id`中没有设置`PRIMARY KEY`，所以我检查了它：

```
 mysql> describe comments;
 +------------------+--------------+------+-----+---------+----------------+
 | Field            | Type         | Null | Key | Default | Extra          |
 +------------------+--------------+------+-----+---------+----------------+
 | id               | int(11)      | NO   | PRI | NULL    | auto_increment |
 | commentable_id   | int(11)      | NO   | MUL | NULL    |                |
 | commentable_type | varchar(100) | NO   | MUL | NULL    |                |
 | user_id          | int(11)      | NO   |     | NULL    |                |
 | content          | text         | NO   |     | NULL    |                |
 | del_flg          | tinyint(4)   | NO   |     | 0       |                |
 | created_at       | datetime     | NO   |     | NULL    |                |
 +------------------+--------------+------+-----+---------+----------------+ 
```

任何人都知道这将如何发生？提前致谢。

**编辑**：

只需意识到 SQL 的解释`c.save`是`INSERT INTO `comments` (`commentable_id`, `commentable_type`, `content`, `created_at`, `del_flg`, `id`, `user_id`) VALUES (119583, 'Moment', '', '2013-01-22 15:19:05', 0, NULL, 119)`

好吧，这条记录实际上是插入到数据库中的。

```
mysql> select * from comments where commentable_id = 119583 and commentable_type = "Moment"
-> ;
+-------+----------------+------------------+---------+---------+---------+---------    ------------+
| id    | commentable_id | commentable_type | user_id | content | del_flg |     created_at          |
+-------+----------------+------------------+---------+---------+---------+---------------------+
| 26582 |         119583 | Moment           |     119 |         |       0 | 2013-01-22 14:58:22 |
| 26583 |         119583 | Moment           |     119 |         |       0 | 2013-01-22 15:09:11 |
| 26585 |         119583 | Moment           |     119 |         |       0 | 2013-01-22 15:19:05 |
| 26586 |         119583 | Moment           |     119 |         |       0 | 2013-01-22 15:38:14 |
+-------+----------------+------------------+---------+---------+---------+---------------------+ 
```

更多测试：

```
irb(main):009:0> c.persisted?
=> true
irb(main):010:0> c.errors
=> #<ActiveModel::Errors:0x00000004761958 @base=#<Comment id: nil, commentable_id: 119583, commentable_type: "Moment", user_id: 119, content: "", del_flg: 0, created_at: "2013-01-22 16:52:59">, @messages={}> 
```

# ios - “Apple LLVM 编译器 4.1 - 语言”选项列表丢失

> ID：14462028
> 
> 赞同：3
> 
> 时间：2013-01-22T15:25:57.333
> 
> 标签：ios, xcode, cmake, llvm

我正在尝试更改 Xcode 项目配置中的“C++ 标准库”选项，但选项列表不存在！缺少选项列表“Apple LLVM 编译器 4.1 - 语言”。我已经用 CMake 制作了这个项目，但上次我做了（使用 Xcode 4.3）这并没有发生。如何取回选项列表？任何想法？

# cordova - 将.mbtiles 文件读入leaflet.js

> ID：14462029
> 
> 赞同：2
> 
> 时间：2013-01-22T15:25:58.383
> 
> 标签：cordova, leaflet

我们正在构建 phonegap 应用程序，我们想使用 Leaflet.js v 0.5 放置地图我们尝试通过 SQLitePlugin 读取 .mbtiles 文件

[https://github.com/chbrody/Cordova-SQLitePlugin](https://github.com/chbrody/Cordova-SQLitePlugin)

> 函数 buildMap() { var db = window.sqlitePlugin.openDatabase("file:///sdcard/one_tile.mbtiles"); document.body.removeChild(msg);
> 
> ```
>  var map = new L.Map('map', {
>       center: new L.LatLng(40.6681, -111.9364),
>       zoom: 11
>   });
> 
>   var lyr = new L.TileLayer.MBTiles('', {maxZoom: 14, scheme: 'tms'}, db);
> 
>   map.addLayer(lyr);
> } 
> ```

但是 sqlitePlugin.openDatabase 没有找到 .mbtiles 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-03T06:43:15.647

您可以查看 florianfournier 的 Cordova 插件，该插件可以开箱即用地读取 MBTiles 瓷砖：[https ://github.com/ffournier/cordova-plugin-mbtiles](https://github.com/ffournier/cordova-plugin-mbtiles)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:01:59.503

我有同样的问题 。你检查过这个吗？[http://geospatialscott.blogspot.com/2012/04/phonegap-leaflet-tilemill-offline.html](http://geospatialscott.blogspot.com/2012/04/phonegap-leaflet-tilemill-offline.html)

# wpf - 根据继承的属性设置依赖属性的默认值

> ID：14462031
> 
> 赞同：2
> 
> 时间：2013-01-22T15:26:03.557
> 
> 标签：wpf, inheritance, custom-controls, dependency-properties, default-value

我正在创建一个自定义控件库，并从一个简单的圆形边缘分隔符开始，但有些事情我似乎无法做到。

我有一个 CornerRadius 依赖属性，如果 CornerRadius 未定义，我希望 CornerRadius 等于 Height / 2，否则取用户值。我在构造函数中初始化高度，使其永远不会为空

我知道如何定义依赖属性的默认值，但我不知道如何，或者是否可以根据控件的高度设置 CornerRadius 值。到目前为止，我已经搜索了一段时间。

Xaml 文件

```
<!-- Rounded Separator -->
<Style TargetType="{x:Type local:RoundedSeparator}" BasedOn="{StaticResource {x:Type Separator}}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:RoundedSeparator}">

                <!-- Mask for round edges -->
                <Grid Height="{TemplateBinding Height}"
                      Width="{TemplateBinding Width}">
                    <Border Name="PART_TitleBarMask" 
                            CornerRadius="{TemplateBinding CornerRadius}"
                            Background="White"/>

                    <Grid>
                        <Grid.OpacityMask>
                            <VisualBrush Visual="{Binding ElementName=PART_TitleBarMask}"/>
                        </Grid.OpacityMask>

                        <!-- Separator -->
                        <Rectangle Fill="{TemplateBinding Background}"/>
                    </Grid>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

.cs 文件

```
public class RoundedSeparator : Separator
{
    static RoundedSeparator()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(RoundedSeparator), new FrameworkPropertyMetadata(typeof(RoundedSeparator)));
    }

    public RoundedSeparator()
    {
        this.Height = 100;
        this.Background = Brushes.Black;
    }

    public static readonly DependencyProperty CornerRadiusProperty = 
        DependencyProperty.Register("CornerRadius", 
                                    typeof(CornerRadius), 
                                    typeof(RoundedSeparator), 
                                    new UIPropertyMetadata(default(CornerRadius));

    public CornerRadius CornerRadius
    {
        get { return (CornerRadius)GetValue(CornerRadiusProperty); }
        set { SetValue(CornerRadiusProperty, value); }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T15:59:33.787

尝试 ：

```
 static RoundedSeparator()
  {
       DefaultStyleKeyProperty.OverrideMetadata(typeof(RoundedSeparator), new FrameworkPropertyMetadata(typeof(RoundedSeparator)));

      RoundedSeparator.HeightProperty.OverrideMetadata
               (typeof(RoundedSeparator), new FrameworkPropertyMetadata(new PropertyChangedCallback(HeightPropertyChanged)));
  }

  private static void HeightPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
  {
         // Do what you will .... :)
  } 
```

# asp.net - ASP.NET HttpContext.RewritePath 创建新线程

> ID：14462033
> 
> 赞同：1
> 
> 时间：2013-01-22T15:26:15.403
> 
> 标签：asp.net, iis-7, httpmodule

将服务器上的 Framework 从 4.0 更新到 4.5 后，RewritePath 开始以不同的方式工作。它曾经在同一个线程处理请求，但现在它总是创建一个新的（通过日志 MangedThreadId 检查）。我在 4.5 ASP.NET 功能列表中找不到任何提及。有什么想法吗 ？

**编辑：** 它用于从 ulr 获取参数，即 host/param/Handler.ashx，并将其设置为静态线程的上下文。

# c# - 我的 commonLib.dll 如何使用引用应用程序 app.config？

> ID：14462034
> 
> 赞同：0
> 
> 时间：2013-01-22T15:26:18.970
> 
> 标签：c#

好的，所以到目前为止我有 2 个类，我想放入我的通用 dll、记录器和数据库。我将它们从我当前的项目移动到一个新的类库项目并更改它们的命名空间等等。我遇到的问题是我希望使用我的应用程序的应用程序配置（或我想引用我的 commonlib.dll 的任何应用程序），但我不知道如何使用引用项目 app.config。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:37:22.880

ConfigurationManager的[OpenExeConfiguration() 方法](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager_methods.aspx)是您的票证。其中一个将获取可执行文件的路径，允许您打开指定应用程序的应用程序配置（甚至是不同的应用程序；您可以使用此技术在使用 Process.Start() 启动另一个应用程序之前更改它的配置） . 另一个将为指定的用户级别（所有用户、当前漫游用户、当前漫游和本地用户）打开当前应用程序的 app.config（即使您的库被多个应用程序使用）。通常，在处理实际的 app.config 时，您需要适用于所有用户的那个；每个用户的配置存储在每个用户的 AppData 文件夹中。

另外，最后一件事；除非您的库有自己的配置文件，否则 ConfigurationManager 属性（如 AppSettings）将根据当前可执行文件的 app.config 进行填充。所以它可以像使用这些属性一样简单。请记住，这些属性是只读的，并且仅在程序启动时加载一次，因此如果您在程序执行期间对配置进行更改并希望立即生效，最好显式加载/保存配置文件。

# wcf - .NET WCF - 服务自动重新启动时，IP 端点上已经有一个侦听器

> ID：14462039
> 
> 赞同：1
> 
> 时间：2013-01-22T15:26:30.257
> 
> 标签：wcf, windows-services

我有一个 WCF 服务，它部署为服务器上的 Windows 服务。它配置为在恢复时自动重新启动（在 Services.msc 实用程序的服务的“属性”对话框中）。但是，当服务自动重启时，它会抛出以下异常：

> System.ServiceModel.AddressAlreadyInUseException：IP 端点 0.0.0.0:8093 上已经有一个侦听器。确保您没有尝试在应用程序中多次使用此端点，并且没有其他应用程序在此端点上侦听。

它仍然启动，但处于故障状态。当我手动重新启动它时，我没有收到此错误（尽管当我在故障状态下重新启动后尝试停止服务时它会发出警告）。

就好像服务重启得太快了，服务管理器认为还有另一个服务正在侦听该端口。我将服务配置为在 5 分钟后重新启动。我还在命令行中执行了**netstat -a -n -o**以验证该端口上的唯一服务是我的。

代理尝试按如下方式中止服务：

```
public byte[] ConvertDocument(ConversionType conversionType, byte[] documentData)
    {
        byte[] result = null;
        IDocumentConverter server = this.channelFactory.CreateChannel();
        try
        {
            ((ICommunicationObject)server).Open();
            result = server.ConvertDocument(conversionType, documentData);
            ((ICommunicationObject)server).Close();
        }
        finally
        {
            if (((ICommunicationObject)server).State != CommunicationState.Closed)
                ((ICommunicationObject)server).Abort();
        }
        return result;
    } 
```

有没有其他人遇到过这种问题？

**更新：**

即使将 InstanceContextMode 更改为 PerSession 和 Single，我仍然遇到此问题。

我想知道客户端是否在端口上保持连接处于活动状态，所以当服务重新启动时，它认为端口已经在使用中。

我的客户端的实现方式是否会导致 AddressAlreadyInUseException？比如吞下 OperationContract 中的 CommunicationException，或者在每次调用 OperationContract 时创建并打开通道。

# sql - 你如何得到两个case语句的乘积

> ID：14462041
> 
> 赞同：-3
> 
> 时间：2013-01-22T15:26:32.403
> 
> 标签：sql, case

我正在尝试使用以下代码组合案例语句并不断遇到错误。

```
SELECT     
        dbo.COL_TBL_WAGES.[Job Group], 
        SUM(CASE
                 WHEN COL_V_COST.EMP_TNG_RL_CD = 'ST' 
                  THEN ([CountOfEMP_TNG_STT_DT] * 
                      (WHEN IsNumeric([TBL_VCOURSE.Length]) 
                        THEN TBL_VCOURSE ELSE 0 END) AS ST_Hours 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:33:51.140

看起来您想要这个，因为您`CASE`的原始表达式中有两个表达式：

```
SELECT  dbo.COL_TBL_WAGES.[Job Group], 
    SUM(CASE 
            WHEN COL_V_COST.EMP_TNG_RL_CD = 'ST' 
            THEN [CountOfEMP_TNG_STT_DT] 
            ELSE 0 END
        * CASE 
            WHEN IsNumeric([TBL_VCOURSE.Length]) = 1 
            THEN TBL_VCOURSE 
            ELSE 0 END
        ) AS ST_Hours 
```

编辑，根据您的评论，您的查询将与此类似：

```
SELECT dbo.COL_TBL_WAGES.[Job Group], 
    SUM(CASE 
            WHEN COL_V_COST.EMP_TNG_RL_CD = 'ST' 
            THEN [CountOfEMP_TNG_STT_DT] ELSE 0 END 
        * CASE 
            WHEN IsNumeric([COL_TBL_VCOURSE].[Length]) = 1 
            THEN COL_TBL_VCOURSE.[LENGTH]
            ELSE 0 END) AS ST_Hours, 
    SUM(CASE 
            WHEN COL_V_COST.EMP_TNG_RL_CD = 'ST' 
            THEN [CountOfEMP_TNG_STT_DT]*CAST([2011 Total] AS FLOAT) ELSE 0 END 
            * CASE 
                WHEN IsNumeric([COL_TBL_VCOURSE].[LENGTH]) = 1 
                THEN CAST([COL_TBL_VCOURSE].[LENGTH] AS FLOAT) ELSE 0 END) AS ST_Cost 
```

# android - 从 android 活动中调用 sencha 控制器功能

> ID：14462043
> 
> 赞同：1
> 
> 时间：2013-01-22T15:26:39.867
> 
> 标签：android, sencha-touch, sencha-touch-2, android-webview, sencha-touch-2.1

```
webView.loadUrl("javascript:myFunction();"); 
```

不适合我。

有没有其他方法可以调用`MyController.js`从 Android 活动中编写的 Sencha 函数？

我没有使用 PhoneGap - 相反，我直接从 Web 视图运行 Sencha 应用程序。

有没有办法直接从 android 活动中调用 sencha 控制器功能？像这样的东西：

```
this.getApplication().getController('ControllerName').doSomething(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:33:28.847

是否为您的 启用了 JavaScript `WebView`？

尝试 `WebSettings webSettings = webView.getSettings(); webSettings.setJavaScriptEnabled(true);`

# javascript - Jquery 缩短代码

> ID：14462046
> 
> 赞同：2
> 
> 时间：2013-01-22T15:26:42.627
> 
> 标签：javascript, jquery

我之前发布过类似的问题，但我再次发现自己愚蠢地复制和粘贴代码。

无论如何我可以结合以下内容，我确定有..请帮助..我正在学习过程中。

看到我有以下内容：

```
$(document).on('blur', 'input.email', function() {
    validate_Email_Input(this);
});

$(document).on('blur', 'input.id', function() {
    validate_Id_Input(this);
});

$(document).on('blur', 'input.pass', function() {
    validate_Pass_Input(this);
});

$(document).on('blur', 'input.town', function() {
    validate_Town_Input(this);
});

$(document).on('blur', 'input.relation', function() {
    validate_Relation_Input(this);
});

$(document).on('blur', 'input.contact', function() {
    validate_Relation_Input(this);
}); 
```

对于所有这些我有单独的功能，这里有一个例子：

```
function validate_Email_Input(el) {
    var $this = $(el);
    var input_groups = $this.parent();
    var isValid = true;
    $.each(input_groups , function(i){
        var inpg = input_groups[i];
        email_values = $.map($(inpg).children('input'), function(e,i){
            return $(e).val();
        }).join('');
        isValid = isValid && validate_Email(email_values, input_groups.parent().parent().parent());
    });
    return isValid;
} 
```

我真的很想学习如何编写高效的代码，非常感谢任何帮助...

我不知道这是否有帮助。但我想要做的是验证所有内容并为每个特定字段弹出消息。这是我在 jQuery 中的第一个非常大的项目，我想我不妨向你展示我正在做的所有事情：http: [//jsfiddle.net/dawidvdh/36BLm/](http://jsfiddle.net/dawidvdh/36BLm/)

有效身份证件样本：85 0929 5266086

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:32:12.483

您可以创建一个对象，将每个字段选择器映射到其验证器函数，并从单个事件处理程序中循环：

```
$(document).on('blur', function(e) {
    var validators = {
        'input.email' : validate_Email_Input,
        'input.id' : validate_Id_Input
        // etc
    };
    for(var field in validators) {
        if($(e.target).is(field)) {
            validators['field'](e.target);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:34:29.633

这应该与您的第一个代码块完全相同：

```
$(document)
.on('blur', 'input.email', validate_Email_Input)
.on('blur', 'input.id', validate_Id_Input)
.on('blur', 'input.pass', validate_Pass_Input)
.on('blur', 'input.town', validate_Town_Input)
.on('blur', 'input.relation', validate_Relation_Input)
.on('blur', 'input.contact', validate_Relation_Input); 
```

**编辑：**评论者伊恩是对的。为了使其工作，您需要将第二个代码块更改为：

```
function validate_Email_Input() {
    var $this = $(this); // This line has changed
    var input_groups = $this.parent();
    var isValid = true;
    $.each(input_groups , function(i){
        var inpg = input_groups[i];
        email_values = $.map($(inpg).children('input'), function(e,i){
            return $(e).val();
        }).join('');
        isValid = isValid && validate_Email(email_values, input_groups.parent().parent().parent());
    });
    return isValid;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:38:38.430

要重构它，您可以创建一个模型：

```
var myInputsModel = [
    { a: 'input.email' }, // you can store all the information you want in the model...
    { a: 'input.id' },
    etc...
]; 
```

那么你只有一个功能适用于所有这些：

```
$.each(myInputsModel, function(i, v) {
    $(document).on('blur', v.a, function() {
        // One function for all of them.
        mySingleFunction(this);
    });
});

function mySingleFunction(el) {
    var $this = $(el);
    var input_groups = $this.parent();
    var isValid = true;
    $.each(input_groups , function(i){
        var inpg = input_groups[i];
        email_values = $.map($(inpg).children('input'), function(e,i){
            return $(e).val();
        }).join('');
        isValid = isValid && validate_Email(email_values, input_groups.parent().parent().parent());
    });
    return isValid;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T15:46:29.910

```
$("#my_form").submit(function(e){
    var valid = 1;
    var error_msg = "";
    //validate fields here, if fails set valid to 0 and error_msg to whatever
    if(!valid){
      e.preventDefault();
      alert(error_msg);
    }
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-22T15:37:35.387

这是一种方法。首先为所有 html 元素提供一个公共类，并为值类型使用数据属性

```
<input type="text" class="validate" data-value-type="town" /> 
```

示例 jQuery + javascript

```
// Make an object matching strings to functions
var functionMap = {
  email: emailFunction(),
  id: idFunction(),
  pass: passFunction(),
  town: townFunction,
  relation: relationFunction(),
  contact: contactFunction
}
function validate(element){
  // see if the attribute being checked against has a matching entry in functionMap
  if(functionMap[element.data('value-type')] !== undefined){
    // call the function if it's there
    functionMap[element.data('value-type')];
  }
}

$(document).on('blur', '.validate', function(){
  validate($(this));
} 
```

# c - C中动态增长的堆栈

> ID：14462047
> 
> 赞同：1
> 
> 时间：2013-01-22T15:26:43.923
> 
> 标签：c, segmentation-fault, stack

我在分配任务时遇到了一些麻烦。我应该实现一个动态增长的堆栈，当它满时它的大小加倍，当它满 1/4 时它的大小减半。由于我是一个完全的 C 初学者并且不熟悉指针，因此我查看了一些示例，这就是我想出的代码。

它实际上在 gcc 中编译而没有警告，但是当我尝试运行它时会产生“分段错误”。我发现这可能与指针损坏有关，但我没有看到任何错误，如果有人可以为我指出，我会很高兴。

干杯

```
# ifndef STACK_H
# define STACK_H
# include "stdlib.h"

typedef struct stack {
  int *stack;
  int used;
  int size;
} stack;

stack* stck_construct() {
    stack *stck;
    stck->stack = (int *)malloc(10 * sizeof(int));
    stck->used = 0;
    stck->size = 10;
    return stck;
}

void   stck_destruct(stack *stck) {
    stck->stack = 0;
    stck->used = stck->size = 0;
    free(stck);
}

int    stck_push(stack *stck, int val) {
  if (stck->used == stck->size) {
    stck->size *= 2;
    stck->stack = (int *)realloc(stck->stack, stck->size * sizeof(int));
  }
  stck->stack[stck->used] = val;
  stck->used++;
  return 1;
}

int    stck_pop(stack *stck, int *val) {
  *val = stck->stack[stck->used];
  free(stck->stack);
  stck->used--;
  if (stck->used <= (stck->size)/4) {
    if (stck->size <=40) stck->size = 10;
    else stck->size /= 2;
    stck->stack = (int *)realloc(stck->stack, stck->size * sizeof(int));
  }

  return 1;
}

int main(){

    stack* test;

    test=stck_construct();

    int i; int out;
    for (i =1; i<=10; i++)
        stck_push(test, i);

    for (i =1; i<=10; i++)  {
        stck_pop(test,&out);
        printf("%i\n", out);
    }
    stck_destruct(test);
    return 0;
}

# endif 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:29:19.303

在`stack* stck_construct()`您`stck->`没有`stck`先创建的情况下使用。事实上，它只是一个无处引用的指针。这肯定会产生分段错误。您将 a`stack*`与实际混淆了`stack`（或者您可能只是忘记`malloc`了整件事 :)

注意：还有一些我没有提到的其他错误。如果您有兴趣，请参阅 David 和 Alexey 的评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:41:03.733

错误注释：

```
stack* stck_construct() {
    // stck is a pointer, you never initialize it to point to an existing object:
    stack *stck;
    // you dereference the invalid pointer with stck->stack:
    stck->stack = (int *)malloc(10 * sizeof(int));
    stck->used = 0;
    stck->size = 10;
    return stck;
}

void   stck_destruct(stack *stck) {
    stck->stack = 0;
    stck->used = stck->size = 0;
    // I thought you were assigning the pointer to the allocated memory to stck->stack,
    // and by now that pointer is 0 as you just did stck->stack = 0;
    free(stck);
}

  if (stck->used == stck->size) {
    stck->size *= 2;
    // if realloc() fails you end up with twice as big stck->size and
    // with stck->stack = NULL
    stck->stack = (int *)realloc(stck->stack, stck->size * sizeof(int));
  }

  // You first store the new element and then advance the index
  stck->stack[stck->used] = val;
  stck->used++;

  // But when you remove it you don't do the two operations in the reverse order:
  *val = stck->stack[stck->used];
  // and for some reason you additionally destroy all data
  free(stck->stack);
  stck->used--;

    // and then you realloc() using the invalid pointer (you just free()'d it!)
    stck->stack = (int *)realloc(stck->stack, stck->size * sizeof(int)); 
```

# c++ - 从非托管 C++ 创建 DLL

> ID：14462049
> 
> 赞同：5
> 
> 时间：2013-01-22T15:26:48.640
> 
> 标签：c++, visual-studio-2010, dll, cmake, unmanaged

我目前有一个用非托管 C++ 编写的控制台应用程序，源代码由一个入口点`main`和一些其他功能组成。我需要从此代码创建一个 DLL，以便我可以在其他项目中使用它，特别是在托管 C++ 中。（另一个问题：我是否必须为此目的编写一个包装类？）

正如我对托管/非托管 C++ 和创建 DLL 几乎一无所知，我遵循[本教程](http://msdn.microsoft.com/en-us/library/ms235636(v=vs.80).aspx)并设法通过仅使用 VS2010（无 CMake）来启动和运行一个简单的 Hello World DLL。

但是，我的这个项目有很多依赖项（例如[Point Cloud Library](http://pointclouds.org/)），因此我通常使用 CMake 生成 Visual Studio 2010 解决方案，然后将其构建为可执行文件，如[PCL 教程](http://pointclouds.org/documentation/tutorials/using_pcl_pcl_config.php#using-pcl-pcl-config)中所述。如何使用 CMake 构建将构建到 DLL 中的 VS2010 项目？

总结一下我的问题：

1.  我有一个需要大量依赖项的非托管 C++ 代码项目。
2.  我想从此代码创建一个可以从托管 C++ 调用的 DLL。

额外信息：Windows 7、Visual Studio 2010 Ultimate、CMake 2.8.10.2

**编辑：** 我使用 CMake 更改了您的线路，并且按预期工作。这是我添加到头文件中的内容，我在正确的轨道上吗？

我的代码.h

```
#ifdef MyLib_EXPORTS
#define API_DECL __declspec( dllexport )
#else 
#define API_DECL __declspec( dllimport )

#include <iostream>
#include <pcl/...>
etc...

API_DECL void myFirstFunction();
API_DECL void mySecondFunction();
#endif 
```

MyCode.cpp：我没有对源文件进行任何更改，我应该做任何更改吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:46:10.620

不幸的是，我无法帮助您处理托管代码部分，但这是您在 CMake 中创建 DLL 的方式：

首先，而不是使用

```
`ADD_EXECUTABLE( YourLib SHARED yourclass.cpp yourclass.h )` 
```

在你的`CMakeLists.txt`，使用

```
`ADD_LIBRARY( YourLib SHARED yourclass.cpp yourclass.h )` 
```

这会将解决方案配置为创建 DLL 而不是可执行文件。

但是，为了能够将此 DLL 用于您的项目，您需要导出要使用的符号。为此，您需要添加`__declspec( dllexport )`到您的类和/或函数声明中。然后构建库将产生两个文件，一个 . `dll`和一个`.lib`。后一个是你在其他项目中使用这个库时需要的所谓的导入库。将`.dll`在运行时需要。

**但是**：当你想使用你的库时，你需要使用`__declspec( dllimport)`（而不是`dllexport`）。为了避免使用两个头文件，通常的方法是使用预处理器。`YourLibrary_EXPORTS` `define`CMake 实际上通过在您的库项目中提供一个来帮助您。

总结一下：

```
#ifndef YOUR_CLASS_H
#define YOUR_CLASS_H

#ifdef YourLib_EXPORTS
#define API_DECL __declspec( dllexport )
#else 
#define API_DECL __declspec( dllimport )
#endif

class APIDECL YourClass  {
   void foo();
   void bar();
};

#endif // YOUR_CLASS_H 
```

编辑：如果您希望能够使用 C 中的那些函数（以及能够使用 C 函数的语言），您应该使用`extern "C" {`

```
extern "C" {
    API_DECL void myFirstFunction();
    API_DECL void mySecondFunction();
} 
```

# c++ - 多态性 - 不确定使用模板的派生类 - 派生函数返回模板类型

> ID：14462056
> 
> 赞同：2
> 
> 时间：2013-01-22T15:27:32.673
> 
> 标签：c++, templates, boost, polymorphism, variant

最近我决定在一个项目中工作，我需要一个对象，它可以是任何数据类型（uint8、unint16、uint32 或 unint64）（我可能想添加这些只是数字，并且只会是+、-、*、/、<<、>>。我查看了 Boost::variant，但是在尝试之后，我一直很沮丧，因为我无法正确检索数据。啊 - 应用访问者？所以我研究了其他方法来模拟这一点。

低于这一点是实验，似乎错误，非常错误：

（我想说我对多态/继承不是太深入，所以提前抱歉）我尝试创建一个基础对象，然后将基础对象设置为派生类 - 派生模板类是我选择的数据类型（uint8、uint16、uint32 或 uint64）之后，我可以简单地检索我之前使用 get() 方法设置的数据：

```
DynamicVariable *a = new TypedDynamicVariable<unsigned int>(12345); 
std::cout << a->get() << std::endl; 
delete a; 
```

或者：

```
DynamicVariable *a = new TypedDynamicVariable<unsigned char>(255);
std::cout << a->get() << std::endl;
delete a; 
```

表示示例：

```
unsigned int  a = 100;
unsigned char b = 20;
std::cout << a + b << std::endl; 
```

导致：错误 C2039：“get”：不是“DynamicVariable”的成员

我收到了 BASE 类中不存在 a->get() 的错误。我在网上搜索找到这段代码（dynamic_cast）：

```
DynamicVariable *a = new TypedDynamicVariable<int>(12345);
TypedDynamicVariable<int>* p = dynamic_cast<TypedDynamicVariable<int>*>(a);
std::cout << p->get() << std::endl; 
```

正如您所看到的，这对我来说： TypedDynamicVariable* *< int >* * 和 dynamic_cast*>(a) （指定它是一个 INT）违背了我想做的全部目的。

下面是我从许多不确定的在线阅读时间中整理出来的课程。它似乎有我的“解决方案”的大致轮廓，但是我知道缺少重要的内容/需要改进 apon，或者实际上多态性毕竟不是我想要的/不能使用。

```
class DynamicVariable
{
    public:
        //constructor & virtual destructor
                 DynamicVariable() {}
        virtual ~DynamicVariable() {}

};

//unique data
template<typename T>
class TypedDynamicVariable : public DynamicVariable
{
    private:
        T _data;

    public:
        //constuctor
        TypedDynamicVariable    (const T& data) : _data(data) { }

        //prototypes
        void    set             (const T& data) { _data = data; }
        T       get             (void)          { return _data; }
}; 
```

如果有人可以帮助我了解上述课程的问题并指导我找到一个可行的解决方案，或者如果它们确实是我真正想要的，请使用 boost::variant 为我指明正确的方向。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:33:08.903

`boost::variant`如果特定类型在编译时是众所周知的，则可以使用（您必须提供列表来实例化它）。并且只有**这些**类型可以存储在变体中。那么您可以使用访问者来处理存储的数据（另请参见`which()`成员函数）。

或者，您可以`boost::any`对包含的数据类型使用无任何限制。

就传统的 OOP 而言，编写自己的变体（几乎）不可能实现：**因为您需要编写具有`get()`不同返回类型的成员（在编译时未知）。**（这在 C++ 中是不可能的）。

并且您当前的包装器（大部分）在多态性方面无用 - 您可以拥有一个指向基类的指针容器，但无法意识到其中存储的内容......所以您无法`get()`从这个存储中取出任何东西/知识存储在其中。你必须提供一些方法来做到这一点。他们必须以某种方式使用 RTTI……所以就性能而言，它远非完美……更好用`boost::variant`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:44:48.353

这

```
DynamicVariable *a = <some initialisation>
std::cout << a->get() << std::endl; 
delete a; 
```

不起作用，因为编译器必须知道如何调用`a->get()`而不知道派生类型`a`实际指向什么。因此，仅考虑属于`a`的声明（静态）类型的那些成员，而`get`不是其中之一。
这是 Boost.Variant 和 Boost.Any 也面临的同样问题。

最后，归结为一件简单的事情：如果您不知道当前存储在`boost::variant<>`//`boost::any`中的值是什么类型`DynamicVariable`，那么您将无法获取该值。
对于 Boost.Variant，您使用 检索值`boost::get<type>(variant)`。对于 Boost.Any，您使用 检索值`boost::any_cast<type>(any)`。因为`DynamicVariable`你可能不得不做类似的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:20:37.633

为了能够`get()`从母类调用`DynamicVariable`，您需要在此处定义此方法，作为虚拟（在您的情况下是纯的）。所以问题是：`get()`方法`DynamicVariable`返回的类型是什么？不要试图寻找模板的技巧，虚方法不能是模板。

我不是 boost::variant 或 boost::any 的忠实拥护者（即使它们有用！），它有时是解决设计问题的一种太简单的方法。

作为替代方案，我真的会考虑您想到的应用程序（我想您的示例已简化）。问自己以下问题：不同的类型是否返回了共同的含义？

*   如果是，那么您也应该考虑对返回的类型进行继承：例如，该方法`get()`返回母类的指针，`GeneralReturnType`而子实现返回派生自的类的指针`GeneralReturnType`。
*   如果不是，那么您不应该`get()`从`DynamicVariable`类中调用：不同的返回类型没有共同的含义，因此该`get()`方法具有不同的含义，具体取决于所`TypedDynamicVariable`考虑的类。因此，要调用该`get()`方法，您应该知道您拥有哪个派生类（也许多态不是您想要的，实际上......）。

# windows - 如何向我的 schtask 命令添加随机时间偏移？

> ID：14462063
> 
> 赞同：1
> 
> 时间：2013-01-22T15:27:48.490
> 
> 标签：windows, batch-file, windows-task-scheduler

我编写了一个简单的自动更新程序，在其中我使用带有 ftp 命令的批处理文件首先下载“版本”文件，并将文本与本地“version.txt”文件进行比较 - 如果版本不同，我继续批处理脚本来下载和安装更新。

那部分很好，但是当我创建任务时（使用 setup.exe 安装程序中分发的另一个批处理文件），因为我需要它来运行我的数百个非技术精通用户 - 我想添加一个随机时间偏移到工作的开始时间，这样我就不会让所有终端在完全相同的时间访问我的服务器进行更新。

SCHTASKS.EXE /CREATE /SC DAILY /ST 10:00 /TN "我的更新任务" /TR "c:\myupdater.bat"

我需要它与 XP 和 Vista+ 一样兼容，但大多数用户群将是 XP。如何设置不同的时间，例如 10:05、10:10、10:00 等加减 10 分钟到 10:00，这样我就不会同时被 200 个客户击中？

另外，是否可以在不显示命令窗口的情况下启动作业？我已经看到使用 vb 脚本和 cmdnow 或某些第三方工具的答案，我不会将其用于兼容性、病毒扫描程序滋扰和下载要求等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:19:40.893

您可以使用它`%random%`来生成您的开始时间。[有一个非常有用的论坛讨论详细](http://ntcoder.com/bab/2008/11/22/how-to-generate-random-numbers-in-a-batch-file/)讨论了如何执行此操作。

要在不弹出 cmd 窗口的情况下运行批处理文件，试试这个（[取自这里](http://www.computerhope.com/issues/ch000932.htm)）

```
start /min myfile.bat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:02:59.240

我发现这篇关于如何编辑 %random% 以返回更可接受的数字的帖子。它可能对你有帮助[如何在 BATCH 脚本中使用随机？](https://stackoverflow.com/questions/5777400/how-to-use-random-in-batch-script).

# jsf - 如何获取 j_security_check 的用户名作为 bean 属性

> ID：14462064
> 
> 赞同：3
> 
> 时间：2013-01-22T15:27:50.987
> 
> 标签：jsf, cdi, j-security-check

在我的托管 bean 中，我希望获取`j_security_check`LDAP 服务器的用户名作为 bean 属性。

本质上，我想从中提取用户名

```
<input type="text" name="j_username" /> 
```

一旦提交并全部验证并在以下情况下使用它：

```
@Override
public String getName() {
    return getId();
} 
```

我将如何使用

```
FacesContext.getExternalContext().getUserPrincipal(); 
```

获取用户名作为 bean 属性？

如果您需要知道在做什么，这是完整的支持 bean。我曾经手动让用户在文本框中输入用户名，我现在想停止它并让它自动提取用户名。

```
//@Named("user")
@SessionScoped
public class UserBean implements Serializable, Principal {

    private static final long serialVersionUID = 1L;
    @NotNull(message = "The username can not be blank")
    @Size(min = 6, max = 12, message = "Please enter a valid username (6-12 characters)")
//@Pattern(regexp = "[a-zA-Z0-9_]", message = "Please enter a valid username consiting of only characters that are from the alphabet or are numeric ")
//@Pattern(regexp = "(a-z)(A-Z)(0-9))", message = "Please enter a valid username consiting of only characters that are from the alphabet or are numeric ")
    private String id;

    public String getId() {
        return id;
    }

    public void setId(String newValue) {
        id = newValue;
    }
    private String fileText;

    @NotNull(message = "You must select a file to upload")
    public String getFileText() {
        return fileText;
    }

    public void setFileText(String fileText) {
        this.fileText = fileText;
    }

    /**
     * public void getName(HttpServletRequest req, HttpServletResponse res)
     * throws ServletException, java.io.IOException { id = req.getRemoteUser();
     * }
     */
    @Override
    public String getName() {
        return getId();
    }
    /*
     * @Override
     *
     * public String request.remoteUser() { return getId();
     *
     * }
     * .
     */
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:57:58.253

初始化它在`@PostConstruct`.

```
private String username;

@PostConstruct
public void init() {
    username = FacesContext.getCurrentInstance().getExternalContext().getRemoteUser();
} 
```

或者，如果您只在处理表单提交时需要它，只需在 action 方法中获取即可。

请注意，`getRemoteUser()`基本上返回与`getUserPrincipal().getName()`.

* * *

**与具体问题无关**：这种 bean 不应该是会话范围的，而是视图或会话范围的。此外，它不应该实现`Principal`接口。这完全没有意义。

# c# - Windows.Forms Application.Run() 中无法追踪的异常

> ID：14462072
> 
> 赞同：3
> 
> 时间：2013-01-22T15:28:12.443
> 
> 标签：c#, winforms, debugging, visual-studio-2008, exception

我有一个正在尝试调试的旧 Windows.Forms 应用程序。

有时运行几分钟后会产生 ArithmeticException 或 OverflowException。源代码必须在代码库中的某个位置，但堆栈跟踪始终指向该行`Application.Run(mainForm);`

StackTrace 没有用，因为它只显示 Windows.Forms 本机调用：

```
 bei System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
   bei System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)
   bei System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   bei System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   bei System.Windows.Forms.Application.Run(Form mainForm)
   bei Program.Main() in C:\xy\Program.cs:Zeile 102. 
```

`System.Windows.Forms.Application.ThreadException`为了找到异常的来源，我在和 to中添加了一个异常处理程序 `System.AppDomain.CurrentDomain.UnhandledException`。

我已经尝试启用和禁用捕获异常 `System.Windows.Forms.Application.SetUnhandledExceptionMode();`

ThreadException 事件处理程序永远不会被调用。UnhandledException 事件处理程序只报告我在 Visual Studio 中看到的相同异常。

在 Visual Studio 中，我在抛出异常时启用了中断执行： ![在此处输入图像描述](../Images/b266539a73cadef344af6cb6e261a2e9.png) 这没有任何效果。

我该怎么做才能找到有问题的代码行？

* * *

编辑：完整的异常细节：

![在此处输入图像描述](../Images/6db8e9d0161de13b39098abee55d3fc1.png)

* * *

如果我在没有附加任何调试器的情况下启动进程，并在附加调试器之前等待它崩溃，我会收到以下异常：

```
Unbehandelte Ausnahme bei 0x0c9f9e1b in program.exe: 0xC0000090: Floating-point invalid operation. 
```

调试然后导致这个反汇编

```
0C9F9E12  add         esi,10h 
0C9F9E15  push        0CA1FD48h 
0C9F9E1A  push        eax  
0C9F9E1B  fmul        qword ptr ds:[0CA202E0h] 
0C9F9E21  fstp        dword ptr [esp+18h] 
```

我无法解析这个，但我怀疑这仅仅是 DispatchMessageW 函数

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T19:00:34.587

这里的诊断是你的进程中有遗留的非托管代码，从你发布的调用堆栈判断，这可能是一个旧的 ActiveX 控件。

这些异常是由浮点处理器 FPU 生成的硬件异常。可以将其置于通过引发异常来报告问题的操作模式，例如您看到的 STATUS_FLOAT_OVERFLOW 和 STATUS_FLOAT_INVALID_OPERATION 异常。而不是生成无穷大、NaN 或非规范化。FMUL 指令很容易产生这样的异常。

更改 FPU 操作模式的软件从根本上与托管代码不兼容。这要求始终屏蔽 FPU 异常。屏蔽这些异常是完全正常的，所有现代软件都会这样做。然而，在上个世纪，这些异常被认为是诊断浮点计算失控的资产。特别是，旧的 Borland 运行时库揭露了这些异常。

好吧，如果您还没有收到该消息，这将是一个相当糟糕的消息。首先要看的是尝试诊断此代码引发浮点异常的原因。不良数据往往是最常见的原因。其次，您*确实*必须对更改的 FPU 控制寄存器做一些事情，这也很容易导致托管代码失败。特别是 WPF 代码中的一个问题，它喜欢使用 NaN。

使用调试器很容易找到这样的代码。使用 Debug + Windows + Registers 调试器窗口。右键单击窗口并勾选“浮点”选项。CTRL 寄存器的值至关重要，它应该`027F`在托管程序中。单步执行程序，起初粗略，当寄存器更改时，您发现了麻烦制造者。如果是 64 位程序，还要勾选“SSE”，MXCSR 寄存器应该是`00001F80`.

您不能使用托管代码直接重置 FPU 控制寄存器，但您可以使用一个技巧。CLR 在处理异常时重置它。因此，一种*可能的*解决方法是在导致控制寄存器值更改的语句之后故意抛出并捕获异常：

```
 try {  throw new Exception("Resetting FPU control register, please ignore"); }
        catch { } 
```

在 msvcrt.dll 中调用 _controlfp() 函数是一种更直接的方法。但是，当然，由于两者的副作用，现在该库正在以一种不是为它设计的模式运行，它当然不会期望遇到 Nan 和 Infinity 值。从长远来看，您确实需要考虑淘汰旧组件或库。

# java - 处理不同的字符串日期格式

> ID：14462073
> 
> 赞同：1
> 
> 时间：2013-01-22T15:28:14.693
> 
> 标签：java

在 java 中，我有一个日期为 dd-mm-yyyy 格式的字符串：

```
String value = "31-01-1989"; 
```

现在，我希望另一个变量中的值是 ddmmyyyy 格式：

```
String value = "31011989"; 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T15:29:51.430

在这种情况下，您可以简单地删除破折号

```
value = value.replace("-", ""); 
```

或者

```
value = value.replaceAll("-", ""); 
```

但根据我的测试，第一个版本要快一点。所以我个人更喜欢仅在第一个参数是正则表达式时使用 replaceAll。

请注意，尽管名称有混淆，但会`String.replace`替换与第一个 arg 匹配的所有子字符串，就像这样`String.replaceAll`做一样。主要区别在于`String.replace`将第一个 arg 视为字符串文字并将`String.replaceAll`其用作正则表达式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T15:30:40.147

简单的解决方案：

```
String value1 = "31-01-1989";
String value2 = value1.replace("-", ""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T15:29:20.893

查看[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)以获得一般解决方案。写一个`SimpleDateFormat`来[解析](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29)第一个日期并在另一个中使用[格式](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html#format%28java.util.Date,%20java.lang.StringBuffer,%20java.text.FieldPosition%29)来获​​得预期的输出。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T15:29:47.167

您可以使用`String.replace(Charseq, Charseq)`删除分隔符。

```
String value = "31-01-1989";
String value2 = value.replace("-", "");
System.out.println(value2); 
```

# grails - Grails/GORM 没有级联保存整个对象层次结构

> ID：14462075
> 
> 赞同：1
> 
> 时间：2013-01-22T15:28:18.167
> 
> 标签：grails, grails-orm, cascade

我无法将保存级联到我的对象层次结构中。下面是我的对象层次结构的代码。

```
class Entity {
    static hasMany = [attributes: Attribute]
}

class Attribute extends ValuePossessor {
    static belongsTo = Entity
}

abstract class ValuePossessor {
    def valueService
    Value value
    void setValue(val) {
        this.value = valueService.Create(val)
        this.value.possessor = this
    }
}

abstract class Value {
    static belongsTo = [possessor: ValuePossessor]
}

class StringValue extends Value {
    String value
} 
```

valueService 只是一个带有大 switch 语句的服务，它创建正确的值类型（字符串、布尔值、int 等）。

```
Entity e = new Entity()
Attribute attr = new Attribute()
attr.setValue(1)
e.addToAttributes(attr)
e.save() 
```

上面的代码正确地创建了所有对象，但是未能保存值对象。实体和属性已保存，但值未保存。我是否缺少一些需要一直级联到值对象的标识符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T21:03:03.613

想通了。显然，grails 动态设置器中有一些魔力。我将`setValue(val)`方法更改为`set(val)`并开始工作。经验教训：不要覆盖 grails 的动态添加方法，因为它们是用魔法、仙尘和独角兽尿液构建的。

# jasper-reports - 别名输入控制标签

> ID：14462076
> 
> 赞同：0
> 
> 时间：2013-01-22T15:28:27.747
> 
> 标签：jasper-reports, ireport

我目前正在开发一个使用 SQL 通配符 '%' 和`iLike`函数的输入控件，因为我的输入控件使用 SQL 代码拉回。现在，当我想在我的`Title`乐队上显示参数时，我希望它显示我选择的单词来代替我用作参数的 '%'。`$P{param_name}`当它等于我定义的东西时，有什么方法可以别名为其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:34:32.347

假设您当前的标题栏包含一个带有 Text Field Expression 的文本字段`$P{param_name}`。

为了过滤掉通配符，您可以将文本字段表达式更改为类似`"%".equals($P{param_name}) ? "All Values" : ("Filtered for '" + $P{param_name} +"'")`.

如果`$P{param_name}`包含`%`，则显示*All Values*，否则显示*Filtered for '{selected value}'*。

# html-email - 如何使用 unscrubscribe 功能发送 HTML 电子邮件

> ID：14462088
> 
> 赞同：-1
> 
> 时间：2013-01-22T15:29:03.523
> 
> 标签：html-email, unsubscribe

我的网站能够向人们发送电子邮件。现在我接下来想做的是能够向订阅我的邮件的人发送 HTML 电子邮件，就像我发送任何其他普通电子邮件一样，如果他们想取消订阅，有一个链接可以这样做。我已经阅读了邮件黑猩猩等，但我只想像发送普通电子邮件一样发送 HTML 电子邮件。请任何指导都会有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:37:25.273

使用简单的 HTML，您无法发送电子邮件，您需要 PHP 或任何其他服务器端编程语言

使用 PHP 发送 HTML 电子邮件的示例：

```
<?php
$to = "PUT_RECIPIENT_EMAIL_ADDRESS_HERE";
$subject = "PUT_SUBJECT_HERE";
$mail_body = '<html>
<body bgcolor="#573A28" topmargin="25">
Put HTML content here with variables from PHP if you like
Variable display Example: ' . $subject . ' 
</body>
</html>';
$headers  = "From:youremail@yoursite.comrn";
$headers .= "Content-type: text/htmlrn";
mail($to, $subject, $mail_body, $headers);
?> 
```

要使用电子邮件订阅，您需要在数据库中存储一个表来存储订阅您的时事通讯的电子邮件，如果用户点击“取消订阅”，您必须执行 MySQL 查询以将其从数据库中删除：

表：subscribed_users（电子邮件）

将新用户添加到时事通讯的 SQL 代码：

```
INSERT INTO subscribed_users VALUES 'put_email_to_subscribe_here' 
```

从时事通讯中删除用户的 SQL 代码：

```
DELETE FROM subscribed_users WHERE email = 'put_email_to_unsubscribe_here' 
```

当然，如果你不知道如何使用 php 或 mysql，你需要学习这两种语言才能订阅时事通讯。

如果你不想学习 php 和 mysql 你可以看这个页面，有一些脚本可以帮助你，但我认为你必须至少学习 php 才能使用它们：

[http://www.phpkode.com/projects/category/php-newsletter/](http://www.phpkode.com/projects/category/php-newsletter/)

# jquery - colorbox js - 图像加载期间不显示活动监视器

> ID：14462091
> 
> 赞同：0
> 
> 时间：2013-01-22T15:29:16.353
> 
> 标签：jquery, colorbox

Colorbox js 加载新图像时不显示活动指示器。这在过去工作得很好。其他人有这个问题吗？无法弄清楚是什么导致了问题。我的代码直接来自 Jack Moore 的网站 (v1.3.20.1)

活动监视器应显示“loading.gif”，直到加载下一个图像。当我查看 ColorBox 演示时，它确实有效。

什么会关闭这个显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:34:37.500

仔细检查您的文件路径，并在线发布演示。就像您说的那样，如果它在我的网站上而不是在您的网站上有效，那么任何人都很难回答您的问题，因为问题是特定于您的部署的。

# flask - 查询 Jinja2 模板中的单个字段

> ID：14462092
> 
> 赞同：0
> 
> 时间：2013-01-22T15:29:17.940
> 
> 标签：flask, jinja2, flask-sqlalchemy

我正在开发一个应用程序，用户可以在其中输入工作请求，然后进入并搜索请求。我遇到的问题是构建请求摘要屏幕。基本上，它列出了搜索查询的结果。模板中的代码片段如下：

```
 {% for req in workrequests %}
            {{ req.id }} {{ req.customer }} {{ req.dateEntered }} {{ req.Contact }}
        {% endfor %} 
```

这就是我挂断电话的地方。req.customer 和 req.Contact 字段只是客户和联系人数据库的键。我想显示客户姓名和联系人姓名。我认为以下查询应该可以解决问题：

```
 Customer.query.filter_by(req.customer).one()
        Contact.query.filter_by(req.Contact).one() 
```

问题是，这将返回整个记录。我只是在这两个表中的名称字段之后放入我的模板中，这就是问题所在。我不知道如何继续

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:00:52.977

`Customer.query`是 的简写形式`db.session.query(Customer)`。使用后者查询特定列：

```
db.session.query(Customer.name).filter_by(id=req.customer).one() 
```

尽管我认为您真正想要的是一次获取所有数据的单个查询。就像是：

```
db.session.query(
    WorkRequest.id,
    WorkRequest.dateEntered,
    Customer.name,
    Contact.name
).join(
    Customer,
    Contact
).filter(...) 
```

# php - PHP proc_open - 如果进程需要输入，则退出

> ID：14462096
> 
> 赞同：0
> 
> 时间：2013-01-22T15:29:23.417
> 
> 标签：php, proc-open

所以 - 我`proc_open()`用来执行诸如 , 等程序`ssh`来`rsync`执行`scp`备份任务。

但是，在某些情况下，这些过程可能会变得交互并需要输入，例如当 SSH 的公钥认证失败时，它会要求输入密码。这是一个主要问题，因为让备份作业挂起是不可能的，更糟糕​​的是，不会产生错误。

如何完全摆脱正在运行的进程中的交互性？如果该过程突然需要输入，我想立即退出并生成错误。通用超时不是解决方案，因为备份过程在正常操作中可能需要很长时间。我真的需要一个通用的解决方案来解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:48:51.343

只需将一个空文件作为标准输入传递：

```
 $r = proc_open('cat', [fopen('/dev/null', 'rb')], $p);
 proc_close($r) 
```

该脚本在几毫秒后结束。

# c++ - 找不到 Qi JSON 解析器中缺少解析属性的原因

> ID：14462098
> 
> 赞同：2
> 
> 时间：2013-01-22T15:29:28.597
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

**问题**：

1.  找不到 Qi JSON 解析器中缺少解析属性的原因。解析器成功解析输入字符串，但输出数据结构 json_object 仅包含第一个属性（attribute_a）但缺少其他属性（attribute_b 和 attribute_c）

**软件**: 使用 Boost 1.52 提升灵气

**平台**：Windows 7（64 位）

**编译器**(Visual Studio 2010)

**要求**：

1.  帮助找出解析器没有找到所有属性的原因。

2.  查看调试输出，我发现属性没有被放入单个 std::vector 对象中。我使用在[http://www.json.org/](http://www.json.org/)上找到的 JSON 语法作为参考。我希望看到的“ *members* ”的输出是一个 std::vector ，其中包含为该 JSON 对象找到的所有 json_pair 对象的列表。

**限制**：

1.  解析器不支持 Unicode 字符串。

**代码：**

```
 #define BOOST_SPIRIT_DEBUG
    #include <boost/spirit/include/qi.hpp>
    #include <boost/spirit/include/phoenix_core.hpp>
    #include <boost/spirit/include/phoenix_container.hpp>
    #include <boost/spirit/include/phoenix_statement.hpp>
    #include <boost/spirit/include/phoenix_operator.hpp>
    #include <boost/fusion/include/adapt_struct.hpp>
    #include <boost/fusion/include/boost_tuple.hpp>
    #include <boost/variant/recursive_variant.hpp>

    #include <boost/make_shared.hpp>

    #include <vector>

    namespace signal_processing {
      namespace parsing {

        struct json_object;
        struct json_array;

        typedef boost::variant < std::string,
            double,
            boost::recursive_wrapper<json_object>,
            boost::recursive_wrapper<json_array>,
            bool > json_value;

        typedef boost::tuple < std::string, json_value> json_pair;

        struct json_members
        {
            std::vector < json_pair > items;
        };

        struct json_object
        {
            std::vector < json_members > children;
        };

        struct json_array
        {
            std::vector < json_value > list;
        };

        using boost::spirit::qi::bool_;
        using boost::spirit::qi::char_;
        using boost::spirit::qi::double_;
        using boost::spirit::qi::eol;
        using boost::spirit::qi::float_;
        using boost::spirit::qi::int_;
        using boost::spirit::qi::lexeme;
        using boost::spirit::qi::lit;   
        using boost::spirit::qi::space;
        using boost::spirit::qi::_val;
        using boost::spirit::qi::_1;

        template <typename Iterator, typename Skipper>
        struct json_grammar : boost::spirit::qi::grammar < Iterator, json_object(), Skipper>
        {
            json_grammar() : json_grammar::base_type(object)
            {
                object = '{' > *members > '}';

                pair = string > ':' > value;

                members = pair > *( ',' > members );

                element_list = '[' > *elements > ']';

                elements = value > *( ',' > elements );

                value = string |
                    number |
                    object |
                    element_list |
                    bool_ |
                    lit("null");

                char const* exclude = " ();\"\n\r\t";
                string = '"'
                    > +lexeme[char_ - char_(exclude)]
                    > '"';

                // Return: double
                number = double_ |
                    float_ |
                    int_;

                BOOST_SPIRIT_DEBUG_NODE(object);
                BOOST_SPIRIT_DEBUG_NODE(pair);
                BOOST_SPIRIT_DEBUG_NODE(members);
                BOOST_SPIRIT_DEBUG_NODE(element_list);
                BOOST_SPIRIT_DEBUG_NODE(elements);
                BOOST_SPIRIT_DEBUG_NODE(value);
                BOOST_SPIRIT_DEBUG_NODE(string);
                BOOST_SPIRIT_DEBUG_NODE(number);
            }

            boost::spirit::qi::rule < Iterator, json_object(), Skipper > object;
            boost::spirit::qi::rule < Iterator, json_pair(), Skipper > pair;
            boost::spirit::qi::rule < Iterator, json_members(), Skipper > members;
            boost::spirit::qi::rule < Iterator, json_array(), Skipper > element_list;
            boost::spirit::qi::rule < Iterator, json_array(), Skipper > elements;
            boost::spirit::qi::rule < Iterator, json_value(), Skipper > value;
            boost::spirit::qi::rule < Iterator, std::string(), Skipper > string;
            boost::spirit::qi::rule < Iterator, double(), Skipper > number;
        };
      }
    }

    BOOST_FUSION_ADAPT_STRUCT(
        signal_processing::parsing::json_object,
        (std::vector < signal_processing::parsing::json_members >, children)
    )

    BOOST_FUSION_ADAPT_STRUCT(
        signal_processing::parsing::json_members,
        (std::vector < signal_processing::parsing::json_pair >, items)
    )

    BOOST_FUSION_ADAPT_STRUCT(
        signal_processing::parsing::json_array,
        (std::vector < signal_processing::parsing::json_value >, list)
    )

    void parse ( std::string const& file )
    {
        typedef signal_processing::parsing::json_grammar < std::string::const_iterator, boost::spirit::ascii::space_type > configuration_grammar;
        configuration_grammar input; // Input grammar
        signal_processing::parsing::json_object parsed_data;

        std::string::const_iterator iter = file.begin();
        std::string::const_iterator end = file.end();
        bool r = boost::spirit::qi::phrase_parse ( iter, end, input, boost::spirit::ascii::space, parsed_data );

        if ( ! r || iter != end)
        {
            // Report the next 30 characters
            std::string::const_iterator some = iter + 30;

            if ( some > end )
            {
                some = end;
            }

            std::string context(iter, some);
            std::cout << "-------------------------\n";
            std::cout << "Parsing failed\n";
            std::cout << "stopped at: \": " << context << "...\"\n";
            std::cout << "-------------------------\n";
        }
    }

    int main(int,char**)
    {
        std::string input ( "{\r\n       \"Event\": {\r\n                \"attribute_a\": 0.0002,\r\n                \"attribute_b\": 2e-005,\r\n                \"attribute_c\": 0.022\r\n        }\r\n}" );

        parse ( input );

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:40:48.823

**解析器**

一般来说，您的第一个问题的答案是可能有几种方法可以实现您想要的。具体来说，我可以向您展示一种似乎可行的方法。

关键是正确设置与给定短语或标记的一个或多个实例匹配的规则的属性类型，方法是确保您声明的实际是容器，而不是具有容器成员的结构.

完成后，您需要编写规则，以便 Qi 知道您正在处理一个容器，并且它应该适当地回填。

首先查看成员规则：您将其作为规则提供：

```
members = pair > *( ',' > members ); 
```

我不相信这本身就足以告诉 Qi 你希望它`json_members`用 s 填充容器`pair`，特别是因为`pair`s 和 a `member`s 没有相同的属性类型。因此，我建议您将规则替换为：

```
members = pair > *( ',' > pair ); 
```

甚至：

```
members = pair % ','; 
```

您需要确定这些规则是否等同于同一件事，但您明白了。

至于`json_members`类型：我更改了您的结构定义以使结构从容器派生，而不是将容器作为结构的属性：

```
struct json_members : std::vector < json_pair > {}; 
```

而且您不需要对结构进行融合。

在我看来，这是您的代码的工作版本：

```
#define BOOST_SPIRIT_DEBUG
    #include <boost/spirit/include/qi.hpp>
    #include <boost/spirit/include/phoenix_core.hpp>
    #include <boost/spirit/include/phoenix_container.hpp>
    #include <boost/spirit/include/phoenix_statement.hpp>
    #include <boost/spirit/include/phoenix_operator.hpp>
    #include <boost/fusion/include/adapt_struct.hpp>
    #include <boost/fusion/include/boost_tuple.hpp>
    #include <boost/variant/recursive_variant.hpp>

    #include <boost/make_shared.hpp>

    #include <vector>

    namespace signal_processing {
      namespace parsing {

        struct json_object;
        struct json_array;

        typedef boost::variant < std::string,
            double,
            boost::recursive_wrapper<json_object>,
            boost::recursive_wrapper<json_array>,
            bool > json_value;

        typedef boost::tuple < std::string, json_value> json_pair;

//        struct json_members
//        {
//            std::vector < json_pair > items;
//        };
//
//        struct json_object
//        {
//            std::vector < json_members > children;
//        };
//
//        struct json_array
//        {
//            std::vector < json_value > list;
//        };

        struct json_members : std::vector < json_pair > {};
        struct json_object : std::vector < json_members > {};
        struct json_array : std::vector < json_value > {};

        using boost::spirit::qi::bool_;
        using boost::spirit::qi::char_;
        using boost::spirit::qi::double_;
        using boost::spirit::qi::eol;
        using boost::spirit::qi::float_;
        using boost::spirit::qi::int_;
        using boost::spirit::qi::lexeme;
        using boost::spirit::qi::lit;
        using boost::spirit::qi::space;
        using boost::spirit::qi::_val;
        using boost::spirit::qi::_1;

        template <typename Iterator, typename Skipper>
        struct json_grammar : boost::spirit::qi::grammar < Iterator, json_object(), Skipper>
        {
            json_grammar() : json_grammar::base_type(object)
            {
                object = '{' > *members > '}';

                pair = string > ':' > value;

                members = pair > *( ',' > pair );

                element_list = '[' > *elements > ']';

                elements = value > *( ',' > value );

                value = string |
                    number |
                    object |
                    element_list |
                    bool_ |
                    lit("null");

                char const* exclude = " ();\"\n\r\t";
                string = '"'
                    > +lexeme[char_ - char_(exclude)]
                    > '"';

                // Return: double
                number = double_ |
                    float_ |
                    int_;

                BOOST_SPIRIT_DEBUG_NODE(object);
                BOOST_SPIRIT_DEBUG_NODE(pair);
                BOOST_SPIRIT_DEBUG_NODE(members);
                BOOST_SPIRIT_DEBUG_NODE(element_list);
                BOOST_SPIRIT_DEBUG_NODE(elements);
                BOOST_SPIRIT_DEBUG_NODE(value);
                BOOST_SPIRIT_DEBUG_NODE(string);
                BOOST_SPIRIT_DEBUG_NODE(number);
            }

            boost::spirit::qi::rule < Iterator, json_object(), Skipper > object;
            boost::spirit::qi::rule < Iterator, json_pair(), Skipper > pair;
            boost::spirit::qi::rule < Iterator, json_members(), Skipper > members;
            boost::spirit::qi::rule < Iterator, json_array(), Skipper > element_list;
            boost::spirit::qi::rule < Iterator, json_array(), Skipper > elements;
            boost::spirit::qi::rule < Iterator, json_value(), Skipper > value;
            boost::spirit::qi::rule < Iterator, std::string(), Skipper > string;
            boost::spirit::qi::rule < Iterator, double(), Skipper > number;
        };
      }
    }

//    BOOST_FUSION_ADAPT_STRUCT(
//        signal_processing::parsing::json_object,
//        (std::vector < signal_processing::parsing::json_members >, children)
//    )
//
//    BOOST_FUSION_ADAPT_STRUCT(
//        signal_processing::parsing::json_members,
//        (std::vector < signal_processing::parsing::json_pair >, items)
//    )
//
//    BOOST_FUSION_ADAPT_STRUCT(
//        signal_processing::parsing::json_array,
//        (std::vector < signal_processing::parsing::json_value >, list)
//    )

    void parse ( std::string const& file )
    {
        typedef signal_processing::parsing::json_grammar < std::string::const_iterator, boost::spirit::ascii::space_type > configuration_grammar;
        configuration_grammar input; // Input grammar
        signal_processing::parsing::json_object parsed_data;

        std::string::const_iterator iter = file.begin();
        std::string::const_iterator end = file.end();
        bool r = boost::spirit::qi::phrase_parse ( iter, end, input, boost::spirit::ascii::space, parsed_data );

        if ( ! r || iter != end)
        {
            // Report the next 30 characters
            std::string::const_iterator some = iter + 30;

            if ( some > end )
            {
                some = end;
            }

            std::string context(iter, some);
            std::cout << "-------------------------\n";
            std::cout << "Parsing failed\n";
            std::cout << "stopped at: \": " << context << "...\"\n";
            std::cout << "-------------------------\n";
        }
    }

    int main(int,char**)
    {
        std::string input ( "{\r\n       \"Event\": {\r\n                \"attribute_a\": 0.0002,\r\n                \"attribute_b\": 2e-005,\r\n                \"attribute_c\": 0.022\r\n        }\r\n}" );

        parse ( input );

        return 0;
    } 
```

哪个输出：

```
localhost stov # ./stov
<object>
  <try>{\r\n       "Event": {</try>
  <members>
    <try>\r\n       "Event": {\r</try>
    <pair>
      <try>\r\n       "Event": {\r</try>
      <string>
        <try>\r\n       "Event": {\r</try>
        <success>: {\r\n               </success>
        <attributes>[[E, v, e, n, t]]</attributes>
      </string>
      <value>
        <try> {\r\n                </try>
        <string>
          <try> {\r\n                </try>
          <fail/>
        </string>
        <number>
          <try> {\r\n                </try>
          <fail/>
        </number>
        <object>
          <try>{\r\n                "</try>
          <members>
            <try>\r\n                "a</try>
            <pair>
              <try>\r\n                "a</try>
              <string>
                <try>\r\n                "a</try>
                <success>: 0.0002,\r\n         </success>
                <attributes>[[a, t, t, r, i, b, u, t, e, _, a]]</attributes>
              </string>
              <value>
                <try> 0.0002,\r\n          </try>
                <string>
                  <try> 0.0002,\r\n          </try>
                  <fail/>
                </string>
                <number>
                  <try> 0.0002,\r\n          </try>
                  <success>,\r\n                "</success>
                  <attributes>[0.0002]</attributes>
                </number>
                <success>,\r\n                "</success>
                <attributes>[0.0002]</attributes>
              </value>
              <success>,\r\n                "</success>
              <attributes>[[[a, t, t, r, i, b, u, t, e, _, a], 0.0002]]</attributes>
            </pair>
            <pair>
              <try>\r\n                "a</try>
              <string>
                <try>\r\n                "a</try>
                <success>: 2e-005,\r\n         </success>
                <attributes>[[a, t, t, r, i, b, u, t, e, _, b]]</attributes>
              </string>
              <value>
                <try> 2e-005,\r\n          </try>
                <string>
                  <try> 2e-005,\r\n          </try>
                  <fail/>
                </string>
                <number>
                  <try> 2e-005,\r\n          </try>
                  <success>,\r\n                "</success>
                  <attributes>[2e-05]</attributes>
                </number>
                <success>,\r\n                "</success>
                <attributes>[2e-05]</attributes>
              </value>
              <success>,\r\n                "</success>
              <attributes>[[[a, t, t, r, i, b, u, t, e, _, b], 2e-05]]</attributes>
            </pair>
            <pair>
              <try>\r\n                "a</try>
              <string>
                <try>\r\n                "a</try>
                <success>: 0.022\r\n        }\r\n</success>
                <attributes>[[a, t, t, r, i, b, u, t, e, _, c]]</attributes>
              </string>
              <value>
                <try> 0.022\r\n        }\r\n}</try>
                <string>
                  <try> 0.022\r\n        }\r\n}</try>
                  <fail/>
                </string>
                <number>
                  <try> 0.022\r\n        }\r\n}</try>
                  <success>\r\n        }\r\n}</success>
                  <attributes>[0.022]</attributes>
                </number>
                <success>\r\n        }\r\n}</success>
                <attributes>[0.022]</attributes>
              </value>
              <success>\r\n        }\r\n}</success>
              <attributes>[[[a, t, t, r, i, b, u, t, e, _, c], 0.022]]</attributes>
            </pair>
            <success>\r\n        }\r\n}</success>
            <attributes>[[[[a, t, t, r, i, b, u, t, e, _, a], 0.0002], [[a, t, t, r, i, b, u, t, e, _, b], 2e-05], [[a, t, t, r, i, b, u, t, e, _, c], 0.022]]]</attributes>
          </members>
          <members>
            <try>\r\n        }\r\n}</try>
            <pair>
              <try>\r\n        }\r\n}</try>
              <string>
                <try>\r\n        }\r\n}</try>
                <fail/>
              </string>
              <fail/>
            </pair>
            <fail/>
          </members>
          <success>\r\n}</success>
          <attributes>[[[[[a, t, t, r, i, b, u, t, e, _, a], 0.0002], [[a, t, t, r, i, b, u, t, e, _, b], 2e-05], [[a, t, t, r, i, b, u, t, e, _, c], 0.022]]]]</attributes>
        </object>
        <success>\r\n}</success>
        <attributes>[[[[[a, t, t, r, i, b, u, t, e, _, a], 0.0002], [[a, t, t, r, i, b, u, t, e, _, b], 2e-05], [[a, t, t, r, i, b, u, t, e, _, c], 0.022]]]]</attributes>
      </value>
      <success>\r\n}</success>
      <attributes>[[[E, v, e, n, t], [[[[a, t, t, r, i, b, u, t, e, _, a], 0.0002], [[a, t, t, r, i, b, u, t, e, _, b], 2e-05], [[a, t, t, r, i, b, u, t, e, _, c], 0.022]]]]]</attributes>
    </pair>
    <success>\r\n}</success>
    <attributes>[[[[E, v, e, n, t], [[[[a, t, t, r, i, b, u, t, e, _, a], 0.0002], [[a, t, t, r, i, b, u, t, e, _, b], 2e-05], [[a, t, t, r, i, b, u, t, e, _, c], 0.022]]]]]]</attributes>
  </members>
  <members>
    <try>\r\n}</try>
    <pair>
      <try>\r\n}</try>
      <string>
        <try>\r\n}</try>
        <fail/>
      </string>
      <fail/>
    </pair>
    <fail/>
  </members>
  <success></success>
  <attributes>[[[[[E, v, e, n, t], [[[[a, t, t, r, i, b, u, t, e, _, a], 0.0002], [[a, t, t, r, i, b, u, t, e, _, b], 2e-05], [[a, t, t, r, i, b, u, t, e, _, c], 0.022]]]]]]]</attributes>
</object> 
```

**统一码**

我知道 boost::spirit 的 SVN 版本现在支持 UTF8；尝试谷歌搜索`BOOST_SPIRIT_UNICODE`。您现在可以使用库中的宽字符串支持来支持“unicode”（微软称之为）。

**免责声明**

我在 Linux 上工作。YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T02:43:13.687

我碰巧[最近在 Spirit v2 中编写了一个支持 UNICODE 的 JSON 解析器](https://github.com/sehe/spirit-v2-json/tree/q16227680)，这是一个解析您的示例的[测试用例：](https://github.com/sehe/spirit-v2-json/blob/q16227680/test.cpp)

```
#include <sstream>
#include "JSON.hpp"

// util
static JSON::Value roundtrip(JSON::Value const& given) {
    return JSON::parse(to_wstring(given));
}

void roundtrip_test()
{
    auto 
        document = JSON::readFrom(std::istringstream(
                    "{\r\n"
                    "       \"Event\": {\r\n"
                    "             \"attribute_a\": 0.0002,\r\n"
                    "\"attribute_b\": 2e-005,\r\n"
                    "\"attribute_c\": 0.022\r\n"
                    "}\r\n}")),
        verify = roundtrip(document);

    std::cout << verify << "\n";
    std::cout << "document <=> verify equal:     \t" << std::boolalpha << (document == verify)                       << "\n";
    std::cout << "document <=> verify text match:\t" << std::boolalpha << (to_string(document) == to_string(verify)) << "\n";
} 
```

这打印：

```
{"Event":{"attribute_a":0.0002,"attribute_b":2e-05,"attribute_c":0.022}}
document <=> verify equal:      true
document <=> verify text match: true 
```

更多 API 示例：

1.  '立即' JSON 文档的对象初始化表达式：

    ```
    void initializer_test()
    {
        using namespace JSON;

        const Array arr { 
            L"text", 
            42,
            Object { { L"dummy", Null() } } 
        };

        auto radius = as_double(arr[1]);

        auto const document = Object {
                { L"number", 314e-2 },
                { L"string", L"hello\ngoodbye" },
                { L"array" , arr },
                { L"bool" , False() },
                { L"radius", radius },
                { L"area", radius * radius * 3.14 },
                { String { 10, L'=' }, String { 10, L'*' } }
        };

        std::cout << document[L"bool"]   << std::endl;
        std::cout << document[L"number"] << std::endl;
        std::cout << document[L"string"] << std::endl;
        std::cout << document[L"array"]  << std::endl;
        std::cout << document[L"bool"]   << std::endl;
        std::cout << document[L"radius"] << std::endl;
        std::cout << document[L"area"]   << std::endl;
        std::cout << document            << std::endl;
    } 
    ```

2.  例如这个通过往返测试的[样本输入：](https://github.com/sehe/spirit-v2-json/blob/q16227680/testcases/test1.json)

    ```
    {
        "Image": {
            "Width":  800,
            "Height": 600,
            "Title":  "View from 15th Floor",
            "Thumbnail": {
                "Russian":  "На берегу пустынных волн",
                "Escapes": "Ha \"\u0431\u0435\u0440\u0435\u0433\u0443\" shows up \\similar\\.\r\b\n",
                "берегу": "Russian",
                "Dummy": null,
                "Yummy": false,
                "Tummy": true,
                "Url":    "http://www.example.com/image/481989943",
                "Height": 125,
                "Width":  "100"
            },
            "IDs": [116, 943, 234, 38793]

        }
    } 
    ```

3.  这个转换一些 JSON 节点的访问者示例：[如何操作 JSON 树的叶子](https://stackoverflow.com/questions/16093940/how-to-manipulate-leaves-of-a-json-tree/16096095#16096095)

# c# - 使用 C# 作为字符串导入 Excel (.xlsx) 数据

> ID：14462099
> 
> 赞同：2
> 
> 时间：2013-01-22T15:29:31.850
> 
> 标签：c#, excel, import, excel-2010

我正在尝试从 .xlsx 文档导入数据。它不断错误地读取数据类型。我需要每列都作为字符串输入。

我的连接字符串如下所示：

```
"Provider=Microsoft.ACE.OLEDB.12.0; Data Source = " + FileName + "; Extended Properties = 'Excel 12.0 Xml; HDR = Yes; IMEX = 1';" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:38:33.587

您可能想尝试类似[linqtoexcel 的方法](https://code.google.com/p/linqtoexcel/)，这会将 excel 工作表转换为可以使用 linq 查询进行查询的对象。然后，您可以通过查询 linq 对象将列转换为字符串。

# html - 当链接有 target='_blank' 时，Ctrl + Click 在 IE9.0 中的作用是什么

> ID：14462101
> 
> 赞同：0
> 
> 时间：2013-01-22T15:29:35.163
> 
> 标签：html, internet-explorer, hyperlink, internet-explorer-9, gmail

当 IE9.0 用户从他们的 Gmail 中的链接访问我的网站时，他们遇到了一个奇怪的问题 - 我注意到，如果他们`Ctrl``Mouse click`在链接上进行操作，一切正常。所以我的问题是：

`Ctrl`在 IE9.0 中，执行+`Mouse click`或仅`Mouse click`在带有属性的链接上有什么区别`target='_blank'`？

# jquery - nanoScroller 显示滚动条但不滚动

> ID：14462102
> 
> 赞同：1
> 
> 时间：2013-01-22T15:29:35.587
> 
> 标签：jquery, scroll, scrollbar

滚动条显示在实际项目中，但在 Chrome 中单击“检查元素”之前，它不能用作滚动条。

我试图在 jsFiddle 中创建相同的场景。（但 jsFiddle 甚至没有显示滚动条，因为为 .nano 指定的高度不起作用）

怎么了？

```
$(".nano").nanoScroller({
  alwaysVisible: true
});
$(".pane").css("display","block"); 
```

[http://jsfiddle.net/VqN6S/2/](http://jsfiddle.net/VqN6S/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T16:23:03.767

我取消了 nanoscroller.css 的链接并替换了您的 css：

```
.nano { width: 380px; height: 100px}
.nano .content { padding: 10px; text-align: justify;}
.nano .pane   { background: #888}
.nano .slider { background: #111} 
```

对默认 nanoscroller.css 的内容稍作修改（注意 .nano 类的不同宽度和高度值）：

```
/** initial setup **/
.nano {
  position : relative;
  width    : 300px;
  height   : 100px;
  overflow : hidden;
}
.nano .content {
  position      : absolute;
  overflow      : scroll;
  overflow-x    : hidden;
  top           : 0;
  right         : 0;
  bottom        : 0;
  left          : 0;
}
.nano .content:focus {
  outline: thin dotted;
}
.nano .content::-webkit-scrollbar {
  visibility: hidden;
}
.has-scrollbar .content::-webkit-scrollbar {
  visibility: visible;
}
.nano > .pane {
  background : rgba(0,0,0,.25);
  position   : absolute;
  width      : 10px;
  right      : 0;
  top        : 0;
  bottom     : 0;
  visibility : hidden\9; /* Target only IE7 and IE8 with this hack */
  opacity    : .01; 
  -webkit-transition    : .2s;
  -moz-transition       : .2s;
  -o-transition         : .2s;
  transition            : .2s;
  -moz-border-radius    : 5px;
  -webkit-border-radius : 5px;  
  border-radius         : 5px;
}
.nano > .pane > .slider {
  background: #444;
  background: rgba(0,0,0,.5);
  position              : relative;
  margin                : 0 1px;
  -moz-border-radius    : 3px;
  -webkit-border-radius : 3px;  
  border-radius         : 3px;
}
.nano:hover > .pane, .pane.active, .pane.flashed {
  visibility : visible\9; /* Target only IE7 and IE8 with this hack */
  opacity    : 0.99;
} 
```

你可以在这里看到结果； [http://jsfiddle.net/MxCtr/1/](http://jsfiddle.net/MxCtr/1/)

所以，看来，问题出在你的 CSS 中。

# delphi - Delphi：记录字段的偏移量

> ID：14462103
> 
> 赞同：17
> 
> 时间：2013-01-22T15:29:38.197
> 
> 标签：delphi, record, offset

我正在寻找获取 Delphi 记录中字段偏移量的方法。以下两种方法有效，但我希望有一种更清洁的方法。基本上，我希望第三个节目信息能够正常工作。有任何想法吗？

```
type
 rec_a=record
  a:longint;
  b:byte;
  c:pointer;
 end;

{$warnings off}
function get_ofs1:longint;
var
 abc:^rec_a;
begin
 result:=longint(@abc.c)-longint(abc);
end;
{$warnings on}

function get_ofs2:longint;
asm
 mov eax,offset rec_a.c
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
 showmessage(inttostr(get_ofs1));
 showmessage(inttostr(get_ofs2));
// showmessage(inttostr(longint(addr(rec_a.c)))); // is there a way to make this one work?
end; 
```

编辑：好的，下面的答案很好用，谢谢！作为参考，这里是各种选项的汇编器输出：

```
---- result:=longint(@abc.c)-longint(abc); ----
lea edx,[eax+$08]
sub edx,eax
mov eax,edx

---- mov eax,offset rec_a.c ----
mov eax,$00000008

---- result:=longint(@rec_a(nil^).c); ----
xor eax,eax
add eax,$08 
```

编辑2：看起来这是上一个问题的副本：RRUZ 在下面提到的[上一个类似问题。](https://stackoverflow.com/questions/13168959/get-position-of-a-struct-var)如图所示，另一种方法是声明一个全局变量并按如下方式使用它。奇怪的是，编译器仍然无法在编译时分配正确的值，如汇编器输出所示，因此为了效率和可读性，最好使用 nil 方法。

```
---- var ----
----  rec_a_ofs:rec_a; ----
---- ... ----
---- result:=longint(@rec_a_ofs.c)-longint(@rec_a_ofs); ----
mov eax,$0045f5d8
sub eax,$0045f5d0 
```

编辑3：好的修改代码与所有知道的方法来实现这一点。请注意，为第 3、第 4 和第 5（类方法）方式生成的汇编代码是相同的，无论它们是否内联。当你开始做这些事情时，选择你最喜欢的方式！

```
type
 prec_a=^rec_a;
 rec_a=record
  a:longint;
  b:byte;
  c:pointer;

  class function offset_c:longint;static;inline;
 end;

//const
// rec_a_field_c_offset=longint(@rec_a(nil^).c); // no known way to make this work

{$warnings off}
function get_ofs1:longint;inline;
var
 abc:^rec_a;
begin
 result:=longint(@abc.c)-longint(abc);
end;
{$warnings on}

function get_ofs2:longint;
asm
 mov eax,offset rec_a.c
end;

function get_ofs3:longint;inline;
begin
 result:=longint(@rec_a(nil^).c);
end;

function get_ofs4:longint;inline;
begin
 result:=longint(@prec_a(nil).c);
end;

class function rec_a.offset_c:longint;
begin
 result:=longint(@prec_a(nil).c);
end;

var
 rec_a_ofs:rec_a;

function get_ofs6:longint;inline;
begin
 result:=longint(@rec_a_ofs.c)-longint(@rec_a_ofs);
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
 showmessage(inttostr(get_ofs1));
 showmessage(inttostr(get_ofs2));
 showmessage(inttostr(get_ofs3));
 showmessage(inttostr(get_ofs4));
 showmessage(inttostr(rec_a.offset_c));
 showmessage(inttostr(get_ofs6));
// showmessage(inttostr(rec_a_field_c_offset));
end; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-22T15:34:26.357

我总是使用这种方法：

```
Offset := Integer(@rec_a(nil^).c); 
```

不要让使用`nil^`让您失望，它非常安全。并且不用担心 64 位指针截断。如果您的记录大小> 4GB，那么您的问题就更大了！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T01:18:41.397

您还可以使用通用方法：

```
uses
  System.SysUtils,TypInfo,RTTI;

function GetFieldOffset( ARecordTypeInfo : PTypeInfo;
                         const ARecordFieldName : String) : Integer;
var
  MyContext: TRttiContext;
  MyField: TRttiField;
begin
  if (ARecordTypeInfo.Kind <> tkRecord) then
    raise Exception.Create('Not a record type');
  for MyField in MyContext.GetType(ARecordTypeInfo).GetFields do
    if MyField.Name = ARecordFieldName then
    begin
      Exit(MyField.Offset);
    end;
  raise Exception.Create('No such field name:'+ARecordFieldName);
end; 
```

并这样称呼它：

```
ShowMessage( IntToString( GetFieldOffset( TypeInfo(rec_a),'c'))); 
```

* * *

不如您的其他替代方案快，但提供了统一的通用解决方案。

* * *

在这里查看您的选项以获得一个干净的解决方案，似乎最好的方法是声明一个通用函数：

```
function GetFieldOffset( const P : Pointer) : Integer; Inline;
// Example calls :
//   GetFieldOffset( @PMyStruct(nil).MyParameter);
//   GetFieldOffset( @TMyStruct(nil^).MyParameter);
begin
  Result := Integer( P);
end; 
```

所以即使调用看起来很尴尬，函数名也会告诉你发生了什么。内联调用消除了函数调用开销，因此它将作为代码美化器。

可以获取记录基址和字段地址的常量值：

```
const
  cStruct : MyStruct = ();
  cMyInteger3Offs : Pointer = @cStruct.MyInteger3;
  cMyStructBase   : Pointer = @cStruct; 
```

但这不会使代码看起来更干净。

# dynamics-crm-2011 - 在高级查找的“下 x 天过滤器”中动态设置“X”

> ID：14462104
> 
> 赞同：0
> 
> 时间：2013-01-22T15:29:39.157
> 
> 标签：dynamics-crm-2011, fetchxml

在我的自定义仪表板中，我想显示一个数据列表。当我使用 Advance Find 创建自定义视图时，我使用的是“next x days”过滤器。我可以从我的自定义字段中动态设置“X”吗？每行可以有不同的 X。

我可以使用 SQL Reporting Services 来做到这一点，但我更喜欢普通列表。有没有办法或者我必须使用报告？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:37:25.637

实际上，如果没有一些解决方法定制，看起来不可能做到这一点！（据我所知）。但是您可以在每次加载时使用插件更改条件过滤器。为此，您可以在其上创建一个新实体和一个数字字段。每次加载仪表板时，您都可以通过替换该实体的值来更改视图的条件。下面的代码片段可以帮助您使用插件：

```
public void Execute(IServiceProvider serviceProvider)
        {
            // Obtain the execution context from the service provider.
            IPluginExecutionContext context = (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));

         if (context.Mode == 0 && context.Stage == 20 && context.MessageName.Equals("RetrieveMultiple"))          
         {
            if (context.InputParameters.Contains("Query"))
            {
                if (context.InputParameters["Query"] is QueryExpression)
                {
                    QueryExpression objQueryExpression = (QueryExpression)context.InputParameters["Query"];

                    if (objQueryExpression.EntityName == "account")
                    {
                        IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
                        IOrganizationService  service = serviceFactory.CreateOrganizationService(context.UserId);
                        ConditionExpression privateFlagCondition;

                            privateFlagCondition = new ConditionExpression()
                            {
                                AttributeName = "statustype",
                                Operator = ConditionOperator.Equal,
                                Values = { "1" }
                            };

                        FilterExpression newFilter = new FilterExpression()
                        {
                            FilterOperator = LogicalOperator.Or,
                            Conditions = { privateFlagCondition }
                        };

                        objQueryExpression.Criteria.AddFilter(newFilter);
                    }

                }
            }
        }
    } 
```

# php - 将 JSON 解析为 MySQL 表

> ID：14462105
> 
> 赞同：1
> 
> 时间：2013-01-22T15:29:40.203
> 
> 标签：php, mysql, json, zend-framework

我正在使用 Zend Framework (1.12)，我想创建一个基于 JSON 文件的表。我已经创建了表格及其字段（现在它们都是长文本），它所要做的就是将它们插入到正确的列中。我遵循了这些示例：

[http://www.daniweb.com/web-development/php/threads/381669/json-to-mysql-with-php](http://www.daniweb.com/web-development/php/threads/381669/json-to-mysql-with-php)（第二篇） [解析JSON到mySQL](https://stackoverflow.com/questions/11257694/parse-json-to-mysql)

问题是我的 JSON 的构造方式不同（我的 JSON 有一个名为 Actie 的“根元素”，并不真正知道正确的术语），它包含一个包含所有对象的数组。目前，我正在使用以下代码：

```
$actieurl = "http://creative3s.com/thomas/nmdad/actie.json";
        $my_arr = json_decode(file_get_contents($actieurl));

        $db = new Zend_Db_Adapter_Pdo_Mysql(array(
            'host' => 'localhost',
            'username' => 'root',
            'password' => NULL,
            'dbname' => 'zf-tutorial'
            ));

        foreach($my_arr as $key => $value){
            $sql[] = (is_numeric($value)) ? "`$key` = $value" : "`$key` = '" . mysql_real_escape_string($value) . "'"; 
        }

        $sqlclause = implode(",",$sql);
        $query = "INSERT INTO `testerdetest` SET $sqlclause";
        $db->query($query); 
```

但是我收到一个错误，说我正在传递一个数组：

```
Warning: mysql_real_escape_string() expects parameter 1 to be string, array given in C:\Users\Thomas\Documents\GitHub\NMDAD-testing\application\controllers\IndexController.php on line 29 
```

有谁知道如何用这种格式的 JSON 解决这个问题？请记住，我不能以任何方式更改 JSON。额外链接：

JSON：[http](http://creative3s.com/thomas/nmdad/actie.json) ://creative3s.com/thomas/nmdad/actie.json 表结构：http: [//i.imgur.com/KtXeEuw.png](https://i.imgur.com/KtXeEuw.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:03:00.183

您的 json 数据具有顶级键“Actie”，因此您需要遍历`$my_arr->Actie`.

您可以将代码简化为：

```
$actieurl = "http://creative3s.com/thomas/nmdad/actie.json";
$my_arr = json_decode(file_get_contents($actieurl));

$db = new Zend_Db_Adapter_Pdo_Mysql(array(
    'host' => 'localhost',
    'username' => 'root',
    'password' => NULL,
    'dbname' => 'zf-tutorial'
));

foreach($my_arr->Actie as $row){
    $db->insert('testerdetest', (array)$row);
} 
```

# html - 在不同的屏幕分辨率下，网站布局变得混乱

> ID：14462107
> 
> 赞同：0
> 
> 时间：2013-01-22T15:29:46.487
> 
> 标签：html, css, layout, screen

我正在设计一个网站。我的显示器分辨率为**1280 x 1024**，我通常使用**Firefox**进行开发。这就是它的外观和应该看起来的样子。这个是正确的。

![在此处输入图像描述](../Images/835d9756796b3fd2ea707f96dd40683f.png)

但是，在同一台显示器上的**Chrome**中查看时会有轻微的变化。注意右下角。

![在此处输入图像描述](../Images/37b2345219b477d61acbdfe103489abd.png)

当在具有不同屏幕分辨率的另一台显示器中查看时，情况会变得更糟。这是我的工作屏幕，分辨率为**1366 x 768**。

在**火狐上**

![在此处输入图像描述](../Images/afbada0fb7818f05cc024de3dace4000.png)

在**Chrome上**

![在此处输入图像描述](../Images/ef1c61b5677426c06c64ca0ec930c7a8.png)

如您所见，布局非常糟糕。下面是代码。

*HTML*

```
<img id="yellowRing" src="images/about_rings/yellow_ring.png" />
<img id="magentaRing" src="images/about_rings/magenta_ring.png" />
<img id="blueRing" src="images/about_rings/blue_ring.png" />

<div id="aboutCaption">
    <p>Our Team</p>
</div>

<div id="team">
    <div class="member"><a data-member="one" href="#"><img src="images/team/one_thumbnail.png" /></a></div>
    <div class="member"><a data-member="two" href="#"><img src="images/team/two_thumbnail.png" /></a></div>
    <div class="member"><a data-member="three" href="#"><img src="images/team/three_thumbnail.png" /></a></div>
    <div class="member"><a data-member="four" href="#"><img src="images/team/four_thumbnail.png" /></a></div>
</div> 
```

*CSS*

```
#yellowRing {
    position:absolute;
    left:1200px;
    bottom:-1300px;
    z-index:2;  
}

#magentaRing {
    position:absolute;
    left:1600px;
    bottom:-1100px;
    z-index:3;
}

#blueRing {
    position:absolute;
    left:2160px;
    top:500px;
    z-index:4;
}

#aboutCaption {
    position:absolute;
    left:2430px;
    top:-50px;
    z-index:4;
    line-height:2.2em;
}

#aboutCaption p {
    font-weight:lighter;
    text-align:right;
    color:#FFF;
    font-size:55px;
}

#team {
    position:absolute;
    left:2135px;
    top:90px;
    width:432px;
    height:110px;
    z-index:4;
}

.member {
    position:relative;
    height:95px;
    width:95px;
    margin:8px 8px 8px 0px;
    z-index:5;
    display:inline-block;
}

.member:nth-child(1) {
    margin-left:8px;    
}

.member img {
    height:95px;
    width:95px; 
} 
```

本网站仅水平滚动。我的问题是，为什么会这样？尽管屏幕尺寸或分辨率如何，我应该怎么做才能使布局保持一致？还是我必须进行响应式设计并在每个基准测试中包含多个 CSS 文件？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:41:29.503

要涵盖所有平台/浏览器/等...您将不得不使用一个框架，它变得笨重，或者如果您保持简单，我会使用一些@media 规则来涵盖您不同的布局尺寸。它的基础知识可以在[W3 Media Types找到](http://www.w3schools.com/css/css_mediatypes.asp)

# c# - 是否可以从 ASPX 文件后面的代码调用 Scripts.Render 或 Styles.Render？

> ID：14462112
> 
> 赞同：19
> 
> 时间：2013-01-22T15:30:00.037
> 
> 标签：c#, asp.net, bundling-and-minification

有没有办法`@:Scripts/Styles.Render`从后面的代码中复制助手的行为？

如果我使用该`BundleTable.Bundles.ResolveBundleUrl`方法引用捆绑包，那么即使使用`debug=true`. 我已经阅读了其他问题，通过使用前面提到的帮助程序，解决方案似乎很明显。但在我的情况下，我不知道在 aspx 中的包的名称，它是在运行时在后面的代码中生成的。

所以，我需要在头部添加引用，从后面的代码中，我找不到办法做到这一点。

有办法吗？还是我会被迫在 .aspx 文件中执行此操作？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-28T23:02:29.747

是的！

这就是我为 Web 表单所做的。此示例将资源添加到 ，`<head>`但也适用于任何适用的`Controls.Add()`控件

对于 CSS：

```
System.Web.UI.WebControls.Literal lit = new System.Web.UI.WebControls.Literal();
lit.Text = System.Web.Optimization.Styles.Render("~/bundles/my_css").ToHtmlString();
Header.Controls.Add(lit); 
```

对于 JS：

```
System.Web.UI.WebControls.Literal lit = new System.Web.UI.WebControls.Literal();
lit.Text = System.Web.Optimization.Scripts.Render("~/bundles/my_js").ToHtmlString();
Header.Controls.Add(lit); 
```

另外 - 由于 ASPX 是代码隐藏的子类，理论上您可以通过将其设置为代码隐藏中的受保护（或公共）变量来从 ASPX 获取包名称（但您没有发布所有代码，所以我不确定是什么你完全符合）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-03T17:05:27.533

你也可以只渲染脚本内联

```
<%: Scripts.Render("~/bundles/my_js") %> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-12T11:59:28.227

这也可能对后来来这里的人有所帮助。

不使用文字控件的替代选项：

```
 ClientScript.RegisterStartupScript(typeof(Page), "MyJS", Scripts.Render("~/bundles/bundledJS").ToHtmlString(), false); 
```

# php - Preg_replace 和自定义标签

> ID：14462113
> 
> 赞同：0
> 
> 时间：2013-01-22T15:30:06.157
> 
> 标签：php, frameworks, content-management-system, preg-replace

我创建了一个自定义标签，需要在呈现页面之前将其剥离和替换。标签看起来像这样：[@customTagToBeReplaced]

我使用的 preg_replace 模式在 php 中是这样的：

```
$pattern = "/\[@ .*\]/is"; 
```

当我实现它时，有时或多或少的字符会被剥离，留下一半的 html 标签被破坏。像这样：

前：

```
<div class="">
[@ error]
</div> 
```

后：

```
<div class="</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:31:51.277

你的模式太贪心了，试试更具体的：

```
$pattern = "/\[@ \w+\]/is"; 
```

`\w`匹配任何单词字符（字母数字和下划线）。

# windows - 任何人都可以帮助我处理 Windows 的内核内存吗？关于分页物理、分页虚拟和分页限制

> ID：14462119
> 
> 赞同：1
> 
> 时间：2013-01-22T15:30:22.720
> 
> 标签：windows, memory, kernel

这些天来，我一直在处理我的软件的一个错误，它使用了大量的 GDI 对象，我发现当 Paged Virtual 与 Paged Limit 近似时，我的 MFC 应用程序无法显示它应该是什么。然后我通过将 CreateCompatableBitmap 函数更改为 CreateDIBSection 解决了这个问题。

但是我需要知道的是Paged Physical、Paged Virtual和Paged Limit之间的关系是什么，Paged Limit似乎不仅仅是Paged Virtual和Physical的总和，这真的很混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:57:28.653

根据 Windows Internals 书

*   Paged Physical - 分页池的当前物理（常驻）大小（`Memory: Pool Paged Resident Bytes`性能计数器）
*   Paged Virtual - 分页池的当前总虚拟大小（`Memory: Pool Paged Bytes`性能计数器，`MmPagedPoolPage`（页数）内核变量）
*   Paged Limit - 分页池的最大（虚拟）大小（`MmSizeOfPagedPoolInBytes`内核变量）

[突破 Windows 的限制：](http://blogs.technet.com/b/markrussinovich/archive/2009/03/26/3211216.aspx) M. Russinovich 的分页和非分页池

# ruby - 没有类的小胡子

> ID：14462120
> 
> 赞同：1
> 
> 时间：2013-01-22T15:30:25.910
> 
> 标签：ruby, mustache

我已经开始编写一个小型 Sinatra 应用程序并决定使用 Mustache。[演示](http://mustache.github.com/#demo)看起来很完美：调用一个函数，传递一个模板和任意变量——完成。

但是，[Ruby 等价物](https://github.com/defunkt/mustache-sinatra-example)看起来要复杂得多，因为您必须预先定义一大堆类（[每个视图一个](https://github.com/defunkt/mustache-sinatra-example/tree/master/views)）。

虽然我可以看到这种基于类的方法很有用，但我找不到一种简单的方法`render(template, hash)`——我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-27T02:24:37.643

你可以这样做：

```
 m=Mustache.new
            m.template_file = File.join(Rails.root, "app", "views", "orders", "sms.mustache")
            m[:order]=order
            rendered_template = m.render 
```

order 是您希望模板使用的对象

# javascript - 使用 HTML5 和 C++ 的移动开发工具

> ID：14462122
> 
> 赞同：2
> 
> 时间：2013-01-22T15:30:30.003
> 
> 标签：javascript, c++, html, mobile, cross-platform

我想找到一个同时支持Android和iOS的跨平台移动开发工具。我在 C++ 中有一些 CPU 密集型代码，我想使用 HTML5 作为我的 GUI 部分。我知道 MoSync 可以为移动应用程序提供 C++ 和 HTML5+JavaScript 的桥梁。但是除了 MoSync 之外，还有没有其他工具可以集成 C++ 和 HTML+JavaScript 中的代码。我需要集成 C++/HTML/JavaScript 的代码，让代码在 C++ 端和 JavaScript 端之间进行通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:57:07.910

也许[Qt](http://qt-project.org/)可以在这里为您提供帮助。Qt 是跨平台的，甚至还有适用于[Android](http://qt.gitorious.org/qt/android-lighthouse)和[iPhone](http://www.qt-iphone.com/Introduction.html)的端口。

看看那些 Qt 模块：

*   **QtScrip** (javascript)
*   **QtWebkit**（Html 渲染，自 Qt 5 起支持 Html 5）

* * *

***文档：（**删节）*

*   [Qt（一般）](http://qt-project.org/doc/)
*   [Qt 5.0](http://qt-project.org/doc/qt-5.0/qtdoc/index.html)和[Qt 4.8](http://qt-project.org/doc/qt-4.8/)
*   [QtMobility](http://qt-project.org/wiki/Category%3aDeveloping_with_Qt%3a%3aQtMobility)
*   [脚本](http://qt-project.org/doc/qt-5.0/qtdoc/topics-scripting.html)
    *   [QtScript](http://qt-project.org/doc/qt-5.0/qtscript/qtscript-module.html)
    *   [JS引擎](http://qt-project.org/doc/qt-5.0/qtqml/qjsengine.html)
    *   用例 - 在 QML ( [QML)](http://qt-project.org/doc/qt-5.0/qtqml/qtqml-index.html)[中集成 JavaScript](http://qt-project.org/doc/qt-5.0/qtquick/qtquick-usecase-integratingjs.html)
    *   [ECMA 脚本](http://qt-project.org/doc/qt-5.0/qtscript/ecmascript.html)
*   [示例/演示/教程](http://qt-project.org/doc/qt-5.0/qtdoc/qtexamplesandtutorials.html)
    *   [富文本示例](http://qt-project.org/doc/qt-5.0/qtwidgets/examples-richtext.html)
    *   [Qt WebKit 小部件示例](http://qt-project.org/doc/qt-5.0/qtwebkitexamples/webkit-widgetexamples.html)
    *   [Qt Webkit 示例和演示](http://qt-project.org/doc/qt-5.0/qtwebkitexamples/webkit-qmlexamples.html)

* * *

> **移动平台**
> 
> Qt 5 将支持所有领先的移动操作系统。已经存在正在进行的工作支持：
> 
> *   安卓
> *   iOS
> *   视窗 8 (WinRT)
> *   黑莓 10

*（来源：http: [//qt-project.org/doc/qt-5.0/qtdoc/supported-platforms.html](http://qt-project.org/doc/qt-5.0/qtdoc/supported-platforms.html)）*

# jquery - 在同一容器中的另一个 div 上显示 z-indexed div

> ID：14462125
> 
> 赞同：0
> 
> 时间：2013-01-22T15:30:38.803
> 
> 标签：jquery, html, css

我有一个包含表格的容器 div。我正在使用 jQuery 将 div 动态添加到容器 div 中。我想将创建的 div 放置在表格上，但无法这样做。子 div 出现在表格下方。这是我的代码

HTML：

```
<div class="container">
  <table class="tbl">
    <tr><td></td></tr>
    <tr><td></td></tr>
  </table>    
</div>    
<button id="btnAdd" type="button">Add</button> 
```

CSS：

```
.container
{
  position:relative;
  background-color:#d0d0d0;
  width:90%;
  height:50px;
}
.innerdiv
{
  z-index:2;
  background-color: #D57657;
  float:left;    
}
.tbl
{
  border-collapse: collapse;
  width:100%;
  height:100%;
}
.tbl td
{
  border-bottom:1px solid #000;
} 
```

jQuery：

```
$(function(){
  $("#btnAdd").click(function(){
    $(".container").append("<div class='innerdiv'>I am new</div>");
  });
}); 
```

这是[jsFiddle](http://jsfiddle.net/ZedBee/ABZ8s/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:36:22.640

```
.container{
    position:releative;
    background-color:#d0d0d0;
    widht:90%;
    height:50px;
    float: left;
} 
```

# c# - 生成的.TLB文件输出目录

> ID：14462128
> 
> 赞同：3
> 
> 时间：2013-01-22T15:30:41.247
> 
> 标签：c#, .net, com

我有一个编译的 c# 程序集，我正在为 COM 公开注册。为了将我的库导入到一些遗留的 c++ 代码中，.tlb 文件需要位于我的“包含”目录之一中。

而不是将我的 bin 目录添加到将使用它的项目的包含目录中，并且由于这些项目将始终在相同的文件夹结构下编译，我想知道在编译时是否可以将我的 .tlb 文件定向到一个特定的目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:49:50.717

在`Project Properties`下方`Build Events`有一个**构建后事件**部分。在这里，您可以应用您想要的任何命令，包括复制。

下面是一些示例代码，它将文件从 bin\Debug 目录复制到 C:\ 驱动器中的另一个目录。

```
copy "$(TargetDir)\filename.tlb" "C:\output directory path\" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:43:47.280

在构建后任务中使用 XCOPY。

# git - git diff 显示 ^M，颜色为真

> ID：14462129
> 
> 赞同：9
> 
> 时间：2013-01-22T15:30:44.037
> 
> 标签：git, vim

我修改了我`.gitconfig`的方式，使我在执行时有一些颜色`git diff`：

```
$ cat .gitconfig 
[color]
ui = true 
```

我正在使用 ubuntu 机器，我使用 VIM 编辑了一些代码。编辑文件后执行`git diff`一次，一次执行一次，一次不执行一次`ui=true`。

**问题**：在第一种情况下，我有`^M`字符和编辑行的结尾。`color.ui`但是，在打开或使用`vim`, `cat`, `more`.. 查看被操纵文件时，我看不到那些。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T16:12:39.247

这可能是一个编码问题。'git diff' 命令正在执行 Vim，认为文件格式是 Dos。

当您使用任何其他命令时，它会被正确识别为 Unix 文件。

你可以试试： `:set fileformat=unix` 在你的 git diff 窗口中吗？

我不确定这是根本原因，因为我没有看到该`ui`选项的链接。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-11-21T10:50:59.373

通过设置为我解决了这个`core.whitespace`问题`cr-at-eol`

> 将行尾的回车视为行终止符的一部分[（git-config docs）](https://git-scm.com/docs/git-config)

这可以添加到每个项目或全局 git 配置文件中，如下所示：

```
[core]
    whitespace = cr-at-eol 
```

这解决了由于另一个非行尾更改而将 ^M 隐藏在差异中的行末尾的问题。目的不是忽略唯一区别是行尾的更改。我在带有`core.autocrlf`=的窗口上`true`，因此预计行尾不匹配。

我唯一要注意的是，我不知道这是否会影响 git 是否会标记 EOL 中可能想要提交的真正更改，但也许使用 autocrlf=true 永远不会出现这种情况。

[此处](https://stackoverflow.com/a/46265081/528711%20%22here)描述了另一种修复方法，更有针对性（但更骇人听闻）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-29T09:58:39.653

请查看 Github 出色的“处理行尾”页面：

[https://help.github.com/articles/dealing-with-line-endings](https://help.github.com/articles/dealing-with-line-endings)

您可能想要设置 core.autocrlf 然后重新规范化您的存储库。

# javascript - 递归迭代器上的最大调用堆栈大小错误

> ID：14462137
> 
> 赞同：1
> 
> 时间：2013-01-22T15:31:02.080
> 
> 标签：javascript

我正在尝试使用 JavaScript，只是为了学习目的，我正在编写一个 forEach 迭代器，它可以遍历嵌套数组或任何其他包含`length property`.

这是我写的：

```
var forEach = function(obj, callback, options) {
  var options = options || {};
  var context = options.context || this;    

  if(!isEmpty(obj)) { // isEmpty function just evaluates `return !(!!obj.length);`
    for(var x = 0; x < obj.length; x++) {
      if(!isEmpty(obj[x]) && options.deep === true) {
        forEach.call(context, obj[x], callback, options);
        continue;
      }
      callback.call(context, obj[x]);
    }
  }
}; 
```

如果我传递一个嵌套数组，我会得到`RangeError: Maximum call stack size exceeded`：

```
forEach(['a', 'b', ['c', 'd']], function(x) {
  console.log(x);
}, { deep: true }); 
```

但这似乎只有在我检查长度属性时才会发生`obj[x]`

如果我更换：

```
if(!isEmpty(obj[x]) && options.deep === true) { 
```

为了：

```
if((obj[x] instanceof Array) && options.deep === true) { 
```

我会神奇地工作。然而，不仅`Arrays`有一个长度属性。`String`有它，所以这不是一个广泛的方法。

我怎样才能防止`RangeError`但仍然检查`length property`？

**编辑：**我在**NodeJS v0.8.12上运行示例**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:05:34.690

认为那`'a'[0][0][0][0][0][0][0]...`是无限有效的，并且每个值都是 type `string`。如果类型是`string`，那么你不应该递归地迭代它。另请注意，`function`对象具有`length`属性，并且`function`参数可以是对自身的自引用`function`。这将导致另一个无限递归。我认为以不同的方式处理不同的类型而不是尝试开发一个包罗万象的功能可能更有意义。

您还可以拥有一个`maxLevel`限制递归深度的属性，其默认值为`10`. 这样无限递归应该不容易实现。

```
forEach(['a', 'b', ['c', 'd']], function(x) {
  console.log(x);
}, { deep: true, maxLevel: 10 });

var forEach = function(obj, callback, options, level) {
    var options = options || {};
    var context = options.context || this;

    if (!level) level = 1;
    if (!options.maxLevel) options.maxLevel = 10;

    if (level > options.maxLevel) return;
    ...
        forEach.call(context, obj[x], callback, options, level + 1);
    ...
} 
```

演示：http: [//jsfiddle.net/bjpx5/](http://jsfiddle.net/bjpx5/)

# android - 如何使用 ExpandableListView？

> ID：14462140
> 
> 赞同：0
> 
> 时间：2013-01-22T15:31:26.823
> 
> 标签：android, expandablelistview, expandablelistadapter, expandable

欢迎大家

我有一个我正在测试的 ExpanableListView。我对项目的展开图标有疑问。该图标正在绘制覆盖每个项目的文本标题。这意味着例如，如果第一个项目的标题是“Ducados”，则图标覆盖“Du”，并且只有“cados”可见

我该怎么做才能对齐展开图标右侧的文本？

这是代码：

```
public class MainActivity extends ExpandableListActivity {
ExpandableListAdapter mAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set up our adapter
    mAdapter = new MyExpandableListAdapter();
    setListAdapter(mAdapter);
    registerForContextMenu(getExpandableListView());
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    menu.setHeaderTitle("Sample menu");
    menu.add(0, 0, 0, "Sample action");
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    ExpandableListContextMenuInfo info = (ExpandableListContextMenuInfo) item.getMenuInfo();

    String title = ((TextView) info.targetView).getText().toString();

    int type = ExpandableListView.getPackedPositionType(info.packedPosition);
    if (type == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
        int groupPos = ExpandableListView.getPackedPositionGroup(info.packedPosition);
        int childPos = ExpandableListView.getPackedPositionChild(info.packedPosition);
        Toast.makeText(this, title + ": Child " + childPos + " clicked in group " + groupPos, Toast.LENGTH_SHORT).show();
        return true;
    } else if (type == ExpandableListView.PACKED_POSITION_TYPE_GROUP) {
        int groupPos = ExpandableListView.getPackedPositionGroup(info.packedPosition);
        Toast.makeText(this, title + ": Group " + groupPos + " clicked", Toast.LENGTH_SHORT).show();
        return true;
    }

    return false;
}

public class MyExpandableListAdapter extends BaseExpandableListAdapter {
    // Sample data set.  children[i] contains the children (String[]) for groups[i].
    private String[] groups = { "Names", "Designation", "Gender", "Company" };
    private String[][] children = {
            { "abc", "xyz", "ash", "anu" },
            { "SSE", "TJ", "PM", "SE" },
            { "Male", "Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female Female " },
            { "yyyyyy", "xxxxx" }
    };

    public Object getChild(int groupPosition, int childPosition) {
        return children[groupPosition][childPosition];
    }

    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    public int getChildrenCount(int groupPosition) {
        return children[groupPosition].length;
    }

    public TextView getGenericView() {
        // Layout parameters for the ExpandableListView
        AbsListView.LayoutParams lp = new AbsListView.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);

        TextView textView = new TextView(MainActivity.this);
        textView.setLayoutParams(lp);
        textView.setTextSize(20);
        // Center the text vertically
        textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
        return textView;
    }

    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
        TextView textView = getGenericView();
        textView.setText(getChild(groupPosition, childPosition).toString());
        textView.setTextSize(15);
        return textView;
    }

    public Object getGroup(int groupPosition) {
        return groups[groupPosition];
    }

    public int getGroupCount() {
        return groups.length;
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
        TextView textView = getGenericView();
        textView.setText(getGroup(groupPosition).toString());
        return textView;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

    public boolean hasStableIds() {
        return true;
    }   
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:22:28.070

我记得在我自己的一个应用程序中遇到了类似的问题。

在您的`getGenericView`方法中，您可以使用[TextView.setPadding](http://developer.android.com/reference/android/view/View.html#setPadding%28int,%20int,%20int,%20int%29)指定文本的左侧填充，使其显示在更右侧，并且不会与图标重叠。由于该方法以像素为单位设置填充（这将根据屏幕的密度而变化），因此将像素转换为与[密度无关的像素](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)非常重要，这样填充和外观在屏幕之间都是标准化的。

这是我自己的代码中该方法的完整示例：

```
public TextView getGenericView() {
    // Padding values (in pixels)
    int left = 36; // to avoid being overlapped by the icon
    int right = 0; // not needed
    int top = 15; // space out the list a bit more
    int bottom = top; // space out the list a bit more

    // Get density of screen to convert px to dp
    float scale = m_Context.getResources().getDisplayMetrics().density;

    // Layout parameters for the ExpandableListView
    AbsListView.LayoutParams lp = new AbsListView.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);

    TextView textView = new TextView(MyActivity.this);
    textView.setLayoutParams(lp);
    // Center the text vertically
    textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
    // Set the text starting position
    textView.setPadding((int)(left * scale), (int)(top * scale), right, (int)(bottom * scale)); // left, top, right, bottom
    textView.setTextSize(20);
    return textView;
} 
```

如果您在整个应用程序中有多个 ExpandableListViews，最好在应用程序资源 (res/values/dimen.xml) 中指定像素大小，而不是在顶部`getGenericView`，以便定义（并且可以更改） ) 在一个地方，您可以在所有列表中引用它。

希望这可以帮助！

# php - 从网站监控后台进程

> ID：14462147
> 
> 赞同：0
> 
> 时间：2013-01-22T15:31:44.550
> 
> 标签：php, mysql, process-monitoring

我有一个网站，人们可以在该网站上请求处理某些文件，处理在我的服务器上完成，然后处理后的文件可供下载。我想让我网站的管理员从网站上查看处理代码是否正在运行、失败、正在等待等。

所以我想我只想在网页上有一行写着“等待”、“活动”、“失败”等。我希望它会使用 php。

这是大致的大纲，特别是我的系统是这样工作的：

• 当用户选择处理作业时，它会使用 php 添加到 mysql 数据库中。

• 名为monitor_database.py 的python 代码在屏幕实例中运行，它监视数据库并在注意到数据库中有新请求时启动适当的处理作业。

• 一旦处理完成，数据库就会更新。

因此，我希望能够从我的网页中查看屏幕会话和我的 monitor_database.py 是否正在运行，以及 monitor_database.py 是否已发送任何要处理的内容或正在等待。

有人对如何最好地实现这一目标有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:36:53.203

如果您不采用 IE，则可以使用 WebSockets。

这个答案和你的问题一样笼统;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:26:31.130

最常见的方法是使用 Ajax 调用。例如，查看有多少旅游网站在搜索航班时向您显示状态屏幕。

您执行此操作的确切方式在很大程度上取决于应用程序，但原则上您有一个“状态”页面（可能是您的用户上传文件的页面）。状态页面包含每 30 秒调用一次服务器上的 PHP 脚本的 JavaScript；PHP 脚本依次查询数据库以查找当前文件的状态，并返回一些 XML 或 JSON。您网页上的 JavaScript 解释 XML 或 JSON，并使用结果更新页面。[这里](https://stackoverflow.com/questions/3009664/php-display-progress-messages-on-the-fly)有更多描述。[这里](http://www.wellho.net/resources/ex.php4?item=h307/ajaxstatus.html)有示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T16:28:05.493

这是我最终寻求的解决方案...

首先，我在我的数据库上创建了一个新的 mysql 表，它只包含一行，描述了我的代码的状态（等待、执行此操作、执行此操作等）

现在我的页面上有这个 php 代码：

```
exec( "ps aux | grep process_name.py | grep -v grep | grep -v emacs", $pids );
// This looks for any processes named 'process_name.py', ignoring those caused by emacs,
// and the one caused by grep itself.
$r_process = @mysqli_query($database, "SELECT status FROM process_status WHERE status_id=1");
// This checks the status of the file in the database.
$Monitor = mysqli_fetch_array($r_process);
$StatusName = $Monitor['status'];
if ( empty($pids) )
    {
    $Status = 'Failed';
    }
else
    {
    $Status = 'Operating';
    } 
```

现在，在我的 html 中，我可以有一个显示“在 process1 上失败”或“在 process2 上运行”的东西，这取决于我的进程是如何进行的。我必须刷新我的页面才能改变它。我相信早期的答案假设我想避免刷新页面并建议避免这种情况的方法，但实际上我只是想要一种简单的方法来检查进程是否正在运行。这`exec ( gps... )`是关键。

# .net - 限制 WPF 数据网格中“自动”列的最大宽度

> ID：14462150
> 
> 赞同：6
> 
> 时间：2013-01-22T15:31:51.790
> 
> 标签：.net, wpf, xaml, layout, resize

我有一个标准的 WPF 网格，其中 2 列定义为：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" MinWidth="200" />
        <ColumnDefinition Width="Auto" />
    </Grid.ColumnDefinitions>
    ...
</Grid> 
```

我想要实现的是第二列根据其内容自动调整大小，第一列获得所有剩余空间。但是我也希望第一列永远不会少于 200 像素。问题是使用这种配置我的自动列将被切断而不是调整大小。

我真正想要的是 WPF 首先为第一列分配 200 个像素，然后占用所有剩余空间并要求第二列的内容调整自身大小，并限制剩余宽度的最大大小。如果内容需要较少的空间，则应将剩余空间分配给第一列（使其大于 200 像素）。

**用例：**我的第二列是具有固定纵横比的图像，因此对于给定的高度，有一个最佳宽度。我还有第一列，其中包含一些应该始终可见的控件。如果可用空间比需要的多，我想将空间分配给第一列而不是第二列。

有没有办法使用默认的 WPF 控件来实现这一点，或者我需要为此编写自己的 Grid 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:34:47.027

听起来您想要的基本上是为您的第二列提供两种不同的模式。当整个图像有足够的空间以当前高度显示时，它应该是自动的，否则它应该在第一列取 200 之后只剩下剩余的空间。要进行这种模式切换，您可以使用转换器并绑定列的宽度。

在这里，您有 2 个基本输入：网格可用的总大小和所需的图像宽度。因为你需要它们，所以你需要一个 IMultiValueConverter。这是计算上述开关的基本实现：

```
public class AutoColumnConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        double imageWidth = values.OfType<double>().FirstOrDefault();
        double gridWidth = values.OfType<double>().ElementAtOrDefault(1);
        int minWidth = System.Convert.ToInt32(parameter);

        double availableSpace = gridWidth - minWidth;
        if (imageWidth > availableSpace)
            return new GridLength(availableSpace, GridUnitType.Pixel);

        return new GridLength(0, GridUnitType.Auto);
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

要使用它，您需要将 Grid 包装在可以绑定到的另一个元素中，而不是 Grid 本身，这实际上将位于可用空间附近，并尝试使用两个定义的列进一步扩展。在这里，我使用 Source.Width 来查找图像所需的宽度。如果您更关心纵横比或者也想考虑高度，您可能需要进行调整。

```
<Border>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" MinWidth="200" />
            <ColumnDefinition>
                <ColumnDefinition.Width>
                    <MultiBinding ConverterParameter="200">
                        <MultiBinding.Converter>
                            <local:AutoColumnConverter/>
                        </MultiBinding.Converter>
                        <Binding ElementName="Img" Path="Source.Width"/>
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type Border}}" Path="ActualWidth"/>
                    </MultiBinding>
                </ColumnDefinition.Width>
            </ColumnDefinition>
        </Grid.ColumnDefinitions>

        <Image x:Name="Img" Grid.Column="1" Stretch="Uniform" StretchDirection="DownOnly"
                Source="..."/>
    </Grid>
</Border> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-25T12:00:17.270

试试这个设置 MaxWidth

```
<Grid Height="200"
          Width="600">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"
                          MaxWidth="200" />
        <ColumnDefinition Width="Auto" />
      </Grid.ColumnDefinitions>
      <Border Background="Blue"
              Grid.Column="0" />
      <Viewbox Grid.Column="1"
               Stretch="Uniform"
               MaxWidth="400">
        <Border Background="Yellow"
                BorderBrush="Red"
                BorderThickness="4"
                Height="200"
                Width="300" />
      </Viewbox>
    </Grid> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:19:41.490

我唯一一次看到第二列被截断是当第二列的宽度 + 200 大于网格的宽度时。我玩过，也许这对你来说是一个解决方案：

```
<Grid Height="200"
      Width="600">
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="*"
                      MinWidth="200" />
    <ColumnDefinition Width="Auto" />
  </Grid.ColumnDefinitions>
  <Border Background="Blue"
          Grid.Column="0" />
  <Viewbox Grid.Column="1"
           Stretch="Uniform"
           MaxWidth="400">
    <Border Background="Yellow"
            BorderBrush="Red"
            BorderThickness="4"
            Height="200"
            Width="300" />
  </Viewbox>
</Grid> 
```

我尝试写作`<ColumnDefinition Width="Auto" MaxWidth="400"/>`，但 maxwidth 没有效果。

Viewbox 的 MaxWidth 计算为总宽度 - 如果不明显，则保留 200。

# php - PHP PDO::FETCH_LAZY - 在访问对象变量名时不创建它们

> ID：14462156
> 
> 赞同：5
> 
> 时间：2013-01-22T15:32:07.240
> 
> 标签：php, pdo

我正在使用 PDO，但无法理解 PDO::FETCH_LAZY。在 PHP 手册中，它说“...PDO::FETCH_LAZY 在访问对象变量名时创建它们...”。我有这个代码来测试这个：

```
b类{
    函数 __construct(){}
}
$b = 新 b();

$pdo = new PDO('mysql:host=localhost;dbname=test', 'username', 'pssword');

//testtable{id int, title varchar, msg varchar, time varchar}

$res = $pdo->query("SELECT * FROM testtable limit 1");
$b = $res->fetch(PDO::FETCH_LAZY);
回声$b->味精；
var_dump($b);

```

这应该只打印具有 1 个属性 msg 的对象 b。但相反，输出是这样的：

```
这是一条示例消息。

对象（PDORow）#6（5）{
  [“查询字符串”]=>
  string(31) "SELECT * FROM testtable limit 1"
  [“身份证”]=>
  字符串（1）“1”
  [“标题”]=>
  string(5) "示例标题"
  [“味精”]=>
  string(13) "这是一条示例消息。"
  [“时间”]=>
  字符串（7）“1232123”
}

```

任何人都可以对此有所了解吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-11-08T04:23:59.620

PDORow 是一个内部类，文档很少。它甚至不在[手册中](https://www.php.net/manual-lookup.php?pattern=PDORow&scope=quickref)（搜索结果）。

查看 PDORow 的唯一方法是 FETCH_LAZY：

```
$stmt = $pdo->prepare('SELECT * FROM users WHERE id = :id');
$stmt->bindValue(':id', 1, PDO::PARAM_INT);
$stmt->execute();
$lazy = $stmt->fetch(PDO::FETCH_LAZY); 
```

有趣的是它的所有属性都是公开的。第一个，“queryString”，与 sql 查询相关联。这是某种代理。

您可以将它重用于进一步的语句，以获取完整的对象。获取 PDORow（几乎）不会增加内存使用量。它不是可序列化的，并且在其上调用未定义的属性不会引发错误。

[有关它的更多信息，请访问 phpdelusions.net](https://phpdelusions.net/pdo/fetch_modes#FETCH_LAZY)

> 使用 fetch lazy 时从 PDO 返回的对象不是 stdclass 对象，它们是 pdorow 类型并且具有一些神奇的功能，包括延迟数据获取 - 这对于 pdo _ 驱动程序的设置方式有点模糊

[你可以关注这个有趣的讨论](https://github.com/facebook/hhvm/issues/3432#issuecomment-51937180)。

从 php-src 中，[我们可以看到 PDORow 并不是要实例化的](https://github.com/php/php-src/blob/49a4e695845bf55e059e7f88e54b1111fe284223/ext/pdo/tests/pdorow.phpt)

[您可以在 pdo_stmt.c 中看到有关该类的一些详细信息](https://github.com/php/php-src/blob/21e01f2b70d133acffd82e505f70b65a996b0fd0/ext/pdo/pdo_stmt.c#L2350) Ctrl+F PDORow 其余部分

**编辑**

FETCH_LAZY 的一个可能用例是：

```
// get the lazy object - aka, PDORow
    $stmt = $pdo->prepare('SELECT * FROM users WHERE id = :id');
    $stmt->bindValue(':id', 100, PDO::PARAM_INT);
    $stmt->execute();
    $lazy = $stmt->fetch(PDO::FETCH_LAZY); 
```

接下来，重用它：

```
// do whatever you please with the properties, since they're all public
   $publicProps = get_object_vars($lazy); 
```

然后，如果需要，加载真实对象：

```
// loading lazy object
    $stmt = $pdo->prepare($publicProps['queryString']);
    $stmt->bindValue(':id', $publicProps['id'], PDO::PARAM_INT); 
    /** you could use a regex to get an array of parameters' names prefixed by ':' in the original queryString
    * eg, $queryString = 'SELECT * FROM users WHERE firstName = :firstName AND email = :email';
    * preg_match_all('/:[^\s]+/', $queryString, $matches);
    * would give you an array with ":firstName" and ":email"
    */
    $stmt->execute([':id' => $publicProps['id']]);
    $notLazy = $stmt->fetch(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T08:49:05.423

排队

```
$b = $res->fetch(PDO::FETCH_LAZY); 
```

您为变量 $b 提供了新值（PDORow 对象）覆盖 'b' 对象

# javascript - 在子窗口上打开打印预览时，Google Chrome 会阻止 ajax 请求

> ID：14462163
> 
> 赞同：19
> 
> 时间：2013-01-22T15:32:31.983
> 
> 标签：javascript, ajax, google-chrome

有2个文件：`index.html`和`print.html`

`print.html`第一个包含一个使用简单命令打开的按钮：

```
window.open("print.html", "_blank", "menubar=yes,toolbar=yes,status,scrollbars,resizable"); 
```

`print.html`仅包含一个打开打印预览对话框的按钮：

```
<button onclick="window.print();"> 
```

打开打印预览对话框时出现问题。在这种情况下，对启动 ajax 请求`index.html`的*其他*文件的任何操作都会被暂时阻止并放入队列中。并且只有在预览关闭时浏览器才会触发所有请求。

我只能在 Google Chrome (24.0.1312.52 m) 中看到它。

任何人都可以确认这是 Chrome 的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-13T10:18:40.300

有一个 Chrome 错误，`window.print()`当 DOM 中有标签时它不起作用。可以通过调用这个函数来解决：

```
function printPage() {
    window.print();

    //workaround for Chrome bug - https://code.google.com/p/chromium/issues/detail?id=141633
    if (window.stop) {
        location.reload(); //triggering unload (e.g. reloading the page) makes the print dialog appear
        window.stop(); //immediately stop reloading
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-25T05:50:25.880

You need to install `mod_headers` on Apache and set it on `.htaccess`

```
Header add Access-Control-Allow-Origin "*" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-22T08:05:44.960

您的服务器未添加 ORIGIN 标头。您需要将其添加到 .htaccess 中。例如：

```
Header add Access-Control-Allow-Origin "*"
Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS" 
```

或者您可以在 print.html 上的 PHP 中添加它（如果您可以在 html 文件上使用 PHP）

```
header ("Access-Control-Allow-Origin: *");
header ("Access-Control-Allow-Headers: origin, x-requested-with, content-type");
header ("Access-Control-Allow-Methods: PUT, GET, POST, DELETE, OPTIONS"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T13:47:54.273

我在 Chrome 上遇到了类似的问题——由于安全策略的原因，它无法访问本地文件。当我进行 AJAX 调用时，我收到此错误

```
XMLHttpRequest cannot load file:///*. Origin null is not allowed by Access-Control-Allow-Origin. 
```

据我所知 - 您应该使用参数启动 Chrome：

```
--allow-file-access-from-files 
```

希望能帮助到你。

# javascript - 将 2 个图像与 node.js 和 gm 合并

> ID：14462165
> 
> 赞同：4
> 
> 时间：2013-01-22T15:32:35.057
> 
> 标签：javascript, node.js, png, graphicsmagick

我想使用 node.js 合并 2 个图像，一个 gm for node。事实上，我想将一个较小的图像放在一个较大图像上的坐标 x,y 上。

我已经使用 append() 进行了一些工作，但我不能选择将第二张图像放在第一个图像之上

这是我的附加js代码。

```
gm('img/vector/test.svg').append('img/base/test.png').write('img/final/test.png', function(err, stdout, stderr, command){
            if (err){
                console.log('image conversion error!'); 
                console.log(err); 
                console.log(command);    
            }else{ 
                console.log('image converted with command :'); 
                console.log(command);
            } 
        }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:10:27.430

“此选项创建一个图像，其中原始集中的图像从上到下堆叠” [gm doc说](http://www.graphicsmagick.org/GraphicsMagick.html#details-append)

通常我会说看看[montage](http://www.graphicsmagick.org/montage.html)，但节点模块似乎不支持...

# java - adf refresh mysql auto_increment "ID" 在重新执行查询之前不显示

> ID：14462166
> 
> 赞同：0
> 
> 时间：2013-01-22T15:32:38.347
> 
> 标签：java, mysql, oracle-adf, jdeveloper

我有一个与这个问题非常相似的问题： [Oracle ADF web browser refresh button gets old page](https://stackoverflow.com/questions/13626438/oracle-adf-web-browser-refresh-button-gets-old-page)

我的应用程序也在 MySQL 数据库之上运行。我有一个名为 IncidentType 的表，其中包含 2 列：

IncidentTypeID (int, auto_increment) 描述 (varchar 60) 在我的网页中，我可以创建新记录并将它们提交到数据库。但是，在我重新加载页面（通过“刷新”或关闭然后重新打开页面）之前，不会显示 IncidentTypeID。本质上，直到 VO 的查询在数据库上再次执行。

如果我查看数据库中的数据，则正确分配了 IncidentTypeID。

我在 ADF 业务组件测试仪上注意到了同样的行为。

您建议修改什么以强制在每次提交后重新执行查询并且？

我尝试了上面链接中的解决方案，但它并没有改变行为。

我正在使用 jDev 11.1.2.3.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:57:04.887

在此处查看不受支持的功能和“设置主密钥生成”解决方法： [http ://www.oracle.com/technetwork/developer-tools/jdev/multidatabaseapp-085183.html](http://www.oracle.com/technetwork/developer-tools/jdev/multidatabaseapp-085183.html)

# android - Android 2.2 - 屏幕分辨率和尺寸问题

> ID：14462167
> 
> 赞同：0
> 
> 时间：2013-01-22T15:32:42.343
> 
> 标签：android

安卓版本是2.2。并且应用程序不支持`drawable-xhdpi`文件`drawable-xlarge`夹。但是，当我处理来自不同手机的不同屏幕尺寸时，我遇到了很多问题。

第一个问题是我想知道android会从`drawable-ldpi, drawable-mdpi, drawable-hdpi`文件夹加载正确图像的情况是什么？每个文件夹中有一个图像（drawable-ldpi、drawable-mdpi、drawable-hdpi）。

(1) drawable-ldpi 为 240px x 150px
(2) drawable-mdpi 为 320px x 200px
(3) drawable-hdpi 为 480px x 300px

但是，如果输出设备宽度屏幕为 480 像素，为什么我看不到正确的图像？输出设备仅显示 320px 宽度的图像。不是 480 像素的图像。这个问题似乎是我错过了什么？

然后，我将所有可绘制文件夹重命名为drawable-small、drawable-normal、drawable-large。drawable-large 可以显示 480px 宽度的图像。如果我这样做会好吗？

第二个问题是一些三星设备有不同的屏幕分辨率，我想知道如何支持这些屏幕分辨率，因为我想让800px宽的屏幕显示800px宽的图像，900px宽的屏幕显示900px宽的图像？有什么方法可以做不同的屏幕分辨率？很多人说drawable-xhdpi文件夹可以解决图片可以自动缩放的问题。我看不到任何图像可以自动缩放。也许我错过了一些步骤。

好心提醒。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T16:04:51.497

我会尽力让你更好地了解这一点。

屏幕大致可分为 4 种不同的类别：

1.  低密度
2.  中等密度（基线）
3.  高密度
4.  超高密度

这些天你也得到了 xxhdpi ......

*   低密度 = ldpi (120dpi)

*   中等密度 = mdpi (160dpi)

*   高密度 = hdpi (240dpi)

*   超高密度 = xhdpi (320dpi)

## 另一个很好的例子来自 android 开发者页面：

[http://developer.android.com/images/screens_support/screens-ranges.png](http://developer.android.com/images/screens_support/screens-ranges.png)

## 您可以在此处找到设备列表及其像素密度：

*   h ttp://en.wikipedia.org/wiki/List_of_displays_by_pixel_density

*   h ttp://checkscreensize.appspot.com/listdevice.jsp

您将始终设计具有多种布局/可绘制对象的应用程序以支持不同的设备。不仅是三星设备，大多数品牌的设备都有不同的像素密度和分辨率。

简而言之，通过提供多种资源，android 将选择最适合当前设备的正确资源，如果它在某个布局或可绘制文件夹中找不到一个，它将简单地使用具有该名称的下一个最佳布局/资源。

请注意，这是为了避免可绘制对象和布局的拉伸和不正确缩放。

## 如何支持多种布局？

在您的清单文件中。

```
<supports-screens
android:smallScreens="true"
android:normalScreens="true"
android:largeScreens="true"
android:xlargeScreens="true"
android:anyDensity="true" /> 
```

*   为不同的屏幕尺寸提供不同的布局或可绘制对象。

## 现在，有多种方法可以做到这一点，有些方法取决于 sdk 级别。

*   在 Android 3.2 / API 13 之前，使用 layout-small/normal/large/xlarge。
*   在 Android 3.2 / API 13 之后，使用 layout-hdpi 或 layout-sw600dp 等。

这是您可以使用的官方限定词表，在它们之间放置一个破折号：

*   [http://developer.android.com/guide/practices/screens_support.html#qualifiers](http://developer.android.com/guide/practices/screens_support.html#qualifiers)

## 一般来说，我认为你只会为平板电脑设计横向模式，因此，你可以考虑只使用这些，并且：

*   布局-ldpi
*   布局-mdpi
*   布局-hdpi
*   布局-xhdpi
*   布局-大
*   大地布局
*   布局-xlarge
*   布局-xlarge-land

和你的drawables：

*   可绘制的 ldpi
*   可绘制的 mdpi
*   可绘制的 hdpi
*   可绘制的 xhdpi

## 此外，默认情况下，我目前选择为 6 种不同的设备设计，它们总体上最适合手机 (4) 和平板电脑 (2) 的配置文件 ldpi、mdpi、hdpi、xhdpi：

*   三星 Galaxy S3（720x1280，xhdpi，正常屏幕尺寸）
*   三星 Galaxy S2（480x800，hdpi，正常屏幕尺寸）
*   三星 Galaxy Ace Plus（320x480，mdpi，正常屏幕尺寸）
*   三星 Galaxy Mini（240x320，ldpi，正常屏幕尺寸）
*   三星 Galaxy Tab 10.1（800x1280，mdpi，超大屏幕尺寸）
*   三星 Galaxy Tab 7.0（600x1024，hdpi，大屏幕尺寸）

为这些设备进行设计可确保该应用程序在大多数其他设备上也能正常运行。

希望这些信息有所帮助。

# asp.net - 浏览预览页面 asp.net

> ID：14462169
> 
> 赞同：0
> 
> 时间：2013-01-22T15:32:47.663
> 
> 标签：asp.net, web-applications, sitemap

我正在尝试做这样的事情：

![在此处输入图像描述](../Images/ad32920a5041c32035c39cdf4838177f.png)

但问题是我没有只有 2 个级别的预览路径，我可以有很多。

您可以在下面看到所有可能的路径方式：主页 > 高级搜索 > [项目名称]

首页 > 项目列表 > [项目名称]

首页 > 高级搜索 > [媒体名称]

首页 > 媒体列表 > [媒体名称]

首页 > 高级搜索 > [媒体名称] > [项目名称]

首页 > 媒体列表 > [媒体名称] > [项目名称]

主页 > 高级搜索 > [演员姓名]

首页 > 演员列表 > [演员姓名]

主页 > 高级搜索 > [演员姓名] > [演员姓名] > ...[演员姓名] > [项目姓名]

首页 > 演员列表 > [演员姓名] > [演员姓名] > ...[演员姓名] > [项目名称]

**一般来说：**

作为演员，您可以浏览演员和项目。在项目中，您无法在其他任何地方导航。在媒体上，您只能浏览项目。

我知道有`javascript:history(-1)`，但我也想知道预览媒体、演员的名称，或者是演员、媒体或项目列表，还是高级搜索。

我唯一想到的是：当有人在**项目列表**中选择一个项目（单击链接）时只有一个全局变量，更改`numOfRoute`并将名称**“项目列表”**存储在`String`表上。其他都一样：当在演员身上时，存储他的名字并增加变量。

因此，当在`project.aspx`页面上时，有一个循环通过使用`history(-1, -2, -3 ..)`这些链接的名称表。

此外，另一个问题是`onclick`CodeBehind 上的链接，我必须通过 javascript 更改这些全局变量。

我不知道事情的实际情况如何，我不确定是否有更好的方法，我是网页设计编程的初学者。他们如何应对这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:58:18.163

以下代码示例显示站点地图数据

```
<siteMap>
  <siteMapNode title="Home" description="Home" url="~/default.aspx" >
    <siteMapNode title="Demo" description="demo" 
      url="~/Demo.aspx">
    <siteMapNode title="XYZ" description="xyz" 
      url="~/XYZ.aspx" />
    </siteMapNode>
  </siteMapNode>
</siteMap> 
```

您可以通过以下方式将 SiteMapPath 控件添加到 XYZ.aspx：

```
 <asp:SiteMapPath ID="SiteMapPath1" Runat="server"></asp:SiteMapPath> 
```

在浏览器中查看 XYZ 时，SiteMapPath 控件显示类似

> 主页 > 演示 > XYZ（作为超链接）

# trac - 两个完全独立的 trac 版本

> ID：14462170
> 
> 赞同：1
> 
> 时间：2013-01-22T15:32:52.593
> 
> 标签：trac

我想在我们当前版本 (0.11.7) 旁边安装一个全新版本的 Trac，我正在寻找方法来做到这一点。经过一些研究，它说要使用 python 的 virtualenv，但我正在尝试找到如何在不干扰我们的 0.11.7 版本的情况下完成此操作的具体步骤。

我正在使用 Ubuntu 作为操作系统。感谢任何输入，包括任何可能的陷阱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T18:17:40.137

试试[virtualenvwrapper](http://www.doughellmann.com/projects/virtualenvwrapper/)，它让使用 python-virtualenv 变得轻而易举。

[用户文档](http://virtualenvwrapper.readthedocs.org/en/latest/)中解释了创建和使用这种 Python 虚拟环境的步骤。这些环境构成了我自己的 Trac 插件开发的核心设置。如果您需要，它甚至允许使用自定义 python 版本。我发现需要给每个环境一个不言自明的名称，并将其与不同的 Trac 环境目录一起使用，以匹配不同 Trac 版本所需的 db 版本，即 virtualenv "trac-0.11_py2.4" 和 Trac env "sandbox_0.11"， “trac-0.12_py2.6”与 Trac env “sandbox_0.12”等。

# ruby-on-rails - 在暂存环境中运行迁移和 rake 任务时未加载模型

> ID：14462171
> 
> 赞同：2
> 
> 时间：2013-01-22T15:32:54.647
> 
> 标签：ruby-on-rails, rake, rails-migrations

我正在尝试使用 RAILS_ENV=staging bundle exec rake db:migrate --trace 在 staging 中运行以下迁移

```
class UpdateDatabaseForPayments < ActiveRecord::Migration
  def change
    # Create the plans
    Plan.create(:name => "Student")
    Plan.create(:name => "Professional")
    Plan.create(:name => "Studio")
    # create_subscription just creates a subscription the user, 
    # nothing out of the ordinary there.
    User.all.each do |u|
      u.create_subscription
    end
  end
end 
```

迁移文件名为 20130121190404_update_database_for_payments.rb。

这失败并出现以下错误：

```
uninitialized constant UpdateDatabaseForPayments::Plan
/home/ubuntu/apps/teamup/releases/20130121204425/db/migrate/20130121190404_update_database_for_payments.rb:4:in `change'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:407:in `block (2 levels) in migrate'
/home/ubuntu/.rvm/rubies/ruby-1.9.3-p327-turbo/lib/ruby/1.9.1/benchmark.rb:280:in `measure'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:407:in `block in migrate'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:129:in `with_connection'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:389:in `migrate'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:528:in `migrate'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:720:in `block (2 levels) in migrate'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:777:in `call'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:777:in `ddl_transaction'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:719:in `block in migrate'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:700:in `each'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:700:in `migrate'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:570:in `up'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:551:in `migrate'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/railties/databases.rake:179:in `block (2 levels) in <top (required)>'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/home/ubuntu/.rvm/rubies/ruby-1.9.3-p327-turbo/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/bin/rake:23:in `load'
/home/ubuntu/apps/teamup/shared/bundle/ruby/1.9.1/bin/rake:23:in `<main>'
Tasks: TOP => db:migrate 
```

现在，奇怪的是

*   此迁移在我的暂存环境的本地副本上运行得很好
*   我可以毫无问题地通过 rails 控制台创建计划。

我尝试过使用文件名，但无论我做什么，都会出现同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:13:46.963

所以我们发现问题在于我们在暂存中启用了线程安全，因为它将成为 Rails 4 中的标准。显然自动加载不是线程安全的，这就是未加载模型的原因。 [该错误也在这里讨论。](https://rails.lighthouseapp.com/projects/8994/tickets/2506-models-are-not-loaded-in-migrations-when-configthreadsafe-is-set) 解决方法是设置以下

```
config.threadsafe! unless $rails_rake_task 
```

如[Moncef Belyamani](https://github.com/codeforamerica/adopt-a-hydrant/pull/16)所示。

也可以通过在迁移、种子文件或任何其他失败的 rake 任务中明确要求模型来修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:11:19.143

部署包含`Plan`模型的代码。`Plan`正如错误所示，它找不到模型。

编辑：

为了证明这是否确实如此，您可以将以下内容放在失败的迁移的顶部：

```
Rails.application.eager_load!
ActiveRecord::Base.descendants.each {|d| puts d.name} 
```

这将打印出 Rails 知道的模型列表。我预测你不会`Plan`在其中找到。为了满足我的好奇心，您还可以输入：`puts Dir.glob("app/models/*.rb").map{|p| p.sub("app/models/","")}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:07:39.477

抱歉，我忍不住发了这个。

![在此处输入图像描述](../Images/63fee2f60863c80d915b6e67b3dd0733.png)

迁移用于更改您的数据库架构。数据应在seeds.rb 中创建。

# parser-generator - 基于 BNF 语法的 CMIS 查询解析器

> ID：14462178
> 
> 赞同：3
> 
> 时间：2013-01-22T15:33:36.457
> 
> 标签：parser-generator, bnf, cmis

对于我们的 CMIS 服务器端实现，我希望构建一个解析器来解析作为查询方法的输入提供的查询语句。CMIS 为查询语句定义了 BNF 语法。我想知道生成这个 BNF 解析器的最佳方法是什么？

我们的实现是在 C# 中。CMIS 查询基于 SQL 语法以及 CMIS 定义的一些谓词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T21:43:28.420

Apache Chemistry OpenCMIS 在服务器端使用 Antlr 来解析、验证和解释 cmisQL 语法。您可以尝试重用 Apache Chemistry OpenCMIS 实现中定义的 Antlr 语法，以使用 antlr3 生成您自己的[C# 解析器](http://www.antlr.org/wiki/display/ANTLR3/Antlr+3+CSharp+Target)

OpenCMIS 语法文件可[在此处](https://svn.apache.org/repos/asf/chemistry/opencmis/trunk/chemistry-opencmis-server/chemistry-opencmis-server-support/src/main/antlr3/org/apache/chemistry/opencmis/server/support/query/)获得（在 Apache 许可证下）

[cmis](/questions/tagged/cmis "显示标记为“cmis”的问题") [antlr](/questions/tagged/antlr "显示标记为“antlr”的问题") [csharp](/questions/tagged/csharp "显示标记为“csharp”的问题")

# iphone - 更新凭据后 Facebook 请求不起作用（帐户框架）

> ID：14462182
> 
> 赞同：1
> 
> 时间：2013-01-22T15:33:44.740
> 
> 标签：iphone, facebook, ios6, acaccount

我刚刚弄清楚如何使用新的 iOS 6 帐户框架正确地从 Facebook 请求信息。我现在的问题是，即使我更新了凭据，Facebook 仍然告诉我我没有访问权限。我想我的最后一个（工作）令牌已过期，现在我无法获得新令牌。应正确设置所有帐户 (tw + fb)。renewResult也是*ACAccountCredentialRenewResultFailed*，它可以是任何东西*......*

这是我的代码：

```
- (void)performSocialRequest:(SLRequest *)request completion:(void (^)(NSDictionary *responseDict))completion{
    __block NSDictionary *accountInfo;
    [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        if ([request.account.accountType.identifier isEqualToString:ACAccountTypeIdentifierTwitter]) {
            accountInfo = [[NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error]lastObject];
            completion(accountInfo);
        } else {
            accountInfo = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];
            if ([accountInfo objectForKey:@"error"]) {
                [self.accountStore renewCredentialsForAccount:request.account completion:^(ACAccountCredentialRenewResult renewResult, NSError *error) {
                    if (renewResult == ACAccountCredentialRenewResultRenewed) {
                        NSLog(@"renewal succesful");
                        [request performRequestWithHandler:^(NSData *responseData2, NSHTTPURLResponse *urlResponse, NSError *error) {
                            completion([NSJSONSerialization JSONObjectWithData:responseData2 options:kNilOptions error:&error]);
                        }];
                    } else if (renewResult == ACAccountCredentialRenewResultRejected) {
                        NSLog(@"rejected");
                        completion(accountInfo);
                    } else if (renewResult == ACAccountCredentialRenewResultFailed){
                        NSLog(@"unknown (error: %@)", error);
                        completion(accountInfo);
                    }
                }];
            } else {
                completion(accountInfo);
            }
        }
    }];
} 
```

我从 Facebook 服务器得到的答案总是一样的：

```
{
error =     {
    code = 2500;
    message = "An active access token must be used to query information about the current user.";
    type = OAuthException;
};
} 
```

希望各位大神给点意见，先谢谢了。。。

达里奥

# iphone - 如何创建使用来自 Web 服务的大量图像的应用程序

> ID：14462186
> 
> 赞同：0
> 
> 时间：2013-01-22T15:33:52.563
> 
> 标签：iphone, ios, web-services, uiimageview

我是iOS开发的新人。我必须为汽车经销商制作一个应用程序，我必须在其中显示不同颜色的不同汽车。请告诉我最好的方法，因为我每次都必须从网络服务器获取大量图像。如何减少获取图像的渲染时间。

请考虑我是 ios 开发的新手，需要您的帮助。如果您有任何示例应用程序，请与我分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:50:36.463

If you are going to show images in UITableView then you can use lazy loading. It will load images only for the displayed rows and once image for any row index has been downloaded, it will not repeat downloading for that row index. So its faster and useful.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:40:40.970

您可以使用 DB 将图像存储为 BLOB，并且仅在服务器有更新时才获取图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:41:31.187

首先，确保您发送的图像不超过所需大小。如果您有一个显示汽车图片的列表视图，请让网络服务向您发送（最好）尺寸完全正确的预制缩略图。

其次，确保图像与数据集分开加载。执行此操作的最佳位置是在您的`UITableViewCell`. 只需让您`UITableViewCell`启动他们自己的线程来下载并在图像出现后立即显示。

第三; 缓存。确保保存缩略图的本地副本，并确保 Table View Cells 搜索图像的本地副本，如果它们已经在本地存在，则加载它们而不是下载它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T15:42:21.240

你可以做：-

*   使用延迟加载
*   使用分页
*   使用谓词进行搜索
*   使用快速枚举

这些东西通常会让你的应用程序保持流畅

# android - 如何删除具有 root 权限的外部存储？

> ID：14462187
> 
> 赞同：1
> 
> 时间：2013-01-22T15:33:53.700
> 
> 标签：android

我`isExternalStorageRemovable()`的代码中有。调用此函数后，任何人都想删除外部存储。但是，我不知道如何。如何删除具有 root 权限的外部存储？

最好的答案；

*   喷射
*   安全移除设备

# ios - iphone 4 上的 air 应用程序的性能问题

> ID：14462188
> 
> 赞同：1
> 
> 时间：2013-01-22T15:33:55.040
> 
> 标签：ios, performance, mobile, air

目前我正在开发适用于 iOS 和 Android 的 Air 应用程序。Air 3.5 是目标。iPhone 4 / 4s 的性能总体上是可以接受的，经过大量优化：gpu 渲染、StageQuality.LOW、尽可能避免使用向量等。我确实在提升性能方面付出了很多努力。

尽管如此，每隔一段时间，应用程序就会变得非常缓慢。在此之后没有精确的时间点或动作或动作组合。有时，它不会发生几天。但是当它发生时，只有杀死应用程序并再次启动它会有所帮助，因为在那之后应用程序会保持缓慢。因此，我不是在谈论仅在（某些）iPhone 4 和 4s 上出现的小问题。不在 iPad 3,4、iPhone 5、任何 Android 设备上...

有没有人在哪里可以找到解决方案有类似的经验和指示？gpu内存满了怎么办？还是设备内存？这可能涉及吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:21:54.807

请不要期望 Adob​​e Air 具有作为本机应用程序的性能。我也在用 Adob​​e Air 开发应用程序。

根据您的开发经验。我认为这与内存问题有关，因为在乞讨阶段性能并不算太差，但加班时会变得很糟糕（所以你必须杀死应用程序）。我建议您调查内存泄漏问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T04:49:53.437

希望我的经验可以帮到你。

我有一个类似的问题，在游戏过程中的某个时候，帧率会从 30fps 下降到无法恢复的 12fps。起初我以为我的 GPU 内存用完了，它又回到了使用 CPU 进行渲染。

使用 Adob​​e Scout 我发现发生这种情况时，渲染时间高得离谱。

更新到 Air 3.8，我通过限制一次渲染和内存中的位图数量解决了这个问题。我只会为适当的关卡创建新的背景实例，然后在关卡结束时将它们标记为垃圾收集，等待几秒钟然后移动到下一个关卡。

可以解决您的问题的是，如果您一次减少内存中的纹理数量，只显示您需要的纹理。如果要将活动纹理换成新纹理，请将具有该纹理数据的所有对象设置为 null：

```
testMovieClip = null; 
```

并从中删除所有侦听器，以便垃圾收集器将其拾取。接下来，您可以使用 AIR 强制进行垃圾收集：

```
System.gc(); 
```

在调用 gc 之后实例化你想要渲染几帧的新纹理。使用 Scout 和 iOS 配套应用程序监控资源以确认其正常工作。

您还可以尝试检测帧速率何时下降，并将一些对象设置为 null 然后强制进行垃圾收集。就我而言，如果我通过垃圾收集将游戏移至空帧几秒钟，则帧速率将恢复并且游戏将恢复使用 GPU 进行渲染。

希望这可以帮助！

# php - 使用内部连接的 group by 和 order by 子句问题

> ID：14462189
> 
> 赞同：0
> 
> 时间：2013-01-22T15:33:56.133
> 
> 标签：php, mysql, inner-join

我有两张桌子，即位置和飞行员。我一直在尝试根据 location_id 获取数据，即按日期（计划日期）选择以特定 location_id 顺序飞行的飞行员。

我正在使用 group by，因为我只需要显示不同的飞行员。

```
select  B.*, 
    A.rather_to_be_flying_now,
    A.here_now,
    A.flying,
    A.when,
    A.my_favorite,
    A.start,
    A.end,
    A.Locationid
from locations A 
inner join pilots B 
    on A.Pilotid=B.pilot_id 
where A.VenueID='$venueid' 
    and (A.flying='1' or A.here_now='1') 
group by A.Pilotid 
ORDER BY A.start 
```

如果我不包含 group by 子句，则查询效果很好。它返回以下结果

**没有 group by 子句** ![在此处输入图像描述](../Images/2f084e5e1e5a457e78a08ff8b1ac8b75.png)

**使用 group by 子句** ![在此处输入图像描述](../Images/f3bdca3b21abdfd3a318410dab8c25af.png)

但是上表显示的顺序错误，因为对于 Pilotid 1（时间顺序） ，输出必须返回开始时间为**2013-01-24 02:00:00 。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:41:13.577

您可以使用`MIN()`

```
select  B.*, 
    A.rather_to_be_flying_now,
    A.here_now,
    A.flying,
    A.when,
    A.my_favorite,
    MIN(A.start) as start,
    A.end,
    A.Locationid
from locations A 
inner join pilots B 
    on A.Pilotid=B.pilot_id 
where A.VenueID='$venueid' 
    and (A.flying='1' or A.here_now='1') 
group by A.Pilotid 
ORDER BY A.start 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:37:19.273

试试这个：

```
SELECT
  B.*,
  A.rather_to_be_flying_now,
  A.here_now,
  A.flying,
  A.when,
  A.my_favorite,
  A.start,
  A.end,
  A.Locationid
FROM locations A 
INNER JOIN
(
   SELECT pilotid, MIN(start) MinStart
   FROM locations
   GROUP BY pilotid
) a2  ON A.pilotId = a2.pilotId
     AND a.start   = a2.minStart 
INNER JOIN pilots B on A.Pilotid = B.pilot_id 
WHERE A.VenueID = '$venueid' 
  AND (A.flying='1' OR A.here_now='1');
ORDER BY A.start ; 
```

这将只为您提供那些具有最短开始日期的飞行员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T15:42:29.927

试试这个查询 -

```
SELECT
  p.pilit_id, l.location_id, l.start
FROM pilots p
  JOIN (SELECT l1.*
        FROM locations l1
        JOIN (SELECT location_id, MIN(start) start
              FROM locations
              GROUP BY locations) l2
        ON l1.id = l2.id AND l1.start = l2.start
        ) l
    ON l.pilot_id = p.pilot_id
GROUP BY p.pilot_id 
```

添加您的 WHERE 条件。

# python - 转义双引号与单引号

> ID：14462194
> 
> 赞同：-3
> 
> 时间：2013-01-22T15:34:11.020
> 
> 标签：python, git, github

我注意到这段代码：

```
os.system("'{0}'".format(path)) 
```

并看到有人将其更改为：

```
os.system("\"{0}\"".format(path)) 
```

我想知道通过将它从单引号更改为双引号它给你带来了什么好处？

这是我从中提取的原始提交：[https ://github.com/mattn/legit/commit/84bd1b1796b749a7fb40e0b734d2de29ddc9d3d9](https://github.com/mattn/legit/commit/84bd1b1796b749a7fb40e0b734d2de29ddc9d3d9)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:06:57.350

真的不多，但经验法则使用单引号进行文字赋值和打印。这样，您将避免打印一开始就不应该存在的东西。

单引号通常很有用，因为它们是文字，并且包含您键入的字符，例如**'Hi there/'**实际上会打印**Hi there/**

但是，如果您需要类似**'Hi there /n' 之**类的内容，如果将其放在单引号中，它会字面上为您提供**'Hi there /n'**而双引号将为您提供您需要的结果**"Hi there" 然后换行**.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T01:23:21.503

在 Windows 上，命令行参数由程序本身解析，而不是 shell 或 cmd.exe。并且大多数Windows程序通常用双引号解析带引号的字符串。`python.exe`是一样的。在 unix 操作系统上，命令行参数由 shell 解析。大多数shell都解析单引号/双引号。当然，双引号扩展`$`或外壳可以处理的东西。但是，路径不会包含`$`.

此更改是可以在许多操作系统上合法工作的解决方法。

![在此处输入图像描述](../Images/4316b5589794e6f0271682b345f63d16.png) ![在此处输入图像描述](../Images/3cba12e608e73648e751ddb77c74b985.png)

# adobe-edge - HTML 中的 Adob e Edge Animate 的替代内容？

> ID：14462195
> 
> 赞同：3
> 
> 时间：2013-01-22T15:34:12.360
> 
> 标签：adobe-edge

我有这个由客户提供的 Adob​​e Edge 内容。

HTML 代码是

```
<div id="Stage" class="EDGE-XXXXXXXXX">

</div> 
```

我应该怎么做才能获得 IE 8 及以下版本的替代内容？

如果我只是在 div 中插入一些内容，它不会被 Edge 覆盖。

我知道，Edge 有一种底层支持，但我自己并不拥有 Edge，所以我无法尝试。

那么使用下层支持功能的实际 HTML 标记是什么？

* * *

## 编辑

`<noscript>`不行，因为 Internet Explorer 8*有*JS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:08:16.147

在 *_edgePreload.js 文件中导航到文件末尾，其中显示：

```
})("EDGE-XXXXXXXX"); 
```

其中 ID 与您的 HTML 源代码中的 ID 相同。在这个确切的字符串（可能有一些空格）之前立即添加一个新变量，如下所示（确保 dlContent 尚未分配类似的节，如果是则替换该分配 - 我猜你的 js 文件被缩小了所以这看起来与您的版本不同，但粘贴到文件中时它仍然可以工作！）：

```
dlContent={
   dom: [
   {
      id:'Poster',
      type:'image',
      tag:'img',
      linkURL:"URL/to/some/content",
          //This line can be omitted if no linking of the image is desired
      linkTarget:"_top",//omit this line if the above line has been omitted
      rect:['0','0','100%','100%','auto','auto'],
          //values in order: x-pos, y-pos, width, height, ?, ?
          // not sure what the two auto values correspond to right now
          // the rectangle is the "viewport" into what would be the animation in better browsers.
      fill:["rgba(0,0,0,0)",'/path/to/an/image.jpg','0px','0px']
          // values in order: background colour and alpha transparency, an image to use, image position x and y within the rectangle defined above.
   }]}; 
```

# backbone.js - 使用 Backbone 栏时如何避免浏览器导航栏上的 site#tag

> ID：14462197
> 
> 赞同：1
> 
> 时间：2013-01-22T15:34:15.887
> 
> 标签：backbone.js, uinavigationbar

从骨干，

路由器帮助开发人员创建和跨视图导航。它使用 href='#page' 来触发一般任务，但这意味着这将显示在浏览器的导航栏上。

在没有导航栏向网站访问者显示此类详细信息的情况下，我如何仍然使用 Backbones 路由器功能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:49:20.243

哈希显示在导航栏中的事实`#page`实际上非常有帮助，因为这意味着如果用户刷新页面，或将其添加到书签以供以后使用，路由器将能够为您加载正确的路由。

如果只是`#`你不喜欢的标志，你可以使用路由器的 pushState 支持（[docs](http://backbonejs.org/#Router)）来获取正常的 URL，例如`domain.com/page`代替`domain.com/#page`. 请注意，对于不支持 pushState 的旧浏览器，`#`仍然使用 URL，并且您还需要配置 Web 服务器以返回所有子页面 URL 的 HTML 内容页面。

除非您非常迫切地需要隐藏导航状态，否则我不会担心。只需以“用户友好”的方式命名您的路线。

# c# - 每个条目后按名称排序

> ID：14462200
> 
> 赞同：4
> 
> 时间：2013-01-22T15:34:26.373
> 
> 标签：c#, linq, sorting

我正在使用此 LINQ 语句按产品名称（升序）对列表进行排序，其中包含产品名称 ( `string`) 并且`Sizes`可用于每个产品 ( `List<byte>`)；

```
LinkedList<FullItemDetails> itemDetails = new LinkedList<FullItemDetails>();  

public class FullItemDetails   
{
    public string ProductName { get; set; }
    public List<byte> Sizes { get; set; }
} 
```

现在每次我输入一个新条目时；`Jacket,6,12,18,10`，我认为我的程序正在重新排序我的列表；

```
itemDetails.AddLast(fullItemDetails);

//SortedProducts
itemDetails = Products.OrderBy(x => x.ProductName).ToList(); 
```

如果列表已经排序，我只需要将最后一个条目放在正确的位置。最好的方法是什么。也可以降低算法的复杂度。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:47:34.480

对于 a 来说，这似乎是一个理想的问题`SortedList`，因为您有一个键（名称）和值（`List<int>`用于大小）。

文档可在此处获得：http: [//msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)

列表声明如下所示：`SortedList<string, List<int> >`. 所有插入都将按字符串排序，并且可以根据每个键枚举值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:52:44.317

代替`List<T>`，使用`SortedList<TKey, TValue>`或`SortedSet<T>`。您可以通过[相应的构造函数](http://msdn.microsoft.com/en-us/library/ms132323.aspx)`IComparer<T>`传入一个以使用特定的排序算法。[如果你想使用 Lambda 表达式，你可以使用一个小的包装类来包装一个](http://dpatrickcaldwell.blogspot.nl/2009/04/converting-comparison-to-icomparer.html).[`Comparison<T>`](http://dpatrickcaldwell.blogspot.nl/2009/04/converting-comparison-to-icomparer.html)

这将导致类似：

```
ICollection<FullItemDetails> _itemList = new SortedSet<FullItemDetails>(new ComparisonComparer<FullItemDetails>((x,y) -> x.ProductName.CompareTo(y.ProductName)) 
```

您的收藏现在将始终被订购。

使用 .NET 4.5 时，可以[使用lambda 表达式`Comparer<T>.Create`创建`IComparer`](http://msdn.microsoft.com/en-us/library/hh737198.aspx)实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:46:21.160

您可以使用`SortedList<string,FullItemDetails>`.

然后你像这样添加你的时间`list.Add(fullItemDetails.Name,fullItemDetails)`

**[编辑]**：添加或删除元素后，顺序将保持不变。

**[Edit2]**使用 LINQ，您使用列表来存储您的项目（添加/删除）：`List<FullItemDetails> originalList`和其他属性来*读取*您的排序数据：

```
IEnumerable<FullItemDetails> sortedList = originalList.OrderBy(e => e.Name).ThenBy(e => /* logic to order by another property*/); 
```

现在你可以遍历你的`sortedList`和因为这个排序列表是`IEnumerable<T>`每次你遍历它时你将拥有与你的元素完全相同的元素`originalList`（在添加或删除项目之后）。

换句话说：`sortedList`只包含读取你的逻辑`originalList`。

希望这可以帮助。问候。

# object - QTP 对象识别不一致

> ID：14462203
> 
> 赞同：0
> 
> 时间：2013-01-22T15:34:39.560
> 
> 标签：object, repository, qtp

我正在编写一个脚本来自动化桌面应用程序。我遇到的问题是 QTP 在运行时无法识别的窗口很少 该脚本在 70% 的时间内运行良好。但有时它会给我一个错误，说对象不可见。而且我必须手动从 OR 中删除对象并将其再次添加到 OR。我不知道它为什么这样做。
这对我很有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:57:46.497

您应该检查窗口的描述，看看它与现有窗口有何不同。然后，您可以更新描述以使用正则表达式或使用不同的属性。

[维护运行模式](http://www.youtube.com/watch?v=e2Xhln_3NOk)可以通过显示差异和建议正则表达式来帮助您做到这一点。

# sql - 过滤 SQL 连接

> ID：14462205
> 
> 赞同：0
> 
> 时间：2013-01-22T15:34:46.453
> 
> 标签：sql, tsql, join

我正在尝试查询我的内部客户。我有两张桌子`A`和`B`. `A`存储一整月的所有销售交易数据。`B`存储特定部门整月的所有销售交易数据（形式略有不同）。

客户想要的结果是表 B 中的**所有**检查 #，**加上表 A 中****与**表 B中的任何检查 # 匹配且`T_ID`值为 的任何检查 # `1, 2, or 3`。

注意：在 A 和 B 中，检查 # 可以有多个条目。

我*认为*我的查询是正确的（？？），但客户告诉我它“看起来不正确”（具体来说，他是说我们从表 A 中提取了太多记录）。

我对我的 SQL 没有足够的信心来反驳他（并且这个查询返回了几千行），所以我想知道是否有人可以给下面的查询一次，让我知道我哪里出错了？

这是在 MS SQL Server 2000 上运行的。

```
SELECT  
        A.T_ID, 
        A.check_number,
        A.check_type_id,
        A.cashier_id,
        A.terminal_id,
        A.first_tender,
        A.tendered_date_time,
        A.tender_amount,
        A.change_amount,
        A.net_tender_amount,
        A.currency_received,
        B.account_name,
        B.account_number
FROM tCTD AS A
INNER JOIN tGAAAD AS B
        ON A.check_number = B.check_number
WHERE EXISTS 
    (   SELECT * 
        FROM tCTD 
        WHERE check_number = A.check_number 
        AND T_ID IN (1, 2, 3)
    ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:37:59.523

> 客户想要的结果是表 B 中的所有检查 #，加上表 A 中与表 B 中的任何检查 # 匹配且 T_ID 值为 1、2 或 3 的任何检查 #。

A`left join`似乎符合要求，表 B 为左侧：

```
FROM tGAAAD AS B
LEFT JOIN tCTD AS A
ON A.check_number = B.check_number
   AND T_ID in (1,2,3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:42:06.757

你所拥有的相当于更简单的

```
SELECT  
        A.T_ID, 
        A.check_number,
        A.check_type_id,
        A.cashier_id,
        A.terminal_id,
        A.first_tender,
        A.tendered_date_time,
        A.tender_amount,
        A.change_amount,
        A.net_tender_amount,
        A.currency_received,
        B.account_name,
        B.account_number
     FROM 
             tCTD A
         INNER JOIN 
             tGAAAD B
                 ON A.check_number = B.check_number
    WHERE 
             A.T_ID IN (1, 2, 3); 
```

从你的描述听起来你真的想要

```
SELECT  
        A.T_ID, 
        A.check_number,
        A.check_type_id,
        A.cashier_id,
        A.terminal_id,
        A.first_tender,
        A.tendered_date_time,
        A.tender_amount,
        A.change_amount,
        A.net_tender_amount,
        A.currency_received,
        B.account_name,
        B.account_number
     FROM 
             tGAAAD B
         LEFT JOIN 
             tCTD A
                 ON A.check_number = B.check_number
    WHERE 
             ISNULL(A.T_ID, 1) IN (1, 2, 3); 
```

但是，如果 check_number 提供了表之间的多对多关系，那么您也暗示这可能无法满足您的需求。您是否需要以某种方式聚合关系的产品？

# sql-server - 使用平移对维度属性值进行排序

> ID：14462207
> 
> 赞同：2
> 
> 时间：2013-01-22T15:35:02.913
> 
> 标签：sql-server, sorting, internationalization, ssas, olap

我正在将维度属性值翻译成各种语言。目标是用户可以动态更改包含所有文本的立方体语言。只需通过 CaptionColumn 将带有翻译文本的列绑定到属性即可。

但是，排序被破坏了。似乎只能按 KeyColumn 或 ValueColumn 排序，但我需要按 42 个翻译列中的任何一个排序。因此，如果用户更改语言，则必须通过相应的语言列进行排序。

我尝试使用 CaptionColumn 的排序规则，但没有成功。

如何做到这一点？

# xcode4.2 - 到达终点时 XCode 搜索停止

> ID：14462212
> 
> 赞同：1
> 
> 时间：2013-01-22T15:35:23.613
> 
> 标签：xcode4.2

在正常情况下，XCode 从源文件的顶部开始搜索，当它到达底部时。但在我的情况下，由于某种原因它停止搜索并显示指标 - 查看屏幕截图。我想，我已经改变了一个设置。但我不知道如何将其恢复为默认行为。

![在此处输入图像描述](../Images/241c6502d866f6387d64ea18f8ac9e7f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:45:14.703

哦，我自己找到了解决方案。应检查“包装”： ![在此处输入图像描述](../Images/ac0eeccefbfbe65202688c89a612c0f8.png)

# jquery - IE 7/8 两个元素之间的差距

> ID：14462213
> 
> 赞同：0
> 
> 时间：2013-01-22T15:35:33.020
> 
> 标签：jquery, html, css

嗨，我在 IE 7/8 示例中发现了一个小问题：

```
 problem is probably here 

  #sequence-theme .title {
  font-family: 'Fjalla One', sans-serif;
  font-size: 5em;
  left: 65%;
  padding:10px 30px 10px 10px;
  opacity: 0;
  bottom:1%;
  zoom: 1;
  z-index: 50;
  } 
```

![](../Images/70bf4cef8ff7499c7a5e29a2f0b2ff8d.png) ![](../Images/baeaef7ac29a82d1e12d9764ba058035.png)

我认为css有问题...有人请帮我解决这个问题吗？

[**工作演示**](http://jsfiddle.net/YJ6ZJ/embedded/result/)

**谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:40:21.920

尝试设置一个固定的高度和`display:block`.

# android - Android Facebook SDK 让用户无法登录？

> ID：14462216
> 
> 赞同：5
> 
> 时间：2013-01-22T15:35:38.467
> 
> 标签：android, facebook

我有一个屏幕弹出 Facebook 登录的东西，代码如下：

```
 //facebook stuff
    if (Session.getActiveSession() == null ||  Session.getActiveSession().isClosed()) {
        Session.openActiveSession(this, true, null);
    } 
```

如果用户点击“后退”按钮并关闭登录内容，它会自动将它们发送到应该受 facebook 保护的屏幕（并且由于没有用户登录而出现错误）。

我该如何处理？我看到在旧的 sdk 或其他任何东西中，它有：

```
facebook.isSessionValid() 
```

还有办法做到这一点吗？如果是这样，我将如何实际做到这一点？某种while循环，直到他们最终停止尝试退出？有没有办法禁用退出该屏幕？我根本不生成那个屏幕：facebook 会。这只是我必须忍受的错误吗？

编辑：

对此的推论是，我刚刚注意到，如果我使用 facebook 应用程序注销，facebook sdk 不会在我自己的应用程序中告诉我这一点：它仍然会进行身份验证。更糟糕的是，即使在我注销后它仍然执行此操作，然后使用 facebook 应用程序以完全不同的用户身份登录。我该如何处理？

编辑：更多代码

这就是我现在登录 facebook 的方式（在 Activity 的 onCreate 中）并要求获取我的图形用户和我的朋友（首先获取我，然后一旦完成异步操作，获取朋友）

```
if (Session.getActiveSession() == null ||  Session.getActiveSession().isClosed()) {
            Log.v(CLASS_NAME, "Logging into facebook");
            //Session.openActiveSession(this, true, new Session.statusCallback());
            final Session.StatusCallback sessionStatusCallback = new Session.StatusCallback() {

            @Override
            public void call(Session session, SessionState state,
                    Exception exception) {
                // TODO Auto-generated method stub
                    if(exception != null)
                    {
                        // Handle fail case here.
                        Log.v(CLASS_NAME, "Facebook login error " + exception);
                        return;
                    }

                    // If session is just opened...
                    if(state == SessionState.OPENED)
                    {
                        // Handle success case here.
                        Log.v(CLASS_NAME, "Facebook login success!");
                        return;
                    }

            }

        };

        Session.openActiveSession(this, true, sessionStatusCallback);
    }

    //annonymous inner class
    final Callback<ArrayList<GraphUser>> inner_callback_class2 = new FacebookHelper.Callback<ArrayList<GraphUser>>() {
        @Override
        public void setResult(ArrayList<GraphUser> result) throws Exception {
            // TODO Auto-generated method stub
            for(GraphUser user : result){
                friends.put(user.getId(), user);
            }
            friends.put(me.getId(), me); //i can see my own comments as well

            //get comments
            //ArrayList<String>tmp = new ArrayList<String>();
            //tmp.add("Jenny");
            //tmp.add("Charles");
            //initial comment call so I can view them
            //
            getComments();
        }
    };

    //annonymous inner class
    FacebookHelper.Callback<GraphUser> inner_callback_class = new FacebookHelper.Callback<GraphUser>() {
        @Override
        public void setResult(GraphUser result) throws Exception {
            // TODO Auto-generated method stub
            me = result;
            Log.v("ANYTHING", me.getName());
            //make sure i have an id before I do anything
            FacebookHelper.getMyFriends(Session.getActiveSession(),inner_callback_class2);
            //post comment
            //RailsServerHelper.postComment("Comment Testing", movie.id, myID, currentNPT);
        }
    };

    FacebookHelper.getMyID(Session.getActiveSession(), inner_callback_class); 
```

这就是我结交朋友的方式（在静态助手类中）：

```
public static void getMyFriends(final Session session, final Callback<ArrayList<GraphUser>> callback){
    Request request = Request.newMyFriendsRequest(session, new Request.GraphUserListCallback() {
        @Override
        public void onCompleted(List<GraphUser> users, Response response) {
            // TODO Auto-generated method stub
            ArrayList<GraphUser> tmp = new ArrayList<GraphUser>(users);
            try {
                callback.setResult(tmp);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    });
    request.executeAsync(); 

} 
```

我唯一拥有的另一件事是完全清除您建议的会话内容：

```
@Override
public void onDestroy(){
    Session.getActiveSession().closeAndClearTokenInformation();
    Log.v(CLASS_NAME, "Clearing facebook session");
    pleaseStop = true;
    super.onDestroy();
} 
```

它根本不会让我重新登录。我有两个正在测试的设备。

第一个设备最初使用一个配置文件运行良好，但是当我尝试尝试第二个配置文件时，它不会记录第一个配置文件，所以我做了 closeAndClearTokenInformation() 事情。这导致没有个人资料，并且它不会再弹出整个 facebook 登录内容。我认为没有配置文件，因为它总是打印出“登录 facebook”，而 getMe 调用的东西永远不会起作用。（只是在这里描述我的代码，我发现我可以将 getMe 的东西放在 facebook 登录回调中）点击后退按钮（无论我坐在那个屏幕上多久）。

由于在登录屏幕上点击了后退按钮，第二台设备从未设法让配置文件登录。从那以后，系统似乎认为它“登录”为无人，我所做的任何事情都无法让它刷新。我从来没有看到它像第一台设备一样尝试登录。closeAndClear 调用似乎在这个设备上什么也没做。如果相关，第二个设备是在完全不同的机器上运行的虚拟模拟器。

在实际设备上，我看到的是：

```
01-24 07:16:04.669: V/MakeAndViewCommentsActivity(3677): Logging into facebook 
```

然后是一堆系统消息（我等了十多分钟），似乎都没有警告或错误，然后：

```
01-24 07:29:05.548: V/MakeAndViewCommentsActivity(3677): Clearing facebook session
01-24 07:29:05.552: V/MakeAndViewCommentsActivity(3677): Facebook login error com.facebook.FacebookException: Log in attempt aborted. 
```

为什么 facebook openActiveSession 没有返回？

编辑：facebook 示例应用程序仍然可以使用原始登录，但不在乎我是否在实际的 facebook 应用程序中注销或更改用户。我猜他们也不包括任何会话清除？

编辑：当我有以下打印声明时：

```
Log.v(CLASS_NAME, "Facebook callback with state: " + state); 
```

我懂了：

```
01-24 09:10:54.333: V/MakeAndViewCommentsActivity(4869): Facebook callback with state: OPENING 
```

回调只被调用一次吗？或者如果它完成，理论上会再次以“OPEN”状态再次调用它？

## 解决方案：

编辑：查找它永远不会离开“OPENING”状态的事实对我帮助很大，事实证明我必须添加代码：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession()
        .onActivityResult(this, requestCode, resultCode, data);
} 
```

然后它就起作用了！我不知道为什么。我想我会对此进行研究，但我很高兴我终于可以改变用户了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:04:24.917

您正在传递一个空回调。如果你实现了回调，你会看到回调会被调用，如果你检查 state.isClosed()，它会返回 true（并且状态应该是 CLOSED_LOGIN_FAILED）。异常参数中也应该有异常。您不能禁用用户退出 SSO 的功能，这是设计使然。

如果用户退出 Facebook 应用程序，您也没有任何通知，这也是正确的。获得更好用户体验的一种方法是，当您代表用户执行某项操作（例如发布状态）时，始终显示用户的姓名和个人资料图片，因此很明显这不是正确的用户。其他选项是每次您的应用退出时始终调用 session.closeAndClearTokenInformation。这样，您总是开始一个新的会话，如果用户安装了 facebook 应用程序，它仍然是一个非常快速的身份验证（无需按下其他按钮）。缺点是如果他们没有 facebook 应用程序，那么它每次都会弹出一个用于登录的 web 对话框（但您可以通过检查 FB 应用程序的存在来解决这个问题）。

# http - 是否将 URL 片段标识符发送到服务器？

> ID：14462218
> 
> 赞同：20
> 
> 时间：2013-01-22T15:35:42.517
> 
> 标签：http, uri-fragment

> **可能重复：**
> [PHP 可以读取 URL 的哈希部分吗？](https://stackoverflow.com/questions/940905/can-php-read-the-hash-portion-of-the-url)

（著名？）网站 mega.co.nz 在 URL 中使用哈希标记来链接到加密文件；哈希标记之后的 URL 部分包含密码，并且声称加密发生在客户端。使用 javascript 进行客户端加密当然是可行的，但是……不是将 URL 发送到服务器，从而将密码泄露给服务器本身吗？

网址看起来像

```
https://example.com/#!encryptedfilename_password 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-22T15:42:02.617

片段标识符不会发送到服务器。浏览器使用哈希片段链接到同一页面中的元素。

# javascript - 其他菜单单击JQuery时如何隐藏子菜单

> ID：14462222
> 
> 赞同：2
> 
> 时间：2013-01-22T15:35:55.423
> 
> 标签：javascript, jquery

我想弄清楚一件事，我有一个单页网站，当其他菜单链接点击[http://jsfiddle.net/kuuwj/15/时，我想隐藏投资组合下的子菜单](http://jsfiddle.net/kuuwj/15/)

# HTML

```
<ul id="navbar">
    <li><a href="#home" id="nav-home">Home</a></li>
    <li><a href="#portfolio" id="nav-portfolio">Portfolio</a>
        <div class="portfolio-apps">
         <section id="website">
            <span class="button">AAAAAAAAAAAAAAAAAAAAAA</span>
         </section>
         <section id="gterminal">
            <span class="button">BBBBBBBBBBBBBBBBBBBBBB</span>
         </section>
         <section>
            <span class="button">CCCCCCCCCCCCCCCCCCCCCC</span>
         </section>
        </div>
    </li>
    <li><a href="#about" id="nav-about">About Me</a></li>
    <li><a href="#contact" id="nav-contact">Contact</a></li>
   </ul> 
```

# JS

```
$(document).ready(function () {
    var portf_apps = $('.portfolio-apps');
    portf_apps.hide();
    $('#nav-portfolio').click(function() {
        portf_apps.show();
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:41:22.653

将您的 Javascript 更改为：

```
$('#navbar > li > a').click(function(){
    portf_apps.hide();
});
$('#nav-portfolio').unbind('click').click(function() {
    portf_apps.show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:39:16.027

在组合显示*之前*将另一个单击事件绑定到其他导航栏元素：

```
$("#navbar a").on('click', function () {
   $(".portfolio-apps").hide(); 
});

var portf_apps = $('.portfolio-apps');
... 
```

这将导致该`portf_apps`方法随后触发，即使单击它也会显示其子项。不过，我建议将其更新为通常与父子关系一起使用。

[http://jsfiddle.net/jWujm/](http://jsfiddle.net/jWujm/)

# c# - 我们需要在 asp.net mvc 网站项目中的程序集版本号吗？

> ID：14462223
> 
> 赞同：2
> 
> 时间：2013-01-22T15:35:55.987
> 
> 标签：c#, .net, visual-studio-2010, tfs, versioning

情况 - 我们有一个带有 WCF 层的 .net mvc 解决方案。该解决方案有大约 20 个被编译成 DLL 的奇怪项目。该站点在 SQL Server 2008 上运行。我们将解决方案文件夹中的 SQL 脚本作为版本进行维护。所以我们有 SQL 脚本，例如。版本 1.0.0.0 可以说是最新的 3.0.0.1。

该解决方案在 TFS 中进行源代码控制，我们也使用 TFS 来管理工作项、错误等。SQL 脚本文件也在 TFS 中

问题 - 问题是我们是否也需要组装好的 dll 上的版本号。我们的 DLLS 不会以任何方式或从外部世界暴露，它们只是在 mvc 应用程序的运行时中。我们不会将 WCF 暴露给外部客户端，它只是由 mvc 应用程序使用。

部署过程只是针对最新数据库的最新代码，因此当我们部署时，我们检查数据库的版本并运行工具将其升级到解决方案中数据库项目中的最新版本。

我们的一位高级架构师说我们也应该在程序集中维护版本号。我是说我们不需要代码中的任何版本号。因为 TFS 管理它。当我们发布时，我们只需使用最新的程序集/部署包部署最新的代码。

我没有遇到过程序集版本，除非它们是向外界发布的程序集（如果你知道我的意思）

请您提出建议... 另请注意，我们不进行功能开发，它只是版本号，以便我们知道特定数据库的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:43:53.147

我更喜欢知道并能够仔细检查版本的安全性。如果发布过程有问题，或者有一个表现出来的错误似乎是一个发布问题，我希望尽快排除这些问题。我还认为它很容易实现，你花了更多的时间讨论和思考它，而不是你实际花在它上面的时间，而且我想不出它没有任何缺点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:05:42.693

在我工作的一个类似项目中，我们使用版本号。

针对版本控制系统 (VCS) 的每次提交都会导致我们的 CI 服务器 ( [TeamCity](http://www.jetbrains.com/teamcity/) ) 构建一个新的工件，并将版本设置为“最新”。“最新”的每个成功构建都会自动部署到我们的测试环境中。理论上，我们也可以将这个“最新”版本部署到生产环境中，但我们没有。

当我们想将一个新版本部署到生产环境时，我们会运行一个不同的手动构建作业，它会创建一个版本化的版本（例如 1.4.7）。构建作业还会创建当前代码库的[SVN“标签”](http://svnbook.red-bean.com/en/1.1/ch04s06.html)。为了让我们的 DLL 具有适当的版本，我们使用了 TeamCity 的[AssemblyInfo Patcher](http://confluence.jetbrains.net/display/TCD7/AssemblyInfo+Patcher)功能。这样，我们就不必经常手动更新我们的项目`AssemblyInfo.cs`文件。相反，他们总是有这样的占位符版本信息......

```
[assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

这些数字会在 TeamCity 构建期间自动更新。版本化的工件（包括任何相应的 SQL 脚本）被保存到我们的“Releases”目录中，我们保存所有版本的代码库。

现在这一切似乎有点过头了，对吧？**并不真地。**

这给我们带来了以下好处......

*   我们的部署过程`wget`对我们的监控页面进行了处理，该页面列出了版本号并断言版本匹配（预期已部署的版本与服务器上当前运行的版本）。这让我们相信我们的部署过程正常工作。
*   如果在版本化版本（生产候选版本）中发现错误，我们可以 SVN`checkout`标记、应用修复并创建新版本，而不必担心主干上可能危及版本的其他更改。很难一直保持“可发布”，这允许不必这样做。虽然，不要误会我的意思，[它有它的优点](http://en.wikipedia.org/wiki/Continuous_delivery)。
*   如果在版本化版本中发现问题但无法快速解决，您始终可以重新部署已知可以工作的旧工件。能够将已部署的版本恢复为旧版本无疑为我们节省了几次。
*   如果在生产中发现需要调查的错误，我们可以自由地将相同的版本化工件部署到我们的任何测试环境，以便我们可以尝试在生产环境之外重现问题。

我目前可能忘记了更多优势，但上面的列表应该大致了解适当的版本管理可以带来的力量。

我建议不要持续手动更新 20 多个项目的版本文件。这似乎是很多忙碌的工作，主要是浪费时间，因为它容易出现人为错误。无论您决定做什么，都将其自动化并验证结果。

# android - 应用程序启动期间的白色背景

> ID：14462226
> 
> 赞同：12
> 
> 时间：2013-01-22T15:36:03.027
> 
> 标签：android, background, styles, themes

我想在我的应用程序启动但内容尚未显示的短时间内摆脱白色。

我的主要活动是使用一种样式（来自 Manifest），`@style/Theme.Sherlock.Light.DarkActionBar`其背景设置为`<item name="android:background">@android:color/transparent</item>`. 在我的布局中，我没有使用白色背景颜色，但它会在应用程序启动期间出现片刻。

在 HierarchyViewer 中，我导出了图层并检查了布局层次结构中确实没有白色实体。

什么设置在布局绘制之前控制背景颜色？谢谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-22T15:41:24.057

您的主题中还有另一个背景属性 - `windowBackground`，您通过继承您的样式将其隐式设置为白色`@style/Theme.Sherlock.Light.DarkActionBar`（注意`.Light.`名称中的部分）。

您可以使用深色版本的主题，也可以通过包含`windowBackground`在您的样式定义中来明确设置它：

```
<item name="android:windowBackground">@color/your_color</item> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-24T02:05:58.023

或者你可以使用drawable。我为我的闪屏创建了一个主题，如下所示：）

```
<style name="SceneTheme.Light.NoActionBar" parent="Theme.MaterialComponents.Light.NoActionBar">
    <item name="colorPrimary">@color/colorPrimary</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorAccent</item>
</style>

<style name="SceneTheme.Light.NoActionBar.Transparent.StatusBar" parent="SceneTheme.Light.NoActionBar">
    <item name="android:windowDrawsSystemBarBackgrounds">true</item>
    <item name="android:statusBarColor">@android:color/transparent</item>
    <item name="android:windowTranslucentStatus">true</item>
    <item name="android:windowBackground">@drawable/bg_splash</item>
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-17T09:28:52.137

```
<style name="Theme.Transparent" parent="Theme.AppCompat.Light.NoActionBar">
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowActionBar">false</item>
    <item name="android:windowFullscreen">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowIsTranslucent">true</item>
</style> 
```

# matlab - 如何在 Matlab 上为符号表达式编写 `lhs()` 或 `rhs()` 函数

> ID：14462231
> 
> 赞同：4
> 
> 时间：2013-01-22T15:36:17.450
> 
> 标签：matlab, symbolic-math, mupad

我有一个符号表达式 in`MATLAB`和一个`==`可以在 in 中使用的运算符`solve()`。我想要的是将表达式的左侧和右侧分成两个单独的符号表达式。

例如：

```
expr = sym('[1-x^2==2*y; 1+x^2==x+y]');
side1 = lhs(expr);        % returns side1 = [1-x^2; 1+x^2]; 
```

当然我的表达式要复杂得多，而且总是向量或矩阵形式。

**解决方法 1** 我可以使用`MuPAD`内置函数`lhs()`，但我想知道是否可以仅使用`MATLAB`函数来执行此操作，并且我想让它适用于表达式向量，而不仅仅是一个值。

到目前为止，这就是我所拥有的，可以按预期工作。也许结果填充可以通过使用以某种方式矢量化，`:`但我还没有设法让它工作。

```
function [ r ] = lhs( expr )
%LHS Returns the left hand side an expression
%   LHS(sym('[1-x^2==2*y'; 1+x^2==x+y]')) = [1-x^2; 1+x^2]

  cmd = @(e)['lhs(',char(e),')'];
  [m,n] = size(expr);
  r = sym(zeros(m,n));
  for i=1:m
      for j=1:n
          r(i,j) = evalin(symengine, cmd(expr(i,j)));
      end
  end  
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-03-12T13:07:56.827

从 R2017a 开始，使用“lhs”和“rhs”作为

```
syms x
expr = [1-x^2==2*y; 1+x^2==x+y];
lhsExpr = lhs(expr)
lhsExpr =
 1 - x^2
 x^2 + 1

rhsExpr = rhs(expr)
rhsExpr =
  2*y
 x + y 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:06:56.857

```
expr = sym('[1-x^2==2*y; 1+x^2==x+y]');
lr = children(expr);
lr{1}

ans =

[ 1 - x^2, 2*y] 
```

请注意，这比 EitanT 的字符串操作更强大，原因很简单：您的左侧和右侧可能包含等号本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:53:14.860

我正在考虑正则表达式，所以这是我的想法。

假设您有一个符号表达式`expr`，例如：

```
expr = sym('[1-x^2==2*y; 1+x^2==x+y]') 
```

由于不能假定它是标量表达式，因此第一步是将其拆分为子元素，并将每个子元素转换为字符串，如下所示：

```
C = arrayfun(@(n)char(expr(n)), 1:numel(expr), 'Uniform', false) 
```

（我没有使用简单的`char(expr)`转换，因为它添加了`matrix([[...]])`语法）。

现在我们使用正则表达式搜索和替换来提取 LHS：

```
C = arrayfun(@(n)char(expr(n)), 1:numel(expr), 'Uniform', false)
C = regexprep(C, '([^><=]*)(?:[><=]*)(.*)', '$1')  %// $1 for lhs, $2 for rhs 
```

然后将元素连接回字符串并将其转换为符号表达式：

```
str = sprintf('%s,', C{:})
result = reshape(sym(str(1:end - 1)), size(expr)) 
```

瞧。

* * *

以下是复制粘贴友好`lhs`和`rhs`功能：

```
function y = lhs(x)
    C = arrayfun(@(n)char(x(n)), 1:numel(x), 'Uniform', false);
    C = regexprep(C, '([^><=]*)(?:[><=]*)(.*)', '$1');
    str = sprintf('%s,', C{:});
    y = reshape(sym(str(1:end - 1)), size(x));

function y = rhs(x)
    C = arrayfun(@(n)char(x(n)), 1:numel(x), 'Uniform', false);
    C = regexprep(C, '([^><=]*)(?:[><=]*)(.*)', '$2');
    str = sprintf('%s,', C{:});
    y = reshape(sym(str(1:end - 1)), size(x)); 
```

`lhs`请注意，和之间的唯一区别`rhs`是`regexprep`.
using`$1`提取左侧， using`$2`提取右侧。

# .net - 如何为 Windows XP 构建桌面小工具？

> ID：14462237
> 
> 赞同：1
> 
> 时间：2013-01-22T15:36:28.380
> 
> 标签：.net, wpf, windows-xp, windows-desktop-gadgets

我想为 Windows XP 构建一个桌面小工具——比如[桌面侧边栏](http://www.desktopsidebar.com/download.html)

是否可以在 .NET 中使用 WPF/Silverlight 开发一个可以充当小工具来显示来自 Web 服务的信息的应用程序？

或者

请提出任何替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:42:10.267

小工具是在 Windows Vista 中引入的，因此它们在 XP 中不存在。您可以使用任何支持 WinXP 的 Windows 开发语言编写一个实现类似功能的应用程序（尽管由于缺乏操作系统支持而变得更加困难）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:39:34.400

您可以检查 autoit (http://www.autoitscript.com) 也许不是最好的解决方案，但它有效，我使用该语言制作了 som 小部件（基本类似）

这很简单，他们也有很好的文档

# ruby - 无法在 Mac OSX 10.7.5 上安装 Ruby 1.9.3

> ID：14462240
> 
> 赞同：2
> 
> 时间：2013-01-22T15:36:39.353
> 
> 标签：ruby, installation, rvm, homebrew

是的，我知道关于在 Lion 上安装 Ruby 1.9.3 的问题发布了一些问题，主要是因为更高版本的 Xcode（在我的情况下为 4.3.2）的问题。

但是，我已经尝试了所有在 Stack 上发布的关于这种方式的方法，但没有任何帮助。它开始编译，经过一两分钟，然后突然停止。

作为示例，我尝试过以下操作（当然我安装了 GCC 安装程序）：

```
rvm install 1.9.3
rvm install 1.9.3 --with-gcc=clang
rvm install 1.9.3 --with-gcc=gcc-4.2 
```

如果运行**rvm install 1.9.3**在编译期间会显示以下错误（这会停止安装）：

```
Error running 'make', please read /Users/henrikpetersson81/.rvm/log/ruby-1.9.3-p374/make.log
There has been an error while running make. Halting the installation. 
```

在这里您可以读取最新构建失败的日志文件：http: [//jsfiddle.net/hyhrk/](http://jsfiddle.net/hyhrk/)

我尝试的最后一件事是遵循[此答案](https://stackoverflow.com/a/11436675/937624)中的更新指南。同样的问题。

这里有什么问题？

**笔记。**我安装了以下内容：

1.  红宝石 1.8.7
2.  自制 0.7.1
3.  RVM 1.17.10
4.  GCC 安装程序 4.2.1
5.  Xcode 4.3.2
6.  命令行工具

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T20:31:51.383

RVM 有一个更新的命令来安装所有必需的库：

```
rvm get head
rvm requirements run 
```

它可能会询问您的密码（对于`sudo`）。

之后运行：

```
rvm install 1.9.3 --with-opt-dir=`brew --prefix readline` --without-tcl --without-tk 
```

* * *

# 更新 RVM 1.19+

RVM 负责这一切：

```
rvm get stable
rvm autolibs homebrew
rvm install 1.9.3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:17:14.190

看起来readline有问题。由于您使用的是 Homebrew，因此您可以尝试以下操作：

```
brew install readline
rvm install 1.9.3 --with-readline=`brew --prefix readline` 
```

# mantis - 如何在螳螂中创建过滤器以仅查看最近添加的问题，例如过去 2 周

> ID：14462241
> 
> 赞同：1
> 
> 时间：2013-01-22T15:36:44.767
> 
> 标签：mantis

我想创建一个过滤器，在选择时显示过去 1 周或 2 周内打开/解决的案例/问题等，而不是硬编码时间。我发现这类查询在其他错误跟踪器中非常有用。我可以设置固定时间戳来报告该时间间隔内的问题，但这并不是特别有用。最好保存一个通用的过滤器。有谁知道这是否可以在 MantisBT 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:32:09.873

*更新*：此功能的参考错误是[0009398：过滤器增强](http://www.mantisbt.org/bugs/view.php?id=9398)

* * *

我认为这在当前的 MantisBT 代码库中是不可能的（我是开发人员之一）。[要么在MantisBT bugtracker](http://www.mantisbt.org/bugs/)上提出功能请求，要么寻找一个可以做到这一点的插件。

# mysql - Plesk 10.4.4 安全漏洞？

> ID：14462242
> 
> 赞同：1
> 
> 时间：2013-01-22T15:36:45.117
> 
> 标签：mysql, plesk, brute-force

我正在浏览 mysql-slow-logs 以检查潜在的优化，我注意到其中有奇怪的模式（见下文）：

```
SELECT password, type FROM accounts AS a  JOIN sys_users AS s ON (a.id = s.account_id) WHERE s.login='**DICTIONARY_USER_NAME_HERE**'  AND (SELECT count(*) FROM hosting   AS h WHERE h.sys_user_id = s.id) = 0  AND (SELECT count(*) FROM web_users AS w WHERE w.sys_user_id = s.id) = 0  AND (SELECT count(*) FROM ftp_users AS f WHERE f.sys_user_id = s.id) = 0; 
```

更可怕的是，这些查询是从 admin@localhost（指定为 Plesk MySQL 用户）执行的

我已经签入，似乎 Plesk 以纯文本形式存储了一些密码，而这些查询显然是猜测登录名的字典方法，因此 mysql 会以**纯文本密码响应**

所以总结一下

*   称为 admin@localhost 的查询
*   plesks 纯文本密码

我不确定攻击的媒介是什么，但如果我们考虑一些事情：

*   攻击者现在没有管理员密码，否则他可以执行精确查询而不是字典
*   攻击者显然没有通过 ssh / 远程 mysql 执行
*   这可能是 plesk 的错误，因为我在两台服务器上观察到它在不同的操作系统、不同的配置下运行并且只有一个服务器有任何内容（网站/应用程序或任何可能成为攻击媒介的东西）
*   最有可能的是攻击者（或本例中的机器人）正在通过 Plesk 的一些非安全脚本（允许此类查询但不要求您登录的脚本）执行查询

现在我可能完全错误并误解了这种情况，这是某种完全正常的 Plesk 操作（我对此表示怀疑），同样奇怪的是我在 Google 中找不到任何关于此漏洞的信息

一些技术/软背景：

*   虚拟主机
*   1xCentOS 5 / 1xDebian（均为 x64）
*   Plesk 面板 v. 10.4.4

如果有人可以确认他们确实遇到了该问题/攻击，并且可能有某种解决方案如何防止攻击者，我会非常高兴 - 他最终可能会猜到登录名，但他还没有得到它。

升级到第 11 版暂时不讨论 - VPS 提供商说他还不能这样做，我不能将项目转移到其他 VPS，或者至少不能这么快

提前致谢和问候，亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:49:10.393

大约一年前， [Plesk 的安全性引起了轰动](http://kb.parallels.com/en/113457)，但 Plesk 10.4 一直被报告为安全的。

对于以明文形式存储密码的系统，通过 SQL 查询检索密码是正常的。由于查询看起来不像 SQL 注入，它很可能是 Plesk 本身的活动，但该活动确实可以由攻击者发起。

攻击者实际上并不需要在 Plesk 中有任何特殊的非安全脚本来尝试字典登录。他们总是可以获取您的登录页面并尝试字典登录/密码的不同组合，直到匹配为止。我猜可能存在从被利用的不同系统获得的登录/密码对池。由于人们经常会重复使用登录名和密码 - 如果尝试许多服务器，攻击者将有机会。也许您的服务器是他们正在扫描的其他 1000 台服务器之一。

如果你真的被扫描了，你应该在 MySQL 日志中看到很多这样的查询，并且你应该在访问日志中看到多次尝试访问你的控制面板。要阻止这种情况，您需要通过防火墙（或通过访问限制）阻止除受信任 IP 列表之外的所有人访问您的 Plesk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-25T23:38:13.200

在 Plesk 12.5 安装中，我们发现当尝试使用 ssh 登录时，这些查询会显示在日志中。这可以通过关联 mysql.log 与 auth.log 来验证。

当存在针对 ssh 的字典攻击时，您可以在日志中看到大量此类查询。

如果您可以将 ssh 端口更改为不常见的端口（1337？），您通常会避免成为脚本攻击的目标。

# internet-explorer - 我可以使用 IE 或 Chrome 每 5 分钟运行一次作业吗

> ID：14462245
> 
> 赞同：0
> 
> 时间：2013-01-22T15:36:50.693
> 
> 标签：internet-explorer, google-chrome, macros

我需要每 5 分钟检查一次网络服务是否正常工作。

为此，我想输入登录信息 - 并登录。在下一页上，我想将数据输入表单并按提交。然后在下一页我要注销。然后我想每 5 分钟重复一次。我还想记录从开始到结束运行任务所需的时间。

是否可以在 IE 或 Chrome 上设置这样的宏？如果有怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:44:34.033

如果你不介意做一些编程来达到这个目的，你可以使用[Selenium WebDriver](http://seleniumhq.org/)来做到这一点。

# buddypress - buddypress 获取活动标题

> ID：14462253
> 
> 赞同：1
> 
> 时间：2013-01-22T15:37:06.453
> 
> 标签：buddypress

我正在尝试使用以下代码获取每个活动的活动标题。但它正在重复每个活动的活动标题。

```
 <h2 class="posttitle">
    <a href="<?php the_permalink(); ?>" rel="bookmark" title="<?php _e( 'Permanent Link to', 'buddypress' ); ?>
    <?php the_title_attribute(); ?>"><?php the_title(); ?>
    </a></h2> 
```

我也尝试使用调用`bp_get_activities_title()`但它没有给出任何结果有人可以帮助我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T00:09:48.730

我相信那是因为 the_title() 只是打印出标题。尝试使用以下内容来获取标题。

```
<?php echo get_the_title(bp-activity->$ID); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T16:05:35.167

抱歉回答晚了，但是活动如何和/或为什么会有标题？您可能会获取活动本身的文本并将其用作“标题”

```
echo $activities_template->activity->content; 
```

也许那里还有另一个你可能会觉得有用的变量。我建议打印数组

```
print_r($activities_template->activity); 
```

看看里面有什么。

**编辑：虽然你最好祈祷 ->content 中没有 HTML（或者你可以把 html 去掉 :] ）**

# php - 无论指定或给出什么数据类型，bindParam 都能正常工作

> ID：14462254
> 
> 赞同：2
> 
> 时间：2013-01-22T15:37:07.417
> 
> 标签：php, sql, postgresql, pdo, prepared-statement

在向自己介绍 pgSQL 准备语句时，我已经成功返回了一些查询的结果。但是，我有几个问题。

给定以下查询：

```
$w_ft = "36"; 
$sth = $dbh->prepare("SELECT * FROM main_products_common_dimensions WHERE w_ft = :w_ft");
$sth->bindParam(':w_ft', $theId, PDO::PARAM_INT);
$sth->execute();
$result = $sth->fetchAll(); 
```

我注意到即使表中的列`main_products_common_dimensions`是 a `character_varying`，如果我使用，我也会得到相同/正确的结果集

```
$w_ft = 36; 
...
$sth->bindParam(':w_ft', $w_ft, PDO::PARAM_INT); 
```

和

```
$w_ft = "36"; 
...
$sth->bindParam(':w_ft', $w_ft, PDO::PARAM_STR); 
```

和

```
$w_ft = "36"; 
...
$sth->bindParam(':w_ft', $w_ft, PDO::PARAM_INT); 
```

和

```
$w_ft = 36; 
...
$sth->bindParam(':w_ft', $w_ft, PDO::PARAM_STR); 
```

也就是说，无论我如何绑定参数`_INT`或`_STR`设置变量（整数或字符串），数据都正确返回。这是正常行为吗？

从[http://php.net/manual/en/pdostatement.bindparam.php](http://php.net/manual/en/pdostatement.bindparam.php)，我看到参数数据类型已解释

> 使用 PDO::PARAM_* 常量的参数的显式数据类型。要从存储过程返回 INOUT 参数，请使用按位 OR 运算符设置 data_type 参数的 PDO::PARAM_INPUT_OUTPUT 位。

“从存储过程返回 INOUT 参数”是什么意思？这有关系吗？这是否意味着我没有使用存储过程？长度似乎是可选的，尽管它的解释中没有说明。提供它有好处吗？

如您所见，我对此很陌生，只是想弄清楚它。非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T19:01:30.390

`PDO::PARAM_INT`并且`PDO::PARAM_STR`当传递到时`bindParam()`，表明驾驶员可以随意忽略。

查看 PDO pg 驱动程序的[源代码](https://github.com/php/php-src/blob/master/ext/pdo_pgsql/pgsql_driver.c)，似乎除了`PDO_PARAM_LOB`特殊处理之外，所有类型都被引用为字符串（即在引号之间并传递给 libpq 的`PQescapeStringConn`函数）

您还应该了解`PDO::ATTR_EMULATE_PREPARES`控制在后台使用哪种方法的属性。当`false`,`PQprepare()`与真正的查询外参数一起使用时。如果`true`，参数值被注入到传递给非参数化的 SQL 中`PQexec()`。从技术上讲，这是完全不同的，因此您可能会在极端情况或错误情况下看到不同的行为，具体取决于此属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:44:11.757

```
$w_ft = 36; 
...
$sth->bindParam(':w_ft', $theId, PDO::PARAM_INT); 
```

应该

```
$w_ft = 36; 
...
$sth->bindParam(':w_ft', $w_ft, PDO::PARAM_INT); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:08:16.460

这是因为`postgres`在与整数列进行比较时接受整数的引用。

因此，如果您的 id 列是 int，则这些查询的工作方式相同：

```
SELECT * FROM mytable WHERE id = 1;
SELECT * FROM mytable WHERE id = '1'; 
```

`PDO::PARAM_*`常量所做的是修改对值进行引用/转义的方式，并且与值数据类型无关。如果需要，PHP 也会进行类型转换。如果你选择`PDO::PARAM_INT`你告诉 DBMS 驱动程序 $id 的值是一个整数，并且应该将它作为一个整数转义，所以当它将值放入查询时它不会在它周围添加引号。

```
$id = 1;
$sth = $db->prepare("SELECT * FROM mytable WHERE id = :id");
$sth->bindParam(':id', $id, PDO::PARAM_INT);
// resulting query would be SELECT * FROM mytable WHERE id = 1;

$sometext = "hello";
$sth = $db->prepare("SELECT * FROM mytable WHERE id = :id");
$sth->bindParam(':id', $sometext, PDO::PARAM_INT);
// in this case, $sometext will be casted to an integer, that will result in (int)0
// resulting query would be SELECT * FROM mytable WHERE id = 0;

$sometext = "hello";
$sth = $db->prepare("SELECT * FROM mytable WHERE id = :id");
$sth->bindParam(':id', $sometext, PDO::PARAM_STR);
// in this case, $sometext is already a string, and strings should be quoted
// resulting query would be SELECT * FROM mytable WHERE id = 'hello'; 
```

此外，关于 的 INOUT 参数`bindParam`，如果您不打算使用存储过程的 INOUT 或 OUT 参数（例如，传递对函数调用的引用，而不是在函数内部设置），您可能最好使用[`bindValue`](http://php.net/pdostatement.bindValue). 使用`bindValue`您可以将函数的结果或任何常量值作为要绑定的值，您不需要放置变量。

```
$sth->bindValue(':something', 5);
$sth->bindValue(':something_else', $foo->bar()); 
```

# iphone - iPhone 的 SFTP 库？

> ID：14462257
> 
> 赞同：5
> 
> 时间：2013-01-22T15:37:16.047
> 
> 标签：iphone, objective-c, sftp

除了 libssh2 之外，还有其他好的 SFTP 库吗？我特别在寻找一个非常易于集成和管理的库！由于 libssh2 完全是用 C 编写的，我发现向现有代码库添加扩展相当困难！

谢谢！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T16:07:38.763

GitHub 上有一些用于 libssh2 的 Objective-C 包装器：

*   [Lejdborg](https://github.com/Lejdborg/NMSSH)的 NMSSH（就我个人而言，这是我最喜欢的。超级易于使用且有据可查）
*   karelia 的libssh2_sftp [-Cocoa-wrapper](https://github.com/karelia/libssh2_sftp-Cocoa-wrapper)
*   [DLSFTPClient](https://github.com/Leehro/DLSFTPClient) - 由 Leehro

还有一些……这些是最受欢迎的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-23T07:14:13.087

如果您使用 Swift 进行开发，可以使用以下包装库。

*   [SwiftSH](https://github.com/Frugghi/SwiftSH) - 包装 libssh2 的 Swift SSH 框架。

# javascript - 如何在 Firefox 中从子窗口聚焦父页面？

> ID：14462260
> 
> 赞同：0
> 
> 时间：2013-01-22T15:37:23.963
> 
> 标签：javascript, html, jsp

我正在使用下面的代码从子窗口调用父页面 javascript 函数，该函数在父页面上显示一些警报消息并关闭子窗口。

```
window.opener.CallAlert("test is"+test);
opener.focus();
self.close(); 
```

上面的代码片段发生的情况是警报出现在父窗口上，但焦点仍然在子窗口上。我需要明确地转到父窗口。一旦我单击“确定”，警报子窗口就会关闭。

一切都很好，但是一旦我调用子窗口，我希望专注于父`window.opener.CallAlert()`窗口。

**编辑**

看起来`opener.focus();`适用于 IE 但不适用于 Mozilla。Firefox的任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T22:34:47.390

看来这不能保证有效，并且由浏览器自行决定。

请参阅此线程：[window.opener.focus() 不起作用](https://stackoverflow.com/questions/18501095/window-opener-focus-doesnt-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:22:23.333

尝试延迟 setTimeout(function(){self.close()},300)，然后在父页面上显示警报。它将安排在一段时间后自动关闭当前窗口，并在父信号上显示警报消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:41:43.527

试试显而易见的：

```
window.opener.focus(); 
```

# jquery - 如何索引按钮 div 并将它们并排放置？

> ID：14462262
> 
> 赞同：1
> 
> 时间：2013-01-22T15:37:28.597
> 
> 标签：jquery, html, jsp

我正在使用我的 jsp 和一些 jQuery，我想创建一个按钮列表/网格。div 的索引代表我在会话中存储的项目之一。不是最好的主意，但这是我选择的路线。我打算使用下面的脚本来确定单击了哪个 div。我从 jQuery 站点获取它。

```
$("div").click(function () {
    var index = $("div").index(this);
    //ajax work here
}); 
```

我希望此列表位于 2 列宽的网格中。如果我使用 span 来封装每 2 个 div，我需要进行哪些更改才能使其正常工作？现在对我没多大用？还是使用表格标签更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:46:08.100

使用无序列表作为包装器：

```
<ul>
     <li>....col1...</li>
     <li>....col2...</li>
     <li>....col1...</li>
     <li>....col2...</li>
</ul> 
```

然后格式化您的列表，以便将列表项浮动在两倍宽的包装器中：

```
ul, li {list-style:none;margin:0;padding:0}
ul {width:400px}
li {float:left;width:200px} 
```

# ios - 当 viewcontroller 有一个子 VC 时，popover 内容视图不显示

> ID：14462267
> 
> 赞同：0
> 
> 时间：2013-01-22T15:37:36.853
> 
> 标签：ios, objective-c, uinavigationcontroller, uipopovercontroller

我有一个容器视图控制器，它由顶部的导航视图和屏幕其余部分的内容视图组成。导航菜单由几个按钮组成，其中一些按钮显示一个带有 UITableView 的弹出框，用于辅助导航。这一切都有效，直到我分配了一个子视图控制器并将其视图设置为内容视图的子视图。现在，弹出框出现了，但里面没有任何东西（没有表格视图，只有黑色）。

为什么是这样？这是我在容器视图中为子 vc 添加的代码：

```
- (void)viewDidAppear:(BOOL)animated {
  [super viewDidAppear:animated];
  ContentWebViewController *initialVC = [[ContentWebViewController alloc] init];
  [self addChildViewController:initialVC];
  initialVC.view.frame = self.view.bounds;
  [self.containerView addSubview:initialVC.view];
  self.currentController = initial;
} 
```

请参阅下面的屏幕截图。我添加了一个带有显示 google 的简单 webview 的 vc（现在只是一个占位符）。在我分配子 VC 之前，弹出框工作正常。

![在此处输入图像描述](../Images/b9bcfca925d8105eddfe26c0d4d53e46.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-29T09:07:42.827

也许在其他情况下会有所帮助-如果您正在使用尺寸类（可能是因为您正在将其开发到iPad）-以任意尺寸设计弹出视图控制器，它应该没问题-之后您可以返回你想要的尺寸。（您也可以卸载该视图控制器中任何对象的大小类，而不是重新设计 VC）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-22T16:38:47.200

我以某种方式（不要问我如何）更改了我的表视图控制器继承的类。它应该（显然）是 UITableViewController，但是是 UITableViewController，所以没有调用 initWithStyle....

# open-source - 作为学生如何为开源做出贡献

> ID：14462268
> 
> 赞同：0
> 
> 时间：2013-01-22T15:37:43.267
> 
> 标签：open-source

我是一名计算机科学专业的大二学生，我想开始为开源项目做贡献，我精通python和java，我对这个主题做了一些研究，并尝试过sourceforge和apache，但是我觉得那些网站上的项目列表有一个非常陡峭的学习曲线，有人可以推荐我一些介绍性的开源项目列表，可以引导我为一些更大的项目做出贡献，或者我的编程水平不足以做出开源贡献？

任何有关该主题的建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:44:46.743

大多数开源项目都需要更好的文档。您可以选择一个您喜欢的并在您了解该项目时改进文档。如果你学会了写好的文档，那是一个很好的职业技能。当你写它的时候，你开始对那个项目有足够的了解，不久就可以处理代码了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:41:11.420

为什么不在你的校园里问？在我这里有很多来自学生的项目。这是第一步。一些项目还使用开源项目并对其进行操作。所以你只学习一点开源项目。对于下一步，许多学生为学生项目中使用的开源项目做出了贡献。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-22T18:03:36.183

如果您有兴趣为 Python 做贡献，您可以在开始时提交文档和测试相关补丁。以下是如何贡献的步骤。[https://openhatch.org/wiki/Contributing_to_Python](https://openhatch.org/wiki/Contributing_to_Python)。

它还可以帮助您申请 Google Summer of Code 和其他 Python 项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T15:46:57.643

查看一些您感兴趣的项目......以了解要参与的项目类型。

以下是一些广泛的建议： 1) 你听说过[Google Summer of Code](https://code.google.com/soc/)吗？[2）您可以在SourceForge](https://sourceforge.net/account/login.php?return_to=/account/)或其他存储库中设置自己的项目。3）您可以查看其他人在做什么并参与他们的项目。查看 SF、[Freecode](http://freecode.com/)或[Google Code](https://code.google.com/)中的项目。

不要降低您的编码能力，将其投入使用。项目也总是可以使用人员来做文档。干杯，祝你编码愉快！

这是我今天看到的[另一个链接](http://opensource.com/life/13/1/10-ways-get-started-open-source)，它让我想起了你的问题。该链接建议您参与开源可以做的十件事。

# android - 安卓平板驱动USB调试

> ID：14462271
> 
> 赞同：2
> 
> 时间：2013-01-22T15:37:55.053
> 
> 标签：android, eclipse

我正在使用ecplipse在android中开发，在Windows 7中，32位，平板电脑是AOC MW0931，是新型号，我尝试修改文件“android_winusb.inf”，硬件ID，这个表是：

*   USB\VID_2207&PID_0006
*   USB_Install, USB\VID_2207&PID_0006&REV_0222
*   USB_Install, USB\VID_2207&PID_0010&MI_01
*   USB_Install, USB\VID_2207&PID_0010&REV_0222&MI_01

但 IDE 无法识别要调试的平板电脑。我可以为这个设备使用什么样的硬件？如何正确修改文件？

这是字符串文件：

```
 ;AOC Breeze MW0931 ADB
    %SingleAdbInterface%        = USB_Install, USB\VID_2207&PID_0006
    %CompositeAdbInterface%     = USB_Install, USB\VID_2207&PID_0006&REV_0222
    %SingleAdbInterface%        = USB_Install, USB\VID_2207&PID_0010&MI_01
    %CompositeAdbInterface%     = USB_Install, USB\VID_2207&PID_0010&REV_0222&MI_01 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:28:20.013

您可以检查 ADB 是否正在检测，猜测它可能不是通过转到命令提示符并键入`adb devices`（假设 sdk 工具在您的 PATH 中）。

安装 PDANet (http://junefabrics.com/android/) 也可能很有用，我经常在安装 ADB 驱动程序时遇到问题，但 PDANet 安装了驱动程序并且它总是对我有用。

# vb.net - 为什么 True 等于 -1

> ID：14462272
> 
> 赞同：14
> 
> 时间：2013-01-22T15:37:57.627
> 
> 标签：vb.net

我想知道为什么 True 等于 -1 而不是 1。如果我没记错（过去）在 C 语言中，“true”将等于 1。

```
 Dim t, f As Integer

    t = True
    f = False

    Console.WriteLine(t) ' -1
    Console.WriteLine(f) ' 0
    Console.ReadLine() 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-22T15:41:58.533

当您将任何非零数转换为 a`Boolean`时，它将评估为`True`。例如：

```
Dim value As Boolean = CBool(-1) ' True
Dim value1 As Boolean = CBool(1) ' True
Dim value2 As Boolean = CBool(0) ' False 
```

但是，正如您所指出的，每当您将 a`Boolean`设置为`True`a`Integer`时，它将评估为 -1，例如：

```
Dim value As Integer = CInt(CBool(1)) ' -1 
```

这样做的原因是因为`-1`它的所有位都等于 1 的有符号整数值。由于 a`Boolean`存储为 16 位整数，因此通过简单地不处理所有这些位，而不是仅不考虑最低有效位。换句话说，为了`True`be `1`，它必须像这样存储：

```
True  = 0000000000000001
False = 0000000000000000 
```

但是像这样存储它更容易：

```
True  = 1111111111111111
False = 0000000000000000 
```

它更容易的原因是因为在低级别：

```
1111111111111111 = NOT(0000000000000000) 
```

然而：

```
0000000000000001 <> NOT(0000000000000000)
0000000000000001 = NOT(1111111111111110) 
```

例如，您可以使用`Int16`如下变量复制此行为：

```
Dim value As Int16 = 0
Dim value2 As Int16 = Not value
Console.WriteLine(value2) ' -1 
```

如果您使用无符号整数，这将更加明显，因为那时 的值`True`是最大值而不是 -1。例如：

```
Dim value As UInt16 = CType(True, UInt16) ' 65535 
```

那么，真正的问题是，为什么 VB.NET 使用 16 位来存储单个位值。真正的原因是速度。是的，它使用了 16 倍的内存量，但是处理器执行 16 位布尔运算的速度要比执行单位布尔运算快得多。

旁注：正如您所料（其中第一位是“符号位”，其余位是值），值存储为而不是 as 的原因是因为它`Int16`存储`-1`为`1111111111111111`两个`1000000000000001`-补充。将负数存储为二进制补码意味着处理器更容易执行算术运算。它也更安全，因为使用双的恭维，没有办法表示`0`为负数，这可能会导致各种混乱和错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:39:27.247

是大多数语言，数值为 0 为假。其他一切都被认为是真实的。如果我没记错的话，-1 实际上是所有位都设置为 1，而 0 是所有位都设置为 0。我想这就是原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T15:42:46.987

在 Visual Basic 中，`0`是`False`，而任何非零值是`True`. 此外，根据[MSDN](http://msdn.microsoft.com/en-us/library/wts33hb3.aspx)：

> 当 Visual Basic 将数值数据类型值转换为布尔值时，0 变为 False，所有其他值变为 True。当 Visual Basic 将布尔值转换为数值类型时，False 变为 0，True 变为 -1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T15:44:59.180

我想回到汇编语言，将条件转换为比较`cmp`操作并检查零标志 ( `ZF`)。对于真正的表达式，`ZF`它不会被提升，而对于错误的表达式，它是。早期的英特尔处理器就是这样，但我不记得 Zilog`Z80`和摩托罗拉 8 位处理器是否有相同的约定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T15:42:09.800

以下是可能的重复：[将布尔值转换为整数返回 -1 是否为真？](https://stackoverflow.com/questions/3621037/casting-a-boolean-to-an-integer-returns-1-for-true)

> 布尔常量 True 具有数值 -1。这是因为布尔数据类型存储为 16 位有符号整数。在此构造中，-1 计算为 16 个二进制 1（布尔值 True），0 计算为 16 个 0（布尔值 False）。这在对 16 位有符号整数值 0 执行 Not 操作时很明显，这将返回整数值 -1，换句话说，True = Not False。当对整数的各个位（例如 And、Or、Xor 和 Not）执行逻辑运算时，这种固有功能变得特别有用。 [4] 这个 True 的定义也与 1970 年代早期微软 BASIC 实现以来的 BASIC 一致，也与当时 CPU 指令的特点有关。

# c# - if-else 语句可以出现在 C# 的 Main 函数之外吗？

> ID：14462275
> 
> 赞同：-1
> 
> 时间：2013-01-22T15:38:11.187
> 
> 标签：c#, symbols

我对 C# 和面向对象的编程都很陌生。我试图弄清楚为什么这个程序无法编译。这是给我带来麻烦的代码片段：

```
static void AdvancePreLvlThree() // advances player to next level when level is less than three
{
    if(level == 1)
    {
        xp = (xp - 100); // carries remaining xp over to next level
    }
    else if(level == 2)
    {
        xp = (xp - 150);
    }

    level +=1; // advances
    return Update(); // checks again to see if they can advance further
} 
```

完整程序：

```
///////////////////////////////////////////////////////
//
// A namespace/program for managing experience points 
// and determining if the player can level up.
//
// Written by Jared Beach
// January 19, 2013
//
//////////////////////////////////////////////////////

using System;
namespace LevelSystem
{
    public class LevelSystem 
    {
        public void LevelStorage()
        {
            int level = 1; // stores player level
        }

        public void XPStorage()
        {
            int xp = 0; // stores player xp
        }

        public void XPRequirement() // xp required to advance to the next level
        {
            int maxXP = (8 * level^3);

        static void AdvancePreLvlThree() // advances player to next level when level is less than three
        {
            if(level == 1)
            {
                xp = (xp - 100); // carries remaining xp over to next level
            }
            else if(level == 2)
            {
                xp = (xp - 150);
            }

            level +=1; // advances
            return Update(); // checks again to see if they can advance further
        }

        static void Advance() // advances player to next level
        {
            xp = (level - maxXP); // carries remaining xp over to next level
            level +=1;
            return Update();
        }

        static void Update() // checks to see if player can advance levels
        {
            if(level == 1 && xp > 100) // special case to keep basic progression ratio close to one
            {
                AdvancePreLvlThree();
            }
            else if(level == 3 && xp > 150)
            {
                AdvancePreLvlThree();
            }
            else if(xp >= 3 && xp > maxXP) 
            {
               return Advance();
            }
        }
    }

    public class Program
    {
        static void Main(string[] args)
        {

        }
    }
} 
```

我得到的错误是：

```
Program.cs(30,8): error CS1525: Unexpected symbol `static'
Program.cs(30,16): error CS1547: Keyword `void' cannot be used in this context
Program.cs(30,38): error CS1525: Unexpected symbol `('
Program.cs(36,16): error CS1519: Unexpected symbol `else' in class, struct, or interface member declaration
Program.cs(36,28): error CS1519: Unexpected symbol `==' in class, struct, or interface member declaration
Program.cs(38,20): error CS1519: Unexpected symbol `=' in class, struct, or interface member declaration
Program.cs(38,26): error CS1519: Unexpected symbol `-' in class, struct, or interface member declaration
Program.cs(41,12): error CS1525: Unexpected symbol `level' 
```

如果相关的话，它与我的 Main 不在同一个班级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:42:11.597

正如其他人所说，您需要在这种情况下显示所有代码，因为这听起来像是您的代码中缺少/错误的其他内容并在此时中断。这是一个您正在尝试做的工作示例，尽管它看起来不是一个很好的方法，有很多`static`项目，您应该真正研究[面向对象编程](http://en.wikipedia.org/wiki/Object-oriented_programming)！

```
namespace ConsoleApplication1
{
    class Program
    {
        private static int level = 0;
        private static int xp = 0;

        static void Main(string[] args)
        {
            AdvancePreLvlThree();
        }

        static bool AdvancePreLvlThree() // advances player to next level when level is less than three
        {
            if(level == 1)
            {
                xp = (xp - 100); // carries remaining xp over to next level
            }
            else if(level == 2)
            {
                xp = (xp - 150);
            }

            level +=1; // advances
            return Update(); // checks again to see if they can advance further
        }

        static bool Update()
        {
            // Yes they can...
            return true;
        }
    }
} 
```

我已经让你的`AdvancePreLvlThree`方法返回一个布尔值，因为这是你试图做的，但该方法被标记为无效？无论如何，希望这会让你开始？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:46:38.930

一些事情，

1.  您的方法被声明为 void，并且它返回更新，因此使该方法的返回类型与更新相同。
2.  如果您的方法与 main 不在同一个类中，则将方法设为 public，在包含 main 的类中引用新类。
3.  在使用它们之前将 XP 和 level 声明为 vairables，在方法级别范围内声明它们。
4.  此方法应与更新在同一类中。

# objective-c - 自由函数在 c / Objective-c 中不起作用

> ID：14462276
> 
> 赞同：-2
> 
> 时间：2013-01-22T15:38:12.157
> 
> 标签：objective-c, c, memory, malloc, free

> **可能重复：**
> [malloc() 和 free() 如何工作？](https://stackoverflow.com/questions/1119134/how-do-malloc-and-free-work)

我遇到了一个奇怪的问题，我真的不确定为什么它不起作用。

我在 Xcode 中有以下代码：

```
void *ptr = malloc(1024 * 1024 * 100);
memset(ptr, 0, 1024 * 1024 * 100);
free (ptr); //trace this line
ptr = malloc (1024 * 1024 * 100);
memset(ptr, 0, 1024 * 1024 * 100);
free (ptr); //trace this line 
```

我在每个 free() 行上都设置了一个断点，当我跟踪程序时，free 并没有真正释放 100mb。但是，如果我将数字从 100 更改为 500（分配 500mb 两次），memset 500mb, free() 工作正常。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:42:08.783

`free`永远不会失败（*它没有返回值*），除非您使用不正确的地址调用它，这会给您带来未定义的行为。

您不必担心是否`free`实际释放内存，您只需确保`free`在完成动态内存使用后调用正确的地址，编译器应该会照顾您。
这是您应该相信编译器能够正确处理的事情之一。

此外，`free`只需将被释放的内存标记为空闲（*如名称所示*）以供重用。它不会清零或初始化正在释放的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:18:28.540

当您将一块内存传递给 时`free`，该内存不一定会立即返回给操作系统。事实上，根据 C 标准中的措辞，有些人认为，在程序退出之前，内存*不能*归还给操作系统。

有问题的措辞是（C99，§7.20.3.2/2）：“free 函数导致 ptr 指向的空间被释放，也就是说，可用于进一步分配。” 他们的论点是，当/如果一块内存被分配然后释放，它应该可以再次分配——但如果它返回到操作系统，其他进程可能会占用它，所以它不再可用于进一步分配，按照标准要求。就个人而言，我认为这个论点并不*完全*令人信服（我认为“由另一个进程分配”仍然是分配），但这就是生活。

大多数库从操作系统分配大块内存，然后将这些大块的一部分子分配给程序。当程序释放内存时，将该内存块放在“可用”列表中以供进一步分配。大多数也（至少有时）遍历空闲块列表，合并相邻地址的空闲块。

许多人还遵循一些关于在释放内存后保留哪些内存的启发式方法。首先，只要该块中的任何内存仍在使用中，就保留整个块。但是，如果一个块中的所有内存都已被释放，他们会查看它的大小，并且（通常）查看它们有多少可用内存。如果可用块的可用数量和/或大小超过某个阈值，他们通常会将其释放回操作系统。

有些人没有固定阈值，而是尝试通过（例如）将阈值基于可用内存的百分比而不是固定大小来调整其行为以适应环境。如果没有这些，十年前（比如说）在可用内存通常要小得多的情况下编写的程序通常会进行相当多的“颠簸”——反复向操作系统分配和释放相同（或相似）大小的块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:46:25.450

`free()`不必立即取消映射并将先前备份但不再分配缓冲区的页面返回给操作系统。它可能会保留它们，以便您可以再次快速分配内存。当程序完成时，页面将被取消映射并返回给操作系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:00:38.040

正如其他人已经说过的那样，`free()`不必将内存返回给操作系统。但我拒绝你永远不应该关心内存是否被返回的想法。关心应该有充分的理由，但也*有*正当的理由。

如果您*确实*想将内存返回给操作系统，请使用提供此保证的特定于平台的方式：

1.  `mmap`在`MAP_ANONYMOUS`支持它的系统上（有很多，但`MAP_ANONYMOUS`不是 POSIX）：`mmap`而不是`malloc`，`munmap`而不是`free`.

2.  `VirtualAlloc``VirtualFree`在 Windows 上。

[我应该在这里为其他系统添加一些东西吗？欢迎提出建议。]

这些分配内存的方式适用于大内存单元（系统页面大小或更大）。

# php - 正则表达式删除空格并更改标点符号？

> ID：14462277
> 
> 赞同：1
> 
> 时间：2013-01-22T15:38:19.680
> 
> 标签：php, regex

好的，所以这与我之前的一个问题有关。一般来说，我对 PHP 很陌生，只需要它来修复其他人为我的论坛工作所做的事情。

这是我目前拥有的：

```
// Alter post output to create links to user profiles
$post->message = preg_replace(
   '/@ *('.preg_quote($speak['username'], '/').')[:,.]? */i',
'[url=\''.PAGE_URL.RELATIVE_WBB_DIR.'/index.php?'
. 'page=User&userID='.$speak['toID'].'\']@'.$ speak['username'].':[/url]',
                              $post->message); 
```

这应该改变：

```
@JamesNorris, @JamesNorris: @JamesNorris 
```

到用户个人资料链接，它确实如此。唯一的问题是它所做的另一个改变是：

```
@JamesNorris:@JamesNorris:@JamesNorris: 
```

那是之前给出的那一行的输出。显然它正在删除“，”和空格，并放置一个“：”。

有没有人对如何解决这个问题有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:43:06.643

您可以将其捕获`,:.`为自己的组并在替换中引用它：

```
('preg_quote(...)')([:,. ])? */i',
   '[url...'.$speak['username'].'\2[/url]' 
```

这`\2`是在第二组（冒号、逗号、句号、空格）中捕获的任何内容。这是`\2`因为您已经有另一个用于用户名的捕获组（您不使用）。

# perl - 比较两个文件中的列和一列应该在 -3 到 +3 之间的范围内，使用 perl 合并两个文件

> ID：14462278
> 
> 赞同：-1
> 
> 时间：2013-01-22T15:38:22.417
> 
> 标签：perl

我想比较两个文件中的三列，第三列可以在-3到+3之间的范围内，给我两个文件的联合。文件 1

```
miR156a AT1G27360   1253
miR156a AT1G27370   2368
miR156a AT1G53160   586 
```

文件 2

```
miR156a AT1G27360   1252    
miR156a AT1G27370   2367    
miR156a AT1G53160   123 
miR156a AT1G69170   1296 
```

预期输出为

```
miR156a AT1G27360   1253
miR156a AT1G27370   2368
miR156a AT1G53160   586
miR156a AT1G53160   123 
miR156a AT1G69170   1296 
```

我尝试编写一个 perl 脚本，在该脚本中我只能找到交集但无法获得两个文件的并集

```
open(FH1, "$filename1");
open(FH2, "$filename2");
while ( $line1 = <FH1> ) {
    chomp $line1;
    @temp = split(/\s+/, $line1);
    if ($#temp > 1) {
        push(@miR_TP, $temp[0]);
        push(@tar_TP, $temp[1]); 
        push(@start_TP, $temp[2]); 
    }
}
while ( $line2 = <FH2> ) {
    chomp $line2;
    @temp2 = split(/\s+/, $line2);
    if($#temp > 1) {
        push(@miR, $temp2[0]);
        push(@tar, $temp2[1]); 
        push(@start, $temp2[2]);        
    }
}
for ($i=0 ; $i<=$#miR ; $i++) {
    for($j=0 ; $j<=$#miR_TP ; $j++) {
        if (    ($miR[$i] eq $miR_TP[$j]) && 
            ($tar[$i] eq $tar_TP[$j]) &&
            (
                ($start[$i] eq $start_TP[$j])    ||
                ($start[$i] eq  $start_TP[$j]+1) ||
                ($start[$i] eq  $start_TP[$j]+2) ||
                ($start[$i] eq  $start_TP[$j]+3) ||
                ($start[$i] eq  $start_TP[$j]-1) ||
                ($start[$i] eq  $start_TP[$j]-2) ||
                ($start[$i] eq  $start_TP[$j]-3)
            )) {
            print "$miR[$i]\t$tar[$i]\t$start[$i]\n";
        }
    }
} 
```

请帮助我修改代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:09:19.600

使用散列代替数组。而不是复杂的条件，使用`abs`函数：

```
#!/usr/bin/perl
use warnings;
use strict;

my $filename1 = 'file1';
my $filename2 = 'file2';

my %hash;

open my $FH, '<', $filename1 or die $!;

while (my $line = <$FH>)
{
    chomp $line;
    my ($mir, $tar, $start) = split ' ', $line;
    if (defined $start)
    {
        print $line, "\n";                   # Always show file 1.
        push @{ $hash{$mir}{$tar} }, $start;
    }
}

open $FH, '<', $filename2 or die $!;
while (my $line = <$FH>)
{
    chomp $line;
    my ($mir, $tar, $start) = split ' ', $line;
    unless (exists $hash{$mir}
            and exists $hash{$mir}{$tar}
            and grep 3 >= abs $start - $_, @{ $hash{$mir}{$tar} })
    {
              print $line, "\n";
    }
} 
```

# ruby-on-rails - 保存我的 ActiveRecord 模型会删除我的 CarrierWave 图像版本

> ID：14462284
> 
> 赞同：0
> 
> 时间：2013-01-22T15:38:40.503
> 
> 标签：ruby-on-rails, carrierwave, rails-activerecord

每当我使用已安装的上传器保存模型时，只要我保存它，版本就会被删除（并且看起来好像在正常上传图像时甚至没有创建版本）。请注意，直到几天/几周前它才能正常工作（我没有注意到确切的时间，尽管它可能是通过迁移到 Rails 3.2.11 发生的。我之前是 3.2.8）。

我的模型是这样定义的：

```
class Profile < ActiveRecord::Base
  attr_accessible :profile_picture
  mount_uploader :profile_picture, ProfilePictureUploader
  ...
end 
```

我的`ProfilePictureUploader`：

```
class ProfilePictureUploader < BaseUploader
  process :resize_to_fill => [248, 248]

  version :tiny do
    process :resize_to_fill => [34, 34]
    def full_filename(for_file = model.photo.file)
      "#{model.to_s.parameterize}_tiny.jpg"
    end
  end

  def extension_white_list
    %w(jpg jpeg gif png)
  end

  # Override the filename of the uploaded files:
  # Avoid using model.id or version_name here, see uploader/store.rb for details.
  def filename
    # John Snow -> john-snow-20120913162935.jpg
    # ACME inc. -> acme-inc-20120913162935.png
    "#{model.to_s.parameterize}-#{Time.now.strftime("%Y%m%d%H%M%S")}#{File.extname(original_filename)}" if original_filename
  end
end 
```

最后是我的`BaseUploader`：

```
class BaseUploader < CarrierWave::Uploader::Base
  include CarrierWave::RMagick

  # Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:
  include Sprockets::Helpers::RailsHelper
  include Sprockets::Helpers::IsolatedHelper

  # Override the directory where uploaded files will be stored.
  def store_dir
    "system/uploads/#{model.class.to_s.underscore}/#{model.id}"
  end

  # Override the filename of the uploaded files:
  def filename
    "#{mounted_as}#{File.extname(original_filename)}" if original_filename
  end
end 
```

我在开发中使用文件存储，在生产中使用雾存储，但是在这两种环境中都会出现问题，所以我们假设它正在使用文件存储。

这是我的典型场景：

*   我将图像上传到个人资料，仅创建标准图像（例如：）`mbillard-20130122102833.jpg`。
*   我调用`recreate_versions!`个人资料图片，标准图像和小版本都被创建（由于我的特定命名方案而重新创建了标准，我对此很好）。
*   我保存了我的模型，文件夹 ( `system/uploads/profile/1/`) 中的所有内容都被删除，除了具有`profile_picture`属性文件名的图像。

我使用载波 0.8.0。我相信它与保存触发器有关，但无法通过查看代码来弄清楚。

（我还并行打开了一个[GitHub 问题）](https://github.com/jnicklas/carrierwave/issues/961)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:51:47.567

我终于弄明白了。基本上，似乎删除了我新创建的版本的`remove_previously_stored_#{column}`方法，`mount.rb`因为它们与以前的版本具有相同的名称。

我修改了我的小版本文件名以包含时间戳（这样它就不会与以前的小版本具有相同的文件名）：

```
version :tiny do
  process :resize_to_fill => [34, 34]
  def full_filename(for_file = model.photo.file)
    "#{model.to_s.parameterize}_#{timestamp}_tiny.jpg"
  end
end 
```

我简化了我的`filename`逻辑，以简单地定义带有时间戳的文件名：

```
# Override the filename of the uploaded files:
# Avoid using model.id or version_name here, see uploader/store.rb for details.
def filename
  # John Snow -> john-snow-20120913162935.jpg
  # ACME inc. -> acme-inc-20120913162935.png

  "#{model.to_s.parameterize}-#{timestamp}#{File.extname(original_filename)}" if original_filename.present?
end 
```

我的时间戳函数要么从文件名中提取时间戳，要么在重新创建版本或上传新文件时生成一个新的时间戳（当 original_filename 存在时）：

```
protected

def timestamp
  if original_filename.blank?
    match_data = /^.+-(\d{14})\.\D{3,4}$/.match(File.basename(model.read_attribute(mounted_as)))

    return match_data[1] if match_data
  end

  var = :"@#{mounted_as}_timestamp"
  model.instance_variable_get(var) || model.instance_variable_set(var, Time.now.strftime("%Y%m%d%H%M%S"))
end 
```

请注意，以前的时间戳可以存储在我的模型的属性中，但这对我有用。

现在唯一让我烦恼的是我必须保存我的模型，以便在重新创建版本时删除以前的文件。

```
model.recreate_versions! # recreates versions but leaves the previous files there
model.save # removes the previous files 
```

你可以在[GitHub 问题上](https://github.com/jnicklas/carrierwave/issues/961)看到我的整个思考过程。

# javascript - 这些 ActiveXObject 和 XMLHttpRequest 检查是否适用于 IE6 以外的任何其他浏览器？

> ID：14462286
> 
> 赞同：2
> 
> 时间：2013-01-22T15:38:51.110
> 
> 标签：javascript, ajax, xmlhttprequest, internet-explorer-6

我在 IE10 中为 plUpload 插件遇到了一个奇怪的错误，我发现如果我在我们的项目中删除此代码，一切正常。谁能告诉我这是做什么的以及是否可以安全删除？看起来它只适用于IE6？我对吗？

```
var progids = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP"];
var progid = null;

if (typeof ActiveXObject != "undefined") {
var ie7xmlhttp = false;
if(typeof XMLHttpRequest == "object") {
    try {
        var o = new XMLHttpRequest();
        ie7xmlhttp = true;
    } catch (e) {
    }
}
if(typeof XMLHttpRequest == "undefined" || !ie7xmlhttp) {
    XMLHttpRequest = function() {
        var xmlHttp = null;
        if(!BlocAjax.noActiveX) {
            if(progid != null) {
                return new ActiveXObject(progid);
            }
            for(var i=0; i<progids.length && xmlHttp == null; i++) {
                try {
                    xmlHttp = new ActiveXObject(progids[i]);
                    progid = progids[i];

                }catch(e){}
            }
        }
        if(xmlHttp == null && MS.Browser.isIE) {
            return new .IFrameXmlHttp();
        }
        return xmlHttp;
    };
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:37:28.960

是的，我相信还有其他浏览器。您显示的检查试图通过查找支持 ActiveX (IE*) 但不支持 XMLHttpRequest (IE6-) 的浏览器来检测 IE。但是，如果 ie7xmlhttp 标志可能被初始化为 null 或未定义，那么任何不支持 XMLHttpRequest 的非 IE 浏览器都将被类似处理，因为`if(typeof XMLHttpRequest == "undefined" || !ie7xmlhttp) {`在这些情况下都是如此。

因此，几乎*所有*不支持 XMLHttpRequest 的旧版浏览器都会陷入`if`尝试填充 XMLHttpRequest API 的障碍。并不是说有很多人在使用它们，但我确信它们就在那里。（例如，特别是旧版本的 FF、Opera、Safari……可能是鲜为人知的移动浏览器……诸如此类。）

顺便说一句，[微软的 XMLHttpRequest 文档](http://msdn.microsoft.com/en-us/library/ie/ms535874%28v=vs.85%29.aspx)推荐这个代码片段用于 x 平台 XMLHttpRequest 构造，我推荐：

```
function getXMLHttpRequest() 
{
    if (window.XMLHttpRequest) {
        return new window.XMLHttpRequest;
    }
    else {
        try {
            return new ActiveXObject("MSXML2.XMLHTTP.3.0");
        }
        catch(ex) {
            return null;
        }
    }
} 
```

# c++ - 使用其数据调整图像大小

> ID：14462299
> 
> 赞同：2
> 
> 时间：2013-01-22T15:39:36.253
> 
> 标签：c++, image, rescale

我有一个 C++ 程序，它读取图像文件，处理标题，然后将图像的颜色数据存储在指向 chars 指针的指针中

```
unsigned char** pixelData = new unsigned char*[header.width*header.height];
for(int i=0;i<header.width*header.height;i++)
    pixelData[i] = new unsigned char[bytes2read]; //bytes2read is 3(rgb) or 4(rgba) 
```

如果我想将图像重新缩放到原始大小的一半，我该怎么做？有谁知道一个方便的算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:41:56.110

最简单的方法就是简单地平均每个 2x2 像素正方形的 R、G、B 值。

通常，您正在做的是对图像应用过滤器以确定每个输出像素的新值。平均值是所谓的宽度为 2 的框式过滤器。您可以使用其他过滤器来提供更好或更差的结果，但平均值是我要开始的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:52:40.833

使用 OpenGL 怎么样。这对于 OpenGL 来说几乎是微不足道的，最好的部分是该操作是 GPU 加速的。

# python - Python - 有一个 pcolor 图；现在想要一个表面

> ID：14462303
> 
> 赞同：1
> 
> 时间：2013-01-22T15:39:42.173
> 
> 标签：python, numpy, matplotlib

我目前能够从一些数据中绘制 pcolor 样式图。数据由每个数据点 (X,Y,Z) 的三个坐标组成。

我的数据结构如下：

```
X: 1D array
   shape = [500,0]

Y: 1D array
   shape = [700,0]

Z: 2D array
   shape = [500, 700] 
```

所以我的 Z 数组的行对应于 X 坐标，我的列对应于 Y 坐标。

然后在 pcolor 图上绘制数据，我只是做了：

```
plt.pcolormesh(X,Y,Z.T) 
```

由于 pcolormesh 期望如何接收输入数据，因此需要转置。

现在我想使用`plot_surface`. 但是，我在以必要的方式构建数据时遇到了问题。任何人都可以提供任何指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:59:21.257

[`plot_surface`](http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html?highlight=plot_surface#mpl_toolkits.mplot3d.Axes3D.plot_surface)期望所有输入数组都是二维的。

您可以使用 numpy.meshgrid 生成网格点

```
In [78]: X = np.arange(500)                 
In [79]: Y = np.arange(700)

In [83]: xx, yy = np.meshgrid(X, Y)

In [84]: xx.shape
Out[84]: (700, 500)

In [85]: yy.shape
Out[85]: (700, 500) 
```

然后你可以打电话`plot_surface(xx, yy, Z.T)`

# android - 应用详情屏幕 android

> ID：14462306
> 
> 赞同：3
> 
> 时间：2013-01-22T15:40:03.260
> 
> 标签：android, android-layout

我想在我的应用程序中创建一个应用程序详细信息屏幕，因为我能想象到的最佳设计模式是 android 的默认应用程序详细信息屏幕，如屏幕截图所示![在此处输入图像描述](../Images/5c88161dd8b18fb29406c2b91359bb7d.png)

现在这里的问题是，我不知道如何`"................"`在这些键值对之间创建部分，该虚线部分应该可以灵活地捕获以根据双方文本的大小来增加或缩小

例如

场景1：

`Total..........2MB` （10 点 + 文字）

方案 2：

`Total........200KB` （8 点 + 文字）

所以点会根据文本大小进行调整。

任何人都可以建议我如何实现这一点，如果您知道一些更好的方式（模式）`key-value`在应用程序详细信息场景中显示配对，也欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:45:04.113

这很简单（虚拟布局）：

```
<RelativeLayout>
    <TextView parentLeft="true"/>
    <TextView parentRight="true"/>
    <Textview background="@drawable/one_dot_repeat"
        toRightOf="@id/firstTextView"
        toLeftOf="@id/secondTextView"
        layout_width="match_parent"> <!-- or any other view -->
</RelativeLayout> 
```

编辑：也许 9patch 并不完美，但您可以创建一个 xml，您只需添加一个带有一个点的图像并设置重复 =“true”。

第二次编辑：更合适的解决方案可能是添加一个[形状](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)作为背景。形状可能是这样的（未经测试）：

```
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="line" >
    <size
        android:width="500"
        android:height="1" />
    <solid
        android:color="@color/black" />
    <stroke
        android:width="1"
        android:color="@color/white"
        android:dashWidth="1"
        android:dashGap="1" />
</shape> 
```

我认为您需要稍微调整一下这些值，但它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:31:21.053

[java.util.Formatter](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)救援：

格式化程序可以左对齐要打印的文本，您可以为其分配宽度，因此它将用空格填充文本，使其占据所有所需的宽度，然后您只需用点替换空格。这是一个例子：

```
import java.util.*;

public class Test
{
        public static final synchronized strictfp void main(String[] args)
        {
                Map<String, Double> myData = new LinkedHashMap<String, Double>();
                myData.put("Total", 24.0);
                myData.put("App", 24.0);
                myData.put("USB storage app", 0.0);
                myData.put("Data", 0.0);
                myData.put("SD card", 0.0);

                for(Map.Entry myEntry : myData.entrySet())
                {
                        Formatter myFormatter = new Formatter();
                        myFormatter.format("%1$-20s%2$15.2fKB", myEntry.getKey(), myEntry.getValue());
                        System.out.println(myFormatter.toString().replace(' ', '.'));
                }
        }
} 
```

这里有趣的部分是格式字符串：

```
%1$-20s 
```

将最大宽度为 20 个字符 (20) 的第一个参数 (1$) 左对齐 (-) 打印为字符串 (s)。

```
%2$15.2fKB\n 
```

将最大宽度为 15 个字符 (15) 和 2 个小数点 (.2) 的第二个参数 (2$) 打印为浮点数 (f)。

这意味着第一个值将始终固定为 20 个字符，第二个值将始终固定为 15 个字符。那么所有的行总是 35 个字符长 + KB 后缀 + 浮点数的小数点。

上面的代码产生输出：

```
Total.........................24.00KB
App...........................24.00KB
USB.storage.app................0.00KB
Data...........................0.00KB
SD.card........................0.00KB 
```

TODO：不要覆盖第一列名称中的合法空格；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:55:27.820

虽然我不确定，但我仍然想到我们也可以通过以下方式实现这一目标，

您定义要在屏幕上打印/显示的字符串的总长度。

假设你定义它 20\. 现在你有两种情况，让我通过一个例子告诉你。

> Str1 = 总计
> 
> Str2 = 200KB
> 
> 您现在可以添加另一个字符串，例如
> 
> STR3 =“”；
> 
> for(i=0;i<(20-str1.length()-str2.length))
> 
> str3 +=".";
> 
> 现在你有了三个字符串，分别是“Total”、“200KB/20KB”和“dots/...”，你可以在单个 TextV 或多个 TextView 的帮助下打印它们。

您也可以尝试计算总长度而不是 20。正如我所提到的，我不确定，所以请不要投反对票：P

# php - 如何在 PHP 中正确构建数组并在 JavaScript/jQuery 中获取值

> ID：14462307
> 
> 赞同：0
> 
> 时间：2013-01-22T15:40:05.717
> 
> 标签：php, arrays, jquery

从数据库查询中，我得到一条返回字段/值的记录并将其放入数组中：

```
$arr = array();
while ($rowSearchZipCode = mysqli_fetch_array($resultSearchZipCode, MYSQLI_ASSOC)) {
    $arr[] = $rowSearchZipCode;
} 
```

我通过 php 脚本的回显将其发送回 jQuery ajax 调用：

```
echo print_r($arr); 
```

在 $.ajax 的成功参数中的警告框中显示该数组表明我得到了一个如下所示的多维数组：

```
Array
(
[0] => Array
    (
        [id] => 55
        [branchName] => SBN - Some Branch Name
        [branchAddress1] => 1234 Elm St.
        [branchAddress2] => Suite 000
        [branchAddressCity] => Anywhere
        [branchAddressState] => CA
        [branchAddressZip] => 55000
        [branchAddressPhone] => 555-555-5555
        [branchAddressFax] => 555-555-4444
    )

)
1 
```

问题 1：我是否在 while 循环中正确构建了数组？

问题 2：在 $.ajax 调用中，如何从数组中获取字段/值对，以便将它们输出到 HTML 标记等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:59:22.273

PHP端：

*   不要忘记发送正确的 JSON 标头：

    ```
    header('Content-Type: application/json'); 
    ```

*   并在回显之前使用 json_encode 对数组进行编码：

    ```
    echo json_encode($myarray); 
    ```

客户端使用：

```
$.ajax({
    url: '<url>',
    dataType: "json", //optionnal if you correctly set the header
    success: function(data){
        for (var i in data) {
            console.log(data[i]); //data[i] are JS object
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:44:21.157

```
Question 1: Am I building the array correctly in the while loop? 
```

是的

```
Question 2: In the $.ajax call how do I get the field/value pairs from the array so that I can output them to HTML tags, etc? 
```

当像下面这样进行 AJAX 调用时，您可以在发送数组之前使用[json_encode 。](http://php.net/manual/en/function.json-encode.php)

```
echo json_encode($arr); 
```

使用 jQuery [jQuery.parseJSON()](http://api.jquery.com/jQuery.parseJSON/)对 AJAX 调用成功函数中的数组进行解码。使用首选循环遍历数组。

例如：

```
$.ajax({
  url: myUrl,
  cache: false,
  dataType: "json",
  success: function(data){
    //use jQuery.parseJSON() & foreach goes here.
  },
  error: function(e, xhr){
    //alert('error');
  }
}); 
```

JSON（JavaScript Object Notation）是一种轻量级的数据交换格式。[阅读更多](http://www.json.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:45:32.840

> 问题 1：我是否在 while 循环中正确构建了数组？

是的

> 问题 2：在 $.ajax 调用中，如何从数组中获取字段/值对，以便将它们输出到 HTML 标记等？

不要使用 print_r，使用[`json_encode`](http://php.net/json-encode). JSON 是 JavaScript 的子集，而 JQuery.ajax 将为您提供即用型 JavaScript 对象作为响应。要强制执行此操作，请添加`dataType: 'json'`到 AJAX 选项并在回显 JSON 之前使用 PHP 发送正确的内容类型标头：

```
header('Content-type: application/json'); 
```

# actionscript-3 - AS3 Loader 挂起/不触发 COMPLETE

> ID：14462308
> 
> 赞同：0
> 
> 时间：2013-01-22T15:40:05.603
> 
> 标签：actionscript-3, loader

我有一个字体类，它加载一个 png 文件和一个 xml 文件，它指定字形在位图上的位置。字体加载功能启动了 2 个加载器，一个用于 png，一个用于 xml。当它们都完成时，初始化函数运行。奇怪的是，当我从 Flash Builder 运行应用程序并且它在 IE 中运行良好时，一切正常，但是当我使用 chrome 并且没有通过 Flash Builder 运行时，并且内容之前已经加载过一次（清除浏览器缓存可以解决问题）然后以下行挂起：

```
public function bitmapLoadComplete(evt:Event):void
{
    mObject = LoaderInfo(evt.target).content;  // <--- hangs here
    itemLoaded();
} 
```

mObject 声明如下：

```
public var mObject:*; 
```

itemLoaded 递减一个计数器（初始化为 2），如果它为零，则表示两个资产都已加载并运行 init 函数。

有任何想法吗？

资产位于此处：

[https://s3.amazonaws.com/IceCreamSoftware/letters0.png](https://s3.amazonaws.com/IceCreamSoftware/letters0.png) https://s3.amazonaws.com/IceCreamSoftware/letters.bitmapfont

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:48:53.333

我未能将 checkPolicyFile 设置为 true 的 LoaderContext 传递给 Loader 对象的 load() 方法。这导致了 Chrome 嵌入式 Flash 播放器没有通知我的安全沙盒违规。禁用内置播放器并使用调试插件会弹出一个对话框，告诉我发生了什么。吸取了所有好的教训。奇怪的是：

```
1) Clearing the browser cache allowed the content to be loaded one time in Chrome
2) It always worked in IE 
```

# ruby-on-rails - Rails ActionMailer： :sendmail 在生产中工作吗？

> ID：14462309
> 
> 赞同：1
> 
> 时间：2013-01-22T15:40:10.513
> 
> 标签：ruby-on-rails

我的网站上有一个表格供用户与我联系，并且在提交表格时会发送邮件。在我的配置/初始化程序中，我有一个 setup_mail 初始化程序：

```
ActionMailer::Base.smtp_settings = {
  :address              => "localhost",
  :port                 => 25
}

ActionMailer::Base.delivery_method = :sendmail 
```

它在开发中工作。但与 SMTP 服务器（如 Gmail，你有 :login、:username、:password 等）相比，我觉得设置太少了，所以我担心它在生产中是否有效。实际从哪里`:sendmail`发送？对于我要发送的电子邮件，它将使用用户电子邮件作为发件人，我的电子邮件作为收件人。

# ant - 来自 ANT build.xml 的 CVS 提交示例

> ID：14462310
> 
> 赞同：0
> 
> 时间：2013-01-22T15:40:10.203
> 
> 标签：ant, cvs, commit

我的 build.xml 有...

```
<property name="cvs.directory" value="MyProj/build" />

<target name="CVS.Commit" depends="login">
  <echo>Commiting EAR file to CVS....</echo>
  <cvs command="commit abc.ear" cvsRoot="${cvs.directory}" quiet="true" failonerror="false"/>
   </target> 
```

我得到以下错误。

```
[echo] Commiting EAR file to CVS....
  [cvs] cvs commit: CVSROOT "MyProj/build" must be an absolute pathname
  [cvs] cvs [commit aborted]: Bad CVSROOT. 
```

MyProj - 在 cvs 的 HEAD 中，它有一个旧版本 abc.ear 的“build”目录

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:47:28.087

如下更改 CVS 目录属性：

```
<property name="cvs.directory" location="MyProj/build" /> 
```

这将确保目录名称是绝对的

# javascript - 基于相同项对数组项进行排序并创建多维数组

> ID：14462312
> 
> 赞同：1
> 
> 时间：2013-01-22T15:40:21.147
> 
> 标签：javascript, angularjs, sorting

因此，我正在解决我[在这里](https://stackoverflow.com/questions/14363888/creating-wrapper-div-using-loops-and-ng-class-in-angularjs)提出的上一个问题，其中我谈到了使用 AngularJS 从 JSON 文件制作历史时间线。本质上，JSON 文件包含一堆 HISTORY EVENTS 对象，每个对象都包含一个名为“theDate”的 ID，以指示这些唯一事件发生的日期。我想将所有事件分类到其特定的 DECADES 中，以便稍后在视图中使用 CSS 进行导航。

我正在努力创建一个多维数组，其结构应该是这样的（这应该是 MASTER 数组）：

```
[[all of 1960s events],[all of 1970s events], [all of 1980s events]...] 
```

...其中 MASTER 数组中的每个特定数组都包含该特定十年的事件对象。（例如，对于 1960 年代的数组，事件应该包含 years `[ 1961, 1963, 1969,etc.]`。

使用 AngularJS，我的工作代码在这里：

```
 var events = $scope.events;

    function decadeSort(){

        var year;
        var arrayOfYears = [];

        for(var i = 0; i<events.length; i++){

            var date = new Date(events[i].theDate);
            year = date.getFullYear();

            var yearToString = year.toString();
            var yearToDecade = yearToString.substring(0,3).concat("0");
            arrayOfYears.push(yearToDecade);

        }
        console.log(arrayOfYears);
    };

    decadeSort(); 
```

该`arrayOfYears`数组根据它们各自的 DECADE 打印出 267 个事件对象的所有年份，如下所示：

```
["1960","1960","1970","1970","1970","1980","1980","1990","1990","2000","2000"..] 
```

随着该数组中的一些字符串对象重复，我希望根据哪些对象是相同的字符串在该数组中创建新数组。我不知道如何编写这个循环，所以任何见解和帮助将不胜感激。

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:02:08.373

使用您发布的示例事件，以下是按十年分组的简单方法：

```
var grouped = {};

events.forEach(function (event) {
  var decade = Math.floor((new Date(event.theDate)).getFullYear() / 10) * 10;
  if (typeof grouped[decade] === 'undefined') {
    grouped[decade] = [];
  }

  grouped[decade].push(event);
});

console.log(grouped); 
```

如果您的[`forEach`](https://developer.mozilla.org/docs/JavaScript/Reference/Global_Objects/Array/forEach)目标浏览器不支持它，您可能需要更改它。

# c# - 通过 ShowDialog() 显示半透明自定义表单时闪烁

> ID：14462316
> 
> 赞同：0
> 
> 时间：2013-01-22T15:40:37.193
> 
> 标签：c#, drawing, flicker, showdialog, onpaint

我需要`MessageForm`在主窗体 ( ) 上显示一个对话框窗体 ( `ParentForm`)。`MessageForm`包含一个面板 ( )，我在其`mainPanel`上添加了一些运行时控件（关闭按钮和许多标签和链接标签）。MessageForm 有一个特定的行为：它必须是半透明的，并且在显示时，ParentForm 必须是非活动的：

```
public MessageForm(FrmGlobalStatus _parent)
{
    InitializeComponent();
    this.TransparencyKey = this.BackColor;

}

protected override void OnPaintBackground(PaintEventArgs pe)
{
    var hb = new HatchBrush(HatchStyle.Percent50,
            System.Drawing.ColorTranslator.FromHtml(HATCH_BACK_COLOR),
            this.TransparencyKey);
    pe.Graphics.FillRectangle(hb, this.DisplayRectangle);
}

private void mainPanel_Paint(object sender, PaintEventArgs pe)
{
    using (System.Drawing.Pen p = new Pen(new SolidBrush(this.BorderColor)))
    {
        if (borderRadius > 0)
        {
            DrawRoundRect(pe.Graphics, p, 0, 0, mainPanel.Width - 1, mainPanel.Height - 1, borderRadius, this.FillColor);
        }
        else
        {
            pe.Graphics.DrawRectangle(p, 0, 0, mainPanel.Width - 1, mainPanel.Height - 1);
        }
    }
} 
```

显示 MessageForm 的函数：

```
public void Show()
{
    LinkLabel newLinkLabel;
    Label newLabel;
    int lastItemBottom = 0;

    if (Items.Count > 0)
    {
        for (int i = 0; i < Items.Count; i++)
        {
            if (Items[i].LinkAreaLength != 0)
            {
                newLinkLabel = new LinkLabel();
                newLinkLabel.Location = new Point(LINKLABEL_H_MARGIN, LINKLABEL_V_MARGIN + i * LINKLABEL_STEP);
                lastItemBottom = newLinkLabel.Bottom;

                newLinkLabel.BackColor = Color.Transparent;
                newLinkLabel.Text = Items[i].Text;
                newLinkLabel.LinkColor = LinkDefaultColor;
                newLinkLabel.ActiveLinkColor = LinkActiveColor;
                newLinkLabel.AutoSize = true;
                newLinkLabel.Links.Add(Items[i].LinkAreaStart, Items[i].LinkAreaLength, Items[i].URL);
                newLinkLabel.VisitedLinkColor = LinkVisitedColor;
                newLinkLabel.Name = LINK_LABEL_FAMILY + i.ToString();
                newLinkLabel.LinkClicked += new LinkLabelLinkClickedEventHandler(LinkClicked);
                newLinkLabel.MouseHover += new EventHandler(Link_MouseHover);
                newLinkLabel.MouseLeave += new EventHandler(Link_MouseLeave);

                //for max label length calculation
                labelsWidth.Add(Convert.ToInt16((newLinkLabel.CreateGraphics().MeasureString(newLinkLabel.Text, newLinkLabel.Font)).Width));

                this.mainPanel.Controls.Add(newLinkLabel);
                newLinkLabel.BringToFront();
            }
            else
            {
                newLabel = new Label();
                newLabel.Location = new Point(LINKLABEL_H_MARGIN, LINKLABEL_V_MARGIN + i * LINKLABEL_STEP);
                lastItemBottom = newLabel.Bottom;

                newLabel.BackColor = Color.Transparent;
                newLabel.Text = Items[i].Text;

                newLabel.Name = LABEL_FAMILY + i.ToString();
                newLabel.AutoSize = true;

                //for max label length calculation
                labelsWidth.Add(Convert.ToInt16((newLabel.CreateGraphics().MeasureString(newLabel.Text, newLabel.Font)).Width));

                this.mainPanel.Controls.Add(newLabel);
                newLabel.BringToFront();
            }
        }
        //centering the mainPanel on MessageForm
        mainPanel.Width = BOX_WIDTH;
        mainPanel.Height = lastItemBottom + 2;// +LINKLABEL_V_MARGIN;
        mainPanel.Location = new Point((Width - mainPanel.Width) / 2, (Height - mainPanel.Height) / 2);
        ShowDialog(parent);
    }
} 
```

`LinkLabel`“项目”是已经包含标签和控件的所有文本的特定结构的列表。好吧，现在的问题是：当我从 调用`Show`函数时`ParentForm`，我`MessageForm`的在闪烁，这足以让眼睛感到不安。我怎样才能消除这种闪烁？

# c# - MVC4 Post/RedirectToAction / 刷新重定向问题

> ID：14462322
> 
> 赞同：0
> 
> 时间：2013-01-22T15:40:43.840
> 
> 标签：c#, asp.net, asp.net-mvc-4

有什么作用。。

1.  保存到数据库后执行重定向..效果很好。

    ```
    return RedirectToAction("Index", new {id = appt.CourseExamApptID}); 
    ```

2.  索引视图显示我的确认消息，用户现在可以根据需要再次完成该过程。如果用户点击返回，应用程序会执行 GET 应该做的事情并给出一个漂亮的错误消息。显示的 URL 是 /reserve，这是我重定向的 POST 操作。

问题：

如果此时用户单击刷新，则应用程序会执行“/reserve” url，这会将用户带到我的控制器中的 Reserve-GET..这是一个问题，因为我的 Reserve-GET 期望参数通过一步步骤过程..我的应用程序出现错误，参数为空，但我不想让用户从这里开始..

问题：

重定向的目标是否可以显示在 URL 或源中？这会阻止用户在刷新时重定向回我的 Reserve-GET 吗？

# javascript - 无法在 ASP.NET GridView ItemTemplate 中的 PlaceHolder 中获取“div”

> ID：14462326
> 
> 赞同：0
> 
> 时间：2013-01-22T15:41:01.290
> 
> 标签：javascript, asp.net, gridview

我在 asp.net gridview 中有“PlaceHolder”，在那个占位符中我想添加带有多项选择的下拉列表。在代码隐藏中，我添加了一个包含“复选框”的 div，因此当用户单击下拉 div 时，将打开复选框。但在 javascript 中，我无法使用 grid.getElementById 获取 div。

这是使用复选框创建下拉菜单的代码隐藏：

```
DropDownList ddl = new DropDownList();
        ddl.ID = "ddlChkList";
        ListItem lstItem = new ListItem();
        ddl.Items.Insert(0, lstItem);
        ddl.Width = new Unit(155);
        ddl.Attributes.Add("onmousedown", "showdivonClick()");
        CheckBoxList chkBxLst = new CheckBoxList();
        chkBxLst.ID = "chkLstItem";
        chkBxLst.Attributes.Add("onmouseover", "showdiv()");

        //DataTable dtListItem = ListPrograms();

        //int rowNo = dtListItem.Rows.Count;
        int rowCount = programs.Count;
        string lstValue = string.Empty;
        string lstID = string.Empty;

        int i = 0;

        foreach (AlmsPrograms program in programs)
        {
            i++;
            lstValue = program.PROGRAMNAME;
            lstID = program.PROGRAMID.ToString();
            lstItem = new ListItem("<a href=\"javascript:void(0)\" id=\"alst\" style=\"text-decoration:none;color:Black; \" onclick=\"getSelectedItem(' " + lstValue + "','" + i + "','" + lstID + "','anchor');\">" + lstValue + "</a>", program.PROGRAMID.ToString());
            lstItem.Attributes.Add("onclick", "getSelectedItem('" + lstValue + "','" + i + "','" + lstID + "','listItem');");
            chkBxLst.Items.Add(lstItem);
        }

        System.Web.UI.HtmlControls.HtmlGenericControl div = new System.Web.UI.HtmlControls.HtmlGenericControl("div");
        div.ID = "divChkList";
        div.Controls.Add(chkBxLst);
        div.Style.Add("border", "black 1px solid");
        div.Style.Add("width", "250px");
        div.Style.Add("height", "180px");
        div.Style.Add("overflow", "AUTO");
        div.Style.Add("display", "none");
        phDDLCHK.Controls.Add(ddl);
        phDDLCHK.Controls.Add(div); 
```

然后在 aspx 文件中，我尝试使用以下代码获取该 div：

```
function showdivonClick() {
            var gridViewCtID = '<%=gvProgramSelection.ClientID %>';

            var grid = document.getElementById(gridViewCtID);
            var objDLL = document.getElementById(gridViewCtID + "_divChkList");
            //var objDLL = grid.getElementById('divChkList');
            if (objDLL.style.display == "block")
                objDLL.style.display = "none";
            else
                objDLL.style.display = "block";
        } 
```

但网格还在“divChkList”之前添加了“ctl01”、“ctl02”。如何获得这些动态创建的名称？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:47:28.177

Set the ClientIDMode to Static which won't muck around with your id (but will still muck around with the name) or another quick and easy way is to just add a class to the div and use that as the selector in jQuery instead.

# unity3d - '运算符>不能与'object'类型的左侧和'object'类型的右侧一起使用Unity中的错误

> ID：14462332
> 
> 赞同：1
> 
> 时间：2013-01-22T15:41:17.697
> 
> 标签：unity3d, unityscript

我有这些代码，我收到了这个错误。“运算符>不能与'object'类型的左侧和'object'类型的右侧一起使用。对我来说，这就像游戏引擎的unityscript中的一个错误，你怎么看？？

```
var PlayerNames = ["john","doe","potato"];
var PlayerScores = [3,2,5];

if(PlayerScores[1] < PlayerScores[0])
print("potato"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T12:36:31.727

UnityScript 和 Javascript 之间存在差异。在 JavaScript 中，不需要将变量调用到类中。因此，您向我们展示的代码是正确的。

但是，这在 UnityScript 中是不正确的。您需要声明变量的类。看这个例子：

```
function Machine(x) {
   this.kind = ["bulldozer", "lathe", "car"][x];
}

var c = new Machine(2);
print(typeof c.announce); // "undefined"

Machine.prototype.announce = function() {
   print("I am a "+this.kind+".");
};

print(typeof c.announce); // "function"
c.announce(); // prints "I am a car." 
```

如上所示，在 JavaScript 中，一个函数可以在使用 new 关键字调用时创建一个对象。在此之后，原型（模板）对象 Machine 可以被扩展以提供额外的功能，并且所有的类实例，过去和未来，都会受到这个扩展的影响。

UnityScript 有类，不像 JavaScript。此外，在 UnityScript 中，一旦定义了一个类，该类在程序运行期间或多或少是固定的。（注意，这条规则可能有一些例外，例如反射，但您可能不需要它，也不应该使用它，因为它效率不高。）但是，类系统还有一个额外的好处，那就是更容易上手。 -阅读，更熟悉（对大多数人来说）语言。

```
class Machine {
   var kind : String; // fields are public by default
   function Machine(x : int) {
      this.kind = ["bulldozer", "lathe", "car"][x];
   }

   function announce() {
      print("I am a "+this.kind+".");
   }
}

print(typeof Machine.prototype); // causes a compile-time error
var c = new Machine(2);
c.announce(); // prints  "I am a car." 
```

# python - 如何将列表和其他值作为命令行参数传递？

> ID：14462335
> 
> 赞同：2
> 
> 时间：2013-01-22T15:41:24.977
> 
> 标签：python, python-2.7

我想将 4 个参数传递给我的 python 脚本，其中一个必须是列表。即使它只包含 1 个元素。

参数的顺序无关紧要。

```
 import sys
    print sys.argv

    one = sys.argv[1]
    two = sys.argv[2]
    three = sys.argv[3]
    four = sys.argv[4]

    print "one: " + one
    print "two: " + two
    print "three: "+ three
    print "four: " + four 
```

我就是这样称呼它的。

```
 python myScript.py name file setting ['listItem1'] 
```

其中第四项是具有一个元素的列表。但是，当我打印它时，我看到

```
 four: [listItem1] 
```

我想看看

```
 four: ['listItem1'] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T15:46:21.100

也许更好的方法是调用你的脚本

```
python myScript.py name file setting listItem1 ... 
```

然后使用切片代替：

```
four = sys.argv[4:] 
```

这将 python 语法排除在 shell 之外，这很丑陋，并且可能会在以后使用 shell 中的特殊字符导致更多麻烦。

更好的方法是使用[argparse](http://docs.python.org/2/howto/argparse.html)模块实现适当的 CLI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:02:25.113

正如 PersonArtPhoto 指出的那样，您需要转义引号以防止外壳自己使用它们。

您将在程序中结束的是一个类似于列表的字符串，这不是您想要的

```
import sys 

four = sys.argv[4]
print four[2] 
```

节目

```
$ python myscript.py one two three [\'first\',\'second\']
f 
```

这`'f'`来自索引`"['first','second']"`，因为它只是一串字符

* * *

让 python 解释这一点的一种方法是`eval`，但它**非常**不安全，因为它非常**不安全**。 `eval`将字符串解释为代码，因此不应在用户输入中使用它，因为用户可以输入*任何内容*，python 将执行它。

```
import sys 

four = eval(sys.argv[4])
print four[1] 
```

节目

```
$ python myscript.py one two three [\'first\',\'second\']
second 
```

* * *

相反，我建议采用更安全的方法。使用*命令行标志*来表示您正在发送参数列表

```
import sys

# make sure the --args flag was passed
if '--args' not in sys.argv:
    print >> sys.stderr, 'Please pass the "--args" flag followed by a list of'\
            ' arguments'
    sys.exit(1) #terminate execution if it wasn't

four = sys.argv[sys.argv.index('--args')+1:] # everything passed after --args
print four 
```

节目

```
$ python myscript.py one two three --args 'first' 'second'
['first', 'second'] 
```

* * *

如果您知道列表之前总会有三个参数，您可以简单地使用切片

```
import sys

one, two, three = sys.argv[1:4] # grab indicies 1, 2, and 3
four = sys.argv[4:]
print one
print two
print three
print four 
```

节目

```
$ python myscript.py one two three 'first' 'second'
one
two
three
['first', 'second'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T15:43:08.303

你需要转义引号

```
python myScript.py name file setting [\'listItem1\'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T15:54:48.133

**程序：**

```
import sys, ast, getopt, types

def main(argv):            
    arg_dict={}
    switches={'li':list,'di':dict,'tu':tuple}
    singles=''.join([x[0]+':' for x in switches])
    long_form=[x+'=' for x in switches]
    d={x[0]+':':'--'+x for x in switches}
    try:            
        opts, args = getopt.getopt(argv, singles, long_form)
    except getopt.GetoptError:          
        print "bad arg"                       
        sys.exit(2)       

    for opt, arg in opts:        
        if opt[1]+':' in d: o=d[opt[1]+':'][2:]
        elif opt in d.values(): o=opt[2:]
        else: o =''
        print opt, arg,o
        if o and arg:
            arg_dict[o]=ast.literal_eval(arg)

        if not o or not isinstance(arg_dict[o], switches[o]):    
            print opt, arg, " Error: bad arg"
            sys.exit(2)                 

    for e in arg_dict:
        print e, arg_dict[e], type(arg_dict[e])        

if __name__ == '__main__':
    main(sys.argv[1:]) 
```

**命令行：**

```
python py.py --l='[1,2,3,[1,2,3]]' -d "{1:'one',2:'two',3:'three'}" --tu='(1,2,3)' 
```

**输出：**

```
args:  ['--l=[1,2,3,[1,2,3]]', '-d', "{1:'one',2:'two',3:'three'}", '--tu=(1,2,3)']
tu (1, 2, 3) <type 'tuple'>
di {1: 'one', 2: 'two', 3: 'three'} <type 'dict'>
li [1, 2, 3, [1, 2, 3]] <type 'list'> 
```

此代码片段将采用短或长命令切换，如`-l`or`--li=`并将切换后的文本解析为 Python 数据结构，如列表、元组或字典。解析后的数据结构最终出现在带有长格式开关键的字典中。

使用[ast.literal_eval](http://docs.python.org/library/ast.html#ast-helpers)相对安全。它只能解析python数据定义。

# jboss - CMT 交易

> ID：14462342
> 
> 赞同：1
> 
> 时间：2013-01-22T15:41:35.743
> 
> 标签：jboss, ejb, transactional

我这边还有一个问题......如果我有一个无状态服务（Stateless Session Bean）作为外观（比如 GlobalService），哪些方法会调用其他几个服务（同样是 SLSB，比如 FooService 和 BarService）：

```
@Stateless
@Remote(GlobalService.class)
@TransactionManagement(TransactionManagementType.CONTAINER)
public class GlobalServiceBean implements GlobalService{
private Logger log = Logger.getLogger(GlobalServiceBean.class);

@EJB
private FooService fooService;

@EJB
private BarService barService;

public void createFoo(Foo foo, Bar bar) throws WrappedGoneBadException{
          fooService.create(foo); // bang here 
              barService.create(bar); // no bang here 
```

FooService 中的所有方法（以及看起来几乎相同的 BarService）都被注释为需要一个新事务：

```
@Stateless
@Remote(FooService.class)
@TransactionManagement(TransactionManagementType.CONTAINER)
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public class FooServiceBean implements FooService{
   public Foo save(Foo foo){
     ... // exception here 
```

假定 FooServiceBean 保留了一些“Foo”类型的对象，在此期间，将抛出未经检查的异常 (DuplicateKeyException) 这会影响要回滚的“周围”事务还是会被忽略并创建 Bar？

我最初的想法是，它不会影响交易，但Jboss证明我错了......

这是人们可以预料到的行为吗，我错了吗？如果是这样……如何隔离它们： Foo 导致异常并且显然没有被保存但 Bar 被保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:21:21.917

让我感到羞耻......这是不适当的异常处理导致客户端在继续第二笔交易之前停止世界。

# objective-c - 如何将网站添加到 iphone/ipad 通讯录？

> ID：14462343
> 
> 赞同：1
> 
> 时间：2013-01-22T15:41:38.680
> 
> 标签：objective-c, xcode, abaddressbook

如何将网站添加到 iphone/ipad 通讯录的联系人中？我设法添加了电子邮件、电话号码，但我不能对网站做同样的事情。目前，我正在使用此代码将网站写入地址簿并显示，但点击它我会显示写电子邮件的表单

```
 const CFStringRef siteLabel = CFSTR("Site");
        ABMutableMultiValueRef multiEmail = ABMultiValueCreateMutable(kABMultiStringPropertyType);
        ABMultiValueAddValueAndLabel(multiEmail, sito, siteLabel, NULL);
        ABRecordSetValue(newPerson, kABPersonEmailProperty, multiEmail, &error);
        CFRelease(multiEmail); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:04:13.240

您需要使用`kABPersonSocialProfileProperty`属性和`kABPersonSocialProfileURLKey`密钥。

例如：

```
 ABMutableMultiValueRef multiURL = ABMultiValueCreateMutable(kABPersonSocialProfileProperty);
    ABMultiValueAddValueAndLabel(multiURL, url, siteLabel, NULL);
    ABRecordSetValue(newPerson, kABPersonSocialProfileURLKey, multiURL, &error); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:26:19.503

使用 Paul 的代码解决，稍作修改！

```
ABMutableMultiValueRef multiURL = ABMultiValueCreateMutable(kABMultiStringPropertyType);          
ABMultiValueAddValueAndLabel(multiURL, url, siteLabel, NULL); 
ABRecordSetValue(newPerson, kABPersonURLProperty, multiURL,&error); 
CFRelease(multiURL); 
```

# nuget - “管理”Nuget 包安装文件夹

> ID：14462349
> 
> 赞同：1
> 
> 时间：2013-01-22T15:42:00.173
> 
> 标签：nuget

我创建了一个nuget包，然后安装它，结果发现它创建了一个我没想到的目录结构。我想知道我做错了什么或者我可以做些什么来达到我的预期结果。 [文档](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)说：

> 安装包时，文件夹中的`content`文件会复制到应用程序的根目录

但事实并非如此！

为了澄清这个问题，我调用`nuget pack -BasePath staging`了以下文件夹结构：

*   分期/
    *   内容/
        *   我的插件/
            *   foo.txt

从那里开始，当我执行时，`nuget install MyPackage -o .\Target`我期望得到以下结果：

*   目标/
    *   我的插件/
        *   foo.txt

相反，我得到的是：

*   目标/
    *   MyPlugin.1.0.1.0/
        *   MyPlugin.1.0.1.0.nupkg
        *   内容/
            *   我的插件/
                *   foo.txt

显然，结果在两个关键方面与我的预期结果不同：

1.  我认为安装的 .nupkg 将存储在其他地方 - 在缓存位置。
2.  从文档中，我了解到这`content`是一个在打包过程中使用的特殊文件夹，但在安装时不会创建。

我误会了什么？我怎样才能解决这个问题？

**请注意**：我故意不指定 packages.config 或 SolutionDirectory，因为我打算`nuget install`在运行时执行它以将插件添加到应用程序。也许我可以说服我使用 packages.config，但我认为这不会特别影响我目前得到的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:31:54.713

您看到的是 nuget.exe 命令行的预期行为。引用 Balliauw 的话：

> 由于 NuGet 命令行没有您可能想要定位的解决方案或项目的上下文，因此它将安装操作限制为在特定位置提取包。
> Balliauw，马丁；德科斯特，泽维尔 (2012-03-07)。Pro NuGet（专业版）（Kindle 位置 1114-1115）。按。Kindle版。

# database - 仅对表中的一列授予更改

> ID：14462353
> 
> 赞同：20
> 
> 时间：2013-01-22T15:42:07.330
> 
> 标签：database, oracle, oracle11g, grant

我只想授予用户编辑表中的一列。我在这里使用什么命令？我使用oracle 11g 数据库。我已经知道如何仅授予对整个表的读取或删除权限，但是如何仅对一列或更多列执行此操作？请举个例子。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-22T16:29:12.810

例如，您只想授予对 ename 列的更新权限，然后给出以下语句（其中 xyz 是用户名）

```
grant update (ename) on emp to xyz; 
```

句法：

```
grant update(column-name) on table-name to user-name 
```

**编辑：（**用于授予选择权限）

要将 emp 表上的 select 语句授予 XYZ 并使 XYZ 能够进一步传递此特权，您必须像这样在 GRANT 语句中提供 WITH GRANT OPTION 子句。

```
grant select on emp to xyz with grant option; 
```

此外，例如，您只想授予对 ename 列的更新权限，并仅对 empno 和 ename 列授予插入权限，您可以这样做：

```
grant update (ename),insert (empno, ename)  on emp to xyz; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T16:27:39.080

基于[此来源](http://www.dba-oracle.com/concepts/column_privileges.htm)：

只能在列级别授予`INSERT`、`UPDATE`和权限。`REFERENCES`在列级别授予`INSERT`时，您必须在行中包含所有非空列。

这是一个例子：

```
GRANT update (column_name) ON table_name TO user_name; 
```

# iphone - MBProgressHUD 不工作

> ID：14462355
> 
> 赞同：-1
> 
> 时间：2013-01-22T15:42:08.797
> 
> 标签：iphone

我的 NavigationController 中的 RootViewController 有一个 UIButton。单击此按钮时，一些数据正在从服务器加载，最后出现一个新视图。这可能需要几秒钟，所以我想在那段时间内显示 MBProgressHUD 以向用户展示发生了什么。但它不起作用。

加载数据并显示 HUD，这一切都发生在我的 prepareForSegue-Method 中，它看起来像这样：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

     if([segue.identifier isEqualToString:@"showAllPoints"])
     {
         HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
         HUD.labelText = @"Loading data";
         HUD.detailsLabelText = @"Please wait...";
         HUD.mode = MBProgressHUDModeAnnularDeterminate;
         [self.navigationController.view addSubview:HUD];

         [HUD showWhileExecuting:@selector(prepareJSONData:) 
              onTarget:self withObject:        
         [self getJSONData] animated:YES];

         [self prepareJSONData:[self getJSONData]];
         [segue.destinationViewController setPoints:pointsArray];
    }

} 
```

什么都没有发生，所以我们是错误的吗？那里有什么问题？

编辑：这里是方法 getJSON 和 prepareJSONData ：

```
-(NSData *)getJSONData
{
  NSURL *url = [NSURL URLWithString:@"http://www.example.de/example.php"];

  NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
  [request setURL:url];
  [request setHTTPMethod:@"POST"];

  [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

  NSError *error;
  NSURLResponse *response;

  NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

return urlData;
}

-(void)prepareJSONData:(NSData *)jsonData
{
  NSError *error;

  NSDictionary *wholeDict = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];

  allWutpunkteArray = [wholeDict objectForKey:@"points"];

 } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T16:11:59.573

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {

         if([segue.identifier isEqualToString:@"showAllPoints"])
         {
             HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
             HUD.labelText = @"Loading data";
             HUD.detailsLabelText = @"Please wait...";
             HUD.mode = MBProgressHUDModeAnnularDeterminate;
             [self.navigationController.view addSubview:HUD];
             [HUD showWhileExecuting:@selector(prepareJSONData:[self getJSONData]) 
                  onTarget:self withObject:        
             nil animated:YES];
             [segue.destinationViewController setPoints:pointsArray];
        }

    } 
```

希望这可以帮助...

# php - 使用 jquery 为 textarea 中的光标位置添加值

> ID：14462357
> 
> 赞同：0
> 
> 时间：2013-01-22T15:42:10.063
> 
> 标签：php, jquery

> **可能重复：**
> [在光标使用 Javascript/jquery 的位置插入文本](https://stackoverflow.com/questions/1064089/inserting-a-text-where-cursor-is-using-javascript-jquery)
> [如何使用 javascript 在光标位置向文本区域添加文本](https://stackoverflow.com/questions/3510351/how-do-i-add-text-to-a-textarea-at-the-cursor-location-using-javascript)

我目前有一种基于单击带有 class=".module" 的对象来添加到文本区域的工作方法

我的问题是它只是添加到末尾，我需要一种方法将它添加到我的光标所在的位置或类似的地方，以便用户可以随时随地在文本区域中添加模块。

我的代码示例：

> 将 textarea "email-body" 的值设置为它 + 模块

```
$(".module").live('click', function() {
    $('#email-body').val($('#email-body').val()+$(this).val());
}); 
```

这是我的电子邮件正文和模块

```
<button class="module" value="1">Button 1</button>
<button class="module" value="2">Button 2</button>
    <textarea id="email-body" name="email-body"></textarea> 
```

# ruby-on-rails - 保护本地开发 Ruby on Rails

> ID：14462362
> 
> 赞同：0
> 
> 时间：2013-01-22T15:42:27.247
> 
> 标签：ruby-on-rails, ruby, security

有没有人试图在 Ruby on Rails 中限制他们的本地开发服务器？

我正在我的 PC 上开发一个正在开发的项目，并想知道是否有办法限制这一点，以便只有 localhost（我的机器）可以发出请求。

目前，网络上的任何人都可以在我运行开发时导航到我的机器并访问我的应用程序。这是一个非常基本的 RoR 开箱即用安装。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:59:48.363

```
bundle exec rails server -b 127.0.0.1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:01:54.950

从网络的角度来看，最好的方法是保护您的 iptables。

从房子的导轨一侧，您可以使用[基本身份验证](http://railscasts.com/episodes/82-http-basic-authentication)或类似设计的东西。或者使用 带有前置过滤器的[请求对象并将您的机器列入白名单。](http://rails.nuvvo.com/lesson/6377-action-controller-the-request-and-response-objects)

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:03:19.607

```
before_filter :restrict_access
def restrict_access
  return unless config_option(:allowed_IPs)
  if not config_option(:allowed_IPs).include?(request.env['REMOTE_ADDR'])
    render :file => "#{Rails.public_path}/401.html", :status => :unauthorized
    return
  end
end 
```

和

```
(/config/site_config.yml):
development:
production:
  allowed_IPs:
    - IP1
    - IP2
    # etc. 
```

[在这篇文章](http://railsforum.com/viewtopic.php?pid=89791#p89791)的帮助下

# jquery - 使用 jQuery 自行调整导航菜单大小的最简洁方法

> ID：14462366
> 
> 赞同：5
> 
> 时间：2013-01-22T15:42:39.920
> 
> 标签：jquery, html, css

我有这个[菜单](http://jsfiddle.net/dasmikko/jAptc/)，我希望菜单项自动具有相同的大小，具体取决于菜单项的数量和`nav`宽度。

但是我很难以一种尽可能干净的方式完成这项工作。

[菜单（JsFiddle）](http://jsfiddle.net/dasmikko/jAptc/)

这就是我构建菜单的方式

```
<ul>
   <li><a href="#">Item 1</a></li>
   <li><a href="#">Item 2</a>
     <ul>
       <li><a href="#">Item 1</a></li>
     </ul>
   </li>
   <li><a href="#">Item 3</a></li>
   <li><a href="#">Item 4</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:32:38.907

如果 jQuery 是一个选项，您可以使用它：

```
$('nav ul > li').css('width',($('nav').width()/$('nav ul > li').size()) +'px'); 
```

在这里小提琴：http: [//jsfiddle.net/jAptc/6/](http://jsfiddle.net/jAptc/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:58:35.893

从第一个孩子(ul>li:first-child) 中删除填充并添加以下 jQuery 代码。

```
$(document).ready(function(){
    var perc = 100 /$('nav>ul>li').length;
    $('nav>ul>li').css("width",perc+"%");
}); 
```

基本上我正在做 ghego1 的代码中实现的相同逻辑，除了这是在 jQuery 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:35:55.243

可以这样用吗：

### HTML

```
<ul class="nav">
    <li>
        <a href="#">Menu 1</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Menu 2</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Menu 3</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
</ul> 
```

### CSS

```
* {font-family: "Segoe UI", Tahoma;}
ul.nav {border-bottom: 1px solid #999;}
ul.nav li a {display: block; text-decoration: none; color: #333; padding: 5px; border: 1px solid #fff;}
ul.nav > li:hover {border: 1px solid #666; border-bottom: 1px solid #fff;}
ul.nav li a:hover {background: #ccc; border: 1px solid #999;}
ul.nav > li {display: inline-block; position: relative; border: 1px solid #fff;}
ul.nav > li ul {display: none; position: absolute; left: -1px; width: 150px; border: 1px solid #666; border-top-color: #fff; margin-top: 1px;}
ul.nav > li:hover ul {display: block;}
ul.nav > li ul li {display: block;} /* Vertical Menu */
ul.nav > li ul li {display: inline-block;} /* Horizontal Menu */ 
```

### 小提琴： http:
[//jsfiddle.net/vMuxA/](http://jsfiddle.net/vMuxA/)（垂直菜单）
[http://jsfiddle.net/vMuxA/1/](http://jsfiddle.net/vMuxA/1/)（水平菜单）

# sql - 如何添加一个 访问组合框的选项

> ID：14462369
> 
> 赞同：0
> 
> 时间：2013-01-22T15:42:47.220
> 
> 标签：sql, database, vba

好的，所以在花了几个小时之后，并遵循了大量的在线教程，我仍然无法得到这个 ..working ..

基本上，我有 ComboBox 显示一个`<ALL>`选项，但对于报告，它实际上并没有返回任何东西，它只是为了美观而存在。我如何让它返回数据？需要填写 3 个组合框，一个是治疗类型，另一个是治疗日期（两者都将经常使用 (ALL) ）和出生月份，它始终是特定月份。

Treatment Type ComboBox 的查询如下：

```
Select "(All Records)" 
FROM Treatment
UNION Select Treatment.Treatment
From Treatment; 
```

Treatment Date ComboBox 的查询如下：

```
Select 0, "(All Records)"  
FROM Events 
UNION 
Select  Events.DatefieldID, Events.Datefields
From Events; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:07:58.187

`<All>`不是 Sql 理解的特殊值...

如果您正在检查其他查询`where treatmentType = [Value From Combo Box]`...并且组合框中的值是“ `<All>`”..那么没有行将匹配该条件，并且不会返回任何内容。

相反，您需要调整逻辑以`<All>`不同方式处理值...

`where treatmentType = [Value From Combo Box] OR [Value From Combo Box] = "<All>"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T21:04:53.110

作为 Michaels 解决方案的替代方案，您可以使用 SQL 通配符`%`（`*`在 Access 中）来匹配所有记录。组合框的行源查询：

```
Select "*" 
FROM Treatment
UNION Select Treatment.Treatment
From Treatment; 
```

并作为结果查询`Like [Forms]![FormName]![ComboboxName]`中字段的条件。`Treatment`您会注意到空字段仍然不匹配。这可以通过过滤字段`Nz([Treatment],0)`来存档（使 Access 返回匹配的 ，而不是`0`匹配的`*`，而不是匹配的`NULL`）。

这使我的结果查询的 SQL 代码（包括很多关节）更加精简。

# nhibernate - NHibernate - 用于导入大量数据的 ID 生成策略

> ID：14462370
> 
> 赞同：0
> 
> 时间：2013-01-22T15:42:53.007
> 
> 标签：nhibernate, id-generation

我有一个使用序列 ID 生成器的数据库。我需要对大量数据执行一次迁移。我正在使用 NHibernate 来完成这项工作，因为迁移逻辑非常复杂。

另外我不希望这个操作持续很长时间，所以我想使用批处理。

是否有任何 Id 策略可以使用序列作为输入，在不联系数据库的情况下生成所有需要的 id，然后在最后更新序列以使另一个应用程序能够正常使用？

执行迁移时不会运行其他应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:04:35.417

我认为 HiLo 非常适合您的要求。

您可以在此处找到 HiLo 生成器文档：http: [//nhibernate.info/doc/nh/en/index.html](http://nhibernate.info/doc/nh/en/index.html)

# java - 使用 Java ZipOutputStream 和 BufferedOutputStream 的首选方式

> ID：14462371
> 
> 赞同：61
> 
> 时间：2013-01-22T15:43:01.527
> 
> 标签：java, io, outputstream

在 Java 中，我是先实例化[ZipOutputStream 还是](http://docs.oracle.com/javase/8/docs/api/java/util/zip/ZipOutputStream.html)先实例化[BufferedOutputStream](http://docs.oracle.com/javase/8/docs/api/java/io/BufferedOutputStream.html)是否重要？例子：

```
FileOutputStream dest = new FileOutputStream(file);
ZipOutputStream zip = new ZipOutputStream(new BufferedOutputStream(dest));

// use zip output stream to write to 
```

或者：

```
FileOutputStream dest = new FileOutputStream(file);
BufferedOutputStream out = new BufferedOutputStream(new ZipOutputStream(dest));

// use buffered stream to write to 
```

在我的非科学时间里，我似乎无法在这里说出太大的不同。我在 Java API 中看不到任何说明这些方法之一是否必要或首选的内容。有什么建议吗？似乎首先压缩输出然后缓冲它以进行写入会更有效。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-06-19T11:38:05.987

你应该总是用 包裹，`BufferedOutputStream`而`ZipOutputStream`不是反过来。请参阅以下代码：

```
FileOutputStream fos = new FileOutputStream("hello-world.zip");
BufferedOutputStream bos = new BufferedOutputStream(fos);
ZipOutputStream zos = new ZipOutputStream(bos);

try {
    for (int i = 0; i < 10; i++) {
        // not available on BufferedOutputStream
        zos.putNextEntry(new ZipEntry("hello-world." + i + ".txt"));
        zos.write("Hello World!".getBytes());
        // not available on BufferedOutputStream
        zos.closeEntry();
    }
}
finally {
    zos.close();
} 
```

正如评论所说，`putNextEntry()`and`closeEntry()`方法在`BufferedOutputStream`. 不调用这些方法`ZipOutputStream`会引发异常`java.util.zip.ZipException: no current ZIP entry`。

为了完整起见，值得注意的是 finally 子句仅调用`close()`. `ZipOutputStream`这是因为按照惯例，所有内置的 Java 输出流包装器实现都会传播关闭。

### 编辑

我只是反过来测试了它。事实证明，包装 a`ZipOutputStream`然后`BufferedOutputStream`只调用`write()`它（不创建/关闭条目）不会抛出`ZipException`. 相反，生成的 ZIP 文件将损坏，其中没有任何条目。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-22T15:45:04.863

你应该：

```
ZipOutputStream out =  new ZipOutputStream(new BufferedOutputStream(dest)); 
```

因为您想缓冲写入磁盘的内容（因为这在大数据块中比在许多小数据块中更有效）。

* * *

这

```
new BufferedOutputStream(new ZipOutputStream(dest)); 
```

会在 zip 压缩之前缓冲。但这一切都发生在内存中，不需要缓冲，因为很多小内存访问的速度与一些大内存访问的速度差不多。在内存中，所需的时间通常与读/写的字节数成正比。

如评论中所述：

`ZipOutputStream`不属于其中的方法`BufferedOutputStream`也将不可用。例如`putNextEntry`和`closeEntry`。

# javascript - 将 eval 和 span id 从 gridview 传递到 javascript 函数

> ID：14462376
> 
> 赞同：0
> 
> 时间：2013-01-22T15:43:09.663
> 
> 标签：javascript, asp.net, html

我正在尝试将值和跨度 ID 传递给 JavaScript 函数。我认为我的值设置正确，但我在通过跨度时遇到问题。这是一个嵌套的网格视图，所以我看不到控件，需要将其发送给函数。

# 在网格视图中

```
 <input type="button" onclick='<%# Eval("FormulaTiming", "countdown({0}); Eval("TimeMinutes.ClientID")%>' value="Start" id="Start" />
 <input type="button" value="Stop" id="Stop" />
 <input type="text" value='<%#Eval("FormulaTiming")%>' id="TimeMinutes" />
 <span id="CountDown"></span> 
```

# JavaScript 函数

```
var interval;

  function countdown(minutes, spanid) {
      interval = setInterval(function () {
          var lbl = document.getElementById(element);
          if (seconds == 0) {
              if (minutes == 0) {
                  el.innerHTML = "countdown's over!";
                  clearInterval(interval);
                  return;
              } else {
                  minutes--;
                  seconds = 60;
              }
          }
          if (minutes > 0) {
              var minute_text = minutes + (minutes > 1 ? ' minutes' : ' minute');
          } else {
              var minute_text = '';
          }
          var second_text = seconds > 1 ? 'seconds' : 'second';
          el.innerHTML = minute_text + ' ' + seconds + ' ' + second_text + ' remaining';
          seconds--;
      }, 1000);
  } 
```

我仍在试图弄清楚如何更改脚本，但首先我需要通过 eval 和 span。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:08:32.880

以下asp.net代码

```
<input type="button" onclick='<%# Eval("FormulaTiming", "countdown({0}, \"Start\"); %>' value="Start" id="Start" /> 
```

应产生以下 HTML

```
<input type="button" onclick='countdown(20, "Start");' value="Start" id="Start" /> 
```

# actionscript-3 - 缓动模糊滤镜

> ID：14462379
> 
> 赞同：1
> 
> 时间：2013-01-22T15:43:31.350
> 
> 标签：actionscript-3

只是想知道是否有人可以帮助向我展示如何缓解特定电影剪辑的模糊过滤器？

```
treetrigger.addEventListener(MouseEvent.ROLL_OVER, rollovert);
    function rollovert (event:MouseEvent):void {
        myBlur.blurX = 0;
        myBlur.blurY = 0;
        tree.filters = [myBlur];

        myBlur.blurX = 7;
        myBlur.blurY = 7;
        man.filters = [myBlur];

        myBlur.blurX = 20;
        myBlur.blurY = 20;
        crowd.filters = [myBlur];
    } 
```

当我点击“treetrigger”时，我想将所有 3 个电影剪辑都放慢 1 秒，但我不知道如何以及在哪里放入动作脚本。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:53:17.963

您可以使用补间库轻松完成此操作。例如，使用[Actuate](http://code.google.com/p/actuate/)代码将是：

```
Actuate.effects (tree, 1).filter (BlurFilter, { blurX: 0, blurY: 0 } );
Actuate.effects (man, 1).filter (BlurFilter, { blurX: 7, blurY: 7 } );
Actuate.effects (crowd, 1).filter (BlurFilter, { blurX: 20, blurY: 20 } ); 
```

另一个流行的补间库是 GreenSock 的[TweenLite](http://www.greensock.com/tweenlite/)，但任何体面的补间库都应该能够做同样的事情。

# php - 如何查看用户在测验中的选择是否正确？

> ID：14462380
> 
> 赞同：0
> 
> 时间：2013-01-22T15:43:39.183
> 
> 标签：php, mysql, post, phpmyadmin, mysql-num-rows

我正在尝试检查用户选择的答案是否正确，但它不能正常工作：

```
 <form method="post">
                        <?php
                            $question = mysql_query("SELECT * FROM `questions`");
                            $stat = mysql_fetch_assoc($question);
                            $num = mysql_num_rows($question);
                            $questionid = 0;
                            for($i=0;$i<=$num;$i++)
                            {
                                $question = mysql_query("SELECT * FROM `questions` WHERE `id`='$i'");
                                $stat = mysql_fetch_assoc($question);
                                //if($stat['answer'] == null
                                echo $stat['question'] . '<br />';
                                echo '<input type="radio" name="a'.$x.'" value="'.$x.'" />' .$stat['answer1']."<br />";
                                echo '<input type="radio" name="a'.$x.'" value="'.$x.'" />' .$stat['answer2'] . '<br />';
                                echo '<input type="radio" name="a'.$x.'" value="'.$x.'" />' .$stat['answer3'] . '<br />';
                                echo '<input type="radio" name="a'.$x.'" value="'.$x.'" />' .$stat['answer4'] . '<br />';
                                $questionid++;
                                $x = $x+1;
                            }
                            echo $result;
                        ?>
                        <input type="submit" name="go" value="Go" />
                    </form> 
```

那部分基本上是：

```
$x = 1;
$question = mysql_query("SELECT * FROM `questions`");
$stat = mysql_fetch_assoc($question);
$num = mysql_num_rows($question);
if(isset($_POST['go']))
{
    for($i=0;$i<$num;$i++)
    {
        if ($_POST['ans'.$x] == $row['correct']) 
        { 
            $result = $result + 1; 
        }
        $x = $x + 1;
    }
} 
```

出于某种原因，它没有正确发布结果，我认为代码有问题，希望得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:44:00.037

这是帮助您的另一种尝试。

我实际上写了一个“完整的解决方案”，在这个过程中发现了你的代码中的一些小错误——加上一些我无法理解的东西。

主要错误：您所有的单选按钮都具有相同的值 ($x)，因此无论您为问题 1 按什么按钮，答案都是“1”，等等。您还做了其他一些我无法弄清楚的事情 -所以我所做的是创建一个简单的流程——一个页面提出问题，另一个页面评估结果。

问题页面（我混淆了我的数据库的访问参数 - 不，我不使用“密码”作为我的密码！）：

```
<html>
<body>
<form action="./evaluate.php" method="post">
<?php
$server = mysql_connect ('localhost', 'username, 'password');
mysql_select_db("questionnaire", $server);

$question = mysql_query("SELECT * FROM `Questions`;");
$x = 0;
while ($row = mysql_fetch_assoc($question))
{
   echo $row['question'] . '<br />';
   echo '<input type="radio" name="a'.$x.'" value=1 />' .$row['answer1'] . '<br />';
   echo '<input type="radio" name="a'.$x.'" value=2 />' .$row['answer2'] . '<br />';
   echo '<input type="radio" name="a'.$x.'" value=3 />' .$row['answer3'] . '<br />';
   echo '<input type="radio" name="a'.$x.'" value=4 />' .$row['answer4'] . '<br />';
   $x = $x + 1;

}
mysql_close($server);
?>

<input type="submit" name="Submit" value="Submit" />
<br>
</form>
</body>
</html> 
```

和评估.php： 编辑：我稍微更改了代码以使输出“更干净”，并添加红色/绿色触摸以显示已正确和不正确回答的问题。显然，如果您愿意，您可以将这些事情做得更进一步...

```
<html>
<body>

<?php
$server = mysql_connect ('localhost', 'username', 'password');
mysql_select_db("questionnaire", $server);

$question = mysql_query("SELECT * FROM `Questions`;");
$x = 0;
$score = 0;
while ($row = mysql_fetch_assoc($question))
{
    echo $row['question'] . '?<br />';

    $answered = $row['answer'.$_POST['a'.$x]] ;
    $correct = $row['correct'] ;

    if ($answered == $correct ) {
        $score++;
        $acolor = 'green' ;
    }
    else {
        $acolor = 'red' ;
    }

    echo 'you answered <font color=' . $acolor . '>' . $answered . '<font color=black> <br />';

    echo 'the correct answer was ' . $correct . '<br />' ;
    echo '-------------------------------------- <br />' ;

    $x = $x + 1;
}
echo 'You had a total of ' . $score . ' out of ' . $x . ' questions right!';
mysql_close($server);
?>

</body>
</html> 
```

这产生了（对于我所做的简单的三个问题多项选择）预期的结果。请让我知道这对你有没有用！

# bigcommerce - BigCommerce 结帐时的额外固定费用——API 是否支持实现这一点

> ID：14462382
> 
> 赞同：2
> 
> 时间：2013-01-22T15:43:41.297
> 
> 标签：bigcommerce

我们目前正在评估几个电子商务平台，BigCommerce 就是其中之一。

我们正在考虑销售的产品需要为某些 SKU 添加所需的额外“设置费”（例如，额外 20.00 美元的艺术品准备费，与产品或所选选项的单位成本无关）。

我最初关于如何实现这一点的方法是通过添加第二个 SKU，当将 SKU 添加到具有特定属性的购物车时会自动添加该 SKU（例如，属性类型：设置费；属性值：20.00 美元）。此属性将告诉自定义代码创建设置费 SKU 并将其添加到购物车中。

当然，还需要开发代码来维护购物车的完整性和设置费用。如果原产品被删除，安装费应该被删除。如果将其放入购物车的产品仍在购物车中，则也不应允许删除或更改设置费。

我的问题是——BigCommerce API 是否足够丰富（方法、事件等）来处理这种自定义编码场景？

我与 BigCommerce 支持进行了简短的交谈，他们表示它可能可以使用 JavaScript 完成，但这是我们采取的最远距离，因为技术听起来不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:55:34.643

您可以通过设置产品规则来做到这一点。API 让您可以做到这一点。 [https://devdocs.bigcommerce.com/](https://devdocs.bigcommerce.com/)

您可以设置产品规则，以便为特定产品增加额外的 20 美元。 [https://devdocs.bigcommerce.com/display/API/Rules](https://devdocs.bigcommerce.com/display/API/Rules)

BC 还不支持 webhook。但它正在酝酿之中。为此，我假设如果您使用规则，则不需要 webhook。无需自动在购物车中添加具有不同 SKU 的其他产品，您只需应用规则以便自动添加设置。

说得通？

# php - 防火墙外的 PHP/IIS6 连接到防火墙内的 SQL Server

> ID：14462383
> 
> 赞同：0
> 
> 时间：2013-01-22T15:43:44.557
> 
> 标签：php, sql-server-2005, iis-6, firewall

我有一个用 PHP 编写的简单订单表（在全世界可见的服务器 A 上运行），我们的客户可以访问它，一旦他们提交处理，我希望将数据转储到防火墙内的 SQL Server 2005（服务器 B）中.

我不确定从防火墙外部建立与我们的 SQL 服务器的连接以及如何设置它的最佳安全方式是什么：Trusted Connections、Kerberos：还有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:50:02.937

You'll need to open a port in your firewall to allow connections from the webserver (server A) to your database server (server B). If server A is the only the machine that you ever want talking to server B from outside of the firewall, you should be able to configure a rule in your firewall that allows incoming traffic to the database server ONLY from server A (identified by IP address, for example).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:52:48.523

打开防火墙并允许 PHP 直接连接到您的内部 sql 服务器是一种保护方法，方法是只允许通过 sql server 用户名和防火墙进行 ip 锁定/mac 锁定连接。

另一种方法是使用身份验证的内部 Web 服务，让您的外部 php 发布到 Web 服务，并打开一个端口并将其重定向以进行流量（例如，使用非标准端口外部 88888 内部 80）并耦合它使用 ip/mac 锁定连接在其他所有内容之上增加了额外的安全级别也意味着您不会仅在 IIS 外部公开您的 sql 服务器（尽管它有争议的是无论如何更安全:)）

# c# - 在自定义类/方法上模仿“Invoke”/“BeginInvoke”风格的方法调用

> ID：14462385
> 
> 赞同：0
> 
> 时间：2013-01-22T15:43:50.797
> 
> 标签：c#, multithreading, synchronization

我想创建一个线程安全的方法，我可以从多个工作人员调用而不会阻塞工作线程。我还希望代码简洁得像 InvokeRequired->BeginInvoke 类型代码用于 UI 控件...当然，`Control`在这种情况下我没有使用 a，该方法位于自定义类上。我也不一定要对每种方法都这样做。那么这是可以在自定义类/方法上轻松实现的东西吗？

须藤代码：

```
class foo
{
    //Fields
    Context MyContext;
    List<T> UnsafeList = new List<T>();

    //Method
    public void MyMethod(int someArg, Item someOtherArg)
    {
        if (!MyContext)
        {
            MyContext.BeginInvoke(...);
            return; //Calling thread returns
        }
        else
        {
            UnsafeList.Add(someOtherArg);
            return; //MyContext Thread returns
        }
    }

    //Constructor
    public foo()
    {
        MyContext = new GetSomeThreadHandle();
    }
} 
```

我想我知道如何使用自定义 EventArgs 做到这一点，但它涉及几乎重复的代码，我正在寻找更通用/更清洁的解决方案。

### 编辑

这是使用 C# .Net 4.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:54:28.630

鉴于：

*   您正在使用 .NET 4
*   您提到对请求进行*排队*和*序列化...*

...听起来你想要一个生产者/消费者队列，通过[`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx). 启动一个将从队列中拉出的线程（消费者），然后从您的工作线程中添加到队列中。

如果队列累积到意外/不希望的水平，您需要考虑想要发生的情况。（你可以阻止，你可以抛出一个异常，你可以放弃请求。）

编辑：有关详细信息，请参阅[此 MSDN 博客文章`BlockingCollection<T>`](http://blogs.msdn.com/b/csharpfaq/archive/2010/08/12/blocking-collection-and-the-producer-consumer-problem.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:27:48.407

演示应用于您的任务的生产者/消费者方式的小例子

```
public void produceConsume()
{
    var results = new BlockingCollection<double[]>();

    var producer = Task.Factory.StartNew(() =>
    {
        for (int i = 0; i < 100; i++)
        {
            var data = new double[1024];
            results.Add(data);                    
        }

        results.CompleteAdding();
    });

    var consumer = Task.Factory.StartNew(() =>
    {
        foreach (var item in results.GetConsumingEnumerable())
        {
           // put in chart
        }
    });

    producer.Wait();
} 
```

如果您需要更多的消费者消耗所有数据，您也可以使用 ConcurrentQueue

# ruby-on-rails - 使用 RoR，在哪里定义要在路由定义中使用的自定义方法

> ID：14462387
> 
> 赞同：1
> 
> 时间：2013-01-22T15:43:53.403
> 
> 标签：ruby-on-rails, routing

我想使用自定义方法来构建我的路线。

目前，我的`routes.rb`文件中有这样的内容：

```
Foobar::Application.routes.draw do
  def my_custom_method
    # lot
    # of
    # code
  end

  pages = my_custom_method

  pages.each do |key, slug|
    get slug => 'pages#view', as: key, defaults: { slug: slug }
  end
end 
```

但我确定这不是它的位置。

那么我应该在哪里存储这个自定义方法？

哪个是“好方法”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:55:48.390

Lib是个好地方。它甚至是[Devise 维护者](https://github.com/plataformatec/devise/blob/master/lib/devise/rails/routes.rb)的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:56:46.147

我会说*ruby*​​ 方法是使用附加功能扩展[ActionDispatch::Routing](https://github.com/rails/rails/blob/6767946374353f90ce05e68d38bcb93dcb8bae56/actionpack/lib/action_dispatch/routing.rb)模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:24:49.737

一个可行的解决方案是创建包含以下内容的文件`config/initializers/routes.rb`：

```
module ActionDispatch::Routing
  class Mapper
    def my_custom_method
      # lot of code
    end
  end
end 
```

# c++ - MFC 属性网格格式化浮点数

> ID：14462388
> 
> 赞同：1
> 
> 时间：2013-01-22T15:44:02.030
> 
> 标签：c++, mfc

所以我正在使用 Visual Studio 2008 中的 C++/MFC 开发一个编辑器风格的应用程序。

Visual Studio 风格应用程序的默认向导项目充满了有用的优点，但并没有解决所有问题，甚至我发现的一些 MFC 书籍也没有提到这个特定的问题。

您如何使用`CMFCPropertyGridProperty`显示浮点值来限制其显示的小数位数的属性查看器？现在，您似乎在浮点值上获得了 6 位小数（使用浮点构造`_variant_t`）。有什么办法可以改变这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:12:36.037

该类`CMFCPropertyGridProperty`有一个名为 的虚函数`FormatProperty()`。此函数返回一个`CString`对象，该对象包含属性值的字符串表示形式。当需要显示属性值时，由框架调用。

由于该函数是虚函数，因此您可以从该函数派生`CMFCPropertyGridProperty`并覆盖您自己的属性类，以便在一般情况下调用基类的实现，而当相应的变体具有类型`VT_R4`( `float`) 或`VT_R8`( `double`）。

像这样的东西：

```
class CMyProperty : CMFCPropertyGridProperty
{
    ...
    virtual CString FormatProperty()
    {
        CString str;
        if (GetValue().vt == VT_R8)
        {
            str.Format(...); // Or whatever you want
        }
        else
        {
            str = CMFCPropertyGridProperty::FormatProperty();
        }

        return str;
    }
}; 
```

然后，您可以将自己的属性类的实例传递`CMyProperty`给`CMFCPropertyGrid`'s function `AddProperty()`。

# php - 如何使用 PHPDoc 表示法声明局部变量的类型？

> ID：14462390
> 
> 赞同：33
> 
> 时间：2013-01-22T15:44:02.663
> 
> 标签：php, cakephp, zend-studio, eclipse-pdt, cakephp-2.2

我使用 Zend Studio 用 CakePHP 在 PHP 中进行开发，而 CakePHP 的问题之一是视图都引用了未声明的局部变量。

因此，例如，在控制器中，您将

`$this->set('job',new MyJobObject());`

然后在视图中你可以

`echo $job->getName();`

我的问题是 Zend Studio 无法在 上执行自动完成`$job`，因为它的类型未知。现在有 PHPDoc 标记允许您声明类型，以便 IDE 可以执行自动完成。例如，`@var`标签可以在类中用于定义属性的类型。

```
class MyJobObject
{
    /**
     * @var MyStatusObject
     */
    public $status;
} 
```

**有没有办法为局部变量做这样的事情？**

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-22T15:49:55.063

您必须使用单行表格：`/** @var $job MyJobObject */`

请注意，一些编辑器更喜欢相反的语法：`/** @var MyJobObject $job */`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2020-01-22T16:31:51.773

两个答案都是错误的^*，严格来说：

```
/** @var MyJobObject $job */ 
```

是正确的 - 类型始终是第一个参数，然后您输入描述或指定变量本身。

资源：

[https://scrutinizer-ci.com/docs/tools/php/php-analyzer/guides/annotating_code](https://scrutinizer-ci.com/docs/tools/php/php-analyzer/guides/annotating_code) [https://docs.phpdoc.org/latest/references/phpdoc/types.html](https://docs.phpdoc.org/latest/references/phpdoc/types.html)

否则，每个现代 PHP IDE 都能够识别几乎任何类型的注释语法：

```
// @var
/* @var */
/** @var */
/* @var
*/
# @var 
```

最常见、最易读和最广泛接受的形式是

```
/** @var <type> [variable [comment]] */

/** 
 * @var <type> [variable [comment]] 
 */ 
```

PSR-5（建议）[https://github.com/php-fig/fig-standards/blob/master/proposed/phpdoc.md](https://github.com/php-fig/fig-standards/blob/master/proposed/phpdoc.md)

PSR-19（草案）[https://github.com/php-fig/fig-standards/blob/master/proposed/phpdoc-tags.md](https://github.com/php-fig/fig-standards/blob/master/proposed/phpdoc-tags.md)

[*) 在 2013 年，语法可能有所不同。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T15:50:16.090

你应该在你的视图/模板文件之上做。

```
<?PHP
/* @var $job MyJobObject */
?> 
```

# windows-8 - VirtualBox 严重错误 - Windows 8

> ID：14462391
> 
> 赞同：5
> 
> 时间：2013-01-22T15:44:05.267
> 
> 标签：windows-8, virtualbox

我已经在 Windows 8 下安装了 VirtualBox，这样我就可以在虚拟机中使用 Windows XP。

我已经成功安装了VirtualBox，并且在初始安装后我完美地使用了Windows XP 映像，但是现在当我尝试启动VirtualBox 时，它显示了这个错误：

```
Failed to create the VirtualBox COM object.
The application will now terminate.
Callee RC: CO_E_SERVER_EXEC_FAILURE (0x80080005) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-12T09:43:30.777

我猜你可能已经解决了这个问题，或者现在放弃了；）但以防万一：

对我来说，在 Windows 7 中，解决方法是右键单击 Virtualbox 的快捷方式图标，然后单击**Run as administrator**。我想 Windows 8 解决方案也类似/可能与权限相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T03:47:17.877

在我的 Windows 8.1 中，我运行了 Hyper V 的虚拟机服务。我从任务管理器中停止了它，VirtualBox 启动正常。仅供参考：我试图使用

```
vboxmanage setextradata "MAC OS X" "CustomVideoMode1" "1360x768x32" 
```

当我在管理员模式下运行 VirtualBox 时出现上述错误时更改我的虚拟化 mac 分辨率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T11:39:11.973

如果仍然没有工作在 Windows 7 上试试这个：

1.  右键单击虚拟框图标 --> TroubleShoot Compatibility
2.  检查清单上的第一个选项，该选项说适用于早期版本
3.  将其设置为 Windows XP Service Pack 2。
4.  和开始。

它会工作:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-15T17:57:34.823

请按照以下步骤操作：

```
Navigate to your profile and look for the .VirtualBox folder. For example, C:\Users\your.name\.VirtualBox

Copy the VirtualBox.xml to somewhere safe, like your desktop

Uninstall VirtualBox

Delete the .VirtualBox folder

Re-install VirtualBox and the option package.

Start VirtualBox

Close VirtualBox

Navigate to your profile and look for the .VirtualBox folder. For example, C:\Users\your.name\.VirtualBox

Rename the VirtualBox.xml to VirtualBox.xml.old

Copy your original VirtualBox.xml to the .VirtualBox folder

Start VirtualBox 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-08T13:57:57.043

对我来说，它是使用 Windows 8 dexpot 和分配在启动时移动到辅助桌面的虚拟盒的组合，并且当第二个 dexpot 桌面隐藏了任务栏（或者可能只是系统托盘）时。

# ruby - BBCode Treetop 解析器和智能标签关闭？

> ID：14462394
> 
> 赞同：1
> 
> 时间：2013-01-22T15:44:07.860
> 
> 标签：ruby, parsing, bbcode, treetop, peg

我写了一个最有效的树顶语法文件。对于像我这样的标签，`[b]`我想将它们传递到一个函数中，该函数具有为该论坛配置的 BBCodes 的哈希值。如果允许粗体，它将返回 HTML，否则它将忽略 BB 代码。

```
rule tag
  tag:('[' [a-zA-Z]+ ']')
  inner_tag:(
    !('[/' [a-zA-Z]+ ']')
    (tag <ForumBB::TagNode> / .)
  )+
  '[/' [a-zA-Z]+ ']'
end 
```

这不适用于嵌套标签。例如，`[b][i]Bold and italics[/i][/b]`将无法正确处理，因为它们与 . 的第一个结束标记匹配`[/i]`。

我怎样才能做到这一点，当它找到一个标签时，它会在负头中寻找结束标签？

我宁愿不必为每种 BBCode 写出所有规则，因为这是一个动态系统，论坛管理员可以在其中打开/关闭某些标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:53:33.797

我会说你的解析器不应该与你的业务逻辑有任何关系。如果论坛管理员可以打开或关闭应该在您遍历 AST 时而不是在解析器中处理的标签。

您的解析器应该只负责构建最好的语法树，并充分了解它给出的语法。考虑到这一点，我建议为每个有效的 BBCode 标签创建一个规则，并在解析阶段之后处理排除的标签。

我也想知道当你的解析器识别出无效的 BBCode 时你会怎么做`[z]invalid[/z]`？

# algorithm - UVA - 1394：有一种算法

> ID：14462401
> 
> 赞同：1
> 
> 时间：2013-01-22T15:44:21.670
> 
> 标签：algorithm, data-structures, segment-tree, josephus

该问题的链接是[UVA-1394: And There Was One](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=4140)。
朴素的算法是扫描整个数组并在每次迭代中标记第 k 个元素，并在最后一次停止：这需要 O(n^2) 时间。
我已经搜索了一种替代算法，并遇到了一个[中文博客](http://mypaper.pchome.com.tw/zerojudge/post/1323664942)，该博客指出我使用惰性传播作为 O(N lgN) 时间的解决方案来**分割树。**
研究了段树后，我尝试为 O(N lgN) 时间形成算法，但无济于事。

* * *

我的问题是：
1\. 可以使用分段树来获得所需的运行时间吗？
2\. 如果是，请告诉我如何使用它们。
3\. 段树和“zkw”段树是一回事吗？- 他在博客中提到了 zkw 段树。
**更新：**上述问题是约瑟夫斯问题的一个例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T17:42:04.047

1.  是的，它可以。

2.  您可以在下面看到数据结构的描述，这里我将提示如何在给定的问题中使用它。我们所代表的人口显然是石头圈。我们从所有**N**块石头都*活着*开始，然后在每一步都*杀死*我们树上的相应石头。只需要知道我们当前处于哪个元素（我认为将其称为**m**是合适的）。高级算法（我把细节留给你）如下（**P**是我们的数据结构）：

    ```
    While P.size > 1:
      P.toggle(m) // remove the m-th stone
      m = P.kth(next stone to be killed) 
    ```

    上面代码中的 P.size 就是所有剩余石头的数量。在下面的描述中，它对应于树[1]。

    **注意：**数据结构中使用的符号**k**与问题输入中表示*跳跃距离*的符号不同。

3.  差不多。我以前没见过这个名字，但代码看起来和我见过的人们所说的一样**人口树**。

    人口树是使用线段树的一种简单方法。您有**N**个元素，每个元素都有两种可能的状态：1 表示活着，0 表示死亡。树支持两种操作：

    *   **切换编号为i**的元素的状态。
    *   返回第**k 个**（按其索引大小）活动元素的索引。

    为了阐明第二个操作，假设生活元素的集合是 {1, 2, 4, 7}。如果**N** = 8，则对应于状态数组 01101001（元素 0 已死亡，元素 1 处于活动状态，元素 3 处于活动状态，依此类推）。

    那么，如何实现呢？像往常一样，树的叶子对应于*数组*。也就是说，如果第 i 个元素是活动的，则第 i 个叶子的值为 1，否则为 0。每个内部节点都会记住其子节点的值的总和。

    为了切换元素的状态，我们切换相应叶子的值，然后固定从该叶子到根的路径：

    ```
    const int size = 1 << 18; // 2^17 elements, the rest are internal nodes
    int tree[size]; // number of living elements in the subtree of a node

    void toggle(int i) {
      tree[i + size / 2] ^= 1; // toggle the leaf
      for (i /= 2; i > 0; i /= 2)
        tree[i] = tree[2 * i] + tree[2 * i + 1];
    } 
    ```

    **注意：**标记节点的常用方法是使*根*等于 1，递归地，节点**n**的子节点是**2n**和**2n+1**。

    要找到第**k 个**活元素，我们可以递归思考：我们当前在节点**n**处，并且正在寻找第**k 个**活元素它的子树（节点的子树是根在该节点的树）。如果**n**的左孩子**2n**有**k**或更多的生活元素，设置**n** = **2n**。否则，我们显然会找到正确的孩子，即设置**n** = **2n+1**。在这种情况下，我们不再寻找子树**的第 k 个**活元素。因为我们跳过了左孩子的所有生活元素，所以我们从**k中减去该计数**. 在这里，为了简单起见，我们正在查看基于 1 的生活元素。

    这里的基本思想可能是递归的，但描述暗示迭代地做它也应该很简单：

    ```
    int kth(int k) {
      ++k; // because this method looks at elements 1-based
      int current_node = 1; // start at the root
      while (current_node < size / 2) {
        if (tree[2 * current_node] >= k) 
          current_node = 2 * current_node; // descend into the left child
        else {
          k -= tree[2 * current_node]; // fix k
          current_node = 2 * current_node + 1; // descend into the right child
        }
      }
    } 
    ```

    这两个功能使该**分段树**成为**人口树**。

这是一个数据结构问题，因此所描述的想法使用了数据结构。但是，我想提一下这个问题被称为*Josephus 问题*，并且有替代解决方案，因此您可能有兴趣查找它。

# javascript - 删除最后一个反斜杠后的所有内容

> ID：14462407
> 
> 赞同：64
> 
> 时间：2013-01-22T15:44:35.823
> 
> 标签：javascript, node.js, regex, typescript, node-modules

`var t = "\some\route\here"`

我需要它的“\ some \ route”。

谢谢你。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-01-22T15:46:54.117

你需要`lastIndexOf`并且`substr`...

```
var t = "\\some\\route\\here";
t = t.substr(0, t.lastIndexOf("\\"));
alert(t); 
```

此外，您需要将字符串中的字符加倍，`\`因为它们用于转义特殊字符。

**更新** 因为这经常被证明对其他人有用，所以这里有一个片段示例......

```
// the original string
var t = "\\some\\route\\here";

// remove everything after the last backslash
var afterWith = t.substr(0, t.lastIndexOf("\\") + 1);

// remove everything after & including the last backslash
var afterWithout = t.substr(0, t.lastIndexOf("\\"));

// show the results
console.log("before            : " + t);
console.log("after (with \\)    : " + afterWith);
console.log("after (without \\) : " + afterWithout);
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-22T15:57:33.007

正如@Archer 的回答中所述，您需要在反斜杠上加倍。我建议使用正则表达式替换来获取您想要的字符串：

```
var t = "\\some\\route\\here";
t = t.replace(/\\[^\\]+$/,"");
alert(t); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-01-06T07:47:45.060

使用 JavaScript，您可以简单地实现这一点。在最后一次“_”出现后删除所有内容。

```
var newResult = t.substring(0, t.lastIndexOf("_") ); 
```

# java - Java 7 和 -XX:TraceDeoptimization

> ID：14462408
> 
> 赞同：0
> 
> 时间：2013-01-22T15:44:37.343
> 
> 标签：java, optimization, java-7, jvm-hotspot

我正在尝试调试 Java 去优化，但我无法开始`-XX:+TraceDeoptimization`工作。你知道它是否在 OpenJDK 7 中被禁用，或者在我的版本（7u9-2.3.4-0ubuntu1.12.04.1）中没有启用，或者`-XX:+unlockSomething`我需要调用一些魔法吗？

无论我尝试什么，我总是收到错误消息

```
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit. 
```

添加此参数时没有任何进一步的细节。即使是普通的`java -XX:+TraceDeoptimization`打印此消息。它也没有说它不识别该选项。但是，正如所`PrintCompilation`揭示的那样，我看到了一条“未进入”的消息，这显然表明了去优化，我想调试为什么会发生这种情况，因为我看到了一个奇怪的性能下降，据说是改进的代码。

# 解决方案：

默认构建确实*不包含*此功能。您需要一个**调试版本**。您可以[在 jdk7.java.net 上通过 Google 找到一些](http://www.google.com/search?q=site%3ajdk7.java.net%20%22debug%20builds%22)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:17:25.573

所有标志选项都需要一个`+`或`-`来启用或禁用它们。在您的情况下，选项将是`-XX:+TraceDeoptimization`关闭它（这是默认设置），您可以编写`-XX:-TraceDeoptimization`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-18T13:31:22.063

**默认构建**确实**不包含此**功能。

您需要一个**调试版本**。您可以[在 jdk7.java.net 上通过 Google 找到一些](http://www.google.com/search?q=site:jdk7.java.net%20%22debug%20builds%22)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-18T12:37:23.783

此选项仅在 VM 的调试版本中可用。（至少这是我的 idk 1.8u92 告诉我的。

# php - 尝试插入时 SQL 语法错误

> ID：14462415
> 
> 赞同：1
> 
> 时间：2013-01-22T15:44:50.120
> 
> 标签：php, mysql, sql

我正在编写一段代码，允许用户相互发送消息。每当我尝试将消息插入数据库时​​，都会出现语法错误，但我终其一生都无法弄清楚我的错误是什么。我知道问题不在`connect.php`. 另外，我得到了 , 和的适当值，`$from`所以这不是问题。这是我的代码：`$to``$message`

```
session_start();

require_once('../setup/connect.php');

$from = $_SESSION['id'];
$to = $_REQUEST['id'];

$message = trim($_POST['msg_body']);    
$insert = "INSERT INTO messages(to, from, msg) VALUES('$to', '$from', '$message')";

mysql_query($insert) or die(mysql_error());

header("Location: view_profile.php?id=$to"); 
```

这是`mysql_error()`生成的报告：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'to, from, msg) VALUES('7', '6', 'Hey how are you?')' 附近使用正确的语法

这是我的数据库结构的图像：![在此处输入图像描述](../Images/0aa319d5987444c5bcd618e11a781e46.png)

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:45:30.740

`TO`和`FROM`是保留关键字，必须用反引号转义

```
INSERT INTO messages(`to`, `from`, msg) 
VALUES('$to', '$from', '$message') 
```

*   [MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

如果您有时间或特权进行更改，请不要使用保留关键字列表中存在的此类名称。它会给你未来的头痛。

作为旁注，`SQL Injection`如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用 PreparedStatements，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:47:20.027

`FROM` is a reserved word. You shouldn't use it as a column name. If you insist on using it you have to quote it:

```
INSERT INTO messages("to", "from", msg) 
VALUES('$to', '$from', '$message') 
```

or if you are not running your MySQL installation in ANSI mode you will have to use the dreaded non-standard backticks:

```
INSERT INTO messages(`to`, `from`, msg) 
VALUES('$to', '$from', '$message') 
```

# c++ - Alsa Xrun 错误和 .asoundrc

> ID：14462416
> 
> 赞同：1
> 
> 时间：2013-01-22T15:44:50.113
> 
> 标签：c++, alsa

我有三个USB声卡。我的工作是开发一个声音处理程序。我的程序中的每件事都可以，但是我遇到了 Xrun 错误（溢出错误）的一些问题。真的我必须不使用杰克。所以，我想知道我是否在.asoundrc 中为每个声卡定义了周期大小和缓冲区大小。它可以克服这个问题吗？如果您认为它可以帮助我，请让我知道如何在 .asoundrc 中完成此操作。

如果您对在 ALSA 中处理 Xrun 错误有任何建议，欢迎您提出感谢

# powershell - PsExec v1.98 在 Team City 7.1 中不显示任何构建输出

> ID：14462421
> 
> 赞同：3
> 
> 时间：2013-01-22T15:45:06.527
> 
> 标签：powershell, teamcity, puppet, psexec

我正在尝试使用 Team City 来使用 puppet for windows 来配置 Windows 2008 R2 机器。有一个 TC 代理应该远程连接并在我们的目标服务器中调用 puppet 客户端。我们尝试使用 Powershell，但在尝试以管理员身份执行 puppet 时遇到问题，因此我们创建了一个 C# 代码实用程序来重定向输出，但它似乎无法在 TC 上运行，但它可以在本地运行。

```
namespace RunAsAdmin
{
    class Program
    {
        static void Main(string[] args)
        {
            Process proc = new Process();

            Process p = new Process();
            p.StartInfo.FileName = @"psexec.exe";
            p.StartInfo.Arguments = "/accepteula \\\\" + args[0] + " -s \"C:\\Program Files (x86)\\Puppet Labs\\Puppet\\bin\\puppet.bat\" agent --test --no-daemonize --verbose --logdest console ";
            p.StartInfo.Verb = "runas";
            p.StartInfo.UseShellExecute = false;
            p.StartInfo.RedirectStandardOutput = true;
            p.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;

            p.Start();

            while (p.HasExited == false) {
               Console.WriteLine(p.StandardOutput.ReadLine());
            }
            Console.ReadLine();
            p.WaitForExit();
            p.Close();

        }
    }
} 
```

该代码在本地和 TC 中完美运行，以管理员身份执行没有问题，但我们在 TC 中看不到构建输出。

# javascript - 跨域 POST 请求未发送 cookie Ajax Jquery

> ID：14462423
> 
> 赞同：69
> 
> 时间：2013-01-22T15:45:18.940
> 
> 标签：javascript, jquery, ajax, cookies, cross-domain

似乎在stackoverflow上已经讨论过类似的东西，但我找不到完全相同的东西。

我正在尝试使用 CORS（跨域资源共享）发送 Cookie，但它不起作用。

这是我的代码。

```
$.ajax(
    { 
      type: "POST",
      url: "http://example.com/api/getlist.json",
      dataType: 'json',
      xhrFields: {
           withCredentials: true
      },
      crossDomain: true,
      beforeSend: function(xhr) {
            xhr.setRequestHeader("Cookie", "session=xxxyyyzzz");
      },
      success: function(){
           alert('success');
      },
      error: function (xhr) {
             alert(xhr.responseText);
      }
    }
); 
```

我在请求 HEADER 中没有看到这个 cookie。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-01-23T04:31:25.347

您不能通过 JavaScript 设置或读取 CORS 请求的 cookie。虽然 CORS 允许跨域请求，但 cookie 仍然受制于浏览器的同源策略，这意味着只有来自同源的页面才能读取/写入 cookie。`withCredentials`仅表示将远程主机设置的任何 cookie 发送到该远程主机。您必须使用`Set-Cookie`标头从远程服务器设置 cookie。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-22T15:54:52.780

请注意，这并不能解决 cookie 共享过程，因为通常这是不好的做法。

您需要使用 JSONP 作为您的类型：

来自 $.ajax 文档：跨域请求和 dataType: "jsonp" 请求不支持同步操作。

```
$.ajax(
    { 
      type: "POST",
      url: "http://example.com/api/getlist.json",
      dataType: 'jsonp',
      xhrFields: {
           withCredentials: true
      },
      crossDomain: true,
      beforeSend: function(xhr) {
            xhr.setRequestHeader("Cookie", "session=xxxyyyzzz");
      },
      success: function(){
           alert('success');
      },
      error: function (xhr) {
             alert(xhr.responseText);
      }
    }
); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2020-03-27T19:16:46.480

这个领域最近发生了许多变化，所以我认为一个新的答案会有所帮助。

要让浏览器在请求期间将 cookie 发送到另一个站点，必须满足以下条件：

*   [目标站点的`Set-Cookie`标头必须包含`SameSite=None`和`Secure`标签。](https://digiday.com/media/what-is-chrome-samesite/)如果`Secure`不使用，`SameSite`标题将被忽略。
*   必须向`https`端点发出请求，这是`Secure`标志的要求。
*   `XHRRequest`必须用`withCredentials=true`. 如果使用`$.ajax()` [这个是通过`xhrFields`参数](https://api.jquery.com/jquery.ajax/)完成的（需要`jQuery=1.5.1+`）
*   服务器必须使用`Access-Control-Allow-Origin`与请求标头匹配的标头进行响应`Origin`。（`*`在这种情况下将不被尊重）

很多人找到了这篇文章的方法，试图针对远程端点进行本地开发，如果满足上述条件，这是可能的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-04T12:28:39.577

我有同样的问题。会话 ID 在 cookie 中发送，但由于请求是跨域的，浏览器的安全设置会阻止 cookie 发送。

**解决方案：**在客户端（在浏览器中）生成会话 ID，使用 Javascript sessionStorage 存储会话 ID，然后将会话 ID 与每个请求一起发送到服务器。

我在这个问题上挣扎了很多，周围没有很多好的答案。这是一篇详细介绍解决方案的文章：[Javascript Cross-Domain Request With Session](https://404it.no/en/blog/javascript_cross-domain_request_with_session)

# javascript - ( ) 内的声明函数

> ID：14462424
> 
> 赞同：4
> 
> 时间：2013-01-22T15:45:23.453
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 (function(window, document, undefined) { ... })(window, document) 有什么好处？](https://stackoverflow.com/questions/5020479/what-advantages-does-using-functionwindow-document-undefined-windo)
> [高级 Javascript：为什么这个函数用括号括起来？](https://stackoverflow.com/questions/9053842/advanced-javascript-why-is-this-function-wrapped-in-parentheses)

我刚刚检查了 jquery 是如何编写的，然后在它的第一行我看到了这个：

```
(function( window, undefined ) {

}); 
```

我的问题是函数声明在`(`and内的含义或原因是什么`)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:49:48.340

在您的示例中，我认为括号没有理由。

对于立即调用的函数，Douglas Crockford 推荐并提供了如下代码示例。来源是[http://javascript.crockford.com/code.html](http://javascript.crockford.com/code.html)

> 当要立即调用函数时，应将整个调用表达式包裹在括号中，以便清楚地生成的值是函数的结果，而不是函数本身。

```
var collection = (function () {
    var keys = [], values = [];

    return {
        get: function (key) {
            var at = keys.indexOf(key);
            if (at >= 0) {
                return values[at];
            }
        },
        set: function (key, value) {
            var at = keys.indexOf(key);
            if (at < 0) {
                at = keys.length;
            }
            keys[at] = key;
            values[at] = value;
        },
        remove: function (key) {
            var at = keys.indexOf(key);
            if (at >= 0) {
                keys.splice(at, 1);
                values.splice(at, 1);
            }
        }
    };
}()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:49:12.837

实际上，第一行是这样的：

```
(function( window, undefined ) {

})( window ); 
```

这是一个立即调用的函数表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T15:49:19.670

你打错了，应该是这样写的：

```
(function(...) {

    // script

})(...); 
```

它用于避免冲突。这是一个自调用函数。由于末尾的括号，它调用了自己。

此函数中定义的所有变量、对象和函数都保留在此函数中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T15:52:05.843

见： http: [//www.ecma-international.org/ecma-262/5.1/#sec-12.4](http://www.ecma-international.org/ecma-262/5.1/#sec-12.4)

这只是 ECMAScript（以及 JavaScript）语法的一部分。

您需要括号来立即调用匿名函数。

`function () {}()`导致语法错误。但是，这些都可以工作：

```
(function () {}())
(function () {})() 
```

要点是包装函数的所有内容，以便外部变量不会泄漏到函数中（反之亦然）。它是匿名的，因此也没有添加全局函数声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T15:55:35.103

正如 SLaks 已经链接的那样，它是一个自执行功能。对于里面的2个参数是另一个原因，性能和安全性。

性能方面，javascript 会检查自己的变量，否则他会检查他的父母等等。你可以想象，局部变量总是最快的。

对于未定义的部分，这里有一个例子：黑客可以说；

`undefined = null;`

现在你的代码失败了，并且会有错误和东西。

我希望这会有所帮助。

# java - 使用反射方法的 Spring 缓存

> ID：14462430
> 
> 赞同：0
> 
> 时间：2013-01-22T15:45:41.567
> 
> 标签：java, spring, caching, ehcache, key-generator

我正在尝试使用缓存抽象文档中的方法访问自定义密钥生成器以生成用于缓存的密钥，但直到现在我还没有找到任何解决方案......在这里我给出了我的代码

`@Cacheable(value = "itemsCache", key ="T(com.ernst.transactionsAPI.IndexKeyGenerator).generate(#root.target, #root.method.name, #root.args[0])")
public List<FilialenImpl> getOutletByCustomSearchCache(SearchParametersImpl searchParameters);`

我收到以下错误：

```
org.springframework.expression.spel.SpelEvaluationException: EL1004E:(pos 47): Method call: Method generate(com.ernst.transactionsImpl.filialen.FilialenServiceBean,java.lang.String,com.ernst.persistenceImpl.impl.SearchParametersImpl) cannot be found on com.ernst.transactionsAPI.IndexKeyGenerator type 
```

它不反映方法名称，但它传递了方法类型。任何人都可以请教如何解决这个问题。

indexkeygenerator 中的方法看起来像

```
public Object generate(Object target, Method method, Object... params) {
 ...} 
```

提前致谢，

问候，拉贾塞卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:41:35.283

我在 IndexKeyGenerator 类中编写了一个静态方法 generateKey 并直接调用它，如下面的代码所示。然后用于单个缓存的自定义缓存就完美了

`@Cacheable(value = "itemsCache", key ="T(com.ernst.transactionsAPI.IndexKeyGenerator).generateKey(#root.target, #root.method, #root.args[0])") public List<FilialenImpl> getOutletByCustomSearchCache(SearchParametersImpl searchParameters);`

不要忘记覆盖 SearchParameters 类。

# binding - 以编程方式 MvvmCross Android Dialog Bing - ViewModel 未更新

> ID：14462431
> 
> 赞同：2
> 
> 时间：2013-01-22T15:45:41.980
> 
> 标签：binding, notifications, viewmodel, mvvmcross

[这是关于MvvmCross Android Dialog Bing Programmatically](https://stackoverflow.com/questions/14384229/mvvmcross-android-dialog-bind-programmatically)的后续文章

我已经在 Droid 项目中实现了 Dialog 的绑定：

```
 this.Root = new RootElement("Customer Info")
    {
        new Section("Private Configuration")
        {
            new EntryElement("Pin:").Bind(this, "{'Value':{'Path':'Configuration.Pin'}}"),
            new EntryElement("Name:").Bind(this, "{'Value':{'Path':'Configuration.Name', 'Mode':'TwoWay'}}"),
        };
    }; 
```

我在绑定中添加了*TwoWay*`Configuration.Name`只是为了测试目的。

现在的问题是绑定仅在*OneWay*中有效。**如果我更改视图中的某些内容，则不会更新**对象，但**如果更改了对象，则会通知视图**。这发生在上述两种绑定中（在绑定*模式中使用或不使用**TwoWay*）。

 *这是唯一剩下的一个完整的 Droid.Dialog 项目，使用 MvvmCross 框架，使用由 viewModels 控制的绑定和多个视图。

从我能够调试的内容来看（在 VS2010 中只有 Droid 代码，没有 PCL），每次我更改 中的文本时`EntryElement`，都会调用*OnTextChanged*方法并且属性*值*正在更新。

## 入口元素.cs

```
 public virtual void OnTextChanged(string newText)
    {
        //Log.Info("Just playing","New text:" + newText);
        OnUserValueChanged(newText);
    } 
```

## 值元素.cs

```
 protected void OnUserValueChanged(TValueType newValue)
    {
        Value = newValue;
        FireValueChanged();
    }

    protected virtual void FireValueChanged()
    {
        var handler = ValueChanged;
        if (handler != null)
            handler(this, EventArgs.Empty);
    } 
```

# 这是我在核心和机器人项目中的代码

## 核

**BaseViewModel.cs**

```
 public class BaseViewModel : MvxViewModel, IMvxServiceConsumer
    {
        protected IConfigurationDataStore ConfigDataStore
        {
            get
            {
                if (_configDataStore == null)
                    _configDataStore = this.GetService<IConfigurationDataStore>();

                return _configDataStore;
            }
        }
        private IConfigurationDataStore _configDataStore;
    } 
```

**编辑配置视图模型.cs**

```
 public class EditConfigurationViewModel : BaseViewModel, IEditConfigurationViewModel
    {
        public ConfigurationSet Configuration
        {
            get { return _configuration; }
            set
            {
                if (_configuration != value)
                {
                    _configuration = value;
                    RaisePropertyChanged(() => Configuration);
                }
            }
        }
        private ConfigurationSet _configuration;

        public EditConfigurationViewModel(string id)
        {
            Guid value;
            if (string.IsNullOrEmpty(id) || !Guid.TryParse(id, out value))
            {
                Configuration = new ConfigurationSet();
            }
            else
            {
                Configuration = ConfigDataStore.GetConfiguration(value);
            }
        }

        public void SaveConfiguration()
        {
            ConfigDataStore.UpdateConfiguration(Configuration);
        }
    } 
```

**配置集.cs**

```
 public class ConfigurationSet : MvxNotifyPropertyChanged
    {
        public string Pin
        {
            get { return _pin; }
            set
            {
                if (_pin != value)
                {
                    _pin = value;
                    RaisePropertyChanged(() => Pin);
                }
            }
        }
        private string _pin;

        public string Name
        {
            get { return _name; }
            set
            {
                //if (_name != value)
                //{
                    _name = value;
                    RaisePropertyChanged(()=> Name);
                //}
            }
        }
        private string _name;

        public string PrivateDescription
        {
            get { return _privateDescription; }
            set
            {
                if (_privateDescription != value)
                {
                    _privateDescription = value;
                    RaisePropertyChanged(() => PrivateDescription);
                }
            }
        }
        private string _privateDescription;
    } 
```

## 机器人

**编辑配置视图**

```
 public class EditConfigurationView : MvxBindingDialogActivityView<EditConfigurationViewModel>, IMvxServiceConsumer
    {
        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            DroidResources.Initialise(typeof(Resource.Layout));

            Root = new RootElement()
                {
                    new Section("Private Configuration")
                    {
                        new EntryElement("Pin:").Bind(this, "{'Value':{'Path':'Configuration.Pin'}}"),
                        new EntryElement("Name:").Bind(this, "{'Value':{'Path':'Configuration.Name'}}"),
                        new EntryElement("Description:").Bind(this, "{'Value':{'Path':'Configuration.PrivateDescription'}}")
                    }
                };
        }

        public override void OnBackPressed()
        {
            ViewModel.SaveConfiguration();

            base.OnBackPressed();
        }

        protected override void OnViewModelSet()
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:48:56.400

[在https://github.com/zleao/MvvmCross.Dialog](https://github.com/zleao/MvvmCross.Dialog)上看到您的回购后的第二个答案

* * *

感谢您的附加信息。

我还没有运行您的示例，但是查看重现问题的简单代码很有帮助。

我认为问题可能出在您的安装文件中 - [https://github.com/zleao/MvvmCross.Dialog/blob/master/MvvmCross.Dialog.UI.Droid/Setup.cs](https://github.com/zleao/MvvmCross.Dialog/blob/master/MvvmCross.Dialog.UI.Droid/Setup.cs)

那里的安装程序继承自`MvxBaseAndroidBindingSetup`which 是其中所有内容的基本安装程序类，`Cirrious.MvvmCross.Binding.Droid`并且它本身继承`MvxBaseAndroidSetup`自`Cirrious.MvvmCross.Droid`

由于除了“只是绑定”之外您还使用对话框代码，因此您需要进一步进行设置 - 您需要添加`MvxBaseAndroidDialogBindingSetup`from `Cirrious.MvvmCross.Dialog.Droid`. `Value`此类添加了许多重要步骤，包括为所有`ValueElement`实例注册双向绑定- 请参阅：

```
 protected override void FillTargetFactories(
        Cirrious.MvvmCross.Binding.Interfaces.Bindings.Target.Construction.IMvxTargetBindingFactoryRegistry registry)
    {
        registry.RegisterFactory(new MvxPropertyInfoTargetBindingFactory(typeof (ValueElement), "Value",
                                                                         (element, propertyInfo) =>
                                                                         new MvxElementValueTargetBinding(element,
                                                                                                          propertyInfo)));
        base.FillTargetFactories(registry);
    } 
```

在[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Dialog.Droid/MvxBaseAndroidDialogBindingSetup.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Dialog.Droid/MvxBaseAndroidDialogBindingSetup.cs)

* * *

所以 - 要尝试解决问题，请尝试从 `MvxBaseAndroidDialogBindingSetup`

* * *

有关 MvvmCross 层的更多信息，请参阅[http://slodge.blogspot.co.uk/2012/12/a-short-guide-to-layers-of-mvvmcross.html](http://slodge.blogspot.co.uk/2012/12/a-short-guide-to-layers-of-mvvmcross.html)

* * *

我希望这有助于并解决问题。

感谢您提供的出色细节水平。

但请注意，与 Touch Dialog 代码相比，Droid.Dialog 代码还很年轻——因此您可能会在此过程中遇到真正的错误和问题。当您遇到它们时，请在此处提问，或者如果它们是错误，请在[https://github.com/slodge/MvvmCross/issues?state=open上的问题上记录它们](https://github.com/slodge/MvvmCross/issues?state=open)

斯图尔特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:02:44.073

我刚刚使用修改后的 CustomerManagement 示例应用程序对此进行了测试——这个绑定对我来说是双向的。

我的代码：

```
 Root = new RootElement()
            {
                new Section("Customer Info")
                    {
                        new EntryElement("Name").Bind(this, "{'Value':{'Path':'Customer.Name'}}"),
                        new EntryElement("Website").Bind(this, "{'Value':{'Path':'Customer.Website'}}"),
                        new EntryElement("Phone").Bind(this, "{'Value':{'Path':'Customer.PrimaryPhone'}}"),
                    }
            }; 
```

我的 ViewModel 和 Customer 对象是：

```
public abstract class BaseEditCustomerViewModel
    : BaseViewModel
{
    private Customer _customer;
    public Customer Customer
    {
        get { return _customer; }
        private set { _customer = value; RaisePropertyChanged("Customer"); }
    }

    // ...
}

public class Customer : MvxNotifyPropertyChanged
{
    public Customer()
    {
    }

    private string _name;
    public string Name
    {
        get { return _name; }
        set { _name = value; RaisePropertyChanged("Name"); }
    }

    private string _website;
    public string Website
    {
        get { return _website; }
        set { _website = value; RaisePropertyChanged("Website"); }
    }

    private string _primaryPhone;
    public string PrimaryPhone
    {
        get { return _primaryPhone; }
        set { _primaryPhone = value; RaisePropertyChanged("PrimaryPhone"); }
    }

    // ...
} 
```

* * *

根据您的描述，我没有发现任何明显的错误——尽管显然我看不到所有的细节——例如 ViewModel 端的 Configuration 对象是什么？

* * *

如果您怀疑这可能是一个错误，那么在[https://github.com/slodge/MvvmCross/issues/new上记录这些可能是最简单的](https://github.com/slodge/MvvmCross/issues/new)

您可以在错误中包含的详细信息越多，查看它的速度就越快 - 例如，如果您可以包含重现问题的示例 github 存储库，那么开发人员可以快速轻松地进行测试。相反，如果您只是提供说明，那么开发人员可能需要 1 小时或更长时间来进行测试——因此您需要等待他们有“空闲时间”。

* * *

对于“调试......只有 Droid 代码，没有 PCL，在 VS2010 中”的投诉，请确保您已向 Xamarin 提出此问题 - 他们解决这些问题的唯一方法是付费客户告诉他们问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-11T15:42:53.187

这在 iOS 中也是必需的。

```
public class Setup : MvxIosDialogSetup//MvxIosSetup 
```*

# javascript - mootools clone() inject('top') 反转元素顺序

> ID：14462433
> 
> 赞同：0
> 
> 时间：2013-01-22T15:45:45.980
> 
> 标签：javascript, html, mootools

当 'top' 是 where 字符串时，使用 clone(rue, false).inject('myList', 'top') 会反转项目顺序。必须有一种优雅的排序方式吗？我的方法错了吗？

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-gb" xml:lang="en-gb">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="js/moo.1.4.5/core.js"></script>
    <script type="text/javascript">
        window.addEvent('domready', function () {

            $('myList').getChildren().each( function (el, i)  { 
                el.clone(true, false).addClass('clone').inject('myList', 'top');
                el.clone(true, false).addClass('clone').inject('myList', 'bottom');
            }) ;

        });
    </script>
</head>
<body>
    <ul id="myList">
        <li><p>Slide 1</p></li>
        <li><p>Slide 2</p></li>
        <li><p>Slide 3</p></li>
        <li><p>Slide 4</p></li>
        <li><p>Slide 5</p></li>
    </ul>
</body>
</html> 
```

返回

```
<ul id="myList">
   <li class="clone"><p>Slide 3</p></li>
    <li class="clone"><p>Slide 2</p></li>
    <li class="clone"><p>Slide 1</p></li>
    <li><p>Slide 1</p></li>
    <li><p>Slide 2</p></li>
    <li><p>Slide 3</p></li>
    <li class="clone"><p>Slide 1</p></li>
    <li class="clone"><p>Slide 2</p></li>
    <li class="clone"><p>Slide 3</p></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:49:42.317

看看你在做什么`inject('top')`...... 列表的顶部始终是相同的位置 - 列表的顶部。

例如

```
1 2 3         <--original
1 1 2 3       <--clone 1 + insert top
2 1 1 2 3     <--clone 2 + insert top
3 2 1 1 2 3   <--clone 3 + insert top 
```

您必须从要克隆的块的末尾开始，然后向后工作：

```
1 2 3         <--original
3 1 2 3       <--clone 3 + insert top
2 3 1 2 3     <--clone 2 + insert top
1 2 3 1 2 3   <--clone 1 + insert top 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:16:16.237

取决于你的目标。如果您的目标是克隆列表并将其注入顶部，则可以按照当前的思路执行此操作：

[http://jsfiddle.net/dimitar/xNWrM/](http://jsfiddle.net/dimitar/xNWrM/)

```
var list = $('myList'),
    lis = list.getElements('li');

lis.reverse().each(function(el){
    el.clone(true, true).addClass('clone').inject(list, 'top');
}); 
```

可能有一种更优雅的方法来克隆它们，方法是在循环它们时在先前注入的元素之后注入，这将保存 Elements.reverse 调用。

# javascript - 如何使用 MarkerCluster.js 在谷歌地图上获取当前集群的标记

> ID：14462435
> 
> 赞同：1
> 
> 时间：2013-01-22T15:45:49.787
> 
> 标签：javascript, google-maps-api-3, google-maps-markers, markerclusterer

我的情况是我有很多地理数据，其中许多具有相同的纬度和经度。

我想让 MarkerCluster 的 zoomOnClick 处理程序保持活动状态，但是当地图继续放大并获得最大缩放级别时，集群中的相同纬度和经度数据将不会被分离（因为达到最大缩放级别为 21）< - 这就是感觉。所以，我想做的就是当地图获得最大缩放级别时，我点击集群标记，我不放大，我想弹出一个信息窗口来显示该集群中所有标记的信息。

我现在可以单击clustermarker并弹出一个信息窗口（通过修改MarkerCluster.js），但我不知道如何在clustermarker中获取这些标记，目前，我只能让所有标记返回......

有谁知道如何执行此操作或我应该如何修改 js 文件？或者也许有人也有同样的情况？

任何建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:05:07.357

要获取当前（单击的）集群，请访问传递给`clusterclick`-callback 的参数。

此参数的方法`getMarkers()`将返回一个数组，其中包含集群中的标记，循环遍历数组并收集您想要的数据。

**注：**不知道你用的是哪个版本的markerclusterer.js，我的回答是指[这个版本](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js)。
也无需修改此版本，无需任何修改即可达到您要求的所有功能。

如何访问标记的简短示例：

```
google.maps.event.addListener(markerclustererObject,'clusterclick',
   功能（点击集群）{
   console.log( clickedCluster.getMarkers ());
});

```

# android - 带有片段和不同滚动的 Android GUI

> ID：14462445
> 
> 赞同：0
> 
> 时间：2013-01-22T15:46:36.680
> 
> 标签：android, user-interface, scrollbar

我是新的@Android 并尝试构建一个分为 3 部分的 GUI（左侧的两个不同的导航区域/第一个下方的第二个）和右侧/中间的内容区域）。

在谷歌搜索并阅读了一些常见问题解答后，我决定使用 Fragments。到目前为止一切顺利，我用 ListFragments 为 NAV 构建了一个示例，一切正常。

在下一步中，两个导航片段都应该是可滚动的并包含按钮或图像。

这就是我的问题：

我还没有找到如何水平滚动 NAV 区域和垂直滚动内容区域的解决方案。我试图在一个片段中实现 Horizo​​ntalScrollView 或 ViewPages 但这对我不起作用。

任何人都可以帮助我或给我一些示例，在这种情况下必须使用哪些 GUI 元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:09:37.533

您可以在 ActioBarSherlock 项目的示例部分查看 Fragments 和 ViewPagers 的用法。

[http://actionbarsherlock.com/samples.html](http://actionbarsherlock.com/samples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:37:12.923

我找到了解决这个问题的方法。主布局包含 2 个视图页面和一个内容片段。这行得通...

# gcc - makefile 的新手。想了解一些标志

> ID：14462448
> 
> 赞同：0
> 
> 时间：2013-01-22T15:46:44.950
> 
> 标签：gcc, makefile, ld

我想知道这些标志在makefile中的含义

```
-rpath
-soname
-cvq
-MD
2> 这里还有一些代码

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:01:23.290

这与 / 完全无关，`make`而是与`gcc`/相关`ld`。

`make`是一种元语言，可让您自动化构建过程。因此，您在 makefile 中找到的大多数内容通常是指您如何调用编译器和链接器以及构建应用程序（或库或其他东西）所需的其他程序。

检查手册页（`man gcc`和`man ld`）以获取有关给定程序的特定标志的信息。

例如

*   `-rpath DIR`: 将 DIR 添加到运行时搜索路径 (ld)
*   `-soname FILENAME`: 设置共享库名 (ld)
*   `-cvq`：我不知道这些标志指的是哪个程序；这很可能是三个标志`-c -v -q`，但谁知道呢？
*   `-MD`: 通常用于从 .c 文件 (gcc) 生成包含依赖项
*   `2>`：这根本不是标志，而是将 stderr 重定向到其他地方（例如到文件）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T23:49:50.793

-cvq 由三个标志组合而成：

-c：每当创建档案时，都会将有关该效果的信息性消息写入标准错误。

如果指定了 -c 选项，ar 会静默创建存档。

-v：提供详细的输出。

-q：快速将指定的文件附加到存档中。如果存档不存在，则会创建一个新的存档文件。

在此处查看更多信息：[http ://www.cs.dartmouth.edu/~campbell/cs50/buildlib.html](http://www.cs.dartmouth.edu/~campbell/cs50/buildlib.html)

# python - 使用 OpenCV python 绑定在 PySide 小部件中显示网络摄像头流

> ID：14462450
> 
> 赞同：3
> 
> 时间：2013-01-22T15:46:52.087
> 
> 标签：python, opencv, pyside

嘿，如果有人可以帮助我，那就太好了。我正在尝试使用 OpenCV 获取网络摄像头流，然后通过更新图像将其显示在 PySide 应用程序中。

```
cv.NamedWindow('Raw', cv.CV_WINDOW_AUTOSIZE)
self.cap = cv.CaptureFromCAM(0) 
```

这是有效的，我在 while 循环中使用 show image 函数更新了命名窗口。

```
while True:
    frame = cv.QueryFrame(self.cap)
    img = cv.CreateImage(cv.GetSize(frame),cv.IPL_DEPTH_8U,1)
    if frame is None:
        print "Frame is none"
        sys.exit(1)
    # display webcam image
    cv.ShowImage('Raw', frame) 
```

但是当我尝试在 PySide 应用程序中显示图像时，我只看到一个空白的黑色图像（以下代码与上面的 while 循环相同）

```
image = QImage(frame.tostring(), frame.width, frame.height, QImage.Format_RGB888).rgbSwapped()
self.pixmap = QPixmap.fromImage(image)
grid = QGridLayout()
grid.setSpacing(10)
imageBox = QLabel(self)
imageBox.setGeometry(0,0,300,200)
imageBox.setPixmap(self.pixmap.scaled(300,200))
grid.addWidget(imageBox)
self.widget.setLayout(grid)
self.repaint() 
```

有谁知道为什么图片不更新？

# c# - Resharper 代码完成工具提示未显示

> ID：14462454
> 
> 赞同：11
> 
> 时间：2013-01-22T15:46:59.903
> 
> 标签：c#, visual-studio-2012, resharper, intellisense, code-completion

根据[这个](http://resharper.blogspot.com/2007/05/code-completion-with-resharper.html)安装 resharper 代码完成后应该是这样的 ![在此处输入图像描述](../Images/ff87f3292ff2181b8ff14816020530aa.png)

但我实际上得到的是（没有工具提示）。

![在此处输入图像描述](../Images/e269b3f868f30c9625ded9b1bce432f0.png)

有没有办法打开这些工具提示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T15:54:40.503

确保您使用 Resharper 选项`Resharper->Options->Intellisense->General`单击`Resharper`。

从*Autopopup 单击*Enable Automatic Intellisense popup

从*完成字符*检查 C#

从*完成行为*来看，它应该是这样的；

![在此处输入图像描述](../Images/9997d5ee26ee97f04c5577dfb9c006b1.png)

从*Completion Appearance*中选择 Visual Studio Intellisense 字体并单击 Show Summary。

从Parameter Info来看，应该是这样的；

![在此处输入图像描述](../Images/084f1c71a25b5dce508aea22c0934be3.png)

顺便说一句，当然这些只是我的`Resharper`选择。这里是 Resharper Intellisense 在这个选项上的表现；

![在此处输入图像描述](../Images/e486150ba543a469e89ac37a84af9318.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:49:11.223

此设置可能是您正在寻找的：

![试试这个设置](../Images/50964a37f8707cdcf94b47a6968038d1.png)

# android - Returning from an activity using navigateUpFromSameTask()

> ID：14462456
> 
> 赞同：69
> 
> 时间：2013-01-22T15:47:05.260
> 
> 标签：android, android-activity, android-actionbar, up-button

I have two activities, A and B. When activity A is first started, it accesses the `Intent` passed to it (because the `Bundle` is `null`, as it should be the first time through), and displays information accordingly:

```
CustInfo m_custInfo;
...
protected void onCreate(Bundle savedInstanceState)
{
    ...
    Bundle bundle = (savedInstanceState == null) ? getIntent().getExtras() : savedInstanceState;
    m_custInfo = (CustInfo) m_bundle.getSerializable("CustInfo");
    if (m_custInfo != null
        ...
} 
```

This works fine the first time through. The `EditText` controls and `ListView` are filled out correctly.

Now, when an item in the list is clicked, activity B is started to show the details:

```
m_custInfo = m_arrCustomers.get(pos);

Intent intent = new Intent(A.this, B.class);
intent.putExtra("CustInfo", m_custInfo); // CustInfo is serializable
// printing this intent, it shows to have extras and no flags

startActivityForResult(intent, 1); 
```

Right before acivity B is started, the framework calls A's overridden `onSaveInstanceState()`:

```
protected void onSaveInstanceState(Bundle outState)
{
    super.onSaveInstanceState(outState);

    outState.putSerializable("CustInfo", m_custInfo);
} 
```

In activity B, when the Up button is pressed in the action bar, I want to return to activity A and have it be in the same state as it was before:

```
public boolean onOptionsItemSelected(MenuItem item)
{
    if (item.getItemId() == android.R.id.home)
    {
        Intent intent = NavUtils.getParentActivityIntent(this);
        // printing this intent, it shows to have flags but no extras

        NavUtils.navigateUpFromSameTask(this); // tried finish() here but that created an even bigger mess
        return true;
    }
    ...
} 
```

Herein lies the problem, when in `onCreate()` of activity A the second time, the `Bundle` parameter is `null` **and** `getExtras()` returns `null`. Since `onSaveInstanceState()` was called, I would have expected the `Bundle` parameter to be non-`null`.

I've read about this issue on other web sites, have tried the suggestions, but nothing works.

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-04-22T12:27:23.083

如果您希望您的应用程序以这种方式做出反应，您应该将活动 A 的启动模式声明为：

```
android:launchMode="singleTop" 
```

在您的 AndroidManifest.xml 中。

否则android使用标准启动模式，这意味着

> “系统总是在目标任务中创建一个新的活动实例”

并且您的活动被重新创建（请参阅[Android 文档](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)）。

使用 singleTop 系统会返回到您现有的活动（带有原始额外活动），如果它位于任务的后堆栈的顶部。在这种情况下不需要实现 onSaveInstanceState。

在您的情况下，savedInstanceState 为 null，因为您的活动以前没有被操作系统关闭。

**注意**（感谢 android 开发人员指出[这一点](https://stackoverflow.com/a/20306670/2306907)）**：**

*虽然这是对问题的一种解决方案，但如果返回的活动不在*后堆栈的顶部，则它将不起作用。考虑Activity A启动B的情况，也就是启动C，C的父Activity配置为A。如果`NavigateUpFromSameTask()`从C调用，会重新创建Activity，因为A不在栈顶。

在这种情况下，可以改用这段代码：

```
Intent intent = NavUtils.getParentActivityIntent(this); 
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP); 
NavUtils.navigateUpTo(this, intent); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-11-06T22:00:51.780

发生这种情况是因为`NavUtils.navigateUpFromSameTask()`基本上只是调用`startActivity(intentForActivityA)`. 如果活动 A 使用默认值`android:launchMode="standard"`，则创建活动的新实例并且不使用保存的状态。有三种方法可以解决此问题，各有优缺点。

# 选项1

覆盖活动 B 中的[getParentActivityIntent()](https://developer.android.com/reference/android/app/Activity.html#getParentActivityIntent())并指定活动 A 所需的适当附加功能：

```
@Override
public Intent getParentActivityIntent() {
    Intent intent = super.getParentActivityIntent();
    intent.putSerializable("CustInfo", m_custInfo);
    return intent;
} 
```

*注意：如果您使用的是 AppCompatActivity 和 androidx 或支持库中的工具栏，那么您需要重写[getSupportParentActivityIntent()](https://developer.android.com/reference/androidx/appcompat/app/AppCompatActivity#getSupportParentActivityIntent())。*

我觉得这是最优雅的解决方案，因为无论用户如何导航到活动 B，它都可以正常工作。如果用户直接导航到活动 B 而不通过活动 A，下面列出的两个选项将无法正常工作，例如，如果活动B 从通知或 URL 处理程序启动。我认为这种情况是“向上”导航 API 很复杂并且不能简单地充当愚蠢的后退按钮的原因。

此解决方案的一个缺点是使用标准的开始新活动过渡动画而不是返回到先前活动的动画。

# 选项 2

[通过覆盖onNavigateUp()](https://developer.android.com/reference/android/app/Activity.html#onNavigateUp())拦截向上按钮并将其视为愚蠢的后退按钮：

```
@Override
public boolean onNavigateUp() {
    onBackPressed();
    return true;
} 
```

*注意：如果您使用 AppCompatActivity 和来自 androidx 或支持库的工具栏，那么您需要覆盖[onSupportNavigateUp()](https://developer.android.com/reference/androidx/appcompat/app/AppCompatActivity#onSupportNavigateUp())。*

这个解决方案有点hacky，只适用于“up”和“back”应该表现相同的应用程序。这可能很少见，因为如果“向上”和“返回”应该表现相同，那么为什么还要麻烦有一个向上按钮呢？此解决方案的一个优点是使用了标准的返回上一活动动画。

# 选项 3

根据 yonojoy 的建议，设置`android:launchMode="singleTop"`活动 A。有关详细信息，请参阅[他的答案](https://stackoverflow.com/questions/14462456/returning-from-an-activity-using-navigateupfromsametask/16147110#16147110)。请注意，这`singleTop`并不适用于所有应用程序。您必须尝试一下和/或花一些时间阅读[文档](https://developer.android.com/guide/topics/manifest/activity-element.html#lmode)以自己决定。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-19T05:09:06.320

而不是打电话`NavUtils.navigateUpFromSameTask`

您可以在导航之前获取父意图并对其进行修改。例如：

```
Intent intent = NavUtils.getParentActivityIntent(this);
intent.putExtra("CustInfo", m_custInfo); // CustInfo is serializable
NavUtils.navigateUpTo(this, intent); 
```

这将与意图完全相同，`NavUtils.navigateUpFromSameTask`但允许您向意图添加一些额外的属性。您可以看一下代码，因为`NavUtils.navigateUpFromSameTask`它非常简单。

```
public static void navigateUpFromSameTask(Activity sourceActivity) {
    Intent upIntent = getParentActivityIntent(sourceActivity);

    if (upIntent == null) {
        throw new IllegalArgumentException("Activity " +
                sourceActivity.getClass().getSimpleName() +
                " does not have a parent activity name specified." +
                " (Did you forget to add the android.support.PARENT_ACTIVITY <meta-data> " +
                " element in your manifest?)");
    }

    navigateUpTo(sourceActivity, upIntent);
} 
```

使父 Activity SINGLE_TOP 可能适用于一些简单的应用程序，但如果该 Activity 不是直接从其父 Activity 启动的呢？或者您可能合法地希望父级存在于后堆栈中的多个位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-26T08:02:42.480

我认为这是一个更通用的解决方案，可以添加到您的基本 Activity 类中：

```
@Override
public boolean onOptionsItemSelected(final MenuItem item) {
    if (item.getItemId() == android.R.id.home) {
        final Intent upIntent = NavUtils.getParentActivityIntent(this);
        if (upIntent == null)
            onBackPressed();
        else
            //optionally add this flag to the intent: Intent.FLAG_ACTIVITY_SINGLE_TOP
            NavUtils.navigateUpTo(this, upIntent);
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

对于您希望导航到某个特定父 Activity 的每个 Activity，请在清单上使用它：

```
 <activity android:parentActivityName="pathToParentActivity" ...>
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="pathToParentActivity"/>
    </activity> 
```

而且，如果您的 minSdk 来自 API 16，请删除“元数据”标签，这样您就可以在清单中使用它：

```
 <activity android:parentActivityName="pathToParentActivity" ...>
    </activity> 
```

更多信息[**在这里**](https://developer.android.com/training/implementing-navigation/ancestral)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-02-17T22:00:17.190

你提到：

> 在活动 B 中，当在操作栏中按下向上按钮时，我想返回到活动 A 并使其处于与以前相同的状态。

如果您在 Activity A 上的内容驻留在 Fragment 中，则在 Fragment 的 onCreate() 中调用 setRetainInstance(true)。

然后 Fragment 实例将在 Activity 重新创建期间保留。

# linux - subsetting a file alphabetically

> ID：14462459
> 
> 赞同：1
> 
> 时间：2013-01-22T15:47:20.253
> 
> 标签：linux

I'm relatively new to linux and I was trying to subset certain rows out of a file alphabetically. Basically I have a column with 3 or 4 letter symbols (it's trade data, they're ticker symbols) and I want to only save ones between certain times, and certain ticker symbols. (I want only trades between 2:10 and 3:05 and only trades that occurred in symbols SA through TZ) I tried this gawk script and get the times right

|gawk '{if $2>1410000 && $2<1505000) print $0}'

This got all the times out that I wanted to. Is there a similar gawk script (or sed maybe?) that I can do to get rid of all the tickers up to SA, and those after TZ?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:28:56.783

gawk '($2 > 1410000 && $2<1505000) && (substr($1,1,2) >= "SA" && substr($1,1,2) <= "TZ"))'

请注意，在 awk 中，一个空的操作语句“{...}”会打印记录。

[编辑-清理]

# html - 来自 Knockout JS 的 HTML 中的标记过多

> ID：14462462
> 
> 赞同：0
> 
> 时间：2013-01-22T15:47:27.770
> 
> 标签：html, knockout.js, markup

我正在学习 knockoutjs，并注意到我的页面包含很多看起来 .. 的标记，但不确定它看起来是什么。

*   不必要的 - KO 工作所必需的
*   过多 - data-bind= 需要数据才能工作
*   代码混乱 - 大量标记..

也许我正在“在线”做事，而不是正确使用视图这段代码：

```
<tr data-bind="css: {'checked':Active,'unchecked':!Active,}">
            <td data-bind="text: Name, class: Active"></td>
</tr> 
```

生成：

```
<tr data-bind="css: {'checked':Active,'unchecked':!Active,}" class="checked">
  <td data-bind="text: Name, class: Active">Aaron46</td>
</tr>
<tr data-bind="css: {'checked':Active,'unchecked':!Active,}" class="checked">
  <td data-bind="text: Name, class: Active">Abigail</td>
</tr>
<tr data-bind="css: {'checked':Active,'unchecked':!Active,}" class="unchecked">
  <td data-bind="text: Name, class: Active">Adrienne</td>
</tr>
<tr data-bind="css: {'checked':Active,'unchecked':!Active,}" class="checked">
  <td data-bind="text: Name, class: Active">Aimee</td>
</tr> 
```

这看起来像“混乱代码”吗？还是我不应该担心... :)

到目前为止，我很喜欢 KnockOutJS ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:02:45.627

我必须承认，经过多年使 Html 尽可能稀疏，将很多东西放入数据绑定中感觉不对。

但是，几周后，它的力量让我解决了这个问题。至少这一切都有意义。

话虽如此，如果您实际上没有绑定到某些数据，我不会使用 Knockout 在您的 tds 上设置 CSS。所以我会这样做：

```
<tr data-bind="css: {'checked':Active,'unchecked':!Active,}">
            <td class="Active" data-bind="text: Name"></td>
</tr> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:10:46.377

周围有一些库可以最大限度地减少或消除对标记中绑定的需求。

我对这个原因的贡献是对配置库的约定 [https://github.com/AndersMalmgren/Knockout.BindingConventions](https://github.com/AndersMalmgren/Knockout.BindingConventions)

它使用约定而不是显式绑定，您会惊讶地发现，在使用这样的库时，您很少需要显式声明绑定，您的 css 示例仍然需要使用标准绑定，或者如果您创建自己的约定。

例如，使用香草 KO：

```
<button data-bind="click: save, enable: canSave">Save</button> 
```

我的库：

```
<button data-name="save">Save</button> 
```

[http://jsfiddle.net/3Ajnj/](http://jsfiddle.net/3Ajnj/)

# c# - use a variable from a page in another one

> ID：14462467
> 
> 赞同：0
> 
> 时间：2013-01-22T15:47:33.510
> 
> 标签：c#, windows-8, windows-store-apps

I'm creating an app for Windows store using C#. I need to pass a string variable to another page. I have already tried using this variable as an input parameter of the page where the variable is going to be used, like this:

***In the page where the variable was created:***

```
this.Frame.Navigate(typeof(MainMenu(Variable))); 
```

***In the page where the variable is going to be used:***

```
public PageName(string Variable)
{
   this.InitializeComponent();
} 
```

so, something like winforms, obviously doesn't work to windows store

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:52:26.167

您可以将参数传递给该`Navigate`方法。

`this.Frame.Navigate(typeof(MainMenu),yourVariable);`

`OnNavigateTo`在您的 MainMenu 页面中，您可以在（虚拟）方法中找到您的“导航数据” 。

希望这有帮助。

问候

**[编辑]**看看这个示例[快速入门：在页面之间导航](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh771188.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:53:51.613

查看“在页面之间传递信息”下的此[页面以获取示例代码。](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh771188.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:52:38.010

您需要使用以下事件来获取变量的值

OnNavigatedTo

[这是MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.page.navigationservice%28v=VS.95%29.aspx)上的对应链接

# r - 将所有函数保存在 txt 文件中

> ID：14462469
> 
> 赞同：2
> 
> 时间：2013-01-22T15:47:40.823
> 
> 标签：r, file, text, output

我通常在`R`. 在两次模拟之间，R 代码的某些部分会发生变化。通常，我会在模拟结果旁边保留一个 .txt 文件，其中包含该模拟中使用的每个函数的定义。要制作该 .txt 文件，我只需运行以下行：

```
for(j in 1:length(ls()))    print(c(ls()[j],eval(as.symbol(ls()[j]))))
out<-capture.output(for(j in 1:length(ls()))    print(c(ls()[j],eval(as.symbol(ls()[j])))))
cat(out,file=paste("essay_4_code.txt",sep=""),sep="\n",append=FALSE) 
```

在我的环境中加载所有功能之后。然而，在生成的文本文件中，R 函数不是 R 可以解释为函数的格式。为了理解为什么，这里有一个简单的例子：

```
rm(list=ls())
foo1<-function(x){
  sin(x)+3
}
foo2<-function(x){
  cos(x)+1
}
foo3<-function(x){
  cos(x)+sin(x)
} 
```

会产生：

```
[[1]]
[1] "foo1"

[[2]]
function (x) 
{
    sin(x) + 3
}

[[1]]
[1] "foo2"

[[2]]
function (x) 
{
    cos(x) + 1
}

[[1]]
[1] "foo3"

[[2]]
function (x) 
{
    cos(x) + sin(x)
} 
```

所以，简而言之，我想让essay_4_code.txt R可读

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:55:06.087

你可以使用

```
dump(lsf.str(), file="essay_4_code.R") 
```

这将创建一个 .R 文件，其中包含当前搜索空间中的所有函数定义。

### 编辑：

来自@JoshuaUlrich 在评论中发布的相关问题：

```
...dump("f") will only save the function definition of f, and not its environment. 
If you then source the resulting file, f will no longer work correctly [if it 
depends on variables in the environment in was previously bound to]. 
```

或者，您可以使用该`save`函数将函数保存为可与该`load`函数一起读取的二进制格式。这会保留您的函数的环境绑定，但您将无法自己读取生成的文件。

```
 do.call(save, c(as.list(lsf.str()), file='essay_4_code.Rd')) 
```

在新会话中加载时，先前绑定到全局环境的函数将绑定到当前全局环境，而绑定到不同环境的函数将携带该环境。

```
rm(list=ls())
# function bound to non-global environment
e <- new.env()
e$x <- 10
f <- function() x + 1
environment(f) <- e
# function bound to global environment
y <- 20
g <- function() y + 1
# save functions
do.call(save, c(as.list(lsf.str()), file='essay_4_code.Rd'))

# fresh session
rm(list=ls())

load('essay_4_code.Rd')
f()
# [1] 11
g()
# Error in g() : object 'y' not found
y <- 30
g()
# [1] 31
ls()
# [1] "f" "g" "y" 
```

如果你只是想检查 'eassay_4_code.Rd' 中的函数体：

```
e<-new.env()
load('essay_4_code.Rd', e)
as.list(e)
# $f
# function () 
# x + 1
# <environment: 0x000000000a7b2148>
# 
# $g
# function () 
# y + 1 
```

# java - What is wrong with this implementation of Range class

> ID：14462470
> 
> 赞同：0
> 
> 时间：2013-01-22T15:47:43.920
> 
> 标签：java, arraylist, nested-loops

I have an assignment where I am working on a Spreadsheet, that I have been handed by my instructor.

I am being asked to implement a class called Range, that accepts two positions (each consisting of two ints denoting column and row, for instance new Position(1,2)), and then finds the lowest row and column and constructs a new position which these two values, this position is the upper left corner of my range, and the same with the highest value for row and column.

Then I was asked to make a class that takes the sum of a range of positions. So I decided that for my range it should be able to have a method where all the positions where put into an ArrayList, that is the getPositions() method.

Here you can see the source code of the class:

```
package spreadsheet;

import java.lang.Math;
import java.util.ArrayList;

public class Range {

    private Position a;
    private Position b;
    private ArrayList<Position> positionList;

    // Creates a new range, where it makes sure that the positions,
    // appear in the right order, where the first position is the position
    // of the upper left corner, and the second position is the lower right corner.
    public Range(final Position a, final Position b) {
        int minColumn = Math.min(a.getColumn(),b.getColumn());
        int minRow = Math.min(a.getRow(),b.getRow());

        int maxColumn = Math.max(a.getColumn(),b.getColumn());
        int maxRow = Math.max(a.getRow(),b.getRow());

        this.a = new Position(minColumn, minRow);
        this.b = new Position(maxColumn, maxRow);
        positionList = new ArrayList<>();       
    }

    public ArrayList<Position> getPositions() {
        int minColumn = this.a.getColumn();
        int minRow = this.a.getRow();
        int maxColumn = this.b.getColumn();
        int maxRow = this.b.getRow();
        for(int i = minColumn; i < maxColumn; i++) {
            for(int j = minRow; j < maxRow; j++) {
                positionList.add(new Position(i, j));
            }
        }
        return positionList;
    }   
} 
```

The problem is however that it does not really work, the list it returns is empty, so why is that? Can anyone spot the error?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:22:19.167

我认为没有理由不应该这样做。好的，这里有几个问题：

*   `positionList = new ArrayList<>();`不会编译。肯定是`positionList = new ArrayList<Position>();`
*   正如 Jodaka 所说，当您第二次获得每个位置时，您将在列表中获得两次（当您将其称为第四次时会获得三次，依此类推）。
*   您的实现将包括第一列和第一行，但不包括最后一列（尝试`i <= maxColumn`并`j <= maxRow`在循环中）。

对于我的测试，我使用 Points 而不是 Position，并为 Points 添加了一些强制转换，使用 int 作为构造函数参数，但返回 double。但我并没有改变逻辑本身：

```
package spreadsheet;

import java.awt.Point;
import java.util.ArrayList;

public class Range {

private final Point a;
private final Point b;
private final ArrayList<Point> PointList;

// Creates a new range, where it makes sure that the Points,
// appear in the right order, where the first Point is the Point
// of the upper left corner, and the second Point is the lower right corner.
public Range(final Point a, final Point b) {
    int minColumn = (int) Math.min(a.getX(),b.getX());
    int minRow = (int) Math.min(a.getY(),b.getY());

    int maxColumn =(int)  Math.max(a.getX(),b.getX());
    int maxRow = (int) Math.max(a.getY(),b.getY());
    this.a = new Point(minColumn, minRow);
    this.b = new Point(maxColumn, maxRow);
    PointList = new ArrayList<Point>();
}

public ArrayList<Point> getPoints() {
    int minColumn = (int) a.getX();
    int minRow = (int) a.getY();
    int maxColumn = (int) b.getX();
    int maxRow = (int) b.getY();
    for (int i = minColumn; i < maxColumn; i++) {
        for (int j = minRow; j < maxRow; j++) {
            PointList.add(new Point(i, j));
        }
    }
    return PointList;
} 
```

考试：

```
package spreadsheet;

import java.awt.Point;
import java.util.ArrayList;

import org.junit.Test;

    public class RangeTest {

    @Test
    public void testSomePoints() throws Exception {
        Range range = new Range(new Point(1, 1), new Point(5, 5));
        ArrayList<Point> points = range.getPoints();
        for (Point point : points) {
            System.out.println(point);
        }
    }
} 
```

结果：

```
java.awt.Point[x=1,y=1]
java.awt.Point[x=1,y=2]
java.awt.Point[x=1,y=3]
java.awt.Point[x=1,y=4]
java.awt.Point[x=2,y=1]
java.awt.Point[x=2,y=2]
java.awt.Point[x=2,y=3]
java.awt.Point[x=2,y=4]
java.awt.Point[x=3,y=1]
java.awt.Point[x=3,y=2]
java.awt.Point[x=3,y=3]
java.awt.Point[x=3,y=4]
java.awt.Point[x=4,y=1]
java.awt.Point[x=4,y=2]
java.awt.Point[x=4,y=3]
java.awt.Point[x=4,y=4] 
```

*编辑：*

如果我第二次调用 getPoints()，我也会看到每个点两次。您创建一次列表，但每次调用 getPoints() 时都会添加点。

有几种可能性：

1.  您可以在 getPoints() 方法中而不是在构造函数中创建 ArrayList。但通常你不想每次调用这个方法时都创建一个全新的列表......
2.  您可以将列表存储在字段中，在构造函数中计算它并仅使用返回该字段的 getter。
3.  类似于第二种可能性，但您可以按需计算列表。所以不要在构造函数中计算它，而是在 getter 中计算它，**如果它现在为空，**否则使用存储的列表。

*2\. 编辑*

1.  选项：

    ```
    public class Range {

        private final Point a;
        private final Point b;
        private final ArrayList<Point> PointList;

        public Range(final Point a, final Point b) {
            int minColumn = (int) Math.min(a.getX(),b.getX());
            int minRow = (int) Math.min(a.getY(),b.getY());

            int maxColumn =(int)  Math.max(a.getX(),b.getX());
            int maxRow = (int) Math.max(a.getY(),b.getY());
            this.a = new Point(minColumn, minRow);
            this.b = new Point(maxColumn, maxRow);
        }

        public ArrayList<Point> getPoints() {
            PointList = new ArrayList<Point>();
            int minColumn = (int) a.getX();
            int minRow = (int) a.getY();
            int maxColumn = (int) b.getX();
            int maxRow = (int) b.getY();
            for (int i = minColumn; i < maxColumn; i++) {
                for (int j = minRow; j < maxRow; j++) {
                    PointList.add(new Point(i, j));
                }
            }
            return PointList;
        }
    } 
    ```

2.  选项：

    ```
    public class Range {

        private final Point a;
        private final Point b;
        private final ArrayList<Point> PointList;

        public Range(final Point a, final Point b) {
            int minColumn = (int) Math.min(a.getX(),b.getX());
            int minRow = (int) Math.min(a.getY(),b.getY());

            int maxColumn =(int)  Math.max(a.getX(),b.getX());
            int maxRow = (int) Math.max(a.getY(),b.getY());
            this.a = new Point(minColumn, minRow);
            this.b = new Point(maxColumn, maxRow);
            PointList = calcPoints();
        }

        private ArrayList<Point> calcPoints() {
            ArrayList<Point> list = new ArrayList<Point>();
            int minColumn = (int) a.getX();
            int minRow = (int) a.getY();
            int maxColumn = (int) b.getX();
            int maxRow = (int) b.getY();
            for (int i = minColumn; i < maxColumn; i++) {
                for (int j = minRow; j < maxRow; j++) {
                    PointList.add(new Point(i, j));
                }
            }
            return list;
        }

        public ArrayList<Point> getPoints() {
            return PointList;
        }
    } 
    ```

3.  选项：

    ```
    public class Range {

        private final Point a;
        private final Point b;
        private final ArrayList<Point> PointList;

        public Range(final Point a, final Point b) {
            int minColumn = (int) Math.min(a.getX(),b.getX());
            int minRow = (int) Math.min(a.getY(),b.getY());

            int maxColumn =(int)  Math.max(a.getX(),b.getX());
            int maxRow = (int) Math.max(a.getY(),b.getY());
            this.a = new Point(minColumn, minRow);
            this.b = new Point(maxColumn, maxRow);
        }

        private ArrayList<Point> calcPoints() {
            ArrayList<Point> list = new ArrayList<Point>();
            int minColumn = (int) a.getX();
            int minRow = (int) a.getY();
            int maxColumn = (int) b.getX();
            int maxRow = (int) b.getY();
            for (int i = minColumn; i < maxColumn; i++) {
                for (int j = minRow; j < maxRow; j++) {
                    list.add(new Point(i, j));
                }
            }
            return list;
        }

        public ArrayList<Point> getPoints() {
            if(PointList == null) {
                PointList = calcPoints();
            }
            return PointList;
        }
    } 
    ```

# e-commerce - 使用 Cartthrob/ExpressionEngine 聚合购物车中的项目

> ID：14462472
> 
> 赞同：0
> 
> 时间：2013-01-22T15:47:47.193
> 
> 标签：e-commerce, expressionengine, cartthrob

当我将一件数量为 3 的商品添加到购物车时，使用

```
exp:cartthrob:add_to_cart_form 
```

然后使用显示购物车的内容

```
{exp:cartthrob:cart_items_info} 
```

我得到 3 行相同的项目。

有没有办法告诉 Cartthrob 聚合项目并显示数量 = 3 的一行？

PS：这些项目确实有单独的项目选项。我想知道这是否是 CT 在单独的行上显示它们的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:34:41.113

您需要在 CartThrob 模块设置中的产品屏幕上调整这些选项：

![CartThrob 设置截图](../Images/e0be23fa4e9e821dfc2541b0ccf6cea7.png)

虽然如果他们确实有个别项目选项，每个项目可能会有所不同，但 CT 可能会覆盖这些设置。试试看。

此外，为了将来参考，我建议在[ExpressionEngine Answers SE 站点](http://expressionengine.stackexchange.com)上询问与 ExpressionEngine 相关的问题。

# symfony - 使用 FOSUser Bundle Symfony 添加角色

> ID：14462475
> 
> 赞同：0
> 
> 时间：2013-01-22T15:48:00.930
> 
> 标签：symfony, fosuserbundle

我正在使用并且对 symfony2 非常陌生

使用 FOSUser 捆绑包。

/注册页面提供 - 用户名、电子邮件、密码、确认密码..

我还想使用注册表单在这里设置角色..

所以它会是

文本框 --> 用户名
文本框 --> 密码
文本框 --> 电子邮件
单选框 --> x 管理员 x 版主

我怎样才能做到这一点>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:56:05.543

User 类中的“roles”字段是数组（在 db 中序列化），因此在您的表单中您可以使用“choice”表单类型（[http://symfony.com/doc/current/reference/forms/types/choice.html](http://symfony.com/doc/current/reference/forms/types/choice.html)）使用选项 multiple=true/false & expand=true 并且在表单处理期间只需将表单字段值保存到您的用户对象

在表单字段的“选择”选项中，将数组与您的角色一起放置，例如：

```
$builder->add('roles', 'choice', array(
    'choices' => array('ROLE_USER' => 'Standard User', 'ROLE_ADMIN' => 'Administrator')
)); 
```

# php - PHP isset 和 javascript

> ID：14462478
> 
> 赞同：0
> 
> 时间：2013-01-22T15:48:19.317
> 
> 标签：php, javascript, html, forms

我一直在寻找有关如何执行此操作的几天，但我还没有找到我正在寻找的示例。我在寻找错误的东西吗？

这是我试图使用以下代码完成的工作，我正在读取我的错误代码并从错误代码中创建一个链接。

```
<p><h4>Errors Returned (if any): </h4> 
    <a href="https://www.mysite.com/test/search_form.php?query=<?php echo $ERRORCODE; ?>">
        <?php echo $ERRORCODE; ?>
    </a>
</p> 
```

然后我将此信息发布到我的搜索表单（如下）：

```
<?php
if (isset($_GET['query']))
{
    echo "javascript... and such.";
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Search - Test Site 2013</title>
  </head>
    <table border="0" cellpadding="10">
      <tr>
        <td>
          <img src="images/test.png">
        </td>
        <td>
          <h1>Search - Test Site 2013</h1>
        </td>
      </tr>
    </table>
<body>
    <form action="search.php" method="GET" name="errorsearch">
        Search by Error Code
        <input type="text" name="query" />
        <input type="submit" value="Search" name="search"/>
    </form>
</body>
</html> 
```

我正在使用 (isset($_GET['query'])) 检查错误代码是否已在 URL 中传递。我能够成功显示一条消息或一些愚蠢的东西，但我想提交表单并检查错误代码文本但仅当查询已设置时。

我的理解是 Javascript 可以做到这一点，但我不确定到底需要什么。我正在研究 Javascript 提交按钮和点击事件，但我认为这与我想要的相反。我只需要 JS 来启动按钮点击。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:55:26.023

有许多不同的方法可以做到这一点，但这个问题已经在本网站的其他地方得到了回答。这里的答案应该对您有所帮助： [停止表单提交的 JavaScript 代码](https://stackoverflow.com/questions/8664486/javascript-to-stop-form-submission)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:53:12.033

如果您需要 JS 来启动按钮单击，那么只需在 javascript 中调用函数，该函数在按钮单击时调用 -> onClick 侦听器。

例如，您可以创建 JS 布尔变量以查看是否发送了查询

var wasQuerySent = ""

如果 wasQuerySent 有一定的价值，那么你可以测试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:08:01.840

为什么要使用 Javascript？如果我理解正确，您可以使用 PHP 处理所有这些：

```
<?php
// Default to disabled state for submit button
$disabled = 'disabled="disabled"';
if (isset($_GET['query']))
{
    //echo "javascript... and such.";
    // if you get the $_GET['query'] then clear the submit's
    // disabled state
    $disabled = '';
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <title>Search - Test Site 2013</title>
</head>
    <table border="0" cellpadding="10">
    <tr>
        <td>
        <img src="images/test.png">
        </td>
        <td>
        <h1>Search - Test Site 2013</h1>
        </td>
    </tr>
    </table>
<body>
    <form action="search.php" method="GET" name="errorsearch">
        Search by Error Code
        <input type="text" name="query" />
        <input type="submit" value="Search" name="search" <?php echo $disabled; ?>/>
    </form>
</body>
</html> 
```

你也可以通过绑定到表单的提交事件来做到这一点——在 jQuery 中它是

```
jQuery('#myForm').on('submit', ...) 
```

# javafx-2 - JavaFX 2.x : XY LineChart : Y 轴上方图表上的线

> ID：14462479
> 
> 赞同：2
> 
> 时间：2013-01-22T15:48:20.107
> 
> 标签：javafx-2, linechart

此代码在图表上绘制带有黑线的 LineChart：当向左/向右滚动（鼠标左键单击并拖动）时，黑线位于 Y 左右轴上方，而黄色 XYLine 位于下方。

![在此处输入图像描述](../Images/ae8ba33048e6aded01b3a9ad09bab58e.png)

如何修改此代码以使黑线保持在 Y 轴下方？

谢谢。

```
import javafx.application.Application; 
import javafx.beans.binding.DoubleBinding;
import javafx.beans.property.SimpleDoubleProperty;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.scene.shape.Line;
import javafx.stage.Stage;

public class GridMoveAndLine extends Application {

BorderPane pane;
Line       newLine;
XYChart.Series series1 = new XYChart.Series(); 

SimpleDoubleProperty rectinitX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectY = new SimpleDoubleProperty(); 

double oldXLowerBound = -1;
double oldXUpperBound = -1;
double oldYLowerBound = -1;
double oldYUpperBound = -1;

@Override 
public void start(Stage stage) { 

final NumberAxis xAxis = new NumberAxis(1, 12, 1); 
final NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0005); 

xAxis.setAnimated(false);
yAxis.setAnimated(false);

yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) { 

@Override 
public String toString(Number object) { 
    return String.format("%7.5f", object); 
} 
}); 

final LineChart<Number, Number> lineChart = new LineChart<Number, Number>(xAxis, yAxis); 

lineChart.setCreateSymbols(false); 
lineChart.setAlternativeRowFillVisible(false); 
lineChart.setAnimated(false); 
lineChart.setLegendVisible(false);

series1.getData().add(new XYChart.Data(1, 0.53185)); 
series1.getData().add(new XYChart.Data(2, 0.532235)); 
series1.getData().add(new XYChart.Data(3, 0.53234)); 
series1.getData().add(new XYChart.Data(4, 0.538765)); 
series1.getData().add(new XYChart.Data(5, 0.53442)); 
series1.getData().add(new XYChart.Data(6, 0.534658)); 
series1.getData().add(new XYChart.Data(7, 0.53023)); 
series1.getData().add(new XYChart.Data(8, 0.53001)); 
series1.getData().add(new XYChart.Data(9, 0.53589)); 
series1.getData().add(new XYChart.Data(10, 0.53476)); 

pane = new BorderPane(); 
pane.setCenter(lineChart); 
Scene scene = new Scene(pane, 800, 600); 
lineChart.getData().addAll(series1); 

stage.setScene(scene);         

scene.setOnMouseClicked(mouseHandler); 
scene.setOnMouseDragged(mouseHandler); 
scene.setOnMouseEntered(mouseHandler); 
scene.setOnMouseExited(mouseHandler); 
scene.setOnMouseMoved(mouseHandler); 
scene.setOnMousePressed(mouseHandler); 
scene.setOnMouseReleased(mouseHandler); 
stage.show();

newLine = new Line(260, 35, 390, 280);
pane.getChildren().add(newLine);

oldXLowerBound = xAxis.getLowerBound();
oldXUpperBound = xAxis.getUpperBound();

DoubleBinding LineXaxisBinding = new DoubleBinding() {
{                                
    super.bind(xAxis.lowerBoundProperty(), xAxis.upperBoundProperty(), xAxis.widthProperty());
}
@Override
protected double computeValue() {
    double chartWidthX = xAxis.getWidth();
    double axisSpanX = xAxis.getUpperBound() - xAxis.getLowerBound();
    double displacementX = (chartWidthX / axisSpanX) * ( oldXLowerBound-  xAxis.getLowerBound()  );

    return (0 + displacementX);

}
};

newLine.translateXProperty().bind(LineXaxisBinding);
} 

EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() { 

@Override 
public void handle(MouseEvent mouseEvent) { 

if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) {             
    rectinitX.set(mouseEvent.getX()); 
} 
else if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED || mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED) { 
    LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter(); 
    NumberAxis xAxis = (NumberAxis) lineChart.getXAxis(); 

    double Tgap = xAxis.getWidth()/(xAxis.getUpperBound() - xAxis.getLowerBound()); 
    double newXlower=xAxis.getLowerBound(), newXupper=xAxis.getUpperBound();             
    double Delta=0.3;

    if(mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED){
    if(rectinitX.get() < mouseEvent.getX()){    
        newXlower=xAxis.getLowerBound()-Delta;
        newXupper=xAxis.getUpperBound()-Delta;
    }
 else if(rectinitX.get() > mouseEvent.getX()){    
        newXlower=xAxis.getLowerBound()+Delta;
        newXupper=xAxis.getUpperBound()+Delta;
    }    
    xAxis.setLowerBound( newXlower ); 
    xAxis.setUpperBound( newXupper );                        
    }                                        
    rectinitX.set(mouseEvent.getX());                                 
 } 
 } 
 }; 
public static void main(String[] args) {
    launch(args);

}
} 
```

# c - Linux 内核中的 CTR 模式

> ID：14462486
> 
> 赞同：1
> 
> 时间：2013-01-22T15:48:43.917
> 
> 标签：c, linux, linux-kernel, cryptography

我目前正在为需要 AES 加密的文件系统目的进行一些内核开发，并且遇到以下限制：

*   我必须能够加密任何长度的明文
*   填充（如果有）*不明显*
*   填充字节可能导致的开销是*不可接受的*

在纸上，有一个简单的方法可以解决这个问题：使用 CTR 加密模式！

有了这个绝妙的想法（嗯……），我很高兴地深入研究 Linux 内核的加密 API 源来学习如何开始。

在这一点上，我注意到加密功能涉及杂项功能的使用：

*   crypt_inplace**函数**。其目的是处理用户想要将密文存储在与给定明文相同的内存区域中的情况。**（与crypt_segment**相同，但有内存限制）
*   crypt_segment**函数**。它是标准的加密函数。它对整个数据块（AES 为 16 个字节）进行加密。
*   crypt_final**函数**。当给定明文的长度*L*不是底层分组密码 blocksize 的倍数时，此函数对剩余字节执行加密。

因此，使用我们的*L*字节长明文和 AES，前*L/16*块根据请求使用**crypt_segment**或**crypt_inplace进行处理。****然后使用crypt_final**对剩余的*L mod 16*个字节进行加密。

 **内部**crypt_segment**函数定义如下：（**crypt_inplace**非常相似）

```
static int crypto_ctr_crypt_segment(struct blkcipher_walk *walk,
                    struct crypto_cipher *tfm)
{
    void (*fn)(struct crypto_tfm *, u8 *, const u8 *) =
                   crypto_cipher_alg(tfm)->cia_encrypt;
    unsigned int bsize = crypto_cipher_blocksize(tfm);
    u8 *ctrblk = walk->iv;
    u8 *src = walk->src.virt.addr;
    u8 *dst = walk->dst.virt.addr;
    unsigned int nbytes = walk->nbytes;

    do {
        /* create keystream */
        fn(crypto_cipher_tfm(tfm), dst, ctrblk);
        crypto_xor(dst, src, bsize);

        /* increment counter in counterblock */
        crypto_inc(ctrblk, bsize);

        src += bsize;
        dst += bsize;
    } while ((nbytes -= bsize) >= bsize);

    return nbytes;
} 
```

如您所见，计数器以块大小为基础递增。在大多数用例中，这不是问题，但请考虑这种情况：

1.  *在给定位置p*写入请求（例如，这可以是硬盘驱动器上的*（扇区、偏移）*特定值）：11 字节长的明文
2.  *在p+3*处读取 8 个字节的请求：这里，我们希望从写入的密文中取回初始明文的最后 8 个字节。

第一步将通过在加密序列中调用**crypt_final来完成。**然后，将 11 个加密字节写入正确的位置。但是当我们想要检索这块数据的最后 8 个字节时，由于“块范围”加密，我们需要存储在*p*、*p+1*和*p+2*中的前 3 个字节来执行解密操作。

显然，从文件系统的角度来看，当请求读取时，如果内核不做出一些与硬件相关的假设，就*没有办法*知道这种事情。

因此，这是我的问题：有没有办法将 CTR 模式设置为*始终*以字节为基础执行（解密）操作，或者我应该创建自己的 CTR 模式实现来强制执行此操作？（我在 ctr 源代码中没有找到任何入口点来做这个配置操作，我可能漏掉了什么）

在此先感谢，我希望我没有用这个大帖子惊呆你！

*PS：这篇文章中的代码片段可以在 Linux Kernel 源代码树的 crypto 目录下的 ctr.c 文件中找到。显示的版本来自 3.8-rc3 内核版本。*

* * *

## 编辑 ：

实际上，CTR 模式旨在处理任意长度的数据。我会回忆起 ISO/IEC 10116 规范中的描述。

假设我们的明文*P*被分成等长的块*( P [i] ) [0 < i < n]* ( *j*位)。
令*K*为加密提供的密钥，*IV*为计数器的初始化向量。
密文*C*将像明文*P*一样被分成块*( C [i] ) [0 < i < n]*。 CTR 模式引入了一个计数器，该计数器在每个已处理的块处走动。也就是说，我们将调用用于加密（或解密）块*P* *[i]*（或*C* *[i]* *) *CTR [i]*
最后，让*CTR [1]* = *IV*
使用这些符号，计算可能如下所示：*

 *> FOR i 从 1 到 n DO
> 
> 1.  Y = AES_encrypt( *CTR [i]* , *K* ) <- Y 是 16 字节长
> 2.  E = Truncate(Y, j) <- 只保留 Y 的最左边的*j*位
> 3.  *C [i]* = *P [i]* XOR E
> 4.  *CTR [i+1]* = ComputeNextCTR( *CTR [i]* ) <- 通常**ComputeNextCTR**是一个简单的增量。
> 
> 完毕

在 Linux 内核中的 CTR 版本中，此行为是通过*j*采用底层块密码块大小（128 位，AES）的值来强制执行的，除了最后一步，如果给定的明文没有合适的长度，则会发生截断.

我的问题是：有没有办法告诉加密 API 应用我想要的*j*参数？对我来说，答案似乎是“不”，所以我必须“重新发明”轮子并重新实现 CTR 模式才能获得这个额外的功能。由于我可能遗漏了一些东西，我将感谢能清楚说明这一点的人。

奖励一：如果答案是“否”，我们将非常欢迎快速了解 Crypto API的*algapi如何工作（我目前正在研究这个）。*

再次提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:59:04.127

在挖掘了加密资源之后，我可以说......不，我无法设置我在问题中为 CTR 模式引入的*j参数。*

尽管如此，我将提供有关内部加密 API 的一些细节，以使这个答案具有相关性。此处公开的细节描述了内部低级 API，以在加密 API 中添加对新算法/模式的支持。

* * *

## 加密对象

首先，加密 API 管理各种*对象*的集合。我使用*对象*这个词是因为即使它是 C 编程，代码显然有点面向对象。有三个主要对象：

*   算法：`struct crypto_alg`
*   模板：`struct crypto_template`
*   实例：`struct crypto_instance`和`struct crypto_spawn`
*   变换 :`struct crypto_tfm`和朋友 ( `struct crypto_blkcipher`, ...)。

第一类，就是这个内兽的里程碑。当一个人想要创建一个新算法时，他只需要创建一个`struct crypto_alg`，填写适当的字段并注册它。
模板有点不同，因为它们依赖于给定的算法结构。在运行时需要时传递算法对象。因此，模板是创建自定义执行模式的合适对象（就像我最初的问题中暗示的那样）。
然后，实例和生成物在内部处理这个小世界如何与外部和自身交互。
最后，转换结构是暴露于外部接口的“一次性”特定结构（这些将用于需要加密/解密某些东西的其他模块）。

* * *

## 创建新模板

基本上，该过程相当简单，可以从现有模板开始，例如在 ctr.c 文件下找到的模板。不过，我将展示一些细节。

* * *

## 加密API如何处理上述内容

这部分将介绍内部加密部分处理模板或算法创建的方式以及它向用户提供加密功能的方式（按*用户*，了解*其他模块*）。

*注意：这个答案正在建设中，我会定期编辑它以添加额外的信息。****

# android - 哪里可以获得完整的 Android 的 gdb 二进制文件？

> ID：14462488
> 
> 赞同：7
> 
> 时间：2013-01-22T15:49:01.373
> 
> 标签：android, gdb

对于使用 gdb 调试 Android 应用程序，我想直接在 Android 设备上使用独立版本的 gdb。

**是否有任何适用于 Android 的预构建二进制版本的 gdb？**

请注意，我正在搜索适用于 Android 的完整 gdb 版本，**而不是残缺的 gdbserver**。

背景：我知道 Android NDK 包含 gdbserver，但是如果您不调试自己的程序，您有设置 gdbserver 的源代码，而 gdb 主机部分的源代码非常复杂。我尝试了很长时间，但现在我已经完成了——它给整个调试过程增加了太多的复杂性和陷阱。

此外，我尝试使用由 android-ndk 生成的独立工具链自行构建 gdb - 但由于代码错误，该过程失败。

# java - 数据未采取行动形式

> ID：14462493
> 
> 赞同：0
> 
> 时间：2013-01-22T15:49:19.167
> 
> 标签：java, struts

大家好，我是java struts的初学者，我正在创建简单的注册表单，但在提交表单后，null正在插入数据库表中。我已经创建了表单类名称作为RegistrationForm.java程序正在运行，但null正在插入我的操作代码是---

```
public class RegistrationAction extends Action {    
     private Connection con = null;    
     public ActionForward execute(ActionMapping mapping, ActionForm form,  
                HttpServletRequest request, HttpServletResponse response)  
                throws Exception {  

            ActionErrors errors = new ActionErrors();  

            RegistrationForm objReg = new RegistrationForm();
            String userName = (String) objReg.getTxtusername();
            String userPass = (String) objReg.getTxtpassword();  

            Class.forName("com.mysql.jdbc.Driver").newInstance();    
            con = DriverManager.getConnection("jdbc:mysql:///test", "root", "");    
            if (!con.isClosed()) {   
                PreparedStatement ps = (PreparedStatement)             con.prepareStatement("INSERT   >INTO tblUserdetails(fldUsername,fldPassword) VALUES (?,?) ");  

                ps.setString(1, userName);  
                ps.setString(2, userPass);  

                ps.execute();  
            } else {  
                errors.add("SQL", new ActionMessage("error.SQLConnectivity"));  
            }  
            return mapping.findForward(SUCCESS);  
       }  
} 
```

* * *

```
package com.vaannila.form;

import org.apache.struts.action.ActionForm;

public class RegistrationForm extends ActionForm {
    private String txtusername;
    private String txtpassword;
    private String txtrepassword;
    private String txtemail;

    public String getTxtusername() {
        return txtusername;
    }

    public void setTxtusername(String txtusername) {
        this.txtusername = txtusername;
    }

    public String getTxtpassword() {
        return txtpassword;
    }

    public void setTxtpassword(String txtpassword) {
        this.txtpassword = txtpassword;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:06:15.020

您创建了一个全新的对象 RegistrationForm，因此它没有任何价值。它应该是

```
RegistrationForm objReg = (RegistrationForm) form; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:06:24.383

您正在创建一个新的`RegistrationForm`：

```
RegistrationForm objReg = new RegistrationForm(); 
```

您想使用框架提供的*现有*表单：

```
RegistrationForm objReg = (RegistrationForm) form; 
```

`objReg`是一个令人讨厌的名字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-25T15:35:28.427

您的表单字段名称和您在 ActionForm 中提供的名称应该相同。例如：

helloWorld.jsp

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Hello World</title>
</head>
<body>
<form action="login.do">
<pre>
User Name : <input type="text" name="uname"/>
Password : <input type="password" name="pass"/>
<input type="submit" value="LogIN">
</pre>
</form>
</body>
</html> 
```

helloWorldForm.java

```
private String uname,pass;

and in struts ur entry should like

    <action path="/login" type="com.app.core.biswa.AppLoginAction" name="helloWorldForm" scope="session" validate="true" input="/helloWorld.jsp"> 
```

它肯定会奏效。

# html - 我的图像地图覆盖了我的整个网站，文字，表格等，如何解决？

> ID：14462497
> 
> 赞同：0
> 
> 时间：2013-01-22T15:49:24.163
> 
> 标签：html, css, image, map, imagemap

php中的图像映射

```
<html>
 <body>
 <img style="position: absolute; left:0; top: 0;" border="0" src="images/gen.jpg" usemap="#Map1">
 <map id="Map1" name="Map1">
 <area shape="rect" coords="136,331,211,351" name="home" a href="home.php">
 <area shape="rect" coords="136,379,244,400" name="aboutus" a href="aboutus.php">
 <area shape="rect" coords="136,426,247,447" name="calculate" a href="">
 <area shape="rect" coords="136,475,262,495" name="contactus" a href="">

</body>
 </html> 
```

我的 CSS

```
 @charset "utf-8";
 /* CSS Document */

<style type="text/css">

A:link
 { text-decoration: none; color: black; cursor:crosshair; }
 A:visited
 { text-decoration: none; cursor:crosshair; color: black; }
 A:active
 { text-decoration: none; cursor:crosshair; color:black; }
 A:hover {
 text-decoration: none; color: #705551; background-color:black; font weight:none; cursor:help;}

 body 
{ background: #c0c2c3; 
font-family: georgia; 
color: #4a458d; 
font-size: 10pt;
 cursor: s-resize;

}

td
 { font-family: Verdana;
 font-size: 10px; 
color: #4a458d; 
cursor: crosshair; 
text-align: left;
 margin: 0px;}
 }

textarea, input, select {
 font-family : trebuchet ms; 
font-size: 10px; 
color:#4a458d;
 cursor: crosshair;
 border-color: silver; 
border-style: solid; 
border-top-width: 1px; 
border-left-width: 1px;
 border-right-width: 1px; 
border-bottom-width: 1px;
 }

.head 
{font-family: georgia; 
font-weight: none;
 letter-spacing:-3px;
 font-size: 17pt; 
line-height: 16pt;
 color: #48457b;
 border-top: 0px solid;
 border-bottom: 1px solid black;
 border-right: 0px solid;
 border-color: none;
 background-color:#c0c2c3;
 text-align: left;
 text-transform: uppercase;
 }

.head2 
{font-family: georgia; 
font-weight: none;
 letter-spacing:2px;
 font-size: 7pt; 
line-height: 10pt;
 color: #443f80;
 border-top: 0px solid;
 border-bottom: 1px solid black;
 border-right: 0px solid;
 border-color: none;
 background-color:#c0c2c3;
 text-align: left;
 text-transform: none;
 } 
```

我在php中的登录页面代码

```
<html>
<body>
 <link rel="stylesheet" href="style.css">
 <?php
 include("map.php"); 
?> 
<form method="post" action="checklogin.php">
 <table width="450" height="88" border="0" align="left">
 <tr>
 <td width="180">Enter your email</td>
 <td width="270">
 <input name="email" type="text" size="30" /></td>
 <tr>
 <td>Enter your password</td>
 <td><input type="password" name="password" type="text" size="30" /></td></tr>

<tr><td colspan="2"><input type="submit" name="Submit" value="Login" /></td></tr></table>

</form>
 </div>

</body></html> 
```

我不知道出了什么问题，但是我在登录页面中输入的任何内容都不会出现，除非我删除我的图像地图，它隐藏在图像地图的后面，但我希望它出现在我的图像地图上，在左侧导航旁边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:07:29.017

# 快速而肮脏的解决方案

更改以下行

```
<img style="position: absolute; left:0; top: 0;" border="0" src="images/gen.jpg" usemap="#Map1"> 
```

对于这样的事情

```
<img id="myMap" src="images/gen.jpg" usemap="#Map1"> 
```

并在您的 CSS 文件中添加

```
#myMap {
position: absolute;
left:0; 
top: 0;
border:0;
z-index:-999;
} 
```

完整代码在这里：[http](http://pastebin.com/3HnhkJ8x) ://pastebin.com/3HnhkJ8x -- 在最新版本的 Chrome 和 Firefox 上测试，未在 IE 上测试。

# 推荐解决方案

您使用的技术在很久以前就变得*非常不受欢迎，例如：*

*   图像映射
*   用于格式化的表格

此外，您正在混合内联 CSS 和单独的 CSS 文件；显然您正在使用 PHP 在另一个 HTML 文件中包含一个 HTML 文件，每个文件都有自己的标签。

我强烈建议您学习和提高您的 HTML 和 CSS 知识，并学习最佳行业实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:54:31.563

您在图像上使用位置：绝对。添加 z-index:1; 然后将其余部分包装在一个容器中，也用一个绝对值，并给它一个 z-index:2

**编辑**

一页解决方案，仍然是不好的形式，但是：

```
<html>
<head> 
    <style>

    A:link
     { text-decoration: none; color: black; cursor:crosshair; }
     A:visited
     { text-decoration: none; cursor:crosshair; color: black; }
     A:active
     { text-decoration: none; cursor:crosshair; color:black; }
     A:hover {
     text-decoration: none; color: #705551; background-color:black; font weight:none; cursor:help;}

     body 
    { background: #c0c2c3; 
    font-family: georgia; 
    color: #4a458d; 
    font-size: 10pt;
     cursor: s-resize;

    }

    td
     { font-family: Verdana;
     font-size: 10px; 
    color: #4a458d; 
    cursor: crosshair; 
    text-align: left;
     margin: 0px;}
     }

     .imap{
         position: absolute; left:0; top: 0; z-index:1;
     }
     .pgwrap{
         position:absolute; left:0; top: 0; z-index:2;
     }

    </style>
</head>
<body>
    <div class="pgwrap">
        <div class="imap">
         <img style="" border="0" src="images/gen.jpg" usemap="#Map1">
         <map id="Map1" name="Map1">
         <area shape="rect" coords="136,331,211,351" name="home" a href="home.php">
         <area shape="rect" coords="136,379,244,400" name="aboutus" a href="aboutus.php">
         <area shape="rect" coords="136,426,247,447" name="calculate" a href="">
         <area shape="rect" coords="136,475,262,495" name="contactus" a href="">
         </map>
        </div>

        <form method="post" action="checklogin.php">
         <table width="450" height="88" border="0" align="left">
         <tr>
         <td width="180">Enter your email</td>
         <td width="270">
         <input name="email" type="text" size="30" /></td>
         <tr>
         <td>Enter your password</td>
         <td><input type="password" name="password" size="30" /></td></tr>
         </tr>
        <tr><td colspan="2"><input type="submit" name="Submit" value="Login" /></td></tr></table>

        </form>

    </div>
</body> 
```

这个^就是我说的。

# typo3 - TYPO3 tt_news & realurl

> ID：14462498
> 
> 赞同：0
> 
> 时间：2013-01-22T15:49:26.083
> 
> 标签：typo3, tt-news, realurl

有人可以帮我配置 realurl 和 tt_news 吗？现在我文章的网址是： **news/tx_ttnews%5Btt_news%5D=2&cHash=4b99bd1be238096e329a50f38cf34b57**

但我想要这样的东西： **news/title-of-my-article**。

我正在使用最新的 Typo3（版本 6.0）

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:59:40.617

tt_news 文件夹中有示例 RealURL 配置，只需将其元素复制到您自己的 realurl 手动配置中：`typo3conf/ext/tt_news/res/realUrl_example_setup.txt`

对你来说最有趣的是`postVarSets`而且可能`fileName`。

**编辑**

为了摆脱一些你需要使用的部分`fixedPostVars`，如 Dmitry Dulepov 的已知帖子中所述（*值得一读，他是 RealURL 的创建者*）：

1.  [RealURL 变得简单 1](http://www.dmitry-dulepov.com/2008/05/realurl-made-easy-part-1.html)
2.  [RealURL 变得简单 2](http://www.dmitry-dulepov.com/2008/06/realurl-made-easy-part-2.html)

# jvm - 如何将 ActivePivot 实例绑定到物理内核

> ID：14462500
> 
> 赞同：0
> 
> 时间：2013-01-22T15:49:29.407
> 
> 标签：jvm, activepivot

我们在同一台服务器上部署了两个 ActivePivot 实例（相互化）。

服务器有 12 个逻辑核心。我们有一个用于 ActivePivot 实例 A 的 4 核许可证和一个用于 ActivePivot 实例 B 的 2 核许可证。

我们如何确定两个实例各自使用自己的内核（而不是低效地共享相同的内核）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:55:06.337

ActivePivot 在 JVM 中运行，因此您可以通过将托管 ActivePivot 实例的 JVM 进程绑定到一组内核来实现。

所有操作系统都有将进程绑定到内核的命令，Windows 中的 /affinity ( [http://blog.tune-up.com/windows-insights/assign-processor-affinity-to-improve-performance/](http://blog.tune-up.com/windows-insights/assign-processor-affinity-to-improve-performance/) ) 和 Linux 中的任务集（[http://www.cyberciti.biz/faq/taskset-cpu-affinity-command/](http://www.cyberciti.biz/faq/taskset-cpu-affinity-command/)）。同样，诀窍是将 JVM 进程绑定到您想要的一组内核。如果您在 Apache Tomcat 中运行 ActivePivot，则意味着使用绑定命令启动 Tomcat 本身。

**但我不会费心在您的用例中强制绑定**。操作系统的线程调度程序可能会很好地在两个实例之间分配线程，并防止它们隐藏在相同的物理内核上。考虑到系统的其他线程，这种调度是完全动态的。

我会考虑手动绑定的唯一情况是具有 NUMA 架构的大型服务器。因为将 JVM 隐藏到 NUMA 节点可以提高性能（请参阅[NUMA 架构如何影响 ActivePivot 的性能？](https://stackoverflow.com/questions/13160456/how-does-numa-architecture-affect-the-performance-of-activepivot)）。

# c# - 通过单击重命名文件/文件夹（在使用列表视图的自制窗口资源管理器中）

> ID：14462502
> 
> 赞同：0
> 
> 时间：2013-01-22T15:49:33.773
> 
> 标签：c#, winforms, listview, contextmenu, file-rename

当我单击文件夹时，我想在运行时在我的窗口资源管理器中重命名文件夹/文件...到目前为止，我知道 file.move 用于重命名，但如何在运行时输入文件名？

```
 private void renameToolStripMenuItem_Click(object sender, EventArgs e)
{
    try
    {
        string DestinationFolder = ListviewCurrentFolderPath;
        string CurrentName = DestinationFolder + "FileName";//in filename i want to edit value on run time

        if (Directory.Exists(DestinationFolder))
        {

           // Directory.Move( Path.Combine(new string[] {              DestinationFolder,Path.GetFileName(file) }));
            File.Move( Path.Combine(new string[] { DestinationFolder, CurrentName }));
            PopulateListView(DestinationFolder);

        }
    }
    catch (IOException ios)
    {
        MessageBox.Show(ios.ToString());

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:05:08.760

可能您需要使用[SaveFileDialog Class](http://msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog.aspx)。您可以使用`DestinationFolder`FileDialog.InitialDirectory[属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.initialdirectory.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:52:23.660

*我猜你的意思是“在运行时重命名”，重命名影响重命名文件夹的列表视图项目的标签......*

所以，首先你应该看看

1.  [ListView.LabelEdit](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.labeledit.aspx) - 启用“重命名”
2.  [ListView.BeforeLabel编辑](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.beforelabeledit.aspx)
3.  [ListView.AfterLabel编辑](http://msdn.microsoft.com/en-us/library/system.windows.forms.labelediteventhandler.aspx)

我希望这个小样本可以帮助您找到正确的方法:)

```
 using System;
    using System.IO;
    using System.Windows.Forms;

    namespace WindowsFormsApplication6
    {
        public partial class Form1 : Form
        {
            private string destinationFolder;
            private ListView listView1;

            public Form1()
            {
                // Set destinationFolder to MyDocuments - for test
                this.destinationFolder = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);

                InitializeComponent();

                this.listView1.Clear();
                foreach (var dir in Directory.GetDirectories(destinationFolder))
                {
                    this.listView1.Items.Add(new ListViewItem() { Name = dir, Text = Path.GetFileName(dir) });
                }

            }

            private void SetListViewItemName(int index, string name)
            {
                if (this.listView1.Items.Count < index)
                {
                    this.listView1.Items[index].Name = name;
                }
            }

            private string GetListViewItemText(int index)
            {
                if (this.listView1.Items.Count < index)
                {
                    return this.listView1.Items[index].Text;
                }
                else
                {
                    return String.Empty;
                }
            }

            private void listView1_AfterLabelEdit(object sender, LabelEditEventArgs e)
            {
                try
                {
                    string itemText = GetListViewItemText(e.Item);
                    string sourceDirName = Path.Combine(new string[] { this.destinationFolder, itemText });
                    string destDirName = Path.Combine(new string[] { this.destinationFolder, e.Label });

                    // Rename the old directory.
                    Directory.Move(sourceDirName, destDirName);
                    SetListViewItemName(e.Item, destDirName);
                }
                catch (Exception ex)
                {
                    // Error occured, cancel edit.
                    // Empty text, cancel edit.
                    // There are few more things to check: max pathlength, invalid chars etc.
                    e.CancelEdit = true;
                }
            }

            private void InitializeComponent()
            {
                this.listView1 = new System.Windows.Forms.ListView();
                this.SuspendLayout();
                // 
                // listView1
                // 
                this.listView1.Dock = System.Windows.Forms.DockStyle.Fill;
                this.listView1.LabelEdit = true;
                this.listView1.Location = new System.Drawing.Point(0, 0);
                this.listView1.Name = "listView1";
                this.listView1.Size = new System.Drawing.Size(284, 262);
                this.listView1.TabIndex = 0;
                this.listView1.UseCompatibleStateImageBehavior = false;
                this.listView1.View = System.Windows.Forms.View.List;
                this.listView1.AfterLabelEdit += new System.Windows.Forms.LabelEditEventHandler(this.listView1_AfterLabelEdit);
                //this.listView1.BeforeLabelEdit += new System.Windows.Forms.LabelEditEventHandler(this.listView1_BeforeLabelEdit);
                // 
                // Form1
                // 
                this.ClientSize = new System.Drawing.Size(284, 262);
                this.Controls.Add(this.listView1);
                this.Name = "Form1";
                this.ResumeLayout(false);

            }
        }
    } 
```

# jquery - 显示一个 div 并隐藏其他

> ID：14462504
> 
> 赞同：0
> 
> 时间：2013-01-22T15:49:36.363
> 
> 标签：jquery, html, show-hide

我刚做了这个脚本。当您单击一个链接时，它会显示一个具有相同链接 ID 的 div，并隐藏其他可隐藏的类。

```
function showhide(id) {
      if (document.getElementById) {
        var divid = document.getElementById(id);
        var divs = document.getElementsByClassName("hideable");
        for (var i = 0; i < divs.length; i = i + 1) {
          $(divs[i]).fadeOut("slow");
        }
        $(divid).fadeIn("slow");
      }
      return false;
    } 
```

但是，当我点击一个链接时，第一个 div 只是被隐藏而另一个被显示，它看起来真的很糟糕。如何在没有动画的情况下隐藏其他 div 并显示带有动画的 div。

我试过 $(divid).style.display = "none"; 但它不会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:51:08.763

.hide() 将在没有动画的情况下隐藏

在你的情况下：

```
$(divs[i]).hide(); 
```

# file - Apache Camel 和 FTP 处理

> ID：14462505
> 
> 赞同：0
> 
> 时间：2013-01-22T15:49:39.483
> 
> 标签：file, ftp, download, apache-camel

我们正在尝试在 Camel 中建立一个进程服务器。我们有几个客户端，通过 FTP 提供文件。我们必须镜像 ftp 文件，但我们只想下载我们还没有的文件。客户端的服务器必须保持不变，因此不允许更改，只能读取。

```
String to = DownloadFolder.getInstance().getDownloadFolder() + File.separator + "test";
                from("ftp://user@server/downloads/&binary=true&stepwise=false&localWorkDirectory=/tmp")//
                        .process(new ProcessCheckForDownload(to))//
                        .to("file://" + to + "?keepLastModified=true")//
                        .to("jms:queue:FTP_FILE_RECEIVED"); 
```

问题是，在我检查下载之前 ftp 正在下载文件。当设置download=false时，我可以检查下载，但是如何继续。至少现在我无法处理单个文件进行下载。下一个问题是，这项工作被破坏了，因为 jms 想要获取临时文件，而不是最终文件。

也许有人对如何解决这个问题有提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:09:40.817

该文件以及 FTP 组件都内置了此功能。它被称为[幂等消费者](http://camel.apache.org/idempotent-consumer.html)。`idempotent=true`基本上，您可以通过在端点上打开此功能。

默认的幂等 repo 无法在服务器重新启动后继续存在，因为它将有关已读取文件的数据存储在内存中。您可以改用持久性幂等存储库，例如[基于文件的幂等存储库](http://camel.apache.org/file2#File2-Usingafilebasedidempotentrepository)（或某些[数据库](http://camel.apache.org/file2#File2-UsingaJPAbasedidempotentrepository)存储库，或您的自定义类）。

[文件](http://camel.apache.org/file2)页面上有很多例子，因为 FTP 组件继承自 File，同样的事情也适用（大部分）。

顺便说一句，该`download=false`功能仅适用于尚未发布的 Camel 2.11。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:42:38.757

我认为我们必须扩展 GenericFileConsumer 的 isValidFile 方法。

```
protected boolean isValidFile(GenericFile<T> file, boolean isDirectory) {
        if (!isMatched(file, isDirectory)) {
            log.trace("File did not match. Will skip this file: {}", file);
            return false;
        } else if (endpoint.isIdempotent() && endpoint.getIdempotentRepository()**.contains(file.getAbsoluteFilePath())**) {
            log.trace("This consumer is idempotent and the file has been consumed before. Will skip this file: {}", file);
            return false;
        }    
        // file matched
        return true;
    } 
```

我们必须生成我们自己的包含大小和上次更改日期的密钥。我认为这会奏效。

```
.contains(file.getAbsoluteFilePath()+":"+file.getFileLength()+":"+file.getLastModified()) 
```

我们所要做的就是创建我们自己的消费者。

# math - 计算径向速度

> ID：14462511
> 
> 赞同：3
> 
> 时间：2013-01-22T15:49:54.833
> 
> 标签：math, lua, physics

我正在尝试模拟多普勒频移雷达中的噪声过滤。它应该过滤掉相对于雷达移动低于 25 m/s 的物体（接近或远离）。应该有两种方法可以避免被雷达检测到：如果物体在任何方向移动但速度低于 25 m/s，或者以任何速度移动但垂直于（或者更确切地说，绕行）雷达。在这两种情况下，物体相对于静止雷达的径向速度应低于 25 m/s，从而欺骗雷达将其作为噪声滤除。我知道物体的位置和速度矢量（2D 和 3D）。在数学方面，我完全是个白痴，所以我无法理解这一点。请问有什么帮助吗？

编辑：格式错误的问题。我想获得相对于雷达的真实径向速度，并过滤移动速度超过 25 m/s 但相对航向会使朝向雷达的径向速度小于 25 m/s 的物体。一个示例可能是以 30 m/s 的速度移动且与雷达垂直 45 度的物体将被过滤掉，但如果该物体以 300 m/s 的速度移动，则不会。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:01:38.457

我不知道任何 Lua，但由于这是一个纯粹的数学问题，数学伪代码应该足够了。

设`r`为雷达`x`的位置，为物体的位置，为`v`物体的速度矢量（以米/秒为单位）。所有这些都是二维或三维向量，具体取决于您是在二维还是三维中工作。

速度条件非常简单：只需取速度矢量的[范数](http://en.wikipedia.org/wiki/Norm_%28mathematics%29#Euclidean_norm)`v`并将其与 25 m/s 的阈值进行比较。

要判断物体是否在雷达上盘旋，计算从雷达到物体的矢量，即`x-r`，并检查它是否垂直于速度矢量；你可以通过计算[标量积](http://en.wikipedia.org/wiki/Scalar_product)来做到这一点，当两个向量垂直时它变为零。在实践中，您将使用大于零的小阈值来允许两个向量稍微不垂直。

在伪代码中，这变为：

```
if v.norm()<25 or v.scalar_product(x-r)<0.05
    Ignore object
end 
```

您必须了解如何在 Lua 中计算[规范](http://en.wikipedia.org/wiki/Norm_%28mathematics%29#Euclidean_norm)和[标量产品](http://en.wikipedia.org/wiki/Scalar_product)（或者，如果失败，请按照链接页面中的说明自行计算它们）。

**回答已编辑的问题（关闭速度）**

标量积对于您修改后的问题也很方便。您获得闭合速度为

```
v_closure = v.scalar_product(r-x)/norm(r-x) 
```

请注意，结果是有符号的——如果物体向雷达移动，则为正，如果远离雷达，则为负。然后，您将像这样进行噪声过滤检查：

```
if abs(v_closure)<25
    Ignore object
end 
```

所以从某种意义上说，这个修改后的测试比原来的版本还要简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T14:33:17.283

马丁的回答很好，但只是一个可能的简化，考虑到无论如何你都必须计算 Cos(Theta)，简化为

v_closure = norm(v)Cos(Theta)

其中 Theta 是向量 (rx) 和 v 之间的角度

# php - php和mysql中增值税的小数精度

> ID：14462515
> 
> 赞同：0
> 
> 时间：2013-01-22T15:50:00.400
> 
> 标签：php, mysql, floating

我有一个我自己无法解决的问题，我在想我可以被推到这里以获得在 php 和 mysql 中计算增值税价格的最佳精度。

例如：

```
I have the gross price = 1199
The TAX Amount is      = 24
to extract the vat     = 1199 / 1.24 = 966.93548387096 round(966.93548387096,2) = 966.94
ok
now this value will be saved in mysql with decimal 12,2

Now, if you add the vat = 966.94 * 24 / 100 = 232.0656 round(232.0656,2) = 232.07
Final                   = 966.94 + 232.07 = 1199.01 
```

我的问题是，我怎样才能在不浮动的情况下获得 1199 ？

任何帮助都将不胜感激。！

更新：

数据库中保存的值是 966.94，从中应用增值税金额。

当我在数据库中引入价格时，一个选项可以是用 4 位小数保存值，但为此我需要覆盖一个数组来提取列并取出增值税。

喜欢：

```
$arrResult = array();
            $handle = fopen("uploads/csv/".$csv, "r");
            if( $handle ) {
            while (($row = fgetcsv($handle, 1000, ",")) !== FALSE) {
            $arrResult[] = $row;
            }
            fclose($handle);
            }
            $titles = array_shift($arrResult);
            // need to take out the price and apply price / 1.24 and save the value as 4 decimal in mysql
            $keys = array('code', 'price');

            $final = array();

                    foreach ( $arrResult as $key => $value ) {
                                $final[] = array_combine($keys, $value);
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:05:03.650

您可以使用`CAST()`MySQL 的功能。

**示例**：

```
mysql> select 1199.01 as floating, cast( 1199.01 as signed ) as non_floating;
+----------+--------------+
| floating | non_floating |
+----------+--------------+
|  1199.01 |         1199 |
+----------+--------------+
1 row in set (0.00 sec) 
```

**参考**：
***[MySQL 中的类型转换](http://top-frog.com/2009/08/10/type-casting-in-mysql-one-possible-application/)***

```
CAST can be used to convert to the following types:

 1\. BINARY[(N)]
 2\. CHAR[(N)] DATE
 3\. DATETIME DECI
 4\. MAL[(M[,D])]
 5\. SIGNED [INTEGER]
 6\. TIME
 7\. UNSIGNED [INTEGER] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-28T18:55:09.413

这是一个老问题，但你永远不应该使用浮点数来表示货币金额。

这是因为浮点数给计算带来了很多麻烦（如果你在网上搜索，你会发现大量的文章解释了这个问题）。

因此，解决方案是使用像[https://github.com/moneyphp/money这样的值对象](https://github.com/moneyphp/money)

然后，您将在数据库中保存最小单位的简单整数的基本金额。

这意味着 100,00 欧元以`10000`美分表示。

仅对整数进行操作（并在内部使用字符串）这个库非常非常精确！

# c# - 列表中所有元素的索引最小值

> ID：14462516
> 
> 赞同：0
> 
> 时间：2013-01-22T15:50:00.683
> 
> 标签：c#, collections

让我再试一次。我有两门课：

```
class OrdenO
{
    public int id_orden_O { get; set; }
    public int Ei_O { get; set; }
    public int Ii_O { get; set; }
    public int Si_O { get; set; }
    public int DTi_O { get; set; }
    public int Ui_O { get; set; }
    public int K_O { get; set; }
    public int Q_O { get; set; }
    public List<int> TT;
} 
```

和类穆勒

```
class Muelle
{
    public int id_muelle { get; set; }
    public int Lk { get; set; }
    public int Sk { get; set; }
} 
```

在这里，我在两个列表集合中都有所有元素：

```
List<OrdenO> myClassArray = new List<OrdenO>()
{
    new OrdenO{id_orden_O=1, Ei_O= 60, Ii_O= 180, Si_O=0, DTi_O=0, Ui_O=0, K_O=0, Q_O=0, TT= new List<int>{ 36, 36}},
    new OrdenO{id_orden_O=2, Ei_O= 0, Ii_O= 120, Si_O=0, DTi_O=0, Ui_O=0, K_O=0, Q_O=0, TT= new List<int>{ 18, 8}},
};
List<Muelle> mydock = new List<Muelle>()
{
    new Muelle{id_muelle=1, Lk=0, Sk=0},
    new Muelle{id_muelle=2, Lk=0, Sk=0}
}; 
```

在我的列表中，`myclassarray`我有另一个列表`TT`，我想知道如何获取 的`TT`每个元素的索引最小值`myclassarray`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:55:02.977

`TT`假设我对您的理解正确-您想从 中的每个项目中提取每个列表的最小值`myClassArray`，应该这样做：

```
foreach (var item in myClassArray)
{
    var min = item.TT.Min();
    // use min
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:57:25.143

```
foreach (var i in myClassArray)
{
  int index = i.TT.IndexOf(i.TT.Min());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:57:49.767

也许：

```
IEnumerable<int> allminTTIndices = myClassArray
        .Select(o => o.TT.Select((tt, i) => new {TT=tt,Index=i})
                         .OrderBy(x => x.TT)
                         .First().Index); 
```

它返回`TT`中每个项目的最低值的所有索引`myClassArray`。

但是，其目的`List<Muelle> mydock = new List<Muelle>()`仍不清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:02:40.520

我想你想要 TT 的最小值

var 最低 = myClassArray.SelectMany(o => o.TT).OrderBy(i => i).FirstOrDefault(); 或者

var 最低 = myClassArray.SelectMany(o => o.TT).Min();

# javascript - 这个交互式函数浏览器的 javascript 库是什么？

> ID：14462517
> 
> 赞同：3
> 
> 时间：2013-01-22T15:50:01.590
> 
> 标签：javascript, jquery, plot, interactive

我想创建一个交互式网页，用户可以看到特定多参数函数的绘图在改变其各种参数时如何受到影响。

我想说明的函数很复杂，但是为了这个问题，假设它是 f(t) = A sin(ω t + φ)。在这种情况下，网页将具有滑块或刻度盘，让用户可以交互地拨出 A、ω 和 φ 的值。函数图将同时变化，反映三个参数的瞬时值。

[（我为此研究了 d3.js，但我不相信它是适合这项工作的工具（令人惊奇的是否则），主要是因为 d3.js 似乎针对处理预先存在的数据进行了优化，而，对于我想到的应用程序，真的没有数据。我意识到可以从函数中创建“合成数据”，但这有点“将问题强制装入工具中”。IOW，我的问题不是d3.js 是否*可以*使用 d3.js 实现这样的 webapp，而是它是否是完成这项工作的最佳工具。）]

当我进一步研究这个问题时，我发现了一大堆用于图形的 JS 库，但我发现的库似乎都没有专注于绘制数学表达式。我可以使用一些指导来确定所有 JS 图形库中的哪一个最适合我上面描述的任务。特别是，它必须为绘图（数学）函数（如 sqrt、sine、log 等）提供良好的支持，并为我描述的交互式重新绘图类型提供良好的支持。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-25T10:10:24.497

我相信您可以使用[Pre3D](http://deanm.github.io/pre3d/)作为一个坚实的起点。

看一下使用 Pre3D 的[例子](http://www.graphycalc.com/)。使用几个可以更改选择参数的滑块，您可以相当轻松地实现良好的交互性、重新绘图等。Pre3D 中还有一个小型解析器，您也可以使用它。

# jquery - jQuery动态列表样式

> ID：14462518
> 
> 赞同：1
> 
> 时间：2013-01-22T15:50:01.877
> 
> 标签：jquery, jquery-mobile

我写了以下代码

```
$(xml).find('list').each(function() {
  $("#content_groups ul").append("<li><a href='#membergroup' onclick='functionare(\"" + $(this).attr("name") + "\")'>" + $(this).attr('name') + "</a><input type='checkbox' name='checkbox-0' id='checkbox-mini-0' class='custom' data-mini='true' /></li>");
});
$("#content_groups ul").listview('refresh'); 
```

结果并不如我所愿，即复选框根本没有 jquery css 样式。你能告诉我有什么问题吗？

结果是这样的：

![](../Images/1f711d92746749a99b2e36bcd882f6b5.png)

我基本上是 jquery/javascript 的新手，我的项目只需要它来显示来自 xml 的一些结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:06:24.977

虽然我没有足够的信息来解决手头的问题，但我想解释一下，当前的方法并没有以干净的方式实现 DOM。

最好将所有新的 html 添加到一个 var 中，然后在最后附加新创建的 html。

```
var content_groups;
$(xml).find('list').each(function() {
  content_groups += "<li><a href='#membergroup' onclick='functionare(\"" + $(this).attr("name") + "\")'>" + $(this).attr('name') + "</a><input type='checkbox' name='checkbox-0' id='checkbox-mini-0' class='custom' data-mini='true' /></li>";
});
$("#content_groups ul").append(content_groups);
$("#content_groups ul").listview('refresh'); 
```

我知道这并不能真正解决您的问题，但它应该会减少您的网站在 Internet Explorer 中出现冻结的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:19:35.087

首先要考虑的几件事。

```
$("#content_groups ul").listview('refresh'); 
```

只会为您的列表视图设置样式，仅此而已。

要设置[复选框](http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-checkboxes.html)的样式，您需要使用适当的函数，如下所示：

```
$("#checkbox-mini-0").checkboxradio('refresh'); 
```

不幸的是，这对您没有帮助，因为 jQuery Mobile 无法设置普通复选框元素的样式。如果您使用标准复选框，您的最终结果将是一个正常的复选框。

jQuery Mobile 复选框如下所示：

```
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup">
            <legend>Agree to the terms:</legend>
            <input type="checkbox" name="checkbox-1" id="checkbox-1" class="custom" />
            <label for="checkbox-1">I agree</label>
    </fieldset>
</div> 
```

您可以使用此代码并将其插入到您的 listview li 元素中（当然您仍然需要使用**.checkboxradio('refresh');**对其进行样式设置）但这仍然对您没有帮助，因为 jQuery Mobile 复选框永远不会bu 在列表视图中使用。

但是您可以在列表视图中创建一个自定义复选框，这是我的示例：[https ://stackoverflow.com/a/13634738/1848600](https://stackoverflow.com/a/13634738/1848600)

# asp.net - Asp.net Validation with div

> ID：14462525
> 
> 赞同：0
> 
> 时间：2013-01-22T15:50:17.500
> 
> 标签：asp.net, html

i am new at asp.net; i try to add RequiredFieldValidator to phone number section, but i cant to its at visual studio 2010 because its not have "id" when i add the id inside the class, its still not showing.

Also how can i add onclick at submit button?

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="odevproje._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <fieldset>
    <div class="legend"><h3>iletişim</h3></div>
        <div class="form_row">                      
    <div class="form_property form_required">Adınız</div>
    <div class="form_value"><input type="text" size="32" name="name" value="" />                       
          </div>    
        <div class="clearer">&nbsp;</div>
        </div>
        <div class="form_row">                      
             <div class="form_property">Email</div>
           <div class="form_value"><input type="text" size="32" name="email" value="" /></div>
           <div class="clearer">&nbsp;</div>
             </div>
        <div class="form_row">                  
            <div class="form_property">Telefon</div>                                  <div class="form_value"><input type="text" size="32" name="website" value="" /></div>
            <div class="clearer">&nbsp;</div>
        </div>              
        <div class="form_row">                  
            <div class="form_property form_required">Mesaj</div>
                <div class="form_value"><textarea rows="10" cols="46" name="comment"></textarea></div>
                    <div class="clearer">&nbsp;</div>
        </div>
             <div class="form_row form_row_submit">
        <div class="form_value"><input type="submit" class="button" value="Send"/>
            <div class="clearer">&nbsp;</div>
            </div>          
       </fieldset>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:58:08.380

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="odevproje._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

    <fieldset>

        <div class="legend"><h3>iletişim</h3></div>

            <div class="form_row">

                <asp:TextBox runat="server" id="emailTextBox"/>
                <asp:RequiredFieldValidator runat="server" ControlToValidate="emailTextBox" Text="*" ErrorMessage="Email is required" />

            </div>

            <asp:Button runat="server" id="saveButton" Text="Save" />

    </fieldset>
    </div>

    </form>
</body>
</html> 
```

仅显示一个带有RequiredFieldValidator 的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:05:02.517

您需要使用在运行时创建 html 的 asp.net 服务器端控件。

例如，您可以使用：

```
<asp:textbox ID='phonenumber' runat='server'/>
<asp:RequiredFieldValidator ID="ValidateName"
     ControlToValidate="phonenumber"                        
     runat="server" ErrorMessage="Phone Number is required is Required"
     Display=Dynamic>
</asp:RequiredFieldValidator> 
```

# html - 如何在 Perl ASP SQLite 数据库中保存一个®（注册商标）

> ID：14462526
> 
> 赞同：0
> 
> 时间：2013-01-22T15:50:19.467
> 
> 标签：html, perl, sqlite, asp-classic

我无法隔离这个问题。我有一个 HTML 表单文本输入，它通过 Perl ASP 保存到 SQLite 数据库中。如果我只是保存表单数据`®`或者使用以下方法替换字符：

```
 $registered = chr(174);
$DESCRIPTION =~ s/$registered/R/g; 
```

检索数据时，我得到一个额外的字符，`Â®`或者`ÂR`如果我用上面的代码替换商标，再次保存它，我又得到`ÃÂ®`, `ÃÂÃÂ®`。是`ÃÂ`从哪里来的？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:57:27.383

在连接中将 sqlite_unicode 属性设置为 1：

```
$dbh = DBI::connect( "dbi:SQLite:dbname=foo", "", "", { sqlite_unicode => 1 } ); 
```

之后，在设置一些二进制数据列时，您可能需要将它们显式表示为二进制：

```
$sth->bind_param(1, $binary_data, SQL_BLOB); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:00:24.293

当您使用它时，该字符串可能采用 UTF-8（Perl 的字符编码标准）。UTF-8 中的注册商标符号是两个字节，您只需替换其中一个。 [有关该字符的编码，请在此处查看更多信息](http://www.fileformat.info/info/unicode/char/ae/index.htm)。

如果您想用正则表达式替换符号，请使用除`chr()`匹配适当字符之外的方法。你应该能够做到这一点：

```
s/\x{c2ae}/R/g; 
```

`\x`匹配以十六进制给出的 UTF-8 字符。我从上面链接的页面中获得了十六进制编码。

有关更多信息，请参阅[perlre](http://perldoc.perl.org/perlre.html)中的“转义序列” 。

另请参阅[`Encode`](http://perldoc.perl.org/Encode.html)核心模块以获取有关 Perl 如何处理字符编码的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:17:19.663

也许这次巡演会让您了解您正在打什么？我猜`chr2`是你的问题所在。

```
use strictures;
use utf8;
use DBI;

my $dbh = DBI->connect("dbi:SQLite::memory:", undef, undef,
                       { sqlite_unicode => 1,
                         PrintError => 1 } );

$dbh->do(<<"");
   CREATE TABLE moo (
    name TEXT
    ,string TEXT )

my $insert = $dbh->prepare("INSERT INTO moo VALUES ( ?, ? )");

my %reg = ( raw => "®", # note "use utf8;"
            "chr" => chr(174) );

while ( my ( $name, $reg ) = each %reg )
{
    $insert->execute($name, $reg);
}

# And a couple without placeholders (which we all know is EVIL, right?)
$dbh->do(<<"");
    INSERT INTO moo VALUES( "raw2", "®" )

my $reg = chr(174);
$dbh->do(<<"");
    INSERT INTO moo VALUES( "chr2", "$reg" )

my $sth = $dbh->prepare("SELECT * FROM moo");

$sth->execute;

binmode STDOUT, ":encoding(UTF-8)";
while ( my $row = $sth->fetchrow_hashref )
{
    print $row->{name}, " -> ", $row->{string}, $/;
}

__DATA__
chr -> ®
raw -> ®
raw2 -> ®
"\x{00ae}" does not map to utf8.
chr2 -> \xAE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T19:30:44.020

在查看了字符串中的实际字符后：

```
foreach (split //, $DESCRIPTION) {
     $hold = ord($_);
     %>chr(<%= $hold %>)<br><%
} 
```

我发现`®`来自 html 表单的文本输入被视为/接收为 chr(194).chr(174)。所以：

```
 $registered = chr(194).chr(174);
$DESCRIPTION =~ s/$registered/&#174;/g; 
```

允许我毫无问题地将其保存到数据库中...

# android - How do I get the Throwable (error) at android-async-http from loopj?

> ID：14462527
> 
> 赞同：1
> 
> 时间：2013-01-22T15:50:23.787
> 
> 标签：android, post, request, loopj, android-async-http

I am using the (I guess) quite popular library from LoopJ (https://github.com/loopj/android-async-http) to make GET and POST requests. Everything if working fine, but when it comes to cookie-handling I got some errors. Occasionally the POST-Login request in my app fails for no reason. In that case, the onFailure-method of the POST request is called correctly:

```
 @Override
        public void onFailure(Throwable error, String content) {
            Log.e("custom onFailure POST", error.getMessage());
            cb.onTaskComplete("LOGIN_FAILED");
        } 
```

The strange thing is, that both "Throwable error" and "String content" are NULL-objects. That makes it really hard to analyze to problem of logging the user in into my app. Can someone tell me, how to get the source of the failure? Are there other methods I can implement to get a better fail-repost from the request?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:54:05.150

最简单的方法是调试您的应用程序，在`onFailure`方法中放置一个断点。当它在该断点处停止时，查看调用堆栈以查找错误的来源。

此外，在您的方法中，您可以调用`Thread.currentThread().getStackTrace()`then 遍历数组`StackTraceElement[]`- 因此您可以将信息输出到您的日志（或标准输出等），这样您就不需要调试应用程序。

# linux - How to get first n characters of each line in unix data file

> ID：14462529
> 
> 赞同：59
> 
> 时间：2013-01-22T15:50:35.440
> 
> 标签：linux, unix, awk, cut

I am trying to get the first 22 characters from a unix data file.Here is my data looks as below.

First 12 characters is column 1 and next 10 characters is 2nd column.

```
000000000001199998000180000     DUMMY RAG #         MFR NOT ST            1999980    ZZ-            0        0              0ZZ-
000000000002199998000180000     DUMMY RAG #         MFR NOT ST            1999980    ZZ-            0        0              0ZZ-
000000000003199998000180000     DUMMY RAG #         MFR NOT ST            1999980    ZZ-            0        0              0ZZ-
000000000004199998000180000     DUMMY RAG #         MFR NOT ST            1999980    ZZ-            0        0              0ZZ-
000000000005199998000180000     DUMMY RAG #         MFR NOT ST            1999980    ZZ-            0        0              0ZZ-
000000000006199998000180000     DUMMY RAG #         MFR NOT ST            1999980    ZZ-            0        0              0ZZ- 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-01-22T15:54:52.017

与`cut`：

```
$ cut -c-22 file
0000000000011999980001
0000000000021999980001
0000000000031999980001
0000000000041999980001
0000000000051999980001
0000000000061999980001 
```

如果我理解第二个要求，您希望将前 22 个字符分成长度为 10 和 12 的两列。`sed`这是最好的选择：

```
$ sed -r 's/(.{10})(.{12}).*/\1 \2/' file
0000000000 011999980001
0000000000 021999980001
0000000000 031999980001
0000000000 041999980001
0000000000 051999980001
0000000000 061999980001 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T16:20:23.330

sudo_O 提供了很好的 cut 和 sed 解决方案，我只是添加了一个 awk 单行：

```
awk 'BEGIN{FIELDWIDTHS="22"} {print $1}' file

echo "000000000001199998000180000     DUMMY RAG"|awk 'BEGIN{FIELDWIDTHS="22"} {print $1}'
0000000000011999980001 
```

带有空字符（这取决于您的要求，您想要跳过空格或者您想要在输出中包含并计算它们）

如果空格也应计算并显示在输出中：（您不必更改上面的 cmd）

```
echo "0 0 0 0 00000001199998000180000"|awk 'BEGIN{FIELDWIDTHS="22"} {print $1}'                                                                         
0 0 0 0 00000001199998 
```

如果你想跳过那些空格：（又快又脏）

```
echo "0 0 0 0 00000001199998000180000"|sed 's/ //g'|awk 'BEGIN{FIELDWIDTHS="22"} {print $1}'                                                            
0000000000011999980001 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-18T14:41:55.843

这实际上可以在 Bash 中完成，而无需使用任何外部程序（使用它的脚本必须以`#!/bin/bash`而不是开头，`#!/bin/sh`并且不会与 POSIX shell 兼容）使用表达式`${VARIABLE:offset:length}`（其中`:length`可选）：

```
#!/bin/bash

STR="123456789"

echo ${STR:0:1}
echo ${STR:0:5}
echo ${STR:0:10}
echo ${STR:5:10}
echo ${STR:8:10} 
```

会有这个输出：

```
1
12345
123456789
6789
9 
```

请注意，起始偏移量从零开始，长度必须至少为一。您还可以使用括号中的负偏移量从字符串的右侧偏移：

```
echo ${STR:(-5):4}

5678 
```

要读取文件，请重复获取每行的前 8 个字符，并将它们打印到终端，使用`while`如下循环：

```
while read LINE
    do echo "${STD:0:8}"
done < "/path/to/the/text_file" 
```

对于您需要了解的有关 Bash 字符串操作的所有信息，这里有一个非常有用的资源：[https ://tldp.org/LDP/abs/html/string-manipulation.html](https://tldp.org/LDP/abs/html/string-manipulation.html)

# asp.net - One connectionstring for SimpleMembership

> ID：14462531
> 
> 赞同：2
> 
> 时间：2013-01-22T15:50:38.533
> 
> 标签：asp.net, entity-framework, web-config, connection-string, simplemembership

I have an ASP.NET MVC 4 web app and I'm defining connection strings in my `web.config`. I'm using [SimpleMembership](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx) which by default wants to use a connection string with the name `DefaultConnection`

I'm also using `EntityFramework 5` to access the same database and store my app data. My `EntityFramework` context is called `AppContext`. Therefore, my context wants to by default use a connection string with the name `AppContext`.

My current solution is to define two connection strings:

```
<add name="DefaultConnection" connectionString="REMOVED" providerName="System.Data.SqlClient" />
<add name="AppContext" connectionString="REMOVED" providerName="System.Data.SqlClient" /> 
```

What's the commonly used solution here? I assume this is a common scenario and people are either overriding the default name of the EntityFramework connection string or the SimpleMembership connection string.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T15:25:20.933

哼，轮到我提问了：谁是老大？:-)

您不必接受默认设置，除非它们确实符合**您想要**做的。

我不明白为什么你需要有 2 个完全相同的连接字符串到同一个数据库！我确信它可以这样工作，但是让任何一个使用另一个连接字符串并不是什么大问题。例如，默认情况下，在 AccountModels 中，我有：

```
public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<webpages_Membership> Membership { get; set; }
} 
```

我只需要在其中将“DefaultConnection”更改为“AppContext”即可使用与实体框架相同的连接字符串来使用 SimpleMembership：

```
public class UsersContext : DbContext
{
    public UsersContext()
        : base("AppContext")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<webpages_Membership> Membership { get; set; }
} 
```

# svn - Why does this Subversion post commit hook fail to run? (permissions issue)

> ID：14462532
> 
> 赞同：1
> 
> 时间：2013-01-22T15:50:40.683
> 
> 标签：svn, permissions, post-commit-hook

I have a python script being called by an svn post commit hook, and this python script needs to write to a log file using python logging. But the attempt to open the log file causes the script to fail. I am certain this is the reason because if I change from FileHandler to StreamHandler my script works perfectly.

Here is the log file I'm trying to write to:

```
-rw-rw-rw-. 1 apache   apache   1.8K Jan 22 10:15 hook_log.out 
```

Here is it's parent directory, which is located in a subdirectory of /opt/:

```
drwxrwxrwx. 2 apache apache 4.0K Jan 22 10:33 svn_hooks 
```

Now, for some reason, my script works perfectly if I log to a file in the root /tmp directory:

```
drwxrwxrwt.   8 root root 4.0K Jan 22 10:34 tmp 
```

I cannot see why the /tmp directory should be writeable by the hook, while the svn_hooks/ direrectory is not. It belongs to apache and in any case it's writeable by everyone. Can anyone explain this to me? Thanks!

EDIT: the script fails on this line:

```
handler = logging.FileHandler("/opt/in1/svn_hooks/hook_log.out") 
```

# android - Stop background music when user closes the app, not when user changes activity

> ID：14462534
> 
> 赞同：0
> 
> 时间：2013-01-22T15:50:45.960
> 
> 标签：android

I'm studying how to develop android app. I started with a very simple app with only one activity. Then I added a service to play background music; of course i used the method onPause(), onStop() onDestroy() to manage the service.

But now, that i have another activity, the background music stops when the new activity is opened (because the method onPause() is called).

I want to stop the background music only when user closes or destroys my entire app, not when user passes from an activity to another.

Probably i made a big mistake when i started building my app. Now i 'm trying to solve this problem.

I tried to use also bindService, but i still have the same problem.

How should i menage this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:49:59.450

[从您的服务中，您可以使用此 answer 中找到](https://stackoverflow.com/a/4753333/752320)的方法定期检查前台活动（或包）正在使用什么。如果它不属于您，您可以终止该服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:02:55.087

要播放我认为最好使用 Android 的音乐[`Service`](http://developer.android.com/reference/android/app/Service.html)

> 服务是一个应用程序组件，代表应用程序希望在不与用户交互的情况下执行更长时间运行的操作，或提供功能供其他应用程序使用。每个服务类必须在其包的 AndroidManifest.xml 中有相应的声明。可以使用 Context.startService() 和 Context.bindService() 启动服务。
> 
> 请注意，服务与其他应用程序对象一样，在其托管进程的主线程中运行。这意味着，如果您的服务要执行任何 CPU 密集型（例如 MP3 播放）或阻塞（例如网络）操作，它应该生成自己的线程来完成这项工作。更多信息可以在进程和线程中找到。IntentService 类可作为 Service 的标准实现使用，它有自己的线程来安排要完成的工作。

# batch-file - Batch file sqlcmd to backup database failing

> ID：14462536
> 
> 赞同：0
> 
> 时间：2013-01-22T15:50:52.860
> 
> 标签：batch-file, sqlcmd

I'm trying to create a batch file that will execute a sql script which will backup a database.

The script looks like this:

```
USE $(DatabaseName);  
DECLARE     @DBName varchar(50), 
            @DateLabel  varchar(50), 
            @FileName   varchar(300), 
            @TodayDate  datetime, 
            @BackupPath varchar(200)

SET @DBName = $(DatabaseName);              
SET     @BackupPath = $(FolderPath) + '\'; 
```

The batch file outputs this:

```
G:\Deployments>script_PFBC_ResourceFirstPortal.bat  
G:\Deployments>REM ECHO OFF  
G:\Deployments>SET outTime=10:41:12.46  
G:\Deployments>SET outTime=104112.46  
G:\Deployments>SET outTime=10411246  
G:\Deployments>SET outPath=PFBCdb_2013_22_01_10411246  
G:\Deployments>mkdir PFBCdb_2013_22_01_10411246  
G:\Deployments>cd PFBCdb_2013_22_01_10411246  
G:\Deployments\PFBCdb_2013_22_01_10411246>SET fullOutPath=G:\Deployments\PFBCdb_
2013_22_01_10411246  
G:\Deployments\PFBCdb_2013_22_01_10411246>CD..  
G:\Deployments>sqlcmd -i "backup.sql" -v DatabaseName=PFBC_ResourceFirstPortal FolderPath="G:\Deployments\PFBCdb_2013_22_01_10411246"  
Msg 102, Level 15, State 1, Server HDCVS-PFBC, Line 21
Incorrect syntax near 'G:'. 
```

The last line of the batch file looks like this:

```
sqlcmd -i "backup.sql" -v DatabaseName="PFBC_ResourceFirstPortal" FolderPath="%fullOutPath%" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:05:48.653

错误消息似乎在抱怨您引用 G: 驱动器的事实。

请尝试输入完整的服务器路径。我发现这在处理批处理文件和 sqlcmd 时总是可以避免混淆。

```
\\servername\folder1\folder2\Deployments\... 
```

# r - R Snow Error in checkForRemoteErrors(lapply(cl, recvResult)) ：一个节点产生错误：无法打开连接

> ID：14462538
> 
> 赞同：0
> 
> 时间：2013-01-22T15:50:53.373
> 
> 标签：r, lapply

我在三个主机集群上使用 SNOW 有几个月的成功经验，我在其中使用 clusterEvalQ(cl, source('blah')) 获取专有功能。旧的源代码工作正常。在添加新功能时，我创建了新的专有方法文件，发现一些文件不会来自 master。我知道的文件之间的唯一区别是文件名。是否有可能某些文件名有效而有些则无效？您是否知道一种确定实际失败的方法，以便我们找到解决方法？

utils_grid.r 是使用 cp 命令从 ta.r 创建的。“ta.r”有效，“utils_grid.r”无效。

$ `diff utils_grid.r ta.r` $

> -rwxrwxrwx。1 tim 开发人员 6.2K 1 月 22 日 10:12 utils_grid.r* -rwxrwxrwx。1 tim 开发人员 6.2K Sep 12 14:06 ta.r*

```
clusterEvalQ(cl,source(file="/home/mslade/exp/trunk/R/rsrc/AlphaRex/utils_grid.r")) 
```

> checkForRemoteErrors(lapply(cl, recvResult)) 中的错误：一个节点产生错误：无法打开连接

```
clusterEvalQ(cl,source("/home/mslade/exp/trunk/R/rsrc/AlphaRex/ta.r",verbose=F,echo=T)) 
```

> [[1]] [[1]]$value function (data, topn = 1, keepn = 1, dirMaxMin = TRUE) { temp = coredata(data) for (i in 1:nrow(temp)) { x = temp [i, ] o = sort.list(x, na.last = TRUE, 递减 = dirMaxMin) index = which(!is.na(x)) x[] = NA if (len(index) > 0) { n = min(topn, len(index)) x[o[1:n]] = 1 if (i >= 2) { . . . （其余省略）
> 
> R 版本 2.15.0 (2012-03-30) 平台：x86_64-redhat-linux-gnu (64-bit)
> 
> 语言环境：[1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C
> LC_TIME=en_US.UTF-8 LC_COLLATE=en_US.UTF-8
> LC_MONETARY=en_US.UTF-8 LC_MESSAGES=en_US.UTF-8 [7] LC_PAPER=C LC_NAME =C LC_ADDRESS=C LC_TELEPHONE=C
> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> 
> 附加的基础包：[1] splines stats graphics grDevices utils datasets methods base
> 
> 其他附加软件包：[1] lmtest_0.9-30 abind_1.4-0
> snow_0.3-9 tseries_0.10-28 quadprog_1.5-4 ipred_0.8-13 prodlim_1.3.1 KernSmooth_2.23-7 [9] nnet_7。 3-1
> mlbench_2.1-0 MASS_7.3-17 randomForest_4.6-6 ellipse_0.3-7 mclust_3.4.11 pvclust_1.2-2 maptree_1.4-6 [17] rpart_3.1-52 class_7.3-3 cluster_1 .14.2 RTAQ_0.2
> timeDate_2160.97 Hmisc_3.9-3survival_2.36-12
> lattice_0.20-6 [25] Romd_0.1.15 statUtils_0.1.8
> Rcpp_0.9.10 quantmod_0.3-17 TTR_0.21-1
> Defaults_1.1-1 xts_0.8-6 hydroGOF_0.3-4 [33] zoo_1.7-7 MethComp_1.15 nlme_3.1-103
> SDMTools_1.1-12 rmongodb_1.0.3 RMongo_0.0.21 RUnit_0.4.26 rJava_0.9-3 [41] xtable_1.7-0 moment_0.13
> gtools_2.6.2 rjson_0.2.8 RMySQL_0.9-3 DBI_0.2-5
> RODBC_1.3- 5
> 
> 通过命名空间加载（未附加）：[1] automap_1.0-12 e1071_1.6 grid_2.15.0 gstat_1.0-13 hydroTSM_0.3-5 sp_0.9-99 tools_2.15.0

# javascript - jQuery Mobile：函数返回错误的 DIV id

> ID：14462540
> 
> 赞同：0
> 
> 时间：2013-01-22T15:51:02.373
> 
> 标签：javascript, html, jquery-mobile

我在页面上有这样的东西：

```
<div id="page1" data-role="page" data-theme="a">Page 1</div>            
<div id="page2" data-role="page" data-theme="a">Page 2</div>            
<div id="page3" data-role="page" data-theme="a">Page 3</div>
<div id="page4" data-role="page" data-theme="a">Page 4</div> 
```

处理向左滑动事件的脚本是：

```
var pages = ["page1","page2","page3","page4"];

for( var i=0; i<pages.length; i++  ) {
    var thisPage = '#'+pages[i];

    if( i < pages.length-1) {
        $(thisPage).on('swipeleft', function() {
            var nextPage = '#'+(pages[i+1]);
            console.log(thisPage+'|'+nextPage);
        });
    }
} 
```

此时您应该停留在 Page1 上，因为没有发生实际的转换，但是如果您尝试执行向左滑动手势，则日志会显示以下内容：

```
#page4|#undefined 
```

而预期的输出应该是：

```
#page1|#page2 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:10:37.930

您的变量 (i) 定义在错误的范围内。您可以尝试将循环索引传递给以该值关闭的自调用函数：

```
var pages = ["page1","page2","page3","page4"];

for( var i=0; i<pages.length; i++  ) {
    if( i < pages.length-1) {
        (function(index){
            var thisPage = '#'+(pages[index]);
            $(thisPage).on('swipeleft', function() {
                var nextPage = '#'+(pages[index+1]);
                console.log(thisPage+'|'+nextPage);
            });
        })(i);
    }
} 
```

# actionscript-3 - 使用 Loader 时，complete 和 init 事件是什么关系？

> ID：14462542
> 
> 赞同：3
> 
> 时间：2013-01-22T15:51:05.677
> 
> 标签：actionscript-3, events, flash

[Actionscript 3.0 参考中的 Loader 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html#Loader%28%29)似乎自相矛盾。

> *   `complete`当文件完成下载但在加载的影片剪辑的方法和属性可用之前调度该事件。

根据第一点，该`complete`事件意味着一个文件已经完成下载。我们正在加载一个`swf`文件并使用该`complete`事件来表示它已被加载。然而，我们发现在某些情况下，我们正在加载的资源对我们不可用。文档中的这一行对我们来说很有意义，因为我们遇到了这个问题，我们计划改用该`init`事件。

但随后文档继续说：

> *   在加载的 SWF 文件的属性和方法可访问后调度该`init`事件，因此您可以开始操作加载的 SWF 文件。此事件在`complete`处理程序之前调度。在流式 SWF 文件中，`init`事件可能比完整事件发生得早得多。对于大多数用途，请使用`init`处理程序。

这对我们来说也很有意义，只是它说`init`事件是在处理程序之前调度的`complete`。这对我们来说没有意义，因为这似乎自相矛盾。如果`complete`事件是在加载的影片剪辑的方法和属性可用之前调度的，而`init`事件是在加载的SWF文件的属性和方法可以访问之后调度的，那么如何在`init`事件之前调度`complete`事件呢？

我很想听听更经常处理这些事件的人的意见，并且可以澄清关于这一点的文档。以下是我关于此文档和流程的具体问题：

*   `complete`和`init`事件的含义有什么区别？
*   文档在这里使用“事件”和“处理程序”这两个词重要吗？即“此 [ `init`] 事件在`complete`处理程序之前调度。” 这是否告诉我们在事件也被分派`complete`之前推迟处理事件？`init`

该文档还明确指出，“对于大多数目的，请使用`init`处理程序。” 因此，至少我们期望将我们的软件从使用`complete`改为使用`init`。我们可能只会等待两者，特别是如果我们在测试中看到它们以不同的顺序出现。但我仍然在这里寻找一些理智。希望有人可以提供这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:52:39.630

事件监听器不应该附加到 Loader 的 LoaderInfo 对象吗？

Event.COMPLETE[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/LoaderInfo.html#event%3acomplete)说：

> 数据加载成功时调度。换句话说，它是在所有内容都已下载并且加载完成时调度的。**complete**事件总是在init**事件**之后调度 。当对象准备好访问时，将调度**init**事件，尽管内容可能仍在下载。

简化解释：

*   Event.INIT 在第一帧的所有“层”（包括代码和资产）已加载时调度

*   Event.COMPLETE 在所有帧都完成加载后调度。

# javascript - 双向无限循环列

> ID：14462547
> 
> 赞同：14
> 
> 时间：2013-01-22T15:51:11.870
> 
> 标签：javascript, jquery, html, infinite-scroll, multiple-columns

我一直在研究两列网站，当您滚动时：A 列上升，B 列下降。我实现了无限滚动，但我想知道的是：是否可以将一列克隆/附加到另一列，例如以一定的滚动长度：

一旦滚动出视图：

*   A列框将移动到B列的末尾
*   B 列框将移动到 A 列的末尾

从技术上讲仍然是无限的，但是将盒子从一列循环到另一列——将一个溢出到另一个再返回。

这种方法不好，还是只在每一列上使用无限滚动更好？因为我是 JS 和 jQuery 的新手，所以让我感到困惑的是逻辑，以及实现这一目标的最佳方法是什么。

![列移动示例](../Images/0400214e07a0570d3c6b03aa367d5618.png)

*仅以图片为例，框的数量可能要高得多，例如每列 10 个。

到目前为止我的代码：http: [//jsfiddle.net/djsbaker/vqUq7/1/](http://jsfiddle.net/djsbaker/vqUq7/1/)

我目前的克隆/追加尝试：

```
var ele = document.getElementById("box");
var arr = jQuery.makeArray(ele);
var data = (ele)[0];

$(window).scroll(function() {  
  if ( $(window).scrollTop() >= 1000) {
    $(data).clone().appendTo('body');
  } else {
    ..
  }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T11:34:30.620

无限滚动。完成：[小提琴 http://jsfiddle.net/PgMUP/14/](http://jsfiddle.net/PgMUP/14/)

你已经设置好了一切。

代码（*整理了一下*）：

```
var num_children = $('#up-left').children().length;
var child_height = $('#up-left').height() / num_children;
var half_way = num_children * child_height / 2;
$(window).scrollTop(half_way);
var ul = '#up-left'; 
var dr = '#down-right'; 
function crisscross() {
    $(ul).css('bottom', '-' + window.scrollY + 'px');
    $(dr).css('bottom', '-' + window.scrollY + 'px');
    var ulc = $(ul).children();
    var drc = $(dr).children();
    var corners = [ulc.first(),ulc.last(),drc.last(),drc.first()];
    if (window.scrollY > half_way ) {
        $(window).scrollTop(half_way - child_height);
        corners[2].appendTo(ul);    
        corners[0].prependTo(dr);
    } else if (window.scrollY < half_way - child_height) {
        $(window).scrollTop(half_way);
        corners[1].appendTo(dr);
        corners[3].prependTo(ul);
    }
}
$(window).scroll(crisscross); 
```

它按照您的图表所示工作。闪烁是因为触发了浏览器回流造成的。一种更好的方法，而不是分离然后插入 div，我相信只是在两个 div 之间**交换属性。**说出你在其中的任何内容，图像、文本、颜色、css 类，只需使用大型通用交换功能进行交换即可。然后，由于容器本身将保持固定。

我添加了包含 div 并交换了内部 div，因此保留了列的大小结构，但这不起作用。

# vba - 从excel保存csv会丢失小数点精度

> ID：14462548
> 
> 赞同：5
> 
> 时间：2013-01-22T15:51:12.280
> 
> 标签：vba, excel, excel-2010

如果我创建一个包含以下内容的简单 .csv 文件：

```
01/22/2013,3.14159265358979323846264338 
```

并继续在excel中打开它，单元格将显示一个四舍五入的数字`3.141592654`，即公式栏将显示整个值。但是，如果我进行一些更改并保存 csv 文件，或者只是将原始文件保存为不同的 csv 文件，该文件将只包含四舍五入的数字`3.141592654`，导致我失去一些小数点精度。

我正在通过 vba 宏写出这些文件。我试过了 ：

```
ActiveWindow.DisplayFormulas=True 
```

在保存命令之前，它可以工作，除了它将我的日期更改为数字格式并且我还没有想出一种方法将此格式仅应用于一系列单元格。有没有一些简单的方法来保持我的数字精度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:05:18.450

如果您知道哪些细胞会受到影响，请尝试类似

```
Range("MYNUMBERS").NumberFormat = "#0.000000000000000" 
```

?

# android - 为什么我只得到一半的 html 源代码？

> ID：14462550
> 
> 赞同：-3
> 
> 时间：2013-01-22T15:51:20.520
> 
> 标签：android, html, android-asynctask, httpurlconnection

在我的 android 应用程序中，我使用 asynctask 从网站获取 html 源代码。为此，我像这样使用 HttpURLConnection：

```
protected Void doInBackground(Void... v) {
    try {
        URL url = new URL("http://xx.com/test.pl");
        HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();
        InputStream inputStream = httpURLConnection.getInputStream();

        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));

        String temp;
        while ((temp = bufferedReader.readLine()) != null) {
            //Pattern pattern = Pattern.compile("&sid=(.*?)\"");
            //Matcher match = pattern.matcher(temp);

            System.out.println(temp);

            Log.e("temp_HoleKunde", temp);
        }
    }
    catch(Exception exe) {
        exe.printStackTrace();
    }
    return null;
} 
```

我在解析网站时总是使用它，它总是运行得很好。但现在我有一个非常严重的问题。我登录 logcat 的源代码不是完整的源代码。只有一半显示......或更多，有时更少。如何在浏览器上获取完整的源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:54:32.400

日志并不意味着打印出数千行代码。我敢肯定，一旦您将其设置为`TextView`.

# php - 选择框到 textarea 到 PHP：传输未出现在 $_POST

> ID：14462552
> 
> 赞同：0
> 
> 时间：2013-01-22T15:51:26.703
> 
> 标签：php, javascript

这是一个奇怪的问题。

我有以下 javascript 代码：

```
function doTransfer(target, source)
{
    var targetObj = f_getElement(target);
    var tempText = targetObj.value.split(',');
    var len = tempText.length;
    var targetText = new Array;
    var text;
    var selection;
    var split;
    for(var i = 0; i < len; i ++)
    {
        text = trim(tempText[i]);
        if(text)
            targetText.push(text);
    }
    var sourceObj = f_getElement(source);
    len = sourceObj.options.length;
    for(i = 0; i < len; i++)
    {
        split = sourceObj.options[i].value.split('_');
        selection = decode_base64(split[1]);
// When searching for existing word, we ignore case as different words may be indicated by different use of case on the same letters.
// i.e. we trust the user to get it right.
        if(sourceObj.options[i].selected && (searchArray(targetText, selection) == -1))
            targetText.push(selection);
    }
    targetObj.value = targetText.join(',');
}

function f_getElement(id)
{
    return document.getElementById(id);
} 
```

这一切都很好，并将多个选择（base64_encoded）从选择框传输到目标文本区域（base64_decoded——此处未显示 javascript 代码）。

假设我转移了 3 个选择（'aaa'、'aaaa'、'aaaaa'），然后我在 textarea 中得到 'aaa,aaaa,aaaaa'。这就是我要的。

然后我单击提交按钮，但是，我没有在 textarea 的 $_POST 变量中获取“aaa，aaaa，aaaaa”，而是只得到“aaa，aaaa”。

我注意到的一些事情：

1.  'aaa,aaaa' 转移在 $_POST 中正确显示。
2.  'aaaaa' 转移在 $_POST 中正确显示。
3.  'aaa,aaaaa' 转移在 $_POST 中正确显示。
4.  相同的错误和成功出现在“b”的类似变体中。
5.  'UT1,UT2,UT3,UT4,UT5' 转移在 $_POST 中正确显示。
6.  *如果我在 textarea 中**输入**'aaa,aaaa,aaaaa'，它会在 $_POST 中正确显示。*

我很困惑，不知道从哪里开始追查问题。

问候，

标记

网关功能：

```
/**
* Gateway to AJAX javascript functions
* @param input - JSON string representing an array of sets of instructions to be processed in numerical order. At the very
* least a startFunction() method should be present in each set.
*/
function gateway(input)
{
    var parsedInput = JSON.parse(input);
    var inputLen = parsedInput.length;
    if(gateway.aobj_index == undefined)
        gateway.aobj_index = -1;
    gateway.aobj_index++;
    for(var i = 0; i < inputLen; i++)
    {
        if(parsedInput[i].startFunction != undefined)
        {
            A_OBJ[gateway.aobj_index] = new AJAXOBJECT();
            A_OBJ[gateway.aobj_index].input = parsedInput[i];
            A_OBJ[gateway.aobj_index].evalReturn = eval('(' + A_OBJ[gateway.aobj_index].input.startFunction + '())');
            if(A_OBJ[gateway.aobj_index].evalReturn == false)
            {
                return false;
            }
        }
        else
        {
            alert('No startFunction() defined');
            return false;
        }
        gateway.aobj_index++;
    }
    return true;
}

/**
* The object used for independent AJAX instances
*/
function AJAXOBJECT()
{
//properties
    this.input = null;
    this.processedScript = null;
    this.phpResponse = null;
    this.targetObj = null;
    this.evalReturn = null;
// methods
    this.checkInput = checkInput;
    this.doXmlHttp = doXmlHttp;
}

/**
* Check required input parameters are present in input
* @param input array
* @return false|true
*/
function checkInput(inputArray)
{
    var len = inputArray.length;
    for(var i = 0; i < len; i++)
    {
        if(this.input[inputArray[i]] == undefined)
        {
            alert('required input parameter is missing: ' + inputArray[i]);
            return false;
        }
    }
    return true;
}

/**
* Create the xmlHttp object
* @return xmlHttp object
*/  
function createXmlHttpObject()
{
    var xmlHttp = false;
//Check if we are using IE.
    try
    {
//If the javascript version is greater than 5.
        xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
    } 
    catch (e)
    {
//If not, then use the older active x object.
        try
        {
//If we are using IE.
            xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
        } 
        catch (E)
        {
//Else we must be using a non-IE browser.
            xmlHttp = false;
        }
    }
//If we are using a non-IE browser, create a JavaScript instance of the object.
    if (!xmlHttp && typeof XMLHttpRequest != undefined)
    {
        xmlHttp = new XMLHttpRequest();
    }
    return xmlHttp;
}

/**
* Execute the xmlHTTP object
*
* @return true|false
*/
function doXmlHttp()
{
    if(this.targetObj == null)
    {
        alert('No AJAXOBJECT targetObj property set');
        return false;
    }
    if(this.processedScript == null)
    {
        alert('No AJAXOBJECT processedScript property set');
        return false;
    }
    var targetObj = this.targetObj;
    var xmlHttp = createXmlHttpObject();
    xmlHttp.open("GET", this.processedScript, true);
//alert(this.processedScript);
    xmlHttp.onreadystatechange = function()
    {
        if((xmlHttp.readyState == 4) && (xmlHttp.status == 200))
        {
            try
            {
                this.phpResponse = JSON.parse(xmlHttp.responseText);
            }
            catch(err)
            {
                alert('HTTP status: ' + xmlHttp.status + '. ' + err.message + ' ERROR. PHP says:\n' + xmlHttp.responseText);
                return false;
            }
            if(this.phpResponse.ERROR)
            {
                alert('PHP ERROR:\n' + this.phpResponse.ERROR);
                return false;
            }
            if(this.phpResponse.innerHTML)
                targetObj.innerHTML = this.phpResponse.innerHTML;
//alert(this.phpResponse.next);
// Further action to be taken?
            if(this.phpResponse.next != undefined)
                gateway(JSON.stringify([this.phpResponse]));
        }
    }
    xmlHttp.send(null);
    A_OBJ[gateway.aobj_index].xmlHttp = xmlHttp;
    return true;
}
/**
* Get an object for the requested HTML element ID
* @return element object
*/
function f_getElement(id)
{
    return document.getElementById(id);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:09:36.517

好的，我发现了这个错误，这是一个 base64 编码问题。

首先是代码损坏的 jsFiddle：http: [//jsfiddle.net/mexd7/2/](http://jsfiddle.net/mexd7/2/)

Oben Firebug 控制台： [https ://getfirebug.com/logging](https://getfirebug.com/logging)

玩一些添加单词的游戏，看看你看到了什么。

现在这里是固定版本：http: [//jsfiddle.net/mexd7/1/](http://jsfiddle.net/mexd7/1/)

```
function decode_base64(s)
{
    var e={},i,k,v=[],r='',w=String.fromCharCode;
    var n=[[65,91],[97,123],[48,58],[43,44],[47,48]];

    for(z in n) {
        for(i=n[z][0];i<n[z][1];i++) {
            v.push(w(i));
        }
    }

    for(i=0;i<64;i++) {
        e[v[i]]=i;
    }

    for(i=0;i<s.length;i+=72) {
        var b=0,c,x,l=0,o=s.substring(i,i+72);
        for(x=0;x<o.length;x++) {
            c=e[o.charAt(x)];b=(b<<6)+c;l+=6;
            while(l>=8) {
            var charCode = (b>>>(l-=8))%256;

                if (charCode > 31) {
                    // only add printable chars
                    r+=w(charCode);
                }
            }
        }
    }
    return r;
} 
```

It seams there is a problem in your base64 encoder but i solved it with the decode. By dont adding not prinable chars like \0 to the string.

[http://www.asciitable.com/](http://www.asciitable.com/)

# marshalling - 如何为使用 qx.data.marshal.Json.createModel 创建的模型添加自定义方法？

> ID：14462554
> 
> 赞同：0
> 
> 时间：2013-01-22T15:51:28.337
> 
> 标签：marshalling, qooxdoo

我有一个使用 qx.data.marshal.Json.createModel 创建的模型，其中包含一个名为“startDate”的字段，它是一个 Date 实例。我想覆盖 getStartDate 以返回 Date 的副本，而不是模型中的相同 Date 实例。

我看过[http://manual.qooxdoo.org/2.1/pages/data_binding/models.html](http://manual.qooxdoo.org/2.1/pages/data_binding/models.html)但我只发现“查看 qx.data.store.IStoreDelegate 的 API-Documentation 以查看可用方法以及如何实施它们。”。IStoreDelegate 信息不完整，我不知道如何使用它（[http://demo.qooxdoo.org/2.1/apiviewer/index.html#qx.data.store.IStoreDelegate](http://demo.qooxdoo.org/2.1/apiviewer/index.html#qx.data.store.IStoreDelegate)）。

```
var delegate = {
    getModelMixins : function(properties) {

    }
};

var marshaler = new qx.data.marshal.Json(delegate);
marshaler.toClass(data);
var model = marshaler.toModel(data);
// the problem with weeks is that someone changes the dates
// we must make the getFromDay to return a copy of the data
weeks.append(qx.data.marshal.Json.createModel(weeksRaw)); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:25:04.830

作为回报，我用 mixin 创建了一个委托。

```
// notice the _ variables
weeksRaw.push({
     label: "week: " + weeksNum + ' [' + startDayString + '-' + endDayString + '['
    ,_fromDay: week.startDay
    ,_toDay: week.endDay
});
var delegate = {
    getModelMixins : function(properties) {
        return myapp.models.marshalMixins.Week;
    }
};
var marshaler = new qx.data.marshal.Json(delegate);
marshaler.toClass(weeksRaw);
var model = marshaler.toModel(weeksRaw); 
```

混音：

```
qx.Mixin.define('production.models.marshalMixins.Week', {
    members: {
        getFromDay: function(){
            return new Date(this.get_fromDay());
        }
        ,getToDay: function(){
            return new Date(this.get_toDay());
        }
    }

}); 
```

# julia - 在 Julia 脚本中，你能判断脚本是被导入还是直接执行的吗？

> ID：14462557
> 
> 赞同：29
> 
> 时间：2013-01-22T15:51:42.343
> 
> 标签：julia

python中的一个常见约定是将脚本的主要功能构造如下，因此它既可以作为脚本直接运行，也可以在导入`main()`时不执行而导入：

```
def main():
    do_stuff()

if __name__ == '__main__':
    main() 
```

是否有在 Julia 中设置的类似变量，以便脚本可以知道它是使用`require("script.jl"`) 导入还是直接执行？

例如，假设我有两个脚本，`a.jl`并且`b.jl`，以及`magic_function()`行为如下：

**a.jl**：

```
println("Did we execute a.jl directly? ", magic_function()) 
```

**b.jl**：

```
require("a.jl") 
```

执行以下命令会导致...

```
> julia a.jl
Did we execute a.jl directly? true
> julia b.jl
Did we execute a.jl directly? false 
```

`magic_function()`Julia 的当前发行版中是否存在类似的功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-08-09T20:10:13.563

官方 Julia 文档建议这样做：

```
if abspath(PROGRAM_FILE) == @__FILE__

    # do something only this file is executed. 
    do_something()

end 
```

do_something 函数仅在代码执行时执行，而不是在从其他代码导入代码时执行。

参考：“如何检查当前文件是否作为主脚本运行？” [https://docs.julialang.org/en/v1/manual/faq/#How-do-I-check-if-the-current-file-is-being-run-as-the-main-script?- 1](https://docs.julialang.org/en/v1/manual/faq/#How-do-I-check-if-the-current-file-is-being-run-as-the-main-script?-1)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-27T02:04:54.297

虽然`isinteractive()`可以让您辨别 REPL 在命令行上运行/导入到其他代码中，但无法获得与 Python 的`if __name__ == '__main__'`.

这似乎没有计划为一项功能。请参阅邮件列表上的此[讨论](https://groups.google.com/d/topic/julia-users/ufpi8tV7sk8/discussion)。（从 2013 年 6 月开始）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-11-10T14:29:31.320

这是我找到的最佳解决方案：

```
module mymod
    # stuff here
end

if length(ARGS)>0 && ARGS[1] == "--run"
    using mymod
    mymod.myfunction()
end 
```

然后您可以正常导入模块，但您可以从命令行调用类似可执行文件的行为，如下所示：

```
julia mycode.jl --run 
```

如果您没有其他参数要传递给脚本，则 if 语句甚至可以缩短为：

```
if ARGS == ["--run"]
    # etc...
end 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-06-20T09:50:08.120

我用

```
if ""!=PROGRAM_FILE && realpath(@__FILE__) == realpath(PROGRAM_FILE) 
```

我似乎在上面投票否决了一个类似的解决方案，我想知道这有什么问题，我将它用于一些单元测试和一些也是命令行`chmod 755`实用程序的模块

（刚刚添加了`""!=PROGRAM_FILE`“REPL include”案例，有点拗口）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-22T20:34:30.320

你想要这个`isinteractive()`功能。在 REPL 中尝试一下，将其结果与从脚本中调用它的结果进行比较，例如在此 BASH one-liner:`julia -e "println(isinteractive())"`中。

# ruby - 尝试让 WEBrick 接受 HTTPS 时出现“错误的 URI”

> ID：14462558
> 
> 赞同：4
> 
> 时间：2013-01-22T15:51:45.767
> 
> 标签：ruby, https, sinatra, rack, webrick

所以我有一个简单的 Sinatra 网站：

```
# app.rb         
require 'sinatra'

get '/' do       
  'Hello world!' 
end 
```

我可以设置 rack 来通过 HTTP 服务它：

```
# config.ru              
require './app'          
run Sinatra::Application 

# vim: ft=ruby 
```

当我浏览到`http://localhost:9292`：

```
% rackup
[2013-01-22 10:27:52] INFO  WEBrick 1.3.1
[2013-01-22 10:27:52] INFO  ruby 1.9.2 (2011-02-18) [x86_64-darwin10.7.4]
[2013-01-22 10:27:52] INFO  WEBrick::HTTPServer#start: pid=7525 port=9292
127.0.0.1 - - [22/Jan/2013 10:28:05] "GET / HTTP/1.1" 200 12 0.0177            
127.0.0.1 - - [22/Jan/2013 10:28:06] "GET /favicon.ico HTTP/1.1" 404 447 0.0007 
```

我已经[生成了一个自签名证书](http://www.akadia.com/services/ssh_test_certificate.html)，经过一番谷歌搜索，我想我找到[了一种设置机架文件以使用证书并提供 HTTPS 的方法](https://stackoverflow.com/a/12373973/9859)：

```
# config.ru                                                                     
require './app'                                                                 
require 'webrick'                                                               

Rack::Server.start(                                                             
  :Port             => 9292,                                                    
  :Logger           => WEBrick::Log::new($stderr, WEBrick::Log::DEBUG),         
  :app              => Sinatra::Application,                                    
  :SSLEnable        => true,                                                    
  :SSLVerifyClient  => OpenSSL::SSL::VERIFY_NONE,                               
  :SSLPrivateKey    => OpenSSL::PKey::RSA.new( File.read "server.key" ),        
  :SSLCertificate   => OpenSSL::X509::Certificate.new( File.read "server.crt" ),
  :SSLCertName      => [["CN", WEBrick::Utils::getservername]]                  
)                                                                               

# vim: ft=ruby 
```

但是当我访问时，`https://localhost:9292`我得到`Error code: ssl_error_rx_record_too_long`并且 webrick 是......不开心：

```
% rackup
[2013-01-22 10:46:28] DEBUG TCPServer.new(0.0.0.0, 9292)
[2013-01-22 10:46:28] DEBUG TCPServer.new(::, 9292)
[2013-01-22 10:46:28] DEBUG Rack::Handler::WEBrick is mounted on /.
[2013-01-22 10:46:28] INFO  WEBrick::HTTPServer#start: pid=7660 port=9292
[2013-01-22 10:46:33] DEBUG accept: 127.0.0.1:62185
[2013-01-22 10:46:33] ERROR bad URI `?w~Rx03I?\x06?\x00\x00H\x00??'.
localhost - - [22/Jan/2013:10:46:33 EST] "\x16\x03\x01\x00?\x01\x00\x00?\x03\x01P??Y?KOƛ\x0Ew/yO;P\x1E\x13 ?w~Rx03I?\x06?\x00\x00H\x00??" 400 316
- -> ?w~Rx03I?\x06?\x00\x00H\x00??
[2013-01-22 10:46:33] DEBUG close: 127.0.0.1:62185 
```

随意尝试一下，运行它所需的所有文件（config.ru、app.rb、server.crt、server.key）都在[这个 gist](https://gist.github.com/4595883)中。

所以我显然做错了什么。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:31:43.243

您需要添加

```
require "webrick/https" 
```

让它工作

# lotusscript - Lotusscript 中方法 RunStkCoerceVal 中的类型不匹配

> ID：14462561
> 
> 赞同：1
> 
> 时间：2013-01-22T15:51:50.773
> 
> 标签：lotusscript

首先，我想说的是，我是开发 Domino 应用程序的初学者。因此，在回答我可能很愚蠢的问题时，请考虑这个事实。

我有以下问题：
当我执行以下代码时，它运行到第`MsgBox`一个显示正常的地方。但它并没有跑到第 2 位`MsgBox`！相反，我收到以下错误消息：

`Type mismatch in method RunStkCoerceVal in Lotusscript agent STRING found Null expected.`

这是代码：

```
 Dim session As NotesSession
    Dim db As NotesDatabase
    Dim ws As New NotesUIWorkspace
    Dim thisDoc As notesUIDocument
    Dim docSMBPrivateProfile As notesDocument
    Dim test As Variant

    Set session = New NotesSession
    Set db = session.CurrentDatabase
    Set thisDoc = ws.CurrentDocument
    Set docSMBPrivateProfile = db.GetDocumentByUNID(thisDoc.FieldGetText("SMB_PRIVATE_PROFILE_DOCUMENT_ID"))

    Msgbox("This message will appear")
    Set test = docSMBPrivateProfile.FieldGetText("DOCUMENT_ID_TEST")
    Msgbox("This message won't appear") 
```

请注意，通话`thisDoc.FieldGetText("SMB_PRIVATE_PROFILE_DOCUMENT_ID")`按预期正常工作。

我将数据类型设置为`test`以`Variant`避免类型不匹配问题。事实上，我期待一个`String`.

我在这里找到了关于这个问题的唯一主题：[http](http://www.secure-eserver.com/?p=3431) ://www.secure-eserver.com/?p=3431 但我无法确定它的头或尾。

你能给我任何帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:28:22.087

由于 docSMBPrivateProfile 是一个 NotesDocument 对象。NotesDocument 类中不存在方法 FieldGetText。您可以使用以下代码获取字段值：

```
dim myStringVar as string
myStringVar = docSMBPrivateProfile.DOCUMENT_ID_TEST(0)
... 
```

正如您已经说过的那样，您仅因该错误而使用变体。因此，我建议使用带有上述代码的字符串。它不应产生类型不匹配错误。

您似乎对代码中的两个文档感到有些困惑。您可以将 FieldGetText 用于第二个文档“thisDoc”，因为它是一个 NotesUIDocument 对象。访问该字段的更好方法是（如 Panu 所建议的）

```
docSMBPrivateProfile.GetItemValue("DOCUMENT_ID_TEST")(0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:20:40.370

`docSMBPrivateProfile`基于`NotesDocument`没有`FieldGetText`方法的类。改为使用`test = docSMBPrivateProfile.GetItemValue("DOCUMENT_ID_TEST")(0)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:04:35.210

转到**工具->调试 LotusScript**菜单选项。然后运行代码。逐步检查它，看看有问题的行中到底是什么失败了。

> 事实上，我期待一个字符串。

假设该字段存在，它将返回一个数组，而不是字符串。因此，您需要执行以下操作（再次假设它只是该字段中的一个字符串）。

```
Set test = docSMBPrivateProfile.FieldGetText("DOCUMENT_ID_TEST") (0) 
```

# powershell - Powershell 选择字符串匹配

> ID：14462565
> 
> 赞同：0
> 
> 时间：2013-01-22T15:52:15.827
> 
> 标签：powershell

我有一个正在搜索特定字符串（“超时时间”）的日志。我可以使用以下内容在我的日志中获取此实例：

```
Get-Content mylog.txt | select-string 'the timeout period' | select-object 
```

我遇到的问题是，这是一个 XML 文件，powershell 只是拿起错误的那一行，而我真的需要数据/时间信息。我需要的是在匹配“超时时间”的行实例之前匹配“线程”的行实例。例如：

```
Thread 3423 - 6:34:00
Info following. ..... ....
Error .... the timeout period 
```

所以我要输出的是：

```
Thread 3423 - 6:34:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:48:15.237

如果文件是 XML，我会考虑使用 Select-Xml 和 XPath 搜索模式。也就是说，您可以像这样使用 Select-String：

```
Get-Content mylog.txt | select-string "the timeout period" -context 2 | 
    Foreach {$_.Context.PreContext[0]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:12:45.577

我猜信息部分可以是多行。所以这是我的尝试：

```
$content = Get-Content .\test.txt
$content | select-string "the timeout period" | % {
    $i = ($_.linenumber -1)

    while ($content[$i] -notlike "Thread*") {
        $i--
    }

    $content[$i]
} 
```

它为每个错误显示以“Thread”开头的前一行。前任。输出：

```
Thread 3423 - 1:34:00
Thread 3423 - 2:34:00
Thread 3423 - 3:34:00
Thread 3423 - 4:34:00 
```

# google-apps-script - 部署谷歌应用脚 本 webui 应用

> ID：14462577
> 
> 赞同：0
> 
> 时间：2013-01-22T15:52:54.697
> 
> 标签：google-apps-script

全部，

我设法使用 WebUI 方法创建了一个独立脚本，该方法收集一些数据，然后将其存储到工作表中。该脚本对我来说非常有用，但是我无法让它为其他用户或匿名用户工作。我正在寻找一些关于如何在站点中部署它以供任何人使用的帮助和指导。要部署，我已经转到 Publish -> Deploy 并将其设置为以我自己的身份执行并允许匿名访问。

脚本（代码）可以在以下位置查看：https://script.google.com/d/1INGGAx4Ep4gDJA9pNGNHVfHMHfQdV4Nh-pcPNPkHaBtazooZpffkbxVc/edit

该表可以在以下位置查看：https://docs.google.com/spreadsheet/ccc?key=0AhBJhk8_tFyWdE93TFR2cWQ1WnFiTjZzdVJIdFVRQkE

部署的应用程序可以在以下位置查看： [https ://script.google.com/macros/s/AKfycbx0G73V0hD4s8oo7NFZ877UsTh9SCxhnLlzCqoSID2gmX-rSwk/exec](https://script.google.com/macros/s/AKfycbx0G73V0hD4s8oo7NFZ877UsTh9SCxhnLlzCqoSID2gmX-rSwk/exec)

它还嵌入在以下站点中：https://sites.google.com/a/clairescourt.net/ccoe/home/dofe/test

（请注意，需要删除上述链接中的空格才能使其正常工作）

另一个奇怪的是，列表框没有为我以外的任何人填充。

非常感谢

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:38:19.900

我制作了一个 yout 脚本的副本，如下所示部署它并获取此网址： [https ://script.google.com/macros/s/AKfycby7Ckir9e9erQ_ZSBhSH3SOy05hDbLV1yZCiqf2pwh_0DmsXuQ/exec](https://script.google.com/macros/s/AKfycby7Ckir9e9erQ_ZSBhSH3SOy05hDbLV1yZCiqf2pwh_0DmsXuQ/exec)

![在此处输入图像描述](../Images/642ee8042194c673f1f3793aa6ffabc6.png)

正如您可以测试的那样，它似乎可以工作......我只是收到一条错误消息，告诉我无法写入电子表格，但这是正常的，因为我只能查看其内容。如果我将 SS 的 ID 更改为另一个我可以写的 ID，那么我完全没有问题。

你能（双重）检查你的设置和我的副本吗？

# android - 如何知道Android中哪个应用程序（进程）正在使用相机

> ID：14462579
> 
> 赞同：4
> 
> 时间：2013-01-22T15:53:03.947
> 
> 标签：android, android-camera

> **可能重复：**
> [Android 应用程序锁定相机](https://stackoverflow.com/questions/14095203/android-app-locking-camera)

可以检查是否正在使用相机。但是我们能否进一步了解哪个应用程序正在使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:02:42.133

不，没有标准的 API 可以做到这一点。您将需要 root 权限才能尝试类似的操作。您可以在此处检查 CyanogenMod 的控制此服务的实现：

[相机服务.cpp](https://github.com/CyanogenMod/android_frameworks_base/blob/gingerbread/services/camera/libcameraservice/CameraService.cpp)

# django - Django 1.4/1.5 控制 GROUP BY 结合 HAVING

> ID：14462580
> 
> 赞同：0
> 
> 时间：2013-01-22T15:53:04.367
> 
> 标签：django, django-orm

假设我有以下数据：

```
| id | user_id | time |
| 1  | 1       | 10.0 |
| 2  | 1       | 12.0 |
| 3  | 2       | 11.0 |
| 4  | 2       | 13.0 | 
```

我想要的是查询这个表，以便我得到`MIN(time)`per `user_id`：

```
| id | user_id | time |
| 1  | 1       | 10.0 |
| 3  | 2       | 11.0 | 
```

所以我的 SQL 会这样：

```
SELECT id, user_id, time FROM table GROUP BY user_id HAVING MIN(time) 
```

但是，当尝试使用 时`.annotate(Min('time'))`，Django 将`GROUP BY`在任意（错误）字段上。例如，请参阅以下代码和生成的（简化的）SQL：

```
>>> Table.objects.annotate(Min('time')).query
SELECT id, user_id, time, MIN(time) FROM table GROUP BY id, user_id, time

>>> Table.objects.values('id', 'time').annotate(Min('time')).query
SELECT id, time, MIN(time) FROM table GROUP BY id, time 
```

生成的 SQL 与我想要的输出相去甚远。我目前正在通过使用原始 SQL 来解决这个问题，但这首先违背了使用 ORM 的目的。此外，生成的代码难以重用，因为`.filter()`无法正常应用。

关于这种类型的查询也有类似的问题，但是它们相当陈旧，并且没有包含自 1.3 以来对 Django 的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:59:28.960

这不是漂亮的代码，但是。使用 django 的“额外”查询集方法和 where 作为参数，您可以实现取回所需的结果集。IE

```
Table.objects.extra(where=['id IN (SELECT id FROM table_name' 
                           '       GROUP BY user_id HAVING MIN(time))']) 
```

# javascript - jQuery if 语句都触发

> ID：14462581
> 
> 赞同：1
> 
> 时间：2013-01-22T15:53:04.470
> 
> 标签：javascript, jquery, css

对于动画移动网站（针对 iphone 进行了优化），我有以下逻辑 - 208 是全屏之前的高度。

```
 var pageHeight = $(window).height();

    if (pageHeight == 320 ) {

        $('#slide3').animate({bottom: '0px',}, 3000, function() {$('.slide3Txt').animate({top:'30px'},500);godown3Pt2()});
    }
    if (pageHeight != 208) {

        $('#slide3').animate({bottom: '0px',}, 3000, function() {$('.slide3Txt').animate({top:'94px'},500);godown3Pt2()});

    } 
```

我的问题是，两个事件在 iphone 上在横向方向上相互触发 - 有什么建议可以改进这个逻辑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:54:03.580

在您的代码中，如果它不是 208 并且如果它是 320，或者如果它不是 208，它就会触发

你需要一个`else if`所以如果它的320，它会做第一个动画，如果它没有其他任何东西而不是208，它会触发第二个动画

```
 var pageHeight = $(window).height();

    if (pageHeight == 320 ) {

        $('#slide3').animate({bottom: '0px',}, 3000, function() {$('.slide3Txt').animate({top:'30px'},500);godown3Pt2()});
    }else if (pageHeight != 208) {

        $('#slide3').animate({bottom: '0px',}, 3000, function() {$('.slide3Txt').animate({top:'94px'},500);godown3Pt2()});

    } 
```

# javascript - 从 javascript 写入 windows 事件日志

> ID：14462584
> 
> 赞同：0
> 
> 时间：2013-01-22T15:53:14.383
> 
> 标签：javascript, event-viewer

有谁知道如何使用 javascript 将事件写入 Windows 事件日志（或者是否有可能）？

谢谢，哲那罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:58:39.310

在浏览器中运行纯 JavaScript 是不可能的。您可能需要一个链接到本机代码的浏览器插件。

# foreign-keys - 剑道网格外键加法

> ID：14462586
> 
> 赞同：1
> 
> 时间：2013-01-22T15:53:20.293
> 
> 标签：foreign-keys, kendo-grid

我可以在剑道网格中使用外键列。使用内联编辑方法，“编辑”操作工作正常。

但是，当添加新记录时，一切都很好。外键列允许我选择值。但是单击更新按钮，外键列值为空，因此在我的情况下无法更新数据库。

任何建议如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-15T18:15:02.817

我有同样的问题，剑道 UI 还没有解决问题（15/08/2014）。我解决了在网格上添加客户端事件：

```
@(Html.Kendo().Grid<SPDProject.Models.DTO.ProyectoDTO>()
.Name("GridProyectos")
.Columns(columns =>
{
    columns.Bound(r => r.Id).Visible(false);
    columns.Bound(r => r.Nombre).Width(150);
    columns.Bound(r => r.Alias).Width(150);
    columns.ForeignKey(r => r.IdCliente, (System.Collections.IEnumerable)ViewData["IdCliente_Data"], "Value", "Text");
    columns.ForeignKey(r => r.IdTipoProyecto, (System.Collections.IEnumerable)ViewData["IdTipoProyecto_Data"], "Value", "Text");
    columns.Command(command => { command.Edit(); command.Destroy(); }).Width(172);
})
.DataSource(dataSource => dataSource
        .Ajax()
        .PageSize(10)
        .Events(events => events.Error("error_handler"))
        .Create(create => create.Action("CreateProyecto", "Admin"))
        .Destroy(destroy => destroy.Action("DestroyProyecto", "Admin"))
        .Model(model => model.Id(r => r.Id))
        .Read(read => read.Action("ReadProyecto", "Admin"))
        .Update(update => update.Action("UpdateProyecto", "Admin")))
.Editable(editable => editable.Mode(GridEditMode.InLine))
.Pageable(pageable => pageable.Refresh(true))
.Reorderable(reorderable => reorderable.Columns(true))
.Events(events => events.Save("onSave"))
.Resizable(resizable => resizable.Columns(true))
.Scrollable(scrollable => scrollable.Height(250))
.Selectable(selectable => selectable.Mode(GridSelectionMode.Multiple).Type(GridSelectionType.Row))
.Sortable(sortable => sortable.AllowUnsort(true).SortMode(GridSortMode.MultipleColumn))
.ToolBar(toolBar => toolBar.Create()))

<script type="text/javascript">
function onSave(e) {
    //set the value to the model
    e.model.set('IdCliente', $('#IdCliente').val());
    e.model.set('IdTipoProyecto', $('#IdTipoProyecto').val());
} 
```

我希望这对某人有所帮助。

问候，

DreamSys 的毛罗

# java - 计算总和时结果错误

> ID：14462587
> 
> 赞同：0
> 
> 时间：2013-01-22T15:53:32.743
> 
> 标签：java, sum, calculator

我正在为家庭作业编写商店模拟器。用户输入待售商品（设置名称和价格），然后用户购买这些商品 - 输入 ID (1-5) 并计数。然后 - 价格计算（我的问题）。

它必须简单地完成，但我找不到什么问题。最终价格有奇怪的值，我不明白为什么。

在这段代码中，我添加了一些“调试器”代码行，显示中间数字 - 以便更好地理解过程。

```
import java.util.Scanner; 

public class HomeWork3Shop {

    private static Scanner inputAdmin;

    public static void main(String[] args) {

        String[] items = new String[6];
        int[] price = new int[6];

        // The administrator adds the information about the products
        System.out.println("Administrator: add five items - name and price: ");
        for (int i = 1; i < 6; i++) {
            // if int = 0 -- will be "item 0: xxx" - not good
            System.out.print(" item " + i + ": ");
            inputAdmin = new Scanner(System.in);
            items[i] = inputAdmin.next();
            System.out.print("Price " + i + ": ");
            inputAdmin = new Scanner(System.in);
            price[i] = inputAdmin.nextInt();

        }

        int[][] buyList = new int[2][6];
        String yn = null;
        System.out.print("\nAdded. Plese buy - enter ID of item (1-5): ");

        int i = 1;
        for (int i2 = 0; i2 < 5; i2++) {
            // Enter ID of item:
            Scanner inputShoper = new Scanner(System.in);
            buyList[0][i] = inputShoper.nextInt();
            // Insert ID of item to the array - for next price count

            System.out.print("How much? (Enter a number): ");
            buyList[1][i++] = inputShoper.nextInt();
            System.out.print("\nIn bag. Want buy more? [y/n] ");

            Scanner YN = new Scanner(System.in);
            yn = YN.next();
            if (yn.equals("n")) {               
                break;
            }

            System.out.print("Enter ID of next item to buy: ");

        }

        for (int row = 0; row < buyList.length; row++) {
            // paint a table
            for (int col = 0; col < buyList[row].length; col++) {               
                System.out.print(buyList[row][col] + "\t");                   
            }             
            System.out.println();            
        }

        for (int temp = 0; temp < items.length; temp++) {              
            System.out.print(" " + items[temp]);                
        }

        for (int temp = 0; temp < items.length; temp++) {                
            System.out.print(" " + price[temp]);               
        }

        // ----- price count
        int totalPrice = 0;
        int tempPrice = 0;
        for (i = 1; i < buyList[0].length; i++) {                
            tempPrice = buyList[1][i] * price[i];
            System.out.print(" | " + tempPrice);
            totalPrice += buyList[1][i] * price[i];
            System.out.println(totalPrice);
            // count * price             
        }

        System.out.println("Your price is: " + totalPrice);

        // ----- black list -----
        System.out.print("How much money you have? ");

        int cash = 0;
        Scanner Cash = new Scanner(System.in);
        cash = Cash.nextInt();

        if (cash < totalPrice) {                
            System.out.println("You are in our Black List.");            
        }
        else {                
            System.out.println("Thank you for purchasing.");                
        }

    }

} 
```

输出：

> ```
>  Administrator: add five items - name and price: 
>      item 1: Milk
>     Price 1: 11
>      item 2: Broad
>     Price 2: 22
>      item 3: Mouse
>     Price 3: 33
>      item 4: Keyboard
>     Price 4: 44
>      item 5: Monitor
>     Price 5: 55
> 
>     Added. Plese buy - enter ID of item (1-5): 1
>     How much? (Enter a number): 1
> 
>     In bag. Want buy more? [y/n] y
>     Enter ID of next item to buy: 2
>     How much? (Enter a number): 2
> 
>     In bag. Want buy more? [y/n] y
>     Enter ID of next item to buy: 5
>     How much? (Enter a number): 4
> 
>     In bag. Want buy more? [y/n] n
>     0 1   2   5   0   0   
>     0 1   2   4   0   0   
>      null Milk Broad Mouse Keyboard Monitor 0 11 22 33 44 55 | 1111
>      | 4455
>      | 132187
>      | 0187
>      | 0187
>     Your price is: 187 
> ```

最终价格 - 187。但是：

(11*1) + (22*2) + (55*4) = 22 + 44 + 220 = 286。

286 - 必须，但此代码得到 187。

它在这行代码中计算：

```
totalPrice += buyList[1][i] * price[i]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:11:59.860

计算循环中有错误。您需要访问要计算的商品的价格 price[buyList[0][1]] 而不是 price[i]，请改用：

```
for (i = 1; i < buyList[0].length; i++) {
    tempPrice = buyList[1][i] * price[buyList[0][i]];
    System.out.print(" | " + tempPrice);
    totalPrice += buyList[1][i] * price[buyList[0][i]];
    System.out.println(totalPrice);
    // count * price
} 
```

除此之外，正如建议的那样，不要每次都创建一个 Scanner，此外，您已经在 tempPrice 变量中有价格，您不应该计算 2 次（此代码中的第 2 行和第 4 行）

希望能帮助到你。

# linux - 在特定目录中设置环境变量

> ID：14462591
> 
> 赞同：6
> 
> 时间：2013-01-22T15:53:40.507
> 
> 标签：linux, bash, variables

这是一个 .bashrc 问题。我想`"export FOO=bar"`在特定目录中设置 .bashrc，例如`.rvmrc`.

我在下面试过。

```
$ touch ~/foo/.bashrc
$ echo 'export RAILS_ENV=development' >> ~/foo/.bashrc
$ cd foo/
$ env|grep RAILS_ENV 
```

但`RAILS_ENV`在这种情况下不应设置任何内容。

如果我设置`.rvmrc`为而不是 .bashrc，它会通过！但这是更好的设置方式，`.bashrc`因为我不需要安装 rvm 环境。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T16:15:02.500

在你的 bashrc 中设置这个：

```
PROMPT_COMMAND='[[ $PWD == "/foo/bar/" ]] && export FOO=BAR || unset FOO' 
```

PROMPT_COMMAND 变量的内容将在每次重写提示符时执行（就在实际写入之前），上面的命令会检查 $PWD 变量（保存 shell 的当前工作目录）与“/foo/bar”是否相符匹配它导出您的变量，如果不匹配，则该变量未设置。

例如

```
peteches@yog-sothoth$ PROMPT_COMMAND='[[ $PWD == "/home/peteches/test" ]] && export FOO=BAR || unset FOO'
peteches@yog-sothoth$ pwd
/home/peteches
peteches@yog-sothoth$ cd test
peteches@yog-sothoth$ pwd
/home/peteches/test
peteches@yog-sothoth$ env | grep FOO
6:FOO=BAR
73:PROMPT_COMMAND=[[ $PWD == "/home/peteches/test" ]] && export FOO=BAR || unset FOO
peteches@yog-sothoth$ cd ../
peteches@yog-sothoth$ pwd
/home/peteches
peteches@yog-sothoth$ env | grep FOO
72:PROMPT_COMMAND=[[ $PWD == "/home/peteches/test" ]] && export FOO=BAR || unset FOO
peteches@yog-sothoth$ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T16:15:33.770

如果您不介意使用解决方法，请将其添加到您的`.bash_profile`

```
mycd()
{
    cd $1
    if [ "$(pwd)" == "/your/folder/that/needs/env" ]; then
        export RAILS_ENV=development
    else
        export RAILS_ENV=
    fi;
}
alias cd=mycd 
```

每次您移动到某个文件夹时，这都会设置您的环境变量或您想要的任何内容

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-22T16:04:29.273

首先，AFAIK`bash`不会`.bashrc`在除您家之外的任何其他目录中搜索文件——至少默认情况下不会。

其次，在向您的 . 写入新条目后`.bashrc`，您应该`source .bashrc`对文件进行修改，以便进行修改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-15T16:10:08.713

查看[`direnv`](https://github.com/direnv/direnv)

> `direnv`是您的外壳的扩展。它增加了现有的 shell 的新功能，可以根据当前目录加载和卸载环境变量。

基本上检查`.envrc`位于当前或父目录中的文件，并相应地调整您的环境变量。

# asp.net - 在 ASP.NET 中使用什么方法进行投票

> ID：14462599
> 
> 赞同：0
> 
> 时间：2013-01-22T15:54:12.127
> 
> 标签：asp.net, cookies

我在网站上有很多报价，我希望用户能够投票，喜欢或不喜欢每个报价。问题是，如果我将投票信息保存在 cookie 中，则有 4kb 的限制，如果有访问者对 100 个报价进行投票，则可能超过 cookie 限制。

为未登录的用户存储投票信息的最佳方法是什么？

投票也存储在数据库中，但没有保存任何用户信息。只有登录的用户保存了每次投票的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:56:37.960

您可以使用 HTML5[本地存储](http://diveintohtml5.info/storage.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:13:54.473

我会为未登录的用户分配一个随机 ID，并将此 ID 存储在 cookie 中。

然后可以使用 Id 来引用数据库中的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:13:57.120

您可以在带有列的表格上保存投票：

*   报价单，

*   用户指导（指导）

并在具有指定 GUID 的非注册用户浏览器上设置 cookie

当用户访问您的站点时，请检查用户 GUID 或为他分配一个新的。这样您就可以阻止投票。

# blazeds - adobe flex 4.6 的服务器推送框架

> ID：14462604
> 
> 赞同：1
> 
> 时间：2013-01-22T15:54:29.460
> 
> 标签：blazeds

我有一个使用 php 作为后端的 adobe flex 4.6 的 Web 应用程序。该应用程序允许多个用户进行协作。目前，一个用户所做的更改仅在刷新时才会反映给其他用户。我已经查看了需要 Java 后端的 Adob​​e 的 BlazeDS。这将需要我将一些 php 代码更改为 java 代码。这是正确的方法吗，或者任何人都可以建议一个更好的框架，让服务器推送数据库更新，而不是每次都进行刷新？

# angularjs - 在 AngularJS 指令中转义 HTML 文本

> ID：14462612
> 
> 赞同：28
> 
> 时间：2013-01-22T15:54:49.820
> 
> 标签：angularjs

是否有一个 Angular JS 命令可以对文本进行 HTML 转义？我正在处理一个自定义指令，并且需要转义它生成的一些输出。

AngularJS sanitzer 在内部使用 encodeEntities 函数，但不公开它。我知道我可以复制该功能，但似乎应该有一个标准的方法来做到这一点。

* * *

*用例*：我有一个执行语言本地化的自定义指令。该指令使用数据文件中的键查找来查找语言文本。在某些情况下，允许此文本包含 HTML，和/或指令生成 HTML 以改进生成的视觉格式。此外，该指令将 Angular 表达式作为参数，并将它们用作字符串中标记的替换。我需要对这些参数进行编码，因为它们可能不是 HTML 安全的。

该指令被称为属性，例如`i18n-html='welcome_text_html,1+1,user.name'`. 然后该指令按照描述格式化字符串并用于`element.html`更新 DOM 节点。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-02-16T09:12:59.193

这个答案是关于*转义*，而不是*清理*HTML。有两种方法：

1.  正如@maniekq 所提到的，如果您可以在 DOM 上工作，请执行以下操作：

    ```
    element.text( scope.myValue ); 
    ```

2.  从此[答案](https://stackoverflow.com/a/12034334/214446)中，您可以使用[mustache.js 中的此代码](https://github.com/janl/mustache.js/blob/master/mustache.js#L82)，例如创建一个角度过滤器：

    ```
    angular.module('myModule').filter('escapeHtml', function () {

        var entityMap = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': '&quot;',
            "'": '&#39;',
            "/": '&#x2F;'
        };

        return function(str) {
            return String(str).replace(/[&<>"'\/]/g, function (s) {
                return entityMap[s];
            });
        }
    }); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-28T23:58:58.653

消毒是一回事，但要显示所有字符而不是“执行”HTML 代码，我使用了“文本”函数来设置值。

在您的指令中，设置值，而不是编写：

```
element.html( scope.myValue ); 
```

写：

```
element.text( scope.myValue ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-29T03:48:23.680

这个答案来自**@mb21**的。唯一改变的是使用`$sce`. `ng-bind-html`所以你可以在不触发的情况下使用这个过滤器`Error: $sce:unsafe`。

```
angular
  .module('yourModule', [
    'ngSanitize'
  ])
  .filter('escapeHtml', function ($sce) {
    // Modified by Rockallite: Add $sce.trustAsHtml() to mute "Error: $sce:unsafe"
    // http://stackoverflow.com/a/32835368/2293304
    // http://stackoverflow.com/a/28537958/2293304
    // https://github.com/janl/mustache.js/blob/master/mustache.js#L82
    var entityMap = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': '&quot;',
        "'": '&#39;',
        "/": '&#x2F;'
    };

    return function(str) {
      return $sce.trustAsHtml(String(str).replace(/[&<>"'\/]/g, function (s) {
          return entityMap[s];
      }));
    }
  }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-17T01:31:05.640

转义 HTML 有两个不同的问题。第一个问题是需要对实体进行编码，第二个问题是需要信任结果，以便将数据用作 html 绑定。将以下代码添加到您的控制器中，可以使用 $sce 服务为这两个问题提供解决方案。

CoffeeScript 解决方案：

```
MyApp.controller('MyController', ['$scope','$sce',($scope,$sce) ->

  ###
  ...
  ###

  $scope.html5Entities = (value) ->
    value.replace(/[\u00A0-\u9999<>\&\'\"]/gim, (i) ->
      '&#' + i.charCodeAt(0) + ';'
    )

  $scope.trustAsHtml = (value) ->
    $sce.trustAsHtml(value)

  ###
  ...
  ###

]) 
```

Javascript解决方案：

```
MyApp.controller('MyController', ['$scope','$sce', function($scope,$sce) {

  /* ... */

  $scope.html5Entities = function(value) {
    return value.replace(/[\u00A0-\u9999<>\&\'\"]/gim, function(i) {
          return '&#' + i.charCodeAt(0) + ';'
        })
  };

  $scope.trustAsHtml = function(value) {
     return $sce.trustAsHtml(value);
  };

  /* ... */

}]); 
```

第一个函数**html5Entities**执行实际的实体编码，而第二个函数**trustAsHtml**将字符串标记为在 Angular 中用于 HTML 绑定是安全的。这两个版本都要求您的控制器中包含 $sce 服务。

示例用法：

```
<div ng-bind-html="trustAsHtml((html5Entities(product.title) | highlight: $select.search))"></div> 
```

查看相关问题：

*   [在 javascript 中编码 html 实体](https://stackoverflow.com/questions/18749591/encode-html-entities-in-javascript#answer-23834738)

*   [AngularJS：将 HTML 插入视图](https://stackoverflow.com/questions/9381926/insert-html-into-view-using-angularjs#answer-22640608)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-02T16:06:25.840

您可以像这样实现过滤器：

```
app.filter('escape', escape);

 function escape() {
    return function (html) {
      return angular.element('<pre/>').text(html).html();
    };
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T02:16:45.120

在 AngularJS 中进行 HTML 清理有两种方法。第一个是使用 ngBindHtml 指令，第二个是使用 $sanitize 服务。

```
function MyCtrl ( $scope, $sanitize ) {
  $scope.rawHtml = "<div><script></script></div>";
  $scope.sanitizedHmtl = $sanitize( $scope.rawHtml );
} 
```

那么这两个在功能上是等价的：

```
<div ng-bind-html="rawHtml"></div>
<div ng-bind-html-unsafe="sanitizedHtml"></div> 
```

如果在指令中使用，如您的问题，您可以简单地插入经过清理的 HTML：

```
element.html( scope.sanitizedHtml ); 
```

但在大多数情况下，在编写指令时，您会在模板中使用它并使用 ngBindHtml，如上所述。但它适用于极端情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-01T16:30:30.417

这不是直接的解决方案，但如果您深入研究 angular-sanitize 代码，您可以找到 function `encodeEntities`。这很好，但很私密。寻找它的用法，你会去`htmlSanitizeWriter`，然后去`sanitizeText`。它仍然是私有的，但用于 public filter `linky`。

您可以明确使用`linky`并希望找不到任何链接，或者重新实现`sanitizeText`或`encodeEntities`集成您的服务。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-08-29T12:29:46.107

在 Angular 应用程序中使用的 HTML 模板文件中使用*[innerHtml]*速记标记。

下面显示的示例转义 wordpress 在从我的 WP API 检索到的 post_content 上生成的 HTML，因此 html 标记不会显示在浏览器中：

```
<div [innerHtml]="post.post_content" *ngIf="post && post.post_content"></div> 
```

希望这可以帮助。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2014-03-03T10:03:47.870

您可以使用 ngSanitize 中的 encodeEntities() 函数来转义 & < > 等。

# json - 参数化 JSON POST 请求以使用 SOAPUI 测试 REST Web 服务

> ID：14462616
> 
> 赞同：2
> 
> 时间：2013-01-22T15:54:53.297
> 
> 标签：json, rest, post, soapui

我正在使用 SOAPUI 测试 REST Web 服务。我正在尝试参数化 POST JSON 请求。所以我创建了一个名为“JSON.request”的文件并将其附加在请求下（请参阅随附的屏幕截图）。

![图片说明](../Images/bbcea040bade9aba889dc64135ebcd35.png)

当我的文件包含一个 JSON 请求时，它可以正常工作。例如

```
 { "operation": "PayTxn.Account,CanLogin", "sessionid": 0, "parms": [{"UserName":
     "abcd", "Password": "password"}] }' 
```

但是当有多个请求时，我遇到了问题（由 a 分隔`;`）

```
 { "operation": "PayTxn.Account,CanLogin", "sessionid": 0, "parms": [{"UserName": 
    "abcd", "Password": "password"}] };{ "operation": "PayTxn.Misc,GetCountryCodes", 
    "sessionid": 0} 
```

在请求的属性中，我将多值分隔符的值指定为`;`

在日志中，我收到以下错误：

```
 org.apache.xmlbeans.XmlException: error: Unexpected element: CDATA
    at org.apache.xmlbeans.impl.store.Locale$SaxLoader.load(Locale.java:3486)
    at org.apache.xmlbeans.impl.store.Locale.parse(Locale.java:712)
    at org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:696)
    at org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:683)
    at org.apache.xmlbeans.impl.schema.SchemaTypeLoaderBase.parse(SchemaTypeLoaderBase.java:208)
    at org.apache.xmlbeans.XmlObject$Factory.parse(XmlObject.java:633)
    at com.eviware.soapui.support.xml.XmlUtils.createXmlObject(XmlUtils.java:217)
    at com.eviware.soapui.impl.rest.panels.request.inspectors.schema.InferredSchemaInspector.afterSubmit(InferredSchemaInspector.java:131) 
    at com.eviware.soapui.impl.wsdl.WsdlSubmit.run(WsdlSubmit.java:157) 
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) 
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) 
    at java.util.concurrent.FutureTask.run(Unknown Source) 
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) 
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) 
    at java.lang.Thread.run(Unknown Source) Caused by: org.xml.sax.SAXParseException; systemId: file:; lineNumber: 1; columnNumber: 1; Unexpected element: CDATA 
    at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.reportFatalError(Piccolo.java:1038) 
    at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.parse(Piccolo.java:723) 
    at org.apache.xmlbeans.impl.store.Locale$SaxLoader.load(Locale.java:3454) ... 14 more 
```

所以，请让我知道如何解决它。此外，为了参数化 SOAP Web 服务，我一直使用 DataSource 和 DataSource Loop，但我认为要参数化 JSON POST 请求，我必须遵循上述方法。

任何帮助都感激不尽。

# c++ - 没有匹配的函数来调用“标准构造函数”

> ID：14462617
> 
> 赞同：3
> 
> 时间：2013-01-22T15:55:00.097
> 
> 标签：c++, class, constructor

我从我的 c++ 编译器得到一个奇怪的响应。我搜索了互联网，但没有找到任何有用或有帮助的...

**编译器响应：**

> float.hpp|第 29 行|警告：`class HexFloatingPoint' 具有虚函数但非虚析构函数
> 
> 在构造函数 `HexFloatingPoint::HexFloatingPoint(int, int)' 中：
> 
> float.cpp|第 5 行|错误：没有用于调用“FloatingPoint::FloatingPoint()”的匹配函数
> 
> float.hpp|第 16 行|注：候选对象是：FloatingPoint::FloatingPoint(const FloatingPoint&)
> 
> float.cpp|第 3 行|注：FloatingPoint::FloatingPoint(int, int)

这些是代码文件：

**主文件**

```
#include <iostream>
#include "floating.hpp"

using namespace std;

int main(int argc, char* argv[])
{

    return 0;
} 
```

**浮动.hpp**

```
#ifndef FLOATING
#define FLOATING

#include <string>
#include <vector>

using namespace std;

class FloatingPoint;
class HexFloatingPoint;
class HexDigit;
class HexDigitBool;
class HexDigitChar;

class FloatingPoint
{
private:
    int significant_length;
    int exponent_length;

public:
    FloatingPoint(int sign_length,int exp_length);
    virtual void set_significant(string number) = 0;
    virtual void set_exponent(string number);
    virtual void print();
};

class HexFloatingPoint : public FloatingPoint
{
private:
    vector<HexDigit*> significant_length;
    vector<HexDigit*> exponent_length;
public:
    HexFloatingPoint(int sign_length,int exp_length);
    void set_significant(string number);
    void set_exponent(string number);
    void print();
    ~HexFloatingPoint();
};

class HexDigit
{
public:
    virtual void print()=0;
    virtual void set_value(char c);
    virtual int get_value();
};

class HexDigitBool : public HexDigit
{
private:
    bool b[4];
public:
    void print();
    virtual void set_value(char c);
    virtual int get_value();
};

class HexDigitChar : public HexDigit
{
private:
    char c;
public:
    void print();
    virtual void set_value(char c);
    virtual int get_value();
};

#endif 
```

**浮动.cpp**

```
#include "floating.hpp"

FloatingPoint::FloatingPoint(int sign_length,int exp_length) : significant_length(sign_length),exponent_length(exp_length){}

HexFloatingPoint::HexFloatingPoint(int sign_length,int exp_length) : significant_length(sign_length),exponent_length(exp_length){}
void HexFloatingPoint::set_significant(string number){}
void HexFloatingPoint::set_exponent(string number){}
void HexFloatingPoint::print(){}
HexFloatingPoint::~HexFloatingPoint(){} 
```

我希望你能帮助我。我已经尝试添加 FloatingPoint(); 在 floating.hpp 和 floating.cpp 但它没有帮助。

**更新 1**

将构造函数更改为

```
HexFloatingPoint::HexFloatingPoint(int sign_length,int exp_length) : FloatingPoint(sign_length,exp_length){} 
```

编译器说不...

```
floating.o||In function `_ZNSt12_Vector_baseIP8HexDigitSaIS1_EED2Ev':|
stl_vector.h:(.text+0x8)||undefined reference to `vtable for FloatingPoint'|
floating.o||In function `_ZN13FloatingPointC1Eii':|
floating.cpp|3|undefined reference to `vtable for FloatingPoint'|' 
```

**更新 2**

改变

```
class FloatingPoint
{
private:
    int significant_length;
    int exponent_length;

public:
    FloatingPoint(int sign_length,int exp_length);
    virtual void set_significant(string number) = 0;
    virtual void set_exponent(string number);
    virtual void print();
}; 
```

至

```
class FloatingPoint
{
private:
    int significant_length;
    int exponent_length;

public:
    FloatingPoint(int sign_length,int exp_length);
    virtual void set_significant(string number) = 0;
    virtual void set_exponent(string number) = 0;
    virtual void print() = 0;
}; 
```

解决了更新 1 中出现的错误

改变

```
class HexFloatingPoint : public FloatingPoint
{
private:
    vector<HexDigit*> significant_length;
    vector<HexDigit*> exponent_length;
public:
    HexFloatingPoint(int sign_length,int exp_length);
    void set_significant(string number);
    void set_exponent(string number);
    void print();
    ~HexFloatingPoint();
}; 
```

至

```
class HexFloatingPoint : public FloatingPoint
{
private:
    vector<HexDigit*> significant_length;
    vector<HexDigit*> exponent_length;
public:
    HexFloatingPoint(int sign_length,int exp_length);
    void set_significant(string number);
    void set_exponent(string number);
    void print();
    virtual ~HexFloatingPoint();
}; 
```

已解决的警告

改变

```
HexFloatingPoint::HexFloatingPoint(int sign_length,int exp_length) : significant_length(sign_length),exponent_length(exp_length){} 
```

至

```
HexFloatingPoint::HexFloatingPoint(int sign_length,int exp_length) : FloatingPoint(sign_length,exp_length),significant_length(sign_length),exponent_length(exp_length){} 
```

修复了第一个问题

非常感谢各位！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:56:34.020

```
In constructor `HexFloatingPoint::HexFloatingPoint(int, int)':

floating.cpp|line 5|error: no matching function for call to `FloatingPoint::FloatingPoint()'

floating.hpp|line 16|note: candidates are: FloatingPoint::FloatingPoint(const FloatingPoint&)

floating.cpp|line 3|note: FloatingPoint::FloatingPoint(int, int) 
```

一旦你为你的类提供了任何构造函数，如果你的代码调用无参数构造函数，你还必须显式地提供一个不带任何参数的构造函数。

警告清楚地告诉您，您的代码在调用构造函数时调用了无参数构造函数：

```
HexFloatingPoint(int, int) 
```

所以要么：

*   您应该显式提供无参数构造函数或
*   如果您不想为基类提供默认的无参数构造函数，则应使用***[成员初始值设定项列表并从基类调用所需版本的构造函数。](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor/8523361#8523361)***

    float.hpp|第 29 行|警告：`class HexFloatingPoint' 具有虚函数但非虚析构函数

这是一个重要的警告。您的类`HexFloatingPoint`有一个`virtual`成员函数，这意味着它还应该提供一个`virtual`析构函数。
请注意，如果您没有在基类中提供虚拟析构函数并且您调用`delete`指向派生类对象的基类指针，那么它将导致未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:58:11.550

`HexFloatingPoint`派生自`FloatingPoint`，但您不会在`FloatingPoint`' 的构造函数的初始化列表中调用任何 ' 的构造`HexFloatingPoint`函数。这意味着被调用的默认（无参数）构造函数`FloatingPoint`，但类没有定义它，所以你得到错误。

要么调用`FloatingPoint`in`HexFloatingPoint`的初始化列表的构造函数，要么给出`FloatingPoint`默认构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:08:43.557

首先，错误。您的构造函数`HexFloatingPoint`没有初始化基类`FloatingPoint`. 由于您定义了一个带有两个参数的构造函数，并且没有默认构造函数（不包含参数），因此派生类必须使用您定义的构造函数对其进行初始化：

```
HexFloatingPoint::HexFloatingPoint(int sign_length,int exp_length) :
    FloatingPoint(sign_length, exp_length),  // ADD THIS
    significant_length(sign_length),
    exponent_length(exp_length)
{} 
```

或者，您可能希望能够保持基类成员未初始化，或将它们初始化为默认值，在这种情况下，您需要提供默认构造函数：

```
FloatingPoint() {} // or initialise the members if you want 
```

但这可能不是您想要做的；您可能想要正确初始化它们。

其次，警告。通常，当您拥有多态基类时，您会希望通过指向基类的指针来删除派生对象。仅当基类声明了虚拟析构函数时才允许这样做；否则，这种删除会产生未定义的行为。我建议您遵循编译器的建议并添加一个：

```
virtual ~FloatingPoint() {} 
```

最后，一旦您修复了编译器错误（假设没有比您发布的代码更多的代码），由于缺少 and 的定义，您将收到链接器`FloatingPoint::set_exponent`错误`FloatingPoint::print`。这是因为您已将它们声明为虚拟但不纯，并且尚未实现它们。他们可能想成为纯虚拟的，例如`set_significant`：

```
virtual void set_exponent(string number) = 0;
                                         ^^^ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T15:58:47.633

> float.hpp|第 29 行|警告：`class HexFloatingPoint' 具有虚函数但非虚析构函数

向 HexFloatingPoint 添加一个虚拟析构函数：

```
virtual ~HexFloatingPoint(); 
```

一旦类具有虚函数，就需要声明/定义虚析构函数，否则如果通过基类指针或客户端代码中的引用访问派生类，派生类的析构函数可能不会'不要被调用，行为是未定义的。通常，对象的派生部分不会被删除（通过基引用或指针访问），在这种情况下，您会留下内存泄漏。查看有效 C++，第 7 项。

> float.hpp|第 29 行|警告：`class HexFloatingPoint' 具有虚函数但非虚析构函数

为类定义构造函数后，不会自动定义默认构造函数 HexFloatingPoint()，您需要将其显式添加到类声明/定义中。

# doctrine-orm - 原则 2 中没有为实体指定标识符/主键

> ID：14462618
> 
> 赞同：3
> 
> 时间：2013-01-22T15:55:00.917
> 
> 标签：doctrine-orm, entity, zend-framework2

我正在使用 Zend 2 框架，我正在尝试使用 Doctrine 2 获取数据。

但是，实体文件中出现以下错误。

**教义\ORM\映射\映射异常**

**没有为实体“Acl\Entity\Permission”指定标识符/主键。每个实体都必须有一个标识符/主键。**

如何指定主键？

我正在使用以下代码。

```
/**
 * User Permissions
 *
 * @ORM\Entity
 * @ORM\Table(name="acl_permissions")
 * @property int $id
 * @property int $role_id
 * @property int $resource_id
 * @property string $action
 */
class Permission
{
    /**
     * @ORM\Column(type="integer")
     */
    public $id;

    /**
     * @ORM\Column(type="integer")
     * @ORM\OneToOne(targetEntity="Role")
     * @ORM\JoinColumn(name="role_id", referencedColumnName="id")
     */
    public $role;

    /**
     * @ORM\Column(type="integer")
     * @ORM\OneToOne(targetEntity="Resource")
     * @ORM\JoinColumn(name="resource_id", referencedColumnName="id")
     */
    public $resource;

    /**
     * @ORM\Column(type="string")
     */
    public $action;

    public function getRole()
    {
    return $this->role;
    }

    public function getResource()
    {
    return $this->resource;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T16:04:28.737

你检查[过文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/basic-mapping.html#identifiers-primary-keys)吗？

您可以使用`@ORM\Id`注释定义主键。如果值是自动生成的（例如，如果使用`auto_increment`），您还需要设置`@ORM\GeneratedValue(strategy="IDENTITY")`注释。

# android - Android TextWatcher 在键入时替换下划线

> ID：14462622
> 
> 赞同：0
> 
> 时间：2013-01-22T15:55:06.370
> 
> 标签：android, textwatcher

简介：我目前正在尝试为我的填字游戏实现一种输入法，用户可以在`EditText`其中看到类似. 下划线标记缺少的字母，输入的第一个字符将填充第一个下划线。当然，拼图中的其他单元格可能已经解决，所以文本可能是. 我已经在我自己的输入视图中拥有了所有这些功能，这是一个视图的子类，带有一个被覆盖的. 这工作得很好，除了视图不会出现在某些较低的 Android 版本上，并且后退键滑过我的输入例程并且无法访问。`"____"``EditText``EditText``"ST_CKOV_RF_OW"``onDraw()`

所以我想我会用`EditText`, 实现 a`TextWatcher`并且没问题，但我不能让它正常工作。我现在正在工作，我可以使用键盘输入字母，但是 Backspace 再次不起作用，当然，如果用户触摸到`EditText`该位置就会搞砸。

```
public void beforeTextChanged(CharSequence s,int start,int count, int after){
                    et.removeTextChangedListener(textWatcher);
                    int position = text.indexOf("_");
                    if(position==-1) onAnswerEntered(et.getText().toString().replace("_", "")); //finished
                    else {
                        et.setSelection(et.getText().toString().indexOf("_"));
                        et.addTextChangedListener(textWatcher);
                    }
                } 

public void onTextChanged(CharSequence s, int start, int before, int count) {
                    et.removeTextChangedListener(textWatcher);
                    try {                   
                        String currentKey = s.toString().substring(start, start+1);
                        Logger.log("Current Key", currentKey);

                        int position = text.indexOf("_");
                        Logger.log("Current Position _ ", position+"");

                        //replace _ with key
                        String sbefore=text.substring(0, position);
                        String safter=text.substring(position+1, text.length());
                        text=sbefore+currentKey+safter;

                        int positionNext = text.indexOf("_");
                        Logger.log("Next Position _ ", positionNext+"");

                        if(positionNext==-1) onAnswerEntered(et.getText().toString().replace("_","")); //finished
                        else {
                            et.setText(text);
                            et.setSelection(et.getText().toString().indexOf("_"));
                            et.addTextChangedListener(textWatcher);
                        }

                    } catch(IndexOutOfBoundsException ioobe) {
                        ioobe.printStackTrace();
                    }

                } 
```

我也尝试设置一个`OnKeyListener`，但它不起作用`EditText`（我可以得到退格事件，没有别的）

所以也许我完全走错了路，但请帮助我，给我一个线索，告诉我如何实现我的目标。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:49:08.370

我放弃了它并实施了一种简单但有效的黑客攻击。我现在在我的（隐藏的）EditText 中接收输入，输出转到可见的 TextView，中间的一个函数用来自 EditText 的输入填充“_”。前任。

提示=“A_A_A_A”编辑文本输入=“BBB”文本视图显示“ABABABA”

# ios - 精灵上的 CCJumpBy

> ID：14462623
> 
> 赞同：0
> 
> 时间：2013-01-22T15:55:06.147
> 
> 标签：ios, ipad, cocos2d-iphone

这些是我的第一个 Cocos2D 项目，我试图**在触摸时**让精灵在同一个地方跳跃，但我无法让它响应，因为我不知道如何在精灵上设置触摸动作。这是代码：

```
-(void) spriteEffect
{
    CCSprite *actionEffect = avatar;
    id jump = [CCJumpBy actionWithDuration:1 position: ccp(0, 0) height:50 jumps:2];
    id sequence = [CCSequence actions: jump, nil];
    [actionEffect runAction:sequence];

    return yes
} 
```

我应该使用

```
- (BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:09:04.983

您的评论`avatar`是一组精灵，有助于澄清为什么您看不到任何效果。尝试执行以下操作：

```
-(void) spriteEffect
{
 CCSprite *actionEffect = <get a sprite from avatar array>;
 id jump = [CCJumpBy actionWithDuration:1 position: ccp(0, 0) height:50 jumps:2];
 [actionEffect runAction:jump]; 
```

}

我不知道数组`avatar`是什么类型的，所以我无法提供访问其元素的语法。如果`avatar`是`NSArray`，您可以使用以下方法使所有精灵跳跃：

```
-(void) spriteEffect
{
   foreach (CCSprite* actionEffect in avatar) {
     id jump = [CCJumpBy actionWithDuration:1 position: ccp(0, 0) height:50 jumps:2];
     [actionEffect runAction:jump];
   } 
```

}

# php - 从 PHP 函数返回数组

> ID：14462624
> 
> 赞同：0
> 
> 时间：2013-01-22T15:55:19.303
> 
> 标签：php, sql, return-value

这段代码有什么问题？我正在尝试返回一个数组并在调用者函数中使用它。

```
function my_subjects()
        {   
            $all_my_teams=my_teams();
            $k=0;
            $_subjects=array();
            while($team=mysql_fetch_assoc($all_my_teams))
            {
                $q="SELECT $this->user_field FROM $team";
                $r=mysql_query($q);

                while($i=mysql_fetch_assoc($r))
                {
                    $_subjects[k++]=$i;
                }
            }                   

            return $_subjects;
        } 
```

注意：函数 my_teams() 返回的值类似于通过 all_my_teams 变量使用的 $r 变量。它包含所有团队的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:18:56.383

1.  打开[`error_reporting`](http://ca2.php.net/manual/en/function.error-reporting.php)以查看您的代码是否产生错误。
2.  检查您的查询是否成功`if( ! $r=mysql_query($q) ) { die(mysql_error()); }`
3.  `var_dump($_subjects);`查看数据是否符合您的预期。
4.  也许真的告诉我们出了什么问题？您刚刚发布了一段代码并告诉我们“它不起作用”。这并不能很好地表明存在问题。
5.  `$k`无关紧要，只需使用`$_subjects[]=$i;`. [不会导致错误，只是更容易]
6.  停止使用 mysql_* 函数并将您的代码移植到 PDO 或 MySQLi 以：
    *   受益于有助于防止 SQL 注入的参数化查询。
    *   阻止每个人在关于它的评论中开始一个不相关的论点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:57:36.113

```
while($i=mysql_fetch_assoc($r))
                {
                    $_subjects[k++]=$i;
                } 
```

在这里，您还必须为`$i`. 就像是

```
while($i=mysql_fetch_assoc($r))
                {
                    $_subjects[$k++]=$i["field_name"];
                } 
```

数组返回部分就好了。

编辑：您的变量**k**也缺少 $ 符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:02:41.257

```
$_subjects[$k++] = $i; 
```

应该没问题，因为您使用 mysql_fetch_assoc()`$i`将包含结果集的关联数组。

如果这返回一个空数组（这是正确的问题吗？），您应该仔细检查您的 sql 是否正确并实际返回您期望的数据/数据。

编辑：就像 Hanky Panky 提到的那样，'k' 在你的代码中缺少一个 $ 符号 - 这可能是你的问题 - PHP 应该为那个抛出一个解析错误，所以确保你启用了[error_reporting() 。](http://us2.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)

# java - Spring MVC 会话无效，但计数器未重置

> ID：14462625
> 
> 赞同：1
> 
> 时间：2013-01-22T15:55:20.120
> 
> 标签：java, spring-mvc

我正在尝试了解有关 Spring MVC 的 session mgmt 方面的知识，并且正在运行这个[Example](http://springsourcery.org/springSourcery/content/viewContent,1,34.html?random=2602)。但是，“ResetController”没有将表单对象的计数器重置为 0。我确定会话正在失效（如果我调用**session.invalidate()**两次，第二次调用会抛出***Session already invalidated***）。

是我有什么误解，还是博主有误？

# javascript - 两页在 iPad 上抓取点击事件

> ID：14462626
> 
> 赞同：0
> 
> 时间：2013-01-22T15:55:22.693
> 
> 标签：javascript, ipad

我有一个我写的跨平台网站。在 iPad 上，我必须使用 mouseup 和 mouseup 事件来模拟单击（因为它是嵌入在 iFrame 内的 SVG 中的事件，并且如果有人按住，或按下并拖动或按下并释放（单击），则会出现特殊事件）

这是正在发生的事情。touchStart 事件触发。touchEnd 事件触发。我的脚本看到这是一个点击事件，然后触发以下事件：

window.parent.window.location.href = "../TRL/SelectHotspot.aspx" + returnString

然后浏览器转到该页面，但随后（奇怪的是......）位于目标页面上该确切位置的控件接收到单击事件。这意味着它然后移动到下一页。

有谁知道会导致这种情况以及如何阻止它？它不会发生在桌面上（它们不会暴露 touchstart / touchend 事件），也不会发生在任何 android 设备上。

# c++ - C++ 代码迁移：处理未初始化的指针

> ID：14462629
> 
> 赞同：7
> 
> 时间：2013-01-22T15:55:27.920
> 
> 标签：c++, linux

根据标题，我计划移动一些十年前为 AIX 开发的遗留代码。问题是代码库很大。开发人员没有在原始代码中初始化他们的指针。现在，在将代码迁移到最新服务器时，我发现它存在一些问题。

我知道最好的解决方案是遍历所有代码并在需要时初始化所有变量。但是，我只是想知道是否有任何其他解决方案可以解决这个问题。我尝试了谷歌，但找不到合适的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:26:57.473

最具预防性的长期方法是在声明它们的位置初始化所有指针，更改代码以使用适当的智能指针来管理生命周期。如果您有任何类型的单元测试，那么这种重构可能会相对轻松。

在较短的时间内，如果您要移植到 Linux，您可以使用 valgrind 并很好地跟踪一两个困扰您的实际问题，让您有时间以更悠闲的速度进行重构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T17:23:53.350

仅仅初始化所有变量可能不是一个好主意。

可靠的行为通常取决于具有已知正确值的变量（“由构造保证”是正确的）。未初始化变量的问题不仅仅是它们具有未知值。显然，未知是一个问题，但所需的状态再次是具有已知*和正确的*值。将变量初始化为不正确的已知值不会产生可靠的行为。

如果更复杂的初始化失败，则经常会发生没有“默认”值可以正确用作后备的情况。如果在使用变量之前必须覆盖该值，则程序可以选择不使用该值初始化变量。

在这种情况下，将变量初始化为默认值可能会出现一些问题。通常，“默认”值是无害的，因为如果使用它们，后果不会立即明显。这通常是不可取的，因为作为开发人员，您希望在出现问题时注意到这一点。您可以通过选择会产生明显后果的默认值来避免此问题，但这并不能解决第二个问题；静态分析器通常可以检测并报告何时使用了未初始化的变量。如果某些复杂的初始化逻辑存在问题，例如没有设置任何值，您希望它可以被检测到。设置默认值可防止静态分析检测到此类情况。所以有些情况下你不想初始化变量。

* * *

对于指针，默认值通常是`nullptr`，这在一定程度上避免了上面讨论的第一个问题，因为取消引用空指针通常会立即导致崩溃（有利于调试）。然而，代码也可能检测到空指针并报告错误（有利于调试），或者可能会退回到其他方法（不利于调试）。您最好使用静态分析来检测未初始化指针的使用情况，而不是初始化它们。尽管静态分析可以检测到空指针的取消引用，但它不会检测空指针何时导致使用错误报告或回退例程。

* * *

回应您的评论：

> 我看到的主要问题是
> 
> *   从函数返回指向局部变量的指针。
> *   几乎所有的指针变量都没有初始化。我确信 AIX 确实为早期平台中的客户提供了这种舒适感，但是我真的怀疑代码在进行实际测试（生产）时能否在 Linux 中完美运行。
> *   我无法提供可能有效的部分解决方案。我更愿意把最好的给付钱给我的客户。所以不会更喜欢使用解决方法。
> *   质量不能妥协。

*   修复它们（并特别注意正确清理）
*   正如我在上面所说的，仅仅缺少初始化器本身并不是缺陷。如果未初始化的值实际上以非法方式使用，则只有缺陷。我不确定您所说的 AIX 提供舒适性是什么意思。
*   正如我在上面所说的“部分解决方案”和“解决方法”将盲目地初始化所有内容。
*   同样，盲目地初始化所有内容不仅会导致无用的工作，而且实际上会通过取消一些用于检测错误的工具来降低质量。

# php - 二维数组中的array_search导致无限循环

> ID：14462631
> 
> 赞同：0
> 
> 时间：2013-01-22T15:55:34.993
> 
> 标签：php, arrays, multidimensional-array, infinite-loop

我想在二维数组中搜索。所以创建这个函数：

```
function array_search_2d($needle, $haystack){
    foreach($haystack as $k => $h){ 
        $key = array_search($needle, $h);
        if($key !== false){
            return array($k, $key);
        }
    }
    return false;
} 
```

但它会导致无限循环。和网络服务器停机...

我的错在哪里？我审查了很多，但找不到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:01:53.777

它看起来不错，我测试了它：

```
<?PHP

function array_search_2d($needle, $haystack){
    foreach($haystack as $k => $h){ 
        $key = array_search($needle, $h);
        if($key !== false){
            return array($k, $key);
        }
    }
    return false;
}

print_r(array_search_2d(
    'foo',  
    array(
        array(
            'muh',
            'buh',
            'too',
            'brr',
        ),
        array(
            'grr',
            'foo',
            'fuu',
            'brr',
        ),
        array(
            'lop',
            'uio',
            'rvv',
            'dvv',
        ),
    )   
)); 
```

输出是：

```
Array ( 
  [0] => 1 
  [1] => 1 
) 
```

您的问题接缝在其他地方。

请提供您的完整问题代码。

# soundcloud - Widget API 接受干净友好的 URL

> ID：14462634
> 
> 赞同：0
> 
> 时间：2013-01-22T15:55:47.930
> 
> 标签：soundcloud

过去，小部件 HTML5 播放器 API 不接受声音干净友好的 URL，只接受轨道 ID。

但是现在当我尝试它时，它似乎确实可以正常工作，但是我在官方博客或其他地方的任何地方都没有提到它。
所以我的问题是：请问使用它安全吗？

使用： [http](http://w.soundcloud.com/player/?url=http://soundcloud.com/user-name/track-name)
://w.soundcloud.com/player/?url=http://soundcloud.com/user-name/track-name 而不是： [http ://w.soundcloud.com/player/?url= http://api.soundcloud.com/tracks/13692671](http://w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/13692671)

而且，如果您有任何修复事件未触发的严重错误的状态，我很想知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:27:56.993

事件现在应该全部正常触发。

是的，您可以使用友好的 URL，但是，由于我们必须自己解决它们，小部件的初始加载会稍微慢一些。因此，为了更快的加载，仍然建议使用 API URL。

# gwt - maven 自动将 gwt 编译器输出包含到战争爆炸工件

> ID：14462640
> 
> 赞同：0
> 
> 时间：2013-01-22T15:56:17.327
> 
> 标签：gwt, maven-3, artifacts

我使用 JetBrains IDEA 12.0、maven 3.2。并且似乎 maven 自动将 gwt 编译器输出添加到我的默认项目中，工件战争爆炸了。如何关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:10:56.053

**将gwt编译器输出“modulename”添加到战争**工件中不是重点吗？

如果您试图阻止一些未使用的 gwt 输出，例如 WEB-INF 中的“部署”文件夹，则使用**部署** 标志将我们的输入重定向到未包含在战争工件中的文件夹。

在您的 gwt-maven-plugin 配置中的 maven -`<deploy>${project.build.directory}/gwt-symbols-deploy</deploy>`标记中。

您还可以过滤掉您的战争工件内容 - [http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html](http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html)

# ruby-on-rails-3 - rails3 cancan load_resource 用于自定义操作

> ID：14462642
> 
> 赞同：3
> 
> 时间：2013-01-22T15:56:20.640
> 
> 标签：ruby-on-rails-3, cancan, custom-action

我在我的应用程序中使用 cancan 1.6.8。

我必须在我的自定义方法中创建一个购物车。所以我在我的 routes.rb 中添加了自定义操作。例子：

```
resources :carts
   collection do
     get "new_cart"
     post "create_cart"
   end
end 
```

如何`@cart = Cart.new`使用**load_resource**为我的自定义方法（new_cart，create_cart）初始化新对象（）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T07:59:51.937

指定`:new`除`:new`和之外哪些操作是新资源操作`:create`。如果您想构建新资源而不是获取资源，请将操作名称传递到此处。

例子：

```
load_resource :new => [:new_cart, :create_cart] 
```

参考[http://rdoc.info/github/ryanb/cancan/master/CanCan/ControllerAdditions/ClassMethods:load_resource](http://rdoc.info/github/ryanb/cancan/master/CanCan/ControllerAdditions/ClassMethods:load_resource)

# c# - 泛型基本用法

> ID：14462647
> 
> 赞同：6
> 
> 时间：2013-01-22T15:56:34.723
> 
> 标签：c#, generics

我一直在我的课程中使用下面的函数，并想把它写成泛型。

```
public static IEnumerable<MyObject> Get(string csvFile)
{
    return csvFile
        .ReadAsStream()
        .SplitCrLf()
        .Where(row => !string.IsNullOrWhiteSpace(row))
        .Select(row => new MyObject(row.Split(',')));
} 
```

我划掉了下面的代码但没有用

```
public static IEnumerable<T> Get<T>(string csvFile)
{
    return csvFile
        .ReadAsStream()
        .SplitCrLf()
        .Where(row => !string.IsNullOrWhiteSpace(row))
        .Select(row => new typeof(T)(row.Split(',')));
} 
```

请指教。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T16:00:25.210

您不能`new`以这种方式使用泛型类型创建实例¹。考虑为该函数提供一个工厂委托：

```
public static IEnumerable<T> Get<T>(string csvFile, Func<string[], T> factory)
{
    return csvFile
        .ReadAsStream()
        .SplitCrLf()
        .Where(row => !string.IsNullOrWhiteSpace(row))
        .Select(row => factory(row.Split(',')));
} 
```

然后你会这样称呼它：

```
var myObjects = Get("file.csv", row => new MyObject(row)); 
```

或者，您可以返回`IEnumerable<string[]>`²并让调用者决定如何处理它：

```
public static IEnumerable<string[]> Get(string csvFile)
{
    return csvFile
        .ReadAsStream()
        .SplitCrLf()
        .Where(row => !string.IsNullOrWhiteSpace(row))
        .Select(row => row.Split(','));
} 
```

然后调用者可以这样做：

```
var myObjects = Get("file.csv").Select(row => new MyObject(row)); 
```

* * *

¹您可以提供`where T : new()`约束，然后您可以使用泛型类型创建新实例，但前提是它提供了无参数构造函数；构造泛型类型时不能提供参数，并且您的用例似乎需要它。工厂代表是您最好的选择。

作为参考，这是使用泛型类型的构造在无参数情况下的外观：

```
public static T Create<T>() where T : new()
{
    return new T();
} 
```

²更好的是`IEnumerable<IEnumerable<string>>`假设您的`MyObject`构造函数`IEnumerable<string>`也接受。

# ruby-on-rails - has_one 与用户和客户的关联以及 Rails 视图表单

> ID：14462648
> 
> 赞同：0
> 
> 时间：2013-01-22T15:56:35.210
> 
> 标签：ruby-on-rails, view, associations

我有一个 has_one 关联：

has_one 关联用户 -> 客户模型

用户将拥有 customer_id 还是客户将拥有 user_id 属性？

其他问题：在我的 _form 中，我想对所有未与客户关联的用户进行选择/选项，这是最好的方法吗？

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:17:15.770

_id 字段始终在具有belongs_to 的模型中，并引用另一个表名。

```
class Customer < ActiveRecord::Base
  belongs_to :user
end

class User < ActiveRecord::Base
  has_one :customer
end 
```

在这种情况下，customers 表将有一个 user_id 字段。

对于第二个问题，使用外连接在 SQL 中找到缺失值。你想要的 SQL 是

```
select 
from users
  left outer join customers on users.id = customers.user_id
where customers.id is null 
```

在 ActiveRecord 中，为您的 User 类添加一个范围。

在 Rails 3.x 中：

```
class User < ActiveRecord::Base
  has_one :customer

  scope :missing_customer,
    includes(:customer).where("customers.id is null")
end 
```

在 Rails 2.3.x 中：

```
class User < ActiveRecord::Base
  named_scope :missing_customer,
    { :joins => "left outer join customers on users.id = customers.user_id",
      :conditions => "customers.id is null" }
end 
```

# sql - 从本地 WCF 连接到 Azure SQL 数据库

> ID：14462652
> 
> 赞同：1
> 
> 时间：2013-01-22T15:56:46.510
> 
> 标签：sql, azure, connection-string, azure-sql-database

我有一个 WCF Web 服务和本地数据实例在我的本地机器上完美运行。我已经在 azure 上创建了一个数据库实例，以及将 Web 服务连接到它以确保它在我也托管到 Azure 上的 Web 服务之前能够正常工作。

我已经为我的本地数据库设置了一个连接字符串，该连接字符串可以立即使用，因此我认为我只需要将其更改为我的新天蓝色连接字符串，但这不起作用。请参阅下面的工作连接字符串 VS 非工作以及我如何在 DAL 中实现我的代码。

当前/本地连接字符串

```
<add name="VervePhaseOneConnectionString" connectionString="Data Source=SNICKERS\SQLEXPRESS;Initial Catalog=VervePhaseTwo;Integrated Security=True"
          providerName="System.Data.SqlClient" /> 
```

新的天蓝色连接字符串不起作用

```
 <add name="VervePhaseOneConnectionString" connectionString="Server=tcp:server.database.windows.net,1433;Database=VerveDB;User ID=bradleya@server;Password={passwordString};Trusted_Connection=False;Encrypt=True;Connection Timeout=30;"
      providerName="System.Data.SqlClient" /> 
```

使用连接字符串的 DAL 代码

```
SqlConnection oConn = new SqlConnection();
            oConn.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["VervePhaseOneConnectionString"].ConnectionString;
            oConn.Open();
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = oConn;
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "sp_addSessionPlay"; 
```

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:48:25.057

您的机器/网络的防火墙可能会阻止到端口 1433 的出站连接。尝试在您的机器/网络防火墙设置中为端口 1433 添加例外规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:15:30.367

您的连接字符串对我来说是正确的。但是，要检查它，您可以登录到您的 Azure 帐户并单击 SQL 数据库并查看连接字符串。它将为您提供所需的不同示例。

![在此处输入图像描述](../Images/617bdb396c319654aa5cfa5519cab3ec.png)

另外，我假设您已经检查了 Azure 中的防火墙设置？

祝你好运。

# arrays - 数组：在一些附加条件下找到两个数字，使得它们的和最大

> ID：14462653
> 
> 赞同：2
> 
> 时间：2013-01-22T15:56:48.063
> 
> 标签：arrays, algorithm, data-structures

给定一组数字和一个数字`k`，找到最大总和，这样如果您在 index 处选择一个数字，`i`则不应从 index`i - K`到 index选择任何数字`i + K`。

这个问题是在谷歌向我的朋友提出的。我无法找到比天真的解决方案更好的解决方案`O(n^2)`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:39:17.447

您可以通过跟踪数组中第一个 iK-1 条目中看到的所有值的最大值在 O(n) 中执行此操作。

Python代码：

```
A=[3,9,10,3,6,7,1,5]
K=2
m=A[0]
bestsum=0
for i in xrange(K+1,len(A)):
    m=max(A[i-K-1],m) # stores maximum of values in A[0],A[1],...,A[i-K-1]
    bestsum=max(bestsum,A[i]+m)
print bestsum 
```

对于每个索引 i，我们将 A[i] 与 m 组合，这是在数组 A[0],..,A[iK-1] 的初始值中看到的最大值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T16:47:16.473

您可以修改此[http://www.geekviewpoint.com/java/dynamic_programming/positive_subset_sum](http://www.geekviewpoint.com/java/dynamic_programming/positive_subset_sum)或[http://www.geekviewpoint.com/java/dynamic_programming/max_subarray_sum](http://www.geekviewpoint.com/java/dynamic_programming/max_subarray_sum)。

该问题可能无法接受之前对数组进行排序

# android - 这个 dyld: unknown required load command 0x80000022 错误正在杀死我感叹号在这里

> ID：14462654
> 
> 赞同：-1
> 
> 时间：2013-01-22T15:56:56.867
> 
> 标签：android, command, avd, dyld

我有一个 2.2 mac Core 2 Duo - 我想他们叫我 mac Santa Rosa 什么的。

我在 App Inventor 上度过了过去三个月——在意识到我不能使用 admob 或 Airpush 之后——我决定开始学习 java。

我一直在看 thenewboston 的一组 200 个教程，非常棒！

唯一的问题是，我无法启动模拟器。我认为这与以下事实有关，当它询问我 sdcard 应该容纳多少空间时 - 当我尝试按 enter 时 - 它不会让我继续..

```
[2013-01-22 09:46:46 - SDK Manager] dyld: unknown required load command 0x80000022
[2013-01-22 09:46:46 - SDK Manager] Failed to create the SD card.     
[2013-01-22 09:46:46 - SDK Manager] Failed to create sdcard in the AVD folder. 
```

好的，当然，我用谷歌搜索了它。

这就是我发现的。

[https://plus.google.com/110164642453700713590/posts/StCNjEywBPU](https://plus.google.com/110164642453700713590/posts/StCNjEywBPU)

它给了我这个...

设备 873EF9:~ Tahj182$ sudo xattr -rd com.apple.quarantine android-sdk-macosx/option -r 无法识别

```
 usage: xattr [-l] file [file ...]
   xattr -p [-l] attr_name file [file ...]
   xattr -w attr_name attr_value file [file ...]
   xattr -d attr_name file [file ...] 
```

第一种形式列出给定文件上所有 xattr 的名称。第二种形式 (-p) 打印 xattr attr_name 的值。第三种形式 (-w) 将 xattr attr_name 的值设置为 attr_value。第四种形式 (-d) 删除 xattr attr_name。

选项： -h：打印此帮助 -l：打印长格式 (attr_name: attr_value) Device-873EF9:~ Tahj182$

呜呜……我试过这个……

[http://xjaphx.wordpress.com/2011/06/26/create-and-use-emulated-sd-card/](http://xjaphx.wordpress.com/2011/06/26/create-and-use-emulated-sd-card/)

我明白了..

设备 873EF9：~ Tahj182$ /Users/Tahj182/Downloads/adt-bundle-mac-x86_64\ 2/sdk/tools/mksdcard ；出口; dyld：未知所需的加载命令 0x80000022 跟踪/BPT 陷阱注销

[处理完成]

好的，所以在我的日食中..我的 avd 经理不会启动

我可以继续前进，展示我的谷歌解决方案如何让我无处可去..

你们能帮我吗？

:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:05:27.570

我认为，或者在这一点上，我非常确定这与我正在运行 10.5.8 (Leopard) 的事实有关。

由于这个建议，我下载了 Eclipse Classic。

[https://www.buzztouch.com/files/howtos/buzztouch_For_Android-A_Users_Guide.pdf](https://www.buzztouch.com/files/howtos/buzztouch_For_Android-A_Users_Guide.pdf)

Eclipse Classic 显示 Java EE，但我在首选项菜单中看不到 Android。

仍然有一个dyld错误。而且 .jar 文件似乎没有红色 x。

然而，当我运行捆绑包时，我看到了 Android 但无法启动 AVD。我仍然为 SD 卡输入一个值，并且在我创建的类的第一个也是唯一一个 .jar 文件上似乎有一个红色 X。

所以，我想我的问题得到了回答。但我仍然不知道如何解决这个问题。

# html - div 错误，没有保持内联和 margin-top 没有生效？

> ID：14462656
> 
> 赞同：0
> 
> 时间：2013-01-22T15:56:59.537
> 
> 标签：html, css, layout, inline

我想让我的网站在此处具有与此类似的布局：http: [//www.mathewporter.co.uk/](http://www.mathewporter.co.uk/)但我的 div 都没有以正确的方式排列。我尝试过使用，但效果不佳。正如您在 JSFiddle 上看到的那样：http: [//jsfiddle.net/vf4Wu/1/](http://jsfiddle.net/vf4Wu/1/)使用 css：

```
 div.sidebar{
 margin-top: 25px;
 margin-left: 150px;
 display: inline;
 }

 div.content{
 display: inline;
 }

 div.content h2{
 display: inline;
 } 
```

谢谢，我不确定我问这个是否正确。但是如果不是 div，我应该使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:01:44.597

利用：

```
display: inline-block; 
```

内联项目不能接受顶部/底部边距和填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:02:27.853

对每个容器使用浮点数或显示：inline-block

# machine-learning - KD树搜索KNN什么时候不起作用？

> ID：14462657
> 
> 赞同：2
> 
> 时间：2013-01-22T15:57:04.667
> 
> 标签：machine-learning, kdtree, knn

我一直在探索和学习 KNN 的 KD 树（K 最近邻问题），什么时候搜索不起作用？或者是否值得或不改进天真的搜索。这种方法有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:10:03.507

Kd 树在高维度（您必须访问大量树枝）中效果不佳。[一条经验法则](http://en.wikipedia.org/wiki/Kd_tree#High-dimensional_data)是，如果您的数据维度是，那么只有当您拥有的数据点`k`多于多个时，kd 树才会有任何好处。`2^k`

在高维度中，您通常希望切换到近似最近邻搜索。如果您还没有遇到过它，[FLANN](https://www.cs.ubc.ca/research/flann/) ( [github](https://github.com/mariusmuja/flann) ) 是一个非常有用的库（带有 C、C++、python 和 matlab API）；它具有很好的 kd 树、蛮力搜索和几种近似技术的实现，它可以帮助您自动调整它们的参数并轻松地在它们之间切换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T13:18:12.863

这取决于您的距离函数。

您不能使用具有任意距离函数的 kd 树。闵可夫斯基规范应该没问题。但在很多应用程序中，您会希望使用更高级的距离函数。

另外，随着维数的增加，kd-trees 的工作效果会大大降低。

原因很简单：kd-trees 避免查看到边界的一维距离已经大于所需阈值的点，即欧几里得距离的位置（其中 z 是最近的边界，y 是最近的已知点）：

```
(x_j - z_j)      <=>   sqrt(sum_i((x_i - y_i)^2))
equivalently, but cheaper:
(x_j - z_j)^2    <=>   sum_i((x_i - y_i)^2) 
```

你可以想象，这个修剪规则成立的机会随着维度的数量而急剧下降。如果您有 100 个维度，那么单个维度的平方差几乎不可能大于平方差的总和。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-28T00:39:05.357

**knn 的时间复杂度：O(k * lg(n))**

**，其中 k 是 k-最近邻，lg(n) 是 kd-tree 高度**

如果数据集的维度由于如此巨大的空间而很高，kd-trees 将无法正常工作。

让我们考虑你在原点周围有很多点，为简单起见考虑二维

[![在此处输入图像描述](../Images/604f0e5579bd85a3b8fab982498c7b57.png)](https://i.stack.imgur.com/nZ0ZN.png)

如果你想找到任何点的 k 最近邻，那么你必须沿着 4 个轴搜索，因为所有点都彼此靠近，这会导致回溯到 kd-tree 中的其他轴，

所以对于一个 3 维空间，我们必须沿着 8 个方向搜索

**概括为 n 维是 2^k**

所以**时间复杂度变成 O(2^k * lg(n))**

# javascript - 视图中的集合没有方法

> ID：14462658
> 
> 赞同：0
> 
> 时间：2013-01-22T15:57:06.017
> 
> 标签：javascript, model-view-controller, backbone.js

我有我的看法：

```
var TryView = Backbone.View.extend({

initialize: function(){
    this.render();
},

render: function(){

    var test = this.collection.get(0);
    this.collection.each(function(model){
    document.write(model.id+"<br>");
    });
} 
```

});

以及使用一些现有（工作）集合创建它的顺序。

```
var testView = new TryView({collection: test.TestCollection}); 
```

但我得到了错误：

> 对象函数 (){ parent.apply(this, arguments); 没有方法'get'

和 fetch 一样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:00:43.477

您正在尝试调用 get on the 'class' `test.TestCollection`。当你这样做时

```
var testView = new TryView({collection: test.TestCollection}); 
```

您将 TestCollection 'class' （js 中实际上没有类，只有函数）作为`collection`View 的 -attribute。您必须提供 TestCollection 的实例

```
var testCollection = new test.TestCollection();
var testView = new TryView({collection: testCollection}); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:59:49.003

传递集合实例

`new TryView({collection: new test.TestCollection});`

# iphone - 如何纠正在en.lproj文件夹中创建lproj文件夹的Xcode bug？

> ID：14462660
> 
> 赞同：5
> 
> 时间：2013-01-22T15:57:20.143
> 
> 标签：iphone, ios, xcode, ipad, localization

我的项目中有一个 Localizable.strings 文件，我想为其添加更多本地化。

所以我去了项目设置并单击“+”添加语言。不知何故，我不能再在右侧面板上这样做了，因为没有“+”按钮。

Xcode 在文件系统的 en.lproj 文件夹内创建 cn.lproj 文件夹，这很混乱，但其他一些 lproj 文件夹（如 de.lproj）确实在它们所属的位置创建。

如何在不破坏 Xcode 中的所有内容的情况下将 xx.lproj 文件夹移动到它所属的位置？我担心将它们留在 xcode 放置它们的位置会导致运行时出错，因为 cn.lproj 不应该是 en.lproj 的子文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:29:39.980

事实证明这是一个 Xcode 错误，但幸运的是它可以解决。

第一步是备份您的项目。然后将错误放置的 lproj 文件夹从 en.lproj 中移出，如果需要，将它们全部放在本地化的子文件夹中。然后从 Project Navigator 中删除所有链接断开的文件（红色）。对于带有箭头的堆叠文件，您必须删除根项目。不要选择“移至垃圾箱”。然后确保在项目设置中拥有所需的所有本地化。将包含所有 lproj 文件夹的“本地化”sobfolder 拖到 Xcode 中的任意位置，并确保将其添加到当前目标（必须在列表中选中添加到目标复选标记）。就我而言，这样做后一切都按预期运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:05:37.610

添加本地化的正确方法是通过 Xcode 中的 Project Info 窗格。

它看起来像这样：

![这是通过 Xcode 添加本地化的最明显方法](../Images/45090c556dcef5b77aaf8b9c9a825d53.png)

我认为以任何其他方式尝试这样做可能会自找麻烦（或麻烦）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:07:21.713

我认为，您应该有一个英语文件夹 en.lpoj。现在，如果您单击“+”并选择 xx 作为语言，您应该在旧语言附近（可以说在同一级别上）找到另一个名为“xx.lpoj”的语言，而不是在 en.lproj 内。所以删除这个错误的子文件夹，然后再做一次......

# android - Android NotificationCompat 在 2.3 中不显示大图标

> ID：14462661
> 
> 赞同：2
> 
> 时间：2013-01-22T15:57:21.010
> 
> 标签：android, notifications, android-notifications

我在 android 中玩通知，我想知道为什么 NotificationCompat 没有像在 Jellybean 中那样显示大图标和 Gingerbread 中的数字（参见图片），我认为它是为此目的而创建的？

这是我触发通知的方式：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button btnShow = (Button)findViewById(R.id.btnNotif);

    Intent intent = new Intent(this, NotificationReceiverActivity.class);
    PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);

    notificationManager =  (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE);

        NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this)
        .setWhen(System.currentTimeMillis())
        .setContentText("You are near your point of interest.")
        .setContentTitle("Proximity Alert!")
        .setSmallIcon(android.R.drawable.ic_menu_info_details)
        .setLargeIcon(BitmapFactory.decodeResource(getResources(), R.drawable.orchide))
        .setAutoCancel(true)
        .setTicker("Proximity Alert!")
        .setNumber(10)
        .setContentIntent(pIntent)
        .setDefaults(Notification.DEFAULT_LIGHTS| Notification.DEFAULT_VIBRATE| Notification.DEFAULT_SOUND);
        /*Create notification with builder*/
         notification=notificationBuilder.build();

        /*sending notification to system.Here we use unique id (when)for making different each notification
         * if we use same id,then first notification replace by the last notification*/
    btnShow.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            notificationManager.notify(1000, notification);
        }

    });

} 
```

![姜饼通知](../Images/55adab5b7199382d29769439dfba0f60.png)

![果冻豆中的通知](../Images/05866cb358aceefc451b1f2f3fa2206d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:21:33.440

在预蜂窝 API 级别上忽略大图标。

[NotificationCompat.Builder 文档](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)说： *......在不提供扩展通知的平台版本上，依赖扩展通知的方法无效......*

如果您查看 NotificationCompat.Builder 源代码，您会看到大图标用于蜂窝及以上。

# java - Android正确时间格式问题

> ID：14462662
> 
> 赞同：1
> 
> 时间：2013-01-22T15:57:21.647
> 
> 标签：java, android, sqlite

我将时间选择器中的时间存储在数据库中单独的“时间”列中。

目前我正在使用以下方法从选择器接收和存储所选时间：

```
setTime = (TimePicker) findViewById(R.id.timePicker1);

Integer dobHour = setTime.getCurrentHour();
Integer dobMinute = setTime.getCurrentMinute();

Time timeToSet = new Time();
timeToSet.set(0, dobMinute, dobHour); 
```

带有 insert 方法的数据库助手对象：

```
DBHandlerApp createApp = new DBHandlerApp(this, null, null);
    createApp.open();
    createApp.createAppointmentEntry(nameToSet, typeToSet, timeToSet, setDate, comToSet, alarmToSet); 
```

DB helper 类中的方法：

```
 public void createAppointmentEntry(String nameApp, String typeApp, Time timeApp, Date dateApp ,String commentApp, Boolean onOrOff) {

        ContentValues cv = new ContentValues();
        cv.put(KEY_NAMEAPP, nameApp);
        cv.put(KEY_TYPEAPP, typeApp);
        cv.put(KEY_TIMEAPP, timeApp.toString());
        cv.put(KEY_DATEAPP, dateApp.toString());
        cv.put(KEY_COMMENTAPP, commentApp);
        cv.put(KEY_ALARM, onOrOff);
        ourDatabase.insert(DATABASE_TABLEAPP, null, cv); 
```

在我的应用程序中，以下输出显示了日期的存储方式：

显然这个时间格式不正确。有人可以指出我将其设置为实际时间格式的正确方向吗？

![应用程序](../Images/cc90f42b7aaf8453bcd84757f4b5ca4b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:18:10.690

尽管 Guilherme 的回答有效，但我想说您也可以使用[Time#format()](http://developer.android.com/reference/android/text/format/Time.html#format%28java.lang.String%29)方法来实现正确的时间格式。您将 String 传递给格式化为 [strftime](http://www.cplusplus.com/reference/ctime/strftime/)`format()`规范的方法（例如） 。`"%x%X"`

例如

```
cv.put(KEY_TIMEAPP, timeApp.format("%x%X")); 
```

这只是默认的特定于语言环境的表示，如果您想要一致的时间格式，您可以将其设置为基本上任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:05:57.953

用这个：

```
 public static String getDate() {
        SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
        String date = dateFormat.format(new Date(System.currentTimeMillis()));
        return date;
    } 
```

# mysql - MySQL UPDATE 表现出奇怪的行为

> ID：14462664
> 
> 赞同：0
> 
> 时间：2013-01-22T15:57:25.857
> 
> 标签：mysql

MySql 数据库（版本 5.5.11 与 InnoDB 引擎）遇到一个奇怪的问题。我通过从 mysql 提示符执行 UPDATE 查询来更新表中的一个特定字段，如下所示：

```
 mysql> UPDATE table1 SET field1='new_value' WHERE id IN (5,6,7); 
```

它返回一个成功的响应，其中 3 行受到影响。

但是，当我选择受影响的行时，它们仍然有 'field1' 的 'old_value'，基本上 UPDATE 没有改变任何东西。

此数据库上的自动提交设置为 ON

```
SELECT @@autocommit; 
```

返回 1。

该数据库同时被 8 个应用服务器同时访问。这个问题是否与表锁定/事务隔离级别有关？

有什么建议么？

# javascript - Javascript 新行 - document.write 结束

> ID：14462665
> 
> 赞同：0
> 
> 时间：2013-01-22T15:57:25.807
> 
> 标签：javascript, line, newline, next

我正在开发一个小程序，我现在需要的是在我的 document.write 输出之间创建一个新行。我听说过 \r 和 \n 但它似乎对我不起作用。

```
 ...
        group[j] = elev[r] + " og " + elev[k];
        document.write(group[j] += "\n");
        ... 
```

这段文本的代码在一个循环中，并且许多 (11) 组 [j] 将被写入文档中。我正在使用一个单独的 Javascript 文件，所以我不能使用`</br>`（我不这么认为）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:00:50.873

如果您希望在渲染的 HTML 中出现新行，那么您肯定需要编写一个`<br/>`标签；空白在 HTML 中折叠，换行符被视为空白

```
...
group[j] = elev[r] + " og " + elev[k];
document.write(group[j] += "<br/>\n");
... 
```

就足够了。这`\n`不是绝对必要的，但如果您需要检查生成的源代码，它将使您生成的 HTML 看起来更整洁。

# mysql - 从 MYSQL SELECT 到 MYSQL VIEW

> ID：14462669
> 
> 赞同：0
> 
> 时间：2013-01-22T15:57:35.960
> 
> 标签：mysql, sql, sql-view

我不知道怎么做这个。

* * *

背景：

配置文件 -> 包含用户配置文件的表格

分数 -> 用户分数表（一个用户可以有多个分数）（这个表有一个 created_at 字段可以知道我何时引入新分数）

想象一下得分表保存 klout 得分数据。

* * *

如何将此查询转换为视图？

```
SELECT  t1.id, 
    t1.name, 
    t1.screen_name, 
    t1.description, 
    t1.url, 
    t1.statuses_count, 
    t1.followers_count, 
    t1.friends_count, 
    t1.listed_count, 
    t1.favourites_count, 
    t1.utc_offset, 
    t1.time_zone, 
    t1.verified, 
    t1.lang, 
    t1.profile_image_url, 
    t1.geo_enabled, 
    t1.location, 
    t1.lat, 
    t1.lng, 
    t1.created_at, 
    t3.score, 
    t3.delta, 
    t3.detail
        FROM profiles t1 LEFT JOIN (SELECT t2.user_id, t2.score, t2.delta, t2.detail
                                                    FROM scores t2
                                                    ORDER BY t2.created_at DESC) 
                AS t3 ON t3.user_id = t1.id
        GROUP BY t1.id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:59:10.963

问题`VIEW`不能包含`subquery`，因为您没有执行任何聚合，查询中的子查询可以直接连接到表上。

```
CREATE VIEW viewName
AS
SELECT  t1.id, 
        t1.name, 
        t1.screen_name, 
        t1.description, 
        t1.url, 
        t1.statuses_count, 
        t1.followers_count, 
        t1.friends_count, 
        t1.listed_count, 
        t1.favourites_count, 
        t1.utc_offset, 
        t1.time_zone, 
        t1.verified, 
        t1.lang, 
        t1.profile_image_url, 
        t1.geo_enabled, 
        t1.location, 
        t1.lat, 
        t1.lng, 
        t1.created_at, 
        t3.score, 
        t3.delta, 
        t3.detail
FROM    profiles t1 
        LEFT JOIN scores t3
            ON t3.user_id = t1.id
-- GROUP BY t1.id 
```

我不明白为什么你`GROUP BY`的查询中有一个子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:25:15.317

您可以将代码拆分为 2 个视图

视图 1：

```
CREATE VIEW step1

AS

SELECT t2.user_id, t2.score, t2.delta, t2.detail
FROM scores t2
ORDER BY t2.created_at DESC 
```

视图 2：

```
CREATE VIEW step2

AS

SELECT  t1.id, 
                t1.name, 
                t1.screen_name, 
                t1.description, 
                t1.url, 
                t1.statuses_count, 
                t1.followers_count, 
                t1.friends_count, 
                t1.listed_count, 
                t1.favourites_count, 
                t1.utc_offset, 
                t1.time_zone, 
                t1.verified, 
                t1.lang, 
                t1.profile_image_url, 
                t1.geo_enabled, 
                t1.location, 
                t1.lat, 
                t1.lng, 
                t1.created_at, 
                t3.score, 
                t3.delta, 
                t3.detail
FROM profiles t1 
     LEFT JOIN step1 AS t3 ON t3.user_id = t1.id
GROUP BY t1.id 
```

我不确定你为什么按 t1.id 分组，但也许你的数据中有一些我不知道的东西

# sql-server - 多维数据集中的数据比事实表中的数据少：仅考虑所有角色扮演日期维度中具有相应成员的事实

> ID：14462671
> 
> 赞同：1
> 
> 时间：2013-01-22T15:57:42.623
> 
> 标签：sql-server, sql-server-2008, ssas, olap, ssas-2008

关系数据仓库 / SSAS 2008 R2 / SQl Server 2008 R2

## 多维数据集中的数据比事实表中的数据少：仅考虑所有角色扮演日期维度中具有相应成员的事实。

我意识到“立方体”中的数据比事实表中的数据少。事实表的“行项目”的`SELECT Count(*) FROM [FactSales]`计数与多维数据集中的“行项目计数”度量不对应。

因此，他应该包含的事实不到百分之一。许多天的数据丢失了。

所以我做了一些研究。我首先排除了最可能的原因（例如，检查不是“全部”成员的默认成员，检查处理选项，...）。在我提出问题之前，首先要了解模型和事实表的详细信息。

关系数据仓库遵循 Fact 表保存销售数据的星型模式。它有几个指向一个日期维度的外键。此日期维度在 SSAS 中由多个角色扮演维度表示。所有这些 FK 都不是 NULL。日期维度有一个未知成员（在基础表中）。因此，日期维度键 (Int) 的空处理设置为“错误”。Dimension Usage 设置正确（Null-Processing: E​​rror）。

所以我检查的最后一件事是：我能否提出基于我的事实表及其维度的查询，该查询返回与我在多维数据集中获得的相同行项计数。

所以最后是查询（Q1）：

```
SELECT COUNT(*) --cut-set
FROM Fact AS F 
INNER JOIN DimDate 
    ON F.Date1Key = Date.DateKey 
    AND F.Date2Key = Date.DateKey
    AND F.Date3Key = Date.DateKey 
```

当然这是错误的。应该是这样的（Q2）：

```
SELECT COUNT(*) --complete Set
FROM FactSales AS F 
INNER JOIN DimDate AS DimDate1 
    ON F.Date1Key = DimDate1.DateKey
INNER JOIN DimDate AS DimDate2
    ON F.Date2Key = DimDate2.DateKey
INNER JOIN DimDate AS DimDate3
    ON F.Date3Key = DimDate3.DateKey 
```

但这显然不是 Cube 中显示的 Data (Q2) SSAS。不幸的是，SSAS 显示了 Q1 测试查询返回的数据。所以 Q1 只是数据的一小部分。仅考虑在每个日期维度（Date1、Date2、Date3）中具有相应成员的事实。

我不知道为什么会这样。这是非常基础的，所以基本上它应该在 SSAS 中解决。除此之外，它在同一数据仓库解决方案的先前版本中运行良好（已经有角色扮演的日期维度）。

我猜这是一些错误的配置（无论是什么属性）。有人有想法吗？

干杯帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-20T18:33:11.953

[这](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CB4QFjAAahUKEwitidyL19HIAhVIVh4KHddRCsk&url=http%3A%2F%2Frichardlees.blogspot.com%2F2011%2F09%2Fwhy-are-there-less-data-in-cube-than.html&usg=AFQjCNFygfVEj3Ilj36mnTFj717LnKPHog)是一篇很好的文章，解释了一些原因，但对我来说都不是。

对我来说，问题是我为日期范围设置了 SSAS 分区。例如，我有一个用于日期字段的“小于 2012”、“2012”、“2013”​​和“大于 2013”​​。我忽略了一些日期值为空的奇怪实例。那些日期为空的记录没有出现在多维数据集中，但显然出现在事实表中。我为“日期为空”添加了一个分区并重新处理。大奖！

# binary-tree - 检查二叉树是否与迭代函数平衡？

> ID：14462683
> 
> 赞同：-1
> 
> 时间：2013-01-22T15:58:15.020
> 
> 标签：binary-tree

我需要实现一个**非递归**函数来确定二叉树是否平衡。

任何人？

谢谢！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T16:19:00.223

假设“平衡”是指 AVL 树意义上的“高度平衡”，并且您可以为每个节点存储任意信息，

*   对于后序中的每个节点，
    *   如果任何一个孩子都不存在，则假设其各自的高度为 0。
    *   如果两个孩子的身高相差超过一，则树不平衡。
    *   否则，此节点的高度是两个孩子的高度中较大的一个。
*   如果达到这一点，则树是平衡的。

执行后序遍历的一种方法：

*   从根开始
*   环形
    *   如果这个节点的左孩子存在并且没有计算它的高度，那么接下来访问它的左孩子。
    *   否则，如果该节点的右孩子存在并且没有计算其高度，则接下来访问其右孩子。
    *   别的
        *   计算此节点的高度，可能提前返回
        *   如果这个节点不是根节点，接下来访问它的父节点。
*   如果达到这一点，则树是平衡的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-19T16:50:28.003

尝试这个，

```
public class BalancedBinaryTree {
    public static class TreeNode {
        int val;
        TreeNode left;
        TreeNode right;
        TreeNode() {}
        TreeNode(int val) { this.val = val; }
        TreeNode(int val, TreeNode left, TreeNode right) {
            this.val = val;
            this.left = left;
            this.right = right;
        }
    }

    public boolean isBalanced(TreeNode root) {
        if (root==null) {
             return true;
        }
        Stack<TreeNode> stack = new Stack<>();
        Map<TreeNode, Integer> map = new HashMap<>();
        stack.push(root);
        while(!stack.isEmpty()) {
            TreeNode node = stack.pop();
            if ((node.left==null || (node.left!=null && map.containsKey(node.left))) && (node.right==null || (node.right!=null && map.containsKey(node.right)))) {
                int right = (node.right==null) ? 0 : map.get(node.right);
                int left = (node.left==null) ? 0 : map.get(node.left);
                if (Math.abs(right-left)>1) {
                    return false;
                } else {
                    map.put(node, Math.max(right, left)+1);
                }
            } else {
                if (node.left!=null && !map.containsKey(node.left)) {
                    stack.push(node);
                    stack.push(node.left);
                } else {
                    stack.push(node);
                    stack.push(node.right);
                }
            }
        }
        return true;
    }

    public static void main(String[] args) {
        BalancedBinaryTree b = new BalancedBinaryTree();
        boolean v = b.isBalanced(new TreeNode(3, new TreeNode(9), new TreeNode(20, new TreeNode(15), new TreeNode(7))));
        System.out.println(v);
        v = b.isBalanced(new TreeNode(1, new TreeNode(2, new TreeNode(3, new TreeNode(4), new TreeNode(4)), new TreeNode(3)), new TreeNode(2)));
        System.out.println(v);
        v = b.isBalanced(new TreeNode(1, new TreeNode(2, new TreeNode(4, new TreeNode(8), null), new TreeNode(5)), new TreeNode(3, new TreeNode(6), null)));
        System.out.println(v);
    }
} 
```

# android - 我可以使用我的 Android 应用程序检查设备上是否启用了光盘级加密吗？

> ID：14462686
> 
> 赞同：-1
> 
> 时间：2013-01-22T15:58:18.857
> 
> 标签：android

由于我的应用程序的一部分可能包含 PII，我想验证设备是否正在使用设备级加密。这是我可以通过我的应用程序检查的东西吗？我还没有看到一个很好的了解方式（我知道重点是软件不知道）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:49:43.177

你可以打电话[`getStorageEncryptionStatus()`。`DevicePolicyManager`](http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#getStorageEncryptionStatus%28%29)您可能实际上需要成为设备管理员才能执行此操作，但我认为任何人都可以调用此方法。

# javascript - Javascript，在传递函数参数时保留此引用

> ID：14462688
> 
> 赞同：4
> 
> 时间：2013-01-22T15:58:25.370
> 
> 标签：javascript, object, callback

我在一个对象的函数内部，我需要调用一个外部函数并将对函数的引用作为参数传递。最后一个函数参数`this`多次使用关键字，因此我需要将其限定在我的对象中。我通过这样做解决了这个问题：

```
 MyObj.prototype.internalFunc= function(data){
       this.doSomethingWithReturnedData(data);
   };

   MyObj.prototype.doSomething= function(){
       var $this = this;
       externalFunction(this.someVar, function(data){ $this.internalFunc(data); });
   };

   var objInst = new MyObj();
   objInst.doSomething(); 
```

我想知道是否有办法避免这种混乱`var $this = this`的事情。

我还想：

```
 //... (same as before)
   MyObj.prototype.doSomething= function(){
       var $this = this;
       externalFunction(this.someVar, this.internalFunc, this);
   };
   //... (same as before) 
```

和

```
 function externalFunction(arg1, cbfunc, thisref){
       //bla bla things
       cbfunc.call(thisref, blablaData);
   }; 
```

但我也觉得它很乱。

我认为有更好的方法，但我没有看到！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:05:11.410

如果您使用的是最新的浏览器并且使用[`Function.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind).

这允许您创建已绑定到特定范围的函数。换句话说，它允许您定义`this`该函数内部的内容。因此，您可以这样做。

```
MyObj.prototype.doSomething= function(){
   externalFunction(this.someVar, this.internalFunc.bind(this, data));
}; 
```

按照上面的链接并滚动到底部以查看有关浏览器支持的信息。

## 编辑

实际上，还有另一种选择，即使用现有的众多库和框架之一。任何称职的人都会有`bind`, `hitch`,`proxy`或以其他方式提供给您。然而，所有这些都在封装原生 JS 方法，但它们通常提供有用的补充，使这项技术更加有价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:03:47.637

分配`this`给局部变量很好而且很常见。

许多库通过提供返回包装函数并设置执行上下文的方法（例如[`$.proxy`](http://api.jquery.com/jQuery.proxy/)在 jQuery 中（或[`_.bind`](http://underscorejs.org/#bind)在 underscore.js 中））使您的第二种方法更容易。

# backbone.js - Backbone.js - this.$(selector) 和 this.$el.find('selector') 之间的区别

> ID：14462690
> 
> 赞同：13
> 
> 时间：2013-01-22T15:58:36.557
> 
> 标签：backbone.js

根据标题，主干视图中说的有什么区别（如果有的话）：

```
this.$('.foo'); 
```

和

```
this.$el.find('.foo'); 
```

它们都返回元素并似乎将其范围限定为当前视图，但我已经看到使用这两种方法的示例。

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-22T16:00:56.657

区别完全没有。Backbone 源代码中的方法声明为：

```
$: function(selector) {
  return this.$el.find(selector);
} 
```

# .net - 以编程方式转换 Visual Studio 项目版本

> ID：14462691
> 
> 赞同：1
> 
> 时间：2013-01-22T15:58:36.953
> 
> 标签：.net, visual-studio-2010, tfs, visual-studio-2012

我们有许多包含数百个项目的解决方案。在迁移到新版本的 VisualStudio 期间，我们必须更改所有项目的目标框架版本。但是通过项目属性/应用程序/目标框架单击项目来更改此设置是非常无效的。

我们可以一次更改解决方案中所有项目的版本吗？有什么方法可以自动/以编程方式执行此活动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:37:15.223

csproj 文件只不过是 XML，以编程方式编辑文件很容易。

这是我创建的一个小应用程序，它利用 Linq-Xml 查找和更新根文件夹下的所有 csproj 文件：

```
var path = @"--Path to Root--";
var files = Directory.GetFiles(path, "*.csproj", SearchOption.AllDirectories);

XNamespace ns = "http://schemas.microsoft.com/developer/msbuild/2003";

foreach (var file in files)
{
    var doc = XDocument.Load(file);
    var element = doc.Descendants(ns + "TargetFrameworkVersion").Single();
    element.Value = "v4.5";
    doc.Save(file);
} 
```

由于您已将其标记为[tfs](/questions/tagged/tfs "显示标记为“tfs”的问题")，因此您可能需要对所有 csproj 文件执行签出，以删除只读标志。或者，或者，只需检查所有内容，然后用于[`tfpt uu`](https://stackoverflow.com/questions/544253/tfs-how-can-you-undo-checkout-of-unmodified-files-in-a-batch-file)还原未更改的文件。

# c# - DataBinding GridView C# windows store app

> ID：14462693
> 
> 赞同：1
> 
> 时间：2013-01-22T15:58:39.463
> 
> 标签：c#, windows-store-apps

我有一个如下定义的 DataTemplate

```
<DataTemplate x:Key="IconTextDataTemplate">
        <StackPanel Orientation="Horizontal" Width="220" Height="60">
            <Border Background="#66727272" Width="40" Height="40" Margin="10">
                <Image Source="/SampleImage.png" Height="32" Width="32" Stretch="UniformToFill"/>
            </Border>
            <StackPanel Orientation="Vertical" VerticalAlignment="Center">
                <TextBlock Text="{Binding Path=Title}" Margin="10,0,0,0" Width="170" Height="20" TextTrimming="WordEllipsis" />
                <TextBlock  Text="{Binding Path=NumberOfPhotos}" Margin="10,0,0,0" Width="170" Height="20" TextTrimming="WordEllipsis"/>
            </StackPanel>
        </StackPanel>
    </DataTemplate> 
```

然后我有一个使用 DataTemplate 的 GridView

```
<GridView x:Name="gv" Grid.Row="0" HorizontalAlignment="Left" Margin="0" VerticalAlignment="Top" 
                  Width="Auto" Height="Auto" SelectionMode="Multiple" ItemTemplate="{StaticResource IconTextDataTemplate}" ItemsSource="{Binding}">
            <GridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapGrid MaximumRowsOrColumns="8" 
                  VerticalChildrenAlignment="Top" HorizontalChildrenAlignment="Center" />
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>
        </GridView> 
```

然后我将 GridViews dataContext 设置为一个集合

```
gv.DataContext = setCollection; 
```

对象 setCollection 是具有 NumberOfPhotos 和 Title 属性的对象的集合，因此绑定

```
<TextBlock Text="{Binding Path=Title}" Margin="10,0,0,0" Width="170" Height="20" TextTrimming="WordEllipsis" />
                <TextBlock  Text="{Binding Path=NumberOfPhotos}" Margin="10,0,0,0" Width="170" Height="20" TextTrimming="WordEllipsis"/> 
```

作品。但是，该对象没有 ImageSource 的属性

```
<Image Source="/SampleImage.png" Height="32" Width="32" Stretch="UniformToFill"/> 
```

我不想绑定到对象的属性，而是想绑定到由两个字符串和对象的属性组成的复合结构，如下所示：

```
ImageSource = "/files/thumbnails/" + {Binding Path=Title} + fileType; 
```

因此，在评估时，ImageSource 变为

```
/files/thumbnails/titleOfObject.png 
```

其中 titleOfObject 等于此处的该值

```
<TextBlock Text="{Binding Path=Title}" Margin="10,0,0,0" Width="170" Height="20" TextTrimming="WordEllipsis" /> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:14:10.947

您最好将绑定的对象视为 ViewModel。从概念上讲，这意味着 ViewModel 对象的工作是准备数据以供查看。这包括诸如按摩要绑定到 Source 属性的标题之类的事情。因此，在您的对象（或派生对象，或对象的正式 ViewModel）上，创建一个为您执行该计算的属性。

```
public string TitleImageSource
{
    get
    {
        return string.Format(@"/files/thumbnails/{0}{1}", this.Title, fileType);
    }
} 
```

然后绑定到您的图像中的该属性。

**另一种方法**是为绑定创建一个转换器。转换器可能类似于：

```
public sealed class ImageConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        return string.Format(@"/files/thumbnails/{0}{1}", value, parameter);
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        return string.Empty;
    }
} 
```

然后在 Image 标记上的 Source 绑定上引用该转换器。

# maven - Maven-2：如何更改依赖项的位置？

> ID：14462694
> 
> 赞同：1
> 
> 时间：2013-01-22T15:58:42.140
> 
> 标签：maven, maven-2, dependencies, dependency-properties, dependency-management

默认情况下，Maven 将从本地存储库（.m2 目录）中获取所有依赖项。但相反，我希望它从另一个位置获取依赖项。这甚至可能吗？

我不想对所有事情都这样做。我不希望这发生在“根”或父级。我希望这发生在更“更深”的 pom 级别。不止一次，同一个依赖是依赖。每次，我都希望它来自不同的位置。因此，一个将使用默认的 maven 配置并从 .m2 目录中获取它，而另一个将从特定目录中获取它。

* * *

我的理由：

在安装阶段，所有内容都安装到 .m2 目录中。在打包阶段，我将所有内容打包到目标目录中。（我说的不对吗？）

我的 .m2 目录比需要的要多。我的目标有我的最终项目，没有包含在 .m2 目录中的额外“东西”。目标目录中的任何内容都是最终产品。当我处于编译阶段时，我不希望它依赖于 .m2 目录，而是依赖于目标，因为那是我真正的最终项目。

* * *

我在 Linux (Red Hat) 上使用 Maven 2.2.1。

我在某处读过，您可以在文件中的元素下使用`<scope>`具有值**系统**的`<dependency>`元素`pom.xml`。`<systemPath>`然后在 that 下调用的另一个元素中给出实际位置`<dependency>`。我不回答我的问题，或者这完全不同。

*我知道这违背了 Maven 的建议，但我有我的理由。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:26:43.347

请先阅读我对这个[不同但相关的问题](https://stackoverflow.com/questions/14444403/maven-change-the-test-phase-directory-from-local-m2-to-target/14446611#14446611)的回答。

一般来说，当谈到 Maven 时，人们已经发展了肌肉记忆。举个例子，几乎每个人都认为这是使用 Maven 构建项目的方式：

```
$ mvn clean install 
```

现在它将构建项目，但它还将构建的工件存储在本地存储库中..，如果您随后要处理子模块并希望始终安全地重建所有内容，或者如果您是使用对反应器了解不足的 IDE（大多数 IDE 的较新版本没有此问题）

你可能应该做的是

```
$ mvn clean verify 
```

或者

```
$ mvn clean package -DskipTests 
```

（第二个跳过测试，因为如果您不关心确保集成测试通过，您可能也不关心单元测试）

所以对我来说，听起来你只是输入了错误的命令......

现在还有第二种可能性，即您可能正在构建一个不作为传递依赖项公开的“瞬态、中间”工件……在这种情况下，您可以`<skip>true</skip>`在特定的 maven-install-plugin 的配置中添加一个模块（也可以考虑添加到 maven-deploy-plugin）*，但*你需要确保模块不会通过传递依赖泄漏，否则一切都会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:08:11.630

转到您的 Maven 安装目录，让我们说`C:\apache-maven-2.2.1.` 遍历`bin`目录编辑**m2.conf**。默认设置是

```
set maven.home default set maven.home default ${user.home}/m2 
```

根据需要更改此设置。

# html - HTML5 vs Transitional 1.0 不同的单元格高度？

> ID：14462696
> 
> 赞同：1
> 
> 时间：2013-01-22T15:58:45.773
> 
> 标签：html, xhtml

我的代码如下所示：

```
<table>
<tr>
<td><img with height 27px></td>
<td><img with height 27px></td>
<td><img with height 27px></td>
</tr>
</table> 
```

现在使用 firebug 我可以看到，如果我将页面声明为 Transitional XHTML 1.0，所有三个 td 元素的高度都是 27px。但是如果我将页面切换到 HTML5，我会得到 29px 的高度。

有人能告诉我这种感冒发生的原因吗？甚至对进一步调查的建议也可能有用。

我正在使用 FF v17 和 MSVS2k8 WebDev 服务器（用于 ASP.NET）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:48:21.767

可以在这里找到解释（忽略被搞砸的图像）： [https ://developer.mozilla.org/en/docs/Images,_Tables,_and_Mysterious_Gaps](https://developer.mozilla.org/en/docs/Images,_Tables,_and_Mysterious_Gaps)

可以在这里找到快速解决方案（我曾经显示：块；用于单元格中的图像）： http: [//www.visibilityinherit.com/code/gap-under-image-example.php](http://www.visibilityinherit.com/code/gap-under-image-example.php)

归功于 Alohci，他对我的问题做出了评论。

@Alohci：感谢您的解决方案，请随时将评论重新发布为答案，我会接受。

# ios - 主视图下的半隐藏视图以 alpha segue 显示

> ID：14462698
> 
> 赞同：0
> 
> 时间：2013-01-22T15:58:50.900
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, ios5

```
[sourceViewController.view addSubview:destinationController.view];
[destinationController.view setFrame:sourceViewController.view.window.frame];
[destinationController.view setTransform:CGAffineTransformMakeScale(0.5,0.5)];
[destinationController.view setAlpha:0.0];

[UIView animateWithDuration:0.3
                      delay:0.0
                    options:UIViewAnimationCurveEaseOut
                 animations:^{
                     [destinationController.view setTransform:CGAffineTransformMakeScale(1.0,1.0)];
                     [destinationController.view setAlpha:1.0];
                     //[sourceViewController.view setAlpha:0];
                 }
                 completion:^(BOOL finished){
                     [destinationController.view removeFromSuperview];
                     [sourceViewController.navigationController pushViewController:destinationController animated:NO];
                 }]; 
```

我的destinationController 有2 个视图，一个接一个。视图#1 是主视图，完全可见，而视图#2 是半可见半隐藏的。当我使用上面的代码并在 segues 之间移动时，我可以看到（从 alpa 0 到 1 时）隐藏的视图完全在主视图下。所以用户可以看到隐藏在下面的东西。（即使我`animateWithDuration`做得很快）。我不知道为什么会发生这种情况并试图找到一个创造性的解决方案。我想出的一个解决方案是在`ViewController`

```
[UIView animateWithDuration:0.7 animations:^() {_image.alpha = 1;}]; 
```

并且通过“减慢”隐藏视图，但显然视图是延迟加载的，并且在隐藏视图的可见部分看起来并不那么优雅。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:43:45.053

您可以在动画之前先隐藏部分隐藏的视图，或者设置另一个动画（将同时运行）以将隐藏视图的 alpha 设置为 0。以与主视图动画相同或更快的速度运行此动画。

# c# - 带有实体框架和 Lucene 的 DLL 地狱

> ID：14462703
> 
> 赞同：2
> 
> 时间：2013-01-22T15:59:00.923
> 
> 标签：c#, entity-framework, asp.net-mvc-4

我有一个 ASP.NET MVC 4 项目，我需要更新它才能使用 Lucene 3.0。我需要手动设置框架以使用 .NET Framework 4.5，因为我使用的是需要此版本的最新 Windows Azure 库。一切正常，除非我使用实体框架添加新数据模型。我可以使用实体框架成功添加新的数据模型。但是，当我尝试执行一个基本的存储过程（它只执行一个查询）时，我得到一个运行时异常。例外是：

```
System.Reflection.ReflectionTypeLoadException
Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information. 
```

当我查看 LoaderExceptions 属性时，我看到以下内容：

```
[0] {"Could not load file or assembly 'Lucene.Net, Version=2.9.4.1, Culture=neutral, PublicKeyToken=85089178b9ac3181' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)":"Lucene.Net, Version=2.9.4.1, Culture=neutral, PublicKeyToken=85089178b9ac3181"}  System.Exception {System.IO.FileLoadException}

[1] {"Could not load file or assembly 'Lucene.Net, Version=2.9.4.1, Culture=neutral, PublicKeyToken=85089178b9ac3181' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)":"Lucene.Net, Version=2.9.4.1, Culture=neutral, PublicKeyToken=85089178b9ac3181"}  System.Exception {System.IO.FileLoadException} 
```

奇怪的是，我在任何地方都找不到对 Lucene.Net 版本 2.9.4.1 的单一引用。我确实在我的应用程序中引用了 Lucene.Net 的 3.0.3.0 版本。有人能告诉我该文件的 2.9.4.1 版本会被引用到哪里吗？我查看了以下位置：

```
MyProject.csproj 
Web.config
Global.asax.cs
packages.config 
```

我该如何解决？我已经为此苦恼了2天。它太离奇了。非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:08:54.840

我不知道这个问题的确切答案，但如果它确实让你感到困惑（而且你很幸运这两个版本是兼容的），你可以通过添加绑定将 2.9.4.1 的任何请求重定向到你拥有的版本重定向到您的配置文件。

请参阅：http: [//msdn.microsoft.com/en-us/library/433ysdt1.aspx](http://msdn.microsoft.com/en-us/library/433ysdt1.aspx)

# java - BufferedWriter如何在java中工作

> ID：14462705
> 
> 赞同：6
> 
> 时间：2013-01-22T15:59:02.507
> 
> 标签：java, file, buffer, streamwriter

我经常将文本输出到文件。我想知道：它是如何`BufferedWriter`工作的？

我打电话时它会在文件上写文本`writer.write(text)`吗？如果它不写文本，我是否需要使用flush函数来写数据？

例如：

```
 File file = new File("statistics.txt");
        if (!file.exists()) {
            file.createNewFile();
        }
        else
        {
            file.delete();
            file.createNewFile();
        }
        FileWriter fileWritter = new FileWriter(file.getAbsoluteFile(),true);
        BufferedWriter bufferWritter = new BufferedWriter(fileWritter);
        Iterator<Map.Entry<String,Token>> it = listofTakenPairMap.entrySet().iterator();
        int isim_isim=0;
        int isim_fiil=0;
        int zarf_fiil=0;
        while (it.hasNext()) {
            @SuppressWarnings("rawtypes")
            Map.Entry pairs = (Map.Entry)it.next();
            Token token=(Token)pairs.getValue();
            String str=pairs.getKey()+ " = " +token.getCount();
            if(token.getTypeOfPairofToken()==0){//isim-isim
                isim_isim+=token.getCount();
            }
            else if(token.getTypeOfPairofToken()==1){
                isim_fiil+=token.getCount();
            }
            else{ //zarf-fiil
                zarf_fiil+=token.getCount();
            }
            System.out.println(str);
            bufferWritter.write(str);
            bufferWritter.newLine();
            //it.remove(); // avoids a ConcurrentModificationException
        }
        bufferWritter.newLine();
        bufferWritter.write("##############################");
        bufferWritter.newLine();
        bufferWritter.write("$isim_isim sayisi :"+isim_isim+"$");
        bufferWritter.newLine();
        bufferWritter.write("$isim_fiil sayisi :"+isim_fiil+"$");
        bufferWritter.newLine();
        bufferWritter.write("$zarf_fiil sayisi :"+zarf_fiil+"$");
        bufferWritter.newLine();
        bufferWritter.write("##############################");
        bufferWritter.flush();
        bufferWritter.close(); 
```

如果在while循环中发生错误，文件将被关闭而不写入数据。如果我`flush`在while循环中使用函数，那我为什么要使用`BufferedWriter`？如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T16:10:02.070

根据定义，缓冲写入器缓冲数据并仅在内存足够时写入它们，以避免与文件系统进行太多往返。

如果您正确处理异常，并像往常一样在 finally 块中关闭流，则缓冲区将刷新到磁盘，并且到目前为止写入缓冲写入器的所有内容都将写入磁盘（当然，除非异常正是由写入磁盘的错误引起的）。

因此，解决方案不是每次写入时都刷新，因为它会破坏缓冲写入器的目的。解决方案是在 finally 块中关闭（或使用 Java 7 trye-with-resources 语句，它会为您执行此操作）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:10:28.940

**流中的数据以块**的形式写入磁盘。`OutputStream`因此，当您在or中写入内容时`Writer`，您不应该期望服务器会自动保存到磁盘 - 实际上很少这样做。您的进程只是虚拟机和主机操作系统中的一个小进程。

如果将数据写入磁盘，则必须等待磁盘 I/O 完成。您的代码在此期间不会执行，而是在等待。这将增加服务时间。

此外，频繁的磁盘写入（意味着`flush()`）会给系统带来沉重的负担，因为它不能简单地覆盖块的全部内容，而是必须多次更新同一个块。

所以，这就是为什么像 Java 这样的语言引入了缓冲。

**回答你的问题**：当你`write()`数据时，它会被缓冲到一定的水平（直到缓冲区满）。之后它将被持久化（写入底层`Stream`，例如`FileOutputStream`）。当您调用 a `flush()`or`close()`时，它将清空缓冲区，因此缓冲的所有字节都将写入底层`Stream`. 他们还调用该Stream 的`flush()`or`close()`方法。

如果`Exception`在循环中发生，您将不会关闭流，因此可能会丢失一些数据。正确环绕`try { } catch (IOException ex) {}`并关闭溪流。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T09:55:44.557

> 我经常将文本输出到文件。我想知道：它是如何 `BufferedWriter`工作的？

自己查看**jdk****[的源码](http://hg.openjdk.java.net/jdk6/jdk6-gate/jdk/file/tip/src/share/classes/)**

> 当我调用 writer.write(text) 时，它会在文件上写入文本吗？如果它不写文本，我是否需要使用flush函数来写数据？

不，每当你调用`write(String s)`时，你都会调用：`write(str, 0, str.length());`这是来自 openJDK 源的源代码：

```
 218     public void write(String s, int off, int len) throws IOException {
  219         synchronized (lock) {
  220             ensureOpen();
  221 
  222             int b = off, t = off + len;
  223             while (b < t) {
  224                 int d = min(nChars - nextChar, t - b);
  225                 s.getChars(b, b + d, cb, nextChar);
  226                 b += d;
  227                 nextChar += d;
  228                 if (nextChar >= nChars)
  229                     flushBuffer();
  230             }
  231         }
  232     }
  233      

  118     /**
  119      * Flushes the output buffer to the underlying character stream, without
  120      * flushing the stream itself.  This method is non-private only so that it
  121      * may be invoked by PrintStream.
  122      */
  123     void flushBuffer() throws IOException {
  124         synchronized (lock) {
  125             ensureOpen();
  126             if (nextChar == 0)
  127                 return;
  128             out.write(cb, 0, nextChar);
  129             nextChar = 0;
  130         }
  131     } 
```

如您所见，它不会直接写入。只有当 时`if (nextChar >= nChars)`，它才会刷新缓冲区本身（默认是`private static int defaultCharBufferSize = 8192;`使用它的“包装”类。（在 java 中，[Java IO 是使用装饰器设计模式设计](https://stackoverflow.com/questions/6366385/decorator-pattern-for-io)的。最后，它会调用`write(char[] chars, int i, int i1)`.）

> 如果在while循环中发生错误，文件将被关闭而不写入数据。如果我在while循环中使用flush函数，那我为什么要使用`BufferedWriter`？

IO成本非常昂贵。除非您需要“即时”查看输出（例如，随时查看最新更新的日志），否则您应该让它自动完成以提高性能。

# windows - Windows的github没有显示我在eclipse中所做的更改

> ID：14462708
> 
> 赞同：1
> 
> 时间：2013-01-22T15:59:14.130
> 
> 标签：windows, eclipse, github

我已经为 Windows 安装了 github。我将存储库克隆到本地驱动器。但是当我从 eclipse 对我的应用程序进行一些更改时，这些更改不会出现在 github for windows 中。希望尽快得到答复。

PS我是菜鸟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-13T00:11:40.070

**对于其他阅读本文的人**：如果您生成大量未跟踪/修改的数据，GitHub Windows 应用程序有时似乎不知道**所有**最近的更改。

**例如**：如果你生成了一堆未跟踪的 Doxygen 文件（~500MB），GitHub 可能需要*很*长时间才能最终显示“未提交的更改”。与此同时，您可能看不到**任何**更改。

如果您的 git bash 显示更改，而您的 GitHub gui 没有，那么这可能是您的问题。

# prolog - Prolog 中的递归如何从内部工作。一个例子

> ID：14462713
> 
> 赞同：4
> 
> 时间：2013-01-22T15:59:29.440
> 
> 标签：prolog, prolog-dif, failure-slice

我这里有一个小脚本，它将元素列表转换为集合。例如列表 [1,1,2,3] -> 设置 [1,2,3]。有人可以逐步向我解释这些程序中发生了什么吗？你能用我的 [1,1,2,3] -> [1,2,3] 例子吗？

```
list_to_set([],[]).

list_to_set([A|X],[A|Y]):-
   list_to_set(X,Y),
    \+member(A,Y).

list_to_set([A|X],Y):-
   list_to_set(X,Y),
   member(A,Y). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:35:01.597

如果你看一个具体的例子，你很快就会被许多不相关的细节所淹没。如此之多，以至于您将忽略程序的重要属性。让我们看看下面的程序片段，它被称为[故障片](https://stackoverflow.com/questions/tagged/failure-slice)。**`false`**通过将目标添加到程序中，您将获得失败部分。失败切片与原始程序有许多有趣的属性。例如，`Goal, false`使用失败切片执行的目标永远不会使用比原始程序更多的推理。或者相反，原始程序将使用更多（或最多相同数量）的推理。所以，让我指出这样一个片段：

```
list_to_set([],[]) :-**假**。
list_to_set([A|X],[A|Y]):-
   list_to_set(X,Y), false ,
     \+member(A,Y)。
list_to_set([A|X],Y):-
   list_to_set(X,Y), false ,
    member(A,Y)。

```

而且由于这个片段不再对具体元素感兴趣（`A`不再使用，也不再`member/2`），我们可以使用`length/2`最通用的列表。通过这种方式，我们可以观察到每个长度所需的最少推理次数，如下所示：

```
?-长度（L，N），call_inferences（（list_to_set（L，_），false;true），Inf）。
N = 0，Inf = 3；
N = 1，Inf = 6；
N = 2, Inf = 12 ;
N = 3，Inf = 24；
N = 4，Inf = 48；
N = 5，Inf = 96；
N = 6，Inf = 192；
N = 7，Inf = 384；
N = 8，Inf = 768；
N = 9，Inf = 1536；
N = 10，Inf = 3072 ...

```

使用

```
:- meta_predicate user:call_inferences(0,-).
call_inferences( Goal, Inferences) :-
   statistics(inferences, Inferences0),
   Goal,
   statistics(inferences, Inferences1),
   Inferences is Inferences1 - Inferences0. 
```

每增加一个元素，推理的数量就会增加一倍。也就是说，它们呈指数增长。*因此，您的实现至少要*花费成倍的推论……无需查看具体示例。

您的程序中还有更多问题：

```
?- L=[A,B],list_to_set(L,S), L = [a,b]. 
```

失败，而

```
?-  L=[A,B], L = [a,b], list_to_set(L,S). 
```

成功。也就是说，您的程序不再是纯粹的关系。`maplist(dif(A),Y)`代替`\+ member(A,Y)`. _

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T16:09:26.467

在 Prolog 的某些实现中，例如[GNU Prolog](http://www.gprolog.org)，您可以跟踪代码的执行。使用此功能，您可以逐步完成评估过程，如下所示。

```
$ gprolog
GNU Prolog 1.4.2
By Daniel Diaz
Copyright (C) 1999-2012 Daniel Diaz
| ?- consult('list_to_set.pro').
yes
| ?- trace.
yes
{trace}
| ?- list_to_set([1,1,2,3], X).
      1    1  Call: list_to_set([1,1,2,3],_25) ?
      2    2  Call: list_to_set([1,2,3],_57) ?
      3    3  Call: list_to_set([2,3],_83) ?
      4    4  Call: list_to_set([3],_109) ?
      5    5  Call: list_to_set([],_135) ?
      5    5  Exit: list_to_set([],[]) ?
      6    5  Call: \+member(3,[]) ?
      7    6  Call: member(3,[]) ?
      7    6  Fail: member(3,[]) ?
      6    5  Exit: \+member(3,[]) ?
      4    4  Exit: list_to_set([3],[3]) ?
      7    4  Call: \+member(2,[3]) ?
      8    5  Call: member(2,[3]) ?
      ... 
```

可以在[http://remus.rutgers.edu/cs314/f2007/ryder/projects/prolog/prologTrace.html的](http://remus.rutgers.edu/cs314/f2007/ryder/projects/prolog/prologTrace.html)*READING A TRACE*部分找到有关如何解释 Prolog 跟踪的说明。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T16:20:37.750

prolog 程序的对应程序称为 SLDNF。询问：

```
 list_to_set([1,1,2,3], Result) 
```

现在 SLDNF 尝试通过称为统一的过程将 [1,1,2,3] 与 [A|X] 匹配。简而言之，它检查变量是否可以被实例化。[A|X] 是一个快捷方式，它的意思是（松散地）：“A 是第一个元素，X 是其余的”。如果 A= 1 且 X = [1,2,3] 且 Result = [1 |Y]，则可以这样做。如果统一成功，那么我们在规则主体中使用相同的替换（出现在 :- 之后的内容）。您可能想知道为什么我们使用第二个子句而不是第三个或第一个子句？Prolog 实际上尝试了所有这些，试图模拟一个不确定的选择。尽管它按顺序尝试它们。第一个子句不能统一（A = ?，列表中没有任何内容）。如果我们的第一次尝试失败，稍后将检查第三个子句。我们称之为“选择点 1”，

现在 SLDNF 已将您的初始查询减少到：

```
list_to_set([1,2,3], Y2), \+ member(1, Y2)       {Result = [1 | Y2]} 
```

（变量可以重命名，我们这样做是为了避免与程序混淆）这就是魔术发生的地方。SLDNF 现在做的事情和以前一样，但输入略有不同 [1,2,3]。最好的递归。所以它试图将它与第一个子句统一，但它又失败了。第二个成功了，同样你会得到，而不是查询的第一个元素（称为文字），我们再次拥有主体，变量替换 X = [2, 3], A = 1, Y2 = [ 1 | 是]。

现在我们有

```
list_to_set([2,3], Y), \+ member (1,Y), \+ member(1, [1 | Y])  {Result = [1 | [1 | Y]]} 
```

我不会继续到最后。最终我们将检查 + member(1, [1 | Y])，这意味着“1 不是头 1 尾 Y 的列表的成员”。这是一个内置谓词并且会失败，因为 1 在该列表中（它是头部）。Prolog会回到一个选择点结束最终到达“选择点1”。这里子句中的最后一个条件是“A 是 Y 的成员”。您可以检查自己，这条路最终会成功。

抱歉冗长的匆忙回答，希望对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T17:08:58.037

让我们用英文看一下，看看它是否具有直观意义。将谓词重命名为看起来不那么程序化可能会有所帮助，因此我将其命名为`list_set`.

```
list_set([],[]). 
```

这表示空集对应于空列表。

```
list_set([A|X], [A|Y]):-
  list_set(X,Y),
  \+ member(A,Y). 
```

这表示从 A 开始并以 X 继续的列表对应于以 A 开始并以 Y 继续的集合，前提是 A 不在 Y 中并且 Y 是对应于 X 的集合。或者，以更逐步的方式，给定一个以 A 开头的列表（余数是 X），我们有一个以 A 开头的集合（余数是 Y），假设 Y 是对应于 X 的集合并且 A 不在 Y 中。否定运算符对我来说总是很奇怪，这很有趣，部分原因是这里发生的事情是 A 被*保留*，而在下一个子句中，没有`A`意味着它被有效地*删除*。

```
list_set([A|X], Y):-
  list_set(X, Y),
  member(A, Y). 
```

这只是前一个子句的“其他”情况。它表示以 A 开头并以 X 继续的列表对应于集合 Y，前提是 Y 也对应于列表 X 并且 A 已经在 Y 中。这就是从结果中删除元素的方式，因为 A 出现在第一个参数的模式，但不在第二个参数的模式中。

# android-layout - 如何从 res/programmitcaly 禁用特定布局文件夹？

> ID：14462716
> 
> 赞同：1
> 
> 时间：2013-01-22T15:59:33.893
> 
> 标签：android-layout

在我的应用程序中有许多布局，我想在某些情况下不允许使用特定布局。但我不想从我的应用程序中删除这个布局文件夹。有没有可能？

我想从 Java 源代码级别做。例如，如果用户单击一个按钮，则应用程序开始不使用特定文件夹的布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:24:59.343

不同的布局是为了支持设备的不同屏幕尺寸。

我猜你必须在清单文件中放入一些代码。

见：[这个](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)和[这个](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)

如果您不想访问/支持某些特定的布局/屏幕尺寸，您可以在哪里了解您可以做什么。

# java - 如何在 NetBeans IDE 7.2.1 中创建 Java 桌面应用程序？

> ID：14462721
> 
> 赞同：2
> 
> 时间：2013-01-22T15:59:58.633
> 
> 标签：java, netbeans, jsr296

> **可能重复：**
> [为什么我在 Netbeans 7.1 中找不到 Java 桌面应用程序](https://stackoverflow.com/questions/9146976/why-cant-i-find-java-desktop-application-in-netbeans-7-1)

我曾经可以选择在 Netbeans 6.9.1 中创建一个新的“Java 桌面应用程序”。但是，我在 NetBeans IDE 7.2.1 中再也找不到这个选项了。

这还能用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:06:38.357

Netbeans 项目贡献者的党线是使用[Netbeans 平台](http://netbeans.org/kb/trails/platform.html)。在向导中查看 Netbeans 模块。

您可能记得的 Swing 应用程序框架 (SAF) 已被废弃。

Netbeans 平台看起来相当不错，但它代表了学习其约定和功能的相当大的努力。

[本文](https://stackoverflow.com/questions/9146976/why-cant-i-find-java-desktop-application-in-netbeans-7-1)讨论了[BSAF](http://kenai.com/projects/bsaf/pages/Home)，这是对 SAF 的某种程度的持续支持。然而，当 Netbeans 放弃了作为 SAF 一部分的向导和表单编辑功能时，BSAF 受到了打击。最近的发展是[SAF/BSAF 表单编辑作为](http://plugins.netbeans.org/plugin/43853/swing-application-framework-support)v7+ Netbeans 环境的插件的回归。您不能再使用应用程序向导生成 SAF/BSAF 应用程序。一种解决方法是在 6.9.1 中创建 SAF 应用程序，然后根据需要将其导入以在 7.2+ 中创建新应用程序。

# java - Java 中的验证

> ID：14462724
> 
> 赞同：-1
> 
> 时间：2013-01-22T16:00:05.993
> 
> 标签：java, regex, validation

如何使用户名和密码（其他字段，如姓名、姓氏）验证器在 java 中注册？最好的方法可能是使用一些正则表达式。允许的字符可能只有字母、数字和“-”或“ *”以及像 řščťž 这样的字母......每个字段的验证可能非常相似。
输入为：字符串验证字段，允许的字符 - 其中一些：az, AZ,-,* ,řščžýě...（== 带变音符号的字母）输出为：true（= 有效），false（= 无效）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T16:07:06.827

是的，您可以使用正则表达式。`\w`匹配所有字母（不仅是英文字母）、数字和`-`. 所以，`(\w|-)+`可以匹配你想要的。

我个人不喜欢应用程序试图限制我选择密码的可能性。在密码中使用特殊字符使其更安全，因此限制这是一种不好的做法。但是您确实可以限制用户名或其他字段。

# locale - URL 和 $this->url 中的 Zf2 语言环境

> ID：14462726
> 
> 赞同：1
> 
> 时间：2013-01-22T16:00:09.820
> 
> 标签：locale, zend-framework2, zend-locale

我正在 ZF2 Skeleton App 基础上开发一个网络应用程序。我玩了很多选择，但未能取得最终进展。

我需要按以下方式路由网址：

```
http://myapp/
http://myapp/en/album 
```

到 AlbumController/indexAction。此外，链接需要作为：

```
http://myapp/en/album/edit/1
http://myapp/en/album/delete/1 
```

**该代码生成正确的 URL，但单击返回“404”错误**

我的 Application/module.config.php 如下：

* * *

```
return array (
        'router' => array (
                'routes' => array (
                        'home' => array (
                                'type' => 'Zend\Mvc\Router\Http\Literal',
                                'options' => array (
                                        'route' => '/',
                                        'defaults' => array (
                                                'controller' => 'Album\Controller\Album',
                                                'action' => 'index',
                                                'lang'     => 'en',
                                        ) 
                                ) 
                        ),
                        'application' => array (
                                'type' => 'Literal',
                                'options' => array (
                                        'route' => '/application',
                                        'defaults' => array (
                                                '__NAMESPACE__' => 'Application\Controller',
                                                'controller' => 'Index',
                                                'action' => 'index' 
                                        ) 
                                ),
                                'may_terminate' => true,
                                'child_routes' => array (
                                        'default' => array (
                                                'type' => 'Segment',
                                                'options' => array (
                                                        'route' => '[:lang[/album[/:action[/:id]]]]',
                                                        'constraints' => array (
                                                                'lang'     => '[a-z]{2}',
                                                                'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                                                'id' => '[0-9]+'
                                                        ),
                                                        'defaults' => array (
                                                                'controller' => 'Album\Controller\Album',
                                                                'action' => 'index',
                                                                'lang'     => 'en',
                                                        )
                                                ) 
                                        ) 
                                ) 
                        ) 
                ) 
        ),
        'service_manager' => array (
                'factories' => array (
                        'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory' 
                ) 
        ),
        'translator' => array (
                'locale' => 'en_US',
                'translation_file_patterns' => array (
                        array (
                                'type' => 'gettext',
                                'base_dir' => __DIR__ . '/../language',
                                'pattern' => '%s.mo' 
                        ) 
                ) 
        ),
        'controllers' => array (
                'invokables' => array (
                        'Application\Controller\Index' => 'Application\Controller\IndexController' 
                ) 
        ),
        'view_manager' => array (
                'display_not_found_reason' => true,
                'display_exceptions' => true,
                'doctype' => 'HTML5',
                'not_found_template' => 'error/404',
                'exception_template' => 'error/index',
                'template_map' => array (
                        'layout/layout' => __DIR__ . '/../view/layout/layout.phtml',
                        'application/index/index' => __DIR__ . '/../view/application/index/index.phtml',
                        'error/404' => __DIR__ . '/../view/error/404.phtml',
                        'error/index' => __DIR__ . '/../view/error/index.phtml' 
                ),
                'template_path_stack' => array (
                        __DIR__ . '/../view' 
                ) 
        ) 
); 
```

* * *

我的 Album/module.config.php 有以下路由器：

* * *

```
'router' => array (
                'routes' => array (
                        'album' => array (
                                'type' => 'segment',
                                'options' => array (
                                        'route' => '[:lang[/album[/:action[/:id]]]]',
                                        'constraints' => array (
                                                'lang'     => '[a-z]{2}',
                                                'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                                'id' => '[0-9]+'
                                        ),
                                        'defaults' => array (
                                                'controller' => 'Album\Controller\Album',
                                                'action' => 'index', 
                                                'lang'     => 'en',
                                        )
                                ),
                        )
                )
        ), 
```

* * *

///////////////////////////////////////// //////////////////////////////////现在这工作正常。

另外，当我调用 $this->url('album',array('action'=>'edit', 'id' => $album->id)); 在视图文件 (.phtml) 中，它没有按预期返回正确的 url：

[http://www.myapp.com/en/edit/id/1](http://www.myapp.com/en/edit/id/1)

///////////////////////////////////////// /////////////////////////////////////////////////// corrected代码适用于url $ this-> url ('album', array('action'=>'edit', 'id' => $album->id)) /////////////////// ///////////////////////////////////////// ///////////////

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:12:51.000

问题在 Album/module.config.php 中缺少“/”：

```
'route' => '[:lang[/album[/:action[/:id]]] 
```

本来应该：

```
'route' => '/[:lang[/album[/:action[/:id]]] 
```

再次感谢大家的帮助。

# threadpool - netty.3.5.7 是否开始用 200 个线程初始化工作池？

> ID：14462728
> 
> 赞同：2
> 
> 时间：2013-01-22T16:00:16.303
> 
> 标签：threadpool, netty

谁能确认 Netty 3.5.7 是否引入了导致创建 200 个线程的 NIO 线程池的更改？

我们有一个在 Tomcat 7 中运行的 web 应用程序，我注意到在某些时候有一个新的 200 个 NIO 线程块 - 全部标记为“New I/O Worker #”。我已经验证了在 3.5.6 中，这个线程池不是用 200 个线程初始化的，而只是一个老板线程。一旦我用 3.5.7 替换了 jar，我现在就有 200 个 NIO 线程 + boss 线程。

如果此更改是在 3.5.7 中引入的，是否可以通过一些外部配置来控制池大小？我问是因为我们没有明确使用 Netty，它被第 3 方 JAR 使用。

谢谢，鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:50:18.513

由于同步的开销，Netty 不再使用懒惰的启动工作者。我想这可能是你看到的问题。

这里唯一的帮助是在创建 Nio*ChannelFactory 时更改 worker-count。无论如何，200是一种很高的方式。

# android - 最终启动顺序出错 无法执行 MI 命令 -gdb-set target-async off

> ID：14462730
> 
> 赞同：46
> 
> 时间：2013-01-22T16:00:16.230
> 
> 标签：android, eclipse, android-ndk

我在 Eclipse 上有两个项目，一个产生一个 so，另一个是使用它的 Android 应用程序我正在尝试使用[本指南](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/)在 so 中调试本机代码。

1.  我将我的应用程序设置为可调试
2.  我在调试模式下启动了我的应用程序
3.  我运行 ndk-gdb

当我运行本机调试器时，我得到：

```
Error in final launch sequence
Failed to execute MI command:
-gdb-set target-async off
Error message from debugger back end:
Cannot change this setting while the inferior is running.
Cannot change this setting while the inferior is running. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-06T14:59:44.273

我在这里找到了这个链接[链接](https://www.eclipse.org/forums/index.php/t/795327/)，实际作者是`marc`。

**由于您遵循指南并安装了`CDT`.**

当**CDT**启动时，它会尝试在 处设置断点`main`，因此当您的程序启动时它会中断执行。但是，您的目标已经在运行，因此无法设置断点并且整个事情都失败了。

**您可以简单地告诉您的启动不要设置该断点**并让它连接到您的目标。转到：运行->调试配置...并找到您的启动配置。然后选择启动子选项卡，向下滚动并取消选中“运行时选项”小节中的“设置断点”。

****它也可能与您使用的操作系统有关，因为这是执行较差的问题。****因此可能需要补丁。但在做任何事情之前尝试上面。它可能会解决您的问题。

此外，从 .gdbinit 文件中删除“target”命令可能会有所帮助，因为 eclipse 插件已经发出了这个命令。

如果没有任何效果，您可能会寻找更改调试器，因为最后它是一个 gdb 编译问题。

我的回答完全基于研发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-04T14:46:59.473

eclipse内部的gdb客户端和gdb服务器不匹配。尝试在eclipse中更改gdb客户端

> 调试设置 --> 调试器 --> 主选项卡 --> 浏览到为同一平台编译的 gdb

# html - 链接背景是每行一行而不是纯色背景，修复？

> ID：14462732
> 
> 赞同：0
> 
> 时间：2013-01-22T16:00:24.020
> 
> 标签：html, css

就像标题说的那样，我无法将 a 元素的背景设为一种纯色。相反，我的代码使每一行都成为颜色。我什至尝试将 php 元素包装在一个新的 div 中并设置该背景颜色，但它做同样的事情。任何建议都是有用的。

网站： http: [//www.whatsatyourcore.com](http://www.whatsatyourcore.com)，底部小部件标题

的HTML： `<a class="teaser-title-top" title="Social customer service and your marketing strategy" href="http://whatsatyourcore.com/?p=78"> Social customer service and your marketing strategy</a>`

CSS：

```
.teaser-title-top { background: black;} 

a.teaser-title-top {
color: #fff;} 
```

上面的“代码框”就是一个例子。第一个是背景对我的标题所做的事情。第二个是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:04:00.663

如果你将它包装在 a 中并`div`设置它应该可以工作。您设置的元素需要是块级元素（a is），您可以将元素设置为显示为块级元素，否则它只会为内联内容的背景着色。`div``background-color``background-color``div``display: block;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:06:30.030

您正在为锚定样式，该锚定只会对其中的内容进行样式化。尝试类似：

```
<div id="title-box">
     <div class="teaser-title-top">
            <a href="http://whatsatyourcore.com/?p=78" title="Social customer service and your marketing strategy"> Social customer service and your marketing strategy</a>
     </div>
</div> 
```

然后为 .teaser-title-top 设置样式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:13:12.190

试试这个希望它有效

```
#bottom .teaser-title-top {
      color: white;
} 
```

在你的 css 文件中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:06:50.417

与其他答案一样，您可以设置包装元素的样式。但是，如果您只想直接设置锚文本的样式，请尝试此...

问题是文本的行高。如您所见，它是隔开的。如果你。与文本的大小相比，行的高度更大。

例如，设置`#bottom a { line-height: 100%; }`（这是字体大小设置的值），您会看到差距消失了。您还会看到间距消失。您可以使用顶部/底部填充“恢复”间距，以及更改行高。

# php - 内容传输编码：7bit

> ID：14462734
> 
> 赞同：1
> 
> 时间：2013-01-22T16:00:24.340
> 
> 标签：php, character-encoding

我这里有问题。我创建了一个 mail() PHP 脚本来发送附件，您通常会通过常规电子邮件提供商发送。问题是我只能发送不超过一定字符数的文件。例如，我可以发送一个名为“New Text Document”的文件，但如果我尝试发送一个名为“New Document of Microsoft Word (3)”的文件，它永远不会收到我的电子邮件。

有人可以告诉我为什么会这样吗？

```
error_reporting(-1);
if(empty($_POST) === false){
$errors = array();

$name = $_POST['name'];
$email = $_POST['email'];
$file = $_FILES['filename'];

if(empty($name) === true || empty($email) === true || empty($_POST['message']) === true){
  $errors[] = 'Name, email and message are required!';
} else {
  if(filter_var($email, FILTER_VALIDATE_EMAIL) === false){
   $errors[] ='Not a valid email';
  }
  if(ctype_alpha($name) === false){
   $errors[] ='Name must only contain letters';
  }
}
$message;
if(empty($errors) === true){
  if($_FILES['filename']['error'] == UPLOAD_ERR_OK){
   $boundary = '-----' . md5(rand()) . '---';
   $headers = array(
    'MIME-Version: 1.0',
    "Content-type: multipart/mixed; boundary=\"{$boundary}\"",
    "From: {$email}"
   );
   $message = array(
    "--{$boundary}",
    'Content-type: text/html',
    'Content-Transfer-Encoding: 7bit',
    '',
    chunk_split($_POST['message']),
    "--{$boundary}",
    "Content-type: {$file['type']}; name=\"{$file['name']}\"",
    "Content-Disposition: attachment; filename=\"{$file['name']}\"",
    'Content-Transfer-Encoding: base64',
    '',
    chunk_split(base64_encode(file_get_contents($file['tmp_name']))),
    "--{$boundary}--"
   );
   $message = implode("\r\n", $message);
  } else {
   $headers = array(
    "From: {$email}"
   );
   $message = &$_POST['message'];
  }
  //send email
  var_dump(mail($email, 'Contact form', $message, implode("\r\n", $headers)));

   echo $_FILES['filename']['name'];
  /*//redirect user
  header('Location: index.php?sent');
  exit();*/
}  
}
?

<!doctype html>
<html>
<head>
  <title>A contact form</title>
</head>
<body>
  <?php
   if(isset($_GET['sent']) === true){
    echo '<p>Thanks for contacting us</p>';
   } else {
    if(empty($errors) === false){
         echo '<ul>';
         foreach($errors as $error){
          echo '<li>', $error ,'</li>';
         }
         echo '</ul>';
    }
            ?>
            <form action="" method="post" enctype="multipart/form-data">
                    <p>
                            <label for="name">Name:</label><br />
                            <input type="text" name="name" id="name" <?php     if(isset($_POST['name']) === true){ echo 'value="', strip_tags($_POST['name']), '"';} ?>>
                    </p>
                    <p>
<label for="email">Email:</label><br />
                            <input type="text" name="email" id="email" <?php     if(isset($_POST['email']) === true){ echo 'value="', strip_tags($_POST['email']), '"';} ?>>
                    </p>
                    <p>
                            <label for="message">Message:</label><br />
                            <textarea name="message" id="message"><?php     if(isset($_POST['message']) === true){ echo strip_tags($_POST['message']); } ?></textarea>
                    </p>
                    <p>
                            List of files allowed: .pdf, .odt, .doc(x), xls(x), ppt(x), >xps, xml
                    </p>
                    <p>
                            <input type="file" name="filename">
                    </p>
                    <p>
                            <input type="submit" value="submit">
                    </p>
            <?php
                    }
            ?>
            </form>
</body>
</html> 
```

它发送附件，但仅当文件具有例如文件名称为 10 个字符时，但如果它有 15 个字符，则不会发送

# php - 在 configureFormFields 从 SonataUserAdmin 中删除 FormGroup

> ID：14462736
> 
> 赞同：0
> 
> 时间：2013-01-22T16:00:27.170
> 
> 标签：php, symfony-2.1, sonata-admin, sonata-user-bundle

我在方法中扩展和`UserAdmin`删除 a时遇到问题。`FormGroup``configureFormFields`

我可以使用以下方法删除字段：

```
public function configureListFields(FormMapper $formMapper)
{
    $formMapper
        ->with('Profile')
            ->remove('locale')
        ->end()
    ;
} 
```

如果我删除 下的所有字段`Profile`，它仍然显示为标题。我尝试删除`Profile`做：

```
$formMapper
    ->remove('Profile')
; 
```

但这不起作用 - 经过一些研究后，似乎 remove 只关注儿童而不是 FormGroups。**从格式化程序中删除 FormGroup 使其不再显示的正确方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:45:49.397

我找到了一个解决方案，但它不是很优雅：

```
$groups = $formMapper->getAdmin()->getFormGroups();
unset($groups['groupname']);
$formMapper->getAdmin()->setFormGroups($groups); 
```

更好的解决方案更受欢迎。

# android - 检测在前台运行的任何应用程序

> ID：14462737
> 
> 赞同：2
> 
> 时间：2013-01-22T16:00:31.253
> 
> 标签：android, android-layout

反正有没有检测任何在前台运行的应用程序？每当用户在主屏幕上时，我都想执行一些操作。如果用户在电子邮件或其他活动中，我不想触发这些操作。

# ruby-on-rails - Rails 2.2 - 在 lib 之后 rake 任务加载宝石，因此丢失补丁

> ID：14462738
> 
> 赞同：1
> 
> 时间：2013-01-22T16:00:34.947
> 
> 标签：ruby-on-rails, ruby, rake

在我的 lib 文件夹中，我有各种文件，这些文件修补了 rails 中的各种核心类和 gem。当我运行rails（独角兽，杂种，控制台）时，首先加载gem，然后加载lib中的补丁，以便lib补丁覆盖gem。

但是，当我运行 rake 任务时，lib 文件会在 gem*之前*加载，这意味着原始 gem 方法会覆盖补丁，并且补丁会被有效地忽略。

有谁知道我该如何解决这个问题？我的 Rakefile 有这个：

```
# Add your own tasks in files placed in lib/tasks ending in .rake,
# for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.

require(File.join(File.dirname(__FILE__), 'config', 'boot'))

require 'rake'
require 'rake/testtask'
require 'rake/rdoctask'

require 'tasks/rails' 
```

我正在运行的 rake 任务设置如下：

```
desc "blah"
task :convert_worlds, [:new_instrument] => :environment do |t, args|  
  ...
end 
```

感谢您的任何建议 - Max

# image - 拉斐尔游乐场效果和填充不透明度

> ID：14462739
> 
> 赞同：3
> 
> 时间：2013-01-22T16:00:35.087
> 
> 标签：image, cross-browser, raphael

我编写了以下代码：

```
var w = 800;
var h = 600;

var paper = Raphael(0, 0, w, h);

paper.image("http://static.pourfemme.it/pfmoda/fotogallery/625X0/63617/borsa-alviero-martini-rodeo-drive.jpg", 0, 0, w, h); 

var c = paper.circle(400, 300, 1);

c.attr({stroke: "#999", "stroke-width": w*2});

anim = Raphael.animation({r: w*2}, 6000);

c.animate(anim.delay(100)); 
```

( [http://jsfiddle.net/qAgy7/](http://jsfiddle.net/qAgy7/) )

当圆圈扩大其半径时，我需要可视化背景图像，但是我有以下问题：

*   我不明白为什么动画运行缓慢
*   Chrome 以不同的方式呈现效果（我看到的是多边形而不是 Firefox 和 IE 中的圆形）

有人可以帮助我吗？

# javascript - 用JS使用charCodeAt()和fromCharCode获取Unicode字符（码值>55349）

> ID：14462748
> 
> 赞同：3
> 
> 时间：2013-01-22T16:00:54.127
> 
> 标签：javascript

我`"".charCodeAt(pos)`用来获取一个奇怪字符的 Unicode 编号，然后`String.fromCharCode`反过来。

但是我遇到了 Unicode 编号大于 55349 的字符的问题。例如，[Blackboard Bold 字符。](http://en.wikipedia.org/wiki/Blackboard_bold)如果我想要 Unicode 编号为 120169 的小写黑板粗体 X ( `)，如果我从 JavaScript 警告代码：`

 ````
alert(String.fromCharCode(120169)); 
```

我得到另一个角色。`如果我直接在 JavaScript 中记录一个 Unicode 编号为 120143的大写黑板粗体 X ( )，也会发生同样的事情：`

 ````
s="";
alert(s.charCodeAt(0))
alert(s.charCodeAt(1)) 
```

输出：

```
55349
56655 
```

有没有办法处理这些字符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T16:08:30.153

在内部，Javascript 以类似于 UCS2 和 UTF-16 的 16 位编码存储字符串。（我说相似，因为这两者都不是）。它们是 16 位的事实意味着[BMP](http://en.wikipedia.org/wiki/Plane_%28Unicode%29#Basic_Multilingual_Plane)之外的字符（代码点高于 65535）将被分成两个不同的字符。如果您将两个不同的字符分开存储，然后再将它们重新组合，您应该可以毫无问题地获得原始字符。

不过，认识到你有这样一个角色可能相当棘手。

Mathias Bynens 曾就此写过一篇博文：[JavaScript 的内部字符编码：UCS-2 还是 UTF-16？](http://mathiasbynens.be/notes/javascript-encoding). 它非常有趣（尽管有时有点神秘），并以对支持从 UCS-2 到 UTF-16 的转换的代码库的几个引用结束，反之亦然。你也许可以在那里找到你需要的东西。``

# google-plus - Google +1 按钮 - 如何禁用弹出窗口？

> ID：14462750
> 
> 赞同：2
> 
> 时间：2013-01-22T16:00:59.983
> 
> 标签：google-plus

我想禁用当用户悬停在我的网站上的 +1 按钮时出现的框。另外，我想禁用执行操作时弹出的框。

这可能吗？我在文档中找不到任何详细信息。

非常相似的问题：[Facebook Like Button - how to disable Comment pop up?](https://stackoverflow.com/questions/3247855/facebook-like-button-how-to-disable-comment-pop-up)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:04:12.613

不幸的是，悬停气泡是 +1 按钮的一项功能，因为它为用户提供了有关他们推荐内容的更多信息。目前，无法删除它们。但是您可以随时在我们的问题跟踪器中提出功能请求，您可以在[http://developers.google.com/+/support](http://developers.google.com/+/support)找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:35:36.880

我也想知道这个问题的正确答案！他们的 data-recommendations="false" 属性目前什么都不做。我目前发现的最好的方法是隐藏悬停时显示的表格的 CSS 解决方案：

```
table.gc-bubbleDefault.pls-container {
    display: none !important;
} 
```

# asp.net-mvc-3 - 在 MVC3 中，如何获取当前控制器名称？

> ID：14462751
> 
> 赞同：5
> 
> 时间：2013-01-22T16:01:01.863
> 
> 标签：asp.net-mvc-3, model-view-controller, namespaces, controller, httpcontext

从 http 上下文类中是否有获取当前控制器名称的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T16:02:10.893

是的，你可以做这样的事情

```
HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString(); 
```

如果您在视图中，则可以执行以下操作：

```
ViewContext.RouteData.Values["Controller"] 
```

# php - 尝试使用 PHP 从 XML 中提取带有标签的内容

> ID：14462754
> 
> 赞同：0
> 
> 时间：2013-01-22T16:01:17.907
> 
> 标签：php, xml, nodes

我们在我们的机构使用 Acalog，并希望使用他们的（不受支持的）API 将目录内容从他们的网站中提取到我们的网站中。我可以访问他们的文件并提取信息，但格式（段落、粗体、斜体、中断）是作为节点（h:p、h:b、h:i、h:br）完成的。不幸的是，我从搜索 a:content 中提取的文本只带来了直接文本，不包括格式化节点。如何将节点带入文本？我哪里错了？

XML 的开头（我在大约一半时将其断开）

```
<catalog xmlns="http://acalog.com/catalog/1.0" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:a="http://www.w3.org/2005/Atom" xmlns:xi="http://www.w3.org/2001/XInclude" id="acalog-catalog-6">
<hierarchy>
    <legend>
        <key id="acalog-entity-type-5">
            <name>Department</name>
            <localname>Department</localname>
        </key>
    </legend>
    <entity id="acalog-entity-239">
        <type xmlns:xi="http://www.w3.org/2001/XInclude">
            <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" xi:xpointer="xmlns(c=http://acalog.com/catalog/1.0) xpointer((//c:key[@id='acalog-entity-type-5'])[1])"/>
        </type>
        <a:title xmlns:a="http://www.w3.org/2005/Atom">American Studies</a:title>
        <code/>
        <a:content xmlns:a="http://www.w3.org/2005/Atom" xmlns:h="http://www.w3.org/1999/xhtml">
            <h:p xmlns:h="http://www.w3.org/1999/xhtml">
                <h:span class="dept_intro">
                    <h:i>Chair of the Department of American Studies: </h:i>
                </h:span>
                <h:span class="dept_intro">John Smith</h:span>
                <h:br/>
                <h:span class="dept_intro"> 
                    <h:br/>&#xD;
                    Professors: Jane Smith; Sarah Smith, <h:i class="dept_intro">The Douglas Family Chair in American Culture, History, and Literary and Interdisciplinary Studies</h:i>
                    <h:br/><h:br/>&#xD;Associate Professor: Michael Smith
                </h:span>
                <h:span class="dept_intro"><h:br/></h:span>
            </h:p>
            <h:p xmlns:h="http://www.w3.org/1999/xhtml">
                <h:span class="dept_intro">Assistant Professor: Rebecca Smith</h:span>
            </h:p>
            <h:p xmlns:h="http://www.w3.org/1999/xhtml">
                <h:span class="dept_intro">Lecturer: * Leonard Smith</h:span></h:p>
            <h:p xmlns:h="http://www.w3.org/1999/xhtml">
                <h:span class="dept_intro">Visiting Lecturer: * Robert Smith<h:br/><h:br/><h:br/><h:br/></h:span><h:strong>Department Overview</h:strong></h:p>
            <h:p xmlns:h="http://www.w3.org/1999/xhtml" class="MsoNormal">American studies is an  interdiscipl 
```

这是我到目前为止编写的代码：

```
$xml = file_get_contents($url);
    if ($xml === false) {
        return false;
    } else {
        // Create an empty DOMDocument object to hold our service response
        $dom = new DOMDocument('1.0', 'UTF-8');
        // Load the XML
        $dom->loadXML($xml);
        // Create an XPath Object
        $xpath = new DOMXPath($dom);
        // Register the Catalog namespace
        $xpath->registerNamespace('h', 'http://www.w3.org/1999/xhtml');
        $xpath->registerNamespace('a', 'http://www.w3.org/2005/Atom');
        $xpath->registerNamespace('xi', 'http://www.w3.org/2001/XInclude');
        // Check for error
        $status_elements = $xpath->query('//c:status[text() != "success"]');
        if ($status_elements->length > 0) {
            // An error occurred
            return false;
        }
        $x = $dom->documentElement;
        foreach ($x->childNodes AS $item)
          {
          //echo $item->nodeName . " = " . $item->nodeValue . "<br/><br />";
          }
        // Retrieve all catalogs elements
        $pageText = $xpath->query('//a:content');
        if ($pageText->length == 0) {
            // No text found
            return false;
        }

        foreach ($pageText AS $item) {
            $txt = (string) $item->nodeValue;
            $txt = str_replace('<h:i>','<i>',$txt);
            $txt = str_replace('</h:i>','</i>',$txt);
            $txt = str_replace('<h:span class="dept_intro">','<p>',$txt);
            $txt = str_replace('</h:span>','</p>',$txt);
            if(strpos($txt,'Department Overview')) {
                echo '<p>' . str_replace('Department Overview','',$txt) . '</p>';
                break;  
            } else {
                echo '<p>' . $txt . '</p>';
            }
            //echo $pageText->nodeValue;
        }
    } 
```

行 $pageText = $xpath->query('//a:content'); 提取内容，但不提取标签。

# git - 如何从目录中删除新文件？

> ID：14462755
> 
> 赞同：3
> 
> 时间：2013-01-22T16:01:33.687
> 
> 标签：git

当我想回滚目录中的更改时，我习惯这样做：

```
$ git checkout path/to/dir/ 
```

但是现在我需要删除在该目录中创建（未修改）的文件，并且结帐不起作用。我能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:10:52.267

`git clean -f`或者`git clean -f -d`如果您还想删除目录。[来源](https://stackoverflow.com/questions/61212/removing-untracked-files-from-your-git-working-copy)
另请查看[官方文档](http://www.kernel.org/pub/software/scm/git/docs/git-clean.html)

# php - 将最新的数据库项放在顶部

> ID：14462761
> 
> 赞同：-2
> 
> 时间：2013-01-22T16:01:46.073
> 
> 标签：php, mysql

我使用 PHP 和 MySQL 制作了一个微博系统（如 Twitter）。每次有人发布一个项目时，它都会在数据库中包含 UNIX 时间戳。但我的问题是，我如何获得页面顶部的最新项目，第二个到最新的第二个等？所以基本上，在页面顶部具有“最高”时间戳的那个，在那个下面有一点“更少”时间戳的那个。这就是我得到的（我知道 mysql_ 函数已被弃用）：

```
<?php
/*Database test.
© 2013 Sydcul. All rights reserved.

To set the database settings, use the 'install' directory*/

include ($_SERVER['DOCUMENT_ROOT'] . '/test/config.inc.php');

$connection = mysql_connect($host, $user, $password);

mysql_select_db($database, $connection);

$messages = mysql_query("SELECT * FROM `" . $prefix . "microblog`");

while($row = mysql_fetch_array($messages))
  {
    $names = mysql_query("SELECT first_name,last_name FROM `" . $prefix . "data` WHERE id='" . $row['id'] . "'");
    $name = mysql_fetch_assoc($names);
    $fullname = $name['first_name'] . " " . $name['last_name'];
    echo "<h2>Posted by " . $row['id'] . " (" . $fullname . ")</h2>";
    echo $row['message'] . "<br><br>";
  }
mysql_close($connection);
?> 
```

请解释一下如何做，而不是只给我代码，否则我和stackoverflow上的其他人无法从中学习:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:03:18.560

[`ORDER BY`](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)在您的 SQL 中使用

```
SELECT * FROM tablename ORDER BY datefield DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:08:59.840

如果您有一个 auto_incrementing ID 字段，请获取您的数据和 ORDER BY `ID`，否则如果您有一个 DateField，则按降序排序

```
ORDER BY `ID` DESC 
```

就如此容易。

# objective-c - 可拖动的图像视图

> ID：14462767
> 
> 赞同：0
> 
> 时间：2013-01-22T16:02:16.020
> 
> 标签：objective-c, macos

我有一个大约 14000 像素 x 14000 像素的图像。我想把它放在一个视图中，然后能够拖动那个图像来改变所看到的。是否有本地方法可以做到这一点或已经编写的自定义类，或者我必须自己做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:20:21.403

对于**iOS**

1)[在屏幕周围拖放图像](http://www.icodeblog.com/2008/10/20/iphone-programming-tutorial-using-uitouch-to-drag-an-image-around-the-screen/)：使用 UITouch 在屏幕周围拖动图像

2)[拖放对象](https://github.com/Hegaka/HGKDragAndDropRecycleBin)：在可滚动图片库中拖放对象

3)[基本拖放](https://stackoverflow.com/questions/4707858/basic-drag-and-drop-in-ios)

对于**Mac**

我认为mac os没有任何现成的方法可供您使用。您需要根据您的要求实现NSDraggingSource[的-draggingSession:endedAtPoint:operation:。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSDraggingSource_Protocol/Reference/Reference.html)不幸的是，在 OS X v10.7 及更高版本中，方法“-draggedImage:endedAt:operation:”已被弃用。你可以参考[这个](https://stackoverflow.com/questions/14326329/cocoa-osx-how-can-i-make-an-image-draggable)来实现 NSDraggingSource 协议。

draggingSession:movedToPoint：当拖动在屏幕上移动时调用。

**- (void)draggingSession:(NSDraggingSession *)sessionmovedToPoint:(NSPoint)screenPoint**

-- **session**：拖动会话。

-- **screenPoint** : 拖动移动到的点，在屏幕坐标中。

我希望这对你有用......快乐的编码:-)

# php - 使用自定义 url 进行 Knp Paginate Bundle 排序

> ID：14462772
> 
> 赞同：1
> 
> 时间：2013-01-22T16:02:26.060
> 
> 标签：php, symfony, doctrine

我正在尝试更改可排序的 url，第一步是覆盖`sortable_link.html.twig`模板

```
<a href="{{ path('my_custom_route', {'key': key,'sort':key,'direction':direction}) }}">{{ title }}</a> 
```

但是排序不运行...

我进行了一些研究`Knp\Component\Pager\Event\Subscriber\Sortable\Doctrine\ORM\QuerySubscriber`，发现 $_GET 用于检索数据！

如何覆盖此订阅者以使用我的 Symfony2 标准路由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T14:33:23.860

有同样的问题。我真的还没有找到一个**明确**的非hacky方法来解决这个问题。通过在控制器中手动设置 $_GET 参数，您可以**使其与可怕、丑陋和错误的 hack 一起工作。**

```
public function myAction($page, $sort, $direction)
{
    $_GET['sort'] = $sort;
    $_GET['direction'] = $direction;

    // ... your code
} 
```

# jquery - How jQuery select a HTML input with its name and atttribute?

> ID：14462774
> 
> 赞同：5
> 
> 时间：2013-01-22T16:02:36.647
> 
> 标签：jquery, html, selector

I got a very common question that I want to get the value of a HTML input by jQuery selector with its name and specific attribute like checked. Following is my case:

```
<input type="radio" name="gender" value="man" checked="checked" />
<input type="radio" name="gender" value="women"/> 
```

I tried the following code:

```
var gener = $("name='gender':checked=checked").val(); 
```

But it didn't return a correct value. Hope somebody gives me help on it. Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T16:04:33.973

You need to type the element then the attribute, like this `$('element[attribute="value"]')`

```
$('input[name="gender"]:checked').val(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T16:04:11.310

With the `:checked` selector, you don't need to provide a value, try this:

```
var gender = $('input[name="gender"]:checked').val(); 
```

More information in the [API docs](http://api.jquery.com/checked-selector/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T16:05:14.943

```
$('input[name="gender"]:checked').val(); 
```

Are you looking for something like that?

# pdf - 对 PDF 表单的 XFDF URL 引用不起作用

> ID：14462777
> 
> 赞同：3
> 
> 时间：2013-01-22T16:02:40.667
> 
> 标签：pdf, adobe, fdf, xfdf

我正在使用 XFDF 填充 PDF 表单。XFDF 由我的 Java webapp 生成。我想使用 URL 从 XFDF 引用 PDF 表单，因为我希望将表单模板存储在服务器上。该表单受密码保护，因此我无法使用 iText 在服务器端将其展平。

使用本地路径可以正常工作：

```
<f href="C:\Users\...\MyForm.pdf"/> 
```

但 URL 失败：

```
<f href="http://localhost:8080/app/servlet/PdfForm?id=176"/> 
```

从下面的文章看来这是可能的，但我查看了 XFDF 规范，它没有提到 URL，只有本地路径：

[http://wiki.developerforce.com/page/Adobe_XFDF](http://wiki.developerforce.com/page/Adobe_XFDF)

Acrobat Reader X 和 Acrobat Pro X 似乎都无法处理它。浏览器启动，但表单没有合并。我尝试将默认浏览器从 Chrome 更改为 Firefox 到 IE，但没有成功。

有谁知道 URL 引用是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-10T01:26:38.507

我可以在安装了 Adob​​e Acrobat Reader DC 的 PC 上的 Internet Explorer 中打开它，但其他浏览器似乎无法这样做。参考：[https ://helpx.adobe.com/jp/acrobat/using/display-pdf-in-browser.html](https://helpx.adobe.com/jp/acrobat/using/display-pdf-in-browser.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T08:00:52.067

我认为 URL 应该只是[http://xx.xxx/xxx/test.pdf](http://xx.xxx/xxx/test.pdf)，一个 pdf 格式，而不是一个流。

# php - 所见即所得编辑器转义图像 url

> ID：14462783
> 
> 赞同：0
> 
> 时间：2013-01-22T16:02:55.737
> 
> 标签：php, ckeditor, wysiwyg

我正在使用 CKeditor，但我无法使用图像。当我使用它创建帖子/文章时，添加图像等，一切正常。但是，在我将文章提交到数据库后，它会转义 url 和整体语法，这将导致当我尝试查看它时没有显示图像。

这是编辑器中的 img 语法：

```
<img alt="logo" src="/images/image.png" style="width: 250px; height: 183px; border-width: 2px; border-style: solid;" /> 
```

这是在插入函数运行之后：

```
<img alt=\"logo\" src=\"/images/image.png\" style=\"width: 200px; height: 147px; border-width: 2px; border-style: solid;\" /> 
```

你明白了它的要点，它避开了所有必需品，所以它不会破坏 html。我在这里做了一些搜索，发现了类似的东西`html_entity_decode`，但没有用。

如何正确“取消转义”语法以便图像正确显示？

PS：这是我使用的插入和显示脚本

```
public function insert () {
    $sql = $this->db->prepare("INSERT INTO Content (Title, Body, category) VALUES (?, ?, ?)");
        $sql->bindParam(1, $_POST['title']);
        $sql->bindParam(2, $_POST['body']);
        $sql->bindParam(3, $_POST['category']);
        $sql->execute();
}

public function display ($id) {
    $sql = $this->db->query("SELECT Body FROM Content WHERE id='$id'");
    while ($row = $sql->fetch()) {
        echo $row;
    }
} 
```

`html_entity_decode`我在显示脚本中尝试过`$a = html_entity_decode($row['Body']);`，然后回显它或将行分配给一个变量然后解码它。也许我做错了，我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:50:11.580

在显示函数中添加了 stripslashes($output)，如下所示：

```
public function display ($id) {
    $sql = $this->db->query("SELECT Body FROM Content WHERE id='$id'");
    while ($row = $sql->fetch()) {
        //removes the extra slashes
        echo stripslashes($row); 
    }
} 
```

# visual-studio-2005 - VS2005 上的英特尔并行工作室警告

> ID：14462793
> 
> 赞同：1
> 
> 时间：2013-01-22T16:03:27.497
> 
> 标签：visual-studio-2005, intel-parallel-studio

我安装了英特尔并行工作室并使用它。但是当我运行应用程序时，我在 Visual Studio 2005 的输出部分收到一条消息，上面写着

> “在达到 10 MB 原始数据的配置限制后，数据收集已停止。目标将继续运行，但不会收集更多数据。由于达到 (10 Mb) 的数据大小限制，数据收集已停止。应用程序正在运行，但未收集任何数据。”</p>

有谁知道为什么会出现这条消息，如果我继续运行我的应用程序，就不会收集数据。我不确定如何配置设置，因为这是我第一次使用任何此类工具来查找性能热点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T12:27:48.727

很高兴知道您正在使用哪个版本的 Parallel Studio 以及您正在运行哪个集合（因为不同的收集器使用不同的设置）。

假设您正在运行放大器集合：

*   单击*“项目属性”*按钮（在工具栏上或左侧面板上的*“开始”按钮下）。*
*   在*“目标”*选项卡中展开*“高级”*部分。
*   有*“收集数据限制”*选项。您可以酌情增加它。在 Parallel Studio 的最新版本中，默认情况下它增加到 500 MB。

您可以将数据限制设置为零以进行无限制收集。我不建议这样做，因为您可能会很快耗尽磁盘空间。这也是这个选项在这里的原因——无限制的收集会产生大量的原始数据。

# cordova - PhoneGap 2.3.0 插件映射

> ID：14462798
> 
> 赞同：3
> 
> 时间：2013-01-22T16:03:37.073
> 
> 标签：cordova

我有一个 qq，当我尝试向 Cordova 添加插件时，我一直遇到 1 个烦人的小问题，我不知道该如何解决。

所以：PDFViewer 插件[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PDFViewer](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PDFViewer)

我遵循所有说明，并更新 config.xml 文件，

前任：`<plugin name="PDFViewerCommand" value="PDFViewerCommand" />`

但问题是当我尝试按“插件”文件夹中的文件夹拆分插件时。

我的意思是，如果我在插件文件夹的根目录中提取所有“name.h，name.m”，它就可以正常工作。

但是因为我可以有超过 1 个插件，所以它会很混乱。所以我想按文件夹拆分插件：

前任：

*   插件 --> PdfViewEr
*   插件 --> ChildBrowser
*   插件 --> 新插件

我知道它应该与映射相关，或者我可以在某个地方声明文件夹名称。

# ios - DismissViewController 与 Core Data 的性能问题

> ID：14462806
> 
> 赞同：0
> 
> 时间：2013-01-22T16:04:04.287
> 
> 标签：ios, uitableview, core-data, modalviewcontroller

我有两个视图控制器，一个是主视图控制器，一个是弹出控制器。它们中的每一个都包含一个`UITableView`和一个`fetchedResultController`来提供数据。

弹出窗口设置在情节提要内，我添加 BarButtonItem 以关闭弹出窗口。关闭代码很简单

```
[self.presentingViewController dismissViewControllerAnimated:YES completion:nil] 
```

问题是弹出窗口关闭需要几秒钟，一旦我单击“关闭”按钮，应用程序就会冻结。

如果我`fetchedResultController`在 Popup 视图控制器中评论了设置，则立即关闭。所以我认为问题出在核心数据上。但不知道它可能是什么。

我也尝试运行 Instruments 来查看问题，除了上述解除代码之外，我的其他代码都没有执行。（虽然我对仪器没有很好的经验）

任何帮助/提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:28:10.807

OK，原来性能问题和core data和tableview无关。有罪的是 a `UISwith`，我对其应用 Scale 以使其比通常的开关更小。删除比例代码后，它表现正常。所以现在的问题是我需要弄清楚为什么规模让它这么慢，但这是另一个问题。

# batch-file - 如何正确使用此 bat 文件进行 FTP？

> ID：14462807
> 
> 赞同：0
> 
> 时间：2013-01-22T16:04:04.643
> 
> 标签：batch-file, command

我目前在我的 .bat 文件中有这个：

```
@echo off
echo user MyUserName> ftpcmd.dat
echo MyPassword>> ftpcmd.dat
echo bin>> ftpcmd.dat
echo put %1>> ftpcmd.dat
echo quit>> ftpcmd.dat
ftp -n -s:ftpcmd.dat SERVERNAME.COM
del ftpcmd.dat 
```

但是，我对 .bat 文件很陌生，我不太了解每一行在做什么。因此，如果有人可以向我解释这一点，那就太好了。另外，如何使它将文件上传到站点上的特定目录？所以主要是我在问我必须更换什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:51:58.793

您需要将命令添加到 cd 到特定目录。添加

```
echo cd <path to directory> >> ftpcmd.dat 
```

前

```
echo put %1>> ftpcmd.dat 
```

我建议通读[这篇](http://www.nsftools.com/tips/MSFTP.htm)文章以了解 ftp 的一般工作原理。

# bison - flex/bison 将数字解释为浮点数

> ID：14462808
> 
> 赞同：4
> 
> 时间：2013-01-22T16:04:07.260
> 
> 标签：bison, yacc, lex, flex-lexer

我正在尝试实现一个可以进行浮点运算的 flex/bison 计算器。我的弹性代码看起来像这样

```
%{
#include "calc.tab.h"
#include <stdlib.h>

void yyerror(char *s);
%}

digit [0-9]
integer {digit}+
real ({digit}+[.]{digit}*)|({digit}*[.]{digit}+)
exp ({integer}|{real})[eE]-?{integer}

%%

({integer}|{real}|{exp}) { yylval = atof(yytext); return NUMBER; }
[-+*/\n]                 { return *yytext; }
[ \t\v\f\r]              { }
.                        { yyerror("Unknown Character"); }

%%

int yywrap(void)
{
  return 1;
} 
```

我的野牛代码看起来像这样

```
%{
#include <stdio.h>

typedef double YYSTYPE;
#define YYSTYPE_IS_DECLARED

void yyerror(char *s);
extern char *yytext;
extern int yylineno;
%} 

%token NUMBER

%left '+' '-'
%left '*' '/'

%%

program: program expr '\n' { printf("%g\n", $2); }
       | program '\n'
       |
       ;
expr: expr '+' expr { $$ = $1 + $3; }
    | expr '-' expr { $$ = $1 - $3; }
    | expr '*' expr { $$ = $1 * $3; }
    | expr '/' expr { $$ = $1 / $3; }
    | NUMBER { $$ = $1; }
    ;

%%

void yyerror(char *s)
{
  fprintf(stderr, "error: %s at %s, line %d\n", s, yytext, yylineno);
}

int main(int argc, char *argv[])
{
  yyparse();

  return 0;
} 
```

这不会产生正确的输出。尽管词法分析器将字符串解释为双精度并将它们正确存储在`yylval`变量中，但当解析器将数字相加时，它只会吐出`0.0000`. 但是，如果我通过仅由一个变量组成的指令声明`yylval`为联合，并将输出存储在词法分析器的该字段中，并在解析器中声明和，那么一切似乎都有效。`%union``double lf_val;``atof``yylval``%token <lf_val> NUMBER``%type <lf_val> expr`

但是，为什么直接的`typedef`ing方法`YYSTYPE`不起作用呢？我也试过了`#define YYSTYPE double`。那也没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T17:36:06.297

关于`%code`，[Bison 的文档](http://www.gnu.org/software/bison/manual/bison.html#g_t_0025code-Summary)指出：

```
%code requires [...] is the best place to override Bison's default YYSTYPE
and YYLTYPE definitions. 
```

所以只需在你的野牛文件顶部添加以下内容：

```
%code requires
  {
    #define YYSTYPE double
  } 
```

您还需要删除这两行：

```
typedef double YYSTYPE;
#define YYSTYPE_IS_DECLARED 
```

请注意，据我所知，YYSTYPE_IS_DECLARED 没有记录在任何地方，因此仅供 Bison 内部使用。

如果您不熟悉 Bison`%code`指令在简单`%{`序言中的使用，您可能会发现[文档的这一部分](http://www.gnu.org/software/bison/manual/bison.html#Prologue-Alternatives)很有趣。

# .net - 在现有 .net 站点上使用 Umbraco 内容

> ID：14462815
> 
> 赞同：1
> 
> 时间：2013-01-22T16:04:28.800
> 
> 标签：.net, umbraco

我想将 Umbraco 用作我现有 .net 网站的 CMS。我已经翻阅了所有 Umbraco 教程/Wiki 文章，并得出结论，在我的代码中通过 Umbraco DLL 使用 NodeFactory 是前进的方向。

然而，所有文章/wiki/社区帮助假定您的 Umbraco 安装已经是您现有站点的一部分。在我的情况下，我需要将我的站点直接引用到新的 Umbraco 安装，这是将设置（例如 DB 连接字符串等）从 Umbraco Web.Config 导入我的站点 Web.Config 的简单案例还是存在从 Umbraco 安装中提取内容而不是现有站点的一部分的更好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:40:56.437

看你需要什么内容。我建议创建一些基本的 Web 服务来提供一个 API，以便从 umbraco 站点访问您的数据。Umbraco 提供了基本的其余扩展，使您可以轻松地建立 Web 服务。但您也可以连接 ashx 文件或类似文件。我在 umbraco 网站上使用 odata 取得了成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T05:06:24.500

我们为此使用了自定义 404 处理程序。ASP.NET 网站将处理该请求，而不是返回 404，然后将在内容站点上查找相同的路径。如果内容存在，我们将返回该页面。如果不是，我们返回 404 错误。

MVC 示例

```
[DefaultAction("index")]
public class RescuesController : SmartDispatchController
{
    private static readonly Regex headtitleRegex = new Regex("<h1>([^<]*)</>>");

    public RescuesController(IApplicationContextProvider currentCustomerProvider, IConfigurationManager configurationManager) : base(currentCustomerProvider, configurationManager) { }

    public void Index()
    {
        RenderView("rescues","content");

        string pageName = Request.Uri.LocalPath;
        if (pageName.EndsWith("/index"))
            pageName = pageName.Substring(0, pageName.LastIndexOf("/index"));

        try
        {
            var remoteContent = GetRemoteContent(pageName);

            var matches = headtitleRegex.Match(remoteContent);
            if (matches.Groups.Count > 1)
                PropertyBag.HeadTitle = matches.Groups[1].Captures[0].Value;

            PropertyBag.remoteContent = headtitleRegex.Replace(remoteContent, "");
        } catch (WebException) {
            Handle404();
        }
    }

    public static string GetRemoteContent(string pageName)
    {
        return (new WebClient()).DownloadString("http://content.mysite.com/" + pageName);
    }
} 
```

[http://www.robertgray.net.au/posts/2010/4/404-handlers](http://www.robertgray.net.au/posts/2010/4/404-handlers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:16:20.047

您想查看 Umbraco /Base - 更多详细信息请参见以下 url 以及此处引用的其他页面，了解如何使用 Umbraco /Base：

[http://our.umbraco.org/wiki/reference/umbraco-base](http://our.umbraco.org/wiki/reference/umbraco-base)

# c# - 不支持关键字：“版本”

> ID：14462818
> 
> 赞同：6
> 
> 时间：2013-01-22T16:04:33.533
> 
> 标签：c#, wpf, sqlite

我有这个项目，我在 VS2010 中作为 WinForms 项目编写。我不是在 VS2012 中将它作为 WPF 项目编写的。我有一个引用的 DLL ( `DailyReport`)。里面`DailyReport`有一个方法叫做`GetUniqueDates()`. 它看起来像这样：

```
 public List<string> GetUniquesDates()
    {
        var dates = new List<string>();

        const string query = "SELECT date FROM hdd_local_data_v1_2";

        try
        {
            // Exception here  on the connection creation
            using (var connection = new SqlConnection(ConnectionStringFile)) 
            {
                using (var command = new SqlCommand(query, connection))
                {
                    connection.Open();

                    using (var reader = command.ExecuteReader())
                    {
                        while (reader.Read())
                        {
                            for (var i = 0; i < reader.FieldCount; i++)
                            {
                                dates.Add(reader.GetValue(i).ToString());
                            }
                        }
                    }
                }
            }
        }
        catch (Exception ex)
        {         
            Logger.Error(ex.Message);
        }

        dates.Sort();

        return dates.Distinct().ToList();
    } 
```

在`ConnectionStringFile`构造函数中设置，如下所示：

```
ConnectionStringFile = @"Data Source=C:\hdd_data\Rubicon.hdd;Version=3;New=False;Compress=True;"; 
```

现在，在我的 VS2010 WinForms 项目中，这种方法效果很好。但是，在我的 VS2012 WPF 项目中，我遇到了上面提到的异常。例外是：

```
keyword not supported 'version'. 
```

该数据库是一个 SQLite 数据库。我试过删除`version`关键字，但后来我得到了例外：

```
keyword not supported 'new'. 
```

我的问题是：为什么连接会在我的 WinForms 项目而不是我的 WPF 项目中工作？处理数据库连接时有什么变化吗？

另外，请注意，这不是关于参数化查询等的问题。因此，如果可能的话，请将这些评论留给自己。谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T21:25:07.680

我遇到的问题是因为我试图创建 a`SqlConnection`而不是`SQLiteConnection`. 做出改变解决了我的问题。

# c# - 检查索引运算符是否存在

> ID：14462820
> 
> 赞同：7
> 
> 时间：2013-01-22T16:04:37.890
> 
> 标签：c#, multidimensional-array

我希望能够：

*   检查对象是否定义了索引运算符。
*   如果它被定义，我希望能够使用它。

我想在下面的代码中实现这一点。该代码包含一个对象 (MyObject)，它提供了一种遍历多维数组或链接的哈希表集的方法。如果请求路径中的节点不存在，它也应该防止出错。我无法弄清楚的部分是代码中的注释部分：

```
public class MyObject
{
    private object myObject = null;

    public MyObject()
    {
    }

    public MyObject(object value)
    {
        myObject = value;
    }

    public void setValue(object value)
    {
        myObject = value;
    }

    public object getValue()
    {
        return myObject;
    }

    public object this[string key]
    {
        get
        {
            if (myObject == null) 
            {
                return new MyObject(null);
            }
            else
            {
                // determine what of type/class myObject is and if it has indexing operators defined
                // if defined, access them and return the result
                // else return null.
            }
        }
        set
        {
            if (myObject == null)
            {
                // do nothing (or throw an exception);
            }
            else{
                // determine what of type/class myObject is
                // determine if that type/class has indexing operators defined
                // if defined, access them and set the result there
                // else do nothing (or throw an exception).
            }
        }
    }
} 
```

这是我希望完成的：

```
 // given these variables:
        string loremIpsumString = "lorem ipsum dolor sit amet";
        int[] digits = new int[10];
        for (int i = 0; i <= 3; i++) digits[i] = i;
        Hashtable outerHashtable = new Hashtable();
        Hashtable innerHashtable = new Hashtable();
        innerHashtable.Add("contents", "this is inside");
        outerHashtable.Add("outside", "this is outside");
        outerHashtable.Add("inside", innerHashtable);

        // I can already print this:
        Response.Write(    loremIpsumString    ); // prints "lorem ipsum dolor sit amet"
        Response.Write(    digits[0]    ); // prints "0"
        Response.Write(    digits[1]    ); // prints "1"
        Response.Write(    digits[2]    ); // prints "2"
        Response.Write(    outerHashtable["outside"]    ); // prints "this is outside"
        Response.Write(    ((Hashtable)outerHashtable["inside"])["contents"]    ); // prints "this is outside"

        // But I want to be to do it this way:
        MyObject myObject;

        myObject = new MyObject(loremIpsumString);
        Response.Write(    myObject.getValue()    ); // prints "lorem ipsum dolor sit amet"
        Response.Write(    myObject["unexistant"].getValue()    ); // prints nothing/null
        myObject = new MyObject(digits);
        Response.Write(    myObject[0].getValue()    ); // prints "0"
        Response.Write(    myObject[1].getValue()    ); // prints "1"
        Response.Write(    myObject[2].getValue()    ); // prints "2"
        myObject = new MyObject(outerHashtable);
        Response.Write(    myObject["outside"].getValue()    ); // prints "this is outside"
        Response.Write(    myObject["inside"]["contents"].getValue()    ); // prints "this is inside"
        Response.Write(    myObject["unexistant"].getValue()    ); // prints nothing/null
        Response.Write(    myObject["unexistant"]["unexistant"]["unexistant"].getValue()    ); // prints nothing/null 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T16:09:04.893

您可以先检查它是否继承`IList`到覆盖（通用）`Lists`和数组。如果没有，您可以使用[`PropertyInfo.GetIndexParameters`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.getindexparameters.aspx)它来检查它是否有索引器：

```
get
{
    if (myObject == null)
    {
        return null;
    }
    else
    {
        // not sure which index(es) you want
        int index = 0;
        Type t = myObject.GetType();
        if (typeof(IList).IsAssignableFrom(t))
        {
            IList ilist = (IList)myObject;
            return ilist[index];
        }
        else
        {
            var indexer = t.GetProperties()
                .Where(p => p.GetIndexParameters().Length != 0)
                .FirstOrDefault();
            if (indexer != null)
            {
                object[] indexArgs = { index };
                return indexer.GetValue(myObject, indexArgs);
            }
            else
                return null;
        }
    }
} 
```

[**演示**](http://ideone.com/M7rvBr)（带有`string`一个[索引器](http://msdn.microsoft.com/en-us/library/system.string.chars.aspx)来访问字符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:23:18.087

您可以测试对象是否是字典

```
public object this[string key]
{
    get
    {
        var dict = myObject as IDictionary;
        if (dict == null) {
            return null;
        }
        if (dict.Contains(key)) {
            return dict[key];
        }
        return null;
    }
    set
    {
        var dict = myObject as IDictionary;
        if (dict != null) {
            dict[key] = value;
        }
    }
} 
```

* * *

注意：如果您可以控制要使用的字典类型，则首选`Dictionary<string,object>`. `Hashtable`它方便的方法`TryGetValue`使您无需先调用就可以安全地访问它`Contains`，从而使您免于访问它两次。当然，您随后会转换为`Dictionary<string,object>`而不是`IDictionary`.

```
var dict = myObject as Dictionary<string,object>;
if (dict == null) {
    return null;
}
object result;
dict.TryGetValue(key, out result); // Automatically sets result to null
                                   // if an item with this key was not found.
return result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:50:08.773

对于其他正在寻找答案的人。这是我在@TimSchmelter 的帮助下所做的。

这是我在此屏幕顶部的代码中使用的 get{} 中实现的代码，在此屏幕顶部的 get{} 中只包含注释。

```
get
{
    if (myObject == null)
        return new MyObject(null);
    object returnValue = null;
    bool foundReturnValue = false;
    object[] indexArgs = { key };
    Type myObjectType = myObject.GetType();
    if (typeof(IList).IsAssignableFrom(myObjectType))
    {
        try
        {
            returnValue = ((IList)myObject)[((int)key)];
            foundReturnValue = true;
        }
        catch (Exception) { }
    }
    if (!foundReturnValue)
    {
        foreach (PropertyInfo property in myObjectType.GetProperties())
        {
            ParameterInfo[] indexParameters = property.GetIndexParameters();
            foreach (ParameterInfo indexParameter in indexParameters)
            {
                if (indexParameter.ParameterType.IsAssignableFrom(key.GetType()))
                {
                    try
                    {
                        returnValue = property.GetValue(myObject, indexArgs);
                        foundReturnValue = true;
                    }
                    catch (Exception) { }
                }
                if (foundReturnValue == true)
                    break;
            }
            if (foundReturnValue == true)
                break;
        }
    }
    return new MyObject(returnValue);
} 
```

# java - Solr4 创建自定义过滤器

> ID：14462821
> 
> 赞同：0
> 
> 时间：2013-01-22T16:04:39.120
> 
> 标签：java, solr, solr4

我正在尝试创建一个自定义过滤器。一切正常，但是我不确定如何返回多个索引结果。这是我的 incrementToken() 覆盖方法：

```
@Override
public boolean incrementToken() throws IOException {
    if (!input.incrementToken()) {
        return false;
    }

    ArrayList<String> results = processWord(charTermAttr.toString());

    return true;
} 
```

可以看出我的自定义方法的结果进入了一个 ArrayList，我现在不确定如何将它们中的每一个作为可索引的片段返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:19:49.290

描述很模糊，但是如果您尝试做类似于同义词的事情，您可能最好查看[有关令牌图的文章](http://blog.mikemccandless.com/2012/04/lucenes-tokenstreams-are-actually.html)并阅读支持它的过滤器的源代码。

# javascript - 将选项数组传递给 jquery 插件

> ID：14462822
> 
> 赞同：2
> 
> 时间：2013-01-22T16:04:41.643
> 
> 标签：javascript, jquery, jquery-plugins, datatables

我试图避免为每次调用插件编写 optinos 数组，我想知道如何创建一个唯一的共享选项数组来避免这种情况。

这可以应用于此调用，例如：

```
$(document).ready( function() {
  $('#example').dataTable( {
    "oLanguage": {
      "oPaginate": {
        "sNext": ">"
      }
    }
  } );
} ); 
```

我已经尝试过这样的事情，但它不起作用：

```
$.dataTable.defaults = {
    "oLanguage": {
        "oPaginate": {
              "sNext": ">"
        }
     }
} 
```

您可以在此处找到有关我尝试修改的选项数组的更多信息：http: [//datatables.net/usage/i18n](http://datatables.net/usage/i18n)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:07:06.567

只需先创建对象，您可以随时调用插件将其传入。

```
var pluginDefaults = { 
    "oLanguage": {
        "oPaginate": { 
            "sNext": ">" 
        }
    }
}; 
```

当准备好调用插件时，像这样使用它：

```
$('#example').dataTable( pluginDefaults ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T16:14:07.620

您可以使用[$.extend](http://api.jquery.com/jQuery.extend/)

```
$.extend($.fn.dataTable.defaults, {
    "oLanguage": {
       "oPaginate": { 
          "sNext": ">" 
        }
    }
}); 
```

这将设置默认数据表选项，然后您不必一遍又一遍地传递该选项

[文档](http://datatables.net/release-datatables/examples/advanced_init/defaults.html)

# development-environment - 镜像站点

> ID：14462827
> 
> 赞同：2
> 
> 时间：2013-01-22T16:04:59.047
> 
> 标签：development-environment

镜像网站以进行开发的最佳方式是什么。我的客户有一个相当大的站点，一半是 wordpress，另一半是自定义 php，我必须做出相当强大的更改，并且宁愿在开发版本上进行。

我最好在单独的服务器上创建一个沙箱（？）如果是这样，最好的方法是什么？或者只是使用同一台服务器创建一个文件夹？

# c++ - 断言值文字没有类型是假的？

> ID：14462832
> 
> 赞同：0
> 
> 时间：2013-01-22T16:05:05.850
> 
> 标签：c++, c++11, types, c-preprocessor, literals

我在主题、文章和 SO 答案中读到`#define`值没有类型，我已经围绕这个概念下定决心，认为类型是容器变量的属性，而不是值本身的属性：

```
const char cVALUE = 100;    // 'cVALUE' is char with value 100, wich type is '100'?
const short sVALUE = 100;   // 'sVALUE' is short with value 100, wich type is '100'?
const int iVALUE = 100;     // 'iVALUE' is int with value 100, wich type is '100'?
#define VALUE 100           // wich type is 'VALUE'? 
```

但是，[值后缀](http://en.cppreference.com/w/cpp/language/integer_literal)呢？

```
#define VALUE_L   100l   // 'VALUE_L' is long?
#define VALUE_UL  100ul  // 'VALUE_UL' is unsigned long?
#define VALUE_LL  100ll  // 'VALUE_LL' is long long?
#define VALUE_ULL 100ull // 'VALUE_ULL' is unsigned long long? 
```

在上面的代码中，类型似乎是附加到值的，所以所有这些原始值都是类型化的值，与我之前读到的相反。但还有更多！文本文字甚至有限定符，例如：

```
#define TEXT "Text" // '"Text"' is an array of some kind of chars. 
```

上面的文本值`#define`具有类型（字符类型，如果您正在使用 MSVC，我认为字符类型可能会改变[项目设置 -> 字符集](http://msdn.microsoft.com/en-us/library/8x480de8(v=vs.90).aspx)，不知道在其他 IDE 中是否可能）它也有`const`cualifier 并且它是 LValue 而不是 RValue，数字和文本文字之间的所有这些行为差异都让我感到不安。

所以，假设字符类型是`char`，文字的类型`"Text"`是`const char *`，`const char * const`还是`const char[5]`？或者至少，在根据上下文推断出正确的类型之前，它根本没有类型？

而且，在 C++11 标准中，文本文字也可以使用一些[前缀](http://en.cppreference.com/w/cpp/language/string_literal)来设置字符集：

```
#define TEXT   L"Text"  // wide string with char type wchar_t
#define TEXTu8 u8"Text" // UTF-8 string with char type char
#define TEXTu  u"Text"  // UTF-16 string with char type char16_t
#define TEXTU  U"Text"  // UTF-32 string with char type char32_t 
```

After thinking about all this stuff, I'm pretty confused, so I'm begging for some advice:

*   Why is common knowledge that the literal values (and `#define`s) have no type but a type can be specified with the literal? in other words: Assert that the value literals have no type is false?
*   A value literal **without suffix** and no decimals (like `100`), can always be considered of type int?
*   Which is the type and qualifiers of the text literals, even considering its prefixes?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:14:36.320

In C and C++ the preprocessor and the compiler are two separate entities.

The preprocessor that handles `#define`s and other preprocessor directives has no type system. It manipulates strings of characters. And whatever values these characters represent is left to the compiler itself.

Consider

```
#define Y x[ 
```

This is a legal preprocessor directive, even though the string `x[` has no meaning in C. Yet you could use it as

```
char Y 10]; 
```

to declare and array `x` of `char`.

In fact C preprocessor can be used on source files for languages other than C. For instance, it is often used for FORTRAN sources. Since FORTRAN does not have a standard preprocessor.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:20:09.640

First, your questions:

> Assert that the value literals have no type is false?

Yes.

> A value literal without suffix and no decimals (like 100), can always be considered of type int?

I think by default, you get type `int`.

> Wich is the type and cualifiers of the text literals, even considering its prefixes?

If I remember correctly the default type is `char []`.

Second, some context:

Value literals *have* a type - it's just that it is not explicitly specified and not all types can be specified that way.

By declaring a constant you can specify the type explicitly and give the compiler a lot more information.

Consider that:

```
#define VALUE1 102 
```

will tell you that your value is an int literal.

By declaring a const, you can say:

```
static const int VALUE1 = 102;
static const float VALUE1  = 102;
static const double VALUE1 = 102;
static const unsigned int VALUE1 = 102; 
```

The correct/better way to do the `define` (correct is a relative term for using `define` for constants) would be:

```
#define VALUE1 (int(102))
#define VALUE1 (float(102))
// etc ... 
```

At this point, you're better off adding constants.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T16:24:05.360

They are correct, in that the preprocessor does not have types. Your example of

```
#define VALUE_L   100l 
```

This does not mean that `VALUE_L` has type `long`. You can use the preprocessor to insert that text in the middle of a string literal- for example, [this](http://ideone.com/4L6b2x).

A macro does not have a type. The preprocessor can create tokens that the compiler may then interpret as having a type- but this is tangental and it does not have to do any such thing.

Also, `L""` literals are C++03 and `wchar_t`. A literal `""` has type `const char[1]`, and is an lvalue. The reason they are lvalues is because traditionally, they are pointed to with a `const char*`, and that pointer must point to an lvalue, else it would become invalid before being useful, and traditional C arrays cannot be rvalues.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T16:28:05.017

> Why is common knowledge that the literal values (and #defines) have no type but a type can be specified with the literal? in other words: Assert that the value literals have no type is false?

It's not. Literals all have types, as specified in section 2.14 of the C++11 standard. Preprocessor macros are replaced before literals are interpreted.

> A value literal without suffix and no decimals (like 100), can always be considered of type int?

No; a decimal literal is the first of `int`, `long int` or `long long int` that can represent the value. Octal or hex literals may also be unsigned if necessary. Before 2011, `long long` wasn't considered, since it wasn't a standard type.

So `100` will have type `int` since it is small enough to be representable by `int`.

> Which is the type and qualifiers of the text literals, even considering its prefixes?

With no prefix, it's an array of `const char`, large enough to hold all the characters and the zero terminator. So `"Text"` has type `char const[5]`.

With prefixes, the character type changes to the types you give in the question; the array size is still large enough for all characters including the terminator.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T18:15:37.107

`#define` is a directive to the preprocessor, which just does copy-and-paste style replacements. The preprocessor doesn't know or care anything about what the code means, and has no concept of types.

After preprocessing, the compiler deals with expressions, statements, types, and so on. Every expression (unless it is the name or address of an overloaded function) has a type which only depends on that expression, not the context of code.

(C++11's *braced-init-lists* do not have types, and are not technically expressions although they can appear in many of the same contexts.)

So `#define VALUE 100` has meaning to the preprocessor, but at that point the idea of type doesn't even apply. But almost any correct use of `VALUE` after that will use it as an expression, and those expressions will all have type `int`.

Yes, the number suffixes and string prefixes do affect the type of a literal expression. The type of `100` is `int`, but the type of `100UL` is `unsigned long`.

The literal `"Text"` always has type `const char [5]`, but the exact meaning and representation of `char` can depend on your compiler. In most contexts, that literal will instantly decay using the implicit array-to-pointer conversion, to the `const char*` type. (Also, for backward compatibility with ancient C code from before the invention of `const`, C++ allows initializing a `char*` variable from a string literal, but it's better to not let that happen.)

Similarly, the literal `L"Text"` has type `const wchar_t [5]`, and so on.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T16:07:21.473

A `#define` tells the precompiler to replace all instances with the definition, so the type is not explicit in the variable, but it can be determined by looking at the literal value it represents.

*   An integer literal is an `int` without any modifiers, or else can be made into a `long` etc. like 436234636L.
*   A string literal is a normal string unless appended with modifiers as in your question.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-22T16:18:08.807

When the preprocessor sees the text `#define VALUE 100`, it stores the string `VALUE` [or something like that], and the "replacement" as 100\. Whenever the preprocessor later finds `VALUE`, it replaces it with `100`. As such, `VALUE` has no type. The text `100` in C does have a type - it is an `int`, because that's what the rules of the languages say.

Bear in mind that preprocessor replacement happens before the proper compilation, so preprocesor replacement can do all manner of "weird" things that is hard (or sometimes impossible) to do without macros.

Again, the preprocessor simply replaced `TEXT` with `"Text"` and at that point it has no type. Types only exist in the proper compiler. So if you have:

```
#define TEXT "Text"

void myfun(int x)
{
   ... 
}

... 
myfun(TEXT); 
```

the preprocessor will produce

```
...
myfun("Text"); 
```

Only once you get to the proper compiling of the code will the compiler find that "Hmm, this is a text string, it's not an integer as expected", and give you some sort of error.

As to the "type" of `"Text"`, it does depend on the exact context. In most cases, the safe thing to do is treat it as `const char *`, but in some contexts, it can also be considered `char [5]`.

# python - 是否可以指定上一个目录python？

> ID：14462833
> 
> 赞同：10
> 
> 时间：2013-01-22T16:05:07.877
> 
> 标签：python, shell, directory

为了可扩展性和可维护性的目的，我正在尝试制作一个 Python 测试脚本模块自包含目录。

我做了一些研究，但无法找到我正在寻找的答案。基本上，我想确定 Python 中是否有一个函数可以执行类似于`cd -`shell 的操作。

我通常希望避免输入完整的路径名，并拥有相对于指定环境的所有路径。

示例：我有我的脚本所在的主目录`python-scripts`，我有每个测试环境`demo`的文件夹，以及每个测试环境的屏幕截图文件夹`demo-screenshots`。

如果我想使用 Python 将屏幕截图保存到屏幕截图中，在`demo`目录中工作时，我只需将其发送到以下目录：`demo-screenshots`，使用路径`'/demo-screenshots/example.png'`. 问题是我不明白如何移回目录。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T16:08:30.170

您要更改工作目录吗？python 中的[OS 模块](http://docs.python.org/2/library/os.html)有很多函数可以帮助解决这个问题。

```
import os
os.chdir( path ) 
```

`path`正在`".."`上一个目录。如果您需要在更改目录之前/之后检查您的位置，您可以发出以下`getcwd()`命令：

```
mycwd = os.getcwd()
os.chdir("..")
#do stuff in parent directory
os.chdir(mycwd)     # go back where you came from 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-27T12:01:51.567

```
path = os.path.dirname(__file__)
print(path) 
```

将打印文件的 CWD，例如 C:\Users\Test\Documents\CodeRevamp\Joke

```
path2 = os.path.dirname(path)
print(path2) 
```

将打印文件的父目录：C:\Users\Test\Documents\CodeRevamp

# php - 如何在 Doctrine 2 中对本机查询进行分页？

> ID：14462836
> 
> 赞同：2
> 
> 时间：2013-01-22T16:05:11.293
> 
> 标签：php, doctrine-orm, pagination, dql

Doctrine 2 具有 Doctrine\ORM\Tools\Pagination\Paginator 类，可用于对普通 DQL 查询进行分页。

但是，如果我将本机查询传递给它，则会收到此错误：

```
Catchable fatal error: Argument 1 passed to Doctrine\ORM\Tools\Pagination\Paginator::cloneQuery() must be an instance of Doctrine\ORM\Query, instance of Doctrine\ORM\NativeQuery given 
```

我尝试在 cloneQuery 方法中从分页器类中删除类型提示，但这只会产生更多错误，因为分页器类的其他位期望在 Query 中找到的方法不在 NativeQuery 中。

是否有任何简单的方法可以对本机查询进行分页，而无需构建新的分页器类或将数据库中的每一行都提取到数组中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T17:10:27.697

我制作了自己的与 Zend_Paginator 兼容的分页器适配器类。

可能不会是最灵活的，因为它依赖于在查询开始附近有一个“FROM”（参见 count() 方法），但它是一个相对快速和简单的修复。

```
/**
 * Paginate native doctrine 2 queries 
 */
class NativePaginator implements Zend_Paginator_Adapter_Interface
{
    /**
     * @var Doctrine\ORM\NativeQuery
     */
    protected $query;
    protected $count;

    /**
     * @param Doctrine\ORM\NativeQuery $query 
     */
    public function __construct($query)
    {
        $this->query = $query;
    }

    /**
     * Returns the total number of rows in the result set.
     *
     * @return integer
     */
    public function count()
    {
        if(!$this->count)
        {
            //change to a count query by changing the bit before the FROM
            $sql = explode(' FROM ', $this->query->getSql());
            $sql[0] = 'SELECT COUNT(*)';
            $sql = implode(' FROM ', $sql);

            $db = $this->query->getEntityManager()->getConnection();
            $this->count = (int) $db->fetchColumn($sql, $this->query->getParameters());
        }

        return $this->count;
    }

    /**
     * Returns an collection of items for a page.
     *
     * @param  integer $offset Page offset
     * @param  integer $itemCountPerPage Number of items per page
     * @return array
     */
    public function getItems($offset, $itemCountPerPage)
    {
        $cloneQuery = clone $this->query;
        $cloneQuery->setParameters($this->query->getParameters(), $this->query->getParameterTypes());

        foreach($this->query->getHints() as $name => $value)
        {
            $cloneQuery->setHint($name, $value);
        }

        //add on limit and offset
        $sql = $cloneQuery->getSQL();
        $sql .= " LIMIT $itemCountPerPage OFFSET $offset";
        $cloneQuery->setSQL($sql);

        return $cloneQuery->getResult();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-14T17:35:34.377

如果你有一个`dbal query builder`你已经构建的

```
$yourDbalQueryBuilder = $connection->createQueryBuilder(); 
```

那么你可以使用：

```
$yourDbalQueryBuilder->setFirstResult(0)
                     ->setMaxResults(100000000)
                     ->execute()
                     ->rowCount(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-09T22:23:04.203

```
public function countTotalRecords($query, string $primaryKey = '*'): int
    {
        if ($query instanceof QueryBuilder) {
            $paginator = new Paginator($query->getQuery());
            return count($paginator);
        } else if ($query instanceof NativeQuery) {
            $rsm = new ResultSetMappingBuilder($query->getEntityManager());
            $rsm->addScalarResult('count', 'count');

            $sqlCount = "select count(".$primaryKey.") as count from (" . $query->getSQL() . ") as item";

            $count = $query->getEntityManager()->createNativeQuery($sqlCount, $rsm);

            if ($query->getParameter('limit')) {
                $query->setParameter('limit', null);
            }

            $count->setParameters($query->getParameters());

            return (int)$count->getSingleScalarResult();
        }
        return 0;
    } 
```

# html - 我可以覆盖！重要吗？

> ID：14462840
> 
> 赞同：26
> 
> 时间：2013-01-22T16:05:22.660
> 
> 标签：html, css, stylesheet

我正在尝试在元素上设置此 CSS：

```
background: red !important; 
```

但是当我尝试这样做时：

```
 background: yellow; 
```

它仍然只显示红色而不是我希望的那个字段的黄色（我没有使用外部 CSS）。

我要问的是如何覆盖它，有可能吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-22T16:07:56.220

Ans is **YES** `!important`可以被覆盖，但你不能`!important`被普通声明覆盖。它必须比所有其他声明具有更高的特异性。

然而，它可以被更高的特异性`!important`声明覆盖。

Firefox 解析器中的这段代码将解释[它是如何工作](http://mxr.mozilla.org/mozilla2.0/source/layout/style/nsCSSDataBlock.cpp#576)的：

```
if (HasImportantBit(aPropID)) {
  // When parsing a declaration block, an !important declaration
  // is not overwritten by an ordinary declaration of the same
  // property later in the block.  However, CSSOM manipulations
  // come through here too, and in that case we do want to
  // overwrite the property.
  if (!aOverrideImportant) {
    aFromBlock.ClearLonghandProperty(aPropID);
    return PR_FALSE;
  }
  changed = PR_TRUE;
  ClearImportantBit(aPropID);
} 
```

**好读**

*   [CSS 特殊性的细节](http://css-tricks.com/specifics-on-css-specificity/)
*   [CSS 特异性：你应该知道的事情](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

* * *

这是一个展示如何覆盖 CSS 的示例

**HTML**

```
<div id="hola" class="hola"></div> 
```

**CSS**

```
div { height: 100px; width: 100px; }
div { background-color: green !important; }
.hola{    background-color:red !important; }
#hola{    background-color:pink !important;} 
```

输出将是

> ![在此处输入图像描述](../Images/b586fe85416c6a3e1fa768232b2e46fc.png)

我们也不能覆盖内联`!important`

**HTML**

```
<div id="demo" class="demo" style="background-color:yellow !important;"></div> 
```

**CSS**

```
div { height: 100px; width: 100px; }
div { background-color: green !important; }
.demo{    background-color:red !important; }
#demo{    background-color:pink !important;} 
```

输出是

> ![在此处输入图像描述](../Images/eb6382dd105d1ba20ccdfe51f897a405.png)

[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/tkfdQ/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-22T20:33:41.697

如[w3 规范](http://www.w3.org/TR/CSS21/cascade.html#important-rules)中所述，`!important`声明不会改变特殊性，而是优先于“正常”声明。实际上，此类声明仅在它们之间“竞争” - 因此，您可以用另一个`!important`更高特异性的声明覆盖您的声明：

```
/*
 these below are all higher-specificity selectors and, if both 
 rules are applicable to the same element, background colour
 will be set to "yellow":
 */
.some-class.some-other-class, div.some-class, #some-id {background: yellow !important;}
.some-class {background: red !important;} 
```

还需要考虑声明顺序——如果它们的选择器具有相同的特异性，则 CSS 中更靠后的声明将优先于之前的声明。

一个值得注意的情况是它与内联声明发生冲突。违反直觉（但完全符合规范），`!important`价值将排在首位！这意味着如果你有

```
<style>
  #secret-container {display:none !important;}
</style>
<script>
  $('#secret-container').show();//using jQuery etc.
</script>
<div id="secret-container">...</div> 
```

有问题的 div 将保持隐藏状态！让内联规则优先于内联规则的唯一方法`!important`是，也适用`!important`于它。我会让你来评判这种做法有多好ಠ_ಠ</p>

虽然[没有压倒一切的内联`!important`](https://stackoverflow.com/a/11151859/1081234)。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-22T16:08:23.563

`!important`将覆盖`background: yellow;`尽量避免使用`!important`. 看看 css 的特殊性。[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

# ios - IOS6中的强制横向视图

> ID：14462841
> 
> 赞同：2
> 
> 时间：2013-01-22T16:05:22.923
> 
> 标签：ios, uiviewcontroller, ios6, uinavigationcontroller, landscape

我知道有很多关于如何在 IOS6 中强制定向的线程，但它们似乎都不适合我，所以现在我需要一些帮助来解决这个问题。

我有一个基于导航的应用程序，它有许多视图控制器。所有这些都是纵向视图，除了必须以横向模式加载（无需用户先转动手机）。

在我的导航控制器的实现中，我添加了 shouldAutorotate、supportedInterfaceOrientations 和 preferredInterfaceOriantationForPresentation。

```
@implementation UINavigationController (Rotation_IOS6)

- (BOOL)shouldAutorotate
{
    return [self.topViewController shouldAutorotate];
}

- (NSUInteger)supportedInterfaceOrientations
{
    return [self.topViewController supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [self.topViewController preferredInterfaceOrientationForPresentation];
}

@end 
```

所以它返回在每个视图控制器中定义的值。

在应用程序委托中，我有supportedInterfaceOrientationsForWindow。

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{

//Default orientations value
NSUInteger orientations = UIInterfaceOrientationMaskAllButUpsideDown;

//Get orientation from the last view controller
if(self.window.rootViewController){
    UIViewController *presentedViewController = [[(UINavigationController *)self.window.rootViewController viewControllers] lastObject];
    orientations = [presentedViewController supportedInterfaceOrientations];
}

return orientations;
} 
```

然后，在每个视图控制器中，我都有该视图的设置，例如：

```
// Only allow portrait view
-(NSInteger)supportedInterfaceOrientations{    
    return UIInterfaceOrientationMaskPortrait;
}

- (BOOL)shouldAutorotate {
    return YES;
} 
```

我像这样推送下一个视图控制器：

```
NextViewController *nxtController = [[NextViewController alloc] initWithNibName:@"NextViewController" bundle:nil];
[self.navigationController pushViewController:nxtController animated:YES]; 
```

但是当我推动横向视图控制器时，在纵向握住手机的同时，它也会以纵向模式加载。如果我然后倾斜手机，它会触发自动旋转功能并将视图旋转到横向模式，然后将其锁定在该模式下。但是，我需要将其锁定为横向模式，而不使用手机方向来触发它来检查自动旋转。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:18:01.377

转到项目设置并删除您不想要的模式上的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:11:51.990

您可以尝试使用始终返回横向的 shouldaAutorotateToInterfaceOrientation 来强制 viewController 以横向显示，例如：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight));
} 
```

# playframework - 当我执行“调试运行”命令时，如何更改 Play 使用的默认端口 (9000)？

> ID：14462854
> 
> 赞同：3
> 
> 时间：2013-01-22T16:06:00.990
> 
> 标签：playframework, playframework-2.0

我通常启动我的 Play 2.0 应用程序以`play "~run 8991"`在端口 8991 而不是默认端口 9000 上运行我的应用程序，如[其他 Stack Overflow 问题中所述。](https://stackoverflow.com/questions/8205067/how-do-i-change-the-default-port-9000-that-play-uses-when-i-execute-the-run)

*但是，当我想调试*我的应用程序时，如何更改默认端口？ `play "debug run 8991"`* 仍然使用端口 9000；将`8991`被忽略。

（请注意关闭选民，这不是链接问题的欺骗。那个问题没有说明调试。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T17:09:03.207

要使用 port 上的 http 侦听器在调试模式下`8991`运行，请运行：

```
play debug "run 8991" 
```

# fatwire - Fatwire CSElement vs. 模板

> ID：14462855
> 
> 赞同：0
> 
> 时间：2013-01-22T16:06:03.410
> 
> 标签：fatwire

在 Fatwire 中，有两种包含代码的资产类型：CSElement 和 Template。根据我的发现，模板是 CSElement 和 SiteEntry 的组合。目前，我使用模板作为一组 CSElement 的包装器，但我不完全确定这是构建我的网站的最佳方式。

关于模板或 CSElement 何时优于另一个>，是否有任何经验法则？还是真的不重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:37:23.903

转换是在模板中使用最少的逻辑部分，所有的cs元素都应该从模板中调用。逻辑应该在 CSElements 中编码。

例如，如果使用一个模板呈现页面。导航部分将使用一个 CSElement 完成，标题逻辑将在一个模板中，加载正文的逻辑将在另一个 CSElement 中。所有这些 CSelements 都将从模板中调用。简而言之，所有这些 pagelet 都是使用 CSElemtents 呈现的。但它是从模板中调用的。

模板中唯一的优点是您可以将模板与任何资产相关联。在所有其他情况下，使用 CSElements。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T22:12:37.383

设计页面时强烈推荐模块化策略。模板可以是有类型的或无类型的。使用有类型的模板，您可以编写每个资产类型/子类型的呈现逻辑，从而在资产类型边界内包含数据和表示逻辑。以这种方式进行编码具有多种好处，如下所示

1.  帮助您设计缓存模型。您可以将模板缓存为具有不同缓存到期设置的 pagelet。
2.  规定资产如何相互连接，以便修改资产数据或逻辑包含在 pagelet 中。
3.  可以使用模板选择器在资产级别交换模板以生成不同布局的组合。

无类型模板并不总是首选，因为它没有明确定义它试图渲染的资产或它依赖的资产集。因此，通过无类型模板呈现的页面可能不会在缓存中存活更长的时间。

另一方面，CSElement 用于编写通用业务逻辑并跨模板重用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T07:22:55.747

根据 Fatwire 开发人员指南，模板是一个包含页面，它列出了小页面在完成页面上的显示方式，并包含每次查看页面时必须评估的任何代码。pagelet 是一个或多个 CSElement 的生成输出。

您应该使用模块化策略设计您的页面。一个网页由一个容器（模板）和一组 pagelet 组成。这种方法简化了缓存策略，并允许您重用常见元素，如菜单、面包屑或导航栏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-12T06:50:56.960

从fatwire的角度来看@高水平。

模板：模板是用于渲染您创建的 FLEX 或 BASIC 资产的资产的占位符，但即使您创建了站点条目，cs 元素也不用于渲染您的资产。

CS 元素：CS 元素对于做一些业务逻辑很有用。业务逻辑有多种形式。

CS 元素可用于构建页面中常见的可重用组件，例如页眉、页脚，这在模板中被调用。

在自定义 fatwire Advance UI 中。假设您可以通过编写一个cs元素并创建一个站点条目来构建自己的树选项卡，并且这个树选项卡是一个自定义部分，当它被加载时，站点条目将被调用。（这很复杂，但这是基于业务需求而这种情况我们使用cs元素）

所以模板用于渲染资产，cs 元素用于执行一些业务逻辑。

模板是可缓存的，但在 cs 元素中没有，但如果您仍想使其可缓存，我们可以将站点条目添加到 cs 元素

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-27T04:02:14.337

模板可以在资产上选择，并且还与 InSite 编辑和 Timebox 预览紧密集成。CSElement 不是。这两个是为不同的目的而创建的，无法进行比较。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-31T04:17:38.343

我假设您熟悉元素目录和站点目录条目的概念。

CSElement 是包装元素目录条目的资产。一个元素只能在内部调用，这就是为什么它是编写业务逻辑的最佳位置。通常缓存与此类逻辑无关。

SiteEntry 是包装站点目录条目的资产。站点目录条目将“pagename”参数关联为具有根元素的任何标准 ContentServer URL。这是元素可以*暴露*在外部的方式。

模板是包装元素目录条目和多个站点目录条目的资产。模板是一种在不同站点上下文中的元素中提供呈现逻辑的方法（由站点目录条目提供）。模板还允许缓存。

如上所述，模板可能是创建*“视图”*的最佳候选者，而元素可能是*“模型”*和其他可重用模块的最佳候选者。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-08T15:12:43.220

我想再补充几点。

1.  从Template调用CSElement，CSElement根据调用模板缓存。因此，如果您希望 CSElement 的缓存与调用模板不同，我们需要为该 CSElement 提供 SiteEntry，您可以定义其缓存。

2.  如指南中所述，模板用于渲染资产，SiteEntry+CSElement 可用于任何事情。例如：假设您要创建一个实用程序来搜索 CSElement 中特定类型的资产，并且输出为 JSON 对象。我们可以使用我们想要的任何名称为该 CSElement 创建 SiteEntry 资产，并通过诸如[http://www.example.com/cs/ContentServer?pagename=SiteEntryName](http://www.example.com/cs/ContentServer?pagename=SiteEntryName)之类的 URL 调用该站点条目资产，或者可以通过 ajax 调用在 JS 文件中调用 where URL 将是 /cs/ContentServer?pagename=SiteEntryName。我们甚至可以在 URL 本身中传递参数并在 CSElement 中处理它们。在制作 SiteEntry 时，如果您想通过 URL 调用，请选择 Wrapper 为 True。模板不能通过 URL 调用，它们需要资产。

我希望这有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-01T18:32:25.540

**CSElement**
CSElement 资产用于编写一些可重用的代码。它由模板呈现。CSElement 资产是一个元素，没有站点条目。

它们没有缓存标准。我们需要使用 SiteEntry 来缓存 CSElement 的输出。

创建 CSElement 时，将在 CSElement 数据库表中创建一个条目作为一行。

render:callelement 标签用于调用 CSElement 资产。

**站点条目**
站点条目资产是页面名称。当您的代码直接通过元素名称调用元素而不通过页面名称时，被调用页面的输出将作为该页面的一部分进行缓存。如果要缓存 CSElement 的输出并维护其自己的缓存条件，您的代码应通过特定页面名称调用 CSElement。为此，您需要创建一个 SiteEntry 并将其映射到 CSElement。

创建 SiteEntry 时，将在 SiteEntry 数据库表中创建一个条目作为一行。

**模板**
  模板资产既是元素又是呈现资产的页面或小页面。这意味着创建以保持网站的一致外观。模板可以是完整的页面或页面的一部分。所以这样我们可以创建任意数量的模板。

这些都是可以的。它们为它们设置了缓存标准，以确定它们是否被缓存以及缓存多长时间？我们使用 render:calltemplate 标签来调用模板资源。

创建模板时，将在模板数据库表中创建一个条目作为一行。

巴拉特
[http://devble.com/what-are-cselement-siteentry-and-template-assets](http://devble.com/what-are-cselement-siteentry-and-template-assets)

# ruby-on-rails-3.2 - @import 'bootstrap' 引发一个动作控制器：异常

> ID：14462856
> 
> 赞同：0
> 
> 时间：2013-01-22T16:06:05.227
> 
> 标签：ruby-on-rails-3.2, bootstrap-sass

我正在使用分区磁盘在 Windows 8（Rails 3.2.11 和 Ruby 1.9.3p125）上开发 Rails 应用程序。

我的 Rails 安装在驱动器“S”上，我的应用程序在驱动器“J”上。

在我的 gem 文件中，我有“gem 'bootstrap-sass'”。按照建议，我在 bootstrap-and-overrides.css.scss 文件中使用“@import 'bootstrap'”。

这会引发错误：

```
Showing J:/Users/Anne-Sophie/Documents/2.web/novaxones/app/views/layouts/application.html.erb where line #5 raised:

different prefix: "S:/" and "J:/Users/Anne-Sophie/Documents/2.web/novaxones/app/assets/stylesheets"
  (in J:/Users/Anne-Sophie/Documents/2.web/novaxones/app/assets/stylesheets/bootstrap-and-overrides.css.scss) 
```

如果我从我的 css.scss 文件中删除“@import 'bootstrap'”，错误就会消失......我该如何解决这个问题才能使用 bootstrap？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:39:01.560

我在 github (https://github.com/thomas-mcdonald/bootstrap-sass/issues/96) 上找到了一个解决方法。

不理想但有效！

# php - 使用mysql将变量从javascript按钮发布到php

> ID：14462862
> 
> 赞同：0
> 
> 时间：2013-01-22T16:06:31.477
> 
> 标签：php, javascript, mysql, google-maps

我对 PHP 和 Javascript 很陌生。我正在尝试从谷歌地图 API 标记中获取变量，并可以选择从 MySQL 数据库中删除标记及其信息。没有生成错误，但是没有删除该行。我想问题出在POST上。以下是我与此问题相关的代码：

```
var html = "<b>" + name + "</b> <br/>" + location + "<br/> <br/> <input type='button' value='Get Directions from your Current Position' onclick=getDirections()/> <br> <input type='button' name = 'remove' value='Remove Pointer' onclick=removePointer("+name+")/>"; 
```

那是我调用 removePointer 函数的行，将“名称”作为参数传递

```
function removePointer(name){
    var nameSend = name;
    $.post("index.php", {variableName: nameSend});
    <?php
        $mysql_host = "xxxx";
        $mysql_database = "xxxx";
        $mysql_user = "xxxx";
        $mysql_password = "xxxx";

        $link = mysql_connect($mysql_host, $mysql_user, $mysql_password);
        if (!$link) {
            die('Could not connect: ' . mysql_error());
        }

        mysql_select_db($mysql_database) or die(mysql_error());

        $removeName = $_POST['variableName'];
        mysql_query(("DELETE FROM markers WHERE Name='" . $removeName . "'"),$link) or die ("Markers Table Error: " . mysql_error());
    ?>
} 
```

那是 removePointer 函数，它应该在其中获取 javascript 变量、发布它，以及一个 PHP 块来获取发布并相应地删除 MySQL 行。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:17:33.010

在您的情况下，Javascript 将在用户的浏览器中运行，而 PHP 将在服务器上运行（需要能够与数据库服务器通信）。也就是说，您不能将 PHP 嵌入到 Javascript 函数中并期望 PHP 运行 - Web 浏览器不执行 PHP。此外，您永远不想将任何敏感信息放入将在浏览器中运行的 Javascript（例如 MySQL 凭据），因为任何加载该 Javascript 的人都可以看到它。

您将需要创建一个 Javascript 将与之通信的服务器端 PHP 脚本。Javascript 可以向 PHP 脚本发出[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)请求，发布您希望 PHP 对其执行操作的数据。在这种情况下，removePointer() 函数可以将标记名称发布到 PHP 脚本，然后将其从数据库中删除。

为了让生活更轻松，您可以考虑使用[jQuery](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http%3A%2F%2Fjquery.com%2F&ei=Urv-UKDlB4HB8QHszoH4BA&usg=AFQjCNFA7CZ5sWRDhHPuipmhL7zVksjC2A&bvm=bv.41248874,d.b2U)等 Javascript 库，它可以极大地简化[Ajax 请求](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:17:48.253

您不能只发布到您的 index.php 页面。创建一个新的“del.php”，将您的 php 代码放在那里，然后发布到该页面：

索引.php

```
function removePointer(name){
  var nameSend = name;
  $.post("del.php", {variableName: nameSend}); 
} 
```

删除文件

```
<?php
    $mysql_host = "xxxx";
    $mysql_database = "xxxx";
    $mysql_user = "xxxx";
    $mysql_password = "xxxx";

    $link = mysql_connect($mysql_host, $mysql_user, $mysql_password);
    if (!$link) {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db($mysql_database) or die(mysql_error());

    $removeName = $_POST['variableName'];
    mysql_query(("DELETE FROM markers WHERE Name='" . $removeName . "'"),$link) or die ("Markers Table Error: " . mysql_error());
?> 
```

当然，我不是 php 专家，这肯定不是进行 ajax 请求的最佳方式，但我希望你能更好地了解 ajax 的概念......

# php - 一次查询多选

> ID：14462863
> 
> 赞同：0
> 
> 时间：2013-01-22T16:06:35.637
> 
> 标签：php, mysql, mysqli

我想在 mysql 中进行多项选择，但没有任何乐趣。我在这里和网络上尝试过以下示例，但它们并不适合我正在尝试做的事情。

我的select语句如下

```
SELECT a.* FROM Calendar a 
WHERE a.CalendarId = 256 AND a.Private = 0
UNION
SELECT b.* FROM Calendar b
WHERE b.CalendarId = 256 AND b.Private = 1 AND b.PrivateId = 11 
```

为了解释上面我想要什么，我想返回私有值为 0 的所有日历行。

我还想通过仅选择`Private = 1`具有`PrivateId = 11`（在本例中）的那些来过滤它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:08:35.667

尝试 ：

```
SELECT *
FROM Calendar
WHERE CalendarId = 256
    AND (Private = 0 OR (Private = 1 AND PrivateId = 11)) 
```

# git - 如何删除从 Git 中的源代码派生的二进制文件，但仍部署到远程存储库？

> ID：14462864
> 
> 赞同：0
> 
> 时间：2013-01-22T16:06:35.730
> 
> 标签：git, version-control

目前在我工作的地方，我们有以下设置（用于 ASP.NET Web 开发），使用 Git 进行版本控制（我们相对较新）：

“开发”服务器是运行 IIS 的远程服务器，可在我们的内部网络上访问。这是我们部署稳定的开发网站构建的地方，因此它们在我们公司内都是可见的。在这台服务器上，我们为每个项目（通常是一个网站）创建一个 Git 存储库。

然后，开发人员会将这个存储库拉到他们的本地机器上并在本地处理它，在本地提交任何更改，然后最终将这些更改推送到远程存储库（开发服务器），并在其中将它们合并到主分支中。

我们遇到的问题是，当源代码内置到程序集 (DLL) 中时，它们会被添加到本地 Git 存储库中，将其与不应该存在的二进制文件混在一起（因为它们可以从源代码派生）。但是，如果我们不包含 DLL（即，将它们放在 .gitignore 中），那么当我们将更改推送到远程存储库时，/bin 文件夹中的 DLL 将丢失，并且该站点将无法工作。解决此问题的唯一方法是在推送更改后在开发服务器上重建站点。

有没有办法解决？理想情况下，我们需要一种方法来忽略本地存储库中的 DLL，但仍将它们“推送”到远程服务器？或者在推送更改时以某种方式触发远程服务器上的构建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:15:56.270

听起来您需要研究“持续集成”。您可以将构建服务器设置为每次有人提交时运行干净的构建，或者您可以配置一天中的某些时间。如果构建成功（例如部署到测试服务器），您还可以触发脚本运行。另外，您可以让它运行单元测试并向团队发送电子邮件，其中包含任何错误等。

我不知道构建如何在 .net 中工作，但我最喜欢的 CI 服务器是 jenkins。 [http://jenkins-ci.org/](http://jenkins-ci.org/)

还有其他的，例如巡航控制 [http://cruisecontrol.sourceforge.net/](http://cruisecontrol.sourceforge.net/)

两者都是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:05:16.680

你可以选择有两个并行的分支：一个只有“干净”的提交，每次你做出一个要推送到生产机器的提交时，你切换到“二进制”分支，（重新）合并“干净”分支到其中，构建，添加生成的二进制文件，提交和推送。

另一种需要考虑的方法可能是停止使用 Git 进行部署并使用专门的工具，例如`rsync`将二进制文件推送到生产环境。

# javascript - 我如何知道用户或单个 IP 地址在我的网站页面上花费了多长时间？

> ID：14462866
> 
> 赞同：3
> 
> 时间：2013-01-22T16:06:41.337
> 
> 标签：javascript, php, time, dom-events

我如何知道用户或单个[IP 地址](http://en.wikipedia.org/wiki/IP_address)在我的网站页面上花费了多长时间？我可以使用[JavaScript](http://en.wikipedia.org/wiki/JavaScript)的任何事件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:08:05.507

这就是[谷歌分析](http://www.google.com/analytics/)的目的。它会跟踪您网站的访问者并向您报告统计信息，例如访问时长。他们甚至[提供了一个 API](https://developers.google.com/analytics/)来帮助您获取这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:17:24.070

我将安装一个[Redis来跟踪由](http://en.wikipedia.org/wiki/Redis_%28data_store%29)[IP 地址](http://en.wikipedia.org/wiki/IP_address)、用户代理和登录信息（如果有的话）组合创建的特定哈希。

使用时间戳（使用哈希或任何你喜欢的）将内容保存在 Redis 中，然后在用户注销或离开站点以获取外部链接或卸载页面时添加“告别”时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:49:43.263

使用 Ajax 将 keep-alive 信息发送到您的后端。将其保存为数据库中的会话数据。

会话数据可以保存用户正在观看的当前页面并且上次处于活动状态。例如，使用`setInterval`每 x 秒（取决于分辨率需要）发送保持活动信息。

不需要[cron](http://en.wikipedia.org/wiki/Cron) ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:08:43.277

**在您的应用程序中实现**

*   当用户加载页面时，他们的“最后页面加载时间”会在数据库中更新。
*   cron 脚本每分钟运行一次。它查找“最后一页加载时间”在最后一分钟的用户。
*   为找到的每个用户增加“在站点上花费的时间”。

通过这种方式，我可以精确到分钟跟踪用户。只需除以 60 即可获得小时数。

**别的**

[谷歌分析](http://www.google.com/analytics/)。[你可以在这里](http://www.google.com/analytics/features/index.html)查看它的功能。

# apache - 如何将python连接到wamp服务器

> ID：14462867
> 
> 赞同：1
> 
> 时间：2013-01-22T16:06:46.280
> 
> 标签：apache, python-3.x, wampserver

我正在尝试学习 web python 编程，因此我尝试使用本[教程](http://martinprzybyla.com/2011/02/01/how-to-get-python-working-with-apache-and-wampserver-win-7/)中给出的过程在 wamp 服务器中安装 python 。我已经完成了教程中提到的步骤。但是当我尝试运行 python 脚本时，它在 Firefox 中显示了这个错误

```
 Unable to connect

      Firefox can't establish a connection to the server at localhost. 
```

我发现在 apache/httpd.conf 中添加这两个脚本会影响整个 wamp 服务器

```
1)LoadModule wsgi_module modules/mod_wsgi.so

and

2) <Directory “C:/wamp/www/python”&gt;
   Options ExecCGI
    AddHandler wsgi-script .py
    Order allow,deny
    Allow from all
    </Directory> 
```

当我在所有组合（1,2 和两者）中启用上述代码并重新启动时；服务器显示脱机（黄色“W”符号）但是当我删除或禁用（使用#）两个脚本时，它显示绿色“W”符号 wamp它正在工作。

任何人都知道为什么它会显示此错误以及我如何在 wamp 中运行 python 文件？

我的系统配置

```
windows 7 32 bit
python 3.2
[mod_wsgi][2] for python 3.1
WampServer Version 2.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:03:59.777

看起来你在这里有几个问题，因为 WAMP 不会在启用 wsgi_module 的情况下启动。让我们从第二个问题开始，它是[这个问题](https://serverfault.com/questions/332570/wamp-server-not-working-when-i-add-a-directory-directive)的副本。基本上，您所遵循的教程似乎有错字和一些不好的引号。将您的虚拟主机配置更改为：

```
<Directory "C:/wamp/www/python">
   Options ExecCGI
    AddHandler wsgi-script.py
    Order allow,deny
    Allow from all
</Directory> 
```

（注意您的目录名称周围的直引号和我从 AddHandler 行中删除的空格）

一旦你解决了这个问题，当你加入这`LoadModule wsgi_module modules/mod_wsgi.so`条线时，你的 WAMP 是否仍然保持黄色？

# arrays - 用整数 1 或 2 填充固定大小的数组以求和 X

> ID：14462870
> 
> 赞同：0
> 
> 时间：2013-01-22T16:07:03.537
> 
> 标签：arrays, algorithm, sum

假设我有一个固定大小的数组。我想用 1s 或 2s 填充数组，以便所有元素总和为 X。

例子：

*   所需总和 = 12
*   数组大小 = 7

可能的组合：

```
array( 1, 2, 2, 2, 1, 2, 2 ) // sums to 12

array( 1, 1, 2, 2, 2, 2, 2 ) // sums to 12 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T16:08:56.923

*   找出数组中 2 的个数，这个数是：

    ```
    #2's = X - array_size 
    ```

*   选择~~随机~~的任意`#2's`元素（例如第一个元素），并赋予它们值 2，其余元素将获得值 1。

**注意：**很容易看出问题是否`X < array_size`或`X> 2*array_size`没有解决方案（显然上面的算法会失败）

# android - Android 库：MVC 代理与服务

> ID：14462873
> 
> 赞同：1
> 
> 时间：2013-01-22T16:07:12.053
> 
> 标签：android, service, proxy

我正在制作一个 android 库项目来使用我们的 API。遵循 MVC 规则，我创建了一些代理来集中某些任务的使用。例如，我有一个 LoginProxy，它处理所有涉及登录的请求、数据……。要达到这个目的，您必须调用 LoginProxy.getInstance().methodname。当你想登录时，你必须调用代理上的登录方法，它执行一个AsyncTask，执行一个对服务器的webservice调用。当调用的答案返回到 LoginProxy 时，LoginProxy 必须调度一个事件，通知组件（活动）有关更改。此刻，我已经做出了自己的事件调度机制。使用此 LoginProxy 的活动必须将 EventListener 添加到 LoginProxy 的事件中，以便收到有关更改的通知。我添加了我的 LoginProxy 代码。

```
public class LoginProxy extends EventDispatcher implements LoginUserListener {

    private boolean loggedIn;
    private boolean loggingIn;
    private String userName;
    private UserConfiguration userConfiguration;
    private Credentials credentials; 

    private LoginProxy(){}

    /**
     * Gets a singleton instance of this class
     */
    private static LoginProxy _instance;
    public static LoginProxy getInstance(){
        if(_instance == null) {
            _instance = new LoginProxy();
        }
        return _instance;
    }

    public boolean isLoggedIn() {
        return loggedIn;
    }
    private void setLoggedIn(boolean loggedIn) {
        this.loggedIn = loggedIn;
        dispatchEvent(new GeneralEvent(GeneralEventType.LOGGED_IN_CHANGED));
    }

    public boolean isLoggingIn() {
        return loggingIn;
    }
    private void setLoggingIn(boolean loggingIn) {
        this.loggingIn = loggingIn;
        dispatchEvent(new GeneralEvent(GeneralEventType.LOGGING_IN_CHANGED));
    }

    public String getUserName() {
        return userName;
    }
    private void setUserName(String userName) {
        this.userName = userName;
    }

    public UserConfiguration getUserConfiguration() {
        return userConfiguration;
    }
    private void setUserConfiguration(UserConfiguration userConfiguration) {
        this.userConfiguration = userConfiguration;
    }

    public Credentials getCredentials() {
        return credentials;
    }
    private void setCredentials(Credentials credentials) {
        this.credentials = credentials;
    }

    public void login(String userName, String userPassword, String applicationId, String applicationPassword, String clientVersion){
        setLoggingIn(true);
        LoginUserLauncher launcher = new LoginUserLauncher(this);
        launcher.loginUser(userName, userPassword, applicationId, applicationPassword, clientVersion);
        setUserName(userName);
    }

    public void logout(){
        setUserName(null);
        setUserConfiguration(null);
        setCredentials(null);
        setLoggedIn(false);
    }

    @Override
    public void onLoginUserDone(LoginUserLauncher sender, StatusCode responseStatusCode, UserConfiguration userConfiguration, String sessionCode) {
        setLoggingIn(false);

        if(responseStatusCode == StatusCode.OK){
            setLoggedIn(true);
            setUserConfiguration(userConfiguration);
            Credentials c = new Credentials(userConfiguration.getUserID(), userConfiguration.getUserPassword(), sender.getApplicationId(), sender.getApplicationPassword(), sessionCode);
            setCredentials(c);

            dispatchEvent(new LoginEvent(LoginEventType.LOGIN_SUCCESS, responseStatusCode, this.userConfiguration));
        }else{
            setUserName(null);
            setUserConfiguration(null);
            setCredentials(null);
            setLoggedIn(false);

            dispatchEvent(new LoginEvent(LoginEventType.LOGIN_FAILED, responseStatusCode, this.userConfiguration));
        }
    }
} 
```

我相信这很好用，但现在我意识到也许也可以将 Android 服务用于这些代理。然后我可以发送广播而不是自制事件。我现在的问题是：可以为这些代理使用服务吗？如果是这样，我想我必须制作一个用于绑定的aidl接口？

谁能帮我解决这个问题？谢谢

# css - css文件崩溃VS2010

> ID：14462874
> 
> 赞同：0
> 
> 时间：2013-01-22T16:07:16.843
> 
> 标签：css, visual-studio-2010, crash

我正在使用 MS2010 和 MVC3 处理另一个人的新项目。一切都很好，但是 css 文件。一旦我想从解决方案资源管理器中打开它，MS2010 就会崩溃。所有其他css文件都可以。重新启动VS没有帮助。试了几次，结果一样。Ctrl+Break 几次，其他巫毒都没有帮助。同样的崩溃发生在另一台机器上。

什么原因？我相信 VS2010 崩溃是因为该文件中可能存在 CSS 代码，这可能会使 VS2010 解析机制崩溃。该文件的值约为 100kb，看起来很奇怪。任何想法如何解决这个问题？当然，我不会更改 css 文件是可能的（样式来自另一个人），并且不喜欢将 css 文件拆分和拆分并拆分为部分以检查哪些部分导致 VS 崩溃。任何关于可能解决方案的想法都受到高度赞赏。

# c# - ASP.NET MVC 路由 - 一个取消另一个

> ID：14462879
> 
> 赞同：0
> 
> 时间：2013-01-22T16:07:27.610
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我的 MVC 路由有问题，它通常工作得很好，但由于某种原因，中间的语句工作正常，但最后一条路由不起作用。如果我将第三条路线放在中间，它将正常工作。我不知道为什么这两条路线相互干扰。

以下是路线：

```
routes.MapRoute(
           "VoucherPreviewNdddewUser", // Route name
           "{Home}/{VoucherBusinessUserEntry}/{ID}/{TokenID}", // URL with parameters
           new { controller = "Home", action = "VoucherBusinessUserEntry", id = 0, TokenID = Guid.NewGuid() } // Parameter defaults
           );

                routes.MapRoute(
                "Regdfsdfsdf", // Route name
                "{LoginReg}/{Register}/{UserTrackingID}/{IsFromScript}", // URL with parameters
                new { controller = "LoginReg", action = "Register", UserTrackingID = System.Guid.Empty
                    ,isfromscript = System.Boolean.FalseString 
                } // Parameter defaults
            ); 
```

以下是网址：

```
http://localhost:50839/home/VoucherBusinessUserEntry/44/7209FA62-FD5F-40AE-8239-7CF1855675E8

http://localhost:50839/LoginReg/Register/7209FA62-FD5F-40AE-8239-7CF1855675E8/true 
```

有谁知道可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:11:42.303

当你把东西放在 {} 之间时，它就会变成一个变量。所以你的路线应该看起来像这样：

```
routes.MapRoute(
       "VoucherPreviewNdddewUser", // Route name
       "Home/VoucherBusinessUserEntry/{ID}/{TokenID}", // URL with parameters
       new { controller = "Home", action = "VoucherBusinessUserEntry", id = 0, TokenID = Guid.NewGuid() } // Parameter defaults
       );

routes.MapRoute(
            "Regdfsdfsdf", // Route name
            "LoginReg/Register/{UserTrackingID}/{IsFromScript}", // URL with parameters
            new { controller = "LoginReg", action = "Register", UserTrackingID = System.Guid.Empty
                ,isfromscript = System.Boolean.FalseString 
            } // Parameter defaults 
```

您仍然需要定义您想要的控制器和操作，但这些变量不再存在于 URL 中，因为它们是常量并且没有争议。如果您希望它们是可变的，那么您需要在 URL 中使用 {controller} 和 {action}，例如，`LoginReg`在第二个路由中使用默认值。

# asp.net - ASP.NET HttpRuntime.Cache 自动删除是如何工作的？

> ID：14462881
> 
> 赞同：0
> 
> 时间：2013-01-22T16:07:34.063
> 
> 标签：asp.net, caching

设想：

我有一个 HttpRuntime.Cache \ System.Web.Caching.Cache 充满了对象。

所有对象都具有相同的过期时间和相同的优先级。如果系统达到 99% 的内存使用限制，则自动缓存项目删除开始。（对吗？可配置？）在我的场景中如何清理缓存？a）是否会因为相同的到期/优先级而删除所有项目，还是会 b）删除一些随机项目？

问候罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:00:30.613

假设所有项目具有相同的优先级和过期时间，ASP.NET 缓存使用最近最少使用算法来确定要从缓存中逐出哪些项目。

[来源](http://msdn.microsoft.com/en-us/library/ms998549.aspx#scalenetchapt06_topic14)

# java - 为arraylist中的每个项目赋值

> ID：14462885
> 
> 赞同：0
> 
> 时间：2013-01-22T16:07:40.013
> 
> 标签：java, mysql

我有一个数组列表，其中包含代表一个人的整数。我想为每第四个人分配一个表号，但该数组列表中有超过 4 个人，所以我想

*   将接下来的 4 人分配到不同的桌子，然后
*   4 人之后换了一张新桌子

我怎样才能做到这一点？

这是我迄今为止尝试过的：

```
 try {
        String[] toernooi = toernooien2.getSelectedItem().toString().split(" ");

        PreparedStatement stat = con.prepareStatement("SELECT speler FROM fullhouse.inschrijving_toernooi WHERE IT_betaaldatum is not null AND toernooi = ?;");
        stat.setString(1, toernooi[0]);
        ResultSet resultaat = stat.executeQuery();
        ArrayList<Integer> array = new ArrayList<>();

        PreparedStatement stat2 = con.prepareStatement("INSERT INTO fullhouse.indeling (person,tablenumber,ronde) VALUES (?,?,?)");

        for (int i = 1; resultaat.next(); i++) {
            stat2.setInt(1, resultaat.getInt(1));
            array.add(resultaat.getInt(1));
            stat2.execute();

            for (Integer arrayitem : array) 
            {

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:55:35.353

您可以使用整数除法来避免担心其他变量或重置。我已经用普通循环替换了迭代器，因为如果我们有一个计数器来计算列表，那么使用循环变量似乎更优雅：

```
private List<Integer> assign (List<Integer> guestList) {

    int size = guestList.size();

    for (int i = 0; i < size; i++) {

        guestList.add(i, i/4);

    }
        return guestList;
} 
```

假设：

*   .size() 方法获取客人数量
*   第一个表号应该为零
*   输入 List 的大小不会超出整数除法范围

这是我的第一个答案-感谢评论:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:10:59.613

有一个计数器并在迭代时检查计数器，并在第 4 次迭代时将计数器恢复为 1 并分配给一个新表。

```
int counter=1;
for(Person p: list){
if(counter==4) {
//assing to a different table
counter=1;
continue;
}
//assign to an normal table
counter++;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:10:23.747

您应该在 for 循环中保留某种计数器。当该计数器达到 4 时，您应该重置它并相应地更改正在发生的事情。冲洗并重复。我留给你一些更精细的实现细节，因为很难准确地说出你是如何做和管理一些事情的。

```
int counter = 0;
for (Integer arrayitem : array) 
    {
            counter++;
            assign to table;
            if (counter == 4)
            {
                change what table we are now assigning to;
                counter = 0;
            }
    } 
```

# python - 有没有办法在 Python 中默认启用不一致的空白检查 (-t)

> ID：14462894
> 
> 赞同：2
> 
> 时间：2013-01-22T16:08:13.703
> 
> 标签：python

有没有办法：

*   始终`-t`默认启用（警告标签使用不一致）
*   能够在启动时以编程方式启用它（例如在`sitecustomize.py`模块中）

它也需要适用于嵌入式 Python（因此别名`python`或类似的解决方案将毫无用处）。使用`sitecustomize.py`允许我们连接到嵌入式 Python 实例，所以这似乎是一个适合它的地方。

我认为该`warnings`模块将提供一种打开此警告的方法，但我什么也没看到。

以供参考：

```
usage: python [option] ... [-c cmd | -m mod | file | -] [arg] ...
Options and arguments (and corresponding environment variables):
...
-t     : issue warnings about inconsistent tab usage (-tt: issue errors)
... 
```

关于如何做到这一点的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:13:52.657

没有这样的选择。

你可以

*   将解释器调用包装在 bash 脚本中
*   定义别名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:03:16.503

我能想到的唯一解决方案是导入钩子。虽然这有点超出了我希望做的事情，但我觉得这是我了解它们如何工作的一个很好的借口。

该解决方案不检查“不一致的空白”，它只检查制表符，但它很容易扩展。

结果如下：

```
import sys
import imp
import warnings

class TabCheckImporter(object):

    """Finder and loader class for checking for the presence of tabs

    """

    def find_module(self, fullname, path=None):
        """Module finding method

        """
        # Save the path so we know where to look in load_module
        self.path = path
        return self

    def load_module(self, name):
        """Module loading method.

        """
        # Check if it was already imported
        module = sys.modules.get(name)
        if module is not None:
            return module

        # Find the module and check for tabs
        file_, pathname, description = imp.find_module(name, self.path)
        try:
            content = file_.read()
            tab = content.find("\t")
            if tab > -1:
                lineno = content[:tab].count("\n") + 1
                warnings.warn_explicit(
                        "module '{0}' contains a tab character".format(name),
                        ImportWarning,
                        pathname,
                        lineno)
        except Exception as e:
            warnings.warn("Module '{0}' could not be checked".format(name),
                          ImportWarning)

        # Import the module
        try:
            module = imp.load_module(name, file_, pathname, description)
        finally:
            if file_:
                file_.close()

        sys.modules[name] = module
        return module

# Register the hook
sys.meta_path = (sys.meta_path or []) + [TabCheckImporter()]

# Enable ImportWarnings
warnings.simplefilter("always", ImportWarning) 
```

导入此文件（替换`->|`为文字选项卡）：

```
# File: test_tabbed.py
if True:
->| print "This line starts with a tab" 
```

产生这个输出：

```
$ python -c 'import hook; import test_normal; import test_tabbed;'
test_tabbed.py:3: ImportWarning: module 'test_tabbed' contains a tab character
  print "This line starts with a tab" 
```

# intersection - 关系代数中的棘手交集

> ID：14462897
> 
> 赞同：1
> 
> 时间：2013-01-22T16:08:24.663
> 
> 标签：intersection, relational-algebra

您好，在我的考试修订中，我为关系代数选择了以下示例问题：

```
employee (+person_name, street, city)
works (+person_name, company_name, salary)
company (+company_name, city)
manages (+person_name, manager_name)

+ indicate the underlined primary keys 
```

1.  查找与经理居住在同一城市和同一条街道上的所有员工的姓名

    ```
     MY solution
    JOIN manages and employee (OVER person_name) GIVING T1
    JOIN manages and employee (OVER manager_name) GIVING T2
    PROJECT T1 over person_name, street, city GIVING T3
    PROJECT T2 over street, city GIVING T4
    T3 intersect T4 GIVING T5
    PROJECT T5 over person_name GIVING RESULT 
    ```

这是我的解决方案，直到我发现交集必须是联合兼容的（匹配的列数及其标题）

从那以后，我真的找不到解决这个问题的方法，因为如果我对 line-3
PROJECT T1 over street, city GIVING T3进行以下更改，
那么我将永远没有机会将交叉点的结果链接回 person_name。

另一方面，当我对第 4 行进行以下更改时： PROJECT T2 over person_name, street, city GIVING T4
然后在交叉路口，我永远不会找到一个除了他自己之外还有其他经理的人。

我会很感激给出的任何提示，也许我拿起的这个在线样本很模棱两可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:09:58.363

另一种表达问题的方式：对于每个经理+人员对，找到相关城市+州对于两个人都相同的人。你几乎做到了：

```
JOIN manages AND employee (OVER person_name) GIVING T1
JOIN T1 AND employee (OVER manager_name, street, city) GIVING T2
PROJECT T2 OVER person_name, manager_name, street, city GIVING RESULT 
```

问题陈述不需要在单个列中返回名称，并且此答案提供了有用的结果。如果需要，您可以重复上述查询，采用两个投影的并集：一个是 person_name，另一个是 manager_name。

只有一件事：许多经理会反对一个名为“人”的栏目和另一个名为“经理”的栏目，因为几乎每个经理——尽管你的经验，也许？——认为自己是一个人。更可接受的配对可能是经理/工人、领主/农奴、主/从等。

# eclipse - 使用没有eclipse的tomcat

> ID：14462898
> 
> 赞同：4
> 
> 时间：2013-01-22T16:08:28.833
> 
> 标签：eclipse, shell, tomcat, ubuntu

我想使用 Tomcat 而没有 Eclipse。

我找不到任何带有命令行的 Tomcat 教程。他们都使用 Eclipse。

我需要的是：

*   创建 WAR 文件
*   使用新的 WAR 文件重新启动 Tomcat

*   更新 WAR 文件（当我用 Eclipse 编辑 css/js 文件时，我不需要刷新 Tomcat）

最好的办法是使用命令行。我正在使用 Ubuntu。

您有任何提示或资源来实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:29:13.863

只需按照以下步骤操作：

*   将war文件放在tomcat的**webapps目录中**

*   **通过从终端（ shutdown.sh 和 startup.sh**）运行 bin 目录中的脚本来重新启动 tomcat

*   通过启动浏览器然后输入以下 URL 来访问应用程序

    ```
     localhost:8080/app/index.jsp ( if generated app.war)
     localhost:8080/index.jsp (if you generated ROOT.war) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-14T10:47:45.853

只是为了添加@rai.shumar 所说的内容，我最近也不得不找到这个。这是我到目前为止所学到的。

参考：

*   [http://www.dzone.com/tutorials/java/ant/ant-sample-build-file-war-1.html](http://www.dzone.com/tutorials/java/ant/ant-sample-build-file-war-1.html)
*   [如何创建战争文件](https://stackoverflow.com/questions/1001714/how-to-create-war-files)

首先创建一个目录结构：

*   创建一个“示例”目录，它将成为您新项目的根目录。
*   创建构建目录
*   创建构建/类目录
*   创建 dist 目录
*   创建 src 目录
*   创建 WEB-INF 目录
*   创建 WEB-INF/lib 目录

然后我添加了一些测试文件（通过从 apache tomcat 示例中复制它）

*   HelloMaster.java（重命名为 HelloWorldExample.java）到 src/
*   LocalString*.properties 到 WEB-INF/classes
*   在“example”-dir 中创建一个空的 build.xml 文件
*   在 WEB-INF 目录中创建一个空的 web.xml 文件

项目结构应如下所示：

```
~/example$ tree .
├── build
│   └── classes
│     
├── build.xml
├── dist
│   
├── src
│   └── HelloMaster.java
└── WEB-INF
    ├── classes
    │   ├── LocalStrings_en.properties
    │   ├── LocalStrings_es.properties
    │   ├── LocalStrings_fr.properties
    │   ├── LocalStrings.properties
    │   └── LocalStrings_pt.properties
    ├── lib
    └── web.xml 
```

然后我将以下内容添加到 WEB-INF/web.xml 文件中：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
     version="2.4">
  <servlet>
    <servlet-name>HelloMaster</servlet-name>
    <servlet-class>HelloMaster</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>HelloMaster</servlet-name>
    <url-pattern>/hellomaster</url-pattern>
  </servlet-mapping>
</web-app> 
```

build.xml 是最重要的一个：

```
<?xml version="1.0" ?> 
<project name="AntExample1" default="war">

  <!-- hack! setting classpath explicitly to tomcat's classes -->
  <!-- export CLASSPATH=$CLASSPATH:/path_to_apache_tomcat_classes/classes/ -->  

  <path id="compile.classpath">
    <fileset dir="WEB-INF/lib">
      <include name="*.jar"/>
    </fileset>
  </path>

  <target name="init">
    <mkdir dir="build/classes"/>
    <mkdir dir="dist" />
  </target>

  <target name="compile" depends="init" >
    <javac destdir="build/classes" debug="true" srcdir="src">
      <classpath refid="compile.classpath"/>
    </javac>
  </target>

  <target name="war" depends="compile">
    <war destfile="dist/AntExample.war" webxml="WEB-INF/web.xml">
      <fileset dir=""/>
      <lib dir="WEB-INF/lib"/>
      <classes dir="build/classes"/>
    </war>
  </target>

  <target name="clean">
    <delete dir="dist" />
    <delete dir="build" />
  </target>  
</project> 
```

注意我不知道如何设置类路径而不明确设置它：

```
 > export CLASSPATH=$CLASSPATH:/path_to_apache_tomcat_classes/classes/    
 > ant  #-- this should create the war file in the dist dir 
```

然后，war 文件应命名为 dist/AntExample.war，您可以将其复制到您的 webapps 目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:31:03.330

我目前使用没有eclipse的tomcat。除了编码更漂亮的前端之外，我不确定 IDE 是否能给你带来很多好处。那是一个没有多少人可以分享的观点。我也不是专业的网络程序员，我是一个万事通的程序员。

提示：首先，始终使用你的 linux 发行版的机制和包管理系统来安装/管理你的软件，在这种情况下是 tomcat 和相关的库。我的开发箱是 Fedora 17，所以我做的一些事情可能是以 Fedora 为中心的。

通常，您制作 warfile（如 tar 存档）并将它们部署到 java 应用程序服务器或容器（如 tomcat）。仅对于 servlet，这是我在批处理脚本中所做的。一般来说，所有这些服务器都有共同的 API，然后是一些专有的东西。理论上，如果您坚持使用通用 API，您的 servlet 应该可以在大多数 Java 应用服务器上运行。

1.  找到您需要编译的 api，其中 foo.java 是您的 servlet 使用的 POJO 类： javac -cp /usr/share/java/tomcat6-servlet-api.jar foo.java servlet1.java servlet2.java

2.  将已编译的类移动到您的 warfile 构建点。cp *.class build/WEB-INF/classes/

在构建之前 rm *.class 是个好主意。

1.  进入该目录（我通常将其命名为 build）并 jar cvf myfoo.war *（查找如何制作 web.xml 文件，您必须具有特定的目录层次结构）

2.  部署你的warfile，我帮助热部署机制的是 rm -rf all the old warfile 和 warfile cruftifoo 然后我

sudo cp myfoo.war /var/lib/tomcat6/webapps/

我正在考虑维修 tomcat（启动和停止），因为热部署有时不会。

# c# - 了解 MVC4 控制器

> ID：14462899
> 
> 赞同：5
> 
> 时间：2013-01-22T16:08:29.777
> 
> 标签：c#, .net, web-applications, asp.net-mvc-4

我对 .net 框架和整个 MVC 编程理念还很陌生。有人可以澄清并给我一个基本的解释控制器如何使用 C# 与站点交互吗？我了解如何用 C# 编写代码，并且了解框架的某些方面，但我不明白它们是如何联系在一起的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T16:52:28.177

**模型**- 是表示某种对象（通常是一个）的数据结构。它的目的是读取、写入和管理对底层对象的访问，目的是保持应用程序状态。

**视图**- 是用于向用户显示可视界面的组件，可能使用模型。它可能是一个简单的表格，也可能是一个完整的网页的复杂组合。

**控制器**- 是用户驱动的应用程序逻辑层，位于视图和模型之间。它处理用户交互、加载模型并将视图发送给用户。它根据用户请求确定将什么模型发送到视图。

应用程序的整体文件夹结构可能如下所示。

```
>> Website
     >> Controllers
     >> Models
     >> Views 
```

在 C# MVC 中，每个控制器`Controller`的名称中必须有后缀，它们必须扩展 Controller 类并`Controller`在 views 文件夹中有一个名称前缀（不带 ）的文件夹。然后，此文件夹将包含与控制器上的特定操作相关的所有视图。

控制器可以包含定义为公共功能的任意数量的操作。默认情况下，当从控制器操作返回结果时，视图的名称必须与操作的名称相对应。但是，您也可以按名称指定视图。从控制器加载视图时，可以将对象作为模型发送到视图并在那里生成它的内容。

控制器可以加载任何模型并且不受任何限制。

一个`Account`控制器定义如下，带有一个 action `Login`。控制器放置在`AccountController.cs`文件`/Controllers`夹中的文件中，并且该控制器的任何视图（`Login`在本例中为 filename `Login.cshtml`）都放置在`/Views/Account`文件夹中。

注意：命名约定必须正确，因为控制器和视图之间使用名称来链接数据。

```
public class AccountController : Controller
{
    public ActionResult Login(string returnUrl)
    {
        if (User.Identity.IsAuthenticated)
        {
            return RedirectToAction("Index","Site");
        }

        return View("Login", new LogOnModel());
    }
} 
```

可以通过`http://www.mysite.com/Account/Login`. 如果用户通过身份验证，控制器将重定向到主站点控制器，如果用户未登录，则显示`Login`从`LogOnModel`指定加载数据的视图。

这实际上只是触及了可能的表面。阅读一些关于 ScottGu 的优秀文章的在线信息，这些文章更深入地告诉你如何使用 MVC。

[ASP.NET MVC 框架概述](http://weblogs.asp.net/scottgu/archive/2007/10/14/asp-net-mvc-framework.aspx)

[ASP.NET MVC 框架操作方法 - 第 1](http://weblogs.asp.net/scottgu/archive/2007/11/13/asp-net-mvc-framework-part-1.aspx)部分 //[第 2](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)部分 //[第 3](http://weblogs.asp.net/scottgu/archive/2007/12/06/asp-net-mvc-framework-part-3-passing-viewdata-from-controllers-to-views.aspx)部分 //[第 4 部分](http://weblogs.asp.net/scottgu/archive/2007/12/09/asp-net-mvc-framework-part-4-handling-form-edit-and-post-scenarios.aspx)

注意：这些文章是在 2007 年为 MVC 版本 1 编写的，因此有些过时，但模型、视图和控制器如何交互的概念仍然适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:14:31.837

控制器在某种程度上充当内部 Web 服务。它们将您的服务器端代码公开给您的视图，并允许它们调用控制器。在模式方面，大多数人认为控制器应该尽可能薄。如果有繁重的工作或其他业务逻辑，您应该将其抽象到应用程序的另一部分。在我看来，控制器是为视图提供可调用的内容，然后返回该数据，无论它是 text/html、json 还是 xml。

这里有大量的信息，直接来自源：[http ://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)

具体到该站点，我强烈推荐该教程。它将让您更清楚地了解模型、视图和控制器如何交互和相互依赖。 [http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:17:59.780

控制器是具有方法的类，这些方法称为操作，您将这些操作附加到“视图”（cshtml 文件）。

```
//This is your controller
public class HomeController : Controller
{
    // This is your action
    public ActionResult Index()
    {
        return View();
    }
} 
```

您可以右键单击“索引”操作并选择“添加视图...”，这将创建一个附加到该操作的新视图。

为了访问该视图，您将执行以下操作： localhost/Controller/Action 在这种情况下，它应该是： localhost/Home/Index where Home = Controller, Index = Action

你应该阅读[MVC 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

微软为初学者提供了一些非常好的[教程](http://www.asp.net/mvc)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T16:50:06.880

ASP.NET MVC 中的控制器是一个处理应用程序逻辑以响应请求的对象。它将根据请求（例如 HTTP 请求）创建，并且在视图层创建响应之前可用。之后它将成为一个不可用的对象（很快 GC 将释放其分配的内存），并且对于另一个请求，必须创建一个新的控制器对象，依此类推。

我认为根据这个定义，为什么它必须是轻量级的以及你必须如何使用它是显而易见的。

# dust.js - dust.js 中的间接寻址

> ID：14462903
> 
> 赞同：0
> 
> 时间：2013-01-22T16:08:32.537
> 
> 标签：dust.js

是否可以在dust.js 中实现可变间接 - 因此能够使用类似地图的功能？

想象一下，我有以下上下文要传递给 Dust：

```
{
  "keys": [ "Foo", "Bar", "Baz" ],
  "data": [{
      "date": "20130101",
      "values": {
        "Foo": 1,
        "Bar": 2,
        "Baz": 3
      }
    }, {
      "date": "20130102",
      "values": {
        "Foo": 4,
        "Bar": 5,
        "Baz": 6
      }
    }]
} 
```

我想实现以下输出（它实际上是一个表格，但为了简洁起见，我跳过了`<tr><td>`标签，并用空格和换行符替换了它们）：

```
Date Foo Bar Baz
20130101 1 2 3
20130102 4 5 6 
```

我不确定如何遍历该`keys`属性，并使用每个值`x`来查找`data[i].values[x]`. 我可以通过对键进行硬编码来获得所需的输出：

```
Date{~s}
{#keys}
  {.}{~s}
{/keys}
{~n}
{#data}
  {date}{~s}
  {values.Foo}{~s}
  {values.Bar}{~s}
  {values.Baz}{~s}
  {~n}
{/data} 
```

但密钥将动态确定，因此我无法将它们硬编码到模板中。有没有办法用类似以下的内容替换说`values.Foo`等的行：

```
{#data}
  {date}{~s}
  {#keys outerMap=values}
    {outerMap.{.}}{~s}
  {/keys}
  {~n}
{/data} 
```

这不像书面的那样工作；我可以捕获`{.}`（当前键的值）的输出并动态地将其用作（部分）要解析的属性名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:45:17.757

所以，简短的回答是否定的，你不能在 Dust 中这样做。

Dust 本来就是一种无逻辑的语言，而这与太多的逻辑接壤。通常，此类问题的答案是更新您的 JSON，使其在 Dust 中正常工作。在您给出的示例中，这可以很容易地完成，但在现实世界的情况下可能会困难得多。Dust 的部分力量在于它的局限性。

如果此答案对您不起作用，欢迎您在 GitHub 上提交拉取请求：[https ://github.com/linkedin/dustjs](https://github.com/linkedin/dustjs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:23:12.250

正如 smfoote 所说，Dust 中不支持开箱即用。

但是，我意识到处理程序可能涉及一些逻辑元素，因此编写一个处理程序来进行取消引用相对简单：

```
 deref: function(chunk, context, bodies, params) {
    chunk.write(params.obj[params.prop]);
  } 
```

此处理程序接受一个`obj`参数，该参数是用作关联数组的对象；以及`prop`描述要从该对象查找的键的参数。将此处理函数添加到上下文后，我就可以将模板的数据部分编写为：

```
{#data}
  {date}{~s}
  {#keys}
    {#deref obj=values prop=./}{~s}
  {/keys}
  {~n}
{/data} 
```

这会产生正确的输出，方法是遍历每个键并将其作为属性传入以从`values`对象中读取。

鉴于 Dust 的哲学，我很欣赏有些人可能会认为这不合适。但是我不认为它构成了特别复杂的逻辑；事实上，它完全可以成为模板框架的一部分。鉴于 smfoote 建议的更新我的 JSON 的替代方法不是一个选项（模板不知道密钥将提前是什么，因此无法在此处编写“静态”引用），这似乎是一种合理的方法。

# actionscript-3 - Flash 中基于时间的动画

> ID：14462905
> 
> 赞同：0
> 
> 时间：2013-01-22T16:08:33.473
> 
> 标签：actionscript-3, flash, animation, time

我是使用 ActionScript 的新手，我正在尝试使用时间轴来触发游戏中的某些事件。特别是，我使用时间线来触发枪的开火事件，这样当开火动画到达某个帧时，就会产生子弹。在枪类（Enter_Frame）中，我检查鼠标是否被按住，并且最后一次射击和当前时间之间的时间比冷却时间长，如果一切正常，我会播放动画。

```
if (time - lastShot > cooldown)
{
    canShoot = true;
    lastShot = time;
}
if (mouseHold && canShoot)
{
    play();
} 
```

当帧速率低于在冷却时间再次启动之前无法播放完整动画的点时，这会产生问题。在这种情况下，子弹发射速度较慢，帧速率较低。

此外，较高的帧速率使枪对鼠标输入的响应更灵敏，因为射击帧比较低的帧速率更快。

目标显然是让游戏完全独立于帧率。我希望能够根据枪的冷却来减慢或加快动画的帧速率。

使该动画在特定时间段内播放而不会跳过我放入时间轴的动作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:24:58.157

听起来您走在正确的轨道上，但是以错误的方式接近它。查看 Timer 类，它与帧速率无关，对您有很大帮助。

```
var my_timer = new Timer(1000,0); //in milliseconds
my_timer.addEventListener(TimerEvent.TIMER, catchTimer);
my_timer.start();

function catchTimer(e:TimerEvent)
{
     trace("event fired");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:43:02.097

如果您希望动画精确且不依赖于帧速率，则应该研究基于时间的动画而不是基于帧的动画，这样您的动画将始终相同，并且将补偿较慢计算机的较慢帧速率。这是一篇解释得很好的文章： http: [//www.flashgamesclassroom.com/classroom/actionscript/frame-based-vs-time-based-animation/](http://www.flashgamesclassroom.com/classroom/actionscript/frame-based-vs-time-based-animation/)

# .net - 仅用于存储过程的 ORM：首选工具

> ID：14462906
> 
> 赞同：0
> 
> 时间：2013-01-22T16:08:35.627
> 
> 标签：.net, orm, ado.net

通常我使用 Entity Framowrk 作为我的 ORM 工具。而且我真的很喜欢“功能导入”功能和代码生成器。

但是一旦我读到一本很厚很严肃的书，使用 EF 只调用 SP 并不是一个好主意。

作者只是忘记了一点：**什么工具最适合这种数据库调用策略？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:19:56.660

如果您花时间学习 EF 并且它对您有用，请坚持下去。或者，对于大多数项目来说，像 Dapper、Massive 和 PetaPoco 这样的微型 ORM 就足够了。例如，我相信 Dapper 是为了使用 @ StackExchange 而开发的——它现在是开源的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:44:02.877

查看 BLToolkit，与 EF 相比，学习曲线非常低

另请查看此 Blt 扩展 -> [bltoolkit-storedprocedures2csharp-t4/](http://code.google.com/p/bltoolkit-storedprocedures2csharp-t4/) 使用 T4 模板为您的存储过程生成函数

普通 Bltoolkit

```
using(var db = new DbManager())
{
  return db
    .SetSpCommand(
      "Person_SaveWithRelations",
      db.Parameter("@Name", name),
      db.Parameter("@Email", email),
      db.Parameter("@Birth", birth),
      db.Parameter("@ExternalID", exId),
    )
    .ExecuteObject<Person>();
} 
```

随着扩展

```
using (var db = new DataManager())
{
  return db
    .Person
    .SaveWithRelations(
      name,
      email,
      birth,
      exId
    )
    .ExecuteObject<Person>();
} 
```

（免责声明：我自己没有使用扩展，因为我没有很多 SP）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:16:54.243

[我认为Microsoft Enterprise Library](http://entlib.codeplex.com/)中的数据访问块是最佳选择。我在几个项目中使用它来仅使用存储过程来查询外部数据库。最新版本的配置非常简单，使用方便。它也不会为您提供额外的功能，并且只提供您需要的东西。如果您想要简单快速的配置和使用，请使用它，这是我的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:34:36.170

尝试使用 BLToolkit - 它是开源的，允许将对象映射到存储过程参数并将存储过程输出映射到对象而没有任何问题

[bltoolkit 主页](http://bltoolkit.net/ "bltoolkit 主页") [bltoolkit 资源](https://github.com/igor-tkachev/bltoolkit "来源")

# vba - 如何强制 ControlSource 更新（excel 用户表单）

> ID：14462908
> 
> 赞同：2
> 
> 时间：2013-01-22T16:08:37.207
> 
> 标签：vba, datetime, excel, event-handling, userform

在我的 Excel VBA 用户表单上有一个文本框，用户应在其中输入`dd-mm-yy`格式的日期。如果输入是`09-22-13`，则应将其更新为`22-09-2013`。此文本框的 ControlSource 属性设置为单元格的地址；这个单元格的值也应该变成`22-09-2013`。

我尝试过的所有事件处理程序的问题是 ControlSource 的值在触发处理程序之前得到更新，除非我硬编码它的地址，否则我无法更改 ControlSource 的值（这是我想避免的）。

你能帮忙吗？谢谢。

```
Private Sub TextBox_MyDate_BeforeUpdate(ByVal Cancel As MSForms.ReturnBoolean)
    TextBox_MynDate.Value = Format(TextBox_MyDate.Value, "dd/mm/yyyy")
    ' TextBox_MyDate.ControlSource.Value = TextBox_MyDate.Value does not compile
    DoEvents
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:57:09.440

这里有一些需要考虑的事情，`controlsource update`并且`event order`似乎无法更改，因此您可以尝试`worksheet_change`在 the 之前添加事件，`textbox event`因为前者在`textbox event`存在之前触发..

[参考：](http://www.excelforum.com/excel-programming-vba-macros/671914-control-source-updates-in-userform.html)

*   它说，*如果您使用 ContolSource，那么每次相关单元格更改时文本框都会刷新，但请注意，反之亦然。更改一个文本框 & 单元格将改变*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-01T07:00:33.620

```
 Private Function GetCtrlSourceStr$()
        On Error Resume Next
        GetCtrlSourceStr = wCtrl.ControlSource
   End Function 
```

' ' 如果 Form 已卸载并且通过编辑工作表更改了 Sheet FoFiCriteria 中的值 ' 表单文本框或复选框将不会链接到这些更改 .. ' 显示或隐藏的表单仍将与其控制源同步 ' 当表单已打开但 FoFiCriteria 不是活动工作表 '这些 ControlSource 字符串需要为 ,, SHeetName!B14 .. FoFiCriteria!L9 ' 从 ' RaAdd = ra(3, Ci).Address(False, False, , True) ' .ControlSource = Mid(RaAdd, InStr(RaAdd, "]") + 1)

'所以在表单上编辑应该链接到其工作表上的控制源范围'所以我们需要'

```
Sub ReGetCtrlSources()
   For Each wCtrl In frd.Controls
        If GetCtrlSourceStr <> "" Then
       wCtrl.Value = Range(wCtrl.ControlSource).Value
    wCtrl.BackColor = Range(wCtrl.ControlSource).Interior.Color
       End If

   Next wCtrl 
```

结束子

' 添加激活 Private Sub UserForm_Activate()

```
 ReGetCtrlSources

   End Sub 
```

# c# - 将所有子列表连接在一起并获取第一个

> ID：14462909
> 
> 赞同：0
> 
> 时间：2013-01-22T16:08:42.927
> 
> 标签：c#, .net, vb.net, linq, linq-to-objects

我希望能够提取包含类别中产品的最后一张发票 Category->Product->Invoice

```
(from p as Product in cat
 where p.InvoiceList.Where(function(o) o.InvoiceDate >= MAX_ONE)
 select p.InvoiceList.Where(function(o) o.InvoiceDate >= MAX_ONE)
).FirstOrDefault() 
```

我似乎无法弄清楚如何完成这项工作。

编辑：一个可以实现我的目标的示例 SQL 语句。如果我能翻译它...

```
SELECT    TOP 1 i.InvoiceID, i.InvoiceDate, i.TotalAmount
FROM         Category as c INNER JOIN
                  Product as p ON p.categoryID = c.categoryID INNER JOIN
                  InvoiceProducts as ip ON ip.productID = p.productID INNER JOIN
                  Invoice as i ON ip.InvoiceID = i.InvoiceID 
WHERE     c.categoryID = 3
ORDER BY InvoiceDate DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:15:38.603

```
cat.SelectMany(p => p.InvoiceList).OrderBy(o => o.InvoiceDate).LastOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:24:57.630

```
var lastInvoice = (from i in context.Invoices
    .where i.Product.CategoryId == categoryId
    .select i)
        .OrderByDescending(i=>i.IbvoiceDate)
        .FirstOrDefault(); 
```

# c++ - 在 std::map 的元素上设置数据断点

> ID：14462915
> 
> 赞同：7
> 
> 时间：2013-01-22T16:08:54.163
> 
> 标签：c++, visual-studio-2010, debugging, map, breakpoints

我有一个`std::map`是班级的私人成员。它的价值之一正在改变（当它不应该改变时），我不知道在哪里。组装地图后，由于所使用键的性质，有问题的元素总是最后一个。

我试图在 Visual Studio 2010 中的最后一个元素（准确地说是第六个）上设置数据断点，但没有运气。我已经查看了两者的标题`map`和`xtree`（它的基础），但找不到合适的成员来使用。

有谁知道如何在 a 中的元素值上设置数据断点`std::map`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:22:58.247

您应该能够使用调试器浏览映射到实际`.second`数据成员，然后`&`在它生成的表达式前面添加一个。然后把那个地址放到数据断点里面，看看你运气好不好。

# c# - 接受 PictureBox 和 DataGridViewImageCell 的函数

> ID：14462919
> 
> 赞同：2
> 
> 时间：2013-01-22T16:08:59.540
> 
> 标签：c#, winforms, datagridview, picturebox

我正在创建一个类来帮助修改 GUI 中的图像。图像可以是 a`PictureBox`或 a `DataGridViewImageCell`。该类将所有可以修改的图像存储为列表。该类的每个实例都将使用其中一个`PictureBox`或两个，`DataGridViewImageCells`但不能同时使用两者。

有没有办法处理两个输入？例如，它们之间是否有一些共同的接口，或者将它们转换为某个共同的父类的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:18:59.097

好吧，您总是可以将它们视为`object`，但我建议您的类只为这两种类型提供两个重载：

```
class MyClass
{
    public void AddImage(PictureBox image)
    {

    }

    public void AddImage(DataGridViewImageCell image)
    {

    }
} 
```

如何在内部存储它取决于您。也许你有一个`List<object>`你投入/退出的，或者你维护两个单独的列表，每个类型一个，或者你只是将每个列表添加`image`到包含对象的子集合中。

至于共享类，我从 MSDN 相信它们不共享基类，`Object`因此您必须坚持使用该类或用您自己的包含类包装它们。

编辑：这是一种使用包装接口和工厂处理它的更完整的方法。

首先，定义一个基于共享类型的接口（在本例中`object`），您可以使用它来传递图像：

```
public interface IImageWrapper
{
    object RawImage { get; }
}

public class PictureBoxImageWrapper : IImageWrapper
{
    public object RawImage { get; private set; }

    public PictureBoxMyImage(PictureBox image)
    {
        this.RawImage = image;
    }
}

public class DataGridViewImageCellImageWrapper : IImageWrapper
{
    public object RawImage { get; private set; }

    public DataGridViewImageCellImageWrapper(DataGridViewImageCell image)
    {
        this.RawImage = image;
    }
} 
```

然后是用户 API 的一个简单工厂，用于包装图像*并*在编译时安全地确定严格支持哪些图像类型：

```
public class ImageWrapperFactory
{
    public IImageWrapper Create(PictureBox image)
    {
        return new PictureBoxImageWrapper(image);
    }

    public IImageWrapper Create(DataGridViewImageCell image)
    {
        return new DataGridViewImageCellImageWrapper(image);
    }
} 
```

然后您的显示类或视图可以接收这些`IImageWrapper`对象并将它们转换为可用类型：

```
public class MyDisplayClass
{
    private List<IImageWrapper> Images = new List<IImageWrapper>();

    public void AddImage(IImageWrapper image)
    {
        Images.Add(image);
    }

    private void AddImageToContainer(IImageWrapper image)
    {
        object rawImage = image.RawImage;

        if (rawImage is PictureBox)
            AddImageToContainerImpl((PictureBox)rawImage);
        else if (rawImage is DataGridViewImageCell)
            AddImageToContainerImpl((DataGridViewImageCell)rawImage);
        else
            throw new NotSupportedException();
    }

    private void AddImageToContainerImpl(PictureBox image)
    {
        //add to container
    }

    private void AddImageToContainerImpl(DataGridViewImageCell image)
    {
        //add to container
    }
} 
```

一些示例用法：

```
PictureBox myImage = ...
MyDisplayClass myView = ...

myView.AddImage(ImageWrapperFactory.Create(myImage)); 
```

因此，图像的底层类型并没有被*强制*执行。如果您愿意，您可以更新工厂以返回强类型`IImageWrapper`对象，`PictureBoxImageWrapper`然后将显示类强类型化为它支持的对象，但这有点违背了目的（您也可以像我的第一个答案中那样强类型化`PictureBox`/ `DataGridViewImageCell`.

编辑：另一种方法是为您的“工厂”利用隐式运算符。这样，您的 API 只需“传递”原始图像对象，如果它们受支持，就会找到隐式运算符。如果不是，那么您将获得编译时异常：

```
public sealed class ImageWrapper
{
    public object RawData { get; private set; }

    private ImageWrapper(object rawData)
    {
        this.RawData = rawData;
    }

    public static implicit operator ImageWrapper(PictureBox image)
    {
        return new ImageWrapper(image);
    }

    public static implicit operator ImageWrapper(DataGridViewImageCell image)
    {
        return new ImageWrapper(image);
    }
}

PictureBox myImage = ...
ImageControl unsupportedImage = ... 
MyDisplayClass myView = ...

myView.AddImage(myImage); //OK!
myView.AddImage(unsupportedImage);// compile error! 
```

# tomcat - java.lang.NoSuchFieldError：在Tomcat上部署shiro时出现subjectDAO异常

> ID：14462926
> 
> 赞同：1
> 
> 时间：2013-01-22T16:09:12.767
> 
> 标签：tomcat, shiro

我是 shiro 的新手，正在尝试在 Tomcat 上运行我的 Web 应用程序。我在 web.xml 中的 shiro 特定配置如下：

```
<listener>
    <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
</listener>
<filter>
    <filter-name>ShiroFilter</filter-name>
    <filter-class>org.apache.shiro.web.servlet.IniShiroFilter</filter-class>
     <!-- no init-param means load the INI config from classpath:shiro.ini --> 
</filter>

<filter-mapping>
    <filter-name>ShiroFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher> 
    <dispatcher>FORWARD</dispatcher> 
    <dispatcher>INCLUDE</dispatcher> 
    <dispatcher>ERROR</dispatcher>
</filter-mapping> 
```

我的 shiro.ini 如下所示：

```
[main]
credentialsMatcher = org.apache.shiro.authc.credential.HashedCredentialsMatcher
credentialsMatcher.hashAlgorithmName = SHA-256
credentialsMatcher.storedCredentialsHexEncoded = false
credentialsMatcher.hashIterations = 1024
localRealm = com.stratus.avance.multisite.services.ShiroMongoRealm
localRealm.credentialsMatcher = $credentialsMatcher
securityManager.realms = $localRealm
[urls]
/** = anon 
```

我在部署应用程序时看到以下异常

```
INFO: Initializing Shiro environment
Jan 22, 2013 3:40:32 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class     org.apache.shiro.web.env.EnvironmentLoaderListener
java.lang.NoSuchFieldError: subjectDAO
    at org.apache.shiro.web.mgt.DefaultWebSecurityManager.<init>(DefaultWebSecurityManager.java:72)
    at org.apache.shiro.web.config.WebIniSecurityManagerFactory.createDefaultInstance(WebIniSecurityManagerFactory.java:65)
    at org.apache.shiro.config.IniSecurityManagerFactory.createDefaults(IniSecurityManagerFactory.java:155)
    at org.apache.shiro.web.config.WebIniSecurityManagerFactory.createDefaults(WebIniSecurityManagerFactory.java:71)
    at org.apache.shiro.config.IniSecurityManagerFactory.createSecurityManager(IniSecurityManagerFactory.java:118)
    at org.apache.shiro.config.IniSecurityManagerFactory.createSecurityManager(IniSecurityManagerFactory.java:97)
    at org.apache.shiro.config.IniSecurityManagerFactory.createInstance(IniSecurityManagerFactory.java:83)
    at org.apache.shiro.config.IniSecurityManagerFactory.createInstance(IniSecurityManagerFactory.java:41)
    at org.apache.shiro.config.IniFactorySupport.createInstance(IniFactorySupport.java:123)
    at org.apache.shiro.util.AbstractFactory.getInstance(AbstractFactory.java:47)
    at org.apache.shiro.web.env.IniWebEnvironment.createWebSecurityManager(IniWebEnvironment.java:203)
    at org.apache.shiro.web.env.IniWebEnvironment.configure(IniWebEnvironment.java:99)
    at org.apache.shiro.web.env.IniWebEnvironment.init(IniWebEnvironment.java:92)
    at org.apache.shiro.util.LifecycleUtils.init(LifecycleUtils.java:45)
    at org.apache.shiro.util.LifecycleUtils.init(LifecycleUtils.java:40)
    at org.apache.shiro.web.env.EnvironmentLoader.createEnvironment(EnvironmentLoader.java:226)
    at org.apache.shiro.web.env.EnvironmentLoader.initEnvironment(EnvironmentLoader.java:138)
    at org.apache.shiro.web.env.EnvironmentLoaderListener.contextInitialized(EnvironmentLoaderListener.java:58)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:963)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:537)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1468)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:791)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1436)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:673)
    at org.apache.catalina.manager.ManagerServlet.doPut(ManagerServlet.java:431)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:644)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我不明白这个异常，因为 subjectDAO 显然是 DefaultSecurityManager 类的定义字段。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:16:41.963

此异常表明您的 webapp 的运行时类路径中有多个不兼容的版本化 Shiro JAR 文件。浏览 webapp 的运行时类路径所涵盖的所有文件夹（至少 webapp's `/WEB-INF/lib`、 Tomcat's `/lib`、 JRE's`/lib`和`/lib/ext`），并确保在一个正确的位置（`/WEB-INF/lib`）中只有一个相同的版本。

就目前而言，当手动摆弄构建路径而不是依赖于例如 Maven 时，**只**删除in[就足够](http://shiro.apache.org/download.html)了。不需要其他与​​ Shiro 相关的 JAR（当然，除了 Commons BeanUtils）。如果您需要最少的库代码，请选择两个 JAR 文件和. 其他没有必要。请注意，您不应将其中任何一个与.**[`shiro-all.jar`](http://repo1.maven.org/maven2/org/apache/shiro/shiro-all/1.2.1/shiro-all-1.2.1.jar)`/WEB-INF/lib``shiro-core.jar``shiro-web.jar``shiro-all.jar`**

# c# - 访问冲突异常之谜

> ID：14462927
> 
> 赞同：23
> 
> 时间：2013-01-22T16:09:14.083
> 
> 标签：c#, opencv, emgucv

我使用 EMGU+OpenCV 已经有一段时间了，遇到了这个`AccessViolationException`谜团。

首先，代码：

```
class AVE_Simulation
    {
        public static int Width = 7500;
        public static int Height = 7500;
        public static Emgu.CV.Image<Rgb, float>[] Images;

        static void Main(string[] args)
        {
            int N = 50;
            int Threads = 5;

            Images = new Emgu.CV.Image<Rgb, float>[N];
            Console.WriteLine("Start");

            ParallelOptions po = new ParallelOptions();
            po.MaxDegreeOfParallelism = Threads;
            System.Threading.Tasks.Parallel.For(0, N, po, new Action<int>((i) =>
            {
                Images[i] = GetRandomImage();
                Console.WriteLine("Prossing image: " + i);
                Images[i].SmoothBilatral(15, 50, 50);
                GC.Collect();
            }));
            Console.WriteLine("End");
        }

        public static Emgu.CV.Image<Rgb, float> GetRandomImage()
        {
            Emgu.CV.Image<Rgb, float> im = new Emgu.CV.Image<Rgb, float>(Width, Height);

            float[, ,] d = im.Data;
            Random r = new Random((int)DateTime.Now.Ticks);

            for (int y = 0; y < Height; y++)
            {
                for (int x = 0; x < Width; x++)
                {
                    d[y, x, 0] = (float)r.Next(255);
                    d[y, x, 1] = (float)r.Next(255);
                    d[y, x, 2] = (float)r.Next(255);
                }
            }
            return im;
        }

    } 
```

代码很简单。分配一组图像。生成随机图像并用随机数填充它。对图像执行双边过滤。而已。

如果我在单个线程中执行该程序，（Threads=1）一切似乎都可以正常工作，没有问题。但是，如果我将并发线程数增加到 5，我会很快收到 AccessViolationException。

我检查了 OpenCV 代码并验证了 OpenCV 端没有分配，还检查了 EMGU 代码搜索未固定的对象或其他问题，一切似乎都是正确的。

一些注意事项：

1.  如果你删除它，`GC.Collect()`你会得到`AccessViolationException`更少的东西，但它最终会发生。
2.  这仅在发布模式下执行时才会发生。在调试模式下，我没有遇到任何异常。
3.  虽然每个图像是 675MB，但分配没有问题（我有 ALLOT 内存），并且`OutOfMemoryException`在系统内存不足的情况下会抛出一个 ' '。
4.  我使用了双边过滤器，但其他过滤器/功能也出现了这个异常。

任何帮助，将不胜感激。一个多星期以来，我一直在努力解决这个问题。

i7 (无超频), Win7 64bit, 32GB RAM, VS 2010, Framework 4.0, OpenCV 2.4.3

堆：

```
Start
Prossing image: 20
Prossing image: 30
Prossing image: 40
Prossing image: 0
Prossing image: 10
Prossing image: 21

Unhandled Exception: System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
   at Emgu.CV.CvInvoke.cvSmooth(IntPtr src, IntPtr dst, SMOOTH_TYPE type, Int32 param1, Int32 param2, Double param3, Double param4)
   at TestMemoryViolationCrash.AVE_Simulation.<Main>b__0(Int32 i) in C:\branches\1.1\TestMemoryViolationCrash\Program.cs:line 32
   at System.Threading.Tasks.Parallel.<>c__DisplayClassf`1.<ForWorker>b__c()
   at System.Threading.Tasks.Task.InnerInvokeWithArg(Task childTask)
   at System.Threading.Tasks.Task.<>c__DisplayClass10.<ExecuteSelfReplicating>b__f(Object param0)
   at System.Threading.Tasks.Task.Execute()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
   at System.Threading.Tasks.Task.ExecuteEntry(Boolean bPreventDoubleExecution)
   at System.Threading.Tasks.ThreadPoolTaskScheduler.TryExecuteTaskInline(Task task, Boolean taskWasPreviouslyQueued)
   at System.Threading.Tasks.TaskScheduler.TryRunInline(Task task, Boolean taskWasPreviouslyQueued)
   at System.Threading.Tasks.Task.InternalRunSynchronously(TaskScheduler scheduler, Boolean waitForCompletion)
   at System.Threading.Tasks.Parallel.ForWorker[TLocal](Int32 fromInclusive, Int32 toExclusive, ParallelOptions parallelOptions, Action`1 body, Action`2 bodyWithState, Func`4 bodyWithLocal, Func`1 loc
alInit, Action`1 localFinally)
   at System.Threading.Tasks.Parallel.For(Int32 fromInclusive, Int32 toExclusive, ParallelOptions parallelOptions, Action`1 body)
   at TestMemoryViolationCrash.AVE_Simulation.Main(String[] args) in C:\branches\1.1\TestMemoryViolationCrash\Program.cs:line 35

Unhandled Exception: System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
   at Emgu.CV.CvInvoke.cvSmooth(IntPtr src, IntPtr dst, SMOOTH_TYPE type, Int32 param1, Int32 param2, Double param3, Double param4)
   at TestMemoryViolationCrash.AVE_Simulation.<Main>b__0(Int32 i) in C:\branches\1.1\TestMemoryViolationCrash\Program.cs:line 32
   at System.Threading.Tasks.Parallel.<>c__DisplayClassf`1.<ForWorker>b__c()
   at System.Threading.Tasks.Task.InnerInvokeWithArg(Task childTask)
   at System.Threading.Tasks.Task.<>c__DisplayClass10.<ExecuteSelfReplicating>b__f(Object param0)
   at System.Threading.Tasks.Task.Execute()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
   at System.Threading.Tasks.Task.ExecuteEntry(Boolean bPreventDoubleExecution)
   at System.Threading.ThreadPoolWorkQueue.Dispatch()

Unhandled Exception: System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
   at Emgu.CV.CvInvoke.cvSmooth(IntPtr src, IntPtr dst, SMOOTH_TYPE type, Int32 param1, Int32 param2, Double param3, Double param4)
   at TestMemoryViolationCrash.AVE_Simulation.<Main>b__0(Int32 i) in C:\branches\1.1\TestMemoryViolationCrash\Program.cs:line 32
   at System.Threading.Tasks.Parallel.<>c__DisplayClassf`1.<ForWorker>b__c()
   at System.Threading.Tasks.Task.InnerInvokeWithArg(Task childTask)
   at System.Threading.Tasks.Task.<>c__DisplayClass10.<ExecuteSelfReplicating>b__f(Object param0)
   at System.Threading.Tasks.Task.Execute()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
   at System.Threading.Tasks.Task.ExecuteEntry(Boolean bPreventDoubleExecution)
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T01:29:36.580

您的示例没有保留对Image.SmoothBilatral中*结果图像的引用。*输入图像植根于静态数组，所以很好。

Emgu.CV 图像的数据数组被固定到实际图像内的 GCHandle，这与图像包含数组并且在 GCHandle 的指针被非托管代码使用时不会阻止收集这一事实没有什么不同（在没有映像的托管根）。

因为 Image.SmoothBilatral 方法除了传递它的指针并返回它之外不对其临时结果图像做任何事情，我认为它被优化到可以在平滑处理时收集结果图像的程度。

因为这个类没有终结器，所以 opencv 不会被调用来释放它的非托管图像头（它有一个指向托管图像数据的指针），所以 opencv 仍然认为它有一个可用的图像结构。

您可以通过引用 SmoothBilatral 的结果并对其进行处理（例如处理它）来修复它。

这种扩展方法也可以工作（即允许在不使用结果的情况下成功调用它进行基准测试）：

```
public static class BilateralExtensionFix
{
    public static Emgu.CV.Image<testchannels, testtype> SmoothBilateral(this Emgu.CV.Image<testchannels, testtype> image, int p1, int p2 , int p3)
    {
        var result = image.CopyBlank();
        var handle = GCHandle.Alloc(result);
        Emgu.CV.CvInvoke.cvSmooth(image.Ptr, result.Ptr, Emgu.CV.CvEnum.SMOOTH_TYPE.CV_BILATERAL, p1, p1, p2, p3);
        handle.Free();
        return result;
    }
} 
```

我认为 EmguCV 应该做的只是在进行互操作调用时固定指针以传递给 opencv。

ps OpenCv 双边滤波器在所有通道上以零变化 (min() = max()) 传递的任何类型的浮动图像上崩溃（产生与您的问题非常相似的错误）。我认为因为它是如何构建它的 binned exp() 查找表的。

这可以通过以下方式重现：

```
 // create new blank image
    var zeroesF1 = new Emgu.CV.Image<Rgb, float>(75, 75);
    // uncomment next line for failure
    zeroesF1.Data[0, 0, 0] += 1.2037063600E-035f;
    zeroesF1.SmoothBilatral(15, 50, 50); 
```

这让我很困惑，因为我实际上有时会因为我的测试代码中的错误而收到这个错误......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T17:56:49.843

您使用的是什么版本的 Emgu CV？我找不到它的 2.4.3 版本。

**很确定你的代码不是问题**。

似乎 Emgu.CV.Image 构造函数可能存在并发问题（在托管包装器或非托管代码中）。在 Emgu CV 主干中处理托管数据数组的方式似乎很可靠，在图像构造函数期间分配了一些非托管数据，我想这可能出错了。

如果您尝试：

*   移出`Images[i] = GetRandomImage();`并行 For()。
*   在构造函数`lock()`周围拍打`Image``GetRandomImage()`

我注意到这里有一个已关闭的错误报告，称有人遇到类似问题（对图像构造函数的调用并行发生，但图像本身未在线程之间共享[）](http://sourceforge.net/p/emgucv/support-requests/7/)。

[编辑]

是的，这是一个奇怪的。我可以使用股票 2.4.2 版本和 OpenCV 二进制文件进行复制。

如果并行线程数超过对我来说 > 2 的内核数，它似乎只会崩溃。知道测试系统上有多少内核会很有趣。

此外，只有当代码未附加到调试器并且启用了优化代码时，我才会崩溃 - 您是否曾经在附加了调试器的发布模式下观察到它？

由于 SmoothBilateral 函数受 CPU 限制，因此使用 MaxDegreeOfParallelism 多于内核数量并没有真正增加任何好处，因此假设我发现的有关数量的完美解决方法，如果线程与内核也适用于您的装备（sods law 预测：它不是）。

所以我的猜测是 Emgu 中存在并发/易失性问题，仅在运行 JIT 优化以及 GC 移动托管数据时才会出现。但是，正如您所说，Emgu 代码中没有明显的 unpinned-pointer-to-managed-object 问题。

虽然我仍然无法正确解释它，但这是我到目前为止发现的：

删除 GC.Collect + 控制台日志后，对 GetRandomImage() 的调用序列化，并且代码在 MSVC 之外运行，我无法重现该问题（尽管这可能只是降低了频率）：

```
 public static int Width = 750;
            public static int Height = 750;
...
                int N = 500;
                int Threads = 11;
                Images = new Emgu.CV.Image<Rgb, float>[N];
                Console.WriteLine("Start");
                ParallelOptions po = new ParallelOptions();
                po.MaxDegreeOfParallelism = Threads;
                for (int i = 0; i < N; i++)
                {
                    Images[i] = GetRandomImage();
                }
                System.Threading.Tasks.Parallel.For(0, N, po, new Action<int>((i) =>
                {
                    //Console.WriteLine("CallingSmooth");
                    Images[i].SmoothBilatral(15, 50, 50);
                    //Console.WriteLine("SmoothCompleted");
                }));
                Console.WriteLine("End"); 
```

我添加了一个计时器来在并行之外触发 GC.Collect，但仍然比正常触发的频率更高：

```
 var t = new System.Threading.Timer((dummy) => { 
            GC.Collect(); 
        }, null, 100,100); 
```

有了这个改变，我仍然无法重现这个问题，尽管由于线程池很忙，GC collect 的调用不如你的演示那么一致，而且在主循环中也没有（或很少）托管分配发生去收集。**取消注释围绕SmoothBilatral**调用的控制台日志，然后相当迅速地重现错误（我猜是通过给 GC 一些东西来收集）。

[另一个编辑]

[OpenCV 2.4.2 参考手册](http://public.cranfield.ac.uk/c5354/teaching/dip/opencv/manual/opencv242refman.pdf)指出 cvSmooth 已被弃用，并且“中值和双边滤波器适用于 1 或 3 通道8*位图像*，不能就地处理图像。”......不是很令人鼓舞！

我发现在字节或浮点图像上使用中值滤波器以及在字节图像上使用双边滤波器效果很好，我不明白为什么任何 CLR/GC 问题也不会影响这些情况。

因此，尽管对 C# 测试程序产生了奇怪的影响，但我仍然认为这是一个 Emgu/OpenCV 错误。

如果您还没有，您应该使用您自己[编译](http://docs.opencv.org/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#windows-visual-studio-how-to)的 opencv 二进制文件进行测试，如果仍然失败，请将您的测试转换为 C++。

注意 OpenCV 有[自己的并行实现](http://answers.opencv.org/question/3730/how-to-use-parallel_for/)，可能会更快。

# html - 如何在 HTML/CSS（无 JS）中创建此网格

> ID：14462931
> 
> 赞同：0
> 
> 时间：2013-01-22T16:09:25.667
> 
> 标签：html, css

我必须实现这个 div 网格。它不会经常更改，但可能会在某个时候更改（意味着可能会删除一个框，并调整另一个框的大小）。每个黑匣子最终都会包含一个图像或一个单词，但这并不重要。

我该如何解决这个问题？有没有比绝对定位每个盒子并手动输入每个 X/Y/宽度/高度更优雅的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:11:14.463

我建议使用基于网格的方法。像：http: [//960.gs/](http://960.gs/)

编辑（更多选项）

[http://developer.yahoo.com/yui/grids/](http://developer.yahoo.com/yui/grids/)

[http://cssgrid.net/](http://cssgrid.net/)

# cakephp - 带有订单和虚拟字段的列表

> ID：14462935
> 
> 赞同：1
> 
> 时间：2013-01-22T16:09:37.680
> 
> 标签：cakephp, drop-down-menu

我在 cakephp 中有一件奇怪的事情。所以我试着先解释一下。

我有：

*   两张表（员工和员工组）
*   每个组的组长，这是一个工作人员
*   一个虚拟字段，它连接名字和姓氏
*   按姓氏排序列表的愿望

* * *

**员工/模特**

```
public $virtualFields = array(
    [...] ,
    'fullnameForList' => 'CONCAT(Staff.lastname, ", ", Staff.firstname)',
    [...] 
```

* * *

**在 Staffgroup/controller 中的功能**

```
public function getGroupLeaderListArray(){
    $this->loadModel('Staff');
    $loc_list = $this->Staff->find("list",
        array("fields" => array("id", 'fullnameForList')),
        array("order" => array("Staff.lastname ASC" ))                              
    );

    $this->set('GroupLeaderList',$loc_list);
} 
```

* * *

**列表的输出**

*   当我拥有上面的函数 getGroupLeaderListArray 时，我得到了虚拟字段 fullnameForList 的内容，但它不是按顺序排列的。例如。*姓，名*

*   当我将数组顺序放在字段之前时，它按顺序显示，但字段错误。例如。*名字 姓氏*

* * *

如何获取带有虚拟字段和正确顺序的列表。我不知道更多，因为这个问题，我正在增加体重和脱发。帮助apreciated大时间！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:49:41.543

您在这里使用了无效的数组结构。您需要注意数组在蛋糕中的工作方式。例如，一个带有命名键的数组（这里有多个数组）作为 find() 的第二个参数。

```
find($type, $options); 
```

所以这是：

```
$locList = $this->Staff->find("list",
    array(
        'fields' => array('id', 'fullnameForList'),
        'order' => array('Staff.lastname ASC')
    )                              
); 
```

# android - 安卓不填充为其定义的区域

> ID：14462937
> 
> 赞同：0
> 
> 时间：2013-01-22T16:09:48.377
> 
> 标签：android, button, formatting, styling

我是 Android 开发新手，在格式化某些按钮时遇到问题。

![在此处输入图像描述](../Images/07c326b5fd310b11a0b2cb681b0d413e.png)

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:layout_margin="0dp"
    android:padding="0dp">

    <Button
        android:id="@+id/char_str_plus"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_margin="0dp"
        android:padding="0dp"
        android:text="+"
        android:textSize="16sp" />

    <Button
        android:id="@+id/char_str_min"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_margin="0dp"
        android:padding="0dp"
        android:text="-"
        android:textSize="16sp" /> 
```

正如您从图片中看到的那样，按钮没有填充蓝色方块。我不确定为什么。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:13:48.280

不确定这是否可行，但你可以试试这个：

```
android:scaleType="fitEnd" 
```

这就是我在 imagebuttons 上使用的。

# email - 如何防止 hudson 为 cron 作业失败发送多封电子邮件

> ID：14462940
> 
> 赞同：0
> 
> 时间：2013-01-22T16:09:59.527
> 
> 标签：email, cron, hudson, jobs

我在哈德逊有一份监测环境的工作。要求是作业应该定期构建并在环境关闭时发送邮件。但是如果上次运行的作业状态为失败并且已经发送了一封电子邮件，它应该停止发送邮件。如何在 Hudson 中设置此触发器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:11:19.103

首先，如果您还没有这样做，您应该使用**[email-ext](http://wiki.hudson-ci.org/display/HUDSON/Email-ext+plugin)**插件来发送电子邮件。

安装后，在您的构建后操作中，使用`"Editable Email Notification"`.

在那里，单击`"Advanced..."`按钮以设置控制何时（以及向谁）发送电子邮件的触发器。

您至少需要 2 个触发器：`Failure`和`Still Failing`.
当作业第一次失败时将触发“失败”。将电子邮件发送给您想要包括的每个人。如果有后续失败，将触发“Still Failing”。在这种情况下，请不要选中收件人列表（或仅发送给管理员）。

您也可以使用`Fixed`触发器。这将在构建从失败中恢复后发送电子邮件（但不会在后续成功时）

# css - 位置后的DIV：绝对

> ID：14462942
> 
> 赞同：5
> 
> 时间：2013-01-22T16:10:03.053
> 
> 标签：css, css-position

我把`div`with放在with`class="inner-box2"`之后。`div``class="inner-box"`

HTML：

```
 <div class="box">

   <div class="inner-box"></div>

   <div class="inner-box2"></div>

 </div> 
```

CSS：

```
 .box {
     position: relative;
     width: 400px;
     height: 400px;
     border: solid 10px red;
  }

  .inner-box {
    border: solid 10px blue;
    position: absolute;
    height:150px;
    width:380px;

  }
   .inner-box2 {
    border: solid 10px green;
  } 
```

现在，我需要在`div(inner-box2)`之后显示，`div(inner-box)`但在我的代码`div(inner-box2)`中显示在`div(inner-box)`. 如何解决这个问题？见[在线演示](http://jsfiddle.net/BBKING/4bqzz/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:18:11.213

如果您将一个元素放在绝对位置下方，您可以添加一个边距来降低您的下一个元素“跳过”绝对项目的空间和存在所需的距离。这样，在代码中，该项目仍低于您的绝对项目，但仍可视地显示在其下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:13:32.180

绝对定位的物品需要有`top`| `bottom`+ `left`| `right`定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:17:15.913

如果你想在这个例子中使用绝对定位的元素，这将是如何做到的：http: [//jsfiddle.net/4bqzz/106/](http://jsfiddle.net/4bqzz/106/)

```
.box
{
    position: relative;
    width: 400px;
    height: 400px;
    border: solid 10px red;
}
.inner-box
{
    border: solid 10px blue;
    position: absolute; 
    height: 150px;
    width: 380px;
}
.inner-box2
{
    border: solid 10px green;
    position: absolute;
    top: 170px;
    height: 210px;
    width: 380px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:43:42.290

这是你为[http://jsfiddle.net/4bqzz/22/](http://jsfiddle.net/4bqzz/22/)拍摄的吗？我对你的 CSS 做了一些修改，然后将盒子向左浮动。你可以玩弄大小、边框等……但我认为它们很厚只是为了展示它们的位置。像这样：

```
 .inner-box {
      border: solid 5px blue;
      float:left;
      height:150px;
      width:360px;
  }
  .inner-box2 {
      border: solid 5px green;
      float:left;
      height:150px;
      width:20px;
  } 
```

# java - 服务蓝图列表：等待所有服务

> ID：14462944
> 
> 赞同：1
> 
> 时间：2013-01-22T16:10:17.670
> 
> 标签：java, spring, osgi, eclipse-virgo, blueprint-osgi

我正在使用 Eclipse Virgo/Gemini 蓝图，并且有一个具有多种实现的接口：

实施1：

```
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">

<bean id="MyID1"
    class="ImplementationCLass1">
</bean>

<service ref="MyID1"
    interface="MyInterface" /> 
```

实施2：

```
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">

<bean id="MYID2"
    class="ImplementationClass2">
</bean>

<service ref="MYID2"
    interface="MyInterface" /> 
```

实施3：

```
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">

<bean id="MyID3"
    class="ImplementationClass3">
</bean>

<service ref="MyID3"
    interface="MyInterface" /> 
```

还有一个客户：

```
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">

<reference-list id="MyImplementations"
    interface="MyInterface" />

<bean id="clientID" class="ClientClass"
    init-method="startUp">

    <property name="services" ref="MyImplementations"></property>

</bean> 
```

startUp 方法是一个简单的方法，它遍历整个列表并打印出一个简单的字符串（用于测试目的）

问题是如果我安装客户端捆绑包，我的列表中只有两个树服务。如果我停止并再次启动 Bundle，所有三个服务都在我的列表中。

任何想法/建议为什么？

是否可以告诉 virgo 该列表必须包含与 MyInterface 匹配的所有服务？

如果您需要更多信息，请随时询问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:51:09.313

参考列表的内容是动态的，随着匹配服务的出现和消失，项目将被添加和删除。但是您可以实现一个引用侦听器，当列表更改以跟踪可用服务时通知该侦听器。[请参阅此处的讨论和示例](http://www.ibm.com/developerworks/xml/library/os-osgiblueprint/index.html#srms)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T00:22:05.710

该列表**确实**包含所有匹配的服务`MyInterface`......在某个任意时刻。但随后出现了一项新服务。

真的，“所有服务”这个概念是没有意义的。您永远无法真正知道您是否拥有所有服务，因为以后总能有人发布新服务。您可以做的最好的事情是获取*当前*服务的快照，然后随着新服务的出现而动态调整。

# jquery - jQuery 为边界半径内的 div 设置动画。停止边界半径在动画时丢失。小提琴

> ID：14462950
> 
> 赞同：1
> 
> 时间：2013-01-22T16:10:32.343
> 
> 标签：jquery, css

我最初面临这个常见问题......

[stackoverflow.com/css-border-radius-not-trimming-image-on-webkit](https://stackoverflow.com/questions/8705249/css-border-radius-not-trimming-image-on-webkit)

所以我按照上面问题的小提琴解决了这个问题。

* * *

但是后来我想在悬停时在这个标记内设置一个 div 动画，所以我添加了这个 css 和 jquery ......

但是现在当我悬停这个元素时，动画就会发生并且我失去了所有的边界半径！

啊啊啊！为什么会出现这种情况！？？？

看到它在行动中发生[http://jsfiddle.net/USd5s/439/](http://jsfiddle.net/USd5s/439/)

```
<span class="outer">
    <div class="outer">
        <div class="inner">
        </div>
    </div>
</span> 
```

\

```
span.outer{
    position:relative;
    width: 100px;
    height: 100px;
    display: block;
    cursor: pointer;
    float: left;
    margin: 15px
}

div.outer {   
    overflow:hidden;    
    -moz-border-radius: 12px;
    border-radius: 12px;
    -webkit-border-radius: 6px;
}

.inner {
    background:red;
    height:100px;
    width:300px;
    position: relative;
    background: #e6f0a3;
} 
```

\

```
$("span.outer").hover(function() {
    $(this).find('.inner').animate({
        left: '-200px'
    }, 100, function() {
        // Animation complete.
    });
}, function() {
    $(this).find('.inner').animate({
        left: '0'
    }, 100, function() {
        // Animation complete.
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:15:40.727

您忘记为外部 div 添加边框！

```
div.outer {   
    overflow:hidden;    
    -moz-border-radius: 12px;
    border-radius: 12px;
    -webkit-border-radius: 6px;
    border: white 2px solid;
} 
```

我对吗？

**演示：[分叉的小提琴](http://jsfiddle.net/kokoklems/UDUVy/)**

# objective-c - ios：多次使用相同的sqlite参数会导致过早的内存释放

> ID：14462951
> 
> 赞同：1
> 
> 时间：2013-01-22T16:10:36.173
> 
> 标签：objective-c, sql, sqlite, memory-management, automatic-ref-counting

**注意：** 这个问题具有误导性..我*认为*它使用了多个导致内存错误的参数..但这不是原因..原因是 sql 语句格式不正确..请参阅下面[的答案](https://stackoverflow.com/a/14534957/766570)。

如果创建一个多次使用相同参数的sqlite语句，即

```
 NSString* updateStmt = @"INSERT INTO search_email(..., subject, ...)"
    " SELECT ..., :subject, ...,"
    " coalesce((SELECT search_email.threadID "
    " FROM search_email "
    " WHERE search_email.subject MATCH :subject2 "
    " ),"
    " :uid"
    " )";

int subjectIndex = sqlite3_bind_parameter_index(searchEmailInsertStmt,":subject");
int subjectIndex2 = sqlite3_bind_parameter_index(searchEmailInsertStmt,":subject2");

...    
sqlite3_bind_text(searchEmailInsertStmt, subjectIndex, [subject UTF8String], -1, SQLITE_TRANSIENT);        // subject
sqlite3_bind_text(searchEmailInsertStmt, subjectIndex2, [subjectCopy UTF8String], -1, SQLITE_TRANSIENT);        // search_email.subject

if (sqlite3_step(searchEmailInsertStmt) != SQLITE_DONE) {
    NSLog(@"Failed step in searchEmailInsertStmt: '%s', '%i'", sqlite3_errmsg([[AddEmailDBAccessor sharedManager] database]), pk);
} 
```

然后它崩溃并出现以下错误： `malloc: *** error for object 0x9b6350: pointer being freed was not allocated *** set a breakpoint in malloc_error_break to debug`

知道为什么吗？

**更新：** 如果我用字符串常量替换主题和主题复制，即@“subject1”和@“subject2”，它工作得很好..但出于某种原因，我尝试以编程方式复制它，即

```
NSString* subjectCopy = [NSString alloc];
subjectCopy = [subject retain]; 
```

而且这些都不起作用..也将 SQLITE_TRANSIENT 更改为 SQLITE_STATIC 无效。

**更新 2：**在 malloc_error_break 中断后的 bt 输出：

```
thread #6: tid = 0x2503, 0x99a20815 libsystem_c.dylib`malloc_error_break, stop reason = breakpoint 1.1
frame #0: 0x99a20815 libsystem_c.dylib`malloc_error_break
frame #1: 0x99a21d51 libsystem_c.dylib`free + 346
frame #2: 0x0005d5e8 reMail`sqlite3MemFree + 40 at sqlite3.c:12272
frame #3: 0x0002a53e reMail`sqlite3_free + 126 at sqlite3.c:15653
frame #4: 0x0004e670 reMail`sqlite3Fts3ExprFree + 64 at sqlite3.c:101490
frame #5: 0x0004e665 reMail`sqlite3Fts3ExprFree + 53 at sqlite3.c:101489
frame #6: 0x0003fbf1 reMail`fulltextClose + 49 at sqlite3.c:97401
frame #7: 0x000b48f3 reMail`sqlite3VdbeFreeCursor + 163 at sqlite3.c:47461
frame #8: 0x000aebb8 reMail`sqlite3VdbeExec + 17576 at sqlite3.c:54042
frame #9: 0x00032273 reMail`sqlite3Step + 467 at sqlite3.c:49459
frame #10: 0x00031f5e reMail`sqlite3_step + 78 at sqlite3.c:49531
frame #11: 0x000ff2ae reMail`-[EmailProcessor insertIntoSearch:withMetaString:withUid:withSubject:withBody:withFrom:withTo:withCc:withFolder:] + 1854 at EmailProcessor.m:934
frame #12: 0x001005a1 reMail`-[EmailProcessor addEmail:] + 3153 at EmailProcessor.m:1015
frame #13: 0x000fd673 reMail`-[EmailProcessor addEmailWrapper:] + 4035 at EmailProcessor.m:651
frame #14: 0x0324c1bd CoreFoundation`__invoking___ + 29
frame #15: 0x0324c0d6 CoreFoundation`-[NSInvocation invoke] + 342
frame #16: 0x017c36b5 Foundation`-[NSInvocationOperation main] + 45
frame #17: 0x01738d23 Foundation`-[__NSOperationInternal start] + 736
frame #18: 0x01738a34 Foundation`-[NSOperation start] + 79
frame #19: 0x017c5301 Foundation`__block_global_6 + 150
frame #20: 0x02ec053f libdispatch.dylib`_dispatch_call_block_and_release + 15
frame #21: 0x02ed2014 libdispatch.dylib`_dispatch_client_callout + 14
frame #22: 0x02ec32e8 libdispatch.dylib`_dispatch_root_queue_drain + 335
frame #23: 0x02ec3450 libdispatch.dylib`_dispatch_worker_thread2 + 39
frame #24: 0x99a09e12 libsystem_c.dylib`_pthread_wqthread + 441 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:43:49.553

我终于找到了！在追逐了这么多红鲱鱼之后..我得到的最好的建议是[在一个专门针对 sqlite 的论坛上](http://sqlite.1065341.n5.nabble.com/using-the-same-sqlite-parameter-more-than-once-causes-premature-memory-deallocation-td66687.html#a66718)：关键是要让 sqlite 的胆量超出我的调试范围，这极不可能是 sqlite 的错。

我基本上决定将我的 sql 语句分成更小的部分并单独运行：

**导致内存问题的原始sql语句：**

```
 NSString* updateStmt = @"INSERT INTO search_email(docid, meta, subject, body, sender, tos, ccs, folder, threadid)"
    " SELECT ?, ?, ?, ?, ?, ?, ?, ?,"
    " coalesce((SELECT search_email.threadID "
    " FROM search_email "
    " WHERE search_email.subject MATCH ?  UNION SELECT * FROM "
    " (SELECT threadID FROM  (SELECT threadID FROM search_email WHERE search_email.sender MATCH ? "
    " INTERSECT SELECT threadID FROM search_email WHERE search_email.tos MATCH ? ) "
    "  UNION "
    " SELECT threadID FROM (SELECT threadID FROM search_email WHERE search_email.sender MATCH ? "
    "       INTERSECT SELECT threadID FROM search_email WHERE search_email.tos MATCH ?)) "
    " LIMIT 1"
    " ),"
    " ?"
    " )"; 
```

每当我提供带有特殊字符的字符串进行匹配时，就会出现问题。以下是发送到 MATCH 的有问题参数的示例：

*sabaho :) 2
月 1 日的新核心音频问题 - 堆栈内存溢出
伊利诺伊州芝加哥的以数据为中心的测试/ETL 测试员机会。*

所以要解决这个问题，我只是用普通`=`比较替换了 MATCH .. 但首先使用正则表达式清理了参数：

```
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"re:(\\s)*"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error];

                            error:&error];

NSString *filteredSubjectFromRe = [regex stringByReplacingMatchesInString:subject
                                                                  options:0
                                                                    range:NSMakeRange(0, [subject length])
                                                             withTemplate:@""];

if(searchEmailInsertStmt == nil) {

    NSString* updateStmt = @"INSERT INTO search_email(docid, meta, subject, body, sender, tos, ccs, folder, threadid)"
    " SELECT ?, ?, ?, ?, ?, ?, ?, ?,"
    " coalesce((SELECT search_email.threadID "
    " FROM search_email "
    " WHERE search_email.subject = ? UNION SELECT * FROM "
    " (SELECT threadID FROM  (SELECT threadID FROM search_email WHERE search_email.sender = ? "
    " INTERSECT SELECT threadID FROM search_email WHERE search_email.tos = ? ) "
    "  UNION "
    " SELECT threadID FROM (SELECT threadID FROM search_email WHERE search_email.sender = ? "
    "       INTERSECT SELECT threadID FROM search_email WHERE search_email.tos = ?)) "
    " LIMIT 1"
    " ),"
    " ?"
    " )"; 
```

# ms-access - Access 用 ODBC 链接表替换本地表，保留原始名称引用

> ID：14462954
> 
> 赞同：5
> 
> 时间：2013-01-22T16:10:45.453
> 
> 标签：ms-access, replace, odbc, table-relationships, linked-tables

我正在尝试用来自 ODBC 数据源的链接表替换我的 Access DB 中的所有本地表。我能够导入以“xyz_table”形式出现的新表。我想用“xyz_table”替换旧的本地“table”。但是，当我删除“表”或重命名“xyz_table”以替换“表”时，它会删除原始本地“表”的所有关系/对象依赖项。（查询、表格、报告等）

无论如何，是否可以将原始本地“表”中的关系/对象依赖关系保存/应用到新的 ODBC 链接“xyz_table”。我不想手动完成并尝试重新链接所有关系/对象依赖项。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T16:16:59.677

Access 无法强制链接表的参照完整性，并且不允许您创建此类关系。在作为链接表源的数据库中创建关系。

要在从本地表更改为远程表时处理对象依赖关系，请将旧表重命名为其他表，并为链接表提供原始表名。

例如，如果我有一个基于名为“tblFoo”的本机 Access 表的查询。我会将“tblFoo”重命名为“tblFoo_old”。然后将替换的 ODBC 链接表命名为“tblFoo”。理想情况下，即使“tblFoo”现在是链接而不是本地表，查询仍然可以正常工作。

相同的技术适用于表单和报告中引用的表格。

当心访问选项，跟踪名称自动更正。当您重命名原始表时，它可能会更新依赖对象。关闭该选项，以免干扰。

# php - PHP 的 DateTime 类是否从 SQL 注入中转义日期

> ID：14462958
> 
> 赞同：7
> 
> 时间：2013-01-22T16:11:05.753
> 
> 标签：php

通常，我使用 PDO 的预处理语句、类型转换为 (int) 或 PDO::quote() 来防止 SQL 注入。对于此应用程序，我需要先使用 PHP 修改日期，然后再将其添加到查询中。我是否需要采取额外的措施来防止 SQL 注入，或者我是否安全？谢谢

```
$date = new DateTime($_GET['suspect_user_provided_date']);
$date->add(new DateInterval('P1D'));
$sql='SELECT * FROM table WHERE date<"'.$date->format('Y-m-d').'"'; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T16:16:54.650

DateTime 对象是否安全并不重要。您应该转义传递给查询的数据，而不是依赖所提供库的安全性。如果您更改实现，则无需关心新实现是否安全。你应该总是逃避。否则，您将尝试回答 - 并记住 - 对于每个函数 - SQL 是否安全？对于 HTML？对于 CSV？对于 http / 邮件标头？因为……不要！发送查询的代码行应该对 DateTime 实现以及它是否安全一无所知

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:14:37.203

构造`DateTime`函数将解析参数并尝试将其设为日期。

如果不能，则返回*false*（实际上从 PHP 5.3 开始抛出异常）。

这意味着您是安全的，因为 SQL 注入会尝试用引号“欺骗”SQL 查询字符串，同时`new DateTime`返回`DateTime`实例或*false*（引发异常）。
但是您无论如何都可以处理错误情况（来自 PHP 5.3）

```
try {
  $date = new DateTime($_GET['suspect_user_provided_date']);
}
catch (Exception $e) {
  echo "Error";
  exit;
}

$date->add(new DateInterval('P1D'));
$sql='SELECT * FROM table WHERE date<"'.$date->format('Y-m-d').'"'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T16:25:31.533

这是一个很好的问题：PHP 日期格式化程序对 SQL 注入安全吗？

我想起点是格式是否按照您的示例进行了硬编码。日期格式字符串允许在格式化日期中包含原始字符，其中可能包含不安全的字符，因此如果您使用格式字符串的变量，那么答案肯定是不，它不安全。

如果您使用的是硬编码格式，就像您给出的示例一样，那么这是一个更困难的问题，但归结为“输出`DateTime::format`是否会偏离所需的格式？”

答案是可以——`false`如果失败，它可以输出。这不会破坏您的 SQL，但可能会给您带来意想不到的结果。

从理论上讲，这应该是最糟糕的。

但是，您应该考虑防御性。没有什么可说的，在 DateTime 类中找不到一个微妙的错误，导致它输出格式错误的日期。通常，这种错误不会被视为安全问题；这只会令人烦恼。特别是在正常使用中难以复制的情况下。但结合直接将其传递给 SQL，它很容易成为一个安全问题。

课程是*防御性编程*：清理一切。即使你确定它是安全的。不要假设您的语言或框架词不包含错误。防御性编程意味着在每个级别上都是安全的，因此程序中或您无法控制的意外错误不会让您的代码容易受到攻击。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T16:13:44.297

您发布的示例是安全的。但是为什么不使用准备好的语句呢？像这样：

```
 $pdo = new PDO($dsn, $user, $pass, $options = array (
        PDO::ATTR_ERRMODE,  PDO::ERRMODE_EXCEPTION
     ));

     $date = new DateTime($_GET['suspect_user_provided_date']);
     $date->add(new DateInterval('P1D'));

     $sql='
     SELECT
        * 
     FROM table 
     WHERE date < :dt';

     $stmt = $pdo->prepare($sql);
     $params = array (
        'dt' => $date->format('Y-m-d')
     );
     try {
         $res = $pdo->execute($params);
     } catch (PDOException $e) {
         echo $e->getMessage();
     } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T16:17:07.703

谈到 SQL，通常最好不要考虑什么是安全的，什么不是。只需使用准备好的语句来处理它：

```
$stmt = $db->prepare('SELECT * FROM table WHERE `date` < :now');
$stmt->execute(array(
    ':now' => $date->format('Y-m-d'),
)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T16:27:23.427

取决于日期的输出格式。如果您要更改格式并将其输出一些文本（例如当前语言环境中的月份或日期名称），则可能会导致不安全（或至少失败）查询，因为它可能包含一些引号。或者您可以出于某种原因自己加上引号。所以是的，不要怀疑和使用`pdo->quote()`或者更好的是，准备好的陈述。

```
// safe
$date = new DateTime($_GET['suspect_user_provided_date']);
$date->add(new DateInterval('P1D'));
$sql='SELECT * FROM table WHERE date<"'.$date->format('Y-m-d').'"';

// failing
$date = new DateTime($_GET['suspect_user_provided_date']);
$date->add(new DateInterval('P1D'));
$sql='SELECT * FROM table WHERE date<"'.$date->format('\O\"\h\a\i \t\o\d\a\y \i\s Y-m-D').'"';

// not failing, whatever format you are using, using pdo::quote
$date = new DateTime($_GET['suspect_user_provided_date']);
$date->add(new DateInterval('P1D'));
$sql='SELECT * FROM table WHERE date<'.$dbh->quote($date->format('\O\"\h\a\i \t\o\d\a\y \i\s Y-m-D'));

// not failing, whatever format you are using, using prepared statments
$stmt = $dbh->prepare('SELECT * FROM table WHERE date < :date');
$date = new DateTime($_GET['suspect_user_provided_date']);
$date->add(new DateInterval('P1D'));
$stmt->bindValue(':date', $date->format('\O\"\h\a\i \t\o\d\a\y \i\s Y-m-D'), PDO::PARAM_STR);
$stmt->execute(); 
```

# jruby - 莺似乎使用不同的 ffi 不理解 size_t

> ID：14462959
> 
> 赞同：4
> 
> 时间：2013-01-22T16:11:05.983
> 
> 标签：jruby, jrubyonrails, ffi, warbler

FFI`:size_t`在通过 jRuby 运行 rails 时可以理解，但在使用 Warbler 创建 .war 文件并使用`java -jar my_project.war`Tomcat 运行该文件后则不理解。

```
 Linux | Windows
-----------------------------+-------------
java -jar              works | doesn't work
tomcat                 works | doesn't work
rails s (using jruby)  works | works 
```

Linux 和 Windows 在比较中使用相同的 war 文件。

`java -jar`这是在 Windows 上运行的回溯的顶部。（我在回溯中编辑了文件路径的开头）。

```
--- Backtrace
TypeError: unable to resolve type 'size_t'
  find_type at jar:file:/my_project.war/WEB-INF/lib/jruby-stdlib-1.7.2.jar!/META-INF/jruby.home/lib/ruby/shared/ffi/types.rb:55
  type_size at jar:file:/my_project.war/WEB-INF/lib/jruby-stdlib-1.7.2.jar!/META-INF/jruby.home/lib/ruby/shared/ffi/types.rb:147
SQLAnywhere at my_project.war/WEB-INF/gems/gems/sqlanywhere-ffi-1.0.1/lib/sqlanywhere.rb:13
     (root) at my_project.war/WEB-INF/gems/gems/sqlanywhere-ffi-1.0.1/lib/sqlanywhere.rb:5
    require at org/jruby/RubyKernel.java:1027 
```

当我查看回溯中的文件时，它们列出了各种 c 类型，但没有列出`size_t`.

在我看来，jRuby 有 2 个 FFI 可用。

*   普通的[FFI 宝石](https://github.com/ffi/ffi)。
*   jruby-stdlib ffi。

两者最大的区别，似乎只有前者懂`:size_t`。

我的问题是：是否有 2 种不同的 FFI？如果是这样：我如何确保我的 gem 加载正确的 ffi？如果不是：我做错了什么？

PS：我是 sqlanywhere-ffi gem 的作者，所以如果问题是我依赖于错误的东西，我可以更改它。目前它在 gemspec、gemfile 和`requires 'ffi'`主入口点中具有 ffi 作为依赖项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-26T13:53:27.567

> （我在回溯中编辑了文件路径的开头）。

我猜您的 Tomcat 目录的完整路径包含空格，请确保它不包含空格。

jruby-1.6 版本没有出现这个问题。

# visual-studio-2010 - Web API 中未序列化的只读模型属性

> ID：14462960
> 
> 赞同：6
> 
> 时间：2013-01-22T16:11:13.607
> 
> 标签：visual-studio-2010, asp.net-mvc-4, asp.net-web-api

根据标题，我看到我的只读模型属性没有在我的 Web API 项目中序列化。MVC 4 Web API，VS2010。

我看过很多类似[这个 stackoverflow question](https://stackoverflow.com/questions/9381090/asp-net-web-api-not-serializing-readonly-property)的帖子，其中指出 MVC 4 Web API **beta**不支持只读属性的 JSON 序列化。但许多其他参考资料表明最终版本使用 JSON.NET 而不是 DataContractJsonSerializer，因此应该解决该问题。

这个问题是否已解决？如果不是，我是否被迫放入假二传手只是为了获得序列化？

* * *

更正，它似乎**确实**适用于 JSON（对不起！），但 XML 会出现问题。与以前相同的问题，但在 XML 序列化的上下文中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T16:17:35.180

默认的 JSON 序列化程序现在是 Json.NET。因此，只读属性序列化应该可以工作，而您根本不需要做任何事情。

对于 XML，在 4.5 中，我们将此标志添加到 DataContractSerializer：

[http://msdn.microsoft.com/en-us/library/vstudio/system.runtime.serialization.datacontractserializersettings.serializereadonlytypes.aspx](http://msdn.microsoft.com/en-us/library/vstudio/system.runtime.serialization.datacontractserializersettings.serializereadonlytypes.aspx)

您应该能够编写如下内容：

```
config.Formatters.XmlFormatter.SetSerializer(myType, new DataContractSerializer(myType, new DataContractSerializerSettings() { SerializeReadOnlyTypes = true }); 
```

将此代码`GlobalConfiguration.Configure`放在`Application_Start`. 默认情况下，这将是`WebApiConfig.Register()`.

# mongodb - Meteor - MongoDB 错误：无法将 $addToSet 修饰符应用于非数组

> ID：14462962
> 
> 赞同：3
> 
> 时间：2013-01-22T16:11:17.193
> 
> 标签：mongodb, meteor

我正在关注Isaac Strack最近出版的《 [Meteor.js JavaScript 框架入门》一书。](http://amzn.com/1782160825)这本书适用于 Meteor 0.5.0。我正在使用 0.5.4 版。

在本书中，您构建了一个应用程序，其中包含几个类别，您可以在其中插入数据以跟踪家居用品，以及它们可能被借给谁。我将应用程序部署到了[流星子域](http://lendlib.meteor.com/)，并且运行良好。它不会复制我的本地 MongoDB 错误。

![借阅库](../Images/2a1a3a988f5d2ab0b6d575f7cab0225f.png)

我在第 5 章，我刚刚从应用程序中删除了自动发布，并指定了我的本地数据通道。

在本地，仅在“工具”类别下，当我尝试向该类别添加新项目时，我在浏览器控制台中收到此错误：

```
Exception while simulating the effect of invoking '/Lists/update' Error {} Error: Cannot apply $addToSet modifier to non-array
    at Error (<anonymous>)
    at LocalCollection._modifiers.$addToSet (http://localhost:3000/packages/minimongo/modify.js?e7f02f0df0bff9f0b97236f9548637b7ede1ac74:178:13)
    at Function.LocalCollection._modify (http://localhost:3000/packages/minimongo/modify.js?e7f02f0df0bff9f0b97236f9548637b7ede1ac74:53:9)
    at LocalCollection._modifyAndNotify (http://localhost:3000/packages/minimongo/minimongo.js?7f5131f0f3d86c8269a6e6db0e2467e28eff6422:474:19)
    at LocalCollection.update (http://localhost:3000/packages/minimongo/minimongo.js?7f5131f0f3d86c8269a6e6db0e2467e28eff6422:444:12)
    at m.(anonymous function) (http://localhost:3000/packages/mongo-livedata/collection.js?3ef9efcb8726ddf54f58384b2d8f226aaec8fd53:415:36)
    at http://localhost:3000/packages/livedata/livedata_connection.js?367884963b120d457819216ff713b2586b266dde:540:25
    at _.extend.withValue (http://localhost:3000/packages/meteor/dynamics_browser.js?46b8d1f1158040fcc2beb7906ec2f932871a398d:21:19)
    at _.extend.apply (http://localhost:3000/packages/livedata/livedata_connection.js?367884963b120d457819216ff713b2586b266dde:539:47)
    at Meteor.Collection.(anonymous function) [as update] (http://localhost:3000/packages/mongo-livedata/collection.js?3ef9efcb8726ddf54f58384b2d8f226aaec8fd53:266:23) logging.js:30
update failed: Internal server error logging.js:30 
```

工具类别中已经有一项已在本教程前面提交。如果我在控制台`lists.findOne({Category:"Tools"});`中输入，我会得到识别对象中项目的输出：

```
Object
  Category: "Tools"
  _id: "eaa681e1-83f2-49f2-a42b-c6d84e526270"
    items: Object
      LentTo: "Steve"
      Name: "Linear Compression Wrench"
      Owner: "me"
      __proto__: Object
  __proto__: Object 
```

但是，屏幕输出为空白：

![在此处输入图像描述](../Images/564bb656e9e024945b650ff940397850.png)

自然，我尝试重新启动流星服务器并关闭浏览器，但没有解决方案。我是 MongoDB 的新手，所以我不清楚在哪里可以理解是什么导致了这个问题，或者为什么。

您可以[在此处查看该应用程序](http://lendlib.meteor.com/)。[你可以在我的GitHub 上](https://github.com/stat30fbliss/LendLib)查看代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T16:57:36.920

```
function addItem(list_id, item_name) {
    if(!item_name && !list_id)
      return;
    lists.update({_id:list_id}, {$addToSet:{items:{Name:item_name}}});
  } 
```

似乎您正在尝试将对象添加到集合中。您在模拟时遇到错误。让我们调查那个错误。出错的代码：

[https://github.com/meteor/meteor/blob/master/packages/minimongo/modify.js](https://github.com/meteor/meteor/blob/master/packages/minimongo/modify.js)

```
 $addToSet: function (target, field, arg) {
    var x = target[field];
    if (x === undefined)
      target[field] = [arg];
    else if (!(x instanceof Array))
      throw Error("Cannot apply $addToSet modifier to non-array");
    else { ... 
```

哦哦，`throw Error("Cannot apply $addToSet modifier to non-array.")`。

看看你的代码：

```
Object
  Category: "Tools"
  _id: "eaa681e1-83f2-49f2-a42b-c6d84e526270"
...
  items: Object
... 
```

`items`是一个对象，而不是一个数组！它会出错。

你`$addToSet`能用 Mongo 做一个对象吗？让我们看一下代码。

[https://github.com/mongodb/mongo/blob/4a4f9b1d6dc79d1ba4a7d7eaa9e4eb6d00aa466c/db/update.cpp](https://github.com/mongodb/mongo/blob/4a4f9b1d6dc79d1ba4a7d7eaa9e4eb6d00aa466c/db/update.cpp)

```
 case ADDTOSET: {
            uassert( 12592 ,  "$addToSet can only be applied to an array" , in.type() == Array );
            ...
        } 
```

没有！这是来自旧的 Mongo 代码，因为当代的代码库是庞大的，但同样的事情。

我只`insert`在你的代码中找到了一个。

```
'keyup #add-category': function(e, t) {
  if (e.which === 13) {
    var catVal = String(e.target.value || "");
    if (catVal) {
      lists.insert({Category:catVal});
      Session.set('adding_category', false);
    }
  }
}, 
```

试试`lists.insert({Category:catVal,items:[]})`。因此，项目在第一次使用时被初始化为数组而不是对象。

另外，我认为`$addToSet`无论如何都不会以您想要的方式比较数组中的对象，因此请考虑制作一个`Items`包含`categoryId`.

它在一个地方而不是另一个地方工作纯属巧合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:38:46.300

按照相同的指南，我遇到了同样的问题。当直接使用指南（工具和 DVD）中的插入时，minimongo 将项目插入为对象而不是数组。我不知道这是否只是一个错误，或者代码库是否已更改，无论哪种方式我都更改了：

```
lists.insert({Category:"DVDs", items: {Name:"Mission Impossible", Owner:"me", LentTo:"Alice"}}); 
```

至

```
lists.insert({Category:"DVDs", items: [{Name:"Mission Impossible", Owner:"me",LentTo:"Alice"}]}); 
```

只是将项目封装在 [] 中以强制将其放入数组中，并且对工具的插入也是如此。现在效果很好。

# html - XCode，iOS：使用 hpple 解析 HTML 编码

> ID：14462964
> 
> 赞同：0
> 
> 时间：2013-01-22T16:11:17.470
> 
> 标签：html, ios, xcode, parsing, hpple

在 XCode 中使用 hpple 解析网页时出现编码问题。

```
- (void)loadTutorials {

NSURL *tutorialsUrl = [NSURL URLWithString:@"http://qrz.si/members/s55db/"];
NSData *tutorialsHtmlData = [NSData dataWithContentsOfURL:tutorialsUrl options:NSASCIIStringEncoding error:nil];

TFHpple *tutorialsParser = [TFHpple hppleWithHTMLData:tutorialsHtmlData];

NSString *tutorialsXpathQueryString = @"//td[@class='data']";
NSArray *tutorialsNodes = [tutorialsParsersearchWithXPathQuery:tutorialsXpathQueryString];

NSMutableArray *newTutorials = [[NSMutableArray alloc] initWithCapacity:0];
for (TFHppleElement *element in tutorialsNodes) {
    Tutorial *tutorial = [[Tutorial alloc] init];
    [newTutorials addObject:tutorial];

    for (TFHppleElement *child in element.children) {
        if ([child.tagName isEqualToString:@"img"]) {
           // NSLog([child objectForKey:@"src"]);
        } else if ([child.tagName isEqualToString:@"p"]) {
            //NSLog([[child firstChild] content]);
            tutorial.title = [[child firstChild] content];
        }
    }
}

_objects = newTutorials;
[self.tableView reloadData];
} 
```

正如消息来源所指出的那样，页面应该是 UTF-8，但我得到了奇怪的字符。

如何强制更改数据的编码？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:32:31.020

```
options:NSASCIIStringEncoding 
```

在这里没用，文档指出这不是正确的方法。

要设置编码，必须编辑 Matt Gallagher 的 XPathQuery.m，我在同一个教程中获得了该文件。更改是可见的，但没有任何效果，因为该站点显然是 UTF-8 编码的。

问题出在服务器端，管理员为我提供了很好的老式纯 XML :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:14:56.243

您告诉`NSData`对象您正在加载的 URL 的内容是 ASCII 而不是 UTF8：

```
NSData *tutorialsHtmlData = [NSData dataWithContentsOfURL:tutorialsUrl options:NSASCIIStringEncoding error:nil]; 
```

应该是哪个

```
NSData *tutorialsHtmlData = [NSData dataWithContentsOfURL:tutorialsUrl options:NSUTF8StringEncoding error:nil]; 
```

# algorithm - 资源分配-匹配

> ID：14462976
> 
> 赞同：2
> 
> 时间：2013-01-22T16:11:56.367
> 
> 标签：algorithm, linear-programming

我有一个问题，我不确定是否可以通过线性规划解决。本质上，有两组人列出了他们对彼此的偏好，随后将进行匹配。我正在为此编写一个算法。A组从B组中最多有4个选择，反之亦然。

在制定解决方案时，我目前正在为每个配对组合分配成本。例如，如果来自 A 组的人 1 将来自 B 组的人 3 列为他/她的第一选择，反之亦然，那么成本是最小的（对 1-3 成本：0.01）。同样，我会为其他配对分配成本，设计一个目标函数，以使配对最小化总成本。

但是，我不认为这是可行的，因为我不知道如何定义我的约束和整体目标函数。在线阅读和阅读教科书，我发现资源分配问题与我正在尝试做的事情不同。

我可以就如何进行寻求您的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:17:17.567

您的问题可以表述为**“[分配问题](http://en.wikipedia.org/wiki/Assignment_problem)”。**作为典型案例，分配问题是将“工作”分配给“机器”。它们可以很容易地用于匹配两组。

这是公式：两组人 ​​A 和 B

**决策变量 Xij**

`Xij`如果人i （集合 A 中的第 i 个人）与集合 B 中的第 j 个人匹配，则为**1 ；****0**否则

参数：设人与人`Cij`配对的成本`i``j`

**目标函数**：最小化（总和超过 i）（总和超过 j）`Cij * Xij`

**约束：**

每个人 i 只配对一次

`Sum over j Xij = 1 (for each i)`

每个人 j 只配对一次

`Sum over i Xij = 1 (for each j)`

Xij 是二进制变量

`Xij = (0,1)`

分配问题的巧妙之处在于，可以使用相当容易理解[的“匈牙利方法”找到最佳配对。](http://en.wikipedia.org/wiki/Hungarian_algorithm)您还可以使用您可以使用的 LP/IP 求解器。

希望有帮助。

# c#-4.0 - C#类可以自动管理非托管资源吗

> ID：14462979
> 
> 赞同：0
> 
> 时间：2013-01-22T16:12:06.690
> 
> 标签：c#-4.0, unmanaged, managed, finalizer

我正在包装一些具有一些手动资源处理的本机代码。我希望我的 C# 包装器在不将责任转嫁给客户的情况下处理此问题。这是可能的，还是我不可避免地必须实现 IDisposable 并将责任转嫁给客户端代码？

即是否可以编写自动处理托管资源的类？

如果我说这些资源的确定性处理不是问题，我只关心它们被安全释放怎么办？我很高兴让 GC 通过终结器安排他们的发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:35:32.523

这显然是终结器的设计目的。写一个来释放非托管资源，CLR会在对象被垃圾回收后自动调用它。您当然可以实现 IDisposable 以使其尽早发布，但这不是必需的。如果资源分配没有影响，可以跳过。您描述的类型与 COM 对象的类型相匹配。谁的 .NET 包装器也没有实现 IDisposable。

密切注意程序的基本资源使用情况，以确保这不是问题。如果您对正在使用的实际资源不够了解，可能很难判断。

# php - 使用 PDO 向查询提交值数组

> ID：14462980
> 
> 赞同：0
> 
> 时间：2013-01-22T16:12:09.060
> 
> 标签：php, sql, postgresql, pdo

我注意到这两种使用 PHP PDO 构建查询的方式都返回相同的数据。

```
//prepare with $dbh->prepare
$w_ft = "36"; 
$sth = $dbh->prepare("SELECT * FROM main_products_common_dimensions WHERE w_ft = :w_ft");
$sth->bindParam(':w_ft', $theId, PDO::PARAM_INT);
$sth->execute();
$result = $sth->fetchAll(); //PHP array of data

//prepare with pg_prepare()
$result = pg_prepare($con, "my_query", 'SELECT * FROM main_products_common_dimensions WHERE w_ft = $1');
$result = pg_execute($con, "my_query", array("48")); //A query result resource on success or FALSE on failure.
while ($row = pg_fetch_assoc($result)){
    echo $row['w_ft'] . "<BR>"; 
} 
```

[我在http://php.net/manual/en/function.pg-execute.php](http://php.net/manual/en/function.pg-execute.php)读到第二种方式返回“成功时的查询结果资源或失败时的 FALSE”。所以我尝试用 pg_fetch_assoc() 遍历它。它可以工作，但是它没有与其他`pg_`sql 函数一起被弃用吗？我应该在 PDO 中使用某些东西来查看查询结果吗？

出于这个原因，我倾向于在使用 PDO 时使用第一种方法。这是常态吗？

我的问题是如何向任一方法提交多个值。当我尝试将数组提交到准备好的语句时，这两种方法都不起作用

```
$w_ft = array("48", "36"); 

$result = pg_execute($con, "my_query", array("48", "36")); 
```

我认为我能够以这种方式向查询提交多个值。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:24:50.653

看起来你正在错误地执行数组。它不为随后的执行取值，而只为一次执行取值。
因此，值的数量应该等于占位符的数量。
所以它去

```
$sql = 'SELECT * FROM table WHERE w_ft = $1 OR w_ft = $2 OR w_ft = $3' 
```

为您`array("48", "36", "12")`

虽然我不是 PG 用户，所以我可能会混淆一些语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:55:30.620

PDO 是 PHP 的不可知数据库访问 API。这意味着，无论您的数据库是什么，您都可以使用相同的对象和方法来查询它并获取结果。PDO 是 PHP 向数据库抽象层迈出的第一步。

pg_* API，afaik，不会被弃用，专用于 Postgres。它还包含未在 PDO 中实现的功能（例如二进制转义或事件通知功能等）。

PDO 和专用库之间的选择通常被您在控制器代码中使用的模型管理器的选择所隐藏。它可以是像 ORM（Doctrine、Propel 和许多其他）这样的抽象层上的对象关系映射器，也可以是像 Pomm 这样专用于 Postgresql 的对象模型管理器（OMM）。

在这两种方式中，您都不需要准备语句、管理列类型或结果游标（顺便说一句，使用`PDO::fetch_all()`会将所有结果转储到内存中），数据库层会为您处理这些。你上面的查询会写成这样：

```
// Using Pomm
// SELECT * FROM main_products_common_dimensions WHERE w_ft = ?
// Returns a MainProductsCommonDimensions instance

$object = $connection
    ->getMapFor('\Database\Schema\MainProductsCommonDimensions')
    ->findWhere('w_ft = ?', array(48))
    ->current(); // fetch only the first result. 
```

请注意，ORM 和 OMM 都提出了方便的查询构建器：

```
$where = \Pomm\Query\Where::createWhere('w_ft = ?', array(48))
    ->orWhere('w_ft = ?', array(12))
    ->orWhere('w_ft = ?', array(66));

// which is pretty much the same as
$where = \Pomm\Query\Where::createIn('w_ft', array(48, 12, 66));

// SELECT * FROM main_products_common_dimensions WHERE w_ft IN (?, ?, ?);
$collection = $connection
    ->getMapFor('\Database\Schema\MainProductsCommonDimensions')
    ->findWhere($where); // Return an Iterable cursor over results

// display 48, 12 and 66 fetching one result at the time in memory:
foreach($collection as $object)
{
    printf("W_FT = '%d'.\n", $object['w_ft']);
} 
```

使用 PDO 之上的这些层提供了许多优势，主要是更多地关注您想要的而不是处理奇怪的 API（是的，PDO 与 PHP 中的几乎所有库一样奇怪）。此外，由于 PDO 只是一个访问层，它会将结果作为字符串数组（二进制或非二进制）返回。Postgres 中的布尔值是“t”和“f”，因此需要转换为 PHP 正确的布尔（原文如此）类型才能使用。ORMs 和 OMMs 确实提出了这样的翻译机制，并且 Pomm 作为 Postgres 专用也支持 Arrays、HStore、LTree、几何和复合类型转换等等。

# opends - 使用 OpenDS 进行 SMTP 帐户状态通知时，如何在通知中包含用户名？

> ID：14462981
> 
> 赞同：0
> 
> 时间：2013-01-22T16:12:20.920
> 
> 标签：opends

我们正在使用 OpenDS for SMTP 帐户状态通知来通知用户密码即将到期时。当密码即将到期时，SMTP 帐户状态通知处理程序可以很好地通知用户和服务器管理员列表，但我们无法找到在电子邮件中包含客户姓名的方法。

通知处理程序可以提取客户的电子邮件地址并参考密码策略以正确识别待处理的密码到期，那么为什么不在电子邮件中通过姓名识别客户呢？所有这些信息都是可用的，那么如何设置一个变量来提取和使用这些客户信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:10:03.777

通知处理程序非常强大，但肯定记录不足。可以通过电子邮件中的邮件识别用户。我查看了 OpenDJ（OpenDS 积极开发的分支，[http](http://opendj.forgerock.org) ://opendj.forgerock.org）的代码，您可以从模板中的用户条目中引用任何属性。

更具体地说，对于用户的邮件属性，您应该在模板中使用此属性（模板在 config/message/ 目录下）：%%notification-user-attr:mail%%

我没有测试过，但它应该可以工作。我希望这有帮助。

卢多维奇·普瓦图

PS：我们的技术作者告诉我，可以在模板消息中使用的所有令牌实际上都记录为 OpenDJ 管理指南的一部分：http: [//opendj.forgerock.org/doc/admin-guide/index .html#account-status-notification](http://opendj.forgerock.org/doc/admin-guide/index.html#account-status-notification)

# java - GWT flextable 为每列设置不同的宽度

> ID：14462983
> 
> 赞同：1
> 
> 时间：2013-01-22T16:12:22.867
> 
> 标签：java, gwt, flextable

大家好 是否可以为 flextable 中的每一列设置不同的宽度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T18:17:57.023

HTMLTable.ColumnFormatter 将帮助您为 FlexTable 的列设置单独的宽度。要获取格式化程序实例，请调用[`getColumnFormatter()`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/HTMLTable.html#getColumnFormatter%28%29).

如果您使用外部 CSS 样式表，则使用格式化程序的[`setStyleName()`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/HTMLTable.ColumnFormatter.html#setStyleName%28int,%20java.lang.String%29)方法可以让您为每列分配样式名称。设置样式名称后，为其分配 CSS`width`规则。

如果您以编程方式设置宽度，[`setWidth()`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/HTMLTable.ColumnFormatter.html#setWidth%28int,%20java.lang.String%29)格式化程序的方法将允许您在 GWT 代码中分配列宽（向 Thomas Broyer 致敬）。

# android - OpenGL ES 2.0：是否有解决顶点着色器中缺少纹理访问的方法？

> ID：14462984
> 
> 赞同：6
> 
> 时间：2013-01-22T16:12:29.243
> 
> 标签：android, opengl-es-2.0, texture2d, vertex-shader

我目前正在尝试一些带有 Android 的 OpenGL ES 2.0 游戏。我的地图是一个二维网格地图，每个位置都有一个高度值。现在我想将每个坐标的高度存储在纹理中，以便在顶点着色器中进行高度查找。

这个想法的好处是我可以生成一个通用三角形网并将其（带有偏移）放置在用户当前正在查看的地图的位置上。由于偏移，我可以省略每次用户移动其视图位置和我将从纹理中读取的高度轮廓时创建一个新三角形网的需要。

现在存在的问题是许多当前的 Android 设备（甚至是 Galaxy S3）不支持顶点着色器中的纹理查找。可悲的是，这完全破坏了我目前的做法。

我的问题：是否有任何其他可能从顶点着色器中的显卡内存中获取数据？如果不直接指定每个顶点的数据，那么每次用户更改视图位置时，会迫使我（据我所知）重新创建高度图。（每次用户更改视图位置时创建高度图会很慢......）

谢谢你的帮助+最好的问候，

安德烈亚斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:57:38.750

`texture2DLod()`函数旨在用于在顶点着色器中进行纹理查找。

请参阅 [GLSL ES 规范](http://www.khronos.org/files/opengles_shading_language.pdf)的第*8.7 节纹理查找函数*。

根据*安迪*`GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS`的评论，使用前不要忘记检查`texture2DLod()`。如果不支持顶点纹理查找，您应该回退到另一个没有此功能的着色器。

# c# - 从日期列表创建日期范围

> ID：14462985
> 
> 赞同：2
> 
> 时间：2013-01-22T16:12:32.743
> 
> 标签：c#

我正在尝试从日期列表中创建一组日期范围。

这些日期存在于我的对象中。基本上我会遍历每一行并继续迭代，当时间跨度差异大于 5 分钟时，我将停止并将端点用作日期范围。我在下面有一个算法，但问题是它排除了许多数据行：

请参阅下面的示例数据和所需的输出

```
**Sample Data**

  Start_Date   Start_Date_Time    Replicate
    12.12.2012   8:22:58            10
    12.12.2012   8:22:58            30
    12.12.2012   8:22:58            31
    12.12.2012   8:22:58            32
    12.12.2012   8:22:58            33
    12.12.2012   8:22:58            34 
    12.14.2012   9:49:27            54
    12.14.2012   9:49:27            55
    12.14.2012   9:49:27            78
    12.14.2012   9:49:27            99
    12.14.2012   9:58               120
    12.14.2012   9:58               140
    12.14.2012   9:58               142
    12/12/2012   9:59               144
    12/12/2012   9:59               146
    12/12/2012   9:59               148
    12/12/2012   9:59               150

**Desired Output**
Date Ranges
8:22:58-8:22:58   Replicate10-34
9:49:27-9:49:27   Replicate54-99
9:58-9:59         Replicate120-150 
```

我的代码给了我结果，但它排除了许多行：

```
lf.ReplicateBlocks.OrderBy(x => x.InitiationDate); 
```

上面的initiationDate 是StartDate 和Start Time。我已按升序对上面的列表进行排序，从最小日期/时间开始：

```
 DateTime minimumDateTime = DateTime.MinValue;

 foreach (RunLog.Domain.Entities.ReplicateBlock rb in lf.ReplicateBlocks)
 {
   TimeSpan intervalMinutes = rb.InitiationDate.Subtract(minimumDateTime);

   if (intervalMinutes.TotalMinutes >= 5)
   {
     minimumDateTime = rb.InitiationDate;

     //minDates.Add(minimumDateTime);

     UserConfirmationErrors confirmationRun = new UserConfirmationErrors();
     confirmationRun.minDate = rb.InitiationDate;
     confirmationRun.replicateID = rb.ReplicateId;

     uc.userConfirmationList.Add(confirmationRun);
   }
 }

 List<RunLog.Domain.Entities.RunLogEntryDatesDisplay> reDisplay = new List<Domain.Entities.RunLogEntryDatesDisplay>();

 foreach (var minDate in uc.userConfirmationList)
 {
   RunLog.Domain.Entities.RunLogEntryDatesDisplay red = new Domain.Entities.RunLogEntryDatesDisplay();
   reDisplay.Add(new Domain.Entities.RunLogEntryDatesDisplay() { runDate = minDate.minDate, DateRange = string.Format("{0} - {1}", minDate.minDate, minDate.minDate.AddMinutes(5)), MinimumReplicateId = minDate.replicateID.ToString() });
 }

 //return reDisplay.OrderByDescending(t => t.runDate).ToList();
 return reDisplay; 
```

形成带有日期范围的用户确认列表后，我以复选框列表的形式将其发送到视图，用户选择这些日期，然后我选取所选日期并在下面再次查找这些记录：

```
 var query = from d in selectedDates
                    from o in lf.ReplicateBlocks
                    where (d.Checked &&
                          o.InitiationDate >= d.runDate &&
                          o.InitiationDate <= d.runDate.AddMinutes(5))
                    select o; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:53:50.383

我会整理一下。首先创建一个类来表示您的日期范围。有了那里的所有数据，您甚至可以覆盖该`ToString()`方法以输出您需要的格式，例如

```
public class ReplicationDateRange
{
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public int StartId { get; set; }
    public int EndId { get; set; }
    public override string ToString()
    {
        return String.Format("{0}-{1} Replicate {2}-{3}", StartDate.ToShortDateString(), EndDate.ToShortDateString(), StartId, EndId);
    }
} 
```

然后，您需要做的是继续迭代列表，直到您找到一个不在最后一个基线 5 分钟内的日期，而且还要更新当前范围的结束日期/ID。以下应该实现这一点：

```
var dateRanges = new List<ReplicationDateRange>();
DateTime baselineDate = DateTime.MinValue;
ReplicationDateRange currentDateRange = null;
foreach (var block in lf.ReplicationBlocks.OrderBy(x => x.InitiationDate))
{
    if ((block.InitiationDate - baselineDate).TotalMinutes <= 5)
    {
        currentDateRange.EndDate = block.InitiationDate;
        currentDateRange.EndId = block.ReplicateId;
    }
    else
    {
        baselineDate = block.InitiationDate;
        currentDateRange = new ReplicationDateRange()
        {
            StartDate = block.InitiationDate,
            EndDate = block.InitiationDate,
            StartId = block.ReplicateId,
            EndId = block.ReplicateId
        };
        dateRanges.Add(currentDateRange);
    }
}
foreach (var d in dateRanges)
{
    Console.WriteLine(d);
} 
```

# java - 从 CheckStyle 生成编码指南

> ID：14462987
> 
> 赞同：6
> 
> 时间：2013-01-22T16:12:34.890
> 
> 标签：java, html, coding-style, report, checkstyle

有没有办法从现有的 CheckStyle 配置文件中生成一个“不错的”编码约定/指南文档？

该文档必须包含强制执行规则的描述和配置值（如最大行长度、违规严重性等）。

拥有这样一个文档的好处是可以更快地培养新的团队成员，而无需阅读 CheckStyle 配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-22T20:22:00.900

我通常建议不要生成编码指南文档的一部分，因为这会导致您的软件工程师出现验收问题。此外，在我看来，Checkstyle 规则不应成为编码指南文档本身的一部分。相反，编码指南应该声明“注意不要引起 Checkstyle 问题”。

Checkstyle 工具可以配置信息以向开发人员显示警告。这样，开发人员*不需要*打开外部文档来正确解决 Checkstyle 警告，因为所有必需的信息都已经存在。

示例：[LocalVariableName](http://checkstyle.sourceforge.net/config_naming.html#LocalVariableName)检查检查非最终局部变量的命名约定。它的默认消息文本是：

```
Member Names: Name 'Foo' must match pattern '^[a-z][a-zA-Z0-9]{0,31}$'. 
```

如果您像这样配置检查：

```
<module name="LocalVariableName">
  <message key="name.invalidPattern"
    value="Local variable name ''{0}'' must not be longer than 32 alphanumeric
           characters and start with a lowercase letter. Regex: ''{1}''"/>
</module> 
```

那么输出将是：

```
Local variable name 'Foo' must not be longer than 32 alphanumeric characters and
start with a lowercase letter. Regex: '^[a-z][a-zA-Z0-9]{0,31}$' 
```

诚然，如果您的*所有*开发人员都足够了解他们的正则表达式，那么新的消息文本将不是必需的。但并不是每个人都是正则表达式专家，这只是一个可以应用于许多检查的示例，包括没有正则表达式的检查。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T11:49:35.490

这里给出了一些典型的编码标准：

```
Comments:
    Write Javadoc comments for all classes, methods, and variables.
Naming conventions:
    Class names should be nouns, in mixed case with the first letter of each internal word capitalized (MyClass).
    Variable names should be nouns, in mixed case with a lowercase first letter, and with the first letter of each internal word in upper case (myVariable).
    Constants should be in all uppercase with words separated by underscore (MY_CONSTANT_VALUE).
Indentation:
    Spaces should be preferred to tabs for indenting purposes.
Declarations:
    One declaration per line, with comments, for example:

    int class; // The child's class, from 1 to 8
    int age;   // The child's age

    rather than:

    int class, age;

Statements:
    Opening braces in compound statements should be at the end of the line that begins the compound statement; the closing brace should begin a line and be indented to the beginning of the compound statement, for example:

    while (i < 10) {
    i++;
    }

Best practices:
    Use the final keyword for variables and parameters that will not need to be modified.
    Don't declare variables within loops 
```

# android - viewpager 中的片段内的动画

> ID：14462989
> 
> 赞同：2
> 
> 时间：2013-01-22T16:12:38.083
> 
> 标签：android, animation, android-fragments, android-viewpager

我有个问题。如前所述，我有 ViewPager，里面有 5 个片段。在最后一个片段上，我有两个相对布局，里面有一些小部件。单击按钮时，我有将相对布局更改为可见的动画。
我的问题是，当我向后滚动时，消失的视图变得自己可见......有人经历过类似的事情吗？？？

```
public class WelcomeActivity extends FragmentActivity{

    private FragmentAdapter adapter;
    private ViewPager viewPager;

    @Override
    protected void onCreate(Bundle arg0) {
        super.onCreate(arg0);
        setContentView(R.layout.welcome_activity);

        viewPager = (ViewPager) findViewById(R.id.pager);
        adapter = new FragmentAdapter(getSupportFragmentManager(), viewPager);
        viewPager.setAdapter(adapter);
} 
```

```
public class FragmentAdapter extends FragmentPagerAdapter{

    private ViewPager pager;
    private Fragment mFragmentAtPos0;
    private FragmentManager mFragmentManager;

    public FragmentAdapter(FragmentManager fm, ViewPager p) {
        super(fm);
        this.pager = p;
        this.mFragmentManager = fm;
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0:
            return new ScreenWelcome(pager, this);
        case 1:
            return new ScreenTutorial1();
        case 2:
            return new ScreenTutorial2();
        case 3:
            return new ScreenTutorial3();
        case 4:
            return new ScreenTutorial4();
        case 5:
            return new FlipAnimationFragment();
        default:
            return null;
        }
    }

    @Override
    public int getItemPosition(Object object) {
        return super.getItemPosition(object);
    }

    @Override
    public int getCount() {
        return 6;
    } 
```

```
public class FlipAnimationFragment extends Fragment{
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.flip_animation, container, false);
        layout = (RelativeLayout) view.findViewById(R.id.layout);
        sign_up = (RelativeLayout) view.findViewById(R.id.relativeLayoutSignUp);
        log_in = (RelativeLayout) view.findViewById(R.id.relativeLayoutLogIn);

        create_account_page = (Button) view.findViewById(R.id.buttonCreateAccount);
        log_in_page = (Button) view.findViewById(R.id.buttonSignUpLogIn);

        log_in_page.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if(!pressed){
                    pressed = true;

                    layout.startAnimation(flip);
                }

            }
        });
        create_account_page.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if(!pressed){
                    pressed = true;

                    layout.startAnimation(flip);
                }

            }
        });
}
@Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        flip = new FlipAnimator(sign_up, log_in, 240, 400);
} 
```

# python - 如何在 OpenERP 中定义多公司感知模型

> ID：14462993
> 
> 赞同：5
> 
> 时间：2013-01-22T16:12:40.230
> 
> 标签：python, forms, default-value, openerp

我在 OpenERP 中定义了几个自定义对象，它们应该在多公司环境中使用。因此，每个对象定义一个“company_id”字段。这是所有设置和工作正常。只是，用户界面不是很友好，因为用户需要明确选择新对象实例应该属于的公司。

company_id 字段的设置方式如下：

```
...
'company_id' : fields.many2one('res.company', string='Company', selection=compute_company_select, required=True)
...

def compute_company_select(self, cr, uid, context):
    c_proxy = self.pool.get('res.company')

    user = self.pool.get('res.users').browse(cr, uid, uid, context=context)
    search = [('id', 'child_of', user.company_id.id)]
    if uid == SUPERUSER_ID:
        search = [] #superuser can assign any company

    ids = c_proxy.search(cr, uid, search, context=context)
    return [(c.id, c.name) for c in c_proxy.browse(cr, uid, ids, context=context)] 
```

我也可以通过简单地在字段定义中定义一个域表达式来解决这个问题，使用“compute_company_select”函数中的搜索域。除了超级用户无法分配所有公司之外，如果他没有配置为可以访问所有公司。

我现在要做的是在他创建新记录时用用户公司预先填充 company_id 字段。而这似乎是不可能的。我发现了几种使用静态值或在模块 XML 中定义的值预填充字段的可能性。但似乎没有选项可以使用仅在运行时可用的值，即当前用户记录。

我正在使用 OpenERP 6.1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T11:32:46.223

官方 OpenERP 插件中的许多文档都具有类似的多公司特性，因此您可能应该重用相同的实现技术，这似乎与您的用例相匹配。

如果您搜索`"company_id"`或`"company_id.*fields.many2one"`，则源代码中有大量示例，例如模块中的[Sales Shops 。](https://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/7133/sale/sale.py#L32)`sale`

简而言之，您将需要：

1.  将字段声明为`company_id`的常规字段。默认*[安全记录规则](http://doc.openerp.com/v6.1/book/8/8_20_Config/8_20_Config_accessRights.html#record-rules-for-objects)*（[在此处](https://bazaar.launchpad.net/~openerp/openobject-server/6.1/view/4333/openerp/addons/base/res/res_security.xml#L25)定义）将负责仅动态显示作为用户当前公司子公司的公司。用户可以随时在偏好中将他们当前的公司更改为他们*允许的任何公司，以在不同的公司环境中工作。*而且由于*安全记录规则*不适用于特殊管理员用户，因此在以管理员身份登录时始终可以选择任何公司。`many2one``res.company`

     **```
    'company_id': fields.many2one('res.company', 'Company', required=False) 
    ```** 
***   创建新记录时自动选择用户当前的公司作为默认值。该框架提供了一种方法来做到这一点：`res.company._company_default_get()`. 可以定义自定义规则来为每种文档选择默认公司，但默认值将是用户当前的公司。因此，只需将此代码段添加到您的模型中即可`_defaults`：

    ```
    'company_id': lambda self,cr,uid,ctx: self.pool['res.company']._company_default_get(cr,uid,object='<your_model>',context=ctx) 
    ```

    *   将该字段添加`company_id`到模型的表单视图中。通常您希望将其限制在`multi-company`组中，仅向实际需要它的用户显示：

    ```
    <field name="company_id" groups="base.group_multi_company"/> 
    ```** 

 **应该就是这么简单。**

# php - mod_rewrite 错误和权限被拒绝

> ID：14462997
> 
> 赞同：1
> 
> 时间：2013-01-22T16:12:53.543
> 
> 标签：php, mod-rewrite, seo

我正在使用 mod_rewrite 将“url.com/foo”之类的网站重写为“url.com/index.php?site=foo”。

编码：

```
RewriteEngine On
RewriteBase /
RewriteRule ^([0-9a-zA-Z]+)$ index.php?site=$1 
```

如果我单击带有 href="/foo" 的链接，它会给我

```
http://url.com/foo/?site=foo 
```

该代码在同一 V-Server 上的其他站点上工作，我安装了样板，但我现在不使用它的 .htaccess 来修复 mod_rewrite，所以它不能是样板问题，或者？

我还尝试了以下代码：

```
RewriteEngine On
RewriteBase /
RewriteRule ^(.*)$ index.php?site=$1 
```

该代码至少重写为 index.php?site=foo 但它仍然像上面的示例一样创建 url，中间有不必要的文件夹。

编辑：以确保每个人都理解整体想法：

这些文件基于[http://url.com](http://url.com) (index.php, .htaccess) ，所以我将 RewriteBase 设置为“/”。它应该采用类似的链接

```
http://url.com/foo 
```

并将它们重写为

```
http://url.com/index.php?site=foo 
```

不包含任何文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:31:13.860

我解决了，该死的，我太愚蠢了；）

我有一个名为的文件夹`url.com/foo/`，我重定向的链接是`url.com/foo`，`url.com/index.php?site=foo`所以它总是试图进入那个文件夹。因为我重命名了文件夹，所以它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-31T07:58:50.443

我在 RewriteRule 上收到了类似的错误消息

```
pcfg_openfile: unable to check htaccess file, ensure it is readable 
```

我也有类似于重定向 URL 部分的子文件夹名称，但重命名它并没有解决问题（正如 Chris 所建议的那样）。

经过多次尝试，通过将子文件夹权限更新为 755（使用 cPanel 文件夹权限对话框）解决了问题：

```
User:  Read, Write, Execute
Group: Read,        Execute
World: Read,        Execute 
```

PS：我不确定这种情况是否真的需要重命名子文件夹，因为在重命名之前和之后，错误消息是相同的。

# ios - FTPHelper 库不工作 iOS

> ID：14462999
> 
> 赞同：0
> 
> 时间：2013-01-22T16:13:09.693
> 
> 标签：ios, objective-c, xcode, ftp

你好，我有这个代码，不要下载任何东西......

```
 FTPHelper *ftp;
    ftp.urlString = @"ftp.marignal.com";
    ftp.uname = @"whttpapp.marignal.com";
    ftp.pword = @"hidden";
    ftp.filePath = @"Barcos/Imagenes";
    [ftp download:@"catlanza.bmp"]; 
```

我正在使用这个库：[https ://github.com/erica/iphone-3.0-cookbook-/tree/master/C13-Networking/15-FTP%20Helper](https://github.com/erica/iphone-3.0-cookbook-/tree/master/C13-Networking/15-FTP%20Helper)

该方法下载，它假设将所选文件安装在 Documents 目录中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:27:39.223

在模拟器中查找它复制到的路径。

您可能需要添加文档： ftp.filePath = @"Documents/Barcos/Imagenes";

或者以编程方式获取路径： [什么是文档目录（NSDocumentDirectory）？](https://stackoverflow.com/questions/6907381/what-is-the-documents-directory-nsdocumentdirectory)